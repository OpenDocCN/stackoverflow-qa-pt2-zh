# StackOverflow 问答 13288000-13288999

# php - php Swear 代码不太好用

> ID：13288004
> 
> 赞同：0
> 
> 时间：2012-11-08T11:16:46.227
> 
> 标签：php, string, str-replace

我在下面有这段代码，它可以正常工作。

```
$swearWords = file("blacklist.txt");
foreach ($swearWords as $naughty)
{
    $post = str_ireplace(rtrim($naughty), "<b><i>(oops)</i></b>", $post); 
} 
```

问题在于包含你发誓的话的单词..

因为瞬间“斯肯索普”里面有一个坏词。此代码将其更改为 S(oops)horpe。

有什么想法可以解决这个问题吗？我需要吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T11:23:05.637

您可以用忽略具有前导和/或尾随字母的单词的 a 替换 your `str_replace()`，`preg_replace`因此只有当它单独存在时才会替换发誓词：

```
$post = "some Scunthorpe text";
$newpost = $post;
$swearWords = file("blacklist.txt");
foreach ($swearWords as $naughty)
{
    $naughty = preg_quote($naughty, '/');
    $newpost = preg_replace("/([^a-z]+{$naughty}[^a-z]*|[^a-z]+{$naughty}[^a-z]+)/i", "<b><i>(oops)</i></b>", $newpost); 
}
if ($newpost) $post = $newpost;
else echo "an error occured during regex replacement"; 
```

请注意，它仍然允许使用诸如“aCUNT”、“soFUCKINGstupid”之类的脏话......我不知道你怎么能处理它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T11:24:33.567

脏话和脏话过滤器在捕捉“误报”方面是出了名的糟糕。

用字典术语来说，处理这些问题的最简单方法是使用白名单（与黑名单类似）。包含匹配项的单词列表，但本质上是*允许*的。

值得你阅读这篇文章：[你如何实现一个好的亵渎过滤器](https://stackoverflow.com/questions/273516/how-do-you-implement-a-good-profanity-filter)，详细说明优点和缺点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T11:22:00.827

这应该这样做：

```
$swearWords = file("blacklist.txt");
$post_words = preg_split("/\s+/", $post);

foreach ($swearWords as $naughty)
{
    foreach($post_words as &$word)
    {
        if(stripos($word, $naughty) !== false)
        {
            $word = "<b><i>(oops)</i></b>";
        }
    }
}
$post = implode(' ', $post_words); 
```

那么发生了什么？它会加载您的脏话，然后循环播放这些内容。然后它遍历帖子中的所有单词，并检查当前的脏话是否存在于当前查看的单词中。如果是这样，它将删除它并用您的“哎呀”替换它。

请注意，这将删除任何空白格式，因此请先检查这是否适合您的情况（您是否关心制表符或多个连续空格？）

# css - img 标签的奇怪行为

> ID：13288006
> 
> 赞同：0
> 
> 时间：2012-11-08T11:16:52.297
> 
> 标签：css, html, grid, image

在页面上创建 div 网格时遇到一些问题，但是网格中的每个单元格中都可以有不同类型的元素，例如`<div></div>`or `<img/>`。网格正在生成，但当单元格的元素很少不同时，它会失真。

这是问题的一个[小提琴示例](http://jsfiddle.net/22fD6/1/)。

但是，当您用它替换`img`标签时，`divs`它可以正常工作。任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T11:21:20.393

在这种情况下，您可以使用`vertical-align:top;`让您的元素向上滚动到顶行，而不是从最后一个的底部开始。[http://jsfiddle.net/22fD6/5/](http://jsfiddle.net/22fD6/5/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T11:21:37.843

您应该适用`vertical-align:top`于`div`元素。在这里小提琴：http: [//jsfiddle.net/keaukraine/AQnS4/](http://jsfiddle.net/keaukraine/AQnS4/)

# java - 测试 Spring MVC Web 应用程序时切换数据库？

> ID：13288010
> 
> 赞同：0
> 
> 时间：2012-11-08T11:17:12.177
> 
> 标签：java, database, spring, testing, spring-mvc

Spring 项目（以其生产形式）将使用 MySQL 数据库。我希望在项目上运行的测试使用 HYPERSONIC_IN_MEMORY。

我在 test/resources 文件夹中添加了以下新文件。

*   数据库属性
*   应用程序上下文.xml
*   测试持久性.xml

但是，该项目引发了 MYSQL 语法错误（它试图以某种方式将 MySQL 与 HYPERSONIC 一起使用）。

考虑到我是一个完全的初学者（Spring 中的第一个项目），我想知道切换数据库进行测试的步骤是什么（我可能做错了什么）。

LE：这是我在运行 maven 测试时得到的结果：

```
Tests run: 9, Failures: 0, Errors: 9, Skipped: 0, Time elapsed: 12.29 sec <<< FAILURE!
testCountAllAccountAllocations(com.mms.pone.portal.domain.AccountAllocationIntegrationTest)  Time elapsed: 11.813 sec  <<< ERROR!
org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction; nested exception is javax.persistence.PersistenceException: org.hibernate.exception.GenericJDBCException: Cannot open connection
    at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:427)
    at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:371)
    at org.springframework.test.context.transaction.TransactionalTestExecutionListener$TransactionContext.startTransaction(TransactionalTestExecutionListener.java:513)
    at org.springframework.test.context.transaction.TransactionalTestExecutionListener.startNewTransaction(TransactionalTestExecutionListener.java:271)
    at org.springframework.test.context.transaction.TransactionalTestExecutionListener.beforeTestMethod(TransactionalTestExecutionListener.java:164)
    at org.springframework.test.context.TestContextManager.beforeTestMethod(TestContextManager.java:358)
    at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:73)
    at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:83)
    at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:72)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:231)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
    at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
    at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:174)
    at org.apache.maven.surefire.junit4.JUnit4TestSet.execute(JUnit4TestSet.java:53)
    at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:123)
    at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:104)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray(ReflectionUtils.java:164)
    at org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:110)
    at org.apache.maven.surefire.booter.SurefireStarter.invokeProvider(SurefireStarter.java:172)
    at org.apache.maven.surefire.booter.SurefireStarter.runSuitesInProcessWhenForked(SurefireStarter.java:104)
    at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:70)
Caused by: javax.persistence.PersistenceException: org.hibernate.exception.GenericJDBCException: Cannot open connection
    at org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1387)
    at org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1315)
    at org.hibernate.ejb.AbstractEntityManagerImpl.throwPersistenceException(AbstractEntityManagerImpl.java:1397)
    at org.hibernate.ejb.TransactionImpl.begin(TransactionImpl.java:63)
    at org.springframework.orm.jpa.DefaultJpaDialect.beginTransaction(DefaultJpaDialect.java:70)
    at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:377)
    ... 31 more
Caused by: org.hibernate.exception.GenericJDBCException: Cannot open connection 
```

还有更多。我觉得 maven 没有使用新的 xml 文件并且仍然坚持旧的。

我有什么办法可以弄清楚吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T11:21:01.620

搜索`org.hibernate.dialect.MySQLDialect`并将其替换为`org.hibernate.dialect.HSQLDialect`( [docs](http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html/ch03.html#configuration-optional-dialects) )

**[编辑]**错误显示“无法打开连接”。检查 JDBC URL、用户+密码以及输出中的更多错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T14:01:00.253

我假设这是您原来的 applicationContext.xml 的外观（还假设 persistence.xml 文件定义了一个带有 jndi 名称“testEM”的持久性单元）

```
<jee:jndi-lookup id="entityManagerFactory" jndi-name="java:comp/env/testEM" />

<bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
    <property name="entityManagerFactory" ref="entityManagerFactory" />
</bean> 
```

出于测试目的，您基本上需要覆盖 entityManagerFactory 的创建方式。在您的 applicationContext-test.xml 文件中覆盖“entityManagerFactory”bean 定义，如下面的代码片段所示。在 src/test/resources 中创建一个“META-INF/test-persistence.xml”，以创建与内存中 hsql 数据库的连接。

**测试持久性.xml**

```
 <persistence-unit name="testPu">
    <properties>
        <property name="hibernate.connection.driver_class" value="com.mysql.jdbc.Driver"/>
        <property name="hibernate.connection.password" value=""/>
        <property name="hibernate.connection.url" value="jdbc:hsqldb:mem:schemaname"/>
        <property name="hibernate.connection.username" value="sa"/>
        <property name="hibernate.dialect" value="org.hibernate.dialect.HSQLDialect"/>
    </properties>
</persistence-unit> 
```

**applicationContext-test.xml**

```
 <!--  Import the original applicationContext and override properties for test purposes -->
<import resource="classpath:applicationContext" />

<!--  In our case, we need to override entityManagerFactory definition -->
<bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="persistenceXmlLocation" value="classpath*:META-INF/test-persistence.xml" />
    <!-- other properties (omitted) -->
</bean> 
```

# wordpress - Wordpress 网络发票 2checkout 重定向

> ID：13288012
> 
> 赞同：0
> 
> 时间：2012-11-08T11:17:15.057
> 
> 标签：wordpress, invoice, 2checkout

我有 2checkout 帐户在演示模式下运行，并且刚刚将 2checkout 与 wordpress 插件网络发票集成。发票正在完美生成，但是当用户完成交易并被重定向回我的网站时，它会显示一条错误消息“未找到发票”。发票状态也未更新为已付款。我已经在 2checkout 管理仪表板中尝试了所有三种重定向方法。目前我已将其设置为“返回链接”。我应该在 wordpress 的结帐页面上添加一些代码还是我错过了网络发票配置页面中的一些设置？

[这](http://www.assignmentspro.com/checkout/?invoice_id=e3a8153b837128505cd9089b6bbd1413)是发票的链接：

我提到的错误仅在 2checkout 完成交易并且用户被重定向回我的网站后才会出现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T14:57:31.467

网络发票动态地传递批准的 URL，`invoice_id`附加诸如“http://www.yoursite.com/sample-page/?invoice_id=31540985dec0e37bd0142e34856ee1df”。如果此 URL 中的域与您在 2Checkout 帐户中设置的域不匹配，它将不会被使用并且无法找到发票。

我的建议是检查并确保域与您在 2Checkout 帐户中注册的域相匹配。如果您只是使用 2Checkout 模拟账户，您可以通过单击“立即申请”按钮在您的账户主页上填写注册申请的第一页，然后保存您的更改以设置您的模拟账户的 URL。

与往常一样，请随时联系 techsupport@2co.com 以获得测试帮助。

# python - 安装了 MySQLdb，在 virtualenv 之外工作，但在它内部不存在。如何解决？

> ID：13288013
> 
> 赞同：9
> 
> 时间：2012-11-08T11:17:21.430
> 
> 标签：python, virtualenv, mysql-python

我正在使用所有软件（Django、Python、virtualenv、MySQLdb）的最新版本，但我无法让它工作。当我从 virtualenv 外部的 python 提示符中运行“import MySQLdb”时，它可以工作，里面显示“ImportError：没有名为 MySQLdb 的模块”。

我正在尝试学习 Python 和 Linux 网络开发。我知道使用 SQLLite 是最简单的，但我想学习如何开发与我在 .NET 中可以做的相比的更大规模的应用程序。我已经阅读了 Google 上的每一篇博客文章以及 StackOverflow 上的每一篇文章，他们都建议我运行“sudo pip install mysql-python”，但它只是说“要求已经满足：mysql-python in /usr/lib/pymodules/ python2.7"

任何帮助，将不胜感激！我被困在这里，不想认输，只是回到微软技术上做这件事，因为我什至无法启动和运行基本的开发环境。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-08T11:22:10.967

如果您使用开关（默认）创建了 virtualenv `--no-site-packages`，则系统范围内安装的附加组件（例如 MySQLdb）不包含在虚拟环境包中。

您需要使用`pip`与 virtualenv 一起安装的命令来安装 MySQLdb。`bin/activate`使用脚本激活 virtualenv ，或者`bin/pip`从 virtualenv 中使用在本地安装 MySQLdb 库。

或者，使用`--system-site-package`交换机创建一个新的 virtualenv，其中包含系统站点包。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-09T09:24:49.267

1.  `source $ENV_PATH/bin/activate`
2.  `pip uninstall MySQL-python`
3.  `pip install MySQL-python`

这对我有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-28T04:15:29.567

我遇到了同样的问题，但是使用 virtualenv 中的 pip 并没有解决问题，因为我收到了这个错误

```
error: could not delete '/Library/Python/2.7/site-packages/_mysql.so': Permission denied 
```

早些时候我已经安装了这个包`sudo pip install mysql-python`

要解决，将文件复制到`/Library/Python/2.7/site-packages/MySQL_python-1.2.5-py2.7.egg-info`并包含在环境变量中。`/Library/Python/2.7/site-packages/_mysql*``~/v/lib/python-2.7/site-packages``/usr/local/mysql/lib``DYLD_LIBRARY_PATH`

`export DYLD_LIBRARY_PATH=/usr/local/mysql/lib`对于我正在做的第二步`~/.profile`

# java - 每次测试后重新加载 Spring 应用程序上下文

> ID：13288029
> 
> 赞同：37
> 
> 时间：2012-11-08T11:18:20.087
> 
> 标签：java, spring, junit

我有一个包含 2 个测试的测试类：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = { "classpath:applicationContextTest.xml" })
@Transactional
@TransactionConfiguration(defaultRollback = true)

public class MyITest extends implements BeanFactoryAware {

    private BeanFactory beanFactory;

    @Test
    public void test1() throws Exception {}

    @Test
    public void test2() throws Exception {}        
} 
```

当我单独运行测试时，我没有收到任何错误，但是当我一起运行所有测试时，就会失败。此失败是由于一些测试修改了应用程序上下文：

```
 b = beanFactory.getBean("logDataSource", BasicDataSource.class);
  b.set ... 
```

是否有单独运行此测试的选项？我只想在 test1 启动时读取所有必要的内容，然后运行测试，然后关闭所有必要的内容。然后启动test2。

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-11-08T11:58:55.023

您可以在修改应用程序上下文的测试类上使用 @DirtiesContext 注释。

[Java 文档](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/test/annotation/DirtiesContext.html)

[弹簧文档](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/testing.html#integration-testing-annotations-spring)

默认情况下，这将在整个测试类运行后将应用程序上下文标记为脏。如果您想在单个测试方法之后将上下文标记为脏，那么您可以对测试方法进行注释，或者在您的类级别注释中将 classMode 属性设置为 AFTER_EACH_TEST_METHOD。

```
@DirtiesContext(classMode = ClassMode.AFTER_EACH_TEST_METHOD) 
```

# java - Passing line.separator to maven

> ID：13288030
> 
> 赞同：2
> 
> 时间：2012-11-08T11:18:31.600
> 
> 标签：java, maven, exec-maven-plugin

I would like to pass `line.separator` to exec plugin but it seems that I do not correctly passing it. I have tried many combinations but could not find the solution. What is the correct way?

```
<plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>exec-maven-plugin</artifactId>
    <version>1.2.1</version>
    <executions>
        <execution>
            <phase>test</phase>
            <goals>
                <goal>exec</goal>
            </goals>
            <configuration>
                <executable>java</executable>
               <arguments>
                   <argument>-Dline.separator=\n</argument>
                   <argument>-classpath</argument>
                   <classpath />
                   <argument>GeneratorExec</argument>
               </arguments>
            </configuration>
        </execution>
    </executions>
</plugin> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T11:43:58.800

那是行不通的。问题是该命令是在 shell 中执行的。shell 会将其解释`\n`为两个字符，而不是一个转义字符。

看看这个博客：[Passing '\n' (new-line) on command line in Java](http://geekexplains.blogspot.se/2009/05/passing-n-new-line-on-command-line-in.html)。

您将不得不让`GeneratorExec`这两个字符作为参数，然后在程序中处理它。

# windows-8 - WinJS：将 ListView itemDataSource 与 List.groups.dataSource 绑定失败

> ID：13288034
> 
> 赞同：1
> 
> 时间：2012-11-08T11:18:39.987
> 
> 标签：windows-8, microsoft-metro, winjs

我正面临一个非常烦人的 grouped 行为`WinJS.Binding.List`。

在尝试创建 SemanticZoom 时，我使用来自以下位置的相同数据填充（标记）缩小的视图项和放大的视图标题`list.groups.dataSource`：

```
<div id="semanticZoomDiv" data-win-control="WinJS.UI.SemanticZoom" data-win-options="{ initiallyZoomedOut: true }">
    <div id="zoomedInListView"
        data-win-control="WinJS.UI.ListView" 
        data-win-options="{
            itemDataSource: Data.myCategories.dataSource,
            itemTemplate: select('#zoomedInItemTemplate'),
            groupDataSource: Data.myCategories.groups.dataSource,
            groupHeaderTemplate: select('#zoomedInHeaderTemplate')
        }"
    ></div>
    <div id="zoomedOutListView"
        data-win-control="WinJS.UI.ListView"
        data-win-options="{
            itemDataSource: Data.myCategories.groups.dataSource,
            itemTemplate: select('#zoomedOutItemTemplate')
        }"
    ></div>              
</div> 
```

此代码是否有效取决于我的数据：

*   如果我使用我的真实世界数据，它是从远程数据生成的 3 级类别树（我称为 WinJS.xhr），则缩小的 ListView 无法将其 itemDataSource 与组绑定。所以我的 SemanticZoom 处理得很好，但缩小的视图是空的。

    更准确地说，在我的缩小视图中：

    1.  此代码失败：

        ```
        data-win-options="{
            itemDataSource: Data.myCategories.groups.dataSource,
            itemTemplate: select('#zoomedOutItemTemplate')
        }" 
        ```

    2.  此代码有效，但在我想要组时显示详细类别：

        ```
        data-win-options="{
            itemDataSource: Data.myCategories.dataSource,
            itemTemplate: select('#zoomedOutItemTemplate')
        }" 
        ```

    3.  这段代码有效，这证明了我早些时候打电话时我的组格式`createGrouped`正确，但这样做对我来说毫无意义，因为我需要缩小视图来仅显示要缩放的主要组：

        ```
        data-win-options="{
            itemDataSource: Data.myCategories.dataSource,
            itemTemplate: select('#zoomedOutItemTemplate'),
            groupDataSource: Data.myCategories.groups.dataSource
        }" 
        ```

*   如果我使用示例和更简单的数据，一切正常，我可以使用我的 SemanticZoom。

由于错误似乎取决于我的输入数据而发生，下面是我定义的原始数据的两个片段`WinJS.Binding.List`：

1.  真实世界的数据，不起作用：（从我生成的数据中进行 json 字符串化）

    ```
    var myCategories = [{
        "id":"CAT_1_1",
        "title":"Category 1.1",
        "groupKey":0,
        "groupId":"CAT_1",
        "groupTitle":"Category 1" },
    {...}]; 
    ```

2.  样本数据，工作：（手写）

    ```
    var myCategories = [
        { group: 1, id: "1.1", title: "item 1.1" },
        { group: 1, id: "1.2", title: "item 1.2" },
    ]; 
    ```

仅供参考：-错误不是来自模板，我检查过。

感谢您的帮助，我已经为此苦苦挣扎了2天...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-05T13:59:05.243

我终于找到了问题：

`WinJS.Binding.List.createGrouped()`必须接收一个`groupKey(itemData)`函数作为参数，该函数返回一个键来标识每个项目的组。

**返回的键必须是 STRING，而我的真实数据返回的是 INT**。改变这个解决了这个问题。

这在常见的 Windows 8 快速入门中没有提到，混淆可能来自`compare(leftKey, rightKey)`使用组键计算排序标准并返回数字的函数。

希望这会有所帮助。

# java - Android：显示默认活动而不是启动器

> ID：13288035
> 
> 赞同：0
> 
> 时间：2012-11-08T11:18:43.823
> 
> 标签：java, android, xml

我正在制作一个简单的 Android 应用程序，它只包含两个活动，.Password 和 .Adder

```
<activity
        android:name=".Adder"
        android:label="@string/title_activity_adder" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
    <activity
        android:name=".Password"
        android:label="@string/title_activity_adder" >
        <intent-filter>
            <action android:name="android.intent.action.PASSWORD" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity> 
```

**.Password 活动设置为 LAUNCHER，但是当我运行它时，.Adder 活动向我们显示。**

我有两个活动的 .xml 和 .java 文件，通过 setContentView() 正确连接，Eclipse 根本没有报告任何文件中的任何类型的错误。

Password Activity 检查正确的密码并将控制权切换到 Adder Activity：

```
Intent openStartingPoint = new Intent("com.example.pointsadder.MAIN");
startActivity(openStartingPoint); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T11:36:13.727

您不必为每个活动编写意图过滤器。正确的xml：

```
<activity
    android:name=".Adder"
    android:label="@string/title_activity_adder" >
</activity>
<activity
    android:name=".Password"
    android:label="@string/title_activity_adder" >
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
</activity> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T11:31:57.267

改变这个：

```
<activity
    android:name=".Password"
    android:label="@string/title_activity_adder" >
    <intent-filter>
        <action android:name="android.intent.action.PASSWORD" />
        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
</activity> 
```

对此：

```
<activity
    android:name=".Password"
    android:label="@string/title_activity_adder" >
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
</activity> 
```

并修改它，如下所示：

```
<activity
    android:name=".Adder"
    android:label="@string/title_activity_adder" >
</activity> 
```

请参阅此链接： http: [//developer.android.com/guide/topics/manifest/manifest-intro.html#iconlabel](http://developer.android.com/guide/topics/manifest/manifest-intro.html#iconlabel)了解更多详情。

# android - 来自 Drawable 的图像没有圆角

> ID：13288037
> 
> 赞同：1
> 
> 时间：2012-11-08T11:18:53.527
> 
> 标签：android

我指的是[这个](https://stackoverflow.com/questions/2459916/how-to-make-an-imageview-to-have-rounded-corners/3292810#3292810)问题，它链接到[这篇](http://ruibm.com/?p=184)关于如何在图像上创建圆角的文章。

它适用于我从 Web 下载的图像，但是当我从 Resources/Drawable 文件夹中读取图像时，图像没有得到四舍五入。

从网络获取图像时，我使用：

```
Bitmap img = BitmapFactory.decodeStream(inputStream); 
```

从我使用的资源中解码时：

```
Bitmap img = BitmapFactory.decodeResource(ctx.getResources(), R.drawable.profile_photo); 
```

从资源中解码时，返回的位图不为空。

关于我在哪里出错的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T11:32:05.220

添加“形状”（可绘制的 XML）。

```
<shape xmlns:android="http://schemas.android.com/apk/res/android"> 
<solid android:color="#ffffffff"/>    

<stroke android:width="3dp"
        android:color="#ff000000"
        />

<padding android:left="1dp"
         android:top="1dp"
         android:right="1dp"
         android:bottom="1dp"
         /> 

<corners android:bottomRightRadius="7dp" android:bottomLeftRadius="7dp" 
 android:topLeftRadius="7dp" android:topRightRadius="7dp"/> 
```

& 将此形状与您的可绘制对象一起使用。或使用此代码

```
public static Bitmap getRoundedCornerBitmap(Bitmap bitmap) {
Bitmap output = Bitmap.createBitmap(bitmap.getWidth(),
     bitmap.getHeight(), Config.ARGB_8888);
Canvas canvas = new Canvas(output);

final int color = 0xff424242;
final Paint paint = new Paint();
final Rect rect = new Rect(0, 0, bitmap.getWidth(), bitmap.getHeight());
final RectF rectF = new RectF(rect);
final float roundPx = 12;

paint.setAntiAlias(true);
canvas.drawARGB(0, 0, 0, 0);
paint.setColor(color);

canvas.drawRoundRect(rectF, roundPx, roundPx, paint);

paint.setXfermode(new PorterDuffXfermode(Mode.SRC_IN));
canvas.drawBitmap(bitmap, rect, rect, paint);

return output;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T12:26:13.257

我刚刚发现问题是由于输入图像的分辨率不同。

来自资源的图像比网络大得多，因此我需要增加半径大小以获得舍入效果。

# java - HttpClient 4.2.2 和带有用户名/密码的代理

> ID：13288038
> 
> 赞同：4
> 
> 时间：2012-11-08T11:18:55.787
> 
> 标签：java, proxy, httpclient, squid, http-status-code-407

我对 HttpClient 4.2.2 和使用用户名/密码的代理有疑问。HttpClient 以这种方式工作：

1.  项目清单
2.  发送没有代理内容的请求（但是我为每个请求设置了代理参数）
3.  从 Squid 获取 407 错误的响应
4.  发送带有代理内容的请求

这是非常奇怪的行为，是否可以在每个请求中添加有关代理的信息？我尝试为每个请求添加硬编码的“代理授权”标头，它工作正常，为什么 HttpClient 不能这样做？

**Java 代码**

```
DefaultHttpClient httpClient = new DefaultHttpClient();
httpClient.getParams().setParameter(PROTOCOL_VERSION, HTTP_1_1);
...
String proxyServer = getProxyServer();
int proxyPort = getProxyPort();
List<String> authpref = new ArrayList<String>();
authpref.add(AuthPolicy.BASIC);
httpClient.getParams().setParameter(AuthPNames.PROXY_AUTH_PREF, authpref);
String proxyUser = getProxyUser();
String proxyPassword = getProxyPassword();
CredentialsProvider credsProvider = httpClient.getCredentialsProvider();
credsProvider.setCredentials(new AuthScope(proxyServer, proxyPort), new UsernamePasswordCredentials(proxyUser, proxyPassword));
httpClient.setCredentialsProvider(credsProvider);
HttpHost proxy = new HttpHost(proxyServer, proxyPort, (proxyServer.indexOf("https") != 0) ? "http" : "https");
httpClient.getParams().setParameter(ConnRoutePNames.DEFAULT_PROXY, proxy);
...
HttpPut put = new HttpPut(url);

/*** hardcoded header ***/
//put.addHeader("Proxy-Authorization", "Basic eHRlbmR4LmRuZXByOnF3ZXJ0eQ==");
/*** hardcoded header ***/

put.setEntity(entity);
httpClient.execute(put);
httpClient.getConnectionManager().shutdown();

[DefaultClientConnection] Sending request: PUT http://172.26.27.22:8080/myapp/rest/2/3/29/image1.jpg HTTP/1.1
[headers] >> PUT http://172.26.27.22:8080/myapp/rest/2/3/29/image1.jpg HTTP/1.1
[headers] >> Authorization: Basic eGRldjo0YTFmNmMwOTgyYWRkMWQ0NDg1YjRhMGE4YWMxY2JjMWNiMTA0ODc1
[headers] >> Content-Length: 2
[headers] >> Host: 172.26.27.22:8080
[headers] >> Proxy-Connection: Keep-Alive
[headers] >> User-Agent: Apache-HttpClient/4.2.2 (java 1.5)
[DefaultClientConnection] Receiving response: HTTP/1.0 407 Proxy Authentication Required
[headers] << HTTP/1.0 407 Proxy Authentication Required
[headers] << Server: squid/2.7.STABLE8
[headers] << Date: Thu, 08 Nov 2012 10:09:49 GMT
[headers] << Content-Type: text/html
[headers] << Content-Length: 1431
[headers] << X-Squid-Error: ERR_CACHE_ACCESS_DENIED 0
[headers] << Proxy-Authenticate: Basic realm="Please, enter username and password"
[headers] << X-Cache: MISS from 172.26.27.94
[headers] << X-Cache-Lookup: NONE from 172.26.27.94:3128
[headers] << Via: 1.0 172.26.27.94:3128 (squid/2.7.STABLE8)
[headers] << Connection: close
[DefaultHttpClient] Authentication required
[DefaultHttpClient] 172.26.27.94:3128 requested authentication
[ProxyAuthenticationStrategy] Authentication schemes in the order of preference: [Basic]
[DefaultHttpClient] Selected authentication options: [BASIC]
[DefaultClientConnection] Connection 0.0.0.0:63344<->172.26.27.94:3128 closed
[DefaultClientConnectionOperator] Connecting to 172.26.27.94:3128
[RequestAddCookies] CookieSpec selected: best-match
[RequestAuthCache] Re-using cached 'basic' auth scheme for http://172.26.27.22:8080
[RequestAuthCache] No credentials for preemptive authentication
[RequestProxyAuthentication] Proxy auth state: CHALLENGED
[RequestProxyAuthentication] Generating response to an authentication challenge using basic scheme
[DefaultHttpClient] Attempt 2 to execute request
[DefaultClientConnection] Sending request: PUT http://172.26.27.22:8080/myapp/rest/2/3/29/image1.jpg HTTP/1.1
[headers] >> PUT http://172.26.27.22:8080/myapp/rest/2/3/29/image1.jpg HTTP/1.1
[headers] >> Authorization: Basic eGRldjo0YTFmNmMwOTgyYWRkMWQ0NDg1YjRhMGE4YWMxY2JjMWNiMTA0ODc1
[headers] >> Content-Length: 2
[headers] >> Host: 172.26.27.22:8080
[headers] >> Proxy-Connection: Keep-Alive
[headers] >> User-Agent: Apache-HttpClient/4.2.2 (java 1.5)
[headers] >> Proxy-Authorization: Basic eHRlbmR4LmRuZXByOnF3ZXJ0eQ==
[DefaultClientConnection] Receiving response: HTTP/1.0 201 Created
[headers] << HTTP/1.0 201 Created
[headers] << Content-Length: 0
[headers] << Date: Thu, 08 Nov 2012 10:09:49 GMT
[headers] << X-Cache: MISS from 172.26.27.94
[headers] << X-Cache-Lookup: MISS from 172.26.27.94:3128
[headers] << Via: 1.1 172.26.27.94:3128 (squid/2.7.STABLE8)
[headers] << Connection: keep-alive
[headers] << Proxy-Connection: keep-alive 
```

*鱿鱼原木*

```
1352370666.778      0 172.26.27.94 TCP_DENIED/407 1870 PUT http://172.26.27.22:8080/myapp/rest/2/3/29/image1.jpg - NONE/- text/html
1352370671.429      8 172.26.27.94 TCP_MISS/201 282 PUT http://172.26.27.22:8080/myapp/rest/2/3/29/image1.jpg proxyuser DIRECT/172.26.27.22 -
1352370671.474      0 172.26.27.94 TCP_DENIED/407 1882 PUT http://172.26.27.22:8080/myapp/rest/2/3/29/image2.jpg - NONE/- text/html
1352370671.486      7 172.26.27.94 TCP_MISS/201 282 PUT http://172.26.27.22:8080/myapp/rest/2/3/29/image2.jpg proxyuser DIRECT/172.26.27.22 - 
```

**带有硬编码的标头**

java日志中没有407错误，squid日志

*鱿鱼原木*

```
1352370542.016      8 172.26.27.94 TCP_MISS/201 282 PUT http://172.26.27.22:8080/myapp/rest/2/3/29/image1.jpg proxyuser DIRECT/172.26.27.22 -
1352370542.033      7 172.26.27.94 TCP_MISS/201 282 PUT http://172.26.27.22:8080/myapp/rest/2/3/29/image2.jpg proxyuser DIRECT/172.26.27.22 - 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T21:55:34.727

使用 HTTP 代理的身份验证过程在 RFC2616 [§14.33](https://www.rfc-editor.org/rfc/rfc2616#section-14.33)和 §14.34 中进行了描述，并且与您在 HttpClient 中看到的完全一样。这包括：

*   代理发送**407（需要代理身份验证）**响应，其中**Proxy-Authenticate**标头包含适用于所请求资源的质询，
*   客户端发出带有**Proxy-Authorization**标头的新请求，该标头由包含身份验证信息的凭据组成。

[本教程](https://hc.apache.org/httpcomponents-client-ga/tutorial/html/authentication.html)（第 4.8 节）描述了使用 HttpClient 实现抢先式身份验证，并且需要预先填充客户端对象的身份验证缓存。不幸的是，他们的代码在对代理服务器进行预身份验证时不起作用。理解如何正确处理它可能有点棘手，但实际上它就像将参数传递给**BasicScheme**构造函数一样简单：

```
AuthCache authCache = new BasicAuthCache();

AuthScheme basicAuthScheme = null;
if (isProxy) {
   basicAuthScheme = new BasicScheme(ChallengeState.PROXY);
} else {
   basicAuthScheme = new BasicScheme(ChallengeState.TARGET);
}

authCache.put(host, basicAuthScheme);
httpContext.setAttribute(ClientContext.AUTH_CACHE, authCache); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T11:36:06.067

这是你的 AuthScope：

```
// You set proxyServer here vvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvv
credsProvider.setCredentials(new AuthScope(proxyServer, proxyPort), new UsernamePasswordCredentials(proxyUser, proxyPassword));
httpClient.setCredentialsProvider(credsProvider);
// But here you are looking for the indexof https to determine if it is an SSL proxy
// is the String returned from getProxyServer() above a URL or a host name?
HttpHost proxy = new HttpHost(proxyServer, proxyPort, (proxyServer.indexOf("https") != 0) ? "http" : "https");
httpClient.getParams().setParameter(ConnRoutePNames.DEFAULT_PROXY, proxy); 
```

埋在我上面的评论中 - getProxyServer() 返回的字符串是 URL 还是主机名？

**编辑**

我想我已经弄清楚发生了什么。必须在每个请求上发送基本身份验证才能使其正常工作。如果您要进行多次执行，您将需要一些机制来缓存身份验证数据。通过以您现在的方式执行客户端，没有“上下文”可以存储它，因为每个请求都会创建一个。

要查看的另一项是[客户端教程](http://hc.apache.org/httpcomponents-client-ga/tutorial/html/authentication.html)第 4.7 节和第 4.8 节。如果您希望完全消除 407 错误，然后是使用 BASIC 身份验证的请求，请务必阅读第 4.8 节。

密切注意他们定义的“localcontext”变量，因为它充当您客户端的状态容器。

# .htaccess - 使 .htaccess 优先于文件夹

> ID：13288041
> 
> 赞同：2
> 
> 时间：2012-11-08T11:19:08.243
> 
> 标签：.htaccess

这是我的根文件夹：

*   **索引.php**
*   **myfolder**（其中包含其他文件，以及包含“ *deny from all* ”的 htaccess）。

当我访问[http://www.domain.com/myfolder](http://www.domain.com/myfolder)时，我想将其重写为[http://www.domain.com/Myfolder](http://www.domain.com/Myfolder)，但似乎**它进入了 RewriteRule 之前的文件夹**（我有一个401)。

这是我的 .htaccess

```
# Charset
AddDefaultCharset UTF-8

# URL Rewriting
RewriteEngine on

RewriteCond %{REQUEST_URI} /myfolder
RewriteRule ^(.*)$ /Myfolder [L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /index.php?nav=$1 [L,QSA] 
```

这有什么问题？谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-08T10:38:11.257

嗯...事实上，在这个文件夹上方的一个文件夹中还有另一个 .htaccess 文件。对不起 ：（

# ios - 在 trigger.io 中更改默认启动设备

> ID：13288045
> 
> 赞同：1
> 
> 时间：2012-11-08T11:19:23.180
> 
> 标签：ios, xcode, trigger.io

我正在使用 trigger.io 修改一个应用程序，它是一个仅限 iPad 的应用程序。运行应用程序时它总是在 iPhone 中启动，将其更改为 iPad 似乎会破坏某些东西。它也从纵向开始。

我已经设定：

```
"requirements": {
"ios": {
    "device_family": "ipad", 
    "minimum_version": "4.0"
} 
```

但是，唉，仍然以 iPhone 模式启动。

如何让模拟器始终以横向模式在 iPad 中启动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T09:58:59.070

**更新**：自 Trigger.io Forge v1.4.24 以来可以选择模拟器系列和版本：请`simulatorfamily`参阅[http://docs.trigger.io/en/v1.4/tools/local-config.html#available-forge-参数](http://docs.trigger.io/en/v1.4/tools/local-config.html#available-forge-parameters)`simulatorsdk`

以前，您必须从命令行手动运行模拟器 - 为了完整性而保留该方法：

* * *

在终端中，切换到应用程序的目录并运行：

```
.template/lib/ios-sim-xc4.3 launch development/ios/simulator-ios.app --sdk 5.0 --family ipad --stderr output.log 
```

在这里，您可以更改`--sdk`和`--family`设置以使用不同的版本和设备 - 运行不带参数的命令以查看可用选项。

如果模拟器因段错误而崩溃，请确保使用`--stderr`参数将输出重定向到文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-31T21:58:20.850

如果您无法让触发器`Device Type Id`设置正常工作。例如。你选择`com.apple.CoreSimulator.SimDeviceType.iPad-2, 7.1`它总是会打开一个 iPhone。

1.  打开 XCode
2.  到`Settings`那时`Downloads`
3.  下载与您在 Trigger's 中选择的内容相匹配的相应 iOS 模拟器版本`Device Type Id`。

# xcode - MapKit pin title not showing

> ID：13288047
> 
> 赞同：1
> 
> 时间：2012-11-08T11:19:32.137
> 
> 标签：xcode, mapkit

The location is working but the title isn't appearing, most strange.

```
location.latitude = (double) 51.501468;
location.longitude = (double) -0.141596;

// Add the annotation to our map view
MapViewAnnotation *newAnnotation = [[MapViewAnnotation alloc] initWithTitle:@"ABC" andCoordinate:location];
[self.mapView addAnnotation:newAnnotation];
// [newAnnotation release]; 
```

MapViewAnnotation.h

```
#import <Foundation/Foundation.h>
#import <MapKit/MapKit.h>

@interface MapViewAnnotation : NSObject <MKAnnotation> {

NSString *title;
CLLocationCoordinate2D coordinate;

}

@property (nonatomic, copy) NSString *title;
@property (nonatomic, readonly) CLLocationCoordinate2D coordinate;

- (id)initWithTitle:(NSString *)ttl andCoordinate:(CLLocationCoordinate2D)c2d;

@end 
```

and MapViewAnnotation.m

```
 #import "MapViewAnnotation.h"

 @implementation MapViewAnnotation

 @synthesize title, coordinate;

 - (id)initWithTitle:(NSString *)ttl andCoordinate:(CLLocationCoordinate2D)c2d {
title = ttl;
coordinate = c2d;
return self;
 }

 @end 
```

[newAnnotation release] is remmed out to keep the ARC happy :-) Any ideas?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T17:50:00.533

这成功了：

```
[mapView selectAnnotation:newAnnotation animated:YES]; 
```

以前只有在您单击 Pin 图时才会显示标题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T13:58:56.287

该代码看起来不错（该方法的非标准实现除外`init`）。

标题（标注）未出现的最可能原因是在您的`viewForAnnotation`委托方法中，您未设置`canShowCallout`为`YES`（默认为`NO`）。

在`viewForAnnotation`委托方法中，创建后`MKAnnotationView`，设置`canShowCallout`为`YES`.

*与未显示的标题/标注*无关*`init`，您的`MapViewAnnotation`类中的方法应该这样实现：*

 *```
- (id)initWithTitle:(NSString *)ttl andCoordinate:(CLLocationCoordinate2D)c2d {
    self = [super init];
    if (self) {
        title = ttl;
        coordinate = c2d;
    }
    return self;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T12:00:28.893

你打电话给注释代表[参考这个链接](https://stackoverflow.com/questions/5589181/displaying-pin-with-title-annotation-once-map-loads)，[mapkit-example-in-iphone](http://www.edumobile.org/iphone/iphone-programming-tutorials/mapkit-example-in-iphone/)*

# javascript - 如何使用基于时间的javascript显示jsp页面的弹出窗口？

> ID：13288048
> 
> 赞同：3
> 
> 时间：2012-11-08T11:19:39.600
> 
> 标签：javascript, html, jsp

我想创建一个 JSP 页面。我想每 10 秒显示一个弹出窗口。我还想输入一个值来检查该弹出窗口本身的身份验证。怎么做？

```
<tr> <td> I VALUE : <input type="text" name="t1" /></td> </tr> <tr> <td> F VALUE : <input type="text" name="t2" /> </tr> <tr><td><input type="submit" name="b1" value="CHECK...!" /> 
```

这是我的脚本

```
 function validateForm() 
{ long delay = 10*1000; // delay in ms : 10 * 1000 ms = 10 sec. 

LoopTask task = new LoopTask(); 
Timer timer = new Timer("TaskName"); 
public void start() 
{ timer.cancel(); 
timer = new Timer("TaskName"); 
public void run() { popitup();
 } 
function popitup(url) 
{ newwindow=window.open('localhost:8080/Authentication/…); 
if (window.focus) 
{newwindow.focus();
} return false; 
} } } </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T11:31:07.483

请尝试在新窗口中收到警报

//newwindow=window.open(url,'name','height=200,width=150');

```
<!DOCTYPE html>
<html>
<head>
<script>
function startTime()
{
var today=new Date();
var h=today.getHours();
var m=today.getMinutes();
var s=today.getSeconds();
// add a zero in front of numbers<10
m=checkTime(m);
s=checkTime(s);
if((parseInt(s)%10)==0)
alert("hello");// here alert change as  popup     
document.getElementById('txt').innerHTML=h+":"+m+":"+s;
t=setTimeout(function(){startTime()},500);
}

function checkTime(i)
{
if (i<10)
  {
  i="0" + i;
  }
return i;
}
</script>
</head>

<body onload="startTime()">
<div id="txt"></div>
</body>
</html> 
```

# sql - Sum of multiple tables in SQL

> ID：13288050
> 
> 赞同：1
> 
> 时间：2012-11-08T11:19:47.097
> 
> 标签：sql, join, sum

I think what I want to do is fairly straightforward but the data I get back varies greatly.

```
select sum(cast(vi.qty - vi.unredeemed as bigint))
  from red.dbo.setup vc
  full join red.dbo.test bt
    on bt.batch_no = vc.batch_no
  join red.dbo.live vi
 where vi.date_issued between '2012-01-01' and '2012-01-01' 
   and vc.denom ='1' 
   and substring(vi.issue_id,3,1) = '4' 
```

What I am trying to do is join 3 tables together then sum of `qty` of the results of the join and then minus the unredeemed so as to give a redeemed total in one row.

I have tried various amendments to my sum field but the numbers back seem huge so I think it is multiplying them.

I haven't used joins for a while and I am a bit rusty.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T11:28:10.340

您没有对您要加入的第二个加入 (dbo.live) 给出任何条件。另一件事是你提到只加入。它是完整的还是左关节或右关节。因您的情况而异

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T11:28:28.627

您的问题是您遗漏了`ON`第二个子句`JOIN`

```
select SUM(CAST(vi.QTY -vi.unredeemed as bigint))
from red.dbo.setup vc
FULL Join red.dbo.test bt on bt.batch_no = vc.batch_no
JOIN red.dbo.live vi ON ?? -- something needs to be added here, like vi.someId =vc.someOtherId

where vi.date_issued between '2012-01-01' and '2012-01-01' and vc.denom ='1' and      SUBSTRING(vi.ISSUE_ID,3,1) ='4' 
```

你是对的，你观察到的“乘法”效应是由于缺少 ON 子句导致的[笛卡尔积。](http://en.wikipedia.org/wiki/Cartesian_product)带有未指定 ON 子句的简单 JOIN 会导致[CROSS JOIN](http://en.wikipedia.org/wiki/Join_%28SQL%29#Cross_join)。

# ruby-on-rails - RVM - Not able to use gem from global gemset

> ID：13288051
> 
> 赞同：-1
> 
> 时间：2012-11-08T11:19:48.410
> 
> 标签：ruby-on-rails, ruby, rvm

I installed 'pry' in global gemset. However I am not able to use it. That is when i use "binding.pry" in my code then it says - can't resolve 'pry'. I tried with : require 'pry' and load 'pry.rb' but no luck.

```
<pre>
nikhil@nikhil-K54C:/media/media1/railscode/beasport$ rvm gemset list

gemsets for ruby-1.9.3-p194 (found in /home/nikhil/.rvm/gems/ruby-1.9.3-p194)
   (default)
=> beasport
   composer_app
   composer_app1
   global
   new_sample_app

nikhil@nikhil-K54C:/media/media1/railscode/beasport$ gem which pry
/home/nikhil/.rvm/gems/ruby-1.9.3-p194@global/gems/pry-0.9.10/lib/pry.rb
nikhil@nikhil-K54C:/media/media1/railscode/beasport$ gem list | grep pry
pry (0.9.10)
pry-debugger (0.2.0)
pry-doc (0.4.4)
pry-stack_explorer (0.4.7)
nikhil@nikhil-K54C:/media/media1/railscode/beasport$ rvm info

ruby-1.9.3-p194@beasport:

  system:
    uname:       "Linux nikhil-K54C 3.2.0-32-generic-pae #51-Ubuntu SMP Wed Sep 26 21:54:23 UTC 2012 i686 i686 i386 GNU/Linux"
    system:      "ubuntu/12.04/i386"
    bash:        "/bin/bash => GNU bash, version 4.2.24(1)-release (i686-pc-linux-gnu)"
    zsh:         " => not installed"

  rvm:
    version:      "rvm 1.16.6 (master) by Wayne E. Seguin <wayneeseguin@gmail.com>, Michal Papis <mpapis@gmail.com> [https://rvm.io/]"
    updated:      "1 month 5 days 1 hour 7 minutes 39 seconds ago"

  ruby:
    interpreter:  "ruby"
    version:      "1.9.3p194"
    date:         "2012-04-20"
    platform:     "i686-linux"
    patchlevel:   "2012-04-20 revision 35410"
    full_version: "ruby 1.9.3p194 (2012-04-20 revision 35410) [i686-linux]"

  homes:
    gem:          "/home/nikhil/.rvm/gems/ruby-1.9.3-p194@beasport"
    ruby:         "/home/nikhil/.rvm/rubies/ruby-1.9.3-p194"

  binaries:
    ruby:         "/home/nikhil/.rvm/rubies/ruby-1.9.3-p194/bin/ruby"
    irb:          "/home/nikhil/.rvm/rubies/ruby-1.9.3-p194/bin/irb"
    gem:          "/home/nikhil/.rvm/rubies/ruby-1.9.3-p194/bin/gem"
    rake:         "/home/nikhil/.rvm/gems/ruby-1.9.3-p194@global/bin/rake"

  environment:
    PATH:         "./bundler_stubs:/home/nikhil/.rvm/gems/ruby-1.9.3-p194@beasport/bin:/home/nikhil/.rvm/gems/ruby-1.9.3-p194@global/bin:/home/nikhil/.rvm/rubies/ruby-1.9.3-p194/bin:/home/nikhil/.rvm/bin:/usr/local/java/jre1.7.0/bin:/usr/lib/lightdm/lightdm:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games"
    GEM_HOME:     "/home/nikhil/.rvm/gems/ruby-1.9.3-p194@beasport"
    GEM_PATH:     "/home/nikhil/.rvm/gems/ruby-1.9.3-p194@beasport:/home/nikhil/.rvm/gems/ruby-1.9.3-p194@global"
    MY_RUBY_HOME: "/home/nikhil/.rvm/rubies/ruby-1.9.3-p194"
    IRBRC:        "/home/nikhil/.rvm/rubies/ruby-1.9.3-p194/.irbrc"
    RUBYOPT:      ""
    gemset:       "beasport"
</pre> 
```

I am missing something. I check this question but not helpful for my case [RVM - Not able to use gems from the @global gemset](https://stackoverflow.com/questions/5952565/rvm-not-able-to-use-gems-from-the-global-gemset) Thanks in advance for help.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T11:27:31.257

好的..我明白了...所以要将@global gemset 中的gem 用于您的项目特定gemset，您仍然必须将它们登记在项目的gemfile 中。我做了以下，现在我可以使用 pry

```
group :development do
    gem 'pg', '0.14.1'
    gem 'annotate', '~> 2.4.1.beta'
    gem 'pry'
    gem 'pry-doc'
    gem 'pry-debugger'
    gem 'pry-stack_explorer'
end 
```

# yii - Yii ActiveRecord using with() not finding joined record

> ID：13288054
> 
> 赞同：0
> 
> 时间：2012-11-08T11:20:12.070
> 
> 标签：yii

I have two models: User and UserProfile

Inside the User model, I have defined the following relations:

```
 public function relations()
  {
    // NOTE: you may need to adjust the relation name and the related
    // class name for the relations automatically generated below.
    return array(
                'userProfile' => array(self::HAS_ONE, 'UserProfile', 'user_id'),
            );
  } 
```

In UserProfile, I have this relation defined:

```
public function relations()
{
    // NOTE: you may need to adjust the relation name and the related
    // class name for the relations automatically generated below.
    return array(
        'user' => array(self::BELONGS_TO, 'User', 'user_id'),
    );
} 
```

Now when I run the following code in my controller:

```
$user = User::model()->with('userProfile')->findByPK($userId);

    $userProfile = $user->userProfile;

    print_r($userProfile); 
```

The $userProfile variable is null. I've checked and double-checked the database and code, I've re-read the Yii documentation as well, and seems everything is the way it should be. But it just refuses to work!

Any idea what am I doing wrong?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T16:37:10.680

一般来说，你不能这样：

```
'userProfile' => array(self::HAS_ONE, 'UserProfile', 'user_id'), 
```

和这个：

```
'user' => array(self::BELONGS_TO, 'User', 'user_id'), 
```

两者都使用 user_id 键，除非您的两个表都将 user_id 键作为主键。更有可能的是，你所追求的是这个，就像你有：

```
'userProfile' => array(self::HAS_ONE, 'UserProfile', 'user_id'), 
```

但这等同于 SQL 语句：

```
user.id = userProfile.user_id 
```

如果这不是您想要的，那么您需要相应地进行调整。弄清楚这一点最有用的事情之一是打开 SQL 语句的基本日志记录或使用[Yii 调试工具栏](http://www.yiiframework.com/extension/yii-debug-toolbar/) 使查看正在运行的 SQL 与您认为将运行的 SQL 变得更加容易。

# c - Cast pointer to larger int

> ID：13288061
> 
> 赞同：8
> 
> 时间：2012-11-08T11:20:40.747
> 
> 标签：c

I have a pointer. On a 32-bit system it's 32 bits. On a 64-bit system it's 64 bits.

I have a long long integer field used as an identifier, and sometimes I want to use the pointer value in there. (I never cast back to a pointer - once I've cast it to the integer field, I only ever compare it for equality).

On both 32-bit and 64-bit systems, it seems safe to do this. (On larger pointered systems not so). Is that true?

And then, is there a way to make [GCC](http://en.wikipedia.org/wiki/GNU_Compiler_Collection) not give the following warning only when building on platforms where this is safe (which is, at the moment, all target platforms)?

> error: cast to pointer from integer of different size [-Werror=int-to-pointer-cast]

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-08T11:23:54.170

根据标准，不能保证指针适合整数类型。实际上，否则，在大多数个人计算机上，存在几种[内存模型](http://www.viva64.com/media/images/content/t/Data_model/image2.png)。您可以看到指针和整数类型的大小并不总是相同（即使在“传统”计算机上也是如此）。

您应该使用 C99 中的可选类型`intptr_t`and `uintptr_t`。

> **C11 (n1570)，第 7.20.1.4 节**
> 
> 以下类型指定了一个有符号整数类型，其属性是任何有效的指针`void`都可以转换为此类型，然后转换回指向 的指针`void`，结果将与原始指针进行比较：`intptr_t`。
> 
> 以下类型指定了一个无符号整数类型，该类型的任何有效指针`void`都可以转换为该类型，然后转换回指向 的指针`void`，结果将与原始指针进行比较：`uintptr_t`。

这是一个小例子：

```
#include <stdio.h>
#include <stdint.h>

int n = 42;
int *p = &n;
intptr_t i = (intptr_t)(void *)p;
int *q = (void *)i; 

printf("%d\n", *q); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T11:24:14.027

如果您想要一个保证足够大以容纳指针的整数类型，请考虑`intptr_t`(signed) 或`uintptr_t`. 该标准保证这些数据类型大到足以容纳一个指针。没有什么可以假设的，尤其`long int`是时间不够长。

# .net - 以编程方式从 AD LDS 获取所有角色

> ID：13288062
> 
> 赞同：0
> 
> 时间：2012-11-08T11:20:40.840
> 
> 标签：.net, active-directory, adlds

我正在寻找有关如何以编程方式连接到 AD LDS 的一些指导。我正在尝试使用 C# 程序检索所有 AD LDS 角色。

任何关于从哪里开始的指示将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T13:53:25.550

[据此](http://technet.microsoft.com/en-us/library/cc732460%28v=ws.10%29.aspx)，AD LDS 角色是驻留在`CN=Roles`LDS 实例容器中的 AD 组 - 对吧？

使用`System.DirectoryServices.AccountManagement`(S.DS.AM) 命名空间中的类，您可以很容易地获得这些组：

```
// set up the "ApplicationDirectory" context and use the "CN=Roles" container
PrincipalContext ctx = new PrincipalContext(ContextType.ApplicationDirectory, "ldsserver:389", "CN=Roles,DC=YourCompany,DC=com");

// set up a "QBE" group principal
GroupPrincipal qbeGroup = new GroupPrincipal(ctx);

// create your principal searcher passing in the QBE principal    
PrincipalSearcher srch = new PrincipalSearcher(qbeGroup);

// find all matches
foreach(var found in srch.FindAll())
{
    // do whatever here - "found" should be "GroupPrincipal" types only
} 
```

在此处阅读有关`System.DirectoryServices.AccountManagement`(S.DS.AM) 命名空间的所有信息：

*   [在 .NET Framework 3.5 中管理目录安全主体](http://msdn.microsoft.com/en-us/magazine/cc135979.aspx)
*   [System.DirectoryServices.AccountManagement 上的 MSDN 文档](http://msdn.microsoft.com/en-us/library/system.directoryservices.accountmanagement.aspx)

新的 S.DS.AM 使得在 AD（和 AD LDS）中与用户和组一起玩变得非常容易！

# java - 套接字输入流在流结束时不返回 -1

> ID：13288073
> 
> 赞同：1
> 
> 时间：2012-11-08T11:21:03.660
> 
> 标签：java, sockets, inputstream, serversocket, bytearrayoutputstream

这是发生问题的代码片段：

```
public static byte[] copyLargeExt(InputStream input) throws IOException {
        ByteArrayOutputStream baos = new ByteArrayOutputStream();
        byte[] buffer = new byte[1024*8];
        int n = 0;
        while(-1 != (n = input.read(buffer))) {
            baos.write(buffer, 0, n);
        // i just append this pattern ({###END###}) to force the break  
           /*if(baos.toString(UTF8.name()).endsWith("{###END###}")) {
                break;
            }*/
        }
        return baos.toByteArray();
    } 
```

有人能帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T11:35:31.140

问题中的代码读取到套接字流的末尾。如果方法是阻塞的并且在 read 调用中，那只能意味着另一端还没有关闭其对应的输出流。

你有两个选择：

*   更改另一端以关闭其输出流，以便此代码将看到 EOF。

*   更改“协议”，以便此代码知道预期的数据字节数......并准确读取该字节数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-08-10T11:56:29.430

在爪哇。
如果Server只`Socket.close()`没有`OutputStream.close()`first，Client的`InputStream.read()`就不会返回`-1`。
相反，客户端`InputStream.read()`将阻塞直到超时。所以服务器上的最佳实践是：

```
OutputStream.close();
InputStream.close();
Socket.close(); 
```

# lua - Lua and multi-paradigm programming: scope and capabilities

> ID：13288075
> 
> 赞同：1
> 
> 时间：2012-11-08T11:21:11.273
> 
> 标签：lua, theory

Despite having started learning programming with Pascal and C, after the jump to OO (C++, Java) I lost sense of the structured programming paradigm. I have started learning Lua and I have researched many tutorials, but all of them only cover basic operations and language features and capabilities. They feel more like a reference doc than a programmer's guide.

Now, when trying to work with day to day tasks, how does one go through the most common design patterns like observer, multithreaded programming, UI elements and system calls for keyboard or sensors? Is it even feasible in this languages or you have to work with the C binding, libraries and low-level programming to get most stuff done? Do I get the Lua scope wrong?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T11:25:53.603

阅读[在 Lua 中编程以](http://www.lua.org/pil/)了解如何应用 Lua。

是的，您需要外部 C 库来完成您列出的任务。

# ruby-on-rails - 主键用作另一个表中的外键

> ID：13288079
> 
> 赞同：1
> 
> 时间：2012-11-08T11:21:25.563
> 
> 标签：ruby-on-rails

在rails 2中，我们如何找出一个表中的某个主键被用作另一个表中的外键。就像我有一个以 'id' 作为主键的表 punching_informations。我想知道是否在另一个名为 punching_request 的表中使用了来自 punching_informations 表的“id”作为外键。PunchingInformation 有一个 PunchingRequest。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T11:54:05.553

`punching_information_id`理想情况下，您的`punching_request`表中应该有一个。在这种情况下，您的`punching_request.rb`模型将具有以下行。

```
belongs_to :punching_information 
```

但是，您可以通过使用如下元素来更改`:foreign_key`它

```
belongs_to :punching_information, foreign_key: "some_new_id" 
```

# ios - cclocation concerns and clarifying on the subject

> ID：13288080
> 
> 赞同：0
> 
> 时间：2012-11-08T11:21:37.270
> 
> 标签：ios, xcode

Is collocation usually mean the location of the device? I am a little hazy on this subject.Or does mean general location.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T12:54:36.963

我假设你的意思是`CLLocation`？这是一个表示从`CLLocationManager`对象生成的位置数据的类。

请参阅[位置感知编程指南](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/LocationAwarenessPG/Introduction/Introduction.html)，特别是获取用户位置的[部分](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/LocationAwarenessPG/CoreLocation/CoreLocation.html)。

# delphi - 无法对已关闭的数据集执行此操作

> ID：13288084
> 
> 赞同：2
> 
> 时间：2012-11-08T11:21:47.357
> 
> 标签：delphi, delphi-7

我只是想使用 TADOQuery 组件执行“select” sql 语句，但是当 TADOQuery 的“Open”语句正在执行时，我收到以下错误：

```
无法对已关闭的数据集执行此操作... 

```

```
ADOQuery1.Active := False;
ADOQuery1.SQL.Clear;
ADOQuery1.SQL.Add('Select * from Table1 where Column1 = <value>');
ADOQuery1.Open; 
```

猜猜我为什么会收到这个错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T11:44:54.053

你的代码看起来不错。

检查是否有任何事件处理程序 (OnBeforeOpen) 或附加到查询的主/详细数据源。在这种情况下，仍然关闭的不同数据集可能会导致错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T05:43:11.367

问题已解决，我使用 SQL Server 2008 作为数据库。

这里“SetAppRole”没有应用到数据库上，应用后，现在没有错误了。

# java - 如何在无状态会话 bean 中创建多线程？

> ID：13288088
> 
> 赞同：0
> 
> 时间：2012-11-08T11:21:57.443
> 
> 标签：java, ejb-3.0

我已经使用 JAXWS 创建了 Web 服务，并将其作为无状态会话 bean 托管在 jboss6 中。以下是网络服务代码：

```
@Stateless
@WebService(serviceName = "CommonSmsServices", name = "CommonSmsServices", wsdlLocation = "META-INF/wsdl/CommonSmsServices.wsdl", endpointInterface = "com.sms.webservice.common.CommonServices")
public class CommonServicesImpl implements CommonServicesLocal,CommonServicesRemote {
      //.....
      // methods
      //.....

} 
```

这适用于单个 Http 会话。现在我在运行多个会话时遇到问题，响应时间变得非常慢。我为内存和线程采样做了YourKit porfiling。内存利用率看起来不错。但在线程部分它显示一个 htpp 线程正在等待其他线程完成。

我还阅读了 Java EE 会话 bean 文档。它说会话 bean 是单线程的。同时处理多个 Http 会话的会话 bean 是否存在性能问题？

JBoss AS 6 中是否有方法或配置可以提高我的 Web 服务性能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T11:58:36.413

在 EJB（包括无状态的）中，容器支持多线程。如果您希望将数据存储在不同的调用之间，您可能应该使用 Statefull bean；这也支持多线程。

# mysql - MySQL在减去无符号值时如何使负结果成为可能？

> ID：13288090
> 
> 赞同：7
> 
> 时间：2012-11-08T11:22:00.510
> 
> 标签：mysql

我有三个通过左连接连接的表。这是代码：

```
SELECT
(LEAST(`a`.`price, `b`.`price`) - `c`.`price`) AS `diff`
...
ORDER BY `diff` DESC 
```

问题：`c`。`price`大于 LEAST，因此减法为负并抛出 BIGINT UNSIGNED value is out of range。我怎样才能让它不抛出这个荒谬的错误？
这是结果数据，我没有修改表中的实际数据，为什么它不允许我正常执行此操作？我已经尝试`CAST(LEAST(...) AS SIGNED)`在 LEAST 中将两列都按签名进行转换，但都没有奏效。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-08T11:49:23.317

在 LEAST 之前和减法之前将每个数字转换为 SIGNED

```
SELECT
(LEAST(CAST(`a`.`price` AS SIGNED), CAST(`b`.`price` AS SIGNED)) - CAST(`c`.`price` AS SIGNED)) AS `diff`
...
ORDER BY `diff` DESC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T11:48:14.523

您可能需要检查`NO_UNSIGNED_SUBTRACTION`运算符：[http](http://dev.mysql.com/doc/refman/5.0/en/server-sql-mode.html#sqlmode_no_unsigned_subtraction) ://dev.mysql.com/doc/refman/5.0/en/server-sql-mode.html#sqlmode_no_unsigned_subtraction 。

但是，使用它存在风险：http: [//datacharmer.blogspot.fi/2006/11/hidden-risks-of-sql-mode.html](http://datacharmer.blogspot.fi/2006/11/hidden-risks-of-sql-mode.html)

# jquery - 为什么有时我无法通过使用 $.getJSON 函数获取数据？

> ID：13288092
> 
> 赞同：1
> 
> 时间：2012-11-08T11:22:07.450
> 
> 标签：jquery, json, get, null, getjson

我现在正在使用 Youtube API，有时`data is null`，我不知道为什么......

```
function get_youtube_info(youtubeID) {
    $.getJSON("http://gdata.youtube.com/feeds/api/videos/"+youtubeID+"?v=2&prettyprint=true&alt=jsonc", function(json){
            if (json.data.accessControl.embed == "allowed") {
                //do something...
            }
    });
} 
```

我可以使用`$.ajax`，`$.get`还是`$.post`什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T11:41:30.530

听起来 youtube 期待您缓存您的回复，因此`304`尝试

```
$.ajax({
 url:'http://gdata.youtube.com/feeds/api/videos/'+youtubeID+'?v=2&prettyprint=true&alt=jsonc',
 cache:false,
 dataType:'json',
 type:'GET',
 success: function(json){
            if (json.data.accessControl.embed == "allowed") {
            //do something...
        }
        if (json.data.accessControl.embed == "denied") {
            alert("not allow to embed");
          }
    },
 error: function() {alert("not found video");}
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T12:01:26.717

```
function get_youtube_info(youtubeID) {
    $.getJSON("http://gdata.youtube.com/feeds/api/videos/"+youtubeID+"?v=2&prettyprint=true&alt=jsonc&myversion="+Math.floor(Math.random()*1000000)+"",function(json){
            if (json.data.accessControl.embed == "allowed") {
                //do something...
            }
            if (json.data.accessControl.embed == "denied") {
        alert("not allow to embed");
        }
    }).error(function(json) {
        alert("not found video");
    });
} 
```

现在我将像这样使用，向新参数添加一些随机数以获取 json 数据，如“允许”或“拒绝”嵌入

# android - Android - 9 补丁图像绘制不正确 - 仅来自某些机器的构建

> ID：13288094
> 
> 赞同：0
> 
> 时间：2012-11-08T11:22:09.027
> 
> 标签：android, android-image

我有一个 9 补丁图像，它从外部库用作按钮的背景。

仅在某些机器 2 out of 4 团队的构建上，9 补丁无法正确渲染。你可以看到外面的黑色，看起来很奇怪！

我删除了 gen 文件夹并重建 - 没有成功！

![按钮](../Images/be52d7f7d36d4c628f4ff68a48cb3ffc.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T20:06:45.400

似乎文件已损坏，因为替换库修复了问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T19:39:37.127

在我的情况下，在一个团队项目中，库中的 9 个补丁文件被破坏并且表现得像正常的可绘制对象，并且其中一个应用程序项目有工作的 9 个补丁替换。我只是将工作文件移到库中并修复了它。

# safari - -webkit-box-shadow 的 safari 和 iphone 问题

> ID：13288096
> 
> 赞同：0
> 
> 时间：2012-11-08T11:22:14.540
> 
> 标签：safari, css

我有一个设置为显示块的无序列表。在那个 UL 里面，我有 4 个浮动的 li 元素。

在 Safari 中显示它时出现问题，因此在 iphone 和 ipad 上显示。问题是内部元素被阴影略微插入：

![铬屏幕截图](../Images/43178aee58d2c902a3e5bc2ffb6fddcf.png)

但它在 Chrome 中显示正常

![Safari 截图](../Images/4b45195fc7a9718c90179c369198ccd8.png)

有任何想法吗？？

谢谢

菲尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T11:36:25.860

问题可以如下..

您可能没有看到它的到来，但您使用边界半径吗？chrome 版本在顶部/左侧/右侧有 1 个像素填充，可以在屏幕上以不同方式输出。

如果您在样式表中使用浏览器重置，下面可能会有所帮助

[http://meyerweb.com/eric/tools/css/reset/index.html](http://meyerweb.com/eric/tools/css/reset/index.html)

这会将所有浏览器重置为相同的索引，然后从那里开始设置样式，并且大多数情况下它会起作用！

# search - jstree - 搜索节点返回完整的 jstree

> ID：13288097
> 
> 赞同：0
> 
> 时间：2012-11-08T11:22:29.993
> 
> 标签：search, jstree

我使用以下代码搜索特定节点文本：

```
$("#create_1").click(function () {
  node = $("#patterneditor").jstree("search", "report");
  node.css("font-weight", "bold"); 
```

});

这是来自 html-data 树的部分：

```
<li rel="hashkey" class="jstree-open">
  <a href="#">report</a>
  <ul>
    <li rel="hash" class="jstree-open"><a href="#">Hash</a>
      <ul> 
```

但是在执行搜索并应用 css 设置时，所有树节点都会变为粗体。“报告”-节点变为斜体（所以我认为搜索在给定点以下工作），但我希望将节点对象存储在节点变量中。有谁知道为什么会发生这种情况以及如何解决？

问候特里斯坦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T11:58:44.560

事实证明，搜索功能无法获取我搜索过的节点的对象。相反，我使用了类似的东西

```
node = $("#patterneditor").jstree("select_node", $("[pattern_section='pattern']"));
$("#patterneditor").jstree("create", node); 
```

天啊 ..

# wpf - 在不访问其 ItemsSource 的情况下将项目添加到 ListBox

> ID：13288099
> 
> 赞同：0
> 
> 时间：2012-11-08T11:22:30.750
> 
> 标签：wpf, .net-3.5, listbox, selectionchanged

我刚刚将一个项目从 .NET 3.5 升级到 4.0，发现 ListBox 的行为有所不同。项目有时会从使用后面的代码添加到 ListBoxes

```
this.myListBox.SelectedItem = new MyItemType(); 
```

这不再触发 myListBox.SelectionChanged 事件并导致程序中的错误。有没有更好的方法来做到这一点？

谢谢，马特

# xml - RELAX NG 具有相同结构的元素的多个名称

> ID：13288102
> 
> 赞同：1
> 
> 时间：2012-11-08T11:22:54.530
> 
> 标签：xml, relaxng

假设我有两个这样的规则：

```
JFalse = element JFalse {
   attribute label { xs:string }?,
   attribute jump { xs:string }?,
   attribute offset { xs:integer }?
}

JGt = element JGt {
   attribute label { xs:string }?,
   attribute jump { xs:string }?,
   attribute offset { xs:integer }?
} 
```

（实际上要多得多）

我想做的显然是这样的：

```
JFalseOrJGt = element (JFalse | JGt) {
   attribute label { xs:string }?,
   attribute jump { xs:string }?,
   attribute offset { xs:integer }?
} 
```

（但以上无效）。我可以以其他方式做到这一点，这会导致更“压缩”的语法规则吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T12:06:19.367

这是一种选择：

```
JFalse = element JFalse { jFalseGt }

JGt = element JGt { jFalseGt }

jFalseGt = 
   attribute label { xs:string }?,
   attribute jump { xs:string }?,
   attribute offset { xs:integer }? 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-12T14:04:06.363

该语法`element (JFalse | JGt)`实际上是声明可以具有两个名称中的任何一个的元素的正确语法。从紧凑语法转换为 XML 语法时，`trang`将其转换为：

`<element> <choice> <name>JFalse</name> <name>JGt</name> </choice> [...]`

这正是您所要求的。

您的代码中有一个错误，但它与命名元素无关。问题是您的所有`xs:...`类型都无法解决。您有两个选择：要么`datatypes xs = "http://www.w3.org/2001/XMLSchema-datatypes"`在文件开头添加以声明`xs`前缀，要么编辑每种类型以使用`xsd`前缀而不是`xs`. `xsd`前缀是默认声明的。

# java - Java 泛型语法和调用接口类型（如 List）的方法

> ID：13288105
> 
> 赞同：2
> 
> 时间：2012-11-08T11:22:56.983
> 
> 标签：java, list, generics, interface

在 java 1.7 上支持以下语法的原因是什么

```
List<Integer> ints=new ArrayList<>(); 
```

它提供了怎样的灵活性？如果我们希望 int 具有不同的类型，我们将显式转换它，如果无法执行转换，它将引发错误。

我也不清楚这是如何工作的。由于 List 是一个接口，我们如何能够在其上调用方法

```
List<Integer> ints = Arrays.asList(1,2);
ints.get(1); 
```

由于返回类型`asList()`是`static<T> List<T>`可以访问静态接口的字段而没有任何类提供它的实现。但是我们如何能够访问这样的接口上的方法集合库有很多`Collections.Sort()` 像谁提供了实现这些方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T11:34:03.293

**问题 1**

使用

```
List<Integer> ints=new ArrayList<>(); 
```

代替

```
List<Integer> ints=new ArrayList<Integer>(); 
```

不会增加任何灵活性，因为它们完全相同。菱形 ( `<>`) 表示我们不需要原始类型，而是明显的参数化类型。

甲骨文在[这里](http://docs.oracle.com/javase/7/docs/technotes/guides/language/type-inference-generic-instance-creation.html)描述它：

> 在 Java SE 7 中，您可以用一组空的类型参数 (<>) 替换构造函数的参数化类型：

它只是使代码不那么冗长，因此更易于阅读和维护。这在 Oracle 的示例中可能更为明显：

```
Map<String, List<String>> myMap = new HashMap<>(); 
```

相比

```
Map<String, List<String>> myMap = new HashMap<String, List<String>>(); 
```

**问题2**

`Arrays.asList(1,2);`从实现 List 接口的具体类返回一个对象。

在 Java 1.6 中，它是一个固定大小的实例`java.util.Arrays.ArrayList`：

```
3354    public static <T> List<T> asList(T... a) {
3355        return new ArrayList<T>(a);
3356    } 
```

但重要的一点是，对象总是属于实现其接口定义的方法的具体类。

当你这样做的时候`Collections.sort(`，你不是在使用`Collection`接口，而是使用包含这个非常具体的代码的[Collections类：](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/Collections.java)

```
132     public static <T extends Comparable<? super T>> void sort(List<T> list) {
133         Object[] a = list.toArray();
134         Arrays.sort(a);
135         ListIterator<T> i = list.listIterator();
136         for (int j=0; j<a.length; j++) {
137             i.next();
138             i.set((T)a[j]);
139         }
140     } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T11:35:44.097

你的问题有很多问题。

泛型提供编译时检查，而直到运行时才发现转换错误。

您的 ints 是一个支持 List 接口的对象，因此在其上调用方法是有效的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T11:37:37.307

这些是编译时检查，旨在确保一致性，因此实现不必“做”任何特定的事情，只要它们遵循泛型符号规定的规则（例如，对于使用类型 T 的对象调用的方法） ，你只返回同样类型的东西 T)。

正如已经指出的那样，当很明显在构造函数中指定类型是不必要的冗长时，引入了菱形表示法 - 可以从构造函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T11:49:54.503

```
List<Integer> ints=new ArrayList<>(); 
```

它的泛型易于理解和迭代

```
for(Integer intObj : ints ) {} 
```

代替

```
Iterator itr = ints.iterator() ;
while(itr.hasNext()) {
   Integer intObj = (Integer) itr.next();
} 
```

*由于返回类型`Arrays.asList()`是静态的？*

是`java.util.Arrays`的，一个 util 类提供了很多实用方法。

*但是我们如何能够访问这样一个接口上的方法呢？*

只需查看那里的源代码，您就可以从接口`ArrayList`中找到实现方法。`List`

*谁提供这些方法的实现？*

实现接口的人`List` `Set`等

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-08T12:00:22.740

```
List<Integer> ints=new ArrayList<>(); 
```

和写完全一样

```
List<Integer> ints=new ArrayList<Integer>(); 
```

It doesn't add flexibility, it just let you keep generics with your `ArrayList` whithout having to retype the type of the `ArrayList`, and so the `ArrayList` will not use raw type.

Some other thing is that writing this, you only get directly access to the `List` interface methods on your `ArrayList` object, event if these methods will have the behavior that is defined in the `ArrayList` class.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-08T12:05:22.773

> What flexibility does it provide?

It does not provide any flexibility; is just a syntactic sugaring. Kind of pointless since modern IDEs code completion already do that.

> Since return type of asList() is static List it's okay to access a field of a static interface without any class providing an implementation of it.But how are we able to access a method on such an interface The collections library has a lot of them like Collections.Sort() Who provides the implementation of these methods?

The return type of `asList()` is List; the type has nothing to do with the fact that the method is static. `Arrays` is a class, not an interface, and asList() method is implemented there; the JDK provides the implementation.

# python - bash脚本运行时的python弹出窗口

> ID：13288106
> 
> 赞同：4
> 
> 时间：2012-11-08T11:23:03.180
> 
> 标签：python, user-interface, glade

我为应用程序制作了一个简单的 PyGTK - Glade GUI。我制作了按钮，on_button_click 调用了一个 bash 脚本。我想在 bash 脚本运行时显示一个弹出窗口，并在完成后将其隐藏。我在 Glade 中创建了一个名为 runningWindow 的窗口，并编写了以下代码：

```
def on_button1_clicked(self,widget):
   self.glade.get_object("runningWindow").show()
   os.system('bash run.sh')
   self.glade.get_object("runningWindow").hide() 
```

此代码在 run.sh 运行时不显示任何内容。如果我删除 hide() 行，窗口会正确显示，但只有在 run.sh 进程完成之后。

启动 GUI的**init**函数：

```
def __init__(self):
        self.gladefile = "MyFile.glade" 
        self.glade = gtk.Builder()
        self.glade.add_from_file(self.gladefile)
        self.glade.connect_signals(self)
        self.glade.get_object("MainWindow").show_all() 
```

如何在调用 os.system 之前显示窗口？谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T22:54:58.420

您可能想查看子流程模块，并在后台任务中运行您的子流程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T10:29:24.320

我无法解决问题，但我可以绕过它。也许其他人觉得它有用：

首先，应该使用 subprocess.Popen() 而不是 subprocess.call()。它自动将子进程置于后台，因此显示正在运行的窗口。问题是如果我不删除 .hide() 命令，窗口弹出后立即消失。否则，运行完成后我无法隐藏窗口。

为了解决这个问题，我在一个新的（runningWindow.glade 和 runningWindow.py）文件中创建了 runningWindow。

然后我创建了一个包装 bash 脚本，上面写着：

```
python runningWindow.py &
pid=$!
bash run.sh
kill pid 
```

并使用主 python 脚本中的 subprocess.Popen() 调用此 bash 脚本。

# google-apps-script - Google 电子表格脚本 - 不记录用户电子邮件

> ID：13288111
> 
> 赞同：3
> 
> 时间：2012-11-08T11:23:07.607
> 
> 标签：google-apps-script, google-sheets, google-spreadsheet-api

在我的 Google 电子表格中，我记录了每行中单元格的最后修改。

当我从我的帐户编辑单元格时，它会记录我的用户（作为电子邮件），当有人从其他帐户进行编辑时，它会显示空的用户名或`?`.

这是谷歌脚本。

```
function onEdit(e) {
...
  ss.getRange(r.getRow(), ss.getLastColumn()).setValue(e.user.getEmail() + " " + date + " \"" + column_name + "\"");
...
} 
```

我编辑时的结果：

```
*******@gmail.com 11:09 [08-11-2012] "SOME VALUE" 
```

其他人编辑时的结果：

```
? 09:54 [08-11-2012] "SOME VALUE" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T17:41:14.463

该文档似乎没有直接解决这个问题。从理论上讲，该事件应该返回[电子表格的所有者](https://developers.google.com/apps-script/understanding_events)（如果您尝试创建审计跟踪，这可能不是您想要的）。

`getActiveUser` [根据此处](https://developers.google.com/apps-script/class_session)描述中设置的先例，这似乎是一种深思熟虑的安全策略。我想您可以尝试通过 提供的各种方式访问​​用户`Session`，看看您是否有更好的运气。

# java - 使用 POI 将大量 XLSX 文件转换为 CSV 期间的内存问题

> ID：13288113
> 
> 赞同：0
> 
> 时间：2012-11-08T11:23:15.990
> 
> 标签：java, performance, excel, apache-poi

这对我来说是一项非常具有挑战性的任务，因为我在将 XLSX 转换为 CSV 期间进行了大量的研发工作以消除 OutOfMemroyError，并且我的 excel 文件可以有三张纸，每张纸有 60000 行。我最近使用了 XSSF 和 SAX（事件 API），因为这种方法消耗的内存非常少。但是，事件 API 仅针对文件中实际存储的内容触发事件，这可能是我的原因。

在此事件 API 方法之前，我使用 Workbook 类来处理 XLSX 文件，最终在下面提供的此工作簿创建期间内存不足。

> 工作簿工作簿 = WorkbookFactory.create(new File("myfile.xlsx"));

那么，使用 apache POI 处理大量 XLSX 数据的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T12:13:21.753

这是一个使用 sax 解析器读取大型 xls 文件的示例。Sax 解析器将帮助您避免 OOM 异常。

[通过 Apache POI 读取大型 Excel 文件 (xlsx) 时出错](https://stackoverflow.com/questions/13020658/error-while-reading-large-excel-files-xlsx-via-apache-poi/13177797#13177797)

# sequence - 最适合列出所有可能的布尔序列的编程语言

> ID：13288114
> 
> 赞同：-1
> 
> 时间：2012-11-08T11:23:20.850
> 
> 标签：sequence

我需要列出满足给定规则集的特定长度（例如 100）的所有布尔序列。规则的示例是：如果 bit10=bit20=1，则 bit35=0。

我写了一个 C++ 程序，它可以在几秒钟内枚举出可能的序列，但是它太长而且太复杂了。你能推荐我一种编程语言，我可以用更短的代码和（接近）相似的性能来实现这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T12:36:59.230

如果您需要解决变量规则作为程序输入的广义问题，则称为可[满足](https://en.wikipedia.org/wiki/Boolean_satisfiability_problem)性或“SAT”。有几个 SAT 求解器，例如[CryptoMiniSat](http://www.msoos.org/cryptominisat2/)，具有不同的功能。您必须将规则转换为输入格式，然后在其上运行 SAT 求解器。

# visual-studio-2010 - VS 2010 中的蓝色箭头

> ID：13288115
> 
> 赞同：0
> 
> 时间：2012-11-08T11:23:24.920
> 
> 标签：visual-studio-2010

我按下了一些键，蓝色箭头出现在 Visual Studio 2010 的左侧，我看不到如何删除或禁用它。

请看附图。

![VS 2010 左侧的蓝色箭头](../Images/f4218d95df6454a512d02a097c0cca6e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T11:34:51.117

它是一个任务列表图标。您可能已经添加了它，或者它可能是由编辑器自动添加的（例如用“TODO”注释标记行）。

类似于书签，它允许您跳过它标记的项目。

[http://msdn.microsoft.com/en-us/library/k4efffwe%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/k4efffwe%28v=vs.80%29.aspx)

# wpf - 在 WPF 中以超过 96 dpi 打印

> ID：13288118
> 
> 赞同：4
> 
> 时间：2012-11-08T11:23:53.330
> 
> 标签：wpf, printing, resolution, dpi, printer-properties

让我解释一下这个问题，我陷入了困境

如果我从虚拟打印机（如 PDF Creator）或任何允许更改此设置的打印机的打印首选项对话框中更改 dpi 设置，然后设置如下代码所示的断点：

```
 PrintDialog printDialog = new PrintDialog(); 
    if ((bool)printDialog.ShowDialog().GetValueOrDefault())
    {

            System.Printing.PrintCapabilities capabilities =  printDialog.PrintQueue.GetPrintCapabilities(printDialog.PrintTicket);
           ...... insert breakpoint here 
     } 
```

我可以看到属性 printDialog.PrintTicket.PageResolution.X; 和 printDialog.PrintTicket.PageResolution.Y 正确更改，而 printDialog.PrintTicket.PageMediaSize.Width 和 printDialog.PrintTicket.PageMediaSize.Height 尽管打印机分辨率发生变化，但不会改变......纵向模式下的 A4 纸将始终具有 PageMediaSize.Height = 1122.5196850393702 和 PageMediaSize.Width = 793.70078740157476 无论之前设置了哪个分辨率.....对于 WPF，这些尺寸的单位大小设置为 1/96 英寸，但什么时候在屏幕上可以，因为默认屏幕分辨率是 96 dpi打印机的另一面是错误的，因为它具有不同的分辨率，

最后一点，在我的具体情况下，我不能使用 RenderTargetBitmap 然后调整所有大小以匹配打印机的纸张高度和宽度设置，因为我正在打印高清条形码图像，它会导致图像重新缩放，导致条形码在最终纸张上不可读，因为我创建它的目的是使用 300dpi 的分辨率进行打印，如果不调整大小将导致超出范围，因为 WPF 告诉我打印纸尺寸的单位尺寸错误（1/96 英寸），尽管之前设置了真正的 dpi打印机

希望已经足够澄清问题，

提前致谢，

戴夫

# android - 使用 Web 视图的 Android 应用程序

> ID：13288121
> 
> 赞同：1
> 
> 时间：2012-11-08T11:24:07.833
> 
> 标签：android

我在我的 android 应用程序中使用 web 视图，当没有互联网访问时，如何从我的 android 应用程序中删除“网页不可用”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T11:29:59.997

```
public static boolean isNetworkAvailable(Context context) {
         ConnectivityManager connectivity = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);
         if (connectivity != null) {
            NetworkInfo[] info = connectivity.getAllNetworkInfo();
            if (info != null) {
               for (int i = 0; i < info.length; i++) {
                  if (info[i].getState() == NetworkInfo.State.CONNECTED) {
                      return true;
                  }
               }
            }
         }
         return false;
      } 
```

这段代码说明是否有互联网..如果没有互联网，那么您可以根据需要跳过这些内容..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T11:30:32.883

检查是否`connection.getResponseCode() == 200`并重定向到静态页面。

# c# - 从多个相关 XML 文件构造表

> ID：13288125
> 
> 赞同：1
> 
> 时间：2012-11-08T11:24:15.050
> 
> 标签：c#, .net, xml

我有两个 XML 文件，它们代表两个之间有关系的关系表。文件如下： Exam.XML

```
 <?xml version="1.0" encoding="utf-8" ?>
 <Exam>
   <Student id='1'>
     <result>100 </result>
  </Student >
  <Student id='2'>
     <result>200 </result>
  </Student >
 </Exam> 
```

学生.XML

```
 <?xml version="1.0" encoding="utf-8" ?>
<Students>
  <Student id='1'>
      <name>John</name>
  </Student >
  <Student id='2'>
     <name>Mark </name>
  </Student > 
```

结果应该是

StudentID StudentName 结果

1约翰100

2 马克 200

如何在 C# 中实现这一点？注意：我的文件不是那么简单，所以合并它们不会有帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T11:50:00.213

Linq2Xml 可以在这里提供帮助。

```
var list = XDocument.Load("student.xml").Descendants("Student")
             .Join(XDocument.Load("exam.xml").Descendants("Student"),
                   x => x.Attribute("id").Value, 
                   y => y.Attribute("id").Value, 
                   (s, e) => new{
                        Name = s.Element("name").Value,
                        Id = s.Attribute("id").Value,
                        Result = e.Element("result").Value
                    })
             .ToList(); 
```

或与查询语法相同的东西

```
var query = from s in XDocument.Load("student.xml").Descendants("Student")
            join e in XDocument.Load("exam.xml").Descendants("Student")
                   on s.Attribute("id").Value equals e.Attribute("id").Value
            select new {
                            Name = s.Element("name").Value,
                            Id = s.Attribute("id").Value,
                            Result = e.Element("result").Value
                       };

var list = query.ToList(); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-08T11:29:39.547

在这种情况下，我加载 2 个数据表并以编程方式创建第三个

加载到数据表中可以这样完成

```
DataTable newTable = new DataTable();
newTable.ReadXml("FILENAME.xml"); 
```

然后以编程方式创建一个新的数据表

```
 DataTable table = new DataTable(tableName);
    DataColumn column = new DataColumn("id", typeof(System.Int32));
    column.AutoIncrement = true;
    table.Columns.Add(column);

    column = new DataColumn("item", typeof(System.String));
    table.Columns.Add(column);

    // Add ten rows.
    DataRow row;
    for (int i = 0; i <= 9; i++)
    {
        row = table.NewRow();
        row["item"] = "item " + i;
        table.Rows.Add(row);
    }

    table.AcceptChanges(); 
```

如果这不能回答您的问题（您需要更详细的解释），请对此发表评论并为您详细说明:)

**请记住，如果问题有帮助，为什么不继续标记它**

# c - 最佳内存分配

> ID：13288129
> 
> 赞同：0
> 
> 时间：2012-11-08T11:24:32.253
> 
> 标签：c, logic, analytical

我有 200 个组。每组有 100 台设备，即总共 20000 台设备分为 200 组，每组 100 台。

现在，当每个设备都向服务器注册时，服务器会为该设备分配一个组 ID。（100 个设备具有相同的组 id。）在稍后阶段，服务器发送具有组 id 的多播数据，以便将数据接收到具有该组 id 的所有设备。

问题是我需要为每个组分配一块内存（比如 25 字节）来存储数据，以便该组中的所有设备都将使用该块进行处理。我的想法是分配一个大块（比如 25 * 200 = 5000 字节）并为每个组分配一个 25 字节的块（grp0 指向起始地址，grp1 指向起始+25 地址，依此类推）。

这是最好的方法吗？还有其他想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T11:43:41.483

对于您的示例，我将使用一个数组。

如果您的客户数量不变，分配单个块是最有效的方法：

*   你做了一个 malloc 调用而不是 100
*   您避免了与跟踪每个内存块分配的列表相关的开销
*   您的数据保存在一块中，这使得它更容易被处理器缓存缓存，而 100 个小块放置在上帝知道的位置

说，可能只有 100 个元素的差异可以忽略不计，但乘以 200 个组可以给你带来性能提升（真的取决于你如何使用数据结构）

如果使用动态结构（例如，您的客户端连接和断开连接，因此它们并不总是 100 个），您应该使用链表 - 它在需要时分配内存（因此您最终会得到 100 个不同的内存块）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T11:43:30.127

正如 ArjunShankar 所说，您将花费 O(1) 时间来访问组内的设备，假设您不必处理太多即可找到特定设备（假设您必须找到它），这还不错。如果您打算同时处理它们并且数量变大（或者您的可用内存有限），您应该看看一些技术，例如磁盘分页。

# windows - 存储在 Github for Windows 中的凭据可以与整个操作系统共享吗？

> ID：13288131
> 
> 赞同：1
> 
> 时间：2012-11-08T11:24:33.033
> 
> 标签：windows, git, github-for-windows

是否可以与整个操作系统共享 GHfW 的 Git 配置？理想情况下，我希望在系统 PATH 上拥有 GHfW 的 git.exe，并通过 GHfW 存储的凭据可从任何命令提示符获取？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T14:29:28.947

默认情况下，GitHub For windows 将`%USERPROFILE%`用作其`%HOME%`存储：

*   `.gitconfig`（所有回购的全局配置）
*   `.ssh/github_rsa`（GitHub 用于 Windows 身份验证的私钥）*
*   `.ssh/github_rsa.pub`（GitHub 用于 Windows 进行身份验证的公钥）

如果您在 GitHub for Windows 之外工作，并且 git 本地安装将受益于相同的设置，前提是它们`%HOME%`被定义为相同的`%USERPROFILE%`环境变量路径。

但是，没有简单的方法来使用（实际上找到）其包装的 git 版本：
Windows 的 GitHub 只公开了一个 Wrapped `msysgit`in `%APPDATA%\GitHub\PortableGit_8810fd5c2c79c73adcc73fd0825f3b32fdb816e7\cmd\git.exe`，
它是一个[项目](https://github.com/github/msysgit/commit/8810fd5c2c79c73adcc73fd0825f3b32fdb816e7)`8810fd5c2c79c73adcc73fd0825f3b32fdb816e7`的[SHA1`github/msysgit`](https://github.com/github/msysgit/commit/8810fd5c2c79c73adcc73fd0825f3b32fdb816e7)。
它在内部使用环境变量`%git_install_root%`。

你可以grep它的路径`%USERPROFILE%\Local Settings\Application Data\GitHub\shell.ps1`。

# sql - SQL电影数据库查询

> ID：13288132
> 
> 赞同：0
> 
> 时间：2012-11-08T11:24:37.200
> 
> 标签：sql, oracle, sqlplus

我无法解决以下 SQL 请求：

1.  说出出演过比“sara allgood”还多的电影以及曾在“戛纳电影节”中获奖的演员的名字。另外，请给出电影名称。

2.  获取 1970 年至 1990 年间制作的所有电影中获奖电影的百分比。

有几张桌子，但我假设只需要 4 张：'films'、'remakes'、'casts'、'awtypes'

*   “电影”属性：电影ID、电影名称、年份、导演、工作室、奖项

*   'remakes' 属性：filmid、标题、年份、priorfilm、previousyear

*   'casts' 属性：filmid、电影名、演员、奖项（10）

*   'awtypes' 属性：award(10), org(100), country, colloquial(50), year

我有点不清楚如何在第一个查询中将奖项与“戛纳电影节”相匹配，因为奖项字段只有 10 个字符，这意味着它是对 awtypes 表的引用，但我不知道 awtypes 中的哪个字段表包含奖项的名称，我目前无权访问数据库，因此它是 org 或口语。

至于第二个，我不知道如何计算百分比，但似乎应该使用联合运算符解决 1970 年至 1990 年间制作的电影和获奖的电影（我不知道如何为获得至少一个奖项设置条件）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T11:58:43.293

一些提示，希望对你有所帮助！

> 说出出演过比“sara allgood”还多的电影以及曾在“戛纳电影节”中获奖的演员的名字。另外，请给出电影名称。

根据您所说的属性，我会说您可以通过表格获得正确的`awtypes`属性。`casts`它们都包含该`award(10)`列。鉴于您的数据，我希望该`org(100)`列包含提供奖品的组织的某些内容，因此在这种情况下，这将是我对`cannes film festival`内容的猜测。但是你必须尝试一下，看看你会得到什么结果。不幸的是，在这种情况下，通常很难仅根据列名来猜测列的内容。

> 获取 1970 年至 1990 年间制作的所有电影中获奖电影的百分比。

根据您的问题中所述的信息，我会猜测表中的`award`列`films`包含一个布尔值或说明电影是否获奖的内容。你得试试这个。如果是这种情况，您可以`COUNT(*)`对 1970 年至 1990 年间的所有电影使用 a 并对`COUNT(*)`所有电影`WHERE award = 1`（或其他内容）使用 a 来获取总数。

您确实可以在计算查询中将这些与`UNION`. 可能对您有帮助的示例：

```
SELECT   SUM(cnt1) / SUM(cnt2) ... do the right computation here ...
FROM     ( SELECT  COUNT(*) AS cnt1
                   ,0 AS cnt2
           FROM    table1

           UNION ALL

           SELECT  0 AS cnt1
                   ,COUNT(*) AS cnt2
           FROM    table2) AS sub 
```

# mercurial - 从 mercurial_keyring 中删除密码（Windows 上的 TortoiseHg）

> ID：13288133
> 
> 赞同：2
> 
> 时间：2012-11-08T11:24:41.047
> 
> 标签：mercurial, tortoisehg, mercurial-keyring

我在 Windows XP 上运行 TortoiseHg。我启用了 mercurial_keyring 扩展。

通过 mercurial_keyring 扩展存储密码后，有什么方法可以删除它？

一个典型的用例是：

用户 A 对远程存储库没有推送权限。位于同一地点的用户 B 确实具有推送权限。用户 B 在用户 A 的机器上输入他的用户名和密码以允许推送发生。

如何从用户 A 的机器中删除用户 B 的凭据？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-08T11:57:39.870

Win32 API 调用 CredRead 和 CredWrite 用于保存到密钥环。换句话说，mercurial_keyring 正在保存您可以使用 Windows[凭据管理器](http://support.microsoft.com/kb/306541)(Win7) 管理的凭据，对于[XP，它将是](http://www.interworks.com/blogs/jvalente/2010/02/02/removing-saved-credentials-passwords-windows-xp-windows-vista-or-windows-7)Run-`rundll32.exe keymgr.dll, KRShowKeyMgr`

从另一边[_](http://pypi.python.org/pypi/mercurial_keyring)

> 密码由用户名和远程地址的组合识别

因此，如果 UserB 的 hg-username 不是公开的，则 UserA 将不会获得权限提升

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-07-02T14:25:37.397

在 Windows 7 上，您可以按照[此处](http://www.ayulin.net/blog/2012/how-to-removereset-a-mercurial-keyring-saved-password-on-windows/)的说明进行操作（控制面板 -> 用户帐户和家庭安全 -> 凭据管理器，然后删除显示“Mercurial”的所有内容）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-01-09T20:36:14.267

在这种情况下，我可能会在推送之前禁用扩展，当然很容易忘记它。

有一些方法可以清除密码是合理的期望，我会考虑添加。要遵循的问题：[https ://bitbucket.org/Mekk/mercurial_keyring/issue/45/some-way-to-clear-password-and-maybe](https://bitbucket.org/Mekk/mercurial_keyring/issue/45/some-way-to-clear-password-and-maybe)

**更新**这是自 mercurial keyring 1.1.0（2015 年 11 月发布）以来实施的，mercurial keyring 现在带来

```
hg keyring_clear «path» 
```

清除密码的命令。它不如使用 GUI 工具可爱，但适用于任何密码后端（并且使用完全相同的 API 用于保存密码和相同的逻辑来选择正确的后端）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-10T19:53:23.037

在 Windows 8 和 10 上是：

> 控制面板 > 用户帐户 > 凭据管理器 > Windows 凭据。

# javascript - 猴子修补一个 jquery ui 自动完成渲染项

> ID：13288135
> 
> 赞同：1
> 
> 时间：2012-11-08T11:24:55.543
> 
> 标签：javascript, jquery, jquery-ui, monkeypatching

```
$("selector").autocomplete({ ... }).data( "autocomplete" )._renderItem = function( ul, item ) {
    return $( "<li></li>" )
        .data( "item.autocomplete", item )
        .append( "<a>" + item.label + "<br>" + item.desc + "</a>" )
        .appendTo( ul );
}; 
```

[从这里](https://stackoverflow.com/a/6164621/106261)

`.data( "autocomplete" )`尽管数据用于将键值对作为`data-foo`属性的一部分附加到 dom 元素，但这个位在做什么。但这似乎不是这里的情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T11:28:42.290

根据[文档](http://api.jquery.com/data/)：

*   `.data(name, value)`是 setter ：它附加`value`到`name`键上
*   `.data(name)`是 getter ：它返回附加到`name`键的值

在这种情况下，该值是一个对象（它存储有关绑定到节点的自动完成实例的数据），并且该对象已就地修改。

jQuery 库中的一种常见模式是让函数根据其参数触发不同的操作：

*   `$(selector).click(myFunction)`将处理程序绑定到节点，`$(selector).click()`触发`click`事件
*   在 jquery-ui 中，`$sel.widget('option', name, value)`通常允许您在创建小部件后更改选项，`$sel.widget('option', name )`将允许您获取值
*   ETC ...

# angularjs - AngularJS 显示或隐藏表单元素的方式是什么？

> ID：13288136
> 
> 赞同：10
> 
> 时间：2012-11-08T11:24:55.330
> 
> 标签：angularjs

Tami Wright 在邮件列表中提出了这个问题......

我正在从 JQuery 进入 AngularJS 世界，我不太确定如何翻译一个在 JQuery 中毫无意义的特定用例。该用例是基于同一表单中选择元素的更改启用/禁用或隐藏/显示表单元素。任何人都愿意分享以帮助我完成这项工作的任何想法/建议/指示？

对于我在这里尝试做的事情的想法是一些代码来说明：

```
$('#ddl').change( function (e) {
                var selectedValue = $(this).val();
                switch(selectedValue){
                    case 1:
                         // Hide/show or enable/disable form elements here with Javascript or Jquery

// Sample enable code 
            document.getElementById("username").readOnly = false;
            document.getElementById("username").style.background = "transparent";
            document.getElementById("username").style.color = "#000000"; 

// Sample disable code 
            document.getElementById("first_name").readOnly = true;
            document.getElementById("first_name").style.color = "#c0c0c0"; 
                                    break;          
                }
                return false;
            }); 
```

先感谢您，

塔米赖特

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-08T11:24:55.330

AngularJS 的主要设计目标之一是允许应用程序开发人员构建 Web 应用程序，而无需或很少直接操作 DOM。在许多情况下，这也导致了更具声明性的编程风格。这使得业务逻辑可以很容易地进行单元测试，并大大提高了您开发应用程序的速度。

大多数具有 jQuery 背景的人都很难摆脱基于 DOM 操作的开发，特别是使用 DOM 作为其应用程序的域模型。

AngularJS 实际上很容易根据用户事件或数据更改来更改输入元素的外观。这是如何解决上述问题的一个示例。

这是工作演示：[http ://plnkr.co/edit/zmMcan?p=preview](http://plnkr.co/edit/zmMcan?p=preview)

```
<html ng-app>
<head>
  ...
  <style type="text/css">
    .disabled {
      color: #c0c0c0;
      background: transparent;
    }
  </style>
</head>
<body ng-init="isEnabled=true">

  <select ng-model="isEnabled" ng-options="choice == 'Enabled' as choice for choice in ['Enabled', 'Disabled']"></select><br>

  User Name: <input ng-model="userName" ng-readonly="!isEnabled" ng-class="{ disabled: !isEnabled }"><br>
  First Name: <input ng-model="firstName" ng-readonly="!isEnabled" ng-class="{ disabled: !isEnabled }">
</body> 
```

您可以看到，我们可以声明输入的类和只读属性绑定到 select 的值，而不是编写命令式代码。如果您愿意，可以通过对控制器中的值进行复杂计算来增强这一点。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-13T21:37:28.883

[来自关于指令](http://docs.angularjs.org/guide/directive)的 AngularJS 官方文档：

> 指令是一种教授 HTML 新技巧的方法。在 DOM 编译期间，指令与 HTML 匹配并执行。这允许指令注册行为，或转换 DOM。
> 
> Angular 带有一组内置指令，这些指令对于构建 Web 应用程序很有用，但可以进行扩展，以便将 HTML 转换为声明性域特定语言 (DSL)。

为了启用/禁用输入，AngularJS 中最简单的方法是使用以下[ngDisabled](http://docs.angularjs.org/api/ng.directive:ngDisabled)指令。对于显示/隐藏元素，请使用以下[ngShow](http://docs.angularjs.org/api/ng.directive:ngShow)和[ngHide](http://docs.angularjs.org/api/ng.directive:ngHide)指令

AngularJS 为所有这些提供了很好的示例。

# c++ - c++ win 32application：员工类数组问题

> ID：13288139
> 
> 赞同：0
> 
> 时间：2012-11-08T11:25:03.830
> 
> 标签：c++, arrays, class

我的员工班有问题。该程序本身有一个示例员工，并允许用户向该程序输入更多员工。我遇到的问题是我可以添加 1 名新员工并打印示例员工和新添加的员工的列表，但是当我尝试添加第二名员工并打印时，第二个会覆盖第一个添加了员工。

我不确定问题是否与我使用的数组（它有 4 个元素，数字，名字，姓氏和部门）有关，或者它是否与正在调用的函数有关，在我完成的代码下方。

头文件：

```
#include <iostream>
using namespace std;

class employee
{

public :
    employee();
    employee(int, char*, char*, char*); // employee works number, name, department
    void Set( int, char*, char*, char*); // set the number, name and dept
    void Print();
    void printmenu();
    ~employee(); //destructor

private: 
    int e_num; // employee number
    char e_fname[30];
    char e_lname [30];
    char e_dept[30];

}; 
```

CPP 文件：

```
#include <iostream>
#include "employee.h"
using namespace std;

employee::employee() 
{

}

employee::employee(int num, char* fname, char* lname, char* dept)
{
    Set(num, fname, lname, dept);
}

void employee::Set( int num, char* fname, char* lname, char* dept)
{
    if (num < 0 )
    {
    return ; // add in code here to give error message if works is less than 0
    }
    e_num = num;
    strcpy (e_fname, fname);
    strcpy (e_lname, lname);
    strcpy (e_dept, dept);

}

void employee::Print()
{
        cout << e_num <<" \t " << e_fname <<" "<< e_lname <<" \t " << e_dept << " \n";
}

void employee::printmenu()
{
    cout << "EMPLOYEE MENU\n"
         << "~~~~~~~~~~~~~\n"
         << "1\. Add New Employee\n"
         << "2\. Edit Employee\n"
         << "3\. Delete Employee\n"
         << "4\. Print Employee List\n"
         << "5\. Exit\n";
}

employee::~employee()
{

} 
```

主要的：

```
#include <iostream>
#include "employee.h"
using namespace std;

void main (void)
{
    char input;
    bool done = false;  

    employee emp1(1, "Joe", "Bloggs", "Customer Service");// sample employee
    int empcount = 1;
    employee empnew[20];

    int num, j=0, k=0; // num is employee number
    char* fname = new char [20]; // employee first name
    char* lname = new char [20];  // employee last name
    char* dept  = new char [30]; // employee department

    while(!done)
    {       
    employee pmenu;
    pmenu.printmenu();

    cout <<"Please make your selection:";
    cin >> input;

    switch (input)
    {
    case '1': // add new employee

        cout<<"\nEnter Employee Number:";   
        cin >> num;
        cout<<"\nEnter first name:";
        cin >> fname;
        cout<<"\nEnter Last name:";
        cin >> lname;
        cout << "\nEnter Department:";
        cin >> dept;
        cout << "\n";

        empnew[j].Set(num, fname, lname, dept);
        empcount++;

        cout << "New employee added:"<< fname <<" "<<lname << "\n";
        cout<< "New Number of Employees:" << empcount<< "\n\n";
        break; 

    case '2': //Edit Employee
    // enter stuff here
        break;

    case '3': //Delete Employee
    // enter stuff here
        break;
    case '4': // print employee list

        cout <<"Total number of Employees:"<<empcount<<endl;
        cout <<"Number \t Employee Name \t Department \n" ;

        if (empcount == 1)
        {
            emp1.Print(); 
        }
        else 
        {
            emp1.Print(); 
            empnew[j].Print();//print input
        }
        cout <<"\n";
        break;
    case '5':
        cout << "Program closing\n";
        done = true;
        break;

    }

    }
    getchar();
    return ;
} 
```

（抱歉发布所有代码，不想遗漏重要的东西）

我尝试了几种不同的方法来让第二个（和后续的员工）打印，但是无论我尝试更改数组或函数的哪种方式都会出错并且代码不会编译。

我想在添加新员工时使用

```
empnew[j]= new employee (num ,fname,lname,dept); 
```

但这给了我“错误：没有运算符”=“匹配这些操作数”

以及许多其他不起作用的变体。

正如您可能猜到的那样，我刚开始使用 c++，所以任何帮助都会非常有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T11:32:23.023

您将员工数据设置为`empnew[j]`数组项，但`j`变量永远不会改变。从这个片段来看：

```
empnew[j].Set(num, fname, lname, dept);
empcount++; 
```

也许你应该变成

```
empnew[empcount++].Set(num, fname, lname, dept); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T11:30:49.750

`new`运算符返回一个*指针*，并且您有一个值数组。

您必须创建一个指针数组，或者（我建议）实现一个复制构造函数并使用复制：

```
empnew[j] = employee (num ,fname, lname, dept); 
```

# azure - 只有一个实例适用于 IIS7.5 上的 Azure 2012 年 10 月 SDK

> ID：13288143
> 
> 赞同：2
> 
> 时间：2012-11-08T11:25:26.967
> 
> 标签：azure, visual-studio-2012, azure-web-roles, azure-sdk-.net

我刚刚将我的 Azure 解决方案升级到 VS2012 和 2012 年 10 月版本。我有 2 个 webrole，但当我从 IIS 管理器中查看时，其中只有 1 个正在工作。我很确定，因为我的 webrole 的角色间通信请求也失败了。

首先，我认为这可能是另一个问题，所以我问了这个问题：[Windows 8 Azure Emulator is Remapping Port 80 to 81](https://stackoverflow.com/questions/13272013/windows-8-azure-emulator-is-remapping-port-80-to-81)

在这里你可以看到我的 IIS 管理器： ![IIS 网络角色](../Images/dfcb89321b373c0b11ba0de30a1be82a.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T23:40:09.503

我遇到了同样的问题，并在此处建议的注册表破解后解决了它： [Windows Azure Compute Emulator (SDK 1.8) 的奇怪行为，在具有 VS2012 但没有 VS2010 的干净机器上具有多个角色实例](https://stackoverflow.com/questions/13946634/strange-behavior-of-windows-azure-compute-emulator-sdk-1-8-with-multiple-role)

任何有此问题的人，请堆积到此连接日志，以便 MS 正确修复： [https ://connect.microsoft.com/VisualStudio/feedback/details/773786/azure-sdk-1-8-binds-several-web-roles -to-the-the-same-port-on-local-emulator](https://connect.microsoft.com/VisualStudio/feedback/details/773786/azure-sdk-1-8-binds-several-web-roles-to-the-same-port-on-local-emulator)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T22:53:43.867

这是一个错误，我希望它在微软的下一次更新中得到修复。如果您在 Windows 8 上安装了 VS2012 并且没有安装/升级 VS2010，那么肯定会发生

解决方法：

*   使用它创建一个文本文件 (*.reg) 并导入到您的注册表中（在资源管理器中双击 .reg 文件）

> Windows 注册表编辑器版本 5.00
> 
> [HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Microsoft\DevDiv\vs\Servicing\10.0] "SP"=dword:00000001

*   终止进程，即退出 VS2012，退出计算模拟器（或者如果有疑问则重新启动）。
*   再开火！

# java - Java ProcessBuilder 抛出 IOException

> ID：13288152
> 
> 赞同：0
> 
> 时间：2012-11-08T11:26:04.867
> 
> 标签：java, windows, runtime.exec, processbuilder

> **可能重复：**
> [在 Java 中将“dir”的结果输出到控制台](https://stackoverflow.com/questions/5783855/outputting-result-of-dir-to-console-in-java)

我可能在这里做一些愚蠢的事情。请帮忙。这是简单的代码：

新的 ProcessBuilder("dir").start();

**错误信息：** java.io.IOException: Cannot run program "dir": CreateProcess error=2, The system cannot find the file specified at java.lang.ProcessBuilder.start(ProcessBuilder.java:460)

我正在尝试使用 ProcessBuilder 在 unix 机器上执行 unix 命令，但我正在 Windows 机器上开发，因此决定在继续之前尝试一些基本的 windows 命令。不幸的是，它不起作用。如果我做错了什么，请告诉我。我还尝试将进程构建器的目录设置为“C:\”之类的内容，并尝试使用运行时，**即 Runtime.getRuntime().exec("dir");** 但我得到完全相同的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T11:27:37.663

`dir`是一个内置命令，没有单独的可执行文件。试试`cmd /c dir`吧。

# c# - 基于 RadioButton (MVC) 验证字段

> ID：13288153
> 
> 赞同：0
> 
> 时间：2012-11-08T11:26:06.567
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4

我有一些有 2 个选项**的注册表单**

> 1.  个人的
> 2.  公司

他们的一些字段是相同的，如密码、用户名、电子邮件和其他不同。

我的问题是在这种情况下我们应该实施哪种模型策略？

我们是否使用了 2 个“选项卡”和 1 个按钮“提交”，但在这种情况下，我们有重复的 UI 字段......而且我不明白在这种情况下类 MODEL 应该如何以及我们必须如何验证它...... .

或者...

我们需要使用 2 个按钮“提交”并以某种方式使用 2 个模型 ....

我知道我们可以使用 if（代码如下）但我们需要哪个模型？

```
<html>
...
  <body> 
    <div>

      <form action="/SignUp/Personal" method="post">
        <input type="text" name="username" value="" />
        <input type="text" name="passowrd" value="" />
        <input type="submit" name="signup" value="SUBMIT" />
      </form>

      <form action="/SignUp/Company" method="post">
        <input type="text" name="username" value="" />
        <input type="text" name="passowrd" value="" />
        <input type="submit" name="signup" value="SUBMIT" />
      </form>
    </div>
</body>
</html> 
```

好吧，我不知道我们可以使用哪种方法...

有什么线索吗？

谢谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T15:38:05.233

有几种方法，但存在允许您不重复 UI 字段并具有单个提交按钮的方法，您可以根据所选用户 AccountType 划分模型验证，自定义 ActionMethodSelectorAttribute 帮助您根据用户帐户类型划分方法。模型将在适当的行动中自动验证。

这是示例实现：

控制器：

```
 public class HomeController : Controller
    {
        public ActionResult Index()
        {
            return View(new SignUpModel
                            {
                                Common = new Common(),
                                Personal = new Personal(),
                                Company = new Company()
                            });
        }

        [HttpPost]
        [SignUpSelector]
        [ActionName("Index")]
        public ActionResult PersonalRegistration(Personal personal, Common common)
        {
            if (ModelState.IsValid)
            {
                //your code
            }
            return View("Index", new SignUpModel()
                                     {
                                         Common = common,
                                         Personal = personal,
                                         Company = new Company()
                                     });
        }

        [HttpPost]
        [SignUpSelector]
        [ActionName("Index")]
        public ActionResult CompanyRegistration(Company company, Common common)
        {
            if(ModelState.IsValid)
            {
                //your code
            }
            return View("Index", new SignUpModel()
                                     {
                                         Common = common,
                                         Personal = new Personal(),
                                         Company = company
                                     });
        }

    } 
```

模型：

```
public class SignUpModel
{
    public string AccountType { get; set; }
    public Common Common { get; set; }
    public Company Company { get; set; }
    public Personal Personal { get; set; }
}

public class Company
{
    [Required]
    public string CompanyName { get; set; }
    public string Address { get; set; }
}

public class Personal
{
    [Required]
    public string FirstName { get; set; }
    public int Age { get; set; }
}

public class Common
{
    [Required]
    public string UserName { get; set; }
    [Required]
    public string Passwrod { get; set; }
} 
```

自定义 ActionMethodSelectorAttribute：

```
public class SignUpSelector : ActionMethodSelectorAttribute
{
    public override bool IsValidForRequest(ControllerContext controllerContext, MethodInfo methodInfo)
    {
         return (controllerContext.HttpContext.Request.Form["AccountType"] + "Registration" == methodInfo.Name);
    }
} 
```

看法：

```
@model MvcModelValidationTest.Controllers.SignUpModel 

@{
    ViewBag.Title = "Home Page";
}

@using(Html.BeginForm())
{
    @Html.Display("Personal")
    @Html.RadioButtonFor(x=>x.AccountType, "Personal",new { @checked = "checked" })<br/>

    @Html.Display("Company")
    @Html.RadioButtonFor(x=>x.AccountType, "Company")<br/>

    @Html.TextBoxFor(x=>x.Common.UserName)<br/>
    @Html.PasswordFor(x=>x.Common.Passwrod)<br/>

    @Html.TextBoxFor(x=>x.Company.CompanyName)<br/>

    @Html.TextBoxFor(x=>x.Company.Address)<br/>

    @Html.TextBoxFor(x=>x.Personal.FirstName)<br/>

    @Html.TextBoxFor(x=>x.Personal.Age)<br/>

    <input type="submit"/>
} 
```

# random - jQuery SlideToggle 和随机颜色

> ID：13288154
> 
> 赞同：1
> 
> 时间：2012-11-08T11:26:08.337
> 
> 标签：random, colors, slidetoggle

我在这里有一个 jsfiddle 来说明我的问题

[http://jsfiddle.net/ttmt/DgnLd/1/](http://jsfiddle.net/ttmt/DgnLd/1/)

它只是一个带有隐藏 div 的简单按钮。按钮幻灯片切换隐藏的 div。

我希望 div 每次打开时都填充随机颜色。

目前它正在选择两种随机颜色 - 当 div 打开时和完成打开时。

我怎样才能停止第二种颜色而只拥有一种。

```
 <!DOCTYPE html>
    <html>
      <head>
      <title>Title of the document</title>

      <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
      <link rel="stylesheet" type="text/css" href="http://yui.yahooapis.com/3.4.1/build/cssreset/cssreset-min.css">

      <style type="text/css">
        •{
          margin:0;
          padding:0;
        }
        #wrap{
            margin:20px;
        }
        #btn{
            width:100px;
            height:50px;
            background:red;
            color:white; 
            padding:10px; 
            margin:0 0 50px 0;        
        }
        #infoDiv{
            width:500px;
            height:300px;
            display:none;
        }
      </style>

      </head>

    <body>

      <div id="wrap">

          <a href="#" id="btn">CLICK</a>

          <div id="infoDiv">

          </div>                    

      </div>

      <script>

        $(document).ready(function(){

            alert('here');

            var color_arr = ['#6faab6','#80c3d1','#888888','#d8e420','#21b4e4','#e4b115','#33ace4'];

            $('#infoDiv').hide();

            $('#btn').bind('click', function(){
                $('#infoDiv').slideToggle('slow', function(){
                    var ranNum = Math.floor(Math.random()*color_arr.length);
                    var col = color_arr[ranNum];
                    $('#infoDiv').css({'background': col});
                });
            });    

        });

      </script>

    </body>

    </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T11:33:57.267

```
$(document).ready(function(){

var color_arr = ['#6faab6','#80c3d1','#888888','#d8e420','#21b4e4','#e4b115','#33ace4'];

$('#infoDiv').hide();

$('#btn').bind('click', function(){
    var ranNum = Math.floor(Math.random()*color_arr.length);
        var col = color_arr[ranNum];
    $('#infoDiv:hidden').css({'background': col});
    $('#infoDiv').slideToggle('slow');
}); 
```

});​</p>

试试看 - 我已将您的随机颜色选择器移出 SlideToggle 回调，因为它只会在幻灯片完成后运行，从您的问题来看，我认为您不想要。

如果通过检查可见选择器隐藏它，它也只会更改信息 div 的颜色，您可以[在此处阅读更多信息](http://api.jquery.com/visible-selector/)

让我知道这是否适合你

# javascript - JavaScript IE8：向 NodeList 对象添加函数

> ID：13288155
> 
> 赞同：2
> 
> 时间：2012-11-08T11:26:08.610
> 
> 标签：javascript, internet-explorer-8, cross-browser

我有一个对 NodeList 的引用，我只是想将一个函数附加到该对象，以便稍后由脚本的另一个区域调用。

```
// Quick and dirty hack to obtain a NodeList from given element(s):
var fragment = document.createDocumentFragment(),
    nodeList;
fragment.appendChild(document.getElementById("test").cloneNode(true));

nodeList = fragment.childNodes;
console.log(nodeList);

// How can a method be defined on the nodeList in IE8?
nodeList["someMethod"] = function() { alert("YOU WIN!"); };
nodeList.someMethod(); 
```

现场示例：http: [//jsfiddle.net/gCwAr/](http://jsfiddle.net/gCwAr/)

上述代码适用于以下浏览器：IE9、Chrome、Firefox、Safari、Opera。

我的问题是**如何让代码在 IE8 中工作**，因为在倒数第二行抛出以下错误：

> 对象不支持此属性或方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T11:40:05.903

扩展宿主对象（例如 DOM 对象）[通常不是一个好主意](http://perfectionkills.com/whats-wrong-with-extending-the-dom/)。只是不要这样做。相反，将 NodeList 包装在您自己的对象中，该对象具有您的额外方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-17T13:12:47.773

您可以在 IE8 中执行此操作，首先在 DOM 类原型上定义属性，例如：

```
var nodeList = document.body.childNodes;
// Define a property with the same name on the prototype object first,
// to enable defining the property on the NodeList
NodeList.prototype.myMethod = undefined;
nodeList.myMethod = function () { alert("Method"); };
nodeList.myMethod(); 
```

# struts2 - 如何在单击 jQuery 网格中的一行时调用 struts2 动作

> ID：13288157
> 
> 赞同：2
> 
> 时间：2012-11-08T11:26:24.300
> 
> 标签：struts2, struts2-jquery, jqgrid

我有一个 jsp 页面，我在 Struts2 jquery 网格中显示我的书籍详细信息。现在我想调用一个动作并将 rowid 作为参数传递给动作类，点击我的 Jquery 网格中的一行。而且我还想在调用我的操作后指定要刷新的 div 的目标。

这些东西我很了解，`<sj:submit target="targetDivToRefresh" formId="form2" button="true"/>` 但我不知道如何执行这些任务“当用户从我的 struts2 jquery 网格中单击一行时”。

请帮我解决这个问题。

## 我的jsp页面

```
 <sjg:grid
        id="bookgrid" 
        editurl="%{bookediturl}"
        navigator="true" 
        editinline="true" 
        navigatorSearch="false"
        autowidth="false"   
        width= "1550" 
        viewrecords="true"  
        navigatorRefresh="true"
        navigatorDelete="true">
    <sjg:gridColumn name="id" index="locationId" title="ID" formatter="integer" sortable="false" key="true" 
                       search="false"  editable="true"  hidden="true"   /> 
     <sjg:gridColumn name="authLastname" index="authLastname" title="AuthorLastname" sortable="true" search="true" editrules="{required: true}"
                        editable="true" edittype="text" />  
 </sjg:grid> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T13:29:18.810

试试这个：

```
$(function(){
    $.subscribe('rowselect', function(event,data) {
        alert(event.originalEvent.authLastname);
        $("#targetDivToRefresh").load('your-struts2-action');
    });
}); 
```

**更新**

```
$("#targetDivToRefresh").load('your-struts2-action'); 
```

参考链接：[Struts2 jquery 插件展示](http://struts.jgeppert.com/struts2-jquery-showcase/index.action)

请确保此事件将被触发，如果您单击一行，我添加了测试代码`alert()`以确保它已在事件期间被调用。还有一件事，我必须告诉你，你必须使用在你的标签中注册你的`selectrow`事件`<sj:grid>``onSelectRowTopics="rowselect"`

**更新**

```
$("#targetDivToRefresh").load("<s:url value="your-struts2-action"/>"+"?id="+event.originalEvent.id); 
```

# logging - 请求：在服务器报告中添加“工人数量”

> ID：13288158
> 
> 赞同：0
> 
> 时间：2012-11-08T11:26:27.030
> 
> 标签：logging, g-wan

通过 gwan_1 或 gwan -w 1，
gwan 限制了编号。工人到一个。
但我在服务器报告中找不到它。

报告中只有以下信息：

```
进程：436  
CPU(s): 1 Intel(R) Pentium(R) Dual CPU E2180 @ 2.00GHz (2 Cores/CPU, 1 threads/Core)  
允许：2 核

```

即使当我通过重命名为 gwan_1 或 gwan -w 1 运行 gwan 时，此信息也保持不变。

有必要显示编号。服务器报告中的工人数。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T16:07:30.617

这部分日志文件报告机器配置。

从 G-WAN v3.8 开始，文件`number of worker threads`中也会报告`gwan.log`（此处为`./gwan_2`）：

```
1 Intel(R) Xeon(R) CPU E5620 @ 2.4GHz (4 Cores/CPU, 2 threads/Core)
Using 2 worker threads 
```

现在 gwan.log 文件中还有许多新内容（如 servlet 大小和指纹）。

# php - PHP + MySQL - 根据数据库中的当前值创建 ID

> ID：13288161
> 
> 赞同：0
> 
> 时间：2012-11-08T11:27:09.917
> 
> 标签：php, mysql, unique, auto-generate

谷歌让我失望了，所以我寻求专家帮助:)

假设我有一个由“ID”和“Name”组成的数据库。目前在这个数据库中我有这些记录：

001 - 约翰

002 - 埃里克

003 - 凯西

为了生成下一个 ID，我在 mysql 中使用了 COUNT 并在 php 中加了 1，但我显然没有考虑到可以删除用户。如果 002 - Eric 被删除，脚本将尝试使用已经存在的 ID 003。

有什么方法可以检查这个吗？我想出了一个遍历值的while循环，但是如果数据库很长，这可能会占用太多资源（而且我不确定要循环什么）？

截至目前，我有这个：

```
SELECT COUNT(id) FROM users
$id = $thecount + 1; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T11:31:06.157

您可以将 ID 字段的数据类型设置为，`AUTOINCREMENT`但如果出于某种原因需要在 PHP 中执行此操作，您最好执行以下操作：

```
SELECT MAX(id) FROM users
$id = $thecount + 1; 
```

尽管我建议您改用`AUTOINCREMENT`数据类型。

# vb.net - 如何合并具有多个唯一值vb的数据集中的某些数据行

> ID：13288164
> 
> 赞同：1
> 
> 时间：2012-11-08T11:27:25.540
> 
> 标签：vb.net, select, time, merge, dataset

标题可能很难理解，所以这里有一个简短的解释：我必须创建一个方法：

MergeDataset(byval ds as Dataset) 作为数据集

*   数据表有多行
*   列：startDate、endDate 和其他多个

**数据集按 startDate 排序**

我现在应该做什么 ：

*   我创建了一个数据集的克隆，当然它是空的
*   我遍历数据表中的每个数据行

    **如果**数据行在克隆数据集中的值等于所有列（开始日期和结束日期除外）并且克隆的结束日期等于数据行的开始日期 - 1 天

**否则**该行被添加到克隆

现在这已正确完成，但需要很多时间。当我有一个 100 000 行的数据集时，将它们全部合并需要几个小时。

这里有一些代码：

```
Dim mergeSet As DataSet = dsSubscriptions.Clone()
Dim dr() As DataRow = ds.Tables("resultTable").Select("","startDate")
For Each sourceRow As DataRow In dr

If mergeSet.Tables("resultTable").Rows.Count > 0 Then
     Dim foundRows As DataRow() = mergeSet.Tables("resultTable").Select(endDate=startDate-1 and value1 = value1 and value2 = value2 and value3 = value3)    
'If nothing in foundRows -> Add row
For Each resultrow As DataRow In foundRows
resultrow("endDate") = CDate(sourceRow("endDate"))
next
else
'Add row
Next 
```

如果我检查时间跨度它们会增加很多，那么在选择 mergeSet 时会浪费很多时间。select 有 5 个唯一值，如果所有值相等，则可以合并行，并且可以将日期合并为一个句点。

小例子：

id startDate endDate value1 value2 value3

1 2012 年 1 月 11 日 2012 年 11 月 30 日 ABC 添加到合并

2 2012 年 1 月 12 日 2012 年 12 月 31 日 ABC 与 1 合并

3 1-1-2013 31-1-2013 ABB 添加到合并（与 2 不同的值）

欢迎任何帮助！亲切的问候

# ruby-on-rails - Rails - 使用回形针上传 zip 文件并解压缩

> ID：13288166
> 
> 赞同：2
> 
> 时间：2012-11-08T11:27:26.930
> 
> 标签：ruby-on-rails, ruby, upload, paperclip, unzip

我正在尝试使用**rails**和**回形针**gem 上传一个 zip 文件，到目前为止它工作正常。但是下载完成后，我想解压这个文件并对里面的文件做一些事情。

当我尝试解压缩文件时出现问题，因为它不在它自己的路径中，可能它正在被复制但尚未完成。（而且我在本地主机中，在线模式下更糟）。

所以，我需要某种事件/触发器来知道文件何时完成上传以开始解压缩。同时，显示某种界面。控制器的代码如下：

```
# POST /components
# POST /components.json
def create
  @component = Component.new(params[:component])

  file = @component.folder

  Zip::ZipFile.open(file.path) do |zipfile|   # <-- The error comes here
    zipfile.each do |file|
      # do something with file
    end
  end

  respond_to do |format|
    if @component.save
      format.html { redirect_to @component, notice: 'Component was successfully created.' }
      format.json { render json: @component, status: :created, location: @component }
    else
      format.html { render action: "new" }
      format.json { render json: @component.errors, status: :unprocessable_entity }
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-30T10:38:14.893

这是一个解压缩功能，可能对您的情况有所帮助，看看这是否适合您。

def create_photos_from_zip logger.debug "create_photos_from_zip -->" zip = params[:zip] logger.debug "解压文件 #{zip.path} 类 #{zip.class}"

```
dir = File.join(RAILS_ROOT,"public","events","temp",current_user.name)
FileUtils.mkdir_p(dir)
Zip::ZipFile.open(zip.path).each do |entry|
  # entry is a Zip::Entry
  filename = File.join(dir,entry.name)
  logger.debug "will extract file to #{filename} to"
  entry.extract(filename)
  p = File.new(filename)
  photo = Photo.create(:photo=>p)
  photo.title = "nova imagem"
  @event.photos << photo 
  p.close
  FileUtils.remove_file(filename)
end
#delete zip file
logger.debug "closing/deleting zip file #{zip.path}"
zip.close
FileUtils.remove_file(zip.path)
logger.debug "saving the event to database"
logger.debug "create_photos_from_zip <--" 
```

结尾

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T17:49:22.940

Not sure if this would help as I am struggling with paperclip myself but here goes.

I would expect that after the save method has been called and completed that the file would be saved. I would suggest that you call your additional actions on the file after the save method.

Hope it helps.

# java - 在我的应用程序中，我在运行时为文本框控件分配了值，但是当我尝试从文本框获取值时，它显示为 null

> ID：13288167
> 
> 赞同：1
> 
> 时间：2012-11-08T11:27:28.497
> 
> 标签：java, selenium-rc

在我的应用程序中，我在运行时为文本框控件分配了值，但是当我尝试从文本框中获取值时，它显示为 null 并给出以下错误消息

> **错误：此元素没有值；它真的是一个表单域吗？**

我尝试了以下语句来获取在文本框中输入的值。

```
String listname = selenium.getValue("//*[@id='div-entity-lists']/table/tbody/tr[2]/td/p[1]/a[2]"); 
```

（不确定应用程序是否可以在 Ajax 中开发）

# sql - 如何使用 to_date 函数转换复杂的 sysdate + 其他内容？

> ID：13288169
> 
> 赞同：2
> 
> 时间：2012-11-08T11:27:31.187
> 
> 标签：sql, oracle, to-date, to-char

有点卡在这里。假设我运行以下 SQL 查询：

```
select to_char(sysdate, 'DD/MON/YY') || ' 15:32:00' from dual; 
```

结果给了我这个：

```
08/NOV/12 15:32:00 
```

现在我想获取该结果并在 to_date 函数中使用它（关于原因的长篇大论，但我会在一秒钟内详细介绍）：

```
select to_date((to_char(sysdate, 'DD/MON/YY') || ' 15:32:00'), 'DD/MON/YY HH24:MI:SS') from dual; 
```

我期望结果与前一个结果相同，但事实并非如此。相反，它给了我这个：

```
08/NOV/12 
```

问题是这样的：有没有办法可以在 to_date 中使用 to_char(sysdate, 'DD/MON/YY') 和 HH24:MI:SS 的任何组合的串联？

可能有也可能没有任何其他用途的其他详细信息：我需要这样做的原因是因为向我提供了一个查询，该查询具有一个带有 SLA 时间的表。格式只是 HH24:MI 中的一个时间，但它不是 DATETIME 类型（我怀疑它是 VARCHAR，但无法确定，因为它可能是某种我无法剖析的视图或函数。部分原因是我由于我的数据库用户，不知道如何和部分地对我没有必要的访问权限。

编辑：再次阅读以上内容时，我意识到我遗漏了一些额外的细节（尽管我认为这与我的问题完全无关）：我想取今天的日期（DD/MON/YY），将其与 SLA 时间结合起来的 HH:MI，将其与 :SS 的 ':00' 结合，将整个事物转换为日期，然后在返回的每一行的结果可憎和完成时间之间进行比较。如果完成时间比我的组合和转换豪华更大/更新/晚，则返回特定的内容，而不是返回类似“一切正常”的内容。不确定这是否有意义，但总而言之，我想得到一些可以用来与另一种 DATETIME 类型进行比较的东西，所以我认为我还需要以某种方式将 SLA 时间转换为 DATETIME 类型。

对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T11:42:51.577

您看到的输出将转换为 char 格式。这是由 NLS_DATE_FORMAT 设置决定的。在内部，日期仍将具有关联的时间格式。所以这样做看看它：

```
SQL> select sysdate from dual;

SYSDATE
---------
08-NOV-12

SQL> alter session set nls_date_format='dd/MON/yy hh24:mi:ss';

Session altered.

SQL> select sysdate from dual;

SYSDATE
------------------
08/NOV/12 11:41:46 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T11:43:52.887

您的默认日期格式是 'DD/MM/YY' 如果要显示时间组件，则必须使用正确的日期格式：

```
select to_char(to_date((to_char(sysdate, 'DD/MON/YY') || ' 15:32:00'), 'DD/MON/YY HH24:MI:SS'),'DD/MM/YY HH24:MI:SS') from dual 
```

# css - 将标签添加到 wordpress 主题

> ID：13288173
> 
> 赞同：0
> 
> 时间：2012-11-08T11:27:51.863
> 
> 标签：css, wordpress

我正在尝试自定义我的 disqus 链接颜色，如您所知，从 wordpress 主题继承链接颜色。问题是我当前的主题我认为还没有指定任何主颜色，所以 disqus 继承了所有链接的默认蓝色链接颜色。这是我的样式表：http: [//goo.gl/p8cA9](http://goo.gl/p8cA9)

谁能告诉我如何在样式表中指定链接颜色？我刚刚开始学习 css，当我添加`a {color:purple;text-decoration:none}`类时，它会改变网站的其余样式。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T11:33:59.637

您需要具体，查看您的 WP 网页的源代码（如果您使用 chrome，请按 f12，然后转到元素选项卡，按放大镜并选择您要在网页上设置样式的 A 标签）。

和：

```
a {
color:purple;
text-decoration: none;
} 
```

您是说所有 a 标签都应该是这种颜色。您需要查看 a 的位置。例子：

```
<div class="content">
  <p class="scribble">
    Lorem ipsum <a href="http://google.com/">google</a>
  </p>
</div> 
```

在上面的示例中，我将设置此标签的样式。

```
p.scribble a {
color:purple;
text-decoration: none;
} 
```

CSS 选择器中的“.”指的是一个类。所以我说我想在 p 中添加一个带有“scribble”类的标签。祝你的冒险好运。

PS。如果您使用的是 chrome 并且您成功选择了您的元素，您还可以看到它现在正在响应的 CSS 选择器（右窗口）。

# javascript - javascript 重定向在歌剧中发送 X-Requested-With 标头

> ID：13288174
> 
> 赞同：2
> 
> 时间：2012-11-08T11:27:51.203
> 
> 标签：javascript, http-headers, opera, window.location

为什么Opera中所有更改url的方法都发送标头[X-Requested-With] => XMLHttpRequest？

我在检查

```
window.location = url
window.open(url,'_self')
window.location.replace(url) 
```

如何在不发送此标头的情况下更改歌剧中的网址？

谢谢。

# php - 查询更新或插入

> ID：13288180
> 
> 赞同：0
> 
> 时间：2012-11-08T11:28:10.907
> 
> 标签：php, mysql, sql

您好，我想更新或插入应用程序，但它显示错误。知道如果我删除更新或查询有效

```
UPDATE OR INSERT  INTO stat_alert(`DAT`,`provider`,`CI`,`cell`,`BSC`,`cmts`,`nbr`,`TYPE`)
     SELECT CC.DAT,CC.provider,CC.CI,CC.cell,CC.BSC,CC.cmts, CONCAT(CC.C,'C, ',MM.M ,'M') AS nbr,'C' AS TYPE  FROM 
     (SELECT DAT,provider,CI,cell,BSC,cmts,COUNT(*) AS C FROM alertes_bss2 WHERE Criticity = 'C' GROUP BY cell,Criticity ) AS CC,
     (SELECT DAT,provider,CI,cell,BSC,cmts,COUNT(*) AS M FROM alertes_bss2 WHERE Criticity = 'M' GROUP BY cell,Criticity) AS MM WHERE MM.cell = CC.cell
      UNION SELECT DAT,provider,CI,cell,BSC,cmts, CONCAT(COUNT(*) ,'C') AS nbr,'C' AS TYPE FROM alertes_bss2 WHERE Criticity = 'C' AND cell NOT IN
       (SELECT cell FROM alertes_bss2 WHERE Criticity = 'M') GROUP BY DAT,provider,CI,cell,BSC,Criticity 
      UNION SELECT DAT,provider,CI,cell,BSC,cmts, CONCAT(COUNT(*) ,'M') AS nbr,'M' AS TYPE FROM alertes_bss2 WHERE Criticity = 'M' AND cell NOT IN 
      (SELECT cell FROM alertes_bss2 WHERE Criticity = 'C') GROUP BY DAT,provider,CI,cell,BSC,Criticity; 
```

我有这个错误：

```
Query: UPDATE OR INSERT INTO stat_alert(`DAT`,`provider`,`CI`,`cell`,`BSC`,`cmts`,`nbr`,`TYPE`) SELECT CC.DAT,CC.provider,CC.CI,CC.cell...

Error Code: 1064
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'OR INSERT  INTO stat_alert(`DAT`,`provider`,`CI`,`cell`,`BSC`,`cmts`,`nbr`,`TYPE' at line 1

Execution Time : 0 sec
Transfer Time  : 0 sec
Total Time     : 0.003 sec
--------------------------------------------------- 
```

谁能帮我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T11:36:27.643

也许你正在寻找`REPLACE`？[关联](http://dev.mysql.com/doc/refman/5.0/en/replace.html)

> REPLACE 的工作方式与 INSERT 完全相同，只是如果表中的旧行与 PRIMARY KEY 或 UNIQUE 索引的新行具有相同的值，则在插入新行之前删除旧行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T11:33:38.043

您不能同时使用 UPDATE 和 INSERT ......

您需要在代码中处理它是否需要更新数据或插入数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T11:40:13.077

您不能`UPDATE OR INSERT`在 Mysql 中使用。您必须检查记录是否存在于数据库中。如果存在则`UPDATE`使用`INSERT`.

# c# - 来自 DLL 的 DataContext 没有 Dispose() 方法

> ID：13288181
> 
> 赞同：0
> 
> 时间：2012-11-08T11:28:12.690
> 
> 标签：c#, winforms, linq

我创建了一个 DLL，其中包含我的 LINQ DMBL 文件，我已在另一个项目中将其设置为参考，并允许我毫无问题地与数据库进行交互。

但是，DataContext 缺少 Dispose() 方法，当我尝试将 using 包裹在它周围时，它告诉我它不能隐式转换为 System.IDisposable。

有什么我在这里遗漏的，因为 Dispose() 方法在 DLL 项目中可用。当通过 DLL 访问 DataContext 时，它的处理方式是否有所不同？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T11:52:56.867

这很奇怪。正如您在参考属性中看到的那样，在 VS 中引用 dll 和项​​目之间应该没有（大）差异。如果将其作为项目引用，则路径指向 bin/debug（或 bin/release - 取决于构建配置）中的 dll。

确保您已引用 System.Data.Linq 程序集。

如果我尝试在我的 VS 2008 - .NET 3.5 中创建 DBML，我会看到由 dbml 生成器生成的 datacontext 类继承自实现 IDisposable 的 System.Data.Linq.DataContext。

# android - 自定义字体不适用于 Android

> ID：13288182
> 
> 赞同：1
> 
> 时间：2012-11-08T11:28:13.677
> 
> 标签：android, fonts, drawing, android-canvas, symbols

我正在做以下事情。我得到的只是基本字体，而不是我的自定义符号字体。

有任何想法吗？

```
 Paint pnt = new Paint();
    // SymbolNo is 38\. Returns string "&" which is correct in normal font.
    String symbolText = Character.toString((char)SymbolNo); 

    // Should adopt a symbol font and draw symbol to screen instead. But I just see "&"
    Typeface tf = Typeface.createFromAsset(m_context.getAssets(), "fonts/myFont.TTF" ); 
    pnt.setTypeface(tf);

    m_canvas.drawText(symbolText,x, y, pnt); 
```

我的字体在`assets/fonts/myFont.TTF`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T12:28:39.193

并非所有字体都适用于 Android。它只是默默地失败。

一种做法是找到一个可以处理自定义字体的应用程序——比如[我的这个示例应用程序](https://github.com/commonsguy/cw-omnibus/tree/master/Fonts/FontSampler)——作为实验的基础。您可以运行该应用程序以确认其字体出现，然后用您的字体替换其中一种。如果这可行，那么您在字体中加载的方式有些混乱（尽管我不知道是什么或如何）。如果字体在我的示例应用程序中无法使用，而该应用程序附带的字体确实可以使用，则问题出在字体上。

不幸的是，我不知道是什么让字体工作或不工作。您可以尝试在字体编辑器中打开字体，做一些小的更改（例如，删除一些您知道不需要的字形），将其保存回来，然后查看修改后的字体是否有效。如果是这样，则意味着最初保存的字体中有一些 Android 不喜欢的内容，但您的字体编辑器可以生成 Android 友好的字体。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-11-08T13:20:16.153

您好，我对此有一个解决方案，您可以尝试以这种方式使用字体...我已经在我的项目中实现了这个...

脚步：

1.  制作一个包 (com.fontUtils.fonts)
2.  使字体文件类似于 TextView`EditText`或 Button Text

例如 ：

```
 public class ButtonHelveticaBold extends Button {

        Context ButtonFontContext;

        public ButtonHelveticaBold(Context context, AttributeSet attrs, int defStyle) {
            super(context, attrs, defStyle);
            ButtonFontContext = context;
        }

        public ButtonHelveticaBold(Context context, AttributeSet attrs) {
            super(context, attrs);
            ButtonFontContext = context;
        }

        public ButtonHelveticaBold(Context context) {
            super(context);
            ButtonFontContext = context;
        }

        @Override
        public void setTypeface(Typeface tf, int style) {
            Typeface typeFaceHelvetica;
            if (style == Typeface.BOLD) {
                typeFaceHelvetica = Typeface.createFromAsset(getContext().getAssets(), "fonts/helvetica_bold_neue.ttf");
            } else {
                typeFaceHelvetica = Typeface.createFromAsset(getContext().getAssets(), "fonts/helvetica_neue_regular.ttf");
            }
            super.setTypeface(typeFaceHelvetica);
        }

    } 
```

3：在 XML 中使用它像这样：

```
 <com.fontUtils.fonts.ButtonHelveticaBold 
      android:id="@+id/btn"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      /> 
```

# dictionary - 我想将一个字典的值链接到另一个字典中的键

> ID：13288183
> 
> 赞同：2
> 
> 时间：2012-11-08T11:28:23.437
> 
> 标签：dictionary, sorteddictionary

我有两个 .csv 文件，其中包含我想链接的信息。我将每个 .csv 文件读入字典并将其命名如下：

```
 Key      Value              
Dictionary1 = {Complex, Protein}    
Dictionary2 = {Protein, Absorbance} 
```

我希望能够将蛋白质从 连接`Dictionary1`到 ，`Dictionary2`因此最终结果是，如果我在其中调用一个复合物，`Dictionary1`它将给我与所有蛋白质相关的吸光度`Dictionary2`。

*也许我采取了错误的方法将两个数据集都放入字典......*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T15:24:40.770

您可以将第一个中查找的值用作第二个的键。当然，假设数据是不可变的。

Python：

```
dict1 = {'Complex': 'Protein'}
dict2 = {'Protein': 'Absorbance'}

dict2[dict1['Complex']] # 'Absorbance' 
```

# python - 在 Python 脚本中使用 print 语句的性能效果

> ID：13288185
> 
> 赞同：47
> 
> 时间：2012-11-08T11:28:26.350
> 
> 标签：python, console, text-files

我有一个 Python 脚本，它处理一个巨大的文本文件（大约 4 百万行）并将数据写入两个单独的文件。

我添加了一个打印语句，它为每一行输出一个字符串以进行调试。我想知道从性能的角度来看它有多糟糕？

如果它变得非常糟糕，我可以删除调试线。

**编辑**

事实证明，对于一个有 400 万行的文件中的每一行都有一个打印语句会增加太多时间。

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-11-08T12:15:09.537

尝试用一个非常简单的脚本来做这件事只是为了好玩，区别是非常惊人的：

在 large.py 中：

```
target =  open('target.txt', 'w')

for item in xrange(4000000):
    target.write(str(item)+'\n')
    print item 
```

计时：

```
[gp@imdev1 /tmp]$ time python large.py
real    1m51.690s
user    0m10.531s
sys     0m6.129s

gp@imdev1 /tmp]$ ls -lah target.txt 
-rw-rw-r--. 1 gp gp 30M Nov  8 16:06 target.txt 
```

现在运行相同的“打印”注释掉：

```
gp@imdev1 /tmp]$ time python large.py 
real    0m2.584s
user    0m2.536s
sys     0m0.040s 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-09-25T07:48:36.573

是的，它会影响性能。我写了一个小程序来演示——

```
import time
start_time=time.time()
for i in range(100):
    for j in range(100):
        for k in range(100):
            print(i,j,k)
print(time.time()-start_time)
input() 
```

测得的时间是-160.2812204496765 然后我就顺便把print语句换掉了。结果令人震惊。没有打印的测量时间为 - 0.26517701148986816。

# python - 如何在 setup.py 中正确定义 package_data？

> ID：13288188
> 
> 赞同：10
> 
> 时间：2012-11-08T11:28:30.250
> 
> 标签：python, packaging, setup.py

我有这个项目：

```
.
├── django_mysetup
│   ├── __init__.py
│   ├── template-basket
│   │   └── apple
│   │       ├── app_template
│   │       │   ├── forms.py
│   │       │   ├── __init__.py
│   │       │   ├── models.py
│   │       │   ├── tests.py
│   │       │   └── views.py
│   │       └── project_template
│   │           ├── manage.py
│   │           └── project_name
│   │               ├── __init__.py
│   │               ├── settings.py
│   │               ├── urls.py
│   │               └── wsgi.py
│   └── templates
│       ├── example_direct.html
│       ├── example.html
│       └── stylesheets
│           ├── base.css
│           ├── layout.css
│           └── skeleton.css
├── MANIFEST.in
├── README.rst
└── setup.py 
```

这是**`setup.py`**文件：

```
from distutils.core import setup

setup(
    name='Django_mysetup',
    py_modules=['django_mysetup'],
    entry_points={
    'console_scripts': ['django_mysetup = django_mysetup:main', ],},
    description='A Personalised Django startproject and startapp setup script.',
    long_description=open('README.rst').read(),
    packages=['django_mysetup'],
    package_data={'django_mysetup': ['templates/*', 'templates/stylesheets/*',
      'template-basket/apple/app_template/*', 
      'template-basket/apple/project_template/*', 
      'template-basket/apple/project_template/project_name/*',
      'template-basket/apple/project_template/manage.py'
      ]}
) 
```

这是**`MANIFEST.in`**文件（`MANIFEST`生成模板）

```
include README.rst
recursive-include template-basket *
recursive-include templates * 
```

当我这样做`python setup.py sdist`并将文件发送到我`pip install`的`*.tar.gz`virtualenv 时，我得到了这个：

```
error: can't copy 'Django-mysetup/templates/stylesheets': doesn't exist or not a regular file 
```

所以问题出在`package_data`.

**如何调整我的`setup.py`脚本，以便在我的虚拟环境中安装`template-basket`和`templates`目录及其所有内容**？（最好以一种我不需要在这些目录中写入每个文件的方式，只需要顶部的目录名称。）

# php - 在 OOP PHP 中调用方法

> ID：13288194
> 
> 赞同：0
> 
> 时间：2012-11-08T11:29:18.740
> 
> 标签：php, oop

我是 OOP 的新手，我想在第一个学习周期把事情做好。

我有一个 HTML 表单：

```
<?php
include("classes/Gaestebog.php");
$gaestebog = new Gaestebog();
?>
<html>
<head>
</head>
<body>
<form action="" method="post">
    <table>
        <tr>
            <td>Navn:</td>
            <td><input type="text" name="navn" value="Patrick" /></td>
        </tr>
        <tr>
            <td>Besked:</td>
            <td><input type="text" name="besked" value="Hej med dig !!" /></td>
        </tr>
        <tr>
            <td><input type="submit" name="opret" value="Opret" /></td>
        </tr>
    </table>
</form>

</body>
</html> 
```

和留言簿类：

```
<?php
class Gaestebog {

    public function Gaestebog() {

    }

    public function getPosts() {

    }

    public function addPost() {

    }
}
?> 
```

我希望 :Guestbook 在提交表单时调用 addPost 方法。我将如何处理这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T11:36:12.877

```
get an object of your class and then call the function..

for example.. if your submit button name is 'submit' and your class name is Guestbook, then in your action page-
$guest = new Guestbook();

if($_REQUEST['submit'])      // to check that submit button is clicked
{
 $guest->addPost($data); //where data array is what to be saved from post
}

you have to include that class file in your action page like..
require '...'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T11:39:54.593

```
<?php
if(isset($_POST)) {
    include("classes/Gaestebog.php");
    $gaestebog = new Gaestebog();

    $data = array(
        'title' => $_POST['title'], 
        'author' => $_POST['author'],
        'content' => $_POST['content']
        // etc. 
    ); // Do not forget to validate your data

    $gaestebog->addPost($data);
}
?>
<!-- The HTML part... --> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T11:41:09.237

您将完全按照您的预期执行此操作：

```
if ($_POST) {
    include 'classes/Gaestebog.php';
    $gaestebog = new Gaestebog;
    $gaestebog->addPost($_POST);  // <-- example guess...
} 
```

实例化类和调用它们的方法的基础知识并不难。几乎没有错误的方法可以做到这一点。诀窍是充分利用面向对象编程的潜力，并以一种好的方式构造对象，这是您需要随着时间的推移而习惯的。请参阅[如何使用静力学不扼杀您的可测试](http://kunststube.net/static/)性，以了解即将发生的事情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T11:49:03.583

为了将表单的提交链接到`addPost()`您应该创建一个操作 url 并编写一个 PHP 脚本。第一种方法是编写如下内容：

```
require_once("classes/Gaestebog.php");
$gaestebog = new Gaestebog();
$gaestebog->addPost(); 
```

这样做的主要问题是您将从帖子中提取表单值的责任留给了 Gaestebog。更好的方法是参数化`addPost()`an 让操作处理：

```
require_once("classes/Gaestebog.php");
$navn = $_GET["navn"];
$besked = $_GET["besked"];
$gaestebog = new Gaestebog();
$gaestebog->addPost($navn, $besked); 
```

通过这种方式，您可以将视图（即 html 页面）与模型（即 Gaestebog 类）分离。使用通用动作处理程序和 .htaccess mod_rewrite 的一些帮助（大多数 PHP MVC 框架使用这种方法）有更多“高级”方法来处理这个问题，但如果你正在学习，我建议你以这种方式开始。

最后，请记住，这只是第一步；接下来要考虑的事情之一是数据验证和错误报告。您通常在服务器端进行验证，如果您想改善用户体验，您也可以在客户端进行验证。服务器端部分通常由使用模型的动作来协调。客户端在 HTML 视图中完成。

高温高压

# printing - birt 打印标签纸 a4

> ID：13288195
> 
> 赞同：1
> 
> 时间：2012-11-08T11:29:21.737
> 
> 标签：printing, report, label, birt, labels

    我是 Birt 的新手，我想根据带有 20 个标签（5 行 x 4 列）的 A4 打印在“打印标签纸”上打印标签的报告。我连续使用 4 个表格开发了报告，每个表格都有一个像这样的过滤器：

1.  row[0]%4 eq 0（表 1 的过滤器）
2.  row[0]%4 eq 1（表 2 的过滤器）
3.  row[0]%4 eq 2（表 3 的过滤器）
4.  row[0]%4 eq 3（表 4 的过滤器）

一切似乎都很好，但我需要插入一个输入参数，该参数将包含第一页的起始行。
例如：用户插入 5 作为起始行，报告将自动从第一页的第 5 行开始。如果标签多于 4 个，则报表将从第一行开始生成第二页，依此类推。
我试图在第一页上设置边距，但我在下一页也发现了相同的边距。

谢谢
           GG

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T13:49:39.303

您可以在表格上方添加一个空标签，并在此标签的“onCreate”事件中添加一个脚本，以动态计算边距：

```
var rowHeight=15;
this.getStyle().marginTop=(params["rowSkipNumber"].value*rowHeight)+"px"; 
```

此外，您可能希望在参数为 0 时隐藏此标签，在其“可见性”属性中使用如下表达式：

```
params["rowSkipNumber"].value==0 
```

# javascript - 需要在页面后面打开弹出窗口

> ID：13288196
> 
> 赞同：1
> 
> 时间：2012-11-08T11:29:25.987
> 
> 标签：javascript, popup

**这是我的代码**

```
<script language="JavaScript1.1">
var popunder
function get_cookie(Name) {
var search = Name + "="
var returnvalue = "";
if (document.cookie.length > 0) {
offset = document.cookie.indexOf(search)
if (offset != -1) { // if cookie exists
offset += search.length
// set index of beginning of value
end = document.cookie.indexOf(";", offset);
// set index of end of cookie value
if (end == -1)
end = document.cookie.length;
returnvalue=unescape(document.cookie.substring(offset, end))
}
}
return returnvalue;
}
popfrequency="0 minutes"
function resetcookie(){
var expireDate = new Date()
expireDate.setMinutes(expireDate.getMinutes()-0)
document.cookie = "popunder=;path=/;expires=" + expireDate.toGMTString()
}
function loadornot(){
if (get_cookie('popunder')==''){
loadpopunder()
var expireDate = new Date()
expireDate.setMinutes(expireDate.getMinutes()+parseInt(popfrequency))
document.cookie = "popunder="+parseInt(popfrequency)+";path=/;expires=" + expireDate.toGMTString()
}
}
function loadpopunder(){
document.write('<body onclick="rwmrgfdq_Popup()" >');
}
if (get_cookie('popunder')!=parseInt(popfrequency))
resetcookie()
loadornot()

</script>   <script type="text/javascript"> <!--
var opened;
function rwmrgfdq_Popup()
{
if(opened != 1)
{
opened = 1;
window.open("http://www.masrawy.com", "rwmrgfdqpop", "scrollbars = 1, resizable = 1,status = 1 ");

}
}
//--> </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T11:33:45.760

在in`window.focus()`之后调用`window.open()``rwmrgfdq_Popup()`

# android - 为什么相机拍摄时图像会旋转？

> ID：13288199
> 
> 赞同：2
> 
> 时间：2012-11-08T11:29:28.253
> 
> 标签：android

在我的应用程序中，我通过相机捕获图像并将其路径保存在字符串变量（用于在服务器上发送图像的 SD 卡路径）中，那时我还在 ImageView 上设置了该图像。但是图像在横向中自动旋转，而不是按直角设置。我一直在 StackOverflow 和谷歌上搜索并找到 EXIF 轮换使用这个：

[http://mobisocial.stanford.edu/news/2011/08/rotating-images-in-android/](http://mobisocial.stanford.edu/news/2011/08/rotating-images-in-android/)

但它不工作。我的代码是：（裁剪后的操作代码是onActivityResult）

```
case AppConstants.CROP_FROM_CAMERA:
        if (data != null) {
            Bundle extras = data.getExtras();

            if (extras != null) {
                Bitmap photo = extras.getParcelable("data");
                File file = new File("/sdcard/bidnear/");
                if (!file.isDirectory())
                    file.mkdir();
                imageUrl = "/sdcard/bidnear/thumbimgcrop.png";
                file = new File("/sdcard/bidnear/thumbimgcrop.png");
                try {
                    photo = rotateImage(photo,mImageCaptureUri);
                    photo.compress(Bitmap.CompressFormat.PNG, 100,
                            new FileOutputStream(file));
                } catch (FileNotFoundException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                objimg.setBackgroundResource(0);
                objimg.setImageBitmap(photo);

            }
        } 
```

旋转方法是：

```
private Bitmap rotateImage(Bitmap objbitmap,Uri uri)
{
    Matrix matrix = new Matrix();
    float rotation =rotationForImage(MyProfile.this, uri);
    if (rotation != 0f) {
         matrix.preRotate(rotation);
    }

    Bitmap resizedBitmap = Bitmap.createBitmap(
            objbitmap, 0, 0,80,80, matrix, true);
    return resizedBitmap;
} 
```

它不工作；我的打开相机和捕获代码是：

```
 private void setUserImage() {

    final String[] objimagechooseoptions = new String[] {
            AppConstants.SELECT_CAMERA, AppConstants.SELECT_GALLERY };
    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
            android.R.layout.select_dialog_item, objimagechooseoptions);
    AlertDialog.Builder objbuilder = new AlertDialog.Builder(this);
    objbuilder.setTitle("Select Image");

    objbuilder.setAdapter(adapter, new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int item) { // pick from
                                                                // camera
            if (item == 0) {
                Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
                mImageCaptureUri = Uri.fromFile(new File(Environment
                        .getExternalStorageDirectory(), "tmp_avatar_"
                        + String.valueOf(System.currentTimeMillis())
                        + ".png"));
                intent.putExtra(android.provider.MediaStore.EXTRA_OUTPUT,
                        mImageCaptureUri);
                try {
                    intent.putExtra("return-data", true);
                    startActivityForResult(intent,
                            AppConstants.PICK_FROM_CAMERA);
                } catch (ActivityNotFoundException e) {
                    e.printStackTrace();
                }
            } else { // pick from file
                Intent intent = new Intent();
                intent.setType("image/*");
                intent.setAction(Intent.ACTION_GET_CONTENT);
                startActivityForResult(Intent.createChooser(intent,
                        "Complete action using"),
                        AppConstants.PICK_FROM_FILE);
            }
        }
    });
    final AlertDialog dialog = objbuilder.create();
    dialog.show();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T11:36:20.420

单击[此](https://stackoverflow.com/questions/13062769/android-front-and-back-camera-captured-picture-orientation-issue-rotated-in-a-w/13227872#13227872) 或尝试使用此

```
case AppConstants.CROP_FROM_CAMERA:
    if (data != null) {
        Bundle extras = data.getExtras();

        if (extras != null) {
            Bitmap photo = extras.getParcelable("data");
            File file = new File("/sdcard/bidnear/");
            if (!file.isDirectory())
                file.mkdir();
            imageUrl = "/sdcard/bidnear/thumbimgcrop.png";
            file = new File("/sdcard/bidnear/thumbimgcrop.png");

    try {

    ExifInterface exif = new ExifInterface(filePath);
    orientation = exif.getAttributeInt(ExifInterface.TAG_ORIENTATION, 1);
    //Toast.makeText(getApplicationContext(), ""+orientation, 1).show();
    Log.v("log", "ort is "+orientation);

    } catch (IOException e)
    {
    e.printStackTrace();
    }

    if (orientation==6)
        {
                    Matrix matrix = new Matrix();
                    matrix.postRotate(90);
                    photo = Bitmap.createBitmap(photo, 0, 0, photo.getWidth(), photo.getHeight(), matrix, true);
                }
                else if (orientation==8)
                {
                    Matrix matrix = new Matrix();
                    matrix.postRotate(270);
                    photo = Bitmap.createBitmap(photo, 0, 0, photo.getWidth(), photo.getHeight(), matrix, true);
                }

                else if (orientation==3)
                {
                    Matrix matrix = new Matrix();
                    matrix.postRotate(180);
                    photo = Bitmap.createBitmap(photo, 0, 0, photo.getWidth(), photo.getHeight(), matrix, true);
                }
                Log.v("log", "before width is "+photo.getWidth() + " and height is "+photo.getHeight());

            objimg.setBackgroundResource(0);
            objimg.setImageBitmap(photo);

        }
    } 
```

# python - 具有 Null 值的平均数组

> ID：13288202
> 
> 赞同：3
> 
> 时间：2012-11-08T11:29:36.430
> 
> 标签：python, arrays, numpy, null, average

> **可能重复：**
> [在不考虑零值的情况下使用 numpy 对多个数组进行平均](https://stackoverflow.com/questions/13281904/avarage-of-a-number-of-arrays-with-numpy-without-considering-zero-values)

我正在研究 numpy，我有许多大小和形状相同的数组。它们是 500*500。它有一些 Null 值。我想要一个数组，它是原始数组的逐个元素平均值的结果。例如：

```
A=[ 1 Null 8 Null; Null 4 6 1]
B=[ 8 5 8 Null; 5 9 5 3] 
```

结果数组应如下所示：

```
C=[ 4.5 5 8 Null; 5 6.5 5.5 2] 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-08T11:43:23.013

更新：从 NumPy 1.8 开始，您可以使用[np.nanmean](http://docs.scipy.org/doc/numpy-dev/reference/generated/numpy.nanmean.html)而不是`scipy.stats.nanmean`.

* * *

如果你有`scipy`，你可以使用[scipy.stats.nanmean](http://www.scipy.org/doc/api_docs/SciPy.stats.stats.html#nanmean)：

```
In [2]: import numpy as np

In [45]: import scipy.stats as stats

In [3]: nan = np.nan

In [43]: A = np.array([1, nan, 8, nan, nan, 4, 6, 1])   
In [44]: B = np.array([8, 5, 8, nan, 5, 9, 5, 3])  
In [46]: C = np.array([A, B])    
In [47]: C
Out[47]: 
array([[  1.,  nan,   8.,  nan,  nan,   4.,   6.,   1.],
       [  8.,   5.,   8.,  nan,   5.,   9.,   5.,   3.]])

In [48]: stats.nanmean(C)
Warning: invalid value encountered in divide
Out[48]: array([ 4.5,  5\. ,  8\. ,  nan,  5\. ,  6.5,  5.5,  2\. ]) 
```

[您可以在此处](https://stackoverflow.com/q/5480694/190597)找到其他仅限 numpy（屏蔽数组）的解决方案。即，

```
In [60]: C = np.array([A, B])    
In [61]: C = np.ma.masked_array(C, np.isnan(C))    
In [62]: C
Out[62]: 
masked_array(data =
 [[1.0 -- 8.0 -- -- 4.0 6.0 1.0]
 [8.0 5.0 8.0 -- 5.0 9.0 5.0 3.0]],
             mask =
 [[False  True False  True  True False False False]
 [False False False  True False False False False]],
       fill_value = 1e+20)

In [63]: np.mean(C, axis = 0)
Out[63]: 
masked_array(data = [4.5 5.0 8.0 -- 5.0 6.5 5.5 2.0],
             mask = [False False False  True False False False False],
       fill_value = 1e+20)

In [66]: np.ma.filled(np.mean(C, axis = 0), nan)
Out[67]: array([ 4.5,  5\. ,  8\. ,  nan,  5\. ,  6.5,  5.5,  2\. ]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T11:49:27.577

1.  从列表开始（您也可以使用`None`'s 而不是`0`'s）

    ```
    A = [1, 0, 8, 0, 0, 4, 6, 1]
    B = [8, 5, 8, 0, 5, 9, 5, 3] 
    ```

2.  然后你应该有一个类似的列表：

    ```
    lst = [A, B] 
    ```

3.  定义一个函数来计算数字列表的平均值：

    ```
    def mean(nums):
        return float(sum(nums)) / len(nums) if nums else 0 
    ```

4.  最后，您可以通过这种方式计算平均值：

    ```
    C = [mean(filter(None, col)) for col in zip(*list)] 
    ```

# java - 在 Java 中：获取地图键的排序数组

> ID：13288203
> 
> 赞同：1
> 
> 时间：2012-11-08T11:29:37.990
> 
> 标签：java, hashmap

我有一个哈希图，我希望在这个哈希图中得到一个键数组，但我希望对数组进行排序。

例如，如果地图如下所示：

```
<"2",obj1>
<"4",obj2>
<"6",obj3>
<"10",obj4>
<"5",obj5>
<"1",obj6>
<"15",obj7>
<"3",obj8> 
```

我希望数组是：[“1”，“2”，“3”，“4”，“5”，“6”，“10”，“15”]

越快越好。有没有内置的方法来做到这一点？

**更新 1**

当我使用 TreeMap 时，键按以下顺序排序：

“1”、“10”、“2”等。

但我希望它们像：“1”、“2”、“3”..“10”、“15”。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T11:31:58.330

> 我有一些像“10A”、“2AB”这样的键

在这种情况下，您需要一个自定义比较器，例如

```
public static void main(String... args) {
    NavigableMap<String, Object> map = new TreeMap<String, Object>(new Comparator<String>() {
        final Pattern pattern = Pattern.compile("(\\d+)(.*)");

        @Override
        public int compare(String o1, String o2) {
            Matcher matcher1 = pattern.matcher(o1);
            Matcher matcher2 = pattern.matcher(o2);
            matcher1.find();
            matcher2.find();
            int cmp = Long.compare(Long.parseLong(matcher1.group(1)), Long.parseLong(matcher2.group(1)));
            if (cmp != 0)
                return cmp;
            return matcher1.group(2).compareTo(matcher2.group(2));
        }
    });

    map.put("1", "one");
    map.put("1A", "oneA");
    map.put("10", "ten");
    map.put("10AB", "tenAB");
    map.put("15", "fifteen");
    map.put("2", "two");
    map.put("2AB", "twoAB");
    map.put("2", "three");

    System.out.println(map.keySet());
} 
```

印刷

```
[1, 1A, 2, 2AB, 10, 10AB, 15] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T11:38:26.467

如果由于某种原因不能将您的代码转换为自然排序的 Map ，则有内置工具可以返回键集并手动对其进行排序 -

```
 Object[] keys = yourMap.keySet().toArray();
    Arrays.sort(keys);

    System.out.println(Arrays.toString(keys)); 
```

# javascript - 单击时显示 div 并滚动到它

> ID：13288205
> 
> 赞同：1
> 
> 时间：2012-11-08T11:29:41.687
> 
> 标签：javascript, jquery

我有一个javascript函数可以在点击时显示/隐藏一个div，我希望页面在显示函数上向下滚动到那个div。我已经包含了 ScrollTop 功能，但它似乎不起作用。这是我的代码：

```
$('#output').hide();

$('#readMore').click(function(){
    $('#output').show(150);
    $('#readMore').hide(150);
      return false;
    $('html, body').scrollTop($('#output').offset().top);
});

$('#readLess').click(function(){
    $('#output').hide(150);
    $('#readMore').show(150);
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T11:31:25.130

### 请放在`return false;`最后。

```
$('#readMore').click(function(){
    $('#output').show(150);
    $('#readMore').hide(150);
    $('html, body').scrollTop($('#output').offset().top);
    return false; // Please put the return false; at the end.
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T11:45:24.583

```
$('#output').hide();

$('#readMore').click(function(){
$('#output').show(150);
$('#readMore').hide(150);
$('html, body').scrollTop($('#output').offset().top);
 return false;//return  need to be placed here
});

$('#readLess').click(function(){
$('#output').hide(150);
$('#readMore').show(150);
}); 
```

# windows - 以编程方式创建 Windows 会话

> ID：13288207
> 
> 赞同：8
> 
> 时间：2012-11-08T11:30:01.860
> 
> 标签：windows, winapi, rdp

我有一个在 Windows 服务 (0) 会话中运行的服务。从客户端连接后，我需要为给定的用户凭据创建一个新的 Windows 会话，登录该用户并在这个新会话中启动一个应用程序。

有没有办法以编程方式为给定的用户凭据创建用户会话？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T00:48:37.477

AFAIK，您不能以编程方式创建会话。为此，客户端必须使用终端服务或远程桌面连接到机器。但是，如果您只需要以该用户身份运行进程而不使其在屏幕上可见，则可以通过编程方式登录到用户帐户并模拟它。查看`LogonUser()`和`ImpersonateLoggedOnUser()`、`CreateProcessAsUser()`或`CreateProcessWithLogonW()`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-10-14T09:19:24.603

@WolfgangZiegler，我知道这是一个老问题，但我实际上已经为您找到了解决方案！我使用远程桌面 ActiveX 控件（COM 参考）编写了一个简单的实用程序。如果您将此代码粘贴到类库中，您可以通过简单地传递服务器、用户名、域和密码来调用它，并且一切都为您完成，无需任何其他交互。这回答了您提出的问题，但您还提到您需要在刚刚创建的会话中启动应用程序。我知道你没有直接问这个问题，但我想我会为你指出正确的方向，以防万一，因为你的情况听起来和我的很相似。实际上有几种启动应用程序的方法，因此您需要找到适合您的方法。你' 将需要使用 Win32 API 来创建最有可能使用 CreateProcessAsUser、CreateProcessWithLogon 或 CreateProcessWithToken 的进程。所有这三个方法都在 Advapi32.dll 中。

我以某种方式编写了此 RDP 实用程序，以便您每次都可以调用它，但启动 RDP 会话需要几秒钟，所以为了性能，我建议您编写另一种方法来枚举会话并查看您的用户是否已登录并且仅在您确定您的用户未登录时才调用此实用程序（这就是我在实际项目中所做的）。

这是一个返回我的问题的链接，它比这个问题有更多的要求/细节。

[从控制台或 Windows 服务以编程方式创建 Windows 会话](https://stackoverflow.com/questions/52801093/create-windows-session-programmatically-from-console-or-windows-service/52801094#52801094)

这是我的 RDP 实用程序。如果将此代码放在类库中，则可以从控制台应用程序、winForms 应用程序或 Windows 服务调用它。

```
using System;
using System.Diagnostics;
using System.Threading;
using System.Threading.Tasks;
using System.Windows.Forms;
using AxMSTSCLib;

namespace Utility.RemoteDesktop
{
    public class Client
    {
        private int LogonErrorCode { get; set; }

        public void CreateRdpConnection(string server, string user, string domain, string password)
        {
            void ProcessTaskThread()
            {
                var form = new Form();
                form.Load += (sender, args) =>
                {
                    var rdpConnection = new AxMSTSCLib.AxMsRdpClient9NotSafeForScripting();
                    form.Controls.Add(rdpConnection);
                    rdpConnection.Server = server;
                    rdpConnection.Domain = domain;
                    rdpConnection.UserName = user;
                    rdpConnection.AdvancedSettings9.ClearTextPassword = password;
                    rdpConnection.AdvancedSettings9.EnableCredSspSupport = true;
                    if (true)
                    {
                        rdpConnection.OnDisconnected += RdpConnectionOnOnDisconnected;
                        rdpConnection.OnLoginComplete += RdpConnectionOnOnLoginComplete;
                        rdpConnection.OnLogonError += RdpConnectionOnOnLogonError;
                    }
                    rdpConnection.Connect();
                    rdpConnection.Enabled = false;
                    rdpConnection.Dock = DockStyle.Fill;
                    Application.Run(form);
                };
                form.Show();
            }

            var rdpClientThread = new Thread(ProcessTaskThread) { IsBackground = true };
            rdpClientThread.SetApartmentState(ApartmentState.STA);
            rdpClientThread.Start();
            while (rdpClientThread.IsAlive)
            {
                Task.Delay(500).GetAwaiter().GetResult();
            }
        }

        private void RdpConnectionOnOnLogonError(object sender, IMsTscAxEvents_OnLogonErrorEvent e)
        {
            LogonErrorCode = e.lError;
        }
        private void RdpConnectionOnOnLoginComplete(object sender, EventArgs e)
        {
            if (LogonErrorCode == -2)
            {
                Debug.WriteLine($"    ## New Session Detected ##");
                Task.Delay(10000).GetAwaiter().GetResult();
            }
            var rdpSession = (AxMsRdpClient9NotSafeForScripting)sender;
            rdpSession.Disconnect();
        }
        private void RdpConnectionOnOnDisconnected(object sender, IMsTscAxEvents_OnDisconnectedEvent e)
        {
            Environment.Exit(0);
        }
    }
} 
```

# ruby-on-rails - 如何测试 webhook/远程回调？

> ID：13288208
> 
> 赞同：3
> 
> 时间：2012-11-08T11:30:04.163
> 
> 标签：ruby-on-rails, rspec, capybara

我正在使用 rspec 和 capybara 编写测试用例以与 Cheddargetter（支付解决方案提供商）集成。我在测试我对 CG API 的请求时没有问题，但是我不确定当 CG 的 API 向 Rails 应用程序提供 Web 回调时如何进行最佳测试。

这类似于 PayPal 的 IPN 功能，在客户支付后，网络挂钩回调将发送到您的应用程序。

只是想知道是否有人知道测试/模拟这个的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T11:57:42.027

您可能正在使用控制器来处理`POST`请求，我们称之为`WebhookController`

您可以简单地测试一个带有您需要的参数的帖子正在做您想做的事情。例如，我集成测试（在测试单元中，但 rspec 做同样的事情）。

Rspec 可能具有`fixture_file_upload`用于上传/添加 xml 文件的不同版本，但[根据此堆栈问题](https://stackoverflow.com/questions/7260394/test-a-file-upload-using-rspec-rails)，您似乎也可以使用它。将文件粘贴在 say 中`spec/files`。

无论如何，对于网络和菜鸟，您将`Delayed::Job`在另一个测试中测试您的呼叫是否确实有效。就像是：

```
 class GetWebhookTest < ActionController::IntegrationTest
  fixtures :all
  def recieve_webhook
    post '/webhook/338782', fixture_file_upload('webhook.xml', 'application/xml')
  end
  #Test you do what the outcome of your POST would be.
  #this is refactored but you can shove the post line where receive_webhook is
  test "recieve a webhook via xml" do
    assert_difference('RawData.count') do
      receive_webhook
    end
  end

  test "make sure the status is 200" do
    recieve_webhook
    assert_response :success
  end
  #Test 1 will fail before this, but i was more/too thorough back in the day
  test "Delayed Job increases" do
    assert_difference "Delayed::Job.count", 1 do
      recieve_webhook
    end
  end
end 
```

同样，Rspec 也有类似`response.should be_success`Object.count 的差异方法。根据您的情况进行调整。关键是`fixture_file_upload`

# unit-testing - 如何对 Hadoop Writable 进行单元测试

> ID：13288214
> 
> 赞同：2
> 
> 时间：2012-11-08T11:30:36.053
> 
> 标签：unit-testing, hadoop

我自己实现`WritableComparable`了，但我找不到单元测试`write`和方法的好`readFields`方法。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T12:04:21.227

可能您可以找到更简单的方法来测试您的可写文件，但手动执行序列化/反序列化也可以。例如：

MyUtils.java：

```
...
import org.apache.commons.io.IOUtils;
...
public static byte[] serialize(Writable writable) throws IOException {
        ByteArrayOutputStream out = new ByteArrayOutputStream();
        DataOutputStream dataOut = null;
        try {
            dataOut = new DataOutputStream(out);
            writable.write(dataOut);
            return out.toByteArray();
        } 
        finally {
            IOUtils.closeQuietly(dataOut);
        }
    }

public static <T extends Writable> T asWritable(byte[] bytes, Class<T> clazz)
            throws IOException {
        T result = null;
        DataInputStream dataIn = null;
        try {
            result = clazz.newInstance();
            ByteArrayInputStream in = new ByteArrayInputStream(bytes);
            dataIn = new DataInputStream(in);
            result.readFields(dataIn);
        } catch (InstantiationException e) {
            // should not happen
            assert false;
        } catch (IllegalAccessException e) {
            // should not happen
            assert false;
        } finally {
            IOUtils.closeQuietly(dataIn);
        }
        return result;
    } 
```

然后在您的测试类中：

```
CustomWritable record = ... ; //your initialized Writable
byte[] serializedBytes = MyUtils.serialize(record);

CustomWritable deserialized = 
  MyUtils.asWritable(serializedBytes, CustomWritable.class);

assertEquals("Value mismatch!", record.getFieldA(), deserialized.getFieldA());
... 
```

# c# - 在 GridView 中动态添加超链接

> ID：13288215
> 
> 赞同：1
> 
> 时间：2012-11-08T11:30:47.363
> 
> 标签：c#, asp.net, gridview, hyperlink

我有两种类型的代码：第一种：

```
 <Columns>
                <asp:TemplateField>
                    <ItemTemplate>
                        <asp:HyperLink runat="server" Text="Скачать объект" NavigateUrl='<%#"objects/" + Eval("Идентификатор") %>'></asp:HyperLink>
                    </ItemTemplate>    
                </asp:TemplateField>
               </Columns> 
```

工作正常。但是 TemplateField 每次都显示。

第二

```
 TemplateField templField = new TemplateField();
            HyperLink hypLink = new HyperLink();
            hypLink.NavigateUrl = "<%#\"objects/\" + Eval(\"Идентификатор\") %>";
            hypLink.Text = "Скачать объект";
            templField.InsertItemTemplate = (ITemplate)hypLink;
            tableResults.Columns.Add(templField); 
```

无法使用错误：无法将“System.Web.UI.WebControls.HyperLink”类型的对象转换为“System.Web.UI.ITemplate”类型。为什么第一次添加超链接，第二次没有？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T11:34:18.203

这可能有助于开始：

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    { 
        var hyperlinkField = new TemplateField();
        hyperlinkField.ItemTemplate = new HyperlinkColumn();
        tableResults.Columns.Add(linkField);
    }
}

class HyperlinkColumn : ITemplate
{
    public void InstantiateIn(System.Web.UI.Control container)
    {
        HyperLink hypLink = new HyperLink()
        container.Controls.Add(link);
    }
} 
```

请注意，您不能从内部设置`NavigateUrl`或。在那里你只创建控件。您将根据行的.`Text``InstantiateIn``RowDataBound``DataItem`

**但是**：

> 尽管您可以动态地将字段添加到数据绑定控件，但 **强烈建议**静态声明字段，然后根据需要显示或隐藏。静态声明所有字段会减小父数据绑定控件的视图状态大小。

[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.templatefield.templatefield.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.templatefield.templatefield.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T11:35:02.380

`templField.InsertItemTemplate`期望一个`ITemplate`对象，其中超链接不扩展此接口。

在您的第一个声明性示例中，超链接是`ItemTemplate`扩展此接口的主机`ITemplate`。

# blackberry - 无法使用 BlackBerry 中的附件处理程序检索附件内容

> ID：13288217
> 
> 赞同：0
> 
> 时间：2012-11-08T11:30:49.860
> 
> 标签：blackberry

我正在尝试从 Messages 文件夹中获取附件内容。但它显示的是空字符串，尽管它正确地返回了名称和大小。对于每个文件（txt、html 或其他），它不会返回任何字符串值。为此，我正在编写以下代码：

```
 public boolean supports(String contentType)
        {

            boolean val;

            if (contentType.toLowerCase().indexOf("txt") != -1)
            {
                val = true;
            }

            else
                val = false;

            return val;
        }

 public void run(Message m, SupportedAttachmentPart p)
        {
            MainScreen view = new MainScreen();
            view.setTitle("Attachment Viewer");
            view.add(new RichTextField(new String((byte[])p.getContent())));
            view.add(new RichTextField(new String(p.getFilename())));
//          PasswordScreen pwd = new PasswordScreen();
            Logger.out("eMailMinderApp", "Attachment Content" +new RichTextField(new String((byte[])p.getContent())));
            Ui.getUiEngine().pushGlobalScreen(view, 1, UiEngine.GLOBAL_QUEUE);
} 
```

任何人都可以帮我解决这个问题..因为我从前两天被困在这里..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T13:42:42.250

终于可以解决这个问题了。在这里检查：[Blogformobile](http://blogformobile.wordpress.com/)

# android - 如果我旋转图片，它会弄乱我的矩形，并且我无法正确选择图片

> ID：13288218
> 
> 赞同：0
> 
> 时间：2012-11-08T11:30:50.807
> 
> 标签：android, matrix, rotation, draw, rect

我在 Draw 方法上有以下内容：

```
 @Override
protected void onDraw(Canvas canvas) {
    //        super.onDraw(canvas);
    canvas.drawBitmap(bitmap, 0, 0, mBitmapPaint); //Deseneaza Bitmapul mutabil
    if (PaintActivity.isPic == 1) {
        rect = new Rect((int)mX, (int)mY, ((int)mX+bitmaps.get(lastBitmap).bitmap.getWidth()), ((int)mY+bitmaps.get(lastBitmap).bitmap.getHeight()));
        rectscale = new Rect((int)mX-20, (int)mY-20, (int)mX+20, (int)mY+20);
        rectrotate = new Rect((int)((mX+bitmaps.get(lastBitmap).bitmap.getWidth())-20), (int)mY-20, (int)(mX+bitmaps.get(lastBitmap).bitmap.getHeight()+20), (int)mY+20);
        for(int i=0;i<bitmaps.size();i++){
            if((lastBitmap != i)&& (bitmaps.get(i)!= null) ){
                if(bitmaps.get(i).isRotate){
                    matrixRotate.setRotate(bitmaps.get(i).rectrotateVal, bitmaps.get(i).pX+(bitmaps.get(i).bitmap.getWidth() / 2), bitmaps.get(i).pY+(bitmaps.get(i).bitmap.getHeight() / 2)); //rotate it
                }else{
                    matrixRotate.setRotate(0, bitmaps.get(i).pX+(bitmaps.get(i).bitmap.getWidth() / 2), bitmaps.get(i).pY+(bitmaps.get(i).bitmap.getHeight() / 2)); //rotate it
                }
                canvas.setMatrix(matrixRotate);
                canvas.drawBitmap(bitmaps.get(i).bitmap, bitmaps.get(i).pX,  bitmaps.get(i).pY, mBitmapPaint);
                canvas.setMatrix(null);
                canvas.drawCircle(bitmaps.get(i).pX, bitmaps.get(i).pY, 10, cPaint);
                canvas.drawCircle(bitmaps.get(i).pX+bitmaps.get(i).bitmap.getWidth(), bitmaps.get(i).pY, 10, cPaint);
            }
        }
        if (bitmaps.get(lastBitmap).bitmap != null) {
            bitmaps.get(lastBitmap).rectscale = rectscale;
            bitmaps.get(lastBitmap).rectrotate = rectrotate;
            if(isScalling){
                rect = new Rect((int)mX,(int) mY, (int)tempx, (int)tempy);
                int w = Math.abs(rect.width());
                int h = Math.abs(rect.height());
                canvas.drawRect(rect, rPaint);
                if((w!=0)&&(h!=0)){
                    bitmaps.get(lastBitmap).bitmap = getResizedBitmap(bitmaps.get(lastBitmap).bitmap2, h, w, bitmaps.get(lastBitmap).bitmap.getConfig());
                }
            }
            if(isRotating){
                rotateVal = (float) 45;
                bitmaps.get(lastBitmap).rectrotateVal = rotateVal;
                bitmaps.get(lastBitmap).isRotate = isRotating;
                matrixRotate.setRotate(rotateVal, mX+(bitmaps.get(lastBitmap).bitmap.getWidth() / 2), mY+(bitmaps.get(lastBitmap).bitmap.getHeight() / 2)); //rotate it
                canvas.setMatrix(matrixRotate);
                canvas.drawBitmap(bitmaps.get(lastBitmap).bitmap,  mX, mY, mBitmapPaint);
                canvas.setMatrix(null);
                canvas.drawCircle(bitmaps.get(lastBitmap).pX+bitmaps.get(lastBitmap).bitmap.getWidth(), bitmaps.get(lastBitmap).pY, 10, cPaint);
                canvas.drawRect(bitmaps.get(lastBitmap).rect, rPaint);
            }else{
                canvas.drawBitmap(bitmaps.get(lastBitmap).bitmap, mX, mY, mBitmapPaint);
                canvas.drawCircle(mX, mY, 10, cPaint);
                canvas.drawCircle(mX+bitmaps.get(lastBitmap).bitmap.getWidth(), mY, 10, cPaint);
            }
            bitmaps.get(lastBitmap).pX = mX;
            bitmaps.get(lastBitmap).pY = mY;
            bitmaps.get(lastBitmap).rect = rect;
            bitmaps.get(lastBitmap).rectscale = rectscale;
            bitmaps.get(lastBitmap).rectrotate = rectrotate;
        }
        for(int j=0;j<textArray.size();j++){
            if (textArray.get(j) != null) {
                canvas.drawText(textArray.get(j), tXArray.get(j), tYArray.get(j), textPaintArray.get(j));
            }
        }
    } 
```

我有许多位图，“矩形”矩形与图片的宽度和高度相同，因此，如果我按下图片，它会将我设置在上面，以移动它。rectscale = 是一个位于图片左上角的矩形，我画一个圆圈，如果我按下圆圈，那么我可以缩放我的图片。rectrotate = 相同的东西，但在图片的右上角。我按下它，它会将我的图片旋转 45 度。我有以下触摸事件：

```
private void touch_start(float x, float y) {
    mPath.reset();
    mPath.moveTo(x, y);
    canvas.drawPoint(x, y, paint);
    mX = x;
    mY = y;
    if(PaintActivity.isPic == 1){
        if(bitmaps.size() > 0){
            for(int i = 0;i<(bitmaps.size()-1);i++){
                if(bitmaps.get(i).rect.contains((int)mX,(int) mY)){
                    lastBitmap = i;
                }
            }
        }
        if(bitmaps.size() > 0){
            for(int i = 0;i<(bitmaps.size());i++){
                if(bitmaps.get(i).rectscale.contains((int)mX,(int) mY)){
                    lastBitmap = i;
                    isScalling  = true;
                    tempx = mX+bitmaps.get(lastBitmap).bitmap.getWidth();
                    tempy = mY+bitmaps.get(lastBitmap).bitmap.getHeight();
                }
            }
        }
        if(bitmaps.size() > 0){
            for(int i = 0;i<(bitmaps.size());i++){
                if(bitmaps.get(i).rectrotate.contains((int)mX,(int) mY)){
                    lastBitmap = i;
                    isRotating = true;
                }
            }
        }
    }
}

private void touch_move(float x, float y) {
    float dx = Math.abs(x - mX);
    float dy = Math.abs(y - mY);
    if ((dx >= TOUCH_TOLERANCE) || (dy >= TOUCH_TOLERANCE)) {
        mPath.quadTo(mX, mY, (x + mX) / 2, (y + mY) / 2);
        mX = x;
        mY = y;
        Log.d("move", "mx, my=" + mX + " " + mY);
        // mPath.moveTo(mX, mY);
    }
    // invalidate();
}

private void touch_up() {
    mPath.lineTo(mX, mY);
    mPath.moveTo(mX, mY);
    // commit the path to our offscreen
    canvas.drawPath(mPath, paint);
    //        canvas.save();
    // kill this so we don't double draw
    mPath.reset();
    if(PaintActivity.isPic == 1){
        if(isScalling){
            isScalling = false;
        }
        if(isRotating){
            isRotating = false;
        }
        lastBitmap = bitmaps.size()-1;
        mX= bitmaps.get(lastBitmap).pX;
        mY= bitmaps.get(lastBitmap).pY;
    }
}

@Override
public boolean onTouchEvent(MotionEvent event) {
    float x = event.getX();
    float y = event.getY();
    switch (event.getAction()) {
    case MotionEvent.ACTION_DOWN:
        touch_start(x, y);

        invalidate();
        break;
    case MotionEvent.ACTION_MOVE:
        touch_move(x, y);
        invalidate();
        break;
    case MotionEvent.ACTION_UP:
        touch_up();
        invalidate();
        break;
    }
    return true;
} 
```

如果我评论以下几行：

```
canvas.setMatrix(matrixRotate); 
```

和：

```
canvas.setMatrix(null); 
```

这一切都有效，除了旋转。但是如果我不评论它们，旋转就可以了，第一张图片还可以，但是对于其余的图片，矩形有点乱。它们不是从位图的左上角（我的刻度圈所在的位置）开始，而是从较低的某个位置开始，几乎在位图的一半处。所以我可以使用我的缩放和旋转功能，但我必须猜测把手指放在哪里，因为画圆的点不包含在矩形中。有什么想法我可以解决这个问题吗？

编辑：我试过：在将矩阵设置为矩阵旋转之前：

```
origMatrix = canvas.getMatrix(); 
```

而不是：

```
canvas.setMatrix(null); 
```

我试过了：

```
canvas.setMatrix(origMatrix); 
```

它仍然弄乱了我的矩形，但至少现在它绘制了用于旋转和缩放矩形所在位置的圆圈（通常位于位图中间的某个位置）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T15:36:32.227

我改用这个：

```
canvas.save();
matrixRotate.setRotate(bitmaps.get(i).rectrotateVal, bitmaps.get(i).pX+(bitmaps.get(i).bitmap.getWidth() / 2), bitmaps.get(i).pY+(bitmaps.get(i).bitmap.getHeight() / 2));
canvas.drawBitmap(bitmaps.get(i).bitmap, matrixRotate , mBitmapPaint);
canvas.restore(); 
```

# mysql - C# Visual Studio 2010 加载项项目无法在运行时加载 MySQL.Data dll

> ID：13288224
> 
> 赞同：1
> 
> 时间：2012-11-08T11:31:03.917
> 
> 标签：mysql, add-in

我正在尝试从 Visual Studio 2010 中的加载项项目连接到 Mysql 数据库。我在加载项中使用 Windows 窗体，并单击其中一个按钮，我保持为 Mysql 建立连接。但是它抛出了找不到引用的程序集或其一个或多个依赖程序集的异常。

在调试时，它会在需要引用 MySql.Data.dll 时立即引发异常。

我尝试使用普通的 Windows 应用程序连接到数据库。它在那里工作正常，但仅在加载项项目中它会引发错误。

请让我知道是否有任何指示。

# php - 在表格中显示最后不同的用户

> ID：13288232
> 
> 赞同：1
> 
> 时间：2012-11-08T11:31:13.387
> 
> 标签：php, mysql

我正在研究这样的 MySQL 数据库：

```
 ----------------------------------------------
 | ID |  Time  |    Typeop     |   Operator   |
 ----------------------------------------------
 |  1 |  10:01 |  withdrawal   |     John     |
 |  2 |  10:01 |  deposit      |     Mike     |
 |  3 |  10:01 |  deposit      |     Andrew   |
 |  4 |  10:02 |  check        |     John     |
 |  5 |  10:02 |  withdrawal   |     Simon    |
 |  6 |  10:03 |  withdrawal   |     Dorothy  | 
```

该数据库由每个“操作员”在其操作期间填充，并显示一个假设的银行操作数据库。

我的问题是：如何组织一个 mysql 查询来显示过去 3 分钟内每个不同操作员的活动？在本例中，查询必须显示：

```
 -------------------------
 | Operator |   Typeop   |
 -------------------------
 | Dorothy  | withdrawal |
 |  Simon   | withdrawal |
 |   John   | check      |
 |  Andrew  | deposit    |
 |  Mike    | deposit    |
 ------------------------- 
```

请注意，John 在最后 3 分钟内进行了两次操作，但它仅被视为最后一次。此表中的记录按 3 分钟时间段内从最后一个操作到较旧操作的顺序排列。

我可以在每个操作员的名字旁边显示一张图片吗？(john.jpg, Simon.jpg...) 在从查询生成的 php 表中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T11:38:39.490

这个查询可以做到。

```
SELECT * 
FROM   (SELECT Operator, 
               Typeop 
        FROM   tbl 
        WHERE  `Time` > ( Now() - INTERVAL 3 minute ) 
        ORDER  BY `Time` DESC) AS `a` 
GROUP  BY `Operator` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T11:40:37.460

用这个...

```
Select Operator,Typeop from YourTableName where Time > date_sub(now(), interval 3 minute)  ORDER BY `Time` desc group by Operator; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T11:45:03.113

我还没有测试过这个，但是这样的东西也可以工作。

```
SELECT * FROM tableName WHERE Time BETWEEN (CURTIME() AND ADDTIME(CURTIME(), '00:03:00')) 
```

# dns - DNS 格式错误

> ID：13288239
> 
> 赞同：0
> 
> 时间：2012-11-08T11:31:28.033
> 
> 标签：dns, udp

我收到 DNS 格式错误。知道它是什么吗？

```
Client /root #dig @2029:192:168:119::170 ns udp.net +bufsize=50000 +tries=10 ns +noqr
;; Warning, extra type option

; <<>> DiG 9.3.1 <<>> @2029:192:168:119::170 ns udp.net +bufsize=50000 +tries=10 ns +noqr
; (1 server found)
;; global options:  printcmd
;; Got answer:
;; ->>HEADER<<- opcode: QUERY, status: FORMERR, id: 55070
;; flags: qr rd; QUERY: 1, ANSWER: 0, AUTHORITY: 0, ADDITIONAL: 1

;; OPT PSEUDOSECTION:
; EDNS: version: 0, flags:; udp: 50000
;; QUESTION SECTION:
;udp.net.           IN  NS

;; Query time: 0 msec
;; SERVER: 2029:192:168:119::170#53(2029:192:168:119::170)
;; WHEN: Thu Nov  8 14:49:08 2012
;; MSG SIZE  rcvd: 36 
```

在 Google 上找不到任何有用的材料。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T06:53:07.493

我无法确定确切的原因，但我所做的研究提出了几个主题：

*   它似乎经常归因于错误配置的负载均衡器。
*   它似乎仅在发送 EDNS 记录时发生。

例如，一些示例：

```
$ dig AAAA gtm03.wallst.com @209.234.224.40

; <<>> DiG 9.9.2 <<>> AAAA gtm03.wallst.com @209.234.224.40
;; global options: +cmd
;; Got answer:
;; ->>HEADER<<- opcode: QUERY, status: FORMERR, id: 29393
;; flags: qr rd; QUERY: 1, ANSWER: 0, AUTHORITY: 0, ADDITIONAL: 1
;; WARNING: recursion requested but not available

;; OPT PSEUDOSECTION:
; EDNS: version: 0, flags:; udp: 4096
;; QUESTION SECTION:
;gtm03.wallst.com.              IN      AAAA

;; Query time: 80 msec
;; SERVER: 209.234.224.40#53(209.234.224.40)
;; WHEN: Fri Mar 15 02:51:24 2013
;; MSG SIZE  rcvd: 45

$ dig +noedns AAAA gtm03.wallst.com @209.234.224.40

; <<>> DiG 9.9.2 <<>> +noedns AAAA gtm03.wallst.com @209.234.224.40
;; global options: +cmd
;; Got answer:
;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 23716
;; flags: qr aa rd; QUERY: 1, ANSWER: 0, AUTHORITY: 1, ADDITIONAL: 0
;; WARNING: recursion requested but not available

;; QUESTION SECTION:
;gtm03.wallst.com.              IN      AAAA

;; AUTHORITY SECTION:
wallst.com.             300     IN      SOA     dns01.wallst.com. dnsadmin.wallst.com. 2911145386 7200 3600 86313600 300

;; Query time: 82 msec
;; SERVER: 209.234.224.40#53(209.234.224.40)
;; WHEN: Fri Mar 15 02:51:38 2013
;; MSG SIZE  rcvd: 85 
```

我在两个不同大陆的不同主机上得到相同的输出。

据我所知，这是您查询的服务器的故障，而不是您自己的解析器。

# jquery - 在 ASP.NET MVC 中将对象列表转换为 Json

> ID：13288242
> 
> 赞同：2
> 
> 时间：2012-11-08T11:31:46.377
> 
> 标签：jquery, asp.net-mvc, json, asp.net-mvc-4

我正在使用带有 ASP.NET MVC 4的[JqPlot 。](http://www.jqplot.com/)

这是来自 Jqplot[示例之一的示例数据](http://www.jqplot.com/tests/date-axes.php)

`var line1 = [['2008-06-30 8:00AM', 4], ['2008-7-30 8:00AM', 6.5], ['2008-8-30 8:00AM', 5.7], ['2008-9-30 8:00AM', 9], ['2008-10-30 8:00AM', 8.2]];`

该对中的第一个值是 DateTime，另一个是值。

现在我试图从控制器中获得**这样**的价值，我正在使用**Web Api** Controller

我的动作如下

```
public List<Stats> GetGraphData()
{
    var stats = new List<Stats>
                    {
                        new Stats {Date = DateTime.Now, Value = 4},
                        new Stats {Date = DateTime.Now.AddMonths(1), Value = 11},
                        new Stats {Date = DateTime.Now.AddMonths(2), Value = 5},
                        new Stats {Date = DateTime.Now.AddMonths(3), Value = 7},
                    };
    return stats;
} 
```

但返回的值是

> [对象{日期=“2012-11-08T16:52:04.5047592+05:30”,值=4},[对象{日期=“2012-11-08T16:52:04.5047592+05:30”,值=4 }, ...

所以我决定尝试**JSON.stringify()**它给出了以下内容......

> [{"日期":"2012-11-08T16:52:04.5047592+05:30","值":4},{"日期":"2012-12-08T16:52:04.5047592+05:30", "值":11},{"日期":"2013-01-08T16:52:04.5047592+05:30","值":5},{"日期":"2013-02-08T16:52:04.5047592 +05:30","价值":7}]

如何获得如下所示的格式？ `[['2008-06-30 8:00AM', 4], ['2008-7-30 8:00AM', 6.5], ['2008-8-30 8:00AM', 5.7], ['2008-9-30 8:00AM', 9], ['2008-10-30 8:00AM', 8.2]];`

请帮助我。

*注意：请随时编辑我的问题的标题，我想不出其他任何东西：P*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T11:39:40.990

这是因为您使用的是对象而不是数组，您可以这样做：而不是这样：

```
new Stats {Date = DateTime.Now, Value = 4}, 
```

试试这个：

```
new String[] { DateTime.Now.ToString(), "4" }, 
```

当然`List<Stats>`改成`List<String[]>`

另一种选择是在获得对象后将其展平为 Javascript 中的数组。假设您将来自服务器的数据放入一个名为 的变量`serverArray`中，这看起来像一个对象数组：

```
var serverArray = [{Date: "2012-11-08T16:52:04.5047592+05:30", Value: 4}, { .... }, etc. etc. ]; 
```

然后您可以使用[`.map()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/map)将此数组映射到另一个数组：

```
results = serverArray.map(function (obj) { return [obj.Date, obj.Value]; }); 
```

结果将如下所示（注意方括号表示数组和对象键、日期和值的缺失）：

```
[["2012-11-08T16:52:04.5047592+05:30", 4], [......], etc. etc. ]; 
```

然后您可以在绘图中使用与示例数据相同的格式的“结果”。

# python - 如何在不显示 None 的情况下执行 def 命令

> ID：13288250
> 
> 赞同：0
> 
> 时间：2012-11-08T11:32:07.063
> 
> 标签：python, function, nonetype

我试图让一个函数运行另一个函数，然后要求输入。问题是，当我使用 print 选项时，它会`None`在执行 def 后返回，但是当我使用 return 选项时，它只会打印 print_board(board) 并完成函数，也就是说，不需要输入。

如何在不显示`None`且未完成功能的情况下执行命令？

```
def main():
     print print_board(board)
     x = int(raw_input("Enter row "))
     y = int(raw_input("Enter column "))
     z = int(raw_input("Enter digit "))
     return is_valid_move(x,y,z) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T11:34:06.267

简单地：

```
def main():
     print_board(board)
     ... 
```

这将调用`print_board()`，但既不会打印出它的返回值 ( `None`) 也不会终止`main()`。

# windows - PHP 的 windows 发行版中的 36 字节长的 *.dll 文件是什么？符号链接？如何？

> ID：13288256
> 
> 赞同：3
> 
> 时间：2012-11-08T11:32:32.163
> 
> 标签：windows, linker, symlink, dll

在 linux/unix 世界中，符号链接 *.so 文件被广泛使用。即，通常会看到 libfoo.so 和 libfoo.so.X 文件只是 libfoo.so.XYZ 的符号链接（这是常规文件）。我在 Windows 上从来没有这样的东西（尽管 Windows[确实](http://en.wikipedia.org/wiki/NTFS_symbolic_link) [支持](http://en.wikipedia.org/wiki/NTFS_junction_point)符号链接）。

不过，当我最近下载适用于 Windows 的 PHP 二进制发行版时，我看到了非常相似的图片：

*   icudt.dll（大小只有 36 字节）
*   icudt46.dll（正常大小）
*   icudt49.dll（正常大小）
*   icuuc.dll（大小只有 36 字节）
*   icuuc46.dll（正常大小）
*   icuuc49.dll（正常大小）
*   等等。

未版本化的 *.dll 文件显然是常规文件（不是 NTFS 符号链接或连接点）。但是，它们的大小非常小（从 36 到 40 字节）和非常具体的内容。例如icudt.dll的内容是：

```
!<symlink>яюi_c_u_d_t_4_9_._d_l_l___ 
```

（“_”这里的意思是“\x0”，“яю”这里是“\xFF\xFE”）。

这些类似符号链接的 DLL 应该如何工作？

*   Windows 可以像使用通常的 DLL 一样使用它们吗？
*   或者可能是 WinAPI 中针对此类 DLL 的一些特殊功能？
*   或者这样的 DLL 只能被 PHP 识别？
    *   也许 PHP 源代码是以显式读取和分析每个 DLL 以解析此类伪符号链接的方式编写的？

注意：据说 PHP 是由 VC9 构建的，因此它可能不是与 cygwin/mingw 相关的东西（有人可能首先想到）。注意 2：在 C:\Windows 目录中没有找到这样的小型 DLL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T16:05:32.420

Windows 不会将这些文件识别为 DLL 或任何类型的 DLL 链接。正如 Hans Passant 正确建议的那样，它是 Cygwin 特定的文件，只有基于 Cygwin 的构建才会将它们识别为 Cygwin 框架的符号链接，而不是 Windows 操作系统。

如果您尝试在任何标准 Win32 API 中使用它们，您将收到一堆加载错误，声称可执行文件的格式无效。PHP 是由 VC9 编译的这一事实并不意味着 VC9 创建了有问题的文件，因为它们很可能是通过一些 Cygwin 工具准备的。

PS Windows 的最小可执行文件大小为 97 字节，如此[处](http://www.phreedom.org/research/tinype/)所述。

# jquery - jquery点击不起作用

> ID：13288260
> 
> 赞同：0
> 
> 时间：2012-11-08T11:33:10.273
> 
> 标签：jquery, onclick, jquery-deferred

```
var sba_dfd = $.Deferred();
/*and so on*/

$("#sbas").click(function(){
    $(this).css('background-color','#ed1c24');
    sba_dfd.resolve();
}); /*and on*/

$(".x").click(function(){
    var promise = $.when(sba_dfd.promise()/*and on*/);
    if(promise.state("resolved")){
        promise.then(function(){
            $("#true").get(0).play();
            $("#thumb").css({'background-color' : 'rgba(237,28,36,.4)'});
            $("#div,#wrapper_overlay").hide();
        });
    } else {
            $("#false").get(0).play();
    }
}); 
```

我有一堆`deferreds`，那个决心`clicks`。

的分辨率`deferreds`应该在点击后触发`.x`，但它们会自动触发。我在这里错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T11:44:08.580

我认为您有语法错误

```
expected ')' after '}' please examine 
```

这对我们来说很常见......所以我建议在写到它的身体之前总是关闭你打开的东西。

# asp.net - 使用 DropDownList 的内容更新 NHibernate 模型对象时出现问题

> ID：13288261
> 
> 赞同：1
> 
> 时间：2012-11-08T11:33:11.727
> 
> 标签：asp.net, nhibernate, webforms, asp.net-4.5

我是 NHibernate 的新手，但对 EF4 有更好的了解。

我有一个基本的“编辑项目”页面，在提交时我想用表单中的值更新我的项目对象。FWIW，我正在使用 FormView 并在可行的情况下利用新的 WebForms 模型绑定功能。

我的“项目”对象有一个属性：

```
public virtual Category Category { get; set; } 
```

它对应于数据库中的 FK 关系（“CategoryId”列指向“Category”表。）

所以我的表格有一个“类别”下拉菜单。此下拉列表已加载所有类别对象的列表。

提交时，我要做的就是将 Category 下拉列表中的选定值分配给我的 Item 对象的 Category 属性。很直截了当，对吧？:)

但是我遇到了困难：

*   我可以轻松获得 dropdown.SelectedValue，但我无法将其分配给我的 Item 对象。在 EF4 中，我的 Item 对象将使用[外键关联](https://stackoverflow.com/questions/5281974/code-first-independent-associations-vs-foreign-key-associations/5282275#5282275)，因此将同时具有`Category`和`CategoryId`属性，这些属性将自动保持同步。当我在 NHibernate 中尝试类似的操作时，由于尝试多次使用单个列，我得到了[这个 SqlParameterCollection 错误的无效索引。](https://stackoverflow.com/questions/4888089/invalid-index-n-for-this-sqlparametercollection-with-count-n-or-foreign-key-c)

*   我很容易得到 dropdown.SelectedItem，但这是[ListItem](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listitem.aspx)类型，不能转换为`Category`.

*   我尝试使用 dropdown.DataSource 属性（可能访问“SelectedIndex-th”项），但是在单步执行代码时，此 DataSource 值为空。

到目前为止，我最好的（可怕的）解决方案如下：

```
var dropdown = (DropDownList)MyFormView.FindControl("dropdown");
var id = dropdown.SelectedValue;
var category = new MyRepository().GetCategoryById(id);
item.Category = category; 
```

所以我正在做一个额外的存储库调用，并再次获取整个 Category 对象，而我真正想做的是：

```
item.CategoryId = id; 
```

我应该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T18:14:33.620

知道 id 时使用[Session.Load](http://ayende.com/blog/3988/nhibernate-the-difference-between-get-load-and-querying-by-id)以避免访问数据库。Load 将创建一个动态代理并允许使用正确的 CategoryId 持久化项目。负载是无状态应用程序中的最佳解决方案。

```
var dropdown = (DropDownList)MyFormView.FindControl("dropdown");
var id = dropdown.SelectedValue; // may need to cast to int
item.Category = session.Load<Category>(id); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T11:49:35.500

您不需要获取类别对象，您只需创建一个新的类别对象并动态设置id即可。

```
var dropdown = (DropDownList)MyFormView.FindControl("dropdown");
var id = dropdown.SelectedValue;
item.Category = new Category { CategoryId = id }; 
```

# erlang - Erlang的从模块：代码和IO分布

> ID：13288265
> 
> 赞同：6
> 
> 时间：2012-11-08T11:33:32.727
> 
> 标签：erlang, erlang-otp, slave

我们在应用程序中使用 Erlang 和`slave`模块，该应用程序在不同机器上生成从节点，这些从节点向另一台机器上的主节点报告并由其协调。从节点在它们的机器上打开端口并运行一些外部程序（本质上，erlang 从节点（我们称之为工人）只是外部程序的精美包装器）。

但是，我们遇到了一些意想不到的问题，我们还没有找到好的解决方案。

1.  代码分发。目前，我们的 Makefile 将编译后的 erlang 代码（文件夹）同步到运行工作节点的机器，我们通过工作节点启动`ebin`时的参数加载它。`-pa`确实应该有某种方法可以在运行时通过 Erlang 自动分发代码，但我们不知道该怎么做。

2.  记录。从模块文档说“从站产生的所有 TTY 输出都将发送回主节点”。但是，当我们`lager`在从属（工作）节点上运行（basho 记录器）时，它的输出不会重定向到主节点的 tty（只有主节点的日志输出）。目前我们有一个在主节点上运行的进程，它记录（通过较大的）它从从节点获得的消息。所以要在从节点上记录一些东西，我们向主节点发送消息。

我们正在像这样启动工作节点：

```
slave:start(IP, NodeName, NodeArgs) 
```

`NodeArgs`在哪里

```
 -setcookie thecookie -pa /home/dau/mapro/deps/nicedecimal/ebin/ /home/dau/mapro/deps/meck/ebin/ /home/dau/mapro/deps/lager/ebin/ /home/dau/mapro/deps/jsx/ebin/ /home/dau/mapro/apps/worker/ebin/ /home/dau/mapro/ebin/ -s worker_app 
```

其中所有给定路径都是运行工作节点的机器上的绝对路径。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T22:06:45.553

就第 1 项而言，您正在做正确的事情：您负责在远程主机上安装 Erlang 源模块或预编译的梁文件，就像您负责安装 OTP/Erlang 本身一样。一旦它们位于远程机器上的代码路径中，您就可以加载、卸载和热交换到您心中的内容，不过:)

wrt item #2：您是否验证过您的从模块代码可以`erlang:display()`向您的主节点输出天真的错误消息（即）？在这种情况下，问题是更大的配置 - 尝试设置`error_logger_redirect`为`false`快速测试，也许......如果这些都没有用，请提前道歉！

# asp.net - 在 asp.net 中为自定义 CMS 设计巨型菜单的设计考虑

> ID：13288272
> 
> 赞同：0
> 
> 时间：2012-11-08T11:33:58.100
> 
> 标签：asp.net, database-design, content-management-system, megamenu

在设计可以处理 Mega Menus 结构的自定义 CMS 时可以遵循的最佳实践是什么，我找不到可以通过 CMS 的示例数据库设计清楚地显示的示例。

如果有人能向我指出一个很好的资源，其中包含数据库设计示例以及 asp.net Web 表单中的源代码，我将不胜感激，我可以灵活地使用数据库。

如果所有的菜单都存储在一张表中，则很容易设计 MegaMenu。在某些情况下，我必须从不同的表构建超级菜单让我们以以下主菜单为例

主页 | 文章 | 新闻 | 关于我们 | 联系我们

我想以这样的方式构建我的菜单，以便它可以从不同的表中读取菜单详细信息，例如

文章菜单：带图片的前 3 篇文章

新闻菜单：带图片的前 3 名新闻

联系我们菜单：应在两列或三列中显示指向美国、加拿大、德国、印度、英国等不同国家办事处的链接。

到目前为止，我还没有找到任何有用的示例可以用作学习目的，它显示了具有不同功能的 CMS 的基本架构设计，例如新闻、产品（例如性质不同）

我试图研究实际上将页面/帖子存储在一个表中的wordpress，并分配值类型帖子或页面以区分但在某些情况下，我们需要有不同的东西，比如需要存储在不同表中的产品。我很困惑如何创建一个超级菜单系统，它可以从不同的表中读取菜单信息，而不是创建一个单独的菜单表，如果一个有数百种产品，这可能会让人头疼。在这种方法中，我们必须更新产品相关表以及菜单表，这不是一个好的设计方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T13:29:04.957

我建议您采用单表方法：

看看我刚刚在 dbpatterns 上制作的这个：http: [//dbpatterns.com/show//509bbcae89cbad253a2f5717/](http://dbpatterns.com/show//509bbcae89cbad253a2f5717/)

所以现在内容明智

```
Example

ID: 1
Title: Article
item_link: home.aspx
parent: null
order: 1

ID: 2
Title: Article
item_link: page.aspx
parent: null
order: 2

ID: 3
Title: Article Number 1
item_link: page1.aspx
parent: 1 (ID of Article)
order: 1

ID: 4
Title: Article Number 2
item_link: page2.aspx
parent: 2 (ID of Article)
order: 2

ID: 5
Title: Article Number 3
item_link: page3.aspx
parent: 2 (ID of Article)
order: 3

ID: 6
Title: News
item_link: News.aspx
parent: null
order: 3

ID: 7
Title: News Number 1
item_link: News1.aspx
parent: 6 (ID of News)
order: 1

ID: 8
Title: News Number 2
item_link: News2.aspx
parent: 6 (ID of News)
order: 2

ID: 9
Title: News Number 3
item_link: News3.aspx
parent: 6 (ID of News)
order: 3 
```

因此，当您构建菜单代码端时，您将获得所有项目

循环遍历没有父项的每个项目以构建顶层，然后遍历具有父项的每个项目，添加到父项，并按顺序对它们进行排序（注意顺序是每个子菜单）。

订购注意事项：顶级物品去 1,2,3,4 等等...

子菜单项也有 1,2,3，但对于它们所在的菜单项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T13:39:06.920

您的问题非常非常模糊 - 但如果您想要.Net CMS 中的大型菜单，您可以查看带有 LocalGov 扩展名的 Umbraco (http://kevin.thejumps.co.uk/2011/umbraco-localgov/ ）。即使你不使用它，你也可以看到其他人是如何实现这个功能的。

# java - 在eclipse中导入SwingX jar库

> ID：13288278
> 
> 赞同：4
> 
> 时间：2012-11-08T11:34:04.807
> 
> 标签：java, eclipse, jar

我已经按照[此处](https://stackoverflow.com/questions/3642928/adding-a-library-jar-to-an-eclipse-android-project)和[此处](https://stackoverflow.com/questions/3280353/how-to-import-a-jar-in-eclipse)的步骤进行操作，但仍然出现错误。这是错误的屏幕截图。![在此处输入图像描述](../Images/ecb2cdc3e50fc435eb18204906f768d7.png)

那么我错过了什么，我应该怎么做才能避免这个错误：“无法解析类型[org.jdesktop.swingx.JXPanel 。它是从所需的 .class 文件中间接引用的”？](http://download.java.net/javadesktop/swinglabs/releases/0.8/docs/api/org/jdesktop/swingx/JXPanel.html)

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T11:39:13.327

您必须下载[SwingX](http://java.net/projects/swingx/downloads/download/releases/swingx-all-1.6.4.jar)并将 jar 添加到项目的类路径中

# ip - IP 客户端 WSO2 Esb

> ID：13288283
> 
> 赞同：2
> 
> 时间：2012-11-08T11:34:17.313
> 
> 标签：ip, wso2, wso2esb

我需要获取客户端的 IP 地址，在 WSO2 应用程序服务器中我可以通过

```
getProperty('REMOTE_ADDR') 
```

但我需要通过 WSO2 ESB（代理）获取 IP。如何通过 ESB 获取 IP？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T11:45:53.093

在代理的范围内尝试这样；

```
<log level="custom">
                <property name="ip address" expression="get-property('axis2','REMOTE_ADDR')"/>
            </log> 
```

检查此博客文章；

[http://vvratha.blogspot.com/2011/11/retriving-clientihost-within-sequence.html](http://vvratha.blogspot.com/2011/11/retriving-clientiphost-within-sequence.html)

# c - 为什么选择分号来结束语句？

> ID：13288288
> 
> 赞同：2
> 
> 时间：2012-11-08T11:34:44.357
> 
> 标签：c, statements

是不是因为打字时，当手放在默认位置说时，小指下会出现分号 - 食指放在F和J上？

或者还有什么更实质的东西吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-08T11:41:33.963

使用分号作为语句分隔符/终止符至少可以追溯到 Algol-60。

我认为最可能的原因是点字符已经在浮点文字中用作小数点，而在赋值运算符（`:=`）中使用了冒号。所以剩下的分号是下一个最明显的标点符号。

笔记：

*   Algol 的早期方言用作`'`语句终止符，
*   使用 COBOL `.`，
*   FORTRAN 根本不需要语句终止符，因为它不允许一行中有多个语句。

那个时代的许多语言都是为 6 位甚至 5 位字符集设计的，这严重限制了语言设计者的选择。作为一名本科生，我记得我们不能为 Pascal 使用 IBM 026 键盘，因为它们无法处理字符串文字中的大括号等。我们不得不排队等待 029 按键。

在那些日子里，打字效率并不是一个主要问题。1950 年代和 1960 年代的典型输入设备对于触摸打字来说太“笨重”了。很多程序都写在编码板上，然后由键盘操作员键入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T11:39:11.297

我认为这是因为几乎所有历史键盘中的符号都被用作运算符，剩下一个可能是分号。

# java - 表单支持对象的 Map 字段的 BindingResult rejectValue

> ID：13288289
> 
> 赞同：1
> 
> 时间：2012-11-08T11:34:47.420
> 
> 标签：java, spring, spring-mvc, spring-roo

我有一个 Java 类“QueAndAns”，它有一个字段

```
private Map<String,String> questionAndAnswerMap; 
```

在我的 JSP 页面上，我有

```
<form:form  action="${submitURL}" method="POST" modelAttribute="queAndAns">  
    <c:forEach items="${queAndAns.questionAndAnswerMap}" var="questionAndAnswer"     varStatus="status">  
        <form:input     id="securityQuestions${status.index}" path="questionAndAnswerMap[${questionAndAnswer.key} ${questionAndAnswer.value}]"/>  
        <form:errors cssClass="errors" id="_securityQuestions_error_id" path="questionAndAnswerMap"/>            
    </c:forEach>  
    <input id="proceed" type="submit"  value="${fn:escapeXml(find_button)}"/>  
</form:form> 
```

现在在我的控制器上，我想看看用户是否回答了所有问题，否则我想用`bindingResult.rejectValue`. 我正在尝试这样的事情：

```
Map<String, String> questionAndAnswerMap = queAndAns.getQuestionAndAnswerMap();
    Iterator<Map.Entry<String, String>> iterator = questionAndAnswerMap.entrySet().iterator();
    while (iterator.hasNext()) {
        Map.Entry<String, String> map = iterator.next();
        if (null == map.getValue() || StringUtils.isEmpty(map.getValue())) {
            bindingResult.rejectValue("questionAndAnswerMap" , "err_qna_not_blank", "Please fill up the answer for security questions");
        }
    } 
```

但它不工作。
有什么办法可以做到吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T15:35:49.950

在过去的几个小时里，我也一直在为此苦苦挣扎。终于找到了解决方案：

*您的路径定义应如下所示*

```
<form:input id="securityQuestions${status.index}" path="questionAndAnswerMap['${questionAndAnswer.key}']"/>  
<form:errors cssClass="errors" id="_securityQuestions_error_id" path="questionAndAnswerMap['${questionAndAnswer.key}']"/> 
```

*你的验证应该是这样的*

```
bindingResult.rejectValue( "questionAndAnswerMap['"+map.getKey()+"']" , "err_qna_not_blank", "Please fill up the answer for security questions"); 
```

我还尝试在 'BindingResult' 中使用 'nestedPath' 标记和 'pushNestedPath()' 方法以使其更干净（没有字符串连接），但似乎不可能。

# python - numpy数组乘法问题

> ID：13288294
> 
> 赞同：2
> 
> 时间：2012-11-08T11:34:58.747
> 
> 标签：python, arrays, numpy

假设我有三个数组（即 type `numpy.array`）：

```
>>> w.shape
(113,)
>>> X.shape
(113,1)
>>> Y.shape
(113,) 
```

numpy 帮助页面建议在数组上每个乘法都是元素方面的。由于上述三个向量在第一维中的大小为 113，我认为在所有情况下乘法都会给出一个 113 长度的向量，但事实并非如此：

```
>>> (w * Y).shape     # expected
(113,)
>>> (w * X).shape     # ?!?!?!?!
(113,113) 
```

第二轴的113是哪里来的？对我来说看起来并不那么明智。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T11:42:26.537

> 当对两个数组进行操作时，NumPy 会逐元素比较它们的形状。它从尾随维度开始，然后向前推进。当两个维度相等或其中之一为 1 时，它们是兼容的。

**两个轴中较小的一个被拉伸或“复制”以匹配另一个。**

Numpy 的**[广播](http://docs.scipy.org/doc/numpy/user/basics.broadcasting.html)**规则正在这里应用。

```
w      (1d array):       113
X      (2d array): 113 x   1   
Result (2d array): 113 x 113 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T11:48:43.413

查看正在发生的事情的最简单方法是举个例子：

```
w = array([5,6])
x = array([[1,2],[3,4]])
z = array([[5,6]])

w*x
# array([[ 5, 12],
#        [15, 24]])

w*z
# array([[25, 36]]) 
```

# mysql - 我应该如何用表格数字数据构建一个 Mysql 数据库？

> ID：13288295
> 
> 赞同：1
> 
> 时间：2012-11-08T11:35:00.230
> 
> 标签：mysql, database-design

我有来自广泛的基准测试的数据，并且需要一些存储数据的方法，以便在基于 Web 的应用程序中使用，计划是在我们进行测试时添加来自新产品的数据：

1.  我有关于每种产品的一些信息（品牌、型号、类型、市场部门、注释等）
2.  每个产品都要经过大约 20 次测试，通常是相同的核心测试，但偶尔会进行更具体的测试。
3.  每个测试的输出都是相同的 50 通道原始数据（通常为 600 行）。
4.  处理此原始数据以添加额外的计算通道（另外 25 个）
5.  处理一些通道以提供平滑的插值数据（~10 个通道，~20 行）
6.  从平滑和原始数据中提取一些单值度量、梯度、滞后、范围。（3000 项）
7.  平滑的数据和指标将根据测试类型而有所不同。

我构建了一个大表来保存所有产品信息和单个值，我给每个产品一个唯一的名称，但是管理超过 3000 列变得越来越困难。然后我为每个测试有 2 个表（根据测试类型和唯一名称命名），一个用于原始数据和计算数据，一个用于平滑插值数据。

我正在使用 php 构建一个基于 Web 的界面来访问数据并根据用户选择绘制、制表和图表相关信息。Ascii 数据文件通过 Web 界面再次上传，并使用 python 进行处理，以提供平滑的数据和指标。

问题是我不确定我的数据库是以最佳方式构建的，我需要让它相当容易更改、添加测试、记录额外的指标等。目前这并不容易。

这是我对上述所有工具的第一次尝试（也是我的第一篇文章），我对最初的结果非常满意。但我想确保在继续之前，我一直在正确地做这件事。

有什么想法或建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T05:55:19.890

On the basis of your comment "*For product read individual vehicle. A vehicle is put on a test rig and ~20 similar tests are conducted. in each test certain (slightly different for each test) forces/displacements are applied to the vehicle and ~50 measurements are made at each force step (~600 in total):*, you would need the following tables

```
PRODUCTS
product_id
product_make
product_model
product_notes  

TESTS
test_id
test_name

PRODUCT_TESTS  (this table stores which tests are appropriate to each product)
pt_id
product_id
test_id 

MEASUREMENTS
measure_id
pt_id
force_step
value 
```

Your original question lists more attributes which are not clear to me. At least the above should be enough to get you started, after which you add more fields and tables.

# php - 有没有办法将 Compass 与 PHPSass 编译器一起使用？

> ID：13288298
> 
> 赞同：1
> 
> 时间：2012-11-08T11:35:04.490
> 
> 标签：php, sass, compass-sass

我们的样式表是用 Compass mixin 构建在 SCSS 中的。对于开发，我们使用 CodeKit，因为它是一个很棒的工具，我真的很喜欢它。但是现在我们需要在服务器端实现自动编译的工具。我们使用了 PHPSass ( [phpsass.com](http://phpsass.com) )，因为它非常支持纯 SASS。不幸的是，我不知道如何将 Compass 连接到其中。它还没有内置支持，并且 Compass 仅作为 gem 包提供 - 无法下载它并将其 mixins 放入项目文件夹中。有人遇到过这样的问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T04:52:18.223

众所周知，截至 2013 年 2 月 11 日，phpSASS 支持扩展。来自开发者推特的帖子，“我们现在支持扩展，这意味着 Compass。非常感谢 Juan Manuel Vergés Solanas 和 tsi 的贡献！” [http://www.phpsass.com/](http://www.phpsass.com/) [https://twitter.com/PHPSass](https://twitter.com/PHPSass)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T20:45:24.110

[从https://github.com/chriseppstein/compass/tree/stable/frameworks/compass/stylesheets](https://github.com/chriseppstein/compass/tree/stable/frameworks/compass/stylesheets)获取 mixins （我想我实际上是从一些 windows/ruby 东西下载了指南针） 注意，并非所有指南针都可以与 phpsass 一起使用. 我目前使用一个非常小的子集，我认为边界半径和框模型。某些未移植到 php 的 sass 函数似乎存在问题。

```
$loadpath = array(pathtosassfiles, pathtocompass);
    $defaultOptions = array(
    'load_paths'     =>   $loadpath  ,
    'cache'          => false,
    'syntax'         => 'scss',
    'extensions'     =>  array('compass'=>array())
    );
$debugoptions = array(
    'line_numbers'   => false,
     'debug_info'    => true,
    'style'          => 'nested', //'compressed' 'compact' 'expanded' 'nested'
    );
$minoptions = array(
    'line_numbers'   => false,
    'debug_info'     => false,
    'style'          => 'compressed', //'compressed' 'compact' 'expanded' 'nested'
    );
//then when you instantiate:
$sass = new SassParser(array_merge($defaultOptions, $minoptions)); 
```

# linux - 在 udev 中替换 hal-get-property 和 hal-find-by-capability？

> ID：13288299
> 
> 赞同：4
> 
> 时间：2012-11-08T11:35:09.077
> 
> 标签：linux, porting, udev, hal

我需要将一个使用过时的 HAL 工具的 bash 脚本移植到 udev`hal-get-property`或`hal-find-by-capability`udev。[HAL](http://en.wikipedia.org/wiki/HAL_%28software%29)声明 HAL 已合并到 udev，但我找不到有关如何将此脚本正确移植到 udev 的有用信息。

示例：如果我想要所有存储硬件（使用 HAL）的列表，我可以运行

`hal-find-by-capability --capability storage`

这会给我一个UDI（唯一设备标识符）列表，如下所示：

`/org/freedesktop/Hal/devices/storage_model_Virtual_disk
/org/freedesktop/Hal/devices/storage_serial_00000000000000000001
/org/freedesktop/Hal/devices/platform_floppy_0_storage`

如果我现在想知道`/org/freedesktop/Hal/devices/storage_model_Virtual_disk`是否可移动，我可以发出以下查询

`hal-get-property --udi /org/freedesktop/Hal/devices/storage_model_Virtual_disk --key storage.removable`

它会回答`true`or `false`。

所以我的问题是：
没有 HAL，我怎么能做这些事情？
sysfsutils ( `systool`) 可以工作，但它似乎不是一个合适的替代品。
这适用`udevadm info`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T16:23:26.720

编辑后，您要做的事情会更加清晰。首先，您必须找到要查询的设备。最简单的方法是扫描 sysfs。如果要查询特定设备，只需将 udev 指向 sysfs 中描述该设备的位置。因此，如果您正在寻找`sdb`，例如，您可以通过`/block/sdb`或从中选择正确的节点`/dev/block`或类似的任何东西。如果您有设备路径，例如`$DEVPATH`，您可以执行以下操作：

```
udevadm info --attribute-walk --name=$DEVPATH 
```

这将溢出很多信息，包括可移动性。`attribute-walk`如果您替换为，则会显示另一组信息`query=property`，但我无法在那里找到可移动性信息。

如果您想为多个设备执行此操作，`find`并且`xargs`将成为您的朋友，这基本上是您的`hal-find-by-capability`替代品，因为您只需要在 sysfs 中找到正确的文件夹。

* * *

根据您要做什么，您可能还需要阅读[udev 规则](http://reactivated.net/writing_udev_rules.html)，它允许您在连接设备时触发脚本的执行（通过匹配 给出的值`--attribute-walk`）。您还可以轻松设置所有权和权限等。

# python - Python 子进程，shell 参数的使用

> ID：13288300
> 
> 赞同：5
> 
> 时间：2012-11-08T11:35:16.957
> 
> 标签：python, subprocess

查看[http://docs.python.org/2/library/subprocess.html#frequently-used-arguments](http://docs.python.org/2/library/subprocess.html#frequently-used-arguments)我假设除非您使用`shell=True`, 否则无法使用`rm`,`cp`等`mv`。也许文档已过期-过时的，因为他们正在为调用方法提供一个字符串，它应该是一个列表。但是使用`shell=False`当然不会阻止使用所说的shell命令。

> shell=False 禁用所有基于 shell 的功能

在查看 subprocess.py 之后，我可以看到该参数所做的只是添加`["/bin/sh", "-c"]`到参数字符串的开头。

有人可以为我澄清一下吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-08T11:37:56.280

他们谈论的 shell 功能是`|`管道、`*`glob 和其他通配符、使用`>`or`2>`的stdout/stderr 重定向`<(process substitution)`等。他们不是在谈论其他命令/程序，例如 mv、grep 等。

# php - 带有 wordpress 的 HTML5 画布

> ID：13288307
> 
> 赞同：0
> 
> 时间：2012-11-08T11:35:42.670
> 
> 标签：php, wordpress, canvas

我想尝试一个网站，该网站将表示为与价格变化相关的图表。它将基于 wordpress 。换句话说，我将在 wordpress post meta 中保留价格列表，并且我想在前端显示为图表。

我想知道我应该使用 HTML5 画布来显示图形吗？？？. 用起来靠谱吗？？还有关于学习曲线，因为我对图形数据完全陌生？？？。如果 HTML 不够可靠，还有其他方法可以使用它吗？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T15:39:01.400

画布和 SVG 都适用于任何 wordpress 安装。

如果您对这些技术一无所知，那么图书馆可能是您入门的最佳选择。

[例如，SVG 库Raphael](http://raphaeljs.com/)使创建一些图形变得非常容易。看看他们的演示。

# php - Doctrine 1.2 中使用 YAML 的人类可读数组/对象数据夹具

> ID：13288316
> 
> 赞同：1
> 
> 时间：2012-11-08T11:36:11.490
> 
> 标签：php, doctrine, yaml, fixtures, doctrine-1.2

是否有可能拥有具有人类可读、未序列化的 php 数组的固定装置，而无需序列化它们？

目前我序列化数据，但很难阅读和编辑。如果我转储数据，我会收到可读数据，但似乎无法导入。

相关字段的架构：

```
 template_data: 
      type: object
      default: null 
```

这是我目前在我的 data-fixtures YAML 文件中拥有的条目。它是序列化的 (PHP) 并且在将固定装置加载到数据库时可以正常工作：

```
BannerCampaign:
  BannerCampaign_1:
    name: Frontpage
    description: Frontpage
    template_data: a:1:{s:7:"banners";a:3:{i:0;a:4:{s:6:"target";s:0:"";s:3:"url";s:32:"/url/123";s:10:"image_path";s:11:"front_1.jpg";s:3:"alt";s:0:"";}i:1;a:4:{s:6:"target";s:0:"";s:3:"url";s:39:"/url/456";s:10:"image_path";s:11:"front_2.jpg";s:3:"alt";s:0:"";}i:2;a:4:{s:6:"target";s:0:"";s:3:"url";s:18:"/url/789";s:10:"image_path";s:11:"front_3.jpg";s:3:"alt";s:0:"";}}} 
```

这是我将数据库转储到夹具文件时得到的那种夹具（`doctrine.php dump-data`）

```
BannerCampaign:
  BannerCampaign_1:
    name: Frontpage
    description: Frontpage
    template_data:
      banners:
        -
          target: ''
          url: /url/123
          image_path: front_1.jpg
          alt: ''
        -
          target: ''
          url: /url/456
          image_path: front_2.jpg
          alt: ''
        -
          target: ''
          url: /url/789
          image_path: front_3.jpg
          alt: '' 
```

后一种 YAML 更具可读性，但我似乎无法将固定装置导入数据库而不会出现以下错误：

```
PHP Warning:  unserialize() expects parameter 1 to be string, array given in 
```

知道我“希望”是否可以实现，实际上是否可以实现？

# vb.net - 为什么 List(Of String).indexof(function) 不起作用？

> ID：13288324
> 
> 赞同：0
> 
> 时间：2012-11-08T11:36:45.597
> 
> 标签：vb.net, lambda

我非常喜欢 Lambdas，但我对这个表达式确实有问题：

```
Dim Test as New List/of String)
Test.add("A")
Test.add("B")

Dim Adress=Test.Indexof(Function (adr) (Trim(Ucase(Adr)) LIke "A") 
```

编译器警告说，Stirng 不是委托并且不会编译 - 任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T11:46:46.900

`List.IndexOf`接受 a`T`并返回该对象的索引。所以你不能在这里传递谓词。我假设您想要等于忽略大小写“A”的地址的第一个索引。然后你可以使用Linq：

```
Dim matches = Test.Select(Function(Address, Index) New With {Address, Index}).
                   Where(Function(x) x.Address.ToUpper = "A")
If matches.Any() Then
    Dim firstMatch = matches.First()
    Dim firstMatchIndex As Int32 = firstMatch.Index '  0 
    Dim firstMatchAddress As String = firstMatch.Address ' "A"
End If 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T11:42:44.263

[List(of string).IndexOf](http://msdn.microsoft.com/en-us/library/e4w08k17.aspx)方法将字符串作为输入。

该函数`Function (adr) Trim(UCase(adr)) LIKE "A"`是一个委托，而不是一个字符串，因此您不能将它与 IndexOf 方法一起使用。

如果您想执行忽略大小写的搜索，那么以下 LINQ 查询可能适合您。

```
Test.First(Function (adr) adr.Equals("A", StringComparison.OrdinalIgnoreCase)) 
```

# html - 悬停时如何更改大量img

> ID：13288328
> 
> 赞同：3
> 
> 时间：2012-11-08T11:36:53.957
> 
> 标签：html, css, image, hover

我是一名新的网络开发人员，所以我不知道最佳实践。

我在页面上有一些图像，我想在悬停时更改它们。我找到了两个解决方案，但我不知道哪个更好。

HTML中的第一个：

```
<td>
  <a href="getContent('unlight');">
    <img src="res/images/unlight/p_first.png"
         onmouseover="this.src='res/images/light/p_first.png'" alt="First"
         onmouseout="this.src='res/images/unlight/p_first.png'"/>
    <br>first
  </a>
</td> 
```

第二个使用 CSS：

```
<td id="first" onclick="getContent('first');">First</td>

#first{
    background: no-repeat url("./images/unlight/p_first.png");
    width: 78px;
    height: 78px;
    }

#first:hover {
    background: no-repeat url("./images/light/p_first.png");
    width: 78px;
    height: 78px;
} 
```

现在对于每个 img 我需要写两条路径。

这可以自动化吗？如何做到专业、通用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T11:55:56.267

使用可以使用第二件事，但 html 应该是正确的值。只有`td`价值是不够的。

```
 <div id="first" >First</div>​ 
```

圆顶在这里[http://jsfiddle.net/4qQPL/1/](http://jsfiddle.net/4qQPL/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T12:03:24.200

这可能是接触[jQuery](http://jquery.com/)的好时机。您基本上可以编写一种更动态的方式来完成您想要的事情，类似于您当前在`onmouseover`and`onmouseout`属性中所做的事情。另外，jQuery 允许您将这种逻辑从 HTML 标记中取出并放入一个完全独立的`.js`文件中。

一旦你获得了 jQuery，你就可以创建一个看起来像这样的脚本。（我尝试过大量评论，以便您了解发生了什么：

```
$(document).ready(function() {
    // Any `img` tag with a class of `some-class` (or whatever you want) will get this behavior on hover
    $("img.some-class").hover(
        // This first handler is for the `onmouseover` state
        function() {
            // Storing a query for `this` in a variable only runs the query once. Otherwise, you'd run it twice in the line below
            var $this = $(this);
            // Replace `/light/` in the image URL with `/unlight/`
            $this.attr("src", $this.replace("/light/", "unlight"));
        },
        // This second handler is for the `onmouseout` state
        // Its logic is similar to the first handler, so I'll omit comments explaining it
        function() {
            var $this = $(this);
            $this.attr("src", $this.replace("/unlight/", "light"));
        }
    );
}); 
```

现在您应该能够将每个图像的版本`light`和版本存储在和子文件夹中。确保两个图像具有相同的文件名。然后添加到您希望具有此行为的标签。`unlight``light``unlight``class="some-class"``img`

额外阅读：

*   [方法`hover()`_](http://api.jquery.com/hover/)
*   [方法`attr()`_](http://api.jquery.com/attr/)
*   [JavaScript`replace()`方法](http://www.w3schools.com/jsref/jsref_replace.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T11:51:49.007

显然有很多方法可以做到这一点，但这是一种方法。

将您的两个图像组合成一个图像，将该图像用作背景图像，并在悬停/聚焦时更改图像的背景位置以显示第二个图像。

此外，除非您显示表格数据，否则您真的不应该在您的网站上使用表格。坚持使用 DIV 标签、SECTION 标签等。

例子：

```
<a id="image1" class="hover-image" href="#">First</a>

// set a class which contains global settings for all relevant images.

a.hover-image {
 width:XXXpx;
 height:XXXpx;
 background-repeat:no-repeat;
 background-position:0 0;
}

a.hover-image:hover, a.hover-image:focus {
 background-position:XXXpx XXXpx;
}

// set the background image path based on a unique ID.

a#image1 {
 background-image:url(XXX.png);
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-08T11:44:20.513

**css**

```
.myButtonLink {
    display: block;
    width: 100px;
    height: 100px;
    background: url('/path/to/myImage.png') bottom;
    text-indent: -99999px;
}
.myButtonLink:hover {
    background-position: 0 0;
} 
```

**HTML**

```
<a class="myButtonLink" href="#LinkURL">Leaf</a> 
```

# php - 形式：插入多值答案（每行一个答案）

> ID：13288330
> 
> 赞同：1
> 
> 时间：2012-11-08T11:37:03.207
> 
> 标签：php, sql, forms, post, insert

在这种形式中，我可以毫无问题地构建和显示问题和答案（即我数据库中表内的值）。但是现在我如何插入选择的答案？因为我需要每行插入一个答案，并且答案在一个问题上将是多值的。

我要插入的表具有以下结构：Tbluseranswer `(`UserIDFKPK `,`AnswerIDFKPK `,`QuestionIDFK `,`AnswerValue`）

```
 <?php
    $query_questionset= "SELECT Constructor, QuestionIDFKPK, OnPage, QuestionValue, tblquestionset.SortOrder
    FROM tblquestion, tblquestionset, tbluser
    WHERE tbluser.QuestionSetIDPK = tblquestionset.QuestionSetIDPK
    AND tblquestionset.QuestionIDFKPK = tblquestion.QuestionIDPK
    AND tbluser.UserIDPK = ".@$UserId."
    AND tblquestionset.OnPage= '".@$Screen."'
    ORDER BY tblquestionset.SortOrder";

    $QuestionSet_Constructors = mysql_query($query_questionset);

if(isset($_POST['submit'])){

//Inserts here

}

?>
<html>
<head>
</head>
<body>

<!--BUILDING QUESTIONARE -->

    <?php  while( $row_questionset=mysql_fetch_array($QuestionSet_Constructors)){?> 

            <?php $QuestionID=$row_questionset['QuestionIDFKPK'];   

                    $query_Answer="SELECT * FROM tblanswer WHERE tblanswer.QuestionIDFK = '".@$QuestionID."'";
                    $AnswersValue= mysql_query($query_Answer);

            ?>
        <?php if($row_questionset['Constructor']=="CheckBox"){?>

                <!--SPACE-->
                <div>
                <label class="desc" >
                </label>
                </div>
                <!--/SPACE-->

                        <!--CHECK BOX-->    

                        <div>
                        <label class="desc" name="question" value= "<?php $row_questionset['QuestionIDFKPK'];?>" >
                        <?php echo $row_questionset['QuestionValue']; ?>

                        </label>
                        </div>

                            <!--SPACE-->
                            <div>
                            <label class="desc" >
                            </label>
                            </div>
                            <!--/SPACE-->

                                <fieldset class="checkboxes">
                                <?php while ($row_Answer=mysql_fetch_array($AnswersValue)){ ?>  
                                    <label class="label_check" >
                                    <input name="samplecheckbox"  value="<?= $row_Answer['AnswerValue']; ?>" type="checkbox" />

                                    <?php echo $row_Answer['AnswerValue']; ?>   
                                    </label>    

                                <?php }  ?> 
                                </fieldset>

                        <!--/CHECK BOX-->   

    <!--RADIO BUTTON--> 

                        <div>
                            <label class="desc"name="question" value=" <?php $row_questionset['QuestionIDFKPK'];?>">
                            <?php echo $row_questionset['QuestionValue']; ?>

                            </label>
                        </div>
                            <?php while ($row_Answer=mysql_fetch_array($AnswersValue)){ ?>  
                            <fieldset class="radios">

                                <label class="label_radio">
                                <input name="sample-radio"  value=" <?= $row_Answer['AnswerValue']; ?>" type="radio" checked />
                                <?php echo $row_Answer['AnswerValue']; ?> 
                                </label>
                                <?php   

                                <?php $AnswerId=$row_Answer['AnswerIDPK'];  ?>
                                <?php 
                            <?php }  ?>
                            </fieldset>

                    <!--RADIO BUTTON--> 

        <?php } ?>

    <?php } ?>

    <!--BUILDING QUESTIONARE -->    

<input  name="submit" type="submit"  value="Next &#8594"  >

</form>
</body>
</html> 
```

# java - 我的登录系统没有正确比较

> ID：13288331
> 
> 赞同：3
> 
> 时间：2012-11-08T11:37:15.647
> 
> 标签：java

> **可能重复：**
> [Java String.equals 与 ==](https://stackoverflow.com/questions/767372/java-string-equals-versus)

我正在尝试用 Java 制作一个简单的用户/密码系统。我的代码是：

```
Scanner sc  =  new Scanner (System.in); 
System.out.println("Enter Username :");
String username = sc.nextLine(); 
System.out.println("Enter Password :");
String password = sc.nextLine(); 
if (username == "a" && password == "b"){
System.out.print("ok");
} 
```

或者

```
if (username == 'a' && password == 'b') 
```

我想用用户 a 进行简单的登录并通过 b 但它不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T11:46:11.290

要屏蔽密码，请首选[java.io.Console.readPassword()](http://docs.oracle.com/javase/6/docs/api/java/io/Console.html#readPassword%28%29)类而不是 Scanner ：

```
String username = null;
String password = null;
Console console = System.console();

System.out.print( "Username: " );
username = console.readLine();

System.out.print( "Password: " );
password = new String( console.readPassword());

System.out.println( "Username = " + username );
System.out.println( "Password = " + password );
if (username.equals( "a" ) && password.equals( "b" )) {
   System.out.print( "ok" );
} 
```

加强安全性的另一个建议：密码变量应该是要被垃圾的语言环境。

console.readPassword() 返回一个字符数组，你可以逐个字符比较而不分配字符串，即使要编写更多代码也更安全（这是因为我提供的示例代码使用了字符串）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T11:38:20.307

始终使用**equals()**方法检查**字符串是否相等**

 **```
 if (username == "a" && password == "b"){ 
```

应该

```
if (username.equals("a") && password.equals("b")){ 
```

使用`==`运算符检查两个原语是否具有相同的值，并且两个对象引用是否指向相同的引用。

使用 .equals() 方法检查两个对象是否有意义地相等**

# python - 关闭 lambda 函数中的变量

> ID：13288334
> 
> 赞同：3
> 
> 时间：2012-11-08T11:37:40.770
> 
> 标签：python, lambda, closures

> **可能重复：**
> [（lambda）函数闭包在 Python 中捕获了什么？](https://stackoverflow.com/questions/2295290/what-do-lambda-function-closures-capture-in-python)

我有这个 python 代码，它将几个 lambda 函数放在字典中：

```
dictfun = dict()
for txt in ("a", "b", "c"):
    dictfun[txt] = lambda: "function " + txt 
```

这些函数只返回一个带有调用它们的参数的字符串。
我希望看到类似`function a`for `dictfun["a"]()`、`function b`for`dictfun["b"]()`等的输出，但这就是我得到的：

```
>>> dictfun["a"]()
'function c'
>>> dictfun["b"]()
'function c'
>>> dictfun["c"]()
'function c' 
```

似乎它们都评估`txt`为它设置的最后一个值，即它的当前值。总之，变量没有封闭到 lambdas 中。我什至可以这样做：

```
>>> txt = "a"
>>> dictfun["c"]()
'function a' 
```

我怎样才能接近`txt`lambda 函数以获得预期的输出？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T11:40:06.900

您可以将值设置`txt`为关键字参数的默认值：

```
dictfun = dict()
for txt in ("a", "b", "c"):
    dictfun[txt] = lambda txt=txt: "function " + txt 
```

# linux - 是否可以从struct page中找到对应的task_struct？

> ID：13288336
> 
> 赞同：2
> 
> 时间：2012-11-08T11:37:54.263
> 
> 标签：linux, kernel

有没有一种方法可以通过给定的 struct page 找到相应的 struct task_struct？我想做的是我想知道哪个 KVM 虚拟机在虚拟化环境中使用给定的页面。并且 task_struct 添加了一个新的数据成员（即 vm_id），这样一旦我通过给定的 struc 页面获取 task_struct，我就可以获得 vm id。似乎没有直接的解决方案。但我对此一无所知。

那么，做这些事情的正确方法是什么？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-19T07:56:15.853

在 linux 中，kvm vm 是一个普通进程，其中 pid 和许多 vm 结构作为普通任务，要归档你想要的，我认为你需要编写一个内核模块并执行类似这样[的操作](https://stackoverflow.com/questions/8980193/walking-page-tables-of-a-process-in-linux)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T05:59:36.447

考虑到在 Linux 内核中实现了页框回收算法。为了实现 PFRA，内核使用了一些数据结构来查找所有使用同一页的页表条目，这些页将被回收。定位页表时，如果定义了 CONFIG_MM_OWNER，也应该定位 task_struct。

到 mm_struct 的页映射可能是 1:N，到 task_struct 的页映射也可能是 1:N。

在文件 ./mm/rmap.c 的函数 try_to_unmap_anon() 和 try_to_unmap_file() 中，有一些代码执行从页面结构到 mm_struct 的反向映射工作。

PFRA 实现细节可以参考《Understanding Linux Kernel, 3rd Edition》中的第 17 章。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T14:54:52.600

一般来说，不会，因为许多页面在多个任务/进程之间共享（共享库、运行的程序的多个实例等）。不过，我对内核结构不够熟悉，无法提出替代解决方案，所以我会让其他人回答这个问题......

# validation - Grails 自定义验证消息不起作用？

> ID：13288339
> 
> 赞同：0
> 
> 时间：2012-11-08T11:38:04.933
> 
> 标签：validation, grails, messages

我目前正在开发 Grails 应用程序，我想更改为我的域模型中的对象显示的默认错误消息。我相信我所做的一切都是正确的，但也许有人可以帮我解决这个问题，代码如下：

**领域模型：**

```
class Details {

    long mobileNo
    String name
    static constraints = {
    mobileNo(blank:false, maxsize:12, matches:"44[0-9]{10}")
    }
} 
```

**消息属性**

```
sms.mobileNo.matches.invalid=You must enter a correct mobile number in {0} 
```

**看法**

```
<g:hasErrors bean="${detailsInstance}">
    <div class="alert error">
        <g:renderErrors bean="${detailsInstance}" as="list" />
    </div>
</g:hasErrors> 
```

现在，当单击页面上的创建时，它会转到以下控制器功能：

```
def details = new Details(params)

        if (details.validate()) {

}
else{
            render view: 'create', model: [detailsInstance: details]

        } 
```

现在我希望应用程序可以像这样工作：一个错误的数据被传递给控制器​​，它认为它是无效的，然后将有错误的模型传递回同一个视图。**然后从messages.properties**文件中提取数据不正确的错误消息。但是，我希望在哪里看到：

```
You must enter a correct mobile number in [mobileNo] 
```

相反，我看到了这个：

```
Failed to convert property value of type java.lang.String to required type long for property mobileNo; nested exception is java.lang.IllegalArgumentException: Could not parse number: Unparseable number: "gg" 
```

有人可以帮我生成自定义消息以进行验证，以便向用户显示有用的消息吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T13:17:59.060

问题是，在验证之前，绑定会尝试将您的值“gg”绑定到 long。

你的约束还说：

```
mobileNo(blank:false, maxsize:12, matches:"44[0-9]{10}" 
```

因此您希望它是一个字符串，但它被定义为一个长字符串。

尝试将您的 mobileNo 更改为 String 类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T13:19:33.547

更深入地查看您的堆栈跟踪，它可能会告诉您抛出错误的行号。我的猜测是它在下一行抛出异常......

```
new Details(params) 
```

这是因为您没有在 grails 尝试将 'gg' 转换为 long 之前检查输入，这将不起作用。在我看来，你有四个选择......

1.  将 mobileNo 更改为字符串
2.  `params`在做之前验证`new Details(params)`（不推荐）
3.  使用 javascript/jquery 仅允许输入中的数值。
4.  我记得那里有一些额外的插件可以添加到 grails 以进行远程验证或类似的东西，但我不记得它们了。但是，我只会使用 jquery（或其他）构建我自己的。

享受！

# string - 需要 Shell 脚本帮助

> ID：13288340
> 
> 赞同：-2
> 
> 时间：2012-11-08T11:38:07.310
> 
> 标签：string, shell, unix

我有一个特定的日期（一个人的生日）存储在一个文件中，例如 01/02/1900。我想知道这个人的年龄是否大于 20 岁。我正在使用 shell 脚本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T12:02:31.340

只是个玩笑，但也许您可以得出您需要的信息：它从每行读取一个日期，`/path/to/file.txt`并输出该人的年龄，以及更年轻或大于 20 岁的人。

```
#!/bin/bash

while read DATE junk; do
    QDATE=$(echo "$DATE" | sed 's#/#%2F#g')
    ANS=$(curl -s "http://www.wolframalpha.com/input/?i=%28now+-+${QDATE}%29+in+years" | grep -Eo '"[0-9]+(\.[0-9]+)? years"')
    AGE=$(echo "$ANS" | sed -r -e 's/"//g' -e 's/ years//g' -e 's/\..+//g')

    if [ -z "$AGE" ]; then
        echo "$DATE: ERROR occured"
        continue
    fi

    if [ $AGE -ge 20 ]; then
        echo "$DATE ($ANS): Person older or equal to 20 years"
    else
        echo "$DATE ($ANS): Person younger than 20 years"
    fi
done < /path/to/file.txt 
```

样本：

```
 $ cat /path/to/file.txt
01/01/1900
08/11/1992
09/12/1992
$ bash test.sh 
01/01/1900 ("112.9 years"): Person older or equal to 20 years
08/11/1992 ("20 years"): Person older or equal to 20 years
09/12/1992 ("19.92 years"): Person younger than 20 years 

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T21:04:25.747

在带有[GNU coreutils的](http://www.gnu.org/software/coreutils/)[Linux](http://en.wikipedia.org/wiki/Linux)上（即在所有主要的 Linux 发行版上），您可以使用将两个日期转换为数字进行比较：[`date`](http://linux.die.net/man/1/date)

```
#!/bin/bash

# Arguments: <age-limit> <birth-date>

LIMIT=$(date --date="$1 years ago" +%s)
BIRTH=$(date --date="$2" +%s)

if [[ "$BIRTH" -gt "$LIMIT" ]]; then
    echo "Birth-date less than $1 years ago"
else
    echo "Birth-date at least $1 years ago"
fi 
```

请注意，日期字符串`01/02/1900`如月/日顺序不明确。在我的系统和语言环境`date`中，假设月份在日期之前 - YMMV。

# jquery - Ajax jquery C# .net JSON 将参数从 javascript 传递到 [webmethod] - 内部服务器错误

> ID：13288342
> 
> 赞同：0
> 
> 时间：2012-11-08T11:38:08.727
> 
> 标签：jquery, ajax, json, wcf

传递参数的javascript：

```
<script>    
    var str = "pears"
    $.ajax({
        url: 'WebService.asmx/HelloWorld', //'/WebService.asmx/HelloWorld',
        data: "{outputtype:'" + str + "'}",
        type: "POST",
        cache: false,
        dataType: 'json',
        contentType: "application/json; charset=utf-8",
        success: function (msg) {
            var response = msg.d;
            alert(response);
        },
        error: function (xhr, status, error) {
            alert(error + "\n" + xhr + "\n" + status); //do something if there is an error
        }
    }); 
```

和网络方法：

```
[WebMethod]
public string HelloWorld(String str)
{
    return str;
} 
```

我花了一整天的时间在这个方法上尝试了无数种将参数传递给这个方法的变体，但都没有奏效。我在不同的机器上尝试过，我尝试过使 webmethod 静态，我尝试过各种从 javascript 中传递值的方法。

但是，如果我不传递参数，它将起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T12:32:21.140

试试这个网站，它对你有用..

```
var str = "pears"
$.ajax({
         type: "POST",
         url: "WebService.asmx/HelloWorld",
         data: "{'strabc1': '1'}",
         contentType: "application/json; charset=utf-8",
         dataType: "json",
         async: true,
         cache: false,
         success: function (data) {                       
             alert(data.d);
             alert(data.d[0]);                 
         }
      }) 
```

**服务器端方法**

如果您想从服务器端方法返回集合，下面给出的*ArrayList*返回方法将很有用..，

```
[WebMethod]
public static ArrayList HelloWorld(string strabc1)
{
        ArrayList arr = new ArrayList();
        arr.Add("abc");
        arr.Add("123");
        arr.Add("fff");
        return arr;
 } 
```

[参考这篇文章](http://weblogs.asp.net/karan/archive/2010/09/12/calling-server-side-method-using-jquery-ajax.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T11:42:27.877

**此参数名称有问题，请在您的方法中更改参数名称**

```
[WebMethod] public static string HelloWorld(String outputtype)
                           { return outputtype; } 
```

并使方法静态，更新代码在上面

# linux - 目录本身的 ACL

> ID：13288352
> 
> 赞同：0
> 
> 时间：2012-11-08T11:39:00.580
> 
> 标签：linux, permissions, acl

我有一个目录

```
..../test 
```

具有以下 ACL 权限。

```
$ getfacl test
# file: test
# owner: root
# group: root
user::rwx
user:usl:rwx
group::r-x
mask::rwx
other::---
default:user::rwx
default:user:usl:rw-
default:group::r-x
default:mask::rwx
default:other::--- 
```

它适用于用户 usl beeing 能够在目录内写入，但用户对目录本身没有写入权限？

```
$ rmdir test
rmdir: failed to remove `test': Permission denied 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T14:52:05.353

删除目录也需要该目录的父目录的写入权限，因为该目录需要更新。

# jenkins - 在 MacOS X Lione 上使用 Jenkins 构建 iOS 项目时出错

> ID：13288356
> 
> 赞同：1
> 
> 时间：2012-11-08T11:39:19.847
> 
> 标签：jenkins, bitbucket, revision

Jenkins 成功地从 BitBucket 签出项目，但之后我收到以下错误消息：

> 由匿名用户发起
> 
> 在工作区/Users/Shared/Jenkins/Home/jobs/myprojectAdHocBuild/workspace 中构建
> 
> 结帐：工作区//Users/Shared/Jenkins/Home/jobs/myprojectAdHocBuild/workspace - hudson.remoting.LocalChannel@xxxxxxx
> 
> 使用策略：默认
> 
> 从 1 个远程 Git 存储库获取更改
> 
> 从 git@bitbucket.org:myuser/myproject.git 获取上游更改
> 
> 没有候选修订
> 
> 错误：找不到要构建的任何修订。验证此作业的存储库和分支配置。
> 
> 归档工件
> 
> 完成：失败

知道如何解决吗？

# vb.net - “x”秒后工具提示不会消失

> ID：13288360
> 
> 赞同：1
> 
> 时间：2012-11-08T11:39:38.027
> 
> 标签：vb.net, tooltip

我显示这样的工具提示：

```
Sub Form1_KeyPress(sender As Object, e As KeyPressEventArgs) Handles Me.KeyPress
  If e.KeyChar = ChrW(3) Then
    Clipboard.SetDataObject("X:" & MousePosition.X & "  " & "Y:" & MousePosition.Y)
    Me.ToolTip1.Show("Copied into the clipboard", Me.Label8)
  End If
End Sub 
```

但工具提示并没有消失......

我的“AutoPopDelay”（5000）和我的“ToolTip1”的其他属性有正确的值，但是如果我像我解释的那样调用 ToolTip，那么我无法在“X”之后自动关闭它秒...

我已经尝试过“ **thread.sleep** ”方法在 ToolTip 启动后等待“x”秒以关闭它，但是这种方法会停止我的主窗体的进程，所以我需要一个更好的方法来做到这一点。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T12:47:04.987

我复制。ToolTip 是一个非常古怪的组件。您可以通过明确指定持续时间来将其塑造成某种形状：

```
 Me.ToolTip1.Show("Copied into the clipboard", Label1, 1500) 
```

这将使它按预期消失。仍然不太正确，单击提示以将其关闭会暂时停用表单。对于此类通知，请使用另一种控件，即 StatusStrip。

# pseudocode - 如何将冒泡排序算法更改为选择排序？

> ID：13288362
> 
> 赞同：1
> 
> 时间：2012-11-08T11:39:42.453
> 
> 标签：pseudocode

我一直在尝试将冒泡排序算法更改为选择排序，但我很挣扎。

这是冒泡排序...

```
For K= 0 to n â€“ 2 
For j = 0 to n â€“ k - 2
If item[j] > item [j + 1]
temp = item[j]
item[j] = item[j+1]
item[j + 1] = temp
end if
end for 
end for
end bubbleSort 
```

这是一个朋友用 javascript 给我的，我想知道是否有人可以帮助把它变成伪代码？谢谢 ...

```
var arr = new Array(23, 19, 35, 12, 30);
temp = 0;

for (k = 0; k < arr.length - 1; k++) {

for (j = k + 1; j < arr.length; j++) {

if (arr[k] > arr[j]) {

temp = arr[k];
arr[k] = arr[j];
arr[j] = temp;
}
}
}

for (k = 0; k < arr.length; k++)
alert(arr[k]); 
```

谢谢大家，我是编程新手，算法让我明白！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T07:13:05.060

这是选择排序的伪代码：

```
A = array(23, 19, 35, 12, 30) // make an array
n = length(A)                 // array length
min = 0                       // minimum element index is 0

for j = 0 to n - 1 do         // go through array
   min = j                    // assume the minimum element is the first element

   for i = j + 1 to n do      // test elements behind j-th element
      if(A[i] < A[min]) then  // if any of those elements is smaller, it's the new minimum
         min = i
   end for

   if(min <> j) then          // swap the minimum element (min) with the current (j)
      tmp = A[j]
      A[j] = A[min]
      A[min] = tmp
end for 
```

# unity3d - 碰撞检测方面的游戏引擎 (3d)

> ID：13288364
> 
> 赞同：1
> 
> 时间：2012-11-08T11:39:51.830
> 
> 标签：unity3d, ogre, irrlicht, panda3d

在使用 webGL 编写简单的 3d 应用程序后，我决定开始使用 C++ 和游戏引擎进行认真的 3d 编程体验。

考虑到我可能遇到的所有困难，我更愿意选择提供最高效、最全面的碰撞检测解决方案的游戏引擎。它不一定是免费的，我已经准备好遇到复杂的语法。

考虑所有流行的游戏引擎替代品（panda3d、irrlicht、unity 等），您是否会在碰撞检测方面比较这些引擎。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T20:03:11.093

对我来说，这里有三种类型的 3D 游戏引擎：

*   最好最贵的：虚幻引擎、Unity3D
*   不错，但更便宜（甚至免费）：Shiva3d、Ogre
*   其他

如果您有 gl 编程经验，您将不会遇到任何这些引擎的问题。我推荐你使用 Unreal 或 Unity3d，因为在那个游戏引擎中为你做了很多工作，而你作为程序员不需要考虑低级编程，你只需编写代码并管理你的 3d 世界。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T04:26:35.660

要考虑的一件事是您是否只是在寻找强大的碰撞检测，或者您是否正在寻找碰撞检测和刚体物理模拟（尽管一个好的物理模拟将包括碰撞检测）。

现在在许多情况下，您会发现游戏引擎使用另一个物理中间件，而不是尝试从头开始构建自己的物理，因此您的问题的一部分可能实际上是关于比较不同的物理系统而不是游戏引擎。

例如，Unity3D 使用 nVidia PhysX，非常棒。Panda3D 使用的 Bullet 也很棒，但也可以使用 ODE 或 Physx 以及可能的其他一些系统。不久前，我使用了 Ogre，它使用的是 Newton，而且*也*很棒。

然后是 Havok，它在 AAA 游戏中非常受欢迎（生化奇兵、上古卷轴、真人快打、天剑、生化危机、扭曲金属、托尼霍克……）。除了集成到其他引擎之外，Havok 去年还收购了 Trinigy 和他们的视觉引擎，所以这可能是另一个有趣的检查。

# php - 全局变量和函数

> ID：13288365
> 
> 赞同：0
> 
> 时间：2012-11-08T11:39:52.783
> 
> 标签：php, function, global

如果我有一个需要使用 $foo 的函数，

并且`global $foo`如此不屑一顾，

我怎样才能让我的函数访问变量而不是全局的？还有其他我不知道的方法或方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T11:44:36.577

试试这样的..

```
<?php
    $name = "batman";

    function get_details($name,$age){
        $temp_str = "Name: ".$name."<br />Age: ".$age;
        return($temp_str);
    }

    echo get_details($name,35); // passing through name as a variable and the age as just text...
?> 
```

给...

```
Name: batman
Age: 35 
```

# php - 在锚点上显示父类别的子项列表

> ID：13288371
> 
> 赞同：0
> 
> 时间：2012-11-08T11:40:13.310
> 
> 标签：php, magento

不久前，我在这个网站上设置了左侧导航：http: [//makethemostof.co.uk/](http://makethemostof.co.uk/)以在顶级类别上显示所有子类别，并在子类别上显示所有同级类别。

我现在想向子类别（但不是父类别）添加分层导航。分层导航工作正常，但我用于显示同级类别的代码不再有效。请在此处查看：[http](http://makethemostof.co.uk/house-garden/kitchen) ://makethemostof.co.uk/house-garden/kitchen可以在父级（“房屋和花园”）中找到的列表应该出现在过滤器上方，但事实并非如此。

这就是我在 layout/catalog.xml 中的内容：

```
<catalog_category_layered translate="label">
    <label>Catalog Category (Anchor)</label>
    <reference name="root">
        <action method="setTemplate"><template>page/2columns-left.phtml</template></action>
    </reference>
    <reference name="left">
        <block type="catalog/navigation" name="catalog.leftnav" template="catalog/navigation/left.phtml"/>
        <block type="mana_filters/view_category" name="mana.catalog.leftnav" template="catalog/layer/view.phtml"/>
        <!--<block type="catalog/layer_view" name="catalog.filters" template="catalog/layer/view.phtml"/>-->
    </reference>
    <reference name="content">
        <block type="catalog/category_view" name="category.products" template="catalog/category/view.phtml">
            <block type="catalog/product_list" name="product_list" template="catalog/product/list.phtml">
                <block type="catalog/product_list_toolbar" name="product_list_toolbar" template="catalog/product/list/toolbar.phtml">
                    <block type="page/html_pager" name="product_list_toolbar_pager"/>
                </block>
                <action method="addColumnCountLayoutDepend"><layout>empty</layout><count>6</count></action>
                <action method="addColumnCountLayoutDepend"><layout>one_column</layout><count>5</count></action>
                <action method="addColumnCountLayoutDepend"><layout>two_columns_left</layout><count>4</count></action>
                <action method="addColumnCountLayoutDepend"><layout>two_columns_right</layout><count>4</count></action>
                <action method="addColumnCountLayoutDepend"><layout>three_columns</layout><count>3</count></action>
                <action method="setToolbarBlockName"><name>product_list_toolbar</name></action>
            </block>
        </block>
    </reference>
</catalog_category_layered> 
```

这是我在模板/目录/导航/left.phtml 中的内容：

```
<?php $currentCat = Mage::registry('current_category');

if ( $currentCat->getParentId() == Mage::app()->getStore()->getRootCategoryId() ) {
    echo '<h2 class="grad">'.$this->getCurrentCategory()->getName().'</h2>';
    $loadCategory = $currentCat;
} else {
    echo '<h2 class="grad"><a href="'.$this->getCurrentCategory()->getParentCategory()-       >getURL().'">'.$this->getCurrentCategory()->getParentCategory()->getName().'</a></h2>';
    $loadCategory = Mage::getModel('catalog/category')->load($currentCat->getParentId());
}

$cats = $loadCategory->getChildrenCategories(); ?>

<ul>
<?php foreach($cats as $category): ?>
<? $category->load();
if ($category->getIsActive() && $category->getIncludeInMenu()) { ?>
<li>
    <a href="<?php echo $category->getUrl() ?>"><?php echo $category->getName() ?></a>
</li>
<? } ?> 
```

我只能假设上面某处有错误。任何识别它的帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T12:01:35.070

试试这个

```
<?php 
   $currentCat = Mage::registry('current_category'); 

   if ( $currentCat->getParentId() == Mage::app()->getStore()->getRootCategoryId() ) {
       echo '<h2 class="grad">'.$this->getCurrentCategory()->getName().'</h2>';
       $loadCategory = $currentCat;
   } else {
       echo '<h2 class="grad"><a href="'.$this->getCurrentCategory()->getParentCategory()->getURL().'">'.$this->getCurrentCategory()->getParentCategory()->getName().'</a></h2>';
       $loadCategory = Mage::getModel('catalog/category')->load($currentCat->getParentId());
   }
?>

<ul>
   <?php foreach($loadCategory->getChildrenCategories() as $subcategory): ?>
       <?php if ($subcategory->getIsActive()) : ?>
          <li>
              <a href="<?php echo $subcategory->getUrl(); ?>"><?php echo $subcategory->getName(); ?></a>
          </li>
      <?php endif; ?>
   <?php endforeach; ?>
</ul> 
```

如果您必须测试，`getIncludeInMenu()`那么您必须加载每个类别

```
<ul>
   <?php foreach($loadCategory->getChildrenCategories() as $subcategory): ?>
    <?php $category = Mage::getModel('catalog/category')->load($subcategory->getId()); ?>
       <?php if ($category->getIsActive() && $category->getIncludeInMenu() ) : ?>
          <li>
              <a href="<?php echo $category->getUrl(); ?>"><?php echo $category->getName(); ?></a>
          </li>
      <?php endif; ?>
   <?php endforeach; ?>
</ul> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T12:01:26.757

事实证明，问题不在于模板文件，而在于布局。在catalog.xml 将其放置到位后，扩展正在删除左侧导航块，因此对我的catalog.xml 的更改无效。

# dust.js - dust.js 对象打印

> ID：13288372
> 
> 赞同：3
> 
> 时间：2012-11-08T11:40:15.183
> 
> 标签：dust.js

是否可以在不知道其属性的情况下打印对象？我正在尝试调试为什么某个对象的属性无法在视图中访问。

```
{#object}
  {attr}
{/object} 
```

在上述示例的情况下，不会打印任何内容而不是 attr 值。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-08T17:43:15.543

尝试使用 contextDump[助手](https://github.com/linkedin/dustjs-helpers)。

```
{#object}
  {@contextDump/}
{/object} 
```

这是一个例子：http: [//jsfiddle.net/smfoote/8UfJL/](http://jsfiddle.net/smfoote/8UfJL/)

# php - 如何从新增加的 id PHP 的 sql 中获取值

> ID：13288375
> 
> 赞同：1
> 
> 时间：2012-11-08T11:40:32.280
> 
> 标签：php, mysql, sql

我将首先向您展示代码，这样更容易讨论。

```
 $message = $_GET['r'];
    $message = str_replace("%20", " ", $message);
    echo $message;

    mysql_query("INSERT INTO `uniform` (`note`,`cadetID) 
    VALUES ('$message','$cadet')");

    $query = mysql_query("SELECT `uniformID` FROM `cadets` WHERE id = '$cadet'");
    while ($row = mysql_fetch_array($query)) {
      $uniformA = $row['uniformID'];
    }

    if($uniformA == "0"){
      mysql_query("UPDATE `cadets` SET `uniformID` = '" .  ."'
      WHERE id = '$cadet'");
    } 
```

暂时不用担心消毒。

我到了这条线：

```
mysql_query("UPDATE `cadets` SET `uniformID` = '" .  ."' WHERE id = '$cadet'"); 
```

并意识到我需要 sql 插入的 ID

```
mysql_query("INSERT INTO `uniform` (`note`,`cadetID) VALUES ('$message','$cadet')"); 
```

有没有一种从数据库中获取新增加的 ID 的有效方法？表结构如下：

`cadet(id[primary key, auto increment],...,uniformID)`

`uniform(id[prim key, auto inc], note, cadetID)`

数据：

`Cadet: 1,...,[1,2,3]`<- [] 中的所有内容都在 cadetID 中，数组由 ',' 分隔

`Uniform: 1, need a new blahh blahh, 1`

`Uniform: 2, new shoes needed, 1`

等等。

所以，在急诊室里，一个学员可以有很多统一的身份证。

**TL;DR**我需要将新 ID 存储在数据库中（由 SQL db 自动递增）`insert into`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T11:45:16.347

我建议您将其更改为 PDO 并像这样简单地访问它：

```
$query = "INSERT INTO `uniform` ( `note`, `cadetID` ) VALUES ( ?, ? )";
$params = array( $message, $cadet );

$stmt = $db->prepare( $query );
$stmt->execute( $params );

$last_id = $db->lastInsertId(); 
```

这是很好的教程以及如何做到这一点：[http ://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)

但是在您的情况下，您可以使用这样的查询（尽管它不安全）：

```
SELECT LAST_INSERT_ID(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T11:46:00.677

MySQL 存储每个会话/连接的最后一个 auto_increment 值。您可以在客户端（即您的 php 脚本）端获取此值，也可以通过 LAST_INSERT_ID() 函数在服务器端（即 MySQL）简单地使用它

看

*   [https://dev.mysql.com/doc/refman/5.5/en/information-functions.html#function_last-insert-id](https://dev.mysql.com/doc/refman/5.5/en/information-functions.html#function_last-insert-id)
*   [http://docs.php.net/function.mysql-insert-id](http://docs.php.net/function.mysql-insert-id)
*   [http://docs.php.net/pdo.lastinsertid](http://docs.php.net/pdo.lastinsertid)

自包含示例（使用 PDO - 无论如何你都想研究它;-)）

```
<?php
$pdo = new PDO('mysql:host=localhost;dbname=test;charset=utf8', 'localonly', 'localonly');
$pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
$pdo->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);
setup($pdo);

$stmtUniform = $pdo->prepare('INSERT INTO so_uniforms (labelid) VALUES (?)');
$stmtAssignToCadet = $pdo->prepare('
  UPDATE
    so_cadets
  SET
    uniform_id=LAST_INSERT_ID()
  WHERE
    id=?
');

// add uniform and assign to cadet #1
$stmtUniform->execute( array('uniform1') );
$stmtAssignToCadet->execute( array(1) );

// add uniform and assign to cadet #3
$stmtUniform->execute( array('uniform2') );
$stmtAssignToCadet->execute( array(3) );

// add uniform and assign to cadet #4
$stmtUniform->execute( array('uniform3') );
$stmtAssignToCadet->execute( array(4) );

// show cadets<->uniforms
$query = '
    SELECT
        c.id, u.labelid
    FROM
        so_cadets as c
    LEFT JOIN
        so_uniforms as u
    ON
        c.uniform_id = u.id
';

foreach( $pdo->query($query, PDO::FETCH_ASSOC) as $row ) {
    echo join(', ', $row), "\n";
}

// boilerplate
function setup($pdo) {
    $pdo->exec('
        CREATE TEMPORARY TABLE so_cadets (
            id int auto_increment,
            name varchar(32),
            uniform_id int default 0,
            primary key(id)
        )
    ');

    $pdo->exec('
        CREATE TEMPORARY TABLE so_uniforms (
            id int auto_increment,
            labelid varchar(32),
            primary key(id),
            unique key(labelid)
        )
    ');

    $stmt = $pdo->prepare('INSERT INTO so_cadets (name) VALUES (?)');
    foreach( range('A','F') as $c ) {
        $stmt->execute( array('cadet'.$c));
    }
} 
```

印刷

```
1, uniform1
2, 
3, uniform2
4, uniform3
5, 
6, 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T11:50:16.107

您还可以使用`mysqli`函数

```
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$query = "INSERT INTO `uniform` (`note`,`cadetID) VALUES ('$message','$cadet')";
$mysqli->query($query);

echo $mysqli->insert_id; //echoes the newly incremented id 
```

# javascript - Web 音频 API 事件是否在单独的线程中运行？

> ID：13288380
> 
> 赞同：6
> 
> 时间：2012-11-08T11:40:55.090
> 
> 标签：javascript, html, web-audio-api

我对ScriptProcessorNode***的******onaudioprocess***（直到最近称为*JavaScriptNode*）特别感兴趣。它是一个事件侦听器，定期调用以进行音频处理。它是否在单独的线程中运行？

 **我想将数据提供给循环缓冲区并在此回调之外处理它，这样我就不会占用 CPU。我可以使用网络工作者进行异步处理，但是在不同线程的情况下，我需要一个不同的环形缓冲区实现。

有没有办法测试这个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T00:13:08.620

所有的 JavaScript 都是单线程的，同步执行的。任何异步操作都是通过事件完成的，这些事件将它们的处理程序添加到任务队列中——在当前任务完成时执行。

要使用单独的线程，您需要一个像 WebWorkers 这样的环境——每个线程都有自己的执行上下文（全局范围）和任务队列；它们之间的通信是通过事件完成的。

由于`onaudioprocess`处理程序似乎与 DOM 位于同一范围内，因此它不太可能在自己的线程中运行。如果您确实有一个计算密集型任务导致您的页面无响应，您应该使用一个 WebWorker 来提供音频事件：

```
myScriptProcessorNode.onaudioprocess = myWebWorker.postMessage; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-04T19:44:02.840

使用 Bergi 的解决方案，您将遇到[结构化克隆算法](https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API/Structured_clone_algorithm)无法复制 audioProcessingEvent 中的只读参数的问题。您需要做的是从可克隆的事件中分解出您需要的部分，并将它们以不同的数据结构传递给您的工作人员，如下所示：

```
_onAudioProcess(audioProcessingEvent) {
  const {inputBuffer, outputBuffer} = audioProcessingEvent;
  // The output buffer contains the samples that will be modified and
  // eventually played, so we need to keep a reference to it.
  this._outputBuffer = outputBuffer;
  const numChannels = inputBuffer.numberOfChannels;

  const inputChannels =
    Array.from({length: numChannels}, (i) => {
      return inputBuffer.getChannelData(i);
    });

  this._worker.postMessage({
    command: 'DO_STUFF',
    inputChannels: inputChannels,
  });
} 
```

您还需要访问 setMessageHandler 中对 outputBuffer 的引用，以便将处理后的数据复制回最终由用户播放。**

# ios - 选择语句极慢

> ID：13288383
> 
> 赞同：0
> 
> 时间：2012-11-08T11:41:06.680
> 
> 标签：ios, sqlite

我正在创建 4 个表，然后从它们中进行选择。选择对于前 3 个选择语句非常有效，但第 4 个在 iPhone 模拟器上大约需要 10 秒，在 sqlite3 控制台上大约需要 5 秒。我在 iPhone 模拟器上也得到 0 个结果，但在控制台上得到 1 个结果。但这是我解决了性能问题后想要解决的问题。

我阅读了一些关于索引以及它们如何提高性能的内容，但我不知道如何在我的代码中实现它们。

```
sql0 = [[NSString alloc]initWithFormat:@"
create table v%i
as select id_produkt
from v%i natural join produkt_eigenschaft 
where id_eigenschaft = 
(select id_eigenschaft from eigenschaft where at = '%@')",counter,counter-1,selectedStringItem]; 
```

之后：

```
NSString *sqleig = [[NSString alloc]initWithFormat:@"
select at 
from eigenschaft 
where id_eigenschaft IN 
(select distinct id_eigenschaft
from produkt_eigenschaft
where id_produkt IN (select * from v%i)) 
AND rubrik = '%i'",counter-1, [sender tag] + 1]; 
```

为什么这条语句执行得这么慢？我该如何解决？提前致谢。

编辑：解释查询计划和 .schema

```
explain query plan create table v3 as select id_produkt from v2 natural join produkt_eigenschaft where id_eigenschaft = (select id_eigenschaft from eigenschaft where at = '101-170');
0|0|1|SCAN TABLE produkt_eigenschaft (~100000 rows)
0|0|0|EXECUTE SCALAR SUBQUERY 1
1|0|0|SEARCH TABLE eigenschaft USING AUTOMATIC COVERING INDEX (at=?) (~7 rows)
0|1|0|SEARCH TABLE v2 USING AUTOMATIC COVERING INDEX (id_produkt=?) (~7 rows)

explain query plan select at from eigenschaft where id_eigenschaft IN (select distinct id_eigenschaft from produkt_eigenschaft where id_produkt IN (select * from v3)) AND rubrik = '5';
0|0|0|SCAN TABLE eigenschaft (~10000 rows)
0|0|0|EXECUTE LIST SUBQUERY 1
1|0|0|SCAN TABLE produkt_eigenschaft (~100000 rows)
1|0|0|EXECUTE LIST SUBQUERY 2
2|0|0|SCAN TABLE v3 (~1000000 rows)
1|0|0|USE TEMP B-TREE FOR DISTINCT

CREATE TABLE eigenschaft (id_eigenschaft integer,rubrik integer,en text,at text,ba text,bg text,hr text,cz text,hu text,pl text,ro text,ru text,rs text,sk text,si text);
CREATE TABLE farbe (id_farbe integer,hexcode text,farbton integer,farbname text);
CREATE TABLE produkt (id_produkt integer,code text,pdf_link text,image_link text,image_small blob,link text,en text,at text,ba text,bg text,hr text,cz text,hu text,pl text,ro text,ru text,rs text,sk text,si text,active integer);
CREATE TABLE produkt_eigenschaft (id_produkt integer,id_eigenschaft integer);
CREATE TABLE produkt_farbe (id_produkt integer,id_farbe integer);
CREATE TABLE produkt_surface (id_surface integer,id_produkt integer,image_link text);
CREATE TABLE produkt_text (id_produkt integer,en text,at text,ba text,bg text,hr text,cz text,hu text,pl text,ro text,ru text,rs text,sk text,si text);
CREATE TABLE rubrik (id integer,en text,at text,ba text,bg text,hr text,cz text,hu text,pl text,ro text,ru text,rs text,sk text,si text);
CREATE TABLE v0(id_produkt INT);
CREATE TABLE v1(id_produkt INT);
CREATE TABLE v2(id_produkt INT);
CREATE TABLE v3(id_produkt INT); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T13:46:20.417

用索引解决了它。

```
create index i on produkt_eigenschaft (id_eigenschaft) 
```

在选择之前调用一次

# jquery - 限制 jqgrid 中的高级搜索

> ID：13288384
> 
> 赞同：1
> 
> 时间：2012-11-08T11:41:08.223
> 
> 标签：jquery, jqgrid

有什么方法可以限制高级搜索，比如让用户只能在四个或更少的条件下搜索。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T10:37:14.887

实现该要求的最简单方法是根据规则数量禁用/启用搜索对话框的“添加”按钮。您可以在[afterRedraw](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:singe_searching#options)回调中进行更改。如果您有要求作为所有网格的共同要求，您可以`afterRedraw`在`$.jgrid.search`. 代码可能如下所示：

```
$.extend($.jgrid.search, {
    recreateFilter: true,
    multipleSearch: true,
    multipleGroup: true, // remove the setting if you don't need grouping
    afterRedraw: function () {
        var needBeDisabled = $(this).find(".columns").length >= 4;
        $(this).find(".add-rule,.add-group").each(function() {
            $(this).prop("disabled", needBeDisabled);
        });
    }
}); 
```

请参阅我将规则数量限制为最多两个[的演示：](http://www.ok-soft-gmbh.com/jqGrid/RestrictNumberOfSearchingRules.htm)

![在此处输入图像描述](../Images/60bc01408ef2a50cde999a8e95a0d917.png)

# java - Java删除监听器，当回调被执行时

> ID：13288389
> 
> 赞同：0
> 
> 时间：2012-11-08T11:41:18.693
> 
> 标签：java, events

当我执行某些事件时，我只是不知道如何删除侦听器。我在使用 websockets 时遇到了一些泄漏问题，这可能会解决它。

```
final WebSocket w = asyncHttpClient.prepareGet(url)
    .execute(new WebSocketUpgradeHandler.Builder().build())
    .get();

w.addWebSocketListener(new WebSocketTextListener() {

    public void onMessage(String message) {
        listener.onMessage(responseMessage);
        // Here is the place I want to do my w.removeWebSocketListener(l);
    }

    @Override
    public void onFragment(String s, boolean b) {
    }

    public void onOpen(WebSocket websocket) {
    }

    @Override
    public void onClose(WebSocket webSocket) {
    }

    @Override
    public void onError(Throwable throwable) {
    }

}); 
```

问题是当我创建`WebSocketTextListener lis = new ....`并传入时，一个对象需要另一个对象，而另一个对象依赖于此，现在我仍然可以做我想做的事。
看起来很简单，但无法弄清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T11:48:26.453

通常可以使用`removeXXXListener`方法删除事件侦听器。但它要求您提供与参数*完全相同的*事件侦听器实例。您可以存储事件侦听器，然后使用相同的引用将其删除。但是由于您在`onMessage`消息中已经在事件侦听器的范围内，因此使用`this`应该可以工作。

尝试类似的东西

```
listener.onMessage(responseMessage);
// Here is the place I want to do my w.removeWebSocketListener(l);
w.removeWebSocketListener(this); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T08:38:35.677

在匿名内部类中使用“this”是解决问题的方法。但是，为了可测试性和更好的理解，最好重构代码，避免使用匿名类。

# ios - 在 mergeChangesFromContextDidSaveNotification 之后的 NSFetchedResultsController 委托方法中的 SIGABRT

> ID：13288392
> 
> 赞同：1
> 
> 时间：2012-11-08T11:41:33.980
> 
> 标签：ios, core-data

**好事实：**

*   我从服务器下载数据，并通过 Core Data 线程限制保存数据，当后台 MOC 被保存时，主 MOC 被合并。
*   所有的保存操作都正常
*   MOC的合并也没有任何问题

**我正在寻找的错误：**

*   当我的带有 NSFetchedResultsController 的 UITableView 处于活动状态（即在屏幕上）并且正在保存时，应用程序崩溃并出现 SIGABRT，它将我带到 AppDelegate 中的 mergeChangesFromContextDidSaveNotification 行。
*   最奇怪的是，当 FRC 的委托为 nil 时，或者当它是我的视图控制器但我没有实现任何 FRC 委托方法时，不会发生崩溃并且我没有任何问题. 但是当我实现任何委托方法（甚至是空的，没有一行代码）时，应用程序会因相同的错误而崩溃。**这意味着这些方法甚至没有被触发，问题不在于这些方法内部的代码**。
*   最奇怪的第 2 部分**（检查下面的更新 2）**：崩溃发生在 a`[__NSCFNumber length]: unrecognized selector sent to instance`并且我在我的 CoreDataManager 中也没有在我的 AppDelegate 类中调用任何“长度”属性

**证人：控制台**

```
<CoreDataManager.m:(338)> Saved data from server
<AppDelegate.m:(352)> Will merge
<CoreDataManager.m:(338)> Saved data from server
<AppDelegate.m:(355)> Did merge
<CoreDataManager.m:(338)> Saved data from server
<AppDelegate.m:(352)> Will merge
<AppDelegate.m:(355)> Did merge
<CoreDataManager.m:(338)> Saved data from server
<CoreDataManager.m:(338)> Saved data from server
<CoreDataManager.m:(338)> Saved data from server
<MyTableViewController.m:(134)> Fetched results controller did fetch 
<CoreDataManager.m:(338)> Saved data from server
<CoreDataManager.m:(338)> Saved data from server
<CoreDataManager.m:(338)> Saved data from server
<AppDelegate.m:(352)> Will merge
<CoreDataManager.m:(338)> Saved data from server
[__NSCFNumber length]: unrecognized selector sent to instance 0x13318050 
```

**一些代码 - 合并 MOC**

```
- (void)managedObjectContextDidSave:(NSNotification *)notification
{
    NSManagedObjectContext *sender = (NSManagedObjectContext *)[notification object];

    if ((sender != self.managedObjectContext) &&
        (sender.persistentStoreCoordinator == self.managedObjectContext.persistentStoreCoordinator))
    {
        dispatch_async(dispatch_get_main_queue(), ^{
            DebugLog(@"Will merge");
            [self.managedObjectContext mergeChangesFromContextDidSaveNotification:notification];
            DebugLog(@"Did merge");
        });
    }
} 
```

**更新 1**

按照 Cocoanetics 的提示，我创建了一个 NSNumber 类别来检查谁在调用`length`. 我得到了您在下面看到的内容，并且**[__NSCFNumber _fastCStringContents:]: unrecognized selector sent to instance**发生了崩溃。

![在此处输入图像描述](../Images/1bc9cc74c9b990edad25373a78ca9a40.png)

**更新 2** 启用僵尸没有帮助 =(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T12:28:26.377

确保您只观察来自其他 MOC 的通知。如果你保存在那里，这会触发另一个这样的通知，并且你可能会进入一个无限循环，在一次或两次迭代后失败，因为一个对象已被 ARC 释放。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T12:43:19.283

你的听起来像是内存问题。检查您的 ARC 所有权限定符并启用 NSZombies。启用 NSZombies 将帮助您缩小过早释放的对象。

当您启用僵尸时，您将看到“发送到已释放实例的消息”。检查哪个对象过早释放并更新您的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T14:36:53.403

好吧，经过几个月和几个小时，我终于找到了解决方案。它有效，我很想听听一些关于为什么的意见。

所以，正如我所说，节省工作 100%，以及合并通知。如果我将 NSFetchedResultsController 委托设置为 nil，则没有问题。但是，将委托设置为我的 UIViewController，导致应用程序崩溃。

我认为可能是因为我的代码触发了委托方法。但该应用程序甚至在此之前就崩溃了。因此，我按照 Cocoanetics 的提示创建了一个类别并尝试找出是谁在调用`length`NSNumber 对象的方法。在那之后，我看到 NSPredicate`- (BOOL)evaluateWithObject:(id)object;`在崩溃之前正在调用。同样，我做了一个类别来覆盖它：

```
@interface NSPredicate (PractiPredicate)
- (BOOL)evaluateWithObject:(id)object;
@end

@implementation NSPredicate (PractiPredicate)

- (BOOL)evaluateWithObject:(id)object
{
    NSLog(@"Evaluate was called. Object class %@", NSStringFromClass([object class]));
    MyManagedObject *myManagedObject = object;
    NSLog(@"Is fault? %d", myManagedObject.isFault);
    NSLog(@"myManagedObject changed and already have propertyA? %d", myManagedObject.propertyA != nil);
    return YES;
}

@end 
```

因此，令我惊讶的是，它起作用了，并生成了以下日志：

> 评估被调用。对象类 MyManagedObject
> 
> 是错吗？0
> 
> myManagedObject 已更改且已拥有 propertyA？1

我决定打印“是错吗？” 因为我认为这个混乱与 NSManagedObject 故障有关，但是，对于它打印的内容，它不是。

征求意见的问题：您认为这里可能会产生这个问题的原因是什么？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T12:46:16.023

很可能问题不在于您发布的代码，而在于您如何处理获取的结果控制器委托中的更改。这些只是由合并触发。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-19T05:06:01.450

我遇到了同样的问题，就我而言，我发现崩溃的原因是一个不正确的谓词。我有一个这样的谓词：

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"attribute > 0"]; 
```

其中属性是一个字符串。我将其更正为：

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"attribute.length > 0"]; 
```

现在，我的代码运行良好。确保检查代码中的所有谓词，因为这也可能是导致此崩溃的原因。

# java - 日志文件为空 (log4j)

> ID：13288393
> 
> 赞同：1
> 
> 时间：2012-11-08T11:41:41.670
> 
> 标签：java, log4j

日志信息显示在控制台上，但不在日志文件上（文件已创建但未添加内容）。怎么了？

**资源：**

```
package mytest;

import java.util.logging.Level; import java.util.logging.Logger;

import org.apache.log4j.PropertyConfigurator;

public class Main {     
    public static void main(String[] args) {        
        Logger log  = Logger.getLogger(Main.class.getName());
        log.setLevel(Level.ALL);        
        log.info("A line)");
        PropertyConfigurator.configure("log.properties");       
        log.info("Another line");   
    } 
} 
```

**log.properties 文件：**

```
log4j.rootLogger=debug, stdout, R

log4j.appender.stdout=org.apache.log4j.ConsoleAppender
log4j.appender.stdout.layout=org.apache.log4j.PatternLayout

log4j.appender.stdout.layout.ConversionPattern=%5p [%t] (%F:%L) - %m%n

log4j.appender.R=org.apache.log4j.RollingFileAppender
log4j.appender.R.File=example.log

log4j.appender.R.MaxFileSize=100KB

log4j.appender.R.layout=org.apache.log4j.PatternLayout
log4j.appender.R.layout.ConversionPattern=%p %t %c - %m%n 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T11:57:39.477

You are mix things, java.util.logging and log4j.

You can try to use commonsLoggin with log4j

[http://commons.apache.org/logging/guide.html#Quick%20Start](http://commons.apache.org/logging/guide.html#Quick%20Start)

```
import org.apache.commons.logging.Log;
import org.apache.commons.logging.LogFactory;
...
Log log = LogFactory.getLog(getClass()); 
```

# c++ - unique_ptr 和多态性

> ID：13288394
> 
> 赞同：17
> 
> 时间：2012-11-08T11:41:42.477
> 
> 标签：c++, c++11, smart-pointers

我有一些当前使用原始指针的代码，我想更改为智能指针。这有助于以各种方式清理代码。无论如何，我有返回对象的工厂方法以及调用者管理它们的责任。所有权不共享，所以我`unique_ptr`认为是合适的。我返回的对象通常都派生自一个基类，`Object`.

例如，

```
class Object { ... };
class Number : public Object { ... };
class String : public Object { ... };

std::unique_ptr<Number> State::NewNumber(double value)
    {
        return std::unique_ptr<Number>(new Number(this, value));
    }

std::unique_ptr<String> State::NewString(const char* value)
    {
        return std::unique_ptr<String>(new String(this, value));
    } 
```

返回的对象经常需要传递给另一个函数，该函数对类型对象`Object`（基类）进行操作。没有任何智能指针，代码是这样的。

```
void Push(const Object* object) { ... } // push simply pushes the value contained by object onto a stack, which makes a copy of the value
Number* number = NewNumber(5);
Push(number); 
```

在将此代码转换为使用时`unique_ptrs`，我遇到了多态性问题。最初我决定简单地更改`Push`to use的定义`unique_ptrs`，但这会在尝试使用派生类型时产生编译错误。我可以将对象分配为基本类型，例如

```
std::unique_ptr<Object> number = NewNumber(5); 
```

并将它们传递给`Push`- 这当然有效。但是我经常需要在派生类型上调用方法。最后我决定对`Push`指向存储的对象的指针进行操作`unique_ptr`。

```
void Push(const Object* object) { ... }
std::unique_ptr<Object> number = NewNumber(5);
Push(number.get()); 
```

现在，发帖的原因。我想知道这是否是解决我遇到的问题的正常方法？对对象本身`Push`进行操作会更好吗？`unique_ptr`如果是这样，如何解决多态性问题？我会假设简单地投射 ptrs 是行不通的。需要从智能指针获取底层指针是否很常见？

谢谢，对不起，如果问题不清楚（请告诉我）。

编辑：我认为我的推送功能有点模棱两可。它复制底层值，实际上并不修改或存储输入对象。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-08T12:12:48.543

> 最初我决定简单地将 Push 的定义也更改为使用 unique_ptrs，但这会在尝试使用派生类型时产生编译错误。

您可能没有正确处理唯一性。

```
void push(std::unique_ptr<int>);
int main() {
    std::unique_ptr<int> i;
    push(i); // Illegal: tries to copy i.
} 
```

如果这个编译，它会轻易打破 的不变量`unique_ptr`，只有一个`unique_ptr`拥有一个对象，因为两者`i`和本地参数都`push`将拥有那个`int`，所以它是非法的。`unique_ptr`只能*移动*，不可复制。它与派生到基础的转换无关，`unique_ptr`完全正确处理。

如果`push`拥有该对象，则用于`std::move`将其移动到那里。如果不是，则使用原始指针或引用，因为这就是您用于非拥有别名的方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-08T12:11:12.197

好吧，如果您的函数对（指向）对象本身进行操作并且不需要它的地址，也不需要任何所有权，而且，我猜，总是需要一个有效的对象（传递 a 时失败`nullptr`），为什么他们需要指针有吗？

正确执行并让他们参考：

```
void Push(const Object& object) { ... } 
```

然后，原始指针和智能指针的调用代码看起来完全相同：

```
auto number = NewNumber(5);
Push(*number); 
```

**编辑：**但当然，无论是使用引用还是指针，如果它不获取传递对象的所有权（这会使其从传递的指针中窃取所有权）`Push`，请不要使用。`std::unique_ptr`或者一般来说，当指向的对象不被拥有时，不要使用拥有指针，`std::shared_ptr`在这方面没有什么不同，并且如果没有所有权可以作为`std::unique_ptr`for的参数的选择，则更糟糕。`Push``Push`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-08T12:08:51.497

如果`Push`不占用所有权，它可能应该使用引用而不是指针。而且很可能是`const`一个。所以你会有

```
Push(*number); 
```

现在，这显然只有在 Push 不会将指针保留在其返回后的任何位置时才有效。如果是这样，我怀疑您应该首先尝试重新考虑所有权。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-10T13:52:12.403

这是一个使用唯一指针的多态示例：

```
vector<unique_ptr<ICreature>> creatures;

creatures.emplace_back(new Human);
creatures.emplace_back(new Fish);

unique_ptr<vector<string>> pLog(new vector<string>());

for each (auto& creature in creatures)
{
    auto state = creature->Move(*pLog);
} 
```

# android - NFC标签写入应用程序不断崩溃

> ID：13288397
> 
> 赞同：0
> 
> 时间：2012-11-08T11:41:49.563
> 
> 标签：android, mobile, nfc

不确定我的应用程序是否能够编写我从应用程序用户那里获得的信息。当我按下写入标签按钮时，应用程序不断崩溃。我通常有 5 个`EditText`用于用户输入。然后我将使用这些值并将其制成一个字符串以写入 NFC 标签。（然后将使用单独的应用程序读取此信息，然后将字符串再次分解为不同的组件）。

```
 @Override
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    mNfcAdapter = NfcAdapter.getDefaultAdapter(this);

    setContentView(R.layout.write_tag1);

    findViewById(R.id.nfc_write_confirm).setOnClickListener(mTagWriter);
    cancel3Button = (Button)findViewById(R.id.nfc_write_cancel);
    foodName = (EditText)findViewById(R.id.nfc_food_name);
    protValue = (EditText)findViewById(R.id.nfc_protein_value);
    carbValue = (EditText)findViewById(R.id.nfc_carb_value);
    fatValue = (EditText)findViewById(R.id.nfc_fat_value);
    energyValue = (EditText)findViewById(R.id.nfc_energy_value);
    allValue = (TextView)findViewById(R.id.nfc_all_value);

    IntentFilter tagDetected = new IntentFilter(NfcAdapter.ACTION_TAG_DISCOVERED);
    mWriteTagFilters = new IntentFilter[] { 
            tagDetected 
            };

    cancel3Button.setOnClickListener(new Button.OnClickListener(){

        public void onClick(View v) {

            finish();

        }
      });

       }      

         @Override
        protected void onNewIntent(Intent intent) {

        if (mWriteMode && NfcAdapter.ACTION_TAG_DISCOVERED.equals(intent.getAction())) {
            Tag detectedTag = intent.getParcelableExtra(NfcAdapter.EXTRA_TAG);
            writeTag(getNoteAsNdef(), detectedTag);
        }

    }

    private View.OnClickListener mTagWriter = new View.OnClickListener() {

    public void onClick(View v) {
    // Write to a tag for as long as the dialog is shown.
    enableTagWriteMode();

    new AlertDialog.Builder(NFCWriteTag1.this).setTitle("Touch tag to write")
            .setOnCancelListener(new DialogInterface.OnCancelListener() {

                public void onCancel(DialogInterface dialog) {
                    disableTagWriteMode();
                }
            }).create().show();
    }
    };

    private NdefMessage getNoteAsNdef() {
String a, b, c, d, e;
a = (foodName.getText() + ",").toString();
b = (protValue.getText() + ",").toString();
c = (carbValue.getText() + ",").toString();
d = (fatValue.getText() + ",").toString();
e = energyValue.getText().toString();
allValue.setText(a+b+c+d+e);
    byte[] textBytes = allValue.getText().toString().getBytes();
    NdefRecord textRecord = new NdefRecord(NdefRecord.TNF_MIME_MEDIA, "text/plain".getBytes(),
        new byte[] {}, textBytes);
     return new NdefMessage(new NdefRecord[] {
    textRecord
    });
    }

    private void enableTagWriteMode() {
    mWriteMode = true;
    IntentFilter tagDetected = new IntentFilter(NfcAdapter.ACTION_TAG_DISCOVERED);
    mWriteTagFilters = new IntentFilter[] {
    tagDetected
    };
    mNfcAdapter.enableForegroundDispatch(this, null, mWriteTagFilters, null);
     }

    private void disableTagWriteMode() {
    mWriteMode = false;
    mNfcAdapter.disableForegroundDispatch(this);
    }

    boolean writeTag(NdefMessage message, Tag tag) {
    int size = message.toByteArray().length;

    try {
    Ndef ndef = Ndef.get(tag);
    if (ndef != null) {
        ndef.connect();

        if (!ndef.isWritable()) {
            toast("Tag is read-only.");
            return false;
        }
        if (ndef.getMaxSize() < size) {
            toast("Tag capacity is " + ndef.getMaxSize() + " bytes, message is " + size
                    + " bytes.");
            return false;
        }

        ndef.writeNdefMessage(message);
        toast("Wrote message to pre-formatted tag.");
        return true;
    } else {
        NdefFormatable format = NdefFormatable.get(tag);
        if (format != null) {
            try {
                format.connect();
                format.format(message);
                toast("Formatted tag and wrote message");
                return true;
            } catch (IOException e) {
                toast("Failed to format tag.");
                return false;
            }
        } else {
            toast("Tag doesn't support NDEF.");
            return false;
        }
    }
    } catch (Exception e) {
    toast("Failed to write tag");
    }

    return false;
    }

    private void toast(String text) {
    Toast.makeText(this, text, Toast.LENGTH_SHORT).show();
    }

    }` 
```

日志猫：

```
11-08 18:29:18.745: E/AndroidRuntime(23252): FATAL EXCEPTION: main
11-08 18:29:18.745: E/AndroidRuntime(23252): java.lang.NullPointerException
11-08 18:29:18.745: E/AndroidRuntime(23252):    at android.nfc.NfcAdapter.enableForegroundDispatch(NfcAdapter.java:1079)
11-08 18:29:18.745: E/AndroidRuntime(23252):    at com.nfc.tag.writing.mealplan.NFCWriteTag1.enableTagWriteMode(NFCWriteTag1.java:128)
11-08 18:29:18.745: E/AndroidRuntime(23252):    at com.nfc.tag.writing.mealplan.NFCWriteTag1.access$0(NFCWriteTag1.java:122)
11-08 18:29:18.745: E/AndroidRuntime(23252):    at com.nfc.tag.writing.mealplan.NFCWriteTag1$1.onClick(NFCWriteTag1.java:93)
11-08 18:29:18.745: E/AndroidRuntime(23252):    at android.view.View.performClick(View.java:4211)
11-08 18:29:18.745: E/AndroidRuntime(23252):    at android.view.View$PerformClick.run(View.java:17267)
11-08 18:29:18.745: E/AndroidRuntime(23252):    at android.os.Handler.handleCallback(Handler.java:615)
11-08 18:29:18.745: E/AndroidRuntime(23252):    at android.os.Handler.dispatchMessage(Handler.java:92)
11-08 18:29:18.745: E/AndroidRuntime(23252):    at android.os.Looper.loop(Looper.java:137)
11-08 18:29:18.745: E/AndroidRuntime(23252):    at android.app.ActivityThread.main(ActivityThread.java:4898)
11-08 18:29:18.745: E/AndroidRuntime(23252):    at java.lang.reflect.Method.invokeNative(Native Method)
11-08 18:29:18.745: E/AndroidRuntime(23252):    at java.lang.reflect.Method.invoke(Method.java:511)
11-08 18:29:18.745: E/AndroidRuntime(23252):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1006)
11-08 18:29:18.745: E/AndroidRuntime(23252):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:773)
11-08 18:29:18.745: E/AndroidRuntime(23252):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T13:53:31.197

你在打电话

```
mNfcAdapter.enableForegroundDispatch(this, null, mWriteTagFilters, null); 
```

缺少第二个论点。[例如](http://code.google.com/p/ndef-tools-for-android/source/browse/ndeftools-boilerplate/src/org/ndeftools/util/NfcDetector.java)尝试

```
nfcPendingIntent = PendingIntent.getActivity(this, 0, new Intent(this, this.getClass()).addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP), 0) 
```

然后

```
mNfcAdapter.enableForegroundDispatch(this, nfcPendingIntent, mWriteTagFilters, null); 
```

[另请参阅此处](http://code.google.com/p/ndef-tools-for-android/downloads/list)的样板项目。

# vb.net - VB.net 无法将 Gmap 控件添加到窗体

> ID：13288400
> 
> 赞同：1
> 
> 时间：2012-11-08T11:41:56.537
> 
> 标签：vb.net

我使用 VS2012 并希望将地图与[GMap 一起](http://greatmaps.codeplex.com/downloads/get/67818)使用 但是当我想添加 GmapControl 以形成时看到此错误：

[错误 http://www.angrypic.ir/image.php?id=1FDE_509B9A2C](http://www.angrypic.ir/image.php?id=1FDE_509B9A2C)

# javascript - 无法在同一单元格的第二个文本框中设置值

> ID：13288405
> 
> 赞同：1
> 
> 时间：2012-11-08T11:42:37.380
> 
> 标签：javascript, gridview, cell

我有一个 javascript 附加到 GridView 的两个单元格中的两个文本框，该 GridView 在键入时自动填充同一单元格中的另外两个文本框。

它适用于第一个文本框，但在第二个文本框中输入时出现“未捕获的类型错误：无法设置未定义的属性‘值’”错误。

这是我的javascript：

```
function Sync(obj, idx) {
    var cell = obj.parentNode;
    cell.parentNode.cells[cell.cellIndex + 2].getElementsByTagName("input")[idx].value = obj.value;
} 
```

网格视图：

```
<asp:TemplateField HeaderText="Country Code">
                                <EditItemTemplate>
                                    <asp:TextBox ID="txtCountryCode" runat="server" Text='<%# Eval("CountryCode") %>' OnKeyUp="javascript:Sync(this, 0);"></asp:TextBox>
                                    <br />
                                    <asp:RegularExpressionValidator ID="RegularExpressionValidator1" ControlToValidate="txtCountryCode" ValidationExpression="\d{1,3}" EnableClientScript="false" 
                                        ErrorMessage="The Country Code must be 1-3 numeric digits!" runat="server"
                                        ForeColor="Red" Font-Size="Smaller">
                                    </asp:RegularExpressionValidator>
                                </EditItemTemplate>
                                <ItemTemplate>
                                    <asp:Label ID="lblCountryCode" runat="server" Text='<%# Eval("CountryCode") %>'></asp:Label>
                                </ItemTemplate>
                                <FooterTemplate>
                                    <asp:TextBox ID="txtNewCountryCode" runat="server"></asp:TextBox>
                                    <br />
                                    <asp:RegularExpressionValidator ID="RegularExpressionValidator2" ControlToValidate="txtNewCountryCode" ValidationExpression="\d{1,3}" EnableClientScript="false" 
                                        ErrorMessage="The Country Code must be 1-3 numeric digits!" runat="server"
                                        ForeColor="Red" Font-Size="Smaller">
                                    </asp:RegularExpressionValidator>
                                </FooterTemplate>
                            </asp:TemplateField>
                            <asp:TemplateField HeaderText="Main Number">
                                <EditItemTemplate>
                                    <asp:TextBox ID="txtMainNumber" runat="server" Text='<%# Eval("MainNumber")%>' OnKeyUp="javascript:Sync(this, 1);"></asp:TextBox>
                                    <br />
                                    <asp:RegularExpressionValidator ID="RegularExpressionValidator3" ControlToValidate="txtMainNumber" ValidationExpression="\d{1,14}" EnableClientScript="false" 
                                        ErrorMessage="The Country Code must be 1-14 numeric digits!" runat="server"
                                        ForeColor="Red" Font-Size="Smaller">
                                    </asp:RegularExpressionValidator>
                                </EditItemTemplate>
                                <ItemTemplate>
                                    <asp:Label ID="lblMainNumber" runat="server" Text='<%# Eval("MainNumber")%>'></asp:Label>
                                </ItemTemplate>
                                <FooterTemplate>
                                    <asp:TextBox ID="txtNewMainNumber" runat="server"></asp:TextBox>
                                    <br />
                                    <asp:RegularExpressionValidator ID="RegularExpressionValidator4" ControlToValidate="txtNewMainNumber" ValidationExpression="\d{1,14}" EnableClientScript="false" 
                                        ErrorMessage="The Country Code must be 1-14 numeric digits!" runat="server"
                                        ForeColor="Red" Font-Size="Smaller">
                                    </asp:RegularExpressionValidator>
                                </FooterTemplate>
                            </asp:TemplateField>
                            <asp:TemplateField HeaderText="Phone">
                                <ItemTemplate>
                                    <asp:Label ID="lblPhone" runat="server" Text='<%# Eval("Phone") %>' Enabled="false"></asp:Label>
                                </ItemTemplate>
                                <EditItemTemplate>
                                    +
                                    <asp:TextBox ID="txtPhoneCountryCode" runat="server" Enabled="false" Text='<%# Eval("CountryCode") %>' Width="30px"></asp:TextBox>
                                    <asp:TextBox ID="txtPhoneMainNumber" runat="server" Enabled="false" Text='<%# Eval("MainNumber")%>' Width="100px"></asp:TextBox>
                                </EditItemTemplate>
                                <FooterTemplate>
                                    <asp:TextBox ID="txtNewPhone" runat="server" Enabled="false"></asp:TextBox>
                                </FooterTemplate>
                            </asp:TemplateField> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T13:32:18.383

`FooterTemplate`与您的文本框相关的`txtMainNumber`仅包含 1 个文本框`txtNewMainNumber`，但您尝试设置其不存在的第二个文本框，更改以下内容

```
OnKeyUp="javascript:Sync(this, 1);" 
```

和

```
OnKeyUp="javascript:Sync(this, 0);" 
```

# c# - 棱镜嵌入图像

> ID：13288411
> 
> 赞同：2
> 
> 时间：2012-11-08T11:43:07.703
> 
> 标签：c#, wpf, resources, prism

我有一个**名为**`xModule`. 我在其中有一个**图像**标记为`embedded resource`.

在我尝试的模块初始化内部：

```
string stFileName = "SmallIcon.png";
string stAssembly = "xModule"; // That's the full name of the assembly
//img.BeginInit();

Uri uri = new Uri(String.Format(@"/{0};component/Images/{1}", stAssembly , stFileName),
                  UriKind.Relative);
ImageSource imgSource = new BitmapImage(uri); 
```

在它到达断点的过程中`ImageSource imgSource =..`，似乎`ImageSource`找不到图像......

为什么？它出什么问题了？

我没有错误，引用了程序集。我在 Xaml 中做了类似的事情，它奏效了。还使用过：VS11、Unity

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T13:30:40.380

我认为您需要将图像标记为“资源”而不是“嵌入式资源”（ WPF ）

另请参阅：[C# 应用程序中的资源和嵌入式资源有什么区别？](https://stackoverflow.com/questions/1934826/whats-the-difference-between-a-resource-and-an-embedded-resource-in-a-c-sharp-a)

# c - 如何实现严格检查 getInt() 函数？

> ID：13288412
> 
> 赞同：1
> 
> 时间：2012-11-08T11:43:08.610
> 
> 标签：c

我编写了以下代码来从键盘获取整数。它将提示错误消息，直到您提供有效的整数值（负或正）。

一个条件是它必须检查每一个可能的测试用例

像：

```
-3.2 
5.0
984237.4329
0.343
.434
12344.
adfs34
233adds
3892710492374329
helloIamNotainteger 
```

对于所有这些测试，它都应该失败。它只会通过`int >=INT_MIN && int <=INT_MAX` 价值。

我的运行代码是：

```
#include<stdio.h>
#include<limits.h>

int min=INT_MIN;
int max=INT_MAX;

int main()
{
        char str[50],c; //I have taken size 50 please ignore this 
        int check;
 do
 {
        int flag=1,i=0,j=0,num=0;
        check=0;
        printf("Enter an Integer : ");
        while((c=getchar())!='\n')
                str[i++]=c;
        if(str[0] == '-')
        {
                flag = -1;
                j++;
        }
        for(;j<i;j++)
        {
                if(str[j] >= '0' && str[j] <= '9')
                        num=(str[j]-'0') + num*10;
                else
                        break;

        }
        if(j<i)
        {
          printf("Not an Integer, Please input an integer \n");
        }
        else if(num < min || num >max)
        {
          printf("Integer is out of range,Please input an integer \n");
        }
        else
        {
                num *=flag;
                printf("The given number is : %d\n",num);
                check=1;
        }
 }while(check == 0);
        return 0;

} 
```

一个例子：对于这样的值。
83429439803248832409 （它是整数，但由于 range 应该失败）但它通过并给出了一些其他整数值。

如何在我的代码中解决这个问题或实现更好的想法`getInt()`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T11:54:09.373

最简单的方法是使用标准库函数。

```
#include <limits.h>
#include <stdlib.h>

int getInt (const char *s)
{
    long int n = strtol (s, NULL, 10);

    if (n < INT_MIN || n > INT_MAX)
        /* handle overflows */
    else
        return (int) n;
} 
```

要处理其他错误，您可以使用几个条件。

```
#include <errno.h>

int getInt (const char *s, size_t size)
{
    const char *pEnd1 = s + size;
    char *pEnd2;
    long int n;

    errno = 0;

    n = strtol (s, &pEnd2, 10);

    if (n < INT_MIN || n > INT_MAX || errno != 0 || pEnd1 != pEnd2)
        /* error */
    else
        return (int) n;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T12:31:13.757

嘿，您正在尝试将大于 32768 的值存储到整数（非无符号）中。因此，当您这样做时，它将显示存储变量中存在的一些垃圾值。如您所知，c 中的整数有内存限制。像无符号类型的 int 数据类型可以存储 0 到 65535 之间的值。因此尝试存储更多的数字会导致问题。如果需要存储更大的数字，请尝试使用 long int 数据类型。也许它可能会有所帮助。但是该数据类型也有内存限制，其值接近 40 万或其他值。

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T13:36:12.450

虽然这更适合作为对*Kirilenko*良好检查解决方案的评论，但我的笔记会很长，所以我会将其发布为答案。

转换函数的主要问题是很难 ( `strtol()`) 甚至不可能 ( `atoi()`) 测试转换是否符合预期。

因此，当试图使事情变得更可靠（as `atoi()`）和更容易使用（as ）时，将使用*Kirilenko*`strtol()`之类的解决方案。

 *无论如何，如果转换中出现问题（从调用者的角度来看），*Omkant提供的方法仍然存在设计错误的问题。*

所以接口应该更好地像许多其他系统函数一样，将它们的结果作为函数值返回：

```
/* 
 * Tryies to convert the first 'size' characters of 's' to an 'int' and optionally 
 * writes it to '*result'.
 * 
 * Returns the number of characters converted or any qualified negative error code
 * on failure.
 */
int getInt(
  const char * s,  /* source string to try to be converted to an integer */
  size_z size, /* number of digits to be converted (shall not be > strlen(s)) */
  int * result /* optional reference to an int to place the conversion result in */
); 
```

并且，作为一个显着的副作用，`NULL`作为最后一个参数传递，一个能够简单地测试转换是否有效，此外，一个可以接收结果整数所需的位数。

* * *

然后仍然能够使用此转换函数，就好像它正在将其结果作为函数值返回一样，在某些情况下可能会很方便，可能需要使用以下宏：

```
GETINT(str, size, result, rc) \
  (rc = getInt(str, size, &result), result) 
```

用法：

```
char s[] = "42";
int rc = 0;
int i = GETINT(s, 2, i, rc);
if (rc)
  /* some error */
else
  /* use i */ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T13:44:22.473

一种简单的方法是将它们作为字符串进行比较。首先，请注意 32 位整数不能超过 10 位（和一个符号）。

```
int32_t get_int32()
{
    char input[13];
    char check[12];
    int32_t result;

    if (scanf("%12s", input) != 1)
        /* handle error */
    /* ignore rest of number if any */
    ungetc('x', stdin);
    scanf("%*s");

    /* if length is bigger than 11, error */
    if (strlen(input) > 11)
        /* handle error */

    if (sscanf(input, "%"SCNd32, &result) != 1)
        /* handle error */
    sprintf(check, "%"PRId32, result);

    if (strcmp(input, check) != 0)
        /* handle error */

    return result;
} 
```

请注意，`strlen`可以忽略该检查，并且`strcmp`会处理该检查。另请注意，如果您获得`input`足够`check`大（例如`25`），您可以安全地使用`int`，而不是`int32_t`因为您知道它不能超过 64 位（至少很多年）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-08T19:26:22.417

这是工作代码：请看这个，我没有这样做，`strtol`它满足所有条件并且只需要`int`

```
 #include<stdio.h>
    #include<limits.h>
    #include<string.h>

    int main()
    {
            int num;
            char str[500],c;
            int check;
            char max[12];
            char min[12];
            sprintf(max,"%d",INT_MAX);
            sprintf(min,"%d",INT_MIN);
     do
     {
            int flag=1,i=0,j=0;
            num=0;
            check=0;
            printf("Enter an Integer : ");
            while((c=getchar())!='\n')
                    str[i++]=c;
            str[i]='\0';
            if(str[0] == '-')
            {
                    flag = -1;
                    j++;
            }
            for(;j<i;j++)
            {
                    if(str[j] >= '0' && str[j] <= '9')
                            check = 1;               
                else
                {
                        check = 0;
                        break;
                }

        }
        if(check == 0)
        {
                printf("Not an Integer, Please input an integer \n");
        }
        /************Start of checking integer range **************/
        else
        {
                if( (flag == -1 && (strlen(str) > strlen(min))) || 
                    (flag == 1 && (strlen(str) > strlen(max))) )
                {
                        check = 0;
                        printf("Integer is out of range, \n");
                }
                else if(flag == -1 && (strlen(str) == strlen(min)) )
                {
                        i=0;
                        while(min[i]!='\0')
                        {
                                if (str[i] > min[i])
                                {
                                        check = 0;
                                        printf("Integer is out of range \n");
                                        break;
                                }
                                i++;                        }
                        if(check == 1)
                        {
                                for(j=1;j<strlen(str);j++)
                                        num=(str[j]-'0')+num*10;
                                num *=flag;
                                printf("The given number is : %d\n",num);
                        }
                }

                else if(flag == 1 && (strlen(str) == strlen(max)) )
                {
                        i=0;
                        while(max[i]!='\0')
                        {
                                if (str[i] > max[i])
                                {
                                        check = 0;
                                        printf("Integer is out of range\n");
                                        break;
                                }
                                i++;
                        }
                        if(check == 1)
                        {
                                for(j=0;j<strlen(str);j++)
                                        num=(str[j]-'0')+num*10;
                                num *=flag;
                                printf("The given number is : %d\n",num);
                        }
                }
                else
                {
                for(j=0;j<strlen(str);j++)
                        num=(str[j]-'0')+num*10;
                num *=flag;
                printf("The given number is : %d\n",num);
                }
        }
        /************End of checking integer range ****************/
 }while(check == 0);

return 0; 
```*

# android - 旋转器活动强制关闭

> ID：13288414
> 
> 赞同：0
> 
> 时间：2012-11-08T11:43:13.557
> 
> 标签：android, spinner

我使用以下代码`spinner1`作为产品选择，我必须`spinner2`根据`spinner1`内容提供数据。`spinner2`应该显示项目，但是当我运行它时它会被强制关闭。有人可以分享你的经验吗？

```
public class SpinnerActivity extends Activity  {

private String[] spinner1values = new String[] { "Automobiles", "Jobs" };
private String[][] spinner2values = new String[][] {
        new String[] { "a1", "b1", "c1" },
        new String[] { "a2", "b2" }
};
  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_spinner);

    Spinner spinner1 = (Spinner) findViewById(R.id.spinner1);
    ArrayAdapter<String> adapter1 = new ArrayAdapter<String>(this,
            android.R.layout.simple_spinner_item, spinner1values);
    adapter1.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    spinner1.setAdapter(adapter1);

    spinner1.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
        public void onItemSelected(AdapterView<?> arg0, View arg1,
                int position, long arg3) {
            // create a new adapter with the corresponding values
            ArrayAdapter<String> adapter2 = new ArrayAdapter<String>(arg0.getContext(),
                    android.R.layout.simple_spinner_item, spinner2values[position]);
            adapter2.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
            // set adapter
            ((Spinner)findViewById(R.id.spinner2)).setAdapter(adapter2);
        }

        public void onNothingSelected(AdapterView<?> arg0) {
            // nothing selected, so set empty options
            ArrayAdapter<String> adapter2 = new ArrayAdapter<String>(arg0.getContext(),
                    android.R.layout.simple_spinner_item, new String[0]);
            adapter2.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
            ((Spinner)findViewById(R.id.spinner2)).setAdapter(adapter2);
        }
    });

  }

} 
```

日志错误

```
11-08 17:28:13.013: E/AndroidRuntime(1719): FATAL EXCEPTION: main
11-08 17:28:13.013: E/AndroidRuntime(1719): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.spinnersample/com.spinnersample.Spinner}: java.lang.ClassNotFoundException: com.spinnersample.Spinner
11-08 17:28:13.013: E/AndroidRuntime(1719):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1880)
11-08 17:28:13.013: E/AndroidRuntime(1719):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
11-08 17:28:13.013: E/AndroidRuntime(1719):     at android.app.ActivityThread.access$600(ActivityThread.java:123)
11-08 17:28:13.013: E/AndroidRuntime(1719):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
11-08 17:28:13.013: E/AndroidRuntime(1719):     at android.os.Handler.dispatchMessage(Handler.java:99)
11-08 17:28:13.013: E/AndroidRuntime(1719):     at android.os.Looper.loop(Looper.java:137)
11-08 17:28:13.013: E/AndroidRuntime(1719):     at android.app.ActivityThread.main(ActivityThread.java:4424)
11-08 17:28:13.013: E/AndroidRuntime(1719):     at java.lang.reflect.Method.invokeNative(Native Method)
11-08 17:28:13.013: E/AndroidRuntime(1719):     at java.lang.reflect.Method.invoke(Method.java:511)
11-08 17:28:13.013: E/AndroidRuntime(1719):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
11-08 17:28:13.013: E/AndroidRuntime(1719):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
11-08 17:28:13.013: E/AndroidRuntime(1719):     at dalvik.system.NativeStart.main(Native Method)
11-08 17:28:13.013: E/AndroidRuntime(1719): Caused by: java.lang.ClassNotFoundException: com.spinnersample.Spinner
11-08 17:28:13.013: E/AndroidRuntime(1719):     at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
11-08 17:28:13.013: E/AndroidRuntime(1719):     at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
11-08 17:28:13.013: E/AndroidRuntime(1719):     at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
11-08 17:28:13.013: E/AndroidRuntime(1719):     at android.app.Instrumentation.newActivity(Instrumentation.java:1023)
11-08 17:28:13.013: E/AndroidRuntime(1719):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1871)
11-08 17:28:13.013: E/AndroidRuntime(1719):     ... 11 more 
```

# java - 为什么我们需要创建原生查询？

> ID：13288416
> 
> 赞同：9
> 
> 时间：2012-11-08T11:43:25.523
> 
> 标签：java, jpa, orm

我在一个使用 JPA ORM 的项目中工作，框架提供了两种创建查询的方法。

*   entityManager.createQuery(query1);
*   entityManager.createNativeQuery(query2);

我知道要传递各种查询字符串以使用它们，但我不知道为什么我们需要创建本机查询？可能我们不想在那里使用 ORM 功能？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-08T11:50:15.470

除非您愿意，否则您不需要创建本机查询。JPQL 最终由框架翻译成 SQL，但框架也允许您调用本机查询。为什么要这样做：

*   低级访问，这意味着您可以自己优化和处理映射；使用 SQL，您实际上访问数据库表，而使用 JPQL，您访问实体对象；
*   如果您已经了解 SQL，也许您不想学习 JPQL
*   您已经有用 SQL 编写的查询，并且没有资源/时间将它们移植到 JPQL

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-08T11:46:21.357

createQuery 使用 JPA 自己的查询语言，您可以从类名而不是表名中进行选择。这不是 SQL，它只是类似，后来被转换为真正的 SQL。映射到 java 类将自动完成，实际的类实例将作为结果返回。

createNativeQuery 使用真正的 SQL，将无法使用 JPA 功能。如果您需要做一些 JPA 不支持的非常奇怪的事情，通常会使用此方法。将返回一个 Object[] 列表，并且必须手动完成到 java 对象的映射。换句话说，它就像在 JPA 出现之前使用数据库一样，只是稍微方便一些，因为连接处理是自动完成的。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-08T11:50:45.500

我已将其用于优化目的。使用本机查询意味着 ORM 映射没有到位，您使用数据库的本机语法而不是 JPQL。因此，正如@RasmusFranke 还指出的那样，如果您需要 JPA 不支持的东西（例如当您想使用 DB 供应商特定的扩展时，这在概念上是一个坏主意，因为 JPA 完全是与 DB 无关的，但仍然会发生。 我知道...）

这样做的另一个效果是，通过使用本机查询，只运行提供的查询。无需急切地获取其他实体或其他不需要的东西。这样，如果你处理大量的对象，你可以节省一些堆空间。

# c# - 如何使用 MigraDoc 添加书签？

> ID：13288419
> 
> 赞同：2
> 
> 时间：2012-11-08T11:43:37.410
> 
> 标签：c#, c++, .net, migradoc

我想使用 MigraDoc 在我的 PDF 中添加书签。

例如：单个页面上的两个图像。

```
 1\. Images1
           2\. Images2** 
```

并且会生成同名书签。

如果我单击`image1`书签，该图像将显示给我。请记住，两张图片都在单页上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-30T21:26:19.300

MigraDoc 自动为标题创建书签。

要在页面上创建没有可见文本的书签，您可以创建字体大小为例如 0.0001 和白色的标题。

有一个缺点：直到 PDFsharp 1.50 beta 1，这些书签跳转到正确的页面，但不是页面上的正确区域。因此，在一页上有两个图像，书签将无法按 OP 的预期工作。

# android - 本机应用程序和贝宝集成 - “我们可以通过 paypal.com 付款吗？”

> ID：13288422
> 
> 赞同：0
> 
> 时间：2012-11-08T11:43:43.137
> 
> 标签：android, paypal

> **可能重复：**
> [Paypal 使用 Webview](https://stackoverflow.com/questions/6468674/paypal-using-webview)

所以我已经实现了带有 paypal MPL 集成的 android 应用程序。应用程序很酷，一切正常。我去找我的客户。

他说 ..

“但是为什么它不进入浏览器？..我不相信这个paypal弹出窗口！我只在页面将我重定向到浏览器并且我可以在url中看到paypal.com时才付款..只有这样我才会输入我的数据，只有那么我相信它。”

那么我该如何实现呢？

我正在阅读有关 MEPL 的信息，但似乎我需要在我的应用程序中实现 webview，对吗？

我知道这是可能的。因为如果手机上没有 fb 应用程序，Facebook 就会这样做。

谢谢！

* * *

正如评论中提到的，

这个问题回答了同样的问题

[使用 Webview 的贝宝](https://stackoverflow.com/questions/6468674/paypal-using-webview/6506473#6506473)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T03:41:36.743

但是带有 webviews 的 MECL 不会帮助“我只在页面将我重定向到浏览器并且我可以在 url 中看到 paypal.com 时才付款。” 因为 webview 不会向用户显示 url。

因此，您需要做的只是直接与 PayPal Express Checkout 集成（为此您需要一个服务器端组件）并使用 express checkout url 直接启动浏览器。确保在您的 returnUrl 中添加代码，以便在用户在浏览器中重定向回您的服务器后重新启动您的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T08:47:31.293

正如评论中提到的，

这个问题回答了同样的问题

[使用 Webview 的贝宝](https://stackoverflow.com/questions/6468674/paypal-using-webview/6506473#6506473)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T11:54:04.760

是的你是对的。MECL 是使用 WEB VIEW。但是，如果您想通过 MECL 付款，则必须创建一个用于付款的网络服务。只需阅读 mecl paypal 的文档并尝试了解流程。

# opengl - c++ 中 OpenGL 上的 Ubuntu 垂直同步

> ID：13288424
> 
> 赞同：0
> 
> 时间：2012-11-08T11:43:52.230
> 
> 标签：opengl, ubuntu, tearing, vertical-sync

我在 Ubuntu 上的 OpenGL 应用程序出现撕裂问题，我该如何解决？（我的笔记本有集成的英特尔显卡）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T11:54:02.030

编辑：忘了问，您是否在 OpenGL 代码中启用了双缓冲？如果您遇到闪烁，这将有所帮助。

如果您使用 GLUT，您可以通过使用`glutInitDisplayMode(GLUT_RGB | GLUT_DOUBLE | whatever other flags you are using e.g. GLUT_DEPTH);`初始化显示模式来启用双缓冲。而不是`glFlush()`你应该调用`glutSwapBuffers()`来显示渲染的帧。

尝试使用该工具更改 vsync 设置`driconf`，它在 Ubuntu 的存储库中可用，运行`apt-get install driconf`以​​安装它。

有一个名为“与垂直刷新（交换间隔）同步”的设置，它有四个级别：从不、默认关闭、默认开启、始终

另见：[http ://www.hecticgeek.com/2011/11/advanced-opengl-3d-rendering-configurator-for-ubuntu/](http://www.hecticgeek.com/2011/11/advanced-opengl-3d-rendering-configurator-for-ubuntu/)

# php - 如何在不重新启动 sphinx searchd 服务的情况下创建索引

> ID：13288426
> 
> 赞同：3
> 
> 时间：2012-11-08T11:43:54.003
> 
> 标签：php, sphinx

我是 sphinx search.i 的新手。我在 windows 7 中安装了 sphinx。

我的问题是如何在没有启动-停止搜索服务的情况下在 sphinx 中创建新索引？

因为每次我创建一个新索引然后在 php 脚本中运行查询时，它都会显示错误未知本地索引。

索引时是否有必要停止 searchd ？

我真的很感激我能得到的任何帮助！谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T08:49:21.630

您必须拥有管理员权限才能启动和停止 searchd services.Thanx

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T12:03:23.473

确保将 --rotate 开关与索引器一起使用。这应该告诉索引器告诉 Sphinx 服务重新加载并查找新索引。

# netbeans-6.9 - 在 NetBeans 中使用带有 SSL 证书的 Web 服务：如何配置 Truststore 和 KeyStrore

> ID：13288427
> 
> 赞同：2
> 
> 时间：2012-11-08T11:43:53.667
> 
> 标签：netbeans-6.9, webservices-client

我已经使用 NetBeans 生成了客户端绑定

NetBeans -> 新建 -> Java 项目

右键单击-> Webservice Client 在这里我给出了我的 wsdl url 并生成了客户端绑定。

**我想配置 KeyStore、TrustStore。**

我有client.cer 和server.cer 文件。

如果通过代码也可以签署证书，请分享过程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T08:08:48.363

In your NetBeans Project

> 1.  Right Click on
>     
>     
>     
>     **Project Root --> Web Service References --> service** and Click on "Edit Webservice Attributes"
>     
>     
> 2.  A popup window will appear with service tag Please configure Keystore and Trustsotre in this window by clicking on respective buttons.

Once the configuration is done *\build\classes\META-INF\service.svc.wsdl_wsdl0.xml* file will be updated with keystore and trustore entry.

```
<wsp1:Policy wsu:Id="WS2007HttpBinding_IWebServicePolicy">
    <wsp1:ExactlyOne>
        <wsp1:All>
            <wsam:Addressing wsp1:Optional="false"/>
            <sc:KeyStore wspp:visibility="private" type="JKS" storepass="changeit" alias="client2" keypass="changeit" location="client.jks"/>
            <sc:TrustStore wspp:visibility="private" type="JKS" storepass="changeit" peeralias="chageit" location="server.jks"/>
        </wsp1:All>
    </wsp1:ExactlyOne>
</wsp1:Policy> 
```

# regex - 正则表达式仅数字

> ID：13288431
> 
> 赞同：-3
> 
> 时间：2012-11-08T11:44:16.127
> 
> 标签：regex

我试图找出一个正则表达式来从字符串中提取数字。目前我有字符串：

```
USD0,13 
```

我只想搜索`0,13`.

还会有其他字符串包含数字`USD1,14`，例如。

任何帮助都会很棒。干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T11:57:05.433

A regex of `/USD([0-9,\.]+)/` should do what you want. The dot is not necessarily needed unless you have thousand seperators (considering it looks like you're using EU standards).

If you want multiple currencies, you could do this: `/(EUR|GBP|USD)([0-9\,\.]+)/`.

Since you seem pretty new to Regex, I'll explain:

`/` is the modifier of the Regex (this can be anything, but we'll use a slash which is the most common character for regexes). If you want it to be incase-sensitive, you can for example do `/regex/i` and `i` would mean incase-sensitive.

`USD` is just a character list of `U` followed by `S` followed by `D`.

`(` and `)` means that we want the regex to output this match to us.

`[0-9,\.]` means numbers from `0` to `9`, commas and dots (note that the dot has to be escaped, as `.` in regex means "any character".)

Our match is followed by a `+` which means "anything that matches this match, repeated 1 or more times".

The second example we've switched `USD` out with `(EUR|GBP|USD)`. This means "EUR" or "GBP" or "USD".

If you have any other questions, feel free to ask.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T11:54:05.350

对于您的情况，最简单的一个是：

```
'/[0-9,]+/' 
```

在 PHP 中

```
$str = 'USD0,13';
$matches = array();
preg_match('/[0-9,]+/', $str, $matches);
echo $matches[0]; 
```

# php - 如何使用php将上传的文件保存在qq文件上传器中？

> ID：13288433
> 
> 赞同：1
> 
> 时间：2012-11-08T11:44:22.007
> 
> 标签：php, ajax, file-upload, fine-uploader

我在我的网站上使用[https://github.com/Widen/fine-uploader](https://github.com/Widen/fine-uploader)上传脚本。我正在寻找使用php服务器端脚本在qq文件上传器中保存上传文件的解决方案。我尝试使用请求文件 `$_FILES['qqfile']['tmp_name']` 但没有用。谁能告诉我php示例在qq文件上传器中请求和保存文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-23T15:12:33.617

万一那些可能碰到这个线程的人，这是一个完美的例子，对我帮助很大

[http://wsnippets.com/fancy-profile-image-upload-crop-jquery-ajax-php/](http://wsnippets.com/fancy-profile-image-upload-crop-jquery-ajax-php/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-31T20:35:13.593

转到这个网址

[http://code.google.com/p/php-axiom/source/browse/trunk/libraries/uploader/qqUploadedFileXhr.class.php?spec=svn41&r=41](http://code.google.com/p/php-axiom/source/browse/trunk/libraries/uploader/qqUploadedFileXhr.class.php?spec=svn41&r=41)

或搜索qqUploadedFileXhr

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T14:40:37.843

查看 file-upload github 项目的 server 文件夹中的 php 示例。

# html - 链接是否应该指定如何打开？

> ID：13288436
> 
> 赞同：1
> 
> 时间：2012-11-08T11:44:25.690
> 
> 标签：html, hyperlink

例如，HTML 的 href 标签有一个 target 属性，可以强制页面在新窗口中打开。但从概念上讲，这是个好主意吗？内容是否应该决定用户应该如何阅读它？或者这应该完全取决于用户（右键单击-> 在新窗口中打开）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T11:52:53.840

我不同意。不应强制在新窗口中打开链接。如果用户想在新窗口中打开它，则取决于他们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T11:48:47.107

通常，当我们重定向到当前站点的链接时，它应该/可能在同一个窗口中打开。但是如果链接将我们重定向到另一个父亲，那么最好在新窗口中打开它，这样用户就会坚持我们的（当前）网站。没有具体的规则。主要是根据客户的要求来做。

使用右键打开链接的一个缺点 - > 单击是它使用户多点击一次。如果您的页面有 5 个链接，并且用户希望在每次他/她必须进行额外点击时在新窗口/标签中打开它们。这只是一个例子。这一切都取决于用户想要什么......

# java - 如何在 GWT UiBinder 中为 HTML 元素动态添加类？

> ID：13288438
> 
> 赞同：3
> 
> 时间：2012-11-08T11:44:33.457
> 
> 标签：java, css, gwt, uibinder

像 jQuery 这样的 JavaScript 库能够动态地向 DOM 元素添加/删除类，如下所示：

```
$("#some-element").addClass("make-me-pretty"); 
```

这很重要，因为它允许您对这些元素动态应用不同的样式规则。

在 GWT-land 中，您可能有一个像这样的 UiBinder XML 片段：

```
<!DOCTYPE ui:UiBinder SYSTEM "http://dl.google.com/gwt/DTD/xhtml.ent">
<ui:UiBinder xmlns:ui="urn:ui:com.google.gwt.uibinder"
    xmlns:gwt="urn:import:com.google.gwt.user.client.ui">
    <div>
        <span id="">Some content</span>

        <gwt:RadioButton ...>
            ...
        </gwt:RadioButton>

        <!-- etc. -->
    </div>
</ui:UiBinder> 
```

1.  对于非 Widget 元素，如`<span>`，如何在 Java 代码中动态添加/删除类？
2.  说到`<gwt:RadioButton>`，我似乎找不到 GWT 对 UiBinder XML 的参考 XSD，或者对 XML 的所有元素和属性的法律定义的某种官方参考`com.google.gwt.*`。例如，我在哪里可以找到有关子元素和属性`gwt:RadioButton`支持的文档？不仅针对那个小部件，还针对所有这些小部件！有人可以指出我正确的方向吗？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T11:53:00.953

您可以在 gwt-user-.jar 中找到 UiBinder.xsd `<version>`（至少从 2.4.0 开始，但我也怀疑旧版本）。

至于你的另一个问题：你总是可以使用遍历 DOM

```
yourUi.getElement().getElementsByTagName( "span" ) 
```

并找到`Element`匹配的`id`，但这不是很优雅。我实际上从未遇到过这种情况；这是一个有趣的问题！

希望有帮助。

干杯，

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T12:20:25.943

对于任何 UIobject（包括 RadioButton），您可以：

```
yourUI.addStyleName("your-class"); 
```

在 GWT 中：styleName = 类

更多[UIObject 方法](http://google-web-toolkit.googlecode.com/svn/javadoc/1.5/com/google/gwt/user/client/ui/RadioButton.html#methods_inherited_from_class_com.google.gwt.user.client.ui.UIObject)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T14:21:55.753

我认为你可以做这样的事情。将您作为 UI 字段映射到 GWT 'SpanElement'。

```
<ui:UiBinder xmlns:ui='urn:ui:com.google.gwt.uibinder'>
  <div>
    Hello, <span ui:field='nameSpan'/>.
  </div>
</ui:UiBinder> 
```

在绑定到上述 ui.xml 文件的类中，您可以按如下方式更改类

```
 interface MyUiBinder extends UiBinder<DivElement, HelloWorld> {}
      private static MyUiBinder uiBinder = GWT.create(MyUiBinder.class);

      @UiField SpanElement nameSpan;

      public HelloWorld() {
        setElement(uiBinder.createAndBindUi(this));
      }

      public void changeClass(){
           nameSpan.setClassName("newClass");
      } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-01T14:40:50.263

我猜你有一个 html 页面，你可以在其中加载你的小部件。**您可以在**.ui.xml**文件中分配一个类，就像在 html 页面中一样。

```
<div class="MyClass" align="middle">
    <gwt:VerticalPanel>
              .......
    </gwt:VerticalPanel>
</div> 
```

**然后在main.css**文件中编写 css 规则。

```
.MyClass{background-color:black;} 
```

加载视图时，**main.css**文件将“看到”类的名称并对其进行操作。

# hash - 差异布隆过滤器和 FM 草图

> ID：13288441
> 
> 赞同：5
> 
> 时间：2012-11-08T11:44:50.640
> 
> 标签：hash, set, duplicates, counting, bloom-filter

布隆过滤器和散列草图（也是 FM 草图）有什么区别，它们的用途是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-08T11:44:50.640

## 哈希草图/Flajolet-Martin 草图

*Flajolet, P./Martin, G. (1985)：用于数据库应用的概率计数算法，载于：计算机和系统科学杂志，卷。31，第 2 期（1985 年 9 月），第 182-209 页。*

*Durand, M./Flajolet, P. (2003)：大基数的对数对数计数，见：Springer LNCS 2832，算法 ESA 2003，第 605-617 页。*

哈希草图用于**计算集合中不同元素的数量**。

给定：

*   长度为 l 的位数组 B[]
*   映射到 [0,1,...2^l) 的（单个）散列函数 h()
*   一个函数 r()，它给出其输入的二进制表示中最低有效 1 位的位置（例如 000101 返回 1，001000 返回 4）

插入元素 x：

*   pn := h(x) 返回一个伪随机数
*   应用 r(pn) 将位数组的位置设置为 1，因为 h() 的输出是伪随机的，每个位 i 设置为 1 ~n/(2^(i+1)) 次

集合中不同元素的数量：

*   在位数组中找到最右边 0 的位置 p
*   p = log2(n)，求解 n 得到集合中不同元素的数量；结果可能高达 1.83 级

用法：

*   在数据挖掘、P2P/分布式应用程序、文档频率估计等方面。

* * *

## 布隆过滤器

*Bloom, H. (1970)：散列编码中允许错误的空间/时间权衡，载于：ACM 通信，卷。13，第 7 期（1970 年 7 月），第 422-426 页。*

布隆过滤器用于**测试元素是否是集合的成员**。

给定：

*   长度为 m 的位数组 B[]
*   k 个不同的哈希函数 h_k() 映射到 [0,...,m-1]，即映射到 m 位数组的位置之一

插入元素 x：

*   将 h_k 应用于 x (h_k(x))，对于所有 k，即你得到 k 个值
*   将数组 B 中的结果位设置为 1（如果已设置为 1，则不要更改任何内容）

检查 y 是否已经在集合中：

*   使用所有散列函数 h_k (h_k(y)) 获取要检查的位置 p_k，即对于每个函数 h_k，您都会得到一个位置 p_k
*   如果数组 B 中的位置 p_k 之一设置为 0，则元素 y 肯定不在集合中
*   如果 p_k 给出的所有位置都是 1，则元素 y 可能（！）在集合中
*   误报率约为 (1 - e^(-kn/m))^k，不可能出现误报！
*   通过增加散列函数的数量，可以降低误报率；但是，与此同时，您的布隆过滤器会变慢；k 的最优值为 k = (m/n)ln(2)

用法：

*   一开始用作数据库中的廉价过滤器，以过滤掉与查询不匹配的元素
*   当今的各种应用程序，例如在 Google BigTable 中，以及用于 IP 查找的网络等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-16T02:15:25.987

Bloom Filter 是一种用于成员查找的数据结构，而 FM Sketch 主要用于元素计数。这两种数据结构提供了各自的解决方案，优化了执行查找/计算所需的空间，权衡的是结果的准确性。

# java - 使用 logback/slf4j/java 时抛出异常

> ID：13288447
> 
> 赞同：-1
> 
> 时间：2012-11-08T11:44:59.373
> 
> 标签：java, slf4j, logback

我正在使用`slf4j 1.7.2 api`罐子。Logback 版本是 0.9.28（核心和经典）。爪哇`jdk 1.6`。我收到以下异常：

```
java.lang.NoSuchMethodError:
org.slf4j.helpers.MessageFormatter.arrayFormat(Ljava/lang/String;[Ljava/lang/Object;)Lorg/slf4j/helpers/FormattingTuple;
    at ch.qos.logback.classic.spi.LoggingEvent.<init>(LoggingEvent.java:112)
    at ch.qos.logback.classic.Logger.buildLoggingEventAndAppend(Logger.java:469)
    at ch.qos.logback.classic.Logger.filterAndLog_0_Or3Plus(Logger.java:425)
    at ch.qos.logback.classic.Logger.info(Logger.java:629)
    at com.amginetech.rsa.controller.AgentController.getByUser(AgentController.java:32)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) 
```

[写入了使用 logback/slf4j](https://stackoverflow.com/questions/7165633/exception-thrown-while-using-logback-slf4j)时引发的PS异常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T21:35:08.630

使用更新版本的 logback 应该可以解决问题。

# java - 如何在 jdbc3 中获取 savepoint() 的状态

> ID：13288450
> 
> 赞同：0
> 
> 时间：2012-11-08T11:45:07.550
> 
> 标签：java, mysql, database, jdbc, savepoints

我有三个不同数据库的三个保存点。我想知道从哪笔交易中出现了异常。所以基本上这些事务是按顺序运行的。如果事务 1 发生异常，那么我必须回滚到保存点 1。

如果事务2中发生异常，那么我必须回滚两个保存点，即保存点1和2。所以我的问题是如何找出那个事务导致异常以及我可以获得保存点的状态吗？

# winapi - win32 CreateFile2 api调用的目的是什么？

> ID：13288452
> 
> 赞同：12
> 
> 时间：2012-11-08T11:45:21.480
> 
> 标签：winapi, windows-8

他们在 Windows 8 中添加了一个新的 API 调用，`CreateFile2` 据我所知，它与现有函数完全相同，`CreateFile`只是它对参数的打包方式有所不同。

添加了什么以使其成为必要，因为我在文档中看不到任何内容。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2018-03-27T02:05:27.827

`CreateFile`实际上可以做的不仅仅是打开一个文件。`CreateFile2`创建的目的是为了将函数的“表面积”限制为仅允许 UWP 应用程序使用的功能，并且因为 WACK 工具无法真正区分导入函数的“好”使用和“坏”使用，只是它正在被使用。

我在 C++ 库中使用的典型模式如下。当使用 C++ 异常处理时，我使用[RAII 模式](https://en.wikipedia.org/wiki/Resource_acquisition_is_initialization)来支持文件句柄（除了作为良好的[现代 C++ 编码实践](https://github.com/isocpp/CppCoreGuidelines/blob/master/CppCoreGuidelines.md#Re-raii)之外）：

```
#include <assert.h>
#include <memory>

struct handle_closer
    { void operator()(HANDLE h) noexcept { assert(h != INVALID_HANDLE_VALUE); if (h) CloseHandle(h); } };

using ScopedHandle = std::unique_ptr<void, handle_closer>;

inline HANDLE safe_handle(HANDLE h) noexcept { return (h == INVALID_HANDLE_VALUE) ? nullptr : h; } 
```

> 我有的原因`safe_handle`是因为`CreateFile`and`CreateFile2`被定义为返回`INVALID_HANDLE_VALUE`(-1) 而不是返回 0 失败。大多数其他返回句柄的 Win32 函数在失败时返回 0，并且我已经确认没有“0”是有效的 Win32 句柄的情况。

对于阅读，我使用：

```
#if (_WIN32_WINNT >= _WIN32_WINNT_WIN8)
ScopedHandle hFile(safe_handle(
    CreateFile2(szFile, GENERIC_READ, FILE_SHARE_READ, OPEN_EXISTING, nullptr)));
#else
ScopedHandle hFile(safe_handle(
    CreateFileW(szFile, GENERIC_READ, FILE_SHARE_READ, nullptr, OPEN_EXISTING,
    FILE_FLAG_SEQUENTIAL_SCAN, nullptr)));
#endif
if (!hFile)
   // Error 
```

> 重要的是使用`FILE_SHARE_READ`而不是 0 作为`dwShareMode`读取参数。UWP 应用对现有文件没有独占读取权限，因此如果您使用“独占”共享模式（即 0），调用将失败。

并用于编写文件：

```
#if (_WIN32_WINNT >= _WIN32_WINNT_WIN8)
ScopedHandle hFile(safe_handle(
    CreateFile2(szFile, GENERIC_WRITE | DELETE, 0, CREATE_ALWAYS, nullptr)));
#else
ScopedHandle hFile(safe_handle(
    CreateFileW(szFile, GENERIC_WRITE | DELETE, 0, nullptr, CREATE_ALWAYS, 0, nullptr)));
#endif
if (!hFile)
    // Error! 
```

> 对于写作，我请求`DELETE`许可，因为如果文件输出过程失败，我会使用`SetFileInformationByHandle`with`FILE_DISPOSITION_INFO`进行清理。请参阅[scoped.h](https://github.com/Microsoft/DirectXTex/blob/master/DirectXTex/scoped.h#L35)。

有关更多信息，请参阅[游戏的双重用途编码技术。](https://walbourn.github.io/dual-use-coding-techniques-for-games-part-1/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-09-14T10:30:23.420

由于文件创建标志、文件属性标志和安全 QoS 标志多路复用到 CreateFile 的单个 DWORD (dwFlagsAndAttributes) 参数中，因此无法向 CreateFile 添加更多标志。创建操作的附加标志只能添加到 CreateFile2。例如 FILE_FLAG_OPEN_REQUIRING_OPLOCK 标志。此标志记录[在 FltCreateFile - 内核模式](https://msdn.microsoft.com/en-us/library/windows/hardware/ff541935(v=vs.85).aspx)

# .net - 除了 wmv 和 avi，WPF MediaElement 还支持哪些其他视频格式

> ID：13288453
> 
> 赞同：0
> 
> 时间：2012-11-08T11:45:22.043
> 
> 标签：.net, wpf, silverlight

> **可能重复：**
> [如何知道我的 WPF 应用程序可以播放哪些视频格式？](https://stackoverflow.com/questions/4162387/how-to-know-which-video-formats-my-wpf-application-can-play)

我知道 WPF MediaElement 支持 wmv 和 avi 视频格式，我很想知道 WPF MediaElement 支持的其他视频格式是什么。

谢谢

# c# - 如何根据引用的dll的文件版本执行不同的语句？

> ID：13288456
> 
> 赞同：2
> 
> 时间：2012-11-08T11:45:25.030
> 
> 标签：c#, .net

我有一个引用第 3 方 dll 的 C# dll。有不同版本的 3rd 方 dll。

如您所料，如果存在最新的第 3 方 dll，我想使用新功能，否则我想执行旧功能。

我不确定如何实现这一点，但我认为首先要尝试的是一个简单的 if 语句，它决定调用哪个函数。

所以我找到了程序集，得到它的位置，从而得到它的版本信息。（我需要文件版本，因为产品版本相同）。

然后一个简单的

```
if (version >= 3) do x() else do y() 
```

当我在安装了版本 2 的机器上执行代码时，我得到了一个`MissingMethodException`关于`x()`. 我以为我犯了一个愚蠢的错误，但逻辑是正确的。版本为 2，因此`x();`不应执行。我决定删除有问题的方法并将其替换为`throw new Exception()`. 不抛出异常，代码成功完成。

这是危险 - 我认为这是由于分支预测。这很危险，因为这不是我所了解的领域，因此做出假设是一件危险的事情。

所以我的问题是：

我是否以错误的方式解决这个问题 - 是否有更明显的解决方案我错过了？

或者

有没有办法禁用分支预测（如果这是原因）或以某种方式强制/标记 if 条件作为在继续之前必须执行的点。

这是正在执行的代码：

*   在安装了版本 3 的机器上就可以了。
*   在安装了第 2 版的机器上，我得到了一个相关`MissingMethodException`的方法`x()`。
*   我删除了`x();`对抛出异常的调用并取消注释 - 没有抛出异常。

相关代码：

```
Assembly assembly = System.Reflection.Assembly.GetAssembly(typeof(3rdPartyClass));
FileVersionInfo fileVersionInfo = FileVersionInfo.GetVersionInfo(assembly.Location);

if (fileVersionInfo.FileMajorPart >= 3)
{
    // throw new Exception("aagghh");
    x();
}
else
{
    y();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T11:52:30.550

使用反射，可以获得可用于特定 DLL 的方法列表（更具体地说：类型）。

您可以使用此方法信息来动态调用 Vlad 解决方案中指定的方法。

事实上，您可以省略版本检查，直接尝试找到预期的方法。

```
var methodX = assembly.GetType("sometype").GetMethod("X");
if (methodX != null)
{
    methodX.Invoke(params);
}
else
{
    assembly.GetType("sometype").GetMethod("Y").Invoke(otherParams);
} 
```

编辑：这不完全是您想要的，但是通过这种反射，您可以找到正确的方法，也适用于您自己的程序集。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T11:49:52.610

没有“分支预测”：运行时绑定似乎在方法执行时发生。

所以解决方法是这样的：

```
if (fileVersionInfo.FileMajorPart >= 3)
{
    CallX();
}
else
{
    CallY();
}

void CallX()
{
    DependentClass.X();
}

void CallY()
{
    DependentClass.Y();
} 
```

但是，无论如何，这似乎是一个 hack：您需要使用您链接的 DLL 版本来执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T11:58:10.870

这实际上是一个更准确的答案：

```
 Assembly assembly = System.Reflection.Assembly.GetAssembly(typeof(String));
        FileVersionInfo fileVersionInfo = FileVersionInfo.GetVersionInfo(assembly.Location);

        ObjectHandle oh = Activator.CreateInstanceFrom("AssemblyName.dll", "namespace.class");
        object o = oh.Unwrap();
        Type to = o.GetType();

        if (fileVersionInfo.FileMajorPart >= 3)
        {
            to.InvokeMember("Method X", BindingFlags.InvokeMethod, null, o, null);
        }
        else
        {
            to.InvokeMember("Method Y", BindingFlags.InvokeMethod, null, o, null);
        } 
```

# ruby-on-rails - Rails 中的 URL 编码

> ID：13288459
> 
> 赞同：0
> 
> 时间：2012-11-08T11:45:41.030
> 
> 标签：ruby-on-rails, url-routing

我有一个格式为“users/:token/storage.json”的 url

例如

/users/DCpjIfaTjxHd73zN%2FqEM3KJzwg6DEeC56%2FuCCH34FoFLaubZJsm4TsAgnprGnBx2jN0X4uoV2YW1JFarQFSwXegKrkcwQOI8mooWUl5eE7PdFnPLh5%2FTOQ%3D%3D/storage.json

我在将令牌传递到 url 之前对令牌进行 url 编码。这在开发环境中运行良好，但在生产环境中，url 在到达路由文件之前被解码，这会导致不同的路径，因为令牌中有一个“/”。

该应用程序是使用 rails 2.3.8 构建的。我怎样才能避免这个问题？

# php - 登录后将用户重定向到帐户页面

> ID：13288460
> 
> 赞同：-2
> 
> 时间：2012-11-08T11:45:49.757
> 
> 标签：php, redirect

我正在为我的网站创建一个登录系统，想知道是否有人可以帮助我解决问题？我希望那些已经登录到注册页面的人被重定向到您的帐户页面。

我已经尝试过了，但它似乎对我不起作用。

```
<?php
if (isset($_SESSION['id'])) { 
    header("location: youraccount"); 
} else {
    header("location: signup"); 
    exit();
} 
?> 
```

* * *

经过一番折腾后，我设法做到了。

这就是最终对我有用的方法-

```
<?php 
if (isset($_SESSION['id'])) { 
    header('Location: youraccount?id=' . $userid . '');
    exit(); 
} 
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T12:04:47.023

If you want to redirect to any of "youraccount.php" and "signup.php" pages, you must give the ".php" extension and ensure the files are in the same directory. If they are not in same directory use complete URL path. See [Header](http://www.w3schools.com/php/func_http_header.asp) for more details

Like:

```
<?php if (isset($_SESSION['id'])) { 
    header("location: youraccount.php"); 
} else {
    header("location: signup.php"); 
    exit(); 
} 
?> 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-11-08T11:48:05.663

您必须使用完整的 URL：

喜欢地点：`header('Location: http://www.example.com/');`

确保在修改标头之前不要输出任何内容，否则它将不起作用。

[header() 的文档](http://php.net/manual/en/function.header.php)。

# base64 - Fusesource - 如何在路由中编码/解码 base64

> ID：13288461
> 
> 赞同：0
> 
> 时间：2012-11-08T11:45:54.840
> 
> 标签：base64, fuseesb, jbossfuse, blueprint

尝试在 Fusesource ESB 中的路由中处理的 XML 文档中编码/解码 base64。我们正在使用 Blueprint.xml 尝试编码/解码，但找不到执行此操作的方法。我们需要我们的 ruote 将 XML 数据转换为 base64 字符串以访问需要一些二进制文件的外部 Web 服务。我们还需要从 web 服务响应中提取一些二进制文件并将其更改为 .pdf（或首先是字符串）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T07:40:15.737

Fuse ESB / Apache Camel 提供了许多用于编码/解码的数据格式 [http://camel.apache.org/data-format.html](http://camel.apache.org/data-format.html)

虽然我们没有开箱即用的 Base64。所以我已经记录了在未来版本中添加这种格式的票：[https ://issues.apache.org/jira/browse/CAMEL-5807](https://issues.apache.org/jira/browse/CAMEL-5807)

您可以构建自定义数据格式，或使用带有 Java bean 的消息翻译器 EIP 模式并编写一些 java 代码来自己进行编码/解码。[http://camel.apache.org/message-translator.html](http://camel.apache.org/message-translator.html)

有一个用于输出到 PDF 的 camel-fop 组件：http: [//camel.apache.org/fop.html](http://camel.apache.org/fop.html)

# sql - SQL查询到XML？

> ID：13288466
> 
> 赞同：2
> 
> 时间：2012-11-08T11:46:16.283
> 
> 标签：sql, xml, asp.net-mvc

我在我的 C# 项目中使用 MVC3 有一个 SQL 查询，它构建了一个菜单结构。这可行，但我无法将我的 ASPxMenu 嵌入到项目中，因为由于某种原因与母版页不兼容。

我可以将该查询转换为 XML 吗？

如果它将是一个 XML 文件，则可以使用 .BindToXML 附加到 Html.Devexpress().Menu

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T18:41:52.547

您是在问是否可以将 SQL 查询的结果转换为 XML 并绑定到该结果，或者您是否真的想将 SQL 查询的文本作为 XML 绑定？发布一些代码将有助于可视化您的意图。

# c# - 更新绑定到从 SQL c# wpf 中查找数据的 dataSet dataTable 的 listView

> ID：13288467
> 
> 赞同：2
> 
> 时间：2012-11-08T11:46:16.727
> 
> 标签：c#, sql, wpf, listview, datatable

尝试更新绑定到数据集的 listView 时，我遇到了一些奇怪的问题。

数据集从 SQL 获取信息，需要每 5 分钟自动更新一次。目前我正在使用 backgroudWorker 获取新信息并将其插入数据集中。

然后在 RunWorkerCompleted 事件上我这样做

```
listView1.DataContex = dataSet.Tables["table"].DefaultView 
```

DoWork 事件包含类似这样的内容

```
dataSet.Clear();

SqlDataAdapter adapter = new SqlDataAdapter(
                "SELECT [ContainerID] ,[UserID], [Spur], [Wave] ,[Date] FROM [ScannedItems] " + 
                "WHERE [Message] LIKE '%Success%'" + 
                "UNION ALL " +
                "SELECT [ContainerID] ,[UserID], [Spur], [Wave] ,[Date] FROM [Workstation].[dbo].[AllSpurs] " +
                "WHERE [Message] LIKE '%" + "Success" + "' ORDER BY [Date] DESC", connection);

            DataTableMapping mapping = adapter.TableMappings.Add("Table", "Packages Scanned");
            mapping.ColumnMappings.Add("ContainerID", "Cont");
            mapping.ColumnMappings.Add("UserID", "User");
            mapping.ColumnMappings.Add("Spur", "Spur");
            mapping.ColumnMappings.Add("Wave", "Wave");
            mapping.ColumnMappings.Add("Date", "Date");

            connection.Open();

            adapter.FillSchema(dataSet, SchemaType.Mapped);
            adapter.Fill(dataSet);

            connection.Close(); 
```

这在我调用 worker.RunWorkerAsync(); 时有效 在启动时。

但是，当计时器调用它时，表会变为空白（所有数据都已删除）。如果我尝试在 listVIew 中滚动，我会收到错误消息

```
Object reference not set to the instance of an object 
```

但是，如果我单击其中一列的标题，则新数据将变得可见并且可以滚动。

谁能让我知道我做错了什么。

这是 listView 的 XAML

```
<ListView ItemContainerStyle="{StaticResource cnListView}" ItemsSource="{Binding Path=Table}" Margin="7,5,31,7" Name="listView2" SelectionMode="Multiple" util:GridViewSort.AutoSort="True" LostFocus="LostFocus">
                    <ListView.View>
                        <GridView x:Name="gridView1" AllowsColumnReorder="False" ColumnHeaderTemplate="{StaticResource cnDataViewHeader}">
                            <GridViewColumn DisplayMemberBinding="{Binding Path=Cont}" util:GridViewSort.PropertyName="Cont" Header="ContainerID" Width="350" />
                            <GridViewColumn DisplayMemberBinding="{Binding Path=User}" util:GridViewSort.PropertyName="User" Header="User" Width="200" />
                            <GridViewColumn DisplayMemberBinding="{Binding Path=Spur}" util:GridViewSort.PropertyName="Spur" Header="Spur" Width="120" />
                            <GridViewColumn DisplayMemberBinding="{Binding Path=Wave, StringFormat='dd-MM-yyyy HH:mm:ss'}" util:GridViewSort.PropertyName="Wave" Header="Wave" Width="250" />
                            <GridViewColumn DisplayMemberBinding="{Binding Path=Date, StringFormat='dd-MM-yyyy HH:mm:ss'}" util:GridViewSort.PropertyName="Date" Header="Time Scanned" Width="250" />
                        </GridView>
                    </ListView.View>
                </ListView> 
```

太感谢了

较小的项目完整代码：

XAML

```
<Window x:Class="backWorkerTest.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="502" Width="989">
<Grid>
    <ListView ItemsSource="{Binding MeetCollection}" Height="340" HorizontalAlignment="Left" Margin="12,12,0,0" Name="listView1" VerticalAlignment="Top" Width="914">
        <ListView.View>
            <GridView>
                    <GridViewColumn Header="Test" DisplayMemberBinding="{Binding Path=Test}"/>
                    <GridViewColumn Header="Test2" DisplayMemberBinding="{Binding Path=Test2}"/>
            </GridView>
        </ListView.View>
    </ListView>
        <Button Content="Button" Height="63" Name="button1" Width="288" Click="button1_Click" Margin="368,388,311,12" />
</Grid> 
```

C＃

```
namespace backWorkerTest
{
/// <summary>
/// Interaction logic for MainWindow.xaml
/// </summary>
public partial class MainWindow : Window
{

    DataSet dataSet = new DataSet();
    BackgroundWorker backWorker = new BackgroundWorker();

    public MainWindow()
    {
        InitializeComponent();

        dataSet.Tables.Add("Stores");

        backWorker.DoWork += new DoWorkEventHandler(backWorker_DoWork);
        backWorker.RunWorkerCompleted += new RunWorkerCompletedEventHandler(backWorker_RunWorkerCompleted);

        backWorker.RunWorkerAsync();
    }

    void GetData()
    {
        using (SqlConnection con = new SqlConnection(@"Data Source=CN-LT08\Nick;Initial Catalog=SorterAdmin;" +
                                                     "User=sa; Password=Altrincham09"))
        {
            SqlDataAdapter sql = new SqlDataAdapter("SELECT [Store Number], [Store Name] FROM [Store_Info]", con);

            DataTableMapping mapping = sql.TableMappings.Add("Table", "Stores");
            mapping.ColumnMappings.Add("Store Number", "Test");
            mapping.ColumnMappings.Add("Store Name", "Test2");

            con.Open();
            sql.FillSchema(dataSet, SchemaType.Mapped);
            sql.Fill(dataSet);
            con.Close();
        }
    }

    private void button1_Click(object sender, RoutedEventArgs e)
    {
        backWorker.RunWorkerAsync();
    }

    private void backWorker_DoWork(object sender, DoWorkEventArgs e)
    {
        dataSet.Clear();
        GetData();
    }

    private void backWorker_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
    {
        listView1.ItemsSource = dataSet.Tables["Stores"].DefaultView;
        listView1.UpdateLayout();
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T12:39:38.747

尝试刷新方法。重新绑定后。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T12:50:32.627

更新。

如果查询相当长，则在从 SQL 读取数据时会发生错误。

为了阻止这种情况发生，我将 listView 绑定到另一个具有与旧版本 SQL 相同数据的表。现在是按钮点击事件

```
private void button1_Click(object sender, RoutedEventArgs e)
{

    DataTable oldTable = dataSet.Tables["Stores"].Copy();
    listView1.DataContext = oldTable.DefaultView;
    listView1.Items.Refresh();

    backWorker.RunWorkerAsync();
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-09T12:29:21.907

@Blam你是对的。我添加了 listView1.Items.Refresh(); 到 RunComplete 事件，现在它可以工作了。

非常感谢大家的帮助。如果有人遇到同样的问题，下面是带有工作背景更新的小示例的完整代码。

C＃

```
namespace backWorkerTest
{
/// <summary>
/// Interaction logic for MainWindow.xaml
/// </summary>
public partial class MainWindow : Window
{

    DataSet dataSet = new DataSet();
    BackgroundWorker backWorker = new BackgroundWorker();

    public MainWindow()
    {
        InitializeComponent();

        dataSet.Tables.Add("Stores");

        backWorker.DoWork += new DoWorkEventHandler(backWorker_DoWork);
        backWorker.RunWorkerCompleted += new RunWorkerCompletedEventHandler(backWorker_RunWorkerCompleted);

        backWorker.RunWorkerAsync();
    }

    #region Fill dataSet
    void GetData()
    {
        using (SqlConnection con = new SqlConnection(@"Data Source=CN-LT08\Nick;Initial Catalog=SorterAdmin;" +
                                                     "User=sa; Password=Altrincham09"))
        {
            SqlDataAdapter sql = new SqlDataAdapter("SELECT [Store Number], [Store Name] FROM [Store_Info]", con);

            DataTableMapping mapping = sql.TableMappings.Add("Table", "Stores");
            mapping.ColumnMappings.Add("Store Number", "Test");
            mapping.ColumnMappings.Add("Store Name", "Test2");

            con.Open();
            sql.FillSchema(dataSet, SchemaType.Mapped);
            sql.Fill(dataSet);
            con.Close();
        }
    }
    #endregion

    private void button1_Click(object sender, RoutedEventArgs e)
    {
        backWorker.RunWorkerAsync();
    }

    private void backWorker_DoWork(object sender, DoWorkEventArgs e)
    {
        dataSet.Clear();
        GetData();
    }

    private void backWorker_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
    {
        listView1.ItemsSource = dataSet.Tables["Stores"].DefaultView;
        listView1.Items.Refresh();

        //MessageBox.Show("Complete");
    }
} 
```

}

XAML

```
<Window x:Class="backWorkerTest.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="502" Width="989">
<Grid>
    <ListView ItemsSource="{Binding MeetCollection}" Height="340" HorizontalAlignment="Left" Margin="12,12,0,0" Name="listView1" VerticalAlignment="Top" Width="914">
        <ListView.View>
            <GridView>
                    <GridViewColumn Header="Test" DisplayMemberBinding="{Binding Path=Test}"/>
                    <GridViewColumn Header="Test2" DisplayMemberBinding="{Binding Path=Test2}"/>
            </GridView>
        </ListView.View>
    </ListView>
        <Button Content="Button" Height="63" Name="button1" Width="288" Click="button1_Click" Margin="368,388,311,12" />
</Grid> 
```

# java - 基于 VPN/代理的 JSoup

> ID：13288471
> 
> 赞同：5
> 
> 时间：2012-11-08T11:46:28.170
> 
> 标签：java, proxy, httpclient, jsoup, vpn

我正在尝试使用 JSoup 来抓取临时服务器上的一些页面。要使用浏览器查看登台服务器上的页面，我需要连接到 VPN。

我已连接到 VPN，但是当我使用 JSoup 尝试抓取页面时，它一直超时。如何让我的程序使用 VPN 连接。或者这里还有什么我没有想到的？

注意：我还在程序的另一部分使用了 HttpClient。有没有一种方法可以让我的程序在程序初始化后连接到 VPN/Proxy，以便 JSoup 和 HttpClient 都使用 VPN/Proxy。

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-05T19:47:53.263

您可以为代理设置 java 属性：

```
// if you use https, set it here too
System.setProperty("http.proxyHost", "<proxyip>"); // set proxy server
System.setProperty("http.proxyPort", "<proxyport>"); // set proxy port

Document doc = Jsoup.connect("http://your.url.here").get(); // Jsoup now connects via proxy 
```

或者将网站下载到一个字符串中然后解析它：

```
final URL website = new URL("http://your.url.here"); // The website you want to connect

// -- Setup connection through proxy
Proxy proxy = new Proxy(Proxy.Type.HTTP, new InetSocketAddress("<proxyserver>", 1234)); // set proxy server and port
HttpURLConnection httpUrlConnetion = (HttpURLConnection) website.openConnection(proxy);
httpUrlConnetion.connect();

// -- Download the website into a buffer
BufferedReader br = new BufferedReader(new InputStreamReader(httpUrlConnetion.getInputStream()));
StringBuilder buffer = new StringBuilder();
String str;

while( (str = br.readLine()) != null )
{
    buffer.append(str);
}

// -- Parse the buffer with Jsoup
Document doc = Jsoup.parse(buffer.toString()); 
```

您也可以使用`HttpClient`此解决方案。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-09-07T10:28:00.513

从 1.9 版开始，您可以在连接上进行设置：[https ://jsoup.org/apidocs/org/jsoup/Connection.html#proxy-java.net.Proxy-](https://jsoup.org/apidocs/org/jsoup/Connection.html#proxy-java.net.Proxy-)

```
JSoup.connect("http://your.url.here").proxy("<proxy-host>", <proxy-port>).get(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-12-27T06:44:47.810

如果您的代理需要用户名/密码身份验证，则为 ollo 添加。

```
final String authUser = <username>;
final String authPassword = <password>;
Authenticator.setDefault(
   new Authenticator() {
      public PasswordAuthentication getPasswordAuthentication() {
         return new PasswordAuthentication(
               authUser, authPassword.toCharArray());
      }
   }
);

System.setProperty("http.proxyHost", <yourproxyhost>);
System.setProperty("http.proxyPort", <yourproxyport>);
System.setProperty("http.proxyUser", authUser);
System.setProperty("http.proxyPassword", authPassword);

Document doc = Jsoup.connect("http://your.url.here").get(); 
```

# php - 获取div下的元素位置：绝对用jQuery

> ID：13288472
> 
> 赞同：2
> 
> 时间：2012-11-08T11:46:32.027
> 
> 标签：php, javascript, jquery, html, css

```
<table id="droppable" border="1" style="position: relative">
    <tr> 
      <td>a1</td>
      <td>b1</td>
      <td>c1</td>
      <td>d1</td>
      <td>e1</td>
      <td>f1</td>
    </tr>
    <tr> 
      <td>a2</td>
      <td>b2</td>
      <td>c2</td>
      <td>d2</td>
      <td>e2</td>
      <td>f2</td>
    </tr>
    <tr>
     <td>a3</td>
     <td>b3</td>
     <td>c3</td>
     <td>d3
     <div id="abs" style="position: absolute; height: 50px; width: 50px;background-   color: red">asdasd</div>
    </td>
    <td>e3</td>
    <td>f3</td>
    </tr>
    <tr> 
     <td>a4</td>
     <td>b4</td>
     <td>c4</td>
     <td>d4</td>
     <td>e4</td>
     <td>f4</td>
    </tr>
    <tr> 
    <td>a5</td>
    <td>b5</td>
    <td>c5</td>
    <td>d5</td>
    <td>e5</td>
    <td>f5</td>
    </tr>
    <tr> 
     <td>a6</td>
     <td>b6</td>
     <td>c6</td>
     <td>d6</td>
     <td>e6</td>
     <td>f6</td>
   </tr>
</table> 
```

​​直播：http : [//jsfiddle.net/qYNjP/1/](http://jsfiddle.net/qYNjP/1/)

如何使用 jQuery 获取 div#abs 下的所有元素？

在这个例子中，我想接收带有 td {d4, d5, d6, e4, e5, e6, f4, f5, f6} 的对象

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T11:55:44.737

one way to get the elements is to check the coords and dimensions of the cells.

use this 2 functions:

```
function getRectangle (obj) {

   var off = obj.offset();

   return {
          top: off.top,
          left: off.left,
          height: obj.outerHeight(),
          width: obj.outerWidth()
   };
}

function inCoords (x, y, rect) {

        if ((x > rect.left && x < (rect.left + rect.width))
            && (y > rect.top && y < (rect.top + rect.height)))
            return true;

        return false;
} 
```

with getRectangle you should first save the data for your div. In the next step you go through all td's `document.getElementsByTagName("td"); ...` and check with "inCoords" if the left and top of the cell is in the rectangle of the div. maybe you calc the bottom right corner with left + width and top + height so you can check if this corner is under your div.

i hope this helps!

greetings

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-08T11:54:35.087

您可以为特定的 td 上课，而不是使用 Id

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T06:01:30.323

```
$('#abs').siblings() 
```

兄弟姐妹（）：获取匹配元素集中每个元素的兄弟姐妹，可选地由选择器过滤。

[在此处](https://api.jquery.com/siblings/)查看完整文档。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T12:20:05.943

利用

```
 $('#abs').siblings() 
```

.siblings( [selector] ) 获取匹配元素集中每个元素的兄弟姐妹，可选地由选择器过滤。

```
<ul>
<li>list item 1</li>
<li>list item 2</li>
<li class="third-item">list item 3</li>
<li>list item 4</li>
<li>list item 5</li>
</ul>
$('li.third-item').siblings().css('background-color', 'red'); 
```

[检查这个](http://api.jquery.com/siblings/)

或者你可以给类名

```
<td class="position"> d4 </td>
<td class="position"> d5 </td>
<td class="position"> d6 </td>
<td class="position"> e4 </td>
<td class="position"> e5 </td>
<td class="position"> e6 </td>
<td class="position"> f4 </td>
<td class="position"> f5 </td>
<td class="position"> f6 </td>

$('.position').css('background-color', 'red'); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-08T11:52:47.617

你可以试试这样的东西吗？

[小提琴](http://jsfiddle.net/qYNjP/2/)

PS。只引用实际上属于问题的标签

```
<table id="droppable" border="1" style="float: left; clear: both">
    <tr>
        <div id="abs" style="float:left; height: 50px; width: 50px;background-color: red">asdasd</div><td>a1</td><td>b1</td><td>c1</td><td>d1</td><td>e1</td><td>f1</td></tr>
    <tr> <td>a2</td><td>b2</td><td>c2</td><td>d2</td><td>e2</td><td>f2</td></tr>
    <tr> <td>a3</td><td>b3</td><td>c3</td><td>d3</td><td>e3</td><td>f3</td></tr>
    <tr> <td>a4</td><td>b4</td><td>c4</td><td>d4</td><td>e4</td><td>f4</td></tr>
    <tr> <td>a5</td><td>b5</td><td>c5</td><td>d5</td><td>e5</td><td>f5</td></tr>
    <tr> <td>a6</td><td>b6</td><td>c6</td><td>d6</td><td>e6</td><td>f6</td></tr>
</table> 
```

# c++ - 继承和模板参数

> ID：13288473
> 
> 赞同：3
> 
> 时间：2012-11-08T11:46:34.637
> 
> 标签：c++, templates, inheritance, parameters

我有一个关于模板参数的相当简单的问题。我正在编写一个类调度程序，它使用如下列表：

```
list<PartitionT<CompareJobReady, CompareJobRunning> > partitions; 
```

PartitionT 是一个使用priority_queues 的模板类，我想使用比较器类对这些队列进行参数化。CompareJobReady 和 CompareJobRunning 是这些类（它们实现了特定的 operator()）。

无论如何，由于 PartitionT 是一个模板类，我希望能够传递任何类型的比较器类。特别是，我定义了两个附加类，即 CompareJobReadyEDFVD（继承自 CompareJobReady）和 CompareJobRunningEDFVD（继承自 CompareJobRunning）。

我现在真正想做的是能够写出这样的东西：

```
list<PartitionT<CompareJobReady, CompareJobRunning> > *p = new list<PartitionT<CompareJobReadyEDFVD, CompareJobRunningEDFVD> >(); 
```

但是编译器告诉我转换是不可能的。我的问题的最佳解决方案是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T15:55:56.067

标准库的容器类*拥有*它们的元素。也就是说，如果您有：

```
class Base {};
class Child : public Base {};

std::list < Base > myList;
std::list < Base > *pMyList; 
```

那么 的元素`myList`只能作为（引用）类型的对象来访问`Base`。您可以存储类型的元素`Base`（例如`push_back`， ）并获取（例如，或通过迭代器）`emplace_back`的引用/副本，例如，请参阅[cppreference/list](http://en.cppreference.com/w/cpp/container/list)。让我们来看看：`front``push_back`

```
void push_back(const value_type&); 
```

`value_type`您传递给的第一个模板参数在哪里`std::list`。在您的情况下，即`PartitionT < CompareJobReady, CompareJobRunning >`，或者在上面的示例中，它是`Base`。 `push_back`实际上*复制*您传递的参数并使其复制一个新元素。这是为什么？因为新元素可以归列表所有。当列表本身被销毁时，列表可以销毁此元素，如果您移动/交换两个列表，则将其传递给另一个列表。如果该元素没有被复制并从外部销毁，则列表将包含一个已销毁的元素 - 这将破坏列表给出的保证（并且它不会很好）。

另一个例子（简化，不是很准确）：`list`通过分配器为其元素分配内存。这里的默认分配器是`std::allocator<Base>`. 它只为元素分配存储类型对象所需的内存`Base`。

当您执行类似`pMyList = new std::list < Child >;`的操作时，右侧会产生一个“指向”的指针，`std::list<Child>`而左侧的类型是“指向`std::list<Base>`”的类型。这两种类型是不相关的，因为`std::list<Base>` *不继承或定义转换为`std::list<Child>`*. 这有一些原因可以说是相当不错，一个是泛型​​编程需要知道它处理什么类型。多态性是一种抽象，因此您不必（也不能）在编译时知道您正在处理的类型。

C++ 中的多态性通过指针或引用工作。因此，如果您想将一些`Child`对象排列在与此类型无关的列表中（例如，它只知道`Base`类型），您必须将它们存储为指针：

```
std::list < std::shared_ptr<Base> > myList2;

myList2.push_back( new Child );    // better not use, there's a caveat (1)

// approach w/o this caveat
std::shared_ptr<Base> pNewChild( new Child );    // or make_shared
myList2.push_back( pNewChild ); 
```

请注意，我在`shared_ptr`这里使用 a，`unique_ptr`如果更适合您的目的，您也可以使用 a，但您不应该使用原始 ptrs：因为 this`myList2`拥有它的`shared_ptr`元素并且 a`shared_ptr`拥有一个共享所有权的对象（类型为 Base），`myList2`因此间接拥有`Child`您在列表中存储 ptrs 的对象。由于原始 ptr 不表示所有权，因此谁负责销毁它们并不明显。阅读有关[“零规则”的](http://rmartinho.github.com/2012/08/15/rule-of-zero.html)更多信息。

(1) 有一个警告，尽管它不影响这个例子，但请参阅[boost 。](http://www.boost.org/doc/libs/1_43_0/libs/smart_ptr/shared_ptr.htm#BestPractices)

* * *

如果你真的想通过在某个地方选择 Comparer 类来进行通用编程，你“必须坚持编译时间”：你的列表类型（类型`*p`）不应该固定，`list<Base>`而是通用（使用模板）和你的所有算法使用它也必须是通用的。您不能（简单地*）混合泛型编程和运行时类型的选择，因为泛型编程就是在编译时创建代码。

*有一个允许它的黑客，滥用 RTTI，因此非常慢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T11:58:10.013

Use templating for the types, but inheritance for behaviour. Provide a constructor into which you can pass constructed comparator classes (as templated argument types), like

```
list<PartitionT<CompareJobReady, CompareJobRunning> > *p = 
  new list<PartitionT<CompareJobReady, CompareJobRunning> >( 
    new CompareJobReadyEDFVD(), new CompareJobRunningEDFVD()); 
```

# java - JScrollpane 之上的 JLabel

> ID：13288474
> 
> 赞同：1
> 
> 时间：2012-11-08T11:46:37.190
> 
> 标签：java, swing, user-interface, jscrollpane, jlabel

无论我使用什么对齐方式，JLabel 总是显示在我的 JScrollpane 的左侧，而不是在它的顶部。这是代码：

```
final JPanel choseTypeOfAnswerText = new JPanel();
JLabel label = new JLabel("Answer:");

label.setHorizontalTextPosition(JLabel.CENTER);
label.setVerticalTextPosition(JLabel.TOP);
choseTypeOfAnswerText.add(label);

//now a scroll pane for the answer area
JScrollPane answerScroller = new JScrollPane(answerArea);
answerScroller.setVerticalScrollBarPolicy(ScrollPaneConstants.VERTICAL_SCROLLBAR_AS_NEEDED);
answerScroller.setHorizontalScrollBarPolicy(ScrollPaneConstants.HORIZONTAL_SCROLLBAR_NEVER);
choseTypeOfAnswerText.add(answerScroller, BorderLayout.CENTER);
//add(answerScroller);
choseTypeOfAnswerText.setVisible(true); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T11:52:16.820

*   `choseTypeOfAnswerText.add(answerScroller, BorderLayout.CENTER);`

*   必须更改`LayoutManger`为[`BorderLayout`](http://docs.oracle.com/javase/tutorial/uiswing/layout/border.html)( `JPanel.setLayout(new BorderLayout())`)

*   [`JPanel`](http://docs.oracle.com/javase/tutorial/uiswing/components/panel.html)已实施[`FlowLayout`](http://docs.oracle.com/javase/tutorial/uiswing/layout/flow.html)，与我描述的问题相对应

*   仅默认[`Top-Level Containers`](http://docs.oracle.com/javase/tutorial/uiswing/components/toplevel.html)实现`BorderLayout`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T11:52:16.213

你忘了告诉，`label`应该添加在面板的顶部区域：

```
choseTypeOfAnswerText.add(label, BorderLayout.PAGE_START); 
```

而且，就像 mKorbel 所说，您必须将 LayoutManager 设置为`BorderLayout`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T11:52:42.247

如果你使用 a`JScrollPane`你不需要把它放在 a `JPanel`; 它实际上取代了 JPanel。您可以将标签添加到`JScrollPane`.

# php - PHP多维关联数组 - 如何获取键列表？

> ID：13288478
> 
> 赞同：0
> 
> 时间：2012-11-08T11:46:47.040
> 
> 标签：php, arrays

这是我的数据示例：

```
[204] => Array
    (
        [1] => Array
            (
                [leads] => 9
            )

        [2] => Array
            (
                [leads] => 15
            )

    )

[200] => Array
    (
        [1] => Array
            (
                [leads] => 7
            )

        [2] => Array
            (
                [leads] => 16
            )

        [3] => Array
            (
                [leads] => 5
            )

    ) 
```

我正处于尝试将数组数据输出到表中的阶段，但是如何动态设置表标题以便列将是`1 | 2 | 3`，即使某些子集没有该类型的数组？

该数组是根据数据库查询的结果构造的，如下所示：

```
$dailytotals[$store][$campaigntypeid] = array('leads'=> $leads); 
```

我为每个尝试了一个，但只是意识到它不起作用，因为并非所有子集都有所有列。

有没有办法得到我想要找到的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T11:52:40.563

试试这个

```
$columns = array();
foreach ($your_array as $key=> $arr) {
  $columns = array_unique(array_merge($columns, array_keys($arr)));
} 
```

其他方式

```
$columns = array_reduce($your_array, 
  function ($r, $val) { 
    return array_unique(array_merge($r, array_keys($val))); 
  }, 
  array()
); 
```

# c - fopen 在尝试打开 bmp 文件（C++）时返回 NULL？

> ID：13288480
> 
> 赞同：1
> 
> 时间：2012-11-08T11:47:01.133
> 
> 标签：c, visual-c++, file-io, fopen, bmp

```
FILE * in;
in = fopen("file1.bmp", "rb"); 
if (in == NULL) {
    perror("file1.bmp");
    return ;
} 
```

为什么我无法打开 *.bmp 文件。**fopen() 正在返回 NULL**。

任何人都可以帮助我如何成功打开 BMP 文件。我应该使用其他一些 C++ 函数吗？如果是，请告诉我。一个例子会很有帮助。我在 VS2008 中使用 VC++。

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-08T11:49:18.917

该文件不存在，或者您无法从中读取（可能是文件权限）？
您可能有工作目录问题。尝试使用完全限定的路径打开文件。
这也是一个简单的 C 问题

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T12:00:23.180

```
#include<stdio.h>
#include <errno.h>

int main()
{
FILE * in;
in = fopen("file1.bmp", "rb"); 
if (in == NULL) {
    perror("file1.bmp");
    printf("Error %d \n", errno);
    return ;
} 
```

}

使用这种方式`errno`从这里查看并找到它的含义[http://pubs.opengroup.org/onlinepubs/009695399/functions/fopen.html](http://pubs.opengroup.org/onlinepubs/009695399/functions/fopen.html)

# javascript - 在 clearSelectedRegions() 之后更改当前选定区域

> ID：13288481
> 
> 赞同：5
> 
> 时间：2012-11-08T11:47:06.300
> 
> 标签：javascript, jquery, jvectormap

我有一个关于地区选择的问题。我创建了一个函数来以不同的方式切换所选区域，例如`regionsSelectable()`. 通过使用`regionsSelectable()`我可以选择多个区域，使用我的功能我想将选定区域切换到当前选定区域（每次只选择一个区域）。

`clearSelectedRegions()`为了实现这一点，如果`length of SelectedRegions() > 1`在取消选择所有区域之后，我使用了该功能。我已将最新区域保存在单独的变量中。为了将当前区域显示为选定区域，我更改了两个值。

（容器是地图对象，GER 是示例区域）
首先：`container.regions.GER.element.isSelected = false;`
其次：`container.regions.GER.element.setSelected(true);`

但这是改变很多地区的坏方法......

所以问题是，我怎样才能通过使用来更改相同的值`setSelectedRegions()`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T23:53:36.757

可以使用`regionsSelectableOne: true`命令修复此问题。regionSelectable 和 regionSelectableOne 都需要设置为 true，如下所示：

```
 map: 'world_mill_en',
      series: {............},
      regionsSelectable: true,
      regionsSelectableOne: true, 
```

希望这可以帮助。尽管这是一种简单的方法，但我本人很想知道如何使用 clearSelectedRegions() 和 setSelectedRegions() 选项/函数来完成它。谢谢。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-09T16:25:16.630

这不正是你想做的吗？这样任何时候都只能选择一个区域。我不确定你用你写的所有代码想要达到什么目的，目的是什么？我在下面编写的代码的工作方式与 dos 完全相同，`regionsSelectableOne: true`但使用`clearSelectedRegions()`and`setSelectedRegions(code)`让你到达那里。

```
<script src="assets/jquery-jvectormap-world-mill-en.js"></script>
  <script>
    $(function(){
        var map = new jvm.WorldMap({
        container: $('#map'),
        map: 'world_mill_en',
        onRegionClick: function(e, code) {
                       map.clearSelectedRegions();
                       map.setSelectedRegions(code);
                                         }
        });
    });
  </script>
</head>
<body>
       <div id="map" style="width: 800px; height: 500px"></div>
</body> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-09T13:34:16.217

在试图理解这个问题时，我最大的困难是试图理解 jVectorMap 使用的两个地图创建命令之间的区别：

新地图命令

`new jvm.WorldMap({ container: $('.map') , .... });`

或者

`$('#map').vectorMap({ .... });`

根据您选择的命令，整个编码过程似乎有所不同？例如，

```
<script src="assets/jquery-jvectormap-world-mill-en.js"></script>
  <script>
    $(function(){
        var map = new jvm.WorldMap({
        container: $('.map'),
        map: 'world_mill_en',
        regionsSelectable: true,
                });

     $('.button-clear-selected-regions').click(function(){
       map.clearSelectedRegions();
     });
   });
  </script>
</head>
<body>
    <div class="map" style="width: 800px; height: 500px"></div>
    <input type="button" value="Clear selected regions" class="button-clear-selected-regions"/>
</body> 
```

两者都创建了一个工作地图，但 clearSelectedRegions() 函数仅适用于上述地图。

```
<script src="assets/jquery-jvectormap-world-mill-en.js"></script>   
  <script>
    $(function(){
        var map = $('#map').vectorMap({
        container: $('.map'),
        map: 'world_mill_en',
        regionsSelectable: true,
                });

      $('.button-clear-selected-regions').click(function(){
        map.clearSelectedRegions();
      });
   });
  </script>
</head>
<body>
    <div id="map" style="width: 800px; height: 500px"></div>
    <input type="button" value="Clear selected regions" class="button-clear-selected-regions"/>
</body> 
```

编辑 - 在做了更多研究之后，地图创建代码显然`new jvm.WorldMap({ container: $('.map') , .... });`使用 JavaScript API (v 1.0)，而`$('#map').vectorMap({ .... });`仅使用 JavaScript API (v 0.2.3)。

`clearSelectedRegions()`仅使用 v1.0 支持该功能（和许多其他功能）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-31T16:25:00.700

@Mike 是正确的。

利用：

```
map: 'world_mill_en',
  series: {............},
  regionsSelectable: true,
  regionsSelectableOne: true, 
```

如果你使用

```
mapObj.clearSelectedRegions();
mapObj.setSelectedRegions(string); 
```

然后您可能会发现自己处于 setSelectedRegions() 和 onRegionSelected 方法的循环中。

希望这可以帮助！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-09T08:58:00.053

谢谢，我不知道这些功能存在......而且我在文档中找不到它。（是 1.1.1 版本的新修改吗？）

使用这两个函数来实现有点棘手，因为 clearSelectedRegions 一步一步删除 SelectedRegions 并且每一步从函数的第一行开始。

为了保存选定的区域，我使用了`length`of`selectedRegions`或者您可以使用`length`of (container = map object) `container.getSelectedRegions()`。此外，我创建了一个名为`switch_land`它们的基本值的变量是`false`. 如果我们没有选择长度为 0 的区域，这很有帮助（稍后我会告诉你原因）。

`length = selectedRegions.length;`
`switch_land = false;`
`if (length === 1) {`
`land_first = selectedRegions[0];`
`}`

land_first 保存您选择的第一块土地。在第二步中，重要的是找到新的选定区域。通过测试，我发现 selectedRegions 的第二个值并不是每次您选择的第二个区域。

`if (length === 2) {`
`if (land_first !== selectedRegions[0]) {`
`selectedRegions[1] = selectedRegions[0];`
`selectedRegions[0] = land_first;`

最后两行将第一个选定的区域保存到`selectedRegion[0]`. 这些非常好，因为现在我们可以使用函数 pop() 每次保存最新的选定区域，因为该区域始终保存在选定区域数组的第二个值中。

`}`
`region_delete = true;`
`regions = selectedRegions;`
`land_secound = regions.pop();`
`container.clearSelectedRegions();`
`switch_land = true;`
`}`

我在下一步中使用了 region_delete 来停止手动取消选择。（您可以在一个区域上单击一次、两次等，只要您单击另一个区域，该区域就会保持选中状态）

`if (typeof region_delete === 'undefined'){`
`region_delete = false;`
`}`
`if (length === 0 && region_delete === false){`
`selected_region(land_first, false, true);`
`}`

我将在最后描述函数 selected_region。最后，我们必须选择最新的土地。我已经使用`length`0`region_delte`来找出用户单击区域以取消选择该区域的时刻。

`if (switch_land === true) {`
`selectedRegions[0] = land_secound;`
`selected_region(land_secound, false, true);`
`delete land_secound;`
`region_delete = false;`
`}`

就这样。现在我会给你一个带有 GER 区域的 selected_region 示例。

`function selected_region(selected_regions, status_1, status_2) {`
`switch (selected_regions) {`
`case "GER":`
`container.regions.GER.element.isSelected = status_1;`
`container.regions.GER.element.setSelected(status_2);`
`break;`
`}`
`}`

对于区域切换，您选择很重要`status_1 = false`，如果您没有选择false，您可以看到土地悬停并且区域鼠标移出后将显示选择颜色。

问题是我不能使用 var 来更改类似的值`container.regions.selectedRegions[0].element.setSelected(status_2);`，这是主要问题，也是我写第一个问题的原因；）

# iphone - iPhone目标c：发送到实例AsyncImageLoader的无法识别的选择器

> ID：13288485
> 
> 赞同：0
> 
> 时间：2012-11-08T11:47:23.183
> 
> 标签：iphone, objective-c, xcode, selector

我正在使用此 AsyncImageLoader 异步加载图像：[AsyncImageView](https://github.com/nicklockwood/AsyncImageView)。

当我尝试使用 loadImageWithURL 方法加载图像资源时，我不断收到错误消息：`unrecognized selector sent to instance`.

类 (AsyncImageLoader) 正在尝试像这样执行选择器：

```
[target performSelectorOnMainThread:success withObject:image waitUntilDone:NO]; 
```

我的代码是这样的：

```
-(void)thumbImageLoadSucces:(id)sender {

    NSLog(@"imageloadedsucces");

}

-(void)thumbImageLoadError:(id)sender {

    NSLog(@"imageloadederror");

} 
```

然后在同一个控制器的其他地方：

```
[self.asyncImageLoader loadImageWithURL:url target:self.thumb success:@selector(thumbImageLoadSucces:) failure:@selector(thumbImageLoadError:)]; 
```

谁能告诉我为什么我不断收到这个错误？我已经在 SO 上尝试了针对此错误的其他解决方案，但没有任何帮助（这主要是代码中的错字，但我检查了我的代码是否有错误）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T11:50:43.857

大概你的目标错了。它需要是：

```
[self.asyncImageLoader loadImageWithURL:url target:self success:@selector(thumbImageLoadSucces:) failure:@selector(thumbImageLoadError:)]; 
```

异步加载器将在目标上执行这些选择器。所以它是需要回应他们的目标。然后在成功和失败方法中，您将在图像视图上设置图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T11:50:45.713

我认为您的问题在于您的目标位置尝试更改此

```
[self.asyncImageLoader loadImageWithURL:url target:self.thumb success:@selector(thumbImageLoadSucces:) failure:@selector(thumbImageLoadError:)]; 
```

进入

```
[self.asyncImageLoader loadImageWithURL:url target:self success:@selector(thumbImageLoadSucces:) failure:@selector(thumbImageLoadError:)]; 
```

即`self.thumb`进入`self`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T11:50:54.233

这是问题：

```
[target performSelectorOnMainThread:success withObject:image waitUntilDone:NO]; 
```

您忘记添加选择器。你需要这样写：

```
[target performSelectorOnMainThread:@selector(thumbImageLoadSucces:) withObject:image waitUntilDone:NO]; 
```

# magento - magento中的getChildHtml（'content'）？

> ID：13288486
> 
> 赞同：1
> 
> 时间：2012-11-08T11:47:27.240
> 
> 标签：magento

任何人请帮助我

我找不到`getChildHtml('content')` 我是magento的新手？

**magento**`getChildHtml('content')`在哪里？

 *** * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T11:54:53.647

看

```
<reference name="content">
            <block type="catalog/navigation" name="catalog.leftnav1" template="catalog/navigation/left_nav.phtml"/>
</reference> 
```

编写上述代码将在该页面的内容部分显示 left_nav.phtml(php+html[view part]) 中的所有内容。
主要有：

```
<reference name="left">--->display in left side of page
<reference name="right">--->display in right side of page
<reference name="head">--->display in head side of page 
<reference name="content">--->display in middle of page 
```

`getChildHtml('content')`--->将`<reference name="content">`在被调用布局页面的中间部分显示所有声明的页面。

这是对您的疑问的简要概述。努力从谷歌搜索中学习。
祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-03T12:43:17.710

您可能会在每个 layout.phtml 文件（如 1column.phtml 和 app/rwd/default/page 中的其他文件）中获得 childhtml('content')**

# c# - 根据正在使用的程序集在编译时更改 CSharp 代码

> ID：13288488
> 
> 赞同：1
> 
> 时间：2012-11-08T11:47:33.620
> 
> 标签：c#, msbuild, msbuild-4.0

Test.csproj 引用`System.XML`并指定 TargetFrameworkVersion v4.0。 `System.Xml.XmlReaderSettings`已获得`DtdProcessing`属性，同时已弃用`ProhibitDtd`。要求是从一个项目构建，同时支持两个程序集。

使用 MSBuild 3.5 (c:\Windows\Microsoft.NET\Framework\v3.5\MSBuild) 构建它最终会引用 C:\Windows\Microsoft.NET\Framework\v2.0.50727\System.Xml.dll (运行时版本 v2 .0.50727，版本 2.0.0.0)

使用 MSBuild 4.0 (c:\Windows\Microsoft.NET\Framework\v4.0.30319\MSBuild) 构建它最终会引用 C:\Program Files\Reference Assemblies\Microsoft\Framework.NETFramework\v4.0\System.Xml.dll （运行时版本 v4.0.30319，版本 4.0.0.0）。

我尝试的解决方法是根据 TargetFrameworkVersion 在 .csproj 文件中定义一个常量。但是，TargetFrameworkVersion 不能指示将链接哪个程序集。

所以，这不起作用：

```
<PropertyGroup Condition=" '$(TargetFrameworkVersion)' != 'v2.0' And '$(TargetFrameworkVersion)' != 'v3.5' And '$(TargetFrameworkVersion)' != '' ">
  <DefineConstants Condition=" '$(DefineConstants)' != '' ">$(DefineConstants);</DefineConstants>
  <DefineConstants>$(DefineConstants)XMLDTDPROCESSING</DefineConstants>
</PropertyGroup> 
```

使用此 CSharp 代码：

```
namespace TestVSMSBuild
{
    class Program
    {
        static void Main(string[] args)
        {
            System.Xml.XmlReaderSettings readerSettings = new System.Xml.XmlReaderSettings();
#if XMLDTDPROCESSING
            readerSettings.DtdProcessing = System.Xml.DtdProcessing.Ignore;
#else // !XMLDTDPROCESSING
            readerSettings.ProhibitDtd = false;
#endif // XMLDTDPROCESSING
            System.Console.WriteLine("Reader: '{0}'", readerSettings);
        }
    } 
```

阅读`C:\Windows\Microsoft.NET\Framework\v3.5\Microsoft.Common.targets`该`AssemblySearchPaths`属性的评论是：

```
<!--
The SearchPaths property is set to find assemblies in the following order:

    (1) Files from current project - indicated by {CandidateAssemblyFiles}
    (2) $(ReferencePath) - the reference path property, which comes from the .USER file.
    (3) The hintpath from the referenced item itself, indicated by {HintPathFromItem}.
    (4) The directory of MSBuild's "target" runtime from GetFrameworkPath.
        The "target" runtime folder is the folder of the runtime that MSBuild is a part of.
    (5) Registered assembly folders, indicated by {Registry:*,*,*}
    (6) Legacy registered assembly folders, indicated by {AssemblyFolders}
    (7) Look in the application's output folder (like bin\debug)
    (8) Resolve to the GAC.
    (9) Treat the reference's Include as if it were a real file name.
-->
<AssemblySearchPaths Condition=" '$(AssemblySearchPaths)' == '' ">
    {CandidateAssemblyFiles};
    $(ReferencePath);
    {HintPathFromItem};
    {TargetFrameworkDirectory};
    {Registry:$(FrameworkRegistryBase),$(TargetFrameworkVersion),$(AssemblyFoldersSuffix)$(AssemblyFoldersExConditions)};
    {AssemblyFolders};
    {GAC};
    {RawFileName};
    $(OutDir)
</AssemblySearchPaths> 
```

我的猜测是这与`GetFrameworkPaths`定义为：

```
<!--
============================================================
                                    GetFrameworkPaths

Get the paths for the .NET Framework installation directory, and the .NET Framework
SDK installation directory.

These paths are not used directly by this .targets file but are available for pre and
post build steps.
============================================================
-->
<PropertyGroup>
    <Framework35Dir>@(_TargetFramework35DirectoryItem)</Framework35Dir>
    <Framework30Dir>@(_TargetFramework30DirectoryItem)</Framework30Dir>
    <Framework20Dir>@(_TargetFramework20DirectoryItem)</Framework20Dir>
    <FrameworkDir>@(_TargetFramework20DirectoryItem)</FrameworkDir>

    <FrameworkSDKDir>@(_TargetFrameworkSDKDirectoryItem)</FrameworkSDKDir>
    <GetFrameworkPathsDependsOn></GetFrameworkPathsDependsOn>
</PropertyGroup>
<Target
    Name="GetFrameworkPaths"
    DependsOnTargets="$(GetFrameworkPathsDependsOn)">

    <!-- Get the paths to all of the target .NET framework directories. -->
    <GetFrameworkPath>
        <Output Condition=" '$(TargetFrameworkVersion)' == 'v3.5' "                                                                                  TaskParameter="FrameworkVersion35Path"  ItemName="_CombinedTargetFrameworkDirectoriesItem" />
        <Output Condition=" '$(TargetFrameworkVersion)' == 'v3.0' or '$(TargetFrameworkVersion)' == 'v3.5' "                                         TaskParameter="FrameworkVersion30Path"  ItemName="_CombinedTargetFrameworkDirectoriesItem" />
        <Output Condition=" '$(TargetFrameworkVersion)' == 'v2.0' or '$(TargetFrameworkVersion)' == 'v3.0' or '$(TargetFrameworkVersion)' == 'v3.5'" TaskParameter="FrameworkVersion20Path"  ItemName="_CombinedTargetFrameworkDirectoriesItem" />
        <Output TaskParameter="FrameworkVersion35Path"  ItemName="_TargetFramework35DirectoryItem" />
        <Output TaskParameter="FrameworkVersion30Path"  ItemName="_TargetFramework30DirectoryItem" />
        <Output TaskParameter="FrameworkVersion20Path"  ItemName="_TargetFramework20DirectoryItem" />
    </GetFrameworkPath>

    <PropertyGroup>
        <TargetFrameworkDirectory>@(_CombinedTargetFrameworkDirectoriesItem)</TargetFrameworkDirectory>
    </PropertyGroup>

    <!-- Get the path to the target .NET framework SDK directory. -->
    <GetFrameworkSdkPath>
        <Output TaskParameter="FrameworkSdkVersion35Path" PropertyName="TargetFrameworkSDKDirectory"/>
        <Output TaskParameter="FrameworkSdkVersion35Path" ItemName="_TargetFrameworkSDKDirectoryItem"/>
    </GetFrameworkSdkPath>

</Target> 
```

那么，有没有一种更简单的方法可以根据`System.XML`正在使用的程序集来更改 CSharp 代码？如果这种方法是正确的，我*应该*使用什么条件来定义我的`XMLDTDPROCESSING`常量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T12:38:34.937

这就是我最终做的事情。解析 System.XML 程序集，然后专门检查版本 2.0.0.0。

请注意，假设 System.XML 程序集路径以 System.XML 结尾。似乎没有办法将 ReferencePath 绑定回相应的 Reference。

```
<!-- System.XML.XmlReaderSettings changed after version 2.0.0.0.
     Define a constant to recognised that.
 -->
<Target Name="SetupXMLDtdProcessing">
  <GetAssemblyIdentity AssemblyFiles="%(ReferencePath.Identity)"
                       Condition=" '%(ReferencePath.Filename)' == 'System.XML' "
  >
    <Output TaskParameter="Assemblies" ItemName="_SystemXMLAssemblyIdentityItem" />
  </GetAssemblyIdentity>

  <PropertyGroup>
    <_SystemXMLAssemblyIdentity>%(_SystemXMLAssemblyIdentityItem.Identity)</_SystemXMLAssemblyIdentity>
  </PropertyGroup>

  <PropertyGroup Condition=" '$(_SystemXMLAssemblyIdentity)' != 'System.Xml, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089'
                           "
  >
    <DefineConstants Condition=" '$(DefineConstants)' != '' ">$(DefineConstants);</DefineConstants>
    <DefineConstants>$(DefineConstants)XMLDTDPROCESSING</DefineConstants>
  </PropertyGroup>
</Target>

<PropertyGroup>
  <CompileDependsOn>
    SetupXMLDtdProcessing;
    $(CompileDependsOn)
  </CompileDependsOn>
</PropertyGroup> 
```

# concurrency - 快速计算斯皮尔曼等级相关性

> ID：13288493
> 
> 赞同：1
> 
> 时间：2012-11-08T11:48:13.663
> 
> 标签：concurrency, correlation

有没有一种方法可以非常快速地计算出大量数据的[spearman 等级相关性。](http://en.wikipedia.org/wiki/Spearman%27s_rank_correlation_coefficient)我们每个月要执行数千个这样的计算，而这些计算的总持续时间太长了。是否可以使用并发（线程）操作执行 spearman 等级相关，或者将计算分布到多个核心（甚至服务器）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-10T09:25:55.143

对于 Java 开发人员来说，Apache common (org.apache.commons.math3.stat.correlation.SpearmansCorrelation) 现在有一个类来计算 SpearmanCorrelation。

# php - 如何制作原始数据库数据的顺序列表

> ID：13288501
> 
> 赞同：0
> 
> 时间：2012-11-08T11:48:49.997
> 
> 标签：php, database, foreach

我有一个已经填满并包含订单数据的大型数据库。我有一个名为 order 的表，其中包含所有订单。

我需要列出所有相同的订购产品。是这样的：

我在数据库中的数据

```
id = 1 | orderid = 1 | product = A 
id = 2 | orderid = 1 | product = A 
id = 3 | orderid = 1 | product = B 
id = 4 | orderid = 1 | product = B
id = 5 | orderid = 1 | product = B 
id = 6 | orderid = 2 | product = A 
```

简而言之：

*   订单 1 有 2 个产品 A 和 3 个产品 B
*   订单 2 有 1 个产品 A、2 个产品 B 和 4 个产品 C
*   订单 3 有 3 个产品 A 和 3 个产品 C

我想做一个总结：

```
product A ordered 6 times
product B ordered 5 times
product C ordered 7 times 
```

我找不到一种方法来遍历逐个订购的产品。我该如何计算或将它们分组。我无法添加额外的表，因为数据库不在我的监督之下。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T12:26:22.013

您可以通过对数据库的一次查询来做到这一点。在 MySql 中：

```
SELECT product, COUNT(*) as count FROM test GROUP BY product 
```

它返回两列：第一列 - 产品名称，第二列 - 计数。

# c# - 是否有可能将 asp:menu 项目分成多列？

> ID：13288506
> 
> 赞同：0
> 
> 时间：2012-11-08T11:49:02.460
> 
> 标签：c#, asp.net, menu, multiple-columns, aspmenu

有什么方法可以将 asp:menu 项分成多列？我从 System.Web.XmlSiteMapProvider 获取菜单项，然后将它们“转发”到要与 asp:menu 一起使用的 SiteMap。我需要一个结构如下的菜单：

```
Item1 Item5 Item9  Item11
Item2 Item6 Item10 Item12
Item3 Item7 Item11 Item13
Item4 Item8 Item12 Item14 
```

等等..我如何基于 System.Web.XmlSiteMapProvider 实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T13:21:46.383

当您使用 asp 菜单时，它以不同的视图进入客户端，如下所示。

```
 <table>
      <tbody>
         <tr>
            <td>Item 1</td>
            <td>Item 2</td>
            <td>Item 3</td>
            <td>Item 4</td>
            <td>Item 5</td>
         </tr>
      </tbody>
    <table> 
```

如您所见，不可能将一行一分为二，因此从技术上讲，使用单个 asp 菜单控件是不可能的。另一种方法是使用两个不同的 Asp 菜单控件。如果你在这里问的那样可能的话，我喜欢看到那个代码。

# c# - 如何使用会话列表 在 asp.net 中存储价值

> ID：13288507
> 
> 赞同：4
> 
> 时间：2012-11-08T11:49:05.473
> 
> 标签：c#, asp.net

我做了一个这样的财产：

```
public static List<Message> _SessionStore;
        public static List<Message> SessionStore
        {
            get
            {
                if(HttpContext.Current.Session["MyData"]==null)
                {
                    _SessionStore = new List<Message>();
                }
                return _SessionStore;
            }
            set { HttpContext.Current.Session["MyData"] = _SessionStore; }
        } 
```

我想增加价值`SessionStore.Add() and get SessionStore.Where()` ，但在执行此添加和获取时出错

首先我做了**SessionStore.Add(comment);** 某处然后我得到了这个错误

```
 List<Message> msglist = HttpContext.Current.Session["MyData"] as List<Message>;
    if(msglist.Count>0) 
```

我无法访问`msglist`

任何人都可以以我可以使用任何页面中的此列表添加和获取值的方式修复我的财产吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T11:58:45.277

似乎你忘了把`SessionStore`ASP.NET 会话，例如：

```
if(HttpContext.Current.Session["MyData"]==null)
{
    _SessionStore = new List<Message>();
    // the following line is missing
    HttpContext.Current.Session["MyData"] = _SessionStore;
} 
```

* * *

顺便说一句：我认为该`_SessionStore`字段不是必需的。这应该足够了：

```
public static List<Message> SessionStore
{
    get
    {
        if(HttpContext.Current.Session["MyData"]==null)
        {
            HttpContext.Current.Session["MyData"] = new List<Message>();
        }
        return HttpContext.Current.Session["MyData"] as List<Message>;
    }
} 
```

然后，在你想使用消息列表的地方，你应该通过`SessionStore`属性访问它，而不是 via `HttpContext.Current.Session`：

```
List<Message> msglist = NameOfYourClass.SessionStore;
if(msglist.Count>0) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T12:01:57.183

您没有存储到会话中

```
get
{
    if(HttpContext.Current.Session["MyData"]==null)
    {
        HttpContext.Current.Session["MyData"] = new List<Message>();
    }

    List<Message> list = HttpContext.Current.Session["MyData"] as List<Message>;

    return list;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T12:02:42.143

使用您的代码

```
 public static List<Message> _SessionStore;
    public static List<Message> SessionStore
    {
        get
        {
            if(HttpContext.Current.Session["MyData"]==null)
            {
                _SessionStore = new List<Message>();
            }
            return _SessionStore;
        }
        set 
        { 
            HttpContext.Current.Session["MyData"] = value;
            _SessionStore = value;
        }
    } 
```

这会将您设置为 SessionStore 的值存储在私有版本和会话中

# image - 在 Node.js 中对图像应用半透明水印

> ID：13288508
> 
> 赞同：1
> 
> 时间：2012-11-08T11:49:11.930
> 
> 标签：image, node.js, graphics, imagemagick

我有一张图片，想使用 Node.js 在其上应用水印（另一张图片）。要求是水印不应该是实心图片（我可以用 gm 库的 draw() 来做），而是半透明的。您能建议使用任何工具吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T18:52:05.703

通过分叉子进程从命令行使用 ImageMagick

```
// Require our module dependencies
var exec = require('child_process').exec;

// Create command array to invoke ImageMagick composite where
// -dissolve is the amount of transparency for the watermark
// -gravity tells how to align images of varying size
// -quality is the image quality of the JPEG (not required if producing PNG)
var command = [
    'composite',
    '-dissolve', '50%',
    '-gravity', 'center', 
    '-quality', 100,
    '/path/to/watermark.png',
    '/path/to/image.jpg',
    '/path/to/save/result.jpg';
];

// Join command array by a space character and then execute command
exec(command.join(' '), function(err, stdout, stderr) {
    // Do stuff with result here
}); 
```

如果您需要 API 抽象，这里有一个很棒的模块[https://github.com/rsms/node-imagemagick](https://github.com/rsms/node-imagemagick)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-09-18T10:36:00.680

您可以使水印图像半透明并将其与 gm 一起使用：

```
gm('/path/to/input-image.jpg')
.draw(['image Over 0,0 0,0 /path/to/half-transparent-watermark-image.png'])
.write('/path/to/output-image.jpg', function(e){
 console.log(e||'done'); // What would you like to do here?
}); 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2015-05-04T04:20:20.887

我使用代码

```
gm('/path/to/input-image.jpg')
.draw(['image Over 0,0 0,0 /path/to/half-transparent-watermark-image.png'])
.write('/path/to/output-image.jpg', function(e){
 console.log(e||'done'); // What would you like to do here?
}); 
```

错误：命令失败：转换：不合格的绘图图元定义`/path/to/half-transparent-watermark-image.png''@draw.c/DrawImage/3124

# solr - 使用默认值向 SOLR 添加新字段。填充现有文档

> ID：13288509
> 
> 赞同：2
> 
> 时间：2012-11-08T11:49:17.670
> 
> 标签：solr, lucene

我在 SOLR 3.6.1 schema.xml 中添加了一个具有默认值的新字段。是否可以使用此默认值填充/索引 SOLR 存储库中的现有文档，而无需重新加载所有数据？我一直在研究重新索引和重新优化，但无法让它工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-27T04:37:13.427

检查[Solr：为现有文档添加具有默认值的新字段](http://lifelongprogrammer.blogspot.com/2013/06/solr-use-doctransformer-to-change.html)

如果我们只需要搜索和显示新字段，我们可以执行以下步骤。

1.  在 schema.xml 中添加新的字段定义：

2.  我们需要更新搜索查询：当搜索此 newFiled 的默认值时，还要搜索空值：-(-newFiled:defaultValue AND newFiled:[* TO *])

3.  当该字段中没有旧数据的值时，使用 DocTransformer 添加默认值。

某些功能可能不起作用，例如排序、统计。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T12:08:11.970

schema.xml 中与字段添加或更改相关的任何更改都需要重新索引数据。
所以你必须重新加载你的数据。

如果您知道该文档，则可以仅使用该字段[对所有这些文档进行部分更新。](http://solr.pl/en/2012/07/09/solr-4-0-partial-documents-update/)

# sql - 将一个表映射到许多其他表？

> ID：13288511
> 
> 赞同：2
> 
> 时间：2012-11-08T11:49:21.430
> 
> 标签：sql, database-design

我有一个我开发的网站，其结构有点像 stackoverflow。我在数据库中有一个`Posts`表和一个`PostImages`表。该`PostImages`表如下所示：

```
PostImageId PK
PostId      FK
Uri
MimeType 
```

所以帖子可以有很多与之相关的图像。

我现在有要求网站上的其他地方应该有图像：`Users`应该能够在他们的个人资料`Categories`中拥有图像，应该能够拥有图像，并且`Addresses`应该能够拥有图像。

似乎最好在我的数据库中只有一个`Images`表。我应该如何建模？我可以有一个这样的表：

```
ImageId    PK
PostId     FK
CategoryId FK
AddressId  FK
UserId     FK
Uri
MimeType 
```

我可以有一个`images`表，然后每种对象都有额外的表：

```
PostImageId      PK FK
PostId           FK

CategoryImageId  PK FK
CategoryId       FK 
```

（其中每个项目的PK也是`Images`表中图像的FK）

还有一些其他策略：例如，我可以`___Images`为每种类型创建一个表，而没有共享`Images`表。我可以为每一个有一个多对多的映射表，也许还有一些我没有想到的其他解决方案。

什么是最好的？我对数据库设计知之甚少——哪个最灵活、最容易使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T12:05:46.247

在现实生活中的项目中，数据库的设计考虑了数据可访问性的成本。您提到了两种设计表格的方法。两者都是正确的。如果将所有字段放在一张表中，则会出现数据冗余。如果你做两张桌子没有问题。

但是您必须记住，加入两个表会花费更多。因此，在从您的服务器获取数据时，这可能会使您的页面变慢（如果同时有很多用户同时尝试）。

另一方面，如果你把它放在一个字段中，它会占用更多的数据库内存，但数据获取的成本会更低。这是你的选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-03T16:58:21.327

我选择了第二个选择。我有一张`Images`桌子：

```
Images
    ImageId    PK
    Name
    Uri
    Width
    Height
    MimeType 
```

和几个映射表：

```
PostImages
    PostImageId      PK FK
    PostId           FK

CategoryImages
    CategoryImageId  PK FK
    CategoryId       FK 
```

我更喜欢这个解决方案，因为我可以在不更改表的情况下添加更多映射`Images`表。它更容易维护。此外，它允许`Images`表格更具语义，因为它只包含有关图像的数据。

连接的成本不是一个大问题，因为我在任何查询中只返回少量图像。但是，我还没有测试过这两种方法的相对速度。

# android - 如何更改 ActionBarSherlock 选项卡文本颜色？

> ID：13288514
> 
> 赞同：3
> 
> 时间：2012-11-08T11:49:28.077
> 
> 标签：android, actionbarsherlock

```
adapter.addTab(getSupportActionBar().newTab().setText("Tab-1"),
                Tab1.class, null);
adapter.addTab(getSupportActionBar().newTab().setText("Tab-2"),
                Tab2.class, null);
adapter.addTab(getSupportActionBar().newTab().setText("Tab-3"),
                Tab3.class, null); 
```

到目前为止，每个选项卡的 TextColor 都为白色。我希望它在未选中时为灰色，在选中时为白色。那么，如何更改**onTabSelected**或**onTabUnselected**中的文本颜色。

还是我应该使用 setCustomView 作为选项卡？这里又是 TextSize 和所有需要照顾的

```
<style name="my_ActionBarTabStyle" parent="@style/Widget.Sherlock.ActionBar.TabView">
    <item name="background">@drawable/tab_indicator_ab_wicfy</item>
    <item name="android:background">@drawable/tab_indicator_ab_wicfy</item>
    <item name="android:textColor">@color/black</item>
</style> 
```

我试着用

```
<item name="textColor">@color/black</item> 
```

但它给了我一个错误，即**textColor**不是一个有效的属性

谢谢你

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-08T11:59:53.397

您不应更改代码中的文本颜色。请改用[颜色状态列表资源](http://developer.android.com/guide/topics/resources/color-list-resource.html)。

在资源中定义颜色选择器。在目录中定义一个 xml 文件`res/color/`。该文件将包含：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <!-- use when selected -->
    <item android:state_selected="true" android:color="#fff" />

    <!-- otherwise use -->
    <item android:color="#888" />
</selector> 
```

然后在样式中设置文本颜色：

```
<item name="android:textColor">@color/my_color_selector</item> 
```

**编辑：**

您必须在样式中的正确位置设置文本颜色！将 textColor 设置为`(android:)actionBarTabTextStyle`. 主题必须包含：

```
<style name="MyTheme" parent="Theme.Sherlock.Light.DarkActionBar">
    ...
    <!-- define text style for tabs -->
    <item name="actionBarTabTextStyle">@style/MyTabTextStyle</item>
    <item name="android:actionBarTabTextStyle">@style/MyTabTextStyle</item>
    ...
</style> 
```

然后在选项卡文本样式中设置文本颜色：

```
<style name="MyTabTextStyle" parent="Widget.Sherlock.ActionBar.TabText" >
    <item name="android:textColor">@color/my_color_selector</item>
</style> 
```

# java - 如何设置 Jetty 开发环境？

> ID：13288518
> 
> 赞同：1
> 
> 时间：2012-11-08T11:49:47.587
> 
> 标签：java, jetty, war

我通过以下方式在 Debian 上安装了生产环境中的 Jetty 6.1.24：

```
apt-get install openjdk-7-jdk, jetty, libjetty-extra-java 
```

对于我的开发环境，我从这里下载了 Jetty 6.1.24：http: [//dist.codehaus.org/jetty/jetty-6.1.24/jetty-6.1.24.zip](http://dist.codehaus.org/jetty/jetty-6.1.24/jetty-6.1.24.zip)

但通常我在开发 Jetty 上完美运行的战争文件会因生产错误而失败。

如何使我的开发环境（在没有 deb 包的 Windows 上）的行为与 debian 安装的 Jetty 完全一样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T14:15:40.117

首先，您的 prod 和 dev 环境可能没有安装相同的库。查看 $JETTY_HOME/libs。dev 可能会引用您的开发机器上未安装在 prod 上的库。

也许 apt-get 安装了一个完全不同的 Jetty 版本。尝试将相同的 ZIP 版本下载到您的产品，解压缩并从 $JETTY_HOME/bin/jetty.sh 运行。

# jpa - 无法更改 JPA Eclipse 中的列名link

> ID：13288519
> 
> 赞同：0
> 
> 时间：2012-11-08T11:49:49.370
> 
> 标签：jpa, eclipselink

我在使 @Column(name="example") 工作时遇到问题。

我有一个用户类：

```
@Entity
public class User {
     @Id
     private String username;
     ....
} 
```

角色一：

```
 @Entity
    public class Role {
         @Id
         private String name;
         .... 
```

}

那是一个多对多的关系。所以我创建了一个 RoleMembership：

```
@Entity
@IdClass(UserRolePK.class)
public class RoleMembership {

    @Id
    @ManyToOne
    @PrimaryKeyJoinColumn(name="USERNAME")
    private User user;

    @Id
    @ManyToOne
    @PrimaryKeyJoinColumn(name="ROLE")
    private Role role;
....
} 
```

如您所见，主键在 UserRolePK 中定义：

```
public class UserRolePK{

    @Id
    @Column(name="ROLE")
    private String role;

    @Id
    @Column(name="USERNAME")
    private String user;
...
} 
```

在此类中，我使用 @Column(name="USERNAME") 和 @Column(name="ROLE") 将其名称强制为该字符串，但它不起作用：JPA 为其提供了默认名称 USER_USERNAME 和 ROLE_NAME（位于TABLE_ID 格式）。谁能帮我找出错误？谢谢，安德里亚

编辑：我需要三个表：

*   用户（用户名（pk），密码....）
*   user_role（用户名，角色名）
*   角色（名称（pk），描述）

我无法更改模型中的用户定义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T13:49:10.180

您对 PrimaryKeyJoinColumn 的使用似乎没有意义。我认为您应该只使用@JoinColumn，还是将列映射为基础？

或许包括你完整的类，以及生成的 DDL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T14:49:18.290

删除所有注释`UserRolePK`并将您的`@PrimaryKeyJoinColumn`注释更改为`@JoinColumn`注释。

# php - php上传图片，我怎样才能为这段代码添加质量？

> ID：13288522
> 
> 赞同：0
> 
> 时间：2012-11-08T11:49:52.330
> 
> 标签：php, image, upload

我想将 qualit=80 添加到我的上传图片文件中......但没有成功:(

那是我的代码：

```
<?php
// Set limit image size                                   
$limitFileSize=300000;
// Set thumbnail-height to xxx in pixels                                    
$imageheight=250; 
  if($peoplef_id=='0'){
    $query  = "SELECT * FROM peoplef WHERE emailzugang='$emailzugang1'  ";
 $result = mysql_query($query);
 while($row = mysql_fetch_array($result, MYSQL_ASSOC)){$peoplef_id=$row['id'];};
  }
if($peoplef_id!='0'){
uploadPic("pic1",$peoplef_id,$limitFileSize);
uploadPic("pic2",$peoplef_id,$limitFileSize);
uploadPic("pic3",$peoplef_id,$limitFileSize);
uploadPic("pic4",$peoplef_id,$limitFileSize);
uploadPic("pic5",$peoplef_id,$limitFileSize);
uploadPic("pic6",$peoplef_id,$limitFileSize);
uploadPic("pic7",$peoplef_id,$limitFileSize);
uploadPic("pic8",$peoplef_id,$limitFileSize);
}
function uploadPic($PicName,$itemsID,$limitFileSize)
{
 //if($_FILES[$PicName]['size'] > 0 && $_FILES[$PicName]['size'] < $limitFileSize )
 //{
 if($_FILES[$PicName]['size'] > 0  )
 {

 $fileName = $_FILES[$PicName]['name'];
 $tmpName  = $_FILES[$PicName]['tmp_name'];
 $fileSize = $_FILES[$PicName]['size'];
 $fileType = $_FILES[$PicName]['type'];
$imgsize = GetImageSize($tmpName);
    $widthWanted=$imgsize[0];
    $heightWanted=$imgsize[1];
    /*== check size  0=width, 1=height ==|| ($imgsize[1] > 200)    */
    if (($imgsize[0] > 650) ) 
    {
    $widthWanted=2000;
    $heightWanted=ceil((1600/$imgsize[0])*$imgsize[1]);
    }
 echo $widthWanted;
echo "-----";
echo $heightWanted;
 $array=array();
echo "<pre>";
$current_file=$tmpName;
$thumb_name="TempUploadImg/".$PicName.$itemsID.".jpg";
exec("convert ".$current_file." -resize $widthWantedx$heightWanted ".$thumb_name, $array); 
echo "<br>".print_r($array)."<br>"; 
echo "</pre>";
$fp      = fopen($thumb_name, 'r');
 $content = fread($fp, filesize($thumb_name));
 $content = addslashes($content);
 fclose($fp);
 if(!get_magic_quotes_gpc())
 {
 $fileName = addslashes($fileName);
 }
 $picnum=$PicName;
 $query = "INSERT INTO uploadf (peoplef_id, picnum, name, size, type, content ) ".
 "VALUES ('$itemsID', '$picnum', '$fileName', '$fileSize', '$fileType', '$content')";
 //delete("test.jpg");
 mysql_query($query) or die('Error, query failed'); 

 echo "<br>Filee ". basename( $fileName). " uploaded<br><br>";
 }
 //else
 //{    
 ///   if($_FILES[$PicName]['size'] > 0){
 // $fileName = $_FILES[$PicName]['name'];
 // echo "<br><font color=red> File limit Size is $limitFileSize  ; canot uploaded $fileName  </font><br>";
 //   }
 //}
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T00:32:32.857

实际上这是一个 Imagemagick 问题，因为调整大小是使用 Imagemagick 完成的。

根据[文档](http://www.imagemagick.org/script/command-line-options.php?#quality)，在编写 JPEG 时设置质量你设置`-quality`，所以你需要像这样更改代码：

```
exec("convert ".$current_file." -resize $widthWantedx$heightWanted -quality 80 ".$thumb_name, $array); 
```

# ruby-on-rails-3 - Capybara-Webkit 关闭 webkit_server

> ID：13288526
> 
> 赞同：9
> 
> 时间：2012-11-08T11:49:58.980
> 
> 标签：ruby-on-rails-3, capybara, resque, capybara-webkit

我正在使用 Capybara-Webkit 来自动化网站上的一些工作。这是在 Resque 任务的后台完成的。在一些执行之后，有很多 webkit_server 进程没有被 Capybara 关闭。那么我怎样才能强迫Capybara在最后关闭它呢？

```
session = Capybara::Session.new(:webkit)
session.visit URL
session.click_button(BUTTON)
.... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-11-28T19:14:48.873

您必须`page.quit`在每个测试用例结束时使用来关闭所有浏览器实例。

# sql - 如何分组和计数项目并获得整行？

> ID：13288527
> 
> 赞同：0
> 
> 时间：2012-11-08T11:50:04.500
> 
> 标签：sql, tsql

此查询获取所需的行 - 按主题分组 - 我还想知道每个组中的项目数。

```
SELECT log.* FROM [hm_deliverylog] AS log
WHERE log.deliveryid IN
    (
        SELECT MAX([deliveryid])  FROM [hm_deliverylog]
        WHERE [deliverytime] > DATEADD(HOUR, -12, GETDATE())
        GROUP BY deliverysubject
    )

ORDER BY deliveryid DESC 
```

我如何计算组？像下面这样？

```
SELECT joined.groupcount, log.* FROM [hm_deliverylog] AS log 
```

PS：想象一下 Gmail 收件箱；它显示最新消息并显示消息计数。我想将具有相同主题的消息分组并计算它们...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T11:53:23.933

您可以使用[`OVER`子句](http://msdn.microsoft.com/en-us/library/ms189461.aspx)：

```
SELECT COUNT(deliveryid) OVER (PARTITION BY deliverysubject) As GroupCount 
```

> 在应用关联的窗口函数之前确定行集的分区和排序。也就是说，OVER 子句在查询结果集中定义了一个窗口或用户指定的一组行。然后窗口函数为窗口中的每一行计算一个值。您可以将 OVER 子句与函数一起使用来计算聚合值，例如移动平均值、累积聚合、运行总计或每组结果的前 N ​​个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T12:02:24.347

一种方法是将`COUNT()`计算放在子查询中，而不是使用`IN`，将派生表连接起来：

```
SELECT log.* 
     , grp.cnt AS groupcount
FROM 
    [hm_deliverylog] AS log
  JOIN 
    (
        SELECT MAX([deliveryid]) AS deliveryid
             , COUNT(*) AS cnt  
        FROM [hm_deliverylog]
        WHERE [deliverytime] > DATEADD(HOUR, -12, GETDATE())
        GROUP BY deliverysubject
    ) AS grp
    ON grp.deliveryid = log.deliveryid
ORDER BY 
    log.deliveryid DESC ; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T11:59:45.213

```
SELECT log.*, COUNT(*) OVER (PARTITION BY deliverysubject) AS groupcount 
FROM [hm_deliverylog] AS log
GROUP BY deliverysubject 
```

# java - Log4j 打印整个网页、响应和图像

> ID：13288529
> 
> 赞同：0
> 
> 时间：2012-11-08T11:50:09.073
> 
> 标签：java, web-services, log4j

我不知道这是否发生在任何人身上，我已经搜索过了，还没有找到任何解决方案，Log4J 也会打印所有网站内容和响应代码和图像..

```
][0xaf][0xac]aSn[0xbc][0xe4][0x85][0xbf]i[0x1]p[0xad][0x82])O[0xbb]"[0xd7]u[0x1a][0xcc]Q[0x87][0x98][0xeb][0xcb]+[0xf9][0x1e][0xa5][0xfd][0x83]l[0xb7][0xd6][0xb2][0xb4]RL2[0xe][0xc3]}[0xc][0xff]][0xf5][0xe3][0xad][0xda][0x83]a[0x91][\r]g[0x9a][0x9b][0xe6][0xeb][0xb7][0x80][0x8b][0xfb][0x12]:[0x14]3C[0xad][0xe5]JNN[0xc0][0xd3][0xb6]%[0xe1]_[0xd0]z([0xa4]K[0x90][0xcd][0xd8][0xcb][0xdb][0xfe][0xcc][0xf0][0x17][0xb0][0xab]f[0x7][0xc5][0x84][0xb6]=[0x91]6[0xc1]=r[0x86][0xc3]}^D4<[0xa0][0x8a][0x6]>[0xed][0xa7][0xa4][0xec]1[0x4][0x9b][0xdc][0xa5]Y*[0xa3][0xaa][0x13][0x9f]R[0x9e][\r][0x81][0xb0][0x99][0xcd]J[0xf8][0x12][0x88][0xfa]o[0x96][0xdd][0x92][\r][0xd0][0xbd][0xb8]du[0xa3]>[0xf5][0xe2][0xaa][0xb][0xd3][0xd1][0xad]0[0xf6]6[0xef]s[0x8b][0xcf][0xd0][0xd0][0xa8](0[0xa5]x[0x9]V[0x13][0xcb][0x1]<[0x83c[0xf1]A[0xfa]f[0xfa][0x97]SM[0xf3][0xc][0x91][0xe8][0x96][0x16]i[0xbf]"b[0xab][0x95]l[0x11]e[0xbd]_[0xe8] [0xe9][0xb0]A''[0xc7][0x9e][0x81][0xa7]"*[0x0]a[0xb][0xac]R[0x9f]x[0xcc][0x1c][0xc9][0xc0][0xcf][0xd8]J[0x19][0xa3]>e[0xde][0x99][0xcf]T[0xc2]{r[0xc5][0x84]r*[0xa4]8[0xe]"
2012-11-08 11:23:40,728 DEBUG - >> "[\r][\n]"
2012-11-08 11:23:40,728 DEBUG - >> "--"
2012-11-08 11:23:40,728 DEBUG - >> "Rn8Y3anzO4BsiuQ8eSDsFYPH8Yef21FYHm"
2012-11-08 11:23:40,728 DEBUG - >> "[\r][\n]"
2012-11-08 11:23:40,728 DEBUG - >> "Content-Disposition: form-data; name="
2012-11-08 11:23:40,728 DEBUG - >> """
2012-11-08 11:23:40,728 DEBUG - >> "description"
2012-11-08 11:23:40,728 DEBUG - >> """
2012-11-08 11:23:40,728 DEBUG - >> "[\r][\n]"

2012-11-08 11:23:40,728 DEBUG - >> "Rn8Y3anzO4BsiuQ8eSDsFYPH8Yef21FYHm"
    2012-11-08 11:23:40,728 DEBUG - >> "--"
    2012-11-08 11:23:40,728 DEBUG - >> "[\r][\n]"
    2012-11-08 11:23:40,728 DEBUG - Request body sent
    2012-11-08 11:23:41,481 DEBUG - << "HTTP/1.1 200 OK[\r][\n]"
    2012-11-08 11:23:41,481 DEBUG - << "HTTP/1.1 200 OK[\r][\n]"
    2012-11-08 11:23:41,481 DEBUG - << "Server: Apache-Coyote/1.1[\r][\n]"
    2012-11-08 11:23:41,481 DEBUG - << "Content-Type: text/html;charset=UTF-8[\r][\n]"
    2012-11-08 11:23:41,481 DEBUG - << "Transfer-Encoding: chunked[\r][\n]"
    2012-11-08 11:23:41,481 DEBUG - << "Date: Thu, 08 Nov 2012 11:14:44 GMT[\r][\n]"
    2012-11-08 11:23:41,481 DEBUG - << "[\r][\n]"
    2012-11-08 11:23:41,481 DEBUG - Completed Getting Page
    2012-11-08 11:23:41,481 DEBUG - << "5"
    2012-11-08 11:23:41,481 DEBUG - << "0"
    2012-11-08 11:23:41,481 DEBUG - << "[\r]"
    2012-11-08 11:23:41,481 DEBUG - << "[\n]"
    2012-11-08 11:23:41,481 DEBUG - << "{"status":"OK","code":"unspecified","message":"successfully uploaded procedure"}"
    2012-11-08 11:23:41,481 DEBUG - << "[\r]"
    2012-11-08 11:23:41,481 DEBUG - << "[\n]"
    2012-11-08 11:23:41,481 DEBUG - << "0"
    2012-11-08 11:23:41,481 DEBUG - << "[\r]"
    2012-11-08 11:23:41,481 DEBUG - << "[\n]"
    2012-11-08 11:23:41,481 DEBUG - << "[\r]"
    2012-11-08 11:23:41,481 DEBUG - << "[\n]"
    2012-11-08 11:23:41,481 DEBUG - << "[\r][\n]"
    2012-11-08 11:23:41,481 DEBUG - Resorting to protocol version default close connection policy
    2012-11-08 11:23:41,482 DEBUG - Should NOT close connection, using HTTP/1.1
    2012-11-08 11:23:41,482 DEBUG - Releasing connection back to connection manager. 
```

**我正在使用 apaches 的 httpClient 的 PostMethod() 和 GetMethod() .. 将数据从一个 servlet 发送到另一个 servlet。** 我不打印这些。log4j 自己打印这些。我不明白。日志文件的大小约为 50 到 100 MB。

我的 Log4j 配置：-

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE log4j:configuration SYSTEM "log4j.dtd">

<log4j:configuration xmlns:log4j="http://jakarta.apache.org/log4j/" debug="false">

   <appender name="consoleAppender" class="org.apache.log4j.ConsoleAppender">
      <param name="Threshold" value="INFO" />
      <layout class="org.apache.log4j.PatternLayout">
         <param name="ConversionPattern" value="%d %-5p  [%c{1}] %m %n" />
      </layout>
   </appender>
   <appender name="DRFA" class="org.apache.log4j.DailyRollingFileAppender">
    <param name="File" value="/home/server/webSpecimen.log" />
    <param name="DatePattern" value="'.'yyyy-MM-dd" />
    <param name="Append" value="true" />
    <param name="Threshold" value="DEBUG" />

        <layout class="org.apache.log4j.PatternLayout">
            <param name="ConversionPattern" value="%d %-5p - %m%n" />
        </layout>
    </appender>

   <root>
                <level value="DEBUG" />
                <appender-ref ref="DRFA" />
        </root>

</log4j:configuration> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T11:57:05.607

this may help you [http://en.wikipedia.org/wiki/Log4j](http://en.wikipedia.org/wiki/Log4j)

as I saw you have set it to debug level try to put it on INFO, WARN or ERROR level. for further details please read above link.

Thanks

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T12:07:32.910

我不认为这是 log4j 的错。我认为`HttpClient`代码库只是在 DEBUG 级别进行大量日志记录。解决方案是将根记录器级别更改为 INFO 减少日志记录......或者为 HttpClient 正在使用的记录器更有选择性地执行此操作。（不幸的是，您的附加程序模式不包括记录器名称......）

* * *

> .. 但是为什么 log4j 会打印图像和整个网站...

因为这就是您的 log4j 配置告诉它要做的事情：

*   阅读[log4j 介绍](http://logging.apache.org/log4j/1.2/manual.html)，特别是关于如何编写配置文件的部分。
*   更改您的配置，以便为生成这些日志消息的特定记录器使用不同的日志级别。

> 我刚刚注释掉了一个类中的所有日志，其中打印了所有不必要的日志......

那是错误的做法。您需要了解 log4j 如何决定记录哪些内容和不记录哪些内容。阅读文档。随意评论内容无济于事。

> 是不是因为我使用的是 HttpClient 3.1 而当前版本是 4.2.2 ..

不，这不是原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T12:09:15.867

在您的 log4j 中将 DEBUG 更改为 INFO 并查看。

在 Log4j 中有层次结构

记录器可能被分配级别。可能级别的集合，即：[learn here](http://logging.apache.org/log4j/1.2/manual.html)

```
TRACE,
DEBUG,
INFO,
WARN,
ERROR and
FATAL 
```

当您进行调试时，它将打印 DEBUG 和所有以下日志级别。如果您输入 INFO，它将打印 INFO 和所有波纹管级别的日志。

通常，如果您在生产模式下运行，请准备好放置 ERROR

更新的下面也参考[这个](https://stackoverflow.com/questions/4915414/disable-httpclient-logging)

将此添加到您的 log4j xml 并尝试

```
<logger name="httpclient.wire" additivity="false" >
  <level value="INFO" />
  <appender-ref ref="consoleAppender"/>
  <appender-ref ref="fileAppender"/>
  </logger> 
```

# maven - 马文 部分文件夹名称的通配符匹配

> ID：13288532
> 
> 赞同：2
> 
> 时间：2012-11-08T11:50:20.523
> 
> 标签：maven, maven-3, wildcard

使用 maven-clean-plugin 我想删除所有以“tmp”开头的文件夹。这是否可以使用 Maven 通配符？我试过了：

```
<fileset>
    <directory>${project.basedir}</directory>
    <includes>
        <include>**/tmp*</include>
    </includes>
</fileset> 
```

哪个不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T11:59:30.293

此配置对我有用：

```
<plugin>
    <artifactId>maven-clean-plugin</artifactId>
    <version>2.5</version>
    <configuration>
        <filesets>
            <fileset>
                <directory>${project.basedir}</directory>
                <includes>
                    <include>**/tmp*/</include>
                </includes>
            </fileset>
        </filesets>
    </configuration>
</plugin> 
```

如果我在项目根目录中添加这些文件夹：

```
some/tmp/
some/tmpFolder/
some/realFolder/ 
```

然后`mvn clean`将删除前两个文件夹并保留最后一个。

# iphone - UITabBarController 作为 MonoTouch 中的 RootViewController

> ID：13288534
> 
> 赞同：0
> 
> 时间：2012-11-08T11:50:26.107
> 
> 标签：iphone, mono, xamarin.ios, uitabbarcontroller, xib

我有一个带有 UITabBarController 的 HomeScreen，我想将其设置为 RootViewController，但是当我这样做时出现以下错误

```
MonoTouch.Foundation.MonoTouchException has been thrown:

Objective-C exception thrown.  Name: NSUnknownKeyException Reason: [<UIApplication 0xc82d330> setValue:forUndefinedKey:]: this class is not key value coding-compliant for the key tabBarController.

MonoTouch.Foundation.MonoTouchException: Objective-C exception thrown.  Name: NSUnknownKeyException Reason: [<UIApplication 0xc82d330> setValue:forUndefinedKey:]: this class is not key value coding-compliant for the key tabBarController.
  at (wrapper managed-to-native) MonoTouch.UIKit.UIApplication:UIApplicationMain (int,string[],intptr,intptr)
  at MonoTouch.UIKit.UIApplication.Main (System.String[] args, System.String principalClassName, System.String delegateClassName) [0x0004c] in /Developer/MonoTouch/Source/monotouch/src/UIKit/UIApplication.cs:38
  at Test.Application.Main (System.String[] args) [0x00000] in /Users/merqurio/Projects/Test/Test/Main.cs:17 
```

我还将 Nib Name 设置为与 File's Owner 相同的 XIB 名称。

这是我的项目示例。[点击这里下载项目](http://www.merqurio.net/download/test/test.zip)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T11:56:08.760

You have to set Viewcontrollers programmatically....like following

```
-(id)init {

   self = [super init];
    if (self) {

        HomePageViewController *homePageViewController = [[HomePageViewController alloc]initWithNibName:@"HomePageViewController" bundle:nil];
        WorkoutOfTheDayViewController *workoutOfTheDayViewController = [[WorkoutOfTheDayViewController alloc]initWithNibName:@"WorkoutOfTheDayViewController" bundle:nil];
        ScheduleViewController *scheduleViewController = [[ScheduleViewController alloc]initWithNibName:@"ScheduleViewController" bundle:nil];
        TrackingViewController *trackingViewController = [[TrackingViewController alloc]initWithNibName:@"TrackingViewController" bundle:nil];

        UINavigationController *navHome = [[UINavigationController alloc]initWithRootViewController:homePageViewController];
        UINavigationController *navWorkOut = [[UINavigationController alloc]initWithRootViewController:workoutOfTheDayViewController];
        UINavigationController *navSchedule = [[UINavigationController alloc]initWithRootViewController:scheduleViewController];
        UINavigationController *navTrack = [[UINavigationController alloc]initWithRootViewController:trackingViewController];

        homePageViewController.tabBarItem = [[UITabBarItem alloc]initWithTitle:@"Home" image:[UIImage imageNamed:@"home.png"] tag:0];
        workoutOfTheDayViewController.tabBarItem = [[UITabBarItem alloc]initWithTitle:@"Log WOD" image:[UIImage imageNamed:@"wod.png"] tag:1];
        scheduleViewController.tabBarItem = [[UITabBarItem alloc]initWithTitle:@"Schedule" image:[UIImage imageNamed:@"schedule.png"] tag:2];
        trackingViewController.tabBarItem = [[UITabBarItem alloc]initWithTitle:@"Tracking" image:[UIImage imageNamed:@"tracking.png"] tag:3];

        self.viewControllers = [NSArray arrayWithObjects:navHome,navWorkOut,navSchedule,navTrack, nil];

    }
    return self;
} 
```

create one separate class as `UITabbarcontroller`...

then inside of `Appdelegate.h`

```
self.window.rootViewController = [[MainTabBarController alloc]init]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T11:58:30.220

```
public override bool FinishedLaunching(UIApplication app, NSDictionary options)
{
    _mainWindow = new UIWindow(UIScreen.MainScreen.Bounds);
    _mainTabBarController = new MainTabBarController();
    _mainWindow.AddSubview(_mainTabBarController.View);
    _mainWindow.MakeKeyAndVisible ();
    window.RootViewController = _mainTabBarController.View;
    return true;
} 
```

像下面这样`MainTabBarController`..

```
public class MainTabBarController : UITabBarController
{
    public override void ViewDidLoad ()
    {
        ViewControllers = new UIViewController[]
        {
            new ViewControllerTab1(),
            new ViewControllerTab2(),
            new ViewControllerTab3(),
            new ViewControllerTab4(),
            new ViewControllerTab5()
        };

    }
} 
```

有关更多信息，请参阅[此答案](https://stackoverflow.com/questions/4565153/monotouch-how-to-select-initial-view-from-tabbarcontrollers-multiple-views)

# php - 如何从 PHP 中的连接字符串构建树？

> ID：13288536
> 
> 赞同：0
> 
> 时间：2012-11-08T11:50:35.870
> 
> 标签：php, mysql, recursion

我尝试从存储在我的 mysql 数据库中的连接字符串中的层次结构在 PHP 中创建一个树列表

这是我的桌子：

![表格截图](../Images/1d6bb0b12a5c34c5d358ae4479126a53.png)

我想重现这样的东西：

```
<ul>
  <li>
    <ul>
      <li></li>
      <li>
          <ul>
              <li></li>
              <li></li>
           </ul>
      </li>
      <li></li>
    </ul>
  </li>
  <li></li>
  <li></li>
</ul> 
```

我知道我必须使用我无法做到的递归函数......

也许有人可以帮助我

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T17:59:25.660

### 没有注释的代码

请参阅下面的用法和数据集部分，了解您需要传递的内容以及如何使用这些函数：

```
function items_to_tree( $items ){
  $array = array();
  foreach( $items as $item ) {
    $parts = explode('.', $item['hierarchy']);
    $last = array_pop( $parts );
    $cursor = &$array;
    foreach ( $parts as $part ) {
      if ( !is_array($cursor[$part]) ) {
        $cursor[$part] = array();
      }
      $cursor = &$cursor[$part];
    }
    $cursor[$last]['#item'] = $item;
  }
  return $array;
}

function tree_to_ul( $tree ){
  $html = $children = '';
  foreach( $tree as $key => $item ){
    if ( substr($key,0,1) == '#' ) continue;
    $children .= tree_to_ul( $item );
  }
  if ( isset($tree['#item']) ) {
    $html .= '<li>' . PHP_EOL;
    $html .= '<em>' . $tree['#item']['menu_text'] . '</em>' . PHP_EOL;
    $html .= ( $children ? '<ul>' . $children . '</ul>' . PHP_EOL : '' );
    $html .= '</li>' . PHP_EOL;
    return $html;
  }
  else {
    return $children;
  }
} 
```

### 带有注释和解释的代码

将您的项目转换为树结构的代码：

```
function items_to_tree( $items ){
  $array = array();
  foreach( $items as $item ) {
    /// split each hierarchy string into it's dot separated parts
    $parts = explode('.', $item['hierarchy']);
    /// pop off the last item of the array, we'll use this for assignment later
    $last = array_pop( $parts );
    /// create a reference to our position in the array we wish to fill out
    $cursor = &$array;
    /// step each hierarchy part and travel down the array structure, 
    /// just like you would if you typed an array path manually. 
    /// i.e. $array[$part][$part][...] and so on
    foreach ( $parts as $part ) {
      /// if at this point in the array, we don't have an array, make one.
      if ( !is_array($cursor[$part]) ) {
        $cursor[$part] = array();
      }
      /// ready for the next step, shift our reference to point to the next
      /// $part in the array chain. e.g. if $cursor pointed to `$array[$part]`
      /// before, after the next line of code the $cursor will point 
      /// to `$array[$oldpart][$part]`
      $cursor = &$cursor[$part];
    }
    /// we popped the last item off the $parts array so we could easily
    /// assign our final value to where the $cursor ends up pointing to.
    /// starting with a hierarchy of '00001.00002.00003' would mean at this
    /// point $cursor points to $array['00001']['00002'] and $last = '00003';
    /// so finally we get $array['00001']['00002']['00003']['#item'] = $item;
    $cursor[$last]['#item'] = $item;
    /// use '#item' to keep our item's information separate from it's children.
  }
  /// return our built up array.
  return $array;
} 
```

将树结构转换为 UL 的代码：

```
function tree_to_ul( $tree ){
  /// start with nothing
  $html = $children = '';
  /// step each item found in the current level of $tree
  foreach( $tree as $key => $item ){
    /// if the item's key starts with a # skip, these contain
    /// our item's information and should not be treated as children
    if ( substr($key,0,1) == '#' ) continue;
    /// recurse this function so that we do the same for any child @ any level.
    $children .= tree_to_ul( $item );
  }
  /// if at this level a #item has been set, use this item information to
  /// add a title to our level. You could change this to add whatever info
  /// from your original database item that you'd like.
  if ( isset($tree['#item']) ) {
    $html .= '<li>' . PHP_EOL;
    $html .= '<em>' . $tree['#item']['menu_text'] . '</em>' . PHP_EOL;
    $html .= ( $children ? '<ul>' . $children . '</ul>' . PHP_EOL : '' );
    $html .= '</li>' . PHP_EOL;
    return $html;
  }
  /// if there wasn't an item, just return the traversed children.
  else {
    return $children;
  }
} 
```

数据集：

```
/// I simplified your dataset to an array, this could easily be generated
/// from a database query. You could also convert my code so that you
/// don't have to pre-generate an array, and instead could process after
/// each fetch from the database.

$items = array(
  array('hierarchy' => '00001',             'menu_text' => 'One'),
  array('hierarchy' => '00002',             'menu_text' => 'Two'),
  array('hierarchy' => '00002.00001',       'menu_text' => 'Three'),
  array('hierarchy' => '00002.00002',       'menu_text' => 'Four'),
  array('hierarchy' => '00002.00003',       'menu_text' => 'Five'),
  array('hierarchy' => '00002.00004',       'menu_text' => 'Six'),
  array('hierarchy' => '00003',             'menu_text' => 'Seven'),
  array('hierarchy' => '00003.00001',       'menu_text' => 'Eight'),
  array('hierarchy' => '00003.00001.00001', 'menu_text' => 'Nine'),
  array('hierarchy' => '00003.00001.00002', 'menu_text' => 'Ten'),
  array('hierarchy' => '00003.00001.00003', 'menu_text' => 'Eleven'),
  array('hierarchy' => '00003.00002',       'menu_text' => 'Twelve'),
); 
```

用法：

```
/// Simple usage :) if a little complex explanation

$tree = items_to_tree( $items );
$html = tree_to_ul( $tree );

echo $html; 
```

### 为了代码高尔夫的利益；）

以下可以取代我的`items_to_tree`功能 - 但不建议这样做。

```
$a = array();
foreach($items as $i){
 eval('$a["'.str_replace('.','"]["',$i['hierarchy']).'"]=array("#item"=>$i);');
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T14:12:55.510

```
 $refs = new stdClass();
    //Assuming $data is the result array of your query to fetch the data.
    foreach($data as $result)
    {
        $name = $result['hierarchy'];
        $parent = substr($result['hierarchy'],0,strrpos($result['hierarchy'],'.'));
        $thisref = &$refs->{$name};
        foreach($result as $k => $v)
        {
            $thisref->{$k} = $v;
        }
        if ($parent == '') {
            $tree->{$name} = &$thisref;
        } else {
            $refs->{$parent}->children->{$name} = &$thisref;
        }
    } 
```

这将为您提供一个不错的对象，其中包含属性 children 中的每个节点的子节点。

```
function drawUL($level){
    echo '<ul>';
    foreach($level as $li){
        echo '<li>'.$li->label;
        if(isset($li->children))drawUl($li->children);
        echo '</li>';
    }
    echo '</ul>';
}
drawUl($tree); 
```

# widget - Sitefinity 获取分类和所有相关页面

> ID：13288543
> 
> 赞同：0
> 
> 时间：2012-11-08T11:51:05.140
> 
> 标签：widget, sitefinity, custom-taxonomy

我们正在测试 Telerik Sitefinity CMS 是否可以在客户端中使用，我尝试创建一个自定义小部件来获取我创建的分类并将所有内容标题显示为链接。

前任。：

*   国家
    *   英国
        *   伦敦
        *   牛津
    *   巴西
        *   巴西利亚
        *   圣保罗

有人知道我该怎么做吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T09:50:30.370

在 5.4 版之前，没有办法让 Sitefinity Pages 连接到分类法，如果这是您的问题？（假设是，根据您的标题）。Sitefinity 6 可能就是这种情况。

您可以获取要使用分类法标记和分类的内容项，并将它们显示在页面上。因此，例如新闻、博客、动态模块等。这可以通过配置分类小部件之一来过滤其中一种内容类型来完成。这一切都在 Sitefinity 文档中进行了描述。

那是你需要的吗？

丹尼尔

# lua - Luabind 调用约定问题

> ID：13288547
> 
> 赞同：1
> 
> 时间：2012-11-08T11:51:24.170
> 
> 标签：lua, calling-convention, luabind

我遇到了 Luabind 的问题，如果没有一些过于简化的解决方案，我不确定如何解决。

Luabind 似乎只允许使用`__cdecl`调用约定绑定到函数。在我当前的项目中，所有暴露给扩展/插件的功能都是使用`__stdcall`. 这使我无法直接绑定暴露的对象，而是必须为暴露的对象制作包装器。这很好，但有很多对象需要包装。

例如，一个对象可能如下所示：

```
struct IObject
{
    void __stdcall SomeFunc1( void );
    void __stdcall SomeFunc2( const char* );
};

struct IObjectContainer
{
    IObject* __stdcall GetObject( int );
    IObject* __stdcall GetObject( const char* );
};

struct IObjectCore
{
    IObjectContainer* __stdcall GetObjectContainer();
}; 
```

我目前没有更改整个项目调用约定的选项，因此我正在查看是否有人有解决方案来修补 Luabind 以使用`__stdcall`函数。我在模板和增强功能方面不是最好的，所以我个人不确定从哪里开始尝试添加使用`__stdcall`功能的能力。

作为参考，我正在使用：

*   路亚 5.1.4
*   Luabind 0.9.1
*   VS2010

Lua 和 Luabind 都是其版本的最新版本。（出于项目限制的原因，不使用 Lua 5.2，但如果`__stdcall`5.2/Luabind 有修复，我也很乐意接受。）

我只能找到一个非常旧版本的 Luabind 的修复程序来执行此操作，但网上浮动的补丁仍然与当前的 Luabind 代码完全不符。

如果需要任何其他信息，请随时询问。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T18:39:50.237

可悲的是，由于不活动并且没有更多的搜索得到进一步的答案，我与项目开发人员进行了交谈，并且整个项目都被剥夺了 __stdcall。因此，现在通过 __cdecl 绑定都可以正常工作。不是我想走的路线，但现在一切都在按计划进行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-16T02:15:38.973

在将 OpenGL（使用 GLEW 函数）绑定到 Lua 时，我遇到了完全相同的问题，并使用可变参数模板解决了这个问题。

现在，如果该函数是全局的，并且您在编译时知道它的地址，那么您可以使用以下方法：

```
template<typename Signature>
struct wrap_known;

template<typename Ret, typename... Args>
struct wrap_known<Ret __stdcall (Args...)> {
    template <Ret __stdcall functor(Args...)>
    static Ret invoke(Args... arguments) {
        return functor(arguments...);
    }
};

// I know using macro is generally a bad idea but it's just shorter
#define wrap(f) wrap_known<decltype(f)>::invoke<f> 
```

然后，在绑定时，使用这样的宏：

```
luabind::def("Clear", wrap(glClear)),
luabind::def("Vertex4f", wrap(glVertex4f)) 
```

但是，在您的情况下，我们有一堆成员函数，而不是像上面那样的全局函数。 **以下是使用 __stdcall 调用约定包装成员函数的代码：**

```
template<typename Signature>
struct wrap_mem;

template<typename Sub, typename Ret, typename... Args>
struct wrap_mem<Ret(__stdcall Sub::*) (Args...)> {

    template <Ret(__stdcall Sub::*functor) (Args...)>
    static Ret invoke(Sub* subject, Args... arguments) {
        return (subject->*functor)(arguments...);
    }
};

#define wrap_member(f) wrap_mem<decltype(f)>::invoke<f> 
```

**像这样使用它：**

```
struct A {
    int __stdcall my_method(double b) {
        return 2;
    }
};

// ...
luabind::class_<A>("A")
.def("my_method", wrap_member(&A::my_method)) 
```

然而，有时，在编译时知道函数的地址并不那么幸运，例如 GLEW 就会发生这种情况。对于 glUniform*f、glGetUniformLocation 等函数，“wrap”宏将不起作用，因此我制作了另一个版本，用于在运行时包装函数：

```
template<typename Signature>
struct wrap_unknown;

template<typename Ret, typename... Args>
struct wrap_unknown<Ret (__stdcall*) (Args...)> {
    template <Ret (__stdcall** functor)(Args...)>
    static Ret invoke(Args... arguments) {
        return (**functor)(arguments...);
    }
};

#define wrap_ptr(f) wrap_unknown<decltype(f)>::invoke<&f> 
```

（如果上面的代码吓到你了，这实际上是一个好兆头）

现在您可以像这样绑定 GLEW 函数：

```
luabind::def("Uniform4f", wrap_ptr(glUniform4f)),
luabind::def("GetUniformLocation", wrap_ptr(glGetUniformLocation)) 
```

只是不要让我编写另一个版本来将指针绑定到运行时已知的成员:)

如果您出于某种原因不想使用 C++11，[您可以在此处了解如何在 C++03 中将函数参数和返回值作为模板参数传递](https://stackoverflow.com/questions/14441410/function-signature-as-template-parameter)。

# javascript - ASP.net (Document).ready() 无法运行

> ID：13288548
> 
> 赞同：0
> 
> 时间：2012-11-08T11:51:32.360
> 
> 标签：javascript, jquery, html, asp.net-mvc, document-ready

我有一个 ASP.net MVC 4 Web 应用程序（Visual Basic）。在 _Layout.vbhtml 共享视图上，我在代码的最底部有一小段 javascript，用于隐藏加载 div 并在所有内容加载后显示主页内容。

这是 .vbhtml 文件的一部分：

```
 <!-- JQuery & Javascript Loading -->
        @Scripts.Render("~/bundles/jquery", "~/bundles/jquerymain", "~/bundles/bootstrap", "~/bundles/lib", "~/bundles/gebo_dashboard")
        @RenderSection("scripts", required:=False)

        <!-- Close loading page -->
        <script type="text/javascript">
            $(document).ready(function () {
                //* show all elements & remove preloader
                alert("Hello Ready");
                setTimeout('$("html").removeClass("js")', 1000);
            });
        </script>
    </div>
</body> 
```

这是生成的html：

```
 <!-- JQuery & Javascript Loading -->
        <script src="/Scripts/jquery-1.7.1.js"></script>
        <script src="/Scripts/jquery/jquery.ui.touch-punch.js"></script>
        <script src="/Scripts/jquery/jquery.ui.totop.js"></script>
        <script src="/Scripts/jquery/jquery.easing.1.3.js"></script>
        <script src="/Scripts/jquery/jquery.debouncedresize.js"></script>
        <script src="/Scripts/jquery/jquery.cookie.js"></script>
        <script src="/Scripts/jquery/jquery.qtip.js"></script>
        <script src="/Scripts/jquery/jquery.colorbox.js"></script>
        <script src="/Scripts/jquery/jquery.jBreadCrumb.1.1.js"></script>
        <script src="/Scripts/jquery/jquery.actual.js"></script>
        <script src="/Scripts/jquery/jquery.imagesloaded.js"></script>
        <script src="/Scripts/jquery/jquery.wookmark.js"></script>
        <script src="/Scripts/jquery/jquery.mediaTable.js"></script>
        <script src="/Scripts/jquery/jquery.peity.js"></script>
        <script src="/Scripts/jquery/jquery.flot.js"></script>
        <script src="/Scripts/jquery/jquery.flot.pie.js"></script>
        <script src="/Scripts/jquery/jquery.flot.resize.js"></script>
        <script src="/Scripts/bootstrap/bootstrap.js"></script>
        <script src="/Scripts/bootstrap/bootstrap.plugins.js"></script>
        <script src="/Scripts/lib/jquery-mousewheel.js"></script>
        <script src="/Scripts/lib/antiscroll.js"></script>
        <script src="/Scripts/lib/fullcalendar.js"></script>
        <script src="/Scripts/lib/ios-orientationchange-fix.js"></script>
        <script src="/Scripts/lib/list.js"></script>
        <script src="/Scripts/lib/list.paging.js"></script>
        <script src="/Scripts/lib/prettify.js"></script>
        <script src="/Scripts/lib/sticky.js"></script>
        <script src="/Scripts/gebo/gebo_common.js"></script>
        <script src="/Scripts/gebo/gebo_dashboard.js"></script>

        <!-- Close loading page -->
        <script type="text/javascript">
            $(document).ready(function () {
                //* show all elements & remove preloader
                alert("Hello Ready");
                setTimeout('$("html").removeClass("js")', 1000);
            });
        </script>
    </div>
</body> 
```

当我加载页面并在浏览器中查看它时，$(document).ready 函数永远不会触发，因此加载 div 可见。

我已经通过在 $(document).ready 函数之前和之后放置一个警报来测试脚本部分，并且警报完全按照我期望的方式触发。但是 $(document).ready 函数内部的警报永远不会显示，表明该函数永远不会运行。

我也尝试过使用 pageLoad() 函数，但也没有运气。

有谁知道为什么这拒绝工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T12:04:22.420

啊，我才发现问题。我一直在将一个模板移植到我的 ASP.net 项目中，根据 Firebug，页面上有一个 javascript 错误。不知道我是如何错过它的，但解决错误已经解决了这个问题。:)

# wordpress - 如何扩展默认搜索以包含插件的数据？

> ID：13288551
> 
> 赞同：0
> 
> 时间：2012-11-08T11:51:48.927
> 
> 标签：wordpress

我想在我的自定义插件表中进行搜索。即当我搜索一些关键字或短语时，它也应该在我的自定义表中搜索。

如果数据来自我的自定义表，那么它应该执行我的插件功能来显示数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T06:22:14.307

不知道这是否是一个好的解决方案，但我自己做了。见下文 ：

1.  我将 search.php 添加到我的默认主题中
2.  在 have_posts 的 if 条件之后和 else 之前的部分意味着我插入了我的代码

    elseif (pdfsearch_result($_GET['s'])): $search_pdf = mysearch_result($_GET['s']); // 我的搜索功能来搜索我的插件数据

然后进行格式化并达到预期的结果。希望这可能对某人有所帮助，但如果有更好的方法，请发布。

# javascript - CSS光标不适用于动态添加的地图标签

> ID：13288553
> 
> 赞同：3
> 
> 时间：2012-11-08T11:52:03.653
> 
> 标签：javascript, css, map, cursor

这是我的代码：

```
function addAlbum(){
    var attr;
    var parent;
    var newelement;

    /*image*/
    newelement = document.createElement("img");
    newelement.src = "criar_album.png";

    attr = document.createAttribute("id");
    attr.value = "addalbum";
    newelement.setAttributeNode(attr);

    attr = document.createAttribute("usemap");
    attr.value = "#addalbum_map";
    newelement.setAttributeNode(attr);

    parent = document.getElementById("content");
    parent.appendChild(newelement);
    /*-----------------------------------------*/

    /*map*/
    newelement = document.createElement("map");

    attr = document.createAttribute("id");
    attr.value = "album_map";
    newelement.setAttributeNode(attr);

    attr = document.createAttribute("style"); /*this part is failing I guess*/
    attr.value = "cursor:pointer";
    newelement.setAttributeNode(attr);

    attr = document.createAttribute("name");
    attr.value = "addalbum_map";
    newelement.setAttributeNode(attr);

    parent = document.getElementById("addalbum");
    parent.appendChild(newelement);
    /*-----------------------------------------*/

    /*area*/
    newelement = document.createElement("area");

    attr = document.createAttribute("shape");
    attr.value = "rect";
    newelement.setAttributeNode(attr);

    attr = document.createAttribute("coords");
    attr.value = "73, 238, 115, 264";
    newelement.setAttributeNode(attr);

    attr = document.createAttribute("onclick");
    attr.value = "createAlbum()";
    newelement.setAttributeNode(attr);

    attr = document.createAttribute("onmouseover");
    attr.value = "highlightOn(470,320,511,346,2)";
    newelement.setAttributeNode(attr);

    parent = document.getElementById("album_map");
    parent.appendChild(newelement);
    /*-----------------------------------------*/
} 
```

一切似乎都很好，除了当我将光标传递到区域元素时部分光标会发生变化。我用 html 中定义的静态图像做了类似的事情并且它可以工作，所以现在我很困惑为什么它不适用于动态创建的地图？

PS：已经在 CSS 中为“addalbum”id 定义了样式，但它没有帮助。顺便说一句，我知道，有一些方法可以通过定义 href 等棘手的方式来实现，但我想知道这里真正的问题是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T14:07:01.650

如果您使用的是 chrome 或 Safari，请参阅此答案。[在 Usemap/area 情况下，光标未更改为指针](https://stackoverflow.com/questions/6589768/cursor-not-changing-to-pointer-in-usemap-area-case)

我会补充一点，你的代码太复杂了。您不必添加`style`,`id`等`shape`作为属性（`attr.value = "cursor:pointer";`可能根本不会起作用）。下面的代码工作正常，产生一个很好的 1,1,100,100 映射，光标作为指针。但同样仅适用于 Opera 和 Firefox 等浏览器，但不适用于 Chrome 或 Safari (WebKit)。

```
var body=document.getElementsByTagName('body')[0];

var img = document.createElement("IMG");
img.src='1.gif';
img.useMap='#album_map';

var map = document.createElement("MAP");
map.id="album_map";
map.style.cursor="pointer"; //the right way

var area  = document.createElement("AREA");
area.shape='rect';
area.coords="1, 1, 100, 100";

map.appendChild(area);
body.appendChild(map);
body.appendChild(img); 
```

**添加标准事件：**

绑定预定义函数：

```
function imgClick() {
    alert('click');
}

body=document.getElementsByTagName('body')[0];
var img = document.createElement("IMG");
img.src='image.gif';
img.onclick=imgClick;
body.appendChild(img); 
```

或通过所谓的匿名函数：

```
img.onclick=function() {
    alert('click');
} 
```

# javascript - 函数在javascript中不返回对象

> ID：13288557
> 
> 赞同：0
> 
> 时间：2012-11-08T11:52:17.880
> 
> 标签：javascript, jquery

我在函数中返回一个对象，但它返回`undefined`为什么？这是我的代码

```
parseXML = function (xml) {
        return {
            lon  : $(xml).find('GEOCODE').find("LOC").attr('lon'),
            lat  : $(xml).find('GEOCODE').find("LOC").attr('lat'),
            x    : $(xml).find('GEOCODE').find("LOC").attr('x'),
            y    : $(xml).find('GEOCODE').find("LOC").attr('y')
        };
    },

    searchRoute = function () {
        var userloc, dest; 
        userloc = cityattr.init(from, to, fromurl, parseXML);
        //dest    = cityattr.init(from, to, fromurl, parseXML);

        console.log(userloc);
    }; 
```

**更新**

当我`console.log()`在 parseXML 内部执行时，它会返回正确的对象

```
parseXML = function (xml) {
        var obj = {
            lon  : $(xml).find('GEOCODE').find("LOC").attr('lon'),
            lat  : $(xml).find('GEOCODE').find("LOC").attr('lat'),
            x    : $(xml).find('GEOCODE').find("LOC").attr('x'),
            y    : $(xml).find('GEOCODE').find("LOC").attr('y')
        };

        console.log(obj);
    }, 
```

**更新 2**

仍然返回`undefined`

```
parseXML = function (xml) {
        return {
            lon  : $(xml).find('GEOCODE').find("LOC").attr('lon'),
            lat  : $(xml).find('GEOCODE').find("LOC").attr('lat'),
            x    : $(xml).find('GEOCODE').find("LOC").attr('x'),
            y    : $(xml).find('GEOCODE').find("LOC").attr('y')
        };
    }, 
```

这是 cityattr 的代码

```
var Xml = function () {
var to, from, url, result,

    init = function (fromaddress, toaddress, link, callback) {
        from    = fromaddress;
        to      = toaddress;
        url     = link;

        requestXml(callback);
    },

    requestXml = function (callback) {
        $.ajax({
            type: "GET",
            url: url,
            dataType: "xml",
            success: callback
        });
    },

    getResult = function () {
        return result;
    };

 return {
    init        : init,
    getResult   : getResult
 };
}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T11:55:51.140

**在***传递*给. _ _ _**`parseXML``cityattr.init`**

 **在你通过它的时候，它还没有被定义。

更改代码的顺序或使用*函数声明*。**

# php - Yii CLinkPager 隐藏第一个和最后一个

> ID：13288558
> 
> 赞同：0
> 
> 时间：2012-11-08T11:52:23.060
> 
> 标签：php, yii

当我调用 CLinkPager 时，它会自动创建一个分页器，例如：

```
<< First | < Previus | 1 | ... | 5 | Next > | Last >> 
```

如何禁用不显示`First`和`Last`分页？

CLinkPager 代码：

```
<?php $this->widget('CLinkPager', array('pages' => $pages)); ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T16:32:06.863

使用 CLinkPager 选项将其关闭实际上更干净：

```
$this->widget('CLinkPager', array('pages' => $pages,
    'firstPageLabel'=>'',
    'lastpageLabel'=>'',
)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T12:15:33.233

您可以通过 CSS 隐藏这些按钮

```
ul.yiiPager .first, ul.yiiPager .last {
display: none;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-30T00:39:36.273

或者，您可以使用 jquery 删除元素，如果仅使用 css 隐藏，按钮空间仍然存在。

```
$( document ).ready(function() {
    $( ".first" ).remove();
    $( ".last" ).remove();
    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-09-24T05:05:11.260

在 css 上创建一个`d-none`类，其中包含`display:none`并放置类名`prevPageCssClass`

```
 echo LinkPager::widget([
            'pagination' => $pages,
            'prevPageCssClass'=>'d-none',
            'nextPageCssClass'=>'d-none',

        ]); 
```

# java - Web 服务方法 - 不从 try catch 块中找到的 if else 语句返回数据

> ID：13288559
> 
> 赞同：0
> 
> 时间：2012-11-08T11:52:24.403
> 
> 标签：java, web-services

我有一个 Web 服务方法来比较模板，但是它不执行在 try catch 块中找到的 if else 语句中的代码，而是返回最后一个显示“错误”的返回语句。知道做错了什么吗？它应该返回“手指已验证”或“手指未验证”。

```
 @WebMethod(operationName = "verify")
public String verify(@WebParam(name = "name") String name, @WebParam(name = "ftset") String ftset) {
    Connection con = null;
    String dbTemplate = null;
    try {
        Class.forName("com.mysql.jdbc.Driver");
        con = DriverManager.getConnection("jdbc:mysql://localhost:3306/biodb", "root", "1234");
        PreparedStatement st;
        st = con.prepareStatement("select template from info where name = ? ");
        st.setString(1, name);

        ResultSet result = st.executeQuery();

        if (result.next()) { //.next() returns true if there is a next row returned by the query.

            dbTemplate = result.getString("template");

    byte[] byteArray = new byte[1];
    byteArray = hexStringToByteArray(dbTemplate);
    DPFPTemplate template = DPFPGlobal.getTemplateFactory().createTemplate();
    template.deserialize(byteArray);

    byte[] fsArray = new byte[1];
    fsArray = hexStringToByteArray(ftset);
    DPFPFeatureSet features = null;
    features.deserialize(fsArray);

    DPFPVerification matcher = DPFPGlobal.getVerificationFactory().createVerification();
    DPFPVerificationResult fresult = matcher.verify(features, template);

    if (fresult.isVerified()) {

        return "The fingerprint was VERIFIED.";

    } else {
        return "The fingerprint was NOT VERIFIED.";

    }

        }
    } catch (Exception e) {
        System.out.println(e.getMessage());

    } finally {
        if (con != null) {
            try {
                con.close();

            } catch (SQLException e) {
            }
        }
    }

      return "error";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T11:58:36.457

> 知道做错了什么吗？

好吧，您所描述的行为是如果抛出异常会发生什么，因为：

```
catch (Exception e) {
    System.out.println(e.getMessage());
} 
```

如果出现*任何*问题，你写一些东西`System.out`（大概你没有看，否则你会看到发生了什么）并通过返回“错误”继续。

首先，我建议捕获*特定*异常 - 并更改记录异常的方式，以便在诊断中更加明显。

**此外**，如果`result.next()`返回，您将获得此行为`false`。由于缺乏一致的缩进，这从您发布的代码中不清楚。您*绝对*应该修复缩进 - 可读性绝对至关重要。

接下来，计算出您想要在`result.next()`返回时发生的情况`false`。这是一个错误吗？它实际上应该只返回“未验证”的情况吗？

# c++ - C++ 中的二叉搜索树

> ID：13288560
> 
> 赞同：2
> 
> 时间：2012-11-08T11:52:29.800
> 
> 标签：c++, binary-search-tree

我正在学习 C++ 语言，并且正在尝试编写 BST，但出现了问题。我尝试将元素添加到空树，root 为 NULL，但在添加元素后，root 仍然为 NULL，尽管添加成功（我在调试模式下看到它，节点设置为 tmp）。我不知道为什么会这样。

```
struct Node
{
    int data;
    Node* left;
    Node* right;
};

struct Tree
{
    Node* root;
};

Tree createTree()
{
    Tree tmp;
    tmp.root = NULL;
    return tmp;
}

void addToNode(Node* node, int value)
{
    Node* tmp = new Node;
    tmp->data = value;
    tmp->left = NULL;
    tmp->right = NULL;
    if(node == NULL)
        node = tmp;
    else if(value >= node->data)
        addToNode(node->right, value);
    else
        addToNode(node->left, value);
}

void add(Tree* tree, int value)
{
    addToNode(tree->root, value);
}

int _tmain(int argc, _TCHAR* argv[])
{
    Tree tree = createTree();
    add(&tree, 10);
    printf("%d", tree.root->data);
    scanf("%*s");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T12:04:14.207

When you are passing your pointer into the function, you create a local version of the pointer. This local variable (`node`) does indeed point into the same memory that the outer pointer you were passing. However, any attempt to change this *variable* (**not** the memory it points to, but the pointer variable itself) will only change the local variable.

So your `node` points to the same memory location as your `tree`, but the `node` variable itself isn't equal to the `tree` variable, so your changes are not visible from the outer function.

It sounds complicated, sorry, but it's exacly the same thing as in this:

```
void foo( int a )
{
    a++;
}
int main()
{
    int var = 5;
    foo( var );
    std::cout << var;
} 
```

Of course in this case the `var` will not change, it's the `a` that is being changed inside the function.

To fix the issue, pass a reference to the pointer instead of the pointer itself:

```
void addToNode(Node*& node, int value) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-08T11:58:27.957

`addToNode`在您分配给的函数中`node`，该分配在函数调用中不可见，`addToNode`因为`node`它是一个局部变量。

您应该将其作为参考传递：

```
void addToNode(Node*& node, int value)
{
    ...
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T12:04:00.613

Joachim already beat me to the answer, but I'll add this observation in anyway.

Your code leaks memory.

```
void addToNode(Node* node, int value)
{
    Node* tmp = new Node;
    tmp->data = value;
    tmp->left = NULL;
    tmp->right = NULL;
    if(node == NULL)
        node = tmp;
    else if(value >= node->data)
        addToNode(node->right, value);
    else
        addToNode(node->left, value);
} 
```

Every call to `addToNode` creates a new `Node` instance in `tmp`, but if the parameter `Node* node` is not `NULL`, this new `Node` is not deleted and does not become accessible by the rest of the application.

There are a number of ways to avoid this. The simplest would be to check if `node` is `NULL` *before* creating a new instance.

# html - 停止树枝中特定 html 标记的自动转义

> ID：13288562
> 
> 赞同：3
> 
> 时间：2012-11-08T11:52:30.970
> 
> 标签：html, twig

我正在使用 twig 并希望停止特定（不是全部）html 标签（如锚标签）的自动转义。有没有办法做到这一点。我的代码有点像 {{ content|nl2br}} 内容包含锚标签。由于 raw 停止所有标签的自动转义，我不能使用它。任何人都可以为此提出任何解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T13:13:28.040

您可以像这样使用内置的 striptags 过滤器：

`{{ "this <a>is my</a> <b>html<b> string"|striptags('<a>')|raw }}`

该`<a>`标签将保留，但任何其他标签都将被删除。额外的 |raw 过滤器将确保不会转义`<a>`标签。

请注意，如果您的字符串可能包含其他不安全的 HTML 字符（如 < 或 >），这仍然可能导致输出问题。如果您的数据被认为是安全的，那么这将起作用，否则您可能必须构建自己的过滤器，这并不难。

# javascript - 使用 PHP 和 MYSQL 在 highstock 烛台图表中未显示 JSON 数据

> ID：13288565
> 
> 赞同：2
> 
> 时间：2012-11-08T11:52:33.543
> 
> 标签：javascript, json, highstock

我正在尝试使用 php 和 mySQL创建[highstock](http://api.highcharts.com/highcharts)的[烛台图。](http://highcharts.com/stock/demo/candlestick)

到目前为止，这是我的代码，如果有人可以帮助我，非常感谢：

这是我从 mySQL 数据库中检索数据并将其转换为 JSON 格式（datachart.php）的代码：

```
$conn = mysql_connect("localhost", "root", "") or die (mysql_error ());
$db = mysql_select_db ("b27sim") or die (mysql_error ());

$result=mysql_query ("SELECT date, open, high, low, close FROM mb27_daily") or die (mysql_error ());

$data = array();
$count = 0;
while ($row=mysql_fetch_array($result))
{

  $newdate = strtotime($row['date']) * 1000; 
  $data[] = array( $newdate, (float)$row['open'], (float)$row['high'], (float)$row['low'], (float)$row['close']);
  $count++;
}   
echo json_encode($data); 
```

这是 datachart.php 的结果：

> [[1350252000000,369.72,371.02,368.09,370.22],[1349820000000,366.58,369.13,364.92,368.92],[1349733600000,367.38,369.93,366.82,368.64],[1349388000000,367.28,371.85,367.2,369.9],[ 1349301600000,362.75,366.24,362.22,365.61],[1349215200000,363.34,363.54,361.27,362.27],[1349128800000,360.79,362.73,360.33,361.77],[1349042400000,360.75,360.75,357.94,359.46],[1348783200000, 360.62,362.69,359.84,362.5],[1348696800000,356.39,361.01,355.32,359.34],[1348524000000,358,360.39,356.34,359.7],[1348437600000,357.96,360.99,355.92,356.89],[1348178400000,359.27,360.53, 356.93,360.53],[1348092000000,358.74,359.31,356.51,358.01],[1348005600000,357.97,361.82,357.24,359.86],[1347919200000,359.8,360.34,356.78,358.5],[1233010800000,119.28,122.42,119.28, 121.91]]

这是我在 index.htm 中的 javascript 代码：

```
$(function() {
    $.getJSON('datachart.php', function(data) {

    // create the chart
    chart = new Highcharts.StockChart({
        chart : {
            renderTo : 'container',
        },

        rangeSelector : {
            selected : 1
        },

        title : {
            text : 'IB27 Price'
        },

        series : [{
            type : 'candlestick',
            name : '',
            data : data,
            tooltip: {
                valueDecimals: 2
            },
            dataGrouping : {
                units : [
                    ['week', // unit name
                    [1] // allowed multiples
                ], [
                    'month', 
                    [1, 2, 3, 4, 6]]
                ]
            }
        }]
    });
    });
}); 
```

这是我调用容器的 div：

```
<div id="container" style="height: 500px; min-width: 500px"></div> 
```

这就是结果：我得到的内部没有图表，但在底部显示时间线，在右上角显示日期范围等。

感谢你们在这方面的帮助，因为我在过去的 4 个小时里一直在敲我的头，因为这个...... :)

谢谢，拉兹

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T09:55:37.490

您的数据应按 x（时间戳）升序排序。

# php - 带有 PHP 类和函数的 jQuery-Ajax 检索函数

> ID：13288569
> 
> 赞同：0
> 
> 时间：2012-11-08T11:52:44.853
> 
> 标签：php, jquery, mysql, ajax

大家好，我是使用 jQuery 的新手，我想将 AJAX 功能用于我的网站的搜索功能。但是，我在学习这一点时遇到了一些困难，因为我只能找到使用与函数无关的 PHP 的示例。我目前正在尝试从这个 youtube 示例[jQuery Youtube Example](http://www.youtube.com/watch?v=Yb3c-HljFro)中学习。然而，这似乎很难实现。

关于我想要实现的一点点。我想在我的搜索栏中输入邮政编码并让它检索所有使用 AJAX 匹配的相关数据字段，以便它显示在搜索栏正下方的 div 中。

由于我对 jQuery 不是很熟悉，我不确定我是否以正确的方式进行此操作，任何输入都将受到热烈欢迎。先感谢您！

我的代码就是这样

索引.php

```
<script type="text/javascript" src="js/jquery-1.8.2.min.js"></script>
<script type="text/javascript" src="js/ajax.js"></script>
<?php include("header.php"); 
$houseobject = new House();
$houseobject->search($_POST['term']);?>
<div id="mainContent">
  <div id="searchformWrap">
    <br/><h2>Search for Accomodation</h2>
    <div id="searchform"><br/><br/><br/>
      <form method="post" action="index.php" name="search" id="search_form">
        <div class="searchrow">
        <div class="searchlabel">Location</div>
        <div class="searchinput"> 
        <input type="text" name="term" id="term" />
        <input type="submit" name="submit" id="searchsubmit" value="Search"/>
      </form>
      <div class="help">e.g. 'PO5' or 'Portsmouth'</div>
    </div> <!-- end input -->
  </div> <!-- end .row -->
  <div id="searchquery"> </div>
</div> <!-- End maincontent --> 
```

类/class.House.inc

```
<?php 
include ("connect.class.Database.inc");
class House extends Database {

  public function search ($term){
    $query = "SELECT * FROM houses 
      WHERE postcode like '%".$this->mysqli->real_escape_string($term)."%'";
    $result = $this->mysqli->query($query);
    $num_result = $result->num_rows;
    if($num_result > 0){
      while($rows =$result->fetch_assoc()) {        
        $this->data[]=$rows;
        //print_r($rows);
      }      
      return $this->data;
    } else{
       echo 'No Records Found';    
    }
    echo json_encode($data);
  }

} 
```

js/ajax.js

```
 $('input#searchsubmit').on('click', function() {
    if ($.trim(term) != '') {
       $.post('classes/class.House.inc', {term: term}, function(data) {
          $('div#searchquery').text(data);
       });
    }
  });
} 
```

我通常通过将 index.php 上的表单指向...来获取结果

搜索.php

```
<table width="500" border="1" cellpadding="5">
 <tr>
  <th width="16" scope="row">id</th>
  <td width="95">bedrooms</td>
  <td width="140">description</td>
  <td width="104">roadname</td>
  <td width="71">postcode</td>
 </tr>
 <?php
 require("classes/class.House.inc");
 $obj = new House();
 if ($data = $obj->search($_POST['term']))
 {
    foreach($obj->data as $val){
      extract($val);
    }
 }
 ?>
 <tr>
      <td scope="row"><?php echo $id; ?></td>
      <td><?php echo $bedrooms; ?></td>
      <td><?php echo $description; ?></td>
      <td><?php echo $roadname; ?></td>
      <td><?php echo $postcode; ?></td>
 </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T12:17:41.413

仔细查看代码后。似乎有几个错误需要解决。

1.  js 不包含在 jQuery 就绪函数中
2.  未正确检索术语的值
3.  on 方法没有被正确使用
4.  ajax 属性 'url' 必须是小写的
5.  数据类型必须是 html，因为内容直接写入 DOM
6.  写法必须是`html()`因为内容是HTML
7.  指向的页面不是 PHP 页面，也不是正确的搜索页面

以下是所有这些问题的解决方案：

```
$(document).ready(function(){
    $('#searchsubmit').on("click", function(){
        // Get the value of the term field      
        var term = $('#term').val();
        // Proceed if the term is not empty
        if($.trim(term)!=''){           
            // Load the html result from the PHP script
            $.ajax({
                url: 'search.php',
                data: 'term='+term,
                type: 'POST',
                dataType: 'html',
                success: function(data){
                    // Place the HTML response into the search query div
                    $('#searchquery').html(data);
                }
            });
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T12:05:53.467

```
 $("input#searchsubmit").click(function(){
    if ($.trim(term) != '') {
        $("div#searchquery").load("demo_test.txt");
    }
  }); 
```

这应该可以正常工作..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T12:14:06.150

对于使用 Ajax 进行搜索，您不想提交表单，这`$houseobject->search($_POST['term']);?>`是错误的。对于 Ajax 调用，您必须处理一个`click`或`keyup`事件，如果我们谈论 Ajax，我认为这更好。

您可以创建一个新文件，例如`ajax_search.php`并将搜索到的字符串 ( `trim`) 发送给它。然后在你的新文件中，你可以创建一个新`House`对象并调用它的`search`方法：

```
include('classes/class.House.inc');

if(isset($_POST['trim'])) {
    $house = new House();
    $json = $house->search();
    $html = '';
    // and build your HTML structure as you are doing it in search.php
    return $html;
} 
```

阿贾克斯调用：

```
$('input#searchsubmit').on('click', function() {
    var term = $('#term').val();

    if ($.trim(term) != '') {
        $.post('ajax_search.php', {term: term}, function(data) {
            $('div#searchquery').text(data);
        });
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T12:15:08.083

这将是您的 jQuery 代码，它将捕获 keyup 事件并获取键入的值。

```
$('#searchBox').on('keyup', function() {
    var term = $('#term').val();
    if ($.trim(term) != '') {
        $.ajax({
            URL:'classes/class.House.inc', 
            data: 'term='+term,
            dataType :'json',
            success : function(text) {
                var strSrch = '';
                $.each(arr, function(k,v) {
                    var strSrch += '<td>'+v+'</td>'; //or whatever HTML you have
                });
                $('div#searchquery').text(strSrch);
            }
        });
    }
}); 
```

现在在 PHP 文件中创建一个类的对象并调用搜索函数。如果进行了 ajax 调用。

```
if(!empty($_SERVER['HTTP_X_REQUESTED_WITH']) && strtolower($_SERVER['HTTP_X_REQUESTED_WITH']) == 'xmlhttprequest') {//this will check if it is an ajax call.
if(isset($_REQUEST['term']) && trim($_REQUEST['term'] !='')){
  $objHouse = new House();
  $searchResult = $objHouse->search($_REQUEST['term']);
  die($searchResult); 
}
} 
```

现在这将为您提供一个 json 对象。您可以在 ajax 调用成功回调中使用它并对其进行解码以制作搜索结果网格。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-12T02:54:12.603

您可以使用自动执行此操作的库，例如[http://phery-php-ajax.net](http://phery-php-ajax.net) ，您可以在操作 DOM 的同时在所有操作完成后进行连续调用。检查演示，你会看到

在您的情况下，它将是这样的（注意新的数据远程，它将自动使您的表单 AJAXified）：

```
 <form method="post" action="index.php" data-remote="search" name="search" id="search_form">
    <div class="searchrow">
    <div class="searchlabel">Location</div>
    <div class="searchinput"> 
    <input type="text" name="term" id="term" />
    <input type="submit" name="submit" id="searchsubmit" value="Search"/>
  </form> 
```

在你的`House`班级里面：

```
class House extends Database {

   public function search ($term){
      $query = "SELECT * FROM houses 
      WHERE postcode like '%".$this->mysqli->real_escape_string($term)."%'";
      $result = $this->mysqli->query($query);
      $num_result = $result->num_rows;

      if ($num_result > 0){
        while($rows =$result->fetch_assoc()) {        
           $this->data[]=$rows;
        }      
        return $this->data;
      } 

      return false;
  }

  function ajax_search($data){ // $data got the 'term' key
    $r = new PheryResponse('#searchquery'); // select where to put the results
    $data = $this->search($data['term']);

    if ($data !== false){ // got results
      $table = new PheryResponse('<table/>', array(
        'width' => "500",
        'border' => "1",
        'cellpadding' => "5"
      ));

      $html = <<<HTML
<th width="16" scope="row">id</th>
  <td width="95">bedrooms</td>
  <td width="140">description</td>
  <td width="104">roadname</td>
  <td width="71">postcode</td>
</tr>
HTML;
      foreach ($data as $row)
      {
         $html .= <<<"HTML"
<tr>
  <td>{$row['id']}</td>
  <td>{$row['bedrooms']}</td>
  <td>{$row['description']}</td>
  <td>{$row['roadname']}</td>
  <td>{$row['postcode']}</td>
</tr>
HTML;
      }
      $table->html($html); // Set the html() of the table
      $r->html($table); // Add table to the #searchquery div
    }
    else
    {
      $r->text('No results found');
    }
    return $r; // return your answer
  }
} 
```

您的控制器将具有以下功能：

```
$house = new House;

Phery::instance()->set(array(
  'search' => array($house, 'ajax_search')
))->process(); 
```

就是这样，DIV 将拥有来自您的数据库的新数据。

# database - 反极聚类

> ID：13288571
> 
> 赞同：0
> 
> 时间：2012-11-08T11:52:51.393
> 
> 标签：database, cluster-analysis, hierarchical-clustering

我做了一个照片马赛克脚本（PHP）。该脚本有一张图片，并将其更改为小图片的照片组合。远看像实物，走近一看全是小图。我取一个固定像素数的正方形并确定该正方形的平均颜色。然后我将它与包含数千张图片的平均颜色的数据库进行比较。我用所有可用图像确定颜色距离。但是要完全运行这个脚本需要几分钟。

瓶颈是将最佳图片与主要图片的一部分进行匹配。我一直在网上搜索如何减少这种情况，结果出现了一个交叉“Antipole Clustering”。当然，我试图自己找到一些有关如何使用此方法的信息，但我似乎无法弄清楚该怎么做。

有两个步骤。1\. 数据库获取和 2\. Photomosaic 创建。让我们从第一步开始，一切都清楚了。也许我自己理解第 2 步。

步骤1：

*   将数据库的每个图像划分为 9 个相等的矩形，以 3x3 网格排列

*   计算每个矩形的 RGB 平均值

*   构造一个由 27 个分量组成的向量 x（每个矩形三个 RGB 分量）

*   x 是数据结构中图像的特征向量

好吧，第 1 点和第 2 点很简单，但在第 3 点我应该怎么做。如何从 27 个分量（9 * R 均值，G 均值，B 均值）中组成向量 X。

当我成功组成向量时，下一步我应该如何处理这个向量。

彼得

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T07:01:45.243

以下是我认为特征向量的计算方式：

你有 3 x 3 = 9 个矩形。

每个像素本质上是 3 个数字，红色、绿色和蓝色通道各 1 个。

对于每个矩形，您计算该矩形中所有像素的红色、绿色和蓝色的平均值。这为每个矩形提供了 3 个数字。

总共有 9（矩形）x 3（R、G、B 的平均值）= 27 个数字。

只需将这 27 个数字连接成一个 27 x 1（通常写为 27 x 1）向量。即 27 个数字组合在一起。这个由 27 个数字组成的向量就是特征向量 X，它代表照片的颜色统计量。在代码中，如果您使用 C++，这可能是一个 27 个数字的数组，甚至可能是（恰当命名的）向量类的一个实例。您可以将此特征向量视为照片中颜色的某种形式的“摘要”。大致如下： [R1, G1, B1, R2, G2, B2, ..., R9, G9, B9] 其中 R1 是第一个矩形中红色像素的平均值/平均值，依此类推。

我相信第 2 步涉及比较这些特征向量的某种形式，以便将具有相似特征向量（因此具有相似颜色）的那些放在一起。比较可能会涉及使用欧几里德距离（参见[此处](http://en.wikipedia.org/wiki/Euclidean_distance)）或其他一些度量标准，以比较特征向量（以及因此照片的颜色）彼此之间的相似程度。

最后，正如 Anony-Mousse 建议的那样，将像素从 RGB 转换为 HSB/HSV 颜色会更好。如果您使用 OpenCV 或可以访问它，这只是一个单行代码。否则 wiki HSV 等将为您提供执行转换的数学公式。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T19:24:03.717

您可能希望使用 HSB 空间，而不是使用 RGB。它为各种用例提供​​了更好的结果。将更多权重放在色相上以获得更好的照片色彩匹配，或在合成高对比度图像（徽标等）时提高亮度

我从未听说过反极聚类。但显而易见的下一步是将您拥有的所有图像放入一个大索引中。比如说，R-Tree。也许通过 STR 批量加载它。然后您可以快速找到匹配项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T19:55:03.127

Maybe it means vector quantization (vq). In vq the image isn't subdivide in rectangles but in density areas. Then you can take a mean point of this cluster. First off you need to take all colors and pixels separate and transfer it to a vector with XY coordinate. Then you can use a density clustering like voronoi cells and get the mean point. This point can you compare with other pictures in the database. Read here about VQ: [http://www.gamasutra.com/view/feature/3090/image_compression_with_vector_.php](http://www.gamasutra.com/view/feature/3090/image_compression_with_vector_.php).

How to plot vector from adjacent pixel:

```
d(x) = I(x+1,y) - I(x,y)
d(y) = I(x,y+1) - I(x,y)

```

Here's another link: [http://www.leptonica.com/color-quantization.html](http://www.leptonica.com/color-quantization.html).

Update: When you have already computed the mean color of your thumbnail you can proceed and sort all the means color in a rgb map and using the formula I give to you to compute the vector x. Now that you have a vector of all your thumbnails you can use the antipole tree to search for a thumbnail. This is possbile because the antipole tree is something like a kd-tree and subdivide the 2d space. Read here about antipole tree: [http://matt.eifelle.com/2012/01/17/qtmosaic-0-2-faster-mosaics/](http://matt.eifelle.com/2012/01/17/qtmosaic-0-2-faster-mosaics/). Maybe you can ask the author and download the sourcecode?

# plone - Plone ZMySQLDA，无法通过 buildout 安装 MySQL-python 1.2.4c1

> ID：13288577
> 
> 赞同：1
> 
> 时间：2012-11-08T11:53:03.730
> 
> 标签：plone, buildout, ploneformgen

我想使用 mysql form ploneformgen，但我无法构建 plone。

构建日志[http://pastie.org/5345272.js](http://pastie.org/5345272.js)

```
Getting required 'MySQL-python>=1.2.1'
  required by Products.ZMySQLDA 3.1.1.
We have no distributions for MySQL-python that satisfies 'MySQL-python>=1.2.1'.
Getting distribution for 'MySQL-python>=1.2.1'.
Running easy_install:
/usr/local/Plone/Python-2.6/bin/python "-c" "from setuptools.command.easy_install import main; main()" "-mUNxd" "/usr/local/Plone/zeocluster/../buildout-cache/eggs/tmpDSODu0" "-Z" "/usr/local/Plone/buildout-cache/downloads/dist/MySQL-python-1.2.4c1.zip"
path=/usr/local/Plone/buildout-cache/eggs/distribute-0.6.21-py2.6.egg

Processing MySQL-python-1.2.4c1.zip
Running MySQL-python-1.2.4c1/setup.py -q bdist_egg --dist-dir /tmp/easy_install-gFbWLf/MySQL-python-1.2.4c1/egg-dist-tmp-16g1TE
The required version of distribute (>=0.6.28) is not available,
and can't be installed while this script is running. Please
install a more recent version first, using
'easy_install -U distribute'.

(Currently using distribute 0.6.19 (/usr/local/Plone/Python-2.6/lib/python2.6/site-packages/distribute-0.6.19-py2.6.egg))
error: Setup script exited with 2
An error occured when trying to install MySQL-python 1.2.4c1\. Look above this message for any errors that were output by easy_install.
While:
  Installing client1.
  Getting distribution for 'MySQL-python>=1.2.1'.
Error: Couldn't install: MySQL-python 1.2.4c1
*************** PICKED VERSIONS ****************
[versions]
Products.PloneFormGen = 1.7.1
Products.ZMySQLDA = 3.1.1
collective.classifieds = 1.6
plone.app.ldap = 1.2.8
quintagroup.dropdownmenu = 1.2.5
quintagroup.pfg.captcha = 1.0.5
zettwerk.ui = 1.1.1 
```

构建配置[http://pastie.org/5345300](http://pastie.org/5345300)

一些链接：

[http://blog.mysqlboy.com/2010/08/installing-mysqldb-python-module.html](http://blog.mysqlboy.com/2010/08/installing-mysqldb-python-module.html)

[http://plone.293351.n2.nabble.com/Plone-amp-MySQL-No-quot-Z-MYSQL-Database-Connection-quot-from-ZMI-td5487160.html](http://plone.293351.n2.nabble.com/Plone-amp-MySQL-No-quot-Z-MYSQL-Database-Connection-quot-from-ZMI-td5487160.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T11:55:14.600

看来 MySQLdb egg 需要更新版本的`distribute`：

```
The required version of distribute (>=0.6.28) is not available, 
```

和

```
(Currently using distribute 0.6.19 (/usr/local/Plone/Python-2.6/lib/python2.6/site-packages/distribute-0.6.19-py2.6.egg)) 
```

先升级你的`distribute`蛋；例如，如果您使用的是统一安装程序，`versions.cfg`请固定版本。如果是这样，请编辑`versions.cfg`以更正那里的版本号：

```
[versions]
...
# Buildout infrastructure
...
distribute = 0.6.28 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T02:15:56.397

虽然您对特定问题有一个非常好的答案，但我强烈建议您忘记 ZMySQLDA 并使用 SQLAlchemyDA，它可以让您通过单个产品访问 SQLAlchemy 支持的任何数据库（我已经使用了所有 MySQL、PostGreSQL、Oracle、SQLServer） ，并且得到更好的支持。

# actionscript-3 - 如何在位图上绘制而不是在透明像素上绘制？

> ID：13288578
> 
> 赞同：2
> 
> 时间：2012-11-08T11:53:09.283
> 
> 标签：actionscript-3

我需要在位图上绘制而不是在它的透明像素上绘制？

此处的示例图片：http: [//i.stack.imgur.com/QvJTZ.png](http://i.stack.imgur.com/QvJTZ.png)

我写了这段代码：

```
import flash.display.Bitmap;
import flash.events.Event;
import flash.geom.Matrix;

var s:S = new S();
var m_bitmapData = new BitmapData(s.width, s.height, true, 0x00000000);
m_bitmapData.draw(s);
var hole=new Sprite();

var hole_matrix:Matrix
hole.graphics.beginFill(0x000000);
hole.graphics.drawCircle(0,0,30);

var bmp:Bitmap = new Bitmap(m_bitmapData);
bmp.x = 50
bmp.y =50 

stage.addChild(bmp);

addEventListener(Event.ENTER_FRAME,asd);
function asd(e:Event):void{
    hole_matrix=new Matrix();
    hole_matrix.translate(mouseX-bmp.x,mouseY-bmp.y);
    m_bitmapData.draw(hole,hole_matrix);
} 
```

但结果如图片“NO”。

有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T13:17:07.137

保留 Alpha 通道，然后将其复制回来。

```
var tempBD:BitmapData=new BitmapData(m_bitmapData.width,m_bitmapData.height,true,0);
...
function asd(e:Event):void {
    ...
    tempBD.copyChannel(m_bitmapData,m_bitmapData.rect,new Point(),BitmapDataChannel.ALPHA,BitmapDataChannel.ALPHA);
    m_bitmapData.draw(hole,hole_matrix);
    m_bitmapData.copyChannel(tempBD,tempBD.rect,new Point(),BitmapDataChannel.ALPHA,BitmapDataChannel.ALPHA);
} 
```

基本上你所做的：你在别处有一个与画布 BitmapData 大小相同的 BitmapData，然后你将 Alpha 通道复制到该 BitmapData 中，绘制你想要的内容，然后将 Alpha 通道复制回来。凡是透明的，都保持透明。请注意，如果您不想更改 Alpha 通道，`copyChannel()`则只能将其移除一次，然后再恢复。

# android - 在 Android 中，onCreate 是否可能比 onDestroy 被调用更多？

> ID：13288579
> 
> 赞同：1
> 
> 时间：2012-11-08T11:53:10.940
> 
> 标签：android, broadcastreceiver

在 Activity 中，我在 onCreate 中注册接收器并在 onDestroy 中取消注册它。如果每个 onCreate 在下一个 onCreate 之后都跟着 onDestroy，它应该可以正常工作。否则，如果 onCreate 被调用的次数超过 onDestroy，则接收器会被多次注册，并且应用程序行为异常。

所以我的问题是：

1.  我可以在 onCreate 中注册接收器并在 onDestroy 中取消注册它吗？
2.  在下一个 onCreate 之前，onCreate 是否总是跟着 onDestroy？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T14:53:54.163

不保证会调用 onDestroy：

[http://developer.android.com/reference/android/app/Activity.html#onDestroy%28%29](http://developer.android.com/reference/android/app/Activity.html#onDestroy%28%29)

"

受保护的无效 onDestroy ()

在 API 级别 1 中添加 在销毁活动之前执行任何最终清理。这可能是因为 Activity 正在完成（有人在其上调用了 finish()，或者因为系统正在临时销毁该 Activity 实例以节省空间。您可以使用 isFinishing() 方法区分这两种情况。

**注意：不要指望这个方法被称为保存数据的地方！例如，如果一个活动正在内容提供者中编辑数据，那么这些编辑应该在 onPause() 或 onSaveInstanceState(Bundle) 中提交，而不是在这里。**此方法通常用于释放资源，例如与活动关联的线程，以便在其应用程序的其余部分仍在运行时，被破坏的活动不会留下这些东西。在某些情况下，系统会简单地终止 Activity 的宿主进程，而不会在其中调用此方法（或任何其他方法），因此不应使用它来执行打算在进程消失后保留的事情。

派生类必须调用该方法的超类实现。如果他们不这样做，将引发异常。

"

你可能还想看看这个线程：

[Activity OnDestroy 从未调用过？](https://stackoverflow.com/questions/4449955/ondestroy-never-called)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T11:59:51.080

onDestroy 在 Activity 被销毁时被调用。或者从后台堆栈中删除，当用户不想要它或没有可能的方法返回它时。当您的活动想要接收广播时，您可以按照自己的方式进行操作。如果您收到后没有出现对话框或出现通知或祝酒词，那也应该没问题，如果您想真正安全并且一次只接收一个活动，并且仅在活动可见时将这些移动到onResume 和 onPause。

当另一个活动被带到前面并重新注册时，您可能会如何取消注册？

# nunit - NAnt 使用带有多个包含文件的 nunit2report

> ID：13288581
> 
> 赞同：1
> 
> 时间：2012-11-08T11:53:17.603
> 
> 标签：nunit, nant

我正在使用 nant 使用 nunit2report 生成测试结果报告。

我有几个项目，我单独测试并将生成的 xml 放到一个公共文件夹中。

然后，我使用 nant 使用此文件夹中的所有 xml 文件生成报告。

乍一看，这很好用，所有测试似乎都合并到一个 html 输出中，但是对于每个文件，整个测试列表都在重复。

摘要与单个文件中的摘要相关，但测试名称列表相同并且一遍又一遍地重复。

理想情况下，我想要一份报告，其中合并了摘要，并且只显示所有测试名称的单个列表。

这可能吗？如果不是，我该如何解决重复测试名称的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T03:40:58.090

您能否重组您的流程以在所有项目上运行一次 nunit（通过指定多个程序集或创建一个[nunit 项目文件](http://www.nunit.org/index.php?p=multiAssembly&r=2.6.2)）？这将减少必须合并 xml 文件的需要。

# html - 是否可以自定义原生播放器 HTML5 视频？

> ID：13288586
> 
> 赞同：0
> 
> 时间：2012-11-08T11:53:39.830
> 
> 标签：html, mobile, video

观看 HMTL5 视频时是否可以在本地移动视频播放器上叠加内容？我猜播放器在浏览器之上，所以这是不可能的。我希望能够以与 SoundCloud 类似的方式查看评论（HTML 内容）。如果存在，解决方案必须是跨平台的（包括功能手机），我对此表示怀疑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T22:30:28.777

目前无法在移动设备的浏览器中显示视频内容。视频始终加载并显示在系统的视频播放器中，因此无法在运行时覆盖其他 Web 内容。

如果可能的话，Youtube 和其他人会用广告、注释和评论来装饰他们的视频——类似于他们的桌面网站。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T12:15:59.080

我不了解所有移动平台，但在桌面浏览器中使用视频元素当然是可能的。毕竟它只是一个 HTML 元素。

看到[这个](http://jsfiddle.net/Gzk6d/2/)小提琴。

```
<div>
    <video autoplay controls loop>
            <source src="http://www.html5tutorial.info/media/html5iscool.mp4" type='video/mp4' />
            HTML5 Video element not supported
        </video>

    <div class="comment">
        Some overlay text
    </div>
</div>
​

.comment
{
    position: absolute;
    top: 10px;
    left: 10px:
}

video{
    height:100%;
    width:100%;
}
​ 
```

# android - SharedPreferences 不保存价值

> ID：13288587
> 
> 赞同：6
> 
> 时间：2012-11-08T11:53:45.590
> 
> 标签：android, sharedpreferences

我有这个代码：

```
public class Register extends Activity {

    private LinearLayout layout;
    private TextView debug;
    public static final String USER_CONFIG = "UserConfigs";

    @Override
    public void onCreate (Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.register);

        SharedPreferences settings = getSharedPreferences(USER_CONFIG, MODE_PRIVATE);
        boolean registered = settings.getBoolean("registered", false);

        layout = (LinearLayout) findViewById(R.id.layoutRegister);

        if (!registered) {
            debug = new TextView(this);
            debug.setText("You have to register");
            layout.addView (debug);

            //TO DO user registration

            settings.edit().putBoolean("registered", true);
            settings.edit().commit(); 
        } else {
            debug = new TextView(this);
            debug.setText("You have already registered");
            layout.addView (debug);
            //TO DO skip to next screen
        }
    }
} 
```

但是当我重新启动我的应用程序时，我总是被注册为“假”。我也尝试过提交它`onStop()`并得到相同的结果。我在这里看到了与此问题有关的其他主题，但没有一个与我有相同的问题。

有任何想法吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-08T12:00:29.440

你不能这样做：

```
settings.edit().putBoolean("registered", true);
settings.edit().commit(); 
```

您需要获取编辑器对象，然后进行更改：

```
Editor editor = settings.edit();
editor.putBoolean(...);
editor.commit(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T12:03:44.300

```
SharedPreferences prefs = PreferenceManager  
                        .getDefaultSharedPreferences(LoginActivity.this);  
                Editor edit = prefs.edit();  
                edit.putBoolean("registered", true);
                edit.commit(); 
```

use this

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T12:07:13.230

其他答案也是正确的。

你也可以使用这个

`settings.edit().putBoolean("registered", true).commit();`

# .htaccess - .htaccess 将多个 RewriteCond 与多个 RewriteRule 组合

> ID：13288589
> 
> 赞同：1
> 
> 时间：2012-11-08T11:53:49.890
> 
> 标签：.htaccess, mod-rewrite, http-accept-language

因为我是 .htaccess 的新手，所以我不知道如何进行这项工作：在我的网络服务器上，默认 index.html (/var/www/) 应该根据一天中的时间重定向到其他不同的 index.html和浏览器语言...

*   /index.html（默认，德语，夜间黑色背景）
*   /i/index.html（德语，当天的白色背景）
*   /e/index.html（英语，夜晚的黑色背景）
*   /e/i/index.html（英文，当天的白色背景）

所有页面都相互链接，以便用户可以在语言和“风格”之间跳转。仅使用它适用于德语的时间条件，但我如何将它与“英语”结合起来？我试过这个，但它没有工作......

```
Options +FollowSymLinks
RewriteEngine On
RewriteBase /

RewriteCond %{TIME_HOUR} >07
RewriteCond %{TIME_HOUR} <16
RewriteCond %{HTTP:Accept-Language} ^en [NC]
RewriteRule ^index\.html$ /e/i/index.html [L]

RewriteCond %{TIME_HOUR} >07
RewriteCond %{TIME_HOUR} <16
RewriteCond %{HTTP:Accept-Language} ^de [NC]
RewriteRule ^index\.html$ /i/index.html [L]

RewriteCond %{TIME_HOUR} >16
RewriteCond %{TIME_HOUR} <07
RewriteCond %{HTTP:Accept-Language} ^en [NC]
RewriteRule ^index\.html$ /e/index.html [L]

RewriteCond %{TIME_HOUR} >16
RewriteCond %{TIME_HOUR} <07
RewriteCond %{HTTP:Accept-Language} ^de [NC]
RewriteRule ^index\.html$ /index.html [L] 
```

有人可以帮忙吗？非常感谢！

我不得不改变网站的结构，所以我也改变了 .htaccess 文件：

```
Options +FollowSymLinks
RewriteEngine On
RewriteBase /

RewriteCond %{HTTP:Accept-Language} (de) [NC]
RewriteCond %{TIME_HOUR} >07
RewriteCond %{TIME_HOUR} <16
RewriteRule ^index\.html$ /d/i/index.html [L]
RewriteRule ^index\.html$ /d/index.html [L]

RewriteCond %{HTTP:Accept-Language} (en) [NC]
RewriteCond %{TIME_HOUR} >16
RewriteCond %{TIME_HOUR} <07
RewriteRule ^index\.html$ /e/i/index.html [L]
RewriteRule ^index\.html$ /e/index.html [L] 
```

现在德语的时间条件工作正常，但似乎英语条件甚至没有传递给浏览器......有人可以给我一个提示，可能是什么问题？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-27T21:47:06.167

我找到了一个对我有用的解决方案...

/var/spool/timing 中包含准备时间的文件：

```
RewriteCond %{TIME_HOUR}%{TIME_MIN} >0816

RewriteCond %{TIME_HOUR}%{TIME_MIN} <1603

RewriteCond %{TIME_HOUR}%{TIME_MIN} >0816

RewriteCond %{TIME_HOUR}%{TIME_MIN} <1604

RewriteCond %{TIME_HOUR}%{TIME_MIN} >0815

RewriteCond %{TIME_HOUR}%{TIME_MIN} <1605

RewriteCond %{TIME_HOUR}%{TIME_MIN} >0815

RewriteCond %{TIME_HOUR}%{TIME_MIN} <1606

...

...

...

... 
```

以及其余部分的两个文件，也在 /var/spool/timing .begin

```
Options -Indexes +FollowSymLinks

RewriteEngine On

RewriteBase /

RewriteCond %{HTTP:Accept-Language} ^.*en.*$ [NC]

RewriteRule ^index\.html$ /e/i/index.html  [L]

RewriteCond %{HTTP:Accept-Language} ^.*de.*$ [NC] 
```

和 .end

```
RewriteRule ^index\.html$ /d/i/index.html  [L]

RewriteRule ^index\.html$ /d/index.html  [L]

RewriteCond %{HTTP:Accept-Language} ^.*en.*$ [NC]

RewriteCond %{TIME_HOUR} >17

RewriteCond %{TIME_HOUR} <06

RewriteRule ^index\.html$ /e/index.html  [L] 
```

脚本每天都会采用前两行并将它们放入新行中。然后它将所有三个文件合并到新的 .htaccess 中。最后它再次清理文件。

```
#!/bin/sh

sed -n 1,2p /var/spool/timing/2014.txt >> /var/spool/timing/.mid

cat /var/spool/timing/.begin /var/spool/timing/.mid /var/spool/timing/.end > 
/var/www/.htaccess

sed -i '1,2d' /var/spool/timing/.mid & sed -i '1,2d' 
/var/spool/timing/2014.txt 
```

这样最终每天都会有一个新的 .htaccess ：

```
Options -Indexes +FollowSymLinks

RewriteEngine On

RewriteBase /

RewriteCond %{HTTP:Accept-Language} ^.*en.*$ [NC]

RewriteRule ^index\.html$ /e/i/index.html  [L]

RewriteCond %{HTTP:Accept-Language} ^.*de.*$ [NC]

RewriteCond %{TIME_HOUR}%{TIME_MIN} >0816

RewriteCond %{TIME_HOUR}%{TIME_MIN} <1603

RewriteRule ^index\.html$ /d/i/index.html  [L]

RewriteRule ^index\.html$ /d/index.html  [L]

RewriteCond %{HTTP:Accept-Language} ^.*en.*$ [NC]

RewriteCond %{TIME_HOUR} >17

RewriteCond %{TIME_HOUR} <06

RewriteRule ^index\.html$ /e/index.html  [L] 
```

到目前为止效果很好，我只需要在今年年底设置一个新的 2015.txt - 如果那根本不需要的话......我想我会每年再次接受它。

# google-places-api - Google Places Autocomplete 从结果中删除州和国家/地区

> ID：13288593
> 
> 赞同：5
> 
> 时间：2012-11-08T11:54:01.783
> 
> 标签：google-places-api

[https://google-developers.appspot.com/maps/documentation/javascript/examples/places-autocomplete](https://google-developers.appspot.com/maps/documentation/javascript/examples/places-autocomplete)

我有一个类似于上面的谷歌地方自动完成演示网址的页面，如果我输入白金汉宫。它将返回结果

1.  白金汉宫路，伦敦，英国
2.  白金汉宫商店，白金汉宫路，维多利亚，伦敦，英国

等等。如何从结果中删除英国伦敦？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-20T00:55:06.860

谷歌似乎没有兴趣很快将其整理出来。我不得不诉诸以下，可能也足以满足其他人的需求：

```
document.addEventListener('DOMNodeInserted', function(event) {
    var target = $(event.target);
    if (target.hasClass('pac-item')) {
        target.html(target.html().replace(/, Australia<\/span>$/, "</span>"));
    }
}); 
```

请注意，这`pac-item`是每个建议中使用的类。有关使用的其他类，请参阅[Google 参考](https://developers.google.com/maps/documentation/javascript/places-autocomplete#style_autocomplete)。带有类的容器`pac-container`在未显示时似乎会删除项目，并在显示时添加新项目，因此如果将这些`pac-items`项目添加到 DOM，则意味着建议正在显示的路上并且`pac-container`即将变得可见。

刚刚解决了这个问题，所以对改进持开放态度。

这也不是一个完整的解决方案。选择删除国家/地区的建议时，自动完成功能仍会将国家/地区添加到地理编码中！`place_changed`改变它的阶段太晚了，所以请把上面的解决方案作为答案的一部分。一旦我弄清楚其余部分，我会再次更新。

- - 更新

就个人而言，我最终根本没有使用谷歌自动完成功能，因为一旦选择了修改后的建议，我无法解决自动完成仍然显示国家/地区的问题。一种更有用的方法是使用 twitter typeahead 并使用 google API 仅获取建议。这让我可以更好地控制建议，但显然需要更多的手动工作来弥补失去的功能

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-19T16:20:37.723

这是我如何使它与 jQuery 自动完成一起工作。希望它可以帮助某人。

```
 $("#Search").autocomplete({
       source: function (request, response) {
           var options = {
               input: request.term,
               types: ['(cities)'],
               region: 'US',
               componentRestrictions: { country: "us" }
           };
           function callback(predictions, status) {
               for (var i = 0, prediction; prediction = predictions[i]; i++) {
                   results.push(prediction.description.replace(/, United States$/, ""));
               }
               response(results);
           }
           var service = new google.maps.places.AutocompleteService();
           service.getPlacePredictions(options, callback);
           var results = [];
       }
   }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T04:51:44.640

This is not possible without manually processing the results. If you think that it would be a useful feature, please file a [Places API - Feature Request](http://code.google.com/p/gmaps-api-issues/issues/entry?template=Places%20API%20-%20Feature%20Request).

# php - PHP - 使用 GET 提交表单时不接收 URL 变量

> ID：13288597
> 
> 赞同：0
> 
> 时间：2012-11-08T11:54:06.990
> 
> 标签：php, post, get

我有一个使用 GET 方法的表单，并且我正在使用 action 方法来传递一些 URL 变量：

```
<form action="items.php?a=1&b=2" method="get">...</form> 
```

在*`items.php`*我`$_REQUEST`用来解析 a,b vars 的内容，但除非我在表单中使用 POST 作为方法，否则变量显示为空或不存在。

我已经阅读了 POST、GET、REQUEST 之间的区别，但我不确定如何解决这个问题。我需要使用 GET 的表单，以便它缓存结果，当用户选择结果然后在浏览器中单击返回时，他会返回结果集。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-08T12:03:11.617

首先，form 会从请求中删除变量 a 和 b。要将它们添加到 GET 请求中，请使用以下内容：

```
<form action="index.php" method="get" >
<input type="hidden" name="a" value="1" />
<input type="hidden" name="b" value="2" />
....
</form> 
```

在 php 中，您可以使用 访问这些变量`$_GET`，例如：

```
$_GET['a'] // 1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T11:59:16.383

将方法切换为 POST。

现在您将能够检索两者。

-> 通过 $_GET 查找查询参数。

-> 通过 $_POST 找到 POST 参数

帮自己一个忙，永远不要回头看那个怪物 $_REQUEST。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T11:58:04.780

I think you should use $_GET instead of $_REQUEST.

For example:

```
$myVar = $_GET['a'];
$myVar2 = $_GET['b']; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-08T11:58:37.890

要查看 $_GET 表单的输出变量：

```
print_r($_GET); 
```

只需使用以下命令访问变量：

```
$a = $_GET['a'];
$b = $_GET['b']; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-08T12:01:26.927

在你的 from.... 中使用它作为隐藏字段

```
 <form action="items.php" method="get">
  ...
 <input type="hidden" name="a" value="1" />
 <input type="hidden" name="b" value="2" />
</form> 
```

并将变量设为`$_GET['a']`,`$_GET['b']`

# html - twitter bootstrap 以水平形式正确调整标签字段

> ID：13288604
> 
> 赞同：0
> 
> 时间：2012-11-08T11:54:36.680
> 
> 标签：html, css, forms, twitter-bootstrap, label

我们有以下形式：

```
 <div class="form-horizontal">
   <fieldset>
      <legend>Reports</legend>
      <div class="control-group">
         <label class="control-label">Year</label>
         <div class="controls">
            <select id="ddlYear" class="input-small">
               <option value="2011">2011</option>
               <option selected="selected" value="2012">2012</option>
            </select>
         </div>
      </div>
      <div class="control-group">
         <label class="control-label">Project</label>
         <div class="controls">
            <label class="" id="lbProjectDesc">House X repairs</label>
         </div>
      </div>
      <div class="control-group">
         <label class="control-label">Costs</label>
         <div class="controls">
            <div class="input-append">
               <input type="text" value="0,0" class="span2" id="tbCosts" disabled="disabled"  >
               <span class="add-on">€&lt;/span>
            </div>
         </div>
      </div>
      <hr>
      <div class="control-group">
         <div class="controls">
            <input type="submit"  value="Save" onclick="$(this).button('loading');" id="btnSave" class="btn btn-primary" data-loading-text="Saving...">
         </div>
      </div>
   </fieldset>
</div>​ 
```

[http://jsfiddle.net/9JNcJ/2/](http://jsfiddle.net/9JNcJ/2/)

问题是标签 lbProjectDesc (text="House X repairs") 没有正确显示。

我们可以设置什么类或需要进行什么更改来修复它？（最好是正确的方法，而不是 css hack）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T12:00:07.813

```
#lbProjectDesc {
margin-top: 5px;
} 
```

（不认为这是“黑客”:) 分叉：http: [//jsfiddle.net/davidkonrad/LK95Q/](http://jsfiddle.net/davidkonrad/LK95Q/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T12:45:57.350

考虑到 Selva 和 davidkonrad 的反应，我们这样解决：

```
.form-horizontal .control-group .controls label {
 margin-top: 5px;
} 
```

这样，它会影响标签位于水平表单内但不会垂直取代其他输入类型的描述标签的所有情况......

也适用于 padding-top: 5px;

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T12:03:24.380

Avoid the unwanted padding from that and set what ever you want. Here problem is padding.

```
 #lbProjectDesc {
 margin-top: 5px;
} 
```

add and see.

Demo : [http://jsfiddle.net/9JNcJ/5/](http://jsfiddle.net/9JNcJ/5/)

# testing - 如何使用 TestNG 生成 JUnit 样式的 XML 报告？

> ID：13288606
> 
> 赞同：5
> 
> 时间：2012-11-08T11:54:44.340
> 
> 标签：testing, junit, hudson, hudson-plugins, surefire

我正在使用 TestNG 框架进行集成测试。我想使用 TestNG 生成 JUnit 样式的 XML 报告。我的项目不使用 Ant，但我们使用 Maven。您能告诉我 JUnit 样式 XML 的格式是什么，以及如何使用 TestNG API 生成 JUnit XML 文件。后来我想将此 JUnit XML 文件与 Hudson 集成，甚至想使用 TestNG 自定义此 JUnit XML 报告。

那么我该如何完成上述任务呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-09T05:43:26.997

TestNG 已经生成了这些文件，在`test-output/junitreports`.

# sql-server-2008 - sql从select语句返回数据并同时插入表变量

> ID：13288608
> 
> 赞同：0
> 
> 时间：2012-11-08T11:54:47.923
> 
> 标签：sql-server-2008, tsql, select

```
declare @RelevantMachines Table (MachineId int)

Select MachineId, ClusterId, MachineGuid, MachineName, RegisteredDate, MachineDetail, LastServiceCall, MachineType as MachineTypeId, ProductSetId
From PatchHub.Machine
Where ClusterId = @ClusterId 
```

我希望能够将 select 语句作为结果集返回，同时使用所有返回的行 MachineId 值填充表变量，这是在 sql server 2008 中。如何在不运行 select 语句的情况下实现这一点两次？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T12:21:46.427

我不相信你可以在一个 SELECT 中做到这一点，我认为下一个最好的事情是这样的：

```
declare @result table (
MachineId int, 
ClusterId int, 
MachineGuid guid, 
MachineName varchar(100), 
RegisteredDate datetime, 
MachineDetail varchar(1000), 
LastServiceCall int, 
MachineType int, 
ProductSetId int)

Select MachineId, ClusterId, MachineGuid, MachineName, RegisteredDate, MachineDetail, LastServiceCall, MachineType as MachineTypeId, ProductSetId
into @result
From PatchHub.Machine
Where ClusterId = @ClusterId

select * from @result

/* use @result table */ 
```

# android - 在 Android 中打开 sqlite 数据库连接问题

> ID：13288609
> 
> 赞同：2
> 
> 时间：2012-11-08T11:54:49.607
> 
> 标签：android, database, sqlite, database-connection

在某些情况下，当我尝试使用以下代码打开我的 sqlite 数据库时：

```
 dbManager.open(); 
```

其中方法如下所示：

```
 SQLiteDatabase mDb;
  DbHelper mDbHelper;

   public void open(){  
        mDb=mDbHelper.getWritableDatabase();
   } 
```

我收到此错误：

```
11-08 12:39:25.760: E/SQLiteDatabase(5603): close() was never explicitly called on database '/data/data/act.myactivity/databases/seasonDb' 
11-08 12:39:25.760: E/SQLiteDatabase(5603): android.database.sqlite.DatabaseObjectNotClosedException: Application did not close the cursor or database object that was opened here
11-08 12:39:25.760: E/SQLiteDatabase(5603):     at android.database.sqlite.SQLiteDatabase.<init>(SQLiteDatabase.java:1980)
11-08 12:39:25.760: E/SQLiteDatabase(5603):     at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:977)
11-08 12:39:25.760: E/SQLiteDatabase(5603):     at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:956)
11-08 12:39:25.760: E/SQLiteDatabase(5603):     at android.database.sqlite.SQLiteDatabase.openOrCreateDatabase(SQLiteDatabase.java:1021)
11-08 12:39:25.760: E/SQLiteDatabase(5603):     at android.app.ContextImpl.openOrCreateDatabase(ContextImpl.java:753)
11-08 12:39:25.760: E/SQLiteDatabase(5603):     at android.content.ContextWrapper.openOrCreateDatabase(ContextWrapper.java:221)
11-08 12:39:25.760: E/SQLiteDatabase(5603):     at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:149)
11-08 12:39:25.760: E/SQLiteDatabase(5603):     at host.database.DB_DatabaseManager.open(DB_DatabaseManager.java:136)
11-08 12:39:25.760: E/SQLiteDatabase(5603):     at host.framework.ServicePromemoria.checkUnSyncInsert(ServicePromemoria.java:265)
11-08 12:39:25.760: E/SQLiteDatabase(5603):     at host.framework.ServicePromemoria$1.run(ServicePromemoria.java:59)
11-08 12:39:25.760: E/SQLiteDatabase(5603):     at java.util.Timer$TimerImpl.run(Timer.java:284) 
```

我认为这与尝试打开尚未关闭的数据库有关。

ps：关闭数据库连接的方法是：

```
 public void close(){
        mDb.close();
} 
```

**编辑：**

这是核心`checkUnSyncInsert()`：

```
 dbManager.open(); //here error occurs
    String getUserQuery = "SELECT * FROM user";
    Cursor c = dbManager.RawQuery(getUserQuery, null);

    if(c.getCount() != 0)
    {
        try{
            c.moveToFirst();
            usr = c.getString(0).toString();
            pwd = c.getString(1).toString();
            Log.i("USERNAME: "+pwd,"PASSWORD: "+pwd);
            c.close();
        }catch(Exception ex)
        {
            ex.printStackTrace();
            c.close();
        }
    }
    else

    dbManager.close(); 
```

错误发生在第一行 ( `dbManager.open()`)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T12:21:26.733

只有在没有返回任何内容时才会关闭。如果这段代码运行了几次，那么报错是可以理解的，因为第二次关闭时在打开时丢失了

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T13:01:07.820

首先确保您正在关闭数据库，然后再尝试再次打开它。你甚至可以在你的方法中打开和关闭数据库：

```
public void addGroupContact(String groupId, String contactId) {

        Log.d("Database : ", "*****************Ädd Group Contact******************");
        mDbHelper = new NewDatabaseHelper();
        mDatabase = mDbHelper.getWritableDatabase();
        ContentValues values = new ContentValues();
        values.put(NewDatabaseHelper.KEY_GROUP_F_ID, groupId); // Group Id
        values.put(NewDatabaseHelper.KEY_CONTACT_ID, contactId); // contact id
        // Inserting Row
        mDatabase.insert(NewDatabaseHelper.TABLE_GROUPS_CONTACTS, null, values);
        mDatabase.close(); // Closing database connection
    } 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-08T12:27:15.227

你必须确保数据库在销毁和暂停时关闭

# objective-c - Parse Kit 构建项目问题

> ID：13288610
> 
> 赞同：0
> 
> 时间：2012-11-08T11:54:51.727
> 
> 标签：objective-c, ios, xcode, parsekit

我已经从这个[链接下载了 Parse Kit](http://code.google.com/p/todparsekit/source/checkout)

我正在使用 Xcode 4.5 并且我正在尝试构建 Parse Kit 项目，但它正在完成以下问题，例如：

它是 ParseKit 来源中以下行的问题描述：`Format not a string literal and no format arguments. But I notice that I have not changed any just build it and run. Anybody has got the same issue?`

```
[[NSAssertionHandler currentHandler] handleFailureInFunction:functionString file:fileString lineNumber:(NSInteger)[lineNumber longValue] description:descriptionString]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T15:22:46.783

我在这条线上添加了 nil 并且它有效

```
[[NSAssertionHandler currentHandler] handleFailureInFunction:functionString file:fileString lineNumber:(NSInteger)[lineNumber longValue] description:descriptionString, nil]; 
```

因为方法获取此参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-23T08:04:24.003

修复是 [[NSAssertionHandler currentHandler] handleFailureInFunction:functionString file:fileString lineNumber:(NSInteger)[lineNumber longValue] description:@"%@", descriptionString];

# java - GWT: accents not displayed on Strings

> ID：13288616
> 
> 赞同：0
> 
> 时间：2012-11-08T11:55:31.117
> 
> 标签：java, gwt, encoding, character-encoding, iso-8859-1

In my GWT project I am initialization Strings with accents (acute), but on the next line (debugging on Eclipse) these accents are displayed as �. Same happens when I deploy.

```
String myText = "Título"; 
```

On Eclipse debugger (or deployed), `myText` is displayed as `T�tulo`.

Could you please help me?

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T12:00:58.470

调试器窗口和部署环境中使用的字体没有重音字符。更改 Eclipse 和您的环境中的字体设置（我将假设一个控制台应用程序。）

# jquery - Unable to apply jquery multiselect widget with ajax populated values

> ID：13288632
> 
> 赞同：1
> 
> 时间：2012-11-08T11:56:12.070
> 
> 标签：jquery, struts

I am using ajax to fill in my select dropdown. I am using this [widget](http://www.erichynds.com/jquery/jquery-ui-multiselect-widget/) to beautify my multiselect dropdown. But for some reason, the dropdown is not getting populated after using this widget. Here is my code. The app is using struts

```
<html:select styleId="code" name="Form" property="selCode" multiple="multiple"> 
 <logic:iterate id="clist" name="Form" property="CodeList">
  <option value=<bean:write name="cclist" property="id"/>>
  <bean:write name="cclist" property="value"/></option>
 </logic:iterate> 
</html:select>

$(document).ready(function(){
 $("#code").multiselect().multiselectfilter();;
}); 
```

# php - 通过代理后应该跳过哪些 HTTP 标头？

> ID：13288639
> 
> 赞同：2
> 
> 时间：2012-11-08T11:56:46.553
> 
> 标签：php, http, curl, proxy, http-headers

我有一个 PHP 代理，它接收 HTTP 请求并更改 HTTP 请求的标头之一。一旦 HTTP 请求离开代理，大部分标头应该从原始请求（代理接收的请求）与请求正文一起传播。

这就是我在代码中进行传播的方式：

```
foreach (getallheaders() as $name => $value) {
        if (($name != "Server") || ($name != "Connection") ||
                ($name != "Host") || ($name != "Cache-Control") ||
                ($header != "Content-Length")) {
            array_push($headers, "$name: $value");
        }
    }
//this is where I set the headers of the new request
curl_setopt($ch, CURLOPT_HTTPHEADER, $headers); 
```

**我的问题：**我是否涵盖了所有不应该在新请求中传播的标头？如果不是，我不应该传播哪些标头？

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T12:30:38.307

根据[RFC 2616](http://www.w3.org/Protocols/rfc2616/rfc2616-sec13.html)，

> 以下 HTTP/1.1 标头是逐跳标头：
> 
> ```
> - 联系
> - 活着
> - 代理验证
> - 代理授权
> - TE
> - 拖车
> - 传输编码
> - 升级
> 
> ```
> 
> HTTP/1.1 定义的所有其他标头都是端到端标头。

因此，您的代码中跳过的标头列表看起来与建议的列表有很大不同。例如，既不`Server`、也不`Host`、也不`Cache-Control`、也不`Content-Length`似乎适合删除。

另外，请记住，代理可以根据设计透明或不透明。根据这一点，您可以考虑保留尽可能多的标头。

# git - Git-svn 合并和结帐——他们的

> ID：13288641
> 
> 赞同：0
> 
> 时间：2012-11-08T11:57:01.380
> 
> 标签：git, svn, merge, git-svn

不幸的是，我不得不在工作中使用 SVN 存储库。我通过 git-svn 做到这一点。现在，在我做出更改后，提交它们和我的 git-svn “pull”别名：

```
!git svn fetch && git svn rebase -l 
```

现在，如果有一个我不想解决的合并冲突，我的直觉是：

```
git checkout --theirs conflicting_file
git add conflicting_file
git rebase --continue 
```

但是，现在，*我的*索引中似乎有了以前`conflicting_file`的那个，而不是来自其他开发人员的那个。`conflicting_file`

 *这里到底发生了什么，这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T15:40:34.703

我认为@poke 说得对：“他们的”和“我们的”在你的脑海中与 git 的行为互换。当您执行 svn rebase 时，您当前的分支（“我们的”）是 svn 分支的复制，而正在合并/重新调整的更改（“他们的”）是您在本地进行的。当我出于同样的目的使用 git-svn 时，我将我的东西放在一个单独的 git 分支上，并且只有在我准备好执行“svn dcommit”时才将它带入 svn 分支。这样做会使他们/我们的问题在您的脑海中更加清晰，并且还可以让您在准备好之前不必处理冲突。*

# java - 如何使用 Java OpenCV

> ID：13288646
> 
> 赞同：3
> 
> 时间：2012-11-08T11:57:27.283
> 
> 标签：java, image-processing, opencv, javacv

我正在使用图像处理开始我的最后一年项目，并希望完成这样的[事情](http://www.youtube.com/watch?v=EPai5f2sWaA)。它是人和物体检测的结合。

我真的很想用 Java 来做，因为我在 C++ 方面的经验很少。

我发现[JavaCV](http://code.google.com/p/javacv/)是 OpenCV 的包装器。但是，它几乎没有支持，几乎没有文档。因此，当我在 Java OpenCV 的 OpenCV 主页上偶然发现[这个](http://docs.opencv.org/java/)JavaDoc时，我打算退回并尝试开始使用本机OpenCV。

我的问题是，如何安装/使用这个 Java 版本的 OpenCV？有没有人有这样做的经验？有人对我应该如何处理这个项目有更好的建议吗？

任何建议都将不胜感激，因为这已经困扰我一段时间了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T10:55:00.400

刚才我安装了带有java支持的opencv-2.4.4，它很容易但是对于文档opencv c++文档可以使用。javacv 也可以使用类似的文档。

[http://docs.opencv.org/2.4.4-beta/doc/tutorials/introduction/desktop_java/java_dev_intro.html](http://docs.opencv.org/2.4.4-beta/doc/tutorials/introduction/desktop_java/java_dev_intro.html)

按照页面上给出的步骤，它工作正常。虽然它只支持桌面 Java，但如果你想其他平台支持使用 javacv。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T20:04:07.590

您可以在下面的链接中找到安装和使用 Javacv 的说明。 [http://opencvlover.blogspot.in/2012/04/javacv-setup-with-eclipse-on-windows-7.html](http://opencvlover.blogspot.in/2012/04/javacv-setup-with-eclipse-on-windows-7.html)

您将能够使用 java 使用 javacv 来使用 opencv 中可用的所有算法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T12:11:22.430

你有使用 Java 的确切理由吗？

如果您的主要目标是创建原型，我建议您选择 PyOpenCV，它支持更广泛且更易于处理。如果您的编程技能有限（目前），我会建议使用 Python 而不是 Java。OpenCV 两者都支持。选择 Python 的主要原因是您可以在 3 行代码中完成相同的操作，而在 Java 中需要 20 行左右。OpenCV 的 Python 绑定实际上更容易上手，因为它们包含在主源代码中。

[这是文档](http://opencv.willowgarage.com/documentation/python/index.html)

如果您使用的是 linux 并且不需要最新版本，您可以在不到 5 分钟的时间内开始工作，因为已经为您准备好了软件包。:) 只需运行

```
sudo apt-get install libopencv-*
sudo apt-get install python-opencv
sudo apt-get install python-numpy 
```

如果你想要最后一个版本，还有更多的工作，但也是[一个很好的指南](http://opencv.willowgarage.com/wiki/InstallGuide%20:%20Debian)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-02-02T13:28:52.380

亲爱的社区！下面介绍在 Linux 中安装 OpenCV 的过程以及 eclipse 的配置。

CentOS Linux 版本 7.3.1611

```
$ yum install opencv-core.x86_64 opencv-devel.x86_64 
```

安装后查看**/opt/OpenCV/java**

```
$ ls -l /usr/share/OpenCV/java/
итого 1040
-rwxr-xr-x 1 user user 739248 фев  5  2017 libopencv_java310.so*
-rw-r--r-- 1 user user 322277 фев  5  2017 opencv-310.jar 
```

在 Eclepse 中，您应该创建“用户库”和

*   将 JAR 文件添加到此库修改“本机库位置”并设置驱动程序路径 (*.so)

[![在此处输入图像描述](../Images/816cca7e15be7e99a9cb7462be718d9f.png)](https://i.stack.imgur.com/aKMIc.png)

如果您需要从源代码构建库 - 访问[http://www.giuseppeurso.eu/en/how-to-compile-opencv-on-centos-with-java-support/](http://www.giuseppeurso.eu/en/how-to-compile-opencv-on-centos-with-java-support/)或其他站点。

# c# - 从多个参数构建 IQueryable (EF4) 查询

> ID：13288647
> 
> 赞同：1
> 
> 时间：2012-11-08T11:57:32.907
> 
> 标签：c#, linq, lambda, predicatebuilder

我正在尝试从表单中的谓词列表中构建一个“或”谓词`List<Expression<Func<T, bool>>>`

```
 public static IQueryable<T> Search<T>(this IQueryable<T> source, List<Expression<Func<T, bool>>> predicates = null)
            where T : EntityObject
        {
            if (predicates == null || predicates.Count == 0)
                return source;
            else if (predicates.Count == 1)
                return source.Where(predicates[0]);
            else
            {
                var row = Expression.Parameter(typeof(T), "row");
                var compoundExpression = predicates[0];

                for (int i = 1; i < predicates.Count; i++)
                {
                    compoundExpression = compoundExpression.Or(predicates[i]);
                }
                return source.Where(compoundExpression);
            }
        }

        static Expression<Func<T, bool>> Or<T>(this Expression<Func<T, bool>> lhs, Expression<Func<T, bool>> rhs)
        {
            var row = Expression.Parameter(typeof(T), "row");
            var body = Expression.Or(
                Expression.Invoke(lhs, row),
                Expression.Invoke(rhs, row));
            return Expression.Lambda<Func<T, bool>>(body, row);
        } 
```

但这会返回我的源代码中的每一行吗？

为了测试我正在寻找`c=>c.FullName.Contains("Smith") or c=>c.FullName.Contains("Jones")`

我尝试修改以使用[PredicateBuilder](http://www.albahari.com/nutshell/predicatebuilder.aspx)但它仍然返回源中的每一行。

```
public static IQueryable<T> Search<T>(this IQueryable<T> source, List<Expression<Func<T, bool>>> predicates = null)
            where T : EntityObject
        {
            if (predicates == null || predicates.Count == 0)
                return source;
            else if (predicates.Count == 1)
                return source.Where(predicates[0]);
            else
            {
                var pb = PredicateBuilder.False<T>();
                for (int i = 0; i < predicates.Count; i++)
                {
                    pb = pb.Or(predicates[i]);
                }
                return source.AsExpandable().Where(pb);
            }
        } 
```

非常感谢您的任何帮助！

最终结果将是允许 AND 和 OR，
例如 c=>c.FullName.Contains("Dav") AND c=>c.CustomerType == 'Staff'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T13:58:37.520

尝试

```
public static IQueryable<T> Search<T>(this IQueryable<T> source, IEnumerable<Expression<Func<T, bool>>> predicates = null)
        where T : EntityObject
    {
        if (predicates == null || !predicates.Any())
            return source;
        else
        {
             ParameterExpression p = Expression.Parameter(typeof(T), "p");
             Expression<Func<T,Bool>> predicate = 
                        Expression.Lambda<Func<T,Bool>(
                                   predicates.Select(l => ReParameteriser(l.Body, l.Paramaters[0], p)
                                             .Aggregate((b1,b2) => Expression.Or(b1,b2)),
                                   new ParamaterExpression[]{p});
            return source.Where(predicate);
        }
   }

public class ReParameteriser : ExpressionVisitor
{
    ParameterExpression originalParameter; 
    ParameterExpression newParameter;

    private ReParameteriser(){}
    protected ReParameteriser (ParameterExpression originalParameter, ParameterExpression newParameter) 
    {
         this.originalParameter = originalParameter;
         this.new = newParameter;
    }

    public static Expression ReParameterise(Expression expression, ParameterExpression originalParameter, ParameterExpression newParameter)
    {
        return new ReParameteriser(original,newParameter).Visit(expression);
    }

    protected override Expression VisitParameter(ParameterExpression node)
    {
        if (node == originalParameter)
            return newParameter;
        else
            return node;
    }
} 
```

注意：ExpressionVisitor 类是 .Net4，因此如果您想针对更早的环境，您需要自己编写。这个代码只是谷歌，但通常的资源是马特沃伦的博客[http://blogs.msdn.com/b/mattwar/archive/2008/11/18/linq-links.aspx](http://blogs.msdn.com/b/mattwar/archive/2008/11/18/linq-links.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T06:26:14.677

有时周末会做一些奇怪的事情来编码！

不知道我做了什么不同，但这是有效的：

```
public static IQueryable<T> Search<T>(this IQueryable<T> source, List<Expression<Func<T, bool>>> predicates = null)
            where T : EntityObject
        {
            if (predicates == null || predicates.Count == 0)
                return source;
            else if (predicates.Count == 1)
                return source.Where(predicates[0]);
            else
            {
                var query = PredicateBuilder.False<T>();
                foreach (var predicate in predicates)
                {
                    query = query.Or(predicate);
                }

                return source.AsExpandable().Where(query);
            }
        } 
```

PredicateBuilder 似乎是一小段代码。

# jquery - Looking for a Event Calender for Jquery / Asp.net

> ID：13288652
> 
> 赞同：0
> 
> 时间：2012-11-08T11:57:53.773
> 
> 标签：jquery, asp.net, calendar

I am looking for a Event Calender. It should do exactly this: [http://www.vissit.com/projects/eventCalendar/](http://www.vissit.com/projects/eventCalendar/)

The problem is, the linked calender is without any futher explanation how to insert data, So nay ideas?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T12:07:09.923

也许它有点矫枉过正，但你可以从[sencha尝试](http://www.sencha.com/)[Extjs](http://www.sencha.com/products/extjs)。

[他们在这里](http://dev.sencha.com/deploy/ext-4.1.0-gpl/examples/calendar/index.html)有一个日历的演示

# yii - 在 Yii 中比较当前 URL 和 createURL 的结果

> ID：13288653
> 
> 赞同：2
> 
> 时间：2012-11-08T11:57:56.493
> 
> 标签：yii

我需要将当前 url 与从`createURL`.

请记住，`createURL`可以这样调用：

```
array('mycontroller/mypage', 'view'=>'myviewonmypage') 
```

还要记住，这可以（并且将会）返回一个匹配来自 Yii 配置的重写规则的 URL。

所以，我的问题是：如何检查当前 URL 是否与创建的 URL 匹配`createURL`。

我试过了

```
Yii::app()->getController()->getRoute() 
```

但这只会返回控制器和操作部分，因此它不会匹配，因为视图部分被忽略。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T12:47:19.013

您可以像这样使用 $_SERVER 变量进行比较：

```
if(Yii::app()->createUrl('test/test') == $_SERVER['REQUEST_URI']){
               echo "YES!";
           } 
```

# php - Corrupt .docx files when using a PHP IMAP class

> ID：13288659
> 
> 赞同：5
> 
> 时间：2012-11-08T11:58:26.173
> 
> 标签：php, imap

I'm Using this PHP IMAP Class: [http://code.google.com/p/php-imap/source/browse/trunk/ImapMailbox.php](http://code.google.com/p/php-imap/source/browse/trunk/ImapMailbox.php) on a current project. After a few modifications the class is working. However whenever the class downloads .docx files they are always corrupt and have to be recovered by office.

```
 protected function initMailPart(IncomingMail $mail, $partStruct, $partNum) {
    $data = $partNum ? $this->imap_fetchbody($this->mbox, $mail->mId, $partNum, FT_UID) : $this->imap_body($this->mbox, $mail->mId, FT_UID);

    if($partStruct->encoding == 1) {
        $data = $this->imap_utf8($data);
    }
    elseif($partStruct->encoding == 2) {
        $data = $this->imap_binary($data);
    }
    elseif($partStruct->encoding == 3) {
        $data = $this->imap_base64($data);
    }
    elseif($partStruct->encoding == 4) {
        $data = $this->imap_qprint($data);
    }
    $data = trim($data);

    $params = array();
    if(!empty($partStruct->parameters)) {
        foreach($partStruct->parameters as $param) {
            $params[strtolower($param->attribute)] = $param->value;
        }
    }
    if(!empty($partStruct->dparameters)) {
        foreach($partStruct->dparameters as $param) {
            $params[strtolower($param->attribute)] = $param->value;
        }
    }
    if(!empty($params['charset'])) {
        $data = iconv($params['charset'], $this->serverEncoding, $data);
    }

    // attachments
    if($this->attachmentsDir) {
        $filename = false;
        $attachmentId = $partStruct->ifid ? trim($partStruct->id, " <>") : null;
        if(empty($params['filename']) && empty($params['name']) && $attachmentId) {
            $filename = $attachmentId . '.' . strtolower($partStruct->subtype);
        }
        elseif(!empty($params['filename']) || !empty($params['name'])) {
            $filename = !empty($params['filename']) ? $params['filename'] : $params['name'];
            $filename = $this->decodeMimeStr($filename);
            $filename = $this->quoteAttachmentFilename($filename);
        }
        if($filename) {
            if($this->attachmentsDir) {
                $filepath = rtrim($this->attachmentsDir, '/\\') . DIRECTORY_SEPARATOR . $filename;
                file_put_contents($filepath, $data);
                $mail->attachments[$filename] = $filepath;
            }
            else {
                $mail->attachments[$filename] = $filename;
            }
            if($attachmentId) {
                $mail->attachmentsIds[$filename] = $attachmentId;
            }
        }
    }
    if($partStruct->type == 0 && $data) {
        if(strtolower($partStruct->subtype) == 'plain') {
            $mail->textPlain .= $data;
        }
        else {
            $mail->textHtml .= $data;
        }
    }
    elseif($partStruct->type == 2 && $data) {
        $mail->textPlain .= trim($data);
    }
    if(!empty($partStruct->parts)) {
        foreach($partStruct->parts as $subpartNum => $subpartStruct) {
            $this->initMailPart($mail, $subpartStruct, $partNum . '.' . ($subpartNum + 1));
        }
    }
}

protected function decodeMimeStr($string, $charset = 'UTF-8') {
    $newString = '';
    $elements = $this->imap_mime_header_decode($string);
    for($i = 0; $i < count($elements); $i++) {
        if($elements[$i]->charset == 'default') {
            $elements[$i]->charset = 'iso-8859-1';
        }
        $newString .= iconv($elements[$i]->charset, $charset, $elements[$i]->text);
    }
    return $newString;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T22:47:33.530

尝试在从 IMAP 往返之前和之后使用一个好的编辑器进入二进制文件，看看是否有明显的东西。我遇到过类似的问题，其中空格进入 PHP 脚本（例如，在关闭 ?> 标记之后的文件末尾）；大多数格式不会闪烁，但如果最后还有空格，.docx 可能会恢复。

# vba - VBA 编号 (11-01) 作为 excel 中的文本/数字

> ID：13288662
> 
> 赞同：0
> 
> 时间：2012-11-08T11:58:29.620
> 
> 标签：vba, excel

我创建了 VBA excel 脚本来从网站获取数据。

当它捕获时`11-01`，excel 会自动转换为 11-Jan (11/01/2012) 而不是原来的 11-01。

不将 11-01 转换为 11-Jan 的方法是什么？

```
地址单位邮政
惹兰伦彭 11-01 128791
```

谢谢。

```
Set clip = New DataObject
clip.SetText "<html><table><tr>" _
& "<td>" & ieSearchGet.outerHTML & "</td>" _
& "</tr></table></html>"
clip.PutInClipboard
ActiveCell.Offset(1, 0).Select
Do While Not IsEmpty(ActiveCell)
    ActiveCell.Offset(1, 0).Select
Loop
ActiveSheet.PasteSpecial "Unicode Text" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T12:04:12.583

I think the best is to just change the format of the cell you want to paste your data in, before doing so. Does the following work ?

```
Set clip = New DataObject
                clip.SetText "<html><table><tr>" _
                & "<td>" & ieSearchGet.outerHTML & "</td>" _
                & "</tr></table></html>"
                clip.PutInClipboard
                ActiveCell.Offset(1, 0).Select
                Do While Not IsEmpty(ActiveCell)
                    ActiveCell.Offset(1, 0).Select
                    Selection.NumberFormat = "@" 'Format as Text the selected cell
                Loop
                ActiveSheet.PasteSpecial "Unicode Text" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T12:05:02.380

You could try adding the character "'" (that is, a single quote) before the text you paste.

I have never tried to do this, so this will probably not be quite the right code. You will probably have to experiment. But it's a start:

```
clip.SetText "<html><table><tr>" _
    & "<td>'" & ieSearchGet.outerHTML & "</td>" _
    & "</tr></table></html>" 
```

# javascript - 正则表达式 javascript

> ID：13288669
> 
> 赞同：2
> 
> 时间：2012-11-08T11:58:49.907
> 
> 标签：javascript, regex

我需要编辑我的脚本才能得到`ref = '521590819123';`

如何 ？

```
<script type="text/javascript">
var ref = "http://www.site.ru/profile/521590819123";
if( ref.indexOf('profile') >= 0 ) {
  ref = String(ref).substr(ref.indexOf('profile'));
}
alert(ref);
 </script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T12:01:00.483

无需使用正则表达式：

```
var tokens = ref.split('/');
var whatyouwant = tokens[tokens.length-1]; 
```

[示范](http://jsfiddle.net/7YNRq/)

如果你真的想使用正则表达式，你可以这样做

```
var whatyouwant = /([^\/]+$)/.exec(ref)[0]; 
```

[示范](http://jsfiddle.net/Y8KvL/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T12:01:23.540

只需将 indexof 更改为 LastIndexOf

```
ref = String(ref).substr(ref.lastIndexOf('/')+1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T12:02:00.570

使用`lastIndexOf`：

```
<script type="text/javascript">
  var ref = "http://www.site.ru/profile/521590819123";
  if( ref.indexOf('profile') >= 0 ) {
    ref = ref.substr(ref.lastIndexOf('/') + 1);
  }
  alert(ref);
</script> 
```

见这里：http: [//jsfiddle.net/CFeVV/](http://jsfiddle.net/CFeVV/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T12:06:42.547

如果您想通过正则表达式解决此任务，请使用：

```
 ref = ref.replace(/^.*\/(\d+)$/g, "$1") 
```

# c# - 使用带有标识列的 EF 添加新项目

> ID：13288673
> 
> 赞同：0
> 
> 时间：2012-11-08T11:59:10.250
> 
> 标签：c#, asp.net, visual-studio-2010, entity-framework

如何使用 EF 添加一个新实体，其中我有在数据库`Id`中定义的列`identity`？

我收到以下错误：

> 当 IDENTITY_INSERT 设置为 OFF 时，无法在表“AppsData”中插入标识列的显式值。

但我不能将它设置`Id`为空，因为它`int`在数据库中（甚至不能为空）

我的功能是：

```
 public Conduit.Mam.MaMDBEntityFramework.AppsData Add(Conduit.Mam.MaMDBEntityFramework.AppsData item)
    {   
        maMdbEntities.AddToAppsDatas(item);

        maMdbEntities.SaveChanges();

        return item;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T12:01:55.423

如果您使用除零以外的任何整数值设置 Id，则删除该初始化或将其设置为零。

由于例外情况清楚地表明您的 Id 列有一个值，即标识列。

> 当 IDENTITY_INSERT 设置为 OFF 时，无法在表“AppsData”中插入标识列的显式值。

例外

> 字符串或二进制数据将被截断。该语句已终止

仅当您发送的数据长度大于 db 表列数据类型长度时才会出现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T12:07:54.750

`identity`我也必须在 edmx 中创建这个属性

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-08T12:08:14.383

字符串或二进制数据将被截断。该语句已终止。

这意味着：您要在列中插入的数据大于列大小。增加 db 中的列大小。

# c++ - 指向 bool 的 std::vector 中的对象

> ID：13288674
> 
> 赞同：0
> 
> 时间：2012-11-08T11:59:12.230
> 
> 标签：c++, c++98

> **可能重复：**
> [为什么 vector<bool>::reference 不返回对 bool 的引用？](https://stackoverflow.com/questions/8399417/why-vectorboolreference-doesnt-return-reference-to-bool)

我有一个模拟类，我在单元测试中使用它。

我看起来像：

```
class Mock
{
public:
    ...

    static ReturnType isKeyFunction(bool* _isKey)
    {
        _isKey = &(*isKeyI++);
        ...
    }
    ...
    static std::vector<bool> isKey;
    static std::vector<bool>::iterator isKeyI;
}; 
```

因此，向量填充了值，并且每次测试使用值时迭代器都会递增。

问题是代码无法编译，我猜它是因为 std::vector 被保存为位，我可以用 bool* 指向其中的成员。

```
error C2440: '=' : cannot convert from 'std::_Vb_reference<_Alloc> *' to 'bool *' 
```

我该如何解决这个问题？

# java - 检查Jlabel是否有Icon

> ID：13288675
> 
> 赞同：1
> 
> 时间：2012-11-08T11:59:12.870
> 
> 标签：java, image, swing, jlabel, imageicon

当我将图像保存到数据库时，我遇到了一个大问题。

我有一个`JLabel`电话`personImage`，当用户想要插入图像时，他必须单击`personImage`，然后`JFileChooser`出现 a 并且用户可以选择图像。所选图像将加载到`personImage`.

当用户选择图像并保存它时，它可以正常工作，但是当用户没有选择图像并要保存细节时，它会给出一个`NullPointerException`. 我认为这是因为没有将图像获取到文件对象的路径。我怎么知道里面是否有图片`JLabel`？我想检查是否有图像。

```
try {
    String fname = txt_Fname.getText();
    String lname = txt_Lname.getText();
    String mobile = txt_mobile.getText();
    String home = txt_home.getText();
    String work = txt_work.getText();
    String fax = txt_fax.getText();
    byte[] image_detail;

    PersonDAO perDAO = new PersonDAO(); //create person object
    if (status == 1) // used status  for check whether Jlabed is clicked
    {
        File image = new File(path);   
        FileInputStream fis = new FileInputStream(image); 
        ByteArrayOutputStream baos = new ByteArrayOutputStream();
        byte[] buf = new byte[1024];

        for (int readNum; (readNum = fis.read(buf)) != -1; )
        {
            baos.write(buf, 0,readNum);
        }
        image_detail =  baos.toByteArray();

        Person person1 = new Person(fname, lname, mobile, home, work, fax, image_detail); // call the person
        // constructer when there is an image. I did validate with status variable
            perDAO.InsertPerson(person1); // call the personDAO to insert the Person to database
        }
        else
        {
            Person person2 = new Person(lname, lname, mobile, home, work, fax); // if there is not an image call this constructer .
            perDAO.InsertPerson(person2); // then call to personDAO object to insert the person to  databasee
        }
    }
    catch (Exception exc)
    {
        System.out.println(exc + "sssssss");
    }

    // >>> when click on the JLabel, the JFileChooser appears
    int i = jFileChooser2.showOpenDialog(this);
    try {
        f = jFileChooser2.getSelectedFile();
        path = f.getAbsolutePath();
        ImageIcon image = new ImageIcon(path);
        status =  1;
        personImage.setIcon(image);
    }
    catch (Exception exc)
    {
        System.out.println(exc);
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-08T12:02:42.470

如果你有`JLabel label`然后这样做来检查它是否有一个图标：

```
if (label.getIcon() == null) {
  // this means there is no icon
} 
```

# jsf - 战斧文件上传中的 NullPointerException

> ID：13288678
> 
> 赞同：0
> 
> 时间：2012-11-08T11:59:40.463
> 
> 标签：jsf, file-upload, jsf-2, tomahawk

我想用 JSF 将 Excel 文件上传到 JBoss 服务器，所以我使用了 Tomahawk。

这是视图：

```
<%@ taglib uri="http://myfaces.apache.org/extensions" prefix="x"%>

<h:form id="MF" enctype="multipart/form-data" >
    <x:inputFileUpload id="fileupload" value="#{dataentryctl.minvoice}" storage="file" required="false" />
    <h:commandButton id="Submit" type="button" action="#{invoiceentryctl.PersistData}" value="save" 
        onclick="revalidateF12();submitForm()" onkeydown="keyDownEvents(this)" />
</h:form> 
```

这是控制器/模型：

```
package panaceaFACweb.FACCtlbean;

import org.apache.myfaces.custom.fileupload.UploadedFile;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;

public class dataentryctl {

    private UploadedFile minvoice;

    public UploadedFile getMinvoice() {
        return minvoice;
    }

    public void setMinvoice(UploadedFile minvoice) {
        this.minvoice = minvoice;
    }

    public String PersistData() {
        load();
        return null;
    }

    public void load() {
        ParseXLS parseXls = new ParseXLS();
        try {
            InputStream input = minvoice.getInputStream();          
            // ...
        } catch (IOException e) {           
            e.printStackTrace();
        }catch (Exception e) {          
            e.printStackTrace();
        }
    }
} 
```

我有以下 JAR：

*   tomahawk-1.1.9.jar
*   commons-el-1.0.jar
*   commons-logging-1.1.1.jar
*   commons-fileupload-1.2.2-javadoc.jar
*   commons-io-1.4.jar

其他与 JSF 相关的 JAR 已经存在。其他 JSP 页面工作正常。

我`NullPointerException`上线了`InputStream input = minvoice.getInputStream();`。

# curl - 设置证书验证位置时出错（Vagrant、Guzzle、curl）

> ID：13288680
> 
> 赞同：2
> 
> 时间：2012-11-08T11:59:46.413
> 
> 标签：curl, vagrant, guzzle

我有一个 Vagrant box 设置并运行。我正在尝试使用 Guzzle 连接到第 3 方服务的 API。

据我所知，验证证书或来自虚拟机和 API 服务器的 vagrant box 中的东西时遇到了一些问题。

任何建议将不胜感激，谢谢。

这是我回来的错误：

```
Fatal error:  Uncaught exception 'Guzzle\Http\Exception\CurlException' with message '[curl] 77: error setting certificate verify locations:
  CAfile: phar:///vagrant/web/vendor/guzzle.phar/src/Guzzle/Http/Resources/cacert.pem
  CApath: /etc/ssl/certs
 [url] https://www.domain.com/json/list?id=444&app_key=AAA [info] array (
  'url' => 'https://www.domain.com/json/list?id=444&app_key=AAA',
  'content_type' => NULL,
  'http_code' => 0,
  'header_size' => 0,
  'request_size' => 0,
  'filetime' => -1,
  'ssl_verify_result' => 0,
  'redirect_count' => 0,
  'total_time' => 0.141022,
  'namelookup_time' => 0.048923,
  'connect_time' => 0.141025,
  'pretransfer_time' => 0,
  'size_upload' => 0,
  'size_download' => 0,
  'speed_download' => 0,
  'speed_upload' => 0,
  'download_content_length' => -1,
  'upload_content_length' => -1,
  'starttransfer_time' => 0,
  'redirect_time' => 0,
  'certinfo' => 
  array (
  ),
  'redirect_url' => '',
) [debug]  in phar:///vagrant/web/vendor/guzzle.phar/src/Guzzle/Http/Curl/CurlMulti.php on line 555 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T04:18:57.740

这是以前版本的 Guzzle phar 文件的问题。PHP 的 curl 绑定不支持从 phar 流包装器中读取 cacert 文件：

> CAfile：phar:///vagrant/web/vendor/guzzle.phar/src/Guzzle/Http/Resources/cacert.pem

如果您从 phar 运行，我已经更新了 phar 的更高版本以在系统上使用 cacert 包。

# vim - 如何在不连续的行上运行命令行命令，指定单独的行号？

> ID：13288685
> 
> 赞同：3
> 
> 时间：2012-11-08T12:00:06.070
> 
> 标签：vim

例如，假设我想`foo`用`bar`第 1、3、11 和 15 行替换。我该怎么做？

```
:1,15s/foo/bar 
```

将替换`foo`为`bar`第 1-15 行。但我想指定多个单独的行（1、3、11、15），而不是范围（1-15）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-08T12:15:58.237

一种方法：执行第一行，然后在以下行`:substitute`重复相同的替换。`:&&`

```
:execute '1s/foo/bar' | 5&& | 11&& | 15&& 
```

另一种方法：使用`:global`仅在行中匹配的模式的命令。

```
:g/\%1l\|\%5l\|\%11l\|\%15l/s/foo/bar 
```

第三种方式：使用循环：

```
:for l in [1,5,11,15] | execute l.'s/foo/bar' | endfor 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T12:22:56.537

你怎么想出行号？如果这是一个手动的视觉检查过程，您可以使用[多选插件](http://www.vim.org/scripts/script.php?script_id=953)。它允许您选择多个不连续的范围，然后您可以对它们应用命令：

```
:MSExecCmd s/foo/bar 
```

# weka - 添加基于其他属性计算的新属性

> ID：13288687
> 
> 赞同：0
> 
> 时间：2012-11-08T12:00:13.943
> 
> 标签：weka

我从 WEKA 开始，想要实现以下目标。

我有具有 2 个属性的文件：user_id、user_age。我可以使用 WEKA API 成功加载数据并获取`Instances`对象。

现在我想计算新属性 user_age_range - 比如 (0-18) - 0, (19-25) - 1 等。

有没有办法使用 WEKA 过滤器计算这个属性？此外，我不想手动遍历所有实例，而是定义在单个实例上运行的方法`Instance`并使用一些过滤器（或其他抽象），将相应的“转换”应用于所有实例。

请建议 - 我怎么能做到这一点。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T13:38:52.150

在浏览完文档后，我发现了一两个过滤器，您可以结合使用它们来实现您想要的效果。

[http://weka.sourceforge.net/doc.dev/weka/filters/unsupervised/attribute/Copy.html](http://weka.sourceforge.net/doc.dev/weka/filters/unsupervised/attribute/Copy.html)

使用副本创建您将转换的副本。

[http://weka.sourceforge.net/doc.dev/weka/filters/unsupervised/attribute/NumericTransform.html](http://weka.sourceforge.net/doc.dev/weka/filters/unsupervised/attribute/NumericTransform.html)

数字转换需要一个类和一个方法选项，您可以编写自己的类，将年龄框到您想要的范围内，并提供此类和方法作为您的选项。

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-06T14:34:54.103

使用 csv 文件，您可以在 Excel 上执行此操作。如果您使用的是 arff 文件，请将其转换为 csv，然后您可以根据新属性的数量添加所需的列，然后对第一行的一个或多个属性执行任何您想做的事情。将其扩展到所有行并完成。

# java - 使用 bean 定义配置文件的 Spring 3.1 bean 可见性

> ID：13288691
> 
> 赞同：7
> 
> 时间：2012-11-08T12:00:26.243
> 
> 标签：java, spring, maven, applicationcontext

我一直在尝试使用[Spring 3.1 的 bean 定义配置文件](http://blog.springsource.com/2011/02/11/spring-framework-3-1-m1-released/#Enter%20bean%20definition%20profiles)和嵌套 bean。我曾希望我可以根据活动配置文件定义不同的 bean。考虑以下过度简化的示例，以便我的 Spring 上下文包含类似

```
<bean id="say" class="test.Say" p:hello-ref="hello"/>

<beans profile="prod">
    <bean id="hello" class="test.Hello" p:subject="Production!"/>
</beans>

<beans profile="dev">
    <bean id="hello" class="test.Hello" p:subject="Development!"/>
</beans> 
```

我收到以下错误：

> 线程“主”org.springframework.beans.factory.BeanCreationException 中的异常：在类路径资源 [applicationContext.xml] 中定义名称为“say”的 bean 创建错误：在设置 bean 属性“hello”时无法解析对 bean“hello”的引用; 嵌套异常是 org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'hello' is defined at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:328) at org.springframework.beans.factory .support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:106) 在 org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:

我期待**hello** bean 将根据活动的 Maven 配置文件（在我的情况下为*prod*或*dev*）定义。我开始认为 Spring 活动配置文件（*spring.profiles.active*）可能与 Maven 配置文件完全无关。

有人可以解释我哪里出错了吗？（这甚至可以使用配置文件吗？）。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-08T12:22:45.350

> 我期待 hello bean 将根据活动的 Maven 配置文件（在我的情况下为 prod 或 dev）定义。我开始认为 Spring 活动配置文件（spring.profiles.active）可能与 Maven 配置文件完全无关。

没错，它们是无关的。

以下是您可以解决的方法：

确保`web.xml`您在`src/main/webapp/WEB-INF/`文件夹中的内容具有以下上下文设置：

```
<context-param>
    <param-name>spring.profile.active</param-name>
    <param-value>${profileName}</param-value>
</context-param> 
```

然后确保`maven-war-plugin`已为以下各项打开了过滤`web.xml`：

```
<plugin>
    <artifactId>maven-war-plugin</artifactId>
    <version>2.3</version>
    <configuration>
        <filteringDeploymentDescriptors>true</filteringDeploymentDescriptors>
    </configuration>
</plugin> 
```

最后在您的个人资料中：

```
<profiles>
    <profile>
        <id>dev</id>
        <properties>
            <profileName>dev</profileName>
        </properties>
    </profile>
    <profile>
        <id>prod</id>
        <properties>
            <profileName>prod</profileName>
        </properties>
    </profile>
</profiles> 
```

您还可以在普通属性部分添加默认值：

```
<properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    <profileName>dev</profileName>
</properties> 
```

因此，如果您在没有该`-P`选项的情况下运行，`dev`将使用弹簧配置文件。

运行`mvn package`时`web.xml`将具有正确的值`spring.profile.active`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T14:01:36.883

**感谢 maba**（我会接受他的回答），我开始以不同的方式思考这个问题。

我已经修改了***父***bean *“say”*，因为它需要延迟初始化，因为当它最初遇到时，嵌套的 bean 上下文还不存在。因此，新版本添加了一个新 bean 并更改了*“say”*定义，使其现在看起来像：

```
<bean class="test.InitProfile" p:profiles="dev"/>

<bean id="say" class="test.Say" lazy-init="true" p:hello-ref="hello"/> 
```

新的 InitProfile bean 是负责设置活动配置文件的 InitializingBean。

它包含：

```
package test;

import org.springframework.beans.BeansException;
import org.springframework.beans.factory.InitializingBean;
import org.springframework.context.ApplicationContext;
import org.springframework.context.ApplicationContextAware;
import org.springframework.context.ConfigurableApplicationContext;
import org.springframework.util.StringUtils;

public class InitProfile implements InitializingBean, ApplicationContextAware {

    private ConfigurableApplicationContext ctx;
    private String[] profiles;

    public void setApplicationContext(ApplicationContext ac) throws BeansException {
        ctx = (ConfigurableApplicationContext) ac;
    }

    public void setProfiles(String inprofiles) {
        if (inprofiles.contains(",")) {
            profiles = StringUtils.split(inprofiles, ",");
        } else {
            profiles = new String[]{inprofiles};
        }
    }

    public void afterPropertiesSet() throws Exception {
        String[] activeProfiles = ctx.getEnvironment().getActiveProfiles();
        if (profiles != null && activeProfiles.length == 0) {
            ctx.getEnvironment().setActiveProfiles(profiles);
            ctx.refresh();
        }
    }
} 
```

使用这种方法有一个额外的优势，即能够使用类路径属性文件设置活动的弹簧配置文件（这可能因我的活动 Maven 配置文件而异）。我也喜欢这种方法，因为我可以将它用于 Web 应用程序和命令行应用程序。

# c# - System.Timer 作为单例

> ID：13288695
> 
> 赞同：2
> 
> 时间：2012-11-08T12:00:30.407
> 
> 标签：c#, multithreading, design-patterns, timer, singleton

我有许多线程不断读取的数据。这些数据需要每天更新。

我的方法是使用 a`ReaderWriterLockSlim`来管理对数据的访问。每天晚上，检测日变化的第一个线程将 a 应用于`WriteLock`数据并更新它。

为了避免不断检查换天事件。理想情况下，我希望将 System.Timer 对象创建为单例，并让它自动启动，然后每 24 小时执行一次。

这是我的方法：

首先，我扩展了 System.Timers 以在 init 上执行回调。

```
using System.Timers;

namespace Utilities
{
    class AutoStartTimer : Timer
    {
        public AutoStartTimer(ElapsedEventHandler callback, int period):base(period)
        {
            callback(null, null);
            AutoReset = true;
            Elapsed += callback;
            Enabled = true;
        }
    }
} 
```

然后我在需要它的单身人士处声明它。

```
private static AutoStartTimer _loadDataTimer = 
                                new AutoStartTimer(DataLoader, 86400000); // Daily 
```

到目前为止，这种方法对我有用。但是我想知道是否有更好的方法来实现一个单例定时器，它在初始化时执行一次，然后在一段时间内执行，或者是否有人在不扩展 Timer 类的情况下设法更有效地做到这一点。

我需要在我当前的项目中使用其中的许多，所以我想确保我使用的是一种好的方法。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T12:30:55.870

使用静态类：

```
public static class DayManager
{
     public static readonly object SyncRoot = new object();

     private static readonly Timer dayTimer;

     static DayManager()
     {
         dayTimer = new Timer { AutoReset = true; Enabled = true; Interval = 86400000d };
         dayTimer.Elapsed += OnDayTimerElapsed;
     }

     protected void OnDayTimerElapsed(object sender, ElapsedEventArgs e)
     {
         if(DayPassedEvent != null)
         {
             DayPassedEvent(this, null);
         }
     }

     public event EventHandler DayPassedEvent;
} 
```

现在，在每个线程中，您应该订阅 DayPassedEvent 并使用 Monitor.TryEnter(DayManager.SyncRoot) 来获取计时器管理类的锁。这意味着只有一个线程应该继续尝试更新数据，其余的应该无法获得锁并继续他们的生活。我将把它的确切实现留给你。

或者，您可以从此处的计时器管理类中删除 SyncRoot 并像您已经在做的那样使用另一个，我只是提供它仅供参考。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T12:53:19.390

我有更好的方法给你。使用 Codeplex 的轻量级调度程序库。

一个轻量级的任务调度库，允许您轻松地在指定的时间或间隔调度回调方法的调用。支持 .NET 3.5 和 Silverlight。

该库允许您通过几行代码将灵活的调度功能包含到您的应用程序中，并提供一个流畅的 API 来配置作业：

链接： [http ://scheduling.codeplex.com/](http://scheduling.codeplex.com/)

其他方法：

.NET 中的任务调度程序类：http: [//msdn.microsoft.com/en-us/library/system.threading.tasks.taskscheduler.aspx](http://msdn.microsoft.com/en-us/library/system.threading.tasks.taskscheduler.aspx)

[http://taskscheduler.codeplex.com/](http://taskscheduler.codeplex.com/)

[http://www.codeproject.com/Articles/1763/Task-Scheduler-Library-for-NET](http://www.codeproject.com/Articles/1763/Task-Scheduler-Library-for-NET)

# linux - 如何将windows文件夹路径转换为linux文件夹路径

> ID：13288698
> 
> 赞同：2
> 
> 时间：2012-11-08T12:00:57.483
> 
> 标签：linux

我有一个在 linux 上运行的应用程序，它从 db 读取图像文件路径并显示它......同样，还有另一个基于 Windows 的应用程序读取相同的 db 图像文件路径并显示它。我已将 SMB 服务配置为与 windows 共享文件夹...

问题是，当 linux 应用程序存储图像路径时，它使用路径作为 /data/images/file.tip 并且 windows 应用程序无法读取此文件，因为路径不是绝对的......如果 windows 应用程序修改db 它使用 \server\images 等，

我如何将windows路径转换为linux，反之亦然...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T12:03:57.500

In your application, can you not specify an OS Flag/Variable, and only store the image file name.

Then based on OS, look in XXX folder for that file.

So store "Image.jpg" in DB, and on the Windows App open "C:\Image.jpg" and on Linux open "/home/user/Image.jpg"

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T12:10:34.007

`/`and是特定于`\`操作系统的，因此当您从数据库中检索数据时，如果您在 Windows 中，请先尝试替换为`/`，`\`或者如果您在 Windows 中，请尝试替换。`\``/`

# sharepoint-2010 - 自定义可视化 Web 部件是否必须在 Sharepoint Office 365 中的沙盒解决方案中运行

> ID：13288705
> 
> 赞同：1
> 
> 时间：2012-11-08T12:01:28.323
> 
> 标签：sharepoint-2010, web-parts, office365

自定义（即我为 SharePoint 2010 开发的）可视 Web 部件是否必须在 SharePoint Office 365 的沙盒解决方案中运行，或者它可以是场解决方案吗？

谢谢，迷茫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T12:13:19.257

必须对 SharePoint 365 的 Web 部件进行沙盒处理。不能对可视 Web 部件进行沙盒处理，因为 Web 部件附带的 ascx 控件已复制到文件系统。如果需要在 SharePoint 365 中创建可视 Web 部件，可以使用 SharePoint Power Tools 扩展。

[http://visualstudiogallery.msdn.microsoft.com/8e602a8c-6714-4549-9e95-f3700344b0d9](http://visualstudiogallery.msdn.microsoft.com/8e602a8c-6714-4549-9e95-f3700344b0d9)

在那里，您可以选择创建可部署为沙盒解决方案的可视化 Web 部件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T10:11:10.680

独立于您创建的 SP-I（SharePoint 项）的类型，Office 365 仅支持沙盒解决方案。

Microsoft 将在未来几周/几个月内将 Office 365 迁移到 SharePoint 2013。迁移完成后，您还可以使用新的 SharePoint 2013 应用模型创建应用。

但目前，只能部署沙盒解决方案，因为不允许对跨 SiteCollection 边界可用的文件系统或元素进行任何更改。

当谈到 WebPart 开发时，您必须记住使用 SPSecurity 进行模拟是不可能的。（沙盒解决方案有更多限制，您应该重新访问 MSDN，以便对您可以在沙盒中做什么有一个共同的了解）

# extjs - extjs 中具有不同数据类型的同一存储

> ID：13288708
> 
> 赞同：2
> 
> 时间：2012-11-08T12:01:46.077
> 
> 标签：extjs, grid, extjs4

我有用于网格和柱形图的存储，但值是字符串形式的（服务器端格式化的数量，不能在客户端完成）。由于字符串格式的数量，网格没有被呈现。解决方案可能会使用网格和图表所需的数据类型单独存储。但这是低效的方式，因为相同的数据来自服务器。

这就是我在做什么

```
if (!window.GridModel) {
            if (!Ext.ModelManager.isRegistered('GridModel')) {
                Ext.define('GridModel', {
                    extend: 'Ext.data.Model',
                    fields: [{
                        name: 'LocCode',
                        type: 'string'
                    }, {
                        name: 'LocLvl',
                        type: 'string'
                    }, {
                        name: 'LocName',
                        type: 'string'
                    },

                    {
                        name: 'cost1',
                        type: 'string'
                    }, {
                        name: 'Cost2',
                        type: 'string'
                    }, {
                        name: 'cost3',
                        type: 'string'
                    }

    ]
            });
        }
    } 
```

图表（不缺）

```
if (!window.chartModel) {
            if (!Ext.ModelManager.isRegistered('chartModel')) {
                Ext.define('chartModel', {
                    extend: 'Ext.data.Model',
                    fields: [{
                        name: 'LocCode',
                        type: 'string'
                    }, {
                        name: 'LocLvl',
                        type: 'string'
                    }, {
                        name: 'LocName',
                        type: 'string'
                    },

                    {
                        name: 'cost1',
                        type: 'float'
                    }, {
                        name: 'Cost2',
                        type: 'float'
                    }, {
                        name: 'cost3',
                        type: 'float'
                    }

    ]
            });
        }
    } 
```

一种方法可能是将一个商店复制到另一个具有更改的字段数据类型的商店，但我不知道如何将一个商店复制到另一个具有更改的字段数据类型的商店。

我正在使用**ExtJS 4.0.7**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T19:39:28.163

您可以在同一个商店中拥有不同的类型，但您必须手动加载它们，或者在加载时使用一些技巧。

不确定您是否可以拥有完全不同的类型，但您可以使用不同的子类型。

以下是根据响应动态更改商店类型的示例：

[http://extjs-tutorials.blogspot.ca/2012/06/polymorphic-json-change-model-subclass.html](http://extjs-tutorials.blogspot.ca/2012/06/polymorphic-json-change-model-subclass.html)

# c++ - 类内类的访问方法

> ID：13288715
> 
> 赞同：0
> 
> 时间：2012-11-08T12:02:11.770
> 
> 标签：c++, class, nested-class

我正在尝试将一些代码从旧版本的程序移植到新版本，并且有些东西已经移动。有一个名为“Game”的类，它曾经包含一个名为 ButtonNameToIndex 的方法，但在较新的版本中，Game 类中现在有一个名为“InputScheme”的类，并且在 InputScheme 中声明了 ButtonNameToIndex

游戏.h：

```
class Game
{
public:
   const char *     m_szName;
   const Style * const* m_apStyles;
   bool         m_bCountNotesSeparately;
   bool         m_bAllowHopos;
   InputScheme      m_InputScheme;
} 
```

输入方案.h：

```
class InputScheme
{
public:
    const char  *m_szName;
    int     m_iButtonsPerController;
    struct GameButtonInfo
    {
        const char  *m_szName;
        GameButton  m_SecondaryMenuButton;
    };

    GameButtonInfo m_GameButtonInfo[NUM_GameButton];
    const InputMapping *m_Maps;

    GameButton ButtonNameToIndex( const RString &sButtonName ) const;
} 
```

我试图移植的代码如下所示：

```
FOREACH_ENUM( GameButton, pGame->ButtonNameToIndex("Operator"), gb )
    ini.SetValue( sPlayerKey, GameButtonToString(pGame, gb),
        FromMapping(mapping.m_iGameLights[gc][gb]) ); 
```

现在我无法弄清楚如何访问 ButtonNameToIndex ，因为它已移至一个新类。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T12:08:38.317

由于`Game`该类具有类型的公共成员变量，`InputScheme`因此您可以替换任何对

```
pGame->ButtonNameToIndex("Operator") 
```

和

```
pGame->m_InputScheme.ButtonNameToIndex("Operator") 
```

we use `->` to access the member of `Game` since we are accessing through a pointer (I assume), since `m_InputScheme` is a value (not pointer) we access its member function using the `.` operator

# java - Android：在启动应用程序之前检查密码

> ID：13288720
> 
> 赞同：0
> 
> 时间：2012-11-08T12:02:36.043
> 
> 标签：java, android, fatal-error

我正在创建一个简单的 Android 应用程序，其中第一个屏幕将向我们显示一个 EditText 和一个按钮，在 EditText 中输入“1234”（不包括引号）然后单击按钮，应用程序会将控制权转移到另一个活动.

这是代码的一部分：

```
final EditText enterPass;
Button submit;
enterPass = (EditText) findViewById(R.id.password);
submit = (Button) findViewById(R.id.submit);
    submit.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            // TODO Auto-generated method stub
            String pass = enterPass.getText().toString();
            if(pass.contentEquals("1234")){
                Intent adder = new Intent("com.example.pointsadder.Adder");
                  startActivity(adder); 
            }
        }
    }); 
```

Eclipse 根本没有在项目的任何部分显示任何错误，但是当我运行项目时，输入“1234”并单击“提交”，**我收到消息：“对不起。应用程序 com.example.adder 意外出现……”**

**编辑：**这是来自 DDMS 的日志报告：

```
 [2012-11-08 15:27:52 - ddms] null
java.lang.NullPointerException
    at com.android.ddmlib.JdwpPacket.writeAndConsume(JdwpPacket.java:213)
    at com.android.ddmlib.Client.sendAndConsume(Client.java:575)
    at com.android.ddmlib.HandleHello.sendHELO(HandleHello.java:142)
    at com.android.ddmlib.HandleHello.sendHelloCommands(HandleHello.java:65)
    at com.android.ddmlib.Client.getJdwpPacket(Client.java:672)
    at com.android.ddmlib.MonitorThread.processClientActivity(MonitorThread.java:317)
    at com.android.ddmlib.MonitorThread.run(MonitorThread.java:263) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T12:06:12.377

你能发布你的日志输出吗？我要尝试的第一件事就是更改`pass.contentEquals("1234")`为`pass.equals("1234")` Also try ：

```
Intent adder = new Intent(Password.this, Adder.class); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T12:07:33.040

你应该试试这个：

```
if(pass.equals("1234")){
    Intent adder = new Intent("com.example.pointsadder.Adder");
    startActivity(adder);
} 
```

或者，如果您使用不区分大小写的密码，则可以替换`.equals`为。`.equalsIgnoreCase`

此外，您应该像这样声明您的 Intent：

```
Intent adder = new Intent(Password.this, Adder.class);
startActivity(adder); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T12:13:30.600

```
You should try this:   

 final EditText enterPass;
    Button submit;
    enterPass = (EditText) findViewById(R.id.password);
    submit = (Button) findViewById(R.id.submit);
        submit.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                // TODO Auto-generated method stub
                String pass = enterPass.getText().toString().trim();
                if(pass.equals("1234")){
                    Intent adder = new Intent(PresentActivity.this,SecondActivity.class);
                      startActivity(adder); 
                }
            }
        }); 
```

并且不要忘记在 Manifest 文件中提及 SecondActivity

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T12:13:55.060

试试这个

```
pass.equalsIgnoreCase("1234"); 
```

这可能有效。也用下面的改变意图语法

```
Intent adder = new Intent(*currentActivity*.this,Adder.class);
startActivity(adder); 
```

还在**`manifest`**文件中添加 Adder 活动。

# yii - CGRIDVIEW 两个表格数据在 YII 中的显示

> ID：13288723
> 
> 赞同：2
> 
> 时间：2012-11-08T12:02:45.573
> 
> 标签：yii

我有 2 张桌子（学生和员工）

student(reg_no , s_name, dept, f_name) reg_no 是主键 employee(e_no,design,salary,reg_no) reg_no 是外键参考 student(reg_no)。

我想显示来自员工的 e_no、design 和来自学生表的 s_name、dept。所以我完整的 cgridview 将是

e_no，设计，s_name，部门

我的员工/admin.php 代码

```
<?php $this->widget('zii.widgets.grid.CGridView', array(
'id'=>'employee-grid',
'dataProvider'=>$model->searchEmployees(),
//'filter'=>$model,
'columns'=>array(
    'e_no',
    'e_name',
    'design',
    'salary',
    'reg_no',
    array('name'=>'student.s_name',  'value'=>'$data->student->s_name'),   // student name
       'salary',  // employee.salary

    array(
        'class'=>'CButtonColumn',
    ),

),
));
?> 
```

我的 searchEmployees() 的 model/employee.php 代码

```
public function searchEmployees()
{
    $criteria=new CDbCriteria;
    $criteria->alias = 'i';
$criteria->compare('e_no',$this->e_no);
    $criteria->compare('e_name',$this->e_name,true);
    $criteria->compare('design',$this->design,true);
    $criteria->compare('salary',$this->salary);
    $criteria->compare('reg_no',$this->reg_no);

$criteria->join= 'JOIN student d ON (i.reg_no=d.reg_no)';

return new CActiveDataProvider($this, array(
    'criteria'=>$criteria,
    'sort'=>array(
        'defaultOrder'=>'reg_no ASC',
    ),
));
} 
```

但我面临错误

未定义属性“Employee.studentname”。

如何解决错误PLZ帮助。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T19:52:45.543

[您可以在自定义列中使用CActiveRecord->getRelated](http://www.yiiframework.com/doc/api/1.1/CActiveRecord#getRelated-detail)配置 cgridview 以显示相关记录的信息...如下所示：

student(reg_no , s_name, dept, f_name) 将是 model `Student`。employee(e_no,design,salary,reg_no) 将是 model `Employee`。

`Employee.e_no`, `Employee.design`,`Student.s_name`和`Student.dept`是您想要的值，因此您的列数组应该是：

```
<?php 
    $this->widget('zii.widgets.grid.CGridView', array(
        'id'=>'student-grid',
        'dataProvider'=>Student::model()->search(),
        //'filter'=>$model,
        'columns'=>array(
            array(
                'header'=>Employee::model()->getAttributeLabel('e_no'), //column header
                'value'=>'$data->getRelated('employee')->e_no', //column name, php expression
                'type'=>'raw',
            ),
            array(
                'header'=>Employee::model()->getAttributeLabel(\'design\'), //column header
                'value'=>'$data->getRelated(\'employee\')->design', //column name, php expression
                'type'=>'raw',
            ),
            's_name',
            'dept',
        ),
    ));
?> 
```

注意相关记录数据是如何在自定义列的“值”规范中完成的，getRelated() 的参数是定义到 Student->relations() 方法中定义的 Employee 模型的关系的名称。另请查看列上的[CGridView 文档](http://www.yiiframework.com/doc/api/1.1/CGridView#columns-detail)以获取有关其工作原理的更多信息。

**更新：**您可以轻松切换此 CGridView 实例化的方法以使用 an`Employee`而不是 a`Student`并通过更改 columns 数组仍然显示相同的信息。

**更新 2：**您可以轻松处理列数组中不存在的关系：

```
'columns'=>array(
    array(
        'header'=>Employee::model()->getAttributeLabel('e_no'), //column header
        'value'=>'($data->getRelated(\'employee\')=== null)?'No related employee registry':$data->getRelated('employee')->e_no', //column name, php expression
        'type'=>'raw',
    ),
    array(
        'header'=>Employee::model()->getAttributeLabel(\'design\'), //column header
        'value'=>'($data->getRelated(\'employee\')=== null)?'No related employee registry':$data->getRelated(\'employee\')->design', //column name, php expression
        'type'=>'raw',
    ),
    's_name',
    'dept',
), 
```

`'value'`通过在我们的成员字段中进行此调整，`'columns'`每当模型尝试访问相关模型时，我们都会显示一条小消息。`getRelated()`如果没有找到相关记录，则返回相关记录或 null。也许您有 Student 一个等效的 Employee 模型，这可能是错误的原因。我希望以上内容可以帮助您解决它。

# ios - iPad 详细设置页面，如弹出视图控制器

> ID：13288724
> 
> 赞同：2
> 
> 时间：2012-11-08T12:02:48.897
> 
> 标签：ios, ipad, uiviewcontroller

我想澄清的第一件事是我不是在谈论 splitview 控制器。我想要一个带有导航控制器的弹出窗口，类似于您在点击键盘>>语言或邮件>>新帐户时得到的那个。

![弹出式导航控制器](../Images/14741d8f66a161282bff5fa4f1d79799.png)

现在这不是一个弹出框控制器，有任何标准框架可用吗？也许我错过了明显的。这样做的好处是它有导航控制器，因此视图会调整大小以适应后续的 tableview 长度。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-08T12:08:51.310

这不是弹出窗口。这是一种`modalView`具有演示风格的`UIModalPresentationFormSheet`

检查此[链接](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/ModalViewControllers/ModalViewControllers.html)

有关更多演示样式，请参阅[ModalPresentationStyle](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIViewController_Class/Reference/Reference.html#//apple_ref/occ/instp/UIViewController/modalPresentationStyle)

> **演示风格**
> 
> 呈现视图控制器时可用的呈现样式。
> 
> 类型定义枚举 {
> 
> UIModalPresentationFullScreen = 0,
> 
> UIModalPresentationPageSheet，
> 
> UIModalPresentationFormSheet,
> 
> UIModalPresentationCurrentContext
> 
> } UIModalPresentationStyle;
> 
> *常数*
> 
> **UIModalPresentationFullScreen**
> 
> 呈现的视图覆盖了屏幕，同时考虑了 WantsFullScreenLayout 属性的值。
> 
> 在 iOS 3.2 及更高版本中可用。
> 
> 在 UIViewController.h 中声明。
> 
> **UIModalPresentationPageSheet**
> 
> 呈现视图的高度设置为屏幕的高度，视图的宽度设置为纵向屏幕的宽度。任何未覆盖的区域都会变暗，以防止用户与其交互。（在纵向上，此选项与 UIModalPresentationFullScreen 基本相同。）
> 
> 在 iOS 3.2 及更高版本中可用。
> 
> 在 UIViewController.h 中声明。
> 
> **UIModalPresentationFormSheet**
> 
> 呈现的视图的宽度和高度小于屏幕的宽度和高度，并且视图在屏幕上居中。如果设备处于横向且键盘可见，则视图的位置会向上调整，以便视图保持可见。所有未覆盖的区域都变暗，以防止用户与其交互。
> 
> 在 iOS 3.2 及更高版本中可用。
> 
> 在 UIViewController.h 中声明。
> 
> **UIModalPresentationCurrentContext**
> 
> 视图使用与其父视图控制器相同的样式呈现。
> 
> 在弹出窗口中呈现视图控制器时，仅当过渡样式为 > **UIModalTransitionStyleCoverVertical**时才支持此呈现样式。尝试使用不同的转换样式会触发异常。但是，如果父视图控制器不在弹出窗口中，您可以使用其他转换样式（部分卷曲转换除外）。
> 
> 在 iOS 3.2 及更高版本中可用。
> 
> 在 UIViewController.h 中声明。

# php - 将内容更新到数据库 onclick 事件

> ID：13288727
> 
> 赞同：0
> 
> 时间：2012-11-08T12:03:10.337
> 
> 标签：php, javascript, ajax

我花了最后 2 天试图使以下代码工作。
我有三种不同语言的表格。他们每个人都有一个编辑按钮，弹出一个文本编辑器。我想做的是，当我单击“保存并关闭”按钮时，编辑的内容将使用 javascript (AJAX) 和 PHP/SQL 在数据库中更新，但在控制台中它给了我以下错误：**Uncaught ReferenceError: valueContent没有定义**。所以这是我到目前为止的代码。

```
$mvccont .=
    "<form action='edit_language/".ID.".raw' method='post' target='pop' class='comparelist' style='clear: both' onsubmit='window.open(\"\", \"pop\", \"width=0,height=0,resizeable,scrollbars\");'>".
        "<input type='hidden' name='keyword' value='".$keyword."'>".
        "<table style='width:100%; border-collapse: collapse;' >".
        "<tr><td width='20%' ><div class='info' style='width:100%; border:none;' >".
            substr($keyword, 0, 20)."<a title='".$keyword."'><input type='submit' value='Save' class='BUYN'/></a>".
            "<a href='edit_language/".$keyword."/delete'><input type='button' value='Delete' class='NONA'/></a>".
        "</div></td>";

        foreach($lan as $lang=>$lame) {
            $idk = str_replace(" ", "", $keyword).$lang;
            $mvccont .=
            "<td><div class='number3'".(($red[$keyword][$lang]=='')?" style='background: #fcc;'":"")." style='border:none;' >".
                "<input type='hidden' name='touch".$lang.$keyword."'/>".
                "<input type='text' id='s".$idk."' name='a".$lang."' value='".htmlentities($lame, ENT_QUOTES, "UTF-8")."' onchange=\"this.style.borderColor='#ff0000'; document.getElementsByName('touch".$lang.$keyword."')[0].value='true'\"/><a onclick='popbox(false, ".$idk.", true); mce();'><input type='button' value='Edit' class='BUYN'/></a>".
                "<br />".($red[$keyword][$lang]).
                "<script>".
                    "function falaffel".$idk."(step) {".
                        "var l".$idk."=document.getElementById('s".$idk."').value;".
                        "if(step==1) {".
                            "return '<textarea>'+l".$idk."+'</textarea><input type=\"button\" value=\"Save & close\" class=\"NONA\" onclick=\"'+\"document.getElementById('s".$idk."').value=tinyMCE.activeEditor.getContent(); ".$idk."=falaffel".$idk."(1); popboxremove(); document.getElementById('s".$idk."').style.borderColor='#ff0000'; updateValue(); document.getElementsByName('touch".$lang.$keyword."')[0].value='true' \"+'\">';".
                        "}".
                        "return l".$idk.";".
                    "}".
                    "var ".$idk." = falaffel".$idk."(1); ".
                "</script>".
            "</div></td>";
        }
        $mvccont .=
    "</tr></table></form>"; 
```

然后这里是 AJAX 代码：

```
function updateValue(){
var ajaxRequest = getXmlHttpRequestObject();

ajaxRequest.onreadystatechange = function(){
    if(ajaxRequest.readyState == 4){
        var valueContent = document.getElementsByTagName("input");
    }
}
ajaxRequest.open("POST", "comp/update_lang.php", true);
ajaxRequest.send(valueContent);
} 
```

最后是 PHP 代码：

```
<?php
foreach(array(1=>"en", 2=>"it", 3=>"pl") as $id=>$lang) {
    if($_POST["touch".$id.$_POST["keyword"]]=="true") {
        $sql = "UPDATE translat SET value='".mysql_real_escape_string($_POST["a".$id])."', date=".NOWTIME." WHERE lang=".$id." AND keyword='".urldecode($_POST["keyword"])."'";
        $insert = $db->query($sql);
        $insert->execute();
        @unlink(TEMP."lang_".$lang.".cache");
    }
}
$mvccont .=
"<script>".
    "window.close();".
"</script>";
die($mvccont);
?> 
```

非常感谢你的帮助。

# java - Maven 没有正确选择 JAVA_HOME

> ID：13288735
> 
> 赞同：35
> 
> 时间：2012-11-08T12:03:29.380
> 
> 标签：java, maven, pom.xml

我在 windows 环境下使用 maven 编译我的项目。虽然我刚刚创建了项目并添加了各种库的依赖项。

当我添加它们时，maven 开始抱怨缺少`tools.jar`，所以我在下面添加了`pom.xml`：

```
<dependency>
  <groupId>com.sun</groupId>
  <artifactId>tools</artifactId>
  <version>1.6</version>
  <scope>system</scope>
  <systemPath>${java.home}/../lib/tools.jar</systemPath>
</dependency> 
```

当我运行 maven 安装时，我收到了缺少 jar 的错误，如下所示：

```
[ERROR] Failed to execute goal on project GApp: Could not resolve dependencies for project GApp:GApp:war:0.0.1-SNAPSHOT: Could not find artifact com.sun:tools:jar:1.6 at specified path C:\Program Files\Java\jre6\lib\tools.jar -> [Help 1] 
```

问题是`tools.jar`在“ `C:\Program Files\Java\jdk1.6.0_26\lib`”中并且在环境变量中正确设置`JAVA_HOME`但maven仍在jre文件夹中查找错误消息“ `C:\Program Files\Java\jre6\lib\tools.jar`”。

```
C:\>echo %JAVA_HOME%
C:\Program Files\Java\jdk1.6.0_26 
```

**有趣**的是：当我设置依赖的完整路径时，它工作得很好。但我不想硬编码。

```
<dependency>
  <groupId>com.sun</groupId>
  <artifactId>tools</artifactId>
  <version>1.6</version>
  <scope>system</scope>
  <systemPath>C:\Program Files\Java\jdk1.6.0_26\lib\tools.jar</systemPath>
</dependency> 
```

有人可以为此提出任何动态解决方案吗？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2014-04-17T09:18:08.050

这是 Eclipse Maven 支持中的一个错误。[**根据Maven 规范**](http://docs.codehaus.org/display/MAVENUSER/MavenPropertiesGuide)，Eclipse 不支持所有全局 Maven 属性。

根据规格：

> ${java.home} 指定当前 JRE_HOME 环境的路径，使用相对路径来获取例如

至少在 Eclipse 4.3.1 中并非如此，这里`java.home`总是指向*用于启动 Eclipse 的 JRE*，而不是构建 JRE。

要解决此问题，您需要使用 JDK 中的 JRE 启动 Eclipse，方法是在`eclipse.ini`（*之前* `-vmargs`！）中添加如下内容：

```
-vm
C:/<your_path_to_jdk170>/jre/bin/server/jvm.dll 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T12:45:10.327

看来您的 JAVA_HOME 设置为指向 Eclipse 中的 JRE。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-08T18:04:28.107

您永远不应该使用系统范围依赖项。tools.jar 中的所有代码都可以通过正在运行的 JVM 获得。您应该完全删除此依赖项..

此外，为了检查 Maven 正在使用什么运行时，只需调用

```
mvn -v 
```

如果您仍然对工具 jar 的依赖存在问题，则您添加的依赖项之一具有该依赖项（而且质量确实很差）。找出它运行的是哪一个

```
mvn dependency:tree 
```

或者如果失败，只需删除一个又一个依赖项，直到上述命令的问题消失。

然后，当您知道它来自哪里时，您可以决定下一步该做什么。一种方法是对引入工具的依赖项使用排除项。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-10-21T09:30:51.260

Maven ${java.home} 属性被设置并取自不同的地方，具体取决于您的 Eclipse 执行：

*   从为工作区选择的默认 JRE

    > 窗口>首选项>Java>已安装的 JRE

*   从特定的 Eclipse 项目，

    > Java 构建路径>库>JRE 系统库

*   从运行配置。

    > 运行配置 > 特定运行配置 > JRE

请记住您的 JRE 主路径指向 JDK 下的 JDK 或 JRE

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-05T00:08:08.933

添加 JAVA_HOME 环境变量时，如果路径中有空格，则必须将整个内容用引号括起来。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-01-19T23:46:26.410

您可能使用了错误的 Maven 安装。在 Window > Preferences > Maven > Installations 中切换它。我将我的设置为 Fedora Maven 安装；将其更改回默认值（嵌入在 m2e 中的版本）为我解决了这个问题。

我怀疑导致这个问题的原因是 Fedora Maven 安装使用了 Fedora 的 OpenJDK，这可能会将 tools.jar 放在一个奇怪的位置（关于 Fedora 的 OpenJDK 的一切都是奇怪的和非标准的），所以 Maven 找不到它。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-01-30T17:18:42.187

还要查看主目录中的 .mavenrc 文件。这让我措手不及。

我按照建议更改了所有内容，只是发现我的 .mavenrc 文件将 JAVA_HOME 设置为旧版本。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-08T12:34:05.207

听起来你在 Eclipse 中运行 Maven。Eclipse 不咨询 JAVA_HOME。

确保已将 Eclipse 首选项中的 JRE 设置为所需的 JDK。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-09-16T18:53:01.873

检查您是否有 .mavenrc 文件，它可能会强制 JAVA_HOME 与环境变量中设置的内容不同。

# php - Detecting similar structure of strings in PHP

> ID：13288740
> 
> 赞同：0
> 
> 时间：2012-11-08T12:03:53.237
> 
> 标签：php

Assuming I have the following two strings:

```
START dsad COMMAND5 name 
```

```
START hfhsaklk342cxz COMMAND8 name 
```

I want to be able to analyze and find the common structure between the strings:

```
START ### COMMAND### name 
```

(### marks changing data).

(They all start with "START ", followed by something, then " COMMAND", then something, then " name")

Any ideas?

# sql - 将同一行的 ID 链接到其他表

> ID：13288742
> 
> 赞同：1
> 
> 时间：2012-11-08T12:03:57.777
> 
> 标签：sql, sql-server

我有一个映射表，可以保存同一个表中的 ID。

例如我有：

变量（表）值（表）Variables_Values（映射表）

映射表具有以下字段：

```
VariableID
To_VariableID
To_ValueID 
```

因此，一行可能有两个变量 ID，或者一个变量 ID 和一个值 ID。它始终是一对，因此不能同时有两个变量 ID 和一个值 ID。

现在，在变量和值表中，有一个名称字段，因此变量和值也有名称。

我想创建一个查询，该查询将根据映射表中的 ID 显示名称，但我不确定如何。

现在我有一个查询，它返回如下所示的结果：

变量名 To_VariableID To_ValueID

我想显示 VariableName_2，ValueName 而不是 To_VariableID To_ValueID。

有这方面的技术吗？它可以是以下查询的组合吗？

```
SELECT map.ID, map.TransitionID, variable.Name
FROM Variables AS variable INNER JOIN Mapping AS map 
ON variable.VariableID = map.VariableID

SELECT variable.VariableID, variable.Name
FROM Variable AS variable
WHERE variable.VariableID IN ( SELECT map.To_VariableID FROM Mapping AS map)

SELECT value.Name
FROM Values AS value
WHERE value.ValueID IN ( SELECT map.To_ValueID FROM Mapping AS map) 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T13:27:31.323

就这么简单：

```
SELECT map.Transition_Set_Variable_ID, 
       map.Transition_ID,
       variable.Name,
       variable2.Name,
       value.Name
FROM Variables AS variable 
  INNER JOIN Mapping AS map ON variable.VariableID = map.VariableID
  LEFT JOIN Variables AS variable2 ON map.To_VariableID = variable2.VariableID
  LEFT JOIN Values AS value ON tsv.To_ValueID = value.ValueID
ORDER BY map.TransitionID, variable.VariableID 
```

# asp.net-mvc - 我们可以使用 kendoUI web 和 kendoUI dataviz 的组合吗

> ID：13288744
> 
> 赞同：1
> 
> 时间：2012-11-08T12:04:01.560
> 
> 标签：asp.net-mvc, kendo-ui, kendo-dataviz

在我的应用程序中，我已经使用了“KendoUI web”中的所有小部件，现在我想实现条形图，所以我可以在我的应用程序中同时使用“kendo dataviz”吗，我已经实现了这个，我可以加载“条形图” ”或其他“网络”小部件一次。所以你能告诉我是否可以同时使用两者。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T20:10:40.607

是的，你可以，以前的版本有问题，你试过最新版本（Q2 sp - 913）吗？

还有一个名为**kendo.all.min.js**的脚本，其中包含[dataviz/mobile/web](http://docs.kendoui.com/getting-started/javascript-dependencies)框架到您可以使用的单个文件中。

这是 CDN：

```
<script src="http://cdn.kendostatic.com/2012.2.913/js/kendo.all.min.js"></script> 
```

# ruby-on-rails - How to migrate mongoid model to model with same name?

> ID：13288748
> 
> 赞同：1
> 
> 时间：2012-11-08T12:04:18.283
> 
> 标签：ruby-on-rails, mongoid

So I have a User model using Mongoid::Documents and I'm adding some field and removing one.

1.  How do I move this model to the new model without downtime?
2.  Any traps I'm bound to find?

(learning rails)

# sql - 是否有必要使用 SSIS 来使用 Oracle 数据创建 SSAS 多维数据集？

> ID：13288749
> 
> 赞同：3
> 
> 时间：2012-11-08T12:04:19.593
> 
> 标签：sql, sql-server, ssis, ssas, business-intelligence

我正在使用 Microsoft BI Stack 和 Oracle 数据库进行研究项目。在使用这两种技术时，我能够使用 SSIS 和 SSRS。

我的过程是通过 SSIS 和 SSAS 连接 Oracle 数据库。

是的，它起作用了，但 SSIS 负责 ETL 过程。我仍然能够在不使用 SSIS 的情况下在 SSAS 中创建多维数据集。

这两个过程有什么区别？

1.  在不使用 SSIS 的情况下使用 SSAS 时，是否会在后台自动调用 SSIS 进程（ETL）？

2.  如果是，那么拥有 SSIS 有什么意义？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T13:38:36.363

SSIS 是一个 ETL 框架，这意味着它旨在从一个或多个源中提取、转换和加载数据到一个或多个目的地。

SSAS 是一种 OLAP（在线分析处理），旨在聚合来自一个或多个来源的数据，以实现更快的多维查询。

这两种工具可以一起使用，因为 SSIS 可用于构建数据仓库，SSAS 将在该数据仓库上构建它的多维数据集，但它们绝不是依赖的。

您还可以使用 SSIS 自动处理您的多维数据集（完整或部分）。

为了更清楚地回答您的问题：不，SSAS 不调用 SSIS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T23:40:50.587

是的，您可以在 SSAS 中直接针对 Oracle 数据构建多维数据集。完全避免使用 SSIS。尽管大多数人更喜欢将数据复制到 MS SQL 中，因为 MS SQL 比 Oracle 便宜。

# android - Android - Horizontal progress bar with dots

> ID：13288754
> 
> 赞同：2
> 
> 时间：2012-11-08T12:04:23.623
> 
> 标签：android, progress-bar, android-progressbar

I have a project that the user answers questions in a form. I need to implement a horizontal progress bar (not a dialog), with dots instead the normal bar.

When the user answers a question, the dot of that specific question changes the color. This is possible? I'm using API 16 (target) and API 7 (minimum) with Sherlock ActionBar

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T13:28:57.530

XML:

```
<LinearLayout
    android:id="@+id/image_layout"
    android:orientation="horizontal" 
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content"
    android:layout_gravity="center_vertical"> 
```

动态添加图片并隐藏它们（基于问题总数），我也将 layout_weight 设置为 1，如您所见，因此每个“点”具有相同的大小：

```
ImageView[] images = new ImageView[totQuestions];
LinearLayout imageLayout = (LinearLayout) findViewById(R.id.image_layout);  
ImageView image;
LinearLayout.LayoutParams layoutParams;
for(int i = 0; i < totQuestions; i++){
    image = new ImageView(this);
    layoutParams = new LinearLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT, 1.0f);
    image.setLayoutParams(layoutParams);
    image.setBackgroundDrawable(getResources().getDrawable(R.drawable.circle_green));
    image.setVisibility(View.INVISIBLE);
    images[i] = image;
    imageLayout.addView(image);
} 
```

每个答案后显示图片：

```
imageLayout.getChildAt(questionNr).setVisibility(View.VISIBLE); //starting at 0 
```

我只是改进了**slezadav 的**建议。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T12:21:21.750

如果您没有大量问题，则仅使用多个 ImageView 来表示点可能就足够了。XML 示例：

```
 <RelativeLayout
        android:id="@+id/dotsL"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true"
        android:layout_marginBottom="5dp"
        android:layout_marginTop="5dp"
        android:orientation="vertical" >

        <ImageView
            android:id="@+id/dot1"
            android:layout_width="5dp"
            android:layout_height="5dp"
            android:layout_marginTop="5dp"
            android:background="@drawable/circle_white" >
        </ImageView>

        <ImageView
            android:id="@+id/dot2"
            android:layout_width="5dp"
            android:layout_height="5dp"
            android:layout_marginLeft="5dp"
            android:layout_marginTop="5dp"
            android:layout_toRightOf="@+id/dot1"
            android:background="@drawable/circle_white" >
        </ImageView>

        <ImageView
            android:id="@+id/dot3"
            android:layout_width="5dp"
            android:layout_height="5dp"
            android:layout_marginLeft="5dp"
            android:layout_marginTop="5dp"
            android:layout_toRightOf="@+id/dot2"
            android:background="@drawable/circle_white" >
        </ImageView>

        <ImageView
            android:id="@+id/dot4"
            android:layout_width="5dp"
            android:layout_height="5dp"
            android:layout_marginLeft="5dp"
            android:layout_marginTop="5dp"
            android:layout_toRightOf="@+id/dot3"
            android:background="@drawable/circle_white" >
        </ImageView>

        <ImageView
            android:id="@+id/dot5"
            android:layout_width="5dp"
            android:layout_height="5dp"
            android:layout_marginLeft="5dp"
            android:layout_marginTop="5dp"
            android:layout_toRightOf="@+id/dot4"
            android:background="@drawable/circle_white" >
        </ImageView>
    </RelativeLayout> 
```

在java中：

```
 mDots = new ImageView[5];
    mDots[0] = (ImageView) rootView.findViewById(R.id.dot1);
    mDots[1] = (ImageView) rootView.findViewById(R.id.dot2);
    mDots[2] = (ImageView) rootView.findViewById(R.id.dot3);
    mDots[3] = (ImageView) rootView.findViewById(R.id.dot4);
    mDots[4] = (ImageView) rootView.findViewById(R.id.dot5); 
```

当用户回答问题时，只需：

```
mDots[questionNumber].setBackgroundDrawable(getResources().getDrawable(R.drawable.circle_green)); 
```

注意：此方法要求您具有相应的可绘制对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T20:29:35.840

Android 框架中已经包含一个 ProgressBar 小部件。这适用于所有类型的布局，并且不限于对话框。使用它并使用您自己的可绘制点指定 android:progressDrawable 或 android:indeterminateDrawable 属性将是最简单的解决方案。有关详细信息，请参阅[文档](http://developer.android.com/reference/android/widget/ProgressBar.html)。

# php - How to return the a unix-timestamp for the start of a month of a particular unix-timestamp PHP

> ID：13288762
> 
> 赞同：0
> 
> 时间：2012-11-08T12:04:48.970
> 
> 标签：php, unix, unix-timestamp

I need a generic function that takes a unix-timestamp representation of a date-time and returns a representation for, say, midnight on the first of the month.

i.e. I pass `1352376093` which represents now (Thu, 08 Nov 2012 12:01:33 GMT) and `1351728000` is returned which represents (Thu, 01 Nov 2012 00:00:00 GMT)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T12:13:48.347

此代码段应该可以帮助您解决问题。只需从现有日期中取出月份和年份并将其转换回时间戳即可。

```
<?php
     $time = 1352376093;
     $date = date('Y-m-01 00:00:00', $time);
     $result = strtotime($date); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T12:54:30.807

所以最终得到了这个功能：

```
$earliest_issue = db_result( $result, 0 );
$day_of_month_of_earliest_issue = date("d", $earliest_issue);
$hour_of_month_of_earliest_issue = date("h", $earliest_issue);
$minute_of_month_of_earliest_issue = date("i", $earliest_issue);
$seconds_in_month = date("s", $earliest_issue);
$seconds_in_day_of_month = (($day_of_month_of_earliest_issue*24*60*60)-86400);
$seconds_in_hour_of_month = (($hour_of_month_of_earliest_issue*60*60)-3600);
$seconds_in_minute_of_month = (($minute_of_month_of_earliest_issue*60));
$start_time_of_query = ($earliest_issue - $seconds_in_day_of_month - $seconds_in_hour_of_month - $seconds_in_minute_of_month - $seconds_in_month);

return $start_time_of_query; 
```

`$earliest_issue`开始日期在哪里...

如果有人阅读本文具有我希望的更优雅的功能，请贡献，谢谢！

# mysql - 嵌套查询（依赖查询）

> ID：13288764
> 
> 赞同：4
> 
> 时间：2012-11-08T12:04:54.320
> 
> 标签：mysql, sql, database, sqlite

我需要存储一个家庭（即父母的一些孩子。那些孩子有自己的孩子等等..）

所以，我创建了一个具有以下结构的表族

> id child child_id parent_id

当我保存一个孩子时，我会存储一个 parent_id。

现在，

当我想获取给定父母的所有孩子时，我可以轻松做到。

```
select child_id from family where parent_id = <given parent id> 
```

但，

现在我想获取完整的家庭（给定父母的所有后代）

IE

我想获取所有具有给定 parent_id 的孩子 + 所有在第一个查询中是获取的孩子的孩子的孩子，依此类推。

有人可以帮助我吗？

我也是，可能有更好的方法来最初存储数据，所以我可以稍后获取它。有人可以指出更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T12:41:23.807

您可以编写一个查询来获取子项及其所有依赖项，但首先您需要重新设计表结构并在添加新子项时强制执行协议以使查询始终有效。

看看[这篇描述和解释这种方法的非常有用的文章](http://www.sitepoint.com/hierarchical-data-database/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T12:11:11.697

使用子查询

```
select GC.grandchildren,children from children C inner join grandchildren GC
  on C.childid=GC.id and
  C.childid in 
 (select child_id from family
  where parent_id = <given parent id>) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T13:02:04.193

关于您的表设计，我认为您的`child_id`列是多余的，您可以通过设置哪个是某个节点的 parent_id 来构建层次结构，并将根节点的 parent_id 留空。

关于遍历所有孩子的查询，您可以使用此处提出的方法（http://mikehillyer.com/articles/managing-hierarchical-data-in-mysql/），但这意味着您需要遵循您的 id 中的一些约定并为每个节点存储一个“路径”。（如果您需要在树的中间插入一些东西，这会使事情复杂化）

其他数据库品牌有针对此问题的子句（对于 Oracle，您有 STARTS WITH ... CONNECT BY 子句），但它们都不是 ANSI。

希望能帮助到你

# iphone - 在 UIKit 中创建透明线的最快方法是什么？

> ID：13288766
> 
> 赞同：2
> 
> 时间：2012-11-08T12:05:07.090
> 
> 标签：iphone, ios, uikit, core-graphics

这个：

```
UIView *view = [[UIView alloc] initWithFrame:CGRectMake(x, y, width, 1)];
view.backgroundColor = [UIColor whiteColor];
view.alpha = 0.1; 
```

或者这个：

```
UIView *view = [[UIView alloc] initWithFrame:CGRectMake(x, y, width, 1)];
view.backgroundColor = [UIColor colorWithWhite:1.0 alpha:0.1]; 
```

还是有第三种选择？使用带有图像的 UIImageView？使用 CoreGraphics 进行自定义绘图？什么应该是最快的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T22:54:30.660

最快的方法是创建一个 CALayer。如果需要，使用它可以让您轻松更改其颜色/不透明度。

```
CALayer *line = [CALayer new];
line.frame = CGRectMake(x, y, width, 1.0);
line.backgroundColor = [[UIColor whiteColor] colorWithAlphaComponent:0.1].CGColor;
[someView.layer addSublayer:line]; 
```

如果你想在现有视图上画一条线并让它保持不变，你可以将以下代码添加到现有视图的 drawRect: 方法中：

```
CGContextRef context = UIGraphicsGetCurrentContext();
CGContextSetStrokeColorWithColor(context, [[UIColor whiteColor] colorWithAlphaComponent:0.1].CGColor);
CGContextSetLineWidth(context, 1.0);
CGContextMoveToPoint(context, x, y);
CGContextAddLineToPoint(context, x + width, y);
CGContextStrokePath(context); 
```

# javascript - 如何在对主页的第一个请求中将 JSON 数据与返回的 HTML 结合起来？

> ID：13288768
> 
> 赞同：1
> 
> 时间：2012-11-08T12:05:13.707
> 
> 标签：javascript, html, json

我的场景是这样的——用户请求主页，然后页面的 javascript 代码对同一服务器执行 ajax GET 请求以获取一些对象。

服务器将主页保存为翡翠模板。

所以，现在加载主页需要两次往返：

1.  获取主页
2.  获取 JSON 对象

我可以接受，但只是出于好奇——我有哪些选择可以将稍后请求的对象合并到主页的初始 GET 请求中？

我看到一种方法是有一个隐藏的 html 元素，它的内部 HTML 将是对象的字符串表示。有点尴尬，但在服务器端非常简单，因为主页玉模板无论如何都经过预处理。

我还有哪些其他选择？

请注意，我非常清楚节省这一次往返并不重要。我只是对这些技术感到好奇。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T12:12:20.137

另一种选择是始终返回一个 JSON 对象，然后主页的 HTML 将是该对象上某些属性的值。不过，这可能需要对您的客户端逻辑进行一些更改。

另一种选择：主页代码可以包含一个脚本块，而不是包含 JSON 字符串的隐藏 HTML 输入/文本区域，其中将对象文字声明为变量。像这样的东西：

```
<script>
var myObj = ... // Your JSON string here.
                // myObj will be an object literal, and you won't need
                // to parse the JSON.
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T12:17:36.517

初始 GET 请求将仅检索该文档。您可以在页面底部加载定义为脚本的附加文档，因此您无需为初始加载执行 XHR。

例如：

```
GET /index.html
//At the bottom you have a <script src="/somedata.js"></script>

GET /somedata.js
//here you define you var myObj = {}.... as suggested by bfavertto 
```

根据您使用的服务器端技术，这可能是例如在 MVC3 中

```
public partial class SomeDataController : BaseController
{
    public virtual ContentResult SomeData()
    {
        var someObject = //GET the JSON
        return Content("var myObj = " + someObject, "application/javascript");
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T13:34:07.363

您可以将 Json 数据嵌入 HTML 中的隐藏标记中。在运行时，您的 javascript 会从此隐藏标记中读取数据，而不是进行 Json 调用（或在此数据不可用时进行调用）。

```
<!--the contents of this div will be filled at server side with a Json string-->
<div id="my-json-data" style="display:hidden">[...json data...]</div> 
```

准备好文件：

```
var jsonStr = document.getElementById( "my-json-data" ).innerHTML; 
```

# iphone - window.close(); for closing UIWebView

> ID：13288769
> 
> 赞同：0
> 
> 时间：2012-11-08T12:05:20.880
> 
> 标签：iphone, objective-c, ios, uiwebview

> **Possible Duplicate:**
> [Javascript in UIWebView callback to C/Objective-C](https://stackoverflow.com/questions/2873899/javascript-in-uiwebview-callback-to-c-objective-c)

I have an application which has a UIwebView with and its delegate methods in that one URL has source like

```
button onclick="window.close();">Close Me 
```

and when I click on that not any of delegate method called.

How can I get that button close me clicked?

# mysql - 如果没有记录，我怎么能算为 0？

> ID：13288777
> 
> 赞同：1
> 
> 时间：2012-11-08T12:05:59.647
> 
> 标签：mysql, date

我有这样的查询

```
select `temp`, IfNULL(count(id),0) t 
from survey 
where `temp`<>'NULL' and `temp`<> '' and date(submitdate)='date' 
group by `temp 
```

带 o/p

```
temp        t
A1          1 
```

但如果没有记录，以下是所选日期发生的情况：我没有得到任何结果。答案就像 A1,A2,A3

我需要这样的o/p

```
temp   t
A1     1
A2     0
A3     0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T12:22:56.693

您将不得不做一些自我`JOIN`技巧来获得每个答案的记录：

```
SELECT s.`temp`, count(survey.id) t
-- This will ensure that you will get all relevant answers A1, A2, A3
FROM (
  SELECT DISTINCT `temp`
  FROM survey
  WHERE `temp` <> 'NULL' and `temp` <> ''
--             ^^^^^^^^^ Might want to replace this by `temp` IS NOT NULL?
) s
-- Only then, you will actually get the actual records per answer and date
LEFT OUTER JOIN survey
  ON s.`temp` = survey.`temp`
  AND date(survey.submitdate) = 'date'
GROUP BY s.`temp` 
```

只要确保您在`survey.temp`.

# c# - 将 AsyncCallback 存储在成员变量中以防止创建新变量的性能优势

> ID：13288780
> 
> 赞同：1
> 
> 时间：2012-11-08T12:06:07.467
> 
> 标签：c#, c++-cli, udpclient, asynccallback

我正在使用 UdpClient (c++/cli)，我使用明显的 BeginReceive 启动我的监听器。

```
System::Void CUdpTransmitter::StartListener() {
  ...
  m_UdpClient->BeginReceive ( gcnew System::AsyncCallback(ReceiveCallback), this );
} 
```

ReceiveCallback 应该在最后开始新的 AsyncCallback。是否有任何性能优势或任何其他理由将 AsyncCallback 存储在成员变量中，而不是在每次调用时分配一个新的？线程安全呢？比较以下变体：

```
System::Void CUdpTransmitter::ReceiveCallback1( System::IAsyncResult ^ asyncResult ) {
  m_UdpClient->EndReceive();
  // parse received data (not time consumpting)
  ...
  if (! exit) {
    m_UdpClient->BeginReceive ( gcnew System::AsyncCallback(ReceiveCallback), self );
  }
}
public ref class CUdpTransmitter {
  AsyncCallback ^ m_callback; // store AsyncCallback in a member variable, it will be initized in constructor... gcnew System::AsyncCallback(ReceiveCallback2)
  System::Void CUdpTransmitter::ReceiveCallback2( System::IAsyncResult ^ asyncResult ) {
    m_UdpClient->EndReceive();
    // parse received data (not time consumpting)
    ...
    if (! exit) {
      // start receiving, reuse the member variable and avoid gcnew
      m_UdpClient->BeginReceive ( m_callback, self );
    }
  }
} 
```

感谢您的时间和回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T19:01:05.520

代表是线程安全的，所以不用担心。（委托在创建后是不可变的，任何从多播委托中添加或删除委托的方法实际上都返回了一个新的多播委托。）

实例化委托对象和垃圾收集它们有一个非常小的性能损失，所以如果你经常使用这个委托，那么使用 m_callback。然而，正如我所说，这是一个非常小的惩罚，除非你每秒执行几百万次。

如果你不经常这样做，并且你想清理你的代码并减少类成员的闲置，那么每次都实例化回调。

# windows - makefile - escape parentheses

> ID：13288782
> 
> 赞同：2
> 
> 时间：2012-11-08T12:06:13.647
> 
> 标签：windows, escaping, makefile, gnu-make

I have a folder on my HD which contains parentheses in its name. Like: `C:/stuff (really cool)/`. The make `$(wildcard ..)` function does not work properly with this directory.

```
$(wildcard C:/stuff (really cool)/*.jpg)` 
```

evaluates to no results at all. I guess this is due to the fact that the closing parentheses in the directory-name is treated as the closing parentheses for the `$(wildcard ..)` function. Escaping the `(` and `)` with a backslash does not work. What also does not work, is putting the directory-name into a variable and then using the wildcard function.

```
DIR = C:/stuff (really cool)
all:
    @echo "$(wildcard $(DIR)/*.jpg)" 
```

No results at all, again.

How should I properly escape the parentheses?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T22:37:34.787

您没有提到您在哪种环境中运行，但以下两种打印机制都适用于常规 DOS 提示符以及 msys/mingw：

```
DIR = C:/stuff\ (really\ cool)
$(info Files in subdir are: $(wildcard $(DIR)/*.jpg))

all:
    @echo "Files in subdir are: $(wildcard $(DIR)/*.jpg)" 
```

-ed 表达式周围的双引号`echo`仅对 msys/mingw 是必需的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T12:44:17.450

以下不起作用，不断警告他人：

特殊字符通常被“保护”或转义，并带有引号。要创建带括号的变量，请使用双引号。

```
DIR = "C:/stuff (really cool)" 
```

在您的情况下，最大的问题是空间会导致您的路径被分解为几个部分而不是一个部分。

这有效：

GNU Make 让你可以转义空格，`\\`这样你的调用`$wildcard`就会变成

```
$(wildcard C:/stuff\\ (really\\ cool)/*.jpg) 
```

# c# - System.Diagnostics.TraceSource 中的跟踪输出格式

> ID：13288783
> 
> 赞同：20
> 
> 时间：2012-11-08T12:06:17.197
> 
> 标签：c#, .net, system.diagnostics, tracesource

以下代码：

```
static void Main(string[] args)
{
    TraceSource ts = new TraceSource("MyApplication");

    ts.Switch = new SourceSwitch("MySwitch");
    ts.Switch.Level = SourceLevels.All;

    ts.Listeners.Add(new TextWriterTraceListener(Console.Out));

    ts.TraceInformation("Hello World");
    Console.ReadKey();
} 
```

生成以下输出：

> 我的应用程序信息：0：Hello World

跟踪输出开头的“MyApplication Information: 0 :”部分来自 TraceSource 类本身。

但是，我需要在行首有一个时间戳，我也想将“信息”更改为“信息”。

有什么方法可以在跟踪输出中获得更多自由，以便我可以将其配置为：

> **13:03:00** - MyApplication**信息**：Hello World

我尝试了几个小时，但没有成功。无论我做什么，在输出行的开头，总是有这个常量预定义的“MyApplication Information：0：Hello World”输出。

MSDN 文档也没有透露任何有用的信息。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-05-16T14:41:47.320

也迟到了，但万一其他人降落在这里......

我喜欢保持简单。我在我的 App.cs 中使用了一个静态 Trace 方法，它与我在启动时创建的单个 TraceSource 相关联。这允许我在整个应用程序中访问它并保持 app.config 简单：

```
public static void Trace(TraceEventType eventType, string message)
{
    if (_TraceSource.Switch.ShouldTrace(eventType))
    {
        string tracemessage = string.Format("{0}\t[{1}]\t{2}", DateTime.Now.ToString("MM/dd/yy HH:mm:ss"), eventType, message);
        foreach (TraceListener listener in _TraceSource.Listeners)
        {
            listener.WriteLine(tracemessage);
            listener.Flush();
        }
    }
} 
```

我的 app.config 条目：

```
 <system.diagnostics>
    <sources>
      <source name="mytracesource" switchValue="All">
        <listeners>
          <add name="mytracelistener"
               type="System.Diagnostics.TextWriterTraceListener"
               initializeData="trace.log">
          </add>
        </listeners>
      </source>
    </sources>
  </system.diagnostics> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-08T13:50:14.573

在跟踪侦听器上设置[TraceOutputOptions属性。](http://msdn.microsoft.com/en-us/library/system.diagnostics.tracelistener.traceoutputoptions.aspx)[格式是预定义的，但您可以选择加入TraceOptions](http://msdn.microsoft.com/en-us/library/a10k7w6c.aspx)枚举定义的附加数据。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-03-30T17:52:31.777

[TraceSource.TraceInformation](http://msdn.microsoft.com/en-us/library/ky200w42.aspx)最终对添加到标头中的每个侦听器调用[TraceListener.TraceEvent](http://msdn.microsoft.com/en-us/library/xa710ybd.aspx)。幸运的是，`TraceListener`有一个可用于生成自定义输出的[WriteLine方法。](http://msdn.microsoft.com/en-us/library/3h418ytb.aspx)

```
static void Main(string[] args)
{
    TraceSource ts = new TraceSource("MyApplication");

    ts.Switch = new SourceSwitch("MySwitch");
    ts.Switch.Level = SourceLevels.All;

    ts.Listeners.Add(new TextWriterTraceListener(Console.Out));

    for (int i = 0; i < ts.Listeners.Count; i++)
    {
        var listener = ts.Listeners[i];

        listener.WriteLine(
            string.Format("{0} - {1} Info: {2}",
            DateTime.Now.ToString("HH:mm:ss"), ts.Name, "Hello World"));
        listener.Flush();
    }
    Console.ReadKey();
} 
```

输出：

> **13:52:05** - MyApplication**信息**：Hello World

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-03-18T10:28:32.497

也许有点晚了，但如果您想要一个简单而通用的解决方案，您应该查看 CodePlex 上的[Essentials 诊断](https://essentialdiagnostics.codeplex.com/)项目（也可[通过 NuGet](https://www.nuget.org/packages/Essential.Diagnostics/)获得）。

它定义了广泛的侦听器（允许自定义格式），输出到控制台、滚动文本和 XML 文件、事件日志、电子邮件等，还附带配置示例。

# php - mb_strtolower 和 utf8 字符串

> ID：13288785
> 
> 赞同：35
> 
> 时间：2012-11-08T12:06:34.503
> 
> 标签：php, arrays

如您所知，我们需要在处理 utf-8 数据时使用`mb_strtolower()`，而不是：`strtolower()`

```
$str = 'برنامه';
echo strtolower($str);
----------------------
output: ����� 
```

这一切都变成了未定义的字符，现在我使用`mb_strtolower()`

```
$str = 'برنامه';
echo mb_strtolower($str);
----------------------
output: ����� 
```

仍然是相同的结果，现在：

```
$str = 'برنامه';
echo mb_strtolower($str,  mb_detect_encoding($str));
----------------------
output: برنامه 
```

现在它是固定的，所以使用方法`mb_strtolower`是也有`mb_detect_encoding`.

现在我的问题是我想做同样的事情`array_map`：

```
$results_array = array_map('mb_strtolower', $results_array); 
```

我应该如何使用`mb_detect_encoding`上面的行？

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-11-08T12:09:39.487

解决方案是告诉`mb_strtolower`您的字符串编码是什么：

```
echo mb_strtolower($str, 'UTF-8'); 
```

如果您不想每次都提供此参数，请为所有`mb_`功能设置一次：

```
mb_internal_encoding('UTF-8'); 
```

然后您可以调用任何`mb_`函数，它会将您的字符串处理为 UTF-8：

```
echo mb_strtolower($str); // works without second parameter now 
```

`mb_detect_encoding`碰巧返回`'UTF-8'`是因为它检测到了它，但它通常是不可靠的，因为从概念上讲，可靠地检测任意编码的字符串是不可能的。*知道*你的字符串是用什么编码的，并明确地传递这些信息。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-08T12:09:04.273

简单地说，定义你自己的函数，然后`mb_strtolower`用`mb_detect_encoding`.

```
$results_array = array_map(function($var) {
      return mb_strtolower($var, mb_detect_encoding($var));
}, $results_array); 
```

# java - 获取java进程的命令行

> ID：13288787
> 
> 赞同：4
> 
> 时间：2012-11-08T12:06:39.757
> 
> 标签：java, command-line, process-explorer

众所周知，所有 java 进程在任务管理器中都显示为 javaw.exe。我想获取所有此类 java 进程的命令行。一个名为[ProcessExplorer](http://technet.microsoft.com/en-us/sysinternals/bb896653.aspx)的工具可以做同样的事情，但它会在 GUI 中显示所有内容，我正在寻找同样的编程解决方案。

这是[ProcessExplorer](http://technet.microsoft.com/en-us/sysinternals/bb896653.aspx)工具的快照。

![在此处输入图像描述](../Images/30c4ae1f9a30e2d2fd12fba104f76cca.png)

有任何想法吗？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T12:30:08.743

您可以使用[WMIC获得它](http://technet.microsoft.com/en-us/library/bb742610.aspx)

```
C:\> wmic process where(name="javaw.exe") get commandline 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T12:31:36.907

使用命令`jps`查找java进程

[http://docs.oracle.com/javase/1.5.0/docs/tooldocs/share/jps.html](http://docs.oracle.com/javase/1.5.0/docs/tooldocs/share/jps.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T12:29:19.663

如果命令行解决方案有帮助**并且**您有可用的 Windows Powershell，则可以使用类似

```
PS> $c = Get-WmiObject Win32_Process -Filter "name='javaw.exe'" | select-Object CommandLine
PS> $x.CommandLine
"C:\Program Files (x86)\Java\jre7\bin\java.exe" "-Djava.class.path=C:\\PROGRA~2\\Java\\jre7\\classes" ... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-15T07:19:56.797

在 Windows 中使用**命令提示符，您可以运行以下命令**

```
wmic process where(name="javaw.exe") get commandline 
```

带有命令提示符的示例输出

```
CommandLine

"C:\Users\Public\agent\jre\bin\javaw.exe" -cp .\agent-jar-with-dependencies.jar com.agent.Runner 
```

使用**powershell 提示符**，您可以运行以下命令

```
Get-WmiObject -Class Win32_Process -Filter "Name='javaw.exe'" | select-Object CommandLine 
```

使用 Powershell 命令的示例输出

```
CommandLine
-----------
"C:\Users\Public\agent\jre\bin\javaw.exe" -cp .\agent-jar-with-dependencies.jar com.agent.Runner 
```

# cordova - 带有进度条的黑莓文件上传 webworks 扩展

> ID：13288790
> 
> 赞同：0
> 
> 时间：2012-11-08T12:06:49.443
> 
> 标签：cordova, blackberry, progress-bar, blackberry-webworks

在我的黑莓网络工程项目中，我必须实现文件上传功能。是否有任何 webworks 扩展为文件上传提供进度回调。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T12:15:40.407

您可以使用 HTML5 文件上传 api

你可以参考

[http://robertnyman.com/2010/04/22/using-the-file-api-for-reading-file-information-multiple-file-uploads-another-sister-specification-to-html5/](http://robertnyman.com/2010/04/22/using-the-file-api-for-reading-file-information-multiple-file-uploads-another-sister-specification-to-html5/)

# android - 如何在画布android上的位图中启用绘图

> ID：13288791
> 
> 赞同：0
> 
> 时间：2012-11-08T12:06:49.410
> 
> 标签：android, bitmap, android-canvas

这是我在项目中的要求，我正在画布上的 android 中开发应用程序。画布覆盖整个屏幕，我在画布上绘制位图取决于与画布的纵横比。如何限制位图之外的绘图,任何人都可以帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T20:42:35.597

您的 onTouch 应该看起来像这样，是吗？

```
public boolean onTouch(View v, MotionEvent event) {

    x = (int) event.getRawX();
    y = (int) event.getRawY();
    /* other code */
} 
```

好吧，您可以做的是限制 onTouch 方法在 X 和 Y 不在位图上时执行任何操作。

如果 onTouch 已经“真正”消费了一个事件，onTouch 也会返回一个布尔值。在这种情况下，您希望在 X、Y 值在位图上时返回 true，但在 X、Y 值不在位图上时返回 false。

此外，如果您希望事件表现得就像他们离开位图时抬起手指一样，您甚至可以再次调用 onTouch 传递如下事件：

```
this.onTouch(v, MotionEvent.ACTION_UP); 
```

我希望这有帮助！

# c# - 将已编写的控制台应用程序更改为“Windows 服务”类型的项目？

> ID：13288792
> 
> 赞同：0
> 
> 时间：2012-11-08T12:06:53.550
> 
> 标签：c#, .net, visual-studio-2008, .net-3.5

我有一个控制台应用程序，我需要将其更改为 Windows 服务。我该怎么做呢？在“属性”中，下拉菜单中只有“Windows 应用程序”、“控制台应用程序”和“类库”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T12:08:14.883

不幸的是，它们完全不同，以至于您需要创建一个新项目，您猜对了，“Windows 服务”类型。

您可能希望将所有常见的东西重构为一个新的 DLL，以便您可以从 Windows 服务和控制台应用程序中使用它（作为备份/测试）。

（重新）每次需要测试时安装 Windows 服务确实很麻烦，所以我建议保留控制台应用程序以进行测试。

# mysql - MySQL - JOIN 和 GROUP BY

> ID：13288794
> 
> 赞同：0
> 
> 时间：2012-11-08T12:06:55.307
> 
> 标签：mysql, join, group-by

我有一个问题，我正在尝试，但我无法让它工作。

我有下表：

**消息**

```
|-------------|----------------|
| senderID    | recipientID    |
|-------------|----------------|
| 4           | 3              |
| 3           | 4              |
| 3           | 423            |
| 18          | 4              |
| 391         | 4              |
| 4           | 19             |
| 3           | 4              |
| 48          | 213            |
| and so      | on ...         |
|-------------|----------------| 
```

现在，我想获取线程列表，这意味着： 与我一起写消息的所有人的列表。所以问题是，我必须在“senderID”或“recipientID”列中查看我的用户ID（在本例中为4）并且我“删除”重复条目（所以我没有例如，另一个用户的 id 为“3”的 2 个条目）。

我用 JOIN 和 GROUP BY 尝试了一些非常奇怪的事情，但没有让它起作用。

有人可以帮助我吗？

最好的问候，

萨格特克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T12:12:07.250

```
select distinct recipientid
from messages
where senderid = 4
union
select distinct senderid
from messages
where recipientid = 4 
```

在第一个子句中，使用*distinct*意味着每个收件人只会出现一次；第二个子句也是如此，使用**union**意味着只有两个子句不同的值才会出现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T12:32:52.497

谢谢！

这个有用，但你的看起来更漂亮：

```
SELECT IF (senderID = 4, recipientID, senderID) AS userID
FROM `messages`
WHERE senderID = 4 OR recipientID = 4
GROUP BY userID 
```

# c# - 如何在 windows8 商店应用程序中使用 XmlTextWriter？

> ID：13288795
> 
> 赞同：1
> 
> 时间：2012-11-08T12:06:58.377
> 
> 标签：c#, windows-8

我正在 Visual Studio 2012 for Windows 8 中创建一个 Windows 商店应用程序。我需要使用`XmlTextWriter`来编写我的输出。我包括了命名空间

```
using System.Xml; 
```

但是仍然找不到该类。谁能告诉我如何`XmlTextWriter`在 Windows 8 Metro 应用程序中使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T12:23:01.730

> 我正在 Windows 8 中的 Visual Studio 2012 中创建一个 Windows 商店应用程序。我需要使用 XmlTextWriter 来编写输出。

您不能在 Windows 应用商店应用程序中使用 XmlTextWriter。您必须改用[XmlWriter](http://msdn.microsoft.com/en-us/library/system.xml.xmlwriter.aspx)类。将来，如果一个类没有将自己列为支持 Windows 应用商店应用程序的 .NET，那么它就不能在面向 Windows 应用商店的应用程序中使用。

由于 XmlWriter 是一个抽象类，这基本上意味着您必须重新创建`XmlTextWriter`该类。

# excel - 从excel复制并粘贴到在线表格中

> ID：13288801
> 
> 赞同：3
> 
> 时间：2012-11-08T12:07:12.063
> 
> 标签：excel, web, copy, paste

首先我要为我不是最擅长电脑的事实道歉，

我有一个很大的 Excel 表，我必须将每行 10 列复制并粘贴到在线表格中。

是否可以为此创建一个宏，如果可以，我该怎么做。

另外请记住，我在工作，所以我无法使用插件，不幸的是我不得不使用 Internet Explorer。

你的帮助会很受欢迎，

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-22T20:24:55.237

是的，有可能。您可以使用 IE 使用 vba 自动执行此操作。

```
Sub xtremeExcel()
  Dim HTMLDoc As HTMLDocument
  Dim oBrowser As InternetExplorer
  sURL = "*******Paste URL Here************"
  Set oBrowser = New InternetExplorer
  oBrowser.Silent = True
  oBrowser.navigate sURL
  oBrowser.Visible = True
  Do
  Loop Until oBrowser.readyState = READYSTATE_COMPLETE
  Set HTMLDoc = oBrowser.document
 'Use firebug to identify the textbox or object you need. and you can set its value like 
 'HTMLDoc.GetElementByID("abcd").value="xyz"

End Sub 
```

# sql - SQL Server：动态更新多行

> ID：13288803
> 
> 赞同：4
> 
> 时间：2012-11-08T12:07:29.770
> 
> 标签：sql, sql-server, sql-server-2005, stored-procedures, sql-update

我想更新数据库中的多行，值可能不同。想象一下这张桌子：

```
Username   FirstName   LastName 
-------------------------------
user1      John        Doe 
user2      Jane        Doe
user3      bill        gates 
```

如果我想更新表格，它看起来像这样：

```
Username   FirstName   LastName 
-------------------------------
user1      John        Deer 
user2      Jane        Farmer
user3      Gill        Bates 
```

是否最好`UPDATE`为每个用户使用一个语句？或者是否可以通过一个查询来做到这一点？

也可以将它放在存储过程中并提供一组值吗？

第二个问题是最好在进行更新之前检查值是否已更改？或者即使值相同也只是更新每个人？

如果相关，我目前正在为应用程序使用 SQL Server 2005 和 C#。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T12:10:43.460

你可以试试这个

```
declare @TempTable1 table (UserName nvarchar(128) primary key, FirstName nvarchar(128), LastName(128))

insert into @TempTable1
select 'user1', 'John', 'Deer' union all
select 'user2', 'Jane', 'Farmer' union all
select 'user3', 'Gill', 'Bate'

update table1 set
    FirstName = t2.FirstName,
    LastName = t2.LastName
from table1 as t
    inner join @TempTable1 as t2 on t2.UserName = t.UserName 
```

或者，如果您只想更新已更改的字段

```
update table1 set
    FirstName = isnull(t2.FirstName, t.FirstName),
    LastName = isnull(t2.LastName, t.LastName)
from table1 as t
    inner join @TempTable1 as t2 on t2.UserName = t.UserName 
```

对于 C# 客户端应用程序，我认为通常的方法是创建过程

```
create procedure sp_Table1_Update
(
    @UserName nvarchar(128),
    @FirstName nvarchar(128),
    @LastName nvarchar(128)
)
as
begin
    update table1 set
        FirstName = @FirstName,
        LastName = @LastName
    where UserName = @UserName
end 
```

然后从您的应用程序中为每个用户调用它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T12:12:38.967

我会为各个用户创建单独的查询：

```
UPDATE Table1 SET FirstName = 'John', 'LastName = 'Doe' WHERE FirstName = 'John' 
    AND 'LastName = 'Deer' AND 'UserName = 'user1' 
```

等等

您拥有唯一的用户名，因此理论上不必更新未更改的值。但是，您始终可以将其构建为额外的安全预防措施。

# jquery-ui - 使用动态数据控制 jQuery UI Accordion 中的高度

> ID：13288808
> 
> 赞同：0
> 
> 时间：2012-11-08T12:07:43.830
> 
> 标签：jquery-ui, accordion, jquery-ui-accordion

我正在使用带有敲除功能的 jQuery 手风琴控件来根据某些客户端活动向控件动态添加/删除项目。我创建了一个像这样的淘汰赛绑定：

```
ko.bindingHandlers.accordion = {
  init: function (element, valueAccessor) {
    var options = valueAccessor() || {};
    setTimeout(function () {
      $(element).accordion(options);
    }, 0);

    //handle disposal (if KO removes by the template binding)
    ko.utils.domNodeDisposal.addDisposeCallback(element, function () {
      $(element).accordion("destroy");
    });
  },
  update: function (element, valueAccessor) {
    var options = valueAccessor() || {};
    $(element).accordion("destroy").accordion(options);
  }
} 
```

现在我的问题是手风琴的尺寸......它总是看起来非常压缩（垂直）。我尝试设置包含控件的 DIV 的高度，如下所示：

```
<div id="LearningPaths" data-bind="foreach: allLearningPaths, accordion: {}" style="height:500px; border:1px solid red;"> 
```

但是手风琴的面板没有改变……它们仍然不是很“高”。这是它的样子：[http ://sdrv.ms/STA9Y6](http://sdrv.ms/STA9Y6)

我认为当我使用 .accordion() 时可以传入一个设置，但是对于我的绑定处理程序，我不确定如何执行此操作，因为我已经传入了“选项”对象。

我想要的是让每个面板的内容区域扩展到手风琴控件中的整个可用侧......想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T15:23:00.660

首先，我认为您的问题与 SharePoint Web 部件有关。我创建了一个基于 SharePoint 中的摘要链接 Web 部件的手风琴解决方案，可以在此处找到：[http](http://www.n8d.at/blog/turn-summary-link-web-part-into-an-accordion/) ://www.n8d.at/blog/turn-summary-link-web-part-into-an-accordion/ 我编写了自己的手风琴来完成此操作，这也确保如果您想编辑页面，手风琴脚本将不会被加载。

另一方面，我认为您的问题与 css 而不是 jquery 更相关。您在 CSS 中使用浮动样式吗？然后，您需要确保使用所谓的 clear-fix。这可以通过定义以下样式来完成：

.panel:after{ clear: both; }

# asp.net-mvc - 不同角色的不同默认路由

> ID：13288810
> 
> 赞同：4
> 
> 时间：2012-11-08T12:07:56.690
> 
> 标签：asp.net-mvc

是否可以为不同的用户角色创建不同的默认路由？

例如

```
public static void RegisterRoutes(RouteCollection routes)
        {
            routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

            routes.MapRoute(
                "Default", // Route name
                "{controller}/{action}/{id}", // URL with parameters
                new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
            );

            routes.MapRoute(
                "Admin", // Route name
                "{controller}/{action}/{id}", // URL with parameters
                new { controller = "totalrewardstatement", action = "Details", id = UrlParameter.Optional } // Parameter defaults
            );

        } 
```

上面有普通用户的默认路由，但如果管理员用户登录，则使用管理员路由？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-10-11T21:25:31.253

在 mvc 5 上使用自定义***RouteConstraint***为我解决了问题。

```
 public class RoleConstraint : IRouteConstraint
    {
        public bool Match
            (
                HttpContextBase httpContext,
                Route route,
                string parameterName,
                RouteValueDictionary values,
                RouteDirection routeDirection
            )
        {
            return httpContext.User.IsInRole(parameterName) ;
        }
    } 
```

路由配置.cs

```
 routes.MapRoute(
        name: "Reader_Home",
        url: "",
        defaults: new { controller = "Reader", action = "Index", id = UrlParameter.Optional },
        constraints: new { reader_role = new RoleConstraint() }
    );

    routes.MapRoute(
        name: "Author_Home",
        url: "",
        defaults: new { controller = "Publication", action = "Index", id = UrlParameter.Optional },
        constraints: new { author_role = new RoleConstraint() }
    ); 
```

我使用 parameterName（author_role 和 reader_role）作为角色名称来检查是否简化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-03T13:52:36.613

MVC 不支持基于角色的路由。您所做的是使用默认控制器检查角色并重定向到该控制器

```
public ActionResult Index()
    {

        if (User.IsInRole("Supervisor"))
        {
            return RedirectToAction("Index", "InvitationS");
        }
        return View();
    } 
```

[http://forums.asp.net/t/1994888.aspx?role+based+routing+asp+net+mvc](http://forums.asp.net/t/1994888.aspx?role%20based%20routing%20asp%20net%20mvc)

# nhibernate - 一对多关系未保存

> ID：13288811
> 
> 赞同：0
> 
> 时间：2012-11-08T12:08:03.323
> 
> 标签：nhibernate

我在 ReportRow （父）和 Mark （子）之间建立了这种关系

```
<class name="ReportRow">
    <bag name="Marks" cascade="save-update" inverse="true">
      <key column="ReportRowId"/>
      <one-to-many class="Mark"/>
    </bag>
</class>

// C# code
public virtual IList<Mark> Marks { get; set; } 
```

但它没有被保存（在 Mark 表中，ReportRowId 始终为空）。

我知道由于 NHibernate 的“怪癖”，这些关系总是必须是双向的，所以对于我的 Mark 类，我有：

```
<many-to-one name="ReportRow" class="ReportRow" column="ReportRowId" />

// C#
public virtual ReportRow ReportRow { get; set; } 
```

我什至在我的项目的其他地方也有这种关系的其他例子，但是这个不起作用，除了......

... Mark 和 ReportRow 都有子类（例如 ModuleMark 和 ModuleReportRow），我使用joined-subclass 策略来实现继承。

这和它有关系吗？对于关系的两端，映射是在父类映射中定义的，而不是嵌套在`<joined-subclass>`映射中。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T14:08:54.160

您如何将标记添加到集合中？因为集合是关系的反面，所以在添加到集合时需要在子对象上设置对父对象的引用。一种常见的做法是使用父对象中的方法来维护关系，例如：

```
 public void AddMark(Mark mark)
   {
      mark.ReportRow = this;
      Marks.Add(mark); // better yet map the collection as a private field
   } 
```

我认为“逆”是“在这段关系中谁穿裤子”。

# ruby-on-rails - 这是否每次都击中数据库？

> ID：13288812
> 
> 赞同：2
> 
> 时间：2012-11-08T12:08:09.237
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

如果我有：

```
config/initializers/foobar.rb 
```

其中有：

```
$foos = User.where(:foo => true).pluck(:id) 
```

在我的应用程序中，当我打电话时`$foo`，它是否每次都击中数据库？

还是`$foo`只在服务器启动时点击数据库？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T12:18:03.770

您正在存储一个范围（即一组标准）。但是，该范围将缓存它已加载的内容，因此（例如）`$foos.each {|user| ...}`只会在首次使用时（而不是在分配时）执行一次查询。

但是，某些操作将始终触发查询，例如`$foos.count`始终执行 a `select count(*)...`，而其他操作将取决于范围是否已加载。

最后，对该范围的进一步改进也会影响数据库，例如

```
$foos.order('blah').first 
```

每次使用时都会触发一个新查询。应该很容易看出这是否正在发生，尽管在 irb 中进行测试时要小心：irb 对导致加载范围的表达式结果调用检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T12:12:30.197

`$foos`只是一个变量，因此它只会在分配时才访问数据库。

# php - PHP：表单中缺少值

> ID：13288821
> 
> 赞同：0
> 
> 时间：2012-11-08T12:08:41.610
> 
> 标签：php, sql, phpmyadmin

我正在尝试导入这些 sql 语句。

我得到错误

> 表单中缺少值！

```
CREATE DATABASE IF NOT EXISTS `login`;

CREATE TABLE IF NOT EXISTS `login`.`users` (
  `user_id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT 'auto incrementing user_id of each user, unique index',
  `user_name` varchar(64) COLLATE utf8_unicode_ci NOT NULL COMMENT 'user''s name',
  `user_password_hash` text COLLATE utf8_unicode_ci NOT NULL COMMENT 'user''s password in salted and hashed format',
  `user_email` text COLLATE utf8_unicode_ci COMMENT 'user''s email',
  PRIMARY KEY (`user_id`),
  UNIQUE KEY `user_name` (`user_name`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='user data' AUTO_INCREMENT=1 ; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-24T00:20:41.753

这有时也发生在我身上。解决方法对我来说非常简单，只需重新加载整个页面。如果它不起作用，请删除缓存和 cookie，然后重新启动浏览器。它可能只是 PHPMyAdmin 的一个错误。

# maven - Maven/Tycho 使用了错误的 bundle-version

> ID：13288822
> 
> 赞同：4
> 
> 时间：2012-11-08T12:08:45.553
> 
> 标签：maven, build, eclipse-rcp, tycho

我正在尝试使用 tycho 构建我的 eclipse 插件。

我的包*com.mycompany.math*需要*org.apache.commons.math-1.2.0*，它安装在我的 p2-repository 中。依赖项在*org.mycompany.math*的 MANIFEST.MF 中定义：

```
Require-Bundle: org.apache.commons.math;bundle-version="1.2.0", 
```

在我的构建过程中，我收到了 org.apache.commons.math-classes 无法解决的错误消息。在构建开始之前，maven/tycho 下载了 2.1.0 版本。所以，我的问题是，当我在 MANIFEST.MF 中定义我使用 1.2.0 时，为什么要下载 maven/tycho 的 2.1.0。

您可以在我的父 pom.xml 中看到我定义了三个 p2 存储库。最后一个，包含我需要的 1.2.0 版本。

### 我的父母 pom.xml：

```
<project...>
<modelVersion>4.0.0</modelVersion>
<groupId>com.mycompany</groupId>
<artifactId>com.mycompany.build</artifactId>
<version>3.1.0-SNAPSHOT</version>
<packaging>pom</packaging>
<name>Build</name>
<description>Parent POM for full builds</description>

<modules>
    <!-- my modules -->
</modules>

<properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    <tycho-version>0.16.0</tycho-version>
</properties>

<repositories>
    <!-- configure p2 repository to resolve against -->
    <repository>
        <id>juno</id>
        <layout>p2</layout>
        <url>http://download.eclipse.org/releases/juno/</url>
    </repository>
    <repository>
        <id>orbit</id>
        <layout>p2</layout>
<url>http://download.eclipse.org/tools/orbit/downloads/drops/S20121021123453/repository/</url>
    </repository>
    <repository> <-- CONTAINS ORG.APACHE.COMMONS.MATH-1.2.0 !
        <id>comp</id>
        <layout>p2</layout>
        <url>http:our-adress.com/p2/</url>
    </repository>
</repositories>

<build>
    <plugins>
        <plugin>
            <!-- enable tycho build extension -->
            <groupId>org.eclipse.tycho</groupId>
            <artifactId>tycho-maven-plugin</artifactId>
            <version>${tycho-version}</version>
            <extensions>true</extensions>
        </plugin>

        <plugin>
            <groupId>org.eclipse.tycho</groupId>
            <artifactId>target-platform-configuration</artifactId>
            <version>${tycho-version}</version>
            <configuration>
                <pomDependencies>consider</pomDependencies>
                <environments>
                    <environment>
                        <os>linux</os>
                        <ws>gtk</ws>
                        <arch>x86</arch>
                    </environment>
                    <environment>
                        <os>win32</os>
                        <ws>win32</ws>
                        <arch>x86</arch>
                    </environment>
                </environments>
            </configuration>
        </plugin>
    </plugins>
</build>

<dependencyManagement>
    <dependencies>
        <dependency>
            <groupId>org.apache.commons</groupId>
            <artifactId>commons-math</artifactId>
            <version>1.2</version>
        </dependency>
    </dependencies>
</dependencyManagement> 
```

### 还有我的*com.company.math* pom.xml

```
<modelVersion>4.0.0</modelVersion>
<groupId>com.mycompany</groupId>
<artifactId>com.mycompany.math</artifactId>
<version>1.0.0-SNAPSHOT</version>
<name>Math</name>
<packaging>eclipse-plugin</packaging>

<parent>
    <groupId>com.mycompany</groupId>
    <artifactId>com.mycompany.build</artifactId>
    <version>3.1.0-SNAPSHOT</version>
    <relativePath>../com.mycompany.build</relativePath>
</parent>

<dependencies>
    <dependency>
        <groupId>commons-math</groupId>
        <artifactId>commons-math</artifactId>
        <version>1.2</version>
    </dependency>
</dependencies> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-08T14:21:57.680

问题是您的`Require-Bundle`陈述过于笼统：`Require-Bundle: org.apache.commons.math;bundle-version="1.2.0"`您实际上指定需要版本 1.2.0**或任何更高版本**中的数学包。

您应该指定只需要 1.2.0 或兼容版本。这可以通过`Require-Bundle: org.apache.commons.math;bundle-version="[1.2.0,2.0.0)"`. 此语句可防止您的捆绑包在运行时与（显然不兼容的）2.1 版数学捆绑包连接（这也很重要！），并且它可能还会解决您的构建问题。

[如果目标平台](http://wiki.eclipse.org/Tycho/Target_Platform#Effective_content_of_the_target_platform)中存在这样的版本（即，在您的情况下，任何已配置的 p2 存储库或 POM 依赖项中），Tycho 仍可能会针对构建的更高版本的数学包进行解析。如果是这种情况，但您想强制在构建中使用 1.2 版本，则需要控制目标平台的内容。（Maven`<dependencyManagement>`是不够的，因为它对您配置的 p2 存储库没有影响。）您可以通过在 Tycho 的目标平台配置中指定[过滤器来做到这一点：](http://wiki.eclipse.org/Tycho/Target_Platform#Filtering)

```
<plugin>
   <groupId>org.eclipse.tycho</groupId>
   <artifactId>target-platform-configuration</artifactId>
   <version>${tycho-version}</version>
   <configuration>
      <filters>
         <filter>
            <type>eclipse-plugin</type>
            <id>org.apache.commons.math</id>
            <restrictTo>
               <version>1.2.0</version>
            </restrictTo>
         </filter>
      </filters>
   </configuration>
</plugin> 
```

# java - 实用程序类的静态与非静态方法的性能

> ID：13288823
> 
> 赞同：18
> 
> 时间：2012-11-08T12:08:46.863
> 
> 标签：java, performance, static

我有一个实用程序类，它具有没有实例变量的非静态方法。所以我正在考虑将所有方法转换为`static`方法。我怀疑会有任何内存或性能影响。但我只是想确认一下。

将这种方法更改为`static`对程序有任何性能影响吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-08T13:44:22.990

最后一件事要补充人们在这里所说的话。

`static`由于您已保证编译时绑定，因此使用方法的开销略小。静态方法调用将创建字节码指令`invokestatic`。]

在典型的场景中，实例方法是在运行时绑定的，并且会创建`invokevirtual`比`invokestatic`.

但是，这仅在可能进行数百万次迭代的情况下才有意义，我会警告不要这样做驱动你的类设计。从设计的角度做有意义的事情。根据您的描述，`static`方法可能是要走的路。事实上，这是创建实用程序类的相对标准做法：

```
public class MyUtilities {
   private MyUtilities() { } // don't let anyone construct it.
   public static String foo(String s) { ... }
} 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-11-08T12:12:27.890

编辑：解决性能方面的问题：不必毫无意义地创建实例会更便宜，但差异很可能是*完全不相关*的。随着时间的推移，专注于清晰的设计可能变得更加重要。

实用方法通常是静态的，如果一个类中的所有方法都是静态的，那么创建该类`final`并包含一个私有构造函数以*防止*实例化可能是值得的。从根本上说，对于不代表任何真实“事物”的实用程序类，构造一个实例没有逻辑意义——所以要避免它。

另一方面，这确实降低了灵活性：如果这些实用方法中的任何一个包含您可能希望以多态方式改变的功能（例如，出于测试目的），那么请考虑将它们保留为实例方法 - 并尝试提取一些有意义的类名来表示涉及的“事物”。（例如，`FooConverter`实例化 a 有意义 - a`FooUtil`没有。）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-08T12:11:53.877

要使方法有资格转换为 ，必须满足两个要求`static`：

1.  没有访问实例变量（在您的情况下会遇到这种情况）；
2.  永远不需要被覆盖（为此你可能需要仔细考虑）。

但是，当满足这些要求时，实际上**建议**将方法设为静态，因为它缩小了运行方法的上下文。

最后，请注意这里**没有要讨论的性能问题**，任何理论上的差异实际上都支持静态方法，因为它们不涉及动态方法解析。但是，实例方法调用在任何相关的 JVM 实现中都非常迅速。

就记忆而言，故事是相同的：理论上的差异有利于静态方法，但如果与单例实用程序类进行比较，则没有实际差异。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-08T12:10:49.217

如果实用程序类不是子类，则将不访问实例变量的方法转换为`static`是一个好主意。您应该浏览代码并将调用转换为静态语法，即

```
int res = utilityInstance.someMethod(arg1, arg2); 
```

应转换为

```
int res = UtilityClass.someMethod(arg1, arg2); 
```

为了清楚起见。

不会对性能产生明显的影响：虽然理论上静态调用的成本略低，但在大多数情况下，差异太小以至于不重要。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-08T12:10:39.153

没有状态的实用程序类（`java.lang.Math`例如）通常具有公共静态方法。这样您就不需要创建类的实例来使用它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-08T12:12:46.617

当您要经常使用特定功能时，静态方法是个好主意。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2012-11-08T12:11:09.653

不同之处在于您需要一个实例才能使用它们，因此用户必须创建一个实例，该实例将是

# php - 表单未使用 Jquery 通过外部按钮提交

> ID：13288828
> 
> 赞同：0
> 
> 时间：2012-11-08T12:09:13.180
> 
> 标签：php, jquery

我有一个表格

```
<div id='formdiv'>
<form action='purchase.php' method="POST" id="purchaseform"> 
......

<input type="submit" value="Add Purchase" />
</form></div> 
```

用户提交表单后..他首先确认输入：

```
$('#purchaseform').submit(function(){
    $('#formdiv').hide();
    $('#confirmdiv').show();

return false;   
}); 
```

确认 div 是：

```
<div id='confirmdiv'>
data to be confirmed....
<input type="button" value="Confirm" id = "confirmform"/> 
<input type="button" value="Cancel" id = "cancelform"/>

</div> 
```

用户单击确认按钮后，我正在尝试提交表单

```
$('#confirmform').click(function(){
        $('#purchaseform').submit();
        $('#formdiv').show();
        $('#confirmdiv').hide();
    }); 
```

但是表格没有提交......任何人都知道我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T12:23:31.863

这是因为当您调用时，`$('#purchaseform').submit();`它会再次读取您的第一条语句，即

```
$('#purchaseform').submit(function(){
    $('#formdiv').hide();
    $('#confirmdiv').show();
    return false;   
}); 
```

尝试使用隐藏输入来指示数据是否被确认。在您的表单中放置一个隐藏的文本字段

```
<div id='formdiv'>
<form action='purchase.php' method="POST" id="purchaseform">   

<input type="submit" value="Add Purchase" />
<input type="hidden" name="isconfirm" id="isconfirm" value="0" />
</form></div> 
```

然后在你的另一个语句中在你调用`return false`和其他函数之前放置一个条件

```
$('#purchaseform').submit(function(){
  var confirm = $("#isconfirm").val();
  if(confirm == 0) { 
      $('#formdiv').hide();
      $('#confirmdiv').show();

     return false; } 
```

});

然后也改变这个

```
$('#confirmform').click(function(){
    $("#isconfirm").val(1); //change the value to 1
    $('#purchaseform').submit();
    $('#formdiv').show();
    $('#confirmdiv').hide();

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T12:31:05.557

你想要一个确认对话框，首先我认为最好使用 jquery ui 对话框插件[http://jqueryui.com/dialog/#modal-confirmation](http://jqueryui.com/dialog/#modal-confirmation)

这是要使用的代码：

1-在您的确认对话框中添加“显示：无”

```
 <div id='confirmdiv' style="display:none">
     data to be confirmed....
    </div> 
```

*   删除确认事件

    ```
    $('#confirmform').click .... 
    ```

2-初始化你的对话框

```
 $( "#confirmdiv" ).dialog({
        resizable: false,
        height:140,
        modal: true,
        buttons: {
            "Confirm": function() {
               $('#purchaseform').submit();
            },
            "Cancel": function() {
                $( this ).dialog( "close" );
            }
        }
    }); 
```

3- 测试你的代码

4-这就是所有人

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T12:20:41.577

它不提交是很合乎逻辑的。毕竟，每当它尝试提交时，它都会转而转到您的提交事件处理程序，该处理程序总是返回 false。您必须确保如果提交来自您的脚本而不是来自表单中的按钮，它确实提交。一种方法是这样的：

```
var confirmed = false;
$('#purchaseform').submit(function(){
    if (!confirmed)
    {
        $('#formdiv').hide();
        $('#confirmdiv').show();

        return false;
    }
    else
    {
        confirmed = false;
        return true;
    }
});

$('#confirmform').click(function(){
    confirmed = true;
    $('#purchaseform').submit();
    $('#formdiv').show();
    $('#confirmdiv').hide();
}); 
```

这可以很容易地编辑以满足您的需要。另一种方法是将原始事件绑定到提交按钮而不是实际的提交事件，但如果你这样做，如果你在表单中有一个文本字段并且用户按下，你以后可能会遇到麻烦在它被选中时输入。然后，这将直接提交而无需确认，而在上述解决方案中，它会巧妙地要求确认。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T12:21:04.350

您正在覆盖提交表单时发生的事情

```
$('#purchaseform').submit(function(){
    $('#formdiv').hide();
    $('#confirmdiv').show();

    return false;   
}); 
```

相反，你如何使用

```
$('#purchaseform').find(":submit").click(function(e){
    $('#formdiv').hide();
    $('#confirmdiv').show();

    return false;
} 
```

或者，当然，您可以在提交按钮上设置一个 ID 并使用它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-08T12:21:39.993

那是因为您的 $('#confirmform').submit() 函数再次调用了第一个提交函数。

# django - Redmine 作为另一个站点的身份验证后端

> ID：13288832
> 
> 赞同：3
> 
> 时间：2012-11-08T12:09:30.123
> 
> 标签：django, redmine

我们办公室的每个人都有一个 redmine 帐户，所以我想知道是否可以使用 Redmine 作为身份验证提供程序。

我们使用 django 创建内部网站，而不必为每个人、每个人设置用户名和密码，如果我可以单击“使用 redmine 登录”不是更好。就像在 stackoverflow 上一样，我可以单击与 OpenID 一起使用的“使用 google 登录”。

我可以使用redmine的任何插件或工具来实现这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-01T10:44:08.523

考虑 Redmine OAuth 提供程序插件。

[https://github.com/suer/redmine_oauth_provider](https://github.com/suer/redmine_oauth_provider)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T21:42:53.757

您可以使用[Redmine Rest API authentication](http://www.redmine.org/projects/redmine/wiki/Rest_api#Authentication)。它允许您使用用户/密码进行身份验证。

# c++ - GLSL 镜面光照

> ID：13288838
> 
> 赞同：12
> 
> 时间：2012-11-08T12:09:54.523
> 
> 标签：c++, opengl, glsl

当我使用我的着色器时，我得到以下结果： ![在此处输入图像描述](../Images/2e258dc00c85058f96d201eb363121b0.png)

![在此处输入图像描述](../Images/a13872ba2955f26eca7769a51fa0aaa2.png)

一个问题是镜面光有点变形，你可以看到球体三角形，另一个问题是，我可以看到我不应该看到的镜面光（第二张图片）。一个球光在顶点着色器中完成，另一个在片段中完成。

这是我的顶点光照着色器的样子： 顶点：

```
// Material data.
uniform vec3 uAmbient;
uniform vec3 uDiffuse;
uniform vec3 uSpecular;
uniform float uSpecIntensity;
uniform float uTransparency;

uniform mat4 uWVP;
uniform mat3 uN;
uniform vec3 uSunPos;
uniform vec3 uEyePos;
attribute vec4 attrPos;
attribute vec3 attrNorm;
varying vec4 varColor;

void main(void)
{
    vec3 N = uN * attrNorm;
    vec3 L = normalize(uSunPos);
    vec3 H = normalize(L + uEyePos);
    float df = max(0.0, dot(N, L));
    float sf = max(0.0, dot(N, H));
    sf = pow(sf, uSpecIntensity);

    vec3 col = uAmbient + uDiffuse * df + uSpecular * sf;
    varColor = vec4(col, uTransparency);
    gl_Position = uWVP * attrPos;
} 
```

分段：

```
varying vec4 varColor;

void main(void)
{

    //vec4 col = texture2D(texture_0, varTexCoords);
    //col.r += uLightDir.x;
    //col.rgb = vec3(pow(gl_FragCoord.z, 64));
    gl_FragColor = varColor;

} 
```

我从代码中提供的数据有可能是错误的。uN 是世界矩阵（不是倒置也不是转置，即使这样做似乎没有任何不同）。UWVP - 世界视图投影矩阵。

任何关于问题可能出在哪里的想法都将不胜感激。

[编辑] 这是我在片段中完成的光计算：顶点着色器文件：

```
uniform mat4 uWVP;
uniform mat3 uN;
attribute vec4 attrPos;
attribute vec3 attrNorm;
varying vec3 varEyeNormal;

void main(void)
{
    varEyeNormal = uN * attrNorm;
    gl_Position = uWVP * attrPos;
} 
```

片段着色器文件：

```
// Material data.
uniform vec3 uAmbient;
uniform vec3 uDiffuse;
uniform vec3 uSpecular;
uniform float uSpecIntensity;
uniform float uTransparency;

uniform vec3 uSunPos;
uniform vec3 uEyePos;
varying vec3 varEyeNormal;

void main(void)
{
    vec3 N = varEyeNormal;
    vec3 L = normalize(uSunPos);
    vec3 H = normalize(L + uEyePos);

    float df = max(0.0, dot(N, L));
    float sf = max(0.0, dot(N, H));
    sf = pow(sf, uSpecIntensity);

    vec3 col = uAmbient + uDiffuse * df + uSpecular * sf;

    gl_FragColor = vec4(col, uTransparency);
} 
```

[EDIT2] 正如 Joakim 指出的那样，我没有在片段着色器中规范化 varEyeNormal。修复后，片段着色器的结果要好得多。我还在 uEyePos 上使用了 normalize 功能，因此镜面反射不再出现暗面。感谢所有的帮助。

![在此处输入图像描述](../Images/27ecf460b1d7a6d6a5b66de8b0993fd5.png)

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-08T12:32:27.567

简短的回答：您需要`varEyeNormal`在片段着色器中进行标准化，而不是在顶点着色器中。

更长的答案：为了获得平滑的光照，您需要计算每个像素而不是每个顶点的法线。在顶点着色器中计算的变化在传递给片段着色器之前被线性插值，这在某些情况下作为快捷方式非常有效，但在其他情况下更糟糕。

您看到三角形边缘的原因是法线之间的插值导致顶点之间的所有像素中的法线短于 1.0。

要纠正这个问题，您需要在片段着色器中而不是在顶点着色器中对法线进行归一化。

Normal 矩阵应该是 Modelview 矩阵的逆转置的上 3x3，如果 Modelview 仅包含旋转和平移（无缩放），则相当于 Modelview 矩阵的上 3x3

有关法线矩阵的更多信息，请参阅：[http ://www.lighthouse3d.com/tutorials/glsl-tutorial/the-normal-matrix/](http://www.lighthouse3d.com/tutorials/glsl-tutorial/the-normal-matrix/)

（根据下面的评论编辑正确性。）

# objective-c - 创建自定义视图？

> ID：13288839
> 
> 赞同：-3
> 
> 时间：2012-11-08T12:09:59.233
> 
> 标签：objective-c, ios, uitableview, uiview

如何像这样创建自定义视图
[![](../Images/3b211f9db8f925576d429ac4cf16f15b.png)](https://www.queness.com/resources/images/project/toggle.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T12:15:24.397

看看[GCRetractableSectionController](https://github.com/gcamp/GCRetractableSectionController)。也许它可以处理您需要的行为，只需查看随附的示例项目即可。

# java - 非Web Spring Context中的ApplicationContextInitializer？

> ID：13288841
> 
> 赞同：7
> 
> 时间：2012-11-08T12:10:10.047
> 
> 标签：java, spring, applicationcontext

我创建了一个`ApplicationContextInitializer`实现来从客户源 (ZooKeeper) 加载属性并将它们添加到`ApplicationContext`的属性源列表中。

我能找到的所有文档都与 Spring web-apps 相关，但我想在一个独立的消息消费应用程序中使用它。

实例化我的实现、创建上下文然后“手动”将上下文传递给我的实现的正确方法吗？或者我是否缺少将我的初始化程序应用于我的上下文的框架的一些自动功能？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-05-07T07:30:26.557

我发现通过使用空白上下文进行初始化来实现 SpringMVC 的初始化上下文策略非常简单。在正常的应用程序上下文中，没有任何东西使用 ApplicationContextInitializer，因此您必须自己执行它。

没问题，尽管在一个普通的 J2SE 应用程序中，如果您拥有上下文加载器块的所有权，那么您将可以访问生命周期的每个阶段。

```
// Create context, but dont initialize with configuration by calling 
// the empty constructor. Instead, initialize it with the Context Initializer.
AnnotationConfigApplicationContext ctx = new AnnotationConfigApplicationContext();
MyAppContextInitializer initializer = new MyAppContextInitializer();
initializer.initialize( ctx );

// Now register with your standard context
ctx.register( com.my.classpath.StackOverflowConfiguration.class );
ctx.refresh()

// Get Beans as normal (e.g. Spring Batch)
JobLauncher launcher = context.getBean(JobLauncher.class); 
```

我希望这有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T09:17:37.980

如果我对问题的理解正确，您可以在 Spring 文档*第 4 节中找到解决方案。IoC 容器*

关于如何启动您的应用程序的示例在这里 - [4.2.2 实例化容器](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/beans.html#beans-factory-instantiation)

另请查看[5.7 应用程序上下文和资源路径](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/resources.html#resources-app-ctx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-10T15:37:54.483

不确定其他版本，但在 Spring 4 中：

```
AbstractApplicationContext ctx = new AnnotationConfigApplicationContext(yourConfig.class); 
```

# webpage - 在服务器上部署网站后，Windows 窗体用户控件未显示在网页的客户端 PC 上

> ID：13288844
> 
> 赞同：1
> 
> 时间：2012-11-08T12:10:23.693
> 
> 标签：webpage

我有一个包含按钮的 Windows 窗体用户控件，我使用以下方法将其添加到我的网站：

```
<object id="UserControl"  classid="http:TestControlLibrary.dll#TestControlLibrary.UserControl1" height="100" width="100"></object> 
```

当我使用 localhost 在开发环境中运行我的网站时，一切正常。

当我在服务器上发布我的网站并使用`http://<ipaddress:port>/page.aspx`服务器本身访问它时，它工作正常。

但是，当我从客户端 PC 访问我的网站时，它没有在网页中显示按钮。如何在客户端 PC 的网页中显示此按钮。

找到解决方案，我的站点应该包含在浏览器的受信任站点列表中。

# java - 为什么 UrlValidator 不适用于我的某些 Url？

> ID：13288847
> 
> 赞同：9
> 
> 时间：2012-11-08T12:10:32.713
> 
> 标签：java, url-validation

```
String[] schemes = {"http","https"};
UrlValidator urlValidator = new UrlValidator(schemes, UrlValidator.ALLOW_ALL_SCHEMES);
System.out.println(urlValidator.isValid(myUrl)); 
```

以下网址说，无效。任何人都知道这是为什么。localnet 是一个本地网络。但这适用于任何其他公共网络（似乎）。

```
http://aunt.localnet/songs/barnbeat.ogg 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T18:30:29.597

您正在使用的类已弃用。替换是

[org.apache.commons.validator.routines.UrlValidator](http://commons.apache.org/proper/commons-validator/apidocs/org/apache/commons/validator/routines/UrlValidator.html)

哪个更灵活。您可以将标志 ALLOW_LOCAL_URLS 传递给构造函数，这将允许大多数地址，如您正在使用的地址。在我们的例子中，我们在地址之前有身份验证数据，因此我们必须使用更加灵活的[UrlValidator(RegexValidator authorityValidator, long options)](http://commons.apache.org/proper/commons-validator/apidocs/org/apache/commons/validator/routines/UrlValidator.html#UrlValidator%28org.apache.commons.validator.routines.RegexValidator,%20long%29)构造函数。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-08T12:35:09.947

正如我所想的那样，它在顶级水平上失败了；

```
String topLevel = domainSegment[segmentCount - 1];
if (topLevel.length() < 2 || topLevel.length() > 4) {
  return false;
} 
```

你的最高级别是`localnet`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-17T19:20:24.533

这在 Apache Validator 的 1.4.1 版本中得到了修复：

[https://issues.apache.org/jira/browse/VALIDATOR-342](https://issues.apache.org/jira/browse/VALIDATOR-342) [https://issues.apache.org/jira/browse/VALIDATOR/fixforversion/12320156](https://issues.apache.org/jira/browse/VALIDATOR/fixforversion/12320156)

简单升级到最新版本的验证器应该可以很好地解决问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T12:23:54.287

检查第2行它应该是

```
new UrlValidator(schemes); 
```

如果您想允许 2 个斜线并禁止片段

```
new UrlValidator(schemes, ALLOW_2_SLASHES + NO_FRAGMENTS); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-08T12:24:53.937

这是[isValid(String)](http://commons.apache.org/validator/apidocs/src-html/org/apache/commons/validator/UrlValidator.html#line.240)方法的源代码：

您可以通过手动调用检查每个步骤的结果，以了解失败的地方。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-09-30T11:30:10.813

库方法在此 URL 上失败：

```
 "http://en.wikipedia.org/wiki/3,2,1..._Frankie_Go_Boom" 
```

这是完全合法的（[和现有的](http://en.wikipedia.org/wiki/3,2,1..._Frankie_Go_Boom)）URL。

我通过反复试验发现以下代码更准确：

```
public static boolean isValidURL(String url)
{
    URL u = null;
    try
    {
        u = new URL(url);
    }
    catch (MalformedURLException e)
    {
        return false;
    }

    try
    {
        u.toURI();
    }
    catch (URISyntaxException e)
    {  
        return false;  
    }  

    return true;  
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-10-23T17:39:58.853

您可以使用以下内容：

```
UrlValidator urlValidator = new UrlValidator(schemes, new RegexValidator("^((?!-)[A-Za-z0-9-]{1,63}(?<!-)\\.)+[A-Za-z]{2,6}$"), 0L); 
```

# ruby-on-rails - Rails faye 服务器无法启动

> ID：13288849
> 
> 赞同：4
> 
> 时间：2012-11-08T12:10:35.070
> 
> 标签：ruby-on-rails, ruby, faye

我有一个 Rails 应用程序，我正在尝试包含`faye`ruby​​ gem。
我已经安装`faye`了

```
gem install faye 
```

并在我的根 Rails 应用程序中添加了 faye.ru。文件夹：

```
require 'faye'
Faye::WebSocket.load_adapter('thin')
faye_server = Faye::RackAdapter.new(:mount => '/faye', :timeout => 45)
run faye_server 
```

当我想开始 faye 时：

```
rackup -s thin -E production config.ru 
```

我只得到：

```
`require': cannot load such file -- faye 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T13:00:46.253

您需要将其包含在您的`Gemfile`:

```
gem 'faye' 
```

然后运行`bundle install`，这使 gem 可用于您的应用程序。

还要考虑`gem 'faye', require: 'faye'`使加载的 gem 可用于您的整个应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T12:54:45.360

`require 'rubygems'`在您的顶部`faye.ru`（在 之前`require 'faye'`）可能会解决此问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-21T17:36:48.010

就我而言，只需`bundle exec`在命令之前添加即可。

`bundle exec rackup faye.ru -E production -s thin`

# php - CakePHP 视图中的 Javascript 导致控制器操作被调用两次

> ID：13288850
> 
> 赞同：1
> 
> 时间：2012-11-08T12:10:37.670
> 
> 标签：php, javascript, cakephp

我有一个带有动作和相关视图的 cakephp 控制器。控制器中的操作在调用时会将一些数据保存到数据库中（它会创建一条新记录）。我注意到由于某种原因创建了 2 条记录。两条记录之间的唯一区别是 date_created 字段相差几秒钟，所以我知道第二条（重复）记录是在第一条记录之后几秒钟创建的。我已经能够将问题缩小到标签内视图中包含的一些javascript。我在视图顶部包含一个 .js 文件，使用 -

```
echo $this->Html->script('https://link.to.externalSite.com/script.js', array(
  'inline' => true
)); 
```

当我将 'inline' => true 更改为 false 时，问题就消失了，只有 1 条记录按我的预期添加到数据库中。但是，出于我的目的，我需要设置 inline => true 的脚本。

当单击表单上的提交按钮时，会触发视图页面中的标记，如下所示 -

```
<script type="text/javascript" charset="utf-8">
    var myVar = new .......... ({trigger: 'submitBtn'});
</script> 
```

我想知道这是否是因为脚本是从外部 url 加载的？如果我将脚本包含在我的 webroot 中，我会避​​免这个问题吗？我在 stackoverflow 上遇到了关于 JS 脚本的类似问题导致控制器操作被调用两次的问题，他们谈到了深度链接的问题，但是我不明白该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T12:14:15.443

将 inline 设置为 true，当您查看浏览器内源代码时，脚本文件[https://link.to.externalSite.com/script.js](https://link.to.externalSite.com/script.js)包含多少次？也许它是由多个视图元素添加的？

# java - ArrayList 恒定时间和线性时间访问

> ID：13288854
> 
> 赞同：5
> 
> 时间：2012-11-08T12:10:51.103
> 
> 标签：java, data-structures

我一直在学习 Java SE 7 的技巧。我已经阅读了有关以下内容的声明[`ArrayList`](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html)：

*   *访问*是在**恒定时间内**执行的。
*   *插入*/*删除*以**线性时间**执行。

我想知道什么是*恒定*和*线性*时间访问？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-08T12:12:25.517

恒定时间意味着每个操作执行所需的时间有一个硬性限制。

线性时间意味着`ArrayList`is 越长（它包含的对象越多）操作所需的时间就越长。连接是线性的，即`time(op) <= CONST * #elements`

在复杂度分析中，我们将其称为[大 O 表示法](http://en.wikipedia.org/wiki/Big_O_notation)，线性时间为`O(n)`，常数时间为`O(1)`

* * *

其原因是：

*   访问是普通数组访问，它是在 RAM 机器中以恒定时间完成的（例如出 PC）。
*   插入/删除 - 如果它不在最后一个元素中，则需要移动以下所有元素：（插入需要向右移动，向左移动） - 因此您实际上需要线性数量的 OP 来执行插入/删除（除非它是最后一个元素）

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-08T12:13:21.913

含义是：

*   **常数**意味着时间总是相同的，与列表的长度无关。

    [*常数时间*在[Big-O 表示法](http://en.wikipedia.org/wiki/Big_O_notation)中也称为*O(1)* ]

*   **线性**意味着 List 增长得越多，时间就越长，但是以线性方式，例如，要对包含 20 个元素的列表执行线性操作，它将花费 10 个元素的列表所需时间的两倍.

    [*线性时间*在[Big-O 表示法](http://en.wikipedia.org/wiki/Big_O_notation)中也称为*O(n)* ]

    A precisation：在比较算法时通常提供**最坏情况下的性能**，因此这意味着所需的时间小于或等于线性。

在您的情况下， List 的实现基于数组（因此名称*ArrayList*），如下所示：

![Java ArrayList 解释](../Images/f5cef4d0bac0a84bcc78beafe019a2c9.png)

访问时间是恒定的，因为当程序知道列表的第一个元素在哪里以及每个单元格有多大时，它可以使用简单的数学直接获取第*n个元素，例如：*

```
element_n_cell = element_1_cell + (cell_size * n) 
```

插入和删除更耗时，原因有两个：

1.  当你在一个位置插入或删除一个元素时，后面的所有元素都需要移动。

2.  数组无法调整大小，因此当您实例化一个新的 ArrayList 时，Java 将创建一个具有预定义长度*s*的数组，并且只要适合，它将使用相同的数组。当您添加第*(s+1)*个元素时，程序需要创建一个更大的数组并复制新数组中的所有元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-19T10:19:36.167

****不明白恒定时间访问****

**java.util.ArrayList**实现了**java.util.RandomAccess**接口，这是一个标记接口，表示您可以直接访问此集合的任何元素。这也意味着访问任何元素都需要相同的时间（恒定时间）。

如果我们使用 java.util.LinkedList，访问最后一个元素要比访问第一个元素花费更多的时间。

# asp.net-mvc - 具有持久 HTTP 连接的 IDbConnection 生命周期管理

> ID：13288855
> 
> 赞同：8
> 
> 时间：2012-11-08T12:10:52.570
> 
> 标签：asp.net-mvc, structuremap, signalr, lifetime, idbconnection

`HttpContext`当我的 ASP.NET MVC 应用程序（如 SignalR 集线器）中存在持久 HTTP 连接时，我在管理使用 StructureMap 的开放数据库连接的生命周期时遇到问题。

我的 DI 容器 StructureMap 将开放`IDbConnection`注入到多个服务中。为确保这些数据库连接已关闭并正确处理，我呼吁`ObjectFactory.ReleaseAndDisposeAllHttpScopedObjects()`该`EndRequest`事件。

这对 MVC 控制器非常有用，直到需要数据库连接的服务被注入到 SignalR 集线器中，它为每个客户端保持持久的 HTTP 连接打开并最终使连接池饱和。

如果我将范围`IDbConnection`限定为单例，则每个应用程序只打开一个连接并且池不会饱和，但如果连接被锁定或超时，这是[一个坏主意](https://stackoverflow.com/a/1557614/198927)。

那么也许有一种方法可以为我的 SignalR 集线器自定义数据库连接的范围？我尝试在每个 Hub 方法中解析一个服务实例，但这仍然会在 HttpContext 范围内实例化一个数据库连接，并在调用客户端的集线器连接期间保持打开状态。

当周围有持久的 HTTP 连接时，我应该如何在 HTTP 范围的上下文中使用 StructureMap 管理数据库连接的生命周期？

# 示例代码

## 典型服务

```
public class MyService
{
    private IDbConnection _con;
    public MyService(IDbConnection con)
    {
        _con = con;
    }

    public IEnumerable<string> GetStuff()
    {
        return _con.Select<string>("SELECT someString FROM SomeTable").ToList();
    }
} 
```

## 典型的 SignalR 集线器

```
public class MyHub : Hub
{
    private MyService _service;
    public MyHub(MyService service)
    {
        _service = service; // Oh Noes! This will open a database connection
                            // for each Client because of HttpContext scope
    }

    public Task AddMessage()
    {
        var result = _service.GetStuff();
        // ...
    }
} 
```

## 结构图配置

```
For<IDbConnection>()
    .HybridHttpOrThreadLocalScoped()
    .Use(() => BaseController.GetOpenConnection(MyConnectionString)); 
```

## 全球.asax.cs

```
public class GlobalApplication : System.Web.HttpApplication
{
    public GlobalApplication()
    {
        EndRequest += delegate
        {
            ObjectFactory.ReleaseAndDisposeAllHttpScopedObjects();
        };
    }
    // ...
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T13:46:20.717

## 使用瞬态数据库连接和嵌套 StructureMap 容器的解决方案

首先，在 StructureMap 中配置一个命名的临时数据库连接实例：

```
For<IDbConnection>()
    .Transient() // scope
    .Add(x => BaseController.GetOpenConnection(connectionString, IsDebugging()))
    .Named("Transient"); 
```

确保在默认实例*之前*配置它，否则它将覆盖默认实例。

其次，将一个注入`IContainer`到您的 SignalR 集线器中，以便您可以构建一个嵌套的 StructureMap 容器：

```
public class JobHub : Hub
{
    private readonly IContainer _container;

    public JobHub(IContainer container)
    {
        _container = container;
    }

    public Task DoStuff(string input)
    {
        // ... 
```

在您的 SignalR 方法中实例化一个嵌套容器并解析您命名的瞬态数据库连接：

```
 using (var httpRequestScope = _container.GetNestedContainer())
        {
            var transientConnection =
                    httpRequestScope.GetInstance<IDbConnection>("Transient"); 
```

用于`.With<IDbConnection>(transientConnection)`确保嵌套容器实例化的服务和存储库使用此连接：

```
 var myService = httpRequestScope
                .With<IDbConnection>(transientConnection)
                .GetInstance<MyService>();

            var result = myService.DoStuff(input);

            return Clients.addResult(result);
        }
    }
} 
```

最后，作用域`using (...)`语句将确保您的嵌套容器自行清理，包括数据库连接。

这里的缺点是您为每个 SignalR 方法调用打开和关闭数据库连接，但由于连接是池化的，因此提前释放可能不是那么糟糕。您的里程数应取决于您的 SignalR 请求量。

您可能可以放弃嵌套容器并只请求`DependencyResolver.Current`命名的连接实例，但是您可能必须记住显式关闭每个连接以防止泄漏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T03:18:23.677

在 SignalR 1.0.0 Alpha 中，`Hub`实现`IDisposable`. SignalR`Hub`实例与 ' 不同的是短暂的`HttpContext`，因此如果你`IDbConnection`在`Hub`'`Dispose`方法中关闭你的，你不应该不必要地使你的连接池饱和。

# ruby-on-rails - 在 Rails 3 上出现日期 ruby 错误

> ID：13288871
> 
> 赞同：0
> 
> 时间：2012-11-08T12:11:31.257
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, date, mongoid

我的模型上有这个

```
Class User
 include Mongoid::Document
  scope :created_between, lambda { |start_time, end_time| where(:created_at => (start_date...end_time)) }

  class << self
    ## Class methods for calculating relative users

    def created_today
      today = Time.zone.now
      created_between(today.beginning_of_day, today.end_of_day)
    end

    def created_yesterday
      yesterday = Time.zone.now - 1.day
      created_between(yesterday.beginning_of_day, yesterday.end_of_day)
    end

    def created_last_week
      start_time = (Time.zone.now - 1.week).beginning_of_day
      end_time = Time.zone.now
      created_between(start_time, end_time)
    end

    def created_last_month
      start_time = (Time.zone.now - 1.month).beginning_of_day
      end_time = Time.zone.now
      created_between(start_time, end_time)
    end

    def created_last_year
      start_time = (Time.zone.now - 1.year).beginning_of_day
      end_time = Time.zone.now
      created_between(start_time, end_time)
    end
  end
 end 
```

在我的控制器中：

```
 def index
   @users_created_today = User.created_today.all
   @users_created_today = User.created_today.all
   @users_created_yesterday = User.created_yesterday.all
   @users_created_last_week = User.created_last_week.all
   @users_created_last_month = User.created_last_month.all
   @users_created_last_year = User.created_last_year.all
   .
   .
   .
 end 
```

我得到下一个错误：

```
undefined local variable or method `start_date' for User:Class 
```

非常感谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T12:22:41.827

好吧，这是一个错字

```
 scope :created_between, lambda { |start_time, end_time| where(:created_at => (start_date...end_time)) } 
```

你应该使用`start_time`而不是`start_date`

# c# - 计算唯一性百分比

> ID：13288873
> 
> 赞同：-1
> 
> 时间：2012-11-08T12:11:35.503
> 
> 标签：c#, .net

我已经想出了如何比较 2 个文本框并计算每个文本框中有多少个单词是相同的，有多少个是不同的，但我想知道我可以计算百分比而不是确切地显示有多少是相同的，有多少是不同的他们之间的区别？

对于那些让我感到困惑的人，如果我在这篇文章下再次写了整条消息并更改了一些单词并可能删除了一些单词，我可以从程序中得到反馈，告诉我差异是 14% 左右......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T12:15:54.867

您可以使用以下方法获取单词`string.Split`：

```
String[] words1 = Textbox1.Text.Split();
String[] words2 = Textbox2.Text.Split(); 
```

您可以使用 Linq 来比较两者：

```
var sameWordsInBoth = words1.Intersect(words2);
int count1 = sameWordsInBoth.Count();
var inTxt1ButNotInTxt2 = words1.Except(words2);
int count2 = inTxt1ButNotInTxt2.Count();
var inTxt2ButNotInTxt1 = words2.Except(words1);
int count3 = inTxt2ButNotInTxt1.Count(); 
```

要获得百分比，您只需计算总字数（fe `words1.Length`）并将其与其他计数进行比较。

例如：

```
double sameWordPercentage = (1.0 * count1 / words1.Length) * 100; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T12:15:35.403

既然您说您已经拥有大量独特的单词，并且不需要解释如何获取它们：

```
double UniqueWordCount = 71;
double TotalWordCount = 231;

double Percentile = (UniqueWordCount/TotalWordCount)*100; 
```

答案：30.7359.... %

如果你想圆它

```
Math.Round(Percentile,2) 
```

答案：30.74 %

# hadoop - 如何在映射器输出中收集三个参数。有什么办法

> ID：13288877
> 
> 赞同：0
> 
> 时间：2012-11-08T12:11:45.937
> 
> 标签：hadoop, mapreduce

我是地图Reduce和hadoop概念的新手。所以请帮忙

我有近 100 个包含这种格式数据的文件

```
conf/iceis/GochenouerT01a:::John E. Gochenouer::Michael L. Tyler:::Voyeurism, Exhibitionism, and Privacy on the Internet. 
```

我应该通过 map reduce 算法来做。现在在我想显示的输出中

```
John E. Gochenoue Voyeurism .
John E. Gochenoue Exhibitionism 
John E. Gochenoue and 
John E. Gochenoue privacy
John E. Gochenoue on
John E. Gochenoue the
John E. Gochenoue internet   
Michael L. Tyler   Voyeurism .
Michael L. Tyler   Exhibitionism 
Michael L. Tyler   and 
Michael L. Tyler   privacy
Michael L. Tyler   on
Michael L. Tyler   the
Michael L. Tyler   internet 
```

所以现在它是单行。所以有'n'行这样的行包含大量的名字和大量的书籍。

因此，如果我考虑一份 110 行的文档。我可以像这样输出我的映射器吗

```
John E. Gochenoue Voyeurism    1  
John E. Gochenoue Exhibitionism 3 
Michael L. Tyler   on           7 
```

IE 要说它显示名称和工作，然后显示文档中单词的出现次数，最后在减少后它应该显示名称，然后显示名称对它的单词以及它在 ' 中出现的单词的组合频率n'文件。

我知道 output.collector() 但它需要两个参数

```
output.collect(arg0, arg1) 
```

有什么方法可以收集三个值，如名称，单词和单词的出现

以下是我的代码

```
public static class Map extends MapReduceBase implements
        Mapper<LongWritable, Text, Text, IntWritable> {
    private final static IntWritable one = new IntWritable(1);
    private Text word = new Text();

    public void map(LongWritable key, Text value,
            OutputCollector<Text, IntWritable> output, Reporter reporter)
            throws IOException {
        String line = value.toString();
        /*
         * StringTokenizer tokenizer = new StringTokenizer(line); while
         * (tokenizer.hasMoreTokens()) { word.set(tokenizer.nextToken());
         * output.collect(word, one);
         */

        String strToSplit[] = line.split(":::");
        String end = strToSplit[strToSplit.length - 1];
        String[] names = strToSplit[1].split("::");
        for (String name : names) {
            StringTokenizer tokens = new StringTokenizer(end, " ");
            while (tokens.hasMoreElements()) {
                output.collect(arg0, arg1)
                System.out.println(tokens.nextElement());
            }
        }

    }
}

public static class Reduce extends MapReduceBase implements
        Reducer<Text, IntWritable, Text, IntWritable> {
    public void reduce(Text key, Iterator<IntWritable> values,
            OutputCollector<Text, IntWritable> output, Reporter reporter)
            throws IOException {
        int sum = 0;
        while (values.hasNext()) {
            sum += values.next().get();
        }
        output.collect(key, new IntWritable(sum));
    }
}

public static void main(String[] args) throws Exception {
    JobConf conf = new JobConf(example.class);
    conf.setJobName("wordcount");

    conf.setOutputKeyClass(Text.class);
    conf.setOutputValueClass(IntWritable.class);

    conf.setMapperClass(Map.class);
    conf.setCombinerClass(Reduce.class);
    conf.setReducerClass(Reduce.class);

    conf.setInputFormat(TextInputFormat.class);
    conf.setOutputFormat(TextOutputFormat.class);

    FileInputFormat.setInputPaths(conf, "/home/vishal/workspace/hw3data");
    FileOutputFormat.setOutputPath(conf,
            new Path("/home/vishal/nmnmnmnmnm"));

    JobClient.runJob(conf);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T14:41:20.717

诀窍是编写一个文本（hadoop 可写实现之一），其字符串内容是许多制表符分隔的值。这就是您可以轻松地在映射器和化简器之间传递复杂值的方式。

当然，更有工业实力的做法是自己写Writable。可写对象基本上是具有特殊序列化/反序列化行为的 pojo。在这种情况下，您的可写对象将具有三个属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T14:53:06.830

对于传递标记化字符串时的映射器类，当您想要计数时，您基本上需要对相同的键进行分组。

这意味着计算一个人使用一个词的次数将需要您生成一个看起来像这样的密钥`John Smith<delimiter>Word`。分隔符可以是任何你想要的。大多数人使用制表符将其保留在最终减速器输出中的 TSV。

因此，要更正您的 output.collect 语句，请将其更改为如下所示：

```
output.collect(new Text(name + "\t" + tokens.nextElement()), new IntWritable(1)); 
```

# xml - 如何使用 XPath 选择具有特定名称的第一个属性节点

> ID：13288879
> 
> 赞同：1
> 
> 时间：2012-11-08T12:11:55.017
> 
> 标签：xml, xpath

我想在我的 XML 文档中选择第一个具有名称的属性`"valgfase"`

我尝试了以下表达式：

```
string strExpression = "//@valgfase[1]"; 
```

和

```
string = //@valgfase[position() = 1] 
```

当我执行我的表达式时，它返回具有属性“valgfase”的所有元素。

这样做的正确方法是什么？

我正在`C#`使用`XPathDocument`和`XPathNavigator`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T12:15:35.313

你应该这样做`(//@valgfase)[1]`。

您可以在该问题的答案中看到[解释](https://stackoverflow.com/questions/1102317/xpath-finding-an-attribute-node-and-only-one)。

# perl - perl 脚本错误中的“sed”用法

> ID：13288881
> 
> 赞同：1
> 
> 时间：2012-11-08T12:11:59.200
> 
> 标签：perl, sed

我在 Perl 脚本中有以下行：

```
my $temp = `sed 's/ /\n/g' /sys/bus/w1/devices/w1_bus_master1/10-000802415bef/w1_slave | grep t= | sed 's/t=//'`; 
```

引发错误：“sed: -e expression #1, char 2: unterminated `s' command”

如果我运行如下 shell 脚本，它可以正常工作：

```
temp1=`sed 's/ /\n/g' /sys/bus/w1/devices/w1_bus_master1/10-000802415bef/w1_slave | grep t= | sed 's/t=//'`
echo $temp1 
```

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T12:17:18.193

Perl 将 your 解释`\n`为文字换行符。因此，从 sed 的角度来看，您的命令行将如下所示：

```
sed s/ /
/g ... 
```

哪个 sed 不喜欢。shell 不会那样解释它。

正确的解决方案是在这种情况下根本不使用 sed/grep。毕竟，Perl 非常非常擅长处理文本。例如（未经测试）：

```
use File::Slurp;
my @lines = split m/\n/, map { s/ /\n/g; $_ } scalar(read_file("/sys/bus...));
@lines    = map { s/t=//; $_ } grep { m/t=/ } @lines; 
```

或者逃避`\n`一次，例如`sed 's/ /\\n/g'...`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T12:15:19.207

您需要`\n`在我们的第一个正则表达式中转义。perl 中的反引号操作符认为它是一个控制字符并插入一个换行符而不是字符串`\n`。

```
 |
                     V
my $temp = `sed 's/ /\\n/g' /sys/bus/ # ... 
```

# python - 使用端口安装 numpy（Python 默认版本问题）

> ID：13288889
> 
> 赞同：2
> 
> 时间：2012-11-08T12:12:31.230
> 
> 标签：python, numpy, port, macports

我现在正在使用 Mountain Lion，并且我已经使用 macports 安装了 python27 和 numpy。问题是我无法从 python 导入 numpy。据我所知，Mountain Lion的默认python是python 2.7。

我已经尝试使用两个 python（默认 - 2.7.2 和端口 - 2.7.3）“导入 numpy”。它适用于默认值，但不适用于 python 2.7.3。

我已经使用“端口选择”选择了 2.7.3。

这些是一些端口命令的结果：

```
$ port installed|grep python
python24 @2.4.6_10 (active)
python27 @2.7.3_0
python27 @2.7.3_1 (active)
python_select @0.3_1 (active)

$ port installed|grep numpy
py24-numpy @1.6.2_0 (active)
py27-numpy @1.6.2_0 (active) 
```

我真的需要将 numpy 与使用 macports 安装的 python 2.7.3 一起使用。

有人知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T12:21:59.327

看起来你错过了一步。你是这样做端口选择的吗？

```
sudo port select --set python python27 
```

如果安装了 py27-numpy，那么您必须能够从 MacPorts 版本的 python 2.7 导入它。要确定您运行的是哪个版本的 python，请`which python`在命令行中执行 a。如果该命令`python2.7 -c 'import numpy'`没有给出错误，则在 MacPorts 中为 2.7 版本安装了 numpy。

# git - Git远程结束 - 奇怪的符号

> ID：13288890
> 
> 赞同：1
> 
> 时间：2012-11-08T12:12:35.390
> 
> 标签：git, ubuntu, hung

为什么在我的“git push”命令中我收到以下**非常吓人**的错误消息？

```
error: RPC failed; result=22, HTTP code = 0 | 81 KiB/s   
fatal: The remote end hung up unexpectedly
Writing objects: 100% (1888/1888), 45.39 MiB | 4.59 MiB/s, done.
Total 1888 (delta 451), reused 0 (delta 0)
fatal: The remote end hung up unexpectedly
fatal: expected ok/error, helper said '2004�i�ʏ�&-�@0��d����UiS�5!9*�[�0�8�f
                                                                            >q+Ju�倜�6�-Y*J"�QR/���'[t����P l&���    s����C�]��b�CvNN���a����^k��
                                 S/Z�'[�cC=�aZ�0�KN�]
                                                        {�����s��}���'�[���Ϡ��*��^Ȕ�}fs�"���{�مd���&gt;�1h����N��1���@7����@�q���?}�Y�mȽ'��x���=�](NIO^�xz��q0��7c�=���Ќӂ�˦��.!�C��k׌�r[�c�����&gt;��3��ڧo��%�2�y�l40��}i 
```

我已经附加了出现在我的外壳上的文本，显示了奇怪的符号。我的 Git 安装是否损坏？我的拳头 git clone 正在使用 https

我`git version 1.7.4.1`在 Ubuntu 10.10 x86_64 上使用

# android - 如何在android表格布局的一行中添加多列

> ID：13288899
> 
> 赞同：3
> 
> 时间：2012-11-08T12:13:04.590
> 
> 标签：android

我有一个包含姓名、年龄和等级的自定义列表。我想遍历列表并在表格布局中显示内容。每一行将具有以下属性。行将具有某种样式

```
 Name,
   Age,
   Age_Value,
   Grade,
   Grade_Value 
```

这里年龄和成绩只是一个标签。下面是一个示例表

```
Dolly
Age
23
Grade
A+

Roman
Age
22
Grade 
C

Ben
Age
23
Grade
B+ 
```

我想动态地将这些细节添加到我的布局中的表格布局中。

这是我尝试的代码

```
 for(int j=0;j<_attributeList.size();j++)
                      {

                          TableRow tr = new TableRow(MyActivity.this);
                          tr.setLayoutParams(new LayoutParams(
                                  LayoutParams.FILL_PARENT,
                                  LayoutParams.WRAP_CONTENT));

                              TextView tvName = new TextView(MyActivity.this);
                              tvName.setPadding(3,0,0,0);
                              tvName.setText(_attributeList.get(j).getName() +" : ");
                              tr.addView(tvName);

                              TextView tvAgeL = new TextView(MyActivity.this);

                              tvAgeL .setText("Age");
                              tr.addView(tvAgeL );

                              TextView tvAgeValue = new TextView(MyActivity.this);
                              tvAgeValue .setPadding(3,0,0,0);
                              tvAgeValue .setText(_attributeList.get(j).getValue() +" : ");
                              tr.addView(tvAgeValue );

                          attributeTable.addView(tr, new TableLayout.LayoutParams(
                                    LayoutParams.FILL_PARENT,
                                    LayoutParams.WRAP_CONTENT));
                     }
                    } 
```

由于这些项目正在添加到同一行中，因此我在一行中获得了结果。我怎样才能在单独的行中显示它们

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T12:19:53.560

你应该这样尝试

**代码**

```
for(int i = 0; i < _attributeList.size();i++){              

    TableRow newRow = new TableRow(getApplicationContext());
    newRow.setLayoutParams(new TableRow.LayoutParams(TableRow.LayoutParams.MATCH_PARENT, TableRow.LayoutParams.WRAP_CONTENT));

    newCheckBox = new CheckBox(getApplicationContext());

    TextView feeTypeText = new TextView(getApplicationContext());
    feeTypeText.setText(jsonObj.getString("feeType"));
    feeTypeText.setTextColor(Color.BLACK);
    feeTypeText.setTextSize(16f);
    feeTypeText.setTypeface(tf);

    TextView dueAmountText = new TextView(getApplicationContext());
    dueAmountText.setText(jsonObj.getString("dueAmount"));
    dueAmountText.setTextColor(Color.BLACK);
    dueAmountText.setTextSize(16f);
    dueAmountText.setTypeface(tf);

    TextView dueDateText = new TextView(getApplicationContext());
    dueDateText.setText(jsonObj.getString("dueDate"));
    dueDateText.setTextColor(Color.BLACK);
    dueDateText.setTextSize(16f);
    dueDateText.setTypeface(tf);

    newRow.addView(newCheckBox,(new LayoutParams(0,LayoutParams.WRAP_CONTENT,0.8f)));
    newRow.addView(feeTypeText,(new LayoutParams(0,LayoutParams.WRAP_CONTENT,0.8f)));
    newRow.addView(dueAmountText,(new LayoutParams(0,LayoutParams.WRAP_CONTENT,1.0f)));
    newRow.addView(dueDateText,(new LayoutParams(0,LayoutParams.WRAP_CONTENT,1.0f)));
    attributeTable.addView(newRow);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T12:23:22.583

你可以像这样添加......在这里我以编程方式添加了TableRow，我在其中添加了textView。

```
addtree.setOnClickListener(new OnClickListener()
    {

        @Override
        public void onClick(View arg0) 
        {

                tr1 = new TableRow(YourActivity.this);
                tr1.setClickable(true);
                tr1.setId(jj);
                tr1.setPadding(0, 5, 0, 5);
                Log.d("id", "id is......"+tr1.getId());
                LinearLayout.LayoutParams layoutParams=new LinearLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT);

                TextView textview = new TextView(New_Quote_Activity.this);

                textview.setText("Job "+jj);
                textview.setTextColor(Color.BLACK);
                textview.setTypeface(null, Typeface.BOLD);
                textview.setTextSize(14);
                textview.setPadding(5, 0, 0, 0);

                View vv=new View(New_Quote_Activity.this);
                vv.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,1));

                vv.setBackgroundResource(R.color.viewcolor);

                View vv1=new View(New_Quote_Activity.this);
                vv1.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,1));

                vv1.setBackgroundResource(R.color.viewcolor);
                tr1.addView(textview);

                table_crete_invoice.addView(vv1);
                table_crete_invoice.addView(tr1,layoutParams);
                table_crete_invoice.addView(vv);

            } 
```

# c# - 找出访问给定 exe 文件的用户

> ID：13288900
> 
> 赞同：1
> 
> 时间：2012-11-08T12:13:08.753
> 
> 标签：c#, .net, winforms, .net-4.0, exe

有没有办法找出当前正在运行给定`.exe`文件的用户。

例如，我们可以使用`Environment.UserName`.

它是否需要对程序进行任何修改或无论如何要实现这一点？

**更新**

基本上，我提供了一个位于网络驱动器上的 exe 文件。我想找出当前正在使用 exe 文件的用户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T13:17:06.707

正如 Ramhound 建议的那样，您可以使用 System.Diagnostics.Process 类来监视系统上的进程（假定具有适当的权限）

`System.Diagnostics.Process.GetProcesses()`将为您提供一个引用所有本地进程的 Process 对象数组...

你可以遍历这个数组并有一个嵌套循环来遍历`Modules`属性

对象的`Modules`属性`Process`将为您提供`ProcessModule`属于此进程的所有对象（您的 exe 文件将是其中之一）...`ProcessModule.FileName`将包含加载模块的完整路径

# jquery - 旋转 btn 增量 45 度不起作用

> ID：13288901
> 
> 赞同：0
> 
> 时间：2012-11-08T12:13:09.403
> 
> 标签：jquery

我有一个脚本，每次单击按钮时，我都会使用它将按钮旋转 45 度。我有一个文章列表，旁边有一个加号，当你点击它时，它会旋转 45 度变成 X 并切换打开一个段落，再次点击它会再次向前旋转 45 度变成加号并关闭段落。我有很多这样的按钮，所以我试图写一些适用于所有这些按钮的东西。不止一个可以一次打开，我遇到了一个问题，当打开一个并单击另一个时，第二个旋转 90 度而不是 45 度，我不是 100% 确定为什么，但我认为这与变量的设置方式有关，但我又不确定，如果确实是问题，我也不确定如何修改它。[http://jsbin.com/atinap/16/edit](http://jsbin.com/atinap/16/edit)

这是我的 JS：

```
$(".info_btn").css("-webkit-transition", "-webkit-transform 0.25s ease-in-out");

var info_btn_DEG = 0;

$(".info_btn").toggle(function() {
$(this).closest('.article_wrapper').find('.description').slideDown("250");
info_btn_DEG += 45;
$(this).css("-webkit-transform", "rotateZ(" + info_btn_DEG + "deg)");
$(this).fadeTo("200", 0.65);
}, function() {

$(this).closest('.article_wrapper').find('.description').slideUp("200");
info_btn_DEG += 45;
$(this).css("-webkit-transform", "rotateZ(" + info_btn_DEG + "deg)");
$(this).fadeTo("250", 0.3);
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T15:50:53.547

您需要为每个元素关联一个角度，而不是所有元素都有一个全局角度 - 使用 .data()：

```
function increaseAngle(elem) {
var oldAngle = $(elem).data('angle');
var newAngle = oldAngle + 45;
$(elem)
    .css("-webkit-transform", "rotateZ(" + newAngle + "deg)")
    .data('angle', newAngle);
}

$(".info_btn")
.css("-webkit-transition", "-webkit-transform 0.25s ease-in-out")
.data('angle', 0);
.toggle(function() {
    $(this).closest('.article_wrapper').find('.description').slideDown(250);
    increaseAngle(this);
    $(this).fadeTo(200, 0.65);
}, function() {
    $(this).closest('.article_wrapper').find('.description').slideUp(200);
    increaseAngle(this);
    $(this).fadeTo(250, 0.3);
}); 
```

# mysql - 从两个不同的表中检索信息

> ID：13288909
> 
> 赞同：0
> 
> 时间：2012-11-08T12:13:41.723
> 
> 标签：mysql, sql, database

我目前是 SQL 语言的新手，我正在努力理解如何从下表中检索正确的信息：

职员表

```
+------+----------+---------+-----------------+------+------+
| s_id | initials | s_name  | pos             | qual | d_id |
+------+----------+---------+-----------------+------+------+
| AA   | A.       | Tom     | Lecturer        | PhD  | RELI |
| BBB  | J.J.     | Jason   | Senior Lecturer | PhD  | RELI |
| CCC  | B.A.     | Andy    | Senior Lecturer | PhD  | BIOL |
| DD   | M.       | Mark    | Professor       | PhD  | BIOL |
| EE   | W.       | Alen    | Professor       | BA   | BIOL |
+------+----------+---------+-----------------+------+------+ 
```

研究表

```
+------+-------+------------+-----------+
| s_id | r_id  | str_date   | fin_date  |
+------+-------+------------+-----------+
| BBB  | RESH1 |       1990 |      1998 |
| BBB  | RESH2 |       1980 |      1985 |
| DD   | RESH4 |       1995 |      1999 |
| AA   | RESH4 |       1992 |      1999 |
| CCC  | RESH8 |       1989 |      1994 |
| EE   | RESH5 |       1988 |      1989 |
+------+-------+------------+-----------+ 
```

我正在尝试创建一个新表，其中将包含员工 s_name 以及每个人做了多少不同的研究。

到目前为止我所拥有的是

```
select distinct s.s_name, count(r.s_id) 
from staff s 
inner join research r 
on s.s_id = r.s_id 
where s.s_id = r.s_id; 
```

我的结果是，

```
+---------+---------------+
| s_name  | count(r.s_id) |
+---------+---------------+
| Jason   |             6 |
+---------+---------------+ 
```

我做错了什么？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T12:16:16.670

我认为这会做：

```
select s.s_name, count(*) 
from staff s 
inner join research r 
on s.s_id = r.s_id 
group by r.s_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T12:30:17.567

比较 Staff 表和 research 表之间 S_ID 的数据类型。任何一张表中都可能有空格。否则`Trim`，请在您的连接条件中使用该函数，以便获得正确的结果集。

您的查询仅返回 Staff 表中的不同 id。您应该`group by`在 SQL 语句中使用。

希望这可以帮助！

# android - 如何在android中制作类似web的选项菜单

> ID：13288910
> 
> 赞同：0
> 
> 时间：2012-11-08T12:13:43.283
> 
> 标签：android, android-layout, android-widget

我制作包含图像的页脚。我希望在单击页脚菜单的图像时像这样打开。（Android）

![如何制作这样的菜单](../Images/fd6ff971b5f97a2e7629c0521015dd8b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T12:20:38.673

首先，这不是网络，您需要查看在 Android 中以本机方式实现此目的的方法。

阅读[Android 设计指南](http://developer.android.com/design/index.html)

尝试使用子菜单，检查[ActionBarSherlock](http://actionbarsherlock.com/)

# c# - 在 c# 中存储二进制矩阵的最节省内存的方法是什么？

> ID：13288915
> 
> 赞同：1
> 
> 时间：2012-11-08T12:13:52.520
> 
> 标签：c#

如何在c#中存储逻辑值的二维数组，以便占用最少的空间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T12:26:42.810

[BitArray](http://msdn.microsoft.com/en-us/library/system.collections.bitarray.aspx)每个逻辑值使用一位。最有效的方法是实现您自己的二维 BitArray。使用 .NET 反射器获取 BitArray 源代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T12:21:53.027

如果您需要 32 列，则可以使用 32 位整数并使用按位运算来打开关闭位。

我一直在 C 中这样做，也应该在 c# 中工作

# java - 处理 @DiscriminatorColumn 中的 NULL 值

> ID：13288917
> 
> 赞同：2
> 
> 时间：2012-11-08T12:13:58.933
> 
> 标签：java, orm, jpa-2.0, eclipselink, single-table-inheritance

我有一个遗留的 MS SQL Server 2000 数据库，我正在尝试使用 JPA 进行映射（准确地说是 EclipseLink）。

我有一个表“CONTACT1”，其中有一个文本字段“KEY1”，可以是“联系人”或“资产”，我正在使用：

```
@Table(name = "CONTACT1")
@Inheritance(strategy = InheritanceType.SINGLE_TABLE)
@DiscriminatorColumn(discriminatorType = DiscriminatorType.STRING, name = "KEY1")
public abstract class Record { 
```

将其映射到两个不同的类（联系人和资产）。

```
@Entity
@DiscriminatorValue(value = "Contact")
public class Contact extends Record {...} 
```

和

```
@Entity
@DiscriminatorValue(value = "Asset")
public class Asset extends Record {...} 
```

不幸的是，我发现了一些或记录丢失，经过进一步分析，我意识到一些联系人记录的“KEY1”字段设置为NULL。

虽然我可以运行更新查询来解决我想避免的问题 - 有没有办法将“NULL”值映射到 Contact 类？

如果做不到这一点，JPA 中是否有一种机制，我可以预先过滤记录集，使 JPA 相信该字段不是 NULL，但其中写有“联系人”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T14:23:34.277

您需要运行更新并将正确的值分配给数据库中具有空值的行。我还建议您修改数据库中的列定义并为其设置默认值，以防止将来出现空值。

或者不要使用`@DiscriminatorColumn`. 以我的经验，它往往会增加比其价值更多的复杂性和错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-06-14T11:24:33.057

**只是澄清一下：**我发现如果您在任何列上设置 @DiscriminatorColumn 注释（例如此处的 KEY1），Hibernate ORM 会创建一个具有 NOT NULL 约束的数据库模式。由于您的旧数据库具有空值，因此稍后可能会发布一个 ALTER 表以使其为 NULLABLE。详情见：[https ://hibernate.atlassian.net/browse/HHH-12445](https://hibernate.atlassian.net/browse/HHH-12445)

**解决方案 1：** 您可以使用鉴别器公式将空值映射到首选实体类。

```
@DiscriminatorFormula("case when key1 is null then 'Contact' else key1 end)
@DiscriminatorValue(value = "Contact") 
```

注意[https://docs.jboss.org/hibernate/orm/5.4/userguide/html_single/Hibernate_User_Guide.html](https://docs.jboss.org/hibernate/orm/5.4/userguide/html_single/Hibernate_User_Guide.html)中的**示例 247**

**解决方案：2** 您也可以使用@DiscriminatorColumn("null") 将该行映射到“Contact”实体类。 [https://docs.jboss.org/hibernate/orm/5.2/userguide/html_single/Hibernate_User_Guide.html#entity-inheritance-discriminator-implicit](https://docs.jboss.org/hibernate/orm/5.2/userguide/html_single/Hibernate_User_Guide.html#entity-inheritance-discriminator-implicit)中的 **示例 254**

# servicestack - servicestack 文本，json 反序列化索引超出了数组异常的范围

> ID：13288918
> 
> 赞同：1
> 
> 时间：2012-11-08T12:13:59.557
> 
> 标签：servicestack

我正在诊断一个问题，其中我在 web 表单或查询变量中接收到 json 或 jsv 对象，并且得到的索引超出了 servicestack 抛出的数组异常的范围。这是另一个产品中的休息客户端，将其发送到我的 servicestack 休息服务。

我将其范围缩小到使用空字符串作为值而不是 json 来反序列化表单变量。

这是一个做同样事情的简单测试用例。我会期望 null 被返回？
v3.9.26 servicestack.text

`

```
 class simpleDTO {
        public string FirstName { get; set; }
        public string LastName { get; set; }
    }

    [TestMethod]
    public void TestMethod1()
    {
        var json = "";
        var o = JsonSerializer.DeserializeFromString(json, typeof(simpleDTO));

        Assert.IsNull(o);
    }` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T20:06:00.330

该问题已在此提交中修复：[6ea6f235dc](https://github.com/ServiceStack/ServiceStack.Text/commit/c151fae58e927d2aee166dc5192943671ef87644)，并应包含在下一个 ServiceStack.Text 版本中。

# php - codeigniter 管理面板文件结构

> ID：13288923
> 
> 赞同：0
> 
> 时间：2012-11-08T12:14:11.847
> 
> 标签：php, file, codeigniter, session, login

我在使用 codeigniter 设置管理部分时遇到了困难。

我刚刚在控制器文件夹中添加了一个名为 fam_Admin 的新文件夹。

所以结构如下：

-控制器--->fam_admin ----
>-login.php

在 routes.php 我添加了以下代码： `$route['fam_admin'] = "fam_admin/login";`

```
<?php
class Login extends CI_Controller {
  public function index() {
    //$login['main_content'] = '/fam_admin/login';
    //$this -> load -> view('fam_admin/includes/template', $login);
    $this -> load -> view('fam_admin/login');
  }
  public function validate_login() {
    $username = $this -> input -> post('username');
    $password = $this -> input -> post('password');
    $this -> load -> library('form_validation');
    $this -> form_validation -> set_rules('username', 'username', 'trim|required');
    $this -> form_validation -> set_rules('password', 'password', 'trim|required|callback_credential_check');
    if ($this -> form_validation -> run() == FALSE) {
      $this -> load -> view('fam_admin/login');
    }
  }
  public function credential_check() {
    //Field validation succeeded.&nbsp; Validate against database
    $username = $this -> input -> post('username');
    $password = $this -> input -> post('password');
    $this -> load -> model('fam_admin/admin');
    //query the database
    $query = $this -> admin -> check_login($username, $password);
    if (!$query) {
      $this -> form_validation -> set_message('login_check', 'Invalid username or password');
      return false;
      $this -> index();
    } else {
      $data = array(
        'username' => $this -> input -> post('username'),
        'is_logged_in' => true
      );
      $this -> session -> set_userdata($data);
      //redirect('fam_admin/main_section');
      redirect('site/logged_in');
    }
  }
}
?> 
```

以上是 login.php 的代码，但是当验证登录凭据时，它会在 google chrome 中出现以下错误。您可以通过输入虚假凭据来尝试它，它应该会给您错误并加载相同的登录表单。

[该网站在检索http://www.famtripsandinspectionvisits.com/index.php/fam_admin/login/validate_login](http://www.famtripsandinspectionvisits.com/index.php/fam_admin/login/validate_login)时遇到错误。它可能因维护而停机或配置不正确。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T12:28:30.820

一方面，这是一个问题：

```
if ( ! $query) {
    // ...
    return false;
    $this -> index();
} 
```

一旦你有了`return`东西，就是这样 - 其余代码将不会运行 - 所以该`index`方法不会被调用并且根本没有输出。

...但是，您不应该在应该只处理数据验证的函数中加载视图。

我会重新安排一些事情，尝试将您的控制器简化为：

```
class Login extends CI_Controller {

    public function index()
    {
        $this->load->library('form_validation');
        $this->form_validation->set_rules('username', 'username', 'trim|required');
        $this->form_validation->set_rules('password', 'password', 'trim|required');
        if ($this->form_validation->run())
        {
            $this->load->model('fam_admin/admin');
            $username = $this->input->post('username');
            $password = $this->input->post('password');
            $query = $this->admin->check_login($username, $password);
            if ($query)
            {
                $data = array(
                    'username' => $this->input->post('username'),
                    'is_logged_in' => true
                );
                $this->session->set_userdata($data);
                redirect('site/logged_in');
            }
            else
            {
                $this->form_validation->set_message('login_check', 'Invalid username or password');
            }
        }
        $this->load->view('fam_admin/login');
    }

} 
```

# jquery - 如何将 jquery .on() 与 jquery 插件一起使用（例如使用 hoverpulse）？

> ID：13288926
> 
> 赞同：0
> 
> 时间：2012-11-08T12:14:19.083
> 
> 标签：jquery, jquery-plugins, jquery-hover, jquery-on

我正在尝试将 .on() 与 hoverpulse 插件一起使用，以将其应用于动态加载的内容，但没有出路。如果有人可以提供帮助，那将是非常友好的。提前致谢。

调用 HOVERPULSE 函数的 JQUERY 代码

```
$(selector).hoverpulse({

    size: 40,  // number of pixels to pulse element (in each direction)
    speed: 400 // speed of the animation 
}) 
```

悬浮脉冲功能

```
$.fn.hoverpulse = function(options) { CODE GOES HERE} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T12:15:37.983

该`on`语法用于事件绑定/处理。不适用于插件..

# google-apps-script - Google Apps 脚本中的 html 编码问题

> ID：13288928
> 
> 赞同：1
> 
> 时间：2012-11-08T12:14:26.193
> 
> 标签：google-apps-script

我需要将 HTML 实体字符转换为它们的 unicode 版本。例如，当我有 时`&amp`，我只想要`&`。是否有特殊功能，或者我必须`replace()`为每一对`HTML Entity character`<-->使用该功能`Unicode character`？

提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-08T16:22:03.130

即使 Apps Script 中没有 DOM，您也可以通过以下方式解析 HTML 并获取纯文本：

```
function getTextFromHtml(html) {
  return getTextFromNode(Xml.parse(html, true).getElement());
}

function getTextFromNode(x) {
  switch(x.toString()) {
    case 'XmlText': return x.toXmlString();
    case 'XmlElement': return x.getNodes().map(getTextFromNode).join('');
    default: return '';
  }
} 
```

打电话

```
getTextFromHtml("hello <div>foo</div>&amp; world <br /><div>bar</div>!"); 
```

将返回

“你好 foo& 世界酒吧！”。

解释一下，第二个参数为“true”的 Xml.parse 将文档解析为 HTML 页面。然后我们遍历文档（将用缺少的 HTML 和 BODY 元素等进行修补，并转换为有效的 XHTML 页面），将文本节点转换为文本并扩展所有其他节点。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-08T15:21:02.803

在 Javascript 中（我假设这就是您正在使用的），没有内置函数，但您可以将内容分配给 html 标记，然后读出文本。这是一个使用 jQuery 的例子：

```
function htmlDecode(value){ 
  return $('<div/>').html(value).text(); 
} 
```

请注意，标签不需要实际附加到 DOM。这只是创建一个新标签，读出其内容，然后将其丢弃。只需几行额外的代码，您就可以在 vanilla Javascript 中完成非常相似的事情。

# asp-classic - 如何使用 Python urlopen 将参数传递给 Url

> ID：13288930
> 
> 赞同：2
> 
> 时间：2012-11-08T12:14:42.863
> 
> 标签：asp-classic, python-3.x, urllib, urlopen

我目前是 python 编程的新手。我的问题是我的 python 程序似乎没有将参数正确地传递/编码到我创建的 ASP 文件中。这是我的示例代码：

```
import urllib.request

url = 'http://www.sample.com/myASP.asp'
full_url = url + "?data='" + str(sentData).replace("'", '"').replace(" ", "%20").replace('"', "%22") + "'"
print (full_url)
response = urllib.request.urlopen(full_url)
print(response) 
```

输出会给我类似的东西：

```
http://www.sample.com/myASP.asp?data='{%22mykey%22:%20[{%22idno%22:%20%22id123%22,%20%22name%22:%20%22ej%22}]}' 
```

该 asp 文件假设将获取的查询字符串插入到数据库中。但是每当我检查我的数据库时，都没有保存任何记录。虽然如果我将打印的输出复制并粘贴到我的浏览器 url 上，记录会被保存。对此有任何意见吗？TIA

更新：python 是否有可能调用我的 ASP 文件 A 但它不调用我的 ASP 文件 B？ASP File A 由 python 调用，而 ASP File B 由 ASP File A 调用。因为每当我在浏览器上运行 url 时，保存都很好。但是在 python 中，即使从 python 传递的数据被 ASP File A 读取，也不会保存数据库。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T14:46:43.940

在 Firefox 中使用 firebug 并在页面加载时观察网络流量。如果它实际上是一个 HTTP POST，我怀疑它是，检查该帖子上的帖子参数并执行以下操作：

```
from BeautifulSoup import BeautifulSoup
import urllib

post_params = {
              'param1' : 'val1',
              'param2' : 'val2',
              'param3' : 'val3'
              }
post_args = urllib.urlencode(post_params)

url = 'http://www.sample.com/myASP.asp'
fp = urllib.urlopen(url, post_args)
soup = BeautifulSoup(fp) 
```

如果它实际上是 HTTP POST，这将起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-23T08:23:25.597

如果有人偶然发现这一点，这就是我想出的：

.py 文件：

```
url = "my.url.com"
data = {'sample': 'data'}

encodeddata = urllib.parse.urlencode(data).encode('UTF-8')
req = urllib.request.Request(url, encodeddata)
response = urllib.request.urlopen(req) 
```

在我的 asp 文件中，我使用了 json2.js：

```
jsondata = request.form("data")
jsondata = replace(jsondata,"'","""")
SET jsondata = JSON.parse(jsontimecard) 
```

注意：请改用[请求](http://docs.python-requests.org/en/master/)。;)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-08T14:36:54.583

首先，我不懂 Python。

但从此：[urllib.request 上的文档](http://docs.python.org/3.0/library/urllib.request.html)

> 提供数据参数时，HTTP 请求将是 POST 而不是 GET

让我做一个非常疯狂的猜测，您正在访问`Request.Querystring(..)`asp 页面中的表单值，因此您的帖子不会传递任何值。但是，当您将 url 粘贴到地址栏中时，它是 a`GET`并且可以正常工作。

只是猜测，您可以显示 .asp 页面以进行进一步检查。

# http - 维护登录会话

> ID：13288931
> 
> 赞同：-1
> 
> 时间：2012-11-08T12:14:52.497
> 
> 标签：http

我正在浏览`http`wiki 页面并了解这`http`是一个`stateLess`协议。每个网络事务不依赖于先前的事务。站点（fb、google 等）如何维护用户登录或未使用 http 的会话天气。

对不起，如果我的问题低于水平。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T12:16:10.510

通过存储会话变量，在 PHP 中：

```
$_SESSION['var'] 
```

# iphone - 如何使用 CAFilter 为相机光圈动画制作动画？

> ID：13288932
> 
> 赞同：0
> 
> 时间：2012-11-08T12:14:54.233
> 
> 标签：iphone, objective-c, ios, xcode, caanimation

我正在开发一个简单的相机应用程序，我需要为相机快门打开/关闭动画制作动画。我用谷歌搜索了 CAFilter 和 CATransition，但很困惑。它将如何帮助我制作动画？前任。如果我有一个名为 view 的视图和一个名为

`-(void)pressed;`

在我的界面中。如何使用 CAFilter 在我的视图中实现动画？谁能给我任何其他的例子？按下按钮可能会 360 度旋转视图？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T08:47:47.897

在这个论坛的其他地方提问和回答。这里有一些参考资料供您参考：

这使用 CATransition：

[快门动画 AVFoundation iphone](https://stackoverflow.com/questions/13370114/shutter-animation-avfoundation-iphone)

这使用了@"cameraIris"，这是一个未记录的 Apple API，因此使用它的应用程序可能会被拒绝。但它确实看起来不错。

还有这部 26 MB 的电影： [http ://www.juicybitssoftware.com/2009/08/31/iphone-camera-shutter-animation/](http://www.juicybitssoftware.com/2009/08/31/iphone-camera-shutter-animation/)

# java - 读取进程的输出

> ID：13288933
> 
> 赞同：1
> 
> 时间：2012-11-08T12:14:56.163
> 
> 标签：java, bufferedreader, runtime.exec

我正在尝试使用 BufferedReader 来读取进程的输出。当我尝试

```
Process p=Runtime.getRuntime().exec("nslookup 10.123.30.130"); 
p.waitFor(); 
BufferedReader reader=new BufferedReader(new InputStreamReader(p.getInputStream())); 
String line=reader.readLine(); 
while(line!=null) 
{ 
    System.out.println(line); 
    line=reader.readLine(); 
} 
```

输出是

```
Server:  <edited server details>
Address:  <edited address details> 
```

而控制台中进程的实际输出是：

```
Server:  <details edited>
Address:  <details edited>

Name:    <details edited>
Address:  <details edited> 
```

（注意：出于安全原因，我编辑了实际输出）

我的观察是，在阅读了前 2 行之后，返回 null，因此流结束。有什么办法可以得到完整的四行吗？

* * *

**更新**：第三个空行被解释为空。但是，如果我尝试使用相同的程序， `Process p=Runtime.getRuntime().exec("cmd /c dir");`即使有新行，我也会得到与控制台中完全相同的输出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-01-28T15:29:48.200

也读取错误缓冲区。

```
BufferedReader stdError = new BufferedReader(new InputStreamReader(p.getErrorStream()));

String errorLine;
while( (errorLine = stdError.readLine()) != null ){
  System.out.println(errorLine);
} 
```

您会看到有一个错误，并且*nslookup*无法为您的 IP 地址解析域。使用主机名而不是 IP 地址。

# javascript - 如何使用 id 检查无线电组的选定值

> ID：13288936
> 
> 赞同：-1
> 
> 时间：2012-11-08T12:15:06.533
> 
> 标签：javascript

我在 stackoverflow 中看到了很多使用输入名称获取组单选值的示例。有没有办法使用 id 找到它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T12:17:17.373

通常最好使用名称，因为它可以让您知道选择了组中的*哪个*单选按钮（组中的所有单选按钮具有相同的名称，但[只有一个具有给定的 id](http://www.w3.org/TR/html401/struct/global.html#h-7.5.2)）。

但是，如果您想检查是否检查了您拥有其 id 的特定单选按钮，您可以这样做：

```
var yesorno = document.getElementById('someId').checked; 
```

[示范](http://jsfiddle.net/6Uv9A/)

如果您想获取您知道其 id 的单选按钮的值，这很简单

```
var value = document.getElementById('someId').value; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T12:25:09.660

简短的回答，不是真的。

您必须有一个名称，否则单选按钮将无法一起使用，这意味着可以检查所有这些单选按钮。如果您已经有了名称，请通过以下方式获取值：

```
$('[name="myGroup"]:radio:checked').val() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T13:02:54.880

```
var name = $("#myId").attr("name")    
$(":radio").filter(function(){return $(this).attr("name") == name}).filter(":checked").val() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T12:30:45.263

我自己发现了。这段代码对我有用！。

```
alert($('input[id=groudid]:checked').val()); 
```

# android - cocos2d-x 支持android 的XHDPI 模式吗？

> ID：13288937
> 
> 赞同：2
> 
> 时间：2012-11-08T12:15:07.073
> 
> 标签：android, cocos2d-x

我想知道cocos2d-x是否支持android的XHDPI模式，如果支持，怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T05:45:00.887

是的，你可以这么做。为此，您必须编写一个本机函数，该函数将返回设备的 dpi。因此，您可以设置资源目录。这是java中的本机代码，它将返回屏幕的dpi。

在 Cocos2dxActivity（cocos2d-x android 的库文件）中编写这段代码

```
static int dpiValue;
DisplayMetrics dm = new DisplayMetrics();
getWindowManager().getDefaultDisplay().getMetrics(dm);
dpiValue = dm.densityDpi;

public static int deviceDPI()
{
    return dpiValue;
} 
```

现在在您的 AppDelegate.cpp 中，您可以获得此值并相应地设置资源文件夹

这是示例代码

```
//getting dpi in case of android
JniMethodInfo t;
JniHelper::getStaticMethodInfo(t
        , "org/cocos2dx/lib/Cocos2dxActivity" 
        , "deviceDPI" 
        , "()I");
        int deviceDPI = t.env->CallIntMethod(t.classID, t.methodID, NULL);
CCLog("DPI of screen is %d", deviceDPI);
if(deviceDPI <= 120)
{
    //ldpi
}
else if(deviceDPI <= 160)
{
    //mdpi
}
else if(deviceDPI <= 240)
{
    //mdpi
}
else
{
    //xhdpi
} 
```

希望这对你有帮助！！:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-06T05:57:37.190

您可以简单地使用该功能`CCDevice::getDPI()`

如果这对你没有帮助，你应该仔细阅读[这篇](http://www.cocos2d-x.org/projects/cocos2d-x/wiki/Multi_resolution_support)文章，它真的对我帮助很大。

希望对你也有帮助

# iphone - 单击单元格文本时如何从单元格中删除文本

> ID：13288941
> 
> 赞同：0
> 
> 时间：2012-11-08T12:15:15.173
> 
> 标签：iphone, objective-c, ios, uitableview, uiscrollview

嗨，当我通过单击加载更多单元格来显示表格记录时，我遇到了问题。问题是，当我单击加载更多单元格时，表格必须再加载两条记录，然后加载更多文本必须向前移动，例如，第一次在第三个单元格的表格上加载 2 条记录是当我单击此单元格时加载更多单元格然后另外两条记录必须加载到表中，并且此加载更多文本移动到第 5 个单元格。但在我的情况下，问题是当我单击在第三个位置加载更多单元格时，它也会移动到第五个位置，但在第三个单元格记录不加载并且加载更多文本出现在第三个单元格上。请告诉我如何处理这个问题这是代码

```
#import "RootViewController.h"
#import "XMLAppDelegate.h"
#import "song.h"
#import "BookDetailViewController.h"
@implementation RootViewController
@synthesize mylabel,mylabel1,mylabel2,spinner,cell;
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    if([myarray count]>pageSize)
    {
        return pageSize+1;
    }
    return  myarray.count;

}
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    return 75;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"cell";

    cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier] autorelease];

        song *asong = [appDelegate.artists objectAtIndex:indexPath.row];

        NSData *data=[NSData dataWithContentsOfURL:[NSURL URLWithString:[myarray objectAtIndex:indexPath.row ]]];

        UIImage *image=[UIImage imageWithData:data];
        if(indexPath.row<pageSize)
        {    
            UIImageView *imageView=[[UIImageView alloc]initWithFrame:CGRectMake(5, 10, 60, 60)];
            imageView.image=image;
            [cell addSubview:imageView];

            CGRect CellFrame1 = CGRectMake(65, 10, 220, 45);
            mylabel1 = [[UILabel alloc] initWithFrame:CellFrame1];
            mylabel1.text = asong.title;

            mylabel1.font = [UIFont boldSystemFontOfSize:12];
            mylabel1.textColor = [UIColor blackColor];
            [cell.contentView addSubview:mylabel1];
            CGRect CellFrame2 = CGRectMake(65, 47, 150, 25);
            mylabel2 = [[UILabel alloc] initWithFrame:CellFrame2];
            mylabel2.text = asong.artist;

            mylabel2.font = [UIFont systemFontOfSize:12];
            [cell.contentView addSubview:mylabel2];

            CGRect CellFrame = CGRectMake(255, 3, 60, 7);
            mylabel = [[UILabel alloc] initWithFrame:CellFrame];
            mylabel.text = asong.duration;
            mylabel.textColor = [UIColor blueColor];
            mylabel.font = [UIFont boldSystemFontOfSize:10];
            [cell.contentView addSubview:mylabel];
        }
        else 
        {
            cell.textLabel.text = @"load more";

            spinner = [[UIActivityIndicatorView alloc] 
                       initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleGray];

            cell.accessoryView = spinner;

            [spinner startAnimating];
            [spinner performSelector:@selector(stopAnimating) withObject:nil afterDelay:1];        [spinner release];

        }
    }

    cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;

        return cell;
}   

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    // Navigation logic -- create and push a new view controller

    if (indexPath.row==pageSize) 
    {

        pageSize=pageSize+2;
        [cell reloadInputViews];
        [tableView reloadData];

    }

    /* else if(bdvController == nil)
        bdvController = [[BookDetailViewController alloc] initWithNibName:@"BookDetailView" bundle:[NSBundle mainBundle]];

    song *asong = [appDelegate.artists objectAtIndex:indexPath.row];

    bdvController.aartist = asong;

    [self.navigationController pushViewController:bdvController animated:YES];*/
}

- (void)viewDidLoad {
    [super viewDidLoad];
    pageSize =2;
    // Uncomment the following line to add the Edit button to the navigation bar.
    // self.navigationItem.rightBarButtonItem = self.editButtonItem;
    myarray = [[NSMutableArray alloc] initWithObjects:@"http://api.androidhive.info/music/images/adele.png",@"http://api.androidhive.info/music/images/eminem.png",@"http://api.androidhive.info/music/images/mj.png",@"http://api.androidhive.info/music/images/rihanna.png",@"http://api.androidhive.info/music/images/arrehman.png",@"http://api.androidhive.info/music/images/alexi_murdoch.png",@"http://api.androidhive.info/music/images/dido.png",@"http://api.androidhive.info/music/images/enrique.png",@"http://api.androidhive.info/music/images/ennio.png",@"http://api.androidhive.info/music/images/backstreet_boys.png",@"http://api.androidhive.info/music/images/adele.png",@"http://api.androidhive.info/music/images/eminem.png",@"http://api.androidhive.info/music/images/mj.png",@"http://api.androidhive.info/music/images/rihanna.png",@"http://api.androidhive.info/music/images/arrehman.png",@"http://api.androidhive.info/music/images/alexi_murdoch.png",@"http://api.androidhive.info/music/images/dido.png",@"http://api.androidhive.info/music/images/enrique.png",@"http://api.androidhive.info/music/images/ennio.png",@"http://api.androidhive.info/music/images/backstreet_boys.png",@"http://api.androidhive.info/music/images/adele.png",@"http://api.androidhive.info/music/images/eminem.png",@"http://api.androidhive.info/music/images/mj.png",@"http://api.androidhive.info/music/images/rihanna.png",@"http://api.androidhive.info/music/images/arrehman.png",@"http://api.androidhive.info/music/images/alexi_murdoch.png",@"http://api.androidhive.info/music/images/dido.png",@"http://api.androidhive.info/music/images/enrique.png",@"http://api.androidhive.info/music/images/ennio.png",@"http://api.androidhive.info/music/images/backstreet_boys.png", nil];
    appDelegate = (XMLAppDelegate *)[[UIApplication sharedApplication] delegate];

    self.title = @"Songs";
}

/*
// Override to support editing the list
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath {

    if (editingStyle == UITableViewCellEditingStyleDelete) {
        // Delete the row from the data source
        [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:YES];
    }   
    if (editingStyle == UITableViewCellEditingStyleInsert) {
        // Create a new instance of the appropriate class, insert it into the array, and add a new row to the table view
    }   
}
*/

/*
// Override to support conditional editing of the list
- (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath {
    // Return NO if you do not want the specified item to be editable.
    return YES;
}
*/

/*
// Override to support rearranging the list
- (void)tableView:(UITableView *)tableView moveRowAtIndexPath:(NSIndexPath *)fromIndexPath toIndexPath:(NSIndexPath *)toIndexPath {
}
*/

/*
// Override to support conditional rearranging of the list
- (BOOL)tableView:(UITableView *)tableView canMoveRowAtIndexPath:(NSIndexPath *)indexPath {
    // Return NO if you do not want the item to be re-orderable.
    return YES;
}
*/

/*
- (void)viewWillAppear:(BOOL)animated {
    [super viewWillAppear:animated];
}
*/
/*
- (void)viewDidAppear:(BOOL)animated {
    [super viewDidAppear:animated];
}
*/
/*
- (void)viewWillDisappear:(BOOL)animated {
}
*/
/*
- (void)viewDidDisappear:(BOOL)animated {
}
*/

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    // Return YES for supported orientations
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

- (void)didReceiveMemoryWarning {
    [super didReceiveMemoryWarning]; // Releases the view if it doesn't have a superview
    // Release anything that's not essential, such as cached data
}

- (void)dealloc {
    [bdvController release];
    [appDelegate release];
    [super dealloc];
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T12:24:19.140

你的问题是你只配置一个单元格，如果它是零。在您的示例中，您将希望用某些歌曲替换单元格 3 的内容，即使它不是零。

当 deque 返回 nil 时，创建一个新单元格并添加子视图，但**始终**根据路径更新内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T12:55:28.670

下面试试。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    if(indexPath.row<pageSize) {
        song *asong = [appDelegate.artists objectAtIndex:indexPath.row];

        static NSString *CellIdentifier = @"cell";

        cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
        if (cell == nil) {
            cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier] autorelease];

            UIImageView *imageView=[[UIImageView alloc]initWithFrame:CGRectMake(5, 10, 60, 60)];
            imageView.tag = 1;
            [cell addSubview:imageView];

            CGRect CellFrame1 = CGRectMake(65, 10, 220, 45);
            mylabel1 = [[UILabel alloc] initWithFrame:CellFrame1];
            mylabel1.tag = 2;

            mylabel1.font = [UIFont boldSystemFontOfSize:12];
            mylabel1.textColor = [UIColor blackColor];
            [cell.contentView addSubview:mylabel1];
            CGRect CellFrame2 = CGRectMake(65, 47, 150, 25);
            mylabel2 = [[UILabel alloc] initWithFrame:CellFrame2];
            mylabel2.tag = 2;

            mylabel2.font = [UIFont systemFontOfSize:12];
            [cell.contentView addSubview:mylabel2];

            CGRect CellFrame = CGRectMake(255, 3, 60, 7);
            mylabel = [[UILabel alloc] initWithFrame:CellFrame];
            mylabel.tag = 2;
            mylabel.textColor = [UIColor blueColor];
            mylabel.font = [UIFont boldSystemFontOfSize:10];
            [cell.contentView addSubview:mylabel];
        }
        UIImageView *imageView = [cell viewWithTag:1];
        UILabel *mylabel1 = [cell viewWithTag:1];
        UILabel *mylabel2 = [cell viewWithTag:1];
        UILabel *mylabel = [cell viewWithTag:1];

        dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0ul);
        dispatch_async(queue, ^{
            NSData *data=[NSData dataWithContentsOfURL:[NSURL URLWithString:[myarray objectAtIndex:indexPath.row ]]];
            dispatch_sync(dispatch_get_main_queue(), ^{
                imageView.image = [UIImage imageWithData:data];
            });
        });

        mylabel1.text = asong.title;
        mylabel2.text = asong.artist;
        mylabel.text = asong.duration;

        cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;

        return cell;
    }
    static NSString *CellIdentifier = @"cellloadmore";

    cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier] autorelease];

        cell.textLabel.text = @"load more";

        spinner = [[UIActivityIndicatorView alloc]
                   initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleGray];

        cell.accessoryView = spinner;

        [spinner startAnimating];
        [spinner performSelector:@selector(stopAnimating) withObject:nil afterDelay:1];        [spinner release];
    }
    cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;

    return cell;
} 
```

# coldfusion - 谷歌 oauth 令牌给出 405 错误

> ID：13288949
> 
> 赞同：2
> 
> 时间：2012-11-08T12:15:30.617
> 
> 标签：coldfusion, oauth-2.0, http-status-code-405

我正在尝试使用以下代码发布。我希望它返回令牌，但它返回**错误 405 Method Not Allowed**。

```
<cfhttp method="POST" url="http://accounts.google.com/o/oauth2/token" >
    <cfhttpparam type="Formfield" name="code" value="#url.CODE#">
    <cfhttpparam type="Formfield" name="client_id" value="458381219741.apps.googleusercontent.com">
    <cfhttpparam type="Formfield" name="client_secret" value="XXXXXXX">
    <cfhttpparam type="Formfield" name="redirect_uri" value="http://console.mbwebportal.com/oauth2callback">
    <cfhttpparam type="Formfield" name="grant_type" value="authorization_code">
</cfhttp> 
```

上面的代码在 [http://console.mbwebportal.com/oauth2callback](http://console.mbwebportal.com/oauth2callback)上，它在用户允许访问应用程序后获取 url 中的代码。

请帮忙！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T19:21:23.333

我找到了答案：关键是使用 cfhttpparam 类型“ **body** ”。根据 livedocs “body：指定 HTTP 请求的正文。ColdFusion 不会自动设置内容类型标头或 URL 对正文内容进行编码。要指定内容类型，请使用带有 type=header 的单独 cfhttp 标记。”

下面的代码现在返回给我访问令牌:)

```
<cfset client_id = "458381219741.apps.googleusercontent.com">
<cfset client_secret = "**********">
<cfset callback = "http://console.mbwebportal.com/oauth2callback">

<cfset postBody = "code=" & UrlEncodedFormat(url.code) & "&">
<cfset postBody = postBody & "client_id=" & UrlEncodedFormat(client_id) & "&">
<cfset postBody = postBody & "client_secret=" & UrlEncodedFormat(client_secret) & "&">
<cfset postBody = postBody & "redirect_uri=" & UrlEncodedFormat(callback) & "&">
<cfset postBody = postBody & "grant_type=authorization_code">
<cfhttp method="post" url="https://accounts.google.com/o/oauth2/token">
    <cfhttpparam name="Content-Type" type="header" value="application/x-www-form-urlencoded">
    <cfhttpparam type="body" value="#postBody#">
</cfhttp> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T13:16:32.300

在这里找到了一个类似的帖子[Google OAuth 2 authentication-swaping code for token](https://stackoverflow.com/questions/5668664/google-oauth-2-authorization-swapping-code-for-token)。他们的答案是对客户端密钥进行 url 编码并重定向 uri。在 ColdFusion 中，您可以使用该`URLEncodedFormat()`功能为您执行此操作。

```
<cfhttp method="POST" url="http://accounts.google.com/o/oauth2/token" >
    <cfhttpparam type="Formfield" name="code" value="#url.CODE#">
    <cfhttpparam type="Formfield" name="client_id" value="458381219741.apps.googleusercontent.com">
    <cfhttpparam type="Formfield" name="client_secret" value="#URLEncodedFormat(XXXXXXX)#">
    <cfhttpparam type="Formfield" name="redirect_uri" value="#URLEncodedFormat("http://console.mbwebportal.com/oauth2callback")#">
    <cfhttpparam type="Formfield" name="grant_type" value="authorization_code">
</cfhttp> 
```

并且请在使用它之前验证您的`url.CODE`值，因为任何东西都可以在 URL 中传递。

# java - 如何使用自定义令牌实现 GWT PlaceHistoryMapper？

> ID：13288957
> 
> 赞同：4
> 
> 时间：2012-11-08T12:15:42.823
> 
> 标签：java, gwt, gwt-places

我希望我的小型 GWT 应用程序具有以下所有“书签” `Place`：

```
http://www.mywebapp.com                 -->     "home page"
http://www.mywebapp.com/login           -->     login screen
http://www.mywebapp.com/main            -->     main menu, after logged in
http://www.mywebapp.com/start           -->     start of a transactional process
http://www.mywebapp.com/complete        -->     end of transactional process (receipt) 
```

所以我继续创建了 5`Place`个子类，所有这些子类都采用以下形式：

```
public class LoginPlace extends Place {
    // Intentionally left void because I'm not sure
    // what to implement here...
} 
```

并有相应的分词器：

```
public class LoginPlaceTokenizer extends PlaceTokenizer<LoginPlace> {
    @Override
    public LoginPlace getPlace(String token) {
        // ???
    }

    @Override
    public String getToken(LoginPlace place) {
        // ???
    }
} 
```

我正在尝试`PlaceHistoryMapper`为我的应用程序实现一个：

```
@WithTokenizers({
    HomePlaceTokenizer.class,
    LoginPlaceTokenizer.class,
    MainMenuPlaceTokenizer.class
    // etc.
})
public class MyWebAppPlaceHistoryMapper implements PlaceHistoryMapper {
    @Override
    public Place getPlace(String token) {
        // ???
    }

    @Override
    public String getToken(Place place) {
        // ???
    }
} 
```

子类和 in中的伴侣`getPlace`/`getToken`方法似乎在做同样的事情。**他们是吗？**如果是这样，我是否只在它们内部使用相同的代码？如果它们不相同，它们有何不同，我应该如何实施它们？`PlaceTokenizer<T>``MyWebAppPlaceHistoryMapper`

 **请记住我希望在应用程序中作为可收藏位置的 URL 令牌 - 我不想使用 GWT 的默认`someDisplay:SomePlace`令牌。提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T15:12:54.657

您可以使用带有注释的接口`@WithTokenizers`并让 GWT 从 a 生成实现`GWT.create(MyWebAppPlaceHistoryMapper.class)`，或者您`PlaceHistoryMapper`“手动”实现接口并且不需要`PlaceTokenizer`s。

使用`GWT.create()`，GWT 将实现`getPlace`和`getToken`方法，以根据令牌的前缀（使用与 的级联，基于 s 上的注释）或类型（使用与 的级联，基于泛型类型）进行**分派**的s)。`PlaceTokenizer``if…else``prefix.equals(...)``@Prefix``PlaceTokenizer``Place``if…else``instanceof``PlaceTokenizer`**

# shell - 使用 sed 或 grep 替换行中的子字符串

> ID：13288963
> 
> 赞同：2
> 
> 时间：2012-11-08T12:16:01.953
> 
> 标签：shell, sed, grep

我有一个包含很多行的文件，其中两个是：

```
videoId: 'S2Rgr6yuuXQ'

var vid_seq=1; 
```

在 shell 脚本中，我有两个变量，对于 id，值始终是 11 个字符/数字

id='fsafsferii2'

id_seq=80

我想用 id 和 id_seq 修改这两行

```
videoId: 'fsafsferii2'

var vid_seq=80; 
```

我用了

```
sed -i 's/\(videoId: \).*\\1'${id}'/\2' file 
```

但是有错误，我的脚本有什么问题？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T12:33:28.167

该`grep`命令不会“替换”文本，它用于“全局正则表达式打印”。但 sed 会。

```
sed -i'' '/^videoId: /s/: .*/: '"$id"'/;/^var vid_seq=/s/=.*/='"$id_seq"';/' 
```

我不喜欢以这种方式将变量插入到 sed 脚本中，但 sed 很简单，并且没有提供实际使用实际变量的机制。如果要执行此操作，请在运行此 sed 脚本之前对这两个变量进行一些格式检查，以确保它们包含您希望它们包含的数据。变量中的意外`/`将导致 sed 脚本失败。

**更新**每条评论：

这是一个成功的测试：

```
$ id=fsafsferii2
$ id_seq=80
$ cat inp686

videoId: 'S2Rgr6yuuXQ'

var vid_seq=1;

$ sed '/^videoId: /s/: .*/: '"$id"'/;/^var vid_seq=/s/=.*/='"$id_seq"';/' < inp686

videoId: fsafsferii2

var vid_seq=80;

$ 
```

当然，您需要做一些引用魔术才能将单引号放入您的 videoId，但我相信您可以自己弄清楚。

**更新 2**

根据 sed 的手册页，替代命令的格式为：

```
 [2addr]s/regular expression/replacement/flags 
```

这`[2addr]`意味着您最多可以指定两个“地址”，可以是行号或正则表达式来匹配。因此`s`（替代）命令可以采用一行、一个范围、一个匹配项或匹配项之间的跨度。在我们的例子中，我们只是使用一个匹配来确定我们想要在哪些行上执行替换。

上面的脚本由两个 sed 命令组成，用分号分隔。

*   `/^videoId: /`-- 匹配以单词开头的行`videoId:`...
    *   `s/: .*/: '"$id"'/;``$id`-- 用环境变量中的任何内容替换从冒号到行尾的所有文本。
*   `/^var vid_seq=/`-- 匹配线...嗯，如上。
    *   `s/=.*/='"$id_seq"';/`- 用等号替换所有文本`$id_seq`。

请注意，该`'"$id"'`构造意味着我们正在*退出*单引号，然后立即*输入*双引号以扩展变量...然后退出双引号并返回一组新的单引号。Sed 脚本在单引号内是最安全的，因为频繁使用可能被 shell 解释的字符。

还要注意，因为 sed 的替换命令使用正斜杠作为分隔符，`$id`and`$id_seq`变量可能不包含斜杠。如果可能，您可以切换到不同的分隔符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T10:42:53.157

出什么问题了：

```
sed -i 's/\(videoId: \).*\\1'${id}'/\2' file 
```

1.  缺少第三个分隔符 ( `/`)。有效的语法是`s/regex/replace/`
2.  不正确的正则表达式模式（假设`${id}`已被替换）

    ```
    \(videoId: \).*\\1fsafsferii2 
    ```

    告诉它匹配一个看起来像这样的字符串：

    ```
    videoId: anything\1fsafsferii2 
    ```

    （`\\`在正则表达式中匹配文字反斜杠，因此`\\1`将匹配文字反斜杠`1`而不是第一个子表达式）

3.  将匹配的字符串替换为`\2`

    但由于只有一组括号，`\2`实际上是空的。

    此外，由于 2\. 中的正则表达式模式不匹配任何内容，因此没有任何内容被替换。

* * *

这应该有效（GNU sed）

```
sed -i 's/\(videoId: \).*/\1 \x27'${id}'\x27/
        s/\(var vid_seq=\).*/\1'${id_seq}'\;/' file 
```

笔记：

*   `\x27`是单引号的十六进制表示（防止与另一个单引号发生冲突）
*   `\;`对于文字分号。如果`;`未转义，则将其解释为`s`终止`sed`.

# c# - 从模块 DNN 获取页面中所有模块的引用

> ID：13288964
> 
> 赞同：1
> 
> 时间：2012-11-08T12:16:03.513
> 
> 标签：c#, asp.net, module, dotnetnuke

是否可以从一个模块中获取当前页面上所有模块的引用？例如，在单击按钮时，我可以列出页面上加载的所有 DNN 模块的类型，而无需访问数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T15:07:54.550

根据 DNN 的版本，有一些类应用于每个模块，您可以使用这些类来确定每个模块的位置。在较新的版本中，有一个元素将每个模块与类包装在一起，`DnnModule DnnModule-ModuleName DnnModule-2134`其中`ModuleName`是模块的名称，没有任何空格或其他特殊字符，并且`2134`是模块的 ID。

当然，这不会包括页面上但当前用户不可见的任何模块（这可能是您想要的，但仍然值得注意）。

# javascript - 捕获 jqGrid 中下拉菜单的更改/单击事件

> ID：13288967
> 
> 赞同：1
> 
> 时间：2012-11-08T12:16:14.083
> 
> 标签：javascript, jquery, asp.net, jqgrid, jquery-events

我的下拉菜单上的点击事件不会触发。我没有看到警报，并且当我在 Firebug 中添加断点时，它没有到达断点。如果我对它们进行断点，它确实会到达单击和双击事件。

具体来说，当我：

1.  双击编辑一行
2.  选择客户下拉菜单并选择其他内容
3.  移动到另一行

然后这条线

```
alert("I changed"); 
```

不运行。

我想知道是不是因为当我移到另一行时，值会被还原（即使我已经注释掉了该`restoreRow`方法）

我是否使用正确的事件来捕获我的下拉值何时更改（无需更改焦点）。

```
$(document).ready(
    function () {
        // This is executed as soon as the DOM is loaded and before the page contents are loaded
        var lastsel;
        // $ is short for JQuery which is in turn a super overloaded function that does lots of things.
        // # means select an element by its ID name, i.e. below we have <table id="ts"
        $("#ts").jqGrid({
            //=============
            // Grid Setup
            url: 'Timesheet/GridData/',
            datatype: 'json',
            mtype: 'GET',
            pager: $('#pager'),
            rowNum: 30,
            rowList: [10, 20, 30, 40, 80],
            viewrecords: true,
            imgpath: '/Content/themes/base/images',
            caption: 'Timesheet',
            height: 450,
            // Column definition
            colNames: ['hCustomer_ID', 'hProject_ID', 'hTask_ID', 'Date', 'Customer', 'Project', 'Task', 'Description', 'Hours', '$'],
            colModel: [
              { name: 'hCustomer_ID', index: 'hCustomer_ID', editable: false, hidden: true },
              { name: 'hProject_ID', index: 'hProject_ID', editable: false, hidden: true },
              { name: 'hTask_ID', index: 'hTask_ID', editable: false, hidden: true },
              { name: 'tsdate', index: 'tsdate', width: 80, editable: true, datefmt: 'yyyy-mm-dd' },
              { name: 'Customer', index: 'Customer', width: 250, align: 'left', editable: true, edittype: "select",
                  editoptions: { dataUrl: 'Timesheet/CustomerList' },
                  dataEvents: [
                    {
                        type: 'click',
                        fn: function (e) {
                            alert("I changed");
                        }
                    }]
              },
              { name: 'Project', index: 'Project', width: 250, align: 'left', editable: true, edittype: "select", editoptions: { dataUrl: 'Timesheet/ProjectList'} },
              { name: 'Task', index: 'Task', width: 250, align: 'left', editable: true, edittype: "select", editoptions: { dataUrl: 'Timesheet/TaskList'} },
              { name: 'Desc', index: 'Desc', width: 300, align: 'left', editable: true },
              { name: 'Hours', index: 'Hours', width: 50, align: 'left', editable: true },
              { name: 'Charge', index: 'Charge', edittype: 'checkbox', width: 18, align: 'center', editoptions: { value: "0:1" }, formatter: "checkbox", formatoptions: { disabled: false }, editable: true }
            ],
            //=============
            // Grid Events
            // when selecting, undo anything else
            onSelectRow: function (rowid, iRow, iCol, e) {
                if (rowid && rowid !== lastsel) {
                    // $(this).jqGrid('restoreRow', lastsel);
                    lastsel = rowid;
                }
            },
            // double click to edit
            ondblClickRow: function (rowid, iRow, iCol, e) {
                // browser independent stuff
                if (!e) e = window.event;
                var element = e.target || e.srcElement

                // When editing, change the drop down datasources to filter on the current parent
                $(this).jqGrid('setColProp', 'Project', { editoptions: { dataUrl: 'Timesheet/ProjectList?Customer_ID=' + $(this).jqGrid('getCell', rowid, 'hCustomer_ID')} });
                $(this).jqGrid('setColProp', 'Task', { editoptions: { dataUrl: 'Timesheet/TaskList?CustomerProject_ID=' + $(this).jqGrid('getCell', rowid, 'hProject_ID')} });

                // Go into edit mode (automatically moves focus to first field)
                // Use setTimout to apply the focus and datepicker after the first field gets the focus
                $(this).jqGrid(
                    'editRow',
                    rowid,
                    {
                        keys: true,
                        oneditfunc: function (rowId) {
                            setTimeout(function () {
                                $("input, select", element).focus();
                                $("#" + rowId + "_tsdate").datepicker({ dateFormat: 'yy-mm-dd' });
                            }, 50);
                        }
                    }
                );

            },  // end ondblClickRow event handler
            postData:
                {
                    startDate: function () { return $('#startDate').val(); }
                }
        }); // END jQuery("#ts").jqGrid

        $("#ts").jqGrid('navGrid', '#pager', { view: false, edit: false, add: false, del: false, search: false });
        $("#ts").jqGrid('inlineNav', "#pager");

    });                  // END jQuery(document).ready(function () { 
```

修订后的工作规范：

```
$(document).ready(
    function () {
        // This is executed as soon as the DOM is loaded and before the page contents are loaded
        var lastsel;
        // $ is short for JQuery which is in turn a super overloaded function that does lots of things.
        // # means select an element by its ID name, i.e. below we have <table id="ts"
        $("#ts").jqGrid({
            //=============
            // Grid Setup
            url: 'Timesheet/GridData/',
            datatype: 'json',
            mtype: 'GET',
            pager: $('#pager'),
            rowNum: 30,
            rowList: [10, 20, 30, 40, 80],
            viewrecords: true,
            caption: 'Timesheet',
            height: 450,
            // Column definition
            colNames: ['hCustomer_ID', 'hProject_ID', 'hTask_ID', 'Date', 'Customer', 'Project', 'Task', 'Description', 'Hours', '$'],
            colModel: [
              { name: 'hCustomer_ID', index: 'hCustomer_ID', editable: false, hidden: true },
              { name: 'hProject_ID', index: 'hProject_ID', editable: false, hidden: true },
              { name: 'hTask_ID', index: 'hTask_ID', editable: false, hidden: true },
              { name: 'tsdate', index: 'tsdate', width: 80, editable: true, datefmt: 'yyyy-mm-dd' },
              { name: 'Customer', index: 'Customer', width: 250, align: 'left', editable: true, edittype: "select",
                  editoptions: {
                      dataUrl: 'Timesheet/CustomerList',
                      dataEvents: [
                      {
                        type: 'change',
                        fn: function (e) {
                            alert("I changed");
                            }
                      }]
                  }
              },
              { name: 'Project', index: 'Project', width: 250, align: 'left', editable: true, edittype: "select", editoptions: { dataUrl: 'Timesheet/ProjectList'} },
              { name: 'Task', index: 'Task', width: 250, align: 'left', editable: true, edittype: "select", editoptions: { dataUrl: 'Timesheet/TaskList'} },
              { name: 'Desc', index: 'Desc', width: 300, align: 'left', editable: true },
              { name: 'Hours', index: 'Hours', width: 50, align: 'left', editable: true },
              { name: 'Charge', index: 'Charge', edittype: 'checkbox', width: 18, align: 'center', editoptions: { value: "0:1" }, formatter: "checkbox", formatoptions: { disabled: false }, editable: true }
            ],
            //=============
            // Grid Events
            // when selecting, undo anything else
            onSelectRow: function (rowid, iRow, iCol, e) {
                if (rowid && rowid !== lastsel) {
                    // $(this).jqGrid('restoreRow', lastsel);
                    lastsel = rowid;
                }
            },
            // double click to edit
            ondblClickRow: function (rowid, iRow, iCol, e) {
                // browser independent stuff
                if (!e) e = window.event;
                var element = e.target || e.srcElement

                // When editing, change the drop down datasources to filter on the current parent
                $(this).jqGrid('setColProp', 'Project', { editoptions: { dataUrl: 'Timesheet/ProjectList?Customer_ID=' + $(this).jqGrid('getCell', rowid, 'hCustomer_ID')} });
                $(this).jqGrid('setColProp', 'Task', { editoptions: { dataUrl: 'Timesheet/TaskList?CustomerProject_ID=' + $(this).jqGrid('getCell', rowid, 'hProject_ID')} });

                // Go into edit mode (automatically moves focus to first field)
                // Use setTimout to apply the focus and datepicker after the first field gets the focus
                $(this).jqGrid(
                    'editRow',
                    rowid,
                    {
                        keys: true,
                        oneditfunc: function (rowId) {
                            setTimeout(function () {
                                $("input, select", element).focus();
                                $("#" + rowId + "_tsdate").datepicker({ dateFormat: 'yy-mm-dd' });
                            }, 50);
                        }
                    }
                );

            },  // end ondblClickRow event handler
            postData:
                {
                    startDate: function () { return $('#startDate').val(); }
                }
        }); // END jQuery("#ts").jqGrid

        $("#ts").jqGrid('navGrid', '#pager', { view: false, edit: false, add: false, del: false, search: false });
        $("#ts").jqGrid('inlineNav', "#pager");

    });                   // END jQuery(document).ready(function () { 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T12:50:06.797

此外，不清楚为什么你*同时* 使用inside of`inlineNav`和手动调用？如果您选择行然后单击导航器中的按钮，则不会调整。`editRow``ondblClickRow``dataUrl`

您描述的主要问题的原因是错误使用`dataEvents`. [例如，在editoptions](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:common_rules#editoptions)的文档中，您会发现is`dataEvents`的属性。目前您放置在错误的位置。`editoptions``dataUrl``dataEvents``colModel`

我建议您另外阅读[答案，该答案](https://stackoverflow.com/a/8150307/315935)描述了如何`dataUrl`根据当前选定的行使用哪些参数。此外，我建议您验证您是否在（请参阅[答案](https://stackoverflow.com/a/7877286/315935)）`Cache-Control`的响应中设置。或者，您可以使用[此处](https://stackoverflow.com/a/7422410/315935)描述的另一个选项。`dataUrl`

# php - 将大视频从 iphone 上传到网络服务器

> ID：13288969
> 
> 赞同：2
> 
> 时间：2012-11-08T12:16:30.147
> 
> 标签：php, objective-c, ios, video, file-upload

我正在尝试将大型视频从 iphone 上传到具有 php 脚本的网络服务器。

我`NSInputStream`用来获取文件视频块，并且在每次遍历

```
- (void)stream:(NSStream *)stream handleEvent:(NSStreamEvent)eventCode 
```

方法，将读取的数据作为参数传递。

这是我用来获取数据块的代码

```
- (void)stream:(NSStream *)stream handleEvent:(NSStreamEvent)eventCode 
{
switch(eventCode) 
{
    case NSStreamEventHasBytesAvailable:
    {
        NSMutableData *dataSlice;

        uint8_t buf[1048576];
        unsigned int len = 0;
        len = [(NSInputStream *)stream read:buf maxLength:1048576];
        if(len) 
        {
            dataSlice = [NSMutableData dataWithBytes:(const void *)buf length:len];

            NSMutableDictionary* params = [NSMutableDictionary dictionaryWithObjectsAndKeys:folderNameForUpload, kFolderName,
                                           @"abcd.MOV", kFileName,
                                           @"MOV", kFileType,
                                           nil];
            MKNetworkOperation *op = [self.networkEngine operationWithPath:@"upload.php" params:params httpMethod:@"POST"];

            [op addData:dataSlice forKey: @"file"
                             mimeType: @"image/mov"
                             fileName: @"abcd"];

            [op onCompletion:^(MKNetworkOperation *completedOperation) {

            } onError:^(NSError *error) {

            }];

            [[WebRequest sharedInstance].networkEngine enqueueOperation: op];

        }
        else 
        {
            NSLog(@"NO MORE BUFFER!");
        }
        break;
    }

    case NSStreamEventEndEncountered:
    {
        [stream close];
        [stream removeFromRunLoop:[NSRunLoop currentRunLoop]
                          forMode:NSDefaultRunLoopMode];
        [stream release];
        stream = nil;
        break;
    }
}
} 
```

它将数据发送到服务器，我可以将块写入文件。但是，问题是，如果有超过一个块，文件将被损坏，我无法打开视频文件。

我检查了服务器和客户端上的文件大小，两者完全相同。

下面是 php 脚本，我用来合并视频文件块。

```
 $tmp_file = $_FILES['file']['tmp_name'];

        $write_handle = fopen($fileURL, "ab+");
        $read_handle = fopen($tmp_file, "rb");

        $contents = fread($read_handle, filesize($tmp_file));
        fwrite($write_handle, $contents);

        fclose($write_handle);
        fclose($read_handle); 
```

我在这里做错了什么？，请帮忙！

我被这个问题困住了！！

提前致谢，

苏拉杰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T09:25:58.210

伙计们，我自己也遇到了问题。实际上，我同时发送了不同的视频块。问题的出现是因为后面的视频块在第一块视频之前到达服务器。

我通过仅在第一个视频块到达 Web 服务器并且在客户端获得响应后才发送第二个视频块解决了这个问题。

# xslt - XSLT1 选择兄弟的子节点值

> ID：13288977
> 
> 赞同：0
> 
> 时间：2012-11-08T12:17:13.203
> 
> 标签：xslt, xslt-1.0, biztalk, biztalk-mapper

我有一个这样的 XML 文档：

（p 是先前定义的）

```
<p:Players>
<p:Player>
<p:Name>David</p:Name>
<p:Club>
<p:Name>Madrid</p:Name>
</p:Club>
<p:PreviousClubs>
<p:Club><p:Name>Milan</p:Name></p:Club>
<p:Club><p:Name>Manchester</p:Name></p:Club>
</p:PreviousClubs>
</p:Player>
<p:Player>
<p:Name>Alex</p:Name>
<p:Club>
<p:Name>Madrid</p:Name>
</p:Club>
<p:PreviousClubs>
<p:Club><p:Name>Birmingham</p:Name></p:Club>
<p:Club><p:Name>Manchester</p:Name></p:Club>
</p:PreviousClubs>
</p:Player>
<p:Player>
<p:Name>Fred</p:Name>
<p:Club>
<p:Name>Madrid</p:Name>
</p:Club>
<p:PreviousClubs>
<p:Club><p:Name>Milan</p:Name></p:Club>
<p:Club><p:Name>Birmingham</p:Name></p:Club>
</p:PreviousClubs>
</p:Player>
</p:Players> 
```

我想获得以前为给定俱乐部效力过的所有球员的姓名。

这就是我到目前为止所拥有的，但它没有收到任何东西：

```
/*[1]/p:Player[p:PreviousClubs/p:Club/p:Name='Manchester']/p:Name/text() 
```

我希望那会回来

```
David
Alex 
```

但我什么也得不到

有人能看出我哪里出错了吗？

p: 的命名空间及其前缀是正确的 - 已在其他地方使用过并且很好。我觉得我选择特定父节点的逻辑是错误的......

我需要坚持使用 XSLT 1.0 作为其 BizTalk 驱动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T09:26:14.620

这几乎肯定是名称空间的问题。

在您的 XML 中，您使用的是名称空间前缀，但名称空间没有相应的定义。你真的应该在根元素上有一个这样的定义

```
<p:Players xmlns:p="mynamespace"> 
```

然后，在您的 XSLT 中，您还需要确保定义了相同的名称空间 URI。

```
<xsl:stylesheet version="1.0" 
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
    xmlns:p="mynamespace"> 
```

请注意，前缀**p**不必相同。命名空间 URI 是这里的重要标识符。如果 URI 与 XML 中的内容不匹配，那么如果您使用前缀，它将找不到元素。

因此，如果您使用此 XSLT，它应该会按预期返回**David**和**Alex**（尽管如果您需要在此处换行，则需要添加额外的代码）

```
<xsl:stylesheet version="1.0" 
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
    xmlns:p="mynamespace">

    <xsl:template match="/">
       <xsl:apply-templates 
           select="/*[1]/p:Player[p:PreviousClubs/p:Club/p:Name='Manchester']/p:Name/text()" />
    </xsl:template>
</xsl:stylesheet> 
```

这一切都意味着您原来的 XPath 表达式是正确的！`[1]`但是，您可以稍微简化一下，因为一开始不需要。第一个`/`匹配文档元素，因此`/*`将匹配根元素，并且由于在格式良好的 XML 中只能有一个根元素，因此无需使用索引来限定它`[1]`

```
/*/p:Player[p:PreviousClubs/p:Club/p:Name='Manchester']/p:Name/text() 
```

您也可以`text()`在末尾删除 ，因为在这种情况下，内置模板无论如何都会输出元素的文本。

# asp.net-mvc - 设计 ASP .Net MVC 控件的指南

> ID：13288981
> 
> 赞同：1
> 
> 时间：2012-11-08T12:17:23.413
> 
> 标签：asp.net-mvc, asp.net-mvc-3, user-controls

我正在开发一个大型的 ritch（大量客户端 js 代码）网站，我正在考虑突出一组可重用的控件。问题来了：在 MVC 中设计这些控件的最佳方式是什么？是的，我知道 - 有部分观点。但在我看来，这还不够。我想要的是可以在我的应用程序中重用的一流构建块。假设我有一个包含客户数据的控件：

*   姓名
*   姓
*   电子邮件
*   电话

当然我可以开发一个局部视图并重用它，但我还需要其他元素：

1.  模型
2.  验证
3.  检索/更改模型的服务器端调用（对某些应用程序服务器的正确 WCF 调用）
4.  表示逻辑（相同的控件应该能够呈现为静态文本以及允许数据更改的表单）这些元素应该**封装**在一个地方（控件 - 组件 - 程序集）。

我的思维方式合理还是MVC中有更好的设计模式？

米。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T12:42:45.963

编辑器和显示模板是一个很好的做法[http://blogs.msdn.com/b/nunos/archive/2010/02/08/quick-tips-about-asp-net-mvc-editor-templates.aspx](http://blogs.msdn.com/b/nunos/archive/2010/02/08/quick-tips-about-asp-net-mvc-editor-templates.aspx)

# asp.net - ASP.net AutoEventWireup 属性有什么作用？

> ID：13288982
> 
> 赞同：3
> 
> 时间：2012-11-08T12:17:29.793
> 
> 标签：asp.net, autoeventwireup

我来自 ASP 背景并学习 ASP.NET。我想知道 AutoEventWireup 属性是否也连接 Control 事件（如 Button_Click）或只是 Page 事件？我在 SO 的其他地方读到，如果你将它设置为 TRUE 并且还提供显式事件处理程序，它将被执行两次，你能解释为什么会发生这种情况（因为只有 1 个处理程序 VS 必须识别它已经执行）？你能给出将其设置为 False 的用例吗？

希望有代码示例

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T12:33:26.617

通常它设置为 true，这意味着您甚至不需要显式地连接每个。当您想为多个控件/事件使用相同的事件处理程序时，您将其设置为 false。在这种情况下，您可以将多个事件显式连接到单个事件处理程序。它控制所有事件。当您将该属性设置为 true 并显式连接事件时，.Net 将触发该事件两次，因为委托将被注册两次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T12:51:30.617

`AutoEventWireup`在`Page`元素上通过查找与预期签名和命名约定（即`Page_<event>`）匹配的方法来工作。如果找到，页面框架将在正常“引发”事件之前直接调用事件处理程序。这就是为什么如果您在代码中注册事件处理程序，它们会被有效地调用两次。

这与事件处理程序的正常工作方式完全不同。如果您编写代码以两次为同一事件注册处理程序，则每个事件只会调用一次。这是因为事件处理程序本质上是一组委托，并且尝试将委托添加到同一方法是无操作的。

该`AutoEventWireup`行为仅适用于页面引发的事件。您不会为其他控件获得它，因此它们应该手动连接，通常在一个`Page_Init`或`Page_Load`事件中。

如果您不使用`AutoEventWireup`（即设置为“false”），您必须自己连接页面事件处理程序以调用它们。这就是 Visual Studio 设计器所做的，因为它会为您生成事件注册代码。

# c# - parseInt javascript 函数

> ID：13288983
> 
> 赞同：1
> 
> 时间：2012-11-08T12:17:33.757
> 
> 标签：c#, php, javascript

我有一个用于 PHP 项目和 ASP.Net c# 项目的 JavaScript (.js) 文件。

我在 javascript 中有一些语句，例如

```
 var width = data[i].Width - data[i].X; 
```

这条线在我的 c# 项目中按原样工作。但在我的 PHP 项目中，它必须写成

```
 var width = parseInt(data[i].Width) - parseInt(data[i].X); 
```

请注意，数据对象在两个项目中都作为 JSON 结果返回。

有谁知道为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T14:58:27.563

`data[i].Width`也许 C# 会为as生成一个 JSON 响应`"420"`

虽然 PHP 生`data[i].Width`成为`"'420'"`

如果你明白我的意思？

# css - z-index 在 ie7 上无法正常工作，2 个独立元素

> ID：13288986
> 
> 赞同：0
> 
> 时间：2012-11-08T12:17:40.307
> 
> 标签：css, wordpress, internet-explorer-7

我使用 wordpress，以及我自己的 21 主题版本。我有一个网站，其中主标题有一个`z-index:9999`，然后完全独立于我有一个滑块，它有`z-index:1`。滑块完全独立于标题和主要内容页面。然而由于某种原因，当我在 IE7 中使用下拉菜单时，子菜单隐藏在滑块后面。这与子菜单无关，它是整个标题（它只是子菜单是用户看到它被隐藏的地方）

这是标题..

```
#access {

background:transparent;
clear: both;
display: block;
float: left;
margin: 0 0;
width: 980px;
height:70px;
position:relative;
z-index:99999; 
```

}

这是滑块，

```
#top-slider {
width:1920px;
position:absolute;
margin-top:70px;
height:300px;
margin-left:auto;
margin-right:auto;
overflow:hidden;
left:0px;
background: #000;
z-index:1;
} 
```

我相信这是导致问题的唯一两个元素，因为当我删除`z-index:1`from时`top-slider`，可以看到标题很好，但我不能这样做的唯一原因是因为滑块开始隐藏在主页后面。

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T19:58:00.593

Take a look at this writeup ([https://stackoverflow.com/a/3998006/859324](https://stackoverflow.com/a/3998006/859324)) and see if it helps. It mentions specific problems in older versions of IE and how siblings compared z-index values. So maybe the #top-slider div is comparing its z-index to the #page div, instead of #access.

Another similar issue I found mentioned changing the z-index of #top-slider to -1 instead of 1, though I can't say I sufficiently know all the ramifications of doing so.

# language-agnostic - 通过查找特定于语言的字符来确定字符串的字母表

> ID：13288988
> 
> 赞同：0
> 
> 时间：2012-11-08T12:17:42.883
> 
> 标签：language-agnostic

[（这与如何检测字符串的语言](https://stackoverflow.com/questions/1192768/return-the-language-of-a-given-string)不重复？ ）

我需要能够通过语言/字母特定字符来确定给定字符串（单个单词）的字母表。例如，如果字符串包含：

*   'Ü' 应该被识别为德语，
*   'ش' 为阿拉伯语，
*   'Φ' 作为希腊语等

我正在寻找按语言/字母列出的特定于字母的字符列表。由于使用 GoogleTranslate API 或其他基于字典的解决方案的单个非字典单词将不起作用

（虽然问题不是特定于编程语言，但实际代码是用 C# 编写的）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T12:34:03.713

您可以从每个字符的 unicode 名称开始。例如（在 Python 中）：

```
>>> import unicodedata
>>> unicodedata.name(u'Φ')
'GREEK CAPITAL LETTER PHI'
>>> unicodedata.name(u'ش')
'ARABIC LETTER SHEEN'
>>> unicodedata.name(u'Ü')
'LATIN CAPITAL LETTER U WITH DIAERESIS' 
```

您可能必须对拉丁字符进行特殊处理，因为 Unicode 不会将它们分配给特定语言的字母表。它们中的大多数出现在几种使用基于拉丁字母的语言中，但如果您确信您的数据仅在它是德语时才包含 Ü，那么您可以出于您的目的将该字符识别为德语。只有几十个拉丁字符需要担心。

同样，大量语言使用 Unicode`CYRILLIC`字母，因此在大多数情况下，它们的存在并不能告诉您语言。有些被 Unicode 描述为属于特定语言。[在http://www.unicode.org/charts/PDF/U0400.pdf](http://www.unicode.org/charts/PDF/U0400.pdf)`CYRILLIC SMALL LETTER YI`中有注释“乌克兰语” 。我不知道这些注释是否详尽，即乌克兰语是否是*唯一*使用该字符的语言。而且我敢肯定，有很多乌克兰语单词中没有那个字符。从根本上说，您不能仅仅通过乌克兰语特定字母的存在与否来区分乌克兰语单词和俄语单词。

 *我希望 Unicode 中的其他字母也是如此。如果您真的很幸运，您可能会找到一个 Unicode 数据库，其中包含每个字符的任何此类注释，因此您可以挖掘它以提及特定语言。*

# android - 如何在 ActionBar 图标上获取文本？

> ID：13288989
> 
> 赞同：42
> 
> 时间：2012-11-08T12:17:46.003
> 
> 标签：android, android-actionbar, actionbarsherlock

我想要这样的东西：

![在此处输入图像描述](../Images/ba1f8cff9fb7f26c63d652ba0dc728bb.png)

第三个图标用于通知，现在只是一个 png 图像。是否有可能做某事，以便我可以更改文本/数字，即..，03 以编程方式显示实际的通知数量。

谢谢你

* * *

## 回答 #1

> 赞同：125
> 
> 时间：2013-05-20T11:08:34.793

这是一些对我有用的示例代码。

1：为您的徽章菜单项创建布局。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="48dp"
    android:layout_height="fill_parent"
    android:layout_gravity="right" >

    <!-- Menu Item Image -->
    <ImageView
        android:layout_width="48dp"
        android:layout_height="fill_parent"
        android:clickable="true"
        android:src="@drawable/bkg_actionbar_notify_off" />

    <!-- Badge Count -->    
    <TextView
        android:id="@+id/actionbar_notifcation_textview"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:padding="@dimen/padding_small"
        android:text="99"
        android:textColor="@color/holo_orange_dark" />

</RelativeLayout> 
```

2：在res/menu中创建一个菜单项并将actionLayout设置为你的布局

```
<menu xmlns:android="http://schemas.android.com/apk/res/android" >
    <item
        android:id="@+id/badge"
        android:actionLayout="@layout/actionbar_badge_layout"
        android:icon="@drawable/icn_menu_posts"
        android:showAsAction="always">
    </item>
</menu> 
```

3：然后在你的活动或片段的 onCreateOptionsMenu 中你可以做这样的事情......

```
public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
    inflater.inflate(R.menu.badge, menu);

    RelativeLayout badgeLayout = (RelativeLayout) menu.findItem(R.id.badge).getActionView();
    TextView tv = (TextView) badgeLayout.findViewById(R.id.actionbar_notifcation_textview);
    tv.setText("12");
} 
```

注意：如果您想稍后更改徽章计数，您可以存储对传递给 onCreateOptionsMenu 的 Menu 对象的引用，并使用相同的代码来获取所需的视图并设置一个值。

=== ApCompat 警告 ============================================== =====

如果使用 AppCompatActivity，那么您必须将 actionView 设置为`onCreateOptionsMenu`

```
 @Override
 public boolean onCreateOptionsMenu(Menu menu) {
      getMenuInflater().inflate(R.menu.main_menu, menu);
      MenuItem item = menu.findItem(R.id.badge);
      MenuItemCompat.setActionView(item, R.layout.actionbar_badge_layout);
      RelativeLayout notifCount = (RelativeLayout) MenuItemCompat.getActionView(item);

    TextView tv = (TextView) notifCount.findViewById(R.id.actionbar_notifcation_textview);
    tv.setText("12");

    return super.onCreateOptionsMenu(menu); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-08T12:23:42.677

一种选择是为此创建自己的操作视图。`android:actionLayout`在 XML 和Java 中使用`getActionView()`膨胀后操纵它。您的操作视图将是`ImageView`（用于图标）和...用于徽章的东西。我怀疑您会发现尝试通过文本制作该徽章会很困难，并且最好使用一堆徽章图像为您提供更好的服务，其中一个您可以在图标顶部分层（例如，通过`RelativeLayout`or `FrameLayout`，或通过包装a `LayerListDrawable`)中的图标。

另一种选择是简单地拥有 N 个版本的 icon+badge，也许包装在 a`LevelListDrawable`中，您可以在运行时从中选择。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-03T07:19:24.860

不得不对 domji84 的答案进行一些更改。由于某种原因，单击 imageview 没有调用 click 事件，它在从图像视图中删除 clicklabe = "true" 后可以找到。

menu_item_cart.xml

```
 <!-- Menu Item Image -->
    <ImageView
        android:layout_width="30dp"
        android:layout_height="wrap_content"
        android:src="@mipmap/ic_launcher" />

    <!-- Badge Count -->
    <TextView
        android:id="@+id/cartCountTextView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:padding="5dp"
        android:layout_marginTop="5dp"
        android:text="99"
        android:textColor="@android:color/white"
        android:textStyle="bold"/>

</RelativeLayout> 
```

menu_main.xml

```
<menu xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    tools:context=".MainActivity">
    <item
        android:id="@+id/action_settings"
        android:title="@string/action_settings"
        android:orderInCategory="100"
        app:showAsAction="never" />

    <item
        android:id="@+id/action_cart"
        android:title="test"
        app:actionLayout="@layout/menu_item_cart_count"
        app:showAsAction="always">
    </item>
</menu> 
```

活动代码

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.menu_main, menu);
    menu.findItem(R.id.action_cart).getActionView().setOnClickListener(this);
    return true;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T12:56:06.173

在这里您可以使用带有默认操作栏的自定义操作栏...首先通过xml或java准备布局。然后使用显示矩阵并获取窗口管理器。之后膨胀布局。像这样

```
 DisplayMetrics dm = new DisplayMetrics();
    getWindowManager().getDefaultDisplay().getMetrics(dm);
    ActionBar ab = getSupportActionBar();
    View mactionbar = getLayoutInflater().inflate(R.layout.main2, null); 
```

# php - php正则表达式删除字符串中不需要的空间

> ID：13288990
> 
> 赞同：0
> 
> 时间：2012-11-08T12:17:48.713
> 
> 标签：php, regex, space

我有一长串代码：

```
BR 1111
BR 2222
一氧化碳 3333

```

我需要从它们中删除空间，以便它们结束：

```
BR1111
BR2222
二氧化碳3333

```

我试过这个无济于事：

```
preg_replace('/(\D{2})\s(\d{4})') 
```

有任何想法吗？谢谢！

太感谢了。我正在尝试添加一个带有表单文本区域的 HTML 页面，以添加要清理的这些代码的列表：

```
<form name="f" action="clean.php" method="POST"> <textarea cols="70" rows="7" name="str" > <?php echo $str; ?> </textarea> <br /> <input type="submit" value=" Code Cleaner " style="font-size:18px; color:#ff0000;"> </form> 
```

我究竟做错了什么？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T12:27:12.893

这应该这样做：

```
$string = preg_replace('/([A-Z]{2})\s*([0-9]+)/','$1$2',$string); 
```

用 测试`BR 1111 BR 2222 CO 3333`，它返回`'BR1111 BR2222 CO3333'` 或者，如果该列表恰好是一个简单的 csv 或 txt 文件，您可以使用以下 Vim 命令：

```
:%s/\([A-Z]\+\)\s*/\1/g 
```

`c`如果您不确定，只需在末尾添加一个标志，并希望在替换之前查看每场比赛：

```
:%s/\([A-Z]\+\)\s*/\1/gc 
```

按`y`确认，并替换（删除空格），`n`跳过

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T12:27:26.753

正则表达式`/([A-Z]{2})\s+(\d{4})/`应该可以正常工作：

基本上 - 来自 AZ 的两个字母，后跟 1 到无限空格，后跟 4 位数字。

```
preg_replace("/([A-Z]{2})\s+(\d{4})/", "$1$2", $string); 
```

如果你只是想删除所有空格，`str_replace(" ", "", $string)`或者一个正则表达式`/ +/`就可以了：

```
str_replace(" ", "", $string); 
```

或者

```
preg_replace("/ +/", "", $string); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T12:44:05.983

如果您只需要删除空格字符，那么您有两种选择：

1.  正则表达式：

    ```
    $s = preg_replace("/ /", "", $s); 
    ```

2.  非正则表达式：

    ```
    $s = str_replace(" ", "", $s); 
    ```

但是，如果您需要删除两个非数字字符和 4 位数字之间的空格，请使用：

```
$s = preg_replace("/(?<=\D{2}) (?=\d{4})/", "", $s); 
```

# html - CSS - IE 问题中的填充？

> ID：13288991
> 
> 赞同：0
> 
> 时间：2012-11-08T12:17:51.507
> 
> 标签：html, css, internet-explorer, padding

我在一些填充的宽度上遇到了麻烦。在 Chrome/Firefox 中，它看起来与在 Internet Explorer 中不同。在 Internet Explorer 中，它要大得多。它是

```
.menu ul li{
    display:inline;
    padding-right:60px;
    margin:0;
} 
```

为什么？

```
.menu{
    background-color:#000;
    height:35px;
    padding-top:15px;
    color:#fff;
    font-size:18px;
}

.menu ul{
    padding:0; 
    margin:0;
    list-style-type:none;
}

.menu ul li{
    display:inline;
    padding-right:60px;
    margin:0;
}

.menu a:link{
    color:#fff;
}

.menu a:active{
    color:#fff;
}

.menu a:hover{
    color:#fff;
}

.menu a:visited{
    color:#fff;
} 
```

我真的希望有人可以提供帮助:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T12:22:57.410

IE 将填充计算为高度/宽度的一部分，其他浏览器将其解释为高度/宽度加上填充。所以尽量只给出高度/宽度或填充/边距。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T15:01:43.003

如果你想统一 ie 的盒子模型和其他浏览器的盒子模型，你总是可以使用 box-sizing CSS3 属性。旧版本的 ie 不支持它，所以最好在 chrome、ff 等中使用边框框，而不是使用 ie 的内容框。进一步阅读看这里 - [http://www.css3.info/preview/box-sizing/](http://www.css3.info/preview/box-sizing/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T12:20:12.143

因为即使您设置了字体样式，不同的浏览器也具有不同的字体样式。同样，即具有不同的正面尺寸。所以你可以为IE编写代码。

这里的链接可以帮助如何在 ie 中指定特定的 css。

[http://css-tricks.com/how-to-create-an-ie-only-stylesheet/](http://css-tricks.com/how-to-create-an-ie-only-stylesheet/)

# android - 在 Android 应用中使用 WCF 服务

> ID：13288993
> 
> 赞同：1
> 
> 时间：2012-11-08T12:17:59.887
> 
> 标签：android, wcf, web-services, networking

我正在尝试在 Android 中使用我的以下 WCF Web 服务

这是我的代码

**服务**

**登录服务**

```
 [ServiceContract]
    public interface ILoginService
    {
        [OperationContract]
        bool LoginUser(string uname, string password);
    } 
```

**登录服务.svc.cs**

```
 public class LoginService : ILoginService
    {
        public bool LoginUser(string uname, string password)
        {
            if (uname == password)
                return true;
            else
                return false;
        }
    } 
```

和**web.config**

```
<?xml version="1.0"?>
<configuration>

  <appSettings>
    <add key="aspnet:UseTaskFriendlySynchronizationContext" value="true" />
  </appSettings>
  <system.web>
    <compilation debug="true" targetFramework="4.5" />
    <httpRuntime targetFramework="4.5"/>
  </system.web>
  <system.serviceModel>

      <services>
        <service name="LoginService.LoginService">
          <endpoint binding="basicHttpBinding" contract="LoginService.ILoginService" ></endpoint>  
      </service>
      </services>

      <behaviors>
      <serviceBehaviors>
        <behavior>

          <serviceMetadata httpGetEnabled="true" httpsGetEnabled="true"/>
          <serviceDebug includeExceptionDetailInFaults="false"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
     <serviceHostingEnvironment aspNetCompatibilityEnabled="true" multipleSiteBindingsEnabled="true" />
  </system.serviceModel>

  <system.webServer>
    <defaultDocument>
       <files>
        <clear />
        <add value="LoginService.svc" />
      </files>
    </defaultDocument>
    <modules runAllManagedModulesForAllRequests="true"/>
    <directoryBrowse enabled="true"/>
   <handlers>
      <add name="svc-ISAPI-2.0" path="*.svc" verb="*" modules="IsapiModule" scriptProcessor="C:\Windows\Microsoft.NET\Framework\v4.0.30319\aspnet_isapi.dll" resourceType="File" preCondition="classicMode,runtimeVersionv4.0,bitness32"/>
      <add name="svc-Integrated" path="*.svc" verb="*" type="System.ServiceModel.Activation.HttpHandler" resourceType="File" preCondition="integratedMode"/>
    </handlers>
  </system.webServer>

</configuration> 
```

我在 IIS 上托管了这项服务，并且在 dotnet 应用程序中运行良好。我用于访问此服务的 android 代码是

```
 private void callServiceMethod() throws IOException, XmlPullParserException 
     {
        String NAMESPACE = "http://tempuri.org/";
        String METHOD_NAME = "LoginUser";
        String SOAP_ACTION = "http://tempuri.org/LoginUser";
        String URL = "http://192.168.16.61/LoginService/LoginService.svc";

        SoapObject Request = new SoapObject(NAMESPACE, METHOD_NAME);

        PropertyInfo pi = new PropertyInfo();
        pi.setName("uname");
        pi.setValue("jayant");
        pi.setType(String.class);

        Request.addProperty(pi);

        PropertyInfo pi2 = new PropertyInfo();
        pi2.setName("password");
        pi2.setValue("jayant");
        pi2.setType(String.class);
        Request.addProperty(pi2);

        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
        envelope.dotNet = true;
        envelope.setOutputSoapObject(Request);
        AndroidHttpTransport androidHttpTransport = new AndroidHttpTransport(URL);
        androidHttpTransport.call(SOAP_ACTION, envelope);
        SoapObject response = (SoapObject)envelope.getResponse();
        Result =  Boolean.parseBoolean(response.getProperty(0).toString()) ;
    } 
```

运行此代码时，我的程序出现异常：**XmlpullParserException : End tag expected**

请告诉我我在哪里做错了？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T12:48:21.760

试试这个

```
public InputStream getResponse(String url,String params)
{
    InputStream is = null;
    try
    {

        HttpPost request = new HttpPost(url);
        request.setHeader("Accept", "application/xml");
        request.setHeader("Content-type", "application/xml");
        StringEntity entity = new StringEntity(params.toString());
        request.setEntity(entity);
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpResponse response = httpClient.execute(request);

        String ss1=EntityUtils.toString(response.getEntity());

        Log.v("log", ss1);

        is = new ByteArrayInputStream(ss1.getBytes("UTF-8"));
    }
    catch (Exception e)
    {
        e.printStackTrace();
    }

    return is;
} 
```

传递 url http:XXXXXXXXX/LoginService/LoginService.svc/LoginUser 和 params 是 XML 正文作为字符串并在你的 XML 解析中传递 inputStream

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T13:14:20.173

您需要为您的操作合同指定一些属性。尝试这样的事情：

```
 [OperationContract()]
[XmlSerializerFormat(Style = OperationFormatStyle.Document, Use = OperationFormatUse.Literal)]
[WebInvoke(BodyStyle = WebMessageBodyStyle.Wrapped, Method = "POST", RequestFormat = WebMessageFormat.Xml, ResponseFormat = WebMessageFormat.Xml, UriTemplate = "/LoginUser?uname={username}&password={password})]
bool LoginUser(string uname, string password); 
```

确保您不使用`WebMessageBodyStyle.Bare`，因为这会在您的 XML 中添加不必要的文本。

还可以考虑将 JSON 与 WCF 服务一起使用，因为 JSON 更轻量并且内置于 Android。[JSON 主页](http://www.json.org/)除了在 .NET 4+ 中添加 JSON 功能非常容易。

# java - 如何更改 Google Java 电子表格 API 中 cellEntry 的文本背景颜色？

> ID：13288994
> 
> 赞同：4
> 
> 时间：2012-11-08T12:18:02.547
> 
> 标签：java, google-api

我目前正在通过 Java 电子表格 API 对我的电子表格进行一些操作，但我在文档中找不到（[https://developers.google.com/google-apps/spreadsheets/#working_with_cell-based_feeds](https://developers.google.com/google-apps/spreadsheets/#working_with_cell-based_feeds)）如何设置文本背景颜色

代码：

```
 Map<Long, Integer> categoryStatisticsMap = populateSheetWithCategoryStatistics(statsHolder);
        URL cellFeedUrl = worksheet.getCellFeedUrl();
        CellFeed cellFeed = service.getFeed(cellFeedUrl, CellFeed.class);
        for (Map.Entry<Long, Integer> entry : leadToCellMap.entrySet()) {
            CellEntry cellEntry= new CellEntry(entry.getValue(), currentColumn, ""+categoryStatisticsMap.get(entry.getKey()));
            //cellEntry.whereIsTheMethodForSettingTheColorAndOtherStuffLikeBorders
            cellFeed.insert(cellEntry);
         } 
```

我猜你没有在 cellEntry 上设置它......你能指出我正确的方向吗？

# asp.net - 生产 IEnumerable

> ID：13288997
> 
> 赞同：0
> 
> 时间：2012-11-08T12:18:25.103
> 
> 标签：asp.net, linq

我已将我的表“tblFile”添加到我的 .dbml 中，但它的类型是“EntitySet tblFiles

但是对于具有相同关联的另一个表，它的类型是“tblDocTranstoCon”所以我在下面的 linq 查询中遇到问题“w”不是 IEnumerable 但“z”是“IEnumerable”

```
z = document.tblTransmittalls.Select(dp => dp.tblDocTranstoCons),
w = document.tblTransmittalls.Select(dx => dx.tblFiles) 
```

我如何解决这个问题以产生 IEnumerable。

```
[Association(Name="tblTransmittall_tblFile", Storage="_tblFiles", ThisKey="DocID,TransId", OtherKey="DocId,TransId")]
public EntitySet<tblFile> tblFiles
{
    get
    {
        return this._tblFiles;
    }
    set
    {
        this._tblFiles.Assign(value);
    }
}

[Association(Name="tblTransmittall_tblDocTranstoCon", Storage="_tblDocTranstoCons", ThisKey="DocID,TransId", OtherKey="Docid,Transid", IsUnique=true, IsForeignKey=false)]
public tblDocTranstoCon tblDocTranstoCons
{
    get
    {
        return this._tblDocTranstoCons.Entity;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T12:24:04.210

你应该试试这个

```
w = document.tblTransmittalls.SelectMany(dx => dx.tblFiles); 
```

因为`tblFiles`有返回类型`EntitySet<tblFile>`（这是一个集合）而`tblDocTranstoCons`有返回类型`tblDocTranstoCon`

或者您应该在 dbml 设计器中更改其关联。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T12:24:19.447

这看起来像是一项工作，`SelectMany`它需要一个函数，该函数从列表中的每个项目中获取一个“子列表”，然后将所有子列表连接到一个列表中（因为`EntitySet<T>`implements `IEnumerable<T>`）。尝试：

```
w = document.tblTransmittalls.SelectMany(dx => dx.tblFiles) 
```

# javascript - 通过 URL 加载覆盖

> ID：13288998
> 
> 赞同：0
> 
> 时间：2012-11-08T12:18:35.040
> 
> 标签：javascript, jquery

以下在以前的项目中运行良好，但在当前项目中却不是。还有另一种通过 URL 加载覆盖的方法吗？

例子：

www.url.com/terms 和覆盖下降。

```
 url = window.location.href;

        if (url.indexOf('terms') == url.length -5)
            {
                overlay.fadeIn(400, function(){
                    box.fadeIn(t500);
                });
            } 
```