# StackOverflow 问答 12875000-12875999

# tomcat7 - 如何指定tomcat临时文件夹的位置？

> ID：12875000
> 
> 赞同：8
> 
> 时间：2012-10-13T17:08:51.467
> 
> 标签：tomcat7

当我启动嵌入式 tomcat 时，它会创建一个文件夹名称“tomcat”。+ myportnumber 例如：`tomcat.8080`. 如何指定此临时文件夹的位置。我正在使用 maven，所以我希望这个文件夹在`target`文件夹中，这样它就会被`mvn clean`命令清理干净。

我正在使用嵌入式 tomcat 版本 7.0.26

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-18T20:07:00.273

使用[public void setBaseDir(String basedir)](http://tomcat.apache.org/tomcat-7.0-doc/api/org/apache/catalina/startup/Tomcat.html#setBaseDir%28java.lang.String%29)方法。

> “Tomcat 需要一个存放临时文件的目录。这应该是第一个调用的方法。默认情况下，如果不调用此方法，我们使用： - 系统属性 - catalina.base, catalina.home - $HOME/tomcat.$PORT 。 ..”

```
import org.apache.catalina.startup.Tomcat;

Tomcat tomcat = new Tomcat();
tomcat.setBaseDir("/mytmpfolder");
tomcat.addWebapp("/mywebapp", "/path/to/mywebapp");
tomcat.start();
tomcat.getServer().await(); 
```

# clojure - 循环中的多个 when 参数

> ID：12875003
> 
> 赞同：0
> 
> 时间：2012-10-13T17:09:07.247
> 
> 标签：clojure

我正在尝试制作一个包含多个 when 的 continue 循环。我目前拥有的是这样的：

```
(defn test [n]
(loop [x n]
    (when (> x 1)
        (println x))

    (when (even? x)
        (recur (- x 1))
        (println x))
    (when (odd? x)
        (recur (+ x 2))
        (println x))
) 
```

)

有没有办法在clojure中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T19:36:16.570

您的代码不正确。它将进入无限循环，因为一个数字要么是偶数要么是奇数，所以每次迭代`recur`都会被调用。此外，您到底想做什么也不清楚。如果你解释你的问题，就有可能给出更明确的答案。

你必须先定义一个退出条件——你希望这个函数返回什么？`recur`然后你必须以这样一种方式构造你的循环，当满足退出条件时它不会调用。在这种情况下，函数最终会返回一些东西。

`loop`也很有可能你可以做你想做的事，甚至不需要使用像和这样的低级原语，使用像和（或宏）这样的`recur`标准函数。`map``filter``reduce``for`

# javascript - 激活后更改链接的目标

> ID：12875004
> 
> 赞同：0
> 
> 时间：2012-10-13T17:09:08.987
> 
> 标签：javascript, html, css

不知道我在找什么，但我想知道是否有办法在链接激活时更改链接的名称以及它的目的地。一种切换。

下面是一个样机。

![在此处输入图像描述](../Images/63e28923c44971c4e9f3f7f9bfd27754.png)

只会显示一个按钮。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T17:26:41.837

根据 url，您可以更改链接文本和 href。

```
var a = document.getElementById('linkId');
if(location.href == abouturl){
 a.href = blogurl;
 a.innerHTML = 'BLOG'
}
else{
   a.href = abouturl;
   a.innerHTML= 'ABOUT';
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T17:31:41.757

使用 jQuery。

```
var linkObj = $("#linkId");
if(location.href == aboutUrl){
  linkObj.attr("href", blogurl).html("BLOG");
}
else{
  linkObj.attr("href", abouturl).html("ABOUT");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T20:13:10.543

我设法用 CSS 解决了这个问题

```
.collection-506d943d84aead5098d63cc2 
#main-navigation 
.blog-collection {
  display:none;
}

.collection-506daf5a84aead5098d68b94 
#main-navigation 
.page-collection {
  display: none;
} 
```

# sml - 反转 'a list list -> 'b list list 但获取模式匹配并不详尽

> ID：12875006
> 
> 赞同：0
> 
> 时间：2012-10-13T17:09:21.800
> 
> 标签：sml

这个任务来自`Induction to Programming using sml 5.14`

这是我的代码，但我得到这个消息模式匹配在基本情况下并不详尽..

```
fun revrev [] = [[], []]
  | revrev [x::xs,y::ys] = revrev[ys@[y], xs @ [x]];

val test1revrev = revrev [[1, 2],[3, 4, 5]];

From valtest1 I want the output [[5, 4, 3], [2, 1]] 
```

我不明白为什么我的功能不起作用，也许需要一点洞察力。

例如，这有效...

```
fun rev [] = []
  | rev (x::xs) = rev1 xs @ [x];

val test1rev = rev [1, 2, 3];
I get [3, 2, 1] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T18:18:09.810

模式匹配并不详尽，因为您只匹配空列表或具有两个元素的列表。

我认为练习的目的是在之前介绍`revrev`的基础上实施。`rev`这里有一些提示：

*   基本情况是空列表。您只需返回一个空列表。
*   归纳案例匹配一个非空列表`x::xs`。与 的实现类似`rev`，您可以在最后调用`revrev`并`xs`放置一个转换`x`。这时候你需要使用`rev`这样，`x`它本身也被反转了。

**编辑：**

您的功能在一般情况下不起作用。我的意思是以下骨架：

```
fun revrev [] = []
  | revrev (x::xs) = ... 
```

where`x`也是一个列表。由于这个函数和 很相似`rev`，所以希望大家可以`...`自己填写。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T04:32:54.820

终于解决了......放弃了，因为它“看起来”很先进，但是当代码实际上变得简单到可以理解时。再次感谢。

```
fun rev [] = []
  | rev (x::xs) = rev xs @ [x];

val test1rev1 = rev [1, 2, 3] = [3, 2, 1];

fun revrev [] = [] 
  | revrev (x::xs) = revrev xs @ [rev x];

val test1revop = revop [[1, 2], [3, 4, 5]] = [[5, 4, 3], [2, 1]]; 
```

# ruby-on-rails-3 - 带有 twitter 引导程序的面包屑_on_rails

> ID：12875007
> 
> 赞同：0
> 
> 时间：2012-10-13T17:09:28.437
> 
> 标签：ruby-on-rails-3, twitter-bootstrap, breadcrumbs

我正在使用带有 bootstrap 2 的 breadcrumbs_on_rails 2.2.0。我很困惑。它并没有真正创建面包屑。它只是创建第一级链接。换句话说，当我导航时，它不会向堆栈添加新的面包屑。

我在应用程序控制器中设置默认面包屑

```
 before_filter :set_initial_breadcrumbs
  def set_initial_breadcrumbs
       add_breadcrumb 'cPanel', :controlpanel_path
  end 
```

在控制器中，我在每个动作中创建面包屑......类似于：

```
 def show
      @model = Model.find(params[:id])
      add_breadcrumb "View Model", model_path(@model)
  end

 def edit
      @model = Model.find(params[:id])
      add_breadcrumb "Edit Model", edit_model_path(@model)
 end 
```

如果我导航到显示页面，然后从那里单击编辑链接......面包屑只显示默认面包屑（返回到 cPanel）和“编辑模型”面包屑（我的当前页面）。但是，“Show Model”面包屑（我的面包屑路径起源）不存在。

这个 gem 似乎很容易设置和配置。但是，我显然遗漏了一些东西。我确实注意到大约 5 个月前的一个问题，声称 breadcrumbs_on_rails 与引导程序（add_breadcrumb 和 render_breadcrumb）有一些冲突的方法名称。我做了一些挖掘，只能确定引导程序为面包屑提供样式，但没有生成它们的方法。

感谢帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-25T22:09:39.073

这个要点可能会对您有所帮助（由 Riyad Preukschas 创建）

[https://gist.github.com/riyad/1933884](https://gist.github.com/riyad/1933884)

# forms - 使用 R 向量填充 HTML 下拉框

> ID：12875012
> 
> 赞同：1
> 
> 时间：2012-10-13T17:10:03.130
> 
> 标签：forms, r, r-rook-package

我正在玩`Rook`并`googleVis`试图制作一些交互式图表

我目前有一个 HTML 文本框，用户可以在其中输入日期以触发更改

```
res <- Rook::Response$new()
res$write('<input type="text" name="theDate">') 
```

我想用组合框替换它

```
res$write('<input type="dropdown" name="theDate">') 
```

由与此类似的 R 向量填充

```
displayDates <- c("12 Mar 1980" ,"19 Mar 1980") 
```

自从我做任何这些 HTML 东西以来已经有十年了，而且我也刚刚开始`Rook`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T19:25:12.077

也许是这样的：

```
library(Rook)
dates <- c("12 Mar 1980" ,"19 Mar 1980")

app <- function(env){
    req <- Rook::Request$new(env)
    res <- Rook::Response$new()
    res$write('<select>')
    res$write(paste("<option>", dates , "</option>"))
    res$write('</select>')
    res$finish()
}

s <- Rhttpd$new()
s$launch(name="myapp", app=app) 
```

# c++ - 从 Visual Studio 解决方案生成 Make 文件（用于 GCC）

> ID：12875013
> 
> 赞同：19
> 
> 时间：2012-10-13T17:10:07.247
> 
> 标签：c++, linux, visual-studio, gcc, makefile

我想在 Linux 中使用 GCC 编译我的**Visual Studio 解决方案**和三个项目。该解决方案包含两个**DLL 项目**和一个使用这些 DLL 的**应用程序 (.EXE) 项目。**源代码不包含任何 Windows 依赖项。

如何将解决方案（包含 3 个项目）转换为可以使用**GCC**在 Linux 中编译的文件。

是否有任何工具可以将 Visual Studio 解决方案（项目）转换为文件/s。

Visual Studio 版本是**Visual Studio 2008**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-14T17:29:53.397

也许这可以帮助你，但你需要处理原始代码中的输出

做到这一点

[http://code.google.com/p/make-it-so/](http://code.google.com/p/make-it-so/)

或 sln2mak

[http://www.codeproject.com/Articles/28908/Tool-for-Converting-VC-2005-Project-to-Linux-Makef](http://www.codeproject.com/Articles/28908/Tool-for-Converting-VC-2005-Project-to-Linux-Makef)

我希望这可以帮助你

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-12-18T11:33:39.447

您可以使用[vcproj2cmake](http://sourceforge.net/projects/vcproj2cmake/)或[vcxproj2cmake](https://github.com/envi/vcxproj2cmake)。此处已经列出了更多工具： [How to support both vcxproj to cmake on a project?](https://stackoverflow.com/questions/6649606/vcxproj-to-cmake/9387350#9387350)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T07:24:52.640

首先，Linux 没有 DLL，它具有可以动态链接的共享对象，具有不同的语义。阅读 Levine 的[Linkers & Loaders](http://www.iecc.com/linker/)书了解更多信息，以及[Program Library Howto](http://tldp.org/HOWTO/Program-Library-HOWTO/)和 Drepper 的[*How to write shared libraries*](https://www.akkadia.org/drepper/dsohowto.pdf)。对于 C++，请注意[名称修改](https://en.wikipedia.org/wiki/Name_mangling)，另请参阅[C++ dlopen mini-howto](https://www.tldp.org/HOWTO/C++-dlopen/index.html)。

然后，我认为您不应该尝试将您的 VS 项目转换为`Makefile`.，您应该自己编写一个好的代码`Makefile`。

不要忘记设置你的`Makefile`以便`-Wall`传递给 GCC（也许还有`-std=gnu99`，`-g`如果你想要调试信息，可能通过`CFLAGS`或`CXXFLAGS`）。

除非您的程序是一百万行代码的应用程序，否则您编写自己的`Makefile`. 我强烈建议学习使用[GNU make](http://www.gnu.org/software/make/)并阅读它的文档，这在我看来写得很好（带有一些教程部分）。您可能会看一下它的输出，`make -p`它提供了 GNU 的“内置知识” `make`。

您还可以查看现有的免费软件 Linux 应用程序并研究它们的`Makefile`.

顺便说一句，如果您很难调试您的 makefile，请使用[remake](http://bashdb.sourceforge.net/remake/)。

不要考虑“将我的应用程序转换为 Linux”，而是更多地考虑“编写 Linux 应用程序”。

请注意，存在一些框架（特别是 Qt）来开发可移植到 Linux、Windows 和 MacOS 的软件。您甚至可以将它们用于非 GUI 应用程序。

不要忘记阅读[高级 linux 编程](http://advancedlinuxprogramming.com)和[高级 unix 编程等资料](http://basepath.com/aup/)

# c# - 在 Orchard CMS 中以编程方式创建绑定、查询和投影

> ID：12875017
> 
> 赞同：0
> 
> 时间：2012-10-13T17:10:30.663
> 
> 标签：c#, asp.net, orchardcms

我为 Orchard CMS 编写了模块，并且我需要有许多（大约 120 个）投影，由我的 ContentType 中的字段过滤。从 Web 界面，我可以通过以下方式完成：创建 Binding、基于 Binding 创建查询、基于 Query 创建投影。但我需要以编程方式进行。

我想，这真的是从数据库中做的。我需要哪些表添加记录来创建投影？或者有另一种方法来解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T19:02:23.760

不要直接写入表格，始终通过内容管理器创建内容。否则，您很可能会损坏数据库。

此外，120 个投影听起来很可疑。即使这样，您也可以使用自定义过滤器将这个数字减少到几个。

根据[您在其他地方所写的内容](https://orchard.codeplex.com/discussions/399231)（因为不幸的是，这是一个交叉发布的问题，只会在两个地方创建更多的工作回答），您的问题可以通过分类法更好地解决，分类法具有您想要的一切开箱即用.

# c# - 在 Try/Catch 内（第二次 Try/Catch 在方法内）

> ID：12875018
> 
> 赞同：2
> 
> 时间：2012-10-13T17:10:34.707
> 
> 标签：c#, exception-handling, try-catch

请看下面的代码：

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        try
        {
            mymethod();
        }
        catch (Exception ex)//First catch
        {
            MessageBox.Show(ex.ToString());
        }
    }

    private void mymethod()
    {
        int a = 10;
        int b = 0;
        try
        {
            int c = a / b;
        }
        catch (Exception ex)//Second catch
        {
            MessageBox.Show(ex.ToString());
            //int c = a / b;
            throw new Exception(ex.ToString());
        }
    }
} 
```

我想`catch`在第二个执行后强制第一个`catch`执行！如何强制上述运行并显示第二个`catch`错误？**我想看到`ex.ToString()`两个`catch`块都一样。**

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-13T17:12:49.920

不要抛出新异常，只需重新抛出现有异常：

```
private void mymethod()
{
    int a = 10;
    int b = 0;
    try
    {
        int c = a / b;
    }
    catch (Exception ex)//Second catch
    {
        MessageBox.Show(ex.ToString());
        //int c = a / b;
        throw; // change here
    }
} 
```

有关如何正确重新抛出异常的详细信息，[请参阅这篇文章。](https://stackoverflow.com/questions/178456/what-is-the-proper-way-to-re-throw-an-exception-in-c)

**更新**：捕获异常并将这些详细信息提供给单击处理程序的另一种但不太受欢迎的方法是将`mymethod`异常传递给包装在一个新的异常中：

```
private void mymethod()
{
    int a = 10;
    int b = 0;
    try
    {
        int c = a / b;
    }
    catch (Exception ex)//Second catch
    {
        MessageBox.Show(ex.ToString());
        //int c = a / b;
        throw new Exception("mymethod exception", ex); // change here
    }
} 
```

同样，我链接到的帖子有更多细节。

# c++ - c ++如何测试3个2D点是否非共线

> ID：12875019
> 
> 赞同：0
> 
> 时间：2012-10-13T17:10:34.030
> 
> 标签：c++, distance, performance

我的问题是如何确定 3 组点是否非共线？最小距离为 d。

我知道我可以首先计算其中两个之间的距离，如果距离大于 d，我们继续计算第三点。其余的应该通过计算第三点与由 p1 和 p2 组成的线之间的距离来完成。

如何以有效的方式在 C++ 中实现这一点？

# c# - 根据另一个数据网格的选定行过滤一个数据网格

> ID：12875024
> 
> 赞同：0
> 
> 时间：2012-10-13T17:10:43.437
> 
> 标签：c#, wpf

经过多年的 WinForms，我正在涉足 WPF，并且我正在努力处理数据绑定/过滤。

编辑：这是我的代码；网格 1 (companiesDataGrid) SelectionChanged 事件是对网格 2 (sitesDataGrid) 进行过滤的地方。简而言之，当 vs_Companies 改变位置时，需要过滤 vs_Sites；vs_Sites 有一个名为 Company_ID 的字段，它将过滤该字段以匹配当前选定的 vs_Companies 行的 ID 字段。

这是我在 WPF 的第一次尝试——如果有任何指针作为在多用户环境中连接到 SQL 服务器方面的最佳实践，我将不胜感激，当前的代码非常基本，CollectionViewSource 数据直接提供给两个没有中间对象的数据网格。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;

namespace RevDB
{
    public partial class MainWindow : Window
    {
        public RevDB.TSDBDataSet ds_Rev;

        public RevDB.TSDBDataSetTableAdapters.CompaniesTableAdapter ta_Companies;
        public RevDB.TSDBDataSetTableAdapters.SitesTableAdapter ta_Sites;

        public System.Windows.Data.CollectionViewSource vs_Sites;
        public System.Windows.Data.CollectionViewSource vs_Companies;

        public MainWindow()
        {
            InitializeComponent();
        }

        private void Window_Loaded_1(object sender, RoutedEventArgs e)
        {

            ds_Rev = ((RevDB.TSDBDataSet)(this.FindResource("tsDBDataSet")));

            //Sites
            ta_Sites = new RevDB.TSDBDataSetTableAdapters.SitesTableAdapter();
            ta_Sites.Fill(ds_Rev.Sites);

            vs_Sites = ((System.Windows.Data.CollectionViewSource)(this.FindResource("sitesViewSource")));
            vs_Sites.View.MoveCurrentToFirst();

            //Companies
            ta_Companies = new RevDB.TSDBDataSetTableAdapters.CompaniesTableAdapter();
            ta_Companies.Fill(ds_Rev.Companies);

            vs_Companies = ((System.Windows.Data.CollectionViewSource)(this.FindResource("companiesViewSource")));
            vs_Companies.View.MoveCurrentToFirst();

            //Data bindings
            //this.txt_Company.SetBinding(TextBox.TextProperty, new Binding() { Path = "TargetText", Source = this });
        }

        private void companiesDataGrid_SelChanged(object sender, SelectionChangedEventArgs e)
        {

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T20:09:47.383

我会将您的 ViewModel 中的一个属性绑定到您希望从中获取更新 ID 的 DataGrid的**SelectedItem属性。**然后，您可以在视图的代码隐藏中使用**SelectionChanged**事件，或者使用绑定到**SelectedItem**的属性的设置器来触发对第二个集合的更新。

此外，请确保两个集合都是**ObservableCollection**类型，并且 VideModel 正在实现**INotifyPropertyChanged**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T20:01:55.117

好的，正如所承诺的，这是一个例子。

**场景**：您有 2 个 DataGrid。一个 DataGrid 包含公司和其他站点。

**条件**：只要选择公司，所选网站就会更改以反映相关公司网站。

**实现**：MVVM，SelectedCompany 属性的更改会**更新**ViewModel 中的**SelectedSite**属性。

**注意**：我添加了额外的 DataGrid 样式以使 Lost-Focus 状态可见。默认情况下，所选行在“丢失焦点”上不可见。

**型号**：

公司

```
using System;
using System.ComponentModel;

namespace CascadingDataGrids
{
    public class Company : INotifyPropertyChanged
    {
        private int _id;

        /// <summary>
        /// Gets or sets the id.
        /// </summary>
        /// <value>
        /// The id.
        /// </value>
        public int Id
        {
            get { return _id; }
            set
            {
                if (value != _id)
                {
                    _id = value;
                    NotifyPropertyChanged("Id");
                }
            }
        }

        private string _companyName;

        /// <summary>
        /// Gets or sets the name of the company.
        /// </summary>
        /// <value>
        /// The name of the company.
        /// </value>
        public string CompanyName
        {
            get { return _companyName; }
            set
            {
                {
                    if (value != _companyName)
                    {
                        _companyName = value;
                        NotifyPropertyChanged("CompanyName");
                    }
                }
            }
        }

        private int _siteId;

        /// <summary>
        /// Gets or sets the site id.
        /// </summary>
        /// <value>
        /// The site id.
        /// </value>
        public int SiteId
        {
            get { return _siteId; }
            set
            {
                if (value != _siteId)
                {
                    _siteId = value;
                    NotifyPropertyChanged("SiteId");
                }
            }
        }

        #region INotifyPropertyChanged

        public event PropertyChangedEventHandler PropertyChanged;
        private void NotifyPropertyChanged(String info)
        {
            if (PropertyChanged != null)
            {
                PropertyChanged(this, new PropertyChangedEventArgs(info));
            }
        }

        #endregion
    }
} 
```

地点

```
using System;
using System.ComponentModel;

namespace CascadingDataGrids
{
    public class Site : INotifyPropertyChanged
    {
        private int _id;

        /// <summary>
        /// Gets or sets the id.
        /// </summary>
        /// <value>
        /// The id.
        /// </value>
        public int Id
        {
            get { return _id; }
            set
            {
                if (value != _id)
                {
                    _id = value;
                    NotifyPropertyChanged("Id");
                }
            }
        }

        private string _siteName;

        /// <summary>
        /// Gets or sets the name of the site.
        /// </summary>
        /// <value>
        /// The name of the site.
        /// </value>
        public string SiteName
        {
            get { return _siteName; }
            set
            {
                {
                    if (value != _siteName)
                    {
                        _siteName = value;
                        NotifyPropertyChanged("SiteName");
                    }
                }
            }
        }

        #region INotifyPropertyChanged

        public event PropertyChangedEventHandler PropertyChanged;
        private void NotifyPropertyChanged(String info)
        {
            if (PropertyChanged != null)
            {
                PropertyChanged(this, new PropertyChangedEventArgs(info));
            }
        }

        #endregion
    }
} 
```

**视图模型**：

```
using System;
using System.Collections.ObjectModel;
using System.ComponentModel;
using System.Linq;

namespace CascadingDataGrids
{
    public class DemoViewModel : INotifyPropertyChanged
    {
        #region Properties

        private ObservableCollection<Company> _companies;

        /// <summary>
        /// Gets or sets the companies.
        /// </summary>
        /// <value>
        /// The companies.
        /// </value>
        public ObservableCollection<Company> Companies
        {
            get { return _companies; }
            set
            {
                if (value != _companies)
                {
                    _companies = value;
                    NotifyPropertyChanged("Companies");
                }
            }
        }

        private Company _selectedCompany;

        /// <summary>
        /// Gets or sets the selected company.
        /// </summary>
        /// <value>
        /// The selected company.
        /// </value>
        public Company SelectedCompany
        {
            get { return _selectedCompany; }
            set
            {
                if (value != _selectedCompany)
                {
                    _selectedCompany = value;
                    NotifyPropertyChanged("SelectedCompany");

                    // Set Site
                    var currentSite =
                        Sites.FirstOrDefault(x => x.Id == SelectedCompany.SiteId);

                    // Evaluate
                    if (currentSite != null)
                    {
                        SelectedSite = currentSite;
                    }
                }
            }
        }

        private ObservableCollection<Site> _sites;

        /// <summary>
        /// Gets or sets the sites.
        /// </summary>
        /// <value>
        /// The sites.
        /// </value>
        public ObservableCollection<Site> Sites
        {
            get { return _sites; }
            set
            {
                if (value != _sites)
                {
                    _sites = value;
                    NotifyPropertyChanged("Sites");
                }
            }
        }

        private Site _selectedSite;

        /// <summary>
        /// Gets or sets the selected site.
        /// </summary>
        /// <value>
        /// The selected site.
        /// </value>
        public Site SelectedSite
        {
            get { return _selectedSite; }
            set
            {
                if (value != _selectedSite)
                {
                    _selectedSite = value;
                    NotifyPropertyChanged("SelectedSite");
                }
            }
        }

        #endregion

        #region Constructors

        /// <summary>
        /// Initializes a new instance of the <see cref="DemoViewModel"/> class.
        /// </summary>
        public DemoViewModel()
        {
            // New instances
            Companies = new ObservableCollection<Company>();
            Sites = new ObservableCollection<Site>();

            // Build
            BuildCompanies();
            BuildSites();
        }

        #endregion

        #region Members

        /// <summary>
        /// Builds the companies.
        /// </summary>
        private void BuildCompanies()
        {
            // Set companies
            Companies = new ObservableCollection<Company>
            {
                new Company { Id = 1, CompanyName = "Microsoft", SiteId = 1 },
                new Company { Id = 2, CompanyName = "Google", SiteId = 3 },
                new Company { Id = 3, CompanyName = "Amazon", SiteId = 2 },
            };

            // Set selected to first value
            SelectedCompany = Companies.FirstOrDefault();
        }

        /// <summary>
        /// Builds the sites.
        /// </summary>
        private void BuildSites()
        {
            // Set sites
            Sites = new ObservableCollection<Site>
            {
                new Site { Id = 1, SiteName = "Redmond, WA" },
                new Site { Id = 2, SiteName = "Seattle, WA" },
                new Site { Id = 3, SiteName = "Mountain View, CA" }
            };

            // Set selected to first value
            SelectedSite = Sites.FirstOrDefault();
        }

        #endregion

        #region INotifyPropertyChanged

        public event PropertyChangedEventHandler PropertyChanged;
        private void NotifyPropertyChanged(String info)
        {
            if (PropertyChanged != null)
            {
                PropertyChanged(this, new PropertyChangedEventArgs(info));
            }
        }

        #endregion
    }
} 
```

**查看：XAML**

```
<Window x:Class="CascadingDataGrids.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Companies and Sites" Height="700" Width="500">

    <Window.Resources>
        <Style x:Key="Header" TargetType="TextBlock">
            <Setter Property="FontFamily" Value="Calibri" />
            <Setter Property="FontSize" Value="20" />
            <Setter Property="FontWeight" Value="Bold" />
        </Style>

        <!-- Datagrid -->
        <Style TargetType="{x:Type DataGrid}">
            <Setter Property="Background" Value="White" />
            <Setter Property="CanUserAddRows" Value="False" />
            <Setter Property="CanUserResizeRows" Value="False" />
            <Setter Property="CanUserDeleteRows" Value="False" />
            <Setter Property="SelectionMode" Value="Single" />
            <Setter Property="SelectionUnit" Value="FullRow" />
            <Setter Property="EnableRowVirtualization" Value="True" />
        </Style>

        <Style TargetType="{x:Type DataGridCell}">
            <Setter Property="Background" Value="Transparent" />
            <Setter Property="BorderBrush" Value="Transparent" />
            <Style.Triggers>
                <Trigger Property="IsSelected" Value="True">
                    <Setter Property="Foreground" Value="Black" />
                </Trigger>
            </Style.Triggers>
        </Style>

        <Style TargetType="{x:Type DataGridRow}">
            <Setter Property="Cursor" Value="Hand" />
            <Style.Triggers>

                <!-- Hover -->
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background">
                        <Setter.Value>
                            <LinearGradientBrush StartPoint="0.5,0" EndPoint="0.5,1" Opacity="0.5">
                                <GradientStop Color="#dceef7" Offset="0" />
                                <GradientStop Color="#f2f9fc" Offset="1" />
                            </LinearGradientBrush>
                        </Setter.Value>
                    </Setter>
                </Trigger>

                <!-- Selected -->
                <Trigger Property="IsSelected" Value="True">
                    <Setter Property="Background">
                        <Setter.Value>
                            <LinearGradientBrush StartPoint="0.5,0" EndPoint="0.5,1" Opacity="1">
                                <GradientStop Color="#333" Offset="0" />
                                <GradientStop Color="#333" Offset="0.01" />
                                <GradientStop Color="#e0e4e7" Offset="0.01" />
                                <GradientStop Color="#c2dbea" Offset="0.40" />
                                <GradientStop Color="#c2dbea" Offset="0.60" />
                                <GradientStop Color="#e0e4e7" Offset="0.99" />
                                <GradientStop Color="#333" Offset="0.99" />
                                <GradientStop Color="#333" Offset="1" />
                            </LinearGradientBrush>
                        </Setter.Value>
                    </Setter>
                </Trigger>
            </Style.Triggers>
        </Style>
    </Window.Resources>

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="24" />
            <RowDefinition Height="240" />
            <RowDefinition Height="40" />
            <RowDefinition Height="24" />
            <RowDefinition Height="240" />
        </Grid.RowDefinitions>

        <TextBlock Grid.Row="0" Style="{StaticResource Header}" Text="Companies" />
        <DataGrid Grid.Row="1" Margin="0 12 0 0"
            ItemsSource="{Binding Path=Companies}"
            SelectedItem="{Binding Path=SelectedCompany, Mode=TwoWay}" 
            RowHeight="20"
            IsReadOnly="True" />

        <TextBlock Grid.Row="3" Style="{StaticResource Header}" Text="Sites" />
        <DataGrid Grid.Row="4" Margin="0 12 0 0"
            ItemsSource="{Binding Path=Sites}"
            SelectedItem="{Binding Path=SelectedSite, Mode=TwoWay}" 
            RowHeight="20"
            IsReadOnly="True" />
    </Grid>
</Window> 
```

**查看：代码隐藏**

```
using System.Windows;

namespace CascadingDataGrids
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        #region Members

        private readonly DemoViewModel _vm;

        #endregion

        #region Constructors

        /// <summary>
        /// Initializes a new instance of the <see cref="MainWindow"/> class.
        /// </summary>
        public MainWindow()
        {
            // Set viewmodel
            _vm = new DemoViewModel();

            // Set data context
            this.DataContext = _vm;

            // Initialize UI
            InitializeComponent();
        }

        #endregion
    }
} 
```

# c - x86-32 上的 C 中的堆栈溢出和分段错误

> ID：12875027
> 
> 赞同：1
> 
> 时间：2012-10-13T17:11:00.747
> 
> 标签：c, segmentation-fault, stack-overflow, callstack

我有一个关于 C 中的堆栈溢出的问题。我写了一个小测试程序，所以当我用 8 As 启动它时，我得到了我所期望的，我写在第二个 buf 的边界上，因此 buf1 是空的，因为现在，尾随零是 buf1 中的第一个元素。到目前为止一切顺利，如果我尝试使用 16 As 它也可以，使用 17 As 进行事件。但我预计这里会出现段错误……段错误在 24 As 之后出现。这是为什么？我在 x86-32 ubuntu、debian 和 suse 上进行了测试。总是在 24 字节后出现段错误……在具有相同代码的 AMD64 系统上，我在 32 后得到段错误，正如我所期望的那样……但是为什么在 24 后的 x86-32 上？

# 包括

```
 #include <string.h>

  /*
  * $ gcc -O0 -Wall -fno-stack-protector buffer.c -o buffer
  *
  * $ ./buffer AAAAAAAA
  * buf1: test
  * buf2: test
  * buf1:
  * buf2: AAAAAAAA
  *
  * $ ./buffer AAAAAAAAAAAAAAAAAAAAAAAA
  * buf1: test
  * buf2: test
  * buf1: AAAAAAAAAAAAAAAA
  * buf2: AAAAAAAAAAAAAAAAAAAAAAAA
  * Segmentation fault (core dumped)
  */

  static void exploit(const char *InputString)
  {
char buf1[8];
char buf2[8];

strcpy(buf1, "test");
strcpy(buf2, "test");

printf("buf1: %s\n", buf1);
printf("buf2: %s\n", buf2);

strcpy(buf2, InputString);

printf("buf1: %s\n", buf1);
printf("buf2: %s\n", buf2);
  }

  int main(int argc, const char *argv[])
  {
if (argc > 1)
  exploit(argv[1]);

return 0;
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T06:37:17.263

您试图猜测编译器生成的内存布局。编译器可以自由地以任何看起来合适的方式布局代码。但是，堆栈帧必须包含：

*   参数（由调用者推动）
*   返回地址（由 CPU 推送）
*   需要保留的寄存器。这取决于目标架构。
*   局部变量（由被调用者分配）

在您测试的 x86 机器上，局部变量和返回地址之间有 8 个字节，而在 x64 机器上则有 16 个字节。如果寄存器被调用者保存，它们将被存储在这个空间中：

```
func:
PUSH BP
MOV BP, SP
SUB SP, privateSpace
...
MOV SP, BP
POP BP
RET argSize 
```

[http://en.wikipedia.org/wiki/Calling_convention#x86](http://en.wikipedia.org/wiki/Calling_convention#x86)

因此，返回地址之后的空间包含存储的帧指针 BP。如果调用者不再使用基指针，则不会注意到此覆盖。一个函数使用它的基指针返回，但是如果函数通过系统调用退出（我记得 main 方法在这个意义上是“特殊的”，但我无法获取我的声明），损坏的基指针永远不会被使用并且损坏会被忽视）。

要测试它是否是基指针：

*   创建第三级调用（main、caller、callee）。
*   记录被调用者的返回，访问局部变量，再次记录，然后返回。
*   如果在访问局部变量时发生段错误，则很可能是基指针。

其他可能的原因：

*   发生错误时使用的一些调试信息。
*   从未测试过但无论如何都会分配的金丝雀（堆栈保护器）。没有任何症状。
*   参数数量 ( [syscall](http://en.wikipedia.org/wiki/X86_calling_conventions#syscall) ) 破坏 this 会破坏调用者的堆栈指针，如果调用者不进行另一个调用，它将被忽视。症状：如果调用者进行第二次调用，调用者中会出现段错误。
*   `this`指针。不应出现在普通功能中。

其他要尝试的事情：

在损坏之前和之后在被调用者中进行内存转储以查看布局。存储的基指针应指向堆栈空间（调用者的堆栈帧）。返回地址应指向代码空间（靠近当前 IP）。char* 参数是一个指针。将其与其他两个参数 (">>>" 和 "<<<" as `char[4]`) 放在一起将有助于识别。

# python - 删除附加到 url 的 url

> ID：12875029
> 
> 赞同：0
> 
> 时间：2012-10-13T17:11:07.750
> 
> 标签：python, django, python-2.7, django-views

嗨，当我浏览页面时，有什么方法可以禁止 url 一个接一个地附加？

例如，/questions/ 显示一些问题，每个问题都有一个指向特定问题并显示答案的链接。所以我做了一个

```
<a href="{% url answer.views.display_answers Question.id %}">View answers</a> 
```

它将页面上的 url 更改为 /questions/1/。当我在页面上有一个链接将用户带回 /questions/ 页面时，问题就来了。

```
<a href="{% url 'questions' %}">Back to question list</a> 
```

它返回一个反向匹配错误，经过一番探索，我发现发生了不匹配，因为 url 现在是 /questions/1/questions/

所以我的观点是我们是否有任何方法可以控制 Django 在整个导航过程中附加 url。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T18:10:25.523

我认为问题可能是您没有在 url 模板标签中始终使用引号。

[有关更多信息，请参阅url 模板标签文档](https://docs.djangoproject.com/en/1.3/ref/templates/builtins/#url)中的转发兼容性。我建议您在两个模板中加载新的 url 标签，并将链接更改为

```
{% load url from future %}
...
{% url 'answer.views.display_answers' Question.id %} 
```

和

```
{% load url from future %}
...
{% url 'questions' %} 
```

如果您尝试了它仍然无法正常工作，请发布您的 urls.py。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T17:13:08.937

使用`{% url answer.views.display_questions %}`代替`{% url 'questions' %}`，就像您已经为答案所做的那样。

# android - Android - RuntimeException 试图在捕获视频时打开闪存

> ID：12875032
> 
> 赞同：2
> 
> 时间：2012-10-13T17:11:41.207
> 
> 标签：android, android-camera

我构建了一个应用程序，它首先打开 Flash 并开始处理视频，这很好用。我有一个按钮，它只是关闭/打开闪光灯。在我的设备和其他设备中，它运行良好，但在某些设备上它返回：

java.lang.RuntimeException：调用 mCamera.setParameters(p) 时 setParameters 失败；

所以，按钮 onClick 代码是：

```
 Camera.Parameters parameters = mCamera.getParameters();
     parameters.setFlashMode(Parameters.FLASH_MODE_TORCH); // flash on
     mCamera.setParameters(parameters); 
```

有什么想法会导致问题吗？预先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T20:21:29.083

有问题的设备可能不支持 FLASH_MODE_TORCH。尝试将其设置为 FLASH_MODE_ON 并查看是否遇到相同的错误。

# android - 为什么我的应用程序在使用特定图像时会崩溃？

> ID：12875033
> 
> 赞同：0
> 
> 时间：2012-10-13T17:11:40.957
> 
> 标签：android, imageview, android-imageview, logcat, android-logcat

我有一个在布局中使用 ImageView 的可行代码。在我重新启动 Eclipse 之前，该应用程序可以成功运行。之后，每当我使用特定图像时，我的应用程序就会崩溃。我尝试用另一个图像替换图像，它可以成功运行。导致我的应用程序崩溃的图像尺寸为 608 x 2964，它是一个 PNG 文件。

有人可以告诉我有什么问题吗？我不太明白 LogCat 中写了什么，因为我是 Android 新手。如果有人可以帮助我，将不胜感激。谢谢。

这是我的 LogCat 的链接：[http://pastie.org/pastes/5053152/text?key=zg7tbpuj9zqvlje4v6aczq](http://pastie.org/pastes/5053152/text?key=zg7tbpuj9zqvlje4v6aczq)

这是我的图像视图。

```
<ImageView
android:contentDescription="@string/image"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:layout_marginTop="10dp"     
android:layout_marginBottom="10dp" 
android:adjustViewBounds="true"
android:src="@drawable/about_mj" 
android:layout_gravity="center_horizontal"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T14:26:28.587

[http://developer.android.com/training/camera/photobasics.html#TaskScalePhoto](http://developer.android.com/training/camera/photobasics.html#TaskScalePhoto)

和

[http://developer.android.com/training/displaying-bitmaps/load-bitmap.html](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)

会帮助你很多

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T17:18:11.497

从日志中可以清楚地看到您的图像太大并导致

```
java.lang.OutOfMemoryError: bitmap size exceeds VM budget 
```

优化您的图像。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T17:19:41.687

看起来以下错误是问题所在

```
java.lang.OutOfMemoryError: bitmap size exceeds VM budget 
```

看看下面的帖子。它有多种可能的解决方案来解决这个问题： [java.lang.OutOfMemoryError: bitmap size超出VM budget - Android](https://stackoverflow.com/questions/1949066/java-lang-outofmemoryerror-bitmap-size-exceeds-vm-budget-android?answertab=votes#tab-top)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-13T17:41:17.450

是的，它显示 OutOMemoryError 并在 XML(Layout) 文件中的第 44 行显示 inflateException。我认为您在布局中使用了一些可绘制对象，可能无法正确分配值。

# version-control - 在 mercurial 存储库中搜索特定路径中的更改

> ID：12875037
> 
> 赞同：0
> 
> 时间：2012-10-13T17:11:58.597
> 
> 标签：version-control, mercurial, repository, tortoisehg

我有一个使用 Yii 框架开发的网站，我想将框架从 1.1.8 版本升级到 1.1.11。我已经对 1.1.11 中的框架进行了修改，但其他人没有，而且我不记得它们到底是哪些。

有没有办法在某个路径中搜索 Mercurial 存储库中的所有更改？该框架位于 ./yiiframework 目录中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T17:15:00.257

您可以将路径传递给`hg log`命令：

```
hg log path/to/foo 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T18:18:31.263

虽然@David 的回答在技术上是正确的，但在意识形态上是错误的，我会回答未提问的问题

**“如何在更改上游代码库的基础上维护我的补丁”**

这确实是*您的业务任务*

对于 Mercurial，这是一项相当容易的工作，您只需执行部分工作“合并并行更改”，而 SCM 无法自动完成。

简短的操作方法

*   您使用 Mercurial 存储库
*   您将使用至少 2 个长期命名的分支：上游代码的“默认”/如果上游也是 hg/ 或手动添加上游的任何其他名称，以及本地补丁的“我的”分支
*   您的 repo 可以从上游原版代码 1.1.8 (rev 1) 开始
*   您在 1.1.8 之上在 WC 中执行所有更改，并在 My branch (rev 2) 中更改了分支
*   返回第 1 版并与 1.1.11 同步代码库，提交到默认分支（第 3 版）
*   更新到 rev 2 并合并分支（默认为 My），解决可能的冲突

在此操作之后，您将拥有 1.1.11 **，并从您的 1.1.8 继承更改**

未来的工作流程 * 仅在自己的分支上工作 * 从上游（如果可以）拉到默认值或手动更新默认值 * 需要时合并到我的

PS - 更复杂的工作流程*可能会*假设并承认在单个分支之上使用 MQ 补丁

# php - 查找共享标签最多的相似对象

> ID：12875040
> 
> 赞同：-1
> 
> 时间：2012-10-13T17:12:28.780
> 
> 标签：php, mysql, database, tagging

我有两个表`objects`and `tags`，每个表`object`都有一个 id，每个表`tag`都有一个`id`a`name`和 a `parent`（对象的 id）。

我想做的是选择一个`object`然后找到其他`objects`按共同标签数量排序的，例如返回最相似的 5 个`objects`。

编辑：

```
SELECT parent,COUNT(*) as count
FROM `tag` 
WHERE tag="house" OR tag="dog" OR tag="cat" 
GROUP BY parent 
ORDER BY count DESC 
```

这个做我想做的，我可以在这个之前找到另一个查询的对象标签“house,dog,cat”。知道如何结合这两个查询吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T21:19:12.643

给定一个对象，您可以像这样找到它的标签：

```
 SELECT t1.id
 FROM tags t1
 where t1.parent_id = ? 
```

在此基础上，您希望获取该标签列表并找到共享它们的其他 parent_id。

```
 SELECT parent_id, count(*)
 FROM tags t2
 WHERE EXISTS (
     SELECT t1.id
     FROM tags t1
     WHERE t1.parent_id = ?
     AND t1.id = t2.id
 )
 GROUP BY parent_id 
```

这将为您提供其他 parent_id 共享的标签数量。

如果您`ORDER BY count(*) desc`想首先找到“最相似”的行，则可以。

希望有帮助。

# python - 字符串到浮点数做一些数学运算然后回到字符串

> ID：12875042
> 
> 赞同：0
> 
> 时间：2012-10-13T17:12:39.073
> 
> 标签：python, string, math

好的，我需要把一个字符串变成一个浮点数做一些数学运算然后回到一个字符串

```
def item_price(data):       #grabs price of item
    soup = BeautifulSoup(data)
    info = soup.find('span', itemprop='price').text
    info = info.replace("$","")
    info = float(info);         #  but evary thing below this line goes wrong 
    info = info * .2 + info
    info = "$" + string(info);
    return(info); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T17:29:39.787

虽然我对 BeautifulSoap 一无所知，但我认为是分号。试试这个，看看它是否有效：

```
from decimal import *

def item_price(data):       
    soup = BeautifulSoup(data)
    info = soup.find('span', itemprop='price').text
    info = info.replace("$","")
    info = Decimal(info)
    info = (info * Decimal(0.2)) + info
    return '${0:.2f}'.format(info) 
```

注意：您还有一些其他明显的语法问题，我试图清理它们。另外，请注意，您可能应该使用小数（超过浮点数）来表示金钱。

[链接到十进制文档](http://docs.python.org/library/decimal.html)

# java - java.io.FileNotFoundException: [filepath] (没有这样的文件或目录)

> ID：12875048
> 
> 赞同：0
> 
> 时间：2012-10-13T17:13:07.623
> 
> 标签：java, android, filesystems, filenotfoundexception

我正在尝试从文件中读取，但我在检查时弄错了。我不明白为什么会发生这种情况，文件存在我有很多时间可以确定。

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/> 
```

我也将它包含在 AndroidManifest.xml 文件中，所以这也不是问题。

```
 String filePath = Environment.getExternalStorageDirectory() + "/folder/Save.spm";
    File filecheck = new File(filePath);
    if(filecheck.exists() == false)
    {
        return false;
    }
    FileInputStream file = new FileInputStream(filePath);
    DataInputStream input = new DataInputStream(file); 
```

为什么android声称该文件不存在？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T19:55:33.307

您如何检查文件是否存在？您是否尝试过使用 ADB pull 命令从模拟器中检索文件（如果您使用的是模拟器）？

```
adb pull /path/to/file 
```

获取文件检查的绝对路径并尝试。您也可能将应用程序缓存目录误认为是外部存储。或者可能有多个外部存储，而您正在查看错误的存储。

# java - Servlet 和会话

> ID：12875050
> 
> 赞同：0
> 
> 时间：2012-10-13T17:13:08.557
> 
> 标签：java, servlets

考虑**servlet A**将用户绑定到这样的会话：

```
HttpSession session = req.getSession(true); 
```

并且同一用户不久之后对属于同一应用程序的**servlet** **B**执行了一个请求。

 **此时 servlet B 执行时：

```
HttpSession session = req.getSession(false); 
```

会话为空吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T17:21:00.303

以下是此代码返回 null 的可能原因：

*   会话超时后发送第二个呼叫
*   您在两次调用之间重新启动了服务器或重新部署了应用程序
*   您在两次通话之间重新启动了浏览器
*   您使用两个不同的浏览器或机器来执行这两个调用
*   浏览器拒绝 cookie，并且您没有正确编码您的 URL 以使 url 重写会话跟踪工作
*   两个呼叫之间的另一个呼叫使会话无效
*   两个 servlet 实际上不在同一个 webapp 中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T17:16:46.913

[HttpServletRequest#getSession](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#getSession%28boolean%29)

`true`如有必要，为此请求创建一个新会话；**如果没有当前会话**`false`，则返回 null

 **您需要检查您在第二个 servlet 的请求中收到的会话 ID。您可以使用`getRequestedSessionId`

仅当您的会话在两次调用之间或在浏览器获取`session id`您调用之前无效时，才会发生这种情况`SeveletB`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T17:18:52.807

它实际上取决于 servlet 的顺序：

*   如果 servlet B 在 A 之前被调用，则不会创建会话
*   如果 servlet A 将在 B 之前被调用，则会话将被创建并且 servlet B 将有权访问它。

一般来说，如果您想避免自动创建会话 - 您必须确保使用会话的代码永远不会在创建会话的代码之前执行。

所以好的做法是如果会话为空，则将用户从 servlet B 重定向到 servlet A。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-14T18:33:01.133

正如你所提到的，`servletA`被称为 first 和`servletB`next 。

如果除了您提到的那样没有发生任何事情，您将收到相同的会话（**不是 null**），`servletB`其中 used/created in `servletA`。

在 servletA 中，

```
 getSession(true) in servletA means create and return the session if not 
      present otherwise return the existing session 
```

在 servletB 中，

```
 getSession(false) in servletB means return the existing session if present 
      otherwise return null. 
```

由于您肯定已经创建了一个会话`servletA`，因此您将收到**非空**会话，`servletB` **前提是在两次调用之间没有发生任何事情来清除您的会话，**例如会话过期。****

# drupal - 捕获自定义内容类型中的字段值

> ID：12875052
> 
> 赞同：2
> 
> 时间：2012-10-13T17:13:11.897
> 
> 标签：drupal, drupal-7

当我的模板中有这个时：

```
$nodes = node_load_multiple(array(), array('type' => 'front_page_slider'));
foreach($nodes as $slider): ?>
<?php //print $slider->title; ?>
<?php $heading2 = $slider->field_heading_2; var_dump($heading2);?> 
```

它打印：

```
array(1) { ["und"]=> array(1) { [0]=> array(3) { ["value"]=>
  string(14) "Item Heading 2"
  ["format"]=> NULL ["safe_value"]=> string(14) "Item Heading 2"
} } } 
```

这样做的更好方法是什么？我只是想遍历内容类型“front_page_slider”中的节点并打印每个字段的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T07:31:12.220

你应该这样写：

```
print $slider->field_heading_2['und'][0]['safe_value']; 
```

希望这行得通……穆罕默德。

# algorithm - 列出谜题中所有单词的最快算法

> ID：12875055
> 
> 赞同：2
> 
> 时间：2012-10-13T17:13:33.173
> 
> 标签：algorithm, search

我在一次采访中被问到这个问题，我很好奇最佳答案。问题是这样的：给你一个充满字母的 nxn 板。一个游戏算法想要在这个板上找到并列出所有可能的单词，其中“一个单词”被定义为水平或垂直至少 3 个字母的字符串。什么是最省时的方法？

这个问题中的“单词”不需要是字典中的真实单词。关键是尽可能快地找到所有可接受长度的字符串。除了遍历板上所有空间并找到以该空间中的字母开头的所有字符串外，我想不出其他任何方法，这需要 O(n^3) 时间。你们会怎么做？

PS。我看到这个问题被否决了，因为人们认为没有更好的解决方案。然而，这是一个微软面试问题，我的面试官明确告诉我我的答案不是最佳的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-07-18T16:43:16.707

这是我分阶段解决问题的方法：

1.  尝试在拼图中查找给定单词：您可以使用 DFS 在拼图中查找单词。这将是 O(n^2) 因为我们必须遍历每个行和列字符。

2.  在拼图中找到所有给定的单词：如果给定 x 个单词，您可以对每个单词使用上述算法。复杂度为 O(x*n^2)。

3.  如果存在具有相同前缀的单词，那么我们将重复为搜索前缀所做的工作。这可以通过为给定的单词构建一个 Trie 结构并将 trie 的 DFS 与拼图的 DFS 结合起来来避免。

下面是 C++ 第一步的粗略实现：

```
bool FindWordInPuzzle(int i, int j, char nextChar, int nextCharId, string word, int m, int n, bool **mark, char **maze)
{
    int move[8][2] = { 0, -1, -1, -1, -1, 0, -1, 1, 0, 1, 1, 1, 1, 0, 1, -1 };
    mark[i][j] = 1;

    for (int r = 0; r < 8; r++) {
        int g = i + move[r][0];
        int h = j + move[r][1];

        if (g > 0 && g < m + 2 && h > 0 && h < m + 2 && mark[g][h] == 0 && maze[g][h] == nextChar) {
            nextCharId++;

            if (nextCharId >= word.length()) {
                return true;
            }

            if (FindWordInPuzzle(g, h, word[nextCharId], nextCharId, word, m, n, mark, maze)) {
                return true;
            }
        }
    }

    return false;
}

bool FindWord(char **maze, bool **mark, int m, int n, string word) {
    char currentChar = word[0];
    int currentCharId = 0;
    for (int row = 1; row < m + 2; row++) {
        for (int col = 1; col < n+2; col++) {
            if (maze[row][col] == currentChar && mark[row][col] == 0) {
                currentCharId++;
                if (currentCharId >= word.length()) {
                    return true;
                }

                if (FindWordInPuzzle(row, col, word[currentCharId], currentCharId, word, m, n, mark, maze)) {
                    return true;
                }
            }

            currentCharId = 0;
            currentChar = word[0];
        }
    }

    return false;
}

int main() {
    string word;
    int m, n;

    cin >> word;
    if (word.length() <= 0) return 0;

    cin >> m >> n;
    char** maze;
    bool **mark;

    // declare arrays
    maze = new char*[m + 2];
    mark = new bool*[m + 2];
    for (int i = 0; i < m + 2; i++) {
        maze[i] = new char[n + 2];
        mark[i] = new bool[n + 2];
    }

    // boundaries
    for (int i = 0; i < m + 2; i++) {
        maze[0][i] = ' ';
            maze[i][0] = ' ';
        maze[0][m + 1] = ' ';
        maze[i][m + 1] = ' ';

        mark[0][i] = 1;
        mark[i][0] = 1;
        mark[0][m + 1] = 1;
            mark[i][m + 1] = 1;

    }

    // get values
    for (int i = 1; i < m + 1; i++) {
        for (int j = 1; j < n + 1; j++) {
            cin >> maze[i][j];
            mark[i][j] = 0;
        }
    }

    bool val =  FindWord(maze, mark, m, n, word);
    cout << val;
    cin >> word;

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T19:14:32.783

让`m(x) = max {0, x}`. 如果我们使用从 0 开始的索引，则有

```
s(x,y) = m(x-1) + m(n-x-2) + m(y-1) + m(n-y-2) 
```

从 position 开始的单词`(x,y)`。水平方向，左侧以 column 结尾，`0, 1, ..., y-2`右侧以 column 结尾`x+2, x+3, ..., n-1`。垂直词也类似。

因此，在每个位置，都从`2*(n-3)`和`2*(n-2)`单词开始（包括）。

更准确地说，在位置，当且仅当或时，`(x,y)`开始水平词，否则词。这使得每行水平单词。每列的垂直字数是一样的，所以一共有`n-2``y = 0``y = n-1``n-3``2*(n-2) + (n-2)*(n-3) = (n-1)*(n-2)`

```
2*n*(n-1)*(n-2) 
```

不一定是网格中不同的单词。假设一个不太小的字母表，重复的比例平均不会很大，所以不可能有一个复杂度低于 的算法`O(n³)`。

如果不考虑重复，就是这样，并且只剩下遍历数组的低级变化。

如果要删除重复项，并且目标是尽可能有效地列出所有不同的单词，那么问题是哪种数据结构允许尽可能有效地删除重复项。我无法回答这个问题，但我认为 trie 会非常有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T19:17:11.430

这里有两个问题-一个：天真的解决方案**蛮力不是`O(n^3)`，而是`O(n^4)`**。

假设您将每个子字符串复制到列表中的新条目。你有`O(n^3)`话。但是，这些中的每一个都是`O(n)`（平均而言）本身，因此将所有这些子字符串复制到列表实际上是`O(n^4)`.

二：
更有效的解决方案是维护一个[trie](http://en.wikipedia.org/wiki/Trie)数据结构，并使用 DFS 来填充它，就像从矩阵中的每个索引（向右和向下）遍历。

这将导致用单词`O(n^3)`填充 trie 的解决方案。`O(n^3)`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-13T19:20:52.567

你为什么说`O(n^3)`？棋盘是正方形的，正方形是`O(n^2)`。

代码如下：

```
for(int col=0; col<n-2; ++col) {
    for(int row=0; row<n-2; ++row) {
        // for given (row,col)
        // yield word to right
        // yield word down
        // yield word down-right
    }
} 
```

这是`O(3*n^2)`.

如果您也想反转，那么它将是`O(6*n^2)`

**C# 中的真实代码**

```
class Program
{
    private static Random rnd = new Random();

    static void Main(string[] args)
    {

        string alphabet = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
        char[,] letters = new char[5, 5];
        int counter = 0;

        // filling and printing
        for (int i = 0; i < letters.GetLength(0); ++i)
        {
            for (int j = 0; j < letters.GetLength(1); ++j)
            {
                letters[i, j] = alphabet[rnd.Next(alphabet.Length)];
                Console.Write(letters[i,j]);
            }
            Console.WriteLine("");
        }

        // generating "words"

        for (int i = 0; i < letters.GetLength(0)-2; ++i)
        {
            for (int j = 0; j < letters.GetLength(1)-2; ++j)
            {
                // horizontally
                Console.Write(counter.ToString() + ": ");

                Console.Write(letters[i, j]);
                Console.Write(letters[i, j+1]);
                Console.Write(letters[i, j+2]);

                Console.WriteLine("");
                counter++;

                // vertically
                Console.Write(counter.ToString() + ": ");

                Console.Write(letters[i, j]);
                Console.Write(letters[i+1, j]);
                Console.Write(letters[i+2, j]);

                Console.WriteLine("");
                counter++;

                // diagonally
                Console.Write(counter.ToString() + ": ");

                Console.Write(letters[i , j]);
                Console.Write(letters[i + 1, j+1]);
                Console.Write(letters[i + 2, j+2]);

                Console.WriteLine("");
                counter++;
            }
        }

    }
 } 
```

**输出**

```
长波微波
OWWGR
APVOM
GKECL
TXCPD
0：LWI
1：协议书
2：低电压值
3：WID
4：WWP
5：世界大战
6：IDM
7: IWV
8：IGM
9：OW
10：奥格
11：欧佩克
12：世界工作组
13：WPK
14：WVC
15：WGR
16：WVE
17：WOL
18：APV
19：AGT
20：AKC
21: PVO
22: PKX
23：PEP
24: 声音
25：VEC
26：VCD

```

结果数为 27 = 3*(5-2)^2

# php - 方法/函数的默认参数值未正确设置在 WordPress 中作为 add_action() 回调传递

> ID：12875057
> 
> 赞同：0
> 
> 时间：2012-10-13T17:13:58.073
> 
> 标签：php, callback, wordpress

以下示例插件可让您`download`在管理面板中按下按钮时下载文本文件。问题是我预计文本文件名会是`hello_world.txt`，但它以某种方式变为`options-general.txt`.

如果这一行`header('Content-Disposition: attachment; filename="' . $file_name . '"');`直接设置文件名就好`header('Content-Disposition: attachment; filename="hello_world.txt"');`了。

```
/* Plugin Name: Sample Download Button  */

$sample_download_button = new Sample_Download_Button_AdminPage('Sample Download Button');
add_action('init', array($sample_download_button, "download_text"));
add_action('admin_menu', array($sample_download_button , "admin_menu"));

class Sample_Download_Button_AdminPage {
    function __construct($pagetitle, $menutitle='', $privilege='manage_options', $pageslug='') {
        $this->pagetitle = $pagetitle;
        $this->menutitle = !empty($menutitle) ? $menutitle : $pagetitle;
        $this->privilege = $privilege;
        $this->pageslug = !empty($pageslug) ? $pageslug : basename(__FILE__, ".php");
    }
    function admin_menu() {
        add_options_page($this->pagetitle, $this->menutitle, $this->privilege, $this->pageslug, array(&$this, 'admin_page'));
    }
    function admin_page() {     
        ?>
        <div class="wrap">
            <h1>Download Button Sample</h1>
            <form action="" method="post" target="_blank">
            <input type="submit" value="download" name="download">
            </form>
        </div>
        <?php
    }   
    function download_text($file_name='hello_world.txt') {
        if (!isset($_POST['download'])) return;
        $your_text = 'hello world';
        header("Content-type: text/plain");
        header('Content-Disposition: attachment; filename="' . $file_name . '"');
        echo $your_text;
        exit;
    }       
} 
```

为什么？以及如何设置默认参数值？我用普通功能尝试过，它的默认值也没有反映。感谢您的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T14:53:24.243

我对此进行了几种测试，包括将您的完整功能复制到我拥有的“沙盒”安装中。

不是所有的钩子都传递参数。据我所知，`init`钩子没有。它是否接受/传递参数是在定义钩子时确定的。显然，当触发不打算传递参数的钩子时，会将空字符串传递给回调。在您的情况下，这意味着它有效地覆盖了您的默认设置并且没有文件名，这反过来又导致浏览器使用表单提交到的页面的文件名 - options-general.php。

我会将文件名作为表单中的隐藏字段传递并发送`$_POST`，然后按照您设置的方式设置我的默认值`$your_text`。

```
function download_text() {
    if (!isset($_POST['download'])) return;
    if (!isset($_POST['filename'])) $file_name = $_POST['filename'];
    else $file_name = 'hello_world.txt';
    $your_text = 'hello world';
    header("Content-type: text/plain");
    header('Content-Disposition: attachment; filename="' . $file_name . '"');
    echo $your_text;
    exit;
} 
```

# php - 从包含的文件提交 PHP 表单运行函数

> ID：12875059
> 
> 赞同：0
> 
> 时间：2012-10-13T17:14:11.067
> 
> 标签：php, mysql, smarty

对不起，基本问题。我在 Stackoverflow 上查看了其他答案，但这里是：

我有一个简单的表格，应该将数据发布到我的 mysql 数据库中：

```
<form id="theatre" method="post" action="{$HTTP_HOST}admin/addTheatre.php"     autocomplete="on">
    <input type="hidden" name="id">
    <fieldset>
        <label>Please fill in the relevent fields.</label>
        <section>
            <label for="year">Year</label>
            <div>                   
                <select name="year" id="year">
                    <optgroup label="Year">
                            <option>2013</option>
                            <option>2012</option>
                            <option>2011</option>
                            <option>2010</option>
                            <option>2009</option>
                            <option>2008</option>
                            <option>2007</option>
                            <option>2006</option>
                    </optgroup>
                </select>
            </div>
        </section>
        <section><label for="part">Part</label>
            <div>
                <input type="text" id="part" name="part" title="A Tooltip">
            </div>
        </section>
        <section><label for="name">Name</label>
            <div>
                <input type="text" id="name" name="name" title="A Tooltip">
            </div>
        </section>
        <section><label for="theatre">Theatre</label>
            <div>
                <input type="text" id="theatre" name="theatre" title="A Tooltip">
            </div>
        </section>
        <section><label for="director">Director</label>
            <div>
                <input type="text" id="director" name="director" title="A Tooltip">
            </div>
        </section>
        <section>
            <div>
                <button name="submit" class="submit" type="submit">Submit</button>
            </div>
        </section>
    </fieldset>
</form> 
```

在 addTheatre.php 文件中我有：

```
if(isset($_POST['submit'])){
    hcDB::getInstance()->insert_theatre($_POST['year'], $_POST['part'], $_POST['name'], $_POST['theatre'], $_POST['director']);
} 
```

我应该运行以下功能：

```
function insert_theatre($year, $part, $name, $theatre, $director) {
    $year = $this->real_escape_string($year);
    $part = $this->real_escape_string($part);
    $name = $this->real_escape_string($name);
    $theatre = $this->real_escape_string($theatre);
    $director = $this->real_escape_string($director);
    $this->query("INSERT INTO theatre (`year`, `part`, `name`, `theatre`, `director`)" .
            " VALUES (" . $year . "' , '" . $part . "' , '" . $name . "' , '" . $theatre . "' , '" . $director . "')");
    } 
```

据我所知，没有提交任何内容。你可能会说，我是新手，所以为无能道歉！

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T17:18:47.113

检查返回值`query`并调用[`errorInfo`](http://php.net/manual/en/pdo.errorinfo.php)以查看是否收到任何有意义的消息。

它可能应该告诉您 SQL 格式错误：

```
$this->query("INSERT INTO theatre (`year`, `part`, `name`, `theatre`, `director`)" .
        " VALUES (" . $year . "' , '" . $part . "' , '" . $name . "' , '" . $theatre . "' , '" . $director . "')");
} 
```

AFAICT`VALUES ("`应更改为`VALUES('"`（额外的单引号）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T17:19:00.297

您的查询中有错字，并且没有错误处理，因此您永远不会看到 mysql 会提供的错误消息：

```
" VALUES ('" . $year . "' , '"
          ^--- missing quote 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T17:32:11.883

正如您所说，没有提交任何内容，那么您的按钮可能没有价值并且您正在尝试做

```
if(isset($_POST['submit'])){
//other stuff
} 
```

它最终是错误的。

所以试着改变你的按钮

```
<button name="submit" class="submit" type="submit">Submit</button> 
```

到

```
<input type="submit" class="submit" name="submit" value="Submit"/> 
```

# sql - 优化 SQL 查询

> ID：12875060
> 
> 赞同：3
> 
> 时间：2012-10-13T17:14:21.267
> 
> 标签：sql, postgresql, optimization, query-optimization

使用 PostgreSQL 8.4 并使用如下表：

```
create table log (
    id bigint primary key,
    first_sn bigint not null,
    last_sn bigint not null
); 
```

其中 first_sn 和 last_sn 表示序列号范围，并且表包含 > 100 万行，如果我想搜索序列号范围包含序列列表中的元素的所有行，我应该使用哪种索引和查询数字。

例如，对于一个列表 [5348491, 1230505, 5882233] 我目前正在做：

```
select 5348491, *
from log
where 5348491 between first_sn and last_sn
union
select 1230505, *
from log
where 1230505 between first_sn and last_sn
union
select 5882233, *
from log
where 5882233 between first_sn and last_sn; 
```

但这有点慢。

编辑：这样的查询大约需要 600 毫秒，我希望能够使用 >10k 序列号的列表进行搜索。

由于有人要求，这是真正的表、查询和解释分析（我犹豫了，因为所有列名都是西班牙语，但在前面的例子中，'id' 在这里是 'movimiento_id'，'first_sn' 将是 'serial_inicial' ，而“last_sn”将是“serial_final”。“tipo_movimiento”是事件的类型，实际上它只是进一步过滤结果集的一种方式）：

```
 CREATE TABLE movimiento
(
  movimiento_id bigserial NOT NULL,
  serial_inicial bigint NOT NULL,
  serial_final bigint NOT NULL,
  serial_chip bigint,
  numero_telefono text,
  fecha_movimiento timestamp without time zone DEFAULT now(),
  producto_id integer NOT NULL,
  usuario_id integer NOT NULL,
  factura_proveedor text,
  fecha_ingreso date,
  fecha_venta date,
  vendedor_id integer,
  cliente_id integer,
  tipo_movimiento text NOT NULL,
  costo numeric(12,4),
  precio numeric(10,2),
  descuento double precision,
  bodega_id integer NOT NULL DEFAULT 1,
  fecha_activo timestamp without time zone,
  factura text,
  envio text,
  documento text,
  bodega_id_origen integer,
  fecha date,
  traslado_id integer,
  detalle_factura_id bigint,
  es_venta boolean DEFAULT false,
  CONSTRAINT movimiento_pkey PRIMARY KEY (movimiento_id ),
  CONSTRAINT movimiento_bodega_id_fkey FOREIGN KEY (bodega_id)
      REFERENCES bodega (bodega_id) MATCH SIMPLE
      ON UPDATE NO ACTION ON DELETE NO ACTION,
  CONSTRAINT movimiento_bodega_id_origen_fkey FOREIGN KEY (bodega_id_origen)
      REFERENCES bodega (bodega_id) MATCH SIMPLE
      ON UPDATE NO ACTION ON DELETE NO ACTION,
  CONSTRAINT movimiento_cliente_id_fkey FOREIGN KEY (cliente_id)
      REFERENCES cliente (cliente_id) MATCH SIMPLE
      ON UPDATE NO ACTION ON DELETE NO ACTION,
  CONSTRAINT movimiento_producto_id_fkey FOREIGN KEY (producto_id)
      REFERENCES producto (producto_id) MATCH SIMPLE
      ON UPDATE NO ACTION ON DELETE NO ACTION,
  CONSTRAINT movimiento_usuario_id_fkey FOREIGN KEY (usuario_id)
      REFERENCES usuario (usuario_id) MATCH SIMPLE
      ON UPDATE NO ACTION ON DELETE NO ACTION,
  CONSTRAINT movimiento_vendedor_id_fkey FOREIGN KEY (vendedor_id)
      REFERENCES vendedor (vendedor_id) MATCH SIMPLE
      ON UPDATE NO ACTION ON DELETE NO ACTION,
  CONSTRAINT movimiento_check CHECK (serial_final >= serial_inicial),
  CONSTRAINT movimiento_costo_check CHECK (costo >= 0::numeric),
  CONSTRAINT movimiento_descuento_check CHECK (descuento >= 0::double precision),
  CONSTRAINT movimiento_precio_check CHECK (precio >= 0::numeric),
  CONSTRAINT movimiento_tipo_movimiento_check CHECK (tipo_movimiento = ANY (ARRAY['Ingresado'::text, 'Vendido'::text, 'Entregado'::text, 'Regresado'::text, 'Eliminado'::text, 'Devuelto'::text, 'Inconforme'::text, 'Trasladado'::text, 'Consignado'::text, 'Devolucion Consignado'::text, 'Activado'::text, 'Devolucion Claro'::text, 'Asignado'::text, 'Fusion-Sale'::text, 'Fusion'::text, 'Separacion-Sale'::text, 'Separacion'::text]))
)
WITH (
  OIDS=TRUE
); 
```

这是查询：

```
 explain analyze select 869461009867643, *
from movimiento
where (869461009867643 between serial_inicial and serial_final)
and tipo_movimiento = 'Ingresado'
union all
select 12121001477546, *
from movimiento
where 12121001477546 between serial_inicial and serial_final
and tipo_movimiento = 'Ingresado'
union all
select 354689040208615, *
from movimiento
where 354689040208615 between serial_inicial and serial_final
and tipo_movimiento = 'Ingresado'; 
```

并解释分析：

```
Append  (cost=7542.94..185580.33 rows=232322 width=165) (actual time=93.222..571.928 rows=4 loops=1)
  ->  Bitmap Heap Scan on movimiento  (cost=7542.94..61089.00 rows=90645 width=165) (actual time=93.220..206.248 rows=1 loops=1)
        Recheck Cond: (tipo_movimiento = 'Ingresado'::text)
        Filter: ((869461009867643::bigint >= serial_inicial) AND (869461009867643::bigint <= serial_final))
        ->  Bitmap Index Scan on tipo_movimiento_index  (cost=0.00..7520.28 rows=375432 width=0) (actual time=66.445..66.445 rows=372409 loops=1)
              Index Cond: (tipo_movimiento = 'Ingresado'::text)
  ->  Bitmap Heap Scan on movimiento  (cost=7534.24..61080.30 rows=55815 width=165) (actual time=84.364..179.571 rows=2 loops=1)
        Recheck Cond: (tipo_movimiento = 'Ingresado'::text)
        Filter: ((12121001477546::bigint >= serial_inicial) AND (12121001477546::bigint <= serial_final))
        ->  Bitmap Index Scan on tipo_movimiento_index  (cost=0.00..7520.28 rows=375432 width=0) (actual time=60.282..60.282 rows=372409 loops=1)
              Index Cond: (tipo_movimiento = 'Ingresado'::text)
  ->  Bitmap Heap Scan on movimiento  (cost=7541.75..61087.81 rows=85862 width=165) (actual time=173.876..186.082 rows=1 loops=1)
        Recheck Cond: (tipo_movimiento = 'Ingresado'::text)
        Filter: ((354689040208615::bigint >= serial_inicial) AND (354689040208615::bigint <= serial_final))
        ->  Bitmap Index Scan on tipo_movimiento_index  (cost=0.00..7520.28 rows=375432 width=0) (actual time=60.294..60.294 rows=372409 loops=1)
              Index Cond: (tipo_movimiento = 'Ingresado'::text)
Total runtime: 572.138 ms 
```

下面是用 a_horse_with_no_name 的例子进行的解释分析：

```
 Nested Loop  (cost=7614.18..98703.44 rows=125144 width=173) (actual time=629.373..2919.334 rows=4 loops=1)
  Join Filter: ((lista.serie >= movimiento.serial_inicial) AND (lista.serie <= movimiento.serial_final))
  CTE lista
    ->  Values Scan on "*VALUES*"  (cost=0.00..0.04 rows=3 width=8) (actual time=0.012..0.033 rows=3 loops=1)
  ->  Bitmap Heap Scan on movimiento  (cost=7614.14..59283.04 rows=375432 width=165) (actual time=110.909..460.563 rows=372409 loops=1)
        Recheck Cond: (tipo_movimiento = 'Ingresado'::text)
        ->  Bitmap Index Scan on tipo_movimiento_index  (cost=0.00..7520.28 rows=375432 width=0) (actual time=107.182..107.182 rows=372409 loops=1)
              Index Cond: (tipo_movimiento = 'Ingresado'::text)
  ->  CTE Scan on lista  (cost=0.00..0.06 rows=3 width=8) (actual time=0.001..0.003 rows=3 loops=372409)
Total runtime: 2919.514 ms 
```

因此结合 a_horse_with_no_name 和 Craig Ringer 的建议，搜索三个序列号的时间不到 350 毫秒。尝试了 10k，它在 3s+ 内做到了：

```
create temporary table lista (
    serie bigint
) on commit drop;
create index lista_index on lista using btree (serie);
insert into lista (select distinct serial_inicial from movimiento limit 10000);
analyze lista;
select serie, movimiento.*
from movimiento join lista on serie between serial_inicial and serial_final
where tipo_movimiento = 'Ingresado'; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T17:18:11.053

如果您真的不需要提供的值匹配的信息，您可以使用简单的 OR：

```
select *
from log
where (5348491 between first_sn and last_sn)
   or (1230505 between first_sn and last_sn)
   or (5882233 between first_sn and last_sn); 
```

另一种选择是：

```
with sn_list (sn) as (
   values (5348491), (1230505), (5882233)
)
select ids.sn as searched_value,
       log.*
from log
  join sn_list on sn_list.sn between log.first_sn and log.last_sn; 
```

尽管我认为这些解决方案中的任何一个实际上都不会扩展到 10k 值来进行比较。

（我假设您在两个 sn 列上都有索引）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T17:24:39.220

如果您想查找范围，最好的选择是 B-Tree 索引。

正如[PostgreSQL 文档](http://www.postgresql.org/docs/8.3/static/indexes-types.html)中所说，

> B-trees 可以处理对可以排序为某种顺序的数据的相等和范围查询。

# html - HTML5：单击主页按钮后，document.ready() 不会在目标页面上触发

> ID：12875061
> 
> 赞同：0
> 
> 时间：2012-10-13T17:14:31.413
> 
> 标签：html, jquery-mobile

我有一个 HTML5 (+JQM) 页面：

```
...
<div data-role="header">
  <a data-rel="home" ... href="index.html"></a>
</div>
... 
```

按下主页按钮并加载主页（“index.html”）后，

```
$(document).ready(function() { 
```

不开火；也不火

```
$("div[data-role*='page']").live('pageshow', function() { 
```

*每次*加载主页时，我都需要运行一些代码，无论是直接加载还是在“主页”按钮之后加载......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T18:56:29.630

请按照[文档](http://jquerymobile.com/demos/1.2.0/docs/api/events.html)使用 PageInit 事件。如果您需要在每次页面加载时运行代码，则推荐使用此事件。

然而，在我傻了片刻之后，我意识到你在做什么。但是我在文档页面上找不到“home”的“data-rel”属性？[http://jquerymobile.com/demos/1.2.0/docs/api/data-attributes.html](http://jquerymobile.com/demos/1.2.0/docs/api/data-attributes.html)

我假设您有一个多页模板 - 使用 index.html 和 another.html 文件。我怀疑你需要添加

```
data-rel="external" 
```

在html文件之间导航时而不是“家”？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T21:38:33.513

我找到了答案：我有（我没有在问题中提到它，对不起......）：

```
data-direction="reverse" 
```

在我的主页链接中......没有它，并使用 data-rel="external"，正如 Dave R 建议的那样，一切运行正常......

# ios - 在 UIWebView img 标签中使用 ALAsset 照片

> ID：12875075
> 
> 赞同：3
> 
> 时间：2012-10-13T17:16:32.530
> 
> 标签：ios, uiwebview, alassetslibrary, alasset

我能够成功地从 ALAssetsLibrary 中查找图像并在本机视图中使用 UIImage。

是否可以在 UIWevView 中使用相同资产的 url（例如`assets-library://asset/asset.JPG?id=88AA03C4-E53F-4FE2-9752-9DA675D1FAF7&ext=JPG`：）作为 img 标签的来源？

`<img src="<the asset>">`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T11:55:30.047

您不能从 UIWebView 使用此 URL，因为 URL 方案 assets-library:// 只有 AVFoundation(AVAsset) 和 AssetsLibrary 中的类才能理解。要在 UIWebView 中显示 AssetsLibrary 中的图像，应该使用以下两种方法：

1) 在您的应用程序中实现一个小型网络服务器，让它为 AssetsLibrary 中的图像提供服务。因此，在您的 UIWebView 中，您将像这样引用这些图像。然后，网络服务器将生成一个动态响应，从 AssetsLibrary 为具有指定 ID 的资产返回图像数据。

2）另一种方法是完全在您的可可代码中生成网页，然后使用该`loadHTMLString:baseURL:`方法设置 UIWebView 的内容。在生成的 HTML 代码中，您可以将 assets-library 中的图像嵌入为 Base64-Images/Data-URIs（请参阅此处以获取更多参考：[Embedding Base64 Images](https://stackoverflow.com/questions/1207190/embedding-base64-images)）

哪种方法最适合您取决于具体情况。

# c# - FileAttributes.Encrypted 如何在 C# 中工作？

> ID：12875076
> 
> 赞同：6
> 
> 时间：2012-10-13T17:16:38.240
> 
> 标签：c#, .net, file-attributes

我在谷歌上没有找到任何例子......谁能展示它是如何工作的？当文件夹和文件将被加密时，如何解密它们？

链接： [FileAttributes 枚举](http://msdn.microsoft.com/en-us/library/system.io.fileattributes.aspx)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-13T17:40:48.543

该`FileAttributes.Encrypted`标志告诉您文件或文件夹是否已被 NTFS 文件系统加密。用户可以通过右键单击文件，选择属性，然后单击高级按钮来使用此选项。有一个选项“加密内容以保护数据”，这是该`FileAttributes.Encrypted`标志所对应的。

您可以使用`File.Encrypt`/`File.Decrypt`方法来加密或解密文件或文件夹。请注意，您只能解密由当前用户加密的内容。

您可以使用该[`System.IO.File.GetAttributes`](https://docs.microsoft.com/en-us/dotnet/api/system.io.file.getattributes?view=netframework-4.7.2)方法`FileAttributes`从文件中获取。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-13T17:30:23.747

只需使用以下代码进行文件加密识别：

```
FileAttributes attributes = File.GetAttributes("C:\testfile.txt");
if ((attributes & FileAttributes.Encrypted) == FileAttributes.Encrypted)
{
    Console.WriteLine("Encrypted file");
}
else
{
    Console.WriteLine("Not Encrypted file");
} 
```

快乐的编码...

# wcf - IIS 中发布的服务显示“此服务的元数据发布当前已禁用”

> ID：12875080
> 
> 赞同：0
> 
> 时间：2012-10-13T17:17:33.903
> 
> 标签：wcf, iis

我使用 VS2010 Win 2008 R2。我创建了一个“WCF 服务库”，将它放在 IIS 的虚拟目录中，并将其转换为应用程序。

我将 svc 文件放在应用程序的根目录中，并将输出构建路径更改为`bin`. 每次尝试 URL 时，`http://localhost/test1/Service1.svc`我都会收到错误*“此服务的元数据发布当前已禁用”*。

我还尝试了 URL `http://localhost/test1/MEX`。Mex 行为配置正确，但出现此错误。

当我尝试将服务引用添加到控制台应用程序时，它也找不到服务的元数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T07:51:27.000

这是配置文件：

```
<configuration>
  <system.serviceModel>
    <services>
     <service name="WcfServiceLibrary4.Service1" behaviorConfiguration="ServiceBehavior">
        <host>
          <baseAddresses>
            <add baseAddress="http://localhost/test/"/>
          </baseAddresses>
        </host>

        <endpoint address="" binding="basicHttpBinding"
           contract="WcfServiceLibrary4.IService1"/>

        <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange"/>
      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior name="ServiceBehavior">

          <serviceMetadata httpGetEnabled="true"/>
          <serviceDebug includeExceptionDetailInFaults="false"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
  </system.serviceModel>
</configuration> 
```

我首先启用了对虚拟文件夹的匿名访问，然后我看到“此服务的元数据发布当前已禁用。”-错误。
我试过“http://localhost/test/mex”，但 IIS 说“没有这样的资源”。在这里我提到“test”而不是“test1”，因为我更改了虚拟文件夹。Bin 文件夹在测试下，并且从我设置为 Bin 而不是 Bin/Debug 的项目的构建中输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T07:08:22.697

你能分享你的配置文件 serviceBehavior 部分吗？

启用元数据交换应该是这样的。

```
<serviceBehaviors>
   <behavior name="SampleServiceBehavior">
          <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpGetEnabled="true"/>
          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="false"/>
   </behavior>
</serviceBehaviors> 
```

# android - 找不到 ActionBarSherlock ForceOverflow 资源

> ID：12875081
> 
> 赞同：7
> 
> 时间：2012-10-13T17:17:51.187
> 
> 标签：android, actionbarsherlock

我升级到 4.2 版本，发现我的旧代码没有编译，因为它似乎 ForceOverflow 父主题已被删除。

[在谷歌搜索这个问题之后](https://groups.google.com/forum/?fromgroups=#!topic/actionbarsherlock/9NLVwaCAjeI)，它似乎被故意删除以保持设备一致的菜单按钮。

我确实理解使用物理菜单按钮的论点，但我只是不同意它......而且那些旧菜单太丑陋了。

我真的不希望用户说他们无法访问以前的功能（这毕竟是菜单按钮被移动到屏幕上可见的原因），那么我在这里有什么选择？这会在未来的版本中改变吗？我是否必须坚持使用以前版本的 ABS 并处理旧 ABS 库中的一些其他错误，这些错误已在最近的版本中修复？有什么解决办法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-15T01:46:37.893

我们可以使用 SubMenu 来伪造它，而不是试图获得一个“真正的”溢出菜单。

它看起来和行为都像原来的溢出按钮，只是更好，因为它会一直在那里。

```
private Menu mainMenu;
private SubMenu subMenu1;

    @Override
public boolean onCreateOptionsMenu(Menu menu) {

    mainMenu = menu;

    subMenu1 = menu.addSubMenu("");
    subMenu1.add("Settings");
    subMenu1.add("About");
    subMenu1.add("Help");

    MenuItem subMenu1Item = subMenu1.getItem();
    subMenu1Item.setIcon(R.drawable.ic_menu_moreoverflow_normal_holo_dark);
    subMenu1Item.setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS);

    return super.onCreateOptionsMenu(menu);
} 
```

当然，您可以像以前一样设置子菜单。使用 groudID、itemID 等。

请注意，我已经选择 *ic_menu_moreoverflow_normal_holo_dark* 作为菜单图标。这样按钮也看起来像一个溢出。

现在我们只需要在用户按下硬件菜单按钮时打开这个子菜单。如果你像我以前那样设置 mainMenu 和 subMenu1，我们可以很容易地做到这一点。

```
@Override
public boolean onKeyUp(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_MENU) {
            mainMenu.performIdentifierAction(subMenu1.getItem().getItemId(), 0);
            return true;
    }
    return super.onKeyUp(keyCode, event);
} 
```

请注意您导入：

```
import com.actionbarsherlock.view.SubMenu;
import com.actionbarsherlock.view.Menu;
import com.actionbarsherlock.view.MenuItem; 
```

而**不是**：

```
import android.view.MenuItem; 
```

# ruby-on-rails - Windows计算机上的Rails服务器错误

> ID：12875082
> 
> 赞同：1
> 
> 时间：2012-10-13T17:18:07.137
> 
> 标签：ruby-on-rails, ruby, windows, ruby-on-rails-3, rubygems

我正在尝试在我兄弟的计算机上安装 Rails 环境，以便我们可以在我的应用程序上进行协作。

我想我已经正确安装了所有东西，但现在我遇到了重大问题，我想是因为他有一台 Windows 电脑。基本上，尽管（我认为）一切都安装正确，但 rails server 不会运行，因为它会产生以下错误：

它抱怨有问题

```
Ruby187/lib/ruby/gems/1.8/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:251:in 'require': 
```

然后指向这个文件。

```
config/environments/development.rb:3: syntax error unexpected ':', expecting '}' 
```

它还抱怨那条线有一个

```
odd number list for Hash (SyntaxError) 
```

那条线是

```
config.action_mailer.default_url_options = { host: "localhost:3000" } 
```

更重要的是，这条线在我的 Mac 上运行良好。当我删除它时，错误消失了。（但我不想删除它，我尤其不想删除下一个）。与此错误相同

```
Ruby187/lib/ruby/gems/1.8/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:245:in 'load': 
```

我的 session_store 初始化文件中的这一行：

```
<appname>::Application.config.session_store :cookie_store, key: '_<appname>_session' 
```

知道发生了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T17:25:31.777

您使用的是 Ruby 1.8.x，但`key: "value"`语法是在 1.9.x 中引入的

```
{ host: "localhost:3000" } 
```

应该写成

```
{ :host => "localhost:3000" } 
```

# android - 在 jellybean 中向通知添加操作会忽略使用 setContent 设置的自定义布局

> ID：12875090
> 
> 赞同：4
> 
> 时间：2012-10-13T17:18:48.690
> 
> 标签：android, android-notifications, android-4.2-jelly-bean

我正在使用 setContent 创建具有自定义布局的通知，它工作正常。但是当我使用 addAction() 向通知添加操作时，我的自定义布局被忽略了，它显示了 android 的默认通知布局。

当我缩小通知（使用两个手指手势）时，我的自定义布局会显示，因此“扩展”表单似乎使用了我无法设置的不同布局。

截图（有动作，然后用两根手指向上滑动缩小它）

![用动作扩展](../Images/1510cf4fcdd8f97b115caf9c3a46af80.png)

![缩回去之后](../Images/6fbf088cd07d4b656d6cf81cc5917f6f.png)

如您所见，显示操作时它显示为空（=默认布局）。

编码：

```
RemoteViews remoteView = new RemoteViews(context.getPackageName(), R.layout.notification_status);
Builder builder = new Notification.Builder(context);
builder.setSmallIcon(icon)
    .setTicker(tickerText)
    .setWhen(when)
    .setContent(remoteView)
    .setOngoing(true)
    .setContentIntent(contentIntent)
    .setPriority(Notification.PRIORITY_HIGH)
    .addAction(R.drawable.ic_remove, "Action 1", cancelPendingIntent)
    .addAction(R.drawable.ic_stat_notify_gray_official, "Action 2", cancelPendingIntent)
    .setContentIntent(contentIntent);
Notification statusNotification = builder.build();
return statusNotification; 
```

我试图找到某个地方来控制通知操作布局，但没有运气。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T08:42:04.197

有完全相同的问题！而不是打电话

```
builder.setContent(remoteView) 
```

它取代了正常的内容，你应该这样做：

```
Notification statusNotification = builder.build();
statusNotification.bigContentView = remoteViews; 
```

这会将您的布局设置为 bigContentView，扩展后变得可见！

注意：这样做会阻止您的操作按钮出现。请参阅[在 Android（在 JB 上）中，如何向自定义富通知添加操作？](https://stackoverflow.com/questions/12247153/in-android-on-jb-how-can-i-add-an-action-to-a-custom-rich-notification)如何解决这个问题

# haskell - Haskell中无限列表的构造

> ID：12875091
> 
> 赞同：2
> 
> 时间：2012-10-13T17:18:49.350
> 
> 标签：haskell, infinite-sequence

对于所需的无限列表，我有两件事：它的第一个元素

```
x :: A 
```

和生成下一个元素的函数

```
f :: [A] -> A 
```

创建无限列表的最佳（最惯用的？最快的？）方法是什么？我是说

```
xs = x : f [x] : f [x, f [x]] : f [x, f [x], f [x, f [x]]] : ... 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-13T17:54:40.927

您想要的功能可以实现为：

```
constructInf :: ([a] -> a) -> a -> [a]
constructInf f x = xs
  where xs = x:map f (tail $ inits xs) 
```

的性能`consrtuctInf`取决于它的参数函数的性能`f`。假设`f`花费 O(N) 时间，那么将花费 O(M*N) 时间，其中 M 是您将检查`constructInf`的结果中的元素数。`constructInf`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T17:39:32.850

你想要[`iterate`](https://www.haskell.org/ghc/docs/7.6.2/html/libraries/base-4.6.0.1/Prelude.html#v%3aiterate)。

```
take 10 $ iterate (+1) 0

= [0,1,2,3,4,5,6,7,8,9] 
```

如果到目前为止您需要整个列表，并且不介意将其反转，您可以这样做：

```
mkl f x0 = x0 : unfoldr (\xs -> let x = f xs in Just (x, x:xs)) [x0] 
```

如果到目前为止您需要整个列表，并且希望它按顺序排列，那将是非常低效的，但是您可以这样做：

```
mkl' f x0 = x0 : unfoldr (\xs -> let x = f xs in Just (x, xs ++ [x])) [x0] 
```

但我不确定为什么你需要整个列表而不是最后一个元素。

# css - 如何让我的表单域有背景图片？

> ID：12875100
> 
> 赞同：-1
> 
> 时间：2012-10-13T17:19:50.657
> 
> 标签：css, forms, background, field, transparent

我添加`background: transparent;`到表单字段中，但是其中还包括我要附加的图像。当我只使用图像时，我看到的只是常规表单字段。该字段本身就像一个粗略的下划线，所以这就是为什么我需要图像而不是 CSS 样式。有人可以帮忙吗？

谢谢！

*更新！我无法显示我的图像，因为我没有在字段本身上设置高度/宽度。但是下划线出现了。图像本身是透明的 png，但输入字段的白色背景仍然存在。谁能告诉我如何使它与顶部的png透明？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T05:11:16.313

尝试

```
background-image:url(xxx.png);
border:none;
background-color:transparent; 
```

不仅仅是“背景”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T17:26:50.397

我将 RGBA 添加到背景并将 alpha 设置为“0”！我希望这对其他人有帮助。:)

# android - 如何使用复选框从列表视图中提取详细信息？

> ID：12875104
> 
> 赞同：0
> 
> 时间：2012-10-13T17:20:24.340
> 
> 标签：android, listview, checkbox, contacts

我想保留一次选择多个联系人号码的能力，使用`checkbox`. 我使用了一个带有两个`textview`和一个的自定义布局`checkbox`来为列表创建一行。我已经成功地用联系人填写了列表，但是当用户单击完成按钮时，我无法配置如何检索已选中（勾选）联系人的电话号码。请指导我。

![截屏](../Images/f3953fa505c6ff3b0ddb9f354c5ca32c.png)

**custcontactview.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/linearLayout1"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:paddingBottom="5.0px"
android:paddingLeft="5.0px"
android:paddingTop="5.0px" >

<TextView
    android:id="@+id/txtContactName"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginLeft="15.0dip"
    android:layout_toLeftOf="@+id/checkBox1"
    android:layout_alignParentLeft="true"
    android:text="Medium Text"
    android:textAppearance="?android:textAppearanceMedium" />

<TextView
    android:id="@+id/txtContactNumber"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/txtContactName"
    android:layout_alignParentLeft="true"
    android:layout_marginLeft="15.0dip"
    android:layout_toLeftOf="@+id/checkBox1"
    android:text="Small Text"
    android:textAppearance="?android:textAppearanceSmall" />

<CheckBox
    android:id="@+id/checkBox1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_marginRight="10dp"
    android:clickable="false"
    android:focusable="false"
    android:focusableInTouchMode="false" />

</RelativeLayout> 
```

**activity_contacts_picker.xml**

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<Button
    android:id="@+id/btnShow"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Show Selected" />

<ListView
    android:id="@android:id/list"
    android:layout_width="fill_parent"
    android:layout_height="match_parent"
    android:clickable="true"
    android:layout_below="@+id/btnShow" >
</ListView>

</RelativeLayout> 
```

**ContactsPicker.java**

```
public class ContactsPicker extends ListActivity implements OnItemClickListener {

protected Object mActionMode;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_contacts_picker);
    ArrayList<Map<String, String>> list = buildData();
    String[] from = { "Name", "Phone" };
    int[] to = { R.id.txtContactName, R.id.txtContactNumber };
    SimpleAdapter adapter = new SimpleAdapter(this, list,
            R.layout.custcontactview, from, to);
    setListAdapter(adapter);
}

private ArrayList<Map<String, String>> buildData() {
    ArrayList<Map<String, String>> list = new ArrayList<Map<String, String>>();
    list.clear();
    Cursor people = getContentResolver().query(
            ContactsContract.Contacts.CONTENT_URI, null, null, null,
            "UPPER(" + ContactsContract.Contacts.DISPLAY_NAME + ") ASC");
    while (people.moveToNext()) {
        String contactName = people.getString(people
                .getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME));
        String contactId = people.getString(people
                .getColumnIndex(ContactsContract.Contacts._ID));
        String hasPhone = people
                .getString(people
                        .getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER));
        if ((Integer.parseInt(hasPhone) > 0)) {
            Cursor phones = getContentResolver().query(
                    ContactsContract.CommonDataKinds.Phone.CONTENT_URI,
                    null,
                    ContactsContract.CommonDataKinds.Phone.CONTACT_ID
                            + " = " + contactId,
                    null,
                    "UPPER(" + ContactsContract.Contacts.DISPLAY_NAME
                            + ") ASC");
            while (phones.moveToNext()) {
                String phoneNumber = phones
                        .getString(phones
                                .getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));
                Map<String, String> NamePhoneType = new HashMap<String, String>();
                NamePhoneType.put("Name", contactName);
                NamePhoneType.put("Phone", phoneNumber);
                list.add(NamePhoneType);
            }
            phones.close();
        }
    }
    people.close();
    return list;
}

public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) { }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T18:06:46.310

您应该为每个复选框设置一个标签以及一个 onCheckChanged 侦听器或类似的东西。当状态变为选中时，只需获取与该复选框关联的标签（这样您就会知道列表中的哪些元素被选中）。然后，您必须重新查询以获取该列索引处的电话号码。您已经在此处存储了您的电话号码

```
String phoneNumber = phones
                    .getString(phones
                                  .getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER)); 
```

# vb.net - VB6 OCX 未出现在 VS2010 工具包中

> ID：12875105
> 
> 赞同：0
> 
> 时间：2012-10-13T17:20:26.040
> 
> 标签：vb.net, interop

我目前正在尝试在 VB.NET 项目中使用 VB6 ocx，但我只是不记得我是如何做到的（我想我使用的是 VS2008，现在我使用的是 VS2010）。

我单击“项目”、“添加引用...”、“COM”，然后选择我的 OCX 并单击“确定”。

如果我没记错的话，它会立即出现在工具箱中并且可以正常工作。我可以把它拖到我的表单上。

但是现在我在工具箱中看不到 OCX 了。

非常感谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T18:03:49.827

Project + Add Reference 不会将控件添加到工具箱中。需要一个额外的步骤来为控件自动生成 AxHost 包装器，您可以通过运行 AxImp.exe 实用程序手动执行此操作。

相反，右键单击工具箱，选择项目并使用 COM 选项卡。或者，如果 .ocx 文件没有注册其类型库或者您不知道库的名称，请使用“浏览”选项卡。

# css - 具有特定 TD 的表格的 CSS 选择器

> ID：12875106
> 
> 赞同：2
> 
> 时间：2012-10-13T17:20:29.183
> 
> 标签：css

我有两张同班的桌子

```
<table class='pp' >
  <tr class='pp'>
    <td class='pppagetitle'>A Table</td>
  </tr>
</table>
<table class='pp' >
  <tr class='pp'>
    <td class='ppinstance'>Another Table</td>
  </tr>
</table> 
```

但只想选择具有 td 类 pppagetitle (!) 的那个 - 任何指针？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T17:43:35.107

```
.pp:nth-child(1){background:green;} 
```

但这没有得到很好的支持（在 IE8 及更低版本中不起作用）

或者将表格放入容器中并使用

```
：第一个孩子
```

例子：

```
<style>
    .container > .pp:first-child{background:green;}
</style>
<div class="container">
    <table class="pp"></table>
    <table class="pp"></table>
</div> 
```

更多文档：[Quirksmode.org](http://quirksmode.org/css/contents.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T17:23:18.980

假设他们有一个父母，我的第一个想法是：

```
table.pp:first-child 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/uTWKG/)。

但是，如果它是其父元素的第一个子元素，这将并且*可以*只选择特定的`table`（具有该类的）。

没有`:first-of-class()`选择器（不幸的是）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T19:02:07.207

@Jason Groulx 在上一篇文章中的指针以及关于这个问题的非常[详尽的答案为我解决了问题：](https://stackoverflow.com/questions/2717480/css-selector-for-first-element-with-class)

```
<style type="text/css">
.pp > .pppagetitle {
    border: 1px solid red;
}
</style>

<table class='pp' >
  <tr class='pp'>
    <td class='pppagetitle'>A Table</td>
  </tr>
</table>
<table class='pp' >
  <tr class='pp'>
    <td class='ppinstance'>Another Table</td>
  </tr>
</table> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-13T17:22:31.893

您可以添加另一个类并仅选择所需的表：

```
<table class='pp' >
  <tr class='pp'>
    <td class='pppagetitle anotherClass'>A Table</td>
  </tr>
</table>
<table class='pp' >
  <tr class='pp'>
    <td class='ppinstance'>Another Table</td>
  </tr>
</table> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-13T17:24:37.493

`table.pp:first-child`

支持ie7+

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-13T17:24:52.050

您可以使用

```
table.pp:first-child 
```

或者

```
table.pp:nth-of-type(1) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-13T17:25:26.623

您可以使用[:first-child](https://developer.mozilla.org/en-US/docs/CSS/%3afirst-child)伪选择器

# angularjs - 将 $rootScope 注入控制器以使用或覆盖在 AngularJS 中 $rootScope 下定义的模型/方法是否有效？

> ID：12875111
> 
> 赞同：5
> 
> 时间：2012-10-13T17:21:25.437
> 
> 标签：angularjs

我在`App.run`下面定义了一些模型，我在控制器中覆盖了这些模型`someCtrl`：

```
App.run(['$rootScope', function($rootScope) {
  $rootScope.attempt = 1;
});

function someCtrl($scope, $rootScope) {
  $rootScope.attempt = 2;

  $rootScope.checkAttempt = function () {
    return $rootScope.attempt > 1 ? true : false;    
  };
} 
```

页面上有一个按钮超出`someCtrl's`范围：

```
<button class='btn' ng-disabled="checkAttempt()">Who's changing my value?</button> 
```

仅供参考，我知道创建服务或使用发射广播机制在控制器之间共享数据，但我想知道将 $rootScope 注入控制器的身份验证方式是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-13T23:46:15.453

恕我直言，我认为注入`$rootScope`控制器很好。我建议使用发射/广播。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-05-16T16:40:35.143

您不需要将 $rootScope 注入控制器。当您注入 $scope 时，由于范围继承，您将自动访问 $rootScope 中定义的任何内容。请参阅[文档](http://docs.angularjs.org/#!/guide/scope)。向下滚动到 Scope Hierarchies 部分。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-24T19:15:46.647

好吧，将 a 注入到控制器、服务或指令中并没有什么坏处，`$rootScope`但你确实会尝试弄清楚它是否真的有必要。原因是任何绑定到的方法或属性`$rootScope`都会使其成为全局变量，除非手动清理，否则不会被 GC 处理，并且它会产生全局变量产生的所有问题。

跨多个控制器共享数据的最佳方式是使用服务。

# java - 在被覆盖的 JTable 中的构造函数之前调用的方法

> ID：12875112
> 
> 赞同：1
> 
> 时间：2012-10-13T17:21:29.710
> 
> 标签：java

我有一个扩展 JScrollPane 的类，它正在创建另一个扩展 JTable 的类的对象。基本上它看起来像这样：

```
class CustomScrollPane{
   private CustomTable table

   public CustomScrollPane(..){
   table = new CustomTable(this);
   ..
   }
   public void scrollToBottom(){
      ...
   }
} 
```

在 CustomTable 类中，我重写了 tableChanged：

```
public class CustomTable extends JTable{

private CustomScrollPane scrollPane;

public CustomTable(CustomScrollPane scrollPane){
    super();
    this.scrollPane = scrollPane;
}

@Override
public void tableChanged(TableModelEvent e) {
    super.tableChanged(e);
    scrollPane.scrollToBottom();
} 
```

当我运行它时，我在 tableChanged() 中的 scrollPane 上得到一个 NullPointerException，这怎么可能？scrollPane 在构造函数中设置时如何为空？在调试器中运行它表明 tableChanged() 在构造函数之前被调用。添加条件

```
 if (scrollPane != null) 
```

实际上解决了这个问题，因为稍后会调用构造函数。此外，将 JTable 定义为其构造，例如：

```
 table = new JTable(){
        @Override
        public Component prepareRenderer(TableCellRenderer renderer, int row, int column) {
            final Component c = super.prepareRenderer(new CustomTableCellRenderer(), row, column);
            if (c instanceof JComponent){
                ((JComponent) c).setOpaque(true);
            }
            return c;
        }

        @Override
        public void paint(Graphics g) {
            int scrolling = scrollPane.getViewport().getViewPosition().y;
            super.paint(g);
            g.drawImage(image.getImage(), -30, -50 + scrolling, null, null);
        }

        @Override
        public void tableChanged(TableModelEvent e) {
            super.tableChanged(e);
            scrollPane.scrollToBottom();
        }
    }; 
```

直接在 CustomScrollPane 构造函数中也可以。为什么不能把它分成一个单独的类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T18:03:18.050

看起来`JTable`构造函数调用方法`tableChanged(...)`- 这意味着它在您能够初始化`scrollPane`实例变量之前被调用。

首先，我建议你看看[Java Puzzlers](http://www.javapuzzlers.com/contents.html)一书中的一些谜题 - 特别是谜题 51：有什么意义，也许还有谜题 53：做你的事。他们应该帮助您了解正在发生的事情。基本上，构造函数的第一行`CustomTable`调用`JTable`构造函数（通过`super()`）。构造`JTable`函数试图调用`tableChanged`- 它已被覆盖。被覆盖的`tableChanged`尝试操作`scrollPane`......但所有这些都发生在构造函数 ( `super()`) 的第 1 行 -*在*该行`this.scrollPane = scrollPane`执行之前，所以`scrollPane`仍然为空。

接下来，我建议使用[观察者模式](http://en.wikipedia.org/wiki/Observer_pattern)。这里有两个对象 - 滚动窗格和自定义表格 - 当另一个对象发生更改时需要通知一个对象。那是教科书的观察者模式。这是粗略的想法：

# 文件`CustomTable.java`

```
public class CustomTable extends JTable {

    // No more scroll pane; only observers
    private List<ChangeListener> listeners = [];

    // no more scroll pagne
    public CustomTable(){
        super();
    }

    @Override
    public void tableChanged(TableModelEvent e) {
        super.tableChanged(e);
        this.fireChangeEvent();
    }

    /* new methods */

    public void addChangeListener(ChangeListener listener) {
        listeners.add(listener);
    }

    public void removeChangeListener(ChangeListener listener) {
        // ...
    }

    private void fireChangeEvent() {
        for(String l : listeners ){
            l.onChange();
        }
    }
} 
```

# 文件`CustomScrollPane.java`

```
class CustomScrollPane implements ChangeListener{
   private CustomTable table

   public CustomScrollPane(/*...*/){
       table = new CustomTable();
       table.addChangeListener(this);
       //...
   }

   public void scrollToBottom(){
      //...
   }

   /* new methods */

  @Override
  public void onChange() {
      scrollToBottom();
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T17:27:18.857

这是经典的非常糟糕的模式，让部分初始化的实例逃离构造函数的范围。

我猜当您调用 new CustomTable(this); 时，CustomScrollPane 会触发一些事件到表 CustomTable 中。

并且由于 scrollPane 尚未初始化 - 那么您将获得 NPE。

只是永远不要让事情逃脱构造函数 - 你是安全的。

# java - 捆绑在 JAR 中的 Java 执行 Shell 脚本

> ID：12875115
> 
> 赞同：21
> 
> 时间：2012-10-13T17:21:57.137
> 
> 标签：java, shell

> **可能重复：**
> [在 jar 文件中执行 shell 脚本。如何提取？](https://stackoverflow.com/questions/6603807/executing-a-shell-script-inside-a-jar-file-how-to-extract)

我在“引擎”包中的 JAR 文件中打包了一个 shell 脚本。

在我的程序中，我正在使用 Process 和 ProcessBuilder 运行一个 shell 命令。这一切都很好。

如果我在我的计算机上指定 shell 脚本的路径，那么程序可以正常工作。但是，如果我将 shell 脚本打包到我的 JAR 中并像这样访问它：

```
scriptLocation = this.getClass().getResource("/engine/shell-script.sh").toString(); 
```

并运行程序，然后我得到以下错误：

```
java.io.IOException: Cannot run program "file:/Users/USERNAME/Desktop/Application-Name.jar!/engine/shell-script.sh": error=2, No such file or directory
    at java.lang.ProcessBuilder.start(ProcessBuilder.java:460)
    at java.lang.Runtime.exec(Runtime.java:593)
    at java.lang.Runtime.exec(Runtime.java:431)
    at java.lang.Runtime.exec(Runtime.java:328)
    at engine.Download$1.run(Download.java:39)
    at java.lang.Thread.run(Thread.java:680)
Caused by: java.io.IOException: error=2, No such file or directory
    at java.lang.UNIXProcess.forkAndExec(Native Method)
    at java.lang.UNIXProcess.<init>(UNIXProcess.java:53)
    at java.lang.ProcessImpl.start(ProcessImpl.java:91)
    at java.lang.ProcessBuilder.start(ProcessBuilder.java:453)
    ... 5 more 
```

我开始认为这是无法做到的，我非常想提供这个 shell 脚本作为应用程序的一部分，可以做到吗？

提前谢谢大家。

**======== 更新 ==========**

我最终解决了这个问题。Shell 不能在 JAR 包中执行脚本，它不是关于 Java，而是关于 shell。我通过执行以下操作解决了这个问题：

Java 有一个 createTempFile() 方法（具有在应用程序终止后删除文件的选项），调用它，然后在 JAR 包中写入要访问此临时文件的文件。然后，您在本地文件系统上拥有 shell 脚本，并且能够执行该脚本。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-13T17:39:49.330

它不是关于 Java，而是关于 shell。据我所知，shell 解释器无法执行驻留在 zip 文件中的脚本。所以你有几个选择：

1.  从您的 java 程序中将 shell 脚本作为文本文件读取。创建一个临时文件（在临时目录或任何其他相关位置并在那里复制文件的内容。然后用这个临时脚本调用shell解释器。我相信它是最好的方法

2.  由于 jar 是一个 zip，您可以从 shell 中解压缩它，找到一个脚本并执行 shell。同样，这更尴尬而且相当错误，但从技术上讲它应该可以工作。

3.  如果您的脚本中没有低级的东西，您可以考虑将逻辑重写为 groovy 脚本（也许您会发现有用的 groosh 项目）。然后从内存而不是文件中调用 groovy 代码。

好吧，我没有想法，如果我是你，我会实施第一个解决方案:) 祝你好运，希望这会有所帮助

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-13T17:29:32.860

最简单的解决方案是让您的应用程序将 shell 脚本提取到一个临时位置并从那里执行它。

您可以通过调用在 Java 中生成一个临时文件[`File.createTempFile(String, String)`](http://tinyurl.com/createtemp)。

您可能做的另一件事是将脚本的内容（从您的 jar 加载）作为 shell 的标准输入传递。

为简化起见，如果我有一个`a.zip`包含脚本的存档`a.sh`，这将执行它：

```
$ unzip -p a.zip a.sh | bash 
```

在 Java 程序中，您可以执行以下操作：

```
import java.io.*;
class Test{

  public static void main(String[]args) throws Exception {

    StringBuilder sb = new StringBuilder();

    // You're not strictly speaking executing a shell script but
    // rather programatically typing commands into the shell
    // sb.append("#!/bin/bash\n");
    sb.append("echo Hello world!\n");
    sb.append("cd /tmp\n");
    sb.append("echo current directory: `pwd`\n");

    // Start the shell
    ProcessBuilder pb = new ProcessBuilder("/bin/bash");
    Process bash = pb.start();

    // Pass commands to the shell
    PrintStream ps = new PrintStream(bash.getOutputStream());
    ps.println(sb);
    ps.close();

    // Get an InputStream for the stdout of the shell
    BufferedReader br = new BufferedReader(
        new InputStreamReader(bash.getInputStream()));

    // Retrieve and print output
    String line;
    while (null != (line = br.readLine())) {
      System.out.println("> "+line);
    }
    br.close();

    // Make sure the shell has terminated, print out exit value
    System.out.println("Exit code: " + bash.waitFor());

  }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T18:43:07.687

我通常只是做...

```
$ jar xf myapp.jar run.sh && ./run.sh && rm run.sh 
```

...如有必要，您可以从 Runtime.exec() 调用。

# extjs - 需要有关 ExtJS 选项卡面板奇怪行为的帮助

> ID：12875117
> 
> 赞同：0
> 
> 时间：2012-10-13T17:22:12.177
> 
> 标签：extjs, extjs3

我正在使用 ExtJS 3.1.1。我在窗口的中心区域有一个选项卡面板，在窗口的西部区域有另一个面板。在“beforeTabChange”事件中，我正在向选项卡面板和面板中删除和添加新内容。当我使用 tomcat 服务器时，这在所有机器上都可以正常工作。当我使用 JBoss 服务器并从同一台机器访问时没有问题。但是当我从远程机器访问部署在JBoss服务器中的war时，当从特定选项卡切换到其他选项卡时，我们需要在新选项卡上单击两次。第一次单击新选项卡时，西面板内容被清空，该过程在那里停止。这不是浏览器问题或操作系统问题（我检查过）。可能是什么原因 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T13:14:19.093

**注意**：如果这不能回答问题，请不要投票或删除（对版主）。我没有足够的声誉来分享上面的评论。

您需要将`Ext.Ajax.timeout`或更具体地说`Ext.Ajax.request`的`timeout`值（请参阅[this](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.Ajax-cfg-timeout)）增加到可以在远程环境中处理您的请求的合理时间。

我已经实现了一个 Ext.application 来显示我的 Gmail 邮件（使用 JavaMail API）。为 Grid 获取数据与您描述的问题相同。在第一次调用时，在服务器端获取邮件内容需要相当长的时间，因此 Grid 将是空的。当我在服务器端缓存这些东西时，下一次调用会立即显示数据。

此外，为您的 Ajax.request 失败提供处理程序，这可能有助于识别问题。

# objective-c - 在驱动器中搜索文件和文件夹

> ID：12875120
> 
> 赞同：1
> 
> 时间：2012-10-13T17:22:32.377
> 
> 标签：objective-c, xcode, macos, osx-snow-leopard

我试过搜索谷歌，但几乎没有任何关于通过 xcode 在 Mac 上搜索文件和文件夹的方法。

有可能吗？怎么做？任何代码示例等

我以前在delphi中编程，搜索路径的片段是这样的。

```
procedure SearchFolders(path:string);
var
  sr : tsearchrec;
  res: integer;
  i:integer;
begin
  path:= includetrailingpathdelimiter(path);
  res:= findfirst(path+'*.*',faAnyfile,sr);
  while res = 0 do begin
    application.processmessages;
    if (sr.name <> '.') and (sr.name <> '..') then
      if DirectoryExists(path + sr.name) then
        SearchFolders(path + sr.name)
      else
          FileProcess.Add(path + sr.name);
          FileSize:=FileSize+sr.Size;
    res := findnext(sr);
  end;
  findclose(sr);
end; 
```

激活，它的这个 SearchFolders('C:\'); 它搜索路径并将其存储到字符串列表中。

它是如何在 xcode 中的 osx 上完成的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T00:51:44.133

不幸的是，我不完全理解你的代码。但是，您通常会`NSFileManager`用来询问文件系统。

例如，要列出特定路径中的所有文件（即文件和文件夹），您可以执行以下操作：

```
- (NSArray *) listFilesAtPath:(NSString*)path {
    NSFileManager *fileManager = [NSFileManager defaultManager];

    BOOL isDir;
    if(([fileManager fileExistsAtPath:path isDirectory:&isDir] == NO) && isDir) {
        // There isn't a folder specified at the path.
        return nil;
    }

    NSError *error = nil;
    NSURL *url = [NSURL fileURLWithPath:path];
    NSArray *folderItems = [fileManager contentsOfDirectoryAtURL:url
                             includingPropertiesForKeys:[NSArray arrayWithObjects:NSURLNameKey, NSURLIsDirectoryKey, nil]
                                                options:NSDirectoryEnumerationSkipsHiddenFiles
                                                  error:&error];

    if (error) {
        // Handle error here
    }
    return folderItems;
} 
```

以下是如何使用此方法的示例：

```
NSArray *folderItems = [self listFilesAtPath:@"/Users/1Rabbit/Desktop"];
for (NSURL *item in folderItems) {
    NSNumber *isHidden = nil;

    [item getResourceValue:&isHidden forKey:NSURLIsDirectoryKey error:nil];
    if ([isHidden boolValue]) {
        NSLog(@"%@ dir", item.path);
    }
    else {
        NSLog(@"%@", item.path);
    }
} 
```

# c - fscanf 无法正常工作

> ID：12875122
> 
> 赞同：0
> 
> 时间：2012-10-13T17:23:03.557
> 
> 标签：c, file-io, multiprocessing, scanf

嗨，有一个关于多进程编程的作业，当我尝试逐行读取字符时遇到问题（每行由 3 个字符和 1 个整数组成）。问题是当我使用`fscanf`它时它不能正常工作并且它仅在每 2 个步骤中成功读取字符。在这里你可以看到我的代码；

```
#include <stdio.h>     /* basic I/O routines.   */
#include <stdlib.h>
#include <unistd.h>    /* define fork(), etc.   */
#include <sys/types.h> /* define pid_t, etc.    */
#include <sys/wait.h>  /* define wait(), etc.   */
#include <signal.h>    /* define signal(), etc. */
#include <pthread.h>
#include <ctype.h>

void child_process(int);
void parent_process();
void function();
int counter=0;
int bond_number=0;

char* f_strand;

int main(int argc, char* argv[]) {

    counter = atoi(argv[1]);

    function();

    fflush(stdout);

    execl("/usr/bin/killall","killall","tail",(char *) 0);
    return 0;
}

void function(){

    int i,k;
    pid_t child_pid[counter];
    char array[counter];
    char array_opst[counter];
    srand ( time(NULL) );
    int temp;

    FILE* fptr;
    fptr = fopen("sample.txt","w");

    if(! (f_strand=(char*)malloc(counter*sizeof(char))) ){
        printf("Error\n");
        exit(1);
    }

    for(i=0; i<counter; i++){

        temp = rand()%4;

        if(temp==0){
            *(f_strand+i) = 'A';
            fprintf(fptr,"A\n");
        }
        else if(temp==1){
            *(f_strand+i) = 'C';
            fprintf(fptr,"C\n");
        }
        else if(temp==2){
            *(f_strand+i) = 'T';
            fprintf(fptr,"T\n");
        }
        else if(temp==3){
            *(f_strand+i) = 'G';
            fprintf(fptr,"G\n");
        }
    }

    fclose(fptr);

                    for (i = 0; i < counter; i++) {
                      if ( (child_pid[i] = fork() ) < 0) {

                        perror("fork");
                        abort();
                      } 
                      else if (child_pid[i] == 0) {

                        child_process(i);
                        exit(0);
                      }
                    }
    int status;
    pid_t pid;
    int num=counter;
        while (num > 0) {
          pid = wait(&status);
          //printf("Child with PID %ld exited with status 0x%x.\n", (long)pid, status);
          --num;  // Remove pid from the pids array.
        }

    parent_process();
    printf("\n");

}

void child_process(int index){

    int i;
    char str,str1,str2;

    FILE* fptr;
    fptr = fopen("sample.txt","r");

    fseek (fptr, 2*index, SEEK_SET);
    fscanf(fptr,"%c", &str);

    FILE* fptr2;
    fptr2 = fopen("sample_2.txt","a");

       if( str == 'A' ){
            str1='T';
            str2=';';
            fprintf(fptr2,"%c%c%c%d\n",str,str2,str1,index);
            }
       else if( str == 'T' ){
            str1='A';
            str2=';';
            fprintf(fptr2,"%c%c%c%d\n",str,str2,str1,index);
            }
       else if( str == 'G' ){
            str1='C';
            str2=':';
            fprintf(fptr2,"%c%c%c%d\n",str,str2,str1,index);
            }
       else if( str == 'C' ){
            str1='G';
            str2=':';
            fprintf(fptr2,"%c%c%c%d\n",str,str2,str1,index);
            }

    fflush(stdout);
    fclose(fptr);
    fclose(fptr2);
    sleep(1);

}

void parent_process(void){

    FILE* fptr;
    fptr = fopen("sample_2.txt","r");

    char str,str1,str2;
    int index,i,k;
    char array_opst[counter]; //  second strand
    char array_type[counter]; // bond type

    i=0;

    while( !feof(fptr) ){

        if(4==fscanf(fptr,"%c%c%c%d",&str,&str1,&str2,&index)){

            if(feof(fptr))
                break;

            printf("STR = %c\n, K = %d",str,k);

            array_type[index]=str1;
            array_opst[index]=str2;
            printf("WHILE\n");

            if(array_type[index] == ':')
                bond_number=bond_number+2;
            else if(array_type[index] == ';')
                bond_number=bond_number+3;
    }

        i++;
}
    fclose(fptr);

} 
```

这是 sample2.txt 的输出

```
C:G5
G:C6
A;T4
C:G3
G:C7
C:G8
G:C2
A;T9
T;A1
C:G0 
```

在它尝试从文件中`parent_process()`逐行读取 3 个字符和一个整数。`sample2.txt`但它每两行执行一次此过程。我的意思是它读取前第三第五行并继续。如果您能提供帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T17:41:26.500

这是一个有趣的多方面问题。首先要注意的是您正在使用`c`转换。C99 标准规定如下（§7.19.6.2¶8）。

> 输入空白字符（由`isspace`函数指定）将被跳过，除非规范包含`[`、`c`或`n`说明符。

现在，让我们来看看重要的一行。

> ```
>  if(4==fscanf(fptr,"%c%c%c%d",&str,&str1,&str2,&index)){ 
> ```

发生的情况是空白（条目之间的填充，行终止符等）被`fscanf`. `d`发生这种情况时，读取未对齐，因此在遇到转换时无法读取整数。结果，`fscanf`不评估为`4`，不采用分支，因此不打印错误读取的数据。

相反，它需要错误地读取每隔一行以“重新对齐”到正确的输入，因此您只能看到打印的这些选择行。为了证明这一点，请尝试将条件替换为仅`0 < fscanf(...)`，错误的读取将产生输出以演示读取每隔一行的中间尝试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T17:27:45.650

我认为问题是换行符。尝试将其包含到格式字符串中或在连续 fscanf() 调用之间读取额外的字符。

# python - 如何处理数据库中的用户评论

> ID：12875124
> 
> 赞同：2
> 
> 时间：2012-10-13T17:23:16.557
> 
> 标签：python, database, sqlite, cgi

我计划将用户评论存储在数据库中，并且想知道如何存储用户将提供的原始文本，因为它可能包含任何内容。这方面的常见/良好做法是什么？我需要解析文本还是应该使用特殊的存储类型？解析可能很长的用户评论似乎有很多开销，我不想篡改消息的预期含义等。同时处理评论/论坛帖子似乎很奇怪庄园说用户名/密码并进行消毒。

我正在使用`sqlite3`一些脚本来查询数据库，并计划按照以下方式实现：

```
page_id    post_number    username    content
-------    -----------    --------    -------
1          1              user_23     blah there's blah "quote" blah;':".,-=. 
```

但是，当然，如果我只是将我的`content`参数扩展到我的`INSERT`查询中，将会有各种各样的问题`' "`等等。

我应该如何处理`content`这张表中的；它甚至应该在这样的桌子上吗？我应该使用什么数据类型等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T17:31:50.930

为了避免 SQL 注入攻击，使查询字符串的格式化更容易，并使处理 blob 数据成为可能，所有数据库都支持[参数](http://docs.python.org/library/sqlite3.html#cursor-objects)。

在 Python 中，它看起来像这样：

```
id = 1
text = "blah ..."
cursor.execute("INSERT INTO mytable(id, content) VALUES(?, ?)", (id, text)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T17:39:56.203

要使用的数据类型取决于输入的总体大小。文本将是我的第一选择。

有关 sqlite3 数据类型的更多信息，请参见 [http://www.sqlite.org/datatype3.html](http://www.sqlite.org/datatype3.html)

我建议您清理输入，只允许必要的标记。对内容进行编码，以便安全地插入数据库。

如果安全是一个严重的问题，这个处理应该在服务器端完成。将一些处理负载放到 javascript 上不会有什么坏处，这将减少在服务器上完成的工作。尽管如此，它仍然会捕获试图规避该功能的用户。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T17:27:44.153

我不喜欢python，但你的数据库驱动程序不是已经处理了吗？否则，您必须手动替换转义这些字符。

看看这个线程： [How to string format SQL IN clause with Python](https://stackoverflow.com/questions/11195993/how-to-string-format-sql-in-clause-with-python)

# php - PHP Riak 列表桶

> ID：12875126
> 
> 赞同：0
> 
> 时间：2012-10-13T17:23:40.863
> 
> 标签：php, riak

我正在尝试将 Riak 客户端用于 PHP，但我找不到获取集群中所有存储桶列表的方法。Riak 网站上的文档说它支持它，但我找不到任何可以做到这一点的功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T14:31:59.997

以下是使用 Riak PHP 客户端列出存储桶的方式：

```
<?php
require_once('riak-php-client/riak.php');
$client = new RiakClient('127.0.0.1', 8091);
$all_buckets = $client->buckets();
var_dump($all_buckets); // etc
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T18:07:33.637

该文档并未提供所有功能。我在文档中找到了 followinf 函数。

```
 /**
* Get all buckets.
* @return array() of RiakBucket objects
*/
function buckets() {
$url = RiakUtils::buildRestPath($this);
$response = RiakUtils::httpRequest('GET', $url.'?buckets=true');
$response_obj = json_decode($response[1]);
$buckets = array();
foreach($response_obj->buckets as $name) {
    $buckets[] = $this->bucket($name);
}
return $buckets; 
```

}

# java - Java从抽象类访问子类方法/变量

> ID：12875129
> 
> 赞同：2
> 
> 时间：2012-10-13T17:24:08.633
> 
> 标签：java, inheritance, abstract

这段代码不是我的，我需要对其进行一些改进，但我陷入了这个问题。

我有一个抽象类“CallNode”和很多子类，其中之一是“Call”。“Checker”类正在拦截未接来电，但将它们作为 CallNode 返回。我的问题是我需要获取此调用的 id，但我无法通过 CallNode 访问它。

您对解决这个问题有什么建议吗？

我把代码给你，让你更好地理解问题：

```
public abstract class CallNode {
    public abstract CallNode hasMissingCall();
}

public class Call extends CallNode {
    public int id;

    // Simplification of method
    public CallNode hasMissingCall() {  
        if (true)
            return this;
        // ...
    }
}

public class Checker{
    private static CallNode rootExpected;

    CallNode missing = rootExpected.hasMissingCall();

    System.out.println( missing.id ); // THE PROBLEM!!!
} 
```

提前致谢！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T17:31:17.640

在抽象类中定义一个返回 id 的模板方法：

```
public abstract class CallNode {
    public abstract CallNode hasMissingCall();

    public abstract int getId();
} 
```

让子类实现它：

```
public class Call extends CallNode {
    public int id;

    // Simplification of method
    public CallNode hasMissingCall() {  
        if (true)
            return this;
        // ...
    }
    public int getId()
    {
         return this.id;
    }
} 
```

这是一个选择。就我个人而言，我会在 CallNode 类中将 id 字段向上移动，因为我认为它应该是唯一的并且由所有子类共享。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T17:26:07.970

你应该`never directly access your fields`。

一般来说，`fields`应该声明`private`，你应该有`public accessor`方法来访问它们。

如果你可以修改你的类，那么`getId()`在`abstract CallNode`类和`Call`类中添加一个方法。在 Call 类中有这个方法返回你的`this.id`. 这将为您完成工作。

因此，将此方法添加到您的`Call`课程中：-

```
public int getId() {
    return this.id;
} 
```

让这个方法`abstract`在你的`Abstract`课堂上。

```
public abstract class CallNode {
    public abstract CallNode hasMissingCall();
    public abstract int getId();
} 
```

并使用以下方式调用它： -

```
missing.getId(); 
```

这将调用`getId()`您的`Call`班级。

> 这段代码不是我的，我需要对其进行一些改进，

**PS：-**您真正需要添加的一项改进是，将 更改`hasMissingCall`为`getMissingCall`返回给您的`missed call`. 始终遵循`naming conventions`您的代码。
**请记住**，您不是为自己编写代码，而是为其他人使用和维护而编写代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-13T17:26:30.613

你可以降级为`Call`：

```
System.out.println( ((Call) missing).id ); 
```

那是如果您不能更改其他类，并且如果您知道`missing`将是`Call`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-13T17:34:20.660

您可以在 CallNode 中指定抽象方法 getId() 并在子级中实现它。然后你可以在你的 Checker 中访问它。

```
public abstract class CallNode {
    public abstract CallNode hasMissingCall();
    public abstract int getId();
}

public class Checker{
    private static CallNode rootExpected;

    CallNode missing = rootExpected.hasMissingCall();

    System.out.println( missing.getId() );
}

public class Call extends CallNode {
    public int id; // better set private modifier
    public int getId() {
        return id;
    }
    ...
} 
```

# ios - 关于使用调度队列同步主线程的问题

> ID：12875144
> 
> 赞同：1
> 
> 时间：2012-10-13T17:26:10.193
> 
> 标签：ios, uitableview, objective-c-blocks, grand-central-dispatch

预取数据并在 uitableview 上显示时出现问题。所以基本上我想阻止主 UI 线程，以便我可以从 web 获取数据。我正在使用串行调度队列进行同步。此外，调度队列块正在执行另一个从 Web 获取数据的块。执行的代码写在viewdidload中：

```
dispatch_queue_t queue= dispatch_queue_create("myQueue", NULL);

CMStore *store = [CMStore defaultStore];

// Begin to fetch all of the items
dispatch_async(queue, ^{

[store allObjectsOfClass:[Inventory class]
       additionalOptions:nil
                callback:^(CMObjectFetchResponse *response) {

                    //block execution to fetch data

                }];
});
dispatch_async(queue, ^{
//load data on local data structure

    [self.tableView reloadData];
}); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-13T17:37:24.150

除了在主线程/队列中之外，您永远不应该在任何地方执行任何与 UI 相关的代码。

始终在主线程/队列上执行所有与 UI 相关的代码（例如`reloadData`在 上）。`UITableView`在您的示例中，我猜您还应该仅在获取数据时才重新加载表格视图，因此在完成块中，而不是在调用回调之前。

```
// Begin to fetch all of the items
dispatch_async(queue, ^{
   [store allObjectsOfClass:[Inventory class]
       additionalOptions:nil
                callback:^(CMObjectFetchResponse *response) {

                // block execution to fetch data
                ...
                // load data on local data structure
                ...

                // Ask the main queue to reload the tableView
                dispatch_async(dispatch_get_main_queue(), ^{
                    // Alsways perform such code on the main queue/thread
                    [self.tableView reloadData];
                });
    }];
}); 
```

# uml - 瀑布和敏捷方法问题，以及 UML 与理性上升

> ID：12875145
> 
> 赞同：0
> 
> 时间：2012-10-13T17:26:18.587
> 
> 标签：uml, analysis, object-oriented-analysis, waterfall, rational-rose

我被这两个问题困住了，我没有得到任何明显的答案。任何人都可以帮忙吗？

1.  结构（瀑布或经典）方法和敏捷（UP-Object Oriented）方法之间的比较。

2.  什么是 UML 和 Rational Rose

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T17:29:53.460

UML 是统一建模语言。它是用于设计和开发复杂系统和软件的图表、术语、配置文件等的集合。UML 由标准组织 Object Management Group (OMG) 控制。

IBM Rational Rose 是用于构建 UML 模型的众多工具之一。Rose 的问题在于它在 UML 的 1.5 版中停止了。有一些后续产品（Rational 将它们称为 RSx）。

[资源](http://answers.yahoo.com/question/index?qid=20080624174737AAXjPSG)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T08:23:25.680

要了解瀑布模型，请使用此链接 - [http://www.ianswer4u.com/2011/11/waterfall-model.html#axzz29jMkFobF](http://www.ianswer4u.com/2011/11/waterfall-model.html#axzz29jMkFobF) 要了解敏捷，请使用此链接 -> [http://www.hsc.com/tabid /69/default.aspx](http://www.hsc.com/tabid/69/default.aspx)

UML -> [http://www.omg.org/gettingstarted/what_is_uml.htm](http://www.omg.org/gettingstarted/what_is_uml.htm)

Rational Rose 是一个用于创建 UML 图的软件。我建议您使用 smartdraw 或 Edraw 代替理性玫瑰 s/w。

# java - 与创建 JSON 相比，有没有一种在 Java 中创建 xml 的简单方法

> ID：12875161
> 
> 赞同：2
> 
> 时间：2012-10-13T17:28:23.017
> 
> 标签：java, xml, json

> **可能重复：**
> [使用 java 创建 XML 文件](https://stackoverflow.com/questions/4142046/create-xml-file-using-java)

在 Java 中创建 JSONObject`{"box":"tissue","desk":"wood"}`我需要做的就是

```
JSONObject json = new JSONObject();
json.put("box","tissue");
json.put("desk","wood"); 
```

要创建 JSONObject`{"my-stuff":{"box":"tissue","desk":"wood"}}`我需要做的就是

```
JSONObject json = new JSONObject();
json.put("box","tissue");
json.put("desk","wood");

JSONObject myStuff = new JSONObject();
myStuff.put("my-stuff",json); 
```

然后为了取回`String`陈述，我只是做`json.toString()`or `myStuff.toString()`。

我碰巧在使用`org.codehaus.jettison.json.JSONObject;`，但实际上这就是 JSONObject 的工作方式。

有没有一种同样简单的方法可以在 Java 中创建 XML？如果不是，那么在 XML 中做我刚才所做的最简单的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T17:42:08.527

我建议[Dom4J](http://dom4j.sourceforge.net/dom4j-1.6.1/)：

```
Element root = DocumentHelper.createElement("my-stuff")
Document dom = DocumentHelper.createDocument(root);
root.addElement("box").setText("tissue");
System.out.println(dom.asXml()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T17:31:43.910

当然有，但是如果您已经编写了一堆 json 代码，**我建议您只需将 json 转换为 xml**，如下所示：[http ://answers.oreilly.com/topic/279-how-to-convert- json-to-xml-in-java/](http://answers.oreilly.com/topic/279-how-to-convert-json-to-xml-in-java/)

我很抱歉没有直接回答您的问题，但除非您已经实现了序列化包装器，否则只需将 json 转换为 xml 即可节省大量开发时间（而不是复制您要添加/提取的每一行代码从您的 json 对象或 - 正如我之前提到的 - 实现序列化包装器）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-13T17:39:06.677

你试过[Xstream](http://xstream.codehaus.org/tutorial.html)吗？如果您有一个建模良好的类，那么将 xml 生成为字符串就很简单了。您还可以使用注释自定义输出。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-13T17:36:40.533

另外，请查看 Groovy（与 Java 兼容），它是 MarkupBuilder。有关示例，请参阅 [http://www.ibm.com/developerworks/java/library/j-pg05199/](http://www.ibm.com/developerworks/java/library/j-pg05199/)

# c# - 如何同步浏览网页浏览器？

> ID：12875163
> 
> 赞同：4
> 
> 时间：2012-10-13T17:28:33.287
> 
> 标签：c#, asynchronous, webbrowser-control, synchronous

我环顾四周很长时间，我注意到每个人都说 webbrowser 正在异步工作，我认为这是错误的，因为当我触发 Navigate 甚至实现 documentComplete 事件时，什么都没有发生。

我注意到，当主线程（拥有网络浏览器的线程）完成他的工作时，网络浏览器才开始导航，可能是因为在那之后浏览器将使用主线程来执行他的命令。

现在这不好，因为我希望能够控制时间，我希望能够知道网络浏览器何时完成加载页面，然后继续我的工作。轮询在这里不起作用，因为我之前说过，网络浏览器甚至没有开始导航。

例子：

```
WebBrowser browser = new WebBrowser();

browser.Navigate(url);
while(browser.ReadyState != WebBrowserReadyState.Complete)
{
}

// Then executing the next steps... 
```

如何同步使用 WebBrowser，以便能够使用 WebBrowser 的文档属性和其他内容，我想创建某种阻塞方法，这样我就可以控制并知道 WebBrowser 何时完成加载。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-13T17:48:58.370

当您导航时，您的主线程不会等待文档完成。所以你需要通过一个全局变量来阻止它。一个肮脏的解决方案可能是；

```
 bool IsReady;
    void Go()
    {
        IsReady = false;
        brw.Navigate("url");
        do
        {
            Thread.Sleep(10);
            Application.DoEvents();
        } while (!IsReady);
    }

   void brw_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
    {
        IsReady = true;
    } 
```

但这里的诀窍是，当发生异常时，它会静默停止您的代码，而不会出现任何显式异常。所以我强烈建议在 try catch 块中使用 webbrowser 相关代码。

# python - 从集合 python 2.73 导入计数器时遇到问题

> ID：12875164
> 
> 赞同：0
> 
> 时间：2012-10-13T17:29:03.517
> 
> 标签：python, import

我读过其他人有这个问题，但解决方案对我不起作用。我知道我正在运行 python 2.73 并且我没有名为集合或计数器的文件。每当我尝试导入计数器时，我都会收到此错误。

```
from collections import counter
ImportError: cannot import name counter 
```

任何解决此问题的建议都将非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T17:29:51.267

`Counter()`不是`counter()`：

```
from collections import Counter 
```

# html - 从顶部或底部以一定百分比定位动态大小的 div

> ID：12875166
> 
> 赞同：1
> 
> 时间：2012-10-13T17:29:10.927
> 
> 标签：html, css, webkit

我有一个包含图像的 div，其想法是确保图像被缩放以适合窗口的宽度。效果很好，但是我无法正确水平放置图像；我想把它放在窗口底部的某个地方，但它粘在顶部。

我的HTML如下：

```
<div class="page" id=""><div id="imagewrap"><img id="test" src="myimage.png" width="100%"></div></div> 
```

CSS是这样的：

```
#imagewrap {
    height: 100%;
    width: 70%;
    margin-left: auto;
    margin-right: auto;
    border:2px solid;
} 
```

这适用于 Android 手机 (cordova)，因此任何建议都可以针对该渲染引擎 (webkit)

使用下面的一些评论后的当前版本，这些评论位于底部但不居中：

```
#centerdiv {
height: 100%;
margin-left: auto;
margin-right: auto;
border:2px solid;
width: 70%;

}
#imagewrap {
border:2px solid;
position: absolute;
bottom: 0; /** percentage FROM bottom here **/
width: 100%;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T17:40:58.230

添加这个CSS：

```
#page {
  position: relative;
}

#imagewrap {
  position: absolute;
  bottom: 0; /** percentage FROM bottom here, currently this is at the bottom **/
} 
```

请记住，这将与`#page`div 的底部相关。

# iphone - 如何使 icon.png 显示在较旧的 iphone 上，而 icon@2x.png 显示在较新的 iPhone 上？

> ID：12875173
> 
> 赞同：1
> 
> 时间：2012-10-13T17:29:49.067
> 
> 标签：iphone, objective-c, ios, cocoa-touch, retina-display

我制作了 2 个图标，一个 57x57 用于没有视网膜显示屏的旧 iPhone，另一个 114x114 用于视网膜显示。在 info.plist 上我放了图标文件 = icon.png，现在呢？我在哪里放了 icon@2x.png 以及我在哪里定义了一个将被使用的女巫？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T17:36:49.163

您可以使用[CFBundleIconFiles](https://developer.apple.com/library/mac/documentation/General/Reference/InfoPlistKeyReference/Articles/CoreFoundationKeys.html#//apple_ref/doc/uid/TP40009249-SW10)键在信息 plist 中指定多个图标文件。`CFBundleIconFiles`包含标识捆绑图标文件的字符串数组。系统会根据使用情况和底层设备类型自动选择大小最合适的图标。

此外，如果您不指定图标文件名的文件扩展名，则可以省略图像文件的高分辨率变体。系统会自动检测您的图像文件的高分辨率 ( `@2x`) 版本。换句话说，如果您在 info plist 中指定“icon”而不是“icon.png”，并且您的项目中还有一个名为“icon@2x.png”的高分辨率版本（并复制到应用程序包中） ，您甚至不需要在 info plist 中指定“icon@2x.png”。

有关图标的信息，包括它们的大小，请参阅*iOS 人机界面指南*中的[“应用程序图标”](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/mobilehig/IconsImages/IconsImages.html#//apple_ref/doc/uid/TP40006556-CH14-SW2)。

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T17:37:30.517

而不是使用 info.plist，只需将您的图标拖放到项目目标级别中的位置即可。xcode 会自动将它们添加到 info.plist

希望这可以帮助

阿德里安

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T19:47:44.337

在 xcode 4.5 等中，您不再需要在 info .plist 中手动添加 icon.png。或者至少那是我收集到的。这是你必须做的事情的一步一步。

*   在 xcode 中，当项目打开时，查看所有类所在的右侧窗格。
*   单击项目名称（以蓝色突出显示）
*   然后在下一个窗格中选择目标（通常是项目的名称）
*   确保从屏幕顶部选择summery
*   向下滚动，直到您看到两个代表您必须使用的图标的空方块。
*   如果您将鼠标悬停在它们上方，它会显示必须在哪里放置的图标。（ 57 X 57 去左边的方块）
*   拖动图标 png 文件并将其放在它所属的正方形中，然后对 @2x.png 执行相同的步骤。

现在，如果您转到 ufo.plist 文件，您会看到图标部分中包含的图标。

希望这可以帮助

阿德里安*

# c++ - c++程序结束时指针会从内存中释放吗？

> ID：12875177
> 
> 赞同：8
> 
> 时间：2012-10-13T17:30:19.790
> 
> 标签：c++, memory, pointers

这是一个初学者问题，但我学习了 c# 编程，现在我正在转向 c++，现在我正在使用指针，我知道当我完成它们但程序关闭时，我必须从内存中释放它们他们是从记忆中删除还是留在那里？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-13T17:37:25.793

当您的程序结束时，它使用的所有内存（无论是否动态分配）都将返回给操作系统。它是 C 程序、C++ 程序、C# 程序还是您可能正在编写的任何其他类型的程序都没有关系。

Now, just because the OS will reclaim the memory doesn't mean you can be cavalier about memory management. While your program runs, you should try to take care of freeing any memory you're done with. Not doing so will cause "memory leaks", and those can certainly affect your program and the system it's running on, at least while your program is running.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T17:35:24.207

请注意，它不是需要释放的指针，而是指向的对象。

答案取决于指针指向的内存类型：

*   如果指针指向自动对象，则隐式清除对象。
*   如果指针指向使用`new`or`new []`或`malloc`or动态分配的对象`calloc`，则需要通过分别调用`delete`or `delete []`or来显式释放它们`free`。

请注意，建议谨慎使用动态分配，如果必须，请使用智能指针而不是原始指针。

**编辑：**
如果您的问题是：
**如果您的程序没有释放内存并退出会发生什么？**

答案是：
操作系统回收它。操作系统只是收回分配给它不知道您的程序是否泄漏内存的进程的所有内存。
但是，自己清理自己的烂摊子始终是一个好习惯。
如果你有一个类的析构函数确实有带有副作用的代码，那么不调用`delete`动态分配的指针会导致未定义的行为，它会使你的代码完全悬在编译器的摆布之下。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-10-13T17:33:37.703

您分配的内存（例如使用 New 关键字）将保留在那里，除非您将其删除！如果您在谈论指针本身，那么是的！在您的程序结束时，指针将被清除！

# c - 显式 glibc 链接后出现“分段错误（核心转储）”。

> ID：12875179
> 
> 赞同：0
> 
> 时间：2012-10-13T17:30:25.430
> 
> 标签：c, gcc, linker, glibc

出于某种原因，我必须手动链接 glibc。我正在尝试运行以下程序：

```
#include <stdio.h>
int _start(){
    printf("ABCDE");
    return 0;
} 
```

为了编译它，我输入以下命令：

```
gcc -c main.c -o main.o
gcc -L/lib/x86_64-linux-gnu/ -nostdlib main.o -o main -lc 
```

不幸的是，运行后`./main`我只得到分段错误（核心转储）

谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T17:50:53.263

一个`_exit(0);`应该做的伎俩。

但是，您要达到什么目的？ [样本](http://learningpearls.blogspot.in/2011/02/start-function-inside-c.html)

# java - 如何展平整个包层次结构？

> ID：12875182
> 
> 赞同：0
> 
> 时间：2012-10-13T17:31:05.237
> 
> 标签：java, package, hierarchy, flatten

如果我想展平我所有的包层次结构，我该如何继续，有什么陷阱？

*请注意，这个问题不是关于我为什么要这样做，而是关于如何。例如，有效的原因将包括（但不限于）使 Proguard 成为有用程序的几个原因。*

首先，我想保持类名不变，但删除所有层次结构。

所以：

*   *com.acme.example.SomeClass*应该变成“SomeClass”或
    “a.SomeClass”
*   *com.acme.sample.AnotherClass*应该成为
    “AnotherClass”或“a.AnotherClass”

我做了一个快速检查，在大约一千个班级中没有两个名字重复：

```
find . -iname "*java" | sed 's/.*\///g' | sort | wc -l 
```

和：

```
find . -iname "*java" | sed 's/.*\///g' | sort | uniq | wc -l 
```

两者都提供相同数量的*.java*文件（所以我很确定 *.java 文件中没有任何“重复名称”）。

我正在考虑编写一个shell脚本，它将：

*   删除（或修改）包装线
*   删除每个“import com.acme ....”行

这行得通吗？

可能是什么阻止了它的工作？从公共/受保护/默认/私有可见性的角度来看会发生什么？

我想反射会在这里破坏，但幸运的是我们没有做任何事情。

请注意，我只想在我自己的类上这样做：我不想修改外部 API/jar。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T17:44:47.940

你应该看看[proguard](http://Proguard.sourceforge.net)。这是一个代码混淆器，有很多选项，包括扁平化包，如果你不想的话，不混淆其他东西。

# c++ - 类定义之外的部分模板特化

> ID：12875187
> 
> 赞同：5
> 
> 时间：2012-10-13T17:31:17.513
> 
> 标签：c++, templates

我可以在类声明中使用部分模板特化

```
template<class T1, class T2>
struct A
{
    void foo() { cout << "general"; }
};

template<class T1>
struct A<T1, int>
{
    void foo() { cout << "partial specialization"; }
}; 
```

但是当我试图在类声明之外这样做时

```
template<class T1, class T2>
struct A
{
    void foo();
};

template<class T1, class T2>
void A<T1, T2>::foo() { cout << "general"; }

template<class T1>
void A<T1, int>::foo() { cout << "partial specialization"; } 
```

我收到以下错误：

> 不完整类型 «struct A < T1, int >» 的无效使用

当您想重新定义所有成员时，使用第一种方法不是问题，但是如果您只想重新定义一个方法而不为所有其他方法重复代码怎么办？

那么，**是否可以在类定义之外使用部分模板特化？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T20:38:05.097

> 当您想要重新定义所有成员时，使用第一种方法不是问题，但是如果您只想重新定义一个方法而不为所有其他方法重复代码怎么办？

这是可以使用特征技术的地方。见[http://www.boost.org/community/generic_programming.html#traits](http://www.boost.org/community/generic_programming.html#traits)

一些用法：

```
template <class T1, class T2>
struct ATraits {
   static void foo() {}
};

template <class T1>
struct ATraits<T1,int> {
   static void foo() {}
};

template <class T1, class T2>
struct A {
   void foo() { ATraits<T1,T2>::foo(); }
}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-13T18:15:20.877

在你失败的例子中：

```
template<class T1>
void A<T1, int>::foo() { cout << "partial specialization"; } 
```

您指的是尚未定义的 A 特化（您仅在第二个示例中定义了完整模板）。

如果您在引用它之前添加专业化，它确实应该工作：

```
template <class T1>
struct A<T1, int>
{
  void foo ();
};

template <class T1>
void A<T1, int>::foo ()
{
  /* something */
}; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-13T17:51:09.720

c++ 标准禁止在没有完全特化外部模板的情况下特化方法。所以是的，这是不可能的。我不确定它是否对 c++11 有效，但我怀疑它是有效的。

解决此问题的一种方法是像在第一个示例中所做的那样专门化外部模板。

顺便说一句，这可能是另一种解决方法：

```
template<class T1, class T2>
struct A
{
    template<unsigned int I>
    void foo() { cout << "general"; }

    template<>
    void foo<2> () { cout << "specialization"; }

}; 
```

这是有效的，因为这不是专门化的，而是该方法的不同模板。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-19T13:17:23.077

此处讨论了相同的主题： [“不完整类型的无效使用”错误与部分模板专业化](https://stackoverflow.com/questions/165101/invalid-use-of-incomplete-type-error-with-partial-template-specialization/)

+1 用于 tozka 的解决方案，如果 A 除了 foo() 之外不需要知道 I，这是一个很好的解决方法。否则，请查看上面提到的问题的答案。

# python - 用于存储巨大（> 5GB）排序文件的数据结构

> ID：12875188
> 
> 赞同：2
> 
> 时间：2012-10-13T17:31:20.430
> 
> 标签：python, algorithm

假设我们有一个包含员工姓名和年龄列的 csv 文件（>5GB）。该文件按年龄排序。现在，我希望用户使用 Age 搜索这个文件。有人可以指导我哪种数据结构最适合此要求吗？

**示例**：

我的文件.csv

```
25 ABC    
25 MNP
14 XYZ
14 PQR 
```

**输入**：

```
14 
```

**输出**：

```
XYZ
PQR 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T17:43:56.437

假设文件太大而无法放入 RAM，您可以创建一个索引，这样您就可以最大限度地减少磁盘读取次数（这比 RAM 读取慢得多）。

一些常用的磁盘索引是[B+ 树](http://en.wikipedia.org/wiki/B+_tree)（顶层存储在 RAM 中）和[哈希表](http://en.wikipedia.org/wiki/Hash_table)。

或者，您可以将其存储为[SQL](http://en.wikipedia.org/wiki/SQL)表并让库自行处理。

另一种选择，由于范围相当小（我无法想象年龄大于 200），您可以使用 200 个（或可能更少）不同的文件：`names_1,names_2,...,names_200`where`names_i`包含所有年龄的名称列表`i`。
（此外，由于在许多条目中都省略了年龄这种方式，您也许可以将它实际放入 RAM 作为 a `dictionary:age->list<names>`）

如果数据适合 RAM - 您可以使用排序数组（如果不经常/不期望数据更改）并使用二进制搜索。
如果您需要对数据进行更改，您可以使用其他一些结构，例如 RAM 上的哈希表，或[自平衡 BST](http://en.wikipedia.org/wiki/Self-balancing_binary_search_tree)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T18:07:30.890

您还没有说明您的基础设施是否允许使用内存解决方案。如果是这样，看到你已经用 python 标记了你的问题，我会考虑将文件的内容读入 defaultdict。如果性能可以接受，您有一个基于标准库的快速解决方案

```
>>> from collections import defaultdict
>>> z = defaultdict(list)
>>> z[25].append("ABC")
>>> z[25].append("MNP")
>>> print z[25]
['ABC', 'MNP'] 
```

# sql - 找到行的等级

> ID：12875191
> 
> 赞同：0
> 
> 时间：2012-10-13T17:31:39.353
> 
> 标签：sql, sql-server

我有一个包含一些记录的表，我想检查行的排名，如果排名大于 100，我将设置权限。
我编写了流动代码来查找记录的等级，但是当我使用没有附加字段（如用户名或家庭）的 rank 或 row_number 函数时，它不起作用，尽管它确实适用于附加字段之一。

```
SELECT * from
(Select username,
Rank() over(order by point desc) as  'ranking' 
from student) t
 where (username='test') 
```

我想找到一条记录并设置一个具有该记录等级的变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T17:50:20.310

我不知道你的 sqlser 版本是否支持 cte。如果它是 >= 2005 sqlserver [，这是您的查询](https://data.stackexchange.com/stackoverflow/query/82419)：

```
create table #student ( username varchar(10), point int );

insert into #student values
( 'a', 10 ),
( 'b', 20 ),
( 'test', 15 );

declare @var int;

with cte as (
  select username,
  Rank() over(order by point desc) as  [ranking] 
  from #student
)
select  @var = [ranking]  from cte where username = 'test';
print str( @var ); 
```

结果：

```
2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T17:40:46.460

可能是这个查询？

```
Select count(*)+1 as rank from student 
where point > (select point from student where username = 'test') 
```

应该返回点数少于所选用户的用户数

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T18:04:38.550

为了`RANK`工作，您需要指定`PARTITION BY`要对其进行排名的列，然后，`ORDER BY`如果出现两个排名列具有相同值并且存在冲突的情况，则按列排序将排序通过订购那些有冲突的记录来发布..

# matlab - [Matlab][Simulink] 如何在二维数组中查找特定值？

> ID：12875194
> 
> 赞同：0
> 
> 时间：2012-10-13T17:31:42.107
> 
> 标签：matlab, simulink, lookup-tables

我遇到了必须使用 Simulink 的情况。

我有一个包含数据的 csv 文件（1000 行 x 6 列）。我需要搜索我的 csv 文件的第 6 列并找到与我要查找的内容最接近的匹配项，然后返回第 1 2 3 4 列。

为简单起见，让我们用一个较小的版本来解决我的问题。

CSV 文件示例

```
0  0  0  0 0 20
0 10 15  2 4 30
1 50  2 54 2 40 
```

我搜索 21。我发现第 1 行第 6 列最接近 21。然后我返回 0 0 0 0（前四列。

我搜索 34，发现第 3 行第 6 列最接近 34。然后我返回 1 50 2 54。

希望这能解释我需要什么。

最初我使用 find(..) 在 matlab 中编写了一个工作脚本并且它可以工作，但这**必须**使用 simulink 来完成。

我注意到有一个 2d loopup table 块可以工作，但是，看来我需要事先知道我的索引。

如果有人能指出我可以使用哪些块的正确方向，并且我可以用谷歌搜索如何使用它们，那将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T17:17:51.947

正如我在评论中所说，您最好的选择是简单地使用[Matlab Function](http://www.mathworks.com/help/simulink/slref/matlabfunction.html)或[Interpreted Matlab Function](http://www.mathworks.com/help/simulink/slref/interpretedmatlabfunction.html)模块，以便将您已经存在的函数合并到您的 Simulink 模型中（如果您不需要重新发明轮子，则无需重新发明轮子） ）。

如果您在这必须是“所有 Simulink”（即没有用户定义的模块）的约束下工作，那么可能会有帮助的几个模块是[Selector](http://www.mathworks.com/help/simulink/slref/selector.html)、[Find](http://www.mathworks.com/help/simulink/slref/find.html)、[Min](http://www.mathworks.com/help/simulink/slref/minmax.html)和[Compare To Zero](http://www.mathworks.com/help/simulink/slref/comparetozero.html)。

我可能采取的一种方法是使用选择器来隔离第 6 列。找出列中每个值与您尝试匹配的值之间的“误差”（即取差值的绝对值）。使用`Min`块找到最小误差。从您的错误向量中减去该最小错误，以便最接近匹配的索引现在的值为 0。`Compare To Zero`然后`Find`您应该能够确定最接近匹配的索引。一旦你有了它，你就可以用它来驱动另一个`Selector`块，以便根据需要选择元素。

There are other blocks that I can think of that might be really helpful ([Find Local Maxima](http://www.mathworks.com/help/vision/ref/findlocalmaxima.html) is something that comes to mind that I bet you could incorporate into a solution); however, they require additional toolboxes.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-23T23:08:25.747

You can achieve this using a *Minimum* block. Set it's *mode* to *index* so that it outputs the index of the item having minimum error.

Pass this index into a *Variable Selector* block, taking the original rows/columns via *In1* and the index of the minimum on *Idx*.

# java - 如何使用json从java发布多个数组

> ID：12875197
> 
> 赞同：0
> 
> 时间：2012-10-13T17:31:45.563
> 
> 标签：java, android, json

我有 3 个数组。比如说，X 是一个具有 3 个值 {X1,X2,X3} 的字符串数组。Y 是具有 3 个值 {Y1,Y2,Y3} 的整数数组。Z 是具有 3 个值 {Z1,Z2,Z3} 的列表。有人可以告诉我如何使用 json 发布这些内容，然后使用 php 解析以将它们检索到变量中，例如 M、N、O。但是当我为每个变量（X，Y，Z）执行此操作时，它会发布一个参考 ID。我正在尝试使用

```
JSONObject json = new JSONObject();
json.put("X", X.tostring());
json.put("Y", Y.tostring());
json.put("Z", Z.toString()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T17:35:15.877

将 X、Y 和 Z 转换为 JSON 数组：

```
json.put("X", new JSONArray(Arrays.asList(X))); 
```

# xml - 有没有更好的方法来获取 XPath 查询结果的父节点？

> ID：12875203
> 
> 赞同：25
> 
> 时间：2012-10-13T17:32:45.253
> 
> 标签：xml, dom, xpath

有这样的标记：

```
<div class="foo">
   <div><span class="a1"></span><a href="...">...</a></div>
   <div><span class="a2"></span><a href="...">...</a></div>
   <div><span class="a1"></span>some text</div>
   <div><span class="a3"></span>some text</div>
</div> 
```

我有兴趣获得所有`<a>`并且`some text` **只有**在相邻`span`是类的情况下`a1`。所以在整个代码的最后，我的结果应该`<a>`来自第一个`div`和`some text`第三个。如果`<a>`并且`some text`在内部`span`或`div`将具有`class`属性会很容易，但没有运气。

我现在正在做的是寻找`span`类`a1`：

```
//div[contains(@class,'foo')]/div/span[contains(@class,'a1')] 
```

`query()`然后我得到它的父级并以该父级作为上下文节点再做一次。这看起来远非高效，所以问题显然是是否有更好的方法来实现我的目标？

* * *

**答案附录**

根据@MarcB[接受的答案](https://stackoverflow.com/a/12875226/1235698)，使用的正确查询是：

```
//div[contains(@class,'foo')]/div/span[contains(@class,'a1')]/.. 
```

但因为`<a>`它可能更好地使用：

```
//div[contains(@class,'foo')]/div/span[contains(@class,'a1')]/../a 
```

得到`<a>`而不是它的容器。

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-10-13T17:35:15.160

xpath 查询的好处是您可以将它们视为文件系统路径，因此只需

```
//div[contains(@class,'foo')]/div/span[contains(@class,'a1')]/..
                                                              ^^ 
```

将找到所有低于 .foo 节点的 .a1 节点，然后向上移动一级到 a1 节点的父节点。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-10-13T17:50:57.067

**比使用 reverse axis*更好*的表达式**：

```
//div[contains(@class,'foo')]/div[span[contains(@class,'a1')]] 
```

这将选择任何`div`一个`div`其`class`属性包含字符串“foo”的子元素，并且（选定的`div`）具有一个属性包含字符串“a1”的`span`子元素。`class`

**基于 XSLT 的验证**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="/">
  <xsl:copy-of select=
  "//div[contains(@class,'foo')]
          /div[span[contains(@class,'a1')]]"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<div class="foo">
   <div><span class="a1"></span><a href="...">...</a></div>
   <div><span class="a2"></span><a href="...">...</a></div>
   <div><span class="a1"></span>some text</div>
   <div><span class="a3"></span>some text</div>
</div> 
```

**计算 XPath 表达式并将所选元素复制到输出：**

```
<div>
   <span class="a1"/>
   <a href="...">...</a>
</div>
<div>
   <span class="a1"/>some text</div> 
```

* * *

**二、关于通过其类之一访问 Html 元素的备注**：

如果已知元素只能有一个类，则根本没有必要使用`contains()`

**不要使用**：

```
//div[contains(@class, 'foo')] 
```

**使用**：

```
//div[@class = 'foo'] 
```

**或者，如果可能有前导/尾随空格，请使用：**

```
//div[normalize-space(@class) = 'foo'] 
```

**一个关键问题**：

```
//div[contains(@class, 'foo')] 
```

是这会选择任何`div`类，例如“myfoo”、“foo2”或“myfoo3”。

**如果元素可能有多个类，为了避免上述问题，正确的 XPath 表达式是**：

```
//div[contains(concat(' ', @class, ' '), ' foo ')] 
```

# c# - 使用 Activator 创建实例

> ID：12875204
> 
> 赞同：2
> 
> 时间：2012-10-13T17:33:03.130
> 
> 标签：c#, reflection, activator

假设我们有一些类

```
class Class1{ }
class Class2{ }
class Class3{ } 
```

我有一个类型变量

```
Type t = /*some type unknown at compile-time*/; 
```

变量`t`是 Class1 或 Class2 或 Class3。我想创建该类的一个实例。据我所知，我可以使用以下语句：

```
object instance = Activator.CreateInstance(t); 
```

但我收到一个对象。问题是：我如何将此对象转换为变量中的类型`t`。或者也许有人可以提出解决方法。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-13T17:36:38.657

如果你想避免反射，那么

```
public interface IClass { }
class Class1 : IClass { }
class Class2 : IClass { }
class Class3 : IClass { }

IClass instance = (IClass)Activator.CreateInstance(t); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-13T17:37:30.887

除非有一些共同的基类或接口，所有 3 共享，你不能 - 你可以称之为“对象”。考虑让它们都实现一个接口，并转换为该接口。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-13T17:56:27.407

您可以使用以下`dynamic`关键字：

```
dynamic instance = Activator.CreateInstance(t); 
```

这就像您使用`object`. 处理*反射*时很常见。

更多信息[请看这里](http://msdn.microsoft.com/en-us/library/dd264736.aspx)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-14T08:15:00.450

[有人告诉你你不能](https://stackoverflow.com/a/12875245/402022)，但你可以。

首先让我们看看你的代码：

```
class Class1{ }
class Class2{ }
class Class3{ }

void Main()
{
    Type t = /*some type unknown at compile-time*/;
    object instance = Activator.CreateInstance(t);
} 
```

还有你的问题：

> 如何将此对象转换为变量 t 中的类型。

好吧，如果我只看这些信息，那么答案是：你不能，因为变量中可能有无限的类型集，`t`事实上，其中一些可能是在编写这段代码之后定义的（他们还不存在）。

好吧 - 似乎是 - 还有一些其他信息：

> 变量 t 是 Class1 或 Class2 或 Class3

这意味着您有一组可能在变量中的可能类型`t`。

考虑到这一点，您可以检查它们，例如：

```
class Class1{ }
class Class2{ }
class Class3{ }

void Main()
{
    var possibleTypes = new Type[]
    {
        typeof(Class1),
        typeof(Class2),
        typeof(Class3)
    };
    Type t = possibleTypes[(new Random()).Next(possibleTypes.Length)];
    object instance = Activator.CreateInstance(t);
    if (t.Equals(typeof(Class1)))
    {
        DoSomethingWithClass1(instance as Class1);
    }
    else if (t.Equals(typeof(Class2)))
    {
        DoSomethingWithClass2(instance as Class2);
    }
    else if (t.Equals(typeof(Class3)))
    {
        DoSomethingWithClass3(instance as Class3);
    }
}

void DoSomethingWithClass1(Class1 instance)
{
    //...
}

void DoSomethingWithClass2(Class2 instance)
{
    //...
}

void DoSomethingWithClass3(Class3 instance)
{
    //...
} 
```

它工作得很好，并且在每个类的方法中，您可以使用适合该类的任何内容。

“它不是很通用” - 你说 - “我不想每次出现新类时都编写新方法！”。我同意，你可以在反射部门解决这个问题。但是，老实说，这是没有意义的。正如您已经被告知的那样，这些类没有任何共同点，因此您最好[创建一个接口来避免 Reflection](https://stackoverflow.com/a/12875234/402022)。

另外，你想用那个对象做什么？您可能会找到所有类共有的方法，并在相关类将从现在开始实现的新接口中使用这些方法。

好的，我知道在撰写本文时已经有一个公认的答案，但我还是想指出：是的，你可以。（每次我发现有人说你不能做某事时，我喜欢做双重检查：P）。

# jquery - 带有 CSS 的全高列？

> ID：12875207
> 
> 赞同：1
> 
> 时间：2012-10-13T17:33:19.777
> 
> 标签：jquery, html, css

**[http://jsfiddle.net/ww7dN/](http://jsfiddle.net/ww7dN/)**

我正在尝试设计一个一直“拆分”为两种颜色的页面（左侧为绿色，右侧为蓝色）。在每个部分中，我都想写一列。第一个问题是颜色不会填满整个页面。第二个问题是，当我调整页面大小时，水平滚动条不会出现。

我究竟做错了什么？或者你有更好的方法来达到这个效果吗？

如果这对 CSS 很复杂，我不介意 jquery 解决方案。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T17:36:36.427

你`#container`没有职位，所以它的孩子不知道该填补谁（的鞋子）......

[http://jsfiddle.net/ww7dN/1/](http://jsfiddle.net/ww7dN/1/)

尝试添加到#container：

```
#container {
  position:absolute;
  height:100%;width:100%;
  left:0;top:0;
} 
```

* * *

对于第二个问题，更改`overflow:hidden`为`overflow:auto;`要水平滚动的容器。

**从您的评论更新** 尝试添加

```
BODY {
  overflow-y:auto;
} 
```

到你`body`的 css

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T17:40:40.990

尝试像这样更改下面的 CSS：

```
#public {
position: absolute;
width:100%;
height:100%;
color:#fff;
}
#public #container {
height:100%;
} 
```

此外，overflow:hidden 会阻止滚动条出现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T17:38:57.393

给一个位置：绝对到左div；

# c# - Kinect UnsatisfiedLinkError: SimpleOpenNI.SimpleOpenNIJNI.swig_module_init()V

> ID：12875212
> 
> 赞同：1
> 
> 时间：2012-10-13T17:33:58.653
> 
> 标签：c#, kinect, processing, openni

我正在尝试按照 Greg Borenstein 的“让事物看到”中的步骤进行操作。[http://www.amazon.co.uk/Making-Things-See-Processing-MakerBot/dp/1449307078](http://www.amazon.co.uk/Making-Things-See-Processing-MakerBot/dp/1449307078)

虽然我以前使用过 Kinect，但我使用的是 Windows SDK，而不是使用它建议的 OpenNI 库。所以我按照建议卸载了 SDK 和设备驱动程序。但是我很难让 OpenNI 与这些示例一起工作。尝试在 Processing (http://www.processing.org/download/) 中运行 c# 示例时，我收到此错误：

> UnsatisfiedLinkError: SimpleOpenNI.SimpleOpenNIJNI.swig_module_init()V

其中有以下信息：

> 无法加载 SimpleOpenNI 库 (SimpleOpenNI32) : java.lang.UnsatisfiedLinkError: C:\Users\Ryan\Documents\Processing\libraries\SimpleOpenNI\library\SimpleOpenNI32.dll: 找不到依赖库 验证您是否正确安装了 SimpleOpenNI。[http://code.google.com/p/simple-openni/wiki/Installation](http://code.google.com/p/simple-openni/wiki/Installation) 线程“动画线程”中的异常 java.lang.UnsatisfiedLinkError: SimpleOpenNI.SimpleOpenNIJNI.swig_module_init(Native Method) 处 SimpleOpenNI.SimpleOpenNIJNI.(SimpleOpenNIJNI.java:1575) 处 SimpleOpenNI.SimpleOpenNIJNI.swig_module_init()V 处的 SimpleOpenNI.ContextWrapper.(ContextWrapper .java:54) 在 SimpleOpenNI.SimpleOpenNI.(SimpleOpenNI.java:212) 在 DepthImage.setup(DepthImage.java:41) 在 processing.core.PApplet.handleDraw(PApplet.java:2103) 在 processing.core.PGraphicsJava2D。 requestDraw(PGraphicsJava2D.java:190) 在 processing.core.PApplet.run(PApplet.java:2006) 在 java.lang.Thread.run(Thread.java:662)

并且在互联网上搜索了几次之后，我还没有找到解决这个问题的方法。我已经看到它表明我只需要在这里重新启动窗口：[http](http://code.google.com/p/simple-openni/issues/detail?id=27) ://code.google.com/p/simple-openni/issues/detail?id=27 虽然尝试了两次，但我仍然有错误。

注意：我宁愿使用 Windows Visual Studio 而不是 Processing，虽然我不确定如何导入库，或者我是否应该引用它。我非常习惯于编码和开发，但不太习惯使用诸如此类的库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T19:27:39.587

我在 WindowsXP 上将 SimpleOpenNI 与 Processing 一起使用，它在我的机器上运行良好。这是我的配置：

> WinXP SP3 with OpenNI dev 32bit (OpenNI1.5.4.0,Nite1.5.2.21,avin2 SensorKinect5.1.2.1) and Processing 1.5.1 with SimpleOpenNI 0.20 (also test with 0.27)

AFAIK SimpleOpenNI 使用 JNI 与 OpenNI 库和驱动程序进行通信，因此上述错误可能来自两个地方：

1.  OpenNI 未正确安装
2.  SimpleOpenNI 库未正确安装

检查 OpenNI 是否安装正确的最简单的方法是在它附带的示例上运行，例如**NiViewer**（应该在 中`C:\Program Files\OpenNI\Samples\Bin\Debug`）。如果没有运行，则说明 OpenNI 安装有问题。

我注意到 SimpleOpenNI 项目页面上有 Sensor Driver/OpenNI/Nite 安装程序，但我不记得在我的机器上使用过这些安装程序。我已经手动安装了：

1.  OpenNI 32bit 不稳定
2.  Nite 32bit 不稳定
3.  avin2 的兼容 SensorKinect 驱动程序

按上述顺序。尝试卸载/清理然后重新安装并尝试 OpenNI 示例。

如果正确安装了 OpenNI/Nite/SensorKinect 并且您可以运行示例，那么 Java/JNI 方面的问题。检查以下内容：

1.  SimpleOpenNI 文件夹位于`%homepath%\My Documents\Processing\libraries`
2.  OpenNI 系统变量 ( `OPEN_NI_BIN,OPEN_NI_INCLUDE,OPEN_NI_INSTALL_PATH,OPEN_NI_LIB`) 在 Windows 的环境变量中设置

您还注意到您宁愿使用 Visual Studio 而不是 Processing。我同意，Processing 并不是最好的 IDE（它针对初学者，并且是最小/简单的 AFAIK）。如果您想在更好的环境中继续使用 Making Things See 中的确切代码，我建议您使用[eclipse](http://www.eclipse.org/downloads/download.php?file=/technology/epp/downloads/release/juno/SR1/eclipse-java-juno-SR1-win32.zip)和[Proclipsing 插件](http://code.google.com/p/proclipsing)。Eclipse 是一个不错的 IDE（自动完成/重构/等），Proclipsing 可以轻松管理处理项目（包括使用 SimpleOpenNI 等外部库的项目）。

想到的另一件事是将[OpenFrameworks 与 VisualStudio](http://www.openframeworks.cc/setup/vs-2010/)和[ofxOpenNI](https://github.com/gameoverhack/ofxOpenNI)插件一起使用。OpenFrameworks 有点类似于 Processing 并且 ofxOpenNI 包装器有一些不错的特性，但是您可能需要将 Processing/SimpleOpenNI 语法移植到 oF/ofxOpenNI。

就我个人而言，我认为 SimpleOpenNI 非常容易上手（我见过的最好的 OpenNI 包装器），如果您刚开始进行 Kinect 开发并且想要轻松地遵循 Make Things See 示例，那么坚持使用 Processing 可能会更简单（有或没有 Eclipse）和 SimpleOpenNI。取决于你如何解决这个问题：直接使用示例代码或者花费额外的精力来移植它会更简单，但更多地了解 OpenNI 本身的工作原理（没有包装器/“训练轮”）。

我们的想法是以最舒适的方式开始。SimpleOpenNI 确实使事情变得更简单，但如果您不习惯 Processing/Java 并且是一位经验丰富的开发人员，您可能可以使用文档了解如何在 C# 中使用原始 OpenNI API。

如您所见，OpenNI 还附带了 C# 示例。例如`C:\Program Files\OpenNI\Samples\SimpleViewer.net`. 我建议将 SimpleViewer.net.exe 从`obj\x86\Debug`文件夹移回`obj`或更改`SAMPLE_XML_FILE`MainWindow.cs中的路径

[有点题外话：使用桥接库](http://code.google.com/p/kinect-mssdk-openni-bridge/)实际上可能同时使用官方的 Kinect SDK 和 OpenNI ，但我自己还没有使用过，所以不能根据经验提供建议。

高温高压

# javascript - Javascript 如何在 document.location.href 中添加 target="_parent"

> ID：12875213
> 
> 赞同：3
> 
> 时间：2012-10-13T17:34:07.407
> 
> 标签：javascript, jquery

```
document.location.href="http://verttgrettest.com/testpaper.aspx?VideoId=1" 
```

Javascript 如何在 document.location.href 中添加 target="_parent"

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-13T17:40:20.280

您不能，这`.href`实际上只是您要重定向到的 URL。您必须直接更改`.href`要定位的框架，而不是您所在的窗口/框架的 href

```
parent.document.location.href = 'http://...' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-13T17:39:28.907

```
window.open(
  'http://verttgrettest.com/testpaper.aspx?VideoId=1',
  '_blank' 
); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-13T17:40:03.583

//但弹出窗口阻止程序可能会阻止它

window.open('http://verttgrettest.com/testpaper.aspx?VideoId=1')

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-17T05:22:32.773

我使用以下代码：

```
if (parent)
    parent.document.location.href = '/iframe_parent';
else
    location.href = '/no_iframe'; 
```

# jquery - 使用 jquery 或 javascript 对网页的图像扫描仪效果

> ID：12875216
> 
> 赞同：0
> 
> 时间：2012-10-13T17:34:23.193
> 
> 标签：jquery, jquery-effects

我需要为网站开发一个部分，在该部分中我需要在所选图像上显示扫描仪类型的效果。

这将类似于：http: [//blog.gabrieleromanato.com/2011/11/jquery-scanner-effect-on-a-slideshow/](http://blog.gabrieleromanato.com/2011/11/jquery-scanner-effect-on-a-slideshow/)

我需要的是黑暗中的图像和图像上从左到右的垂直光效，我在光源下方显示图像的各个部分。一旦光穿过任何部分，它就会再次变暗。

请指教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T17:50:39.200

我看到两种选择，具体取决于您想要的浏览器支持，您可以在图像上的 div 中为 CSS 渐变设置动画，您的渐变类似于

```
linear-gradient(to right, black x%, transparent (x+w)%, black) 
```

x 是闪电效果的开始，w 是宽度（您在 x 上进行动画处理）。当然，您可以在黑色上使用一些小透明度

您也可以在图像上使用三个 div：一个宽度为 x 的黑色，一个宽度为 w 的透明，另一个黑色到最后，并为三个 div 设置动画。

# javascript - JavaScript 控制台和 QML WebView

> ID：12875221
> 
> 赞同：1
> 
> 时间：2012-10-13T17:34:59.603
> 
> 标签：javascript, debugging, webview, console, qml

我可以在 QML 中访问一些 JavaScript 控制台吗？页面静默失败，我想查看 JavaScript 错误。

我正在使用 QML WebView

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T09:23:32.383

您可以将以下设置添加到 QML 中的 webview 定义中，然后右键单击 webview ，您应该能够看到“ `Inspect`”按钮单击它应该打开开发人员工具。

```
WebView {

............
............
............
settings.developerExtrasEnabled : true;

} 
```

# actionscript-3 - 池化 mx 窗口

> ID：12875225
> 
> 赞同：0
> 
> 时间：2012-10-13T17:35:13.303
> 
> 标签：actionscript-3, apache-flex, flex4

我想合并 mx Window 组件，因为它非常复杂，而且创建速度很慢。但是当调用池对象中的 addElement 时会出现问题。所以，我想视觉元素不是在以下行之后创建的：new myMXWindowsClass()?

如何在后台创建自定义窗口组件并在以后使用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T17:44:18.987

> 如何在后台创建自定义窗口组件并在以后使用它？

一般概念是使用工厂类。Factory 类将创建和管理组件的实例。Flex 框架甚至包括一个[ClassFactory](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/core/ClassFactory.html)，尽管我认为除了创建它们之外没有任何作用。您可以扩展它 - 或创建自己的 - 以跟踪使用的类和未使用的类。然后，每当请求一个新实例时，检查是否有可用的未使用实例并提供它。如果不; 创建一个并提供它。

我在 Flextras 日历中使用类似的技术来处理更改月份或在周、月和日视图之间移动时显示的天数。我还在我的手机游戏中使用这种技术来处理用于创建游戏板的 BitMapData。

# android - android mediacontroller - 在布局xml中定义媒体控制器

> ID：12875232
> 
> 赞同：2
> 
> 时间：2012-10-13T17:36:24.310
> 
> 标签：android, android-mediaplayer

在我阅读的 MediaController 小部件的 android 文档中

> 在 xml 布局中创建 MediaController 时，show() 和 hide() 等函数无效。

这表明媒体控制器可以在 xml 布局中定义。因为我想要一个永远不会隐藏且不关注焦点的控制器，以便可以单击屏幕其余部分上的按钮，所以我尝试采用 xml 布局方式。由于我无法让它工作，我正在寻找一个关于如何通过在布局 xml 中定义来使用 MediaController 的示例。

任何提示高度赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-04T21:36:44.593

我找到了一种适用于 Android 2.x 的解决方法。遗憾的是，它似乎在 4.x 中不起作用。

您需要调用`setAnchorView()`以显示 MediaController。此代码在 Android 2.2 和 2.3.6 中对我有用，但在 4.0.4 中导致崩溃：

```
mediaController.setAnchorView(mediaController); 
```

我也尝试将活动内容视图传递给`setAnchorView()`，但它仍然在 4.0.4 中崩溃。

最可靠的方法是以编程方式实例化它，如文档中所述：

> 使用这个类的方法是以编程方式实例化它。

# watir-webdriver - 使用 Selenium webdriver 单击时，等待新页面出现

> ID：12875236
> 
> 赞同：0
> 
> 时间：2012-10-13T17:36:45.620
> 
> 标签：watir-webdriver

我正在使用 Cucumber + WatirWebdriver 进行一些验收测试，我一直在想，在单击元素后，底层的 webdrivers 正在等待加载新页面。我是这么认为的，因为 Firefox 网络驱动程序似乎可以做到，正如我所期望的那样。该测试在 FF 中完美运行，但在（例如）ghostdriver（phantomjs webdriver）中没有。

```
Scenario: Follow a link on Amazon
    When I visit Amazon
    And click your account link
    Then the title should include "Recommended"

When /^I visit Amazon$/ do
  @browser.goto "http://amazon.com"
end

When /^click your account link$/ do
  @browser.link(:id, 'nav-your-amazon').click
end

Then /^the title should include "([^"]*)"$/ do |arg1|
  @browser.title.should include arg1
end 
```

最后，我在 ghostdrivers github 页面上打开了一个问题，并被告知 Selenium webdrivers 不打算在点击后等待页面加载。

[http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/WebElement.html#click](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/WebElement.html#click) ()

所以现在我的问题是，在点击等操作后等待页面加载是否有最佳实践？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T07:34:01.047

我无法为您提供 watir/Ruby 代码，因为我使用 Java 进行所有开发。但基本思想是你想设置一个方法/函数在你的 click() 之后等待。查看我在[Mink with Selenium2 上的帖子：关注所有重定向](https://stackoverflow.com/questions/12725974/mink-with-selenium2-follow-all-redirects/12730590#12730590)以获取想法。我在此处发布的方法是使用 selenium 的 FluentWait 对象设置的，以在单击后轮询元素。

这就是你想要做的：

```
.click() //click your button
.waitForElementMethod() //Fluent wait for element on page we want to wait for
//if element found continue
//else throw error 
```

Fluentwait 上的文档：http: [//selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/support/ui/FluentWait.html](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/support/ui/FluentWait.html)

祝你好运！

# matlab - 如何在matlab中使用鼠标移动楼梯图

> ID：12875238
> 
> 赞同：0
> 
> 时间：2012-10-13T17:36:53.247
> 
> 标签：matlab

![ ](../Images/935f9791c8c841bcab298949b75b9325.png)

我需要使用鼠标指针移动图形的楼梯模型。更具体地说，如果我使用鼠标指针移动水平箭头标记中显示的水平图......那么相邻层也应该随着相应的移动水平线移动。 ..对于垂直轴类似..我怎么能在matlab中做到这一点。请帮助我..

下面编写的代码完全移动了绘图，但我需要移动确切的线（楼梯图的垂直/水平）而不干扰其他线。请帮助我...

`

```
loglog(handles.axes1,a,b,'r')
hold on
% h=loglog(handles.axes1,x,y,'w')
h=stairs(handles.axes1,x,y,'w')
set(h,'ButtonDownFcn',@startmovit);

gui = get(gcf,'UserData');
drawnow
set(gcf,'windowbuttonmotionfcn','')
set(gcf,'windowbuttonupfcn','')

function startmovit(src,evnt)

% Unpack gui object
gui = get(gcf,'UserData');

% Remove mouse pointer
set(gcf,'PointerShapeCData',nan(16,16))
set(gcf,'Pointer','custom');

% Set callbacks
gui.currenthandle = src;
thisfig = gcbf();
set(thisfig,'WindowButtonMotionFcn',@movit)
set(thisfig,'WindowButtonUpFcn',@stopmovit);

% Store starting point of the object
gui.startpoint = get(gca,'CurrentPoint')
set(gui.currenthandle,'UserData',{get(gui.currenthandle,'XData') get(gui.currenthandle,'YData')});

% Store gui object
set(gcf,'UserData',gui);

function movit(src,evnt)
% Unpack gui object
gui = get(gcf,'UserData');

try
if isequal(gui.startpoint,[])
    return
end
catch
end

% Do "smart" positioning of the object, relative to starting point...
pos = get(gca,'CurrentPoint')-gui.startpoint
XYData = get(gui.currenthandle,'UserData')

% set(gui.currenthandle,'XData',XYData{1} + pos(1,1))
% set(gui.currenthandle,'YData',XYData{2} + pos(1,2))

set(gui.currenthandle,'XData',XYData{1} + pos(1,1))
set(gui.currenthandle,'YData',XYData{2} + pos(1,2))

% dx=XYData
% dy=XYData
% 
%  h=findobj(allchild(gca),'selected','on')
% set(h,'Xdata',get(h,'Xdata')+dx,'Ydata',get(h,'Ydata')+dy)

outData1 = get(gui.currenthandle,'XData')'
outData2 = get(gui.currenthandle,'YData')
%  newea=outData1
handles = guidata(gcf); 
drawnow;
% Store gui object
set(gcf,'UserData',gui);

function stopmovit(src,evnt)

% Clean up the evidence ...

thisfig = gcbf();
gui = get(gcf,'UserData');
set(gcf,'Pointer','arrow');
set(thisfig,'WindowButtonUpFcn','');
set(thisfig,'WindowButtonMotionFcn','');
drawnow
set(gui.currenthandle,'UserData','')
set(gcf,'UserData',[]) 
```

`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T00:34:56.940

这个问题不容易解决。您需要利用 Matlab 的绘图句柄系统，该系统用于管理图形窗口中的所有绘图元素。该过程将涉及确定您的鼠标何时指向您的线以及当用户单击并拖动这些元素时要执行的操作。

使用我提到的一些关键字进行一些研究，您最终会弄清楚这一点。

# google-chrome-extension - 检测配置文件何时关闭

> ID：12875239
> 
> 赞同：0
> 
> 时间：2012-10-13T17:36:58.490
> 
> 标签：google-chrome-extension

嗨，我是 chrome 扩展的新手，我的问题是“我们会在标题中”

基本上，我正在尝试创建一个扩展，该扩展适用于在 chrome 上具有多个配置文件并且只有单个配置的用户。它就像“主密码+”我知道 chrome 有一个名为安全配置文件的扩展程序，它非常适合在 chrome 浏览器上只有一个配置文件的用户。

我正在尝试制作类似的东西，但通过扩展能够检测配置文件何时关闭。因此，如果密码不正确，当用户再次尝试重新打开配置文件时，配置文件会关闭“即使它们是其他活动的 chrome 配置文件”，它仍然会要求输入密码。

因此，如果有人知道一种检测配置文件（而不仅仅是 chrome 窗口）何时关闭的方法，以便可以重置扩展程序或其他方式。请让我知道并感谢您提供的任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T04:40:32.367

好的想通了..就像使用一样简单

```
chrome.windows.onRemoved.addListener(function(window) {
    localStorage["ProfileWindow"] = "Closed";
});

chrome.windows.onCreated.addListener(function(window) {
_ProfileWindow = (localStorage["ProfileWindow"] != undefined) ? localStorage["ProfileWindow"] : "Closed";

if(_ProfileWindow == "Closed") {
   localStorage["ProfileWindow"] = "Open";
} 
```

基本上使用本地存储来永久记录窗口是打开还是关闭。虽然我认为可以使用更改，但这是一种享受。

# php - 当 url 是动态的时，登录后的 Facebook 重定向不起作用

> ID：12875246
> 
> 赞同：0
> 
> 时间：2012-10-13T17:37:42.160
> 
> 标签：php, facebook, facebook-graph-api, facebook-php-sdk

这是我的代码：

```
$loginUrl = $facebook->getLoginUrl(array(
    'scope'         => 'publish_actions',
    'redirect_uri'  => 'http://mysite.com/',
    )); 
```

它有效，但如果我删除 redirect_uri 它不再有效。

```
$loginUrl = $facebook->getLoginUrl(array(
    'scope'         => 'publish_actions'
    )); 
```

根据 Facebook 文档，redirect_uri 是可选的。 [https://developers.facebook.com/docs/reference/php/facebook-getLoginUrl/](https://developers.facebook.com/docs/reference/php/facebook-getLoginUrl/)

我试图将用户重定向到他们在登录之前使用的相同 url。

**更新：当 url 为 mysite.com/post23 时会出现此问题，但当 url 为 mysite.com/staticpage 或 mysite.com 时没有问题**

任何解决方法？

**编辑：它看起来像一个错误，它不适用于同一站点中的某些 url**

我会尝试向 Facebook 报告。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T17:57:03.570

如果没有给出 redirect_uri 参数，它应该重定向到当前 url。检查 base_facebook.php 中的 getLoginUrl 函数是否如下所示：

```
public function getLoginUrl($params=array()) {
    $this->establishCSRFTokenState();
    $currentUrl = explode("?",$this->getCurrentUrl());
    $currentUrl = $currentUrl[0];

    // if 'scope' is passed as an array, convert to comma separated list
    $scopeParams = isset($params['scope']) ? $params['scope'] : null;
    if ($scopeParams && is_array($scopeParams)) {
      $params['scope'] = implode(',', $scopeParams);
    }

    return $this->getUrl(
      'www',
      'dialog/oauth',
      array_merge(array(
                    'client_id' => $this->getAppId(),
                    'redirect_uri' => $currentUrl, // possibly overwritten
                    'state' => $this->state),
                  $params));
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T15:34:20.023

我像这样解决了这个奇怪的问题：

当用户未登录时，将此行包含在文件顶部：

```
$_SESSION['redir_after_auth'] = 'http://'.$_SERVER['HTTP_HOST'].$_SERVER['REQUEST_URI']; 
```

然后检查用户是否正在尝试登录并且该会话已设置

```
if (isset($_GET['action']) AND $_GET['action']=="fblogin" && isset($_SESSION['redir_after_auth'])) {
    header('Location: ' . $_SESSION['redir_after_auth']);
}

$loginUrl = $facebook->getLoginUrl(array(
        'scope'         => 'publish_actions',
        'redirect_uri'  => 'mysite.com/?action=fblogin'
        )); 
```

# modal-dialog - FancyBox jQuery 关闭模态图像时父图像消失

> ID：12875248
> 
> 赞同：1
> 
> 时间：2012-10-13T17:38:07.013
> 
> 标签：modal-dialog, fancybox

我对fancybox jquery 库没什么问题。

当我使用这行简单的代码时：

```
$(document).ready(function() {
    $(".fancybox").fancybox();
}); 
```

它显示模态图像 好的，但是当我单击关闭时，父页面上的原始单击图像消失了？

单击关闭按钮后，我可以使用此代码示例重新加载原始页面图像，但重新加载不是一个好的选择。

```
 $(document).ready(function () {
        $(".fancybox").fancybox({
            afterClose : function() {location.reload();return;}
        });​
    }); 
```

我的问题是如何防止我的原始点击图像在我关闭模态图像后不会消失？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T11:06:47.017

您必须将 class="fancybox" 应用于`<a>`标签，并且`href`应该指向您要使用 fancybox 打开的图像 – JFK

# jquery - JQuery 自定义插件 - AddClass 问题

> ID：12875250
> 
> 赞同：1
> 
> 时间：2012-10-13T17:38:42.767
> 
> 标签：jquery, jquery-plugins

我正在尝试创建一个自定义 JQuery 插件，当单击锚元素时，它将显示适当的 DIV 块。现在，我将插件称为“内容滑块”。

我已经设法创建了插件并让它工作，这样当一个锚元素被点击时，相应的 DIV 就会显示出来。但是，我还希望将 CSS 类应用于锚元素，以便在单击后突出显示。

请参阅下面的 HTML 和 JQuery 插件代码：

HTML：

```
<div id="left">
    <a class="contentSliderTitle">Anchor 1</a>
    <a class="contentSliderTitle">Anchor 2</a>
    <a class="contentSliderTitle">Anchor 3</a>
</div>

<div id="right">
    <div class="contentSliderContent">DIV 1</div>
    <div class="contentSliderContent">DIV 2</div>
    <div class="contentSliderContent">DIV 3</div>
</div> 
```

jQuery插件：

```
 (function(){ 
    $.fn.contentSlider = function () {
        addClickHandlersToTitleElements();
        showContentDiv(0);
    }

    function addClickHandlersToTitleElements() {
        $("a[class=contentSliderTitle]").click(function () {
            showContentDiv($("a[class=contentSliderTitle]").index(this));
            return false;
        });
    }

    function showContentDiv(titleIndex) {
        $("div[class=contentSliderContent]").each(function () {
            $("div[class=contentSliderContent]").hide();
            return false;
        });

        $("div[class=contentSliderContent]").eq(titleIndex).show();
    }
})(jQuery); 
```

我尝试向“showContentDiv”私有函数添加代码，以从所有锚标记中删除指定的类（名为 contentSliderTitleSelected），该类等于“contentSliderTitle”，并将“contentSliderTitleSelected”类添加到单击的锚点但这会停止“showContentDiv”函数中的功能完全工作，这意味着当单击锚点时，显示的 DIV 不会改变。

我将非常感谢您的帮助，因为这是我第一次尝试编写 JQuery 插件，我完全被难住了！

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T17:53:01.127

蒂姆，你的功能应该是这样的：

```
function addClickHandlersToTitleElements() {
    $("a[class=contentSliderTitle]").click(function () {
        showContentDiv($("a[class=contentSliderTitle]").index(this));
        $("a.contentSliderTitle").removeClass("contentSliderTitleSelected");
        $(this).addClass("contentSliderTitleSelected");
        return false;
    });
} 
```

希望这能解决您的问题！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T18:26:46.507

编写插件的目的是您可以在同一页面上创建任意数量的插件实例。你的只会在一个页面上工作一次。试试这样的东西。

```
<dl class="contentSlider">
    <div id="left">
        <dt>Anchor 1</dt>
        <dt>Anchor 2</dt>
        <dt>Anchor 3</dt>
    </div>
    <div id="right">
        <dd>Content 1</dd>
        <dd>Content 2</dd>
        <dd>Content 3</dd>
    </div>
</dl>​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

使用 Javascript：

```
(function(){ 
    $.fn.contentSlider = function () {
        // Loop through each root element
        this.each(function() {
            // Save current element for later use
            var $root = $(this);
            $root
                .find("dt") // Find all titles
                .click(function() {
                    $(this)
                      .addClass("highlighted") // Add class to clicked element
                      .siblings("dt").removeClass("highlighted"); // Remove class from sibling elements
                    // Hide all descriptions under "root"
                    $root.find("dd").hide();
                    // Show only description on same index as title
                    $root.find("dd").eq($(this).index()).show();
                })
                .slice(0,1).click(); // Call "click" function on first "dt" element
        });
        return this; // return root element to enable function chaining
    }
})(jQuery);

$(".contentSlider").contentSlider(); // Run the function on all elements with the class "contentSlider"
​ 
```

小提琴：<a href="http://jsfiddle.net/Qh9U6/3/" rel="nofollow">http://jsfiddle.net/Qh9U6/3/

# jquery - Shadowbox 和 jQuery div 推子之间的冲突

> ID：12875251
> 
> 赞同：2
> 
> 时间：2012-10-13T17:38:44.040
> 
> 标签：jquery, html, conflict, shadowbox

我正在使用淡入/淡出我的 div 的 jQuery 脚本，因此我可以为我的网站提供一个页面。我还使用 Shadowbox 脚本在画廊中显示我的图像。

问题是，当我单击缩略图（打开 Shadowbox 和我的图像）时，它会清除我的 div 的内容。所以我最终得到一个空白页。

这是我的推子脚本：

```
 document.documentElement.className += " js";   
  $(function(){
    var $containers = $("#right > div").hide();
    $containers.eq(0).show();

    $('a').each(function(i,el){
      var idx = i;
      $(this).click(function(e){
        var $target = $containers.filter(':eq(' + idx + ')');
        if($containers.filter(':visible').not($target).length){
          $containers.filter(':visible').fadeOut(400, function(){
            $target.not(':visible').fadeIn(400);
          });
        } else {
          $target.not(':visible').fadeIn(400);
        }

      })
    })
  }); 
```

所以这就是这个脚本替换 div 内容的工作，但是当我启动它时，是否可以为 shadowbox 脚本设置异常？

工作文件在这里：[http ://www.hyker.be/minimal](http://www.hyker.be/minimal)

和脚本（阴影框和推子）：[http ://www.hyker.be/minimal/js/misc.js](http://www.hyker.be/minimal/js/misc.js)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T18:38:38.637

实际上，点击代码也适用于画廊链接。要从您当前的点击代码中排除画廊锚标签，请使用**[not()](http://api.jquery.com/not/)**方法或 jquery 中的选择器。

在您的情况下，代码应该是：

```
$('a').not("a[rel*=shadowbox]").each(function(i,el){
    //existing stuff
}) 
```

或者

```
$('a:not(a[rel*=shadowbox])').each(function(i,el){
    //existing stuff
}) 
```

祝你好运 ！！

# javascript - 如何在 Chrome 扩展中打开新标签页（Manifest v2）

> ID：12875256
> 
> 赞同：1
> 
> 时间：2012-10-13T17:38:58.867
> 
> 标签：javascript, html, google-chrome

我有一个简单的 Chrome 扩展程序，可以在单击某些 URL 时打开新的 Chrome 选项卡。我成功地使用了一个简单的内联javascript

```
...
<script type="text/javascript">
function LaunchURL(oURL) {
var launchType = localStorage["LS_LaunchType"];           
    switch (launchType) {
        case "TN":
            chrome.tabs.create({ url: oURL });
            break;
        case "WN":
            chrome.windows.create({ url: oURL });
            break;
        default:
            chrome.tabs.create({ url: oURL });
            break;
    }
}
</script>   
...
<a href="javascript:LaunchURL('http://foo.com')">My hyperlink</a> 
```

我想将 manifest.json 升级到版本 2，但现在出于安全原因阻止了内联脚本。如何打开新标签页？我试图用前面的函数创建一个单独的 javascript 文件，但没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T17:50:30.827

您所拥有的应该在外部 javascript 文件中正常工作，但您需要从锚标记中删除脚本。相反，只需在锚标记中添加 url 并在 javascript 中添加一个事件侦听器，以防止默认操作。

因此，在您拥有的页面中：

```
<script src="external.js"></script>
<a href="http://foo.com">My hyperlink</a> 
```

在 external.js 中，您有：

```
document.addEventListener("DOMContentLoaded", function() {

    var anchors = document.querySelectorAll("a");
    for (var i = 0; i < anchors.length; i++) {
        anchors[i].addEventListener("click", function(event) {
           LaunchURL(event.currentTarget.href);
           event.preventDefault();
        });
    }

    function LaunchURL(oURL) {
        var launchType = localStorage["LS_LaunchType"];           
            switch (launchType) {
                case "TN":
                    chrome.tabs.create({ url: oURL });
                    break;
                case "WN":
                    chrome.windows.create({ url: oURL });
                    break;
                default:
                    chrome.tabs.create({ url: oURL });
                    break;
            }
        }
}); 
```

# android - 更新 AIR 移动应用程序（iOS 和 Android）时如何保存用户数据

> ID：12875260
> 
> 赞同：1
> 
> 时间：2012-10-13T17:39:10.820
> 
> 标签：android, ios, sqlite, mobile, air

我将所有用户数据保存在 SQLite 数据库中。这些数据包括设置、内容、购买的项目等。但是，当用户更新应用程序（市场上）时，所有这些 *.db 文件都会被覆盖并且数据会丢失。如何避免？

我使用这段代码：

```
var embededSessionDB:File = File.applicationDirectory.resolvePath(strPath);
var writeSessionDB:File = File.applicationStorageDirectory.resolvePath(strPath);
if (!writeSessionDB.exists) {
    embededSessionDB.copyTo(writeSessionDB);
}
conn = new SQLConnection();
conn.addEventListener(SQLEvent.OPEN, openSuccess);
conn.addEventListener(SQLErrorEvent.ERROR, openFailure);
conn.openAsync(writeSessionDB); 
```

# jquery - FancyBox 图像查看器和视网膜显示器

> ID：12875263
> 
> 赞同：-2
> 
> 时间：2012-10-13T17:39:25.407
> 
> 标签：jquery, fancybox, fancybox-2

我的理解是，这将确保具有视网膜显示屏的设备尽可能地显示图像：

```
<img src="image_400x300.jpg" width="200" height="150" /> 
```

...这是一些 FancyBox 演示代码

```
<a id="fb_image" href="image_800x600.jpg" title="The Title">
    <img src="image_400x300.jpg" width="200" height="150" />
</a> 
```

...主网页中的缩略图将支持视网膜显示，但我看不到使用 FancyBox 打开时如何对图像进行编程以支持视网膜。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T23:53:23.650

我刚刚在 fancyBox 中添加了对视网膜支持的拉取请求，看看： [https ://github.com/fancyapps/fancyBox/pull/420](https://github.com/fancyapps/fancyBox/pull/420)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T20:26:10.887

您可能需要使用`beforeShow`回调来破解它，例如：

```
$(document).ready(function() {
 $("#fb_image").fancybox({
  beforeShow: function(){
   var retinaWidth = this.width / 2; // set new image retina display width
   $(".fancybox-image").css({"width":retinaWidth,"height":"auto"}); // apply new retina display size to img
   // set new values for parent container
   this.width = retinaWidth;
   this.height = $(".fancybox-image").innerHeight();
  }
 }); // fancybox
}); // ready 
```

如果您将此代码用于多个图像，请改用`class`a

```
<a class="fb_image" href... 
```

和

```
$(".fb_image").fancybox() 
```

# android - 获取要显示的 webview

> ID：12875266
> 
> 赞同：0
> 
> 时间：2012-10-13T17:39:34.567
> 
> 标签：android, webview

我试图用下面的代码加载一个 webview。我在中的 id 下得到红色波浪线`R.id.webview`。知道我需要做什么来解决这个问题。推荐的两种解决方案是创建字段和创建常量。但是，没有一个工作...

谢谢您的帮助。

```
import android.app.Activity;

import android.os.Bundle;

import android.webkit.WebView;
import android.webkit.WebViewClient;

public class GreatRacksActivity extends Activity {
  /** Called when the activity is first created. */

   WebView mWebView;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);    
    setContentView(R.layout.main);    
    mWebView = (WebView) findViewById(R.id.webview);    
    mWebView.getSettings().setJavaScriptEnabled(true);    
    mWebView.loadUrl("http://mysite.com");
    mWebView.setWebViewClient(new HelloWebViewClient());
}
private class HelloWebViewClient extends WebViewClient {   
    @Override    
    public boolean shouldOverrideUrlLoading(WebView view, String url) {        
    view.loadUrl(url);        
    return true;    
    }}

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T17:47:24.993

您需要在 main.xml 布局中有一个 webview。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#000000"
    android:orientation="vertical" >

    <WebView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/webview"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"

        />

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T17:51:52.357

您可能错过了在您的布局中拥有 WebView 的 Id。如果您共享您的布局，这将有助于解决此问题。

示例： android:id="@+id/webview" android:layout_width="fill_parent" android:layout_height="fill_parent" />

# javascript - 在不使用 jquery 的情况下初始化 mediaelement.js

> ID：12875269
> 
> 赞同：3
> 
> 时间：2012-10-13T17:39:43.340
> 
> 标签：javascript, mediaelement

我推出自己的 javascript，不使用 jquery。

我想在没有 jquery 的情况下运行 mediaelement.js。

我尝试了几种不同的方法，当我在 FF 中使用 MP3 进行测试时，它需要 Flash 播放器，它会引发错误：

TypeError:this.node is undefined line 76 media-and-player.min.js

这是我在示例中的尝试，其中文件库从 mediaelementjs.com 中引用：

[http://guidedimagerydownloads.com/test_mediaelement.html](http://guidedimagerydownloads.com/test_mediaelement.html)

我错过了什么？有没有在线 jquery 的完整音频元素示例？

追踪别人压缩的 javascript 不是那么容易！

我喜欢这个项目的想法，请不要使用 jquery（为我自己）...

# bluetooth - iOS 蓝牙低功耗问题

> ID：12875273
> 
> 赞同：1
> 
> 时间：2012-10-13T17:40:10.447
> 
> 标签：bluetooth, event-handling, bluetooth-lowenergy

我是为 iOS 设备开发的新手。我是苹果的长期用户，今年春​​天将完成我的电气工程学士学位。我目前正在为一个设计课程做一个项目，并且对蓝牙低功耗以及它如何在 iOS（5 和 6）中实现有一些疑问。

首先介绍一下这个项目的背景。我们正在为建筑物设计一个占用检测系统。该计划是将 BLE 模块连接到整个建筑物的 walwarts。这些设备将与用户的智能手机通信并向后端系统提供位置信息。我们希望这个系统需要很少的用户交互。本质上，他们会下载应用程序，启用 BLE，然后忘记应用程序。至少一开始是这样。我们计划稍后在应用程序中添加更多功能。

我做了一些研究，听起来所有的 BLE 控制都将通过应用程序完成。我计划构建[TI 的演示应用程序](http://processors.wiki.ti.com/index.php/Category%3aIPhone4SBLEDemo)。

我的第一个问题是关于后台如何与 BLE 一起工作。我知道有两种不同的背景设置方法，[在此处](http://lists.apple.com/archives/bluetooth-dev/2011/Dec/msg00012.html)进行了说明。听起来我们想要使用会话后台，以尽可能减少用户交互。但我的问题是后台是否无限期保持启用？

背景问题

1.  事件或会话背景？
2.  后台是否无限期保持启用？
3.  手机重置后会发生什么？或者如果完成了恢复（假设用户备份了他们的应用程序）？
4.  其他应用程序可以禁用 BLE 功能吗？

我的下一类问题涉及中心和外围角色。我们的主要目标是限制智能手机的电源使用，这样用户就不会想禁用蓝牙。我相信这在任何一种模式下都应该是可能的。

中央或外围

*   您认为将 iOS 设备合二为一有什么好处吗？
*   让 iPhone 定期发送广告或 BLE 壁疣设备会更好吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T09:20:56.680

我无法回答问题的第一部分。

但是，中央还是外围？

BLE 属性协议 (ATT) 和通用属性配置文件 (GATT) 被设计为不对称的，因此外围设备可以尽可能少地占用资源，例如在处理和内存方面。从字面上看，Peripheral 只是一个用于属性值的句柄查找表，在大多数情况下，通过一些额外的编码将硬件值放入正确的内存地址。

中央设备连接到外围设备时，需要查询其 ATT 数据库并确定哪些句柄与它可能感兴趣的属性相关。这需要处理能力和动态内存 - 比外围设备拥有的要多得多。

因此，iPhone 应该是 Central 设备。

不是说，如果用例需要它，它也不能是外围设备。

# c# - 在 Windows 8 上使用 CreateFileAsync

> ID：12875274
> 
> 赞同：1
> 
> 时间：2012-10-13T17:40:12.907
> 
> 标签：c#, file-io, windows-8

我试图在我的 C# Windows 8 应用程序中保存一些简单的数据，但是，我似乎无法让任何异步文件操作正常工作。

我可以写：

```
ApplicationData.Current.LocalFolder.CreateFileAsync(...); 
```

但是，如果我在其前面添加一个等待命令并尝试将其转换为以下形式：

```
StorageFile file = await ApplicationData.Current.LocalFolder.CreateFileAsync(...); 
```

我开始收到编译器错误。具体来说，该 await 运算符只能与异步操作一起使用。由于操作是异步的，我有点困惑。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T17:54:15.420

`CreateFileAsync`必须标记您的异步调用（在这种情况下）`async`的方法，以便您使用 调用异步方法`await`。

[请参阅此处](https://stackoverflow.com/questions/11996288/storagefolder-createfileasync-crashes-when-called-from-app-onsuspending)的问题，了解使用`await`.

# javascript - 当用户在不同的电台/专辑上点击播放时，我希望有一个小的封面图像变化

> ID：12875280
> 
> 赞同：0
> 
> 时间：2012-10-13T17:40:42.020
> 
> 标签：javascript, jquery, html, css

我有大约 24 张带有悬停的大型封面图片，可以显示电台信息和播放按钮。当用户单击播放按钮时，“播放器”会更改信息以匹配用户单击的那个。

目前我在“播放器”中有一个较小的封面图像，它不会改变以匹配较大的版本。

我希望播放器中的小封面图像也像用户单击播放时的电台名称和电台信息一样更改，以便它们与更大的图像匹配

这是我到目前为止的脚本。我还没有在脚本中更改封面图像，因为这就是我试图弄清楚如何链接小图像的原因，因为目前我只有一个，它在 css 中链接，我还有大约 23 个其他的

```
$(function(){
var station = $('.player-station'),
    record = $('.record2:first'),
    playBtns = $('.play'),
    info = $('.nprecinfo');

playBtns.click(function()
{
    var btn = $(this);
    if(btn.text() == 'STOP')
    {
        btn.text('PLAY');
        record.css({'-webkit-animation-play-state': 'paused',
                    '-moz-animation-play-state': 'paused'});
        return;
    }

    playBtns.text('PLAY');
    var album = btn.closest('.album');
    station.text(album.find('h3').text());
    info.text(album.find('.recordinfo').text());
    record.css({'-webkit-animation-play-state': 'running',
                '-moz-animation-play-state': 'running'});
    btn.text('STOP');
});
}); 
```

这是带有小封面图片的html代码。它出现在 <div id="lrvinyl" >

```
<div id="player">
            <div id="recordbox">
            <div class="record2">
            </div>
            </div>
            <div class="player-box">
            <div id="title-player">Now playing:</div><br><strong><span class="player-station">Groove Salad</span></strong>
 <p class="nprecinfo">A nicely chilled plate of ambient/downtempo beats and grooves.</p>
</div>
<div class="bars-box">
<div class="bars">
<div class="bar-1"></div>
<div class="bar-2"></div>
<div class="bar-3"></div>
<div class="bar-4"></div>
<div class="bar-5"></div>
<div class="bar-6"></div>
<div class="bar-7"></div>
<div class="bar-8"></div>
<div class="bar-9"></div>
<div class="bar-10"></div>
                    </div>
<div id="lrvinyl">
                    </div>
                </div>
              </div>
            </div>
<div class="grid_3">
    <div class="album">
    <div class="record">
    </div> 
```

这是小提琴[http://jsfiddle.net/7txt3/15/](http://jsfiddle.net/7txt3/15/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T18:22:12.070

添加`rel="path_to_album_image"`到每个播放按钮。然后添加脚本：

```
$('#lrvinyl').css("background-image","url("+btn.attr('rel')+")"); 
```

因此，当您按下播放按钮时，小图像会变为播放按钮`rel=""`属性中定义的图像。 [演示](http://jsfiddle.net/7txt3/21/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T18:16:35.087

只需将`#lrvinyl`div 的背景图像更改为新图像，如下所示：

```
$('#lrvinyl').css({'background-image':'url(http://benlevywebdesign.com/somafm/images/lush.png)'}); 
```

查看工作[**演示**](http://jsfiddle.net/gnel/7txt3/22/)

**更新**：
现在这是动态更改图像的代码，无需像我之前的代码那样对其进行硬编码，请检查：

```
var im = $(this).parent().next('div').css('background-image');
$('#lrvinyl').css({'background-image':im}); 
```

观看现场[**演示**](http://jsfiddle.net/gnel/7txt3/23/)

# apache - 使用 mod_rewrite 重写语言参数

> ID：12875284
> 
> 赞同：1
> 
> 时间：2012-10-13T17:41:00.040
> 
> 标签：apache, mod-rewrite

我需要一些帮助 mod_rewrite 在程序上对 url 执行多项操作：

*   如果 url 以 en,es,pt-br 开头，删除它并添加 ?lang=$1

*   如果 url 接下来没有'web/'，添加它。

*   如果 url 为空白，请转到“web/en/”

*   他们都不应该真正重写网址

这表示：

```
 http://www.domain.com/en  >> http://www.domain.com/web/?lang=en
 http://www.domain.com/en/mobile  >> http://www.domain.com/mobile/?lang=en 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T04:18:31.407

尝试：

```
RewriteEngine On

# This is to prevent the rules from looping, they only work as on-shot
RewriteCond %{ENV:REDIRECT_STATUS} 200
RewriteRule ^ - [L]

# If the url is blank, go to 'web/en/'
RewriteRule ^/?$ /web/?lang=en [L,QSA]

# If the url starts with en,es,pt-br, remove it and add ?lang=$1 ,has /web
RewriteRule ^/?(en|es|pt-br)/web(/?.*)$ /web$2/?lang=$1 [L,QSA,R]

# If the url starts with en,es,pt-br, remove it and add ?lang=$1 ,has no /web
RewriteRule ^/?(en|es|pt-br)/?$ /web/?lang=$1 [L,QSA,R]

# If the url starts with en,es,pt-br, remove it and add ?lang=$1 ,everything else
RewriteRule ^/?(en|es|pt-br)/(.+?)/?$ /$2/?lang=$1 [L,QSA,R] 
```

# c# - 如何将图像保存到隔离存储

> ID：12875286
> 
> 赞同：0
> 
> 时间：2012-10-13T17:41:15.623
> 
> 标签：c#, wpf, image, isolatedstoragefile

我想从 url 下载图像，然后将其作为图像文件保存在隔离存储中。我已经在那里保存了一些字符串值，但我不知道如何保存图像文件。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T18:18:35.123

您也可以通过二进制编写器来做到这一点；

```
byte[] imageBytes;
HttpWebRequest imageRequest = (HttpWebRequest)WebRequest.Create(imageUrl);
WebResponse imageResponse = imageRequest.GetResponse();

Stream responseStream = imageResponse.GetResponseStream();

using (BinaryReader br = new BinaryReader(responseStream ))
{
    imageBytes = br.ReadBytes(500000);
    br.Close();
}
responseStream.Close();
imageResponse.Close();

FileStream fs = new FileStream(saveLocation, FileMode.Create);
BinaryWriter bw = new BinaryWriter(fs);
try
{
    bw.Write(imageBytes);
}
finally
{
    fs.Close();
    bw.Close();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T17:51:51.547

您可以通过 Web 客户端将其保存为：

```
WebClient webClient = new WebClient();
webClient.DownloadFile(ImageFileUrl, localFileName); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T18:13:19.830

见[这篇文章](http://www.dotnetfunda.com/articles/article955-using-isolatedstoragefile-to-store-data-in-wpf-application-class-events.aspx)：

而不是 StreamWriter 使用[BinaryWriter](http://msdn.microsoft.com/en-us/library/system.io.binarywriter.aspx)来写入字节。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-13T18:22:07.440

试试这个

```
 string path = Environment.GetFolderPath(Environment.SpecialFolder.MyDocuments);
 string filePath = Path.Combine(path, "filename.jpg");
  using (IsolatedStorageFileStream fStream = new IsolatedStorageFileStream(filePath, FileMode.Create, isoFile))
  {
      yourFileStream.CopyTo(fStream);

      //OR

      fStream.Write(yourFileStream.GetBytes(), 0, yourFileStream.GetBytes().Length);
  } 
```

# c - 如何使用哈希表在句子列表中查找最常用的短语

> ID：12875291
> 
> 赞同：2
> 
> 时间：2012-10-13T17:41:33.973
> 
> 标签：c, hash

所有句子都是小写英文，没有标点符号，一个短语被定义为 3 个连续的单词，所以如果一个句子是：我是杰西卡亨特

所以短语将是“我是杰西卡”和“我是杰西卡亨特”

一个短语是常见的，如果它出现在文件的所有句子中

请帮助我为这个问题提供适当的哈希函数

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T18:31:01.083

什么都行。我将从 (3*a + 5*b + 7*c) 开始，其中 {a,b,c} 是三个连续单词的字数（或哈希值）。（当然所有无符号和模字大小）

*   标记成单词，忽略空格和标点符号
*   将生成的单词放入哈希表（dict）
*   单步执行文件，维护一个滑动窗口来计算三令牌哈希
*   并将它们放入/更新到第二个哈希表中。
*   为了解决冲突，第二个哈希表需要（指针、索引）访问原始的三个单词。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T14:02:09.070

杰西卡，我猜你需要一个 n-gram 散列器而不是一个句子（几乎相同）。我用 C 编写了一个超快的 n-gram ripper，可在以下位置免费下载： http: [//www.sanmayce.com/Downloads/index.html#Leprechaun](http://www.sanmayce.com/Downloads/index.html#Leprechaun)

妖精会将“句子”“我是杰西卡狩猎”撕成这两个 3 克：i_am_jessica am_jessica_hunt

也许 n 语法也是你的事。

# iphone - SLRequest 适用于模拟器而不是设备

> ID：12875294
> 
> 赞同：1
> 
> 时间：2012-10-13T17:42:00.627
> 
> 标签：iphone, ios, twitter, ios6

我正在使用 SLRequest 发布到用户的 Twitter 流，并且以下代码在模拟器中可以发布，但不能在实际设备上。

```
//create the SLRequest and post to the account

//create the NSURL for the Twitter endpoint
NSURL *profileURL = [NSURL URLWithString:@"https://api.twitter.com/1/statuses/update.json"];

//Create the dictionary of parameters that contains the text to be posted               
NSDictionary *parameters = [NSDictionary dictionaryWithObject:[messageTextView text] forKey:@"status"];

//create the SLRequest         
SLRequest *twitterRequest = [SLRequest requestForServiceType:SLServiceTypeTwitter requestMethod:SLRequestMethodPOST URL:profileURL parameters:parameters];

//assign the twitter account for posting   
twitterRequest.account = [_twitterAccounts objectAtIndex:i];

if(!CGSizeEqualToSize(imageView.image.size, CGSizeZero))
{
    //multipart data with image
    [twitterRequest addMultipartData:UIImageJPEGRepresentation(imageView.image, 0.7) withName:@"media" type:@"image/jpg" filename:@"image001.jpg"];
}

SLRequestHandler requestHandler = ^(NSData *responseData, NSHTTPURLResponse *urlResponse, NSError *error) 
{
    if(error)
    {
        NSLog(@"%@", error);
    }
};

//perform the request          
[twitterRequest performRequestWithHandler:requestHandler]; 
```

当我在模拟器上运行这段代码时，一切正常，文本被发布到相应的 Twitter 帐户；但是，当它在实际设备上运行时（使用相同的帐户设置），我收到以下错误消息（模拟器中没有产生错误）：

```
2012-10-13 13:39:32.967 Status App[10684:1803] Error Domain=NSURLErrorDomain Code=-1012 "The operation couldn’t be completed. (NSURLErrorDomain error -1012.)" UserInfo=0x1d9f37f0 {NSErrorFailingURLKey=https://api.twitter.com/1/statuses/update.json, NSErrorFailingURLStringKey=https://api.twitter.com/1/statuses/update.json, NSUnderlyingError=0x1d9f35c0 "The operation couldn’t be completed. (kCFErrorDomainCFNetwork error -1012.)"} 
```

以前有没有其他人遇到过这个错误？我一直在寻找几天，但还没有在网上找到任何解决方案。任何信息或帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T22:07:12.423

您使用了错误的 url 和参数。

看看[这个](https://dev.twitter.com/docs/ios/posting-images-using-twrequest)。

# bit-shift - 添加位（在 C 中）

> ID：12875296
> 
> 赞同：0
> 
> 时间：2012-10-13T17:42:10.317
> 
> 标签：bit-shift, bits

我正在研究位移，我遇到了这个问题。
我有两个int：

```
int x = 1;
int y = 2; 
```

有什么区别：

```
 x = x << (31 + 1); 
```

和

```
 y = y << 31; 
```

我认为结果是相同的（即 x 和 y 都等于 1），但它们不是......我不明白为什么。2 只是 1，“1”位向左移动了一个空格。

谢谢！

我的意思是当我们不能再左移时，我们不回到开头吗？

编辑：让我澄清一下我的想法：

我们从 x = 1 开始，所以是：

```
 00000000 00000000 00000000 00000001 
```

然后我们将其左移 31 +1（或 32）。这给了我们：

```
 00000000 00000000 00000000 00000001 
```

这也是1。

然后我们做 y = 2，那就是

```
 00000000 00000000 00000000 00000010 
```

我们将其左移 31。这也给了我们：

```
 00000000 00000000 00000000 00000001 
```

因此，我们得到 x = y = 1。我知道这是错误的，但谁能解释为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T18:02:13.793

你混淆了**shift**和**rotation**：

*   **移位**意味着移位所有位并用 0 或 1 填充空白点（取决于值和/或符号）。

*   **Rotating** is shifting all bits and filling the empty spot with the bit that "fell out" in the end.

AFAIK C does not support rotating, but only shifting (probably because of platform dependencies?). x86 assembler implements both shift and rotate operations.

A explanation better than I can give here, can be found here: [http://en.wikibooks.org/wiki/X86_Assembly/Shift_and_Rotate](http://en.wikibooks.org/wiki/X86_Assembly/Shift_and_Rotate)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T17:46:37.343

> 我的意思是当我们不能再左移时，我们不回到开头吗？

不，这种行为称为循环移位，这**不是**移位运算符在 C 中的工作方式。

（顺便说一句，对我来说，这两个表达式的结果都是 0 `printf("%d %d\n", 1 << (31 + 1), 2 << 31);`，但这不是很有意义，因为有符号整数溢出是未定义的行为。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T18:02:13.683

如 H2CO3 所述，行为未定义。您可以参考[C99 6.5.7](http://c0x.coding-guidelines.com/6.5.7.html)了解更多信息。此外，[这个问题](https://stackoverflow.com/questions/4330282/what-happens-when-you-bit-shift-beyond-the-end-of-a-variable)与您的问题非常相似，如果不完全相同的话。你也可以在那里找到一些很好的信息。

顺便说一句，我的系统将班次修改了 32。

# java - spring mvc 表单：选择标签

> ID：12875299
> 
> 赞同：12
> 
> 时间：2012-10-13T17:42:33.030
> 
> 标签：java, forms, spring, spring-mvc, types

我有一个包含国家列表（列表）的模型和一个包含国家对象的用户对象。我认为用户可以选择他的国家。
这是我的jsp页面的片段：

```
<form:select path="user.country">
    <form:option value="-1">Select your country</form:option>
    <form:options items="${account.countries}" itemLabel="name" itemValue="id" />
</form:select> 
```

这是我的帐户模型：

```
public class Account {

    private User user;
    private List<Country> countries;

    public User getUser() {
        return user;
    }

    public void setUser(User user) {
        this.user = user;
    }

    public List<Country> getCountries() {
        return countries;
    }

    public void setCountries(List<Country> countries) {
        this.countries = countries;
    }
} 
```

当 jsp 加载 (GET) 表单时：select 显示当前用户国家/地区的选定项目。问题是，当我发布表单时，我得到了这个异常：

```
Field error in object 'account' on field 'user.country': rejected value [90];
  codes [typeMismatch.account.user.country,typeMismatch.user.country,typeMismatch.country,typeMismatch.org.MyCompany.entities.Country,typeMismatch];
  arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [account.user.country,user.country];
  arguments []; default message [user.country]];
  default message [Failed to convert property value of type 'java.lang.String' to required type 'org.MyCompany.entities.Country' for property 'user.country';
  nested exception is java.lang.IllegalStateException: Cannot convert value of type [java.lang.String] to required type [org.MyCompany.entities.Country] for property 'country': no matching editors or conversion strategy found] 
```

知道如何克服这个问题吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-13T19:01:19.187

您需要以某种方式告诉 Spring 将 a 转换`String`为`Country`. 这是一个例子：

```
@Component
public class CountryEditor extends PropertyEditorSupport {

    private @Autowired CountryService countryService;

    // Converts a String to a Country (when submitting form)
    @Override
    public void setAsText(String text) {
        Country c = this.countryService.findById(Long.valueOf(text));

        this.setValue(c);
    }

} 
```

和

```
...
public class MyController {

    private @Autowired CountryEditor countryEditor;

    @InitBinder
    public void initBinder(WebDataBinder binder) {
        binder.registerCustomEditor(Country.class, this.countryEditor);
    }

    ...

} 
```

# c# - 有没有办法从 C# 中的枚举中获取字符串值

> ID：12875301
> 
> 赞同：2
> 
> 时间：2012-10-13T17:42:42.877
> 
> 标签：c#

我有以下代码：

```
public enum RoleType
{
    Default = 10,
    Guest = 20,
    User = 30,
    Admin = 40,
    Super = 50
} 
```

有什么方法可以让我在枚举中有某种 toString 方法，它会给我字符串“Default”，“Guest” ..等我不介意一个一个地硬编码这些，甚至有一个在枚举中硬编码两次值的字典。我只想将所有内容都包含在我的枚举中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T17:48:31.550

怎么样`ToString()`？

```
Console.WriteLine(RoleType.User);

> User

Console.WriteLine(RoleType.User.ToString());

> User 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T17:52:48.950

使用 RoleType.Guest.ToString()

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

    public enum RoleType {
        Default = 10,
        Guest = 20,
        User = 30,
        Admin = 40,
        Super = 50
    }

    class Program {
        static void Main(string[] args) {
            Console.WriteLine(RoleType.Guest.ToString());
            Console.ReadLine();
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T17:45:19.113

```
string str =Enum.GetName(typeof(RoleType), obj); 
```

obj 应该是您希望为其命名的值

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-13T17:47:00.563

```
string s1=Enum.GetNames(typeof(RoleType), object); 
```

# c# - 如何将剃须刀页面包含到另一个剃须刀页面？

> ID：12875302
> 
> 赞同：11
> 
> 时间：2012-10-13T17:42:48.333
> 
> 标签：c#, asp.net-mvc-3, razor

我想知道如何在运行 razor 视图中包含另一个 razor 页面，就像 PHP 的“包含”术语一样。它可以被认为是部分类。一半工作在 a.cshtml 完成，另一半工作在 b.cshtml 完成。但实际上，它们中的两个被构建为一个剃须刀页面。

任何想法将不胜感激...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-13T17:58:57.600

您可以在 MVC 中使用局部视图。

尝试使用**[RenderAction](http://msdn.microsoft.com/en-us/library/system.web.mvc.html.childactionextensions.renderaction%28v=vs.108%29.aspx)**或**[RenderPartial](http://msdn.microsoft.com/en-us/library/system.web.mvc.html.renderpartialextensions.renderpartial%28v=vs.108%29.aspx)**方法在当前视图中呈现另一个视图或部分视图。

**更多参考：**

[RenderAction RenderPartial](https://stackoverflow.com/questions/719027/renderaction-renderpartial)

[Html.Partial vs Html.RenderPartial & Html.Action vs Html.RenderAction](https://stackoverflow.com/questions/5248183/html-partial-vs-html-renderpartial-html-action-vs-html-renderaction)

# matlab - 根据列表生成随机数是否可行？

> ID：12875304
> 
> 赞同：0
> 
> 时间：2012-10-13T17:43:34.810
> 
> 标签：matlab, random, matrix

```
A = [8 1 5; 1 4 2; 7 5 2];

Max = 5

B = randi(Max); 
```

现在我有一部分代码会生成一个随机数。我希望从数字列表中生成一个随机数，在这种情况下是第一行 ( `8 1 5`) 中列出的数字。

`randi`是否有另一个函数会随机生成第一行中列出的一个数字并且也符合标准，而不是使用`Max`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T21:25:54.333

根据您指定的内容，我建议以下内容：

```
A = [8 1 5; 1 4 2; 7 5 2];

% get a random number from row 1
index = randperm(length(A(1,:)));
number = A(1,index(1))

% get a randome number from row 1 that does not exceed Max
max = 5;
condition = find(A(1,:) <= max);
index = randperm(length(A(1,condition)));
number = A( 1, condition(index(1))) 
```

希望这能给一些想法，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T17:55:50.937

最简单的方法是使用`arrayfun`：

```
B = arrayfun(@randi, A(1,:)) 
```

# android - 将模拟器连接到互联网

> ID：12875308
> 
> 赞同：0
> 
> 时间：2012-10-13T17:43:55.650
> 
> 标签：android, emulation

我最近开始从[这里](http://www.androidhive.info/2012/01/android-working-with-google-maps/)学习 Google Maps API，并且完全按照那里的方式进行操作。我有一把钥匙，我用了它。但最后的问题是地图没有显示！！

我尝试了所有可能的方法将模拟器连接到互联网。我的 Internet 连接有一个代理服务器，我尝试`command line`通过进入 run->configurations ... 等从 eclipse 本身指定它。

我什至从模拟器中的`settings`选项更改了模拟器的代理设置。好消息是`browser`运行良好，但不是我的应用程序:(。甚至我也尝试`google maps`在模拟器中启动内置应用程序。

它显示如下消息：

```
There is no working data connection. App exiting. 
```

我不知道为什么会这样？还有一件事是我没有更改`DNS`模拟器的设置。这会是个问题吗？我不这么认为，因为如果是这样，那么浏览器一开始就不会运行。我正在使用`Eclipse Indigo`.

请帮助解决这个奇怪的问题..谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T18:03:28.800

如果浏览器工作正常，则表示您的互联网连接正常。我认为您不需要为网络进行规范配置。

我的猜测是您的 api 密钥有问题。您需要创建调试证书的 MD5 签名，然后获取与其关联的 api 密钥，并在插入 mapview 的布局中使用此密钥。在以下命令行中，您应该编辑的只是密钥库文件的位置：

keytool.exe -list -alias androiddebugkey -keystore "C:\users\ravi.android\debug.keystore" -storepass android -keypass android

请注意，如果您输入错误的密码，您仍然会得到 MD5 签名，但它会出错，导致地图无法显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T17:53:28.350

也许您应该尝试从控制台运行模拟器。 [http://developer.android.com/tools/help/emulator.html](http://developer.android.com/tools/help/emulator.html)

请务必传递以下命令：（8.8.8.8 是来自 Google 的 DNS）

```
-http-proxy <proxy>
-dns-server 8.8.8.8
-verbose 
```

如果有任何输出，它可能会进一步指出问题。可能浏览器有内置的后备 DNS 服务器？

# javascript - 如何实时更改网站的颜色？

> ID：12875310
> 
> 赞同：-2
> 
> 时间：2012-10-13T17:43:59.300
> 
> 标签：javascript, css, drupal

我正在设计一个主题，并准备好改变各种元素的颜色。不会有任何形式的预览。但是我遇到了[这个演示](http://themeforest.net/item/creative-the-premium-portfolio-theme/full_screen_preview/240470)，您可以在其中实时更改站点某些元素的颜色（使用左侧的调色板）我知道我们可以使用 JS 实时更改 css。但是我怎样才能从上面的链接中实现类似的东西呢？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T17:58:54.910

听起来，你正在寻找一个插件，是吗？

也许，这符合您的需求。

[http://www.eyecon.ro/colorpicker/](http://www.eyecon.ro/colorpicker/)

它提供了可以与之交互的各种回调。他们甚至在他们的网站上有一些例子。

```
$('#colorSelector').ColorPicker({
    onChange: function (hsb, hex, rgb) {
        $('#colorSelector div').css('backgroundColor', '#' + hex);
    }
}); 
```

需要 jQuery。

# android - Theme.Holo.Dialog 的对话框背景颜色是什么？

> ID：12875311
> 
> 赞同：0
> 
> 时间：2012-10-13T17:44:02.093
> 
> 标签：android

我有一些与对话框有关的问题

1.  如何在 xml 样式文件中添加图标和标题。我知道我可以在代码中使用 setTitle 和 setIcon，但我希望尽可能多地在 xml 中制作所有样式和 GUI。就像某种组织

2.  我喜欢 Theme.Holo.Dialog 的风格，但我怎样才能得到它的背景颜色呢？或者如果有人它的颜色代码/名称请提供给我。

所以如果我想将 Theme.Holo.Dialog 的背景颜色用于另一个应用程序 Activity，我应该更改 andriod:/colorbackground 还是 background 或 windowbackground？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T22:32:15.160

我找到了正确的答案并自己尝试：

1-创建一个活动，在其上应用所需的主题（Theme.Holo.Dialog）

2-获取窗口背景颜色的确切资源ID：

```
TypedValue tv = new TypedValue();
this.getTheme().resolveAttribute(android.R.attr.windowBackground, tv, true);
String val = (String) tv.coerceToString(); 
```

结果如下： dialog_full_holo_dark.9.png 然后我从以下[链接下载它](http://code.google.com/p/android-vlc-remote/source/browse/res/drawable-xhdpi-v11/dialog_full_holo_dark.9.png?r=9c3e53f10dd2b64e87b309fe3310679f2a5cf762)

# excel - 用以前的版本替换 mscomctl.ocx 版本（仅用于测试）

> ID：12875314
> 
> 赞同：0
> 
> 时间：2012-10-13T17:44:25.010
> 
> 标签：excel

我的 Win8 计算机上有 mscomctl.ocx 版本 6.1.98.34 (06-06-2012)。我通过安装 Office 2010 在我的计算机上安装了这个文件。

我想知道在技术上是否可以在我的计算机上安装此文件的早期版本？为什么？从我的客户的计算机上**测试**这个文件的版本。

我已经尝试用另一个版本替换我的版本（取消注册 + 复制/粘贴 + 具有提升权限的注册），但它不起作用。所以我怀疑我忽略了一些东西（比如依赖关系或其他东西）。

任何想法？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T17:47:47.523

不要替换文件，而是覆盖它：将文件的副本放在应用程序目录中。在系统目录之前搜索应用程序目录。这样，您的自定义版本只会影响您正在测试的应用程序。

# c++ - 使用构造函数调用创建新的类引用

> ID：12875319
> 
> 赞同：1
> 
> 时间：2012-10-13T17:44:48.910
> 
> 标签：c++

在我的游戏中，我有一个`Projectile`最初在屏幕右侧高或低（在构造函数中随机选择）生成的类。`Projectile`自动移动到屏幕左侧，当它离开屏幕左侧时，我想用构造函数创建的新变量重新定义现有变量`Projectile`。但是，我似乎无法让这个工作。我尝试将其定义为，`Projectile *projectile`但随后我的代码抛出“表达式必须具有类类型”错误。我怎样才能重新定义它

```
if (projectile.getX()<=0)
  projectile = new Projectile();
else 
  (projectile.move(x--, y) 
```

我的移动和渲染代码按预期工作，但现在`Projectile`穿过屏幕一次并消失。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T17:56:09.380

该行的问题`projectile = new Projectile()`是表达式的返回值`new Projectile()`是 a `Projectile*`，而不是`Projectile`对象。然后，您尝试将其分配给 Projectile 对象，但这是行不通的。

`projectile = Projectile()`如果您不想将代码转换为使用指针，您应该能够通过替换该行来编译代码。另一种选择是添加一个成员函数，将 Projectile 对象重置为其默认状态。如果 Projectile 对象的构建和复制成本很高，则后者可能非常有用。

# c# - C# Web 浏览器选择列表项单击

> ID：12875320
> 
> 赞同：7
> 
> 时间：2012-10-13T17:44:50.383
> 
> 标签：c#, select, webbrowser-control

我正在尝试使用此方法从选择列表框中选择项目：

```
 var elements = webBrowser1.Document.GetElementsByTagName("select");

        foreach (HtmlElement element in elements)
        {

            if (element.GetAttribute("id")=="pagesize")
            {
                element.GetElementsByTagName("option")[2].SetAttribute("selected", "selected");
                webBrowser1.Document.InvokeMember("click");
            }
        } 
```

从这个 html 代码

```
<select name="pagesize" id="pagesize" onchange="changeFileListRequestSize();">
                <option value="10">10 files per page</option>
                <option value="25" selected="selected">25 files per page</option>
                <option value="50">50 files per page</option>
                <option value="100">100 files per page</option>
                <option value="200">200 files per page</option>
            </select> 
```

item 实际上是更改，但不会执行 onchange="changeFileListRequestSize();" javascript 事件。

如何模拟选择列表项单击或“更改”

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-13T17:57:24.603

```
document.GetElementById("pageSize").InvokeMember("onchange") 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2019-09-26T23:15:50.137

出色的工作

```
 if (elm.GetAttribute("className").Contains("iceSelOneMnu"))
                {
                    HtmlDocument doc = webBrowser1.Document;
                    elm.SetAttribute("value", "630676649");
                    elm.InvokeMember("onchange");
                } 
```

# python - 如何在 wxpython gui 中显示 graphicsmagick 图像？

> ID：12875324
> 
> 赞同：1
> 
> 时间：2012-10-13T17:44:57.210
> 
> 标签：python, user-interface, wxpython, graphicsmagick, pgmagick

我想使用 graphicsmagick 和 wxpython 来制作交互式图像编辑器。我正在使用 pgmagick python api。

天真的尝试：

```
from wxPython import wx
from pgmagick import Image

im = Image('portrait.png')
wximg = wx.wxEmptyImage(im.columns(), im.rows())
wximg.SetData(im) 
```

制作：`TypeError: expected a readable buffer object`从`wximg.SetData(im)`

然后我对尝试`pgmagick.getPixels`，blob等没有成功。

你成功了吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T18:00:14.460

wxPython 库可以自己打开 PNG 文件，而不需要 pgmagick。事实上，您也可以将 Python Imaging Library 与 wx 一起使用。我怀疑 pgmagick 没有返回图像的缓冲区对象（即流）。如果你能做到这一点，那么也许你可以让它发挥作用。

# c++ - 使用 __m256d 寄存器

> ID：12875325
> 
> 赞同：15
> 
> 时间：2012-10-13T17:45:06.150
> 
> 标签：c++, x86, intel, simd, avx

你怎么用`__m256d`？

假设我想在具有 3-64 位精度组件（、、和）[`_mm256_add_pd`](http://software.intel.com/sites/products/documentation/doclib/stdxe/2013/composerxe/compiler/cpp-mac/GUID-A37B748D-CDA4-42A6-8142-106CE1305BCE.htm)的简单类上使用英特尔 AVX 指令。使用它的正确方法是什么？`Vector3``double``x``y``z`

由于`x`和是该类的*成员*`y`， _我可以用变量声明它们吗？`z`*`Vector3``union``__m256d`*

 *```
union Vector3
{
  struct { double x,y,z ; } ;
  __m256d _register ;  // the Intel register?
} ; 
```

那我可以去吗：

```
Vector3 add( const Vector3& o )
{
  Vector3 result;
  result._register = _mm256_add_pd( _register, o._register ) ; // add 'em
  return result; 
} 
```

这行得通吗？还是我需要申报临时工，

```
Vector3 add( const Vector3& o )
{
  __m256d d1 = *(__m256d*)(&x) ; // ? Cast to __m256d?
  __m256d d2 = *(__m256d*)(&o.x) ; // ? Cast to __m256d?
  __m256d result = _mm256_add_pd( d1, d2 ) ; // add 'em
  return Vector3( result ) ; // make a ctor that accepts __m256d?
} 
```

## 编辑

我想出了这个例子，

```
#include <stdio.h>
#include <intrin.h>

int main()
{
  __m256d a, b, res;

  for( int i = 0; i < sizeof(__m256d)/sizeof(double); i++ )
  {
    a.m256d_f64[i] = i ;
    b.m256d_f64[i] = 2*i ;
  }

  // Perform __4__ adds.
  res = _mm256_add_pd(a, b);

  for( int i = 0; i < sizeof(__m256d)/sizeof(double); i++ )
  {
    printf("%f + %f = %f\n", a.m256d_f64[i], b.m256d_f64[i], res.m256d_f64[i]);
  }
  puts("");
} 
```

我想现在的问题是，*是否会* *自动*`_mm256_add_pd`执行*加载*操作，或者如果我不将我的寄存器声明为接近使用它们的地方的本地人，会不会出现问题？（我怕[酒店房间/书桌抽屉](https://stackoverflow.com/questions/6441218/can-a-local-variables-memory-be-accessed-outside-its-scope/6445794#6445794)类型问题）*`__m256d`*

 *## 编辑2：

我尝试`__m256`在我相当大的项目中添加一个寄存器，我得到了一大堆

> 错误 C2719：“值”：带有 __declspec(align('32')) 的形式参数将不会对齐

错误，它让我相信你*不能*在一个类中保留`__m256`寄存器，而是应该将它们声明为本地人？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-14T01:11:58.627

首先，我想澄清一点困惑。 `__m256d`不是一种寄存器，它是一种*可以*加载到 AVX 寄存器中的数据类型。A`__m256d`不再是一个寄存器，正如一个`int`是一个寄存器。有几种方法可以将数据输入和输出`__m256d`（或任何其他向量类型）：

**使用 a `union`：**是的，`union`诀窍有效。它工作得很好，因为联合通常会有正确的对齐方式（尽管`malloc`可能不会，使用`posix_memalign`or `_aligned_malloc`）。

```
class Vector3 {
public:
    Vector3(double xx, double yy, double zz);
    Vector3(__m256d vvec);

    Vector3 operator+(const Vector3 &other) const
    {
        return Vector3(_mm256_add_pd(vec, other.vec));
    }

    union {
        struct {
            double x, y, z;
        };
        __m256d vec; // a data field, maybe a register, maybe not
    };
}; 
```

**使用内在函数：**在函数内部，使用内在函数将数据传入和传出向量类型通常更容易。

```
__m256d vec = ...;
double x, y, z;
vec = _mm256_add_pd(vec, _mm256_set_pd(x, y, z, 0.0)); 
```

**使用指针强制转换：**出于几个原因，强制转换指针是最后的手段。

1.  指针可能未正确对齐。

2.  强制转换指针有时会干扰编译器的别名分析。

3.  指针转换绕过了许多安全保证。

所以我只会使用指针转换来浏览大量数据。**

# django - Django 文档：resolve() 代码示例

> ID：12875326
> 
> 赞同：1
> 
> 时间：2012-10-13T17:45:15.293
> 
> 标签：django, django-views

我对[解析文档](https://docs.djangoproject.com/en/1.4/topics/http/urls/#django.core.urlresolvers.resolve)末尾的代码示例感到困惑（“测试视图是否会在重定向到它之前引发 Http404 错误”）。有人可以提供有关此代码的解释 - 它在做什么以及它是如何工作的？我不知道发生了什么事。

例如，为什么你需要调用一个视图来测试它是否抛出 404，而`resolve`它本身可以抛出`Resolver404`？当代码调用视图函数时，它通过关键字参数向它发出请求，但在此之前还有其他参数。但是视图不应该`request`作为它的第一个论点吗？为什么使用引用标头？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T21:23:58.797

`Resolver404`仅当路径未解析为 URL/View 函数时才抛出。

视图函数本身仍然可以根据输入参数引发 404，例如错误的 ID。

有2个问题：

*   成功解析正则表达式 URL 匹配`'^/(?P<foo>\d+)\d/$'`
*   确保带有参数的视图函数`foo`不会引发 404。

你是对的，这个例子`request`应该是第一个论点。如果有任何 url `*args`（未命名的正则表达式匹配），请求将被添加两次，因为它通常是第一个参数。也许示例中的错误？

# javascript - 支持的浏览器是否默认启用 Web 存储？

> ID：12875331
> 
> 赞同：-1
> 
> 时间：2012-10-13T17:45:44.967
> 
> 标签：javascript, html, session-storage, web-storage, browser-support

鉴于此[支持图表](http://caniuse.com/namevalue-storage)，我可以假设那里列出的所有支持浏览器都*默认*启用此功能吗？

如果没有，检查是否`SessionStorage`可用的最简单方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T17:55:35.540

`if (!window.sessionStorage)`

或者

`if (!("sessionStorage" in window))`

[如何检测 Windows 本地存储是否可用？](https://stackoverflow.com/questions/11777599/how-can-i-detect-if-windows-local-storage-is-available)

[HTML5 本地存储后备解决方案](https://stackoverflow.com/questions/4692245/html5-local-storage-fallback-solutions)

[http://24ways.org/2009/break-out-the-edges-of-the-browser](http://24ways.org/2009/breaking-out-the-edges-of-the-browser)

[http://mathiasbynens.be/notes/localstorage-pattern](http://mathiasbynens.be/notes/localstorage-pattern)

[https://github.com/Modernizr/Modernizr/wiki/HTML5-Cross-browser-Polyfills](https://github.com/Modernizr/Modernizr/wiki/HTML5-Cross-browser-Polyfills) --> 网络存储

# ajax - 使用 simplejson 转储创建选择列表

> ID：12875332
> 
> 赞同：1
> 
> 时间：2012-10-13T17:46:09.907
> 
> 标签：ajax, json, google-app-engine

基于“使用 AJAX 启用客户端 RPC 请求[1](https://developers.google.com/appengine/articles/rpc) ”一文，我创建了一个列表。

通过使用： `self.response.out.write(simplejson.dumps(result_list))` 我可以使用读取 result_list`<input id="result_list" type="text" value="" />`

请求帮助：如何将“result_list”转换为 HTML 选择列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T18:41:38.030

显示“使用 AJAX 启用客户端 RPC 请求”的文档可以追溯到 2008 年。今天我们使用 jquery 创建使用 ajax / json 的独立于浏览器的 javascript 客户端。这是添加选项的代码片段：[如何使用 jQuery 向 DropDownList 添加选项？](https://stackoverflow.com/questions/317095/how-do-i-add-options-to-a-dropdownlist-using-jquery)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T18:26:28.230

循环列表中的值并创建一个选择标签。
[http://www.w3schools.com/tags/tag_select.asp](http://www.w3schools.com/tags/tag_select.asp)

# regex - Laravel 模式验证管道字符问题

> ID：12875334
> 
> 赞同：29
> 
> 时间：2012-10-13T17:46:18.797
> 
> 标签：regex, validation, laravel

使用 Laravel 框架，我需要根据一组有效值检查提交字段的值。

问题是 Laravel 使用 | 用于分隔属于字段的验证规则的字符。

这不起作用*，*它会抛出一个

> “preg_match：没有找到结束分隔符'/'”：

```
'my_field' => 'match:/^(value1|value2|different value|yet another)$/' 
```

如果角色没有帮助`|`，在这种情况下如何逃脱角色？`\`

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-10-13T17:52:33.043

本质上，答案是，如果您像尝试那样在一个字符串中指定所有规则，则不能使用管道。m.buettner 提到的拉取请求已关闭。但是，Tayler Otwell 提到了您可以使用的另一种方法：在数组中指定规则。这方面的一个例子是：

```
$rules = array(
    'field' => array('size:5', 'match:/foo|bar/')
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-24T08:25:08.700

使用 array() 后，正则表达式模式需要用 /.../ 括起来，以避免**preg_match(): Unknown modifier '|'** 错误

# css - CSS 最小边距

> ID：12875335
> 
> 赞同：0
> 
> 时间：2012-10-13T17:46:19.443
> 
> 标签：css, margin

我需要有 7% 宽的边距，并且至少 100 像素，我该怎么做？

我试过了

```
margin:7% 100px; 
```

但它没有用

有没有像最小保证金这样的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T17:51:39.283

您可以分配 100px 的边距，然后使用 javascript 覆盖它（当满足特定要求时），或者您可以使用媒体查询

例如，当宽度 >= 500 像素时，更改样式以使边距为 7% 而不是 100 像素

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-13T19:36:05.203

找到了答案，这是有效的代码：

```
<script type='text/javascript'>
window.addEventListener('resize', function(event){
if (GetWidth() < 1373) {
    console.log('changed < 1372');
    document.getElementById('main').style.marginLeft = '100px';
}else{
    console.log('changed > 1372');
    document.getElementById('main').style.marginLeft = '7%';
}

}, false);

function GetWidth()
 {
          var width = 0;
          if (self.innerHeight)
          {
                  width = self.innerWidth;
          }
          else if (document.documentElement && document.documentElement.clientHeight)
          {
                  width = document.documentElement.clientWidth;
          }
          else if (document.body)
          {
                  width = document.body.clientWidth;
          }
          return width;
 }

</script> 
```

它检查每个窗口调整大小，无论何时调整大小，它都会执行函数 GetWidth。如果页面宽度小于 1372，它会更改 ID 为“main”的 div 的 css。

# c# - 我如何做到这一点，以便我可以为依赖 System.Random 的代码编写单元测试？

> ID：12875337
> 
> 赞同：1
> 
> 时间：2012-10-13T17:46:29.557
> 
> 标签：c#, .net, unit-testing

下面的代码存在于一个没有构造函数的实例类中，我不知道从哪里开始为它编写单元测试。

*例如价格是“2/9”所以 secondPart 是 9*并且 _random 是 Random 类的对象

```
 public string RefreshPrice(string price, out bool isUpOrDown, out bool isChanged)
    {
        if (string.IsNullOrEmpty(price))
        {
            isUpOrDown = false;
            isChanged = false;
            return price;
        }

        int secondPart;
        string[] priceParts = price.Split('/');
        int newPrice = 0;
        if(int.TryParse(priceParts[1], out secondPart))
        {
            newPrice = secondPart >= 2 ? _random.Next(2, 20) : 2;
        }

        isUpOrDown = (newPrice > secondPart);
        isChanged = (newPrice != secondPart);

        secondPart = newPrice;
        return string.Format("{0}/{1}", priceParts[0], secondPart);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T17:59:16.227

> 没有构造函数的实例类

所以这个类将有一个默认的ctor：

```
Legacy legacyUnderTest = new Legacy(); 
```

如果`_random`未在默认 ctor 中设置，您应该创建一个辅助方法`getLegacyUnderTest`来设置 _random，或者它是如何在生产中设置的，或者查看[这个堆栈溢出答案](https://stackoverflow.com/questions/250692/how-do-you-unit-test-private-methods/4052474#4052474)，以便在使用[PrivateObject](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.testtools.unittesting.privateobject%28v=vs.80%29.aspx)的测试期间访问私有。

```
private Legacy getLegacyUnderTest()
{
    Legacy result = new Legacy();
    //set _random however it is set in production for the general need of your test
    return result;
} 
```

由于它们是`out`，因此您需要将`bool`标志声明为测试安排步骤的一部分，那么您就可以开始了：

```
[TestMethod]
public void RefreshPrice_EmptyPriceIsNotUpDownIsNotChange_ReturnsInitalPrice()
{
    //Arrange
    Legacy legacyUnderTest = new this.getLegacyUnderTest();
    bool isUpDown = false;
    bool isChange = false;
    string initialPrice = string.Empty;

    //Act
    string result = legacyUnderTest.RefreshPrice(initalPrice, isUpDown, isChange);

    //Assert
    Debug.IsEqual(initalPrice, result);
} 
```

现在（在解决了我通过在我面前编写没有 VS 的代码段不可避免地产生的问题之后）你只需要改变 的值`isUpDown`，`isChange`并`initialPrice`涵盖你需要测试的所有可能性，你应该会很好。

这应该是初始价格的不同格式（有效、空、空和无效格式）以及这些标志的不同真/假组合。

# mysql - 在c中使用sendto函数发送mysql输出

> ID：12875341
> 
> 赞同：0
> 
> 时间：2012-10-13T17:47:04.130
> 
> 标签：mysql, c, networking

```
if(mysql_query(&mysql,msgbuf));
    else
    {
        //printf("inside else case\n");
        result=mysql_store_result(&mysql);
        //printf("\n after getting the result...\n");
        num_fields = mysql_num_fields(result); 
        //printf("\n after getting numfields...\n");
            while ((row = mysql_fetch_row(result))) 
            {    
                    unsigned long *lengths; 
            //printf("\n inside while....\n");
                    lengths = mysql_fetch_lengths(result); 
                    for(i = 0; i < num_fields; i++) 
                    { 
                            printf("[%.*s] \t", (int) lengths[i], row[i] ? row[i] : "NULL"); 
                    }    
                    printf("\n"); 
            } 
        } 
```

我将 mysql 查询的结果存储在 MSQL_RES 类型的结果中。我想使用 sendto() 将整个结果发送到另一个正在运行的进程。我应该如何进行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T18:51:39.053

你是说Posix-[`sendto`](http://linux.die.net/man/2/sendto)函数吗？首先阅读文档。

我不会这样做，`sendto`因为它只是发送一些可能根本没有“意义”的字节。您不知道如何`MSQL_RES`在 mysql-library 内部构建和使用。如果它有一堆指向动态分配内存的指针，而这些指针的结构仅在 mysq-library 内部是已知的呢？您还必须发送这些值，并且接收者必须自己重新构造一个`MSQL_RES`对象。这是行不通的。

你到底想完成什么？

# java - Android在多个活动中的一个字符串？

> ID：12875347
> 
> 赞同：1
> 
> 时间：2012-10-13T17:47:42.080
> 
> 标签：java, string, android-activity

我想知道如何制作一个可以在多个 .java 文件（活动）中使用的字符串。

我要去什么。我得到的字符串等于 .txt 文件中的内容，我想从中获取一些信息，并将它们用于活动中的 TextViews 文本。然后在 TextView 的不同活动中使用其他位...

我正在考虑将 .txt 文件制作成所有活动都可以查看的字符串，这将是最好的方法。感谢所有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T17:59:39.167

如果我做对了，您可能需要将静态字符串变量添加到您的一个类（或为此创建全新的类）并填充来自文本文件的值。

然后其他类可以使用 [ClassName].[variableName] 访问它。

您还可以将其设为私有并添加适当的静态 get/set 方法。

编辑：

最简单的方法可能是在 MainActivity 中声明一个类变量，如下所示

公共静态字符串测试字符串；

您需要使用所需的值填充该变量。为此，您可以致电：

```
testString = "example"; //from within MainActivity class 
```

或者

```
MainActivity.testString = "example"; //from any other class 
```

要获取不同类中变量的值，只需调用

```
String value = MainActivity.testString; 
```

您需要将 MainActivity 添加到您调用的每个类的导入中。

一旦你明白了这一点，最好创建一个单独的类来保存这个变量（以及你需要的任何其他变量）并使用 getter/setter 方法创建私有变量。

希望澄清。

# exponentiation - NTL 库中多项式、RR 和 ZZ 的幂运算

> ID：12875349
> 
> 赞同：4
> 
> 时间：2012-10-13T17:47:58.993
> 
> 标签：exponentiation, ntl

我正在使用 NTL 库来实现 RSA 密码分析。但是我经常遇到一些关于类型不匹配/不兼容的问题。

例如-

1.  我需要`RR`n^((h-1.0)/(h*k-1.0)) 的类型值，其中 n 是 type `ZZ`，h 和 k 是 int。总指数是浮点数或双精度数。我试过 ^ ， pow （仅适用于`RR`基数）， power （仅适用于长指数）。我最终使 n,h,k 所有类型的 RR 都使用 pow，但这真的是这样做的方法吗？

2.  如何做 (p(x))^k 其中 p(x) 是一些多项式？我不得不循环使用 mul 函数 k 次。还有如何初始化多项式？似乎它可以从标准输入中获取类似于 python 列表的东西，但我不能在程序中这样设置它。所以，

    ```
    ZZX p;
    p = [1 2 3] 
    ```

    或者

    ```
    p = ZZX([1 2 3]) 
    ```

    不起作用。我不得不使用`SetCoeff`单独设置每个系数。

这些只是我现在记得的两个例子。我遇到了太多的不便。
Iirc，我们甚至不能将 ZZ 和 RR 相乘。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-08T12:59:22.073

我也搜索了一段时间。

1.  不抱歉。没有内置的方法可以做到这一点。只有`RR^long`浮点数和整数的混合。我认为最简单的方法是将所有值转换为`RR`.
2.  在这里，我也没有看到计算多项式幂的内置方法。但是有一种比`k`它自身乘以它更快的方法。看一下[快速取幂](http://en.wikipedia.org/wiki/Exponentiation_by_squaring)。
    要设置多项式，只有一个接一个地设置它的系数。但是您可以编写一个函数来从向量设置多项式中的所有系数。

NTL 是一个很好的高性能数学库，但是有很多事情使得使用这个库变得很困难......我认识的每个人都有数据类型的问题（正如你提到的，当你尝试乘以`RR`and时`ZZ`）。

# java - 将白色图层添加到 Java GUI 的绘制方法

> ID：12875351
> 
> 赞同：0
> 
> 时间：2012-10-13T17:48:00.447
> 
> 标签：java, swing, user-interface

此代码应创建一个黑色窗口，然后在其上添加一条线和多边形。

```
public class gui extends JFrame {

 JPanel pane = new JPanel();
 gui(String title){
    super(title);
    setBounds(100,100,500,500);
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    Container con = this.getContentPane();
    pane.setBackground(new Color(0,0,0));
    con.add(pane);
    setVisible(true);
 }

 public void paint(Graphics g){

    g.drawLine(100, 100, 400, 400);

    Point p1 = new Point(400, 100);
    Point p2 = new Point(100, 300);
    Point p3 = new Point(200, 400);

    int[] xs = { p1.x, p2.x, p3.x };
    int[] ys = { p1.y, p2.y, p3.y };
    Polygon triangle = new Polygon(xs, ys, xs.length);

    g.setColor(new Color(250,0,0));
    g.fillPolygon(triangle);
 }
} 
```

当我删除该`paint()`方法时，会按预期创建一个纯黑色的 GUI。

但是，当该`paint()`方法到位时，您会在**白色背景上**获得线条和多边形，而不是黑色背景。

如何使黑色背景显示出来？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T17:51:27.320

你需要打电话

```
super.paint(g); 
```

在你的`paint`方法中。

在 Swing 中，首选的方法是覆盖，`paintComponent`尽管因为`JFrame`实际上不是，`JComponent`所以不会调用 this 方法。要使用这种方法，可以将功能移至自定义`JComponent`。

# objective-c - AsyncSocket 对我不起作用

> ID：12875353
> 
> 赞同：0
> 
> 时间：2012-10-13T17:48:05.930
> 
> 标签：objective-c, cocoa, asyncsocket

我首先要说我确实在到处寻找和搜索，然后在这里问我正在尝试为 iphone 编写一个简单的应用程序，只需通过 telnet 连接到 IP 和端口，我尝试了所有我对 obj-c 不熟悉的东西（在java 花了我四分钟），我不想使用线程，但我听说 asyncsoket 非常好.. 我不知道为什么，但是当我尝试时：

```
AsyncSocket * socket = [[AsyncSocket alloc] initwithDelegate:self]; 
```

```
[socket connectToHost:@"localhost" onPort:444 error:&err] 
```

（这是一个可以工作的服务器）它根本没有连接......

我所需要的只是连接到套接字写入和读取数据......
有没有可以用作基础的简单代码示例（无线程，无运行循环）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-13T01:33:58.593

连接委托.h

```
#import <Cocoa/Cocoa.h>
#import "AsyncSocket.h"

@class AsyncSocket;
@interface ConnectDelegate: NSObject {
    AsyncSocket *connectSocket;
}
- (void)connect;

@end 
```

连接委托.m

```
#import "ConnectDelegate.h"
#import "AsyncSocket.h"

@implementation ConnectDelegate

- (id) init;
{
    if( ![super init] )
    return nil;
    return self;
}

- (void)connect
{
    connectSocket  = [[AsyncSocket alloc] initWithDelegate:self];
    connectSocket.delegate = self;

    NSError *error = nil;
    if (![connectSocket connectToHost:@"192.168.1.103" onPort:4000 error:&error]) {
        NSLog(@"Error starting client: %@", error);
        return;
    }
}

- (void)onSocket:(AsyncSocket *)sock didConnectToHost:(NSString *)host port:(UInt16)port{
    NSLog(@"connected to server");
}
- (void)onSocket:(AsyncSocket *)sock didReadData:(NSData *)data withTag:(long)tag{
    // some relevant code goes here
}
- (void)onSocket:(AsyncSocket *)sock didWriteDataWithTag:(long)tag{
}
@end 
```

主文件

```
int main(int const argc, char * const argv[] ) {
    ConnectDelegate *SocketConnection = [[ConnectDelegate alloc] init];
    [SocketConnection connect];

    // Run runloop
    [[NSRunLoop currentRunLoop] run];

return 0
} 
```

# .net - 是否可以在 .NET 中创建邮件系统？

> ID：12875357
> 
> 赞同：-1
> 
> 时间：2012-10-13T17:48:45.917
> 
> 标签：.net, email, newsletter

我必须为我的 .NET 类创建一个项目。我想出了创建电子邮件通讯或自动回复的想法。我必须分三个阶段完成：1\. 桌面应用程序（在 Windows 窗体或 WPF 中），2\. 浏览器应用程序，3\. 移动应用程序。

这件事在.NET中可行吗？我只需要知道在 .NET 应用程序中是否可以发送电子邮件，以及关心这个想法是相对容易还是过于复杂。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-13T17:54:45.430

`.NET`带有一个内置功能，使发送电子邮件变得超级容易。 [http://msdn.microsoft.com/en-us/library/system.net.mail.smtpclient.aspx](http://msdn.microsoft.com/en-us/library/system.net.mail.smtpclient.aspx)

请记住，您仍然需要为 .NET 提供 SMTP 服务器。 [http://en.wikipedia.org/wiki/Simple_Mail_Transfer_Protocol](http://en.wikipedia.org/wiki/Simple_Mail_Transfer_Protocol)

```
using (SmtpClient client = new SmtpClient("smtp-server.MyDomain.com"))
{
    client.UseDefaultCredentials = true;

    using (MailMessage mail = new MailMessage())
    {
        mail.Subject = subject;
        mail.Body = body;

        mail.From = new MailAddress("MyEmail@MyDomain.com");
        mail.To.Add("ToThisEmail@MyDomain.com");

        client.Send(mail);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T17:54:26.310

是的，.NET 框架支持发送电子邮件。

请参阅[System.Net.Mail 命名空间](http://msdn.microsoft.com/en-us/library/system.net.mail.aspx)，或者如果您需要更高级的东西，请查找第 3 方库。

# ruby-on-rails - 响应式 bootstrap-sass 设置

> ID：12875361
> 
> 赞同：2
> 
> 时间：2012-10-13T17:49:10.750
> 
> 标签：ruby-on-rails, twitter-bootstrap, responsive-design, bootstrap-sass

我正在尝试将[bootstrap-sass (2.1.0.0)](https://github.com/thomas-mcdonald/bootstrap-sass)用于响应式设计的 Ruby on Rails 3.2.8 站点。这是我第一次尝试使用 Rails 或 Bootstrap 进行响应式设计。

问题是我的一些（但不是全部）CSS 样式与适当的选择器匹配。具体来说，我`.navbar-fixed-top`在 custom.css.scss 中应用的自定义样式既出现在我编译的 custom.css 样式表中，也出现在浏览器中呈现的页面上。但是，响应式 Bootstrap 样式`.navbar-fixed-top` *出现在编译后的 custom.css 中（根据 Chrome 的 Inspector），但**不会**出现在浏览器中呈现的页面上*。

如果在 custom.css.scss 中，我改`@import "bootstrap-responsive";`回 default `@import "bootstrap";`，则 Bootstrap 样式`.navbar-fixed-top`出现在呈现的页面上。这个问题似乎与具体的响应能力有关。

我很难找到与我的具体问题相关的相关信息。在找到[这个问题](https://stackoverflow.com/questions/9386429/simple-bootstrap-page-is-not-responsive-on-the-iphone)后，我将 Bootstrap 默认`meta name="viewport"`标签更改为，但我的问题不是 iPhone 特有的。`<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">`

`$ rails server`在解决此问题时，我也一直在重新启动。

我不知道如何进一步解决这个问题。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-13T18:08:13.903

`bootstrap-responsive`是对 的补充`bootstrap`。尝试将它们都包含`bootstrap-responsive`在下面`bootstrap`。

```
@import "bootstrap";
@import "bootstrap-responsive"; 
```

来自[http://twitter.github.com/bootstrap/scaffolding.html#responsive](http://twitter.github.com/bootstrap/scaffolding.html#responsive)：

> **通过在文档中包含正确的元标记和附加**样式表，在您的项目中启用响应式 CSS 。

# javascript - NS_ERROR_BAD_URI : 访问受限 URI 被拒绝

> ID：12875362
> 
> 赞同：0
> 
> 时间：2012-10-13T17:49:21.970
> 
> 标签：javascript, html, firefox, webserver

首先，我用谷歌搜索了这个错误，我得到的所有页面都与 Ajax 相关。我没有使用 Ajax，我使用纯 Javascript 编写 HTML5 游戏。但是，当我打开 .html 时出现此错误。我认为它从昨天开始工作得很好。

如果我将它推送到我的服务器，它工作正常，但我希望能够在本地开发以避免等待`scp`将我的文件发送到我的服务器。

有任何想法吗？我已经在 Firefox Stable、Aurora 和 Nightly 上试过这个 boh。在 Chromium 22 上它也不起作用，仅在服务器上，但我在 Chromium 上遇到这个问题很长时间了，在 Firefox 上它是相当新的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T18:22:49.660

浏览器从具有不同安全级别的本地文件系统运行文件到通过 HTTP 加载的文件。这是（至少部分地）防御通过电子邮件发送给人们的恶意文件。

在尽可能接近生产环境的环境中进行开发工作。

在您的开发机器上安装一个 Web 服务器并通过以下方式加载您正在进行的工作`http://localhost/`

# jqgrid - 如何在 jqGrid 搜索中发送到服务器之前自定义数据

> ID：12875363
> 
> 赞同：0
> 
> 时间：2012-10-13T17:49:23.487
> 
> 标签：jqgrid, jqgrid-asp.net, jqgrid-php, jqgrid-formatter

我是 jqGrid 的初学者。我为生成网格编写此代码

```
grid.jqGrid({
    url: 'jQGridHandler.ashx',
    postData: { ActionPage: 'Report5',type:'Fill' },
    datatype: 'json',
    height: 530,
    colNames: ['id','UnitPrice'],
    colModel: [
        { name: 'Id', sortable: true, search: true, editable: false, hidden: true,
            key: true },
        { name: 'UnitPrice', shrinkToFit: true, width: 50,
            searchoptions: {
                sopt: ['eq', 'ne', , 'le', 'ge'],
                dataInit: function (elem) {
                    $(elem).keyup(function () {
                        var str = $(this).val();
                        str = str.replace( /,/g, "" );
                        $(this).val(addCommas(str));
                    });
                }
            }}
    ],
    gridview: true,
    search: true,
    rowNum: 100,
    rowList: [100, 200, 300],
    pager: '#pager',
    viewrecords: true,
    rownumbers: true,
    footerrow: true, userDataOnFooter: true, altRows: true,
});
grid.jqGrid('navGrid', '#pager', { add: false, edit: false, del: false, search: true },
    {},
    {},
    {},
    { multipleSearch: true });
grid.jqGrid('filterToolbar', { defaultSearch: 'cn', stringResult: true });

function addCommas(nStr) {
    nStr += '';
    var x = nStr.split('.');
    var x1 = x[0];
    var  x2 = x.length > 1 ? '.' + x[1] : '';
    var rgx = /(\d+)(\d{3})/;

    while (rgx.test(x1)) {
        x1 = x1.replace(rgx, '$1' + ',' + '$2');
    }
    return x1 + x2;
} 
```

我希望用户在搜索框中选择 unitPrice 并键入数字，数字 3 char 3 char sperate with `,`，我编写函数 addCommas 并且工作良好，但是当用户输入价格并按下搜索按钮时，单价不会发送到服务器。这张图片中的例子

![在此处输入图像描述](../Images/f6a9780b0035045b210a4a809bcb7048.png)

点击搜索按钮后

![在此处输入图像描述](../Images/7caf29b820ee12355f413a0b0245edb6.png)

请帮我。谢谢大家

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T20:14:21.797

在发送到服务器之前，您可以通过多种方式修改搜索过滤器。

首先，我建议您`change`每次更改输入字段中的数据时都显式调用事件。灼热对话框保持搜索过滤器的内部表示并在[更改](http://api.jquery.com/change/)事件处理程序中对其进行修改。因此，添加`$(this).change();`或`$(this).trigger('change')`可以解决您当前的一些问题。

顺便说一句，您已经看到有关搜索过滤器的信息将作为`filters`参数发送到服务器。您可以将其`filters`作为`postData`. 要获取对`postData`参数的引用，您可以使用`grid.jqGrid("getGridParam", "postData")`.

[beforeSearch](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:toolbar_searching#calling_convention)的回调`filterToolbar`是您可以在发送到服务器之前访问过滤器的地方。[onSearch](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:singe_searching#options)是搜索对话框使用的另一个回调。为了有共同的方式，我建议你使用`beforeRequest`jqGrid 的回调。在回调内部，您可以`postData`使用`$(this).jqGrid("getGridParam", "postData")`，如果有`filters`属性，您可以修改它。[例如，您将在答案](https://stackoverflow.com/a/8953934/315935)中找到修改`filters`属性的示例。

# python - Python TypeError：需要一个奇怪的整数

> ID：12875365
> 
> 赞同：1
> 
> 时间：2012-10-13T17:49:31.047
> 
> 标签：python, pickle, typeerror

```
wally=pickle.load(open("The Wall.txt","rb"))
usernamey=pickle.load(open("username1.txt","rb"))
wu=("\n", wally, "\n", usernamey, "\n")
apost=input("Enter your post below: \n")
pwickle=pickle.dump(wu, apost, open("The Wall.txt","wb")) 
```

不知道为什么这不起作用，出现错误消息：

```
pwickle=pickle.dump(wu, apost, open("The Wall.txt","wb"))

TypeError: an integer is required 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T17:57:33.107

正如 unutbu 所指出的，第三个参数是协议。您应该将要腌制的所有对象分组在一个元组中，如下所示：

```
pwickle=pickle.dump((wu, apost), open("The Wall.txt","wb")) 
```

如果您需要腌制大量数据，您可以使用`shelve`像字典一样操作的模块。

顺便说一句，pickle 创建的文件是二进制的（或者至少不是人类可读的，取决于协议），所以我不会命名它们`.txt`。`.db`，`.pickle`或者类似的东西会更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T17:50:55.840

第三[个参数](http://docs.python.org/library/pickle.html#data-stream-format)指定协议，它应该是一个整数，0、1或2。

# java - 初学者java - 向后打印直角三角形

> ID：12875366
> 
> 赞同：0
> 
> 时间：2012-10-13T17:49:37.753
> 
> 标签：java, geometry, spacing

上次我在这里时，我在计算机科学作业中需要帮助的唯一问题是在 100 行上制作一个直角三角形，这是代码：

```
 public class PrintTriangle {
   public static void main(String[] args) {
      // Print a right triangle made up of *
      // starting at 100 and ending with 1
         int i = 100;
         while (i > 0) {
           for (int j = 0; j < i; j++)
           System.out.print("*");
           System.out.println();
         i--;
         }
   }
} 
```

好吧，现在他要求我们做相反的事情。这是实际的问题：

> “编写一个程序，将绘制一个由 100 行组成的直角三角形，形状如下：第一行，打印 100 ' *'，第二行，99 '* '……最后一行，只有一个 '*'。使用 for 循环对于这个问题。将程序命名为 PrintTriangle.java"

```
 *****
  ****
   ***
    **
     * 
```

我确定这很简单，但到目前为止我尝试过的所有东西都失败了，或者一次只创建了 1 个空间。任何建议或帮助将不胜感激！先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T17:53:29.447

好的，首先看看这两个问题。你会如何把它们联系起来。

由于第二个问题与第一个问题相反，因此您在第一个代码中首先执行的操作，您需要在下一个问题中最后执行。

因此，您的循环实际上应该在以下代码中结束的地方向后工作。

```
int i = 100;
for (int j = 0; j < i; j++)
           System.out.print("*"); 
```

所以，想想你需要做什么才能使这个循环向后工作。

**提示**：-

*   从 0 递增到 100 是正向的
*   从 100 递减到 0 是倒退

    ```
    ****  
     ***  
      **
       * 
    ```

此外，在您的上述模式中，您看到`spaces`在实际打印之前需要先打印`characters`所以，您也需要考虑这一点。

所以，在这里你必须实际打印两个不同的字符： -

*   很少`Spaces`，其次是，
*   很少`*'s`。

**这是模式： -**

*   让我们的最大行是`max`（在你的情况下为 100）
*   第 ( )行**`i`**有 ( **`i`**) 个数`spaces`（第 0 行有 0 个空格，第 1 行有 1 个空格）
*   然后它有 ( **`n - i`**) 个数`stars`（第 0 行有 100 颗星，第 1 行有 99 颗星）

所以，你可以看到你`two`在这里实际上需要循环。

分析我所说的一切，并提出一些代码。试试看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T18:00:40.813

```
 int i = 1;
 while (i =< 100) {
   // first put spaces as long as it is necessary
   // it will be i times less than 100
   // for example for the first line (i = 1), 99 space (100-i) and 1 star (i)
   // for the 50\. line (i == 50), 50 space (100-i) and 50 stars (i)
   for(int j = 0; j < 100-i; j++)
     System.out.print(" ");

   // then the stars
   for (int j = 0; j < i; j++)
     System.out.print("*");
   System.out.println();
   i++;
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T19:24:23.060

下面的代码可以帮助您找到解决方案。

```
 class ReverseTriangle {
 public static void main(String[] args) {
    for (int i = 0; i < 100; i++) {
        for (int j = 0; j < i; j++)
            System.out.print(" ");
        for (int j = i; j < 100; j++)
            System.out.print("*");
        System.out.println();
    }
 }
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-13T17:59:12.747

对于这些类型的金字塔（我称之为它们），首先确保你得到正确的空间

```
* * * * *
- * * * *
- - * * *
- - - * * 
- - - - * 
```

现在您可以看到两种模式，现在您可以对其进行编程。这是伪代码...

```
FOR I=1 to N
    FOR J = 1 to I-1
        PRINT " "
    ENDFOR
    FOR K = 1 to N-I+1
        PRINT "*"
    ENDFOR
PRINT "\n"
ENDFOR 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-12T03:28:12.987

```
public static void printPyramid(int ln){
    for(int j=ln;j>0;j--){
        for(int i=ln;i>0;i--) {
            if (j >= i) {
                System.out.print("*");
            } else {
            }
            System.out.print(" ");
        }
        System.out.println();
    }
}

public static void printReversePyramid(int ln){
    for(int j=0;j<ln;j++){
        for(int i=ln;i>=0;i--) {
            if (j >= i) {
                System.out.print("*");
            } else {
            }
            System.out.print(" ");
        }
        System.out.println();
    }
}

public static void printDiamond(int ln){
    for(int j=0;j<2*ln+1;j++){
        for(int i=ln;i>=0;i--) {
            if (j >= i && j < ln+1) {
                System.out.print("*");
            } else if(j > ln && (2*ln)-j>=i){
                System.out.print("*");
            }
            else {
            }
            System.out.print(" ");
        }
        System.out.println();
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-13T17:54:01.423

```
public class Main {
    public static void main(String[] args) {
        for (int i = 0; i < 100; i++) {
            for (int j = 0; j < i; j++)
                System.out.print(" ");
            for (int j = i; j < 100; j++)
                System.out.print("*");
            System.out.println();
        }
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-10-13T12:10:10.433

```
public class PrintTriangle {
   public static void main(String[] args) {

       for(int i=10;i>0;i--)
          {
           for (int j = 1; j < i; j++)
           System.out.print("*");
           System.out.println();           
         }
   }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-13T17:54:48.537

我只是在告诉你如何做到这一点。了解模式。

就像在上一个问题上打印 * 一样，您需要打印空格。然后以相反的顺序打印星星。

```
*
**
***

***
 **
  * 
```

# sql - SUBQUERY 总性能与案例总性能

> ID：12875368
> 
> 赞同：3
> 
> 时间：2012-10-13T17:49:53.373
> 
> 标签：sql, sql-server-2008-r2, sqlperformance

我必须根据 where 子句对某些列进行求和，以便更好地理解我在这里实现了一个临时表

```
declare @tbl table(a int ,b int,c int)
insert into @tbl values(1,2,3)
insert into @tbl values(2,2,3)
insert into @tbl values(1,3,1)
insert into @tbl values(1,2,3)
insert into @tbl values(1,2,3) 
```

并用于查找 a,b,c ob 的值的总和 a,b,c 的基础；我正在使用以下查询

```
 SELECT (
         SELECT SUM(a) from @tbl where a=1         
         )AS a ,          
          (SELECT SUM(b) from @tbl where b=2

         )AS b ,         
          (SELECT SUM(c) from @tbl where c=3

         )AS c 
```

我请我的一位朋友对这项工作进行单行查询，他建议我遵循以下几行

```
select sum((case  when a=1 then a  else null end)),
        sum((case  when b=2 then b  else null end)),
        sum((case  when c=3 then c  else null end))
         from @tbl 
```

现在我正在考虑如果我有 27 列和数百万条记录，性能会更快吗？

**或任何其他方法来实现这一点，这将比这两个更好地提高性能**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-13T21:51:19.360

扩展 Martin 的答案 - 这取决于您拥有哪些索引以及该列的填充方式（可空或不可空）。考虑这个例子。

```
create table tbl (id int identity primary key, a int ,b int,c int, d int)
insert tbl values(1,2,3,null)
insert tbl values(2,null,3,1)
insert tbl values(1,null,1,4)
insert tbl values(1,null,3,5)
insert tbl values(1,null,3,6)
insert tbl select a,b,c,d from tbl --10
insert tbl select a,b,c,d from tbl --20
insert tbl select a,b,c,d from tbl --40
insert tbl select a,b,c,d from tbl --80
insert tbl select a,b,c,d from tbl --160
insert tbl select a,b,c,d from tbl --320
insert tbl select a,b,c,d from tbl --640
insert tbl select a,b,c,d from tbl --1280
insert tbl select a,b,c,d from tbl --2560
insert tbl select a,b,c,d from tbl --5120
insert tbl select a,b,c,d from tbl --10240 
```

b 列被创建为可为空的，并且只有 20% 是非空的。现在，对表运行查询（没有索引）。在运行它之前，请确保按 Ctrl-M（显示实际执行计划）。在同一批次中运行**两个查询，即突出显示两个查询的文本并执行。**

```
SELECT (SELECT SUM(a) from tbl where a=1) AS a ,          
       (SELECT SUM(b) from tbl where b=2) AS b ,         
       (SELECT SUM(c) from tbl where c=3) AS c

select sum((case  when a=1 then a  else null end)),
       sum((case  when b=2 then b  else null end)),
       sum((case  when c=3 then c  else null end))
from tbl 
```

我不会在这里用图像让您厌烦，但请看一下计划，该计划将显示最高查询的成本约为 75%，而最低查询的成本为 25%。这是预期的，75%:25% = 3:1，这是由于第一个查询准确地通过表 3 次。现在创建这三个索引：

```
create index ix_tbl_a on tbl(a)
create index ix_tbl_b on tbl(b)
create index ix_tbl_c on tbl(c) 
```

然后，重新运行查询批处理（两者一起）。这一次，您会看到大约 51% 到 49% 的成本。相当接近。原因是因为`(b)`被稀疏填充的列很容易`SUM`单独从索引页中获取。通过在每个索引页检索比数据页上的聚集索引（将包含所有列）更多的行，甚至其他 2 列也得到了帮助。

当您将此扩展为 27 列时，如果每列填充稀疏**并且**27 列中的每一列都有索引，则第一个表单可以运行得更快。一个很大的问题，即便如此，它可能只会稍微快一点。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-13T17:56:08.427

第二个选项使表格单次通过；第一个进行多次传球。在性能方面，在大多数情况下，第二种选择应该更好。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-13T19:46:30.333

这取决于你有什么索引。

如果`a`、`b`和`c`all 都被索引，那么原始版本可能会明显更快。特别是如果表格的很大一部分不符合任何标准。

如果您根本没有有用的索引，那么选择是 3 次扫描而不是 1 次扫描，因此`CASE`版本应该更快。

# c# - 当 requestedExecutionLevel 设置为“requireAdministrator”时，windows 8 winform 不会自动启动

> ID：12875371
> 
> 赞同：3
> 
> 时间：2012-10-13T17:50:16.617
> 
> 标签：c#, windows, permissions, autostart

我创建了一个 winform 应用程序。

我的程序需要**管理员权限**才能工作，所以我添加了具有以下权限的**app.manifest文件：**

```
<requestedPrivileges xmlns="urn:schemas-microsoft-com:asm.v3">
    <requestedExecutionLevel level="requireAdministrator" uiAccess="false" />
</requestedPrivileges> 
```

我将该程序添加到 Windows 8 自动启动中，因此它应该自动启动。当我将 app.manifest 更改为以下行时，它会在 Windows 启动时成功加载。

```
<requestedExecutionLevel level="asInvoker" uiAccess="false" /> 
```

如何使用 Windows 启动我的程序并仍然保持其管理员权限？

谢谢，什洛米

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T18:03:17.893

要么把需要高权限的功能分开，放到一个Windows Service里面（可以设置服务器启动的帐号，也可以默认设置SYSTEM帐号）。或使用计划任务启动您的应用程序（在这里您还可以选择运行应用程序的帐户/权限）

# node.js - 用于漂亮打印 HTML 的模块？

> ID：12875375
> 
> 赞同：9
> 
> 时间：2012-10-13T17:50:32.687
> 
> 标签：node.js, npm, commonjs, gruntjs

我正在处理一个 grunt 构建文件，它会点击一个 URL 并将输出写入静态 HTML 文件。我点击的网址已压缩 HTML，我想在写入静态文件之前将其打印出来。有没有什么好的模块可以做到这一点？我环顾四周，似乎 Max Ogden 的 html prettyprinter 是我最接近的选择（https://github.com/maxogden/commonjs-html-prettyprinter）。也许如果我将它与 grunt-shell 任务或其他东西结合起来？真的，我更愿意在 grunt 中只需要一个模块并说 pretty(my-file.html) 然后使用 fs 编写它，但到目前为止这被证明是难以捉摸的。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-13T17:59:22.740

你找到了你需要的所有资源。该模块为您完成。

```
var html = require("html");
var data = '<h2><strong><a href="http://awesome.com">AwesomeCom</a></strong><span>is awesome</span></h2>';
var prettyData = html.prettyPrint(data, {indent_size: 2});
process.stdout.write(prettyData) 
```

看看它的[源码](https://github.com/maxogden/commonjs-html-prettyprinter/blob/master/bin/html.js)。

* * *

或者您可以使用[child_process](http://nodejs.org/api/child_process.html)来执行 README: 中的命令`html *.html`。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2021-09-18T21:40:24.873

如果您正在寻找替代方案（可能是因为某个项目已被放弃，或者您不喜欢该 API），您可以使用 NPM 的网站搜索其他的。这里有几个选项：[https://www.npmjs.com/search?q=html%20prettify](https://www.npmjs.com/search?q=html%20prettify)我按受欢迎程度排序并选择了第一个，[漂亮](https://github.com/jonschlinkert/pretty)。

代码最终看起来与被接受的答案非常相似：

```
import pretty from 'pretty';
var data = '<h2><strong><a href="http://awesome.com">AwesomeCom</a></strong><span>is awesome</span></h2>';
var prettyData = pretty(data);
process.stdout.write(prettyData) 
```

# java - 例外 - 我应该更喜欢日志库而不是 java.util.logging 吗？

> ID：12875378
> 
> 赞同：0
> 
> 时间：2012-10-13T17:50:43.713
> 
> 标签：java, logging, exception-handling, coding-style

事实上，大多数开始 java 编程的人只是将异常处理留到以后。由于`e.printStackTrace();`乱扔乱扔我的代码已经让我烦恼了太久，并且在[这里](http://today.java.net/article/2006/04/04/exception-handling-antipatterns)阅读了非常有用的文章，我意识到正确的事情显然是重新抛出异常并登录尽可能高的级别（至少对于检查的异常 - 这是事情我现在关心）。所以我必须查看记录器（我猜这是一个完整的主题，这意味着我应该为每个类、每个方法创建它们，我应该包装它们等等）但首先要做的事情是：我应该去一些专门的库（比如 apache 的 log4j）或者甚至更好的包装器（如 SLF4J）或留在 java.util.logging ？你们在用什么，为什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T17:57:55.557

在我（许多其他人）看来，您绝对应该使用第三方日志记录解决方案 - java.util.logging 有很多“问题”。Log4J 很方便，并且被广泛使用，但 SLF4J 更好。更好的是，[Logback](http://logback.qos.ch/)是由编写 Log4J 的同一个人编写的 SLF4J 实现，因此它是当前推荐使用 Log4J 的人的解决方案。

# c - C valgrind 仍然可以达到内存泄漏但没有使用堆？

> ID：12875381
> 
> 赞同：0
> 
> 时间：2012-10-13T17:50:55.147
> 
> 标签：c, memory-leaks, valgrind

我正在使用一些直接从磁盘文件中读取的原始代码。整个开始代码中只有一个 malloc 调用（我检查过这不是问题）。在我自己的代码中，我不使用 malloc、strdup 或任何其他堆调用。但是，运行 valgrind 并进行完整的泄漏检查，我仍然得到（下）。

我不认识它显示的任何文件。我在带有 Lion 的 Mac OSX 上运行它。这是否可能是系统库的问题，或者是他们解决此问题的另一种方法。我知道有些人会争辩说拥有可访问的内存是可以的，但我很想知道为什么任何内存仍然可以访问。

```
-

-90966-- REDIR: 0x3a46c7 (free) redirected to 0x55b8 (free)
==90966== 
==90966== HEAP SUMMARY:
==90966==     in use at exit: 6,383 bytes in 33 blocks
==90966==   total heap usage: 34 allocs, 1 frees, 6,899 bytes allocated
==90966== 
==90966== Searching for pointers to 33 not-freed blocks
==90966== Checked 684,888 bytes
==90966== 
==90966== 8 bytes in 1 blocks are still reachable in loss record 1 of 9
==90966==    at 0x5237: malloc (in /usr/local/Cellar/valgrind/3.8.1/lib/valgrind/vgpreload_memcheck-amd64-darwin.so)
==90966==    by 0x7FFF5FC11C2A: malloc (in /usr/lib/dyld)
==90966==    by 0x7FFF5FC19C4E: operator new(unsigned long) (in /usr/lib/dyld)
==90966==    by 0x7FFF5FC0817E: std::vector<char const* (*)(dyld_image_states, unsigned int, dyld_image_info const*), std::allocator<char const* (*)(dyld_image_states, unsigned int, dyld_image_info const*)> >::_M_insert_aux(__gnu_cxx::__normal_iterator<char const* (**)(dyld_image_states, unsigned int, dyld_image_info const*), std::vector<char const* (*)(dyld_image_states, unsigned int, dyld_image_info const*), std::allocator<char const* (*)(dyld_image_states, unsigned int, dyld_image_info const*)> > >, char const* (* const&)(dyld_image_states, unsigned int, dyld_image_info const*)) (in /usr/lib/dyld)
==90966==    by 0x7FFF5FC08260: std::vector<char const* (*)(dyld_image_states, unsigned int, dyld_image_info const*), std::allocator<char const* (*)(dyld_image_states, unsigned int, dyld_image_info const*)> >::insert(__gnu_cxx::__normal_iterator<char const* (**)(dyld_image_states, unsigned int, dyld_image_info const*), std::vector<char const* (*)(dyld_image_states, unsigned int, dyld_image_info const*), std::allocator<char const* (*)(dyld_image_states, unsigned int, dyld_image_info const*)> > >, char const* (* const&)(dyld_image_states, unsigned int, dyld_image_info const*)) (in /usr/lib/dyld)
==90966==    by 0x7FFF5FC054FA: dyld::registerImageStateBatchChangeHandler(dyld_image_states, char const* (*)(dyld_image_states, unsigned int, dyld_image_info const*)) (in /usr/lib/dyld)
==90966==    by 0x2C1ACB: dyld_register_image_state_change_handler (in /usr/lib/system/libdyld.dylib)
==90966==    by 0x2C2ACB: _dyld_initializer (in /usr/lib/system/libdyld.dylib)
==90966==    by 0x1CFE73: libSystem_initializer (in /usr/lib/libSystem.B.dylib)
==90966==    by 0x7FFF5FC0FDA5: ImageLoaderMachO::doModInitFunctions(ImageLoader::LinkContext const&) (in /usr/lib/dyld)
==90966==    by 0x7FFF5FC0FAF1: ImageLoaderMachO::doInitialization(ImageLoader::LinkContext const&) (in /usr/lib/dyld)
==90966==    by 0x7FFF5FC0D2E3: ImageLoader::recursiveInitialization(ImageLoader::LinkContext const&, unsigned int, ImageLoader::InitializerTimingList&) (in /usr/lib/dyld)
==90966== 
==90966== 87 bytes in 7 blocks are still reachable in loss record 2 of 9
==90966==    at 0x5237: malloc (in /usr/local/Cellar/valgrind/3.8.1/lib/valgrind/vgpreload_memcheck-amd64-darwin.so)
==90966==    by 0x342358: strdup (in /usr/lib/system/libsystem_c.dylib)
==90966==    by 0x4E7802: _xpc_strdup (in /usr/lib/system/libxpc.dylib)
==90966==    by 0x4EDCCF: _xpc_dictionary_insert (in /usr/lib/system/libxpc.dylib)
==90966==    by 0x4EDE0E: xpc_dictionary_set_string (in /usr/lib/system/libxpc.dylib)
==90966==    by 0x4EFE8C: _libxpc_initializer (in /usr/lib/system/libxpc.dylib)
==90966==    by 0x1CFE7D: libSystem_initializer (in /usr/lib/libSystem.B.dylib)
==90966==    by 0x7FFF5FC0FDA5: ImageLoaderMachO::doModInitFunctions(ImageLoader::LinkContext const&) (in /usr/lib/dyld)
==90966==    by 0x7FFF5FC0FAF1: ImageLoaderMachO::doInitialization(ImageLoader::LinkContext const&) (in /usr/lib/dyld)
==90966==    by 0x7FFF5FC0D2E3: ImageLoader::recursiveInitialization(ImageLoader::LinkContext const&, unsigned int, ImageLoader::InitializerTimingList&) (in /usr/lib/dyld)
==90966==    by 0x7FFF5FC0D27C: ImageLoader::recursiveInitialization(ImageLoader::LinkContext const&, unsigned int, ImageLoader::InitializerTimingList&) (in /usr/lib/dyld)
==90966==    by 0x7FFF5FC0E0B6: ImageLoader::runInitializers(ImageLoader::LinkContext const&, ImageLoader::InitializerTimingList&) (in /usr/lib/dyld)
==90966== 
==90966== 88 bytes in 1 blocks are still reachable in loss record 3 of 9
==90966==    at 0x5237: malloc (in /usr/local/Cellar/valgrind/3.8.1/lib/valgrind/vgpreload_memcheck-amd64-darwin.so)
==90966==    by 0x2CA9B0: get_or_create_key_element (in /usr/lib/system/libkeymgr.dylib)
==90966==    by 0x2CABC9: _keymgr_get_and_lock_processwide_ptr_2 (in /usr/lib/system/libkeymgr.dylib)
==90966==    by 0x2CAC36: __keymgr_initializer (in /usr/lib/system/libkeymgr.dylib)
==90966==    by 0x1CFE6E: libSystem_initializer (in /usr/lib/libSystem.B.dylib)
==90966==    by 0x7FFF5FC0FDA5: ImageLoaderMachO::doModInitFunctions(ImageLoader::LinkContext const&) (in /usr/lib/dyld)
==90966==    by 0x7FFF5FC0FAF1: ImageLoaderMachO::doInitialization(ImageLoader::LinkContext const&) (in /usr/lib/dyld)
==90966==    by 0x7FFF5FC0D2E3: ImageLoader::recursiveInitialization(ImageLoader::LinkContext const&, unsigned int, ImageLoader::InitializerTimingList&) (in /usr/lib/dyld)
==90966==    by 0x7FFF5FC0D27C: ImageLoader::recursiveInitialization(ImageLoader::LinkContext const&, unsigned int, ImageLoader::InitializerTimingList&) (in /usr/lib/dyld)
==90966==    by 0x7FFF5FC0E0B6: ImageLoader::runInitializers(ImageLoader::LinkContext const&, ImageLoader::InitializerTimingList&) (in /usr/lib/dyld)
==90966==    by 0x7FFF5FC034B7: dyld::initializeMainExecutable() (in /usr/lib/dyld)
==90966==    by 0x7FFF5FC0760A: dyld::_main(macho_header const*, unsigned long, int, char const**, char const**, char const**) (in /usr/lib/dyld)
==90966== 
==90966== 136 bytes in 1 blocks are still reachable in loss record 4 of 9
==90966==    at 0x58DE: calloc (in /usr/local/Cellar/valgrind/3.8.1/lib/valgrind/vgpreload_memcheck-amd64-darwin.so)
==90966==    by 0x4E78FA: _xpc_calloc (in /usr/lib/system/libxpc.dylib)
==90966==    by 0x4E81D4: _xpc_base_create (in /usr/lib/system/libxpc.dylib)
==90966==    by 0x4F1C32: _xpc_domain_create (in /usr/lib/system/libxpc.dylib)
==90966==    by 0x4EFF1E: _libxpc_initializer (in /usr/lib/system/libxpc.dylib)
==90966==    by 0x1CFE7D: libSystem_initializer (in /usr/lib/libSystem.B.dylib)
==90966==    by 0x7FFF5FC0FDA5: ImageLoaderMachO::doModInitFunctions(ImageLoader::LinkContext const&) (in /usr/lib/dyld)
==90966==    by 0x7FFF5FC0FAF1: ImageLoaderMachO::doInitialization(ImageLoader::LinkContext const&) (in /usr/lib/dyld)
==90966==    by 0x7FFF5FC0D2E3: ImageLoader::recursiveInitialization(ImageLoader::LinkContext const&, unsigned int, ImageLoader::InitializerTimingList&) (in /usr/lib/dyld)
==90966==    by 0x7FFF5FC0D27C: ImageLoader::recursiveInitialization(ImageLoader::LinkContext const&, unsigned int, ImageLoader::InitializerTimingList&) (in /usr/lib/dyld)
==90966==    by 0x7FFF5FC0E0B6: ImageLoader::runInitializers(ImageLoader::LinkContext const&, ImageLoader::InitializerTimingList&) (in /usr/lib/dyld)
==90966==    by 0x7FFF5FC034B7: dyld::initializeMainExecutable() (in /usr/lib/dyld)
==90966== 
==90966== 224 bytes in 7 blocks are still reachable in loss record 5 of 9
==90966==    at 0x5237: malloc (in /usr/local/Cellar/valgrind/3.8.1/lib/valgrind/vgpreload_memcheck-amd64-darwin.so)
==90966==    by 0x4E793D: _xpc_malloc (in /usr/lib/system/libxpc.dylib)
==90966==    by 0x4EDCB4: _xpc_dictionary_insert (in /usr/lib/system/libxpc.dylib)
==90966==    by 0x4EDE0E: xpc_dictionary_set_string (in /usr/lib/system/libxpc.dylib)
==90966==    by 0x4EFE8C: _libxpc_initializer (in /usr/lib/system/libxpc.dylib)
==90966==    by 0x1CFE7D: libSystem_initializer (in /usr/lib/libSystem.B.dylib)
==90966==    by 0x7FFF5FC0FDA5: ImageLoaderMachO::doModInitFunctions(ImageLoader::LinkContext const&) (in /usr/lib/dyld)
==90966==    by 0x7FFF5FC0FAF1: ImageLoaderMachO::doInitialization(ImageLoader::LinkContext const&) (in /usr/lib/dyld)
==90966==    by 0x7FFF5FC0D2E3: ImageLoader::recursiveInitialization(ImageLoader::LinkContext const&, unsigned int, ImageLoader::InitializerTimingList&) (in /usr/lib/dyld)
==90966==    by 0x7FFF5FC0D27C: ImageLoader::recursiveInitialization(ImageLoader::LinkContext const&, unsigned int, ImageLoader::InitializerTimingList&) (in /usr/lib/dyld)
==90966==    by 0x7FFF5FC0E0B6: ImageLoader::runInitializers(ImageLoader::LinkContext const&, ImageLoader::InitializerTimingList&) (in /usr/lib/dyld)
==90966==    by 0x7FFF5FC034B7: dyld::initializeMainExecutable() (in /usr/lib/dyld)
==90966== 
==90966== 520 bytes in 7 blocks are still reachable in loss record 6 of 9
==90966==    at 0x5237: malloc (in /usr/local/Cellar/valgrind/3.8.1/lib/valgrind/vgpreload_memcheck-amd64-darwin.so)
==90966==    by 0x342358: strdup (in /usr/lib/system/libsystem_c.dylib)
==90966==    by 0x4E7802: _xpc_strdup (in /usr/lib/system/libxpc.dylib)
==90966==    by 0x4EEBF5: xpc_string_create (in /usr/lib/system/libxpc.dylib)
==90966==    by 0x4EDDFD: xpc_dictionary_set_string (in /usr/lib/system/libxpc.dylib)
==90966==    by 0x4EFE8C: _libxpc_initializer (in /usr/lib/system/libxpc.dylib)
==90966==    by 0x1CFE7D: libSystem_initializer (in /usr/lib/libSystem.B.dylib)
==90966==    by 0x7FFF5FC0FDA5: ImageLoaderMachO::doModInitFunctions(ImageLoader::LinkContext const&) (in /usr/lib/dyld)
==90966==    by 0x7FFF5FC0FAF1: ImageLoaderMachO::doInitialization(ImageLoader::LinkContext const&) (in /usr/lib/dyld)
==90966==    by 0x7FFF5FC0D2E3: ImageLoader::recursiveInitialization(ImageLoader::LinkContext const&, unsigned int, ImageLoader::InitializerTimingList&) (in /usr/lib/dyld)
==90966==    by 0x7FFF5FC0D27C: ImageLoader::recursiveInitialization(ImageLoader::LinkContext const&, unsigned int, ImageLoader::InitializerTimingList&) (in /usr/lib/dyld)
==90966==    by 0x7FFF5FC0E0B6: ImageLoader::runInitializers(ImageLoader::LinkContext const&, ImageLoader::InitializerTimingList&) (in /usr/lib/dyld)
==90966== 
==90966== 608 bytes in 1 blocks are still reachable in loss record 7 of 9
==90966==    at 0x58DE: calloc (in /usr/local/Cellar/valgrind/3.8.1/lib/valgrind/vgpreload_memcheck-amd64-darwin.so)
==90966==    by 0x4E78FA: _xpc_calloc (in /usr/lib/system/libxpc.dylib)
==90966==    by 0x4E81D4: _xpc_base_create (in /usr/lib/system/libxpc.dylib)
==90966==    by 0x4EDFDA: xpc_dictionary_create (in /usr/lib/system/libxpc.dylib)
==90966==    by 0x4EFE63: _libxpc_initializer (in /usr/lib/system/libxpc.dylib)
==90966==    by 0x1CFE7D: libSystem_initializer (in /usr/lib/libSystem.B.dylib)
==90966==    by 0x7FFF5FC0FDA5: ImageLoaderMachO::doModInitFunctions(ImageLoader::LinkContext const&) (in /usr/lib/dyld)
==90966==    by 0x7FFF5FC0FAF1: ImageLoaderMachO::doInitialization(ImageLoader::LinkContext const&) (in /usr/lib/dyld)
==90966==    by 0x7FFF5FC0D2E3: ImageLoader::recursiveInitialization(ImageLoader::LinkContext const&, unsigned int, ImageLoader::InitializerTimingList&) (in /usr/lib/dyld)
==90966==    by 0x7FFF5FC0D27C: ImageLoader::recursiveInitialization(ImageLoader::LinkContext const&, unsigned int, ImageLoader::InitializerTimingList&) (in /usr/lib/dyld)
==90966==    by 0x7FFF5FC0E0B6: ImageLoader::runInitializers(ImageLoader::LinkContext const&, ImageLoader::InitializerTimingList&) (in /usr/lib/dyld)
==90966==    by 0x7FFF5FC034B7: dyld::initializeMainExecutable() (in /usr/lib/dyld)
==90966== 
==90966== 616 bytes in 7 blocks are still reachable in loss record 8 of 9
==90966==    at 0x58DE: calloc (in /usr/local/Cellar/valgrind/3.8.1/lib/valgrind/vgpreload_memcheck-amd64-darwin.so)
==90966==    by 0x4E78FA: _xpc_calloc (in /usr/lib/system/libxpc.dylib)
==90966==    by 0x4E81D4: _xpc_base_create (in /usr/lib/system/libxpc.dylib)
==90966==    by 0x4EEBEA: xpc_string_create (in /usr/lib/system/libxpc.dylib)
==90966==    by 0x4EDDFD: xpc_dictionary_set_string (in /usr/lib/system/libxpc.dylib)
==90966==    by 0x4EFE8C: _libxpc_initializer (in /usr/lib/system/libxpc.dylib)
==90966==    by 0x1CFE7D: libSystem_initializer (in /usr/lib/libSystem.B.dylib)
==90966==    by 0x7FFF5FC0FDA5: ImageLoaderMachO::doModInitFunctions(ImageLoader::LinkContext const&) (in /usr/lib/dyld)
==90966==    by 0x7FFF5FC0FAF1: ImageLoaderMachO::doInitialization(ImageLoader::LinkContext const&) (in /usr/lib/dyld)
==90966==    by 0x7FFF5FC0D2E3: ImageLoader::recursiveInitialization(ImageLoader::LinkContext const&, unsigned int, ImageLoader::InitializerTimingList&) (in /usr/lib/dyld)
==90966==    by 0x7FFF5FC0D27C: ImageLoader::recursiveInitialization(ImageLoader::LinkContext const&, unsigned int, ImageLoader::InitializerTimingList&) (in /usr/lib/dyld)
==90966==    by 0x7FFF5FC0E0B6: ImageLoader::runInitializers(ImageLoader::LinkContext const&, ImageLoader::InitializerTimingList&) (in /usr/lib/dyld)
==90966== 
==90966== 4,096 bytes in 1 blocks are still reachable in loss record 9 of 9
==90966==    at 0x5237: malloc (in /usr/local/Cellar/valgrind/3.8.1/lib/valgrind/vgpreload_memcheck-amd64-darwin.so)
==90966==    by 0x34F3F7: __smakebuf (in /usr/lib/system/libsystem_c.dylib)
==90966==    by 0x345D19: __swsetup (in /usr/lib/system/libsystem_c.dylib)
==90966==    by 0x3466C3: __vfprintf (in /usr/lib/system/libsystem_c.dylib)
==90966==    by 0x34618D: vfprintf_l (in /usr/lib/system/libsystem_c.dylib)
==90966==    by 0x34F2CF: printf (in /usr/lib/system/libsystem_c.dylib)
==90966==    by 0x1000014D0: main (in .//diskimageaccess)
==90966== 
==90966== LEAK SUMMARY:
==90966==    definitely lost: 0 bytes in 0 blocks
==90966==    indirectly lost: 0 bytes in 0 blocks
==90966==      possibly lost: 0 bytes in 0 blocks
==90966==    still reachable: 6,383 bytes in 33 blocks
==90966==         suppressed: 0 bytes in 0 blocks
==90966== 
==90966== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
==90966== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0) 
```

编辑：

我尝试将代码移到 Linux 机器上，它可以完美地编译和运行，没有任何内存错误。任何想法为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T18:41:35.970

好吧，如果 valgrind 告诉你，肯定有人在使用这些函数。如果您确定没有使用任何堆函数，那么您的一些依赖项正在使用`malloc/calloc`. 您使用哪些库？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T19:32:12.070

可**访问的内存**消息不是真正的问题，但可能会令人讨厌，因为它们会掩盖真正的问题（滚动失明）。内存由[OS X XPC](https://developer.apple.com/library/mac/#documentation/MacOSX/Conceptual/OSX_Technology_Overview/SystemTechnology/SystemTechnology.html)分配。也许您正在与程序中的 OS X 服务交谈。

对于我自己的开发，我使用 cleanup-function `shut_up_valgrind()`。这会在退出之前释放所有内容。我知道这是多余的，因为操作系统将释放进程使用的所有内存。但根据我的经验，它迫使我编写更健壮的代码，因为我必须考虑内存并发现许多隐藏得很好的内存分配错误。

现在，如果你有像 XPC 这样的依赖项，你可以寻找清理函数。试着找出答案。也许关闭某些东西就足够了。然后在退出函数之前调用清理`shut_up_valgrind()`函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T19:21:45.377

无需担心**仍然可以访问**的内存。

您可以从 valgrind 日志文件中的调用堆栈清楚地看到，内存是通过内存函数从堆中分配的。即`malloc()`&`calloc()`

# hibernate - 由于 LazyInitializationException，无法获取 @Any 相关实体

> ID：12875387
> 
> 赞同：3
> 
> 时间：2012-10-13T17:51:06.273
> 
> 标签：hibernate, lazy-initialization, any

谁能帮我处理`@Any`人际关系？

我有一个界面`InteractionParticipate`，每个想要参与某种消息交互的人都可以实现它。一个消息由它表示，`InteractionMessage`它有一个发送器和一个接收器。由于我们不知道哪个实体实现`InteractionParticipate`将是消息的接收者（或发送者），我们必须使用`@Any`关系。

我读过[这本书](https://stackoverflow.com/questions/217831/how-to-use-hibernate-any-related-annotations)，它启发了我并写`InteractionMessage`了这样的话：

```
@Any(metaColumn = @Column(name = "Transmitter_Type"))
@AnyMetaDef(
        idType = "long",
        metaType = "string",
        metaValues = {
                @MetaValue(value = "Applicant", targetEntity = Applicant.class),
                @MetaValue(value = "Vacancy", targetEntity = Vacancy.class)
        })
@JoinColumn(name = "Transmitter_Id")
@LazyToOne(LazyToOneOption.FALSE)
private InteractionParticipate transmitter;

@Any(metaColumn = @Column(name = "Receiver_Type"))
@AnyMetaDef(idType = "long", metaType = "string",
        metaValues = {
                @MetaValue(targetEntity = Applicant.class, value = "Applicant"),
                @MetaValue(targetEntity = Vacancy.class, value = "Vacancy")
        })
@JoinColumn(name = "Receiver_Id")
@LazyToOne(LazyToOneOption.FALSE)
private InteractionParticipate receiver; 
```

数据库创建得很好，我可以看到实体正确保存。但是当我尝试`InteractionMessage`从数据库中获取

```
InteractionMessage message = (InteractionMessage) session.get(InteractionMessage.class, id);
```

我面对我既不能得到也不能得到`receiver`，`transmitter`因为**Method 抛出了 'org.hibernate.LazyInitializationException' 异常。无法评估... Vacancy_$$_javassist_49.toString()**。（空缺班正在实施`InteractionParticipate`。）

我试着玩，`@LazyToOne`甚至`@LazyCollection`失败了。

请帮我弄清楚。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T00:47:39.737

您正在尝试访问分离对象的集合。分离的对象意味着它没有连接到会话。因此，在访问惰性集合时，您会收到异常。这可能由于不同的原因而发生。例如，您通过序列化从前端接收对象。有 2 种可能的解决方案，具体取决于所需的结果。

1）您可以定义要急切获取的集合。这意味着一旦父对象被初始化，集合就会被初始化。2）你可以合并对象（T mergeObject em.merge(detachedObject);）一个访问它的集合。

一个小警告：em.merge() 返回一个合并的对象。但是，旧的仍然是分离的，所以记得访问合并的。

# ruby-on-rails - 带有复选框的rails form_tag

> ID：12875392
> 
> 赞同：2
> 
> 时间：2012-10-13T17:51:45.380
> 
> 标签：ruby-on-rails, ruby, forms

我知道可能有 1 或 2 个类似的问题，但没有一个能帮助我理解我在下面的错误所在。在我看来，我有以下 haml 形式：

```
= form_tag movies_path,:id=>"ratings_form", :method => :get do
  Include: 
  -  @all_ratings.each_with_index do |rating, index|
  = rating
  = check_box_tag "ratings[]", rating, @selected_ratings.include?(rating), id:"ratings_#{rating}" 
```

在我的控制器中：

```
def index
    sorting=params[:sorting_on_a_column]
    if sorting=='1'
       @sort='title'
       @movies=Movie.order('title')
    elsif sorting=='2'
       @sort='date'
       @movies=Movie.order('release_date')
    else
       @movies=Movie.all
    end
    @all_ratings=Movie.select(:rating).map(&:rating).uniq
    @selected_ratings = (params["ratings"].present? ? params["ratings"] : @all_ratings)
    @movies = @movies.where(":rating IN (?)", params["ratings"]) if params["ratings"].present? and params["ratings"].any?
     end 
```

我在上面的目标是按标题或 release_date（它确实）对电影进行排序，并且只显示与选中的复选框相对应的电影。我是 Ruby 和 Rails 的新手，所以我非常感谢你的帮助。谢谢进步！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T18:59:46.653

有几点需要考虑：

1 - 有多少可能的评级？您正在`@all_ratings`根据另一个模型的数据库表中显示的内容进行分配。如果没有评级模型，并且完整的评级列表会随着时间的推移而增长，那么可能应该有。

2 - 您可以像这样设置您的复选框标签：

```
- @all_ratings.each_with_index do |rating, index|
  = label_tag "rating_#{rating}", rating
  = check_box_tag "ratings[]", rating, @selected_ratings.include?(rating), id: "rating_#{rating}" 
```

这将为您提供一个字符串值数组，该数组`params["ratings"]`应按原样在您的代码中工作。

设置标签标签，以便当您单击文本时，它会选中相应的复选框。`.each_with_index`用于为每个评级提供一个唯一的 ID，因为到目前为止，它们还没有来自数据库的 ID（它与`"rating_#{index}"`id 中的声明匹配`check_box_tag`）。

# android - 当我尝试启动我的自定义 MapActivity 时出现致命错误

> ID：12875395
> 
> 赞同：0
> 
> 时间：2012-10-13T17:52:00.190
> 
> 标签：android, android-mapview, android-maps, geopoints

这是一个有点复杂的问题，所以请仔细阅读。

我试图实现一张地图

-显示我当前的位置，

- 当我点击地图中的一个点时，应用程序应该放置一个自定义的 geoPoint 获取纬度和经度，以将这些传递给一个活动以创建一个新的 Pub 对象

- 开始时的地图必须显示之前保存的酒馆的位置

按照[本教程](http://www.chupamobile.com/tutorial/details/53/Integrating+Google+Maps+in+Android+App/)，我创建了这些类

**MyMap 类**：

```
public class MyMap extends MapActivity implements LocationListener {
    private MapView mapView;
     private LocationManager locManager;
     private MapLocationOverlay itemizedOverlay;
     GeoPoint point ;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        // Inflate our UI from its XML layout description.
        setContentView(R.layout.mymap);

        mapView = (MapView) findViewById(R.id.mapView);

        // invalidate the map in order to show changes
        mapView.invalidate();

        MapController controller = mapView.getController();

        // Use the location manager through GPS
        locManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
        locManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0,
                0, this);

        //get the current location (last known location) from the location manager
        Location location = locManager
                .getLastKnownLocation(LocationManager.GPS_PROVIDER);

            //if location found display as a toast the current latitude and longitude
        if (location != null) {
            point = new GeoPoint((int)(location.getLatitude()*1E6),(int)(location.getLongitude() *1E6));
            Toast.makeText(
                    this,
                    "Current location:\nLatitude: " + location.getLatitude()
                            + "\n" + "Longitude: " + location.getLongitude(),
                    Toast.LENGTH_LONG).show();

            controller.animateTo(point);
            controller.setZoom(13);

        } else {

            Toast.makeText(this, "Cannot fetch current location!",
                    Toast.LENGTH_LONG).show();
        }

        // fetch the drawable - the pin that will be displayed on the map
        Drawable drawable = this.getResources().getDrawable(R.drawable.pin_custom);

        // create and add an OverlayItem to the MyItemizedOverlay list
        OverlayItem overlayItem = new OverlayItem(point, "", "");
        itemizedOverlay = new MapLocationOverlay(drawable,this);
        itemizedOverlay.addOverlay(overlayItem);

        // add the overlays to the map
        mapView.getOverlays().add(itemizedOverlay);
        mapView.invalidate();

        GestureDetector gd=new GestureDetector(this, new MyGestureDetector ());
        itemizedOverlay.setGestureDetector(gd);

        //when the current location is found – stop listening for updates (preserves battery)
        locManager.removeUpdates(this);
    }

    protected boolean isRouteDisplayed() {
        return false;

    }

    /* When the activity starts up, request updates */

    protected void onResume() {
        super.onResume();
        locManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0,
                0, this);
    }

    protected void onPause() {
        super.onPause();
        locManager.removeUpdates(this); //activity pauses => stop listening for updates
    }

    public void onLocationChanged(Location location) {

    }

    public void onProviderDisabled(String provider) {

    }

    public void onProviderEnabled(String provider) {

    }

    public void onStatusChanged(String provider, int status, Bundle extras) {

    }

    public class MyGestureDetector  extends SimpleOnGestureListener {

        public boolean onSingleTapConfirmed(MotionEvent event) {

            // fetch the correspondent point from the map
            GeoPoint p = mapView.getProjection().fromPixels((int) event.getX(),(int) event.getY());

            // create an overlay item and clear all others
            OverlayItem o = new OverlayItem(p, null, null);
            itemizedOverlay.clear();
            itemizedOverlay.addOverlay(o);

            // add the overlay item
            mapView.getOverlays().clear();
            mapView.getOverlays().add(itemizedOverlay);
            mapView.invalidate();

            Geocoder geoCoder = new Geocoder(getBaseContext(),
                    Locale.getDefault());

            // get the address based on the coordinates
            try {
                List<Address> addresses = geoCoder.getFromLocation(p.getLatitudeE6() / 1E6, p.getLongitudeE6() / 1E6, 1);

                String addressString = "";
                if (addresses.size() > 0) {
                    for (int i = 0; i < addresses.get(0)
                            .getMaxAddressLineIndex(); i++)
                        addressString += addresses.get(0).getAddressLine(i)
                                + " - ";
                }

                Toast.makeText(getBaseContext(), addressString,
                        Toast.LENGTH_SHORT).show();

            } catch (IOException e) {
                e.printStackTrace();
            }

            return true;
        }

        public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX,
                float velocityY) {
            return super.onFling(e1, e2, velocityX, velocityY);
        }

        public boolean onDown(MotionEvent e) {
            return false;
        }
    }

} 
```

和类**MapLocationOverlay**：

```
public class MapLocationOverlay extends ItemizedOverlay<OverlayItem> {

       private ArrayList<OverlayItem> mOverlays = new ArrayList<OverlayItem>();
       private GestureDetector gestureDetector;

       private List<Pub> pubList;
       private Context context;

       public MapLocationOverlay(Context context, List<Pub> pubList, Drawable marker) {
          super(boundCenterBottom(marker));
          try{
              this.context = context;
              this.pubList = pubList;
              if (pubList == null) {
                  pubList = new ArrayList<Pub>();
              }
              populate();
          }
          catch(RuntimeException e){

          }

       }

       public MapLocationOverlay(Drawable defaultMarker, Context ctx) {
            super(boundCenterBottom(defaultMarker));

        }

       @Override
       protected OverlayItem createItem(int i) {
           try{
           Pub c=pubList.get(i);
              GeoPoint point =
                       new GeoPoint((int) (c.getLatitude() * 1e6), (int) (c.getLongitude() * 1e6));
              return new OverlayItem(point, c.getName(), null);
          }
          catch(RuntimeException e){

          }
          return mOverlays.get(i);
       }

       public void addOverlay(OverlayItem overlay) {
            mOverlays.add(overlay);
            populate();
        }

       public void clear() {

            mOverlays.clear();
            populate();
        }

       @Override
       public boolean onTap(final int index) {
           Pub c=pubList.get(index);
           final String name=c.getName();
           final String description=c.getDescription();
           final String street=c.getStreet();
         // BrewLocation brewLocation = brewLocations.get(index);
          AlertDialog.Builder builder = new AlertDialog.Builder(context);
          builder.setTitle("Visualizzare la nota "+name+"?")
                   .setPositiveButton("Si", new DialogInterface.OnClickListener() {
                      public void onClick(DialogInterface dialog, int id) {
                         Intent pubDetails = new Intent(context, InfoPub.class);
                         pubDetails.putExtra("name", name);
                         pubDetails.putExtra("description", description);
                         pubDetails.putExtra("street", street);
                         context.startActivity(pubDetails);
                      }
                   }).setNegativeButton("No", new DialogInterface.OnClickListener() {
                      public void onClick(DialogInterface dialog, int id) {
                         dialog.cancel();
                      }
                   });
          AlertDialog alert = builder.create();
          alert.show();

          return true; // we'll handle the event here (true) not pass to another overlay (false)
       }

        /**
         * Override this method to handle a "tap" on a balloon. By default, does nothing 
         * and returns false.
         * 
         * @param index - The index of the item whose balloon is tapped.
         * @return true if you handled the tap, otherwise false.
         */
        protected boolean onBalloonTap(int index) {
            return false;
        }

          @Override
            public boolean onTouchEvent(MotionEvent event, MapView mapView) {

                // when the user lifts its finger
                if (gestureDetector.onTouchEvent(event)) {
                    return true;
                }

                return false;
                }

            public GestureDetector getGestureDetector() {
                    return gestureDetector;
                }

            public void setGestureDetector(GestureDetector gestureDetector) {
                this.gestureDetector = gestureDetector;
            }

       @Override
       public int size() {
           //return pubList.size();
           return mOverlays.size();
       }

    } 
```

不完全完成但应该运行，根据后面的教程，不幸的是，当我尝试启动活动时，应用程序崩溃并出现致命错误。

这是错误堆栈：

```
10-13 17:25:56.109: E/AndroidRuntime(28215): FATAL EXCEPTION: main
10-13 17:25:56.109: E/AndroidRuntime(28215): java.lang.RuntimeException: Unable to start activity ComponentInfo{it.myapp.mymapapp/it.myapp.mymapapp.MyMap}: java.lang.NullPointerException
10-13 17:25:56.109: E/AndroidRuntime(28215):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1651)
10-13 17:25:56.109: E/AndroidRuntime(28215):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
10-13 17:25:56.109: E/AndroidRuntime(28215):    at android.app.ActivityThread.access$1500(ActivityThread.java:117)
10-13 17:25:56.109: E/AndroidRuntime(28215):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
10-13 17:25:56.109: E/AndroidRuntime(28215):    at android.os.Handler.dispatchMessage(Handler.java:99)
10-13 17:25:56.109: E/AndroidRuntime(28215):    at android.os.Looper.loop(Looper.java:130)
10-13 17:25:56.109: E/AndroidRuntime(28215):    at android.app.ActivityThread.main(ActivityThread.java:3687)
10-13 17:25:56.109: E/AndroidRuntime(28215):    at java.lang.reflect.Method.invokeNative(Native Method)
10-13 17:25:56.109: E/AndroidRuntime(28215):    at java.lang.reflect.Method.invoke(Method.java:507)
10-13 17:25:56.109: E/AndroidRuntime(28215):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
10-13 17:25:56.109: E/AndroidRuntime(28215):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
10-13 17:25:56.109: E/AndroidRuntime(28215):    at dalvik.system.NativeStart.main(Native Method)
10-13 17:25:56.109: E/AndroidRuntime(28215): Caused by: java.lang.NullPointerException
10-13 17:25:56.109: E/AndroidRuntime(28215):    at com.google.android.maps.ItemizedOverlay.populate(ItemizedOverlay.java:312)
10-13 17:25:56.109: E/AndroidRuntime(28215):    at it.myapp.mymapapp.utility.MapLocationOverlay.addOverlay(MapLocationOverlay.java:72)
10-13 17:25:56.109: E/AndroidRuntime(28215):    at it.myapp.mymapapp.MyMap.onCreate(MyMap.java:89)
10-13 17:25:56.109: E/AndroidRuntime(28215):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
10-13 17:25:56.109: E/AndroidRuntime(28215):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
10-13 17:25:56.109: E/AndroidRuntime(28215):    ... 11 more 
```

我该如何解决这个问题？少了什么东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T22:10:55.013

您没有在 中进行初始化`point`，`onCreate()`除非您获得了有效的`lastKnownLocation()`.

这个未初始化`point`的被添加到一个 OverlayItem，它被添加到 ItemizedOverlay。

当 Mapview 尝试让 Geopoint 绘制标记时，它得到了一个`null`和 bummmm ！

只需更换：

```
GeoPoint point; 
```

经过：

```
GeoPoint point = new Geopoint(0,0); 
```

它不会再崩溃了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T18:24:09.217

你的`createItem()`实现很奇怪：

1.  你抓住 a`RuntimeException`并且什么也不做。如果不出意外，您应该记录异常，特别是只要您的代码有问题。

2.  您的`size()`方法基于`mOverlays`，但您不使用`mOverlays`in `createItem()`（除非`RuntimeException`发生错误处理）。要么`mOverlays`持续使用，要么完全摆脱它。

除此之外，`ItemizedOverlay`预期不会是的东西`null`确实是`null`。一种可能性是“片段”（`OverlayItem`构造函数的第三个参数），您将其设置为`null`. 另一种可能是`c.getName()`返回`null`，并且可能`ItemizedOverlay`需要名称为非`null`。

如果不出意外，请返回该博客文章中的原始代码，使其正常工作，然后*慢慢*修改它以获得所需的功能，并随时进行测试。

# sql - 如何在sql查询中使用派生表列？

> ID：12875396
> 
> 赞同：0
> 
> 时间：2012-10-13T17:52:02.220
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我有一张 mytrade 表，如下所示

```
tradeid securityid quantity

111    899    12000
112    899    1000
113    788    15000
114    566    -15000
115    566    -1000 
```

因此，为了收集安全 ID 的总量，我编写了以下查询（我在#temptable 中尝试了这个，也创建了 temptable，然后在下面选择）

```
select
tradeid,
securityid,
sum(quantity) OVER(Partition by securityid) as total
from mytrade 
```

这给了我如下输出

```
tradeid securityid total

114    566    -16000
115    566    -16000
113    788    15000
111    899    13000
112    899    13000 
```

现在我想根据“总”数量将值插入到 secondtable 中。

```
insert secondTable (securityid,quantity,price)
(
select securityid,quantity,101.1 from mydata..mytrade
where #temptable.total = 13000 and securityid = 899
) 
```

但出现错误：

无法绑定多部分标识符“#temptable.total”。

如果我将整个语句放入#temptable，然后按上述方式分配，那么我应该如何绑定“total”列，请指导我？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T18:02:05.960

尝试这个：

```
INSERT secondTable (securityid,quantity,price)
(
SELECT securityid,quantity,101.1 FROM (
  SELECT
tradeid,
securityid,
sum(quantity) OVER(Partition BY securityid) AS total,
quantity
FROM mytrade)T
WHERE total = 13000 AND securityid = 899
) 
```

[您可以在SQL Fiddle](http://sqlfiddle.com/#!3/d9cab/12)上找到完整的工作解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T18:01:22.993

```
select securityid,quantity,101.1 from #temptable
where #temptable.total = 13000 and securityid = 899 
```

# php - 如何打印 SOAP 请求？

> ID：12875398
> 
> 赞同：4
> 
> 时间：2012-10-13T17:52:10.247
> 
> 标签：php, api, debugging, soap

我正在尝试发送 SOAP 请求，但收到一条错误消息，告诉我某些参数无效。这是代码：

```
$client = new SoapClient('https://live.domainbox.net/?WSDL', array('soap_version' => SOAP_1_2));
$params = array(
    'AuthenticationParameters' => array(
        'Reseller' => 'reseller',
        'Username' => 'username',
        'Password' => 'password'
    ),
    'CommandParameters' => array(
        'DomainName' => 'mydomain.com',
        'LaunchPhase' => 'GA'
    )
);

$result = $client->CheckDomainAvailability($params);
print_r($result); 
```

这是错误消息：

```
stdClass Object
(
    [CheckDomainAvailabilityResult] => stdClass Object
        (
            [ResultCode] => 201
            [ResultMsg] => Authentication Failed: Invalid Authentication Parameters
            [TxID] => xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxx
            [AvailabilityStatus] => 3
            [AvailabilityStatusDescr] => ErrorOccurred
            [LaunchPhase] => GA
            [DropDate] => 
            [BackOrderAvailable] => 
        )

) 
```

我想查看发送到服务器的请求以确保其格式正确。

以下是它需要如何格式化：

```
<soap12:Envelope xmlns:xsi=”http://www.w3.org/2001/XMLSchema-instance”
xmlns:xsd=”http://www.w3.org/2001/XMLSchema” xmlns:soap12=”http://www.w3.org/2003/05/
soap-envelope”&gt;
<soap12:Body>
    <CheckDomainAvailability xmlns=”https://live.domainbox.net/”&gt;
        <AuthenticationParameters>
            <Reseller>myreseller</Reseller>
            <Username>myuser</Username>
            <Password>mypassword</Password>
        </AuthenticationParameters>
        <CommandParameters>
            <DomainName>checkadomain.co</DomainName>
            <LaunchPhase>GA</LaunchPhase>
        </CommandParameters>
    </CheckDomainAvailability>
</soap12:Body>
</soap12:Envelope> 
```

如何打印已发送到服务器的请求？

我已经尝试过：

```
echo $client->__getLastRequest(); 
```

但我什么也没得到，即使在页面的源代码中也是如此。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T12:23:11.490

添加跟踪选项：

```
$client = new SoapClient('https://live.domainbox.net/?WSDL', array('trace' => true, 'soap_version' => SOAP_1_2)); 
```

然后`__getLastRequest()`应该工作。

# c - 为什么此功能会导致不停打印？

> ID：12875399
> 
> 赞同：0
> 
> 时间：2012-10-13T17:52:11.873
> 
> 标签：c, printing, infinite

您好，我的一个朋友向我展示了这段代码，以说明数组/堆栈边界检查。

```
#include <stdio.h>

void foo() {
    unsigned long long a[1];
    a[3] -= 5;
    printf("Print me!\n");    
}

int main(){ 
    foo();
    return 0;    
} 
```

当我运行这段代码时，它一直在打印“打印我！\n”，它只是不会停止。我已经用 MingW 64bit 编译了代码。这里发生了什么事？我想有人解释一下，为什么它一直打印文本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T17:57:30.157

您通过命令损坏线程堆栈，`a[3] -= 5;`因为将 var 更改为超出数组范围。这种行为是完全不可预测的，并且在其他系统上可能会有所不同。我想你只是修改堆栈上的返回地址来调用 printf

如果您想了解-使用反汇编程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T17:56:45.970

您正在 foo() 中更改堆栈帧之外的值。

具体来说，您从返回地址中减去 5（如果这是正常的 x86-32 调用约定）

如果 main 中的 foo() 调用被编译成类似

`call ebp-126`（调用短偏移）该指令长 5 个字节。

因此，返回将转到调用，而不是调用之后。并且调用将再次执行。

但是，这与代码一样具有反可移植性和未定义性，因为它取决于调用约定和编译器发出的特定指令。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T17:56:03.590

看起来可能是[堆栈缓冲区溢出](http://en.wikipedia.org/wiki/Stack_buffer_overflow)。

您正在引用堆栈数组中的未定义索引`a`。这可能会覆盖堆栈上的返回地址。

当函数`return`s 到`main`函数时，它很可能`foo`再次执行，因为返回地址可能被设置为`- 5`操作调用函数之前的值。

# coronasdk - Corona SDK - 让角色通过平台

> ID：12875405
> 
> 赞同：1
> 
> 时间：2012-10-13T17:53:17.560
> 
> 标签：coronasdk

我正在构建一个游戏，它的角色应该在多个平台上跳跃。
跳跃功能已经完成，但我想如果角色就在平台（静态身体）下方，当我按下“跳跃”按钮时，角色应该穿过那个平台然后坐在上面。现在它与平台发生碰撞，角色无法跳上它。

您知道如何实现这一目标吗？

现在平台由具有“静态”主体类型的矩形表示：

```
local platform = display.newRect(  50, 280, 150, 10 )
platform:setFillColor ( 55, 55, 55)
physics.addBody ( platform, "static", {density=1.0, friction=1.0, bounce=0 }) 
```

我在想我是否可以改变，或者当角色与平台发生碰撞时移除平台的身体类型，这样他就可以通过平台，但我不知道该怎么做，或者一般来说这是否可行.. .也许有一些内置的技术如何达到我想要的效果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T03:31:09.870

将平台变成传感器（Box2D 术语，表示带有碰撞框的对象，它会触发事件但不会触发“物理”碰撞。

然后检测碰撞的方向，然后处理：）

有很多关于这方面的教程......我现在找不到它们，我稍后可能会使用它们的链接进行编辑。

# php - SOAP PHP 错误解析 WSDL：未能加载外部实体？

> ID：12875409
> 
> 赞同：24
> 
> 时间：2012-10-13T17:53:33.160
> 
> 标签：php, xml, soap, wsdl, wamp

我正在尝试使用 PHP 和 SOAP 运行 Web 服务，但到目前为止我得到的只是：

> （SoapFault）[2] 消息指出：“SOAP-ERROR：解析 WSDL：无法从“ [http://localhost/MyRegistration/login.xml](http://localhost/MyRegistration/login.xml) ”加载：无法加载外部实体“ [http://localhost/MyRegistration /login.xml](http://localhost/MyRegistration/login.xml) "

我尝试将 localhost 更改为 127.0.0.1，但这没有什么区别。login 实际上是一个 wsdl 文件，但如果我将 login.wsdl 放在 SOAPClient 构造函数中，它会改为显示“'看起来我们没有 XML 文档'”。

这是我的 SOAP 客户端代码（register_client.php）：

```
<?php
try
{
    $sClient = new SoapClient('http://127.0.0.1/MyRegistration/login.wsdl');    

    $param1 = $_POST["regname"];
    $param2 = $_POST["regpass1"];

    $response = $sClient->loginVerify($param1, $param2);    

    var_dump($response);
}
catch(SoapFault $e)
{
    var_dump($e);
}
?> 
```

这是 login.wsdl 文件：

```
<?xml version="1.0"?>
<definitions name="LoginVal" 
    targetNamespace="urn:LoginVal" 
    xmlns:tns="urn:LoginVal"  
    xmlns:xsd="http://www.w3.org/2001/XMLSchema" 
    xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" 
    xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/" 
    xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" 
    xmlns="http://schemas.xmlsoap.org/wsdl/">
  <types>
<xsd:schema xmlns="http://www.w3.org/2001/XMLSchema" targetNamespace="urn:Login">
  <xsd:element name="getName" type="xsd:string" />
<xsd:element name="getPass" type="xsd:string" />
  <xsd:element name="LoginResponse" type="xsd:string" />          
</xsd:schema>           
  </types>

  <message name="loginVerify">
<part name="username" type="tns:getName" />
<part name="password" type="tns:getPass" />
  </message>

  <message name="doLoginResponse">
<part name="return" type="tns:LoginResponse" />
  </message>  

  <portType name="LoginPort">
    <operation name="loginVerify">
  <input message="tns:loginVerify" />
  <output message="tns:doLoginResponse" />
    </operation>
  </portType>

  <binding name="LoginBinding" type="tns:LoginPort">
    <soap:binding style="rpc" transport="http://schemas.xmlsoap.org/soap/http" />
  <operation name="loginVerify">
    <soap:operation soapAction="urn:LoginAction" />
    <input>
      <soap:body use="encoded" namespace="urn:Login" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" />         
    </input>
    <output>
      <soap:body use="encoded" namespace="urn:Login" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" />         
    </output>
  </operation>
  </binding>

  <service name="LoginService">
    <port name="LoginPort" binding="tns:LoginBinding">
  <soap:address location="http://localhost/MyRegistration/register.php" />
    </port>
  </service>

</definitions> 
```

而且我不确定这是否涉及，所以我提供了 SOAP 服务器 register.php 的代码：

```
<?php
if(!extension_loaded("soap"))
{
    dl("php_soap.dll");
}

ini_set("soap.wsdl_cache_enabled", "0");
$server = new SoapServer("login.wsdl", array('uri'=>'http://127.0.0.1/MyRegistration'))

public function loginVerify($username, $password)
{
    if($_POST["regname"] && $_POST["regemail"] && $_POST["regpass1"] && $_POST["regpass2"] )
    {
        if($_POST["regpass1"] == $_POST["regpass2"])
        {
            $servername = "localhost";
            $username = "root";
            $password = "Hellfire";

            $conn = mysql_connect($servername,$username,"Hellfire")or die(mysql_error());

            mysql_select_db("soap",$conn);

            $sql = "insert into users (name,email,password)values('$_POST[regname]','$_POST[regemail]','$_POST[regpass1]')";

            $result = mysql_query($sql,$conn) or die(mysql_error());

            return "You have registered sucessfully";

            //print "<a href='index.php'>go to login page</a>";
        }
        else return "passwords dont match";
    }
    else return "invalid data";
}

$server->AddFunction("loginVerify");
$server->handle();
?> 
```

如果我提供了不必要的信息，我很抱歉，但我在这方面完全是新手 - 如果有人能指出为什么会产生这个 SOAP 错误，以及我能做些什么来纠正，我将不胜感激它。

我正在使用 WAMP 服务器 2.2 版，带有 mySQL 5.5.24 和 PHP 5.3.13

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2015-02-19T16:23:55.260

> **安全问题**：此答案禁用安全功能，不应在生产中使用！

迁移到 PHP 5.6.5 后，soap 1.2 不再工作了。所以我通过添加可选的 SSL 参数解决了这个问题。

我的错误：

> 未能加载外部实体

怎么解决：

```
// options for ssl in php 5.6.5
$opts = array(
    'ssl' => array(
        'ciphers' => 'RC4-SHA',
        'verify_peer' => false,
        'verify_peer_name' => false
    )
);

// SOAP 1.2 client
$params = array(
    'encoding' => 'UTF-8',
    'verifypeer' => false,
    'verifyhost' => false,
    'soap_version' => SOAP_1_2,
    'trace' => 1,
    'exceptions' => 1,
    'connection_timeout' => 180,
    'stream_context' => stream_context_create($opts)
);

$wsdlUrl = $url . '?WSDL';
$oSoapClient = new SoapClient($wsdlUrl, $params); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2016-05-20T02:25:30.683

将此代码放在任何 Soap 调用之上：

```
libxml_disable_entity_loader(false); 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2018-01-27T20:01:10.627

> **安全问题**：此答案禁用安全功能，不应在生产中使用！

尝试这个。为我工作

```
$options = array(
    'cache_wsdl' => 0,
    'trace' => 1,
    'stream_context' => stream_context_create(array(
          'ssl' => array(
               'verify_peer' => false,
                'verify_peer_name' => false,
                'allow_self_signed' => true
          )
    ));

$client = new SoapClient(url, $options); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-03-21T22:03:28.430

> **安全问题**：此答案禁用安全功能，不应在生产中使用！

使用 php soapClient 得到与 https WSDL URL 类似的响应

> SoapFault 异常：[WSDL] SOAP-ERROR：解析 WSDL：无法从...加载

从 PHP 5.5.9-1ubuntu4.21 >> PHP 5.5.9-1ubuntu4.23 更新服务器后，我的客户端机器 osx 10.12.6 / PHP 5.6.30 出现问题，但可以建立 MS Web 服务客户端连接没有问题。

当我尝试加载 WSDL 时，Apache2 的 server_access.log 没有显示任何条目，所以我添加`'cache_wsdl' => WSDL_CACHE_NONE`以防止客户端 wsdl 缓存，但仍然没有条目。最后，我尝试为每个`CURL -i`检查的 HEADERS 加载 wsdl，但一切似乎都很好..

只`libxml_get_last_error()`提供了一些见解>`SSL operation failed with code 1\. OpenSSL Error messages: error:14090086:SSL routines:SSL3_GET_SERVER_CERTIFICATE:certificate verify failed`

所以我在通话中添加了一些 ssl 选项：

```
$contextOptions = array(
    'ssl' => array(
    'verify_peer' => false,
    'verify_peer_name' => false,
    'allow_self_signed' => true
    ));

$sslContext = stream_context_create($contextOptions);

$params =  array(
    'trace' => 1,
    'exceptions' => true,
    'cache_wsdl' => WSDL_CACHE_NONE,
    'stream_context' => $sslContext
    );

try {
    $proxy = new SoapClient( $wsdl_url, $params );
} catch (SoapFault $proxy) {
    var_dump(libxml_get_last_error());
    var_dump($proxy);
} 
```

就我而言`'allow_self_signed' => true`，成功了！

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-10-16T14:20:49.717

在 register_client.php 上，确保已传递给 SoapClient 的 URL 可从您正在执行代码的机器访问。

```
$sClient = new SoapClient('http://127.0.0.1/MyRegistration/login.wsdl'); 
```

如果 127.0.0.0 不起作用，您可以尝试使用一些网络 IP 地址并查看。

让我知道它是否仍然无法为您解决，我确实尝试了您的示例并且更改路径（使其在我的开发环境中正确）为我修复了相同的错误。

我很想知道它是否不能为您解决问题。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2019-09-18T05:27:46.070

我正在使用 selinux 并使用以下 shell 命令（以 root 身份）我能够允许 PHP 进行 SOAP 调用：

```
sudo setsebool -P httpd_can_network_connect on 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-11-10T21:29:49.427

我有同样的问题。

这个 php 设置解决了我的问题：

```
allow_url_fopen -> 1 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2019-04-04T11:24:30.633

尝试使用 SoapClient 时遇到了类似的问题。一切正常，但在生产中，有时在页面刷新时，我会收到“SoapFault 异常：[WSDL] SOAP-ERROR: Parsing WSDL: Couldn't load from ..”错误。

我正在使用参数：

```
new \SoapClient($WSDL, array('cache_wsdl' => WSDL_CACHE_NONE, 'trace' => true, "exception" => 0)); 
```

删除所有参数对我有用：

```
new \SoapClient($WSDL); 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2020-08-04T12:41:40.297

如果您使用 docker，您可能会因为 OpenSSL 默认安全级别而出错。

您需要较低的 seclevel`/etc/ssl/openssl.cnf`从`DEFAULT@SECLEVEL=2`to`DEFAULT@SECLEVEL=1`

或者只是添加到 Dockerfile

```
RUN sed -i "s|DEFAULT@SECLEVEL=2|DEFAULT@SECLEVEL=1|g" /etc/ssl/openssl.cnf 
```

来源：[https ://github.com/dotnet/runtime/issues/30667#issuecomment-566482876](https://github.com/dotnet/runtime/issues/30667#issuecomment-566482876)

更改后，我可以运行 SoapClient 而无需任何其他选项

* * *

您可以通过在容器上运行来验证它

```
curl -A 'cURL User Agent' -4 https://ewus.nfz.gov.pl/ws-broker-server-ewus/services/Auth?wsdl 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-11-27T09:50:36.697

我遇到了同样的问题，我成功添加了：

```
new \SoapClient(URI WSDL OR NULL if non-WSDL mode, [
    'cache_wsdl' => WSDL_CACHE_NONE, 
    'proxy_host' => 'URL PROXY',
    'proxy_port' => 'PORT PROXY'
]); 
```

希望这有帮助:)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-09-15T22:56:42.143

问题可能在于您没有在 php.ini 文件中启用 openssl 扩展

转到您的 php.ini 文件 end remove `;`in line where `extension=openssl`is

*当然，在问题代码中有一部分代码负责检查扩展是否已加载，但可能有些粗心会忘记它*

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-08-08T20:35:52.343

如果有人遇到同样的问题，一种可能的解决方案是设置`bindto`流上下文配置参数（假设您从 11.22.33.44 连接到 55.66.77.88）：

```
$context = [
    'socket' => [
        'bindto' => '55.66.77.88'
    ]
];

$options = [
    'soapVersion' => SOAP_1_1,
    'stream_context' => stream_context_create($context)
];

$client = new Client('11.22.33.44', $options); 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2022-02-03T14:05:16.863

在我使用 docker 的情况下，我只是将`localhost`（或`127.0.0.1`）更改为`172.17.0.1`in url。这是使用时 docker 主机的默认 IP

```
networks:
  my-own-network:
    driver: bridge 
```

在 docker-compose.yml 中。

# android - 可以在 monodroid 中使用 c# 图像库吗？

> ID：12875412
> 
> 赞同：1
> 
> 时间：2012-10-13T17:54:02.000
> 
> 标签：android, image, xamarin.android

我有使用 System.Drawing.Image 的 ac# 库。据我了解，monodroid 不支持此类。如何在 monodroid 项目中使用我的库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T11:03:28.387

这实际上取决于绘图的内容。如果是常规位图，您可以使用 Mono for Android 库中的 BitmapFactory 和 Bitmap 类，这实际上是您通常使用的原生 Android 东西。

# java - Android Parcelable 和对象通过引用传递

> ID：12875415
> 
> 赞同：4
> 
> 时间：2012-10-13T17:54:18.807
> 
> 标签：java, android, reference, parcelable

我有许多对象，其中一些将具有不同的 ArrayList 属性（自定义对象）。上述任何 ArrayList 中都可能出现相同的对象。

我想让这些对象通过引用传递，这样当我编辑其中一个时，更改会反映在所有 ArrayLists/对象中。

我需要将这些对象或 ArrayLists 作为 Parcelable 跨不同的活动传递。我认为 Parcelable 接口导致通过引用传递不起作用（考虑到您需要实现新的构造函数，哪种有意义，所以据说每次创建和传递 Parcel 时都会创建/克隆新对象？）。

我想知道处理这种情况的最佳方法是什么，即。如何实现或模拟通过引用传递的对象的行为。如果可以避免的话，我真的不想使用任何持久存储技术。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-02-13T10:50:34.170

我知道这是一个老问题，但既然我在这里:)

无论如何，我所做的就是传递我想要的项目的 id，然后使用 Application 来保存我的数据。

例如，假设我有一个名为 Order 的类，每个订单都有很多 Line(s) 像这样

```
class Order {
    UUID _id;
    List<Line> _lines = new ArrayList<>();
}

class Line {
    UUID _id;
    Product _product ;
    BigDecimal _price;
    int _quantity;
} 
```

等等

所以我有一个应用程序的实现，我在其中存储所有（在内存中）订单，如下所示：

```
public class App extends Application {
    public static final List<Order> Orders = new Order();

    public static final Order GetOrder(UUID id) {
        for (Order o : Orders) {
            If(o.get_id().Equals(id))
            return o;
        }
        return null;
    }
} 
```

然后，如果我希望通过特定的命令，我会执行以下操作：

```
Intent i = new Intent(this, OrderEdit.class);
i.putExtra(OrderEdit.ID, my_order.get_id().ToString());
startActivity(i); 
```

另一方面：

```
UUID id = UUID.fromString(getArguments().getExtra(ID));
App.GetOrder(id); 
```

这样你总是有一个参考通过。

# java - 使用线程池的客户端/服务器连接？

> ID：12875418
> 
> 赞同：0
> 
> 时间：2012-10-13T17:54:31.400
> 
> 标签：java, eclipse, sockets, exception

我正在编写一个使用线程池的客户端/服务器应用程序，以便多个客户端可以同时与服务器通信并向其发送命令：

但它不起作用，即使使用非常简单的客户端：

这是我的客户：

```
 if(args.length==0) {
        host="127.0.0.1";
        port=11111;
    } else {
        host=args[0];
        String portString = args[1];
        try {
            port = Integer.parseInt(portString);
        } catch(Exception e) {
            e.printStackTrace();
            port = 11111;
        }
    }

    try {
        System.out.println("Client connects to host=" + host + " port=" + port);
        Socket skt = new Socket(host, port);//line 30 in the exception
        BufferedReader myInput = new BufferedReader(new InputStreamReader(skt.getInputStream()));
        PrintWriter myOutput = new PrintWriter(skt.getOutputStream(), true);

        myOutput.println("Hello I am the Client!");
        String buf=myInput.readLine();
        System.out.println(buf + "=buf");

        if(buf!=null) {
            System.out.println("Client receives " + buf + " from the Server!");
            buf=myInput.readLine();
            System.out.println(buf);

        }
        myOutput.close();
        myInput.close();
        skt.close(); 
```

但我得到：

> 客户端连接到主机 = 127.0.0.1 端口 = 11111 java.net.ConnectException：连接被拒绝：在 java.net.DualStackPlainSocketImpl.socketConnect（未知来源）的 java.net.DualStackPlainSocketImpl.socketConnect（未知来源）的 java.net.DualStackPlainSocketImpl.connect0（本机方法）连接。 AbstractPlainSocketImpl.doConnect(Unknown Source) at java.net.AbstractPlainSocketImpl.connectToAddress(Unknown Source) at java.net.AbstractPlainSocketImpl.connect(Unknown Source) at java.net.PlainSocketImpl.connect(Unknown Source) at java.net.SocksSocketImpl。 connect(Unknown Source) at java.net.Socket.connect(Unknown Source) at java.net.Socket.connect(Unknown Source) at java.net.Socket.(Unknown Source) at java.net.Socket.(Unknown Source ) at client.Client.main(Client.java:30)//看代码处的注释

所以我认为我的服务器可能是错误的，因为我在客户端看不到它：

ServerMain.java

```
public static void main(String[] args) {

    try {
        clientlistener = new ClientListener(server);
        //serversocket = new ServerSocket();
    } catch (IOException e) {
        System.out.println("Could not listen on tcpPort: " + tcpPort);
        e.printStackTrace();
        System.exit(-1);
    } 
} 
```

在这里，我用一个新的打开客户端监听器

```
private static Server server = new Server(); 
```

并希望将其添加到 serverSocket 而不是 threadPool：

```
public ClientListener(Server server) throws ServerException{
    this.server=server;

     try {
            serverSocket = new ServerSocket(server.getTcpPort());
        } catch (IOException e) {
            throw new ServerException(e.getMessage());
        }

    System.out.println(String.format("Accepting new clients " +
            "on %s", serverSocket.getLocalSocketAddress()));
}

/**
 * Spawns new threads on incoming connection requests from clients.
 * */
@Override
public void run() {
    while(true){
        try {
            ClientCommunicator cc = new ClientCommunicator(serverSocket.accept(), pool);
            threadPool.execute(cc);
            clientComms.add(cc);
        } catch (SocketException e) {
            System.out.println(e.getMessage());
            return;
        } catch (IOException e) {
            System.out.println(e.getMessage());
            return;
        }
    }
} 
```

ClientCommunicator 只是一个从命令行读取的类。

我的问题是：

我的套接字连接出了什么问题？

我打开一个并从客户那里接受它？

非常感谢你的回答！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T19:33:05.370

我认为您的服务器已关闭，这就是您收到拒绝连接的原因。我没有看到您的 server.accept() 调用使服务器套接字等待新客户端的到来并返回一个 Socket 对象而不是 SocketServer。

我已经为你完成了这段代码。我希望它有所帮助。

```
package com.sockets.exam1;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.PrintWriter;
import java.net.ServerSocket;
import java.net.Socket;

public class ServerCode {
    public static void main(String[] args) {
        try {
            ServerSocket server = new ServerSocket(11111);
            while (true) {                                              
                new ThreadSocket(server.accept());
            }
        } catch (Exception e) {
        }
    }
}
class ThreadSocket extends Thread{
    private Socket insocket;    
    ThreadSocket(Socket insocket){
        this.insocket = insocket;
        this.start();
    }       
    @Override
    public void run() {     
        try {
            System.out.println("procesing request");
            BufferedReader in = new BufferedReader(new InputStreamReader(
                    insocket.getInputStream()));
            PrintWriter out = new PrintWriter(insocket.getOutputStream(),
                    true);
            String instring = in.readLine();
            out.println("The server got this: " + instring.toUpperCase());
            insocket.close();
        } catch (IOException e) {
            e.printStackTrace();
        }       
    }
} 
```

# audio - 尝试在 Cocos2D-X 中启用音乐暂停时出现“SimpleAudioEngine has not been declared”错误

> ID：12875426
> 
> 赞同：2
> 
> 时间：2012-10-13T17:55:16.180
> 
> 标签：audio, cocos2d-x, appdelegate, simpleaudioengine

所以使用 Cocos2D-X，在`AppDelegate.cpp`文件中，我取消注释该行：

```
SimpleAudioEngine::sharedEngine()->pauseBackgroundMusic(); 
```

这样我的音频将在应用程序退出时暂停。但是，当我这样做时，我得到了标题中所述的错误。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-14T11:39:30.350

在我看来，您忘记添加 SimpleAudioEngine 的声明。将此行添加到 AppDelegate.cpp：

```
#include "SimpleAudioEngine.h"

using namespace CocosDenshion; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-14T12:58:39.560

Dmitry Fomin 的答案是正确的，或者在你放

```
#include "SimpleAudioEngine.h" 
```

您可以使用

```
CocosDenshion::SimpleAudioEngine::sharedEngine()->pauseBackgroundMusic(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-29T11:33:53.567

`SimpleAudioEngine.h`头文件包含`SimpleAudioEngine`类所以添加

```
#include "SimpleAudioEngine.h" 
```

在你的文件中。`SimpleAudioEngine`位于 CocosDenshion 命名空间中，因此您可以使用

```
using namespace CocosDenshion;

SimpleAudioEngine::sharedEngine()->pauseBackgroundMusic(); 
```

或通过

```
CocosDenshion::SimpleAudioEngine::sharedEngine()->pauseBackgroundMusic(); 
```

# dojo - dojo：当前在选项卡容器 (dijit.layout.TabContainer) 中选择的选项卡在视觉上不会更改以显示它是选定的选项卡

> ID：12875429
> 
> 赞同：0
> 
> 时间：2012-10-13T17:55:32.820
> 
> 标签：dojo

我已将 dojo 从 1.61 更新到 1.81，现在在选项卡容器 (dijit.layout.TabContainer) 中当前选择的选项卡 (dijit.layout.ContentPane) 不会在视觉上改变以显示它是选定的选项卡。使用 dojo 1.61，当用户单击不同的选项卡时，单击的选项卡会变大一点，颜色从蓝色变为白色，升级到 1.81 后不会发生这种情况。如何使用 dojo 1.81 获得相同的行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T18:09:56.433

我发现问题是我仍然指向 dojo 1.61 的样式而不是 dojo 1.81，一旦我修复了这个问题，那么在我点击它之后标签会在视觉上发生变化。

# ruby - Ruby 'to' 函数有什么作用？

> ID：12875435
> 
> 赞同：1
> 
> 时间：2012-10-13T17:55:59.877
> 
> 标签：ruby, sinatra

请原谅这个非常基本的问题，但我不是 Ruby 程序员，我需要了解一行 Ruby 代码：

```
redirect to('/') 
```

redirect 来自 Sinatra，我理解它的作用，但是“to”是一个很常见的词，以至于我尝试用谷歌搜索这个功能，但我找不到它。导入以下模块：

```
require 'cgi'
require 'sinatra'
require 'gollum'
require 'mustache/sinatra'
require 'useragent'
require 'stringex' 
```

如果需要，我可以找到[整个文件](https://github.com/github/gollum/blob/master/lib/gollum/frontend/app.rb)或一些[较短的文件。](https://code.google.com/p/google-api-ruby-client/wiki/OAuth2)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T18:01:59.617

该方法是[`Sinatra::Helpers#uri`](http://rubydoc.info/gems/sinatra/Sinatra/Helpers%3auri)，它的别名（也可用）为`url`和`to`。它根据给定的参数创建一个绝对 url。

因此，只有 Sinatra 提供的可读方法名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T18:02:27.397

它不是标准的 ruby​​ 函数，它可能是由 sinatra 等框架定义的 DSL 函数。看[这里](https://github.com/sinatra/sinatra/blob/1e0a6472717f6ee5054ddd1e67d1af41b4f80c91/lib/sinatra/base.rb#L199)：

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-13T18:08:13.093

[您可以在http://www.sinatrarb.com/intro.html](http://www.sinatrarb.com/intro.html)找到很多信息

## 浏览器重定向

您可以使用重定向助手方法触发浏览器重定向：

```
get '/foo' do
  redirect to('/bar')
end 
```

任何附加参数都像传递给halt的参数一样处理：

```
redirect to('/bar'), 303
redirect 'http://google.com', 'wrong place, buddy' 
```

您还可以通过重定向返回轻松地重定向回用户来自的页面：

```
get '/foo' do
  "<a href='/bar'>do something</a>"
end

get '/bar' do
  do_something
  redirect back
end 
```

要通过重定向传递参数，请将它们添加到查询中：

```
redirect to('/bar?sum=42') 
```

或使用会话：

```
enable :sessions

get '/foo' do
  session[:secret] = 'foo'
  redirect to('/bar')
end

get '/bar' do
  session[:secret]
end 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-13T18:08:17.073

ruby 方法是注释中所宣传的`alias`别名并执行。`uri``to`

```
# lib/sinatra/base.rb
# Generates the absolute URI for a given path in the app.
# Takes Rack routers and reverse proxies into account.
def uri(addr = nil, absolute = true, add_script_name = true)
  return addr if addr =~ /\A[A-z][A-z0-9\+\.\-]*:/
  uri = [host = ""]
  if absolute
    host << "http#{'s' if request.secure?}://"
    if request.forwarded? or request.port != (request.secure? ? 443 : 80)
      host << request.host_with_port
    else
      host << request.host
    end
  end
  uri << request.script_name.to_s if add_script_name
  uri << (addr ? addr : request.path_info).to_s
  File.join uri
end

alias url uri
alias to uri 
```

# python - python - 在python中漂亮打印xml时如何缩进属性？

> ID：12875442
> 
> 赞同：10
> 
> 时间：2012-10-13T17:56:25.633
> 
> 标签：python, lxml, pretty-print

假设我有这样的 XML：

```
 <graph label="Test" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:cy="http://www.cytoscape.org" xmlns="http://www.cs.rpi.edu/XGMML"  directed="1">
    <foo>...</foo>
 </graph> 
```

第一个元素名称及其所有属性都出现在一行上。

我已经看到如何使用 lxml 漂亮地打印元素树，代码如下：

```
from lxml import etree
 ...
def prettyPrintXml(filePath):
    assert filePath is not None
    parser = etree.XMLParser(resolve_entities=False, remove_blank_text=True, 
                             strip_cdata=False)
    document = etree.parse(filePath, parser)
    print(etree.tostring(document, pretty_print=True, encoding='utf-8')) 
```

...但是使用它，每个元素都出现在一行上。

是否有一个神奇的咒语告诉漂亮的打印机在元素属性之间插入换行符，例如，行长不超过 80 个字符？

我希望结果看起来像这样：

```
<graph label="Test"
       xmlns:dc="http://purl.org/dc/elements/1.1/"
       xmlns:xlink="http://www.w3.org/1999/xlink"
       xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
       xmlns:cy="http://www.cytoscape.org"
       xmlns="http://www.cs.rpi.edu/XGMML"  directed="1">
  <foo>...</foo>
</graph> 
```

ps：我不想诉诸于[`subprocess`](http://docs.python.org/library/subprocess.html)and`xmllint`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T10:41:01.687

`lxml`内置了一个漂亮的打印功能：[这里有一个教程](http://lxml.de/tutorial.html)，描述了几种打印 xml 的方法。但是，它有一些[限制](http://lxml.de/FAQ.html#why-doesn-t-the-pretty-print-option-reformat-my-xml-output)（根据 lxml，xml 规范中的限制）。

[这个stackoverflow问题](https://stackoverflow.com/questions/749796/pretty-printing-xml-in-python)有几个答案，或多或少的hacky解决方案可以漂亮地打印xml，我认为您至少可以对基于正则表达式的答案进行建模以满足您的需求。

[Fredrik Lundh](http://effbot.org)（以[ElementTree闻名）对](http://docs.python.org/2/library/xml.etree.elementtree.html)[打印 xml](http://effbot.org/zone/element-lib.htm#prettyprint)有一个非常底层的描述，您还可以自定义换行和缩进属性。

# c++ - C++ 中的合并排序：无法在合并函数中传递数组 - 无效转换为“int*”

> ID：12875456
> 
> 赞同：0
> 
> 时间：2012-10-13T17:57:52.420
> 
> 标签：c++, sorting, mergesort

我正在尝试在 C++ 中编写合并排序函数，但是在（在 MergeSort 函数中）出现错误：

```
 A = MergeSort (A, x);
    B = MergeSort (B, y);
    C = Merge(A,B,x,y); 
```

作为从 int 到 int* 的无效转换。我究竟做错了什么？任何帮助将不胜感激！谢谢。

这是我的功能代码：

```
int MergeSort (int [], int);
int Merge (int [], int [], int, int);

int MergeSort (int arr[], int len) {
    int x = len/2;
    int y = len-x;
    int i,j;

    // initialize the arrays
    int * A = new int [x];
    int * B = new int [y];
    int * C = new int [len];

    // copy left and right arrays
    for (i=0, j=0; i<x; i++, j++) {
        A[i] = arr[j];
    }

    for (i=0; i<y; i++, j++) {
        B[i] = arr[j];
    }

    A = MergeSort (A, x);
    B = MergeSort (B, y);
    C = Merge(A,B,x,y);

    return C;
}

int Merge(int A[], int B[], int x, int y) {
    int i,j,k;
    i = 0; j = 0; k = 0;

    int * C = new int[x+y];

    while (i < x && j < y) {
        if (A[i] < B[j])
            C[k++] = A[i++];
        else
            C[k++] = B[j++];
    }

    if (i < x) //A is longer
        C[k++] = A[i++];
    if (j < y) //B is longer
        C[k++] = B[j++];

    return C;

} 
```

这是我的主要功能：

```
int main() {

    //initialize array with some values
    int ar [8] = {7, 5, 9, 1, 4, 22, 11, 10};

    cout<<"array:";
    for (int i=0;i<8;i++)
        cout<<ar[i];
    cout<<endl;

    //run merge sort
    ar = MergeSort(ar,8);

    cout<<"merged array:";
        for (int i=0;i<8;i++)
            cout<<arr[i];
        cout<<endl;

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T18:02:46.593

好吧，`C`被声明为`int*`并返回 as`int`而不是 as `int*`。当然，当您在多个地方分配内存但从未释放它时，您的程序充满了内存泄漏。您可能想看看`std::vector<int>`代表您的数组。

此外，在`main()`您尝试将 an 分配`int`给数组的函数中：您根本不能分配给内置数组，您只能分配给单个元素。使用`std::vector<int>`也可以避免这个问题。

# c# - 在 C# 中使用正则表达式在字符串上拆分标记

> ID：12875457
> 
> 赞同：9
> 
> 时间：2012-10-13T17:57:53.257
> 
> 标签：c#, regex, split, tokenize

例如，我有一些“标记化”模板（我将*标记*称为双括号之间的部分）：

```
var template1 = "{{TOKEN1}} is a {{TOKEN2}} and it has some {{TOKEN3}}"; 
```

我想从这句话中提取一个数组，以便得到类似的东西：

```
Array("{{TOKEN1}}",
      " is a ",
      "{{TOKEN2}}", 
      " and it has some ", 
      "{{TOKEN3}}"); 
```

我尝试使用以下正则表达式代码来实现这一目标：

```
Regex r = new Regex(@"({{[^\}]*}})");
var n = r.Split(template1); 
```

结果是：

```
Array("",
      "{{TOKEN1}}",
      " is a ",
      "{{TOKEN2}}", 
      " and it has some ", 
      "{{TOKEN3}}",
      ""); 
```

第一个问题是我无法从句子中恢复标记。我只是通过在 Regex 表达式上添加括号来解决这个问题，即使我不确定它为什么会解决这个问题。

我目前面临的问题是**当模板上的第一个和/或最后一个词是 "tokens" 时**，数组开头和/或末尾的额外空词。为什么会这样？我做错了什么，还是我应该经常检查这两个位置是否有空？

在我的代码中，我需要知道哪个术语来自一个标记，哪个是模板上的固定位置。在这个解决方案中，我将不得不检查每个数组的位置以查找以“{{”开头并以“}}”结尾的字符串，我认为这不是最好的可能性。所以，如果有人想出一个更好的解决方案来分解这些东西，我会很高兴知道的！

谢谢！

**编辑：**根据要求，我将发布一个简单的示例，说明为什么我需要对标记和文本进行这种区分。

```
public abstract class TextParts { }
public class TextToken : TextParts { }
public class TextConstant : TextParts { }

var list = new List<TextParts>();
list.Add( new TextToken("{{TOKEN1}}") );
list.Add( new TextConstant(" is a ") );
list.Add( new TextToken("{{TOKEN2}}") );
/* and so on */ 
```

这样，我将拥有组成我的字符串的部分列表，并且我将能够将其记录在我的数据库中以允许将来进行操作和替换。事实上，这个 TOKEN 中的每一个都会被一个 Regex 字符串替换。

目标是用户将能够输入诸如“{{SERVER}} 未在端口 {{PORT}} 上侦听”之类的消息，并且我将能够将“{{SERVER}}”替换为`[a-zA-Z0-9 ]+`“{{端口}}" 到`\d{1,5}`. 说得通？

我希望这会使帖子更清楚。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-13T18:13:45.647

如果您沿分隔符拆分字符串，并且字符串以分隔符开头或结尾，则意味着在第一个/最后一个分隔符之前/之后有一个空元素：

想象一下 CSV 文件中的以下行：

```
,a,b,c, 
```

该 CSV 行包含元素`""`、`"a"`、`"b"`、`"c"`和`""`。

你的`{{TOKEN}}`. 您可以使用不同的方法：

```
MatchCollection allMatchResults = null;
Regex regexObj = new Regex(@"\{\{[^{}]*\}\}|[^{}]+");
allMatchResults = regexObj.Matches(subjectString); 
```

如果单个大括号可能出现在标记内或标记之间，您也可以使用

```
Regex regexObj = new Regex(@"\{\{(?:(?!\}\}).)*\}\}|(?:(?!\{\{).)+"); 
```

但是，由于所有的前瞻断言，效率会降低一些，所以只有在需要时才应该使用它。

**编辑：**我刚刚注意到您的帖子中还有另一个问题：为什么需要在正则表达式周围添加括号以使其“工作”？答：通常，`split()`命令只返回分隔符*之间* 的内容。如果您将分隔符（或其部分）包含在捕获括号中，那么这些括号中匹配的任何内容也将添加到结果列表中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T18:18:21.300

试试这个模式，它会把你的令牌作为匹配项取出。

```
\b*\{{2}\w+\}{2}\b* 
```

# javascript - 单击带有 JS 的行

> ID：12875459
> 
> 赞同：0
> 
> 时间：2012-10-13T17:58:01.950
> 
> 标签：javascript

我有一个 JavaScript，当我单击表格行时，我用它来打开一个新页面：

```
//for clicking on a row in tabs and opening new page
function addOnclickToTabsDatatableRows() {
    //gets all the generated rows in the html table
    var trs = document.getElementById('formname:dataTable').getElementsByTagName('tbody')[0]
    .getElementsByTagName('tr');
    //on every row, add onclick function (this is what you're looking for)
    for (var i = 0; trs.length > i; i++) {
        var cells = trs[i].cells;                    
        for(var j=1; j < cells.length; j++){
            cells[j].onclick = new Function("rowOnclick(this.parentElement)");
        }                    
    }
} 
```

我注意到一个我无法解决的问题。我在几个页面上应用了这个 JS 脚本。在每个页面中，我都有具有不同 ID 的不同表单。现在，如果我想使用这个 JS，我必须让每个表单都带有 id `formname`。无论 ID 是什么，我如何将这个 JS 应用于每个表单？我可以使用任何标准方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T18:03:44.057

而不是`document.getElementById('formname:dataTable')`，只需使用`document.getElementsByTagName("form")`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T18:03:27.287

只需遍历页面中的所有表单，如下所示：

```
for(var i=0;i<document.forms.length;i++) {
    var trs = document.forms[i].getElementsByTagName('tbody')[0]
    .getElementsByTagName('tr');
    // rest of your code..
} 
```

# php - 简单的 HTML DOM 解析器 - 获取路径

> ID：12875462
> 
> 赞同：0
> 
> 时间：2012-10-13T17:58:09.623
> 
> 标签：php, dom

我正在慢慢尝试使用[Simple HTML DOM Parser](http://simplehtmldom.sourceforge.net/)从页面中提取一些 html 并将 html 代码插入当前页面。（我是 PHP 新手）

在示例中，一个人将只输入页面名称，如 c.html。我需要 php 在当前页面中查看： div navbar a href 以 $pg 结尾，当它发现需要获取完整的 href 所以我有路径时，它可以用来转到该页面并拉一些指定的 div。

到目前为止我有这个，但路径没有回显：

```
<?php
include_once '%resource(simple_html_dom.php)%';
$pg = 'c.html';
echo 'Page: ' . $pg . '<br />';  // Works
$html = file_get_html();  // needs to look in current pg
foreach($html->find('#navbar a[href$=$pg]') as $path) // Doesn't work
  echo 'Path: ' . $path;
$html = file_get_html($path);
foreach($html->find('#testdiv2') as $ret)
  echo $ret;
?> 
```

谢谢您的帮助。

更新代码：

```
<?php
include_once 'path/to/resource/simple_html_dom.php';
$pg = 'c.html';
echo 'Page: ' . $pg . '<br />';
function file_get_html($url, $use_include_path = false, $context=null, $offset = -1, $maxLen=-1, $lowercase = true, $forceTagsClosed=true, $target_charset = DEFAULT_TARGET_CHARSET, $stripRN=true, $defaultBRText=DEFAULT_BR_TEXT)
foreach($html->find(sprintf('#navbar a[href=%s]',$pg)) as $path)
  echo 'Path: ' . $path;
$html = file_get_html($path);
foreach($html->find('#testdiv2') as $ret)
  echo $ret;
?> 
```

*   include once 行是一种特殊的插件格式 - 我将其更改为显示文件的示例路径 - php 应该可以读取，对吧？

*   在定义函数 file_get_html 时（记住我使用的是简单的 HTML DOM 解析器）：如何为当前页面定义 $url？（我需要自动定义） %s 是否意味着“以”结尾？（我在查看的文档中没有看到）

*   我是否需要在第一个 foreach 中调用该函数或将 $html 分配给该函数？（它需要括号还是结尾；？）

*   对于第二个 foreach，如果 $html 被重新定义，那么它会运行吗？

你能向我解释这些@Baba，因为这对我来说是全新的:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T18:01:10.797

以下不是包含文件的有效方法

```
include_once '%resource(simple_html_dom.php)%'; 
```

它应该是这样的

```
include_once __DIR__.'/simple_html_dom.php'; 
```

`file_get_html`期望至少一个参数是`$url`

```
function file_get_html($url, $use_include_path = false, $context=null, $offset = -1, $maxLen=-1, $lowercase = true, $forceTagsClosed=true, $target_charset = DEFAULT_TARGET_CHARSET, $stripRN=true, $defaultBRText=DEFAULT_BR_TEXT) 
```

我也想相信你的发现应该是这样的

```
foreach($html->find(sprintf('#navbar a[href=%s]',$pg)) as $path) 
```

# c# - 组件 dll 加载失败

> ID：12875463
> 
> 赞同：6
> 
> 时间：2012-10-13T17:58:11.140
> 
> 标签：c#, visual-studio, visual-studio-2012

我刚刚安装了 Visual Studio 2012 Pro，我得到了`A component dll failed to load....`

我已经重新安装了，确保我拥有所有的 .net 框架......我不知道从哪里开始！请帮忙

这是错误的图像 ![在此处输入图像描述](../Images/9695964858bf080b1ca207b26aef238f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T19:21:31.913

在 C: 以外的驱动器上安装 VS2012 如果您在此安装之前在 C 驱动器上进行了安装，则可能会导致问题。

在我的场景中，我在 C 盘上安装了 VS2012 RC，但是当我安装零售版并选择安装到我的 D 盘时（卸载 RC 版本后），一些设置没有正确重置。

在C盘上卸载并重新安装解决了这个问题。

# java - 当从同一行的列中单击按钮时，JSF 在数据表中的一行中显示 TextFields，

> ID：12875467
> 
> 赞同：0
> 
> 时间：2012-10-13T17:58:54.323
> 
> 标签：java, jsp, jsf

伙计们，

这是我与 JSF 合作的第二天，如果我的问题不是很清楚，请多多包涵，我会尽量说清楚。

从附加的屏幕中，您可以看到第一行为空白的表格，而从第二行您可以看到表格条目。

我想做的是，我想使用表格的第一行作为一个条目，我可以在其中输入 ID、名称和值的值。

我单击“保存”按钮后，该行应该被添加到数据库中，并且应该被获取并显示。我对数据库部分没有任何问题。

我的问题是：（请在您提供解决方案时提供代码片段）

1）一旦我点击带有值的行的“编辑”按钮，我需要显示（ID、名称和值）的文本字段，一旦我点击“编辑”按钮，我需要启用禁用的“保存”按钮加载表格后，我可以进行修改，现在它看起来像一个标签。

当我点击保存按钮时对 TextField 进行更改后，我需要禁用它。

我希望该行类似于表的第一行，但其中包含值以对其进行编辑。如何做到这一点？

2) 是否可以参考按钮的 id 并检查它是启用还是禁用来呈现 Textfields(ID, Name and Value) ？

这是表格的列代码

```
<h:column>
    <f:facet name="header">
        <h:outputText value="Value" />
    </f:facet>
    <h:outputText value="#{dataItem.value}" />
    <h:inputText id="value" value="#{dataItem.value}" rendered="#{dataItem.value == null}"/>
</h:column> 
```

当我拥有特定行的数据时，我不会渲染，这样做是为了让我一次显示 outputText 或 inputText。

![在此处输入图像描述](../Images/47a2bc8ff1657e11923949165b230317.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T18:14:07.427

发布此类案例的代码可能需要很长时间。我们使用了许多类似的屏幕，所以这里有一些使用伪代码的提示......

```
BackingBean {
    // take a current variable to keep selected row
    DataItem current;
    // list of dataitems to show in grid 
    List<DataItem> listOfItems;

    // Use ActionListener to set current
    editActionListener(ActionEvent e){
        current = read via actionevent.getAttribute()
    }
    // Use save to save the data, reload the table, disable the button
    saveAction(){
        ManagerBean.save(current);
        reload listOfItems;
        current = null;
        disable save;
    }
} 
```

现在在 xhtml 中显示当前的值：

```
<table component>
<row>
    <h:inputText value="#{backingBean.current.id}" />
    <h:inputText value="#{backingBean.current.name}" />
    <h:inputText value="#{backingBean.current.value}" />
</row>
<loop across "#{backingBean.listofItems}" with "item" variable>
    <row>
        <h:inputText value="#{item.id}" />
        <h:inputText value="#{item.name}" />
        <h:inputText value="#{item.value}" />
        <h:commandButton text="Edit" 
                    actionListener="#{backingBean.editActionListener}" />
        <h:commandButton text="Save" actionListener="#{backingBean.saveActionListener}"
                    action="#{backingBean.saveAction}" />
    </row>
</endloop>
</table component> 
```

# c# - 我如何知道我的电子邮件是否已使用 Asp.net 接收和阅读

> ID：12875469
> 
> 赞同：3
> 
> 时间：2012-10-13T17:59:03.677
> 
> 标签：c#, asp.net, email

我需要知道如何查询已发送电子邮件的状态。
Asp.net 中是否有任何特殊的类来实现此功能？
如果没有，你知道这样做的方法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-13T18:02:55.360

如果您使用`System.Net.Mail`命名空间，您可以在电子邮件中添加标题以请求已读回执：

```
message.Headers.Add("Disposition-Notification-To", "<address@yourdomain.com>"); 
```

然而：

*   许多邮件客户端不支持它们
*   用户可能没有启用它们
*   发送已读回执是可选的；他们可能会简单地说不

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-13T18:02:41.357

没有万无一失的方法可以知道是否已阅读电子邮件，因为电子邮件是一种“发送后忘记”类型的服务。

一些邮件所做的一件事是在电子邮件中包含一个小的（1x1 像素就足够了）独特的图像链接，该链接链接回发件人的 Web 服务器。如果访问图像，则电子邮件已打开。

请注意，这也并不总是有效。事实上，这就是 gmail 和 Outlook 有时要求您“选择加入”以在电子邮件中显示图像的原因。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-13T19:39:17.917

正如大家所说的没有确定的方法知道。[发送http://sendgrid.com](http://sendgrid.com)的Sendgrid 电子邮件 内置支持按照建议添加 1px 图像。他们还有一个 API，可让您测试电子邮件是否已打开或包含的链接是否已单击。与上述相同的警告适用。但是，它至少可以让您在可能的情况下检查已发送电子邮件的状态。我们其中一个网站上 97% 的客户都在公开他们是否阅读过电子邮件。

您可以在此处查看电子邮件事件 API [http://docs.sendgrid.com/documentation/api/event-api/](http://docs.sendgrid.com/documentation/api/event-api/)

# c++ - 模板类错误 C++

> ID：12875477
> 
> 赞同：1
> 
> 时间：2012-10-13T17:59:38.610
> 
> 标签：c++, list, class, templates, arguments

我正在学习如何制作模板类，我遵循这个概念，但遇到了错误。我有一个类，我变成了一个模板，但我得到了以下错误；

simplestack.h(24)：错误 C2955：“SimpleStack”：使用类模板需要模板参数列表

simplestack.h(9) : 参见“SimpleStack”的声明

simplestack.h(28)：错误 C2244：“SimpleStack::push”：无法将函数定义与现有声明匹配

simplestack.h(12) : 参见 'SimpleStack::push' 的声明

这是我的代码：

```
const int MAX_SIZE = 100; 
template <typename T>
class SimpleStack
{
public:
  SimpleStack();
  SimpleStack & push(T value);
  T pop();

private:
  T items[MAX_SIZE];
  T top;
};
template <typename T>
SimpleStack<T>::SimpleStack() : top(-1)
{}

template <typename T>
SimpleStack &SimpleStack<T>::push(T value)
{
  items[++top] = value;
  return *this;
}

template <typename T>
T SimpleStack<T>::pop()
{
  return items[top--];
} 
```

注意：每次我尝试将 MAX_SIZE 设置为 T 时，它都不会接受它。感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T18:02:13.260

该方法`push`应该返回`SimpleStack<T>&`，而不是`SimpleStack&`。

# java - 尽管类路径中有 jar 文件，但包 javax.ejb 不存在

> ID：12875479
> 
> 赞同：4
> 
> 时间：2012-10-13T17:59:39.203
> 
> 标签：java, compilation, ejb, javac

我正在尝试使用命令编译 java 程序

```
javac -d build src/*.java -verbose 
```

它返回给我以下信息：

```
src\Currency.java:5: package javax.ejb does not exist
import javax.ejb.*;
^
src\Currency.java:7: cannot find symbol
symbol: class EJBObject
public interface Currency extends EJBObject {
                              ^ 
```

我正在使用 jdk1.6.0_35。CLASSPATH 包含 C:\wls1036_dev\modules\ 其中包含 javax.ejb.jar

可能是什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-31T05:57:33.373

我遇到了同样的问题。

您需要添加`javaee5.jar`到您的类路径。

例如，我导入了一个 ejb 项目，然后意识到我使用的是不支持 EJB 和 EAR 的 Netbeans 版本。所以我下载了插件。之后，javaee5.jar 出现在 C:\Users\sjauhar\AppData\Roaming\NetBeans\7.3.1\modules\ext 中。将它添加到我的项目中，错误就消失了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T18:04:03.933

类路径必须包含您想要包含的每个 jar 文件的完整路径，而不仅仅是您的 jar 文件所在的文件夹。因此，例如，添加

> C:\wls1036_dev\modules\javax.ejb.jar

到你的类路径

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T18:22:28.920

理想情况下，您应该使用 WebLogic 提供的 JDK 进行编译，而不是使用 J2SE bin 和 libs。

# sql - 如何将@VAR + 幻数传递给 sql 脚本中的存储过程参数？

> ID：12875480
> 
> 赞同：3
> 
> 时间：2012-10-13T17:59:48.847
> 
> 标签：sql, sql-server, tsql, sql-server-2005

假设我有一个存储过程调用`MyStoredProc`，它接收到一个 int`(@MyParam INT)`数据类型。

假设我在这样的脚本中声明了一个 int ......

```
DECLARE @MyVar INT ;
SET @MyVar = 101 ; 
```

我刚刚写了一个很长的 sql 脚本，我做了很多这样的事情......

```
EXEC MyStoredProc @MyVar + 1  ; 
```

我很震惊这会导致语法错误警告。

我可以做这个...

```
EXEC MyStoredProc @MyVar ; 
```

我可以做到这一点...

```
EXEC MyStoredProc 101 ; 
```

但我不能这样做......

```
EXEC MyStoredProc @MyVar + 1  ; 
```

除非我遗漏了什么，否则这将使我的脚本更难编写。这适用于 SQL 2005。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T18:24:38.737

我看到的唯一选择是声明一个临时变量：

```
declare @var1_increment = @var1 + 1
exec stored_proc @var1_increment 
```

并创建一个建议扩展 T-SQL 语法的 Connect 和 User Voice 主题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T18:49:56.497

如果您添加 @MyVar + @MyVar2 可能会溢出整数，这可能是一个原因。

顺便说一下，以下不适用于 sql server 2008

```
EXEC MyStoredProc @MyVar + @MyVar2; 
```

我认为您可以在调用存储过程之前进行添加（根据@adatishchev），或者将两个参数传递给存储过程并将它们添加到存储过程中。

```
EXEC MyStoredProc @MyVar, @MyVar2;

CREATE PROCEDURE [dbo].[MyStoredProc]

     @MyVar INT,
     @MyVar2 INT
AS
BEGIN
     SELECT @MyVar += @MyVar2;

END 
```

# php - Zend Framework 中的表单处理

> ID：12875482
> 
> 赞同：1
> 
> 时间：2012-10-13T18:00:04.027
> 
> 标签：php, zend-framework, zend-form

我开始研究 Zend_Form 组件并了解它的大部分方面。我知道如何添加表单元素并为它们设置配置选项，如何应用表单装饰器，如何添加验证器和过滤器......但是今天我卡在了这些表单的处理上。

有一件特别的事情让我感到困惑。我将用一个尽可能简单的例子来说明它。

首先，我们将表单创建为一个单独的类。这里没什么特别的，只有一个用户名和密码字段以及一个提交按钮。我们还将向它们添加标签以及一些过滤器和验证器。

```
class Login_Form extends Zend_Form
{
    public function init()
    {
        $this->setaction('/user/login')
             ->setMethod('post');

        $username = new Zend_Form_Element_Text('username');
        $username->setLabel('Username:')
                 ->setRequired(true)
                 ->addFilter('StringToLower')
                 ->addValidator('NotEmpty');

        $password = new Zend_Form_Element_Password('password');
        $password->setLabel('Password:')
                 ->setRequired(true);

        $submit = new Zend_Form_Element_Submit('submit');
        $submit->setValue('Submit');

        $this->addElements(array(
            $username,
            $password,
            $submit
            ));

        return $this;  
    }
} 
```

接下来，我们将创建一个带有“登录”操作方法的“用户”操作控制器。在这里，我想检查表单是否已提交（如果没有，则应显示）并验证它。注意两行相同的代码。虽然 $form 对象同时没有改变，第一个没有输出，第二个有。

```
class UserController extends Zend_Controller_Action
{
    public function loginAction()
    {
        $form = new Login_Form;

        // Check if form got submitted
        if ($this->getRequest()->isPost())
        {
            // This does not produce output
            echo 'Username: ' . $form->getValue('username');

            if ($form->isValid($_POST))
            {
                // This does produce output (same line of code as above)
                echo 'Username: ' . $form->getValue('username');
            }
            else
            {
                echo $form;
            }
        }
        else
        {
            echo $form;
        }
    }
} 
```

如果我只想要未过滤的值，我可以从请求对象中获取它们`$this->getRequest()->getPost()`。我想要过滤后的值（过滤器是在 Login_Form 类中定义的），所以我应该从带有`getValues()`. 我发现调用`isValid()`它后 $form 对象发生了变化（它只返回一个布尔值并且不改变 $form 对象），这非常奇怪。对此的任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T19:34:19.837

Zend_Form 对象是这样工作的：您需要将提交给它的实际数据传递给它，它不会从某个地方获取它本身。这是因为数据的来源可能会有所不同。一个应用程序总是使用 POST，有人也想验证 GET 参数，而一个完全不同的应用程序甚至没有 HTTP 请求，但确实想验证来自命令行的输入。

我想知道为什么您的代码似乎有效。首先，您的表单甚至没有定义方法 - 肯定会失败。其次，在您的控制器中，我希望 $form->getValue('username') 可以工作，但是对属性的访问不应该工作 - 我没有看到 Zend_Form 源代码中设置公共属性的任何代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T18:44:54.880

您应该得到过滤后的值，如下所示：

```
$filtered_values = $form->getValidValues ($_POST); 
```

# vb.net - VB.net 从子文件夹启动程序

> ID：12875483
> 
> 赞同：0
> 
> 时间：2012-10-13T18:00:06.453
> 
> 标签：vb.net, process.start, external-application

所以我需要从程序的子文件夹中启动一个外部应用程序。该应用程序将与该程序一起部署，但可能位于不同的位置，因此我无法将其硬编码为“c:\folder\example.exe”

当我运行它时，我得到一个错误，即尽管我在 \bin\debug 中有文件夹和文件，但找不到文件。

```
Private Sub btnUpdate_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnUpdate.Click
    System.Diagnostics.Process.Start("\app\ds104.exe")
End Sub 
```

即使应用程序位于不理想的根文件夹中，我也会遇到相同的错误。

```
Private Sub btnUpdate_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnUpdate.Click
    System.Diagnostics.Process.Start("ds104.exe")
End Sub 
```

谢谢你看看。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T18:47:31.647

该`Process.Start()`方法将完整路径作为参数。

`My.Application.Info.DirectoryPath`您可以使用该属性获取应用程序运行的路径。然后将它与要运行的应用程序的位置连接起来，然后调用该`Process.Start()`方法。

例子：

```
Imports System.Diagnostics

...

Private Sub StartApplication()
    Process.Start(My.Application.Info.DirectoryPath & "\Path\To\App.exe")
End Sub 
```

# sql - SQL Server 2012 内存不足错误消息

> ID：12875485
> 
> 赞同：2
> 
> 时间：2012-10-13T18:00:25.973
> 
> 标签：sql, sql-server, tsql

我正在尝试使用 SSMS 运行一些插入代码（其中大约 40,000 个），但我一直在遇到 SQL 内存不足错误等问题。我将不胜感激任何帮助来解决这个问题。

![**当我尝试运行查询时出现的错误消息**](../Images/3445638a4e3b0e9179f4a86c61881fc4.png)

![**也出现了另一个 SQL 错误消息**](../Images/ac927fa04bfab6e432c3466eeee6e0ae.png) ![数据库属性](../Images/d9c8cd476717a64fd744ed5c4951f6f0.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T18:17:10.983

此异常是 .NET 异常，因此它不能来自 SQL Server。它来自 SSMS 本身。*你的*机器没有足够的内存。

OutOfMemoryException 也与磁盘空间无关。它指的是RAM。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T03:57:21.407

经过数小时的挖掘，我决定卸载我在 SQL 安装中一直使用的所有 Redgate 工具。似乎问题是由这些工具之一引起的。

# graph - 为热图创建颜色的算法是什么？

> ID：12875486
> 
> 赞同：42
> 
> 时间：2012-10-13T18:00:29.923
> 
> 标签：graph, colors, charts, visualization, heatmap

假设值从 0 标准化为 1，那么获取颜色以创建这样的热图的算法是什么？

1 为红色，0.5 为绿色，0 为深蓝色。

在 RMagick / ImageMagick 中工作。

![热图](../Images/21e7ea813ca576d7237040904077b5b8.png)

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2014-12-03T04:55:17.377

这是一个 JavaScript 代码片段，用于从 [0, 1] 值生成 CSS hsl 颜色代码

```
function heatMapColorforValue(value){
  var h = (1.0 - value) * 240
  return "hsl(" + h + ", 100%, 50%)";
} 
```

该算法基于[5 色热图](http://www.andrewnoske.com/wiki/Code_-_heatmaps_and_color_gradients)，

在该算法中，与值对应的颜色为

```
0    : blue   (hsl(240, 100%, 50%))
0.25 : cyan   (hsl(180, 100%, 50%))
0.5  : green  (hsl(120, 100%, 50%))
0.75 : yellow (hsl(60, 100%, 50%))
1    : red    (hsl(0, 100%, 50%)) 
```

很简单！

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-10-17T13:50:39.003

我发现使用 HSL 非常容易做到这一点。

在红宝石中：

```
def heatmap_color_for value # [0,1]
  h = (1 - value) * 100
  s = 100
  l = value * 50
  "hsl(#{h.round(2)}%,#{s.round(2)}%,#{l.round(2)}%)"
end 
```

此方法将 HSL 值作为 0% 到 100% 之间的字符串返回。它可以与 RMagick 或 ImageMagick 一起使用。

参考：[ImageMagick HSL 文档](http://www.imagemagick.org/script/color.php)。

在 Java 中，对于 CSS，测试：

```
private String getHeatmapColorForCSS(double normalizedValue0to1) {
    double h = (1 - normalizedValue0to1) * 360;
    double s = 100;
    double l = 50;
    return String.format("hsl(%.2f, %.2f%%, %.2f%%)", h, s, l);
} 
```

请注意 CSS 和 ImageMagick 之间的主要区别：第一个值是 0-360 并且没有百分号。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-10-16T07:58:38.020

RGB 分量的线性插值在实践中效果很好，Bruno 分享的链接提到在 HSL 中进行插值可以提供帮助。

您还可以将您的三种基本颜色与更精心选择的中间色散布。查看[http://colorbrewer2.org/](http://colorbrewer2.org/)了解一些不错的颜色渐变。然后进一步分解你的步骤：

```
0    red
0.25 yellow
0.5  green
0.75 cyan
1    blue 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-13T18:10:40.147

一般的方法是插入颜色。你决定了

```
0: 0 0 255 (or any blue)
0.5: 0 255 0 (or any green)
1: 255 0 0 (or any red) 
```

您只需对 RGB 进行线性插值。在 2 个参考值之间（例如 0 和 0.5 之间的 t），插值颜色 C 就像

```
C = (1 - t) * c0 + t * c1 
```

您必须在每个颜色分量 RGB 上应用此公式。关于颜色线性插值的其他一些提示： [如何插入颜色序列？](https://stackoverflow.com/questions/5860100)

---- 编辑 ----- 我删除了答案的标题，因为我意识到我误解了这个问题（见评论）。为了以防万一，我留下一份副本以供一致阅读和信息。

第一种可能性是使用任何软件构建参考热图：创建像素值从 0 到 255 的图像 256X1pixel 并使用 ImageMagick 应用所需的热图：然后您可以读取 RGB 并构建地图（值：RGB） .

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-01-30T19:37:21.953

我在这里留下了一个基于[这篇博](http://www.andrewnoske.com/wiki/Code_-_heatmaps_and_color_gradients)文的 Swift 4 实现，用于任意数量的颜色！完美的解释就在那里！希望它对某人有所帮助并节省一些时间！

```
import Foundation
import UIKit

struct ColorPoint {
    let color: UIColor
    let value: CGFloat
}

class HeatMapColor {
    var colorPoints: [ColorPoint]

    init(colorPoints: [ColorPoint]) {
        self.colorPoints = colorPoints
    }

    func colorAt(value: CGFloat) -> UIColor {
        if(colorPoints.isEmpty) { return UIColor.black }

        let colorsPointsToUse = colorPoints.sorted { (colorPointA, colorPointB) -> Bool in
            return colorPointA.value <= colorPointB.value
        }

        for (index, colorPoint) in colorsPointsToUse.enumerated() where value < colorPoint.value {
            let previousColorPoint = colorsPointsToUse[max(0, index - 1)]
            let valueDiff = previousColorPoint.value - colorPoint.value
            let fraction = valueDiff == 0 ? 0 : (value - colorPoint.value) / valueDiff

            guard
                let prevComp = previousColorPoint.color.cgColor.components,
                let currComp = colorPoint.color.cgColor.components else { continue }

            let red = (prevComp[0] - currComp[0]) * fraction + currComp[0]
            let green = (prevComp[1] - currComp[1]) * fraction + currComp[1]
            let blue = (prevComp[2] - currComp[2]) * fraction + currComp[2]

            return UIColor(red: red, green: green, blue: blue, alpha: 1.0)
        }

        return colorsPointsToUse.last!.color
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-05-09T18:54:32.777

这是python中的一个简单的5色热图（在pyqt中，但易于概括）

```
def genColorMap(self):
    points = [(255,0,0), (255,255,0), (0,255,0), (0,255,255), (0,0,255)]
    cm = {}
    for i in range(0, 256):
        p0 = int(numpy.floor((i/256.0)/len(points)))
        p1 = int(numpy.ceil((i/256.0)/len(points)))
        rgb = map(lambda x: x[0]*max(0,(i-p0)) + x[1]*max(0,(i-p1)), zip(points[p0], points[p1]))
        cm[i] = QtGui.qRgb(rgb[0], rgb[1], rgb[2])
    return cm 
```

# pointers - 只有当查询变量是指针时，Mysql++ 查询才会失败...：S

> ID：12875495
> 
> 赞同：0
> 
> 时间：2012-10-13T18:01:16.600
> 
> 标签：pointers, mysql++

我遇到了一个问题，这让我认为我不了解一些基本的东西。我正在使用 MySQL++，并且在调用 query.execute()（其中“query”是类 mysqlpp::Query 的实例）时它可以工作，但是当调用 query->execute()（其中“query”是指向实例的指针时）类 myqslpp::Query) 相同的查询失败！错误消息是“查询为空”。

这是我用于测试的代码。

以下运行没有错误，并且在数据库中创建了表。

```
void test1() {
    mysqlpp::Connection conn;
    conn.connect(0, "server", "user", "password");
    conn.select_db("db_name");

    mysqlpp::Query query = conn.query();
    try {
        query << "CREATE TABLE IF NOT EXISTS MY_TABLE (MY_COLUMN SMALLINT)";
        query.execute();
    }
    catch (const mysqlpp::BadQuery&) {
        std::cerr << query.error() << std::endl;
    }
} 
```

虽然以下产生输出“查询为空”并且未在数据库中创建表。

```
void test2() {
    mysqlpp::Connection conn;
    mysqlpp::Query *query = 0;
    conn.connect(0, "server", "user", "password");
    conn.select_db("db_name");

    query = &conn.query();
    try {
        *query << "CREATE TABLE IF NOT EXISTS MY_TABLE (MY_COLUMN SMALLINT)";
        query->execute();
    }
    catch (const mysqlpp::BadQuery&) {
        std::cerr << query->error() << std::endl;
    }
    query = 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T18:20:50.997

看起来在后一个版本中，您将地址存储到一个临时对象（函数的返回值，临时存储在堆栈中），该对象立即被破坏。

这意味着一旦您`execute`接听电话，您的查询不一定是有效的活动对象。

不确定您使用的是什么编译器，但 g++ 通常会`warning: taking address of temporary`针对此类代码发出警告。

# java - 计算相邻重复项的递归函数

> ID：12875497
> 
> 赞同：0
> 
> 时间：2012-10-13T18:01:31.280
> 
> 标签：java

我希望递归函数检查当前节点中的值是否等于下一个节点中的值并递增 1，否则不要递增并继续移动到列表末尾。因此，对于 1, 2, 2, 3 , 1, 1 的列表。它应该返回 2 作为 2, 2 是一个相邻的副本，1, 1 是另一个相邻的副本。

当当前值不等于下一个值时，我无法弄清楚如何处理错误情况。基本上，不会增加。

到目前为止，这是我的代码...

```
int fn(Node l) {
    if (l == null)
        return 0;
    else 
        return (l.value == l.next.value) ? (1 + fn(l.next)) : ;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T18:07:03.983

在任何一种情况下都需要再次调用该函数，对于您不会添加`1`到返回值的错误情况，即

```
return (l.value == l.next.value) ? (1 + fn(l.next)) : fn(l.next); 
```

您还应该检查`l.next`是否不是`null`第一个。所以你可以重写函数......

```
int fn(Node l) {
   if (l == null || l.next == null)
       return 0;
   return (l.value == l.next.value ? 1 : 0) + fn(l.next);
} 
```

# mysql - 在连接条件中添加通配符

> ID：12875499
> 
> 赞同：1
> 
> 时间：2012-10-13T18:01:35.013
> 
> 标签：mysql, select, join, wildcard, sql-like

如何将通配符 % 添加到“specifications.sn”？

```
SELECT `products2`.`type`, 
       `products2`.`sn`, 
       `products2`.`lap`, 
       `specifications`.`year` 
FROM `products2`
INNER JOIN `specifications` 
      ON `products2`.`sn` LIKE `specifications`.`sn`
WHERE `products2`.`id` = ? LIMIT 1 
```

编辑：

添加了当前查询

*   删除了反引号
*   添加了您的 CONCAT

    ```
    SELECT products2.type, 
    products2.sn, 
    products2.lap, 
    specifications.year 
    FROM products2
    INNER JOIN specifications 
    ON products2.sn LIKE CONCAT('%', specifications.sn, '%')
    WHERE products2.id = ? LIMIT 1 
    ```

替代查询 - 与上面的代码相同的错误

*   删除了反引号
*   删除了 INNER JOIN
*   在 WHERE 语句中添加 LIKE

    ```
    SELECT products2.type, 
    products2.sn, 
    products2.lap, 
    specifications.year
    FROM products2, 
    specifications
    WHERE products2.id = ? AND products2.sn LIKE '%' + specifications.sn + '%' LIMIT 1 
    ```

编辑2

PHP 代码

```
if ($stmt = $mysqli->prepare('SELECT products2.type, 
products2.sn, 
products2.lap, 
specifications.year 
FROM products2
INNER JOIN specifications 
ON products2.sn LIKE CONCAT('%', specifications.sn, '%')
WHERE products2.id = ? LIMIT 1')) { 

$stmt->bind_param('i', $id);
$id = $_GET['id'];
$stmt->execute();
$stmt->bind_result($type, $sn, $lap, $year);
$stmt->fetch();

echo $type . '<br/>';
echo $sn . '<br/>';
echo $lap . '<br/>';
echo $year . '<br/>';

$stmt->close();

} else {
echo $mysqli->error;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T18:02:46.567

```
SELECT `products2`.`type`,
       `products2`.`sn`,
        `products2`.`lap`, `specifications`.`year`
FROM `products2`
INNER JOIN `specifications`
      ON `products2`.`sn` LIKE 
         CONCAT(`specifications`.`sn`, '%')
WHERE `products2`.`id` = ? LIMIT 1 
```

请注意以下事项：

*   这对于参加表演将非常无效
*   `CONCAT(NULL, 'ADADSA')`返回`NULL`，因此如果您认为，您必须注意这个特殊用例`specifications`。`sn`可能为 NULL。

干杯。

# c++ - 计算字符串中的单词数，C++

> ID：12875503
> 
> 赞同：6
> 
> 时间：2012-10-13T18:02:03.293
> 
> 标签：c++, string, counting

> **可能重复：**
> [用于计算字符串中所有单词的 C++ 函数](https://stackoverflow.com/questions/3672234/c-function-to-count-all-the-words-in-a-string)

所以我有一行单词，我使用 C++ 存储在一个字符串中。即“有一个农民叫比利\n”

我想知道字符串中的单词数（即当前有 6 个单词）。谁能告诉我该怎么做？如果这是不可能的，有没有办法可以计算字符串中的空格数（即“”）。让我知道谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-13T18:09:43.043

当然，这很简单：

```
std::cout << "number of words: "
          << std::distance(std::istream_iterator<std::string>(
                               std::istringstream(str) >> std::ws),
                           std::istream_iterator<std::string>()) << '\n'; 
```

只是为了一点解释：

1.  阅读 a`std::string`会在跳过前导空格后读取一个单词，其中*单词*是一系列非空白字符。
2.  `std::istream_iterator<T>``T`通过读取相应的对象直到读取失败，将输入流变成一系列对象。
3.  `std::istringstream`接受 a`std::string`并将其转换为正在读取的流。
4.  `std::istream_iterator<T>`is的构造函数参数`std::istream&`，即临时`std::istringstream`不能直接使用，但需要获取引用。这是唯一有趣的效果，`std::ws`它也跳过了前导空格。
5.  `std::distance()`确定序列中有多少元素（最初使用的`std::count()`确定序列中有多少元素与给定条件匹配，但实际上缺少条件）。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-13T18:08:23.683

计算单词的一种简单方法是使用带有 std::string 的 >> 运算符，如下所示：

```
std::stringstream is("There was a farmer named Billy");
std::string word;

int number_of_words = 0;
while (is >> word)
  number_of_words++; 
```

从 std::istream 中提取 std::string 时，>>operator() 将在其默认设置中跳过空格，这意味着它将为您提供由一个或多个空格分隔的每个“单词”。所以即使单词被多个空格分隔，上面的代码也会给你相同的结果。

# java - Java Swing 重绘和重新验证并不总是有效

> ID：12875509
> 
> 赞同：2
> 
> 时间：2012-10-13T18:02:25.267
> 
> 标签：java, swing, validation, layout, repaint

我在使用几个按钮来摆动和更新 JPanel 时遇到问题。有时我需要删除或添加甚至修改一些按钮。我已经创建了一个例程来做到这一点，只有很少的对话框和消息框。事实是，有时（随机）JPanel 不能正确刷新（它不会按要求删除按钮，甚至不会添加它）。如果我第二次调用刷新例程（我调用对话框添加一个按钮，然后单击退出而不添加任何内容）一切顺利。我不知道为什么，我认为这是关于时间和需要每个重绘或重新验证方法有效的时间，这个考虑是因为我试图调试程序（使用 eclipse 和几个断点）并且在调试期间它总是刷新正确。

这是一些代码（简化）。

```
// This method is used when first creating the GUI (the removeAll obviously remove nothing
// I call the revalidate because I re-add the buttons, and I call repaint to have the
// JPanel itself repainted.

public static void repaintServices() {
    //services is a JPanel
    services.removeAll();
    JLabel lbl = new JLabel("SERVIZI");

    services.add(lbl);
    services.add(Box.createRigidArea(new Dimension(0, 20)));

    // ########## SERVICES BUTTONS
    Database.connect();
    ArrayList<Service> s = Database.listServices();
    JPanel btt = new JPanel();
    for (int i = 0; i < s.size(); i++) {
        JButton b = new JButton(s.get(i).getName().toUpperCase());
        if (i % 3 == 0) {
            btt = new JPanel();
            btt.setLayout(new BoxLayout(btt, BoxLayout.LINE_AXIS));
            services.add(btt);
            services.add(Box.createRigidArea(new Dimension(0, 10)));
            btt.add(b);
        } else {
            btt.add(Box.createRigidArea(new Dimension(10, 0)));
            btt.add(b);
        }
    }
    Database.disconnect();
    // ########## END SERVICES BUTTONS

    services.add(Box.createVerticalGlue());

    services.revalidate();
    services.repaint();
} 
```

这是我修改数据库的地方（以及按钮列表）

```
LOG.finest("User ask to add a new Service");

ArrayList<String> result = GUI.showServiceDialog();
if (result.size() > 0) {
    if (!"".equals(result.get(0))) {
        String name = result.get(0);

        Database.connect();
        if (Database.addService(name, price, cadence)) {
            GUI.showMessage("Servizio aggiunto correttamente");
        GUI.repaintServices();
        }
        Database.disconnect();
    } else {
        GUI.showErrorMessage("All field necessary!\nNew Service NOT added");
        return;
    }
}else {
    return;
} 
```

这是用于获取用户插入的值的方法（使用自定义模式对话框）

```
public static ArrayList<String> showServiceDialog() {
    ArrayList<String> ret = new ArrayList<String>();
    JTextField name = new JTextField(15);
    JTextField price = new JTextField(5);
    JTextField cadence = new JTextField(4);

    // NOT USEFUL STUFF, just adding some components. JUMP DOWN TO.....
    JPanel p = new JPanel();
    p.setLayout(new BoxLayout(p, BoxLayout.PAGE_AXIS));
    JPanel pp = new JPanel();
    pp.setLayout(new BoxLayout(pp, BoxLayout.LINE_AXIS));

    pp.add(new JLabel("Nome:"));
    pp.add(Box.createHorizontalStrut(10));
    pp.add(name);

    p.add(pp);
    p.add(Box.createVerticalStrut(10)); // a spacer

    pp = new JPanel();
    pp.setLayout(new BoxLayout(pp, BoxLayout.LINE_AXIS));
    pp.add(new JLabel("Prezzo:"));
    pp.add(Box.createHorizontalStrut(10));
    pp.add(price);
    pp.add(new JLabel("€"));
    pp.add(Box.createHorizontalStrut(20));
    pp.add(new JLabel("Frequenza:"));
    pp.add(Box.createHorizontalStrut(10));
    pp.add(cadence);

    p.add(pp);
    p.add(Box.createVerticalStrut(15));

    // .... HERE, following the interesting part.

    int result = JOptionPane.showConfirmDialog(window, p, "Inserisci i dati del nuovo servizio", JOptionPane.OK_CANCEL_OPTION);
    if (result == JOptionPane.OK_OPTION) {
        ret.add(name.getText());
        ret.add(price.getText());
        ret.add(cadence.getText());
    }
    return ret;

} 
```

我有一些其他方法，如删除、编辑等，但问题（不正确刷新）是每种方法随机出现的，我发布了我拥有的最简单的部分。

任何想法？（我对 GUI 的其他部分也有同样的问题，比如组合框或列表框，GUI 是从 SwingUtilities.invokeLater 启动的）

这里有一些SSCCE代码，问题发生在：添加，添加，删除，添加

删除后的添加无法正确刷新（有时，有时是随机的，正如我所说）。（不碰任何其他东西）。我希望代码足够清晰和简短，我删除了似乎没有涉及的数据库。

```
package it.kApps;

import java.awt.Dimension;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.ArrayList;

import javax.swing.Box;
import javax.swing.BoxLayout;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JOptionPane;
import javax.swing.JPanel;

public class RevalidateRepaintTry {

private static JPanel   services;
private static ArrayList<String>    s;

public RevalidateRepaintTry() {
    s = new ArrayList<String>();
    s.add("btt1");
    s.add("btt2");
    JFrame main = new JFrame();
    main.getContentPane().setLayout(new BoxLayout(main.getContentPane(), BoxLayout.PAGE_AXIS));
    services = new JPanel();
    repaintServices();
    JButton b = new JButton("ADD");
    b.addActionListener(new ActionListener() {
        @Override
        public void actionPerformed(ActionEvent evt) {
            String add = JOptionPane.showInputDialog("insert new");
            s.add(add);
            repaintServices();
        }
    });
    JButton bb = new JButton("DEL");
    bb.addActionListener(new ActionListener() {
        @Override
        public void actionPerformed(ActionEvent evt) {
            s.remove(s.size() - 1);
            repaintServices();
        }
    });
    main.add(services);
    main.add(b);
    main.add(bb);
    main.setVisible(true);
    main.pack();
    main.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

}

public static void main(String arg[]) {

    javax.swing.SwingUtilities.invokeLater(new Runnable() {
        @Override
        public void run() {
            new RevalidateRepaintTry();
        }
    });

}

public static void repaintServices() {
    // services is a JPanel
    services.removeAll();
    JLabel lbl = new JLabel("SERVIZI");

    services.add(lbl);
    services.add(Box.createRigidArea(new Dimension(0, 20)));

    // ########## SERVICES BUTTONS
    JPanel btt = new JPanel();
    for (int i = 0; i < s.size(); i++) {
        JButton b = new JButton(s.get(i));
        if (i % 3 == 0) {
            btt = new JPanel();
            btt.setLayout(new BoxLayout(btt, BoxLayout.LINE_AXIS));
            services.add(btt);
            services.add(Box.createRigidArea(new Dimension(0, 10)));
            btt.add(b);
        } else {
            btt.add(Box.createRigidArea(new Dimension(10, 0)));
            btt.add(b);
        }
    }
    // ########## END SERVICES BUTTONS

    services.add(Box.createVerticalGlue());

    services.revalidate();
    services.repaint();
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T21:21:54.250

我感觉这是布局管理器的问题...

就个人而言，我会从使用不同的布局管理器开始。

`JPanel`默认情况下使用 a `FlowLayout`，它有一个很棒的副作用，即不“包装”组件扩展超出父容器的水平宽度。

虽然我知道它`Box`可以与其他布局管理器一起使用，但它旨在与`BoxLayout`.

```
public class RevalidateRepaintTry {

    private static JPanel services;
    private static ArrayList<String> s;

    public RevalidateRepaintTry() {
        s = new ArrayList<String>();
        s.add("btt1");
        s.add("btt2");
        JFrame main = new JFrame();
        main.getContentPane().setLayout(new BoxLayout(main.getContentPane(), BoxLayout.PAGE_AXIS));
        services = new JPanel();
        repaintServices();
        JButton b = new JButton("ADD");
        b.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent evt) {
                String add = JOptionPane.showInputDialog("insert new");
                s.add(add);
                repaintServices();
            }

        });
        JButton bb = new JButton("DEL");
        bb.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent evt) {
                s.remove(s.size() - 1);
                repaintServices();
            }

        });
        main.add(services);
        main.add(b);
        main.add(bb);
        main.setVisible(true);
        main.pack();
        main.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    }

    public static void main(String arg[]) {

        javax.swing.SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new RevalidateRepaintTry();
            }

        });

    }

    public static void repaintServices() {
        // services is a JPanel
        services.removeAll();
        JLabel lbl = new JLabel("SERVIZI");

        JPanel view = new JPanel(new GridBagLayout());
        JScrollPane scroll = new JScrollPane(view);

        GridBagConstraints gbc = new GridBagConstraints();
        gbc.gridx = 0;
        gbc.gridy = 0;

        view.add(lbl, gbc);

        // ########## SERVICES BUTTONS
        for (int i = 0; i < s.size(); i++) {
            JButton b = new JButton(s.get(i));
            if (i % 3 == 0) {
                gbc.gridy++;
                gbc.gridx = 0;
            } else {
                gbc.gridx++;
            }
            view.add(b, gbc);
        }
        // ########## END SERVICES BUTTONS

        view.add(Box.createVerticalGlue());

        services.add(scroll);

        services.revalidate();
        services.repaint();
    }
} 
```

注意，我扔了一个`JScrollPane`，它可能不是必需的

# java - 从 JTextField 到 JTable 的数据

> ID：12875517
> 
> 赞同：1
> 
> 时间：2012-10-13T18:02:46.600
> 
> 标签：java, swing, jtable, jframe, defaulttablemodel

我想将在文本框中输入的数据添加到表中并保持递增的 ID。单击“添加”按钮时添加数据。

```
 import java.awt.*;
    import java.awt.event.*;
    import javax.swing.*;

    public class ex1 extends JFrame {
    GridLayout experimentLayout = new GridLayout(3, 3);
    private javax.swing.JButton jButton1,jButton2,jButton3;
    private javax.swing.JLabel jLabel1, jLabel2, jLabel3;

    private javax.swing.JTextField jTextField1,jTextField2,jTextField3;

    String columns[] = {"ID","Name","Age","Gender"};
    Object data[][] = {
            {"0","Tom",new Integer(20),"Male"},
            {"1","Tina", new Integer(18), "Female"},
            {"2","Raj",new Integer(19),"Male"}

    };

    public void addComponentsToPane(final Container pane) {
        final JPanel compsToExperiment = new JPanel();

        compsToExperiment.setLayout(experimentLayout);
        JPanel controls = new JPanel();
        controls.setLayout(new GridLayout(8, 3));

        jLabel1 = new javax.swing.JLabel("Name: ");
        jLabel2 = new javax.swing.JLabel("Age: ");
        jLabel3 = new javax.swing.JLabel("Gender: ");
        jTextField1 = new javax.swing.JTextField();
        jTextField2 = new javax.swing.JTextField();
        jTextField3 = new javax.swing.JTextField();
        jButton1 = new javax.swing.JButton("Add");
        jButton2 = new javax.swing.JButton("Next");
        jButton3 = new javax.swing.JButton("Per");

        compsToExperiment.add(jLabel1);
        compsToExperiment.add(jLabel2);
        compsToExperiment.add(jLabel3);

        compsToExperiment.add(jTextField1);
        compsToExperiment.add(jTextField2);
        compsToExperiment.add(jTextField3);
        compsToExperiment.add(jButton1);

        JTable table = new JTable(data,columns);
        controls.add(table.getTableHeader());
        controls.add(table);
            pane.add(compsToExperiment, BorderLayout.NORTH);
        pane.add(controls, BorderLayout.CENTER);
    }

    /**
     * Create the GUI and show it. For thread safety, this method is invoked
     * from the event dispatch thread.
     */
    private static void createAndShowGUI() {        
        ex1 frame = new ex1();      
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);   
        frame.addComponentsToPane(frame.getContentPane());
        frame.setSize(500,500);
        //frame.pack();     
        frame.setVisible(true);
    }

    public static void main(String[] args) {

        try {           
            UIManager.setLookAndFeel(
                "javax.swing.plaf.metal.MetalLookAndFeel");
        } catch (UnsupportedLookAndFeelException ex) {
            ex.printStackTrace();
        } catch (IllegalAccessException ex) {
            ex.printStackTrace();
        } catch (InstantiationException ex) {
            ex.printStackTrace();
        } catch (ClassNotFoundException ex) {
            ex.printStackTrace();
        }
        /* Turn off metal's use of bold fonts */
        UIManager.put("swing.boldMetal", Boolean.FALSE);

        // Schedule a job for the event dispatch thread:
        // creating and showing this application's GUI.
        javax.swing.SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                createAndShowGUI();
            }
        });
    }
} 
```

我知道设计到处都是我刚开始学习java的地方，请随时指出可以做出的改进。先感谢您 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T18:20:41.737

要添加在 中输入的数据，`JTextFields`您需要`ActionListener`在添加按钮中注册一个，在这种情况下为`jButton1`。

要将条目添加到表模型中，您可以使用可变模型，例如`DefaultTableModel`：

```
DefaultTableModel model = new DefaultTableModel(data, columns); 
```

在您的`actionPerformed`方法中，您`ActionListener`将拥有：

```
String nextRowId = Integer.toString(model.getRowCount());
model.addRow(new Object[] { 
              nextRowId, 
              jTextField1.getText(), 
              jTextField2.getText(), 
              jTextField3.getText() }); 
```

推荐以下：

*   为变量使用更有意义的名称。
*   `JTable`为可能包含大量数据的数据分配更多空间。也放在一个`JScrollPane`.

# jquery - 使用 jQuery 时出错

> ID：12875518
> 
> 赞同：1
> 
> 时间：2012-10-13T18:02:47.390
> 
> 标签：jquery, ajax

我很困惑，我在执行这个脚本之前包含了 jQuery 1.7 库：

```
var rq;

function request(localTarget, parameter)
{
    $("#" + localTarget).text("Laden...");
    rq = new XMLHttpRequest();
    rq.open("GET", parameter, false);
    rq.onreadystatechange = auswerten(localTarget, parameter);
}

function auswerten(target, site)
{   
    if (rq.readyState == 4 && rq.status == 200) {
        $("#" + target).text(rq.responseText);
    } else {
        $("#" + target).text("Wert konnte nicht geladen werden");
    }
} 
```

但是文本不会出现，我尝试了一切，但它不起作用！

我要插入文本的 Html 代码如下所示：

```
<table width='100%' cellpadding='4' cellspacing='0'>
<tr>
  <td class='tablesubheader' width='50%'>Typ</td>
  <td class='tablesubheader' width='50%'>Wert</td>
</tr>

<tr>
<td>Geld heute</td>
<td><div id="money_today">Test</div></td>
</tr>

<tr>
<td>Geld Monat</td>
<td id="money_month"></td>
</tr>

<tr>
<td>Klicks heute</td>
<td id="klicks_today"></td>
</tr>

<tr>
<td>Klicks Monat</td>
<td id="klicks_month"></td>
</tr>

</table>
</td> 
```

上面的方法是这样调用的：

```
<script type="text/javascript">
$(window).load(function() {
    request('money_today','<?php echo $link1; ?>');
    request('money_month','<?php echo $link2; ?>');
    request('klicks_today','<?php echo $link3; ?>');
    request('klicks_month','<?php echo $link4; ?>');
});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T18:06:30.883

将您的代码移入内部`$(document).ready`并使用 .html 而不是 .text。

修改代码：[jquery加载](http://api.jquery.com/load/)

```
 function request(localTarget, parameter)
    {
        $("#" + localTarget).("Wert konnte nicht geladen werden");
        $("#" + localTarget).load(parameter);
    } 
```

**注意：**您应该提供函数引用来`rq.onreadystatechange`加载而不是函数的返回值。`auswerten(localTarget, parameter);`将 undefined 分配给`onreadystatechange`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T18:04:35.040

问题可能是您的代码在页面上存在您尝试处理的元素之前运行：即在加载页面之前。尝试将该代码放在以下内容中：

```
$(document).ready(function() {
    // Your code here
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T18:16:37.010

```
rq.onreadystatechange = auswerten(localTarget, parameter); 
```

你在这里调用函数。你不知道 - 当响应到达时浏览器应该调用该函数：

```
// pass a function (that you don't call), which in turn calls `auswerten`
rq.onreadystatechange = function() {
  auswerten(localTarget, parameter);
}; 
```

无论如何，jQuery 有一个内置`$.ajax`函数，它具有跨浏览器规范化并且使用起来更快。

# android - 如何在设备重启后立即将调试器附加到服务或应用程序？

> ID：12875520
> 
> 赞同：1
> 
> 时间：2012-10-13T18:02:58.613
> 
> 标签：android, eclipse, intellij-idea

我正在测试一些即使设备重启也必须启动的服务。现在，如果我将调试器附加到应用程序，它会在设备关闭时断开连接。并且当设备完全启动时它不会重新连接。

我错过了一些我确定的东西。请帮忙...

为了澄清，我需要在设备启动后第二次附加到该进程。这不能以我在设备重新启动后手动按下调试按钮的方式完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T17:11:05.877

将其放入您要调试的服务代码中：

```
android.os.Debug.waitForDebugger(); 
```

在此之后放置一个断点。确保 Eclipse 正在运行。重新启动您的设备并将其连接到您的计算机。一旦服务启动并点击 waitForDebugger，Eclipse 将进入调试模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T18:13:25.623

它可能不是您问题的完整解决方案，但是当您的设备重新启动时，请转到 Eclipse 中的“设备”选项卡，然后选择或重新选择您的设备。当您切换回 logcat 选项卡时，您现在应该会看到设备的日志。我想这可能有助于测试您的服务。

# java - 在java中的不同机器上并行运行不同的java程序

> ID：12875527
> 
> 赞同：0
> 
> 时间：2012-10-13T18:03:32.933
> 
> 标签：java, parallel-processing

这是我的要求，谁能告诉我我可以使用什么java技术：

“一个Java程序在一台机器上运行，比如A，它要求机器的IP地址，比如3台机器。在将IP地址作为命令行参数给出时，该程序将向这些机器发送3个模块（执行某些操作的java程序） “

但是在谷歌上花了很多时间之后，我找不到任何特定的框架/技术。所以我想到了这个论坛。

请建议。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T10:52:46.703

有一个与此非常相似的框架，称为[Apache Hadoop](http://hadoop.apache.org/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T11:10:40.980

由于需求意味着不同的机器（节点），它应该是一个*分布式*解决方案，而不仅仅是*并行*。

***并行***[：您可以使用Java 标准 API 提供的并发设施](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/package-summary.html)轻松实现并行。

***分布式***：如果您的要求不适合[Hadoop](http://hadoop.apache.org/)，您可以考虑使用消息传递*JMS*（例如[HornetQ](http://www.jboss.org/hornetq/)）或*高级消息队列协议*（例如[RabbitMQ ）来实现您的自定义解决方案](http://www.rabbitmq.com/)

# django - 试图保存 ManyToManyField

> ID：12875528
> 
> 赞同：0
> 
> 时间：2012-10-13T18:03:43.353
> 
> 标签：django, django-forms

> **可能重复：**
> [将 ManyToManyField 呈现为 Textarea 时出现 Django“输入值列表”表单错误](https://stackoverflow.com/questions/5608576/django-enter-a-list-of-values-form-error-when-rendering-a-manytomanyfield-as-a)

我在输入字段中有`python,django,ajax`这些数据。`artist`我收到`Enter a list of values.`错误。你能帮我保存这些数据吗？谢谢

# 模型

```
artist = models.ManyToManyField(ApiArtist, blank=True) 
```

# 表格和验证

```
class ApiSongForm(ModelForm):
    class Meta:
        model = ApiSong
        widgets = {
            'artist': forms.TextInput(),
        }

    def clean_artist(self):
        data = self.cleaned_data
        artist_list = data.get('artist', None)
        if artist_list is not None:
            for artist_name in artist_list.split(','):
                artist = ApiArtist(name=artist_name).save()
        return artist_list 
```

# 编辑

现在我已经从提供的链接更改了代码复制/粘贴。但是，我得到了`Cannot resolve keyword 'artist' into field. Choices are: apisong, id, name`。错误信息。这是我的[ApiArtist 和 SongModel](http://dpaste.org/s35RH/)。谢谢

```
class ModelCommaSeparatedChoiceField(ModelMultipleChoiceField):
    widget = forms.TextInput
    def clean(self, value):
        if value is not None:
            print value
            value = [item.strip() for item in value.split(",")]  # remove padding
        return super(ModelCommaSeparatedChoiceField, self).clean(value)

class ApiSongForm(ModelForm):
    artist = ModelCommaSeparatedChoiceField(
               required=False, queryset=ApiArtist.objects.filter(), to_field_name='artist')
    class Meta:
        model = ApiSong 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T19:00:47.687

首先，您不应该在 clean 方法中保存东西。

其次，您的代码不会将文本输入中的值转换为列表。您的 if 语句中有一个`split`，但在返回结果之前您没有将结果设置回`artist_list`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T08:18:52.763

现在我的以下代码正在运行。无论如何谢谢

```
class ApiSongForm(ModelForm):
    artist = forms.CharField()

    def save(self, commit=True):
        instance = super(ApiSongForm, self).save(commit=commit)
        artists = self.cleaned_data.get('artist', None)
        if artists is not None:
            for artist_name in artists.split(","):
                artist = ApiArtist.objects.create(name=artist_name)
                instance.artist.add(artist)

        instance.save()
        return instance 
```

# c# - 如何将 SQL 查询的结果保存在 C#.net 中的变量中？

> ID：12875531
> 
> 赞同：7
> 
> 时间：2012-10-13T18:03:54.007
> 
> 标签：c#, sql

```
namespace Hotel
{
    public partial class Billing : Form
    {
        SqlConnection con = new SqlConnection();
        SqlDataAdapter da;
        SqlCommand cmd = new SqlCommand();
        DataTable dt = new DataTable();
        public Billing()
        {
            InitializeComponent();
        }

        private void Billing_Load(object sender, EventArgs e)
        {
            con.ConnectionString = "Data Source=.\\SQLEXPRESS;AttachDbFilename=D:\\Projects\\c# assignments\\Hotel Manager\\Hotel\\database\\master.mdf;Integrated Security=True;User Instance=True";
            //loadData();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            con.Open();
            int rno = Int32.Parse(txtRoom.Text);

            cmd.CommandText = "SELECT SUM(ItemRate) FROM logs WHERE RoomNo=" + rno +"";
            int amt = (int)cmd.ExecuteScalar();   //arror is at this part

       //ExecuteScalar: Connection property has not been initialized.

            cmd.CommandText = "INSERT INTO bill VALUES('" + txtBillNo.Text.ToString() + "','" + txtRoom.Text.ToString() + "','" + amt.ToString() + "')";
            con.Close();
            txtBillNo.Text = "";
            txtRoom.Text = "";
            BillView bv = new BillView();
            bv.ShowDialog();
        }
    }
} 
```

请帮我解决这个错误我无法将 SQL 查询结果存储到变量中？？？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-13T18:11:00.203

1.  您对[SQL-Injection](http://msdn.microsoft.com/en-us/library/ms161953%28v=sql.105%29.aspx)开放。不要连接字符串来构建您的查询。而是使用 SQL 参数。
2.  用于[`using-statement`](http://msdn.microsoft.com/en-us/library/yh598w02.aspx)您的连接（以及所有其他实现`IDisposable`）。Dispose 也会关闭连接，`using`即使出现错误。
3.  异常的原因是您没有初始化连接，`SqlCommand`因为您没有指定连接。您可以使用该[属性](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.connection.aspx)或适当的[构造函数](http://msdn.microsoft.com/en-us/library/877h0y3a.aspx)。

这是一个例子：

```
int amt;  
using (var con = new SqlConnection(ConnectionString)) {
    var sql = "SELECT SUM(ItemRate) FROM logs WHERE RoomNo = @RoomNo";
    using (var cmd = new SqlCommand(sql, con)) {
        cmd.Parameters.AddWithValue("@RoomNo", Int32.Parse(txtRoom.Text));
        con.Open();
        amt = (int)cmd.ExecuteScalar();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T18:10:35.743

*仅仅打开*连接是不够的；
您需要`con`与`cmd`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-13T18:10:51.113

[`Connection`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.connection.aspx)与描述的错误完全相同，您尚未设置`SQLCommand`.

尝试添加：

```
cmd.Connection = con; 
```

在你打电话之前`ExecuteScalar()`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-13T18:10:58.553

您已经打开了一个 SqlConnection，但您还没有告诉 SqlCommand 对象使用它。尝试添加这一行：

```
cmd.Connection = con; 
```

在执行查询之前。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-13T18:11:48.957

您显示的代码存在几个问题 - 尤其是。一些严重的安全问题，我强烈建议您阅读[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)和准备好的语句/参数以及[使用](http://msdn.microsoft.com/en-us/library/yh598w02.aspx).

只是一些快速的更正/评论：

```
namespace Hotel
{
    public partial class Billing : Form
    {
        SqlConnection con = new SqlConnection();
        SqlDataAdapter da;
        SqlCommand cmd = new SqlCommand();
        DataTable dt = new DataTable();
        public Billing()
        {
            InitializeComponent();
        }

        private void Billing_Load(object sender, EventArgs e)
        {
            con.ConnectionString = "Data Source=.\\SQLEXPRESS;AttachDbFilename=D:\\Projects\\c# assignments\\Hotel Manager\\Hotel\\database\\master.mdf;Integrated Security=True;User Instance=True";
            //loadData();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            con.ConnectionString = "Data Source=.\\SQLEXPRESS;AttachDbFilename=D:\\Projects\\c# assignments\\Hotel Manager\\Hotel\\database\\master.mdf;Integrated Security=True;User Instance=True";
            con.Open();
            int rno = Int32.Parse(txtRoom.Text);

            cmd.Connection = con; // This solves the problem you see
            // HERE you SHOULD use a SQL paramter instead of appending strings to build your SQL !!!
            cmd.CommandText = "SELECT SUM(ItemRate) FROM logs WHERE RoomNo=" + rno +"";
            int amt = (int)cmd.ExecuteScalar();   //arror is at this part

            // HERE you SHOULD use a SQL paramter instead of appending strings to build your SQL !!!
            // Another point: you build an INSERT but never execute it ?!?
            cmd.CommandText = "INSERT INTO bill VALUES('" + txtBillNo.Text.ToString() + "','" + txtRoom.Text.ToString() + "','" + amt.ToString() + "')";
            con.Close();
            txtBillNo.Text = "";
            txtRoom.Text = "";
            BillView bv = new BillView();
            bv.ShowDialog();
        }
    }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-13T18:15:07.493

您尚未在 button1_click 中提供连接字符串。

```
con.ConnectionString = "Data Source=.\\SQLEXPRESS;AttachDbFilename=D:\\Projects\\c# assignments\\Hotel Manager\\Hotel\\database\\master.mdf;Integrated Security=True;User Instance=True"; 
```

您的代码中也有很多错误。它以这种方式工作

```
{
  // Create Connection Object  
  // Provide connection object with Connection string
  // Create command object
  // Open connection
  // Execute command
  // Close connection
  // Dispose connection
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-04-04T14:29:48.287

```
using (SqlConnection sqlcon = new SqlConnection("Connection String HERE"))
        {
            using (SqlCommand sqlcmd= new SqlCommand())
            {
                sqlcmd.Connection = sqlcon;            
                sqlcmd.CommandType = CommandType.Text;
                sqlcmd.CommandText = "SELECT SUM(ItemRate) FROM logs WHERE RoomNo=@rno";
                slqcmd.Parameters.AddWithValue("@rno", rno);
                try
                {
                    sqlcon.Open();
                    command.ExecuteNonQuery();
                }
                catch (SqlException)
                {
                    MessageBox.Show("Your Error Here");
                }
                finally
                {
                    connection.Close();
                }
            } 
```

This will be helpful I think and its more safe

# javascript - 有什么方法可以在开发中使用 goog.require 并使用约定优于配置？

> ID：12875532
> 
> 赞同：3
> 
> 时间：2012-10-13T18:03:56.380
> 
> 标签：javascript, google-closure, google-closure-library, convention-over-configur

有什么方法可以使用 Google Closure`goog.require`来管理 JS 依赖项，而不必在 dependencies.js 文件中显式注册每个命名空间？

我喜欢将编译器用于生产的想法，但对于开发，我想要命名空间到 JS 文件夹/路径的某种约定优于配置的转换，以便在开发模式下`goog.require('myapp.module')`自动导入`myapp/module.js`（如果尚未导入），在生产中，它们都被编译成一个文件。

我似乎记得以`dojo.require`这种方式工作的旧版本。知道 Google Closure 是否可以做同样的事情吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T22:28:09.010

> 有什么方法可以使用 Google Closure`goog.require`来管理 JS 依赖项，而不必在 dependencies.js 文件中显式注册每个命名空间？

最简洁的答案是不。在*未编译*的JavaScript 代码中，`goog.require()`依赖于调用生成的依赖图`goog.addDependency(relativePath, provides, requires).`

从[DepsWriter](https://developers.google.com/closure/library/docs/depswriter)文档中：

> 但是闭包库如何知道哪些文件提供了哪些命名空间？闭包库中包含一个名为**[deps.js](http://closure-library.googlecode.com/svn/trunk/closure/goog/deps.js)**的默认*依赖文件*。该文件包含库中每个 JavaScript 文件的一行，每个都指定文件位置（相对于**[base.js](http://closure-library.googlecode.com/svn/trunk/closure/goog/base.js)**）、它提供的命名空间以及它需要的命名空间。
> 
> 在调试模式下，一条`goog.require()`语句查看是否指定了 require 命名空间，如果是，则获取提供它的文件及其所有依赖项。
> 
> 但是，闭包库仅附带库中命名空间的依赖文件。**如果您计划编写自己的名称空间（并且您可能会），您可以使用`depswriter.py`为您创建的名称空间创建一个依赖文件。**

话虽如此，您可以使用诸如[plovr 之](http://plovr.com/)类的工具，它提供了一种“RAW”模式来连接您的 JavaScript 源代码而无需编译。这避免了生成deps文件的需要，但也意味着在浏览器中调试代码时，确定包含代码的原始文件更具挑战性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T05:14:14.367

在 Closure 工具中有一个名为 calcdeps.py 的 Python 脚本，它可以准确生成您想要的内容。

goog.provide/goog.require 入门：

*   将您的文件组织到一个目录结构中以匹配您想要的命名空间。ie 如果你声明命名空间'grantys.awesome.lib.Math'，你的目录结构应该类似于grantys/awesome/lib/Math.js。

*   在您作为依赖项添加的每个文件中，第一个 javascript 函数调用应该是 goog.provide('grantys.awesome.lib.Math')。要依赖另一个文件或多个文件，请使用 goog.require('grantys.awesome.lib.Constants') 声明需求。*这很重要，goog.provide 是 calcdeps.py 用来确定每个文件可以提供什么的 -**未编译它绝对零保证您说您提供的命名空间就是您在该文件中构建的内容。**

*   使用正确的参数运行 calcdeps.py（搜索可能包含或不包含 goog.provide('some.library') 的文件的路径、要写入的文件名等）。这将生成一个文件，其中包含您需要手动编写的任何 goog.addDependency 语句。另请注意， calcdeps 生成的 deps 文件使用相对路径，从您正在编写输出文件的目录中可以看出（并不总是您运行命令的目录）

calcdeps.py 的输出示例：

```
goog.addDependency("../site/ui/MurphyBed.js", ['site.ui.MurphyBed', 'site.ui.MurphyBed.State', 'site.ui.MurphyBed.EventType', 'site.ui.MurphyBed.Error'], ['goog.dom', 'goog.object', 'goog.events', 'goog.events.EventTarget', 'site.fx.easing', 'goog.fx.dom', 'goog.fx.AnimationSerialQueue']);
goog.addDependency("../site/ui/SliderButton.js", ['site.ui.SliderButton'], ['goog.ui.CustomButton', 'site.ui.SliderButtonRenderer', 'goog.fx.dom', 'site.fx.easing']); 
```

*   在您的 html 中，包含 google 的 base.js 脚本。这声明了 goog 对象。在 base.js 脚本标签之后，添加一个标签，该标签引用您使用上面的 calcdeps.py 生成的 deps.js 文件。

*   使用 goog.require('grantys.awesome.lib.Math') 加载您的依赖项。

**注意：如果更改依赖项，则必须重新运行 calcdeps.py。**我自己的解决方案是使用正确的 args 将其包装在 shell 脚本中，因此当我进行需要重新扫描文件的更改时，我只需运行 ./calcdeps.sh

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-13T18:06:48.817

该`base.js`文件定义了函数`goog.require()`。函数调用`goog.require('goog.dom')`加载定义`goog.dom`命名空间中函数的 JavaScript 文件，以及这些函数需要的来自闭包库的任何其他文件。

# mysql - 更新后使用触发器插入新行？

> ID：12875540
> 
> 赞同：0
> 
> 时间：2012-10-13T18:04:50.423
> 
> 标签：mysql, triggers

我想更新一行而不覆盖以前的信息并插入一个包含更新数据的新行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T18:18:42.970

是的，你可以，它被称为更新后触发器。这里有一个如何做到这一点的例子：

[http://www.roseindia.net/sql/trigger/mysql-trigger-after-update.shtml](http://www.roseindia.net/sql/trigger/mysql-trigger-after-update.shtml)

因此，每次在您为其创建触发器的表中更新一行时，它都会触发触发器并执行您指定的任何操作（在您的情况下插入另一个表（我猜您正在寻找实现某种更改跟踪？）除非您指定，否则不会触及更新的原始行。

[（此处](https://dev.mysql.com/doc/refman/5.0/en/create-trigger.html)的一般触发器文档）。

# regex - 在 Perl 中创建正则表达式以提取值

> ID：12875541
> 
> 赞同：2
> 
> 时间：2012-10-13T18:04:58.873
> 
> 标签：regex, linux, perl, ubuntu

我在 Ubuntu 12.04 机器上从我的 Perl 脚本中的变量中提取某些值时遇到了一些麻烦。

我查看了这个页面：[如何按照模式提取字符串](https://stackoverflow.com/questions/5080988/how-to-extract-string-following-a-pattern-with-grep-regex-or-perl)

这就是我想做的。我需要在某种模式之后提取一个字符串值。这是我到目前为止的代码：

```
foreach $HDD (@sds)
{
    $hdStat = `hdparm -i $HDD | grep -Po 'Model=\K.*?(?=,)'`;
    $sdModel{$HDD} = $hdStat;
    $hdStat = `hdparm -i $HDD | grep -Po 'SerialNo=\K.*?(?=")'`;
    $sdSerial{$HDD} = $hdStat;
}
foreach $HDD (keys %sdModel)
{
    print $sdModel{$HDD};
}
foreach $HDD (keys, %sdSerial)
{
    print $sdSerial{$HDD};
} 
```

它会很好地返回 Model 字符串，但不会返回 SerialNo 字符串。代码不必与 grep 一起使用；我刚刚修改了上面链接中的代码。看到我对正则表达式有多*糟糕*，我可能在这里遗漏了一些基本的东西。

顺便说一句，此代码的目的是查看 /dev 文件夹以查找任何磁盘驱动器，如果找到，则将其设置为一个数组，然后上面的脚本将在其中获取它的型号 # 和序列号。此外，如果有人看到更好的方法来做我正在做的事情，我非常愿意接受建议。我对 Perl 还是很陌生（到目前为止只使用了大约一周）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T18:33:15.980

首先，您不打印 $sdSerial。

其次，您可以节省一些外部调用并简化您的正则表达式：

```
foreach my $HDD (@sds) {
    my @hdparm = `hdparm -i $HDD`;
    foreach my $ln (@hdparm) {
        if (my($model, $serial) = ($ln =~ m/Model=(.+?),.+?,\s*SerialNo=(.+)/)) {
            $sdModel{$HDD} = $model;
            $sdSerial{$HDD} = $serial;
        }
    }
} 
```

* * *

以上可以简化为：

```
foreach my $HDD (@sds) {
    my $hdparm = `hdparm -i $HDD`;
    if (my($model, $serial) = ($hdparm =~ m/Model=(.+?),.+?,\s*SerialNo=(.+)/)) {
        $sdModel{$HDD} = $model;
        $sdSerial{$HDD} = $serial;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T18:29:08.690

为了提取序列号，试试这个正则表达式：

```
$hdStat = `hdparm -i $HDD | grep -Po 'SerialNo=\K.*?'`; 
```

# php - 我的 wordpress 帖子的标题会随着每个新帖子而变化

> ID：12875543
> 
> 赞同：1
> 
> 时间：2012-10-13T18:05:13.460
> 
> 标签：php, html, wordpress

我以前做过很多 wordpress 网站，但这是我遇到过的最奇怪的事情。

当我发布第一篇文章时，一切看起来都很好，当我发布另一篇文章时，旧文章的标题和缩略图变成了第二个。

我的网站[feedbaks.com](http://feedbaks.com)

这是 index.php 的一部分

```
<?php get_header(); ?>
<div id="body">
    <div class="content-container">
        <?php 
        if (have_posts()) :
        while (have_posts()) : ?>
        <?php 
        // check if the post has a Post Thumbnail assigned to it.
            if ( has_post_thumbnail() ) {
            the_post_thumbnail();
            } 
        ?>
        <div class="content">
        <h2 id="post-title">
        <a href="<?php the_permalink() ?>" rel="bookmark">
        <?php
            $cats=get_the_category();
            echo $cats[0]->cat_name;
            ?> : <?php the_title(); ?></a></h2>
        <div class="comments"><?php the_post(); comments_popup_link('0', '1', '%'); ?></div> 
```

请帮我

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T18:11:41.917

[您的循环缺少一个功能。](http://codex.wordpress.org/The_Loop#Loop_Examples)你需要`the_post()`，像这样：

`<?php if ( have_posts() ) : while ( have_posts() ) : the_post(); ?>`

我相信添加将解决您的问题。

[编辑] 实际上，`the_post()`并没有丢失。功能太晚了。直到评论之前你才运行它。

# sql - 如何将权限授予 Oracle SCHEMA 上的角色

> ID：12875545
> 
> 赞同：3
> 
> 时间：2012-10-13T18:05:41.420
> 
> 标签：sql, plsql, oracle11g

我如何`ROLE`在 SCHEMA 的所有表上授予 a 一些权限？
我写了这段代码，但是在 SQLDeveloper 中它给出了一个错误。

```
CREATE SCHEMA AUTHORIZATION alberto;

CREATE TABLE Cucine (
  tipo varchar(1) primary key,
  descrizione varchar(200) not null
);

CREATE TABLE Quartieri (
  codice varchar(4) primary key,
  nome varchar(100) not null
);

CREATE TABLE Ristoranti (
  codice varchar(5) primary key,
  nome varchar(150) not null,
  indirizzo varchar(250),
  tipocucina varchar(1) references Cucine(tipo),
  codquart varchar(4) references Quartieri(codice)
);

CREATE TABLE CarteDiCredito (
  codcircuito varchar(4) primary key,
  nomecircuito varchar(100) not null
);

CREATE TABLE Convenzioni (
  circuito varchar(4) references CarteDiCredito(codcircuito),
  codristorante varchar(5) references Ristoranti(codice),
  primary key(circuito, codristorante)
);

CREATE ROLE turista;
GRANT SELECT ON ENTE_TURISTICO.* TO turista;
CREATE USER DBAEnte IDENTIFIED BY 12345;
CREATE USER vinni IDENTIFIED BY mosh;
GRANT dba TO DBAEnte;
GRANT turista TO vinni; 
```

这段代码有什么问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-13T18:18:53.063

`CREATE SCHEMA`是单个语句创建多个对象，需要去掉分号。此外，`CREATE SCHEMA`仅支持表、视图和授权。您需要将`CREATE ROLE`and`CREATE USER`移出语句。[这是手册](http://docs.oracle.com/database/121/SQLRF/statements_6016.htm#SQLRF01313)中的一个示例：

```
CREATE SCHEMA AUTHORIZATION oe
   CREATE TABLE new_product 
      (color VARCHAR2(10)  PRIMARY KEY, quantity NUMBER) 
   CREATE VIEW new_product_view 
      AS SELECT color, quantity FROM new_product WHERE color = 'RED' 
   GRANT select ON new_product_view TO hr; 
```

要授予`SELECT`所有表，您需要像这样的动态 SQL：

```
begin
  for tables in (select table_name from all_tables where owner = 'ALBERTO') loop
    execute immediate
      'grant select on alberto.'||tables.table_name||' to turista';
  end loop;
end;
/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-03T16:18:25.057

使用以下代码：-

CREATE TABLESPACE dwtblspc LOGGING DATAFILE 'D:\oraclexe\app\oracle\oradata\XE\DWTBLSPC.DBF' SIZE 300M AUTOEXTEND ON NEXT 1048K MAXSIZE UNLIMITED;

```
CREATE USER prateek IDENTIFIED by prateek DEFAULT TABLESPACE dwtblspc ACCOUNT UNLOCK;

GRANT unlimited tablespace to prateek ;

CREATE ROLE prateek_role;

GRANT CREATE SESSION,ALTER SESSION,CREATE TABLE,CREATE CLUSTER,CREATE SYNONYM,CREATE VIEW,CREATE SEQUENCE,
CREATE DATABASE LINK,CREATE PROCEDURE,CREATE TRIGGER,CREATE TYPE,CREATE OPERATOR,CREATE INDEXTYPE,BACKUP ANY TABLE,
SELECT ANY TABLE,CREATE ANY TABLE,CREATE ANY INDEX,ALTER ANY INDEX,ALTER ANY INDEXTYPE,DROP ANY INDEX,DROP ANY INDEXTYPE to prateek_role;

GRANT prateek_role to prateek ; 
```

希望它有所帮助。

# java - .txt 文件但不是 .m3u 的文件未找到错误？

> ID：12875546
> 
> 赞同：0
> 
> 时间：2012-10-13T18:05:49.830
> 
> 标签：java, file, exception, io, fileinputstream

我正在测试我正在为一个学校项目编写的一些 java 代码，我无法创建一个代表 txt 文件的新文件，但能够为 .m3u 文件创建一个。例如，以下会引发 FileNotFound 异常：

```
java.io.FileInputStream inputFile;
    try
    {
        File file = new File("consoledata1.txt");
        inputFile = new FileInputStream( file );
        MixTapeConsole mtc = new MixTapeConsole(inputFile);
    }
    catch( Exception ex)
    {
        System.out.println("Could not find file");
        fail("File not found.");
    } 
```

但这不会：

```
MixTapeModel mtm = new MixTapeModel();
mtm.loadM3U( new java.io.File("MilesDavis.m3u")); 
```

这两个文件都在文件目录中，并确认（通过打印绝对路径）java 正在寻找两者的正确位置。任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T18:58:30.100

获取文件的绝对路径并不意味着它存在！例如

### 资源

```
import java.io.File;

public class PathTest {

    public static void main(String[] args) throws Exception {
        File file = new File("DoesNotExist.txt");
        System.out.println(file.getAbsolutePath());
        System.out.println(file.exists());
    }
} 
```

### 输出

```
I:\projects\eclipse\Test\DoesNotExist.txt
false 
```

## 结论

该文件要么不在您认为的位置，要么拼写不正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T18:22:23.930

尝试使用 File file = new File("someFileName.txt"); 文件.createNewFile()

检查 someFileName.txt 文件是否在您的文件夹中或其他位置。

# javascript - 在 SyntaxHighlighter 中启用换行符而不中断行号

> ID：12875547
> 
> 赞同：1
> 
> 时间：2012-10-13T18:05:52.887
> 
> 标签：javascript, css, line-breaks, syntaxhighlighter

[SyntaxHighlighter](http://alexgorbatchev.com/SyntaxHighlighter/)显示没有换行符的行。长行显示在一行中，并在容器中添加了一个水平滚动条。

我不想要那个滚动条，我可以通过一些强制但简单的 CSS 规则在 SyntaxHighlighter 中强制换行。

问题是内容和行号没有显示在同一个容器中，因此如果行以这种方式拆分，行号将与正确的行不匹配。

有没有机会让它在没有太多麻烦的情况下工作？欢迎任何想法..！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T13:28:59.910

这是我最终做到的方式：

```
 // return a jQuery object listing all highlighted lines as divs
            // sh: SyntaxHighlighter
            // alias: brush alias
            // content: the code to highlight
    getHighlightedLines = function (sh, alias, content) {

        var brushes = sh.vars.discoveredBrushes,
            Brush, brush;

        if (!brushes) {
            brushes = {};

            _.each(sh.brushes, function (info, brush) {

                var aliases = info.aliases;

                if (aliases) {
                    info.brushName = brush.toLowerCase();

                    for (var i = 0; i < aliases.length; i += 1) {
                        brushes[aliases[i]] = brush;
                    }
                }
            });

            sh.vars.discoveredBrushes = brushes;
        }

        Brush = sh.brushes[brushes[alias || 'plain']];

        if (!Brush) {
            return $();
        }

        brush = new Brush();
        brush.init({toolbar: false, gutter: false});

        return $(brush.getHtml(content)).find('.line');
    }, 
```

像这样使用它：

```
var $table = $('<table/>');

getHighlightedLines(sh, settings.types[current.type], content).each(function (i) {
    $('<tr/>')
        .append($('<td/>').addClass('nr').append(i + 1))
        .append($('<td/>').addClass('line').append(this))
        .appendTo($table);
}); 
```

现在你在同一行上有行号和行内容，即使代码被包装了。其他任何事情都可以用 CSS 完成。

# mercurial - 使用 mercurial 解析异常

> ID：12875548
> 
> 赞同：1
> 
> 时间：2012-10-13T18:06:03.693
> 
> 标签：mercurial, google-code

我有一个使用 googlecode/mercurial 和 eclipse 上的 mercurial 插件来管理的大型项目，我现在无法更新或合并我的存储库。我无法解释如何，但似乎我的变更集已损坏！

当我从另一个分支创建一个新分支时，这已经发生了。我试图扭转（不记得如何）因为我犯了一个错误，在我从好分支创建另一个之后，我提交，推送，问题发生了！

这是我在尝试更新或合并时看到的内容： Parse exception '1062:d5d1c.....' 有关更多详细信息，请参阅错误日志

如果有人可以帮助我，我将不胜感激。这个项目非常重要！

# javascript - Javascript 不会更新会话，只有页面重新加载才能完成这项工作

> ID：12875549
> 
> 赞同：1
> 
> 时间：2012-10-13T18:06:05.540
> 
> 标签：javascript, python, flask

会话在 python 代码中设置。我使用烧瓶作为框架。会话用户名值保持不变，直到用户重新加载页面。如果有办法用 javascript 响应会话值的变化或重新加载必要的部分而不重新加载整个页面？谢谢。

索引.html：

```
<div id="cform">
    <form action="" method="get">
        <div class="cl">{{ session['username'] }}$ >
            <input type="text" class="cli" name="cmd"
            autocomplete='off' value="" autofocus />
        </div>
    </form>
</div>
<script type=text/javascript>
    $(function () {
        $('form').last().submit(function () {
            $.getJSON($SCRIPT_ROOT + '/_cmd', {
                cmd: $('input[name="cmd"]').last().val()
            }, function (data) {
                var $query = $('input[name="cmd"]').last().val();
                $("<span>{{ session['username'] }}$ > " + $query + "</span><br />").appendTo("#output");
                $(data).each(function (i, val) {
                    $.each(val, function (k, v) {
                        $("<span>" + v + "</span><br />").appendTo("#output");
                    });
                });
                $("#output").append($("form"));
                $("form input").val("").focus();
            });
            return false;
        });
    });
</script>
<div id="output"></div> 
```

索引.py：

```
@app.route('/')
def index():
  if 'username' in session:
    username = escape(session['username'])
  else:
    session['username'] = 'guest'

  return render_template('index.html')

@app.route('/_cmd')
def cmd():
  cmd = request.args.get('cmd')
  interpreter = Interpreter(cmd)
  output = interpreter.mediator()
  return jsonify(output) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T19:35:49.633

我不知道 Flask，但在我看来，你在那里犯了一个错误：

```
 $("<span>{{ session['username'] }}$ > " + $query + "</span><br />").appendTo("#output"); 
```

在这里，您仅在用户加载页面时设置您的用户名，即使在用户更新它时也要这样做。

你应该做类似的事情：

```
 $("<span>"+data[username] + $query + "</span><br />").appendTo("#output"); 
```

在你的后端，一个类似的东西：

```
 def cmd:
    ...
    output[username] = session["username"]
    ... 
```

# database - ASP.net MVC 3 将控制器生成的默认编辑框更改为日期时间选择器

> ID：12875550
> 
> 赞同：2
> 
> 时间：2012-10-13T18:06:06.400
> 
> 标签：database, datetimepicker

感谢您花时间阅读本文。我创建了一个模型，然后使用控制器创建了索引、创建、编辑、删除视图。默认情况下，系统会为您提供具有这样的编辑框和标签的视图....

```
<div class="editor-label">
@Html.LabelFor(Function(model) model.LessonDate)
    </div>
    <div class="editor-field">
        @Html.EditorFor(Function(model) model.LessonDate)
        @Html.ValidationMessageFor(Function(model) model.LessonDate)
    </div> 
```

我想将此编辑器字段更改为日期时间选择器。我的日期时间选择器的代码是：

`<input id="demo2" type="text" size="25"> <a href="javascript:NewCal('demo2','ddmmmyyyy',true,12)"> <img src="images/cal.gif" width="16" height="16" border="0" alt="Pick a date"></a>`

日期时间选择器工作并出现在视图上，但它不会将日期保存到我拥有的数据库中......我该如何实现这一点？

提前感谢您阅读本文

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T18:09:38.880

您需要使用名称将信息发送回控制器我认为您需要做的就是添加名称

```
<input id="demo2" name="LessonDate" type="text" size="25"> 
```

# javascript - 组合框索引获取 [object Object] 而不是 extjs 中的数字

> ID：12875551
> 
> 赞同：0
> 
> 时间：2012-10-13T18:06:19.817
> 
> 标签：javascript, jquery, extjs

我有和 extjs 任务在 Ext.TaskManager 中运行，它每 5 秒重新加载我的 ext 存储。每次调用任务时，我都会更新 currentIndex 变量，该变量在我的组合框中保存当前选定的索引（值）。我得到的问题是，在某些情况下，不是获取数字 currentIndex 而是获取值 [object Object]。我真的不知道为什么会这样。这是我的示例代码：

```
// combo store
var myStore = Ext.create('Ext.data.Store', {
    id: store_id,
    fields: ['label', 'value', 'type'],
    autoLoad: true,
    proxy: {
        type: 'ajax',
        url: '/url/to/controller',
        reader: {
            type: 'json',
            root: 'MyModel'
        }
    }
}),

 createWindow = function() {
    var myComboBox = Ext.create('Ext.form.field.ComboBox', {
        flex: 3,
        editable: false,
        value: 'Select option',
        displayField: 'label',
        valueField: 'value',
        store: myStore,
        cls: 'comboCssClass',
        id: ComboBoxId,
        listeners: {
            'select': function(combo, row, index) {
                var rowData = row[0].data;
                currentIndex = this.getValue();
             }
        }
   };

   return newWindow = Ext.create('Ext.widget.window',{
          // window settings
          items:[myComboBox ]
   });
},

reloadStoretask = {
    run: function(){
          myStore.load();

          // here is where in some cases I get [object Object] instead of number 
          // And I think the object is Ext.data.store.ImplicitModel or it was alike. 
          // so currentIndex = [object Object] in some cases
          record = myStore.getAt(currentIndex).data;
    },
    interval: 5000
} 
```

如何解决这个问题或我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-30T16:17:27.723

may be you are loading your store twice, you configured your store with autoload:true then you call reloadStoretask function to reload the store.

# asp.net - 在 Asp.Net MVC4 和 jQuery 模板中捆绑

> ID：12875556
> 
> 赞同：1
> 
> 时间：2012-10-13T18:06:54.313
> 
> 标签：asp.net, asp.net-mvc-4, minify, bundling-and-minification

我对 Asp.Net MVC 4 中的新捆绑机制有疑问。似乎默认捆绑仅支持对 JS\CSS 的处理。但它不支持[jQuery 模板](http://api.jquery.com/category/plugins/templates/)（组合和编译为 JS 代码）。

我发现[Cassette](http://getcassette.net)以很好的方式支持它 - [http://getcassette.net/documentation/v2/html-templates/jquery-tmpl](http://getcassette.net/documentation/v2/html-templates/jquery-tmpl)。Cassette 可以将模板编译成 javascript 文件以减少客户端工作。但是我在内置捆绑中找不到类似的功能。

我知道，存在允许自定义它的 IBundleTransform 接口。但是是否已经存在允许在服务器端编译 jQuery 模板的 BundleTransform 扩展？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-04-10T15:47:56.793

这就是我用于车把模板的内容

模板示例：位于 ~/Templates/template123.html 中的文件

```
<script id="template123" type="text/html">
    <div>someTemplate</div>
</script> 
```

在 BundleConfig 中：

```
bundles.Add(new Bundle("~/templates/handlebars").IncludeDirectory("~/Templates", "*.html", true)); 
```

添加了以下 RazorExtension：

```
public static class RazorExtensions
{        
    public static IHtmlString RenderTemplates(this HtmlHelper htmlHelper, string src)
    {
        var context = htmlHelper.ViewContext.HttpContext;
        if (string.IsNullOrEmpty(src) || context == null || context.Request.Url == null)
        {
            return null;
        }
        using (WebClient Client = new WebClient())
        {
            var request = context.Request;
            var url = request.Url.Scheme + "://" + request.Url.Authority + Scripts.Url(src).ToHtmlString();
            var content = Client.DownloadString(url);

            return new MvcHtmlString(content);
        }

    }

} 
```

在我的剃须刀页面上：

```
@Html.RenderTemplates("~/templates/handlebars") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T23:24:52.653

这里提供了一个选项：

[http://samarskyy.blogspot.com/2012/03/loading-external-jquery-template-files.html](http://samarskyy.blogspot.com/2012/03/loading-external-jquery-template-files.html)

# c# - 将 XLL 从 xlw 移植到 xlw.Net

> ID：12875557
> 
> 赞同：1
> 
> 时间：2012-10-13T18:06:59.317
> 
> 标签：c#, c++, xll

我在 VS 2008 中开发了 2 个项目。

1.  C++ dll（核心库）
2.  C++ Excel 插件 Xll（使用 XLW 4_0_0f0）

我在 dll 和 xll 之间传输 Xlw::XlfOper 变量。很长一段时间以来，它一直运行良好。

现在我正在尝试使用 xlw.Net 在 C# 中重新实现插件项目（如下面的 3 个项目），

1.  本机 C++ dll（核心库）
2.  托管 C++ 包装器 dll (C++/CLI)
3.  C# Excel 插件 Xll（使用 XLW.Net）

因为 xlw.Net 不支持 XlfOper，所以我可以在我的 C++ dll 中使用 Xlw::CellMatrix。我正在托管 dll 中的 xlw::CellMatrix 和 xlwDotNet::CellMatrix 之间进行转换。然后我使用 XLW.Net 创建一个模板插件项目并引用包装器 dll。但它会抛出 CS:0433 : Type 'xlwDotNet::CellMatrix' 已经存在于两个 dll 中（即包装器和 xlw.Net）。

也许我可以通过使用编译器命令引用别名来摆脱这个错误，但我的问题不仅是关于这个错误，而且是我将加载项从 C++ 移植到 C# 的方式。具体来说，在我的情况下，还有其他更好的方法可以在 C# 中创建 XLL 吗？我是.Net 的新手。如果我的原生 dll 不使用 CellMatrix，或者我的核心库是用 C# 编写的，那将非常简单。有没有人经历过这种情况？我做了很多试错并在互联网上搜索了这个问题，但没有成功。

本机库很大，由于性能问题，我不想将其转换为 C#。

谢谢你。

# apache-flex - 如何在 Flex 树中有单选按钮？

> ID：12875568
> 
> 赞同：0
> 
> 时间：2012-10-13T18:08:19.347
> 
> 标签：apache-flex, actionscript, menu, flex4, radio-button

我试图让一棵树将一些节点显示为单选按钮。谁能明白为什么这不起作用？在我使用静态 XML 之后，我还需要从动态数据中创建它。

泰，弗雷德

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<fx:Script>
    <![CDATA[
    ]]>
</fx:Script>

<fx:Declarations>
    <fx:XMLList id="treeData">
        <node label="Interfaces">
            <node label="RS485 Port 1">
                <node label="Q I/O" type="radio" radioGroup="group1"/>
                <node label="BACnet MSTP" type="radio" radioGroup="group1"/>
                <node label="MODBUS RTU" type="radio" radioGroup="group1"/>
            </node>
            <node label="RS485 Port 2">
                <node label="Q I/O" type="radio" radioGroup="group2"/>
                <node label="BACnet MSTP" type="radio" radioGroup="group2"/>
                <node label="MODBUS RTU" type="radio" radioGroup="group2"/>
            </node>
            <node label="Ethernet Port 1">
                <node label="BACnet IP"/>
                <node label="BACnet SNMP"/>
                <node label="Modbus TCP"/>
            </node>
            <node label="Ethernet Port 2">
                <node label="BACnet IP"/>
                <node label="BACnet SNMP"/>
                <node label="Modbus TCP"/>
            </node>             
        </node>
        <node label="Devices">
            <node label="RS-485 Port 1">
                <node label="Quest I/O">
                    <node label="Add...">
                    </node>
                    <node label="Universal Input 1">
                    </node>
                    <node label="Universal Input 2">
                    </node>
                </node>
                <node label="BACnet MSTP">
                    <node label="Add...">
                    </node>
                </node>                 
                <node label="MODBUS RTU">
                    <node label="Add...">
                    </node>
                </node>
            </node>
            <node label="RS-485 Port 2">
                <node label="Quest I/O">
                    <node label="Add...">
                    </node>
                </node>
                <node label="BACnet MSTP">
                    <node label="Add...">
                    </node>
                </node>                 
                <node label="MODBUS RTU">
                    <node label="Add...">
                    </node>
                </node>
            </node>
        </node>
        <node label="Points">
            <node label="Inputs">
                <node label="Universal Input 1">
                    <node label="Add...">
                    </node>
                    <node label="Front Door Sensor">
                    </node>
                </node>
                <node label="Universal Input 2">
                    <node label="Add...">
                    </node>
                </node>
            </node>
            <node label="Outputs">
                <node label="Add...">
                </node>
            </node>
            <node label="Schedule">
                <node label="Add...">
                </node>
            </node>
            <node label="Calendar">
                <node label="Add...">
                </node>
            </node>
            <node label="String">
                <node label="Add...">
                </node>
            </node>
        </node>
    </fx:XMLList>
</fx:Declarations>

<mx:Tree id="myTree" width="762" height="100%" labelField="@label"
         showRoot="true" dataProvider="{treeData}" /> 
```

# c# - Microsoft SQL Server CE 检查表是否存在

> ID：12875570
> 
> 赞同：1
> 
> 时间：2012-10-13T18:09:02.217
> 
> 标签：c#, sql-server-ce

我正在尝试检查 Microsoft SQL Server 中是否存在表，但不知何故，我使用的函数总是返回它不存在，并且输出未指定引发异常。

这发生在我创建表之前（这是预期的），以及在我创建表之后（这不是预期的）。

这是我正在使用的功能：

```
/// <summary>
/// Checks  if a certain Sql Server Table exists
/// </summary>
/// <param name="_databasename">The name of the database</param>
/// <param name="_password">The password of the database</param>
/// <param name="_tablename">The name of the table to check</param>
/// <returns>
///     'true' if table exists
///     'false' if table not exists or if an exception was thrown
/// </returns>
public Boolean TableExists(String _databasename, String _password, String _tablename)
{
    if (!_databasename.Contains(".sdf")) { _databasename = _databasename + ".sdf"; }
    try
    {
        String connectionString = "DataSource=" + _databasename + "; Password=" + _password;
        SqlCeConnection conn = new SqlCeConnection(connectionString);

        if (conn.State==ConnectionState.Closed) { conn.Open(); }

        using (SqlCeCommand command = conn.CreateCommand())
        {
            command.CommandType = CommandType.Text;
            command.CommandText = "SELECT * FROM Information_Schema.Tables WHERE TABLE_NAME = '" + _tablename + "'";
            Int32 count = Convert.ToInt32(command.ExecuteScalar());

            if (count == 0)
            {
                Debug.WriteLine("Table " + _tablename + " does not exist.");
                return false;
            }
            else
            {
                Debug.WriteLine("Table " + _tablename + " exists.");
                return true;
            }
        }
    }
    catch(Exception _ex)
    {
        Debug.WriteLine("Failed to determine if table " + _tablename + " exists: " + _ex.Message);
        return false;
    }
} 
```

显然我在这里缺少一些东西，但我似乎无法找出那是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T18:23:37.237

[ExecuteScalar](http://msdn.microsoft.com/en-us/library/system.data.sqlserverce.sqlcecommand.executescalar%28v=VS.90%29.aspx)返回查询检索到的第一行的第一列。
假设您的表确实存在，数据库名称是正确的并且在预期的位置，那么返回的行的第一列来自 TABLE_CATALOG，一个 nvarchar 列。

您可以尝试将查询更改为：

```
command.CommandText = "SELECT COUNT(*) FROM Information_Schema.Tables " + 
                      "WHERE TABLE_NAME = ......."; 
```

话虽如此，我仍然无法解释为什么当您尝试将 ExecuteScalar 的返回值转换为 int 时没有出现异常......

# c - 格式“%d”需要“int”类型的参数，但参数 2 的类型为“size_t”[-Wformat]

> ID：12875571
> 
> 赞同：22
> 
> 时间：2012-10-13T18:09:03.637
> 
> 标签：c, strlen

我已经搜索过这个警告，每个人的代码都有一些错误，但这里有一些非常意想不到的东西，我无法弄清楚。我们确实希望 strlen(x) 是一个整数，但是这个警告告诉我什么？strlen 怎么不能是 int 呢？

```
In function ‘fn_product’:
line85:3:warning: format ‘%d’ expects argument of type ‘int’, but argument 2 has type ‘size_t’ [-Wformat] 
```

我在 fn_product 中的代码——

```
char *fn_product (char x[],char y[]){
  if (strlen(x)==1)    // line85
    printf("\nlength of string--%d\n", strlen(x));
  /*other code*/
} 
```

strlen(x) 不应该是 int。为什么说它的格式是 size_t？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-10-13T18:10:43.683

你检查了[手册页](http://www.manpagez.com/man/3/strlen/)吗？ `strlen(3)`返回`size_t`。用于`%zu`打印。

正如下面评论中提到的，[clang](http://clang.llvm.org)有时有助于找到更好的错误消息。实际上，clang 对这种情况的警告非常好：

```
example.c:6:14: warning: format specifies type 'unsigned int' but the argument
      has type 'size_t' (aka 'unsigned long') [-Wformat]
    printf("%u\n", strlen("abcde"));
            ~^     ~~~~~~~~~~~~~~~
            %zu
1 warning generated. 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2021-04-15T03:26:16.243

使用“%ld”而不是“%d”。

```
printf("%ld", strlen(ch)); 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2015-02-12T18:46:32.357

Add `(int)` to your code, it should fix the error:

```
printf("\nlength of string--%d\n", (int)strlen(x)) 
```

# mysql - MySQL，用户结构和条件

> ID：12875572
> 
> 赞同：1
> 
> 时间：2012-10-13T18:09:08.550
> 
> 标签：mysql, workflow, structure

我对 MySQL 和数据库还很陌生，但我正在努力学习 :)

我现在已经建立了一个包含 2 个表的数据库。其中第一个，user_info，包含在线应用程序的用户列表，以及他们的帐户信息，例如；用户名、密码、名字和姓氏。它还有一个标记为“list_access”的列，用于另一个表。

第二个表 word_lists 是一组行/记录。每列将包含一个单词（第一列是主键/id 列除外）。这个想法是应用程序会检查用户帐户信息中的数据，并查看他们可以访问哪些单词记录，然后将单词列表拉入应用程序中并放入一个数组中。

这是设置它的有效方法吗？user_info 表中 list_access 列中的列应该是什么类型的数据？我很难弄清楚如何拥有可以访问哪些列表，然后让它验证要从中提取哪些列表。这通常是由应用程序还是由 php 脚本处理的？

我非常感谢任何帮助，因为这是一个缓慢的过程，将我迄今为止学到的所有东西拼凑在一起。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T21:11:15.587

如果您在 user_info 表中有一个用于 list_access 的列，请考虑您要在其中存储的内容：

1.  单个 word_list ID
2.  word_list ID 的列表，例如“1,2,3,4”。

第 1 项不好，因为它违背了您检查“哪些单词记录”要使用的要求。

第 2 项不好，因为您必须始终将该列表加入/拆分/合并在一起，并且您永远无法拥有参照完整性。

您真正想要的是一个将用户连接到单词列表的交叉引用表，如下所示：

```
 CREATE TABLE user_word_lists (
     user_id int unsigned not null,
     word_list_id int unsigned not null
 ) 
```

该表将为每个用户提供多行。设置两个源表的外键，并放入您需要的索引（当然是 user_id）。

希望有帮助。

# bison - 如何使用 Bison 建立“隐式乘法”规则？

> ID：12875573
> 
> 赞同：3
> 
> 时间：2012-10-13T18:09:24.280
> 
> 标签：bison

我正在为数学表达式解析器处理 Bison 文件。到目前为止，它大部分都很好，但我面临着隐式乘法的问题。

你看，我想支持像`2x sin(4x) cos(4x)`. 它应该像`2 * x * sin(4 * x) * cos(4 * x)`. 这里没什么太糟糕的，但请考虑以下一组规则：

```
expr
    : /* snip */
    | '-' expr      { /* negate expression */ }
    | expr '-' expr { /* subtract expressions */ }
    | expr expr     { /* multiply expressions */ } 
```

具有该隐式乘法规则会与减法规则产生歧义：是to`x - log(x)`的减法还是by的乘法？`log(x)``x``x``-log(x)`

我已经准备好接受一个简单的解决方案，比如“除非它是减法，否则它是一个乘法”，但我不知道如何告诉 Bison。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-14T02:59:51.697

> 具有该隐式乘法规则会与减法规则产生歧义：x - log(x) 是 log(x) 与 x 的减法还是 x 与 -log(x) 的乘法？

甚至，是`x - l * o * g * x`吗？或者也许只是`x - log * x`？

所以不是一个很简单的问题。假设您可以通过查看`log`它来判断它是一个函数。然后你可以在你的词法分析器中消除歧义，并且你会留下“如有疑问，看起来像中缀运算符的运算符是中缀运算符”。这是一个快速的解决方案：

```
term   : ID
       | NUMBER
       | '(' expr ')'      { $$ = $2; }
       | FUNC '(' expr ')' { $$ = new_expr($1, 'c', $3); }
       ;

factor : term
       | term factor       { $$ = new_expr($1, '*', $2); }
       ;

prefix : factor
       | '-' factor        { $$ = new_expr(0, '-', $2); }
       ;

muldiv : prefix
       | muldiv '/' prefix { $$ = new_expr($1, '/', $3); }
       | muldiv '*' prefix { $$ = new_expr($1, '*', $3); }
       ;

expr   : muldiv
       | expr '+' muldiv { $$ = new_expr($1, '+', $3); }
       | expr '-' muldiv { $$ = new_expr($1, '-', $3); }
       ; 
```

这种特殊的语法不允许使用--x，尽管它对y--x 非常满意，这意味着y-(-x)。如果您想接受 --x，您可以将第二个`prefix`产生式更改为`'-' prefix`.

就个人而言，我更喜欢能够打字`sin 2x`，`log 3n`但这开始有点棘手。是什么`sin 2x cos 2x`意思？大概意思就是`(sin(2*x))*(cos(2*x))`。但`log nlog n`不是什么意思`log(n*log(n))`？这一切都可以实现；它只需要考虑所有的可能性。

# java - Java 对象是相等的，尽管 hashcode 不同

> ID：12875574
> 
> 赞同：3
> 
> 时间：2012-10-13T18:09:29.473
> 
> 标签：java, equals, hashcode

在阅读 equals() 和 hashcode() 时，我开始知道如果两个对象相等，那么它们的哈希码必须相等，反之亦然。

但下面的例子并没有反映这一点。

```
class Employee{

  private String name;

  Employee(String name){
    this.name = name;
  }

  @Override
  public boolean equals(Object obj) {           
        if (this == obj)
            return true;
        if (obj == null)
            return false;
        if (getClass() != obj.getClass())
            return false;
        Employee other = (Employee) obj;
        if (name == null) {
            if (other.name != null)
                return false;
        } else if (!name.equals(other.name))
            return false;
        return true;
    }

} 
```

现在，如果我创建两个 Employee 对象作为

```
Employee e1 = new Employee("hi");
Employee e2 = new Employee("hi"); 
```

如果我这样做，即使它们的哈希码不同`e1.equals(e2)`，它也会返回**true**`e1.hashcode()` ，这从打印中可以看出，并且`e2.hashcode()`.

有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-13T18:11:42.930

您需要覆盖`hashcode`方法并提供与 equals 合同的实现。

```
 @Override
    public int hashCode() {
        return name == null ? 0 : name.hashCode();
    } 
```

*   如果一个类覆盖`equals`，它必须覆盖`hashCode`
*   当它们都被覆盖`equals`并且`hashCode`必须`use the same set of fields`
*   如果两个对象是`equal`，那么它们的`hashCode`值也必须`equal`是
*   如果对象是`immutable`，则`hashCode`是缓存的候选对象，并且`lazy initialization`

[您可以在此处](http://www.javapractices.com/topic/TopicAction.do?Id=28)阅读有关实现哈希码的信息

如果您不覆盖该方法，则将从[Object](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#hashCode%28%29)类中使用默认行为。

> 在合理可行的情况下，由 Object 类定义的 hashCode 方法确实为不同的对象返回不同的整数。（这通常通过将对象的内部地址转换为整数来实现，但 JavaTM 编程语言不需要这种实现技术。）

基于哈希的`[HashMap,HashSet,Hashtable,LinkedHashSet,WeakHashMap]`集合将用于`hashCode()`在存储桶中查找/存储对象，然后它们将调用`equals()`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-13T18:11:40.823

这是因为，每次您覆盖`equals`方法时，您也必须覆盖`hashcode`方法。

否则，您的对象将根据您的代码进行比较，但它们的 HashCode 将根据 Object 类中的预定义算法计算。

**注意**： - 通常，您在检查是否`objects`相等时考虑了所有参数，您应该使用它`all those parameters`来计算`hashcodes`每个`object`.

请参阅[这篇非常好的帖子](https://stackoverflow.com/questions/27581/overriding-equals-and-hashcode-in-java)，其中描述了`equals`和`hashcode`方法的使用。

**引用**这篇文章中的一句话，我已经在上面描述过：-

> **使用相同的字段集来计算`hashcode`您在`equals`方法中使用的字段**

让我们看下面的 Demo 来理解上面的语句：-

```
public class Demo {
    private String str;
    private String name;

    public boolean equals(Object obj) {
        // Suppose you compare two objects based on length of their name variable

        // If name equals, object are equal
        if (obj instanceof Demo) {
            return this.name.equals(((Demo)obj).name);
        }
        return false;
    }

    // ****** Badly Overrided hashcode *******
    public int hashcode() {
        // But you calculate hashcode using both the fields

        // You should never use this kind of code in hashcodes. 
        // Use complex algorithm which gives you distinct result for 
        // objects that are not equal.
        return str.length + name.length;
    }
} 
```

因此，如果两个对象具有相同的`name`，那么它们将相等，但如果它们的`str`字段具有不同`length`的 ，那么它们`hashcodes`将是不同的。

这就是为什么，您应该始终使用`same fields`in`equals`和`hashcode`计算。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T19:06:13.407

您应该覆盖哈希码方法。如果一个类覆盖了equals，那么当它们都被覆盖时它必须覆盖hashCode，如果两个对象相等，equals和hashCode必须使用相同的字段集，那么它们的hashCode值也必须相等，如果对象是不可变的，那么hashCode是缓存和延迟初始化的候选者

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-13T18:12:10.197

您还需要覆盖`hashCode`以获得您期望的行为。的默认实现`Object.hashCode`可能是返回对象引用，尽管根据[文档](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#hashCode%28%29)这不是必需的。

如果没有覆盖`hashCode`，您就不能期望得到专门的结果；这类似于覆盖`equals`。

# c# - 无法转换泛型类型参数

> ID：12875575
> 
> 赞同：3
> 
> 时间：2012-10-13T18:09:31.377
> 
> 标签：c#

我需要调用一个接受接口作为参数的方法。我用作参数的对象实现了接口，但是我仍然遇到编译错误。我究竟做错了什么？

```
public class ViewModel 
{
    public ViewModel()
    {
        QueueManager<CFMessage<CFQueueItem>, CFQueueItem> q = new QueueManager<CFMessage<CFQueueItem>, CFQueueItem>();
        DoSomething(q);     // This line does not compile:  Cannot convert from QueueManager<CFQueueItem> to QueueManager<IQueueItem>
    }

    public void DoSomething(QueueManager<IQueueMessage<IQueueItem>, IQueueItem> queueManager)
    {

    }
}

public interface IQueueMessage<T> where T : IQueueItem
{
    int ID { get; set; }
}

public interface IQueueItem
{
    int ID { get; set; }
}

public class CFMessage<CFQueueItem> : IQueueMessage<CFQueueItem> where CFQueueItem : IQueueItem
{
    public int ID { get; set; }
}

public class CFQueueItem : IQueueItem
{
    public int ID { get; set; }
}

public class QueueManager<T, Q>
    where T : IQueueMessage<Q>
    where Q : IQueueItem
{

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T18:21:35.463

您可以通过使用概念[*covariance*](http://msdn.microsoft.com/en-us/library/dd799517.aspx)来解决，将 interface 定义`IQueueMessage`为*covariant*，使用关键字`out`：

```
public interface IQueueMessage<out T> where T : IQueueItem
{
} 
```

`IQueueManager`然后为：创建新的协变接口`QueueManager`：

```
public interface IQueueManager<out T, out Q> where T : IQueueMessage<Q>
                                             where Q : IQueueItem
{
}

public class QueueManager<T, Q> : IQueueManager<T, Q>
    where T : IQueueMessage<Q>
    where Q : IQueueItem
{

} 
```

然后您可以将此接口用于方法`DoSomething`：

```
public void DoSomething(IQueueManager<IQueueMessage<IQueueItem>, IQueueItem> queueManager)
{
} 
```

您的代码将成功编译：

```
public ViewModel()
{
    var q = new QueueManager<CFMessage<CFQueueItem>, CFQueueItem>();
    DoSomething(q);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-13T18:33:01.773

尝试使方法通用；即使不能使接口成为协变的，这也将起作用：

```
public void DoSomething<TMessage, TItem>(QueueManager<TMessage, TItem> queueManager) 
    where TMessage : IQueueMessage<TItem>
    where TItem : IQueueItem
{ 
     //...
} 
```

# linux - 如何防止 gdb 捕获 control-D？

> ID：12875582
> 
> 赞同：1
> 
> 时间：2012-10-13T18:10:17.053
> 
> 标签：linux, debugging, gdb

我正在尝试调试需要将 EOF 作为输入读取的程序。

但是，当我在 GDB 中运行程序时按 Control-D 发送 EOF 时，GDB 会捕获 EOF 并且不会将其传递给应用程序。

如何使 gdb 将 EOF 发送到应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T18:44:11.570

> 但是，当程序在 GDB 中运行时，当我按 Control-D 发送 EOF 时，GDB 会捕获 EOF 并且不会将其传递给应用程序。

GDB**不做**任何这样的事情。

在正常（全停）模式下，应用程序或 GDB 都可以控制终端，但不能同时控制这两者。

如果应用程序正在读取终端输入，那么 Control-D 将导致它读取`EOF`，而 GDB 不会干扰它。

如果您正在查看`(gdb)`提示，那么应用程序*没有*读取输入 - 它已停止 - 发送 Control-D 确实会发送`EOF`到 GDB。不要那样做。

例子：

```
gdb -q /bin/cat
Reading symbols from /bin/cat...done.

(gdb) run
Starting program: /bin/cat 
foof     # my input
foof     # cat output
         # Control-D
[Inferior 1 (process 12782) exited normally]  # cat received EOF and exited
(gdb) run
Starting program: /bin/cat 
foof     # my input
foof     # cat output
^C
Program received signal SIGINT, Interrupt.
0x00007ffff7b31ee0 in __read_nocancel () at ../sysdeps/unix/syscall-template.S:82
82  ../sysdeps/unix/syscall-template.S: No such file or directory.
(gdb) quit   # I typed Control-D, GDB translated that into quit
A debugging session is active.

    Inferior 1 [process 12787] will be killed.

Quit anyway? (y or n) y 
```

更新：

> 当应用程序正在读取时（不是在 gdb 提示符下），我正在点击 Control-D，并且应用程序不承认它收到了 Control-D。当应用程序尝试读取时，它会读取 0 个字节。

这*正是*应该发生的事情（`read`返回 0 表示您已到达文件末尾）。如果您期望应用程序读取魔法`EOF`符号，那么您的期望是*错误*的——没有这样的符号。

# android - NDEF 记录和 vCard 数据

> ID：12875583
> 
> 赞同：0
> 
> 时间：2012-10-13T18:10:22.713
> 
> 标签：android, nfc, ndef

我正在尝试使用 Android NFC API 在 NDEF 记录中写入 vcard 数据。我可以编写一个 URL 或一些长度小于 46 字节的文本或电话号码。但是，当我尝试写入超过此长度的 vCard 数据时（例如 150 个字节），我无法将它们存储在卡中，因为该数据的记录长度较短。我应该跨多个块或扇区编写此记录。

我正在做类似的事情，

```
byte[] vCardDataBytes = vCardData.getBytes(Charset.forName("UTF-8"));
byte[] vCardPayload = new byte[vCardDataBytes.length+1];
System.arraycopy(vCardDataBytes, 0, vCardPayload, 1, vCardDataBytes.length);
// vCardDataBytes[0] = (byte)0x00;
ndefRecord = new NdefRecord(NdefRecord.TNF_MIME_MEDIA,"text/x-vcard".getBytes(),new byte[] {}, vCardPayload); 
```

有人可以在一段代码中指出我如何在 Android 中跨多个扇区编写 ndef 记录吗？我该如何指定它们？

谢谢多尼克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T09:01:02.393

writeNdefMessage 应该为您处理所有的拆分和写入。正如“NFC Guy”所指出的，Mifare UL 只处理大约 64 字节的数据。对于 Mifare1K，请确保它是未格式化的卡，并且块和扇区未被任何以前的应用程序阻塞。[此外，您可以通过getMaxSize()](http://developer.android.com/reference/android/nfc/tech/Ndef.html#getMaxSize%28%29)函数找到最大可用大小。

# actionscript-3 - 从 FLA 库访问具有访问说明符“内部”的类

> ID：12875585
> 
> 赞同：0
> 
> 时间：2012-10-13T18:10:25.870
> 
> 标签：actionscript-3

我正在尝试通过影片剪辑（类名： Abc ）访问“内部”类 Abc 。由于某些原因，我无法将其指定为公开。我怎样才能访问它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T02:47:58.553

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/statements.html#internal](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/statements.html#internal)

内部类仅适用于同一个 EXACT 包中的其他类。创建一个位于同一个包中的类，您可以访问它。

让我们用这个例子

```
package com.app {
    internal class Abc { }
}

package com.app.sub { 
    public class OtherClass {
        // classes in sub package cannot access or any other package
        // attempting to instantiate a class when outside its package
        // results in a compiler error
    }
}

package com.app {
    public class UsesAbc {
        function UsesAbc () {
            var abc:Abc = new Abc();
            // this is ok because they live in exactly the same package
            // this class can be use as a proxy for Abc
            // because the class is public
        }
    }
} 
```

# javascript - 如果存在href，javascript从div中删除链接

> ID：12875588
> 
> 赞同：1
> 
> 时间：2012-10-13T18:10:40.283
> 
> 标签：javascript, html

以免说这是我的 div：

```
<div id="success">
<a href="/index.php">link1</a>
<a href="/index.php">!AnotherLink!</a>
<a href="cat.php">link3</a>
</div> 
```

我想从成功 div 中删除任何**相同“href”的链接**

它应该是这样的：

```
<div id="success">
<a href="/index.php">link1</a>
<a href="cat.php">link3</a>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T18:16:57.537

这应该有效：

```
function removeDups() {
    var container = document.getElementById("success");
    var a = container.getElementsByTagName("a");
    var hrefs = {};
    for (var i = 0; i < a.length; i++) {
        if (a[i].href in hrefs) {
            a[i].parentNode.removeChild(a[i]);
        } else {
            hrefs[a[i].href] = 1;
        }
    }
} 
```

[http://jsfiddle.net/fDPsH/](http://jsfiddle.net/fDPsH/)

# java - JPQL 批量删除后 EntityManger 刷新？

> ID：12875595
> 
> 赞同：0
> 
> 时间：2012-10-13T18:11:05.933
> 
> 标签：java, jpa, seam, entitymanager, transactional

在我的 Seam/Glassfish/JPA 容器中执行以下操作后：

```
@ApplicationScoped
public class JpaGlossaryDataAccessObject implements IGlossaryDataAccessObject {
    // ...
    @Transactional
    public void deleteColumn(String glossaryName, String columnName) {
        final GlossaryColumn column = getColumn(glossaryName, columnName);
        entityManager.remove(column);
    }
    // ...
} 
```

请求的列已成功从数据库中删除，我可以使用 SQL 工作台进行验证。但是，当随后调用以下方法时：

```
@ApplicationScoped
public class JpaGlossaryDataAccessObject implements IGlossaryDataAccessObject {
    // ...
    @Transactional
    public List<Glossary> getGlossaries(Collection<String> glossaryNames) {
        glossaryNames.retainAll(getGlossaryNames());
        return entityManager.createQuery(SELECT_ALL_NAMED_GLOSSARIES, Glossary.class).setParameter(GLOSSARY_NAMES_PARAMETER_INDEX, glossaryNames).getResultList();
    }
    // ...
} 
```

它基本上返回包含上述列的词汇表，删除的列仍在词汇表对象中！即使它们不再存在于数据库中。怎么会这样？为了使这项工作，我需要执行一些额外的刷新吗？

顺便说一句，我的 beans.xml 看起来像这样：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:s="urn:java:ee"
    xmlns:security="urn:java:org.jboss.seam.security" xmlns:permission="urn:java:org.jboss.seam.security.permission"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://jboss.org/schema/cdi/beans_1_0.xsd">
    <alternatives />
    <decorators />
    <interceptors>
        <class>org.jboss.seam.security.SecurityInterceptor</class>
        <class>org.jboss.seam.transaction.TransactionInterceptor</class>
    </interceptors>
    <security:IdentityImpl>
        <s:modifies />
        <security:authenticatorClass>ch.diction.webportal.security.seam.authentication.ChallengeResponseIdmAuthenticatorDecorator
        </security:authenticatorClass>
    </security:IdentityImpl>
</beans> 
```

那么，我错过了什么？

在此先感谢和最好的问候帕斯卡

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T08:50:21.653

我的第一个猜测是您在内存中缓存了与数据库不一致的数据。

确保在进行批量删除后清除以下 2 个缓存。缓存中的任何/所有数据都可能与数据库不一致：

*   EntityManager 缓存（即持久化上下文）： `entityManager.clear();`
*   EntityManagerFactory 缓存（即二级缓存）：
    `entityManager.getCache().evictAll();`
    或 `entityManagerFactory.getCache.evictAll();`

理论上（但实际上不是）可以刷新缓存中的每个对象：

```
HashMap props = new HashMap();
// Semantically, refresh already bypasses the second level cache, no hint required. 
// But this hint says to then store the refreshed value back in the second level cache:
props.put("javax.persistence.cache.storeMode", CacheStoreMode.REFRESH);
em.refresh(ent, props); 
```

但这将是一个真正的麻烦并且没有任何好处。首先，您如何遍历缓存中存储的每个实体？其次，如果您只是通过上面显示的单个调用驱逐它们，它们会根据需要以刷新状态自动重新加载。

您的 JDBC 驱动程序甚至可以缓存数据。这将取决于您的提供商和配置。

这有什么好运气吗？=:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T08:13:19.207

范围`EntityManager`是持久化上下文，你可以使用`entityManager.clear()`.

`clear() : Clear the persistence context, causing all managed entities to become detached`

否则，您可以关闭`EntityManager`后处理并每次创建一个新的，这不是开销。

如果正在缓存，您可以尝试`entityManager.getEntityManagerFactory().getCache().evictAll();`

# php - 使用 Phantomjs 进行屏幕抓取，结果存储在 MYSQL 中

> ID：12875596
> 
> 赞同：3
> 
> 时间：2012-10-13T18:11:06.957
> 
> 标签：php, mysql, phantomjs, casperjs

我正在寻找这个网站：[http ://www.machinerytrader.com/list/list.aspx?ETID=1&catid=1002](http://www.machinerytrader.com/list/list.aspx?ETID=1&catid=1002)

我最初尝试使用 PHP 来执行此操作，但发现正文 html 已加密。所以看起来这个 html 最好使用像 phantomjs 这样的无头 webkit 来访问。

我的问题是一个普遍的问题：在 PhantomJS 中抓取这些数据然后将这些数据存储在 MySQL 中的最佳方法是什么？

我没有在网上看到任何这种转变的例子，所以没有什么可做的。

更新：

经过一番阅读，我认为使用 CasperJS 及其下载功能在本地存储原始 html 并稍后使用 PHP 解析它可能是有意义的......但这种方法非常迂回......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-11T21:15:54.910

获得信息后，您只需调用由您控制的站点并使用发布请求将数据存储在数据库中

```
casper.then(function(){
    casper.open("www.mipage.com/saveIntheDBonPost.php", {
        method: 'post',
        data:{              
            'title': ''+globalInfo.title,
            'body': ''+globalInfo.body
        }
    });
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-24T14:02:59.093

除非您绝对不能从 PHP 处理 HTML，否则我建议您让 PhantomJS 或 CasperJS 将 XML/JSON 输出到一个文件，然后从 PHP 解析 XML/JSON。使用我过去在 PhantomJS 中构建的爬虫，我已经处理了所有 HTML 并将相关数据存储到对象中，然后我将这些对象转换为 XML/JSON。根据我的经验，JSON 是最容易使用且比 XML 更轻量级的。[由于 PHP 具有json_decode](http://php.net/manual/en/function.json-decode.php)函数，因此在 PHP 中也非常容易使用。

# java - 我可以在不在 Eclipse 中编写任何代码的情况下“运行”spring 上下文吗？

> ID：12875597
> 
> 赞同：2
> 
> 时间：2012-10-13T18:11:07.470
> 
> 标签：java, eclipse, spring

尽管没有任何`main()`方法，但我可以在 Eclipse 中运行 JUnit 测试。尽管没有任何代码，但我可以运行 Ant xml。

我可以以同样的方式运行 Spring 上下文吗？

我可以指示 Eclipse 在 spring XML“运行”上快速运行如下程序吗？

```
public class Runner {
    public static void main(String[] args) {
        new ClassPathXmlApplicationContext("/springtests/test04.xml");
    }
} 
```

**更新**

这个问题是关于舒适的。我正在为弹簧配置编写很多测试。对于每个测试，我都在编写 JUnit 测试或类似上面的运行器类。所以我想尽量减少工作量：能够右键单击带有 spring 配置的 XML 文件并“运行”它。我所说的“运行”并不是指将 XML 加载到内存中并将 CPU 控制权转移给它。

**更新 1**

好的`SpringRunner`，我使用以下代码在我的项目中创建了类

```
public class SpringRunner {
public static void main(String[] args) {
    new FileSystemXmlApplicationContext(args[0]);
}
} 
```

`SpringRunner`接下来使用名称和这个类作为主类创建运行/调试配置，并设置

```
${resource_loc} 
```

在程序参数部分。

这样，我只需单击几下即可“运行”任何弹簧配置：

1）右键单击XML文件

2）选择“运行/调试为...”

3) 选择“运行/调试配置...”

4) 选择“SpringRunner”

5）点击“运行/调试”

现在的问题是是否有可能进一步缩短这个时间？如何告诉 Eclipse 在右键单击和“运行/调试为”时立即在任何 XML 文件或任何文件上显示此选项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T18:31:50.550

不，即使使用 JUnit，您也永远无法做到这一点，....当您运行 JUnit 时，它在内部有一些具有 main 方法的 util 类，该方法通过反射运行您的 junit 类。

请记住，在 java 中没有办法可以在没有 main 方法的情况下运行任何代码。

```
class A{
       static{
              System.out.print("where is main");
       }

} 
```

此代码在将类加载到 jvm 时有效，这可能是我上面的话的例外，但一般答案是否定的。

快速提问为什么你需要在没有 main 的情况下运行 spring？如果你认为 junit 在没有 main 方法的情况下运行（实际上它有），那么使用像 tomcat 这样的应用容器，你不必声明任何 main 方法，它运行你的代码、你的 spring 或任何你想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T18:35:35.270

看看[http://static.springsource.org/spring/docs/2.5.x/reference/testing.html#testcontext-framework](http://static.springsource.org/spring/docs/2.5.x/reference/testing.html#testcontext-framework)

**例如：**

```
@RunWith(SpringJUnit4ClassRunner.class)
// ApplicationContext will be loaded from "/applicationContext.xml" and "/applicationContext-test.xml"
// in the root of the classpath
@ContextConfiguration(locations={"/applicationContext.xml", "/applicationContext-   test.xml"})
public class MyTest {
// class body... 
```

}

希望我能帮助...

# node.js - 将 Apache Thrift 与 Node.js 一起使用

> ID：12875598
> 
> 赞同：10
> 
> 时间：2012-10-13T18:11:39.670
> 
> 标签：node.js, thrift

我正在尝试使用 Apache Thrift 作为 node.js 的 RPC 机制。但是，[node.js 的官方 Thrift 教程](http://thrift.apache.org/tutorial/nodejs/)似乎不完整，并且没有描述如何从 node.js 访问 Thrift 服务。是否可以将 Apache Thrift 与 Node.js 一起使用，是否有任何文档可用？

如果 Thrift 还不支持 node.js，那么是否有任何类似的 RPC 框架可以与 node.js 一起使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-01-26T16:29:08.970

本[教程已](http://thrift.apache.org/tutorial/nodejs)通过一个很好的示例进行了更新。如果您正在寻找节点中的其他 RPC 模块，您可以查看[我在这个问题中的回答](https://stackoverflow.com/a/23852058/774086)。

# windows-7 - 如何在 Windows 7 上安装 VimClojure

> ID：12875601
> 
> 赞同：0
> 
> 时间：2012-10-13T18:11:40.907
> 
> 标签：windows-7, clojure, vimclojure

我将不胜感激有关如何在 Windows 7 工作站上安装 VimClojure 的说明。我有 lein 和它需要安装和工作的一切。

我的文件位于 c:\Users\ 下的默认登录目录中

```
 .lein

  .m2

  vimfiles

0 _gvimrc

4 _viminfo

6 _vimrc 
```

VimClojure 应该放在哪里？目前，我已将其放在`vimfiles`. 那是对的吗？我目前对使用 NailGun 不感兴趣。我只想要语法突出显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T14:07:46.470

是的。`vimfiles`应该是正确的。您还可以签入正在运行的 vim 以获取`:set rtp?`（注意尾随问号）。这应该给出 vim 正在寻找脚本的路径。

# android - 将多个字符串添加到 ListArray？

> ID：12875604
> 
> 赞同：2
> 
> 时间：2012-10-13T18:11:48.850
> 
> 标签：android, arrays, string, arraylist

我有大约 70 个字符串要添加到字符串数组中。然后在 TextView 中打印字符串数组。

我做了一些功课，我想我实际上想将字符串添加到 ListArray。

字符串位于 string.xml 文件中。

```
TextView tvHerb = (TextView) findViewById(R.id.tvHerb);

    ArrayList<String> herbList = new ArrayList<String>();
    herbList.add(R.string.angelica, null);
    herbList.add(R.string.anise_seed, null);

    tvHerb.setText(herbList.toString()); 
```

一旦布局显示在模拟器上，我就会收到运行时错误。

我搞不清楚了！！！我也是android编程的新手，所以任何帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T18:14:12.503

您需要使用`context.getString(id)`来获取字符串资源。

还有一些你使用 2 参数版本的原因`.add`吗？

你可能想要`herbList.add( context.getString( R.string.angelica ) );`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T18:37:45.813

而不是在 string.xml 文件中包含每个带有 id 的字符串。您可以在 string.xml 中声明一个字符串数组

```
 `<resources>
   <string-array name="sample">
   <item>YourValue1</item>
   <item>YourValue2</item>
    .....
   <item>YourValue70</item>
   </string-array>
   </resources>` 
```

然后在你的活动中

```
 `String[] sample = getResources().getStringArray(R.array.sample);
   ArrayList<String> arrayList = new ArrayList<String>(sample.length);
   arrayList = Arrays.asList(sample);` 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T18:38:13.520

首先，我同意 agreco 关于属性数量的回答。

但是，如果您只在您的数组列表中添加来自您的字符串资源的字符串，我认为直接在您的 strings.xml 文件中定义一个字符串数组会更好。

但是，我想您的问题来自您将 toString 应用于 ArrayList 的事实。toString 是一种通用方法，我不确定它对数组的行为。toString 不一定符合您的确切需求，而且大多数情况下也不符合。

我认为您最好执行以下操作：

```
String stringToInsert =herbList.get(0);

    for (int i=1;i<herbList.size();i++)
    {
        stringToInsert+="ANY_SEPARATOR_YOU_WANT" + herbList.get(i);
    }

    tvHerb.setText(stringToInsert); 
```

# android - android mediacontroller - 如何在屏幕的其余部分捕获事件

> ID：12875608
> 
> 赞同：1
> 
> 时间：2012-10-13T18:12:10.247
> 
> 标签：android, android-mediaplayer

我有一个显示音频源详细信息的活动。用户可以编辑音频的名称等。我还想让用户可以收听音频。为此，我想一直在屏幕底部显示媒体控制器（显示（0））

我现在的问题是 MediaController 似乎占据了焦点，并且不再可能与屏幕的其余部分进行交互。有没有办法解决这个问题，显示媒体控制器但也允许与屏幕的其余部分进行交互。

任何提示高度赞赏

**更新**

成立

[Android MediaController 拦截所有其他触摸事件](https://stackoverflow.com/questions/7909603/android-mediacontroller-intercepts-all-other-touch-events)

我的问题是我无法理解在 xml 中定义媒体控制器的想法，我遇到了与 Casebash 在他对已接受解决方案的评论中描述的相同的问题。

[我在这里](https://stackoverflow.com/questions/12875232/android-mediacontroller-defining-the-mediacontroller-in-the-layout-xml)问了一个例子，你还没有答案。

# visual-studio-2010 - Installshield LE Spring 2012 找不到安装先决条件

> ID：12875615
> 
> 赞同：8
> 
> 时间：2012-10-13T18:13:16.913
> 
> 标签：visual-studio-2010, installshield, installshield-2012

情况如下：

我有一个 InstallShield LE 安装项目（实际上是一对），去年运行良好。

最近我配置了一台新笔记本电脑，因此重新安装了 Visual Studio 2010 和 Installshield LE。显然，然后将 InstallShield LE 更新到了 2012 年春季版。

现在，当我尝试构建时，我收到有关缺少设置先决条件的错误：

```
Error   7   -1007: Cannot copy source 'C:\Program Files (x86)\InstallShield\2012SpringLE\SetupPrerequisites\Windows Installer\3.1\x86\WindowsInstaller-KB893803-v2-x86.exe' to target 'C:\Users\Erik\myProject\Server Install\Express\SingleImage\DiskImages\DISK1\ISSetupPrerequisites\{57bcd1d4-2de9-49d9-bc0c-3f4263e9970e}\WindowsInstaller-KB893803-v2-x86.exe'    ISEXP : error : -1007: Cannot copy source 'C:\Program Files (x86)\InstallShield\2012SpringLE\SetupPrerequisites\Windows Installer\3.1\x86\WindowsInstaller-KB893803-v2-x86.exe' to target 'C:\Users\Erik\myProject\Server Install\Express\SingleImage\DiskImages\DISK1\ISSetupPrerequisites\{57bcd1d4-2de9-49d9-bc0c-3f4263e9970e}\WindowsInstaller-KB893803-v2-x86.exe' 
```

现在，我检查了这些文件路径，发现这些文件不存在。嗯，他们并不完全在那里。他们似乎在 2012 年春季版中更改了这些设置先决条件的路径。

现在我已经完全反汇编了我的 .isl 文件。这些文件路径不在 .isl 文件中的任何位置；不是绝对的，也不是相对的。事实上，.isl 文件中几乎没有文件路径。

我在网上搜索过，也许我需要升级我的 .isl 文件才能得到 Spring2012 版本的支持，但这些搜索并没有取得丰硕的成果。

我正要重新创建设置项目，但是我很想知道到底出了什么问题。

在升级到 InstallShield LE 的 2012 年春季版时，还有其他人遇到过这个问题吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-11-20T12:22:01.500

InstallShield 似乎丢失了先决条件的路径。

一个干净的方法是转到 installshild 项目的“可再发行组件”部分（2-指定应用程序数据/可再发行组件）。

通常，您需要的先决条件应该我标记为“需要下载”。

只需直接在表格条目上右键单击下载它们，您的问题就会得到解决。

当我在全新机器上打开 installshield 项目时，我遇到了同样的问题。我当然已经重新安装了 InstallShield，但前提条件当然不存在，需要再次下载。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-07T14:41:12.290

将 VS2010 InstallShield 项目升级到 VS2012 后，我收到了同样的错误。

```
Error   24  -1007: Cannot copy source 'C:\Program Files (x86)\InstallShield\2012SpringLE\SetupPrerequisites\Microsoft .net\3.5 SP1\Full\dotnetfx35.exe' to target 'D:\Users\...\Express\SingleImage\DiskImages\DISK1\ISSetupPrerequisites\{074EE22F-2485-4FED-83D1-AAC36C3D9ED0}\dotnetfx35.exe'    ISEXP : error : -1007: Cannot copy source 'C:\Program Files (x86)\InstallShield\2012SpringLE\SetupPrerequisites\Microsoft .net\3.5 SP1\Full\dotnetfx35.exe' to target 'D:\Users\...\Express\SingleImage\DiskImages\DISK1\ISSetupPrerequisites\{074EE22F-2485-4FED-83D1-AAC36C3D9ED0}\dotnetfx35.exe' 
```

通过将先决条件从旧的 InstallShield 文件夹“C:\Program Files (x86)\InstallShield\2011LE\SetupPrerequisites”复制到新的“C:\Program Files (x86)\InstallShield\2012SpringLE\SetupPrerequisites”解决了这个问题

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-05-13T16:59:15.173

我们在 InstallShield Standalone Build 中遇到了类似的问题。构建失败并报告它无法从 SetupPrerequisites 目录复制文件。

正如 flamandier 回答的那样，需要下载 Redistributables。这可以通过从 Redistibutables 视图（在 Installshield IDE 中的 Application Data 下）的右键菜单中选择“Download Selected Item”或“Download All Required Items”选项来完成。或者使用工具菜单选项下的可再发行下载器向导。请参阅此处有关可再发行下载器的 flexera helpnet 文章[http://helpnet.flexerasoftware.com/installshield21helplib/helplibrary/Wiz_RedistDownload.htm](http://helpnet.flexerasoftware.com/installshield21helplib/helplibrary/Wiz_RedistDownload.htm)

对于独立构建，需要从运行完整版 installshield 的机器复制先决条件。请参阅此处的 flexera 帮助网文章[http://helpnet.flexerasoftware.com/installshield21helplib/helplibrary/StandAloneBuild_Redists.htm](http://helpnet.flexerasoftware.com/installshield21helplib/helplibrary/StandAloneBuild_Redists.htm)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-09-19T09:31:49.537

转到属性公共属性->项目依赖项->检查设置

# css - 如何在编译的 LESS css 文件中获得正确的相对路径？

> ID：12875620
> 
> 赞同：11
> 
> 时间：2012-10-13T18:13:56.023
> 
> 标签：css, less

我在编译的文件中遇到了 LESS 破坏相对 URL 的问题。例如，我有；

```
├── style.less
├── style.css
├── assets
│   ├── img
│   │   └──  bg.png
│   ├── less
│   │   └──  included.less 
```

Style.less 导入included.less，其中包含以下行；

```
body {background: url(../img/wall-texture.png);} 
```

但是 style.css 中的输出变成了

```
body {background: url(assets/less/assets/less/../img/wall-texture.png);} 
```

这里发生了什么，我该如何解决这个问题，以便在编译后我的路径保持正确？我意识到也许我在included.less 中的相对路径需要调整，这很好，但是目前，随着“资产/更少”的加倍减少，在保持合理文件夹结构的同时获得正确的路径变得非常复杂。除此之外，我使用 git 子模块来包含不同的 LESS 项目，所以我真的不想更改 less 文件中的代码或文件夹结构，我只想强制 LESS 正确编译。（我已经尝试了所有我能找到的 Windows 编译器，它们的行为都一样。）

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T13:37:48.447

很可能有一个解决方案可以解决您的编译问题。如果不是，一种可能的解决方案（*确实*需要您更改 LESS 文件）是插入路径。这样，编译器可能会不理会它，只要附加到它：

```
body {background: url(~"../img/wall-texture.png");} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T08:21:09.717

Have a look at [https://github.com/marklagendijk/WinLess/issues/12](https://github.com/marklagendijk/WinLess/issues/12) It seems to be related with exactly the version you are using (1.5.3). I recommend to update to the latest winless build which is already 1.8.0.

There have been several issues with relative paths along the way of winless. But most of them seem to be fixed. See also [https://github.com/marklagendijk/WinLess/issues/search?q=path](https://github.com/marklagendijk/WinLess/issues/search?q=path)

Please note that the default behavior of the less compiler is actual to retain the relative path as you would expect.

# php - 表单将空白行插入数据库

> ID：12875624
> 
> 赞同：2
> 
> 时间：2012-10-13T18:14:33.360
> 
> 标签：php, html, mysql

我见过类似的问题，但没有一个答案对我有用。我的是一个简单的表格，其中包含一些数据到数据库中，它显示在网站其他地方的表格中。

但是，无论输入什么，该表单都只会在数据库中添加一个空白行。没有错误或任何东西，只是一个空白行。

我有另一个表格，它提交到另一个表格，效果很好，所以我真的很困惑。

这是表格：

```
<form method="GET" action="addsuggestion.php">

<label>Game Title:</label>
<input type="text" name="gamename" id="gamename" />

<br />

<label>Game Platform:</label>
<input type="text" name="gameplatform" id="gameplatform" />
<br />

<label>Suggestor Nickname:</label>
<input type="text" name="suggestor" id="suggestor" />

<input type="submit" value="sumbit" />
</form> 
```

和adduggestion.php

```
<?php
echo'<h1>Suggestion Process</h1>';

$connection = mysql_connect("removed", "removed", "removed") or die("Couldn't Connect!");
mysql_select_db("removed") or die("Couldn't find database!") ;

$gamename = $GET['gamename'];
$gameplatform = $GET['gameplatform'];
$suggestor = $GET['suggestor'];

$query = "INSERT INTO sug (gamename,gameplatform, suggestor) VALUES ('$gamename','$gameplatform','$suggestor')";

$result = mysql_query($query) or die ("Error in query");
echo'Submisson accepted, click <a href="recent.php">here</a> to check it out!';
?> 
```

我收到提交接受消息，并且在数据库中添加了一行，但它始终为空白。最近的 php 将数据库显示为一个表，其中包含一个新的空白行。

有一个 id 我用作主键，但它是自动递增的，所以我没有包含它。那是唯一每次都包含某些内容的字段。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T18:17:02.473

它`$_GET`不是`$GET`

```
$gamename = mysql_real_escape_string($_GET['gamename']);
$gameplatform = mysql_real_escape_string($_GET['gameplatform']);
$suggestor = mysql_real_escape_string($_GET['suggestor']); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T18:18:11.430

您的表单方法是“GET”。这应该是“POST”。

同样使用变量，将 get 更改为 $_POST['gamename'] 等。

它也区分大小写。确保表格没有用大写字母书写。

祝你好运！

编辑以获取更多信息：

我们可能会说“GET”基本上只是用于获取（检索）数据，而“POST”可能涉及任何事情，例如存储或更新数据，或订购产品，或发送电子邮件。

资料来源：[http ://www.cs.tut.fi/~jkorpela/forms/methods.html#fund](http://www.cs.tut.fi/~jkorpela/forms/methods.html#fund)

# php - Slim 框架似乎没有调用函数

> ID：12875625
> 
> 赞同：0
> 
> 时间：2012-10-13T18:14:42.550
> 
> 标签：php, apache, slim

我不是php专家。但是我需要构建一个简单的休息服务，主要是与移动应用程序一起使用的 GET 请求。

我已经阅读了一些关于 Slim Framework 的内容，并尝试实现一个简单的示例。

虽然我没有收到任何错误，但似乎也没有调用该函数。

这是来源：

```
<?php
require 'Slim/Slim.php';
\Slim\Slim::registerAutoloader();

$app = new \Slim\Slim();

$app->get('/ping', function () {
    echo "Works !!!";
});

$app->run; 
```

我没有在 .htaccess 上做任何事情，所以我这样打电话：

```
http://mywebsite/services/service.php/ping 
```

正如我从日志中看到的那样，index.php 以状态 200 被调用，但我根本没有得到任何输出。

我尝试了几台服务器并获得了相同的结果。显然我错过了一些东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T20:58:43.457

没有使用过 Slim，我会猜测并说`$app->run`应该是`$app->run();`

# mysql - 如何获取mysql中两个表中列之间的匹配数

> ID：12875626
> 
> 赞同：1
> 
> 时间：2012-10-13T18:14:52.240
> 
> 标签：mysql, stored-procedures, plsql, count, phpmyadmin

我试图弄清楚如何在 mySQL 中处理这种情况 -

共有三个表 - 表`t_student, t_teacher, t_result` 的结构（基本上每个表中的列）如下：

```
t_student:
s_id, s_name, s1, s2, s3 
```

其中 s_id 是主键，s_name 是学生姓名，(s1,s2,s3) 是数学、物理、化学等科目。

```
t_teacher:
t_id, t_name, s1, s2, s3 
```

其中 t_id 是主键，t_name 是教师姓名，(s1,s2,s3) 是数学、物理、化学等科目。

```
t_result:
r_id, s_name, t_name, count 
```

其中 r_id 是主键，s_name 是学生姓名（来自学生表），t_name 是教师姓名（来自教师表）并且 count 给出计数（稍后会详细介绍）

现在，我想做的是如下：

学生和教师表中可能有任意数量的记录，而结果表中目前没有。现在，使用 mySQL 我想扫描学生表的内容，并且对于该表中的每条记录，我想拾取：

s1，然后将值与教师表 s2 中的 (s1,s2,s3) 列进行比较，然后将值与教师表 s3 中的 (s1,s2,s3) 列进行比较，然后将值与 (s1,s2,s3) 进行比较教师表中的列

并获取匹配值的数量并存储在计数中。

为了更清楚，如果学生表中的第一条记录，s1，s2和s3是“phy”，“chem”和“maths”，如果教师表中的第一条记录是“maths”，“phy”，“computer” "，那么在这种情况下，student.s1 与teacher.s2 匹配——所以现在count 为1。然后student.s2 与teacher 表中的s1、s2、s3 匹配，但匹配为0，因此count 保持为1；再次 student.s3 与教师表中的 s1,s2,s3 匹配，这次与教师表中的 s1 匹配，因此计数增加为 2。所以在比较学生表中的第一条记录与教师表的第一条记录时，我得到计数​​= 2。现在我将在结果表中插入一行，其中包含学生姓名、教师姓名以及如此获得的计数。

基本上我想获得学生表和教师表之间的 s1,s2,s3 匹配数，对于学生表中的每一行，然后将其放入结果表中。

我只知道 mysql 中的基本操作——比如选择插入删除等。我假设这样的操作需要更多，比如 plsql 和存储过程？

仅供参考，我正在使用 phpmyadmin，并且表格存储在那里。我将使用 php 从表中获取结果，并执行这些查询。

请让我知道这个方法。

谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T19:05:59.683

您应该将表修改为

```
t_student:
s_id, s_name, s_s 
```

和

```
t_teacher:
t_id, t_name, t_s 
```

并将您的 s1、s2、s3 拆分为单独的行。然后你可以在 t_student 和 t_teacher 之间做一个简单的连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T18:57:47.573

您的数据库设计需要一些工作。首先标准化您的数据，将重复的主题列从教师和学生表中移出。您可以通过创建下表来做到这一点：

```
CREATE TABLE t_subjects ( subject_id INT, name VARCHAR(30) );
CREATE TABLE t_teacher_subjects ( teach_id INT, subject_id INT);
CREATE TABLE t_student_subjects ( student_id INT, subject_id INT); 
```

从教师和学生中删除 s1、s2、s3 列，然后您将能够在单个查询中填充结果表（假设它具有 auto_increment 主键） - 如下所示：

```
insert into t_result (s_name, t_name, count) 
select t_teacher.t_name, t_student.s_name, count(*) as c from
t_teacher_subjects 
    inner join t_student_subjects on t_teacher_subjects.subject_id = t_student_subjects.subject_id
    inner join t_teacher on t_teacher_subjects.teach_id = t_teacher.t_id
    inner join t_student on t_student_subjects.student_id = t_student.s_id
group by t_teacher.t_name, t_student.s_name; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T20:36:45.743

出色地。感谢您的挑战。一个很好的心理锻炼:)。

这是查询；只需将其转换为插入：

```
select s_name, t_name, count(*) cnt from
(
select s.s_name, s.s s_s, t.t_name, t.s t_s from
(
select s_id, s_name, s1 s from t_student
union
select s_id, s_name, s2 s from t_student
union
select s_id, s_name, s3 s from t_student
) s
inner join
(
select t_id, t_name, s1 s from t_teacher
union
select t_id, t_name, s2 s from t_teacher
union
select t_id, t_name, s3 s from t_teacher
) t
on t.s = s.s
) m
group by s_name, t_name
; 
```

* * *

**编辑：**实际运行：

```
mysql> select * from t_student;
+------+--------+------+------+------+
| s_id | s_name | s1   | s2   | s3   |
+------+--------+------+------+------+
|    1 | st1    | qqq  | www  | eee  |
|    2 | st2    | 111  | 222  | 333  |
|    3 | st3    | zzz  | xxx  | ccc  |
+------+--------+------+------+------+
3 rows in set (0.00 sec) 
```

* * *

```
mysql> select * from t_teacher;
+------+--------+------+------+------+
| t_id | t_name | s1   | s2   | s3   |
+------+--------+------+------+------+
|    1 | te1    | qqq  | www  | eee  |
|    2 | te2    | 111  | 222  | nnn  |
|    3 | te3    | zzz  | nnn  | nnn  |
+------+--------+------+------+------+
3 rows in set (0.00 sec) 
```

* * *

```
mysql> select s_name, t_name, count(*) cnt from
    -> (
    -> select s.s_name, s.s s_s, t.t_name, t.s t_s from
    -> (
    -> select s_id, s_name, s1 s from t_student
    -> union
    -> select s_id, s_name, s2 s from t_student
    -> union
    -> select s_id, s_name, s3 s from t_student
    -> ) s
    -> inner join
    -> (
    -> select t_id, t_name, s1 s from t_teacher
    -> union
    -> select t_id, t_name, s2 s from t_teacher
    -> union
    -> select t_id, t_name, s3 s from t_teacher
    -> ) t
    -> on t.s = s.s
    -> ) m
    -> group by s_name, t_name
    -> ; 
```

* * *

```
+--------+--------+-----+
| s_name | t_name | cnt |
+--------+--------+-----+
| st1    | te1    |   3 |
| st2    | te2    |   2 |
| st3    | te3    |   1 |
+--------+--------+-----+
3 rows in set (0.00 sec) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-13T18:37:07.720

实际上，您不需要任何程序代码来解决这个问题。该方法称为“标准化”。您需要多个表来表示教师的科目，以便 s1、s2、s3 值转到单独表中的单个列，该表与教师表具有外键关系。其他关系也一样。（这就是为什么首先使用术语“关系数据库”。）

相关讨论在这里：[DB Design: 1st Normal Form and Repeating Groups](https://stackoverflow.com/questions/951285/db-design-1st-normal-form-and-repeating-groups)。

**编辑**

看起来像是一个任务而不是一个生产问题:)。无论如何，您仍然可以尝试使用复杂的纯 SQL 方法在**查询**中而不是在模式中进行规范化。奇怪但并非不可能。

这就是诀窍的精髓。将其用作子查询以获取数据的规范化表示：

```
select s_id, s_name, s1 s from t_student
union
select s_id, s_name, s2 s from t_student
union
select s_id, s_name, s3 s from t_student 
```

# php - PHP 如果 $_SERVER('REQUEST_URI') 为空，或者只包含 $_GET

> ID：12875627
> 
> 赞同：0
> 
> 时间：2012-10-13T18:15:02.207
> 
> 标签：php

如何检查是否`$_SERVER['REQUEST_URI']`为空（即用户访问过），但如果URL 中`domain.com/`有一个异常（ ）`$_GET``domain.com/?a=1`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T18:17:31.357

您可以使用`parse_url`来实现这一点

```
if(parse_url($_SERVER['REQUEST_URI'],PHP_URL_QUERY) !== null)
{
    // It Contains get
    var_dump($_SERVER['REQUEST_URI']);
} 
```

# c++ - 全局数组在正常声明但不是指针时导致段错误

> ID：12875629
> 
> 赞同：1
> 
> 时间：2012-10-13T18:15:12.623
> 
> 标签：c++, arrays, segmentation-fault, global

我正在使用一个全局数组（我知道它们是邪恶的）。这不是什么大问题，但我不知道为什么它以一种方式而不是另一种方式工作，因为它们应该是相同的。（否则我需要以当前工作方式释放内存）。

无论如何，我有这个 Snake 课程。我想做，这是全局数组：

```
Snake snakes[8]; 
```

我有几个（或无论如何都会）几个与之交互的类和函数。有问题的问题发生在 Snake 类中的 setter 函数上。它编译得很好，但是有段错误。原来，这是一个空指针（0x0）。不知道为什么。在这种情况下，堆栈跟踪来自另一个文件的函数调用，该文件包括蛇头文件并具有以下内容：

```
extern Snake * snakes; 
```

数组的名称是一个指针，所以我认为这应该可行。奇怪的是，它没有。我不知道为什么。

但是，当我将声明从原来的内容更改为：

```
Snake * snakes; 
```

然后像这样分配它：

```
snakes = new Snake [8]; 
```

有用！但是，当蛇的数量不变时，我需要释放一些我不想这样做的东西。(8)。

此外，有问题的函数调用访问第 0 个元素，每次有 8 个元素。

知道是什么原因造成的吗？

在旁注中，全局变量在命名空间中仍然是邪恶的吗？（不是匿名的）。我之所以这样问是因为我正在努力养成 OO 习惯并在逻辑上构建事物，与我最后的努力相比，我确信这会得到回报，封装、组织等都是有意义的。（也许几年后，编译时间）。尽管如此，必须在函数调用中包含一个作用域变量以进行设置似乎......很糟糕。这是正确的还是有更好的方法？（然后是全局、命名空间或其他）

编辑：错误是一个段错误，在成员函数的行。

蛇成员函数：

```
void setValue(Some value here...) {this-> value = input) 
```

来自外部全局数组的文件的调用：

```
snakes[0].setValue(some value here...) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T18:20:30.593

数组的名称**不是**指针。在大多数情况下，它**会衰减**为指针，但当它没有衰减时，它不会。因此，如果您有：

```
Snake snakes[8]; 
```

在一个源文件中和

```
extern Snake *snakes; // don't do this 
```

在另一种情况下，您会遇到各种神秘问题，包括崩溃。对于数组，extern 声明**必须**声明一个数组：

```
extern Snake snakes[]; 
```

顺便说一句，我知道这一点是因为多年前我遇到了**完全相同的问题，那时我才知道如何做到这一点。**

# osclass - 尝试向 OSCLASS 联系人发布者部分添加其他联系人字段

> ID：12875631
> 
> 赞同：2
> 
> 时间：2012-10-13T18:15:23.063
> 
> 标签：osclass

我一直在尝试向 OSCLASS Classifieds 的 Contact Publisher 部分添加额外的标签字段。我已经尝试了所有方法，当我在 item.php 脚本中添加代码行时，我收到“未定义错误” 作为管理面板一部分的自定义字段仅适用于广告本身。此问题与每个广告的联系发布者部分有关。请帮忙。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T02:57:29.717

您可以修改照片配置文件插件并将自定义字段添加到其中。

# design-patterns - 如何在 Laravel 中为基于用户角色的菜单构建代码？

> ID：12875638
> 
> 赞同：2
> 
> 时间：2012-10-13T18:16:48.077
> 
> 标签：design-patterns, menu, bundle, laravel

在用户登录到我正在开发的应用程序后，根据他们的角色，他们需要呈现一组不同的菜单项。

我创建了一个名为“menu”的过滤器，在其中组装菜单项。我有这个在我`routes.php`运行我的过滤器之前运行我的过滤器：

```
Route::group(array('before' = 'auth|menu'), function()... 
```

在我的菜单过滤器的末尾，我有这个让菜单类在每个视图中都可以访问：

```
View::share('menu', $menu); 
```

为了实际构建菜单，我正在使用[Laravel Menu bundle](http://vespakoen.github.com/laravel-menu/)，但我还没有找到从我的控制器动态设置菜单项的“活动”标志的最佳方法。

菜单包检查 URL 以设置活动标志（这对我不起作用，因为它似乎将路径名与 进行比较`URI::current()`，只有后者返回带有域、端口和所有内容的完整 URL，所以它永远不会匹配）但我会宁愿以某种方式`$menu`从我的控制器中访问该类，以便我可以直接修改它。

我该怎么做？当一个人使用注册表（又名美化全局变量）时会出现这种情况吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T21:55:01.457

会给你基本的想法，你将准备好继续前进。使用 IoC 容器将菜单对象实例化为单例，然后从控制器或视图中访问它。另一种注入菜单的方法是使用 View Composer。你可以深入了解 Laravel 文档和源代码。

# asp.net - 如何在 ASP.NET 中单击按钮时将文本框中的数据插入 GridView

> ID：12875643
> 
> 赞同：5
> 
> 时间：2012-10-13T18:17:04.927
> 
> 标签：asp.net, gridview

我想从文本框中获取数据，然后单击按钮，我希望将该数据插入到`GridView`. 每次点击都应该创建一个新行，并且不能删除旧行。每当我输入新数据并单击按钮时，我的旧行被删除，新行被存储在它的位置。这是我的代码：

```
DataTable dt1 = new DataTable();
bool flag = false;  

private void gridVIEWData()
{
   dt1.Columns.Add("pName", typeof(string));
   dt1.Columns.Add("pCategory", typeof(string));
   dt1.Columns.Add("price", typeof(string));
   dt1.Columns.Add("pQuantity", typeof(string));
   dt1.Columns.Add("totalPrice", typeof(string));
}
protected void Button3_Click(object sender, EventArgs e)
{
    if (!flag)
    {
        gridVIEWData();
        flag = true;
        Int32 total = Convert.ToInt32(txt_quantity.Text) * Convert.ToInt32(txt_price.Text);
        DataRow dr = dt1.NewRow();
        dr["pName"] = DropDownList2.SelectedItem;
        dr["pCategory"] = DropDownList1.SelectedItem;
        dr["price"] = txt_price.Text;
        dr["pQuantity"] = txt_quantity.Text;
        dr["totalPrice"] = total;
        dt1.Rows.Add(dr);

        GridView1.DataSource = dt1;
        GridView1.DataBind();
    }
    else if (!IsPostBack)
    {
        Int32 total = Convert.ToInt32(txt_quantity.Text) * Convert.ToInt32(txt_price.Text);
        DataRow dr = dt1.NewRow();
        dr["pName"] = DropDownList2.SelectedItem;
        dr["pCategory"] = DropDownList1.SelectedItem;
        dr["price"] = txt_price.Text;
        dr["pQuantity"] = txt_quantity.Text;
        dr["totalPrice"] = total;
        dt1.Rows.Add(dr);

        GridView1.DataSource = dt1;
        GridView1.DataBind();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T18:44:40.700

当您将旧数据与新数据绑定时，旧数据将被删除。您必须将旧数据保留在数据源中的哪个数据表中。通常我们有用于存储数据的持久性介质，例如文件数据库。

为了您的理解，我会将数据表存储在 Session 中，但通常不实践，您应该存储在数据库或您喜欢的任何介质中。

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        gridVIEWData();
        GridView1.DataSource = dt1;
        GridView1.DataBind();
    }
}

private void gridVIEWData() {
   dt1.Columns.Add("pName", typeof(string));
   dt1.Columns.Add("pCategory", typeof(string));
   dt1.Columns.Add("price", typeof(string));
   dt1.Columns.Add("pQuantity", typeof(string));
   dt1.Columns.Add("totalPrice", typeof(string));
   Session["dtInSession"] = dt1;     //Saving Datatable To Session 
}

protected void Button3_Click(object sender, EventArgs e)
{
        if(Session["dtInSession"] != null)
             dt1 = (DataTable)Session["dtInSession"]; //Getting datatable from session 

        Int32 total = Convert.ToInt32(txt_quantity.Text) * Convert.ToInt32(txt_price.Text);
        DataRow dr = dt1.NewRow();
        dr["pName"] = DropDownList2.SelectedItem;
        dr["pCategory"] = DropDownList1.SelectedItem;
        dr["price"] = txt_price.Text;
        dr["pQuantity"] = txt_quantity.Text;
        dr["totalPrice"] = total;
        dt1.Rows.Add(dr);

        Session["dtInSession"] = dt1;     //Saving Datatable To Session 
        GridView1.DataSource = dt1;
        GridView1.DataBind();

    }
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T18:23:20.500

这是因为您`gridVIEWData();`每次都在回发时调用再次创建表列。

试试这个

```
DataTable dt1 = new DataTable();

private void gridVIEWData() {
    dt1.Columns.Add("pName", typeof(string));
    dt1.Columns.Add("pCategory", typeof(string));
    dt1.Columns.Add("price", typeof(string));
    dt1.Columns.Add("pQuantity", typeof(string));
    dt1.Columns.Add("totalPrice", typeof(string));
}

protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        gridVIEWData();
        GridView1.DataSource = dt1;
        GridView1.DataBind();
        Session["dt1"]=dt1;
    }
}

protected void Button3_Click(object sender, EventArgs e)
{
    if(Session["dt1"]!=null) dt1 = (DataTable) Session["dt1"];
    Int32 total = Convert.ToInt32(txt_quantity.Text) * Convert.ToInt32(txt_price.Text);
    DataRow dr = dt1.NewRow();
    dr["pName"] = DropDownList2.SelectedItem.Text;
    dr["pCategory"] = DropDownList1.SelectedItem.Text;
    dr["price"] = txt_price.Text;
    dr["pQuantity"] = txt_quantity.Text;
    dr["totalPrice"] = total.ToString();
    dt1.Rows.Add(dr);

    GridView1.DataSource = dt1;
    GridView1.DataBind();
} 
```

# html - HTML/CSS 布局编号的表达能力 (a^x)

> ID：12875645
> 
> 赞同：30
> 
> 时间：2012-10-13T18:17:24.593
> 
> 标签：html, css

我需要在网页中布局一些数学表达式，不能使用乳胶或 mathML，只是纯 HTML（不是 HTML5）

我有一个不同表达式的表达式，例如 (a+b+sqrt(c))^(2x+b)

第二个表达式应该在第一个表达式的右侧稍小并在其上方。

听起来很简单，但我似乎无法正确理解。

任何帮助都是样式和布局会很棒，谢谢。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-10-13T18:48:53.730

当涉及到数学表达式时，HTML 相当有限。原则上，HTML 规范建议您使用`sup`element 作为上标，因此示例表达式为

```
(<i>a</i> + <i>b</i> + √&lt;i>c</i>)<sup>2<i>x</i> + <i>b</i></sup> 
```

但是，`sup`在浏览器中的实现是不一致的并且通常很差（导致例如不均匀的行间距），因此在实用上最好将`span`元素与类一起使用：

```
(<i>a</i> + <i>b</i> + √&lt;i>c</i>)<span class=sup>2<i>x</i> + <i>b</i></span> 
```

使用 CSS 代码

```
.sup {
  position: relative;
  bottom: 1ex; 
  font-size: 80%;
} 
```

[在我的 HTML (and CSS) 中的数学](http://www.cs.tut.fi/~jkorpela/math/)页面上解释了一些原因。还要考虑用于包含复杂数学表达式的页面的基于 JavaScript 的库：

*   [凯特克斯](http:///home/jarvisd/work/resume/climate-report.pdf)
*   [数学贾克斯](http://www.mathjax.org/)
*   [jq数学](http://mathscribe.com/author/jqmath.html)

示例表达式是一个边界情况；[如果平方根使用带有vinculum](https://en.wikipedia.org/wiki/Vinculum_(symbol))而不仅仅是 √<em>c的平方根符号来表示，那么它在数学上看起来会更正确，并且尝试使用 HTML 和 CSS 构造一个 vinculum 会变得相当脏，但否则它可以被合理地处理HTML 和 CSS。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-10-13T18:25:05.870

HTML`<sup>`为上标定义了一个标签。例如：

```
a<sup>x</sup> 
```

您可以使用 CSS 更改边距和垂直对齐方式。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-13T18:20:27.690

您可以使用`<sup>`元素将指数显示为底的上标。涉及的 HTML 将是：

```
(a+b+sqrt(c))<sup>(2x+b)</sup> 
```

更好的方法是使用 CSS 来实现相同的结果，为此您可以使用带有属性的 span：

```
vertical-align:super; 
```

可以在[这里](http://jsfiddle.net/sTqtu/)看到一个演示。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-08-08T10:05:13.083

下标和上标字符可以由 sub 和 sup 指定。

```
X<sub>2</sub><sup>3</sup> 
```

这给出了 X 后缀 2 和幂 3。这是赋予 html 中数字幂的简单方法。

# iphone - 如何在 Interface Builder 中向 UITableViewCell 的 contentView 添加自定义标签？

> ID：12875646
> 
> 赞同：0
> 
> 时间：2012-10-13T18:17:24.903
> 
> 标签：iphone, ios, xcode, xcode4, interface-builder

我正在从 CatsTableViewCell.xib 文件加载自定义 UITableViewCell。它包含我在 Interface Builder 中添加的自定义标签。该单元格在表格视图中可见。一切看起来都很好。

但是当我单击模拟器中的单元格时，整个单元格变为蓝色。我无法将标签连接到 contentView，并且其他人告诉我 Interface Builder 会自动将单元格的子视图添加到 contentView。

有人可以告诉我发生了什么，为什么选择状态会覆盖标签？如果是 contentView，我认为这不应该发生。

我所做的只是创建一个绘制渐变的自定义 backgroundView，并在那里添加一个标签。Interface Builder 不断将我的标签作为子标签添加到背景视图中，这很尴尬。我也不能将它定位在根中，因为单元格必须是唯一的根对象。而且IB也不会让我把标签放在背景视图上方。当我这样做时，我无法定位标签，并​​且每次单击它时，IB 都会将其作为子项添加到背景视图中。

![在此处输入图像描述](../Images/8b5fdcfe81a990368d3a73078f2a53e1.png)

![在此处输入图像描述](../Images/c4b51268fde49ad2e41dee48a4f9c049.png)

这是我将标签拖到背景视图上方时的外观。它消失在它身后。单击标签并尝试定位它将使其再次成为 backgroundView 的子项：

![在此处输入图像描述](../Images/ad034dabbce6823a41877174c7f2349f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T18:29:17.117

在 IB 中，当一个对象在列表视图中高于另一个对象时，它实际上在它的“下方”。可以这么说，列表视图显示了从“下到上”的层次结构。

您的层次结构应如下所示：

![在此处输入图像描述](../Images/a33a6afecf885b5969af35c73f9dcbe9.png)

您可能会发现很难将标签拖到背景下方 - 正如您所发现的，如果您不是像素完美的 XCode 将使其成为您不想要的背景视图的子级。这里的解决方案是将背景视图拖到标签上方。希望这可以帮助你！

# c - 编译并执行带参数的c程序

> ID：12875647
> 
> 赞同：2
> 
> 时间：2012-10-13T18:17:27.240
> 
> 标签：c, linux, ubuntu

我是 C 程序和 linux 的新手，我们如何编译和运行这个程序？

我已经尝试过`gcc example.c`了，`./a.out`但它给出了一个错误`input file cannot be opened`（我在 read 方法中写了这个错误）

```
// example.c
int main(int argc, char *argv[])
{
    char* input = argv[1];
    read(input);

    char* output = argv[2];
    write(output);

    return 0;
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T18:23:28.080

您的程序不会很好地运行 - 例如，您没有为`read`and提供足够的参数`write`（假设您的意思是调用 POSIX `read(2)`and `write(2)`）。

要回答您的实际问题，问题似乎是您没有提供任何论据。你需要像这样运行它：

```
./a.out FILE1 FILE2 
```

替换`FILE1`为输入文件`FILE2`的名称和输出文件的名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T18:40:11.933

首先`read()`，`write()`两者都采用 3 个参数（仅给出一个）。

其次，它应该像这样使用：

```
int ifilehandle = open(argc[1],O_RDONLY,S_IREAD);
int ofilehandle = open(argc[2],O_WRONLY,S_IWRITE);
char buffer[32767];
read(ifilehandle,&buffer,32766);
write(ofilehandle,&buffer,32766);
close(ifilehandle);
close(ofilehandle); 
```

第三，应该像这样调用 a.out：

```
./a.out filename1.extension filename2.extension 
```

# css - CSS 动态多级下拉菜单

> ID：12875649
> 
> 赞同：2
> 
> 时间：2012-10-13T18:17:38.377
> 
> 标签：css, wordpress, drop-down-menu, menu

我最近开始尝试为自己开发一个简单的 Wordpress 主题，但后来我的导航菜单碰壁了。

下拉菜单将有多个项目和多个子菜单，将来需要添加更多。默认 Wordpress 主题的示例 - [http://i.imgur.com/zhhbH.png](http://i.imgur.com/zhhbH.png)

我想知道菜单背后有什么样的 CSS 能够无限制地动态添加另一个项目和子菜单。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T18:29:02.840

试试这个：

CSS：

```
li ul {
  display: none;
}

ul li:hover  > ul{
  display: block;
}
​ 
```

HTML：

```
​&lt;ul>
    <li>Item 1</li>
    <li>Item 2</li>
    <li>
        Item 3
        <ul>
            <li>Subitem 3.1</li>
            <li>Subitem 3.2</li>
            <li>
                Subitem 3.3
                <ul>
                    <li>Subitem 3.3.1</li>
                    <li>Subitem 3.3.2</li>
                    <li>Subitem 3.3.3</li>
                </ul>                    
            </li>
        </ul>
    </li>
</ul>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

演示：http: [//jsfiddle.net/TKBdY/](http://jsfiddle.net/TKBdY/)

# c++ - 多行标准输入 - C++

> ID：12875650
> 
> 赞同：2
> 
> 时间：2012-10-13T18:17:39.133
> 
> 标签：c++, stdin

因此，如果我有一个采用标准输入的程序，例如

```
1
5
2
4 
```

我如何准确地遍历每一行并说打印该值，这就是我的想法：

```
#include <iostream>
using namespace std;

int main()
{

  while ( // input has ended// ) {
  cout << //current line//

  //increment to next line//

 }     

  return 0;
} 
```

有没有这样的方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-13T18:24:18.907

我喜欢的模式是：

```
while (!cin.eof())
{
    string line;
    getline(cin, line);

    if (cin.fail())
    {
        //error
        break;
    }

    cout << line << endl;
} 
```

与其他答案一样，您可以键入`CTRL+Z`发送`EOF`到`STDIN`。如果`STDIN`是管道，则将`EOF`在流没有更多数据时发送。

要保存到向量中：

```
vector<int> numbers;

while (!cin.eof())
{
    string line;
    getline(cin, line);

    if (cin.fail())
    {
        //error
        break;
    }

    cout << line << endl;

    istringstream iss(line);
    int num;
    iss >> num;
    numbers.push_back(num);
} 
```

如果你想要一个 C 风格的数组（虽然我会推荐`std::vector`：

```
size_t START_SIZE = 100;

size_t current_size = START_SIZE;
size_t current_index = 0;

int* numbers = new int[current_size];

while (!cin.eof())
{
    string line;
    getline(cin, line);

    if (cin.fail())
    {
        //error
        break;
    }

    cout << line << endl;

    if (current_index == current_size)
    {
        current_size += START_SIZE;
        int* tmp_arr = new int[current_size];

        for (size_t count = 0; count < current_index; count++)
        {
            tmp_arr[count] = numbers[count];
        }

        delete [] numbers;
        numbers = tmp_arr;
    }

    istringstream iss(line);
    int num;
    iss >> num;

    numbers[current_index] = num;
    current_index++;
}

delete [] numbers; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T18:46:13.287

最简单的方法是这样做（建议类似，但 std::istream 的 .fail() 和 .eof() 函数通常不应该这样使用）：

```
int main (int argc, char* argv[])
{
   std::string line;
   while (std::getline (std::cin, line))
   {
     std::cout << line << std::endl; // std::getline skips the newline
   }

   std::cout << "No more lines" << std::endl;
   return 0;
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T18:21:46.223

如果您从控制台读取，则可以添加像 0 这样的结束条件。如果用户输入 0，它将结束输入。

```
#include <iostream>
using namespace std;

int main()
{
  int n;
  cin>>n;
  while(n!=0) {

  cout << //current line//

  //increment to next line//
  cin>>n;
 }   

  return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-13T18:22:11.907

怎么样`std::cin >> std::cout.rdbuf();`？当您通过 CTRL-Z 或类似方式输入 EOF 时，它将结束。这是[一个示例](http://ideone.com/Ht3eR)：

```
#include <iostream>

int main() {
    std::cin >> std::cout.rdbuf();
} 
```

输入：

> 1
> 5
> 4
> 2
> (EOF)

输出：

> 1
> 5
> 4
> 2

将它们保存到数组中并在以后打印它们也同样有效：

```
std::vector<int> inputs(std::istream_iterator<int>(std::cin), std::istream_iterator<int>());
std::copy(std::begin(inputs), std::end(inputs), std::ostream_iterator<int>(std::cout, "\n")); 
```

# php - 从其他 PHP 文件中回显 TXT 变量

> ID：12875651
> 
> 赞同：0
> 
> 时间：2012-10-13T18:17:39.090
> 
> 标签：php, include, echo

我想要这样的东西：文件 PEOPLE.PHP

```
<?php

$name_surname1='Wiliam Smith';
$name _surname2='Adam BlaBla';

?> 
```

其他 PHP 文件 - RECORDS.PHP

```
<?php include 'people.php';?>
<html>
<body>
<div><? echo $ name_surname1;</div>
<div><? echo $ name_surname2;</div>
</body>
</html> 
```

请告诉我 PEOPLE.PHP 有什么问题或如何完成我的任务？我在这个领域是全新的。非常感谢您的支持

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T18:20:18.833

看起来您在`$name_surname2`变量中有一个意外的空间。

把它放到你的 people.php 中：

```
$name_surname1='Wiliam Smith';
$name_surname2='Adam BlaBla'; 
```

然后，要访问您的变量，不要`$`在变量名和变量名之间放置空格，并关闭您的 PHP 标记。

```
<div><? echo $name_surname1; ?></div>
<div><? echo $name_surname2; ?></div> 
```

# c++ - 如何使用 std::map 和 std::weak_ptr 作为键？

> ID：12875652
> 
> 赞同：19
> 
> 时间：2012-10-13T18:17:39.670
> 
> 标签：c++, dictionary, stdmap, weak-references, weak-ptr

如何将a 用作`std::weak_ptr`a 的键，`std::map`如下面的代码所示？

```
#include <map>
#include <memory>

int main()
{
    std::map< std::weak_ptr<int>, bool > myMap;

    std::shared_ptr<int> sharedptr(new int(5));
    std::weak_ptr<int> weakptr = sharedptr;

    myMap[weakptr] = true;

    return 0;
} 
```

上面的程序没有构建并尝试编译它会给出许多错误消息，例如：

```
1>C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\xfunctional(125): error C2784: 'bool std::operator <(const std::_Tree<_Traits> &,const std::_Tree<_Traits> &)' : could not deduce template argument for 'const std::_Tree<_Traits> &' from 'const std::tr1::weak_ptr<_Ty>'
1>          with
1>          [
1>              _Ty=int
1>          ]
1>          C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\xtree(1885) : see declaration of 'std::operator <'
1>          C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\xfunctional(124) : while compiling class template member function 'bool std::less<_Ty>::operator ()(const _Ty &,const _Ty &) const'
1>          with
1>          [
1>              _Ty=std::tr1::weak_ptr<int>
1>          ]
1>          C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\map(71) : see reference to class template instantiation 'std::less<_Ty>' being compiled
1>          with
1>          [
1>              _Ty=std::tr1::weak_ptr<int>
1>          ]
1>          C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\xtree(451) : see reference to class template instantiation 'std::_Tmap_traits<_Kty,_Ty,_Pr,_Alloc,_Mfl>' being compiled
1>          with
1>          [
1>              _Kty=std::tr1::weak_ptr<int>,
1>              _Ty=bool,
1>              _Pr=std::less<std::tr1::weak_ptr<int>>,
1>              _Alloc=std::allocator<std::pair<const std::tr1::weak_ptr<int>,bool>>,
1>              _Mfl=false
1>          ] 
```

出现问题是由于以下行：

```
myMap[weakptr] = true; 
```

错误消息似乎与`operator<`. 我需要定义`operator<`吗`weak_ptr`？确切地说，需要定义哪些运算符才能将数据类型用作 a 的键`std::map`？

（我应该注意我已经`operator==`在`std`命名空间中定义了。另外，我打算使用`weak_ptr`自定义类类型而不是`int`.）

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-10-13T18:36:29.937

C++11 提供了适当的比较机制`std::weak_ptr`，即：`std::owner_less`.

这应该是地图和集合的默认设置。如果您使用的 C++ 编译器遇到困难，请尝试使用`std::owner_less`它（如果可用）。如果它不可用，您将需要提供类似的机制，`std::owner_less`以便您可以适当地比较`std::weak_ptr`对象。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2019-09-17T08:36:35.090

正如[Jody Hagins 的回答](https://stackoverflow.com/a/12875833/2675154)中所解释的，如果您使用 a作为键，则应将[`std::owner_less`](https://en.cppreference.com/w/cpp/memory/owner_less)其用作关联容器的比较函数对象。[`std::weak_ptr`](https://en.cppreference.com/w/cpp/memory/weak_ptr)我想通过为您的代码提供以下完整解决方案来扩展该答案：

```
int main() {
    std::map<std::weak_ptr<int>, bool, std::owner_less<std::weak_ptr<int>>> myMap;

    std::shared_ptr<int> sharedptr(new int(5));
    std::weak_ptr<int> weakptr = sharedptr;

    myMap[weakptr] = true;

    return 0;
} 
```

从[C++17](https://en.wikipedia.org/wiki/C%2B%2B17)开始，您可以省略 的模板参数`owner_less`，从而缩短代码，如下所示：

```
std::map<std::weak_ptr<int>, bool, std::owner_less<>> myMap; 
```

如果您打算使用 a`weak_ptr`到自定义类而不是`int`，那么您可以简单地将 替换`int`为您的类的名称，如[Coliru 上的示例代码所示](https://coliru.stacked-crooked.com/a/f3325ef858b626aa)。

一般来说，除了`operator<`为（自定义）键类型提供适当的比较函数（或重载）之外，不需要为`std::map`. `operator==`不需要对密钥类型进行重载。

# php - php4中的xml解析

> ID：12875653
> 
> 赞同：0
> 
> 时间：2012-10-13T18:17:42.480
> 
> 标签：php, xml, parsing, php4

我知道这可能问得太多了，但是我一直在阅读有关 xml 解析的内容，但我就是不明白！在我完成编程之前我没有意识到我的客户有 PHP 4（一个很好的教训），但我需要这个在 php4 中工作：

```
$post_string= 'type=xml&cid=55505&minorRev=14&apiKey=4sr8d8bsn75tpcuja6ypx5g3&locale='.$userLocale.'&currencyCode='.$userCurr.'&customerIpAddress='.$userIp.'&customerUserAgent='.$userAgent.'&xml=<HotelListRequest><destinationId>7EEF0188-E4DC-4B45-B4A7-57E3DF950E1F</destinationId><supplierCacheTolerance>MED_ENHANCED</supplierCacheTolerance><numberOfResults>200</numberOfResults></HotelListRequest>';
//Relative path to the file with $_POST parsing
$path = "http://api.ean.com/ean-services/rs/hotel/v3/list"; 
$ch = curl_init($path); 
$fp = fopen('xml/data.xml','w');
//Send the data to the file
curl_setopt($ch, CURLOPT_POSTFIELDS, $post_string); 
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_HTTPHEADER, array('Accept: application/xml')); 
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_setopt($ch, CURLOPT_FILE, $fp);
$val = curl_exec($ch);
curl_close($ch);//Close curl session
fclose($fp); //Close file overwrite
$data = simplexml_load_file('xml/data.xml'); 
```

我简直被难住了。我只使用过这种格式来读取 xml 文档。任何人都可以将其转换为在 php4 上工作吗？我再次知道这是很多问题，但任何帮助都会非常感激。先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T18:37:29.733

您应该向您的客户说明，自[2008 年](http://www.php.net/archive/2007.php)[8 月 8](http://www.php.net/archive/2007.php)[^日](http://www.php.net/archive/2007.php)以来PHP 4**根本**没有任何支持！[](http://www.php.net/archive/2007.php)

也就是说，阅读[这个](https://stackoverflow.com/questions/132233/what-to-use-for-xml-parsing-reading-in-php4)已经解决了您的问题的问题。

（来自参考答案）

```
$xml = ...; // Get your XML data
$xml_parser = xml_parser_create();

// _start_element and _end_element are two functions that determine what
// to do when opening and closing tags are found
xml_set_element_handler($xml_parser, "_start_element", "_end_element");

// How to handle each char (stripping whitespace if needs be, etc
xml_set_character_data_handler($xml_parser, "_character_data");  

xml_parse($xml_parser, $xml); 
```

如果您的客户*真的*想坚持使用不受支持的 PHP 版本（或无法迁移到 PHP 5），那么*他*应该为此承担费用；维护遗留代码通常需要更多的努力。

# java - 为 Ruby 编写 C 扩展的好处

> ID：12875659
> 
> 赞同：3
> 
> 时间：2012-10-13T18:18:19.130
> 
> 标签：java, ruby-on-rails, c, ruby

我是一名新的 Ruby 程序员，并且一直在阅读一些编写 Ruby 语言的 C 代码扩展的教程，我想知道：这样做有什么好处？我个人正在研究这个，因为我将来必须为我所在的课程做一个团队项目，我很确定我是唯一一个做 Ruby 开发的人，但大多数人都知道 C，所以我可以让他们编写理论上我可以在我自己的 Ruby 开发项目中使用的 C 代码。但通常，这是这样做的主要原因还是我不知道？另外，您认为我的想法是否可行（在我将 C 开发集成到 Ruby 中以进行整个项目时，让某人进行 C 开发）？你能用其他语言做类似的事情吗（例如，你能在 Ruby 项目、Python 代码等中使用 Java 代码）吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-13T18:28:50.440

这样做的主要原因是速度和现有功能的重用。

第一，速度。C 通常比 Ruby 快得多，因为您避免使用 Ruby VM 并且可以进行手动内存管理。在应用程序的性能关键部分（例如数据库驱动程序）中，这可能意味着整个应用程序运行时的显着改进，主要是因为您没有生成大量 Ruby 对象来包装原语，并且不必调用垃圾收集器进行清理。

其次，通过编写 C 扩展，您可以与 C 库中已经存在的代码进行交互。Linux 生态系统充斥着强大的、经过良好测试的 C 库，可提供许多常用功能。例如，[Nokogiri](http://nokogiri.org/)使用[libxml](http://www.xmlsoft.org/)进行解析，这让它可以使用经过实战考验的快速解析器，然后它只是在上面添加了漂亮的 Ruby 糖。在这种情况下，C 扩展的主要目的是提供一个 Ruby API，它调用 C 代码并将数据与 C-Ruby 数据类型相互转换（因此您可以传入一个`rb_string`作为参数，它必须被转换为`char*`供某些 C 库使用，然后将结果转换回 an`rb_string`以传递回 Ruby，例如）。

使用 MRI（普通 Ruby）时，*通常*仅限于 C 代码，尽管有一些方法可以在 Ruby 中运行 Python 等等，但它不是同一类型的接口。如果你使用 JRuby，你可以直接使用 Java 包——不需要特殊的扩展！

也就是说，如果您希望将 Ruby 与现有的 C 库接口，请查看[ruby​​-ffi](https://github.com/ffi/ffi)。它提供了许多功能，使编写 C 库的接口变得非常容易，并且可以让您快速轻松地启动和运行。

# python - 我可以将 FUSE 与 Cython 绑定一起使用吗

> ID：12875660
> 
> 赞同：0
> 
> 时间：2012-10-13T18:18:19.887
> 
> 标签：python, c, cython, fuse

我知道 FUSE 具有 C、C++、Python 等的绑定。这实际上意味着我可以使用这些语言开发 FUSE 文件系统。我希望使用 Cython，因为与纯 Python 相比，它提供了更快的速度。这是在文件系统中强调的。是否可以通过在 Cython 中编码来生成 FUSE 文件系统？

据我了解，Python 文档是我为 FUSE 编写 Cython 代码所需的全部内容。但是（如果确实可能的话）我应该将 Cython 用作 Python FUSE 系统还是 C 系统？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T18:38:28.183

您应该将它用作 Python Fuse System，然后您可以在它自己的模块中编写您的 cython 内容，然后将该模块导入您的 Python 代码中。通常与文件系统相关的操作是 IO 限制的，而不是 CPU 限制的，所以我不确定使用 cython 可以获得多少加速，但我想尝试一下并比较结果。

# mercurial - 水银合并

> ID：12875667
> 
> 赞同：0
> 
> 时间：2012-10-13T18:18:51.680
> 
> 标签：mercurial, merge

一位同事合并了一堆破坏构建的文件。我需要恢复到工作版本，然后提交该版本。我想做整个树。

要获得版本：“Hg update 4”这将检索文件的版本 4。

我不确定如何提交更改并删除签入的任何内容。

注意：转到每个文件并进行合并需要很长时间，所以我希望恢复整个树。

我也在用乌龟HG。

任何意见，将不胜感激。感谢：D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T18:42:07.020

```
hg up -r 4
<some edits>
hg ci -m "This is correct"
hg push -f 
```

# html - div 的高度没有延伸到 100%

> ID：12875670
> 
> 赞同：1
> 
> 时间：2012-10-13T18:19:28.643
> 
> 标签：html, css

这是我的页面的最终结果（还没有太多花哨的东西）：[jsFiddle](http://jsfiddle.net/bWa7B/embedded/result/) - [bWa7B](http://jsfiddle.net/bWa7B/embedded/result/)。我正在尝试`div#remaining`占据页面的其余部分（白色，并将页脚放在其底部。

我知道这个小技巧可以很容易地执行[`jQuery`](http://abcoder.com/wp-content/uploads/2009/09/three-column-layout-js-equal-height.html)；就像[这里](http://abcoder.com/wp-content/uploads/2009/09/three-column-layout-js-equal-height.html)使用的一样。但我想保持我的样式主要是 CSS（对于许多用户在访问时在浏览器中禁用他们的 cookie 和 JavaScript。

在过去 15 小时左右的时间里，我已经尝试了几乎所有可能的组合`overflow: hidden;`，`display: table-cell;`以及来自尽可能多的链接的其他组合。但是，在实现我的目标**多次失败之后；**我只需要问一下。

我的一些*更好*的结果链接在这里：

1.  [bWa7B/1/](http://jsfiddle.net/bWa7B/1/)
2.  [bWa7B/2/](http://jsfiddle.net/bWa7B/2/)
3.  [bWa7B/3/](http://jsfiddle.net/bWa7B/3/)
4.  [bWa7B/4/](http://jsfiddle.net/bWa7B/4/)

# 最终结果

我希望我的最终结果是白色背景色`div#remaining`占据整个页面，并继承正文标签的边距和宽度。此外，`div#right`必须覆盖 parent 的整个高度**`div`**，即`#remaining`。

# 附言

更好的结果是指至少观察到变化的地方，与我的其他编辑相反，这对我的结果影响不大。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T18:27:14.260

[这](http://jsfiddle.net/bWa7B/6/show/light/)把小提琴展示了它是如何占据整个身体的。您希望身体能保持多长时间取决于您。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T18:27:21.903

我建议您使用包装器而不是摆弄位置。

你对所有这些 div 做了一个包装。所以在你放的标题 div 之上

```
<div id="wrapper"> 
<here the rest of your divs>
</div> 
```

在css中你可以这样：

```
#wrapper{
margin: 0 auto;
background-color:#fff;
} 
```

这会为所有内容提供白色背景，包括您的页脚。然而，如果你给你的页脚提供与现在相同的颜色背景，你甚至不会注意到。您也可以在页脚进入之前关闭包装器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T18:23:46.567

```
position: absolute;
width: 100%;
 left: 0; 
```

for div#remaining 将解决您的问题。

# android - 我怎样才能建立一个进步圈

> ID：12875678
> 
> 赞同：2
> 
> 时间：2012-10-13T18:20:43.500
> 
> 标签：android, drawable, shape, android-drawable

在android中制作这个圆圈的最佳方法是什么？我不想学习OpenGL只是为了画一个简单的进度圈（环），但如果没有其他方法我会的。在开始之前，我想问你们，你们怎么看。我对如何制作这个的各种建议持开放态度。

![一个浮雕圆，半圈蓝色，显示\](../Images/deeeea5993a1d41ce04e3b1a0e89a50a.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T18:29:03.777

`ProgressBar`Android 内置了一个小部件，默认情况下呈现为圆形。

您可以使用`ImageView`由 a 支持`ShapeDrawable`的圆环，以及您选择的渐变扫描填充。

您可以创建 100 个 PNG 文件，每个百分比一个，并使用这些文件，也许通过`LevelListDrawable`.

您可以`View`使用`Canvas`.

可能还有其他选择，但这应该会让你继续前进。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T23:15:08.090

显然使用 SVG 并不太难，查看 Leandro Linares 的[进度圈示例](https://github.com/llinares/ring-progress-bar)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-21T22:10:00.460

坦克到@CommonsWare，这是我的代码示例

```
public class SampleView extends View {

    public SampleView(Context context) {
        super(context);
    }

    @Override
    protected void onDraw(Canvas canvas) {
        Canvas canvas.drawColor(Color.CYAN);
        Paint p = new Paint();
        // smooths
        p.setAntiAlias(true);
        p.setColor(Color.RED);
        p.setStyle(Paint.Style.STROKE); 
        p.setStrokeWidth(5);
        // opacity
        //p.setAlpha(0x80); //

        RectF rectF = new RectF(50, 20, 100, 80);
        canvas.drawOval(rectF, p);
        p.setColor(Color.BLACK);
        canvas.drawArc (rectF, 90, 45, true, p);
    }
} 
```

# c++ - 如何显式实例化具有带有友元函数的嵌套类的模板类（C++）

> ID：12875679
> 
> 赞同：10
> 
> 时间：2012-10-13T18:20:45.487
> 
> 标签：c++, templates

可能以前被问过，但这一切都接近我对 C++ 的理解和认知的极限，所以我在理解正在谈论的内容以及到底发生了什么方面有点慢。让我直接跳到代码。这有效：

```
template <typename T>
class Foo
{
    struct Bar
    {
        Bar() {}
        ~Bar() noexcept {}
        Bar(Bar&& b) : Bar() { swap(*this, b); }

        friend void swap(Bar& b1, Bar& b2) { /* ... */ }
    };
};

template class Foo<int>; // explicit instantiation of Foo with int type 
```

但是如何将定义移到结构体`swap`之外呢？`Bar`如果我这样做：

```
template <typename T>
class Foo {
    struct Bar {
        // ...
        Bar(Bar&& b) : Bar() { swap(*this, b); } // line 16
        // ...
        template <typename V>
          friend void swap(typename Foo<V>::Bar&, typename Foo<V>::Bar&);
    };
};

template <typename T>
  void swap(typename Foo<T>::Bar& b1, typename Foo<T>::Bar& b2) {} // line 26

template class Foo<int>; // line 31 
```

g++（4.7.1，标志：-Wall -std=c++11）报告：

```
main.cpp: In instantiation of ‘Foo<T>::Bar::Bar(Foo<T>::Bar&&) 
            [with T = int; Foo<T>::Bar = Foo<int>::Bar]’:
main.cpp:31:16:   required from here
main.cpp:16:28: error: no matching function for call to 
            ‘swap(Foo<int>::Bar&, Foo<int>::Bar&)’
main.cpp:16:28: note: candidate is:
main.cpp:26:6: note: template<class T> void swap(typename Foo<T>::Bar&, 
                                                 typename Foo<T>::Bar&)
main.cpp:26:6: note:   template argument deduction/substitution failed:
main.cpp:16:28: note:   couldn't deduce template parameter ‘T’ 
```

我想`swap`在显式实例化时也需要创建代码`Foo`，这是有道理的，但是为什么编译器无法确定`swap(Foo<int>::Bar&...)`需要创建的代码呢？为什么模板替换失败？还是我把一切都搞错了？

**更新 1**

和：

```
template <typename T> class Foo;
template <typename T>
  void swap(typename Foo<T>::Bar& b1, typename Foo<T>::Bar& b2);

template <typename T>
class Foo {
    struct Bar {
      Bar(Bar&& b) : Bar() { swap(*this, b); }  // line 19
      friend void swap<>(Foo<T>::Bar& b1, Foo<T>::Bar& b2); // line 20
    };
};

template <typename T>
  void swap(typename Foo<T>::Bar& b1, typename Foo<T>::Bar& b2) {} // line 26

template class Foo<int>; // line 29 
```

g++（4.7.1，标志：-Wall -std=c++11）报告：

```
main.cpp: In instantiation of ‘struct Foo<int>::Bar’:
main.cpp:29:16:   required from here
main.cpp:20:17: error: template-id ‘swap<>’ for ‘void swap(Foo<int>::Bar&, Foo<int>::Bar&)’ does not match any template declaration
main.cpp: In instantiation of ‘Foo<T>::Bar::Bar(Foo<T>::Bar&&) [with T = int; Foo<T>::Bar = Foo<int>::Bar]’:
main.cpp:29:16:   required from here
main.cpp:19:24: error: no matching function for call to ‘Foo<int>::Bar::Bar()’
main.cpp:19:24: note: candidate is:
main.cpp:19:5: note: Foo<T>::Bar::Bar(Foo<T>::Bar&&) [with T = int; Foo<T>::Bar = Foo<int>::Bar]
main.cpp:19:5: note:   candidate expects 1 argument, 0 provided
main.cpp:19:28: error: no matching function for call to ‘swap(Foo<int>::Bar&, Foo<int>::Bar&)’
main.cpp:19:28: note: candidate is:
main.cpp:26:8: note: template<class T> void swap(typename Foo<T>::Bar&, typename Foo<T>::Bar&)
main.cpp:26:8: note:   template argument deduction/substitution failed:
main.cpp:19:28: note:   couldn't deduce template parameter ‘T’ 
```

**更新 2**

好的，所以不能这样做。*Piotr*已链接到[Output a nested class inside a template](https://stackoverflow.com/questions/4351567/output-a-nested-class-inside-a-template)，但我不明白答案。为什么不能`swap`在其声明之外定义？据我（错误）理解，为什么编译器不能为它创建代码`swap(Foo<int>::Bar&...)`并在代码中链接到它以显式实例化`Foo<int>`？我完全误解了发生了什么吗？有什么问题？

**更新 3**

好的，这不能完成，因为如果存在模板特化，编译器不能保证对`swap`定义外部的调用`Foo`是明确的，因为`Foo<some_class>::Bar`在特定的特化中可能是完全不同的东西。我希望我做对了。但是，为什么在我创建`Foo`?

```
template <typename T>
class Foo {
    struct Bar {
        // ...
        Bar(Bar&& b) : Bar() { swap(*this, b); }
        // ...
        template <typename V>
          friend void swap(typename Foo<V>::Bar&, typename Foo<V>::Bar&);
    };
};

template <typename T>
  void swap(typename Foo<T>::Bar& b1, typename Foo<T>::Bar& b2) {}

//template class Foo<int>; // let's comment this explicit instantiation out. 
```

此代码编译良好（g++ 4.7.1，标志：-Wall -std=c++11）。但是，它不应该警告我这段代码可能会导致问题吗？当我添加 的显式实例化时`Foo`，问题不在于该行本身，而在于`swap`在`Foo`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T18:54:51.483

问题不在于`friend`.

问题在于这个函数本身：

```
template <typename T>
void swap(typename Foo<T>::Bar& b1, typename Foo<T>::Bar& b2) {} // line 26 
```

`T`无法从嵌套类中推断模板参数，请参阅：[在模板中输出嵌套类，](https://stackoverflow.com/questions/4351567/output-a-nested-class-inside-a-template)或者更好的答案：[https ://stackoverflow.com/a/4092248/1463922](https://stackoverflow.com/a/4092248/1463922)

举例说明为什么它不能完成，考虑这个函数：

```
template <class T>
void foo(typename A<T>::Bar); 
```

而这个 A 定义：

```
template <class T>
struct A { typedef int Bar; }; 
```

这个电话：

```
int a;
foo(a); 
```

`T`这个例子是什么？是`int`因为`A<int>::Bar`is `int`，还是`float`因为 `A<float>::Bar`is `int`too 或者任何你想要的......问题是你正在调用什么函数`foo<int>(int)`或`foo<float>(int)`......

或者举个更接近问题的例子：

```
template <class T>
struct Foo {
   struct Bar {}; 
}; 
```

似乎编译器在解决这个问题时应该没有问题：

```
template <class T>
void resolve(typename Foo<T>::Bar*); 
```

但是即使在这里编译器也有问题，因为不确定其他类的特化是否不会使用其他类的内部结构，如下所示：

```
template <class T>
struct Foo<T*> {
   typedef Foo<T>::Bar Bar; 
}; 
```

因此对于：

```
Foo<void>::Bar b;
resolve(&b); 
```

编译器没有机会知道要调用哪个版本：

```
resolve<void>(Foo<void>::Bar*);
// or 
resolve<void*>(Foo<void>::Bar*);
//          ^ 
```

* * *

我能给你什么建议 - 使用内联朋友 - 但用其他模板类来实现它。这行得通 - 但我确信这有点过度设计：

```
template <class S>
class ImplementSwap;

template <typename T>
class Foo {
    public:
    struct Bar {
        int a;
        Bar() {}
        ~Bar() {}
        friend class ImplementSwap<Foo<T>>;
        friend void swap(Foo<T>::Bar& b1, Foo<T>::Bar& b2)
        {  ImplementSwap<Foo<T>>::doSwap(b1, b2); }
        Bar(Bar&& b)  { swap(*this, b); }

    };
};

template <class T>
class ImplementSwap<Foo<T>> {
public:
   static void doSwap(typename Foo<T>::Bar&,typename Foo<T>::Bar&);
};

template <class T>
void ImplementSwap<Foo<T>>::doSwap(typename Foo<T>::Bar&,typename Foo<T>::Bar&) 
{
  // this one is not inline....
} 
```

我公开了 Bar 来做这个测试：

```
Foo<int>::Bar a = Foo<int>::Bar(); // move constructor

int main() {
  swap(a,a); // explicit swap
} 
```

* * *

~~[OLD] 我之前的回答是完全错误的，第一条评论指的是它。~~

 ~~```
friend void swap<>(typename Foo<T>::Bar&, typename Foo<T>::Bar&);
//              ^^ 
```~~ 

~~[/老的]~~

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T19:35:01.390

对我来说，这应该是这样的：

```
template <typename T>
class Foo
{
    struct Bar
    {
        template <typename V>
        friend void swap(typename Foo<V>::Bar&, typename Foo<V>::Bar&);
    };
};

template <typename T>
void swap(typename Foo<T>::Bar& b1, typename Foo<T>::Bar& b2) { }

template class Foo<int>;

int main()
{
   Foo<int>::Bar  bb1, bb2;
   swap<int>(bb1, bb2);
} 
```

这与 gcc 一起运行：http: [//ideone.com/zZMYn](http://ideone.com/zZMYn)

几点注意事项：

1.  类内的友元声明创建在类外声明为友元的对象的前向声明。这适用于友元类、函数、模板。这意味着`swap`不需要您的转发声明。

2.  语法`some-name<..>`用于模板特化和模板实例化。它不用于前向声明（包括友元声明）和定义。在您的示例中，您有一个前向声明、一个定义和一个调用（即函数模板的实例化）。

如果你调用函数 swap as `swap(bb1, bb2);`，编译器找不到它。对我来说，需要像上面的例子那样调用这个函数`swap<int>`更多的是编译器问题，而不是语言要求。编译器应该推导出模板函数调用的模板参数。

**编辑**

在上面的例子中 vars`bb1`和`bb2`有 type `Foo<int>::Bar`。这意味着 的实例化`swap`应该是：

```
void swap(Foo<int>::Bar &b1, Foo<int>::Bar &b2) { } 
```

没有任何其他实例可以在这里工作，因为 say`Foo<float>::Bar`与`Foo<int>::Bar`. 没有办法转换`Foo<int>::Bar`成`Foo<float>::Bar`. 如果模板`Foo<float>::Bar`将被实例化，则无法使用该事件。参数的类型不同。

如果这个模板有几个专业化，情况可能会更复杂。但是在调用的时候，除了模板本身什么都没有。要考虑的是，专业化应该在调用点可见。

优秀的编译器可能能够处理这种情况。由于使用 explicitit 类型规范的工作是可用的并且似乎工作，我会说 gcc 的当前状态**完全 Ok**。

# java - 在 Jersey webapp 启动时初始化数据库

> ID：12875682
> 
> 赞同：14
> 
> 时间：2012-10-13T18:21:26.697
> 
> 标签：java, web-applications, initialization, jersey

我读过[这个](https://stackoverflow.com/questions/7424465/jersey-app-run-initialization-code-on-startup-to-initialize-application)，但我不太明白它是如何工作的。我想在我的 Web 应用程序启动时加载一个属性文件并设置我的连接池。显然我只想在一个地方做一次，所以如果需要我可以改变它。对于常规的 servlet，我只需将初始化代码放在 servlet 的 init() 方法中，但您无法通过 Jersey servlet 访问它。那么我在哪里做呢？上面链接中的听众如何工作？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-10-13T18:48:01.357

您需要做的就是编写一个实现 ServletContextListener 接口的 java 类。此类必须实现两个方法 contextInitialized 方法，该方法在首次创建 Web 应用程序时调用，而 contextDestroyed 方法将在其销毁时调用。您要初始化的资源将在 contextInitialized 方法中实例化，并在 contextDestroyed 类中释放资源。应用程序必须配置为在部署时调用此类，这在 web.xml 描述符文件中完成。

```
public class ServletContextClass implements ServletContextListener
{
    public static Connection con;

    public void contextInitialized(ServletContextEvent arg0) 
    {
        con.getInstance ();     
    }//end contextInitialized method

    public void contextDestroyed(ServletContextEvent arg0) 
    {
        con.close ();       
    }//end constextDestroyed method
} 
```

web.xml 配置

```
<listener>
    <listener-class>com.nameofpackage.ServletContextClass</listener-class>
</listener> 
```

现在，这将让应用程序在部署应用程序时调用 ServletContextClass，并在 contextInitialized 方法中实例化 Connection 或任何其他资源位置，这与 Servlet init 方法所做的类似。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-13T18:30:25.787

由于您不需要在启动时修改 Jersey 本身，因此您可能不需要 AbstractResourceModelListener。你想要的是一个[javax.servlet.ServletContextListener](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContextListener.html)。您可以像添加 servlet 元素一样将[侦听](http://docs.oracle.com/cd/B15904_01/web.1012/b14017/filters.htm)器元素添加到 web.xml。ServletContextListener 将在您的上下文（Web 应用程序）首次创建时和 Jersey servlet 启动之前被调用。您可以在此侦听器中对数据库执行任何您需要的操作，当您开始使用 Jersey 时，它就会准备就绪。

# python - def 上的 Python 无效语法

> ID：12875684
> 
> 赞同：0
> 
> 时间：2012-10-13T18:21:38.830
> 
> 标签：python, syntax, twisted

我正在尝试设置一个带有 Twisted 的 UDP 服务器，遵循这个[http://twistedmatrix.com/documents/current/core/howto/udp.html](http://twistedmatrix.com/documents/current/core/howto/udp.html)

但是，我刚开始就碰壁了。我试过这个示例代码：

```
from twisted.internet.protocol import DatagramProtocol
from twisted.internet import reactor

class Echo(DatagramProtocol):

    def datagramReceived(self, data, (host, port)):
        print "received %r from %s:%d" % (data, host, port)
        self.transport.write(data, (host, port))

reactor.listenUDP(9999, Echo())
reactor.run() 
```

我明白了：

```
def datagramReceived(self, data, (host, port)):
                                 ^
SyntaxError: invalid syntax 
```

我是 Python 新手，所以我一无所知。我将代码精简到最少，注释了除类声明和方法头（添加一个传递）之外的所有内容，但我得到了相同的结果。不再支持这些配对参数了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T18:33:44.813

你确定它是python 2.7吗？因为[PEP 3113 -- Removal of Tuple Parameter Unpacking](http://www.python.org/dev/peps/pep-3113/)描述了在 Python 3 中删除该语法。作为我在 python 2.7 中运行以下虚拟函数时的测试，它可以工作。在 Python 3.2 中，它给了我完全相同的错误：

```
def datagramReceived(self, data, (host, port)):
    pass 
```

蟒蛇3错误：

```
 def datagramReceived(self, data, (host, port)):
                                     ^
SyntaxError: invalid syntax 
```

在你的代码中尝试这个只是为了确定你的 python 版本：

```
import sys
print(sys.version) 
```

# scala - 如何在 Scala / SBT 中安装 Guice？

> ID：12875685
> 
> 赞同：3
> 
> 时间：2012-10-13T18:21:39.980
> 
> 标签：scala, guice, sbt

我找到了这个 Guice 的 Maven 存储库[http://repo2.maven.org/maven2/com/google/inject/guice/3.0/](http://repo2.maven.org/maven2/com/google/inject/guice/3.0/)

我想知道如何将其插入`.sbt`文件？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-13T18:27:25.337

添加这一行。

```
libraryDependencies += "com.google.inject" % "guice" % "3.0" 
```

更多关于[SBT 维基](https://github.com/harrah/xsbt/wiki/Library-Management)

# xaml - Xaml 布局属性

> ID：12875686
> 
> 赞同：2
> 
> 时间：2012-10-13T18:21:41.073
> 
> 标签：xaml, windows-8, visual-studio-2012

我正在用 C# 制作 Windows 8 应用程序。Xaml 中是否有任何属性可以在工具箱中创建项目

```
layout_width="match_parent"
layout_height="wrap_content" 
```

像在android xml中一样？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T20:09:39.950

在 xaml 中，如果您使用这样的行创建一个[网格](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.grid.rowdefinitions)：

```
<Grid>
    <Grid.RowDefinitions>
        <RowDefintion Width="*"/>
        <RowDefintion Width="Auto"/> 
    </Grid.RowDefinitions>
</Grid> 
```

已`Auto` `Width`调整大小以适合其内容的行。与其他列`*` `Width`同等共享可用空间的行。`*` `Width`要创建填充其容器的项，只需将控件放在`*`一行和一列中，然后将控件上的 and`HorizontalAlignment`设置`VerticalAlignment`为`Stretch`。

要获得换行到下一行的控件，只需使用[`WrapGrid`](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.wrapgrid.aspx).

# ruby - 在 ruby 中定义类级别方法的所有方法

> ID：12875688
> 
> 赞同：3
> 
> 时间：2012-10-13T18:21:54.513
> 
> 标签：ruby

我想要一个 ruby​​ 类，其中我需要的所有方法都是类方法，因此我将它们定义为`def self.method_name`，现在所有方法都定义为`self.`是否有任何方法可以避免编写`self.`，并一次性将所有方法声明为类级别.

一种是将它们放在一个模块中并让类扩展它。

还有什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T18:26:32.360

```
class Foo
  class << self
    def class_method_name1
    end

    def class_method_name2
    end
  end

  def instance_method_name1
  end

  def self.class_method_name3
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-11T04:06:34.050

```
class Foo
  def self.bar
    puts 'class method'
  end

  def baz
    puts 'instance method'
  end
end

Foo.bar # => "class method"
Foo.baz # => NoMethodError: undefined method ‘baz’ for Foo:Class

Foo.new.baz # => instance method
Foo.new.bar # => NoMethodError: undefined method ‘bar’ for #<Foo:0x1e820> 
```

# matlab - 使用matlab求和系列

> ID：12875692
> 
> 赞同：6
> 
> 时间：2012-10-13T18:22:09.027
> 
> 标签：matlab, series, symbolic-math

当我在matlab中写这个

```
syms x;
f=x^3-cos(x);
g=diff(f) 
```

它给出的是

> g =
> 
> 3*x^2+sin(x)

现在我想生成总和系列
![http://upload.wikimedia.org/math/e/1/c/e1c5e8954e1e68099d77ac15ffa765a7.png](../Images/eef617e08eb225b84acf42b093018908.png)

我用谷歌搜索并找到了“symsum”命令，但是当我编写以下命令时，它并没有完成我所需的任务

```
syms k
symsum(k^2, 0, 10)
symsum(1/k^2,1,Inf) 
```

它给出的输出为

> 答案 = 385
> 
> 答案 = pi^2/6

你们能指导我如何生成产生输出的系列
![http://upload.wikimedia.org/math/e/1/c/e1c5e8954e1e68099d77ac15ffa765a7.png](../Images/eef617e08eb225b84acf42b093018908.png)

这样当我给出命令时 diff(Sk); 它应该产生类似的结果 ![在此处输入图像描述](../Images/1e212e96930bdbfb1fbf3369eb447207.png)

例如在 Mathematica 我可以这样做

![SummationSeries 带下标](../Images/0436e90b3650afc04ee9272276c6bf84.png)

您的帮助肯定会有很大帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-13T21:38:34.083

我看过 symsum 函数的帮助，你有一个很好的例子，试试这个：

```
syms x;
syms k real;
symsum(x^k/sym('k!'), k, 0, inf) 
```

此命令评估系列![在此处输入图像描述](../Images/575b90fd8868b2b6fd734d184bc1ae2e.png)，实际上评估为![在此处输入图像描述](../Images/b31627788f7f2de8ac4dede344b3a4a2.png)。如您所见，您必须指定系列的术语及其对“k”的依赖性。然后在 symsum 命令中，您必须指定要对从 0 到 inf 的“k”求和。

例如，您可以执行以下操作：

```
syms x;
syms k real;
ak = (-1)^k*x^(2*k+1)/sym('(2*k+1)!');
sum_ak = symsum(ak, k, 0, inf);     % gives back sin(x)
dak = diff(ak,x);
sum_dak = symsum(dak, k, 0, inf);   % should give back cos(x), but does not
A5 = symsum(ak, k, 0, 5);           % add only the first values of the series
DA5 = symsum(dak, k, 0, 5);         % add the derivated terms of the series 
```

您可以声明多个符号变量 uk 并将它们相加：

```
syms x;
syms k real;
n = 5;
for i = 0:n
    eval(['syms u',num2str(i),' real;']);
end

A = cell(1,n);
for i=1:n
    A{i} = u0;
    for j=1:i
        eval(['A{i} = A{i} + u',num2str(j),';']);
    end
end
A{3} % check the value of A{i} 
```

希望这可以帮助，

# appharbor - 我可以在多个应用程序的 appharbor 中共享一个 sql 数据库别名吗？

> ID：12875695
> 
> 赞同：1
> 
> 时间：2012-10-13T18:22:21.657
> 
> 标签：appharbor

我有两个应用程序，它们都部署到appharbor，它们都需要使用相同的sql数据库。

在其中一个中，我只使用数据库别名，appharbor 将连接字符串注入 web.config 的连接字符串部分。我看不到的是如何让 appharbor 将相同的别名（具有相同的连接字符串）注入到我的第二个应用程序中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T20:01:00.157

这不是当前受支持的方案，恐怕您将不得不手动配置辅助应用程序的连接字符串。

# android - Android：admob 的布局和刷新 admob

> ID：12875700
> 
> 赞同：1
> 
> 时间：2012-10-13T18:22:30.893
> 
> 标签：android, layout, refresh, admob

我在从 admob 显示广告的布局上遇到了一些问题。

当应用程序刚启动时，没有广告，一切都很好。布局占据整个屏幕。然后当应用程序可以加载广告（在顶部）时，整个布局将向下移动以显示广告。

如果有广告时整个布局不会向下移动会更好，即如何设置代码以便我可以在横幅位置保留空白背景，这样当没有广告时，它会显示空白背景（和不影响剩余布局），当有广告时，它会替换空白背景的位置，剩余布局仍然固定在原来的位置？

另外，我想问一下代码中的 ads:refreshInterval="15000" 是否意味着在 15 秒内刷新广告？我测试了一下，似乎广告没有按规定刷新？

非常感谢！！

代码如下：

```
<?xml version="1.0" encoding="utf-8"?>
<TableLayout android:id="@+id/tableLayout" 
   android:layout_width="match_parent" 
   android:layout_height="match_parent" 
   android:stretchColumns="*" 
   android:background="@color/light_green"
   android:orientation="vertical" 
   xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"  
   xmlns:android="http://schemas.android.com/apk/res/android">

  <com.google.ads.AdView 
      android:id="@+id/adView"                         
      android:layout_width="wrap_content"                         
      android:layout_height="wrap_content"                         
      ads:adUnitId="123123123"                         
      ads:adSize="BANNER"      
      ads:refreshInterval="15000"                                           
      ads:loadAdOnCreate="true"/>

    <TableRow
        android:id="@+id/tableRow0"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:paddingRight="8dp" >
    ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T17:20:59.023

在您的 AdView 中，您可以设置`android:layout_height="50dp"`使容器即使在广告不存在时也能占用空间。

`ads:refreshInterval`不是有效属性，因此被忽略。刷新率在 AdMob 用户界面中设置，无法在您的应用代码中更改。

# google-apps-script - 如何从独立的 Google Apps 脚本项目中备份代码？

> ID：12875702
> 
> 赞同：1
> 
> 时间：2012-10-13T18:22:46.490
> 
> 标签：google-apps-script

从 Google Apps 脚本项目备份我的代码有哪些选择？

我的意思是，通过一些自动化等将我的整个项目代码保存到另一个地方。

脚本文件不包含在云端硬盘同步中，也无法下载

谢谢，福斯托

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T05:49:47.927

Dan Gottlieb 提供了一种为 GAS 项目使用 Drive Syncing 和替代编辑器的方法[http://gotjs.blogspot.co.nz/2012/08/use-any-editor-with-google-apps-script.html](http://gotjs.blogspot.co.nz/2012/08/use-any-editor-with-google-apps-script.html)

# c++ - 类似于 c++ 的 setTimeout 功能

> ID：12875706
> 
> 赞同：1
> 
> 时间：2012-10-13T18:22:56.370
> 
> 标签：c++, class, timeout

我很想为 c++创建 javascript`setTimeout`和类似的功能（没有提升）。`setInterval`我想要实现的目标：**一个基类，它可以在重复或单次延迟后调用其子类成员变量。**

我已经有一个`update`功能和经过时间的功能。我还找到了如何将成员函数指针传递给基类并使用以下方法触发该函数：

```
class BaseClass {
public:
     template <class object>
     void triggerNow(object *obj, void (object::*func)()) {
          ((obj)->*(func))();
     }

} 

class SubClass : public BaseClass {
public:
    void update() {
         triggerNow(this, &SubClass::worked)
    }
    void worked() {
         cout << "worked!";
    }
} 
```

我目前面临的问题是如何在向量（或其他容器）中存储`object *obj`和。`void (object::*func)()`我只是想出模板...

如何将 的两个模板化参数存储`triggerNow`在向量中？一旦我弄清楚这一点，我就可以创建我的 setTimeout 和 setInterval！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T18:33:31.030

尚未对计时功能发表评论。

但是，由于您使用的是父类和基类，我建议使用多态性，而不是模板成员函数。

```
class BaseClass {
    public:
        virtual void triggerMe() = 0;

 };

class SubClass1 : public BaseClass {
    public:
        virtual void triggerMe()
        {
            //real code, do something
        }

 };

class SubClass2 : public BaseClass {
    public:
        virtual void triggerMe()
        {
            //real code, do something else
        }

 }; 
```

然后你可以有一个`vector`指针`BaseClass`：

```
vector<BaseClass*> objects;

objects.push_back(new SubClass1);
objects.push_back(new SubClass2);

for (auto it = objects.begin(); it != objects.end(); it++)
{
    it->triggerMe();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T18:36:42.507

为了将 object* 和 object::*func 存储在向量中，您可以这样做：

```
struct Callable
{
  virtual ~Callable () {};
  virtual void operator()() = 0;
};

template <class Object>
struct TemplateCallable : public Callable
{
  typedef void (Object::*MemberFunction)();

  TemplateCallable(Object* obj, MemberFunction mem_fun)
     : _object(obj),
       _mem_fun(mem_fun)
  {}

  void operator() ()
  {
    _object->*_mem_fun();
  }

  Object* _obj;
  MemberFunction _mem_fun;
}; 
```

现在您可以将它们作为 Callable 存储在 std::vector 中，因为模板化版本是从 Callable 派生的。如果您将指针存储在 std::vector<> 中，但您需要记住在某些时候删除它们。

所以会得到这样的东西：

```
class TimerSomething
{
   template <class Object>
   void registerCallback (Object* obj, void (Object::*MemFun)())
   {
     _callbacks.push_back(new TemplatedCallback<Object>(obj, mem_fun));
   }

   void triggerAll ()
   {
     for (std::vector<Callable*>::iterator iter = _callbacks.begin();
          iter != _callbacks.end(); ++iter)
     {
       (**iter)();
     }
   }

   std::vector<Callable*> _callbacks;
}; 
```

# r - R中data.frame长度不同的列表列表

> ID：12875716
> 
> 赞同：8
> 
> 时间：2012-10-13T18:24:19.983
> 
> 标签：r, list, dataframe

我在 SO 中阅读了许多关于将列表转换为 df 的答案。但是，我注意到它们的列表长度（在主要的大列表中）都是相同的。我有一个不同的情况：

```
h1 <- list(USA = c(10,13,17,11), RUSSIA = NULL, BRAZIL = NULL,
  CHINA = c(11,11,10,8,12), TAIWAN = c(12,9,9,11,9,12,14), CHILE = NULL) 
```

我想将上面的列表转换`h1`为 data.frame。我的预期输出应该是具有 2 列的 data.frame - country_name，列表。像这样的东西：

```
country_name, list
USA    [10, 13, 17, 11]
RUSSIA NULL
BRAZIL NULL
CHINA  [11, 11, 10, 8, 12]
TAIWAN [12, 9, 9, 11, 9, 12, 14]
CHILE  NULL 
```

我做了以下操作，但是没有用：

```
do.call(rbind, h1) 
```

它试图在所有行中保持列号相同。我不要那个。我想看看如何在这种情况下使用 ldply。任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-13T18:33:16.240

这是一种方法：

```
R> as.data.frame(as.matrix(h1))
                            V1
USA             10, 13, 17, 11
RUSSIA                    NULL
BRAZIL                    NULL
CHINA        11, 11, 10, 8, 12
TAIWAN 12, 9, 9, 11, 9, 12, 14
CHILE                     NULL

R> as.data.frame(as.matrix(h1))['TAIWAN', ]
$TAIWAN
[1] 12  9  9 11  9 12 14 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-13T18:36:54.727

您可以将列表转换为矩阵，其中矩阵的每个元素都是一个列表。

```
d1 <- data.frame(country_name=names(h1), list=matrix(h1)) 
```

也就是说，我建议不要这样做，因为它不符合 R 范式。大多数 R 函数假定矩阵包含来自一种原子类型的元素。

# java - 防止 LAZY 关系异常

> ID：12875717
> 
> 赞同：1
> 
> 时间：2012-10-13T18:24:22.560
> 
> 标签：java, json, struts2

当我尝试使用 JSON-Struts2 插件序列化对象时，我遇到了 JPA 的一个大问题。

我有下一个例外：

> 异常描述：尝试使用具有空会话的间接遍历关系。这通常发生在具有未实例化 LAZY 关系的实体被序列化并且在序列化之后遍历该惰性关系时。为避免此问题，请在序列化之前实例化 LAZY 关系。

这是因为某些参数是列表，而这些列表具有其他列表的对象..

有一种方法可以在不修改对象外观的情况下初始化所有列表？...或其他选项.. 仅使用 JSON 序列化一些参数

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T19:23:17.680

[您可以使用Hibernate.isInitialized](http://docs.jboss.org/hibernate/core/3.6/javadocs/org/hibernate/Hibernate.html#isInitialized%28java.lang.Object%29)和[Hibernate.initialize](http://docs.jboss.org/hibernate/core/3.6/javadocs/org/hibernate/Hibernate.html#initialize%28java.lang.Object%29)检查是否发生了初始化或强制初始化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T20:44:29.060

您可以排除 struts-json-plugin 中的参数。请参阅[http://struts.apache.org/2.x/docs/json-plugin.html#JSONPlugin-Excludingproperties](http://struts.apache.org/2.x/docs/json-plugin.html#JSONPlugin-Excludingproperties)

顺便说一句，如果您要使用 Hibernate#initialize 方法：

> 注意：这只确保代理对象或集合的初始化；不能保证集合内的元素将被初始化/物化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T23:55:46.443

使用字符串列表而不是整个对象解决

# php - MySQL - 两次查询同一张表

> ID：12875718
> 
> 赞同：0
> 
> 时间：2012-10-13T18:24:29.780
> 
> 标签：php, mysql

我有一个完整的查询，但是，我不知道如何在 PHP 中读取结果。

```
SELECT * FROM [...]
LEFT JOIN media ON m_media_id=r_release_media_id
[...]
LEFT JOIN media AS episode_media ON episode_media.m_media_id=ms_media_id 
```

事情是这样的：如您所见，我两次调用“媒体”表。它作为 SQL 查询读起来很棒，但我得到了 media.m_media_id 和 episode_media.m_media_id - 我如何在 PHP 中得到它们？

我这样调用查询，但是 $record-> 部分不起作用，因为点把它弄乱了。我该如何正确地做到这一点？

```
$result = mysql_query($sql); 
while ($record = mysql_fetch_object($result)) {
    $1 = $record->media.m_media_id 
    $2 = $record->episode_media.m_media_id
} 
```

我已经搜索找到答案，但我只能找到 MySQL 查询，而不是 PHP 部分。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T18:29:22.543

您应该使用别名。

我建议这样查询：

```
SELECT media.m_media_id as name1, episode_media.m_media_id as name2.... 
```

然后你应该可以称它们为：

```
$name1 = $record->name1
$name2 = $record->name2 
```

# javascript - 如何制作侧边栏滑块？

> ID：12875720
> 
> 赞同：0
> 
> 时间：2012-10-13T18:24:44.850
> 
> 标签：javascript, wordpress, slider, sidebar

我在一个网站上发现了我认为所谓的侧边栏滑块：http: [//www.bobbyberkhome.com/home](http://www.bobbyberkhome.com/home) （左边是橙色的 5% 折扣）

我想复制这个或使用一些接近的东西。我尝试查看源代码，发现它是 javascript。我寻找了一些 Word Press 插件，但似乎每次我搜索“滑块”这个词时，它都会显示实际的幻灯片。这是错误的术语吗？

最后，有人能告诉我你是如何研究和确定网站使用哪种插件的吗？

我认为“查看源”是最好的选择，但我还是有点迷茫。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T20:47:40.103

我将其称为幻灯片选项卡 - 这是一个博客文章的链接，用于执行类似功能的 jQuery 插件；

[http://wpaoli.building58.com/2009/09/jquery-tab-slide-out-plugin/](http://wpaoli.building58.com/2009/09/jquery-tab-slide-out-plugin/)

它已经有几年历史了，但它仍然被用来做这个。老实说，我建议不要这样做，特别是如果您打算在其中放入联系表。去年我为一个潜在客户生成机构做了很多工作，我们建立了大量的 Wordpress 网站，主要目标是通过联系表格进行查询。在每一页上都有表格很重要，因此使用了这些幻灯片选项卡。

我们最终取消了滑动选项卡 - 转换率绝对没有希望，无论我们在设计方面如何处理滑动选项卡中包含的表单，都没有人填写。

您问题的第二部分 - 取决于您是指 Wordpress 插件还是 jQuery 插件。

您无法浏览网站中正在使用的 Wordpress 插件，您所能做的就是从它们生成的标记中识别它们并且您从经验中获得。不过，您的示例不太可能是 WP 插件，只是包含的 JS 文件和模板中的相关标记。你可以看到，Javascript 在客户端工作，所以除非它全部被缩小以使事情变得更难，你可以通过 Chrome 或 Firefox（甚至 IE，啊！！）中的开发者控制台查看包含的 Javascript。

大多数情况下，在包含的各种 jQuery 插件脚本的开头都会有注释，解释它们的作用和编写者

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T18:44:02.523

@http://www.bobbyberkhome.com/home

如果您谈论更改内容的矩形，您可以将其称为滑块。

如果您指的是左侧的分区，您可以单击它，它会滑出。它可能是用 jQuery 编写的。jquery 在他们的库中提供了一个动画效果，可以制作“幻灯片”效果。 [http://api.jquery.com/animate/](http://api.jquery.com/animate/)

如果我误解了什么，请纠正我。

我认为没有任何网站可以找到不同网站使用的插件。我使用视图源，但动态内容并不总是那么容易。

# java - 如何使用依赖项安装 Eclipse 插件（自行开发）？

> ID：12875722
> 
> 赞同：1
> 
> 时间：2012-10-13T18:24:58.987
> 
> 标签：java, eclipse, eclipse-plugin

我能够以多种不同的方式部署 eclipse 插件。例如 jar 或更新站点。但是我完全看不到如何包含依赖项。我可以在 feature.xml 中声明它们（在依赖项选项卡下）。但是，当我将其导出为可部署的 p2 站点时，找不到任何依赖项。依赖项是我碰巧在**我的**机器/eclipse 文件夹中拥有的其他插件。因此，该插件从我的工作区运行，但是由于缺少依赖项，我完全无法将其部署到其他 Eclipse 安装。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T06:44:56.093

P2 更新管理器必须知道依赖项的更新站点。然后它将修改用户对您的功能的安装请求，以包括这些依赖项。[这个答案](https://stackoverflow.com/questions/8254116/adding-update-site-urls-to-find-third-party-dependencies-during-install)建议手动修改生成的 context.xml，这听起来很合理。

一个（不是真的推荐）替代方案也可能是镜像更新站点上的依赖项（使用 P2 镜像任务）。在初始安装期间，P2 可以使用您自己的更新站点中的镜像功能，然后它可以更新到原始站点上的最新版本（假设这些依赖项使他们自己的更新站点已知，每个好的插件都会这样做）。

# php - vBulletin 等脚本如何在不使用 cron 作业的情况下启动定期维护作业？

> ID：12875724
> 
> 赞同：0
> 
> 时间：2012-10-13T18:25:25.553
> 
> 标签：php, mysql, cron, crontab, maintenance

vBulletin 等脚本如何在没有 cron 作业的情况下启动常规维护作业？例如，vBulletin 不会实时更新线程视图计数，并且根据其文档仅每小时更新一次。但是，他们不使用 cron 作业来做到这一点，那么他们是如何做到的呢？

我问是因为我想在我的一个网站上做类似的事情，但不知道他们是如何做到这一点的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T18:30:30.237

我相信他们使用页面加载和时间戳。换句话说，每次您的论坛收到页面浏览量时，它都会检查当前时间与下一个计划作业的时间。如果当前时间是`>=`计划时间，则作业将运行。

当然，这样做的缺点是，如果您的论坛没有获得很多页面浏览量，您就不能保证工作会在特定时间运行。准确性与您论坛上的活动直接相关。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T18:50:42.037

@Mitzimoto 是正确的。[https://www.vbulletin.com/docs/html/scheduled_tasks_intro](https://www.vbulletin.com/docs/html/scheduled_tasks_intro)

> vBulletin 的计划任务系统不会像 Windows® 中的 cron 和计划任务那样一直在服务器上运行。当用户浏览您的看板时，任务会自动运行，因此如果您的看板在给定时间没有任何流量，则计划运行的任务将在稍后运行。vBulletin 的计划任务在您关闭时也不会运行。

# git - 防止主页成为目录

> ID：12875730
> 
> 赞同：0
> 
> 时间：2012-10-13T18:25:56.010
> 
> 标签：git, hosting, webpage

这是我第一次将文件推送到托管服务并创建网站。我有一组文件夹和一个我想要作为主页的 php 文件。我对 git 比较陌生。我能够将文件推送并提交到 Pagoda 服务器并使网页正常工作。问题是，当我转到该页面时，会显示一个目录，其中显示了我的所有文件。我是否需要使用 htaccess 将 php 文件按顺序显示在页面上而不是目录上，还是通过 git 执行此操作。我真的不确定该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T18:33:37.447

您的文件中应该有 index.php/index.html 以防止看到所有文件。

# database - VB.NET - 我不插入数据库

> ID：12875731
> 
> 赞同：1
> 
> 时间：2012-10-13T18:26:20.367
> 
> 标签：database, vb.net, insert

我尝试 LINQ VB.NET 但它的工作不插入数据库

这一行“.CommandText = sqlAdd”

消息错误**对象引用未设置为对象的实例。**

```
Imports System
Imports System.Configuration
Imports System.Globalization
Imports System.Data
Imports System.Data.SqlClient
Imports System.Text

Public Class _1_1Invoice
    Dim db As New assetDataContext()
    Dim Conn As SqlConnection
    Dim cmd As SqlCommand
    Dim tr As SqlTransaction
    Dim sb As New StringBuilder()

Private Sub btSave_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btSave.Click

        If MessageBox.Show("Do you want insert invoice?", "Message", MessageBoxButtons.YesNo, MessageBoxIcon.Question) = Windows.Forms.DialogResult.Yes Then
            tr = Conn.BeginTransaction()

            sb.Remove(0, sb.Length)
            sb.Append("INSERT INTO tbl_AsInvoice (Poid)")
            sb.Append(" VALUES (@Poid)")
            Dim sqlAdd As String = sb.ToString()

            With cmd
                .CommandText = sqlAdd
                .CommandType = CommandType.Text
                .Connection = Conn
                .Transaction = tr
                .Parameters.Clear()
                .Parameters.Add("@Poid", SqlDbType.VarChar).Value = txtPoid.Text.Trim()
                .ExecuteNonQuery()
            End With
            tr.Commit()
            MessageBox.Show("Succesfull", "Done", MessageBoxButtons.OK, MessageBoxIcon.Exclamation)
        End If 
```

谢谢你的时间:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T18:33:13.417

`cmd`没什么。你需要初始化它：

```
cmd = New SqlCommand() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T18:34:39.917

您没有初始化`cmd`因此它是`Nothing`并且它的属性不能被访问。您必须创建一个新的`SqlCommand`并将其分配给`cmd`：

```
cmd = New SqlCommand()
With cmd
    ...
End With 
```

# php - php代码第14行未定义索引

> ID：12875733
> 
> 赞同：2
> 
> 时间：2012-10-13T18:26:28.273
> 
> 标签：php, html, mysql

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T18:32:02.397

由于以下行，您收到错误

```
$UpdateQuery = "UPDATE course SET cours_num='$_POST[coursnum]', 
cours_title='$_POST[courstitle]', cours_desc='$_POST[coursdesc]' WHERE 
cours_num='$_POST[hidden]'"; 
```

您可以使用

```
$UpdateQuery = sprintf("UPDATE course SET cours_num='%d' , 
                cours_title='%s', 
                cours_desc='%s',
                WHERE  cours_num = '%d'", mysql_real_escape_string($_POST['coursnum']), mysql_real_escape_string($_POST['courstitle']), mysql_real_escape_string($_POST['coursdesc']), mysql_real_escape_string($_POST['hidden'])); 
```

您还应该确保始终设置变量

例子

```
$_POST['coursnum'] = isset($_POST['coursnum']) ? $_POST['coursnum'] : null ; 
```

# javascript - 获取 RSS Feed Enclosure 标签的 URL

> ID：12875734
> 
> 赞同：0
> 
> 时间：2012-10-13T18:26:30.110
> 
> 标签：javascript, jquery, rss, jfeed

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T18:31:12.827

发布 xml 后的修订答案：

`url`是`enclosure`标签的一个属性

利用：

```
var url =  $(item).find("enclosure").attr('url') 
```

演示：http: [//jsfiddle.net/AV4ms/](http://jsfiddle.net/AV4ms/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-10T22:47:57.130

If your xml feed tag is of the type like this

```
<link rel="enclosure" type="image/jpeg" length="2893" href="http://imgs.server.com/2010/06/imagethumb.jpg"/> 
```

then you should use the Selector lk

```
var img = $(this).find('link[rel|="enclosure"]').attr('href'); 
```

in your code

[Attribute Contains Prefix Selector](http://api.jquery.com/attribute-contains-prefix-selector/)

# java - 如何使用 Java 解析来自 html 的链接？

> ID：12875737
> 
> 赞同：1
> 
> 时间：2012-10-13T18:27:13.093
> 
> 标签：java, parsing

我是一个 Java 新手。对于我的课程，我们必须打印出所有要从用户输入的 html 源代码中解析的链接。

基本上，我想弄清楚如何获取 href 属性之后的链接字符串并对网页上的所有链接执行此操作，而不使用外部方法（即使用数组、子字符串和字符串方法但不导入其他图书馆）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-13T18:38:19.483

不要使用 Parser 或 RegExp。试试[杰瑞](http://jodd.org/doc/jerry/index.html)。喜欢（未测试）：

```
Jerry doc = jerry(html);
doc.$("a").each(new JerryFunction() {
    public boolean onNode(Jerry $this, int index) {
        String href = $this.attr("href");
        System.out.println(href);
    }
} 
```

或任何对 html 友好的查询语言。由于非外部要求尝试[尝试使用 Java 解析 HTML 目录列表中的链接](https://stackoverflow.com/a/5876127/926620)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T20:26:19.553

我不知道你在哪个班级，所以正则表达式解决方案*可能*对你来说太高级了。
例如，如果您是第一年，*可能*就是这种情况，但我无法确定。

您可以使用子字符串或数组来做到这一点，但那是太多的编码。这就是[标准 Java 正则表达式](http://docs.oracle.com/javase/tutorial/essential/regex/)存在的原因：

```
String A_TAG_MATCHING_GROUP = "<a>([^<>]*)</a>";

Matcher matcher = Pattern.compile(A_TAG_MATCHING_GROUP).matcher("<html>\n<head>d\nadas</head><body><a>LINK_DESC_ONE</a>dsdasd<a>LINK_DESC_2</a></body></html>");
String url, linkDescription;
while (matcher.find()) {
        System.out.println(matcher.group(1));
} 
```

***编译并运行这段代码，然后继续阅读！***

关键部分是 A_TAG_MATCHING_GROUP 正则表达式。就像现在一样，它将匹配一个精确的字符串“<a>”，后跟：

*   没有或*任意数量*的字符（如*星*号- * 所示）
*   *如上所述*的字符被定义为任何*不是*（用*插入符号表示 - ^）“<”或“>”的字符（**方括号*内的确切术语- [] 是*字符类*）

所以，如果你写得好 A_TAG_MATCHING_GROUP 正则表达式，用

```
matcher.group(i); 
```

你会得到网址。因为它是给你的课的，所以我不会为你写它:) 修改 matcher 参数并播放一点（更改硬编码的 html 字符串）。获取一些真正的 html 并将您的输出与像这样的真实工具的输出进行[比较](http://www.webmaster-toolkit.com/link-extractor.shtml)。

当然，您必须先阅读给定的教程（[这](http://www.regular-expressions.info/java.html)也可能有用），这里是相关的 API 链接：

*   [匹配器](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Matcher.html)
*   [图案](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html)
*   [模式.compile()](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html#compile%28java.lang.String%29)
*   [模式匹配器（）](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html#matcher%28java.lang.CharSequence%29)
*   [matcher.find()](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Matcher.html#find%28%29)
*   [matcher.group()](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Matcher.html#group%28int%29)

但是，如果您想使用“数组和子字符串”，您可以使用以下算法：

1.  读取每个字符的 html 字符，例如

    字符串 html ; for (字符 c : s.toCharArray()) { //
    }

2.  当您到达“<”时请记住它（例如在布尔变量 first_char_of_a_tag_found 中）

3.  决定您是否立即希望它后跟“a”字符，或者您将允许换行符和空格。当您检测到“a”时，请在布尔变量中记住它。

4.  当您到达“ href=" ”时开始记住内容 - 可能会使用 [substring()](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#substring( int, int)) 存在于 html 字符串中，并将其返回值存储在名为 url的[StringBuilder变量中。](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/StringBuilder.html)

这是一个非常低级的算法，但它会完成这项工作。它需要大量编码，并且是一种[单一](http://sawaal.ibibo.com/computers-and-technology/what-monolithic-programming-279769.html)的、[程序](http://en.wikipedia.org/wiki/Procedural_programming)化的方法。

基本上，你会说你将实现一个正则表达式“引擎”——我在文章的第一部分中描述的那个。

我将它们都编程为作业（第一个用于 Java 工作面试，第二个用于 C 语言作为 Java 学院的入学考试），但尽管采用通常的学习方法（第二个首先），我还是推荐首先是第一个 - 但这取决于您的日程安排是否紧迫以及您目前的知识是什么。

希望能帮助到你 ：）

编辑：

您*无法*使用正则表达式解析*HTML ，但您**可以*使用它们从标签中解析出*url*。不过不要混淆，我肯定会像安东建议的那样选择杰瑞。

您可以看到 Jerry 之类的解决方案在现实生活中要好得多，只需观察他和我的帖子的大小以及处理它所需的时间，对于初学者来说 :))

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T20:38:20.057

您可能需要考虑其中一些[想法](https://stackoverflow.com/questions/5120171/extract-links-from-a-web-page "想法")

# java - Flex：HTTPService 错误 #2032 每次

> ID：12875742
> 
> 赞同：-1
> 
> 时间：2012-10-13T18:27:35.010
> 
> 标签：java, apache-flex, flex4, flash-builder

我读过这个： [Flex：HTTP 请求错误 #2032](https://stackoverflow.com/questions/1491902/flex-http-request-error-2032)

而这个： [http ://www.judahfrangipane.com/blog/2007/02/15/error-2032-stream-error/](http://www.judahfrangipane.com/blog/2007/02/15/error-2032-stream-error/)

试图弄清楚发生了什么，到目前为止我失败了很多......

我什至不能使用带有 HTTPService 组件的最简单的 servlet，它们都失败了，我不知道为什么。

也尝试过发布和获取。

HTTP 请求错误

```
Error: [IOErrorEvent type="ioError" bubbles=false cancelable=false eventPhase=2 text="Error #2032: Error de secuencia. URL: http://localhost:8080/root/test"]. URL: http://localhost:8080/root/test 
```

柔性：

```
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx"
               minWidth="955" minHeight="600">
        <fx:Declarations>
            <s:HTTPService
                id="httpSerciseTest"
                url="/root/test"
                method="GET"
                resultFormat="e4x"
                useProxy="false"
                result="resultHandler(event)"
                fault="Alert.show(event.fault.faultString+
                '\n' + event.fault.faultDetail,
                'Error: '+event.fault.faultCode)"/>
        </fx:Declarations>
        <fx:Script>
            <![CDATA[
                import mx.controls.Alert;
                import mx.rpc.events.FaultEvent;
                import mx.rpc.events.ResultEvent;

                [Bindable]private var xmlResult:XML;
                private function creationCompleteHandler():void
                {
                    httpSerciseTest.send();
                }
                private function resultHandler(event:ResultEvent):void
                {
                    xmlResult=event.result as XML;
                }
            ]]>
        </fx:Script>
</s:Application> 
```

Java 小服务程序：

```
public class Test extends HttpServlet {
    private static final long serialVersionUID = 4484874511692568559L;
    private static final String CONTENT_TYPE = "text/xml; charset=utf-8";
    protected void doGet(HttpServletRequest request, HttpServletResponse response)throws IOException
    {
        response.setContentType(CONTENT_TYPE);
        try{
            PrintWriter writer=response.getWriter();
            writer.println("<?xml version=\"1.0\"?>\n");
            writer.println("<root>");
            writer.println("<folder label=\"Repository\"/>");
            writer.println("<folder label=\"Documentation\"/>");
            writer.println("</root>");
        }catch (IOException IOE){
            throw IOE;
        }
    }
} 
```

web.xml

```
<servlet>
        <servlet-name>test</servlet-name>
        <display-name>test</display-name>
        <servlet-class>java_servlets.Test</servlet-class>
    </servlet>
<servlet-mapping>
        <servlet-name>test</servlet-name>
        <url-pattern>/test</url-pattern>
    </servlet-mapping> 
```

另外，我使用文件引用上传和下载带有 servlet 的文件，它们工作正常，但如果我用 HTTPService 调用相同的 servlet，它们也会失败......

编辑： localhost:8080/root/test 显示 HTTP 状态 404 页面。

第二次编辑：我将这个测试示例中的 doGet 复制粘贴到我的文件上传 servlet 及其工作中，HTTPService 可以从那里使用它，但不能从我创建的新服务中使用它，包括这个测试......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T16:53:35.760

好的，我得到了它的工作，发生了两件事：

1.- 你不能在没有任何参数的情况下使用 servlet 的 Post 方法，我确实将 method="POST" 更改为 method="GET"，如示例所示，但有时我很难使用 eclipse 重新编译我的 java 源文件夹上的更改，我通常必须清理并重新启动 JBoss 以完全部署新的更改。

2.- 正如 shaunhusain 建议的那样，我尝试了 url localhost:8080/root/test 期望看到 xml，但我得到了 404，所以 servlet 甚至一开始都不可用，到目前为止，我仍然无法获得测试servlet 可用，但我得到了需要的工作，我仍然不知道战争的哪一部分是针对已编译的 servlet，或者如何确保它们被部署。

Imma 试图弄清楚 java servlet 如何被 ecplise 识别然后我自己部署，但如果有人好心解释这个过程或提供一个好的来源，我会将其标记为正确答案，因为这是我的主要原因问题。

编辑：还有一件事，故障事件没有得到我抛出的异常，当 doPost 或 doGet 函数发生故障时，我收到 HTTP 请求错误 #2032 而不是真正的错误消息。

编辑：找到了！结果发现 eclipse 随机无法发布完整的更改，并且一些 servlet 永远不会发布。到目前为止，这是我发现让它工作的唯一可靠方法：

从服务器视图中删除服务器，转到“workspace.metadata.plugins\org.eclipse.wst.server.core\publish”，删除所有 publish.xml 文件，然后重新启动 eclipse。

[http://www.eclipsezone.com/eclipse/forums/t88527.html](http://www.eclipsezone.com/eclipse/forums/t88527.html)

messagebroekr/amf 也经常发生这种情况。

# ruby-on-rails - Heroku 安装 sqlite3，即使它不是依赖项

> ID：12875743
> 
> 赞同：3
> 
> 时间：2012-10-13T18:27:48.723
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku, sqlite

我正在尝试将我的应用程序部署到 Heroku，但它不断被以下输出拒绝。

```
waitup$git push staging master
Counting objects: 4184, done.
Delta compression using up to 4 threads.
Compressing objects: 100% (1033/1033), done.
Writing objects: 100% (4184/4184), 1.11 MiB | 494 KiB/s, done.
Total 4184 (delta 3069), reused 4184 (delta 3069)

-----> Heroku receiving push
-----> Ruby/Rails app detected
-----> Installing dependencies using Bundler version 1.2.1
       Running: bundle install --without development:test --path vendor/bundle --binstubs bin/ --deployment
       Fetching gem metadata from http://rubygems.org/.......
       Fetching https://github.com/stripe/stripe-ruby
       Installing rake (0.8.7)
       Installing abstract (1.0.0)
       Installing activesupport (3.0.4)
       Installing builder (2.1.2)
       Installing i18n (0.5.0)
       Installing activemodel (3.0.4)
       Installing erubis (2.6.6)
       Installing rack (1.2.2)
       Installing rack-mount (0.6.14)
       Installing rack-test (0.5.7)
       Installing tzinfo (0.3.27)
       Installing actionpack (3.0.4)
       Installing mime-types (1.16)
       Installing polyglot (0.3.1)
       Installing treetop (1.4.9)
       Installing mail (2.2.19)
       Installing actionmailer (3.0.4)
       Installing bcrypt-ruby (2.1.4) with native extensions
       Installing orm_adapter (0.0.5)
       Installing warden (1.0.4)
       Installing devise (1.3.4)
       Installing formtastic (1.2.3)
       Installing has_scope (0.5.0)
       Installing responders (0.6.4)
       Installing inherited_resources (1.2.2)
       Installing will_paginate (3.0.pre2)
       Installing inherited_views (0.0.2)
       Installing arel (2.0.9)
       Installing activerecord (3.0.4)
       Installing meta_search (1.0.5)
       Installing activeresource (3.0.4)
       Using bundler (1.2.1)
       Installing thor (0.14.6)
       Installing railties (3.0.4)
       Installing rails (3.0.4)
       Installing sass (3.1.2)
       Installing activeadmin (0.2.2)
       Installing addressable (2.2.6)
       Installing authlogic (2.1.6)
       Installing celerity (0.8.8)
       Installing culerity (0.2.15)
       Installing nokogiri (1.4.4) with native extensions
       Installing ffi (0.6.3) with native extensions
       Installing childprocess (0.1.7)
       Installing json_pure (1.5.1)
       Installing rubyzip (0.9.4)
       Installing selenium-webdriver (0.1.3)
       Installing xpath (0.1.3)
       Installing capybara (0.4.1.2)
       Installing configuration (1.2.0)
       Installing cookiejar (0.3.0)
       Installing diff-lcs (1.1.2)
       Installing json (1.5.1) with native extensions
       Installing gherkin (2.3.7) with native extensions
       Installing term-ansicolor (1.0.5)
       Installing cucumber (0.10.2)
       Installing cucumber-rails (0.3.1)
       Installing daemons (1.1.6)
       Installing database_cleaner (0.6.4)
       Installing hiredis (0.3.2) with native extensions
       Installing em-hiredis (0.1.0)
       Installing escape_utils (0.2.4) with native extensions
       Installing eventmachine (0.12.10) with native extensions
       Installing em-http-request (0.3.0) with native extensions
       Installing thin (1.3.1) with native extensions
       Installing faye (0.7.1)
       Installing launchy (0.4.0)
       Installing rest-client (1.6.3)
       Installing heroku (2.2.8)
       Installing jquery-rails (1.0.7)
       Installing jwt (0.1.3)
       Installing multi_json (1.0.3)
       Installing mysql2 (0.2.7) with native extensions
       Installing rspec-core (2.5.1)
       Installing rspec-expectations (2.5.0)
       Installing rspec-mocks (2.5.0)
       Installing rspec (2.5.0)
       Installing rspec-rails (2.5.0)
       Installing seed-fu (2.0.1)
       Installing sequel (3.20.0)
       Installing sinatra (1.0)
       Installing spork (0.8.4) with native extensions
       Installing sqlite3 (1.3.4) with native extensions
       Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.
       /usr/local/bin/ruby extconf.rb
       checking for sqlite3.h... no
       sqlite3.h is missing. Try 'port install sqlite3 +universal'
       or 'yum install sqlite3-devel' and check your shared library search path (the
       location where your sqlite3 shared library is located).
       *** extconf.rb failed ***
       Could not create Makefile due to some reason, probably lack of
       necessary libraries and/or headers.  Check the mkmf.log file for more
       details.  You may need configuration options.
       Provided configuration options:
       --with-opt-dir
       --without-opt-dir
       --with-opt-include
       --without-opt-include=${opt-dir}/include
       --with-opt-lib
       --without-opt-lib=${opt-dir}/lib
       --with-make-prog
       --without-make-prog
       --srcdir=.
       --curdir
       --ruby=/usr/local/bin/ruby
       --with-sqlite3-dir
       --without-sqlite3-dir
       --with-sqlite3-include
       --without-sqlite3-include=${sqlite3-dir}/include
       --with-sqlite3-lib
       --without-sqlite3-lib=${sqlite3-dir}/lib
       --enable-local
       --disable-local
       Gem files will remain installed in /tmp/build_qlnbqtp08z3t/vendor/bundle/ruby/1.9.1/gems/sqlite3-1.3.4 for inspection.
       Results logged to /tmp/build_qlnbqtp08z3t/vendor/bundle/ruby/1.9.1/gems/sqlite3-1.3.4/ext/sqlite3/gem_make.out
       An error occurred while installing sqlite3 (1.3.4), and Bundler cannot continue.
       Make sure that `gem install sqlite3 -v '1.3.4'` succeeds before bundling.
 !
 !     Failed to install gems via Bundler.
 !     
 !     Detected sqlite3 gem which is not supported on Heroku.
 !     http://devcenter.heroku.com/articles/how-do-i-use-sqlite3-for-development
 !
 !     Heroku push rejected, failed to compile Ruby/rails app

To git@heroku.com:waiterd2-staging.git
 ! [remote rejected] master -> master (pre-receive hook declined)
error: failed to push some refs to 'git@heroku.com:waiterd2-staging.git' 
```

显然， sqlite3 gem 是这里的问题。奇怪的是，它没有作为依赖项包含在我的 Gemfile 或 Gemfile.lock 中。

我的 gemfile 看起来像这样：

```
source 'http://rubygems.org'

gem 'rails', '3.1.0'

gem 'pg'
gem 'thin'
gem 'authlogic', '3.1.3'
gem 'twilio-ruby'
gem 'heroku'
gem 'activeadmin', :git => 'https://github.com/gregbell/active_admin.git'
gem 'stripe', :git => 'https://github.com/stripe/stripe-ruby'
gem 'faye'

group :assets do
    gem 'less'
    gem 'bourbon'
    gem 'therubyracer'
    gem 'sass-rails'
    gem 'coffee-rails'
    gem 'uglifier'
end 
```

这里有几件事很突出。Heroku 安装的 authlogic gem 不是 Gemfile 中指定的。我怀疑 authlogic gem 的唯一原因是因为它将 sqlite3 列为开发依赖项。不过这应该没关系。

当我在本地机器上运行 Heroku 输出中列出的确切命令时，没有安装 sqlite3 gem。

我尝试了许多在 StackOverflow 和其他地方找到的建议，例如删除 Gemfile.lock 文件并再次运行捆绑程序。这些都没有奏效。Heroku 仍然安装了错误版本的 authlogic 并尝试安装 sqlite3。

如何让 Heroku 停止尝试安装 sqlite3 gem？

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T17:41:07.230

问题变得非常简单。我将错误的分支推送到 Heroku，所以我解决问题的尝试显然是无效的。

# java - 如何获得单独的颜色分量java？

> ID：12875747
> 
> 赞同：0
> 
> 时间：2012-10-13T18:28:07.317
> 
> 标签：java, colors, rgb

假设我有 int 颜色...我如何找到每个红色、绿色和蓝色分量？

到目前为止，我有这段代码：-

```
int red = rgb & 0xFF0000;

int green = rgb & 0x00FF00;

int blue = rgb & 0x0000FF; 
```

我被这个困住了。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T18:34:38.937

创建类的对象`Color`来存储您的颜色，并且该类提供诸如 `getBlue() , getRed() , getGreen()`检索相应组件的方法

该类提供了一个构造函数，该构造函数将颜色作为`int`，使用它，然后使用上述方法。

参考这里了解详情

[颜色接口](http://docs.oracle.com/javase/1.3/docs/api/java/awt/Color.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T18:33:27.503

```
int red = (rgb >> 16) & 0xFF;

int green = (rgb >> 8) & 0xFF;

int blue = rgb & 0xFF; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T18:42:17.093

设 color(int rgb) 整数参数的前 8 位被忽略，而后 24 位定义颜色——8 位用于红色，8 位用于绿色，最后 8 位用于蓝色。例如：颜色位模式为 00000000000000001111111100000000。表示纯绿色。 [http://cs.roanoke.edu/~cpsc/Fall2011/CPSC120A/lab4/lab4in.html](http://cs.roanoke.edu/~cpsc/Fall2011/CPSC120A/lab4/lab4in.html)

# iphone - 将 NSManagedObjects 数组传递给新视图

> ID：12875749
> 
> 赞同：0
> 
> 时间：2012-10-13T18:28:29.530
> 
> 标签：iphone, core-data

我正在努力弄清楚如何获取 NSManagedObjects 列表，然后将它们传递给另一个视图。

这是我的收获

```
+ (NSArray *)fetchListOfParentSectors;
{
    NSFetchRequest *fetchRequest = [NSFetchRequest fetchRequestWithEntityName:@"Sector"];
    [fetchRequest setPredicate:[NSPredicate predicateWithFormat:@"parent_id = -1"]];

    NSManagedObjectContext *moc = [[NSManagedObjectContext alloc] init];
    [moc setPersistentStoreCoordinator: [[JobDataModel sharedDataModel] persistentStoreCoordinator]];

    NSError *error = nil;
    NSArray *results = [moc executeFetchRequest:fetchRequest error:&error];
    if (error) {
        NSLog(@"ERROR: %@ %@", [error localizedDescription], [error userInfo]);
        exit(1);
    }

    return results;
} 
```

如果我在此处放置一个循环以在此处记录扇区名称，则它可以完美运行。

现在在我的视图控制器中，我有这个：

```
NSArray *objectArray = [FetchSectors fetchListOfParentSectors];
for (int i = 0; i < objectArray.count; i++) {
    Sector *sector = (Sector *)[objectArray objectAtIndex: i];
    NSLog(@"name = %@", sector.name);
}
NSLog(@"objects = %@", objectArray); 
```

名称返回的日志结果 (null)。我知道数组不是空的，因为返回了正确数量的对象，并且日志显示了一堆对象，如下所示：

`"<Sector: 0xac91020> (entity: Sector; id: 0xac8e900 <x-coredata://19C94F15-0A5B-4A40-8E68-17FE6C4950F8/Sector/p4> ; data: <fault>)"`

必须有一些简单的东西我在这里忽略..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T21:47:20.410

核心数据对象只能存在于托管对象上下文中。您在本地创建一个 MOC `fetchListOfParentSectors`，但是（假设您使用 ARC 编译）此 MOC 在函数结束时自动释放。因此，当您访问对象的属性`section.name`时，MOC 不再存在。

在这种情况下，我会预料到一些运行时异常，但实际上属性的访问器只返回`nil`（我已经用一个小测试程序验证了这一点。）

因此，在`fetchListOfParentSectors`. 您应该使用全局 MOC，或者在视图控制器中创建一个，并将其作为参数传递给您的 fetch 函数。

# javascript - 使用 node.js 嵌套模块

> ID：12875750
> 
> 赞同：3
> 
> 时间：2012-10-13T18:28:47.870
> 
> 标签：javascript, node.js, express

我有一个名为 UserProvider 的模块，看起来像这样

```
var UserProvider = function(db) { ... }
UserProvider.prototype.createUser = function(email, password, callback) { ... }
UserProvider.prototype.findUserByEmail = function(email, callback) { ... }
...
exports.UserProvider = UserProvider; 
```

另一个名为 ModelProvider 的模块看起来像这样

```
var UserProvider = require('./user').UserProvider;
var ModelProvider = function() {
    ...
    this.User = new UserProvider(db);
}
exports.ModelProvider = ModelProvider; 
```

但是该行`this.User = new UserProvider(db);`不允许我访问`UserProvider`包含该`ModelProvider`模块的主模块中的对象。

当我尝试调用它时：

```
var ModelProvider = require('./model/model').ModelProvider;
var Model = new ModelProvider();

Model.User.findUserByEmail(email, function() {...}); 
```

它给出了以下错误：

```
TypeError: Object function Model(doc, fields, skipId) {
    if (!(this instanceof Model))
        return new Model(doc, fields, skipId);
    model.call(this, doc, fields, skipId);
} has no method 'findUserByEmail' 
```

我假设我缺少一些 JavaScript 技巧来公开它？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T19:34:51.257

在这种情况下似乎正在发生的事情，并且您的错误的原因是它`Model.User`实际上不是一个实例，`UserProvider`但似乎指向一个称为`Model`定义为...的函数

```
function Model(doc, fields, skipId) {
    if(!(this instanceof Model))
        return new Model(doc, fields, skipId);
    model.call(this, doc, fields, skipId);
} 
```

现在这个分配可能发生在你的代码中的三个地方......

```
var Model = new ModelProvider();
// Here sets Model.User
Model.User.findUserByEmail(...); 
```

或者...

```
function ModelProvider() {
    ...
    this.User = new UserProvider(db);
    // Here sets this.User
} 
```

或者...

```
function UserProvider(db) {
    // Here as a return statement
} 
```

我猜后者可能是问题发生的地方。

* * *

需要明确的是，NodeJS 中可以实现以下所有功能......

**从不一定包含它的模块导入构造函数...**要明确，您*不应该这样*做，但可以链接导出，以便模块从它导入的其他模块公开项目。您*应该*显式导入模块。

模块.js...

```
var Something = require("./something").Something;
exports.Something; 
```

主.js...

```
var Something = require("./module").Something; 
```

**重复**不*要这样做*。*而是从拥有*它的模块中包含您需要的内容，并且不要导出该模块不拥有的任何内容。我只包含这个示例来阐明 export 和 require 可以做什么。

* * *

**访问在另一个模块中创建的实例...**您可以像构造构造函数一样通过导出对象导出实例。

模块.js...

```
function MySomething() {
    //...
}
exports.mySomething = new MySomething(); 
```

主.js...

```
var mySomething = require("./module").mySomething; 
```

* * *

**通过导入的构造函数的实例，访问它也导入的构造函数的实例......**您可以通过`this`范围公开它，在这种情况下，它将可以通过您创建的实例的公共成员访问您导入的构造函数.

模块.js...

```
var Something = require("./something").Something;
function MySomething() {
    this.something = new Something();
}
exports.MySomething = MySomething; 
```

主.js...

```
var MySomething = require("./module").MySomething;
var mySomething = new MySomething();
mySomething.something; 
```

# html - 将字母放在一起/将字母放在容器中？

> ID：12875752
> 
> 赞同：0
> 
> 时间：2012-10-13T18:28:53.750
> 
> 标签：html, css, position, center

我需要在链接中显示一个字母而不是另一个字母，并希望它们居中。我试过 postion: relative 和 absolute，但不可能使字母居中。

有任何想法吗？我希望它们完全重叠，不要问我为什么:)

这是代码：

```
<a href="#">
    <span>O</span>
    <span>B</span>
</a> 
```

我只知道父链接的宽度，但不知道给定字母的宽度是多少。

这是播放宽度的代码：

[http://jsfiddle.net/ZYhzJ/](http://jsfiddle.net/ZYhzJ/)

**编辑**

这是它应该是什么样子的示例（它没有居中，如果我不知道这些跨度的宽度，我不能使用负边距）：

[http://jsfiddle.net/ZYhzJ/2/](http://jsfiddle.net/ZYhzJ/2/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T18:33:03.580

[http://jsfiddle.net/d7Qhq/1/](http://jsfiddle.net/d7Qhq/1/)

```
a {
    text-align: center;
    display: block;
    background-color: red;
    line-height: 50px;
    width: 50px;
    height: 50px;
    border-radius: 100px;

    position: relative;
}

a span {
    position: absolute;
    display: block;
    line-height: 50px;
    width: 50px;
    height: 50px;
} 
```

类似的东西？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T18:34:18.913

[http://jsfiddle.net/ZYhzJ/1/](http://jsfiddle.net/ZYhzJ/1/)

调整高度（和行高=高度的一半）和填充来放置字母。

# assembly - 用 68HC11 汇编语言计算字节数组的校验和

> ID：12875753
> 
> 赞同：1
> 
> 时间：2012-10-13T18:28:59.643
> 
> 标签：assembly, 68hc11

校验和计算为数组每个字节的不带进位的总和，并放入寄存器 B。数组的大小在寄存器 A 中，数组在内存中从寄存器 X 中的地址开始。

到目前为止，我得到了这个程序：

```
 ORG  $C000

      LDAA #N
      LDAB #$00
LOOP  DECA

      ADDB 0,X
      INX
      CMPA #0
      BNE  LOOP
END 
```

我认为这可以完成这项工作，但我是组装和 68HC11 的新手。你能告诉你是否看到有问题吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-08T22:06:24.590

这是处理零长度数组的代码（将返回 B=0）：

```
 LDAB #$00
      LDAA #N
      BEQ END
LOOP  ADDB 0,X
      INX
      DECA
      BNE  LOOP
END 
```

# javascript - How to recover a list of geoposition from a site that use Google Maps API

> ID：12875759
> 
> 赞同：5
> 
> 时间：2012-10-13T18:29:17.630
> 
> 标签：javascript, google-maps, google-maps-api-3

I am trying to make an application that contains a lot of different restaurant in a local database to help people find restaurant next to their location.

I would like to add the french bakery Paul: [http://www.paul.fr/shop/fr-FR/Shops](http://www.paul.fr/shop/fr-FR/Shops)

I have found out that it uses the CreateMarker() function to display markers from a list of point but I do not know where is the file that contains the different bakery with their latitude/longitude: [http://www.paul.fr/uploads/script/google.map.js](http://www.paul.fr/uploads/script/google.map.js)

Is there a way to obtain a list of what I am looking for?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T18:43:20.747

The data is loaded via an AJAX request. The requested URL is [http://www.paul.fr/shop/fr-FR/CMSMS/shops](http://www.paul.fr/shop/fr-FR/CMSMS/shops). You can see this in the `init` function of the Google Map. In the JSON file, you will find the geocoordinates in the `AddressLatitude` and `AddressLongitude` fields.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T18:35:23.837

It is ajax requesting "/shop/fr-FR/CMSMS/shops" , which is returning json containing points i assume. I've copied the json to [here](http://tny.cz/e3d4d4be). Put it in a file and ajax request then JSON parse it. The data you need is actually in the AddressLatitude and AddressLongitude properties of each entry. You may use [this](http://www.ist.rit.edu/~jxs/services/JSON/) site to explore the returned JSON and understand how it works, or just use the CreateMarker function they're using.

# css - 响应式全宽 CSS 分为 3

> ID：12875761
> 
> 赞同：0
> 
> 时间：2012-10-13T18:29:40.830
> 
> 标签：css, responsive-design

我想使用网格系统（例如 Skeleton CSS Boilerplate）来构建响应式网站。我知道还有很多其他样板可供 960 或 w/e 像素宽。

但我想要一个响应式全宽页面，分为 3 x 3 列。就像每列 33.33% 宽和 33.33% 高（总共 9 个 div）。我用过桌子，但我宁愿不使用它们。

制作 3 x 3 列全宽响应式网站的最佳做法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T18:31:47.567

试试[Gridpak](http://gridpak.com/ "网格包")

它允许您指定所需的列数并添加断点以完全改变不同窗口尺寸的网格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T18:32:58.460

您也可以尝试[CSS3 列](http://davidwalsh.name/css-columns)。

# iphone - 使用 AVCapture 分别写入视频和音频，但同时

> ID：12875763
> 
> 赞同：4
> 
> 时间：2012-10-13T18:29:49.287
> 
> 标签：iphone, objective-c, audio, avcapturesession

我想分别但同时捕获视频和音频，这样最后我的 NSDocuments 文件夹中有一个 .mp4 文件和一个 .wav （或类似的音频格式）。到目前为止，我有这个，但它甚至没有调用`- (void)captureOutput:(AVCaptureOutput *)captureOutput didOutputSampleBuffer:(CMSampleBufferRef)sampleBuffer fromConnection:(AVCaptureConnection *)connection`.

任何想法这里有什么问题？

```
#import "VideoCaptureViewController.h"
#import <AssetsLibrary/AssetsLibrary.h>
#import "SMFileManager.h"

@interface VideoCaptureViewController () {

    AVCaptureSession *session_;
    AVCaptureDevice *captureDevice_;
    AVCaptureDeviceInput *deviceInput_;
    AVCaptureMovieFileOutput *captureMovieFileOutput_;
    BOOL recording_;

    AVCaptureAudioDataOutput *audioDataOutput_;

    NSString *filePathCapturedVideo_;

}

- (void) toggleRecording;
- (void) endRecording;

@end

@implementation VideoCaptureViewController
@synthesize delegate;
@synthesize previewLayer;

- (void)viewDidLoad
{
    [super viewDidLoad];

    session_ = [[AVCaptureSession alloc] init];

    // Add video input.
    NSArray *videoDevices = [AVCaptureDevice devicesWithMediaType:AVMediaTypeVideo];
    // AVCaptureDevice *captureDevice = nil;
    captureDevice_ = nil;
    for (AVCaptureDevice *device in videoDevices) {
        if (device.position == AVCaptureDevicePositionFront) {
            captureDevice_ = device;
            break;
        }
    }

    // AVCaptureDevice *videoDevice = [AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeVideo];
    if (captureDevice_) {
        NSError *error;
        deviceInput_ = [AVCaptureDeviceInput deviceInputWithDevice:captureDevice_ error:&error];
        if (!error){
            if ([session_ canAddInput:deviceInput_])
                [session_ addInput:deviceInput_];
            else
                NSLog(@"Couldn't add video input");
        } else {
            NSLog(@"Couldn't create video input");
        }
    } else {
        NSLog(@"Couldn't create video capture device");
    }

    //ADD AUDIO INPUT
    NSLog(@"Adding audio input");
    AVCaptureDevice *audioCaptureDevice = [AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeAudio];
    NSError *error = nil;
    AVCaptureDeviceInput *audioInput = [AVCaptureDeviceInput deviceInputWithDevice:audioCaptureDevice error:&error];

    if (audioInput) {
        [session_ addInput:audioInput];
    }

    //----- ADD OUTPUTS -----

    // audio 
    audioDataOutput_= [[AVCaptureAudioDataOutput alloc] init];
    [session_ addOutput:audioDataOutput_];

    dispatch_queue_t queue = dispatch_queue_create("MyQueue", NULL);
    [audioDataOutput_ setSampleBufferDelegate:self queue:queue];
    dispatch_release(queue);

    //ADD VIDEO PREVIEW LAYER
    NSLog(@"Adding video preview layer");
    [self setPreviewLayer:[[[AVCaptureVideoPreviewLayer alloc] initWithSession:session_] autorelease]];
    previewLayer.orientation = AVCaptureVideoOrientationPortrait;       //<<SET ORIENTATION.  You can deliberatly set this wrong to flip the image and may actually need to set it wrong to get the right image
    [[self previewLayer] setVideoGravity:AVLayerVideoGravityResizeAspectFill];

    //ADD MOVIE FILE OUTPUT
    NSLog(@"Adding movie file output");
    captureMovieFileOutput_ = [[AVCaptureMovieFileOutput alloc] init];

//  Float64 TotalSeconds = 60;          //Total seconds
//  int32_t preferredTimeScale = CAPTURE_FRAMES_PER_SECOND; //Frames per second
//  CMTime maxDuration = CMTimeMakeWithSeconds(TotalSeconds, preferredTimeScale);   //<<SET MAX DURATION
//  captureMovieFileOutput_.maxRecordedDuration = maxDuration;

    captureMovieFileOutput_.minFreeDiskSpaceLimit = 1024 * 1024;                        //<<SET MIN FREE SPACE IN BYTES FOR RECORDING TO CONTINUE ON A VOLUME

    if ([session_ canAddOutput:captureMovieFileOutput_])
        [session_ addOutput:captureMovieFileOutput_];

    //SET THE CONNECTION PROPERTIES (output properties)
    [self CameraSetOutputProperties];           //(We call a method as it also has to be done after changing camera)

    //----- SET THE IMAGE QUALITY / RESOLUTION -----
    //Options:
    //  AVCaptureSessionPresetHigh - Highest recording quality (varies per device)
    //  AVCaptureSessionPresetMedium - Suitable for WiFi sharing (actual values may change)
    //  AVCaptureSessionPresetLow - Suitable for 3G sharing (actual values may change)
    //  AVCaptureSessionPreset640x480 - 640x480 VGA (check its supported before setting it)
    //  AVCaptureSessionPreset1280x720 - 1280x720 720p HD (check its supported before setting it)
    //  AVCaptureSessionPresetPhoto - Full photo resolution (not supported for video output)
    NSLog(@"Setting image quality");
    [session_ setSessionPreset:AVCaptureSessionPresetHigh];
    if ([session_ canSetSessionPreset:AVCaptureSessionPreset1280x720])  {   //Check size based configs are supported before setting them
        NSLog(@"1280x720 confirmed!");
        [session_ setSessionPreset:AVCaptureSessionPreset1280x720];
    }

    //----- DISPLAY THE PREVIEW LAYER -----
    //Display it full screen under out view controller existing controls
    NSLog(@"Display the preview layer");
    CGRect layerRect = [[[self view] layer] bounds];
    [previewLayer setBounds:layerRect];
    [previewLayer setPosition:CGPointMake(CGRectGetMidX(layerRect), CGRectGetMidY(layerRect))];
    //[[[self view] layer] addSublayer:[[self CaptureManager] previewLayer]];
    //We use this instead so it goes on a layer behind our UI controls (avoids us having to manually bring each control to the front):
    UIView *CameraView = [[[UIView alloc] init] autorelease];
    [[self view] addSubview:CameraView];
    [self.view sendSubviewToBack:CameraView];

    [[CameraView layer] addSublayer:previewLayer];

    //----- START THE CAPTURE SESSION RUNNING -----
    [session_ startRunning];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIDeviceOrientationPortrait);
}

//********** VIEW WILL APPEAR **********
//View about to be added to the window (called each time it appears)
//Occurs after other view's viewWillDisappear
- (void)viewWillAppear:(BOOL)animated
{
    NSLog(@"%s",__func__);
    [super viewWillAppear:animated];    
    recording_ = NO;
}

- (void) viewDidAppear:(BOOL)animated
{
    NSLog(@"%s",__func__);

    UIButton *startStopButton = [UIButton buttonWithType:UIButtonTypeCustom];
    startStopButton.frame = CGRectMake(self.view.center.x, self.view.frame.size.height - 80, 100, 50);
    [startStopButton setTitle:@"record" forState:UIControlStateNormal];
    [startStopButton addTarget:self action:@selector(toggleRecording) forControlEvents:UIControlEventTouchUpInside];
    startStopButton.enabled = YES;
    startStopButton.backgroundColor = [UIColor grayColor];
    [self.view addSubview:startStopButton];

//    [NSTimer timerWithTimeInterval:5 target:self selector:@selector(toggleRecording) userInfo:nil repeats:NO];
    // [NSTimer scheduledTimerWithTimeInterval:5 target:self selector:@selector(endRecording) userInfo:nil repeats:NO];
}

- (void) endRecording
{
    [self dismissModalViewControllerAnimated:YES];
}

//********** CAMERA SET OUTPUT PROPERTIES **********
- (void) CameraSetOutputProperties
{
    //SET THE CONNECTION PROPERTIES (output properties)
    AVCaptureConnection *CaptureConnection = [captureMovieFileOutput_ connectionWithMediaType:AVMediaTypeVideo];

    //Set landscape (if required)
    if ([CaptureConnection isVideoOrientationSupported]){
//        [CaptureConnecti on setVideoOrientation:[UIDevice currentDevice].orientation];

        AVCaptureVideoOrientation orientation = AVCaptureVideoOrientationPortrait;
        [CaptureConnection setVideoOrientation:orientation];
    }

    //Set frame rate (if requried)
    CMTimeShow(CaptureConnection.videoMinFrameDuration);
    CMTimeShow(CaptureConnection.videoMaxFrameDuration);

    if (CaptureConnection.supportsVideoMinFrameDuration)
        CaptureConnection.videoMinFrameDuration = CMTimeMake(1, CAPTURE_FRAMES_PER_SECOND);
    if (CaptureConnection.supportsVideoMaxFrameDuration)
        CaptureConnection.videoMaxFrameDuration = CMTimeMake(1, CAPTURE_FRAMES_PER_SECOND);

    CMTimeShow(CaptureConnection.videoMinFrameDuration);
    CMTimeShow(CaptureConnection.videoMaxFrameDuration);
}

//********** GET CAMERA IN SPECIFIED POSITION IF IT EXISTS **********
- (AVCaptureDevice *) CameraWithPosition:(AVCaptureDevicePosition) Position
{
    NSArray *Devices = [AVCaptureDevice devicesWithMediaType:AVMediaTypeVideo];
    for (AVCaptureDevice *Device in Devices)
    {
        if ([Device position] == Position)
        {
            return Device;
        }
    }
    return nil;
}

//********** CAMERA TOGGLE **********
- (IBAction)CameraToggleButtonPressed:(id)sender
{
    if ([[AVCaptureDevice devicesWithMediaType:AVMediaTypeVideo] count] > 1)        //Only do if device has multiple cameras
    {
        NSLog(@"Toggle camera");
        NSError *error;
        //AVCaptureDeviceInput *videoInput = [self videoInput];
        AVCaptureDeviceInput *NewVideoInput;
        AVCaptureDevicePosition position = [[deviceInput_ device] position];
        if (position == AVCaptureDevicePositionBack)
        {
            NewVideoInput = [[AVCaptureDeviceInput alloc] initWithDevice:[self CameraWithPosition:AVCaptureDevicePositionFront] error:&error];
        }
        else if (position == AVCaptureDevicePositionFront){
            NewVideoInput = [[AVCaptureDeviceInput alloc] initWithDevice:[self CameraWithPosition:AVCaptureDevicePositionBack] error:&error];
        }

        if (NewVideoInput != nil)
        {
            [session_ beginConfiguration];      //We can now change the inputs and output configuration.  Use commitConfiguration to end
            [session_ removeInput:deviceInput_];
            if ([session_ canAddInput:NewVideoInput])
            {
                [session_ addInput:NewVideoInput];
                deviceInput_ = NewVideoInput;
            }
            else
            {
                [session_ addInput:deviceInput_];
            }

            //Set the connection properties again
            [self CameraSetOutputProperties];

            [session_ commitConfiguration];
            [NewVideoInput release];
        }
    }
}

- (void)toggleRecording
{
    NSLog(@"%s",__func__);
    if (!recording_){
        NSLog(@"START RECORDING");
        recording_ = YES;

        NSString* documentsDirectory= [SMFileManager applicationDocumentsDirectory];
        filePathCapturedVideo_ = [documentsDirectory stringByAppendingPathComponent:@"captured-video.mp4"];
        NSLog(@"storing file at %@", filePathCapturedVideo_);
        NSURL *url = [[NSURL alloc] initFileURLWithPath: filePathCapturedVideo_];        
        NSFileManager *fileManager = [NSFileManager defaultManager];
        if ([fileManager fileExistsAtPath:filePathCapturedVideo_]) {
            NSError *error;
            if ([fileManager removeItemAtPath:filePathCapturedVideo_ error:&error] == NO) {
                //Error - handle if requried
            }
        }
        //Start recording
        [captureMovieFileOutput_ startRecordingToOutputFileURL:url recordingDelegate:self];
    } else {
        NSLog(@"STOP RECORDING");
        recording_ = NO;        
        [captureMovieFileOutput_ stopRecording];
    }
}

- (void)captureOutput:(AVCaptureOutput *)captureOutput didOutputSampleBuffer:(CMSampleBufferRef)sampleBuffer fromConnection:(AVCaptureConnection *)connection
{
    NSLog(@"%s",__func__);

}

- (void)captureOutput:(AVCaptureFileOutput *)captureOutput didFinishRecordingToOutputFileAtURL:(NSURL *)outputFileURL fromConnections:(NSArray *)connections error:(NSError *)error
{

    NSLog(@"%@", outputFileURL);

    NSLog(@"%@", captureOutput);

    NSString* documentsDirectory= [SMFileManager applicationDocumentsDirectory];
    filePathCapturedVideo_ = [documentsDirectory stringByAppendingPathComponent:@"captured-video.mp4"];
    [self.delegate videoCaptured:filePathCapturedVideo_];
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-10-29T00:16:35.153

我遇到过类似的问题，我得出的结论是不可能同时使用这两个代表。最好的解决方案是仅使用 DidOutputSampleBuffer 和 AVAssetWriter 分别保存文件。

# c#-4.0 - ITextSharp 在 PDF 中查找特定文本的坐标

> ID：12875766
> 
> 赞同：1
> 
> 时间：2012-10-13T18:30:16.660
> 
> 标签：c#-4.0, pdf, itextsharp

我发现许多网站和帖子的问题与我的相同，但它们似乎都有一个共同点，即人们都在用如何在特定位置插入新文本的示例来回答它们。我有一个 PDF 文档，它是由另一个我无法控制的程序生成的，它有一行供客户签名，但该行不在绝对位置，因此我们使用的名为 AssureSign 的服务无法正常工作，因为你必须知道签名行的位置在哪里。所以我需要创建一个新程序来查找签名行的位置并将该信息发送到assuresign系统。

这真的应该很简单，但由于某种原因我没有得到它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T19:39:18.660

您可以使用 iText (Sharp) 的解析器包来查找给定文本的位置。但是，您必须实现自己的 RenderListener，因为该包的主要用例是文本提取，而不是文本定位。

这并不像您想象的那么容易，例如单词的各个字符可能以任何顺序单独出现。

**PS：**

但是，首先您必须找出签名行是否由字符组成（正如您的问题似乎暗示的那样），或者它是否是绘制的路径。此外，您必须确定该行在文档中是否唯一。

在前一种情况下，您需要的 RenderListener 实现必须检查在其 RenderText 方法中转发以进行处理的 TextRenderInfo 对象。如果其文本内容包含构建signatrue 行的那些唯一字符，则必须存储此TextRenderInfo 的位置数据。如果行字符不是唯一的，您将必须找到一些使它们唯一的附加标准，例如某些前面的字符串或可能是文档中这些字符最后一次出现的事实。

在后一种情况下，解析器包功能必须有所扩展，因为它目前不报告路径。根据 iText 邮件列表，类似的扩展在 ToDo 列表中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T13:48:20.183

[这个问题与你想要完成的事情没有直接关系，但它是间接相关的](https://stackoverflow.com/questions/6523243/how-to-highlight-a-text-or-word-in-a-pdf-file-using-itextsharp/11584160#11584160)

JCIS 发布了一个很棒的应用程序，它向您展示了查找特定文本的艰巨任务，尽管使用的是 VB。它不会像将其插入 vb > c# 转换器那么简单，但它应该是可翻译的。您可能认为这似乎是一项容易完成的任务，但 PDF 不是一种文档格式，它在技术上是一种显示格式。这两者之间的区别是使这个过程如此漫长的原因。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-16T08:58:18.233

首先，如果只是单词是英语，您可以轻松找到 parse，但是当您的文档不是英语时，您应该完全理解您的语言字体**UNICODE**。

# android - 如何在 Android 中使用 SQLite 获得最佳性能？

> ID：12875774
> 
> 赞同：9
> 
> 时间：2012-10-13T18:31:07.667
> 
> 标签：android, sqlite, transactions, bulkinsert

我注意到有多种方法可以执行 SQLite 操作（查询、插入、更新、删除），有些方法可能比其他方法更快。许多网站提供不同的提示，并且有些与其他网站有冲突。

1.  似乎使用事务进行批量插入比在循环中这样做更快。

    怎么会？使用 SQLite 时获得最佳性能的最佳方法是什么？sqlite 如何在 Android 上运行？

2.  混淆使用[InserHelper](http://developer.android.com/reference/android/database/DatabaseUtils.InsertHelper.html)与[ContentValues ，如此](http://developer.android.com/reference/android/content/ContentValues.html)[处](http://www.outofwhatbox.com/blog/2010/12/android-using-databaseutils-inserthelper-for-faster-insertions-into-sqlite-database/)所示。

    [InserHelper](http://developer.android.com/reference/android/database/DatabaseUtils.InsertHelper.html)是如何工作的，它总是比[ContentValues](http://developer.android.com/reference/android/content/ContentValues.html)快吗？用交易包裹它会进一步加快速度吗？

3.  对其他 SQL 框架的困惑。我记得添加索引会提高与索引相关的查询的性能。Android 也是这样吗？这是一个好习惯吗？

4.  我听说在某些情况下，最好不要将 UI 线程用于 DB 操作。在哪些情况下建议这样做？例如，数据库操作会变得多慢？如果 DB 变成 70MB，是否意味着它会慢很多，UI 线程永远不应该处理它？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-13T18:39:17.373

> 怎么会？

事务涉及磁盘 I/O。做一大块磁盘 I/O 比做很多小块磁盘 I/O 便宜得多。

> InserHelper 是如何工作的，它总是比 contentValues 快吗？

引用[文档](http://developer.android.com/reference/android/database/DatabaseUtils.InsertHelper.html)：“此类允许用户对表进行多次插入，但只编译一次 SQL 插入语句，这可能会提高性能。”

> 会以交易速度进一步包装它吗？

大概是的。

> 安卓也是这样吗？

如果您为正在执行的任何查询创建适当的索引，索引*可以提高查询速度。*索引*总是会降低*插入/更新/删除速度，因为现在需要更新这些索引。这与 Android 无关。

> 是好东西用吗？

这是不可能抽象地回答的。这与 Android 无关。

> 最好不要将 UI 线程用于 DB 操作

正确的。

> 在哪些情况下会被推荐？

从不建议在主应用程序线程上执行任何磁盘 I/O。

> 数据库操作会变得多慢？

几个世纪。到那时，设备可能会出现故障，或者电池电量耗尽。

> 如果数据库变成 70MB ，是否意味着它会慢很多

这取决于你用它做什么。

> 和 UI 线程不应该处理它？

正确的。

# php - Codeigniter 设置上传路径到 tmp 文件夹

> ID：12875776
> 
> 赞同：1
> 
> 时间：2012-10-13T18:31:21.087
> 
> 标签：php, codeigniter, file-upload

我正在将我的文件上传到 Amazon S3，并且不需要将它们存储在本地。`unlink()`我不想使用或 cron 作业，而是将文件添加到文件`tmp`夹并从那里将它们发送到 Amazon S3。我尝试在配置选项中指定路径：

```
$tmp = ini_get('upload_tmp_dir');
$config['upload_path'] = $tmp; 
```

我收到上传错误：

`The upload destination folder does not appear to be writable.`

我使我的 tmp 文件夹可写，但仍然出现错误。有谁知道如何使用 CI 上传库仅上传到 tmp 文件夹？恐怕我可能不得不修改核心上传库删除所有上传路径功能。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T18:55:21.320

## `ini_get()`是 php.ini 的代表。

如果你打开`php.ini`你会发现它`upload_tmp_dir`设置为`null`

如果您`echo ini_get('upload_tmp_dir');`可能会注意到它不会 - 那是因为它是`null`. 这意味着您正在输入一个空字符串`$config['upload_path']`，CodeIgniter 将默认选择您的文档根目录。

改为使用`sys_get_temp_dir()`or `'/tmp'`。

# opencv - OpenCV，非特定文本

> ID：12875780
> 
> 赞同：2
> 
> 时间：2012-10-13T18:31:48.907
> 
> 标签：opencv, text, constants

```
int t = 0;
//char u;
// Loop controling vars
char keypress;
bool quit = false;
while (quit == false)
{   pFrame = cvQueryFrame(pCapture);//

   cvLine(pFrame,                        /* the dest image */
       cvPoint(0, 240),             /* start point */
       cvPoint(640, 240),            /* end point */
       cvScalar(0, 255, 0, 0),      /* the color; green */
       1, 8, 0);                    /* thickness, line type, shift */

    CvMemStorage* storage = cvCreateMemStorage(0);
    cvCvtColor(pFrame, tempFrame, CV_BGR2GRAY);
    pProcessedFrame = findEdges(pFrame, lowSliderPosition, highSliderPosition, 3);//Επεξεργάσου για να βρεις τις άκρες
    cvSmooth(tempFrame, tempFrame, CV_GAUSSIAN, 11, 11);//Για να αποφευχθούν λάθος εμφανίσεις κύκλου.

    CvSeq* circles = cvHoughCircles(tempFrame, storage, CV_HOUGH_GRADIENT, 1, tempFrame->height/4, 50, 50, 20, 75);
    for (size_t i = 0; i < circles->total; i++)
 {
     // round the floats to an int
     float* p = (float*)cvGetSeqElem(circles, i);
 cv::Point center(cvRound(p[0]), cvRound(p[1]));

     int radius = cvRound(p[2]);
     cvCircle(pFrame, center, 3, CV_RGB(0,255,0), -1, 8, 0 );//Ζωγράφισε το κέντρο του κύκλου.
     cvCircle(pFrame, center, radius+1, CV_RGB(0,0,255), 2, 8, 0 );//Ζωγράφισε το περίγραμμα του κύκλου.
 if (center.y == 240 )
     {cvWaitKey(150);    
 t++;
  }
 else
 {}
 printf("x: %d y: %d r: %d t: %d\n",center.x,center.y, radius,t);
  }

 CvFont font;
     cvInitFont(&font, CV_FONT_HERSHEY_SIMPLEX, 1.0, 1.0, 0, 1, CV_AA);
 cvPutText(pProcessedFrame, "blabla", cvPoint(10, 130), &font, cvScalar(255, 255, 255, 0));

    cvShowImage("WebCam", pFrame);//Εμφάνισε τα κανονικά frame στο παράθυρο αυτό
    cvShowImage("Processed WebCam", pProcessedFrame);//Δείξε τα επεξεργασμένα frame στο παράθυρο αυτό.

    keypress = cvWaitKey(20);//Περίμενε 20 msec.
    if (keypress == 27)//Άλλαξε το flag σε quit αν πατηθεί το πλήκτρο escape.
    {
        quit = true;
    }} //Τέλος του while 
```

大家好，我相信这个问题并不难，但由于某种原因，我似乎无法在互联网上找到任何答案。也许我没有做一些好的研究。

我的程序上有一个名为 t 的计数器（整数）。根据我正在做的一些相机交互，它会不时变化。我只想将其显示在视频结果中，即名为 pProcessedFrame 的视频结果中。

我在这里包含的命令 cvPutText 对我不起作用，因为它只能显示特定的文本。我希望它像我之前提到的那样不时改变。

还有其他我不知道的命令吗？

@@编辑@@

好的，伙计们，这在下面得到了回答。我只是把最后的while代码和声明放在里面。也许有一天有人会需要这个。非常感谢大家。xD

```
 int t = 0;
char u=0;
// Loop controling vars
char keypress;
bool quit = false;
char msg[4*1024] = { 0 };
int frame_num = 0;

while (quit == false)
{
pFrame = cvQueryFrame(pCapture);
cvLine(pFrame,                        
    cvPoint(0, 240),            
    cvPoint(640, 240),    
    cvScalar(0, 255, 0, 0), 1, 8, 0);
CvMemStorage* storage = cvCreateMemStorage(0);
cvCvtColor(pFrame, tempFrame, CV_BGR2GRAY);
pProcessedFrame = findEdges(pFrame, lowSliderPosition, highSliderPosition, 3);
cvSmooth(tempFrame, tempFrame, CV_GAUSSIAN, 11, 11);

CvSeq* circles = cvHoughCircles(tempFrame, storage, CV_HOUGH_GRADIENT, 1, tempFrame->height/4, 50, 50, 20, 60);

      for (size_t i = 0; i < circles->total; i++)
      {
          // round the floats to an int
          float* p = (float*)cvGetSeqElem(circles, i);
      cv::Point center(cvRound(p[0]), cvRound(p[1]));

          int radius = cvRound(p[2]);
          cvCircle(pFrame, center, 3, CV_RGB(0,255,0), -1, 8, 0 );
          cvCircle(pFrame, center, radius+1, CV_RGB(0,0,255), 2, 8, 0 );
      if (center.y == 240 )
          {
      cvWaitKey(200);    
      t++;
          frame_num=t;
      }
       else
      {}
      printf("x: %d y: %d r: %d t: %d\n",center.x,center.y, radius,t);
      }     

      sprintf(msg, "Counter: %d", frame_num);
      cvPutText (pFrame, msg, cvPoint(50,100), &font, cvScalar(255,255,0));             
      cvShowImage("WebCam", pFrame);
      cvShowImage("Processed WebCam", pProcessedFrame);

      keypress = cvWaitKey(20);
      if (keypress == 27)
      {
      quit = true;
          }} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T02:00:07.237

**[`cvPutText()`](http://opencv.willowgarage.com/documentation/drawing_functions.html#puttext)正是[您正在寻找的](https://stackoverflow.com/a/9504144/176769)。**

我的第一个技巧是一点点优化：将以下代码放在**while**循环之前。由于您只需要一种字体类型，因此无需在每次循环迭代时重新创建它。

```
CvFont font;
cvInitFont(&font, CV_FONT_HERSHEY_SIMPLEX, 1.0, 1.0, 0, 1, CV_AA); 
```

现在回到你需要理解的东西：第二个参数`cvPutText()`是 type `const char*`。因此，您需要做的就是在循环的每次迭代中传递一个带有不同文本的变量。

下面的示例从捕获界面检索帧，并在屏幕上显示的每个图像上写入帧号：

```
while (key != 27)
{
    img = cvQueryFrame(capture);
    if (!img)
    {
        fprintf(stderr, "!!! Failed to retrive frame!\n" );
        break;
    }

    // convert int to char*
    char msg[4*1024] = { 0 };
    sprintf(msg, "Frame number: %d", frame_num);

    cvPutText (img, msg, cvPoint(50,200), &font, cvScalar(255,255,0));
    frame_num++;

    cvShowImage("result", img);
    key = cvWaitKey(33);
} 
```

# python - Twisted：如何知道何时收到所有数据？

> ID：12875783
> 
> 赞同：2
> 
> 时间：2012-10-13T18:31:49.543
> 
> 标签：python, twisted

```
self.agent = Agent(reactor, pool=pool)
self.deferred = self.agent.request(
            'GET',
            self.url,
            Headers({'User-Agent': ['Mozilla/5.0']})
        )

self.deferred.addCallback(self.gotResponse) 
```

但是 gotResponse 调用接收到的数据的每一部分，而不是全部。我可以收集它，但如何知道我得到了所有数据？

**编辑：**

我发现[了这一点](http://twistedmatrix.com/documents/current/web/howto/client.html)（来自“*如果已完全收到响应正文*”的话），但仍然不知道如何实现这一点。我的意思是，*“失败将结束……”*是什么意思？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-25T14:36:29.590

在 twisted 13.1.0 中，您可以使用 readBody()。来自 [http://twistedmatrix.com/documents/13.1.0/api/twisted.web.client.readBody.html](http://twistedmatrix.com/documents/13.1.0/api/twisted.web.client.readBody.html)，“这是一个帮助函数，用于不希望增量接收 HTTP 响应正文的客户端。 "

您从回调中调用 readBody()，在上面的示例中为 dataReceived()，它处理数据，readBody() 返回一个延迟，您将另一个回调附加到该回调，该回调将整个主体作为参数。

HTH，雷沙德。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T18:42:09.043

扭曲的文档提供了如何执行此操作的示例。

来自[http://twistedmatrix.com/documents/current/web/howto/client.html](http://twistedmatrix.com/documents/current/web/howto/client.html)

```
from pprint import pformat

from twisted.internet import reactor
from twisted.internet.defer import Deferred
from twisted.internet.protocol import Protocol
from twisted.web.client import Agent
from twisted.web.http_headers import Headers

class BeginningPrinter(Protocol):
    def __init__(self, finished):
        self.finished = finished
        self.remaining = 1024 * 10

    def dataReceived(self, bytes):
        if self.remaining:
            display = bytes[:self.remaining]
            print 'Some data received:'
            print display
            self.remaining -= len(display)

    def connectionLost(self, reason):
        print 'Finished receiving body:', reason.getErrorMessage()
        self.finished.callback(None)

agent = Agent(reactor)
d = agent.request(
    'GET',
    'http://example.com/',
    Headers({'User-Agent': ['Twisted Web Client Example']}),
    None)

def cbRequest(response):
    print 'Response version:', response.version
    print 'Response code:', response.code
    print 'Response phrase:', response.phrase
    print 'Response headers:'
    print pformat(list(response.headers.getAllRawHeaders()))
    finished = Deferred()
    response.deliverBody(BeginningPrinter(finished))
    return finished
d.addCallback(cbRequest)

def cbShutdown(ignored):
    reactor.stop()
d.addBoth(cbShutdown)

reactor.run() 
```

当请求完成时将调用BeginningPrinter 的connectionLost() 方法。

```
Response version: ('HTTP', 1, 0)
Response code: 302
Response phrase: Found
Response headers:
[('Location', ['http://www.iana.org/domains/example/']), ('Server', ['BigIP'])]
Finished receiving body: Response body fully received 
```

看起来检查`if reason.check(twisted.web.client.ResponseDone)`会告诉你它是否成功。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-13T19:11:57.397

我对扭曲的知识不够了解，无法给你一个正确的答案……但我可以指出一些好的方向。

使用扭曲的延迟，您可以创建一个回调链（成功）和 errbacks（失败），当某事完成时触发。

在您的示例中-我不确定 self.agent.request 做了什么，或者为什么它可能会返回部分数据。这对我来说听起来并不完全“正确”——但通常我会使用包含在延迟 SemaphoreService 中的阻塞代码来获取 url。

但是，根据您的代码，我想建议两件事：

a - 在此处阅读延迟[http://twistedmatrix.com/documents/current/core/howto/defer.html](http://twistedmatrix.com/documents/current/core/howto/defer.html)

b - 您需要添加一个 errback 来处理错误请求。关于“包装”的文本必须处理这样一个事实，即 twisted 并没有真正引发错误——相反，它允许您定义 errBacks 来运行，并且您可以在其中捕获错误。有更好的扭曲的人希望可以更恰当地解释这一点 - 但由于延迟是异步的，你需要这样的机制来有效地处理错误。

```
class YourExample(object):
    def your_example(self):
        self.agent = Agent(reactor, pool=pool)
        self.deferred = self.agent.request(
                'GET',
                self.url,
                Headers({'User-Agent': ['Mozilla/5.0']})
            )

        self.deferred.addCallback(self.gotResponse).addErrback(self.gotBadResponse)

def gotBadResponse(self,raised):
    """you might have cleanup code here, or mark the url as bad in the database, or something similar"""
    pass 
```

# asp.net - 当对象数据类型为C#中的DateTime时，如何在sql server中仅存储时间

> ID：12875787
> 
> 赞同：0
> 
> 时间：2012-10-13T18:32:08.257
> 
> 标签：asp.net, c#-4.0, datetime, time, sqlparameter

我的对象 WDst,WDet,SATst,SATet 是 DATETIME 类对象，其中包含来自文本框的时间值。

我的 SP 中的所有开始时间和结束时间参数都是数据类型 Time(7) 我如何使用 DateTime 对象

我使用以下代码在我的数据库中插入一个时间表：

```
public void AddSchedule()
{
 connect = DAL.Con;
    SqlCommand com = new SqlCommand();
    com.Connection = connect;
    com.CommandType = CommandType.StoredProcedure;
    com.CommandText = "AddSchedule";
    SqlParameter parameters = new SqlParameter();
    com.Parameters.Add(new SqlParameter("SchedName",SqlDbType.VarChar)).Value=Schedulename;
    com.Parameters.Add(new SqlParameter("startTime",SqlDbType.Time)).Value=WDst;
    com.Parameters.Add(new SqlParameter("endTime",SqlDbType.Time)).Value=WDet;
    com.Parameters.Add(new SqlParameter("SatStartTime", SqlDbType.Time)).Value=SATst;
    com.Parameters.Add(new SqlParameter("SatEndTime", SqlDbType.Time)).Value=SATet;
    connect.Open();
    com.ExecuteNonQuery();
    connect.Close();
} 
```

Com.ExecuteNonQuery 发生错误...我的存储过程没有任何问题。

如何仅从保存时间值的日期时间对象中保存时间，如下所示：

```
protected void SaveSched_Click(object sender, EventArgs e)
{
    Schedule obj = new Schedule();
    obj.Schedulename = SchedName.Text;
    obj.WDst = Convert.ToDateTime(StartTime.Text);
    obj.WDet = Convert.ToDateTime(EndTime.Text);
    obj.SATst = Convert.ToDateTime(SatSt.Text);
    obj.SATet = Convert.ToDateTime(SatEt.Text);
    obj.AddSchedule();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T18:41:38.467

我最好的选择是您必须使用 ToString() 方法和 DateTime 对象的自定义格式。并将其作为字符串而不是 DateTime 对象传递给数据库。

有关 DateTime 对象的自定义格式，请参阅此 URL：http: [//msdn.microsoft.com/en-us/library/8kb3ddd4.aspx](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)

例如：

```
DateTime now = DateTime.Now;
now.ToString("yyyy-MM-dd HH:mm:ss"); //Outputs 2012-10-13 20:40:35
now.ToString("HH:mm:ss"); //Will then output 20:40:35 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T18:50:22.910

尝试

```
com.Parameters.Add(
           new SqlParameter("startTime",SqlDbType.Time)).Value = 
                               WDet.ToString("HH:mm:ss"); 
```

# verilog - Verilog 中有类似 __LINE__ 的东西吗？

> ID：12875790
> 
> 赞同：7
> 
> 时间：2012-10-13T18:32:25.203
> 
> 标签：verilog, system-verilog

我是 Verilog 的新手，但多年来一直是 C 程序员，这让我很危险。

我正在为一堂课做一些 Verilog。我想在我的模拟代码中使用 C assert() 样式测试。[https://en.wikipedia.org/wiki/Assert.h](https://en.wikipedia.org/wiki/Assert.h)

我们没有使用 System Verilog，所以没有我能找到的标准断言。我拼凑了以下宏。

```
`define ASSERT_EQUALS(x,y) \
    repeat(1)\
    begin\
        if( (x) != (y) ) \
        begin\
            $write( "assert failed %d != %d\n", (x), (y) );\
            $finish;\
        end\
    end 

    // test the assert( should fail)
    `ASSERT_EQUALS(t_data_in,16'hfffe) 
```

据我所知，没有办法获得行号。因此，如果断言失败，我只会收到一条消息，无法链接回失败的位置。

```
assert failed 65535 != 65534 
```

有没有办法获取当前行号？或者有没有更好的方法在 Verilog 中进行断言测试？

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-18T11:28:28.793

SystemVerilog 2009 提供编译器指令。引用规范 IEEE Std 1800-2009，第 22.13 节：

> ``__FILE__`以字符串文字的形式展开为当前输入文件的名称。这是工具打开文件的路径，而不是在工具的输入文件名参数中指定的短名称``include`或作为工具的输入文件名参数。此路径名的格式可能取决于实现。
> 
> ``__LINE__`以简单十进制数的形式展开为当前输入的行号。

> 例如：
> `$display("Internal error: null handle at %s, line %d.", `__FILE__, `__LINE__);`

有关详细信息，请参阅完整规范。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-13T20:43:33.537

如果这是一个程序上下文，您可以使用 `$finish(1);`which 应该打印该位置。

# wcf - 更改目标框架版本并重新安装 EF 后实体框架 5 命令超时错误

> ID：12875792
> 
> 赞同：0
> 
> 时间：2012-10-13T18:32:39.127
> 
> 标签：wcf, entity-framework, code-first

这是背景：我构建了一个新的 WCF 服务，它使用 EF5 并针对 .Net Framework 4.5。我对现有的大型遗留数据库使用了代码优先。在我将服务部署到测试服务器之前，一切都运行良好，当时我发现测试服务器（因此生产服务器，因为它们是相同的构建）无法支持 Framework 4.5。

因此，我将项目降级为针对 Framework 4.0。在重新编码我所有的实体映射后（以避免使用特定于 4.5 的 DataAnnotations.Schema 命名空间中的代码），我让这个在本地再次工作。但是，在部署到服务器后，我遇到了此处描述的错误：[任何人都可以发现为什么我在测试 EF 5 beta 时不断收到此错误](https://stackoverflow.com/questions/9591929/can-anyone-spot-why-i-keep-getting-this-error-testing-the-ef-5-beta)。

按照建议进行操作后 - 通过 NuGet 卸载并重新安装 EF5，我现在在尝试测试服务时遇到超时错误。

特别是在尝试执行以下 Linq 时发生超时：

```
var games = from m in _db.Members
        join s in _db.UkSyndicates
            on m.MemberId equals s.MemberId
        where m.PaymentMethod == "Credit/Debit Card"
        && EntityFunctions.TruncateTime(s.NextChargeDate) <=  EntityFunctions.TruncateTime(DateTime.Now)
        && !string.IsNullOrEmpty(m.AibCustomerReference)
        && (m.StatusId == 105 || m.StatusId == 113)
        select new BillingItem
        {
            Id = s.Id,
            SyndicateId = s.SyndicateId,
            MemberId = s.MemberId,
            LastDrawId = s.LastDrawId,
            LastPaidGame = s.LastPaidGame,
            NextChargeDate = s.NextChargeDate,
            Protected = s.Protected,
            PaymentFrequency = (int)(s.PaymentFrequency*4),
            CurrencyCode = m.CurrencyCode,
            AibCustomerReference = m.AibCustomerReference,
            WeeklyFee = (from f in _db.GameFees where f.FeeName == "UK_LOTTO_FEE" && f.CurrencyCode == m.CurrencyCode select f.Amount).FirstOrDefault(),
            GameCode = game,
            PostCode = m.PostCode,
            CountryCode = m.CountryCode,
            EmailAddress = m.Email
        }; 
```

可能有一种更有效的方法来编写此查询 - 我对 Linq 和 EF 相当缺乏经验，但我会强调这在卸载和重新安装 EF 之前没有超时。事实上，它很快就返回了数据。

我看不出在重新安装 EF 后会超时的任何原因，代码中没有任何变化，但需要一个快速的解决方案！

谢谢。

为了澄清我得到的错误，在 EF 尝试执行上述查询时，我得到了一个**EntityCommandExecutionException**抛出。异常消息是“执行命令定义时发生错误。有关详细信息，请参阅内部异常。” 内部异常是“超时已过期。在操作完成之前超时时间已过或服务器未响应。”

堆栈跟踪如下：

在 System.Data.EntityClient.EntityCommandDefinition.ExecuteStoreCommands(EntityCommand entityCommand, CommandBehavior 行为) 在 System.Data.Objects.Internal.ObjectQueryExecutionPlan.Execute[TResultType](ObjectContext context, ObjectParameterCollection parameterValues) 在 System.Data.Objects.ObjectQuery `1.GetResults(Nullable`1 forMergeOption)在 System.Data.Objects.ObjectQuery `1.System.Collections.Generic.IEnumerable<T>.GetEnumerator() at System.Data.Entity.Internal.Linq.InternalQuery`1.GetEnumerator() 在 System.Data.Entity.Infrastructure.DbQuery`1.System.Collections.Generic.IEnumerable<TResult>.GetEnumerator() at RepeatBillingService.Repositories.BillingRepository.GetMembersForGame(String game, List`1& billingQ) 在 p:\Projects\BigFatLottos\RepeatBillingService\RepeatBillingService\Repositories\BillingRepository.cs：第 441 行，位于 p:\Projects\BigFatLottos\RepeatBillingService\RepeatBillingService\Repositories\BillingRepository.cs 中 RepeatBillingService.Repositories.BillingRepository.GetMemberGamesForBilling() ：RepeatBillingService.RepeatBillingService.RunRepeatBilling() 中的第 24 行在 p:\Projects\BigFatLottos\RepeatBillingService\RepeatBillingService\RepeatBillingService.svc.cs：第 51 行在 System.ServiceModel.Dispatcher 的 SyncInvokeRunRepeatBilling(Object , Object[] , Object[] ) System.ServiceModel.Dispatcher.DispatchOperationRuntime.InvokeBegin(MessageRpc& rpc) 处的 .SyncMethodInvoker.Invoke（对象实例，对象 [] 输入，对象 [] 和输出）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T17:01:03.193

我明白了这一点，并道歉，因为整个问题有点牵强。我在后台打开了一个 SSMS 会话，我正在调整数据以进行测试，并且一直在更新“NextChargeDate”值。当我来关闭会话时，我得到“有未提交的事务，你现在要提交吗”这开始敲响警钟。

果然重启WCF服务，一切正常。所以我的超时是由于数据库中该字段上的未提交更新而发生的 - EF 显然在提交更新之前无法成功读取数据。

因此，对于在这个问题上浪费您的时间，我深表歉意，这只是一个简单的疏忽，同时在压力下长时间工作以启动新系统。

无论如何感谢您的回复。

# jquery - PhoneGap App 在页面加载时加载内部浏览器

> ID：12875794
> 
> 赞同：2
> 
> 时间：2012-10-13T18:32:41.573
> 
> 标签：jquery, cordova, phonegap-plugins

我正在使用 PHonegap 构建服务为一个将显示 flash 的机器人创建一个简单的包装器，然后启动到该站点的移动版本。

我已经尝试了各种组合，到目前为止，以下效果最好：

```
<!doctype html>
<html>
<head>
<meta name="viewport" content="initial-scale=1.0, user-scalable=no, width=device-width" />
<title>My App</title>
<link rel="stylesheet" href="assets/css/master.css" type="text/css" media="screen" />
<script src="phonegap.js" type="text/javascript" charset="utf-8"></script>
<script src="cordova-2.1.0.js" type="text/javascript" charset="utf-8"></script>
<script type="text/javascript" charset="utf-8" src="json2.js"></script>
<script src="childbrowser.js" type="text/javascript" charset="utf-8"></script>
<script src="assets/js/dsl.js" type="text/javascript" charset="utf-8"></script>
<script src="assets/js/xui.js" type="text/javascript" charset="utf-8"></script>
<script type="text/javascript" charset="utf-8">

function init(){
document.addEventListener("deviceready", onDeviceReady, false);
}

function externalLoad() 
{ 
window.location.href = "http://myapp.com"; //works
}

function locationChanged(newurl) {
console.log("The JS got this url = " + newurl);
}

function closed() {
console.log("The JS got a close event");
}
function showPage(locbar) {
window.plugins.childBrowser.onLocationChange = locationChanged;
window.plugins.childBrowser.onClose = closed;
window.plugins.childBrowser.showWebPage("http://myapp.com", {
showLocationBar: locbar
});
}
 function openExternal() {
 window.plugins.childBrowser.openExternal("http://myapp.com");
}

</script>       

</head>
<body onLoad="externalLoad();">
<button onClick="externalLoad() ;">Load Deals</button> <br>
</body>
</html> 
```

上面的效果很好，除了它在应用程序 Web 视图中打开应用程序并且我无权访问我需要的设备浏览器 cookie。

我试过使用 childbrowser 插件，效果很好，但是当页面加载时我无法启动它。如果点击链接，它会完美运行。

我一定遗漏了一些东西，因为这看起来应该很容易做到。

任何正确方向的建议或帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-11T21:18:01.783

“本机”与“真实”cookie 的实现方式可能不同。一种解决方法是打开一个特殊页面，参数中包含 cookie 值。这会在真实浏览器中设置 cookie 并重定向到主页（或任何需要的地方）。这有点工作，但保证在所有条件下都可以工作。

# java - Netty - 默认情况下使所有创建的缓冲区为小端

> ID：12875796
> 
> 赞同：0
> 
> 时间：2012-10-13T18:32:53.333
> 
> 标签：java, netty, endianness

默认情况下，我需要在 Netty 中以 little-endian 字节格式创建通道缓冲区，据我所知，我使用这段代码。

```
bootstrap.setOption("child.bufferFactory", new HeapChannelBufferFactory(ByteOrder.LITTLE_ENDIAN)); 
```

但是，当我创建新的通道缓冲区时，它们是大端的，因此我必须手动将它们设为小端。

有没有办法让所有通道缓冲区默认为小端？

谢谢！

编辑：

我正在创建这样的缓冲区：

```
ChannelBuffer opcodeBuffer = ChannelBuffers.buffer(ByteOrder.LITTLE_ENDIAN, 4); 
```

如果我这样创建它们

```
ChannelBuffer opcodeBuffer = ChannelBuffers.buffer(4); 
```

它们不是小端的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T19:36:04.630

您使用的设置用于配置`Channel`应用程序中的对象创建的缓冲区。这意味着 Netty 创建的每个后备缓冲区都是小端的。

`ChannelBuffers`是一个静态助手类，它不能使用引导程序中的配置。如果您检查[docs](http://docs.jboss.org/netty/3.2/api/org/jboss/netty/buffer/ChannelBuffers.html#buffer%28int%29)，您会看到那些没有`ByteOrder`明确表示它们正在制作大端缓冲区的方法。

因此，如果您手动制作缓冲区，请确保使用正确的字节序。或者，您可以使用`ChannelBufferFactory`代码中的一种实现来轻松切换（如果需要）。

# css - 多语言网站大型CSS的有效开发与维护

> ID：12875800
> 
> 赞同：19
> 
> 时间：2012-10-13T18:33:03.337
> 
> 标签：css, internationalization, multilingual, right-to-left

考虑这种情况：您正在开发一个多语言 Web 应用程序。如果您定位的*所有*语言都是`LTR`或`RTL`，则您不需要特定语言的 CSS 规则。但是，如果您的目标语言是混合`LTR`语言`RTL`，则需要为每种语言指定页面的阅读方向。

如果您向元素添加`dir='ltr'`或，则从逻辑上讲，您应该期望它应该执行必要的魔术。`dir='rtl'``<body>`

但是，您实际上需要在 和 等规则中切换所有和`right`设置。您还需要更改规则，例如`left``text-direction``margin``margin: 0 10px 0 20px;``margin: 0 20px 0 10px;`

W3C 标准可以通过为与方向相关的规则允许另外两个值来避免这个问题。换句话说，代替`-right`and `-left`（如`margin-right`and `margin-left`），它们可以允许如下内容：

```
div.foo { margin-near: 100px; } 
/* This would be equivalent to margin-left in LTR, and margin-right in RTL */

div.bar { margin-far: 100px; } 
/* This would be equivalent to margin-right in LTR, and margin-left in RTL */ 
```

本质上，在您当前可以输入`left`或`right`基于方向的单词的所有规则/值中，您可以改为编写`near`or `far`。

鉴于当前 CSS 版本的弱点，我正在寻找一些建议来简化*创建*和*维护*双向大型 Web 应用程序。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-24T12:55:23.227

由于您将问题更改为预先考虑而不是事后考虑。

## 不太合乎逻辑

您说，“如果您从逻辑上添加`dir='rtl'`或`dir='ltr'`归因于`<body>`元素，您希望它会发挥作用。” 魔术显然是转换，“所有都`right`在规则中，就像and 。”`left``left``right``text-direction``margin`

但是，我不同意在所有情况下，您想要的必然是合乎逻辑的结果。有些实例`text-direction`和`margin`使用不一定与`text-direction`主站点相关。因为`margin`，这似乎是不言而喻的，因为很多时候`margin`可能用于某种形式的与文本完全无关的元素的定位。这`text-direction`不会自动翻转可能不太明显，但仍然有效。假设一个有一个英语 (LTR) 站点，其中包含阿拉伯语 (RTL) 的块引用。现在将主要语言转换为希伯来语（RTL），但仍然有阿拉伯语的引用——不应*自动*转换为 LTR，因为它是不正确的。

由于. _ `right`_`left``text-direction`

所以基本上，它归结为这样一个事实，当一个人设计一个旨在以一种可以翻转的方式提供多语言的网站时`text-direction`，人们必须在每个阶段考虑元素应该基于 LTR 或 RTL 配置做什么。

**这意味着，在我看来，CSS 没有弱点。任何弱点都在设计实现中。**

* * *

## 设计中的纯人类远见

因此，好的方法是选择您的标准方向（例如 LTR），并将其作为您使用直接 CSS 的“基本”计划。

然后，对于由于 RTL 更改而想要翻转的元素，您可以编写额外的 CSS 来解决这个问题，方法是将类应用于`<body>`目标，或者使用属性选择器，如`body[dir=rtl]`. 然后你仔细考虑你所做的每个元素是否应该受到该更改的影响，如果是，则添加 css（使用附加的方向选择器添加特异性以覆盖）：

```
.someClass {
    color: red;
    margin: 0 10px 0 20px;
    float: right;
}

body[dir=rtl] .someClass {
    margin: 0 20px 0 10px;
    /* kept float as right */
}

.someOtherClass {
    border: 1px 10px 1px 1px;
    margin: 0 30px 0 50px;
    float: left;
}

body[dir=rtl] .someOtherClass {
    border: 1px 1px 1px 10px; /* changed border for text */
    margin: 0 50px 0 30px;
    float: right;
} 
```

这就是像[LESS](http://www.lesscss.org/)或[SASS (SCSS)](http://sass-lang.com/)这样的预处理器（Dave 在他的回答中提到 LESS）可能会有所帮助的地方（请参阅下面的更新），但这仍然是一个需要深思熟虑的解决方案。

**如果您不希望代码中充斥着过多的 CSS**

您可以为在站点确定为该特定方向时加载的 RTL css 提供单独的样式表。这样做的可能缺点是它将“切换”代码与原始代码分开，因此维护可能更具挑战性（关于受主代码中 RTL 转换影响的元素的良好注释文档可以弥补这一点）。

* * *

## （更新）使用 LESS 来帮助？

这是通过像 LESS 这样的预处理器使过程更简洁的想法。此示例使用**LESS 1.4**（当前处于测试阶段）的功能。

## 理念一

*   优点：将所有值更改为一个选择器更改。
*   缺点：在参数中编码值需要做更多的工作。

**构建一个 mixin 以将所需的选择器应用于**

```
.rtl(...) {
  //getting the number of arguments 
  //(weeding out nested commas in parenthesis to do it)
  //they are expected to be grouped in pairs of TWO, 
  //as (property, value, property, value, etc.)
  @mainArgs: @arguments;
  @numArgs: unit(`"@{mainArgs}".replace(/\([^)]*\)/g,"").split(',').length`);

  //keep everything in one selector
  body[dir=rtl] & {
     //start the loop at 1
    .rtlPropLoop(@numArgs);
  }
  //loop to change all properties
  .rtlPropLoop(@total; @index: 1; @prop: extract(@mainArgs, @index); @value: extract(@mainArgs, (@index + 1))) when (@index =< @total) {
      //need to define all properties that could be switched
      //I've done just four here

      .setProp(ML) { //margin left
        margin-left: @value;
      }
      .setProp(MR) { //margin right
        margin-right: @value;
      }
      .setProp(FL) { //float
        float: @value;
      }
      .setProp(TD) { //text direction
        text-direction: @value;
      }
     //... define more possible values to switch

      //call setProp
      .setProp(@prop);
      //continue loop
      .rtlPropLoop(@total, (@index + 2));
  }
  //end loop
  .rtlPropLoop(@total, @index) when (@index > @total)  {}
} 
```

**然后在其他选择器中根据需要使用**

```
.test {
  margin: 0 20px 0 10px;
  float: right;
  .rtl(ML, 20px, MR, 10px, FL, left);
}

.test2 a span {
  float: left;
  text-direction: rtl;
  .rtl(TD, ltr, FL, right);
} 
```

**生成这个完成的代码**

```
.test {
  margin: 0 20px 0 10px;
  float: right;
}
body[dir=rtl] .test {
  margin-left: 20px;
  margin-right: 10px;
  float: left;
}
.test2 a span {
  float: left;
  text-direction: rtl;
}
body[dir=rtl] .test2 a span {
  text-direction: ltr;
  float: right;
} 
```

## 想法 2

*   优点：允许您使用与您想要的相似的语法；可以很容易地修改为与 LESS 1.3.3 一起使用。
*   缺点：如果在一个选择器中更改了多个值，则会产生过多的输出 css。

**使用您在 CSS 中所期望的语法构建一些辅助 mixin**

```
//define global variable for opposite direction
@oppDir: rtl;

//generic helper mixins used inside other helpers
//to auto flip right/left values
.flipSides(left) {
  @newSide: right;
}
.flipSides(right) {
  @newSide: left;
}

//specific property helper mixins
.padding-near(@top, @right, @bottom, @left) {
  padding: @top @right @bottom @left;
  body[dir=@{oppDir}] & {
    padding: @top @left @bottom @right;
  }
}
.margin-near(@top, @right, @bottom, @left) {
  margin: @top @right @bottom @left;
  body[dir=@{oppDir}] & {
    margin: @top @left @bottom @right;
  }
}
.float-near(@side) {
  float: @side;
  .flipSides(@side);
  body[dir=@{oppDir}] & {
    float: @newSide;
  }  
} 
```

**使用它们一次定义每个方向的近和远**

```
.test1 {
  .padding-near(10px, 30px, 2px, 40px);
  .margin-near(0, 10px, 0, 20px);
  .float-near(right);
}

.test2 {
  .float-near(left);
} 
```

**生成这个完成的代码（注意`.test1`相反方向的重复）**

```
.test1 {
  padding: 10px 30px 2px 40px;
  margin: 0 10px 0 20px;
  float: right;
}
body[dir=rtl] .test1 {
  padding: 10px 40px 2px 30px;
}
body[dir=rtl] .test1 {
  margin: 0 20px 0 10px;
}
body[dir=rtl] .test1 {
  float: left;
}
.test2 {
  float: left;
}
body[dir=rtl] .test2 {
  float: right;
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-13T18:38:32.213

不幸的是，CSS 在左右的概念上运行，这是正确的行为。有一些工具可以帮助您将 CSS 从 LTR 迁移到 RTL - 我知道的一个工具是[CSS Janus](http://code.google.com/p/cssjanus/)，它可以翻转 -left/-right 属性等等。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-13T18:42:18.807

我想如果你想要这个，你必须使用像[lesscss](http://lesscss.org/)这样的东西。

有一个[标准](http://dev.w3.org/csswg/css-variables/)可以解决这个问题，但我不知道有任何浏览器支持它。即使他们这样做了，它也可能会受到旧版浏览器支持的阻碍（但什么时候这*不是*问题？）。

除了所有的技术挑战，一旦完成，我想要很好地实现它，你仍然必须确保将每个对左/右的引用外部化，然后使用类似于媒体查询在响应式设计中的使用方式移动浏览器。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-28T16:11:09.783

我使用 Closure 样式表，这些东西就像命令行标志一样简单。

我将所有内容定义为 LTR（`direction:ltr`在必要时使用），然后`--output-orientation=RTL`在编译期间使用，我得到了为我生成的翻转 CSS。最后，在确定区域设置（在服务器上）时，我还确定要注入模板的 CSS。

Closure 中 LR 翻转的更多信息位于[https://code.google.com/p/closure-stylesheets/#RTL_Flipping](https://code.google.com/p/closure-stylesheets/#RTL_Flipping)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-21T15:37:01.340

有关尝试使用 SASS/LESS 克服弱点的一种解决方案的更多背景信息，请查看[http://anasnakawa.github.io/bi-app-sass/](http://anasnakawa.github.io/bi-app-sass/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-06-02T06:58:21.237

在问了这个问题三年后，我知道我看到了使用逻辑方向词汇而不是四向词的趋势。

[CSS 逻辑属性](https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Logical_Properties)现在解决了这个问题。Flex 模型使用`start`/`end`关键字 Blink 现在支持`start/end/before/after`关键字。诶

```
ul, menu, dir {
    -webkit-margin-before: 1em;
    -webkit-margin-after: 1em;
    -webkit-margin-start: 0px;
    -webkit-margin-end: 0px;
    -webkit-padding-start: 40px;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-10-07T10:28:44.057

在发布这个问题大约四年后，这个需求最终将由 w3 解决。[https://drafts.c​​sswg.org/css-logical/](https://drafts.csswg.org/css-logical/)

> 接受物理方向关键字值（顶部、底部、左侧或右侧）的属性被重新定义为也接受适当的流相关方向关键字。在这种情况下，可以使用流量相关值代替相应的物理值。对于采用多个关键字的属性，不允许组合流量相关值和物理值（除非在未来的规范中另有规定）。

*   [https://developer.mozilla.org/en-US/docs/Web/CSS/margin-block-start](https://developer.mozilla.org/en-US/docs/Web/CSS/margin-block-start)
*   [https://hitkey.nekokan.dyndns.info/writing-mode-switcher-logical.htm](https://hitkey.nekokan.dyndns.info/writing-mode-switcher-logical.htm)

# templates - 延迟初始化和模板 - 链接器错误

> ID：12875810
> 
> 赞同：0
> 
> 时间：2012-10-13T18:33:49.333
> 
> 标签：templates, visual-c++, lazy-initialization, unresolved-external

我的申请有一个普遍的问题。我想对我制作的 Array 类使用延迟初始化，以提高性能；当所有代码都在单个 *.h 文件中时，一切正常，但是当我将代码拆分为 *.h*.cpp 文件时，编译器会返回链接器错误。在头文件中我有一个

```
template <class T>
class simpleArray { ... some methods\operators declarations. ... } 
```

和

```
template <typename T, typename derType=simpleArray<T>>
class myArray{.... some methods\operators declarations. ... } 
```

我有明确的声明：

```
template class myArray<double>; 
template class myArray<int>;
template class simpleArray<double>; 
template class simpleArray<int>; 
```

在 *.cpp 文件中，我实现了方法和运算符。特别是我有两个赋值运算符：

```
template <class T, class derType>   
myArray<T,derType>& myArray<T,derType>::operator= (myArray<T,derType> const& right)
    {... some code ...}

template<class T, class derType>
template <class T2, class R2>   
    myArray<T,derType>& myArray<T,derType>::operator= (myArray<T2,R2> const& right) 
    { ... some code ...} 
```

第一个工作正常，第二个（Arra=Array）返回以下错误：

```
 Error  70  error LNK1120: 1 unresolved externals   
 Error  69  error LNK2019: unresolved external symbol "public: class myArray <double,class simpleArray<double> > & __thiscall myArray <double,class simpleArray<double> >::operator=<int,class simpleArray<int> >(class myArray <int,class simpleArray<int> > const &)" 
```

您能否提出一些解决方案？我必须在同一个文件中包含所有代码吗？我希望已经清楚了。谢谢你的支持！

附言。使用模板时是否有一些关于代码组织的“最佳实践”文档？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T22:46:39.367

由于您已将模板`operator=`定义放在`.cpp`文件中而引发的问题：

```
template <class T, class derType>
template <class T2, class R2>
myArray<T,derType>& myArray<T,derType>::operator=(myArray<T2,R2> const& right)
{ ... } 
```

您正在使用的显式实例化适用于模板类的常规函数​​成员，但不适用于模板类的模板函数成员。仅仅因为在显式实例化指令中，您只提供作为类模板参数的实际`T`和类型，`derType`而不是作为函数模板参数的类型。`T2``R2`

可能的解决方案：

1.  将模板`operator=`定义移至`.h`，因此编译器将能够在调用位置对其进行实例化
2.  使用/和/`operator=`的所有可能组合为模板提供显式实例化：`T``derType``T2``R2`

样本：

```
 // Explicit instantiation of template classes
 template class myArray<double>;
 template class myArray<int>;
 template class simpleArray<double>;
 template class simpleArray<int>; 

 // Explicit instantiation of template members
 template myArray<double>& myArray<double>::operator=(myArray<int> const&);
 template myArray<int>& myArray<int>::operator=(myArray<double> const&); 
```

PS 最好的模板指南仍然是[C++ 模板。David Vandevoorde 和 Nicolai M. Josuttis的完整指南](http://www.josuttis.com/tmplbook/)。它尚未涵盖新的 C++11 功能，但基础知识和最高级的主题仍然是实际的。

# apache - Wamp 和 PhpMyAdmin 不工作

> ID：12875811
> 
> 赞同：0
> 
> 时间：2012-10-13T18:33:57.323
> 
> 标签：apache, phpmyadmin, wamp

从这个问题跟进：[Mod Rewrite 让我很难过](https://stackoverflow.com/questions/12852962/mod-rewrite-is-giving-me-a-hard-time)

我正在尝试在 Wamp 中访问 phpmyadmin。它给了我一个 404，它甚至不存在。我已经尝试并尝试对此进行研究。我没有Skype或类似的东西。

我的 localhost/rs 文件夹中确实有一个来自其他问题的 .htaccess 文件。我已阅读更改端口，但似乎没有帮助。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T18:40:37.203

我曾经遇到过一个问题，即更改端口会导致找不到 phpmyadmin。原来，当我尝试浏览它时，它会在“127.0.0.1::”之后自动插入错误的端口号。确保这是您在配置文件中设置的端口。

确保您的 htaccess 的重写基础也可以。如果它在您的“rs”文件夹中，则重写基础是“/rs/”。

下一次，请添加您的 .htaccess 代码。

还要确保它是 .htaccess （带点）

# service - 如何将修饰符用户存储在 Symfony 2 实体中

> ID：12875813
> 
> 赞同：2
> 
> 时间：2012-10-13T18:34:03.680
> 
> 标签：service, symfony, model, entity

我想让实体记录最近修改过实体的用户（最好是他的 ID）。我认为一个漂亮的实体有一个 getModifier() 方法，但没有 setModifier() ，因为它是由类作为内部事务处理的。我会使用一些 prePersist 来使用用户 ID 更新实体。所以这里有两个主要问题：

1) 从技术上讲，如何在实体的 prePersist 中获取当前用户的 ID？

2）哲学。我找到了很多答案，建议我重新考虑我的模型，不要依赖于存储在其中的数据以外的任何东西。我看不出将实体与世界其他地方隔离开来是多么理智：请看这里关于实体可以做什么的两个对比。访问服务以获取可以存储某些缓存输出的文件夹名称被认为是非法的；虽然使用文件抽象类写入文件系统是可以的；我认为后者对文件系统做出了更多假设。访问当前用户的身份被认为是非法的；同时将当前时间戳放在实体上是可以的；所以（可能缺少）用户的概念是坏的，而时间的概念是好的？如果不依赖模型本身以外的任何东西的概念是有效的，那么还有人敢使用 DateTime 函数吗？（请不要说 PHP 的服务总是可以访问的，因为一些缺少的设置/扩展很容易导致这些失败。）我看不到如何在遵守如此严格的限制的同时将任何逻辑构建到实体中，以及如何避免实体最终只是数据（通过这种级别的封装和信息隐藏，这个实体模型提供给我的只是数组）。谁能指出我不能使用的模型环境元素和那些被认为是合法的元素之间的特殊区别是什么？并不是说 PHP 的服务总是可以访问的，因为一些缺少的设置/扩展很容易导致这些失败。）我看不到如何在遵守如此严格的限制的同时将任何逻辑构建到实体中，以及如何避免实体结束最多不过是数据（通过这种级别的封装和信息隐藏，这个实体模型提供给我的只是数组）。谁能指出我不能使用的模型环境元素和那些被认为是合法的元素之间的特殊区别是什么？并不是说 PHP 的服务总是可以访问的，因为一些缺少的设置/扩展很容易导致这些失败。）我看不到如何在遵守如此严格的限制的同时将任何逻辑构建到实体中，以及如何避免实体结束最多不过是数据（通过这种级别的封装和信息隐藏，这个实体模型提供给我的只是数组）。谁能指出我不能使用的模型环境元素和那些被认为是合法的元素之间的特殊区别是什么？以及如何避免实体最终只是数据（通过这种级别的封装和信息隐藏，这个实体模型提供给我的只是数组）。谁能指出我不能使用的模型环境元素和那些被认为是合法的元素之间的特殊区别是什么？以及如何避免实体最终只是数据（通过这种级别的封装和信息隐藏，这个实体模型提供给我的只是数组）。谁能指出我不能使用的模型环境元素和那些被认为是合法的元素之间的特殊区别是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T19:56:16.933

让我把我的答案分成两部分：

**关于 1)**

你不能。学说很难做到这一点。虽然您在 2) 中的问题将在下面讨论，但我们可以这样说：普遍的理解是，模型不知道作为服务的东西，而是被服务用来使它们可重用。

为什么不组合 setter 并为组合的 setter 添加一个 $user 属性，像这样设置修饰符：

```
public function setAttributes($user, $attr1, $attr2)
{
    $this->modifier = $user;
    $this->attr1 = $attr1;
    $this->attr2 = $attr2;
} 
```

当然，您也可以将用户添加到每个 setter。

当然，还有其他方法。例如，您可以添加一个非持久性属性`activeUser`并在 prePersist 上使用它，或者如果未设置则抛出异常。

**关于2)**

首先，让我们承认有两种思想流派。一是模型可以保存业务逻辑并且可以使用其他类，但不应该依赖于更大的图景，这意味着它们不应该从调用者那里获取复杂的对象。另一个（我在这个）是模型应该是不应该包含业务逻辑的转储数据存储。

两人都认为模型应该或多或少愚蠢。如果您查看活动记录（由 symfony 1 和 RoR 使用），您会看到另一个模型概念，这些模型知道它们的上下文，例如必须了解数据库。虽然这有一些优点（比如你可以从内部保存模型，或者你可以让它知道哪个用户现在在对它进行操作），但你也有很大的缺点（比如模型依赖于一个很好的上下文，因此很难迁移它甚至测试ist）。

Doctrine 不使用 Active Record，因此您将不得不忍受这种或多或少的“转储对象”，或者将 ORM 与使用 Active Record 概念的 ORM（如[Redbeanphp](http://redbeanphp.com/)）交换。

# jquery - 未删除 css 类元素

> ID：12875814
> 
> 赞同：8
> 
> 时间：2012-10-13T18:34:14.467
> 
> 标签：jquery

如何获取未删除类“.deleted”的元素？

```
<ul class="users">
    <li class="user">mack</li>
    <li class="user">david</li>
    <li class="user">Resa</li>
    <li class="user deleted">Stock</li>
    <li class="user">fame</li>
    <li class="user">clock</li>
</ul> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-13T18:39:50.007

所以; 您可以使用 css 选择器和方法来完成。

**。不是（）**

```
jQuery("ul.users li").not(".deleted"); 
```

或**jQuery(":not()")**

```
jQuery("ul.users li:not(.deleted)"); 
```

介于使用“:not”和“.not()”选择器之间

请参阅[使用 ":not" 和 ".not()" 选择器之间的性能差异？](https://stackoverflow.com/questions/8845811/performance-differences-between-using-not-and-not-selectors)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-13T18:35:57.760

使用[`:not()`](http://api.jquery.com/not-selector/)：

```
$("li:not(.deleted)") 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-13T18:36:15.140

```
$("ul.users > li.user:not(.deleted)"); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-13T18:36:14.867

```
$('.users .user').not('.deleted'); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-10-13T18:36:26.333

使用 jQuery：

```
$(".users li:not(.deleted)") 
```

# java - Java：带一个参数的构造函数；错误 - 找不到符号 - 变量

> ID：12875816
> 
> 赞同：1
> 
> 时间：2012-10-13T18:34:19.883
> 
> 标签：java, constructor, runtime-error

我从事 Java 编程（我在大学的第一年）。我有一个评估，我需要创建 3 个类。在其中一个类中，我需要一个带有 String 类型参数的构造函数。它需要允许我创建一个新对象（薯片包），我应该在其中陈述它的味道。

每当我尝试创建对象时，我都会得到一个文本框，我可以在其中输入薯片的味道，但是当我按下确定时，我得到错误（例如）找不到符号 - 变量 bbq。

我之前有一个类似的例子，它采用 int 类型并且效果很好。

当我将我的代码与其他工作示例进行比较时，我真的找不到我做错了什么。

如果有人可以提供建议，我将不胜感激。

```
public class PackOfCrisps
{
private String flavour;
private int numOfCrisps;
private boolean open;

/**
 * Constructor for a single pack of crisps.
 */
public PackOfCrisps(String newFlavour)
{
    flavour = newFlavour;
    numOfCrisps = 10;
    open = true;
}

/**
 * Return whether the packet is empty.
 */
public boolean isEmpty() 
{
    if (numOfCrisps == 0) 
    {
        return true;
    } else
        return false;
}

/**
 * Return whether the packet is closed.
 */
public boolean isClosed() 
{
    return open;
}

/**
 * Change the boolean value of 'open' variable.
 */
public void open()
{
    open = !open;
}

/**
 * Return the flavour of the packet of crisps.
 */
public String getFlavour()
{
    return flavour;
}

/**
 * Decrease the number of crisps by 1 until the packet is empty.
 */
public void eatCrisps()
{
    if (open) 
    {
        System.out.println("Need to open the packet first!");
    } else if ((numOfCrisps > 1) && (numOfCrisps <= 10)){
        numOfCrisps = numOfCrisps - 1;

        System.out.println(numOfCrisps);
    } else {
        System.out.println("The packet is empty!");
    }
} 
```

}

更新

我正在使用 BlueJ 进行编程。我想这一定是我想念的一些非常“简单”的东西，因为这是我在大学的第三周，我们实际上是从头开始的。

更新 2

如果我的答案并不总是 100% 地描述所有内容，我很抱歉，但因为我仍然是编程的菜鸟，所以我一定会错过一些信息。我认为这将是您问题的答案：因为我使用 BlueJ，所以当我在编译器中有一个类时（我相信显示在类图中），我只需右键单击它并选择“new PackOfCrisps（String newFlavour）”然后我得到了可以在其中输入薯片风味的框，但是当我按“确定”时，我收到错误消息。

![他是我得到/看到的全部](../Images/de55fb984f44209e51cd16719971ac76.png)

我尝试使用其他选项来查看是否可以获得更多信息，但没有成功。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T19:42:14.820

注意：这是上面的评论，但我将其“提升”为答案。

根据您的更新 2 和上面的屏幕截图是我的猜测。

BlueJ 弹出的文本框可能允许您输入变量名或字符串。如果您希望它是一个字符串，请输入带有引号的“BBQ”。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-10-23T12:28:49.293

在“bbq”这样的引号中键入 bbq。它会起作用的

# c# - 使用不用于本地化的资源文件？

> ID：12875819
> 
> 赞同：0
> 
> 时间：2012-10-13T18:34:43.790
> 
> 标签：c#, winforms, resx

我想在运行时动态更改标签，我有几个选项，但不确定哪个是最好的，这里最好的意思是我是最精简的，没有太多开销：

1.  包含标签名称及其值的表。
2.  包含标签值的资源文件。
3.  仅具有具有标签值的属性或常量的类。

对于 2 和 3，我会将它们保存在单独的 DLL 中，因此如果我只想更改标签名称，则不必部署整个应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T19:25:38.170

您是否研究过 c# 中的卫星程序集？这应该可以轻松地在资源文件中进行本地化：http: [//ondotnet.com/pub/a/dotnet/2002/10/14/local2.htm](http://ondotnet.com/pub/a/dotnet/2002/10/14/local2.htm)

# parsing - scala解析器组合器stackoverflow递归

> ID：12875829
> 
> 赞同：3
> 
> 时间：2012-10-13T18:36:07.853
> 
> 标签：parsing, scala, recursion, stack-overflow

以下代码示例在解析深嵌套在括号中的表达式时由于堆栈溢出而崩溃。

解析器组合器是标准库的一部分。有没有办法利用图书馆避免这种情况？

（我不是在问它崩溃的原因，而是在问处理标准库的正确方法。）

解析：((((((((... 1 + 1 ...)))))))))

代码：

```
import scala.util.parsing.combinator.syntactical.StandardTokenParsers

object ArithmeticParser1 extends StandardTokenParsers {   
  lexical.delimiters ++= List("(", ")", "+", "-", "*", "/")

  val reduceList: Int ~ List[String ~ Int] => Int = {
    case i ~ ps => (i /: ps)(reduce) 
  }

  def reduce(x: Int, r: String ~ Int) = (r: @unchecked) match {
    case "+" ~ y => x + y
    case "-" ~ y => x - y
    case "*" ~ y => x * y
    case "/" ~ y => x / y
  }

  def expr  : Parser[Int] = term ~ rep ("+" ~ term | "-" ~ term) ^^ reduceList
  def term  : Parser[Int] = factor ~ rep ("*" ~ factor | "/" ~ factor) ^^ reduceList
  def factor: Parser[Int] = "(" ~> expr <~ ")" | numericLit ^^ (_.toInt)

  def main(args: Array[String]) {
    val s = scala.io.Source.fromFile(args(0)).mkString
    val tokens = new lexical.Scanner(s)
    println(s)
    println(phrase(expr)(tokens))
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T21:45:50.083

我不确定您将如何使用 scala 解析器组合器来处理它。我的第一个想法是蹦床[1] - 但是快速谷歌搜索似乎说默认库不支持这个。因此，我认为解决此问题的主要方法是使用`-Xss`不太理想的方法。

但是[https://github.com/djspiewak/gll-combinators](https://github.com/djspiewak/gll-combinators)支持蹦床，并且它似乎具有与标准库类似的 API。

# mysql - NotORM 的连接与多选

> ID：12875835
> 
> 赞同：4
> 
> 时间：2012-10-13T18:36:32.783
> 
> 标签：mysql, sql, notorm

我正在查看这个名为[NotORM](http://notorm.com)的 PHP DB 库，在阅读它的文档后，我已经阅读了它关于连接的立场。争论基本上是单个 SQL 查询的性能与连接与使用多个选择查询然后交叉引用 DB 抽象层中的结果。

我一直都知道单个查询应该总是比使用多个查询更好，所以 NotORM 的想法对我来说是新的。我也不确定这一点，因为我只在 NotORM 中看到了这个“功能”。

想问问大家对这个问题的看法。

哪个查询更好更快？

这...

```
SELECT application.*, tag.*
    FROM application
    LEFT JOIN application_tag ON application.id = application_tag.application_id
    LEFT JOIN tag ON application_tag.tag_id = tag.id
    ORDER BY application.id 
```

相对...

```
SELECT * FROM application LIMIT 4;
SELECT * FROM application_tag WHERE application_id IN ('1', '2', '3', '4');
SELECT * FROM tag WHERE id IN ('21', '22', '23', '24'); 
```

这第二种方法真的实用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T19:40:25.857

我希望单个查询会更快一些。但是将取决于 php 和 MySQL 之间的通信。当我尝试对其进行基准测试时，仅进行查询（无论多么简单）都会产生明显的开销。

但是，如果查询变得太复杂，您就会遇到难以维护的东西。

如果您尝试使用任何自定义过程，则会出现另一点。例如，我需要根据 Levenshtein 距离（即单词的相似程度）进行一些处理。我为此找到的 MySQL 函数比使用 PHPs Levenshtein 函数检索数据和处理要慢得多。

# rake - Redmine: rake db:migrate segfaults

> ID：12875837
> 
> 赞同：1
> 
> 时间：2012-10-13T18:36:51.700
> 
> 标签：rake, redmine

```
 [~/redmine]# RAILS_ENV=production rake db:migrate --trace
** Invoke db:migrate (first_time)
** Invoke environment (first_time)
** Execute environment
** Invoke db:load_config (first_time)
** Execute db:load_config
** Execute db:migrate
==  InsertBuiltinRoles: migrating =============================================
/usr/lib/ruby/1.8/yaml.rb:133: [BUG] Segmentation fault
ruby 1.8.7 (2009-06-08 patchlevel 173) [x86_64-linux]

Aborted (core dumped) 
```

尝试安装 redmine 并在尝试迁移数据库时获取此信息。google 上什么都没有，有什么建议吗？已尝试使用 mysql2 适配器，但每次运行仍会出现新的段错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T13:59:47.583

我很想说问题不是来自 Redmine，而是来自您的 Ruby 安装。

您是否在系统上重新安装/更新了 libyaml？

旁注：除非你真的需要 1.8 版本，否则你应该使用 Ruby 1.9。

# android - Android - 如何使用模拟器测试带有扩展文件的应用程序？

> ID：12875840
> 
> 赞同：2
> 
> 时间：2012-10-13T18:37:08.047
> 
> 标签：android, android-emulator, avd, apk-expansion-files

我正在为使用扩展文件的 android 设备开发一个应用程序，并希望在 AVD 上对其进行测试。我的应用程序包含手动下载扩展文件的代码，但在 AVD 上运行时失败（`onDownloadStateChanged`使用 value 调用方法`STATE_FAILED_FETCHING_URL`，并显示消息：“下载停止，因为找不到资源”）。我在真实设备上测试了该应用程序并且它工作正常。如何使下载工作，或手动添加 Expansoin 文件？

如果它改变了一些，我的电脑运行 Windows 7，我使用 Eclipse IDE Juno Release。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T20:17:24.450

您可以通过命令行或使用 Eclipse 中的 DDMS 透视图将扩展文件加载到 AVD 上。在 DDMS 中，选择文件资源管理器选项卡，然后遍历应存储扩展文件的目录。然后选择带有传入箭头图标的手机。然后，您可以选择要加载到 AVD 的文件。这种方法的缺点是一次只允许上传一个文件。

您可以使用 [adb 命令一次上传多个文件][1]。

# batch-file - XCOPY 中带空格的文件夹名称不起作用？

> ID：12875842
> 
> 赞同：4
> 
> 时间：2012-10-13T18:37:35.817
> 
> 标签：batch-file, cmd, xcopy

在我的电脑上备份各种重要文件夹的批处理脚本时，我遇到了一个问题。我似乎无法复制名称中有空格的文件夹。如果有一个有空格的子文件夹而它的父文件夹没有，它工作得很好。我似乎也有一个问题，我对“我的文档”文件夹拥有完全权限，但 XCOPY 不会复制说“拒绝访问”。很感谢任何形式的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-13T18:38:45.177

用引号将您的源规范括起来，如

```
xcopy "c:\my documents\some folder\*.*" ... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-14T15:01:12.613

您似乎使用的是 Windows 7（或 Vista）。在这些系统上`My Documents`是一个符号链接，它只是为了向后兼容而存在，用户不能访问。您的文档文件夹的实际位置是`C:\Users\Sean Webber\Documents`. 将您的脚本更改为

```
xcopy "%USERPROFILE%\Documents" "F:\New Folder" /s /e /i 
```

# sql - Oracle SQL：如何从分层表中获取 xml

> ID：12875845
> 
> 赞同：3
> 
> 时间：2012-10-13T18:37:52.010
> 
> 标签：sql, xml, oracle, hierarchical

```
id  parent_id  Name         Text
0 ...........  body_text   

1 ..........0  text....... . something

2 ..........0  blank       

3 ..........2  text ........ something

4 ...........  info        

5 ..........4  text ........ something 
```

谁知道如何从之前的分层表中得到如下的xml格式：

```
<?xml version "................."?>
<body_text>
<text>something</text>
<blank>
    <text>something</text>
</blank>
</body_text>
<info>
 <text>some</text>
</info> 
```

唯一知道如何做的一部分是现在这也不起作用：

```
select DBMS_XMLGEN.getXML(DBMS_XMLGEN.newcontextfromhierarchy('SELECT level,
XMLElement(evalname(Name), text))
from my_table t
START WITH id_parent is null
CONNECT BY PRIOR id = parent_id'))
 FROM dual 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T19:13:40.273

您提供的查询将为您提供您期望的结果。你只有几个语法错误。第一的。`parent_id`并且列名在您的查询中`id_parent`具有不同的位置。`id`使它们相同。第二。`)`删除最后一个括号`XMLElement(evalname(Name), text))`

```
SQL> set long 300

SQL> create table  t1 (id1,  parent_id,  Name1, Text) as(
  2  select 0, null, 'body_text', null        from dual union all
  3  select 1, 0,    'text',      'something' from dual union all
  4  select 2, 0,    'blank',     null        from dual union all
  5  select 3, 2,    'text' ,     'something' from dual union all
  6  select 4, null, 'info',      null        from dual union all
  7  select 5, 4,    'text',     'something'  from dual
  8  );

Table created

SQL> select DBMS_XMLGEN.getXML(DBMS_XMLGEN.newcontextfromhierarchy('SELECT level,
  2     XMLElement(evalname(Name1), text)
  3    from t1 t
  4    start with parent_id is null
  5    connect by prior id1 = parent_id')) xml
  6   from dual
  7  ;

xml
--------------------------------------------------------------------------------
<body_text>
  <text>something</text>
  <blank>
    <text>something</text>
  </blank>
</body_text>
<info>
  <text>something</text>
</info>

SQL>  select '<?xml version="1.0" ?>'
  2     || chr(10)
  3     || DBMS_XMLGEN.getXML(DBMS_XMLGEN.newcontextfromhierarchy('SELECT level,
  4            XMLElement(evalname(Name1), text)
  5          from t1 t
  6          start with parent_id is null
  7          connect by prior id1 = parent_id')) as xml
  8   FROM dual
  9  ;

XML
--------------------------------------------------------------------------------
<?xml version="1.0" ?>
<body_text>
  <text>something</text>
  <blank>
    <text>something</text>
  </blank>
</body_text>
<info>
  <text>something</text>
</info> 
```

# javascript - Windows 8 Metro 应用程序获取外部数据

> ID：12875853
> 
> 赞同：2
> 
> 时间：2012-10-13T18:38:33.150
> 
> 标签：javascript, windows-8

我是 Windows 8 Metro 的新开发人员。我正在尝试开发一个可以从特定网站的 HTML 异步提取数据的应用程序。事实上，我只需要该特定网页中几个 div 的数据。我在 VS2012 中为 Grid App 使用 JS 模板。有没有办法做到这一点？这里的任何帮助或指示将不胜感激！

注意：我试图从中提取数据的网站允许这样的抓取，所以不用担心那里的合法性。只是他们没有提供任何 API 来检索数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T19:42:56.073

您可以使用 HttpClient 类从 URL 检索内容。

```
HttpClient http = new HttpClient();
http.DefaultRequestHeaders.Add("Accept", "text/html,application/xhtml+xml,application/xml,application/json;q=0.9,*/*;q=0.8");
HttpResponseMessage response = await http.GetAsync(feed.Url);
string content = await response.Content.ReadAsStringAsync(); 
```

将内容作为字符串检索后，您可以使用正则表达式来解析您打算使用的数据。

编辑：刚刚意识到这是一个 Javascript 问题。您可以使用 WinJS.xhr，它是 XMLHttpRequest 的包装器。

快速入门： http: [//msdn.microsoft.com/en-us/library/windows/apps/Hh868282%28v=win.10%29.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/Hh868282%28v=win.10%29.aspx) 参考：http: [//msdn.microsoft.com/en-us/库/windows/apps/br229787.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/br229787.aspx)

# rest - 按当前用户的 SharePoint 2010 REST 筛选器

> ID：12875860
> 
> 赞同：4
> 
> 时间：2012-10-13T18:38:58.807
> 
> 标签：rest, sharepoint-2010

在 SharePoint 2010 中使用 REST，您如何选择/过滤属于当前登录用户的列表行（无论是按作者、编辑器还是按人员字段进行过滤）

例如

```
http://myserver/_vti_bin/ListData.svc/Test?$filter=Author eq Me 
```

我知道在 SP2007 中，使用 caml 您可以使用代表当前用户值的 UserID 元素。

编辑：嗯，似乎作者、编辑和任何其他人员字段都存储为整数，并重命名为 CreatedById 和 ModifiedById。如果你查询一个列表，你得到的只是

```
<d:CreatedById m:type="Edm.Int32">1</d:CreatedById> 
```

如果我想取回用户的 NT 名称怎么办？我是否必须在某处进行另一个查询才能获取某个用户的 Int 值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-11-05T08:44:09.583

您也可以将其与 UserID 一起使用。使用代码检索 UserId：

`var userId = _spPageContextInfo.userId;`

并在 URL 中使用它，如下所示：

```
"http://spdevportal/dev/Lab2/_vti_bin/ListData.svc/IPParams?$filter=CreatedById eq"+userId 
```

前任： `http://spdevportal/dev/Lab2/_vti_bin/ListData.svc/IPParams?$filter=CreatedById eq 213`

它将为您提供当前登录用户创建的所有项目。

您还可以使用“和”添加一些额外的过滤器

```
"http://spdevportal/dev/Lab2/_vti_bin/ListData.svc/IPParams?$filter=CreatedById eq"+userId+" and StatusValue eq 'approved'" 
```

前任：

```
"http://spdevportal/dev/Lab2/_vti_bin/ListData.svc/IPParams?$filter=CreatedById eq 213 and  StatusValue eq 'approved'" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-08T12:20:40.297

看

`http://spdevportal/dev/Lab2/_vti_bin/ListData.svc/IPParams?$expand=CreatedBy`

并使用

`http://spdevportal/dev/Lab2/_vti_bin/ListData.svc/IPParams?$filter=CreatedBy/Account eq 'OFFICE\alexandr.pletnev'`

# mysql - 是否可以从 phpmyadmin 3.4.10.1 中运行存储过程？

> ID：12875864
> 
> 赞同：3
> 
> 时间：2012-10-13T18:39:21.693
> 
> 标签：mysql, stored-procedures, phpmyadmin

我想知道 phpMyAdmin 是否可以“运行”存储过程。我知道我可以使用 phpmyadmin 中的 sql 选项卡创建存储过程，并且存储过程存储在 InformationSchema 数据库下的 Routines 表中。

当我尝试从数据库中某个表的 sql 选项卡中调用该过程时，我收到`#1312 - PROCEDURE dbname.procname can't return a result set in the given context.`错误消息。

有什么方法可以从 phpmyadmin 中调用（执行程序）吗？如果是，请告诉我应该在哪里输入运行 proc 的 sql 代码。

版本详情：

```
phpmyadmin: 3.4.10.1
php: 5.3.6
mysql: 5.1.63 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T18:47:06.170

直接从 phpMyAdmin 调用存储过程需要 phpMyAdmin **3.5.2.2**或更高版本。

# bash - BASH - 停止执行源脚本

> ID：12875867
> 
> 赞同：0
> 
> 时间：2012-10-13T18:39:51.430
> 
> 标签：bash

我有一个脚本可以使用源代码运行其他脚本。我想要做的是找到正在运行的那些脚本，如果它们中的任何一个正在运行，则停止执行它。像这样的东西：

```
 #!/bin/bash

 source /path/script1.sh
 source /path/sript2.sh
 source /path/sript3.sh

 if [ a_script_is_running ]
 then
      stop_execution scriptn.sh
 fi 
```

如果其中一个脚本正在运行无限循环，有没有办法停止这个循环并继续执行主脚本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T18:58:43.830

您正在寻找的是背景壳以及如何杀死它们。

第一步是将这些脚本分叉到后台而不是采购它们。采购他们只是将他们的代码插入到您当前的脚本中。

因此，您可以执行以下操作：

```
# '&' forks a script into the background
/path/script1.sh &
/path/script2.sh &
/path/script3.sh &
...
# now when you need to make sure that they are all killed
kill $(jobs -p) 
```

的解释`source`

如果我有 3 个脚本：

脚本.1.sh：

```
echo "hello world" 
```

脚本.2.sh：

```
source script.1.sh
source script.1.sh 
```

脚本.3.sh：

```
echo "hello world"
echo "hello world" 
```

script.3.sh 和 script.2.sh 在功能上没有区别。没有任何。他们都将使用一个 shell 进程（echo 是内置的），并且会一个接一个地调用 echo "hello world" 两次。

脚本4.sh：

```
script.1.sh &
script.1.sh & 
```

这个不同。它分叉了两个后台脚本（都称为 script.1.sh，尽管它们有不同的进程 ID），每个后台进程都会回显“hello world”然后退出。它看起来是一样的，但在这种情况下，您实际上可以杀死其中一个，因为它们是从您的主脚本异步执行的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T18:50:15.053

脚本不是进程，它仅由 shell 解释（尽管它可能会产生其他进程）。因为它不是一个进程，所以它不会被分配 a `pid`，这意味着你不能杀死它。您可以杀死的是由其他脚本启动的进程。例如，如果`script1.sh`开始`wget`下载，您可以终止该`wget`进程（无论如何您都需要它的 pid，以确保您需要终止该进程）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T20:26:48.777

您的基本前提是问题：

```
source /path/script1.sh 
source /path/sript2.sh 
source /path/sript3.sh 

                       <- At this point, all those scripts have run to completion

if [ a_script_is_running ]       <- It won't be!
then 
     stop_execution scriptn.sh   <- Too late!  
fi 
```

在使用它们之前，将源文件作为模块化单元进行测试。永远不要，`source`你不是 100% 有信心的文件。

您说您不在后台运行它们，因为您需要共享变量：再次查看您的设计。

如果您需要传递数据，请考虑使用命名管道（又名 fifo，请参阅 参考资料`man mkfifo`）或其他形式的进程间通信。

# php - preg_match_all 用于磁铁链接

> ID：12875874
> 
> 赞同：-1
> 
> 时间：2012-10-13T18:41:35.363
> 
> 标签：php

我想使用 preg_match_all 从线程中获取磁力链接，然后使用第一个磁力链接。

我尝试了很多模式，但没有任何效果。

```
$uris = array();
preg_match_all('\'http://magnet:?\'', $post, $uris);
foreach ($uris[0] as $href) {
//////////////////////////////
$magnetUri = $href;
break;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T18:51:54.990

我曾经使用调用来匹配`TTH`磁铁。`preg_match`也许，这对你有用：

```
preg_match( '/magnet:\?xt=urn:tree:tiger:(?P<tth>\w+)/', $rows['msg'], $matchTTH ); 
```

当然，在这种情况下，我存储了`TTH`每个磁铁的 ，您可以使用[这些哈希](http://en.wikipedia.org/wiki/Magnet_uri#URN.2C_containing_hash_.28xt.29)中的任何其他。

# facebook - 像 graphAPI 那样关联朋友的 FQL

> ID：12875878
> 
> 赞同：0
> 
> 时间：2012-10-13T18:41:40.823
> 
> 标签：facebook, api, facebook-graph-api, facebook-fql

我需要知道一个用户与另一个用户成为朋友的时间。

我有一个问题...... graphAPI 中的“updated_time”字段会给我（我认为）友谊被改变（创建）的时间。像

[http://developers.facebook.com/tools/explorer?method=GET&path=me%3Ffields%3Dfriends.limit%2810%29.fields%28gender%2Cname%2Cupdated_time%29](http://developers.facebook.com/tools/explorer?method=GET&path=me%3Ffields%3Dfriends.limit%2810%29.fields%28gender%2Cname%2Cupdated_time%29)

但是，我想改用 FQL，以便可以使用 order_by 参数。我在 FQL 模拟的朋友“列”中找不到该字段（updated_time）。实际上只有 uid1 和 uid2 在朋友“列”中。我当然可以获取有关用户 (uid2) 的信息，但该信息不会直接将其与其他用户相关联。

有人对此有任何帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T15:15:55.627

您无法从`friend`FQL 中的表或`friends`Graph API 中的端点获取友谊开始的时间。出于安全目的，Facebook 故意省略了这些。

找到此问题的唯一方法是查询`stream`FQL 表或`feed`API 端点并查找您和目标用户现在成为朋友的公告。

# wpf - 2个组合框之间的WPF主/详细数据绑定

> ID：12875887
> 
> 赞同：1
> 
> 时间：2012-10-13T18:42:39.153
> 
> 标签：wpf, data-binding

我有两个组合框，父必须显示国家列表，子组合必须显示所选国家的城市列表。数据存储在一个`Dictionary<Int32, List<String>>`名为的文件`CountriesCitiesList`中。我有以下代码

```
<ComboBox x:Name="cbCountriesList" 
    DataContext="{Binding CountriesCitiesList}"
    IsSynchronizedWithCurrentItem="true">
</ComboBox>

<ComboBox x:Name="cbCitiesList" VirtualizingStackPanel.IsVirtualizing="True"                  
          ItemsSource="{Binding CountriesCitiesList}"
          IsSynchronizedWithCurrentItem="true">
</ComboBox> 
```

问题是在城市组合中我无法显示所选国家的城市列表。我觉得缺少最后一步。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-13T19:14:21.537

如果您的字典`CountriesCitiesList`包含作为键的国家 ID 和作为城市名称的列表，则可以以纯 xaml 方式将其绑定，如下所示 -

```
<ComboBox x:Name="cbCountriesList"
          ItemsSource="{Binding CountriesCitiesList}"
          IsSynchronizedWithCurrentItem="True">
   <ComboBox.ItemTemplate>
      <DataTemplate>
         <TextBlock Text="{Binding Key}"/>
      </DataTemplate>
   </ComboBox.ItemTemplate>
</ComboBox>
<ComboBox x:Name="cbCitiesList"
          ItemsSource="{Binding SelectedItem.Value, ElementName=cbCountriesList}"
          IsSynchronizedWithCurrentItem="True"/> 
```

我假设您想在 cbCountriesList 中显示国家 ID，因为您将其绑定到具有 int 类型键的字典。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T19:00:19.837

对于父 ComboBox，将 绑定`SelectedItem`到模型上的属性：

```
<ComboBox x:Name="cbCountriesList" 
    DataContext="{Binding CountriesCitiesList}"
    IsSynchronizedWithCurrentItem="true"
    ItemSource="{Binding}"
    SelectedItem={Binding Path=SomePropertyOnModel} /> 
```

Where`SomePropertyOnModel`与国家列表中的项目具有相同的类型。

对于子 ComboBox，一切都应该相同：

```
<ComboBox x:Name="cbCitiesList" VirtualizingStackPanel.IsVirtualizing="True"                  
    ItemsSource="{Binding CountriesCitiesList}"
    IsSynchronizedWithCurrentItem ="true"
    ItemSource="{Binding}" /> 
```

*旁注：您会注意到我专门将 ItemsSource 绑定添加到两个 ComboBoxes。*

在模型中，每当`SomePropertyOnModel`设置 时，`CountriesCitiesList`根据接收到的值更新 ，即：

```
private string _somePropertyOnModel;
public string SomePropertyOnModel 
{
    get { return _somePropertyOnModel; }
    set 
    {
        _somePropertyOnModel = value;
        // call NotifyPropertyChanged
        UpdateCountriesCitiesList();
    }
}

private void UpdateCountriesCitiesList()
{
    // set CountriesCitiesList based on the 
    // SomePropertyOnModel value
    // CountriesCitiesList should be an ObservableCollection and the values
    // should be cleared and then added.
    CountriesCitiesList.Clear();
    CountriesCitiesList.Add( "Springfield" );
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-16T19:48:10.687

- - - - - - - - - - - - - - 掌握 - - - - - - - - - - - ----

```
<ComboBox 
    x:Name="CityCB" 
    ItemsSource="{Binding CitiesList}" 
    DisplayMemberPath="CITYNAME" 
    IsSynchronizedWithCurrentItem="True"/> 
```

- - - - - - - - - - - - - - 细节 - - - - - - - - - - - ----

```
<ComboBox 
    x:Name="RegionCB" 
    ItemsSource="{Binding SelectedItem.REGIONS, ElementName=CityCB}"
    DisplayMemberPath="REGIONNAME" 
    IsSynchronizedWithCurrentItem="True"/> 
```

在这个例子中，我展示了 City 和它所包含的 Regions 之间的主细节。

# asp.net - ASP.NET：如何在 ListView 末尾附加行以实现“加载更多”功能？

> ID：12875888
> 
> 赞同：2
> 
> 时间：2012-10-13T18:42:48.403
> 
> 标签：asp.net, listview, load, append

我有一个列表视图，里面有一些动态 HTML，我想做的是每次单击“加载更多”按钮时显示 10 条记录，但问题是每次我获取新记录时，它们都会被旧记录替换，它们're 没有附加在末尾。

我有一个带有 ObjectDataSource 的列表视图：

```
<asp:ListView .... DataSourceID="ObjectDataSource1" />
  <ItemTemplate>
     <div id="content" runat="server">
     // Some dynamically generated HTML
     </div>
  </ItemTemplate>
</asp:ListView> 
```

这是我的对象数据源：

```
 <asp:ObjectDataSource ID="ObjectDataSource1" runat="server" SelectMethod="GetActivities" TypeName="MyLocation >
        <SelectParameters>
            <asp:Parameter Name="pageSize" DefaultValue="10" Type="Int32" />
            <asp:Parameter Name="pageNumber" DefaultValue="0" Type="Int32" />
         </SelectParameters>
    </asp:ObjectDataSource> 
```

这是我的 LoadMore 按钮的代码：

```
this.ObjectDataSource1.SelectParameters["pageNumber"].DefaultValue = (int.Parse(this.ObjectDataSource1.SelectParameters["pageNumber"].DefaultValue) + 1).ToString(); 
```

每次我单击 LoadMore 按钮时，这都会增加页码，该按钮依次获取下一页记录，但问题是记录正在被替换，我想将它们附加到列表视图的末尾。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T18:50:19.403

而不是在LoadMore方法中使用pageNumber，你不能把pageSize增加10吗？也许 nn 与更新面板组合！

# .net - 使用 linq 设置多个元素

> ID：12875895
> 
> 赞同：2
> 
> 时间：2012-10-13T18:43:47.610
> 
> 标签：.net, linq

我正在尝试将 StyleID 为“foo”的表格中的所有单元格更改为“bar”。我正在使用以下表达式来获取表格中具有 StyleID="foo" 的所有单元格。我通过执行以下操作验证了我的缩小功能

```
Dim count As Integer = 
   <Table>...<Row>...<Cell>.Where(Function(c) c.@ss:StyleID = "foo").Count 
```

当我运行它时，它会返回数据集的正确数量的单元格。

但是，当我执行以下代码时，什么也没有发生。

```
<Table>...<Row>...<Cell>
    .Where(Function(c) c.@ss:StyleID = "foo").@ss:StyleID = "bar" 
```

关于我做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T18:53:53.147

```
.Where(Function(c) c.@ss:StyleID = "foo")
.ToList()
.ForEach(/*do stuff here*/) 
```

我实际上不认识你的语法。是VB.NET吗？

在 C# 中：

```
.Where(c => c.StyleID == "foo")
.ToList()
.ForEach(c => c.StyleID = "bar"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T18:49:35.997

您正在更改 Where 方法的 StyleID，而不是每个单元格。您需要迭代所有单元格并设置每个单元格的 StyleID。

# git - Git 没有跟踪我的一些文件夹

> ID：12875897
> 
> 赞同：0
> 
> 时间：2012-10-13T18:44:02.757
> 
> 标签：git, grails

我`git add .`在根目录中做了，之后我做了

```
git commit -m "abc" 
```

itd ...之后，在我的仓库中，我没有找到 /src /lib 等目录...

我做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T18:52:21.117

Git 只跟踪文件。因此，如果文件夹`src/`和`lib/`为空，则不会将它们添加到存储库中。

如果您无论如何都想跟踪它们，我通常会添加一个名为`.keep`. 您还可以将`.gitignore`文件用于包含缓存数据的文件夹或您不想跟踪但要将目录保留在存储库中的生成文件。

此外，`git add`在您的存储库中添加每个更改的标志是`git add -A`. 这将暂存每个更改（删除、添加和更改的文件）。

# android - AsyncTask 返回不会传递给其他方法

> ID：12875898
> 
> 赞同：0
> 
> 时间：2012-10-13T18:44:03.803
> 
> 标签：android, android-asynctask, parameter-passing

我已经研究了这方面的许多问题和示例，但未能理解和解决问题。问题是我需要将字符串数组从我的 AsyncTask 类中的 InBackground 方法获取到另一个对数据进行某些处理的类。

这是我的 myMapService 类：

```
public class myMapService extends AsyncTask<String, Void, String[]> {
    private ProgressDialog progressDialog;
    private keyword activity;

    private String rst = " " ; 

    private String[] strArr1;
    private String[] strArr2;
    private String[] resultList;

    public String[] getResultList() { return this.resultList; }

    public myMapService(keyword activity, ProgressDialog progressDialog)
    {
        this.activity = activity;
        this.progressDialog = progressDialog;
    }

    @Override
    protected void onPreExecute()
    {
        progressDialog.show();
    }

    @Override
    protected String[] doInBackground(String... arg0) {

        String result = "";
        int responseCode = 0;

        int executeCount = 0;
        HttpResponse response;

        StringBuilder sb = new StringBuilder();
        String line;
        try 
        {
            HttpClient client = new DefaultHttpClient();
            HttpGet httppost = new HttpGet("http://XXX.com/ccvo/mel-asset-data/query.php?lon="+ arg0[0].toString() + "&lat="+ arg0[1].toString() +"&within=" + arg0[2].toString()  + "&keyword="+ arg0[3].toString().replace(" ", "%20"));

            Log.v("Results", "from web: " + arg0[0]);
            Log.v("Results", "from web: " + arg0[1]);
            Log.v("Results", "from web: " + arg0[2]);
            Log.v("Results", "from web: " + arg0[3]);

                do
                {
                    progressDialog.setMessage("Passing paratmeters.. ("+(executeCount+1)+"/5)");
                    // Execute HTTP Post Request
                    executeCount++;
                    response = client.execute(httppost);
                    responseCode = response.getStatusLine().getStatusCode();                        

                } while (executeCount < 5 && responseCode == 408);

                BufferedReader rd = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));
                while ((line = rd.readLine()) != null)
                {
                    result = line.trim();
                    sb.append(line);

                }
        }catch (Exception e2) {
            responseCode = 408;
            e2.printStackTrace();
            }
        rst = result.toString();

// splits everything        
        if(rst != null && rst.length() > 0)
        {
          strArr1 = rst.split("\\|");
          for(int i=0;i<strArr1.length;i++)
          {

                Log.d("Results", "Array size1.1 "  + i);

            Log.v("Results", "Array split1.2 "  + strArr1[i] );

            if(strArr1[i] != null && strArr1[i].length() >0 && strArr1[i].contains(","))
            {

           strArr2 = strArr1[i].split(",");
              for(int j=0; j<strArr2.length ;j++)
              {
                 // strArr3[i][j] = strArr2[j].toString();

                  if(strArr2.length == 4)
                  {

                    // int temp =  Integer.parseInt(strArr2[j]) ;
                    //  strArr2[j] = Integer.toString(Integer.parseInt(strArr2[j])) ;
                  }
                    Log.d("Results", "Array size2.3 "  + j );

                Log.d("Results", "Array split2.4 "  + strArr2[j] );

              }
            }
          }
        }

/*      if(rst != null && rst.length() > 0)
        {
          strArr = rst.split("\\|");

          for(int i=0;i<strArr.length;i++)
          {
            Log.d("Results", "Array split 1: " + strArr[i]);
           // Log.d("Results", "Array split 2: " + arrfetch[i]);

          }
        }
        */
        this.resultList = strArr2; 

        return strArr2;
    }

@Override
protected void onPostExecute(String[] strArr2)
{
    progressDialog.dismiss();

}

} 
```

strArr2 数组返回属性、纬度、经度、距离值。此类通过按钮侦听器触发，而地图将提供可用对象。在我的 keyword.java 中：

```
View firstButton = findViewById(R.id.button1);
firstButton.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {

    gps = new GPSTracker(keyword.this);

    // check if GPS enabled

        String latitude = Double.toString(gps.getLatitude());
        String longitude = Double.toString(gps.getLongitude());

        ProgressDialog progressDialog = new ProgressDialog(keyword.this);
        progressDialog.setCancelable(false);

        myMapService myMapService = new myMapService(keyword.this, progressDialog);
        myMapService.execute(longitude.toString(),latitude.toString(), withinn.toString(), keywordSeleced.toString() );

        Intent i = new Intent(getBaseContext(), GoogleMapsAppActivity.class);
        i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    getApplicationContext().startActivity(i);

        }
        }); 
```

我需要在我的 GoogleMapsAppActivity.java 中使用我的 AsyncTask 类的结果，它扩展了 MapActivity。我需要将这些值传递给这些行：

```
 Drawable makerDefault = this.getResources().getDrawable(R.drawable.poke);
 MirItemizedOverlay itemizedOverlay = new MirItemizedOverlay(makerDefault);
 itemizedOverlay.addOverlayItem((int) (1E6 * -37.720754), (int) (1E6 * 145.048798), "La trobe");
 mapView.getOverlays().add(itemizedOverlay);
 MapController mc = mapView.getController();
 mc.setCenter(new GeoPoint((int) (1E6 * -37.720754), (int) (1E6 * 145.048798))); /
 mc.zoomToSpan(itemizedOverlay.getLatSpanE6(), itemizedOverlay.getLonSpanE6()); 
```

任何帮助都非常感谢。先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T19:51:00.447

已经`onPostExecute()`调用了`GoogleMapsAppActivity`包含这些行的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T21:39:43.017

在您的 onPostExecute() 方法中：

```
super.onPostExecute(strArr2); 
```

它将 strArr2 返回到您的调用类

在 myMapService.execute() 之后的调用活动中：

```
String[] results = myMapService.get();
//results == strArr2 
```

就这么简单！

# objective-c - 不良访问挑战

> ID：12875901
> 
> 赞同：0
> 
> 时间：2012-10-13T18:44:44.767
> 
> 标签：objective-c, ios, xcode, game-center, challenge-response

当用户的朋友挑战他的高分并且用户击败它时，它会回复一个新的挑战（来自苹果，未编程）。另一个用户收到了挑战，但发件人的游戏立即崩溃，此行出现错误访问 if ([_delegate respondsToSelector:@selector(onScoresSubmitted:)]) 来自本教程[http://www.raywenderlich.com/23189/whats- ios-6 中的新游戏中心](http://www.raywenderlich.com/23189/whats-new-with-game-center-in-ios-6)

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T12:32:24.087

您确定此时您的 _delegate 不是随机垃圾值吗？

```
if ([_delegate respondsToSelector:@selector(onScoresSubmitted:)]) 
```

确保使用 callBack 的客户端（委托）清理服务器委托，以便不再完成回调。

这可以通过两种方式完成：

1.  A：从服务器端保留委托（但它不再是委托关系）。
2.  B：当委托客户端不再需要服务时，将委托指针赋值为零。

这是一个常见的错误，因为实施不当：

```
ADelegateClient* client = [ADelegateClient new];
[SingletonService service].delegate = (id<SingletonServiceDelegate>)client;
[client release];
// you must [SingletonService service].delegate = nil; Since
// [SingletonService service] cannot know the delegate is not pointing to something valid anymore
[[SingletonService service] makeStuffWillCauseCallBackToDelegate]; 
```

我没有阅读Ray代码，如果您的问题与此不相似，那么我会进一步深入。但我 99% 确定它与释放指针问题有关；

# c++ - C++ 异常没有被捕获

> ID：12875903
> 
> 赞同：1
> 
> 时间：2012-10-13T18:44:57.763
> 
> 标签：c++, exception

当我的链接列表为空时，我试图抛出 EmptyListException，但如果我取消注释 throw EmptyListException()，程序将继续终止。这是我的 EmptyListException 标头

```
#ifndef EMPTYLISTEXCEPTION_H
#define EMPTYLISTEXCEPTION_H

#include <stdexcept>
using std::out_of_range;
class EmptyListException : public out_of_range
{
    public:
        EmptyListException(): out_of_range("Empty List!\n") {}

};

#endif // EMPTYLISTEXCEPTION_H 
```

-- 在 Clist.h 中抛出命令

```
template <typename E>
E Clist<E>::Remove() throw()
{
    if(isEmpty())
    {
        cout << "Empty List, no removal";
        //throw EmptyListException();
        return '.';
    }
        ... code
} 
```

-- 在 Main 中捕获

```
try{
    cout << list->Remove() << endl;
} catch(EmptyListException &emptyList)
{
    cout << "Caught :";
    cout << emptyList.what() << endl;
} 
```

错误“此应用程序已请求运行时以不寻常的方式终止它。请联系应用程序的支持团队以获取更多信息。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-13T18:50:08.827

好吧，你告诉编译器你不会从你的`Remove()`! 当您违反此承诺时，它会终止程序。在函数声明中去掉，`throw()`然后重试。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-13T18:51:14.007

在你的函数`throw()`签名中`Remove`是对编译器的承诺，你不会在该函数中抛出任何东西。如果你要从里面扔任何东西，你需要把它去掉。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-13T18:56:26.913

问题是说明`throw`符是……特殊的。

通常，它被假设用于精确列出函数可能返回的异常列表（继承照常工作）：

```
void func() throw(Ex1, Ex2, std::bad_alloc); 
```

因此，当在没有空异常列表的情况下使用时，它表明此方法*永远不会*抛出。如果它抛出，那么运行时将`std::terminate`立即调用，默认情况下只会终止程序。

通常，您不应使用异常规范。

*注意：C++11 引入了`noexcept`关键字来表示函数从不抛出，它更直观...*

# java - 找不到与 api.imgur.com 匹配的主题备用 DNS 名称。使用 Scribe 访问 api.imgur.com 时

> ID：12875905
> 
> 赞同：1
> 
> 时间：2012-10-13T18:45:27.063
> 
> 标签：java, ssl, scribe, imgur

我很难让 Scribe 与 Imgur 交互。我不断得到

java.security.cert.CertificateException：找不到与 api.imgur.com 匹配的主题备用 DNS 名称。

[从这些类型问题的一般解决方案中](http://www.xinotes.org/notes/note/1095/)我可以收集到证书上的通用名称与服务器名称不匹配，但我在[https://api.imgur.com/oauth/request_token](https://api.imgur.com/oauth/request_token)检查了证书并转向甚至没有任何建议（api.imgur.com == api.imgur.com，说真的，这怎么不匹配）。无论如何，这是我正在使用的代码。

```
OAuthService service = new ServiceBuilder().debug().provider(ImgUrApi.class)
  .provider(ImgUrApi.class)
  .apiKey(CONSUMER_KEY)
  .apiSecret(CONSUMER_SECRET)
  .build();

Token requestToken = service.getRequestToken(); //Fails here 
```

这是调试的输出

```
obtaining request token from https://api.imgur.com/oauth/request_token
setting oauth_callback to oob
generating signature...
base string is: POST&https%3A%2F%2Fapi.imgur.com%2Foauth%2Frequest_token&oauth_callback%3Doob%26oauth_consumer_key%<my-imgur-key>%26oauth_nonce%3D190893231%26oauth_signature_method%3DHMAC-SHA1%26oauth_timestamp%3D1350152724%26oauth_version%3D1.0
signature is: WGRVhKKWqiFiD939LI3eOHHKAJg=
appended additional OAuth parameters: { oauth_callback -> oob , oauth_signature -> WGRVhKKWqiFiD939LI3eOHHKAJg= , oauth_version -> 1.0 , oauth_nonce -> 190893231 , oauth_signature_method -> HMAC-SHA1 , oauth_consumer_key -> <my-imgur-key> , oauth_timestamp -> 1350152724 }
using Http Header signature
sending request... 
```

不知道我还能做些什么来解决这个问题，因为看起来没有任何问题。我想我错过了一些明显的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T01:29:56.607

我认为问题不在于该类不在包中，如果是这样，它甚至在尝试使用`ClassNotFoundException`.

似乎您确实遇到了证书问题，您需要进行更多挖掘，但现在我想这会有所帮助：

[http://www.exampledepot.com/egs/javax.net.ssl/trustall.html](http://www.exampledepot.com/egs/javax.net.ssl/trustall.html)

请注意，在生产中使用它会带来安全问题，这只是为了证明这一点并减少问题空间。

# c# - 从 TCP 服务器向客户端发送多条消息（C sharp 到 Android）

> ID：12875909
> 
> 赞同：8
> 
> 时间：2012-10-13T18:46:14.303
> 
> 标签：c#, android, sockets, tcpclient, tcplistener

我正在开发一个应用程序，其中 c sharp 服务器与 android 客户端通信。服务器需要向 Android tcpClient 发送多条消息。至于发送消息，我必须关闭服务器上的 tcpClient 对象。否则它不会发送。一旦 tcpClient 关闭，我如何再次与我的客户端通信，我如何跟踪和发送多条消息，一旦我关闭 tcpClient，或者有任何其他发送方式而不关闭它。如果问题仍然不清楚，请在下方评论

它发送一条消息很容易，但我需要不时发送更多消息

这是服务器的代码片段

```
//in a thread
void receivingMessages(object param)
    {
        try
        {
            var paramArray = (object[])param;
            var id = paramArray[0];
            var client = paramArray[1] as TcpClient;

            var stream = client.GetStream();

            while (true)
            {
                byte[] buffer = new byte[2048];
                int bytesRead = stream.Read(buffer, 0, 2048);

                if (bytesRead > 0)
                {
                    StringBuilder sb = new StringBuilder();
                    string v = Encoding.ASCII.GetString(buffer);

                    int index = v.IndexOf('\0');
                    string trimmedXml = v.TrimEnd(new char[] { '\0' });

                    var root = XDocument.Parse(trimmedXml).Root;
                    //to get the type of xml like it is login register or message
                    string xmlType = root.Name.ToString();

                    //some checks     
                    string result = " server messages";
                    SendMessage(client, result);

                }

                //Thread.Sleep(10);
            }
        }
        catch (Exception)
        {

        }

    }

    public void SendMessage(TcpClient client, string message)
    {

        byte[] buffer = Encoding.ASCII.GetBytes(message);

        NetworkStream stream = client.GetStream();
        stream.Write(buffer, 0, buffer.Length);

        client.Close();
    }
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T19:51:10.660

试试这个：

```
public void SendMessage(TcpClient client, string message)
{

    //byte[] buffer = Encoding.ASCII.GetBytes(message);

    NetworkStream stream = client.GetStream();
    StreamWriter writer = new StreamWriter(stream);
    writer.WriteLine(message);
    writer.Flush();

} 
```

# css - 我怎样才能使我的形象？

> ID：12875911
> 
> 赞同：23
> 
> 时间：2012-10-13T18:46:41.807
> 
> 标签：css, types, input, submit

我有一个漂亮的小 CSS 图像，它需要是一个按钮。我已经尝试了大约 20 种不同的方法，但都没有奏效。我要么得到一个空白，要么得到一个内部没有任何东西的边框。

html： http: [//lrroberts0122.github.com/DWS/lab6/level-2/](http://lrroberts0122.github.com/DWS/lab6/level-2/)

图片： http: [//lrroberts0122.github.com/DWS/lab6/level-2/images/button.png](http://lrroberts0122.github.com/DWS/lab6/level-2/images/button.png)

CSS： http: [//lrroberts0122.github.com/DWS/lab6/level-2/css/main.css](http://lrroberts0122.github.com/DWS/lab6/level-2/css/main.css)

由于某些原因，我无法将其更改为“提交”，因此我需要弄清楚如何使用 CSS 使其工作。感谢您的帮助！

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-10-13T19:01:22.170

[正如文档](https://www.w3schools.com/tags/att_input_type_image.asp)所说，使用图像提交按钮：

> `<input type="image">`将图像定义为提交按钮

```
<input type=image src=button.png alt="Submit feedback"> 
```

（在设置在线表单时，我不会使用暗示 snailmail 的图像，但也许有一些理由会创建这样的关联。）

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2012-10-13T18:49:56.840

```
input[type=submit] {
    background: url(http://lrroberts0122.github.com/DWS/lab6/level-2/images/button.png);
    border: 0;
    display: block;
    height: _the_image_height;
    width: _the_image_width;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-01-30T06:39:29.150

**将 INPUT 标签制作为图像的简单方法**

```
<input type="submit" value="" style="background-image: url('images/img.png'); border:none; background-repeat:no-repeat;background-size:100% 100%;"> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-13T19:14:28.293

您可以覆盖浏览器给按钮的样式。

例如，将其添加到您的 css 对我来说（在 Chrome 上）可以解决问题：

```
.controls input {
   background: url(' http://lrroberts0122.github.com/DWS/lab6/level-2/images/button.png') -411px -540px no-repeat;
   width: 199px;
   height: 109px;
   border: none;
} 
```

但实际上，如果您不打算将浏览器的 css 用于按钮，则可能根本不应该使用`<input type='submit'>`，只需插入图像（通过`<img src="" />`标签或`<div>`以图像为背景的 a）并为其附加点击侦听器。

例如：

的HTML：

```
<div class="controls">
    <img src="/yourimage.png" />
</div> 
```

javascript（假设您使用 jQuery）：

```
$('.controls img').click(function(){... stuff to do...}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-11-25T12:08:46.657

**HTML：**

```
<lable>From css class</lable><input class="input" onclick="alert('clicked')" type="button" value="" /><br/>
<lable>From HTML tag</lable>
<input type="button" style="background:url(http://cdn.sstatic.net/stackexchange/img/favicon.ico);" onclick="alert('clicked')"/> 
```

**CSS：**

```
.btn{
    display: inline-block;
 background:url(http://cdn.sstatic.net/stackexchange/img/favicon.ico);
    position: relative;
    border-radius: 5px;
}
.input{
    background: transparent;
    color: #fff;
    border: 0;
    padding-right: 20px;
    cursor: pointer;
    position: relative;
    padding: 5px 20px 5px 5px;
    z-index: 1;
} 
```

**JS 小提琴：http:** [//jsfiddle.net/AJNnZ/26/](http://jsfiddle.net/AJNnZ/26/)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-12-03T12:26:14.700

另一种有点 hackish 的方式是（使用 jQuery）：

```
<div onclick="$(this).parent('form').submit();"></div> 
```

然后你可以随心所欲`div`地设计你的风格。

# wolfram-mathematica - Set::setps: 在part assignment中不是一个符号。>>

> ID：12875913
> 
> 赞同：5
> 
> 时间：2012-10-13T18:47:07.487
> 
> 标签：wolfram-mathematica

我在*Mathematica*中定义了一个函数，如果列表中的第 i 个值在 1 中，并且第 i+1 个值为 0，则该函数会切换这两个值。

我将其定义为：

```
f[i_, x_] := (If[x[[i]] == 1 && x[[i + 1]] == 0, x[[i]] = 1; x[[i + 1]] = 0]); 
```

但是，当我使用它进行测试时`i = 2`，`x = {1,1,0,0}`我收到以下错误：

> 部分赋值中的 Set::setps: {1,1,0,0} 不是符号。>>

我不太清楚自己做错了什么，因为我认为我正确调用了所有内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T05:20:40.553

您似乎找到了解决方案，但无论如何让我们分解一下。

首先，您有一个简单的转录错误，您`Set`的 s 应用原始值而不是交换它们。通过此更改，基本代码可以工作：

```
i = 2;
x = {1, 1, 0, 0};

If[
 x[[i]] == 1 && x[[i + 1]] == 0,
 x[[i]] = 0; x[[i + 1]] = 1;
]

x 
```

> ```
> {1, 0, 1, 0} 
> ```

这样我们就成功地改变了`x`。为了使它成为一个函数，我们必须将 的*名称*而`x`不是 的值传递给这段*代码*`x`。这是您的错误的根源：

```
{1, 1, 0, 0}[[2]] = 0; 
```

> 部分赋值中的 Set::setps: {1,1,0,0} 不是符号。>>

您需要的是函数的 Hold 属性：

```
SetAttributes[f, HoldAll]

f[i_, x_] := If[x[[i]] == 1 && x[[i + 1]] == 0, x[[i]] = 0; x[[i + 1]] = 1;]

i = 2 ;
x = {1, 1, 0, 0};

f[2, x]

x 
```

> ```
> {1, 0, 1, 0} 
> ```

也许您不打算更改其`x`自身的值，但这种技术肯定会在其他应用程序中派上用场。要修改上面的函数来操作我们可能使用的数据的*副本*`Module`，我们不需要 Hold 属性：

```
f2[i_, xImmutable_] :=
  Module[{x = xImmutable},
    If[x[[i]] == 1 && x[[i + 1]] == 0, x[[i]] = 0; x[[i + 1]] = 1];
    x
  ]

i = 2 ;
x = {1, 1, 0, 0};

f2[2, x] 
```

> ```
> {1, 0, 1, 0} 
> ```

请注意，`x`within`Module`是一个局部变量，而不是您的全局 list `x`，它保持不变。

为了好玩，让我们以不同的方式实现它。

```
f3[i_, x_] := 
 If[
   x[[i + {0, 1}]] == {1, 0},
   ReplacePart[x, {i -> 0, i + 1 -> 1}],
   x
 ]

f3[2, x] 
```

> ```
> {1, 0, 1, 0} 
> ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T19:22:07.127

我想到了; 我不需要改变 x 本身的值。哎呀！

# objective-c - 需要帮助编写一个简单的函数来将对象添加到数组中（目标 C）

> ID：12875914
> 
> 赞同：0
> 
> 时间：2012-10-13T18:47:08.967
> 
> 标签：objective-c, ios, xcode

作为 iOS 开发（和编程）的新手，我正在尝试完成一些我认为很简单的事情——但我需要一些帮助来编写代码。

我有一个包含一些 facebook 对象的可变数组。该数组称为 facebookPhotosAllTemporary。我想遍历数组，在每个索引处提取每个对象（一个 UIImage），并将这些图像中的每一个插入一个名为 facebookPhotosAll 的新数组中。这是我目前拥有的代码：

在实现中，我有一个私有方法：

```
- (void) addImagestoArray {
int i;
for (i = 0; i < [facebookPhotosAllTemporary count]; i++) {
    UIImage *image = [UIImage imageWithData:
                           [NSData dataWithContentsOfURL:
                            [NSURL URLWithString:
                             [[facebookPhotosAllTemporary objectAtIndex:i]
                              objectForKey:@"pic_big"]]]];
    [facebookPhotosAll addObject:image];
           }
} 
```

然后在 viewDidLoad 部分我调用该方法：

```
[self addImagestoArray]; 
```

当我运行它时，我的 NSLog 消息说我试图添加对象的数组中没有对象。

我意识到我的代码可能完全有缺陷！但是有人可以让我走上正确的轨道吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T19:21:04.890

这里有几个问题。

1.  您是否分配并初始化了 facebookPhotosAll？换句话说，在某个地方，例如在您的 init 方法或 viewDidLoad 中，您是否做了类似的事情：

    facebookPhotosAll = [[NSMutableArray alloc] init];

2.  您正在应用程序的主线程上同步加载来自 Internet 的一组图像。这将挂起用户界面。最好的情况是这会使您的应用程序看起来短暂冻结。最坏的情况是，如果这需要太长时间，操作系统会因为无法响应而终止您的应用程序。

3.  您为获取图像而编写的行令人讨厌，难以阅读且难以调试。把它分成5行。这样你就可以看到每个部分，以防出现问题。

要处理问题 2，您应该参考 Apple 提供的 LazyTableImages 示例应用程序。这显示了在后台加载图像的正确方法。切勿在主线程上进行同步 Internet 访问。

# ruby-on-rails - 如何使 Web 应用程序能够从非根路径提供服务？

> ID：12875917
> 
> 赞同：1
> 
> 时间：2012-10-13T18:47:23.987
> 
> 标签：ruby-on-rails, http, web-applications

我需要启用从非根路径（即[http://example.com/wiki/](http://example.com/wiki/)而不是[http://example.com/](http://example.com/)）提供 Web 应用程序。该应用程序位于反向代理 (nginx) 后面。我意识到至少有两种方法：

1.  让应用程序知道路径前缀并使用它来构造所有 URL（3xx 重定向中的位置标头、HTML 文档中的链接和 Ajax 调用中的地址）。

2.  从反向代理中的请求中去除前缀​​（/wiki/index.html 变为 /index.html），将此类请求传递给应用程序，在所有 HTML 文档和 Ajax 调用中使用相对 URL（src="./static/foo .jpg", POST "./create-user"。配置反向代理以重写重定向中返回的 Location 标头。（'proxy_redirect' nginx 指令）。

哪种方法更好，为什么？

# ruby-on-rails - 遵循 DCI 设计时在哪里进行验证？

> ID：12875921
> 
> 赞同：8
> 
> 时间：2012-10-13T18:48:17.037
> 
> 标签：ruby-on-rails, ruby, validation, activerecord, dci

我正在关注 DCI 来构建新 Rails 应用程序的行为，但我对在哪里放置验证有一些疑问。

传统上，如果您要使用 ActiveRecord 模型管理数据，则在继承自 AR 的特定类中定义验证，并且它们似乎适合作为数据层的一部分。

但是，在我看来，只有在特定角色下才会发生某些验证是有意义的，并且只有当对象在该上下文中时才应该检查它们，而在所有其他情况下都被忽略。这基本上意味着这些验证应该在特定角色中定义，并且当对象在有意义的上下文中使用时，应该使用这些角色模块进行扩展。

你认为在角色中保留这些验证是个好主意吗？如果是这样，你如何声明它们而不污染同一类的其他实例而不是对象？如果我想使用 ActiveRecord 验证，它们是在类级别声明的，所以我不能将它们单独附加到对象，被迫在角色模块上使用“验证”实例方法的重新声明（附加错误直接到对象的错误数组），或一些类似的技术。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T10:47:47.530

这取决于相关的验证/规则。如果规则与域模型相关联，DCI 的主要目标是将系统是什么（域模型）与系统做什么（功能）分离。例如，SSN 的良好性规则，那么它应该是数据对象的一部分。另一方面，如果规则与系统的功能有关，例如，用户每周只允许订购两个超级折扣产品，那么这是一个上下文问题

# php - 用简单的 html dom 收集 http-equiv

> ID：12875923
> 
> 赞同：0
> 
> 时间：2012-10-13T18:48:32.817
> 
> 标签：php, simple-html-dom

我正在使用 Simple html DOM 从提交的 html 文档中解析不同的元素。我一直在试图弄清楚如何检查以下内容

```
<meta http-equiv="refresh" content="100"> 
```

我试过用。

```
foreach($html->find('meta') as $element){
    if($element->http-equiv=='refresh'){ refreshFound(); }
} 
```

我收到错误 Use of undefined constant equiv。由于 - 符号，我必须以一种特殊的方式来形成语句吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T18:53:30.867

它应该是`$element->attr`

```
foreach ( $html->find('meta') as $element ) {
    var_dump($element->attr);
} 
```

输出

```
array
  'http-equiv' => string 'refresh' (length=7)
  'content' => string '100' (length=3)
array
  'http-equiv' => string 'Content-Type' (length=12)
  'content' => string 'text/html; charset=utf-8' (length=24)
array
  'name' => string 'robots' (length=6)
  'content' => string 'noindex' (length=7) 
```

简单检查

```
foreach ( $html->find('meta') as $element ) {
    foreach ( $element->attr as $key => $value ) {
        if ($key == "http-equiv" && $value == 'refresh') {
            echo "FOUND";
        }
    }
} 
```

输出

```
FOUND 
```

笔记*

如果你`$element->attr["http-equiv"]`直接使用它会产生下面的错误，因为网站有时没有`http-equiv`

> 注意：未定义索引：http-equiv

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T18:54:26.760

你正在做减法：`$element->http minus equiv`

为什么不直接找到带有“刷新”的 http-equiv 属性的元元素？

从示例页面这应该可以工作：`$html->find('div[id=hello]', 0)->innertext = 'foo';`

让我认为`$html->find('meta[http-equiv=refresh]');`应该找到具有“刷新”内容的 http-equiv 的元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T18:55:46.813

试试这个。

```
if(@$element->attr['http-equiv'] == 'refresh') { 
    refreshFound(); 
} 
```

如果`@`文档*不*包含. `Notice: undefined index`_*`meta:http-equiv`*

# c++ - 当我尝试设置一个已经设置的变量时游戏崩溃

> ID：12875927
> 
> 赞同：0
> 
> 时间：2012-10-13T18:48:55.400
> 
> 标签：c++, crash

我尝试查找与设置已设置导致崩溃的变量有关的事情，但我没有发现任何相关主题。

Rextblock 是用户输入的数字。如果 textblock 等于 1，则返回 numbermax 和 2 之间的随机数。

```
if ( textblock == 1 )
{
   int rand1 = rand() %(numbermax - 2) + 2;
   int textbox = rand1;
} 
```

当我为 textblock 输入 1 时，它会崩溃，我很确定是这段代码导致了它。

```
using namespace std;

int main(int argc, char *argv[])
{
srand(time(NULL));

int numbermax = 2;

while (while1 < 1)    
{   
cout << "input the number of the text block you wish to use, \n ";
int textblock;
cin >> textblock;

if ( textblock != 0 )
{

}

if ( textblock == 1 )
{
   int rand1 = rand() %(numbermax - 2) + 2;
   int textbox = rand1;
}

if (textblock == 2)
{

}

if (textblock == 2)
{

}

if( textblock == 0 )
{

}   

if ( textblock == 1 )
{
   cout << " \n error, try again \n";     
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T19:03:33.900

我高度怀疑，当您运行它时，`numbermax`它等于 2。这将导致`numbermax - 2`等于 0，并且使用 rhs 为 0 的模数会调用除以 0，这是未定义的行为，因此发生崩溃的可能性很大。

您应该确保它不会通过检查`if (numbermax != 2)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T18:52:21.117

可能你的意思是：

```
textbox = rand1; 
```

您的代码设置了属于 if 块的局部变量，而不是外部文本框变量。我不明白这怎么会使程序崩溃。

# c++ - 是否有允许任意精度指数的 C/C++ 的任意精度浮点库？

> ID：12875930
> 
> 赞同：11
> 
> 时间：2012-10-13T18:49:32.030
> 
> 标签：c++, c, floating-point, arbitrary-precision

我正在寻找 C/C++ 的任意精度浮点库（首选纯 C）。我需要任意精度指数。GMP 和 MPFR 使用固定大小的指数，因此它们不符合条件（我有一些解决方法的想法，但我更喜欢开箱即用的解决方案）。如果可以自动调整指数精度以防止无穷大值，那将是一个很好的功能。

如果您确定不存在这样的库，请说出来。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-14T17:19:26.027

据我所知，没有什么比 GMP/MPFR 更主流了。但是 Fredrik Johansson 的[arb](http://fredrikj.net/arb/)包含一个名为[fmpr](http://fredrikj.net/arb/fmpr.html)的模块，它提供具有任意精度指数的浮点数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T17:56:22.773

这是一个非常专业的要求；在不了解您的实际需求的情况下，我可能会考虑使用像 MPFR 这样更常见的任意精度库来表示您的值的对数（这并不能完全给出真正的*任意*指数范围，但确实让您的指数如此之大以至于它可能不再是问题）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T16:41:58.313

您可以查看[http://www.ttmath.org/](http://www.ttmath.org/) - 我认为它不能即时调整精度，但它确实可以很好地支持任意精度。

# mysqli - MySQLI 查询不返回结果

> ID：12875933
> 
> 赞同：0
> 
> 时间：2012-10-13T18:49:55.647
> 
> 标签：mysqli

每个人都在说要切换到 mysqli，所以我现在正在努力改变我的网站，但我所有的内容都没有这样做。

```
 $mysqli = mysqli_connect("$server", "$user", "$pass", "$webdb");
    $query=mysqli_query("SELECT * FROM pages WHERE name='Index'");
    $result = mysqli_query($webdb, $query);
$row = mysqli_fetch_object($result);
                {
                echo $row->content;
            }
            ?> 
```

我的变量设置正确；从我看的任何地方，格式看起来都是正确的，但是当我的实际服务器中内容区域不为空时，它是空的。有人在这里看到我需要纠正的缺陷吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-25T17:34:17.533

您将第一个查询的结果设置为`$query`. 然后将`$query`（不是字符串查询，而是结果对象）传递给另一个`mysqli_query()`调用。另外，`$webdb`应该是`$mysqli`..也许你打算做

```
$query = "SELECT * FROM pages WHERE name='Index'";
$result = mysqli_query($mysqli, $query); 
```

# php - 从另一张表中获取一行中的多张图片

> ID：12875936
> 
> 赞同：2
> 
> 时间：2012-10-13T18:50:06.940
> 
> 标签：php, sql, mysqli

我正在制作一个简单的博客，我认为我的大脑冻结了或其他什么……我真的不知道如何正确地解决这个问题……
我有一张名为“新闻”的桌子和一张图片。新闻可以有多张图片，但一张图片只能有一条新闻。

当我做类似的事情时：

`SELECT * FROM Picture as Pic INNER JOIN News as News ON Pic.NewsID = News.NewsID GROUP BY News.NewsID, News.Header, News.News, News.NewsDate,Pic.Picture`

我希望包含属于特定新闻的图片的每一行都显示在一行上...
**例如：NewsID | 标题 |新闻 | 图片 | 图片 | 图片**

```
returns 
NewsID|Header|News|PictureID|Picture
1|myHeader|myNews|1|something.jpg
1|myHeader|myNews|2|othersome.png
2|lolHead|lolNews|3|lol.png 
```

等等...请帮助，问候/哈里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T18:56:06.947

使用[Group concat](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)函数

> 此函数返回一个字符串结果，其中包含来自组的串联非 NULL 值。如果没有非 NULL 值，则返回 NULL。

**例子**

```
SELECT *, GROUP_CONCAT(Pic.Picture) FROM Picture as Pic 
INNER JOIN News as News ON Pic.NewsID = News.NewsID
GROUP BY News.NewsID 
```

# php - 将带有 text/html 标头的 json 字符串发送到有效对象

> ID：12875939
> 
> 赞同：0
> 
> 时间：2012-10-13T18:50:18.730
> 
> 标签：php, jquery, json

我有这个 php 脚本

```
if (!$chunks || $chunk == $chunks - 1) {
// Strip the temp .part suffix off 
    rename("{$filePath}.part", $filePath);
    if( $content = $this->html_file_uploaded( $filePath ) ){

        die('{"Done" : "yee", "content" : "woe" , "id" : "id"}');
            } 
```

在JavaScript中我想做

```
 FileUploaded: function(up, file, info) {
    // Called when a file has finished uploading

    $('body').prepend('FileUploaded fired<br>'+info.Done); 
```

但是如果我把它写到页面上，它会返回 undefined

```
$('body').prepend('FileUploaded fired<br>'+info.Done); 
```

`var info = $.parseJSON(info);`对我不起作用。

我怎样才能让它工作？

**编辑** JavaScript 和 php 来自[plupload api](http://www.plupload.com/example_events.php)

我不想使用`json_encode`，除非我被告知发送这样的字符串永远无法工作，或者不可靠。我对如何将字符串转换为有效对象感兴趣。我使用在线[json 字符串检查器](http://www.freeformatter.com/json-formatter.html)，它说它无效， - 无法格式化 JSON 输入。文本必须在`JSONObject`''{'"Done" :' 附近的字符 1 处以 '{' 开头

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T20:12:13.420

`JSON.parse()`是你需要的。如果这不起作用，那么你在 php 方面做错了。

注意：如果您想在旧版浏览器中包含 JSON 支持（谁说 IE7？），您需要包含来自[https://github.com/douglascrockford/JSON-js的 Douglas Crockford 的 JSON2.js](https://github.com/douglascrockford/JSON-js)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T22:55:52.520

在你的回调函数（引用为`FileUploaded`）里面做

```
var obj = $.parseJSON(info.response); 
```

现在您可以参考响应`obj.Done`

# c# - 在 WPF 中单击按钮执行文件操作

> ID：12875945
> 
> 赞同：1
> 
> 时间：2012-10-13T18:51:05.500
> 
> 标签：c#, c++, .net, wpf, button

我是一名 C++ 开发人员，最近转向 WPF C# 的世界。我正在开发一个应用程序，我必须使用 fileopendialog 加载文本文件，选择文件并将其保存在组合框中，然后单击 writebutton 我应该使用文本文件中存在的数据执行一些操作。

我在 C++ 中完成了如下操作：

```
if(button == m_writeButton)
{
    // get the data from the file
    File m_binFile = m_fileChoice->getCurrentFile();
    MemoryBlock m_data;

    m_binFile.loadFileAsData(m_data);
    size_t blockSize = m_data.getSize();

    unsigned char *f_buffer;
    f_buffer = (unsigned char *)m_data.getData();
    unsigned cnt = 0;

    // Some code
} 
```

我在 C# 中这样做如下：

```
<ComboBox Name="WriteFileCombo" >
                        <ComboBoxItem Content="Firmware To Download" />
                        <ComboBoxItem Content="{Binding FirmwarePath}" />
</ComboBox>
<Button Content="..." Command="{Binding Path=WriteFilePathCommand}" Name="FileDialogBtn"/>                       

<Button Content="Write File" Command="{Binding Path=WriteFileCommand}" Name="WriteFileBtn" /> 
```

**查看模型类：**

```
private string _selectedFirmware;
    public string FirmwarePath
    {
        get { return _selectedFirmware; }
        set
        {
            _selectedFirmware = value;
            OnPropertyChanged("FirmwarePath");
        }
    }

// Gets called when Browse Button (...) is clicked
private void ExecuteWriteFileDialog()
    {
        var dialog = new OpenFileDialog { InitialDirectory = _defaultPath };
        dialog.DefaultExt = ".txt";
        dialog.Filter = "TXT Files (*.txt)|*.txt";
        dialog.ShowDialog();
        FirmwarePath = dialog.FileName;

        WriteFileCommandExecuted();
    }

// Gets called when Write Button is clicked
public void WriteFileCommandExecuted()
    {
      // same logic as in c++
    } 
```

如何在我的`WriteFileCommandExecuted()`方法中执行在 C++ 代码中完成的相同操作？

请帮忙 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T19:02:16.420

```
//Inside void WriteFileCommandExecuted()

 System.IO.StreamReader sr = new System.IO.StreamReader("File Path");
                textBox1.Text =  sr.ReadToEnd();

        //Or if you need more control

        System.IO.FileStream fs = new System.IO.FileStream(FirmwarePath, System.IO.FileMode.CreateNew);
        System.IO.StreamReader sr = new System.IO.StreamReader(fs);
        string textdata = sr.ReadToEnd();
        int fileSize = (int)new System.IO.FileInfo(FirmwarePath).Length;

        Byte f_buffer = new Byte();
        f_buffer = Convert.ToByte(textdata);
        int cnt = 0;

    //The FirmwarePath is the path returned to you by your file dialog box.
    //If you want to write the class you will need to instantiate is System.IO.StreamWriter then //invoke the "write" method 
```

# wpf - 如何在wpf中为样式定义参数

> ID：12875947
> 
> 赞同：0
> 
> 时间：2012-10-13T18:51:14.750
> 
> 标签：wpf, styles

我的应用程序中有几个按钮，我希望在启用、按下和鼠标悬停时为它们提供不同的图像。我在这个网站上发现了这个问题，它告诉我如何为按钮执行此操作。

[用于启用和禁用 WPF 中按钮状态的不同图像](https://stackoverflow.com/questions/1532125/different-images-for-enable-and-disable-states-of-a-button-in-wpf)

但是由于我的应用程序上有几个按钮，因此很难为每个按钮编写相同的代码。有没有一种方法可以定义参数化样式，例如，我可以将每个按钮定义如下：

```
 <Button ActiveImage=" active image name" DisableImage="disabled image name" style="{StaticResource MyStyle}"/> 
```

哪个缩短了我的示例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T19:00:52.563

好吧，您可以使用附加属性来做到这一点。您可以在单独的类中定义它们（例如，`ButtonHelper`），就像这里描述的那样：http: [//msdn.microsoft.com/en-us/library/ms749011.aspx#custom](http://msdn.microsoft.com/en-us/library/ms749011.aspx#custom)。

接下来，让您的样式引用附加的属性：

```
<Style TargetType="{x:Type Button}">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type Button}">
                <StackPanel Orientation="Horizontal" >
                    <Image Name="PART_Image"
                           Source="{Binding (local:ButtonHelper.NormalImageSource),
                                            RelativeSource={RelativeSource Self}}" />
                </StackPanel>
                <ControlTemplate.Triggers>
                    <Trigger Property="IsMouseOver" Value="True">
                        <Setter Property="Source"
                                Value="{Binding (local:ButtonHelper.HoverImageSource),
                                                RelativeSource={RelativeSource Self}}"
                                TargetName="PART_Image"/>
                    </Trigger>
                    <!-- and so on -->
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

（代码是从[这个答案](https://stackoverflow.com/a/1532262/276994)中窃取的）。

不要忘记声明为类`local`所在的命名空间`ButtonHelper`！

# jquery - 修复错误后如何隐藏错误消息？

> ID：12875953
> 
> 赞同：1
> 
> 时间：2012-10-13T18:51:52.840
> 
> 标签：jquery, jquery-validate

我使用 jQuery Validate 插件并希望在一处显示所有错误。我有如下的html：

```
<div class="modal-footer">
  <p class="pull-left hide" id="register-result"></p>
</div> 
```

和 javascript：

```
$("#company").validate({
  errorClass: "error",
  errorElement: "div",
  errorPlacement: function(error, element) {
    $("#register-result").html(error);
    $("#register-result").show();
  },
... 
```

它几乎按预期工作 - 错误消息显示在需要的地方。但是当用户修复错误时，仍然显示错误消息。我怎样才能改变它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T07:36:54.350

确保包含成功返回。

```
success: function () {
    $('#register-result').fadeOut();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T19:01:33.333

```
$("#company").validate({
    errorClass: "error",
    errorElement: "div",
    errorPlacement: function(error, element) {
        $("#register-result").html(error);
        $("#register-result").show();
    },
    success: function() {
        $("#register-result").hide();
    }
}); 
```

# javascript - 在移动网站中实现“添加到主屏幕”。可能吗？

> ID：12875960
> 
> 赞同：4
> 
> 时间：2012-10-13T18:52:28.780
> 
> 标签：javascript, html, mobile

> **可能重复：**
> [iPhone 上“添加到主屏幕”的 Javascript？](https://stackoverflow.com/questions/1141979/javascript-for-add-to-home-screen-on-iphone)

单击任何链接或按钮是否可以启动“添加到主屏幕”弹出窗口？可能正在使用 javascript 或 html5。

我有一个客户想要的移动网站，如果用户点击链接，那么它应该被添加到主屏幕。

需要在 iPad 上实现这一点。

如果不可能，那么您建议什么替代方案？

谢谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-13T18:56:19.757

您可能会发现这很有用：[http ://cubiq.org/add-to-home-screen](http://cubiq.org/add-to-home-screen)

> 我发现许多 iPhone 和 iPad 用户不知道他们可以将自己喜欢的网站添加到主屏幕并像标准的原生应用程序一样与它们进行交互。[...] 该脚本放置一个浮动气球，邀请用户将您的应用程序添加到主屏幕。该脚本的第 2 版利用了 iOS5 原生固定元素定位，并在 iOS4 上优雅地降级为仅 javascript 版本。

# android - 操作栏中显示 EditText 时如何聚焦和显示软键盘？

> ID：12875963
> 
> 赞同：5
> 
> 时间：2012-10-13T18:53:10.520
> 
> 标签：android, actionbarsherlock, android-softkeyboard

我使用 ActionBarSherlock 创建ActionBar它有一个搜索按钮，显示`AutoCompleteEditText`（`SHOW_AS_COLLAPSIBLE_ACTION_VIEW``EditText``EditText`

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getSupportMenuInflater().inflate(R.menu.activity_main, menu);

    boolean isLight = true;
    // Add Search button
    int menuItemId = menu
            .add("Search")
            .setIcon(
                    isLight ? R.drawable.ic_search_inverse
                            : R.drawable.ic_search)
            .setActionView(R.layout.collapsible_edittext)
            .setShowAsActionFlags(
                    MenuItem.SHOW_AS_ACTION_ALWAYS
                            | MenuItem.SHOW_AS_ACTION_COLLAPSE_ACTION_VIEW)
            .getItemId();
    // Add Search Topic (Sub Menu)
    SubMenu subMenu1 = menu.addSubMenu("Topic");
    subMenu1.add(Menu.NONE, 10, 0, "All Topics");
    subMenu1.add(Menu.NONE, 11, 1, "Adult");
    subMenu1.add(Menu.NONE, 12, 2, "Pediatric");
    subMenu1.add(Menu.NONE, 13, 13, "Drug");

    MenuItem subMenu1Item = subMenu1.getItem();
    subMenu1Item.setIcon(R.drawable.abs__ic_menu_moreoverflow_holo_light);
    subMenu1Item.setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS);

    searchBar = (AutoCompleteTextView) menu.findItem(menuItemId)
            .getActionView().findViewById(R.id.etSearch);

    setSearchSettings(searchMenuID);

    // get instance of Search Button
    searchWidgetItem = menu.findItem(menuItemId);

    searchBar
            .setOnEditorActionListener(new EditText.OnEditorActionListener() {

                @Override
                public boolean onEditorAction(TextView v, int actionId,
                        KeyEvent event) {
                    if (actionId == EditorInfo.IME_ACTION_SEARCH) {

                        // Perform a Search
                        performSearch(v.getText().toString(),
                                (searchMenuID < 0) ? 3 : searchMenuID);

                        imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
                        imm.hideSoftInputFromWindow(v.getWindowToken(), 0);

                        // Collapse the ActionView (Search Bar)
                        searchWidgetItem.collapseActionView();

                        // Clear the TextEdit
                        v.setText("");

                        return true;
                    }
                    return false;
                }
            });
    return true;
} 
```

我尝试`OnFocusChangeListener`在 EditText 上设置 a 并显示 Soft Keboard 如果它有焦点，但它没有工作：

```
searchBar.setOnFocusChangeListener(new OnFocusChangeListener() {

            @Override
            public void onFocusChange(View v, boolean hasFocus) {
                if (hasFocus) {
                    imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
                    imm.showSoftInput(v, InputMethodManager.SHOW_FORCED);
                }
            }
        }); 
```

这该怎么做 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T20:30:50.030

找到解决方案：

```
searchWidgetItem.setOnActionExpandListener(new OnActionExpandListener() {

            @Override
            public boolean onMenuItemActionExpand(MenuItem item) {
                searchBar.post(new Runnable() {
                    @Override
                    public void run() {
                        searchBar.requestFocus();
                        imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
                        imm.showSoftInput(searchBar,
                                InputMethodManager.SHOW_IMPLICIT);
                    }
                });
                return true;
            }

            @Override
            public boolean onMenuItemActionCollapse(MenuItem item) {

                return true;
            }
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-10-06T17:19:05.770

如果还是有问题，那么调用下面的方法

```
imm.toggleSoftInput(InputMethodManager.SHOW_FORCED, InputMethodManager.HIDE_IMPLICIT_ONLY); 
```

代替

```
imm.showSoftInput(searchBar, InputMethodManager.SHOW_IMPLICIT); 
```

# python - 腌制字符串时换行符和文字 \n 的问题

> ID：12875965
> 
> 赞同：1
> 
> 时间：2012-10-13T18:53:19.607
> 
> 标签：python, newline, pickle

```
postoption=input("Press 1 to leave a post, and 2 to close The Wall.")
        if postoption=="2":
            print("Wall closed.")
        elif postoption=="1":
            wally=pickle.load(open("The Wall.txt","rb"))
            usernamey=pickle.load(open("username1.txt","rb"))
            wu="\n",(wally),"\n",(usernamey)
            apost=input("Enter your post below: \n")
            pwickle=pickle.dump((wu, apost), open("The Wall.txt","wb"))
            print(pwickle)
        else:
            print("Wall closed.") 
```

此代码将留下“\n”而不是新行，因为它正在重新读取保存在 .txt 文件中的内容。阻止这种情况的最简单方法是什么？

# iphone - 如何将数据保存在 UIViewController 的不同实例中？

> ID：12875969
> 
> 赞同：0
> 
> 时间：2012-10-13T18:53:45.313
> 
> 标签：iphone, objective-c, cocoa-touch, ipad, uiviewcontroller

我有一个 UIViewController，我可以在应用程序的不同位置访问它，第一个来自仪表板，第二个来自 TabBar。这个 UIViewController 让用户可以搜索不同的数据，但我的问题是我想保留用户所做的最后一次搜索，并在用户打开 UIViewController 的任何地方显示它。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T18:59:58.177

一种选择是将最后一次搜索存储在某个全局对象中，该对象可以从任一位置访问。我可能会建议使用管理您上次搜索的单例对象。该对象可以在应用启动时创建，并在您的 UIViewController 需要时用于检索最后一次搜索。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T20:11:27.070

每次用户打开它时，您都应该始终创建一个新的 UIViewController，而不是使用来自单例（如 AppDelegate）的强引用来保留它。

然后，您可以像 TMilligan 在这篇文章中所做的那样创建一个单例实例，并将其传递给每次新的 UIViewController。

这种方式是照顾您的内存管理的最佳方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T19:29:49.773

您可以创建一个单例类，例如：

应用存储.h

```
@interface AppStorage : NSObject

@property (strong, monatomic) NSString *lastSearch;

+(AppStorage *)sharedAppStorage;

@end 
```

AppStorage.m

```
....
@synthesize lastSearch;

-(id)init{
    self = [super init];
    if(self)
    {
        //load last search from a saved file
    }
}

+(AppStorage *)sharedAppStorage{
    static AppStorage *sharedAppStorage = nil;
    if(!sharedAppStorage){
        sharedAppStorage = [[super allocWithZone:nil]init];
    }
    return sharedAppStorage;
}

.... 
```

然后，您可以使用以下方法从应用程序中的任何位置访问保存的搜索：

```
NSString *savedSearch = [[AppStorage sharedAppStorage] lastSearch]; 
```

如果您希望保存的搜索在应用程序终止时持续存在，那么您应该将搜索保存到 NSUserDefaults 或使用 CoreData。这些都是有据可查的。

注意：我不知道您希望如何保存搜索，因此可以将 NSString 更改为上面示例中您想要的任何内容。

# function - 方案中的简单高阶函数

> ID：12875971
> 
> 赞同：2
> 
> 时间：2012-10-13T18:53:58.897
> 
> 标签：function, scheme

我试图了解如何在方案中将函数作为参数传递，但我在理解教程时遇到了很多麻烦。这是我正在尝试做的事情：

```
(define (addone n)
(+ n 1))
(define (for-n start stop fn)
(if (< start stop)
    (list)
    (cons (fn start) (for-n (+ start 1) stop fn)))) 
```

基本上我只想要一个函数，它返回 fn 的值，用于列表中的 start、start+1、... start+stop。

因此 (for-n 1 5 (addone 0)) 的预期输出将是 (1 2 3 4 5)。我认为我在这里真的错过了一些非常基本的概念，因为我似乎甚至没有正确调用解释器中的函数，而且我没有掌握如何告诉方案将 fn 解释为一个函数而不仅仅是一个常规参数.

我想通了（尽管通过纯粹的试验和错误），我不确定我做了什么，但至少它有效！

```
 (define (function x)
    x)
(define (for-n start stop fn)
  (if (> start stop)
    (list)
    (cons (fn start) (for-n (+ start 1) stop fn))))) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T22:19:31.430

一些反馈，让您知道您的第一个版本有什么问题：

*   建立列表的递归的基本情况通常通常返回`'()`而不是`(list)`
*   正如您已经发现的那样，基本情况的条件是错误的：递归结束的时间`(> start stop)`而不是`(< start stop)`最初声明的时间
*   没有必要定义一个`addone`过程，至少在一些 Scheme 解释器中已经存在一个叫做`add1`
*   最后，当调用接收另一个过程的过程时，只需传递函数，无需先应用它 - 这将返回一个*值*而不是预期的函数。我的意思是，这是错误的：`(for-n 1 5 (addone 0))`这是正确的：`(for-n 1 5 addone)`。当您编写`(addone 0)`函数并返回值`1`时，您打算传递的是`addone`过程本身。

有了上述所有建议，正确的程序应该是这样的：

```
(define (for-n start stop fn)
  (if (> start stop)
      '()
      (cons (fn start) (for-n (add1 start) stop fn)))) 
```

像这样称呼它：

```
(for-n 1 5 add1)
> '(2 3 4 5 6) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T21:20:47.283

函数调用`(addone 0)`等于 value `1`。如果您想传递函数`addone`本身（而不是`1`），则根本不要将其包裹在括号中。`(for-n 1 5 addone)`将`addone`函数传递给`for-n`. 如果你用括号括起来，Scheme 将调用`addone`并传递结果。

# python - 在 Python 2.7.3 中创建无限数量的对象

> ID：12875972
> 
> 赞同：-1
> 
> 时间：2012-10-13T18:54:19.057
> 
> 标签：python, class, variable-assignment, infinite, continuous

我已经开始在 Python 2.7.3 中制作人工生命模拟器，但我无法在运行时连续创建类。我知道我可以通过将类存储在列表中来在 C++ 中做到这一点。有谁知道如何做到这一点？我的意思是这样的：

```
x = 1
name = list()
name[x] = myClass()
x+=1
name[x] = myClass() 
```

依此类推，尽管我将为此使用循环。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T19:03:58.323

您不能将这样的项目附加到 python 列表中。做喜欢

```
name = list()
name.append(myClass()) 
```

请务必阅读 python 的基本结构如何工作[http://docs.python.org/tutorial/datastructures.html](http://docs.python.org/tutorial/datastructures.html)和[http://docs.python.org/tutorial/classes.html](http://docs.python.org/tutorial/classes.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T19:00:37.803

在我看来，您正在寻找以下[`append`](http://docs.python.org/tutorial/datastructures.html#more-on-lists)方法`list`：

```
name = []
name.append(myClass())
name.append(myClass()) 
```

# php - Yii 框架 yii_user + 博客

> ID：12875975
> 
> 赞同：0
> 
> 时间：2012-10-13T18:54:50.910
> 
> 标签：php, frameworks, yii

我似乎在博客教程的完成版本中成功实现了 yii 用户模块，现在遇到了一个错误，它正在寻找 author_id 以匹配 tbl_user 表中的 id，尽管你开始使用 yii 用户模块一个新表 tbl_users..so 除了第一个之外的其他用户不匹配并且无法创建帖子..这是弹出的错误。

```
Error 500
CDbCommand failed to execute the SQL statement: SQLSTATE[23000]: Integrity constraint     violation: 1452 Cannot add or update a child row: a foreign key constraint fails     (`yii`.`tbl_post`, CONSTRAINT `FK_post_author` FOREIGN KEY (`author_id`) REFERENCES `tbl_user` (`id`) ON DELETE CASCADE) 
```

所以我找不到它看起来与表'tbl_user'中的ID匹配的地方......

我到处看了看，有人能指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T11:04:28.437

这意味着有一个键 tbl_post.author_id 与 tbl_user.id 不同。

一个让您更好理解的示例是，您尝试插入 author_id = 5 的帖子，但在表 tbl_user 中，您只有假设 id 的值：1、2、3、7、9 ... 反正没有 5。

# regex - BASH - If else、正则表达式或

> ID：12875977
> 
> 赞同：4
> 
> 时间：2012-10-13T18:54:51.970
> 
> 标签：regex, bash, if-statement

我的 bash 脚本应该检查用户是否输入了两个数字。每个数字前面都应该有一个`+`或一个`-`符号。第一个数字应该是四位数字，第二个数字应该是五位数字。

无论我输入什么值，输出总是`Fail`

运行脚本的命令行语句：

```
$me add +1234 -12345 
```

剧本：

```
#!/bin/bash
#Script name add
if [ $1 != [\+\-][0-9][0-9][0-9][0-9] ] || 
   [ $2 != [\+\-][0-9][0-9][0-9][0-9][0-9] ]
  then
    echo Fail
else    
    echo Success
fi 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T12:41:53.960

POSIX 风格的测试 ( `[`) 根本不执行模式匹配。`!=`运算符是一个字符串比较。ksh 样式测试 ( )) 使用运算符`[[`执行与常规 shell 模式的模式匹配，并使用 .ERE匹配。（没有，但我们可以 DeMorganify）`==``=~``!=~`

```
! [[ $1 =~ [-+][[:digit:]]{4} && $2 =~ [-+][[:digit:]]{5} ]] 
```

要在 POSIX sh 中执行模式匹配，唯一的选项是`case`语句。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T19:10:00.207

我认为没有办法（我错了，[有办法](https://stackoverflow.com/a/12876376/1535516)）使用`if`语句进行模式匹配。`case`可以用于这样的事情。工作示例：

```
#!/bin/bash

#Script name add

case $1 in
    [+-][0-9][0-9][0-9][0-9]) r1='success' ;;
    *) r1='fail' ;;
esac
case $2 in
    [+-][0-9][0-9][0-9][0-9][0-9]) r2='success' ;;
    *) r2='fail' ;;
esac

if [ $r1 = 'fail' ] || [ $r2 = 'fail' ]
then
    echo Fail
else
    echo Success
fi 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-13T19:45:55.623

您需要使用双括号来启用更类似于传统编程语言的高级功能。例如，使用`||`代替`-o`和`&&`代替`-a`。**为了执行模式（匹配**.

此外，括号应该用于*整个*表达式，而不是单独用于每个子表达式，并且应该包括`||`.

我会使用这样的行：

```
if [[ $1 == [+-][0-9][0-9][0-9][0-9] && 
      $2 == [+-][0-9][0-9][0-9][0-9][0-9] ]]
  then
    echo "success"
else
    echo "fail"
fi 
```

**编辑**：使用`==`而不是`!=`（为什么这么消极？）并删除对正则表达式的引用（使用模式匹配）。

# django - 用户注销后如何删除对象？

> ID：12875979
> 
> 赞同：2
> 
> 时间：2012-10-13T18:55:18.770
> 
> 标签：django

```
from django.contrib.auth.models import User

class Drink(models.Model):
        owner = models.ForeignKey(User)
        name = models.CharField(max_length=50) 
```

用户注销后如何删除所有饮料？

```
def delete_drink(request):
    user = request.user
    drink = Drink.objects.filter(owner=user)
    drink.delete() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T19:27:17.713

这可能会奏效：

```
from django.contrib.auth.signals import user_logged_out

def delete_drink(user):
    drink = Drink.objects.filter(owner=user)
    drink.delete()

def on_logout(sender, **kwargs):
    if kwargs['user']:
        delete_drink(kwargs['user'])

user_logged_out.connect(on_logout, dispatch_uid="user_logout1") 
```

# php - 使用 PHP 上传后将文件复制到第二个目录

> ID：12875981
> 
> 赞同：0
> 
> 时间：2012-10-13T18:55:33.013
> 
> 标签：php, copy, imagick

我正在尝试上传图像，同时将文件复制到另一个目录，然后我希望将其创建为缩略图大小的图像。

这个想法基本上是构建一个动态相册，因此输出是一个图像循环，每次有人上传到它时都会自动更新。

我可以毫无问题地上传主图像，并且输出循环也很容易。但我希望能够在上传文件、文件名和信息的同时复制和拇指图像并将文件、文件名和信息插入目录和数据库。

我一直在尝试在文件上传后运行副本，然后我打算测试一个 Imagick 来拇指第二个 img。但我什至还没来得及测试拇指，因为我的副本不起作用。

如果所有其他方法都失败了，我将只需要使用 Timthumb，但我希望它在输出页面上的加载速度要慢得多。有人对 Timtumb 有任何问题吗？那会容易得多。:)

基本上我有这个

```
if(move_uploaded_file($_FILES['thefile']['tmp_name'], 'uploads/' . $_FILES['thefile']['name'])) {
        $photo_filename = $_FILES['thefile']['name'];
        $query = "INSERT INTO gallery_photos (
                    photo_filename
                ) VALUES (
                    '{$photo_filename}'
                )";
        $result = mysql_query($query, $connection);
        $path = 'http://mydomain.com/directory/uploads/';
        $fpath = $path.$photo_filename;
        $dest = 'http://mydomain.com/directory/thumbs/';
        $fdest = $dest.$photo_filename;
        copy($fpath, $fdest);
        if ($result) {
            redirect_to("new_photo.php?upload=4");
        } else {
            echo "<p>Dude. Something went wrong!</p>";
            echo "<p>" . mysql_error() . "</p>";
        }
    } 
```

我尝试了几种变体，我将副本放在 SQL 上方和下方，我也在没有 $path/$dest 变量的情况下尝试了它，我最初也在没有完整路径的情况下尝试过它。但他们都没有工作。

主要图片正在上传到上传文件夹。它只是没有被复制。数据库正在更新，不用担心。

任何帮助都感激不尽。

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T18:58:18.057

该`copy()`命令需要两个 FILESYSTEM 参数。您正在发送 HTTP URL。

实际上，它确实通过包装器支持 URL，但并非所有包装器都支持覆盖文件 - HTTP 就是其中之一。另一方面，我永远不会尝试使用网络流量来复制本地文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T19:23:46.313

我认为你的复制过程应该是这样的

```
$path = __DIR__; // Full Path to site NOT URL 
$fpath = $path . "/uploads/" . $photo_filename;
$fdest = $path . "/thumbs/" . $photo_filename;

if (! is_file($fpath))
    trigger_error("File Does not exist");

if (!is_writable(dirname($fdest)))
    trigger_error("Can not Write to Destination");

copy($fpath, $fdest); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-22T01:51:54.247

这对我有用：

我使用 dirname( **FILE** ) 而不是**DIR**

$path = 目录名（**文件**）；

# javascript - Processingjs - 在 JS 模式下使用时出现 PImage 错误 - 尝试在 JS 模式下加载图像

> ID：12875991
> 
> 赞同：3
> 
> 时间：2012-10-13T18:56:39.030
> 
> 标签：javascript, processing, processing.js

我正在使用 processingjs 文档中列出的以下代码将图像加载到画布上。因为我在 JS 模式下使用它，所以我在 Processingjs 代码前面加上 Processing 对象，即“处理”。

```
/* @pjs preload="laDefense.jpg"; */
processing.PImage b;
b = processing.loadImage("laDefense.jpg");
processing.image(b, 0, 0); 
```

当我使用此代码时，我收到以下错误：“Uncaught SyntaxError: Unexpected identifier”

Processingjs 文档引用了 loadImage() 的以下代码段 (http://processingjs.org/reference/loadImage_/)：

```
// @pjs preload must be used to preload the image 
/* @pjs preload="laDefense.jpg"; */
PImage b;
b = loadImage("laDefense.jpg");
image(b, 0, 0); 
```

有谁知道我为什么会收到这个错误？

我尝试在标准模式下使用第二个列出的片段 - 在 .pde 文件中，它工作正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T20:16:04.587

我不明白前缀的目的`processing.`。通常，直接处理样式代码通过 .pde 文件加载或嵌入到 html 页面中。当您在处理ide中使用javascript模式时，前者正在为您完成。无需添加`processing.`.

如果您删除了前缀，例如在第二个示例中，则一切都应该在处理中的标准/java 模式或 javascript/processing.js 模式下正常工作。

唯一不能在 processing.js 中使用的是 java 特定的调用和库。但是，您可以使用 processing.js 在您的 .pde 文件中混合和匹配 JavaScript，这是常见的做法。您还可以从 javascript 访问处理“草图”，例如，从 javascript/ajax/jquery/etc 传递数据。您可以在[Pomax 的 Processing.js 指南](http://processingjs.org/articles/PomaxGuide.html)或[Processing.js 网站](http://processingjs.org/)上找到更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T02:31:09.837

关注 Processingjs 网站上的教程，如 Pomax 的处理教程。您将了解如何处理 PImage。PImage 在它准备好 run() 之前有一些要求，所以一个基本的提示是确保你的图像的尺寸与你的 .pjs 文档的大小（宽度，高度）相等（**必须是**）。如果大小大于您使用的图像大小，则 processing.js 和浏览器将能够启动 pjs 草图。

```
<h>Pjs is just fine</h>
<pre class="code"><code class="Javascript code">
   /* @pjs preload="image.jpg"; */
   size(400,500); //must be the same as the image you are using
   PImage b;
   b = loadImage("image.jpg");
   background(b);
   int x,y;
   void setup(){}
   void draw(){}
</code></pre>
<canvas datasrc="sketch.pjs"></canvas> 
```

另一个提示，使用 datasrc=""。您的图像目录可以在其他地方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-22T17:52:16.003

嘿。我有解决办法。

我在读你的例子，第二个的一切都很好。即使我尝试了您的代码，但它没有工作，直到我将图片放入一个名为“数据”的文件中，然后......魔术它工作。总的来说，它必须被称为“数据”的文件，并且与草图在同一个文件上。我希望这些信息对你有帮助…

# c++ - C ++中集合的有效集合交集

> ID：12875993
> 
> 赞同：10
> 
> 时间：2012-10-13T18:57:09.513
> 
> 标签：c++, algorithm, stl, set-intersection

我有一个集合`std::set`。我想以最快的方式找到这个集合中所有集合的交集。集合中的集合数量通常非常少（~5-10），每个集合中的元素数量通常少于 1000，但偶尔会达到 10000 左右。但我需要做这些交集几十数千次，尽可能快。我尝试对以下几种方法进行基准测试：

1.  `std::set`最初复制第一组的对象中的就地相交。然后对于后续的集合，它遍历自身的所有元素和集合的第 i 个集合，并根据需要从自身中删除项目。
2.  使用`std::set_intersection`into a temporary `std::set`，将内容交换到当前集合，然后再次找到当前集合与下一个集合的交集并插入临时集合，依此类推。
3.  手动迭代所有集合的所有元素，如 1)，但使用 a`vector`作为目标容器而不是`std::set`.
4.  与 4 相同，但使用 a`std::list`而不是 a `vector`，怀疑 a`list`将提供从中间更快的删除。
5.  使用散列集 ( `std::unordered_set`) 并检查所有集合中的所有项目。

事实证明，`vector`当每个集合中的元素数量较少时，使用 a 会稍微快一些，而`list`对于较大的集合，使用 a 会稍微快一些。就地使用`set`比两者都要慢得多，其次是`set_intersection`和散列集。是否有更快的算法/数据结构/技巧来实现这一目标？如果需要，我可以发布代码片段。谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-13T19:16:45.527

您可能想尝试对 进行概括`std::set_intersection()`：算法是对所有集合使用迭代器：

1.  如果任何迭代器已到达`end()`其对应集合的 ，那么您就完成了。因此，可以假设所有迭代器都是有效的。
2.  取第一个迭代器的值作为下一个候选值`x`。
3.  在迭代器列表中移动，`std::find_if()`第一个元素至少与`x`.
4.  如果该值大于`x`使其成为新的候选值并在迭代器序列中再次搜索。
5.  如果所有迭代器都在值上，则`x`您找到了交集的一个元素：记录它，递增所有迭代器，重新开始。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-14T12:12:43.363

夜晚是一个很好的顾问，我想我可能有一个想法；）

*   这些天内存比 CPU 慢得多，如果所有数据都适合 L1 缓存没什么大不了的，但它很容易溢出到 L2 或 L3：5 组 1000 个元素已经是 5000 个元素，这意味着 5000 个节点，一个集合节点包含至少 3 个指针 + 对象（即，在 32 位机器上至少有 16 个字节，在 64 位机器上至少有 32 个字节）=> 这至少是 80k 内存，而最近的 CPU 只有 32k 用于 L1D，所以我们已经溢出了进入 L2
*   前面的事实因集合节点可能分散在内存周围的问题而更加复杂，而不是紧密地打包在一起，这意味着缓存行的一部分充满了完全不相关的东西。这可以通过提供一个使节点彼此靠近的分配器来缓解。
*   而且，CPU 更擅长顺序读取（它们可以在您需要它之前预取内存，因此您无需等待）而不是随机读取（不幸的是，树结构会导致相当随机读）

这就是为什么在速度很重要的地方， a `vector`（或者也许 a `deque`）是如此出色的结构：它们与记忆配合得很好。因此，我肯定会推荐使用`vector`作为我们的中介结构；尽管需要注意仅从肢体插入/删除以避免重新定位。

所以我想到了一个相当简单的方法：

```
#include <cassert>

#include <algorithm>
#include <set>
#include <vector>

// Do not call this method if you have a single set...
// And the pointers better not be null either!
std::vector<int> intersect(std::vector< std::set<int> const* > const& sets) {
    for (auto s: sets) { assert(s && "I said no null pointer"); }

    std::vector<int> result; // only return this one, for NRVO to kick in

    // 0\. Check obvious cases
    if (sets.empty()) { return result; }

    if (sets.size() == 1) {
        result.assign(sets.front()->begin(), sets.front()->end());
        return result;
    }

    // 1\. Merge first two sets in the result
    std::set_intersection(sets[0]->begin(), sets[0]->end(),
                          sets[1]->begin(), sets[1]->end(),
                          std::back_inserter(result));

    if (sets.size() == 2) { return result; }

    // 2\. Merge consecutive sets with result into buffer, then swap them around
    //    so that the "result" is always in result at the end of the loop.

    std::vector<int> buffer; // outside the loop so that we reuse its memory

    for (size_t i = 2; i < sets.size(); ++i) {
        buffer.clear();

        std::set_intersection(result.begin(), result.end(),
                              sets[i]->begin(), sets[i]->end(),
                              std::back_inserter(buffer));

        swap(result, buffer);
    }

    return result;
} 
```

看起来是[正确](https://ideone.com/0IoJv2)的，但显然我不能保证它的速度。

# java - java - 如何在java中将消息从一台计算机发送到anther

> ID：12875994
> 
> 赞同：0
> 
> 时间：2012-10-13T18:57:09.793
> 
> 标签：java, networking, network-protocols

我一直在安静地寻找这个，基本上我需要从一台计算机向另一台计算机发送短信，发送的消息应该被另一台计算机接收，显示短信并将刚刚收到的文本重定向到计算机它得到了消息。关于如何实现这一目标的任何想法？或者如果有这方面的任何教程，如果有的话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T19:00:31.770

这是一种聊天程序。为此，您需要一些套接字编程教程。你可以看[Oracle教程](http://docs.oracle.com/javase/tutorial/networking/sockets/index.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T19:00:39.833

您可以简单地使用下面的套接字作为参考。

1.  [第 1 课：套接字通信](http://www.oracle.com/technetwork/java/socket-140484.html)
2.  [课程：关于套接字的一切](http://docs.oracle.com/javase/tutorial/networking/sockets/index.html)

# .net - ProcessorArchitecture 是 Assembly 身份的一部分吗？

> ID：12875997
> 
> 赞同：2
> 
> 时间：2012-10-13T18:57:50.230
> 
> 标签：.net, .net-assembly

根据[此处](http://msdn.microsoft.com/en-us/library/system.reflection.assemblyname.aspx)的 MSDN 文档 - 程序集的标识包括以下内容：简单名称、版本号、加密密钥对和支持的区域性。

但是，在将程序集添加到 GAC 时，ProcessorArchitecture 也用于唯一标识程序集。.NET 框架是否将 ProcessorArchitecture 视为程序集标识的一部分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T20:49:56.413

当您为程序集设置特定于版本的引用时，该引用包括体系结构：

```
<Reference Include="SomeAssembly, Version=1.0.0.0, Culture=neutral, processorArchitecture=x86"> 
```

其中 x86 也可以是 MSIL (anyCPU)、x64 等。

但是，当尝试解析程序集时——运行时不会坚持定义的架构——它只会更喜欢它。也就是说，如果引用的是 x86 程序集，但当前的 DLL 文件是 AnyCPU - 运行时将使用找到的 DLL（当存在 x86 DLL 文件时，对 AnyCPU 程序集的引用也是如此）。

（我已经在私有部署的程序集上对此进行了测试，但我假设共享程序集的探测过程 - 即 GAC 的程序集 - 几乎相同）。（这当然不会违反不将 x86 程序集加载到 x64 进程中的限制，反之亦然）。