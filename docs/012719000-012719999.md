# StackOverflow 问答 12719000-12719999

# php - 使用 shell_exec() 重新启动服务器？

> ID：12719008
> 
> 赞同：1
> 
> 时间：2012-10-04T00:59:03.997
> 
> 标签：php, linux, reboot, su, natty

我有一个 128MB 的 VPS，但它时不时地变得杂乱无章。重新启动将解决问题，但如果我想从浏览器（受密码保护的页面）重新启动怎么办。“www-data”如何使用 PHP 的`shell_exec()`函数重启我的机器（Natty Narwhal）？

我很困惑，因为它需要 sudo。问题是我从未以 www-data 身份登录，这会是我的 sudo 密码吗？另外，我将如何包含密码来执行此操作？

使用root可以吗？如果是这样，那么我将如何从 www-data 执行 su？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-04T01:09:02.167

您是正确的，该`shutdown`脚本需要 root 或 sudo 权限才能执行。如果您确实需要通过 Web 可访问的页面重新启动服务器，一种方法是添加`www-data`到 sudoers 列表，但**仅**用于访问`shutdown`命令。

编辑`/etc/sudoers`并添加以下行：

```
%www-data ALL=NOPASSWD: /sbin/shutdown 
```

该行将允许该`www-data`组`sudo /sbin/shutdown` *无需*密码即可访问 - 因此请确保您的 Web 可访问脚本不公开。

编辑 sudoers 文件后，您可以使用脚本中的以下内容重新启动：

```
shell_exec('sudo /sbin/shutdown -r now'); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-04T01:18:08.780

您可以执行此操作的另一种方法是让根 cron 作业每隔几分钟运行一次，检查文件。如果找到该文件，则将其删除并重新启动系统。您的网页只需要创建文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T01:08:38.853

在 SSH 隧道中使用 RSA 密钥怎么样？

您可以使用它为 www-data 用户生成一个 RSA 密钥和 SSH -i 给另一个用户（root），前提是您将公钥添加到另一个用户的授权主机文件中。然后，只要您使用密钥进行交互式 SSH，您就不需要密码。

您可能想检查您的确切需求，并确保这不是安全风险并且适合您的情况，但这是我想到的第一件事。

希望能帮助到你！

# xpages - checkBoxGroup 用于使用 onClick 显示/隐藏字段。快速单击多个选项失败

> ID：12719009
> 
> 赞同：0
> 
> 时间：2012-10-04T00:59:38.540
> 
> 标签：xpages

我正在对一个相当简单的表单进行故障排除，该表单带有一个带有五个选项的复选框，每个选项对应于一组字段，这些字段根据是否选中该框而隐藏或显示。相当简单。

该复选框在 onClick 事件中有代码，用于设置 viewScope 变量并部分刷新包含所有字段组的面板。每个字段组都在一个面板内，如果 viewScope 变量为真，则该面板会呈现。

但是，如果我快速选择三个选项，我会发现第一个选项之后的点击并不总是被拾取，只有第一个面板显示。我假设这是因为 onClick 事件只运行一次，如果它已经运行就不会重新运行，对吧？

任何人都可以提出一种更具响应性的方式来做到这一点吗？单个复选框？客户端JS代替？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T12:57:06.157

完全同意斯文。服务器端刷新/部分刷新的性质也一度让我大吃一惊。

如果必须以这种方式完成，我最终的目标是通过 CSJS 将复选框（我实际上是在使用单选组）中的更新触发到容器字段，该字段的 css display 属性设置为 none . 这个字段是我绑定到 viewScope 变量的。隐藏容器字段使用 onBlur CSJS 事件进行更新。

要刷新 viewScope 的 var 以供显示使用，它确实需要至少部分刷新；为此，我只是假设人们知道当他们保存表单时，它将加载最新的计算信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T07:03:17.807

部分刷新有延迟。延迟大约为 20 秒或直到最后一次部分刷新完成。可以在 xsp.properties 文件中使用参数*xsp.partial.update.timeout=[seconds]配置确切的延迟*

可以在 CSJS 中使用*XSP.submitLatency*查询当前延迟。*您可以通过在客户端中调用XSP.allowSubmit()*来重置此延迟，然后允许同时“多次”刷新。

但在进行这些杂技动作之前，您应该三思而后行：用户界面是否需要在单击复选框后自动运行刷新？为什么不提供一个简单的“刷新”按钮让您的用户手动执行此操作？或者你可以添加一个加载覆盖来通知用户“现在正在发生一些事情”——这个覆盖可以防止多次点击，如果用户点击太快就不再是问题了。

# sql - SQL Server 日期转换和格式问题

> ID：12719011
> 
> 赞同：0
> 
> 时间：2012-10-04T00:59:49.040
> 
> 标签：sql, sql-server, tsql

我正在尝试将我现有的 sql 日期转换为`yyyy-mm-dd`使用以下命令以格式存储的表中的`dd-mm-yyyy`. 这样做时，我可以成功地将其转换为`nvarchar`数据类型，但是当将其转换为日期时，我仍然收到相同的旧格式`yyyy-mm-dd`.

这是查询

```
Select 
    Convert(date, CONVERT(VARCHAR(10), a.LogDateTime, 103), 103) AS LDate  
from sec.[Log] AS a 
```

我也尝试`nvarchar`使用以下脚本从当前转换，但结果保持不变。

```
SELECT convert(date, '23/10/2016', 103) 
```

任何人都可以说出究竟是什么问题吗？因为我希望我的日期从我们的格式转换为英国格式而不更改其数据类型。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T01:08:01.070

日期不以任何文本格式存储。DATETIME 值以内部格式存储，占用 8 个字节的磁盘存储空间。它**不**以文本形式存储。

仅供参考，yyyy-mm-dd 不是美国格式。它只是一种普遍接受的、明确的显示格式，SQL Server 团队决定使用它在 SQL Server Management Studio 中显示日期值。

如果您必须以特定的形式显示它，则必须在显示层中这样做，例如您的 Visual Studio 创建的桌面应用程序。不幸的是，没有设置来控制 SSMS 中的默认格式，因此如果您打算在 SSMS 中查看它，您只需使用正确的格式 (103) 转换它。

```
declare @d datetime
set @d = '20120506'
select CONVERT(char(10), @d, 103) -- or column instead of variable 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T05:26:29.533

```
SELECT  CONVERT (VARCHAR(15), logdatetime, 105)
FROM    sec.[log] 
```

# c# - 如何在一个 catch 块中捕获所有类型的异常？

> ID：12719013
> 
> 赞同：4
> 
> 时间：2012-10-04T00:59:57.443
> 
> 标签：c#, .net, web-services, exception

```
catch(Exception ex)
{
    //do what you want here

    //When type of exception is System.Web.Services.Protocols.SoapException
    //if (ex.Code.Name.Equals("Client"))
    //{
    //      msg = "service's function not exist";
    //}
    //else if (ex.Code.Name.Equals("Server"))
    //{
    //     msg = "function error"
    //}
    //else
    //{
    //     msg = "unknown";
    //}
    //MessageBox.Show(msg, "error", MessageBoxButtons.OK);

**But ex is not System.Web.Services.Protocols.SoapException so I cannot call ex.Code.Name.Equals("Client")**

//When System.Net.WebException
//switch (ex.Status)
//{
//   case System.Net.WebExceptionStatus.ConnectFailure:
//              do some thing
                break;
//   case System.Net.WebExceptionStatus.Timeout:
                //do some thing
                break;
//    case System.Net.WebExceptionStatus.ProtocolError:
            switch (((System.Net.HttpWebResponse)ex.Response).StatusCode)
            {
                  case System.Net.HttpStatusCode.NotFound:
                        //do some thing
                        break;
                    case System.Net.HttpStatusCode.ServiceUnavailable:
                        //do some thing
                        break;
                    case System.Net.HttpStatusCode.Unauthorized:
                        //do some thing
                        break;
                    default:
                        //do some thing
                        break;
                }
                break;
            default:
                //do some thing
                break;
        }
} 
```

**但异常不是 System.Net.WebException。所以不能调用 ex.Status**

**我的问题：**

我有一个 Smartclient 软件，包括作为客户端的 WindowsForm 和作为服务器的 Web 服务。客户端和服务器都是 n 层应用程序，我已经测试过，发现从客户端调用服务时有任何问题

1.  在 app.config: 服务路径错误。我抓住*System.NotSupportedException*
2.  或者当服务器无法连接时：*System.Net.WebExceptionStatus*
3.  服务器的 webconfig 错误：*System.InvalidOperationException*
4.  服务抛出异常：*System.Web.Services.Protocols.SoapException* ...

**我的点子**

我称作为所有其他异常类型的代表的异常是*代表* AlException 我有命名空间：Common 和两个类*代表*AlException.cs和*BusinessExceptionHandler.cs*

使用参数作为 (representativeAlException ex) 创建一个通用函数

```
 try
            {
                Err_LogCheck.Service1.Service1 service = new Err_LogCheck.Service1.Service1();
                return service.getDeviceByZero(ZERO);
            }
            catch (Common.representativeAlException ex)
            {
                Common.BusinessExceptionHandler.ProcessException(ex);
            } 
```

**我想做的事**

调用服务的位置。只有一个 catch 块可以处理所有类型的异常

在*ProcessException(representativeAlException ex)*函数中

```
switch (ex)
{
case System.InvalidOperationException:
 //Do some thing
 break;
case System.NotSupportedException:
 //Do some thing
 break;
case System.Web.Services.Protocols.SoapException:
 //do some thing
 break;
...
... 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-04T01:06:07.403

要处理所有异常，请使用 Exception 类。

```
try
{

}
catch(Exception ex)
{
     switch (ex.GetType().ToString())
     {
         case "System.InvalidOperationException":
              //cast ex to specific type of exception to use it's properties
              ((InvalidOperationException)ex).SomeMethod();
         break;
         case "System.NotSupportedException":
             ((System.NotSupportedException)ex).AnotherMethod();
         break;
         case "System.Web.Services.Protocols.SoapException":
             ((System.Web.Services.Protocols.SoapException)ex).OtherMethod();
         break;
     }

} 
```

为什么你不能只使用多个 catch 块呢？

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-10-23T11:39:12.740

***User2808350***是正确的，try catch 块可以有许多不同的 catch 是有原因的，但是有时你会发现在使用这种模式时你在重复自己 (DRY)。

可以产生简洁易读的代码的另一种方法是使用**is**运算符，如果您的异常是特定类型的实例或派生自该类型的实例，则该运算符的计算结果为 true。不幸的是，不能在 switch 块中使用**is**运算符，因此您必须使用 if-then-else。

这是我测试异常类型并相应设置退出代码的示例。

```
try
{
    // try something
}
catch (Exception e)
{
    if (e is FileNotFoundException)
        Environment.ExitCode = 2;
    else if (e is InvalidOperationException)
        Environment.ExitCode = 1;
    else
        Environment.ExitCode = 42;
    throw;
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2020-03-20T12:00:05.247

# 现在这是一项语言功能。只需使用 switch/case 语句

提问者的第一次尝试，在问题的代码片段中被注释掉，现在是最简单也是我认为最好的方法。

实际上，我在试图弄清楚 Resharper 对其建议的改进之一做了什么时遇到了这个问题。我仍然不能 100% 确定所涉及的术语，因为我能找到的唯一文档是解释[Discards](https://docs.microsoft.com/en-us/dotnet/csharp/discards#pattern-matching-with-switch-and-is)，并且只在传递“与 is 和 switch 关键字匹配的模式”时提到，这也在执行。

正如 Onkel-j 建议的那样，我已经开始使用“if ex is Type”链：

```
try
{
    doWork();
}
catch (Exception ex)
{
    if (ex is SpecificExceptionType)
    {
        //todo
    }
    else 
    {
        //etc
    }
} 
```

但 resharper 建议我让它将其更改为开关/案例：

```
try
{
    doWork();
}
catch (Exception ex)
{
    switch (ex)
    {
        case SpecificExceptionType _:
            //todo
            break;            
        default:
            //etc
            break;
    }
} 
```

Resharper 已经使用[Discards](https://docs.microsoft.com/en-us/dotnet/csharp/discards#pattern-matching-with-switch-and-is)进行了一种*自动处理* ***，***并丢弃了未使用的变量。如果您需要实际使用异常**作为**特定类型，请为其命名以代替下划线：

```
try
{
    doWork();
}
catch (Exception ex)
{
    switch (ex)
    {
        case SpecificExceptionType specific:
            HandleSpecificException(specific);
            break;            
        default:
            //etc
            break;
    }
} 
```

或者回答原来的问题：

```
catch(Exception ex)
{
    //do what you want here

    switch(ex)
    {
        case System.Web.Services.Protocols.SoapException soapEx:        
            if (soapEx.Code.Name.Equals("Client"))
            {
                  msg = "service's function not exist";
            }
            else if (soapEx.Code.Name.Equals("Server"))
            {
                 msg = "function error"
            }
            else
            {
                 msg = "unknown";
            }
            MessageBox.Show(msg, "error", MessageBoxButtons.OK);    
            break;
        case System.Net.WebException webEx:
            switch (webEx.Status)
            {
               case System.Net.WebExceptionStatus.ConnectFailure:
                    //do some thing
                    break;
               case System.Net.WebExceptionStatus.Timeout:
                    //do some thing
                    break;
                case System.Net.WebExceptionStatus.ProtocolError:
                    switch (((System.Net.HttpWebResponse)webEx.Response).StatusCode)
                    {
                        case System.Net.HttpStatusCode.NotFound:
                            //do some thing
                            break;
                        case System.Net.HttpStatusCode.ServiceUnavailable:
                            //do some thing
                            break;
                        case System.Net.HttpStatusCode.Unauthorized:
                            //do some thing
                            break;
                        default:
                            //do some thing
                            break;
                    }
                    break;
                default:
                    //do some thing
                    break;
            }
            break;
        default:
            //etc
            break;
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-23T18:30:02.307

应该使用

```
try {

    ....

}
catch (System.Net.HttpStatusCode.NotFound)
{
 //do some thing
}    
catch (System.Net.HttpStatusCode.ServiceUnavailable)
{
 //do some thing
}

catch (System.Net.HttpStatusCode.Unauthorized)
{
 //do some thing
}

catch (System.Net.HttpStatusCode.NotFound)
{
 //do some thing
}    
catch (Exception)
{
 //do some thing
} 
```

最好使用 swicth

# javascript - Flash 和 Javascript 中的闪烁/生涩/口吃动画

> ID：12719018
> 
> 赞同：1
> 
> 时间：2012-10-04T01:00:31.673
> 
> 标签：javascript, flash, actionscript, flicker, smooth

这是一个演示： http: [//nushuttles.com/chords/player.html](http://nushuttles.com/chords/player.html)
上面的方块是用 Flash 渲染的，下面的方块是用 Javascript 动画的。

正如您可能知道的那样，在 Flash 和 Javascript 动画中，每隔几秒就会出现一些偶尔的闪烁、抖动或卡顿。我想这是因为计算机偶尔会将其资源用于另一个进程，导致 Flash 播放器和 Javascript 挂起几毫秒。我在许多其他 Flash 和 Javascript 动画中都看到了这一点，但只有当你试图在屏幕上以恒定速度移动某些东西时它才会变得明显……不幸的是，这正是我需要做的。

对于 Flash 框，我将 Flash 播放器的“wmode”参数设置为“direct”，这应该可以提供最佳性能。我还使用了一个名为 GTween 的库，而不是仅仅增加 x 坐标。这些都无法完全阻止口吃。

对于 Javascript 框，我使用了一个名为 requestAnimationFrame 的东西，如下所述：[http](http://creativejs.com/resources/requestanimationframe/) ://creativejs.com/resources/requestanimationframe/ 。我也尝试使用画布。还是好不了。

有没有办法在 Flash 或 Javascript 中获得完美流畅的动画？有没有办法让 Flash 播放器为其进程提供更高的优先级？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T02:28:13.090

我不确定为什么你的 JavaScript 动画像以前那样生涩/华丽。我用 CSS 做了一个与你类似的动画，它不是很生涩，也没有表现出闪光。我把代码[放在这个 jsFiddle 中](http://jsfiddle.net/G5raR/)。

HTML

```
<div id="outer">
    <div id="abox"><div>
</div> 
```

CSS

```
#outer { background-color: black; width: 500px;  height: 500px; }
#abox {
    position: relative; top: 20px;
    background: red;
    width: 100px; height: 100px;
} 
```

JavaScript/jQuery：

```
$(document).ready(function(e) {
    var ttime, $abox, width, toRight;

    ttime = 4000;
    $abox= $("#abox");
    width = $("#outer").outerWidth() - $abox.outerWidth();
    toRight = true;
    function swing() {
        var leftTo = (toRight ? width : 0);
        toRight = !toRight;

        $abox.animate({
            left: leftTo
        }, ttime, function() {
            setTimeout(swing, 50);
        });
    }

    setTimeout(swing, 50);
}); 
```

# linux - Linux 命令 reset(1) 很慢

> ID：12719021
> 
> 赞同：12
> 
> 时间：2012-10-04T01:01:52.690
> 
> 标签：linux

控制台命令`reset(1)`是，我觉得太慢了。在我的机器上，执行需要 1 秒的挂墙时间。

为什么是这样？可以快速制作吗？或者，是否有另一个命令可以擦除我的终端缓冲区？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-04T01:13:41.133

我跑了`strace reset`，在接近尾声时看到了这个：

```
nanosleep({1, 0}, 0x7fffe32053e0)       = 0 
```

所以它在发送所有终端重置代码后故意等待一秒钟，可能是因为某些终端需要时间来处理所有事情。

您应该不需要`reset`经常使用（仅当全屏程序异常终止时，它不会自行重置终端），这有什么大不了的？

我不确定“擦除我的终端缓冲区”是什么意思。那不是`reset`目的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-04T01:16:06.333

reset 使用 clear、rmacs、rmm、rmul、rs1、rs2 和 rs3 参数调用 tput(1)。这会导致 tput 根据 /etc/termcap（对于 GNU 或 BSD tput）或 terminfo 数据库（对于 ncurses tput）中的信息向终端发送适当的重置字符串。当 Linux VC 开始打印“看起来很有趣”的字符时，这个序列似乎足以重置它们。为了更好地衡量，使用 sane 参数调用 stty(1) 以尝试恢复熟模式。

另请参见 clear(1)、stty(1)、tput(1)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-04T01:21:21.210

如果您只想清除终端缓冲区，可以查看[clear(1)](http://linux.die.net/man/1/clear)命令。

[clear(1)](http://linux.die.net/man/1/clear)手册页的摘录：

```
NAME
   clear - clear the terminal screen

SYNOPSIS
   clear

DESCRIPTION
   clear clears your screen if this is possible.  It looks in
   the environment for the terminal type and then in the 
   terminfo database to figure out how to clear the screen.
   ... 
```

# asp.net - 使用 ASP MVC 3 控制器的查询聚合数据

> ID：12719026
> 
> 赞同：0
> 
> 时间：2012-10-04T01:02:47.357
> 
> 标签：asp.net, asp.net-mvc-3, linq

我有三张桌子：

> 包名：包名ID、包名
> 
> 食物：食物ID，食物
> 
> PackageContent：PackageContentID、PackageNameID、FoodID、Qty

我想要做的是显示如下内容：

> *   包装名称（食物=数量，食物=数量） 编辑 | 详情 | 删除
>     
>     
> *   A (洋葱=4,辣椒=3) 编辑 | 详情 | 删除
>     
>     
> *   B (卷=2,洋葱=2) 编辑 | 详情 | 删除

这是我的视图模型：

```
public class PackageViewModel
{
  public int ID { set;get;}
  public string Name { set;get;}
  public List<FoodItem> FoodItems { set;get;}
  public PackageViewModel()
  {
     FoodItems=new List<FoodItem>();
  }
}
public class FoodItem
{
  public string FoodName { set;get;}
  public int Quantity { set;get;}
} 
```

这是我的看法：

```
@model List<PackageViewModel>

@foreach(var item in Model)
{
  <tr>
   <td>@item.Name</td>
   <td>
       foreach(var food in item.FoodItems)
       {
         @food.FoodName - @food.Quantity
       }
   </td>
   <td>
      @Html.ActionLink("Edit","Edit",new {@id=item.ID})
   </td>
  </tr>
} 
```

这是我在控制器中使用的查询：

```
List< PackageViewModel > listVM=new List< PackageViewModel >();

listVM =

        from pn in db.PackageNames
        from pc in db.PackageContents
            .Where(p => p.PackageNameID == pn.PackageNameID).DefaultIfEmpty()
        from f in db.Foods
            .Where(f => f.FoodID == pc.FoodID).DefaultIfEmpty()
        select new PackageViewModel { PackageNameID = pc.PackageNameID, PackageName = pn.PackageName, FoodItems = f.Food.ToList() };

    return View(listVM); 
```

但是，我收到以下错误： **无法将类型“System.Collections.Generic.List”隐式转换为“System.Collections.Generic.List”**

此外，无论如何选择行都不正确....我需要指定食物的名称（“食物”表中的“食物”）和该食物的数量（“包装内容”中的“数量” ”表）添加到模型中的“FoodItems”列表中。我该怎么做呢？

非常感谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T21:18:26.620

您没有显示冲突`List`类型的类型参数，但我很确定这与该部分有关

```
FoodItems = f.Food.ToList() 
```

`FoodItems`is a `List<FoodItem>`,`FoodItem`是视图模型中的辅助类，while`f.Food`是`Food`实体对象的集合。

像这样的东西可能有效：

```
FoodItems = f.Food.Select(fi => new FoodItem 
                                { 
                                   FoodName = fi.Name,
                                   Quantity = fi.Quantity
                                }) 
```

尽管我必须猜测您的实体类是什么样的。

# ruby - RVM 设置 ruby 默认，当打开新终端时擦除 RVM 设置，回到系统 ruby

> ID：12719027
> 
> 赞同：7
> 
> 时间：2012-10-04T01:02:49.173
> 
> 标签：ruby, bash, terminal, rvm, zsh

我刚买了一台新的 MacBook Pro，并尝试在系统中设置 RVM。我安装了 RVM 并将默认设置为

`➜ rvm list default`

 `Default Ruby (for new shells)` 

`ruby-1.9.3-p194 [ x86_64 ]`

我的 RVM 版本是

`➜ rvm --version`

`rvm 1.16.8 (master) by Wayne E. Seguin , Michal Papis [https://rvm.io/]`

我放在**.bashrc_profile**`[[ -s "$HOME/.rvm/scripts/rvm" ]] && source "$HOME/.rvm/scripts/rvm" # This loads RVM into a shell session.`的底部。

 **当我打开新的终端窗口时，我`rvm default`每次都从系统 ruby​​ 重置为 rvm 安装的 ruby​​。

我已经完成了 3 个小时的研究，并阅读了 20 多个关于此问题的不同博客。而且我仍然没有解决这个问题的方法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-04T01:22:56.003

如果 RVM在 shell**中**工作，但没有使用首选 ruby​​ 作为默认值，请在 1.9.3 中使用以下设置：

```
rvm --default use 1.9.3 
```

如果 RVM**不**工作，则可能是 RVM 未加载的登录 shell 问题：

登录 shell（通常在 X 窗口管理器中打开终端窗口时）将使用`.bash_profile`交互式的非登录 shell 引用`.bashrc`（可能是加载 rvm shell 代码的位置）。

## 选项1

便宜的修复，符号链接他们：

`ln -s ~/.bashrc ~/.bash_profile`

## 选项 2

可选地，一些终端（例如 gnome-terminal）也提供设置来强制每个新终端会话的登录 shell。

## 选项 3

创建一个`.bash_login`包含以下内容的文件：

```
[[ -s "$HOME/.rvm/scripts/rvm" ]] && source "$HOME/.rvm/scripts/rvm" # Load RVM into a shell session *as a function* 
```

（Bash 将检查`~/.bash_profile`，然后`~/.bash_login`，最后`~/.profile`。）

有关其他详细信息，请参见[bash 手册页](http://linux.die.net/man/1/bash)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T01:05:12.400

我不熟悉`.bashrc_profile`文件。我认为你的意思是在你的`.profile`or`.bashrc`文件中有这一行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-08T23:22:14.090

使用它`$ source $(rvm 1.9.3 do rvm env --path)` 并指定每次打开终端时要使用的版本。放入后，您无需打开另一个，因为它会默认返回。所以如果你想使用 v. 2.2.1`$ source $(rvm 2.2.1 do rvm env --path)`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-07T22:58:15.743

有一些事情要检查：

1.  转到终端模拟器，首选项，并启用登录shell，有时需要使用`/bin/bash --login`而不是仅仅切换，放置`/bin/login`不起作用，

2.  其中一个`~/.bash*`文件可能正在重置`PATH`，注释掉任何`PATH=...`行。

完成后确保打开一个新终端（确保之前关闭它）。**

# excel - 将动态范围文本复制到另一个范围

> ID：12719030
> 
> 赞同：0
> 
> 时间：2012-10-04T01:03:27.917
> 
> 标签：excel, vba

我正在尝试编写一些代码，将一个特定命名范围单元格的值复制到另一个命名范围中。

代码如下：

```
If Not Intersect(Target, Target.Worksheet.Range("RaceDrop")) Is Nothing Then
    If Range("RaceDrop") = Range("Races").Cells(1, 1) And Range("ClassDrop") = Range("Classes").Cells(1, 1) Or Range("Races").Cells(1, 1) And Range("ClassDrop") = Range("Classes").Cells(1, 2) Then
         Range("OriginDrop") = Range("Origins").Cells(1, 1) 
```

每个像 "Range("X") = Range("Y").Cells(x, x)" 这样的语句都会在 If 语句和结果中给出错误。但是，如果我将其设为静态语句，例如 Range("Races").Cells(1, 1) 的 "Human"。虽然此解决方法有效，但我想让所有引用动态化，以便更改或移动数据值所需的时间少得多。

例如，我尝试过 Range("Origins").Cells(1, 1).Text ，但它仍然不起作用。还有其他方法可以解决这个问题吗？

编辑：我还应该补充一点，我得到的错误是“对象'_Worksheet'的方法'范围'失败”

添加：

Cells() 的引用是因为它们引用实际范围，而不仅仅是一个单元格。有些指的是大表，所以有时它会是 Range("Table").Cells(5, 3)，它并不总是指 1, 1。我不确定引用特定单元格的另一种方式在一张桌子上。

例如，我想做的一点是： Range("OriginDrop") = Range("Origins").Cells(4, 1)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T13:46:23.873

发现了问题。通常，我不必专门键入数据所在的工作表，因为表在全局范围内工作（通常我只有 Range("Table") 并且无论代码在哪里它都可以工作，因为它总是知道在哪里参考）但是..似乎因为我试图将数据从一个表复制到另一个工作表上的一个表中，所以它不能那样工作，并且需要定义 Sheets("")。

除了在这种情况下，它似乎总是在全球范围内工作，这有点奇怪。那好吧。感谢您的尝试。

新代码示例：

```
If Not Intersect(Target, Target.Worksheet.Range("RaceDrop")) Is Nothing Then
If Range("RaceDrop") = Sheets("Data").Range("Races").Cells(1, 1) and Range("ClassDrop") = Sheets("Data").Range("Classes").Cells(1, 1) or Range("Races") = Sheets("Data").Range("Races").Cells(1, 1) and Ranges("ClassDrop") = Sheets("Data").Range("Classes").Cells(2, 1)
     Range("OriginDrop") = Sheets("Data").Range("Origins").Cells(1, 1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T01:16:38.123

两件事情：

*   用于`Range("RaceDrop").Value`表示单元格的实际值。大多数时候`Range("RaceDrop") =`都会起作用，但最好总是明确地说`.Value`
*   我不完全确定您要对`Cells(1,1)`部分代码执行什么操作，但是如果您要查找范围内的左上角值，请尝试以下代码

代替

```
Range("Races").Cells(1, 1) 
```

和

```
Cells(Range("Races").row, Range("Races").column).Value 
```

如果您所指的单元格`Ranges`仅以单个命名，则`Cell`您应该只能使用

```
Range("Races").Value 
```

而不是上面的。

# actionscript-3 - 在 AS3 中导入什么以允许“addEventListener”？

> ID：12719031
> 
> 赞同：0
> 
> 时间：2012-10-04T01:03:32.593
> 
> 标签：actionscript-3, import, addeventlistener

这是一个非常基本的问题（我对 AS3 有点陌生）但是你在 AS3 中导入什么来允许“addEventListener”？我犯了学习如何在时间轴上编程的错误，现在这个跳转有点棘手。

编辑：这是我的代码（有无数错误，但我只想修复 addEventListener ）：

```
package 
{
    import flash.display.*;
    import flash.events.*;
import flash.utils.*;

public class TheGameItself extends MovieClip
{

    public static function startit(stage)
    {
        addEventListener(Event.ENTER_FRAME, movecat);
        addEventListener(Event.ENTER_FRAME, spawnanimal);
        var myDelay:Timer = new Timer(100);
        myDelay.addEventListener(TimerEvent.TIMER, showMessage);
        myDelay.start();
        var myMouse = 0;
        var speed = 1;
        var wave = 1;
        var score = 0;
        var rnum = 0;
        var moveornot = false;
    }
    function showMessage(event:TimerEvent):void
    {
        moveornot = true;
    }

    function movecat(event)
    {
        if ((mouseY > 40) && (mouseY < 330))
        {
            cat.y = mouseY;
        }
    }
    function spawnanimal(event)
    {
        var rnum = Math.floor(Math.random() * ((100 / wave) - 1 + 1)) + 1;
        if (rnum == 5)
        {
            myMouse = new mouse();
            myMouse.x = 0;
            myMouse.y = Math.floor(Math.random() * (350 - 45 + 1)) + 45;
            addChild(myMouse);
            for (var i:int = 0; i < 10000; i++)
            {
                if (moveornot == true)
                {
                    myMouse[i].y +=  speed * 100;
                    moveornot == false;
                    if ((myMouse.x == 500) || (myMouse.hitTestObject(cat)))
                    {
                        myMouse.visible = false;
                    }
                }
            }
        }
    }

}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T01:13:17.333

要创建一个可以分派事件的类，然后扩展`flash.events.EventDispatcher`. 这将为作为该类实例的对象提供`addEventListener`和方法。`dispatchEvent`对于侦听事件的对象，您不需要导入任何内容。

在`com/foo/MyClass.as`：

```
package com.foo {
   import flash.events.EventDispatcher;

   public class MyClass extends EventDispatcher
   {

   }

   public function doSomething():void
   {
       dispatchEvent( new Event("eventType"));
   } 
} 
```

别处：

```
import com.foo.MyClass;

var obj:MyClass = new MyClass();
obj.addEventListener("eventType", onEvent);

obj.doSomething();

function onEvent(event:Event):void
{
    trace("the event happened");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T13:22:54.640

您不能通过静态函数访问对象的实例。
在以下代码中：

```
public static function startit(stage)
{
  addEventListener(Event.ENTER_FRAME, movecat);
  addEventListener(Event.ENTER_FRAME, spawnanimal);
  var myDelay:Timer = new Timer(100);
} 
```

通过做：

```
addEventListener(Event.ENTER_FRAME, movecat); 
```

你本质上是在做：

```
this.addEventListener(Event.ENTER_FRAME, movecat); 
```

这就是说将侦听器添加到当前实例化中，但是您将函数声明为静态，这将不允许您这样做。

取消静态引用以解决您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T01:09:26.660

你需要：

```
import flash.events.EventDispatcher; 
```

请参阅[参考资料](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/events/EventDispatcher.html#addEventListener%28%29)。

例如，如果您`EventDispatcher`像这样扩展：

```
public class MyClass extends EventDispatcher {
...
} 
```

然后你可以在类`addEventListener()`的任何实例上使用`MyClass`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T12:53:36.327

作为`TheGameItself`扩展`MovieClip`，你不需要包含任何东西——`MovieClip`已经扩展了`EventDispatcher`。你的问题是这`startit()`是一个静态函数，`addEventListener()`而是一个对象函数。

从 中删除静态`startIt()`，创建您的实例`TheGameItself`，它应该没问题。

例如（在您的主要课程中）：

```
var game:TheGameItself = new TheGameItself; // hold a reference to this somewhere, otherwise it'll be gc'd
game.startIt(); 
```

在一些相关的说明中，`myMouse`等都将`score`是函数的局部变量`startIt()`，因此当函数退出时它们将不存在

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-04T05:19:37.560

您需要导入即将使用的事件的API。如果你要使用一个`EnterFrame`事件，那么你应该导入`flash.Events.Event`. 因为`EnterFrame`事件编码在`Event`API 中。有关更多详细信息，请访问[有关事件的 ADOBE 文档](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/events/package-detail.html)。

如果你想在添加到阶段后进行初始化，你可以利用这个

```
 this.addEventListener(Event.ADDED_TO_STAGE, onAdded); 
```

同样在您的代码中，您在静态函数中声明了一些变量。当您尝试在该函数之外访问这些变量时，您将收到错误消息。如果你想让它对所有函数通用，那么将它声明为全局变量。

我不确定你为什么使用静态函数。如果可能，请尝试利用上述侦听器来避免在这种情况下调用静态函数。

# google-maps - 如何从谷歌开发者自定义 Store Locator 插件的侧面板

> ID：12719036
> 
> 赞同：0
> 
> 时间：2012-10-04T01:04:13.127
> 
> 标签：google-maps, google-maps-api-3

我正在尝试使用来自谷歌开发者的商店定位器插件： [http ://storelocator.googlecode.com/git/index.html?utm_campaign=sl&utm_source=youtube](http://storelocator.googlecode.com/git/index.html?utm_campaign=sl&utm_source=youtube)

我想将搜索定位器重新定位到页面的顶部，就像它在谷歌地图上一样，这就是我最终的结果：1.我在上面和侧面 2\. 上创建了两个面板，并为它们分配了相同的视图。3\. 使用 css 隐藏 up 面板上的 storelist。4\. 隐藏侧面板上的搜索定位器 5\. 然后在上面板上的搜索定位器上搜索时，我没有在侧面板上获得更新的商店列表和功能。

请帮助我解决我所缺少的。

以下是我尝试使用的 js 代码：

> google.maps.event.addDomListener(window, 'load', function() { var map = new google.maps.Map(document.getElementById('map-canvas'), { center: new google.maps.LatLng(- 28, 135), 缩放: 5,
> 
> ```
> mapTypeId: google.maps.MapTypeId.ROADMAP   }); 
> ```
> 
> //var panelDiv = document.getElementById('panel'); var panelDiv = $('.panel'); var searchPanel = $('#searchPanel');
> 
> var data = new MedicareDataSource;
> 
> var view = new storeLocator.View(map, data, { geolocation: false, features: data.getFeatures() });
> 
> /*var search_panel = new storeLocator.Panel(searchPanel, { view: view, Directions: false }); */
> 
> var side_panel = new storeLocator.Panel(panelDiv, { view: view, locationSearch: true });
> 
> /*$(search_panel).live('view_changed', function(){ alert('Working');
> 
> });*/
> 
> });

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T15:23:42.820

问题是风格

```
<style type="text/css">
  body { font-family: sans-serif; }
  #map-canvas, #panel { height: 500px; }  //HERE
  #panel { width: 300px; float: left; margin-right: 10px; }//HERE
  #panel .feature-filter label { width: 130px; } //HERE
  p.attribution, p.attribution a { color: #666; }
</style> 
```

您需要更改它以满足您的要求，如果您需要，这里是一个很好的[教程](http://www.w3schools.com/css/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T06:19:41.573

在 storelocator.css 上。这就是我现在用来将搜索框移动到页面顶部的方法：

```
.storelocator-panel .location-search {

    top:45px;
    padding: 5px;
    position: absolute;
    width: 400px;
    margin-left:-210px;
    left:50%;

} 
```

# regex - 我应该在 Common Lisp 中使用哪些正则表达式库？

> ID：12719039
> 
> 赞同：3
> 
> 时间：2012-10-04T01:05:06.173
> 
> 标签：regex, common-lisp

我正在尝试学习 Common Lisp 并希望使用正则表达式来解析文本文件。对于像我这样的初学者来说，哪个库最容易使用？我是否正确地假设它取决于我正在使用的 Common Lisp 的实现？我看到了一些有希望的谷歌结果，但我认为看看我是否能从 Lispers 那里得到一些好的建议不会有什么坏处。谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-04T03:51:40.070

对于初学者只需使用[CL-PPCRE](http://weitz.de/cl-ppcre/)。它快速、健壮且稳定，在任何实现上都能正常工作。

还有一个小技巧可以让使用它更愉快 - 添加一个昵称`RE`之外`PPCRE`。

```
(rename-package "CL-PPCRE" "CL-PPCRE" '("PPCRE" "RE")) 
```

所以你可以这样使用它：`(re:scan ...`

# javascript - IE9 中的 JQuery 页面转换

> ID：12719043
> 
> 赞同：0
> 
> 时间：2012-10-04T01:05:37.657
> 
> 标签：javascript, jquery, internet-explorer

我是 JQuery 的新手，所以不太了解我编写的 JQuery 以及如何对其进行故障排除。在 Internet Explorer 上运行时，我的网站出现问题。我为我的网页创建了一些过渡，以便网站从一个页面顺利移动到另一个页面，这在 Chrome 和 Firefox 上没有问题。但是，当我进入 IE9 时，我遇到了问题！顶部的标题（div name `#footer`）是唯一的过渡！页面的其余部分无法显示！我的代码中缺少什么？代码可以在这里找到。

作为旁注......有人知道在哪里可以获得一些JQuery技巧或教程吗？这将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T05:40:51.090

快速浏览一下您的网站，我能够通过向 body 标签添加 100% 的宽度和高度来解决内容不显示的问题。我的 GoogleFu 技能让我不*知道为什么*会这样，但我猜它与 IE9 如何计算当 body 元素绝对定位时应该和不应该显示的内容有关。我想如果您将其添加到 body 标签上的 CSS 声明中，您的动画将按预期工作。

# google-apps-script - 基于时间的触发器设置触发器的功能间歇性失败

> ID：12719045
> 
> 赞同：2
> 
> 时间：2012-10-04T01:05:50.313
> 
> 标签：google-apps-script, google-sheets

我有一个函数（见下文），它根据基于 GoogleClock() 函数计算的工作表中包含的时间以编程方式删除然后重置 3 个触发器，并且每天自动递增到下一个工作日（使用 WORKDAY( ) ) 函数和包含所有假期的范围。它设置的三个触发器之一是在下一个工作日结束时再次运行自身的触发器，其中流程重新启动。

这大约有 60% 的时间有效，其余时间都失败了。据我所知，没有生成错误电子邮件。

函数如下。while 循环旨在确保在脚本运行时电子表格值不在 GoogleClock() 重新计算中，这是我最初怀疑它失败的原因。有什么建议么？

```
function setCustomRunTriggers() {
  Utilities.sleep(5000);
  var sheet = SpreadsheetApp.getActiveSpreadsheet().getSheetByName("PushedSchoolHolidays");
  var nextMidnight = sheet.getRange('D3').getValue();
  var nextSeven = sheet.getRange('D4').getValue();
  var nextSevenOFive = sheet.getRange('D5').getValue();
  var type =  getType(nextMidnight);
  while (type!="Object") {
    nextMidnight = sheet.getRange('D3').getValue();
    nextSeven = sheet.getRange('D4').getValue();
    nextSevenOFive = sheet.getRange('D5').getValue();
    type =  getType(nextMidnight);
  }
  var triggers = ScriptApp.getScriptTriggers();
  for (var i = 0; i<triggers.length; i++) {
    var eventType = triggers[i].getEventType();
    var triggerSource = triggers[i].getTriggerSource();
    var handlerFunction = triggers[i].getHandlerFunction();
    if ((handlerFunction=='functionA')&&(eventType=="CLOCK")&&(triggerSource=="CLOCK")) {
      ScriptApp.deleteTrigger(triggers[i]);
    }
    if ((handlerFunction=='functionB')&&(eventType=="CLOCK")&&(triggerSource=="CLOCK")) {
      ScriptApp.deleteTrigger(triggers[i]);
    }
     if ((handlerFunction=='setCustomRunTriggers')&&(eventType=="CLOCK")&&(triggerSource=="CLOCK")) {
      ScriptApp.deleteTrigger(triggers[i]);
    }
  }
  ScriptApp.newTrigger('functionA').timeBased().at(nextMidnight).create();
  ScriptApp.newTrigger('functionB').timeBased().at(nextSeven).create();
  ScriptApp.newTrigger('setCustomRunTriggers').timeBased().at(nextSevenOFive).create();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T07:00:29.250

我在提供的代码中看到以下问题

1.  在基于时间的触发代码中使用[SpreadsheetApp.getActiveSpreadsheet方法。](https://developers.google.com/apps-script/class_spreadsheetapp#getActiveSpreadsheet)如果触发器所属的用户没有任何打开的电子表格或活动电子表格没有工作`PushedSchoolHolidays`表，则代码将引发“无法调用 null 的方法“getSheetByName””异常或类似的东西。有必要使用[SpreadsheetApp.openById](https://developers.google.com/apps-script/reference/spreadsheet/spreadsheet-app#openbyidid)方法来摆脱这个问题。
2.  这些`getType`方法在超过 5 分钟内返回一个与“Object”不同的字符串。脚本托管代码引发“超过最大执行时间”异常。
3.  所有触发器的执行时间都超过了[Day Trigger Aggregate Execution Time](https://script.google.com/dashboard)限制。

> 据我所知，没有生成错误电子邮件。

以编程方式创建的触发器没有`Execution failure notification`电子邮件。这可能是您没有收到错误电子邮件的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-07T14:06:22.200

我已经学会了将所有（！）的 newTrigger() 放入 try/catch 块中，并在 catch 块中发送电子邮件通知。这允许我在 newTrigger 失败时收到一些反馈，例如因为您遇到了每日触发限制。

```
 try{
    ScriptApp.newTrigger('myFunction').timeBased().after(10000).create();
  } catch(error){
    MailApp.sendEmail("me@example.com", "NEWTRIGGER FAILED!", "Creating new time based trigger failed: \r\n" + error);
  } 
```

# shopify - Shopify API 订单查询参数的时区

> ID：12719047
> 
> 赞同：3
> 
> 时间：2012-10-04T01:06:03.387
> 
> 标签：shopify

Shopify[订单 API](http://api.shopify.com/order.html)允许指定基于日期的查询参数（例如`created_at_min`）。我想知道这些日期的时区是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T12:40:06.670

如果您不提供时区，Shopify 将采用 UTC。为了让生活更轻松，您可以在请求中指定时区，例如`2008-01-10T11:00:00-05:00`

注意：确保在传递时间戳之前对时间戳进行 URL 编码，否则会遇到某些字符（`+`特别是）的问题。

# java - 将图片发布到粉丝页面墙的Java代码

> ID：12719049
> 
> 赞同：2
> 
> 时间：2012-10-04T01:06:08.430
> 
> 标签：java, facebook, jakarta-ee

1.  我从这里开发者.facebook.com/apps 制作了一个 facebook 应用程序，名为“Jobs Factory Egypt”

2.  我制作了一个 java 应用程序，它使用我的访问令牌通过上述应用程序发布图片

3.  它工作得很好，但是它将图片发布到与 facebook 应用程序同名的相册中，相册名称称为“Jobs Factory Egypt”java 应用程序，该应用程序将图片发布到我的 Facebook 粉丝页面，不幸的是它发布了图片。

代码是：

```
FacebookClient facebookClient = new DefaultFacebookClient(accessToken);

FacebookType publishPhotoResponse = facebookClient.publish(pageName + "/photos", FacebookType.class,
                BinaryAttachment.with(photoName, photoInputStream),
                Parameter.with("message", photoComment)); 
```

我希望将此代码发布到我的 facebook fane 页面墙上，而不是发布到特定专辑
，所以请您帮我解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T07:55:12.467

发布到`/pageid/photos`（或`/userid/photos`）的照片将显示在页面（用户）的墙上，但会被放入以应用程序命名的相册中。

如果您不希望这样，请先获取页面的“Wall Photos”相册的 ID（通过查看`/pageid/albums`），然后改为发布到该特定相册（`/albumid/photos`）。

# mustache - 是否可以在 Mustache / Hogan 中访问对象的多个级别？

> ID：12719051
> 
> 赞同：2
> 
> 时间：2012-10-04T01:06:49.087
> 
> 标签：mustache, hogan.js

我有一个大致如下所示的 json 对象：

```
data = \
{
   'id' : 10000 ,
   'title' : 'Sample Article',
   'authors' : [
       {
          'id' : 20000,
          'name' : 'John Doe'
       },
       {
          'id' : 20001,
          'name' : 'Jane Doe'
       }
   ]
} 
```

在循环 data.authors 时，我需要同时访问根 id ( `data.id`) 和本地 id ( `data.authors[author].id`)

Mustache 可以做到这一点吗？

我目前的解决方法是将 data.id 复制到 data.article_id 中，因为在规范和实践中似乎可以访问更高级别的变量。我找不到任何关于变量命名条件的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T06:07:25.467

如果您将文章作为命名空间对象传递，您可以：

```
data = {
  article: {
    id: 10000,
    title: 'Sample Article',
    authors: [
      { id: 20000, name: 'John Doe' },
      { id: 20001, name: 'Jane Doe' }
    ]
  }
} 
```

然后你可以做这样的事情：

```
{{# article.authors }}
  Article ID: {{ article.id }}
  Author ID:  {{ id }}
{{/ article.authors }} 
```

如果您想将“文章”保留为呈现上下文，请将整个模板包装在一个`{{# article }}`部分中，您将能够将作者称为`{{# authors }}`，同时仍然可以`{{ article.id }}`在需要时访问它。

# java - 在 Java 中调用 wait() 后线程会做什么？

> ID：12719054
> 
> 赞同：6
> 
> 时间：2012-10-04T01:07:37.467
> 
> 标签：java, multithreading, synchronization

在多线程程序中，我怀疑当一个线程 wait() 时，它不会占用太多 cpu 利用率，因此 cpu 可以交换以处理其他线程。

例如，100 个线程一起启动同一个任务，而 50 个线程实际执行该任务，而其他 50 个线程等待所有 50 个任务完成。后一种情况比前一种情况花费的时间要少得多。

任何人都可以建议一些关于这个的阅读吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T01:47:28.583

wait 方法有两个目的：

1.  它将告诉当前正在执行的线程进入睡眠状态（不使用任何 CPU）。
2.  它将释放锁，以便其他线程可以唤醒并获取锁。

每当一个方法在同步块中做某事时，块中的任何东西都必须等待被锁定的对象被释放。

```
synchronized (lockObject) {
    // someone called notify() after taking the lock on
    // lockObject or entered wait() so now it's my turn

    while ( whatineedisnotready) {
        wait(); // release the lock so others can enter their check
        // now, if there are others waiting to run, they 
        // will have a chance at doing so.
    }
} 
```

必读：

[java同步的](http://docs.oracle.com/javase/tutorial/essential/concurrency/syncmeth.html)

# delphi - 锁定/编辑 FastReport 生成的 Word/RTF 文档

> ID：12719056
> 
> 赞同：0
> 
> 时间：2012-10-04T01:07:55.897
> 
> 标签：delphi, fastreport

我正在生成表格供用户填写。我正在使用 FastReport 生成 RTF 文件。

有没有办法将 RTF 文件中的用户更改限制在特定区域？我可以在 Word 中做到这一点，但如果它可以在 fastReport 中完成，因为它会更好地生成文件。

## 更新：

我想知道它是否可以在生成 RTF 文件时使用 fastreport 自动完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T14:28:44.040

据我所知，你不能。由于 RTF 文件基本上只保存富文本格式。我的建议是对 RTF 数据进行进一步处理并将其转换为 Word 格式（或 PDF 格式）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T07:36:02.060

当您使用普通编辑器时，没有正常的方法来限制用户修改 RTF（其中包含特殊字符的文本文件）。

您必须编写自己的 RTF 编辑器并指定可以编辑或不可以编辑的区域。

顺便说一句，这个问题与Delphi和FastReport无关......尝试为这个问题找到一个更好的地方。

# android - 如何使用居中的垂直分界线布局两个等宽元素？

> ID：12719057
> 
> 赞同：0
> 
> 时间：2012-10-04T01:07:57.020
> 
> 标签：android, android-layout, layout

我想布置两个相同大小的视图，如下所示，水平排列，但中间有一条分界线。我怎样才能做到这一点？

![在此处输入图像描述](../Images/e154e6d13318076f7ae23cc4add7c20a.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T01:13:07.287

```
<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:weightSum="2"
    android:orientation="horizontal" xmlns:android="http://schemas.android.com/apk/res/android">
    <TextView
        android:layout_width="0dp"
        android:layout_weight="1"
        android:layout_height="fill_parent"
        android:text="A"
        />
    <View
        android:layout_width="1dp"
        android:layout_height="fill_parent"
        android:background="@android:color/black"
        />
    <TextView
        android:layout_width="0dp"
        android:layout_weight="1"
        android:layout_height="fill_parent"
        android:text="B"
        />
</LinearLayout> 
```

# javascript - 我的tictactoe板有没有比check4winner()更好的功能

> ID：12719059
> 
> 赞同：1
> 
> 时间：2012-10-04T01:08:05.343
> 
> 标签：javascript

```
function check4Winner(){    
    winningCombinations = [[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];     
    for(var a = 0; a < winningCombinations.length; a++){
        if(squares[winningCombinations[a][0]]==currentPlayer&&
           squares[winningCombinations[a][1]]==currentPlayer&&
           squares[winningCombinations[a][2]]==currentPlayer){
             winner=true;
             alert(currentPlayer+ " WON!");              
        }           
    }//forloop  
}//end check4Winner(). 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T01:16:11.573

我也会`return`跳出循环来防止重复的获胜者对话框：

```
function check4Winner(){    
    var winningCombinations = [[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];

    for (var a = 0; a < winningCombinations.length; a++) {
        if (squares[winningCombinations[a][0]]==currentPlayer &&
            squares[winningCombinations[a][1]]==currentPlayer &&
            squares[winningCombinations[a][2]]==currentPlayer) {
             alert(currentPlayer+ " WON!");

             return true;           
        }           
    }

    return false;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T03:14:08.460

考虑将 8 种可能的获胜组合表示为二进制数（或转换为十进制，但二进制很明显），其中 1 表示选定的正方形：

```
var winners = {'111000000':'', '000111000':'', '000000111':'', // hz
               '100100100':'', '010010010':'', '001001001':'', // vt
               '100010001':'', '001010100':''};                // diag 
```

然后在 3 圈后检查用户的选择是否使用以下方法转换为适当的二进制数`in`：

```
if (currentScore in winners) { 
  // ta da!
} 
```

## 编辑

哦，转弯后保持分数：

```
// Start with no score
var score = '000000000';

// Update score where num is selected square (0 to 8 inclusive)
score = score.substring(0, num) + '1' + score.substring(++num); 
```

您可以使用正则表达式来减少代码：

```
var winners  = /111000000|000111000|000000111|100100100|010010010|001001001|100010001|001010100/;
if (winners.test(score)) // ta da!

var winners = /^(448|56|7|292|146|73|273|84)$/; // using decimal numbers
if (winners.test(parseInt(score, 2))) // ta da! 
```

有多少种方法可以给猫剥皮？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T01:11:14.823

我能想到的唯一能做的就是收集有关获胜组合出现频率的统计数据。

然后，您可以根据该频率对您检查的组合进行排序，将出现频率更高的获胜组合放在列表的开头。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T01:15:12.790

您可以尝试在 Google 上搜索其他代码，例如

*   [http://www.javascriptkit.com/script/script2/tactoe.shtml](http://www.javascriptkit.com/script/script2/tactoe.shtml)
*   [http://www.dreamincode.net/forums/topic/247361-simple-tic-tac-toe-using-html5-css3-and-javascript/](http://www.dreamincode.net/forums/topic/247361-simple-tic-tac-toe-using-html5-css3-and-javascript/)
*   [http://lppjunior.com/projects/jogo-da-velha/](http://lppjunior.com/projects/jogo-da-velha/)

并在这里测试哪个更快：http: [//jsperf.com/](http://jsperf.com/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-26T08:05:41.173

我可以想到另一种方法来检查是否有赢家。这里是：

```
 var x, y, win;
            //RUN THRU ARRAYS ALL WIN POSS == A WIN
            for (x = 0; x < winningCombinations .length; x++) //if all three are equal to current string (either x or o)
            {
                for(y = 0;y < winningCombinations [x].length;y++)
                {
                    if(document.getElementById(win_Array[x][y]).innerText == check) {
                        counter++;
                    }
                    if(counter == 3)
                    {
                    alert(Check + 'Won!')
                    } 
                }
                counter = 0; //resets count before checking next possible wins
            } 
```

让我解释一下这里发生了什么。第一个 for 循环从索引 0 开始。第二个 for 循环遍历第一个索引的所有 3 个索引。举例说明：它遍历每一个获胜组合并检查它是否等于 X 或 O。我的变量`check`由最后轮到谁来定义。因此，如果轮到 X，则检查 = 'X'; 每当 if 语句在框中找到 X 或 O 时，或者在您的情况下，获胜组合为真，它就会向计数器添加 +1。当计数器达到 3 时，这意味着它发现有 3 个 X 或 O，并且行彼此相等。counter = 0 部分在上部 for 循环的 x 值更改之前重置计数器。这可以防止程序在任何地方找到 3 个 X 或 O 并说您赢了。至于提醒谁赢了，这完全取决于您的变量以及您如何跟踪转弯。我建议同时传递一个计数器变量和一个检查变量。计数器变量将计算进行了多少次移动，如果它是 = 到 9，并且没有任何胜利，那么这是一场猫的游戏。像我说的检查变量应该取决于轮到谁了。我希望我解释得很好……

# c++ - 如何使用 Poco C++ 库从数据库中读取“日期”

> ID：12719062
> 
> 赞同：4
> 
> 时间：2012-10-04T01:08:27.347
> 
> 标签：c++, database, date, timestamp, poco-libraries

我是 POCO 库的新手。我需要从 SQL Server 读取 DateTime 字段（使用 ODBC Native Client 连接）。我在阅读字符串或数字时没有问题，但是 Dates 或 Timestamps 给我带来了困难……我不确定是否应该使用 Poco::Timestamp 来完成此操作。显然不是。

```
#include <vector>
#include <iostream>

#define POCO_STATIC

#include <Poco/DateTime.h>
#include <Poco/DateTimeFormat.h>
#include <Poco/DateTimeFormatter.h>
#include <Poco/SharedPtr.h>
#include <Poco/Tuple.h>
#include <Poco/Data/SessionFactory.h>
#include <Poco/Data/Session.h>
#include <Poco/Data/ODBC/Connector.h>

using namespace Poco::Data;

int main() {
    typedef Poco::Tuple<std::string, Poco::Timestamp> Event;
    typedef std::vector<Event> Events;

    Poco::Data::ODBC::Connector::registerConnector();
    Session session("ODBC", "DSN=TestSNAC");

    Events events;

    Statement select(session);
    select << "select Name, StartDate from Events order by Name", into(events), now;

    for (Events::const_iterator it = events.begin(); it != events.end(); it++) {
        std::string date(Poco::DateTimeFormatter::format(it->get<1>(), "%b %e, %Y"));

        std::cout << " Name: " << it->get<0>() 
                  << " Start: " << date << std::endl;
    }

    return 0;
} 
```

在第 27 行编译期间出现以下错误（即以 'select << "select Name... 开头的错误）：

```
error C2664: 'bool Poco::Data::AbstractExtractor::extract(size_t,Poco::Int8 &)' : cannot convert parameter 2 from 'Poco::Timestamp' to 'Poco::Int8 &' 
```

太感谢了...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T15:41:38.350

好的，目前我似乎无法从数据库中读取日期或时间。我在 Poco 论坛上发现了这条评论：

> 对日期、时间和日期时间的支持在 SVN 主干中，将在 1.5 中引入。发布。

包含此链接以获取最新版本的 Extractor 类：[http ://poco.svn.sourceforge.net/viewvc/poco/poco/trunk/Data/ODBC/src/Extractor.cpp?revision=1904&view=markup](http://poco.svn.sourceforge.net/viewvc/poco/poco/trunk/Data/ODBC/src/Extractor.cpp?revision=1904&view=markup)

在这个类中，我可以看到对两个新类 Poco::Data:Date 和 Poco::Data::Time 的引用。

您可以在此处阅读原始帖子：http: //pocoproject.org/forum/viewtopic.php?f=12&t=5492&p=9272&hilit= [data+datetime#p9272](http://pocoproject.org/forum/viewtopic.php?f=12&t=5492&p=9272&hilit=data+datetime#p9272)

我将获得最新版本并尝试。

谢谢

# java - 优先队列去除复杂性时间

> ID：12719066
> 
> 赞同：44
> 
> 时间：2012-10-04T01:08:49.833
> 
> 标签：java, complexity-theory, time-complexity, priority-queue

`remove()`Java 中 Priority Queue 类上的函数的复杂性（大哦）是多少？我在任何地方都找不到任何文档，我认为它是 O(n)，考虑到您必须在删除它之前找到该元素，然后重新调整树。但我看到其他人不同意并认为这是 O(logn)。有任何想法吗？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2016-08-23T04:54:24.907

混乱实际上是由您的“删除”功能引起的。在java中，有两个remove函数。

1.  remove() -> 这是删除头/根，需要 O(logN) 时间。

2.  remove(Object o) -> 这是删除任意对象。找到这个对象需要 O(N) 时间，删除它需要 O(logN) 时间。

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2014-02-28T05:29:42.933

remove 的复杂度是 O(N)，因为 contains 的复杂度是 O(N)（在 java 的优先级队列类中）

**在您自己的**优先级队列实现中，可以将其设为 O(logN) 的一种方法是维护一个辅助数据结构，如 HashMap，它维护从优先级队列中的值到其在队列中的位置的映射。因此，在任何给定时间 - 您都会知道任何值的索引位置。

请注意，此修改不会影响任何现有操作的运行时间 - 您只需要在 heapify 操作期间更新映射。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-09-22T12:03:55.657

根据 Oracle 文档：“实现说明：此实现为入队和出队方法（offer、poll、**remove()和 add）提供****O(log(n))**时间；remove(Object) 和 contains(Object) 的线性时间) 方法；以及检索方法（peek、元素和大小）的恒定时间。”

 **[在此处链接到 Oracle 文档](http://docs.oracle.com/javase/7/docs/api/java/util/PriorityQueue.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-08-08T18:33:38.167

请检查： [http ://docs.oracle.com/javase/7/docs/api/java/util/PriorityQueue.html](http://docs.oracle.com/javase/7/docs/api/java/util/PriorityQueue.html)

“此实现为入队和出队方法（offer、poll、remove() 和 add）提供 O(log(n)) 时间；为 remove(Object) 和 contains(Object) 方法提供线性时间”

因此对于 poll() 和 remove()，那个 log(N) 但是对于 remove(object)，那个 log(N)**

# google-app-engine - NDB 缓存临时/辅助属性。我可以关掉它吗？

> ID：12719067
> 
> 赞同：0
> 
> 时间：2012-10-04T01:08:50.473
> 
> 标签：google-app-engine, app-engine-ndb

使用 NDB 时，看起来临时变量也会被缓存。

```
class MyModel(ndb.Model)

    def __init__(self, *args, **kwds):
        self._temporary = []
        ndb.Model.__init__(self, *args, **kwds) 
```

有没有办法不在缓存中存储临时/辅助变量？

编辑：

这是一个证明我的问题的简单测试用例：

```
#Python imports
import unittest

# GAE imports
from google.appengine.ext import testbed
from google.appengine.datastore import datastore_stub_util
from google.appengine.ext import ndb

class TestModel(ndb.Model):

    username = ndb.StringProperty()

    def __init__(self, *args, **kwds):
        self._temp = []
        ndb.Model.__init__(self, *args, **kwds)

class TestModels(unittest.TestCase):

    def setUp(self):
        self.testbed = testbed.Testbed()
        self.testbed.activate()

        self.testbed.init_taskqueue_stub()
        self.testbed.init_urlfetch_stub()
        self.testbed.init_mail_stub()
        self.testbed.init_images_stub()
        self.testbed.init_blobstore_stub()

        self.policy = datastore_stub_util.PseudoRandomHRConsistencyPolicy(probability=1)
        self.testbed.init_datastore_v3_stub(consistency_policy=self.policy)

        self.testbed.init_memcache_stub()
        self.testbed.setup_env(app_id='ndb-test')

    def tearDown(self):
        self.testbed.deactivate()

    def test1(self):

        test_model = TestModel()
        test_model.username = 'Tom'
        test_model._temp = 'Temporary'
        test_model.put()

        test = TestModel.query().fetch(10)

        self.assertEqual(1, len(test))

        test = test[0]

        self.assertEqual('Tom', test.username)
        self.assertEqual([], test._temp) 
```

测试**self.assertEqual([], test._temp)**的最后一行失败，即使我希望它通过。

有没有办法不存储临时/辅助模型属性，或者每次从缓存中加载模型时都有一种更简单的方法来重置它们？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T09:50:23.760

NDB 有几个缓存——实例内存和内存缓存。在实例内存中，实际实体本身被缓存，因此同一请求中的多个 get 调用将返回同一实体对象。

只要您使用启用了缓存的 NDB，这就是您必须处理的事情 - 例如，首先不要在实体上存储“临时”数据。

# jquery - 如何从用户脚本中使用 Google Search API 和 gSearch jQuery 插件？

> ID：12719072
> 
> 赞同：0
> 
> 时间：2012-10-04T01:09:08.610
> 
> 标签：jquery, google-chrome, google-api, userscripts, google-search-api

我正在尝试编写一个用户脚本（用于 Chrome），但我一直在碰壁。我的第一个目标是让[Scott Reed 的 gSearch jQuery 插件](http://gsearch.scottreeddesign.com/documentation.html)通过脚本在任何页面上工作。

这是我从推送片段和示例中获得的脚本，我在这里和那里一起找到：

我遇到的错误是“ `Uncaught TypeError: Cannot read property 'WebSearch' of undefined`”。

```
// ==UserScript==
// @name           Example
// @version        1.2
// @namespace      
// @description    
// @include *
// ==/UserScript==

function addScripts(callback) {
  var script = document.createElement("script");
  script.setAttribute("src", "http://google.com/jsapi");
  script.addEventListener('load', function() {
    var script = document.createElement("script");
    script.textContent = "(" + callback.toString() + ")();";
    document.body.appendChild(script);
  }, false);
  document.body.appendChild(script);

  var script = document.createElement("script");
  script.setAttribute("src", "http://gsearch.scottreeddesign.com/js/jquery.gSearch-1.0-min.js");
  script.addEventListener('load', function() {
    var script = document.createElement("script");
    script.textContent = "(" + callback.toString() + ")();";
    document.body.appendChild(script);
  }, false);
  document.body.appendChild(script);
}

function LoadGoogle()
    {
        if(typeof google != 'undefined' && google && google.load)
        {
            google.load("search", "1");
        }
        else
        {
            // Retry later...
            setTimeout(LoadGoogle, 30);
        }
    }

LoadGoogle();

function main() {

    $("#div").css("border", ".5em solid black");

    $('head').append('<link rel="stylesheet" href="http://gsearch.scottreeddesign.com/css/gSearch.css" type="text/css" />');

    $('body').append('<div id="search-results"></div>');

$('#div').click(
    function() {

        $("#search-results").gSearch({search_text : 'example search'});

    });
}

// load scripts and execute the main function
addScripts(main); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T11:10:43.253

问题中该代码的几个问题：

1.  它正在发射主炮`callback`两次。
2.  它不是加载 jQuery，而是使用 JQ 函数。
3.  使用回调将动作链接到库加载的时间，请参见下面的代码。
4.  不要[“克隆和修改”](http://c2.com/cgi/wiki?DontRepeatYourself) `addScripts`。保持这些功能“原子”。
5.  它不使用 Google API 密钥——这是（或至少是）搜索 API 所必需的。
6.  Google loader 和 jQuery 在用户脚本环境中不会“玩得很好”。因此我们使用`addJS_Node`加载 jQuery 而不是 Google 加载器。
7.  一般避免`@include *`（也`@match`用于 Chrome 用户脚本）。仅针对您希望脚本在其上运行的站点。
8.  它使用带有 id 的节点`div`，但代码没有创建这样的节点（也不太可能存在于大多数网页上）。

以下代码可用作 Chrome 用户脚本、Firefox Greasemonkey 脚本以及其他浏览器。`addJS_Node`注意时间问题和在 Chrome 中注入代码所需的不同回调和 的广泛使用：

```
// ==UserScript==
// @name    _Google Search API and plugin demo
// @match   http://stackoverflow.com/questions/*
// ==/UserScript==

function GM_main () {
    console.log ("Firing GM_main().");

    $("body").prepend ('<button id="gmSrchBtn">Run Google Search</button>')
    $('head').append (
        '<link rel="stylesheet" href="http://gsearch.scottreeddesign.com/css/gSearch.css" type="text/css" />'
    );
    $('body').prepend ('<div id="search-results"></div>');
    $('#gmSrchBtn').click ( function () {
        $("#search-results").gSearch ( {
            search_text: 'example search'
        } );
    } );
}

/*--- Load:
        1) Required/handy callbacks.
        2) Google base API
        3) Google search API
        4) jQuery
        5) The scottreeddesign jQuery plugin
*/

function GM_targetScopeFunctions () {
    window.gSearchApiIsLoaded   = false;

    window.gAPI_LoadedCB        = function () {
        console.log ("Google base API loaded.");
        google.load ("search", "1", {callback: gSearchAPI_LoadedCB} );
    }

    window.gSearchAPI_LoadedCB  = function () {
        console.log ("Google search API loaded.");
        window.gSearchApiIsLoaded   = true;
    }
}

addJS_Node (null, null, GM_targetScopeFunctions);
/*--- IMPORTANT!
    You will most likely need to get and use an API key for any but demo searching.
addJS_Node (null, "http://google.com/jsapi?callback=gAPI_LoadedCB&key=YOUR_API_KEY");
*/
addJS_Node (null, "http://google.com/jsapi?callback=gAPI_LoadedCB");
addJS_Node (
    null,
    "http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js",
    null,
    loadG_SrchPlugin
);
addJS_Node (GM_main);   //-- Loads main but does not run yet.

function loadG_SrchPlugin () {
    console.log ("jQuery loaded.");
    addJS_Node (
        null,
        "http://gsearch.scottreeddesign.com/js/jquery.gSearch-1.0-min.js",
        null,
        function () { addJS_Node (null, null, fireMainAfterSearchApiLoaded); }
    );

    function fireMainAfterSearchApiLoaded () {
        var srchLoadedIntrvl    = setInterval (checkForSrchAPI, 444);

        function checkForSrchAPI () {
            console.log ("In checkForSrchAPI().");
            if (gSearchApiIsLoaded) {
                clearInterval (srchLoadedIntrvl);
                GM_main ();
            }
        }
    }
}

function addJS_Node (text, s_URL, funcToRun, runOnLoad) {
    var D                                   = document;
    var scriptNode                          = D.createElement ('script');
    if (runOnLoad) {
        scriptNode.addEventListener ("load", runOnLoad, false);
    }
    scriptNode.type                         = "text/javascript";
    if (text)       scriptNode.textContent  = text;
    if (s_URL)      scriptNode.src          = s_URL;
    if (funcToRun)  scriptNode.textContent  = '(' + funcToRun.toString() + ')()';

    var targ = D.getElementsByTagName ('head')[0] || D.body || D.documentElement;
    targ.appendChild (scriptNode);
} 
```

# wolfram-mathematica - FillingStyle 配色方案mathematica ListPlot

> ID：12719073
> 
> 赞同：2
> 
> 时间：2012-10-04T01:09:15.547
> 
> 标签：wolfram-mathematica

我正在尝试创建特定元素的 x 射线能量的交互式图。

为此，我创建了一堆 x,y 点（代表每个元素的 x 射线能量和任意 y 值）。然后我使用 ListPlot 和 Filling ->Axis 来创建可见线。除了“填充”使用默认的米色配色方案来标记每个元素之外，一切都很好。这很难阅读/比较。当我尝试使用“FillingStyle -> blah”来更改配色方案、厚度、不透明度等时，所有元素的绘图都会崩溃或默认为黑色。

例如，唯一可行的选项是将所有填充更改为“蓝色”（并不能真正帮助我比较和对比元素）。我也尝试过修改 PlotStyle 但它似乎对填充没有影响（并不惊讶 - 但它会很好）。

```
 Manipulate[
 Grid[{
   {(*grid group 1*)
    Show[
     {
      ListPlot[
       {mNe ne, mNa na, mMg mg, mAm am},
       Filling -> Axis, FillingStyle -> Blue, PlotMarkers -> {""}, 
       AspectRatio -> .25, ImageSize -> 500, AxesLabel -> {"eV", ""}, 
       PlotRange -> {{0, 20000}, {0, 1}}
       ]
      }
     ], "Full View"}}
  ],
 {{mNe, 1, "Ne"}, {0, 1}, Checkbox},
 {{mNa, 0, "Na"}, {0, 1}, Checkbox},
 {{mMg, 0, "Mg"}, {0, 1}, Checkbox},
 {{mAm, 1, "Am"}, {0, 1}, Checkbox}] 
```

显然这段代码不会编译，因为我没有为你提供原始数据。我是这个论坛的新手，所以我还不能发布屏幕截图。对不起。

所以最终目标是让每个元素都以独特的（高对比度颜色）显示。我不想为每个元素指定颜色（要绘制 93！）。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T12:05:02.783

您需要在`Filling`选项中为每个数据集指定填充，如下所示：

```
{one, two, three} = 
  Table[{RandomReal[30, 30], RandomReal[1, 30]}\[Transpose], {3}];

ListPlot[{one, two, three}, PlotStyle -> None, AspectRatio -> .25,
  Filling -> {1 -> {Axis, Red}, 2 -> {Axis, Darker@Green}, 3 -> {Axis, Blue}}
] 
```

![数学图形](../Images/8644dbde0377f3331b9b829ad1ec3c51.png)

[来自文档`Filling`](http://reference.wolfram.com/mathematica/ref/Filling.html)中的更多信息：

![数学图形](../Images/b983a93d10beed36f7b87d0aa9a862c9.png)

# node.js - Coffeescript 快递模板

> ID：12719077
> 
> 赞同：0
> 
> 时间：2012-10-04T01:10:13.990
> 
> 标签：node.js, coffeescript, express

我想为我的咖啡脚本快递应用程序使用以下模板

[https://github.com/twilson63/express-coffee](https://github.com/twilson63/express-coffee)

但是我不熟悉 express 并且 app/ 目录有一个 index.js 文件似乎运行服务器。将操作/控制器/路由添加到此模板的正确代码结构是什么

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T01:38:56.667

我认为你应该检查一下[骨架](https://github.com/EtienneLem/skeleton)。它是一个为您生成 CoffeeScript 应用程序模板并使用 MVC 的包。然而，我确实发现 express-coffee 有一个相当不错的 cakefile（尽管它似乎对我的喜好过于依赖全局包）。我结合了两者的想法并写了[frappe](https://github.com/dweldon/frappe)。这是一个与骨架输出非常相似的模板，只是根据我的个人喜好进行了一些调整。无论如何，看看那些 - 希望你会找到你正在寻找的东西。

# jquery - JQuery keyup 可防止 Chrome 中的文本选择。怎么解决？

> ID：12719079
> 
> 赞同：4
> 
> 时间：2012-10-04T01:10:31.433
> 
> 标签：jquery, google-chrome, onkeyup

我有一个将文本转换为大写的函数`keyup`。代码看起来像这样（我想我也在 SO 上找到它）：

```
$(selector).bind('keyup', function (e) {
  if (e.which >= 97 && e.which <= 122) {
    var newKey = e.which - 32;
    e.keyCode = newKey;
    e.charCode = newKey;
  }
  $(this).val((object.val()).toUpperCase());
}); 
```

**问题**

在 Chrome 中，当我键入一些文本然后尝试使用`shift`+选择它`home`时，光标会回到最后一个字符，而不是选择任何内容。

我还在 Firefox 和 IE 中进行了测试，它工作正常。

请帮我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T13:25:13.933

一种可能的解决方案不是在每个 keyup 上都更改值，而是在值实际更改时更改：

```
$('#input').bind('keyup', function(e) {

    if (e.which >= 97 && e.which <= 122) {
        var newKey = e.which - 32;
        e.keyCode = newKey;
        e.charCode = newKey;
    }

    var oldVal = $(this).val();
    var newVal = oldVal.toUpperCase();

    if(oldVal != newVal)
    {
        $(this).val(newVal);
    }

});​ 
```

在[JSFIDDLE](http://jsfiddle.net/Nh7EL/)中查看。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T13:27:26.470

这里有一个只使用 css 的不错的解决方案：

[http://jsfiddle.net/46jrg/](http://jsfiddle.net/46jrg/)

只需申请

```
text-transform: uppercase 
```

到文本输入区域，然后您不必担心那些复杂的 javascript 内容。更少的代码意味着更少的错误！:)

编辑：当您选择并复制文本时，它仍将大写，但如果您将其提交到服务器，则必须在发送之前将其大写或在到达那里时将其大写。不过，这通常没什么大不了的。大多数常见的服务器端语言都可以在单个方法调用中完成。

Java有`String::toUpperCase`

PHP有这个`strtoupper`功能

Python有`String::upper`

红宝石有`String::upcase`

Perl有这个`uc`功能

Javascript有`String::toUpperCase`

C#.NET / VB.NET 有`String::ToUpper`

# java - 如何在不移动中心的情况下放大 JPanel：数学还是 Swing？

> ID：12719085
> 
> 赞同：5
> 
> 时间：2012-10-04T01:11:31.113
> 
> 标签：java, swing, scroll, zooming, viewport

我正在尝试使用 Swing 制作可缩放的地图。该地图是 JScrollPane 中的 JPanel。放大时，地图会改变大小，而paint() 会将元素绘制在不同的位置。这一切都很好。

但是，ScrollPane 在增加图像大小时并没有改变视口，因此放大总是将我正在查看的元素移出屏幕。我试图用 解决这个问题`scrollRectToVisible()`，但我无法为矩形获得正确的坐标，要么是因为我在做几何图形时失败，要么是因为我不太了解 Swing。

这是我所拥有的：

```
public class MapPanel extends JPanel {
    [...]

public void setZoom(double zoom) {
    // get the current viewport rectangle and its center in the scaled coordinate system
    JViewport vp = (JViewport) this.getParent();
    Rectangle rect = vp.getViewRect(); 
    Point middle = getMiddle(rect); 
    Dimension dim = rect.getSize();

    // zoom in
    scaler.setZoom(zoom);
    setPreferredSize(scaler.transform(dim));    
    this.revalidate();  

// calculate the full size of the scaled coordinate system  
    Dimension fullDim = scaler.transform(dim); 
    // calculate the non-scaled center of the viewport
    Point nMiddle = new Point((int) ((double) (middle.x)/fullDim.width*dim.width),(int) ((double) (middle.y)/fullDim.height*dim.height));

    // this should do the trick, but is always a bit off towards the origin
    scrollRectToVisible(getRectangleAroundPoint(nMiddle)); 

    // the below alternative always zooms in perfectly to the center of the map 
    // scrollRectToVisible(getRectangleAroundPoint(new Point(400,300)));
}

private Rectangle getRectangleAroundPoint(Point p){
    Point newP = scaler.transform(p);
    Dimension d = railMap.getDimension();
    Point corner = new Point(newP.x-d.width/2,newP.y-d.height/2);
    return new Rectangle(corner,d);
}

private Point getMiddle(Rectangle r){
    return new Point(r.x+r.width/2,r.y+r.height/2);
}
} 
```

这是 Scaler 类（我认为它没有什么令人惊讶的）：

```
public class Scaler {
    private double zoom = 1;

public void setZoom(double zoom) {
    this.zoom = zoom;
}

public Point transform(Point2D p){
    return new Point((int) (p.getX()*zoom), (int) (p.getY()*zoom));
}

public Dimension transform(Dimension d){
    return new Dimension((int) (d.width*zoom), (int) (d.height*zoom));
}

} 
```

谁能告诉我哪里出了问题？在我看来，我对地图的当前中心进行了有效计算，并且使用固定的缩放点它确实可以工作......

**编辑：**所以这里的难点是根据旧的视口矩形创建新的视口矩形。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T02:05:24.050

我刚刚做了这个非常快速的示例，它基本上试图将滚动窗格中心保持在所提供图像的中间

```
public class TestZooming {

    public static void main(String[] args) {
        new TestZooming();
    }

    public TestZooming() {

        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {

                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException classNotFoundException) {
                } catch (InstantiationException instantiationException) {
                } catch (IllegalAccessException illegalAccessException) {
                } catch (UnsupportedLookAndFeelException unsupportedLookAndFeelException) {
                }

                JFrame frame = new JFrame();
                frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setSize(400, 400);
                frame.setLocationRelativeTo(null);
                frame.setLayout(new BorderLayout());
                final ZoomPane pane = new ZoomPane();
                frame.add(new JScrollPane(pane));
                frame.setVisible(true);

                SwingUtilities.invokeLater(new Runnable() {

                    @Override
                    public void run() {
                        pane.centerInViewport();
                    }

                });

            }
        });

    }

    protected class ZoomPane extends JPanel {

        private Image background;
        private Image scaled;
        private float zoom = 1f;

        private Dimension scaledSize;
        private JViewport con;

        public ZoomPane() {

            try {
                background = ImageIO.read(new File("..."));
                scaled = background;
                scaledSize = new Dimension(background.getWidth(this), background.getHeight(this));
            } catch (IOException ex) {
                ex.printStackTrace();
            }

            InputMap im = getInputMap(WHEN_IN_FOCUSED_WINDOW);
            ActionMap am = getActionMap();

            im.put(KeyStroke.getKeyStroke(KeyEvent.VK_PLUS, 0), "plus");
            im.put(KeyStroke.getKeyStroke(KeyEvent.VK_EQUALS, InputEvent.SHIFT_DOWN_MASK), "plus");
            im.put(KeyStroke.getKeyStroke(KeyEvent.VK_MINUS, 0), "minus");

            am.put("plus", new AbstractAction() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    setZoom(getZoom() + 0.1f);
                }
            });
            am.put("minus", new AbstractAction() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    setZoom(getZoom() - 0.1f);
                }
            });

            setFocusable(true);
            requestFocusInWindow();

        }

        @Override
        public void addNotify() {

            super.addNotify();

        }

        public float getZoom() {
            return zoom;
        }

        public void setZoom(float value) {
            if (zoom != value) {
                zoom = value;

                if (zoom < 0) {
                    zoom = 0f;
                }

                int width = (int) Math.floor(background.getWidth(this) * zoom);
                int height = (int) Math.floor(background.getHeight(this) * zoom);
                scaled = background.getScaledInstance(width, height, Image.SCALE_SMOOTH);
                scaledSize = new Dimension(width, height);

                if (getParent() instanceof JViewport) {

                    int centerX = width / 2;
                    int centerY = height / 2;

                    JViewport parent = (JViewport) getParent();
                    Rectangle viewRect = parent.getViewRect();
                    viewRect.x = centerX - (viewRect.width / 2);
                    viewRect.y = centerY - (viewRect.height / 2);
                    scrollRectToVisible(viewRect);
                }

                invalidate();
                repaint();

            }
        }

        @Override
        public Dimension getPreferredSize() {

            return scaledSize;

        }

        @Override
        protected void paintComponent(Graphics g) {

            super.paintComponent(g);

            if (scaled != null) {

                g.drawImage(scaled, 0, 0, this);

            }

        }

        protected void centerInViewport() {

            Container container = getParent();
            if (container instanceof JViewport) {

                JViewport port = (JViewport) container;
                Rectangle viewRect = port.getViewRect();

                int width = getWidth();
                int height = getHeight();

                viewRect.x = (width - viewRect.width) / 2;
                viewRect.y = (height - viewRect.height) / 2;

                scrollRectToVisible(viewRect);

            }

        }
    }
} 
```

至于为什么你的不起作用，我不能说，我不能运行这个例子，但也许这至少会给你一些想法......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T09:18:27.357

解决了。耶。仍然不确定它实际上哪里出错了，但是移动原始矩形（感谢@MadProgrammer）而不是创建一个新矩形并在缩放器中正确舍入可能已经解决了问题。

```
private Point getViewportCenter() {
    JViewport vp = (JViewport) this.getParent();
    Point p = vp.getViewPosition();
    return new Point(p.x+vp.getWidth()/2,p.y+vp.getHeight()/2);
}

private void setViewportCenter(Point p) {
    JViewport vp = (JViewport) this.getParent();
    Rectangle viewRect = vp.getViewRect();

    viewRect.x = p.x - viewRect.width / 2;
    viewRect.y = p.y - viewRect.height / 2;

    scrollRectToVisible(viewRect);
}

public void setZoom(double zoom) {
    // determine unscaled center and dimensions
    Point oCenter = scaler.inverseTransform(getViewportCenter());
    Dimension dim = railMap.getDimension();

    // zoom
    scaler.setZoom(zoom);

    // fix size and viewport
    setPreferredSize(scaler.transform(dim));
    setViewportCenter(scaler.transform(oCenter)); // should be a transformed point

    // finish
    invalidate();
    repaint();
} 
```

# javascript - 第二次点击时表格行更新。表单验证javascript

> ID：12719090
> 
> 赞同：1
> 
> 时间：2012-10-04T01:11:59.630
> 
> 标签：javascript, html, forms, validation

我正在尝试使用 javascript 验证表单。文本字段嵌入在表格行中。留下一个空白表格行来显示警告（如“不能为空白”）。当我在 onsubmit 上调用方法 validateForm() 时，警告出现在表格行中并消失。当我第二次按下按钮时，警告会停留在 html 页面上。我不知道发生了什么。

```
function validateForm() {
var warnmsg = checkNames();
document.getElementById("row1").innerHTML = warnmsg;
}
function checkNames() {
var fname = document.getElementById("fname");
if (fname.value.length==0)
    return "Cannot be left blank";
else
    return ""; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T01:17:20.087

用这个：

```
var warnmsg = checkNames; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T01:27:35.580

您必须返回 false 才能使页面不离开。

```
 function validateForm() 
            {
                var warnmsg = checkNames();
                document.getElementById("row1").innerHTML = warnmsg;
                return !warnmsg.length >0;//if there is a warning message, return false
            } 
```

然后以您的形式：

```
onsubmit="return validateForm()" 
```

这是我的测试页面

```
<html>
    <head>
        <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
        <script>
            function validateForm() 
            {
                var warnmsg = checkNames();
                document.getElementById("row1").innerHTML = warnmsg;
                return !warnmsg.length >0;
            }
            function checkNames() 
            {
                var fname = document.getElementById("fname");
                if (fname.value.length==0)
                    return "Cannot be left blank";
                else
                    return "";
            }
        </script>
    </head>

    <body>
        <form onsubmit="return validateForm()">
                    <p id="row1"></p>
            <input type="text" id="fname" />
            <input type="submit" />
        </form>
    </body>
</html> 
```

# machine-learning - 从 Andrew Moore 的教程中获取信息

> ID：12719091
> 
> 赞同：0
> 
> 时间：2012-10-04T01:12:10.217
> 
> 标签：machine-learning

我现在正在自学机器学习。

一个关于信息增益的简单问题。如何从图片的数据中计算信息增益？我不明白。

谁能解释如何从第一行获得 0.992385？

非常感谢！![在此处输入图像描述](../Images/a9ddc190b6e31955410a8d7027e01757.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T12:53:04.227

让 g(x) = -x * log(x) /log(2)

总人数48842人。

H（财富，关系）= g[52/48842] + g[111/48842] + g[309/48842] + g[1093/48842] + g[1238/48842] + g[1276/48842] + g [1454/48842] + g[4816/48842] + g[7470/48842] + g[8846/48842] + g[10870/48842] + g[11307/48842] = 2.7835

H（财富）= g（穷人/总）+ g（富人/总）= g[0.239282] + g[0.760718] = 0.793844

H（关系）= g（丈夫/总数）+ g（Not_in_familly/总数）+ ... = g[0.0308341] + g[0.0477253] + g[0.10493] + g[0.155215] + g[0.257627] + g[ 0.403669] = 2.15508

H（财富|关系）= H（财富，关系）-H（关系）= 2.7835 - 2.15508 = 0.628421

IG = H(财富) - H(财富|关系) = H(财富) + H(关系) - H(财富, 关系) = 0.165423

这是用 Mathematica 编写的源代码。如果您觉得需要查看其他语言的源代码，请使用您的首选语言在下面发表评论。如果我有时间，我会打字。- 干杯，汉斯

Mathematica 中的源代码

(* ================================================= === *)

```
m = {{10870, 8846}, {11307, 1276}, {1454, 52}, {7470, 111}, 
     {4816, 309}, {1238, 1093}};

iTot = Total[ Flatten[m]];

h[x_] := -x * Log[2, x];

fHAll = Sum[  h[ m[[i, j]]/ iTot ], {i, 6}, {j, 2}] // N;

fHWealth = h[ Total[ m[[All, 1]]]/iTot] + h[ Total[ m[[All, 2]]]/iTot] // N ;

fHRelation = Sum[
     h[ Total[ m[[i ]]]/iTot] , {i, Length[m]}] // N;

fWealthGivenRelation = fHAll - fHRelation;

Print[" H(relation, wealth) = ", fHAll];
Print[" H(relation) = ", fHRelation];
Print[" H(wealth) = ", fHWealth];
Print[" H(wealth | relation) = ", fWealthGivenRelation];
Print[" IG = MI = ", fHWealth - fWealthGivenRelation, " = ", 
  fHWealth + fHRelation - fHAll]; 
```

（* ===================输出====================*）

```
 H(relation, wealth) = 2.7835
 H(relation) = 2.15508
 H(wealth) = 0.793844
 H(wealth | relation) = 0.628421
 IG = MI = 0.165423 = 0.165423 
```

哎呀，我没有回答你的主要问题。这是答案。

H(财富|关系=丈夫) = g(10870/(10870 + 8846)) + g(8846/(10870 + 8846)) = 0.992385

# c# - 如何使用 Windows 7 连接到 C# 中的 websocket？

> ID：12719093
> 
> 赞同：6
> 
> 时间：2012-10-04T01:12:11.013
> 
> 标签：c#, visual-studio-2010, windows-7, websocket

我刚开始查看用 C# 连接到 websocket 的示例，并意识到它们都使用 .NET 4.5。我在 Windows 7 中使用 Visual Studio 2010 - 是否有可用的示例或库？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-03-29T20:07:24.010

我最终使用了[websocket-sharp](https://github.com/sta/websocket-sharp) - 非常易于构建和使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T03:17:00.907

*   您可以使用[SuperWebSocket](http://superwebsocket.codeplex.com/)作为 websocket 服务器和 [Websocket4net](http://websocket4net.codeplex.com/)作为 websocket 客户端。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-28T19:17:22.573

您不能在 IIS 7.5 上托管 Web 套接字，但您可以使用[Fleck托管您自己的 Web 服务器](https://github.com/statianzo/Fleck)

您可以从 github 下载它或在 nuget 中输入 fleck。

创建您的网络服务器套接字

```
// Create Websocket server
websocketServer = new Fleck.WebSocketServer("ws://localhost:82");
websocketServer.Start(socket =>
{
    socket.OnOpen = () => Console.WriteLine("Open!");
    socket.OnClose = () => Console.WriteLine("Close!");
    socket.OnMessage = message => socket.Send(message);
}); 
```

# vba - 是否可以循环遍历 VBA 中的 html 元素（getelementbyID）

> ID：12719095
> 
> 赞同：0
> 
> 时间：2012-10-04T01:12:34.520
> 
> 标签：vba, vbscript

我有以下 HTML 代码：

```
<td width="10%" height="20" align="center" class="data" id="requirement0" bgColor="#eeeecc">
Text - DOCIMG

.getelementbyid("Requirement0).innertext 
```

html页面显示40个需求，所以每个的ID命名为requirement0、requirement1、requirement2等，直到requirement39。我需要检查其中是否出现某些文本。我如何循环它，以便每次向 getelementbyid 标签添加一个，检查参数的内部文本，让我们说 DOCIMG 像上面一样？这甚至可能吗？

我试着做：

```
For i = 0 to 39
  xxx = .getelementbyid("Requirement" & i).innertext
Next i 
```

但它没有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T13:16:05.143

跟进我的问题，对于有类似问题的任何人，我正在从网页/数据库组合加载，并且有必要在文档完成事件后等待一段时间才能访问由数据库填充的字段，这就是为什么错误不断发生。

# php - 将会话保存路径理解为没有价值和安全性

> ID：12719096
> 
> 赞同：10
> 
> 时间：2012-10-04T01:12:56.017
> 
> 标签：php, security, session, session-variables

我只使用会话来存储变量，并希望确保会话保存路径不会被任何用户篡改。于是我去查看我的phpinfo，发现会话保存路径设置为无值。这对于只使用会话作为变量的用户来说是否正常？如果会话保存路径设置为无值，我有什么需要担心的吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-04T01:18:37.550

该设置的默认值为[`session.save_path`](http://www.php.net/manual/en/session.configuration.php#ini.session.save-path)（`""`空字符串），默认为`/tmp`.

从“工作”的角度来看，无需担心它被设置为无值（因为这是默认值）；但是，从安全的角度来看，确实存在。

手册中的警告：

> 如果您将此设置保留为世界可读的目录，例如 /tmp（默认），服务器上的其他用户可能能够通过获取该目录中的文件列表来劫持会话。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-23T21:20:42.650

您可以通过以下代码创建/编辑 .htaccess 来设置 save_path：

```
php_value session.save_path /mnt/stor1-wc1-dfw1/123456/www.domain.com/web/sessions
php_value session.save_handler files 
```

有关更多详细信息，请访问此站点：[云站点上的 PHP 会话状态服务器以及如何修复不工作的 PHP 会话](https://support.rackspace.com/how-to/php-sessions-state-servers-on-cloud-sites-and-how-to-fix-non-working-php-sessions/)

# erlang - 调用函数时的Erlang“未绑定变量”

> ID：12719103
> 
> 赞同：3
> 
> 时间：2012-10-04T01:13:44.533
> 
> 标签：erlang

我试图将一个整数参数 N 传递给`cake`并返回一个大小为 N 的 2 平方的列表（例如）。例如面包店：蛋糕（3）=> [4,4,4]

这是我到目前为止所尝试的：

```
-module(bakery).
-export([cake/1]).

Foo = fun(X) -> X * X end.

cake(0) -> [];
cake(N) when N > 0 -> [ Foo(2) | cake(N-1) ]. 
```

然而，当我在 erl 中编译代码`c(bakery).`时，我得到以下错误跟踪：

```
bakery.erl:4:  syntax error before: Foo
bakery.erl:7:  variable 'Foo' is unbound
error 
```

我仍然习惯于匿名函数和一般的 erlang 来一个面向对象的世界。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-04T01:26:48.453

[如此处所述，](http://www.erlang.org/doc/reference_manual/modules.html)每个 Erlang 模块都应包含一系列属性和函数声明，每个都以句点 (.)

但是这一行：

```
Foo = fun(X) -> X * X end. 
```

... 两者都不是，应改为如下所示：

```
foo(X) -> X * X. 
```

`foo`这里是小写的，因为这一行是一个[函数声明](http://www.erlang.org/doc/reference_manual/functions.html)，其中函数名应该是一个[原子](http://www.erlang.org/doc/reference_manual/data_types.html#id67764)。

所以最终你的模块将如下所示：

```
-module(bakery).
-export([cake/1]).

foo(X) -> X * X.

cake(0) -> [];
cake(N) when N > 0 -> [ foo(2) | cake(N-1) ]. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T12:08:31.417

前面的解决方案是正确的，但您也可以使用此代码解决问题：

```
-module(bakery).
-export([cake/1]).

cake(0) -> [];
cake(N) when N > 0 ->
   Foo = fun(X) -> X * X end,
   [ Foo(2) | cake(N-1) ]. 
```

问候。

# node.js - node.js 中的同步行为

> ID：12719105
> 
> 赞同：0
> 
> 时间：2012-10-04T01:14:01.203
> 
> 标签：node.js, synchronous

所以......我知道这不是*正确*的方法......但是我有一个我自己进入的盒子，如果我能找到一种方法让“get”请求在节点中同步运行，它看起来最容易导航。 js

是的，我已经尝试过节点同步（看起来应该可以）

情景是这样的

*   从文件中读取参数化字符串（完成，工作正常）
*   递归地标记字符串，将其分块为键和值（完成，工作正常）
*   调用谷歌翻译来翻译每个值（休息！）
*   重新组装参数化字符串并将其写回输出文件（完成，工作正常）

我知道如何调用谷歌翻译（可以很容易地对整个字符串进行调用），但我不知道如何让异步回调的排序与必要的参数化字符串的递归保持一致我有的数据集。

如果我可以使对 Web 服务的调用表现得好像它是同步的，这将很简单。例如

```
read string (while not EOF)
    recurse (get the next token)
        translate the fragment (which is done with request.get()
        add translated fragment to the current string
    assemble translated string
    write to file 
```

节点同步示例有效，但我无法使用`request.get()`.

有什么建议么？

摘抄

```
// this function gets passed in a string and recursively pulls out and
// attempts to translate tokens.  It needs to do this as the data source
// contains "key" = "fragment" + $(paramter1) + fragment + $(parameter2) etc

function getTokenSegment(sourceString){

s = sourceString;  //lazy

// if the string contains a parameter 
if (s.indexOf(leadingDelimiter) != -1) {    

    // extract the tokens...omitted the error checking (which all works)
    translatedToken = syncTranslate(token);   // <--- THIS IS WHAT I WANT...
    parameter = s.substring(token.length+1, s.indexOf(trailingDelimiter)+1);
    remainder = s.substring(token.length + parameter.length+1, s.length);

    translatedString = translatedString + translatedToken + parameter 

        // recursive call to get the rest of the string
        + getTokenSegment(remainder);
}
else {  

    // the remainder of the string can be translated intact
    translatedToken = syncTranslate(s);
    translatedString = translatedString + translatedToken;
}
return (translatedString);
}

function syncTranslate(stringToTranslate) {
    var sync = require('sync');
sync(function(){
    var result = translate.sync(null, {key: key, q: stringToTranslate, target: language});
})
    return result;  
}

// translate module is from Mike Holly -- https://github.com/mikejholly/node-google-translate
// and worked perfectly when I used it on non-parameterized strings.  only edit is the NULL as the
// first parameter in the callback, copied from the node-sync simple example]

var request = require('request')
  , _ = require('underscore')
  , querystring = require('querystring')
  , util = require('util')

module.exports = function(opts, callback) {

// parse & default the arguments
opts = _.defaults(opts, {
    source: 'en',
    target: 'fr',
    key: 'secret', 
    sourceText: 'text'
});

var url = 'https://www.googleapis.com/language/translate/v2?' + querystring.stringify(opts);

request.get(url, function(err, response, body){

   if (err) throw err;

   // parse the returned JSON
       var json = JSON.parse(body);
       if (json.error) {
          throw json.error.message;
    }
    var strings = util.isArray(opts.sourceText) ? opts.sourceText : [opts.sourceText];

    var result = {};
var translatedString = '';
    strings.forEach(function(original, i){
      result[original] = json.data.translations[i].translatedText;
  translatedString = result[original];

   });

   callback(null, translatedString);

   });

}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T16:50:02.147

在 node.js 中编写同步代码的一个非常流行的模块是[async](https://github.com/caolan/async)。对于您的问题，我会尝试以下`waterfall`功能：

```
async.waterfall([
    // your first function
    function(callback){
        callback(null, 'one', 'two');
    },
    // your second function
    function(arg1, arg2, callback){
        callback(null, 'three');
    },
    // your third function
    function(arg1, callback){
        // arg1 now equals 'three'
        callback(null, 'done');
    }
], function (err, result) {
   // result now equals 'done'    
}); 
```

# java - 在 HttpURLConnection 连接上出现 HTTP 415 错误

> ID：12719106
> 
> 赞同：4
> 
> 时间：2012-10-04T01:14:11.793
> 
> 标签：java, httpurlconnection, http-status-code-415

我正在使用以下代码发送 GET 请求，然后接收响应：

```
try {
  URL url = new URL(strurl);
  HttpURLConnection con = (HttpURLConnection) url.openConnection();

  con.setRequestMethod("GET");
  con.setDoOutput(true);            

  con.connect();

  BufferedReader is = new BufferedReader(new InputStreamReader(con.getInputStream()));
  String line;
  String vAnswerStr="";
  String lineSeparator = System.getProperty("line.separator");

  while ((line = is.readLine()) != null) {
      vAnswerStr = vAnswerStr + line + lineSeparator;
  }
  is.close();
} catch (IOException ex) {
  ex.printStackTrace();
} 
```

`strurl`是这样的，虽然我不认为它的格式可能与问题有关：

> [https://somesite.ru/?arg1=val1&arg2=val2](https://somesite.ru/?arg1=val1&arg2=val2)

预期的输出是 xml，像这样：

```
<?xml version="1.0" encoding="UTF-8"?>
<response>
<tag1>00000</tag1>
<tag2>0</tag2>
    ...
</response> 
```

10 次尝试中有 5 次完成了这项工作。

其他 5 次尝试返回：

> java.io.IOException：服务器返回 HTTP 响应代码：415 用于 URL： [https ://somesite.ru/?arg1=val1&arg2=val2](https://somesite.ru/?arg1=val1&arg2=val2)
> 
> 在 sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1615) 在 sun.net.www.protocol.https.HttpsURLConnectionImpl.getInputStream(HttpsURLConnectionImpl.java:254)

我已经阅读了关于 HTTP 415 错误的几篇关于 SO 的帖子。但他们似乎没有帮助。我尝试了不同的请求属性，但要么找不到，要么不是这样。

IDE 是 NetBeans 7.0

谁能给我正确的方向来解决问题？

**编辑**

忘了说，当从浏览器发出相同的请求时，它在 100% 的尝试中都有效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T02:32:29.303

您应该检查的几件事：

1.  如果您有权访问服务器，它会记录任何内容吗？
2.  目的地支持哪些内容类型？您可能应该指定内容类型，以便远程服务器知道您发送的内容：

    con.setRequestProperty("Content-Type", "text/html; charset=utf-8");

3.  您可能需要对文本进行编码 - 查看 Java 的 URLEncoder

# c - 基于 8 个十六进制字节创建一个无符号整数

> ID：12719107
> 
> 赞同：0
> 
> 时间：2012-10-04T01:14:41.907
> 
> 标签：c, hex, bit-shift

我正在尝试将 an 打印`unsigned int`为十六进制，但不仅仅是使用`%08X`. 我需要先用 MSB 打印每个字节的 MSB 和 LSB 的十六进制。我已经明白了：

```
unsigned int num = 1234567890;
char *p = (char*)&num;
for (int i = 0; i < 4; i++) {
    printf("%X%X", (*(p+i) & 0xF0) >> 4, *(p+i) & 0x0F);
}
// prints: D2029649 
```

但是，我无法`unsigned int`从包含以下内容的字符串返回`D2029649`：

```
short dehex(char hexLetter) {
  if(hexLetter > 47 && hexLetter < 58) hexLetter -= 48;
  if(hexLetter > 64) hexLetter -= 55;
  return hexLetter;  
}

unsigned int o = 0;
char *in = "D2029649";
int len = strlen(in);
for(int i = 0; i < len; i++) {
    if(i % 2 == 0) {
        o |= ((unsigned char)dehex(in[i]) << 4) + dehex(in[i+1]);
        o <<= 8;
    }
} 
```

不用说，这根本行不通。这两行代码操作`o`是我尝试撤消原始编码所做的工作以及我对如何将字节转回 int 所做的一些研究的结果。

也许我的麻烦来自对我在生成十六进制时实际在做什么的完全误解。

有没有人有任何提示让我朝着正确的方向前进，将十六进制带回原始的无符号整数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T01:24:44.063

您练习的目的似乎是根据其内存布局将整数转换为字符串，然后再将其转换回来。

否则，您不会试图弄清楚您是否在字节边界上，然后进行位移“体操”。相反，您只需将值左移四位并添加下一个数字，例如：

```
#include <stdio.h>
#include <string.h>

short dehex (char hexLetter) {
    if ((hexLetter >= '0') && (hexLetter <= '9'))
        return hexLetter - '0';
    return hexLetter - 'A' + 10;
}

int main (void) {
    unsigned int o = 0;
    char *in = "D2029649";
    int len = strlen (in);
    for (int i = 0; i < len; i++)
            o  = (o << 4) + dehex (in[i]);
    printf ("%X\n", o);
    return 0;
} 
```

你会注意到我已经`dehex`稍微改变了函数，因为我不是魔术数字的忠实粉丝，其中字符常量更具可读性（它仍然不能移植到所有实现，例如 EBCDIC，但现在很少有这样的实现）。

该程序将以大写十六进制输出该字符串中的无符号整数值以进行检查：`D2029649`。

但是，`1234567890`十进制值是十六进制的，`499602D2`字节的顺序与字符串中的字节顺序相反。那是因为您使用的是所谓的小端架构。

所以你有两个问题。

首先是您以错误的顺序处理字节以取回原始号码。

您需要从字符串的*末尾开始并向后工作，例如：*

```
for (int i = len - 2; i >= 0; i -= 2) ... 
```

第二个是您以错误的顺序执行添加/移位操作。

因为您的原始代码在添加*之后*移动，所以它到达`D2029649`然后向左移动八位，导致`02964900`-`D2`从左侧移动到遗忘，并且在右侧移动零字节。您需要转移然后添加：

```
o <<= 8;
o |= ((unsigned char)dehex(in[i]) << 4) + dehex(in[i+1]); 
```

最后，虽然不是必需的，但如果您只使用 unsigned char 返回转换后的 nybble，您可以大大简化您的代码。我将编写的代码如下：

```
#include <stdio.h>
#include <string.h>

unsigned char dehex (char hexLetter) {
    if ((hexLetter >= '0') && (hexLetter <= '9'))
        return hexLetter - '0';
    return hexLetter - 'A' + 10;
}

int main (void) {
    unsigned int num = 1234567890;
    char *p = (char*) &num;
    for (int i = 0; i < 4; i++)
        printf("%X%X", (*(p+i) & 0xF0) >> 4, *(p+i) & 0x0F);
    putchar ('\n');

    unsigned int o = 0;
    char *in = "D2029649";
    int len = strlen (in);
    for (int i = len - 2; i >= 0; i -= 2) {
        o <<= 8;
        o |= (dehex (in[i]) << 4) + dehex (in[i+1]);
    }
    printf ("%X, or %u\n", o, o);
    return 0;
} 
```

请注意，就一次处理一个字节而不是一次处理一个 nybble 而言，这更有意义。使用基于 nybble 的代码，您必须按顺序执行数组索引，`6, 7, 4, 5, 2, 3, 0, 1`而不是一个漂亮的`0..7`小循环。

这个程序的输出是：

```
D2029649
499602D2, or 1234567890 
```

表明您正在取回您的原始号码。

# ruby-on-rails-3 - rails 3方法删除清除

> ID：12719108
> 
> 赞同：1
> 
> 时间：2012-10-04T01:14:55.600
> 
> 标签：ruby-on-rails-3, rest, clearance

我正在将应用程序升级到 rails 3.0，从 rails 2.3，我升级了清除 gem（gem 'clearance'，'1.0.0.rc2'），似乎 sign_out 需要方法删除。

我将我的登出更新为：

```
<%= link_to 'SignOut', sign_out_path, :method => "delete" %>< 
```

翻译成：

```
<a href="/logout" data-method="delete" rel="nofollow">Logout</a> 
```

但是当我查看服务器日志时，它说：

```
Started GET "/sign_out?timeout=true" for 127.0.0.1 at 2012-10-03 20:28:38 -0400
User Load '44c84e19c75fa993029ca68b4f32019d2a56ab22' LIMIT 1
ActionController::RoutingError (No route matches "/sign_out"): 
```

耙路线显示：

```
sign_out DELETE /sign_out(.:format) {:action=>"destroy", :controller=>"clearance/sessions"} 
```

有什么想法可能是错的吗？

在相关说明中，我在 3 小时后自动注销，这也不起作用，我不知道如何执行方法 = 从 javascript 中删除...？

```
function logout()
{
  location.href='/sign_out?timeout=true';
}

<% if current_user != nil %>
// 3 hours of inactivity log them out
var t= setTimeout("logout()",10800000);
<% end %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T13:57:02.903

好的，我在 rails 3 中找到了答案，即使删除 javascript 也来自外部来源。设置我们的 rails 3 设置的人不包括原型或 jquery，因此没有对此采取任何行动。配置[https://github.com/rails/jquery-ujs](https://github.com/rails/jquery-ujs)应该可以解决问题！

# directx - 为 Windows 8 应用程序调试 HLSL

> ID：12719110
> 
> 赞同：5
> 
> 时间：2012-10-04T00:36:11.487
> 
> 标签：directx, hlsl, debugging, sharpdx

我目前正在使用 SharpDX（托管的 c#directx 包装器）创建 Windows 8 应用程序。但是，我的一个着色器遇到了问题，我想知道是否可以调试此类应用程序。PIX 似乎不适用于 directX 应用程序，因为可执行文件不喜欢直接打开，当我尝试捕获有关我的会话的任何信息时，VS2012 中的新 Visual Studio 图形调试工具包总是显示“无法开始实验”。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T16:27:49.333

我来这篇文章有点晚了，但我想为这个线程的未来访问者添加我已在 SlimDX 和 SharpDX 项目中成功使用 Visual Studio 2012 图形诊断（'DirectX 调试器'）。有一些事情可能会破坏这个过程，特别是在 SlimDX 项目中，我无法使用混合 DX10/11 调试应用程序，DX10 似乎不适用于 VS2012，至少对于托管代码而言。因此，例如，如果您有任何文本渲染，则必须将其删除以进行调试会话。我会说使用以下内容来隔离您的 DX10 代码应该可以工作

```
#define DXDIAGSESSION
  // ... 
#if DXDIAGSESSION
  // your DX10 code goes here.
#endif 
```

对于 SharpDX 项目（C# / WinRT / XAML / SharpDX），我无法使用仅托管调试器。我必须将调试器设置为混合（托管和本机）才能使其工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T18:24:24.550

DirectX Visual Studio 调试器仅适用于本机代码。在您右键单击项目，选择“属性”，转到“调试”选项卡并启用本机调试之前，您将收到错误。

虽然这将消除错误，但它可能会也可能不会解决问题。我有一个类似的场景，使用托管在托管组件中的 SurfaceImageSource (C++) 和 C++ 项目中的 DirectXPage。在这两个项目中，DirectX 调试似乎都无法捕获帧。看来此功能仅适用于使用 DirectX UI（无托管 UI 组件）的程序。

# php - 动态着色 PNG 图像

> ID：12719114
> 
> 赞同：1
> 
> 时间：2012-10-04T01:16:05.197
> 
> 标签：php, jquery, png, tint

有谁知道给PNG图像上色并保持透明度的方法？例如，如果你在这里有这张图片：http: [//clipartist.org/RSS/openclipart.org/2012/March/June/11-Saturday/wheat_black_and_white_background_wall_paper_wallpaper-555px.png](http://clipartist.org/RSS/openclipart.org/2012/March/June/11-Saturday/wheat_black_and_white_background_wall_paper_wallpaper-555px.png)

有没有办法（最好使用 PHP 或 jQuery）动态地为图像的黑色部分添加颜色，同时保持透明像素？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T02:24:31.200

据我所知，PHP 的 GD 支持不支持颜色替换，除非您一次遍历所有像素，比较值，并有条件地用新颜色替换它。不过，它会很慢。

查看[imagemagick 的替换功能](http://www.imagemagick.org/Usage/color_basics/#replace)。您可以编写一个简单的 PHP 脚本，通过该命令将图像运行到标准输出，直接到浏览器。（请参阅[PHP passthru 函数](http://www.php.net/manual/en/function.passthru.php)。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T02:05:00.117

使用 svg 文件代替此类简单的背景图像。可以在 php 中或在 javascript/jquery 中通过更改形状的 css 颜色来动态更改 svg 文件。这可以在 svg 本身或外部样式表中完成。

# prolog - Prolog：从列表中获取第一个浮点数

> ID：12719117
> 
> 赞同：1
> 
> 时间：2012-10-04T01:16:12.323
> 
> 标签：prolog

我无法获取列表中的第一个浮点元素。到目前为止我所做的（也许完全没用）：

```
get_float( _, F ) :- float( F ).

get_float( [ First | Rest ], F ) :-
    get_float( Rest, F ). 
```

给我这个：

```
some_pred( P ) :-
    get_float( SomeList, FloatNumber ),
    writeln( FloatNumber ). % --> prints a stack position 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T01:54:34.880

问题是您的第一个案例根本没有检查列表。尝试这个：

```
get_float([F|_], F) :- float(F). 
```

否则你在正确的轨道上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T02:14:15.893

尝试这个

```
get_float([], _).

get_float( [ First | Rest ], F ) :-
    (float(First), F = First);
    get_float( Rest, F ). 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T01:43:29.700

逻辑应该是：

1.  如果第一个项目是浮动，那就是你的家伙。
2.  如果第一项不是浮点数，则从列表的其余部分获取第一个浮点数。

看起来您正在尝试在第二个谓词中执行 #2。您的第一个谓词看起来正在尝试执行 #1，但并未测试 F 是否是列表的第一个元素。

# objective-c - 交换双精度值的字节顺序

> ID：12719118
> 
> 赞同：0
> 
> 时间：2012-10-04T01:16:17.313
> 
> 标签：objective-c, cocoa, floating-point, core-foundation, endianness

我正在读取可能由 Big Endian 字节顺序中的 64 位浮点数（“双精度数”）组成的二进制数据。我使用 NSData 的 getBytes:range: 方法将它们单独读入 Float64 类型的缓冲区。现在我想将字节顺序更改为 Little Endian。对于整数，使用 Core-Foundation 函数 CFSwapIntXX() 可以轻松实现，其中 XX 是位数。但是浮点数没有对应的方法。这样做的首选方法是什么？

我试图通过先前将其复制到 int64_t 变量然后再次返回到 double 值来“强制”将 64 位 double 作为函数 CFSwapInt64() 的参数。它工作正常，但这对我来说似乎相当残酷。标准框架没有自带方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T02:30:51.140

对浮点数的直接支持使用与平台无关的格式，请参阅[Byte Order Utilities](https://developer.apple.com/library/mac/#documentation/CoreFoundation/Reference/CFByteOrderUtils/Reference/reference.html)。然而，你这样做的方式很好，交换函数中的“整数”是不相关的——无论这些字节将如何解释，这些函数都对这么多字节进行操作。

为了避免丑陋的字节副本，您可以使用`union`：

```
typedef union { Float64 floatValue; int64_t intValue; } FloatBuffer; 
```

使用该字段填充它并对其进行字节交换，并使用该`intValue`字段读出值`floatValue`。

# regex - 删除/替换 bash 中的 html 标签

> ID：12719128
> 
> 赞同：9
> 
> 时间：2012-10-04T01:18:26.230
> 
> 标签：regex, bash, unix, sed

我有一个包含以下行的文件：

```
<li><b> Some Text:</b> More Text </li> 
```

我想删除 html 标签并用`</b>`破折号替换标签，所以它变成这样：

```
Some Text:- More Text 
```

我正在尝试使用 sed 但是我找不到正确的正则表达式组合。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-04T01:24:47.033

如果您严格想要去除所有 HTML 标签，但同时*只*用 a替换`</b>`标签`-`，您可以用管道链接两个简单`sed`的命令：

```
cat your_file | sed 's|</b>|-|g' | sed 's|<[^>]*>||g' > stripped_file 
```

这会将所有文件的内容传递给`sed`将处理替换`</b>`为`-`. 然后，它的输出将通过管道传送到`sed`将所有 HTML 标记替换为空字符串的 a。最终输出将保存到新文件`stripped_file`中。

使用与@Steve 的另一个答案类似的方法，您还可以使用`sed`'`-e`选项将表达式链接到单个（非管道命令）；通过添加`-i`，您还可以在不需要`cat`或新文件的情况下读取并替换原始文件的内容：

```
sed -i -e 's|</b>|-|g' -e 's|<[^>]*>||g' your_file 
```

这将像上面的链式命令一样进行替换，但是这次它将直接替换输入文件中的内容。要保存到新文件，请删除`-i`并添加`> stripped_file`到末尾（或您选择的任何文件名）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T01:25:02.180

一种使用方式`GNU sed`：

```
sed -e 's/<\/b>/-/g' -e 's/<[^>]*>//g' file.txt 
```

例子：

```
echo "<li><b> Some Text:</b> More Text </li>" | sed -e 's/<\/b>/-/g' -e 's/<[^>]*>//g' 
```

结果：

```
 Some Text:- More Text 
```

# javascript - 引导按钮组 + 单选按钮，检查值在使用 jQuery 的 Firefox 中不起作用

> ID：12719131
> 
> 赞同：2
> 
> 时间：2012-10-04T01:20:25.070
> 
> 标签：javascript, jquery, firefox, twitter-bootstrap

我正在使用引导程序构建一个网站，并使用覆盖在单选按钮之上的按钮组来根据选中的单选按钮加载某些内容。我检查单选按钮中的值属性来决定加载哪些内容（使用 jQuery）。这是相同的JSFiddle。

[http://jsfiddle.net/F2Kr3/1/](http://jsfiddle.net/F2Kr3/1/)

如果您在 Chrome 中运行它，那么您会在警报提示中获得单选按钮值。

如果您在 Firefox 中运行它，那么您会在警报提示中看到“未定义”。

任何原因，为什么 FF 会这样做，或者我做错了什么。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T02:23:47.653

这适用于 Chrome 的原因是它会将`click`事件触发到该`input:radio`级别，而 Firefox 没有这种行为。

据我所知，Bootstrap 不处理按钮和嵌套输入单选按钮之间的这种功能。因此，您必须`input:radio`在单击 Bootstrap 样式时设置按钮的选中属性`button`。

```
$('div.btn-group .btn').click(function(){
  $(this).find('input:radio').attr('checked', true);
  alert($('input[name=radio-btn-ctrl]:checked').val());
}); 
```

[http://jsfiddle.net/3prAu/1/](http://jsfiddle.net/3prAu/1/)

# java - Java：结合 JSpinners、事件监听器和文本字段

> ID：12719132
> 
> 赞同：2
> 
> 时间：2012-10-04T01:20:28.190
> 
> 标签：java, swing

```
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.*;
import javax.swing.event.*;
public class guiStatDistribution2 extends JFrame {

int str = 1;
int dex = 1;
int intel = 1;
int con = 1;
int cha = 1;
int remainingPoints = 45;

JTextField remainingDisplay = new JTextField("You have " + remainingPoints + " points left to distribute.");

SpinnerNumberModel strPoints = new SpinnerNumberModel(1,1,46,1);
SpinnerNumberModel dexPoints = new SpinnerNumberModel(1,1,46,1);
SpinnerNumberModel intPoints = new SpinnerNumberModel(1,1,46,1);
SpinnerNumberModel conPoints = new SpinnerNumberModel(1,1,46,1);
SpinnerNumberModel chaPoints = new SpinnerNumberModel(1,1,46,1);

public guiStatDistribution2() {

    JSpinner strSpin = new JSpinner(strPoints);
    JSpinner dexSpin = new JSpinner(dexPoints);
    JSpinner intSpin = new JSpinner(intPoints);
    JSpinner conSpin = new JSpinner(conPoints);
    JSpinner chaSpin = new JSpinner(chaPoints);
    //instance for strength
    strSpin.addChangeListener(new ChangeListener() {
        @Override
        public void stateChanged(ChangeEvent e) {
            if (remainingPoints != 0) {
                str = strPoints.getNumber().intValue();
                remainingPoints = (remainingPoints - (str-1) - (dex-1) - (intel-1) - (con-1) - (cha-1));
                remainingDisplay.revalidate();
            }
            if (remainingPoints == 0) {
                JOptionPane.showMessageDialog(null, "No points left. Lower another score to add more.");
            }
        }
    });
    //instance for dexterity
    dexSpin.addChangeListener(new ChangeListener() {
        @Override
        public void stateChanged(ChangeEvent f) {
            if (remainingPoints != 0) {
                dex = dexPoints.getNumber().intValue();
                remainingPoints = (remainingPoints - (str-1) - (dex-1) - (intel-1) - (con-1) - (cha-1));
                remainingDisplay.revalidate();
            }
            if (remainingPoints == 0) {
                JOptionPane.showMessageDialog(null, "No points left. Lower another score to add more.");
            }
        }
    });
    //instance for intelligence
    intSpin.addChangeListener(new ChangeListener() {
        @Override
        public void stateChanged(ChangeEvent g) {
            if (remainingPoints != 0) {
                intel = intPoints.getNumber().intValue();
                remainingPoints = (remainingPoints - (str-1) - (dex-1) - (intel-1) - (con-1) - (cha-1));
                remainingDisplay.revalidate();
            }
            if (remainingPoints == 0) {
                JOptionPane.showMessageDialog(null, "No points left. Lower another score to add more.");
            }
        }
    });
    //instance for constitution
    conSpin.addChangeListener(new ChangeListener() {
        @Override
        public void stateChanged(ChangeEvent h) {
            if (remainingPoints != 0) {
                con = conPoints.getNumber().intValue();
                remainingPoints = (remainingPoints - (str-1) - (dex-1) - (intel-1) - (con-1) - (cha-1));
                remainingDisplay.revalidate();
            }
            if (remainingPoints == 0) {
                JOptionPane.showMessageDialog(null, "No points left. Lower another score to add more.");
            }
        }
    });
    //instance for charisma
    chaSpin.addChangeListener(new ChangeListener() {
        @Override
        public void stateChanged(ChangeEvent i) {
            if (remainingPoints != 0) {
                cha = chaPoints.getNumber().intValue();
                remainingPoints = (remainingPoints - (str-1) - (dex-1) - (intel-1) - (con-1) - (cha-1));
                remainingDisplay.revalidate();
            }
            if (remainingPoints == 0) {
                JOptionPane.showMessageDialog(null, "No points left. Lower another score to add more.");
            }
        }
    });

    JPanel p1 = new JPanel();
    p1.setLayout(new GridLayout(1,2,0,5));
    p1.add(new JTextField("Strength: "));
    p1.add(strSpin);

    JPanel p2 = new JPanel();
    p2.setLayout(new GridLayout(1,2,0,5));
    p2.add(new JTextField("Dexterity: "));
    p2.add(dexSpin);

    JPanel p3 = new JPanel();
    p3.setLayout(new GridLayout(1,2,0,5));
    p3.add(new JTextField("Intelligence: "));
    p3.add(intSpin);

    JPanel p4 = new JPanel();
    p4.setLayout(new GridLayout(1,2,0,5));
    p4.add(new JTextField("Constitution: "));
    p4.add(conSpin);

    JPanel p5 = new JPanel();
    p5.setLayout(new GridLayout(1,2,0,5));
    p5.add(new JTextField("Charisma: "));
    p5.add(chaSpin);

    JPanel p6 = new JPanel();
    p6.add(remainingDisplay);

    JButton confirm = new JButton("Confirm");
    confirm.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent e) {
            int confirmed = JOptionPane.showOptionDialog(null, "Is this okay?\nStrength: " + str + "\nDexterity: " + dex + "\nIntelligence: " + intel + "\nConstitution: " + con + "\nCharisma: " + cha, "Confirm distribution", JOptionPane.OK_CANCEL_OPTION, JOptionPane.QUESTION_MESSAGE, null, null, null);
            if (confirmed == JOptionPane.YES_OPTION) {
                System.exit(0);
            }
        }
    });
    JPanel p7 = new JPanel();
    p7.add(confirm);

    setLayout(new GridLayout(7,1,0,5));
    add(p6);
    add(p1);
    add(p2);
    add(p3);
    add(p4);
    add(p5);
    add(p7);

}
public static void main(String[] args) {
    guiStatDistribution2 frame = new guiStatDistribution2();
    frame.setTitle("Distribute your skill points");
    frame.pack();
    frame.setLocationRelativeTo(null);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setVisible(true);
}
} 
```

好的，这是用微调器代替按钮的更新代码。我刚刚又遇到了两个问题，但在解决之后，程序将 100% 完成。到目前为止，我非常感谢您给我的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T01:24:53.073

我建议对每个属性使用`JSpinners`而不是 a`JTextfield`和两个`JButtons`。这[条小径](http://docs.oracle.com/javase/tutorial/uiswing/components/spinner.html)会告诉你你需要知道的一切。基本步骤是首先您需要为每个微调器创建数字模型，例如：

```
SpinnerNumberModel strNumberModel = SpinnerNumberModel(1, 1, 20, 1); // value, min, max, step 
```

创建微调器：

```
JSpinner strSpinner = new JSpinner(strNumberModel); 
```

然后你需要实现一个[ChangeListener](http://docs.oracle.com/javase/7/docs/api/javax/swing/event/ChangeListener.html)，比如：

```
strSpinner.addChangeListener(new ChangeListener() {

    @Override
    public void stateChanged(ChangeEvent e) {
        str = strNumberModel.getNumber().intValue();
        remainingPoints = remainingPoints - (str + dex + intel + con + cha);
        if (remainingPoints <= 0) {
            // do something
        }
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T01:39:06.320

我同意 llya 的观点，我会使用`JSpinners`.

但是，如果你喜欢挑战，我会创建一个`AttributeAction`从一个扩展而来的`AbstractAction`，它可以带`JTextField`一个修饰符，也可能是一个范围

```
public class AttributeAction extends AbstractAction {
    private JTextField field;
    private int modifier;
    private int min;
    private int max;

    public AbstractAttributeAction(String text, JTextField field, int modifier, int max, int min) {
        this.field = field;
        this.modifier = modifier;
        this.max = max;
        this.min = min;
        putValue(NAME, text);
    }

    public void actionPerfomed(ActionEvent evt) {
        try {
            int value = Integer.parseInt(fld.getText());
            value += modifier;
            if (value >= min && value <= max) {
                fld.setText(Integer.toString(value));
            }
        } catch (NumberFormatException exp) {
            // Value was bad
        }
    }
} 
```

然后对于每个按钮，您只需要创建一个适当的操作...

```
JTextField strengthField = new JTextField();
JButton btnPlus = new JButton("+", strengthField, 1, 0, 100);
JButton btnMinus = new JButton("-", strengthField, -1, 0, 100); 
```

当然，这会打开一大堆蠕虫，例如如何防止用户输入非数字值，但这是另一个问题；）

# c - 预览窗口后屏幕状态的 Aero 功能是什么？

> ID：12719137
> 
> 赞同：5
> 
> 时间：2012-10-04T01:21:00.823
> 
> 标签：c, windows, aero

我到处查看如何在我的程序中使用 Aero。我找不到任何可以预览您自己背后的窗口的 C 函数，例如文件资源管理器或任何主流浏览器在其标题栏上所做的。

有些程序只是通过添加一个看起来像 Windows 7 标题栏的图像来伪造它——没有 Aero——但我认为这有点作弊。我在下面的链接中找到了这段代码：

```
[DllImport ("dwmapi.dll" Entry Point = "# 113", SetLastError = true)] 

internal static external DwmpActivateLivePreview uint (uint a, IntPtr b, uint c, uint d); 

[DllImport ("dwmapi.dll" Entry Point = "# 105", SetLastError = true)]

internal static bool external DwmpStartOrStopFlip3D (); 

// Activate Aero peek into the desired Handle 
DwmpActivateLivePreview (1, Handle, 0, 1);

// Disable Aero peek
DwmpActivateLivePreview (0, Handle, 0, 1);

// start or stop the Aero Flip 3D
DwmpStartOrStopFlip3D (); 
```

但不知道这意味着什么。是 Aero Peek 的实现，自动与函数一起`PreviewWindows(or whatever)`运行吗？

我迷路了。

[这个链接](http://www.jesconsultancy.nl/tips-and-tricks/aero-apis.html)是荷兰语的，只需通过谷歌翻译运行它

我不想切换是否激活 Aero Peek 和/或 Flip，或者当鼠标悬停在其任务栏图标上时更改我的应用程序的图标。相反，我正在寻找一个函数，它将应用程序的当前屏幕状态置于我自己的后面，并将其作为图像返回以在我的应用程序中显示。作为奖励，（大概）返回的图像是否变得模糊，或者是单独应用的效果？我想它的名字是航空玻璃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T11:00:46.303

据我了解，您希望获得应用程序背后窗口的状态（就显示而言）。您可以通过执行以下操作来实现它，

```
HWND hwnd_behind = GetNextWindow(your_window_handle, GW_HWNDNEXT);

HDC hdc = GetWindowDC(hwnd_behind);

RECT rect;
GetWindowRect(hwnd_behind,rect);

HDC bitmap = MakeABitMapDC();

StretchBlt(bitmap,0,0,dW,dH,hdc,0,0,rect.width,rect.height,SRCCOPY); 
```

您可以将此代码插入处理程序，当 Windows 要求应用程序提供预览位图时，该处理程序会返回位图。

为简洁起见，留下诸如“MakeABitMapDC”之类的细节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T08:01:33.533

我迷路是一个很大的领域，可以看到您不了解的内容，但无论如何我都会尝试。

如果意味着您不知道以下参数的作用：

```
[DllImport ("dwmapi.dll" Entry Point = "# 113", SetLastError = true)] 
internal static external DwmpActivateLivePreview uint (uint a, IntPtr b, uint c, uint d); 
```

基本上是这样的：

*   a：是激活 Aero Peek 的参数。
*   b：AeroPeek 也关注手柄。
*   c：是一个棘手的问题。如果您将窗口句柄传递给该参数并且设置了 TopMost 属性，它将出现在 AeroPeek 的顶部。
*   d：我不知道 d 做了什么，但我使用 DwmpActivateLivePreview 的次数总是将其设置为 1。

所以签名是这样的：

```
internal static extern uint DwmpActivateLivePreview(uint active, IntPtr handle, IntPtr onTopHandle, uint d); 
```

DwmpStartOrStopFlip3D 方法激活“Windows + Tab”效果。

```
[DllImport("dwmapi.dll", EntryPoint = "#105", SetLastError = true)]
internal static extern bool DwmpStartOrStopFlip3D(); 
```

请记住，它们没有被记录是有原因的，因为它们不是供我们使用的。

如果您想在应用程序中使用 Aero Peek 效果，您可以查看位于 DWM 中的 DwmSetIconicLivePreviewBitmap 函数。

更多信息在这里：[MSDN：DwmSetIconicLivePreviewBitmap 函数](http://msdn.microsoft.com/en-us/library/dd389410%28v=vs.85%29.aspx/)

# java - 通过Windows中的vb脚本检查快捷方式文件（.lnk）的“以管理员身份运行”

> ID：12719142
> 
> 赞同：0
> 
> 时间：2012-10-04T01:22:18.773
> 
> 标签：java, vb.net, installanywhere

以管理员身份在 Windows 2008 中运行 .bat 文件。

我以用户身份在 Windows 2008 中安装了 Java 应用程序（用户名为 Test。用户组为 Admin）。此应用程序使用 JSW 并生成 .bat 文件以在 Windows 平台上启动应用程序。这个 .bat 文件是在 maven 插件的帮助下创建的。

现在的问题是，如果我以具有默认安全设置的普通 Windows 用户身份单击 .bat 文件，那么它不会启动我的应用程序。如果我以“以管理员身份运行”启动 .bat 文件，则应用程序启动。如果我更改了“测试”用户的安全设置并且 make 是自由的，那么我可以在不运行“以管理员身份运行”的情况下启动应用程序。

我想自动化这一步。我不希望用户执行“以管理员身份运行”或更改其安全设置。因此，我想出了在安装程序安装应用程序后运行一些 vb 脚本的解决方案，以便该文件对该 .bat 文件进行一些安全设置，以便“测试”用户可以一步启动 .bat 文件。这是可能的还是更好的解决方案？

顺便说一句，我正在使用 Install Anywhere 进行安装程序。

尝试了一段时间后，我发现我还可以更改指向 .bat 文件的快捷方式文件的设置（高级属性）。此快捷方式具有高级属性，其中有“以管理员身份运行”选项。如果选中该选项，那么我的问题就解决了。所以我想知道是否可以从 vb 脚本中检查该选项？如果是，那么有什么提示吗？如果不是，那么有什么替代方法呢？

我找到了[http://nsis.sourceforge.net/ShellLink_plug-in](http://nsis.sourceforge.net/ShellLink_plug-in)但我不知道如何在 vb 脚本中做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T03:14:04.210

你用的是什么版本的JSW？

从 JSW 3.5.7 版开始，当您将 java 应用程序作为 Windows 服务启动/停止时，它将自动请求提升到管理员权限。

这是来自 3.5.7 的[JSW 发行说明](http://wrapper.tanukisoftware.com/doc/english/release-notes.html#3.5.7)：

> 实现了一种从非提升 (UAC) 控制台安装、删除、启动、停止等方式，将 Wrapper 作为 Windows 服务。Wrapper 使用子进程透明地提升。从 Windows Vista 和 2008 开始，这对于与 Windows 服务管理器的顺畅交互是必需的。

干杯，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T02:37:19.573

我认为在批处理文件中不提示输入密码是不可能的。您可以制作一个小型 c++ 启动器来请求权限，然后运行您的 java 应用程序。

# html - display:table 如何/为什么会影响 div 宽度？

> ID：12719147
> 
> 赞同：1
> 
> 时间：2012-10-04T01:23:14.390
> 
> 标签：html, google-chrome, css, css-tables

我注意到`display:table`在 div 上会导致其宽度计算出现舍入问题，这很奇怪，因为我的尺寸为 100%。

[http://jsbin.com/obidun/2/edit](http://jsbin.com/obidun/2/edit)

请注意，上半部分有一个宽度为 55% 的 div，其中嵌套了一个宽度为 100% 的 display:table div。嵌套 div 不会延伸到其父级的边缘（注意父级 div 的白色渗出）。

下半部分完全一样，只是嵌套的 div 没有设置为`display:table`，并且没有渗透。

为什么会`display:table`影响宽度计算，尤其是在 100% 时？我有办法解决这个问题吗？我目前的想法是将宽度设置为 101% 并将溢出设置为隐藏...

注意：我使用的是 Chrome。IE 似乎还可以，至少在给定的大小下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T02:02:01.327

[百分比单位在](http://blogs.msdn.com/b/ie/archive/2012/02/17/sub-pixel-rendering-and-the-css-object-model.aspx)[内部](http://www.brunildo.org/test/percwidth2.pl)转换为像素，每个浏览器的处理方式不同。[如果解决方案今天有效，请继续使用，但请注意明天](https://bugs.webkit.org/show_bug.cgi?id=60318)可能不适用。

# php - Memcached 在 php 中不起作用

> ID：12719149
> 
> 赞同：1
> 
> 时间：2012-10-04T01:23:43.773
> 
> 标签：php, linux, memcached

我无法让内存缓存工作。我遵循[了本教程](http://www.howtoforge.com/install-memcached-and-php5-memcached-module-on-debian-6.0-squeeze)，当我尝试本教程最后一部分的示例时，我没有得到任何输出。

这是教程中的代码。

```
$m = new Memcached();
$m->addServer('localhost', 11211);
$m->set('key', 'hello world');
var_dump($m->get('key')); 
```

当我将它加载到我的网页时，我没有得到任何输出。它说错误。我的服务器出了什么问题？我正确安装并检查了我的 phpinfo 并在那里找到了它。为什么我不能让它工作？

**更新：**

我正在使用 virtualbox .. debian 是我的来宾操作系统。一切都在 php 中工作，只是我无法让它为 memcached 工作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T01:33:57.637

在终端中启动 memcached 守护进程，如下所示：

```
memcached -vv -m64 -l127.0.0.1 
```

# sql - 使用 Distinct 的行过滤器

> ID：12719150
> 
> 赞同：0
> 
> 时间：2012-10-04T01:24:05.710
> 
> 标签：sql, oracle

这是主表查询

```
Select * 
from AC_TAB 
where AC_ID = 7 ; 

AC_PK AC_ID TYPE  STATUS   INS_DATE               VALID
102   7     0     0        3/21/2012 3:35:08 PM   0 
103   7     1     0        3/21/2012 3:35:08 PM 
104   7     2     1        3/21/2012 3:35:08 PM 
```

我正在使用 txn 表加入这个表`ac_id`。因为这里它有 3 行 ac_id 7 ，所以我的 txn 表返回 3 次。如何限制这一点。因为无论类型如何，我都只想返回一个

我的 Txn 查询

```
Select txn_id, amount 
from txn_hdr , ac_tab 
where txn_ac_id = ac_id ;

txn_id  amount   
 1       200 
 1       200 
 3       100 
 3       100 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T11:20:51.613

你可以这样做：

选择不同的 txn_id，金额来自 txn_hdr ， ac_tab 其中 txn_ac_id = ac_id ；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T02:02:40.500

实际上并不清楚您需要什么，但听起来您只想`ac_id`从`AC_TAB`. 如果是这样，那么有几种方法可以做到这一点。

使用子查询：

```
select *
from
(
  select max(INS_DATE) INS_DATE, AC_ID
  from ac_tab
  group by AC_ID
) a
inner join txn_hdr t
  on a.ac_id = t.ac_id; 
```

或使用 CTE 使用`row_number()`：

```
;with cte as
(
  select a.ins_date, a.ac_id, t.amount, row_number() 
            over(partition by a.ac_id order by a.ins_date desc) rn
  from ac_tab a
  inner join txn_hdr t
    on a.ac_id = t.ac_id
)
select *
from cte 
where rn = 1; 
```

或者`row_number()`在子查询中使用：

```
select *
from 
(
  select a.ins_date, a.ac_id, t.amount, row_number() 
            over(partition by a.ac_id order by a.ins_date desc) rn
  from ac_tab a
  inner join txn_hdr t
    on a.ac_id = t.ac_id
) x
where rn = 1 
```

# python - 从 TkInter 条目小部件获取字符串

> ID：12719152
> 
> 赞同：1
> 
> 时间：2012-10-04T01:24:35.913
> 
> 标签：python, user-interface, tkinter, tkinter-entry

我是 Python 的新手，我正在尝试使用 TkInter 创建一个 GUI。我遇到的问题是当我尝试显示条目文本时。以下是我为此任务制作的两个函数。我的代码中是否缺少某些内容？

这是我创建条目小部件的第一个函数：

```
def getArea():

  x1 = StringVar()
  x2 = StringVar()
  y1 = StringVar()
  y2 = StringVar()

  #coor x1
  labelX1 = Label(input, text="X: ").grid(row=1, column=1)
  entryX1 = Entry(input, width=8, textvariable=x1).grid(row=1, column=2)
  #coor x2
  labelY1 = Label(input, text="Y: ").grid(row=2, column=1)
  entryY1 = Entry(input, width=8, textvariable=y1).grid(row=2, column=2)
  #coor y1
  labelX2 = Label(input, text="X: ").grid(row=1, column=3)
  entryX2 = Entry(input, width=8, textvariable=x2).grid(row=1, column=4)
  #coor y2
  labelY2 = Label(input, text="Y: ").grid(row=2, column=3)
  entryY2 = Entry(input, width=8, textvariable=y2).grid(row=2, column=4)

  x1.set("Defalut value x1")
  x2.set("Defalut value x2")
  y1.set("Defalut value y1")
  y2.set("Defalut value y2")

  coorx1 = x1.get()
  coorx2 = x2.get()
  coory1 = y1.get()
  coory2 = y2.get()

  button = Button(input, text='ok',command=lambda:  showResults(coorx1,coorx2,coory1,coory2)).grid(row=1, column=5)

  exitButton = Button(input, text='exit', command=input.destroy).grid(row=2,column=5)

  input.mainloop() 
```

这是我要显示字符串的第二个函数：

```
def showResults(x1,x2,y1,y2):
showInfo = Tk()
showInfo.title("Location Temperature")
showInfo.geometry("270x100+470+320")

print x1, x2, y1, y2

info1 = Label(showInfo, text=x1).pack()
info2 = Label(showInfo, text=x2).pack()
info3 = Label(showInfo, text=y1).pack()
info4 = Label(showInfo, text=y2).pack()

buttonClose = Button(showInfo, text='exit', command=showInfo.destroy).pack(side= RIGHT)
showInfo.mainloop() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T02:28:17.613

有很多事情需要用你的代码来修复。第一个是您正在创建两个`Tk`. Tkinter 的设计使得您应该只创建该类的一个实例，并且只调用该`mainloop`实例的一次。如果您需要第二个窗口，请创建一个`Toplevel`.

其次，您不需要使用`StringVar`s。我知道互联网上有很多例子都在使用它们，但严格来说你不需要它们。根据经验，只有当您要在它们上设置跟踪或者要让两个小部件共享同一个变量（这实际上是一个非常酷的功能）时才需要这些。相反，您可以调用`get`文本小部件的方法来获取值。这样做的主要优点是您需要创建和管理的对象更少。

因此，您可以执行以下操作之一：

1.  您可以在全局变量或实例变量中保存对每个条目小部件的引用（如果您切换到使用面向对象的编程风格），
2.  您可以将对小部件的引用传递给您的`showResults`函数。
3.  您可以继续使用`StringVar`s，并让`showResults`函数中的条目小部件和标签共享相同`StringVar`的 s。同样，您需要以两种函数都可以使用它们的方式存储它们，或者将它们从一个函数传递给另一个函数。

对于第二个例子——传递引用和使用`get`方法——你会做这样的事情：

```
button = Button(input, text='ok',command=lambda:  x1=entryX1, y1=entryY1, 
    x2=entryX2, y2=entryY2: showResults(x1,y1,x2,y2)
...
def showResults(x1,y1,x2,y2):
    info1 = Label(showInfo, text=x1.get())
    info2 = Label(showInfo, text=y1.get()) 
```

这不是唯一的方法，甚至不是最好的方法。关键是，这里没有什么神秘之处。与多个函数使用的变量一样，您要么需要在某处保留全局引用，要么需要传递引用。或者，您可以利用属性的特殊`textvariable`属性。

# python - 确定一个单词的字母个数？

> ID：12719158
> 
> 赞同：-1
> 
> 时间：2012-10-04T01:25:05.863
> 
> 标签：python

嗨，我想要一个内置函数或方法来确定单词中的字母数、元音和常量

我知道在 php 中有 strlen 在 python 中有一个等价物吗？

我尝试使用 sum 但它不起作用

```
def num_of_letters(word)
  (str)->int
'''

'''
sum(word) 
```

我是编程的新手，任何帮助和解释将不胜感激

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T01:29:52.443

*如果*你只想计算元音和辅音，你可以尝试这样的事情：

```
s = "hello world"

print sum(c.isalpha() for c in s) 
```

* * *

要单独计算元音和辅音，你可以试试这个：

```
s = "hello world"

print sum(c in "aAeEiIoOuU" for c in s)  # count vowels

print sum(c.isalpha() and c not in "aAeEiIoOuU" for c in s)  # count consonants 
```

* * *

当然，要获得字符串的总长度（包括空格等），您可以这样做：

```
s = "hello world"

print len(s) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T02:21:14.540

```
def num_of_letters(word):
    """tuple of (vowels, consonants) count in `word`"""
    vowel_count = len([l for l in word.lower() if l in 'aeiou'])
    return vowel_count, len(word) - vowel_count 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T01:27:15.997

使用函数[len](http://docs.python.org/release/2.5.2/lib/built-in-funcs.html#l2h-45)

例如：

```
len(word) 
```

# jquery - 从使用 php 变量构建的 ul 列表中检索选择

> ID：12719159
> 
> 赞同：1
> 
> 时间：2012-10-04T01:25:14.027
> 
> 标签：jquery

我在一个 div 中有一个 UL 列表，使用从 mysql 检索数据的 php 构建。这是代码：

```
<div class="sidebar_section">
<h1>Browse Categories</h1>
<?php
include('config.php');
//Connect to mysql server
...
//Select database
...
$categories_sql = "SELECT * FROM tbl_catagory";
$categories_query = mysql_query($categories_sql) or die (mysql_error());
$rsCategories = mysql_fetch_assoc($categories_query);
?>
<form>
<ul>
<?php do { 
?>
<li><a href = "#" id="cat_<?php echo $rsCategories['ID']; ?>"><?php echo $rsCategories['CatagoryName']; ?></a></li>
<?php
} while ($rsCategories = mysql_fetch_assoc($categories_query));
?>
</ul>
</form>
</div> 
```

如何将用户的选择放入另一个 .php 文件中，以便仅显示与该类别关联的产品？当然，在另一个文件中，我会执行 SELECT * FROM table WHERE categoryname=whatever the user selected。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T01:36:04.813

这个问题的答案千差万别。

首先，我将尝试用我能想到的最简单的方法来回答：

使锚的 href 如下所示：

```
<li><a href="category.php?catId=<?php echo $rsCategories['ID']; ?>" 
       id="cat_<?php echo $rsCategories['ID']; ?>">
    <?php echo $rsCategories['CatagoryName']; ?></a></li> 
```

然后只需创建一个 category.php 脚本，在其中使用 $_GET 数组中的 id。

```
<?php
$categoryId = mysql_real_escape_string($_GET['catId']);
$products_sql = "SELECT * FROM ebook WHERE category = '$categoryId'";
//proceed with the rest
?> 
```

由于您要使用列表中的链接并且您使用 # 作为 href，我会考虑您可能希望使用 AJAX。这是做这一切的一种方法。

首先：让我们给这些列表一个类，我们将其称为“类别选择”（糟糕的命名，抱歉，随意更改即可）。这将允许单个 jQuery .click 或 .live('click', ...) 就足够了，而不必为每个 id 添加一个事件。

```
<li><a href="#<?php echo $rsCategories['ID']; ?>" 
       class="category-choose">
    <?php echo $rsCategories['CatagoryName']; ?></a></li> 
```

第二：为了方便我们，让我们使用href作为“#”（这里只是一个表示id的数字）。现在我们可以执行以下 jQuery 代码：

```
$(document).ready(function() {
    $('.category-choose').live('click', function () {
        var catId = this.href.substr(1);
        $("#content_right").load('content_displaycatproducts.php?catId=' + catId);
    });
}); 
```

现在，在 PHP 脚本中执行与前面方法相同的操作。

希望我没有在某个地方搞砸，因为我无法测试此代码:) 您遇到的任何错误或故障，请报告，我会尽快修复。

# objective-c - 在 iPhone 上播放的 audioPlayer 声音与 IPAD 不同（Iphone 音量小，必须放在耳边）

> ID：12719161
> 
> 赞同：1
> 
> 时间：2012-10-04T01:25:31.957
> 
> 标签：objective-c, ios, avaudioplayer

我正在应用程序中播放声音文件，而在 iPhone 上播放的音量就像打电话一样（您必须将手机放在耳边）。当在 iPad 上播放时，它会像您期望的那样播放，听起来就像正在播放的音乐文件。有谁知道如何让 iPhone 播放音乐的声音？

这是我用来播放声音的：

```
NSURL *url = [NSURL fileURLWithPath:[NSString stringWithFormat:@"%@/30perMinute2.caf", [[NSBundle mainBundle] resourcePath]]];
    NSError *error;
    audioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:url error:&error];
    audioPlayer.numberOfLoops = -1;
    if (audioPlayer == nil)
        NSLog(@"selection didn't work");
    else {
  //        [audioPlayer stop];
        [audioPlayer play];
    } 
```

我已将音量设置在`audioPlayer`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T22:16:58.450

这是最终解决问题的方法：

在 AppDelegate.h

```
#import <AVFoundation/AVFoundation.h>
#import <AudioToolbox/AudioToolbox.h> 
```

在 AppDelegate.m 应用程序中 didFinishLaunchingWithOptions 添加

```
NSError *sessionError = nil;
[[AVAudioSession sharedInstance] setDelegate:self];
[[AVAudioSession sharedInstance] setCategory:AVAudioSessionCategoryPlayAndRecord error:&sessionError];
UInt32 audioRouteOverride = kAudioSessionOverrideAudioRoute_Speaker;
AudioSessionSetProperty(kAudioSessionProperty_OverrideAudioRoute, sizeof(audioRouteOverride), &audioRouteOverride); 
```

# scheme - 方案将元素添加到列表末尾

> ID：12719164
> 
> 赞同：8
> 
> 时间：2012-10-04T01:26:07.003
> 
> 标签：scheme, racket

当只有 cons，first，rest，empty 时，如何将元素添加到列表的末尾（在空之前）？并且可以使用 cond 递归

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-04T01:35:36.967

想想你将如何实现`append`（或者，更一般地说，想想你将如何实现右折叠）。现在，如果您将一个列表附加到包含要添加的元素的单例列表中，那么您基本上已经附加了您的元素。

（显然，这是 O(n)，所以不要以这种方式单独添加元素。）

* * *

这是使用右折叠的解决方案：

```
(define (append-element lst elem)
  (foldr cons (list elem) lst)) 
```

和使用的解决方案`append`：

```
(define (append-element lst elem)
  (append lst (list elem))) 
```

因此，如果您可以使用您列出的操作（很简单！试试）来实现其中一个`foldr`或您自己，那么您就可以开始了。`append`

PS 实际上，您可以`append`使用右折叠来实现：

```
(define (append lst1 lst2)
  (foldr cons lst2 lst1)) 
```

但这仍然让您`foldr`自己实施。;-) （提示：这很容易。看看[我的左折叠实现，](https://stackoverflow.com/a/7324493/13)以获得开始的想法。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-04T02:07:33.880

这看起来像家庭作业，所以我会给你一些指导，让你走上正轨，填空：

```
(define (add-last lst ele)
  (cond ((empty? lst)    ; if the list is empty
         <???>)          ; create a one-element list with `ele`
        (else            ; if the list is non-empty
         (cons <???>     ; cons the first element in the list
               <???>)))) ; with the result of advancing the recursion 
```

以上可以用`cons`、`first`、`rest`、`empty?`来实现`cond`，不需要其他过程。

# c++ - 无法设置 gtkmm

> ID：12719165
> 
> 赞同：2
> 
> 时间：2012-10-04T01:26:37.860
> 
> 标签：c++, gtk, installation, gtkmm

我正在尝试在我的 Windows 7 系统上设置 gtkmm。我已经安装了 Glade 3.6.1 和 gtkmm 开发环境 2.22.0-2。

当我尝试运行下面的示例代码时，我无法编译和运行。

```
#include <gtkmm.h>

int main(int argc, char *argv[])
{
    Gtk::Main kit(argc, argv);

    Gtk::Window window;

    Gtk::Main::run(window);

    return 0;
} 
```

编译日志：

> 编译器：默认编译器构建 Makefile："C:\Dev-Cpp\Makefile.win" 执行 make... make.exe -f "C:\Dev-Cpp\Makefile.win" main.o g++.exe -c main .cpp -o main.o -I"C:/Dev-Cpp/lib/gcc/mingw32/3.4.2/include" -I"C:/Dev-Cpp/include/c++/3.4.2/backward" - I"C:/Dev-Cpp/include/c++/3.4.2/mingw32" -I"C:/Dev-Cpp/include/c++/3.4.2" -I"C:/Dev-Cpp/include" - mms-bitfields -IC:/GTK/include/gtkmm-2.4 -IC:/GTK/lib/gtkmm-2.4/include -IC:/GTK/include/atkmm-1.6 -IC:/GTK/include/giomm-2.4 - IC:/GTK/lib/giomm-2.4/include -IC:/GTK/include/pangomm-1.4 -IC:/GTK/lib/pangomm-1.4/include -IC:/GTK/include/gtk-2.0 -IC: /GTK/include/gdkmm-2.4 -IC:/GTK/lib/gdkmm-2.4/include -IC:/GTK/include/atk-1.0 -IC:/GTK/include/glibmm-2.4 -IC:/GTK/lib /glibmm-2.4/include -IC:/GTK/include/glib-2.0 -IC:/GTK/lib/glib-2.0/include -IC:/GTK/include/sigc++-2.0 -IC:/GTK/lib/sigc++-2.0/include -IC:/GTK/include/cairomm-1.0 -IC:/GTK /lib/cairomm-1.0/include -IC:/GTK/include/pango-1.0 -IC:/GTK/include/cairo -IC:/GTK/include -IC:/GTK/include/freetype2 -IC:/GTK/包括/libpng14 -IC:/GTK/lib/gtk-2.0/include -IC:/GTK/include/gdk-pixbuf-2.0 -IC:/GTK/include/libglademm-2.4
> 
> 在来自 C:/GTK/include/glibmm-2.4/glibmm/containerhandle_shared.h:24、来自 C:/GTK/include/glibmm-2.4/glibmm/arrayhandle.h:23、来自 C:/GTK/include 的文件中/glibmm-2.4/glibmm.h:82，来自 C:/GTK/include/gtkmm-2.4/gtkmm.h:87，来自 main.cpp:1: C:/GTK/include/glibmm-2.4/glibmm/ustring .h:861：错误：ISO C++ 禁止声明`wostringstream' with no type C:/GTK/include/glibmm-2.4/glibmm/ustring.h:861: error: expected`;' 在 "StreamType" C:/GTK/include/glibmm-2.4/glibmm/ustring.h:865 之前：错误：`StreamType' 没有命名类型
> 
> C:/GTK/include/glibmm-2.4/glibmm/ustring.h:906: 错误：预期的构造函数、析构函数或在“&”标记之前的类型转换 C:/GTK/include/glibmm-2.4/glibmm/ustring.h ：906：错误：预期`,' or` ；' 在 '&' 标记 C:/GTK/include/glibmm-2.4/glibmm/ustring.h:912 之前：错误：在 '&' 标记 C:/GTK/include/glibmm-2.4/ 之前的预期构造函数、析构函数或类型转换glibmm/ustring.h:912：错误：预期 `,' or`；' '&' 标记之前
> 
> C:/GTK/include/glibmm-2.4/glibmm/ustring.h: 在成员函数`void Glib::ustring::FormatStream::stream(const T&)': C:/GTK/include/glibmm-2.4/glibmm/ustring.h:1057: error:`stream_'中未声明(首先使用这个函数) C:/GTK/include/glibmm-2.4/glibmm/ustring.h:1057: 错误： （每个未声明的标识符只针对它出现的每个函数报告一次。）
> 
> C:/GTK/include/glibmm-2.4/glibmm/ustring.h: 在成员函数`void Glib::ustring::FormatStream::stream(const char*)': C:/GTK/include/glibmm-2.4/glibmm/ustring.h:1063: error:`stream_'中未声明(首先使用这个函数) C:/GTK/include/glibmm-2.4/glibmm/ustring.h: 在成员函数`void Glib::ustring::FormatStream::stream(char*)': C:/GTK/include/glibmm-2.4/glibmm/ustring.h:1069: error:`stream_中' 未声明（首先使用此函数）
> 
> make.exe: *** [main.o] 错误 1
> 
> 执行终止

任何有关设置的帮助将不胜感激。

谢谢！

# c# - 为什么 DataSet.Clear() 会抛出 ArgumentOutOfRangeException？

> ID：12719166
> 
> 赞同：1
> 
> 时间：2012-10-04T01:26:37.967
> 
> 标签：c#, dataset

这似乎只发生在某些时候

这是堆栈跟踪：

```
在 System.ThrowHelper.ThrowArgumentOutOfRangeException（ExceptionArgument 参数，ExceptionResource 资源）
   在 System.ThrowHelper.ThrowArgumentOutOfRangeException()
   在 System.Collections.Generic.List`1.get_Item（Int32 索引）
   在 System.Data.DataTable.get_LiveIndexes()
   在 System.Data.DataTable.SetShadowIndexes()
   在 System.Data.DataTable.ResetInternalIndexes（DataColumn 列）
   在 System.Data.DataTable.Clear（布尔 clearAll）
   在 System.Data.DataSet.Clear()

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T01:27:24.987

我发现问题是由多线程引起的。在周围加锁`DataSet`阻止了这种异常的发生。

# javascript - 滚动到底部时获取底部滚动.y

> ID：12719169
> 
> 赞同：0
> 
> 时间：2012-10-04T01:26:41.593
> 
> 标签：javascript, jquery

我正在使用一个 nicescroll 插件，用于在 div 上创建滚动条。

```
$('#postscroller').niceScroll();
var nice = $("#postscroller").getNiceScroll()[0];
$('#postscroller').bind("scroll",function()
{
    if(nice.scrollvaluemax==nice.scroll.y)
    {
        alert('bottom');
    }
    alert(nice.scroll.y);
}); 
```

首先，我激活要滚动的 div。然后我将 nicescroll 实例保存到 nice 变量中。

当我测试滚动事件以查看滚动到底部时是否触发了 scroll.y 时，我得到了一些数字，但不是 134，这是我正在测试的 div 中的 nice.scrollvaluemax 。

但是，当我在底部并向上滚动时，我确实得到了 134。

关于滚动到底部时如何获得 134 的任何想法？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T02:14:03.827

我通过在滚动事件中调用它来修复它

```
var postscrollertimer = (function() {
    var timer; 
    return function() {
        clearTimeout(timer);
        timer = setTimeout(function() 
        {
            if(postscroller.scrollvaluemax==postscroller.scroll.y)
            {
                //do stuff
            }
        }, 1000);
    };
})(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T01:31:37.097

您会得到其他数字，因为向下滚动时您**不在**底部...

可能与您`scroll`被解雇时的当前位置有关。

发布更多代码。

# php - 自动填写表格 - 从按下的链接

> ID：12719172
> 
> 赞同：0
> 
> 时间：2012-10-04T01:26:51.870
> 
> 标签：php, javascript, html

我有这个网站：[网站链接](http://www.45design.com/clients/party/invitations/bt-element/)

当用户单击图库中的一个项目时，我希望打开图像（在灯箱中？）。在这里，我想有一个链接，指向带有相关项目的预填联系表。

有人向我提供了此代码以开始使用，但它只会自动填写表格。它不会转发到联系表并自动填写。

```
<form>
    <input type="text" id="packageDescription">
    <input type="text" id="packagePrice">
</form>

<script>

    function autoFill(packageDescription, packagePrice) {

        document.getElementById('packageDescription').value = packageDescription;
        document.getElementById('packagePrice').value = packagePrice;

    }

</script>

<a href="#" onClick="autoFill('Premium Package', 150); return false;">Premium Package</a><br>
<a href="#" onClick="autoFill('Platinum Package', 350); return false;">Platinum Package</a> 
```

谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-04T01:41:00.657

仅当在同一页面中找到**链接**本身和**联系表格**时，提供给您的此代码才有效

# excel - 调用不同工作表的列中的数据粘贴到主工作表中

> ID：12719179
> 
> 赞同：0
> 
> 时间：2012-10-04T01:27:53.127
> 
> 标签：excel, vba

我想从不同工作簿中的另一张工作表（工作表中的一列）调用原始数据来填充主工作表中的列，但两个列的大小都不同。我想在主工作表中使用按钮，当我单击按钮时，数据将被自动调用。这可以做到吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T05:18:33.393

这应该适用于初学者..

```
Sub temp()
Dim wb1, wb2 As Workbook

Set wb1 = ThisWorkbook
Set wb2 = Workbooks.Open("file path")

wb2.Sheets("Sheet1").Range("B1:B" & Range("B" & Rows.Count).End(xlUp).Row).Copy
wb1.Activate
wb1.Sheets("Sheet1").Select
Range("B1").Select
ActiveSheet.Paste
Application.CutCopyMode = False
End Sub 
```

# ruby - 从字符串中删除除字符之外的所有内容？

> ID：12719182
> 
> 赞同：3
> 
> 时间：2012-10-04T01:28:07.610
> 
> 标签：ruby

我目前从 ruby​​ 开始，在我的课程作业中，它被要求操纵字符串，这引发了一个问题。

给定一个字符串链接：

```
I'm the janitor, that's what I am! 
```

任务是从字符串中删除除字符之外的所有内容，以便结果为

```
IamthejanitorthatswhatIam 
```

实现这一目标的一种方法是

```
"I'm the janitor, that's what I am!".gsub(" ", "").gsub(",","").gsub("'","").gsub("!","") 
```

这可行，但看起来很笨拙。处理此任务的另一种方法可能是正则表达式。有没有更“红宝石”的方式来实现这一目标？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T01:33:29.357

在 中使用正则表达式而不是字符串`.gsub`，例如`/\W/`匹配非单词字符：

```
ruby-1.9.3-p194 :001 > x = "I'm the janitor, that's what I am!"
 => "I'm the janitor, that's what I am!" 

ruby-1.9.3-p194 :002 > x.gsub(/\W/, '')
 => "ImthejanitorthatswhatIam" 
```

正如@nhahtdh 指出的那样，这包括数字和下划线。

无需这样做即可完成此任务的正则表达式是`/[^a-zA-Z]/`：

```
ruby-1.9.3-p194 :001 > x = "I'm the janitor, that's what I am!"
 => "I'm the janitor, that's what I am!" 

ruby-1.9.3-p194 :003 > x.gsub(/[^a-zA-Z]/, "")
 => "ImthejanitorthatswhatIam" 
```

# postgresql - 为什么 JPA 实体管理器使用 glassfish 会导致重复键值错误？

> ID：12719183
> 
> 赞同：3
> 
> 时间：2012-10-04T01:28:13.180
> 
> 标签：postgresql, jpa, glassfish, java-ee-6

我目前有大约 3 条来自 JMS 客户端的消息每隔几秒发送到 MDB。MDB 使用 JPA 实体管理器将数据持久保存到 PostgreSQL。这可以正常工作大约一分钟左右。

那么问题就变成了这个消息......

```
Caused by: javax.ejb.EJBException: Exception [EclipseLink-4002] (Eclipse Persistence
Services - 2.3.2.v20111125-r10461):org.eclipse.persistence.exceptions.DatabaseExcep
tion Internal Exception: org.postgresql.util.PSQLException: ERROR: duplicate key value
violates unique constraint "scan_pkey"
Detail: Key (id)=(984) already exists.
Error Code: 0
Call: INSERT INTO Scan (id, th, ag, dl) VALUES (?, ?, ?, ?
)
    bind => [11 parameters bound] 
```

这是我的扫描实体。

```
@Entity
@SequenceGenerator(name="scanIdGen", initialValue=1000, sequenceName="scan_seq")
@Table(name="Scan")
public class Scan implements Serializable {
    @Id
    @Column(name="id")
    @GeneratedValue(strategy=GenerationType.SEQUENCE, generator="scanIdGen")
    private Integer id;

    @Column(name="th")
    private Integer th;

    @Column(name="ag")
    private Integer ag;

    @Column(name="dl")
    private Integer dl;

    // ...
} 
```

这是数据库模式。

```
CREATE SEQUENCE scan_seq START 1000;
CREATE TABLE Scan (
    id       INTEGER DEFAULT NEXTVAL('scan_seq') PRIMARY KEY    
    th       INTEGER DEFAULT NULL,
    ag       INTEGER DEFAULT NULL,
    dl       INTEGER DEFAULT NULL
); 
```

另一个看似不是那么大的问题是我的主键并不是真正从 1000 开始，而是通常从 950 开始。不知道为什么。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T03:09:27.727

猜测 Glassfish/EclipseLink 期望 JPA 标准指定的默认序列增量为 50（出于某种疯狂的原因）。您的 PostgreSQL 序列默认增量为 1。

`allocationSize`在您的 1 中指定一个`@SequenceGenerator`，例如：

```
@SequenceGenerator(name="scanIdGen", sequenceName="scan_seq", allocationSize=1) 
```

或使用`IDENTITY`生成策略。

# javascript - fancybox 关闭但触发按钮消失了

> ID：12719185
> 
> 赞同：0
> 
> 时间：2012-10-04T01:28:35.707
> 
> 标签：javascript, ajax, fancybox

我有以下代码来弹出fancybox，当单击“select_login 按钮”时，问题是在弹出fancybox 后，我通过单击顶部的关闭X 按钮取消了fancybox。触发按钮（“select_login”）没有出现。

我怎样才能让“select_login”按钮再次出现？

```
$(document).ready(function() {

 $("#select_login").fancybox({
                              autoOpen: false, 
                              width: 600, 
                              height: 400, 
                              padding: 0,
                         });

      $("#select_login").click(function() {

            var $username= $("#username").val();
            var $password = $("#password").val();
            var $pageTryLogin= $("#pageTryLogin").val();
            var retval;
            var $response;
            alert("clicked");
            $.ajax({
                type: 'POST',
                  url: 'loginSelectAccount',
                  data:{clientId:$username, password:$password},
                  dataType: 'html', 
                success: function (data) {

                       $response=$(data);
                       retval = $response.find('#multiRecord').attr('value');

                      if (retval == 'false'){

                         $.fancybox.close(true);
                         $("#logFormid").submit();

                      } else if(retval == 'true'){

                         $response.find('#username').attr('value',$username);
                         $response.find('#password').attr('value',$password);
                         $response.find('#pageTryLogin').attr('value',$pageTryLogin);

                         $.fancybox.open({
                             content : $response.html(),
                              afterClose : function() {
                                  $.fancybox.close(true);
                             }
                         });

                      }
                }
            });
      });
});

<input type="button" name="selectLogin" id="select_login" value="Login" style="width:51px">                         
<input type="submit" name="loginTry" id="single_login" value="Login" style="visibility:hidden"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T20:48:22.680

您的代码没有任何意义。您正在通过 id "#select_login" 将 fancyBox 附加到元素，但此元素没有 "href" 或 "data-fancybox-href" 属性，因此 fancyBox 将此元素显示为内联并在关闭后隐藏（与任何内联元素一样） .

# c++ - 在 Ubuntu 12.04 上的 Eclipse 中设置 Google 测试以通过 C/C++ 测试运行程序插件运行

> ID：12719186
> 
> 赞同：3
> 
> 时间：2012-10-04T01:28:45.067
> 
> 标签：c++, eclipse, unit-testing, googletest, cunit

这是我尝试过的：

在项目属性中，我在 libaries 选项卡下包含了 libgtest_main.a 和 libgtest.a。

在 C++ Unit 选项卡下的运行配置中，我将 C/C++ testing 设置为 Google Tests Runner。

在运行配置中，在主选项卡下，C/C++ 应用程序设置为在我的项目构建期间创建的二进制文件。

我已经创建了一个测试文件夹作为我项目的一部分，并在那里编写了我的测试。

这是我的代码：

```
#include "../src/agent.h"
#include "../src/agent.cpp"
#include "gtest/gtest.h"

TEST(AgentTest, voidConstructorWorksProperly) {
Agent testAgent = Agent();
ASSERT_EQ(0, testAgent.getBrain());
}

int main(int argc, char **argv) {
    testing::InitGoogleTest(&argc, argv);
    return RUN_ALL_TESTS();

} 
```

我在 TEST 函数上遇到语法错误，在 InitGoogleTest 和 RUN_ALL_TESTS 上出现“无法解决”。

希望有人可以提供帮助-我已经在这几个小时了，这似乎是我错过的一些简单的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-04T10:27:31.487

我有一个类似的问题并解决了它运行这个脚本

```
 ./scripts/fuse_gtest_files.py . /yourprojectdir/ 
```

它存在于您安装 google 测试框架的位置（即 /tmp/gtest-1.5.0）

我不知道这是否是最好的解决方案，但它对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T06:41:52.887

我最近遇到了类似的问题。

首先要摆脱语法错误和“无法解决”的问题，我已经更改了 Eclipse 中 C++ 索引器的首选项——它只有助于更改其中一项设置，点击应用，然后返回原始设置，然后点击确定。

接下来，如果在 eclipse 中运行测试。请注意，您需要将运行配置设置为具有运行测试的主要功能的二进制文件（由您提供）。可能如果您将测试作为已经具有入口点的其他项目的一部分，然后您将其设置为二进制而不是测试。由于您无法使用两个主要功能构建项目，因此必须对源文件进行一些过滤，以便为您的主应用程序提供独立的构建配置，另一个用于测试。不幸的是，我已经这样做了。

这篇博文可能对您有所帮助：

[http://codetrips.blogspot.com/search/label/gtest](http://codetrips.blogspot.com/search/label/gtest)

他们在这个话题上帮助了我很多。

# c# - LINQ to Entities 无法识别方法“System.String Content(System.String)”

> ID：12719187
> 
> 赞同：0
> 
> 时间：2012-10-04T01:28:55.833
> 
> 标签：c#, asp.net, asp.net-mvc

我在这里读了一些问题，但它们都可以定义为单独的变量，但我认为我的有点不同：

```
 var sliderRecordList = this._sliderService.GetAllAsQueryable();      
  var sliderModelList = sliderRecordList.Select(record => new SliderModel()
      {
        Id = record.Id,
        SlideName = record.SlideName,
        SlideOrder = record.SlideOrder,
        SlideUrl = record.SlideUrl,
        SlideImageUrl = Url.Content("~/Content/AhsenSliderImages/" + record.Id + ".jpg"),
        Enabled = record.Enabled
   }); 
```

问题取决于`Url.Content()`调用方法的位置。有什么建议吗？我试图删除`Url.Content()`方法但没有工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T01:31:48.630

首先物化查询，然后设置 UI 关注点。

```
var sliderRecordList = this._sliderService.GetAllAsQueryable().ToList();
var sliderModelList = sliderRecordList
   .Select(record => new SliderModel
      {
        Id = record.Id,
        SlideName = record.SlideName,
        SlideOrder = record.SlideOrder,
        SlideUrl = record.SlideUrl,
        SlideImageUrl = Url.Content("~/Content/AhsenSliderImages/" + record.Id + ".jpg"),
        Enabled = record.Enabled
   }); 
```

`.ToList()`将首先执行查询。

附带说明一下，考虑使用[AutoMapper](http://automapper.codeplex.com/)将上面的代码变成几行代码：

```
var sliderRecordList = this._sliderService.GetAllAsQueryable().ToList();
var sliderModelList = Mapper.Map<ICollection<SliderRecord>, ICollection<SliderModel>>(sliderRecordList); 
```

URL 生成可以在视图中完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T01:40:04.753

这是因为该函数`Url.Content`无法转换为其 SQL 等效函数。对列表使用`AsEnumerable`函数并尝试一下

```
var sliderModelList = sliderRecordList.AsEnumerable.Select(record => new SliderModel()
      {
        Id = record.Id,
        SlideName = record.SlideName,
        SlideOrder = record.SlideOrder,
        SlideUrl = record.SlideUrl,
        SlideImageUrl = Url.Content("~/Content/AhsenSliderImages/" + record.Id + ".jpg"),
        Enabled = record.Enabled
   }); 
```

祝你好运。

# html - HTML - 文本框和 DIV

> ID：12719188
> 
> 赞同：0
> 
> 时间：2012-10-04T01:29:29.497
> 
> 标签：html, css

我正在创建一个社交网站，例如 facebook。所以我有一个文本框和一个右列。问题是当我调整文本框的大小时，右列随着调整大小的文本框而下降。我怎样才能让正确的 cloumn div 留下来？

这是代码[点击我查看源代码](http://jsfiddle.net/m5d3B/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T15:26:30.867

```
 Change this code in your file after that when you resize your textarea, button will go   next to textarea.
 In Html file:

//<div class="contentText">
   <input type="submit"  class="contentText" value="Post "  id="update_button"  class="update_button"/>
 //</div>

 And 
 In css file:

 textarea { border:0px none; -moz-box-sizing:border-box; box-sizing: border-box; -webkit-box-sizing: border-box; overflow:hidden; height:30px; width:450px; padding:4px; float:left;} 
```

# tomcat - 用于授权的 OpenAM Tomcat J2EE 代理配置

> ID：12719189
> 
> 赞同：0
> 
> 时间：2012-10-04T01:29:33.350
> 
> 标签：tomcat, authorization, policy, opensso, openam

我想使用 OpenAM 将授权配置到在 Tomcat 6 中上演的测试 webapp 中。最终目标/用例类似于：

*   用户 bob 属于组员工
*   用户 john 属于组管理员

*   只有员工和经理可以访问employee.jsp 页面

*   只有管​​理员可以访问 manager.jsp 页面

我找到了大量关于身份验证的文档，并在我的环境中正确配置了这些文档。在登录之前，我可以访问“公共”页面（不是我配置的强制 uri），但是一旦我尝试访问像“employee.jsp”这样的受保护页面，我就会被重定向到 OpenAM 的登录模块并且必须进行身份验证. 我可以作为属于 group 员工的 bob 进行身份验证（支持用户存储是一个活动目录），但是在重定向之后我仍然被拒绝访问。如何为此配置访问权限？为保护此资源而部署的策略代理是 j2ee_agent。Web 代理似乎更相关，但我收集到 j2ee 代理是为 Tomcat 部署的。有什么想法吗？

谢谢。

环境：

*   webapp 部署在 tomcat 6 中，暂存于 Windows 2008 服务器上，带有 AD
*   j2ee 策略代理部署在同一 tomcat 6 实例中，配置集中在服务器中
*   openam 服务器在 jboss 7 中部署的一个单独的 linux 机器上，使用 Windows 2008 Server AD 作为用户存储。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T09:25:11.647

J2EE 代理支持 J2EE 策略。在 OpenAM 使用的数据存储中，您必须将组分配给您选择的用户。

OpenAM 将从该“数据存储组”中抽象出来并构建和“OpenAM 组”。

您必须为此“OpenAM 组”配置映射到部署容器特定部署描述符中的 J2EE 角色。

J2EE 代理模式应该是“J2EE_POLICY”或“ALL”（后者要求在 OpenAM 中配置 url 策略）。

您可以查看随 J2EE 代理一起提供的 agentsample web-app。

此外，代理调试日志（级别设置为“消息”）会告诉您是否以及如何完成映射。

# lotus-notes - 从网页获取字段值 - lotusscript

> ID：12719192
> 
> 赞同：2
> 
> 时间：2012-10-04T01:30:17.143
> 
> 标签：lotus-notes

我需要使用 lotusscript 从网页中读取字段值。本质上，我打算编写一个代理来访问特定的 URL，从页面中获取一个值，然后将该值用于它发送给用户的 url。

谁能给我指点？

一个

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T14:28:06.193

***2019 年 12 月更新****：从 Notes 10（2018 年发布）开始，有一个 NotesHTTPRequest 类与我的代码完全相同。*

我一直这样做，一点也不难（在 Windows 上）。我创建了一个类来做到这一点，所以它很容易实现。

这是你如何称呼它的：

```
Dim internet As New RemoteHTML()
Dim html As String
html = internet.GetHTTP("http://www.texasswede.com/mypage.html") 
```

就是这样，现在您只需从 html 字符串中提取您想要的任何信息。

这是课程：

```
Option Public
Option Declare

Class RemoteHTML
    Private httpObject As Variant
    Public httpStatus As Integer

    Public Sub New()
        Set httpObject = CreateObject("MSXML2.ServerXMLHTTP")
    End Sub

    Public Function GetHTTP(httpURL As String) As String
        Dim retries As Integer
        retries = 0     
        Do
            If retries>1 Then
                Sleep 1     ' After the two first calls, introduce a 1 second delay betwen each additional call
            End If
            retries = retries + 1   
            Call httpObject.open("GET", httpURL, False)
            Call httpObject.send()
            httpStatus = httpObject.Status
            If retries >= 10 Then
                httpStatus = 0  ' Timeout
            End If
        Loop Until httpStatus = 200 Or httpStatus > 500 Or httpStatus = 404  Or httpStatus = 0
        If httpStatus = 200 Then
            GetHTTP = Left$(httpObject.responseText,16000)
        Else
            GetHTTP = ""
        End If
    End Function

    Public Function GetFile(httpURL As String, filename As String) As Boolean
        Dim session As New NotesSession
        Dim retries As Integer
        Dim stream As NotesStream
        Dim flag As Boolean
        Dim responsebody As variant
        Dim cnt As Long
        Dim buffer As String
        Dim tmp As Byte

        Set stream = session.CreateStream
        retries = 0     
        Do
            If retries>1 Then
                Sleep 1     ' After the two first calls, introduce a 1 second delay betwen each additional call
            End If
            retries = retries + 1   
            Call httpObject.open("GET", httpURL, False)
            Call httpObject.send()
            httpStatus = httpObject.Status
            If retries >= 10 Then
                httpStatus = 0  ' Timeout
            End If
        Loop Until httpStatus = 200 Or httpStatus > 500 Or httpStatus = 404  Or httpStatus = 0
        If httpStatus = 200 Then
            flag = stream.Open(filename, "binary")
            If flag = False Then
                MsgBox "Failed to create " & filename & "..."
                GetFile = False 
                Exit function
            End If
            responsebody = httpObject.ResponseBody
            ForAll r in responsebody
                tmp = r
                Call Stream.Write(Chr$(CInt(tmp)))
                cnt = cnt + 1
            End ForAll
            MsgBox cnt
            GetFile = True
        Else
            GetFile = False
        End If

    End Function

    Private Function getString(ByVal StringBin As string)
        Dim intCount As Long
        getString =""
        For intCount = 1 To LenB(StringBin)
            getString = getString & Chr( Asc(MidB(StringBin, intCount, 1)) )
        Next
    End Function

End Class 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T11:19:52.630

如果您的代码将在 Windows 上运行，您可以使用 WinHTTP 或 XMLHTTP COM 类来读取网页。如果代码将在任何其他平台上运行，则最好使用 Java 而不是 LotusScript。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-19T08:56:56.303

如果您尝试从 NotesField 中读取，则可以采用以下方法。创建 Tha 类是为了专门处理将 RichText 项导出到 html 字符串中，以便找到可能存在于 NotesRichText 项中的其他隐藏的嵌入图像（粘贴的图形）。函数 ExportDoc() 将 html 响应文本复制到手头文档的用户定义字段中：

```
Public Class RTExporter
    session As NotesSession
    db As NotesDatabase
    doc As NotesDocument
    obj As Variant
    url As String

    Public Sub New()
        Set Me.session = New NotesSession()
        Set db = session.CurrentDatabase
        Set obj = CreateObject("Microsoft.XMLHTTP")
    End Sub

    ' Handles export from eventual NotesRichTextitems in the form of HTml
    Public Function ExportDoc(hostUrl As String, doc As NotesDocument, rtFieldName As String, htmlFieldName As String)
        Dim htmlString As String    

        url = hostUrl & Me.db.FilePath & "/0/" & doc.Universalid & "/" & rtFieldname & "?openfield&charset=utf-8        

        Set Me.doc = doc    

        htmlString = GetHtmlFromField(htmlFieldName)

        Call doc.ReplaceItemValue(htmlFieldName, htmlString)

        Call doc.Save(True, False)
    End Function

    ' Get http response text and store it in <fieldname>
    Private Function GetHtmlFromField(rtFieldName As String) As String
        Dim html As String      

        On Error Goto ERH

        obj.open "GET", Me.url, False, "", ""

        obj.send("")

        GetHtmlFromField = Trim$(obj.responseText)

        Exit Function
ERH:
        GetHtmlFromField = "Error " & Err & ": " & Error & " occured on line: " & Erl
    End Function

End Class 
```

# jenkins - 如何在 Jenkins 矩阵项目中绘制基准数据

> ID：12719194
> 
> 赞同：5
> 
> 时间：2012-10-04T01:30:46.063
> 
> 标签：jenkins, jenkins-plugins

我有几个 Jenkins 矩阵项目，其中我在 CSV 文件中输出基准测试结果（即执行时间）。我想将这些执行时间绘制为内部版本号的函数，这样我就可以看到我的项目是否随着时间的推移而倒退。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T11:28:23.057

我可以确认[Plot Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Plot+Plugin)是一种正确且非常有用的方法。顺便说一句，它也支持 CSV：[绘图配置示例](http://tiernok.com/LTDBlog/ContinuousDelivery/LoadTest_Config8.png)

![在此处输入图像描述](../Images/9ff8eb387e0667ba8f8de536614da927.png)

我已经使用它几年了，没有任何问题。基准测试结果作为属性文件生成。基准 id（系列 id）用作键，结果用作值。一个构建为每个基准测试生成一个结果。有了这些数据，就很容易创建绘图配置蚂蚁跟踪性能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T21:28:41.600

这可能会帮助您：

[https://wiki.jenkins-ci.org/display/JENKINS/Plot+Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Plot+Plugin)

它为 Jenkins 添加了绘图功能。

# c - 无法让 PWM 在 PIC16F877 (PICC) 上工作

> ID：12719203
> 
> 赞同：0
> 
> 时间：2012-10-04T01:32:09.713
> 
> 标签：c, microcontroller, pic, pwm

我一直在尝试在 PIC16F877 MCU 上使用 PWM 模块，但我得到的只是 CCP1/CCP2 引脚上的平坦低电平。

配置和启动 PWM 模块的代码如下。

```
// Configure PWM
// Timer 2 (PWM timebase)
TMR2 = 0;    //Clear timer
TOUTPS0 = 0;
TOUTPS1 = 0;
TOUTPS2 = 0;
TOUTPS3 = 1; //Postscaler -> 8 (previously set to 0)
T2CKPS0 = 0;
T2CKPS1 = 1; //Prescaler -> 16
TMR2IF  = 0;
TMR2IE  = 1; //Interrupt
PR2 = 233;   //~2.5ms

//PWM1 config
CCPR1L = 0x0F;
CCP1X = 0;
CCP1Y = 0; //PWM1 duty cycle 
TRISB2 = 0;  //CCP1 pin is output (Error is here, see below)
TMR2ON = 1;  //Enable timer 
CCP1CON = 0x0c; //CPP1 is a PWM 
```

任何可以在 pic16 设备上成功启动 PWM 的代码 (PICC) 都会很有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T01:43:17.837

CCP1 引脚未正确设置。*“TRISB2 = 0”*应该是*“TRISC2 = 0”*

```
// Timer 2 (PWM timebase)
TMR2 = 0;    //Clear timer
TOUTPS0 = 0;
TOUTPS1 = 0;
TOUTPS2 = 0;
TOUTPS3 = 1; //Postscaler -> 8
T2CKPS0 = 0;
T2CKPS1 = 1; //Prescaler -> 16
TMR2IF  = 0;
TMR2IE  = 1; //Interrupt
PR2 = 233;   //~2.5ms

//PWM1 config
CCPR1L = 0xFF;
CCP1X = 1;
CCP1Y = 1; //PWM1 duty cycle 
TRISC2 = 0; //Previously was TRISB2
TMR2ON = 1;
CCP1CON = 0x0c; //CPP1 is a PWM 
```

# python - python，正则表达式，匹配带有重复字符的字符串

> ID：12719205
> 
> 赞同：2
> 
> 时间：2012-10-04T01:32:30.550
> 
> 标签：python, regex

我正在尝试在 Apache 日志文件中搜索与特定漏洞扫描相关的特定条目。我需要将单独文件中的字符串与博客中的 URI 内容进行匹配。我试图找到的一些字符串包含重复的特殊字符，如“？”。

例如，我需要能够匹配只包含字符串 '????????' 的攻击 但我不想在字符串'??????????????????'上收到警报 因为每次攻击都与特定的攻击 ID 号相关联。因此，使用：

```
if attack_string in log_file_line:
    alert_me() 
```

...不管用。因此，我决定将字符串放入正则表达式：

```
if re.findall(r'\%s' % re.escape(attack_string),log_file_line):
    alert_me() 
```

...这也不起作用，因为任何包含字符串 '????????' 的日志文件行 即使有超过 8 个 '?' 也匹配 在日志文件行中。

然后我尝试向正则表达式添加边界：

```
if re.findall(r'\\B\%s\\B' % re.escape(attack_string),log_file_line):
    alert_me() 
```

...在这两种情况下都停止了匹配。我需要能够动态分配我正在寻找的字符串，但我不想只匹配包含该字符串的任何行。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T08:12:14.267

怎么样：

```
(?:[^?]|^)\?{8}(?:[^?]|$) 
```

**解释：**

```
(?-imsx:(?:[^?]|^)\?{8}(?:[^?]|$))

matches as follows:

NODE                     EXPLANATION
----------------------------------------------------------------------
(?-imsx:                 group, but do not capture (case-sensitive)
                         (with ^ and $ matching normally) (with . not
                         matching \n) (matching whitespace and #
                         normally):
----------------------------------------------------------------------
  (?:                      group, but do not capture:
----------------------------------------------------------------------
    [^?]                     any character except: '?'
----------------------------------------------------------------------
   |                        OR
----------------------------------------------------------------------
    ^                        the beginning of the string
----------------------------------------------------------------------
  )                        end of grouping
----------------------------------------------------------------------
  \?{8}                    '?' (8 times)
----------------------------------------------------------------------
  (?:                      group, but do not capture:
----------------------------------------------------------------------
    [^?]                     any character except: '?'
----------------------------------------------------------------------
   |                        OR
----------------------------------------------------------------------
    $                        before an optional \n, and the end of
                             the string
----------------------------------------------------------------------
  )                        end of grouping
----------------------------------------------------------------------
)                        end of grouping
---------------------------------------------------------------------- 
```

# haskell - 为什么 Haskell/GHC 可执行文件的文件大小如此之大？

> ID：12719207
> 
> 赞同：19
> 
> 时间：2012-10-04T01:32:34.347
> 
> 标签：haskell, compilation, ghc

> **可能重复：**
> [用 GHC 编译成巨大二进制文件的小型 Haskell 程序](https://stackoverflow.com/questions/6115459/small-haskell-program-compiled-with-ghc-into-huge-binary)

最近我注意到 Haskell 可执行文件有多大。下面的所有内容都是在 GHC 7.4.1 和`-O2`Linux 上编译的。

1.  Hello World ( `main = putStrLn "Hello World!"`) 超过 800 KiB。运行`strip`它会将文件大小减少到 500 KiB；即使添加`-dynamic`到编译中也无济于事，给我留下了大约 400 KiB 的剥离可执行文件。

2.  编译一个涉及 Parsec 的非常原始的示例会生成一个 1.7 MiB 的文件。

    ```
    -- File: test.hs
    import qualified Text.ParserCombinators.Parsec as P
    import Data.Either (either)

    -- Parses a string of type "x y" to the tuple (x,y).
    testParser :: P.Parser (Char, Char)
    testParser = do
        a <- P.anyChar
        P.char ' '
        b <- P.anyChar
        return (a, b)

    -- Parse, print result.
    str = "1 2"
    main = print $ either (error . show) id . P.parse    testParser "" $ str
    -- Output: ('1','2') 
    ```

    Parsec 可能是一个更大的库，但我只使用了它的一小部分，实际上由上面生成的优化核心代码比可执行文件小得多：

    ```
    $ ghc -O2 -ddump-simpl -fforce-recomp test.hs | wc -c
    49190 (bytes) 
    ```

    因此，在程序中实际上并没有发现大量 Parsec，这是我最初的假设。

为什么可执行文件如此庞大？我能做些什么（动态链接除外）？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-04T15:08:41.293

要有效减小 Glasgow Haskell 编译器生成的可执行文件的大小，您必须关注

*   使用`-dynamic`传递给 ghc 的选项的动态链接，因此模块代码不会通过利用共享（动态）库被捆绑到最终的可执行文件中。系统中这些 GHC 库的共享版本是必需的！
*   删除最终可执行文件的调试信息（通过 GNU 的 binutils 的 strip 工具进行 fE）
*   删除未使用模块的导入（不要期望在动态链接中获得收益）

简单的 hello world 示例的最终大小为 9 KiB，Parsec 测试大约为 28 KiB（均为 64 位 Linux 可执行文件），我觉得对于这样的高级语言实现来说非常小并且可以接受。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-04T08:23:11.450

我的理解是，如果您使用包 X 中的单个函数，*则整个包*都会静态链接。我不认为 GHC 实际上是逐个函数链接的。（除非您使用“拆分对象”hack，它“往往会吓坏链接器”。）

但是，如果您要动态链接，那应该可以解决此问题。所以我不确定在这里建议什么......

*（我很确定我在动态链接第一次出现时看到了一篇博文，展示了将 Hello World 编译为 2KB 二进制文件。显然我现在*找不到这篇博文...... grr。）

还要考虑跨模块优化。如果您正在编写 Parsec 解析器，GHC 很可能会内联所有解析器定义并将它们简化为最有效的代码。而且，果然，你的几行 Haskell 已经产生了 50KB 的 Core。编译成机器代码时，它应该增大 37 倍吗？我不知道。您或许可以尝试查看后续步骤中生成的 STG 和 Cmm 代码。（对不起，我不记得我头顶上的编译器标志......）

# f# - F# 记录、用法、代码清晰度

> ID：12719209
> 
> 赞同：2
> 
> 时间：2012-10-04T01:33:09.917
> 
> 标签：f#

背景：

我发现自己经常使用 F# Records。目前我正在研究一个专有二进制协议（一种设计非常奇怪的协议......）的数据包解析和重放项目。

我们为数据包定义骨架记录。

```
type bytes = byte array
type packetSkeleton = {
    part1 : bytes
    part2 : bytes 
    ... } 
```

现在，很容易使用它来“剖析”我们的数据包（实际上只是给字节字段命名）。

```
let dissect (raw : bytes) =
  let slice a b = raw.[a..b]
  { part1 = slice 0 4
    part2 = slice 4 5
    ... } 
```

即使对于较长的数据包，这也很有效，如果切片有可预测的模式，我们甚至可以使用一些简洁的递归函数。

所以我剖析了数据包，提取了我需要的字段，并使用我从剖析中获取的字段创建了一个基于 packetSkeleton 的数据包，现在看起来有点尴尬：

```
let createAuthStub a b c d e f g h ... =
   { part1 = a; part2 = b
     part3 = d; ...
   } 
```

然后，在创建填充的存根之后，我需要将其反序列化为可以放在网络上的表单：

```
(* packetSkeleton -> byte array *)
let deserialise (packet : packetSkeleton) =
  [| packet.part1; packet.part2; ... |]

let xab = dissect buf
let authStub = createAuthStub xab.part1 1 2 xab.part9 ...

deserialise authStub |> send 
```

所以最终我有 3 个区域，记录类型，为给定数据包创建记录，以及反序列化的字节数组。有些事情告诉我，就代码清晰度而言，这对我来说是一个糟糕的设计选择，即使在这个早期阶段，我也已经感觉到它开始让我感到震惊。

**问题：**

a) 我是否为这样的项目使用了正确的数据类型？我的方法正确吗？
b）我是否应该放弃尝试让这段代码感觉干净？

**因为我有点通过触摸来编码这个，我会很感激一些见解！**

 **PS 我意识到这个问题非常适合 C，但 F# 更有趣（另外，稍后对解剖器的验证听起来很吸引人）！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T02:57:00.137

如果一个数据包可能相当大，`packetSkeleton`可能会变得笨拙。另一种选择是使用原始字节并定义一个读取/写入每个部分的模块。

```
module Packet
  let Length = 42
  let GetPart1 src = src.[0..3]
  let SetPart1 src dst = Array.blit src 0 dst 0 4
  let GetPart2 src = src.[4..5]
  let SetPart2 src dst = Array.blit src 0 dst 4 2
  ...

open Packet 

let createAuthStub bytes b c =
  let resp = Array.zeroCreate Packet.Length
  SetPart1 (GetPart1 bytes) 
  SetPart2 b resp
  SetPart3 c resp
  SetPart4 (GetPart9 bytes) 
  resp 
```

这消除了对反序列化功能的需求（并且可能有助于提高性能）。

### 编辑

创建包装器类型是另一种选择

```
type Packet(bytes: byte[]) =
  new() = Packet(Array.zeroCreate Packet.Length)
  static member Length = 42
  member x.Part1
    with get() = bytes.[0..3]
    and set value = Array.blit value 0 bytes 0 4
    ... 
```

这可能会减少一些代码：

```
let createAuthStub (req: Packet) b c =
  let resp = Packet()
  resp.Part1 <- req.Part1
  resp.Part2 <- b
  resp.Part3 <- c
  resp.Part4 <- req.Part9
  resp 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T02:33:35.120

我认为您的方法本质上是合理的-但是，当然，如果不了解更多细节就很难说。

我认为代码中显示的一个关键思想是功能架构的关键，即类型（用于建模问题域）和创建域模型值、处理它并格式化它们的处理功能之间的分离。

在你的情况下：

*   问题域的类型`bytes`和`packetSkeleton`模型
*   该函数处理您的域（我同意丹尼尔的观点，如果将整体作为参数`createAuthStub`，它可能更具可读性）`packetSkeleton`
*   该函数`deserialize`将您的域转换回字节

我认为这种结构化代码的方式非常好，因为它分离了程序的不同关注点。我什至写了一篇文章，试图将其描述为一种[更通用的编程方法](http://tomasp.net/blog/type-first-development.aspx)。**

# ruby-on-rails - 部署 Heroku 应用程序——更新我的代码？

> ID：12719210
> 
> 赞同：0
> 
> 时间：2012-10-04T01:33:28.417
> 
> 标签：ruby-on-rails, heroku

这是一个基本的、愚蠢的问题，但我将我的 Rails 应用程序配置为部署在 Heroku 上，并且我可以从我的 Heroku 帐户打开应用程序等。但是当我想更改我的代码时，我需要重新 -部署整个应用程序？我尝试只提交/推送到heroku master，但我收到错误“致命：远程端意外挂断”。我应该怎么做？

另外：我应该在部署/推送之前运行 db:migrate 吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-04T02:04:27.303

一个基本问题没有什么愚蠢的，因为每个人都必须从某个地方开始。

将 Rails 应用程序部署到 Heroku 的基本过程是：

1.  做出改变
2.  添加并提交您的更改 ( `$ git add files_changed.rb`& `$ git commit -m "make changes"`)
3.  将您的更改推送到 Heroku ( `$ git push heroku master`)

然后，这会将您的代码推送到远程 Heroku 存储库并重新部署您的 Rails 应用程序。如果您进行了任何数据库迁移，则需要运行：

```
$ heroku run rake db:migrate 
```

这会在您的 heroku 应用程序上运行 db:migrate - 看看它是如何工作的？:)

在本地运行 rake db:migrate 只会迁移本地开发数据库。

# android - 如何将变量传递给库项目？

> ID：12719215
> 
> 赞同：2
> 
> 时间：2012-10-04T01:34:05.490
> 
> 标签：android, variables

有没有办法将变量（例如字符串）从主活动传递到另一个设置为库的项目？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T01:38:59.013

您应该能够像在主项目中的活动和服务之间一样，在活动和服务之间来回传递数据。

“库”标志几乎只是告诉系统不要在编译时创建 .apk。

# authentication - 对本地玩家进行身份验证 - Game Center - iOS6

> ID：12719217
> 
> 赞同：3
> 
> 时间：2012-10-04T01:35:04.333
> 
> 标签：authentication, ios6, game-center

我对 Game Center 的开发完全陌生。我在 WWDC 中观看了视频并查看了开发者网站。他们建议我为 iOS 6 输入这样的代码：

```
- (void) authenticateLocalPlayer
{
    GKLocalPlayer *localPlayer = [GKLocalPlayer localPlayer];
    localPlayer.authenticateHandler = ^(UIViewController *viewController, NSError *error){
         if (viewController != nil)
         {
             [self showAuthenticationDialogWhenReasonable: viewController
         }
         else if (localPlayer.isAuthenticated)
         {
             [self authenticatedPlayer: localPlayer];
         }
         else
         {
             [self disableGameCenter];
         }
     }];
} 
```

我已将其复制到应用程序 delegate.m 文件中，但它不喜欢它，显示错误，例如在 [self showAuthenticationDialogWhenReasonable: viewController } 之后出现 ] 等错误。

谁能告诉我如何在 iOS 6 中对游戏中心的用户进行身份验证？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T07:21:00.567

要了解 GameKit，Apple 提供了一些示例，例如： [https](https://developer.apple.com/library/ios/#samplecode/GKLeaderboards/Introduction/Intro.html) ://developer.apple.com/library/ios/#samplecode/GKLaderboards/Introduction/Intro.html 。

在您的代码中，您缺少结束的“]”，但当然您需要的不仅仅是这个函数来连接到 gameCenter。最好从其中一个样本开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-17T04:12:36.547

苹果发布了不正确的代码，]; 接近代码的末尾属于这一行的末尾 [self showAuthenticationDialogWhenReasonable: viewController

不需要此代码，因为这只是解释方法 authenticateLocalPlayer 在 Gamekit 中的工作原理

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-29T20:15:02.637

这是我在不必使用不推荐使用的方法的情况下所做的：

通过调用下面的函数立即在 AppDelegate 中设置身份验证处理程序（我把它放在一个单例助手对象中）。此时，没有用于显示登录视图控制器的视图控制器，因此如果身份验证失败，并且处理程序为您提供视图控制器，只需将其保存即可。这是用户未登录时的情况。

```
- (void)authenticateLocalUserNoViewController {
    NSLog(@"Trying to authenticate local user . . .");

    GKLocalPlayer *_localPlayer = [GKLocalPlayer localPlayer];
    __weak GKLocalPlayer *localPlayer = _localPlayer;  // Avoid retain cycle inside block
    __weak GCHelper *weakself = self;
    self.authenticationViewController = nil;

    localPlayer.authenticateHandler = ^(UIViewController *viewController, NSError *error)
    {
        if (viewController) {
            NSLog(@"User not logged in");
            weakself.authenticationViewController = viewController; // save it away
        } else if (localPlayer.authenticated) {
            [[GKLocalPlayer localPlayer] unregisterListener:self];
            [[GKLocalPlayer localPlayer] registerListener:self];
            NSLog(@"Local player %@ (%@) authenticated.  ID = %@",localPlayer.alias, localPlayer.displayName, localPlayer.playerID);
        } else {
            // Probably user cancelled the login dialog
            NSLog(@"Problem authenticating %@", [error localizedDescription]);
        }
    };

} 
```

然后，一旦您的主屏幕已加载，并且用户想要按下按钮开始在线游戏，请显示您之前隐藏的登录视图控制器。我把它放在我的助手类的另一个方法中。当用户登录时，它将触发执行您原来的身份验证块，但 viewcontroller 参数将为 nil。

```
-(BOOL) showGameCenterLoginController:(UIViewController *)presentingViewController {
    if (self.authenticationViewController) {
        [presentingViewController presentViewController:self.authenticationViewController animated:YES completion:^{
                }];
        return YES;
    } else {
        NSLog(@"Can't show game center view controller!");
        return  NO; // Show some other error dialog like "Game Center not available"
    }

} 
```

# jquery - jQuery插件选择带有“this”元素的thead

> ID：12719225
> 
> 赞同：0
> 
> 时间：2012-10-04T01:37:02.773
> 
> 标签：jquery, jquery-plugins

如果我有两个这样的 html 表：

```
<table id="myTable">
  <thead>
    <tr>
      <th>First Name</th>
      <th>Last Name</th>
      <th>Age</th>
      <th>Total</th>
      <th>Discount</th>
      <th>Difference</th>
      <th>Date</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Peter</td>
      <td>Parker</td>
      <td>28</td>
      <td>$9.99</td>
      <td>20.9%</td>
      <td>+12.1</td>
      <td>Jul 6, 2006 8:14 AM</td>
    </tr>
    <tr>
      <td>John</td>
      <td>Hood</td>
      <td>33</td>
      <td>$19.99</td>
      <td>25%</td>
      <td>+12</td>
      <td>Dec 10, 2002 5:14 AM</td>
    </tr>
  </tbody>
</table>
<br/><br/>
<table id="anotherTable">
  <thead>
    <tr>
      <th>First Name</th>
      <th>Last Name</th>
      <th>High Score</th>
      <th>Total Score</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Clark</td>
      <td>Kent</td>
      <td>18</td>
      <td>32</td>
    </tr>
    <tr>
      <td>Bruce</td>
      <td>Almighty</td>
      <td>45</td>
      <td>180</td>
    </tr>
  </tbody>
</table> 
```

我的 HTML 页面上的 jQuery：

```
$(document).ready(function(){
  $("#myTable").myplugin();
}); 
```

我正在创建一个 jQuery 插件，我希望能够使用 $("table").myplugin() 或 $("#myTable").myplugin() 将其应用于我的应用程序页面上的任何或所有 HTML 表.

在我的插件代码中：

```
return this.each(function(index){
    // code here
}); 
```

如果我添加该行`$(this).addClass('myClass')`，则 CSS“myClass”将添加到表“myTable”中，但如果我添加`$('thead').addClass()`“myClass”行，则会将其添加到两个主题中。我试过`$(this thead).addClass(), $(this 'thead').addClass(), $('this thead').addClass()`了，但都抛出了一个 JS 错误。在这种情况下，如何使用“this”来仅选择元素“myplugin”中的thead被应用于“myTable”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T01:41:12.150

您可以使用[`.find`方法^([jQuery docs])](http://api.jquery.com/find/)。

```
$(this).find("thead").addClass(); 
```

如果您确定它`thead`是 的直接子代`this`，则可以[`.children`](http://api.jquery.com/children/)改用它，它会更快，尤其是在您有非常大的表的情况下。

```
$(this).children("thead").addClass(); 
```

您还可以设置`this`为查询的上下文：

```
$("thead", this).addClass(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T01:42:43.197

试试： $(this).find("thead").addClass("myClass");

# html - 输入浮点数不会清除

> ID：12719231
> 
> 赞同：0
> 
> 时间：2012-10-04T01:38:03.867
> 
> 标签：html, css

在我的 css 文件中，我将输入设置为向右浮动。但现在我不想让它再漂浮了。我不想从我的 css 文件中删除它。现在我正在使用溢出：自动它没有做任何事情。每个人都知道溢出：自动；应该停止浮动。

这是没有所有混乱的html

```
<div class="input_area">
            <label id="first_name">First Name</label>
            <input type="text" />

         </div> 
```

这是CSS

```
.input_area{height:40%; width:40%;  margin-left:10%; background-color:#00BBBB;   }
 input { overflow: auto; } 
```

如果您需要更多 html，请告诉我。

# sql - 如何在同一个表中插入一行，列数增加+1

> ID：12719233
> 
> 赞同：-1
> 
> 时间：2012-10-04T01:38:36.027
> 
> 标签：sql, db2

如何在同一个表中插入一行，列数增加+1

```
insert into Columns
select columns
where count of column 3 increase by 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T14:47:37.983

根据您的评论，也许您只需要一个[身份列](http://www.ibm.com/developerworks/data/library/techarticle/0205pilaka/0205pilaka2.html)。

如果您创建这样的表：

```
CREATE TABLE myTable (
    id INT GENERATED ALWAYS AS IDENTITY (START WITH 1, INCREMENT BY 1)
) 
```

这应该使得每次您在 中插入一行`myTable`时，新行`id`都会比表中的任何其他行都大一。

据推测，您也可以`ALTER`在表中添加标识列。

我使用了 DB2 语法，因为这就是它的标记。如果您使用的是另一个数据库，则语法会[简单得多](https://dev.mysql.com/doc/refman/5.0/en/example-auto-increment.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T14:57:23.553

如果您只想获取一列并将一列的值增加一，我不明白您为什么要取出它并在可以仅[`UPDATE`](https://en.wikipedia.org/wiki/Update_%28SQL%29)数据时再次插入它：

```
UPDATE sometable
SET somecolumn = somecolumn + 1
WHERE someothercolumn = somevalue 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T07:29:58.793

你的意思是这样的：

```
insert into YourTable (column1, column2, column3, column4)
select column4, column1, column2, column3 from YourTable 
```

在这种情况下，数据将被复制到`YourTable`，第一列的数据将位于第二列，第二列的数据位于第三列……最后一列的数据将位于第一列。

# pthreads - 当调用 pthread_join 时，出现错误“避免资源死锁”

> ID：12719234
> 
> 赞同：4
> 
> 时间：2012-10-04T01:38:50.157
> 
> 标签：pthreads

正如我在标题中提到的，当我尝试加入线程时，我得到一个错误。

m_threadid：4615464704，pthread_join 错误：避免资源死锁，线程名称：NetworkWorker

我想知道它是什么样的情况以及解决此问题的任何建议。

谢谢

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-05T06:33:07.237

`EDEADLK`当您有一个封闭的线程循环尝试相互连接时，会出现此错误 ( )。在最简单的情况下，这要么是一个线程调用`pthread_join()`自身，要么是两个线程`pthread_join()`相互调用。

# git - 防止某些文件被拉入 git

> ID：12719238
> 
> 赞同：5
> 
> 时间：2012-10-04T01:39:29.953
> 
> 标签：git

我有一些文件想通过远程机器上的 git pull 被忽略。我仍然希望它是一个工作副本，仅用于更新更改。在我的本地机器上，我不希望这些文件被忽略。

我尝试在远程机器上的 .gitignore 中添加文件，但我想这只是为了提交。

如何做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T02:39:56.010

你不能 - git 的重点是你获得存储库的完整副本 - 你正在实施“我有一把锤子，所以一切都是钉子原则”，并试图让它做一些事情从来没有设计过 - 我建议你如果这是一个打破所有要求的切换工具。

如果您不希望 repo 中的文件 - 不要添加它。

如果您想控制对某些文件的访问 - 将它们移动到单独的存储库并限制访问。

# sql-server - 系统存储过程和表参数

> ID：12719239
> 
> 赞同：1
> 
> 时间：2012-10-04T01:39:30.450
> 
> 标签：sql-server, stored-procedures, table-variable

我习惯这样做：

```
use MyDb
go
create type table_list as table (name sysname)
go
create proc rebuild_indexes
    @ls table_list readonly
as
  [...] 
```

但现在我想在*master*中创建 proc并在其他数据库中使用它：

```
use master
go
create type table_list as table (name sysname)
go
create proc sp_rebuild_indexes
    @ls table_list readonly
as
  [...] 
```

...它构建得很好，但我不能使用它！

```
use MyDb
go
declare @ls table_list 
```

产量：

> 消息 2715，级别 16，状态 3，第 1 行列、参数或变量 #1：找不到数据类型 table_list。参数或变量“@ls”的数据类型无效。

所以我尝试创建一个同义词，它在创建过程中不会抱怨但没有帮助：

```
create synonym table_list for master.dbo.table_list 
```

任何人的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T06:15:40.030

Table types declared in different databases, even if they share the same name and structure, are not treated as being the same by SQL Server:

```
create database DB1
go
use DB1
go
create type TT1 as table (ID int not null)
go
create procedure Echo
    @T TT1 readonly
as
    select * from @T
go
create database DB2
go
use DB2
go
create type TT1 as table (ID int not null)
go
declare @T TT1
insert into @T(ID) values (1)
exec DB1..Echo @T 
```

Result:

```
(1 row(s) affected)
Msg 206, Level 16, State 2, Procedure Echo, Line 0
Operand type clash: TT1 is incompatible with TT1 
```

So far as I'm aware, there is no way to declare a variable in a database using a table type definition from another database. (e.g. anywhere where you see a user defined table type can be used, it can only be named as `<table type>` or `<schema>.<table type>`. 3 or 4 part names are not allowed)

(The above is true for 2008 and 2012; obviously, future versions may do something to address this)

* * *

As a work-around, you can do it the "poor man's" way - have your master defined stored procedure work against a temp table, rather than a user defined table type:

```
use Master
go
create procedure sp_Echo
as
    select DB_NAME(),* from #t
go
create database DB1
go
use DB1
go
create table #t (ID int not null)
insert into #t (ID) values (1),(2)
exec sp_Echo 
```

Results:

```
------------- -----------
DB1           1
DB1           2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T05:55:20.917

AFAIK，用户定义的类型不能在创建它们的数据库的上下文之外使用。

您可能必须在每个数据库中创建 UDT，但将 sProc 保留在 master 中。

您使用 sp_ 命名约定是否有特定原因？

皮特

# javascript - WSYIWYG 文本区域编辑器的 CKEditor 替代品

> ID：12719241
> 
> 赞同：32
> 
> 时间：2012-10-04T01:39:41.860
> 
> 标签：javascript, jquery, ruby-on-rails, ruby-on-rails-3, wysiwyg

我和我的公司正在寻找 CKEditor 的替代品以在我们的 CMS 中使用。最好是我们想要一些更新的和更轻量级的东西。

我们是一家 Rails 3.2 商店，所以很容易与 Rails 集成的东西会很好。

实际上，我们只是在寻找格式化功能，并且可能通过与回形针的集成来寻找图像上传（虽然我们有一个 api，所以这可能很困难）。

到目前为止，我们已经看到

*   CK编辑器
*   TinyMCE
*   降价

有没有人有任何建议或想法？

谢谢！

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-10-04T01:46:24.107

我刚刚发现：

[http://redactorjs.com/](http://redactorjs.com/)

[http://aloha-editor.org/](http://aloha-editor.org/)

[https://github.com/xing/wysihtml5](https://github.com/xing/wysihtml5)

[http://jhollingworth.github.com/bootstrap-wysihtml5/](http://jhollingworth.github.com/bootstrap-wysihtml5/)

更新（这个非常棒且可定制）： [https ://github.com/guardian/scribe](https://github.com/guardian/scribe)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-04T01:42:59.500

你可以试试这些：[NicEdit](http://nicedit.com/)

[标准](http://xstandard.com/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-07T01:03:08.667

如果您想要 Rails 3.2 项目的 WYSIWYG 编辑器，请查看**[Mercury Editor](http://jejacks0n.github.com/mercury/)**。还有一个[Railscast (#296)](http://railscasts.com/episodes/296-mercury-editor)解释了它是如何工作的。

**[Raptor Editor](http://www.raptor-editor.com/)**是另一个很棒的选择。

对于一个微小的替代方案，我建议**[使用 CLEditor](https://github.com/cleditor/cleditor)**（但此时似乎被“放弃”了）

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-04T05:19:34.953

试试 CLEEDITOR

[http://archive.plugins.jquery.com/project/CLEditor](http://archive.plugins.jquery.com/project/CLEditor)

# java - 不太了解 JComboBox itemListeners

> ID：12719243
> 
> 赞同：1
> 
> 时间：2012-10-04T01:39:58.393
> 
> 标签：java, swing, jcombobox, itemlistener

因此，如果我有一个组合框“box”，并且它设置的数组具有值“hello”和“world”，我如何检测选择了哪个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T01:44:11.313

```
box.getSelectedItem(); 
```

这将返回一个被选中的对象。这是javadoc：[http ://docs.oracle.com/javase/6/docs/api/javax/swing/JComboBox.html](http://docs.oracle.com/javase/6/docs/api/javax/swing/JComboBox.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T01:46:24.083

在传递给您的 ItemListener 的 ItemEvent 上调用 getItem()

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T01:53:33.580

您可以使用`getSelectedItem()`来获取选定的一个。

```
String name[] = {"One","Two","Three","Four"};
JComboBox combo = new JComboBox(name);
combo.addItemListener(new ItemListener(){
   public void itemStateChanged(ItemEvent ie){
       String str = (String)combo.getSelectedItem();
       System.out.println("Selected Item is: " + str);
   }
}); 
```

# css - 将 div 放在两个浮动 div 后面

> ID：12719244
> 
> 赞同：1
> 
> 时间：2012-10-04T01:40:03.890
> 
> 标签：css, html, positioning

我有两个div，一个带有float：left，另一个带有float：right。它们并排显示，但是当我添加第三个 div 时，它会显示在两个浮动 div 上，而不是像我试图那样显示在后面。

```
<div id="left_side"  style="float:left;" ></div>
<div id="right_side" style="float:right;" ></div>
<div id="below_side" ></div> 
```

我想做什么：[http ://dl.dropbox.com/u/20836988/intended.png](http://dl.dropbox.com/u/20836988/intended.png)

我实际得到的： http: [//dl.dropbox.com/u/20836988/what%20i%20get.png](http://dl.dropbox.com/u/20836988/what%20i%20get.png)

我尝试将垂直对齐：底部添加到最后一个 div 没有结果。此外，我尝试添加一个包含两个浮动 div 的 div，然后是第三个 div，但我总是得到相同的结果。我确定这一定是一个非常基本的问题，但我无法在任何地方找到答案......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T10:31:57.760

```
<div id="left_side"  style="float:left; background-color:#ccc" >gdfgfdg</div>
<div id="right_side" style="float:right;background-color:red" >gfdgfkjkjhkjhkjh</div>
<div id="below_side" style="background-color:#000; z-index:1000; float:left; color:#FFF;" >dsfdfds</div> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T01:50:56.267

below_side 需要一个 float 和一个 clear:both;

当前左右浮动 - 这会将它们从文档流中取出。这意味着下面的一侧最终会出现在错误的位置。

如果您将 float: left 放在下方，它也会将其从文档流中取出并将其放在与左侧和右侧（相对）相同的空间中，然后添加 clear: both 使其出现在左侧下方和对

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T01:48:17.177

添加`clear: both`到您的`below_side`div。

请参阅此[链接](http://jsfiddle.net/senoramor/jQjJ3/)。

# javascript - 添加/删除 Knockout observableArray 嵌套元素

> ID：12719252
> 
> 赞同：2
> 
> 时间：2012-10-04T01:41:56.317
> 
> 标签：javascript, knockout.js

我正在尝试在 KnockoutJS 中的嵌套 observableArray 中添加/删除。我有一个数组，有几个元素，每个元素都有一个属性对象、类型对象和一个包含对象的属性值数组。所以它是一个嵌套数组。

allAttributes 数组是 observableArray。然后我尝试通过创建一个新的 ViewModel (attributeValueViewModel) 来使 attributeValue 数组可观察，attributeValues 为 ko.observableArray([])。

我做了两个 Knockout 函数（不起作用），我正在尝试向该数组添加/删除值。问题是数组是嵌套的，所以我必须通过this.attribute.id访问attributeID。self.allAttributes[i].attributeValues[j] 应该是我要添加/删除的对象...其中*i=attributeID 和 j=属性值对象的索引*

为什么这些功能不起作用？

这是我的小提琴：http: [//jsfiddle.net/M6Hqj/2/](http://jsfiddle.net/M6Hqj/2/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T02:09:07.933

首先，您正在覆盖内部视图模型中的可观察函数，例如，当您分配时`obj.attribute = item.attribute;`，您正在覆盖您的初始分配`self.attribute = ko.observable(data.attribute);`。而是通过 observable 分配值，如下所示：

```
obj.attribute(item.attribute); //instead of obj.attribute = item.attribute; 
```

这也将使您的`self.addAttributeValue()`函数调用工作，因为数组现在是可观察的。

接下来，在您的*函数*中`self.removeAttributeValue()`，`this`调用实际上是指数组中的特定记录，因此，当您这样做时，它找不到您的对象属性。因此，将函数转移到对象中并使用而不是，如下所示：*`attributeValues``this.attributeValues.splice()``attributeValues``attributeValueViewModel``self``this`*

 *```
//This is inside function attributeValueViewModel(data)
self.removeAttributeValue = function() {
    alert(JSON.stringify(this));
    self.attributeValues.splice(this.id, 1);
} 
```

要调用它，只需将数据绑定代码更改为使用`$parent`而不是`$root`，如下所示：

```
<button data-bind="click: $parent.removeAttributeValue">REMOVE</button> 
```

像这样的小提琴在这里：http: [//jsfiddle.net/UMB79/](http://jsfiddle.net/UMB79/)

（请注意，通过这些更改，您仍然必须修改逻辑以正确添加/删除元素，因为它仍然存在问题）*

# java - 带有 dateStyle 和 timeStyle 的 Joda-Time 格式化程序

> ID：12719255
> 
> 赞同：3
> 
> 时间：2012-10-04T01:42:14.490
> 
> 标签：java, date, datetime, format, jodatime

使用[`java.text.DateFormat`](http://docs.oracle.com/javase/7/docs/api/java/text/DateFormat.html)，可以构建具有日期和时间样式的日期格式化程序：

```
DateFormat df = getDateTimeInstance(DateFormat.SHORT, DateFormat.LONG);
system.out.println(df.format(new Date())); 
```

是否可以使用与[Joda-Time](http://www.joda.org/joda-time/)类似的东西？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-01-24T17:47:11.893

## JodaTime 内置标准格式

**JodaTime**内置了一堆标准的**日期**和**时间**格式。

 **这是我使用的一个示例：

```
DateTime dateTime = DateTime.now(DateTimeZone.UTC);

String formattedDateTime = dateTime.toString(DateTimeFormat.fullDateTime()); 
```

注意`DateTimeFormat.fullDateTime()`.

其他一些选项包括：

*   `fullTime()`
*   `fullDate()`
*   `shortDateTime()`
*   `forStyle("MS")` *表示**中**日期和**短时间**。*
*   `forStyle("S-")` *表示**短**日期和**无**时间。*
*   *... ETC ...*

### 完整列表可在以下位置找到：

[http://www.joda.org/joda-time/apidocs/org/joda/time/format/DateTimeFormat.html#forStyle(java.lang.String)](http://www.joda.org/joda-time/apidocs/org/joda/time/format/DateTimeFormat.html#forStyle(java.lang.String))

干杯，

J.P

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-04T01:51:38.590

将 DateTimeFormat.forPattern() 与您想要的模式一起使用。例如，`DateTimeFormat.forPattern("YYYY-MM-dd HH:mm:ss");`**

# c# - Tic Tac Toe - C# - 无法完成检查

> ID：12719256
> 
> 赞同：1
> 
> 时间：2012-10-04T01:42:38.413
> 
> 标签：c#

所以这是交易，我正在尝试比较本地资源中的图像`X`和`O`，如果它们在`winCondition`数组中相同，则向他们获胜的用户发送消息。

我发现的问题`b1.Image`是没有给我适当的比较。这是比较的：

```
+  b1.Image  {System.Drawing.Bitmap}  System.Drawing.Image  {System.Drawing.Bitmap} 
```

当我希望它改为比较图像名称时。

其中一个问题是，什么时候`turnNumber = 5`，它说我赢了，而我没有。我相信这是由于`b1.Image problem`. 一旦我单击另一个方块，它就会再次检查是否获胜。

我想在游戏完成后禁用按钮，但是我不知道该怎么做。

会不会很简单：

```
 foreach (Button btnEnabled in buttonArray)
   {
       btnEnabled.Enabled = false;
   } 
```

这是代码，再次感谢您的帮助。我已经为此苦苦挣扎了几天。

```
namespace BGreinAssignment2
{
    public partial class frmTicTacToe : Form
    {
        //Global variables
        private bool player1Turn = false;
        private bool player2Turn = true;

        private int[,] winCondition = 
        {
            {0,1,2}, //Horizontal top
            {3,4,5}, //Horizontal Middle
            {6,7,8}, //Horizontal Bottom
            {0,3,6}, //Vertical Left
            {1,4,7}, //Vertical Middle
            {2,5,8}, //Vertical Right
            {0,4,8}, //Diagonal Top Left to Bottom Right or Vice-Versa
            {2,4,6}  //Diagonal Top Right to Bottom Left or Vice-Versa
        };
        private Button[] buttonArray;
        private int turnNumber = 0;

        public frmTicTacToe()
        {
            InitializeComponent();
        }

        //Creates the button array for checks and sets X to go first.
        private void frmTicTacToe_Load(object sender, EventArgs e)
        {
            //Creates button array for checking if image is there/check for beginning of game
            buttonArray = new Button[9] {btnTopLeft, btnTopMid, btnTopRight, btnMidLeft, btnMid, btnMidRight, btnBotLeft, btnBotMid, btnBotRight};

            //Sets player 1 to go first to satisfy the "X always goes first"
            player1Turn = true;
            player2Turn = false;
        }

        /// <summary>
        /// Checks the buttons if the images don't create a win condition through the winCheck method,
        /// displays message box to user with "Draw!" break is included so it doesn't say "Draw!" for each button it checks.
        /// </summary>
        private void drawCheck()
        {
            foreach (Button checkDraw in buttonArray)
            {
                if (checkDraw.Image != null)
                {
                    MessageBox.Show("Draw!");
                    break;
                }
            }
        }

        /// <summary>
        /// Checks the win condition to see if the images are the same. If they are, it will show a message box with the winner.
        /// </summary>
        /// <param name="btnChecks">Creates an array to check the button images</param>
        /// <returns>If there is a winner, returns true and shows message box</returns>
        private bool winCheck(Button[] btnChecks)
        {
            bool win = false;
            for (int i = 0; i < 8; i++)
            {
                int a = winCondition[i, 0], b = winCondition[i, 1], c = winCondition[i, 2];

                Button b1 = btnChecks[a], b2 = btnChecks[b], b3 = btnChecks[c];

                if (b1.Image == null || b2.Image == null || b3.Image == null)
                {
                    continue;
                }

                if (b1.Image == b2.Image && b2.Image == b3.Image)
                {
                    win = true;
                    MessageBox.Show("Game over. " + b1.Image + " Wins!");
                }
            }
            return win;
        }

        //If player chooses top left square
        private void btnTopLeft_Click(object sender, EventArgs e)
        {
            if (btnTopLeft.Image == null)
            {
                if (player1Turn == true)
                {
                    if (turnNumber == 0)
                    {
                        btnTopLeft.Image = BGreinAssignment2.Properties.Resources.tic_tac_toe_X;
                        player1Turn = false;
                        player2Turn = true;
                        turnNumber++;
                    }
                    else
                    {
                        btnTopLeft.Image = BGreinAssignment2.Properties.Resources.tic_tac_toe_X;
                        player1Turn = false;
                        player2Turn = true;
                        turnNumber++;
                        if (turnNumber >= 5)
                        {
                            winCheck(buttonArray);
                        }
                        if (turnNumber == 9)
                        {
                            drawCheck();
                        }
                    }
                }
                else
                {
                    btnTopLeft.Image = BGreinAssignment2.Properties.Resources.tic_tac_toe_O;
                    player1Turn = true;
                    player2Turn = false;
                    turnNumber++;
                    if (turnNumber <= 5)
                    {
                        winCheck(buttonArray);
                    }
                    if (turnNumber == 9)
                    {
                        drawCheck();
                    }
                }
            }
            else
            {
                MessageBox.Show("This space has already been selected");
            }
        }

        //Excluded rest of code (just button clicks, repeats of same for 9 squares)

        /// <summary>
        /// Resets the game for the player.
        /// </summary>
        /// <param name="sender"></param>
        /// <param name="e"></param>
        private void btnPlayAgain_Click(object sender, EventArgs e)
        {
            //For each button, set image to null then reset turn counter and set turn to player 1.
            foreach (Button btnSpaces in buttonArray)
            {
                btnSpaces.Image = null;
            }
            turnNumber = 0;
            player1Turn = true;
            player2Turn = false;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T02:23:46.693

正如您所发现的，`Image`直接比较 s 不是答案。我没有对此进行测试，但我怀疑这是因为每个图像可能具有非常不同的属性，尽管是从相同的资源加载的。例如，如果一个按钮只有 20 像素正方形，而另一个是 50 像素，则`Height`和`Width`属性将不同。有关其他一些属性，请参阅[文档](http://msdn.microsoft.com/en-us/library/system.drawing.image.aspx)。

正如@John3136 所说，处理此问题的更好方法是将模型与绘图分开。这可以像使用`Tag`每个按钮上的属性来存储“O”或“X”一样简单。您将像现在一样检查所有内容，除了您要比较`b1.Tag == b2.Tag && b2.Tag == b3.Tag`. 一个更好但更复杂的方法是有一系列的东西来代表你的游戏板。与任何编程问题一样，有很多可能的方法可以做到这一点——`char[9]`虽然`string[]`或者`bool?[]`可以工作，但最简单的方法是创建一个枚举并存储它的数组，或者上述任何数组的数组。（还`List<>`而不是一个数组，最终）。在任何一种情况下，您都必须在更新图像的同时更新模型，但随后您将进行更简单的比较来测试胜利。

* * *

关于禁用按钮，您是完全正确的 - 但这里有一个问题要问您。如果有人点击了另一个玩家已经点击的按钮，会发生什么？当然，您可以提醒用户，但它*看起来*仍然是一个有效的选择。为什么不一点击就禁用它呢？

* * *

我还打算走得更远一点，给你一个关于“ `//Excluded rest of code (just button clicks, repeats of same for 9 squares)`”行的提示。如果你要重复相同的代码两次以上（有些人会说不止一次），你最好创建一个函数，它将任何能区分它的东西作为参数。例如，你可以有

```
 //If player chooses top left square
    private void btnTopLeft_Click(object sender, EventArgs e)
    {
        DoClick(btnTopLeft);
    }

    //If player chooses top center square
    private void ptnTopCenter_CLick(object sender, EventArgs e)
    {
        DoClick(btnTopCenter);
    }

    private void DoClick(Button button)
    {
      // Manipulate button appropriately
    } 
```

这并没有做任何您不知道如何做的事情 - 您已经在调用其他函数，并在参数中传递按钮（请参阅 参考资料`winCheck()`）。这只是一种思维方式，可以减少您需要编写的代码量，从而减少您需要修复任何给定错误的地方。

# ios - 在 cocos2d 中获取推文

> ID：12719260
> 
> 赞同：0
> 
> 时间：2012-10-04T01:43:07.197
> 
> 标签：ios, twitter, cocos2d-iphone

我想将来自 twitter 帐户的推文集成为 cocos2D iPhone 应用程序中滚动新闻栏的标题。所以我的问题是如何从想要的帐户中检索推文。这甚至可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T07:53:44.870

您需要集成 ios 中可用的 twitter 框架或使用 ShareKit 库

如果您希望此 twitter 集成在更少的 ios 4.0 用户中工作，您还需要使用 MGTwitterEngine

推特 API：[https ://dev.twitter.com/docs/ios](https://dev.twitter.com/docs/ios)

# sql - 如何在sql中连接两个不相关的表

> ID：12719266
> 
> 赞同：22
> 
> 时间：2012-10-04T01:44:05.520
> 
> 标签：sql, sql-server, sql-server-2008, tsql, sql-server-2008-r2

我有两张桌子：

表 1：公式

```
FormulaId    Formula Text
1            [Qty] * [Rect]
2            [Qty] * [Al]
3            [Mt] * [Cat] 
```

表 2：上下文

```
ContextId    Name
1            Test 1
2            Test 2
3            Test 3
4            Test 4 
```

我需要以某种方式在 sql server 2008 R2 中加入这些以获取一个表，其中对于每个上下文 ID，我将有一个完整的公式列表，即

结果

```
ContextId    Name     FormulaId    Formula Text    
1            Test 1   1            [Qty] * [Rect]
1            Test 1   2            [Qty] * [Al]
1            Test 1   3            [Mt] * [Cat]
2            Test 2   1            [Qty] * [Rect]
2            Test 2   2            [Qty] * [Al]
2            Test 2   3            [Mt] * [Cat]
3            Test 3   1            [Qty] * [Rect]
3            Test 3   2            [Qty] * [Al]
3            Test 3   3            [Mt] * [Cat]
4            Test 4   1            [Qty] * [Rect]
4            Test 4   2            [Qty] * [Al]
4            Test 4   3            [Mt] * [Cat] 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-04T01:49:14.753

你想使用一个`CROSS JOIN`：

```
SELECT FormulaId, Formula, ContextId, [Name]
FROM Formula
CROSS JOIN Context 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-10-04T01:46:49.753

您可以[`Cartesian Product`](http://en.wikipedia.org/wiki/Cartesian_product)按如下方式使用这两个表：

```
SELECT * FROM Formulas, Context 
```

这将导致`M * N`行。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-04T01:46:56.177

你试过吗[`CROSS APPLY`](http://technet.microsoft.com/en-us/library/ms175156%28v=sql.105%29.aspx)：

```
select *
from context
cross apply formulas
order by contextid 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/53fe4/2)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T05:24:13.263

您只能进行交叉连接。其他连接只能与相关表一起完成。

# eclipse - 我可以在 Eclipse 中复制粘贴插件文件夹吗？

> ID：12719272
> 
> 赞同：1
> 
> 时间：2012-10-04T01:46:00.877
> 
> 标签：eclipse, plugins

我必须在各种计算机上复制 Eclipse，并且每次我必须从更新站点安装插件。

是否可以将我的插件文件夹与所有计算机同步，以便我在所有计算机上拥有相同的插件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T01:52:52.667

不，除了 plugins/ 文件夹中的文件之外，还有更多的配置数据。我在[Yoxos](https://yoxos.eclipsesource.com/)上工作，该服务可以帮助您在多台计算机之间共享配置。您还可以使用导出当前 Eclipse 配置（文件 -> 导出）并将其导入另一台计算机。

# html - 仅使用 css 将图像内部容器元素垂直居中

> ID：12719281
> 
> 赞同：2
> 
> 时间：2012-10-04T01:47:26.347
> 
> 标签：html, css, vertical-alignment

我需要`<li>`使用 CSS 在它们的容器块内垂直居中一些图像，但我不知道如何去做。我可以求助于使用 javascript 来计算图像的高度，然后使用边距进行一些数学运算以使其垂直居中，但这看起来既笨重又愚蠢。

有没有很好的基于 CSS 的解决方案来完成垂直对齐而不使用固定边距（图像高度是可变的）？

贴在容器 li 元素顶部的图像： ![贴在容器 li 元素顶部的图像](../Images/2ec475f568c9e573073932c444fb5f5e.png)

![在此处输入图像描述](../Images/e51e647cd6c9f98cbfc4c1e2bb37d48e.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T02:02:25.813

您可以使用此 css 属性：

```
display: table-cell; vertical-align: middle; 
```

喜欢这个演示：[jsfiddle.net/ongisnade/P94YE/](http://jsfiddle.net/ongisnade/P94YE/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T01:50:43.957

这可能会解决您的问题：

```
vertical-align: middle; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T01:54:10.663

这是我一直在使用的..
`vertical-align: middle;`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T02:06:53.630

Fredy 的回答对于现代浏览器是正确的，但不适用于 IE pre 8。其他技术： http: [//phrogz.net/css/vertical-align/index.html](http://phrogz.net/css/vertical-align/index.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-04T02:16:27.197

希望这可以帮助！[http://css-tricks.com/snippets/css/center-div-with-dynamic-height/](http://css-tricks.com/snippets/css/center-div-with-dynamic-height/)

# arrays - Matlab：将数组与其他数组进行比较

> ID：12719282
> 
> 赞同：0
> 
> 时间：2012-10-04T01:47:27.103
> 
> 标签：arrays, matlab, if-statement, median

> **可能重复：**
> [Matlab，使用 if 语句比较数组](https://stackoverflow.com/questions/12683393/matlab-comparing-array-using-if-statement)

嘿伙计们，我有一个类似于以下的数组

```
A = [2 4 6 8 ; 3 5 7 9 ; 1 4 6 9]

row_median = [ 5 6 5 ]
col_median = [ 2 4 6 9 ] 
```

从这些数据中，我想创建另一个数组，称为`MedianMap`. 我需要使用 IF 语句（我知道有更简单的方法，`meshgrid`例如`A`

*   如果该值大于行和列的中位数，则将“1”分配给中位数图
*   如果该值小于行和列中位数，则将“-1”分配给中位数图
*   否则为 0

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T06:04:36.697

这也是[bsxfun](http://www.mathworks.nl/help/matlab/ref/bsxfun.html)的工作：

```
 result = zeros(size(A));
 result( bsxfun(@gt,A,row_median') & bsxfun(@gt,A,col_median) ) =  1;
 result( bsxfun(@lt,A,row_median') & bsxfun(@lt,A,col_median) ) = -1; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T02:29:52.013

您似乎是一个相当新的用户，所以欢迎来到 SO。两件事：1）如果您认为我或其他人已经回答了您的问题，请单击答案旁边的勾号。至于第二个，嗯...

2）这听起来像是一个家庭作业问题（即，即使您知道有更好的方法，您也想使用 IF 语句这一事实）。如果是这种情况，请注意以供将来参考，如果您在问题中证明您至少尝试自己解决问题，人们更有可能提供帮助。

如果这不是一个家庭作业问题，这里有两种解决方案（一个带有 IF 语句，另一个没有）：

```
%#Setup
A = [2 4 6 8 ; 3 5 7 9 ; 1 4 6 9];
Med1 = median(A, 1); %median of each column
Med2 = median(A, 2); %median of each row
T = size(A, 1);
N = size(A, 2);

%#Your IF solution
MedianMap2 = NaN(T, N);
for t = 1:1:size(A, 1)
    for n = 1:1:size(A, 2)
        if A(t, n) > Med1(1, n) && A(t, n) > Med2(t, 1)
            MedianMap2(t, n) = 1;
        elseif A(t, n) < Med1(1, n) && A(t, n) < Med2(t, 1)
            MedianMap2(t, n) = -1;
        else
            MedianMap2(t, n) = 0;
        end
    end
end

%#A better solution
I1 = (A > ones(T, 1) * Med1) .* (A > Med2 * ones(1, N));
I2 = (A < ones(T, 1) * Med1) .* (A < Med2 * ones(1, N));
MedianMap1 = zeros(T, N) + I1 - I2;

%#Print output
MedianMap1 
```

# regex - Reg ex 匹配两个标签之间的所有内容

> ID：12719289
> 
> 赞同：0
> 
> 时间：2012-10-04T01:47:45.280
> 
> 标签：regex

我有一个与此相似的字符串

```
<td><p>alakjsdlajsdlkj</p><p><b>asdkjalsdkjaskldj</b></p><p>asdjlaksjdlaksjd</p></td> 
```

抓取标签之间所有内容的正则表达式是什么？

我想获取以下内容（包括 HTML）

```
<p>alakjsdlajsdlkj</p><p><b>asdkjalsdkjaskldj</b></p><p>asdjlaksjdlaksjd</p> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T02:09:22.303

您无法使用正则表达式完成此操作。它们只是描述性/功能不够强大，主要是因为没有机制来跟踪它已经看到了多少东西。简而言之，这是因为正则表达式机制没有堆栈的概念（它代表有限状态机，而不是下推自动机）。

例如，考虑模式`<p>(.*)</p>`。如果您使用贪婪模式（尽可能匹配）并且有一个类似 的字符串`<p>first</p><p>second</p>`，则匹配将是`first</p><p>second`. 如果您使用非贪婪模式（尽可能进行最小匹配）并获得类似 的字符串`<p><p>stuff</p></p>`，您将获得 match 的奖励`<p>stuff`。因此，两种模式都不能很好地涵盖所有情况（或任何情况）。

As @kristopher points out, it's possible to have a pattern that avoids including another tag inside the match, but this will only match innermost tags.

To do what you want robustly, you'll need an actual parser. Several html parsing solutions have been created by others, or for simple parsing needs, you might be able to write your own.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T01:58:17.760

如果您的标签嵌套，这会很快变得混乱。

您无法使用 html 解析器库吗？这样做会更好。

```
<([^>]+)>([^<]+)</\1> 
```

获取任何用尖括号括起来的字符串以及直到下一个标签的任何字符

这虽然不处理嵌套或不匹配的标签

```
<div>test <b>nested</b></div> 
```

只会捕获 < b > 而不是 div，因为 < div > 会在遇到自己标签的结尾之前遇到 < b > 的开头。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T02:01:59.110

如果您不能使用[HTML 解析器](https://www.google.com/search?q=HTML%20parser%20&ie=utf-8&oe=utf-8)并且 td 和结尾 td 位于字符串的开头和结尾：

```
^<td>(.*)</td>$ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-04T02:03:15.827

试试这个，它应该只匹配最外面的标签并返回组中的内部字符串

```
^<\w+>(.*)</\w+>$ 
```

但它不会检查正确的嵌套等。如果可能，请使用适当的框架。

# android - 谷歌搜索链接在我的应用程序打开一个空白页面的 web 视图..！

> ID：12719293
> 
> 赞同：2
> 
> 时间：2012-10-04T01:48:21.710
> 
> 标签：android, webview, href, google-search, onmousedown

在我的 android 应用程序中加载了带有谷歌搜索结果链接的 webview，当我点击链接时，它打开了一个空白屏幕。

我认为，这与结果页面中每个 href 链接附带的 onmousedown 事件有关。

如果我有办法处理这个问题并让 webview 真正打开我点击的链接，我将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T04:43:56.980

我有同样的问题。当我在运行 4.1.1 的 Asus Transformer TF700 的 Web 视图中单击 Google 搜索结果时，我得到了“关于：空白”页面。我的 Acer A100 平板电脑或其他手机不会出现这种情况。

当我在 Google 搜索主页面底部从平板电脑切换到经典版本时，我注意到结果链接有效。

[https://www.google.com/?nota=1](https://www.google.com/?nota=1)

如果您删除上述 URL 中的 ?nota=1，您将不会在 PC 中看到“平板电脑”选项。但是，在您的平板电脑中，默认的 google.com URL 会在底部显示“平板电脑”选项。

如果您在搜索结果页面中使用 nota=1，则链接将起作用。像这样：

[http://www.google.com/search?nota=1&q=amazon](http://www.google.com/search?nota=1&q=amazon)

我知道这并不完美。我们希望默认的 Google 搜索结果页面的链接能够正常工作。谷歌在华硕 Transformer 似乎不喜欢的平板电脑版本上做了一些时髦的事情！

当我弄清楚导致这种情况的原因时，我会发布更新。哦！Android 的乐趣 :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T06:30:24.003

这是另一个解决方案。在 Google 完成加载空白页面后，您使用 WebView 的标签或成员变量将 WebView 与上一页（这是实际结果）一起加载。像这样：

```
@Override
public void onPageFinished(WebView view, String url)
{
    System.out.println("onPageFinished: " + url);
    if ("about:blank".equals(url) && view.getTag() != null)
    {
        view.loadUrl(view.getTag().toString());
    }
    else
    {
        view.setTag(url);
    }
} 
```

这是我的 LogCat：

```
I/System.out(13182): onPageFinished: http://www.google.com/#hl=en&sugexp=les%3B&gs_rn=1&gs_ri=tablet-gws&cp=2&gs_id=9&xhr=t&q=amazon...
I/System.out(13182): onPageFinished: http://www.amazon.com/
I/System.out(13182): onPageFinished: about:blank
I/System.out(13182): onPageFinished: http://www.amazon.com/ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-04T01:03:20.010

*我想将此作为评论添加到 Stan Texan 的回答中，但我没有足够的代表点...*

我正在运行 Honeycomb (3.1) 的旧平板电脑 (LG Optimus Tab/DoCoMo L-06c/T-Mobile G-Slate/Rogers LG V909) 上进行测试，而我的 WebView 在 Google 的网站上也遇到了同样的问题。

Google 自己的浏览器在导航到 www.google.com 时工作得很好，但是当我在我的应用程序的 WebView 中使用该 url 时，链接都是“about:blank”。0_o

因此，如果用户想去谷歌的搜索页面，我将url改写如下：

```
//get the url from the user..
inUrl = urlAddressEditText.getText().toString();
// make sure it's properly formatted...
...
// then add the "/?nota=1&" if it's a Google domain. 
String outUrl = inUrl.replaceFirst("(www\\.google\\..*/?)(\\??)", "$1/?nota=1&");
webView.loadView(outUrl); 
```

到目前为止，这是可行的，但我还没有针对每种情况进行测试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T17:09:54.460

我查看了您的 Vuwize 应用程序。与将 www.google.com 直接嵌入 WebView 不同，您似乎拥有自己的搜索表单，运行 Google 搜索，然后自己呈现结果页面。这可以解释您的问题，因为来自 Google 的搜索结果中的结果链接不是指向原始页面的直接 href 链接。要了解有关您的问题的更多信息，有必要查看您到底在做什么以及如何从服务器端运行 Google 搜索。

如果您只是像这样直接将 www.google.com 嵌入到 WebView 中：

```
 setContentView(R.layout.main);

    mWebView = (WebView) findViewById(R.id.webview);

    mWebView.getSettings().setJavaScriptEnabled(true);

    mWebView.loadUrl("http://www.google.com");

    mWebView.setWebViewClient(new HelloWebViewClient()); 
```

用户可以直接在 Google 中输入搜索并获得结果页面，其中的链接都可以在同一个 WebView 中点击。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-20T23:38:26.283

这是另一种处理果冻豆造成的空白页的解决方案。我发现了 2 个导致空白页的 URL。覆盖 loadUrl(String) 并且根本不加载它们。

```
@Override
public void loadUrl(String url)
{
    if (url != null && !(url.startsWith("file:///android_asset") || "about:blank".equals(url)))
    {
        super.loadUrl(url);
    }
} 
```

# jquery - 我如何使用 chrome webcam API 和 processing.js 来操作视频？

> ID：12719294
> 
> 赞同：0
> 
> 时间：2012-10-04T01:48:58.210
> 
> 标签：jquery, google-chrome, webcam, processing, processing.js

作为主题，我想玩网络摄像头，Chrome 网络摄像头 API 派上用场，不需要插件。

不过我对javascript语法不熟悉，所以还是想用processing.js来操作视频。那么代码应该是怎样的呢？

GetUserMedia 在画布中，然后呢？我如何告诉 processing.js 画布中有视频？

import processing.video 不应该工作，因为它是 processing.js 而不是处理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T05:58:49.567

根据这个：[https://github.com/austinhappel/webcam-processingjs/blob/master/js/webcam-processing.js](https://github.com/austinhappel/webcam-processingjs/blob/master/js/webcam-processing.js)，您需要调用网络摄像头的方法，例如：

```
ctx.drawImage(myImg, imageOffset, 0, height / width * nb, nb); 
```

从那里你可以手动操作画布上的像素

```
p.loadPixels();
imgPixelData = p.pixels.toArray(); 
```

他们在这里提供了一个调用 getUserMedia 的 WEBCAM 类：[https ://github.com/austinhappel/webcam-processingjs/blob/master/js/webcam.js](https://github.com/austinhappel/webcam-processingjs/blob/master/js/webcam.js)

关键线在这里：

```
if (navigator.getUserMedia) {
  navigator.getUserMedia({video: true}, function (stream) {
    self.video.src = stream;
    self.localMediaStream = stream;
  }, onWebcamFail);
} else if (navigator.webkitGetUserMedia) {
  navigator.webkitGetUserMedia({video: true}, function (stream) {
    self.video.src = window.webkitURL.createObjectURL(stream);
    self.localMediaStream = stream;
}, onWebcamFail); 
```

祝你好运！我只在 Java 中完成了这项工作，所以请告诉我们您是否可以使用 javascript 和网络摄像头来玩得很好。我认为您需要最新版本的 chrome 才能使所有这些工作。

# c - printf 打印不正确

> ID：12719297
> 
> 赞同：2
> 
> 时间：2012-10-04T01:50:11.937
> 
> 标签：c, file-io

我有代码提示用户输入文件名，然后在控制台上显示文件的内容。但是，我使用的 printf() 语句直到最后才会打印出来，因此用户不知道输入文件名。

```
int main(int argc, char * argv[]){
printf("%s", "What file would you like to open?\t");
char filename[100];
scanf("%[^\n]", filename);
printf("You chose:\t%s\n", filename);
return 0;
} 
```

该程序当前扫描控制台，然后打印出两个 printf() 语句。scanf() 语句正常工作，只是不是在正确的时间。知道我的问题是什么吗？

编辑：程序从命令行运行时可以正常工作，但问题在 Eclipse 中仍然存在。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T01:54:28.057

尝试`fflush(stdout);`在第一个 printf 之后添加，我认为问题在于`printf`不刷新它的缓冲区。

编辑：这似乎是[Eclipse 中的一个已知错误](https://bugs.eclipse.org/bugs/show_bug.cgi?id=173732)，解决方法是将缓冲区大小设置为零（检查代码的注释）。

# java - 在瓷砖地图中移动；当它撞到地图中间时被垂直卡住

> ID：12719298
> 
> 赞同：1
> 
> 时间：2012-10-04T01:50:42.097
> 
> 标签：java, android, android-event

因此，我正在制作一个简单的游戏，其中有一个 tilemap（或 cellmap，具体取决于您的术语）。问题是：如果我有一张超过 100 个图块的地图，如果我在地图下移动大约一半，应用程序会将我移动到最后一行（意味着屏幕上的底行是最后一行），我不能再向上移动，但是水平移动没有问题。如果有人能告诉我我做错了什么以及为什么我正在做的事情对大约 100 块以上的任何东西都不起作用移动代码，我将非常感激。

这是显示我如何处理触摸事件的代码。如果您认为需要更多代码，请务必告诉我。

```
 @Override
public boolean onTouchEvent(MotionEvent event) {
    // touch down
    if (event.getAction() == MotionEvent.ACTION_DOWN) {
        // new event
        _isMoving = false;
        // store coordinates
        _xTouch = (int) event.getX();
        _yTouch = (int) event.getY();

    } else if (event.getAction() == MotionEvent.ACTION_MOVE) {
        _isMoving = true;

        // new offset
        _xOffSet += _xTouch - (int) event.getX();
        _yOffSet += _yTouch - (int) event.getY();

        // make sure it never goes out of bounds
        if (_xOffSet < 0) {
            _xOffSet = 0;
        } else if (_xOffSet > _mapSize * _cellSize - getWidth()) {
            _xOffSet = _mapSize * _cellSize - getWidth();
        }
        if (_yOffSet < 0) {
            _yOffSet = 0;
        } else if (_yOffSet > getHeight()) {
            _yOffSet = _mapSize * _cellSize - getHeight();
        }

        _xTouch = (int) event.getX();
        _yTouch = (int) event.getY();

        findMapEnds();

    } else if (event.getAction() == MotionEvent.ACTION_UP) {
        // touch released
        if (!_isMoving) {
            int column = (int) FloatMath.ceil((_xOffSet + event.getX())
                    / _cellSize) - 1;
            int row = (int) FloatMath.ceil((_yOffSet + event.getY())
                    / _cellSize) - 1;
            Cell cell = _mapCells.get(row).get(column);

            Toast.makeText(getContext(), "Cell id #" + cell.get_id(),
                    Toast.LENGTH_SHORT).show();
        }
    }
    return true;
}

private void findMapEnds() {

    // finds the map end.
    _StartRow = _yOffSet / _cellSize;
    _MaxRow = (int) Math.min(_mapSize, _StartRow + Math.floor(getHeight())
            / _cellSize + 2);

    _StartCol = _xOffSet / _cellSize;
    _MaxCol = (int) Math.min(_mapSize, _StartCol + Math.floor(getWidth())
            / _cellSize + 2);

    _XScrollOffset = (int) (((_xOffSet / (float) _cellSize) - (_xOffSet / _cellSize)) * _cellSize);
    _YScrollOffset = (int) (((_yOffSet / (float) _cellSize) - (_yOffSet / _cellSize)) * _cellSize);
} 
```

# windows-ce - E_SCN_READINCOMPATIBLE 在 MC9090G 上扫描条形码时引发 通知错误

> ID：12719302
> 
> 赞同：2
> 
> 时间：2012-10-04T01:51:12.613
> 
> 标签：windows-ce, motorola-emdk

我正在使用库中的 EMDK 2.5（VS2008 和 VC# 和 .NetCF3.5）Barcode2 类来编写示例应用程序来扫描条形码。我遵循 EMDK 中可用的示例，即 CS_Barcode2Sample1 项目。每次我硬件触发扫描时，都会抛出通知“E_SCN_READINCOMPATIBLE”并且无法检索扫描的数据。该文档没有太多关于 E_SCN_READINCOMPATIBLE 通知的原因以及谷歌搜索的运气。我尝试了几个选项，包括使用 Symbol.Barcode，结果是一样的。我也试过 EMDK 2.3 但结果是一样的。

我已经在这里粘贴了整个代码......

```
public partial class Form1 : Form
    {
        private Barcode2 myBarcode2 = null;

        public Form1()
        {
            InitializeComponent();
            InitBarcode();
        }

        public bool InitBarcode()
        {
            // If the Barcode2 object is already initialized then fail the initialization.
            if (myBarcode2 != null)
            {
                return false;
            }
            else // Else initialize the reader.
            {
                try
                {

                    Symbol.Barcode2.Device[] AvailableDevices = Symbol.Barcode2.Devices.SupportedDevices;
                    if (AvailableDevices.Length == 0)
                    {
                        return false;
                    }

                    if (AvailableDevices.Length == 1)
                    {
                        //get the first available scanner in the list
                        Symbol.Barcode2.Device MyDevice = AvailableDevices[0];
                        // Create the reader, based on selected device.
                        myBarcode2 = new Barcode2(MyDevice);

                        // Attach a scan notification handler.
                        //this.myScanNotifyHandler = new Barcode2.OnScanHandler(myBarcode2_ScanNotify);
                        myBarcode2.OnScan += myBarcode2_ScanNotify;

                        // Attach a status notification handler.
                        //this.myStatusNotifyHandler = new Barcode2.OnStatusHandler(myBarcode2_StatusNotify);
                        myBarcode2.OnStatus += myBarcode2_StatusNotify;
                        myBarcode2.Config.TriggerMode = TRIGGERMODES.HARD;

                        // Submit a scan.
                        myBarcode2.Scan(5000);
                      }
                }
                catch (OperationFailureException ex)
                {
                    MessageBox.Show("Exception Raised 1");
                    return false;
                }
                catch (InvalidRequestException ex)
                {
                    MessageBox.Show("Exception Raised 2");
                    return false;
                }
                catch (InvalidIndexerException ex)
                {
                    MessageBox.Show("Exception Raised 3");
                    return false;
                }
            }
            return false;
        }

        private void myBarcode2_ScanNotify(ScanDataCollection scanDataCollection)
        {
            // Checks if the BeginInvoke method is required because the OnScan delegate is called by a different thread
            if (this.InvokeRequired)
            {
                // Executes the OnScan delegate asynchronously on the main thread
                this.BeginInvoke(new Barcode2.OnScanHandler(myBarcode2_ScanNotify), new object[] { scanDataCollection });
            }
            else
            {
                // Get ScanData
                ScanData scanData = scanDataCollection.GetFirst;

                int i;
                switch (scanData.Result)
                {
                    case Symbol.Barcode2.Results.SUCCESS:
                        String str = scanData.Text;
                        myBarcode2.Config.TriggerMode = TRIGGERMODES.HARD;
                        myBarcode2.Scan(5000);
                        break;

                    case Symbol.Barcode2.Results.E_SCN_READTIMEOUT:
                        break;

                    case Symbol.Barcode2.Results.CANCELED:
                        break;

                    case Symbol.Barcode2.Results.E_SCN_DEVICEFAILURE:
                        i = 93;
                        break;

                    default:
                        if (scanData.Result == Symbol.Barcode2.Results.E_SCN_READINCOMPATIBLE)
                        {
                            // If the failure is E_SCN_READINCOMPATIBLE, exit the application.
                            MessageBox.Show("Fatal Error");
                            this.Close();
                            return;
                        }
                        break;
                }
            }
        }

        private void myBarcode2_StatusNotify(StatusData statusData)
        {
            // Checks if the Invoke method is required because the OnStatus delegate is called by a different thread
            if (this.InvokeRequired)
            {
                // Executes the OnStatus delegate on the main thread
                this.Invoke(new Barcode2.OnStatusHandler(myBarcode2_StatusNotify), new object[] { statusData });
            }
            else
            {
                int i;
                switch (statusData.State)
                {
                    case States.IDLE:
                        break;

                    case States.READY:
                        break;

                    default:
                        break;
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T02:36:55.720

我最近也经历过这个，正如我所观察到的，这可能是由于扫描仪设备被其他应用程序占用，扫描请求已经排队，你可以去内存管理，杀死可疑的应用程序，然后尝试你的应用程序。

请参阅[符号常见问题解答](https://docs.symbol.com/KanisaPlatform/Publishing/886/MCD-01075_f.SAL_Public.html?userId=37)

# macos - 如何从 NSURL 获取路径/目录组件？

> ID：12719303
> 
> 赞同：16
> 
> 时间：2012-10-04T01:51:22.277
> 
> 标签：macos, cocoa, nsurl

我从 NSSavePanel 中检索了一个 NSURL。我现在有了这个 NSURL，它给了我以下信息：

`file://localhost/Users/brett/Documents/asdf%20asdf.json`

现在，我可以很容易地使用以下内容仅检索文件名：

`[[[NSFileManager defaultManager] displayNameAtPath:pathAndFilename] stringByDeletingPathExtension]`

正如预期的那样，这给了我本地化的文件名：`asdf%20asdf`

**那么，我如何获得路径，如下所示：** `file://localhost/Users/brett/Documents/`

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-04-09T17:18:30.023

`-[NSURL URLByDeletingLastPathComponent]`是实现这一目标的最简单方法。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-10-04T01:59:43.410

您可以使用`NSString`方法来处理文件路径。例如，

```
NSString *directory = [[URL absoluteString] stringByDeletingLastPathComponent];
NSString *filename = [[URL absoluteString] lastPathComponent]; 
```

您可以在 Apple Docs 中找到其他有用的方法：[NSString Class Reference](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html) -> **Working with Paths**部分

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-21T12:22:39.197

直接从您的 NSSavePanel 中：

```
NSSavePanel *savePanel;
...
NSString *path = savePanel.directoryURL.path; 
```

# css - 制作列表标题 始终显示为 列表

> ID：12719306
> 
> 赞同：0
> 
> 时间：2012-10-04T01:51:50.930
> 
> 标签：css, html, html-lists, anchor

任何人都可以帮我纠正这个问题：http: [//jsfiddle.net/ShgRr/](http://jsfiddle.net/ShgRr/)以便 div 显示它的内容与 ol 一致吗？

主要问题是正确定位的跨度超出了div。

我确实考虑过让 div 成为一个 li 项目，但这显然是不合语义的。

我想知道的其他事情 - 在锚上使用负边距是否正确，以便它覆盖 li 子弹并使整个链接可点击？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T01:56:40.073

为什么使用`<div>`? 如果您将内容移动到`<li>`具有该类名的新内容中，您的 CSS 将正常工作：http: [//jsfiddle.net/ShgRr/2/](http://jsfiddle.net/ShgRr/2/)

我认为制作`<div>`an`<li>`非常好。`<table>`元素同时包含表头和表行，没有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T10:50:54.087

您可以在 CSS、html 部分中添加此类

```
 div a  span > i
    {
        margin: 0 8px;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T02:06:30.407

“在锚点上使用负边距是否正确，以便它覆盖 li 项目符号并使整个链接可点击？”

如果您不希望将子弹完全移除，则将其完全移除更为正确。

如果你确实想要这些——我不倾向于让子弹本身可点击——与它们发射的任何东西相比，它们都是一个非常小的目标。比项目符号更容易点击文本

# assembly - 汇编比较说明

> ID：12719307
> 
> 赞同：-3
> 
> 时间：2012-10-04T01:51:53.910
> 
> 标签：assembly

这是我们在这个汇编课程介绍中的第一个实验室。我有一个任务，我必须编写嵌入在 c 中的程序集。教授提供了 C 代码，但我们必须编写自己的程序集。任务是比较 3 个值（已放入 eax、ebx 和 ecx）并将最大值和最小值相加并乘以 2。

我写了一个场景，我想知道我是否走在正确的轨道上。

我知道会有4种情况：

*   a > b > c
*   a < b > c
*   a > b < c
*   a < b < c

我写了a>b>c。

这个对吗 ？当我编译教授提供的测试时，我得到了奇怪的答案。例如 eax = 3, ebx = 2, ecx = 1 应该给出 8 的答案，但它给出了一些奇怪的东西。请帮忙，谢谢。

```
cmp eax, ebx
jge agreatb

agreatb:
cmp ebx, ecx
jge bgreatc

bgreatc:
add eax, ecx
mov eax, edx 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T05:16:57.140

暂时忘记任务。

如果有 12345 个值，你被要求找出最高和最低的值，你会怎么做？显而易见的方法是跟踪“当前最高值”和“当前最低值”；对于列表中的每个值，您将检查它是否应该成为新的最高值或新的最低值。

对于这种情况，您可以从“current_highest = value1; current_lowest = value1”开始，然后检查 value2 是高于当前最高值还是低于当前最低值，然后检查 value3，然后是 value4，等等（循环直到到达最后一个价值）。

可以将相同的算法实现为在具有任意数量条目的数组中找到最高和最低值的代码（只要值的数量> = 1）

请注意，值的顺序（例如，如果 a < b < c、a < c < b 等）是无关紧要的 - 无论有多少值，您都不需要知道。

现在，将此方法应用于分配，您只在 3 个值的列表中搜索最高和最低值：

```
current_highest = a;
current_lowest = a;

if(b < current_lowest) current_lowest = b;
else(b > current_highest) current_highest = b;

if(c < current_lowest) current_lowest = c;
else(c > current_highest) current_highest = c; 
```

# jquery - janrain 参与模式弹出窗口在 onProviderLoginToken 事件期间不会关闭

> ID：12719308
> 
> 赞同：2
> 
> 时间：2012-10-04T01:52:15.413
> 
> 标签：jquery, asp.net-web-api, janrain

在我的旅行中，让使用 Janrain 客户端身份验证过程对用户进行身份验证的整个过程正常工作，这是一次漫长的奇怪之旅，但我终于让它工作了，但是......

如何在获得令牌后关闭模式弹出窗口，然后针对我的 WebApi 控制器之一使用 $.ajax get 方法获取用户信息？

整个过程效果很好，我得到了我需要的用户个人资料信息，但是在对我的 WebApi 控制器执行我的 ajax 调用并用数据填充我的页面上的 div 标签后，模态窗口仍然打开，并且在 Facebook 徽标下显示状态说“在登录....”

我还不允许发布图像，但如果您想查看冻结模式的图像，可以在此处查看“http://oi46.tinypic.com/34s1nax.jpg”

帮助！我是否错过了关闭模式的最后一个命令？

这是我的一些代码。

```
(function () {
if (typeof window.janrain !== 'object') window.janrain = {};
window.janrain.settings = {};

janrain.settings.tokenUrl = 'http://localhost:20000/login.html';
janrain.settings.tokenAction = 'event';
janrain.settings.type = 'modal';
janrain.settings.linkClass = 'janrainEngage';

function isReady() { janrain.ready = true; };
if (document.addEventListener) {
    document.addEventListener("DOMContentLoaded", isReady, false);
} else {
    window.attachEvent('onload', isReady);
}

var e = document.createElement('script');
e.type = 'text/javascript';
e.id = 'janrainAuthWidget';

if (document.location.protocol === 'https:') {
    e.src = 'https://rpxnow.com/js/lib/idrinkticket/engage.js';
} else {
    e.src = 'http://widget-cdn.rpxnow.com/js/lib/idrinkticket/engage.js';
}

var s = document.getElementsByTagName('script')[0];
s.parentNode.insertBefore(e, s);
})();

function janrainWidgetOnload() {
janrain.events.onProviderLoginStart.addHandler(function () {
    console.log('Login Start!');
});
janrain.events.onProviderLoginComplete.addHandler(function (response) {
    console.log('Login complete!');
    console.log('response.provider = ' + response.provider);
});
janrain.events.onProviderLoginError.addHandler(function (response) {
    console.log('Login Error!');
    console.log('response.err.code = ' + response.err.code);
    console.log('response.err.msg = ' + response.err.msg);
    console.log('response.origin = ' + response.origin);
    console.log('response.state = ' + response.state);
});
janrain.events.onProviderLoginSuccess.addHandler(function (something) {
    console.log('Login Succcess!');
});
janrain.events.onReturnExperienceFound.addHandler(function (response) {
    console.log('Return Experience Found!');
    console.log('response.name = ' + response.name);
    console.log('response.returnProvider = ' + response.returnProvider);
    console.log('response.welcomeName = ' + response.welcomeName);
});
janrain.events.onProviderLoginToken.addHandler(function (response) {
    console.log('Provider Login Token Returned!');
    console.log('response.token = ' + response.token);

    $.ajax({
        url: "http://localhost:30001/Engage",
        type: "get",
        data: ({ token: response.token }),
        dataType: "json",
        success: function (data) {
            $('#results').append(data.Identifier);
            $('#results').append(data.ProviderName);
            $('#results').append(data.DisplayName);
        },
        error: function (xhr, status, p3, p4) {
            console.log(xhr);
            console.log(status);
            console.log(p3);
        }
    });
});
}

<a class="janrainEngage" href="#">LOGIN</a>
<br /><br />

<div id="results"></div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T02:17:15.357

您可以`janrain.engage.signin.modal.close()`在成功或错误时使用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-17T19:23:57.477

也试试这个，

```
janrain.events.onProviderLoginComplete.addHandler(function (response) {
    janrain.engage.signin.modal.close();
}); 
```

# wmi - 远程服务器上的 WMI 访问（不同域）

> ID：12719312
> 
> 赞同：1
> 
> 时间：2012-10-04T01:52:46.107
> 
> 标签：wmi, mysql-workbench, wmic

我一直在尝试使 MySQL Workbench 的远程服务器管理与我安装在 Windows 2008 R2 服务器上的 WMI 服务一起工作。

我想知道以下语法是否正确且足以检查服务器上是否已启用 WMI 访问。

wmic /node:myserver.com /user:wmi_user /password:123456 systemenclosure 获取序列号

我已经从我的家用笔记本电脑上尝试了上述命令，但是它给出了“RPC 服务器不可用”错误。

到目前为止我在服务器上做了什么：

*   具有 WMI 权限的用户帐户

为 WMI 访问创建了一个单独的用户帐户（用户：wmi_user，它是管理员组的成员）。

*   使用以下命令在防火墙上启用 WMI 流量：

```
netsh advfirewall 防火墙设置规则组 =“windows 管理工具 (wmi)”新启用 = 是

netsh 防火墙设置服务 RemoteAdmin 启用

```

*   CIMOM 设置

HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\WBEM\CIMOM\AllowAnonymousCallback 将值从 0 更改为 1。

*   UAC 设置

我已将 wmi_user 的 UAC 调整为从不通知。

*   DCOM 设置

我读过一篇文章，其中提到如果用户在管理员组中，则无需更改此设置。

如果还有什么我错过的，请告诉我。谢谢你。

# reporting-services - 在已经有 2008 版本的机器上安装 SQL Server Reporting Service (SSRS) 2005，可能/如何？

> ID：12719318
> 
> 赞同：0
> 
> 时间：2012-10-04T01:53:17.760
> 
> 标签：reporting-services, installation, ssrs-2008, reportingservices-2005, side-by-side

我有一台已经安装了 SSRS 2008 的计算机（Windows 7）。我们还需要在其上安装 SSRS 2005。当我运行 2005 的安装程序时，我看到“报告服务”选项灰显。可能是什么原因？如何在这台机器上安装 ssrs 2005？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T05:52:17.547

它们当然可以共存，我在迁移报告时有 3 个版本的服务器。

您可能使用相同的实例名称安装了它，这会使报告服务认为它已经安装并且不允许您安装。IIS 端口也可能存在问题。

当我需要这样做时，我会以相反的方式安装它们（首先是 2005，然后是 2008，然后是 2008 R2），这也可能是由于共享组件的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T03:25:42.877

您是否有特别的原因要使用 2005？您可能拥有的 2005 年现有报告在 2008 年应该可以正常工作。

正如 Davos 指出的那样，它们将共存，但您必须卸载 2008，然后安装 2005，然后重新安装 2008。

# c++ - Eclipse 中的 C/C++ 构建设置

> ID：12719319
> 
> 赞同：1
> 
> 时间：2012-10-04T01:53:22.270
> 
> 标签：c++, eclipse, eclipse-cdt

我承认这是我第一次将 Eclipse 用于 C/C++。我想我会通过项目 -> 属性 -> C/C++ 构建 -> 设置得到一个类似的对话框。

![在此处输入图像描述](../Images/130e29c162a75123be2d1072bff64c35.png)

但我明白了。

![在此处输入图像描述](../Images/b8d1543175044b46fd1bb9955935824d.png)

有人可以告诉我发生了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-09-12T14:56:27.757

如果您使用**File** > **New** > **Makefile Project with Existing Code**创建项目，也会发生这种情况。

要解决它，请右键单击项目，选择**Properties**，导航到**C/C++ Build**，然后选中**Generate Makefiles automatically**

[![在此处输入图像描述](../Images/32dd2d33ccb9242f3830ad0fc462785c.png)](https://i.stack.imgur.com/i9RKa.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T14:55:50.760

更新：这是由于系统路径中有多组 C++ 编译器造成的。通过解析系统路径，我解决了上面的问题。希望这对其他人有帮助。

# vb.net - VB.NET 将 UCS-2 字节转换为 ASCII

> ID：12719325
> 
> 赞同：0
> 
> 时间：2012-10-04T01:55:24.443
> 
> 标签：vb.net, tcp, character-encoding, byte, ascii

好的，所以我正在开发这个程序，它向我的世界服务器发送一个数据包，作为回报，它给了我关于服务器的信息；（当日消息，在线玩家，最大玩家数）

问题是响应在 UCS-2 中

因此，当我将数据包发送到服务器并以字节为单位获得响应时。我如何将其转换为 ascii 以便我可以使用它？

到目前为止，这是我的代码

```
Dim client As New System.Net.Sockets.TcpClient()
client .Connect("178.33.213.54", 25565)

Dim stream As NetworkStream = client .GetStream

'Send Bytes
Dim sendBytes As [Byte]() = {&HFE}
stream.Write(sendBytes, 0, sendBytes.Length)

'Receive Bytes
Dim bytes(client .ReceiveBufferSize) As Byte
stream.Read(bytes, 0, CInt(leclient.ReceiveBufferSize))

'Convert it to ASCII
....

'Output it to Console
.... 
```

这是 PHP、python 和 ruby​​ 中的相同代码。

php -> [https://gist.github.com/1235274](https://gist.github.com/1235274)

蟒蛇-> [https://gist.github.com/1209061](https://gist.github.com/1209061)

红宝石-> [http://pastebin.com/q5zFPcXV](http://pastebin.com/q5zFPcXV)

文档在这里： http: [//www.wiki.vg/Protocol#Server_List_Ping_.280xFE.29](http://www.wiki.vg/Protocol#Server_List_Ping_.280xFE.29)

提前致谢！
维杜

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T02:13:30.863

测试和工作。

```
Dim client As New System.Net.Sockets.TcpClient()

client.Connect("178.33.213.54", 25565)

Dim stream As System.Net.Sockets.NetworkStream = client.GetStream

'Send Bytes
Dim sendBytes As [Byte]() = {&HFE}
stream.Write(sendBytes, 0, sendBytes.Length)

''Receive Bytes
Dim bytes(client.ReceiveBufferSize) As Byte
stream.Read(bytes, 0, CInt(client.ReceiveBufferSize))

Dim sb As New System.Text.StringBuilder
For i As Integer = 3 To bytes.GetUpperBound(0) Step 2
  Dim byt2(1) As Byte
  byt2(0) = bytes(i + 1)
  byt2(1) = bytes(i)

  Dim ii As Integer = BitConverter.ToInt16(byt2, 0)
  'sb.Append(Hex(ii)) 'debug
  sb.Append(ChrW(ii))
Next i
MsgBox(sb.ToString)
stream.Close() 
```

# python - sys.stdout 没有重新分配给 sys.__stdout__

> ID：12719328
> 
> 赞同：10
> 
> 时间：2012-10-04T01:55:45.217
> 
> 标签：python, python-3.x

我对 Python 很陌生，所以我仍然只是在学习这门语言。我遇到的一件事是重新分配 sys.stdout 以更改 print 的默认输出。所以我写了这个作为测试：

```
import sys
sys.stdout = open('log.txt','a')
print('hey')
sys.stdout.close()
sys.stdout = sys.__stdout__
print('hi') 
```

'Hey' 被写入文件，但 'hi' 无处显示。但是，这按预期工作，并且“嘿”被写入文件，“hi”被打印到控制台输出：

```
import sys
sys.__stdout__ = sys.stdout
sys.stdout = open(r'C:\Users\Vincent\Documents\Python\log.txt','a')
print('hey')
sys.stdout.close()
sys.stdout = sys.__stdout__
print('hi') 
```

简而言之，这是一个无关紧要的小问题，我只是想知道是否有明显的原因导致它无法按应有的方式工作。我已经在 Windows 7 Home Premium 上尝试过这个，在 v3.2.3 和我的便携式 python v3.2.1 上使用 IDLE 和 pyscripter。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-07-19T21:06:48.980

在 IDLE 中，`sys.__stdout__`是程序的原始标准输出——它无处可去，因为它不是控制台应用程序。换句话说，IDLE 本身已经被`sys.stdout`其他东西（它自己的控制台窗口）替换了，所以你向后退了两步，`stdout`用`__stdout__`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-07-19T20:52:30.200

我会尝试这种解决方法（根本不使用`sys.__stdout__`，因为您的环境可以使两者都`sys.stdout`不同`sys.__stdout__`）：

```
old_stdout = sys.stdout
sys.stdout = open('log.txt','a')
print('hey')
sys.stdout.close()
sys.stdout = old_stdout 
```

备份参考`sys.stdout`似乎是最安全的方法。在另一个稍微不同的情况下工作：[来自 Jupyter 笔记本的 stdout 重定向正在登陆终端](https://stackoverflow.com/questions/45200375/stdout-redirect-from-jupyter-notebook-is-landing-in-the-terminal)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-01T15:06:34.217

这是一个`sys.std<in|out|err>`为您备份旧状态的上下文管理器，作为对其他答案的补充。

就个人而言，我将它与基于 PyQt5 的程序一起使用，只要应用程序正在运行，标准输出就会重定向到基于文本的小部件。应用程序关闭后，输出将重定向回我的 IDE 控制台。

```
import sys

class SysStdRedirection:
    """Any change done to `sys.std<in|out|err>` inside this context manager will
       be reverted upon exit."""

    def __init__(self):
        for x in ("stdin", "stdout", "stderr"):
            setattr(self, x, getattr(sys, x))

    def __enter__(self):
        pass

    def __exit__(self, error_type=None, value=None, traceback=None):
        for x in ("stdin", "stdout", "stderr"):
            setattr(sys, x, getattr(self, x)) 
```

用法：

```
with SysStdRedirection():
    sys.stdout = open('log.txt', 'a')
    print('hey')
    sys.stdout.close()
print('hi') 
```

# php - 使用 PHP 在前端显示 BLOB 文件

> ID：12719330
> 
> 赞同：-1
> 
> 时间：2012-10-04T01:55:56.237
> 
> 标签：php, mysql, blob

我有一张名为`listing_fees`

我想通过`id`of获取数据`12`

我想要获取的数据是一个`BLOB`名为`[BLOB - 205B]`

文件里面`BLOB`是一个这样的数组：

`a:7:{s:2:"id";s:1:"1";s:5:"label";s:8:"For Sale";s:6:"amount";s:4:"0.00";s:4:"days";s:1:"7";s:6:"images";s:1:"0";s:10:"categories";a:2:{s:3:"all";i:0;s:10:"categories";a:1:{i:0;i:30;}}s:10:"extra_data";N;}`

我对这段代码一无所知。

我想使用 PHP 在我的 html 前端显示它

我将展示什么？

SQL 查询或其他东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T02:04:52.350

该数据采用[PHP 序列化格式](http://www.php.net/manual/en/function.serialize.php)，您可以使用[unserialize对其进行解码](http://www.php.net/manual/en/function.unserialize.php)

例子

```
$data = 'a:7:{s:2:"id";s:1:"1";s:5:"label";s:8:"For Sale";s:6:"amount";s:4:"0.00";s:4:"days";s:1:"7";s:6:"images";s:1:"0";s:10:"categories";a:2:{s:3:"all";i:0;s:10:"categories";a:1:{i:0;i:30;}}s:10:"extra_data";N;}';
$data = unserialize($data);

echo "<pre>" ;
foreach ( $data as $key => $value ) {
    if ($key == 'categories') {
        echo $key, " = ", $value['categories']['0'], PHP_EOL;
    } else {
        echo $key, " = ", $value , PHP_EOL;
    }
} 
```

输出

```
id = 1
label = For Sale
amount = 0.00
days = 7
images = 0
categories = 30
extra_data = 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T02:04:35.313

列中的数据`BLOB`似乎是序列化数据，而不是文件。正因为如此，您不想只是将其“输出”到页面 - 您将希望对其进行反序列化（通过 PHP 的[`unserialize()`](http://php.net/unserialize)方法），然后处理以显示，好吧，但是应该显示它。获取您在问题中显示的*确切*`unserialize()`数据并将其传递给我一个包含以下内容的数组：

```
Array
(
    [id] => 1
    [label] => For Sale
    [amount] => 0.00
    [days] => 7
    [images] => 0
    [categories] => Array
        (
            [all] => 0
            [categories] => Array
                (
                    [0] => 30
                )

        )

    [extra_data] =>
) 
```

查询数据库和检索列的简单设置是：

```
$mysqli = new mysqli('localhost', 'username', 'password', 'db');
$result = $mysqli->query('SELECT column_name FROM listing_fees WHERE id = 12');
$data = $result->fetch_assoc();
$result->close(); 
```

要使用`$data`数组中的数据，您可以执行以下操作：

```
$blob = unserialize($data['column_name']); 
```

现在，您可以根据需要显示数据，使用`$blob['label']`或访问每个值`$blob['days']`。

# c++ - 如何处理 R 中的列表到 Rcpp

> ID：12719334
> 
> 赞同：13
> 
> 时间：2012-10-04T01:56:25.207
> 
> 标签：c++, r, list, rcpp

我在 R 中有一个列表 x<-list(c(1,2,3), c(4,5), c(5,5), c(6))。我想将列表输入到 Rcpp 并将它们作为平均向量 c(2, 4.5, 5, 6) 返回。

我不确定如何处理 Rcpp 中的列表。我收到一条错误消息，有人可以检查我的代码吗？

```
library(inline)

fx = cxxfunction(signature(x='List'), body = 
'
    Rcpp::List xlist(x);
    int n = xlist.size();
    double res[n];

    for(int i=0; i<n; i++) {
        Rcpp NumericVector y(xlist[i]);
        int m=y.size();
        res[i]=0;
        for(int j=0; j<m; j++){
            res[i]=res[i]+y[j]  
        }
    }

  return(wrap(res));
'
, plugin='Rcpp')

x<-list(c(1,2,3), c(4,5), c(5,5), c(6))
fx(x) 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-04T19:41:27.107

这里有几个小错误：

1.  两个语法错误：您需要`Rcpp::NumericVector`for `y`，并且在最后一个循环中缺少分号。
2.  对 C++ 的一个误解：你需要像`std::vector<double> res(n);`在`n`编译时不知道的东西。
3.  你在从列表中实例化你的向量时过于激进/乐观，我在两个语句中做到了这一点。

此版本有效：

```
R> fx <- cxxfunction(signature(x='List'), plugin='Rcpp', body = '  
+     Rcpp::List xlist(x); 
+     int n = xlist.size(); 
+     std::vector<double> res(n);   
+                                 
+     for(int i=0; i<n; i++) {     
+         SEXP ll = xlist[i]; 
+         Rcpp::NumericVector y(ll);  
+         int m=y.size();   
+         res[i]=0;         
+         for(int j=0; j<m; j++){     
+             res[i]=res[i]+y[j]; 
+         }    
+     } 
+       
+   return(Rcpp::wrap(res));    
+ ')  
R> x<-list(c(1,2,3), c(4,5), c(5,5), c(6)) 
R> fx(x)
[1]  6  9 10  6       
R> 
```

*编辑：*这是一个更惯用的版本：

```
fx <- cxxfunction(signature(x='List'), plugin='Rcpp', body = '
    Rcpp::List xlist(x);
    int n = xlist.size();
    Rcpp::NumericVector res(n);

    for(int i=0; i<n; i++) {
        SEXP ll = xlist[i];
        Rcpp::NumericVector y(ll);
        for(int j=0; j<y.size(); j++){
            res[i] += y[j];
        }
    }

    return(res);
') 
```

# android-layout - LinearLayout 不会填充父级；相反，如果适合其中的最小宽度视图

> ID：12719339
> 
> 赞同：2
> 
> 时间：2012-10-04T01:57:20.680
> 
> 标签：android-layout

我有一个看起来像这样的视图：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:paddingTop="0dp"
android:paddingLeft="0dp"
android:paddingRight="0dp"
android:paddingBottom="10dp"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:orientation="vertical">

<RelativeLayout android:id="@+id/header"
    android:layout_height="wrap_content"
    android:layout_width="fill_parent"
    android:orientation="horizontal" 
    android:paddingTop="5dp"
    android:paddingBottom="10dp"
    android:paddingLeft="15dp"
    android:paddingRight="15dp">

    <ImageView android:id="@+id/title_icon"
        android:layout_width="12dp"
        android:layout_height="12dp"
        android:layout_alignParentLeft="true"
        android:layout_centerVertical="true"
        android:layout_gravity="center_vertical"
        android:src="@drawable/title_icon" />

    <LinearLayout android:id="@+id/title_layout"
        android:layout_toRightOf="@id/title_icon"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerVertical="true"
        android:layout_gravity="center_vertical"
        android:layout_marginLeft="10dp"
        android:orientation="vertical" >

        <TextView android:id="@+id/title_text"
            android:text="@string/activity_complete"
            android:layout_height="wrap_content"
            android:layout_width="wrap_content"
            android:layout_gravity="center_vertical"
            android:paddingRight="15dp"
            android:textSize="12dp"
            android:textStyle="bold"/>

    </LinearLayout>

    <TextView android:id="@+id/status_text"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_centerVertical="true"
        android:textSize="8dp" />

</RelativeLayout>

<TextView android:id="@+id/message_text" 
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_gravity="center_horizontal"
    android:layout_marginTop="5dp"
    android:layout_marginLeft="0dp"
    android:layout_marginRight="0dp"
    android:layout_marginBottom="5dp"
    android:paddingLeft="15dp"
    android:textSize="10dp"/>

<ImageView android:id="@+id/main_image"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@color/grey"
    android:padding="5dp"/>

</LinearLayout> 
```

我的问题是主 LinearLayout 视图不 match_parent 或 fill_parent。它似乎只想包含其中最小的项目。在我的情况下，它将导致与 main_image 相同的宽度，切断其他所有内容。但是，如果我将 main_image 设置为 visibility.gone，那么它将匹配 message_text 的宽度。

我已经尝试删除除 main_image 之外的所有内容，并且主 LinearLayout 仍然只适合图像宽度。

另一件事是这个布局被膨胀成另一个设置为fill_parent的LinearLayout。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T21:23:54.830

将 ImageView 包装在另一个 LinearLayout 中解决了这个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-25T21:13:03.810

我刚刚遇到了这个问题——将一个配置为“match_parent”的LinearLayout添加到另一个LinearLayout，但内部布局没有正确填充外部布局。

最初我这样做是为了添加布局：

```
LinearLayout inner = getLayoutInflater().inflate(R.layout.inner, null);
outer.addView(inner, 0); 
```

经过几分钟的恼怒后，我尝试了这个：

```
LinearLayout inner = getLayoutInflater().inflate(R.layout.inner, outer); 
```

并`inner`匹配`outer`父宽度和高度。

# asp.net - Visual Studio 2010：为什么我不能更改网站的完整路径？

> ID：12719346
> 
> 赞同：1
> 
> 时间：2012-10-04T01:58:23.470
> 
> 标签：asp.net, visual-studio-2010, web

我目前有一个解决方案，它最近向 TFS 源代码管理添加了一个新网站。由于创建时出错，网站物理目录如下：

> Z:\Projects\NewWebSite\NewWebSite

相反，它应该如下所示：

> Z:\项目\新网站\

我遇到的问题是在尝试删除具有新物理路径的网站并将其添加到解决方案中时。每次我这样做时，由于某种原因，它会自动引用第一条路径。如果我试图删除该文件夹，它会给我一个错误，说它无法打开路径，因为该文件夹不再存在。

我的解决方案是基本上取消绑定所有内容并从头开始创建新的解决方案，然后将网站重新添加到解决方案中。我担心的是我只是在解决这个问题，并且它仍然存在于 TFS 中的某个地方，等待在他们结帐时搞砸其他人的解决方案。

那么，有谁知道是什么原因造成的，以及解决这种行为的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T03:07:44.653

如果您的解决方案名称与您的项目名称相同，那么这是默认结构。创建新项目时，首先创建具有唯一名称的解决方案，然后将您的项目添加到其中。

无论如何，您确实想要这种结构。出于可扩展性的目的，它就是这样。如果您需要添加其他项目，或者可能将您的操作分成不同的项目（例如 Data vs Web），则可以使用解决方案/项目文件夹设置。

换句话说，不要与之抗争。只需使您的解决方案名称与您的 Web 应用程序名称不同，使其看起来不那么难看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T02:26:47.113

TFS 根本不处理物理位置。当您将工作空间映射到物理路径时，这由您的 TFS 客户端处理。这不是 TFS 处理的事情。

因此，我对您的评论感到困惑。

# ios - iOS 讨论区/评论区 API 或示例？

> ID：12719347
> 
> 赞同：0
> 
> 时间：2012-10-04T01:58:24.237
> 
> 标签：ios, xcode

我正在尝试查找用于在我的应用程序中添加评论功能的代码库示例或示例代码。我已经在我的几个应用程序中成功实现了 Disquser iOS 包装器 (http://bit.ly/iadisquser)，但发现它很难管理。我见过其他包含很酷的评论功能的应用程序，包括 CHIVE Lite 应用程序，它看起来像是在使用 Facebook？有什么提示或建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T07:19:07.163

有一个很好的构建聊天应用程序的教程可以帮助您入门，您可以在这里找到它：http: [//www.ibm.com/developerworks/library/x-ioschat/index.html](http://www.ibm.com/developerworks/library/x-ioschat/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T19:38:05.500

查看[QuickBlox 自定义对象代码示例](http://quickblox.com/developers/SimpleSample-customObjects-ios)。我认为这是你需要的。

它代表用户的笔记，他可以创建和评论。因此，您可以在您的应用程序中实现此评论逻辑并评论您想要的任何项目

# asp.net - ASP.NET 会话状态是否在没有 cookie 的情况下工作？

> ID：12719352
> 
> 赞同：2
> 
> 时间：2012-10-04T01:59:07.687
> 
> 标签：asp.net, cookies, session-state

[根据 MSDN](http://msdn.microsoft.com/en-us/library/ms178581%28v=vs.100%29.aspx)：

> 默认情况下，SessionID 值存储在浏览器的非过期会话 cookie 中。

如果我尝试使用会话状态（我没有使用无 Cookie 会话 ID）并且用户浏览器不接受 cookie，会话状态会起作用吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T02:02:49.813

据此支持：http: [//msdn.microsoft.com/en-us/library/aa479314.aspx](http://msdn.microsoft.com/en-us/library/aa479314.aspx)

```
<sessionState cookieless="true" /> 
```

缺点是会话 ID 被放置在应用程序使用的每个 URL 中：

```
http://yourserver/folder/(session ID here)/default.aspx 
```

有关更多详细信息，请参阅此 SO 答案：[Absolute URL Cookieless](https://stackoverflow.com/questions/3180697/absolute-url-cookieless/3180804#3180804)

# c# - 升级到 .NET 4.5 时出错

> ID：12719353
> 
> 赞同：4
> 
> 时间：2012-10-04T01:59:13.380
> 
> 标签：c#, .net, visual-studio-2012, .net-4.5

我正在尝试从 VS2010 .NET 4 升级到 VS2012 .NET 4.5，当他们尝试构建时，我在设置为 .NET 4.5 的每个项目中都收到以下错误。

无法评估表达式“[Microsoft.Build.Utilities.ToolLocationHelper]::GetPathToStandardLibraries(.NETFramework, ?, '', '')”。版本字符串部分太短或太长。

我在我的代码中找不到对此的任何引用，并且该函数的 msdn 引用没有提供任何提示（[http://msdn.microsoft.com/en-us/library/hh135279.aspx](http://msdn.microsoft.com/en-us/library/hh135279.aspx)）。

有人以前见过这个或知道解决方案吗？

**编辑**

此处列出的解决方案似乎不起作用。[http://social.msdn.microsoft.com/Forums/da-DK/vseditor/thread/8ca4a9b0-742d-487d-ab8c-6c3a80cffd40](http://social.msdn.microsoft.com/Forums/da-DK/vseditor/thread/8ca4a9b0-742d-487d-ab8c-6c3a80cffd40)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T23:55:16.700

不知何故，经过多次尝试，包括重新启动机器和视觉工作室，这开始工作，没有明显的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-07-12T20:13:41.130

卸载您的项目并从 .csproj 文件中删除以下标记：

```
<TargetFrameworkVersion></TargetFrameworkVersion> 
```

并重新加载您的项目，它对我有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-08-27T12:23:33.797

从 4.6.1 升级到 4.7.2 框架时，我遇到了同样的问题。我有很多项目的大解决方案。在构建具有正确`<TargetFrameworkVersion>v4.7.2</TargetFrameworkVersion>`.

问题的原因是 win 应用程序项目使用的其他项目。他们有不正确的框架版本。

# ruby-on-rails - Rails 3将查询结果返回到表单页面的底部

> ID：12719354
> 
> 赞同：3
> 
> 时间：2012-10-04T01:59:27.803
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

我有一个简单的选择表格。从表格中选择一年时，我希望将结果返回到同一页面但在表格下方。有人可以解释如何做到这一点吗？这是表单页面（index.html.erb）

```
<%= form_tag("lookup/show", :method => "get") do %>
    <%= label_tag(:q, "Pub Year :") %>
    <%= collection_select(:lookup, :pubyear, @pubyears, :pubyear, :pubyear) %>
    <%= submit_tag("Find") %>
<% end %> 
```

这是 Lookup 控制器的 show 方法

```
def show
    @lookuprows = Lookup.return_lookup_row(params[:lookup][pubyear])

    respond_to do |format|
       format.html
    end
end 
```

这是结果当前转到的 show.html.erb 页面

```
<tbody class="lkuptbody">
    <% @lookuprows.each do |lkup| %>
       <tr class="lkuprow">
         <td><input type="text" class="lkupcode" value=<%= lkup.codetype %> /></td>
         <td><input type="text" class="lkupdesc" value=<%= lkup.codedesc %> /></td>
         <td><input type="text" class="lkuprmks" value=<%= lkup.rermark %> /></td>
       </tr>
</tbody> 
```

我知道我必须制作部分 _show.html.erb，但是如何从表单页面 (index.html.erb) 中引用它？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T02:09:47.933

如果您希望结果显示在同一页面上但在表单下方，则表单应将结果发送到`index`操作，而不是`show`操作：

```
<%= form_tag("lookup", :method => "get") do %>
  <%= label_tag(:q, "Pub Year :") %>
  <%= collection_select(:lookup, :pubyear, @pubyears, :pubyear, :pubyear) %>
  <%= submit_tag("Find") %>
<% end %> 
```

在你的 LookupController 中：

```
def index
  @lookuprows = Lookup.return_lookup_row(params[:lookup][pubyear]) unless params[:lookup].nil?
  ...
end 
```

然后只需将表格 HTML 附加到显示页面中的表单下方（在 index.html.erb 中），并用`if`块包裹以过滤掉`@lookuprows`nil 的情况：

```
<% if @lookuprows %>
  <tbody class="lkuptbody">
    <% @lookuprows.each do |lkup| %>
      <tr class="lkuprow">
        <td><input type="text" class="lkupcode" value=<%= lkup.codetype %> /></td>
        <td><input type="text" class="lkupdesc" value=<%= lkup.codedesc %> /></td>
        <td><input type="text" class="lkuprmks" value=<%= lkup.rermark %> /></td>
      </tr>
    <% end %>
  </tbody>
<% end %> 
```

如果有的话，这会将结果显示`@lookuprows`为表格，如果没有，则不会显示表格。

您可能希望将该表格 HTML 放在单独的部分中以清理视图，但这对于您提出的问题并不是必需的。

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T02:14:50.097

您想避免重新加载页面并将其放在表单下吗？以下是使用 ajax 的方法：

索引.html.erb。

```
<%= form_tag("lookup/show", :method => "get", :data => {:remote => true, :type => "html"}, :id => "lookup_form") do %>
  <%= collection_select(:lookup, :pubyear, @pubyears, :pubyear, :pubyear, id: 'lookup_show_select') %>
   <%# Add More fields here %>
  <%= submit_tag "Submit" %>
<% end %>
<div id='lookup_show_result'></div> 
```

在 app/assets/lookup.js.coffee 中。如果不使用coffeescript，翻译成JS很容易，问吧。

```
$ ->
  $(document).on 'ajax:success', '#lookup_form', (evt, data) ->
    $('#lookup_show_result').html(data) 
```

控制器不变，只是根据所有参数处理请求

这是一个最小的未经测试的版本，告诉我你是否被卡住了

附带说明一下，我开始开发一个 gem，它将在这里使用 jQuery 扩展 Rails 的 UJS 实现，以便使用 ajax 更轻松地进行标准更新/删除等： [jQuery UJS 扩展](https://github.com/anthonyalberto/jquery-ujs-extended)

# ruby-on-rails - 无法安装 mysql2 gem ...（自制软件中的其他内容）

> ID：12719355
> 
> 赞同：2
> 
> 时间：2012-10-04T01:59:36.340
> 
> 标签：ruby-on-rails, ruby-on-rails-3, gem, homebrew, mysql2

好吧，对于问一个显然被问过多次的问题感到超级愚蠢。提前道歉。

我正在关注本教程：[http ://squarism.com/2011/04/01/how-to-write-a-ruby-rails-3-rest-api/](http://squarism.com/2011/04/01/how-to-write-a-ruby-rails-3-rest-api/)

它需要mysql2 ...

尝试通过“gem install mysql2”安装它

这就是我得到的：

```
Building native extensions.  This could take a while...
ERROR:  Error installing mysql2:
ERROR: Failed to build gem native extension.

    /Users/name_withheld/.rvm/rubies/ruby-1.9.3-p194/bin/ruby extconf.rb
checking for rb_thread_blocking_region()... yes
checking for rb_wait_for_single_fd()... yes
checking for mysql_query() in -lmysqlclient... no
checking for main() in -lm... yes
checking for mysql_query() in -lmysqlclient... no
checking for main() in -lz... yes
checking for mysql_query() in -lmysqlclient... no
checking for main() in -lsocket... no
checking for mysql_query() in -lmysqlclient... no
checking for main() in -lnsl... no
checking for mysql_query() in -lmysqlclient... no
checking for main() in -lmygcc... no
checking for mysql_query() in -lmysqlclient... no
*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
--with-opt-dir
--with-opt-include
--without-opt-include=${opt-dir}/include
--with-opt-lib
--without-opt-lib=${opt-dir}/lib
--with-make-prog
--without-make-prog
--srcdir=.
--curdir
--ruby=/Users/name_withheld/.rvm/rubies/ruby-1.9.3-p194/bin/ruby
--with-mysql-config
--without-mysql-config
--with-mysql-dir
--without-mysql-dir
--with-mysql-include
--without-mysql-include=${mysql-dir}/include
--with-mysql-lib
--without-mysql-lib=${mysql-dir}/lib
--with-mysqlclientlib
--without-mysqlclientlib
--with-mlib
--without-mlib
--with-mysqlclientlib
--without-mysqlclientlib
--with-zlib
--without-zlib
--with-mysqlclientlib
--without-mysqlclientlib
--with-socketlib
--without-socketlib
--with-mysqlclientlib
--without-mysqlclientlib
--with-nsllib
--without-nsllib
--with-mysqlclientlib
--without-mysqlclientlib
--with-mygcclib
--without-mygcclib
--with-mysqlclientlib
--without-mysqlclientlib

Gem files will remain installed in /Users/name_withheld/.rvm/gems/ruby-1.9.3-p194/gems/mysql2-0.3.11 for inspection.
Results logged to /Users/name_withheld/.rvm/gems/ruby-1.9.3-p194/gems/mysql2-0.3.11/ext/mysql2/gem_make.out 
```

所以，四处逛逛，看到这个解决方案被多次提出：

```
sudo apt-get install libmysql-ruby libmysqlclient-dev 
```

不幸的是，我得到：“找不到命令”......

有点不知所措……

想通过自制软件来做（因为它看起来“简单”）......但是有几个问题......

*   实在是太陌生了……
*   不知道我有没有...

所以，尝试 brew update 看看我会得到什么......这就是我得到的：

```
/usr/local/.git: Permission denied
Error: Failure while executing: git init 
```

所以...试图从这里通过此代码删除它：[https ://gist.github.com/1173223](https://gist.github.com/1173223)

它似乎没有做任何事情，而且它有点冻结，所以退出它......

不知道现在该做什么...首要任务显然是尽可能安装mysql2 gem ...自制软件只是附带的东西...

这里需要任何其他信息吗？我的问题需要任何澄清吗？抱歉，我不是故意让这个问题这么久！只是试图覆盖尽可能多的基地。

提前致谢。

哦，我的mac版本是10.6.8，如果这有什么不同的话......

刚刚尝试了另一件事：“brew install mysql”（通过另一个stackoverflow问题）

这就是我得到的：

```
Error: Cannot write to /usr/local/Cellar 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T02:50:31.777

一些东西：

`apt-get`是 Linux 的软件包安装工具，因此这些命令不适用于您的 Mac。

您的`/usr/local`目录存在权限问题，导致 和 出现`brew update`错误`brew install`。要解决此问题，您可以使用以下命令授予自己所有权：

```
sudo chown -R $USER /usr/local 
```

对此有一些警告，因此请查看此线程：[在 Homebrew 中安装错误](https://stackoverflow.com/questions/4804169/installing-in-homebrew-errors)

接下来，您没有`mysql`安装。`mysql2` *gem*没有`mysql`安装；它只是一个 Ruby 库，允许您`mysql`使用 Ruby 代码连接到正在运行的进程。我不相信您可以安装 gem，除非该进程已安装并正在运行，这解释了来自`gem install mysql2`.

因此，更新`/usr/local`权限后，请重试`brew install mysql`并按照说明运行服务。如果您看到`mysqld`或`mysqld_safe`守护进程正在使用类似`ps ax | grep mysqld`. 假设这有效，那么您应该能够安装`mysql2`gem。

# c++ - 使用哪个版本的 cl.exe？

> ID：12719360
> 
> 赞同：0
> 
> 时间：2012-10-04T01:59:55.370
> 
> 标签：c++, windows, visual-c++

我有一些不寻常的设置。我只是安装了编译器，并将 sdk 安装在自定义位置。在我的 /VC/bin 文件夹中，我有一个 cl.exe 文件。另外，我有一堆目录和其他 cl.exe 编译器。我一直在运行版本 VC/bin/cl.exe 文件夹，但遇到了一些运行时错误。

错误是`"the application was unable to start correctly".`

我在想我可能需要运行其他之一？其他文件夹是：

```
[1033]
[amd64]
[ia64]
[x86_amd64]
[x86_ia64] 
```

所有这些文件夹似乎都有相同文件的版本。是关于我自己的架构还是我所针对的架构的机器？

我正在运行 Windows Server 2008 64 位。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T02:22:04.707

两者都是。AMD64 目录包含一个在 AMD64 上运行并以 AMD64 为目标的编译器。IA64 目录同样（在/目标 IA64 上运行）。x86_XXX 目录包含在 x86 上运行并针对其他体系结构（分别为 AMD64 或 IA64）的编译器。至少如果没有记忆，1033 目录应该包含 32 位编译器（即，在 x86 上运行并以 x86 为目标）。

为了使事情正常运行，您的路径需要 VC++`bin`目录，然后是 SDK`bin`目录，然后是 VS`bin`目录。

# ios - iOS 6 MKMapItem 在 MKMapView 中加载

> ID：12719363
> 
> 赞同：-2
> 
> 时间：2012-10-04T02:00:39.947
> 
> 标签：ios, xcode, ios6-maps

我想知道在 iOS 6 中是否可以启动嵌入到应用程序本身内的 MKMapView 中的 MKMapItem 而无需启动 MapApp？或者我是否必须调用 URL 才能将其嵌入到 Web 视图中？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T02:05:56.477

你为什么想这么做？MKMapItem 是*关于*与地图应用程序通信的，因此除非在这些情况下，否则谈论 MKMapItem 是没有意义的。如果您想在自己的应用程序中显示地图，在某个点放置注释等，请继续这样做，就像在 iOS 5 中一样。

# sql-server - 在 SQL Azure（联合）中使用 guid 作为表上的聚集索引有哪些替代方法

> ID：12719365
> 
> 赞同：1
> 
> 时间：2012-10-04T02:01:04.337
> 
> 标签：sql-server, azure-sql-database

我目前正在开展一个项目，该项目需要使用 SQL Azure 数据库来存储即将推出的应用程序的数据。该项目的目标之一是能够利用 SQL Azure 中的联合（分片）。该项目的另一个既定目标是如果客户选择此方案，则能够在本地硬件上运行此应用程序。

我面临的“障碍”之一是联邦缺乏对 IDENTITY 的支持。

[http://blogs.msdn.com/b/cbiyikoglu/archive/2011/06/20/id-generation-in-federations-identity-sequences-and-guids-uniqueidentifier.aspx](http://blogs.msdn.com/b/cbiyikoglu/archive/2011/06/20/id-generation-in-federations-identity-sequences-and-guids-uniqueidentifier.aspx)

虽然我理解*为什么*Azure 不支持 IDENTITY，但我似乎有一个心理障碍，即接受使用 GUID 作为聚集索引是一个好主意。

[聚集和非聚集索引性能](https://stackoverflow.com/questions/6812307/clustered-and-nonclustered-indexes-performance)

我已经在上面的第一个链接中执行了示例测试，并确认在将记录插入到具有 guid 作为聚集索引的表中与将相同数量的记录插入到具有用作聚集索引的 int 标识字段。

但是，由于我还需要支持本地安装，我认为可以肯定地说，当使用 guid 作为聚集索引而不是使用 int 标识时，本地性能会受到影响。

除了与性能相关的问题外，我还担心使用 16 字节宽的 guid 作为聚集索引与使用 4 字节宽的整数作为聚集索引。当然，磁盘空间相对便宜，但这仍然会很快增加（而且可能是不必要的）。

我意识到我最终将不得不在需要支持这两个既定项目目标的基础上做出权衡，但我希望做出我能做出的最明智的决定。

除了使用中间层 id 生成器之外，还有哪些替代方法可以在 Azure 上使用 Guid 作为聚集索引（和 \ 或主键）同时仍然使用联邦？

或者，我是否担心使用 Guid 作为离基的聚集索引（我承认他们很可能是这样）？如果是这样，为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T04:32:21.930

显然，在 SQL Azure 中使用 GUID 不会产生与本地 SQL Server 安装相同的性能问题。

> 许多人的经验表明 GUID（唯一标识符）不适合集群键，因为它们不会被排序并导致页面拆分，从而导致更高的延迟和碎片？在 SQL Azure 上不行
> 
> [http://blogs.msdn.com/b/cbiyikoglu/archive/2012/05/17/id-generation-in-federations-identity-sequences-and-guids-uniqueidentifier.aspx](http://blogs.msdn.com/b/cbiyikoglu/archive/2012/05/17/id-generation-in-federations-identity-sequences-and-guids-uniqueidentifier.aspx)

所以我可能会选择Guid的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T10:15:50.267

您对 16 字节 Guid 与 4 字节 Int 的烦恼是对的（我也这样做）。然而，有好的一面——联邦使您能够大规模扩展 DB 层。

现在问题 - 根据[Online Documentation](http://msdn.microsoft.com/en-us/library/windowsazure/hh597470.aspx)，Federation Distribution 类型只能是以下之一：

> INT、BIGINT、UNIQUEIDENTIFIER 或 VARBINARY(n)，其中 n 最大为 900

所以我认为 UNIQUEIDENTIFIER 确实是您应用程序的唯一选择。

在应用程序级别使用任何类型的 id 生成器都会引入单点故障/单点“崩溃”或瓶颈，这显然是 SQL Azure Federations 试图解决的问题。所以我不会使用任何 ID 生成逻辑，而不是应用程序端的 Guid.NewGuid() 或数据库端的 NEWID()。

至于 UNIQUEIDENTIFIER 对本地解决方案的性能影响，我不能说，这是一个单独的问题。

# vxworks - 我可以使用 vxWorks 引导加载程序来加载不同版本的 vxWorks 映像吗

> ID：12719366
> 
> 赞同：0
> 
> 时间：2012-10-04T02:01:06.173
> 
> 标签：vxworks

我有一块板子，上面有一个旧的 VxWorks 6.5 引导加载程序，通过 ftp 加载图像。如果我在为 VxWroks 6.7（或更高版本）构建的 ftp 上放置一个新图像，那应该可以工作。到目前为止，我的测试似乎表明没有。但是，我还不相信我的新内核是好的。

编辑：为了排除故障，我构建了一个 VxWorks 6.7 引导加载程序并制作了一张新的引导软盘。我遇到的第一个问题是我的 VxWorks 映像在板支持包 (BSP) 的某个地方崩溃。我还没有到我调整配置以使用 6.5 引导加载程序加载它的部分。看来我要对板子附带的 BSP 进行一段时间的故障排除。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T16:00:11.353

我知道 6.5 Bootloader 与 6.7 VxWorks 映像配合得很好。

但是，您必须确保 vxWorks 映像的设置与引导加载程序的设置相匹配。主要的有：

*   RAM 设置：RAM_HIGH/RAM_LOW 等...
*   sysPhysMemTop(),
*   BOOTLINE 地址

如果您使用 ED&R 框架，匹配 RAM 配置很重要。

# postgresql - 使用 JPA 获取最后插入记录的主键

> ID：12719368
> 
> 赞同：0
> 
> 时间：2012-10-04T02:01:18.573
> 
> 标签：postgresql, jpa, java-ee-6

我一直在使用 JPA 将实体插入数据库，但遇到了一个问题，我需要进行插入并获取最后插入的记录的主键。

使用 PostgreSQL，我将使用一个返回记录 ID 的 INSERT RETURNING 语句，但是通过实体管理器执行所有这些操作，我知道的唯一方法是使用 SELECT CURRVAL。

所以问题就变成了，我有几个数据源通过 OpenMQ 将数据发送到消息驱动的 bean（通常每个源一次发送 10-100 条消息），在这个 MDB 中，我通过实体管理器将其保存到 PostgreSQL。正是在这一点上，*我认为*会有这么多插入会产生“类似竞争条件”的效果，以至于我不一定会使用 SELECT CURRVAL 获得最后一条记录 id。

我的 MDB 通过如下所示的实体管理器保留 3 个实体 bean。

任何有关如何更好地做到这一点的帮助都非常感谢。

```
public void onMessage(Message msg) {
    Integer agPK = 0;
    Integer scanPK = 0;
    Integer lookPK = 0;

    Iterator iter = null;
    List<Ag> agKeys = null;
    List<Scan> scanKeys = null;

    try {
        iag = (IAgBean) (new InitialContext()).lookup(
                "java:comp/env/ejb/AgBean");

        TextMessage tmsg = (TextMessage) msg;

        // insert this into table only if doesn't exists
        Ag ag = new Ag(msg.getStringProperty("name"));

        agKeys = (List) (iag.getPKs(ag));

        iter = agKeys.iterator();

        if (iter.hasNext()) {
            agPK = ((Ag) iter.next()).getId();
        }
        else {
            // no PK found so not in dbase, insert new 
            iag.addAg(ag);
            agKeys = (List) (iag.getPKs(ag));
            iter = agKeys.iterator();

            if (iter.hasNext()) {
                agPK = ((Ag) iter.next()).getId();
            }
        }

        // insert this into table always
        iscan = (IScanBean) (new InitialContext()).lookup(
                "java:comp/env/ejb/ScanBean");

        Scan scan = new Scan();
        scan.setName(msg.getStringProperty("name"));
        scan.setCode(msg.getIntProperty("code"));

        iscan.addScan(scan);

        scanKeys = (List) iscan.getPKs(scan);

        iter = scanKeys.iterator();

        if (iter.hasNext()) {
            scanPK = ((Scan) iter.next()).getId();
        }

        // insert into this table the two primary keys above

        ilook = (ILookBean) (new InitialContext()).lookup(
                "java:comp/env/ejb/LookBean");

        Look look = new Look();

        if (agPK.intValue() != 0 && scanPK.intValue() != 0) {
            look.setAgId(agPK);
            look.setScanId(scanPK);

            ilook.addLook(look);
        }
// ... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T03:05:31.957

JPA 规范要求在持久化之后，如果正在使用 ID 生成策略，则使用有效 ID 填充实体。你不必做任何事情。

# google-apps-script - 如何确定当前用户是否有权访问特定文件夹？

> ID：12719370
> 
> 赞同：0
> 
> 时间：2012-10-04T02:01:59.480
> 
> 标签：google-apps-script

我尝试了不同的方法但没有运气

```
var user = Session.getUser();
var userEmail = user.getEmail();
var viewers = someFolder.getViewers()
return (user in viewers) 
```

还有这个

```
return (userEmail in viewers)
return (viewers.indexOf(userEmail) != -1) 
```

这可能微不足道，但对我来说不是

谢谢，福斯托

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T04:34:57.983

Folder.getViewers方法返回[用户](https://developers.google.com/apps-script/class_folder#getViewers)列表，您的代码搜索电子邮件，该电子邮件是作为对象的用户列表中的字符串。一个解决方案是

```
function testUser() {
  var bUserFound = false;
  var user = Session.getUser();
  var userEmail = user.getEmail();
  var viewers = someFolder.getViewers();
  for (var i = 0; i < viewers.length; i++) {
    var viewer = viewers[i];
    if (viewer.getEmail() == userEmail) {
      bUserFound = true;
      break;
    }
  }
  return bUserFound;
} 
```

# azure - 来自 Azure 辅助角色的长时间运行的出站 HTTP 请求

> ID：12719371
> 
> 赞同：1
> 
> 时间：2012-10-04T02:02:10.350
> 
> 标签：azure, azure-worker-roles, azure-web-roles

鉴于 Azure 会不时从角色中删除您的实例并关闭它，有没有办法从 Azure 内部执行长时间运行的 HTTP 请求？通常，这些将由 Worker Role 启动。

某些第 3 方 Web API 所用的时间超过了 Azure 在终止您的实例时向您发出警告的 5 分钟。

# shell - 如何在 shell 脚本中创建堆栈？

> ID：12719375
> 
> 赞同：5
> 
> 时间：2012-10-04T02:02:56.220
> 
> 标签：shell, stack, sh

我需要在 shell 脚本中创建一个堆栈，以便推送要在循环中处理的值。第一个要求是这必须以可移植的方式实现，因为我想将脚本用作可移植的安装程序（至少在类 Unix 操作系统之间）。第二个要求是它需要能够在循环内部进行更改，因为新信息可以在循环处理条目时以递归方式出现。第三个要求是每个条目我有不止一行的信息（这个多是一个固定的数字，如果不是的话可以根据第一行的信息来计算）。

我的尝试是使用堆栈文件：

```
#!/bin/sh

echo "First entry" > stack.txt
echo "More info for the first entry" >> stack.txt
echo "Even more info for the first entry" >> stack.txt

while read ENTRY < stack.txt; do
    INFO2=`tail -n +2 stack.txt | head -n 1`
    INFO3=`tail -n +3 stack.txt | head -n 1`

    tail -n "+4" stack.txt > stack2.txt

    # Process the entry...

    # When we have to push something:
    echo "New entry" > stack.txt
    echo "Info 2" >> stack.txt
    echo "Info 3" >> stack.txt

    # Finally, rebuild stack
    cat stack2.txt >> stack.txt
done 
```

这很有效，只是感觉不对。有没有更“hacky”的方法来做到这一点？

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T02:13:23.593

在此处查看“示例 27-7。空数组和空元素”部分。具体来说，评论说，上面是“推”，“流行”是：

[http://tldp.org/LDP/abs/html/arrays.html](http://tldp.org/LDP/abs/html/arrays.html)

如果您想为每个元素编码多行，我建议您使用 base64 或 JSON 对这些行进行编码。您还可以使用 url 编码或使用 echo 转义字符。

由于您需要使用数组，因此您可以在 sh 中使用以下数组示例：

[http://www.linuxquestions.org/questions/linux-general-1/how-to-use-array-in-sh-shell-644142/](http://www.linuxquestions.org/questions/linux-general-1/how-to-use-array-in-sh-shell-644142/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T01:37:18.017

与使用文件相比，使用目录并将每个项目存储在自己的文件中似乎更容易。例如：

```
#!/bin/sh 

count=0
push() { echo "$*" > $stackdir/item.$((++count)); }
pop() { 
    if test $count = 0; then
        : > $stackdir/data
    else
        mv $stackdir/item.$((count--)) $stackdir/data
    fi
}
trap 'rm -rf $stackdir' 0
stackdir=$( mktemp -d ${TMPDIR-/tmp}/stack.XXXX )

push some data
push 'another
data point, with
multiple lines'

pop
# Now $stackdir/data contains the popped data
cat $stackdir/data   # Print the most recently item pushed
push yet more data
pop
cat $stackdir/data   # Print 'yet more data'
pop
cat $stackdir/data 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-04T16:44:19.680

不幸的是，我认为 cat 的解决方案行不通。它可能适用于 Linux，但我使用的是 FreeBSD，并且我尝试使用 cat 导入临时文件的内容，但它不断失败。

cat 的问题（至少在 FreeBSD 中）是它导致 shell 将其输出解释为文字命令，并且还会跳过某些字符，这又会导致问题。

我最终的解决方案是将上述临时文件转换为变量的持有者，然后使用 source 命令导入它们。这行得通，但我不喜欢它；主要是因为我必须对 say 进行一些难看的切割，以便在数据前面加上变量名，并将其括在引号中。

因此，在数据文件中，您将拥有：-

```
variable=foobar 
```

然后在脚本中，我会做任何为变量创建输出的操作，然后将其输入脚本将使用：-

```
source datafile 
```

此时我可以使用该变量。

尽管如此，即使这并不像堆栈，它也可以存储数据。如果可以避免的话，我也不喜欢在 shell 脚本中使用单独的变量；主要是因为再次，这意味着诉诸丑陋的替代黑客，并且调试起来很烦人。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-12-21T23:42:10.160

这应该是非常跨平台的。它不使用数组，因此可以在较旧的 shell 版本上工作。

```
Push(){ let Stack++;eval "Item$Stack=\"$1\"";}
Pop(){ eval "echo -e \$Item$Stack;unset Item$Stack";let Stack--;}
Append(){ Push "`Pop`\n$1";} 
```

`Push``$Item1`将数据放入, `$Item2`,等变量中`$Item3`。像这样使用它：

```
Push data; Push 'more data'; Push "remember to escape \"quotes\"" 
```

`Pop`在打印其内容后，它本身会破坏编号最高的`$Item`变量。要将内容存储在另一个变量中，请执行以下操作：

```
Variable=`Pop` 
```

`Append`在堆栈顶部的变量中添加一行。例如：

```
Push "too much is always better than not enough"
Append "but it's almost as bad" 
```

`$Stack`存储堆栈的高度。由于这些函数中没有错误处理，因此如果存在堆栈下溢，则需要重置它。更好的是，您可以检查它以防止出现 - 不要`Pop`或`Append`除非`$Stack`是 1 或更多。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2017-06-30T00:38:58.157

Bashisms很恶心，不是吗？如果您的程序中需要数组，那么您需要使用...汇编程序*（开玩笑）*！好吧，这就是我在 POSIX Shell 中实现堆栈的方式：

```
#!/bin/sh

# --------------------
# Stack implementation
# --------------------

s=""
stk=""
STACK_MAX_SIZE="65536"

# Delete all values from the stack:
stack_clear () {
    s=""
    stk=""
}

# To push a value into the stack:
stack_push () {
    local counter
    local cnt
    counter=$(echo -n "${s}" | wc --bytes)
    cnt=$(echo -n "${counter}" | wc --bytes)
    # ----- Internal check begin -----
    check=$(echo -n "${cnt}" | wc --bytes)
    if test "${check}" != "1"
    then
        echo "Internal error: it is real to meet such a long string..."
        exit 2s
    fi
    # ----- Internal check end -----
    stk=$(echo -n "${stk}${s}${counter}${cnt}")
    local check
    check=$(echo -n "${stk}" | wc --bytes)
    if test "${check}" -gt "${STACK_MAX_SIZE}"
    then
        echo "Error: stack overflow."
        exit 1
    fi
}

# To pull a value from the stack:
stack_pop () {
    local counter
    local cnt
    if test "${stk}" = ""
    then
        echo "Error: trying to pop from an empty stack."
        exit 1
    fi
    cnt=$(echo -n "${stk}" | tail --bytes=1)
    stk=$(echo -n "${stk}" | head --bytes=-1)
    counter=$(echo -n "${stk}" | tail --bytes=${cnt})
    stk=$(echo -n "${stk}" | head --bytes=-${cnt})
    s=$(echo -n "${stk}" | tail --bytes=${counter})
    stk=$(echo -n "${stk}" | head --bytes=-${counter})
    # ----- Internal check begin -----
    local check
    check=$(echo -n "${s}" | wc --bytes)
    if test "${check}" != "${counter}"
    then
        echo "Internal error: the stack is damaged."
        exit 2
    fi
    # ----- Internal check end -----
}

# ---------------
# The entry point
# ---------------

# Push "one", "two", "three" into the stack:
s="one"; stack_push
s="two"; stack_push
s="three"; stack_push

# Extract all the data from the stack:
while test "${stk}" != ""
do
    stack_pop
    echo "${s}"
done 
```

# php - Drupal 7 异常 'EntityMalformedException' 试图运行搜索索引 cron

> ID：12719384
> 
> 赞同：2
> 
> 时间：2012-10-04T02:04:40.040
> 
> 标签：php, drupal, cron

我有一个 Drupal 7 站点，我正在努力寻找解决以下问题的方法。

我的所有 cron 任务都运行良好，但搜索索引 cron。它在日志中产生此错误并停止索引。看起来它与`entity_extract_ids()`field.multilingual.inc 中的函数有关，但我不知道从哪里开始。这是错误日志：

```
exception 'EntityMalformedException' with message 'Missing bundle property on entity of type node.' in /home/xxxxx/public_html/includes/common.inc:7562 
Stack trace: 
#0 /home/xxxxx/public_html/modules/field/field.multilingual.inc(268): entity_extract_ids('node', Object(stdClass)) 
#1 /home/xxxxx/public_html/modules/field/field.attach.inc(1111): field_language('node', Object(stdClass), NULL, 'en')
#2 /home/xxxxx/public_html/modules/node/node.module(1358): field_attach_prepare_view('node', Array, 'search_index', 'en') 
#3 /home/xxxxx/public_html/modules/node/node.module(1284): node_build_content(false, 'search_index', 'en') 
#4 /home/xxxxx/public_html/modules/node/node.module(2668): node_view(false, 'search_index') 
#5 /home/xxxxx/public_html/modules/node/node.module(2650): _node_index_node(Object(stdClass)) 
#6 [internal function]: node_update_index() 
#7 /home/xxxxx/public_html/includes/module.inc(826): call_user_func_array('node_update_ind...', Array) 
#8 /home/xxxxx/public_html/modules/search/search.module(363): module_invoke('node', 'update_index') 
#9 [internal function]: search_cron()
#10 /home/xxxxx/public_html/sites/all/modules/ultimate_cron/ultimate_cron.module(726): call_user_func('search_cron') 
#11 [internal function]: _ultimate_cron_run_hook('search_cron', Array)
#12 /home/xxxxx/public_html/sites/all/modules/background_process/background_process.module(428): call_user_func_array('_ultimate_cron_...', Array)
#13 [internal function]: background_process_service_start('ultimate_cron%3...') 
#14 /home/xxxxx/public_html/includes/menu.inc(516): call_user_func_array('background_proc...', Array) #15 /home/xxxxx/public_html/index.php(21): menu_execute_active_handler() 
#16 {main} 
```

任何帮助或见解将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-18T23:57:54.927

我会告诉你我是如何修复它的。

在尝试索引搜索后（因此在 cron 运行之后），我在监视日志（最近的日志消息）中收到 EntityMalformedException: Missing bundle property on entity of type node 错误。在我的指数是 48% 之前，在 cron 运行之后它保持不变。

我做了很多事情，其他建议对我没有帮助，但最后我这样做并建议你：

1.  备份你的数据库！！！
2.  转到 phpMyAdmin，到“运行 sql”部分。
3.  放在这里 "SELECT n.nid FROM node n LEFT JOIN search_dataset d ON d.type = 'node' AND d.sid = n.nid WHERE d.sid IS NULL OR d.reindex <> 0 ORDER BY d.reindex ASC, n.nid ASC LIMIT 0,1"
    如果你有表前缀，别忘了把它放在这里。
4.  结果，您将获得一排带有nid的信息，请记住。
5.  转到节点表并在此处运行“SELECT * FROM node WHERE nid=your-nid”，其中 your-nid 是步骤 3 中的 nid
6.  尝试打开 your-website/node/your-nid - 对我来说，我收到“404 错误”
7.  返回 phpMyAdmin 并删除此行
8.  再次运行 cron

就我而言，我这样做了 7-8 次以从数据库中删除所有“坏”节点并最终获得 100% 索引

如果您无权访问 phpMyAdmin，我想您可以这样做：

打开PHP过滤模块和备份数据库创建节点类型的页面例如，正文添加代码

```
<?php
$result = db_query_range("SELECT n.nid FROM {node} n LEFT JOIN {search_dataset} d ON d.type = 'node' AND d.sid = n.nid WHERE d.sid IS NULL OR d.reindex <> 0 ORDER BY d.reindex ASC, n.nid ASC", 0, 1);
echo $result;
?> 
```

当然选择“PHP过滤器”

单击“预览”您应该会在屏幕上看到节点 ID。像在 phpMyAdmin 说明的第 6 步中一样对其进行测试并记住现在您可以通过添加到正文来删除它

```
<?php 
$nid = "your-nid";
db_delete('node')
  ->condition('nid', $nid)
  ->execute();
?> 
```

再次单击预览再次运行 Cron

上面的代码我没有测试，所以如果你会使用它，如果它有效，请在此处发布

谢谢你，快乐索引;）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-10T20:13:55.350

此错误，尤其是由搜索（例如 Apache Solr）引起的错误与已编入索引的节点有关，但在 Drupal 中不再存在。

这可能发生在以下情况：

*   节点（也包括术语或用户）已从 Drupal 中删除，但仍在 Solr 中建立索引，
*   Drupal 的多个实例共享同一个 Solr，因此某些节点由不同的实例索引，但它们不在数据库中，

解决方案包括：

*   清除 Solr 索引和缓存，然后再次重新索引节点，
*   如果存在故障节点 - 重新保存它们会有所帮助，
*   从你的回溯追踪哪个节点加载失败并尝试手动加载它（例如`drush ev "var_dump(node_load(12));"`）以查看它失败的原因。

如果这种情况经常发生，请确保从 Drupal 中删除的节点也从 Solr 索引中删除。

有关更多信息，请查看：[如何调试 EntityMalformedException？](https://drupal.stackexchange.com/q/111610/1908)在 DA

# ruby - Ruby：Hash.new 在这里做什么

> ID：12719385
> 
> 赞同：1
> 
> 时间：2012-10-04T02:04:45.193
> 
> 标签：ruby, sinatra

我正在逐步浏览使用 Sinatra 制作的hangman 应用程序的一些 Ruby 代码。具体来说，我正在查看`post "/check" do`下面的路径/功能。该函数的前两步是可预测的，即显示`final_word`变量，然后显示`char_clicked`变量，但随后调试器显示此 Hash.new

```
Hash.new {|hash,key| hash[key.to_s] if Symbol === key } 
```

在继续使用该功能之前。我不明白为什么`post "/check"`此时要创建一个新的哈希。它在代码中并不明确，我也不清楚为什么会在幕后发生这种情况。我也在下面包含了正确的猜想方法，它在 `` 中被调用

```
final_word = session[:word]
(rdb:3) n
hangman.rb:79
char_clicked = params[:char_clicked]
(rdb:3) n
/Users/mm/.rvm/gems/ruby-1.9.2-p290@rails3tutorial/gems/sinatra-1.3.3/lib/sinatra/base.rb:916
Hash.new {|hash,key| hash[key.to_s] if Symbol === key }
(rdb:3) n
hangman.rb:80
correct_guess = Game.correct_guess?(char_clicked, final_word) 
```

**检查路径**

```
post "/check" do
  debugger
  final_word = session[:word]
  char_clicked = params[:char_clicked]
  correct_guess = Game.correct_guess?(char_clicked, final_word)

  if correct_guess
    session[:revealed_word] = Word.reveal(session[:revealed_word], char_clicked, final_word)
    session[:chars_left] = Word.chars_left(session[:revealed_word])
  else
    session[:incorrect_guesses] += 1
  end
  win = Game.win?(session[:chars_left], session[:incorrect_guesses])

  {:word => session[:revealed_word], :correct_guess => correct_guess, :incorrect_guesses => session[:incorrect_guesses], :win => win}.to_json
end 
```

游戏correct_guess方法

```
def correct_guess?(char_clicked, final_word)
  final_word.include?(char_clicked)
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T02:28:34.697

Sinatra 正在`params`为“无关访问”创建哈希（因此哈希键可以通过字符串或符号互换访问）。

`Hash.new`如果键不存在，则需要一个块来确定要返回的值。

例子：

```
>> sh = Hash.new
=> {}
>> sh["key"] = "value"
=> "value"
>> sh[:key]
=> nil

>> ih = Hash.new { |hash, key| hash[key.to_s] if Symbol === key }
=> {}
>> ih["key"] = "value"
=> "value"
>> ih[:key]
=> "value" 
```

* * *

当您尝试访问`params[:char_clicked]`哈希块时，调试器会转储包含该块的完整行（此时实际上并未创建哈希）：

```
h = Hash.new { |hash, key| hash[key.to_s] if Symbol === key }
debugger
h["invalid_key"] 
```

->

```
sample.rb:5
h["invalid_key"]
(rdb:1) n
sample.rb:3
h = Hash.new { |hash, key| hash[key.to_s] if Symbol === key } 
```

当块在单独的行上时，更容易看到正在执行代码的哪一部分（即只是块）：

```
h = Hash.new do 
  |hash, key| hash[key.to_s] if Symbol === key
end
debugger
h["invalid_key"] 
```

->

```
sample.rb:7
h["invalid_key"]
(rdb:1) n
sample.rb:4
|hash, key| hash[key.to_s] if Symbol === key 
```

# ios - NSUserDefaults 存放注解的位置

> ID：12719388
> 
> 赞同：1
> 
> 时间：2012-10-04T02:05:14.223
> 
> 标签：ios, annotations, mkmapview, nsuserdefaults

我遇到了这个代码，如下所示。如何在不创建任何按钮（IBAction）的情况下将现有的注释引脚信息保存到 NSUserdefault？我应该将 NSUserDefault 代码放入 viewWillDisappear 吗？这是正确的方法吗？

保存：

```
NSUserDefaults *ud = [NSUserDefaults standardUserDefaults];
[ud setDouble:location.latitude forKey:@"savedCoordinate-latitude"];
[ud setDouble:location.longitude forKey:@"savedCoordinate-longitude"];
[ud setBool:YES forKey:@"savedCoordinate-exists"];
[ud synchronize]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T02:12:17.380

`viewWillDisappear`是一个经常用来保存状态的时刻，但它不是唯一的地方或唯一可能的地方。如果用户暂停您的应用程序怎么办？你不会得到`viewWillDisappear`。如果`viewWillDisappear`不是您可以访问注释信息的地方怎么办？在创建注释时，最好将信息保存到用户默认值。这取决于您的应用程序的性质、目的和架构；这是你要解决的问题。您的工作是知道您的代码何时将在事件驱动框架下运行，并且表现得恰当。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T02:10:07.123

当您想要保存该数据时，您可以将该代码放在任何您想要的位置。NSUserDefaults 可以在任何地方访问。同步是将其保存到磁盘的原因。

# java - 检查布尔值是否在 Java 中发生了变化

> ID：12719390
> 
> 赞同：1
> 
> 时间：2012-10-04T02:05:26.713
> 
> 标签：java, class, boolean, actionlistener

我有一个带有布局和一个按钮的类。我想知道是否有内置的方法或功能可以检测函数中的布尔值是否发生了变化。我可以用一堆其他布尔值来做到这一点，但我正在寻找一种更优雅的方式。我相信这与“观察者”有关，但并不完全确定。

代码的简化版本如下：

```
Class checker{

 boolean test1 = true;
 boolean test2 = true;

checker(){

checkNow.addActionListener(new ActionListener() {            
public void actionPerformed(ActionEvent e)
{   

//code to manage, and possibly change the value of the booleans test1 and test2.
//is there any built in function in java where i can test to see if the value of the booleans was changed in this actionListener function?

}
}}); 

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-04T02:12:35.420

> [是否] 有一个内置的方法或功能，我可以检测函数中的布尔值是否发生了变化？

您可以通过`boolean`使用 setter 封装对变量的访问来做到这一点：

```
private boolean test1 = true;
private boolean test2 = true;

private void setTest1(boolean newTest1) {
    if (newTest1 != test1) {
        // Do something
    }
}

private void setTest2(boolean newTest2) {
    if (newTest2 != test2) {
        // Do something
    }
} 
```

用 和 的调用替换这些变量的所有分配，`setTest1`以可靠地检测和`setTest2`的变化。`test1``test2`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T02:14:45.580

1) 将布尔值设为私有
2) 通过 getter 和 setter 访问它们
3) 在 setter 中：'if (this.val!=newVal) notify()'

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T03:29:26.817

一个选项（这可能是矫枉过正）将是组件对值的更改感兴趣`test1`并`test2`实现 a`PropertyChangeListener`和 register 以侦听这些属性的值何时更改。

这是一个[教程](http://docs.oracle.com/javase/tutorial/uiswing/events/propertychangelistener.html)。

# php - PHP 静态方法/单例模式

> ID：12719393
> 
> 赞同：2
> 
> 时间：2012-10-04T02:06:34.327
> 
> 标签：php, oop, static, singleton, phpunit

我正在为我公司的软件产品设计一个新架构。我对单元测试相当陌生。我读了一些关于使用单例和静态方法的恐怖故事，但我并不清楚使用它们的问题，希望能得到一些启发。

这是我正在做的事情：

我有一个多层架构。在服务器端，我使用一系列可重用的对象来表示数据库表，称为“处理程序”。这些处理程序使用其他对象，如 XMLObjects、XMLTables、不同的数据结构等。其中大部分是自制的，而不是您预先打包的对象。无论如何，在这一层之上是一个伪单层。这样做的主要目的是简化更高级别的服务器端代码并​​创建无缝的类管理。我可以说：

```
$tablehandler = databasename::Handler('tablename') 
```

...得到一张桌子。我没有看到这个固有的问题。我正在使用一堆处理程序（一个关联数组）来包含不同对象的实例。我没有使用全局变量，所有静态数据成员都是受保护的或私有的。我的问题是这如何导致单元测试出现问题。我不是在寻找时髦的修辞，我在寻找因果关系。我也将不胜感激对此的任何其他见解。在这一点上，我觉得它是一个非常灵活和高效的架构。这里的任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T04:29:52.273

使用静态方法来提供对托管实例的访问——无论它们是单例、池对象还是动态实例——只要您为测试提供一种注入它们自己的模拟的方法，对测试来说都不是问题和存根，并在完成后将其删除。根据您的描述，我没有看到任何会阻止该能力的东西。仅由您在必要时构建它。

如果您有一个类对无需扩展点或通过实例完成工作的方法进行静态调用，您将遇到困难。例如，像这样的调用

```
UserTable::findByEmail($email); 
```

使测试变得困难，因为您无法插入模拟的、仅内存的表等。但是，将其更改为

```
UserTable::get()->findByEmail($email); 
```

解决了这个问题，因为测试可以调用`UserTable::set($mock)`设置代码。有关更详细的示例，请参阅[此答案](https://stackoverflow.com/a/5961347/285873)。

# php - 将 MySQL 查询导出到 CSV 时出错

> ID：12719394
> 
> 赞同：0
> 
> 时间：2012-10-04T02:06:38.873
> 
> 标签：php, mysql, mysqli, export-to-csv

我正在尝试使用 PHP 将数据导出到 cdv/xls 文件。我不断收到以下错误：

*“警告：mysql_query()：提供的参数不是有效的 MySQL-Link 资源”*

这是我的代码：

```
<?php

//Connect the the database 
require('../mysql_connect.php') ;

$select = "SELECT * FROM customers WHERE email = 'info@example.com'";

$export = mysql_query ( $select, $dbc ) or die ( "Sql error : " . mysql_error( ) );

$fields = mysql_num_fields ( $export );

for ( $i = 0; $i < $fields; $i++ )
{
    $header .= mysql_field_name( $export , $i ) . "\t";
}

while( $row = mysql_fetch_row( $export ) )
{
    $line = '';
    foreach( $row as $value )
{                                            
    if ( ( !isset( $value ) ) || ( $value == "" ) )
    {
        $value = "\t";
    }
    else
    {
        $value = str_replace( '"' , '""' , $value );
        $value = '"' . $value . '"' . "\t";
    }
    $line .= $value;
}
    $data .= trim( $line ) . "\n";
}
$data = str_replace( "\r" , "" , $data );

if ( $data == "" )
{
    $data = "\n(0) Records Found!\n";                        
}

header("Content-type: application/octet-stream");
header("Content-Disposition: attachment; filename=export.xls");
header("Pragma: no-cache");
header("Expires: 0");
print "$header\n$data";

?> 
```

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T14:23:55.913

我在 mysql_connect.php 包含中使用的是 mysqli 而不是 mysql。谢谢您的帮助！

# javascript - 无法使用 Javascript 验证两位数月份

> ID：12719397
> 
> 赞同：1
> 
> 时间：2012-10-04T02:07:09.533
> 
> 标签：javascript, html

我有一个 HTML 表单，允许用户在其中输入日期以打印报告。但是，如果该日期在当前日期的 3 天内，我将其设置为告诉用户他们必须等待 3 天。出于某种原因，当我输入“09/30/2012”之类的代码时代码有效，但是当我输入“10/01/2012”时，错误检查会跳过。不过，如果它是两位数的月份（10、11 和 12），它似乎完全跳过了错误检查。如果您有任何想法，请告诉我。谢谢

JS代码：

```
var date = myForm.SC_date.value;
var d = new Date(date);
var varBegin = (d.getMonth()+1) + "-" + (d.getDate()-3) + "-" + d.getFullYear()
re = /^\d{1,2}\/\d{1,2}\/\d{4}$/;

if (myForm.SC_date.value == "")
    window.alert("Please enter the requested date of variance.  NOTE: Date must be 3 days prior to today's date.")

            //Here is where I am having issues  
/*else if(new Date(date) > new Date(varBegin))
    window.alert("Invalid date.  You must wait at least 3 days before you can request a report.")*/

else if(!myForm.SC_date.value.match(re))
    window.alert("Invalid date.  Please enter the date as follows: mm/dd/yyyy.") 
```

HTML 代码：

```
<td>Date of Variance </td>
    <td colspan="2"><input name="SC_date:*" id="SC_date" type="text" tabindex="06">
      </textarea><b><span class="style3">*</span>&nbsp;&nbsp;</b><span class="style2">(mm/dd/yyyy)</span>
    </td> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T05:27:02.223

我认为您不想通过操作字符串来构建“3 天前”日期。即，这里的这个片段：

```
var varBegin = (d.getMonth()+1) + "-" + (d.getDate()-3) + "-" + d.getFullYear() 
```

首先，当您在输入字段中使用正斜杠作为分隔符时，我不确定您为什么在这里使用连字符作为分隔符？

无论如何，这不是构建日期的可靠方法。当您将字符串输入 Date 对象的构造函数时，您实际上是在调用`Date.parse()`. 这在不同的浏览器上表现不同。

看一下这个：

```
> new Date('1-1-2012');
Sun Jan 01 2012 00:00:00 GMT-0800 (PST)

> new Date('01-01-2012');
Sun Jan 01 2012 00:00:00 GMT-0800 (PST)

> new Date('2012-1-1');
Sun Jan 01 2012 00:00:00 GMT-0800 (PST) 
```

看起来很不错，对吧？但那是在 Chrome 上。

现在看看在最新版本的 Firefox 中发生了什么，调用完全相同：

```
> new Date('1-1-2012');
Date {Invalid Date}

> new Date('01-01-2012');
Date {Invalid Date}

> new Date('2012-1-1');
Date {Invalid Date}

> new Date('2012-01-01');
Date {Sat Dec 31 2011 16:00:00 GMT-0800 (PST)} 
```

此外，在两种浏览器中查看此行为：

```
> new Date('2012-01-01');
Sat Dec 31 2011 16:00:00 GMT-0800 (PST) 
```

简单地将零添加到月份和日期数字会导致时间扭曲！你必须设置时间和时区（对我来说，PST）才能让它消失：

```
> new Date('2012-01-01T00:00:00-08:00')
Sun Jan 01 2012 00:00:00 GMT-0800 (PST) 
```

基本上，处理日期字符串解析是一件令人头疼的事情。你不想消化和解释这样的[规范](http://www.w3.org/TR/NOTE-datetime)，[this](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/parse)和[this](https://www.rfc-editor.org/rfc/rfc2822#page-14)。

因此，**这是一个更好的选择**——将年、月和日期值（按顺序）传递给 Date 对象的构造函数。这将为您可靠地创建日期，因此您的比较是有效的。

像这样，对于您的具体示例：

```
var WARNING_PERIOD_IN_DAYS = 3;
// Extract month, day, year from form input, 'trimming' whitespace.
var re = /^\s*(\d{1,2})\/(\d{1,2})\/(\d{4})\s*$/;
var match = re.exec(inputVal); // from "myForm.SC_date.value".
if (match) {
  var month = parseInt(match[1]) - 1; // Zero-indexed months.
  var date = parseInt(match[2]);
  var year = parseInt(match[3]);
  var inputDate = new Date(year, month, date);
  var currentDate = new Date();
  var threeDaysAgo = new Date(currentDate.getFullYear(), currentDate.getMonth(), currentDate.getDay() - WARNING_PERIOD_IN_DAYS);
  console.log((inputDate > threeDaysAgo) ? 'Within warning period' : 'No warning needed');
} 
```

说到规范，这里有一件很酷的事情要注意，那就是在 JavaScript 中，您可以“包装”日期值（它可能太大或负数），并且生成的 Date 仍然有效且正确。原因如下：

根据[ECMAScript 262](http://www.ecma-international.org/publications/standards/Ecma-262.htm)规范，当您调用时会发生以下情况`setDate()`：

```
**15.9.5.36 Date.prototype.setDate (date)**
1\. Let t be the result of LocalTime(this time value).
2\. Let dt be ToNumber(date).
3\. Let newDate be MakeDate(MakeDay(YearFromTime(t), MonthFromTime(t), dt), TimeWithinDay(t)).
4\. Let u be TimeClip(UTC(newDate)).
5\. Set the [[PrimitiveValue]] internal property of this Date object to u.
6\. Return u. 
```

这是关键位：`MakeDay(YearFromTime(t), MonthFromTime(t), dt)`

MakeDay 从 Date 对象的当前时间值（以纪元时间为单位）获取年份和月份，并执行以下操作：

```
**15.9.1.12 MakeDay (year, month, date)**
The operator MakeDay calculates a number of days from its three arguments, which must be ECMAScript Number values. This operator functions as follows:
1\. If year is not finite or month is not finite or date is not finite, return NaN.
2\. Let y be ToInteger(year).
3\. Let m be ToInteger(month).
4\. Let dt be ToInteger(date).
5\. Let ym be y + floor(m /12).
6\. Let mn be m modulo 12.
7\. Find a value t such that YearFromTime(t) == ym and MonthFromTime(t) == mn and DateFromTime(t) == 1;
but if this is not possible (because some argument is out of range), return NaN. 
8\. Return Day(t) + dt - 1. 
```

这看起来相当复杂，但基本上是：

*   、和位处理`floor`月份翻转（负数或大于 12 的月份）。`modulo``date==1`
*   生成的纪元时间瞬间转换为天数。
*   您的日期值将添加到该天数。如果您的日期值是负数，那很好，它只会被减去。
*   结果被传递回 setDate()。
*   setDate 调用 MakeDate()，它将天数加上当日时间转换为纪元时间的毫秒数。
*   Date 对象的内部时间设置为这个新的纪元时间。

这就是为什么你可以做这样的事情（取自V8 JS 引擎项目中的[`MakeDay()`函数的注释）：](http://code.google.com/p/v8/source/browse/trunk/src/date.js?r=12481#91)

```
//     MakeDay(2007, -4, 20) --> MakeDay(2006, 8, 20)
//     MakeDay(2007, -33, 1) --> MakeDay(2004, 3, 1)
//     MakeDay(2007, 14, -50) --> MakeDay(2007, 8, 11) 
```

好的，所以对于这个特定的问题，这几乎肯定是太多的细节......但我只是想弄清楚幕后到底发生了什么。谢谢你的耐心。

还有……最后一件事……

您在该 HTML 片段中随机`</textarea>`闲逛。如果在它之前的某个地方有一个开口`<textarea>`，那么它错误地包含了一些其他元素。如果没有打开`<textarea>`，则将其删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T04:49:51.773

使用允许您控制接受的日期格式的库，例如 Globalize.js 或 Date.js。然后定义您希望执行的确切测试，尤其是一天中的时间是否重要以及测试是否应该与用户系统中的当前时间相关（这是您在`new Date()`没有参数的情况下得到的）。然后，您可以例如计算@Mamsaac 概述的时间差，并使用简单的算术将毫秒转换为天。

`Date()`使用然后不检查结果就开始对输入进行模式匹配是不合逻辑的。此外，`Date()`根据定义，它依赖于系统，应该很少使用。不能保证它会接受像 mm/dd/yyyy 这样的格式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T02:20:12.060

如果您不关心一天中的时间，我建议您执行以下操作：

```
var dUser = new Date(date); //just like you did before
var dVarBegin = new Date("10/05/2012"); //here you do whatever is the date you are setting.
var diff = dVarBegin.getTime() - dUser.getTime();
//now diff is the difference in milliseconds! 
```

我不完全了解您对 3 天的要求。但是，如果您需要比较日期，现在您可以了！我希望这对你有用。如果您需要更多内容，请详细说明 3 天的事情。

# java - 不断收到 java.lang.nullexception 的错误：null

> ID：12719398
> 
> 赞同：0
> 
> 时间：2012-10-04T02:07:17.710
> 
> 标签：java, input, argumentnullexception

我正在处理的代码旨在接受用户的输入，但每当我运行程序时，它总是告诉我有一个错误，java.land.nullexception：null。我不知道该怎么办！

```
import java.util.Scanner;

public class HamzasGrocery
{
// instance variables - replace the example below with your own
private Scanner in;

/**
 * Constructor for objects of class HamzasGrocery
 */
public HamzasGrocery()
{
    Scanner in = new Scanner(System.in);
}

/**
 * An example of a method - replace this comment with your own
 * 
 * @param  y   a sample parameter for a method
 * @return     the sum of x and y 
 */
public void sampleMethod()
{
double choice1;
double choice2;
double choice3;
double choice4;
double choice5;
double total;

System.out.print("Enter item #1: ");
System.out.println();
choice1 = in.nextDouble();
System.out.print("Enter item #2: ");
choice2 = in.nextDouble();
System.out.println();
System.out.print("Enter item #3: ");
choice3 = in.nextDouble();
System.out.println();
System.out.print("Enter item #4: ");
choice4 = in.nextDouble();
System.out.println();
System.out.print("Enter item #5: ");
choice5 = in.nextDouble();
System.out.println();

System.out.printf("%-10s", "Item #'s");
System.out.printf("%-10s", "Cost:");
System.out.printf("%-10s", "Total:");

} 
```

}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T02:09:23.503

去掉构造函数中“Scanner in = new Scanner..”代码中的Scanner。

通过按照现在的方式进行声明，您是在说 in 属于本地范围，因此忽略了实例变量 in。

所以构造函数应该是：

```
public HamzasGrocery()
{
    in = new Scanner(System.in);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T02:10:16.200

在您的构造函数中，您正在初始化一个新的 Scanner，而不是您的实例变量 Scanner。试试这个：

```
public HamzasGrocery()
{
     in = new Scanner(System.in);
} 
```

# xml - 如何将 EndNote xml 文件放入 R 数据框中

> ID：12719400
> 
> 赞同：1
> 
> 时间：2012-10-04T02:07:38.567
> 
> 标签：xml, r, reference

我希望将 EndNote 生成的 XML 文件放入 R 数据框中。

我希望每个最终的子节点（例如标题，作者......）成为一列

此处提供了一个示例 EndNote xml 文件：

[要点示例](https://gist.github.com/raw/3831049/80f1315ba03d278b4f5f0d916fb1999709fc40e6/endnote.xml)

我还没有使用库（XML）解决这个问题。我希望有人有现成的解决方案，如果这听起来很懒，对不起。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T02:44:13.750

我有一个类似的问题要转换为数据框。我`xmlToDataFrame`在子节点上使用。

```
library(XML)
library(RCurl)
urldata<-"https://gist.github.com/raw/3831049/80f1315ba03d278b4f5f0d916fb1999709fc40e6/endnote.xml"
urldata<-xmlParse(getURL(urldata,ssl.verifypeer = FALSE,.opts=curlOptions(followlocation=TRUE)))
xmlToDataFrame(getNodeSet(urldata,'//*/record'))

#             database source-app rec-number foreign-keys ref-type
# 1 EndNote Ecology.enl    EndNote      13264        13264       17
# 2 EndNote Ecology.enl    EndNote      13265        13265       17
#        contributors                                  auth-address
# 1    Chapman, A. G. Cent States Forest Expt Stn, Columbus, OH USA
# 2 Strohecker, H. F.                 Univ Chicago, Chicago, IL USA
#                                                                                                     titles
# 1 An ecological basis for reforestation of submariginal lands in the Central Hardwood RegionEcologyEcology
# 2                                          A survey of soil temperatures in the Chicago areaEcologyEcology
#       periodical alt-periodical   pages volume number   dates      isbn
# 1 EcologyEcology EcologyEcology  93-105     18      1 1937Jan 0012-9658
# 2 EcologyEcology EcologyEcology 162-168     18      1 1937Jan 0012-9658
#         accession-num                                           notes
# 1 ISI:000200148800007  V02fg\rTimes Cited:5\rCited References Count:2
# 2 ISI:000200148800014 V02fg\rTimes Cited:5\rCited References Count:14
#                            urls language
# 1 <Go to ISI>://000200148800007  English
# 2 <Go to ISI>://000200148800014  English 
```

如果一般使用，可能需要多个作者（这里不会出现）等问题，这可能需要稍作改动。

# python - 如何打包 python virtualenv 项目以进行分发？

> ID：12719401
> 
> 赞同：3
> 
> 时间：2012-10-04T02:07:56.310
> 
> 标签：python, virtualenv, pyinstaller, cx-freeze

我尝试使用 pyinstaller 和 cxfreeze，但它们似乎正在使用我的站点范围的包并且缺少正确的依赖项。有没有一种简单的方法来打包一个包含 requirements.txt 中列出的所有依赖项的 python 应用程序？

谢谢

# django - 如何允许我的 Django 站点的副本编辑器以 DRY 方式创建内部链接？

> ID：12719403
> 
> 赞同：0
> 
> 时间：2012-10-04T02:08:59.510
> 
> 标签：django, django-admin

我的 Django 网站是一个电子商务商店。相对非技术性的文案编辑将登录 Django 管理界面并为每个产品页面编写文案。他们告诉我，他们希望能够在此副本中创建指向网站其他页面的链接。例如，如果一个产品在其描述中引用了另一个产品，他们希望在页面之间建立链接。

我看到了几个可能的选择：

1.  他们只是硬编码`<a>`副本中标签中的网址。我已经为管理 textareas 设置了 ckeditor，所以这将是最简单的解决方案，但是如果网站的 url 结构发生变化（比如我们出于 SEO 目的而更改它们），所有链接都会中断。

2.  引入某种 wiki 语法，将他们希望链接放在方括号中的文本包围起来。就像是：

    小部件 A 与 [[小部件 B]] 配合得非常好。这很好。

会产生：

```
Widget A works really well with <a href="/detail/widget-b/">Widget B</a>.  It is good. 
```

那么你有一个问题，如果产品的名称发生变化会发生什么？

以前有没有人处理过这个问题并提出一个足够灵活的解决方案来允许更改链接/名称/等？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T02:55:35.813

我经常处理这个问题。最终，你必须*非常*有说服力才能说服我允许将链接直接嵌入到副本中——尤其是对于电子商务网站。

*   如果产品名称更改或重新命名怎么办？
*   如果产品停产怎么办……您不希望内部链接出现 404 错误。
*   你真的想让人们*远离*你在页面上的“添加到购物车”号召性用语吗？
*   他们知道您的 SEO 策略吗？他们会稀释你的链接吗？他们会使用什么措辞？他们会确保链接有效吗？

当我被要求为文案/产品开发团队提供添加链接的能力时，我总是以“否”开头。询问他们需要什么，解释可能出现的问题（例如，维护有效链接的额外成本、转化率考虑因素，SEO 考虑），并提供替代解决方案。

例如，我通常提供允许他们将产品与产品关联为“关联产品”、“相关产品”、“附件”、“更多信息”等的功能。您可以在底部的选项卡或列表中拥有这些产品页面。这些将在模型中，因此您可以控制不显示已停产的产品，链接名称是产品名称（您可以控制 SEO）等。确定它们是用于交叉销售、追加销售还是提供最终用户了解更多信息。

作为最后的手段，我还使用了一个自定义代码解析器，它再次基于目标对象而不是硬编码链接。例如，假设您赋予他们执行以下操作的能力：

```
Widget A works really well with [product=123]. 
```

A custom template tag, parser in your model/view can replace that with a link to the the Product with id=123 (or use slug) based on `get_absolute_url()`. If the product is discontinued, the name can still show but no link. This only works if you have a policy of never deleting records. Even then, you may have to have some error handling for when they enter an invalid product ID or somebody does delete that product. That **will** happen.

# wordpress - 无法在 Wordpress 插件中更改网站的 URL。

> ID：12719406
> 
> 赞同：1
> 
> 时间：2012-10-04T02:09:18.400
> 
> 标签：wordpress, web-hosting

我的主机是earlyfreespeech.org。我用这条消息联系了他们：

“我的问题是，当您浏览我网站上的菜单并单击各种链接时，我需要导航栏说[http://www.paulaneeley.com/education-and-experience/](http://www.paulaneeley.com/education-and-experience/)，而不是 paulaneeley.nfshost .com/education-and-experience/。如何将我在网站上创建的子页面中的所有链接从 paulaneeley.nfshost.com/etc 更改为 paulaneeley.com/etc？

他们回应：

“查看设置页面的 WordPress 仪表板。可能其中一个设置没有使用您自己的域： .nfshost.com 地址，这个问题可能会消失。”

所以我将网站的地址更改为 paulaneeley.com。然后我得到了这个错误：

```
Warning: is_writable() [function.is-writable]: open_basedir restriction in effect. 
File(/) is not within the allowed path(s): 
(/f5/paulaneeley/:/nfsn/apps/php53/lib/php/:/nfsn/apps/php5/lib/php/:/nfsn/apps/php/lib/php/) 
in /f5/paulaneeley/public/wp-admin/includes/misc.php on line 133

Warning: Cannot modify header information - headers already sent by (output started at
/f5/paulaneeley/public/wp-admin/includes/misc.php:133) 
in /f5/paulaneeley/public/wp-includes/pluggable.php on line 881 
```

然后我尝试导航回我的仪表板，但我无法再访问它了！我的浏览器给了我这个错误：

```
too many redirects occurred trying to open "http://paulaneeley.nfshost.com/wp-admin/".     
This might occur if you open a page that is redirected to open another page which is then 
redirected to open the original page. 
```

然后我读了这篇文章：

[http://codex.wordpress.org/Changing_The_Site_URL](http://codex.wordpress.org/Changing_The_Site_URL)

并尝试了 functions.php 方法和 phpmyadmin 方法返回到原来的 paulaneeley.nfshost.com，我相信我都做对了。我的网站运行良好，但当我尝试访问我的仪表板时仍然收到错误消息。至少，我想拿回我的仪表板。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T03:14:12.870

也许您已经做对了所有事情，但 Nearfreespeech 的名称服务器仍然没有将用户转发到您的站点。

自己测试：

[http://www.paulaneeley.com](http://www.paulaneeley.com)，打开就好了，但是当您删除`www.`前缀时，该站点无法打开。[对http://paulaneeley.com](http://paulaneeley.com)的简单 ping 测试表明，earlyfreespeech 的名称服务器没有[http://paulaneeley.com](http://paulaneeley.com)的记录。Ping 返回错误，表明[http://paulaneeley.com](http://paulaneeley.com)`Ping request could not find host paulaneeley.com. Please check the name and try again.`没有 DNS 记录。

所以，再次联系他们，这一次告诉他们通过在他们的域名服务器中注册[http://paulaneeley.com来解决这个问题。](http://paulaneeley.com)如果他们要钱，请不要付钱，因为[http://paulaneeley.com](http://paulaneeley.com)和[http://www.paulaneeley.com](http://www.paulaneeley.com)是同一个网站，`www.`并不意味着他们应该收取任何费用。

祝你生意兴隆，也许有一天我会顺便过来给我做个发型，你的工作看起来很酷。:)

这是您的登录页面，

[http://paulaneeley.nfshost.com/wp-login.php](http://paulaneeley.nfshost.com/wp-login.php)
[http://www.paulaneeley.com/wp-login.php](http://www.paulaneeley.com/wp-login.php)

显然，您已经编辑了您的`.htaccess`文件（错误地？），它曾经重定向`http://www.paulaneeley.com/wp-login/`到`http://www.paulaneeley.com/wp-login.php`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T02:55:36.943

为了解决这个问题，您需要更改您的站点数据库的设置，您可以在其中找到您的域的根目录。您可以通过运行 mysql update 命令来执行此操作。

然后，您可以更改 .htaccess 设置。

另一种方法是重新安装它。只需确保您有数据、媒体和模板的备份。这次，请确保从您的域[http://www.paulaneeley.com](http://www.paulaneeley.com)安装它。或[http://paulaneeley.com](http://paulaneeley.com)。你只能选择一个。

# html - 有没有办法在不使用媒体服务器的情况下创建一对一的视频通话？

> ID：12719410
> 
> 赞同：1
> 
> 时间：2012-10-04T02:09:36.780
> 
> 标签：html, video, video-streaming, p2p, video-capture

如果这已经完成，我一直在网上寻找。我见过一个 HTML5 应用程序，但似乎只有少数浏览器支持它。我也看过爱立信创建的那个，但那是在 2010-2011 年。

从技术上讲，我想问的是是否已经有脚本或教程支持一对一视频通话而不使用媒体服务器。谢谢。

# c++ - 使用递归和乘法将 C 代码转换为 MIPS 问题

> ID：12719411
> 
> 赞同：0
> 
> 时间：2012-10-04T02:09:39.367
> 
> 标签：c++, c, mips

大家好，我需要一些帮助将以下 C 代码转换为 MIPS：

```
main()
{
  int i;
  for (i=0;i<5;++i)
    power(2,1)
    factorial(i)
return 0;
}
int power(int base,int n)
{
  int i,p;
  p=0;
  for(i=1;i<=n;++i)
    p=p*base;
  return p;
}
int factorial(int a)
{
  if(a==1)
    return 1;
  else
  {
    a *=factorial(a-1);
    return a;
  }
} 
```

到目前为止，我只完成了阶乘部分，但我被困在 a*=factorial(a-1)，我理解 multi 用于将两个寄存器相乘，但它如何获取递归循环的输入？也可以乘以常数而不是另一个寄存器吗？

```
factorial:
addi        $sp, $sp, -8 #adjust stack for 2 items
sw      $ra, 4($sp) #save return address
sw      $a0, 0($sp) #save argument
bne     $a0, 1, Else #if !(a==1), go to else address
addi        $v0, $zero, 1 #result is 1
addi        $sp, $sp, 8 #pop 2 items from stack
jr      $ra     #return
Else:  addi $a0, $a0, -1 #decrement s-1
jal     factorial   #recursive call
lw      $a0, 0($sp) #restore original a
lw      $ra, 4($sp) #and return address
addi        $sp, $sp, 8 #pop two items from stack 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T14:59:10.607

这是我编写的代码，我认为它符合您的目的。

```
.text
factorial:
    li $t0,13       # load 13 to check for overflow
    blt  $a0,$t0,no
    li $v1,1
    no: 
    bgtz $a0,find       # if $a0>0 goto generic case
    li $v0, 1       # base case, 0! = 1 
    jr $ra       
find:   sub $sp,8       # make room for $s0 and $ra
    sw $s0,($sp)        # store argument $s0=n
    sw $ra,4($sp)       # store return address
    move $s0, $a0       # save argument 
    sub $a0, 1      # factorial(n-1) 
    jal factorial       # v0 = (n-1)! 
    mul $v0,$s0,$v0     # n*(n-1)! 
    lw $s0,($sp)            # restore $s0=n
    lw $ra,4($sp)       # restore $ra
    add $sp,8       # reduce stack size
    jr $ra          # return 

main: 
    la $a0,input
    li $v0,4
    syscall
    li $v0,5
    syscall
    move $a0,$v0
    jal factorial
    move $t0,$v1
    bnez $t0,overflow1
    move $a0,$v0
    li $v0,1
    syscall
    b end
    overflow1:
    la $a0,overflow
    li $v0,4
    syscall
    end:
    li $v0,10
    syscall
.data
input:.asciiz"Input a number:"
overflow:.asciiz"There is an overflow!!" 
```

它包含评论和解释，因此应该没有问题。

# java - 在Java中通过网络发送文件夹

> ID：12719419
> 
> 赞同：0
> 
> 时间：2012-10-04T02:10:34.060
> 
> 标签：java, sockets, send

是否有可以通过网络发送文件夹的内置方法？还没有找到！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T02:24:55.973

不，没有内置方法可以做到这一点。

但是还有其他方法，有些人想到了：

*   [使用RMIIO 之](http://openhms.sourceforge.net/rmiio/)类的工具通过 RMI 将 File 对象发送到远程 java 对象
*   压缩文件夹并使用 HTTP 或 FTP 将其上传到远程主机
*   或者您甚至可以将压缩文件夹上传到原始套接字端口

# codeigniter - twitter bootstrap 和 codeigniter 不工作

> ID：12719423
> 
> 赞同：2
> 
> 时间：2012-10-04T02:11:43.160
> 
> 标签：codeigniter, twitter-bootstrap, typeahead

我想使用 twitter bootstraps typeahead 插件创建一个自动建议字段。这是我当前的代码。它在检查元素控制台中返回 500 内部服务器错误。我认为问题出在模型上。请帮我。提前致谢。

## 查看：注册

```
<script type="text/javascript">
    $(function() {
        $('#office').typeahead({
            source: function(typeahead, query) {
                $.ajax({
                    url: "<?php echo base_url('main/get_offices'); ?>",
                    type: "post",
                    data: "search=" + query,
                    dataType: "json",
                    async: false,
                    success: function(data) {
                        typeahead.process(data);
                    }
                });
            }
        });
    }); 
```

## 控制器：主

```
public function get_offices() {
    $this->load->model('offices');

    $data = $this->offices->get();

    echo json_encode($data); 
```

## }

## 型号：办公室

```
public function get() {
    $office = $this->input->post('search');

    $this->db->select('name');
    $this->db->from('departments');
    $this->db->like('name', $office);
    $query = $this->db->get();

    $office_array = array();
    foreach ($query->result() as $row) {
        $office_array = $row->name;
    }
    //$data['office'] = $office_array;

    return $office_array;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T03:02:58.320

我在函数参数中使用 typeahead 尝试了您的代码，但似乎不受支持。我重写了您的代码以删除预先输入并在 ajax 调用范围之外返回结果。

```
$('#office').typeahead({
  source: function(query) {
    var result = [];
    $.ajax({
      url: "<?php echo base_url('main/get_offices'); ?>",
      type: "post",
      data: "search=" + query,
      dataType: "json",
      async: false,
      success: function(data) {
        alert(data); // verify that you actually get data from the model
        result = data;
      }
    });
    return result;
  }
}); 
```

模型函数 get 似乎有错字，在这部分

```
$office_array = array();
foreach ($query->result() as $row) {
    $office_array = $row->name;
} 
```

应该是`$office_array[]`。

```
$office_array = array();
foreach ($query->result() as $row) {
    $office_array[] = $row->name;
} 
```

# c# - LINQ 按总和值分组

> ID：12719425
> 
> 赞同：4
> 
> 时间：2012-10-04T02:12:04.263
> 
> 标签：c#, linq

假设我有这样的课程：

```
public class Work
{
    public string Name;
    public double Time;

    public Work(string name, double time)
    {
        Name = name;
        Time = time;
    }
 } 
```

我有一个`List<Work>`大约 20 个值，它们都被填满了：

```
List<Work> workToDo = new List<Work>();
// Populate workToDo 
```

有没有什么可能的方法可以分组`workToDo`为每个段的时间总和是特定值的段？Say`workToDo`的值如下：

```
Name | Time
A    | 3.50
B    | 2.75
C    | 4.25
D    | 2.50
E    | 5.25
F    | 3.75 
```

如果我希望时间总和为 7，则每个段或`List<Work>`应该有一堆值，其中所有时间的总和为 7 或接近它。这甚至是遥不可及的，还是只是一个愚蠢的问题/想法？我正在使用此代码将其`workToDo`分成 4 段：

```
var query = workToDo.Select(x => x.Time)
        .Select((x, i) => new { Index = i, Value = x})
        .GroupBy(y => y.Index / 4)
        .ToList(); 
```

但我不知道如何根据泰晤士报来做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T04:14:53.690

这是一个查询，将您的数据分组到时间接近 7 但未结束的组中：

```
Func<List<Work>,int,int,double> sumOfRange = (list, start, end) => list
                  .Skip(start)
                  .TakeWhile ((x, index) => index <= end)
                  .ToList()
                  .Sum (l => l.Time);

double segmentSize = 7;
var result = Enumerable.Range(0, workToDo.Count ())
    .Select (index => workToDo
                         .Skip(index)
                         .TakeWhile ((x,i) => sumOfRange(workToDo, index, i) 
                                              <= segmentSize)); 
```

您的示例数据集的输出是：

```
A 3.5
B 2.75
total: 6.25

B 2.75
C 4.25
total: 7

C 4.25
D 2.5
total: 6.75

D 2.5
total: 2.5

E 5.25
total: 5.25

F 3.75
total: 3.75 
```

如果您想让一个段的总数超过七个，那么您可以将`segmentSize`变量增加 25% 左右（即使其变为 8.75）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T02:45:40.557

您所描述的是一个[包装问题](http://en.wikipedia.org/wiki/Packing_problem)（任务被包装到 7 小时的容器中）。虽然可以在解决此问题的方法中使用 LINQ 语法，但我知道 LINQ 中没有固有的解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T15:18:15.113

该解决方案通过所有组合递归并返回总和与目标总和足够接近的组合。

这是一个漂亮的前端方法，可让您指定工作列表、目标总和以及总和必须有多接近：

```
public List<List<Work>> GetCombinations(List<Work> workList,
                                        double targetSum,
                                        double threshhold)
{
    return GetCombinations(0,
                           new List<Work>(),
                           workList,
                           targetSum - threshhold,
                           targetSum + threshhold);
} 
```

这是完成所有工作的递归方法：

```
private List<List<Work>> GetCombinations(double currentSum,
                                         List<Work> currentWorks,
                                         List<Work> remainingWorks,
                                         double minSum,
                                         double maxSum)
{
    // Filter out the works that would go over the maxSum.
    var newRemainingWorks = remainingWorks.Where(x => currentSum + x.Time <= maxSum)
                                          .ToList();
    // Create the possible combinations by adding each newRemainingWork to the 
    // list of current works.
    var sums = newRemainingWorks
                   .Select(x => new
                          {
                              Works = currentWorks.Concat(new [] { x }).ToList(),
                              Sum = currentSum + x.Time
                          })                                
                   .ToList();
    // The initial combinations are the possible combinations that are
    // within the sum range.                   
    var combinations = sums.Where(x => x.Sum >= minSum).Select(x => x.Works);
    // The additional combinations get determined in the recursive call.
    var newCombinations = from index in Enumerable.Range(0, sums.Count)
                          from combo in GetCombinations
                                        (
                                            sums[index].Sum,
                                            sums[index].Works,
                                            newRemainingWorks.Skip(index + 1).ToList(),
                                            minSum,
                                            maxSum
                                        )
                          select combo;
    return combinations.Concat(newCombinations).ToList();        
} 
```

此行将获得总和为 7 +/- 1 的组合：

```
GetCombinations(workToDo, 7, 1); 
```

# python - 使用扁平命名空间重新加载 python 模块

> ID：12719429
> 
> 赞同：1
> 
> 时间：2012-10-04T02:12:40.113
> 
> 标签：python

我有一个与 scipy/numpy 结构相似的包，其中有几个主要的子模块，每个子模块都包含来自各种文件的函数，这些文件已被扁平化到同一个命名空间中。比方说

```
package/
  sub1/
    __init__.py
    file1.py
    file2.py 
```

然后`sub1/__init__.py`看起来像这样：

```
from .file1 import func1, func2
from .file2 import func3 
```

结果是我能做到

```
import package.sub1
package.sub1.func1() 
```

**但是**，问题是以下不起作用：

```
>>> import package.sub1
-- change things in file1.py --
>>> reload(package.sub1) 
```

该功能不更新。如果我这样做，它会起作用`import package.sub1.file1`，所以有一些东西会扁平化命名空间，这会导致它失去与模块的连接。我的主要问题是我如何仍然可以使用该`reload`命令，同时还能获得能够在单独的文件中编写同级函数的好处。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T02:27:17.107

在`__init__.py`导入时重新加载它导入的文件：

```
import file1
import file2
reload(file1)
reload(file2)

func1, func2 = file1.func1, file1.func2
func3 = file2.func3 
```

`reload()`也就是说，如果可以避免，依赖通常是一个坏主意。

# javascript - 在框架外使用 Zurb Foundation 工具提示

> ID：12719434
> 
> 赞同：1
> 
> 时间：2012-10-04T02:13:07.807
> 
> 标签：javascript, jquery, tooltip, zurb-foundation

我正在尝试使用 zurb 基础工具提示脚本而不为我的站点加载任何其他基础库，但是当我尝试加载它时，它会抛出这个 js 错误。

我的标记看起来像这样：

```
<span class="has-tip tip-right" data-width="200" title="This is a tip">This is a tip</span>

<script src="js/jquery.js"></script>
<script src="js/jquery.foundation.tooltips.js"></script>
<script src="js/app.js"></script> 
```

JS错误：

```
Uncaught TypeError: Object [object Object] has no method 'tooltips' app.js:5
(anonymous function) app.js:5
fire jquery.js:1075
self.fireWith jquery.js:1193
jQuery.extend.ready jquery.js:435
DOMContentLoaded jquery.js:949 
```

这是我加载脚本的方式

```
(function ($) {  

$(function(){
    // initialize tooltips
    $(document).tooltips();
});
})(jQuery); 
```

有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T13:21:49.097

我认为您没有以正确的名称调用该函数。它应该是`$(document).foundationTooltips()`而**不是** `$(document).tooltips()`

完整示例：

```
(function ($) {  

$(function(){
    // initialize tooltips
    $(document).foundationTooltips(); //This line right here
});
})(jQuery); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T07:41:32.907

新文档应该有这个：

```
<span data-tooltip class="has-tip tip-right" data-width="200" title="This is a tip">This is a tip</span> 
```

注意“数据工具提示”。现在很难找到记录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T20:43:38.103

与大多数工具提示库一样，基础工具提示似乎使用 title 属性作为默认工具提示。data-tooltip 是一个自定义字段，仅供想要自己使用它的人使用 - 而不是作为文档项。谷歌“html5 中的数据属性”。

# haskell - 什么是skolem？

> ID：12719435
> 
> 赞同：74
> 
> 时间：2012-10-04T02:13:17.577
> 
> 标签：haskell, types, type-variables

哎呀！GHCI 在我的代码中发现了 Skolems！

```
...
Couldn't match type `k0' with `b'
  because type variable `b' would escape its scope
This (rigid, skolem) type variable is bound by
  the type signature for
    groupBy :: Ord b => (a -> b) -> Set a -> Set (b, [a])
The following variables have types that mention k0
... 
```

这些是什么？他们对我的程序有什么要求？他们为什么要逃跑（忘恩负义的小家伙）？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-10-04T02:43:05.053

首先，上下文中的“刚性”类型变量意味着由该上下文之外的量词绑定的类型变量，因此不能与其他类型变量统一。

这很像受 lambda 约束的变量：给定一个 lambda `(\x -> ... )`，当然，您可以从“外部”将它应用于您喜欢的任何值；但在内部，您不能简单地决定 的值`x`应该是某个特定值。在 lambda中选择一个值`x`听起来很愚蠢，但这就是“无法匹配等等等等，刚性类型变量，等等等等”的错误的意思。

请注意，即使不使用显式`forall`量词，任何顶级类型签名`forall`对于提到的每个类型变量都有一个隐含的。

当然，这不是你得到的错误。“转义类型变量”的含义甚至更加愚蠢——就像拥有一个 lambda`(\x -> ...)`并尝试使用lambda`x` *之外*的特定值，而与将其应用于参数无关。不，不将 lambda 应用于某些东西并使用结果值——我的意思是实际上在定义它的范围之外使用*变量本身。*

类型会发生这种情况的原因（看起来不像使用 lambda 的示例那样明显荒谬）是因为有两个“类型变量”概念浮动：在统一期间，您有表示未确定类型的“变量”，然后确定这些类型通过类型推断与其他此类变量。另一方面，您有上面描述的量化类型变量，它们被明确标识为可能的类型。

考虑 lambda 表达式的类型`(\x -> x)`。从一个完全不确定的类型开始`a`，我们看到它接受一个参数并将其缩小到`a -> b`，然后我们看到它必须返回与其参数相同类型的东西，因此我们将其进一步缩小到`a -> a`。但现在它适用于`a`您可能想要的任何类型，所以我们给它一个 quantifier `(forall a. a -> a)`。

因此，当您有一个由量词绑定的类型时，就会出现转义类型变量，GHC 推断该类型应该与该量词范围*之外的未确定类型统一。*

* * *

所以显然我忘了在这里解释术语“skolem 类型变量”，呵呵。正如评论中提到的，在我们的例子中，它本质上是“刚性类型变量”的同义词，所以上面仍然解释了这个想法。

我不完全确定该术语的起源，但我猜它涉及[Skolem 范式](http://en.wikipedia.org/wiki/Skolem_normal_form)并用通用表示*存在*量化，就像在 GHC 中所做的那样。skolem（或刚性）类型变量是在某个范围内由于某种原因具有未知但特定类型的变量——作为多态类型的一部分，来自存在数据类型，&c。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-10-04T08:06:44.080

据我了解，“Skolem 变量”是一个与任何其他变量（包括其自身）都不匹配的变量。

当您使用显式 foralls、GADT 和其他类型系统扩展等功能时，这似乎会在 Haskell 中弹出。

例如，考虑以下类型：

```
data AnyWidget = forall x. Widget x => AnyWidget x 
```

这就是说，您可以采用任何实现`Widget`该类的类型，并将其包装成一个`AnyWidget`类型。现在，假设您尝试*打开*它：

```
unwrap (AnyWidget w) = w 
```

嗯，不，你不能那样做。因为，在编译时，我们不知道类型`w`有什么，所以没有办法为此编写正确的类型签名。这里的类型`w`已经从 中“逃脱” `AnyWidget`，这是不允许的。

据我了解，GHC 在内部给出`w`了一个 Skolem 变量的类型，以表示它不能逃脱的事实。（这不是唯一的这种情况；还有一些其他地方由于打字问题而无法逃脱某个值。）

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2015-07-16T13:34:46.200

当类型变量试图逃脱其范围时，会弹出错误消息。

我花了一段时间才弄清楚这一点，所以我会写一个例子。

```
{-# LANGUAGE ExistentialQuantification #-}
data I a = I a deriving (Show)
data SomeI = forall a. MkSomeI (I a) 
```

那么如果我们尝试写一个函数

```
 unI (MkSomeI i) = i 
```

GHC 拒绝对该函数进行类型推断/类型检查。

* * *

为什么？让我们尝试自己推断类型：

*   `unI`是一个 lambda 定义，因此它的类型`x -> y`适用于某些类型`x`和`y`.
*   `MkSomeI`有一个类型`forall a. I a -> SomeI`
    *   `MkSomeI i`有一个类型`SomeI`
    *   `i`在*LHS*上有某种类型`I z`的类型`z`。由于`forall`量词，我们不得不引入新的（新鲜的）类型变量。请注意，它不是通用的，因为它绑定在`(SomeI i)`表达式中。
    *   因此我们可以将类型变量`x`与统一起来`SomeI`，这没关系。所以`unI`应该有类型`SomeI -> y`。
*   `i`因此在*RHS*上也有类型`I z`。
*   此时 unifier 尝试统一`y`and `I z`，但它注意到`z`在较低的上下文中引入了 。因此它失败了。

否则 for 的类型`unI`将具有 type `forall z. SomeI -> I z`，但正确的类型是`exists z. SomeI -> I z`。然而，一个 GHC 不能直接代表。

* * *

同样，我们可以看到为什么

```
data AnyEq = forall a. Eq a => AE a
-- reflexive :: AnyEq -> Bool
reflexive (AE x) = x == x 
```

作品。

内部的（存在）变量`AE x`不会逃逸到外部范围，所以一切正常。

* * *

我还在 GHC 7.8.4 和 7.10.1 中遇到了一个[“功能”](https://ghc.haskell.org/trac/ghc/ticket/10646#ticket)`RankNTypes` ，它本身是可以的，但是添加`GADTs`会触发错误

```
{-# LANGUAGE RankNTypes #-}
{-# LANGUAGE GADTs #-}

example :: String -> I a -> String
example str x = withContext x s
  where
    s i = "Foo" ++ str

withContext :: I a -> (forall b. I b -> c) -> c
withContext x f = f x 
```

因此，您的代码可能没有问题。可能是 GHC，它无法始终如一地解决所有问题。

*编辑*：解决方案是给`s :: forall a. I a -> String`.

`GADTs`打开`MonoLocalBinds`，这使得推断的类型`s`具有 skolem 变量，因此类型不是`forall a. I a -> String`，而是`t -> String`，被`t`绑定在错误的上下文中。见：[https ://ghc.haskell.org/trac/ghc/ticket/10644](https://ghc.haskell.org/trac/ghc/ticket/10644)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-04T23:34:36.423

**什么是Skolem？**

一个*存在量化*变量，即它“具有刚性/具体类型，外部世界无法知道，但内部世界可以”。

**那么如何使用 Skolems？**

*TL;博士*

```
unwrapBroken (ExistentiallyTyped x) = x

unwrapOk (ExistentiallyTyped x) = useConstraint x 
```

* * *

当 Skolem 有一些您关心*的类型类的实例时，它们很有用。*您可以（仅？）通过它的约束使用未包装的东西。

简而言之，这里是转义的 skolem (that `a`within `forall a. ExistentiallyTyped a`)：

```
data ExistentiallyTyped = forall a. SomeConstraint a => ExistentiallyTyped a

unwrapBroken :: forall a. ExistentiallyTyped -> a  <---- what? how'd that `a` break out? not the same `a` as in ExistentiallyTyped
unwrapBroken (ExistentiallyTyped x) = x :: a  <---- not the same `a` as above! 
```

你不能这样做，`a`从包装`x :: a`中量化`ExistentiallyTyped`，但想想`a`就行了`unwrapBroken :: forall a. ...`。现在它以某种方式被普遍量化了？！（警告，我认为这开始成为可能的*Dependent Types*，而 haskell 还没有……）。所以你告诉我这个函数可以返回`Int`or `String`or `AnyFrigginThing`？

不，但你*可以*`x :: a`通过它的约束来利用它：

```
unwrapOk :: ExistentiallyTyped -> ResultOfUseConstraint
unwrapOk (ExistentiallyTyped x) = useConstraint x 
```

例如，当我想要一个共享某个类型类的类型列表时，我就使用了它：

```
notPossible :: HasBork a => [Proxy a]
notPossible = [Proxy @Thing1, Proxy @Thing2]
-- Error! expected a `Proxy a` but got a `Proxy Thing1` 
```

所以与其：

```
data Borkable = forall a. HasBork a => Borkable a

borks :: [Borkable]
borks = [thing1, thing2]

later = useBork <$> borks 
```

# php - PHP - 循环中的小胡子部分

> ID：12719437
> 
> 赞同：2
> 
> 时间：2012-10-04T02:13:23.333
> 
> 标签：php, mustache

我认为 Mustache 很棒，因为它允许使用局部，并且与 Smarty 相比，它也相对轻量级。我使用 Mustache 的想法是：定义一组组成 UI 库的部分。在这些部分中传递数据并像在类固醇上使用 html 元素一样使用它们。

部分的示例是列表元素（视觉上）。从标记的角度来看，该元素被定义为一个 20 行的 HTML 块。我想在循环中使用该部分，或者我可能想独立使用它。

如果我想建立一个包含上述部分的列表，我会这样做：

```
{{#my_list_elems}}
 ... Maybe some HTML code
 {{> my_partial
{{/my_list_elems}} 
```

假设 my_partial 如下所示：

```
<div>
  <ul>
  {{#another_array}}
    <li>{{name}}</li>
  {{>#another_array}}
  </ul>
</div> 
```

现在，经过几个小时的尝试，我的主模板看起来或多或少像这样：

```
{{> head}}
{{> header}}
<div>Some static HTML</div>
... More code
{{#some_array}}
{{> my_partial}}
{{/some_array}}
{{> footer}} 
```

问题：由于某种原因，这对我不起作用。我尝试单独渲染部分，它可以工作。一个数组？嗯。

另外，我很难弄清楚，如果我真的让它工作，它将如何处理变量。目前，我正在渲染它：

```
$template = $this->mustache->loadTemplate('template');
$partials['my_partial'] = $this->mustache->loadPartial('my_partial');
$data['my_partial_arr'] = $this->getPartialData();

echo $template->render($data, $partials); 
```

请注意，PHP 代码和部分示例并不意味着一起工作，它们只是示例。

问题是，是否支持此功能？如果是，我做错了什么？也许我的 PHP 数组没有正确的格式？我可以将数组/循环置于较低级别，在部分中，但是当我想单独使用部分时（将数据包装在一个 elem 数组中以便渲染），这会使其变得丑陋。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T06:00:09.093

所以`{{> head }}`,`{{> header }}`和`{{> footer }}`partials 工作，但`{{> my_partial }}`不是吗？您是在使用文件系统部分加载程序，还是将部分作为字符串传递给 Mustache 构造函数？

有两件事可能会吸引你：

1.  Mustache 可能不认为您的数组 ( `my_partial_arr`) 是“可迭代的”。Mustache.php wiki[对此提供了更多信息](https://github.com/bobthecow/mustache.php/wiki/Mustache-Tags#wiki-hashes)。您可以运行`array_values()`它们以确保它们将被循环而不是用作部分上下文。

2.  您不能将部分传递给小胡子模板上[的`render()`调用。](https://github.com/bobthecow/mustache.php/blob/master/src/Mustache/Template.php#L53-60)

    In most cases, passing partials as a second argument won't cause a problem, since that function doesn't take a second argument anyway... it'll simply load any necessary partials via `loadPartial()` on your Mustache instance anyway.

# algorithm - 如何分析这个算法的效率

> ID：12719445
> 
> 赞同：0
> 
> 时间：2012-10-04T02:15:45.760
> 
> 标签：algorithm, performance, big-theta

```
FUNCTION SEEK(A,X)
1\. FOUND = FALSE
2\. K = 1
3\. WHILE (NOT FOUND) AND (K < N)
   a.  IF (A[K] = X THEN
       1\.  FOUND = TRUE
   b.  ELSE
       1\.  K = K + 1
4\. RETURN 
```

分析这个算法（伪代码），我可以计算完成所需的步骤数，并用线性算法 Θ(n) 来分析它的效率。好的。

以下代码取决于循环内的内部公式才能完成：

```
1\.  X = 1
2\.  B = 1
3\.  UNTIL (B > 100)
    a.  B = 2A - 2
    b.  A = A + 3 
```

显然它不像第一个那么简单，我不能说循环重复 100 次，因为循环内 A 和 B 的增量不规则。我如何计算这个特定算法的步数以研究它的效率？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T02:30:33.013

B 取决于 A。A 单调递增。因此，循环根据 A 的初始值以线性时间运行。一些代数会告诉您 A 的什么值停止循环。

# android - 如何在 Android 中维护多个页脚视图？

> ID：12719447
> 
> 赞同：1
> 
> 时间：2012-10-04T02:15:55.597
> 
> 标签：android, android-layout

我有一个 ListView 并且经常根据列表条件添加/删除页脚。有时会显示进度视图，有时会显示错误视图等。关键是我经常需要换出页脚视图。但是在设置或重置适配器之前必须添加页脚视图，因此在删除现有的页脚视图以将其替换为新的页脚视图时经常会出现奇怪的异常。是的，我在删除页脚视图时遇到了空指针异常和适配器类转换异常！

所以底线：维护几个页脚视图是困难的、冗长的和严重的，但页脚空间很有用。

所以我在考虑只有一个页脚，它只是一个容器，在开始时设置这个页脚，然后根据需要向页脚视图添加/删除/隐藏子页脚视图。

这是处理这个问题的最好方法吗？如果我将子页脚视图添加到现有的页脚视图中，页脚视图是否会正确刷新而不重置适配器？

在不重置适配器的情况下，页脚视图是否有刷新选项？其他人是如何处理这个问题的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T04:28:02.327

请记住，ListView 在项目进入或离开屏幕时创建和丢弃它们。因此，如果您独立引用这些项目，您很可能会遇到空指针异常和许多其他错误。您的实际问题正是那个，而不是不同类型的页脚。

因此，在处理页脚之前，请确保该项目实际上是可见的（不为空，并且完全或部分在屏幕内。）

更好的是发布您的代码，也许我们将能够针对特定（更好）的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T06:13:50.063

好的，这就是我的想法

1.  定义一个数组适配器

    ```
    public class CustomArrayAdapter<T> extends ArrayAdapter<T>{

            // override all of the constructors as follows

            public CustomArrayAdapter(Context context, int textViewResourceId, T[] objects) {
                    super(context, textViewResourceId, objects);
            }

            public CustomArrayAdapter(Context context, int textViewResourceId, List<T> objects) {
                    super(context, textViewResourceId, objects);
            }

            public CustomArrayAdapter(Context context, int resource, int textViewResourceId, T[] objects) {
                    super(context, resource, textViewResourceId, objects);
            }

            public CustomArrayAdapter(Context context, int resource, int textViewResourceId, List<T> objects) {
                    super(context, resource, textViewResourceId, objects);
            }

            public CustomArrayAdapter(Context context, int resource, int textViewResourceId) {
                    super(context, resource, textViewResourceId);
            }

            public CustomArrayAdapter(Context context, int textViewResourceId) {
                    super(context, textViewResourceId);
            }

            Map<View, View> footerMappings = new HashMap<View, View>();

            public View getView(int position, View recycleView, ViewGroup parent){
                    if(recycleView == null){
                            //Initialize the view here
                    } else {
                            //Clean up the view from old data
                    }

                    // Populate with current data

                    View footerView = create and assign the footer view here

                    this.footherMappings.put(recycleView, footerView); // this will overwrite the mappings that are out of the view
                    return recycleView;
            }

            public boolean isFooterVisible(View footerView){
                    Set<View> keys = this.footerMappings.keySet();
                    for(View key : keys){
                            if(this.footerMappings.get(key) == footerView){
                                    return true;
                            }
                    }
                    return false;
            }
    } 
    ```

2.  在 ListView 中使用 CustomArrayAdapter

    ```
    ListView lv = new ListView(context);
    lv.setAdapter(new CustomeArrayAdapter(context, 0, your_object_list)); 
    ```

3.  当您想使用页脚进行操作时

    ```
    CustomeArrayAdapter adapter = (CustomeArrayAdapter)lv.getAdapter();
    if(adapter.isFooterVisible(your_footer_view)){
            // do whatever you want here
    } else {
            // footer is not in the view. Do something else
    } 
    ```

希望这会有所帮助...

# .net - Windows 服务与 Windows 窗体应用程序 VB.NET

> ID：12719449
> 
> 赞同：1
> 
> 时间：2012-10-04T02:16:57.160
> 
> 标签：.net, vb.net, winforms, web-services, web-applications

我目前正在从事 Windows 服务项目。我添加了对项目外部类库的引用，因为我需要使用该 dll 中的函数。

但是，我需要的类库函数正在获取会话值，但我不能使用这些 Web 方法，因为我的只是 Windows。我只能想到两种方法来解决这个问题。

1）从外部类库中重载我需要的函数，并用输入参数替换会话值。这肯定是一个耗时的过程，因为我有许多该函数所指的会话值。

2) 我可以创建一个 Windows 窗体应用程序。将 Web 浏览器控件添加到表单。配置 URL 以具有外部项目中的函数所需的所有输入参数。添加调度程序以作为后台进程运行。在我需要参考的用 ASP.NET 编码的外部项目中，我可以添加一个新页面，该页面从我的 Windows 窗体应用程序中获取 URL。解析查询字符串以获取输入值并传递给所需的函数。

您能否建议是否有更好的方法。谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T02:22:11.283

选项一似乎是最好的。这是最整洁的，让您可以控制您的项目。我想当你开始这样做时，你会注意到你可以利用的模式，这样总的工作就不像现在看起来那么多了。

捷径很少是短的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T17:42:49.687

我推荐选项 1。选项 2 看起来像是一场等待发生的巨大噩梦，而选项 1 看起来像是一个简单（尽管费力）的代码更改。

您可以通过在 Visual Studio 或您最喜欢的文本编辑器中执行正则表达式搜索/替换来减少选项 1 的痛苦。我一直使用这种技术进行繁琐的大规模代码更改，一旦你习惯了它就会非常有效。

然而，长期的解决方案必须是更改库代码。编写依赖于全局状态的可重用库代码始终是灾难的根源。

# javascript - 通过 JavaScript 获取 Textarea 滚动百分比

> ID：12719450
> 
> 赞同：1
> 
> 时间：2012-10-04T02:17:41.183
> 
> 标签：javascript, html, forms

所以我有一个拆分视图降价编辑器，我在 JS 中为 Win8 构建。左侧是一个 textarea 字段（上面有一个标题，所以它不是屏幕的全高）。在右边我有一个 div 包含降价预览的输出。此预览窗口是屏幕的全高。当我滚动左侧文本区域时，我想保持右侧预览面板同步。我可以通过计算 textarea 的滚动百分比然后将预览 div 滚动到相同位置来轻松做到这一点。

现在我很讨厌我无法计算出文本区域的最大滚动值。我看到的所有在滚动时保持两个元素同步的示例都涉及两个带有溢出集的 div。所以在 div 上可以快速确定实际高度。

有没有办法获得 textarea 的最大滚动大小（不是 textarea 的实际大小），以便我可以计算百分比？我能想到的唯一解决方案是使隐藏的 div 与 textarea 的确切大小相同并将内容输出到该位置，然后将 textarea 滚动同步到该位置，确定百分比，然后将其应用于更大的预览 div。我担心这会对我的应用程序产生性能影响。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T05:48:45.203

你需要 ( `element.scrollTop`+ `element.offsetHeight`) / `element.scrollHeight`* 100

# json - Lua 对象列表

> ID：12719451
> 
> 赞同：2
> 
> 时间：2012-10-04T02:18:10.043
> 
> 标签：json, lua

我对 Lua 很陌生，需要帮助。我正在尝试创建具有名称和消息的对象列表。我需要能够将 JSON 发送到我的应用程序，例如：

```
{{"name":"Joe","Message":"This is a test"),{....}} 
```

从我读过的内容来看，这可以通过表格来完成，但它似乎不起作用，到目前为止我尝试过的是

```
message = {}
messages = {}

message["name"] = "Joe"
message["message"] = "This is a Message"

messages["1"] = ??  <--- I don't know what to do here 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-04T04:09:25.997

假设您修复了您的 JSON 代码，它可能看起来像`{{"name":"Joe","Message":"This is a test"},{....}}`，您可以使用以下代码：

```
message = {name = "Joe", Message = "This is a Message"} -- capitalization in "Message" may matter
messages = {}
messages[1] = message 
```

这与以下内容相同：

```
message = {}
message["name"] = "Joe" -- or message.name = "Joe"
message["Message"] = "This is a Message" -- or message.Message = "...."
messages = {}
messages[1] = message -- the value of that element is a table 
```

请注意，我使用了`[1]`and not `["1"]`，这是两个不同的键。鉴于您的结构，您确实想使用`[1]`.

# sql - 子查询 SQL 计数函数

> ID：12719454
> 
> 赞同：-3
> 
> 时间：2012-10-04T02:18:41.137
> 
> 标签：sql, count

```
Jurisdiction      Route
------------      -----
Portland           65
Portland           55
Cornelius          75
Cornelius          75
Cornelius          75 
```

如何计算cornelius的路线数量？答案是 1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T02:20:31.450

您只需要使用`COUNT()`和`DISTINCT`

```
select count(distinct Jurisdiction) total, Jurisdiction
from table1
where Jurisdiction = 'Cornelius'
group by Jurisdiction 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/fead7/6)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T02:21:13.957

```
SELECT COUNT(*) 
FROM your_table 
GROUP BY Jurisdiction, Route 
WHERE Jurisdiction = 'Cornelius' 
```

或者

```
SELECT COUNT(DISTINCT Route) 
FROM your_table 
GROUP BY Jurisdiction 
WHERE Jurisdiction = 'Cornelius' 
```

# jquery - 如何避免重叠的ajax查询

> ID：12719459
> 
> 赞同：0
> 
> 时间：2012-10-04T02:19:55.253
> 
> 标签：jquery, ajax

ajax 查询每 10 秒发出一次并抓取数据。服务器在 10 秒内无法响应。与此同时，另一个相同的 ajax 查询启动。如何在 JQuery 中避免这种情况？

# java - 从Java数组中删除具有重复值的最优雅的方法是什么

> ID：12719460
> 
> 赞同：0
> 
> 时间：2012-10-04T02:20:00.390
> 
> 标签：java, arrays, algorithm, loops

我正在尝试获取一个数组，检查是否有任何欺骗，并删除该字母的所有实例，我目前尝试使用的方法非常难看

例子;

```
In: ABBCCDE
Out: ADE 
```

或者

```
In: BCACDF
Out: BADF 
```

我目前正在使用两个`for`循环来查找骗子，将该骗子的 Char[] 添加到 OTHER 数组中，然后再循环使用 2 个 for 循环从我的 ErrorArray 中删除字符。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T02:42:01.877

这可能是一个解决方案：

```
public static void main(String[] args) {
    char[] arr = { 'A', 'B', 'B', 'C', 'C', 'D', 'E' };
    Set<Character> in = new HashSet<>();
    Set<Character> dupe = new HashSet<>();
    for (char c : arr) {
        if (!dupe.contains(c)) {
            if (in.contains(c)) {
                dupe.add(c);
                in.remove(c);
            } else {
                in.add(c);
            }
        }
    }
    char[] arrR = new char[in.size()];
    int i = 0;
    for (char c : in) {
        arrR[i++] = c;
    }
    for (char c : arrR) {
        System.out.println(c);
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T14:29:48.840

```
public static String removeDuplicateChars (String sText)
{
    String sResult = "";
    char[] caText = sText.toCharArray();
    int[] iaAsciiIndex = new int[128];

    for (int i=0 ; i<caText.length; i++)
    {
        iaAsciiIndex[caText[i]] += 1;
    }

    for (int i=0 ; i<iaAsciiIndex.length ; i++)
    {
        if (iaAsciiIndex[i] == 1)
            sResult += (char)i;
    }

    return sResult;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-04T04:04:29.410

这个问题有很多解决方案，并且根据输入的不同，最佳解决方案也会有所不同。

romedius 在他的回答中提出的解决方案很好，就像 Alex 在他对 Makoto 回答的评论中提出的解决方案一样。

如果您认为 HashSet/HashMap 具有 O(1) 的操作，那么它们是 O(n)。但是，现实情况表明这种情况很少发生，这取决于您的哈希函数的适用程度和链表数组的大小调整（或内部使用的任何结构 - Java 默认使用 LL）。

因此，例如：Java 的 HashMaps 和 HashSets 的最坏情况插入 O(n)，因为它们验证重复项并因此迭代链表，而不是仅仅添加到它的尾部。这仅在碰撞次数较多时发生。

如果您知道输入的大小，最好将 HashSet/HashMap 的大小设置为它：HashMap(int initialCapacity) 构造函数执行此操作。这样可以防止调整结构的大小问题，这会严重影响性能。

如果不这样做，它将使用默认容量。然后你只取决于哈希函数有多好。

O(n log n) 的可靠解决方案是对输入进行排序，然后只需迭代一次，检查数组的前一个或后一个位置是否等于所选位置，如果有，则不要添加它。第二部分是 O(n)。排序保证为 O(n logn)，如果您使用的是 Java 7，它将使用非常快的 timsort。

如果我正在采访某人，我会接受任何一种解决方案。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-04T03:29:35.727

您没有定义*优雅*，但我提交使用位掩码和 XOR 来删除欺骗。我认为这是优雅且非常有效的，因为它避免了导航集以删除欺骗。

（这只适用于大写字母，但很容易扩展。）

这是一个关键的想法的类。它是一个简单的 BitSet 包装器，用于表示当前字符或已看到的字符等：

```
class Bitmask {
    private static final int NUM_BITS = 26;
    private static final int OFFSET = 65;
    // e.g. {A,C,D} == [1,0,1,1,0, ...]
    BitSet bitset = new BitSet(NUM_BITS);

    public Bitmask() {}

    public Bitmask(Bitmask bitmask) {
        this.bitset = (BitSet) bitmask.bitset.clone();
    }
    public void set(char c) {
        int whichBit = (int) c - OFFSET;
        bitset.set(whichBit);        
    }

    public List<Character> getAllSet() {
        List<Character> all = new ArrayList<Character>();
        for (int i = 0; i < NUM_BITS; i++) {
            if (bitset.get(i)) {
                char c = (char) (OFFSET + i);
                all.add(new Character(c));
            }
        }        
        return all;
    }

    public void xor(Bitmask bitmask) {
        this.bitset.xor(bitmask.bitset);
    }

    public void or(Bitmask bitmask) {
        this.bitset.or(bitmask.bitset);
    }

    public void and(Bitmask bitmask) {
        this.bitset.and(bitmask.bitset);
    }

    public void andNot(Bitmask bitmask) {
        this.bitset.andNot(bitmask.bitset);
    }    
} 
```

这看起来很冗长，但回报在于算法，它对[N 个位集的 XOR 的这个答案](https://stackoverflow.com/questions/10388074/exclusive-or-between-n-bit-sets)欠下了一大笔债。

```
char[] input = {'A', 'B', 'B', 'B', 'C', 'D', 'E'};  //expect 'ACDE'
//char[] input = {'A', 'A', 'B', 'B', 'B', 'C'};
//char[] input = {'A', 'C', 'G' };

Bitmask moreThanOnceBitmask = new Bitmask();
Bitmask onceBitmask = new Bitmask();

for(char c : input) {
    Bitmask thisBitmask = new Bitmask();
    thisBitmask.set(c);
    Bitmask tmpOnceBitmask = new Bitmask(onceBitmask);
    // we've seen 'char c' at least once
    onceBitmask.or(thisBitmask);
    // we've seen 'char c' more than once
    tmpOnceBitmask.and(thisBitmask);
    moreThanOnceBitmask.or(tmpOnceBitmask);
}

// we want 'at least once' but not 'more than once'
Bitmask finalBitmask = new Bitmask(onceBitmask);
finalBitmask.andNot(moreThanOnceBitmask);

// build list

System.out.println(finalBitmask.getAllSet().toString()); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-04T04:17:32.503

Guava 的多集类的合理解决方案：

```
 char[] chars = new char[] { 'A', 'B', 'B', 'B', 'C', 'D', 'C', 'E' };

    Multiset<Character> set =  LinkedHashMultiset.create(Chars.asList(chars));

    for (char c : chars ) {
       int cnt = set.count(c);
       if (cnt > 1) {
           set.remove(c, cnt);
       }
    }

    char[] singles = Chars.toArray(set);

    System.out.println(new String(singles)); 
```

PS：使用 LinkedHashMultiset 而不是 HashMultiset 很重要，因为 LinkedHashMultiset 版本在您遍历它时会保留插入顺序，而 HashMultiset 则不会。

而且我并不认为这是最节省内存的解决方案，因为创建了很多临时集合。

但是，从代码的角度来看，它很简单，有人可以通过查看您的代码来推断您正在尝试做什么。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-04T02:40:17.037

使用`SET`允许您自动删除任何重复值。由于您使用的是数组，因此您需要使用`Arrays.asList(T.. a)`

```
SET<Character> uniqueCharacters = new HashSet<Character>(Arrays.asList(yourArray)); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-04T07:49:22.723

*   `Set`由于 Java 缺乏对来回转换的支持，`char[]`基于的解决方案并不优雅`Set<Character>`。

*   上述转换所需的循环更有效地用于执行问题所需的实际处理。

*   我认为以下解决方案的极端简单性使其优雅。

*   它也是有效的，尽管以（有点）大数组为代价，根据对所需输入字符集的了解，该数组的大小可能会减小。

    ```
    public class Test extends TestCase {

        public void testDupes() {
            assertEquals("ADE", noDupes("ABBCCDE".toCharArray()));
            assertEquals("BADF", noDupes("BCACDF".toCharArray()));
        }

        public String noDupes(char[] in) {
            int[] count = new int[Character.MAX_VALUE];
            for (char c: in)
                count[c]++;
            StringBuffer out = new StringBuffer();
            for (char c: in)
                if (count[c]==1)
                    out.append(c);
            return out.toString();
        }
    } 
    ```

# php - 合并子数组中的数组值？

> ID：12719463
> 
> 赞同：1
> 
> 时间：2012-10-04T02:20:43.617
> 
> 标签：php, arrays, multidimensional-array

当我从 mysql 数据库中检索文章信息时，我得到了一个这样的数组：

```
Array
(
    [0] => Array
        (
            [CategoryID] => 3
            [CategoryName] => Test Category
            [Parent] => 0
            [Thumb] => 0
            [sort] => 8
            [ArticleID] => 2
            [ArticleCatgories] => 9,4,3
            [ArticleTitle] => vxcvxcvx
            [ArticleBody] => xcvxcvxcvxcv
            [InGroup] => 0
            [GroupID] => 0
            [Published] => 1
            [PublishTime] => 
            [TermID] => 11
            [TermSlug] => xcvxcvxcv
            [RelatedID] => 2
            [TermType] => article
        )

    [1] => Array
        (
            [CategoryID] => 4
            [CategoryName] => Test Image
            [Parent] => 0
            [Thumb] => 0
            [sort] => 4
            [ArticleID] => 2
            [ArticleCatgories] => 9,4,3
            [ArticleTitle] => vxcvxcvx
            [ArticleBody] => xcvxcvxcvxcv
            [InGroup] => 0
            [GroupID] => 0
            [Published] => 1
            [PublishTime] => 
            [TermID] => 11
            [TermSlug] => xcvxcvxcv
            [RelatedID] => 2
            [TermType] => article
        )

    [2] => Array
        (
            [CategoryID] => 9
            [CategoryName] => Test Images
            [Parent] => 0
            [Thumb] => 7
            [sort] => 2
            [ArticleID] => 2
            [ArticleCatgories] => 9,4,3
            [ArticleTitle] => vxcvxcvx
            [ArticleBody] => xcvxcvxcvxcv
            [InGroup] => 0
            [GroupID] => 0
            [Published] => 1
            [PublishTime] => 
            [TermID] => 11
            [TermSlug] => xcvxcvxcv
            [RelatedID] => 2
            [TermType] => article
        )
} 
```

并且由于文章属于多个类别，因此它会多次检索文章信息。如果它们具有相同的 ArticleID，我需要做的是将类别名称组合到一个子数组中，这样结果就变成了：

```
Array
(
    [0] => Array
        (
            [CategoryName] => array('Test Category','Test Image','Test Images');
            [Parent] => 0
            [Thumb] => 0
            [sort] => 8
            [ArticleID] => 2
            [ArticleCatgories] => 9,4,3
            [ArticleTitle] => vxcvxcvx
            [ArticleBody] => xcvxcvxcvxcv
            [InGroup] => 0
            [GroupID] => 0
            [Published] => 1
            [PublishTime] => 
            [TermID] => 11
            [TermSlug] => xcvxcvxcv
            [RelatedID] => 2
            [TermType] => article
        )
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T02:31:59.670

您可以使用[`array_reduce`](http://ca3.php.net/array_reduce)

```
$array = Array(
    "0" => Array("CategoryID" => 3,"CategoryName" => "Test Category","Parent" => 0,"Thumb" => 0,"sort" => 8,"ArticleID" => 2,"ArticleCatgories" => "9,4,3","ArticleTitle" => "vxcvxcvx","ArticleBody" => "xcvxcvxcvxcv","InGroup" => 0,"GroupID" => 0,"Published" => 1,"PublishTime" => null,"TermID" => 11,"TermSlug" => "xcvxcvxcv","RelatedID" => 2,"TermType" => "article"),
    "1" => Array("CategoryID" => 4,"CategoryName" => "Test Image","Parent" => 0,"Thumb" => 0,"sort" => 4,"ArticleID" => 3,"ArticleCatgories" => "9,4,3","ArticleTitle" => "vxcvxcvx","ArticleBody" => "xcvxcvxcvxcv","InGroup" => 0,"GroupID" => 0,"Published" => 1,"PublishTime" => null,"TermID" => 11,"TermSlug" => "xcvxcvxcv","RelatedID" => 2,"TermType" => "article"),
    "2" => Array("CategoryID" => 9,"CategoryName" => "Test Images","Parent" => 0,"Thumb" => 7,"sort" => 2,"ArticleID" => 2,"ArticleCatgories" => "9,4,3","ArticleTitle" => "vxcvxcvx","ArticleBody" => "xcvxcvxcvxcv","InGroup" => 0,"GroupID" => 0,"Published" => 1,"PublishTime" => null,"TermID" => 11,"TermSlug" => "xcvxcvxcv","RelatedID" => 2,"TermType" => "article"),
    "3" => Array("CategoryID" => 4,"CategoryName" => "Test A","Parent" => 0,"Thumb" => 0,"sort" => 4,"ArticleID" => 3,"ArticleCatgories" => "9,4,3","ArticleTitle" => "vxcvxcvx","ArticleBody" => "xcvxcvxcvxcv","InGroup" => 0,"GroupID" => 0,"Published" => 1,"PublishTime" => null,"TermID" => 11,"TermSlug" => "xcvxcvxcv","RelatedID" => 2,"TermType" => "article"),
    "4" => Array("CategoryID" => 9,"CategoryName" => "Test B","Parent" => 0,"Thumb" => 7,"sort" => 2,"ArticleID" => 2,"ArticleCatgories" => "9,4,3","ArticleTitle" => "vxcvxcvx","ArticleBody" => "xcvxcvxcvxcv","InGroup" => 0,"GroupID" => 0,"Published" => 1,"PublishTime" => null,"TermID" => 11,"TermSlug" => "xcvxcvxcv","RelatedID" => 2,"TermType" => "article")
);

$array = array_reduce($array, function ($a, $b) {
    is_null($a) ? $a = array() : null;
    if (!isset($a[$b['ArticleID']])) {
        $a[$b['ArticleID']] = $b ;
        $a[$b['ArticleID']]['CategoryName'] = array($b['CategoryName']);
    } else {
        $a[$b['ArticleID']]['CategoryName'][] = $b['CategoryName'];
    }
    return $a;
});

var_dump($array); 
```

输出

```
array
  2 => 
    array
      'CategoryID' => int 3
      'CategoryName' => 
        array
          0 => string 'Test Category' (length=13)
          1 => string 'Test Images' (length=11)
          2 => string 'Test B' (length=6)
      'Parent' => int 0
      'Thumb' => int 0
      'sort' => int 8
      'ArticleID' => int 2
      'ArticleCatgories' => string '9,4,3' (length=5)
      'ArticleTitle' => string 'vxcvxcvx' (length=8)
      'ArticleBody' => string 'xcvxcvxcvxcv' (length=12)
      'InGroup' => int 0
      'GroupID' => int 0
      'Published' => int 1
      'PublishTime' => null
      'TermID' => int 11
      'TermSlug' => string 'xcvxcvxcv' (length=9)
      'RelatedID' => int 2
      'TermType' => string 'article' (length=7)
  3 => 
    array
      'CategoryID' => int 4
      'CategoryName' => 
        array
          0 => string 'Test Image' (length=10)
          1 => string 'Test A' (length=6)
      'Parent' => int 0
      'Thumb' => int 0
      'sort' => int 4
      'ArticleID' => int 3
      'ArticleCatgories' => string '9,4,3' (length=5)
      'ArticleTitle' => string 'vxcvxcvx' (length=8)
      'ArticleBody' => string 'xcvxcvxcvxcv' (length=12)
      'InGroup' => int 0
      'GroupID' => int 0
      'Published' => int 1
      'PublishTime' => null
      'TermID' => int 11
      'TermSlug' => string 'xcvxcvxcv' (length=9)
      'RelatedID' => int 2
      'TermType' => string 'article' (length=7) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T02:41:11.037

`ArticleID`您可以使用以下键构建一个新数组：

```
$final = array();
foreach ($rows as $row) {
    $id = $row['ArticleID'];
    if (isset($final[$id])) {
        // we've already seen this article
        // append to categoryname array
        $final[$id]['CategoryName'][] = $row['CategoryName'];
    } else {
        // this is the first article occurrence
        // turn categoryname into array first
        $row['CategoryName'] = array($row['CategoryName']);
        $final[$id] = $row;
    }
}

print_r($final); 
```

根据您的问题输出：

```
Array
(
    [2] => Array
        (
            [CategoryID] => 3
            [CategoryName] => Array
                (
                    [0] => Test Category
                    [1] => Test Image
                    [2] => Test Images
                )

            [Parent] => 0
            [Thumb] => 0
            [sort] => 8
            [ArticleID] => 2
            [ArticleCatgories] => 9,4,3
            [ArticleTitle] => vxcvxcvx
            [ArticleBody] => xcvxcvxcvxcv
            [InGroup] => 0
            [GroupID] => 0
            [Published] => 1
            [PublishTime] =>
            [TermID] => 11
            [TermSlug] => xcvxcvxcv
            [RelatedID] => 2
            [TermType] => article
        )

) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-04T02:28:42.363

这确实是一种快速而肮脏的方式，但这就是它的方式：

`$orig`是问题中提出的原始数组。

您基本上迭代数组并获取所有类别并将它们添加到`$keys`. 现在假设原始数组的所有其他键和值都相同（当然除了那个类别），您可以从该数组中选择任何元素并将其称为您的`$final`数组。

之后，您只需将类别值替换为组合类别的数组。

```
$orig = array();

$final = array();
$keys = array();

foreach($orig as $i)
{
    $keys[] = $i['CategoryName'];
}

$final = $orig[0];
$final['CategoryName'] = $keys; 
```

# objective-c - 将图像添加到 XCode 项目

> ID：12719468
> 
> 赞同：0
> 
> 时间：2012-10-04T02:21:24.397
> 
> 标签：objective-c, uiimage

我正在尝试将图像设置为背景而不是颜色。这是我现在正在使用的代码：

```
[testing setBackgroundColor:color];
[testing setFont: [UIFont fontWithName:@"Helvetica" size:33]]; 
```

是否有另一个 [测试集] 对象将背景设置为图像而不是颜色？我认为这是不对的：

```
[testing setImage:[UIImage imageNamed:@"test.png"] forState:UIControlStateNormal]; 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T02:25:21.790

您可以使用以下内容：

```
[testing setBackgroundColor:[UIColor colorWithPatternImage:[UIImage imageNamed:@"test.png"]]]; 
```

就个人而言，我建议改用 UIImageView。

请注意，使用 colorWithPatternImage 将重复图像以填充视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T02:27:51.583

尝试

```
testing.backgroundColor = 
[UIColor colorWithPatternImage:[UIImage imageNamed:@"test.png"]]; 
```

另一种可能的解决方案是在您的 nib/storyboard 中创建一个 UIImageView 在属性检查器中设置图像并在 Editor > Arrange > send to back 中发送回

# javascript - 是否将对 javascript 数组的引用重新分配给原始数组使用的另一个空数组可用内存？

> ID：12719469
> 
> 赞同：0
> 
> 时间：2012-10-04T02:21:36.910
> 
> 标签：javascript, performance, memory

所以假设你有一个数组：

```
var array = [1, 2, 3, 4, 5, 6] 
```

然后将对该数组的引用重新分配给一个新的空数组：

```
array = []; 
```

既然不再有对它的引用，那么该原始数组是否已从内存中删除？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T02:23:22.100

可能不会立即（作为重新分配的一部分），但只要对它的引用计数下降到`0`（没有其他变量指向*该*数组），它就可以被垃圾收集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T02:28:38.740

答案是否定的（如果 var 名称不同 [看到您更改了问题]），答案是否定的，就像在您的问题中添加的新示例一样。在 var 名称不同的情况下，如果需要，您可以通过使原始数组为空来释放一些内存，但是它们都会占用空间。在数组 2 中，您实际上是在使用第一个数组的内容创建一个新数组。对象（js 中的 assoc 数组）是另一回事，但要遵循上面提到的引用规则。

如果您在同一范围内使用相同的 var 名称，则可以。第二次调用将从第一个场景中释放内存

# matlab - 如何手动设置颜色栏中的范围？

> ID：12719470
> 
> 赞同：6
> 
> 时间：2012-10-04T02:21:50.267
> 
> 标签：matlab, plot, colorbar

我有广泛的值，在绘制为散点图（x，y，z）时，显示 z 轴的颜色条显示了广泛的值，现在我对较低范围的值不感兴趣。有什么方法可以改变彩条的范围。我有以下部分要绘制的代码，我还打算绘制对数图。例如。我想将日志图中的范围设置为 14 到最大值。

我希望一些值根本不显示。以便彩条的范围有限，例如从 14 到最大值。目前，它在对数图中显示为从 9 到最大值。

```
scatter(x(1:end-1), y(1:end-1), 5, gnd);

title('G plot (m^-^2)');

colorbar('eastoutside');

xlabel(' X-axis (microns)');

ylabel('Y-axis (microns)');

figure;

log_g=log10(gnd);

scatter(x(1:end-1), y(1:end-1), 5,log_g);

colorbar('eastoutside');

xlabel(' X-axis (microns)');

ylabel('Y-axis (microns)');

title('G Density, log plot (m^-^2)'); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-04T04:25:24.603

我相信这`caxis`是您正在寻找的命令。用法：

```
caxis([minValue maxValue]) 
```

像这样使用`caxis`，范围之外的所有值`[minValue maxValue]`将分别用颜色图中的最低或最高值着色。

由于`colorbar`和朋友使用`colormap`，如果要调整使用的颜色数量，则必须调整当前颜色图。这样做：

```
%# get current colormap
map = colormap;  

%# adjust for number of colors you want
rows = uint16(linspace(1, size(map,1), NUM_COLORS)) ;
map = map(rows, :);

%# and apply the new colormap
colormap(map); 
```

当然，与此结合`caxis`是最强大的。

如果您不想显示超出范围的某些值，那不是`colorbar`or的工作`caxis`，这取决于您 - 您必须调整绘制的数据，以便您不想绘制的所有*值*都是`NaN`. 这样做会让 Matlab 明白你不想绘制这些数据：

```
data( indices_to_data_not_to_plot )  = NaN;
surf(x,y,data);  %# or whatever you're using 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-22T14:53:20.107

尝试这个：

```
cmap = colormap; % get current colormap
cmap=cmap([min max],:); % set your range here
colormap(cmap); % apply new colormap
colorbar(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T07:58:46.740

这个怎么样？

```
% don’t know why, but apparently your x and y are one value too long?
x = x(1:end-1); y = y(1:end-1); 

% only plot values of 14 or higher
scatter(x(gnd>=14), y(gnd>=14), 5, gnd(gnd>=14); 
```

# cakephp-2.0 - 如何在搜索前隐藏代码不显示？

> ID：12719471
> 
> 赞同：0
> 
> 时间：2012-10-04T02:21:51.183
> 
> 标签：cakephp-2.0

嗨，我只是想在单击搜索按钮之前使代码不显示。我想隐藏的原因是它显示了多个数据并且数据库中有多个数据。

所以我想先显示搜索表单，当我点击搜索时，结果将显示在下面和上面的表单中。如何在搜索之前暂时隐藏代码。我真的迷路了，我对代码不是很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T02:52:02.990

您可以使用 jquery 来显示/隐藏页面的元素。此外，您可以在页面初始加载时将元素的 css 设置为 display:none 以隐藏结果。然后，当您准备好显示搜索结果时，您只需使用 jquery 中的 .show() 即可。

```
<head>
  <script type="text/javascript">  
            $(document).ready(function () {
                $('#results').hide();
            });     
  </script>    
</head>        
<body>
  <script src="js/jquery-1.8.2.min.js" type="text/javascript"</script>
  <div id="results"></div>
</body> 
```

# php - 添加此电子邮件不适用于 URL 参数

> ID：12719476
> 
> 赞同：0
> 
> 时间：2012-10-04T02:22:28.487
> 
> 标签：php, javascript, joomla, addthis

似乎 Addthis 电子邮件功能无法识别 URL 查询参数并放置错误的共享链接。这是在 Joomla 网站上使用的。

下面的例子

```
http://lgjobs.com.au/posting?id=48209 
```

有没有办法克服这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-05-29T14:35:06.510

我正在处理同样的问题，解决它的方法是在你有 addThis 的页面中的 javascript 代码中声明这个变量：

```
<script type="text/javascript">
  var addthis_share = {
     url: window.location.href
  }
</script> 
```

这样，您共享的网址就是当前网址（包含所有参数）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T14:42:11.357

如果要将其作为参数附加到 url 请求，请确保对 url 进行 url 编码。所以你的例子：

[http://lgjobs.com.au/posting?id=48209](http://lgjobs.com.au/posting?id=48209)

应该看起来像：

http%3A%2F%2Flgjobs.com.au%2Fposting%3Fid%3D48209

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T08:43:35.923

AddThis 有两个版本。一个是插件，另一个是模块。这是哪一个？选择了哪个电子邮件问题？

我成功地将 AddThis 模块与 Joomla 2.5.7 一起使用，它适用于电子邮件。

# android - 从 res 中设置 ImageView 中的大图像会导致 App 崩溃

> ID：12719479
> 
> 赞同：1
> 
> 时间：2012-10-04T02:22:44.940
> 
> 标签：android, imageview, out-of-memory

我有一个我想在我的应用程序中使用的 .png 文件。这张图片相当大，大约 328x32765 像素，大小为 751KB，位于我的 res 文件夹中。我在尝试将此图像设置到我的布局中时收到“java.lang.OutOfMemoryError：位图大小超出 VM 预算”的错误消息。

我不确定它是否相关，但我在同一页面上也有大约 730 个按钮，加载和工作正常，但我认为这些按钮可能也使用了大量内存？

无论哪种方式，是否有一个简单的修复程序可以帮助解决此问题或使我的 .png 图像使用更少的内存？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T02:33:11.323

位图占用大量内存，如 android 网站本身关于位图的教程中所述

[显示位图](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)

编辑：

尝试使用函数“Bitmap.createScaledBitmap(Bitmap, width, height, filter);” 或尝试使用教程中提到的“BitmapFactory.Options”类。

“BitmapFactory.Options”类有很大帮助，因为它的功能本身可以帮助开发人员通过缓存加载的位图来最大限度地减少 VM 在加载位图时的使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T04:09:04.817

尽管您的图像有 731KB 大，但实际膨胀的位图大小将接近 41 兆字节。您收到错误是因为设备无法**一次**分配 41MB 。

不幸的是，除了加载图像的缩小版本之外，没有其他方法可以解决这个问题。

使用 Bitmap.Options 类并指定比例因子：

2 - 意味着使每边小两倍

3 - 小三倍，......

x - x 小倍

好消息是生成的膨胀位图大小将为 41/(x * x)MB：

2 - 41/4 = 10.25MB

3 - 41/9 = 4.5MB

4 - 41/16 = 2.6MB .....

试试这个并在多个设备上进行测试。

或者，将图像分解成相当小的图像并使用没有边框或分隔线的 ListView，这样您仍然会看到平滑的图像，但 ListView 也会根据需要处理启动和丢弃片段。（请注意，您将失去水平滚动的能力，因为 ListView 仅垂直滚动 - 以防万一您担心）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T04:09:20.090

Android 无法处理大位图 OOM 错误将发生。它不是 a=unexpected 错误，这是许多开发人员面临的一个大问题。尝试谷歌搜索许多文档，您会发现解释 OOM 错误。我在开发应用程序时也很挣扎。对于除去这一点，对大图像进行采样是唯一的一种方法。

```
 int scale = "Image byte length" / 320000;
    BitmapFactory.Options options = new BitmapFactory.Options();
    options.inSampleSize = scale / 2 + scale % 2* 2;
   decryptedimage=BitmapFactory.decodeByteArray(decryptedData,0,decryptedData.length,options); 
```

# html - d3.js 图形输出成高分辨率打印质量文件？

> ID：12719486
> 
> 赞同：30
> 
> 时间：2012-10-04T02:24:31.700
> 
> 标签：html, d3.js, photoshop, adobe-illustrator

有没有办法将基于 d3.js 的 html/js 中创建的图形、图表、地图等输出为具有出版物打印质量高分辨率的其他数据格式？

这些图表的图形非常棒，但是当打印在纸上并且高度像素化时将毫无用处。我试图避免在 Illustrator 中为矢量或 Photoshop 重新绘制它们。

我正在寻找的输出格式应该可以被 Illustrator 或 Photoshop 读取。并且最好在导出后不需要更多的视觉操作。如果我必须重新绘制或重新填充颜色或重新拍照以获得效果，那真的会违背目的。

谢谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-04T02:29:26.350

还有更复杂的方法，但一种快速、简单的方法是从 DOM 中复制 svg 元素（您可能还需要包含 css 文件），将其粘贴到文件中并使用扩展名 .svg 保存。之后，您可以在矢量编辑器中打开它。

还有一些方法可以将 d3.js 输出转换为`png`文件。`canvg`有人在[http://jsfiddle.net/plaliberte/HAXyd/](http://jsfiddle.net/plaliberte/HAXyd/)上整理了一个 jsfiddle 。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-10-04T03:28:09.020

现代浏览器支持`download`链接属性。如果您使用该属性创建指向图像的链接`download`，浏览器将下载它而不是在浏览器中打开它。

由于没有要下载的实际文件，您所要做的就是将您的 svg 字符串编码为 data-uri，您所要做的就是......

```
var download = d3.select("body").append("a").attr("href", "#")

download.on("click", function(){
      d3.select(this)
        .attr("href", 'data:application/octet-stream;base64,' + btoa(d3.select("#viz").html()))
        .attr("download", "viz.svg") 
    }) 
```

你可以在这里看到一个演示[http://bl.ocks.org/3831266](http://bl.ocks.org/3831266)你可以在 illustrator 中打开下载的文件没有任何问题。

但是有几个问题：您必须内联声明您的样式（您不能使用外部 css 样式表进行样式设置）。

一个快速而肮脏的解决方案是将 svg 代码输出到警报框：

```
download.on("click", function(){
  alert(d3.select("#viz").html())
}); 
```

并将警报复制到文本文件中并另存为 svg。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T11:26:00.247

对于我的 d3 图，建议的解决方案效果不佳。生成的导出 SVG 的某些属性（例如渐变）未正确呈现，并且看起来与 Chrome 显示的非常不同。

在我的情况下，图像是静态的，所以截图就足够了。但是，屏幕截图仅限于您正在使用的显示器的大小。但是，我很高兴找到了一个替代解决方案，webkit2png： http: [//www.paulhammond.org/webkit2png/](http://www.paulhammond.org/webkit2png/)

该工具允许在任意大小的屏幕上创建网站的屏幕截图。它非常适合转换静态 d3 图。我希望它可以帮助别人，因为它帮助了我。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-26T14:53:18.203

如果您愿意保存为高分辨率光栅图像，我发现最好的解决方案是使用 Pearl Crescent Page Saver，一个 Firefox 插件：

[https://addons.mozilla.org/en-US/firefox/addon/pagesaver/](https://addons.mozilla.org/en-US/firefox/addon/pagesaver/)

基本版本为您提供了缩放图像的选项 - 例如，缩放到 200% 将使 .png 的分辨率增加一倍（像素数的 4 倍），您可以通过简单的屏幕截图获得。

如果您需要矢量，并且在 Illustrator 中加载 svg 不适合您，您可以尝试渲染为超高分辨率 png，然后使用 Illustrator 的实时跟踪...

# mysql - 复杂的sql查询：根据tableTwo中的字段从tableOne中获取多个ID，更新到tableTwo

> ID：12719488
> 
> 赞同：0
> 
> 时间：2012-10-04T02:24:42.933
> 
> 标签：mysql, automation

在这里进退两难。。

我有一张桌子，我们称之为书架。该表具有以下字段：

[shelf_id，标题，latest_books]

然后我有一个带有字段的书籍表：

[book_id，shelf_id，标题，添加日期]

每本书都被分配到一个书架上。这就是我想做的...

对于每个书架，在书籍中查找分配给该书架的书籍，从这些书籍中获取 book_id 并将它们输入以逗号分隔的书架字段“latest_books”。为了使事情进一步复杂化（？）我只想要每个书架五个 book_id。如果这样更容易的话，我可以只用一个。.这是我可以用来手动执行此操作的查询：

```
update bookshelves
set latest_books = 
    (select book_id from books 
        where shelf_id = 1 
        order by date_added DESC 
        limit 0,1)
where shelf_id = 1; 
```

书架和书桌都有数万条记录，所以..我可以一个一个地做，但我会一整年都在做。

我在 CentOS 上的 MySQL 工作。我很酷使用脚本或其他任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T04:17:49.400

好的，所以我想通了..它有助于在这里详细输入...

我将书架 ID 导出到 csv，然后将它们放入 bash 脚本中的数组中。

```
shelves=(
1
...
...
99999
)

for i in "${shelves[@]}"
do
        query='update bookshelves set latest_books = (select book_id from books where shelf_id = '$i' order by date_addet desc limit 0,1) where latest_books = "" and shelf_id = '$i' ;'
        mysql -uxxxx  -pxxx database_name -e "$query"

done 
```

在测试数据库上运行脚本几次，看起来已经完成了我需要的操作。

# javascript - iOS/Javascript - 如何使用 Javascript 访问设备上的图像

> ID：12719489
> 
> 赞同：4
> 
> 时间：2012-10-04T02:24:45.427
> 
> 标签：javascript, html, ios, xcode

我正在开发一个原生 ios 应用程序，并尝试设置 javascript 以将捆绑资源添加到网页中。

是否可以使用本地捆绑资源并在 Web 视图中显示它们？

页面已全部设置好，我知道我想要图像的位置。我只需要一种方法来告诉 html 引用设备上的图像。所以当页面加载时我可以设置（img src =“/SomeDirectoryOnIphone/myImage.png”）。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T13:29:06.357

`/private/var/mobile/media/DCIM/100APPLE/`存储图像，但它们已编号。图像被命名`IMG_324.JPG`或任何数字。我不认为你可以调用它`myImage.png`。

# ruby-on-rails - 推送到 Heroku 会出现错误“我们很抱歉，但出了点问题。”

> ID：12719490
> 
> 赞同：0
> 
> 时间：2012-10-04T02:24:49.103
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我已经在这里待了一两个小时，但似乎无法弄清楚问题可能是什么。

我使用 sqlite3 进行开发，但在推送到 heroku 之前，我决定切换到 pg（使用 ubuntu），它在我的本地开发环境中运行良好。

然后我推到 Heroku 我不断得到一个空白包，如下：

```
We're sorry, but something went wrong. 
```

'这真的没有帮助。**是否有我可以通过 heroku 访问的生产日志文件？**

另外我最好的猜测是它与 bd 有关，也许它没有正确加载。我检查了我的 heroku 帐户并单击以下插件：

Heroku Postgres Dev :: Olive

现在我的数据库说大小为 6mb 但表 0，这是令人担忧的。**但是我不知道如何在 heroku 上查询我的数据库，而且网站上似乎没有界面来查看我的数据库。db 不会自动推送“git push heroku master”吗**

无论如何，db 是我目前最好的猜测，但我不能确定，我不知道该怎么做，因为我没有日志

编辑：

我能够使用以下命令检查 heroku 上的数据库：

```
heroku pg:psql 
```

来自[https://devcenter.heroku.com/articles/heroku-postgresql](https://devcenter.heroku.com/articles/heroku-postgresql) 但是，我的数据库中没有输入，我的开发数据库中有输入，但显然它没有转移到 heroku，有没有办法推送（或覆盖）你的heroku数据库与你的开发环境中的那个？

**凯尔：** 我试过水龙头的东西，连接数据库失败：

```
 Sequel::DatabaseConnectionError -> PG::Error: FATAL:  password authentication fai
led for user "pc"
FATAL:  password authentication failed for user "pc" however I get the error: 
```

在我的 ubuntu 机器上输入我的 pg 用户名，但是我的密码没问题，因为它在我的本地机器上工作

我的 database.yml 文件

```
development:
  adapter: postgresql
  encoding: utf8
  reconnect: false
  database: someapp_development
  pool: 5
  username: pc
  password: ***

# Warning: The database defined as "test" will be erased and
# re-generated from your development database when you run "rake".
# Do not set this db to the same as development or production.
test:
  adapter: postgresql
  encoding: utf8
  reconnect: false
  database: someapp_development
  pool: 5
  username: pc
  password: ***

production:
  adapter: postgresql
  encoding: utf8
  reconnect: false
  database: someapp_development
  pool: 5 
```

编辑：我检查了日志，实际上是数据库导致了问题，我表中的输入没有被推入 heroku 并且我的应用程序正在崩溃（我知道糟糕的设计）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T02:30:36.867

您可能需要迁移生产数据库

```
heroku run rake db:migrate
heroku restart 
```

如果您需要将数据导入您的 heroku 数据库，请参阅[**此**](https://devcenter.heroku.com/articles/taps#import-push-to-heroku)

```
 gem install taps   
 heroku db:push 
```

**编辑：** 尝试这种替代方法：

```
heroku db:push postgres://user:pass@localhost/dbname 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T06:24:35.277

如果我没记错的话，默认情况下，用户 postgres 在 Ubuntu 上没有设置数据库密码。这意味着，当您使用 postgres 操作系统用户帐户时，您只能登录该帐户。

假设您在盒子上具有 root 访问权限，您可以执行以下操作：

```
sudo -u postgres psql 
```

如果失败了，`database "postgres" does not exists error,`那么你很可能不在 Ubunutu 或 Debian 服务器上 :-) 在这种情况下，只需添加`template1`到命令中：

```
sudo -u postgres psql template1 
```

这些命令中的任何一个都因错误而失败`psql: FATAL: password authentication failed for user "pc"`然后检查文件`/etc/postgresql/8.4/main/pg_hba.conf:`必须有这样的行作为第一个非注释行：

```
local   all         postgres                          ident 
```

对于较新版本的 PostgreSQL，`ident`实际上可能是`peer`. 那也没关系。

在`psql`shell 中，您可以给**DB**用户`postgres`一个密码：

```
ALTER USER postgres PASSWORD 'newPassword'; 
```

现在您应该能够为 pgAdmin 提供 DB 超级用户的有效密码，它也会很高兴。:-)

# windows - Xna 文本在字符之间有额外的空格

> ID：12719492
> 
> 赞同：1
> 
> 时间：2012-10-04T02:24:58.073
> 
> 标签：windows, fonts, xna, spritefont

我正在制作一个新游戏，我想使用我自己的文本纹理。我遇到了这个很酷的工具，叫做 SpriteFont 2.0，它就像一个所见即所得的编辑器，用于为 XNA 中的 SpriteFont 文件制作纹理文件。我做了这个字体：![我的字体纹理](../Images/134325228c7c09737c640e4cc50d8547.png)

但我的问题是，当我将它放入 XNA 时，字母之间有很多额外的空间。例如，这应该说“这是一个测试”，但结果是这样的：![在此处输入图像描述](../Images/7978ab4ce7fdb9e7c8c5d83b9c68d34a.png)

我的纹理文件是否有问题，或者我的编程需要做些什么。`SpriteBatch`我只是在对象中使用了第一个 DrawString 方法。我也将纹理文件的内容导入更改为 Sprite Font Texture。我不知道为什么文本在字符之间有这么多的空间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T02:45:57.510

您可以在运行时更改 SpriteFont 对象的[Spacing 属性](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.graphics.spritefont.spacing(v=xnagamestudio.40).aspx)。将其设置为负值并查看字母是否更靠近。

```
SpriteFont myFont = ...;
myFont.Spacing = -10; 
```

或者，如果编辑器具有字距调整设置，那么这就是您真正想要的。Kerning 定义字母之间的间距，如下所示：

![字距调整示例](../Images/f0bc1809014ac0d0f75a85e122791e03.png)

* * *

如果您在屏幕上打印多行（作为一个绘图调用），您可能还需要调整垂直高度的[LineSpacing 属性。](http://msdn.microsoft.com/en-US/library/microsoft.xna.framework.graphics.spritefont.linespacing(v=xnagamestudio.40).aspx)

# c - 计算C中的一系列字符

> ID：12719494
> 
> 赞同：1
> 
> 时间：2012-10-04T02:25:09.873
> 
> 标签：c, character, counting

它所要做的就是计算用户输入的字符，然后打印出来。不能使用数组，必须由用户终止。我不知道这有什么问题。有小费吗？

```
#include <stdio.h>

int main( int argc, char *argv[] )
{
  int input;

  printf( "Enter a series of characters:\n" );

  input  = getchar( );

  while ( input != EOF )
    {
    input++;
    input = getchar( );
    }

  printf( "You entered %d characters.\n", input );

  return 0;

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T02:28:38.677

您是否打算`input`保留当前输入或已阅读的字符数？您目前似乎正在尝试将它用于两者，但它只能容纳一个或另一个。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-04T02:28:41.717

您的输入变量`input`也被用作计数器。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-04T02:28:52.193

您将`input`变量用于两个不同的事情：

*   获取下一个字符`stdin`
*   并计算输入的字符总数。

第一个用法搞砸了第二个：`input`用于存储下一个字符，您会覆盖字符数。

您需要 2 个不同的变量来实现两种不同的目的。

```
int input;
int characterCount = 0;

// your loop:
    characterCount++;
    input = getchar( ); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-04T02:29:39.830

内联评论

```
#include <stdio.h>

int main( int argc, char *argv[] )
{
  int input;

  printf( "Enter a series of characters:\n" );

  input  = getchar( );

  while ( input != EOF )
    {
/* Good so far - you have read a char from the user */
    input++;
/* Why are you increment the user entered char by 1 - you need a separate counter */
    input = getchar( );
/* Now you read another char from the user (to be mangled on next loop iteration */
    }

  printf( "You entered %d characters.\n", input );

  return 0;

} 
```

# mysql - 带计数的 SQL 查询

> ID：12719496
> 
> 赞同：0
> 
> 时间：2012-10-04T02:25:18.580
> 
> 标签：mysql, sql, sqlite

我有以下表格：

**列表**

*   id - 键
*   姓名

**物品**

*   id - 键
*   姓名

**项目清单**

*   list_id - 列出表的外键
*   item_id - 项目表的外键

我有以下查询：

```
SELECT l.id, l.name
FROM list l, list_item li
WHERE l.id = li.list_id 
```

我想将列表中的项目数添加到结果集中。我该怎么做呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T02:28:03.080

```
SELECT l.id, l.name, COUNT(li.item_id) AS item_count 
FROM list l
LEFT JOIN list_item ON l.id = li.list_id
GROUP BY l.id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T02:28:02.680

试试这个：

```
SUM(l.id = li.list_id) 
```

# python - 如何在 Python 中创建报表设计器

> ID：12719498
> 
> 赞同：0
> 
> 时间：2012-10-04T02:25:53.860
> 
> 标签：python, wxpython, report, desktop-application

如何在 Python 中创建报表设计器作为..

1.  独立的桌面应用程序。
2.  集成在自定义桌面应用程序中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T04:15:48.870

要查看的库：

[ReportLab](http://www.reportlab.com/)（我个人使用它），但我认为[PythonReports](http://pythonreports.sourceforge.net/)会满足您的需求。

这两个库都有示例代码段开始。

# php - PHP拆分数组以作为参数传递

> ID：12719499
> 
> 赞同：0
> 
> 时间：2012-10-04T02:25:57.763
> 
> 标签：php

> **可能重复：**
> [如何将可变数量的参数传递给 PHP 中的函数](https://stackoverflow.com/questions/5402333/how-to-pass-a-variable-number-of-parameters-to-a-function-in-php)

我试图在调用基于 get 请求的方法时动态填充参数。

例如：

假设我有一个包含四个值的数组：

`array(1, 2, 3, 4);`

现在我想将它传递给一个接受这四个参数的方法。但是，这需要是动态的，所以我不能只做例如`method($array[0], array[1], array[2], array[3])`.

我的问题是，如何获取可变长度的数组并将其传递给也可以接受不同参数的方法？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T02:31:16.290

您可以使用[call_user_func_array](http://www.php.net/manual/en/function.call-user-func-array.php)

```
function method($arg1, $arg2, $arg3, $arg4){
    echo "$arg1, $arg2, $arg3, $arg4";
}
call_user_func_array(method, array(1, 2, 3, 4));//prints 1, 2, 3, 4 
```

# actionscript-3 - AS3 - 出现奇怪的错误 1010

> ID：12719503
> 
> 赞同：0
> 
> 时间：2012-10-04T02:26:52.983
> 
> 标签：actionscript-3, typeerror

我收到错误：

```
TypeError: Error #1010: A term is undefined and has no properties. 
```

它所指的术语是创建的影片剪辑。创建代码如下：

```
var Cursor = new CursorImg();
GameMenu.addChild(Cursor); 
```

这是访问它的地方：

```
GameMenu.Cursor.gotoAndStop(1); 
```

我不知道这有什么问题，但是当它被触发时，我得到了那个错误。我已经将它与其他有效的代码进行了比较，除了影片剪辑及其父级的命名之外，它完全相同。

有谁知道这可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T04:52:39.570

您已经定义了变量`cursor`，`new CursorImg()`然后将其添加到`gameMenu`并尝试访问`gameMenu.cursor`，但实际上该电影中没有`gameMenu`名称为 的对象`cursor`。但是，您可以使用您定义的变量简单地访问附加的电影`cursor`。

```
cursor.gotoAndStop(1); 
```

在 AS3 中，您不能像我们在 AS2 中那样通过名称访问动态添加的影片剪辑。您只能借助类`getChildByName()`功能访问电影`MovieClip`。因此，您还可以访问该影片剪辑，例如

```
var cursor = new CursorImg();
gameMenu.addChild(cursor);
cursor.name = "cursor"; 
```

然后在您`class`喜欢的任何地方访问它

```
var cursor:MovieClip = gameMenu.getChildByName("cursor") as MovieClip;
cursor.gotoAndStop(1); 
```

仅供参考：添加到 stage 的任何东西通常都打包在 下`DisplayObject`，因此我们需要对其进行类型转换以获得正确的类型。

命名名称可能更好地练习**驼峰**`variable`式风格，因为标准方式是用于变量的**驼峰**式，并且仅对于 Class，每个单词的第一个字母应该是**CAPITAL**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T04:02:41.537

发布的信息数量有限，很难知道发生了什么，但看起来 Cursor 不是 GameMenu 的属性，只是一个孩子。

尝试这个：

```
var cursor = new CursorImg();
gameMenu.addChild(cursor);
cursor.name = "cursor"; 
```

和：

```
gameMenu.getChildByName("cursor").gotoAndStop(1); 
```

这并不是真正实现您想要的最佳方式，但其他方法取决于我不知道的代码结构。

另请注意，变量名称的 AS3 编码约定是使用 camelCase（第一个单词的第一个字母小写，下一个单词的第一个字母大写）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T05:57:38.950

给定您的代码片段，该`Cursor`变量是函数本地的，因为它是在某个函数内部定义的，而不是在任何函数外部定义的，这样它将成为一个类的属性。因此，将前者分离`var cursor:MovieClip;`并`cursor=new CursorImg();`放在任何功能之外，并再次测试。我想你需要经常引用那个“光标”，这样`getChildByName`调用会以某种方式降低性能。

# visual-studio-2012 - Visual Studio 2012 IIS Express 8 全新安装 - 无法连接

> ID：12719504
> 
> 赞同：15
> 
> 时间：2012-10-04T02:26:54.393
> 
> 标签：visual-studio-2012, iis-express, iis-8

在 Visual Studio 2010 + IIS Express 7 上，我能够使用 IIS Express 作为服务器并浏览站点。

我已经安装了带有 IIS Express 8 的 Visual Studio 2012（在 Windows 7 64 位上），但我无法浏览它上面的单个站点。此外，当我查看日志文件（\Logs 和 \TraceLogFiles）时，我什至看不到任何 2012/IISExpress 8 应用程序的单个日志条目，更不用说要查看的错误了。

查看 applicationhost.config，我确实看到了我正在尝试使用正确的路径、apppool 和端口运行的站点。

但是当尝试运行它时，IIS Express 8 启动，我得到一个异常长的暂停，然后我在浏览器中得到一个无法连接的错误。也就是说，在 IE9 中我得到“Internet Explorer 无法显示网页”，在 Chrome 中“糟糕！Google Chrome 无法连接到 localhost:60046”

有没有其他人遇到过这个？我需要做些什么来使用 VS2012 完成 IIS Express 8 的配置吗？

**2013 年 3 月 2 日**更新****

 **这仍然没有解决，但这里有一个症状和部分解决方案的列表。

**IIS Express 完全无法正常工作** 我最初在任何情况下都无法连接到 IIS Express。原来我有 2 个问题，一个与 DNS 有关，另一个似乎与 Visual Studio 2012 中的错误有关。

**问题 1：Windows DNS** 我已将 Windows wifi 连接设置为使用 Google 的 DNS 服务器，而不是将其设置为自动。这适用于：

*   IIS
*   Cassini（Visual Studio 内部网络服务器）
*   几乎其他任何东西

它不适用于：

*   尝试连接到 localhost 时的 IIS Express - 连接失败，即使从命令行运行 IIS Express，也不涉及 Visual Studio。

解决方案是将我的 DNS 设置重新设置为自动（并将我的路由器切换为使用 Google DNS）。

**问题 2：Visual Studio 2012 中的一个错误 Microsoft 尚未承认** 这让我知道 IIS Express 从命令行可以正常工作，剩下的唯一问题是从 Visual Studio 2012 连接到它。Cassini 和 IIS（不是 Express ) 来自 VS2012 工作正常，包括 localhost 和在 IIS Express 中失败的相同项目。

但是，当我尝试针对 IIS Express 运行时，会出现 IIS Express 托盘图标，过了一分钟，Visual Studio 似乎冻结了，然后托盘图标消失，并且在 Visual Studio 中出现了与此问题中所示相同的错误消息：

[在 VS2012 中调试 MVC 应用程序尝试启动 IIS Express 两次](https://stackoverflow.com/questions/14762646/debugging-mvc-application-in-vs2012-attempts-to-start-iis-express-twice)

一件奇怪的事情是，如果我右键单击该托盘图标并尝试在一分钟冻结期间打开浏览器，我会得到 Web 应用程序 - 它运行一分钟并按预期工作。然后当 Visual Studio 显然杀死它时它就死了。

但是，我无法确认 IIS Express 的运行次数是 w.brian 问题中的两倍。也就是说，这可能是完全相同的 Visual Studio 2012 错误，只是显示的症状略有不同。

**Microsoft 错误和付费墙**我已向 Microsoft 报告了该问题。他们开始和我一起诊断它，然后告诉我我需要支付 250 美元才能继续 - 我不准备这样做来帮助他们修复错误。

有几个关于此的错误报告：

我原来的错误报告： [http ://connect.microsoft.com/VisualStudio/feedback/details/766233/](http://connect.microsoft.com/VisualStudio/feedback/details/766233/)

第二个他们让我打开官僚机构： [http ://connect.microsoft.com/VisualStudio/feedback/details/779161/](http://connect.microsoft.com/VisualStudio/feedback/details/779161/)

w.brian 的错误报告： [https ://connect.microsoft.com/VisualStudio/feedback/details/778864/](https://connect.microsoft.com/VisualStudio/feedback/details/778864/)

但我怀疑这与微软在其客户和他们之间的付费墙中忽略的所有相同的错误，阻止他们实际收集足够的细节来识别这里存在错误。

由于 Microsoft 浪费了我足够多的时间，我转而只使用常规 IIS 作为解决方法。

那绝对是最新的。对不起大家。

更新 8/2013：遇到此问题的机器已经死机（洒了一些东西），而我的新机器没有此问题。我已向 Microsoft 建议他们与此问题的其他人联系。如果您仍然遇到问题，请在此处发表评论，以便他们知道如何与您联系。请记住，您可以编辑 StackOverflow 问题，因此您可以随时使用更多诊断信息自己更新此问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T16:30:52.917

我在我的机器上找到了问题。

当我检查我的 C:\Windows\system32\drivers\etc\hosts 文件时，我没有

```
 127.0.0.1   localhost 
```

在文件中。我记得“暂时”更改它以解决问题。重新添加丢失的记录解决了我的问题。

您可以简单地测试您的机器认为 localhost 是什么 IP `ping localhost`，并确保 127.0.0.1 被 ping，而不是其他 IP。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-18T22:07:52.603

我在 IIS express 8.0 下的 localhost 上运行我的 asp.net MVC4 项目时遇到了类似的问题，所以我最终卸载了 IIS 8.0 并安装了 IIS express 7.5，问题立即得到了解决：

*   卸载 IIS Express 8.0
*   删除我的文档\IISExpress 文件夹
*   安装 IIS Express 7.5（[链接到 IIS Express 7.5 下载](http://www.microsoft.com/en-us/download/details.aspx?id=1038)）

IIS Express 8.0 似乎与 VS 2012 一起安装，因此如果您有新安装或可能有服务包更新，这可能会升级您以前的 IIS express 版本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-23T02:27:59.990

我通过安装 WebMatrix（[下载](http://www.microsoft.com/web/webmatrix/)）解决了我的 IIS 问题。我运行了 WebMatrix，在 WebMatrix 中打开了一个站点，并且 IIS 启动得很好。关闭 WebMatrix 并在 VS 中运行一个 ASP.NET MVC 站点，它工作正常。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-13T15:11:57.217

您是否检查过您的网站是否发生了 http 绑定注册？（从命令提示符运行“netsh http show servicestate”命令将显示所有已注册的绑定并检查您的站点绑定“localhost:60046”是否存在）

如果您的站点绑定不存在，请尝试以下检查绑定注册失败的原因。

1.  打开命令提示符
2.  转到 IIS Express 安装文件夹 (%programfiles%\iis express)
3.  使用以下命令行 iisexpress.exe /site:"your-site-name" /trace:d 从命令行启动您的站点
4.  如果绑定注册失败，第 3 步将显示错误消息

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-16T09:46:47.990

如果其他人有这个问题 - 确保 applicationhost.config 中的任何网站绑定都引用有效地址。

当 applicationhost.config 绑定到特定 IP 地址时，我收到此消息，但当时该 IP 对主机无效（我通过 DHCP 预留分配了内部网络 IP，但我在不同的网络上） .

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-03-25T12:21:16.740

我知道原始发帖人已经回答了这个问题，但是对于那些通过谷歌到达这里的人来说，这里有一个可能的解决方案：[HTTPS stop working with IIS express](https://stackoverflow.com/questions/11201405/https-stopped-working-with-iis-express)**

# jquery-ui - 以编程方式更改 Jquery 选项卡焦点

> ID：12719508
> 
> 赞同：8
> 
> 时间：2012-10-04T02:27:31.013
> 
> 标签：jquery-ui, jquery, jquery-tabs

我正在使用 JQuery Tabs UI 元素的一个非常简单的实现。第一个选项卡中有一个表单，我试图用 onsubmit 事件加载第二个选项卡。在 ActionScript 中，我可以使用：

```
tabBar.selectedIndex = n; 
```

`selectedIndex`具有焦点的选项卡编号在哪里。有没有办法在 Jquery 中完成这项工作？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-28T03:40:30.097

**更新自 jQuery UI 1.9**

select 方法已被弃用，只支持更新活动选项。

您应该将所有对 select 方法的调用替换为对 option 方法的调用以更改活动选项。

```
// Activate the third panel
$( "#tabs" ).tabs( "option", "active", 2 ); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-04T16:56:29.180

对于那个很抱歉。我当时正在打电话，给你->

```
$('ele').tabs('select', index); 
```

LTR中标签`index`的表示在哪里`0 based`

**请参阅上面关于 jQuery UI 1.9+ 的答案。我的回答仅适用于 jQuery UI 1.8 及更低版本。**

# database - 从数据库中获取 ID 并放入 URI

> ID：12719517
> 
> 赞同：0
> 
> 时间：2012-10-04T02:28:21.913
> 
> 标签：database, codeigniter

我想从数据库中获取一个值的 ID 并用它来删除一个项目。这是我的代码：

此代码当前从数据库中获取一组记录，其中每条记录都有链接。我怎样才能做到这一点？

```
<h2>List of all polls in this site:</h2>
<?php echo '<table>';?>
<table border="1">
  <tr>
    <th>Title</th>
    <th>Text</th>    

    <th colspan="2">Action</th>        
  </tr>
<?php 
foreach($polls as $polls_item){
  echo "<tr>";
    echo "<td>". $polls_item['title'] ."</td>";
    echo "<td>". $polls_item['text'] ."</td>";
    echo "<td>". anchor('user/vote/'.$polls_item->id,'Vote') ."</td>";
    echo "<td>". anchor('admin/del/'.$polls_item->id,'Delete') ."</td>";        
  echo "</tr>"; 
}
?>

<?php echo anchor('admin/del/1','Delete'); ?>

</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T03:29:23.723

我假设你有一个管理员控制器，并且你在开始时加载了 admin_model ，这是你获得所有民意调查的地方

```
class Admin
....
function del($id = null)
{
  $this->admin_model->delete($id);
} 
```

然后在您的 admin_model 中 polls 是您的数据库的表名

```
class Admin_model
....
function delete($id)
{
 $this->db->delete('polls', array('id' => $id)); 
} 
```

我希望这足够清楚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T03:38:17.057

您`function del`的“管理员”控制器中有一个：

```
function del($item_to_delete) 
 {
   $this->your_model->delete_item($item_to_delete);
 } 
```

在您的模型中：

```
function delete_item($id)
 {
   $this->db->delete('mytable', array('id' => $id)); 
   // some successful message to return
 } 
```

请查看 Codeigniter[文档](http://codeigniter.com/user_guide/database/active_record.html#delete)

# ios - 保存多个注释 -NSUserDefaults

> ID：12719528
> 
> 赞同：0
> 
> 时间：2012-10-04T02:28:58.340
> 
> 标签：ios, nsuserdefaults, mkannotation

我遇到了如下所示的代码。在下面的代码中，我只能保存一个注释，但是我有一组注释，我无法用单个 NSUserDefaults 保存它们

```
 To save:

    NSUserDefaults *ud = [NSUserDefaults standardUserDefaults];
    [ud setDouble:location.latitude forKey:@"savedCoordinate-latitude"];
    [ud setDouble:location.longitude forKey:@"savedCoordinate-longitude"];
    [ud setBool:YES forKey:@"savedCoordinate-exists"];
    [ud synchronize]; 
```

编辑：

```
 -(void)viewDidLoad
        NSUserDefaults *ud=[NSUserDefaults standardUserDefaults];
            if([ud boolForKey:@"save-exist"])
            { NSMutableArray *udAnnotations=[[NSMutableArray alloc]initWithArray:
[ud objectForKey:@"annotationsArray"]];
                NSLog(@"%d",[udAnnotations count]);
            }
            else{
            [self addAnno];
            }

    -(void)addAnno
    {

    [mapView addAnnotations:annotationArray];
    NSUserDefaults *ud=[NSUserDefaults standardUserDefaults];
    [ud setObject:annotationArray forKey:@"annotationsArray"];
    [ud setBool:YES forKey:@"save-exist"];
    [ud synchronize];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T02:51:25.733

由于您已经有一个数组，只需使用`setObject:forKey:`和`arrayForKey:`

由于原始数组中的对象不是可以直接保存的类型，因此将它们的数据存储在字典中：

```
NSMutableArray *saveData = [[NSMutableArray alloc] initWithCapacity:originalData.count];
for(id location in originalData) {
    [saveData addObject:@{@"lat":[location latitude], @"lon":[location longitude]}];
}
[[NSUserDefaults standardUserDefaults] setObject:saveData forKey:@"annotationsArray"]; 
```

并在检索时转换：

```
NSMutableArray *restoredData = [[NSMutableArray alloc] init];
for(NSDictionary *data in [[NSUserDefaults standardUserDefaults] arrayForKey:@"annotationsArray"]) {
    [restoredData addObject:[[Location alloc] initWithLat:data[@"lat"] andLon:data[@"lon"]]];
}
// if restoredData.count is 0, there were no stored objects. 
```

几点注意事项：

*   如果您不使用 ARC，请记住释放分配的对象。
*   这使用了新的objective c 对象文字语法和字典访问语法。如果您不使用 xcode 4.5，则需要以传统方式构建和访问它们，`dictionaryWithObjectsAndKeys:`并且`objectForKey:`

# typescript - 在 TypeScript 中使用 jQuery 插件

> ID：12719529
> 
> 赞同：73
> 
> 时间：2012-10-04T02:29:02.637
> 
> 标签：typescript

使用打字稿时，我需要为我使用的每个外部 js 导入一个 plugin.d.ts 吗？换句话说，我需要创建一个包含所有接口的 jQuery.d.ts 吗？

* * *

## 回答 #1

> 赞同：102
> 
> 时间：2012-10-04T07:10:14.433

jQuery 插件（和其他基于插件的库）的问题在于，您不仅需要为基础库提供 library.d.ts 文件，而且还需要为每个插件提供 plugin.d.ts 文件。并且不知何故，这些 plugin.d.ts 文件需要扩展 library.d.ts 文件中定义的库接口。幸运的是，TypeScript 有一个漂亮的小功能可以让你做到这一点。

目前在`classes`项目中只能有一个类的单一锥形定义。因此，如果您定义一个`class Foo`您放入的成员`Foo`就是您所得到的。的任何附加定义都`Foo`将导致错误。但是，使用`interfaces`时，成员是附加的，因此如果您`interface Bar`使用一组成员定义，您可以再次定义“界面栏”以将其他成员添加到`interface`. 这是以强类型方式支持 jQuery 插件的关键。

因此，要添加对给定 jQuery 插件的支持，您需要为要使用的插件创建一个 plugin.d.ts 文件。我们在项目中使用[jQuery 模板](http://api.jquery.com/category/plugins/templates/)，所以这里是我们创建的 jquery.tmpl.d.ts 文件，以添加对该插件的支持：

```
interface JQuery
{
    tmpl(data?:any,options?:any): JQuery;
    tmplItem(): JQueryTmplItem;
    template(name?:string): ()=>any;
}

interface JQueryStatic
{
    tmpl(template:string,data?:any,options?:any): JQuery;
    tmpl(template:(data:any)=>string,data?:any,options?:any): JQuery;
    tmplItem(element:JQuery): JQueryTmplItem;
    tmplItem(element:HTMLElement): JQueryTmplItem;
    template(name:string,template:any): (data:any)=>string[];
    template(template:any): JQueryTemplateDelegate;
}

interface JQueryTemplateDelegate {
    (jQuery: JQueryStatic, data: any):string[];
}

interface JQueryTmplItem
{
    data:any;
    nodes:HTMLElement[];
    key:number;
    parent:JQueryTmplItem;
} 
```

我们做的第一件事就是定义添加到`JQuery`接口的方法。这些让您在键入时获得智能感知和类型检查`$('#foo').tmpl();`接下来我们向`JQueryStatic`界面添加了在您键入时显示的方法`$.tmpl();`最后[jQuery 模板](http://api.jquery.com/category/plugins/templates/)插件定义了一些自己的数据结构，因此我们需要为这些结构定义接口。

现在我们已经定义了额外的接口，我们只需要从使用的 .ts 文件中引用它们。为此，我们只需将以下引用添加到 .ts 文件的顶部即可。对于该文件，TypeScript 将看到基本的 jQuery 方法和插件方法。如果您使用多个插件，请确保您引用了所有单独的 plugin.d.ts 文件，您应该会很好。

```
/// <reference path="jquery.d.ts"/>
/// <reference path="jquery.tmpl.d.ts" /> 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2018-02-15T18:32:32.157

使用`.d.ts`声明文件可能会更好，但作为替代方案，您也可以使用 TypeScript 的[全局扩充和声明合并](https://www.typescriptlang.org/docs/handbook/declaration-merging.html)来将方法添加到 JQuery 的接口。您可以在任何 TypeScript 文件中放置类似以下内容：

```
declare global {
    interface JQuery {
        nameOfPluginMethod(arg: any): JQuery;
    }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-04T03:24:35.317

保存 .ts 文件不会自动触发 Visual Studio 中的编译。您将需要构建/重建来触发编译。

声明文件 (file.d.ts) 让 TypeScript 编译器可以从该文件中获取有关您正在使用的 JavaScript 库的更好的类型信息。您可以在一个文件或多个文件中定义所有接口；这不应该有任何区别。您还可以使用以下方式从外部库“声明”您正在使用的类型/变量：

```
declare var x: number; 
```

这将告诉编译器将 x 视为数字。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-09-05T19:50:23.443

我一直在为 jquery.inputmask 寻找一个 d.ts，最后创建了一个我自己的简单的。它在

[https://github.com/jpirok/Typescript-jquery.inputmask](https://github.com/jpirok/Typescript-jquery.inputmask)

或者您可以查看下面的代码。

它不会涵盖 jquery.inputmask 的所有情况，但可能会处理大多数情况。

```
 ///<reference path="../jquery/jquery.d.ts" />

interface JQueryInputMaskOptions {
    mask?: string;
    alias?: string;
    placeholder?: string;
    repeat?: number;
    greedy?: boolean;
    skipOptionalPartCharacter?: string;
    clearIncomplete?: boolean;
    clearMaskOnLostFocus?: boolean;
    autoUnmask?: boolean;
    showMaskOnFocus?: boolean;
    showMaskOnHover?: boolean;
    showToolTip?: boolean;
    isComplete?: (buffer, options) => {};
    numeric?: boolean;
    radixPoint?: string;
    rightAlignNumerics?: boolean;
    oncomplete?: (value?: any) => void;
    onincomplete?: () => void;
    oncleared?: () => void;
    onUnMask?: (maskedValue, unmaskedValue) => void;
    onBeforeMask?: (initialValue) => void;
    onKeyValidation?: (result) => void;
    onBeforePaste?: (pastedValue) => void;
}

interface inputMaskStatic {
    defaults: inputMaskDefaults;
    isValid: (value: string, options: inputMaskStaticDefaults) => boolean;
    format: (value: string, options: inputMaskStaticDefaults) => boolean;
}

interface inputMaskStaticDefaults {
    alias: string;
}

interface inputMaskDefaults {
    aliases;
    definitions;
}

interface JQueryStatic {
    inputmask: inputMaskStatic;
}

interface JQuery {
    inputmask(action: string): any;
    inputmask(mask: string, options?: JQueryInputMaskOptions): JQuery;
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-11-03T23:04:16.950

在为插件创建你自己的`.d.ts`文件之前，你应该检查它是否已经作为一个[definitelyTyped](https://github.com/DefinitelyTyped/DefinitelyTyped)库。例如，使用[Typings](https://github.com/typings/typings)，您可以运行以下命令：

```
typings install dt~bootstrap --global --save 
```

...并且无需任何额外代码，您就可以访问各种 Bootstrap 插件。

如果他们没有您正在寻找的插件，请考虑贡献您自己的定义。

# javascript - RequireJS从外部设置模块变量不生效

> ID：12719531
> 
> 赞同：1
> 
> 时间：2012-10-04T02:29:14.203
> 
> 标签：javascript, requirejs, js-amd, module-pattern

我在 requireJS 定义模块中设置变量时遇到问题，它完全没有生效。我有以下（缩减）示例来说明问题：

这是定义的模块：

```
define([], function () {
var testerString = "BaseLine";

var ShowTesterString = function () {
    console.log(testerString);
}

var setTesterString = function (pTesterString) {
    testerString = pTesterString;
}

return {
    testerString: testerString,
    ShowTesterString: ShowTesterString,
    setTesterString: setTesterString
};  
}); 
```

然后我将“TesterModule”设置为另一个的依赖项并运行以下代码行：

```
TesterModule.ShowTesterString();
TesterModule.testerString = "Change 1";
TesterModule.ShowTesterString();
TesterModule.setTesterString("Change in Setter");
TesterModule.ShowTesterString(); 
```

输出到控制台的是：

```
BaseLine 
BaseLine 
Change in Setter 
```

我原以为应该是：

```
BaseLine 
Change 1
Change in Setter 
```

似乎仅通过执行 variable = blah 在模块中设置变量没有任何效果，似乎需要在模块的方法中设置变量。谁能向我解释这是为什么？还是我编码错误？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T02:33:25.357

据我所知，对 RequireJS 不太熟悉，这是一个纯 JavaScript 问题。改变

```
console.log(testerString);
// to
console.log(this.testerString); 
```

和改变

```
testerString = pTesterString;
// to
this.testerString = pTesterString; 
```

这样您就可以获取/设置匿名函数返回的对象中的值，而不是关闭`var testerString`变量。如果您使用与返回的对象键不同的变量名，则可以澄清当前代码中发生的情况：

```
define([], function () {
    var foo = "BaseLine";

    var ShowTesterString = function () {
        console.log(foo);
    }

    var setTesterString = function (pTesterString) {
        foo = pTesterString;
    }

    return {
        testerString: foo,
        ShowTesterString: ShowTesterString,
        setTesterString: setTesterString
    };  
}); 
```

此外，作为[风格问题](http://jslint.com)，最好使用“普通”函数声明：

```
function ShowTesterString () {
    ...
} 
```

而不是使用`var ShowTesterString = function () { ... }`, 就像在你的代码中一样。

# javascript - Google Maps API v3 - 自定义信息框

> ID：12719532
> 
> 赞同：0
> 
> 时间：2012-10-04T02:29:23.213
> 
> 标签：javascript, google-maps

我正在通过 Google Maps API 工作，到目前为止有以下内容：

```
var infowindow = null;

$(document).ready(function () { initialize();  });

function initialize() {

    var centerMap = new google.maps.LatLng(39.828175, -98.5795);

    var myOptions = {
        zoom: 4,
        center: centerMap,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    }

    var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

    setMarkers(map, sites);
    infowindow = new google.maps.InfoWindow({
            content: "loading..."
        });

    var bikeLayer = new google.maps.BicyclingLayer();
    bikeLayer.setMap(map);
}

var sites = [
    ['Mount Evans', 39.58108, -105.63535, 4, 'This is Mount Evans.'],
    ['Irving Homestead', 40.315939, -105.440630, 2, 'This is the Irving Homestead.'],
    ['Badlands National Park', 43.785890, -101.90175, 1, 'This is Badlands National Park'],
    ['Flatirons in the Spring', 39.99948, -105.28370, 3, 'These are the Flatirons in the spring.']
];

function setMarkers(map, markers) {

    for (var i = 0; i < markers.length; i++) {
        var sites = markers[i];
        var siteLatLng = new google.maps.LatLng(sites[1], sites[2]);
        var marker = new google.maps.Marker({
            position: siteLatLng,
            map: map,
            title: sites[0],
            zIndex: sites[3],
            html: sites[4]
        });

        var contentString = "Some content";

        google.maps.event.addListener(marker, "click", function () {
            //alert(this.html);
            infowindow.setContent(this.html);
            infowindow.open(map, this);
        });
    }
} 
```

我试图创建一个[小提琴](http://jsfiddle.net/ZWpUm/)，但它没有出现。

所以，地图支持多个位置和信息框，但我仍然很困惑的部分是自定义信息框。我做了一些搜索并看到了[这个问题/答案](https://stackoverflow.com/questions/3955395/google-map-api-v3-how-to-get-list-of-custom-infoboxes-custom-overlays)，但我无法准确理解它是如何工作的。所以，假设我有我的`#map_canvas`地图，然后在此之外，我有一个现有的`#info`div（我希望加载每个信息框）。所以 - 样式没有在 Google Maps API 中定义，它是一个现有的元素，应该作为信息框。

任何人都能够推动我（或者在这种情况下，推动会很棒）以帮助我更好地理解如何做到这一点？[可以在这里](http://i50.tinypic.com/denzg9.jpg)找到我在想什么的快速屏幕截图。地图顶部的深红色框是目标。

自定义标记和“活动”状态（所选标记的金色图标）也是另一个挑战，但我还没有放弃对这些的所有希望。任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T02:45:52.843

已经有一段时间了，但这应该可以。

创建标记时，将要附加的任何数据附加到此标记。

这是使用 setMarkers 函数。很高兴你添加了它（想知道你的循环在哪里）

在 html 中有你的 div 来获取这些数据，比如

```
 <div id="myDivID"></div> 
```

在您的 js 中添加对它的引用并在其中插入 html

```
function setMarkers(map, markers) {
    var myContentDiv = document.getElementById('myDivID');//Reference to you DOM elem  

    for (var i = 0; i < markers.length; i++) {
        var sites = markers[i];
        var siteLatLng = new google.maps.LatLng(sites[1], sites[2]);
        var marker = new google.maps.Marker({
            position: siteLatLng,
            map: map,
            title: sites[0],
            zIndex: sites[3],
            html: sites[4]
        });

        var contentString = "Some content";
        //marker.xtraData = 'SomeExtraData';//You can even add more data this way

        google.maps.event.addListener(marker, "click", function () {
            //alert(this.html);
            var myTemplate = '<h1>'+this.title+'<h1><p>'+this.html+'</p>';

            myContentDiv.innerHTML = myTemplate;//Inset this html inside link
            //infowindow.setContent(this.html);
            //infowindow.open(map, this);
        });
    }
} 
```

根据您在做什么，您可能还想查看传单。它比移动浏览器上的谷歌地图快很多，而且比ios6地图好，呵呵。

# java - GWT：我如何处理 mouseUp 事件？

> ID：12719534
> 
> 赞同：2
> 
> 时间：2012-10-04T02:29:33.413
> 
> 标签：java, gwt

在 GWT 中，如何在拖动元素时获取“mouseUp”事件？

我想得到以下流程：

*   鼠标按下
*   鼠标移动
*   ... 更多 mouseMove 可能...
*   鼠标向上

当我不移动光标时，我可以得到“mouseDown”和“mouseUp”，但是当我移动光标时，我不再得到“mouseUp”事件。

我试图同时放入`event.preventDefault();`“mouseDown”和“mouseMove”处理程序无济于事。

请帮忙。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T07:31:57.607

对于 DnD，您通常需要[`setCapture`](http://google-web-toolkit.googlecode.com/svn/javadoc/2.4/com/google/gwt/user/client/Event.html#setCapture%28com.google.gwt.dom.client.Element%29). [`releaseCapture`](http://google-web-toolkit.googlecode.com/svn/javadoc/2.4/com/google/gwt/user/client/Event.html#releaseCapture%28com.google.gwt.dom.client.Element%29)当你停止拖动时不要忘记（例如鼠标向上和/或退出键）。

看看 的代码`com.google.gwt.user.client.ui.DialogBox`，它就是这样做的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T07:32:04.990

当然，MouseUp 处理程序仅在您使用 widtet 时才有效。这就是为什么您不能使用它进行拖放，因为一旦您移出小部件，它就不会对 MouseUp 事件做出反应。

这是一个简单的例子：

```
package XXX.client.XXXXXX;

import com.google.gwt.event.dom.client.MouseDownEvent;
import com.google.gwt.event.dom.client.MouseDownHandler;
import com.google.gwt.event.dom.client.MouseUpEvent;
import com.google.gwt.event.dom.client.MouseUpHandler;
import com.google.gwt.user.client.ui.Label;
import com.google.gwt.user.client.ui.RootPanel;

public class MouseUp {
    public MouseUp(){
        Label label = new Label("hallo");
        label.getElement().getStyle().setProperty("backgroundColor","red");
        RootPanel.get().add(label);

        label.addMouseDownHandler(new MouseDownHandler() {

            @Override
            public void onMouseDown(MouseDownEvent event) {
                Label label = new Label("onMouseDown");
                RootPanel.get().add(label);             
            }
        });
        label.addMouseUpHandler(new MouseUpHandler() {

            @Override
            public void onMouseUp(MouseUpEvent event) {
                Label label = new Label("onMouseUp");
                RootPanel.get().add(label);                     
            }
        });
    }
} 
```

如果您想使用拖放功能，我建议您查看

*   [http://code.google.com/p/gwt-dnd/](http://code.google.com/p/gwt-dnd/)
*   [http://dev.w3.org/html5/spec/dnd.html](http://dev.w3.org/html5/spec/dnd.html)
*   GWT 处理程序“.addDrag ....”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T07:10:14.310

尝试在 MouseDown 事件中附加一个 MouseUp 处理程序（即在 onMouseDown() 中）。

# c++ - 在 Windows 中创建文件夹的快捷方式

> ID：12719537
> 
> 赞同：0
> 
> 时间：2012-10-04T02:29:49.970
> 
> 标签：c++, directory, shortcut

任何人都知道创建文件夹快捷方式的修复方法。根据下面链接中的文章，您只需将 CoCreateInstance 的第一个参数更改为 CLSID_FolderShortcut，它将创建文件夹快捷方式而不是文件快捷方式。情况并非如此，它确实创建了快捷方式，但它不起作用。

查看快捷方式的属性时，“目标类型”为空，应该是“文件夹”。我正在 Windows 7 上尝试此操作。使用示例代码创建文件快捷方式可以正常工作。

[http://msdn.microsoft.com/en-us/library/bb776891(VS.85).aspx#Shellink_Creating_Shortcut](http://msdn.microsoft.com/en-us/library/bb776891(VS.85).aspx#Shellink_Creating_Shortcut)

# java - 在 2 个不同的团队之间创建一个赢/输记录方法

> ID：12719540
> 
> 赞同：1
> 
> 时间：2012-10-04T02:30:11.740
> 
> 标签：java

如何创建记录 2 个不同团队之间的赢/输的方法？这是团队对象和构造函数。

```
public class NFLTeam4
{   private int win;
    private int loss;
    private String team;

public NFLTeam4(String teamName)
{   win = 0;
    loss = 0;
    team = teamName;
}
public NFLTeam4(int w, int l)
{   win = w;
    loss = l;
}
} 
```

这是我尝试创造一种赢得比赛的方法。

```
public class NFLGameDay4{
   public static void main(String[] args){  
    NFLTeam4 falcons = new NFLTeam4("Falcons");
    NFLTeam4 chiefs = new NFLTeam4("Chiefs");
    NFLTeam4 jets = new NFLTeam4("Jets");
}       

public NFLTeam4 winAGame(NFLTeam4 b)
{   int win = 1;
    int loss = 0;
    return new NFLTeam4(win, loss);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T03:15:29.080

首先，看起来你的`NFLTeam4`班级能够代表一个团队......

```
public NFLTeam4(String teamName) {   
    win = 0;
    loss = 0;
    team = teamName;
} 
```

...或团队的记录...

```
public NFLTeam4(int w, int l) {   
    win = w;
    loss = l;
} 
```

但不能同时提供：无法预先提供团队名称，然后再修改记录。要纠正这一点（从而使管理团队的记录成为可能），请考虑删除第二个构造函数（第`int w, int l`一个）并创建两种方法来为您处理更改记录：

```
public void addWin() { 
    ++win;
}

//similar code for addLoss 
```

请注意，您可能需要添加类似`getWinCount`的方法。您要添加什么以及如何编写代码取决于您，这只是为了让您入门。

现在`winAGame`只需要调用`addWin`提供的团队 ( `NFLTeam4 b`)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T03:15:03.500

`Map`您可以在`NFLTeam4`课堂上创建一个结果。

```
public class NFLTeam4
{
  private enum RESULT { WIN, LOSS };
  private Map<RESULT, List<NFLTeam4>> results = new HashMap<RESULT, ArrayList<NFLTeam4>>;
  // you can leave the constructor and other variables as they are

  public void winAGame(NFLTeam4 b) {
    win = win + 1;
    // Now check and add to your results map 
    // you will need to make sure your map is initialised properly
    results.get(RESULT.WIN).add(b);
  }
} 
```

你在你的 NFLTeam4 对象中封装了一场比赛的输赢行为。您还可以扩展`RESULT`枚举以包含有关结果的日期、比赛编号、地点等的一些信息。

这只是说明它是如何工作的。您应该考虑如何根据要求设计对象。

# css - 在本地加载 CSS，但不在 Heroku 中加载 Rails 应用程序

> ID：12719541
> 
> 赞同：54
> 
> 时间：2012-10-04T02:30:18.850
> 
> 标签：css, ruby-on-rails, heroku, twitter-bootstrap

我正在关注 Rails 启动前注册教程。Bootstrap 在 heroku 上运行良好，但后来我修改了 bootstrap_and_override 文件以包含一个徽标。在本地启动 Rails 服务器并查看时，样式与我预期的引导程序相同，并且出现了新的标头徽标。

就像我之前做的那样，我运行 rake assets:precompile 并推送到 git - 遵循本教程[http://railsapps.github.com/rails-heroku-tutorial.html](http://railsapps.github.com/rails-heroku-tutorial.html)在 heroku 上显示 css 之前工作。html 正在显示，但似乎缺少 css 和 bootstrap。

有没有人有任何想法？

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2013-08-29T19:11:09.897

`bundle exec rake assets:precompile`在本地代码上运行

提交更改并部署到 heroku

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2013-06-27T15:28:11.037

有同样的问题，我不知道它将来是否会帮助其他人，但我在“git push heroku master”推送中得到了这个：

警告：

```
 Include "rails_12factor" gem to enable all platform features 
```

更新了我的 gemfile，

```
 *group :production, :staging do
      gem 'pg'
      gem 'rails_12factor'
    end* 
```

再次运行它，令我高兴的是它安装了这些：

```
 Installing rails_serve_static_assets (0.0.1)
           Installing rails_stdout_logging (0.0.1)
           Installing rails_12factor (0.0.2) 
```

之后网站运行完美。希望对某人有所帮助，我对这一切都很陌生。

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2014-09-01T01:33:35.613

检查 /config/environments/production.rb 中是否将这些设置为 true

`config.cache_classes = true config.serve_static_assets = true config.assets.compile = true config.assets.digest = true`

git add、git commit 并推送到 heroku。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-11-22T20:49:46.007

如果您使用 sass...在您遇到所有其他麻烦之前...请确保您没有在资产文件夹中混合 .css 和 .scss 文件。
Heroku 在编译资产时似乎很难将两者混合在一起。我无法解释为什么它是一个准确的解释......但是，根据我自己的经验，我必须做的就是解决这个问题，只需将任何 .css 文件重命名为 .scss。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-10-05T17:32:43.773

在尝试了 stackoverflow 可能建议的所有内容后想通了。我只是检查了 git 状态，看到我有一堆未提交的文件（以为这会被 git push heroku master 拾取），然后添加、提交并推送到 git。然后我重新开始，运行捆绑安装，预编译资产并部署到 heroku，它正在工作。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-07-03T06:48:00.440

我在 rails4 中遇到了同样的问题，通过添加 a. `gem 'rails_12factor'` 湾。`bundle exec rake assets:precompile`

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-03-29T14:06:50.710

这是一个很长的镜头，但如果您使用的是 Chrome，请尝试按`Ctrl`++`Shift`重新`R`加载页面，因为 Chrome 有时会缓存旧的 CSS 设置。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-11-08T10:14:42.353

在生产环境中加载资产：

[如何在生产轨道中加载资产](https://taimoorchangaizpucitian.wordpress.com/2015/11/08/rails-production-environment-assets-loading/)

注意：点击以上链接后

```
rm -rf tmp/*
rm -rf public/assets/*
RAILS_ENV='production' rake assets:precompile 
```

然后重启你的服务器

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-10-05T12:15:47.497

我刚刚在一个应用程序上遇到了类似的问题。看看[这个](https://stackoverflow.com/questions/12624376/getting-my-images-in-css-to-work-on-rails-and-asset-pipeline-with-upgraded-app-o)帖子...

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-10-31T16:42:50.253

当您克隆应用程序并将 CDN 用于您的资产时，也会发生此问题。

如果您的 heroku 应用程序是一个临时站点，请`config.action_controller.asset_host`注释掉。`production.rb`

* * *

## 回答 #11

> 赞同：-3
> 
> 时间：2015-02-06T15:29:33.523

我不得不跑`heroku run rake css:rebuild`

# python - 使用 PRAW 在 Python 中从 Reddit API 解码 JSON

> ID：12719542
> 
> 赞同：3
> 
> 时间：2012-10-04T02:30:24.437
> 
> 标签：python, json, api, gtk, reddit

我在 Python/GTK 应用程序中使用 PRAW for Reddit API。我已经成功使用 API，但我似乎无法解码 JSON 以供使用。应该知道，我是 Python 和 GTK 应用程序的初学者。

```
# -*- Mode: Python; coding: utf-8; indent-tabs-mode: nil; tab-width: 4 -*-
### BEGIN LICENSE
# This file is in the public domain
### END LICENSE

import gettext
from gettext import gettext as _
gettext.textdomain('redditreader')

from gi.repository import Gtk # pylint: disable=E0611
import logging
logger = logging.getLogger('redditreader')

from redditreader_lib import Window
from redditreader.AboutRedditreaderDialog import AboutRedditreaderDialog
from redditreader.PreferencesRedditreaderDialog import PreferencesRedditreaderDialog

import praw

import json
import simplejson
from pprint import pprint

# See redditreader_lib.Window.py for more details about how this class works
class RedditreaderWindow(Window):
    __gtype_name__ = "RedditreaderWindow"

    def finish_initializing(self, builder): # pylint: disable=E1002
        """Set up the main window"""
        super(RedditreaderWindow, self).finish_initializing(builder)

        self.AboutDialog = AboutRedditreaderDialog
        self.PreferencesDialog = PreferencesRedditreaderDialog

        # Code for other initialization actions should be added here.
r = praw.Reddit(user_agent='example')
try:
    submissions = r.get_front_page(limit=5)
    [str(x) for x in submissions]
    jsondatafirst = simplejson.loads(str(submissions))
    jsondata = unicode(jsondatafirst, 'utf-8')
    print(jsondata)
except (simplejson.decoder.JSONDecodeError, ValueError):
    print 'Decoding JSON has failed' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T02:18:52.427

使用 PRAW，您无需进行任何 json 解码，因为 PRAW 会为您处理所有这些。

例如，对于每个提交，您要打印出赞成票数、反对票数和提交标题。你可以这样做：

```
for submission in r.get_front_page(limit=5):
    print submission.ups, submission.downs, submission.title 
```

如果您想查看可用于提交对象的所有属性，您可以运行：

```
import pprint
for submission in r.get_front_page(limit=5):
    pprint.pprint(vars(submission)) 
```

此外，如果您想从提交中获取评论，那么您可以使用该`submission.comments`属性。您还可以手动查看请求的 json 响应，以查看*应*通过 PRAW 获得哪些属性（[示例](http://www.reddit.com/.json?limit=5)）。

属性没有明确列出对象的任何地方，因为属性是直接从请求的关联 json 响应中的任何键名创建的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T02:45:38.653

JSON 只是一个字典字典，如果需要，可以使用列表进行扩展。

熟悉您目前正在处理的任何 JSON 的一个好方法是加载它，并通过以更直接的方式访问字典元素来玩弄它。

```
>>> import urllib2
>>> import json
>>> response = urllib2.urlopen('http://reddit.com/user/droogans.json').read()
>>> js = json.loads(response)
>>> comment = js['data']['children'][0]['data']
>>> #this is my most recent comment, along with a lot of other interesting stuff
>>> print comment['ups']
9001 
```

所以，探索数据，你会更好地理解它。

# multithreading - 基于键的 SingleThreadExecutor

> ID：12719545
> 
> 赞同：0
> 
> 时间：2012-10-04T02:30:46.357
> 
> 标签：multithreading, executorservice

基于密钥的线程池执行器的任何实现。这个想法是一个线程专用于一个特定的键。对同一个 Key 的新请求会等到前一个请求完成。如果另一个请求评估为另一个键，它可以由另一个线程提供服务

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T13:39:00.890

您可以制作自己的地图，然后为您的密钥查找 ExecutorService，或者在需要时使用 Executors.newSingleThreadExecutor() 创建一个新的。将runnables传递给单线程执行器，所有对一个键的请求都将转到同一个执行器并按顺序执行。

# c# - 如何在 ASP.NET (button.Visible) 中按下一个按钮来隐藏其他浏览器的按钮

> ID：12719548
> 
> 赞同：0
> 
> 时间：2012-10-04T02:31:22.933
> 
> 标签：c#, asp.net, session, button, logic

假设我们打开了两个浏览器，两个玩家相互连接，在 2 个不同的浏览器上玩同一个游戏。游戏状态由 Session 变量记录。游戏完成后，最后一页弹出3个按钮，重新对战，与其他玩家一起玩，断开连接。我如何构建一个解决方案，为第一个按下三个按钮中的任何一个的人提供先到先得的机会。

所以玩家 1 按下重新匹配按钮，在事件处理程序下，它将使玩家 1 的会话中的按钮 2 和按钮 3 不可见，但也应该使玩家 2 的按钮不可见。如何让玩家 1 使玩家 2 的按钮 2 和按钮 3 不可见？

综上所述，玩家 1 按下按钮隐藏 2 个按钮，这迫使玩家 2 的按钮隐藏。玩家 2 还没有行动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T04:00:16.227

我会在你的数据库中创建一个新表，我们称之为“GameOverStatus”。此表应包含以下字段：GameID、FirstPlacePlayerId、SelectedButtonIndex。

每个游戏都有一个唯一的 ID，这一点很重要。此 GameID 应传递给当前游戏的所有玩家。当第一个玩家到达“Game Over”屏幕时，使用当前 GameID 查询 DB 中的 GameOverStatus 表。如果没有匹配，我们知道当前玩家是第一个到达的：插入带有 GameID 和 PlayerID 的 GameOverStatus 记录。在玩家 1 单击按钮（重新匹配、玩家另一个等）后，使用正确的 SelectedButtonIndex 更新数据库中的 GameOverStatus 记录。

随后的玩家将到达此页面，并且将发生相同的操作：检查 GameOverStatus。唯一的区别是现在会有记录。读取记录，然后根据 SelectedButtonIndex，配置 UI 以根据需要显示/隐藏按钮。

# android - 从服务器下载多个文本文件，但是找不到文件

> ID：12719558
> 
> 赞同：0
> 
> 时间：2012-10-04T02:33:36.703
> 
> 标签：android, download, filenotfoundexception

我正在尝试从服务器下载几个文本文件。它们都具有相似的名称（例如 text1.txt、txt2.txt），但编号不同（每月更改数量）。我似乎无法下载文件。Java 一直告诉我它遇到了一个找不到文件的错误/异常。有谁知道我怎么能克服这个？

下载类。

```
 public class downloadText extends AsyncTask<String, String, String> {
        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            showDialog(DIALOG_DOWNLOAD_PROGRESS);
        }

        @Override
        protected String doInBackground(String... params) {

            try {

                File sourceLocation = new File(targetPath);
                sources = sourceLocation.listFiles();

                Arrays.sort(sources);

                File root = android.os.Environment
                        .getExternalStorageDirectory();
                File dir = new File(root.getAbsolutePath() + "aiyo/edition/text/");

                if (dir.exists() == false) {
                    dir.mkdirs();
                }

                Log.d("param", params[0]);
                URL url = new URL("http://create.aiyomag.com/assets/app_mag/ALYO/9_1342080926/text"); // you can write here any link
                URLConnection connection = url.openConnection();
                connection.connect();

                int contentLength=connection.getContentLength();

                // get file name and file extension

                String fileExtenstion = MimeTypeMap
                        .getFileExtensionFromUrl(params[0]);
                String name = URLUtil.guessFileName(params[0], null,
                        fileExtenstion);
                File file = new File(dir, name);
                Log.d("File in content","The file is "+file.getName());

                /*
                 * Define InputStreams to read from the URLConnection.
                 */
                InputStream is = connection.getInputStream();
                BufferedInputStream bis = new BufferedInputStream(is);
                OutputStream fos = new FileOutputStream(file);

                /*
                 * Read bytes to the Buffer until there is nothing more to
                 * read(-1).
                 */

                int lenghtOfFile = connection.getContentLength();
                int total = 0;
                byte baf[] = new byte[1024];
                int current = 0;
                while ((current = bis.read(baf)) != -1) {

                    total += current;
                    // publishProgress("" + (int) ((total * 100) /
                    // lenghtOfFile));
                    mProgressDialog.setProgress(((total * 100) / lenghtOfFile));
                    fos.write(baf, 0, current);
                }

                // close every file stream
                fos.flush();
                fos.close();
                is.close();

            } catch (IOException e) {
                Log.e("DownloadManager", "Error: " + e);
            }
           return null;
        }

        @Override
        protected void onProgressUpdate(String... values) {
            mProgressDialog.setProgress(Integer.parseInt(values[0]));
        }

        @Override
        protected void onPostExecute(String result) {
            // TODO Auto-generated method stub
          //  if (fileInteger == max) {
          //      dismissDialog(DIALOG_DOWNLOAD_PROGRESS);
          //      return;
          //  }

            Log.d("post execute", "i::" + fileInteger);
          //  fileInteger++;
            // publishProgress("" + (int) ((fileInteger * 100) / max));
        //    mProgressDialog.setSecondaryProgress(((fileInteger * 100) / max));
            String link = txturl;

            downloadText = new downloadText();
            downloadText.execute(link);
        } 
```

主要的。

```
 btn_txt = (Button) findViewById(R.id.text);

    btn_txt.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub

            String link;
            link = txturl+fileInteger+".txt";

            new Thread(new Runnable() {
                public void run() {
                    max = (totalFile(pageNum) - 1);
                    text.post(new Runnable() {
                        public void run() {
                            text.setText("" + max);
                        }
                    });
                }
            }).start();

            downloadText = new downloadText();
            downloadText.execute(link);         
        }

        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T03:39:10.620

访问该链接时出现 403 错误。这意味着可以访问该页面，但服务器禁止我访问它。这就是为什么没有下载文件，因此找不到资源错误。

如果您自己运行服务器，那么您可以查看后端代码和服务器配置以了解发生这种情况的原因。否则，您需要联系服务器管理员并请求访问该页面的权限。

获得所需权限后，您可以通过以下任一方式下载文件列表

1.  将一组 url 传递给您的 doInBackground 方法（每个文件一个）或

2.  更好的选择是要求管理员创建一个脚本来压缩服务器上的文件并将其保存在指定的 url。然后，您可以下载 zip 文件并将其解压缩到您的应用程序中。这比一个一个地下载文件要好得多，因为它节省了请求的数量、带宽和错误可能性的数量。

在 php 中压缩文件的示例代码：

```
<?php

// Adding files to a .zip file, no zip file exists it creates a new ZIP file

// increase script timeout value
ini_set('max_execution_time', 5000);

// create object
$zip = new ZipArchive();

// open archive 
if ($zip->open('my-archive.zip', ZIPARCHIVE::CREATE) !== TRUE) {
    die ("Could not open archive");
}

// initialize an iterator
// pass it the directory to be processed
$iterator = new RecursiveIteratorIterator(new RecursiveDirectoryIterator("themes/"));

// iterate over the directory
// add each file found to the archive
foreach ($iterator as $key=>$value) {
    $zip->addFile(realpath($key), $key) or die ("ERROR: Could not add file: $key");
}

// close and save archive
$zip->close();
echo "Archive created successfully.";
?> 
```

下载zip文件教程： [http ://www.java-samples.com/showtutorial.php?tutorialid=1521](http://www.java-samples.com/showtutorial.php?tutorialid=1521)

解压文件教程： [http ://www.jondev.net/articles/Unzipping_Files_with_Android_%28Programmatically%29](http://www.jondev.net/articles/Unzipping_Files_with_Android_%28Programmatically%29)

# c# - 从 C# 中的缩短路径获取完整路径

> ID：12719560
> 
> 赞同：0
> 
> 时间：2012-10-04T02:33:51.533
> 
> 标签：c#, filepath

我有以下格式的路径： `C:\Program~1\Java\jdk1.7.0_03\bin\java.exe`

它作为环境变量工作，但在 C# 中没有。

有人可以告诉我如何获得完整路径：`C:\Program Files\Java\jdk1.7.0_03\bin\java.exe`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T02:36:21.377

你正在寻找`Path.GetFullPath()`.

请注意，按原样使用短路径也应该有效。

# jquery - 为什么绑定时jQuery事件会触发？

> ID：12719561
> 
> 赞同：0
> 
> 时间：2012-10-04T02:35:27.287
> 
> 标签：jquery

当页面加载时，即使在我点击按钮之前，我也会收到“正在测试”的消息框。这个功能正常吗？我也尝试过`.click`，`.on`结果相同。

```
<script type="text/javascript">
    function Update() {
        alert("testing");
    }
    $(document).ready(function () {
        $("#UpdateButton").bind(Update())
    });
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T02:36:34.810

您没有绑定该功能。您正在调用该函数，然后绑定该函数的*输出*。尝试单击您的按钮并查看事件是否触发。

相反，绑定函数本身（注意缺少括号：）`()`：

```
$("#UpdateButton").on('click', Update) 
```

或者：

```
$("#UpdateButton").click(Update) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T02:37:05.540

您在此处调用此函数，而不是像您想的那样将其绑定到单击..单击时会发生什么..

```
$("#UpdateButton").bind(Update()); 
```

这是点击事件

```
 $("#UpdateButton").bind('click', Update);
OR

$("#UpdateButton").live('click', Update);  // Deprecated

OR 

$("#UpdateButton").on('click', Update);  // Use this instead 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T02:37:05.353

```
$(document).ready(function () {
            $("#UpdateButton").click(function(){
Update();
});
    }); 
```

# android - Android 哪种类型的提要渲染速度更快？

> ID：12719563
> 
> 赞同：2
> 
> 时间：2012-10-04T02:35:40.183
> 
> 标签：android, xml, json

目前，我已经为我的客户开发了安卓新闻应用程序。在这个项目中，我使用 JSON 提要进行内容同步，但我觉得在 android 中渲染 JSON 提要有点慢。也许，由于我的编码或其他原因。现在想尝试 XML 提要而不是 JSON。

因此，请让我知道哪种类型的提要（在 XML 和 JSon 之间......但让我知道其他任何好的提要）在 Android 中呈现更快？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T03:34:40.580

JSON 肯定更快，也更容易使用。您也不需要另一个 XML 解析器和大量代码。这很简单：

```
JSONObject json_data=new JSONObject(http_result);
String name=json_data.get("name"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T04:53:39.370

实际上说 JSON 解析是轻量级和更快的。

但是如果你想尝试 XML Parsing，请尝试使用 XMLPull Parser（是最高效的 Xml 解析器，也是 Google 推荐的）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T05:08:03.020

我第二次将 JSON 作为提要格式，因为它更轻量。我想就如何使解析看起来更快提出建议。

也许您的解析速度很慢，因为您正在解析的 JSON 响应非常大。我假设您的提要是一个 JSON 数组。您可以做的是在`AsyncTask`. 在 中，每当您解析一个提要项目（或一批提要项目）时`doInBackGround()`调用并更新您的 UI。`publishProgress()`

这样，即使您的 JSON 解析需要时间，对用户来说似乎也快得多。

# c# - C# 无法从“继承类”转换为“基类”

> ID：12719564
> 
> 赞同：2
> 
> 时间：2012-10-04T02:35:41.360
> 
> 标签：c#, generics

我有以下代码：

**简单类**

```
public class Transport { }
public class Car : Transport { }
public class Bus : Transport { } 
```

**包装类**

```
public class Wrapper<T> where T : Transport
{
    public T Vehicle { get; set; }
    public void Brake() { }
    public void Accelerate() { }
}

public class BusWrapper : Wrapper<Bus>
{
    public void PickupPassenger() { }
}

public class CarWrapper : Wrapper<Car>
{
    public void GoRacing() { }
} 
```

这就是我正在尝试的，它给了我编译错误：

```
List<Wrapper<Transport>> list = new List<Wrapper<Transport>>();

list.Add(new CarWrapper());
list.Add(new BusWrapper());

list.ForEach(wrapper =>
{
    wrapper.Accelerate();
    if (wrapper is CarWrapper)
        ((CarWrapper)wrapper).GoRacing();
    else if (wrapper is BusWrapper)
        ((BusWrapper)wrapper).PickupPassenger();

    wrapper.Brake();
}); 
```

**错误**

```
cannot convert from 'CarWrapper' to 'Wrapper<Transport>'
cannot convert from 'BusWrapper' to 'Wrapper<Transport>' 
```

**问题**

我在这里做错了什么，我想在这里实现的任何解决方法。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T02:49:41.427

您错误地假设 if`Car`继承自`Transport`then`Wrapper<Car>`也继承自`Wrapper<Transport>`. 它不是。

您需要`IWrapper<out T>`为您的列表定义和使用它。那么这种协方差就可以工作了。

# sql - 即使另一个表没有此类产品数据，如何连接表以显示产品

> ID：12719565
> 
> 赞同：0
> 
> 时间：2012-10-04T02:35:54.783
> 
> 标签：sql, ms-access

我曾经将这个问题发布给 SO 但是，我得到的答案显示了来自 tbl_product 的所有表格，而不是来自 tbl_inventory 和 tbl_reserve 的所有表格。所以请你帮忙。非常感谢。

```
 tbl_inventory
    inv_id | pd_id | inv_qty_act |  inv_date | inv_note
     1     |  001  |  120        |  20-Sep-12| 
     2     |  003  |  387        |  1-Oct-12 |

    tbl_reserve
    res_id | cust_id | res_date | res_duedate | pd_id | res_qty | if_sent | res_note
     3     |  10     | 01-Oct-12|   17-Oct-12 |  001  |  135    |         | 
     4     |  9      | 01-Oct-12|   24-Oct-12 |  001  |  253    |         |
     5     |  22     | 01-Oct-12|   17-Oct-12 |  001  |  132    |         | 
     6     |  2      | 01-Oct-12|   24-Oct-12 |  002  |  446    |         | 

    tbl_product
    pd_id  | pd_name 
      001  |  des1
      002  |  des2
      003  |  des3

    tbl_pdtn_startup
    pdtn_st_id | pd_id | pdtn_qty_est
    2         |  002  |  200
    3         |  003  |  100 
```

**我想要的输出：**
为了更容易，我真正想要的是显示：
1\. 产品名称 (pd_name)
2\. 成品数量 (inv_qty_act)
3\. 估计生产数量 (pdtn_qty_est)
4\. 和总和从客户那里保留的产品（Sum（res_qty）。

至于总字段，我可以从代码中计算出来。非常感谢

```
 pd_id| pd_name| inv_qty_act|pdtn_qty_est| Sum(res_qty)| Total[(inv_qty_est) - Sum(res_qty)]
      001 | des1   |    120     |   0        |   520       |     -400 -->(120-520)
      002 | des2   |     0      |   200      |   446       |     -446 -->(0-446)
      003 | des3   |    387     |   100      |     0       |      387 
```

![期望的结果](../Images/b1f02116c1f13819af68d72aca00ab81.png)

我真正想要的结果是仅在“红色”矩形中的记录

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T21:39:09.043

要在 Access SQL 中连接两个以上的表，您必须将每个表`JOIN`放在括号中：

```
SELECT
    tbl_product.pd_id,
    tbl_product.pd_name,
    tbl_inventory.inv_qty_act,
    tbl_pdtn_startup.pdtn_qty_est,
    Sum(tbl_reserve.res_qty) AS [Sum(res_qty)]
FROM 
    ((tbl_product 
    LEFT JOIN tbl_inventory ON tbl_product.pd_id = tbl_inventory.pd_id) 
    LEFT JOIN tbl_pdtn_startup ON tbl_product.pd_id = tbl_pdtn_startup.pd_id) 
    LEFT JOIN tbl_reserve ON tbl_product.pd_id = tbl_reserve.pd_id
GROUP BY
    tbl_product.pd_id,
    tbl_product.pd_name,
    tbl_inventory.inv_qty_act,
    tbl_pdtn_startup.pdtn_qty_est; 
```

如果您不确定 Access 中的正确语法，只需在查询设计器中构建查询，然后切换到 SQL 视图。查询设计器将自动添加括号。

还有一件事：
在您想要的输出中`inv_qty_act`，`pdtn_qty_est`和`Sum(res_qty)`列中的缺失值为零。在普通`LEFT JOIN`查询中，这些将是`NULL`相反的。

所以我上面的查询实际上返回了这个：

```
 pd_id| pd_name| inv_qty_act|pdtn_qty_est| Sum(res_qty)| ...
  001 | des1   |    120     |   NULL     |   520       | ...
  002 | des2   |    NULL    |   200      |   446       | ...
  003 | des3   |    387     |   100      |   NULL      | ...

                     ^           ^            ^
                     |           |            |
                     |___ NULL instead of 0 __| 
```

如果要获取`0`而不是`NULL`，则必须使用该[`Nz()`](http://msdn.microsoft.com/en-us/library/office/aa172237%28v=office.11%29.aspx)函数将`NULL`值转换为零。
而不是`SELECT column`，只需使用`SELECT Nz(column, 0)`.

所以最终的查询看起来像这样：

```
SELECT
    tbl_product.pd_id,
    tbl_product.pd_name,
    nz([inv_qty_act],0),
    nz([pdtn_qty_est],0),
    Sum(nz([res_qty],0)) AS [Sum(res_qty)]
FROM 
    ((tbl_product 
    LEFT JOIN tbl_inventory ON tbl_product.pd_id = tbl_inventory.pd_id) 
    LEFT JOIN tbl_pdtn_startup ON tbl_product.pd_id = tbl_pdtn_startup.pd_id) 
    LEFT JOIN tbl_reserve ON tbl_product.pd_id = tbl_reserve.pd_id
GROUP BY
    tbl_product.pd_id,
    tbl_product.pd_name,
    tbl_inventory.inv_qty_act,
    tbl_pdtn_startup.pdtn_qty_est; 
```

* * *

**编辑：**

好的，试试这个：

```
SELECT
    tbl_product.pd_id,
    tbl_product.pd_name,
    nz([inv_qty_act],0),
    nz([pdtn_qty_est],0),
    Sum(nz([res_qty],0)) AS [Sum(res_qty)]
FROM 
    ((tbl_product 
    LEFT JOIN tbl_inventory ON tbl_product.pd_id = tbl_inventory.pd_id) 
    LEFT JOIN tbl_pdtn_startup ON tbl_product.pd_id = tbl_pdtn_startup.pd_id) 
    LEFT JOIN tbl_reserve ON tbl_product.pd_id = tbl_reserve.pd_id
GROUP BY
    tbl_product.pd_id,
    tbl_product.pd_name,
    tbl_inventory.inv_qty_act,
    tbl_pdtn_startup.pdtn_qty_est
HAVING
    tbl_inventory.inv_qty_act IS NOT NULL
    or tbl_pdtn_startup.pdtn_qty_est IS NOT NULL 
```

查询与上面相同，只有最后三行（`HAVING`子句）是新的。
所有既不在`tbl_inventory`也不`tbl_pdtn_startup`被忽略的产品。
这是你想要的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T05:15:58.633

即使另一个表没有这样的产品，也可以使用左连接来显示产品

# php - 如何在要设置大小的图像上叠加文本？

> ID：12719577
> 
> 赞同：0
> 
> 时间：2012-10-04T02:37:18.303
> 
> 标签：php, html, css, image

我正在尝试使用表格制作条形图，我几乎已经按照自己的喜好完成了。我想要的最后一步是在我的图像上显示代表栏的文本。这是我迄今为止构建我的小条形图的代码：

```
$height = 50;

//build length
$width = 450;
$multi = $brewAvg / 5;
$width = $width * $multi;
print " <tr > <td > $count.  <a href=\"$breweryURL\"> $brewR</a>  </td>   <td > <img src=\"blueBar.png\"  width=\"$width\" height=\"$height\">  </td>  </tr> "; 
```

这会产生这样的结果：

![在此处输入图像描述](../Images/d4616d964d346b9a9ef517c21e76d405.png)

您可以在代码中看到我是如何根据啤酒厂评级简单地计算酒吧的长度的。我接下来要做的是在左侧每个啤酒厂的顶部显示评级数字。我将如何实现这一目标？

更新：

我尝试了我在这里阅读的教程：

[http://www.kavoir.com/2009/02/css-text-over-image.html](http://www.kavoir.com/2009/02/css-text-over-image.html)

我将代码更改为：

```
print "<div class=\"overlay\"> ";
            print " <tr valign=\"middle\" > <td > $count.  <a href=\"$breweryURL\"> $brewR</a>  </td>   <td > <img src=\"blueBar.png\"  width=\"$width\" height=\"$height\">  </td>  </tr> ";
            print" 
                <div class=\"text\">
                <p> $brewAvg  </p>
                  </div>
                </div>
            "; 
```

我添加的CSS是这样的：

```
<style>
.overlay {
    position:relative;
    float:left; /* optional */
}
.overlay .text {
    position:absolute;
    top:10px; /* in conjunction with left property, decides the text position */
    left:10px;
    width:300px; /* optional, though better have one */
}

</style> 
```

它确实将任何有价值的儿子放在了我的图像之上。所有文本都在所有条形上方的列表中，如下所示：

![在此处输入图像描述](../Images/61ee4fcd3ba67a8c7149d66802cfe3d2.png)

在回复中使用帮助后，我标记了答案，结果如下：

![在此处输入图像描述](../Images/3c9431e2d8cf204a62b01ba881b80298.png)

现在我只需要弄清楚如何将所有内容垂直居中，以便灰色背景看起来更好。谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T03:38:21.577

您可以用这个替换您的打印代码：

```
print " <tr > <td > $count.  <a href=\"$breweryURL\"> $brewR</a>  </td>   <td style=\"position: relative;\"> <img style=\"z-index: 8;\" src=\"blueBar.png\"  width=\"$width\" height=\"$height\"> <span style=\"position: absolute; top: 10px; left: 10px; color:#fff; z-index: 9; font-size: 14px;\">$brewAvg</span> </td>  </tr> "; 
```

当然，我已经硬编码，您可以将适当的样式移动到您的 CSS 文件中，并且通过更改顶部、左侧，您可以重新定位评级编号的**跨度**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T03:38:31.800

你不必做任何黑魔法来实现这一点.. 只需将啤酒厂名称和评级放在同一位置`td`，也许用 div 分隔。数字也可以在 a 中`td`，因此可以垂直对齐。就像是：

```
<td>1.</td>
<td>Rating<br><a>Company</a></td>
<td><img></td> 
```

# facebook - Tumblr 文本帖子中的变量 og:image？

> ID：12719578
> 
> 赞同：5
> 
> 时间：2012-10-04T02:37:25.840
> 
> 标签：facebook, facebook-opengraph, tumblr

我在 StackOverflow 和其他网站上进行了搜索，但如果可能的话，我还没有找到明确的是或否答案。

我正在掌握 Facebook 的 Open Graph 技术，我希望在我的 Tumblr 上的帖子之间有一个可变图像。问题是，我通常只发布文本帖子，而 Tumblr 似乎不允许我为每个帖子指定 Open Graph 图像。如果我尝试将元标记放在帖子中，Tumblr 会删除它，而 Facebook 似乎无法识别 og:image 标记中的 {PhotoURL-500} 或 {Photoset-500} 之类的 tumblr 标签。

我的 og:image 当前设置为显示网站的徽标，该徽标会重复，但没有它，Facebook 通常不会抓取正确的图像。是否可以为单个 Tumblr 文本帖子设置 og:image？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-07T23:24:57.950

文本帖子中没有注册任何图像，您可以使用`{PhotoURL}`. 如果删除了后期元标记，我认为没有其他选择。

您也许可以通过 . 中的第二个`{block:Posts}`循环来破解某些东西`<head>`，但这不适用于永久链接页面。

# java - JSR303 Bean Validation，如何知道违反了什么类型约束

> ID：12719579
> 
> 赞同：0
> 
> 时间：2012-10-04T02:37:41.767
> 
> 标签：java, validation, bean-validation, hibernate-validator

我正在开发一个插件，我需要将 Bean Validator 与底层框架集成，它似乎工作正常，除了在我被击中的地方。

插件将负责为任何符合 JSR303 规范的 Bean Validator 提供桥梁（Hibernate-Validator，Apache Bean 验证器）

一旦出现一些约束违规错误，我需要知道它是什么样的违规行为

1.  文件级约束
2.  财产等级
3.  班级水平

基于此，我需要构建错误消息并需要做一些其他工作。

有什么方法可以找出违反约束的类型，`ConstraintViolation<?>`以便我可以进行后期处理以准备要在 UI 上显示的内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T09:51:36.627

> 有什么方法可以从 ConstraintViolation 中找出违反约束的类型，以便我可以进行后期处理以准备要在 UI 上显示的内容？

不，没有。您可以区分类级别约束和属性约束。但是，无法确定注解是放在字段上还是放在属性的 getter 上。

确定类约束和属性约束的一种方法是查看*ConstraintViolation#getPropertyPath()*。如果*getName()*在叶节点上返回 null，则您有一个类级别的约束，否则是一个属性级别的约束。

在 Bean Validation 1.1 (JSR 349) 中，事情变得容易一些，因为*ConstraintViolation#getPropertyPath()*返回的*Path*包含每个节点的*#getElementDescriptor*。仍然无法区分如何访问属性（字段与吸气剂）。

# android - 为每个月动态创建一个带有标题行的列表视图

> ID：12719581
> 
> 赞同：4
> 
> 时间：2012-10-04T02:37:54.900
> 
> 标签：android, listview, android-listview

弄清楚如何对列表视图进行分区现在让我很头疼。我在这里看到了 sectioned-list-adapter 的代码：[ListView with scrolling/fixed header rows](https://stackoverflow.com/questions/12551926/listview-with-scrolling-fixed-header-rows)这可能最终是我想要的，但也许有更好的方法。

以下是我需要的要求：

*   列表视图的数据需要来自 SQLite 数据库（请参阅下面的代码以了解表格布局）
*   数据应按月分组（月/年加分）
*   标题行应包含该月在数据库中记录的项目数
*   必须与 API 8+ 兼容
*   需要能够单击一个项目以打开一个包含当天执行的移动的对话框（一旦我可以创建列表，我已经知道如何执行此操作）

在这里查看 Jeff Snarkey 的 seperatedListAdapter：http://jsharkey.org/blog/2008/08/18/separating-lists-with-headers-in-android-09/[我](http://jsharkey.org/blog/2008/08/18/separating-lists-with-headers-in-android-09/) 能够想出以下内容：

```
datasource = new SmashDataSource(this);
    datasource.open();
    BJJHistory = (ListView) findViewById(R.id.ListHistory);

    // create our list and custom adapter
    adapter = new SeparatedListAdapter(this);
    HistoryBJJ = datasource.getBJJHistory();
    // THE DESIRED COLUMNS TO BE BOUND
    final String[] columns = new String[] { SQLiteHelper.DATE };

    // THE XML DEFINED VIEWS WHICH THE DATA WILL BE BOUND TO
    final int[] to = new int[] { R.id.list_item_title };
    if (HistoryBJJ != null) {
        adapter.addSection("October", new SimpleCursorAdapter(this, R.layout.list_item,
                HistoryBJJ, columns, to));
    }

    BJJHistory.setAdapter(adapter); 
```

这使用以下游标以降序从 SQLite 数据库中提取数据：

```
public Cursor getBJJHistory() {
    final String[] columns = { SQLiteHelper.COLUMN_ID, SQLiteHelper.DATE };
    final Cursor History;
    History = database.query(SQLiteHelper.TABLE_BJJ, columns, null, null, null, null,
            SQLiteHelper.DATE + " DESC");
    return History;

} 
```

这导致以下结果：

![样品清单](../Images/5fec02ad5395fdc8b22052e8d928425c.png)

一开始这很好，但给我带来了两个问题：

*   如何用月份动态填充“标题”值？我考虑过使用游标用月份列表填充数组（在使用 SimpleDateFormat 格式化它们之后），然后执行 For Each 循环来遍历每个循环，将月份传递回游标方法以提取所有条目具有该月的日期时间值。
*   如何将结果连续显示为当天的条目数？理想情况下，我想要这样的东西： ![日期行](../Images/b45721e5b0ade220501da409203ffede.png)

#2 的答案有点简单，只需在 listview 行布局中放置两个 textview，更复杂的是如何将数据库中的所有行每天分组，或者至少每天进行计数并使用该计数显示在列表中。

首先，回到这里的示例代码：[http](http://code.google.com/p/android-section-list/) ://code.google.com/p/android-section-list/ ，而不是提供的示例数组，我想我可以更改以下内容：

```
SectionListItem[] exampleArray = { // Comment to prevent re-format
new SectionListItem("Test 1 - A", "A"), //
        new SectionListItem("Test 2 - A", "A"), //
        new SectionListItem("Test 3 - A", "A"), //
        new SectionListItem("Test 4 - A", "A"), //
        new SectionListItem("Test 5 - A", "A"), //
        new SectionListItem("Test 6 - B", "B"), //
        new SectionListItem("Test 7 - B", "B"), //
        new SectionListItem("Test 8 - B", "B"), //
        new SectionListItem("Test 9 - Long", "Long section"), //
        new SectionListItem("Test 10 - Long", "Long section"), //
        new SectionListItem("Test 11 - Long", "Long section"), //
        new SectionListItem("Test 12 - Long", "Long section"), //
        new SectionListItem("Test 13 - Long", "Long section"), //
        new SectionListItem("Test 14 - A again", "A"), //
        new SectionListItem("Test 15 - A again", "A"), //
        new SectionListItem("Test 16 - A again", "A"), //
        new SectionListItem("Test 17 - B again", "B"), //
        new SectionListItem("Test 18 - B again", "B"), //
        new SectionListItem("Test 19 - B again", "B"), //
        new SectionListItem("Test 20 - B again", "B"), //
        new SectionListItem("Test 21 - B again", "B"), //
        new SectionListItem("Test 22 - B again", "B"), //
        new SectionListItem("Test 23 - C", "C"), //
        new SectionListItem("Test 24 - C", "C"), //
        new SectionListItem("Test 25 - C", "C"), //
        new SectionListItem("Test 26 - C", "C"), // 
```

并将其替换为光标或不需要按天提取数据的内容，然后将其替换为月份名称而不是“A”、“B”、“C”。

这让我很困惑，因为我还在学习，我已经完成了这个应用程序的几乎每个部分，我只是不知道如何将数据分成一个列表

作为参考，这是“CardioTrainer”的屏幕截图，这是一款具有自定义分区列表的锻炼应用程序，但基本上是我想要复制的内容，至少在功能上是这样。

![心肺训练器截图](../Images/47be8da3c7ed543d2ee518f9334db28e.png)

来自的表如下所示： ![数据表](../Images/0548ad598f9919da12ddc8eaad54a56d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T11:30:24.633

如何使用[https://github.com/commonsguy/cwac-merge](https://github.com/commonsguy/cwac-merge)而不是[http://code.google.com/p/android-section-list/](http://code.google.com/p/android-section-list/)。

因为我怀疑您是否有要求，所以滚动时应将部分粘贴在顶部。

其次，使用合并适配器很简单。

addView（您的部分视图） addAdapter（您的特定部分适配器）

这应该让你走:)

希望能帮助到你。

# typescript - 文件更改时自动编译

> ID：12719582
> 
> 赞同：4
> 
> 时间：2012-10-04T02:37:59.957
> 
> 标签：typescript

有没有办法用打字稿进行自动编译？就像在 CoffeScript 中使用 mindscape 一样？您只需保存文件，扩展程序就会编译您的代码。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-04T10:42:18.683

VS2012 RTM 使用最新的[WebEssentials 2012 扩展](http://visualstudiogallery.msdn.microsoft.com/07d54d12-7133-4e15-becb-6f451ea3bea6)（昨天发布，带有简洁的 TypeScript 双窗口编辑器）支持此功能

编辑 ：

**WebEssential2012 版本 3.0 已去除任何 TypeScript 功能**，因为它与官方 TypeScript Visual Studio 插件的最新改进相冲突。

自 TypeScript v0.8.2 以来，插件现在**原生支持**保存时编译，如果您编辑项目文件：[https ://typescript.codeplex.com/wikipage?title=Compile-on-Save](https://typescript.codeplex.com/wikipage?title=Compile-on-Save)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-04T03:14:53.060

Visual Studio 目前不支持此功能。CodePlex 上已经存在一个问题来跟踪此问题；你可以在那里添加你的投票。

[http://typescript.codeplex.com/workitem/12](http://typescript.codeplex.com/workitem/12)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-29T11:51:31.090

您可以点击此处显示的链接：http: [//vswebessentials.com/changelog](http://vswebessentials.com/changelog) [http://typescript.codeplex.com/wikipage?title=Compile-on-Save](http://typescript.codeplex.com/wikipage?title=Compile-on-Save)

不过有一个警告：从 Web Essentials 中删除了对 TypeScript 的支持

我目前不知道如何在保存网站项目时进行编译...

# c# - 使用 Ajax 传递 json 对象的语法

> ID：12719584
> 
> 赞同：0
> 
> 时间：2012-10-04T02:38:06.710
> 
> 标签：c#, jquery, asp.net, json

我试图将这些 json 对象传递给后面的代码

```
var obj = {
        Name: '1',
        Starting: '3',

        Timeline: [
        {
            StartTime: '111',
            GoesFor: '111'

        }
        ,
        {
            StartTime: '112',
            GoesFor: '112'

        }

    ]
    }; 
```

当然下一步是对对象进行字符串化

```
var data = JSON.stringify(obj); 
```

之后，我使用 jquery ajax 调用将值传递给后面的代码

```
$.ajax({
            url: 'default.aspx/test',
            type: 'POST',
            contentType: 'application/json',
            data: data,
            success: function(result) {
                $('#result').html(result.d);
            }
        }); 
```

关键是我从 jquery 库中得到错误

```
POST http://localhost:63050/default.aspx/test 500 (Internal Server Error) 
```

当我删除 obj 变量并将其放入 JSON.stringfy 方法时，问题就解决了，就像这样

```
var data = JSON.stringify({
            obj: {
                Name: '1',
                Starting: '3',

                Timeline: [
                {
                    StartTime: '111',
                    GoesFor: '111'

                }
                ,
                {
                    StartTime: '112',
                    GoesFor: '112'

                }
                ]
            }
        }); 
```

无论如何将整个对象变量传递给 json.stringify 函数，而不是在函数中声明和初始化？

如果你们想知道，我背后的代码看起来像这样

```
public class MyModel
{
    public string Name { get; set; }
    public string Starting { get; set; }
    public testing2[] Timeline { get; set; }
}

public class testing2
{
    public string StartTime { get; set; }
    public string GoesFor { get; set; }
}

[WebMethod]
    public static string Test(MyModel obj)
    {
        return "Hello from test" + obj.Name + obj.Starting + obj.Timeline[0].StartTime + obj.Timeline[1].StartTime;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T03:01:51.493

不，因为在您的示例中您正在传递一个对象，因此您需要将 JSON 数据放入一个对象中，以便将其解析为一个对象。否则你传递的只是一个变量数组。

基本上，您可以像这样纠正问题：

```
 $.ajax({
        url: 'default.aspx/test',
        type: 'POST',
        contentType: 'application/json',
        data: { obj: data },
        success: function(result) {
            $('#result').html(result.d);
        }
    }); 
```

这样你就可以使用你原来的字符串化。

# javascript - 知道用户何时点击评分和评论？

> ID：12719585
> 
> 赞同：0
> 
> 时间：2012-10-04T02:38:10.173
> 
> 标签：javascript, html, windows-8, windows-store, charms-bar

有什么方法可以让我知道用户点击了魅力/设置栏中的“评分和评论”按钮？ **注意：**此按钮会自动添加到 Windows 应用商店中的应用程序中。我无法控制按钮。

我认为最好显示一条消息，向他们解释他们不应该使用评分和评论按钮来请求支持，因为我们无法对此做出回应。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-04T03:07:16.640

我不确定这是否是您要查找的内容，但是您可以使用类似于 SO 的东西来通知用户登录或注册，以便在未注册的用户想要对帖子进行投票时进行投票。

```
 <div id='message' style="display: none;"> 
    <span>Hey, This is my Message.</span> 
    <a href="#" class="close-notify">X</a> 
 </div> 

#message { 
        font-family:Arial,Helvetica,sans-serif; 
        position:fixed; 
        top:0px; 
        left:0px; 
        width:100%; 
        z-index:105; 
        text-align:center; 
        font-weight:bold; 
        font-size:100%; 
        color:white; 
        padding:10px 0px 10px 0px; 
        background-color:#8E1609; 
    } 

    #message span { 
        text-align: center; 
        width: 95%; 
        float:left; 
    } 

    .close-notify { 
        white-space: nowrap; 
        float:right; 
        margin-right:10px; 
        color:#fff; 
        text-decoration:none; 
        border:2px #fff solid; 
        padding-left:3px; 
        padding-right:3px 
    } 

    .close-notify a { 
        color: #fff; 
    } 

    // And this is javascript (using jQuery):
    $(document).ready(function() { 
        $("#message").fadeIn("slow"); 
        $("#message a.close-notify").click(function() { 
            $("#message").fadeOut("slow"); 
            return false; 
        }); 
    }); 
```

# python - 如何让 Python 识别小写和大写输入？

> ID：12719586
> 
> 赞同：7
> 
> 时间：2012-10-04T02:38:10.400
> 
> 标签：python, uppercase, lowercase

我是 Python 新手。我正在编写一个程序来区分单词是否以元音开头。问题是，该程序只能正确处理大写字母作为输入。例如，如果我提供单词“Apple”作为输入，结果是`True`; 但是，如果提供单词“apple”作为输入，则结果为`False`. 我如何解决它？

```
word = input ("Please Enter a word:")
if (word [1] =="A") :
    print("The word begins with a vowel")
elif (word [1] == "E") :
    print("The word begins with a vowel")
elif (word [1] == "I") :
    print("The word begins with a vowel")
elif (word [1] == "O") :
    print("The word begins with a vowel")
elif (word [1] == "U") :
    print("The word begins with a vowel")
else:
    print ("The word do not begin with a vowel") 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T03:58:35.827

通常你会在输入上使用`str.lower()`(或`str.upper()`) 来规范化它。

Python3.3 有一个新方法[`str.casefold()`](http://docs.python.org/py3k/library/stdtypes.html#str.casefold)，它适用于 unicode

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-04T02:39:49.337

首先将单词完全转换为小写（或大写）：

```
word = input("Please Enter a word:").lower()  # Or `.upper()` 
```

此外，要获取单词的第一个字母，请使用`word[0]`，而不是`word[1]`。在 Python 和几乎所有编程语言中，列表都是零索引的。

您还可以将代码压缩很多：

```
word = input("Please Enter a word:")

if word[0].lower() in 'aeiou':
    print("The word begins with a vowel")
else:
    print("The word do not begin with a vowel") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T02:39:54.167

您可以在比较之前将输入转换为大写。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-04T02:42:28.020

你应该使用：

```
word[i] in 'AEIOUaeiou' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-04T04:20:31.857

元音检查是使用[str.startswith](http://docs.python.org/py3k/library/stdtypes.html#str.startswith)完成的，它可以接受多个值的元组。[PEP 8 Style Guide for Python Code](http://www.python.org/dev/peps/pep-0008/)建议使用带有字符串切片的startswith，以提高代码的可读性：

> 使用 ''.startswith() 和 ''.endswith() 代替字符串切片来检查前缀或后缀。

[条件表达式](http://docs.python.org/whatsnew/2.5.html#pep-308-conditional-expressions)用于设置指示单词是否以元音开头的消息。然后我使用[字符串格式化](http://docs.python.org/py3k/library/string.html#string-formatting)方法来准备消息。同样，作为英语语法校正的事情，我将句子“单词不以元音开头”替换为“单词不以元音开头”。

```
word = input("Please Enter a word:")
is_vowel = 'does' if word.lower().startswith(tuple('aeiou')) else 'does not'
print("The word {} begin with a vowel".format(is_vowel)) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-09-04T02:28:41.823

```
swim_wait = input("Alright you reach the river.Do you want to 
Swim or Wait\n")
swim_wa = swim_wait.lower() 
```

我正在使用`.lower()`将用户输入转换为较低的程序，这在处理输入时很方便。您也可以使用`.upper()` ，但我认为您不能同时使用两者。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-11-08T10:14:39.097

1.  您只检查代码中的大写字母。一种方法是将用户的任何输入转换为大写，您当前的代码将起作用。这可以通过像这样更改代码来轻松完成...

    ```
    word = input("Please Enter a word: ").upper() 
    ```

2.  您还需要使用 word[0] 而不是 word[1] 来获取第一个字母。其余的代码可能是这样的：

    ```
    if word [0] in "AEIOU" :
        print("The word begins with a vowel")
    else:
        print ("The word does not begin with a vowel") 
    ```

这将使第一个字母大写，其余的将保持原样。

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2021-09-04T02:55:19.670

**我写了一个简单的游戏运行代码希望你能理解**

```
print("Welcome to Treasure Island\nYour Mission is to Find the Treasure\n")
choice1 = input('You are at the crossroad ,where do you want to go.Type "left" or "right".\n').lower()
if choice1 == "left":
    choice2 = input(
        'You\'ve come to a lake.There os a island in the middle of the lake.Type "wait"to wait for the boat.Type "swim" to sim across\n').lower()
    if choice2 == "wait":
        choice3 = input(
        "You arrive at the island unharmed. There is a house with 3 doors. One red, one yellow, and one blue. Which color do you choose?\n").lower()
       if choice3 == "red":
            print("Its room full of fire. Game Over!")
        elif choice3 == "yellow":
            print("You found the treasure you won!")
        elif choice3 == "blue":
            print("You enter a room of beasts.Game over!")
    else:
        print("You chosen the wrong door. Game over!") 
```

如果代码使用**选项卡**中有一些缩进错误并重新格式化代码行，我不知道如何在 StackOverflow 上准确编写代码，因为我是新来的

# java - 在 java 类文件中添加 try catch

> ID：12719587
> 
> 赞同：0
> 
> 时间：2012-10-04T02:38:11.050
> 
> 标签：java, class, decompiling

我有一个 java 类文件，第三部分，我没有它的源代码，但它总是在它的一个方法中抛出一些异常，我想编辑那个方法，为它添加一个 try catch 块。

我试图反编译它，但是源代码不好用，它看起来很模糊而不是完整的。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T03:06:06.993

如果包装不起作用，因为您无法安排实例化包装类而不是原始类，那么您将遇到一个难题：

*   正如您所观察到的，反编译混淆的类可能会导致无法编译的源代码。这是一个内部类的事实可能会使这变得更加棘手。

*   字节码工程可能有效；例如，找到`new`正在实例化错误类的对象，并将其更改为实例化包装类。但是你将不得不编写你的包装类来反射地实例化内部类......并且由于混淆，访问限制和在实例化非静态嵌套类时需要传递的隐藏参数，它会很混乱。

上述两种情况都涉及显着的疼痛。即使您成功了，如果您需要将 3rd-party 库升级到新版本，它们也会给您留下未来的问题。

我想我会以另一种方式解决这个问题。例如：

*   确定异常的原因，并尝试实施一种解决方法来避免触发异常的条件。

*   联系您尝试使用的产品的支持团队，让他们为您提供修复或解决方法。

*   更改为提供源代码以及修补问题和从源代码重建的资金的不同产品。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T04:16:42.080

我能提供的最佳解决方案是使用[AspectJ](http://www.eclipse.org/aspectj/)并使用 CTW（编译时编织）方面。您可以在一个方面用 try/catch 包装该方法。在这样做时，您不需要更改任何代码，并且您的方面只会在编译时注入。

当然，使用 AOP 会增加应用程序的复杂性，因此您必须熟悉使用方面。否则，我强烈推荐@duffymo 的解决方案，并用您自己的包含try/catch 的类包装第3 方库。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T02:40:35.787

它可能*被*混淆了，但我不相信它不完整。

我不会推荐这种方法。为什么不能在代码中捕获异常？做它并继续前进。

编辑别人代码的另一种首选方法是编写自己的包装器来扩展该类。在冒犯您的方法中捕获异常。

两者都比反编译和修改别人的代码更可取。这是长期悲伤的秘诀。

像这样：

```
public class BadLibrary {
    public void toast() { throw new IllegalArgumentException(); }
}

public class MyWrapper extends BadLibrary {
    public void toast() { 
       try {
          super.toast(); 
       } catch (Exception e) {
           // log, print, or ignore.
       }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T02:40:22.457

你用的是哪个反编译器？我已经成功使用了[JD GUI](http://java.decompiler.free.fr/)

# cocoa - 在 NSWindow 中更改视图会删除视图的内容

> ID：12719590
> 
> 赞同：0
> 
> 时间：2012-10-04T02:38:54.207
> 
> 标签：cocoa, nsview, nswindow, nswindowcontroller, nstoolbar

我正在使用 NSToolbar 和 NSWindowController 来更改 NSWindow 的视图。选择工具栏项后，窗口的视图已成功更改，并且窗口会根据视图大小更改其大小。在初始加载窗口时，视图的内容会按预期显示。但是，一旦选择了工具栏项，新视图的内容将不可见，并且当视图切换回原始视图时，其内容也不再可见。不知道是什么原因造成的，所以任何帮助将不胜感激。

```
#import <Cocoa/Cocoa.h>

@interface WindowController : NSWindowController {
    IBOutlet NSView *firstView;
    IBOutlet NSView *secondView;

    int currentViewTag;
}

- (IBAction)switchView:(id)sender;

@end 
```

和

```
#import "WindowController.h"

@interface WindowController ()

@end

@implementation WindowController

- (id)init {
    self = [super initWithWindowNibName:@"WindowController"];
    if (self) {
    }

    return self;
}

- (void)windowDidLoad {
    [super windowDidLoad];
}

- (NSRect)newFrameForNewContentView:(NSView*)view {

    NSWindow *window = [self window];
    NSRect newFrameRect = [window frameRectForContentRect:[view frame]];
    NSRect oldFrameRect = [window frame];
    NSSize newSize = newFrameRect.size;
    NSSize oldSize = oldFrameRect.size;

    NSRect frame = [window frame];
    frame.size = newSize;
    frame.origin.y -= (newSize.height - oldSize.height);

    return frame;
}

- (NSView *)viewForTag:(int)tag {

    NSView *view = nil;
    switch (tag) {
        case 0:
            view = firstView;
            break;
        case 1:
            view = secondView;
            break;
    }

    return  view;
}

- (BOOL)validateToolbarItem:(NSToolbarItem *)item {
    if ([item tag] == currentViewTag) return NO;
    else return YES;
}

- (void)awakeFromNib {

    [[self window] setContentSize:[firstView frame].size];
    [[[self window] contentView] addSubview:firstView];
    [[[self window] contentView] setWantsLayer:YES];
}

- (IBAction)switchView:(id)sender {

    double tag = [sender tag];
    NSView *view = [self viewForTag:tag];
    NSView *previousView = [self viewForTag:currentViewTag];
    currentViewTag = tag;

    NSRect newFrame = [self newFrameForNewContentView:view];

    [NSAnimationContext beginGrouping];

    if ([[NSApp currentEvent] modifierFlags] & NSShiftKeyMask)
        [[NSAnimationContext currentContext] setDuration:1.0];

    [[[[self window] contentView] animator] replaceSubview:previousView with:view];
    [[[self window] animator] setFrame:newFrame display:YES];

    [NSAnimationContext endGrouping];
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T04:59:00.957

我试用了您的代码，我看到的不是视图消失了，而是它们定位错误并移出视图。我通过关闭 IB 中的自动布局并取消选择尺寸检查器中的所有支柱和弹簧来解决此问题。我还取消了窗口的“可恢复”属性，这样如果您在视图 2 可见的情况下关闭程序并重新打开，窗口（内部包含视图 1）将是视图 1 的正确大小。

# iis - 在 IIS 7 中的一个 IP 和端口上使用 SAN SSL 绑定多个站点实例

> ID：12719593
> 
> 赞同：-1
> 
> 时间：2012-10-04T02:39:17.913
> 
> 标签：iis, networking, ssl, san

我有一个 SAN 证书，其中添加了域 A、BC。在我的 IIS 中，我为每个域创建了一个站点实例。

我只能将 https 绑定添加到站点实例之一。令人惊讶的是，https 适用于所有这 3 个域。令人困惑的部分是非 https 流量都流向了正确的域，但是 https 的所有流量都流向了带有 https 绑定的“站点”，而不是在相应的域中执行代码库！

```
> Eg.  Assuming a SAN certificate contains www.a.com, www.b.com, www.c.com 
> 1\. create 3 separate site instance for www.a.com, www.b.com, www.c.com in IIS 7    
> 2\. Add https binding to www.a.com site  
> 3\. browse to http://www.b.com opens home page on b.com
> 4\. browse to https://www.b.com opens home page on a.com! 
```

是否可以使用 SAN SSL 保护一个 IP 和端口上的多个域来解决此问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T00:59:41.073

挖了一圈之后，没有办法做到。在 IIS 中创建多个站点实例时，您只能将其中一个绑定到安装了证书的 IP。解决方法是

1.  在单个站点实例中创建多个应用程序
2.  在该站点实例下创建所有 http 绑定
3.  使用 url rewrite 将请求动态路由到正确的应用程序

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T05:15:58.307

首先，您需要创建一个带有 X509v3 扩展的证书：[link](http://therowes.net/~greg/2008/01/08/creating-a-certificate-with-multiple-hostnames/)

然后，有一个称为“SNI”的功能，可让您在同一个 IP 上使用多个 SSL 证书。[维基](http://en.wikipedia.org/wiki/Server_Name_Indication)

让我知道事情的后续。:)

# css - CSS中的字体/跨浏览器兼容性？

> ID：12719598
> 
> 赞同：1
> 
> 时间：2012-10-04T02:39:54.323
> 
> 标签：css, fonts, font-face

我最近开始学习 HTML/CSS，开始对字体和跨浏览器兼容性感到非常沮丧。我在我的个人网站上使用自定义字体 (Klavika) 并将其上传到服务器，但我不知道如何使其跨浏览器兼容。该站点在这里：[http](http://www.tommaxwell.me) ://www.tommaxwell.me并且您可能会看到，它显示的字体非常难看。有人可以查看我的代码并将我引向正确的方向吗？

CSS：

```
body {
background-image: url(209241_2453996366505_1946848896_o.jpg);
background-size:cover;
}

@font-face {
font-family: klavika-medium;
src: url(Klavika-Medium.otf);
}

h1 {
text-align: center;
margin-top: 10%;
font-family: klavika-medium;
color:#FFFFFF;
font-size: 6.250em;
}

p {
position: relative;
top:-8%;
text-align: center;
font-family: klavika-regular;
color:#FFFFFF;
font-size: 1.875em;

}

ul {
position: relative;
text-align: center;
list-style-type: none;
margin-top: 5%;
left:36.5%;
font-family: klavika-medium;
}

ul li {
font-size: 40px;
}

ul li a {
text-decoration: none;
color: #FFFFFF;
opacity: 0.8;
float:left;
padding-right:3%;

}

ul li a:hover {
opacity: 1.0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T02:52:41.457

对于不同的浏览器，您需要不同格式的字体。你可以试试[http://www.fontsquirrel.com/fontface/generator](http://www.fontsquirrel.com/fontface/generator)

在该站点中，他们将为您转换所有正确格式的字体。他们还将为您提供样式表示例，以便您可以复制已经准备好跨浏览器使用的 css。另一个额外的好处是可以压缩图像和音频字体。他们的工具也可以这样做，为您提供更小的字体。

顺便说一句，在声明字体时，您还可以声明与该粗细相关的字体粗细。font-weight:100 可能是您的常规字体，而 font-weight:600 可能是您的中等字体。这使得使用字体更容易，因为您只需要记住一个名称，并简单地应用适当的重量，无论您在哪里使用您的字体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T02:56:59.870

嗨，您也需要以其他格式提供它才能在每个浏览器中工作。

您可以尝试在线转换器。

[http://www.fontsquirrel.com/fontface/generator](http://www.fontsquirrel.com/fontface/generator)

[http://www.font2web.com/](http://www.font2web.com/)

前任：

```
 @font-face {
font-family: 'Conv_iskpota';
src: url('fonts/iskpota.eot');
src: local('☺'), url('fonts/iskpota.woff') format('woff'), url('fonts/iskpota.ttf') format('truetype'), url('fonts/iskpota.svg') format('svg');
font-weight: normal;
font-style: normal;} 
```

# python - 从原始输入计算元音

> ID：12719600
> 
> 赞同：3
> 
> 时间：2012-10-04T02:40:10.687
> 
> 标签：python, string, count

我有一个作业问题，要求通过原始输入读取字符串并计算字符串中有多少元音。这是我到目前为止所拥有的，但我遇到了一个问题：

```
def vowels():
    vowels = ["a","e","i","o","u"]
    count = 0
    string = raw_input ("Enter a string: ")
    for i in range(0, len(string)):
        if string[i] == vowels[i]:
            count = count+1
    print count

vowels() 
```

它可以很好地计算元音，但由于在范围内不断增加`if string[i] == vowels[i]:`，它只会计算一次元音。`i`如何更改此代码以检查输入的元音字符串而不会遇到此问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-04T02:44:06.330

## `in`操作员

您可能想要使用`in`运算符而不是`==`运算符 -`in`运算符允许您检查特定项目是否在序列/集合中。

```
1 in [1,2,3] # True
1 in [2,3,4] # False
'a' in ['a','e','i','o','u'] # True
'a' in 'aeiou' # Also True 
```

* * *

其他一些评论：

## 套

运算符在`in`与 a 一起使用时效率最高`set`，这是一种专门设计用于快速“是这组项目的 X 项”类型操作的数据类型。*

```
vowels = set(['a','e','i','o','u']) 
```

** `dict`s 也很有效`in`，它检查字典中是否存在键。*

## 迭代字符串

字符串是 Python 中的一种序列类型，这意味着您无需费力获取长度然后使用索引 - 您只需遍历字符串即可依次获取每个字符：

例如：

```
for character in my_string:
    if character in vowels:
        # ... 
```

## 用字符串初始化集合

在上面，您可能已经注意到创建具有预设值的集合（至少在 Python 2.x 中）涉及使用列表。这是因为`set()`类型构造函数采用一系列项目。您可能还注意到，在上一节中，我提到字符串是 Python 中的序列——字符序列。

这意味着如果您想要一*组*字符，您实际上可以将这些字符的字符串传递给`set()`构造函数 - 您不需要列出一个单字符串。换句话说，以下两行是等价的：

```
set_from_string = set('aeiou')
set_from_list = set(['a','e','i','o','u']) 
```

整齐吧？:) 但是请注意，如果您尝试制作一组*​​字符串*，而不是一组*字符*，这也可能会咬到您。例如，以下两行*不*一样：

```
set_with_one_string = set(['cat'])
set_with_three_characters = set('cat') 
```

前者是一个包含一个元素的集合：

```
'cat' in set_with_one_string # True
'c' in set_with_one_string # False 
```

而后者是一个包含三个元素的集合（每个元素一个字符）：

```
'c' in set_with_three_characters` # True
'cat' in set_with_three_characters # False 
```

## 区分大小写

比较字符区分大小写。`'a' == 'A'`是假的，因为是`'A' in 'aeiou'`。为了解决这个问题，您可以转换输入以匹配您要比较的情况：

```
lowercase_string = input_string.lower() 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-04T02:42:48.237

您可以简化此代码：

```
def vowels():
    vowels = 'aeiou'
    count = 0
    string = raw_input ("Enter a string: ")
    for i in string:
        if i in vowels:
            count += 1
    print count 
```

字符串在 Python 中是可迭代的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-04T02:56:38.840

```
for i in range(0, len(string)):
    if string[i] == vowels[i]: 
```

这实际上有一个比只计算每个元音一次更微妙的问题 - 它实际上只测试字符串的第一个字母是否完全正确`a`，第二个字母是否正确`e`等等......直到你超过第五个。它将尝试测试`string[5] == vowels[5]`- 这给出了一个错误。

您不想使用`i`to 查看`vowels`，您想要一个带有第二个索引的嵌套循环，这对`vowels`- 例如，

```
for i in range(len(string)):
   for j in range(len(vowels)):
       if string[i] == vowels[j]:
          count += 1 
```

这可以通过意识到，在 Python 中，您很少希望将*索引*迭代成一个序列来进一步简化 -`for`循环知道如何迭代您可以做的所有事情`string[0]`，`string[1]`依此类推，给出：

```
for s in string:
   for v in vowels:
      if s == v:
        count += 1 
```

可以使用列表上的操作来简化内部循环`in`- 它与此代码执行完全相同的操作，但它将代码的逻辑保持在更高级别（您想要做什么与如何做）：

```
for s in string:
   if s in vowels:
       count += 1 
```

现在，事实证明 Python 让我们使用布尔值（这是`s in vowels`给你的）和 ints 来做数学运算 -`True`表现为`1`, `False`as `0`, so `True + True + False`is `2`。这导致使用生成器表达式和求和的单行：

```
sum(s in vowels for s in string) 
```

其内容为“对于 中的每个字符`string`，计算其中有多少个字符`vowels`”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-04T02:49:33.873

您可以将过滤器用于单衬里

```
print len(filter(lambda ch:ch.lower() in "aeiou","This is a String")) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-04T02:53:04.930

`sum`这是使用生成器的更精简的版本：

```
def vowels():
    string = raw_input("Enter a string: ")
    print sum(1 for x in string if x.lower() in 'aeiou')

vowels() 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-11-01T09:14:07.133

主题选项

```
Mystring = "The lazy DOG jumped Over"
Usestring = ""
count=0
for i in Mystring:
    if i.lower() in 'aeiou':
        count +=1
        Usestring +='^'
    else:
        Usestring +=' '

print (Mystring+'\n'+Usestring)
print ('Vowels =',count)

The lazy DOG jumped Over
  ^  ^    ^   ^  ^  ^ ^ 
Vowels = 7 
```

# c++ - 如何更改数字范围的起始限制

> ID：12719602
> 
> 赞同：0
> 
> 时间：2012-10-04T02:40:21.160
> 
> 标签：c++, image, math, pixels

我目前被困在这件事上。

我的范围`cdf's`从 0.12 或 0.25 到 1。根据某些计数，下限是动态的。我想将其更改为从 0 到 1 的范围。但我现在想不出任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T12:01:21.790

如果您有值 [a, 1] 并且希望将它们投影到 [0, 1] 上，则可以使用以下公式：

```
 newVal = (oldVal - a) / (1.0 - a); 
```

# ruby-on-rails - 如何在acts_as_votable中提取最高投票的模型实例？

> ID：12719604
> 
> 赞同：3
> 
> 时间：2012-10-04T02:40:23.217
> 
> 标签：ruby-on-rails, ruby

假设我有一个在acts_as_votable 插件下的帖子模型。如何获得票数最高的前 30 个帖子？它应该很简单；但是，我无法在插件中找到任何详细说明此问题的文档。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-06-11T17:37:42.750

我意识到这是一个老问题，但我遇到了同样的问题，并想把我的解决方案留在这里。因此，正如[文档](https://github.com/ryanto/acts_as_votable)所述，我完成此操作的方式是运行下面的迁移。

```
class AddCachedVotesToPosts < ActiveRecord::Migration
  def self.up
    add_column :posts, :cached_votes_total, :integer, :default => 0
    add_column :posts, :cached_votes_score, :integer, :default => 0
    add_column :posts, :cached_votes_up, :integer, :default => 0
    add_column :posts, :cached_votes_down, :integer, :default => 0
    add_index  :posts, :cached_votes_total
    add_index  :posts, :cached_votes_score
    add_index  :posts, :cached_votes_up
    add_index  :posts, :cached_votes_down
  end

  def self.down
    remove_column :posts, :cached_votes_total
    remove_column :posts, :cached_votes_score
    remove_column :posts, :cached_votes_up
    remove_column :posts, :cached_votes_down
  end
end 
```

然后在我的模型中我添加了下面的类方法

```
class Post
  def self.highest_voted
    self.order("cached_votes_score DESC")
  end
end 
```

之后，`Post.highest_voted`将返回投票最高的帖子。

为了只返回 30 个帖子，您可以执行以下操作`Post.highest_voted.limit(30)`

# jquery - Safari 错误 .position()

> ID：12719607
> 
> 赞同：0
> 
> 时间：2012-10-04T02:40:45.670
> 
> 标签：jquery, web-applications, safari

我不确定这是我的代码还是 Safari 的错误，但是在使用代码时：

```
cx = $('.cart').position().top; 
```

在页面上触发警报；它将在除 Safari 之外的所有浏览器中触发（正常工作）。我不确定为什么。

[这是我遇到问题的页面！](http://partytime.v5.cloudsvr.com.au/-products/10m_x_3m_structure_maruee?product_qty%5B504e89250053dc960a0000c9%5D=1)

顺便说一句，我使用的是 Safari 版本 3.2.2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T02:51:13.143

我不确定警报对话框应该做什么，但我让它在 Safari 5.1.7 和 Chrome 22 中都能正常显示。但我确实注意到返回的位置存在差异。以下是每个浏览器中对话框的输出：

Safari 5.1.7 中的输出：

```
http://partytime.v5.cloudsvr.com.au
Cart is loaded: 1, X position: 1274px; 
```

Chrome 22 中的输出：

```
Cart is loaded: 1, X position: 1260.5px; 
```

不确定这是否是您想要/想要的，但它似乎工作正常。

# javascript - if 语句依赖于 jQuery().jquery

> ID：12719608
> 
> 赞同：2
> 
> 时间：2012-10-04T02:40:59.270
> 
> 标签：javascript, jquery

根据运行的 jquery 版本，运行函数的最佳方式是什么？现在我有：

```
var jqVersion = jQuery().jquery;

if (jqVersion == '1.4.2') { 

    //jQuery 1.4.2 specific script here.

} else {

   //jQuery that works on rest of the site here

} 
```

`else`这在 Firefox 中运行良好，但在 Chrome 和 IE 中，即使满足条件且`else`不需要，页面也会为块中的代码提供错误。干杯。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T02:50:08.477

如果您的错误与`.prop()`jQuery 版本 1.6 中添加的相关联，那么您应该检查该方法是否可用并采取相应措施。

```
if (jQuery().prop) {
    // .prop() methods exists
} 
```

甚至只是：

```
if (jQuery.fn.prop) {
    // .prop() methods exists
} 
```

[仅供参考，您可以在此处](http://api.jquery.com/category/version/)查看任何给定 jQuery 功能添加的版本。

* * *

我的建议是检查您想要的特定方法是否如上所述。但是，如果你觉得你必须检查版本，那么你需要检查大于，而不是相等。如您所知，`jQuery().jQuery`将版本包含为字符串。如果要检查大于某个数字的版本，则需要将该字符串解析为数字并与它们进行比较。这是一个功能：

```
jQuery.getVersionObject = function() {
    var versionStr = jQuery().jQuery;
    var matches = versionStr.match(/(\d+)\.(\d+)\.(\d+)/);
    var num = (matches[1] * 1000 * 1000) + (matches[2] * 1000) + (matches[3]);
    return ({major: matches[1], minor: matches[2], rev: matches[3]; num: num})
}

jQuery.checkMinVersion(major, minor, rev) {
    minor = minor || 0;
    rev = rev || 0;
    var num = (major * 1000 * 1000) + (minor * 1000) + rev;
    var version = jQuery.getVersionObject();
    return(version.num >= num);
} 
```

示例用法：

```
if (jQuery.checkMinVersion(1, 6, 0)) {
    // jQuery version is 1.6.0 or higher
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T02:50:23.320

不写代码取决于jQuery版本。

大部分代码应该是一样的，对于一些特殊的部分，测试属性是否存在，而不是使用jQuery的版本。

***例子：***

```
if ('prop' in $jQueryObject) {
  // do something
} else {
  // do in other way
} 
```

要在同一页面中使用不同版本的 jQuery，请查看我对这个问题的回答。

[脚本引用导致冲突](https://stackoverflow.com/questions/8961120/script-reference-causes-conflict)

# android - Android绑定服务和AIDL服务

> ID：12719612
> 
> 赞同：3
> 
> 时间：2012-10-04T02:42:02.403
> 
> 标签：android, service, bounds, aidl

我在 Android 开发者指南上阅读了[绑定服务](http://developer.android.com/guide/components/bound-services.html)和[基于 AIDL 的服务](http://developer.android.com/guide/components/aidl.html)

两者似乎都允许其他组件绑定并执行进程间通信

> 绑定服务允许组件（例如活动）绑定到服务，发送请求，接收响应，甚至执行进程间通信（IPC）。
> 
> AIDL（Android 接口定义语言）类似于您可能使用过的其他 IDL。它允许您定义客户端和服务都同意的编程接口，以便使用进程间通信 (IPC) 相互通信。

那么区别是什么呢 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T04:09:51.637

AIDL 只是与绑定服务通信的一种方式。没有“基于 AIDL 的服务”之类的东西，它只是一个绑定服务，它返回基于 AIDL 接口生成的 Binder。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-30T23:26:45.890

AIDL 是一种合同，如果客户端与服务对话 AIDL 是使用的格式，因此双方都知道它的含义。或者，您可以将 this、that 和 theOther 打包并在此处说。哦，看起来，这个和其他的，或者你可以发送消息。

绑定服务意味着合同双方应该互相认识，比如电话号码、活页夹、姓名或其他东西。服务应该知道客户，也许客户应该知道服务。

# java - 使用 Java 合并 2 个 AAC 文件

> ID：12719615
> 
> 赞同：8
> 
> 时间：2012-10-04T02:42:46.460
> 
> 标签：java, audio, blackberry, merge, aac

我试图将 2 个 AAC 文件合并为一个，我发现在 AAC 文件中 - 标题元素一直存在到 FF8 字节，然后接下来的 4 个字节包含 AAC 数据的长度。我尝试维护1个header数组，加上2个AAC文件的大小，然后一个接一个地添加两个文件的数据缓冲区。

结果文件只播放了第一个 AAC 文件。这是代码片段。

```
FileInputStream fs = new FileInputStream("./res/after.aac");

dis = new DataInputStream(fs);
headerData = new byte[0xFF8];
dis.read(headerData);

int lengthTotal = dis.readInt();
System.out.println("Length of After == "+lengthTotal);
dis.readInt();

data = new byte[dis.available()];

dis.readFully(data);
dis.close();
dis = null;
fs.close();
fs = null;

fs = new FileInputStream("./res/continue.aac");
dis = new DataInputStream(fs);

dis.skipBytes(0xFF8);

int length = dis.readInt();
System.out.println("Length of Ahead == "+length);
lengthTotal = lengthTotal + length -8;
System.out.println("Total Length== "+lengthTotal);
dis.readInt();
newData = new byte[dis.available()];
dis.read(newData);

FileOutputStream fos = new FileOutputStream("./res/combine.aac");
DataOutputStream dos = new DataOutputStream(fos);

dos.write(headerData);
dos.writeInt(lengthTotal);
dos.writeBytes("mdat");
dos.write(data);
dos.write(newData); 
```

我知道在第 56 个字节中有关于 AAC 文件持续时间的信息，但我无法弄清楚。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T04:41:48.467

I would suggest you to take a look at how aac files are parsed in the `jaad` library, particularly interesting are ADTS handling code [here](http://jaadec.svn.sourceforge.net/viewvc/jaadec/jaad/src/net/sourceforge/jaad/adts/) and ADIF header parsing [here](http://jaadec.svn.sourceforge.net/viewvc/jaadec/jaad/src/net/sourceforge/jaad/aac/transport/ADIFHeader.java?revision=148&content-type=text/plain).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T04:08:02.260

好吧，我不能告诉你你做错了什么。但我可以告诉你如何做你想做的事。

首先创建一个General Helper Functions：

```
 public static class General {
    public static void CopyBytes(byte[] dst, int dstOffset, byte[] src) {
        Buffer.BlockCopy(src, 0, dst, dstOffset, src.Length);
    }
}

public static class BitHelper {
    public static int Read(ref ulong x, int length) {
        int r = (int)(x >> (64 - length));
        x <<= length;
        return r;
    }

    public static int Read(byte[] bytes, ref int offset, int length) {
        int startByte = offset / 8;
        int endByte = (offset + length - 1) / 8;
        int skipBits = offset % 8;
        ulong bits = 0;
        for (int i = 0; i <= Math.Min(endByte - startByte, 7); i++) {
            bits |= (ulong)bytes[startByte + i] << (56 - (i * 8));
        }
        if (skipBits != 0) Read(ref bits, skipBits);
        offset += length;
        return Read(ref bits, length);
    }

    public static void Write(ref ulong x, int length, int value) {
        ulong mask = 0xFFFFFFFFFFFFFFFF >> (64 - length);
        x = (x << length) | ((ulong)value & mask);
    }

    public static byte[] CopyBlock(byte[] bytes, int offset, int length) {
        int startByte = offset / 8;
        int endByte = (offset + length - 1) / 8;
        int shiftA = offset % 8;
        int shiftB = 8 - shiftA;
        byte[] dst = new byte[(length + 7) / 8];
        if (shiftA == 0) {
            Buffer.BlockCopy(bytes, startByte, dst, 0, dst.Length);
        }
        else {
            int i;
            for (i = 0; i < endByte - startByte; i++) {
                dst[i] = (byte)((bytes[startByte + i] << shiftA) | (bytes[startByte + i + 1] >> shiftB));
            }
            if (i < dst.Length) {
                dst[i] = (byte)(bytes[startByte + i] << shiftA);
            }
        }
        dst[dst.Length - 1] &= (byte)(0xFF << ((dst.Length * 8) - length));
        return dst;
    }
}

public static class BitConverterBE {
    public static ulong ToUInt64(byte[] value, int startIndex) {
        return
            ((ulong)value[startIndex    ] << 56) |
            ((ulong)value[startIndex + 1] << 48) |
            ((ulong)value[startIndex + 2] << 40) |
            ((ulong)value[startIndex + 3] << 32) |
            ((ulong)value[startIndex + 4] << 24) |
            ((ulong)value[startIndex + 5] << 16) |
            ((ulong)value[startIndex + 6] <<  8) |
            ((ulong)value[startIndex + 7]      );
    }

    public static uint ToUInt32(byte[] value, int startIndex) {
        return
            ((uint)value[startIndex    ] << 24) |
            ((uint)value[startIndex + 1] << 16) |
            ((uint)value[startIndex + 2] <<  8) |
            ((uint)value[startIndex + 3]      );
    }

    public static ushort ToUInt16(byte[] value, int startIndex) {
        return (ushort)(
            (value[startIndex    ] <<  8) |
            (value[startIndex + 1]      ));
    }

    public static byte[] GetBytes(ulong value) {
        byte[] buff = new byte[8];
        buff[0] = (byte)(value >> 56);
        buff[1] = (byte)(value >> 48);
        buff[2] = (byte)(value >> 40);
        buff[3] = (byte)(value >> 32);
        buff[4] = (byte)(value >> 24);
        buff[5] = (byte)(value >> 16);
        buff[6] = (byte)(value >>  8);
        buff[7] = (byte)(value      );
        return buff;
    }

    public static byte[] GetBytes(uint value) {
        byte[] buff = new byte[4];
        buff[0] = (byte)(value >> 24);
        buff[1] = (byte)(value >> 16);
        buff[2] = (byte)(value >>  8);
        buff[3] = (byte)(value      );
        return buff;
    }

    public static byte[] GetBytes(ushort value) {
        byte[] buff = new byte[2];
        buff[0] = (byte)(value >>  8);
        buff[1] = (byte)(value      );
        return buff;
    }
}

public static class BitConverterLE {
    public static byte[] GetBytes(ulong value) {
        byte[] buff = new byte[8];
        buff[0] = (byte)(value      );
        buff[1] = (byte)(value >>  8);
        buff[2] = (byte)(value >> 16);
        buff[3] = (byte)(value >> 24);
        buff[4] = (byte)(value >> 32);
        buff[5] = (byte)(value >> 40);
        buff[6] = (byte)(value >> 48);
        buff[7] = (byte)(value >> 56);
        return buff;
    }

    public static byte[] GetBytes(uint value) {
        byte[] buff = new byte[4];
        buff[0] = (byte)(value      );
        buff[1] = (byte)(value >>  8);
        buff[2] = (byte)(value >> 16);
        buff[3] = (byte)(value >> 24);
        return buff;
    }

    public static byte[] GetBytes(ushort value) {
        byte[] buff = new byte[2];
        buff[0] = (byte)(value      );
        buff[1] = (byte)(value >>  8);
        return buff;
    }
} 
```

现在实现 Audio Helper 类和接口：

```
 interface IAudioWriter
    {
    void WriteChunk(byte[] chunk, uint timeStamp);
    void Finish();
    string Path { get; }
}

    class AACWriter : IAudioWriter
    {
    string _path;
    FileStream _fs;
    int _aacProfile;
    int _sampleRateIndex;
    int _channelConfig;

    public AACWriter(string path) {
        _path = path;
        _fs = new FileStream(path, FileMode.Create, FileAccess.Write, FileShare.Read, 65536);
    }

    public void WriteChunk(byte[] chunk, uint timeStamp)
            {
        if (chunk.Length < 1) return;

        if (chunk[0] == 0) { // Header
            if (chunk.Length < 3) return;

            ulong bits = (ulong)BitConverterBE.ToUInt16(chunk, 1) << 48;

            _aacProfile = BitHelper.Read(ref bits, 5) - 1;
            _sampleRateIndex = BitHelper.Read(ref bits, 4);
            _channelConfig = BitHelper.Read(ref bits, 4);

            if ((_aacProfile < 0) || (_aacProfile > 3))
                throw new Exception("Unsupported AAC profile.");
            if (_sampleRateIndex > 12)
                throw new Exception("Invalid AAC sample rate index.");
            if (_channelConfig > 6)
                throw new Exception("Invalid AAC channel configuration.");
        }
        else { // Audio data
            int dataSize = chunk.Length - 1;
            ulong bits = 0;

            // Reference: WriteADTSHeader from FAAC's bitstream.c

            BitHelper.Write(ref bits, 12, 0xFFF);
            BitHelper.Write(ref bits,  1, 0);
            BitHelper.Write(ref bits,  2, 0);
            BitHelper.Write(ref bits,  1, 1);
            BitHelper.Write(ref bits,  2, _aacProfile);
            BitHelper.Write(ref bits,  4, _sampleRateIndex);
            BitHelper.Write(ref bits,  1, 0);
            BitHelper.Write(ref bits,  3, _channelConfig);
            BitHelper.Write(ref bits,  1, 0);
            BitHelper.Write(ref bits,  1, 0);
            BitHelper.Write(ref bits,  1, 0);
            BitHelper.Write(ref bits,  1, 0);
            BitHelper.Write(ref bits, 13, 7 + dataSize);
            BitHelper.Write(ref bits, 11, 0x7FF);
            BitHelper.Write(ref bits,  2, 0);

            _fs.Write(BitConverterBE.GetBytes(bits), 1, 7);
            _fs.Write(chunk, 1, dataSize);
        }
    }

    public void Finish() {
        _fs.Close();
    }

    public string Path {
        get {
            return _path;
        }
    }
} 
```

现在您需要自己做的是，从第一个 AAC 文件中逐个读取块并写入它们，然后从第二个 AAC 文件中逐个读取块并将它们附加到中间文件。

注意，上面的代码是 C#，所以你必须使用 wrapping 来模拟 C# 的`ref`效果，只需替换：

```
ref Type variable_name 
```

和：

```
_<Type> variable_name 
```

# python - 导入 Pylab 时出错

> ID：12719618
> 
> 赞同：0
> 
> 时间：2012-10-04T02:43:05.243
> 
> 标签：python, import, matplotlib, enthought

我正在尝试使用`import matplotlib.pyplot as plt`. 但是我在下面收到一条错误消息。有没有人可以解决这个问题？我正在使用 Enthought 的发行版，它使用 IPython 0.12。

```
In [1]: import matplotlib.pyplot as plt
---------------------------------------------------------------------------
ImportError                               Traceback (most recent call last)
<ipython-input-1-eff513f636fd> in <module>()
----> 1 import matplotlib.pyplot as plt

/Library/Python/2.7/site-packages/matplotlib/pyplot.py in <module>()
     21 from matplotlib.cbook import dedent, silent_list, is_string_like, is_numlike
     22 from matplotlib import docstring
---> 23 from matplotlib.figure import Figure, figaspect
     24 from matplotlib.backend_bases import FigureCanvasBase
     25 from matplotlib.image import imread as _imread

/Library/Python/2.7/site-packages/matplotlib/figure.py in <module>()
     16 import artist
     17 from artist import Artist, allow_rasterization
---> 18 from axes import Axes, SubplotBase, subplot_class_factory
     19 from cbook import flatten, allequal, Stack, iterable, is_string_like
     20 import _image

/Library/Python/2.7/site-packages/matplotlib/axes.py in <module>()
     12 import matplotlib.artist as martist
     13 from matplotlib.artist import allow_rasterization
---> 14 import matplotlib.axis as maxis
     15 import matplotlib.cbook as cbook
     16 import matplotlib.collections as mcoll

/Library/Python/2.7/site-packages/matplotlib/axis.py in <module>()
      8 from matplotlib.artist import allow_rasterization
      9 import matplotlib.cbook as cbook
---> 10 import matplotlib.font_manager as font_manager
     11 import matplotlib.lines as mlines
     12 import matplotlib.patches as mpatches

/Library/Python/2.7/site-packages/matplotlib/font_manager.py in <module>()
     50 import matplotlib
     51 from matplotlib import afm
---> 52 from matplotlib import ft2font
     53 from matplotlib import rcParams, get_configdir
     54 from matplotlib.cbook import is_string_like

ImportError: dlopen(/Library/Python/2.7/site-packages/matplotlib/ft2font.so, 2): Library         not loaded: /opt/local/lib/libfreetype.6.dylib
  Referenced from: /Library/Python/2.7/site-packages/matplotlib/ft2font.so
  Reason: image not found 
```

编辑：输出`ls -ltr /Library/Python/2.7/site-packages/matplotlib/`：

```
total 19800
-rw-r--r--   1 root   wheel   44538 Sep 24 21:21 widgets.py
-rw-r--r--   1 root   wheel    5035 Sep 24 21:21 units.py
-rw-r--r--   1 root   wheel   11537 Sep 24 21:21 type1font.py
-rw-r--r--   1 root   wheel   77154 Sep 24 21:21 transforms.py
-rw-r--r--   1 root   wheel    7098 Sep 24 21:21 tight_layout.py
-rw-r--r--   1 root   wheel    3839 Sep 24 21:21 tight_bbox.py
-rw-r--r--   1 root   wheel   51195 Sep 24 21:21 ticker.py
-rw-r--r--   1 root   wheel   15516 Sep 24 21:21 textpath.py
-rw-r--r--   1 root   wheel   69526 Sep 24 21:21 text.py
-rw-r--r--   1 root   wheel   22703 Sep 24 21:21 texmanager.py
-rw-r--r--   1 root   wheel   16868 Sep 24 21:21 table.py
-rw-r--r--   1 root   wheel   17723 Sep 24 21:21 spines.py
-rw-r--r--   1 root   wheel   14316 Sep 24 21:21 scale.py
-rw-r--r--   1 root   wheel   40573 Sep 24 21:21 sankey.py
-rw-r--r--   1 root   wheel   25707 Sep 24 21:21 rcsetup.py
-rw-r--r--   1 root   wheel   40599 Sep 24 21:21 quiver.py
-rw-r--r--   1 root   wheel   92531 Sep 24 21:21 pyplot.py
-rw-r--r--   1 root   wheel  143924 Sep 24 21:21 pyparsing.py
-rw-r--r--   1 root   wheel   11742 Sep 24 21:21 pylab.py
-rw-r--r--   1 root   wheel    6826 Sep 24 21:21 patheffects.py
-rw-r--r--   1 root   wheel   24453 Sep 24 21:21 path.py
-rw-r--r--   1 root   wheel  133545 Sep 24 21:21 patches.py
-rw-r--r--   1 root   wheel   50156 Sep 24 21:21 offsetbox.py
-rw-r--r--   1 root   wheel     785 Sep 24 21:21 mpl.py
-rw-r--r--   1 root   wheel  100604 Sep 24 21:21 mlab.py
-rw-r--r--   1 root   wheel  109731 Sep 24 21:21 mathtext.py
-rw-r--r--   1 root   wheel   23594 Sep 24 21:21 markers.py
-rw-r--r--   1 root   wheel   38180 Sep 24 21:21 lines.py
-rw-r--r--   1 root   wheel   20098 Sep 24 21:21 legend_handler.py
-rw-r--r--   1 root   wheel   35251 Sep 24 21:21 legend.py
-rw-r--r--   1 root   wheel   46614 Sep 24 21:21 image.py
-rw-r--r--   1 root   wheel    6564 Sep 24 21:21 hatch.py
-rw-r--r--   1 root   wheel   16092 Sep 24 21:21 gridspec.py
-rw-r--r--   1 root   wheel    6429 Sep 24 21:21 fontconfig_pattern.py
-rw-r--r--   1 root   wheel   43749 Sep 24 21:21 font_manager.py
-rw-r--r--   1 root   wheel   23033 Sep 24 21:21 finance.py
-rw-r--r--   1 root   wheel   50232 Sep 24 21:21 figure.py
-rw-r--r--   1 root   wheel   32575 Sep 24 21:21 dviread.py
-rw-r--r--   1 root   wheel    3769 Sep 24 21:21 docstring.py
-rw-r--r--   1 root   wheel   40070 Sep 24 21:21 dates.py
-rw-r--r--   1 root   wheel   54477 Sep 24 21:21 contour.py
-rw-r--r--   1 root   wheel    2832 Sep 24 21:21 container.py
-rw-r--r--   1 root   wheel   44186 Sep 24 21:21 colors.py
-rw-r--r--   1 root   wheel   34547 Sep 24 21:21 colorbar.py
-rw-r--r--   1 root   wheel   45282 Sep 24 21:21 collections.py
-rw-r--r--   1 root   wheel    9508 Sep 24 21:21 cm.py
-rw-r--r--   1 root   wheel   59573 Sep 24 21:21 cbook.py
-rw-r--r--   1 root   wheel   12895 Sep 24 21:21 blocking_input.py
-rw-r--r--   1 root   wheel   16237 Sep 24 21:21 bezier.py
-rw-r--r--   1 root   wheel   94652 Sep 24 21:21 backend_bases.py
-rw-r--r--   1 root   wheel   72371 Sep 24 21:21 axis.py
-rw-r--r--   1 root   wheel  301792 Sep 24 21:21 axes.py
-rw-r--r--   1 root   wheel   37279 Sep 24 21:21 artist.py
-rw-r--r--   1 root   wheel   19948 Sep 24 21:21 animation.py
-rw-r--r--   1 root   wheel   15422 Sep 24 21:21 afm.py
-rw-r--r--   1 root   wheel    3275 Sep 24 21:21 _pylab_helpers.py
-rw-r--r--   1 root   wheel   89917 Sep 24 21:21 _mathtext_data.py
-rw-r--r--   1 root   wheel   88432 Sep 24 21:21 _cm.py
-rw-r--r--   1 root   wheel   33452 Sep 24 21:21 __init__.py
-rwxr-xr-x   1 root   wheel  844488 Sep 24 21:21 ft2font.so
-rwxr-xr-x   1 root   wheel  152904 Sep 24 21:21 ttconv.so
-rwxr-xr-x   1 root   wheel   53672 Sep 24 21:21 _cntr.so
-rwxr-xr-x   1 root   wheel   35020 Sep 24 21:21 nxutils.so
-rwxr-xr-x   1 root   wheel  161740 Sep 24 21:21 _delaunay.so
-rwxr-xr-x   1 root   wheel  741008 Sep 24 21:21 _path.so
-rwxr-xr-x   1 root   wheel  693588 Sep 24 21:21 _tri.so
-rwxr-xr-x   1 scott  wheel  828348 Sep 24 21:21 _image.so copy
-rwxr-xr-x   1 root   wheel  828348 Sep 24 21:21 _image.so
-rwxr-xr-x   1 root   wheel  488096 Sep 24 21:22 _png.so
drwxr-xr-x   7 root   wheel     238 Sep 24 21:22 mpl-data
-rw-r--r--   1 root   wheel   44944 Sep 24 21:22 widgets.pyc
-rw-r--r--   1 root   wheel    5808 Sep 24 21:22 units.pyc
-rw-r--r--   1 root   wheel   11090 Sep 24 21:22 type1font.pyc
drwxr-xr-x  12 root   wheel     408 Sep 24 21:22 tri
-rw-r--r--   1 root   wheel   91307 Sep 24 21:22 transforms.pyc
-rw-r--r--   1 root   wheel    6061 Sep 24 21:22 tight_layout.pyc
-rw-r--r--   1 root   wheel    4172 Sep 24 21:22 tight_bbox.pyc
-rw-r--r--   1 root   wheel   57906 Sep 24 21:22 ticker.pyc
-rw-r--r--   1 root   wheel   14645 Sep 24 21:22 textpath.pyc
-rw-r--r--   1 root   wheel   67364 Sep 24 21:22 text.pyc
-rw-r--r--   1 root   wheel   19813 Sep 24 21:22 texmanager.pyc
drwxr-xr-x  50 root   wheel    1700 Sep 24 21:22 tests
drwxr-xr-x  11 root   wheel     374 Sep 24 21:22 testing
-rw-r--r--   1 root   wheel   16758 Sep 24 21:22 table.pyc
-rw-r--r--   1 root   wheel   15471 Sep 24 21:22 spines.pyc
drwxr-xr-x  12 root   wheel     408 Sep 24 21:22 sphinxext
-rw-r--r--   1 root   wheel   19505 Sep 24 21:22 scale.pyc
-rw-r--r--   1 root   wheel   26862 Sep 24 21:22 sankey.pyc
-rw-r--r--   1 root   wheel   22428 Sep 24 21:22 rcsetup.pyc
-rw-r--r--   1 root   wheel   35530 Sep 24 21:22 quiver.pyc
-rw-r--r--   1 root   wheel   91567 Sep 24 21:22 pyplot.pyc
-rw-r--r--   1 root   wheel  144868 Sep 24 21:22 pyparsing.pyc
-rw-r--r--   1 root   wheel   13151 Sep 24 21:22 pylab.pyc
drwxr-xr-x   8 root   wheel     272 Sep 24 21:22 projections
-rw-r--r--   1 root   wheel    7714 Sep 24 21:22 patheffects.pyc
-rw-r--r--   1 root   wheel   22967 Sep 24 21:22 path.pyc
-rw-r--r--   1 root   wheel  134328 Sep 24 21:22 patches.pyc
-rw-r--r--   1 root   wheel   54567 Sep 24 21:22 offsetbox.pyc
-rw-r--r--   1 root   wheel    1175 Sep 24 21:22 mpl.pyc
-rw-r--r--   1 root   wheel  105969 Sep 24 21:22 mlab.pyc
-rw-r--r--   1 root   wheel  109167 Sep 24 21:22 mathtext.pyc
-rw-r--r--   1 root   wheel   25276 Sep 24 21:22 markers.pyc
-rw-r--r--   1 root   wheel   41185 Sep 24 21:22 lines.pyc
-rw-r--r--   1 root   wheel   18782 Sep 24 21:22 legend_handler.pyc
-rw-r--r--   1 root   wheel   28941 Sep 24 21:22 legend.pyc
-rw-r--r--   1 root   wheel   44466 Sep 24 21:22 image.pyc
-rw-r--r--   1 root   wheel    9038 Sep 24 21:22 hatch.pyc
-rw-r--r--   1 root   wheel   14893 Sep 24 21:22 gridspec.pyc
-rw-r--r--   1 root   wheel    6491 Sep 24 21:22 fontconfig_pattern.pyc
-rw-r--r--   1 root   wheel   40188 Sep 24 21:22 font_manager.pyc
-rw-r--r--   1 root   wheel   19865 Sep 24 21:22 finance.pyc
-rw-r--r--   1 root   wheel   51123 Sep 24 21:22 figure.pyc
-rw-r--r--   1 root   wheel   33935 Sep 24 21:22 dviread.pyc
-rw-r--r--   1 root   wheel    5278 Sep 24 21:22 docstring.pyc
drwxr-xr-x  10 root   wheel     340 Sep 24 21:22 delaunay
-rw-r--r--   1 root   wheel   43998 Sep 24 21:22 dates.pyc
-rw-r--r--   1 root   wheel   46848 Sep 24 21:22 contour.pyc
-rw-r--r--   1 root   wheel    4997 Sep 24 21:22 container.pyc
-rw-r--r--   1 root   wheel   43736 Sep 24 21:22 colors.pyc
-rw-r--r--   1 root   wheel   32285 Sep 24 21:22 colorbar.pyc
-rw-r--r--   1 root   wheel   46694 Sep 24 21:22 collections.pyc
-rw-r--r--   1 root   wheel   10966 Sep 24 21:22 cm.pyc
-rw-r--r--   1 root   wheel   71936 Sep 24 21:22 cbook.pyc
-rw-r--r--   1 root   wheel   14396 Sep 24 21:22 blocking_input.pyc
-rw-r--r--   1 root   wheel   14524 Sep 24 21:22 bezier.pyc
drwxr-xr-x  59 root   wheel    2006 Sep 24 21:22 backends
-rw-r--r--   1 root   wheel   98700 Sep 24 21:22 backend_bases.pyc
-rw-r--r--   1 root   wheel   68984 Sep 24 21:22 axis.pyc
-rw-r--r--   1 root   wheel  268555 Sep 24 21:22 axes.pyc
-rw-r--r--   1 root   wheel   40988 Sep 24 21:22 artist.pyc
-rw-r--r--   1 root   wheel   15092 Sep 24 21:22 animation.pyc
-rw-r--r--   1 root   wheel   16956 Sep 24 21:22 afm.pyc
-rw-r--r--   1 root   wheel    4467 Sep 24 21:22 _pylab_helpers.pyc
-rw-r--r--   1 root   wheel   64647 Sep 24 21:22 _mathtext_data.pyc
-rw-r--r--   1 root   wheel   81690 Sep 24 21:22 _cm.pyc
-rw-r--r--   1 root   wheel   32767 Sep 24 21:22 __init__.pyc 
```

和输出`ls -ltr /opt/local/lib/`：

```
ls: /opt/local/lib/: No such file or directory 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T16:52:05.973

您正在从系统 Python 的站点包目录 (/Library/Python/2.7/site-packages) 而不是 EPD 的站点包目录 (/Library/Frameworks/Python.framework/Versions/Current/lib/python2\. 7/站点包）。

这可能是由于系统站点包目录中的 .pth 文件造成的。这些文件导致系统站点包目录在运行 EPD 的 Python 时添加到您的 PYTHONPATH（查看 sys.path 以确认）删除或以其他方式删除这些文件，您应该能够从 EPD 附带的 matplotlib 导入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T19:16:28.707

尝试删除字体缓存并重试：

`rm -rf ~/.matplotlib/*cache*`

或者，您能否提供以下输出

`ls -ltr /Library/Python/2.7/site-packages/matplotlib/`

和

`/opt/local/lib/`

# java - Java 模板匹配越界

> ID：12719622
> 
> 赞同：1
> 
> 时间：2012-10-04T02:43:40.313
> 
> 标签：java, image, function, bufferedimage, template-matching

我最近对模板匹配感兴趣，我知道 OpenCV 之类的库存在，但我想创建一个简单的函数来查找可以在搜索 BufferedImage 中找到模板的所有点，而无需任何额外的库或安装软件等。

我在 wiki 上找到了一篇关于它的文章，其中包含一些代码：

[http://en.wikipedia.org/wiki/Template_matching](http://en.wikipedia.org/wiki/Template_matching)

它似乎完全符合我的需要，所以我已经将它移植到 Java 中，但不是灰度，而是稍微改变了它以使用颜色。使用纯白色模板图像（30x30）和搜索图像（508x307）进行测试，搜索图像也是纯白色，但在某些区域带有红色矩形，代码似乎可以正确输出到控制台一段时间，但是我收到错误：

```
Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException: Coordinate out of bounds!
    at sun.awt.image.ByteInterleavedRaster.getDataElements(Unknown Source)
    at java.awt.image.BufferedImage.getRGB(Unknown Source) 
```

我不确定这是否是由于它不是灰度的事实，或者 java 是否需要对循环量进行额外调整，但任何帮助使其正常工作的帮助将不胜感激。

```
public Point[] TemplateMatchBI(BufferedImage Search, BufferedImage Template){

// Point list
ArrayList<Point> temp = new ArrayList<Point>(); 

//Matched Colors Boolean
boolean m = false; 

//Current Index, Matched Colors Count, Search Color (Int), Template Color (Int)
int index = 0, mcc = 0, sc = 0, tc = 0; 

// Quick Strings
String s01 = "Index = ", s02 = ", Search color = ", s03 = ", Template color = ", 
s04 = ", Matched? = ", s05 = ", Matched? = ", s06 = ", Template scan = ";

// Loop through the search image
for ( int x = 0; x <= Search.getHeight() - Template.getHeight(); x++ ) {
    for ( int y = 0; y <= Search.getWidth() - Template.getWidth(); y++ ) {

        // Loop through the template image
        for (int i = 0; i < Template.getHeight(); i++)
            for (int j = 0; j < Template.getWidth(); j++) {

                sc = Search.getRGB(x+i, y+j); // Set Search Color
                tc = Template.getRGB(i, j); // Set Template Color

                index++; // Increase index int
                m = false; // Reset m to false

                if ( sc == tc ){ // If the Search and Template Colors match then
                    mcc++; // Increase match count
                    m = true; // Colors match
                    //temp.add(new Point(i, j)); // Template scan point
                }

                Log(s01 + index + s02 + sc + s03 + tc + s04 + m + s05 + mcc + s06 + new Point(x, y));
                //Log("i = " + i + ", j = " + j + ", point = " + new Point(x+i, y+j));
            }
        }
    }
Point[] tempReturn = new Point[temp.size()];
temp.toArray(tempReturn);
return tempReturn;
} 
```

我测试的图像：

Template.png（它是纯白色的，因此在页面上看起来不可见）

![模板.png](../Images/265a433ca61e84fc91adc9cfb1a736d2.png)

搜索.png

![搜索.png](../Images/854850717bda7c6d85ade1cab3f58856.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T13:30:14.760

似乎 wiki 提供了错误的代码，并且 X 和 Y 是相反的，当交换它似乎工作时。

# xna - XNA如何实现重力？

> ID：12719627
> 
> 赞同：0
> 
> 时间：2012-10-04T02:45:22.667
> 
> 标签：xna, gravity

我已经尝试按照 XNA Development 网站上的示例进行操作，但是当角色跳跃时，他们无法控制/无法停止跳跃运动，直到完成。

我该如何解决？这是我的跳转代码

```
private void Jump()
    {
        if (mCurrentState != FoxState.Jumping)
        {

            mCurrentState = FoxState.Jumping;
            mStartingPosition = Position;
            Direction.Y = Fox_vSpeed;
            Speed = new Vector2(Fox_Speed, Fox_Speed);
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T02:51:46.217

重力只是一种影响物体加速度的力。加速度会改变物体的速度，因此您可以这样做：Speed -= Vector2.UnitY * -2; 然后，您可以检查与地面上的物体的碰撞，一旦发生这种碰撞，您可以将速度的 Y 分量归零（如果 Y 分量的幅度（绝对值）太高，可能会对可怜的狐狸造成伤害）。

就像是：

```
Update(GameTime gt)
{
    if(mCurrentState == FoxState.Jumping)
    {
        Speed -= Vector2.UnitY * -2;
        Position += Speed;
        if(Position.Y > GroundLevel)
        {
            Position.Y = 0;
            mCurrentState = FoxState.Walking;
        }

    }
} 
```

如果您需要更多信息，请使用详细信息修改您的问题。

# android - 如何在android中为此coverflow应用程序实现onItemClickListener

> ID：12719630
> 
> 赞同：2
> 
> 时间：2012-10-04T02:45:51.147
> 
> 标签：android, onclick, abstract-class, coverflow, onitemclicklistener

我无法让 onItemClickListener 在我的代码中工作。为了测试它，如果单击其中一个视图（封面流中的图像），我在 onClick 中放置了一个 Toast 以在屏幕上显示一些文本，但没有结果。我可能做错了什么。我该怎么办？

下面显示的代码有两部分。第一部分来自我用来实现coverflow活动的coverFlowExample.java类文件，下面的第二部分代码来自另一个名为抽象类CoverAdapterView的类文件，它具有OnItemClickListener的抽象方法。

下面的代码在coverflowactivity 活动的oncreate 方法中。

我必须创建“int = xu 位置”，因为编译器不允许我直接使用 int 位置变量，该变量是 onItemClick 方法中采用的参数的一部分

```
 // inner class inside of onCreate method for implememting OnIteimClickListener

        class ClickOnImage implements OnItemClickListener {  

        @Override
        public void onItemClick(CoverAdapterView<?> parent, View view,
                int position, long id) {

            int xu = position;

            Toast.makeText(CoverFlowExample.this, "clicked on one of  the images " + xu, Toast.LENGTH_SHORT).show();

        }

    } 
```

接下来是与另一个类文件中的 OnItemClickListener 相关的代码

```
 public abstract class CoverAdapterView<T extends Adapter> extends ViewGroup {

  // inside this abstract class the below code is refers to the OnItemClickListener

  /**
  * The listener that receives notifications when an item is clicked.
  */
  OnItemClickListener mOnItemClickListener;

   /**
  * Interface definition for a callback to be invoked when an item in this
  * AdapterView has been clicked.
  */
   public interface OnItemClickListener {

    /**
     * Callback method to be invoked when an item in this AdapterView has
     * been clicked.
     * <p>
     * Implementers can call getItemAtPosition(position) if they need
     * to access the data associated with the selected item.
     *
     * @param parent The AdapterView where the click happened.
     * @param view The view within the AdapterView that was clicked (this
     *            will be a view provided by the adapter)
     * @param position The position of the view in the adapter.
     * @param id The row id of the item that was clicked.
     */
    void onItemClick(CoverAdapterView<?> parent, View view, int position, long id);

    }

   /**
    * Register a callback to be invoked when an item in this AdapterView has
    * been clicked.
    *
    * @param listener The callback that will be invoked.
    */
    public void setOnItemClickListener(OnItemClickListener listener) {
    mOnItemClickListener = listener;
   }

   /**
    * @return The callback to be invoked with an item in this AdapterView has
    *         been clicked, or null id no callback has been set.
    */
    public final OnItemClickListener getOnItemClickListener() {
    return mOnItemClickListener;
   }

   /**
   * Call the OnItemClickListener, if it is defined.
   *
   * @param view The view within the AdapterView that was clicked.
   * @param position The position of the view in the adapter.
   * @param id The row id of the item that was clicked.
   * @return True if there was an assigned OnItemClickListener that was
   *         called, false otherwise is returned.
   */
    public boolean performItemClick(View view, int position, long id) {
        if (mOnItemClickListener != null) {
        playSoundEffect(SoundEffectConstants.CLICK);
        mOnItemClickListener.onItemClick(this, view, position, id);
        return true;
    }

    return false;
   } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T03:18:04.980

您是否在期望单击的视图对象上设置 OnItemClickListener？

```
ListView mListView;

mListView = (ListView) findViewById(R.id.xml_layout_view_name);

mListView.setOnItemClickListener(new ClickOnImage()) 
```

我的第一个猜测是您的 ClickOnImage 类未连接到被单击的对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T03:59:12.993

尝试使用**setOnItemClickListener**方法，例如...

```
 CoverFlow  coverFlow;
    coverFlow = new CoverFlow (this);  

    coverFlow.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(CoverAdapterView<?> parent, View view,
                int position, long id) {

             System.out.println("----------------->"+ position );

        }

    }); 
```

祝你好运。

# c - C中的简单数学？

> ID：12719635
> 
> 赞同：-1
> 
> 时间：2012-10-04T02:46:17.810
> 
> 标签：c

说明：设置冷冻酸奶的金额。大人会按一定比例给孩子吃。每盎司酸奶是 0.49。出于某种原因，这不起作用，我不知道为什么。我知道哪一行造成了麻烦，我用粗体和斜体表示。

```
#include <stdio.h>

# define SALES_TAX 0.065
# define PRICE_PER_OZ 0.49

int main()
{
    float totalcash;
    double ratio;
    double totalbeforetax;
    float totalounces;
    double adultounces;
    double childounces;

    //user input for total cash and scanning
    printf("How many dollars do you have for frozen yogurt?\n");

    //scan in total cash
    scanf("%f", &totalcash);

    //user input for ratio and scanning
    printf("What is the ratio of yogurt that you'll get to your child?\n");

    //scan in ratio
    scanf("%lf", &ratio);

    //solve for values
    totalbeforetax = (totalcash)/(1+SALES_TAX);
    totalounces = totalbeforetax/(PRICE_PER_OZ);
    //adultounces = childounces*ratio;
    ***adultounces = (totalounces-adultounces)*(ratio);***
   // childounces = adultounces/ratio;
    childounces = totalounces-adultounces;

    //output
    printf("You will get %.2lf ounces of yogurt.\n",adultounces);
    printf("Your child will get %.2lf ounces of yougrt\n", childounces);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T02:59:32.350

`adultounces`在计算中使用它之前，您尚未初始化。你需要做一些代数来弄清楚如何根据你所拥有的进行计算。

暗示：

```
adult + child = ratio*child + child = total 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T03:03:10.010

数学很简单：

```
childounces = totalounces / (1+ratio);
adultounces = totalounces - childounces; 
```

# java - java.sql.PreparedStatement的Android实现

> ID：12719639
> 
> 赞同：2
> 
> 时间：2012-10-04T02:46:49.073
> 
> 标签：java, android, sqlite, prepared-statement, android-sqlite

我正在研究如何使用[java.sql.PreparedStatement](https://stackoverflow.com/questions/433392/how-do-i-use-prepared-statements-in-sqlite-in-android)对象在我的 Android 应用程序中查询 SQLite 数据库。根据我之前编写查询 Oracle 数据库的 Java 应用程序的经验，我习惯于以这种方式编写查询语句。

在我的谷歌搜索和 Stackoverflowing 过程中，我很容易得出结论，使用[android.database.sqlite.SQLiteStatement](http://developer.android.com/reference/android/database/sqlite/SQLiteStatement.html)是 Android 编码人员广泛接受的解决方案（例如，[请参阅这篇文章](https://stackoverflow.com/questions/433392/how-do-i-use-prepared-statements-in-sqlite-in-android)）。仍然......我仍然很好奇为什么 Android 的公认解决方案是使用一个不是 java.sql.PreparedStatement 实现者的类。

为什么 SQLiteStatement 没有实现 PreparedStatement？两者在性能、语句编译时间等方面有什么区别。 有没有 Android 的 PreparedStatement 实现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T03:06:09.397

因为[API](http://developer.android.com/reference/android/database/sqlite/SQLiteStatement.html)[与`SQLiteStatement`](http://developer.android.com/reference/android/database/sqlite/SQLiteStatement.html)API不一样`PreparedStatement`！前者没有实现后者所需的所有功能。例如：

> [ `SQLiteStatement`] 表示可以对数据库执行的语句。**该语句不能返回多行或多列**，但支持单值 (1 x 1) 结果集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T02:55:41.203

我的解释是：

Android 内置了 SQLLite 数据库（没有其他数据库），因此 Android API 提供 SQLLiteStatement 而不是使用整个 java.sql API。

SQLLite 数据库本身提供的功能有限，你不能用其他数据库做你能做的一切，所以我猜他们已经引入了轻量级 API。

# asp.net - 在联系我们表格中显示处理指示符

> ID：12719641
> 
> 赞同：0
> 
> 时间：2012-10-04T02:47:25.220
> 
> 标签：asp.net, forms, redirect, web, contact-form

我的网站上有一个使用 ASP.NET [http://sosdeepcleaning.com/contactus.aspx的联系我们页面](http://sosdeepcleaning.com/contactus.aspx)

当客户填写表单并单击提交时，它不会显示页面正在处理表单的任何迹象，因此他们中的一些人单击了两次提交按钮。

我怎样才能防止他们点击它两次？对话框？“等待”吧？警报？我可以在 Response.Redirect 之前添加任何简单的解决方案吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T02:49:57.853

双重提交问题的常见解决方案是灰显（禁用）提交按钮，并可选地在提交按钮旁边显示进度条。

使用 jQuery：

```
$('form').submit(function()
{
    $('input[type="submit"]').attr('disabled','disabled');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T03:52:49.943

如上一个答案所述，如果页面经过验证，则在第一次单击时通过**jQuery****禁用按钮。**试试下面的片段

 **```
<script src="Scripts/jquery-1.4.1.js" type="text/javascript"></script>    
<script type="text/javascript">
    $(document).ready(function () { 
       $("#btnSubmit").click(function () {
            // Assumes you have asp.net validation controls 
            // so you can check Page_IsValid
            if (Page_IsValid) {
                $(this).attr("disabled", "disabled");
                $(this).attr("value", "Processing...");
            }
        });
    });
</script> 
```**

# java - BeanUtils 复制属性：注册 ConvertUtils

> ID：12719645
> 
> 赞同：4
> 
> 时间：2012-10-04T02:49:04.547
> 
> 标签：java

我有用 Java 编写的 Web 应用程序。我正在使用`BeanUtils.copyProperties`方法。如果`date`字段为空，则会引发错误。我通过使用`ConvertUtils.register`方法解决了它。

```
ConvertUtils.register(new DateConverter(null), Date.class); 
```

它现在可以工作，但是正确的使用方法是什么`ConvertUtils.register`。应该放在哪里？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-04T03:33:38.143

您所做的仅对一种类（日期）类型是**正确的。**这是通过调用 register 方法对所有支持的类型（包括 Date）实现的，`ConvertUtilsBean`如下所示：

```
 ConvertUtilsBean convertUtilsBean = BeanUtilsBean.getInstance().getConvertUtils();
    convertUtilsBean.register(false, true, -1); 
```

在这里，第一个参数`false`意味着不抛出转换异常。第二个参数`true`表示，如果有异常，则使用 null 作为默认值。第三个参数`-1`表示数组类型将默认为空。如果要默认具有特定大小的数组，请将大小作为第三个参数。

请参阅[此处的更多详细信息 (ConvertUtilsBean Javadoc)](http://commons.apache.org/proper/commons-beanutils/apidocs/org/apache/commons/beanutils/ConvertUtilsBean.html#register-boolean-boolean-int-)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-15T14:55:50.997

一个好地方是 ServletContextListener，你只需要做一次。

[未调用 ServletContextListener](https://stackoverflow.com/questions/18367514/servletcontextlistener-not-being-invoked)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-19T23:19:44.660

为了在适当的地方注册您的转换器，请检查以下链接：

[http://www.coderanch.com/t/459630/Struts/Apache-Commons-Custom-Converter-Implementation](http://www.coderanch.com/t/459630/Struts/Apache-Commons-Custom-Converter-Implementation) [http://mail-archives.apache.org/mod_mbox/struts-user/200303.mbox/%3COE27foV1qdiixjnzi950001205d@ hotmail.com%3E](http://mail-archives.apache.org/mod_mbox/struts-user/200303.mbox/%3COE27foV1qdiixjnzi950001205d@hotmail.com%3E)

# twitter-bootstrap - 如何在 twitter-bootstrap 中停止图像响应？

> ID：12719649
> 
> 赞同：10
> 
> 时间：2012-10-04T02:49:40.273
> 
> 标签：twitter-bootstrap, responsive-design

我正在使用 twitter bootstrap 来制作响应式布局。它的工作原理非常棒。

它使图像过于敏感。我需要一些图像只需要固定宽度和高度。

```
<div class="span1"><img src="http://i.ytimg.com/vi/uGBKzIY4mpc/0.jpg" width="50" height="40"></div> 
```

我怎样才能做到？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-05T02:53:04.647

创建一个新类并将最小高度和最小宽度设置为您不想缩小的图像的宽度和高度，然后将该类添加到这些图像中。

例如。

```
/* css */
img.no-resize {
  min-height: 40px;
  min-width: 50px;
}

/* html */

<div class="span1">
  <img class="no-resize" src="http://i.ytimg.com/vi/uGBKzIY4mpc/0.jpg" width="50" height="40">
</div> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-11T16:32:27.047

检查您的代码，确保通过设置图像的宽度和高度属性`like you did`它不起作用，并且要修复的样式存在干扰：

```
<div class="span1">
    <img height="40" width="50" src="http://i.ytimg.com/vi/uGBKzIY4mpc/0.jpg" />
</div> 
```

如果您正确填写宽度和高度属性，则不应使用 Bootstrap 调整图像大小。内联属性优先于 css。

否则，您必须覆盖 bootstrap.css 中的 img 样式（行 ~68 版本 2.0。）

```
img {
  /* Responsive images (ensure images don't scale beyond their parents) */
  max-width: 100%;
  /* Part 1: Set a maxium relative to the parent */
  width: auto\9;
  /* IE7-8 need help adjusting responsive images */
  height: auto;
  /* Part 2: Scale the height according to the width, otherwise you get stretching */
  vertical-align: middle;
  border: 0;
  -ms-interpolation-mode: bicubic;
} 
```

使用您的规范创建一个 css 选择器：

```
/* css */
.max-resize-50x40 {
    max-height: 40px;
    max-width: 50px;
}
.resize-50x40 {
    height: 40px;
    width: 50px;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T05:38:03.217

终于奏效了。

```
.fixed_width {
  height: 40px;
  width: 50px;
}

<div class="span1"><img src="http://i.ytimg.com/vi/uGBKzIY4mpc/0.jpg" class="fixed_width" ></div> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-09-10T05:16:52.090

更简单的是，您应该能够向图像添加一个通用类，以便您可以在多种图像尺寸上使用它......

```
/* html */
<img src="image.jpg" alt="An image" class="fixed-size" />

/* css * /
img.fixed-size { height: auto; width: auto; } 
```

我没有在 IE 中尝试过，但它适用于 Safari、FF 和 Chrome。

# java - MVP、测试和私有方法

> ID：12719650
> 
> 赞同：-1
> 
> 时间：2012-10-04T02:49:49.200
> 
> 标签：java, unit-testing, tdd, mvp

我已经切换到 MVP 架构并正在尝试对其进行测试。我对如何构建我的 Presenter 有一些疑问。

```
public class Presenter
{
    public void onResume()
    {
        doA();
        doB();
        doC();
    }

    protected void doA() {};
    protected void doB() {};
    protected void doC() {};
}

public class MyScreen implements MyScreenView
{
    private Presenter presenter;

    public MyScreen()
    {
        presenter = new Presenter(this);
    }

    public OnResume()
    {
        presenter.OnResume();
    }
} 
```

在上面的代码中，当视图恢复时，视图只是调用了演示者 OnResume()。演示者在内部调用 3 个方法，doA()、doB() 和 doC() 来做它必须做的任何事情。

或者，我可以直接在视图中调用 doA()、doB() 和 doC()，如下所示：

```
public class Presenter
{
    public void doA() {};
    public void doB() {};
    public void doC() {};
}

public class MyScreen implements MyScreenView
{
    private Presenter presenter;

    public MyScreen()
    {
        presenter = new Presenter(this);
    }

    public OnResume()
    {
        presenter.doA();
        presenter.doB();
        presenter.doC();
    }
} 
```

我的问题是，测试第二个解决方案对我来说更容易，因为演示者被干净地分解为 3 个单独的个人责任公共方法，我可以分别为 doA、doB 和 doC 编写测试，而不是为演示者编写一个整体测试。解决方案1的onResume()方法。

在第一个解决方案中，我必须为 onResume() 编写测试，它共同负责调用这 3 个方法。这意味着它更难测试，因为它比调用其他私有函数的函数更容易测试由个人负责的较小函数。然而，在我看来，第二个解决方案并不像一个好的 MVP，因为它似乎知道演示者在做什么，只是不让演示者做它在第一个解决方案的 onResume() 方法中应该做的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T11:45:43.210

如果您将 MyScreen 类更改为

```
public class MyScreen implements MyScreenView
{
    private presenter;

    public MyScreen()
    {
        presenter = new Presenter();
    }

    public MyScreen(Presenter p) 
    {
        presenter = p;
    }

    public OnResume()
    {
        presenter.OnResume();
    }
} 
```

然后你有一个生产构造函数，它创建一个新的 Presenter 和一个用于测试的便利构造函数，因此你可以使用 Mock Presenter 实例化它。我更喜欢 Mockito（内存中的代码，所以......）

```
Presenter mockP = Mock(Presenter.class);
MyScreen target = new MyScreen(mockP);
target.OnResume();
verify(mockP).doA();
verify(mockP).doB();
verify(mockP).doC(); 
```

在这里，您使用 Mock Presenter 创建一个新的 MyScreen。当您对各种方法调用 verify 时，如果从未在 mock 上调用该方法，您的测试将失败。因此，您实际上是在编写一个测试，断言如果您在 MyScreen 类上调用 OnResume，效果就是在其 Presenter 字段上调用 ​​doA、doB 和 doC。

您可以在验证方法被调用时指定您期望的参数。并且您可以存根 mockP 的方法，以便它在特定场景中返回已知结果。

* * *

顺便

```
public OnResume()
    {
        presenter.OnResume();
    } 
```

恕我直言是您的两个选项中更好的选择，因为这样您就可以更改该`presenter.OnResume()`方法的功能而无需更改 MyScreen 类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T11:58:37.127

首先在 My Screen 类中使演示者可注入

```
public class MyScreen implements MyScreenView
{
    private presenter;

    public MyScreen()
    {
        presenter = this(new Presenter());
    }

    public MyScreen(Presenter p) 
    {
        presenter = p;
    }

    public OnResume()
    {
        presenter.OnResume();
    }
} 
```

现在您可以通过注入模拟来测试 MyScreen 的行为。

```
Presenter mockP = Mock(Presenter.class);
MyScreen target = new MyScreen(mockP);
target.OnResume();
verify(mockP).doA();
verify(mockP).doB();
verify(mockP).doC(); 
```

在完全独立的测试中，您可以测试演示者：

```
Presenter presenter = new Presenter();
presenter.onResume();
assertEquals("some State that should be true after calling on resume", presenter.getSomeMagicState()); 
```

不要测试 onResume 调用 doA、doB 和 doC，通过检查演示者的状态来测试方法的行为。

如果 doX 所做的事情变得复杂，请将其提取到一个单独的类中，对其进行测试，将其注入演示者并测试它是否被调用。

# ruby-on-rails - Rails 的时间会在午夜中断吗？

> ID：12719661
> 
> 赞同：7
> 
> 时间：2012-10-04T02:51:18.630
> 
> 标签：ruby-on-rails, date, time, timezone, utc

我们来看看日期：

```
1.9.2p320 :008 > Date.today
 => Wed, 03 Oct 2012 
1.9.2p320 :009 > Time.now
 => 2012-10-03 22:32:55 -0400 
```

现在，考虑到午夜是什么时候？

```
1.9.2p320 :005 > Date.today.midnight
 => Wed, 03 Oct 2012 00:00:00 UTC +00:00 
```

说得通。但是昨天呢？

```
1.9.2p320 :006 > Date.yesterday.midnight
 => Wed, 03 Oct 2012 00:00:00 UTC +00:00 
```

呃，这完全没有意义。今天的午夜和昨天的午夜一样吗？你不能是认真的！

```
1.9.2p320 :026 > Date.today.midnight == Date.yesterday.midnight
 => true 
1.9.2p320 :033 > 1.day.ago.midnight == Date.yesterday.midnight
 => true 
1.9.2p320 :034 > 1.day.ago.midnight == Date.today.midnight
 => true 
```

哦，你是认真的。明天怎么样？

```
1.9.2p320 :007 > Date.tomorrow.midnight
 => Fri, 05 Oct 2012 00:00:00 UTC +00:00 
```

等等，如果今天午夜是 3 日 00:00，昨天午夜是 3 日 00:00，但明天午夜是 5 日 00:00，那么 4 日 00:00 呢？

这里是：

```
1.9.2p320 :010 > 0.days.ago
 => Thu, 04 Oct 2012 02:34:58 UTC +00:00 
1.9.2p320 :011 > 0.days.ago.midnight
 => Thu, 04 Oct 2012 00:00:00 UTC +00:00 
```

*但今天*不是零天前吗？显然不是。

是我，还是这根本不是内部一致的？在我看来 Date.today 应该与 0.days.ago 相同。

我知道这`days.ago`实际上是在使用 Time 对象，这是一个时区问题：

```
1.9.2p320 :030 > Date.today
 => Wed, 03 Oct 2012 
1.9.2p320 :021 > Time.now
 => 2012-10-03 22:40:09 -0400 
1.9.2p320 :023 > 0.days.ago
 => Thu, 04 Oct 2012 02:40:22 UTC +00:00 
1.9.2p320 :022 > Time.zone.now
 => Thu, 04 Oct 2012 02:40:14 UTC +00:00 
```

但似乎，鉴于这些是便利函数，将时区假设扔到*一个*便利函数中而不是将其扔到*另一个*便利函数中是一种意思，从所有角度来看，两者都意味着同一件事。

即使撇开这一点不谈，它似乎也无法解释这样一个事实`Date.today.midnight == Date.yesterday.midnight`，即——很简单——狂吠。

既然我知道我不可能是第一个被这个咬伤的人，我问*我错过了什么？*

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-04T03:14:02.247

Rails 将基于相对日期计算，例如`yesterday`,`tomorrow`和`midnight`off`Date.current`其中将尝试使用配置的`Time.zone`： [https ://github.com/rails/rails/blob/master/activesupport/lib/active_support/core_ext/date/calculations.rb #L46](https://github.com/rails/rails/blob/master/activesupport/lib/active_support/core_ext/date/calculations.rb#L46)

由于您`Time.zone`设置为 UTC，因此您不会得到与基于 off 的计算相同的结果`Date.today`，后者将使用您计算机的时钟时间，除非您实际上处于 UTC 时间。

所以，如果你和UTC的时间差大于到午夜的时间，`Date.yesterday`实际上`Date.today`返回的是同一个日期！

尝试使用您所在的任何时区设置 Rails 时区`Time.zone = 'Eastern Time (US & Canada)'`，然后重试您的示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T04:03:14.313

[rossta](https://stackoverflow.com/a/12719804/17410)确定了罪魁祸首。`Time.now.to_date`如有必要，您可能会更好地使用并指定时区：

```
> Time.now.in_time_zone("Asia/Tokyo")
  => Thu, 04 Oct 2012 12:54:43 JST +09:00 
> Time.now.in_time_zone("Asia/Tokyo").to_date.midnight
 => Thu, 04 Oct 2012 00:00:00 JST +09:00 
Time.now.in_time_zone("Asia/Tokyo").to_date.yesterday.midnight
 => Wed, 03 Oct 2012 00:00:00 JST +09:00 

> Time.zone = "America/Los_Angeles"
 => "America/Los_Angeles" 
> Time.now.in_time_zone
 => Wed, 03 Oct 2012 20:55:35 PDT -07:00 

> Time.now.to_date # using the system time
 => Wed, 03 Oct 2012 
> Time.now.to_date.midnight
 => Wed, 03 Oct 2012 00:00:00 PDT -07:00 
> Time.now.to_date.yesterday.midnight
 => Tue, 02 Oct 2012 00:00:00 PDT -07:00 
```

# c# - 指数超出范围。必须是非负数且小于集合的大小。参数名称：索引

> ID：12719665
> 
> 赞同：0
> 
> 时间：2012-10-04T02:51:30.443
> 
> 标签：c#, asp.net

当我单击更新按钮时，我收到此错误，我的更新单击事件

```
protected void btnUpdate_Click(object sender, CommandEventArgs e)
{
    int idx = Convert.ToInt32(e.CommandArgument);
    GridViewRow gr = gvResTasks.Rows[idx];
    ...
} 
```

当 idx 值高达 19 时，它工作正常..当它大于 19 时，这个错误来了..你能帮我解决这个问题吗

更新按钮.aspx

```
<ItemTemplate> <asp:Button runat="server" ID="btnUpdate" Text="Update" OnCommand="btnUpdate_Click" CommandArgument="<%# Container.DataItemIndex %>" /> <%--<asp:Button runat="server" ID="Button1" Text="Update" onclick="btnUpdate_Click" />--%> </ItemTemplate> 
```

更新按钮.aspx.cs

```
protected void btnUpdate_Click(object sender, CommandEventArgs e)
{
   // int idx = Convert.ToInt32(e.CommandArgument);
    int idx = Convert.ToInt32(e.CommandArgument);
    GridViewRow gr = gvResTasks.Rows[idx];

    Label hf = (Label)gr.FindControl("hdEmployeeID");

    string sEmpID = hf.Text;
    lblEmployeeID.Text = sEmpID;
    lblEmployeeID2.Text = sEmpID;

    int Rows = gvResTasks.Rows.Count;
    for (int x = 0; x < Rows; x++)
    {
        GridViewRow tr = gvResTasks.Rows[x];
        tr.CssClass = "WhiteBack";
    }

    ClearMessages();

    gr.CssClass = "TealBack";

    string sSubTaskID = gr.Cells[0].Text;
    lblSubTaskID.Text = sSubTaskID;

    lblSubTaskName.Text = @gr.Cells[1].Text;

    LoadSubTaskInfo();

    Single sProgress = 0;
    Boolean bok = Single.TryParse(lblActualProgress.Text, out sProgress);

    DateTime dPF = DateTime.Parse(lblPlannedFinish.Text);

    if (dPF > DateTime.Now)
    {
        btnFinish.Enabled = false;
    }
    else if (dPF <= DateTime.Now)
    {
        if (sProgress >= 100)
        {
            btnFinish.Enabled = false;
        }
        else
        {
            btnFinish.Enabled = true;
        }
        //btnFinish.Enabled = true;
    }

    panelUpdate.CssClass = "float";
    panelUpdate.Visible = false;
    if (gr.Cells[7].Text != "True")
    {
        panelUpdate.Visible = true;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T04:56:17.387

无需使用`e.CommandArgument`查找`GridViewRow`. 就这样做

```
GridViewRow gr = ((Button)sender).NamingContainer as GridViewRow; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T02:52:55.980

你有多少行？

试试这个：

```
int idx = Convert.ToInt32(e.CommandArgument);

if (idx < gvResTasks.Rows.Count)
{
    GridViewRow gr = gvResTasks.Rows[idx];
} 
```

另外，你能提供 btnUpdate ASPX 代码吗？

# button - cocos2d 的自定义按钮

> ID：12719667
> 
> 赞同：1
> 
> 时间：2012-10-04T02:51:45.863
> 
> 标签：button, cocos2d-iphone, nsinvocation

我正在创建我的自定义“按钮”类...我没有使用 CCMenuItems，因为我的按钮需要一些灵活性。

我的实现如下：

```
DMenuButton : CCSprite <CCTargetedTouchDelegate> 
```

创建时，按钮接收一个`target`and `selector`，并构建一个`NSInvocation`. 当被触摸时，调用被调用。我将主要使用此按钮从一层转到另一层。

**问题**是当从一个层到下一个层，然后再回到上一个层时，会发生一些奇怪的事情：要么没有精灵加载到下一个视图中，要么抛出了 EXC_BAD_ACCESS 错误。

谁能帮我这个？

谢谢！

PS：我的理论是它与 NSInvocation 和“dealloc”方法有关。

难道我做错了什么？

# ruby - Ruby 中 Array#reject 的反义词是什么？

> ID：12719668
> 
> 赞同：52
> 
> 时间：2012-10-04T02:51:48.430
> 
> 标签：ruby, arrays

似乎它可能是`keep_if`。

如果是这样，为什么不叫它`keep`？

* * *

## 回答 #1

> 赞同：104
> 
> 时间：2012-10-04T03:07:12.007

*   与之相反的`reject`是`select`（返回一个新数组）
*   与之相反的`reject!`是`select!`（就地编辑数组）
*   与之相反的`keep_if`是`delete_if`（就地编辑数组）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T14:15:42.943

我认为这与深思熟虑的语义有关，我认为它是正确的。假设您已经有一组东西，“t1、t2 和 t3”；如果你拒绝一个子集，你说“我拒绝 t1 和 t2”。您没有提及 t3，因为它不受您的操作（您的拒绝）的影响：默认为“保留”。但如果你表达的是你打算保留的东西，而你只是说“我保留了t1和t2”，那么t3的状态就会受到质疑：毕竟你已经有了t1和t2，那还有什么意义呢？重新保留它们（它们已经处于默认状态，“保留”），特别是因为您隐含地也保留了 t3\. 通过使用语法“keep_if”，

# ruby-on-rails - Rails：如何动态建立关联

> ID：12719671
> 
> 赞同：0
> 
> 时间：2012-10-04T02:52:18.273
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

如何动态建立关联？例如：

```
current_customer.company.association(:tenders).order('created_at DESC') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T02:58:32.460

我猜您想将关联传递给其他方法。您正在寻找的是 send(:method_name, *args)

所以它会是

```
passed_in_association = :tenders
if( [:tenders,:orders,:users].include?(passed_in_association) )  #for security probably better to add it to a before filter.
 current_customer.company.send(passed_in_association).order('created_at DESC')
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T02:57:11.307

我不确定您到底要做什么，但是`send`如果您想使用变量来访问关联，则可以使用（毕竟这只是另一种方法）：

```
current_customer.company.send(:tenders).order('created_at DESC') 
```

# iphone - 无法在字典中添加 Imageview 引用以查看

> ID：12719672
> 
> 赞同：0
> 
> 时间：2012-10-04T02:52:40.273
> 
> 标签：iphone, ios, cocoa-touch

我不确定我是否正确执行此操作，但本质上我想在控制器加载时实例化我的 uiimageviews。之后，当我实现在计时器上执行的方法时，我想根据索引获取 uiimageview 的引用并将其添加到视图中。

我正在使用 NSMutableDictionary。我将所有代码都放在同一个方法中，只是为了测试它。不应该 [self.view addSubview:poster]; 将第一张图像放在当前视图中？

```
self.images = [NSMutableDictionary dictionary];

CGRect imageFrame = CGRectMake(0.0, 0.0, 1024.0, 280.0);

UIImageView *image_one = [[UIImageView alloc] initWithFrame:imageFrame];
image_one.image = [UIImage imageNamed:@"image_one.png"];
NSString *theKey = [NSString stringWithFormat:@"%d",0];
[self.images setObject:image_one forKey:theKey];

UIImageView *image_two = [[UIImageView alloc] initWithFrame:imageFrame];
image_two.image = [UIImage imageNamed:@"image_two.png"];
NSString *theKey1 = [NSString stringWithFormat:@"%d",1];
[self.images setObject:image_two forKey:theKey1];

UIImageView *poster = (UIImageView *)[self.images objectForKey:0];
[self.view addSubview:poster]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T02:57:35.483

首先，我建议使用 NSMutableArray。由于无论如何您都是通过索引引用数组中的项目，因此不妨使用数组。

尽管使用此代码，但您应该更改几件事。您应该分配 NSMutableArray 而不是使用自动发布的版本。

当您访问 UIImageView 时，键是字符串，而不是整数。所以，它应该是：

```
UIImageView *poster = (UIImageView *)[self.images objectForKey:@"0"]; 
```

# reporting-services - （SSRS）SQL Reports Web Service vs Report Viewer vs SQL Report Front End

> ID：12719676
> 
> 赞同：2
> 
> 时间：2012-10-04T02:53:15.123
> 
> 标签：reporting-services

我们计划在我们的公司中使用 SQL 报告，我们目前正在评估向最终用户公开报告的方式。我们是否应该使用报告 Web 服务，然后通过 .NET 应用程序呈现报告？我们应该使用报表查看器还是应该向用户公开 SQL GUI？这些相互之间的优缺点是什么？有人可以帮忙吗？我在任何地方都找不到这方面的任何信息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T05:45:43.930

最简单的方法是使用默认启用的报告管理器网站，安装 SSRS 它非常快速且易于运行，并且安全/快照（缓存）/订阅（电子邮件等）选项很容易在每个站点上配置/每个文件夹/每个报告的基础。它的缺点是：

1.  这很丑 - 虽然如果你对 CSS 很好，你可能会弄乱它，但我不会。较新的版本，例如 2008R2 和 2012 不那么难看
2.  它有一个丑陋的 URL - 尽管您可以使用 DNS 别名来解决这个问题
3.  它不允许您控制参数下拉列表和其他对象在页面上的显示方式，但这并不重要

我通常将 Sharepoint（MOSS 不是 WSS）（如果公司有）与报表查看器 Web 部件一起使用。它不需要任何特殊的 Sharepoint SSRS 集成模式 - 您可以阅读相关内容，但这不是我推荐的路径。

然后，这些报告似乎嵌入了该公司现有的内部网站，该网站看起来很专业 IMO。Powerview for sharepoint 也是一个不错的选择（或旧版本 Sharepoint 中的性能点）

我绝对不会走网络服务的道路，那将需要大量不必要的编程。如果您周围有很多空闲的 .NET 开发人员，我仍然不会这样做。

而不是使用 Visual Studio 中的报表查看器对象在 .NET Web 应用程序中显示报表。使用 BIDS（2008R2 和更早版本）或 SSDT（2012）设计报告比编程要容易得多，特别是如果您使用过其他报告工具，例如水晶报告甚至 Access。使用该报表查看器对象比滚动您自己的对象要好得多。

我已经按照容易和需要工作的顺序写了我的回复。希望这会有所帮助。

# asp.net - Telerik Rad 窗口仅打开一次

> ID：12719678
> 
> 赞同：0
> 
> 时间：2012-10-04T02:53:55.437
> 
> 标签：asp.net, vb.net, telerik, radgrid, radwindow

我在其 itemTemplate 中有一个带有超链接的 Rad Grid，超链接将打开一个 Radwindow

```
<asp:Content ContentPlaceHolderID="MenuPlaceHolder" runat="server" ID="Menus">
<telerik:RadCodeBlock ID="RadCodeBlock1" runat="server">
    <script type="text/javascript">
        function ShowOnCar(id) {

            window.radopen("OnCar.aspx?SN=" + id, "ShowOnCar");
            return false;
        }

    </script>
</telerik:RadCodeBlock>
<telerik:RadAjaxManager ID="RadAjaxManager1" runat="server">
    <AjaxSettings>
        <telerik:AjaxSetting AjaxControlID="onCarLink">
            <UpdatedControls>
                <telerik:AjaxUpdatedControl ControlID="RadWindowManager1" />
            </UpdatedControls>
        </telerik:AjaxSetting>
    </AjaxSettings>
</telerik:RadAjaxManager></asp:Content>

<asp:Content ID="SheetContent" ContentPlaceHolderID="SheetContentPlaceHolder" runat="Server">
<telerik:RadAjaxPanel ID="RadAjaxPanel1d" runat="server" LoadingPanelID="RadAjaxLoadingPanel1">
    <telerik:RadGrid ID="dt_lst_SN" runat="server" EnableEmbeddedSkins="false">
        <MasterTableView AutoGenerateColumns="False">
            <Columns>
                <telerik:GridTemplateColumn FilterControlAltText="Filter TemplateColumn column" UniqueName="TemplateColumn">
                    <ItemTemplate>
                        <asp:HyperLink ID="onCarLink" runat="server">
                            <asp:PlaceHolder runat="server" ID="TempPlaceholder" />
                        </asp:HyperLink>
                    </ItemTemplate>
                </telerik:GridTemplateColumn>
            </Columns>
        </MasterTableView>
    </telerik:RadGrid>
</telerik:RadAjaxPanel>
<telerik:RadWindowManager ID="RadWindowManager1" runat="server">
    <Windows>
        <telerik:RadWindow ID="ShowOnCar" runat="server" Title="Details" Height="400px" Width="650px"
            Left="150px" ReloadOnShow="true" ShowContentDuringLoad="false" Modal="true" />
    </Windows>
</telerik:RadWindowManager></asp:Content> 
```

在后面的代码中，

> ```
> Protected Sub dt_lst_SN_ItemDataBound(ByVal sender As Object, ByVal e As Telerik.Web.UI.GridItemEventArgs) Handles dt_lst_SN.ItemDataBound
>     If TypeOf e.Item Is GridDataItem Then
>         Dim onCarLink As HyperLink = DirectCast(e.Item.FindControl("onCarLink"), HyperLink)
>         onCarLink.Attributes("href") = "#"
>         onCarLink.Attributes("onclick") = [String].Format("return ShowOnCar('{0}');", e.Item.Cells(dt_lst_SN.Columns.FindByUniqueName("SN_ID").OrderIndex).Text)
>     End If
> End Sub 
> ```

此代码将正确打开 radwindow，但只打开一次！什么不见​​了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T12:52:29.507

查找 JavaScript 错误、更改函数名称、RadWindow ID 等。尝试将链接的 href 设置为 javascript:void(0);

# android - Android 软键盘的多语言支持

> ID：12719681
> 
> 赞同：3
> 
> 时间：2012-10-04T02:54:40.343
> 
> 标签：android, multilingual, android-softkeyboard

目前，我正在使用 SDK 中提供的 SoftKeyboard 源代码为 Android 开发一个软键盘。

但我想为键盘添加多语言支持（类似于本机键盘中可用的功能）。但这部分在 SoftKeyboard 源代码中不可用。

知道如何实现吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T02:58:33.303

在屏幕键盘上检查此[Android（f/w 1.5+）以获取多种语言](http://code.google.com/p/softkeyboard/downloads/list)

# php - MYSQL错误未知列

> ID：12719682
> 
> 赞同：0
> 
> 时间：2012-10-04T02:54:47.987
> 
> 标签：php, mysql

```
UPDATE post_categories 
SET posts_counter = ".$sql_totalbooknumber." 
WHERE  `name` =  'Posts' 
```

使用上面的查询，我在“where子句”MYSQL错误中不断收到未知列“Posts”

这是我的 $sql_totalbooknumber

$sql_totalbooknumber = "SELECT SUM(posts_counter) FROM `post_categories`WHERE `posts_counter`> '0' AND `category_id`!= '355'";

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T06:32:56.667

尝试这个 ：

```
UPDATE post_categories 
SET posts_counter = '".$sql_totalbooknumber."' 
WHERE  `name` =  'Posts' 
```

用单引号将值括起来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-12-08T22:07:16.587

因为变量`$sql_totalbooknumber`包含 SQL SELECT 查询，所以它必须放在括号中：

```
 $sql_totalbooknumber = "SELECT SUM(posts_counter) FROM post_categories WHERE posts_counter > '0' AND category_id != '355'";

    $sql_query = "UPDATE post_categories 
    SET posts_counter = (".$sql_totalbooknumber.") 
    WHERE  `name` =  'Posts'"; 
```

# c - 指向文字常量的 void 指针

> ID：12719688
> 
> 赞同：0
> 
> 时间：2012-10-04T02:55:56.843
> 
> 标签：c, void-pointers

当我浏览其他人编写的一些代码时，我遇到了以下句子，我不确定其含义。任何帮助表示赞赏。

```
str != ((void *)0) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T02:57:58.750

这一行有效地比较`str`了一个指针，应该是一个指针`NULL`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T02:59:13.277

((void *)0) 本质上与 NULL 相同

从技术上讲，NULL 指针是 0x0

因此该语句确保指针 str 不为 NULL

编译器

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T03:12:42.857

这是测试是否`str`为零或非零的一种冗余方式。

在这种情况下，`(void*)`在 C 和 C++ 代码中广泛使用强制转换通常表明程序员并不真正理解该语言。编译器将在需要它们的许多情况下插入这些强制转换。在这种情况下，它根本不需要。

# oracle - 如何使用 MyBatis 将 Java 对象列表传递给 Oracle 存储过程？

> ID：12719689
> 
> 赞同：9
> 
> 时间：2012-10-04T02:56:14.410
> 
> 标签：oracle, stored-procedures, mybatis

我已经在谷歌上搜索了一段时间，似乎找不到任何真正的答案。

我有一个 Oracle 存储过程，它有许多 in 参数，这些参数的类型是表行类型的表。例如：

**在包装中声明：**

```
TYPE param1_type_t IS TABLE OF table1%ROWTYPE;
TYPE param2_type_t IS TABLE OF table2%ROWTYPE;
TYPE param3_type_t IS TABLE OF table3%ROWTYPE; 
```

**甲骨文程序：**

```
PROCEDURE my_proc
(
   parameter1    IN param1_type_t,
   parameter2    IN param2_type_t,
   parameter3    IN param3_type_t
) 
```

在 Java 方面，我有 3 个对应的对象列表，它们代表 Java 中填充的每个参数。在这种情况下是否可以使用 MyBatis 调用 Oracle 过程？

```
<update id="callOracleSP" statementType="CALLABLE">
    {CALL my_proc( #{param1, mode=IN},
                   #{param2, mode=IN},
                   #{param3, mode=IN}
                 )
    }
</update> 
```

对象本身是简单的 VO，具有 String 和 Integer 属性以及它们各自的 getter 和 setter。

我不确定如何进行。我是否需要以某种方式将 Java 对象列表映射到 Oracle 类型？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-27T04:27:57.507

我不知道您是否已经这样做了，但是您需要定义 Oracle 对象。

```
CREATE OR REPLACE TYPE SCHEMA."YOUR_OBJECT" AS OBJECT
(
    field_one    varchar2(50),
    field_two    varchar2(100)
);
/
CREATE OR REPLACE TYPE SCHEMA."YOUR_OBJECT_ARRAY" AS TABLE OF YOUR_OBJECT;
/ 
```

然后，您可以编写类型处理程序以将 Java 对象映射到 Oracle 对象。

```
import oracle.sql.ARRAY;
import oracle.sql.ArrayDescriptor;
import oracle.sql.STRUCT;
import oracle.sql.StructDescriptor;
....
public class YourTypeHandler implements TypeHandler
{
....
    public void setParameter(PreparedStatement ps, int i, Object parameter, JdbcType jdbcType) throws SQLException
    {
        List<YourObject> objects = (List<YourObject>) parameter;

        StructDescriptor structDescriptor = StructDescriptor.createDescriptor("YOUR_OBJECT", ps.getConnection());

        STRUCT[] structs = new STRUCT[objects.size()];
        for (int index = 0; index < objects.size(); index++)
        {
            YourObject pack = packs.get(index);
            Object[] params = new Object[2];
            params[0] = pack.getFieldOne();
            params[1] = pack.getFieldTwo();
            STRUCT struct = new STRUCT(structDescriptor, ps.getConnection(), params);
            structs[index] = struct;
        }

        ArrayDescriptor desc = ArrayDescriptor.createDescriptor("YOUR_OBJECT_ARRAY", ps.getConnection());
        ARRAY oracleArray = new ARRAY(desc, ps.getConnection(), structs);
        ps.setArray(i, oracleArray);
    }
} 
```

然后调用程序，

```
call your_proc
(
#{yourObjects, javaType=Object, jdbcType=ARRAY, jdbcTypeName=YOUR_OBJECT_ARRAY, mode=IN, typeHandler=YourObjectArrayTypeHandler}
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-19T11:27:05.130

Andy Pryor 的回答非常好，我对其进行了测试，并且确实有效。但它在 typeHandler 有一个错误：

```
call your_proc
(
#{yourObjects, javaType=Object, jdbcType=ARRAY, jdbcTypeName=YOUR_OBJECT_ARRAY, mode=IN, typeHandler=YourObjectArrayTypeHandler}
) 
```

应该：

```
call your_proc
(
#{yourObjects, javaType=Object, jdbcType=ARRAY, jdbcTypeName=YOUR_OBJECT_ARRAY, mode=IN, typeHandler=YourTypeHandler}
) 
```

TypeHandler 也有错误：（没有“包”，我的版本中方法参数有一些差异）

```
@Override
public void setParameter(PreparedStatement ps, int i, Object parameter, String arg3) throws SQLException {
    List<YourObject> objects = (List<YourObject>) parameter;

    StructDescriptor structDescriptor = StructDescriptor.createDescriptor("YOUR_OBJECT", ps.getConnection());

    STRUCT[] structs = new STRUCT[objects.size()];
    for (int index = 0; index < objects.size(); index++)
    {
        YourObject pack = objects.get(index);
        Object[] params = new Object[2];
        params[0] = pack.getFieldOne();
        params[1] = pack.getFieldTwo();
        STRUCT struct = new STRUCT(structDescriptor, ps.getConnection(), params);
        structs[index] = struct;
    }

    ArrayDescriptor desc = ArrayDescriptor.createDescriptor("YOUR_OBJECT_ARRAY", ps.getConnection());
    ARRAY oracleArray = new ARRAY(desc, ps.getConnection(), structs);
    ps.setArray(i, oracleArray);
} 
```

这是 xml 映射的示例：

```
 <parameterMap id="updateHierPersonAssignMap" class="java.util.Map" >                      
    <parameter property="p_array" jdbcType="ARRAY" javaType="Object" mode="IN" typeHandler="com.aamtech.ria.model.domain.typehandler.YourTypeHandler"/>
  </parameterMap>
  <procedure id="updateHierPersonAssign" parameterMap="updateHierPersonAssignMap" >
    <![CDATA[ 
        { call ria_am_util_pkg.j_update_hier_person_assign( ? ) }
    ]]>
  </procedure> 
```

以下是从 DAO 调用它的方法：

```
public void update(List array) {
    Map<String, Object> queryParams = new HashMap<String, Object>();
    queryParams.put("p_array", array);
    try {
        client.update("HashMapResult.updateHierPersonAssign", queryParams);
    } catch (SQLException e) {
    }
} 
```

我的程序看起来像这样（它只是在测试表中插入一行）：

```
Procedure j_update_hier_person_assign (p_array IN YOUR_OBJECT_ARRAY) is
  begin
     FOR i IN 1..p_array.count LOOP
       --dbms_output.put_line();
       insert into test (a) values (p_array(i).field_one);
     END LOOP;
  end; 
```

# webgl - 三观如何。Js 3 d图它的纹理为你想要图片由材料形成吗？

> ID：12719696
> 
> 赞同：1
> 
> 时间：2012-10-04T02:57:07.427
> 
> 标签：webgl, three.js

```
var crateTexture = new THREE.ImageUtils.loadTexture( 'img src="1.jpg' );
var crateMaterial = new THREE.MeshBasicMaterial( { map: crateTexture } );
var cube = new THREE.Mesh( THREE.GeometryUtils.clone(cubeGeometry), crateMaterial );
 cube.position.set(-60, 50, -100);
scene.add(  cube ); 
```

我尝试了以下这个但是是黑色的，并且没有显示我在图片中加载的内容

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T04:24:50.573

有几件事可能会导致您出现这种情况。

您的第一行应如下所示：

```
var crateTexture = new THREE.ImageUtils.loadTexture( '1.jpg' ); 
```

请注意，我们提供`loadTexture`的是普通 URL，而不是 HTML 属性。

下一个最可能导致您看不到纹理的原因是您正在从文件系统本地查看页面，而不是通过网络服务器。`file://`如果您正在从文件系统查看页面（也就是以代替开头的 URL `http://`），当页面尝试加载纹理时，您将收到错误消息。

在 chrome 中，错误如下所示：

```
Cross-origin image load denied by Cross-Origin Resource Sharing policy. 
```

您可能看不到纹理的最后一个原因是您没有不断地渲染场景。确保你有某种`animate()`可以连续渲染场景的功能。

实际上，浏览器需要一瞬间的时间来下载和加载纹理（这是异步发生的），所以如果你只渲染场景一次，你很可能会在图像下载之前渲染它。

我在[这里](http://antonpantev.com/so-related/threecubetexture/)有你的代码的工作版本的现场演示。这是代码的链接[。](https://github.com/antonpantev/so-related/blob/master/threecubetexture/index.html)

# ruby - 比较 Ruby 中哈希数组的深层嵌套数组

> ID：12719699
> 
> 赞同：-3
> 
> 时间：2012-10-04T02:57:32.833
> 
> 标签：ruby

我有一组哈希数组，可以嵌套任何深度。

```
array = [
    [ ['a','2'],  ['b','5'] ], 
    [ ['c','4'], ['d','5']  ],  
    [ ['e','6'], [f,7] ],
    ...] 
```

在第一阶段，我需要比较每个连续的哈希 - 保留一个元素并丢弃另一个元素。在第二步中，必须将散列 1 的选定元素与散列 2 的选定元素进行比较。这个过程必须继续，直到我只剩下一个散列元素。

Ruby 我该怎么做？

非常感谢您的回答

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T03:00:52.320

你可以这样做`==`：

```
array1 = [
    [ ['a','2'],  ['b','5'] ], 
    [ ['c','4'], ['d','5']  ],  
    [ ['e','6'], ['f',7] ]
    ]
array2 = [
    [ ['a','2'],  ['b','5'] ], 
    [ ['c','4'], ['d','5']  ],  
    [ ['e','6'], ['f',7] ]
    ]
array3 = [
    [ ['not','equal'] ]
    ]

array1 == array2
# => true

array2 == array3
# => false 
```

具体见[`Array#==`](http://ruby-doc.org/core-1.9.3/Array.html#method-i-3D-3D)。

# sitecore - @@parentid 属性在 Sitecore 查询中是否有效？

> ID：12719704
> 
> 赞同：3
> 
> 时间：2012-10-04T02:58:02.297
> 
> 标签：sitecore, sitecore6

Sitecore[参考](http://sdn.sitecore.net/upload/sdn5/developer/using%20sitecore%20fast%20query/using%20sitecore%20fast%20query001.pdf)介绍了一些可以在 Query 中使用的属性，包括 @@templatename、@@id 和 @@parentid 等。

parentid 似乎不起作用 -`/sitecore/content//*[@@parentid!='']` 从不返回任何结果。虽然`/sitecore/content//*[@@templatename!='']`工作正常。Sitecore 版本为 6.5 和 6.6。

有人可以用@@parentid 查询吗？（也许它使用祖先/后代表而我缺少数据？？ - 只是一个猜测）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T03:56:47.407

它试图将值解析为 GUID 并失败。相反，请尝试像这样的空 GUID：

```
/sitecore/content//*[@@parentid!='{00000000-0000-0000-0000-000000000000}'] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T23:25:53.550

*   `@@parentid`仅适用于快速查询。
*   在快速查询中，您只能使用祖先而不是祖先或自我（它不会给出错误，它只是做一个后备太祖先）。
*   此外，您不能`|`在快速查询中使用管道来连接 2 个或更多查询的结果。

我一生都无法弄清楚如何做一个“给我父节点具有 id= 的当前节点的祖先或自我`{110D559F-DEA5-42EA-9C1C-8A5DF7E70EF9}`。

# java - 如何在不截断文件的情况下检查 FileLock？

> ID：12719706
> 
> 赞同：4
> 
> 时间：2012-10-04T02:58:26.280
> 
> 标签：java, android, multithreading, fileoutputstream, filelock

我最近在我的下载器 asynctask 中添加了文件锁：

```
FileOutputStream file = new FileOutputStream(_outFile);
file.getChannel().lock(); 
```

下载完成后，`file.close()`释放锁。

从一个称为 BroadcastReceiver （不同的线程），我需要浏览文件，看看哪些已下载，哪些仍被锁定。我从trylock开始：

```
for (int i=0; i<files.length; i++) {
    try {
        System.out.print((files[i]).getName());
        test = new FileOutputStream(files[i]);
        FileLock lock = test.getChannel().tryLock();
        if (lock != null) {
            lock.release();
            //Not a partial download. Do stuff.
        }
    } catch (Exception e) {
        e.printStackTrace();
    } finally {
        test.close();
    }
} 
```

~~不幸的是，当创建 FileOutputStream 时，我读到文件被截断（0 字节）。~~ 我设置为追加，但锁似乎没有生效，所有似乎都未锁定（完全下载）

是否有另一种方法来检查当前是否对文件应用了写锁，或者我在这里使用了错误的方法？另外，有没有办法从 ADB 终端或 Eclipse 调试文件锁？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T03:04:53.220

我的第一个想法是根据[javadocs打开它以进行附加](http://docs.oracle.com/javase/6/docs/api/java/io/FileOutputStream.html#FileOutputStream%28java.lang.String,%20boolean%29)

```
test = new FileOutputStream(files[i], true); // the true specifies for append 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T03:10:10.190

None of this is going to work. Check the Javadoc. Locks are held on behalf of the entire process, i.e. the JVM, not by individual threads.

# python - 从 typescript / tmux 输出中删除显示控制代码

> ID：12719710
> 
> 赞同：1
> 
> 时间：2012-10-04T02:58:43.130
> 
> 标签：python, linux, perl, bash, tmux

我正在使用 tmux 的管道窗格来记录我在做什么，我想解析并考虑我输入的命令等。但是当我得到`xxx.log`文件并用 vim 打开它时，我发现那里有许多特殊词，如 ^H、^M、^G 等，请参见示例：

```
administrator@ubuntu:~$ echo "hello,world[K[K[K[K[K[K[K[K[K[K"
h
administrator@ubuntu:~$ ^G^G^G^G
administrator@ubuntu:~$ 
```

我知道 tmux 记录了我输入的所有内容，但是某些带有 Ctrl/alt 前缀的键无法显示，我想忽略它们。如何使用 perl/python 或 C 存档，有什么提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T03:51:22.697

在一般情况下，这很难，因为某些程序大量使用显示控制代码来绘制对话框等。如果您只想删除任何单个不可打印的字符，使用 很容易`tr`，但如果您想删除显示控制代码，也是，这要复杂得多，并且基本上需要了解您正在使用哪个终端仿真器。一个合理的目标是`xterm`，但我不知道有任何现成的解决方案用于剥离`xterm`显示代码。

# php - 当范围未知时如何按年/月对输出进行排序

> ID：12719715
> 
> 赞同：0
> 
> 时间：2012-10-04T02:59:17.133
> 
> 标签：php, mysql, date, combinations

使用 php 和 mysql-queries 如何生成 YEAR-MONTH 格式的 HTML 输出。

我知道`MONTH()`如果我们想按月显式排序，我们可以使用该函数。但我想要一个 YEAR/MONTH 排序。

该表有一个 ID、DATA、TIME 列。我目前能够输出 YEAR/MONTH 组合，该循环仅从 1900 迭代到 2100，并按月对每一年中的行进行排序，并显示是否找到任何行。

但这是一种幼稚的方法，实际上是不好的方法，因为它不是模块化的。

如何使用 TIME 列的数据在 HTML 中获得 YEAR-MONTH 明智的排序输出

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T03:01:17.897

我不太明白为什么您不能仅按日期本身排序，但您可以使用此代码按 YEAR 和 MONTH 排序，就像您说的那样：

```
order by YEAR(dateField), MONTH(dateField) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T03:01:58.880

和 MySQL[`MONTH()`](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_month)函数一样，也有一个[`YEAR()`](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_year)函数。此外，您可以在单个`SELECT`语句中对多个列进行排序，这样做您将根据*第一*列对所有内容进行排序，然后在每个组中进行子排序。

因此，要获得年/月排序，您可以使用以下`ORDER BY`子句：

```
ORDER BY YEAR(`TIME`), MONTH(`TIME`) 
```

# ruby - 在 irb 负载上创建 ruby 定义

> ID：12719732
> 
> 赞同：0
> 
> 时间：2012-10-04T03:02:31.180
> 
> 标签：ruby

我想在我的 irb 控制台中有一个明确的功能，但没有。这是我每次从终端加载 irb 时输入的内容：

```
def cls
  system 'clear'
end 
```

每次加载 irb 时都键入它并不难，但是当 irb 启动时自动加载这个函数肯定会很好。

是否有可能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T07:37:15.267

当*irb*启动时，它会`.irbrc`在您的主目录中查找该文件。如果文件存在，它会评估它。所以这个文件是向 irb 添加一些通用内容的理想场所......

为了获得灵感，我的看起来像这样：

```
require 'rubygems'
require 'pp'
require 'irb/ext/save-history'

# add $HOME/lib to the load path
$: << '~/lib'

IRB.conf[:AUTO_INDENT] = true
IRB.conf[:SAVE_HISTORY] = 1000
IRB.conf[:HISTORY_FILE] = "#{ENV['HOME']}/.irb_history"

def real_instance_methods_of(klass)
  klass.instance_methods - ((klass.ancestors - [klass]).map(&:instance_methods).flatten)
end

class Class
  def instance_methods_defined_here
    real_instance_methods_of self
  end
end

# more stuff...
# ... 
```

*编辑：我现在才注意到戴夫牛顿的评论；他已经指出了 .irbrc 解决方案...*

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-10-04T03:09:23.443

在 Mac 上只需按 CMD + K 即可清除屏幕

# asp.net - 寻找 RESTful API 的身份验证/模拟策略

> ID：12719733
> 
> 赞同：4
> 
> 时间：2012-10-04T03:02:31.383
> 
> 标签：asp.net, asp.net-mvc-3, rest

我需要在我的 API 中允许模拟（“充当”）。因此，具有适当权限的用户可以像其他用户一样使用 API。我想知道这个领域是否采用了一些特定的策略？

我可以创建一个端点来开始和结束模拟。开始模拟可能涉及获取用户及其权限并将它们加载到当前请求的内存中，这很容易。后续请求呢？添加指示“模拟用户”的 HTTP 标头是不好的做法吗？如果该标头存在，使用它对后续请求进行身份验证？使用带有该 UserId 的 cookie 怎么样？或者附加信息？

将模拟用户分配给 Thread.CurrentPrincipal 是否有额外的好处（假设是 .NET impl）？当前的权限和角色实现是自定义的，本质上是使用一个位数组（尽管这在未来可以更改）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-04T05:34:33.987

HTTP 不包括对委托凭据/模拟的任何本机支持，因此 HTTP 基本身份验证与自定义标头的组合，该标头指示客户端尝试充当哪个其他用户。

但是，我会避免用“开始和结束模拟”的想法污染您的 API。这意味着必须在 API 调用之间维护有状态的会话知识，这将使服务器端的管理变得更加困难。

我只会让客户端在每次调用时传递所有必需的信息（他们的凭据和模拟主体），并每次针对被调用的资源验证它们。

# sql-server - 使用用户定义的表类型变量参数执行远程过程

> ID：12719738
> 
> 赞同：4
> 
> 时间：2012-10-04T03:03:12.993
> 
> 标签：sql-server, tsql, sql-server-2008-r2, linked-server, user-defined-types

我正在尝试通过链接服务器调用远程存储过程。问题是，必需的参数之一是用户定义的表类型。

我似乎无法弄清楚如何从远程服务器将本地变量声明为用户定义的表类型。

到目前为止，这是我正在尝试的，但它不起作用：

```
DECLARE @tblVar [REMOTESERVER].REMOTEDB.dbo.user_defined_table_type

EXEC [REMOTESERVER].REMOTEDB.dbo.procedure_name (@param1 = @tblVar) 
```

但是我得到的错误是：

> 类型名称“REMOTESERVER.REMOTEDB.dbo”包含的前缀数量超过了最大数量。最大值为 1。
> 
> 必须声明标量变量“@tblVar”

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-04T20:09:12.777

经过进一步研究，我发现表变量对于远程过程调用无效。

相反，我所做的是调用`EXEC [REMOTESERVER].[REMOTEDB]..sp_executesql`、声明和填充我的表变量，并在其中调用存储过程。

例子：

```
DECLARE @SQL nvarchar(4000)
SET @SQL = N'
DECLARE @tblVar dbo.user_defined_table_type
-- Code to populate table here
EXEC dbo.procedure_name (@param1 = @tblVar)
'
EXEC [REMOTESERVER].[REMOTEDB]..sp_executesql @stmt = @SQL 
```

这解决了我的问题。希望这将在未来帮助其他人。

# jquery - jQuery单击链接时从页面顶部滚动x像素

> ID：12719741
> 
> 赞同：10
> 
> 时间：2012-10-04T03:03:36.207
> 
> 标签：jquery, scroll, smooth-scrolling

我有一个链接可以在滚动时改变它的垂直位置。当我单击此链接时，我想（平稳地）转到我页面上的某个位置，该链接位于距页面顶部正好 1080 像素的位置。

我不能让它工作，希望有人可以帮助我。

链接：

```
<img src="img/clickme.png" style="cursor: pointer;" class="scroll"/> 
```

剧本：

```
<script type="text/javascript">
$(document).ready(function() {
$(".scroll").click(function(event){     
$('html, body').animate({scrollTo({ top: '+1080px',}, 800);
});
});
</script> 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-04T03:06:53.560

试试这个。你的语法有点不对劲：

```
$(document).ready(function() {
    $(".scroll").click(function(event){
        $('html, body').animate({scrollTop: '+=1080px'}, 800);
    });
}); 
```

**演示：http: [//jsfiddle.net/m4Aaz/2/](http://jsfiddle.net/m4Aaz/2/)**

# php - 将两个数据库列合并为一个数组值php

> ID：12719743
> 
> 赞同：0
> 
> 时间：2012-10-04T03:04:26.867
> 
> 标签：php, arrays

我有一个从 MySql 数据库创建并以 json 编码的数组。

```
$data_array = array();
    while ($row = mysql_fetch_assoc($result)) {
         $data_array[$row['city']] = $row['state']; 
}

 echo json_encode($data_array); 
```

正如预期的那样，它正在输出：

```
{"DALLAS":"WV","DALLAS CENTER":"IA","DALLAS CITY":"IL","DALLASTOWN":"PA","LAKE DALLAS":"TX"} 
```

我需要 json 数据看起来像这样：

```
{"DALLAS, WV","DALLAS CENTER, IA","DALLAS CITY, IL","DALLASTOWN, PA","LAKE DALLAS, TX"} 
```

我似乎在 Stack Overflow 上的任何地方都找不到正确的答案，所以如果这是一个重复的问题，我提前道歉。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T03:07:21.907

而不是这个，作为一个键值对

```
while ($row = mysql_fetch_assoc($result)) {
  $data_array[$row['city']] = $row['state']; 
} 
```

像这样生成它

```
while ($row = mysql_fetch_assoc($result)) {
  $data_array[] = $row['city'].",".$row['state']; 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T03:07:40.660

您当前正在使用以下内容来构建您的阵列：

```
$data_array[$row['city']] = $row['state']; 
```

这将导致 json 为`'city': 'state'`.

尝试将其更改为您想要的格式：

```
$data_array[] = $row['city'] . ', ' . $row['state']; 
```

现在，你应该以你想要的方式拥有 json `'city, state'`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T03:16:37.683

你应该试试

```
$data_array[] = $row['city'] . "," . $row['state']; 
```

mysql_* 上的 PHP_DOC

> 不鼓励使用此扩展程序。相反，应该使用 MySQLi 或 PDO_MySQL 扩展。另请参阅 MySQL：选择 API 指南和相关的常见问题解答以获取更多信息。此功能的替代方案包括：

# sql - MVC4 - 通过 ID 递增的模型插入 SQL 行时出现问题

> ID：12719745
> 
> 赞同：1
> 
> 时间：2012-10-04T03:04:41.347
> 
> 标签：sql, asp.net-mvc, asp.net-mvc-4, sql-server-ce

使用 MVC4，我在将新行插入数据库（SQL Compact）时遇到了一些麻烦。我正在从原始文本（制表符分隔）构建行，如下所示：

```
 while (reader.Peek() != -1)
            {
                newRow = Cos.Create();
                line = reader.ReadLine().Split('\t');
                for (int i = 0; i < header.Count(); i++)
                {
                    switch (header[i])
                    {
                        case "CompanyName":
                            newRow.CompanyName = line[i];
                            break;
                        case "City":
                            newRow.City = line[i];
                            break;
                        case "Country":
                            newRow.Country = line[i];
                            break;
                        default:
                            return "A column was found with an unacceptable value - " + header[i] + " - No changes have been made.";
                    }
                }
                this.Cos.Add(newRow);
            }
        this.SaveChanges(); 
```

我的表有一个 Id 列，设置为：int、Unique、Primary Key 和 Identity (seed:1, increment:1)。问题是 SQL 拒绝了“this.SaveChanges()”生成的语句，因为我生成的所有行的 Id 值都是 0。

有没有办法让 SQL 在插入时为每一行分配一个唯一的 ID？我的理解是，这就是身份的目的。

我的模型看起来像这样：

```
public class CoDB{
        public string CompanyName { get; set; }
        public string City { get; set; }
        public string Country { get; set; }
        public int Id { get; set; }
} 
```

CoDBContext 定义：

```
public DbSet<CoDB> Cos {get; set;} 
```

非常感谢您的帮助！-扎克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T03:58:42.000

听起来您试图设置自动标识字段的值，但您不应该这样做。看看这是否有帮助：[Autonumber with Entity Framework](https://stackoverflow.com/questions/3011764/autonumber-with-entity-framework/3038265#3038265)

# python - 将 Storm 实体复制到另一家商店？

> ID：12719746
> 
> 赞同：1
> 
> 时间：2012-10-04T03:04:49.187
> 
> 标签：python, storm-orm

我有一个使用 Storm ORM 将数据保存在本地 SQLite 数据库中的模块。我正在开发另一个将数据同步到中央 PostgreSQL 服务器的模块。我以为我会很聪明，做以下事情：

```
unsynced = localStore.find(MyType, MyType.synced == False)

for assign in unsynced:
    self.remoteStore.add(assign) 
```

这并不像希望的那样工作，引发以下错误：

```
object at 0x18bb4d0 is part of another store 
```

有没有办法打破与本地商店的关联，以便我可以远程保存数据？这可能会稍微复杂一点，因为我需要在远程成功保存数据后翻转本地副本中的同步标志。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T02:08:15.980

Storm 中没有任何东西可以自动执行此操作，因为应该复制的内容并不总是很明显：

1.  表示表的模型类可能无法完全描述基础表。Python 端可能没有使用其他字段。
2.  目前尚不清楚如何处理外键/引用。您是否也复制相关对象？您是否将外键 ID 保留原样并希望在插入第二个数据库时不会导致完整性错误？您是否尝试在其他数据库中查找等效对象以进行引用？您将使用哪个键进行搜索？

当然，这些问题可能不会影响您的应用程序。在这种情况下，您可以编写一个方法来复制一个对象，以便可以将其添加到另一个存储中：

```
def copy(self):
    """Create a new object with the same property values."""
    other = self.__class__()
    # Copy over the relevant fields.  If you're using an integer primary key,
    # then this probably doesn't include that key.
    other.foo = self.foo
    other.bar = self.bar
    ...
    return other 
```

然后，您可以更改代码以执行以下操作：

```
for assign in unsynced:
    self.remoteStore.add(assign.copy()) 
```

# delphi - 如何在 Delphi XE3 的 Firemonkey FM2 应用程序中设置非客户区的样式

> ID：12719749
> 
> 赞同：8
> 
> 时间：2012-10-04T03:05:16.387
> 
> 标签：delphi, firemonkey, delphi-xe3

我之前在 Delphi XE2 时间范围内问过这个问题，当时的答案是一个非常[丑陋的 hack](https://stackoverflow.com/questions/9013285/delphi-xe2-with-firemonkey-can-you-have-a-non-client-area-that-is-painted-in-a)。

根据官方发布说明，现在 Delphi XE3 支持非客户端主题。你如何在 Firemonkey FM2 的 Delphi XE3 中做到这一点？

我相信这一定与样式书有关，但我无法弄清楚。表单本身有一个“EnableBorderStyling”属性，我将其设置为 true，我想我必须加载一个包含一些非客户端主题数据的样式，但我找不到包含它的样式。

帮助与此主题无关​​。

**Update2**好的，没坏，只是我没有包含这个样式元素的样式（如RRUZ所说）。

```
procedure TForm1.FormShow(Sender: TObject);
begin
  StyleBook := StyleBook1;
  WindowBorder.UpdateStyle;
end; 
```

**Update3**：样式文件似乎位于两个不同的位置，这令人困惑：

```
 C:\Program Files (x86)\Embarcadero\RAD Studio\10.0\Redist\styles\Fmx        
  C:\Users\Public\Documents\RAD Studio\10.0\Styles 
```

请注意，我在这两个地方都没有 Luna.Style（firemonkey 风格），但是使用 Style Editor 工具需要 5 秒。（打开，另存为，将类型更改为 .Style，我就有了！）

**更新 4： RRUZ**的答案有效，但在我的系统（Windows 8 RTM）上，非客户端样式看起来不正确，它们在未完全绘制的区域周围有白色角。调整窗口大小使它消失，我很确定我应该能够强制 WM_NCREPAINT 或其他东西，让它消失。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-05T02:11:48.860

要为 Firemonkey 应用程序的非客户区设置样式，所选样式必须 `windowborderstyle`定义一个元素（如图所示）

![在此处输入图像描述](../Images/c116605e083d2117dfeb8996244107fc.png)

从 delphi 包含的样式中尝试`Luna.Style`

![在此处输入图像描述](../Images/e43e39a1236bc221cad589d4ed6580bd.png)

# sql - SQL 执行 Order by 和 Group by 一起

> ID：12719754
> 
> 赞同：0
> 
> 时间：2012-10-04T03:05:37.897
> 
> 标签：sql, tsql, group-by, sql-order-by

我有下表

```
UNIQUEKEY    ID      Clicks IsProcessed   INSERTDATE
 1         100001   10        1         2011-05-14 00:00:00.000
 2         100001   20        0         2011-05-13 00:00:00.000
 3         100001   30        1         2011-05-18 00:00:00.000
 4         100002   10        1         2011-05-20 00:00:00.000
 5         100002   15        0         2011-05-24 00:00:00.000
 6         100002   10        0         2011-05-05 00:00:00.000 
```

我需要一个 T-SQL 查询，该查询将首先按 INSERTDATE (desc) 排序，一旦订购，它应该返回一个 GROUP by on ID 和 IsProcessed，结果应该显示所有列 Orderby 并按如上所述分组。

编辑：所以如果我们运行查询让我们说它`ID 10001`应该给我 2 个结果集： 期望的结果：

```
UNIQUEKEY    ID      Clicks IsProcessed   INSERTDATE
 3         100001   30        1         2011-05-18 00:00:00.000
 1         100001   10        1         2011-05-14 00:00:00.000        
 2         100001   20        0         2011-05-13 00:00:00.000 
```

Reson 正在`ID`和`IsProcessed`用作键，结果按 排序`Date (desc)`。

任何帮助，将不胜感激 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T06:47:15.460

尝试这个：

```
declare @ID int = 100001
declare @IsProcessed int

declare
  crsMy cursor fast_forward for
select
  distinct IsProcessed
from
  tTest
order by
  IsProcessed desc

open crsMy

fetch next from crsMy into @IsProcessed

while @@fetch_status = 0
begin
  select
    UNIQUEKEY
    ,ID
    ,Clicks
    ,IsProcessed
    ,INSERTDATE
  from
    tTest
  where
    (ID=@ID)
    and
    (IsProcessed=@IsProcessed)
  order by
    INSERTDATE desc

  fetch next from crsMy into @IsProcessed
end

close crsMy
deallocate crsMy 
```

或在[sql fiddle](http://www.sqlfiddle.com/#!3/0451d/4/0)

（在 sqlfiddle 上仅显示第一个结果集。）

# google-app-engine - appengine 中的批处理 servlet 请求

> ID：12719755
> 
> 赞同：0
> 
> 时间：2012-10-04T03:05:48.773
> 
> 标签：google-app-engine

是否可以将一段时间内（例如 1 秒）内收到的所有请求组合起来并批量提供服务。

基本上，我正在寻找一种方法来处理“http servlet 请求响应”映射列表，而不是分别为每个 req-resp 对提供服务。我希望 HttpServletReqRespMapList 抽象可以共享公共状态，并且在 appengine 环境中会很有用。

请分享任何想法或已知实现，以及在谷歌 appengine 环境中实现此功能的理想方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T21:46:25.230

我认为您想使用此类映射实现一些缓存并降低成本。如果 ti 是真的，那么你应该寻找其他方法。

1.  您可以使用 DataStore 甚至 MemCache 来缓存基于请求参数的预处理数据。
2.  您可以尝试使用上传的静态文件作为 WAR 文件的一部分。静态文件不需要任何 CPU 时间，因此它是降低成本的最佳方式。

批处理对于 Java Web 应用程序来说并不自然。通常问题可以通过其他方式解决。

如果您需要请求之间的共同状态，那么问题就会变得更加复杂。AppEngine 架构基于按需实例的概念。因此，您无法保证哪个实例会处理您的请求。这意味着您不能共享静态数据。因此，只能使用一些持久性存储（如 DataStore/MemCache 甚至一些 FileService）来共享状态。但是在使用时要小心，因为您必须考虑每种技术的延迟。

我看到的这种架构的最后一个原因是您需要根据收到的请求实施一些工作流程。如果您需要一些工作流程，您应该查看[http://code.google.com/p/appengine-pipeline/](http://code.google.com/p/appengine-pipeline/)它允许对任务 API 进行执行流控制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T09:29:17.333

不，不是，而且 servlet 标准在任何情况下都没有为此提供任何机制。

你为什么想做这个？

# android - 从 Activity 调用后台服务

> ID：12719756
> 
> 赞同：0
> 
> 时间：2012-10-04T03:05:52.457
> 
> 标签：android, android-activity, android-service

我有一个活动和一个后台服务。我通过 Activity 中的 Intent 启动服务。即使 Activity 关闭，Service 也会无限期运行。但是这里的问题是，如果我从任务管理器中清除内存，服务就会停止并且不会再次启动，直到 Activity 再次启动。我希望服务在内存被清除一段时间后自动启动。我怎么能做到这一点？请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-18T09:35:38.177

```
AlarmManager service = (AlarmManager) getApplicationContext().getSystemService(
                Context.ALARM_SERVICE);
            Intent i = new Intent(this, BackgroundService.class);
            Calendar cal = Calendar.getInstance();
            cal.add(Calendar.SECOND, 30);
            PendingIntent pending = PendingIntent.getService(this, 0, i,
                PendingIntent.FLAG_CANCEL_CURRENT);
            service.setInexactRepeating(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(),30000, pending); 
```

此代码为 true 30000 毫秒运行 backgroundService

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T14:06:46.443

使用[AlarmManager](http://developer.android.com/reference/android/app/AlarmManager.html)安排运行您的服务。

在您的主要（根）活动中：

```
@Override
public void onStop() {
    super.onStop();
    AlarmManager service = (AlarmManager) context.getSystemService(
        Context.ALARM_SERVICE);
    Intent i = new Intent(this, MyService.class);
    Calendar cal = Calendar.getInstance();
    cal.add(Calendar.SECOND, 30);
    PendingIntent pending = PendingIntent.getService(this, 0, intent,
        PendingIntent.FLAG_CANCEL_CURRENT);
    service.set(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(),
        REPEAT_TIME, pending);
} 
```

这将在您的活动停止后 30 秒内启动服务。或者，您可以定义 BroadcastReceiver 它将检查服务是否正在运行并启动它。为此，只需创建广播`PendingIntent`。

您可以在[Android 服务教程](http://www.vogella.com/articles/AndroidServices/article.html#ownservice)中找到更多代码和示例。

# c# - 尝试发送电子邮件时“操作已超时”

> ID：12719758
> 
> 赞同：2
> 
> 时间：2012-10-04T03:06:00.713
> 
> 标签：c#, asp.net

```
protected void Button1_Click(object sender, EventArgs e)
{
    try
    {
        SmtpClient sm = new SmtpClient();
        MailMessage ms = new MailMessage();
        ms.To.Add(new MailAddress(TextBox1 .Text ));
        ms.Subject = TextBox2.Text;
        ms.Body = TextBox3.Text;
        ms.IsBodyHtml = true;
        sm.Send(ms);
    }
    catch (Exception el)
    {
        Response.Write(el.Message);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T03:11:41.867

SmtpClient 从 web.config 获取其配置，即 SMTP 服务器地址和身份验证字段（如果需要）。在 Send 行设置断点，检查 sm 对象的设置，确保 SMTP 参数正确，并且可以从测试此代码的任何位置访问服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T03:13:20.657

您需要设置连接设置（GMail 示例）：

```
SmtpClient sm = new SmtpClient("smtp.gmail.com", 587);
sm.Credentials = new System.Net.NetworkCredential("abc@gmail.com", "password");
sm.EnableSsl = true; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T03:34:57.253

当您无法连接到 SMTP 服务器时会出现此问题，因此会出现超时消息。出现这个问题有几种可能：

*   错误的 SMTP 地址
*   SMTP 被拒绝
*   SMTP 服务器离线
*   端口设置
*   SSL 配置

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T05:46:14.077

请在`web.config`文件 中输入

```
<system.net>
            <mailSettings>
          <smtp from="yourEmailId@gmail.com">
            <network host="smtp.gmail.com" port="587" userName="yourEmailId@gmail.com" password="***** " defaultCredentials="false"/>
              </smtp>
            </mailSettings>
        </system.net> 
```

# java - 我能知道调用 JNI C 方法的类的名称吗？

> ID：12719766
> 
> 赞同：16
> 
> 时间：2012-10-04T03:07:07.453
> 
> 标签：java, c, class, java-native-interface

有什么方法可以知道在 JNI C 代码中调用方法的类的名称？我可以使用以下语句获取对该类的引用：

```
jclass cls = (*env)->GetObjectClass(env,obj); 
```

但是有什么办法可以知道班级的名字吗？.

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-10-04T15:36:08.633

此代码将为您提供调用类名称：

```
jclass cls = env->GetObjectClass(obj);

// First get the class object
jmethodID mid = env->GetMethodID(cls, "getClass", "()Ljava/lang/Class;");
jobject clsObj = env->CallObjectMethod(obj, mid);

// Now get the class object's class descriptor
cls = env->GetObjectClass(clsObj);

// Find the getName() method on the class object
mid = env->GetMethodID(cls, "getName", "()Ljava/lang/String;");

// Call the getName() to get a jstring object back
jstring strObj = (jstring)env->CallObjectMethod(clsObj, mid);

// Now get the c string from the java jstring object
const char* str = env->GetStringUTFChars(strObj, NULL);

// Print the class name
printf("\nCalling class is: %s\n", str);

// Release the memory pinned char array
env->ReleaseStringUTFChars(strObj, str); 
```

请注意，我没有采取任何措施来检查错误。这只是一个描述如何完成的小代码片段。

* * *

或者，您可以这样做而不是使用`GetStringUTFChars/ReleaseStringUTFChars`：

```
// Make sure that the buffer is large enough
char str[128];
jint strlen = env->GetStringUTFLength(strObj);
env->GetStringUTFRegion(strObj, 0, strlen, str);
printf("\nCalling class is: %s\n", str); 
```

由于字符串被复制到本地缓冲区，因此无需释放。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-10-14T12:38:10.953

就我而言，我没有获得课程的对象。相反，我想根据其签名获取给定类的名称。

所以，这对我有用。我希望它可以帮助：

```
// Find the class by its JNI signature
jclass cls = env->FindClass(expectedType);

// Get the class object's class descriptor
jclass clsClazz = env->GetObjectClass(cls);

// Find the getSimpleName() method in the class object
jmethodID methodId = env->GetMethodID(clsClazz, "getSimpleName", "()Ljava/lang/String;");
jstring className = (jstring) env->CallObjectMethod(cls, methodId);

// And finally, don't forget to release the JNI objects after usage!!!!
env->DeleteLocalRef(clsClazz);
env->DeleteLocalRef(cls); 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-10-04T03:08:49.957

只需调用`getName()`，`jclass`也可以通过 JNI 调用。

# c - 使用 C 编辑字符串并单独打印每个单词的程序

> ID：12719772
> 
> 赞同：0
> 
> 时间：2012-10-04T03:07:56.010
> 
> 标签：c

当我运行我的程序时，我不断收到错误分段错误（核心转储）。

```
#include<stdio.h>
#include<stdlib.h>
    int nextword(char *str);

    int main(void)
    {
      char str[] = "Hello! Today is a beautiful day!!\t\n";
      int i = nextword(str);
       while(i != -1)
         {
          printf("%s\n",&(str[i]));
          i = nextword(NULL);
          }
      return 0;
      }

    int nextword(char *str)
    {
      // create two static variables - these stay around across calls
      static char *s;
      static int nextindex;
      int thisindex;
      // reset the static variables
      if (str != NULL)
        {
          s = str;
          thisindex = 0;
          // TODO:  advance this index past any leading spaces
          while (s[thisindex]=='\n' || s[thisindex]=='\t' || s[thisindex]==' ' )
        thisindex++;

        }
      else
        {
          // set the return value to be the nextindex
          thisindex = nextindex;
        }
      // if we aren't done with the string...
      if (thisindex != -1)
        {
          nextindex = thisindex;
          // TODO: two things
          // 1: place a '\0' after the current word
          // 2: advance nextindex to the beginning
          // of the next word
          while (s[nextindex] != ' ' && s[nextindex] != '\0')
        nextindex++;

          str[nextindex] = '\0';
          nextindex++;
        }
      return thisindex;
    } 
```

该程序的目标是将字符串 str[] 中的每个单词打印到控制台的新行。我是一个初级程序员，这是一个作业，所以我必须使用这种格式（不允许字符串库）。我只是想知道我哪里出了问题以及如何解决它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T03:21:46.500

嗯，我之前在你的另一个问题中见过这个程序...... [读取字符串中的每个单词并用 C 在不同行上打印每个单词的函数](https://stackoverflow.com/questions/12684380/function-that-reads-each-word-in-a-string-and-prints-each-word-on-different-line/12684640)

您的循环中有错误：

```
while (s[nextindex] != ' ' || s[nextindex] != '\0') 
```

使用`&&`，不使用`||`。该循环将永远不会终止，因为这两个条件中的至少一个将始终为真。

然后你必须解决你的其他问题（未能检测到字符串结尾）。这将做到：

```
if( str[nextindex] != 0 ) {
    str[nextindex] = '\0';
    nextindex++;
} else {
    nextindex = -1;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T03:15:00.173

我无法遵循您的代码逻辑，但首先，有

```
i = nextword(NULL); 
```

在你的主要循环中不会完成太多。您是不是要遍历字符串的其余部分，而不是从中删除一个单词？

# ruby-on-rails - 测试环境中未启用 Postgresql 扩展

> ID：12719774
> 
> 赞同：3
> 
> 时间：2012-10-04T03:08:17.297
> 
> 标签：ruby-on-rails, postgresql, rspec

我有一个带有名为 shape 的多边形列的 postgres 表。为了确定一个点是否在里面，我跑

```
select * from areas where shape @> point '(1,1)'; 
```

这一切都很好，并且在我的 ruby​​ on rails 应用程序中工作，但在我的 RSpec 测试中失败了。当我查看我的日志时，我发现此错误是源

```
 PGError: ERROR:  operator does not exist: character varying @> point
 HINT:  No operator matches the given name and argument type(s). You might need to add explicit type casts. 
```

使用数据库的所有其他 50 多个测试都可以工作，只有这一个可以使用。它再次在代码和控制台中工作。测试环境全部设置妥当。

我的问题： - 我怎样才能使比较对象起作用？- 为什么它只会在测试中失败？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T07:02:20.430

默认情况下，activerecord 使用 schema.rb 使测试数据库与您的开发数据库保持同步。Schema.rb 是独立于数据库的（它使用与迁移相同的结构），但另一方面是它并不倾向于支持数据库可能拥有的所有花里胡哨，尤其是像 Postgres 这样添加了很多额外内容的数据库。

您可以`config.active_record.schema_format`改为`:sql`使用数据库自​​己的工具生成一个 .sql 文件，rails 将丢失该文件而不是 schema.rb。您将失去针对不同数据库运行测试的能力，但如果您使用的是 postgres 特定扩展，那么无论如何您都处于这种情况。

另一种可能性是增强活动记录的模式转储器以了解多边形列。例如，外国人 gem 将外键支持添加到 schema.rb

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T04:14:06.773

该错误似乎表明该`shape`列被定义为 varchar。检查以确保它是一个多边形。

```
\d areas 
```

# jquery - 简化使用冗余数据的 jQuery 调用

> ID：12719777
> 
> 赞同：0
> 
> 时间：2012-10-04T03:08:51.703
> 
> 标签：jquery, function, redundancy

我有一些代码可以控制一些`div`s 但它重复了很多只是为了在不同的链接上做一点小改动

如果我单击`#Option1`然后 2-5 缩小到 0（如果它们中的任何一个是打开的）并转到 0 不透明度，反之亦然，如果你单击 2（折叠 1 和其余部分），但我想不出一个让它更通用的好方法但必须有办法

```
$('#Option1').click(function() {
      var ele = $('#Option1Div');
      ele.animate({
               opacity    : .75,
               width      : '602px'
          }, 5000, function() {
          // Animation complete.
  });
      var ele = $('#Option2Div');
      ele.animate({
               opacity    : 0.1,
               width      : '0px'
          }, 5000, function() {
          // Animation complete.
  });
      var ele = $('#Option3Div');
      ele.animate({
               opacity    : 0.1,
               width      : '0px'
          }, 5000, function() {
          // Animation complete.
  });
      var ele = $('#Option4Div');
      ele.animate({
               opacity    : 0.1,
               width      : '0px'
          }, 5000, function() {
          // Animation complete.
  });
      var ele = $('#Option5Div');
      ele.animate({
               opacity    : 0.1,
               width      : '0px'
          }, 5000, function() {
          // Animation complete.
  });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T03:13:18.803

如果你给你的选项一个 class of`options`并且你的 divs 一个 class of `option-divs`，你可以使用这样的东西：

```
$('.options').click(function() {
    var element = $('.option-divs').eq($(this).index());

    element.stop().animate({
        opacity: .75,
        width: '602px'
    }, 5000).siblings().stop().animate({
        opacity: 0.1,
        width: '0px'
    }, 5000);
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T03:13:31.167

你可以试试这个

```
 $('#Option1 , #Option2 ,#Option3 , #Option4 , #Option5').click(function() {
    var ele = $('#' + this.id + 'Div');
    ele.animate({
        opacity: .75,
        width: '602px'
    }, 5000, function() {
        // Animation complete.
    });

    $('[id^="Option"][id$="Div"]').not(ele).animate({
        opacity: 0.1,
        width: '0px'
    }, 5000, function() {
        // Animation complete.
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T04:05:45.693

从技术上讲，由于您对不透明度、宽度和最终的动画持续时间有不同的值，因此您无法完成纯粹通用的工作。

但是您可以隔离数组中所有变化的数据并应用通用代码，例如：

```
 var opacities = [0.75, 0.1, 0.1, 0.1, 0.1];
    var widths = [602, 0, 0, 0, 0];
    var durations = [500, 500, 500, 500, 500];
    var callbacksComplete = [cb1, cb2, cb3, cb4, cb5];

    $('#Option1').click(function() {

        // Assume that 3 arrays have the same size !
        for(var i = 0 ; i < opacities.length ; i++)
        {
            $('#Option' + i + 'Div').animate({
                'opacity' : opacities[i],
                'width' : widths[i]
            }, durations[i], callbacksComplete[i]);
        }
    } 
```

# ruby - 使用 EventMachine 和 Ruby 纤维等待异步调用

> ID：12719781
> 
> 赞同：7
> 
> 时间：2012-10-04T03:09:17.290
> 
> 标签：ruby, eventmachine, fibers

我在 Ruby 1.9.2 下运行这个代码片段：

```
require "eventmachine"
require "fiber"

EM.run do
  fiber = Fiber.new do
    current_fiber = Fiber.current
    EM.add_timer(2) do
      print "B"
      current_fiber.resume("D")
    end
    Fiber.yield
  end
  print "A"
  val = fiber.resume
  print "C"
  print val
  EM.stop
end 
```

我期望输出是“ABCD”，程序在“A”之后暂停两秒钟。但是，它只是立即打印出“AC”，然后在退出之前等待两秒钟。我究竟做错了什么？

（作为参考，我试图在不使用 em-synchrony 的情况下重现[本文](http://www.igvita.com/2010/03/22/untangling-evented-code-with-ruby-fibers/)中描述的 em-synchrony-style 行为。）

编辑：这里有一些关于我最终想要完成的更多细节。我正在开发一个在 Thin 上运行的 Grape API，每个路由处理程序必须在返回响应之前对数据存储、ZooKeeper、其他 HTTP 服务等进行一系列调用。

em-synchrony 真的很酷，但我一直遇到从根光纤屈服或结果显示上述情况的非同步症状的问题。rack-fiber_pool 似乎也可能有用，但我不愿意承诺使用它，因为开箱即用，它破坏了我所有的 Rack::Test 单元测试。

我将我的问题简化为上面的简单示例，因为我似乎对应如何一起使用纤维和 EventMachine 有一个基本的误解，这使我无法有效地使用更复杂的框架。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-04T03:39:13.713

你可能想要这样的东西：

```
require "eventmachine"
require "fiber"

def value
  current_fiber = Fiber.current

  EM.add_timer(2) do
    puts "B"
    current_fiber.resume("D") # Wakes the fiber
  end

  Fiber.yield # Suspends the Fiber, and returns "D" after #resume is called
end

EM.run do
  Fiber.new {
    puts "A"
    val = value
    puts "C"
    puts val

    EM.stop
  }.resume

  puts "(Async stuff happening)"
end 
```

这应该会产生以下结果：

```
A
(Async stuff happening)
B
C
D 
```

* * *

更概念性的解释：

纤维有助于解开异步代码，因为它们是要暂停和恢复的代码块，就像手动线程一样。这允许关于事情发生的顺序的巧妙技巧。一个小例子：

```
fiberA = Fiber.new {
  puts "A"
  Fiber.yield
  puts "C"
}

fiberB = Fiber.new {
  puts "B"
  Fiber.yield
  puts "D"
}

fiberA.resume # prints "A"
fiberB.resume # prints "B"
fiberA.resume # prints "C"
fiberB.resume # prints "D" 
```

因此，当`#resume`在纤程上调用时，它会恢复执行，无论是从块的开头（对于新纤程）还是从先前的`Fiber.yield`调用开始，然后执行直到`Fiber.yield`找到另一个或块结束。

重要的是要注意，在纤程中放置一系列动作是一种说明它们之间时间依赖关系的方式（`puts "C"`不能在之前运行`puts "A"`），而“并行”纤程上的动作不能指望（也不应该在意） about) 其他纤程上的操作是否已执行：我们将仅通过交换前两个`resume`调用来打印“BACD”。

所以，`rack-fiber_pool`它的魔力是这样的：它将你的应用程序接收到的每个请求都放在一个纤程中（这意味着顺序无关），然后期望你执行`Fiber.yield`IO 操作，以便服务器可以接受其他请求。然后，在 EventMachine 回调中，您传入一个包含 a 的块`current_fiber.resume`，以便在查询/请求/任何内容的答案准备好时重新激活您的光纤。

这已经是一个冗长的答案，但是如果仍然不清楚，我可以提供一个 EventMachine 示例（我知道这是一个令人毛骨悚然的概念，我很挣扎）。

* * *

**更新**：我创建了一个示例，可以帮助任何仍在为这些概念苦苦挣扎的人：[https](https://gist.github.com/renato-zannon/4698724) ://gist.github.com/renato-zannon/4698724 。我建议运行和玩它。

# javascript - Angularjs - 自定义 $resource

> ID：12719782
> 
> 赞同：9
> 
> 时间：2012-10-04T03:09:17.913
> 
> 标签：javascript, angularjs

我将 Angular`$resource`用于 REST 服务。由于我的 get 响应中的怪癖，我无法将 $resource 服务用于 CRUD 应用程序。

创建一个新的对象作品（比如卡片），类似于：

```
var newCard = new CreditCard();
newCard.name = "Mike Smith";
newCard.$save(); 
```

获取也有效：

```
var card = CreditCard().get({_id:1) 
```

但是，GET 响应不是对象`Card`本身，而是带有它的其他消息（包装对象）

```
{ message: ".....",
  response: Card //object
} 
```

因此，当我保存通过资源检索到的实例时，它会发送包装对象（在响应字段中包含修改后的 Card 对象）。这可能是正确的，但我的服务器期望 Card 对象而不是包装器。有没有办法自定义 $resource 以便它发送所需的对象。从文档中，看起来只能更改 url 参数。

```
$resource(url[, paramDefaults][, actions]); 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-09T17:41:55.940

我在 $resource 模块中的标准实现也有问题。有一段时间我只是在我自己的 $resource 文件的本地副本中进行了编辑，但我发现我仍然对他们实现 REST 资源的方式不满意。我需要比提供的更多的灵活性。

标准的[$resource](https://github.com/angular/angular.js/blob/master/src/ngResource/resource.js)模块只是 $http 的工厂包装器。如果您在 $resource 模块中简化代码，您可以相当轻松地创建自己的自定义实现。

```
var app = angular.module('app', []);

app.factory('CreditCard', ['$http', function($http) {

    function CreditCardFactory() {

        function parseMessage(message) {
            if (message.response) {
                return message.response;
            }
        }

        function CreditCard(value) {
            angular.copy(value || {}, this);
        }

        CreditCard.$get = function(id) {
            var value = this instanceof CreditCard ? this : new CreditCard();
            $http({
                method: 'GET',
                url: '/creditcards/' + id
            }).then(function(response) {
                var data = response.data;
                if (data) {
                    angular.copy(parseMessage(data), value);
                }
            });
            return value;
        };

        CreditCard.prototype.$get = function(id) {
            CreditCard.$get.call(this, id);
        };

        return CreditCard;

    }

    return CreditCardFactory;

}]); 
```

然后，在你的控制器函数中，像 $resource 一样注入 CreditCard 工厂。

```
app.controller('CreditCardCtrl', function($scope, CreditCard) {
    $scope.creditCard = CreditCard().get(3);
}); 
```

这允许您以任何您想要的方式解析 REST 操作的响应，还允许您实现您想要的任何操作。例如：我想在我的资源上使用 save 方法，在选择使用 POST（在没有可用 id 时创建新资源）或 PUT（在有效身份证件可用）。

这也将允许您实现处理[JSON CSRF Vulnerability](http://haacked.com/archive/2008/11/20/anatomy-of-a-subtle-json-vulnerability.aspx)的不同方式。angular.js 方式内置在 $http 中，但我公司的 REST API 通过将 JSON 数组包装在一个虚拟对象中来解决这个问题。我使用上面的自定义资源来解析虚拟对象。

# sql - MIN 子句的问题

> ID：12719785
> 
> 赞同：0
> 
> 时间：2012-10-04T03:09:40.277
> 
> 标签：sql, oracle10g

我无法显示每个部门最年轻的员工。

还有一个名为 的表`department`，它简单地表示部门编号和部门名称。我也尝试过 WHERE EXISTS 子句，但没有运气。

```
 SELECT emp_department_number, 
          emp_name, 
          MIN(TRUNC(((current_date - emp_dateofbirth)/(365.25)))) "age" 
     FROM employee
 GROUP BY emp_department_number, emp_name
 ORDER BY emp_department_number; 
```

我也有这个，但它会产生相同的结果..

```
 SELECT emp_department_number, emp_name, min(TRUNC(((current_date -      emp_dateofbirth)/(365.25)))) "age" from employee
 JOIN department
 ON dpt_num=emp_department_number
 WHERE EXISTS (select min(emp_dateofbirth) from employee)
 GROUP BY emp_department_number, emp_name
 order by emp_department_number;

 EMP_DEPARTMENT_NUMBER EMP_NAME                        age
 -------------- ------------------------------ ----------
 1              Ramon, Emma                           25
 1              Tin, Rina                             69
 3              Mason, John                           68
 3              Roberson, Wayne                       50
 3              Zan, Shelis                           51
 7              Hockman, Ronnie                       62
 7              Lam, Annie                            37
 7              Smith, Ramon                          60 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T09:02:47.813

由于您使用的是 Oracle，因此您可以使用它`MONTHS_BETWEEN`来计算确切的年龄。而求最小的可以跳过年龄计算`emp_dateofbirth`直接使用。

```
 SELECT emp_department_number, emp_name
      , trunc(MONTHS_BETWEEN(emp_dateofbirth, current_date)/12) as age
   from employee e
  WHERE e.emp_dateofbirth = (
        SELECT MAX(emp_dateofbirth) 
          FROM employee x
         WHERE x.emp_department_number = e.emp_department_number ) 
```

您可以阅读为“对于每个员工，如果他的出生日期等于他所在部门的最大出生日期，则返回它”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T04:03:43.613

您可以使用`ROW_NUMBER()`分析函数来执行此操作（我在部门表中添加了潜在连接以获取名称）：

```
SELECT dept_name, empl, age
FROM (
  SELECT EMP_DEPARTMENT_NUMBER AS dept,
       EMP_NAME AS empl,
       TRUNC((CURRENT_DATE - emp_dateofbirth) / 365.25) AS age,
       ROW_NUMBER() OVER (PARTITION BY EMP_DEPARTMENT_NUMBER ORDER BY emp_dateofbirth ASC) AS rn
  FROM employee
) E
JOIN department d
  ON e.dept = d.dept_id
WHERE rn = 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T03:51:46.017

如果我理解正确，您需要的是[分析`FIRST_VALUE`功能](http://docs.oracle.com/cd/B19306_01/server.102/b14200/functions057.htm)：

```
SELECT emp_department_number,
       emp_name,
       TRUNC((CURRENT_DATE - emp_dateofbirth) / 365.25) age
  FROM employee
 WHERE emp_num IN
        ( SELECT FIRST_VALUE(emp_num) OVER
                    ( PARTITION BY emp_department_number
                          ORDER BY emp_dateofbirth DESC
                    )
            FROM employee
           GROUP
              BY emp_department_number
        )
; 
```

# lisp - 处理列表和附加值的开始方案 (LISP)

> ID：12719787
> 
> 赞同：3
> 
> 时间：2012-10-04T03:09:47.617
> 
> 标签：lisp, scheme, racket

我正在尝试创建一个需要 2 个数字的函数，并将使用第一个数字作为起始数字，将第二个数字作为结束值创建一个列表，同时填写起始数字和结束数字之间的值。

例如：

用户通过 3 和 7：

输出应该是 (3 4 5 6)

我试图这样做并使用递归，但我很挣扎：

```
 (define (createlist start end)
   (if(= start end)
      '())
   (cons start '())
    (createlist (+ 1 start) end)) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T03:30:11.717

在此类问题的解决方案中发现了一种重复模式，您必须在此过程中使用递归构建一个列表。让我说明一般步骤，我会让你填空：

```
(define (createlist start end)
  (if (= <???> <???>) ; the problem is solved when start and end are the same
      '()             ; lists end in null
      (cons <???>  ; if we are not done yet, we `cons` the current value of start
            (createlist <???> end)))) ; with the result of calling the recursion
            ; notice that start is one step closer to the end, so we increment it 
```

该算法的思想是，在每一步中，我们将当前`start`值添加到正在构建的列表中`cons`，并递增`start`直到达到`end`，此时递归结束。

你应该看看[The Little Schemer](https://rads.stackoverflow.com/amzn/click/com/0262560992)或[How to Design Programs](http://www.ccs.neu.edu/home/matthias/HtDP2e/)，这两本书都会教你如何为这种列表上的递归问题构建解决方案。

**更新：**

现在您已经发布了到目前为止编写的代码，我可以向您展示正确的答案。请非常小心括号 [ an 的右括号`if`放在该`else`部分之后] 和空格 [ `if(`is not the same as `if (`]，它们在 Scheme 中很重要。同时正确缩进你的代码，它会帮助你找到很多错误：

```
(define (createlist start end)
  (if (= start end)
      '()
      (cons start
            (createlist (+ 1 start) end)))) 
```

现在您可以看到如何`<???>`正确填充。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T03:19:33.327

以下是一些建议（不试图放弃整个解决方案）：

*   使用`cons`而不是`append`

*   使用缩进显示程序的结构

*   the`if`没有 else 值——我怀疑你的意思是最后一行是它——你必须重新排列括号。此外，常见的风格不赞成使用`if(`and `list(`-- 使用`if (`and`list (`代替（注意空格）。例子：

    ```
    (define (my-function a b c)
      (if (= a 3)   ;; note the space between if and (
          b         ;; the 'then' line
          c))       ;; the 'else' line 
    ```

*   如果您正在递归，则必须`createlist`从其体内调用。你的意思是第二`list`个`createlist`？请记住，它需要 2 个参数

*   如果您不想要无限递归，请确保更改参数以使它们更接近完成。换句话说，您不想使用 and 的相同值进行`start`递归`end`。你应该改变哪一个，以什么方式？

# msbuild - MSBuild 与 Visual Studio Build 中的不同输出

> ID：12719790
> 
> 赞同：1
> 
> 时间：2012-10-04T03:10:20.953
> 
> 标签：msbuild

我有一个应用程序和一个为我的项目需求创建的自定义配置，它从 x86 复制设置。

现在，如果我从 Visual Studio 构建应用程序，它会在 Bin 目录下的“自定义配置”文件夹中生成输出。但是如果我从命令行使用 MSbuild，那么输出将在 x86/Custom Configuration 文件夹中。

我试图理解其中的区别。

实际上 msbuild 使用的是 x86 平台，而不是 Active。我应该如何改变它。

从命令行使用 MSBuild 时，我只想将配置作为参数而不是平台传递，我相信它应该自动选择与该配置关联的正确平台。根据项目属性和构建选项卡中的指定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T04:01:34.873

您可以使用msbuild 命令行上的[`/property`开关](http://msdn.microsoft.com/en-us/library/ms164311.aspx)选择自定义平台和配置：

```
msbuild /p:"Platform=MyPlatform" /p:"Configuration=CustomConfig" 
```

# php - PHP 从文本文件中删除包含字符串的行

> ID：12719792
> 
> 赞同：1
> 
> 时间：2012-10-04T03:10:45.400
> 
> 标签：php, file

我有一个看起来像这样的文件。

```
Kate
Johnny
Bill
Kermit 
```

例如，我希望能够将“Bill”放入字符串中，并从文件中删除“Bill”或变量中的任何内容，以及随后的“\r\n”。该变量将始终包含文件中已经存在的内容，如果没有 George，则不会有“George”。
此代码检查“Bill”是否在文件中。

```
$fileContents = file_get_contents("names.txt");
if(strpos($fileContents, "Bill"))
{
    //Bill is here!
} 
```

我将如何扩展以删除“Bill\r\n”？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T03:12:15.637

```
$var = "Bill";
$input = "Kate
Johnny
Bill
Kermit";

$output = str_replace($var ."\r\n", "", $input ."\r\n"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T03:21:00.270

*   您可以使用`trim`删除所有空格
*   `file`可以将所有内容读取为数组
*   您可以使用`array_map`将修剪应用于所有数组内容
*   您可以使用`in_array`检查数组的元素

例子

```
$fileContents = array_map("trim",file("hi.test"));
var_dump($fileContents); 
```

输出

```
array
  0 => string 'Kate' (length=4)
  1 => string 'Johnny' (length=6)
  2 => string 'Bill' (length=4)
  3 => string 'Kermit' (length=6) 
```

检查比尔是否在那里

```
if(in_array("Bill", $fileContents))
{
    //Bill is here 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T03:17:51.237

```
while(!feof($file)){
   $stringData = fgets($file);//read a line on every itration

if (strpos($stringData , "Bill") !== false) {
//do somting
}

} 
```

# mysql - mysql获取捕获正则表达式？

> ID：12719796
> 
> 赞同：0
> 
> 时间：2012-10-04T03:11:51.140
> 
> 标签：mysql

有没有办法我可以写类似的东西

```
select $1 from tbl where url regexp '/user/(\d+)' 
```

长期获得价值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T03:15:27.083

您需要通过 转义`\`，`\\`而 在`()`这里没有意义，因为您无法使用 mysql 正则表达式捕获子组。

```
select SUBSTRING(url, 6) from tbl where url regexp '^/user/\\d+' 
```

***编辑：***

```
select SUBSTRING(url, 6) from tbl where url regexp '^/user/[0-9]+' 
```

*（mysql 正则表达式不支持`\d`）*

# jquery - 同位素：在项目选择上淡入过滤器？

> ID：12719813
> 
> 赞同：0
> 
> 时间：2012-10-04T03:15:04.670
> 
> 标签：jquery, html, jquery-isotope

我完全不确定这将如何完成，所以我想我会在这里问。

我正在尝试将 Isotope 用于身体部位说明，但我可以在页面上使用许多过滤器选项。继承人的代码：

```
<ul id="options" class="combo-filters ">
<li class="level-1 parent-active first">
<a href="/instructions/">Body Part</a>
<div class="option-combo bodypart">
<ul class="filter option-set clearfix " data-filter-group="bodypart"> 
<li><a href="#filter-bodypart-all" data-filter-value="" class="selected">all</a></li>
<li><a href="#filter-bodypart-chest" data-filter-value=".chest">Chest</a></li>
<li><a href="#filter-bodypart-legs" data-filter-value=".legs">Legs</a></li>
<li><a href="#filter-bodypart-back" data-filter-value=".back">Back</a></li>
<li><a href="#filter-bodypart-shoulders" data-filter-value=".shoulders">Shoulders</a></li>
<li><a href="#filter-bodypart-arms" data-filter-value=".arms">Arms</a></li>
</ul>
</div>
<div class="option-combo goal">
<a href="/instructions/">Goal</a>
<ul class="filter option-set clearfix " data-filter-group="goal"> 
<li><a href="#filter-goal-all" data-filter-value="" class="selected">all</a></li>
<li><a href="#filter-goal-mass" data-filter-value=".mass">mass</a></li>
<li><a href="#filter-goal-shaping" data-filter-value=".shaping">shaping</a></li>
</ul>
</div>
<div class="option-combo focusarea">

<a href="/instructions/">Chest</a>
<ul class="filter option-set clearfix " data-filter-group="focusarea"> 
<li><a href="#filter-focusarea-all" data-filter-value="" class="selected">all</a></li>

<!-- Chest -->
<li><a href="#filter-focusarea-upper" data-filter-value=".upper">upper</a></li>
<li><a href="#filter-focusarea-middle" data-filter-value=".middle">middle</a></li>
<li><a href="#filter-focusarea-lower" data-filter-value=".lower">lower</a></li>
</ul>

<a href="/instructions/">Back</a>
<ul class="filter option-set clearfix " data-filter-group="focusarea"> 
<li><a href="#filter-focusarea-all" data-filter-value="" class="selected">all</a></li>

<!-- Back -->
<li><a href="#filter-focusarea-width" data-filter-value=".width">width</a></li>
<li><a href="#filter-focusarea-thickness" data-filter-value=".thickness">thickness</a></li>
<li><a href="#filter-focusarea-lowerback" data-filter-value=".lowerback">lower back</a></li>
</ul>

<a href="/instructions/">Shoulders</a>
<ul class="filter option-set clearfix " data-filter-group="focusarea"> 
<li><a href="#filter-focusarea-all" data-filter-value="" class="selected">all</a></li>
<!-- Shoulders -->
<li><a href="#filter-focusarea-sidedelt" data-filter-value=".sidedelt">side delt</a></li>
<li><a href="#filter-focusarea-rearposteriordelt" data-filter-value=".rearposteriordelt">rear posterior delt</a></li>
<li><a href="#filter-focusarea-traps" data-filter-value=".traps">traps</a></li>
<li><a href="#filter-focusarea-allshoulderheads" data-filter-value=".allshoulderheads">all shoulder heads</a></li>
<li><a href="#filter-focusarea-anteriorfrontdelt" data-filter-value=".anteriorfrontdelt">anterior front delt</a></li>
</ul>

<a href="/instructions/">Legs</a>
<ul class="filter option-set clearfix " data-filter-group="focusarea"> 
<li><a href="#filter-focusarea-all" data-filter-value="" class="selected">all</a></li>

<!-- Legs -->
<li><a href="#filter-focusarea-glutes" data-filter-value=".glutes">glutes</a></li>
<li><a href="#filter-focusarea-calves" data-filter-value=".calves">calves</a></li>
<li><a href="#filter-focusarea-thighs" data-filter-value=".thighs">thighs</a></li>
<li><a href="#filter-focusarea-hamstrings" data-filter-value=".hamstrings">hamstrings</a></li>
<li><a href="#filter-focusarea-quads" data-filter-value=".quads">quads</a></li>

</ul>

<a href="/instructions/">Arms</a>
<ul class="filter option-set clearfix " data-filter-group="focusarea"> 
<li><a href="#filter-focusarea-all" data-filter-value="" class="selected">all</a></li>

<!-- Arms -->
<li><a href="#filter-focusarea-biceps" data-filter-value=".biceps">biceps</a></li>
<li><a href="#filter-focusarea-triceps" data-filter-value=".triceps">triceps</a></li>
<li><a href="#filter-focusarea-forearms" data-filter-value=".forearms">forearms</a></li>

</ul>

</div>
</li>

</ul> 
```

我要做的只是显示“身体部位”和“目标”，如果选择了身体部位下的“胸部”，它将在加载“全部、上、中、降低”选项。

最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T07:07:52.013

[在此处查看插件作者文档](http://support.metafizzy.co/2012/combo-filter-checkboxes.html)中的复杂过滤，并在 Chrome 的 devtools 面板中检查它。

# c# - Azure Blob 不存储 PDF

> ID：12719818
> 
> 赞同：1
> 
> 时间：2012-10-04T03:15:36.087
> 
> 标签：c#, azure, azure-blob-storage

好的，所以我有以下代码-它非常适合存储 jpg，但不存储 pdf。知道为什么吗？

```
 public bool TryStoreImage(string uri, string fileName)
    {
        try
        {
            WebClient wc = new WebClient();
            var blob = new BlobStorage().GetCloudBlobContainer();

            var store = blob.GetBlobReference(fileName);
            store.UploadByteArray(wc.DownloadData(uri));
            return true;
        }
        catch (Exception exc)
        {
            return false;
        }
    } 
```

`

同样，我尝试访问的每个 pdf 都会给我“pdf 不存在”，即使我可以在 azure 管理屏幕中看到该 pdf。但是，我存储的每个 jpg 都可以完全访问。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T12:38:23.380

“pdf 不存在”是什么意思？是什么工具告诉你的？你是如何访问 blob 的？在不知道这一点的情况下，不可能真正弄清楚，但我推测缺少内容类型是一个问题。试试`store.Properties.ContentType = "application/pdf"`。

– smarx

# sql - 在此代码中插入或更新记录的正确 SQL 语句是什么

> ID：12719823
> 
> 赞同：0
> 
> 时间：2012-10-04T03:16:54.407
> 
> 标签：sql, ms-access, asp-classic, vbscript

我有此代码用于添加生产数据。由于现在我已经实现了库存模块，我开始在这个 SO 成员的帮助下将 qty update 功能嵌入到每个相关模块中。现在涉及到相当复杂的生产模块，因为这个函数必须选择是使用 INSERT 还是 UPDATE sql 来完成正确的工作，我已经尝试过但未能使其工作。所以你能建议我用我编辑的代码吗？非常感谢你。

以下是我编辑的失败代码：
它可以使用“UPDATE”但使用“INSERT”SQL 时失败

```
<%

    pd_id = Request.form("pd_id")

    pdtn_st_date =   Request.form("pdtn_st_date")   
    pdtn_st_note =   Request.form("pdtn_st_note")   
    pdtn_st_pdNote = Request.form("pdtn_st_pdNote")

    qty_fabric_used =   Request.form("qty_fabric_used") 
        if qty_fabric_used <> "" then
            qty_fabric_used = YardToCm(qty_fabric_used)
        else
            qty_fabric_used = 0
        end if

    unit_per_fb = Request.form("unit_per_fb")
        if unit_per_fb = "" then
            unit_per_fb = 0
        end if

    is_finished = Request.form("is_finished")       
        if is_finished <> "" then
            is_finished = True
        else
            is_finished = False
        end if      

    fb_sheet = Request.Form("fb_sheet")
        if fb_sheet = "" then
            fb_sheet = 0
        end if 
    fb_width = Request.Form("fb_width")
        if fb_width = "" then
            fb_width = 0
        end if

    edit_pdtn_startup = Request.form("edit_pdtn_startup")

    pdtn_st_qty_act_dz = Request.form("pdtn_st_qty_act")
        if pdtn_st_qty_act_dz <> "." then
            pdtn_st_qty_act = DztoPcs(pdtn_st_qty_act_dz)
        end if      

'<---------------  Update qty to Inventory table here ------->
Dim con 
Dim rsInventory 

set con=Server.CreateObject("ADODB.Connection")
con.Provider="Microsoft.Jet.OLEDB.4.0"
con.Open(Server.Mappath("../database/tkp.mdb"))

        Set rsInventory = con.Execute("SELECT * FROM tbl_inventory WHERE pd_id = '" & pd_id & "'" )             
        if rsInventory.EOF then
            con.Execute("INSERT INTO tbl_inventory (inv_qty_act, inv_date, pd_id) VALUES (inv_qty_act + " & pdtn_st_qty_act & ", date() ,'" & pd_id & "'"  )
'           con.Execute("INSERT INTO tbl_inventory ( pd_id) VALUES ( '" & pd_id & "'")
        else

            con.Execute("UPDATE tbl_inventory SET inv_qty_act = inv_qty_act + " & pdtn_st_qty_act & ", inv_date = date() WHERE pd_id = '" & pd_id & "'"  ) 
        end if          

'<---------- ---------------------------------------------------------------------------------------->

    call checkBlank(pd_id)

    if SomethingError <> "yes" then

        Call DBConnOpen()

            Set Rs = Server.CreateObject("ADODB.Recordset")
            Set Rs.ActiveConnection = Conn

            strSQL = "SELECT * FROM tbl_pdtn_startup"
            if edit_pdtn_startup = "Y" then         
                pdtn_st_id = Request.form("pdtn_st_id")
                strSQL = strSQL & " WHERE pdtn_st_id =" & pdtn_st_id & ""
                Rs.Open strSQL, Conn, 1, 3      

            pdtn_st_qty_act_dz = Request.form("pdtn_st_qty_act")
                if pdtn_st_qty_act_dz <> "." then
                    pdtn_st_qty_act = DztoPcs(pdtn_st_qty_act_dz)
                end if  

            end if

            if edit_pdtn_startup <> "Y" then    
            Rs.Open strSQL, Conn, 1, 3
            Rs.AddNew   

            end if

            Rs.Fields("pdtn_st_date") = pdtn_st_date
            Rs.Fields("pdtn_st_note") = pdtn_st_note
            Rs.Fields("pd_id") = pd_id  
            Rs.Fields("pdtn_st_pdNote") = pdtn_st_pdNote
            Rs.Fields("pdtn_st_qty_act") = pdtn_st_qty_act
            Rs.Fields("qty_fabric_used") = qty_fabric_used
            Rs.Fields("unit_per_fb") = unit_per_fb
            Rs.Fields("is_finished") = is_finished  
            Rs.Fields("fb_width") = fb_width
            Rs.fields("fb_sheet") = fb_sheet            

            Rs.Update
            Rs.Close

        if edit_pdtn_startup = "Y" then
            response.redirect "production_view.asp?pdtn_st_id=" & pdtn_st_id
        else
            strSQL = "SELECT * FROM tbl_pdtn_startup order by pdtn_st_id desc"
            Rs.Open strSQL, Conn, 1, 3
            latest_id = Rs("pdtn_st_id")
            Rs.close
            response.redirect "production_addSzCl.asp?pdtn_st_id=" & latest_id
        end if

        Call DBConnClose()
    else
        call writeInputError
    end if

session("pdtn_st_id") = pdtn_st_id 
%> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T05:10:04.440

值列表中缺少右括号。这可能是一个问题。inv_qty_act 也不应该在值列表中。

```
con.Execute("INSERT INTO tbl_inventory (inv_qty_act, inv_date, pd_id) VALUES (inv_qty_act + " & pdtn_st_qty_act & ", date() ,'" & pd_id & "'"  ) 
```

应更正如下

```
con.Execute("INSERT INTO tbl_inventory (inv_qty_act, inv_date, pd_id) VALUES (" & pdtn_st_qty_act & ", date() ,'" & pd_id & "')" ) 
```

# php - mysqli::real_connect 和新的 mysqli 对象在连接数据库中有什么区别？

> ID：12719826
> 
> 赞同：6
> 
> 时间：2012-10-04T03:17:30.670
> 
> 标签：php, mysqli

我正在使用这种方法连接到`mysql`db ：

```
$this->_Con = new mysqli($this->_DB['Server'],$this->_DB['User'],$this->_DB['Pass'],$this->_DB['DB']); 
```

使用此方法连接时有什么区别：

```
$this->_Con = mysqli_init();
$this->_Con->real_connect($this->_DB['Server'],$this->_DB['User'],$this->_DB['Pass'],$this->_DB['DB']); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-04T03:27:53.073

它只是连接到数据库的另一种方式。如果您使用[`mysqli_init()`](http://www.php.net/manual/en/mysqli.init.php)它将`mysqli`首先初始化对象。然后使用您将调用的对象[`real_connect()`](http://php.net/manual/en/mysqli.real-connect.php)连接到数据库。但是当您使用时，您通过将连接值作为参数传递[`new mysqli()`](http://www.php.net/manual/en/class.mysqli.php)来初始化`mysqli`对象，因此它同时进行初始化和连接。

**注意：调用不带参数的构造函数与调用 mysqli_init() 相同。**

在您的第一种情况下，您将连接对象作为返回值，因为您正在`mysqli()`使用参数调用构造函数。因此，您可以对其运行查询。但是在第二种情况下，您需要像这样存储连接，

```
$con = $this->_Con->real_connect($this->_DB['Server'],$this->_DB['User'],$this->_DB['Pass'],$this->_DB['DB']); 
```

然后运行查询`$con`

# mysql - 使用 concat 并保持变量的长度

> ID：12719829
> 
> 赞同：1
> 
> 时间：2012-10-04T03:18:02.120
> 
> 标签：mysql, concat, variable-length

我正在尝试在某些变量上使用 concat 。这些变量已被声明为字符：

```
declare v_order_date char(10);
declare v_quantity char(11);
declare v_plant char(100); 
```

我有一个光标，我将这些设置为一些输出。要调用结果，我将 v_msg 设置为

```
set v_msg := concat( v_msg, '\n', v_order_date, v_quantity, v_plant); 
```

但是，当我选择 v_msg 时得到的结果是：

```
2012-01-222501008 Creeping Buttercup 
```

但我想在我的选择中保持声明变量的长度，如下所示

```
2012-01-22  250    1008    Creeping Buttercup 
```

有什么建议吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T03:35:58.953

使用 MySQL`repeat()`和`char_length()`

```
set v_msg := concat(v_msg, '\n', v_order_date, repeat(' ', 10-char_length(v_order_date)), '\n',  v_quantity, repeat(' ', 11-char_length(v_quantity)), '\n' , v_plant); 
```

# php - PHP SQL 插入错误

> ID：12719831
> 
> 赞同：1
> 
> 时间：2012-10-04T03:18:06.107
> 
> 标签：php, sql, database

插入数据库时​​出现错误。

代码：

```
dbquery("INSERT INTO site_news_comments (articleid,title,short,comment,timestamp,userid,main,type,topstory) VALUES ($article,'".clean($commentss['title'])."','','".mysql_real_escape_string($_POST['comment'])."',current_timestamp,'".USER_ID."','0','".$commentss['type']."','')"); 
```

忽略 dbquery，与 mysql_query 完全相同。

我收到的错误是：

```
 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ''title','short',' 
```

不知道为什么会抛出这个错误！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T03:22:22.670

**编辑**
我第一次读得太快了；该错误似乎不在列列表中，它看起来像在值列表中。查询可能出现语法错误的唯一地方是 if`$article`为空（或未清理的数据，例如非数字）。尝试在查询中添加引号和/或验证它至少具有默认值：

```
$article = (empty($article) || !is_numeric($article)) ? 0 : $article;
dbquery("... VALUES ('".$article."', '".clean($commentss['title'])."', '', '".mysql_real_escape_string($_POST['comment'])."', current_timestamp, '".USER_ID."', '0', '".$commentss['type']."', '')"); 
```

**原始答案**

MySQL 使用了一个列表[`reserved words`](http://dev.mysql.com/doc/refman/5.0/en/reserved-words.html)，如果将它们用于列名，则必须使用反引号将它们转义。

尝试更新所有这些以修复：

```
dbquery("INSERT INTO site_news_comments (`articleid`, `title`, `short`, `comment`, `timestamp`, `userid`, `main`, `type`, `topstory`) VALUES ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T03:29:08.690

教人如何钓鱼。

如果查询失败，您应该做的第一件事是回显您将要发送的查询：

```
$sql = "INSERT INTO site_news_comments (articleid,title,short,comment,timestamp,userid,main,type,topstory) VALUES ($article,'".clean($commentss['title'])."','','".mysql_real_escape_string($_POST['comment'])."',current_timestamp,'".USER_ID."','0','".$commentss['type']."','')";

echo $sql; 
```

最终查询出了什么问题通常很明显。特别注意查询中的动态内容，通常围绕 MySQL 抱怨的区域。

如果这看起来还可以，那么您寻找可能需要转义的单词，例如[reserved words](http://dev.mysql.com/doc/refman/5.0/en/reserved-words.html)。

**结论**

在查看了代码 mysql 之后，我不得不得出结论，问题出在哪里`$article`，它会导致您的查询出现问题。您可能也应该逃避它，以防万一:)

**推荐**

您应该了解 PDO / mysqli 并使用准备好的语句：

```
// PDO example
$stmt = $db->prepare('INSERT INTO site_news_comments (articleid, title, short, comment, timestamp, userid, main, type, topstory) VALUES (:article, :title, :short, :comment, CURRENT_TIMESTAMP, :user, :main, :type, :topstory)');
$stmt->execute(array(
    ':article' => $article,
    ':title' => $commentss['title'],
    ':short' => '',
    ':comment' => $_POST['comment'],
    ':user' => USER_ID,
    ':main' => 0,
    ':type' => $commentss['type'],
    ':topstory' => '',
)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T03:41:10.307

谢谢你们的帮助！但是我解决了这个问题！

问题的原因似乎是“URL”。网址是

新闻/1/&page=2

所以当我插入 $article 时，它​​是 '1/'，这是因为它认为 ID 是 1/ ，而不是 1 因为 URL。

所以我刚刚将其更改为

新闻/1&page=2

谢谢！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T03:59:05.860

```
//change this line :
dbquery("INSERT INTO site_news_comments (articleid,title,short,comment,timestamp,userid,main,type,topstory) VALUES ($article,'".clean($commentss['title'])."','','".mysql_real_escape_string($_POST['comment'])."',current_timestamp,'".USER_ID."','0','".$commentss['type']."','')");

//to this : (surround $articleid with single quote)
dbquery("INSERT INTO site_news_comments (articleid,title,short,comment,timestamp,userid,main,type,topstory) VALUES ('".$article."','".clean($commentss['title'])."','','".mysql_real_escape_string($_POST['comment'])."',current_timestamp,'".USER_ID."','0','".$commentss['type']."','')"); 
```

# php - PHP MySQL 语法错误“您的 SQL 语法有错误”

> ID：12719832
> 
> 赞同：-1
> 
> 时间：2012-10-04T03:18:14.827
> 
> 标签：php, mysql, sql, mysql-error-1064

我无法在这里找出我的代码的问题。我试图从表中获取信息，然后从 Current_Time 中减去 1 秒，看起来像“2:00”。问题是，我得到：

“您的 SQL 语法有错误；请查看与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 'Current_Time) VALUES('22')' 附近使用正确的语法”

我什至不明白它从哪里得到 22。

谢谢，我真的很感激。

```
<?php

$connection = mysql_connect('localhost', 'aleckaza_admin', 'pswd');
if (!$connection) {
    die('Could not connect: ' . mysql_error());
}

if (isset($_GET['id']) && isset($_GET['time'])) {
    mysql_select_db("aleckaza_pennyauction", $connection);
    $query = "SELECT Current_Time FROM Live_Auctions WHERE ID='1'";
    $results = mysql_query($query) or die(mysql_error());

    while ($row = mysql_fetch_array($results)) {
        $newTime = $row['Current_Time'] - 1;
        $query = "INSERT INTO Live_Auctions(Current_Time) VALUES('".$newTime."')";
        $results = mysql_query($query) or die(mysql_error());
    }
}

if (isset($_GET['getTime'])) {
    mysql_select_db("aleckaza_pennyauction", $connection);
    $query = "SELECT `Current_Time` FROM Live_Auctions WHERE ID='".$_GET['getTime']."'";
    $results = mysql_query($query) or die(mysql_error());
}

function beginGetAllInfo() {
    GLOBAL $connection;
    mysql_select_db("aleckaza_pennyauction", $connection);
    $query = "SELECT * FROM Live_Auctions";
    $results = mysql_query($query) or die(mysql_error());

    while ($row = mysql_fetch_array($results)) {
        if (!isset($_GET['getTime'])) {
        echo "
        <table width=200px height=360px cellspacing=0 cellpadding=1 style='border-color: #000; border-style: solid; border-width: 1px;'>
            <tr>
                <td colspan=2 style='font-size: 14px; color: #2700EB; font-family: Arial,Helvetica,sans-serif;'><center><strong>".$row['Product_Name']."</font></strong></center></td>
            </tr>
            <tr>
                <td colspan=2><center><img width=70% src='".$row['Image_URL']."'></center></td>
            </tr>
            <tr>
                <td id='txtHint' colspan=2 bgcolor=#000 height=90px><center><font color=#fff size=5px>$".$row['Current_Price']."</font><br /><font color=#fff size=3px>Timer set @ ".$row['Current_Timer']."sec</font><br /><font color=#fff size=5px>".$row['Current_Time']."</font><br /></center></td>
            </tr>
        </table>";
        } else {

        }
    }
}

?>

<html>
    <head>
        <title>Auction</title>
        <script type="text/javascript">
function getTime()
{
if (str=="")
  {
  document.getElementById("txtHint").innerHTML="";
  return;
  } 
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("txtHint").innerHTML=xmlhttp.responseText;
    }
  }
xmlhttp.open("GET","auction.php?getTime=1",true);
xmlhttp.send();
}

while (1) {
    getTime();
}
</script>
    </head>
    <body>
        <?php beginGetAllInfo(); ?>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T03:20:27.397

Current_Time 是 MySQL 中的一个关键字，尝试将 ` 放在它周围（顺便说一句，这不是单引号，它是一个反引号 [thx maiorano84] - 在 TAB 键上方）

```
$query = "SELECT `Current_Time` FROM Live_Auctions WHERE ID='1'"; 
```

和

```
$query = "INSERT INTO Live_Auctions(`Current_Time`) VALUES('".$newTime."')"; 
```

编辑：

我会将您的 SELECT 语句更改为：

```
$query = "SELECT DATE_ADD(`Current_Time`, INTERVAL '-1' MINUTE) FROM Live_Auctions WHERE ID='1'"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T03:45:31.640

```
//Current_Time is a reserve function in sql

//change this line from this :
$query = "INSERT INTO Live_Auctions(Current_Time) VALUES('".$newTime."')";

//to this :
//surround the Current_Time with backtick (not single quote)
$query = "INSERT INTO Live_Auctions(`Current_Time`) VALUES('".$newTime."')"; 
```

# javascript - 如何在会话中存储 JavaScript 变量 - 使用 scriptlet

> ID：12719838
> 
> 赞同：1
> 
> 时间：2012-10-04T03:19:07.063
> 
> 标签：javascript, html, jsp

我刚来这地方。我正在尝试通过使用隐藏字段并提交表单将 JavaScript 变量存储在会话中：

```
function populateInput()
{
    rowClicked = true;
    var key = document.getElementById("key").innerText;
    var value = document.getElementById("value").innerText;

    document.getElementById("key2").value = key;
    document.getElementById("value2").value = value;

    var form = document.getElementById("output");
    form.submit();
} 
```

这将被调用：

```
<html>
     <tr id="row" onclick="populateInput()"
</html> 
```

对象是从一行中取值，一行包含两列，一个键和一个值（存储在一个HashMap中），传给另一个jsp，这样就可以在两个文本框中显示（一个用于键和一个一个值）通过单击另一个jsp上的一行。

我遇到的麻烦是在scriptlet 中设置属性。我正在获取 td 元素的 innerText，并将其分配给 JavaScript 中的变量，然后将其传递给 HTML DOM 对象的值。

然后我想使用 scriptlet (<%request.setAttribute%>) 将它提交到另一个表单，但是如何？我意识到通过使用 scriptlet，您使用的是 Java 代码，它不是 HTML 属性。

任何帮助将不胜感激。

这是整个表格：

```
<%if (m != null){%>
    <%for (Map.Entry<String, String> e : m.entrySet()){ %>
<tr id="row" onclick="populateInput()">
<td id="key"><%=e.getKey() %></td>
<td id="value"><%=e.getValue() %></td>
</tr>
<%} %>
<%} %> 
```

我想获取 td 元素的 innerText，将它们存储到 vars、key 和 value 中，然后将这些 vars 存储到以下值中：

```
<input type="hidden" id="key2">
<input type="hidden" id="value2"> 
```

我遇到的麻烦是在 scriptlet 中使用 request.setAttribute("", obj) 设置隐藏字段的值，并将它们提交到其他表单。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T03:32:08.500

您不能使用 JavaScript 设置会话，原因如 Matt Ball 的评论中所述。

你可以

1.  使用方法`AJAX`并发送所需的数据`POST/GET`，然后将其设置为会话。
2.  或者您可以使用`cookie`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T03:44:40.717

您不能直接从 javascript 存储会话变量，因为您只能在服务器端设置会话的值。所以您需要一些 AJAX 来从 javascript 与服务器通信，然后操作会话值。

# delphi - 我应该在 OnIdle 处理程序或计时器中进行定期检查吗？

> ID：12719843
> 
> 赞同：5
> 
> 时间：2012-10-04T03:20:38.720
> 
> 标签：delphi

我想在一段时间不活动后将用户从我的应用程序中注销。

将我的不活动检查放在应用程序的 OnIdle 处理程序或计时器处理程序中会更好吗？

粒度不是太重要。注销可能会增加/减少几秒钟，甚至可能是一分钟。

我感觉应用程序的 OnIdle 会频繁触发。有什么建议吗？代码本身只有几行。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-04T06:10:28.020

您正在使用 GetLastInputInfo 来测量空闲时间。这似乎非常明智。所以问题归结为

> 我应该在 OnIdle 处理程序或计时器中进行定期检查吗？

每次清空消息队列时都会触发 OnIdle。如果队列中没有任何消息，OnIdle 将永远不会触发。所以，OnIdle 不是周期性的。如果您想定期检查不活动状态，那么 OnIdle 可能不起作用。计时器肯定会工作。

你可以这样想：OnIdle 事件在空闲计数器*启动*时触发，但您需要在空闲计数器*过期*时触发一个事件。

> 我感觉应用程序的 OnIdle 会频繁触发。

其实你的问题正好相反！

* * *

请注意，您可以对此进行试验并发现 OnIdle 似乎可以正常工作，并且会定期触发。例如，如果您的应用程序使用任何计时器，则 OnIdle 将在每个计时器事件之后触发。因为计时器事件进入队列，一旦处理完毕，就会触发 OnIdle。但是，如果您的应用程序没有计时器，那么如果您停止与程序交互，您可以期望 OnIdle 根本不会触发。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-04T05:36:51.160

我个人使用以下内容。

GetLastInputInfo 来自 Windows，并给出一个结果，说明多久没有键盘或鼠标活动..

TimerLogoffTimer 是设置为每 5 秒触发一次的定时器

TimeoutValue 是我从配置中读取的值

DoLogoff 是执行关闭表单等实际工作的程序。

```
function SecondsIdle: DWord;
var
  liInfo: TLastInputInfo;
begin
  liInfo.cbSize := SizeOf(TLastInputInfo) ;
  GetLastInputInfo(liInfo) ;
  Result := (GetTickCount - liInfo.dwTime) DIV 1000;
end;

procedure TfrmMain.TimerLogoffTimer(Sender: TObject);
begin
  if SecondsIdle >= DWord(TimeoutValue) then
    DoLogoff;
end; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-04T21:49:49.337

前几天在 Embarcadero 论坛上讨论了 OnIdle 与 TTimer 的问题：

[事件处理问题](https://forums.embarcadero.com/thread.jspa?threadID=77655)

特别是，[我在那次讨论中的回复](https://forums.embarcadero.com/thread.jspa?threadID=77655#498456)解释了`TApplication.OnIdle`事件的实际工作方式，以及设置`Done`参数的实际含义：

> > 我知道 OnIdle 仅在应用程序开始空闲时被调用一次。
> 
> 每次应用程序进入新的空闲状态时都会调用它。每次主消息循环从主消息队列中检索消息并且还没有消息时，都会触发 OnIdle 事件并且主线程进入睡眠状态，直到有新消息到达队列。一旦消息被处理并且队列再次变空，OnIdle 事件被再次触发并且主线程休眠直到有新消息到达，等等。
> 
> > 如果我使用它，我的检查程序只会被调用一次，然后系统将继续等待用户输入而不再次检查。
> 
> 在 OnIdle 事件处理程序中，您可以将 Done 参数设置为 False 以防止主线程在没有要处理的消息时进入其睡眠状态。这将允许 OnIdle 事件在队列中没有新消息时继续被触发。但是，这会产生禁用 TAction.OnUpdate 事件的副作用。
> 
> > 我想要做的是更新计时器的显示。
> 
> 然后，您应该使用真正的计时器广告在每次计时器结束时更新 UI。
> 
> > 随着剩余时间的变化，它需要不断地重新绘制自己。也许还有另一种更简单/更好的简单方法可以做到这一点。
> 
> 查看 TTimer 组件及其 OnTimer 事件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-04T04:04:54.003

为什么不让 Windows 为您执行此操作？

当用户想要重新开始工作时，有一些策略会自动启动屏幕保护程序并强制登录。

从 Windows 7 开始，您无法使用咖啡因或其他键盘模拟器等工具来解决它们。

这使得它比您在 Delphi 应用程序中可以做的任何事情都要严格得多。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-04T06:29:17.883

TTimer 使用 Windows 内部资源，这在当今千兆赫和千兆字节的世界中可能没什么大不了的，但仍然不是很好。

我会尝试使用 OnIdle 或 MainForm.Action - [http://docwiki.embarcadero.com/Libraries/en/System.Classes.TBasicAction.OnUpdate](http://docwiki.embarcadero.com/Libraries/en/System.Classes.TBasicAction.OnUpdate)

这两种方法可能都需要稍微降低 - [http://docwiki.embarcadero.com/Libraries/en/Vcl.Forms.TApplication.ActionUpdateDelay](http://docwiki.embarcadero.com/Libraries/en/Vcl.Forms.TApplication.ActionUpdateDelay)

请注意关于 TApplication.OnIdle 的那些行 - 这可能是在每个循环之后将 stup no-op 消息发布到应用程序的自链接事件：

> 除非 Done 参数设置为 false，否则不会连续调用它。将 Done 设置为 false 的应用程序会消耗过多的 CPU 时间，这会影响整体系统性能。

# mixins - TypeScript 中的 Mixin

> ID：12719844
> 
> 赞同：7
> 
> 时间：2012-10-04T03:20:41.673
> 
> 标签：mixins, typescript

我正在玩 TypeScript，我有几个[功能性 mixins](http://javascriptweblog.wordpress.com/2011/05/31/a-fresh-look-at-javascript-mixins/)，`Eventable`并且`Settable`，我想将它们混合到一个`Model`类中（假设它类似于 Backbone.js 模型）：

```
function asSettable() {
  this.get = function(key: string) {
    return this[key];
  };
  this.set = function(key: string, value) {
    this[key] = value;
    return this;
  };
}

function asEventable() {
  this.on = function(name: string, callback) {
    this._events = this._events || {};
    this._events[name] = callback;
  };
  this.trigger = function(name: string) {
    this._events[name].call(this);
  }
}

class Model {
  constructor (properties = {}) {
  };
}

asSettable.call(Model.prototype);
asEventable.call(Model.prototype); 
```

上面的代码工作正常，但如果我尝试使用其中一种混合方法（如`(new Model()).set('foo', 'bar')`.

我可以解决这个问题

1.  `interface`为 mixins添加声明
2.  declaring dummy ///`get`声明中`set`的方法`on``trigger``Model`

虚拟声明是否有干净的方法？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-04T05:46:17.057

`interfaces`这是使用和方法处理mixins的一种`static create()`方法。接口支持多重继承，这样你就不必`interfaces`为你的 mixins 重新定义，并且该`static create()`方法会负责给你一个`Model()`as an的实例`IModel`（`<any>`需要强制转换来抑制编译器警告。）你需要复制所有您`Model`对which的成员定义`IModel`很糟糕，但这似乎是在当前版本的 TypeScript 中实现您想要的最简洁的方法。

**编辑：我已经确定了一种稍微简单的方法来支持 mixins，甚至创建了一个帮助类来定义它们。可以[在这里](http://typescript.codeplex.com/discussions/398391)找到详细信息。**

```
function asSettable() {
  this.get = function(key: string) {
    return this[key];
  };
  this.set = function(key: string, value) {
    this[key] = value;
    return this;
  };
}

function asEventable() {
  this.on = function(name: string, callback) {
    this._events = this._events || {};
    this._events[name] = callback;
  };
  this.trigger = function(name: string) {
    this._events[name].call(this);
  }
}

class Model {
  constructor (properties = {}) {
  };

  static create(): IModel {
      return <any>new Model();
  }
}

asSettable.call(Model.prototype);
asEventable.call(Model.prototype);

interface ISettable {
    get(key: string);
    set(key: string, value);
}

interface IEvents {
    on(name: string, callback);
    trigger(name: string);
}

interface IModel extends ISettable, IEvents {
}

var x = Model.create();
x.set('foo', 'bar'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-04T06:04:51.063

尽管仍然需要双重类型声明，但最简洁的方法是将 mixin 定义为模块：

```
module Mixin {
    export function on(test) {
        alert(test);
    }
};

class TestMixin implements Mixin {
    on: (test) => void;
};

var mixed = _.extend(new TestMixin(), Mixin); // Or manually copy properties
mixed.on("hi"); 
```

使用接口的另一种方法是使用类来破解它（尽管由于多重继承，您需要为 mixins 创建一个公共接口）：

```
var _:any;
var __mixes_in = _.extend; // Lookup underscore.js' extend-metod. Simply copies properties from a to b

class asSettable {
    getx(key:string) { // renamed because of token-clash in asEventAndSettable
        return this[key];
    }
    setx(key:string, value) {
        this[key] = value;
        return this;
    }
}

class asEventable {
    _events: any;
    on(name:string, callback) {
        this._events = this._events || {};
        this._events[name] = callback;
    }
    trigger(name:string) {
        this._events[name].call(this);
  }
}

class asEventAndSettable {
   // Substitute these for real type definitions
   on:any;
   trigger:any;
   getx: any;
   setx: any;
}

class Model extends asEventAndSettable {
    /// ...
}

var m = __mixes_in(new Model(), asEventable, asSettable);

// m now has all methods mixed in. 
```

正如我对 Steven 的回答所评论的那样，mixins 确实应该是一个 TypeScript 功能。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-05-22T09:56:24.067

几年前在 Typescript 中构建了一种新方法，称为“mixin 类”。文档中没有很好地涵盖它，但是他们确实有[一个很好的注释示例](https://www.typescriptlang.org/play/index.html?e=103#example/mixins)来很好地描述该模式。应用于您的情况，它可能看起来像：

```
type Constructor = new (...args: any[]) => {}

function Settable<TBase extends Constructor>(Base: TBase) {
  return class extends Base {
    _props: Record<string, any> = {};

    get(key: string) {
      return this._props[key];
    }

    set(key: string, value: any) {
      this._props[key] = value;
      return this;
    }
  }
}

function Eventable<TBase extends Constructor>(Base: TBase) {
  return class extends Base {
    _events: Record<string, () => void> = {};

    on(name: string, callback: () => void) {
      this._events[name] = callback;
    }

    trigger(name: string) {
      this._events[name].call(this);
    }
  }
}

class Model extends Settable(Eventable(Object)) {
  constructor(properties = {}) {
    super();
  }
} 
```

这可以让您获得您想要的打字，例如，您可以在`(new Model()).set('boo', 'bar')`完全打字支持的情况下进行通话。没有虚拟声明。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-22T23:34:56.203

一种解决方案是不使用 typescript 类系统，而只使用类型和接口的系统，以及关键字“new”。

```
 //the function that create class
function Class(construct : Function, proto : Object, ...mixins : Function[]) : Function {
        //...
        return function(){};
}

module Test { 

     //the type of A
    export interface IA {
        a(str1 : string) : void;
    }

    //the class A 
    //<new () => IA>  === cast to an anonyme function constructor that create an object of type IA, 
    // the signature of the constructor is placed here, but refactoring should not work
    //Class(<IA> { === cast an anonyme object with the signature of IA (for refactoring, but the rename IDE method not work )
    export var A = <new () => IA> Class(

        //the constructor with the same signature that the cast just above
        function() { } ,

        <IA> {
            //!! the IDE does not check that the object implement all members of the interface, but create an error if an membre is not in the interface
            a : function(str : string){}
        }
    );

    //the type of B
    export interface IB {
        b() : void;
    }
    //the implementation of IB
    export class B implements IB { 
        b() { }
    }

    //the type of C
    export interface IC extends IA, IB{
        c() : void;
        mystring: string;
    }

     //the implementation of IC
    export var C = <new (mystring : string) => IC> Class(

        //public key word not work
        function(mystring : string) { 

            //problem with 'this', doesn't reference an object of type IC, why??
            //but google compiler replace self by this !!
            var self = (<IC> this);
            self.mystring = mystring;
        } ,

        <IC> {

            c : function (){},

            //override a , and call the inherited method
            a: function (str: string) {

                (<IA> A.prototype).a.call(null, 5);//problem with call and apply, signature of call and apply are static, but should be dynamic

                //so, the 'Class' function must create an method for that
                (<IA> this.$super(A)).a('');
            }

        },
        //mixins
        A, B
    );

}

var c = new Test.C('');
c.a('');
c.b();
c.c();
c.d();//ok error ! 
```

# duplicates - D3.js 重复值

> ID：12719845
> 
> 赞同：1
> 
> 时间：2012-10-04T03:20:52.123
> 
> 标签：duplicates, d3.js

我有一个包含音乐相关数据（元数据）的 CSV 文件。数据结构如下所示：流派、艺术家、曲目

Genre是第一类，Artist是第二类，意思是一个流派有很多艺术家，所以一个艺术家可能有很多歌曲。

这是我的代码：

```
var dataset = d3.csv("musictrackstiny.csv", function(musicdata){    

var genre=d3.nest()
  .key(function(d) {return d.genre;})
  .sortKeys(d3.ascending)    
.entries(musicdata);

var g=svg.selectAll("g").data(musicdata).enter()
    .append("g")
    .attr("transform",function(d,i) {return "translate("+(120*i)+",0)";});

 g.append("rect")
    .attr("x",cmargin)
    .attr("y",cmargin)
    .attr("width",cwidth-2*cmargin)
    .attr("height",cheight-2*cmargin)
      .append("title")
      .text(function(d) {return d.genre;})

  g.append("text")
    .attr("y",cheight+10)
    .attr("x",cmargin)
    .text(function(d) {return d.genre;}) 
```

`genre`问题是即使我正在使用该`keys`功能，我也会在显示中看到许多重复条目。

我的最终目标是拥有一个以流派作为第一个节点然后`Artists`作为其子节点的树/图。当前使用矩形的显示是为了测试该概念是否有效。请注意，将有许多与歌曲相关的流派和艺术家。我希望有这样的树结构：

[http://mbostock.github.com/d3/talk/20111018/tree.html](http://mbostock.github.com/d3/talk/20111018/tree.html)

# apl - Dyalog APL - 解析字符串向量并将字符串附加到每个向量。

> ID：12719852
> 
> 赞同：1
> 
> 时间：2012-10-04T03:21:35.593
> 
> 标签：apl

我有一个由 给出的输入数据向量，`A <-- Files.Dir '...directory'`它返回该目录中所有文件的向量。

但是，路径仅包含文件名，而不包含完整路径。我想要做的是将存储的路径附加`B`到`A`.

我到底该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T12:22:48.327

您可以将连接原始函数 (dyadic ,) 与每个原始运算符 (dyadic ¨) 一起使用。一个示例如下所示：

```
 a
 file00  file01  file02  file03
      b
C:\Path\To\Files
        (⊂b,'\'),¨a
 C:\Path\To\Files\file00  C:\Path\To\Files\file01  C:\Path\To\Files\file02  C:\Path\To\Files\file03 
```

假设一个windows文件系统。

请注意，catenate 要求它的两个参数具有相同的形状，或者是标量。这就是为什么我们必须包含 (⊂) 字符向量 b 以使其成为包含字符向量的标量。

另请注意，为了完整起见，我使用 catenate 添加尾部反斜杠

```
⊂b,'\' 
```

括号的出现只是为了确保它首先运行，因为 APL 总是从右到左评估，括号除外。

# scala - 子项的惯用 Play Framework URL 设计

> ID：12719857
> 
> 赞同：2
> 
> 时间：2012-10-04T03:22:51.790
> 
> 标签：scala, url, playframework, playframework-2.0

关于 URL 设计的新手 Play 框架问题：我正在寻找更适合 Play 框架的习惯，尽管我认为这在某些方面可能是一个更一般的 URL 设计问题。

这些不是我的真实实体，但假设您有可以编辑的集合，例如：

```
GET /collections/:id controllers.Collections.edit(id: Long)
POST /collections/:id controllers.Collections.update(id: Long)
POST /collections/:id/delete controllers.Collections.delete(id: Long) 
```

现在每个集合都可以有项目。这些项目在数据库中具有自己的 ID，但它们也具有带有外键约束的父集合的 ID。

所以我可以看到有这些：

```
GET /collections/:collection/items controllers.Items.list(collection: Long)
GET /collections/:collection/items/new controllers.Items.create(collection: Long)
POST /collections/:collection/items controllers.Items.save(collection: Long) 
```

但是随后要编辑或删除已经存在的单个项目，因此我可以仅使用项目 ID 获取项目的集合 ID，我想要这个：

```
GET /items/:id controllers.Items.edit(id: Long)
POST /items/:id controllers.Items.update(id: Long)
POST /items/:id/delete controllers.Items.delete(id: Long) 
```

还是我想做这样的事情？：

```
GET /collections/:collection/items/:id controllers.Items.edit(collection:Long, id: Long)
POST /collections/:collection/items/:id controllers.Items.update(collection:Long, id: Long)
POST /collections/:collection/items/:id/delete controllers.Items.delete(collection:Long, id: Long) 
```

我想到的一个想法是如果我使用复合键（无论好坏）。我是否应该使用第二组来将接口与我只需要具有当前架构的项目 ID 的事实隔离开来？或者第二套完全是假的和浪费的？从理论上讲，它允许现有项目的 URL 具有错误的集合 ID（您可以检查，但仍然如此）。

（注意我会在上面使用更多的 RESTful PUT/DELETE，但我现在使用的是普通的 HTML 表单）

（对不起，如果这是一个常见问题解答，我真的找不到这样的东西）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T10:06:54.133

在 Play 2.0 中没有内置的自动控制器/动作路由（就像在 Play 1.x 中一样），所以*事实上*没有定义的路由模式。

这意味着，你可以做你自己的模式，只有你必须确保路由是有效的。有一些我的想法和做法：

您不应该使用 ie 冗余前缀，例如`/collections/`or `/items/`：

```
http://domain.tld/presentation/collections/1/items/1 
```

导致如果用户将删除地址栏中的最后一段，它将指向无处

```
http://domain.tld/presentation/collections/1/items (404 as no such route) 
```

而是尝试构建准备好提供合理内容的 URL，即使用户会修改它：

```
http://domain.tld/presentation/1/1 (display single item 1 in collection 1)
http://domain.tld/presentation/1   (list of items in collection 1)
http://domain.tld/presentation     (list of collections)
http://domain.tld/                 (main page) 
```

当然，在这种情况下，最好创建字符串键来识别数据库中的记录以使链接用户友好：

```
http://domain.tld/t-shirts/autumn-2012/play-geeks-shirt-red-xl
http://domain.tld/tasks/project-1/prepare-correct-routes 
```

当然，如果您不信任字符串标识符，您可以像 Stack Overflow 那样建立链接，其中倒数第二段是数字 ID，最后一段只是搜索引擎和人类的字符串，对搜索记录没有任何意义（打开那个链接`http://stackoverflow.com/questions/12719857`，它也会给你带来当前的问题）

我个人更喜欢在前端没有附加数字 ID 的字符串标识符，但是它需要检查它在所选路径中是否唯一并将附加数据存储在 DB 中。

对于后端，我建议在开头使用稳定的前缀和单独的控制器（为整个控制器设置一个授权规则比注释许多操作更容易）。当然，使用字符串标识符来编辑记录是多余的工作：

```
http://domain.tld/admin/1         (list of items from first collection)
http://domain.tld/admin/1/edit    (edit form for first collection)
http://domain.tld/admin/1/1       (edit form for item 1 in first collection \), 
       it hasn't got subitems so there's no need to display its preview first

http://domain.tld/admin/1/1/edit  (alternative, same action as above)
       in this case you should prepare redirect from admin/1/1 to admin/1/1/edit,
       otherwise you'll get same form available on two URL's (for each record) 
       which can be confusing 
```

`delete`, `save`,`update`动作通常作为最后一段（尽管为了更加 RESTful，它应该被声明为 ie. DELETE route without `/delete`suffix at the end）

```
 http://domain.tld/admin/1/1/delete 
```

无论如何，如果您打算使用 IE GET 来删除记录，最好在 URL 中添加一些计算的哈希值，并在从数据库中删除对象之前对其进行检查。它不是授权机制，因为它有更好的功能，它只是允许您通过手动编写 url 来确保不会意外删除记录，因此它可以是记录 ID 的示例 MD5 哈希：

```
 http://domain.tld/admin/1/1/delete?confirm=a76fe878988ced8... 
```

最后，如果集合和项目都没有严格关联，您可以在单独的“url-spaces”中创建链接以编辑它们：

```
 http://domain.tld/admin/collections/1/edit
 http://domain.tld/admin/items/1/edit
 http://domain.tld/admin/contacts/1/edit
 http://domain.tld/admin/offices/1/edit... 
```

在这种情况下，如果您准备正确的导航链接就足够了，如果您拥有干净舒适的导航，您很可能不需要太在意您作为管理员会操纵 URL。

# javascript - “意外令牌非法”没有明显原因

> ID：12719859
> 
> 赞同：273
> 
> 时间：2012-10-04T03:23:35.597
> 
> 标签：javascript, syntax-error, illegal-characters

* * *

## 回答 #1

> 赞同：496
> 
> 时间：2012-10-04T03:23:35.597

* * *

## 回答 #2

> 赞同：64
> 
> 时间：2014-05-06T06:15:50.837

why you looking for this problem into your code? Even, if it's copypasted.

If you can see, what exactly happening after save file in synced folder - you will see something like `*****` at the end of file. It's not related to your code at all.

**Solution.**

If you are using `nginx` in vagrant box - add to server config:

```
sendfile off; 
```

If you are using `apache` in vagrant box - add to server config:

```
EnableSendfile Off; 
```

Source of problem: [VirtualBox Bug](https://github.com/mitchellh/vagrant/issues/351#issuecomment-1339640)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-01-28T16:10:40.677

This also could be happening if you're copying code from another document (like a PDF) into your console and trying to run it.

I was trying to run some example code out of a Javascript book I'm reading and was surprised it didn't run in the console.

Apparently, copying from the PDF introduces some unexpected, illegal, and invisible characters into the code.

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-04-02T13:46:42.103

I had the same problem on my mac and found it was because the Mac was replacing the standard quotes with curly quotes which are illegal javascript characters.

To fix this I had to change the settings on my mac System Preferences=>Keyboard=>Text(tab) uncheck use smart quotes and dashes (default was checked).

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2015-09-20T16:22:05.807

I got this error in chrome when I had an unterminated string after the line that the error pointed to. After closing the string the error went away.

Example with error:

```
var file = files[i]; // SyntaxError: Unexpected token ILLEGAL

jQuery('#someDiv').innerHTML = file.name + " (" + formatSize(file.size) + ") "
    + "<a href=\"javascript: something('"+file.id+');\">Error is here</a>"; 
```

Example without error:

```
var file = files[i]; // No error

jQuery('#someDiv').innerHTML = file.name + " (" + formatSize(file.size) + ") "
    + "<a href=\"javascript: something('"+file.id+"');\">Error was here</a>"; 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-03-23T19:39:57.257

If you are running a nginx + uwsgi setup vagrant then the main problem is the Virtual box bug with send file as mentioned in some of the answers. However to resolve it you have to disable sendfile in both nginx and uwsgi.

1.  In nginx.conf sendfile off

2.  uwsgi application / config --disable-sendfile

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-02-15T15:09:11.987

When running OS X, the filesystem creates hidden forks of basically all your files, if they are on a hard drive that doesn't support HFS+. This can sometimes (happened to me just now) lead to your JavaScript engine tries to run the data-fork instead of the code you intend it to run. When this happens, you will also receive

```
SyntaxError: Unexpected token ILLEGAL 
```

because the data fork of your file will contain the Unicode U+200B character. Removing the data fork file will make your script run your actual, intended code, instead of a binary data fork of your code.

> .*whatever : These files are created on volumes that don't natively support full HFS file characteristics (e.g. ufs volumes, Windows fileshares, etc). When a Mac file is copied to such a volume, its data fork is stored under the file's regular name, and the additional HFS information (resource fork, type & creator codes, etc) is stored in a second file (in AppleDouble format), with a name that starts with ".*". (These files are, of course, invisible as far as OS-X is concerned, but not to other OS's; this can sometimes be annoying...)

*   Gordon Davisson @ [http://www.westwind.com/reference/OS-X/invisibles.html](http://www.westwind.com/reference/OS-X/invisibles.html)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-08-09T14:22:55.543

Here is my reason:

before:

```
var path = "D:\xxx\util.s" 
```

which `\u` is a escape, I figured it out by using [Codepen](http://codepen.io/)'s analyze JS.

after:

```
var path = "D:\\xxx\\util.s" 
```

and the error fixed

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-12-11T18:58:13.717

I had this same problem and it occurred because I had hit the enter key when adding code in a text string.

Because it was a long string of text I wanted to see it all without having to scroll in my text editor, however hitting enter added an invisible character to the string which was illegal. I was using Sublime Text as my editor.

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-02-25T07:13:56.487

I changed all space areas to &nbsp, just like that and it worked without problem.

> val.replace(" ", "&nbsp");

I hope it helps someone.

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-12-28T09:56:09.893

I am going to add one more answer to the pile. THis problem could happen also because of encoding. You want utf8 encoding to be on safe side. Some editors by default use utf16 which can cause issue. One quick way to test this, is, for example in VS code, simply recreate the same content but use the local editor of vscode to create the file. Hope this helps some.

# objective-c - addObserver (KVO) 中上下文参数的最佳实践

> ID：12719864
> 
> 赞同：44
> 
> 时间：2012-10-04T03:24:44.390
> 
> 标签：objective-c, key-value-observing

我想知道当你观察一个属性时你应该在 KVO 中设置什么上下文指针。我刚开始使用 KVO，我还没有从文档中收集到太多信息。我在这个页面上看到：[http](http://www.jakeri.net/2009/12/custom-callout-bubble-in-mkmapview-final-solution/) ://www.jakeri.net/2009/12/custom-callout-bubble-in-mkmapview-final-solution/作者这样做：

```
[annView addObserver:self
forKeyPath:@"selected"
options:NSKeyValueObservingOptionNew
context:GMAP_ANNOTATION_SELECTED]; 
```

然后在回调中，这样做：

```
- (void)observeValueForKeyPath:(NSString *)keyPath
ofObject:(id)object
change:(NSDictionary *)change
context:(void *)context{

NSString *action = (NSString*)context;

if([action isEqualToString:GMAP_ANNOTATION_SELECTED]){ 
```

我假设在这种情况下，作者只是创建了一个稍后在回调中标识的字符串。

然后在 iOS 5 Pushing the Limits 一书中，我看到他这样做了：

```
[self.target addObserf:self forKeyPath:self.property options:0 context:(__bridge void *)self]; 
```

打回来：

```
if ((__bridge id)context == self) {
}
else {
   [super observeValueForKeyPath .......];
} 
```

我想知道是否有标准或最佳实践可以传递给上下文指针？

* * *

## 回答 #1

> 赞同：102
> 
> 时间：2013-01-04T17:59:28.173

重要的是（一般来说）你使用**了一些东西**（而不是什么都没有），并且你使用的任何东西都是**独一无二的**，并且**对你的使用来说是私有的**。

这里的主要缺陷发生在当您在一个类中进行观察时，然后有人对您的类进行子类化，并且他们添加了对相同观察对象和相同 keyPath 的另一个观察。如果您的原始`observeValueForKeyPath:...`实现仅检查`keyPath`过，或观察到`object`，甚至两者兼而有之，则可能不足以知道这是*您的*观察被回调。使用`context`其值对您来说是唯一且私有的，可以让您更加确定给定`observeValueForKeyPath:...`的调用是您期望的调用。

例如，如果您仅注册`didChange`通知，但子类注册相同的对象和带有`NSKeyValueObservingOptionPrior`选项的 keyPath，这将很重要。如果您没有过滤对`observeValueForKeyPath:...`使用 a 的调用`context`（或检查更改字典），您的处理程序将执行多次，而您只希望它执行一次。不难想象这会如何导致问题。

我使用的模式是：

```
static void * const MyClassKVOContext = (void*)&MyClassKVOContext; 
```

该指针将指向它自己的位置，并且该位置是唯一的（没有其他静态或全局变量可以具有此地址，任何堆或堆栈分配的对象也不能具有此地址——它非常强大，尽管公认不是*绝对*的，保证），感谢链接器。这样`const`做是为了让编译器在我们尝试编写会更改指针值的代码时向我们发出警告，最后，`static`将其设为该文件的私有，因此该文件之外的任何人都无法获得对它的引用（再次，使其更有可能避免碰撞）。

我特别警告*不要*使用的一种模式是出现在问题中的一种模式：

```
- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context {

    NSString *action = (NSString*)context;
    if([action isEqualToString:GMAP_ANNOTATION_SELECTED]) { 
```

`context`被声明为 a `void*`，这意味着这就是可以对它是什么做出的所有保证。通过将它投射到一个`NSString*`你打开一个潜在的坏的大盒子。如果其他人碰巧有一个*不*使用参数`NSString*`的注册，那么`context`当您将非对象值传递给`isEqualToString:`. 指针相等（或替代`intptr_t`或`uintptr_t`相等）是唯一可以与`context`值一起使用的安全检查。

使用`self`as a`context`是一种常见的方法。总比没有好，但唯一性和隐私性要弱得多，因为与我上面建议的方法不同，其他对象（更不用说子类）可以访问`self`并可能将其用作`context`（导致歧义）。

还要记住，在这里可能导致陷阱的*不仅仅是子类；*尽管可以说这是一种罕见的模式，但没有什么可以阻止另一个对象注册您的对象以进行新的 KVO 观察。

为了提高可读性，您还可以将其包装在预处理器宏中，例如：

```
#define MyKVOContext(A) static void * const A = (void*)&A; 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-10-17T04:35:18.500

[如本要点](https://gist.github.com/3044537)所示，KVO 上下文应该是指向静态变量的指针。通常，我发现自己在做以下事情：

在我的文件顶部附近，`ClassName.m`我将有一行

```
static char ClassNameKVOContext = 0; 
```

当我开始观察（的实例）`aspect`上的属性时，我将拥有`targetObject``TargetClass`

```
[targetObject addObserver:self
               forKeyPath:PFXKeyTargetClassAspect
                  options://...
                  context:&ClassNameKVOContext]; 
```

其中 PFXKeyTargetClassAspect`NSString *`定义`TargetClass.m`为等于`@"aspect"`并声明`extern`在 中`TargetClass.h`。（当然，PFX 只是您在项目中使用的前缀的占位符。）这给了我自动完成的优势并保护我免受拼写错误。

当我完成观察`aspect`时，`targetObject`我会有

```
[targetObject removeObserver:self
                  forKeyPath:PFXKeyTargetClassAspect
                     context:&ClassNameKVOContext]; 
```

为了避免在我的实现中缩进太多`-observeValueForKeyPath:ofObject:change:context:`，我喜欢写

```
- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context
{
    if (context != &ClassNameKVOContext) {
        [super observeValueForKeyPath:keyPath ofObject:object change:change context:context];
        return;
    }

    if ([object isEqual:targetObject]) {
        if ([keyPath isEqualToString:PFXKeyTargetClassAspect]) {
            //targetObject has changed the value for the key @"aspect".
            //do something about it
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-02-22T19:24:52.157

我认为更好的方法是按照苹果文档的说法来实现它：

> 类中唯一命名的静态变量的地址是一个很好的上下文。

```
static void *PersonAccountBalanceContext = &PersonAccountBalanceContext;
static void *PersonAccountInterestRateContext = &PersonAccountInterestRateContext; 
```

见[文档](https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/KeyValueObserving/Articles/KVOBasics.html#//apple_ref/doc/uid/20002252-SW4)。

# ios - 使用 NSUserDefaults 将 NSMutableArray 转换为 NSData

> ID：12719865
> 
> 赞同：-1
> 
> 时间：2012-10-04T03:25:06.477
> 
> 标签：ios, annotations, nsuserdefaults

如下所示的代码，它不会给我我的可变数组。我的可变数组中有 3 个注释，但是一旦我关闭我的应用程序并再次打开它，它就会显示 0 个对象。我不知道为什么我在取回数组时会得到 O 个对象！任何想法？

```
-(void)viewDidLoad
{
    NSUserDefaults *ud=[NSUserDefaults standardUserDefaults];

    if([ud boolForKey:@"save-exist"])
    {
        NSMutableArray *udAnnotations=[[NSMutableArray alloc]initWithArray: [ud objectForKey:@"annotationsArray"]];
        NSLog(@"%d",[udAnnotations count]);
    }
    else
    {
        [self addAnno];
    }
}

-(void)addAnno
{
    [mapView addAnnotations:annotationArray];
    NSUserDefaults *ud=[NSUserDefaults standardUserDefaults];
    [ud setObject:annotationArray forKey:@"annotationsArray"];
    [ud setBool:YES forKey:@"save-exist"];
    [ud synchronize];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T04:04:51.473

您不能将 MKAnnotation 保存到 NSUserDefaults 中。NSUserDefaults 是一个属性列表；只有正确列出的对象才能存储在那里。您需要将 MKAnnotation 归档到 NSData 以便将其保存在 NSUserDefaults 中。阅读文档，还可以查看例如[需要存档 CLLocation 数据](https://stackoverflow.com/questions/5259964/need-to-archive-cllocation-data)。

# ruby-on-rails - Rails - OmniAuth-Facebook 抛出 NoSessionError

> ID：12719867
> 
> 赞同：7
> 
> 时间：2012-10-04T03:25:48.083
> 
> 标签：ruby-on-rails, omniauth

我是 Rails 新手，正在努力将 OmniAuth-Facebook gem 整合到我现有的 rails 应用程序中。我遵循了 railscast 教程（http://railscasts.com/episodes/360-facebook-authentication），但是当我点击 /auth/facebook 时出现 NoSessionError 异常，它说我必须向 OmniAuth 提供会话。我会发布代码，但它与 railscast 教程中的完全一样。

它在 OmniAuth 的 strategy.rb 中的这条线上爆炸了： raise OmniAuth::NoSessionError.new("You must provide a session to use OmniAuth.") unless env['rack.session']

我需要明确启动会话吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T20:49:26.687

确保您正在设置环境变量。Railscast 教程要求将您的`App ID/API Key`和`App Secret`键设置为环境变量，以便omniauth 初始化程序可以连接

```
provider :facebook, ENV['APP_ID'], ENV['APP_SECRET'] 
```

去做这个：

```
export APP_ID=(YOUR APP ID)
export APP_SECRET=(YOUR SECRET KEY) 
```

执行此操作的另外两条途径是在您的 config/ 目录中创建一个 config.yml：

```
development:
  app_id:     'YOUR APP ID'
  app_secret: 'YOUR SECRET KEY' 
```

将此添加到您的 config/application.rb

```
AppConfig = YAML.load(ERB.new(File.read(File.expand_path('../config.yml', __FILE__))).result)[Rails.env]
AppConfig.symbolize_keys! 
```

然后在您的初始化程序中引用它们`AppConfig[:app_secret] and AppConfig[:app_id]`

最后一个选项是将值硬编码到提供程序中并删除`ENV`

```
provider :facebook, 'YOUR APP ID', 'YOUR SECRET KEY' 
```

第二个选项是最可取的。

# batch-processing - 为什么我的 JES 作业输出中突然出现二进制日志？

> ID：12719868
> 
> 赞同：2
> 
> 时间：2012-10-04T03:26:03.817
> 
> 标签：batch-processing, mainframe

在大型机上使用 SDSF 查看批处理作业的输出时，我总是使用操作字符`s`将所有不同的成员连接为一个，因为这样更容易同时查看整个作业输出：

```
SDSF STATUS DISPLAY ALL CLASSES    
COMMAND INPUT ===>                 
PREFIX=*  DEST=(ALL)  OWNER=PAX
NP   JOBNAME  JobID    Owner    Prt
     PAX      TSU39756 PAX        1
s_   PAXJOB01 JOB39757 PAX         
     PAXJOB02 JOB39759 PAX 
```

我已经手动完成了这项工作，但也使用在 Linux 上运行的脚本来屏幕抓取作业输出以进行自动状态更新。

然而，就在今天，我开始在该输出中看到二进制信息并开始调查（使用`?`代替`s`, 来获取所有相关成员的列表）。有一些我以前从未见过的成员：

```
SDSF JOB DATA SET DISPLAY - JOB PAXJOB01 (JOB39757)  
COMMAND INPUT ===>                                   
PREFIX=*  DEST=(ALL)  OWNER=PAX  SYSNAME=*       
NP   DDNAME   StepName ProcStep DSID Owner    C Dest 
     JESJCLIN                      1 PAX      A      
     JESMSGLG JES2                 2 PAX      A LOCAL
     JESJCL   JES2                 3 PAX      A LOCAL
     JESYSMSG JES2                 4 PAX      A LOCAL
     $INTTEXT JES2                 5 PAX      A      
     $JOURNAL                      6 PAX      A      
     STDIN    RUNLOG             101 PAX      A      
     STDOUT   RUNLOG             102 PAX      A LOCAL 
```

具体来说，、`JESJCLIN`和是新成员，而期刊是包含二进制信息的成员。`$INTTEXT``$JOURNAL``STDIN`

我想知道是什么控制了这种行为，因为它搞砸了我的自动化流程。我宁愿不必`?`进入上面的屏幕并仅提取我感兴趣的输出，因为这会因每个作业而改变并且需要一些繁重的配置 - 只要我可以返回，获得串联作业输出要容易得多原来的行为。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T04:36:27.933

这是由命令控制的`INPUT ON|OFF`。

使用`INPUT ON`，它将列出（并在使用时组合`s`）输入和输出成员。使用`INPUT OFF`，它将简单地列出并组合输出成员。

因此，为了确保您只看到输出成员，请`INPUT OFF`在选择作业之前执行。

# magento - Magento 静态块 URL

> ID：12719869
> 
> 赞同：0
> 
> 时间：2012-10-04T03:26:15.930
> 
> 标签：magento

我在 Magento 静态块中添加了一些链接，例如：

```
 <a title="Click here for more information" href="{{store_url=about-us}" target="_self">About Us</a> 
```

这似乎工作得很好，但是一旦我使用 HTTPS，链接就会保持 http:// 格式。有没有办法让这些也自动更改为 HTTPS？

一些建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T05:51:01.563

默认情况下，这是 Magento 的行为方式。

尝试使用以下代码创建 links.phtml 文件

```
if(Mage::app()->getStore()->isCurrentlySecure()){
    $url = Mage::getUrl('about-us', array('_secure'=>true));
     //$url = Mage::getUrl('',array('_secure'=>true) . 'about-us'; // if above code doesn't work try this
}
else{
     $url = Mage::getUrl('about-us');
}

echo '<a title="Click here for more information" href="'. $url .'" target="_self">About Us</a>'; 
```

然后在你的静态块中

```
{{block type="core/template" template="path/to/file/links.phtml"}} 
```

使用 apache rewrite 会将页面重定向到 https，但查看源代码时的链接仍然没有 https

如果您在服务器上启用了缓存，请仔细检查以确保它不缓存一个版本....如果缓存，那么您需要将块类型（核心/模板）更改为不缓存的）

# c++ - 在codelite中调试c ++

> ID：12719873
> 
> 赞同：4
> 
> 时间：2012-10-04T03:27:19.310
> 
> 标签：c++, debugging, ide, codelite

我在 int x 旁边设置了一个断点，并将 ide 设置为调试模式，但是当我开始调试时，调试窗口中什么也没有出现？？？

**我应该做更多的事情吗？**

```
#include <iostream>

int main()
{
    using std::cin;
    using std::cout;
    using std::endl;

    int x;
    cout<<"X = "<<x<<endl<<"enter new x \n X = ";
    cin>>x;

    cout<<endl<<"New X = "<<x<<endl;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T22:24:52.007

Codelite 没有停止可能有几个原因：

1) 您是否在启用调试信息的情况下构建项目？确保选择“调试”配置，这确保将 -g 传递给 gcc / g++

2) 尝试从以下位置启用调试器日志：设置 -> 调试器设置 -> GNU gdb 调试器 -> 杂项 -> 启用调试器完整日志这将产生有关 codelite 和 gdb 之间交互的更多信息 - 它还会告诉你 gdb 失败的原因要停止，日志将打印到“输出”选项卡下的“调试器”窗格中

请记住：codelite 只是 gdb 的一个接口，所以如果 codelite 没有破坏，则意味着 gdb 没有指示它破坏......

伊兰

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T00:23:09.400

您的 ide 禁止您读取未启动的值 'int x'。我在vs2008下调试过，断点会自动移到cout行。并继续调试会得到这个：

![在此处输入图像描述](../Images/5f56d385e2a01e798c7af98a4dde0d3b.png)

按“继续”将在 cmd 窗口中得到输出。

![在此处输入图像描述](../Images/324dfaf3ce1b77a508da1a215c029157.png)

我希望这能给你带来一些帮助。

# sql-server - 我可以在查询 SQL Server 2008 中序列化日期时间数据 JSON

> ID：12719876
> 
> 赞同：0
> 
> 时间：2012-10-04T03:27:54.400
> 
> 标签：sql-server, json, sql-server-2008, serialization, deserialization

我已经反序列化数据日期时间，并将其保存在我的数据库表列中：

> \/日期（1328029200000+0700）\/

但是我可以使用查询 sql 再次将其转换为日期格式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T12:19:36.130

```
declare @jsondate varchar(40) = '\/Date(1328029200000+0700)\/';
select substring(@jsondate,8,10) -- seconds
      ,substring(@jsondate,18,3) -- milliseconds
      ,substring(@jsondate,21,5) -- utc offset
      ,
-- this next expression is what you need
       cast(convert(char(20),
       dateadd(ms,1*substring(@jsondate,18,3),
       dateadd(ss,1*substring(@jsondate,8,10),'19700101'))
        ,120) + stuff(substring(@jsondate,21,5),4,0,':')
            as datetimeoffset(4));

-- result 2012-01-31 17:00:00.0000 +07:00 
```

# sql - 如何选择写在列中的个人姓名的最大数量

> ID：12719878
> 
> 赞同：0
> 
> 时间：2012-10-04T03:28:14.683
> 
> 标签：sql, db2

我有一个表，其中有一列包含学生姓名：一个学生姓名可以输入多次。因此，如果我们想知道哪些学生在桌子上以及出现了多少次......我们如何计算呢？

我正在使用 DB2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T03:30:25.697

```
select name, count(*) 
from   your_table
group by name; 
```

或者

```
select name, count(*)
from   your_table
where  name = 'xxx'
group by name; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T03:30:46.983

```
SELECT name, count(*)
FROM your_table
GROUP BY name 
```

# php - 如何在php中有不同的页面

> ID：12719892
> 
> 赞同：0
> 
> 时间：2012-10-04T03:30:24.823
> 
> 标签：php, mysql, content-management-system

我正在尝试在学习 php 时创建一个简单的 cms，我想知道拥有不同页面的最佳方式是什么？因此，用户可以从后端添加一个与主页分开的页面，并从我假设的数据库中获取其文本。

我对所有这样做的方式持开放态度，因为我没有任何线索。如果您需要更多信息，请发表评论。

丹佛

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T03:38:25.433

为什么不看看一流的系统之一是如何做到的呢？数据库内容和模板的基本原则往往在各种 CMS 中以相同的方式工作，这将为您提供一个很好的开端。

对我来说，一个很好的例子就是此时的[Silverstripe](http://www.silverstripe.org/introduction/) - 他们有一个很好的干净的底层代码结构和一些易于理解的[教程](http://doc.silverstripe.org/framework/en/tutorials/)，可以很快地掌握基础知识。

# actionscript-3 - Flex mx:CurrencyFormatter 格式不正确

> ID：12719900
> 
> 赞同：0
> 
> 时间：2012-10-04T03:32:03.057
> 
> 标签：actionscript-3, apache-flex, mxml

当我使用以下格式化程序时，我得到了错误的值。

```
<mx:CurrencyFormatter
        id="currencyFormatter"
        currencySymbol=""
        precision="2"
        rounding="up"
        decimalSeparatorFrom=","
        decimalSeparatorTo=","
        useNegativeSign="true"
        useThousandsSeparator="true"
        thousandsSeparatorFrom="."
        thousandsSeparatorTo="."
        alignSymbol="left" /> 
```

例如，如果我传递值 1.5，我将得到“15,00”作为格式方法的结果。有谁知道这里发生了什么？Tks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T03:38:30.277

我发现了问题：在我的代码中，我试图这样做：

```
currencyFormatter.format(item.total.toString()) 
```

我解决了删除 toString 方法，如下所示：

```
currencyFormatter.format(item.total) 
```

如果我将值“1.5”作为字符串传递给格式化程序，我会得到“15,00”作为结果。但是如果我将值“1.5”作为数字传递，我会得到正确的格式（“1,50”）。

# module - 如何为 DB2 中的模块删除别名？

> ID：12719901
> 
> 赞同：0
> 
> 时间：2012-10-04T03:32:04.573
> 
> 标签：module, db2, db2-luw

我正在尝试将别名删除到模块中，但没有成功。

当我发出以下脚本时，我无法删除它

```
CREATE MODULE TESTS;
CREATE ALIAS T2 FOR MODULE TESTS;
CREATE PUBLIC ALIAS T1 FOR MODULE TESTS;
DROP ALIAS T2;
DROP PUBLIC ALIAS T1;
DROP MODULE TESTS;
DROP ALIAS T2;
DROP PUBLIC ALIAS T1; 
```

我收到一条未定义别名的消息：

SQL0204N "SYSPUBLIC.T2" 是 un nombre no definido。

但是，当我查询 syscat.modules 时，我可以看到定义别名的行。

我该怎么做才能删除模块？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T07:35:07.113

根据我对这个的玩弄，您需要特别指定要删除一个模块：

```
DROP ALIAS T2 FOR MODULE; 
```

否则，DB2 只会在您当前的模式中查找对象（显然是`SYSPUBLIC`在这种情况下）。

# c - 更改订单修复了我的错误。为什么？

> ID：12719904
> 
> 赞同：0
> 
> 时间：2012-10-04T03:32:17.990
> 
> 标签：c, io

我花了一段时间才弄清楚这个错误，并想知道为什么第二个代码块不起作用。

在职的：

```
FILE *readFile;
FILE *saveFile;

char readFileName;
char saveFileName;

printf("read file name:\n");
scanf("%s", &readFileName);
readFile = fopen(&readFileName, "r");

printf("save file name:\n");
scanf("%s", &saveFileName);
saveFile = fopen(&saveFileName, "w"); 
```

没用：

```
FILE *readFile;
FILE *saveFile;

char readFileName;
char saveFileName;

printf("read file name:\n");
scanf("%s", &readFileName);

printf("save file name:\n");
scanf("%s", &saveFileName);

readFile = fopen(&readFileName, "r");
saveFile = fopen(&saveFileName, "w"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T03:37:26.500

`char`您正在获得对堆栈上分配的单个的引用。该指针不能用作对字符数组的引用。

尝试用用作缓冲区的真实字符数组替换您的字符串：

```
char readFileName[128];
scanf("%127s", readFileName); 
```

否则会发生什么`scanf`，它不检查任何东西，将用从中获取的字符覆盖堆栈上的数据`stdio`，导致[堆栈缓冲区溢出](http://en.wikipedia.org/wiki/Stack_buffer_overflow)，这意味着未定义的行为。

您可以在格式说明符中指定最多获取多少个字符，但请记住减去一个，因为[`null`终止符](http://en.wikipedia.org/wiki/Null_character)本身会自动附加`scanf`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T03:37:56.860

您的程序的一个版本可以正常工作，这纯属运气（*未定义的行为）。*

```
char readFileName;
...
scanf("%s", &readFileName);
readFile = fopen(&readFileName, "r"); 
```

您正在将整个文件名写入只有一个字节的内存空间！大概你的意思是：

```
char readFileName[1024];
...
scanf("%s", readFileName);
readFile = fopen(readFileName, "r"); 
```

您的程序的“工作”版本只是覆盖了您不需要立即打开“保存”文件的字节。这就是为什么它似乎可以正常运行，即使它是错误的。

使用前一定要分配足够的空间`scanf()`。

# javascript - 取消按钮到上一页

> ID：12719906
> 
> 赞同：0
> 
> 时间：2012-10-04T03:32:52.853
> 
> 标签：javascript, asp.net-mvc, dom-events

我目前有这个取消按钮，当用户单击它时 - 它会将他们带到他们所在的上一页。如果他们在未保存的情况下对页面进行了更改，然后单击取消，则会弹出一个窗口，询问他们是否要在不保存更改的情况下离开页面。单击“是离开页面”时，消息再次出现，我必须再次单击“是”。因此，相同的消息两次不确定为什么会发生这种情况，以及是否有更好的方法可以返回上一页。

这是我的取消按钮代码：

```
<a href="javascript:goBack(); " class="glossyBtn">
 <img alt="" style="vertical-align: middle" src="<%:Url.Content("~/Content/blueprint/plugins/buttons/icons/cross.png")%>" />
    <span style="vertical-align: middle">Cancel</span>
</a>

<script type="text/javascript">
    function goBack() {
        window.history.back();
    }
</script> 
```

此外，如果一个人在页面上并且他们进行了更改然后保存 - 使用保存的信息重新加载同一页面，但如果用户单击取消，他们将在加载之前返回到同一页面，并且必须再次单击取消以获取所有离开页面。有没有更好的方法来处理这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T03:37:33.817

`window.history.back();`不会像你期望的那样工作。如果要重定向到上一页，请使用`window.location`

```
 function goBack() {
        window.location = 'YOUR URL'; //specify the url to redirect
 } 
```

**更新您的评论：**

是的，只需将参数传递给函数。

```
function goBack(url) {
       window.location = url; //specify the url to redirect
} 
```

在您的`<a>`标签中调用这样的函数，

```
<a href="javascript:goBack('http://www.stackoverflow.com'); " class="glossyBtn"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T03:42:24.960

`history.back()`如果手动清除浏览器历史记录将无法工作，因此请使用 window.location.href

# google-app-engine - Google AppEngine 中的 Datanucleus JPA 2 2 级缓存

> ID：12719907
> 
> 赞同：2
> 
> 时间：2012-10-04T03:33:23.963
> 
> 标签：google-app-engine, caching, jpa-2.0, datanucleus

在我的 Datanucleus JPA 2 Level 2 缓存未使用 Google App Engine Memcache 服务的以下配置中，我缺少什么？我正在使用 GAE 1.7.2 SDK。

在persistence.xml 中：

```
<persistence-unit name="transactions-optional">
    <provider>org.datanucleus.api.jpa.PersistenceProviderImpl</provider>
    <properties>
        <property name="datanucleus.NontransactionalRead" value="true"/>
        <property name="datanucleus.NontransactionalWrite" value="true"/>
        <property name="datanucleus.ConnectionURL" value="appengine"/>
        <property name="datanucleus.appengine.datastoreReadConsistency" value="EVENTUAL" />
        <property name="javax.persistence.query.timeout" value="5000" />
        <property name="datanucleus.datastoreWriteTimeout" value="10000" />
        <property name="datanucleus.singletonEMFForName" value="true"/>
        <property name="datanucleus.cache.level2.cacheName" value="someName"/>
        <property name="datanucleus.cache.level2.type" value="javax.cache"/>
    </properties>
</persistence-unit> 
```

实体注释包含：

```
@Entity
@Cacheable(true) 
```

我的 WEB-INF/lib 看起来像这样：

```
-rw-r--r--   1 501  20    27M Oct  3 16:13 appengine-api-1.0-sdk-1.7.2.jar
-rw-r--r--   1 501  20   3.3M Oct  3 16:13 appengine-api-labs.jar
-rw-r--r--   1 501  20   5.0M Oct  3 16:13 appengine-endpoints.jar
-rw-r--r--   1 501  20   6.8K Oct  3 16:13 appengine-jsr107cache-1.7.2.jar
-rw-r--r--   1 501  20    45K Oct  3 16:13 asm-4.0.jar
-rw-r--r--   1 501  20   309K Oct  3 16:13 datanucleus-api-jdo-3.1.0-m3.jar
-rw-r--r--   1 501  20   246K Oct  3 16:13 datanucleus-api-jpa-3.1.0-m3.jar
-rw-r--r--   1 501  20   331K Oct  3 16:13 datanucleus-appengine-2.1.0-final.jar
-rw-r--r--   1 501  20   1.6M Oct  3 16:13 datanucleus-core-3.1.0-m5.jar
-rw-r--r--   1 501  20   112K Oct  3 16:13 geronimo-jpa_2.0_spec-1.0.jar
-rw-r--r--   1 501  20   5.2M Oct  3 16:13 gwt-servlet.jar
-rw-r--r--   1 501  20   196K Oct  3 16:13 jdo-api-3.0.1.jar
-rw-r--r--   1 501  20   7.9K Oct  3 16:13 jsr107cache-1.1.jar
-rw-r--r--   1 501  20    15K Oct  3 16:13 jta-1.1.jar 
```

在 WEB-INF/lib 目录下，运行：

```
for i in *.jar; do echo $i; jar -tf $i | grep Level2; done 
```

产量：

```
appengine-api-1.0-sdk-1.7.2.jar
appengine-api-labs.jar
appengine-endpoints.jar
appengine-jsr107cache-1.7.2.jar
asm-4.0.jar
datanucleus-api-jdo-3.1.0-m3.jar
datanucleus-api-jpa-3.1.0-m3.jar
datanucleus-appengine-2.1.0-final.jar
datanucleus-core-3.1.0-m5.jar
org/datanucleus/cache/WeakLevel2Cache.class
org/datanucleus/cache/Level2Cache$PinnedClass.class
org/datanucleus/cache/AbstractLevel2Cache.class
org/datanucleus/cache/SoftLevel2Cache.class
org/datanucleus/cache/Level2Cache.class
org/datanucleus/cache/NullLevel2Cache.class
org/datanucleus/cache/JavaxCacheLevel2Cache.class
geronimo-jpa_2.0_spec-1.0.jar
gwt-servlet.jar
jdo-api-3.0.1.jar
jsr107cache-1.1.jar
jta-1.1.jar 
```

这表明 org.datanucleus.cache.JavaxCacheLevel2Cache 存在于 datanucleus-core-3.1.0-m5.jar 中。然而，当我尝试访问在启用此缓存之前已持久存在的实体时，我在服务器端收到以下错误。

```
org.datanucleus.exceptions.NucleusUserException: Level 2 Cache "javax.cache" is registered to use class "org.datanucleus.cache.JavaxCacheLevel2Cache" yet this is not found. Please check your CLASSPATH and plugin specification. 
```

在异常堆栈跟踪的下方，我发现：

```
Caused by: java.lang.NoClassDefFoundError: javax/cache/Caching
    at org.datanucleus.cache.JavaxCacheLevel2Cache.<init>(JavaxCacheLevel2Cache.java:63) 
```

现在，这很清楚，但我在哪里可以找到这个 javax.cache.Caching？我应该在类路径中包含哪个 JAR？粗略的谷歌搜索并没有立即回答我的问题。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T07:59:54.400

谷歌“memcached”使用了将成为标准“javax.cache”的旧版本。DataNucleus 3.0 仅支持此旧版本（具有您所拥有的属性）。DataNucleus 3.1 支持**javax.cache**的旧版本和最新版本。要使用 DN 3.1 的旧版本（即 GAE memcached），您需要将属性**datanucleus.cache.level2.type**设置为*jcache*。见[http://www.datanucleus.org/products/accessplatform_3_1/jpa/cache.html#jcache](http://www.datanucleus.org/products/accessplatform_3_1/jpa/cache.html#jcache)

为什么你使用 DataNucleus 版本 3.1.0-m3/m5 我不知道从那以后什么时候有很多版本！

# bdd - 我在 BDD 场景中的具体程度如何？

> ID：12719911
> 
> 赞同：0
> 
> 时间：2012-10-04T03:34:24.063
> 
> 标签：bdd, acceptance-testing

采取两种不同的方式来说明相同的行为。

选项 A：

```
Given a customer has 50 items in their shopping cart
When they check out
Then they will receive a 10% discount on their order 
```

选项 B：

```
Given a customer has a high volume of items in their shopping cart
When they check out
Then they will receive a high volume discount on their order 
```

前者更为具体。如果有人对客户何时获得大量折扣或给他们多少有疑问，阅读此场景会非常清楚。服务于记录行为的目的，它尽可能具体，尽管这些值的任何更改都需要更改场景。

第二个更笼统，没有第一个清晰。自动化它需要在步骤实现中合并值“50”和“10”。另一方面，该场景抓住了核心业务需求：大批量客户获得折扣。如果我们稍后决定使用“40”和“15”，则场景不必改变，因为核心业务需求并没有真正改变（尽管步骤实现会改变）。此外，“大批量客户”一词传达了我们为什么要给他们折扣的一些信息。

那么，哪个更好？相反，在什么情况下我应该赞成前者还是后者？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T10:18:05.850

我想我会选择选项A。

问题是 BDD 场景必须作为系统的文档。

因此，如果非技术人员想知道您的折扣系统是如何工作的（业务人员、测试人员或客户支持团队的人员），他们肯定想知道拥有大量商品意味着什么以及它是什么应用的折扣。他们不希望必须进入管道代码才能获取此信息。

我认为这些信息很重要，不能对读者隐藏。

另一个好处是它允许非开发人员（例如测试人员）编写新场景并检查如果购物车中有 1 件商品或 100 件商品会发生什么。

当你对事物过于抽象时，就很难应用有意识的发现。因此，对于选项 B 中的场景，您失去了问自己以下问题的机会：

*   如果我们有超过 50 件商品（例如 100 件商品）会怎样，还有其他折扣吗？
*   如果我们有 1 件商品会发生什么情况，当然我们不需要打折，或者我们应该根据购物车的总价格而不是其中的物品数量来打折，只购买一件非常昂贵的物品的人应该可以享受折扣也 ？
*   10% 是唯一可用的折扣类型，我们是否有例如固定金额的折扣？我们有更复杂的折扣策略吗？

当业务变量可见时，您可以使用它们并找出您可能忘记的东西或考虑新的有趣（或不）功能。

作为一般规则，我会隐藏在场景中不重要的内容，在这种情况下，项目的数量和应用的折扣值对读者来说确实很重要。

# ios - UIWebView：重新加载时内容变大

> ID：12719916
> 
> 赞同：1
> 
> 时间：2012-10-04T03:35:19.670
> 
> 标签：ios, uiwebview, contentsize

我遇到了 UIWebView 的问题：我在 ViewDidLoad 处创建了一个 webview，并创建了一个重新加载页面的按钮，每次单击 webview 时都会下载一张新图片，但高度会越来越长（url 给出随机图片）。

```
//Here is how I create it
pubTop = [[UIWebView alloc] initWithFrame:CGRectMake(0, 44, 320, 70)];
    [pubTop loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:URL_PUB_LEVEL4]]];
    [pubTop setScalesPageToFit:YES];
    pubTop.scrollView.scrollEnabled = NO; 
```

我确实通过以下方式重新加载：[pubTop reload]；

我需要帮助！！！

# http-headers - AppHarbor 不转发标题名称上带有 _ 的标题

> ID：12719921
> 
> 赞同：0
> 
> 时间：2012-10-04T03:36:16.637
> 
> 标签：http-headers, appharbor

我正在使用 AppHarbor，但由于 CRSF（Cross-Site-Request-Forgery）检查失败，我的用户都没有通过身份验证。

我发现问题在于使用的自定义 CRSF_Header 没有被转发到我的 AppHarbor（即使其他自定义标头是）

事实证明，问题在于名称上带有 _（下划线）的标头没有被 AppHarbor 内部代理转发。

然后修复方法是将标头名称从 CRSF_Header 重命名为 CRSF-Header。

我的问题是：**还有其他方法可以做到这一点吗？或者我在使用 AppHarbor 时必须避免在标题上使用 _。**

请注意，IIS 和 Cassini 对这些标头没有问题（到目前为止，我只在 AppHarbor 中遇到过这个问题）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T15:18:45.580

好的，我发现这篇 AppHarbor 文章证实了这一点：http: [//support.appharbor.com/discussions/problems/5442-custom-http-header-not-reaching-the-application](http://support.appharbor.com/discussions/problems/5442-custom-http-header-not-reaching-the-application)

令人讨厌的是，当我遇到此问题时，AppHarbor 讨论搜索无法正常工作，因为我在搜索该文章时没有看到该文章

# php - PHP：从数据库中加载 DOM 中的 XML

> ID：12719923
> 
> 赞同：0
> 
> 时间：2012-10-04T03:36:19.787
> 
> 标签：php, mysql, xml, parsing, dom

出于某种原因，这在我开箱即用的 WAMP 上完美运行，但是当上传到 Web 服务器时，它会丢弃以下错误：

> 严重性：警告
> 
> 消息：DOMDocument::load(): I/O warning : failed to load external entity "/mounted-storage/home155/sub004/sc81961-YHHB/* * * * * *.com/dev/ 2012-10-04 03 :15:03 4 2012-10-04 03:25:16 2012-09-17 19:25:11 3 0 1 1 2012-10-04 04:08:18 “
> 
> 文件名：models/fuel_model.php
> 
> 行号：74

它指向应用程序根文件夹。

代码：

```
 function get_pos($id)
    {
        $get = $this->db->query(
                "SELECT * FROM holding WHERE id=1"
            );
        $stream = $get->row_array();

        $addr = 'http://api.eveonline.com/corp/StarbaseDetail.xml.aspx?keyID='.$stream['apiid'].
                '&vCode='.$stream['apikey'] . '&itemID=' . $id;
        $link = new DOMDocument();

      $get_cache = $this->db->query(
          "SELECT * FROM cache_poses WHERE posid=".$id
        );
      $cache = $get_cache->row_array();

      $posted = strtotime(date("Y-m-d H:i:s"));
      if(!empty($cache))
      {
        $posted = strtotime($cache['cachedon']);
      }

      $current = strtotime(date("Y-m-d H:i:s"));

      $mins = $posted - $current;
      $expiry = $mins % 60;

      if(empty($cache))
      {
        $link->load($addr);
        $this->db->query("INSERT INTO cache_poses (data, posid) VALUES (" . $this->db->escape($link->saveXML()) . "," . $id .")");

      } elseif(!empty($cache) && ($expiry >= 360)) {
        $this->db->query("DELETE FROM cache_poses WHERE posid=".$id);
        $link->load($addr);
        $this->db->query("INSERT INTO cache_poses (data, posid) VALUES (" . $this->db->escape($link->saveXML()) . "," . $id . ")");

      } elseif(!empty($cache) && ($expiry < 360)) {

        $link->load($cache['data']);

      }

        $supply = $link->getElementsByTagName('row');
        $supplies = array();

        foreach ($supply as $fuel) {
            $block = $fuel->attributes;

            $put = $this->db->query('SELECT name FROM items WHERE typeid='.$block->item(0)->nodeValue);
            $lck = $put->row_array();

            $supplies[$lck['name']] = $block->item(1)->nodeValue;
        }

        $info = $this->implode_with_keys($supplies);
        return $info;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T04:54:00.810

你能发布XML吗？它引用的 DTD 必须可以在您的本地开发机器上访问，但不能在您的实时服务器上访问。如果 DTD 和它定义的实体对您的 XML 不重要，您可以通过在调用 DOMDocument::load() 之前禁用内部实体的加载来抑制警告，并且可能会因不加载额外资源而提高性能。

```
$link->resolveExternals = FALSE;
$link->load($cache['data']); 
```

[http://www.php.net/manual/en/class.domdocument.php#domdocument.props.resolveexternals](http://www.php.net/manual/en/class.domdocument.php#domdocument.props.resolveexternals)

顺便说一句， DOMDocument::load() 接受文件路径。如果你`$cache['data']`真的是数据库中的一串XML，你需要使用DOMDocument::loadXML()。

# session - Heroku 上的 Redis 会话存储

> ID：12719926
> 
> 赞同：1
> 
> 时间：2012-10-04T03:37:21.390
> 
> 标签：session, heroku, redis, ruby-on-rails-3.2

我正在尝试使用 redis 存储作为我在 heroku 上的会话存储。它在开发中运行良好，但我无法在 heroku 上获得 redis 连接。它正在尝试连接到 127.0.0.1 而不是正确的 redis 服务器。

错误：

```
ActionView::Template::Error (Error connecting to Redis on 127.0.0.1:6379 (ECONNREFUSED)): 
```

我已将 heroku redis 配置设置为正确的服务器（不是真正用于会话存储，但已设置）

```
REDISTOGO_URL: redis://redistogo:################################@carp.redistogo.com:9274/ 
```

session_store.rb

```
GrnAuth::Application.config.session_store :redis_store, :server => APP_CONFIG['redis_server'], key: '_grn_session' 
```

环境.rb

```
# Load the rails application
require File.expand_path('../application', __FILE__)
require 'yaml'
APP_CONFIG = YAML.load_file("#{Rails.root}/config/config.yml")[Rails.env]

# Initialize the rails application
GrnAuth::Application.initialize! 
```

配置.yml

```
development:
  redis_server: redis://localhost:6379/

test:
  redis_server: redis://localhost:6379/

production:
  redis_server: redis://redistogo:################################@carp.redistogo.com:9274/ 
```

当我控制台进入 heroku 时，我可以检查`APP_CONFIG['redis_server']`并将其设置为 redis 服务器。

我还建立了一个 redis 连接只是为了使用它。

redis.rb

```
uri = URI.parse(ENV["REDISTOGO_URL"] || "redis://localhost:6379/" )
$redis = Redis.new(:host => uri.host, :port => uri.port, :password => uri.password) 
```

当我安慰 heroku 时，我可以做到以下几点

```
irb(main):001:0> $redis
=> #<Redis client v3.0.1 for redis://carp.redistogo.com:9274/0> 
```

任何帮助将非常感激。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T20:53:54.097

它看起来像这样：

```
GrnAuth::Application.config.session_store :redis_store, :server => APP_CONFIG['redis_server'], key: '_grn_session' 
```

应该是这样的：

```
GrnAuth::Application.config.session_store :redis_store, :servers => APP_CONFIG['redis_server'], key: '_grn_session' 
```

# ios - 如何自定义 UIActivityViewController 共享菜单的例子？

> ID：12719931
> 
> 赞同：10
> 
> 时间：2012-10-04T03:37:54.150
> 
> 标签：ios, xcode, ios6, uiactivityviewcontroller, uiactivity

是否有如何`UIActivityViewController`使用我自己的图标和自定义共享菜单的示例`IBAction`？

我见过这个...

```
- (id)initWithActivityItems:(NSArray *)activityItems applicationActivities:(NSArray *)applicationActivities; 
```

但我还没有让它工作。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-09T10:25:46.550

您首先需要子类化`UIActivity`.

然后您需要覆盖某些方法，包括`activityImage`设置图标和`performActivity`执行操作（您在问题中称为“IBAction”）。

如果不是静默执行操作，而是首先需要进一步的用户交互和自定义活动的信息（例如，标准 UIActivity 的 Twitter 帖子），则应该覆盖`activityViewController`而不是`performActivity`.

子类化后`UIActivity`（例如`MyActivity`），您应该创建一个实例`MyActivity`并将其作为`applicationActivities`您传递给的数组的元素`initWithActivityItems:applicationActivities:`。

查看[UIActivity 的文档，](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIActivity_Class/Reference/Reference.html)了解在子类化和图标要求时需要覆盖的确切内容。

希望这有所帮助。

# c - 指向内存中指针的指针大小

> ID：12719933
> 
> 赞同：1
> 
> 时间：2012-10-04T03:37:57.157
> 
> 标签：c, memory, pointers

只是一个简单的问题：

在 32 位机器上，指向指针 ( `**p`) 的指针是否为 4 个字节？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T03:39:38.527

是的......它将是4个字节......但不能保证。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T03:55:03.053

逻辑是指针仅仅是内存地址。在一台 32 位地址的机器中，*任何*存储实体的内存地址几乎肯定是 4 个字节。因此，存储指针的内存地址为 4 个字节。因此指向指针的指针是 4 个字节。ISO C 标准没有承诺这些。这就是几乎所有实现的结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T03:43:24.470

正确的。指针通常具有固定大小。在 32 位机器上，它们通常是 32 位（= 4 字节）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-04T03:49:16.613

通常是的，32 位机器上的地址将是 4 个字节。

如果您不想做出假设，最好的选择是运行旧的`sizeof(p)`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-04T04:04:57.080

其他人已经提到它肯定是 32 位或 4 个 8 位字节。

但是，根据硬件和编译器的不同，它可能会更少或更多。

如果您的机器只能在 32 位边界将其内存寻址为 32 位单元，则您将必须有一个更大的指针来寻址和访问每个 32 位内存单元的8 位部分 ( `chars`/ )。`bytes`如果此处的编译器决定不使用不同大小的指针，则所有指针（包括指向指针的指针）都变为 34+ 位长。

同样，如果程序非常小并且可以容纳 64KB，编译器可能能够将所有指针减少到 16 位。

# regex - 使用递归表达式匹配嵌套大括号的正则表达式？

> ID：12719935
> 
> 赞同：7
> 
> 时间：2012-10-04T03:38:04.490
> 
> 标签：regex, perl, recursion

我正在尝试匹配文本`sp { ...{...}... }`，例如允许大括号嵌套的地方。这是我到目前为止所拥有的：

```
my $regex = qr/
(                   #save $1
    sp\s+           #start Soar production
    (               #save $2
        \{          #opening brace
        [^{}]*      #anything but braces
        \}          #closing brace  
        | (?1)      #or nested braces
    )+              #0 or more
)
/x; 
```

我只是无法让它与以下文本匹配：`sp { { word } }`. 谁能看到我的正则表达式有什么问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-04T03:49:27.847

有很多问题。递归位应该是：

```
(
   (?: \{ (?-1) \}
   |   [^{}]+
   )*
) 
```

全部一起：

```
my $regex = qr/
   sp\s+
   \{
      (
         (?: \{ (?-1) \}
         |   [^{}]++
         )*
      )
   \}
/x;

print "$1\n" if 'sp { { word } }' =~ /($regex)/; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-04T04:28:04.180

这是 underused 的情况，这是[`Text::Balanced`](http://p3rl.org/Text%3a%3aBalanced)一个非常方便的核心模块。它确实依赖于[`pos`](http://p3rl.org/pos)首先找到/设置的分隔序列的开头，所以我通常像这样调用它：

```
#!/usr/bin/env perl

use strict;
use warnings;

use Text::Balanced 'extract_bracketed';

sub get_bracketed {
  my $str = shift;

  # seek to beginning of bracket
  return undef unless $str =~ /(sp\s+)(?={)/gc;

  # store the prefix
  my $prefix = $1;

  # get everything from the start brace to the matching end brace
  my ($bracketed) = extract_bracketed( $str, '{}');

  # no closing brace found
  return undef unless $bracketed;

  # return the whole match
  return $prefix . $bracketed;
}

my $str = 'sp { { word } }';

print get_bracketed $str; 
```

带有`gc`修饰符的正则表达式告诉字符串记住匹配的终点在哪里，并`extract_bracketed`使用该信息知道从哪里开始。

# android - 新活动开始时 AlertDialog 丢失

> ID：12719936
> 
> 赞同：0
> 
> 时间：2012-10-04T03:38:04.560
> 
> 标签：android, android-intent, android-activity, android-alertdialog

每当我发现设备位置发生变化时，都会出现一个 AlertDialog。这几乎发生在应用程序认为合适的任何时候。

问题是，如果对话框出现在新 Activity 启动之前，则对话框会随旧 Activity 一起消失。无论如何让 AlertDialog 阻止新的意图？或者翻译到新的活动（我可以更新上下文）？

我注意到 AlertDialogs 甚至不处理设备旋转的情况，所以我对此的希望并不太高，但任何输入都会有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T03:44:26.103

我会简单地使用 SharedPreference 设置并在您可能中断的活动开始时检查它。

前任;

1.  将共享首选项值设置为 1
2.  开始对话
3.  完成后，将共享首选项保存为 0
4.  如果活动开始并且共享偏好为 1，则它会中断，因此开始警报对话。如果是0，继续。

同样，一个 AlertDialog 旨在将自己附加到一个活动，所以你真的不能阻止它死亡，如果你以前的活动被推回或失去屏幕的焦点（ui线程基本上被搁置了！）

希望您可以通过这个小修复来解决您的问题。

添加丹尼尔评论的内容，自定义吐司*可能*很棒。然而，它们被限制在大约 3.5 秒（我认为）更多关于自定义吐司的信息；[http://developer.android.com/guide/topics/ui/notifiers/toasts.html#CustomToastView](http://developer.android.com/guide/topics/ui/notifiers/toasts.html#CustomToastView)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T03:56:41.593

您的问题对我来说不清楚，据我了解，每当设备位置发生更改时，您都需要显示警报对话框，超过新的活动。我的建议是，当设备位置更改时获得需要的值，将其与意图捆绑在一起并通过它开始一个新的活动。使用捆绑包还传递一个布尔标志。如果布尔标志在新活动中为真，则在中显示一个警报对话框`onCreate`，我希望你能得到你想要的。这将是你的最佳方案按照我的理解执行此操作。此外，保留这些活动的历史记录可能会在实施此操作时影响应用程序。

# ios - 应用登录时的 CoreData 实体更新

> ID：12719942
> 
> 赞同：0
> 
> 时间：2012-10-04T03:38:38.670
> 
> 标签：ios, core-data, nsmanagedobject

我的应用程序与 webServer 对话。登录时，我拉下 JSON 并用 4 个实体（每个实体大约 1000 行）组成 CoreData。服务器上的数据会发生变化，因此每次登录时，我都必须更新现有的 CoreData。找出记录是否存在并在需要时插入新记录的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T05:52:54.807

要在更新上聪明（不是每次都盲目更新），你需要在服务器端有一些智能。

我会做的一个想法。

1.  服务器有一个主表，记录了 4 个实体的修改日期的时间戳。它还具有公开主表的 API。每次 4 个实体之一发生更改时，主表的相应条目也必须更新。

2.  您也可以在应用程序端创建相同的主表副本。

3.  在应用程序启动时，您查询 1\. 中的 API，并与 2\. 中的值进行比较，以查看时间戳是否已在服务器端更新。

4.  如果是，则下载并替换相应的实体。

另一种允许更精细的控制。

1.  将时间戳列添加到服务器端的 4 个实体。每次添加/更新条目时，都会更新时间戳。

2.  为每个实体准备一个 API，该 API 仅过滤比指定时间戳更新的项目

3.  在应用程序启动时，您在 2\. 中查询 API 并进行更新。

第二种方法的漏洞是它无法处理服务器端的删除。也许你可以结合第一种方法来支持这一点。

# ckeditor - 如何在验证之前自动保存 inputRichText 内容

> ID：12719948
> 
> 赞同：0
> 
> 时间：2012-10-04T03:39:21.320
> 
> 标签：ckeditor, validation, icefaces, fckeditor, icefaces-3

我在使用 inputRichText 组件时遇到了一些问题（icefaces 3）

```
<ice:inputRichText  id="content" value="#{CchcDmFeedbackController.objFeedback.fbContent}"
       required="true" requiredMessage="This is required" skin="office2003" 
       styleClass="editor"  saveOnSubmit="true" toolbar="MyToolbar"
       customConfigPath="#{resource['js:CKConfig.js']}"/>   
<ice:message for="content"/> 
```

和我的 CKConfig.js

```
CKEDITOR.editorConfig = function( config )
{
   config.toolbar = 'MyToolbar';
   config.toolbar_MyToolbar = [['Bold','Italic', 'Underline'], ['Save']];
   config.contentsCss = '/css/CKStyle.css';
}; 
```

1.  此代码返回 javascript 错误，似乎找不到我的工具栏配置，我的 js 路径是正确的（我确定）

2.  虽然第一次使用 saveOnSubmit="true" 我提交我的表单，内容没有保存，验证器将它的内容捕获为空（显示验证消息），第二次提交表单它将通过，我认为它在保存内容之前验证（而不是保存之前和之后验证）

谁能帮我 ：（

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T02:26:16.630

对不起这篇文章。我想我在配置文件中遗漏了一些东西，它现在工作正常。我的新配置文件：

```
CKEDITOR.config.resize_maxWidth = "100%";
CKEDITOR.config.tabSpaces = 5;
CKEDITOR.config.defaultLanguage = 'vi';
CKEDITOR.config.toolbar = 'MyToolbar';
CKEDITOR.config.toolbar_MyToolbar =
    [
        [ 'Source','-','Save','Preview'],
        [ 'Cut','Copy','Paste','PasteText','PasteFromWord','-','Undo','Redo' ] ,
        [ 'Find','Replace','SelectAll' ] ,
        '/',                    
        [ 'Bold','Italic','Underline','-','Strike','Subscript','Superscript','-','RemoveFormat' ] ,
        [ 'NumberedList','BulletedList','-','JustifyLeft','JustifyCenter','JustifyRight','JustifyBlock' ] ,
        [ 'TextColor','BGColor' ],
        '/',        
        [ 'Format','Font','FontSize' ],
        ['Maximize', 'ShowBlocks' ] ,
        [ 'Link','Unlink'] , 
        [ 'Image','Smiley']             
    ]; 
```

和 xhtml

```
<ice:inputRichText  id="noidung" value="#{CchcDmFeedbackController.objFeedback.fbNoidung}" required="true" requiredMessage="Vui lòng nhập nội dung" skin="kama" styleClass="editor" saveOnSubmit="true" toolbar="MyToolbar"  customConfigPath="/resources/js/CKConfig.js"/> 
<h:message for="noidung"/> 
```

注意：我使用CK v3.5，在配置文件中不能使用组名，只是[]而不是{[]}并且在xhtml文件中，customConfigPath必须是静态url

# css-float - 水平滚动单页网站教程

> ID：12719949
> 
> 赞同：0
> 
> 时间：2012-10-04T03:39:25.737
> 
> 标签：css-float, horizontalscrollview

我很难找到一些好的资源，甚至是我正在尝试建立的那种网站的例子。

本质上，它是一个单页、水平滚动的站点，顶部和底部都有固定的页眉和页脚。而不是使用按钮或滚动条滚动，单击导航菜单中的链接会将页面移动到相应的部分，很可能使用 jQuery。

换句话说，为了清楚起见，页眉、页脚和背景始终保持在原位，并且左右移动的是主要内容部分。所以会有六个左右的浮动 div 堆叠在一行中。

我已经布置了那个基本框架，但我不知道如何让主要内容部分超出窗口大小，从而允许所有这些 div 排成一行。

这是我所拥有的粗略/极简主义演示：http: [//jsfiddle.net/U8ZYT/](http://jsfiddle.net/U8ZYT/)

我将不胜感激任何指向教程的链接、类似网站的示例或任何直接建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T03:48:43.993

尝试使用 jcarousel ..它很容易让它完全按照你的喜好去做，而且他们有一些很好的例子来帮助你入门

[http://sorgalla.com/jcarousel/](http://sorgalla.com/jcarousel/)

# c# - 在 C# 中调度方法运行而不是锁定

> ID：12719953
> 
> 赞同：1
> 
> 时间：2012-10-04T03:40:02.740
> 
> 标签：c#, multithreading, locking

我有一个从程序的多个区域调用的方法（我们称之为“CheckAll”），因此可以在第一次完成*之前*第二次调用它。

为了解决这个问题，我实现了一个“锁”（如果我理解正确的话），它会暂停第二个线程，直到第一个线程完成。

但是，我真正想要的是第二次调用立即返回调用方法（而不是暂停线程），并安排 CheckAll 在第一次完成后再次运行。

我可以设置一个计时器来执行此操作，但这似乎既麻烦又困难。有没有更好的办法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T03:52:18.293

简单/便宜的实施。

```
private Thread checkThread = null;
private int requests = 0;

void CheckAll()
{
 lock(SyncRoot){
    if (checkThread != null; && checkThread.ThreadState == ThreadState.Running)
    {  
        requests++;
        return;
    }else
    {
        CheckAllImpl();
    }
 }

}

void CheckAppImpl()
{
 // start a new thread and run the following code in it.
  checkThread  = new Thread(newThreadStart( () => {
 while (true)
 {

 // 1\. Do what ever checkall need to do.
 // 2.
     lock (SyncRoot)
     {
         requests--;
         if  (!(requests > 0))
            break;
     }
 }});
 checkThread.Start();
} 
```

顺便说一句，这可能有一些竞争条件。更好的实现应该是使用.NET 4 中引入的[ConcurrentQueue](http://msdn.microsoft.com/en-us/library/dd267265.aspx)，它可以为您处理所有的线程疯狂。

**更新：这是一个使用 ConcurrentQueue 的更“酷”的实现**（结果我们不需要 TPL。）

```
public class CheckAllService
{
    // Make sure you don't create multiple 
    // instances of this class. Make it a singleton.

    // Holds all the pending requests
    private ConcurrentQueue<object> requests = new ConcurrentQueue<object>();

    private object syncLock = new object();

    private Thread checkAllThread;

    /// <summary>
    /// Requests to Check All. This request is async, 
    /// and will be serviced when all pending requests 
    /// are serviced (if any).
    /// </summary>
    public void RequestCheckAll()
    {
        requests.Enqueue("Process this Scotty...");

        lock (syncLock)
        {   // Lock is to make sure we don't create multiple threads.
            if (checkAllThread == null || 
                checkAllThread.ThreadState != ThreadState.Running)
            {
                checkAllThread = new Thread(new ThreadStart(ListenAndProcessRequests));
                checkAllThread.Start();
            }
        }
    }

    private void ListenAndProcessRequests()
    {
        while (requests.Count != 0)
        {
            object thisRequestData;
            requests.TryDequeue(out thisRequestData);
            try
            {
                CheckAllImpl();
            }
            catch (Exception ex)
            {
                // TODO: Log error ?
                // Can't afford to fail.
                // Failing the thread will cause all 
                // waiting requests to delay until another 
                // request come in.
            }
        }
    }

    protected void CheckAllImpl()
    {
        throw new NotImplementedException("Check all is not gonna write it-self...");
        // TODO: Check All
    }
} 
```

**注意：**我使用真正的线程而不是 TPL 任务，因为任务不会保留真正的线程作为优化。当没有线程时，这意味着在您的应用程序关闭时，任何等待的 CheckAll 请求都将被忽略。（当我认为我非常聪明地可以在一个任务中调用我的日志记录方法时，我被这个咬得很厉害，忽略了几个关闭时的十几个日志记录。当优雅退出时，CLR 检查并等待任何等待线程。）

快乐的编码...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T09:39:47.793

使用单独的线程在同样等待信号量的循环中调用 CheckAll()。'PerformCheck()' 方法向信号量发出信号。

然后，您的系统可以从任何线程尽可能多地调用“PerformCheck()”，并且 CheckAll() 将运行的次数与 PerformCheck() 调用的次数完全相同，但不会阻塞 PerformCheck() .

没有标志，没有限制，没有锁定，没有轮询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T03:51:17.313

您可以为此设置一个标志。

当此 CheckAll() 方法运行时。在此方法的末尾，您可以为每个单独的方法放置一个标志。意味着如果该方法是从其他方法调用的让我们说 a() 然后在此之后立即从 b() 调用它然后>>>当从 a() 调用它时放置一个 flaga 变量（可能是全局的) 最后在 CheckAll() 中（将其分配给特定值）并根据 flaga 变量值在 b() 中给出条件。像这样的意思...

```
public a()
{
CheckAll();
} 

public b()
{
.
.
(put condition here for check when flaga=1 from the method CheckAll())
CheckAll();
}
public CheckAll()
{
.
.
.
flaga=1;
}
} 
```

# javascript - jQuery 就地编辑器使用 jQuery 自动完成输入字段

> ID：12719954
> 
> 赞同：3
> 
> 时间：2012-10-04T03:40:16.237
> 
> 标签：javascript, jquery, autocomplete, edit-in-place

# 背景

创建一个使用 Dave Hauenstein 的[就地编辑](http://code.google.com/p/jquery-in-place-editor/)和 jQuery 的[自动完成](http://jqueryui.com/demos/autocomplete/)插件的所见即所得编辑器。

# 源代码

该代码包含以下部分：HTML、就地编辑和自动完成。

## HTML

成为就地编辑文本字段的 HTML 元素：

```
<span class="edit" id="edit">Edit item</span> 
```

## 就地编辑

使用就地编辑插件的 JavaScript 代码：

```
 $('#edit').editInPlace({
    url           : window.location.pathname,
    hover_class   : 'inplace_hover',
    params        : 'command=update-edit',
    element_id    : 'edit-ac',
    on_edit       : function() {
      return '';
    }
  }); 
```

当用户点击相关元素`on_edit`时，自定义代码调用函数。`span`返回的值用于为文本输入字段设定种子。理论上，插件应该用类似于以下`span`的元素替换 DOM 中的元素：`input`

```
<input type="text" id="edit-ac" /> 
```

## 自动完成

自动完成代码：

```
 $('#edit-ac').autocomplete({
    source    : URL_BASE + 'search.php',
    minLength : 2,
    delay     : 25
  }); 
```

# 问题

相对于就地编辑代码的时间，自动完成代码的时间似乎不正确。

我认为就地编辑插件需要在字段添加到 DOM*后*`autocomplete`调用代码片段。*`input`*

 *# 问题

您将如何集成这两个插件，以便当用户单击就地编辑字段时，自动完成代码在就地编辑添加的 DOM 元素上提供自动完成功能？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T02:32:16.130

# 解决方案

通过指示代码将标识符附加到输入字段来修改 jQuery 就地编辑器源代码。

# jQuery 就地编辑器更新

本节详细介绍了所需的更新。

## 类型定义

在默认设置中提供新属性：

```
 editor_id:    "inplace_id", // default ID for the editor input field
  on_create:    null, // function: called after the editor is created 
```

## 输入名称和类

更改`inputNameAndClass`功能以使用`editor_id`设置：

```
 /**
   * Returns the input name, class, and ID for the editor.
   */
  inputNameAndClass: function() {
    var result = ' name="inplace_value" class="inplace_field" ';

    // DJ: Append the ID to the editor input element.
    if( this.settings.editor_id ) {
      result += 'id="' + this.settings.editor_id + '" ';
    }

    return result;
  }, 
```

## replaceContentWithEditor

更改`replaceContentWithEditor`函数以调用创建函数：

```
 replaceContentWithEditor: function() {
    var buttons_html  = (this.settings.show_buttons) ? this.settings.save_button + ' ' + this.settings.cancel_button : '';
    var editorElement = this.createEditorElement(); // needs to happen before anything is replaced
    /* insert the new in place form after the element they click, then empty out the original element */
    this.dom.html('<form class="inplace_form" style="display: inline; margin: 0; padding: 0;"></form>')
      .find('form')
        .append(editorElement)
        .append(buttons_html);

    // DJ: The input editor is part of the DOM and can now be manipulated.
    if( this.settings.on_create ) {
      this.settings.on_create( editorElement );
    }
  }, 
```

# 自动完成耦合

现在可以激活自动完成功能，并显示就地编辑。

## 联合通话

HTML 片段与以前相同。新的调用`editInPlace`类似于：

```
 $('#edit').editInPlace({
    url           : window.location.pathname,
    hover_class   : 'inplace_hover',
    params        : 'command=update-edit',
    editor_id     : 'edit-ac',
    on_create     : function( editor ) {
      $('#edit-ac').autocomplete({
        source    : URL_BASE + 'search.php',
        minLength : 2,
        delay     : 25
      });
    },
    on_edit       : function() {
      return '';
    }
  }); 
```

每当激活就地编辑器时，这会将自动完成功能附加到就地编辑器。*

# ruby-on-rails - Rails：臭名昭著的“current_user”从何而来？

> ID：12719958
> 
> 赞同：103
> 
> 时间：2012-10-04T03:41:13.287
> 
> 标签：ruby-on-rails

我最近一直在查看 Rails 并注意到有很多对`current_user`. 这仅来自设计吗？即使我使用设计，我是否必须自己手动定义它？是否有使用`current_user`的先决条件（例如是否存在会话、用户等）？

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2012-10-04T03:48:07.473

它由几个 gem 定义，例如 Devise

您需要将 user_id 存储在某处，通常在登录后的会话中。它还假设您的应用程序拥有并需要用户、身份验证等。

通常，它类似于：

```
class ApplicationController < ActionController::Base
  def current_user
    return unless session[:user_id]
    @current_user ||= User.find(session[:user_id])
  end
end 
```

这假设 User 类存在，例如`#{Rails.root}/app/models/user.rb`。

更新：当没有当前用户时避免额外的数据库查询。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-04T03:51:54.270

是的，`current_user`使用`session`. 如果您想推出自己的身份验证，您可以在应用程序控制器中执行类似的操作：

```
def current_user
  return unless session[:user_id]
  @current_user ||= User.find(session[:user_id])
end 
```

# c# - Server.MapPath 在 ASP.net MVC 中找不到路径的一部分

> ID：12719962
> 
> 赞同：0
> 
> 时间：2012-10-04T03:41:52.457
> 
> 标签：c#, asp.net-mvc

我有幻灯片，可以让我的本地文件夹中的图像显示在我的 Site.Master 页面中。

所以我用：

```
FileInfo[] files = new DirectoryInfo(Server.MapPath("~" + "/path/blahblah/")).GetFiles(); 
```

当我在本地运行项目时它对我来说很好，但现在我改变了我的项目 throw the port `http://195.155.10.521:8081`，然后它有一个错误`Could not find a part of the path 'D:\path\blahblah\'`。

感谢任何人都可以给我的任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T10:05:10.857

托管站点的端口号对于该方法并不重要`Server.MapPath`。所以尝试拆分方法调用以便更容易地识别问题：

```
var path = Server.MapPath("~/path/blahblah/");
var di = new DirectoryInfo(path);
var files = di.GetFiles(); 
```

如果您收到的错误消息是，`Could not find a part of the path 'D:\path\blahblah\'`那么这可能意味着该`D:\path\blahblah\`文件夹在您的服务器上不存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-04T05:30:55.077

```
 var path = Server.MapPath("~/Reproting/Cashstatement.pdf");
 byte[] FileBytes = System.IO.File.ReadAllBytes(path);
 return File(FileBytes, "application/pdf"); 
```

# if-statement - 单选按钮的 Grails If-else 条件

> ID：12719966
> 
> 赞同：1
> 
> 时间：2012-10-04T03:42:34.827
> 
> 标签：if-statement, radio-button, grails-2.0

我有 3 个单选按钮，当它们被选中时，会运行不同的查询。我不知道 if-else 条件如何适用于 grails 单选按钮，因为我对 grails 完全陌生。这是我的 gsp 页面。

```
<label>Search id:</label><input type = "text" name = "searchid1">
<input type ="submit" name ="search" value ="Go!">

<br>

<g:radio name="myGroup" value="input1"/>

<g:radio name="myGroup" value="input2"/>

<g:radio name="myGroup" value="input3"/> 
```

以及控制器站点上的查询..

```
String searchQ1 = "select * from alert_list where id = " + params.searchid1
def searchit1 = sql.rows(searchQ1)

String searchQ2 = "select * from Admin where id = " + params.searchid1
def searchit2 = sql.rows(searchQ2)

String searchQ3 = "select * from sec_user where id = " + params.searchid1
def searchit3 = sql.rows(searchQ3)

[searchit1: searchit1, searchit2: searchit2, searchit3: searchit3] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T05:10:04.487

您用于 GSP 的方法是正确的。但是，在控制器中您需要添加 IF-ELSE 语句。

```
if (request.getParameter("myGroup").equals("input1"))
        {

        println("duck")
        redirect (action: radio)

        }

        if (request.getParameter("myGroup").equals("input2"))
        {
            println("chicken")
            redirect (action: abc)

        } 
```

在您的控制器中添加 if-else 条件，您的问题将得到解决。

# azure - 在转换为 Web 角色的现有 ASP.NET MVC 站点中添加 WebRole.cs - 并调用它

> ID：12719967
> 
> 赞同：4
> 
> 时间：2012-10-04T03:42:59.953
> 
> 标签：azure, asp.net-mvc-4, azure-web-roles

我有一个在 Azure WebRole 中运行良好的 ASP.NET MVC 4 站点。ASP.NET MVC 项目是自行启动的，之后我向解决方案添加了一个 Azure 云服务项目，并将 ASP.NET 项目/站点添加为服务的“角色”之一（因此它显示在“角色”文件夹）。

我的问题是我想在 ASP.NET MVC 项目中使用 WebRole.cs 文件，但无论我尝试做什么，似乎在部署时，它永远不会被调用。OnStart 和 Run 的覆盖（我知道，绝不能离开循环）——这些显然永远不会被调用。

但是如果你启动一个新的 CloudService 项目并从一开始就添加一个 ASP.NET MVC 项目，它会自动在其中包含一个 WebRole.cs 文件，所以我的猜测是我需要在某个地方为 WebRole 配置一些东西.cs（实际上是继承 RoleEntryPoint 的 WebRole 类）被调用。那可能是什么？

```
using System;
using System.Web;
//using Microsoft.WindowsAzure.StorageClient;
using System.Diagnostics;
using System.Threading;

namespace Us.WebUI
{
    public class WebRole : Microsoft.WindowsAzure.ServiceRuntime.RoleEntryPoint
    {
        public override bool OnStart()
        {
            return true; //return base.OnStart(); // CALL THIS???
        }

        public override void Run()
        {
            while (true) {
                Thread.Sleep(TimeSpan.FromSeconds(30));
                try {
                    EmailFuncs.SendEmailToUs("An email from our WebRole?????", "Email me this, email me that.");
                }
                catch { }
            }
        }

    }
} 
```

更新：谢谢，问题已得到解答。但我要补充一点：在这样做时，虽然它显然可以正常工作（完全部署并在模拟器中），但突然间我在完全发布网站时遇到了问题。在 azure 发布耗时 3 小时后：

> 正在验证存储帐户“xyz”... > 正在上传包... > - 正在更新... [在这里停留了 3 小时]，它失败并出现以下错误：服务器遇到内部错误。请重试请求。所以我想知道的一件事是，我是否需要覆盖 WebRole.cs 中的 OnStop？

更新 2：之前的问题已修复，与此问题无关。实际上，我已经了解到：如果您在构建中生成了任何警告，Azure 通常不会使用它们，即使它们不会在本地或其他主机中造成问题。从那时起，我就更加认真地处理构建警告（但对此至关重要的是使用警告代码关闭您想忽略的许多警告类型！）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T10:56:22.093

向您的 Web 项目添加一个继承自 RoleEntryPoint 的类就足够了，它应该可以正常工作。您是否尝试在模拟器中设置断点？

您可能遇到的是**EmailFuncs.SendEmailToUs**需要来自 app/web.config 的信息，而该信息不可用。您需要知道您的**WebRole**类在不同的进程（不是您的 Web 应用程序）中运行，这意味着它没有使用您的 web.config。如果您希望 WebRole.cs 从配置文件中读取信息，您需要在[WaIISHost.exe.config中添加这些设置](http://blogs.msdn.com/b/windowsazure/archive/2010/12/02/new-full-iis-capabilities-differences-from-hosted-web-core.aspx)

# c# - 浏览器如何识别用户在 ASP.NET C# 中的断开连接/导航离开浏览器

> ID：12719968
> 
> 赞同：0
> 
> 时间：2012-10-04T03:43:07.743
> 
> 标签：c#, asp.net, session, browser, disconnect

假设 2 个玩家在 2 个不同的浏览器上玩游戏。游戏状态存储在会话变量中，每个浏览器都有不同的会话，但游戏对象需要两个玩家向前移动。游戏管理员确保两个不同的会话已登录，然后让玩家继续进入游戏页面。这将是一个多页游戏，具有登录、选择颜色和结束游戏。断开玩家连接的最简单方法是等到游戏结束，玩家可以选择他们不想再玩了。

如果一个玩家离开游戏页面怎么办，我们如何让另一个玩家知道游戏已经终止，所以我们可以干净地断开剩余玩家的连接，将他带回登录页面，我们在其中等待一个新玩家。浏览器如何监听两个会话之间的断开连接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T04:56:17.393

会话不在浏览器端维护。两个浏览器都不知道会话。您可以有多种策略来实现此结果

1.  有许多可用的客户端 javascripts 可以检测到用户正在离开页面并显示适当的警告或向服务器发送用户已退出页面的消息。他们还可以检测到浏览器窗口正在关闭。您可以使用其中之一。

2.  在服务器端，您必须检查用户的最后响应时间。当用户在预定义的时间内没有响应时，您可以认为他/她已断开连接。

3.  您可以在 asp.net 中配置会话超时。会话到期时，您还将在 global.asax 文件中获得一个事件。这样，您将能够确定用户已断开连接。

我建议您应该使用所有这三种方法的组合来获得结果。如果其中一个失败，另一个会发挥作用。

# c# - BackgroundWorker 线程必须是 STA

> ID：12719970
> 
> 赞同：3
> 
> 时间：2012-10-04T03:43:41.593
> 
> 标签：c#, wpf

我有一个BackgroundWorker来调用一个函数来在BackgroundWorker _DoWork做一个长的过程，当函数发生错误时，我会提示一个自定义的消息框：

```
 WPFMessageBoxResult result = WPFMessageBox.Show("Activation Fail", "Error!!", WPFMessageBoxButtons.OK, WPFMessageBoxImage.Error); 
```

以下异常发生在 WPFMessageBoxResult 类：

```
The calling thread must be STA, because many UI components require this. 
```

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T04:24:18.127

通常使用 Winforms/WPF，如果您需要与长时间运行的任务中的 UI 交互，您可以使用 Invoke() 跳转到 UI 线程。您可以从属于 UI 的任何对象调用调用，但请确保在调用范围内时只执行尽可能少的代码。由于此代码位于 UI 线程上，因此如果花费时间过长，它将阻塞/挂起 UI。

```
public void BackgroundWorkerMethod()
{
    try
    {
        // do work
    }
    catch (Exception e)
    {
        uiObject.Invoke(new Action(() => {
            // now you are on the UI thread
            Message.ShowMessage(e.Message);
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-04T03:51:33.567

您不应尝试从后台线程与任何 UI 组件进行交互。

一种方法可能是在 doWork 方法中捕获异常并将其分配给后台工作人员的 result 属性，然后检查该结果是否是一种异常类型，或者如果您没有将结果用于其他任何事情，则检查该结果是否为 null。然后在 backgroundWorker_completed 事件中检查它。

```
BackgroundWorker_DoWork(sender, )
{
    try
    {
       // do work        
    }
    catch (Exception ex)
    {
         BackgroundWorker w = sender as BackgroundWorker;
         if (w != null)
             w.Result = ex;
    }
} 
```

然后

```
BackgroundWorker_Completed()
{
    if (s.Result != null && e.Result is Exception)
    {
       Exception ex = e.Result as Exception;
       // do something with ex
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-02-15T19:28:05.603

您必须使用此方法

```
 void BGW_DoWork(object sender, DoWorkEventArgs e)
    {
        try
        {
            Dispatcher.BeginInvoke(new Action(() =>
            {
                 Button btn = new Button();
                 btn.Width = 100;
                 btn.Height = 50;
                 btn.Content = "Test";
                 myG.Children.Add(btn);
            }
            ));
        }
            catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }

    } 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-04T03:51:10.087

您的后台线程只是一个工作线程，而不是用户界面线程。WPF 和 WinForms 都要求将执行用户界面操作的线程标记为 STA（单线程单元），因为用户界面代码不是线程安全的。它们还要求您添加消息泵，以便发送 Windows 消息。

我建议不要在工作线程中显示消息框，而是向主用户界面线程发送消息并让该线程显示消息框。为此，您应该将对 Dispatcher 的引用从主 UI 线程传递到工作线程。然后使用 Dispatcher.BeginInvoke 请求在主线程上回调委托。

或者，您可以等待后台线程完成，然后检查结果并向用户显示适当的答案。无论哪种方式，工作线程都不应该直接与用户界面交互。

# php - 获取 SQL 数据库信息到动态创建的文本框

> ID：12719972
> 
> 赞同：0
> 
> 时间：2012-10-04T03:43:53.233
> 
> 标签：php

您好我有一个动态创建的文本框来从数据库中获取值。代码中的具体行如下，它工作正常；

```
<input name='routename'  class='colr' type='text' id='routename' size='20' maxlength='40' value=".$row['route']."></td> 
```

我的数据库有一个值“colombo/srilanka”，当结果加载到文本框时，它只捕获了“colombo/”，而“srilanka”丢失了。换句话说，空格后的文本不会加载到文本框中。有人可以帮我解决问题吗？

感谢您的关注！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T03:45:53.543

尝试[htmlentities()](http://php.net/manual/en/function.htmlentities.php)：

```
echo "<input name='routename'  class='colr' type='text' id='routename' size='20' maxlength='40' value='".htmlentities($row['route'])."' /></td>"; 
```

当您将任何内容从 PHP 回显到 HTML 中时，您应该始终使用 htmlentities 包装字符串，以确保输出的字符串对于 HTML 显示是安全的（不会无意中将标记写入页面）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T03:46:52.013

你错过了 的引号，`value`不要忘记使用`htmlspecialchar`or `htmlentities`。

```
"<input name='routename'  class='colr' type='text' id='routename' size='20' maxlength='40' value='".htmlspecialchar($row['route'])."'></td>" 
```

# java - 如何将字符串作为代码运行？

> ID：12719978
> 
> 赞同：0
> 
> 时间：2012-10-04T03:44:39.743
> 
> 标签：java, string, execute

> **可能重复：**
> [将字符串转换为代码](https://stackoverflow.com/questions/935175/convert-string-to-code)

我有一个程序需要能够将字符串作为代码执行。例如，我会有一个字符串，内容为：

```
public void do(int a, int b){
a++;
b--;
System.out.println(a);
System.out.println(b);
} 
```

现在，如何让程序执行该字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T03:52:57.643

您可以将此字符串包装在一个类中并使用[Java Compiler API](http://docs.oracle.com/javase/6/docs/api/javax/tools/JavaCompiler.html)对其进行编译。您必须运行 JDK 而不是 JRE。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T03:49:05.943

看到这个[类似的问题](https://stackoverflow.com/questions/2605032/using-eval-in-java)

这个简单的答案是，这在 Java 中无法做到。您可以通过尝试调用 javac 编译器来想出一些 hacky 方法，但我不确定您将如何真正加载或使用它。

在一些脚本语言中，比如 Javascript 和 Lua，你可以使用 'eval' 类型的函数来尝试加载你的字符串并执行它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T03:57:05.533

我不完全确定（我已经很久没有使用它了），但您也许可以使用[BeanShell](http://www.beanshell.org)来执行作为字符串的 Java 代码。查看[文档](http://www.beanshell.org/manual/syntax.html#Standard_Java_Syntax)以获取一些示例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T04:04:24.950

我认为问题是如何运行这个程序？答案是它需要包含在一个类定义中，以及一个“静态主”函数，以便 java 命令行工具可以在编译后运行它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-04T04:12:59.280

看看[Koala Dynamic Java](http://old.koalateam.com/djava/)，它接受文本并动态编译和运行它。

# javascript - 在按钮活动的新选项卡中打开链接

> ID：12719989
> 
> 赞同：0
> 
> 时间：2012-10-04T03:45:56.920
> 
> 标签：javascript, html, css

我试图在我的网站上有一个按钮，当它处于活动状态时（单击一次）将目标添加`_blank`到`href`具有特定类的链接，以便它们在新选项卡中打开。

这是按钮的代码

```
 <li id="toolbar-display">
        <dl>
        <dt>Display</dt>
        <dd id="toolbar-display-newtab" class="first last"><span>New Tab</span></dd>
        </dl>
    </li> 
```

然后这是我想添加的 href 链接类`_blank`。

```
 <a class="item-link" href="url"> 
```

因此，为此，我使用从[http://jsfiddle.net/UJMgQ/2/修改的以下 javascript](http://jsfiddle.net/UJMgQ/2/)

```
 <script type="text/javascript">
        $(function () {
        $('#toolbar-display-newtab').click(function () {
        if ($(this).toggleClass('active')) {
        $('.item-link').attr('target', '_blank');
        } else {
        $('.item-link').removeAttr('target');
        }
        });
        });
    </script> 
```

代码看起来是正确的，但不幸的是它不起作用，此时我不清楚它是没有检测到按钮的活动状态还是无法添加`_blank`. 任何帮助将不胜感激 =)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T04:07:11.350

我不确定 toggleClass() 返回什么，但根据我的测试，它没有为您提供可用于 if else 条件的布尔值。

为什么不尝试[hasClass()](http://api.jquery.com/hasClass/)来检测是否已经设置了活动类，然后在检测到它之后使用 toggleClass。

我尝试重新编写您的帖子，但我不确定您的逻辑是否正确。

```
$(function () {
    $('#toolbar-display-newtab').click(function () {
        if ($(this).hasClass('active')) {
            $('.item-link').attr('target', '_blank');
        } else {
            $('.item-link').removeAttr('target');
        }
        $(this).toggleClass('active');
    });
}); 
```

# apache - Apache IP 虚拟主机

> ID：12719992
> 
> 赞同：2
> 
> 时间：2012-10-04T03:47:43.730
> 
> 标签：apache, apache2, virtualhost

服务器有两个IP，新的centos min install。Apache 正在工作，两个 ips 都加载 Apache 测试页面。www.domain.com 和 domain.com 都解析为第二个 IP。

我希望第一个 IP (192.168.0.1) 加载 Apache 测试页面，这工作正常

我希望第二个 IP（192.168.0.2）在 /home/site/www 中加载网站

目前，当我们转到 domain.com 或 www.domain.com 或第二个 IP 时，它会加载 apache 测试页面而不是站点，这是我们的配置。此外，我将 IP 列为 192 而不是真实 ip。我错过了什么？为什么 192.168.0.2 不加载 /home/site/www 而不是 Apache 测试页面？

```
ServerRoot "/etc/httpd"
Listen 80
ServerName 192.168.0.1:80
DocumentRoot "/var/www/html"
<Directory "/var/www/html">

NameVirtualHost 192.168.0.2:80

<VirtualHost 192.168.0.2:80>
DocumentRoot /home/site/www
ServerName mydomain.com
ServerAlias *.mydomain.com
ErrorLog logs/mydomain.com-error_log
CustomLog logs/mydomain.com-access_log common
</VirtualHost> 
```

**更新**

修复

chcon -R --reference=/var/www /home/site/www

SELinux 需要在其上设置正确的权限，使用引用将相同的权限复制到我的新文件夹

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T05:12:11.520

试试这个：

```
ServerRoot "/etc/httpd"
Listen 80
ServerName 192.168.0.1:80

NameVirtualHost 192.168.0.1:80
NameVirtualHost 192.168.0.2:80

<VirtualHost 192.168.0.1:80>
DocumentRoot /var/www/html
ServerName mydomain.com  #change accordingly
ServerAlias *.mydomain.com
ErrorLog logs/mydomain.com-error_log
CustomLog logs/mydomain.com-access_log common
</VirtualHost>

<VirtualHost 192.168.0.2:80>
DocumentRoot /home/site/www
ServerName mydomain2.com
ServerAlias *.mydomain2.com
ErrorLog logs/mydomain2.com-error_log
CustomLog logs/mydomain2.com-access_log common
</VirtualHost> 
```

不要忘记在 apache 上应用更改。 `service httpd reload`或类似的命令。此外，请确保该目录`/var/www/html`至少具有 apache 用户的读取权限。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-04T03:54:21.237

您缺少 NameVirtualHost 指令。

```
 NameVirtualHost 192.168.0.2:80 
```

我还强烈建议也放入目录指令。

# asp.net - 如何解密 FormsAuthenticationTicket？

> ID：12719993
> 
> 赞同：1
> 
> 时间：2012-10-04T03:47:52.403
> 
> 标签：asp.net

为了调试生产问题，我需要一个工具来解密身份验证 cookie。我写了一个快速脚本来使用FormAuthentication对其进行解密。本质是

```
FormsAuthenticationTicket authTicket = FormsAuthentication.Decrypt(source.Text); 
```

服务器设置了 machineKey，我在这个应用程序中使用了相同的密钥。我正在使用 Fiddler 获取 cookie 文本。但是，在使用 FormAuthentication.Decrypt 时，我总是遇到无法验证异常。cookie 设置为 HttpOnly。

我错过了什么吗？

注意：有许多类似的问题，但到目前为止没有一个答案对我有帮助，因此决定发布一个新问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T05:22:17.183

它似乎与机器或某种机器相关的标识符有关。当我在与生产服务器相同的服务器上运行示例脚本时（即生成 cookie 的位置）。解密工作正常。我还没有深入研究为什么会这样，但快速反映

```
System.Web.Configuration.MachineKeySection.EncryptOrDecryptData 
```

告诉 Unable_to_validate_data 几乎所有异常都会被抛出。

# javascript - 如何改变所有通过单击按钮并稍后将其更改回其值？

> ID：12719995
> 
> 赞同：0
> 
> 时间：2012-10-04T03:48:05.513
> 
> 标签：javascript, jquery, html

问题：我有一个包含许多`<input>`字段的页面（只是说所有都是文本字段）我想要一个按钮，当点击它时，所有输入字段都将变成纯文本。例如`<input type="text" value="123" />`变成123，如果我点击另一个按钮，文本将变回例如123变成`<input type="text" value="123" />`

是否有一种自动方法来扫描所有`<input>`s 并使用 javascript 和 jquery 一次性更改它们。

谢谢！

* * *

已编辑 看来你们的想法是错误的。再次阅读我写的内容：例如`<input type="text" value="123" />`变为 123

我已经有 value="123" 了，为什么还要重新设置这个值？？？

我想要的是例如

`<body><input type="text" value="123" /><input type="text" value="456" /></body>`变成`<body>123456</body>`然后`<body>123456</body>`回到`<body><input type="text" value="123" /><input type="text" value="456" /></body>`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T04:27:31.750

用这个去一种方式，

```
$('input').replaceWith(function(){
    return $('<div />').text(this.value).addClass('plain-text');
});​​​ 
```

这个去另一个。

```
$('.plain-text').replaceWith(function(){
    return $('<input />').val($(this).text());
}); 
```

​</p>

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T05:34:36.487

检查此链接[http://jsfiddle.net/Evmkf/2/](http://jsfiddle.net/Evmkf/2/)

## HTML：

```
<div id='divInput'>
    <input type="text" value='123' />
    <br/>
    <input type="text" value='456' />
    <br/>
    <input type="text" value='789' />
</div>
<div id='plainText' style='display:none'></div>
<div>
    <input type="button" id='btnPlain' value='Make It Plain' />
    <input type="button" id='btnInput' value='Make It Text' />
</div>​ 
```

## Javascript：

```
$("#btnPlain").bind('click',function(){
  $("#plainText").html('');
  $("#divInput input[type=text]").each(function(index){
    $("#plainText").append('<span>'+$(this).val()+'</span>');
    $("#divInput").hide();
    $("#plainText").show();
  });
});

$("#btnInput").bind('click',function(){
  $("#divInput").html('');
  $("#plainText span").each(function(index){
    $("#divInput").append('<input type="text" value="'+$(this).text()+'"/><br/>');
    $("#plainText").hide();
    $("#divInput").show();
  });
}); 
```

​</p>

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T04:53:09.627

试试[这个小提琴](http://jsfiddle.net/sushanth009/keWpt/)

```
$(function() {
    var arr = [];
    $('#btn').on('click', function() {
        var $text = $('#inp input[type="text"]');
        if( $text.length > 0){
            $text.each(function(i) {
                arr[i] = this.value;
            });
            $('#inp').html(arr.join());
        }
        else{
            if(arr.length <= 0){
            }
            else{ // Add Inputs here
                var html = '';
                $.each(arr, function(i){
                    html += '<input type="text" value="' + arr[i]+ '"/>'
                });
                 $('#inp').html(html); 
            }
        }
    });
}); 
```

​</p>

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-04T04:28:38.623

您需要为每个输入创建一个隐藏元素，然后使用 jquery 隐藏输入，显示隐藏元素并为其提供输入值。

```
<input type="text" value="123" id="input_1" />
<div id="div_1" style="display:none;"></div>

$("#div_1").html($("input_1").val());
$("#input_1").hide();
$("#div_1").show(); 
```

# css - CSS 宽度 100%，包括溢出

> ID：12719997
> 
> 赞同：25
> 
> 时间：2012-10-04T03:48:08.813
> 
> 标签：css, overflow

由于各种原因，我在 a 中嵌套`ol`了一个`div`，其中列表的内容超出了容器的大小。

因为容器的宽度是固定的，所以列表元素的背景不会超出容器的可视区域，但内容可以正常滚动。

我创建了一个[jsFiddle](http://jsfiddle.net/zNv5u/1/)，显示了我试图解释的简化示例。

我希望包含元素的宽度与溢出内容的宽度相匹配。在 jsFiddle 中，这意味着红色背景不会在中途被切断。

谢谢。

```
div
{
    border: 1px solid black;
    margin: 33% auto;
    overflow: scroll;
    white-space: nowrap;
    width: 100px;
}

div > ol
{
   background: red;
   width: 100%;
}​ 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-04T04:40:44.343

只需使用`display: inline-block`. 您可以在 W3C 规范中阅读更多内容。

在这两种元素样式中替换`width:100%`为。`display:inline-block`

# java - 如何计算 ArrayList 中的唯一值？

> ID：12719998
> 
> 赞同：9
> 
> 时间：2012-10-04T03:48:11.810
> 
> 标签：java, string, arraylist, unique

我必须使用 Java 计算文本文档中唯一单词的数量。首先，我必须去掉所有单词中的标点符号。我使用`Scanner`该类扫描文档中的每个单词并输入一个 String `ArrayList`。

所以，下一步就是我遇到问题的地方！如何创建一个可以计算数组中唯一字符串数量的方法？

例如，如果数组包含apple、bob、apple、jim、bob；此数组中唯一值的数量为 3。

* * *

```
public countWords() {
    try {
        Scanner scan = new Scanner(in);
        while (scan.hasNext()) {
            String words = scan.next();
            if (words.contains(".")) {
                words.replace(".", "");
            }
            if (words.contains("!")) {
                words.replace("!", "");
            }
            if (words.contains(":")) {
                words.replace(":", "");
            }
            if (words.contains(",")) {
                words.replace(",", "");
            }
            if (words.contains("'")) {
                words.replace("?", "");
            }
            if (words.contains("-")) {
                words.replace("-", "");
            }
            if (words.contains("‘")) {
                words.replace("‘", "");
            }
            wordStore.add(words.toLowerCase());
        }
    } catch (FileNotFoundException e) {
        System.out.println("File Not Found");
    }
    System.out.println("The total number of words is: " + wordStore.size());
} 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-04T03:50:11.003

你可以使用 Set 吗？如果是这样，您的[HashSet](http://docs.oracle.com/javase/6/docs/api/java/util/HashSet.html)可能会解决您的问题。`HashSet`不接受重复。

```
HashSet noDupSet = new HashSet();
noDupSet.add(yourString);
noDupSet.size(); 
```

`size()`方法返回唯一单词的数量。

如果你必须真的`ArrayList`只使用，那么实现的一种方法可能是，

```
1) Create a temp ArrayList
2) Iterate original list and retrieve element
3) If tempArrayList doesn't contain element, add element to tempArrayList 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2016-02-05T12:12:50.023

从**Java 8**开始，您可以使用[**`Stream`**](https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html)：

在您添加元素后`ArrayList`：

```
long n = wordStore.stream().distinct().count(); 
```

它将您转换`ArrayList`为流，然后仅计算不同的元素。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-04T03:58:53.660

我建议使用[HashSet](http://docs.oracle.com/javase/6/docs/api/java/util/HashSet.html)。`add`这会在调用方法时自动过滤重复项。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-04T04:06:23.273

尽管我相信 set 是最简单的解决方案，但您仍然可以使用原始解决方案，只需添加一个 if 语句来检查列表中是否已经存在值，然后再进行添加。

```
if( !wordstore.contains( words.toLowerCase() )
   wordStore.add(words.toLowerCase()); 
```

那么列表中的单词数就是唯一单词的总数（即： wordStore.size() ）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-09-26T16:03:23.783

> 这种通用解决方案利用了 Set 抽象数据类型不允许重复的事实。Set.add() 方法特别有用，因为它返回一个布尔标志，指示“添加”操作是否成功。HashMap 用于跟踪每个原始元素的出现。该算法可适用于此类问题的变体。该解决方案产生 O(n) 性能..

```
public static void main(String args[])
{
  String[] strArray = {"abc", "def", "mno", "xyz", "pqr", "xyz", "def"};
  System.out.printf("RAW: %s ; PROCESSED: %s \n",Arrays.toString(strArray), duplicates(strArray).toString());
}

public static HashMap<String, Integer> duplicates(String arr[])
{

    HashSet<String> distinctKeySet = new HashSet<String>();
    HashMap<String, Integer> keyCountMap = new HashMap<String, Integer>();

    for(int i = 0; i < arr.length; i++)
    {
        if(distinctKeySet.add(arr[i]))
            keyCountMap.put(arr[i], 1); // unique value or first occurrence
        else
            keyCountMap.put(arr[i], (Integer)(keyCountMap.get(arr[i])) + 1);
    }     

    return keyCountMap; 
} 
```

结果：

RAW：[abc，def，mno，xyz，pqr，xyz，def]；已处理：{pqr=1，abc=1，def=2，xyz=2，mno=1}

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-04T03:51:25.070

您也可以创建 HashTable 或 HashMap。键将是您的输入字符串，值将是该字符串在您的输入数组中出现的次数。O(N) 时间和空间。

解决方案2：

对输入列表进行排序。相似的字符串将彼此相邻。比较 list(i) 和 list(i+1) 并计算重复的数量。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-04T04:06:11.387

简而言之，您可以按以下方式进行...

```
 ArrayList<String> duplicateList = new ArrayList<String>();
    duplicateList.add("one");
    duplicateList.add("two");
    duplicateList.add("one");
    duplicateList.add("three");

    System.out.println(duplicateList); // prints [one, two, one, three]

    HashSet<String> uniqueSet = new HashSet<String>();

    uniqueSet.addAll(duplicateList);
    System.out.println(uniqueSet); // prints [two, one, three]

    duplicateList.clear();
    System.out.println(duplicateList);// prints []

    duplicateList.addAll(uniqueSet);
    System.out.println(duplicateList);// prints [two, one, three] 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-08T22:16:51.607

```
public class UniqueinArrayList {

    public static void main(String[] args) { 
        StringBuffer sb=new StringBuffer();
        List al=new ArrayList();
        al.add("Stack");
        al.add("Stack");
        al.add("over");
        al.add("over");
        al.add("flow");
        al.add("flow");
        System.out.println(al);
        Set s=new LinkedHashSet(al);
        System.out.println(s);
        Iterator itr=s.iterator();
        while(itr.hasNext()){
            sb.append(itr.next()+" ");
        }
        System.out.println(sb.toString().trim());
    }

} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-05-28T12:04:51.663

3种不同的可能解决方案：

1.  按照上面的建议使用 HashSet。

2.  创建一个临时`ArrayList`并仅存储唯一元素，如下所示：

    ```
    public static int getUniqueElement(List<String> data) {
        List<String> newList = new ArrayList<>();
        for (String eachWord : data)
        if (!newList.contains(eachWord))
            newList.add(eachWord);
        return newList.size();
    } 
    ```

3.  Java 8 解决方案

    ```
    long count = data.stream().distinct().count(); 
    ```

# java - 无法从 DB hql 检索项目

> ID：12719999
> 
> 赞同：0
> 
> 时间：2012-10-04T03:48:16.373
> 
> 标签：java, hibernate

有这个代码：

```
Session session = HibernateUtil.getSessionFactory().getCurrentSession();
session.beginTransaction();
Query query = session.createQuery("from DBUser where id=1");
    for(Iterator it=query.iterate();it.hasNext();){
    Object[] row = (Object[]) it.next();
    System.out.println("ID: " + row[0]);
    System.out.println("Name: " + row[1]);
    System.out.println("Amount: " + row[2]);
} 
```

发生错误：`java.lang.ClassCastException: com.mycompany.app.DBUser cannot be cast to [Ljava.lang.Object;`

可能有更简单的方法从表中检索单个元素？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T03:56:49.480

在这种情况下，hql 返回映射的类型。您的代码应如下所示：

```
Session session = HibernateUtil.getSessionFactory().getCurrentSession();
session.beginTransaction();
Query query = session.createQuery("from DBUser where id=1");
    for(Iterator it=query.iterate();it.hasNext();){
    DBUser row = (DBUser) it.next();
    System.out.println("ID: " + row.getId());
    System.out.println("Name: " + row.getName());
    System.out.println("Amount: " + row.getAmount());
} 
```