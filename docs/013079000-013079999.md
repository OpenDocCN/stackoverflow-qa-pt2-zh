# StackOverflow 问答 13079000-13079999

# java - 在 Java Xstream 中如何更改对象内部的别名？

> ID：13079000
> 
> 赞同：1
> 
> 时间：2012-10-25T23:52:52.847
> 
> 标签：java, xml, xstream

我正在使用 xStream 将一个非常简单的图形序列化为 XML，我的输出与我想要的非常接近：

```
<grafo>
  <nodo id="1">
   <nodo id="2"/>
  </nodo>
  <nodo id="2">
    <nodo id="3"/>
    <nodo id="4"/>
  </nodo>
  <nodo id="3">
    <nodo id="5"/>
  </nodo>
  <nodo id="4">
    <nodo id="6"/>
  </nodo>
 </grafo> 
```

但是我需要在输出中使另一个节点（一条边）内的每个节点都以别名“child”而不是“nodo”出现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T00:56:17.820

我不相信你可以用简单的别名来做到这一点。但是您可以使用如下所示的自定义序列化程序来做到这一点。xstream 文档有一个很好的[转换器教程](http://xstream.codehaus.org/converter-tutorial.html)，其中包含有关如何注册自定义转换器的详细信息。

```
public class Nodo {
  String id;
  ArrayList<Nodo> children = new ArrayList<>();
}

public class NodoConverter implements Converter {

  /** {@inheritDoc} */
  @Override
  public boolean canConvert(Class arg0) {
    return arg0.equals(Nodo.class);
  }

  /** {@inheritDoc} */
  @Override
  public void marshal(Object arg0, HierarchicalStreamWriter writer, MarshallingContext arg2) {
    marshal((Nodo) arg0, writer, arg2, "nodo");
  }

  private void marshal(Nodo nodo, HierarchicalStreamWriter writer, MarshallingContext ctx, String elname) {
    writer.addAttribute("id", nodo.getId());
    for (Nodo child : nodo.children) {
      writer.startNode("child");
      ctx.convertAnother(child);
      writer.endNode();
    }
  }

  /** {@inheritDoc} */
  @Override
  public Object unmarshal(HierarchicalStreamReader reader, UnmarshallingContext ctx) {
    Nodo nodo = new Nodo();
    nodo.setId(reader.getAttribute("id"));
    while (reader.hasMoreChildren()) {
      reader.moveDown();
      Nodo child = (Nodo) ctx.convertAnother(nodo, Nodo.class);
      nodo.children.add(child);
      reader.moveUp();
    }
  }

} 
```

# ant - Ant scp 和 sshexec 任务的 knownhosts

> ID：13079002
> 
> 赞同：5
> 
> 时间：2012-10-25T23:53:06.017
> 
> 标签：ant, ssh, build-automation, jsch

我的问题类似于这里问的问题： [Ant scp task failure](https://stackoverflow.com/questions/6356212/ant-scp-task-failure)

> 构建失败 com.jcraft.jsch.JSchException: 拒绝 HostKey: ....

我的问题是**为什么在我的 knownhosts 文件中找不到密钥？**

无论我拥有什么样的 known_hosts 文件，主机密钥都会被拒绝。通过 ssh 连接可以正常工作，并添加相关条目，但可能`jsch`无法读取`known_hosts`OpenSSH 生成的文件？

Ant 文档提到 knownhosts 文件需要是 SSH2 格式，而不是 SSH1。具有讽刺意味的是，来自 OpenSSH 的 SSH2 格式 known_hosts 文件应该是*`~/.ssh/known_hosts2`*，但 knownhosts 的默认值是`~/.ssh/known_hosts`.

由 SSH2 创建的已知主机文件位于 中`~/.ssh2/knownhosts/`，因此将其排除在预期格式之外可能是安全的。到目前为止，我一直无法让 OpenSSH 创建*`known_hosts2`*文件，并且手册页在那里也没有太大帮助。那么文档实际上意味着文件需要采用 SSH2 格式是什么意思？

我已经尝试过`dsa`密钥`rsa`，但都不起作用（都可以使用 OpenSSH）。

我已经搜索了两天，我找到的唯一答案是' `set trust="true`'。是的，这可以使任务发挥作用，但并非对安全性视而不见。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T19:03:21.113

这是我发现的一种适用于更新版本的 jch 的格式：

```
[xx.xx.xx.xx]:22 ssh-rsa ....... 
```

在旧版本中，它就像：

```
xx.xx.xx.xx ssh-rsa ...... 
```

即没有方括号，也没有端口号。（如果您使用端口 22，不确定是否需要端口号，但我使用分配给 SSH 的非默认端口的服务器对其进行了测试。并且，如果不明显，`xx.xx.xx.xx`应该是服务器的 IP 地址，或主机名或其他任何东西。）

我通过让 JCraft/jsch 库为我生成 known_hosts 文件找到了这种格式。如果您访问[www.jcraft.com](http://www.jcraft.com/)，您可以下载 jsch 源代码的 zip 文件和一些示例。要么构建源代码来制作 jar，要么下载现成的 jar。我解压缩了 zip 下载文件，然后将 jar 文件放在同一个目录中。

有一个`examples`文件夹包含`KnownHosts.java`. 您需要编译该文件然后运行它 - 它会询问您的 known_hosts 文件（只需先在默认位置（`~/.ssh/known_hosts`）创建一个空文件并选择它。然后它会询问您连接到服务器的详细信息.. . 输入这些，例如`sshusername@xx.xx.xx.xx`，程序将尝试连接，然后为您填写 known_hosts 文件。

为了方便像我这样不记得如何从命令行执行操作的 Windows 用户，这里是编译和运行该`KnownHosts.java`文件所需的内容：

首先，导航到目录（已解压缩并将 jar 文件放入其中，如上所述）。

然后运行：

`javac -cp jsch-0.1.49.jar examples/KnownHosts.java`

编译 KnownHosts.java。接着：

`java -cp "examples;jsch-0.1.49.jar" KnownHosts`

运行它。按照上面的说明操作，您应该有一个工作的 known_hosts 文件。

最后一点：KnownHosts 程序假定端口为 22。我对其进行了编辑以允许我输入类似的内容，`sshusername@xx.xx.xx.xx:8888`以便我可以指定具有自定义端口的服务器并使其按上述方式工作。在 KnownHosts.java 的源代码中，我查找了如下行：

`Session session=jsch.getSession(user, host, 22);`

并将其替换为：

```
int port = 22;
final int colonIndex = host.indexOf(':');
if (colonIndex > -1) {
    final String[] split = host.split(":");
    host = split[0];
    port = Integer.parseInt(split[1]);
}
Session session=jsch.getSession(user, host, port); 
```

然后编译并运行如上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T17:16:58.123

sshexec ant 任务默认在 ${user.home}/.ssh/known_hosts 中查找文件“known_hosts”

验证“user.home”系统属性的值。可能它指向了意想不到的地方。或者在 ant 任务的属性中明确提供“knownhosts”值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T17:52:32.003

您可能对以下两个参数感兴趣：

*   `trust`：如果设置为*true*将信任未知主机。默认设置为*false*。
*   `knownhosts`：设置为*已知主机*文件的位置。

第一个将允许您将任务设置为不检查它是否是已知主机。第二个将允许您指定包含已知主机的文件。这样，您可以将其指定为`${user.home}/.ssh/known_hosts2`并覆盖默认值。

顺便说一句，这样做的一个好方法是使用这些值的属性，然后使用属性文件来覆盖这些属性：

```
[...]
<property name="build.properties" value="build.properties"/>
<property file="${build.properties}"/>

<!-- Can be overridden via 'build.properies' file -->
<property name="knownhosts.file" value="${user.home}/.ssh/knownhosts"/>

<property name="remote.host" value="foo-system"/>
[...]

    <scp file="${copy.this.file}"
       todir="${user}@{host}:${remote.dir}"
       knownhosts="${knownhosts.file}"/>
[...] 
```

# numpy - 优化 Python KD 树搜索

> ID：13079010
> 
> 赞同：5
> 
> 时间：2012-10-25T23:53:50.227
> 
> 标签：numpy, scipy, nearest-neighbor, kdtree

Scipy ( [http://www.scipy.org/](http://www.scipy.org/) ) 提供了两个 KD Tree 类；KDTree 和 cKDTree。

cKDTree 比 KDTree 快得多，但可定制性和可查询性较差（据我从文档中得知）。

**这是我的问题：** 我有一个包含 300 万个二维 (X,Y) 点的列表。我需要从每个点返回 X 个单位距离内的所有点。

使用 KDtree，有一个选项可以做到这一点：`KDtree.query_ball_tree()`它生成一个列表，其中包含 X 单位内的所有点与其他点的列表。但是：这个列表很大，很快就填满了我的虚拟内存（*大约 7.44 亿条*）。

**潜在的解决方案#1：**有没有办法在写入时将此列表解析为文本文件？

**潜在解决方案#2：**我尝试使用 for 循环（对于列表中的每个点），然后通过使用：`KDtree.query_ball_point()`. 但是：这需要很长时间，因为它需要运行数百万次查询。是否有与此 KDTree 工具等效的 cKDTree？

**潜在的解决方案＃3：**击败我，其他人有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T08:41:49.137

从 scipy 0.12 开始，两个 KD Tree 类都具有特征奇偶性。引用其[公告](http://mail.scipy.org/pipermail/scipy-user/2013-April/034427.html)：

> # cKDTree 功能齐全
> 
> KDTree 的 Cython 版本，cKDTree，现在功能齐全。cKDTree 中的大多数操作（构造、查询、query_ball_point、query_pairs、count_neighbors 和 sparse_distance_matrix）比 KDTree 快 200 到 1000 倍。需要注意的是，cKDTree 与 KDTree 具有完全相同的界面，并且可以用作直接替代品。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T00:16:13.693

尝试[`KDTree.query_ball_point`](http://docs.scipy.org/doc/scipy/reference/generated/scipy.spatial.KDTree.query_ball_point.html)改用。它需要一个点*或点数组*，并在输入点的给定距离内生成点。

您可以使用此功能执行批量查询。例如，一次给它 100000 个点，然后将结果写入文件。像这样的东西：

```
BATCH_SIZE = 100000
for i in xrange(0, len(pts), BATCH_SIZE):
    neighbours = tree.query_ball_point(pts[i:i+BATCH_SIZE], X)
    # write neighbours to a file... 
```

# css - 指定 Div 的优先级

> ID：13079017
> 
> 赞同：4
> 
> 时间：2012-10-25T23:54:49.883
> 
> 标签：css

我有一个

```
<div class="banner-right"> 
```

和一个

```
<div class="logo"> 
```

Div 类徽标与横幅右侧重叠，但问题是右侧横幅覆盖了徽标。有没有办法设置标志说它更重要，它会显示在横幅上？

```
div.logo
{
    display: block;
    position: absolute;
    top: 11px;
    left: 483px;
    margin-left: 472px;
    width: 214px;
    height: 169px;
    background-image:url(images/doxramos_logo.png);
        }

div.head-banner-right
{
    display: block;
    position: absolute;
    top: 0px;
    left: 159px;
    margin-left: 472px;
    width: 50%;
    height: 60px;
    background-image:url(images/metal_grid.jpg)
    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-25T23:57:05.997

您可以设置`z-index`css 属性，该属性将导致具有更高样式的元素`z-index`出现在具有较低样式的元素之上`z-index`。这仅适用于绝对和相对定位的元素。由于您的元素具有`position: absolute`，您应该能够将`z-index`属性添加到每个元素的 css 样式中。

```
 div.logo
    {
        display: block;
        position: absolute;
        top: 11px;
        left: 483px;
        margin-left: 472px;
        width: 214px;
        height: 169px;
        background-image:url(images/doxramos_logo.png);
        z-index: 100;
    }

    div.head-banner-right
    {
        display: block;
        position: absolute;
        top: 0px;
        left: 159px;
        margin-left: 472px;
        width: 50%;
        height: 60px;
        background-image:url(images/metal_grid.jpg)
        z-index: 50;
      } 
```

工作示例：http: [//jsfiddle.net/HTM5v/](http://jsfiddle.net/HTM5v/)

MDN 文档：[https ://developer.mozilla.org/en-US/docs/CSS/z-index](https://developer.mozilla.org/en-US/docs/CSS/z-index)

> z-index CSS 属性指定元素及其后代的 z 顺序。当元素重叠时，z-order 确定哪个元素覆盖另一个元素。z-index 较大的元素通常会覆盖 z-index 较小的元素。

# java - Gradle scala 类已经用组合 Java 编译定义

> ID：13079018
> 
> 赞同：0
> 
> 时间：2012-10-25T23:55:04.347
> 
> 标签：java, scala, gradle

我有以下 scala 编译问题

*   scala -> 取决于 java 源
*   java 源 -> 依赖于 scala 源

*   我的 scala 代码在 src/main/scala

*   我的 java 代码在 src/main/java

我无法更改此代码，因此我需要使用 gradle 编译它，并且它目前可以使用 JRuby 进行编译。

我已阅读以下有关如何解决此问题的帖子：

[http://forums.gradle.org/gradle/topics/how_to_compile_a_java_class_that_depends_on_a_scala_class_in_gradle](http://forums.gradle.org/gradle/topics/how_to_compile_a_java_class_that_depends_on_a_scala_class_in_gradle)

[http://forums.gradle.org/gradle/topics/how_to_compile_a_java_class_that_depends_on_a_scala_class_in_gradle](http://forums.gradle.org/gradle/topics/how_to_compile_a_java_class_that_depends_on_a_scala_class_in_gradle)

我将此添加到我的构建中：

```
ext {
    baseName = 'd2'
    description = 'Divisional IVR.'
    combinedSources = "$buildDir/combined-sources"
}

apply plugin: 'scala'

compileScala.taskDependencies.values = compileScala.taskDependencies.values - 'compileJava'
compileJava.dependsOn compileScala

sourceSets.main.scala.srcDir "$combinedSources"
sourceSets.main.java.srcDirs = [] 
```

我试图将所有 scala 和 java 文件复制到一个位置：

```
compileScala.dependsOn{
    copyAllSourceFiles
}

task copyAllSourceFiles(type:Copy) {
    description = 'Copy All Source Files.'
    from('src/main/java') {}
    from('/src/main/scala') {}
    into combinedSources

    includeEmptyDirs = false
} 
```

但现在我得到一个错误：

```
[ant:scalac] Compiling 18 source files to C:\usr\git_workspaces\xivr\d2\target\classes\main
[ant:scalac] Compiling 18 scala and 196 java source files to C:\usr\git_workspaces\xivr\d2\target\classes\main
[ant:scalac] C:\usr\git_workspaces\xivr\d2\target\combined-sources\com\comcast\ivr\d2\actors\AlternateAniWithAccountActor.scala:9: error: AlternateAniWithAccountActor is already defined as class AlternateAniWithAccountActor 
```

似乎 scalaCompile 看到了 $combinedSources 和 'src/main/scala'

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T15:06:19.860

> 似乎 scalaCompile 看到了 $combinedSources 和 'src/main/scala'

这就是您配置它的方式：`src/main/scala`是默认设置，并且您添加了`"$combinedSources"`. 要覆盖默认值，请使用`sourceSets.main.scala.srcDirs = [combinedSources]`.

无论如何，您不必（也不应该）复制源代码。这是一种既不需要复制也不需要重新配置任务依赖项的解决方案：

```
sourceSets.main.scala.srcDir "src/main/java"
sourceSets.main.java.srcDirs = [] 
```

现在，您的 Java 和 Scala 代码将得到联合编译，并且可以任意相互依赖。

PS：代替`"$combinedSources"`, 使用`combinedSources`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-26T08:36:54.927

### gradle.properties

```
theVersion=2.1
theSourceCompatibility=1.7
theScalaVersion=2.10.3 
```

### 构建.gradle

```
apply {
    plugin 'scala'
    plugin 'java'
    plugin 'idea'
}

ext {
    scalaVersion = theScalaVersion
}

sourceCompatibility = theSourceCompatibility

tasks.withType(ScalaCompile) {
    scalaCompileOptions.useAnt = false
}

dependencies {
    compile "org.scala-lang:scala-library:$theScalaVersion"
    compile "org.scala-lang:scala-compiler:$theScalaVersion"
}

sourceSets {
    main.scala.srcDirs = ["src/main/scala", "src/main/java"]
    main.java.srcDirs = []
} 
```

# python - 安装后我无法在 python 2.6 上导入 igraph

> ID：13079028
> 
> 赞同：1
> 
> 时间：2012-10-25T23:56:07.213
> 
> 标签：python, igraph

我在 OSX 10.7 上为 python 2.6 安装了 igraph，但我无法导入 igraph 库。

它显示导入错误：没有模块名称 igraph。

我不知道。请帮帮我。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T18:05:46.530

> 但是，我无法使用 python 运行代码。我编写了一个代码，并尝试运行，例如'python ex.py'

好吧，即使你没有回答我的大部分问题，我很确定我能猜到你的问题。您的问题标题是“安装后我无法在 python 2.6 上导入 igraph”，但您不是在尝试在 python 2.6 上导入它，而是在尝试 2.7。

```
$ python
Python 2.7.2 (default, Jun 20 2012, 16:23:33) 
[GCC 4.2.1 Compatible Apple Clang 4.0 (tags/Apple/clang-418.0.60)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> import igraph
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ImportError: No module named igraph
>>>

$ python2.6
Python 2.6.7 (r267:88850, Jun 20 2012, 16:23:38) 
[GCC 4.2.1 Compatible Apple Clang 4.0 (tags/Apple/clang-418.0.60)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> import igraph
>>> 
```

看到不同？OS X 10.7（和 10.8）附带三个版本的 Python：2.5、2.6 和 2.7。它们是完全独立的安装，因此当您为 Python 2.6 安装 igraph 时，并没有为您的 2.5 或 2.7 安装安装它。

默认值，即您刚刚运行时获得的版本`python`，是 2.7。如果您想要特定版本，则必须运行`python2.6`。

因此，您要么需要运行 python2.6，要么需要为 2.7 安装 igraph。

附带说明一下，如果你安装了任何第三方 Python 安装，你会让自己更加困惑，所以请不要这样做（或者卸载，如果你已经有），直到你*真正*知道你的正在做。

# ios5 - 在 iO 的 OpenGL ES2.0 中，如何使用 CVPixelBufferRef 更新立方体贴图纹理？

> ID：13079029
> 
> 赞同：1
> 
> 时间：2012-10-25T23:56:22.303
> 
> 标签：ios5, opengl-es, ios6, opengl-es-2.0

我已经设法从 AVPlayer 获取 CVPixelBufferRef 来提供像素数据，我可以使用这些数据来纹理 2D 对象。当我的像素缓冲区中有数据时，我会：

```
CVReturn err = CVOpenGLESTextureCacheCreateTextureFromImage('
kCFAllocatorDefault,
  videoTextureCache_,
  pixelBuffer, //this is a CVPixelBufferRef
  NULL,
  GL_TEXTURE_2D, 
  GL_RGBA,
  frameWidth,
  frameHeight,
  GL_BGRA,
  GL_UNSIGNED_BYTE,
  0,
  &texture); 
```

我想用这个缓冲区来创建一个 GL_TEXTURE_CUBE_MAP。我的视频帧数据实际上是一个图像中的 6 个部分（例如立方体条），它们总共构成了立方体的侧面。关于如何做到这一点的任何想法？

我曾想过只是假装我的 GL_TEXTURE_2D 是 GL_TEXTURE_CUBE_MAP 并将我的天空盒上的纹理替换为上面代码生成的纹理，但这会造成扭曲的混乱（正如我想在尝试强制天空盒纹理时应该预期的那样）一个 GL_TEXTURE_2D。

另一个想法是使用 glPixelStorei 设置解包，然后从像素缓冲区中读取：

```
glPixelStorei(GL_UNPACK_ROW_LENGTH, width);
glPixelStorei(GL_UNPACK_SKIP_PIXELS, X);
glPixelStorei(GL_UNPACK_SKIP_ROWS, Y);
glTexImage2D(...,&pixelbuffer); 
```

但令人难以置信的是 GL_UNPACK_ROW_LENGTH 在 iOS 的 OpenGl ES2.0 中不受支持。

那么，有没有：

- 在使用缓冲区制作纹理之前，有什么方法可以通过将缓冲区索引到某个像素子集来拆分我们 CVPixelBufferRef 中的像素数据？

- 将 6 个新的 GL_TEXTURE_2D 作为上面代码创建的我的 GL_TEXTURE_2D 的索引子集的任何方法

- 将 GL_TEXTURE_2D 转换为有效 GL_TEXTURE_CUBE_MAP 的任何方法（例如，GLKit 具有从单个立方体文件加载 GL_TEXTURE_CUBE_MAP 的天空盒效果。它没有从内存加载纹理的方法，否则我会被排序）

-还有其他想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T00:45:45.210

如果不可能以任何其他方式（这不太可能，可能有另一种方式 - 所以这可能不是最好的答案并且涉及比必要更多的工作）这里是一个我会尝试的黑客：

立方体贴图的工作原理是将每个面的纹理从几何中心的一个点投射到每个立方体面。所以你可以自己重现这种行为；您可以使用投影纹理进行六个绘制调用，一个用于立方体的每个面。每次，您首先将您感兴趣的面部绘制到模板缓冲区，然后计算纹理的投影矩阵（这种技术在游戏中被大量用于“聚光灯”效果），然后计算出变换矩阵需要增加片段着色器的纹理读取，以便对于每个面，只有对应于该面的纹理部分在 (0..1) 纹理查找范围内结束。如果一切顺利，模板缓冲区应丢弃 0..1 范围之外的任何内容，然后您

上述方法实际上与我现在为应用程序所做的非常相似，只是我只使用投影纹理来屏蔽和替换立方体贴图的一小部分。我需要对我正在投影的小方块的边缘进行像素匹配，以便它无缝地应用于天空盒，这就是为什么我确信这种方法实际上会重现立方体贴图的行为——否则，像素匹配不会不可能。

无论如何，我希望你能找到一种简单地将 2D 转换为 CUBEMAP 的方法，因为这可能会更容易和更清晰。

# c++ - 我的库中的随机未定义引用

> ID：13079033
> 
> 赞同：2
> 
> 时间：2012-10-25T23:56:44.403
> 
> 标签：c++, arduino

我为图形 LCD 制作的库中的一些函数遇到了一个非常奇怪的问题，该 LCD 通过硬件串行与我的 arduino 通信。它只是屏幕使用的串行协议的简单包装器。

基本上，每当我从这个库中调用某些函数时，我都会收到“未定义的引用...”错误。但是，其他功能工作正常，我无法辨别正在工作的功能和不工作的功能之间的任何语法差异。

例如，我有一个盒子功能。当我调用它并给它四个整数时，它期望它可以正常工作。`fill_box`, 和`circle`, 和 也是如此`erase_box`。

但是像`backlight`或者`offset`甚至被调用的函数`arg`（以反映我当时的感受......）会导致代码触发未定义的引用。我不知道为什么......我的错误是什么？

这是一个运行良好的代码示例：

```
#include <gLCD.h>

gLCD obj = gLCD();

void setup(){
    obj.fill_box(0,0,60,60);
    obj.erase_box(5,5,15,15);
    obj.circle(50,50,25);
}

void loop(){delay(1000);} 
```

但是只要我添加任何类似的东西`obj.line`，就像这样

```
#include <gLCD.h>

gLCD obj = gLCD();

void setup(){
    obj.fill_box(0,0,60,60);
    obj.erase_box(5,5,15,15);
    obj.circle(50,50,25);
    obj.line(0,0,40,40);
}

void loop(){
    delay(1000);
} 
```

然后我得到一个未定义的引用。与`obj.offset`、`obj.blacklight`和相同`pixel`。

我只是不知道为什么会这样。而且我开始感到非常沮丧，因为我什至不能编写一个简单的库......无论如何，这是有问题的库：

这是`gLCD.cpp`：

```
#include "gLCD.h"

HardwareSerial Uart = HardwareSerial();

gLCD::gLCD(){
    Uart.begin(115200);
}

void gLCD::box(int x1, int y1, int x2, int y2){
    Uart.write(0x7C);
    Uart.write(0x0F);
    Uart.write(x1);
    Uart.write(y1);
    Uart.write(x2);
    Uart.write(y2);
    Uart.write(0x01);
}

void gLCD::fill_box(int x1, int y1, int x2, int y2){
    Uart.write(0x7C);
    Uart.write(0x12);
    Uart.write(x1);
    Uart.write(y1);
    Uart.write(x2);
    Uart.write(y2);
    Uart.write(0xFF);
}

void gLCD::circle(int x1, int y1, int rad){
    Uart.write(0x7C);
    Uart.write(0x03);
    Uart.write(x1);
    Uart.write(y1);
    Uart.write(rad);
    Uart.write(0x01);
}

void gLCD::erase_block(int x1, int y1, int x2, int y2){
    Uart.write(0x7C);
    Uart.write(0x05);
    Uart.write(x1);
    Uart.write(y1);
    Uart.write(x2);
    Uart.write(y2);
}

void arg(){
    Uart.print("this is bullsh*t!");
}

void offset(int x1, int y1){
    Uart.write(0x7C);
    Uart.write(0x18);
    Uart.write(x1);

    Uart.write(0x7C);
    Uart.write(0x19);
    Uart.write(y1);
}

void backlight(int duty_cycle){
    Uart.write(0x7C);
    Uart.write(0x02);
    Uart.write(duty_cycle);
}

void line(int x1, int y1, int x2, int y2){
    Uart.write(0x7C);
    Uart.write(0x0C);
    Uart.write(x1);
    Uart.write(y1);
    Uart.write(x2);
    Uart.write(y2);
    Uart.write(0x01);
}

void pixel(int x ,int y ,int sr){
    Uart.write(0x7C);
    Uart.write(0x10);
    Uart.write(x);
    Uart.write(y);
    Uart.write(sr);
} 
```

这是 gLCD.h：

```
#ifndef gLCD_h
#define gLCD_h

#include <Arduino.h>

class gLCD{

    public:
        gLCD();
        void box(int x1, int y1, int x2, int y2);
        void fill_box(int x1, int y1, int x2, int y2);
        void circle(int x1, int y1, int rad);
        void offset(int x1, int y1);
        void backlight(int duty_cycle);
        void line(int x1, int y1, int x2, int y2);
        void pixel(int x ,int y ,int sr);
        void erase_block(int x1, int y1, int x2, int y2);
        void arg();
};

#endif 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T00:02:19.030

如果您`arg()`在 class 中声明了一个函数`gLCD`，则应该稍后将其定义为

```
void gLCD::arg() 
{
  // whatever
} 
```

即，您必须使用显式`gLCD::`前缀来引用先前声明的函数，就像您使用`gLCD::box`,`gLCD::circle`和其他“工作”函数所做的那样。为什么你正确定义了那些旧函数（用`gLCD::`）然后突然开始省略那个前缀？

您当前在那里定义的新函数（`arg`、`offset`等`backlight`）被编译器视为简单的独立全局函数。`gLCD`他们与你的班级无关。同时，函数`gLCD::arg`, `gLCD::offset`,`gLCD::backlight`仍未定义，这就是您收到这些错误的原因。

如果您想在类定义（内联）中定义这些新函数*，*那么您可以在没有显式`gLCD::`前缀的情况下执行此操作。但是由于您是在类定义*之外*执行此操作，因此在不同的文件中，您必须使用限定名称，例如`gLCD::arg`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T23:59:35.587

您忘记`gLCD::`在`gLCD.cpp`. 关闭类前缀意味着您声明了一个全局函数而不是类成员函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T00:01:33.500

您的 arg、offset、backlight、line、pixel 函数不是作为 gLCD 类的一部分编写的

改变

```
void arg() 
```

到

```
void gLCD::arg() 
```

# android - android裁剪图像，但让用户决定输出大小

> ID：13079035
> 
> 赞同：2
> 
> 时间：2012-10-25T23:56:52.443
> 
> 标签：android, image, widget, crop

当前的“com.android.camera.action.CROP”API 允许程序指定预定义的输出 X/Y：

```
// this defines the output bitmap size
intent.putExtra("outputX", 100);
intent.putExtra("outputY", 100); 
```

但是我们可以不预先指定尺寸，而是从用户实际裁剪的输出尺寸中获取吗？

例如，使用上面的代码，裁剪后的输出将始终是从原始图像中截取的 100 x 100 平方图像，而用户可能想要裁剪 50 x 100 图像。不应预先定义输出大小。

知道怎么做吗？

或者除了 com.android.camera.action.CROP 之外，还有没有更好的图像裁剪库可以做到这一点？

谢谢。

# asp.net-mvc - 使用 partialView 将参数传递给控制器

> ID：13079043
> 
> 赞同：0
> 
> 时间：2012-10-25T23:57:49.480
> 
> 标签：asp.net-mvc

我有一个 PartialView 已包含在其他两个视图中。

我如何能够将参数从 PartialView 传递到每个视图的主控制器。

```
@Html.Partial("_Video","file1.xml") 
```

和

```
@Html.Partial("_Video","file2.xml") 
```

我希望能够在每个控制器上获取 Get 方法的参数值。

```
 //Controller1 
        // GET: //
        public ActionResult Index(){
             "file1.xml"
        }

        //Controller2
        // GET: //
        public ActionResult Index(){
             "file2.xml"
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T23:31:41.020

刚刚自己解决了这个问题，希望对您有所帮助。

在您看来cshtml：

```
@Html.Action("_Video", "Controller1", new { paramValue = "some string" } ) 
```

在这种情况下，您需要创建一个名为“_Video.cshtml”的局部视图（通过 @model 指令定义正确的模型类型）并在您的控制器中：

```
[ChildActionOnly]
public ActionResult _Video(String paramValue) {
   // paramValue == "some string"
   // .. do something with aModel ...
   return PartialView(aModel);
} 
```

但是，如果您想要返回 xml 或类似的数据内容，请检查视图模型容器、Web Api 或 RESTful 数据调用是否更合适（如果您从客户端脚本调用，请搜索“Json()”函数也）。

高温高压

# ajax - ajax 表单处理，然后在 3-5 秒后提交页面

> ID：13079047
> 
> 赞同：2
> 
> 时间：2012-10-25T23:58:55.647
> 
> 标签：ajax, forms

```
 $("#sub").click( function() {
 $.post( $("#added_user").attr("action"),
     $("#added_user :input").serializeArray(),
     function(info){ $("#result").html(info);
 });
 clearInput();
 });

<code>$("#added_user").submit( function() {
  return false;
});
</code>
function clearInput() {
    $("#added_user :input").each( function() {
       $(this).val('');
    });
} 
```

我似乎无法弄清楚如何在不进入插入 php 页面的情况下刷新页面。我希望它显示结果 div，然后在 3-5 秒后刷新页面，以便您查看添加的内容。

TIA

# git - 查看用于 Git 托管的 Projectlocker、Cloudforge 和 Assembla 组合 - 有什么意见吗？

> ID：13079048
> 
> 赞同：2
> 
> 时间：2012-10-25T23:59:10.267
> 
> 标签：git, dvcs, assembla, projectlocker

我们是这里的一家小型网页设计商店，我们希望让所有客户都使用 DVCS 系统，该系统通过 sftp 部署我们的提交。

我已将其范围缩小到 Projectlocker、CloudForge 和 Assembla Portfolio。

还有 Beanstalk 和 Springloops，但它们最终的价格是我们其他选项的 2-4 倍。（尽管我们只有 10-15GB，但对于这些主机来说，300 个项目已经很多了）

有人对 Projectlocker、Cloudforge 和/或 Assembla Portfolio 有任何经验吗？

我错过了更好的解决方案吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-08T21:57:10.810

我认为 CollabNet CloudForge 是最好的选择。它为您提供无限的用户、无限的项目，但其免费版本的大小限制为 2 GB。这绝对是我写这些行时提供的最好的免费选择。

即使是付费版本，每个用户每月 2 美元也是最好的。

我们还将拥有 TeamForge 的 scrum 能力、门票、跟踪......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T00:28:55.550

Assembla 是一个不错的选择——投资组合项目将会变得更好，因为它能够创建一个空间作为另一个空间的子集。以及共享票证列表和存储库。

一般来说 - Assembla Portfolio 项目适用于 300 个项目，特别是如果它们共享任何元素，例如团队。

您可以从 git 通过 sftp 进行部署，新产品将允许您在服务器上部署后运行任何脚本。Assembla 也开始与 jenkins 集成以进行单元测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T14:52:39.833

我在 projectlocker 方面取得了多年的成功。我已经将免费版本用于小型项目。它工作得很好。如果项目增长，您可以随时升级。

# java - 如何更新已经有数据的java容器

> ID：13079055
> 
> 赞同：1
> 
> 时间：2012-10-26T00:00:28.110
> 
> 标签：java, user-interface, button, containers, grid-layout

大家好，我需要为我正在创建的数独游戏更新容器数据，但我正在努力让字段用新数据更新。容器使用网格布局，每个单元格都包含一个按钮，其中包含适合数独的数字我需要知道如何更新这些按钮中的文本。任何有关我可以使用的方法的帮助或任何一般帮助将不胜感激。请在下面查看我目前必须尝试更新的代码，我知道它可能很混乱并且完全走错了路，但我只是试图弄乱一些希望它能起作用的东西。

```
public void update(int[][] grid2)throws NullPointerException{
myGrid = new Container();
try{
  for(int i = 0; i<9; i++){
    for(int j = 0; j<9; j++){
      String appropriateNumber = convertSimple(grid2[i][j]);
      JButton button = new JButton(appropriateNumber);
      button.addActionListener(new sudokuListener());
      myGrid.add(button);
    }
  }
}
catch(NullPointerException e){

}
myGrid.setLayout(new GridLayout(9, 9));
myGrid.setPreferredSize (new Dimension(400, 400));

add(myGrid);
puzzleGUI.update();
} 
```

puzzlGUI.update 只包含puzzle.validate() （谜题是GUI）

[编辑] 好的，我已经改变了一些东西，并按照建议使用了 JButton arrya，我已经能够在这个数组中设置按钮的文本（我通过 system.out.print 知道）但这不会更新实际 GUI 中的文本。aaaaaahhh 学期末编码不好玩 请帮助任何人

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T00:18:08.853

重复一遍，如果你有一个 JButton 网格，为什么每次都重新创建它们？为什么不简单地遍历网格中已经存在的组件并更新它们的状态，比如可能显示在 JButtons 上的文本？

```
 for(int i = 0; i<9; i++){
    for(int j = 0; j<9; j++){
      String appropriateNumber = convertSimple(grid2[i][j]);
      someButtonArray[i][j].setText(appropriateNumber);

      // no longer need this stuff
      // JButton button = new JButton(appropriateNumber);
      // button.addActionListener(new sudokuListener());
      // myGrid.add(button);
    }
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T00:11:59.423

您的 update 方法在每次调用时都会创建新的 Swing 组件，如果您只需要更新文本，这是不必要的。要直接更新任何文本中的文本，`JButton`您可以创建一个按钮数组，如下所示：

```
JButton[][]  buttons = new JButton[9][9]; 
```

并像这样创建（仅调用一次）：

```
for (int i = 0; i<9; i++) {
   for(int j = 0; j < 9; j++){
      String appropriateNumber = convertSimple(grid2[i][j]);
      button[i][j] = new JButton(appropriateNumber);
      button[i][j].addActionListener(new sudokuListener());
      myGrid.add(button[i][j]);
    }
} 
```

然后更新：

```
buttons[row][column].setText("New Text"); 
```

# python - 如何在 Python 中组织课程？

> ID：13079056
> 
> 赞同：2
> 
> 时间：2012-10-26T00:01:12.667
> 
> 标签：python, python-3.x

我遇到了一个问题，我觉得它的答案非常简单，但在简短的谷歌搜索中很难解释，而且我找不到关于这个主题的任何内容。

因此，在我最近开发的一款游戏中，我为游戏中的每个方块/图块设置了多种类型的对象：

```
 class Char(object):
        ...
        def update(self):
            ...
        def move(self, direction):
            ... 
```

或者

```
 class Dirt(object):
        ... 
```

显然，在主程序中定义所有这些类可能会非常*混乱*，例如，如果我想在游戏中创建一个名为“屏幕”（计算机屏幕）的对象，这会与我的冲突实际游戏窗口的*屏幕*类。此外，创建名为 gameObjects 的第二个模块还会导致我的所有游戏对象都无法访问 main.js 中定义的变量的问题。

那么，我该如何组织或**分组**我的课程呢？我是入门 Python 的初学者，因此不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T00:04:56.607

您通常不希望拥有与您的类同名的对象。如果它们没有在同一范围内定义，则实际上没有冲突，但仍然令人困惑。

但是，如果您遵循典型的 Python 命名约定，这不会成为问题：您的类以大写字母开头，而您的变量以小写字母开头。因此，您的变量被称为`screen`，并且您有一个名为 的类并不重要`Screen`。

同时，您可能确实希望将相关的类放在一个模块中。在您的`gameObjects`模块中定义的类的对象将无法访问 main 中定义的变量，但您不希望它们访问。全局变量几乎总是一个坏主意。如果一个对象需要访问一个变量，将该变量传递给它的构造函数。

在创建自己的大型项目之前，您可能应该查看其他一些大型项目以了解它们是如何组织事物的。

# php - 它没有在下拉菜单中显示相关模块

> ID：13079057
> 
> 赞同：0
> 
> 时间：2012-10-26T00:01:14.587
> 
> 标签：php, jquery, html, ajax

我正在尝试设置 2 个下拉菜单，一个用于“课程”，另一个用于选择课程的相关“模块”。

现在“课程”下拉菜单工作正常。问题是“模块”下拉菜单。如果我从“课程”下拉菜单中选择一门课程，那么它应该在“模块”下拉菜单中显示与所选课程相关的模块。但相反，它只显示“模块”下拉菜单的“请选择”选项，没有别的。

如何让相关模块出现在“模块”下拉菜单中？

下面是显示“课程”下拉菜单和“模块”下拉菜单设置的代码，它包含一个 jquery，它链接到“module.php”文件，它将在其中找到并列出相关的模块作为“模块”下拉菜单中的选项。

```
<?php

// connect to the database
include('connect.php');

/* check connection */
if (mysqli_connect_errno()) {
printf("Connect failed: %s\n", mysqli_connect_error());
die();
}

$sql = "SELECT CourseId, CourseName FROM Course"; 

$sqlstmt=$mysqli->prepare($sql);

$sqlstmt->execute(); 

$sqlstmt->bind_result($dbCourseId, $dbCourseName);

$courses = array(); // easier if you don't use generic names for data 

$courseHTML = "";  
$courseHTML .= '<select name="courses" id="coursesDrop" onchange="getModules();">'.PHP_EOL; 
$courseHTML .= '<option value="">Please Select</option>'.PHP_EOL;  

while($sqlstmt->fetch()) 
{ 
$course = $dbCourseId;
$coursename = $dbCourseName; 
$courseHTML .= "<option value='".$course."'>" . $course . " - " . $coursename . "</option>".PHP_EOL;  
} 

$courseHTML .= '</select>'; 
$courseHTML .= '</form>'; 

$moduleHTML = "";  
$moduleHTML .= '<select name="modules" id="modulesDrop">'.PHP_EOL; 
$moduleHTML .= '<option value="">Please Select</option>'.PHP_EOL;  
$moduleHTML .= '</select>'; 

?>

<script type="text/javascript">

function getModules() { 
var course = jQuery("#CoursesDrop").val(); 
jQuery('#modulesDrop').empty(); 
jQuery('#modulesDrop').html('<option value="">Please Select</option>'); 
jQuery.ajax({ 
type: "post", 
url:  "module.php", 
data: { course:course }, 
success: function(response){ 
jQuery('#modulesDrop').append(response); 
} 
}); 

}

</script> 
```

下面是 module.php 页面：

```
<?php

     // connect to the database
 include('connect.php');

 /* check connection */
 if (mysqli_connect_errno()) {
printf("Connect failed: %s\n", mysqli_connect_error());
die();
}

$course = isset($_POST['course']) ? $_POST['course'] : ''; 

$sql = "
SELECT cm.CourseId, cm.ModuleId, 
c.CourseName,
m.ModuleName
FROM Course c
INNER JOIN Course_Module cm ON c.CourseId = cm.CourseId
JOIN Module m ON cm.ModuleId = m.ModuleId
WHERE
(c.CourseId = ?)
ORDER BY c.CourseName, m.ModuleId
"; 

 $sqlstmt=$mysqli->prepare($sql);

 $sqlstmt->bind_param("s",$course);

 $sqlstmt->execute(); 

 $sqlstmt->bind_result($dbCourseId,$dbModuleId,$dbCourseName,$dbModuleName);

$moduleHTML  = "";  

 while($sqlstmt->fetch()) { 
    $moduleHTML .= "<option value='$dbModuleId'>" . $dbModuleId . "</option>".PHP_EOL;   
} 

echo $moduleHTML; 

 $sqlstmt->execute(); 

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T01:22:02.527

将模块放入 div 并绘制 SELECT 标签

最好将这一切都作为一个 jquery“加载”

```
$moduleHTML .= '<div id="modulesDrop">';
$moduleHTML .= '<select name="modules" >'.PHP_EOL; 
$moduleHTML .= '<option value="">Please Select</option>'.PHP_EOL;  
$moduleHTML .= '</select>'; 
$moduleHTML .= '</div>'; 
```

和

```
$moduleHTML .= "<select >";
 while($sqlstmt->fetch()) { 
    $moduleHTML .= "<option value='$dbModuleId'>" . $dbModuleId . "</option>".PHP_EOL;   
} 
$moduleHTML .= "</select>"; 
```

# windows-7 - 当我的构建脚本运行时，我得到“拒绝访问”

> ID：13079058
> 
> 赞同：0
> 
> 时间：2012-10-26T00:01:27.947
> 
> 标签：windows-7, command-line, access-rights

我有一个巨大的 .bat 文件构建脚本，它调用编译器等等。

直到最近我才能够毫无问题地运行它（并且由于我没有进行任何更改，我怀疑有 Windows 更新和/或设置在起作用？）

使用 Windows 7

我以管理员身份登录我使用“以管理员身份运行”运行命令行

然后我的构建脚本第一次编译并运行我的应用程序（我已在“任务管理器”中确认的自行关闭）。这进展顺利。

但是当它试图删除文件（应用程序）时，我得到“拒绝访问”

这基本上完全阻止了我，因为它是一个大型构建系统，非自动化需要很长时间并且非常容易手动执行错误。

更重要的是，如果我尝试在 Windows 资源管理器中删除文件，我会得到“需要管理员权限”，这有点奇怪，因为......我已经是管理员......而且我还使用“以管理员身份运行”运行 Windows 资源管理器。但是，经过一段时间并尝试重命名后，它似乎让步并允许删除文件。（我已经检查过了，任务管理器中没有列出任何应该以任何方式“持有”文件的进程，所以我倾向于认为这是一个访问权限问题......不知何故）

我……对想法持开放态度？:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T16:34:19.357

我决定把这个问题移到：

[https://superuser.com/questions/493249/windows-file-access-denied](https://superuser.com/questions/493249/windows-file-access-denied)

因为我认为这是我的 Windows 以某种方式搞砸了:(

我仍然会在 SO 上监控这个问题，但我认为这是我遇到的一个特殊的 Windows 问题

# ipad - 来自 iPad 的请求“有时”来自 Mozilla 0

> ID：13079062
> 
> 赞同：0
> 
> 时间：2012-10-26T00:02:05.303
> 
> 标签：ipad, http, web-applications, user-agent, browser-detection

现在，这听起来很奇怪，但是我们有一个仅支持特定浏览器的应用程序，为了密切关注所有即将到来的请求，我们有一个日志服务器，它记录有关传入请求的 userAgent 的所有详细信息。

现在，一些 iPad 用户抱怨他们曾经看到 NotSupported.html 页面，这是我们在页面不受支持时将用户重定向到的页面。他们只在某个时候看到它。

我们查看了日志，有时 Ipad 请求来自 Mozilla 0。

我正在使用 HTTpRequesBase 的 UserAgent 属性来读取它。而且我不确定为什么 IPad 将它自己识别为 mozilla 0，而且也只是有时。任何人ahd类似的经验？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T00:05:04.470

Safari 并不是 Apple 设备中唯一的浏览器。

当我使用我的 Chrome for iPhone 访问[http://www.whatsmyuseragent.com](http://www.whatsmyuseragent.com)时，它也会显示 Mozilla。所以最好的假设是那些用户没有使用 Safari。

编辑：它确实提供了足够的信息来知道它是一个 iPad，我自己有一个项目在用户代理字符串中匹配 iPad 并且适用于 Chrome/Safari，我现在没有 Opera 来测试，但我猜它也有效（关于没有投诉的轶事）。

# string - .BAT - 将 %string% 拆分为文件名 + 文件路径 + 文件的文件夹 + 文件的父文件夹

> ID：13079064
> 
> 赞同：1
> 
> 时间：2012-10-26T00:02:09.303
> 
> 标签：string, batch-file, split

我正在创建一个 .bat 文件，该文件正在为 mediaportal tvserver 创建自定义的电视录制图标，需要您的帮助。我从以下字符串开始

```
SET "path_and_filename=D:\TEMP FOLDER\TV RECORDINGS\TV3\Campbell Live\Campbell Live - 2012-10-25 - S38536.ts" 
```

我正在尝试从 %path_and_filename% 创建 4 个单独的变量，其中包含

1.  文件名（不带扩展名）例如。坎贝尔直播 - 2012-10-25 - S38536

2.  文件路径例如。D:\TEMP 文件夹\TV RECORDINGS\TV3\Campbell Live\

3.  文件的父文件夹，例如。坎贝尔现场

4.  文件的父父文件夹，例如。电视3

谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T00:50:11.987

`.`使用 FOR 变量修饰符以及当前文件夹和`..`父文件夹轻松完成。（`HELP FOR`从命令提示符键入以在帮助底部获取有关修饰符的信息）

```
@echo off
setlocal
SET "path_and_filename=D:\TEMP FOLDER\TV RECORDINGS\TV3\Campbell Live\Campbell Live - 2012-10-25 - S38536.ts"
for %%F in ("%path_and_filename%") do (
  set "fileName=%%~nF"
  set "filePath=%%~dpF"
)
for %%F in ("%filePath%.") do set "fileParentFolder=%%~nF"
for %%F in ("%filePath%..") do set "fileGrandparentFolder=%%~nF"
set file 
```

样本输出：

```
fileGrandparentFolder=TV3
fileName=Campbell Live - 2012-10-25 - S38536
fileParentFolder=Campbell Live
filePath=D:\TEMP FOLDER\TV RECORDINGS\TV3\Campbell Live\ 
```

# c# - 你如何在与项目相同的 cs 文件中 nunit TestFixture？

> ID：13079067
> 
> 赞同：1
> 
> 时间：2012-10-26T00:02:57.127
> 
> 标签：c#, unit-testing, nunit

在课堂上，他们教我们将测试夹具添加到与我们正在测试的项目相同的命名空间中。例如：

```
namespace Project
{
    class Decrypt : Cipher
    {
        public string Execute()
        {
            //Code here
        }
    }
    [TestFixture]
    {
        [Test]
        public void test1()
        {
            //Code here
        }
    }
} 
```

我注意到在我的 uni 计算机上的 c# 菜单中，有一个“测试”部分（我也无法让它在那里运行，我不知道如何）。在这台旧的 32b 计算机上没有。我已经安装了 NUnit-2.6.2.msi 但是当我尝试运行它时，它说“无法找到运行此应用程序的运行时版本”所以我认为我有两个问题：

*   安装 Nunit（我已经分别从我的项目中引用了 .dll）

*   使用 Nunit（即使在正确安装的计算机上）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T00:15:20.077

通常你会把你的代码放在单独的项目中，但是在测试项目中引用你正在测试的项目

```
//project: Xarian.Security
//file: Decrypt.cs
namespace Xarian.Security
{
    class Decrypt : Cipher
    {
        public string Execute()
        {
            //Code here
        }
    }
} 
```

.

```
//project: Xarian.Security.Test
//file: DecryptTest.cs

using System;
using NUnit.Framework;
//as we're already in the Xarian.Security namespace, no need 
//to reference it in code.  However the DLL needs to be referenced 
//(Solution Explorer, Xarian.Security.Test, References, right click, 
//Add Reference, Projects, Xarian.Security)

namespace Xarian.Security
{
    [TestFixture]
    class DecryptTest
    {
        [Test]
        public void test()
        {
            //Code here
            Cipher cipher = new Decrypt("&^%&^&*&*()%%&**&&^%$^&$%^*^%&*(");
            string result = cipher.Execute();
            Assert.AreEqual(string, "I'm Decrypted Successfully");
        }
    }
} 
```

右键单击测试项目的引用，转到“项目”选项卡并选择主项目。引用后，您将能够在测试代码中使用主项目中的类（等）。

# objective-c - dismissViewControllerAnimated 完成方法不起作用

> ID：13079068
> 
> 赞同：5
> 
> 时间：2012-10-26T00:03:12.243
> 
> 标签：objective-c, ios

这是我的应用程序设计。我有`mainController`哪些礼物`secondViewController`。现在，我想解雇`secondViewController`并随后调用该方法`aMethod`，`mainController`如下所示：

```
[self dismissViewControllerAnimated:YES completion:aMethod]; 
```

但这给了我错误`use of undeclared identifier 'aMethod'`

显然我没有正确使用完成处理程序，但我无法找出正确的方法。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-26T00:15:47.770

我想这就是你要找的，

```
[self dismissViewControllerAnimated:YES completion:^{
            [self.mainController aMethod];
        }]; 
```

在上面的代码中，您需要`self`在块外部声明并将其用作，

```
__block SecondViewController *object = self;

[self dismissViewControllerAnimated:YES completion:^{
                [object.mainController aMethod];
            }]; 
```

只是为了避免`self`被阻止。

**更新：**

现在有问题了。您需要`mainController`在 .h 文件中声明为属性`secondViewController`。之后，当您展示`secondViewController`from时`maincontroller`，您需要将其设置为，

```
secondViewController.maincontroller = self;
[self presentViewController:secondViewController animated:YES completion:Nil]; 
```

在你的`SecondViewController.h`档案中，

```
@property(nonatomic, assign) MainController *mainController; 
```

在你的`SecondViewController.m`档案中，

```
@synthesis mainController; 
```

**更新 2：**

如果您不想声明`maincontroller`为属性，请尝试此操作。我不确定这是否是正确的做法。但它看起来像以前工作。

```
 MainController *mainController = (MainController *)[self.view.superview nextResponder];

    [self dismissViewControllerAnimated:YES completion:^{
                    [mainController aMethod];
                }]; 
```

**更新 3（建议）：**

这应该适合你。核实。

```
 MainController *mainController = (MainController *)self.parentViewController;

    [self dismissViewControllerAnimated:YES completion:^{
                    [mainController aMethod];
                }]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T00:09:35.083

你想要这样的东西：

```
[self dismissViewControllerAnimated:YES completion:^{
            ...
            <do something on completion here>
            ...
        }]; 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-10-26T00:07:25.737

声明：`dismissViewControllerAnimated:YES completion:Nil`

我希望它有所帮助。

# winforms - 根据其他单元格选择动态地将 DataGridViewComboBoxCell 的 DataSource 设置为过滤的 DataView

> ID：13079070
> 
> 赞同：3
> 
> 时间：2012-10-26T00:03:13.867
> 
> 标签：winforms, datagridview, c#-3.0, datagridviewcomboboxcell

我一直在寻找一种方法来执行以下操作，但无济于事。我想出了一个可行的解决方案，但我想知道是否有更好的方法来处理它。

**问题：**

我正在使用具有两个 DataGridViewComboBoxColumn、col1 和 col2 的 DataGridView。

col1 已将其 DataSource 设置为 DataTable。根据 col1 中给定单元格的选择，我希望同一行中的各个 col2 单元格将其 DataSource 设置为 col2 的 DataSource 的过滤 DataView。

我当前实现的缩写代码可能更好地帮助描述我正在尝试做的事情：

```
DataGridView dg = new DataGridView();
dg.DataSource = new BindingSource() { DataSource = _myDataTable }; //DataTable with Foreign Keys for ID1 and ID2
dg.CellValueChanged += new DataGridViewCellEventHandler(dg_CellValueChanged);
DataGridViewComboBoxColumn col1 = new DataGridViewComboBoxColumn();
col1.DataPropertyName = "ID1";
col1.DisplayMember = "Display1";
col1.ValueMember = "ID1";
col1.DataSource = dataTable1;
col1.ValueType = typeof(Int32);

DataGridViewComboBoxColumn col2 = new DataGridViewComboBoxColumn();
col2.DataPropertyName = "ID2";
col2.DisplayMember = "Display2";
col2.ValueMember = "ID2";
col2.DataSource = dataTable2;
col2.ValueType = typeof(Int32);

dg.Columns.Add(col1);
dg.Columns.Add(col2); 
```

然后我将事件处理程序定义为：

```
private void dg_CellValueChanged(object sender, DataGridViewCellEventArgs e)
{
    if (e.ColumnIndex == 0 && e.RowIndex > -1)
    {
        var dgv = sender as DataGridView;
        if (dgv == null)
            return;

        int selectedID;
        if (!int.TryParse(dgv[e.ColumnIndex, e.RowIndex].Value.ToString(), out selectedID))
            return;

        var cell = dgv[e.ColumnIndex + 1, e.RowIndex] as DataGridViewComboBoxCell;
        if (cell == null)
            return;

        var col = dgv.Columns[e.ColumnIndex + 1] as DataGridViewComboBoxColumn;
        if(col == null)
            return;

        var dt = col.DataSource as DataTable; // The macro-DataTable containing all possible values
        if(dt == null)
            return;

        DataView dv = new DataView(dt, "ID1 = " + selectedID, "DisplayOrder", DataViewRowState.CurrentRows);
        if(dv.Count == 0)
            return;

        //This is the part that I am wondering if there is a better way of handling
        cell.DataSource = dt; //Set the data source to the macro-DataTable so that when we set the Value to something in the new DataView it will not throw an exception
        cell.DisplayMember = "Display2"; // Have to redefine the Display/Value members
        cell.ValueMember = "ID2";
        cell.Value = dv[0]["ID2"]; // Set the value to the first option in the new DataView to avoid an exception being thrown when setting the dv as the DataSource
        cell.DataSource = dv;
    }
} 
```

最后一部分是我关心的。动态切换cell2的DataSource时，如果cell2的当前选择没有出现在新的DataView中，那么会抛出异常：

**System.ArgumentException：DataGridViewComboBoxCell 值无效。**

为了避免这种情况，我将数据源设置为宏数据表（包含所有可以根据单元格1的选择显示的值），将单元格2的选定值更改为数据视图中的第一个结果，然后设置单元格2的数据源要说DataView。这一切都确保了单元格永远不会有无效的选择，并且可以按预期工作。

我的问题是，有没有更好/更简单的方法来做到这一点？就我的使用而言，此代码仅在创建新行时被激活，因此在给定表单中它不会被执行多次。但是，如果有更好的方法或改进它的一些建议，我将不胜感激！

（这里的第一个问题，所以我也对发布的建议持开放态度......对任何失误表示歉意）

**编辑（提供表结构 - 还将“BoundID”更改为“ID1”以避免混淆）：**

DataGrid 的表结构是：

> MainTableID 整数
> 
> ID1 int -- 这是 col1 的外键
> 
> ID2 int -- 这是 col2 的外键

第1列的表结构：

> ID1 整数
> 
> 显示 1 varchar(50)

第2列的表结构：

> ID2 整数
> 
> 显示2 varchar(50)
> 
> ID1 int -- 这是 col1 的外键

**更新：** 我根据 Mohsen 的建议重新定义了 CellValueChanged 事件处理程序：

```
private void dg_CellValueChanged(object sender, DataGridViewCellEventArgs e)
{
    if (e.ColumnIndex == 0 && e.RowIndex > -1)
    {
        var dgv = sender as DataGridView;

        var cell = dgv[e.ColumnIndex + 1, e.RowIndex] as DataGridViewComboBoxCell;
        if (cell == null)
            return;

        DataView dv = new DataView( ((DataTable)((DataGridViewComboBoxColumn)dgv.Columns[e.ColumnIndex + 1]).DataSource), "ID1 = " + dgv.CurrentCell.Value, "DisplayOrder", DataViewRowState.CurrentRows);
        if(dv.Count == 0)
            return;

        cell.DisplayMember = "Display2"; // Have to redefine the Display/Value members
        cell.ValueMember = "ID2";
        cell.DataSource = dv;
    }
} 
```

我已经为 DataError 添加了一个事件处理程序，就像他建议的那样：

```
void dg_DataError(object sender, DataGridViewDataErrorEventArgs e)
{
    if(e.ColumnIndex != 1)
    {
                    //Alert the user for any other DataError's outside of the column I care about
                    MessageBox.Show("The following exception was encountered: " + e.Exception);
    }
} 
```

这似乎完美无缺。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T12:30:28.930

您的代码可以简化为此而不会抛出异常：

```
 if (e.ColumnIndex == 0 && e.RowIndex > -1)
    {
        var dgv = sender as DataGridView;

        var cell = dgv[e.ColumnIndex + 1, e.RowIndex] as DataGridViewComboBoxCell;
        if (cell == null)
            return;

        cell.DataSource = ((DataTable)((DataGridViewComboBoxColumn)dgv.Columns[e.ColumnIndex + 1]).DataSource).Select("BoundID = " + dgv.CurrentCell.Value);                
    } 
```

**更新**

当您更改第一个组合框中已设置的项目时，因为第二个组合框中的过滤数据视图不同`ID1`，会引发异常，并显示“ *DataGridViewComboBoxCell 值无效。* ”。为了`DataError`在注册方法中没有代码的情况下捕获此异常注册 datagridview 事件。那么当你改变已经设置好的组合框时，对应的组合框就会被正确的项目填充。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T16:07:30.097

这是对我有用的解决方案的快速停止商店，但我仍然想把功劳归功于 Mohsen。在原始问题中复制了这一点。

根据 Mohsen 的建议，我重新定义了 CellValueChanged 事件处理程序：

```
private void dg_CellValueChanged(object sender, DataGridViewCellEventArgs e)
{
    if (e.ColumnIndex == 0 && e.RowIndex > -1)
    {
        var dgv = sender as DataGridView;

        var cell = dgv[e.ColumnIndex + 1, e.RowIndex] as DataGridViewComboBoxCell;
        if (cell == null)
            return;

        DataView dv = new DataView( ((DataTable)((DataGridViewComboBoxColumn)dgv.Columns[e.ColumnIndex + 1]).DataSource), "ID1 = " + dgv.CurrentCell.Value, "DisplayOrder", DataViewRowState.CurrentRows);
        if(dv.Count == 0)
            return;

        cell.DisplayMember = "Display2"; // Have to redefine the Display/Value members
        cell.ValueMember = "ID2";
        cell.DataSource = dv;
    }
} 
```

我已经为 DataError 添加了一个事件处理程序，就像他建议的那样：

```
void dg_DataError(object sender, DataGridViewDataErrorEventArgs e)
{
    if(e.ColumnIndex != 1)
    {
        //Alert the user for any other DataError's outside of the column I care about
        MessageBox.Show("The following exception was encountered: " + e.Exception);
    }
} 
```

这似乎完美无缺。

# android - AdMob/iAd - 当广告视图处于滚动视图时，展示次数是否计入？

> ID：13079071
> 
> 赞同：1
> 
> 时间：2012-10-26T00:03:16.223
> 
> 标签：android, ios, scrollview, admob, iad

广告视图是否需要始终可见才能计算展示次数？例如，广告视图可能位于滚动视图的底部，直到用户到达底部为止。我见过的大多数广告视图实现在任何内容之上都有静态的广告视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T00:12:38.717

将广告放在可滚动内容中是违反苹果设计文档的。它可能会计数，但您将面临被拒绝的风险。另一个问题是填充广告需要时间，因此您最终可能会收到更多的广告请求而填充不足，这似乎是点击欺诈。

在那张纸条上，我已经完成了你所要求的一个非常黑客的版本。我有一个添加不在 tableview 中，而是随它浮动并“剪辑”到顶部或底部。将广告放在表格视图单元格中的最大问题是每次滚动离开视图时它都会被回收。最后，我建议只接受将 at 静态放置在顶部或底部。

# ruby-on-rails - Rails Twitter-Boostrap：加载许多资产文件（javascript 和 css）

> ID：13079074
> 
> 赞同：1
> 
> 时间：2012-10-26T00:04:26.340
> 
> 标签：ruby-on-rails

我刚开始在我的简单应用程序中使用 twitter-boostrap gem。当我检查它时，它会加载一些我认为它不会在特定页面中使用的 javascript 文件。如下图所示

[http://i.imgur.com/Aluth.png](http://i.imgur.com/Aluth.png)

那么问题来了，是否可以管理应该在页面中加载哪个 js 文件？

谢谢。

# ruby-on-rails - 如何将登录表单放在 Devise 和 Rails 的标题中

> ID：13079079
> 
> 赞同：4
> 
> 时间：2012-10-26T00:05:03.597
> 
> 标签：ruby-on-rails, ruby-on-rails-3, login, devise, ruby-on-rails-3.2

我想在我的网站标题中放置一个登录表单。我使用 Rails 3.2.8 和最新的设计。在`app/views/devise/sessions/new.html.erb`文件中创建了一个登录表单：

```
 <%= form_for(resource, :as => resource_name, :url => session_path(resource_name), :html => {:class => 'main'}) do |f| %>
    <div><%= f.label :login %> <%= f.text_field :login, :placeholder => 'Enter username' %></div>
    <div><%= f.label :password %> <%= f.password_field :password, :placeholder => 'Enter password' %></div>
    <% if devise_mapping.rememberable? -%>
      <div><%= f.check_box :remember_me %> <%= f.label :remember_me %></div>
    <% end -%>
    <%= f.submit "Go" %>
  <% end %> 
```

如果我尝试复制该代码并将其放入我`application.html.erb`的 .

```
undefined local variable or method `resource' for #<#<Class:0x3cb62c8>:0x3c73b00> 
```

那么我可以只使用普通的导轨形式`/users/sign_in`作为动作吗？登录后如何告诉设计重定向到哪里？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-26T10:00:09.517

We have a wiki page for that on the Devise wiki:

[https://github.com/plataformatec/devise/wiki/How-To:-Display-a-custom-sign_in-form-anywhere-in-your-app](https://github.com/plataformatec/devise/wiki/How-To:-Display-a-custom-sign_in-form-anywhere-in-your-app)

Enjoy!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T01:09:31.063

您必须`@user = User.new`在所有将显示带有登录表单的标题的控制器操作中包括在内。

例如，假设您有一个带有 Home 操作的 Pages 控制器。并且您想在应用程序布局的导航中显示登录表单。

```
class PagesController < ApplicationController
  def home
    @user = User.new
  end
end 
```

在 application.html.haml 上，你会有类似的东西

```
- if user_signed_in?
  = link_to "sign out", destroy_user_session_path, method: :delete
- else
  = form_for(resource, :as => resource_name, :url => session_path(resource_name), :html => {:class => 'main'}) do |f| 
  ... 
```

# xml - 如何将常规文本文件包装成 XML？

> ID：13079082
> 
> 赞同：0
> 
> 时间：2012-10-26T00:05:26.707
> 
> 标签：xml, text, cdata

我有常规文件，需要将其包装成 XML。平面文件可能包含任何合法的ASCII字符，包括'、、<、>、换行符等。我还要求保持原始文件内容完整，即没有编码或转义。这甚至可能吗？我在想CDATA...谢谢，托马斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T00:09:12.453

您可以使用 CDATA，只要`]]>`在文本文件中没有出现 。

或者，您可以对其进行 BASE64 编码。

# mysql - 子查询连接和总困境再次

> ID：13079084
> 
> 赞同：0
> 
> 时间：2012-10-26T00:06:06.030
> 
> 标签：mysql, join, sum

所以这是我最新的尝试者 .. 尝试添加子查询的结果以获取另一个字段或总计...但是总而言之，这种*简单的*语法似乎不起作用.. 有人可以指出我正确的方向吗...提前致谢

```
 SELECT 
    sub_events.name AS sub_event, 
    clients.name AS client, 
    divisions.name AS division, 
    subdivisions.name AS subdivision, 
    (SELECT CONCAT(name,' ',surname) FROM users WHERE id = bookings.host_id) AS host,
    CONCAT(users.name,'  ',users.surname) AS name, 
    (SELECT client_cost FROM itineraries WHERE itinerary_type_id = 1 AND itinerary_booking_id = 1 AND booking_id = bookings.id AND client_cost IS NOT NULL) AS flight, 
    (SELECT client_cost FROM itineraries WHERE itinerary_type_id = 1 and itinerary_booking_id = 2 AND booking_id = bookings.id AND client_cost IS NOT NULL) AS flight_change, 
    (SELECT client_cost FROM itineraries WHERE itinerary_type_id = 2 AND itinerary_booking_id = 1 AND booking_id = bookings.id AND client_cost IS NOT NULL) AS hotel, 
    (SELECT client_cost FROM itineraries WHERE itinerary_type_id = 2 and itinerary_booking_id = 3 AND booking_id = bookings.id AND client_cost IS NOT NULL) AS hotel_change, 
    (SELECT client_cost FROM itineraries WHERE itinerary_type_id = 3  AND itinerary_booking_id = 1 AND booking_id = bookings.id AND client_cost IS NOT NULL)  AS transfer, 
    (SELECT client_cost FROM itineraries WHERE itinerary_type_id = 3 AND itinerary_booking_id = 4 AND booking_id = bookings.id AND client_cost IS NOT NULL) AS transfer_change
    (SELECT SUM((SELECT client_cost FROM itineraries WHERE itinerary_type_id = 3 AND itinerary_booking_id = 4 AND booking_id = bookings.id AND client_cost IS NOT NULL)
            +(SELECT client_cost FROM itineraries WHERE itinerary_type_id = 1 and itinerary_booking_id = 2 AND booking_id = bookings.id AND client_cost IS NOT NULL)
            +(SELECT client_cost FROM itineraries WHERE itinerary_type_id = 2 AND itinerary_booking_id = 1 AND booking_id = bookings.id AND client_cost IS NOT NULL)
            +(SELECT client_cost FROM itineraries WHERE itinerary_type_id = 2 and itinerary_booking_id = 3 AND booking_id = bookings.id AND client_cost IS NOT NULL)
            +(SELECT client_cost FROM itineraries WHERE itinerary_type_id = 3  AND itinerary_booking_id = 1 AND booking_id = bookings.id AND client_cost IS NOT NULL)
            +(SELECT client_cost FROM itineraries WHERE itinerary_type_id = 3 AND itinerary_booking_id = 4 AND booking_id = bookings.id AND client_cost IS NOT NULL)) AS Total)
FROM users 
JOIN bookings ON bookings.guest_id = users.id 
JOIN clients ON users.client_id = bookings.client_id 
JOIN details ON details.user_id = users.id 
JOIN divisions ON divisions.client_id = users.client_id 
JOIN subdivisions ON subdivisions.division_id = bookings.division_id 
JOIN sub_events ON sub_events.id = bookings.sub_event_id 
JOIN itineraries ON itineraries.booking_id = bookings.id 
GROUP BY bookings.id` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T02:21:05.740

你不想要`SUM()`，你只想添加它们：

```
... AS transfer_change,
(SELECT client_cost FROM itineraries ...) +
(SELECT client_cost FROM itineraries ...) +
... +
(SELECT client_cost FROM itineraries ...) AS Total 
```

然而，这是一个可怕的查询，并且由于大量相关的子查询而表现得像废话。您可以通过简单地加入行程和一些`sum()`基于`if`or`case`语句的值来实现所有这些。

# gwt - GXT 3，可编辑网格，需要在输入时执行操作

> ID：13079086
> 
> 赞同：1
> 
> 时间：2012-10-26T00:06:15.053
> 
> 标签：gwt, datagrid, extjs, gxt

我是 GXT 3 的新手，对 API 感到困惑。也许你可以澄清一下。

在编辑器网格中，如何捕捉和检查在焦点单元格内按下的键盘键？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T01:22:27.527

1.  创建您的网格并将其传递给 GridEditing 实例：

    ```
     final GridEditing<MyType> ge = new GridInlineEditing<MyType>(grid); 
    ```

    // 注意：最终网格 grid = new Grid(store, cm);

    // 注意：ColumnModel cm = new ColumnModel(configs);

    // 注意：List> configs = new ArrayList>();

2.  构建您的 ColumnConfig

    ```
    ColumnConfig<MyType, String> kanji = new ColumnConfig<MyType, String>(kfgProps.kanji()); 
    ```

    // 注意：这里的 kfgProps 扩展了 PropertyAccess

3.  添加您的编辑器

    ```
    ge.addEditor(kanji, text); 
    ```

    // 注意： text = new TextField();

4.  添加你的 DomHandler

    ```
    text.addDomHandler(new KeyDownHandler() {

        @Override public void onKeyDown(KeyDownEvent event) {

            if (KeyCodes.KEY_ENTER == event.getNativeEvent().getKeyCode()) {

                // do whatever

            }
        }

    }, KeyDownEvent.getType()); 
    ```

# mysql - 如何求和行值并将结果保存在新的总列中？

> ID：13079088
> 
> 赞同：0
> 
> 时间：2012-10-26T00:06:15.373
> 
> 标签：mysql, sql, database

我需要计算一些行的库存总和，不同公司存在相同的产品，所以我需要计算所有产品的 SUM/Total，每个产品名称，这是我想要实现的结果：

```
ID | Name     | Company | Stock | Total Stock
1  | Product1 | Company1| 10    | 30
2  | Product1 | Company2| 10    | 30
3  | Product1 | Company2| 10    | 30
4  | Product2 | Company1| 10    | 15
5  | Product2 | Company2| 5     | 15
6  | Product3 | Company2| 5     | 5
7  | Product4 | Company1| 6     | 10
8  | Product4 | Company2| 4     | 10 
```

等等... 总库存是**Select SUM(Stock) From Product Where Name="Product1"** 我如何保存这个结果的总和？我应该使用触发器还是过程？我有基本的 SQL 知识

这需要每 30 分钟或每次更新一行时运行一次。

产品表有大约 40.000 个产品。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T00:08:10.537

```
SELECT  a.*, b.totalStock
FROM    tableName a
        INNER JOIN
        (
            SELECT Name, SUM(Stock) totalStock
            FROM tableName
            GROUP BY Name
        ) b on a.name = b.name
-- WHERE a.Name = 'Product1' 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!2/b196a/1)

*PS：你需要使用`ID`而不是`Name`.*

# prolog - 测试以查看列表/变量的所有元素是否为真

> ID：13079091
> 
> 赞同：0
> 
> 时间：2012-10-26T00:06:41.940
> 
> 标签：prolog

我正在编写一个顾问程序，为学生选择下学期的课程。其中一项任务是检查学生是否具备所有先决条件。到目前为止，我有：

```
hasPrereqs(Student, Class) :-
    (prereq(Pre, Class) -> 
        hasClass(Student, Pre);
    true).

hasClass(Student, Class) :-
    (creditFor(Student, Class);
    currentlyTaking(Student, Class)). 
```

prereqs 声明如下：

```
prereq(csc140, csc145).
prereq(csc140, csc180).
prereq(csc140, csc198).
prereq([csc140, csc130], csc201).
prereq(csc145, csc201). 
```

这适用于所有可能性，除非另一个课程需要两个课程（例如`csc201`，学生可以参加 csc140 和 csc130 或仅 csc140）。我认为列表是要走的路，但我不知道如何实现它。

我尝试创建另一个`hasPrereqs`如下：

```
hasPrereqs(Student, Class) :-
forall(prereq(Pre, Class),
(compound(Pre) -> 
    hasClass(Student, Pre)). 
```

这个不起作用，因为`Pre`它是一个列表，而不是一个直接的原子，因此：

```
creditFor(somekittens, csc130).
creditFor(somekittens, csc140).
/* Returns false, because I don't have credit for the list, just the two classes */
creditFor(somekittens, [csc130, csc140]). 
```

如何设置系统以便需要其他几个课程的课程正常工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T23:44:00.343

我会这样做：

```
hasPrereqs(Student, Class) :-
  prereq(Class, Pres),
  forall(member(Pre, Pres), hasClass(Student, Pre)).

hasClass(Student, Class) :-
  (creditFor(Student, Class);
  currentlyTaking(Student, Class)).

prereq(csc140, []).
prereq(csc145, [csc140]).
prereq(csc180, [csc140]).
prereq(csc198, [csc140]).
prereq(csc201, [csc140, csc130]).
prereq(csc201, [csc145]). 
```

我交换了参数的顺序，`prereq/2`并将先决条件列成一个列表，不管有多少。这使得代码使用`prereq/2`更加一致，并为没有先决条件的类提供了一个符号，即`prereq(foo, [])`.

然后我使用`forall/2`并`member/2`确保学生满足所有先决条件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T00:06:41.940

任何有函数式编程背景的人（比如我！）都想这样做：

```
foreach(var i=0;i<Class.length;i++) {
    if(!hasClass(Student, Class[i])) {
         return false;
    }
}
return true; 
```

不幸的是，这不起作用。没有简单的方法（据我所知）遍历 Prolog 中的列表并返回`true`IFF 所有元素都返回 true。相反，使用递归方法遍历列表。`hasClass`为这样添加另一个定义：

```
hasClass(Student, ClassList) :-
    /* Splits up the list into:
    H = the first element of the list as an atom
    T = The rest of the list elements as a list
    (if there's only one list element, T is equal to []) */
    [H|T] = ClassList,
    hasClass(Student, H),
    /* if T isn't equal to [], recursively check the rest of the list's elements */
    (T \= [] -> hasClass(Student, T);true). 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T08:31:33.147

```
hasPrereqs(Student, Class) :-
    (prereq(Pre, Class) -> 
        hasClass(Student, Pre);
    true). 
```

无论变量实例化和您拥有的实际事实数据如何，它**始终是正确的。**唯一的目的可能是 prereq/2 或 hasClass/2 执行的一些副作用（如 IO 或 DB 修改），而这似乎不是。

现在来回答。SWI-prolog 有[is_list](http://www.swi-prolog.org/pldoc/doc_for?object=is_list/1) /1 和[maplist](http://www.swi-prolog.org/pldoc/doc_for?object=section%282,%27A.2%27,swi%28%27/doc/Manual/apply.html%27%29%29) /2，后者可以对每个元素重复相同的测试，只有当测试对所有元素都成功时才为真：

**编辑**类本来是Pre

```
hasPrereqs(Student, Class) :-
 forall(prereq(Pre, Class),
   (   is_list(Pre)
   ->  maplist(hasClass(Student), Pre)
   ;   hasClass(Student, Pre)
   )). 
```

或者更好，如果您打算仅将 hasClass 重用于测试，并假设一个已经在工作的 hasClass/2

```
hasPrereqs(Student, Class) :-
   forall(prereq(Pre, Class), hasClass(Student, Pre)).

hasClass(Student, Classes) :-
   is_list(Classes) -> maplist(hasClass(Student), Classes). 
```

**编辑**以下是错误的，在最后一次通话时循环...

还有一种方式。在您的回答中，您接近解决方案：

```
hasClass(Student, ClassList) :-
    (   [H|T] = ClassList
    ->  hasClass(Student, H), hasClass(Student, T)
    ;   hasClass(Student, ClassList)
    ). 
```

**编辑**解决方案应该更简单：

```
hasClass(Student, [Class|ClassList]) :-
    hasClass(Student, Class),
    !, hasClass(Student, ClassList).
hasClass(_Student, []). 
```

# file - 如何基于公共字段组合文件？

> ID：13079092
> 
> 赞同：1
> 
> 时间：2012-10-26T00:06:43.097
> 
> 标签：file, bash, unix, sorting

> **可能重复：**
> [如果存在于第一个文件/bash 脚本中，则按键合并两个文件](https://stackoverflow.com/questions/10364455/merge-two-files-by-key-if-exists-in-the-first-file-bash-script)

我正在尝试根据冒号前面的数字来考虑将这两种文本选择结合起来的好方法（这些是我将要处理的格式相似的文本示例）。这将在 bash 环境中完成，我尝试过使用 cut 和其他命令来完成它的方法，但我无法想出任何可行的方法。

```
selection 1
1:829ede2828e9
2:893h8ew9nediucn
3:mdheuwe883ud8932

selection 2
1:stack
2:over
3:flow 
```

输出将类似于以下内容

```
1:stack:829ede2828e9
2:over:893h8ew9nediucn
3:flow:mdheuwe883ud8932 
```

所以它本质上是根据冒号前面的数字组合和匹配文件。该代码将用于处理大约 39,000 行文本。我在这个时间点被难住了，所以我非常感谢我能得到的任何帮助，谢谢！还忘了提到数字将不一致（例如 1、3、4、5、9、11、22），尽管两个文件/文本集将具有相同的数字集。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T00:35:35.690

您可以像这样使用[连接](http://linux.die.net/man/1/join)：

```
join -t: selection2.txt selection1.txt 
```

# keyboard - Love2D keyboard.isDown 键值？

> ID：13079094
> 
> 赞同：4
> 
> 时间：2012-10-26T00:06:47.370
> 
> 标签：keyboard, lua, love2d

某处是否有键值列表？我可能已经完全昏​​迷了，但我还没有找到一个清单。有人可以帮忙吗？

# c++ - OpenCV - hybridtrackingsample.cpp 样本中的错误

> ID：13079098
> 
> 赞同：0
> 
> 时间：2012-10-26T00:07:48.760
> 
> 标签：c++, opencv, sample

我正在尝试从名为 cpp 的 opencv 文件夹运行此示例。正如我在标题中提到的，它的名字是 hybridtrackingsample.cpp

我没有在这里上传代码，因为帖子的格式有一些问题，有点乱。你可以在这里找到代码：http: //fossies.org/unix/misc/OpenCV-2.4.2.tar.gz:a/OpenCV-2.4.2/samples/cpp/ [hybridtrackingsample.cpp](http://fossies.org/unix/misc/OpenCV-2.4.2.tar.gz:a/OpenCV-2.4.2/samples/cpp/hybridtrackingsample.cpp)

或者当然在您的 opencv 示例文件夹中。

我得到的错误是这个。

> ./test live VIDIOC_QUERYMENU：无效参数 VIDIOC_QUERYMENU：无效参数 VIDIOC_QUERYMENU：无效参数 VIDIOC_QUERYMENU：无效参数 VIDIOC_QUERYMENU：无效参数 VIDIOC_QUERYMENU：无效参数 VIDIOC_QUERYMENU：无效参数 打开相机 VIDIOC_QUERYMENU：无效参数 VIDIOC_QUERYMENU：无效参数 VIDIOC_QUERYMENU：无效参数VIDIOC_QUERYMENU：无效参数 VIDIOC_QUERYMENU：无效参数 VIDIOC_QUERYMENU：无效参数 OpenCV 错误：CvFeatureTracker 中的错误参数（未知功能类型），文件 /home/stefos/opencv2/modules/contrib/src/featuretracker.cpp，第 70 行终止后调用'cv::Exception' 的实例 what(): /home/stefos/opencv2/modules/contrib/src/featuretracker.cpp:70: 错误：(-5) 函数 CvFeatureTracker 中的未知特征类型已中止

关于出了什么问题的任何想法？

我不得不提一下，即使项目运行时没有错误，上面列出的无效参数也会在所有包含相机使用的项目中重复出现。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T01:48:58.890

我在 CvFeatureTracker 方法/函数的第 61 行附近的 OpenCV-2.4.3/modules/contrib/src/featuretracker.cpp 中看到了 opencv 2.4.3 中的错误，其中程序员似乎遗漏了两个（需要）“break; " 那里的 C++ switch 语句中的语句。

在第 61 行附近的 OpenCV-2.4.3/modules/contrib/src/featuretracker.cpp 中，

之前

```
case CvFeatureTrackerParams::SURF: 
```

和

```
default: 
```

添加休息时间；...

然后重建/安装opencv。

这让我的 hybridtrackingsample.cpp 示例运行良好。（记住不要在不拖动的情况下单击鼠标左键。如果不拖动（选择子区域）hybridtrackingsample 会在尝试处理空矩形时死掉......）

# php - 从 1000 到 2000 php mysql

> ID：13079100
> 
> 赞同：1
> 
> 时间：2012-10-26T00:07:53.847
> 
> 标签：php, mysql, random

我正在尝试运行 mysql 查询，该查询从排名从 5000 到 15000 的表中选择所有用户。这两个已放入变量中。让我把它改成代码，它会更好地解释它。

```
$user_rank = 10000 //this is actually a $row[''] pulled from a database
$rank_above = $user_rank + 5000;
$rank_below = $user_rank - 5000;

$fetch_users = mysql_query("SELECT * FROM users WHERE rank = '$rank_below' ?to? '$rank_above'"); 
```

但是，我还想让结果成为 LIMIT 1 个随机结果，以便它只从 users 表中选择一个随机用户。我是否以正确的方式去做这件事？非常感谢任何帮助，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T00:09:14.213

您可以在 mysql 中使用[BETWEEN](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#operator_between)子句

```
$sql = "SELECT * FROM users WHERE rank BETWEEN  5000 AND 15000" 
```

例子：

```
$sql = "SELECT * FROM users WHERE rank BETWEEN %d AND %d"
$sql = sprintf($sql,(int)$rank_above,(int)$rank_below); // sanitize user input 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T00:10:49.580

试试这个：

```
SELECT * FROM users
WHERE rank BETWEEN $rank_below AND $rank_above
ORDER BY RAND()
LIMIT 1; 
```

# c++ - QLabel wordWrap 设置产生意外的 sizeHint

> ID：13079102
> 
> 赞同：2
> 
> 时间：2012-10-26T00:08:07.313
> 
> 标签：c++, qt, qt4.8

下面是一个非常简单的 Qt ui 文件来显示我的问题。（在 Windows 7 64 位上使用 Qt 4.8.0）

要重现该问题，请在 Windows 上的设计器中加载文件（也可能在其他操作系统上发生）并按 ctrl+R 以显示文件描述的对话框。开始在编辑字段中输入，然后抓住右下角来调整对话框的大小。对话框的大小将弹出以适合标签的预期新文本。出乎意料的是，标签底部有可变数量的空间，具体取决于您在行编辑中输入的乱码（有时更多，有时更少）。

当 wordWrap QLabel 基本上具有固定宽度时，为什么它会对它应该有多高感到困惑？

测试.ui

```
<?xml version="1.0" encoding="UTF-8"?>
<ui version="4.0">
 <class>Dialog</class>
 <widget class="QDialog" name="Dialog">
  <property name="geometry">
   <rect>
    <x>0</x>
    <y>0</y>
    <width>360</width>
    <height>86</height>
   </rect>
  </property>
  <property name="sizePolicy">
   <sizepolicy hsizetype="Fixed" vsizetype="Fixed">
    <horstretch>0</horstretch>
    <verstretch>0</verstretch>
   </sizepolicy>
  </property>
  <property name="minimumSize">
   <size>
    <width>360</width>
    <height>0</height>
   </size>
  </property>
  <property name="maximumSize">
   <size>
    <width>360</width>
    <height>16777215</height>
   </size>
  </property>
  <property name="windowTitle">
   <string>Dialog</string>
  </property>
  <layout class="QGridLayout" name="gridLayout">
   <item row="2" column="0">
    <widget class="QDialogButtonBox" name="buttonBox">
     <property name="orientation">
      <enum>Qt::Horizontal</enum>
     </property>
     <property name="standardButtons">
      <set>QDialogButtonBox::Ok</set>
     </property>
    </widget>
   </item>
   <item row="1" column="0">
    <widget class="QLabel" name="label">
     <property name="alignment">
      <set>Qt::AlignLeading|Qt::AlignLeft|Qt::AlignTop</set>
     </property>
     <property name="wordWrap">
      <bool>true</bool>
     </property>
    </widget>
   </item>
   <item row="0" column="0">
    <widget class="QLineEdit" name="lineEdit"/>
   </item>
  </layout>
 </widget>
 <resources/>
 <connections>
  <connection>
   <sender>lineEdit</sender>
   <signal>textChanged(QString)</signal>
   <receiver>label</receiver>
   <slot>setText(QString)</slot>
   <hints>
    <hint type="sourcelabel">
     <x>120</x>
     <y>14</y>
    </hint>
    <hint type="destinationlabel">
     <x>146</x>
     <y>47</y>
    </hint>
   </hints>
  </connection>
  <connection>
   <sender>buttonBox</sender>
   <signal>rejected()</signal>
   <receiver>Dialog</receiver>
   <slot>reject()</slot>
   <hints>
    <hint type="sourcelabel">
     <x>304</x>
     <y>76</y>
    </hint>
    <hint type="destinationlabel">
     <x>286</x>
     <y>85</y>
    </hint>
   </hints>
  </connection>
  <connection>
   <sender>buttonBox</sender>
   <signal>accepted()</signal>
   <receiver>Dialog</receiver>
   <slot>accept()</slot>
   <hints>
    <hint type="sourcelabel">
     <x>236</x>
     <y>76</y>
    </hint>
    <hint type="destinationlabel">
     <x>157</x>
     <y>85</y>
    </hint>
   </hints>
  </connection>
 </connections>
</ui> 
```

# php - 回显javascript时解析PHP文件中的错误

> ID：13079104
> 
> 赞同：-1
> 
> 时间：2012-10-26T00:08:17.857
> 
> 标签：php, javascript

> **可能重复：**
> [参考 - 这个错误在 PHP 中意味着什么？](https://stackoverflow.com/questions/12769982/reference-what-does-this-error-mean-in-php)

我不断收到“解析错误：语法错误，意外 '('，期待 T_VARIABLE 或 '$' in...”

这是导致问题的线路，不知道这里发生了什么？

```
$text = "<script>window.setInterval(function(){$('#liveData').load('liveUpdate.php');}, 1000);</script>"; 
```

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-26T00:23:12.727

你应该`$`在你的`$text`

```
$text = "<script>window.setInterval(function(){\$('#liveData').load('liveUpdate.php');}, 1000);</script>"; 
```

或者你只使用单引号。

因为`$`在双引号后面会跟一个php变量名，`$(XXXX`是一个无效的php变量。

所以最好的方法是将 javascript (jquery) 分离成一个 .js 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T00:12:49.720

尝试这个，

```
$text = '<script>window.setInterval(function(){$("#liveData").load("liveUpdate.php");}, 1000);</script>'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T00:12:56.177

```
$text = '<script>window.setInterval(function(){$("#liveData").load("liveUpdate.php");}, 1000);</script>'; 
```

# validation - 10 位数的电话号码……这对美国来说足够了吗？

> ID：13079108
> 
> 赞同：3
> 
> 时间：2012-10-26T00:08:37.110
> 
> 标签：validation, phone-number

我的应用程序可以在美国的任何地方使用，但将被服务于自己地区的本地企业使用。

由于我的开发项目现在存在（我可以更改它），我只存储 10 位数字。我想我的软件可能会在 10 年后使用，尽管我当然可以发布更新。但由于趋势是每个人都有一部电话，而不是每个家庭只有一个号码，我知道美国的 10 位数电话号码已经用完了。

我知道它可能看起来不是这样，但是是的，我已经用谷歌搜索过，我寻求的答案仍然像泥巴一样清晰。

我读到美国有一些地区（我不知道在哪里），即使在同一个区号内，也必须先拨打 1 和区号。其他时候，只需拨区号，不用拨 1，即使在同一个区号内。

我的问题是：为了适应整个美国和可预见的未来，我是否需要在数字前面添加一个“可选 1”，以复选框或其他设备的形式，以区分需要 1 的人和那些需要 1 的人不？未来是否还会出现另一个电话号码架构？或者更简单地说：10 位数就够了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T00:13:52.463

如果您只想存储北美号码就可以了

[北美号码计划](https://en.wikipedia.org/wiki/North_American_Numbering_Plan)

10是北美的标准长度（包括加拿大）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T21:42:40.220

您应该允许 15 位数字，包括国家/地区代码。对于许多国家/地区，您已经需要 12 到 14 位数字（包括国家代码）。

以 E.164 格式存储所有数字，包括国家代码，没有空格或标点符号。这将允许在国际上轻松扩展到其他国家，并且如果任何国家/地区使用的数字长度发生变化，也允许操纵数据库中的数字。

有传言说，在未来一两年内，美国的数字将增长一个数字。您现在应该为此做好计划，而不是当您存储了数千万个数字时。

国家号码计划不断变化。如果您知道国家 980 中的区号 765 正在更改为区号 77，并且所有本地号码的开头都添加了 88，如果数据库中的所有号码都包含国家/地区代码，那么进行更改是一个简单的操作。

# cabal - 让 haskellmode-vim 与 cabal 项目一起工作

> ID：13079109
> 
> 赞同：2
> 
> 时间：2012-10-26T00:08:47.697
> 
> 标签：cabal, haskell-mode

当我在 vim 中构建一个 cabal 项目时，使用

```
:set makeprg=cabal\ build
:make 
```

[haskellmode-vim](https://github.com/lukerandall/haskellmode-vim)似乎没有找到类型信息。`_t`当光标打开时做`foo`会给我“foo type not known”。

如何让 haskellmode-vim 从 cabal 构建中获取类型信息？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T23:45:40.713

Doing`:GHCReload`允许我使用`_t`and `_T`。

# vb.net - 将值设置为不存在的数组项？

> ID：13079111
> 
> 赞同：2
> 
> 时间：2012-10-26T00:08:55.153
> 
> 标签：vb.net, exception

请看下面的代码：

```
Try
  Dim Reader As New System.IO.StreamReader(PositionsFileName)
  Do While Reader.Peek() <> -1
    Dim Positions() As String = Reader.ReadLine().Split("|")
    If (Positions(0) Is Nothing) Or (Positions(1) Is Nothing) Or (Positions(2) Is Nothing) Then
      ' something
    End If
  Loop
Catch ex As Exception
  ex.Source = Nothing
End Try 
```

我正在阅读一个文件并期待格式化某事|某事1|某事2。我正在尝试将它设置为“Nothing”到不存在的数组索引（文件格式已损坏），以便 If 语句顺利进行，但似乎我做错了。你能给我一些提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T13:29:57.253

只需在拆分后检查 position.length 即可。此外，如果您想检查“||Something2|Something3”之类的情况，第一个位置将是“”而不是 Nothing。orelse 是一个短路，如果满足较早的条件，它将阻止后一个条件被评估。

```
If Positions.length < 3 OrElse Positions(0) = "" OrElse Positions(1) = "" OrElse Positions(2) = "" Then
  ' something
End If 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T01:25:08.850

我假设每个有效行只有三个“东西”。如果是这样，请尝试像这样编写您的`Positions()`作业：

```
Dim Positions() As String = Reader _
    .ReadLine() _
    .Split("|") _
    .Concat(Enumerable.Repeat("Nothing", 3)) _
    .Take(3) _
    .ToArray() 
```

这将确保您每次都拥有三个项目。无需检查任何内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T01:10:52.920

如果您这样做`Split("|")`并且只有 2 个项目（例如，`something|something1`），`Positions(2)`则不会`Nothing`，它将不存在。所以你的代码会引发一个异常，关于`index out of bounds of the array`.

如果您需要在这种情况下`Positions(2)`包含`Nothing`，您的代码可以如下所示：

```
Dim Positions(2) As String
Dim tmpArray() As String = Reader.ReadLine().Split("|")
For i = 0 To UBound(Positions)
  If i <= UBound(tmpArray) Then
    Positions(i) = tmpArray(i)
  Else
    Positions(i) = Nothing
  End If
Next 
```

# php - PHP MySQLi 准备好的语句 - 检查是否已经存在

> ID：13079113
> 
> 赞同：0
> 
> 时间：2012-10-26T00:09:10.503
> 
> 标签：php, mysql

对于用户注册，我想确保用户名和电子邮件未被使用。我已经在代码的其他地方连接到 $mysqli。

```
$usr = $mysqli->real_escape_string($_POST['susername']);
$eml = $mysqli->real_escape_string($_POST['semail']); 

$stmt = $mysqli->prepare("SELECT userid FROM users WHERE username=? || email=?");
$stmt->bind_param("is", $usr, $eml);
$stmt->execute();
$stmt->bind_result($count);
$stmt->close(); 
```

但是， count 什么都不包含。如何检查数据库中是否已经存在某些内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T00:29:06.437

改变，

```
stmt = $mysqli->prepare("SELECT userid FROM users WHERE username=? || email=?"); 
```

到

```
stmt = $mysqli->prepare("SELECT count(userid) FROM users WHERE username=? || email=?"); 
```

然后你应该使用[`fetch()`](http://www.php.net/manual/en/mysqli-stmt.fetch.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T00:28:06.580

你的用户名是整数吗？你可以试试下面的代码，

`$stmt->bind_param("ss", $usr, $eml); //ss`

# c# - P/Invoking unmanaged C++ code from c# - 获取“试图访问受保护的内存错误”

> ID：13079117
> 
> 赞同：0
> 
> 时间：2012-10-26T00:09:22.673
> 
> 标签：c#, c++, dllimport, simd

简而言之，我正在尝试使用非托管 C++ 乘法函数从 C# 进行 SIMD 数学运算并弄乱指针。

C++ 函数：

```
extern "C" __declspec(dllexport) void SIMDVector4Mult( __m128* a, __m128* b )
{
    __m128 c = _mm_mul_ps( *a, *b );
    memcpy( &(a->m128_f32), &(c.m128_f32), sizeof( a->m128_f32 ) );
} 
```

C# SIMDVector4 结构：

```
[StructLayout( LayoutKind.Sequential, Size = 16 )]
struct SIMDVector4
{
    float x;
    float y;
    float z;
    float w;

    public SIMDVector4( float x, float y, float z, float w )
    {
        this.x = x;
        this.y = y;
        this.z = z;
        this.w = w;
    }

    public override string ToString( )
    {
        return "X: " + x + ", Y: " + y + ", Z: " + z + ", W: " + w;
    }

    public static unsafe SIMDVector4 operator *( SIMDVector4 a, SIMDVector4 b )
    {
        SIMDVector4Mult( ref a, ref b );
        return a;
    }

    [DllImport("SIMDMathLibrary.dll", CallingConvention = CallingConvention.Cdecl )]
    extern private static unsafe void SIMDVector4Mult( ref SIMDVector4 a, ref SIMDVector4 b );
} 
```

目的是将 SIMD 数学添加到我的 C# 代码库中，以及使用 P/Invoke 和结合 C# 和 C++ 进行一些练习。

如果我将它们作为 float* 变量接收，将它们 memcpy 到临时 __m128 变量，进行乘法运算，然后将它们 memcpy 回来，它就可以工作。但这比在 C# 中将每个变量单独相乘要慢。我使用优化的 Vector4 类对此进行了测试；它的性能大约是复制-乘法-复制方法的十倍。

我已经尝试了几乎十几种不同的方法，包括当前设置，它遇到了标题中提到的受保护内存读/写访问错误：“尝试读取或写入受保护内存。这通常表明其他内存已损坏。”

如何修复此错误？我应该修复这个错误吗？我应该尝试另一种完全实现意图的方法吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T01:36:24.517

这是一个应该可以工作的更新版本。现在该结构包装了一个对齐的 ptr，所以我们需要额外的 4-8 个字节。不确定由于间接导致的性能命中是什么。VirtualAlloc 一次对齐一堆，所以我们一次分配一个大块。

下面的例子非常草率。如果可能，您可能还想考虑使用 CLI/C++。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Runtime.InteropServices;
using System.Runtime.ConstrainedExecution;

namespace ConsoleApplication1
{
    class Program
    {
        unsafe static void Main(string[] args)
        {
            using (AlignedBlock block = new AlignedBlock(SIMDVector4.Sizeof, AlignedBlock.AllocationGranularity / SIMDVector4.Sizeof))
            {
                for (int index = 0; index < block.Count; index++)
                {
                    SIMDVector4.Create(block[index], 1, 2, 3, 4);
                }

                SIMDVector4 a = SIMDVector4.Create(block[0], 1, 2, 3, 4);
                SIMDVector4 b = SIMDVector4.Create(block[1], 1, 2, 3, 4);
                SIMDVector4 c = SIMDVector4.Create(block[2], 5, 6, 7, 8);
                SIMDVector4 d = a * b * c;
                Console.WriteLine(d.ToString());
            }

            Console.ReadLine();
        }
    }

    public sealed unsafe class AlignedBlock : CriticalFinalizerObject, IDisposable
    {
        private void* ptr;

        static AlignedBlock()
        {
            SYSTEM_INFO info = new SYSTEM_INFO();
            NativeMethods.GetSystemInfo(ref info);
            PageSize = (int)info.dwPageSize;
            AllocationGranularity = (int)info.dwAllocationGranularity;
        }

        public AlignedBlock(int itemSize, int count)
        {
            this.ItemSize = itemSize; 
            this.Count = count;
            ptr = NativeMethods.VirtualAlloc(IntPtr.Zero, new UIntPtr((uint)this.ByteSize), AllocationType.COMMIT, MemoryProtection.READWRITE).ToPointer();
        }

        ~AlignedBlock()
        {
            this.Dispose();
        }

        public static int PageSize { get; private set; }
        public static int AllocationGranularity { get; private set; }
        public int ItemSize { get; private set; }
        public int Count { get; private set; }
        public int ByteSize
        {
            get
            {
                return this.Count * this.ItemSize;
            }
        }

        public void* this[int index]
        {
            get
            {
                int offset = this.ItemSize * index;
                return ((byte*) this.ptr) + offset;
            }
        }

        public void Dispose()
        {
            bool result = NativeMethods.VirtualFree(new IntPtr(this.ptr), new UIntPtr(0), 0x8000);
            this.ptr = null;
        }
    }

    [StructLayout(LayoutKind.Sequential)]
    unsafe struct SIMDVector4
    {
        public const int Sizeof = 16;
        private float* ptr;

        public static SIMDVector4 Create(void* ptr, float x, float y, float z, float w)
        {
            float* value = (float*)ptr;

            SIMDVector4 vector = new SIMDVector4(value);
            *value = x;
            value++;
            *value = y;
            value++;
            *value = z;
            value++;
            *value = w;
            value++;
            return vector;
        }

        private SIMDVector4(float* ptr)
        {
            this.ptr = ptr;
        }

        public bool IsEmpty
        {
            get
            {
                return this.ptr == null;
            }
        }
        public float x
        {
            get
            {
                if (this.IsEmpty)
                {
                    return 0f;
                }

                return *(ptr);
            }

            set
            {
                if (!this.IsEmpty)
                {
                    *(this.ptr) = value;
                }
            }

        }
        public float y
        {
            get
            {
                if (this.IsEmpty)
                {
                    return 0f;
                }

                return *(ptr + 1);
            }

            set
            {
                if (!this.IsEmpty)
                {
                    *(this.ptr + 1) = value;
                }
            }

        }
        public float z
        {
            get
            {
                if (this.IsEmpty)
                {
                    return 0f;
                }

                return *(ptr + 2);
            }

            set
            {
                if (!this.IsEmpty)
                {
                    *(this.ptr + 2) = value;
                }
            }

        }
        public float w
        {
            get
            {
                if (this.IsEmpty)
                {
                    return 0f;
                }

                return *(ptr + 3);
            }

            set
            {
                if (!this.IsEmpty)
                {
                    *(this.ptr + 3) = value;
                }
            }
        }

        public override string ToString()
        {
            return "X: " + x + ", Y: " + y + ", Z: " + z + ", W: " + w;
        }

        public static SIMDVector4 operator *(SIMDVector4 a, SIMDVector4 b)
        {

            SIMDVector4Mult(a.ptr, b.ptr);
            return new SIMDVector4(a.ptr);
        }

        [DllImport(@"C:\Users\xxx\Documents\Visual Studio 2010\Projects\TestDll\Debug\TestDll.dll", CallingConvention = CallingConvention.Cdecl)]
        extern private static unsafe void SIMDVector4Mult(void* a, void* b);
    }

    internal static class NativeMethods
    {

        [DllImport("kernel32.dll", SetLastError = true)]
        public static extern bool VirtualFree(IntPtr lpAddress, UIntPtr dwSize,
               uint dwFreeType);

        [DllImport("kernel32.dll", SetLastError = true)]
        public static extern IntPtr VirtualAlloc(IntPtr lpAddress, UIntPtr dwSize,
               AllocationType flAllocationType, MemoryProtection flProtect);

        [DllImport("kernel32.dll")]
        public static extern void GetSystemInfo([MarshalAs(UnmanagedType.Struct)] ref SYSTEM_INFO lpSystemInfo);

    }

    [StructLayout(LayoutKind.Sequential)]
    public struct SYSTEM_INFO
    {
        internal _PROCESSOR_INFO_UNION uProcessorInfo;
        public uint dwPageSize;
        public IntPtr lpMinimumApplicationAddress;
        public IntPtr lpMaximumApplicationAddress;
        public IntPtr dwActiveProcessorMask;
        public uint dwNumberOfProcessors;
        public uint dwProcessorType;
        public uint dwAllocationGranularity;
        public ushort dwProcessorLevel;
        public ushort dwProcessorRevision;
    }

    [StructLayout(LayoutKind.Explicit)]
    public struct _PROCESSOR_INFO_UNION
    {
        [FieldOffset(0)]
        internal uint dwOemId;
        [FieldOffset(0)]
        internal ushort wProcessorArchitecture;
        [FieldOffset(2)]
        internal ushort wReserved;
    }

    [Flags()]
    public enum AllocationType : uint
    {
        COMMIT = 0x1000,
        RESERVE = 0x2000,
        RESET = 0x80000,
        LARGE_PAGES = 0x20000000,
        PHYSICAL = 0x400000,
        TOP_DOWN = 0x100000,
        WRITE_WATCH = 0x200000
    }

    [Flags()]
    public enum MemoryProtection : uint
    {
        EXECUTE = 0x10,
        EXECUTE_READ = 0x20,
        EXECUTE_READWRITE = 0x40,
        EXECUTE_WRITECOPY = 0x80,
        NOACCESS = 0x01,
        READONLY = 0x02,
        READWRITE = 0x04,
        WRITECOPY = 0x08,
        GUARD_Modifierflag = 0x100,
        NOCACHE_Modifierflag = 0x200,
        WRITECOMBINE_Modifierflag = 0x400
    }
} 
```

# c# - 完成时获取异步请求的返回

> ID：13079118
> 
> 赞同：0
> 
> 时间：2012-10-26T00:09:26.353
> 
> 标签：c#, asp.net, .net

我有一个异步请求触发另一个网页进行一些处理代码如下。我对此有一些问题。我希望请求被触发，然后忽略直到它完成，然后当它完成时，我想触发一封电子邮件。

回调似乎永远不会触发。我错过了什么？

```
private HttpWebRequest req = null;
private IAsyncResult result = null;

protected void btnUpload_Click(object sender, EventArgs e)
{
    StringBuilder pageUrl = "http://myurl.example.com";

    // Initialize web request
    req = (HttpWebRequest)WebRequest.Create(string.Format("{0}", pageUrl.ToString()));
    req.Method = "GET";

    // Start the asynchronous request.
    try
    {
        result = (IAsyncResult)req.BeginGetResponse(new AsyncCallback(RespCallback), null);
    }
    catch (Exception ex)
    {
        //lblProcess.Text += ex.Message.ToString();
    }
}

protected void RespCallback(IAsyncResult ar)
{
    using (WebResponse resp = req.EndGetResponse(ar))
    {
        //using (StreamReader reader = new StreamReader(resp.GetResponseStream())) {
        //    text = reader.ReadToEnd();
        //}

    //function that just sends an email
        SendBatchEmail();
    }
} 
```

# ruby-on-rails - Memcached 动态提要？

> ID：13079125
> 
> 赞同：0
> 
> 时间：2012-10-26T00:10:29.533
> 
> 标签：ruby-on-rails, ruby-on-rails-3, caching, memcached

我有一个来自当前用户正在关注的用户事件的动态提要，部分内容都是 memcached，但我也想为提要本身做这件事。我担心的是，如果我对它进行内存缓存，它将根据对缓存的第一次写入为每个用户显示相同的内容，而不是为每个唯一用户动态显示。

我将如何对提要和@following 进行内存缓存？如果当前用户关注另一个用户，我如何更新它？我假设我不能只用 <% cache "feed" do %> 包装它

注意：使用 Memcached 和 Dalli

```
<% @following = current_user.following.collect {|f| f["id"]} %>
<div class='content'>
<% unless Rsvp.where(:voter_id => @following, :status => 'going').where("start_time > ? AND start_time < ?", Time.now, Time.now.strftime('%Y-%m-%d 23:59:59.000000')).order("count_all desc").count(:group => :event_id).collect { |f| f[0] }.count == 0 %>
          <div class='date_bar_container'><div class='date_bar'>Today</div></div>
          <div class='content_wrapper'>
    <%= render :partial => 'events/event', :collection => Event.where(:id =>  Rsvp.where(:event_id => Rsvp.where(:voter_id => @following, :status => 'going').where("start_time > ? AND start_time < ?", Time.now.strftime('%Y-%m-%d 00:00:00.000000'), Time.now.strftime('%Y-%m-%d 23:59:59.000000')).order("count_all desc").count(:group => :event_id).collect { |f| f[0] }).select("DISTINCT event_id").collect(&:event_id)).order('start_time asc')%>
          </div>
<% end %>

<% unless Rsvp.where(:voter_id => @following, :status => 'going').where("start_time > ? AND start_time < ?", (Time.now + 1.day).strftime('%Y-%m-%d 00:00:00.000000'), (Time.now + 1.day).strftime('%Y-%m-%d 23:59:59.000000')).order("count_all desc").count(:group => :event_id).collect { |f| f[0] }.count == 0%>
          <div class='date_bar_container'><div class='date_bar'>Tomorrow</div></div>
          <div class='content_wrapper'>
    <%= render :partial => 'events/event', :collection => Event.where(:id =>  Rsvp.where(:event_id => Rsvp.where(:voter_id => @following, :status => 'going').where("start_time > ? AND start_time < ?", (Time.now + 1.day).strftime('%Y-%m-%d 00:00:00.000000'), (Time.now + 1.day).strftime('%Y-%m-%d 23:59:59.000000')).order("count_all desc").count(:group => :event_id).collect { |f| f[0] }).select("DISTINCT event_id").collect(&:event_id)).order('start_time asc')%>
    </div>
    <% end %>

<% (2..15).each do |f| %>
    <% unless Rsvp.where(:voter_id => @following, :status => 'going').where("start_time > ? AND start_time < ?", (Time.now + f.day).strftime('%Y-%m-%d 00:00:00.000000'), (Time.now + f.day).strftime('%Y-%m-%d 23:59:59.000000')).order("count_all desc").count(:group => :event_id).collect { |f| f[0] }.count == 0 %>
              <div class='date_bar_container'><div class='date_bar'><%= dayofweek((Time.now + f.day).wday) %>, <%= month((Time.now + f.day).month) %> <%= (Time.now + f.day).day %>, 2012</div></div>
              <div class='content_wrapper'>
        <%= render :partial => 'events/event', :collection => Event.where(:id =>  Rsvp.where(:event_id => Rsvp.where(:voter_id => @following, :status => 'going').where("start_time > ? AND start_time < ?", (Time.now + f.day).strftime('%Y-%m-%d 00:00:00.000000'), (Time.now + f.day).strftime('%Y-%m-%d 23:59:59.000000')).order("count_all desc").count(:group => :event_id).collect { |f| f[0] }).select("DISTINCT event_id").collect(&:event_id)).order('start_time asc')%>
         </div>
        <% end %>
<% end %>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T00:41:34.137

不相关，但您的视图中的模型代码/ sql 太多了。将它们打包在类方法或范围中。

关于缓存，如果您不希望每个用户看到相同的内容，那么您需要为每个用户设置不同的缓存键。这样做的一种方法是传递`action_suffix`选项，该选项会添加到用于生成缓存键的数据中（默认情况下它只是控制器和操作）。如果您将当前用户 ID 作为其中的一部分，那么缓存将基于每个用户完成。您还可以将带有任意缓存键的字符串传递给用户，而不是从控制器、操作和操作后缀构建它。

据说缓存到期是计算机科学中的两件困难的事情之一。至少有3个选项：

*   当您缓存某些内容时，请将 expires_in 设置为适当的时间跨度。当基础数据发生变化时：您接受用户看到的内容在您设置的时间跨度内可能已经过时。将其设置得高，他们会在很长一段时间内看到陈旧的数据，设置得太低，您将丢弃本可以保留的缓存数据。

例如：

```
 <% cache({:action_suffix => 'blah'}, :expires_in => 20.minutes  do %>
  ..
 <% end %> 
```

*   显式过期数据以响应模型更改，例如通过清扫器。记住所有可能发生这种情况的地方并记住在添加新东西时增加清扫器可能会很棘手

*   使用分代缓存键：构造您的缓存键，以便当基础数据更改时，缓存键也会更改。一个非常简单的示例是，如果您正在缓存有关用户的信息页面。您可以将缓存键设置为`user_#{user.id}_#{user.updated_at.to_i}`（或等效地，`user.cache_key`）。当用户更改时，无论如何，您使用的缓存键也会更改（因为`updated_at`将更改），因此您不会使用旧的缓存数据

# javascript - 'javascript:close()' 似乎不起作用

> ID：13079126
> 
> 赞同：0
> 
> 时间：2012-10-26T00:10:29.680
> 
> 标签：javascript, html, window

我对 JavaScript 真的很陌生，但我认为这应该很简单。我只是想创建一个链接来关闭我的窗口使用： document.write("Close this window");

但是，当我单击上述代码创建的链接时，什么也没有发生。我究竟做错了什么？我的整个代码如下：

```
<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Loops demo</title>

</head>
<body>
<script type="text/javascript">
function openActor() {
            actorWin = window.open("","actorWin","height=200,width=600,resizable");
            actorWin.document.write("<!doctype html>");
            actorWin.document.write("<html lang=\"en\">");
            actorWin.document.write("<head>");
            actorWin.document.write("<meta charset=\"utf-8\">");
            actorWin.document.write("<title>Keira Knightley</title>");;
            actorWin.document.write("</head>");
            actorWin.document.write("<body>");        
            actorWin.document.write("Info on, one of the great actors of our time.");        
            actorWin.document.write("</body>");
            actorWin.document.write("</html>");
      }

   function Movie(title, actor, web1, web2) {
    this.title = title;
    this.actor = actor;
    this.link = web1;
    this.link2 = web2;
}
var movie1 = new Movie('Pride and Prejudice', 'Keira Knightley', 'http://movies.yahoo.com/movie/pride-and-        prejudice-2005/','http://keiraknightleyfan.com/');

document.write(movie1.title + '<blockquote>“A lady\'s imagination is very rapid; it jumps from admiration to love,     from love to matrimony in a moment.” ― Jane Austen, Pride and Prejudice</blockquote>');
document.write('<a href="javascript:var movieWin = window.open(\'',movie1.link, ' \'     ,\'movieWin\',\'height=500,width=500,resizable,top=200,left=400\')">Read more about Pride Prejudice</a><br>');
document.write("<a href='javascript:openActor()'>Click here for info on the lead actor</a><br>");
document.write("<a href='javascript:close()'>Close this window</a>");

</script>   
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T00:39:06.417

`close()`当它们没有通过javascript打开时，您不能使用关闭窗口

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T00:18:37.450

尝试`window.close()`

```
document.write("<a href='javascript:window.close()'>Close this window</a>"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T00:18:39.370

没有名为 的函数`close`。 `javascript:close();`只需调用函数`close`。如果要关闭弹出窗口，则需要调用 close 。喜欢：`javascript:actorWin.close();`

在这种情况下，请确保`actorWin`在全局范围内声明 （放在`var actorWin;`上面`function openActor...`）。

# mysql - 以下mysql代码有什么问题

> ID：13079127
> 
> 赞同：0
> 
> 时间：2012-10-26T00:10:37.750
> 
> 标签：mysql, sql

```
Insert into hotel('fname', 'lname'...
values
  ('null', 'abc'....
ON DUPLICATE KEY UPDATE 
  fname = 'null',
  lname = 'abc',..... 
```

解决上面的mysql查询。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-26T00:11:40.470

如您所见，您没有用`single quotes`非数字值括起来，

```
Insert into child (`CASE`,`LASTNAME`,`FIRSTNAME`,`GENDER`,
                   `DOB`,`SSN`,`RACE`,`STREET`,`STREET2`,`CITY`,
                   `STATE`,`ZIP`,`PHONE`,`WORKPHONE`,`CELLPHONE`,
                   `PARENT NAME`,`GR`,`ADMITDATE`,`DISCHDATE`,
                   `WRK`,`WFIRSTNAME`,`WRKPHONE`)
VALUES ('null', 'Sivanesh', 'Jashawn', 'Male', '2002-03-08', 
        '206-80-2175', 'African American', '1689 Crucible Street', 
        'null', 'Pittsburgh', 'PA', '15210', '(412)458-3788', 
        'null', '(412)377-6079', 'Latel Williams', '2nd', '2010-03-17',
        'null', 'null', 'Addison', '(412)594-2545')
ON DUPLICATE KEY UPDATE 
        LASTNAME = 'Sivanesh',
        FIRSTNAME= 'Jashawn',... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T00:15:19.260

您需要引用“KEY UPDATE”子句中的值

# c# - 如何在 C# 中获取 dll 的体系结构？

> ID：13079129
> 
> 赞同：2
> 
> 时间：2012-10-26T00:10:44.543
> 
> 标签：c#, dll

我有一个 C# 程序需要复制用户提供的 dll 以供另一个程序加载和使用。对于在 64 位机器上运行的程序，不应允许用户传递 32 位 dll，并应告知用户他们提供了不正确的 dll。那么如何找到 dll 的架构呢？

我看到了几个类似的问题，他们提到了 DUMPBIN 和 Corflags.exe，但是没有示例代码，那么我在哪里可以找到这些程序以及如何使用这些程序？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T00:56:17.883

## **代码示例**

这是一个`C#`控制台应用程序的完整代码，它可以检测`dll`还包括您想要的架构的架构。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Diagnostics;
using System.IO;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            MachineType type = GetDllMachineType("path/to/MyAssembly.dll");

            if (type.Equals(MachineType.IMAGE_FILE_MACHINE_I386)) 
            {
                Console.WriteLine("Dll architecture: x86/32bit");
            }
            else if (type.Equals(MachineType.IMAGE_FILE_MACHINE_IA64)) 
            {
                Console.WriteLine("Dll architecture: x64/64bit");
            }

            Console.ReadKey();
        }

        public static MachineType GetDllMachineType(string dllPath)
        {
            //see http://www.microsoft.com/whdc/system/platform/firmware/PECOFF.mspx
            //offset to PE header is always at 0x3C
            //PE header starts with "PE\0\0" =  0x50 0x45 0x00 0x00
            //followed by 2-byte machine type field (see document above for enum)
            FileStream fs = new FileStream(dllPath, FileMode.Open, FileAccess.Read);
            BinaryReader br = new BinaryReader(fs);
            fs.Seek(0x3c, SeekOrigin.Begin);
            Int32 peOffset = br.ReadInt32();
            fs.Seek(peOffset, SeekOrigin.Begin);
            UInt32 peHead = br.ReadUInt32();
            if (peHead != 0x00004550) // "PE\0\0", little-endian
                throw new Exception("Can't find PE header");
            MachineType machineType = (MachineType)br.ReadUInt16();
            br.Close();
            fs.Close();
            return machineType;
        }

        public enum MachineType : ushort
        {
            IMAGE_FILE_MACHINE_UNKNOWN = 0x0,
            IMAGE_FILE_MACHINE_AM33 = 0x1d3,
            IMAGE_FILE_MACHINE_AMD64 = 0x8664,
            IMAGE_FILE_MACHINE_ARM = 0x1c0,
            IMAGE_FILE_MACHINE_EBC = 0xebc,
            IMAGE_FILE_MACHINE_I386 = 0x14c,
            IMAGE_FILE_MACHINE_IA64 = 0x200,
            IMAGE_FILE_MACHINE_M32R = 0x9041,
            IMAGE_FILE_MACHINE_MIPS16 = 0x266,
            IMAGE_FILE_MACHINE_MIPSFPU = 0x366,
            IMAGE_FILE_MACHINE_MIPSFPU16 = 0x466,
            IMAGE_FILE_MACHINE_POWERPC = 0x1f0,
            IMAGE_FILE_MACHINE_POWERPCFP = 0x1f1,
            IMAGE_FILE_MACHINE_R4000 = 0x166,
            IMAGE_FILE_MACHINE_SH3 = 0x1a2,
            IMAGE_FILE_MACHINE_SH3DSP = 0x1a3,
            IMAGE_FILE_MACHINE_SH4 = 0x1a6,
            IMAGE_FILE_MACHINE_SH5 = 0x1a8,
            IMAGE_FILE_MACHINE_THUMB = 0x1c2,
            IMAGE_FILE_MACHINE_WCEMIPSV2 = 0x169,
        }

        // returns true if the dll is 64-bit, false if 32-bit, and null if unknown
        public static bool? UnmanagedDllIs64Bit(string dllPath)
        {
            switch (GetDllMachineType(dllPath))
            {
                case MachineType.IMAGE_FILE_MACHINE_AMD64:
                case MachineType.IMAGE_FILE_MACHINE_IA64:
                    return true;
                case MachineType.IMAGE_FILE_MACHINE_I386:
                    return false;
                default:
                    return null;
            }
        }
    }
} 
```

* * *

## **使用 Corflags...**

你写过这个，只是想知道，这将帮助你获得一些关于你的程序集的信息（`dll`），但事实并非如此`C#`！这是一个可以在`Visual Studio`控制台中使用的工具。

只需打开`Visual Studio`控制台并使用以下命令：

> ```
> C:\Program Files (x86)\Microsoft Visual Studio 9.0\VC>corflags C:/path/to/MyAssembly.dll 
> ```

这将是输出：

> ```
> Microsoft (R) .NET Framework CorFlags Conversion Tool. Version 3.5.21022.8 Copyright (c) Microsoft Corporation. All rights reserved.
> 
> Version : v2.0.50727
> CLR Header: 2.5
> PE : PE32
> CorFlags : 24
> ILONLY : 0
> 32BIT : 0
> Signed : 1 
> ```

然后，关注`PE:PE32`，这将描述您的程序集架构：

那么，按照这个...

*   **AnyCPU**表示 -> PE: PE32 -> 32BIT: 0

*   **x86**表示 -> PE: PE32 -> 32BIT: 1

*   **x64**表示 -> PE: PE32+ -> 32BIT: 0

的架构`MyAssembly.dll`是`32bit`

* * *

## 主意...

好吧，如果你想简化这一切，一个想法可能是创建一个后台进程，`C#`然后在参数中使用我上面给你的命令并打印输出`PE:XX`以获取程序集架构，并根据该值告诉你的应用程序什么去做。

* * *

我刚刚做了一些研究，希望这会有所帮助:-)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-26T00:28:06.627

不久前，我们想在不改变构建环境的情况下在构建中运行 64 位混合模式单元测试。我编写了一个使用反射发射创建代理程序集的工具。这是我编写的用于检测程序集是否为 64 位的实用程序类。这与由 corflags 控制的标志不同

命名空间 MstestRunner.TestProxyGenerator { 使用系统；使用 System.Globalization；使用 System.IO；使用 System.Reflection；

```
/// <summary>
/// TODO: Update summary.
/// </summary>
public static class AssemblyUtility
{
    /// <summary>
    /// The value 'PE\0\0'
    /// </summary>
    private const uint PeHeaderValue = 0x4550;

    /// <summary>
    /// Image file value found at start of PE header that indicates assembly is 64bit.
    /// </summary>
    private const ushort ImageFileMachineAmd64 = 0x8664;

    /// <summary>
    /// The offset to PIMAGE_DOS_HEADER->e_lfanew
    /// </summary>
    private const int DosHeaderLfaNewOffset = 0x3c;

    /// <summary>
    /// Checks to see if the module is a 64 bit
    /// </summary>
    /// <param name="path">The path to the assembly.</param>
    /// <returns>
    /// True if is 64bit
    /// </returns>
    public static bool Is64BitImage(string path)
    {
        return ReadImageMachineType(path) == MachineType.ImageFileMachineAMD64;
    }

    /// <summary>
    /// Reads the machine type from the pe header.
    /// </summary>
    /// <param name="path">The path to the image.</param>
    /// <returns>The assembly machinetype.</returns>
    public static MachineType ReadImageMachineType(string path)
    {
        // The memory layout varies depending on 32/64 bit.  The portions of the PE header we are reading should be the same though regardless.
        byte[] buffer = new byte[4];
        using (FileStream fileStream = new FileStream(path, FileMode.Open, FileAccess.Read))
        {
            // skip to PIMAGE_DOS_HEADER->e_lfanew of dos header.
            fileStream.Seek(DosHeaderLfaNewOffset, SeekOrigin.Begin);

            // read and jump to offset in PIMAGE_DOS_HEADER->e_lfanew.  This is start of PIMAGE_NT_HEADERS
            fileStream.Read(buffer, 0, 4);
            fileStream.Seek(BitConverter.ToUInt32(buffer, 0), SeekOrigin.Begin);

            // Validate PE\0\0 header.
            fileStream.Read(buffer, 0, 4);
            if (BitConverter.ToUInt32(buffer, 0) != PeHeaderValue)
            {
                throw new TestRunnerException(string.Format(CultureInfo.InvariantCulture, "The specified assembly '{0}' does not appear to be valid.", path));
            }

            // Read the PIMAGE_FILE_HEADER->Machine value. 
            fileStream.Read(buffer, 0, 2);
            return (MachineType)BitConverter.ToUInt16(buffer, 0);
        }
    }

    /// <summary>
    /// Safely loads the assembly.
    /// </summary>
    /// <param name="path">The path to the assembly to load.</param>
    /// <returns>The loaded assembly</returns>
    public static Assembly SafeLoadAssembly(string path)
    {
        try
        {
            return Assembly.Load(path);
        }
        catch (ArgumentNullException)
        {
        }
        catch (FileNotFoundException)
        {
        }
        catch (FileLoadException)
        {
        }
        catch (BadImageFormatException)
        {
        }

        return null;
    }
} 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T00:25:15.847

只需尝试使用**imageload加载 dll**

[http://msdn.microsoft.com/en-us/library/ms680209(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ms680209(v=vs.85).aspx)

当然，如果此函数失败，请卸载它或获取最后一个错误，以便您可以研究输出并确定此 dll 是否与您的 c# 应用程序相同的架构。

# java - 声纳显示不良实践方法可能无法在异常时关闭流

> ID：13079131
> 
> 赞同：0
> 
> 时间：2012-10-26T00:11:07.017
> 
> 标签：java

> **可能重复：**
> [声纳违规：“方法可能无法在异常时关闭流”</a>](https://stackoverflow.com/questions/12370427/sonar-violation-method-may-fail-to-close-stream-on-exception)
> 
> [](https://stackoverflow.com/questions/12370427/sonar-violation-method-may-fail-to-close-stream-on-exception)

 [我有一个使用 DataInputStream 的方法，代码如下：

```
DataInputStream in = null;
    ServletOutputStream outStream = null;
    FileInputStream fileIn = null;
    URL searchDirectory;
    try {
      searchDirectory = (java.net.URL) ctx.lookup("file/testHarnessDirectory");

      File file = new File(searchDirectory.getPath(), filename);
      int length = 0;
      outStream = response.getOutputStream();
      response.setContentType("application/octet-stream");
      response.setContentLength((int) file.length());

      response.setHeader("Content-Disposition", "attachement; filename=\"" + filename + "\"");
      byte[] byteBuffer = new byte[4096];
      fileIn = new FileInputStream(file);
      in = new DataInputStream(fileIn);

      while ((in != null) && ((length = in.read(byteBuffer)) != -1)) {
        outStream.write(byteBuffer, 0, length);
      }
      outStream.close();
      fileIn.close();
      in.close();
    }
    catch (NamingException e) {
      LOG.error("Exception", e);
      throw new CPSException(ErrorCode.FILE_HANDLING_EXCEPTION, "Could not download File", e);
    }
    catch (IOException e) {
      LOG.error("Exception", e);
      throw new CPSException(ErrorCode.FILE_HANDLING_EXCEPTION, "Could not submit File", e);
    }
    finally {
      try {
        if (fileIn != null) {
          fileIn.close();
        }
        if (in != null) {
          in.close();
        }
        if (outStream != null) {
          outStream.close();
        }
      }
      catch (IOException e) {
        LOG.error("Exception", e);
        throw new CPSException(ErrorCode.FILE_HANDLING_EXCEPTION, "Could not submit File", e);}} 
```](https://stackoverflow.com/questions/12370427/sonar-violation-method-may-fail-to-close-stream-on-exception) 

[但是声纳给了我：不好的做法-方法可能无法在异常时关闭流。我查过这篇文章：](https://stackoverflow.com/questions/12370427/sonar-violation-method-may-fail-to-close-stream-on-exception)[Sonar 违规：“Method may fail to close stream on exception”](https://stackoverflow.com/questions/12370427/sonar-violation-method-may-fail-to-close-stream-on-exception?answertab=oldest#tab-top)，但对我来说似乎不完整。我可能是错的。谁能告诉我，关闭流的简单方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T00:15:21.103

检查此部分：

```
 try {
    if (fileIn != null) {
      fileIn.close();
    }
    if (in != null) {
      in.close();
    }
    if (outStream != null) {
      outStream.close();
    }
  } 
```

想一想，如果`fileIn.close()`失败会发生什么。其他两个流可能保持开放。请将它们放在单独的`try-catch`块中。例如

```
 try {
    if (fileIn != null) {
      fileIn.close();
    }
  }catch (IOException e) {
    LOG.error("Exception: Could not close file stream", e);
    //throw new CPSException(ErrorCode.FILE_HANDLING_EXCEPTION, "Could not close file stream", e);
  }
 try {
    if (in != null) {
      in.close();
    }
  }catch (IOException e) {
    LOG.error("Exception: Could not close in stream"", e);
    //throw new CPSException(ErrorCode.FILE_HANDLING_EXCEPTION, "Could not close in stream", e);
  }
 try {
    if (outStream != null) {
      outStream.close();
    }
  }
  }catch (IOException e) {
    LOG.error("Exception: Could not close out stream", e);
    //throw new CPSException(ErrorCode.FILE_HANDLING_EXCEPTION, "Could not close out stream", e);
  } 
```

# php - 获取最近的日期mysql

> ID：13079133
> 
> 赞同：4
> 
> 时间：2012-10-26T00:11:32.863
> 
> 标签：php, sql, mysqli

我的表中有以下日期。如何找到距今天最近的日期（如果有今天的日期），或者如果没有今天的日期，那么最近的过去日期？

```
2012-10-01          aa123
2012-10-02          aa43
2012-10-03          aa478
2012-10-04          aa40    
2012-10-05          aa54
2012-10-06          de34
2012-10-07          a5434
2012-10-08          r4t
2012-10-09          x34
2012-10-10          q23
2012-10-11          b53 
```

因此，如果今天是`'2012-10-07'`，那么记录将是`a5434`。但如果`2012-10-07`丢失，则记录将`de34`属于哪个记录，`2012-10-06`因为那将是距今天最近的过去一天。

我不确定从哪里开始，所以我还没有尝试过任何东西。需要一个sql解决方案。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-26T00:18:31.897

这很简单，只需获取最后一个日期 <= 当前日期之一：

```
$now = date("Y-m-d");
$sql = "SELECT * FROM date_table where date_field <= '$now' ORDER BY date_field DESC LIMIT 1 OFFSET 1"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T00:15:20.993

向查询中添加`ORDER BY`语句。以下将按日期对行进行排序，最新的在顶部，最旧的在底部。

```
SELECT `id`, `date` FROM `table` ORDER BY `date` DESC LIMIT 1; 
```

# java - 使用 parcelable 在活动之间传递 ArrayList 对象

> ID：13079143
> 
> 赞同：0
> 
> 时间：2012-10-26T00:13:05.273
> 
> 标签：java, android, android-intent, arraylist, parcelable

首先我会说我已经看过所有其他处理这个问题的帖子并尝试了所有这些帖子。

我试图做与其他帖子中要求的相同的事情，即使用 Intent 将 ArrayList 的值从一个活动传递到另一个活动。

我觉得我已经正确地实施了我的课程。我正在使用的主要类（Route_Class）如下。

```

```
public class Route_Class implements Parcelable {
private double latitude = 0;
private double longitude = 0;
private double startingLat = 0;
private double startingLong = 0;
private String name = null;
private String routeName = null;
private String GeoPoints = null;
private String layout_width= null;
private String layout_height = null;
private String orientation = null;
private String xmlns = null;
private String id = null;
private boolean clickable = false;
private boolean enabled = false;
private String layout_width2 = null;
private String layout_height2 = null;
private String apiKey = null;
private ArrayList<GeoPoints_Class> geoPoints_arraylist = new ArrayList<GeoPoints_Class>();  

public Route_Class() {
    System.out.println("crash 110");
}

public Route_Class(String name, double latitude, double longitude, double startingLat, double startingLong, String routeName, String GeoPoints, String layout_width, String layout_height, String orientation, String xmlns, String id, boolean clickable, boolean enabled, String layout_width2, String layout_height2, String apiKey, ArrayList<GeoPoints_Class> geoPoints_arraylist) {
    this.name = name;
    this.latitude = latitude;
    this.longitude = longitude; 
    this.layout_width2 = layout_width2;
    this.latitude = latitude;
    this.longitude = longitude;
    this.startingLat = startingLat;
    this.startingLong = startingLong;   
    this.routeName = routeName;
    this.GeoPoints = GeoPoints;
    this.layout_width = layout_width;
    this.layout_height = layout_height;
    this.orientation = orientation;
    this.xmlns = xmlns;
    this.id = id;
    this.clickable = clickable;
    this.enabled = enabled;
    this.layout_height2 = layout_height2;
    this.apiKey = apiKey;
    this.geoPoints_arraylist = geoPoints_arraylist;
    System.out.println("crash 16");
}

 /* everything below here is for implementing Parcelable */

// 99.9% of the time you can just ignore this
public int describeContents() {
    System.out.println("crash 17");
    return this.hashCode();

}

// write your object's data to the passed-in Parcel
public void writeToParcel(Parcel dest, int flags) { 
    System.out.println("crash 18");
    dest.writeDouble(latitude);
    dest.writeDouble(longitude);
    dest.writeDouble(startingLat);
    dest.writeDouble(startingLong);
    dest.writeString(name);
    dest.writeString(routeName);
    dest.writeString(GeoPoints);
    dest.writeString(layout_width);
    dest.writeString(layout_height);
    dest.writeString(orientation);
    dest.writeString(xmlns);
    dest.writeString(id);
    dest.writeInt(clickable ? 0 : 1 );      
    dest.writeInt(enabled ? 0 : 1 );
    dest.writeString(layout_width2);
    dest.writeString(layout_height2);
    dest.writeString(apiKey);
    dest.writeTypedList(geoPoints_arraylist);
//      dest.writeList((List<GeoPoints_Class>)geoPoints_arraylist);

//      dest.writeParcelable((Parcelable) geoPoints_arraylist, 0);

}   

// this is used to regenerate your object. All Parcelables must have a CREATOR that implements these two methods
public static final Parcelable.Creator<Route_Class> CREATOR = new Parcelable.Creator<Route_Class>() {
    public Route_Class createFromParcel(Parcel in) {
        System.out.println("crash 20");
        return new Route_Class(in);
    }

    public Route_Class[] newArray(int size) {
        System.out.println("crash 21");
        return new Route_Class[size];
    }
};

// example constructor that takes a Parcel and gives you an object populated with it's values
private Route_Class(Parcel in) {
    layout_width2 = in.readString();
    latitude = in.readDouble();
    longitude = in.readDouble();
    startingLat = in.readDouble();
    startingLong = in.readDouble();
    name   = in.readString();
    routeName = in.readString();
    GeoPoints = in.readString();
    layout_width = in.readString();
    layout_height = in.readString();
    orientation = in.readString();
    xmlns = in.readString();
    id = in.readString();
    clickable = in.readInt() == 0;
    enabled = in.readInt() == 0;
    layout_height2 = in.readString();
    apiKey = in.readString();
    System.out.println("crash 5");
 //geoPoints_arraylist = new ArrayList<GeoPoints_Class>();
    if (geoPoints_arraylist == null) {
        geoPoints_arraylist = new ArrayList<GeoPoints_Class>();
    }
    try {
    in.readTypedList(geoPoints_arraylist, GeoPoints_Class.CREATOR);
    } catch (Exception e) {
        System.out.println("Error " + e);
    }
//        in.readList(geoPoints_arraylist,    com.breckbus.app.GeoPoints_Class.class.getClassLoader());  
    System.out.println("crash 6");

//        geoPoints_arraylist =  (ArrayList<GeoPoints_Class>)in.readParcelable(com.breckbus.app.Route_Class.GeoPoints_Class.  class.getClassLoader());
}

public double getlatitude() {
    return latitude;
}

public void setlatitude(double latitude) {
    this.latitude = latitude;
}

public double getlongitude() {
    return longitude;
}

public void setlongitude(double longitude) {
    this.longitude = longitude;
}

public double getstartingLat() {
    return startingLat;
}

public void setstartingLat(double startingLat) {
    this.startingLat = startingLat;
}

public double getstartingLong() {
    return startingLong;
}

public void setstartingLong(double startingLong) {
    this.startingLong = startingLong;
}

public String getname() {
    return name;
}

public void setname(String name) {
    this.name = name;
}

public String getrouteName() {
    return routeName;
}

public void setrouteName(String routeName) {
    this.routeName = routeName;
}

public String getGeoPoints() {
    return GeoPoints;
}

public void setGeoPoints(String GeoPoints) {
    this.GeoPoints = GeoPoints;
}

public String getLayout_width() {
    return layout_width;
}

public void setLayout_width(String layout_width) {
    this.layout_width = layout_width;
}

public String getLayout_height() {
    return layout_height;
}

public void setLayout_height(String layout_height) {
    this.layout_height = layout_height;
}

public boolean isEnabled() {
    return enabled;
}

public void setEnabled(boolean enabled) {
    this.enabled = enabled;
}

public String getOrientation() {
    return orientation;
}

public void setOrientation(String orientation) {
    this.orientation = orientation;
}

public String getXmlns() {
    return xmlns;
}

public void setXmlns(String xmlns) {
    this.xmlns = xmlns;
}

public String getId() {
    return id;
}

public void setId(String id) {
    this.id = id;
}

public boolean isClickable() {
    return clickable;
}

public void setClickable(boolean clickable) {
    this.clickable = clickable;
}

public String getLayout_width2() {
    return layout_width2;
}

public void setLayout_width2(String layout_width2) {
    this.layout_width2 = layout_width2;
}

public String getLayout_height2() {
    return layout_height2;
}

public void setLayout_height2(String layout_height2) {
    this.layout_height2 = layout_height2;
}

public String getApiKey() {
    return apiKey;
}

public void setApiKey(String apiKey) {
    this.apiKey = apiKey;
}
@Override
public String toString() {
    StringBuilder sb = new StringBuilder();
    sb.append("Route Class Details:").append("\n\n");   
    sb.append("latitude: ").append(getlatitude());
    sb.append("\n");
    sb.append("longitude: ").append(getlongitude());
    sb.append("\n");
    sb.append("startingLat: ").append(getstartingLat());
    sb.append("\n");
    sb.append("startingLong: ").append(getstartingLong());
    sb.append("\n");
    sb.append("name: ").append(getname());
    sb.append("\n");
    sb.append("routeName: ").append(getrouteName());
    sb.append("\n");
    sb.append("GeoPoints: ").append(getGeoPoints());
    sb.append("\n");
    sb.append("layout_width: ").append(getLayout_width());
    sb.append("\n");
    sb.append("layout_height: ").append(getLayout_height());
    sb.append("\n");
    sb.append("orientation: ").append(getOrientation());
    sb.append("\n");
    sb.append("xmlns: ").append(getXmlns());
    sb.append("\n");
    sb.append("id: ").append(getId());
    sb.append("\n");
    sb.append("clickable: ").append(isClickable());
    sb.append("\n");
    sb.append("enabled: ").append(isEnabled());
    sb.append("\n");
    sb.append("layout_width2: ").append(layout_width2);
    sb.append("\n");
    sb.append("layout_height2: ").append(getLayout_height2());
    sb.append("\n");
    sb.append("apiKey: ").append(getApiKey());                        

    return sb.toString();
} 

//   public ArrayList<GeoPoints_Class> getGeoPoints_arraylist() {
//      return geoPoints_arraylist;
//  }
 public ArrayList<GeoPoints_Class> getGeoPoints_arraylist() {
        return geoPoints_arraylist;
    }

public void setGeoPoints_arraylist(ArrayList<GeoPoints_Class> geoPoints_arraylist)      {
    this.geoPoints_arraylist = geoPoints_arraylist;
}

public GeoPoints_Class getGeoPoints(int i) {
    return geoPoints_arraylist.get(i);
}       

public void addGeoPoint(double lat, double lon, String location) {
    this.geoPoints_arraylist.add(new GeoPoints_Class(lat, lon, location));
}

 } 
```

```

这是我在 Route_Class 中使用的第二个类 (GeoPoints_Class)。

```

```
package com.breckbus.app;

import android.os.Parcel;
import android.os.Parcelable;

class GeoPoints_Class implements Parcelable {

private double lat; 

private double lon; 

private String location;

public GeoPoints_Class(){
    System.out.println("crash 99");
}

public GeoPoints_Class(double lat, double lon, String location){
    System.out.println("crash 7");
    this.lat = lat;
    this.lon = lon;
    this.location = location; 
}

public int describeContents() {
    return this.hashCode();
}

// write your object's data to the passed-in Parcel
public void writeToParcel(Parcel dest, int flags) {     
    System.out.println("crash 11");
    dest.writeDouble(lat);
    dest.writeDouble(lon);  
    dest.writeString(location); 
    System.out.println("crash 12");
}   

// this is used to regenerate your object. All Parcelables must have a CREATOR that implements these two methods
public static final Parcelable.Creator<GeoPoints_Class> CREATOR = new Parcelable.Creator<GeoPoints_Class>() {
    public GeoPoints_Class createFromParcel(Parcel in) {
        System.out.println("crash 28");
        return new GeoPoints_Class(in);
    }

    public GeoPoints_Class[] newArray(int size) {
        System.out.println("crash 29");
        return new GeoPoints_Class[size];
    }
};

// example constructor that takes a Parcel and gives you an object populated with it's values
private GeoPoints_Class(Parcel in) {
    System.out.println("crash 13");
     lat = in.readDouble();
     lon = in.readDouble();
     location   = in.readString();
     System.out.println("crash 14");
}

public double getLat() {
    return lat;
}

public void setLat(double lat) {
    this.lat = lat;
}

public double getLon() {
    return lon;
}

public void setLon(double lon) {
    this.lon = lon;
}

public String getLocation() {
    return location;
}

public void setLocation(String location) {
    this.location = location;
}  

@Override
public String toString() {
    StringBuilder sb = new StringBuilder();
    sb.append("GeoPoint Class Details:").append("\n\n");    
   sb.append("latitude: ").append(getLat());
   sb.append("\n");
   sb.append("longitude: ").append(getLon());
   sb.append("\n");
   sb.append("location: ").append(getLocation());
   sb.append("\n");                          

    return sb.toString();
} 
```

}

```

接下来是我使用 putExtra 放置对象的位置。

```

```
Intent i = new Intent("com.breckbus.app.ROUTE");
//      i.putParcelableArrayListExtra("route_Classes_temp",  route_Classes);
i.putExtra("route_Classes_temp",route_Classes);
System.out.println("crash 1"); 
```

```

然后我在哪里得到对象。

```

```
Bundle extras = getIntent().getExtras();
Intent d = getIntent();
System.out.println("crash 25");
route_Classes = d.getParcelableArrayListExtra("route_Classes_temp");
System.out.println("crash 2");
//      route_Classes = getIntent().getParcelableArrayListExtra("route_Classes_temp"); 
```

```

你会注意到我所有的手动调试语句，因为 Eclipse 在调试模式（断点和其他东西）下无法与 android 应用程序一起工作。（如果您知道解决方案，那将有很大帮助）。

接下来是我得到的唯一错误，我在代码中输入的手动调试语句停止。我不知道它在哪里崩溃了。

这是前几个错误：

```

```
10-26 00:03:50.165: I/System.out(323): crash 13
10-26 00:03:50.165: I/System.out(323): crash 14
10-26 00:03:50.165: I/System.out(323): crash 28
10-26 00:03:50.165: I/System.out(323): crash 13
10-26 00:03:50.165: I/System.out(323): crash 14
10-26 00:03:50.185: I/System.out(323): crash 6
10-26 00:03:50.195: D/AndroidRuntime(323): Shutting down VM
10-26 00:03:50.195: W/dalvikvm(323): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
10-26 00:03:50.225: E/AndroidRuntime(323): FATAL EXCEPTION: main
10-26 00:03:50.225: E/AndroidRuntime(323): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.breckbus.app/com.breckbus.app.route}:    java.lang.RuntimeException: Parcel android.os.Parcel@44edd958: Unmarshalling unknown type code 6553714 at offset 968
10-26 00:03:50.225: E/AndroidRuntime(323):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
10-26 00:03:50.225: E/AndroidRuntime(323):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
10-26 00:03:50.225: E/AndroidRuntime(323):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
10-26 00:03:50.225: E/AndroidRuntime(323):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
10-26 00:03:50.225: E/AndroidRuntime(323):  at android.os.Handler.dispatchMessage(Handler.java:99)
10-26 00:03:50.225: E/AndroidRuntime(323):  at android.os.Looper.loop(Looper.java:123)
10-26 00:03:50.225: E/AndroidRuntime(323):  at android.app.ActivityThread.main(ActivityThread.java:4627)
10-26 00:03:50.225: E/AndroidRuntime(323):  at java.lang.reflect.Method.invokeNative(Native Method)
10-26 00:03:50.225: E/AndroidRuntime(323):  at java.lang.reflect.Method.invoke(Method.java:521) 
```

```

我希望我提供了足够的信息。请告诉我在尝试使用 Intent 将对象类型 Route_Class 的 route_class ArrayList 从一个活动传递到另一个活动时我做错了什么。这两行：

**i.putExtra("route_Classes_temp",route_Classes);**

**route_Classes = d.getParcelableArrayListExtra("route_Classes_temp");**

感谢您的帮助，非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T03:39:58.273

确实，您提供了太多信息。

但是，这是否在同一进程中（即仅您自己的应用程序？）如果是，则完全避免这样做。打包/拆包这些对象太慢了。

在存储数据的地方使用单例，并从每个活动中访问单例。

# python - VoIP 点对点 Python H.323

> ID：13079144
> 
> 赞同：3
> 
> 时间：2012-10-26T00:13:07.830
> 
> 标签：python, voip, pjsip, python-sip, h.323

我想使用 Python 和 Ubuntu 在两台计算机之间双向传输音频，理想情况下使用 H.323 我看过 pjsip 但只能看到一种连接到 SIP 服务器的方法，而不是简单的点对点系统。

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T12:10:21.840

可用的 H.323 库很少：有 OpenSource [H323Plus](http://www.h323plus.org/)和[OPAL](http://www.opalvoip.org/)以及商业 Radvision SDK。它们都没有提供对 Python 的直接支持，但我猜这些函数可以滚动到 C 包装器中以由 Python 调用。H323Plus 具有更好的 H.323 支持，但 OPAL 已经开始使用 C 包装器。

# android - 了解长轮询：客户端（android）和服务器（asp net）

> ID：13079145
> 
> 赞同：5
> 
> 时间：2012-10-26T00:13:17.830
> 
> 标签：android, asp.net-mvc, long-polling

我正在开发 android 应用程序，用户可以在其中参加某种战斗。在服务器端，我需要接收用户发起战斗的请求，然后使用某种算法为他选择最喜欢的对手。在战斗中，我还需要向竞争对手发送有关对手行动的通知。

所以看来我需要在我的服务器上实现长轮询。我的问题是：

1.  **服务器端**。我正在使用 asp.net mvc 服务器。我查看了[SignalR](https://github.com/SignalR/SignalR)框架，它似乎正是我所需要的。然而，仅仅因为我是长轮询的新手，我还没有理解它的内部工作原理。所以我需要解释如何使用这个框架，或者如何以其他方式实现长轮询。

2.  **客户端。**据我了解，长轮询请求模型与标准的“请求-响应”模型略有不同，所以我也想知道如何在客户端实现这些请求。

我期待着对我所描述的主题的任何解释。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T04:09:06.053

这可能不是您要寻找的答案，但您为什么要进行长轮询。**如果**您仅在用户参与战斗时进行轮询，则可以对`"pull"`此类通知进行轮询。这样也可以节省电池寿命。战斗开始时，启动后台服务，每隔一段时间轮询一次服务器（希望 2-3 秒的延迟是可以接受的）。并相应地通知用户。然后在战斗结束时停止服务。 这将更容易实现。 但如果您需要即时通知，您可以使用[Google Cloud Messaging Service](http://developer.android.com/guide/google/gcm/gs.html)（它是一种长轮询形式）。要了解有关其工作原理的更多信息，请参阅[此](http://developer.android.com/guide/google/gcm/adv.html) **`2-3 seconds`** 

 *** * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T12:12:12.447

我不确定，如果您考虑过 WCF。

看看这个，看看它是否对你有帮助。 [http://anthymecaillard.wordpress.com/2012/06/06/wcf-real-time-web-development-with-long-polling/](http://anthymecaillard.wordpress.com/2012/06/06/wcf-real-time-web-development-with-long-polling/)

对于客户端：使用 Jquery，显示进度轮，直到我们的响应从服务器返回**

# mysql - SQL查询按价格按项目查找天数

> ID：13079147
> 
> 赞同：1
> 
> 时间：2012-10-26T00:13:45.880
> 
> 标签：mysql

我有一个包含列的采购表 - item_key、price、recorded_at(datetime)。

对于任何商品，随着我们开展一些促销活动，价格偶尔会发生变化。例如; item_key 1 的正常价格是 100，我们将价格降低到 80 一周，然后恢复正常价格。促销价格在不同时间可能会有所不同（下次可能是60而不是80）。我们有大约 100 件商品。

我正在尝试编写一个查询（mysql）来按价格逐项获取天数。我的查询变得过于复杂，并且花费了超过可接受的时间来返回结果。

我将不胜感激任何帮助。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T01:26:01.140

我不完全确定您所说的“按价格按项目计算的天数”是什么意思......我假设因为这是一个购买表，所以每个条目都是一次购买......如果是这种情况并且你想看看每件商品和特定价格购买了多少天，我认为这应该可行：

```
SELECT item_key, price, COUNT(DISTINCT recorded_at) from table
GROUP BY item_key, price 
```

我认为这应该采用每个 item_key/price 对并计算该对有多少天不同的销售。

# c# - 使用 Rijndael 数据加密和解密时间过长

> ID：13079150
> 
> 赞同：1
> 
> 时间：2012-10-26T00:14:18.510
> 
> 标签：c#, .net, security, aes, rijndael

我试图让这段代码加密和解密，但在`.FlushFinalBlock()`.

我不确定我在这里做错了什么，因为我在这个问题上没有我的元素。

谁能告诉我我在这里做错了什么？加密是可以的，但它不能解密它的加密。

```
 static byte[] u8_Salt = new byte[] { 0x26, 0x19, 0x81, 0x4E, 0xA0, 0x6D, 0x95, 0x34, 0x26, 0x75, 0x64, 0x05, 0xF6 };

   public static string Encrypt(string data, string password)
    {
        //
        Rfc2898DeriveBytes pdb = new Rfc2898DeriveBytes(password, u8_Salt);
        //
        Rijndael i_Alg = Rijndael.Create();
        i_Alg.Padding = PaddingMode.None;
        i_Alg.Key = pdb.GetBytes(32);
        i_Alg.IV = pdb.GetBytes(16);
        //
        using (var cryptoProvider = new DESCryptoServiceProvider())
        using (var memoryStream = new MemoryStream())
        using (var cryptoStream = new CryptoStream(memoryStream, cryptoProvider.CreateEncryptor(), CryptoStreamMode.Write))
        using (var writer = new StreamWriter(cryptoStream))
        {
            writer.Write(data);
            writer.Flush();
            cryptoStream.FlushFinalBlock();
            writer.Flush();
            return Convert.ToBase64String(memoryStream.GetBuffer(), 0, (int)memoryStream.Length);
        }
    }
    public static string Decrypt(string data, string password)
    {
        Rfc2898DeriveBytes pdb = new Rfc2898DeriveBytes(password, u8_Salt);
        //
        Rijndael i_Alg = Rijndael.Create();
        i_Alg.Padding = PaddingMode.None;
        i_Alg.Key = pdb.GetBytes(32);
        i_Alg.IV = pdb.GetBytes(16);
        //
        using (var cryptoProvider = new DESCryptoServiceProvider())
        using (var memoryStream = new MemoryStream())
        using (var cryptoStream = new CryptoStream(memoryStream, cryptoProvider.CreateDecryptor(), CryptoStreamMode.Write))
        using (var writer = new StreamWriter(cryptoStream))
        {
            writer.Write(data);
            writer.Flush();
            cryptoStream.FlushFinalBlock();
            writer.Flush();
            return Convert.ToBase64String(memoryStream.GetBuffer(), 0, (int)memoryStream.Length);
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T05:27:12.367

您的代码存在一些问题。首先，您正在创建一个*Rijndael (AES)*对象。但是，您使用的`DESCryptoServiceProvider`是 DES，这意味着您实际上使用的是 DES，而不是 Rijndael。因此，您还有一个问题是您没有为算法设置密钥。以下是使用算法重写的两个函数，该算法是 .NET 上算法`RijndaelManaged`的托管实现。`AES`我已经测试过，您可以毫无问题地进行加密和解密。另外：不要使用那个盐值，它遍布互联网。

```
static byte[] u8_Salt = new byte[] { 0x26, 0x19, 0x81, 0x4E, 0xA0, 0x6D, 0x95, 0x34, 0x26, 0x75, 0x64, 0x05, 0xF6 };

public static string EncryptString(string plainText, string password)
{
    Rfc2898DeriveBytes pdb = new Rfc2898DeriveBytes(password, u8_Salt);
    using (RijndaelManaged i_Alg = new RijndaelManaged { Key = pdb.GetBytes(32), IV = pdb.GetBytes(16) })
    {
        using (var memoryStream = new MemoryStream())
        using (var cryptoStream = new CryptoStream(memoryStream, i_Alg.CreateEncryptor(), CryptoStreamMode.Write))
        {
            byte[] data = Encoding.UTF8.GetBytes(plainText);
            cryptoStream.Write(data, 0, data.Length);
            cryptoStream.FlushFinalBlock();

            return Convert.ToBase64String(memoryStream.GetBuffer(), 0, (int)memoryStream.Length);
        }
    }
}

public static string Decrypt(string cipherText, string password)
{
    Rfc2898DeriveBytes pdb = new Rfc2898DeriveBytes(password, u8_Salt);

    using (RijndaelManaged i_Alg = new RijndaelManaged { Padding = PaddingMode.Zeros, Key = pdb.GetBytes(32), IV = pdb.GetBytes(16) })
    {
        using (var memoryStream = new MemoryStream())
        {
            using (var cryptoStream = new CryptoStream(memoryStream, i_Alg.CreateDecryptor(), CryptoStreamMode.Write))
            {
                byte[] data = Convert.FromBase64String(cipherText);
                cryptoStream.Write(data, 0, data.Length);
                cryptoStream.Flush();

                return Encoding.UTF8.GetString(memoryStream.ToArray());
            }
        }
    }
} 
```

要生成随机盐，我将使用[RNGCryptoServiceProvider](http://msdn.microsoft.com/en-us/library/system.security.cryptography.rngcryptoserviceprovider.getbytes.aspx) 这将生成一个您可以使用的加密安全随机字节数组。您需要在单独的过程中生成它并将其用作盐。

# android - 引用静态类的服务

> ID：13079162
> 
> 赞同：1
> 
> 时间：2012-10-26T00:16:04.223
> 
> 标签：android, service

我是java和android的新手，我希望这不是一个愚蠢的问题......

我的 android 项目有一个活动、一个服务和一个包含静态变量的单独类文件。

活动和服务都引用了变量，并且在模拟器中运行时一切正常。

但在现实世界中，活动通常会在服务保持运行时被销毁。

类中的那些静态变量是否仍然存在并且可以被服务引用？

谢谢，加里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T00:17:23.457

是的，具有静态变量的类独立于您的活动和服务。无论对方是否正在运行，双方都可以访问它。

# asp.net - OAuth2 - ClientSecret 去哪儿了？

> ID：13079164
> 
> 赞同：0
> 
> 时间：2012-10-26T00:16:23.207
> 
> 标签：asp.net, google-api, google-calendar-api, dotnetopenauth

我正在尝试编写一个`ASP.NET`使用 Google 日历服务的应用程序。为此，我使用[此处](http://code.google.com/p/google-api-dotnet-client/source/browse/Tasks.ASP.NET.SimpleOAuth2/Default.aspx.cs?repo=samples)显示的示例。

这是一个 TasksService 应用程序，但方法应该几乎相同。

不过，这个应用程序似乎使用的是旧版本的`DotNetOpenAuth`，其中 ClientBase 接口有一个 ClientSecret 属性。在新版本中，他们删除了这个属性。

这个资产去哪儿了？

授权过程是强制性的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T23:49:31.183

该`ClientSecret`属性已替换为该`ClientCredentialApplicator`属性（和构造函数参数）。这使您不仅可以自由地表达秘密，还可以自由地表达它应该如何传达（通过表单 POST 参数或 HTTP 授权标头）。

# linux - 如何在 Linux 内核 3.2.x 中的自定义系统调用期间读取目录的内容

> ID：13079169
> 
> 赞同：0
> 
> 时间：2012-10-26T00:16:37.130
> 
> 标签：linux, kernel, system-calls, opendir

我正在尝试使用 openDir 在 Linux 内核（3.2.17）中的自定义系统调用期间打开一个目录：

```
#include <linux/kernel.h>
#include <linux/unistd.h>
#include <linux/types.h>    // also tried "asm/types.h"
#include <linux/dirent.h>
#include <linux/stat.h>

asmlinkage
int sys_mycall( const char* srcDir ) {
    DIR* dir_p;
    struct dirent *dirEntry;
    struct stat inode;
    dir_p = opendir(srcDir);
    ...
    ...
} 
```

但是，编译器找不到它需要的东西

```
mycall.c:9:5: error: unknown type name ‘DIR’
mycall.c:14:5: error: implicit declaration of function ‘opendir’ [-Werror=implicit-function-declaration] 
```

如果这是一个用户空间应用程序，那么我会 #include`<dirent.h>`和`<sys/types.h>`，但我没有这些可用。编译器似乎没有任何问题找到上面的头文件，但它显然没有得到它需要的东西。

是否可以从另一个系统调用进行此调用？
我在另一个相关问题中看到有人建议实现或重用所需的系统调用在后台执行的操作，而不是直接调用它。

如果可能的话，有人可以让我知道我需要什么来拨打电话（同样，这是 Linux 3.2.17）。
谢谢。

**编辑：
这似乎是要走的路：[如何使用该目录的文件描述符在内核级别打开目录？](https://stackoverflow.com/questions/8347553/how-do-i-open-a-directory-at-kernel-level-using-the-file-descriptor-for-that-dir)**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T07:39:13.403

是的，可以从另一个系统调用进行系统调用。但它有局限性。你也不能`opendir()`在内核中使用。

尝试寻找`struct nameidata nd`

利用`user_path_parent();`

检查此链接： http: [//lxr.free-electrons.com/source/fs/namei.c#L3352](http://lxr.free-electrons.com/source/fs/namei.c#L3352)

# axapta - 方法运行哪个层

> ID：13079170
> 
> 赞同：0
> 
> 时间：2012-10-26T00:16:46.160
> 
> 标签：axapta

如何检查女巫层方法/代码运行？

```
static server client void check()
{;
    info('Tier' + [...] ? 'client' : 'server');
} 
```

应该是`[...]`什么？

所以我们可以从

```
static server void checkServer()
{;
    Class1::check();
}

static client void checkClient()
{;
    Class1::check();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T00:56:53.990

```
static server client void check()
{
    ;

    info('Tier ' + (!isRunningOnServer() ? 'client' : 'server'));
} 
```

# objective-c - 在 viewDidAppear 之前无法正确设置框架

> ID：13079172
> 
> 赞同：43
> 
> 时间：2012-10-26T00:16:55.467
> 
> 标签：objective-c, ios, uiview, viewdidload, viewdidappear

我想知道是否有人知道为什么当您设置子视图的框架`viewDidLoad`并且`viewWillAppear`更改不会对屏幕产生影响时，但是如果您将其设置在其中，`viewDidAppear`他们会这样做吗？

在我的情况下，我正在加载一个带有两个表视图的自定义 xib，然后尝试将它们向下移动，`viewDidLoad`以便为添加的另一个视图留出空间，`viewDidLoad`因为并不总是需要显示它。

问题是当我设置框架`viewDidLoad`或`viewWillAppear`设置在对象上时，我可以通过打印出来看到，但它不会反映在屏幕上。将我设置的框架调用移动到`viewDidAppear`将导致一切按预期工作。

认为我应该能够设置框架是错误的`viewDidLoad`吗？

```
- (id)init {
    if ( self = [super initWithNibName:@"MyView" bundle:nil] ) {}

    return self;
}

- (void)viewDidLoad {
    [super viewDidLoad];
    self.descriptionWebView = [[[UIWebView alloc] initWithFrame:CGRectMake( 0, 0, self.view.frame.size.width, 200 )] autorelease];

    [self.view addSubview:self.descriptionWebView];

    self.tableView1.autoresizingMask = UIViewAutoresizingNone;
    self.tableView2.autoresizingMask = UIViewAutoresizingNone;

    [self.descriptionWebView loadRequest:[NSURLRequest requestWithURL:[[NSBundle mainBundle] URLForResource:@"...." withExtension:@"html"]]];

    table1LocationWithHeader = CGRectMake( self.tableView1.frame.origin.x, 200, self.tableView1.frame.size.width, self.tableView1.frame.size.height - 200 );
    table2LocationWithHeader = CGRectMake( self.tableView2.frame.origin.x, 200, self.tableView2.frame.size.width, self.tableView2.frame.size.height - 200 );

    //this will NOT work
    self.tableView1.frame = table1LocationWithHeader;
    self.tableView2.frame = table2LocationWithHeader;
}

- (void)viewWillAppear:(BOOL)animated {
    [super viewWillAppear:animated];

    //this will NOT work
    self.tableView1.frame = table1LocationWithHeader;
    self.tableView2.frame = table2LocationWithHeader;
}

- (void)viewDidAppear:(BOOL)animated {
    [super viewDidAppear:animated];

    //this WILL work
    self.tableView1.frame = table1LocationWithHeader;
    self.tableView2.frame = table2LocationWithHeader;
}

//I added these after comments for stack overflow users, it seems like viewDidLayoutSubviews is the best place to set the frame

- (void)viewWillLayoutSubviews {
    [super viewWillLayoutSubviews];

    //this will NOT work
    self.tableView1.frame = table1LocationWithHeader;
    self.tableView2.frame = table2LocationWithHeader;
}

- (void)viewDidLayoutSubviews {
    [super viewDidLayoutSubviews];

    //this WILL work
    self.tableView1.frame = table1LocationWithHeader;
    self.tableView2.frame = table2LocationWithHeader;
} 
```

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2012-10-26T00:44:15.737

viewDidLoad 在类加载时调用，但是没有初始化任何 ui 元素，因此在 viewDidLoad 和 viewDidAppear 调用之间发生的初始化过程中，任何引用它们的尝试都将被覆盖或不可用。一旦所有 ui 元素都被初始化并绘制 viewDidAppear 被调用。

> viewDidLoad - 在控制器的视图加载到内存后调用

此时视图不在视图层次结构中。

> viewWillAppear - 通知视图控制器它的视图即将被添加到视图层次结构中。

同样，该视图尚未添加到视图层次结构中。

> viewDidAppear - 通知视图控制器其视图已添加到视图层次结构中。

只有这样，视图才会添加到视图层次结构中。

**更新**

这`viewDidLayoutSubviews`是在 UI 实际出现在屏幕上之前修改 UI 的最合适的位置。

> viewDidLayoutSubviews - 通知视图控制器它的视图刚刚布置了它的子视图。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-08-03T00:40:26.977

请参阅此线程[何时调用 layoutSubviews？](https://stackoverflow.com/questions/728372/when-is-layoutsubviews-called)
使用自动布局时，框架不会自动调用 layoutSubviews。这是非常重要的。来自参考：

*   init 不会导致 layoutSubviews 被调用（duh）
*   addSubview：导致 layoutSubviews 在被添加的视图、它被添加到的视图（目标视图）以及目标的所有子视图上被调用。...

如果在 viewDidLoad 中添加 subview，layoutSubviews 在 vi​​ewDidAppear 之前调用，就可以得到正确的 subview 大小。但是如果你什么都不做，layoutSubviews 会在 viewDidAppear 之后被调用。这取决于你的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-02T10:05:26.073

在 viewWillAppear()

只需为要获取其框架的视图调用一次 layoutIfNeeded() 。

if tableView then tableView.layoutIfNeeded() 例如

# javascript - 灯箱仅在首次进入网站时加载

> ID：13079173
> 
> 赞同：0
> 
> 时间：2012-10-26T00:16:56.740
> 
> 标签：javascript, jquery, session-cookies, onload, lightbox2

好的，所以我有一个使用灯箱呈现的图像。

我现在要做的是让灯箱在我第一次进入特定页面时出现，但我想在该会话期间显示一次，而不是每次查看该页面时显示一次。只有当我关闭浏览器并再次查看它时它才会出现。

无论如何，我远不是一个 Javascript 专家，而且以前从未对 cookie 做过任何事情，所以我不确定我需要在这里做什么。

如果有人能这么好心并在 JSFiddle 中提供一个示例，那将非常感激。

# c++ - 编译器/链接器错误“未定义的引用”

> ID：13079174
> 
> 赞同：6
> 
> 时间：2012-10-26T00:17:11.903
> 
> 标签：c++, linker-errors, codeblocks

嗨，我刚开始学习 C++。我为傻瓜书买了这本大的 C++ 书，并且一直在阅读它。到目前为止它真的很有趣，但现在我被困住了。我一直在谷歌搜索这个问题，但无济于事。我正在使用我正在使用带有 GNU GCC 的代码块 10.05。

我不断收到一条错误消息：

```
In function 'main':
undefined reference to 'SafeCracker(int)' 
```

代码并不复杂。我是新手，非常沮丧。我不想跳过这部分；我想知道发生了什么事。

主要的：

```
#include <iostream>
#include "safestuff.h"

using namespace std;

int main()
{
  cout << "Surprise, surprise!" << endl;
  cout << "The combination is (once again)" << endl;
  cout << SafeCracker(12) << endl;
  return 0;
} 
```

功能：

```
#include <iostream>

using namespace std;

string SafeCracker(int SafeID)
{
    return "13-26-16";
} 
```

标题：

```
using namespace std;

#ifndef SAFESTUFF_H_INCLUDED
#define SAFESTUFF_H_INCLUDED

 string SafeCracker(int SafeID);

#endif // SAFESTUFF_H_INCLUDED 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T00:26:33.507

您没有编译与第一个文件一起列出的第二个文件。尝试直接用 gcc 编译来理解这一点。

假设您的文件名为：

*   主文件
*   SafeCracker.cpp
*   安全资料.h

这就是你正在做的

`gcc main.cpp`

虽然你应该这样做

`gcc main.cpp SafeCracker.cpp`

此外，为了清楚起见，SafeCracker.cpp 也应该包含头文件。你有什么理由让他们分开吗？

另一方面，从看到 Daniel Hu 的答案，`<iostream>`自动`<string>`为您包括在内。您不应依赖此功能，而应包含`<string>`在每个使用字符串的文件中。

（来自下面的评论）您可能正在尝试将 main.cpp 构建为独立文件。这将使 SafeCracker.cpp 未编译。您需要在 Codeblocks 中创建一个项目并将所有三个文件添加到其中（包括 *.cpp 文件和 *.h 文件）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T00:26:12.090

我想是因为你没有`#include <string>`

C++ 必须导入字符串库才能使用字符串，否则所有内容都被视为 char 数组。

# matlab - 如何在图形的频谱图上做标记？

> ID：13079175
> 
> 赞同：0
> 
> 时间：2012-10-26T00:17:18.593
> 
> 标签：matlab, plot, matlab-figure, spectrogram

使用一个图形创建一个新图形，然后在其上绘制频谱图，如何在现有图形上标记某个点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T01:09:16.340

使用保持功能：

`hold on`

这样，您可以制作另一个图，它将覆盖频谱图。

一个例子（你可能没有看到你的标记，因为它不够大）：

```
>> t=0:0.001:2;                    % 2 secs @ 1kHz sample rate  
>> y=chirp(t,100,1,200,'q');       % Start @ 100Hz, cross 200Hz at t=1sec   
>> spectrogram(y,128,120,128,1E3); % Display the spectrogram
>> hold on
>> plot(200,1,'bx','MarkerSize',20,'LineWidth',20); %Overlay a large, blue X 
```

# android - 编写一个在设备之间传递消息的跨平台应用程序？

> ID：13079177
> 
> 赞同：0
> 
> 时间：2012-10-26T00:17:50.727
> 
> 标签：android, ios, api, xmpp, messaging

我正在尝试编写一个具有消息传递功能的应用程序。它需要具有处理图片和其他类型的通用数据文件的能力。它也应该是推动的，几乎是即时的。此外，如果有办法让它跨平台，尤其是在 iOS 和 Android 之间，那就太好了。我对当前处理推送消息的任何协议都不是很熟悉。我的一个想法是 XMPP，但我不认为有多少应用程序这样做。Facebook Messenger 等应用程序使用哪些协议？我知道可以使用某种 REST HTTP 框架，这是最好的方法吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T04:21:47.447

据我所知，XMPP 用于 GGPlay 中的许多应用程序，例如微信、GOSMS、Whatsapp、Cubie、LINE、Gtalk……也使用 XMPP。GTalk 使用自己的基于 XMPP 的实现。其他人使用 Smack。对于 Android，您可以使用很久以前不支持[的 A-Smack 。](http://code.google.com/p/asmack/)另一种选择是目前正在开发和改进的[Beem 。](http://beem-project.com/)对于 iOS 使用[xmppframework](https://github.com/robbiehanson/XMPPFramework)库。[你可以在这里](http://xmpp.org/xmpp-software/libraries/)找到其他语言的库

# android - 使 PageView 视图快速滚动

> ID：13079181
> 
> 赞同：1
> 
> 时间：2012-10-26T00:18:17.480
> 
> 标签：android, android-viewpager, pageviews

我有一个 pageView，我使用 dave 的代码在同一个屏幕上显示一些视图，例如画廊小部件，但问题似乎有点慢，不知道如何修改 ontouch 事件，我该怎么做才能快速滚动我有这个 PageScroll 代码

```
public class PagerContainer extends FrameLayout implements ViewPager.OnPageChangeListener {

    private ViewPager mPager;
    boolean mNeedsRedraw = false;

    public PagerContainer(Context context) {
        super(context);
        init();
    }

    public PagerContainer(Context context, AttributeSet attrs) {
        super(context, attrs);
        init();
    }

    public PagerContainer(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        init();
    }

    private void init() {
        //Disable clipping of children so non-selected pages are visible
        setClipChildren(false);

        //Child clipping doesn't work with hardware acceleration in Android 3.x/4.x
        //You need to set this value here if using hardware acceleration in an
        // application targeted at these releases.
        setLayerType(View.LAYER_TYPE_SOFTWARE, null);
    }

    @Override
    protected void onFinishInflate() {
        try {
            mPager = (ViewPager) getChildAt(0);
            mPager.setOnPageChangeListener(this);
        } catch (Exception e) {
            throw new IllegalStateException("The root child of PagerContainer must be a ViewPager");
        }
    }

    public ViewPager getViewPager() {
        return mPager;
    }

    private Point mCenter = new Point();
    private Point mInitialTouch = new Point();

    @Override
    protected void onSizeChanged(int w, int h, int oldw, int oldh) {
        mCenter.x = w / 2;
        mCenter.y = h / 2;
    }

    @Override
    public boolean onTouchEvent(MotionEvent ev) {
        //We capture any touches not already handled by the ViewPager
        // to implement scrolling from a touch outside the pager bounds.
        switch (ev.getAction()) {
            case MotionEvent.ACTION_DOWN:
                mInitialTouch.x = (int)ev.getX();
                mInitialTouch.y = (int)ev.getY();
            default:
                ev.offsetLocation(mCenter.x - mInitialTouch.x, mCenter.y - mInitialTouch.y);
                break;
        }

        return mPager.dispatchTouchEvent(ev);
    }

    @Override
    public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {
        //Force the container to redraw on scrolling.
        //Without this the outer pages render initially and then stay static
        if (mNeedsRedraw) invalidate();
    }

    @Override
    public void onPageSelected(int position) { }

    @Override
    public void onPageScrollStateChanged(int state) {
        mNeedsRedraw = (state != ViewPager.SCROLL_STATE_IDLE);
    }
} 
```

这是我获取代码的网络： [PageView 代码](https://gist.github.com/8cbe094bb7a783e37ad1)，这是我得到的图像，![页面浏览结果](../Images/7fc5e7c7d05c9d0be73f5177b871b997.png)因为 Gallery 它已被弃用，应该使用它，并且由于我使用图像（我尝试了 asyntask 和很多东西），画廊抛出了我的内存不足异常） 谢谢

# c# - 将方法移动到单独的类

> ID：13079182
> 
> 赞同：0
> 
> 时间：2012-10-26T00:18:19.200
> 
> 标签：c#, xml

我有一个名为Beginning 的Windows 窗体中的方法，它从xml 读取名称并将它们显示在列表框中。我想将该方法移动到一个单独的类，该类只处理读取 xml 名称。这是我想移入不同班级的功能

```
public void readNames()
{
    string path = "runners.xml"; //path
    XDocument xDoc = XDocument.Load(path);
    foreach (XElement element in xDoc.Descendants("Name"))
    {
        myListBox.Items.Add(element.Value);
    }

} 
```

有没有办法做到这一点？另外，我如何从我的开始表单类中调用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T00:27:07.640

```
public class MyXMLNamesReader
{
    public static List<string> readNames(string path)
    {
        List<string> names = new List<string>();
        XDocument xDoc = XDocument.Load(path);
        foreach (XElement element in xDoc.Descendants("Name"))
        {
            names.Add(element.Value);

        }
        return names;
    }

} 
```

## 用法

```
List<string> names = MyXMLNamesReader.readNames("runners.xml");
foreach(string name in names)
{
   myListBox.Items.Add(name);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T00:24:31.920

像这样的东西应该可以工作**（未经测试）**：

```
public static class MyReaderClass
{
  public static List<string> ReadNames(string path)
  {
    var items = new List<string>();

    XDocument xDoc = XDocument.Load(path);
    foreach (XElement element in xDoc.Descendants("Name"))
    {
      items.Add(element.Value);
    }

    return items;
  }
} 
```

然后你从你的表单中调用它：

```
myListBox.Items.AddRange(MyReaderClass.ReadNames("runner.xml")); 
```

# android - Android Widget 类型示例

> ID：13079184
> 
> 赞同：3
> 
> 时间：2012-10-26T00:18:24.960
> 
> 标签：android, android-widget

我正在将一个应用程序从 iOS 移植到 Android，我已经阅读了几本书，并且正在学习。我遇到的一件事是找到一个文档、应用程序或网站，这些文档、应用程序或网站将向我展示可用的不同类型的小部件以及它们的名称。有人知道这样做的任何资源吗？

![在此处输入图像描述](../Images/2744c385cd4474fba1dfa5848055de12.png)

我之所以这么问，是因为我在 Android 文档中偶然发现了这个可爱的东西，但我一生都无法找出这个小部件是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T00:21:19.880

该特定小部件是[NumberPicker](http://developer.android.com/reference/android/widget/NumberPicker.html)。大多数小部件都在[android.widget](http://developer.android.com/reference/android/widget/package-summary.html)包中。您还可以查看包含一些有用信息的[用户界面开发人员指南。](http://developer.android.com/guide/topics/ui/index.html)

# mercurial - 在 Mercurial 中做什么而不是压缩提交

> ID：13079186
> 
> 赞同：4
> 
> 时间：2012-10-26T00:18:28.700
> 
> 标签：mercurial, push, changeset

每次保存任何内容时，我都将 IDE 设置为在本地提交。理想情况下，我希望保留一份未经审查的记录，以备不时之需，以备不时之需。但大多数时候它使我的历史变得详细。

我想知道一个很好的策略来保留这段历史，但大部分时间都可以忽略它。每次保存时，我的 IDE 都会运行我自己的脚本，所以我可以控制它。

我对 Mercurial 很陌生，所以我在这里可能只需要一个基本的答案。但是，在提交、合并和报告时我应该执行哪些步骤才能在很大程度上忽略这些自动提交，但实际上不会压缩它们？还是我最好放弃并只是挤压？

[关于如何用评价很高的评论进行壁球的相关问题表明保留该历史记录可能会更好](https://stackoverflow.com/questions/1200691/with-mercurial-how-can-i-compress-a-series-of-changesets-into-one-before-push)

编辑 - 我的观点是，如果 Mercurial 想要保留您的所有历史记录（我同意），它应该让您过滤该历史记录以避免看到您可能想要压缩的内容。我宁愿*不*压扁，我只是寻求一种策略的帮助（在常规使用中，尽管并非总是如此）使它看起来尽可能像我压扁我的历史一样。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T22:34:58.977

您想在您的存储库中保留详细的历史记录，但您希望拥有（并能够导出）仅包含“合理”修订集的理想化历史记录，对吗？我可以同情。

**解决方案一：**用标签标记历史中有趣的点，学会忽略它们之间的所有杂乱无章的点。

**解决方案2：**使用两个分支并合并。在分支中进行开发`default`，并保持并行分支`release`。（你可以称它为`clean`，但实际上你是在管理发布）。每当`default`处于您想要检查点的稳定状态时，如果您愿意，切换到分支`release`并将--的当前状态分批*合并到其中。*`default`如果您从不直接向 提交任何内容`release`，则永远不会发生合并冲突。

```
 (original branch) --o--o--o--o--o--o--o    (default)
          \              \        \
           r   ... ...  --r--------r        (release) 
```

结果：您可以更新到任何修订版`release`并期望正常运行状态。你可以运行`hg log -r release`，你只会看到选择的检查点。您可以检查完整的日志以了解一切是如何发生的。缺点：因为`release`分支依赖于`default`，所以你不能把它推送到另一个仓库而不`default`带它。由于`hg glog -r release`重复合并，也会看起来很奇怪。

**解决方案 3：**如上使用命名分支，但使用`rebase`扩展而不是合并。它可以选择复制而不是直接移动重新设置的变更集；它有一个选项`--collapse`可以将一组修订转换为一个修订。`r1:tip`每当您有一组要完成的修订时，请将它们从to*复制*如下：`default``release`

```
hg rebase --source r1 --dest release --keep --collapse 
```

这会将 ONE 修订版推到 r1 的开头，`release`这相当于整个变更集从 r1 到`default`. 该`--keep`选项使其成为副本，而不是破坏性的重写。优点是`release`分支看起来就像你想要的那样：漂亮干净，你可以推送它而不用拖拽默认分支。缺点是您无法将其阶段与 中的修订相关联`default`，因此我建议您使用方法 2，除非您确实*必须*隐藏中间修订。（另外：分批压缩你的历史并不容易，因为 rebase 将移动/复制“源”修订的所有后代。）

所有这些都需要你做一些额外的工作。这是不可避免的，因为 mercurial 无法知道您想要压缩哪些修订集。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-27T05:04:29.437

> 它应该让您过滤该历史记录，以避免看到您可能想要压缩的东西

Mercurial 有这方面的工具。如果您只是不想看到（`hg log`我想在 中） - 使用 revsets 过滤这些变更集：

```
hg log -r "not desc('autosave')" 
```

或者，如果您使用 TortoiseHg，只需转到 View -> Filter Toolbar，然后在工具栏中输入“not desc('autosave')”。瞧，您的自动保存条目已从主列表中隐藏。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-26T19:22:39.603

如果您确实希望保留`Ctrl-S`回购历史记录中的所有微小更改，并且只`log`显示重要更改集的子集，那么您始终可以`tag`将“重要”更改集别名`log`为`log -r tagged()`. 或者您可以将相同的原则与其他一些[revset descriptor](http://www.selenic.com/hg/help/revsets)一起使用，例如在自动提交的消息中包含文本“autosave”并使用`log -r keyword(autosave)`，这将向您显示所有非自动保存的提交。

* * *

为了实现您的目标，至少在我接近它的时候，我会使用[`mq`扩展](http://mercurial-scm.org/wiki/MqExtension)并在每次保存时自动提交*补丁队列存储库。*然后，当您完成“白痴摸索”后，您可以`hg qfinish`将补丁作为可以推送的单个变更集。您应该（一如既往！）将更改集中在一个概念或步骤上（例如“修复保存按钮”），但这将记录为实现目标所采取的所有小步骤。

你需要

*   `hg qinit --mq`一次初始化补丁队列​​仓库（仅供参考：存储在`\.hg\patches\`）
*   `hg qnew fixing-the-save-btn`创建补丁

然后每次保存在 IDE 中

*   `hg qrefresh`更新补丁
*   `hg commit --mq`在补丁队列 repo 中进行小改动

当你完成

*   `hg qfinish fixing-the-save-btn`将补丁转换为要推送的变更集

这样可以使您的 repo 本地化与每次保存时更改的内容保持一致，但仅在完成时推送变更集。您还可以`qpop`或`qpush`更改您正在处理的项目。

如果您尝试使用 squash 方法，那么当您压缩变更集时，您会丢失摸索的历史记录。要么这样，要么你会被困在试图将工作迁移到“真实”存储库/从“真实”存储库迁移，我可以根据经验告诉你，你不想这样做。`:)`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-29T03:31:41.960

我建议你使用分支。当您开始一个新功能时，您会创建一个新分支。您可以在该分支中尽可能多地提交。完成后，将功能分支合并到主干中。这样，您基本上将历史分为两类：一类是细粒度的（特征分支中的历史），另一类是粗粒度的（主干中的历史）。您可以使用以下命令轻松查看其中任何一个：`hg log --branch <branch-name>`。

# c# - 在 winforms/C# 中更新组合框的 Stackoverflow 异常

> ID：13079191
> 
> 赞同：1
> 
> 时间：2012-10-26T00:18:53.190
> 
> 标签：c#, winforms, combobox, stack-overflow

我得到一个`StackOverflowException`. 不知何故，在这里发帖似乎很合适。

我在 C# 应用程序中使用 Windows 窗体。这个应用程序打算在Linux、FreeBSD和Mac-OS上运行，所以我不能使用WPF，所以请不要推荐它。

我的猜测是我错过了 WinForms 的细微差别，但我似乎无法弄清楚是什么。

由 VS 2010 中的`ComboBox`GUI 表单生成器生成。

抛出错误的特定代码行在这里：

```
if(cur_num_is_valid)
{
    cbx_material_num.Text = num;
}
else
{
    num = "0";
    //I only have one of the following two at a time. Both overflow
    cbx_material_num.SelectedIndex = 0;
    cbx_material_num.Text = "0";
} 
```

由于代码有些复杂，这里是整个函数代码。'cbx_' 表示组合框。'txtb_' 是一个文本框。

```
private void cbx_material_numobj_SelectedIndexChanged(object sender, EventArgs e)
{
    string obj = cbx_material_obj.Text;
    string num = cbx_material_num.Text;
    int selnum = 0;
    int n = 0;

    //do we need to recreate the numbers array?
    bool cur_num_is_valid = false;
    cbx_material_num.Items.Clear();
    if(obj != lastobj)
    {
        n = m_demo.get_object_modifiers(obj);
        for(int i = 0; i <= n; i++)
        {
            string s = i.ToString();
            if(s == num && i < n) cur_num_is_valid = true;
            cbx_material_num.Items.Add(s);
        }
    }
    if(cur_num_is_valid)
    {
        cbx_material_num.Text = num;
    }
    else
    {
        num = "0";
        //Overflow here:
        cbx_material_num.SelectedIndex = 0;
    }

    try
    {
        selnum = int.Parse(num);
    }
    catch(Exception)
    {
        MessageBox.Show("Error, second select menu after 'object modifiers' must be a number, not '"+num+"'.");
        cbx_material_num.Text="0";
        return;
    }

    if(selnum >= n)
    {
        txtb_material_param1.Text = "0";
        txtb_material_param2.Text = "0";
        txtb_material_param3.Text = "0";
        txtb_material_param4.Text = "0";
    }
    else
    {
        MaterialFace face;
        MaterialParameter parameter;
        int typeid;
        object paramdata;
        m_demo.get_object_modifiers_material(obj, selnum, out face, out parameter, out typeid, out paramdata);
        cbx_material_face.Text = face.ToString();
        cbx_material_paramtype.Text = parameter.ToString();
        switch(typeid)
        {
            case 0:
                txtb_material_param1.Text = ((float)paramdata).ToString();
                cbx_material_datatype.Text = "float";
                goto case -1;
            case 1:
                float[] parsf = ((float[])paramdata);
                txtb_material_param1.Text = parsf[0].ToString();
                txtb_material_param2.Text = parsf[1].ToString();
                txtb_material_param3.Text = parsf[2].ToString();
                txtb_material_param4.Text = parsf[3].ToString();
                cbx_material_datatype.Text = "float[]";
                break;
            case 2:
                txtb_material_param1.Text = ((int)paramdata).ToString();
                cbx_material_datatype.Text = "int";
                goto case -1;
            case 3:
                int[] parsi = ((int[])paramdata);
                txtb_material_param1.Text = parsi[0].ToString();
                txtb_material_param2.Text = parsi[1].ToString();
                txtb_material_param3.Text = parsi[2].ToString();
                txtb_material_param4.Text = parsi[3].ToString();
                cbx_material_datatype.Text = "int[]";
                break;
            case -1: //can't actuall be returned, used to 'blank' the last three as '0'
                txtb_material_param2.Text = "0";
                txtb_material_param2.Text = "0";
                txtb_material_param3.Text = "0";
                break;
            case 4:
                OpenTK.Graphics.Color4 paramc = ((OpenTK.Graphics.Color4)paramdata);
                txtb_material_param1.Text = paramc.R.ToString();
                txtb_material_param2.Text = paramc.G.ToString();
                txtb_material_param3.Text = paramc.B.ToString();
                txtb_material_param4.Text = paramc.A.ToString();
                cbx_material_datatype.Text = "Color4";
                break;
            default: //5
                Vector4 paramv = ((Vector4)paramdata);
                txtb_material_param1.Text = paramv.X.ToString();
                txtb_material_param2.Text = paramv.Y.ToString();
                txtb_material_param3.Text = paramv.Z.ToString();
                txtb_material_param4.Text = paramv.W.ToString();
                cbx_material_datatype.Text = "Vector4";
                break;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T01:00:19.960

在尝试设置 SelectedIndex 之前，您需要检查它是否已经为 0：

```
 if (cbx_material_num.SelectedIndex != 0){
       cbx_material_num.SelectedIndex = 0;
    } 
```

否则，您每次都会重新触发该事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T00:37:48.597

我认为，每当您`cbx_material_num.SelectedIndex = 0;`在其中设置它时，`EventHandler`您都会调用您的

```
cbx_material_numobj_SelectedIndexChanged(object sender, EventArgs e) 
```

每次调用都会调用另一个事件处理程序，因此堆栈会在一段时间后填满。基本上，它被称为 SelectedIndexChanged 的​​事实并不意味着该值必须与前一个不同，而是该值是通过其设置器设置的。

# php - 加入2个mysql表并生成一个数组

> ID：13079196
> 
> 赞同：1
> 
> 时间：2012-10-26T00:19:29.357
> 
> 标签：php, mysql

条目和图像，并且一直在尝试我能找到的各种方式加入他们以获得以下结果

```
entries:
entry_id
name

images:
entry_id
image_url 
```

我正在使用 php，并希望能够检索给定 entry_id 的所有关联 image_url 行，并将它们与条目表中的其他信息结合起来。

所以我有类似的东西：

```
entries:
1, Brian
2, Steve
3, Jane

images:
1, images/brian1.jpg
1, images/brian2.jpg
2, images/steve.jpg
3, images/jane_1.jpg
3, images/jane_2.jpg
3, images/jane_3.jpg 
```

并希望得到一个数组，例如

```
array(3) {
  [0]=>
    array(3) {
      ["entry_id"]=>
      string(1) "1"
      ["name"]=>
      string(5) "Brian"
      ["images"]=>
        array(2) {
          ["image_url"]=>
          string(17) "images/brian1.jpg"
          ["image_url"]=>
          string(17) "images/brian2.jpg"
        }
      }
  [1]=>
    array(3) {
      ["entry_id"]=>
      string(1) "2"
      ["name"]=>
      string(5) "Steve"
      ["images"]=>
        array(1) {
          ["image_url"]=>
          string(16) "images/steve.jpg"
        }
      }
  [2]=>
    array(3) {
      ["entry_id"]=>
      string(1) "3"
      ["name"]=>
      string(5) "Jane"
      ["images"]=>
        array(3) {
          ["image_url"]=>
          string(18) "images/jane_1.jpg"
          ["image_url"]=>
          string(18) "images/jane_2.jpg"
          ["image_url"]=>
          string(18) "images/jane_3.jpg"
        }
      }
    } 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T01:27:40.827

没有测试过这些，我假设你想要这样的东西：

```
SELECT * FROM entries INNER JOIN images ON images.entry_id = entries.entry_id 
```

然后遍历这些结果：

```
$entries = array();

while ($row = mysql_fetch_assoc($data))
{
    if (!isset($entries[$row['entry_id']]))
    {
        $row['images'] = array();
        $entries[$row['entry_id']] = $row;
    }

    $entries[$row['entry_id']]['images'][] = $row['image_url'];
} 
```

然后你可以循环这个返回：

```
foreach ($entries as $entry)
{
    foreach ($entry['images'] as $image);
    // do something interesting
} 
```

That should about do it for you, but you may have to modify some things.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T00:30:57.607

您的数据库连接代码是否已排序？

我相信您正在寻找一个完整的外部连接。查看此资源以获取不同连接的 SQL 示例。

[http://www.codeproject.com/Articles/33052/Visual-Representation-of-SQL-Joins](http://www.codeproject.com/Articles/33052/Visual-Representation-of-SQL-Joins)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T00:33:21.307

简单的方法是这样的

```
 select * from entries, images where images.entry_id = entries.entry_id group by entries.entry_y; 
```

加入是这样的：

```
SELECT * FROM entries INNER JOIN images ON images.entry_id = entries.entry_id 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T01:55:01.097

For display array like that, you cannot use join, try this :

1.  select all data in table entries
2.  foreach table entries, when foreach include table images

Ex:

> $q_e = "SELECT * FROM `entries`"; $result_entry = mysql_query($q_e);
> 
> $entries = array(); $images = array();
> 
> while($entry = mysql_fetch_array($result_entry)) {
> 
> ```
>  $q_i = "SELECT * FROM `images` WHERE `entry_id` = '".$entry['entry_id']."'";
>   $result_image = mysql_query($q_i);
> 
>   while($image = mysql_fetch_array($result_image)) {
>       $images[] = array(
>           'image_url' => $image['image_url']
>       );
>   }
> 
>   $entries[] = array (
>       'entry_id' => $entry['entry_id'],
>       'name' => $entry['name'],
>       'images' => $images,
>   ); 
> ```
> 
> }
> 
> echo 'pre>';var_dump($entries);

# php - 带有视觉范式的 php 语法

> ID：13079198
> 
> 赞同：0
> 
> 时间：2012-10-26T00:20:27.433
> 
> 标签：php, visual-paradigm

当我尝试对 PHP 代码进行反向工程时，我的 PHP 代码出现错误。尤其是这条线

```
$adapter  = new \Geocoder\HttpAdapter\CurlHttpAdapter(); 
```

它不喜欢反斜杠。我该如何解决这个问题，PHP中是否有更好的方法来编写它？

```
Reason :
Error occured when analysis: /home/vincent/dnseq/geo.php. Lexical error at line 189, column 29\.  Encountered: "\\" (92), after : "" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T00:31:26.730

该代码在 PHP 5.3 和 5.4 中完全有效

看起来您需要更新 Visual Paradigm，或者不支持 5.3。

[http://forums.visual-paradigm.com/posts/list/288199.html](http://forums.visual-paradigm.com/posts/list/288199.html)

# node.js - 在 WebMatrix 中运行节点应用程序时出错

> ID：13079199
> 
> 赞同：6
> 
> 时间：2012-10-26T00:20:28.903
> 
> 标签：node.js, runtime-error, webmatrix, webmatrix-2

我安装了 WebMatrix 并按照[这些](http://www.iis.net/learn/install/installing-iis-7/installing-iis-on-windows-vista-and-windows-7)说明在我的 Windows 7 机器上安装 IIS 7。

当我单击“运行”运行我的 express 节点应用程序时，浏览器会弹出并告诉我

> iisnode 模块无法启动 node.exe 进程。[确保 node.exe 可执行文件在 web.config 的system.webServer/iisnode/@nodeProcessCommandLine](https://github.com/tjanczuk/iisnode/blob/master/src/samples/configuration/web.config)元素中指定的位置可用。默认情况下，node.exe 预计将安装在 x86 系统上的 %ProgramFiles%\nodejs 文件夹和 x64 系统上的 %ProgramFiles(x86)%\nodejs 文件夹中。

这是我的 web.config：

```
<configuration>
<system.webServer>

<handlers>
  <!-- indicates that the app.js file is a node.js application to be handled by the iisnode module -->
  <add name="iisnode" path="app.js" verb="*" modules="iisnode" />
</handlers>

<rewrite>
  <rules>
    <!-- Don't interfere with requests for logs -->
    <rule name="LogFile" patternSyntax="ECMAScript" stopProcessing="true">
      <match url="^[a-zA-Z0-9_\-]+\.js\.logs\/\d+\.txt$" />
    </rule>

    <!-- Don't interfere with requests for node-inspector debugging -->
    <rule name="NodeInspector" patternSyntax="ECMAScript" stopProcessing="true">
      <match url="^app.js\/debug[\/]?" />
    </rule>

    <!-- First we consider whether the incoming URL matches a physical file in the /public folder -->
    <rule name="StaticContent">
      <action type="Rewrite" url="public{REQUEST_URI}" />
    </rule>

    <!-- All other URLs are mapped to the Node.js application entry point -->
    <rule name="DynamicContent">
      <conditions>
        <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="True" />
      </conditions>
      <action type="Rewrite" url="app.js" />
    </rule>
  </rules>
</rewrite>

<!-- You can control how Node is hosted within IIS using the following options -->
<!--<iisnode      
      node_env="%node_env%"
      nodeProcessCountPerApplication="1"
      maxConcurrentRequestsPerProcess="1024"
      maxNamedPipeConnectionRetry="3"
      namedPipeConnectionRetryDelay="2000"      
      maxNamedPipeConnectionPoolSize="512"
      maxNamedPipePooledConnectionAge="30000"
      asyncCompletionThreadCount="0"
      initialRequestBufferSize="4096"
      maxRequestBufferSize="65536"
      watchedFiles="*.js"
      uncFileChangesPollingInterval="5000"      
      gracefulShutdownTimeout="60000"
      loggingEnabled="true"
      logDirectoryNameSuffix="logs"
      debuggingEnabled="true"
      debuggerPortRange="5058-6058"
      debuggerPathSegment="debug"
      maxLogFileSizeInKB="128"
      appendToExistingLog="false"
      logFileFlushInterval="5000"
      devErrorsEnabled="true"
      flushResponse="false"      
      enableXFF="false"
      promoteServerVars=""
     />-->

  <iisnode     
    nodeProcessCommandLine="&quot;%programfiles%\nodejs\node.exe&quot;"
    interceptor="&quot;%programfiles%\iisnode\interceptor.js&quot;" 
  />
</system.webServer>
</configuration> 
```

**是什么导致了这个问题，我该如何解决？**

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-15T13:30:02.193

使用 node.js（64 位），尝试将其放在 web.config 的底部

```
<iisnode watchedFiles="*.js;node_modules\*;routes\*.js;views\*.jade" 
nodeProcessCommandLine="\program files\nodejs\node.exe"/> 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-26T04:11:35.543

如果您从网站安装了 x64 版本的节点，这是一个常见问题。当前 IISNode 设置为从 x32 路径读取 node.exe。您可以更改 nodeProcessCommandLine 以在您的机器上使用 node.exe 的完整路径，或者安装 32 位节点安装。我们正在努力解决这个问题，以便 32/64 位都可以开箱即用。让我知道这是否不是问题:)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-24T04:15:48.807

您可以创建一个从 32 位路径到 64 位路径的符号链接，而不是安装 32 位版本。

在`cmd.exe`提示下：

```
mklink /D "C:\Program Files (x86)\nodejs" "C:\Program Files\nodejs" 
```

令人惊讶的是，这仍然没有修复，并且该`web.config`设置似乎被忽略了。

# javascript - 为什么 jQuery.parseJSON 不能在 Firefox 中解析这个有效的 JSON 文档？

> ID：13079202
> 
> 赞同：2
> 
> 时间：2012-10-26T00:20:47.900
> 
> 标签：javascript, jquery, json, firefox

服务器返回此 JSON 文档：

```
{
"username-found": true,
"question-required": true
} 
```

它成功通过了 JSONLint 的有效性检查。

在网络浏览器中：

```
$.post('my_url', {"post":"data"}, function(data) {
  data = $.parseJSON(data);
}); 
```

该代码在 Opera 12 浏览器中运行并成功解析 JSON 文档，但在 Firefox 16 中，出现 JavaScript 错误并显示“格式不正确”。

JQuery 的版本是 1.7.2。

我看不出我在那里做错了什么，你知道吗？

编辑：

它与服务器返回 JSON 的方式有什么关系吗？这里是：

```
return new StreamingResolution("text", new StringReader(json.toString())); 
```

建议，我可能已经找到原因了。当我这样做时`alert(data)`，Firefox 告诉我那`data`是一个对象，Opera 告诉我那`data`是 JSON 字符串。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T00:25:45.093

**解决方案 1（客户端）- 在 jQuery 请求中设置 DataType**

我认为该特定浏览器版本的内部结构有些不同（因为 jQuery 尝试自动检测 dataType 并且在 JSON 响应的情况下在内部进行解析）并且 JSON 自动编码为 FF 而不是在 Opera 中？

尝试添加 dataType 以便 jQuery 处理这个（我更喜欢那个）：

```
$.post('my_url', {"post":"data"}, function(data) {
    // data should be an json object here
}, 'json'); 
```

这只是一个猜测。

**或解决方案 2（服务器）- 发送 MIME 类型**

您还可以从服务器发送正确的 MIME 类型，这样您就不必在客户端上设置数据类型。这取决于你，但我认为这将是正确的解决方案。

关于[这个](https://stackoverflow.com/questions/477816/the-right-json-content-type)答案应该是`application/json`。

**参考**

jQuery中如何自动检测dataType？

> 默认值：智能猜测（xml、json、脚本或 html）您期望从服务器返回的数据类型。如果没有指定，jQuery 将尝试根据响应的 MIME 类型推断它（XML MIME 类型将产生 XML，在 1.4 中 JSON 将产生 JavaScript 对象，在 1.4 中脚本将执行脚本，其他任何内容都将是作为字符串返回）。

来源：[http ://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T00:30:22.303

你可以直接直接使用`data`对象..

无需使用`$.parseJSON();`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T00:29:56.827

jQuery 中还有一个 $.getJSON 快捷方法。也许 jQuery 会自动为这种情况使用最佳配置，并可能开始工作

[这是 $.getJSON 文档](http://api.jquery.com/jQuery.getJSON/)

# java - ImageView 上的透明背景 EditText 不会显示光标

> ID：13079206
> 
> 赞同：2
> 
> 时间：2012-10-26T00:21:07.727
> 
> 标签：java, android, android-layout, view, android-edittext

因此，我希望用户能够在我设置为图像视图的图像上键入内容。图像已设置并且可以正常工作。当用户单击图像时，编辑文本框会显示在他们单击的位置。但是编辑文本的白色背景会阻止背景中的图像。因此，我将编辑文本背景设置为透明：

```
 editTextOne.setBackgroundColor(Color.TRANSPARENT); 
```

这适用于使编辑文本背景透明。但是，现在光标也不会显示，除非开始键入。

那么，我要问的是是否有任何方法可以使 EditText 背景透明但仍然显示光标并闪烁？任何帮助将不胜感激，谢谢！

代码：

```
 public boolean onTouch(View view, MotionEvent event){
            if (type == true){
                touchX = (int) event.getX();
                touchY = (int) event.getY();
                RelativeLayout.LayoutParams params = (RelativeLayout.LayoutParams) editTextOne.getLayoutParams();
                params.leftMargin = touchX;
                params.topMargin = touchY;
                params.addRule(RelativeLayout.ALIGN_PARENT_TOP);
                params.addRule(RelativeLayout.ALIGN_PARENT_LEFT);
                editTextOne.setLayoutParams(params);
                editTextOne.setVisibility(View.VISIBLE);
                editTextOne.bringToFront();
                editTextOne.setBackgroundColor(Color.TRANSPARENT);
                editTextOne.requestFocus();
                editTextOne.setCursorVisible(true);
            }//end of if statement
            return true;
        }//end of onTouch 
```

XML:

```
 <?xml version="1.0" encoding="utf-8"?>
  <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:id="@+id/relative" >

<Button
    android:layout_height="wrap_content"
    android:layout_width="wrap_content"
    android:layout_toLeftOf="@+id/load"
    android:layout_alignParentBottom="true"
    android:layout_margin="10dp"
    android:text="C"
    android:textStyle="bold"
    android:textSize="20dp"
    android:id="@+id/camera"
    android:onClick="camera"/>

<Button
    android:layout_height="wrap_content"
    android:layout_width="wrap_content"
    android:layout_toLeftOf="@+id/view"
    android:layout_alignParentBottom="true"
    android:layout_margin="10dp"
    android:id="@+id/load"
    android:text="L"
    android:textStyle="bold"
    android:textSize="20dp"
    android:onClick="load"/>

<Button
    android:layout_height="wrap_content"
    android:layout_width="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_alignParentBottom="true"
    android:layout_margin="10dp"
    android:text="v"
    android:id="@+id/view"
    android:textStyle="bold"
    android:textSize="20dp"
    android:onClick="view"/>

<Button 
    android:layout_height="wrap_content"
    android:layout_width="wrap_content"
    android:layout_toLeftOf="@+id/camera"
    android:layout_alignParentBottom="true"
    android:layout_margin="10dp"
    android:text="T"
    android:textStyle="bold"
    android:textSize="20dp"
    android:id="@+id/text"
    android:onClick="text"/>

<TextView 
    android:layout_height="wrap_content"
    android:layout_width="wrap_content"
    android:background="@null"
    android:visibility="invisible"
    android:id="@+id/textone"/>

<EditText
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:visibility="invisible"
    android:inputType="textAutoCorrect"
    android:singleLine="true"
    android:id="@+id/edittextone"/>

<ImageView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerInParent="true"
    android:id="@+id/picture"/>

</RelativeLayout> 
```

编辑：我不确定为什么光标不会立即显示，但我发现一旦按下空格键就可以看到光标。所以，为了解决我的问题，我使用了：

```
 editTextOne.setText(" "); 
```

这会放置一个空格作为初始文本，因此会显示光标。我希望这可以帮助其他遇到类似问题的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T00:54:37.590

您可以在 xml 文件中更改 editext 属性**android:background="@null"**，而不是在代码文件中设置，这对我有用。我希望它对你有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T07:46:53.083

首先，我想确保您要更改光标颜色。是吗 ？

为了那个原因 ：

*   更改您的最低 api（如果 api < 3.2 ）。

*   设置为**android api 3.2 或更高版本。**

*   您将在 EditText 中获得属性，设置为**android:textCursorDrawable="@null"**

*   更改您的 text:color ，这也将设置光标的颜色与文本颜色相同。

这**只会在您的最低 api 级别为 3.2 时对您有所帮助，否则不会。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T00:41:50.550

您是否尝试过手动将焦点设置到文本视图？显示视图后，您可以尝试调用[requestFocus()](http://developer.android.com/reference/android/view/View.html#requestFocus%28%29)吗？

此外，您可以尝试通过[setCursorVisible](http://developer.android.com/reference/android/widget/TextView.html#setCursorVisible%28boolean%29)方法将光标显式设置为可见。

# javascript - Javascript - IE8 忽略条件

> ID：13079207
> 
> 赞同：0
> 
> 时间：2012-10-26T00:21:09.060
> 
> 标签：javascript, for-loop, continue

我的问题：

为什么在 IE 8 中会忽略此条件？

```
if (dynCheck[0].innerHTML == 'Empty' || dynCheck[0].innerHTML == "")` {continue} 
```

更多细节：

我有一个循环将列表项数组存储到另一个数组中。我有一个条件来检查第一个列表项的值是否为“空”，如果它确实如此`continue`。出于某种原因，IE8 忽略了这个条件。可能是因为我正在检查一个持有值的数组吗？

这是整个循环：

```
for(var dynEl = 1; dynEl <= dynLists; dynEl++) {

        //Get Array of List Items
        var dynCheck = document.getElementById('loc' + dynEl).getElementsByTagName('li');

        //Check if it is empty or not
        if (dynCheck[0].innerHTML == 'Empty' || dynCheck[0].innerHTML == "") {continue}

        //If there is content then add it to the Array
        dynElArr[dynElIndx] = dynCheck;

        //Increment Index
        dynElIndx++;
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T00:25:16.850

`innerHTML`浏览器之间不一定相同，尤其是在节点*之间的空白方面。*

情况1：

```
<ul><li>Item</li></ul> 
```

案例二：

```
<ul>
  <li>Item</li>
</ul> 
```

可能会给出不同的结果。

尝试`.nodeValue`或首先选择实际的文本节点并使用`.textContent`/`.nodevalue`

# android - Android模拟器不会关闭

> ID：13079212
> 
> 赞同：28
> 
> 时间：2012-10-26T00:21:54.577
> 
> 标签：android, android-emulator, exit, shutdown, terminate

模拟器启动正常。但是，当您长按电源按钮（或`F7`）并选择“关闭电源”时，它会显示“正在关闭”消息，该消息将永远保留在屏幕上，并且模拟器实际上不会关闭。

我可以关闭模​​拟器窗口或终止它的进程。但我想知道这是否是关闭 Android 模拟器的正确方法。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2019-10-06T20:01:38.050

1.  打开安卓工作室
2.  去 AVD 管理器
3.  转到操作选项卡
4.  点击箭头
5.  你会看到停止
6.  单击并关闭模拟器:)

如果设备以错误的状态停止，则在重新启动模拟器时可能会持续存在。要解决此问题，只需从管理器中虚拟设备的下拉菜单中选择“立即冷启动”。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-02-11T14:04:09.393

根据我在谷歌找到的文档，简单地关闭模拟器窗口是关闭模拟器的正确方法。

> **要停止模拟器实例，只需关闭模拟器的窗口。**

来源：[启动和停止模拟器](https://developer.android.com/studio/run/emulator-commandline.html#starting)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-08-30T13:35:10.777

打开虚拟设备管理器，找到您所关心的虚拟设备，在其操作栏的下拉菜单中勾选“立即冷启动”。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2021-02-19T06:49:41.327

好的，这样做：

1.  打开安卓工作室 [![安卓工作室](../Images/5af5668091ffb95ba77b9725038a5d8e.png)](https://i.stack.imgur.com/X6Kq3.png)

2.转到 AVD 管理器 [![AVD 管理器选择](../Images/856a3418072f7e894853a57d39fef8e0.png)](https://i.stack.imgur.com/jX7lg.png)

3.立即选择您的模拟器和冷启动 [![在此处输入图像描述](../Images/b1abc5d54966074f45b3aa32f1347960.png)](https://i.stack.imgur.com/nGeQV.png)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-02-28T23:56:23.323

# 不知道

我真的不知道。

这是我所知道的。

# 获取正在运行的 Android 实例列表

您可以通过输入以下命令获取正在运行的 Android 实例列表：

```
adb devices 
```

# 你还可以尝试什么

现在您可以访问[“我如何使用 adb 命令关闭 Android 手机？”](https://android.stackexchange.com/questions/47989/how-i-shutdown-android-phone-with-adb-command) 并尝试所有建议的解决方案。

我不知道它们中的任何一个是否有效。请在下面发表评论并通知我们。

# 更多想法

您可以通过输入以下命令连接到正在运行的模拟器：

```
adb shell 
```

现在您可以输入类似 Unix 的 shell 命令来执行操作。这些类似于通常的 Linux shell 命令。

也许以下会起作用？但是，它是真的关闭了，还是重新启动了？

```
sync && reboot -p 
```

事实上，是否有任何“关闭”命令起作用，或者它们都只是导致正在运行的 Android 实例重新启动？

# 请提交错误报告

有人应该在 Android 问题跟踪器中针对当前版本的 Android 模拟器（以及 Google 最新可用的模拟器 ROM 之一）提交错误报告。完成后，请在下方发表评论并向我们提供错误报告的链接。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-03-06T04:15:24.383

如果您正在利用模拟器的“快照”功能，您可能不需要首先关闭 Android。

如果启用了该功能，关闭模拟器窗口应该将模拟器的状态休眠到磁盘。[（来源。）](https://stackoverflow.com/questions/4842612/how-do-you-save-android-emulator-snapshot#4842876)这应该使模拟器下次启动得更快。

您可以使用 AVD Manager 的“编辑...”按钮启用快照支持。

如果要启用快照支持，您可能需要禁用“使用主机 GPU”功能。我认为这两个特点是互不相容的。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-10-06T13:18:22.047

这适用于 Mac 用户。

1.  点击安卓模拟器。
2.  转到顶部菜单
3.  单击显示的项目（只有一个）
4.  从下拉列表中单击停止/退出。

然后它将保存其当前状态，然后将关闭。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-10-27T01:36:01.423

找到了一个简单的解决方案：从android设备管理器->当有问题的模拟器突出显示时，单击右上角的...（三个点）->选择以出厂默认设置开始。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-02-01T17:53:24.560

我试图按住右侧按钮 3-5 秒，然后选择将其关闭。这个对我有用。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-06-12T22:19:32.087

*   转到 AVD 管理器（工具菜单 > AVD 管理器），在操作部分，`stop`然后擦除数据
*   现在单击同一窗口中的播放按钮

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2022-02-07T20:31:46.650

AVD 在端口 5555 上运行，关闭它的最简单方法是使用以下命令行：

> 须藤 lsof -n -i :5555

它将显示正在运行您的 AVD 的 PID，使用 -9 或 -15 来终止进程

> 杀死 -9 [PID]

# c# - 如何实现 Linq OrderBy 方法？

> ID：13079218
> 
> 赞同：10
> 
> 时间：2012-10-26T00:23:00.783
> 
> 标签：c#, linq

我正在尝试更多地了解 linq，例如，如果我想实现 Select 我将像这样实现

```
public static IEnumerable<TResult> Select<TSource, TResult>(IEnumerable<TSource> source, Func<TSource, TResult> selector)
{
    foreach (var item in source)
    {
        yield return selector(item);
    }
} 
```

像这样的地方

```
public static IEnumerable<TSource> Where<TSource>(IEnumerable<TSource> source, Func<TSource, bool> predicate)
{
    foreach (var item in source)
    {
        if (predicate(item))
            yield return item;
    }
} 
```

OrderBy 怎么样？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-26T00:25:57.080

看看[这个](https://codeblog.jonskeet.uk/2011/02/23/reimplementing-linq-to-objects-part-45-conclusion-and-list-of-posts/)。我想你会发现它非常有用。基本上，Jon Skeet 将 Linq 中的所有内容重新实现为学习练习。信息量很大。

第二部分讨论实现[`Where`](https://codeblog.jonskeet.uk/2010/09/03/reimplementing-linq-to-objects-part-2-quot-where-quot/)......等等，直到描述的部分[`OrderBy`](https://codeblog.jonskeet.uk/2011/01/05/reimplementing-linq-to-objects-part-26b-orderby-descending-thenby-descending/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T04:09:59.873

要遵循您当前的实现模式，您可以尝试以下操作：

```
public static IEnumerable<TSource> OrderBy<TSource, TKey>(
    IEnumerable<TSource> source, Func<TSource, TKey> keySelector)
{
    var items = source.ToArray();
    var keys = items.Select(keySelector).ToArray();
    Array.Sort(keys, items);
    foreach (var item in items)
    {
        yield return item;
    }
} 
```

# apache - 为什么我的 Amazon ELB 不能在 DirectorySlash On 下正常工作，它重定向到：8080 而不是：80

> ID：13079220
> 
> 赞同：0
> 
> 时间：2012-10-26T00:23:30.237
> 
> 标签：apache

我使用 Amazon ELB 指向 2 个网络服务器，设置如下：

> ELB：www.elb.com
> 
> 网络服务器 1：10.10.10.1:8080
> 
> 网络服务器 2：10.10.10.2:8080

ELB 配置为将端口 80 转发到端口 8080，仅此而已。

每个 Web 服务器在通过其 IP 和端口访问时都可以正常工作，ELB 可以正常工作，但有一个例外。如果我去*`www.elb.com/directory`*，我希望被重定向到*`www.elb.com/directory/`*，因为我设置了 DirectorySlash On 。

但是我实际上被重定向到`www.elb.com:8080/directory/`. 这显然失败了。

知道我配置不正确导致这种情况的原因吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T17:35:41.780

我想出了答案。我不小心在我的 conf 文件中遗漏了 VirtualHost 中的 ServerName 行。现在一切正常，但我真的不明白为什么错过它会导致我描述的行为。

# c - 使用来自两个不同数组的值填充动态数组时防止存储重复项

> ID：13079222
> 
> 赞同：0
> 
> 时间：2012-10-26T00:24:23.147
> 
> 标签：c, arrays, dynamic, duplication

当从两个不同的数组中获取数字时，我需要知道一种防止重复数字存储在新数组中的方法。该函数应该存储每个“唯一”值一次，而不是再次存储重复值。

到目前为止，这是我的功能代码：

```
int * arrayIntersect(int *sizeOfResult, const int *a, const int *b, int sizeOfA, int sizeOfB){
int i;
int j;
int k = 0;
int c[(sizeOfA + sizeOfB)];

    for(j = 0; j < sizeOfB; j++){
        for(i = 0; i < sizeOfA; i++){
            if(a[i] == b[j]){
                c[k] = a[i];
                (*sizeOfResult)++;
                k++;
            }   
        }
    }
int *d = (int *)malloc(sizeof(int) * *sizeOfResult);
    for(i = 0; i < *sizeOfResult; i++){
        d[i] = c[i];
    }
return d; 
```

}

它打印我需要的值，但我想在打印新动态数组的内容时消除多次显示的相同数字。

关于如何改进我的代码以防止重复的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T01:30:44.030

如果您的数组`a`和`b`是有序的，您可以简单地使用这种线性算法进行数组交集：

```
int* inter(int* szr, int* a, int* b, int sza, int szb)
{
    int c[MAX(sza, szb)];
    int i, j, k = 0;

    for (i = 0, j = 0; i < sza && j < szb;) {
        if (a[i] == b[j]) {
            if (k == 0 || c[k - 1] < a[i]) {
                c[k++] = a[i];
            }

            i++;
            j++;
        }
        else if (a[i] < b[j]) {
            i++;
        }
        else {
            j++;
        }
    }

    *szr = k;

    int* ans = (int*)malloc(sizeof(int) * k);
    for (i = 0; i < k; ++i) {
        ans[i] = c[i];
    }

    return ans;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T01:26:15.790

正确的方法是对数组进行排序，然后像@Murilo Vasoncelos 指出的那样对每个插入进行二进制搜索。

下面是一个快速而肮脏的解决方案，它遍历 a 和 b 并为每次迭代检查之前是否已插入数字。如果不是，它会插入它。

```
int duplicate = 0;
*sizeOfResult = 0;
for(j = 0; j < sizeOfA; j++){
    for(i = 0; i < (*sizeOfResult); i++){
        if(c[i] == a[j]){
            duplicate = 1;
            break;
        }   
    }
    if (!duplicate)
    {
        c[(*sizeOfResult)] = a[i];
        (*sizeOfResult)++;
    }
    duplicate = 0;
}
for(j = 0; j < sizeOfB; j++){
    for(i = 0; i < (*sizeOfResult); i++){
        if(c[i] == b[j]){
            duplicate = 1;
            break;
        }   
    }
    if (!duplicate)
    {
        c[(*sizeOfResult)] = b[i];
        (*sizeOfResult)++;
    }
    duplicate = 0;
} 
```

# c# - 特殊字符的 ICQ 编码

> ID：13079223
> 
> 赞同：0
> 
> 时间：2012-10-26T00:24:28.690
> 
> 标签：c#, character-encoding, icq

我正在使用 ICQ 协议，但发现特殊字母（fxp 变音符号）存在问题。我使用另一种编码（如果我记得的话是 CP-1251）读取了那个 ICQ。

如何使用文本解码字符串以正确编码？

我试过使用 UTF8Encoding 类，但没有成功。

使用 ICQ-sharp 库。

```
 private void ParseMessage (string uin, byte[] data)
    {
        ushort capabilities_length = LittleEndianBitConverter.Big.ToUInt16 (data, 2);
        ushort msg_tlv_length = LittleEndianBitConverter.Big.ToUInt16 (data, 6 + capabilities_length);
        string message = Encoding.UTF8.GetString (data, 12 + capabilities_length, msg_tlv_length - 4);

        Debug.WriteLine(message);
    } 
```

如果使用同一个客户端进行联系，则可以，但如果不是带有变音符号的传入和传出消息，则无法读取。

我已经确定（使用这个 -> [https://stackoverflow.com/a/12853721/846232](https://stackoverflow.com/a/12853721/846232)）它采用 BigEndianUnicode 编码。但如果字符串不包含变音符号，则其不可读（中文字母）。但是，如果我在没有变音符号的文本上使用 UTF8 编码就可以了。但我不知道该怎么做，它总是会被正确编码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T20:09:51.230

如果 UTF-8 有点工作（即它适用于“英语”或任何 US-ASCII 字符），那么你没有 UTF-16。Latin1（或 Windows-1252，Microsoft 的变体），或者例如 Windows-1251 或 Windows-1250 是完全可能的，因为这些包含拉丁字母但没有变音符号的第一部分是相同的。

像这样解码：

```
var encoding = Encoding.GetEncoding("Windows-1250");
string message = encoding.GetString(data, 12 + capabilities_length, msg_tlv_length - 4); 
```

# php - Magento 在不打折 SKU 的情况下打折多个类别？

> ID：13079237
> 
> 赞同：2
> 
> 时间：2012-10-26T00:26:33.397
> 
> 标签：php, magento

我正在对我的 Magento 商店中的整个类别应用价格规则，但我想省略打折类别中的一些商品。

如何在价格规则中做到这一点？我已经尝试了一切，它只是对所有产品打折，并且仍然以正常价格打折我想离开的产品。

太感谢了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T04:06:49.970

您可以使用购物车价格规则来完成此操作。

在“操作”部分的“将规则应用于匹配此条件的项目”下：

![在此处输入图像描述](../Images/9de1a8cef0acf415874ebe3f6c65dfd1.png)

# c++ - 如何从 json-cpp 解析器获取属性名称和属性值？

> ID：13079238
> 
> 赞同：5
> 
> 时间：2012-10-26T00:26:35.293
> 
> 标签：c++, json, jsoncpp

我正在使用**jsoncpp**解析器 ( [http://jsoncpp.sourceforge.net](http://jsoncpp.sourceforge.net) ) 来解析 JSON 数据。因此，如果我们有以下 JSON：

```
{ "name": "Joseph", "age": 20 } 
```

如何在年龄和 20 岁之后获取**属性名称** *name*和**value** *Joseph , ...？*好的，我们可以**普遍**这样做：

```
string e = root.get(propertyName, defaultValue).asString(); 
```

但我们**真正**想要的是这样的：

```
string e = root.get(name, "Mark").asString(); 
```

现在，变量**e**是 Joseph，它起作用了。但我**必须**取/写“**名字**”。我不想**查询**（不质疑我想要获取**“名称”**（财产名称）和**“约瑟夫”**（财产价值）的功能）。

最好存储在一个**字段中**（例如 C/C++）：

```
property[name][0] = "Joseph"
property[age][0] = 20 
```

我怎样才能做到这一点？还是有其他想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-26T00:47:10.500

[`getMemberNames()`](http://jsoncpp.sourceforge.net/class_json_1_1_value.html#30fa08af88f2d0a038b22ba9f4e88b2a)您可以使用其函数获取 Json::Value 对象的所有成员名称。`.begin()`这将返回一个对象，您可以使用and对其进行迭代`.end()`，就像任何其他标准库容器一样。（实际上，返回类型是 的别名`std::vector<std::string>`。）

获得成员名称后，您应该能够遍历它们并`.get(std::string &, const ValueType &)`像您已经在做的那样使用它们来获取每个对象键的值。

* * *

请注意，JSON 对象本质上是无序的，因此您不一定要依赖具有任何排序的名称列表。如果你想要一个有序的对象，你应该使用 JSON 数组，而不是 JSON 对象。

# python - Turbogears 1.0b1 中所有静态资源的缓存清除

> ID：13079243
> 
> 赞同：2
> 
> 时间：2012-10-26T00:27:18.793
> 
> 标签：python, browser-cache, turbogears

在浏览器中缓存过时`css`和文件时遇到问题。`js`

我正在使用缓存破坏器技术，将带有日期戳的查询参数附加到在主站点模板中明确命名的静态资源 url。

但是，我现在需要使用类似的技术（附加修订号而不是日期戳），但现在适用于所有文件`css`，`js`包括库文件。

我仍在学习 TurboGears 并搜索了文档，但我看不到完成附加的简单方法（对于所有静态资源）。任何指针？

这是一个遗留的 Turbogears 1.0b1 应用程序，可能会在某个时候升级到 Django。

# objective-c - Mac OSX 绘图应用程序的一般方法（使用 obj-c）

> ID：13079244
> 
> 赞同：1
> 
> 时间：2012-10-26T00:27:33.690
> 
> 标签：objective-c, macos, cocoa, opengl, quartz-graphics

我计划在objective-c/cocoa 中制作一个简单的OSX 绘图/绘画应用程序，并认为最好的方法是（简而言之）在NSView 子类中使用石英。

问题：我应该考虑使用 OPEN GL 还是 Quartz 可以解决问题？使用 OPEN GL 是否意味着很大的性能优势？

该应用程序将非常基本，并且应该（例如）能够：

- 以颜色绘制 - 使用位图纹理绘制 - 使用渐变填充 - 程序化画笔

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T01:57:11.797

已经有“一个应用程序”——它是Apple 开发者网站上提供的[Sketch 示例。](http://developer.apple.com/library/mac/#samplecode/Sketch/Introduction/Intro.html)

# php - 跨 Web 项目共享库

> ID：13079245
> 
> 赞同：3
> 
> 时间：2012-10-26T00:27:38.780
> 
> 标签：php, linux, codeigniter, sync, file-transfer

我有 3 个使用 CodeIgniter 框架的 PHP 项目，它们共享一些完全相同的文件，例如模型库和控制器。我可以共享这些文件而不必保持同步和更新相同文件的最佳方式是什么？

*   在 linux 中，我曾想过使用动态链接并将这些文件提取到一个中心位置，但这会破坏我们的版本控制并会产生可移植性问题。
*   另一种可能是跨项目对这些文件使用一致的方法

我假设这是一个常见问题，常见的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T06:56:50.127

你可以做的一件事：

将所有共享代码放在库、助手和模型中，并将其放在单独的文件夹中。然后使用：

```
$this->load->add_package_path('shared location'); 
```

还可以在这里查看： http: [//codeigniter.com/user_guide/libraries/loader.html](http://codeigniter.com/user_guide/libraries/loader.html)，在应用程序包下。

这适用于大多数东西，**除了控制器。**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-26T00:29:53.860

将它们分成一个模块，并使用类似 composer.

[http://getcomposer.org/](http://getcomposer.org/)

或者只是将它们放在单独的 SCM 中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-26T00:31:49.040

使用版本控制！在 svn 中你可以使用外部，git 有子模块或子树。

你不想使用硬链接，你会遇到奇怪的问题，比如更新一个项目会影响另一个项目（“我已经好几个星期没碰过了”）。

代码可以在两个物理位置，但在版本控制下共享。始终只有一份权威副本，即您的版本系统中的一份。所有物理副本都是衍生品。*重要的是，当*您更新特定项目的代码时，您可以控制自己，因此如果您犯了错误，一次更改不会立即破坏另一个项目。如果您*确实*想捕获这些类型的错误，请设置适当的回归测试环境。

与其他开发人员共享开发环境也是一个很大的**禁忌**。您不想等到您的同事修复一个破坏整个程序的解析错误。每个开发人员都应该拥有自己的项目副本（签出！），同样每个项目都应该拥有自己的共享代码副本（外部化）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T00:34:38.373

将它们分离到项目外部的文件夹中，然后在项目中配置或包含它们。

通常我们会为项目重写“autoloader”方法以在我们的新文件夹中查找文件。

# ruby - 在 Sinatra 中读取本地文件时出错

> ID：13079246
> 
> 赞同：0
> 
> 时间：2012-10-26T00:27:39.133
> 
> 标签：ruby, sinatra

我正在尝试编写一个 Sinatra 应用程序，该应用程序从文件中读取列表，然后从该列表中返回一个随机项目。

不过，我很难找出文件的路径来读取它。当我尝试在浏览器中加载项目时，Sinatra 说“没有这样的文件或目录”：

```
Errno::ENOENT at /wod
No such file or directory - http://localhost:4567/listing.txt 
```

这是代码：

```
require 'sinatra'

@list

get /item
  puts read_list[rand(@list.size)]
end

def read_list
  File.open('listing.txt', 'r').readlines
end 
```

我有文件`/public`，Sinatra README 说它是托管静态文件的默认位置。此外，如果我把它放进去，`/public`我可以`localhost:4567/listing.txt`在浏览器中导航并读取文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T01:32:34.510

我注意到了几件事：

```
get /item 
```

不正确，应该是：

```
get '/item' do 
```

如果您在 Ruby 代码所在的同一目录中启动代码，则当前工作目录`"."`将为

```
File.open('listing.txt', 'r').readlines 
```

Ruby 将实际`'./listing.txt'`用作路径。如果您从应用程序的根目录手动启动代码，那没关系，但如果您尝试从其他任何地方启动它，则效果不佳。

当您实际尝试加载某些内容以供 Web 服务器使用时，最好明确说明文件的位置。您可以做一些事情来帮助它更加防弹，而不是依赖机会。考虑一下：

```
def read_list
  running_dir = File.dirname(__FILE__)
  running_dir = Dir.pwd if (running_dir == '.')
  File.open(running_dir + '/public/listing.txt', 'r').readlines
end 
```

[`File.dirname`](http://www.ruby-doc.org/core-1.9.3/File.html#method-c-dirname)从中获取路径信息`__FILE__`，即当前运行文件的绝对路径和名称。如果应用程序是从与文件相同的目录启动的，那将是`.`，这不是我们想要的。在这种情况下，我们需要[`Dir.pwd`](http://www.ruby-doc.org/core-1.9.3/Dir.html#method-c-pwd)返回当前工作目录的绝对路径。然后我们可以将它附加到您想要的文件的路径中，从应用程序的根目录开始。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T00:36:27.193

你需要做`File.read('public/listing.txt', 'r')`才能在这里得到你想要的。

`File.open`不是 Sinatra 的一部分，也不知道在特定位置查找静态文件，因此它只在当前工作目录中查找。

# jquery - JqPlot 条形图和折线图

> ID：13079247
> 
> 赞同：2
> 
> 时间：2012-10-26T00:27:42.867
> 
> 标签：jquery, user-interface, jquery-plugins, jqplot

我有一个由 jqplot 制成的折线图和条形图。问题是，每当我将光标放在条形图上时，折线图就会不可见。我希望用户能够在线图上移动光标，以便向用户突出显示一些信息。提前致谢。

![在此处输入图像描述](../Images/30c04452c1791e9fc1809e1b704a694f.png)

编辑：

```
function gkDrawBarAndLineChart(location) {
var s1 = [4, 7, 9, 15];
var s2 = [12, 6, 19, 8];
var s3 = [[1, 28], [2, 13], [3, 54], [4, 47]];
var values=  [s1,s2,s3]
var dates = ['2012-10-22', '2012-10-23', '2012-10-24', '2012-10-25']

                var optionsObj = {
                title: 'Report',
                 animate: !$.jqplot.use_excanvas,
                axes: {
                     xaxis: {
                        renderer: $.jqplot.CategoryAxisRenderer,
                        ticks: dates
                    },
                    yaxis: {
                        tickOptions: { showMark: true, formatString: "%d" }, 
                        padMin: 0   
                    },
                },

                grid: {
                    borderColor: "#fff",
                    background: "#FFF",
                    drawGridlines: true,
                    shadow: true
                }, 

                series: [
                    {label:'Open',renderer:$.jqplot.BarRenderer, },
                    {label:'Incoming', renderer:$.jqplot.LineRenderer, color:'red', },
                    {label:'Resolved', renderer:$.jqplot.LineRenderer, color:'green'}
                    ],

                legend: {
                    show: true,
                    location: 'ne'
                    },
                seriesDefaults:{
                    shadow: false,
                    rendererOptions:{
                       barPadding: 0,
                       barMargin: 10,
                       barWidth: 25,
                   },
                },
                highlighter : {
                show : true,
                sizeAdjust : 7.5,
                formatString:'<table class="jqplot-highlighter"> \
                              <tr><td>Timestamp:</td><td>%s</td></tr> \
                              <tr><td>Value:</td><td>%s</td></tr>',
                },
            };

                var plot2 = $.jqplot(location, values, optionsObj);
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T04:28:55.840

尝试以下

```
seriesDefaults:{
                  shadow: false,
                  rendererOptions:{
                   barPadding: 0,
                   barMargin: 10,
                   barWidth: 25,
                  highlightMouseDown: true
               }    //Removing the Comma
            }, 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T15:48:28.870

这是为你工作的[小提琴](http://jsfiddle.net/6Wgys/5/)

根据jqplot，您可以使用打开默认突出显示`highlightMouseDown: true`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-07T15:05:21.333

如果我理解正确，将鼠标悬停在条形图上会使折线图不可见。解决方案是在 BarRenderer 选项中添加“highlightMouseOver: false”。

```
renderer: $.jqplot.BarRenderer,
      rendererOptions: {
         highlightMouseOver: false
      } 
```

小提琴：[http ://codepen.io/alkuzad/pen/LpyawY](http://codepen.io/alkuzad/pen/LpyawY)

# c - 为什么这个for循环无限循环？（C）

> ID：13079248
> 
> 赞同：0
> 
> 时间：2012-10-26T00:27:52.507
> 
> 标签：c, arrays, for-loop, infinite-loop

这真的很奇怪。该程序在另一台计算机上运行良好，但是当我在这台计算机上尝试时，它会永远运行。它也是一个 for 循环，这让我更加困惑。SIZE_OF_DATA 是一个预处理器变量，我认为这可能会导致问题。但我不知道。当我添加一个 printf 时，它只显示外部循环的一次迭代，并且在内部循环中无限循环。我不知道为什么。

```
for(i=0; i<size; i++){
    for(j=0;j<SIZE_OF_DATA; j++){
      aArray[i*SIZE_OF_DATA + j] = aPointer[i]->b[j]; 
      cArray[i*SIZE_OF_DATA + j] = 0;                            
      dArray[i*SIZE_OF_DATA + j] = i*SIZE_OF_DATA + j;
      if (i==0)
        eArray[j] = 0;
    }
  } 
```

我担心我以某种方式破坏了我的程序......但除了添加评论之外我几乎没有做任何事情！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T00:36:36.733

这个：

```
aArray[i*SIZE_OF_DATA + j] 
```

看起来你可能在最后一次迭代中写在数组之外（也是）`cArray`。`dArray`您确定您在数组中获得了正确的索引吗？如果没有，通过未定义行为的奇迹，您可能正在写入属于其他变量的内存，包括`i`and `j`，这可能会使这个循环永远持续下去。

具有未定义行为的错误程序表现得非常...未定义。尽管没有看到更多代码，但没有人可以确定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T03:45:46.373

您能否提及“j”的数据类型。我假设如果假设'j'的数据类型是char并且'SIZE_OF_DATA'宏的值是150之类的东西。那么'j'的值将在-128到127之间迭代。所以它将无限运行

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T00:33:54.373

尝试将 i * SIZE_OF_DATA + j 设置为一个变量，这可能是您的问题所在。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T00:33:44.060

我调试这段代码的方法是在 for 循环中打印 i 和 j 的值。`SIZE_OF_DATA`尽管这无关紧要，但可能会在您的代码的某些块中无意中增加。

# javascript - 将jQuery函数添加到选择框以使其动态更改CSS

> ID：13079249
> 
> 赞同：1
> 
> 时间：2012-10-26T00:28:03.517
> 
> 标签：javascript, jquery

我希望我的选择框能够动态更改页面另一部分的 CSS，以便根据每个选择显示正确的选项。

Eg the right DIV elements are shown when the correlating select option is selected.

我的选择输入和 DIV：

```
<select id="chooser" class="input_select" name="chooser">
<option value="">Select...</option>
<option value="Car">Car</option>
<option value="House">House</option>
<option value="Commercial">Commercial</option>
<option value="Other">Other</option>
</select>

<div id="car" style="display:none;">Cars</div>
<div id="house" style="display:none;">House related</div>
<div id="commercial" style="display:none;">Commercial stuff</div>
<div id="other" style="display:none;">Other stuff</div> 
```

到目前为止我的jQuery：

```
$(document).ready(function() {

$('#chooser').change{
  $('#house').hide()
  $('#commercial').hide()
  $('#other').hide()
  $('#car').show()
}
}); 
```

我是 jQuery 的菜鸟，我只是不知道如何告诉它通过选择哪个选项来过滤它。我的意思是，我认为我添加了 .change{} 部分是正确的，但不知道如何过滤它。

任何帮助表示赞赏。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T00:29:06.173

`$('#chooser').val()`会给你选择的值。然后只需使用`if-else`or `switch`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T00:31:44.613

您的代码中存在语法错误，您应该为更改事件传递一个函数，请尝试以下操作：

```
$(document).ready(function() {
   $('#chooser').change(function(){
      var w = this.value.toLowerCase();
      $('div').hide().filter('#'+w).show();
   })
}); 
```

[http://jsfiddle.net/ss5G9/](http://jsfiddle.net/ss5G9/)

当然隐藏页面上的所有 div 元素不是一个好主意，您可以向 div 元素添加类并隐藏那些特定的 div 元素。

```
<div id="car" class='div' style="display:none;">Cars</div>
<div id="house" class='div' style="display:none;">House related</div>
<div id="commercial" class='div' style="display:none;">Commercial stuff</div>
<div id="other" class='div' style="display:none;">Other stuff</div> 
```

```
$(document).ready(function() {
   $('#chooser').change(function(){
      var w = this.value.toLowerCase();
      $('.div').hide().filter('#'+w).show();
   }).change()
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T00:32:33.443

尝试这个

```
$(function() {
    $('#chooser').on('change', function() {
        $('div').hide();
        var val = $(this).find('option:selected').val();
        if (val != '') {
            $('#' + val.toLowerCase()).show();
        }
    }).change();
});​ 
```

试试这个**[小提琴](http://jsfiddle.net/sushanth009/G25mu/1/)**

# git - Github for Windows - 查找 HEAD 错误失败

> ID：13079253
> 
> 赞同：5
> 
> 时间：2012-10-26T00:28:19.090
> 
> 标签：git, github, github-for-windows

我已经成功使用 Github for Windows 和 Mac 一段时间了，但突然间我收到以下错误。

> “在此存储库中查找 HEAD 失败”

打开我的存储库后，在存储库详细信息视图中。

任何清理此问题的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-18T15:10:35.580

首先，您必须进入出现错误的存储库。继续关闭通知并导航到`Tools > Open A Shell Here`. 然后外壳将为该存储库打开。现在我们要做的是重置导致错误的合并。您可以使用以下命令执行此操作

```
$ git reset --merge
$ git checkout master
$ git pull 
```

我们在这里所做的是告诉 GitHub 撤消导致错误的合并。然后，我们从分离的头部切换。最后，我们想要提取所有我们想要的新变化。

一旦你这样做了，错误应该从那个存储库中消失，你不应该有任何问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-10T13:20:27.713

> 解决此问题的最简单方法是进入显示“ `failed looking for HEAD`”的存储库，关闭该弹出窗口，然后单击`Tools -> Open a Shell Here`。
> 
> *   在 shell 中，您可以运行 ' `git reset --merge`' 来撤消导致 GitHub for Windows 崩溃的合并。
> *   从那里，运行“ `git checkout master`”以从分离的`HEAD`.
> *   之后，`git pull`在 shell 中运行“”以下拉任何新更改。它会提示您修复任何合并冲突（这是导致应用程序崩溃的原因）。

修复文件中的合并冲突后，您应该能够将代码同步到 github。

# ajax - 在 Zend 中组织 AJAX 调用

> ID：13079254
> 
> 赞同：0
> 
> 时间：2012-10-26T00:28:33.100
> 
> 标签：ajax, zend-framework

我想很好地组织我所有的 AJAX 调用。我想在应用程序文件夹中有一个名为“Ajax”的文件夹，里面有所有的 ajax 文件。

所以我想，说 IndexController，有 /ajax/IndexController/ 或类似的东西。基本上，我想要一整套用于 ajax 的控制器，但都在 ajax 文件夹中。

我该如何做到这一点？！那我怎么称呼他们？！

谢谢！口沙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T15:13:21.847

您可以为每个模块创建一个 AjaxController，并将操作放入其中。然后，从 javascript 调用操作：

```
 $.post(
        "yourbaseurl/ajax/index",
        data: params,

        "json"
        ); 
```

管理员模块的 ajax 函数将进入控制器 administrator/AjaxController.php。

另一种方法是将所有内容放在 ajax 文件夹中，并使用路由和 .htaccess 来处理路由。这将是一个[很好的阅读](http://codeutopia.net/blog/2009/03/23/improving-ajax-performance-in-zend-framework-applications/)

# objective-c - 将 UIImageView 添加到自定义 UITableViewCell

> ID：13079255
> 
> 赞同：0
> 
> 时间：2012-10-26T00:28:41.197
> 
> 标签：objective-c, ios, xcode, uitableview, uiimageview

我似乎无法将此 imageview 添加到我的自定义 uitableviewcell 类中，我无法弄清楚。这是我的代码：

```
- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
    self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
    if (self) {
        // Initialization code
        [self layoutCell];
    }
    return self;
}

- (void)layoutCell
{
    self.videoImageView = [[UIImageView alloc] initWithFrame:CGRectMake(5, 5, 310, 120)];
    [self.videoImageView setImage:[UIImage imageNamed:@"myImage.jpg"]];
    [self.contentView addSubview:self.imageView];
} 
```

在调试器中，我注意到一旦我将图像视图添加为内容视图的子视图，如果有帮助，框架就会重新分配给 (0,0,0,0)。我真的不知道发生了什么。如果有人有任何建议，那就太好了。我也尝试将图像视图直接添加到单元格的视图本身，但无济于事。（而且我很确定那是错误的）。

太棒了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T05:10:41.703

你不应该在`init`单元格的方法中设置你的图像。你需要把它分开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T00:44:35.463

实施`layoutSubviews`方法并检查是否有任何区别。它应该解决这个问题。

```
- (void)layoutSubviews
{
  videoImageView.frame = CGRectMake(5, 5, 310, 120);
} 
```

**更新：**

尝试`layoutCell`从方法更改`init`方法。而是将其称为tableview`[cell layoutCell]`的`cellForRowAtIndexPath`方法。这将确保即使在重新加载时调用 dequeureuse，它也会正确设置 UIImage 和框架。您可以添加`self.videoImageView = [[UIImageView alloc] initWithFrame:CGRectMake(5, 5, 310, 120)] ;`您的`init`方法。

```
- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
    self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
    if (self) {
        // Initialization code
        self.videoImageView = [[[UIImageView alloc] initWithFrame:CGRectMake(5, 5, 310, 120)] autorelease]; //no need of autorelease if ARC is used
    }
    return self;
}

- (void)layoutCell
{
    self.videoImageView.frame = CGRectMake(5, 5, 310, 120);
    [self.videoImageView setImage:[UIImage imageNamed:@"myImage.jpg"]];
    [self.contentView addSubview:self.videoImageView];
} 
```

在`cellForRowAtIndexPath`,

```
//create cell
[cell layoutCell];

return cell; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T02:04:46.113

您分配 self.videoImageView ，然后将 self.imageView 添加到 contentView （似乎输入错误）。您也可以按照其他人的建议将您的 UI 初始化方法移动到 initWithStyle 以外的其他位置。这会有所帮助。

# java - Java 中 toCharArray() 和 toString() 的运行时间是什么？

> ID：13079261
> 
> 赞同：3
> 
> 时间：2012-10-26T00:29:48.337
> 
> 标签：java, algorithm, data-structures, arrays

这些有什么表现？

```
BigInteger -> toString() // what is the runtime?

String -> toCharArray()  // what is the runtime? 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T00:43:59.807

`BigInteger`到字符串的转换是`O(N^2)`，其中`N`是结果中的位数，当内部表示的基数不除目标基数时；当目标基数可以被存储基数整除时，转换需要`O(N)`.

当内部表示为 base-256 时，考虑转换为 base-10。除以十必须发生`N`多次；每次，`BigInteger`表示的所有元素都会被修改。表示中的元素数量与打印输出中的位数成正比，因此整体转换需要`O(N^2)`.

另一方面，在 base-256 内部表示中转换为大 int 的十六进制需要`O(N)`，因为在这种情况下不需要除法。每个子元素都可以与其余子元素隔离转换，并且子元素的数量与打印输出中的位数成正比。

就目前`String.toCharArray()`而言，它是字符串`O(N)`中`N`的字符数，因为每个字符都必须复制到输出中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T03:39:17.873

toString() 方法是使用 System.arrayCopy 实现的，它恰好是本机方法。

```
public char[] toCharArray() {
    char result[] = new char[count];
    getChars(0, count, result, 0);
    return result;
}

public void getChars(int srcBegin, int srcEnd, char dst[], int dstBegin) {
    // bounds checking
    System.arraycopy(value, offset + srcBegin, dst, dstBegin,
         srcEnd - srcBegin);
} 
```

我想本机方法可能在引擎盖下使用 memcpy，即 O(N)，因此运行时 O 取决于实际的 jvm 实现。您可能会查看开放 jdk 源以检查此本机方法的源。

# java - 如何在输入开始之前允许用户输入而不阻塞？

> ID：13079271
> 
> 赞同：1
> 
> 时间：2012-10-26T00:31:46.840
> 
> 标签：java, io

我正在做一个项目，我必须在其中编写一个聊天客户端。对于这个项目，我们不能使用 UI，它必须用 Java 编写。我已经有一段时间没有使用 Java 了，所以我发现自己一直在努力寻找“Java”的方式来做某事。

我想要做的是允许处理传入的数据并将其打印到控制台，但同时允许输入。我知道同时进行非阻塞输入/输出并不是一项简单的任务（有时甚至是不可能的），但幸运的是，这也不是我想要的。描述我想要什么的最好方法是让输出被处理、显示和打印，直到用户输入开始。

我知道这可以在 C/C++ 中使用 switch 语句来完成，但据我发现在 Java 中没有等价物。我遇到了 nio 包，并已开始阅读它，但到目前为止还无济于事。

关于如何最好地使用 Java 的工具集执行此任务有什么建议？另外，如果不清楚，我很抱歉，我很难用语言表达我的愿望。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T01:39:55.547

所以最后我最终选择了Graham King 博客中[这篇文章中的信息。](http://www.darkcoding.net/software/non-blocking-console-io-is-not-possible/)除此之外，我使用单个线程对传入数据进行排队，然后在输入完成后打印它们。

在用户输入开始之前，传入的数据会打印到屏幕上，然后暂停，然后在用户输入结束时显示在用户输入发生期间接收到的所有数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T00:59:10.113

通常的 java 方法是使用多个线程——两个专用于每个连接（一个输入，一个输出），加上处理与连接不直接相关的东西所需的任何其他线程。

或者，您可以通过 java.nio 包使用非阻塞 I/O，但它有点笨拙。

# jquery - 在每个之后运行函数

> ID：13079273
> 
> 赞同：1
> 
> 时间：2012-10-26T00:31:56.403
> 
> 标签：jquery, each, tumblr, jquery-cycle

试图让 jquery 循环与 tumblr photoset 一起工作，因为 photoset 图像和 div '.html_photoset' 是使用每个函数动态加载的，循环无法获取 div '.html_photoset'

```
$(function(){
$('.html_photoset').cycle({ fx: 'fade' });
$('.html_photoset').each(function() {
                var tumblr_post_id = $(this).attr('id').split('_')[1];
                $(this).empty();
                var this_photoset = this;
                $.getJSON('/api/read/json?id='+ tumblr_post_id +'&callback=?', function(response){
                    var photos = response['posts'][0]['photos'];
                    $.each(photos, function() {
                        var photo_url = this['photo-url-1280'];
                        var photo_caption = this['caption'];
                        var photo_markup = '<img src="'+ photo_url +'"/>';
                        $(this_photoset).append(photo_markup);
                    });
                });
            }); 
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T01:15:57.980

你可能会试一试（没有测试过）:)

```
$('.html_photoset').cycle({ fx: 'fade' });

$('.html_photoset').on('refresh', function() {
  $('.html_photoset').cycle({ fx: 'fade' });
});

$('.html_photoset').each(function() {
            var tumblr_post_id = $(this).attr('id').split('_')[1];
            $(this).empty();
            var this_photoset = this;
            $.getJSON('/api/read/json?id='+ tumblr_post_id +'&callback=?', function(response){
                var photos = response['posts'][0]['photos'];
                $.each(photos, function() {
                    var photo_url = this['photo-url-1280'];
                    var photo_caption = this['caption'];
                    var photo_markup = '<img src="'+ photo_url +'"/>';

                    // calling the cycle again.
                    $(this_photoset).append(photo_markup).trigger('refresh');
                });
            });
        }); 
}); 
```

# r - 意外的venneuler输出

> ID：13079274
> 
> 赞同：6
> 
> 时间：2012-10-26T00:31:57.543
> 
> 标签：r, venn-diagram

我试图了解它是如何`venneuler`工作的，它会输出一个我没想到的维恩图。当我试图理解某些东西时，我喜欢使用简单的例子。我正在提供我认为下面的矩阵：

> 一个逻辑或数字矩阵，其列表示集合，并且共现由行中的非零（代表 TRUE）值定义（对于逻辑矩阵，行的权重为 1，对于数字矩阵，行总和）。-静脉手册-

我希望如果两件事在同一行中都有 1 或 0，那么它们的 venn 会重叠。所以在这个矩阵中 w 和 z 没有共同的 1 或 0。我希望他们的维恩不会重叠，但他们会重叠（见下图 1）。为什么？如果我提供的信息有误或需要重新格式化，请解释。如果它在计算中，`venneular`请解释一下。

```
 w x y z
[1,] 1 0 1 0
[2,] 0 0 1 1
[3,] 0 0 1 1
[4,] 1 1 0 0 
```

![https://dl.dropbox.com/u/61803503/venn.1.png](../Images/2e8237ff6c6160c91b1aeebb6d8ec5e9.png)

上述代码：

```
library(venneuler)
w <- c(1,0,0,1)
x <- c(0, 0, 0, 1)
y <- c(1, 1, 1,0)
z <- c(0, 1, 1,0)
a <- cbind(w, x, y, z)       
v <- venneuler(a)
plot(v) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T03:50:48.617

试试这些 - 与以下示例相同`?venneuler`：

```
library(venneuler)
plot(venneuler(c(A=1, B=1, C=1, "A&B"=0.5, "A&C"=0.5, "B&C"=0.5 ,"A&B&C"=0.5))) 
```

![在此处输入图像描述](../Images/7ecf33acc2e456cb4bc6d4317d010e14.png)

```
plot(venneuler(c(A=1, B=1, C=1, "A&B"=0.5, "A&C"=0.5, "B&C"=0.5 ,"A&B&C"=0))) 
```

![在此处输入图像描述](../Images/0f607a19a804dbf36c9eb67f0c901027.png)

有什么明显的区别吗？没有为什么？因为第二种情况是不可能的！想象一下面积 = 1 的 3 个圆中的任何 2 个如何具有面积 = 0.5 的交点，但所有 3 个圆的交点中什么都没有？

现在，如果您想很好地表示所需的矩阵，我建议使用`VennDiagram`包：

```
library(VennDiagram)
w <- c(1, 0, 0, 1)
x <- c(0, 0, 0, 1)
y <- c(1, 1, 1, 0)
z <- c(0, 1, 1, 0)

venn.diagram(
    x = list(w = which(w==1),x = which(x==1),y = which(y==1),z = which(z==1)), 
    height=2000, width=2000, resolution=300, col = "transparent",margin = 0.2,
    fill = c("cornflowerblue", "green", "yellow", "darkorchid1"), alpha = 0.50,
    cex = 1.5,filename="~/Desktop/a.tiff",fontfamily = "serif",fontface = "bold",
    cat.col = c("darkblue", "darkgreen", "orange", "darkorchid4"),cat.cex = 1.5, 
    cat.pos = 0,cat.dist = 0.07,cat.fontfamily = "serif",rotation.degree = 270,
    label.col = "white"); 
```

![在此处输入图像描述](../Images/bc15a43505c9445030488e4ced5618e8.png)

# java - 从另一种方法更改 Jlabel 的文本

> ID：13079277
> 
> 赞同：1
> 
> 时间：2012-10-26T00:32:52.053
> 
> 标签：java, swing, jlabel, textlabel

如果这个问题的解决方案很明显，我深表歉意，我相信解决方案很简单，我似乎无法在脑海中正确理解。

我已经创建了我的 JFrame，如下面的代码所示。我正在寻找从我的主要方法中更改标签（ lblStatus ）的文本，但我似乎无法让它工作。我是否需要创建标签的新实例或类似的东西？

谁能建议我采取什么方法？

问候，丹。

注意-我删除了一些内容以突出显示相关代码。

```
public class server {

private JFrame frmCorbaServer;

/**
 * Launch the application.
 */
public static void main(String[] args) {
    EventQueue.invokeLater(new Runnable() {
        public void run() {
            try {
                server window = new server();
                window.frmCorbaServer.setVisible(true);
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    });

    // SERVER CONTENT
        // If connection made
        System.out.println("Server connected"); // I want this to display in lblStatus!

}

/**
 * Create the application.
 */
public server() {
    initialize();
}

/**
 * Initialize the contents of the frame.
 */
private void initialize() {
    frmCorbaServer = new JFrame();
    frmCorbaServer.setTitle("server 0.1");
    frmCorbaServer.setResizable(false);
    frmCorbaServer.setBounds(100, 100, 257, 153);
    frmCorbaServer.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frmCorbaServer.getContentPane().setLayout(null);

    JLabel lblStatus = new JLabel("...");
    lblServant.setFont(new Font("Tahoma", Font.PLAIN, 10));
    lblServant.setBounds(10, 36, 231, 14);
    frmCorbaServer.getContentPane().add(lblServant);
}

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T00:35:07.967

JLabel 应该是一个实例成员。处理程序将帮助您在实例方法中修改标签的文本。

```
public class server
{
   private JLabel lblStatus= new JLabel("Text") ; 

   public void changeLabel(String text) 
   {
     lblStatus.setText(text) ;
   } 

} 
```

主要：`window.changeLabel("In main") ;`

必须这样做，因为在您的初始化方法中，引用`lblStatus`丢失

```
private void initialize() {
    frmCorbaServer = new JFrame();
    frmCorbaServer.setTitle("server 0.1");
    frmCorbaServer.setResizable(false);
    frmCorbaServer.setBounds(100, 100, 257, 153);
    frmCorbaServer.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frmCorbaServer.getContentPane().setLayout(null);

    JLabel lblStatus = new JLabel("..."); // Forgotten when method finishes
    lblServant.setFont(new Font("Tahoma", Font.PLAIN, 10));
    lblServant.setBounds(10, 36, 231, 14);
    frmCorbaServer.getContentPane().add(lblServant);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T00:40:00.557

我不熟悉 CORBA 编程，所以我只能回答一些一般性的建议。首先，您需要知道服务器何时连接。这很可能不会在您的`main()`方法中发生。是否有侦听器或其他回调方法被调用以通知您服务器已连接？

一旦弄清楚了那部分，更改 JLabel 的文本就相当容易了。首先你需要声明一个实例变量：

```
private JLabel lblStatus; 
```

在中创建 JLabel 时`initialize()`，不需要声明：

```
lblStatus = new JLabel("..."); 
```

最后，当您知道服务器已连接时，只需调用该`setText()`方法：

```
lblStatus.setText("Server connected"); 
```

# oop - 抽象与常规超类

> ID：13079280
> 
> 赞同：5
> 
> 时间：2012-10-26T00:33:25.410
> 
> 标签：oop

如果我可以用抽象类做的所有事情都可以用普通的超类来做，那么当我可以使用普通的超类时，为什么还要使用抽象类呢？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-26T00:53:30.560

我认为评论和答案已经暗示了这一点，但我想更直白地说：你不能用普通的超类做所有你可以用抽象类做的事情。抽象类允许您定义方法的签名而不包括其实现，并且抽象类不允许您直接实例化它。

因此，如果我有 3 个方法的类签名并且我不想共享其中任何一个的实现，我将使用接口。如果我想共享其中一个方法的实现，我将使用一个抽象类，然后将该类中的两个方法设为抽象。如果我想共享方法的所有实现，我将使用抽象类，如果直接实例化它从来没有意义，或者我将使用常规类。

（这是基于我在 C# 方面的经验。不同语言的细节有所不同。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T00:55:01.740

当您需要以通用方式表示许多相似的事物时，抽象类非常有用。

例如，假设您想在代码中表示一个动物园，并且您需要获取杂货清单以确保您有正确的食物。你如何代表所有动物最喜欢的食物？各自发出什么噪音？他们如何移动呢？您可以尝试使用超类来保存食物、噪音和动作的大列表，但更容易为 Animal 定义一个通用定义，然后让每个动物提供自己的实现细节：

```
 public class Zoo {
      public Animals[] AnimalsInZoo { get; set;}

      public List<Food> GetGroceryList(){
         List<Food> groceries = new List<Food>();
         foreach(Animal a in Animals[]){
            groceries.Add(a.FavoriteFood);
         }
         return groceries;
      }

      public void  MakeAnimalsSing(){

         foreach(Animal a in Animals[]){
            a.MakeNoise();
         }

      }
   } 
```

抽象的 Animal 类看起来像：

```
 public abstract class Animal {
      public abstract void MakeNoise();
      public abstract Food FavoriteFood { get; }
      public abstract void Move();
   } 
```

并说动物园有两种动物：

```
 public class Panda : Animal{
      public override void MakeNoise(){
         // grunt
      }

      public override void Move(){
         // walk
      }

      public override Food FavoriteFood { 
         get {
              return new Bamboo();
         }
      }
   }  

      public class Parrot: Animal{
      public override void MakeNoise(){
         // talk
      }

      public override void Move(){
         // fly
      }

      public override Food FavoriteFood { 
         get {
              return new Cracker();
         }
      }
   } 
```

通过拥有一个通用的抽象类，我可以轻松地处理任意数量的不同动物类型，而无需明确知道我正在使用哪一种，但每种动物都可以以自己的方式行事。

超类无法提供那种灵活性或细节。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T00:41:26.517

基类提供自己的方法实现。这些实现有时可以被覆盖（取决于语言）。

抽象类不提供默认实现，每个继承类都需要根据具体情况实现方法。

上述细节可能因语言而异。阅读相应的文档。

**考虑这个例子：**
一个`Number`抽象类有一个`add()`方法。A`OddNumber`和一个`EvenNumber`子类需要实现几乎相同的`add()`方法，所以那里有一些代码重复。在这里，拥有一个超类更有意义（或者，至少拥有一个 的`RealNumber`子类`Number`）。

但是，考虑`Complex`作为`Number`如果数字不是抽象的子类，`add()`在（假设它是实数加法算法）中找到的方法`Number`对复数没有意义。这里抽象类更有意义。某些语言允许您覆盖超类方法，但在这种情况下这有点尴尬。

# svn - 如何通过 Tortoise SVN 创建带有英文 ASCII 标头的补丁？

> ID：13079281
> 
> 赞同：3
> 
> 时间：2012-10-26T00:33:27.993
> 
> 标签：svn, tortoisesvn, diff, locale, patch

我的 Windows 的语言环境是中文/代码页 936。当我通过 Tortoise SVN 创建补丁时（即使 Tortoise SVN 是英文 UI），它会创建一个带有如下标题的补丁文件：

```
Index: C:/mypath/myfile.txt
===================================================================
--- C:/mypath/myfile.txt    (版本 3174)
+++ C:/mypath/myfile.txt    (工作副本) 
```

标头中的字符`(工作副本)`采用 GBK(CP936) 编码。而my`myfile.txt`是UTF-8文件，所以补丁的内容是UTF-8编码的。整个补丁文件是混合编码的，这很糟糕。

如何使补丁的标题为英文和 ASCII？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T15:18:14.757

虽然这并不能解决 TortoiseSVN 问题，但您可以使用 Windows Powershell 等命令行客户端生成补丁。当您将环境变量设置`LC_ALL`为 C时，您可以在那里禁用翻译。

```
:: disable the translation
set LC_ALL=C
:: create the patch
svn diff {diff params} > patch.diff 
```

# facebook - 使用我的 IBM Worklight Web 应用程序通过 Facebook 登录

> ID：13079285
> 
> 赞同：0
> 
> 时间：2012-10-26T00:34:30.317
> 
> 标签：facebook, facebook-login, ibm-mobilefirst

我使用 IBM Worklight 创建了一个简单的 Web 应用程序。现在，我正在尝试使用[https://developers.facebook.com/docs/guides/mobile/web/#samples](https://developers.facebook.com/docs/guides/mobile/web/#samples)教程使用 Facebook api，其中用户可以使用他们的 Facebook id 登录。

为了设置此功能，我需要提供我的 Web 应用程序的 siteUri，因此我将 Web 环境添加到我的应用程序中，并将应用程序 URI 作为 http://[IP 地址]:8080/apps/services/www/zShop/移动网络应用/

但是，当我运行应用程序时，我得到了这个错误

API错误代码：191 API错误描述：指定的URL不属于应用程序错误消息：无效的redirect_uri：应用程序配置不允许给定的URL。

不知道是什么问题，请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T01:16:06.913

您需要将您的应用程序托管在人类可读的域（例如 example.com）上，而不是通过文字 IP 地址访问的域。如果您没有域，您可以尝试在笔记本电脑/台式机的`hosts`文件中添加一个条目，这样您就不必使用 IP 地址（我没有在 FB 应用程序中尝试过）。

您还可以从 Heroku 获得免费的虚拟主机。它是免费的，因为它是入门包级别的托管。这里有一个很好的 Heroku 教程：[https ://devcenter.heroku.com/articles/facebook](https://devcenter.heroku.com/articles/facebook)

因此，请确保您可以使用域名（例如 example.com）在浏览器中加载应用程序。

然后确保您的应用设置已配置此域名：

[应用仪表板](https://developers.facebook.com/apps)> 基本 > 应用域

然后按照该教程的“步骤 1”中的说明输入您的域。

# php - Facebook PHP SDK 返回没有指定节点的错误

> ID：13079289
> 
> 赞同：0
> 
> 时间：2012-10-26T00:34:56.807
> 
> 标签：php, facebook, api, facebook-php-sdk

因此，我正在运行查询以使用 Facebook PHP SDK 返回 DAU 数据。我很肯定我已登录并且我有一个应用程序访问令牌......但是当我运行查询时，我收到“未指定节点”错误。我在其他地方看到过这个问题，但每个人似乎都认为这是一个登录错误......但我可以 $fb->getUser() 和/或获取一个 app_access 令牌......所以我不认为这是一个登录问题。还有其他想法吗？谢谢。

```
 try {
    include("facebooksdk/src/facebook.php");
}
catch (Exception $e) {
    echo "$e" . "<br/>";
    die($e);
}
$appId = 'xxxxxxxx';
$appsecret= 'xxxxxxxxxxxxxxxxxxxxxxxx';
$fb = new Facebook(array(
    'appId' => $appId,
    'secret' => $appsecret,
    'oauth' => 'true'
));

$me = $fb->getUser();
$app_token = $fb->getAccessToken();
echo "$me" . "<br/>";
if(!$me) {
   // header("Location:{$fb->getLoginUrl(array('req_perms' => 'email,offline_access'))}");
    $login_url = $fb->getLoginUrl();
    echo $login_url;

}

if($me && $accesstoken) {
    try {
        $result = $fb->api('/insights/application_active_users', array('access_token'=>$app_token));

        print_r($result);
        }
    catch(FacebookApiException $e){
        echo $e->getMessage();
    }
}
echo "<pre>"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T00:44:45.573

这意味着您尚未指定要了解的对象

代替

> $result = $fb->api('/insights/application_active_users', array('access_token'=>$app_token));

和

> $app_id = 您的应用程序 ID；
> 
> $result = $fb->api($app_id.'/insights/application_active_users', array('access_token'=>$app_token));

# c# - 我在 if 块中分配了多个在其外部引用的变量，但我又添加了两个它们似乎不起作用

> ID：13079290
> 
> 赞同：2
> 
> 时间：2012-10-26T00:34:59.270
> 
> 标签：c#, variables, if-statement

我在 if 中分配了 classability1 和 2，而 {12} 和 {13} 最终未分配。我不确定我在这里做错了什么，但这可能很简单。

```
else if (Class == "Cleric" || Class == "cleric")
    {
        Class = "Cleric";
        AD = 5;
        AP = 25;
        AS = 10;
        mana = 250;
        classability1 = "Heal";
        classability2 = "Smite";
    }

    Console.Clear();
    Console.WriteLine(@"Name           = {0}
                        Race           = {1}
                        Class          = {2}
                        ----------------------
                        Attack Damage  = {3}
                        Ability power  = {4}
                        Attack Speed   = {5}
                        Armor          = {6}
                        Magic Resist   = {7}
                        Health         = {8}
                        Mana           = {9}
                        ----------------------
                        Racial Bonuses
                        {10}
                        {11}
                        -----------------------
                        Class Abilities
                        {12}
                        {13}
                        Push enter to continue...", name, race, Class, AD, AP, AS, armor, magres, health, mana,    racialbonus1, racialbonus2, classability1, classability2);
    Console.ReadKey(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T11:23:47.147

正如之前的海报所说，请发布整个代码块。听起来确实很像

```
else if (Class == "Cleric" || Class == "cleric")
{
    Class = "Cleric";
    AD = 5;
    AP = 25;
    AS = 10;
    mana = 250;
    classability1 = "Heal";
    classability2 = "Smite";
} 
```

没有被执行。另一种可能性是 if 语句和您的帖子中未显示的行之间可能存在其他代码`Console.Write`并且正在重新初始化/使字符串无效？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-31T01:12:42.820

尝试在他们的声明中用“”分配classability1和classability2，这样编译器就不会认为它是未分配的。例如

```
string classability1 = "";
string classability2 = "";
if (/*something*/)
{
   // your code
}
else if (/*something*/)
{
   // your code
} 
```

如果您不想遵循上面的提示，则必须有一个“else”语句，并为您的 classability1 和 classability2 变量赋值，否则您的编译器会将这些变量视为未赋值。

# html - 如何编写结构化的 HTML/CSS？

> ID：13079292
> 
> 赞同：0
> 
> 时间：2012-10-26T00:35:13.673
> 
> 标签：html, css

我不知道我是否是规范的，但实际上我想知道你是否有任何教程或一些自动的方法来做到这一点。看图片：

![http://static.ddmcdn.com/gif/html5-2.jpg](../Images/a736d0a4dddd41a2bd771b543f89fc03.png)

这是线条之间没有宽度的图案代码，或者完全沿着左侧。我想看起来像这样：

![http://upload.wikimedia.org/wikipedia/commons/thumb/a/a6/HTML_source_code_example.svg/315px-HTML_source_code_example.svg.png](../Images/2322e3f495b1d55c328ed5dae9a13efc.png)

与银行，保证金，即完全结构化的线路。我希望对 CSS 文件做同样的事情。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T04:04:01.590

除了 HTML 编辑器之外，如果您只需要快速格式化的内容，您可以使用：[http ://www.freeformatter.com/html-formatter.html](http://www.freeformatter.com/html-formatter.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T00:38:26.443

您将不得不获得一个 HTML 编辑器。如果你想要一个专业的，你可以得到 Dreamweaver，但免费的 Eclipse 几乎一样好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T00:39:44.940

我认为您是在问是否有办法编写代码以使其符合标准。只需下载适当的编辑器，例如[e](http://www.e-texteditor.com/)、[jedit](http://www.jedit.org/)或[editplus](http://www.editplus.com/)

如果您只使用制表键，它们往往会为您缩进。

像 Dreamweaver 这样的程序可能会承诺好事，但会在实际标记中提供异常。我敢打赌，这些年来他们已经变得更好了。

最佳实践是从教程中学习如何编写 html 和 css。你拥有的经验越多，它就越自然。

# bash - 通过 sed 在文件中的某一行之后插入包含反斜杠/特殊字符的多行

> ID：13079297
> 
> 赞同：0
> 
> 时间：2012-10-26T00:36:04.630
> 
> 标签：bash, scripting, sed

我正在编写一个脚本来尝试加快我的基本 Wordpress 安装。它下载最新版本，解压缩，更改客户端名称，然后更新配置文件中的一些文本。

但是，我无法使用 sed 插入包含特殊字符的多行。多行来自 WP Secret Key Generator [https://api.wordpress.org/secret-key/1.1/salt/](https://api.wordpress.org/secret-key/1.1/salt/)，它们将替换标准

```
define('AUTH_KEY',         'put your unique phrase here');
define('SECURE_AUTH_KEY',  'put your unique phrase here');
define('LOGGED_IN_KEY',    'put your unique phrase here'); 
```

ETC...

这是给我问题的代码

```
# Download data to variable
salt="`curl https://api.wordpress.org/secret-key/1.1/salt/`"

sed -i "/NONCE_SALT/a $salt" $pname/wp-config-sample.php 
```

我正在将生成的文本下载到一个变量中，然后在标准文本中的最后一个实例之后插入一个新行（稍后我将删除所有这些标准行）。它抛出了一个错误；

```
"ed: -e expression #1, char 112: extra characters after command" 
```

当我输入一行标准文本时，它很好。如果我在它周围添加引号，`$salt`它只会在文件中打印文字`$salt`。

sed 是插入此数据的正确方法吗？请记住我需要在文件中的特定点之后插入？

任何提示或提示都非常受欢迎。这是我第一次尝试 bash 脚本。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T01:12:10.177

该`a`函数要求在字符串中的任何内部换行符之前都有一个反斜杠。因此，一种方法是使用`sed`添加必要的反斜杠：

```
# Download data to variable, adding \ to all but the last line:
salt="$(curl https://api.wordpress.org/secret-key/1.1/salt/ | sed '$ ! s/$/\\/')"

sed -i "/NONCE_SALT/a $salt" "$pname/wp-config-sample.php" 
```

（请注意，我使用`$(...)`而不是``...``: 后者有痛苦的引用规则。在这种情况下，我不得不写`\\\\`而不是`\\`。）

也就是说，在这种情况下，我认为将 salt-stuff 保存到临时文件并使用`r`而不是`a`：

```
# Download data to the file salt.txt:
curl https://api.wordpress.org/secret-key/1.1/salt/ > salt.txt

sed -i "/NONCE_SALT/r salt.txt" "$pname/wp-config-sample.php"

rm salt.txt      # could also be done in a trap 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T04:05:11.717

尝试这个：

```
awk -v salt="$(curl https://api.wordpress.org/secret-key/1.1/salt/)" '
    {print} /NONCE_SALT/{print salt}
' "$pname/wp-config-sample.php" > tmp$$ && mv tmp$$ "$pname/wp-config-sample.php" 
```

与 sed 不同，awk 不受反斜杠或引号或换行符的影响，任何其他可能导致 sed 失败的字符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T04:46:45.353

不是`wp-config.php`通过将 的内容替换为文件来形成`$salt`文件`wp-config-sample.php`，或者在适当的位置编辑 wp-config-sample.php，而是更直接地使用`egrep -v`从 中删除行`wp-config-sample.php`，然后在末尾连接必要的新行。也就是说，创建一个脚本来执行以下三个步骤，并用适当的代码替换`write-customer-stuff`：

```
egrep -v 'name_here|word_here|unique phrase here' wp-config-sample.php > wp-config.php
write-customer-stuff >> wp-config.php  
curl https://api.wordpress.org/secret-key/1.1/salt/ >> wp-config.php 
```

您还可以添加如下行用于基本错误检查：

```
[ $(wc -l < wp-config.php) -eq $(wc -l < wp-config-sample.php) ] || echo '*** Lengths of wp-config.php and wp-config-sample.php are different ***' 
```

# python - 为类动态添加方法

> ID：13079299
> 
> 赞同：8
> 
> 时间：2012-10-26T00:36:14.557
> 
> 标签：python

我正在尝试将方法添加到基于列表的类中。

```
class _Roles(object):
    """
    set the roles for dev, staging and production
    """
    def __init__(self):
        from types import MethodType
        steps = ['dev','stage','prod']
        for step in steps:
            def env_setter(self):
                print step
            method = MethodType(env_setter,self,self.__class__)
            setattr(self,step,method) 
```

问题是，当我调用`_Roles.dev()`、`_Roles.stage()`或时`_Roles.prod()`，我总是会打印出**prod**的最后一步，而不是得到**dev**`dev()`等等。这是什么原因？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2021-01-04T23:18:27.337

只需使用`setattr`：

```
class Foo:
    def __init__(self, v):
        self.v = v

def my_new_method(self):
    print("self.v =", self.v)

setattr(Foo, 'print_v', my_new_method)

Foo(5).print_v() 
```

输出 ：

> 自我.v = 5

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-26T00:39:20.987

因为[您对所有函数声明使用相同的范围](http://code.activestate.com/recipes/502271-these-nasty-closures-caveats-for-the-closure-enthu/)。在单独的范围内定义每个函数。

# android - Android Activity 之间的数据共享

> ID：13079302
> 
> 赞同：3
> 
> 时间：2012-10-26T00:36:35.527
> 
> 标签：android

我有一个问题一直困扰着我一段时间。我想知道将数据从一项活动获取到另一项活动的规范或最佳实践方法是什么。我个人知道有两种方法可以做到这一点。第一种方法是通过 putExtra() 函数（或类似的东西）将数据直接捆绑到 Intent 中。但是，这种方式在我看来有点违反封装原则。我这样做的第二种方法是将数据放入单独的类中，并在两个活动之间共享该类。这似乎从根本上更合理，但我仍然不确定。有人愿意对此有所了解吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T03:55:28.580

我在编写我的应用程序时遇到了同样的问题，我最终创建了扩展 Application 类的 CustomApplication 类并将其添加到我的 AndroidManifest.xml 中的标记中。通过这种方式，我可以使用适当的 getter 和 setter 在其中存储任何类型的数据。调用 (CustomApplication).getApplicationContext() 将返回 CustomApplication 对象，该对象对于您的整个应用程序是唯一的，并且存在于单个实例（单例）中，您可以使用它来设置和获取必要的值。

好处是只要您的应用程序（活动、服务等）的任何部分正在运行，您的应用程序对象和其中的数据就存在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T00:43:06.997

有多种方法可以在`Activities`.

1.  如果数据是预定义的数据类型，如`int`, `double`, `string`...直接放到`Intent`.

2.  如果数据是二进制格式或类对象，则将类实现为`Parcelable`接口，并放入`Intent`发送。

3.  如果数据很轻或很小，你做上面的1、2；但是，如果它足以影响性能或质量，那么我认为您需要一个数据存储。就像将数据保存在某个位置：例如文件、xml、数据库……并从中读取/写入。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T03:13:50.990

尽管您可以将任何类实现到`Parcelable`接口中以跨活动传递它们，但是这种方式会生成对象的新副本并违反一致性。

Android 是使用模型-视图-控制器 (MVC) 设计的。活动是控制器，我认为它们不应该自己保存数据，也不应该直接传递数据。一个 Activity 告诉下一个 Activity 数据在哪里，而下一个 Activity 从模型本身获取数据会是一个更好的做法。

也许你可以使用`Provider`. Activity A将数据的uri放入intent并发送intent启动Activity B，然后Activity B从intent中获取数据的uri并使用它来实现来自Provider的数据

# java - 哪个 GUI API 适用于 PC 和 Android？

> ID：13079307
> 
> 赞同：0
> 
> 时间：2012-10-26T00:37:34.570
> 
> 标签：java, android, user-interface

我开始为 PC 编写一个新项目，我最终希望将其移植到 Android。其中一个关键部分将是带有大量 2D 绘图的 GUI。过去，我一直在我的项目中使用 Swing。Afaik，我不能在 Android 上使用 Swing（而且我想无论如何它不会是聪明的性能）。

那么，在将我的程序移植到 android 时，我可以使用哪些 GUI API 不会花费太多精力？

任何建议表示赞赏！

# jquery-ui - JQuery UI 对话框在 IE8 中加载缓慢（第一次加载很快）

> ID：13079315
> 
> 赞同：1
> 
> 时间：2012-10-26T00:38:37.540
> 
> 标签：jquery-ui, internet-explorer, jquery, internet-explorer-8

我知道 IE javascript 的性能与 FF 和 Chrome 相比非常糟糕，但我的大多数用户都使用 IE8。我没有注意到 FF 中的性能问题（惊喜）。我将 Jquery 和 Jquery-ui 用于对话框功能。

基本上，我使用 ajax 将大量链接加载到对话框中。我第一次单击按钮打开对话框时，它加载得非常快（~0.1 秒）。但是，当我关闭对话框并再次打开它时，它需要更长的时间才能显示出来。

数据库和 ajax 调用不是问题。数据被附加到对话框中，我使用简单的逻辑来确保不会再次调用该函数。随后尝试打开对话框*应该*会更快。

使用 IE8 的分析器，我注意到有数以万计的调用：

> ```
> "hidden"
> "curCSS"
> "JScript - window script block" 
> ```

我第一次打开对话框时不会出现这些函数调用。我不知所措是有原因的。

显然，第一次加载对话框中的各个元素时没有任何脚本编写，但为什么这会在后续调用中发生变化？

一些代码：

$(文档).ready(函数 () {

```
$("#dialog").dialog({
    autoOpen: false,
    resizable: false,
    draggable: false,
    closeText: "",
    width: "auto",
    dialogClass: "ddx",
});

$("#button").click(function (e) {
    e.preventDefault();

    //Check if "this" is empty, if not, data is already loaded
    if ($.trim($("#dialog").html()).length > 0) {
        $("#dialog").dialog("open");
    }
    else {

        $.ajax({
            url: baseUrl,
            dataType: "text",
            success: function (data) {
                $("#dialog").append(data);

            }
        }); 
        $("#dialog").dialog("open");
    }
}); 
}); 
```

正文中的html：

`<div id="dialog" title="Test Dialog" class="ddx"></div>`

该对话框最终包含具有数百个 li 的多层嵌套列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-10T07:25:01.523

后续调用可能比第一次调用慢的一个原因是通过 ajax 替换 HTML 比添加新代码更昂贵。那是因为 jquery 需要在添加新内容之前删除和清理旧的 DOM 元素。

您的第一个窗口在您关闭后可能仍隐藏在 DOM 中，并在下次打开窗口时被替换。

此外，jQuery UI 对大型 Ajax-Request 有相当大的性能影响，尤其是在 Internet Explorer 中，因为 cleanData-Method 的实现很慢。

[jQueryUI cleanData 性能错误](http://bugs.jqueryui.com/ticket/9546)

例如：在 IE8 中用 jQuery-UI 替换 2500 个 DOM 元素将花费大约 600 毫秒。如果没有 jQueryUI，这会花费大约 200 毫秒。

我通过替换 cleanData-Method 在自己的代码中解决了这个问题，它显着加快了我的应用程序（参见[jsfiddle/cleanData](http://jsfiddle.net/felvhage/r7buw/ "jsfiddle")）。我仍在寻找一个 jQuery-UI 补丁，它适用于所有 jQuery 版本。

```
//replace this
$.cleanData = function( elems ) {...} 
```

# java - 如何从 void 方法影响返回值

> ID：13079326
> 
> 赞同：0
> 
> 时间：2012-10-26T00:41:03.450
> 
> 标签：java, interface

这是我的代码：

```
deleteStuffFromDb(); // void method
deleteStuffFromCache(); 
```

deleteStuffFromDb() 是一个返回类型为 的接口方法`void`。

理想情况下，第一种方法将返回一个值（成功/失败）。该返回值将确定第二个方法是否执行。

我可以修改接口，因为它被 2 个类调用。但是，作为一个对系统没有全貌的运维开发人员，我仍然有可能破坏某些东西的风险。

您如何建议我确定这个 void deleteStuffFromDb() 的执行是否决定了 deleteStuffFromCache() 的执行。

以下是我想到的一些方法：

1.  在 deleteStuffFromDb() 周围放置一个 try/catch，为错误情况引发异常。如果遇到 catch()，则不要执行 deleteStuffFromCache()。
2.  将deleteStuffFromCache()的逻辑放入deleteStuffFromDb()方法中，并允许/禁止在该方法内执行
3.  ...？

请给我你的想法和你选择的理由。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T01:15:30.073

> 我可以修改接口，因为它被 2 个类调用。但是，作为一名运维开发人员，仍然存在对系统没有全貌的风险。

如果系统的全貌是它只在两个地方使用，你当然应该同时改变它们。完整的重新编译和系统测试将显示是否有其他任何问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T01:03:43.610

`deleteStuffFromDb()`将的签名重写为`deleteStuffFromDb(Object returnObject)`

然后写一个封装接口来替换旧的签名`deleteStuffFromDb()`

在包装器界面中，执行以下操作：

```
void deleteStuffFromDb() {
     // initialize some dummy returnObject that doesnt get used
     deleteStuffFromDb(dummyObject);
} 
```

要使用此系统，请将 a 传递`returnObject`给接口以捕获返回值。

这样，如果您愿意，您可以选择从接口获取返回值，但不会破坏使用旧接口的现有调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T01:09:59.213

我不认为将返回类型从 void 更改为其他内容会破坏任何现有代码。

如果返回类型为 void，那么任何使用它的代码都不会期望该方法有任何返回。如果确实如此，它也会立即破裂。

现在，如果您更改它并从方法返回一些值，那么在现有代码的情况下，返回的值将被忽略。

您不能使用 void 方法来预期该方法返回一些值，但您可以执行相反的操作。

我能想到的唯一情况是，如果该接口有很多实现，那么更改它可能是个问题。

就第二点而言，我更愿意将逻辑保留在它所属的地方。可能只是调用方法本身。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T01:29:38.760

不知道这对你来说听起来有多好，但我已经看到了方法（例如`Scanner.html#next()`throws`NoSuchElementException`和`IllegalStateException`基于失败原因。还有更多这样的例子），这些方法是为了在失败的情况下成功抛出异常，例如

```
 public void deleteStuffFromDb(){
      ..... usual code..
      if (failedCondition){
           throw new RuntimeErrorException(new Error("Couldn't delete"));
      }
 } 
```

在调用方，如果你得到抛出的异常，你可以假设它是失败的，否则是成功的。这样可以避免更改界面。

# jquery - jQuery 插件、data() 和命名空间

> ID：13079332
> 
> 赞同：0
> 
> 时间：2012-10-26T00:41:52.033
> 
> 标签：jquery

我试图更好地理解如何创建 jQuery 插件，并且我的理解基于[http://docs.jquery.com/Plugins/Authoring](http://docs.jquery.com/Plugins/Authoring)。我在最后，对命名空间和数据感到困惑。

**首先**（参见下面代码中的问题 1）：本教程显示目标 ( `$this`) 和工具提示都存储在对象字面量中。

1.  存储这些特定变量有什么好处？
2.  如果有默认值和自定义选项，这是保存结果设置对象的好地方吗？

另外，他们这样做是有原因`$(this).data('tooltip',{target:$this,tooltip:tooltip});`的，而不是`$this.data('tooltip',{target:$this,tooltip:tooltip});`？

**第二**（参见下面代码中的问题 2）：本教程展示了如何销毁插件。我明白`$this.removeData('tooltip');`了，但是这样做有什么意义`data.tooltip.remove();`呢？

来源：[http ://docs.jquery.com/Plugins/Authoring#Data](http://docs.jquery.com/Plugins/Authoring#Data)

```
(function( $ ){

  var methods = {
     init : function( options ) {

       return this.each(function(){

         var $this = $(this),
             data = $this.data('tooltip'),
             tooltip = $('<div />', {
               text : $this.attr('title')
             });

         // If the plugin hasn't been initialized yet
         if ( ! data ) {

           /*
             Do more setup stuff here
           */

           //QUESTION 1
           $(this).data('tooltip', {
               target : $this,
               tooltip : tooltip
           });

         }
       });
     },
     destroy : function( ) {

       return this.each(function(){

         var $this = $(this),
             data = $this.data('tooltip');

         // Namespacing FTW
         $(window).unbind('.tooltip');

         QUESTION 2
         data.tooltip.remove();
         $this.removeData('tooltip');

       })

     },
     reposition : function( ) { // ... },
     show : function( ) { // ... },
     hide : function( ) { // ... },
     update : function( content ) { // ...}
  };

  $.fn.tooltip = function( method ) {

    if ( methods[method] ) {
      return methods[method].apply( this, Array.prototype.slice.call( arguments, 1 ));
    } else if ( typeof method === 'object' || ! method ) {
      return methods.init.apply( this, arguments );
    } else {
      $.error( 'Method ' +  method + ' does not exist on jQuery.tooltip' );
    }    

  };

})( jQuery ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T02:16:57.250

> 存储这些特定变量有什么好处？

存储在`data`对象中的变量在调用时可供其他方法使用。

*   目标：我使用过这种插件模式，但从未发现有必要存储`target:$this`. `$(this).data`但是，在某些情况下，在复杂的插件方法中传递可能会很方便。`data.target`让您可以自由地执行此操作，同时仍然可以让您回到原来的状态`$(this)`。可能还有其他原因，但我不知道。

*   tooltip ：无疑需要被其他方法使用，参见例如。`destroy`方法。

    > 如果有默认值和自定义选项，这是保存结果设置对象的好地方吗？

是的，`settings`可以存储在`data`对象中，如果其他方法需要访问设置，无论它们是否已被选项扩展，这样做通常很方便。

> 另外，他们这样做是有原因`$(this).data('tooltip',{target:$this, tooltip:tooltip});`的，而不是`$this.data('tooltip',{target:$this,tooltip:tooltip});`？

不，没有理由。`$this`显然在范围内，使用它而不是 re-wrapping 会更有效`this`。

> 第二（参见下面代码中的问题 2）：本教程展示了如何销毁插件。我明白`$this.removeData('tooltip');`了，但是做 data.tooltip.remove(); 有什么意义？

`data.tooltip.remove();``<div />`从 DOM中删除动态生成的元素。如果它没有被移除，那么工具提示将不会被完全销毁。

# caching - 支持分片、复制和低延迟的缓存系统的最佳解决方案

> ID：13079333
> 
> 赞同：5
> 
> 时间：2012-10-26T00:42:10.750
> 
> 标签：caching, memcached, redis, replication, couchbase

我们正在部署一个高度动态的网站。峰值容量每分钟处理和更新大约 20,000 个项目。每个项目的大小范围从 1kb 到 500kb。这些项目需要每分钟在缓存中检索、处理和更新。

我们预计前两三个月的用户流量将达到 1000 人。当每个用户登陆网站时，他们可能会请求一些受欢迎的内容，但其他人可能会请求不受欢迎的内容。所有内容都是持久存储中内容的更高级别的处理形式。因此，绝对有必要将所有已处理的项目放在低延迟存储中，以获得出色的用户体验，无论是受欢迎的还是不受欢迎的。

我们分别尝试过 Memcache、Redis 和 Couchbase。

Memcache 速度非常快，但我们遇到了某些板块内存不足和活动项目开始被驱逐的问题。

Redis，比 Memcache 相对慢，如果你想要项目的持久性，那就太好了。

然而很快我们就意识到我们需要分片和复制。

Couchbase 提供了开箱即用的功能。与 Couchbase 服务器接口的 Moxi 客户端有其自身的问题，即无法处理繁重的并发进程。它会开始丢失集合并时不时地获取。移至与之交互的 Python SDK。当集群中的一个节点出现故障时，它的性能很差，它根本无法发现新的拓扑。最终在缓存中丢失了一些数据，并且在网站上闲置了几个小时。

当我们意识到没有完美的产品可以满足我们的需求时。您必须了解所有技术和您自己的需求。您必须预见您的数据将如何演变并做好相应的准备。最好的解决方案可能是多种技术的混合。然而，把它说出来是希望那里可能有其他东西。我们正在接近 2012 年底。对于一个由强大硬件支持的开箱即用解决方案来提供我们需要的东西有多难。

任何想法和有见地的文章的链接将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-26T17:29:15.657

以下是关于您上面提到的一些技术的一些说明。

## 内存缓存：

Memcached 只是一个缓存系统，不会为您提供任何数据持久性。如果您选择使用 memcached，那么您将需要选择其他类型的持久性存储来保存所有数据。Memcached 也是一个非常简单的缓存系统，不为您提供复制，但它们是不同的项目（如 repcache），在 memcached 中添加了这样的功能。如果我想使用关系数据库作为我的持久层，我只会使用 memcached。

## 雷迪斯：

Redis 是一个数据结构服务器，只能用于此目的。Redis 的缺点是您只能在单个服务器上运行它，如果您想拥有多个 Redis 服务器，则需要进行应用程序分片。我见过的大多数 Redis 部署都与另一种数据库技术并驾齐驱。

## 沙发底座：

Couchbase 2.0 将把产品变成一个文档数据库。该产品内部具有 memcached 技术，因此您可以开箱即用地获得 memcached，这意味着亚毫秒级延迟。最重要的是，您可以获得复制、跨数据中心复制和查询支持。另外，请注意大多数 Couchbase SDK 不使用 moxi，Python SDK 仍处于测试阶段。

可能对您有用的一件事是查看 YCSB 基准测试项目以及已经发布的一些结果。这个项目将让您很好地了解这些和其他数据库在负载下的表现。然后，一旦你找到了一些你喜欢的东西，你就可以查看他们的功能列表并找出产品具有最适合你开发的应用程序的功能。

另外，如果我有关上述数据库的任何信息不正确，请告诉我。这些项目发展迅速，有时很难跟上。

**编辑：**我还应该提到，Couchbase 是列出的数据库中唯一提供复制、分片和低延迟的数据库。我想 redis 将允许您拥有一个副本服务器并因此进行复制，但是您所做的任何分片都必须在应用程序层完成。

# html - 简单的 CSS 边距问题

> ID：13079340
> 
> 赞同：0
> 
> 时间：2012-10-26T00:43:10.057
> 
> 标签：html, css

我有一个简单的 CSS 问题，但我现在无法弄清楚。

我有

html

```
<div class='test'>
    <img src='loading' class='load'/>
    <img src='title.jpg'/>
    <img src='title.jpg'/>
    <img src='title.jpg'/>

</div> 
```

我的 CSS

```
.test img{
   margin:15px;
}

.load{
   margin:0;
} 
```

我希望加载图像根本没有边距，但似乎 15px 适用于我的加载图像。我认为类具有最高的 css 水平。

我该如何解决这个问题？非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T00:57:20.457

添加前缀 .test

```
.test .load {
  margin: 0;
} 
```

css 选择器的得分`.test img`是`(0,0,1,1)`, 是 , 是 ,然后 是 ,`.load`是`(0,0,1,0)`哪个小`(0,0,1,1)`。通过添加前缀`.test`。比分变为`(0,0,2,0)`。

参考：[http ://css-tricks.com/specifics-on-css-specificity/](http://css-tricks.com/specifics-on-css-specificity/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-26T00:49:56.490

两个声明都包含一个类选择器。由于第一个声明也有一个元素选择器，所以它更具体，因此*它优先*。有关如何计算的详细信息，请参阅[CSS Specificity 规范](http://www.w3.org/TR/selectors/#specificity)（简而言之：ID 选择器比类选择器更具体，类选择器比类型选择器更具体，拥有更多选择器比拥有更少选择器更具体）。

在您的情况下，您可以使用 ID 选择器，因为它们优先于类选择器：

```
<img src='loading' id='load_img' />

#load_img { margin: 0; } 
```

如果您想避免使用 ID，您也可以按照@TimGreen 的回答建议进行操作，并使用额外的类选择器来增加声明的特异性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T00:49:03.370

要么这样做： `<img src='loading' style="margin: 0"/>` 要么：

```
 .test img{
         margin:15px;
     }

    .test img:first-child{
         margin:0px;
     } 
```

# visual-studio-2010 - Gyroscope.IsSupported 在 Visual Studio 2010 中总是返回 false？

> ID：13079341
> 
> 赞同：1
> 
> 时间：2012-10-26T00:43:38.840
> 
> 标签：visual-studio-2010, windows-phone-7, xna-4.0

我正在尝试为我的 Windows Phone 应用程序测试陀螺仪功能，但是在使用模拟器进行测试时，我无法让陀螺仪返回一个值。我正在使用 Microsoft.Devices.Sensors 并将其添加为参考。我尝试过重建、打开和关闭 Visual Studio、清理解决方案并重新启动模拟器，但没有任何区别。

我必须做些什么才能在我的模拟器上启用陀螺仪吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T08:43:21.093

陀螺仪在 Window Phone 7.5 模拟器上不可用。我发现的唯一链接是在[Jeff Blankenburg](http://www.jeffblankenburg.com/2011/11/05/31-days-of-mango-day-5-gyroscope/)的帖子底部。而是使用真实设备？

# sencha-touch - 在 PullToRefresh 插件中获取 sencha touch 2 操作对象

> ID：13079344
> 
> 赞同：0
> 
> 时间：2012-10-26T00:44:17.280
> 
> 标签：sencha-touch, sencha-touch-2

使用 PullToRefresh sencha touch 2 插件刷新列表时，我需要设置启动参数 (operation.setStart(1))。

我可以在 onJsonpstoreBeforeLoad 函数中做到这一点，因为这个函数解析`operation`参数对象

```
onJsonpstoreBeforeLoad: function(store, operation, eOpts) {
    /* some before load operations */
    var startIndex = operation.getStart();

    /* increase the value of the start-index by one */
    operation.setStart(startIndex+1);
} 
```

但是在 PullToRefresh 插件的“刷新”功能中，它只解析`plugin`参数，但我需要获取`operation`才能使用 setStart()

```
....
refreshFn: function(plugin) {
    console.log(Ext.data.Operation);
}, .... 
```

有谁知道如何获得当前的操作？我可以使用商店/代理，`plugin.getParent()`但这无济于事:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T09:55:33.883

你可以打电话

```
plugin.up(); 
```

希望这有帮助！！

# javascript - 如何使用 Dart 设置元素的文本？

> ID：13079345
> 
> 赞同：1
> 
> 时间：2012-10-26T00:44:21.583
> 
> 标签：javascript, html, dart

我在 3 天前实现了我的第一个 helloworld，现在我想走得更远。

我尝试调用一个函数，并将结果放在我的 html 中。

我的 HelloWorld.dart

```
import 'dart:html';

main() {
  var s = '';
  for (var i = 0; i < 10; i++) {
    s = '$s$i ';
  }

  HTMLElement element = document.getElementById('text');
  element.innerHTML = 'test';
  //element.innerHTML = s;
  print(s);
} 
```

我的打印（S）工作，它在我的飞镖编辑器输出中打印我：0 1 2 3 4 5 6 7 8 9

但是现在，我想把结果放在我的 html 中。

所以这是我的 HelloWorld.html ：

```
 <!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8">
    <title>HelloWorld</title>
    <link rel="stylesheet" href="HelloWorld.css">
  </head>
  <body>
    <h1>Exercice 01</h1>

    <p>Hello world from Dart!</p>

    <div id="container">
      <p id="text"></p>
    </div>

    <script type="application/dart" src="web/HelloWorld.dart"></script>
    <script src="https://dart.googlecode.com/svn/branches/bleeding_edge/dart/client/dart.js"></script>
  </body>
</html> 
```

很简单不是吗？所以实际上我看到我的页面有我的 h1 和我的 p。但是，我在我的 id "text" 中看不到任何内容，我尝试推送我的 var ，但不起作用，所以我尝试推送一个简单的字符串，如您所见（在我的帖子的第一个代码块处返回） ，并且不起作用。

我可能误解了 .html 和 .dart 之间的通信，有人可以帮我吗？

Ps：我的输出没有任何错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T01:12:26.717

谢谢你的提问！

首先，使用`querySelector()`而不是 document.getElementById，如下所示：

```
import 'dart:html';

main() {
  var s = '';
  for (var i = 0; i < 10; i++) {
    s = '$s$i ';
  }

  var element = querySelector('#text');
  element.text = 'test';
  print(s);
} 
```

querySelector() 通过接受 CSS 选择器并返回匹配的第一个元素来工作。要按 ID 查找元素，请使用`#the-id`语法（或者，在元素的 ID 前加上 a 前缀`#`）。

代替`innerHTML`, 使用`element.text`setter。

希望有帮助！

# android - android发布apk不兼容

> ID：13079348
> 
> 赞同：0
> 
> 时间：2012-10-26T00:44:41.690
> 
> 标签：android, apk, publish, incompatibility

我有一个问题，我发布了我的 apk 但人们无法下载它只是说它与我朋友测试的设备不兼容：我的朋友有一个“正常的 HDPI”屏幕。

**这是我的清单：**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.switchart.game"
android:versionCode="5"
android:versionName="1.0">
......
......
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.GET_ACCOUNTS" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.SET_WALLPAPER" />
<uses-permission android:name="android.permission.VIBRATE" />
<supports-screens
android:smallScreens="true"
android:normalScreens="true"
android:largeScreens="true"
android:anyDensity="true" />
<uses-sdk 
android:minSdkVersion="7"
android:targetSdkVersion="10"/>
</manifest> 
```

**我发布以下信息：**

```
versionCode: 5
versionName: 1.0
Taille : 48M
Localisée en : par défaut, English, French
Autorisations : android.permission.INTERNET, android.permission.WRITE_EXTERNAL_STORAGE, android.permission.GET_ACCOUNTS, android.permission.ACCESS_NETWORK_STATE, android.permission.SET_WALLPAPER, android.permission.VIBRATE
Fonctionnalités : android.hardware.screen.portrait, android.hardware.touchscreen
Aucun fichier d'extension principal
Aucun fichier d'extension correctif
« moins
Niveau d'API : 7-17+
Écrans compatibles : small-xlarge
Textures OpenGL : toutes
Désactiver 
```

当我按下这个命令 aapt dump badging 我有这个：

```
package: name='com.switchart.game' versionCode='5' versionName='1.0'
application-label:'Switch art'
application-label-en:'Switch art'
application-label-fr:'Switch art'
application-icon-120:'res/drawable-ldpi/icon.png'
application-icon-160:'res/drawable-mdpi/icon.png'
application-icon-240:'res/drawable-hdpi/icon.png'
application-icon-320:'res/drawable-xhdpi/icon.png'
application: label='Switch art' icon='res/drawable-mdpi/icon.png'
launchable-activity: name='com.switchart.game.Main' label='Switch art' icon=''
uses-feature-not-required:'android.hardware.touchscreen'
uses-feature-not-required:'android.hardware.screen.portrait'
uses-permission:'android.permission.INTERNET'
uses-permission:'android.permission.WRITE_EXTERNAL_STORAGE'
uses-permission:'android.permission.GET_ACCOUNTS'
uses-permission:'android.permission.ACCESS_NETWORK_STATE'
uses-permission:'android.permission.SET_WALLPAPER'
uses-permission:'android.permission.VIBRATE'
sdkVersion:'7'
targetSdkVersion:'10'
uses-permission:'android.permission.READ_EXTERNAL_STORAGE'
uses-implied-permission:'android.permission.READ_EXTERNAL_STORAGE','requested WR
ITE_EXTERNAL_STORAGE'
main
wallpaper
other-activities
supports-screens: 'small' 'normal' 'large' 'xlarge'
supports-any-density: 'true'
locales: '--_--' 'en' 'fr'
densities: '120' '160' '240' '320' 
```

我注意到食品发布兼容屏幕中的一个问题：small-xlarge out 我做了一些与所有宽度兼容的事情！aapt dump badging : 我有这个 'small' 'normal' 'large' 'xlarge' 为什么有区别？有什么问题？

我不想用“compatible-screens”代替“supports-screens”，因为我想兼容 sdk 版本 7！

发现我的清单文件有问题？你有什么建议吗？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T01:08:39.557

您必须将 xlarge 屏幕属性添加到支持的屏幕标签中：

```
android:xlargeScreens="true" 
```

# android - 如果没有网络连接android aac播放器应用程序崩溃

> ID：13079350
> 
> 赞同：0
> 
> 时间：2012-10-26T00:44:50.237
> 
> 标签：android, android-layout

嗨，我有我的 aacplayer 应用程序，但是当我断开所有连接时，我的意思是 wifi + 移动数据并尝试打开它崩溃的应用程序没有打开，我想要做的是在主要活动中向用户显示一条消息，例如：Theres没有连接请重试。

我的应用程序是这样工作的：

我有一个列表视图，然后从 xml 加载许多广播电台的数据，然后当我点击其中一个时，它会打开 aac 播放器并正确播放。我也用于流式传输服务。

如何避免应用程序崩溃？

这是我的主要活动：

```
public class Principal extends Activity {

    protected TextView title;
    protected ImageView icon;
    static final String URL = "http://www.streaming507.com/estaciones.xml";
    static final String KEY_ESTACION = "estacion";
    static final String KEY_ID = "id";
    static final String KEY_NOMBRE = "nombre";
    static final String KEY_WEB = "web";
    static final String KEY_SHOUTCAST = "shoutcast";
    static final String KEY_MINIATURA = "miniatura";
    static final String KEY_LOGO = "logo";
    private static final int DIALOG_ALERT = 10;
    public static Activity handleToClose;
    ListView list;
    LazyAdapter adapter;
    private Button botonactualizar;

    public void actualizar() {
        title = (TextView) findViewById(R.id.title);
        icon = (ImageView) findViewById(R.id.icon);
        ArrayList<HashMap<String, String>> songsList = new ArrayList<HashMap<String, String>>();
        XMLParser parser = new XMLParser();
        String xml = parser.getXmlFromUrl(URL);
        Document doc = parser.getDomElement(xml);
        NodeList nl = doc.getElementsByTagName(KEY_ESTACION);

        for (int i = 0; i < nl.getLength(); i++) {
            HashMap<String, String> map = new HashMap<String, String>();
            Element e = (Element) nl.item(i);
            map.put(KEY_ID, parser.getValue(e, KEY_ID));
            map.put(KEY_NOMBRE, parser.getValue(e, KEY_NOMBRE));
            map.put(KEY_WEB, parser.getValue(e, KEY_WEB));
            map.put(KEY_SHOUTCAST, parser.getValue(e, KEY_SHOUTCAST));
            map.put(KEY_MINIATURA, parser.getValue(e, KEY_MINIATURA));
            map.put(KEY_LOGO, parser.getValue(e, KEY_LOGO));
            songsList.add(map);
        }

        list = (ListView) findViewById(R.id.list);
        adapter = new LazyAdapter(this, songsList);
        list.setAdapter(adapter);
        list.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {

                String url = ((TextView) view.findViewById(R.id.shoutcast))
                        .getText().toString();
                String logo = ((TextView) view.findViewById(R.id.logo))
                        .getText().toString();

                try {
                    stopService(new Intent(view.getContext(), MyService.class));
                } catch (Exception ex) {
                }

                Intent myIntent = new Intent(view.getContext(),
                        AACPlayerActivity.class);
                myIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP
                        | Intent.FLAG_ACTIVITY_SINGLE_TOP);
                myIntent.putExtra("URL", url);
                myIntent.putExtra("LOGO", logo);
                startActivity(myIntent);
            }
        });
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_CUSTOM_TITLE);
        setContentView(R.layout.main);
        getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE,
                R.layout.window_title);
        handleToClose = this;
        actualizar();
        botonactualizar = (Button)findViewById(R.id.botonactualizar);

        botonactualizar.setOnClickListener(new OnClickListener() {

         @Override
         public void onClick(View vw) {
             actualizar();
                Toast.makeText(Principal.this, "Lista de estaciones actualizada",
                        Toast.LENGTH_SHORT).show();
         }
         });

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        MenuInflater menuInflater = getMenuInflater();
        menuInflater.inflate(R.layout.menu_opciones1, menu);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {

        switch (item.getItemId()) {
        case R.id.menu_actualizar:
            actualizar();
            Toast.makeText(Principal.this, "Lista de estaciones actualizada",
                    Toast.LENGTH_SHORT).show();
            return true;

        case R.id.menu_salir:
            showDialog(DIALOG_ALERT);
            return true;

        default:
            return super.onOptionsItemSelected(item);
        }
    }

    @Override
    protected Dialog onCreateDialog(int id) {
        switch (id) {
        case DIALOG_ALERT:
            Builder builder = new AlertDialog.Builder(this);
            builder.setMessage("Desea salir de la aplicacion?");
            builder.setCancelable(true);
            builder.setPositiveButton("Si", new OkOnClickListener());
            builder.setNegativeButton("No", new CancelOnClickListener());
            AlertDialog dialog = builder.create();
            dialog.show();
        }
        return super.onCreateDialog(id);
    }

    private final class CancelOnClickListener implements
            DialogInterface.OnClickListener {
        public void onClick(DialogInterface dialog, int which) {
        }
    }

    private final class OkOnClickListener implements
            DialogInterface.OnClickListener {
        public void onClick(DialogInterface dialog, int which) {
            finish();
            stopService(new Intent(Principal.this, MyService.class));
            String ns = Context.NOTIFICATION_SERVICE;
            NotificationManager mNotificationManager = (NotificationManager) getSystemService(ns);
            mNotificationManager.cancel(1);
        }
    }
} 
```

我知道有一个叫做connectivitymanager的东西，但我不知道在我的主要活动或流服务中我必须在哪里设置它，所以当我在没有互联网的情况下打开应用程序时，我可以看到一条消息：请重试。然后是一个刷新按钮，所以如果互联网打开，那么我可以从网页的 xml 加载列表。

谢谢你。

编辑：

当我在没有互联网连接的情况下打开应用程序时出现此错误

```
ava.net.UnknownHostException: Unable to resolve host "www.mydomain.com": No address associated with hostname

java.lang.RuntimeException: Unable to start activity ComponentInfo{com.spoledge.aacplayer/com.spoledge.aacplayer.Principal}: java.lang.NullPointerException 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T01:13:47.897

把这样的方法放在你的`Activity`...

```
private boolean isConnected() {
    boolean haveConnectedWifi = false;
    boolean haveConnectedMobile = false;

    ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo[] netInfo = cm.getAllNetworkInfo();
    for (NetworkInfo ni : netInfo) {
        if (ni.getTypeName().equalsIgnoreCase("WIFI"))
            if (ni.isConnected())
                haveConnectedWifi = true;
        if (ni.getTypeName().equalsIgnoreCase("MOBILE"))
            if (ni.isConnected())
                haveConnectedMobile = true;
    }
    return haveConnectedWifi || haveConnectedMobile;
} 
```

`onResume()`在`Activity`您想要开始流式传输之前或任何时间从内部调用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T16:36:40.830

我解决了这个问题，将此代码添加到我的主要活动中：

```
public boolean isOnline() {
        ConnectivityManager connectionManager = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
        try {
            if (connectionManager.getActiveNetworkInfo().isConnected()) {
                Log.d("ConStatus", "Data Connection On");
                return true;
            } else {
                Log.d("ConStatus", "Data Connection off");
                return false;           
            }
        } catch (NullPointerException e) {
            // No Active Connection
            Log.i("ConStatus", "No Active Connection");
            return false;
        }
    } 
```

然后创建：

```
} else {
                Log.d("Connection Status", "Connection Not Available");

                AlertDialog alertDialog = new AlertDialog.Builder(this).create();
                alertDialog.setTitle("No hay conexion a internet disponible");
                alertDialog.setMessage("La conexion a Internet es necesaria para el uso de esta aplicacion.");
                alertDialog.setButton("OK", new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int which) {
                        // here you can add functions

                        finish();
                    }
                });
                alertDialog.show();
            }
        } catch(NullPointerException e){
                    Log.d("Connection Status", "Connection Not Available");

                    AlertDialog alertDialog = new AlertDialog.Builder(this).create();
                    alertDialog.setTitle("No hay conexion a internet disponible");
                    alertDialog.setMessage("La conexion a Internet es necesaria para el uso de esta aplicacion.");
                    alertDialog.setButton("OK", new DialogInterface.OnClickListener() {
                       public void onClick(DialogInterface dialog, int which) {
                          // here you can add functions

                        finish();
                       }
                    });
                    alertDialog.show();
                }
    } 
```

现在可以工作了，在活动开始之前它会检查连接并在用户未连接到互联网时显示一个对话框，然后关闭活动。

谢谢你

# excel - 在 excel vba 中使用 Select Case

> ID：13079351
> 
> 赞同：2
> 
> 时间：2012-10-26T00:44:58.413
> 
> 标签：excel, vba

只是好奇，但有什么办法可以减少代码行数？

```
For k = 1 To 12
    Select Case k
        Case 1
            col = 9
        Case 2
            col = 10
        Case 3
            col = 11
        Case 4
            col = 12
        Case 5
            col = 13
        Case 6
            col = 14
        Case 7
            col = 15
        Case 8
            col = 16
        Case 9
            col = 17
        Case 10
            col = 18
        Case 11
            col = 19
        Case 12
            col = 20
    End Select
Next 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T00:46:02.457

怎么样：

```
For k = 1 to 12
   col = k + 8
Next 
```

或者您可能正在寻找的内容：

```
For k = 1 To 12
    Select Case k
        Case 1 To 12
            col = k + 8
    End Select
Next 
```

这是[相关的 MSDN](http://msdn.microsoft.com/en-us/library/cy37t14y%28v=vs.80%29.aspx)，您可以向下滚动查看示例。

# memcached - 如何在 memcached 中存储大列表？

> ID：13079357
> 
> 赞同：1
> 
> 时间：2012-10-26T00:45:58.507
> 
> 标签：memcached

我有一个多租户站点，可以跨多个 MySQL 表存储人们的信息。当我需要有关列表人员的不同信息时，我可以从不同的表中提取。

我刚开始使用 Memcached，我很喜欢它。我想用它来加快过滤人员列表的过程。

我的问题是如何有效地将人们的信息存储在 memcached 中，以便在处理查询时，无论是简单的还是复杂的，我都不必每次都从 MySQL 数据库中加载所有内容？当我说复杂时，我将查询多个 MySQL 表以查找我需要的人员列表。

我有一些想法：

1.  将所有人的信息（包括来自链接的 MySQL 表的信息）存储在 memcached 中。然后，当我需要一组特定的人或需要生成复杂的报告时，我会从 memcached 中筛选人员数组，而不是查询 MySQL……问题是，可能有成千上万的人，每个人都有 100 行信息而且我不确定 memcached 是否可以处理这么多数据。

2.  每次创建新报表或视图时存储人员。它将保存它，因此如果生成相同的报告，它将从 memcached 中提取。

您可以提供的任何见解将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T00:51:37.383

memcached 旨在成为缓存，而不是数据库。不要*在*其中存储大量信息，特别是因为查询数据库以获取特定信息可能会比从缓存中加载全部信息、解析然后找到它更快。

# scala - 具有依赖特征和依赖实现的设计问题

> ID：13079359
> 
> 赞同：2
> 
> 时间：2012-10-26T00:46:03.690
> 
> 标签：scala

我有以下设计问题：

```
/**
 * Those 2 traits are the public API
 */
trait Box {
  def include(t: Token): Box
}
trait Token

/**
 * Implementation classes
 */
case class BoxImpl(id: Int) extends Box {
  /**
   * the implementation of this method depends on the implementation
   * of the Token trait
   * TODO: REMOVE asInstanceOf
   */
  def include(t: Token) = BoxImpl(t.asInstanceOf[TokenImpl].id + id)
}
case class TokenImpl(id: Int) extends Token

// use case
val b: Box = new BoxImpl(3)
val o: Token = new TokenImpl(4)

// == BoxImpl(7)
b.include(o) 
```

在上面的代码中，我不想`id`在公共 API 中公开（甚至没有将其设置为，`private[myproject]`因为这仍然会在我的项目中包含循环依赖项）。

什么方法可以让公共 API 保持完整，同时让实现类彼此之间有一定的可见性（没有丑陋的演员表）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T01:10:59.827

输入参数或成员：

```
trait Box {
  type T <: Token
  def include(t: T): Box
  //def include(t: Token): Box
}
trait Token

case class BoxImpl(id: Int) extends Box {
  type T = TokenImpl
  def include(t: T) = BoxImpl(t.id + id)

  /*
  def include(t: Token) = t match {
    case ti: TokenImpl => BoxImpl(ti.id + id)
    case _ => throw new UnsupportedOperationException
  }
  */

  //def include(t: Token) = BoxImpl(t.asInstanceOf[TokenImpl].id + id)
}
case class TokenImpl(id: Int) extends Token 
```

有很多切片和切丁的方法，因此蛋糕图案，众所周知的一块蛋糕：

```
trait Boxer {
  type Token <: Tokenable
  trait Box {
    def include(t: Token): Box
  }
  trait Tokenable
}

trait Boxed extends Boxer {
  type Token = TokenImpl
  case class BoxImpl(id: Int) extends Box {
    override def include(t: Token) = BoxImpl(t.id + id)
  }
  case class TokenImpl(id: Int) extends Tokenable
}

trait User { this: Boxer =>
  def use(b: Box, t: Token): Box = b.include(t)
}

object Test extends App with Boxed with User {
  val b: Box = new BoxImpl(3)
  val o: Token = new TokenImpl(4)
  println(use(b, o))
} 
```

# css - 边框和流动布局

> ID：13079362
> 
> 赞同：-3
> 
> 时间：2012-10-26T00:46:26.063
> 
> 标签：css

我正在开发一个具有液体布局设计和三列的网站。三列向左浮动，每列都有一个 1px 的边框。当我调整页面大小时，所有内容都会调整，除了列周围的边框。文本只是溢出边界之外。有什么办法可以防止这种情况发生吗？

```
<head>
<title>Liquid Layout</title>
<meta http-equiv="content-type" content="text/html;charset=utf-8"/>

<style type="text/css">

* {
margin: 0px 0px;
padding: 0px 0px;
}

/* MAIN WRAPPER */ 
#wrapper {
width: 90%;
margin-right: auto;
margin-left: auto;
}

@font-face {
    font-family: 'Andika';
    src: url('AndBasR-webfont.eot');
    src: url('AndBasR-webfont.eot?#iefix') format('embedded-opentype'),
         url('AndBasR-webfont.woff') format('woff'),
         url('AndBasR-webfont.ttf') format('truetype'),
         url('AndBasR-webfont.svg#AndikaBasicRegular') format('svg');
    font-weight: normal;
    font-style: normal;

}

/* BODY */ 
body {
background-image: url(gold.jpg);
background-repeat: repeat;
}

/* HEADER */   
#header {
background-color: #A60000;
}

#header img {
float: left;
}

#title {
float: left;
width: 60.95%;
height: 240px;
font-family: Copperplate Gothic Light, sans-serif;
background-color: #A60000;
color: #FFFFFF;
font-weight: bold;
text-transform: uppercase;
text-align: center;
font-size: 4em;
letter-spacing: 3px;
line-height: 75px;
padding: .5em 0em 0em 0em;
}

.slogan {
height: 50px;
font-family: Copperplate Gothic Light, sans-serif;
background-color: #A60000;
color: #EBC137;
font-size: .25em;
text-align: center;
letter-spacing: 3px;
}

hr.break {
//padding: .1em 0em 0em 0em;

}

/* NAVIGATION */
#nav {
float: left;
width: 60.95%;
height: 56px;
padding: 0em 0em; 
background-color: #A60000;
overflow: hidden;
}

#nav ul {
padding: 0em 0em;
list-style-type: none;
margin-left: 3.4em;     
}

#nav li {
text-align: center;
float: left;
//width: 170px;
}

#nav a {
color: #FFFFFF;
display: block;
text-decoration: none;
letter-spacing: 4px;
line-height: 50px;
font-size: 1.5em;
text-transform: uppercase; 
font-family: Copperplate Gothic Light, sans-serif;
padding: 0px 50px 0px 0px;
}

#nav a:hover {
color: #3CA0D0;
}

#main {
float: left;
width: 100%;
background-color: #3CA0D0;
}

/* PLAYER OF THE WEEK */
#featured {
clear: both;
float: left;
margin-top: 1em;
margin-right: 1em;
margin-bottom: .5em;
margin-left: 1.5em;
border: 3px solid #A60000;
width: 27%;
//height: 605px;
}

#featured img {
float: left;
padding: .5em .5em .5em .5em;
}

#featured ul {
list-style: none;
padding: .5em .5em 0em 0em;
}

#featured li {
font-family: Georgia, Serif;
letter-spacing: .05em;
line-height: 1.5em;
color: #000044;
}

#featured_main {
clear: both;
padding: 0em .5em .5em .5em;
text-align: justify;
font-family: Georgia, Serif;
letter-spacing: .05em;
line-height: 1.3em;
color: #000044;
}

/* LATEST NEWS */
#news {
float: left;
margin-top: 1em;
margin-right: 1em;
margin-bottom: .5em;
border: 3px solid #A60000;
width: 27%;
//height: 605px;
}

h1.videos {
padding: .5em .5em 0em .5em;
font-size: 1em;
font-family: Tahoma, Geneva, sans-serif;
letter-spacing: 1px;
color: #000044;
}

p.morgan, p.pia, p.gold {
padding: .5em .5em 0em .5em;
overflow: hidden;
font-family: Andika;
letter-spacing: .05em;
line-height: 1.3em;
color: #000044;
text-align: justify;
}

a:link {
font-size: 1em;
color: #000044;
}

a:visited {
color: #000044;
}

/* MULTIMEDIA VIDEOS */
#videos {
float: left;
margin-top: 1em;
margin-right: 1em;
margin-bottom: .5em;
border: 3px solid #A60000;
width: 38%;
//height: 605px;
}

#videos_inner {
text-align: center;
}

p.title {
padding: .5em 0em 1em 0em;
font-family: Tahoma, Geneva, sans-serif;
font-size: 1.2em;
font-weight: bold;
letter-spacing: 2px;
}

/* FOOTER */
#footer {
clear: both;
background-color: #A60000;
}

#footer_inner {
text-align: center;
padding: .3em;
color: #FFFFFF;
font-family: Copperplate / Copperplate Gothic Light, sans-serif;
font-size: 15px;
}

#footer a:link {
font-family: Copperplate / Copperplate Gothic Light, sans-serif;
color: #FFFFFF;
font-size: 15px;
}

#footer a:hover {
color: #FFFFFF;
font-size: 18px;
}

</style>

</head>
<body>

<div id="wrapper">
    <div id="header">
        <img src="celebrate4.jpg" alt="US Women's National Team" />
    </div> <!--end div header -->

    <div id="title">
        U.S. Women's
        National Team
        <p class="slogan">Greatness Has Been Found</p>
    </div> <!--end div title-->

    <hr class="break">

    <div id="nav">
        <ul>
            <li><a href="home.html">Home</a></li>
            <li><a href="http://www.ussoccer.com/Teams/US-Women/Rosters/120527-Olympic-Roster.aspx">Roster</a></li>
            <li><a href="http://www.ussoccer.com/Teams/US-Women/Schedule-Results/2012.aspx">Schedule</a></li>
            <li><a href="http://www.ussoccerstore.com/">Store</a></li>
        </ul>
    </div> <!--end div nav -->
</div> <!--end div wrapper -->

<div id="wrapper">
    <div id="main">
    <div id="featured"> 
        <img src="abby.png" alt="Abby Wambach, Forward" />

        <ul>
            <li><b>Name:</b> Abby Wambach </li>
            <li><b>DOB:</b> June 2, 1980 </li>
            <li><b>Position:</b> Forward </li>
            <li><b>Appearances:</b> 191 </li>
            <li><b>Goals:</b> 146 </li>
            <li><b>Hometown:</b> Rochester, NY </li>

        </ul>

        <div id="featured_main">
            <p> One of the world's best players in the air, Wambach is the second all-time leading scorer in international soccer history behind only Mia Hamm (158). Wambach surpassed former U.S. WNT teammate Kristine Lilly (130) earlier in 2012 to move into second place. She has 141 goals through the group stage of the 2012 London Olympics. Wambach is a five-time U.S. Soccer Female Athlete of the Year, most recently recognized for her 2011 campaign that included eight goals and four assists. Her ability to wear down defenses with her physical play, aerial game and hard running has long been a key to the USA's success. Has developed into one of the most dangerous goal scorers in the world since debuting for the USA in 2001\. Has the best goals per game ratio in U.S. history, having scored 125 goals in her 166 games through the end of 2011\. Of her 125 goals, 51 have come with her head.</p>
        </div> <!--end div featured_main -->

    </div> <!--end div featured -->

    <div id="news">
        <div id="new_inner">
            <h1 class="videos"><a href="http://www.womenssoccerunited.com/profiles/blogs/alex-morgan-wins-sportswoman-of-the-year-award">Alex Morgan Named Team Sports Woman of the Year</a></h1>
            <p class="gold">USWNT forward Alex Morgan was awarded the Sportswoman of the Year Award (Team Sport) last night at the 33rd Salute to Women in Sports Gala in New York. The prestigious award was given to Alex Morgan for her exceptional performances in a team sport over a 12 month span...</p>
            <h1 class="videos"><a href="http://www.ussoccer.com/News/Womens-National-Team/2012/08/Pia-Sundhage-to-Return-Home-to-Pursue-Opportunities-in-Sweden.aspx">Head Coach Pia Sundhage Resigns</a></h1>
            <p class="pia">U.S. Women's National Team head coach Pia Sundhage has decided to return home to pursue opportunities in Sweden. "After the Olympics we had discussions and early in the process it became clear that Pia was very interested in returning home to Sweden," said U.S. Soccer President Sunil Gulati. "It certainly wasn't an easy decision for U.S. Soccer or Pia. She deserves a tremendous amount of credit for the amazing success with the U.S. Women's National Team...</p> 
            <h1 class="videos"><a href="http://www.ussoccer.com/News/Womens-National-Team/2012/08/US-WNT-vs-Japan-Gold-Medal-Match.aspx">U.S. Women Win Fourth Olympic Gold</a></h1>
        </div> <!--end div news_inner -->
            <p class="gold">The U.S. Women's National Team captured the gold medal at the 2012 London Olympics with a 2-1 victory against Japan. U.S. midfielder Carli Lloyd, the gold medal hero of the 2008 Olympics, led the way once again with both goals for the United States as they upended 2011 FIFA Women's World Cup champion Japan and captured their third-consecutive Olympic championship...</p>        
    </div> <!--end div news -->

    <div id="videos">
        <div id="videos_inner">
            <p class="title">Multimedia Highlights</p>
            <iframe width="450" height="253" src="http://www.youtube.com/embed/Nd3udbFc5tw" frameborder="0" allowfullscreen></iframe> <br /> <br />

            <iframe width="450" height="253" src="http://www.youtube.com/embed/7a4rNNXOOjY" frameborder="0" allowfullscreen></iframe>
        </div> <!--end div videos_inner -->
    </div> <!--end div videos -->
</div>
</div> <!--end div wrapper -->

<div id="wrapper">
<div id="footer">
    <div id="footer_inner">
        For more information about the U.S. Women's National Team, contact <a href="mailto:mkm49@pitt.edu">Michelle McCullough</a>.
    </div><!--end div footer_inner-->
</div><!--end div footer-->
</div> <!--end wrapper div -->

</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T01:56:48.297

利用`box-sizing: border-box;`

（旧 IE 不支持）

[http://paulirish.com/2012/box-sizing-border-box-ftw/](http://paulirish.com/2012/box-sizing-border-box-ftw/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T00:56:19.707

```
div { overflow: hidden; } 
```

将隐藏任何溢出。

# java - 用 final 关键字声明一个 List 字段

> ID：13079365
> 
> 赞同：32
> 
> 时间：2012-10-26T00:47:42.723
> 
> 标签：java, list, final

`Synapse`如果我在一个抽象类型的类中有以下语句：

```
private final List<Synapse> synapses; 
```

是否`final`允许我仍然能够更改 中`Synapse`对象的状态`List`，但阻止我将新`Synapse`对象添加到列表中？如果我错了，您能否解释一下我`final`在做什么以及何时应该使用关键字`final`。

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-10-26T00:52:19.497

不，final 关键字不会使列表或其内容不可变。如果你想要一个不可变的列表，你应该使用：

```
List<Synapse> unmodifiableList = Collections.unmodifiableList(synapses); 
```

final 关键字的作用是阻止您为“突触”变量分配新值。即，你不能写：

```
final List<Synapse> synapses = createList();
synapses = createNewList(); 
```

但是，您可以编写：

```
List<Synapse> synapses = createList();
synapses = createNewList(); 
```

本质上，您仍然可以更改、添加和删除列表的内容，但不能创建分配给变量突触的新列表。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-26T00:49:06.037

`final`阻止您在*分配* `synapses`一次后重新分配 - 您仍然可以像往常一样添加/删除元素。[您可以在此处](http://en.wikipedia.org/wiki/Final_%28Java%29)阅读有关该`final`关键字的更多信息。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-26T00:50:50.030

您仍然可以更改、添加和删除列表的内容，但不能创建分配给变量的新列表。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-26T00:53:25.563

Java 语言规范[写道](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.12.4)：

> 变量可以声明为final。最终变量只能分配一次。声明一个变量 final 可以作为有用的文档，说明它的值不会改变，并且可以帮助避免编程错误。
> 
> 如果最终变量被分配给它是一个编译时错误，除非它在分配之前立即被明确地未分配（第 16 节）。
> 
> 空白 final 是一个 final 变量，其声明缺少初始化程序。
> 
> 一旦分配了最终变量，它总是包含相同的值。如果最终变量持有对对象的引用，则对象的状态可能会通过对对象的操作而改变，但变量将始终引用同一个对象。

因此，如果您希望强制通过变量可访问的状态不会改变，您必须声明变量`final`，使用不可修改的列表（例如[Collections.unmodifiableList](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#unmodifiableList%28java.util.List%29)），并使`Synapse`对象不可变。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-26T00:54:41.767

最终实现意味着对象引用一旦启动，引用本身就永远不能改变，但内容当然可以。它根本不违反规则。您只指定了一个关于参考更改的规则，该规则正在相应地起作用。如果您希望这些值也永远不会改变，您应该选择不可变列表，即

```
List<String> items = Collections.unmodifiableList(Arrays.asList("a", "b", "c")); 
```

请参阅以下相关问题。

*   [Java中的最终变量操作](https://stackoverflow.com/q/1249917/1037210)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-10-25T15:56:55.473

以上答案在理论上解释了所有here你可以找到运行代码并查看实际差异，建议使用本地变量

```
package exp_test;

import java.util.ArrayList;
import java.util.Collections;
import java.util.List;

public class testList {
    final static List<String> synapses = new ArrayList();;

    public static void main(String[] args) {

        synapses.add("A");
        System.out.println(synapses);
        //
        System.out.println(finalLisTest(synapses));
        //
        System.out.println(synapses);
        //
        synapses.add("B");

        List<String> unmodifiableList = Collections.unmodifiableList(synapses);
        System.out.println(finalLisTest(unmodifiableList));
        //
        System.out.println(unmodifiableList);

    }

    private static List finalLisTest(List<String> list) {
        list.remove(0);
        return null;

    }

} 
```

结果 ：

```
[A]
null
[]
Exception in thread "main" java.lang.UnsupportedOperationException
    at java.util.Collections$UnmodifiableList.remove(Collections.java:1317)
    at exp_test.testList.finalLisTest(testList.java:29)
    at exp_test.testList.main(testList.java:22) 
```

# c# - 如何输出奇数和偶数的列表？C＃

> ID：13079368
> 
> 赞同：2
> 
> 时间：2012-10-26T00:48:08.507
> 
> 标签：c#, arrays

我可能离这里很远，但是当我稍微修改它时，MS 网站上的这段代码对我不起作用。抱歉，快凌晨 2 点了。int 应该是什么变量？程序崩溃，说明“指定的演员表无效”。

```
ArrayList OddEven = new ArrayList();

            foreach (int i in lbList.Items)
            OddEven.Add(i);
            foreach (int i in OddEven)
            {
                if (i % 2 == 0)
                    lbEven.Items.Add(i);
                else
                    lbOdd.Items.Add(i);
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T00:51:54.460

`lbList.Items`可能是并且不存在`strings`隐式转换。 试试这个：`int`

```
ArrayList OddEven = new ArrayList();

foreach (var i in lbList.Items)
  OddEven.Add(int.Parse(i.ToString()));

foreach (int i in OddEven)
{
  if (i % 2 == 0)
    lbEven.Items.Add(i);
  else
    lbOdd.Items.Add(i);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T01:01:19.540

假设 lbList、lbEven 和 lbOdd 是 ListBoxes，您似乎正在尝试将 ListBoxItem 转换为 int。我很惊讶这甚至可以编译，因为 Items 集合的 Add() 方法需要一个新的 ListBoxItem 或一个字符串，而不是一个 int。您将不得不发布更多信息。话虽如此，使用模运算符的基本逻辑是正确的，您只是试图将输出填充到错误的东西中。你想如何显示你的输出？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T01:04:56.793

我假设您的 lbList 是 ListBox 或 DropdownList

```
foreach (ListItem item in lbList.Items)
{
     int i = int32.Parse(item.Text);
     if (i % 2 == 0)
        lbEven.Items.Add(i);
     else
        lbOdd.Items.Add(i);
} 
```

## 更新

在 Winforms 中， ListBox.Items 返回`ObjectCollection`，列表中的每个项目将是`Object`

```
foreach (object item in lbList.Items)
{
     int i = Convert.ToInt32(item);
     if (i % 2 == 0)
        lbEven.Items.Add(i);
     else
        lbOdd.Items.Add(i);
} 
```

你也可以做

```
foreach (var item in lbList.Items)
{
     int i = Convert.ToInt32(item);
     if (i % 2 == 0)
        lbEven.Items.Add(i);
     else
        lbOdd.Items.Add(i);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T01:52:43.900

试试这个，

```
lbList.Items.ToList<string>().ForEach(item => 
     {
        int i = Convert.ToInt32(item);
        if (i % 2 == 0)
            lbEven.Items.Add(i);
        else
            lbOdd.Items.Add(i);
    }); 
```

# ruby-on-rails - 在使用 Rails 3.2.8 的 FactoryGirl 中，setter 和 getter 的值为零

> ID：13079369
> 
> 赞同：1
> 
> 时间：2012-10-26T00:48:11.407
> 
> 标签：ruby-on-rails, ruby-on-rails-3, autocomplete, getter-setter

在我们的发票模型中，有两列 -`customer_id`和`customer_name`。为了使用自动完成（JQuery），`customer_name`在发票模型中添加了一个 setter 和 getter：

```
 def customer_name
    customer.try(:name)
  end

  def customer_name=(name)
    self.customer = Customer.find_by_name(name) if name.present?
  end 
```

在发票模型中，有：

```
 belongs_to :customer 
```

然而在那之后，`customer_id`并且`customer_name`总是`nil`被`FactoryGirl.build(:invoice)`. 如果从发票模型中删除了 getter 和 setter，则 FactoryGirl 将正确的值分配给`customer_id`and `customer_name`。这是工厂女孩：

```
 factory :invoice do 
.....
    customer_id             2
    customer_name           'a customer name'
...

  end 
```

为什么在 FactoryGirl中会出现`customer_name`result的 getter 和 setter？`nil`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T03:37:16.110

`FactoryGirl.build(:invoice)`实际上并没有保存新实例化的对象。您可能需要使用 FactoryGirl 的内置回调来获取此滚动。

*未测试*

```
FactoryGirl.define do
  factory :customer do
    name "A customer"
  end
end

FactoryGirl.define do
  factory :invoice do
    name "An invoice"
    after_build do |invoice|
      invoice.customer = FactoryGirl.build(:customer)
    end
  end
end 
```

一些资源...

[http://robots.thoughtbot.com/post/254496652/aint-no-calla-back-girl](http://robots.thoughtbot.com/post/254496652/aint-no-calla-back-girl)

[http://icelab.com.au/articles/factorygirl-and-has-many-associations/](http://icelab.com.au/articles/factorygirl-and-has-many-associations/)

希望这会为您指明正确的方向！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T19:55:36.230

我们所做的是为 jquery 自动完成添加一个字段 customer_name_autocomplete，而不是使用 customer_name，它是 invoices 表中的一列。基本上我们只是绕过问题，不知道是什么导致了上述问题。所有失败的 rspec 案例再次通过。

# networking - 如何通过多个接入点扩展无线 PC 耳机/麦克风的范围

> ID：13079375
> 
> 赞同：0
> 
> 时间：2012-10-26T00:49:09.927
> 
> 标签：networking, speech-recognition, voip, wireless, router

我之前在另一个论坛上发布了这个问题，但没有确定的解决方案。我想让大约 4 名不同的仓库员工穿过仓库并使用 2.4ghz 无线耳机/麦克风与他们的桌面 PC 的 Microsoft Access 表单进行通信，使用语音识别和文本到语音集成，以便输入数据导入 MS Access 表单并使用语音命令运行 MS Access 宏。每台台式电脑都在同一个 LAN 网络上。仓库有金属架子，用户可能离他的电脑几百英尺。请告知我所需的硬件和程序，以实现我的目标。我已经联系了无线耳机制造商 Logitech 和 Jabra，他们没有携带可以连接到接入点的 2.4ghz 耳机。我也查了谷歌无济于事。任何见解将不胜感激。非常感谢你，纳撒尼尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T10:06:13.627

您不需要任何专门的 AP 即可连接。多个符合标准的 AP 可以连接到[扩展服务集](http://en.wikipedia.org/wiki/Extended_Service_Set#Extended_service_set)(ESS)。连接到 ESS 中任何 AP 的设备应该能够从一个 AP 无缝漫游到另一个 AP。

关于专用耳机 - 我建议改用标准手机。指示工作人员连接到您的 ESS，并为他们提供与电话连接的标准无线耳机（例如 BT 耳机）。

# asp.net-mvc - 想使用通用基类作为 asp.net MVC 视图的模型

> ID：13079376
> 
> 赞同：3
> 
> 时间：2012-10-26T00:49:40.260
> 
> 标签：asp.net-mvc

我有一个通用的视图模型类 foo

```
public abstract class Base<T> 
```

并且它的子类型在像这样从它继承时设置类

```
public class Child : Base<Foo> 
```

我想在视图中使用它们作为模型

```
@model Base<T> 
```

但我听说这是不可能的。我见过有人建议用 dynamic 代替 T，但除非我也用 dynamic 替换 Foo，否则这不起作用。有没有办法设计这样的视图模型？我想我可以在 viewbag 中传递 Child 对象而不是模型，但如果可能的话，我宁愿不这样做。编辑：（那个viewbag的东西现在我想起来实际上不会起作用，因为我需要能够将它转换为一个Base才能将它用作一个，这基本上就是我现在遇到的问题）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T12:24:55.510

您不能在视图中写入，`@model Base<T>`因为它不是具体的类型。无法使用泛型类型键入视图。但是你可以写

```
@model Base<Foo> 
```

或者

```
@model Base<dynamic> 
```

如果您显示更多关于`Base<T>`i 中的哪些属性，可以给您更具体的建议。

# iphone - iPhone iOS 如何以编程方式创建色调和阴影？

> ID：13079378
> 
> 赞同：2
> 
> 时间：2012-10-26T00:49:51.623
> 
> 标签：iphone, objective-c, ios, uicolor

我正在做很多程序化界面定制，例如渐变和边框，并且对如何修改颜色（假设它是 HSV 或 RGB 值）以产生色调和阴影（参见示例）感兴趣。我知道色调是颜色+白色，而阴影是颜色+黑色。

**是否有一些算法可以用来获取默认的 iOS 颜色，如蓝色，并以编程方式创建该颜色的几种色调和阴影？**

谢谢！

![色调和色调](../Images/c136cca5dea04442c3e2e036c935f22b.png)

[创建色调和阴影](http://www.sccc.premiumdw.com/web200/creating-tints-shades-in-illustrator/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T01:36:32.390

抱歉，我不在电脑前，所以无法将算法写出来，但这是您需要的方法：

```
+ (UIColor *)colorWithHue:(CGFloat)hue saturation:(CGFloat)saturation brightness:(CGFloat)brightness alpha:(CGFloat)alpha 
```

你选择你的起始色相和饱和度（饱和度可能应该是 1.0，但是根据你的情况做任何适合的事情），然后你在循环中增加亮度值以获得新的阴影。最好有一个可以放入颜色的数组，然后您可以返回该数组并根据需要使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T22:39:38.917

这是我用来获取色调和阴影的十六进制值的工具：http: [//slayeroffice.com/tools/color_palette/](http://slayeroffice.com/tools/color_palette/)

它基本上是您指向的我的教程的 HTML 等价物。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-10-26T01:05:31.473

您可以使用。

```
[UIColor colorWithRed:29.0/255.0 green:42.0/255.0 blue:74.0/255.0 alpha:1.0]; 
```

例如，如果您必须提供导航栏的色调，而不是

```
self.navigationController.navigationBar.tintColor = [UIColor colorWithRed:29.0/255.0 green:42.0/255.0 blue:74.0/255.0 alpha:1.0]; 
```

# youtube-api - Youtube API 上传在 nexturl 中返回 status=400&erro=FAILED

> ID：13079381
> 
> 赞同：1
> 
> 时间：2012-10-26T00:50:38.937
> 
> 标签：youtube-api

我通过浏览器将视频上传到 Youtube 的 API 接口成功通过了所有 OAUTH2 身份验证，并返回表单的 URL 和 TOKEN 以将视频发布到 Youtube。当上传似乎完成时，它会重定向到我的“nexturl”页面，其 URI 类似于：

[http://mynexturl.com?status=400&error=FAILED](http://mynexturl.com?status=400&error=FAILED)

而且 Youtube 上没有视频。

当在不同的浏览器上登录不同的 Google 帐户时，就会发生这种情况。我的代码曾经可以工作，然后它开始偶尔出现此错误，现在它总是出现此错误。

我能找到的关于这个问题的唯一论坛参考是没有答案的。真的很感激任何想法。

仅供参考，我没有使用框架。所有代码都是本地开发的。

这是生成的基本形式。我相信 URL 编码没问题。

```
<form name="vidform"
action="https://uploads.gdata.youtube.com/action/FormDataUpload/AIwbFAT3znCsDfC_Be
5RiqMy2L4xpBqTsxrRbG5Q7iiKJweoXHl3b6UyVM9fLJTNTuKAptTiQY0hrVzYArABtKOGgCAxNYHa8BbsjQrWokwSp51HUckPI56amf4xeaMask7G9B5Gttsh
?nexturl=http%3A%2F%2Fmydomain.com%2Fcs%2Fbuild%2Fquilt%2Fyoutube_fin%2Ehtm
%3Ffinish%3DY%26state%3D2220" method="post" enctype="multipart/form-data" 
onsubmit="return chkYouFile(this);">
<input name="file" type="file">
<input type="hidden" name="token" value="AIwbFARRkinNm2Hey6JBCgxIO3mReNLQDoxLAoDBK_jq6FT1-epwRt2tfRECeONF9QQRHcLJsxKAzbHIQEvNJC-c1P1aqoFvK1jTkl4U94vMgdHGrkDuSAfKws1IU-GpkvNeMYVoI223lL3r0FP28KU4xef3K6Hmg6TJjyf9u4HxoIW7FHqQybZuGRpR3mdfkVfl0pObgfX9uj2J1m2DwPnWU0kOBw0Q4hezzczitsEi1b_cE-E7o0miJP2xTLB-kZTv6aPSvTtbgr7w-57Q09igVcOrhsrmu9tfhnHWTi6peXdvu5BeRnoWAXhz_ZKeH_Q0FN2-SzW0">
<input id="UpNow" type="submit" value="Upload Now!" style="font-weight:bold;font-size:11pt;">
</form> 
```

它正在正确返回到 nexturl 页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T12:59:02.187

一个可能的原因是 nexturl 参数不是 URL 编码的，nexturl 参数的值应该是 URL 编码的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T03:42:40.230

**在我撕扯头发的某个时刻，我在nexturl** URL的末尾添加了一个 &（与号） 。也就是说，nexturl 字段/值来自：

```
nexturl=http://mydomain.com/youtube_fin.htm?finish=Y&state=2220 
```

至：

```
nexturl=http://mydomain.com/youtube_fin.htm?finish=Y&state=2220& 
```

（为了清楚起见，我特意展示了上面的非 url 编码版本）

上传立即开始工作。不再有 error=FAILED 消息。有趣的是，我删除了 & 以查看它是否会再次开始失败，但事实并非如此。所以我仍然对此感到最困惑，但它现在正在工作，所以我很高兴。

# cakephp - milesj cakephp AutoLogin 组件 - _autoLogin 函数

> ID：13079385
> 
> 赞同：0
> 
> 时间：2012-10-26T00:51:06.737
> 
> 标签：cakephp, autologin

我已经成功使用[AutoLogin 组件](http://milesj.me/code/cakephp/auto-login)有一段时间了，这很好，但是由于某种原因，我似乎无法让 _autoLogin 功能选项工作，我需要在 cookie 登录时更新用户 last_login 字段。

有没有人能够让它正常工作？无论我把它放在什么中都没有发生，所以我认为它被忽略或找不到。

我的代码如下所示，我尝试将其放入 AppController、UserController 和 User 模型中，但似乎没有任何反应。

```
public function _autoLogin($user) 
{
    debug($user);
    $this->User->id = $user['User']['id']; // target correct record
    $this->User->saveField('last_login', date(DATE_ATOM)); // save login time
} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T22:40:04.647

它最终不得不进入 AppController.php 文件。

我的新代码如下：

```
public function _autoLogin($user) 
{
    //echo $user);
    $this->loadModel('User');
    $this->User->id = $user; // target correct record
    $this->User->saveField('last_login', date(DATE_ATOM)); // save login time
} 
```

这行得通。

# r - 如何使用 R 在 csv 文件中按列添加数据？

> ID：13079387
> 
> 赞同：8
> 
> 时间：2012-10-26T00:51:11.323
> 
> 标签：r, csv, append

我有向量中包含的信息，例如：

```
sequence1<-seq(1:20)
sequence2<-seq(21:40)
... 
```

我想将该数据附加到文件中，所以我正在使用：

```
write.table(sequence1,file="test.csv",sep=",",append=TRUE,row.names=FALSE,col.names=FALSE)
write.table(sequence2,file="test.csv",sep=",",append=TRUE,row.names=FALSE,col.names=FALSE) 
```

但问题是，这是全部添加在一列中，例如：

```
1
2
3
...
21
22
...
40 
```

我想在列中添加该数据，使其最终如下：

```
1         21
2         22
3         23
...       ...
20        40 
```

我如何使用 R 来做到这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-09-19T17:01:41.000

虽然不能直接在文件中添加列，但可以将其读入 data.frame，附加到列，然后将结果写入 csv 文件：

```
tmp <- read.csv("original_file.csv")
tmp <- cbind(tmp, new_column)
write.csv(tmp, "modified_file.csv") 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-26T00:54:49.837

`write.table`将 data.frame 或矩阵写入文件。如果您想要两个使用 将两列 data.frame （或矩阵）写入文件`write.table`，那么您需要在`R`

```
x <- data.frame(sequence1, sequence2)
write.table(x, file = 'test.csv', row.names=FALSE,col.names=FALSE) 
```

请参阅`?write.table`非常清楚地描述该函数的作用。

正如@JoshuaUlrich 的评论所述，这不是一个真正的`R`问题，由于它存储在磁盘上的方式，您不能将列附加到 csv 文件。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-11-20T22:44:13.227

如果您想随时写入文件（例如在循环中）：

```
seq1<-t(seq(1,20,1))
seq2<-t(seq(21,40,1))

write.table(seq1,"test.csv",sep=",",append=TRUE,row.names=FALSE,col.names=FALSE)
write.table(seq2,"test.csv",sep=",",append=TRUE,row.names=FALSE,col.names=FALSE) 
```

然后在最后转置文件。如果您想一次完成所有操作：

```
test<-t(rbind(seq1,seq2))
write.csv(test, "test.csv") 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-07-14T06:56:07.453

检查以下代码，

```
seq1 <- seq(1:20)
seq2 <- seq(21:40)
bind <- cbind(seq1,seq2)
write.csv(bind,file = "Your_path", append = TRUE) 
```

此代码有效。

# javascript - 单个页面上的多个分页和递增值（Javascript）

> ID：13079389
> 
> 赞同：1
> 
> 时间：2012-10-26T00:51:16.403
> 
> 标签：javascript, jquery, ajax, pagination, increment

我正在尝试增加按钮点击的值。如果只有 1 个按钮，这很容易，但如果有**多个**按钮，我对如何跟踪计数感到困惑。这似乎更具挑战性，因为在页面加载之前我不知道我必须跟踪多少按钮计数。最终目标是在单个页面上构建多个 AJAX 分页方案（从我的数据库中按顺序加载较旧的列表项，并且特定于单击的项）。

这是我开始了解的 JSFiddle（下面是它的 JS 和 HTML）：http: [//jsfiddle.net/trpeters1/menAX/6/](http://jsfiddle.net/trpeters1/menAX/6/)

JS：

```
var cnt=function(id){ //this code is incomplete but hopefully you'll get the idea of what i'm trying to do...
var j=0;
for(var i=0; i>100; i++){
    if(id[i]==i) j+=5;
}
    return j;
};

$('button').click(function(){  
   var id=this.id;
   var c=cnt(id); //something which will return the current increment value of the button that was clicked 
   $('#'+id+'div').append(c+'message'+id+'<br>');
});​ 
```

HTML：

```
<button type="button" id="btn1">1</button><div id="btn1div"></div>
<button type="button" id="btn2">2</button><div id="btn2div"></div>
<button type="button" id="btn3">3</button><div id="btn3div"></div> 
```

此代码的问题是单击每个按钮都会输出相同的消息。理想情况下，代码将能够跟踪每个被点击的按钮。我认为这可行的方式是将每个按钮`id`与它自己的计数器联系起来（可能需要多个`j`计数器？）。

想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T01:25:25.067

您可以使用 jQuery 的[`.data()`方法](http://api.jquery.com/data/)为每个按钮存储一个计数器：

```
$('button').click(function(){

    var $this = $(this),
        c = $this.data('count'); // get count for current button
    if (!c) c = 0;               // if not defined yet set to 0
    c++;                         // increment count
    $this.data('count',c);       // save updated count

    // Do something with c here
}); 
```

演示：http: [//jsfiddle.net/menAX/8/](http://jsfiddle.net/menAX/8/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T01:40:45.107

对于可能碰巧有同样问题的人在这里重复，这就是我解决问题的方法。它依赖于使用匿名对象，它在 Javascript 中的工作方式类似于字典/地图/哈希表。第一次按下按钮时，该属性不存在，因此将其初始化为 1，然后递增。

[这对我有用](http://jsfiddle.net/acjohnson55/gYWd8/)：

```
<html>
<head>
<script type="text/javascript" src="jquery.min.js"></script>
<script type="text/javascript">
var counter = {};
$(function() {

    $('button').click(function(){  
        var id=this.id;
        if (counter.hasOwnProperty(id)) {
            counter[id] += 1;
        } else {
            counter[id] = 1;
        }
        var c= counter[id];
        $('#'+id+'div').append(c+' message '+id+'<br>');
    });
});
</script>
</head>
<body>
<button type="button" id="btn1">1</button><div id="btn1div"></div>
<button type="button" id="btn2">2</button><div id="btn2div"></div>
<button type="button" id="btn3">3</button><div id="btn3div"></div>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T00:56:41.897

像这样的东西？

```
$('button').click(function() {
    var $elem = $('#'+ this.id +'div');
    var c = $elem.children().length;
    $elem.append(c + 'message' + id + '<br>');
}); 
```

[http://jsfiddle.net/hZHW3/](http://jsfiddle.net/hZHW3/)

# c - 为什么这个核函数会无限循环？

> ID：13079392
> 
> 赞同：0
> 
> 时间：2012-10-26T00:51:43.670
> 
> 标签：c, linux, file-io, kernel

我正在尝试在内核系统调用中覆盖文件中的所有数据（是的，我知道我不应该在内核中读取/写入文件，但我只是在尝试一下！）基于此处的答案[如何读取/写入文件在 Linux 内核模块中？](https://stackoverflow.com/questions/1184274/how-to-read-write-files-within-a-linux-kernel-module)

这是代码：

```
int sys_mycompleteerase(const char __user * inputFileUser)  {

    struct file* filp = NULL;   
    int err = 0,count = 0;
    unsigned long long offset =0;

    mm_segment_t old_fs;
    old_fs = get_fs();
    set_fs(KERNEL_DS);

    filp = filp_open(inputFileUser, O_WRONLY, 0644);
    if(IS_ERR(filp)) {
        err = PTR_ERR(filp);
        return NULL;
    }
    do {
        count = vfs_write(filp," ",sizeof(" "), &offset);
        offset+=sizeof(" ");
    }while(count > 0);
    filp_close(filp, NULL);

    set_fs(old_fs);

    return 0;

} 
```

如果我在用户空间程序中给出一个正确的文件名，它就会继续写入而不会停止。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T01:05:03.480

看起来您正在不断地写入文件，因此文件长度正在增长。vfs_write 没有理由失败。如果我理解正确，您想要做的是覆盖整个文件。因此，您必须首先找到文件的大小，然后将那么多字节写入文件，然后关闭文件。就目前而言，您只是在使用“空格”字符来增长文件。

# apache - CentOS 6 上的 Trac 和 fcgi Apache - 错误

> ID：13079394
> 
> 赞同：1
> 
> 时间：2012-10-26T00:52:01.193
> 
> 标签：apache, trac, mod-fcgid

我一直在把头发拉出来，所以希望有人能对此有所了解。我一直在尝试使用 Apache 和 mod_fcgid 在 CentOS 6.3 服务器上安装 Trac 1.0。

当我将浏览器指向应该运行 Trac 的虚拟主机时，我得到一个内部服务器错误 (500) 和如下日志条目：

(104) 对等方重置连接：mod_fcgid：从 FastCGI 服务器读取数据时出错脚本头过早结束：trac.fcgi

我在 /var/trac/projectname 中创建了 trac 环境

然后，我使用 trac-admin deploy 将项目的 cgi-bin 和 htdocs 部署到我的虚拟主机的 webroot 中。在 vhost.conf 我添加了以下内容：

```
ScriptAlias / /home/httpd/vhosts/xxxx/sites/xxxx/cgi-bin/trac.fcgi/
DefaultInitEnv TRAC_ENV /var/trac/
ErrorLog "/var/log/httpd/xxxxx/error_log"
CustomLog "/var/log/httpd/xxxxx/access_log" common
LogLevel debug

<Directory "/home/httpd/vhosts/xxxxx/sites/xxxxx/htdocs">
  Order allow,deny
  Allow from all
</Directory>

<Directory "/home/httpd/vhosts/xxxxx/sites/xxxxx/cgi-bin">
                AllowOverride None
                Options +ExecCGI -MultiViews +SymLinksIfOwnerMatch
                Order allow,deny
                Allow from all
</Directory> 
```

注意我把 xxxx 匿名化了一些域名信息。

关于这里可能出现什么问题的任何想法？或者我怎样才能更多地调试它以获得更多有用的日志信息？我已经在 trac.ini 中将日志记录设置为调试，但它没有记录任何内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T08:01:13.160

trac.edgewall.org 上的权威 wiki 中的[相关文档不会立即提供提示，说明您的配置可能有误。](http://trac.edgewall.org/wiki/TracFastCgi#alternativeenvironmentsetup)

但是您的 Error:104 表明 fcgi 可执行文件本身存在问题。也许您甚至想尝试将 Trac 环境的路径嵌入到`trac.fcgi`脚本本身中的方法，如上述 wiki 页面链接的示例中所推荐的那样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T19:44:00.257

因此，在发现将环境路径添加到 trac.fcgi 可执行文件本身之后，我检查了 trac.fcgi 的正确掩码。我注意到它没有任何可执行权限，所以我给了所有者可执行权限（744）。之后它就可以工作了，无论是超级慢，我都没有在左上角看到 trac 标志。这可能与 vhost conf 中的资源别名有关，因此我现在将对其进行研究。

我确实觉得尴尬，这让我怀疑该文件是否应该是可执行的，因为官方安装 wiki 中没有提到这一点。

编辑：将我的 vhost.conf 中静态资源的别名行移到 ScriptAlias 行上方。之后，静态资源加载成功，Trac 速度更快。看起来现在一切正常。惊人的。:)

# sql - SQL 查询帮助获取字段“custname”而不是“custnmbr”

> ID：13079403
> 
> 赞同：0
> 
> 时间：2012-10-26T00:53:37.670
> 
> 标签：sql

我一直在试图弄清楚如何修改我的查询以显示 CUSTNAME 和“SALES TOTAL”列。这是下面的当前查询。

```
select c.CUSTNMBR, SUM(c.ortrxamt) as 'Sales Total'
from rm30101 c
inner join
(
select a.CUSTNMBR, b.CUSTNAME
from RM30101 a
inner join 
RM00101 b on b.CUSTNMBR = a.CUSTNMBR
where b.ZIP = '99502' and (a.DOCDATE between '2011-01-01' and '2012-10-25')
group by a.CUSTNMBR,b.CUSTNAME
)
x on c.CUSTNMBR = x.CUSTNMBR
group by c.CUSTNMBR
order by [Sales Total] desc 
```

我不知道如何将列 RM00101.custname 输入到第一个选择行而不会收到错误。我尝试将 'c.custnmbr' 替换为 'x.custname' 并按 x.custname 分组，但销售总额结果太差了。任何帮助将不胜感激！谢谢！

-宰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T01:18:06.760

```
select a.CUSTNMBR, b.CUSTNAME, SUM(a.ortrxamt) as 'Sales Total'
from RM30101 a
inner join RM00101 b on b.CUSTNMBR = a.CUSTNMBR
where b.ZIP = '99502' 
   and (a.DOCDATE between '2011-01-01' and '2012-10-25')
group by a.CUSTNMBR,b.CUSTNAME
order by [Sales Total] desc 
```

# c# - 文本快速向下滚动时如何避免richTextBox闪烁？

> ID：13079406
> 
> 赞同：0
> 
> 时间：2012-10-26T00:54:03.410
> 
> 标签：c#

我有一个richTextBox，我一直在递归函数中更新附加文本。在这种情况下，我将硬盘中的目录添加到richTextBox。我这样做了，当文本下降时，右侧的栏会保持向下，所以如果我想查看较旧的文本，我需要向上滚动。

问题是当我从硬盘添加目录作为字符串时，它的工作速度非常快，并使右侧的文本和栏闪烁或跳跃。

这是我在构造函数中所做的设置：

```
richTextBox1.TabStop = false;
richTextBox1.ReadOnly = true;
richTextBox1.BackColor = Color.White;
richTextBox1.Cursor = Cursors.Arrow;
richTextBox1.Enter += richTextBox1_Enter;
richTextBox1.BackColor = Color.White; 
```

这是 ruchTextBox 文本更改事件：

```
private void richTextBox1_TextChanged(object sender, EventArgs e)
        {
            richTextBox1.SelectionStart = richTextBox1.Text.Length;
            richTextBox1.ScrollToCaret();
        } 
```

这使得richTextBox 向下滚动，所以如果我想看到之前添加的文本，我总是会看到新的文本输入，我需要抓住右边的栏。

这就是我在递归函数中将文本添加到richTextBox 的方式：

```
this.Invoke(new MethodInvoker(delegate { ColorText.Texts(richTextBox1, "Level: " + levels.ToString(), Color.Green); }));
                this.Invoke(new MethodInvoker(delegate { ColorText.Texts(richTextBox1, "   Loading The Url:   ", Color.Red); }));
                this.Invoke(new MethodInvoker(delegate { ColorText.Texts(richTextBox1, url + "...", Color.Blue); })); 
```

这是我用来从硬盘读取目录并将其作为列表返回的函数

```
private List<string> offline(string targetDirectory)
        {
            if (targetDirectory.StartsWith("http://"))
            {
                targetDirectory = targetDirectory.Substring("http://".Length);
            }
            List<string> directories = new List<string>();

            try
            {
                string[] dirs = Directory.GetDirectories(targetDirectory,"*.*",SearchOption.TopDirectoryOnly);
                for (int i = 0; i < dirs.Length; i++)
                {
                    string t = "http://" + dirs[i];
                    directories.Add(t);
                }
            }
            catch
            {

            }

            return directories;

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T01:11:01.783

更新表单时可能会禁用在表单上的绘图。

您可以发送一条名为 WM_SETREDRAW 的消息来禁用和启用绘图。

[http://fgaillard.com/2011/02/the-unfortunate-effect-of-wm_setredraw/](http://fgaillard.com/2011/02/the-unfortunate-effect-of-wm_setredraw/)

# wpf - 如何在未设置所有所需属性之前暂停 WPF 窗口进行渲染？

> ID：13079407
> 
> 赞同：4
> 
> 时间：2012-10-26T00:54:10.947
> 
> 标签：wpf, window, render, suspend, borderless

关于 WPF 和 dotNet4.0 中的渲染线程，我有一个非常简单的问题。在我设置我想要设置的所有依赖项属性之前，如何避免渲染线程已经开始渲染。我喜欢在渲染线程开始渲染窗口的新位置和大小之前完全设置 WPF 窗口的新高度、宽度和左和顶部属性。

背景：我目前正在设计一个无边框窗口，我在其中执行所有调整大小和定位的逻辑。当我现在尝试通过鼠标在左上角甚至左边框上调整窗口大小时，我必须设置一个新的窗口大小（高度、宽度），同时我必须使用左设置新位置和顶级财产。不幸的是，即使仍未设置所有新属性值，渲染线程也已经开始渲染。这导致窗口在最终设置在正确的新位置之前在不同的位置闪烁，看起来不太好。

我已经在这里研究了很多问题线程，但没有线程给出真正的答案。请帮忙！

注意：我认为不需要代码，问题是没有代码可以理解，每个人都可以尝试使用默认窗口，设置为无边框。

# r - 如何将字符串向量转换为数据框或矩阵

> ID：13079431
> 
> 赞同：6
> 
> 时间：2012-10-26T00:57:59.900
> 
> 标签：r

我有一个长度为 n 的数字字符串向量，如下所示（在本例中，n=3）：

```
[1] "111" "111" "111" "111" "111" "111" "111" "111" "111" "111" "111" "111"
[13] "111" "111" "111" "111" "111" "111" "111" "111" "111" "111" "111" "111"
[25] "111" "111" "111" "111" "111" "111" "111" "1 1" "111" "  1" "111" "112"
[37] "121" "111" "111" "111" "11 " "111" "   " "111" "111" "221" "111" "111"
[49] "   " "111" "111" 
```

我想将其转换为如下所示的矩阵（或数据框）：

```
V1   V2   V3
1    1    1
1    1    1
1    1    1
...
1   NA    1
1    1    1
NA   NA   1 
```

等等

我知道我可以在带有 substring() 和 as.numeric() 的双重嵌套循环中做到这一点，但必须有一种更像 R 的方式来完成这一点。任何人都可以提供线索吗？

TIA。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-26T01:02:57.880

您可以使用`strsplit`. 例如（假设您的向量是一个名为 的对象`x`）：

```
y <- strsplit(x,"")
z <- lapply(y, as.numeric)
a <- do.call(rbind, z) 
```

这将比上述解决方案更快，但不太直观。 `sapply`简化为数组，但您必须转置它，因为尺寸与您想要的相反。

```
a <- t(sapply(y, as.numeric)) 
```

这是答案中提出的不同方法的时间比较（到目前为止）：

```
x <- sample(c("111","1 1","  1","112","121","11 ","   ","221"), 1e5, TRUE)
f1 <- function(x) do.call(rbind, lapply(strsplit(x,""), as.numeric))
f2 <- function(x) t(sapply(strsplit(x,""), as.numeric))
f3 <- function(x) read.fwf(file=textConnection(x), widths=c(1,1,1))
library(rbenchmark)
benchmark(f1(x), f2(x), f3(x), replications=10, order="relative",
  columns=c("test","replications","elapsed","relative"))
#    test replications elapsed  relative
# 2 f2(x)           10   5.072  1.000000
# 1 f1(x)           10   6.343  1.250591
# 3 f3(x)           10 119.892 23.638013 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-26T02:30:44.710

这是一个使用`read.fwf()`.

```
x <- c("111", "   ", "221", "  1")

## "fwf" stands for "*f*ixed *w*idth *f*ormatted"
read.fwf(file = textConnection(x), widths = c(1,1,1))
#   V1 V2 V3
# 1  1  1  1
# 2 NA NA NA
# 3  2  2  1
# 4 NA NA  1 
```

# c++ - Windows Live Messenger“我在听什么”功能

> ID：13079432
> 
> 赞同：3
> 
> 时间：2012-10-26T00:58:16.557
> 
> 标签：c++, qt, windows-live-messenger

如何使用 Windows Live Messenger 的“我在听什么”功能？如何与 WLM 通信以发送歌曲信息，以便 Messenger 设置状态？我正在用 C++ (Qt) 编码

我搜索了整个网络，但一无所获，甚至在其他编程语言中也没有。

编辑：

看来我没有说清楚。我不想演练。我想知道是否有 API、库或任何与 Windows Live Messenger 通信以使用该功能的东西，就像 WMP、Winamp 和 iTunes 等媒体播放器一样。

我搜索了 Live Connect API，但没有找到任何相关信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T11:02:58.967

由于有许多开源项目实现了这个功能，你可以检查一下（如 MPC-HC、PsyMP3、Songbird 等），我将解释它是如何完成的：

首先，您构建一个 Unicode 字符串，如下所示：

> Player\0Type\0Playing\0Format\0Artist\0Type\0Album\0GUID\0

（\0 不是 NUL，所以一定要避开它们）

*   播放器：您的音乐播放器的名称
*   类型：媒体类型，此处：“音乐”
*   播放中：1代表播放，0代表停止
*   格式：“正在播放”旁边的字符串，例如：`A3FPlayer: {1} - {0}`
*   艺术家、标题和专辑不言自明
*   GUID：WMCONTENTID

然后你像这样构建一个 COPYDATASTRUCT：

```
COPYDATASTRUCT data;
data.dwData = 0x0547; //1351 decimal
data.lpData = (PVOID)(LPCWSTR)MsnMsg;
data.cbData = MsnMsgSize * 2 + 2; 
```

最后将该结构传递给`MsnMsgrUIManager`您可以找到的句柄`FindWindowEx`：

```
HWND hWnd = FindWindowEx(NULL, NULL, L"MsnMsgrUIManager", NULL);
SendMessage(hWnd, WM_COPYDATA, (WPARAM)NULL, (LPARAM)&data); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T11:29:19.573

a3f 通过一些代码提供了一个很好的答案。但是，如果您确实发现他的回复有点令人困惑，这里是我在为 PsyMP3 编写接口代码时编写的各种“API”参考。我唯一要说的是，我会将 GUID 部分写为“WMContentID”，因为这是我在使用 WinSpy 窥探窗口消息时看到的 Windows Media Player 传递给 MSN 的。

无论如何，我的相关接口文档在这里：

[http://code.google.com/p/psymp3/wiki/MsnMsgrUiManager](http://code.google.com/p/psymp3/wiki/MsnMsgrUiManager)

# c# - OData（WCF 数据服务）继续使用投影的查询

> ID：13079433
> 
> 赞同：0
> 
> 时间：2012-10-26T00:58:22.007
> 
> 标签：c#, .net, wcf-data-services, odata

我有一个看起来像这样的 OData 查询：

```
var query = entities.MyObjects.Select(x => new {x.MyObjectID, x.Number, x.Name}); 
```

当我运行它时，我只得到 100 个项目。那是因为我的服务器设置为 100 个项目。

但是还有很多，我一次需要它们（仅在这一次）。

**我怎样才能得到它们？**

**注意：**我尝试遵循网络上的[继续示例](http://blogs.msdn.com/b/astoriateam/archive/2010/02/02/server-paging-in-data-services.aspx)，但它们都使用`DataServiceCollection<T>`. 因为我使用的是投影，所以我没有有效的类型可以放在那里。

我通读了这个页面：[如何：项目数据服务查询结果](http://msdn.microsoft.com/en-us/library/ff650917%28v=vs.95%29.aspx)，但它也没有帮助，因为它没有使用匿名类型。

这可能吗？我不想带回所有对象（它非常大，没有必要浪费带宽或内存。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T16:33:05.460

对多个查询使用 Take 和 Skip。

也类似： [WCF 数据服务 - 如何以编程方式设置页面大小？](https://stackoverflow.com/questions/8146631/wcf-data-service-how-to-set-page-size-programmatically)

```
var query = entities.MyObjects.Skip(200).Take(100).Select(x => new {x.MyObjectID, x.Number, x.Name}); 
```

# binary - 如何从可执行文件中删除所有额外信息？

> ID：13079434
> 
> 赞同：0
> 
> 时间：2012-10-26T00:58:23.160
> 
> 标签：binary, header-files, elf

在创建最终的二进制文件、可执行文件或库时，向其中添加了太多信息。

我想去掉所有对二进制文件本身不是绝对必要和重要的东西；例如，我想让`readelf`（Linux）这样的无用和实用程序。

我怎样才能以最正确的方式做到这一点？我习惯了 gcc 套件和/或 clang。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T05:45:21.430

> 我想删除对二进制文件本身不是严格必要和重要的所有内容

尝试`objcopy --strip-unneeded`

> 例如，我想让 readelf 之类的无用和实用程序

没用有什么用？使`readelf`完全无用的唯一方法是使您的文件成为非 ELF（但它不会运行）。

# c# - .net 4 的位置选择器

> ID：13079439
> 
> 赞同：0
> 
> 时间：2012-10-26T00:59:42.830
> 
> 标签：c#, .net, sql-server-2008, .net-4.0

我正在开发一个应用程序来控制现场项目。我需要让用户指定项目的位置，从国家到地址，以及纬度/经度坐标。

问题是，不同国家/地区的位置信息没有统一描述，即，国家/地区在其位置层次结构中具有不同的名称。因此，如果一个项目位于美国，它将具有以下层次结构：

```
Country / State / City 
```

另一方面，智利的等级制度为：

```
Country / Region / County / City / district / neighborhood 
```

我应该如何建模？

是否有一个预制`.net`模块可以粘贴到我的项目中？我是否应该将层次结构简化为四个不同的级别，并让用户处理各国不同层次结构的复杂性？

对我来说最好的解决方案是使用预制的程序集，我可以毫不费力地坚持到我的代码中，但我不害怕自己编写实现代码。

问题是我设法烹饪的每一个解决方案似乎都太复杂而无法实用，所以任何建议都非常受欢迎。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T02:30:58.123

为什么不只存储纬度/经度坐标，然后使用 GMaps 查找位置：

```
static string baseUri = 
  "http://maps.googleapis.com/maps/api/geocode/xml?latlng={0},{1}&sensor=false";
string location = string.Empty;

public static void RetrieveFormatedAddress(string lat, string lng)
{
    string requestUri = string.Format(baseUri, lat, lng);

    using (WebClient wc = new WebClient())
    {
        string result = wc.DownloadString(requestUri);
        var xmlElm = XElement.Parse(result);
        var status = (from elm in xmlElm.Descendants() where 
            elm.Name == "status" select elm).FirstOrDefault();
        if (status.Value.ToLower() == "ok")
        {
            var res = (from elm in xmlElm.Descendants() where 
                elm.Name == "formatted_address" select elm).FirstOrDefault();
            requestUri = res.Value;
        }
    }
} 
```

编辑：

这是相反的简单版本：

```
public static Coordinate GetCoordinates(string region)
{
    using (var client = new WebClient())
    {

        string uri = "http://maps.google.com/maps/geo?q='" + region + 
          "'&output=csv&key=sadfwet56346tyeryhretu6434tertertreyeryeryE1";

        string[] geocodeInfo = client.DownloadString(uri).Split(',');

        return new Coordinate(Convert.ToDouble(geocodeInfo[2]), 
                   Convert.ToDouble(geocodeInfo[3]));
    }
}

public struct Coordinate
{
    private double lat;
    private double lng;

    public Coordinate(double latitude, double longitude)
    {
        lat = latitude;
        lng = longitude;

    }

    public double Latitude { get { return lat; } set { lat = value; } }
    public double Longitude { get { return lng; } set { lng = value; } }

} 
```

# c# - 检查空值时在 Linq 中搜索错误

> ID：13079441
> 
> 赞同：1
> 
> 时间：2012-10-26T01:00:14.050
> 
> 标签：c#, linq, exception-handling

我有这样的代码：

```
var organisations = Uow.Query<Organisation>()
                       .Where(x => x.PersonOrganisationRoles.Any(por =>
                           por.Person.FirstName != null &&
                           por.Person.FirstName.ToLower().Contains(searchFragmentLower))); 
```

所以在组织人员和角色之间有一个桥接表。此查询正在尝试查找具有 FirstName 包含该字符串的人员的组织。

问题是当我运行它时，我得到：

> 不能将 Person[FirstName <> NULL] 用作 Any 或 All 表达式中的逻辑表达式的一部分

我该如何检查`null`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T01:03:28.590

你试过了`por => !string.IsNullOrEmpty(por.Person.FirstName)`吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T02:22:44.363

看起来有些东西在抱怨 Linq 正在生成的 SQL

在运行 any 之前尝试将 null 检查移到 where 子句中

```
var organisations = Uow.Query<Organisation>().
Where(x => x.PersonOrganisationRoles.Where(por => por != null && por.Person != null && por.Person.FirstName != null).Any(por => phr.Person.FirstName.ToLower().Contains(searchFragmentLower))); 
```

# vba - 如何使用空白单元格作为参考执行 sumif？

> ID：13079443
> 
> 赞同：4
> 
> 时间：2012-10-26T01:00:43.887
> 
> 标签：vba, excel, excel-formula

请看下面的示例数据：

```
Time        Date                Result
00:21.6     10/1/2012 1:43      FALSE
01:47.7     10/1/2012 2:13      FALSE
00:56.7     10/1/2012 2:49      FALSE
00:54.9     10/1/2012 3:43  
00:11.8     10/1/2012 3:43  
02:10.9     10/1/2012 3:46      FALSE
01:05.4     10/1/2012 3:58      FALSE
00:55.8     10/1/2012 4:53  
04:41.8     10/1/2012 4:52  
00:26.3     10/1/2012 4:58  
00:04.2     10/1/2012 4:58  
00:15.3     10/1/2012 4:59  
00:06.4     10/1/2012 4:57  
00:10.7     10/1/2012 4:56  
00:04.4     10/1/2012 4:56  
00:04.2     10/1/2012 4:57  
00:29.2     10/1/2012 4:57  
00:34.5     10/1/2012 4:56  
01:22.4     10/1/2012 4:55  
00:08.1     10/1/2012 4:55      FALSE
03:20.9     10/1/2012 4:51      FALSE
00:56.3     10/1/2012 5:42      FALSE
02:23.1     10/1/2012 5:51      
01:20.6     10/1/2012 5:48  
00:09.8     10/1/2012 5:49      FALSE
01:40.0     10/1/2012 7:47      FALSE
01:13.4     10/1/2012 8:11      FALSE
00:41.6     10/1/2012 9:49      FALSE
01:08.1     10/1/2012 11:56     FALSE 
```

我需要执行某种类型的计算。如果结果中没有空白单元格，我需要结果旁边的时间单元格中的数据。但是如果结果列中有一个空白单元格，我需要在包含空白单元格的行和空白单元格旁边包含 FALSE 的第一个单元格中执行时间总和。

请参阅下面的示例输出：

```
00:21.6     10/1/2012 1:43      FALSE       00:21.6
01:47.7     10/1/2012 2:13      FALSE       01:47.7
00:56.7     10/1/2012 2:49      FALSE       00:56.7
00:54.9     10/1/2012 3:43      
00:11.8     10/1/2012 3:43      
02:10.9     10/1/2012 3:46      FALSE       03:17.6(i.e., 00:54.9+00:11.8+02:10.9)
01:05.4     10/1/2012 3:58      FALSE       01:05.4
00:55.8     10/1/2012 4:53      
04:41.8     10/1/2012 4:52      
00:26.3     10/1/2012 4:58      
00:04.2     10/1/2012 4:58      
00:15.3     10/1/2012 4:59      
00:06.4     10/1/2012 4:57      
00:10.7     10/1/2012 4:56      
00:04.4     10/1/2012 4:56      
00:04.2     10/1/2012 4:57      
00:29.2     10/1/2012 4:57      
00:34.5     10/1/2012 4:56      
01:22.4     10/1/2012 4:55      
00:08.1     10/1/2012 4:55      FALSE       09:23.3(i.e., 00:55.8+04:41.8+00:26.3+00:04.2+00:15.3+00:06.4+00:10.7+00:04.4+00:04.2+00:29.2+00:34.5+01:22.4+00:08.1)
03:20.9     10/1/2012 4:51      FALSE       03:20.9
00:56.3     10/1/2012 5:42      FALSE       00:56.3
02:23.1     10/1/2012 5:51      
01:20.6     10/1/2012 5:48      
00:09.8     10/1/2012 5:49      FALSE       03:53.5(i.e., 02:23.1+01:20.6+00:09.8)
01:40.0     10/1/2012 7:47      FALSE       01:40.0
01:13.4     10/1/2012 8:11      FALSE       01:13.4
00:41.6     10/1/2012 9:49      FALSE       00:41.6
01:08.1     10/1/2012 11:56     FALSE       01:08.1 
```

如果可以通过任何公式或使用 Visual Basic 编辑器，请告诉我。我现在正在手动执行此操作。我每天必须处理大约 10000-15000 行。如果你帮助我，我可以节省很多时间并用它来学习新东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T01:52:17.303

如果你喜欢使用 VBA，你可以试试这个：

```
Sub SmartRunningTotals()
    Dim rng As Range
    Dim cell As Range
    Dim lastRow As Long
    Dim totalTime As Double

    ' I'm assuming your time column is in column A
    lastRow = Range("A" & ActiveSheet.Rows.Count).End(xlUp).Row

    Set rng = Range("A2:A" & lastRow)

    For Each cell In rng
        totalTime = totalTime + cell.Value
        If cell.Offset(, 2).Value <> "" Then
            cell.Offset(, 3).Value = totalTime
            ' reset total after we write it to column D
            totalTime = 0
        End If
    Next

End Sub 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T01:32:04.637

在两列中很容易。如果上面的单元格不为空，请计算运行总计并重置。

例如

> （时间 = H 列，日期 = I 列，结果 = J 列）

```
Column N
    =IF(J1="",H2+N1,H2)
    =IF(J2="",H3+N2,H3)
    =IF(J3="",H4+N3,H4)
    =IF(J4="",H5+N4,H5)
    =IF(J5="",H6+N5,H6)

Column O

    =IF(J2="","",O2)
    =IF(J3="","",O3)
    =IF(J4="","",O4)
    =IF(J5="","",O5)
    =IF(J6="","",O6) 
```

把这些公式复制下来

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T13:21:35.023

假设数据从第 2 行开始，第 1 行有标题，那么您可以在 D2 中使用此公式复制下来

`=IF(C2<>"",SUM(A$2:A2)-SUM(D$1:D1),"")`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T01:42:26.837

我假设您现有的范围从单元格 A1 开始（即单词`"Time"`存在于单元格 A1 中）。我还假设在 C 列中，两个可能的值是逻辑值`FALSE`（不是文本字符串`"FALSE"`）或空白（不是 1 个或多个空格的字符串）。

在单元格 D1 中，输入公式`=IF(AND(C2=FALSE,C1=""),D1+1,1)`

在单元格 E1 中，输入公式`=IF(C2="","",SUM(OFFSET(A2,-(D2-1),0,D2,1)))`

将单元格 E1 中的数字格式设置为`"mm:ss.0"`

将 D1 和 E1 一直复制到您的范围内。如果需要，隐藏 D 列。

# macos - 安装 pygame

> ID：13079444
> 
> 赞同：0
> 
> 时间：2012-10-26T01:00:51.890
> 
> 标签：macos, python-2.7, pygame

我对 Python 完全陌生。我使用 Macports 安装 Python，根据建议，Python 的预安装版本在 OSX 上并不理想。

我还为 OSX 运行了 Pygame 安装程序。

当我进入 Python 控制台并输入：

```
import pygame
pygame.init() 
```

`(0,6)`如果我在我的根目录中，它工作正常（即返回）。

如果我在其他地方尝试这个，我会得到错误：

```
File "< stdin >", line 1, in <module>
AttributeError: 'module' object has no attribute 'init' 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-26T06:03:49.083

我已经在我的 OSX 上安装了带有自制软件的 python 2.5、2.6、2.7，但第一次尝试也失败了。我认为这可能是 pygame 的错。试试另一个 mkpg/src [http://pygame.org/ftp/](http://pygame.org/ftp/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-13T00:37:58.037

要在 OS X 上使用 pygame，请确保您在 32 位模式下运行它。

```
arch -i386 /Library/Frameworks/Python.framework/Versions/2.7/bin/idle2.7 -n 
```

是在 32 位模式下启动空闲以运行 pygame 代码的终端命令示例。

# c++ - 重载流提取运算符错误

> ID：13079445
> 
> 赞同：-2
> 
> 时间：2012-10-26T01:01:08.163
> 
> 标签：c++

如何将提取运算符分配给链表类。

```
struct Node{
    int x;
    Node *next;
  }*p; 
```

这是我的功能

```
istream& operator>>(std::istream &is, list &l){
  is>>l;
  return is;
} 
```

这不起作用，它给我一个分段错误程序收到信号EXC_BAD_ACCESS，无法访问内存。原因：KERN_PROTECTION_FAILURE 地址：0x00007fff5f3ffff8 0x000000010000127b in operator>> ()

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T01:04:49.603

您的代码会导致*无限递归*。它基本上说从 a 中提取`list`a`std::istream`是通过从 a 中提取 a 来完成`list`的`std::istream`。

# r - 使用 for 循环或 lapply 遍历 R 列表中的不同数据帧

> ID：13079449
> 
> 赞同：2
> 
> 时间：2012-10-26T01:01:48.157
> 
> 标签：r, list, for-loop, lapply

如果这个问题看起来很初级，我深表歉意。我有点不清楚是否可能/如何在 R 中使用带有数据帧列表的 for 循环。

我的数据框是更大数据框的子集：

```
billysuzy <- subset(userlist,user1 %in% c("billy","suzy"))
joefrank<- subset(userlist,user1 %in% c("joe","frank"))
georgelenny <- subset(userlist,user1 %in% c("george","lenny")) 
```

我想循环并找到每个子集的相同变量（时间和 simscore）的相关值。

```
cor(time, simscore) 
```

但是，我很不确定如何构造这样的 for 循环，也不确定如何构造函数以在 lapply 中附加和分离。

我刚在想：

```
somelist <- list(billysuzy, joefrank, georgelenny) 
```

与 lapply：

```
corz <-  lapply(somelist, function(df)  detach(), attach(df),cor(time, simscore))
lapply(corz, print) 
```

或用于：

```
for (i in 1:length(somelist)){
      detach()
     attach(somelist[i])
    cor(time, simscore)
    } 
```

我很抱歉冒犯了任何人的 R 敏感性，或者如果这看起来像两个问题 - 答案是任何描述如何做一件事的，即遍历列表中的 dfs 并找到那里的 corr 值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T01:06:33.860

我真的建议避免`attach`and `detach`。

你可以试试这样的

```
corz <-  lapply(somelist, function(df)  cor_time_sim = cor(df$time, df$simscore)) 
```

或者

```
corz <-  lapply(somelist, function(DF)  {with(DF, corst <-  cor(time, simscore))}) 
```

或者

```
corz <-  lapply(somelist, with, corst <-  cor(time, simscore)) 
```

# android - 登录页面的 Android 调用 Web 服务

> ID：13079453
> 
> 赞同：0
> 
> 时间：2012-10-26T01:03:02.583
> 
> 标签：android, web-services, login, call

在传递参数时，我无法找到有关调用 Web 服务的任何文档。我发现了大量关于创建 Web 服务以及在不传递任何参数的情况下调用 Web 服务的教程，但目前这对我没有任何好处。我正在为此使用kso​​ap。有谁知道像这样的任何半体面的教程？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T02:29:12.730

当您使用 ksope 库时，您可以跟进本教程。

[http://sarangasl.blogspot.com/2011/10/android-web-service-access-tutorial.html](http://sarangasl.blogspot.com/2011/10/android-web-service-access-tutorial.html)

一些基础知识是可用的。

# azure - Azure 网站调试

> ID：13079457
> 
> 赞同：12
> 
> 时间：2012-10-26T01:03:16.300
> 
> 标签：azure, azure-web-roles

我知道我可以使用此处概述的方法调试 Azure Web 角色：http: [//msdn.microsoft.com/en-us/library/windowsazure/ee405479.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/ee405479.aspx)

调试 Windows Azure 网站的过程是什么？

我希望能够单步执行代码、设置断点等。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-11-05T17:23:46.220

根据[最近的这篇文章](http://blogs.msdn.com/b/webdev/archive/2013/11/05/remote-debugging-a-window-azure-web-site-with-visual-studio-2013.aspx)，这现在是可能的。

以下是 Visual Studio 2012 的必要步骤，取自该帖子：

> 1.  在 Windows Azure 管理门户中，转到网站的配置选项卡，然后向下滚动到站点诊断部分
> 2.  将 Remote Debugging 设置为 On，并将 Remote Debugging Visual Studio Version 设置为 2012
> 3.  在 Visual Studio 调试菜单中，单击附加到进程 在限定符框中，输入您的网站的 URL，不带 http:// 前缀
> 4.  选择显示所有用户的进程
> 5.  当系统提示您输入凭据时，输入有权发布网站的用户名和密码
>     1.  要获取这些凭据，请转到管理门户中您网站的仪表板选项卡，然后单击下载发布配置文件。在文本编辑器中打开该文件，您将在第一次出现 userName= 和 userPWD= 之后找到用户名和密码。
> 6.  当进程出现在可用进程表中时，选择 w3wp.exe，然后单击附加
> 7.  打开浏览器访问您的站点 URL。在 Windows Azure 设置服务器以进行调试时，您可能需要等待 20 秒左右。这种延迟只会在您第一次在网站上以调试模式运行时发生。在接下来的 48 小时内再次开始调试时不会有延迟。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-26T07:04:58.430

答案与如何在**任何**共享主机提供商中调试（asp.net）网站？

*   正确处理异常/记录
*   在调试时使用`<compilation debug="true" />`（**并且仅在调试时**使用）
*   为网站启用所有和任何类型的错误报告（下图）
*   [在此处插入您最喜欢的调试共享托管站点的方式]

![Azure 网站诊断](../Images/bddc8af07599027171e123fb0e7fcf37.png)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-08-16T06:13:44.963

**更新：** Azure 门户已更改，应用程序设置刀片即将停用。

* * *

我认为这值得为 Azure 管理门户和 VS 的最新版本提供更新的答案。

这就是我使用 Visual Studio 2017 Preview 7.1 实现 ASP.Net Core 2.0 API 远程调试的方式：

1.  打开[Azure 管理门户](https://portal.azure.com/)，浏览到您的 Web 应用，单击配置 > 常规设置，然后打开远程调试。以前它还要求提供 VS 版本，但这似乎不再是一个选项，我假设远程调试平台现在可以自动检测（但也可能是 2015 年之前的 VS 版本不再是这种情况支持，请参阅下面的评论）

[![在此处输入图像描述](../Images/710a801ccf7fbfe79922fb97f70a890a.png)](https://i.stack.imgur.com/hjZ9e.png)

2.  编辑您的发布配置文件并将配置设置为调试，然后将 API 重新发布到 Azure：

[![在此处输入图像描述](../Images/7bdcdf58bdbd3029c61364a9bb4499e5.png)](https://i.stack.imgur.com/8mDxN.png)

3.  在代码中设置断点
4.  在 Visual Studio 中打开“服务器资源管理器”窗格，如果尚未使用 Microsoft 帐户连接到 Azure，请连接它。

5.  打开***Azure > App Service > [Resource Group]***然后右键单击您的 Web 应用程序并选择***Attach Debugger***。经过一些配置后，它应该附加并且（如果已配置）VS 将打开一个浏览器到您的 Azure Web 应用程序。

[![在此处输入图像描述](../Images/cb8120ddce1b124d6c6340ed60979ade.png)](https://i.stack.imgur.com/fCw2S.png)

[![在此处输入图像描述](../Images/2f2bea08f356e89f11bfb42ebc80a896.png)](https://i.stack.imgur.com/ydJx9.png)

6.  点击你的网站/API，你的断点应该被命中。

我收集的最后笔记：

*   我注意到有时菜单中缺少“附加调试器”选项。如果停止服务是一个选项，那么从菜单中选择停止（等待）然后选择开始就足以使该选项再次出现。可能还有其他修复。
*   [一些官方文档](https://docs.microsoft.com/en-us/azure/app-service-web/web-sites-dotnet-troubleshoot-visual-studio)
*   不要忘记将发布配置文件上的配置更改回发布，然后重新发布发布版本。不要在生产中使用调试。谢谢@Manfred。
*   [避免在断点处长时间停止](https://blogs.msdn.microsoft.com/benjaminperkins/2017/06/06/remote-debug-your-azure-app-service-2017-including-asp-net-core/)（谁能解释这可能会产生什么影响？）
*   [看来](https://blogs.msdn.microsoft.com/benjaminperkins/2017/06/06/remote-debug-your-azure-app-service-2017-including-asp-net-core/)48小时后，远程调试功能自动关闭（尚无法确认）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-07T16:51:18.580

[Scott Hanselman 最近在这里](http://www.hanselman.com/blog/StreamingDiagnosticsTraceLoggingFromTheAzureCommandLinePlusGlimpse.aspx)发表了关于此的博客。

这不是设置断点那么好，但是将记录的信息流式传输到控制台可以使调试的痛苦稍微减轻一些。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-12T06:02:14.110

Paul，从上面的一些建议中，这可能对您来说是一个进步：“Glimpse 就像 FireBug 客户端调试器，只是它在客户端用 JavaScript 实现，并在服务器端与 ASP.NET 挂钩。”

因此，虽然它不允许您设置断点，但至少您可以实时观察跟踪的发生，而不必筛选日志文件。

[http://www.hanselman.com/blog/NuGetPackageOfTheWeek5DebuggingASPNETMVCApplicationsWithGlimpse.aspx](http://www.hanselman.com/blog/NuGetPackageOfTheWeek5DebuggingASPNETMVCApplicationsWithGlimpse.aspx)

# grails - 指定的依赖定义编译无效

> ID：13079471
> 
> 赞同：0
> 
> 时间：2012-10-26T01:04:53.450
> 
> 标签：grails, spring-mvc, cloud-foundry

“指定的依赖定义编译 cloud-support 1.0.9 无效。” 是我尝试将 STS 与托管服务集成时遇到的错误。就像这个人一样，原来是装错了1.0.7的版本，现在装的是1.0.9而不是1.0.8；我在此处提到的两个文件中对其进行了更改：

[将 grails cloud-foundry 与我的 grails 应用程序集成](https://stackoverflow.com/questions/8907513/integrate-grails-cloud-foundry-with-my-grails-app)

我还以正确的顺序安装了它们，首先是支持，然后是代工厂。但仍然看到同样的错误。即使只是简单地输入“grails clean”也会产生错误。插件管理器正确了解版本

代工 1.2.1 / 支持 1.0.9

我也知道这个链接：http: [//www.icodeya.com/2012/05/deploying-grails-apps-on-cloudfoundry.html](http://www.icodeya.com/2012/05/deploying-grails-apps-on-cloudfoundry.html) 它没有答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T23:31:12.377

成功安装插件的步骤，create-app appname -> grails install-plugin cloud-foundry -> 将dependencies.groovy和plugin.xml改为[1.0.8,)。请试一试。

# netbeans - 在 NetBeans 6.5 的计算机上找不到 JDK

> ID：13079472
> 
> 赞同：29
> 
> 时间：2012-10-26T01:04:55.240
> 
> 标签：netbeans, java, netbeans6.5

打开 NetBeans 时收到以下消息。我已经安装了JDK，并在环境中设置了bin目录。接下来我可以做些什么来避免这个问题？顺便说一句，我使用的是 Windows 7 64 位。

![在此处输入图像描述](../Images/9638b0236d9aacf0f6f1c5791339eb25.png)

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2014-12-25T13:09:14.283

执行以下步骤来解决问题

1.  确保已安装 JDK。

2.  如果安装程序位于 CD 上，请将 Netbeans 6.5.1 安装程序的 EXE 文件复制到您的硬盘上。

3.  记下安装程序的位置。

4.  打开以管理员身份运行的命令提示符：转到开始按钮>所有程序>附件右键单击命令提示符选择以管理员身份运行

5.  在命令提示符中使用 cd 命令切换到包含安装程序的目录。

6.  执行以下命令以提取安装程序的内容：[注意：您可能需要更改安装程序的名称以匹配您拥有的名称。]

    **netbeans-6.5.1-ml-java-windows.exe --extract**

7.  执行以下命令手动执行安装程序：

    **java -jar bundle.jar**

您将在命令提示符窗口中看到快速滚动的输出片刻，然后安装程序窗口将出现以开始安装过程。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-10-26T01:29:22.727

我使用以下步骤来解决问题：

首先，确保

```
“Run this program in compatibality mode for: Windows XP (Service Pack 3)” and “Run this program as an administrator” are ENABLED. 
```

在命令提示符下运行

```
C:\Users\{yourusernamehere}\Documents\Downloads\netbeans-6.5-ml-windows.exe –-javahome "C:\Program Files (x86)\Java\jdk1.6.0_18" 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-10-26T01:16:02.277

我将首先仔细检查您是否安装了 JDK，而不仅仅是 JRE。很容易抓住错误的，甚至没有意识到。然后我会确保您的 JAVA_HOME 环境变量指向您的 JDK 安装目录，而不是 bin 目录。您可能希望将 bin 目录添加到 PATH 环境变量，但 Netbeans 更有可能查看 JAVA_HOME 环境变量。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-12-13T17:42:06.617

我遇到了同样的问题，不是很好。

1.  直接打开cmd

2.  cd 到您的 netbeans 安装文件所在的目录。

3.  在cmd中，写下整个setup文件的名字，并写上--javahome "address of jdk"

4.  点击回车，它一定会解决你的问题

例如，如果安装文件是：netbeans8.02.exe

JDK的路径是C:/program files/java/jdk9.01

然后运行命令，

netbeans8.02.exe --javahome "C:/program files/java/jdk9.01"

然后按回车！:-)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-02-07T19:26:51.553

转到cmd并输入以下命令：

> C:\Users{usernamehere}\Documents\Downloads\netbeans-{version}.exe --javahome "C:\Program Files (x86)\Java\jdk{version}"

在确保您已正确设置环境变量之前。如果它不起作用，请检查程序的兼容性或适当地重新安装 jdk 并再次设置环境并执行上述命令。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-10-26T01:15:12.780

您必须提供`JAVA_HOME`指向该`JDK`位置的环境变量，或者如它所说，您可以从命令行通过其参数传递`JDK`地址运行安装程序，如下所示：`-javahome`

```
C:> <NetBeans_Installer_Name> -javahome <JDK-PATH> 
```

您还必须确保安装的 JDK 是该程序的 Windows 64 位版本。这是 JDK6U37 的下载链接：http: [//download.oracle.com/otn-pub/java/jdk/6u37-b06/jdk-6u37-windows-x64.exe](http://download.oracle.com/otn-pub/java/jdk/6u37-b06/jdk-6u37-windows-x64.exe)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-03-19T01:19:35.053

**对于 netbeans 8.2**

1\. 首先以管理员身份运行命令。
2\. 使用**cd 'location to the downloads folder'**
设置下载文件夹的路径 3\. 使用**netbeans-8.2-windows.exe** --extract命令提取
4\. 运行**java -jar bundle.jar**
5\. 完成 :)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-12-13T02:29:29.943

当发生此类问题时，只需删除以前的路径设置并在环境变量中添加新路径。

新路径名 JAVA_HOME 路径“您的计算机路径”，不带 \bin

并使用 \bin 路径编辑路径变量。

无论版本是什么，netbeans 都可以正常工作。jdk 9 或更高版本。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-03-31T07:37:55.867

我有同样的问题，并通过这种方式解决：

1.  打开 CMD
2.  转到文件 netbeans.exe
3.  按 Shift 键 + 右键单击​​并复制为路径 [复制为路径](https://i.stack.imgur.com/vaTBf.png)
4.  在 CMD 上粘贴看起来像 C:\Users\unnamed>"C:\Users\unnamed\Downloads\Programs\netbeans-8.2-windows.exe"
5.  在 JDK 文件夹上写 --javahome 做同样的第 2 点
6.  写在 cmd 看起来像 C:\Users\unnamed>"C:\Users\unnamed\Downloads\Programs\netbeans-8.2-windows.exe" --javahome "C:\Program Files\Java\jdk-9.0.4"

7.  进入。好好享受。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-05-19T19:39:22.130

在**命令提示符**下执行以下两个命令：

`netbeans-6.5.1-windows.exe –extract` **//提取前的两个破折号**

```
java -jar bundle.jar 
```

第一个从exe中提取安装程序，而另一个执行安装程序。

根据此链接： http: [//fuzz-box.blogspot.com/2011/05/netbeans-65-jdk-not-found.html](http://fuzz-box.blogspot.com/2011/05/netbeans-65-jdk-not-found.html)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-05-05T09:47:42.410

设置 JAVA_HOME 和 PATH，以管理员权限打开命令行，在命令行中运行 >>netbeans-6.5.1-ml-windows.exe --extract，在命令行中运行 >>java -jar bundle.jar

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2014-08-20T16:32:49.867

在安装 NetBeans 8.0 时，这仍然是一个问题。要安装它，首先确认 JDK 安装正确。在我的机器上，它位于 C:\Program Files\Java\jdk1.8.0_11

然后，我可以通过在带网络的安全模式下重新启动计算机来安装 NetBeans 8.0。在 Safe Mode With Networking 下运行 NetBeans exe 安装文件时，它会提示您确认 Java JDK 目录的位置。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2015-02-17T10:11:49.150

1.  转到安装它的 net beans 文件夹。
2.  右键单击卸载图标并选择属性
3.  选择兼容性选项卡并单击复选框“以兼容模式运行此程序”
4.  应用更改
5.  在命令提示符下，运行以下命令：>uninstall.exe -javahome C:\YOUR_JRE_LOCATION

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2017-04-09T06:39:00.370

在命令提示符下写

```
C:>netbeans8.2-windows.exe -javahome"path of your jdk" -jrehome"path of your jre" 
```

netbeans 版本可能不同，因此请键入该名称，即如果有`netbeans 6.5`，则`netbeans6.5`使用`8.2`.

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2017-10-18T20:07:12.697

您只需要添加 JAVA_HOME 环境变量并提供您计算机上最新 JDK 文件夹的完整路径。

重新启动安装程序，它会工作。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2018-05-17T05:09:28.260

我今天在安装最新的 Java 10.0.1（在 oracle 官方网站上下载了 JDK）并下载了 NetBeans 8.2 版时遇到了这个错误。

我的 JDK 安装和 Cake 一样顺利。

但问题出在 Netbeans 安装中。当我尝试安装 Netbeans 时，显示的错误消息是：“JDK 未安装在您的系统上。尝试使用 Javahome 安装程序参数”。但没有任何帮助。

解决方案：

*   从他们的网站单独下载 JRE。
*   将 NetBeans 安装程序移至 c 以外的本地驱动器。
*   通过单击 exe 文件安装 JRE。
*   在环境变量中设置 JAVA_HOME、PATH。
*   立即安装 NetBeans。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2018-10-12T11:13:02.297

我在安装 NetBeans 时遇到了同样的问题，但我正确地完成了安装部分，您只需 1-> GO 并下载 java 链接的 JRE 文件 -> [https://www.oracle.com/technetwork/java/javase /downloads/jre8-downloads-2133155.html](https://www.oracle.com/technetwork/java/javase/downloads/jre8-downloads-2133155.html)

2-> 安装 JRE 后，请转到安装 JRE 的目录 3-> 并从 JRE 文件夹中复制所有文件 4-> 并粘贴到 jdk 文件夹中，但 5-> 在复制文件时确保在弹出任何提示时替换并复制文件

6->然后打开命令提示符（cmd）并简单地输入 7->netbeans-8.2-windows.exe --javahome "path-of-your-jdk-file"

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2018-11-27T08:06:49.867

对于 Netbeans 9.0

1) 在 etc 文件夹中使用记事本打开 netbeans.conf 文件

2）搜索“netbeans_jdkhome”行并通过从开头删除'#'取消注释

3）找到你的jdk并替换文件路径

例如

[![在此处输入图像描述](../Images/68c63bec0ffa243a65d441d7e269d701.png)](https://i.stack.imgur.com/EgQMs.png)

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2019-02-06T10:54:54.873

> 我已经安装了JDK

你没有指定版本。我觉得不是 6 也不是 5。

JDK 6 是 NetBeans 6.0 - 6.9 开发时的最新版本。因此，**它们需要 JDK 6（或 JDK 5）**并且不能在 JDK 7 或更高版本上运行。

[下载 JDK 6](https://www.oracle.com/technetwork/java/javase/downloads/java-ee-sdk-6u3-jdk-6u29-downloads-523388.html)
[下载最新版本的 NetBeans](https://netbeans.apache.org/download/index.html)

* * *

## 回答 #20

> 赞同：-1
> 
> 时间：2017-12-23T06:05:37.620

我发现，正确的做法是："C:\Program Files (x86)\netbeans-8.0.2-windows.exe" --javahome "C:\Program Files(x86)\Java\jdk1\. 7.0_51"

1.  首先，必须将 NetBeans 的设置保存在您的硬盘上
2.  转到您的设置所在的位置，单击属性并复制路径。
3.  在其中添加两个反斜杠并将其放在双引号中，如下所示：“C:\Program Files (x86)\netbeans-8.0.2-windows.exe”
4.  然后转到您的 jdk 所在的文件夹，单击属性，复制路径，在必要的地方加上双反斜杠，然后将其放在双引号中：“C:\Program Files(x86)\Java\jdk1.7.0_51”
5.  然后只需按照给出的第一个链接的格式进行安装即可

注意：在命令提示符下运行此链接

# clojure - 根据 clojure 中的地图值拆分地图集合

> ID：13079475
> 
> 赞同：2
> 
> 时间：2012-10-26T01:05:06.340
> 
> 标签：clojure, functional-programming

我正在尝试建立一个系统，该系统将根据提供的物品数量和有多少行打印一定数量的页面。

我基本上有一个带有几个字段的地图列表，包括一个可能很长并且跨越打印机上的多行的名称字段。我有一个功能可以辨别它将占用多少行，所以这没问题。

主要问题是我想在产品集合达到 30 行时拆分（好吧，分区，如果你使用 clojure 的术语），所以我可以开始另一个页面。有没有办法遍历集合，计算出最多 30 行的总行（如果有一个多行产品，否则会超过 30 行）然后拆分它？

我想转这个

```
[{:qty 2 :size "M" :product "Testing 1 2 3"}
 {:qty 1 :size "S" :product "Hello there world"}
 {:qty 12 :size "XS" :product "Some really long product name just to test"}
 {:qty 932 :size "L" :product "More longer names to play with"}
 {:qty 1 :size "M" :product "Another product name"}
 {:qty 1242 :size "XS" :product "This is just an obscenely long product name that I am hoping will spill over on to the next lines"}
 {:qty 2 :size "M" :product "Testing 1 2 3"}
 {:qty 1 :size "S" :product "Hello there world"}
 {:qty 12 :size "XS" :product "Some really long product name just to test"}
 {:qty 932 :size "L" :product "More longer names to play with"}
 {:qty 1 :size "M" :product "Another product name"}
 {:qty 1242 :size "XS" :product "This is just an obscenely long product name that I am hoping will spill over on to the next lines"}
 {:qty 2 :size "M" :product "Testing 1 2 3"}
 {:qty 1 :size "S" :product "Hello there world"}
 {:qty 12 :size "XS" :product "Some really long product name just to test"}
 {:qty 932 :size "L" :product "More longer names to play with"}
 {:qty 1 :size "M" :product "Another product name"}
 {:qty 1242 :size "XS" :product "This is just an obscenely long product name that I am hoping will spill over on to the next lines"}] 
```

进入这个

```
[[{:qty 2 :size "M" :product "Testing 1 2 3"}
  {:qty 1 :size "S" :product "Hello there world"}
  {:qty 12 :size "XS" :product "Some really long product name just to test"}
  {:qty 932 :size "L" :product "More longer names to play with"}
  {:qty 1 :size "M" :product "Another product name"}
  {:qty 1242 :size "XS" :product "This is just an obscenely long product name that I am hoping will spill over on to the next lines"}
  {:qty 2 :size "M" :product "Testing 1 2 3"}
  {:qty 1 :size "S" :product "Hello there world"}
  {:qty 12 :size "XS" :product "Some really long product name just to test"}
  {:qty 932 :size "L" :product "More longer names to play with"}
  {:qty 1 :size "M" :product "Another product name"}]
 [{:qty 1242 :size "XS" :product "This is just an obscenely long product name that I am hoping will spill over on to the next lines"}
  {:qty 2 :size "M" :product "Testing 1 2 3"}
  {:qty 1 :size "S" :product "Hello there world"}
  {:qty 12 :size "XS" :product "Some really long product name just to test"}
  {:qty 932 :size "L" :product "More longer names to play with"}
  {:qty 1 :size "M" :product "Another product name"}
  {:qty 1242 :size "XS" :product "This is just an obscenely long product name that I am hoping will spill over on to the next lines"}]] 
```

产品名称的最大行长为 25 个字符

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T02:03:17.803

我会给你一个类似问题的答案，你应该能够从那里推断出你的问题的答案。

* * *

## 问题：

如何将字符串序列分组为相邻字符串的子组，每个子组中最多*n 个*字符？

## 解决方案：

```
;; Data
(def input
  ["asdjasjdklasj" "dkjfsj" "dfkjsj" "kfjskd" "skdjfsjkdjdfs"
   "dfjskd" "wiuennsdw" "dskjdfsdjwed" "wiuf" "mncxnejs" "fjsjd"
   "dkjsf" "djsk" "djf" "erjfdkjcxzasd" "sjkja"])

;; Counting function
(def char-count count)

;; Partition function
(defn group-to-size [size coll]
  (lazy-seq
    (loop [[x & xs' :as xs] coll, n 0, acc []]
      (if (nil? x) (cons acc nil)
        (let [n' (+ n (char-count x))]
          (if (<= n' size)
            (recur xs' n' (conj acc x))
            (cons acc (group-to-size size xs))))))))

;; Sample grouping by 15 characters
(group-to-size 15 input)

; => (["asdjasjdklasj"]
;     ["dkjfsj" "dfkjsj"]
;     ["kfjskd"]
;     ["skdjfsjkdjdfs"]
;     ["dfjskd" "wiuennsdw"]
;     ["dskjdfsdjwed"]
;     ["wiuf" "mncxnejs"]
;     ["fjsjd" "dkjsf" "djsk"]
;     ["djf"]
;     ["erjfdkjcxzasd"]
;     ["sjkja"])

;; Resulting character counts per group for the above sample
(->> (group-to-size 15 input)
     (map (comp count (partial apply concat))))

; => (13 12 6 13 15 12 12 14 3 13 5) 
```

* * *

您不想计算字符串中的字符数，而是要计算产品描述中的行数。您计算每个产品行数的函数相当于`char-count`我上面的代码。我想你应该能够从这里弄清楚。

**注意：**此解决方案具有*懒惰*的额外好处。这意味着如果您最终只想使用第一个分区，它不会打扰对整个字符串集进行分区。在您的情况下，如果用户决定只查看前几页，它将转化为不分区整个库存。

# objective-c - 自定义协议未在 Xcode 中调用，返回 0

> ID：13079476
> 
> 赞同：1
> 
> 时间：2012-10-26T01:05:05.910
> 
> 标签：objective-c, xcode, delegates, protocols

几天来我一直在为此苦苦挣扎——我有一个自定义协议，它应该从我的一个模型（通过它的控制器）获取数据到绘制它的视图。

这是我的做法 - 一步一步：

在图形视图中，我声明协议如下：

```
@class GraphView;

@protocol GraphViewDataSource <NSObject>

-(CGFloat)yValueForGraphView:(GraphView *)sender usingXval:(CGFloat)xVal;

@end 
```

然后我在 view.h 中声明一个属性

```
@interface GraphView : UIView

@property (nonatomic, weak) IBOutlet id <GraphViewDataSource> dataSource;

@end 
```

我在 view.m 中综合了属性：

```
@synthesize dataSource=_dataSource; 
```

然后在我的drawRect中，我调用这个方法从另一个控制器的模型中带回一个CGFloat：

```
-(void) drawRect:(CGRect)rect
{
//context stuff, setting line width, etc

CGPoint startPoint=CGPointMake(5.0, 6.0);

NSLog(@"first, y value is: %f", startPoint.y);

startPoint.y=[self.dataSource yValueForGraphView:self usingXval:startPoint.x]; //accessing delegate via property

NSLog(@"now the y value now is: %f", startPoint.y);

//other code..
} 
```

现在在我的另一个视图控制器中，我正在导入 view.h 文件并声明它符合协议：

```
#import "GraphView.h"

@interface CalculatorViewController () <GraphViewDataSource> 
```

为 GraphView 创建一个属性：

```
@property (nonatomic, strong) GraphView *theGraphView; 
```

合成：

```
@synthesize theGraphView=_theGraphView; 
```

现在在设置器中，我将当前控制器设置为数据源（也称为委托）：

```
-(void) setTheGraphView:(GraphView *)theGraphView
{
    _theGraphView=theGraphView;
    self.theGraphView.dataSource=self;

} 
```

我还将控制器设置为 prepareForSegue 中的委托（我在寻找修复程序时尝试过的事情之一）：

```
-(void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([segue.identifier isEqualToString:@"GraphViewController"])
    {
        self.theGraphView.dataSource=self;
    }
} 
```

最后，我实现了所需的方法：

```
-(CGFloat)yValueForGraphView:(GraphView *)sender usingXval:(CGFloat)xVal
{
    CGFloat test=51.40; //just to test
    return test;
} 
```

我在graphView的drawRect中从我的测试NSLog得到的输出是：

```
2012-10-25 20:56:36.352 ..[2494:c07] first, y value is: 6.000000
2012-10-25 20:56:36.354 ..[2494:c07] now the y value now is: 0.000000 
```

这应该通过数据源返回 51.40，但事实并非如此。我不知道为什么！让我发疯，似乎我做的一切都是正确的。但是委托方法没有被调用。

我错过了什么愚蠢的事情吗？

* * *

附加信息 - 控制器和 GraphView 图表：

![图形计算器](../Images/0cfb77e0831fa8ff8b4d240791b196ea.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T22:53:49.273

图表有帮助！

您需要做的是在您的 GraphViewController 上有一个方法，该方法可以公开您的自定义 GraphView，或者将委托设置在其中。在 segue 上，您需要访问目标视图控制器（GraphViewController），然后直接在 GraphView 中设置委托或将 self 传递给 GraphViewController 并让它设置委托。

在 CalculatorViewController 拥有的 GraphView 中设置委托不会影响 GraphViewController 中的 GraphView，除非 GraphView 是单例，或者被传递到 GraphViewController。

假设您的 GraphViewController 公开了一个属性，即它包含的 GraphView，则 CalculatorViewController 中的 segue 应该类似于...

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    // Ensure the identifier string matches the segue name from the Storyboard
    if ([segue.identifier isEqualToString:@"GraphViewControllerSegue"])
    {
        // Change this to whatever class is the destination class of the segue
        GraphViewController *graphViewController = (GraphViewController *)[segue destinationViewController];
        self.graphView.delegate = self;
        // Pass the GraphView with the delegate set into the GraphViewController
        graphViewController.graphView = self.graphView;
    }
} 
```

它是按钮与动作的直接分隔这一事实是无关紧要的。如果你在 Storyboard/XIB 中给了 segue 一个标识符，那么`prepareForSegue:sender:`它就会被调用，我们可以确定调用的是什么 segue。

如果您的 GraphViewController 中没有用于 GraphView 的公共属性...

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([segue.identifier isEqualToString:@"GraphViewControllerSegue"])
    {
        // Change this to whatever class is the destination class of the segue
        GraphViewController *graphViewController = (GraphViewController *)[segue destinationViewController];
        [graphViewController setGraphViewDelegate:self];
    }
} 
```

并且您在 GraphViewController 实现中需要以下内容。

```
- (void)setGraphViewDelegate:(id)graphViewDelegate {
    // Set the delegate directly in the ivar
    _graphView.delegate = graphViewDelegate;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T00:42:39.743

我解决这个问题的方法是链接一些代表，我用以下方法`GraphView`声明：`protocol` `GraphViewDelegate`

```
-(float)ordinateForAbscissa:(float)abscissa forGraph:(GraphView *)requestor;
-(float)scaleForGraph(GraphView *)requestor; 
```

该协议由 实现，并且当控制器加载时`GraphViewController`，他将自己设置`delegate`为。`GraphView``viewDidLoad`

现在我有另一个委托，`CalculatorControllerDelegate`它`yCoordinateForX`是从`ordinateForAbscissa`. `CalculatorViewController`实现此协议，并在 segueing 将自己设置为`GraphViewController`的委托时。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T22:55:45.103

这是最终的解决方案：

GraphViewController 必须首先设置 GraphView 的委托。那是因为 graphView 连接到 GraphViewController（作为自定义 UIView），并且我发现无法从其他类设置 graphView 的特定实例不可用。

将信息获取到自定义视图（在我的例子中是 graphView）的方法是在自定义视图的控制器中设置另一个协议。然后将另一个类设置为该控制器的委托，并首先将数据传递给控制器​​，然后再传递给自定义视图。

一件非常重要的事情是，在使用情节提要时，控制器的委托应在 prepareForSegue 中设置（如 reckerbh 所述）。在我的例子中，CalculatorViewController 连接到 GraphViewController 所以我的 perpareForSegue 看起来像这样：

```
-(void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([segue.identifier isEqualToString:@"ShowGraph"])
    {
        GraphViewController *gvc=[segue destinationViewController];
        gvc.yValueSource=self;
    }
} 
```

请注意，我正在通过 [segue destinationViewController] 创建指向 GraphViewController 现有实例的新指针。我不是通过 alloc init 创建一个新的，因为它不会连接到我已经拥有的并且完全不相关。

所以我想这里的主要建议是确保在设置委托时使用相同的实例。如果您无法访问该实例，请使用双重授权（如果必须的话，我猜甚至可以使用三重授权）。

# magento - 如何在 Magento Checkout Success.phtml 1.7 上提取客户电子邮件

> ID：13079480
> 
> 赞同：4
> 
> 时间：2012-10-26T01:05:48.167
> 
> 标签：magento, magento-1.7

我在网上尝试了各种解决方案，但无济于事。我认为它应该是这样的：

```
<?php
$order->getBillingAddress()->getEmail();
?>

An email confirmation was sent to: <?php echo $order->getEmail ?> 
```

我可以通过以下方式显示订单 ID：

```
<?php echo $this->getOrderId() ?> 
```

如果您有建议，请尽可能具体，因为我绝对是新手。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-26T01:20:36.940

尝试将此添加到 Success.phtml

```
<?php
   $order = Mage::getModel('sales/order')->loadByIncrementId($this->getOrderId());
   echo $order->getCustomerEmail();
?> 
```

阅读更多：[在 Magento 中获取订单增量 ID](https://stackoverflow.com/questions/2195743/get-order-increment-id-in-magento)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T12:02:56.850

尝试使用此代码

```
$_customerId = Mage::getSingleton('customer/session')->getCustomerId();

$lastOrderId = Mage::getSingleton('checkout/session')->getLastOrderId();

$order = Mage::getSingleton('sales/order'); 

$order->load($lastOrderId); 
```

然后做

```
foreach($order as $_order){
    echo $_order->getCustomerEmail();
} 
```

希望这可以帮助

# c# - 具有 int 和 null 初始值的淘汰赛 IE 订阅问题

> ID：13079481
> 
> 赞同：1
> 
> 时间：2012-10-26T01:05:50.450
> 
> 标签：c#, .net, knockout.js, knockout-mapping-plugin

这是一个[演示它的jsfiddle](http://jsfiddle.net/vREsC/) ...

```
dirtyFlag = function(root) {
    var _isDirty = ko.observable(false);
    root.isFilthy = function() {
        return _isDirty();
    };
    var result = ko.computed(function() {
        if (!_isDirty()) {
            ko.toJS(root);
        }
        return _isDirty();
    });

    result.subscribe(function() {
        if (!_isDirty()) {
            _isDirty(true);
            alert('dirty!');
        }
    });

    return result;
};

var viewModel = {
    dataObject: ko.observable()
};
var data = {
    "UserName": "TheName",
    "UserID": 2,
    "Notes": "Yeah!",
    "email": "booya@test.x"
};

viewModel.dataObject = ko.mapping.fromJS(data);
dirtyFlag(viewModel.dataObject);
ko.applyBindings(viewModel); 
```

如果您查看数据模型，UserID 是一个 int，模型上有一个订阅，以便在发生更改时设置一个“脏”标志，并且我抛出了一个警报，以便您确切地知道它何时被标记为这样。

输入包含 id 的输入字段，不要输入，不要更改它，只需单击下一个框或选项卡即可。

如果您使用 Firefox、Chrome 等访问这个小提琴，那么它的行为与您预期的一样，没有任何反应。

现在用 IE 访问它，为什么离开 UserID 字段后它会将模型标记为脏？如果其中一个值为 null 而不是 int，则仅在 IE 中具有相同效果（将电子邮件更改为 null 以查看）

在实际场景中，我使用已序列化为 js 的 ac# 对象，并且所有工作都 100% 正常，直到我手动订阅，并且这仅在 IE 中发生（当前运行 IE9，但在各种模式/仿真下尝试过）旧版本）

任何见解将不胜感激......谢谢！

# java - 自动化测试的意义

> ID：13079482
> 
> 赞同：0
> 
> 时间：2012-10-26T01:05:55.250
> 
> 标签：java

我真的很了解什么是从文件中读取数据并找到总和、平均值和最小值的简单程序的自动化测试我觉得它有一个明显的答案，因为我正在考虑测试用例，但我不知道它是什么方法。任何人都可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T02:21:44.633

> 我真的很了解什么是从文件中读取数据并找到总和、平均值和最小值的简单程序的自动化测试我觉得它有一个明显的答案，因为我正在考虑测试用例，但我不知道它是什么方法。

好的……深呼吸。

自动化测试是可以在您的代码上自动运行的测试。通过自动化测试，您可以确保：

*   在需要时运行测试很容易（即不是劳动密集型），
*   *所有*的测试都可以运行......不仅仅是你记得做的那些，而且
*   测试是可重复的。

（另一种测试是您手动运行具有不同输入、不同配置、不同场景的程序。）

有不同种类的自动化测试。

*   Java 程序最简单的类型是使用 JUnit（或类似的单元测试框架）进行单元测试。单元测试的思想是为应用程序的各个组件（例如方法和类）和组件的程序集编写行为测试。

*   另一种测试侧重于整个系统。这称为系统或集成测试。在这里，您在整个应用程序的能力范围内选择一些任务，使用脚本（或其他东西）让它执行该任务，并检查结果（例如输出、数据库更新等）是否正确。

* * *

在您的情况下，听起来您的应用程序可能对于单元测试来说太简单了。但无论哪种方式，您需要做的是安排一些 Java 代码（或 shell 一些其他类型的脚本）：

*   使用已知的输入文件运行应用程序，
*   捕获输出，
*   将输出与输入的已知“正确”结果进行比较。

您还需要确保您的测试检查“边缘”案例；例如空输入文件、包含无效数据的输入文件等等。

# asp.net-web-api - 无法访问 HttpRequestMessageExtensions

> ID：13079483
> 
> 赞同：5
> 
> 时间：2012-10-26T01:06:09.897
> 
> 标签：asp.net-web-api

这让我发疯——我在任何地方都找不到任何文档，说明我可能缺少访问该课程的任何特殊内容。

这表示 HttpRequestMessage 没有名为 GetQueryNameValuePairs 的扩展方法：

```
var token = request.GetQueryNameValuePairs().SingleOrDefault(x => x.Key == OAuthConstants.AuthorzationParam).Value; 
```

以下是我的用法：

```
using System;
using System.Linq;
using System.Net;
using System.Net.Http;
using System.Web.Http;
using GoodBreaksClasses;
using GoodBreaksTypes;
using Newtonsoft.Json;
using OAuth2.Mvc;
using System.Web.Http.ValueProviders;
using System.Net.Http.Formatting; 
```

其中一些我不需要，但我试图找到适合我的库；我知道 System.Web.Http 应该足够了......

有没有人见过这个？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T02:18:14.323

终于想通了。不得不更新WebApi，我的版本太旧了。这是我所做的更新：将“Microsoft.AspNet.WebApi”从版本“4.0.20505.0”更新为“4.0.20710.0”。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-03-03T19:20:09.757

从 Nuget 包安装

```
Microsoft Asp.Net WebApi 2.2 Client Libraries
Microsoft Asp.Net WebApi 2.2 Core Libraries 
```

安装后，您可以创建响应，例如

```
public HttpResponseMessage Call(HttpRequestMessage RequestMessage)
    {
        return RequestMessage.CreateResponse(HttpStatusCode.OK, "Your Data Here"); 
    } 
```

# active-directory - Active Directory 用户类的 E-mail-Addresses 属性与 Proxy-Address 属性之间的区别

> ID：13079487
> 
> 赞同：4
> 
> 时间：2012-10-26T01:06:42.337
> 
> 标签：active-directory, exchange-server

我使用 Proxy-Address 属性作为确定用户电子邮件地址的主要方法（我只关心以“SMTP：”或“smtp：”为前缀的地址，此外，我使用以大写为前缀的地址SMTP 来确定主地址 - 这不是 100% 可靠的，但它是现有系统的限制）。

我被告知这个属性（Ldap-Display-Name = mail, CN = E-mail-Addresses）可以用作后备，以确定用户的电子邮件地址（如果在 Proxy-Address 下找不到 smtp 地址属性），但我找不到此属性的多个地址的示例。

MSDN 文档指出 E-mail-Address 属性应该是`"the list of email addresses for a contact"`. 在我发现的所有示例中，只有一个地址，并且没有以“SMTP：”或“smtp：”为前缀，因此我不确定如何确定主电子邮件地址，除非实际情况是邮件属性应该只有一个地址？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T10:33:09.387

您可能会发现以下内容很有用，来自[http://blogs.technet.com/b/exchange/archive/2005/01/10/350132.aspx](http://blogs.technet.com/b/exchange/archive/2005/01/10/350132.aspx)

> 电子邮件地址属性
> 
> Exchange 在以下属性中存储和使用有关收件人电子邮件地址的信息：proxyAddresses
> 
> 这是保存电子邮件地址信息的主要属性。当您在 Outlook 中打开收件人的属性并查看“电子邮件地址”选项卡时，您正在查看此属性。这是一个多值字符串，包含代表收件人的所有地址。每个值必须具有以下格式：
> 
> ```
>  type:address 
> ```
> 
> 例如：
> 
> ```
>  SMTP:nospam@online.microsoft.com 
> ```
> 
> 当类型为大写字母时，该地址被认为是该类型的主地址，并用作该收件人的默认回复地址。当类型为小写字母时，该地址被视为辅助地址，用于在电子邮件传递过程中解析地址，允许同一收件人接收定向到不同电子邮件地址的电子邮件。

# ruby-on-rails - 如何实现在项目列表中动态追加新项目？

> ID：13079488
> 
> 赞同：0
> 
> 时间：2012-10-26T01:06:46.433
> 
> 标签：ruby-on-rails, ruby

我有一个表格用于`@item_list`：

```
<%= form_for @item_list do |f|%>
   some meta-info to describe item_list
<%end%> 
```

而且我还有一个渲染部分称为`_item.html.erb`：

```
<%= form_for @item_list.item do |f|%>
   some meta-info to describe item_list.item
<%end%> 
```

在我的索引视图中，我有一个名为 的按钮`add item`，它将调用一个 jquery ajax 函数来将此部分附加到一个 div 块，以及另一个名为 的按钮`done`，我希望它一次存储所有表单中的所有信息。

当我尝试保存这些时，参数不包含项目信息。`item_list`我想那是因为我在尝试添加新项目时没有在后端更新。我希望你能给我一些关于这方面的想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T01:57:56.213

您将要为此设置一个嵌套表单。stackoverflow 上还有很多其他关于嵌套表单的问题，但要点如下：

*   在你的控制器中创建一个新的空对象来填充一个`@item_list.items.build`假设 ItemList has_many Items 的项目
*   添加`accepts_nested_attributes_for :item`您的项目模型
*   也添加`attr_accessible :items_attributes`您的 Item 模型
*   您将需要将表单构建器传递给部分，所以是这样的：

    ```
    _form.html.erb

    <%= form_for @item_list do |f| %>
      <% @item_list.items.each do |item| %>
         <%= render 'item', :f => f %>
      <% end %>
    <% end %>

    _item.html.erb

    <%= f.fields_for :items, item do |item_form| %>
        <%= item_form.text_field ... %>
    <% end %> 
    ```

如果您需要更多细节，请向我们提供更多代码，包括您的模型与关系。在这一点上，我将把 JavaScript 留给你。

# json - 如何使用 JQuery Mobile 嵌套列表显示嵌套的 JSON 字符串？

> ID：13079491
> 
> 赞同：3
> 
> 时间：2012-10-26T01:07:18.213
> 
> 标签：json, mobile, jquery-mobile, nested-lists

我发现了很多可以在桌面上显示嵌套 JSON 的插件，比如 jTree。它们在完整的桌面环境中运行良好，但在手机上运行时，会出现一些问题。一般来说，这条线有时太长，或者简而言之，它很丑。

所以，我想在 jQuery Mobile 嵌套列表中显示它（比如我们的手机文件管理器。）

是否有一些 jQuery Mobile 插件或其他一些我可以用来实现此目的的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T19:59:33.407

JQuery Mobile 1.2 的标准版本具有嵌套列表（类似于在智能手机上浏览文件管理器，即单击目录，它会显示更多目录和文件）

[http://jquerymobile.com/demos/1.2.0/docs/lists/lists-nested.html](http://jquerymobile.com/demos/1.2.0/docs/lists/lists-nested.html)

**通过服务器端脚本**

您可以创建一个脚本页面，将 JSON 节点作为参数动态加载到`$.mobile.changePage()`. 您应该能够从中创建树的当前视图。

**通过 Javascript DOM**

如果您通过使用 javascript 更新 DOM 来执行此操作，我相信在您使用 JSON 树的当前视图更新 DOM 之后，您必须运行`$('#mylist').listview('refresh')`以更新样式。

# c# - 神秘的 Win32Exception：下断点时不抛出

> ID：13079500
> 
> 赞同：1
> 
> 时间：2012-10-26T01:09:49.610
> 
> 标签：c#, visual-studio-2012

在我的代码中发现了一个“神秘”的行为。简而言之，重点是

*   有断点的行没有断点就*不能*工作
*   它与特权无关（不像很多关于“Win32Exception”的问题）

这里报告了一个有点类似的症状：[MSBuild Script gets "Win32Exception: The system cannot find the File Specified"](https://stackoverflow.com/questions/11872111/msbuild-script-gets-win32exception-the-system-cannot-find-the-file-specified) ...因为两者都与*调试*过程有关。（不过，我不确定这是否与我的问题有关。）

我正在写一个代码

1.  生成文本格式的直方图
2.  使用“System.Diagnostics.Process.Start”启动“gnuplot”以绘制生成的直方图
3.  也使用 'Process.Start("generatedPlot.png") 打开由 gnuplot 生成的图像文件。

1,2 似乎执行成功了，因为**我在工作目录中得到了一个png图像。**

但是，尽管存在绘图图像，*但当*我尝试使用

```
void GeneratePlot()
{
  // generate a png image called 'outputPath' with console 'gnuplot.exe'
  MyClass.gnuplot(dataFilePath,outputPath);
  MyClass.OpenFile(outputPath);
} 
```

OpenFile 被简单地定义为

```
static void OpenFile(string fileToOpen)
{
  Process.Start(fileToOpen);  // this throws 'Win32Exception'  ...(*)
} 
```

神秘的事情就在这里：为了调试这个问题，我**在 (*) 处设置了一个断点**。然后**不再抛出异常！**

（注意：由于绘图图像**创建成功**，第二次运行相同的'fileToOpen'不会出现异常。因此，*请确保在调试前删除生成的绘图图像。*）

当然，我设法找到了一种方法，而不是在那里放置断点。我所做的只是将 MyClass.gnuplot 和 MyClass.OpenFile 的执行分开：

```
void GeneratePlot()
{
  // some code
  MyClass.gnuplot(dataFilePath, outputPath);
}

void button1_Click(object sender, EventArgs e)
{
  MyClass.OpenFile(outputPath);
} 
```

执行“GeneratePlot()”后，点击“button1”。 *这次它显示的是png图像！*

以防万一，我编写了这样的代码来创建 png 绘图图像：（它单独工作正常！）

```
static void gnuplot(string dataFilePath, string outputPath)
{
  Process p = new Process();
  p.StartInfo.FileName = \\path\\to\\gnuplot.exe;
  p.StartInfo.RedirectStandardInput = true;
  p.StartInfo.WorkingDirectory = Directory.GetWorkingDirectory();
  // some other StartInfo setting
  p.Start();

  // execute gnuplot with the following
  StreamWriter sw = new StreamWriter(p.StandardInput);
  sw.WriteLine("set terminal \"png\"");
  sw.WriteLine("set output " + outputPath);
  sw.WriteLine("plot '{0}'",dataFilePath);
} 
```

我很好奇为什么会发生这种情况。你能给我建议吗？非常感谢您提前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T04:19:39.333

在 gnuplot 创建和写入文件的时间与您尝试在自己的进程中打开文件的时间之间可能存在竞争条件。我敢打赌，当您在调试器中运行它时，到断点被击中时已经过去了足够的时间，gnuplot 进程已经关闭了输出文件。

要解决这个问题，您可以在发送 plot 命令后等待一段时间，或者更好的是，等待 gnuplot 进程退出。

```
static void gnuplot(string dataFilePath, string outputPath)
{
  Process p = new Process();
  p.StartInfo.FileName = \\path\\to\\gnuplot.exe;
  p.StartInfo.RedirectStandardInput = true;
  p.StartInfo.WorkingDirectory = Directory.GetWorkingDirectory();
  // some other StartInfo setting
  p.Start();

  // execute gnuplot with the following
  StreamWriter sw = new StreamWriter(p.StandardInput);
  sw.WriteLine("set terminal \"png\"");
  sw.WriteLine("set output " + outputPath);
  sw.WriteLine("plot '{0}'",dataFilePath);

  // ----> wait for gnuplot to exit before returning
  // (presumes that gnuplot exits shortly after executing the plot command)
  p.WaitForExit();
} 
```

如果`p.WaitForExit();`语句不起作用（即 gnuplot 进程在执行`plot`命令后没有退出），请尝试`Thread.Sleep(TimeSpan.FromSeconds(1.0));`（或其他一段时间）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T04:54:41.360

我同意门罗的观点，这是由于比赛条件造成的。除了他推荐的内容外，我建议将您的 OpenFile 方法更改为：

```
if (System.IO.File.Exists(fileToOpen))
{
    Process.Start(fileToOpen);
}
else
{
    // handle missing file scenario
} 
```

这样，如果由于任何其他原因未生成图像文件，您也将被覆盖。

# c# - facebook c# sdk 代理设置

> ID：13079508
> 
> 赞同：2
> 
> 时间：2012-10-26T01:10:48.743
> 
> 标签：c#, facebook-javascript-sdk, facebook-c#-sdk, system.net.httpwebrequest

我一直在尝试为我的 facebook 应用程序添加代理设置选项。

我正在使用最新的 C# SDK 并使用 SDK 中的示例代码进行测试。我已经设置了一个代理服务器进行测试，当我使用 http 请求数据时，我看到结果数据正确返回。（代理服务器，提供 uri 的端口）

但不知何故，当我使用 facebook API 进行测试时，虽然我看到登录窗口正确弹出，但我没有看到代理服务器端的任何日志更改。

这是我正在使用的代码

```
 public FacebookLoginDialog(FacebookClient fb, string appId, string[] extendedPermissions)
    {
        if (fb == null)
            throw new ArgumentNullException("fb");
        if (string.IsNullOrWhiteSpace(appId))
            throw new ArgumentNullException("appId");

        _fb = fb;

        _fb.HttpWebRequestFactory = uri =>
        {
            var request = new HttpWebRequestWrapper((HttpWebRequest)WebRequest.Create(uri));
            MessageBox.Show("called");
            request.Proxy = new System.Net.WebProxy("10.0.1.14", 808); // normal .net IWebProxy
            return request;
        };

        //request.Credentials = new NetworkCredential("username", "password", "domain");
        _loginUrl = GenerateLoginUrl(appId, extendedPermissions);

        InitializeComponent();
    } 
```

请给我一些光。

# php - 如何诊断此 PHP 分段错误？

> ID：13079513
> 
> 赞同：30
> 
> 时间：2012-10-26T01:11:40.850
> 
> 标签：php, segmentation-fault, pear, mail-queue

我正在运行导致分段错误的命令行 PHP 作业。这项工作已经工作了很长时间，但它处理的是通过电子邮件发送的内容。显然这封电子邮件中有一些东西破坏了它，但我不知道是什么。如果我把核心文件放在gdb中，那真的没有帮助：

```
$ gdb /usr/local/bin/php core.20381 
GNU gdb (GDB) 7.1-ubuntu
Copyright (C) 2010 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.  Type "show copying"
and "show warranty" for details.
This GDB was configured as "x86_64-linux-gnu".
For bug reporting instructions, please see:
<http://www.gnu.org/software/gdb/bugs/>...
Reading symbols from /usr/local/bin/php...done.
[New Thread 20381]

warning: Can't read pathname for load map: Input/output error.
Reading symbols from /lib/libcrypt.so.1...(no debugging symbols found)...done.
Loaded symbols for /lib/libcrypt.so.1
Reading symbols from /lib/librt.so.1...(no debugging symbols found)...done.
Loaded symbols for /lib/librt.so.1
Reading symbols from /usr/lib/libmysqlclient_r.so.15...(no debugging symbols found)...done.
Loaded symbols for /usr/lib/libmysqlclient_r.so.15
Reading symbols from /lib/libpthread.so.0...(no debugging symbols found)...done.
Loaded symbols for /lib/libpthread.so.0
Reading symbols from /lib/libz.so.1...(no debugging symbols found)...done.
Loaded symbols for /lib/libz.so.1
Reading symbols from /usr/lib/libmcrypt.so.4...(no debugging symbols found)...done.
Loaded symbols for /usr/lib/libmcrypt.so.4
Reading symbols from /usr/lib/libltdl.so.7...(no debugging symbols found)...done.
Loaded symbols for /usr/lib/libltdl.so.7
Reading symbols from /lib/libpng12.so.0...(no debugging symbols found)...done.
Loaded symbols for /lib/libpng12.so.0
Reading symbols from /lib/libm.so.6...(no debugging symbols found)...done.
Loaded symbols for /lib/libm.so.6
Reading symbols from /lib/libdl.so.2...(no debugging symbols found)...done.
Loaded symbols for /lib/libdl.so.2
Reading symbols from /lib/libnsl.so.1...(no debugging symbols found)...done.
Loaded symbols for /lib/libnsl.so.1
Reading symbols from /usr/lib/libcurl-gnutls.so.4...(no debugging symbols found)...done.
Loaded symbols for /usr/lib/libcurl-gnutls.so.4
Reading symbols from /usr/lib/libxml2.so.2...(no debugging symbols found)...done.
Loaded symbols for /usr/lib/libxml2.so.2
Reading symbols from /lib/libc.so.6...(no debugging symbols found)...done.
Loaded symbols for /lib/libc.so.6
Reading symbols from /lib/libresolv.so.2...(no debugging symbols found)...done.
Loaded symbols for /lib/libresolv.so.2
Reading symbols from /lib64/ld-linux-x86-64.so.2...(no debugging symbols found)...done.
Loaded symbols for /lib64/ld-linux-x86-64.so.2
Reading symbols from /usr/lib/libidn.so.11...(no debugging symbols found)...done.
Loaded symbols for /usr/lib/libidn.so.11
Reading symbols from /usr/lib/liblber-2.4.so.2...(no debugging symbols found)...done.
Loaded symbols for /usr/lib/liblber-2.4.so.2
Reading symbols from /usr/lib/libldap_r-2.4.so.2...(no debugging symbols found)...done.
Loaded symbols for /usr/lib/libldap_r-2.4.so.2
Reading symbols from /usr/lib/libgssapi_krb5.so.2...(no debugging symbols found)...done.
Loaded symbols for /usr/lib/libgssapi_krb5.so.2
Reading symbols from /usr/lib/libgnutls.so.26...(no debugging symbols found)...done.
Loaded symbols for /usr/lib/libgnutls.so.26
Reading symbols from /lib/libgcrypt.so.11...(no debugging symbols found)...done.
Loaded symbols for /lib/libgcrypt.so.11
Reading symbols from /usr/lib/libsasl2.so.2...(no debugging symbols found)...done.
Loaded symbols for /usr/lib/libsasl2.so.2
Reading symbols from /usr/lib/libkrb5.so.3...(no debugging symbols found)...done.
Loaded symbols for /usr/lib/libkrb5.so.3
Reading symbols from /usr/lib/libk5crypto.so.3...(no debugging symbols found)...done.
Loaded symbols for /usr/lib/libk5crypto.so.3
Reading symbols from /lib/libcom_err.so.2...(no debugging symbols found)...done.
Loaded symbols for /lib/libcom_err.so.2
Reading symbols from /usr/lib/libkrb5support.so.0...(no debugging symbols found)...done.
Loaded symbols for /usr/lib/libkrb5support.so.0
Reading symbols from /lib/libkeyutils.so.1...(no debugging symbols found)...done.
Loaded symbols for /lib/libkeyutils.so.1
Reading symbols from /usr/lib/libtasn1.so.3...(no debugging symbols found)...done.
Loaded symbols for /usr/lib/libtasn1.so.3
Reading symbols from /lib/libgpg-error.so.0...(no debugging symbols found)...done.
Loaded symbols for /lib/libgpg-error.so.0
Reading symbols from /lib/libgcc_s.so.1...(no debugging symbols found)...done.
Loaded symbols for /lib/libgcc_s.so.1
Reading symbols from /lib/libnss_files.so.2...(no debugging symbols found)...done.
Loaded symbols for /lib/libnss_files.so.2
Can't read symbols from system-supplied DSO at 0x7fffb4bfc000: File truncated
Core was generated by `/usr/local/bin/php /src/prod/current/utils/cron.php --run=/utils/proces'.
Program terminated with signal 11, Segmentation fault.
#0  match (
    eptr=0x1370a887 "/td>\n\t\t\t\t\t\t\n\t\t\t\t\t</tr>\n\t\t\t\t\t\n\t\t\t\t</table>\n\t\t\t</td>\n\t\t</tr>\n\t\t\n\t\t<tr>\n\t\t\t<td style=\"border-top:3px solid #efefef; padding:20px 10px;\">\n\t\t\t\t<table style=\"width:100%;\">\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t\n", '\t' <repeats 12 times>, "\n\t\t\t\t"..., ecode=0x133dc3aa "N", 
    mstart=0x13708600 "<html>\n<head>\n<meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\" />\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1, maximum-scale=1\">\n\n</head>\n\n<body style=\"padding"..., markptr=0x0, offset_top=4, md=0x7fffb4b1b620, ims=0, eptrb=0x0, flags=0, rdepth=17680) at /home/farmer/srcs/php-5.3.4/ext/pcre/pcrelib/pcre_exec.c:470
470 { 
```

如果我做一个“bt”，我只会一遍又一遍地得到这个“匹配”语句。以下是前几个：

```
#1  0x000000000046ef1e in match (
    eptr=0x1370a887 "/td>\n\t\t\t\t\t\t\n\t\t\t\t\t</tr>\n\t\t\t\t\t\n\t\t\t\t</table>\n\t\t\t</td>\n\t\t</tr>\n\t\t\n\t\t<tr>\n\t\t\t<td style=\"border-top:3px solid #efefef; padding:20px 10px;\">\n\t\t\t\t<table style=\"width:100%;\">\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t\n", '\t' <repeats 12 times>, "\n\t\t\t\t"..., ecode=0x133dc3a5 "_", mstart=<value optimized out>, markptr=<value optimized out>, 
    offset_top=<value optimized out>, md=0x7fffb4b1b620, ims=0, eptrb=0x0, flags=0, rdepth=17679) at /home/farmer/srcs/php-5.3.4/ext/pcre/pcrelib/pcre_exec.c:803
#2  0x0000000000479789 in match (
    eptr=0x1370a887 "/td>\n\t\t\t\t\t\t\n\t\t\t\t\t</tr>\n\t\t\t\t\t\n\t\t\t\t</table>\n\t\t\t</td>\n\t\t</tr>\n\t\t\n\t\t<tr>\n\t\t\t<td style=\"border-top:3px solid #efefef; padding:20px 10px;\">\n\t\t\t\t<table style=\"width:100%;\">\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t\n", '\t' <repeats 12 times>, "\n\t\t\t\t"..., ecode=0x133dc5ca "V\002%\033U\002.", mstart=<value optimized out>, 
    markptr=<value optimized out>, offset_top=<value optimized out>, md=0x7fffb4b1b620, ims=0, eptrb=0x0, flags=0, rdepth=<value optimized out>)
    at /home/farmer/srcs/php-5.3.4/ext/pcre/pcrelib/pcre_exec.c:1623
#3  0x000000000046ef1e in match (
    eptr=0x1370a886 "</td>\n\t\t\t\t\t\t\n\t\t\t\t\t</tr>\n\t\t\t\t\t\n\t\t\t\t</table>\n\t\t\t</td>\n\t\t</tr>\n\t\t\n\t\t<tr>\n\t\t\t<td style=\"border-top:3px solid #efefef; padding:20px 10px;\">\n\t\t\t\t<table style=\"width:100%;\">\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t\n", '\t' <repeats 12 times>, "\n\t\t\t"..., ecode=0x133dc3a5 "_", mstart=<value optimized out>, markptr=<value optimized out>, 
    offset_top=<value optimized out>, md=0x7fffb4b1b620, ims=0, eptrb=0x0, flags=0, rdepth=17677) at /home/farmer/srcs/php-5.3.4/ext/pcre/pcrelib/pcre_exec.c:803
#4  0x0000000000479789 in match (
    eptr=0x1370a886 "</td>\n\t\t\t\t\t\t\n\t\t\t\t\t</tr>\n\t\t\t\t\t\n\t\t\t\t</table>\n\t\t\t</td>\n\t\t</tr>\n\t\t\n\t\t<tr>\n\t\t\t<td style=\"border-top:3px solid #efefef; padding:20px 10px;\">\n\t\t\t\t<table style=\"width:100%;\">\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t\n", '\t' <repeats 12 times>, "\n\t\t\t"..., ecode=0x133dc5ca "V\002%\033U\002.", mstart=<value optimized out>, 
    markptr=<value optimized out>, offset_top=<value optimized out>, md=0x7fffb4b1b620, ims=0, eptrb=0x0, flags=0, rdepth=<value optimized out>)
    at /home/farmer/srcs/php-5.3.4/ext/pcre/pcrelib/pcre_exec.c:1623
#5  0x000000000046ef1e in match (
    eptr=0x1370a885 "\t</td>\n\t\t\t\t\t\t\n\t\t\t\t\t</tr>\n\t\t\t\t\t\n\t\t\t\t</table>\n\t\t\t</td>\n\t\t</tr>\n\t\t\n\t\t<tr>\n\t\t\t<td style=\"border-top:3px solid #efefef; padding:20px 10px;\">\n\t\t\t\t<table style=\"width:100%;\">\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t\n", '\t' <repeats 12 times>, "\n\t\t"..., ecode=0x133dc3a5 "_", mstart=<value optimized out>, markptr=<value optimized out>, 
    offset_top=<value optimized out>, md=0x7fffb4b1b620, ims=0, eptrb=0x0, flags=0, rdepth=17675) at /home/farmer/srcs/php-5.3.4/ext/pcre/pcrelib/pcre_exec.c:803 
```

我在这里真的很茫然。我试过在 strace 中运行该命令，它似乎在 PEAR Mail_Queue 库中出现了段错误。这是 strace 的结尾（一些识别信息已被删除）：

```
lstat("/src/prod/releases/20121025202143/www/application/pear/MDB2/Driver/mysql.php", {st_mode=S_IFREG|0770, st_size=55723, ...}) = 0
lstat("/src/prod/releases/20121025202143/www/application/pear/MDB2/Driver", {st_mode=S_IFDIR|0770, st_size=4096, ...}) = 0
lstat("/src/prod/releases/20121025202143/www/application/pear/MDB2", {st_mode=S_IFDIR|0770, st_size=4096, ...}) = 0
lstat("/src/prod/releases/20121025202143/www/application/pear", {st_mode=S_IFDIR|0770, st_size=4096, ...}) = 0
open("/src/prod/releases/20121025202143/www/application/pear/MDB2/Driver/mysql.php", O_RDONLY) = 6
fstat(6, {st_mode=S_IFREG|0770, st_size=55723, ...}) = 0
fstat(6, {st_mode=S_IFREG|0770, st_size=55723, ...}) = 0
fstat(6, {st_mode=S_IFREG|0770, st_size=55723, ...}) = 0
mmap(NULL, 55723, PROT_READ, MAP_SHARED, 6, 0) = 0x2b49f7bb4000
brk(0x987b000)                          = 0x987b000
brk(0x98bb000)                          = 0x98bb000
munmap(0x2b49f7bb4000, 55723)           = 0
close(6)                                = 0
socket(PF_INET, SOCK_STREAM, IPPROTO_IP) = 6
fcntl(6, F_SETFL, O_RDONLY)             = 0
fcntl(6, F_GETFL)                       = 0x2 (flags O_RDWR)
fcntl(6, F_GETFL)                       = 0x2 (flags O_RDWR)
fcntl(6, F_SETFL, O_RDWR|O_NONBLOCK)    = 0
connect(6, {sa_family=AF_INET, sin_port=htons(3306), sin_addr=inet_addr("IP ADDRESS TO DB SERVER REMOVED")}, 16) = -1 EINPROGRESS (Operation now in progress)
fcntl(6, F_SETFL, O_RDWR)               = 0
poll([{fd=6, events=POLLIN|POLLPRI}], 1, 60000) = 1 ([{fd=6, revents=POLLIN}])
setsockopt(6, SOL_SOCKET, SO_RCVTIMEO, "\2003\341\1\0\0\0\0\0\0\0\0\0\0\0\0", 16) = 0
setsockopt(6, SOL_SOCKET, SO_SNDTIMEO, "\2003\341\1\0\0\0\0\0\0\0\0\0\0\0\0", 16) = 0
setsockopt(6, SOL_IP, IP_TOS, [8], 4)   = 0
setsockopt(6, SOL_TCP, TCP_NODELAY, [1], 4) = 0
setsockopt(6, SOL_SOCKET, SO_KEEPALIVE, [1], 4) = 0
poll([{fd=6, events=POLLIN}], 1, 60000) = 1 ([{fd=6, revents=POLLIN}])
read(6, "C\0\0\0\n5.1.37-1ubuntu5.5-log\0Q\257\3\0009"..., 16384) = 71
write(6, "=\0\0\1\205\242\2\0\0\0\0@\10\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"..., 65) = 65
read(6, "\7\0\0\2\0\0\0\2\0\0\0", 16384) = 11
poll([{fd=6, events=POLLIN|POLLPRI}], 1, 0) = 0 (Timeout)
write(6, "\10\0\0\0\2xxxxx", 12)      = 12
read(6, "\7\0\0\1\0\0\0\2\0\0\0", 16384) = 11
lstat("/src/prod/current/www/application/pear/Mail/mime.php", {st_mode=S_IFREG|0770, st_size=50252, ...}) = 0
lstat("/src/prod/current/www/application/pear/Mail", {st_mode=S_IFDIR|0770, st_size=4096, ...}) = 0
lstat("/src/prod/current/www/application/pear", {st_mode=S_IFDIR|0770, st_size=4096, ...}) = 0
lstat("/src/prod/current/www/application", {st_mode=S_IFDIR|0776, st_size=4096, ...}) = 0
--- SIGSEGV (Segmentation fault) @ 0 (0) ---
+++ killed by SIGSEGV +++
Segmentation fault 
```

如果有人对调查路线有任何想法或指示，我将不胜感激。我真的被这个难住了。

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-11-07T12:20:10.417

如果遇到段错误，我通常使用 xdebug。我更喜欢使用以下行：

```
php -d xdebug.auto_trace=ON -d xdebug.trace_output_dir=mytracedir/ myscript.php 
```

使用 mytracedir/ 下的跟踪输出，您可以轻松找出大概的 php 行，这会破坏脚本。然后在每行一个语句中重写该行并`error_log()`用于调试变量。如果你使用它，`__destruct()`或者`__toString()`那里可能会变得更棘手。

请参阅[此处](http://xdebug.org/docs/execution_trace)了解更多信息。

（如果扩展未加载，但已安装，请尝试添加`php -dzend_extension=xdebug.so [...]`）

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-07T12:26:01.053

调试器已经告诉你会发生什么：

```
... rdepth=17680) at /home/farmer/srcs/php-5.3.4/ext/pcre/pcrelib/pcre_exec.c:470 
```

请参阅[*pcre.recursion_limit*设置](http://php.net/pcre.configuration#ini.pcre.recursion-limit)：

> **pcre.recursion_limit** - PCRE 的递归限制。请注意，如果您将此值设置为较高的数字，您可能会消耗所有可用的进程堆栈并最终导致 PHP 崩溃（由于达到操作系统施加的堆栈大小限制）。

降低其值，使其不再因快速修复而崩溃。然后，您将看到您的 HTML 没有被正则表达式完全处理。

改进表达式以不那么依赖递归。您可能只想使用 HTML 解析器。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-12-16T05:14:18.683

尝试`memcache.so`从命令行删除和禁用 opcache `php.ini`，包括 opcache 部分注释。

`-c path/php.cli.ini`使用和`-d memory_limit -1`参数运行脚本的帖子

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2019-10-04T06:46:07.400

同样的问题出现在不同的情况下。

我使用 phpstorm 调试 laravel 项目，并在评估表达式 php 服务器出现故障时。

只需打印`Segmentation fault: 11`

php版本是7.3，降级到7.2。在 Phpstorm 设置中，我也将 php 语言级别设置为 7.2。问题得到了解决。

希望它对某人有帮助:)

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2019-03-13T15:55:00.327

我有这个问题。原来我运行的命令是针对 PHP7.1 的，而在服务器上是 PHP7.3。

一旦我运行它们，就像`/usr/bin/php71`它们被执行时没有问题一样。

希望它对某人有帮助:)

# php - 使用ajax过滤一些数据后刷新页面时获得相同的内容

> ID：13079514
> 
> 赞同：1
> 
> 时间：2012-10-26T01:11:42.800
> 
> 标签：php, javascript, jquery, ajax, json

这是我的情况：

在页面的中心，我有内容目录：`<div id="content"></div>`

在页面的右侧，我有一个`<form method="post" action="?p=search">`带有一些输入字段和一个提交按钮：`<input type="submit" id="searchButton" />`。

将表单提交到 时，我正在执行 AJAX 请求`index.php`，只是因为索引加载了我的所有环境，然后它包含`search.php`并退出。

该`search.php`文件使用**json 返回**一个数组，该数组由发送到数据库的查询返回。

有了这个返回，当请求结束时，我用数据更新我的内容 div。

但我没有意识到，如果我只是重新加载页面，而不点击搜索按钮，我的所有搜索都会消失，它只会返回默认页面所做的主要内容查询..

我该如何解决？有什么好的做法吗？

谢谢，谢谢，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T02:42:06.800

在搜索中尝试 ajax 时需要添加首字母。

当初始值不为空时，再次调用您的 ajax，尝试`$(window).load(function ()`检测您的初始值。

您可以选择 cookie 作为初始值。

例如 ：

> ```
>  //assume this call your ajax
> 
>   var ajax_search = function(str) {
>       $.ajax({
>         type: "POST",
>         url: "some.php",
>         data: $str
>       }).done(function( msg ) {
>         alert( "Data Saved: " + msg );
>         setCookie("IsSubmitSearch", "true", 1);
>       });
>   }
> 
>   // when click submit search
>   $("#search").click(function() {
>       var str = $("#inputSearch").serialize();
>       ajax_search(str);
> 
>       return false;
>   });
> 
>   $(window).load(function () {
>       var IsSubmitSearch = getCookie("IsSubmitSearch");
>       if (IsSubmitSearch != null && IsSubmitSearch != "") {
>           //cookie exists then you refreshed this page(F5, reload button or right click and reload)
>           //SOME CODE
>           var str = $("#inputSearch").serialize();
>           ajax_search(str);
>           DeleteCookie("IsSubmitSearch");
>        }
>        else {
>           //cookie doesnt exists then you landed on this page
>           //SOME CODE
>           setCookie("IsSubmitSearch", "true", 1);
>        }
>   }); 
> ```

# c# - 将列动态添加到 dataGridView

> ID：13079516
> 
> 赞同：2
> 
> 时间：2012-10-26T01:12:04.483
> 
> 标签：c#, winforms, datagridview

假设我的数据库表中有**300 多个**列，因为列 #3 之后的每个列都是相同的数据类型，有没有一种有效的方法来加载列`SqlCeConnection/SqlCeDatabase`？

```
private void loadDataGridView() {
  String CmdString = "...... FROM MyDatabaseTable"; //some sql to get col info
  SqlCeCommand cmd = new SqlCeCommand(CmdString, con);
  SqlCeDataAdapter sda = new SqlCeDataAdapter(cmd);
  DataTable dt = new DataTable("mastertable");
  sda.Fill(dt);
  foreach(Col col in dt) {
    DataGridViewColumn c = new DataGridViewColumn(..); //Create the Col
    c.DataPropertyName = col.Name; //Bind the col and property name
    dataGridView1.Cols.Add(new dataGridViewColumn(...) ); //Add the col
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T01:51:00.660

我在网上发现 DataGridView 通过设置一个属性就具有此功能。

`dataGridView1.AutoGenerateColumns = true;`//只要在数据库中定义了数据，它就可以完美地工作。

这是在这里找到的

[http://www.codeproject.com/Questions/182662/c-net-fill-data-to-already-defined-columns-in-data](http://www.codeproject.com/Questions/182662/c-net-fill-data-to-already-defined-columns-in-data)

希望这对你们也有帮助:)

# javascript - 对象变量在内部范围内没有变化

> ID：13079519
> 
> 赞同：0
> 
> 时间：2012-10-26T01:12:44.760
> 
> 标签：javascript, jquery

我制作了一个名为 Product 的函数，用于在 JavaScript 中创建对象。现在我有一个名为 setProduct 的函数，它从我的数据库 (websql) 中获取数据，并将数据库中的所有这些数据设置在当前对象中。这是我的代码：

```
function Product(nr, name, description, brand, category, price, tags, color, seccolor, image, sizes, db) {
    this.nr             = nr;
    this.name           = name;
    this.description    = description;
    this.brand          = brand;
    this.category       = category;
    this.price          = price;
    this.tags           = tags;
    this.color          = color;
    this.seccolor       = color;
    this.image          = image;
    this.sizes          = sizes;
    this.db             = db;

        Product.prototype.setProduct = function(id, cb) {
        var self = this;
        var query = "SELECT * from products WHERE id='"+id+"';"
        var res;
        this.db.exec(query, function(results) {
            res = results.rows.item(0);
            self.nr             = res.prod_nr;
            self.description    = res.prod_description;
            self.brand          = res.prod_brand;
            self.category       = res.prod_category;
            self.price          = res.prod_price;
            self.tags           = res.prod_tags;
            self.color          = res.prod_color;
            self.seccolor       = res.prod_sec_color;
            self.image          = res.prod_image;
            self.sizes          = res.available_sizes;
            self.name           = res.prod_name;
            cb(true);
        });
    };
} 
```

this.db = 我的数据库对象。setProduct 从该对象调用 exec 函数。就是这个代码：

```
Database.prototype.exec = function(query, cb) {
        this.db.transaction(function(tx) {
            tx.executeSql(query, [], function(tx, results) {

                if (typeof(cb) == 'function') {

                        cb(results);
                    }
                });
            });
   } 
```

我尝试使用几个 console.logs 来查看数据丢失的位置，但我无法以某种方式找到它。

这是出错的地方：

```
$("div#home").off('click').on('click','li', function() { 
            var product = prod;
            var prod_id = $(this).attr("id");
            prod.setProduct(prod_id, function(a) {
                if (a) {
                    console.log(prod.name); // console.log gives undefined
                }
            });
        });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T11:54:55.310

找到我的解决方案！我已将当前对象添加到一个新变量中以在内部范围中使用，但我忘了使用它

```
$("div#home").off('click').on('click','li', function() { 
            var product = prod; // FOR THE INNER SCOPE
            var prod_id = $(this).attr("id");
            prod.setProduct(prod_id, function(a) {
                if (a) {
                    console.log(prod.name); // prod.name has to be product.name, as defined above
                    console.log(product.name); // WORKS!

                }
            });
        });
} 
```

# java - 使用jsoup解析

> ID：13079521
> 
> 赞同：1
> 
> 时间：2012-10-26T01:13:26.387
> 
> 标签：java, android, html, parsing, jsoup

需要帮助使用 JSOUP 从 HTML META 标记中提取 URL 值。这是我的html -

```
String html = "<HTML><HEAD><...></...><META ......><META ......><META http-equiv="refresh" content="1;URL='https://xyz.com/login.html?redirect=www.google.com'"></HEAD></HTML>" 
```

预期输出：“https://xyz.com/login.html?redirect=www.google.com”

谁能告诉我该怎么做。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T03:38:23.173

假设是第一个`META`

```
String html_src = ...

Document doc = Jsoup.parse(html);
Element eMETA = doc.select("META").first();
String content = eMETA.attr("content");
String urlRedirect = content.split(";")[1];
String url = urlRedirect.split("=")[1].replace("'",""); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-19T14:52:48.700

使用 Java 8 和 Jsoup，此解决方案将起作用：

```
Document document = Jsoup.parse(yourHTMLString);
String url = document.select("meta[http-equiv=refresh]").stream()
                .findFirst()
                .map(doc -> {
                    try {
                        String content = doc.attr("content").split(";")[1];
                        Pattern pattern = Pattern.compile(".*URL='?(.*)$", Pattern.CASE_INSENSITIVE);
                        Matcher m = pattern.matcher(content);
                        String redirectUrl = m.matches() ? m.group(1) : null;
                        return redirectUrl == null ? null :
                                redirectUrl.endsWith("'") ? redirectUrl.substring(0, redirectUrl.length() - 2) : redirectUrl;
                    } catch (Exception e) {
                        return null;
                    }

                }).orElse(null); 
```

# javascript - Node.js 抓取，转换图片 src -> 完整 URL

> ID：13079525
> 
> 赞同：6
> 
> 时间：2012-10-26T01:14:58.613
> 
> 标签：javascript, node.js, path, jsdom

我正在使用 Cheerio (https://github.com/MatthewMueller/cheerio) 来抓取网站并获取我正在从事的项目的图像。我想知道 Node.js（或其他包）是否有一种简单的方法可以将 $(img).attr('src') 转换为完全限定的 URL？有时我会得到“image.jpg”，有时会得到“../../image.jpg”，有时会得到“//somepath/image.jpg”。也许我只是缺少某种正则表达式...感谢您的时间:)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-26T05:22:03.680

查看节点[`url`](http://nodejs.org/api/url.html)模块。具体[`url.resolve(from, to)`](http://nodejs.org/api/url.html#url_url_resolve_from_to)应该是您正在寻找的东西。

# iphone - 通过单击 UITableViewCell 将 UIWebView 推送到 UINavigationController 后未加载

> ID：13079527
> 
> 赞同：0
> 
> 时间：2012-10-26T01:15:13.247
> 
> 标签：iphone, ios, uiwebview

尝试使用具有从我的故事板实例化的子类 UIViewController 的 WebView 加载 www.google.com。当单击 UITableViewCell 时，它将被推送到屏幕上。

我正在使用以下代码，但我只得到一个白屏。请帮忙。

（我没有错误）

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSURL *url = [NSURL URLWithString:@"http://www.google.com"];
    NSURLRequest *request = [NSURLRequest requestWithURL:url];

    _webViewController = [self.storyboard instantiateViewControllerWithIdentifier:@"WebView"];

    [self.navigationController pushViewController:_webViewController animated:YES];

    [_webViewController.webView loadRequest:request];
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T05:32:27.670

这行不通...

尝试 _webViewController 本身的最后一行 ([_webViewController.webView loadRequest:request];)..

# javascript - Twitter Bootstrap - 即时更新 Affix Data-Offset 属性

> ID：13079529
> 
> 赞同：2
> 
> 时间：2012-10-26T01:15:41.407
> 
> 标签：javascript, jquery, twitter-bootstrap, sticky-footer

我在页面上的一个区域使用“粘性页脚”技术，该区域也有一个使用词缀的导航栏。问题是 data-offset 属性需要根据粘性页脚的位置进行更新 - 因此它不能被硬编码。

如何获取粘性页脚所在位置的像素值，并将该值传递给 data-offset 属性，以便它知道何时粘贴自己？

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T09:49:48.910

我还在修复导航栏，具体取决于无法硬编码到 css 中的位置。不是因为页脚粘滞，而是导航栏上方的空间（未固定时）是动态的，但我认为解决方案是相似的。

我正在使用 JavaScript 通过动态设置/取消设置适当的类来修复/取消修复，具体取决于某些 DOM 元素是否在视口上可见。方案如下：

*   navbar 被样式`position: absolute`化并且包含它的空间具有 navbar 的静态高度，因此在修复时下面的内容的位置没有变化，
*   如果上面的元素不可见，则绑定监视滚动并修复导航栏的功能，
*   通过比较元素位置的底部与视口位置的顶部来检查元素是否可见，
*   通过每次用户滚动或更改窗口大小时添加/删除引导类来修复/取消修复。

[Opa 框架](http://www.opalang.org)中的代码（转换为 JS+jQuery 应该很简单，因为 Opa 的 DOM 库只是简单地绑定到 jQuery）：

```
// id of the element above the navbar, and the navbar
logobar_id = "logo-bar";
navbar_id = "main-menu";
// hardcoded height of the navbar
navbar_height_px = 30;

client function distance() {
  dom = #{logobar_id};

  // hardcoded height of the navbar
  win = Dom.select_window();

  // position of the top of the viewport
  scroll_visible = Dom.get_scroll_top(win);

  // return the distance between of bottom of element above the navbar and the top of 
  dom_bottom = Dom.get_offset(dom).y_px + Dom.get_height(dom);
  dom_bottom - scroll_visible;
}

dom = #{navbar_id};

private client function fixation() {
  if (distance() <= 0) {
    // TODO: remember if subnav is fixed, dont fix if fixed
    Dom.add_class(dom, "navbar-fixed-top");
    Dom.remove_class(dom, "container");
  } else {
    // TODO: remember if subnav is fixed, dont unfix if unfixed
    Dom.remove_class(dom, "navbar-fixed-top");
    Dom.add_class(dom, "container");
    void;
  }
}

// (un)fix when scroll
private client function onscroll(_) {
  fixation();
}

// bind the `onscroll` handler for subnav when it is loaded
private client function onready(_) {
  _ = Dom.bind(Dom.select_window(), {scroll}, onscroll);
  fixation();
} 
```

导航栏上方的 DOM 元素和导航栏本身：

```
<div class="container" id=#{logobar_id}>
  My logo with dynamic content
</div>
<div class="container" style="height: {navbar_height_px}px; position: relative; top: 0px">
  <div style="position: absolute; top: 0px">
    <div class="navbar container" id=#{navbar_id} onready={onready}>
      ...
    </div>
  </div>
</div> 
```

# vba - 如何让平方符号 (²) 在字符串中显示

> ID：13079534
> 
> 赞同：4
> 
> 时间：2012-10-26T01:16:01.063
> 
> 标签：vba, excel, excel-2007

我正在尝试以`²`字符串形式显示。作为一个例子，我的输出应该在一个`ActiveX`文本框内，并且应该是`R² = 50`.

我试过以下两种说法：

```
Selection.Characters.Text = "R&ChrW(&HB2)&" = " & variable 
```

但这`0`在文本框中显示为输出。和这个：

```
Selection.Characters.Text = "R² = " & variable 
```

还显示一个`0`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T01:49:53.670

不确定您指的是哪种文本框。但是，我不确定您是否可以在用户表单的文本框中执行此操作。

您可以在工作表上的文本框。

```
Sheets("Sheet1").Shapes("TextBox 1").TextFrame2.TextRange.Text = "R2=" & variable
Sheets("Sheet1").Shapes("TextBox 1").TextFrame2.TextRange.Characters(2, 1).Font.Superscript = msoTrue 
```

对于 excel 单元格也是如此

```
Sheets("Sheet1").Range("A1").Characters(2, 1).Font.Superscript = True 
```

如果这不是您想要的，您将需要在您的问题中提供更多信息。

编辑：在评论后发布此内容抱歉

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T15:45:53.847

没必要搞得太复杂。如果您只需要 ²，则使用 unicode 表示。

[http://en.wikipedia.org/wiki/Unicode_subscripts_and_superscripts](http://en.wikipedia.org/wiki/Unicode_subscripts_and_superscripts)

（这就是我假设您的问题中出现 ² 的方式。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-22T16:51:53.437

我在 VBA 中创建带有随机数的方程，并将 x 平方放入 x^2。

我将每个正方形（或文本框）文本读入一个字符串。

然后我依次读取字符串中的每个字符，并记下每个字符中 ^（“帽子”）的位置。

假设帽子在位置 4、8 和 12。

然后我“砍掉”第一顶帽子 - 要上标的字符的位置现在是 4，其他帽子的位置现在是 7 和 11。我砍掉第二顶帽子，上标的字符现在是 7 和帽子已移至 10。我砍掉了最后一顶帽子 .. 上标字符现在是位置 10。

我现在依次选择每个字符并将字体更改为上标。

因此，我可以使用 ^ 用代数填充整个电子表格，然后调用一个例程来整理它。

对于像 x 到 23 这样的大幂，我构建了 x^2^3 并且上面的例程做到了。

# linux - 编写一个shell脚本，在连接丢失时继续为代理重新连接SSH

> ID：13079538
> 
> 赞同：0
> 
> 时间：2012-10-26T01:16:17.017
> 
> 标签：linux, shell, networking, ssh, proxy

我有一个 SSH 代理服务器。通常，我像这样连接到服务器：

```
ssh proxy-server -D 7070 
```

但是，我的网络不稳定，我经常失去与代理服务器的连接。然后我必须切换到终端并再次输入此命令...

我想知道是否可以编写一个脚本，以便在检测到与代理服务器的连接丢失时可以尝试再次建立连接。但我不知道如何定期检测连接是否丢失。有人对此有想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T01:37:56.427

您可以等到 ssh 退出并将其放入循环中：

```
while true
do
   ssh -TN $1 -D 7070
done 
```

但是弗洛林是对的，这并不意味着您的连接正常，挂起仍然会阻止您的 ssh 命令，而您并不真正知道。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T01:26:48.410

我认为您可以检测网络资源是否仍然可用的唯一方法是向其发送数据。你可以做的是让守护进程每 2-3 秒 ping 一次代理服务器。一旦它检测到失去连接，让它运行一个脚本，将终端直接启动到与代理服务器的 ssh 连接（或继续尝试，直到代理可用）。也许还有更优雅的方式，但我想不出任何方式。

# javascript - 在 Backbone 的所有路由中默认显示一个视图

> ID：13079540
> 
> 赞同：2
> 
> 时间：2012-10-26T01:16:43.720
> 
> 标签：javascript, html, backbone.js

我想要一个主干视图，这是我的导航出现在所有路线中。这样做的最佳方法是什么？

理想情况下，我想要一条与所有给定路线匹配的路线，并启动创建导航的“主页”功能，如下所示：

```
routes: {
        "*" : "home",
        "addnames" : "addNames"

    }, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T01:11:11.180

尽管 Deeptechtons 在他的评论中是 100% 正确的，但在很多时候，有人可能希望他们的路线触发一些常见的逻辑或访问一些常见的对象（如工具栏）。

路由在被击中时会触发“路由”事件，因此如果您需要做的只是触发逻辑，一种简单的方法就是：

```
router.on('route', functionThatDoesWhateverYouWantToDoOnEveryRoute); 
```

如果您需要视图本身来访问公共对象，那么最好的选择可能是让您的所有路由视图都从基本 RouteView 扩展（并将对象放入其中）。如果您想获得硬核（但很可能这是错误的方法），您甚至可以覆盖核心 Backbone 路由器方法之一，并使用以下方法从其内部调用原始版本：

```
Backbone.Router.prototype.methodName.apply(this, arguments); 
```

希望有帮助。

# eclipse - DTP 功能中缺少依赖项

> ID：13079550
> 
> 赞同：0
> 
> 时间：2012-10-26T01:18:23.833
> 
> 标签：eclipse, eclipse-dtp

我依赖于一些 DTP 功能，包括 org.eclipse.datatools.sqltools.parsers.sql.lexer。在构建期间我收到错误

> 缺少要求：Eclipse 数据工具平台 Lexer 插件 1.0.1.v201107221520 (org.eclipse.datatools.sqltools.parsers.sql.lexer 1.0.1.v201107221520) 需要 'bundle net.sourceforge.lpg.lpgjavaruntime [1.1.0 ,2.0.0)' 但找不到

当我检查目标平台时，我看到 net.sourceforge.lpg.lpgjavaruntime_1.1.0.v201004271650.jar 在那里，但它不在 p2 存储库中。我怎样才能满足这个缺失的依赖？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T20:59:14.290

看起来我必须将此插件打包到我的功能中，因为我找不到提供它的其他功能。但显然这是错误的做法。

# ruby - Ruby DataMapper 不存储有 n / belongs_to

> ID：13079551
> 
> 赞同：0
> 
> 时间：2012-10-26T01:18:34.563
> 
> 标签：ruby, sinatra, store, one-to-many, datamapper

我有两个 DataMapper 模型：

```
class Address
  include DataMapper::Resource

  property :id, Serial
  property :url, String, :required => true

  has n, :logs
end

class Log
  include DataMapper::Resource

  property :id, Serial
  property :useragent, String

  belongs_to :address
end 
```

我使用 Sinatra 创建新地址，并在另一种方法中记录属于这些地址的日志。

```
 # page after posting a form
  post '/' do
    @messages = []

    if (params[:url] =~ URI::regexp).nil?
      @messages.push('URL is not valid!')
    else
      address = Address.create(:url => params[:url])

      base36 = address.id.to_s(36)
      @messages.push(request.url + base36)
    end

    erb :index
  end

  # redirection from a short url
  get '/:base36' do |base36| 
    # probably not necessary...
    if base36 =~ /[[:alnum:]]+/
      begin
        id = base36.to_i(36)
        address = Address.get(id)

        log = Log.create(:useragent => request.user_agent)
        address.logs << log
        # log.save
        address.save
        # address.logs.save

        address.logs.length.to_s
        # redirect address.url
      rescue
        redirect '/'
      end
    else
      redirect '/'
    end
  end 
```

问题是，新日志没有存储在数据库中。`address.logs.length.to_s`在`1`每个页面重新加载时（应该递增）。当我这样做时（以​​另一种方法）：

```
logs = Address.get(id).logs
@views = logs.length 
```

`views`总是`0`。这段代码有什么问题？

* * *

好的，所以我尝试推送到字符串字段太长的用户代理。字符串限制为 50 个字符。#datamapper irc 频道上的人帮助了我，`.save`在这种情况下方法返回 false 并且不存储数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T14:08:48.877

好的，所以我尝试推送到字符串字段太长的用户代理。字符串限制为 50 个字符。#datamapper irc 频道上的人帮助了我，在这种情况下 .save 方法返回 false 并且不存储数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T13:12:53.583

评论说：

```
address.logs << log
# log.save 
```

但代码并没有这么说。您应该使用传递的地址创建日志

```
log = Log.create(:useragent => request.user_agent, :address => address) 
```

将日志推送到日志集后保存日志：

```
log = Log.new(:useragent => request.user_agent)
address.logs << log
log.save # not a comment, just a self-explaining code 
```

您案例中的关系存储在`Log`资源中，因此您应该保存它，而不是`Address`.

# windows-phone-7 - Windows Phone 推送通知远程 URI 更新在模拟器中不起作用？

> ID：13079552
> 
> 赞同：1
> 
> 时间：2012-10-26T01:18:57.950
> 
> 标签：windows-phone-7

我正在测试推送通知，我注意到当我向我的磁贴发送推送通知时，它会更新本地图像的背景图像和背景图像，但是当我指定远程图像时它不起作用。

我在模拟器中这样做。我仍然可以通过代码更改手动将图像更改为远程（在 C# 代码中，手动将图像 URI 设置为远程），但是通过推送通知，如果我指定远程，它似乎不会更新图像URI，只是一个本地的。

这是模拟器的缺陷吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T19:27:45.603

您应该在调用时为推送通知图像指定允许的域

[HttpNotificationChannel.BindToShellTile 方法（集合）](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff708021%28v=vs.92%29.aspx)

例如，

```
NotificationChannel.BindToShellTile (new Collection<Uri> { new Uri("http://domain1.com"), new Uri("http://domain2.com") }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T22:10:59.973

有一些与远程图像相关的警告：[Tiles Overview](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202948%28v=vs.92%29.aspx)

*   由于网络可变性和性能原因，请考虑将本地资源用于平铺图像。
*   远程图像不支持 https。
*   远程图像限制为 80 KB 或更少，否则将无法下载。
*   远程图像必须在 30 秒或更短时间内下载，否则将无法下载。
*   如果 BackGround 或 BackBackGround 图像由于任何原因无法加载，则更新中设置的其他属性也不会更改。

# javascript - KnockoutJS SEO 是否友好

> ID：13079553
> 
> 赞同：8
> 
> 时间：2012-10-26T01:19:36.293
> 
> 标签：javascript, seo, knockout.js

我的问题很简单：KnockoutJS SEO 友好吗？我有一个网站并大量使用 Knockout 数据模板，但我怀疑 Google 爬虫是否会发现我的网站，因为该页面是一大堆模板，不存在真正的 HTML 标记。我怎么能改善这个？使用 RSS？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T01:25:20.517

看看这篇文章：

[http://lostechies.com/derickbailey/2011/09/26/seo-and-accessibility-with-html5-pushstate-part-1-introducing-pushstate/](http://lostechies.com/derickbailey/2011/09/26/seo-and-accessibility-with-html5-pushstate-part-1-introducing-pushstate/)

简而言之，使用html5 pushstate，您可以轻松利用这两个世界：1\. ajax 的速度2\. 为不支持js 的客户端（包括搜索引擎）正常显示页面内容的能力

# java - GWT：AbstractActivity 和 AcceptsOneWidget 之间的关系？

> ID：13079554
> 
> 赞同：0
> 
> 时间：2012-10-26T01:19:57.580
> 
> 标签：java, gwt

如果您创建一个`AbstractActivity`子类，那么您必须定义以下方法：

```
@Override
public void start(AcceptsOneWidget panel, EventBus eventBus) {
    // ...
} 
```

这是否意味着`AbstractActivity`可以用不同的显示区域“启动”相同的内容？有人可以从用户体验 (UX) 的角度提供一个具体的例子来说明这将如何发生吗？

换句话说，如果我可以说`someActivity.start(displayRegion1, eventBus)`或`someActivity.start(displayRegion2, eventBus)`，那么对我来说，这意味着：

1.  *活动*不一定与屏幕上的特定位置*相关*联，因此可以用于处理（**在这种情况下，它实际上做了什么？**`AcceptsOneWidget` ）来自屏幕任何部分的显示区域（ impl）；或者
2.  活动与特定*位置*相关联，但或多或​​少是一种“查看器”类型的构造，能够通过任何显示区域并显示其内容。

有人可以向我解释这种关系吗？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T10:17:35.107

活动不（不应该）依赖于*它*的显示位置，因此它传递了一个`AcceptsOnWidget`表示该*显示区域*的参数，并且它应该将自身（或其视图或其他）设置为该*显示区域*的小部件。

显示活动的位置（即参数的值）在以下`AcceptsOneWidget`位置定义：`setDisplay``ActivityManager`

1.  an`ActivityManager` *控制*显示*区域*
2.  它要求它`ActivityMapper`为给定的活动`Place`
3.  正是`start`这个活动将*显示区域*作为参数传递给它
4.  活动准备好后，会在该*显示区域中**显示自己。*

# php - reg 表达式从特定的序列号开始？

> ID：13079557
> 
> 赞同：0
> 
> 时间：2012-10-26T01:20:40.710
> 
> 标签：php, regex, sequence

我创建了一个 reg 表达式来查找目录中的所有文件，其文件名以“安装”开头，之后有 6 个数字。

我要做的是获取以“*安装*”开头的文件名列表，后面只有 6 个数字。例如，现在我有六个文件（测试文件）：

```
installation.php
installation000001.php
installation000002.php
installation000003-sweep.php
installation000004.php
installation-sweep.php 
```

我与 php 一起使用的表达式是`/^installation([0-9]{6})/`：

```
installation000001.php
installation000002.php
installation000003-sweep.php
installation000004.php 
```

我只想拉1、2和4（不是安装000003-sweep.php）。另外，我怎样才能从只会拉的 000002 开始：

```
installation000002.php
installation000004.php 
```

?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T01:41:23.457

如果您只想要带有数字的那些，那么 .php：

```
/installation([0-9]{6}).php/ 
```

将它与从 2 开始相结合，您可以这样做：

```
/installation([0-9]{5}[2-9]).php/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T01:47:22.997

您可以使用正/负前瞻：

```
/^installation([0-9]{6})(?=\.)/
                         ^^^^ followed by a period
/^installation([0-9]{6})(?!-)/
                         ^^^^ not followed by a dash 
```

排除第一条记录的最简单方法是在结果数组上使用[array_splice](http://php.net/manual/en/function.array-splice.php)或[array_shift()](http://www.php.net/manual/en/function.array-shift.php)，而不是在模式中使用规则。

# javascript - 将javascript var值传递给grails变量

> ID：13079559
> 
> 赞同：0
> 
> 时间：2012-10-26T01:20:42.433
> 
> 标签：javascript, grails

如何将 javascript 值传递给 grails 变量。例如：

```
 var ert = 1;
   function test(){
   ert++;
   } 
```

如果单击按钮，将调用该函数，并增加变量。现在我想将此值传递给正在返回到页面的 grails 变量或 groovy 变量。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T01:53:19.630

在表单中添加一个隐藏字段，当单击按钮时，将该隐藏元素的值修改为您想要发送到服务器的值。

```
<button onclick="testFunction()">Click me</button>
<input type="hidden" name="inc" id="inc" value="1" />
<div id="testOutput">1</div>​

var ert = 1;
function testFunction() {
    var inc = document.getElementById("inc");
    ert++;
    inc.value = ert;

    //for demo only
    var testOutput = document.getElementById("testOutput");
    testOutput.innerHTML = inc.value;
}​ 
```

[jsFiddle 示例](http://jsfiddle.net/qRSfM/)

# python - 压缩距离矩阵如何工作？(pdist)

> ID：13079563
> 
> 赞同：82
> 
> 时间：2012-10-26T01:21:08.867
> 
> 标签：python, numpy, scipy

`scipy.spatial.distance.pdist`返回一个压缩的距离矩阵。从[文档中](http://docs.scipy.org/doc/scipy/reference/generated/scipy.spatial.distance.pdist.html)：

> 返回压缩距离矩阵 Y。对于每个 and (其中 )，度量 dist(u=X[i], v=X[j]) 被计算并存储在条目 ij 中。

我以为的`ij`意思`i*j`。但我想我可能错了。考虑

```
X = array([[1,2], [1,2], [3,4]])
dist_matrix = pdist(X) 
```

然后文档说`dist(X[0], X[2])`应该是`dist_matrix[0*2]`. 但是，`dist_matrix[0*2]`是 0——而不是应该的 2.8。

`i`给定和，我应该使用什么公式来访问两个向量的相似性`j`？

* * *

## 回答 #1

> 赞同：105
> 
> 时间：2012-10-26T02:01:22.267

你可以这样看：假设`x`是m乘n。可能的`m`行对，一次选择两个`itertools.combinations(range(m), 2)`，例如，对于`m=3`：

```
>>> import itertools
>>> list(combinations(range(3),2))
[(0, 1), (0, 2), (1, 2)] 
```

因此，如果`d = pdist(x)`， 中的第一个`k`元组给出与相关联`combinations(range(m), 2))`的行的索引。`x``d[k]`

例子：

```
>>> x = array([[0,10],[10,10],[20,20]])
>>> pdist(x)
array([ 10\.        ,  22.36067977,  14.14213562]) 
```

第一个元素是`dist(x[0], x[1])`，第二个是`dist(x[0], x[2])`，第三个是`dist(x[1], x[2])`。

或者您可以将其视为平方距离矩阵的上三角部分中的元素，串在一起形成一维数组。

例如

```
>>> squareform(pdist(x)) 
array([[  0\.   ,  10\.   ,  22.361],
       [ 10\.   ,   0\.   ,  14.142],
       [ 22.361,  14.142,   0\.   ]])

>>> y = array([[0,10],[10,10],[20,20],[10,0]])
>>> squareform(pdist(y)) 
array([[  0\.   ,  10\.   ,  22.361,  14.142],
       [ 10\.   ,   0\.   ,  14.142,  10\.   ],
       [ 22.361,  14.142,   0\.   ,  22.361],
       [ 14.142,  10\.   ,  22.361,   0\.   ]])
>>> pdist(y)
array([ 10\.   ,  22.361,  14.142,  14.142,  10\.   ,  22.361]) 
```

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2016-04-26T14:11:58.573

# 压缩距离矩阵到全距离矩阵

pdist 返回的压缩距离矩阵可以使用以下方法转换为全距离矩阵`scipy.spatial.distance.squareform`：

```
>>> import numpy as np
>>> from scipy.spatial.distance import pdist, squareform
>>> points = np.array([[0,1],[1,1],[3,5], [15, 5]])
>>> dist_condensed = pdist(points)
>>> dist_condensed
array([  1\.        ,   5\.        ,  15.5241747 ,   4.47213595,
        14.56021978,  12\.        ]) 
```

用于`squareform`转换为完整矩阵：

```
>>> dist = squareform(dist_condensed)
array([[  0\.        ,   1\.        ,   5\.        ,  15.5241747 ],
       [  1\.        ,   0\.        ,   4.47213595,  14.56021978],
       [  5\.        ,   4.47213595,   0\.        ,  12\.        ],
       [ 15.5241747 ,  14.56021978,  12\.        ,   0\.        ]]) 
```

点 i,j 之间的距离存储在 dist[i, j] 中：

```
>>> dist[2, 0]
5.0
>>> np.linalg.norm(points[2] - points[0])
5.0 
```

# 精简指数的指数

可以将用于访问方阵元素的索引转换为压缩矩阵中的索引：

```
def square_to_condensed(i, j, n):
    assert i != j, "no diagonal elements in condensed matrix"
    if i < j:
        i, j = j, i
    return n*j - j*(j+1)//2 + i - 1 - j 
```

例子：

```
>>> square_to_condensed(1, 2, len(points))
3
>>> dist_condensed[3]
4.4721359549995796
>>> dist[1,2]
4.4721359549995796 
```

# 精简索引到索引

没有 sqaureform 也可以实现另一个方向，这在运行时和内存消耗方面更好：

```
import math

def calc_row_idx(k, n):
    return int(math.ceil((1/2.) * (- (-8*k + 4 *n**2 -4*n - 7)**0.5 + 2*n -1) - 1))

def elem_in_i_rows(i, n):
    return i * (n - 1 - i) + (i*(i + 1))//2

def calc_col_idx(k, i, n):
    return int(n - elem_in_i_rows(i + 1, n) + k)

def condensed_to_square(k, n):
    i = calc_row_idx(k, n)
    j = calc_col_idx(k, i, n)
    return i, j 
```

例子：

```
>>> condensed_to_square(3, 4)
(1.0, 2.0) 
```

# 与 squareform 的运行时比较

```
>>> import numpy as np
>>> from scipy.spatial.distance import pdist, squareform
>>> points = np.random.random((10**4,3))
>>> %timeit dist_condensed = pdist(points)
1 loops, best of 3: 555 ms per loop 
```

创建 sqaureform 变得非常缓慢：

```
>>> dist_condensed = pdist(points)
>>> %timeit dist = squareform(dist_condensed)
1 loops, best of 3: 2.25 s per loop 
```

如果我们正在搜索最大距离的两个点，那么在全矩阵中搜索是 O(n) 而在压缩形式中只有 O(n/2) 也就不足为奇了：

```
>>> dist = squareform(dist_condensed)
>>> %timeit dist_condensed.argmax()
10 loops, best of 3: 45.2 ms per loop
>>> %timeit dist.argmax()
10 loops, best of 3: 93.3 ms per loop 
```

在这两种情况下，获取这两个点的索引几乎都不需要时间，但是计算压缩索引当然会有一些开销：

```
>>> idx_flat = dist.argmax()
>>> idx_condensed = dist.argmax()
>>> %timeit list(np.unravel_index(idx_flat, dist.shape))
100000 loops, best of 3: 2.28 µs per loop
>>> %timeit condensed_to_square(idx_condensed, len(points))
100000 loops, best of 3: 14.7 µs per loop 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2013-10-25T04:42:47.523

压缩矩阵的向量对应于方阵的底部三角形区域。要转换为该三角形区域中的点，您需要计算三角形左侧的点数以及列中上方的点数。

您可以使用以下函数进行转换：

```
q = lambda i,j,n: n*j - j*(j+1)/2 + i - 1 - j 
```

查看：

```
import numpy as np
from scipy.spatial.distance import pdist, squareform
x = np.random.uniform( size = 100 ).reshape( ( 50, 2 ) )
d = pdist( x )
ds = squareform( d )
for i in xrange( 1, 50 ):
    for j in xrange( i ):
        assert ds[ i, j ] == d[ q( i, j, 50 ) ] 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2019-04-03T11:10:05.300

我有同样的问题。而且我发现使用起来更简单`numpy.triu_indices`：

```
import numpy as np
from scipy.spatial.distance import pdist, squareform
N = 10

# Calculate distances
X = np.random.random((N,3))
dist_condensed = pdist(X)

# Get indexes: matrix indices of dist_condensed[i] are [a[i],b[i]]
a,b = np.triu_indices(N,k=1)

# Fill distance matrix
dist_matrix = np.zeros((N,N))
for i in range(len(dist_condensed)):
    dist_matrix[a[i],b[i]] = dist_condensed[i]
    dist_matrix[b[i],a[i]] = dist_condensed[i]

# Compare with squareform output
np.all(dist_matrix == squareform(dist_condensed)) 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2014-09-03T16:48:31.657

这是**上三角形**版本（**i < j**），这对某些人来说一定很有趣：

```
condensed_idx = lambda i,j,n: i*n + j - i*(i+1)/2 - i - 1 
```

这很容易理解：

1.  和`i*n + j`你一起去方阵中的位置；
2.  在 i 之前的所有行中`- i*(i+1)/2`删除下三角形（包括对角线）；
3.  与`- i`您一起删除对角线前 i 行中的位置；
4.  与`- 1`您一起删除对角线上第 i 行的位置。

查看：

```
import scipy
from scipy.spatial.distance import pdist, squareform
condensed_idx = lambda i,j,n: i*n + j - i*(i+1)/2 - i - 1
n = 50
dim = 2
x = scipy.random.uniform(size = n*dim).reshape((n, dim))
d = pdist(x)
ds = squareform(d)
for i in xrange(1, n-1):
    for j in xrange(i+1, n):
        assert ds[i, j] == d[condensed_idx(i, j, n)] 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2013-07-26T00:21:27.437

如果要访问与`pdist`平方距离矩阵的第 (i,j) 个元素对应的元素，则数学运算如下：假设`i < j`（否则翻转索引）如果`i == j`，则答案为 0。

```
X = random((N,m))
dist_matrix = pdist(X) 
```

那么第 (i,j) 个元素是 dist_matrix[ind] 其中

```
ind = (N - array(range(1,i+1))).sum()  + (j - 1 - i). 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2018-03-01T21:59:15.710

如果有人正在寻找逆变换（即给定一个元素索引`idx`，找出`(i, j)`对应的元素），这是一个合理的矢量解决方案：

```
def actual_indices(idx, n):
    n_row_elems = np.cumsum(np.arange(1, n)[::-1])
    ii = (n_row_elems[:, None] - 1 < idx[None, :]).sum(axis=0)
    shifts = np.concatenate([[0], n_row_elems])
    jj = np.arange(1, n)[ii] + idx - shifts[ii]
    return ii, jj

n = 5
k = 10
idx = np.random.randint(0, n, k)
a = pdist(np.random.rand(n, n))
b = squareform(a)

ii, jj = actual_indices(idx, n)]
assert np.allclose(b[ii, jj, a[idx]) 
```

我用它来计算矩阵中最近行的索引。

```
m = 3  # how many closest
lowest_dist_idx = np.argpartition(-a, -m)[-m:]
ii, jj = actual_indices(lowest_dist_idx, n)  # rows ii[0] and jj[0] are closest 
```

# iphone - Appcelerator：iPhone 上带有 iFrame 和宽度的 Webview

> ID：13079564
> 
> 赞同：0
> 
> 时间：2012-10-26T01:21:20.297
> 
> 标签：iphone, webview, appcelerator, appcelerator-mobile

晚上好，

我一直在使用内部具有 webview 的视图时遇到一些问题。webview 正在插入一个带有外部源的 iframe（另一个域上的 html）。我正在使用 iframe，因为我需要使用外部 HTML，并且我需要与我的应用程序与点击/触摸事件进行通信。

主要问题是 webview 正在插入不需要的水平滚动条（因为 iframe 内容太大）

代码如下所示：

**网页浏览：**

```
var webview = Titanium.UI.createWebView({
    url: "/html/local.html",
    width:Ti.UI.SIZE,
    height:Ti.UI.SIZE,
    contentWidth:Ti.UI.SIZE,
    contentHeight:Ti.UI.SIZE,
    disableBounce:true,
    enableZoomControls: false
});
self.add(webview); 
```

**框架：**

```
<html>
    <head>
        <meta name="viewport" content="width=320; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;"/>
        <meta http-equiv="cleartype" content="on">
        <script>
            function init () {
                window.theIframe.TiAPI = Ti.API;
                window.theIframe.TiApp = Ti.App;
            }
        </script>               
        <style>
            body {width:100%;margin:0;padding:0;background-color:#ccffff;}
        </style>
    </head>
    <body>
        <iframe name="theIframe" src="http://external.com/something.html" width="100%" height="100%" frameborder="0" onload="init()">
        </iframe>
    </body>
</html> 
```

**注意事项：**

*   这只发生在肖像上。它在 iPad 或 iPhone 上运行良好，具有横向视图。
*   如果在外部 html 下，我将 body 的最大宽度设置为 320px，它可以完美地工作。我不会这样做，因为我需要它在横向和 iPad 下工作。
*   如果我使用外部 html 作为 webview 的 URL，它也可以工作。所以这不是外部内容的问题，而是本地 html 或 webview 和 iframe 的问题。

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T05:02:19.970

也许在本地 HTML 文件中，您可以关闭 iframe 的滚动。 [http://www.w3schools.com/tags/att_iframe_scrolling.asp](http://www.w3schools.com/tags/att_iframe_scrolling.asp)

例如：

```
<html>
<head>
</head>
<body>
<iframe src="http://www.yahoo.com.au" scrolling="no"></iframe>
</body> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-08T22:13:47.463

在这里回答：[iframe size with CSS on iOS](https://stackoverflow.com/questions/16937070/iframe-size-with-css-on-ios)

只需将您的 iframe 包装在一个 div 中：

```
overflow: auto;
-webkit-overflow-scrolling:touch; 
```

[http://jsfiddle.net/R3PKB/7/](http://jsfiddle.net/R3PKB/7/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-17T05:14:44.533

我结束了对外部文件使用媒体查询，效果很好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-22T10:28:45.600

我也遇到了[同样的问题](https://stackoverflow.com/questions/20123960/how-to-get-iframe-width-100-in-iphone-portrait-view)，实际上设法找到了解决方案

我不知道为什么会发生这种情况，但是如果你想要 iframe 上的实际容器宽度，请改用这个 CSS：

```
 iframe {
        min-width: 100%; 
        width: 100px;
        *width: 100%;
    } 
```

# java - 简单的跨平台获取 Java 中知名的桌面路径？

> ID：13079565
> 
> 赞同：8
> 
> 时间：2012-10-26T01:21:47.010
> 
> 标签：java, settings, desktop, freedesktop.org

我正在 JVM 上寻找一种简单的跨平台方式，以获取用于存储应用程序设置和缓存数据的适当目录。例如，在 XDG 规范下的 Linux 上：

*   配置在`~/.config/appname`
*   缓存在`~/.cache/appname`

Windows 的东西进入`C\Users\user\Application Data`或类似的东西（在 Win 7 上）；我收集到 Mac 把东西放在`~/Library/Application Settings`.

是否有跨平台调用来获取这些路径位置？我一直没能找到一个，虽然我发现了几个问题。是否有一些库为最常见的桌面平台实现了正确的逻辑？

最坏的情况，我可以查找`user.home`并假装一切都是基于 XDG 的 Linux 环境。但如果很容易为用户的操作系统获取正确的目录，我愿意这样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T01:29:47.213

我们基本上设置了一个提供此信息的实用程序类，主要基于`user.home`and`os.name`系统属性。

我们有一系列方法可以让我们建立一个路径位置，比如......

```
SystemUtilities.getApplicationSettingsPath("Name of my awesome app"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T01:24:34.493

该类`FileSystemView`是我所知道的唯一一个包含对此类通用目录的访问权限的类，并且是跨平台的。[请参阅此处](http://docs.oracle.com/javase/7/docs/api/javax/swing/filechooser/FileSystemView.html)的文档

此类包含一些可能有用的方法，例如`getHomeDirectory()`和`getDefaultDirectory()`。此类`JFileChooser`用于 Swing 接口。我知道它并不直接指向配置和缓存目录，但它可能是您朝着正确方向迈出的一步。

对于我自己的应用程序，我采用次优方法，尝试将所有配置和设置包含在应用程序本身中 - 即。在安装应用程序的目录下创建一个“config”目录。尽管它不是整个操作系统配置的中心位置，但至少它保持在 java 应用程序上下文中。

# objective-c - 这是否可以限制仅适用于全尺寸 iPad 而不是 iPad mini 的应用程序？

> ID：13079568
> 
> 赞同：0
> 
> 时间：2012-10-26T01:22:22.410
> 
> 标签：objective-c, ios

是否有任何参数可以限制应用程序仅显示在全尺寸 iPad 而不是 iPad mini 上？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T01:48:54.887

我不明白您为什么需要这样做，正如 Leonneas 所说，分辨率与 iPad 2 相同，因此您无需像对 iPad 3 所做的那样进行任何调整。iPad Mini 无需修改即可运行所有 iPad 2 应用程序.

您无法在构建设置中测试任何可以将 iPad mini 与 iPad 2 或 3 区分开来的功能，因为它将配备摄像头并运行最新的操作系统。可能值得查看 UIDevice 类，如果您的应用程序在 iPad mini 上运行，以下可能会限制某些功能。

我没有查看模型属性返回的字符串，但我认为它包含模型版本。您需要等到 iPad mini 发布后才能获得正确的型号名称。“iPad 4,1”是一个假设，它可能是“iPad Mini 1,0”或完全不同的东西。

```
if(![[[UIDevice currentDevice] model] isEqualToString:@"iPad 4,1"])
{
     // Run code for all iPad's expect iPad Mini
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T01:52:45.087

您可以检查型号，但如果您这样做，它可能会在苹果商店被拒绝，因为苹果表示所有适用于 iPad 的应用程序都可以在 ipad Mini 上运行。

哦，如果您的应用程序适用于 iPad 2，那么您无需执行任何操作即可使其在 ipad mini 上运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T04:20:24.897

您不需要这样做，因为 iPad mini 屏幕的分辨率与 iPad 2 相同。GUI 是根据屏幕分辨率而不是屏幕尺寸呈现的。

# c# - 如何从文件快捷方式中获取路径名？获取异常

> ID：13079569
> 
> 赞同：12
> 
> 时间：2012-10-26T01:22:25.140
> 
> 标签：c#, windows-shell

> **可能重复：**
> [获取快捷方式文件夹的目标](https://stackoverflow.com/questions/9414152/get-target-of-shortcut-folder)

比如在`C:\TEMP\`我有一个快捷方式叫做`test.dll`快捷方式会导致文件名`test.dll`

我想从快捷方式只获取它自己的文件的路径名。所以，我在另一个递归函数中调用这个函数，并且每次从我的硬盘的另一个目录中放入这个函数。

例如，第一个目录`C:\TEMP`就在`C:\TEMP`那里，我想只获取文件路径的快捷方式文件。在`C:\TEMP`测试中，我现在有 3 个文件：

> hpwins23.dat
> hpwmdl23.dat
> hpwmdl23.dat - `Shortcut`( `C:\TEMP\hpwmdl23.dat`)

所以，我想得到的是快捷方式的路径名，在这种情况下是 C:\TEMP

我尝试使用此功能：

```
public string GetShortcutTargetFile(string shortcutFilename)
        {
            string pathOnly = System.IO.Path.GetDirectoryName(shortcutFilename);
            string filenameOnly = System.IO.Path.GetFileName(shortcutFilename);
            Shell shell = new Shell();
            Folder folder = shell.NameSpace(pathOnly);
            if (folder == null)
            {
            }
            else
            {
                FolderItem folderItem = folder.ParseName(filenameOnly);
                if (folderItem != null)
                {
                    Shell32.ShellLinkObject link = (Shell32.ShellLinkObject)folderItem.GetLink;
                    return link.Path;
                }
            }
            return string.Empty;
        } 
```

但是当我使用该函数并进入快捷方式时，我在线上遇到异常错误：

```
Shell32.ShellLinkObject link = (Shell32.ShellLinkObject)folderItem.GetLink //The exception is: NotImplementedException: The method or operation is not implemented 
```

我应该怎么做才能解决它？

这是完整的异常错误消息：

> `System.NotImplementedException`被捕获
> **消息**=方法或操作未实现。
> **来源**= `GatherLinks`
> **StackTrace** :
> at `Shell32.FolderItem.get_GetLink()`
> at `GatherLinks.Form1.GetShortcutTargetFile(String shortcutFilename)`in
> `D:\C-Sharp\GatherLinks\GatherLinks\GatherLinks\Form1.cs`: `line` `904`
> at`GatherLinks.Form1.offlinecrawling`

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-10-26T01:40:32.777

要获取快捷方式的目标（`.lnk`文件扩展名），您首先需要拥有以下`COM`对象：`Windows Script Host Object Model`

然后，您可以使用`WshShell`（或`WshShellClass`）和`IWshShortcut`接口来获取快捷方式的目标

**例子**

```
 string linkPathName = @"D:\Picrofo Autobot.lnk"; // Change this to the shortcut path

            if (System.IO.File.Exists(linkPathName))
            {
             // WshShellClass shell = new WshShellClass();
                WshShell shell = new WshShell(); //Create a new WshShell Interface
                IWshShortcut link = (IWshShortcut)shell.CreateShortcut(linkPathName); //Link the interface to our shortcut

                MessageBox.Show(link.TargetPath); //Show the target in a MessageBox using IWshShortcut
            } 
```

谢谢，
我希望你觉得这有帮助:)

* * *

您可以尝试以下步骤添加`Windows Script Host Object Model`到您的项目中

*   在**解决方案资源管理器**下，右键单击您的项目名称并选择**添加引用**
*   从弹出窗口中选择选项卡**COM**
*   在**Component Name**下，选择**Windows Script Host Object Model**
*   点击**确定**

# google-maps - 如何在没有预定义起点或终点的情况下找到图中所有节点之间的最短路径？

> ID：13079572
> 
> 赞同：3
> 
> 时间：2012-10-26T01:23:30.357
> 
> 标签：google-maps, graph, graph-theory, shortest-path

我想要得到的是：连接图中所有点的路径，但不必告诉算法从哪里开始和在哪里结束。

它需要在 google-maps api 中使用行车方向，但无需设置起点或终点。

这不是[TSP](http://en.wikipedia.org/wiki/Travelling_salesman_problem)问题，因为我没有“起始城市”，也不必回到“起始城市”。

正如这个问题所表达的：[Find the shortest path in a graph which visit certain nodes](https://stackoverflow.com/questions/222413/find-the-shortest-path-in-a-graph-which-visits-certain-nodes)，我可以只使用排列，因为我有几个节点，但问题是我需要分析这几个节点的几组所以我想要功能是最耗时的posible。

注意：我不是在寻找最小生成树，因为这也不是：[https](https://math.stackexchange.com/questions/130863/connecting-all-points-on-a-plane-with-shortest-path-possible) ://math.stackexchange.com/questions/130863/connecting-all-points-on-a-plane-with-shortest-path-possible 我想要一条告诉我，如果你先去这里，然后去那里，然后去那里，最后去那里，你会节省汽油。

**问题：**有没有可以帮助我的图书馆？或者它是一个已经有确切答案的已知问题？我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T03:00:55.607

听起来您想要一个*全对*最短路径算法。这是一类最短路径算法，它试图计算图中每对顶点之间的最短路径（或最短路径的长度）。

这是一个众所周知的问题，并且[存在解决方案](http://en.wikipedia.org/wiki/Johnson%27s_algorithm)。这是一些描述其他可能算法的[阅读材料。](http://en.wikipedia.org/wiki/Shortest_path_problem#Algorithms)可能有针对您选择的语言和开发环境的 Johnson 算法的实现。

请记住，从计算上讲，这是一个代价高昂的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T12:47:39.077

如果我理解正确，您希望 1 条路线访问所有节点，没有预定义的开始/结束，并且您希望它是最小的。一个可能的解决方案可能是稍微修改您的图表以允许旅行推销员算法获得完整的旅行。

您从图表开始并添加 1 个额外的节点`E`。您将该节点连接到图中的所有其他节点，并将所有这些边的成本设置为非常高的常数`M`。然后，您在该图上释放一个旅行推销员算法，该算法将为您提供一条`P`从`E`的路径，通过所有节点并返回到`E`。如果您删除`P`连接`E`到路径其余部分的 2 条边，您将拥有您正在寻找的东西。

一个快速直观的证明，它确实是您正在寻找的：假设它不是连接所有节点的最便宜的方式。让我们称之为所谓的更好的路径`Q`。`Q`并且`P`都连接原始图中的所有节点。的终点`Q`是`A`和`B`。这两个都将连接到`E`具有 cost 边缘的节点`M`。如果您将这两条边添加到`Q`，您将获得比 更好的 TSP 解决方案`P`，这是`P`最好的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-05T14:51:09.360

当您使用谷歌地图时，您的特定 TSP 实例可能满足三角不等式。你真的是在说距离还是旅行时间？

在距离的情况下：尝试谷歌搜索：“三角形旅行商问题”

重要提示：结果是具有保证上限的最佳结果的非常好的近似值，但并不总是最好的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-23T17:04:06.623

一种方法是使用（自组织的）**kohonen 网络**。
假设您在地图上有*n*个城市（在任何维度上都一样）。
取一串*n 个*连接的“神经元”并将其随机放置在地图上。然后你做了几次迭代，一次迭代包含：

1.  选择任何城市。（例如，以有序的方式浏览它们）
2.  确定“最近的”神经元，称之为*x*。（例如欧几里得距离）
3.  将这个*x*移动到更靠近城市的位置（例如，将方向向量从神经元到城市，并将其乘以学习率 0
4.  将该神经元的邻居也移向该城市（但小于 3.，取决于从邻居到“当前最近的”神经元*x*的距离）

可以在步骤 2、3 和 4 中选择各种功能。

还要注意，这可能不会给出全局最短路径，因为它取决于起始链的位置和其他不同的东西。为此，可以考虑在不同的起始条件下进行多次运行，或者（取决于问题）可以对预知识有所帮助。

我希望这有助于为更多的读者完成这个问题......

# php - 分页和 htaccess

> ID：13079574
> 
> 赞同：2
> 
> 时间：2012-10-26T01:24:05.700
> 
> 标签：php, .htaccess, pagination

我正在我的 htaccess 中寻找一些帮助，以便在使用分页功能时更好地处理我的 url。

目前我的 htaccess 看起来像这样：

```
RewriteEngine On RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

RewriteRule    ^([A-Za-z0-9-]+)/?$    index.php?alias=$1    [QSA,NC,L]
RewriteRule    ^([A-Za-z0-9-]+)/([A-Za-z0-9-]+)/?$    index.php?alias=$1/$2    [QSA,NC,L] 
```

基本上，我有两个规则。起初我只有第二个，将所有请求定向到我的索引页面，然后我解析出 url 的一些细节以显示正确的内容。我发现它不适用于只有一个子目录的 url，比如 example.com/bars，但只有两个目录，比如 example.com/bars/bar-name，所以我在它之前添加了规则。

这对我来说效果很好。我所有的 url 看起来都很棒，并且 ?alias=bars/bars-name 已完全隐藏，现在看起来像 /bars/bars-name

最近虽然我集成了一个分页php功能。此函数创建如下所示的 url：

```
example.com/bars?alias=bars&info=mysql_table_bars&page=2 
```

基本上，'info' 是分页函数查询的表名，'page' 是当前页面。一旦我开始使用此功能，似乎“别名”也开始显示在 url 中。

我希望我的分页看起来像这些例子：

```
example.com/bars/page/2
example.com/hotels/page/5
etc... 
```

我需要在我的 htaccess 中添加什么来处理这种情况？另外，有没有办法简化我现有的两条规则？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T19:00:37.280

关于你原来的规则。您仅适用于紧随其后的条件`RewriteRule`，因此您需要复制它们：

```
RewriteEngine On 
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule    ^([A-Za-z0-9-]+)/?$    index.php?alias=$1    [QSA,NC,L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule    ^([A-Za-z0-9-]+)/([A-Za-z0-9-]+)/?$    index.php?alias=$1/$2    [QSA,NC,L] 
```

对于新的分页内容，首先，*从查询字符串中提取数据库表名真的很糟糕*，除非它们已经以某种方式得到验证（这可能是正在发生的事情）。但即便如此，这仍然是一个信息披露问题。因此，您可以使用这些规则来始终删除它们：

```
# This matches the actual request when there's pagination in the query string
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /([^/\?]+)\?alias=([^&\ ]+)&info=.*&page=([0-9]+)

# an optional sanity check, does the request URI match the "alias" param?
RewriteCond %1:%2:%3 ^(.*):\1:(.*)$

# redirect the browser to the URL with the table name removed
RewriteRule ^ /%1/page/%2? [L,R=301] 
```

然后，您需要使用查询字符串在内部将它们重写回请求的规则：

```
# rewrite it back to the query string
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^/?([^/]+)/page/([0-9]+) /$1?alias=$1&info=mysql_table_$1&page=$2 [L] 
```

# javascript - Firebug lite - 属性更改中断 - IE

> ID：13079577
> 
> 赞同：0
> 
> 时间：2012-10-26T01:24:27.527
> 
> 标签：javascript, breakpoints, firebug-lite

我试图找出仅在 IE9 中更改属性的高度/宽度的原因。

有一个 Firebug 功能“属性更改中断” [https://getfirebug.com/wiki/index.php/Break_On_](https://getfirebug.com/wiki/index.php/Break_On_) ...

我在我的代码中包含了 firebug-lite 脚本。 [https://getfirebug.com/firebuglite](https://getfirebug.com/firebuglite)

但是不幸的是，右键单击 firebug lite 中的元素并没有弹出上下文菜单:(

firebug lite 是否支持“属性更改中断”？

还是有替代方法？

谢谢，拉斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T02:45:46.393

呜呼！！[通过http://help.dottoro.com/ljdchxcl.php](http://help.dottoro.com/ljdchxcl.php)了解如何在属性更改时显示消息

```
<body onload="InitListener ();">
....

<script type="text/javascript">
    function InitListener () {
        var elemToCheck = document.getElementById ("objectelementid");
        if (elemToCheck.addEventListener) { 
            // all browsers except IE before version 9
            elemToCheck.addEventListener ('DOMAttrModified', OnAttrModified, false);    
            // Firefox, Opera, IE
        }
        if (elemToCheck.attachEvent) {  
            // Internet Explorer and Opera
            elemToCheck.attachEvent ('onpropertychange', OnAttrModified);   
            // Internet Explorer
        }
        console.log("events attached");
        // Test the event works
        elemToCheck.setAttribute("width","333");
        console.log("something happened");
    }

    function OnAttrModified (event) {
        var message = "";
        if ('attrChange' in event) {    
            // Firefox, Opera, Internet Explorer from version 9
            message += "Something has happened to an attribute of the " +
                            event.target.tagName + " element.\n";
            message += "The value of the " + event.attrName +
                            " attribute has been changed from "
                        + event.prevValue + " to " + event.newValue + ".";
        }

        if ('propertyName' in event) {  // Internet Explorer
            message = "The " + event.propertyName + " property of the "
                       + event.srcElement.tagName + " element has been changed.";
        }

        console.log(message);
    }
</script> 
```

不幸的是，测试无效，似乎IE9如果没有宽度或高度会自动调整视频大小......必须是一个功能......深深的喜悦......

# javascript - 溢出不适用于 td 内的 div

> ID：13079581
> 
> 赞同：3
> 
> 时间：2012-10-26T01:25:06.853
> 
> 标签：javascript, jquery, css, css-tables

所以我试图让溢出属性为 td 中的 div 工作。但是，我以百分比设置**td的宽度。**因此，我不能用固定的像素数设置 div 的宽度（在 td 内），因为我不会提前知道它。

```
<table id="table">
<thead>
    <tr> 
        <th>column 1</th>
        <th>column 2</th>
    </tr>
</thead>
<tbody>
    <tr>
        <td><div class="cell">Aaaaaaaaaaaaaabbbbbbbbba</div></td>
        <td><div class="cell">bbbbbbbbbbbbbaaaaaaaaaaabb</div></td>
    </tr>
 </tbody>
</table>​

#table {
     width:100px !important;
}

th {
   width:16% !important;
   border: 1px solid black;
}

.cell{
    width:100%;
     overflow: hidden;
    text-overflow: ellipsis;
    -o-text-overflow: ellipsis;
    -webkit-text-overflow: ellipsis;
    white-space: nowrap;
   } 
```

​</p>

[http://jsfiddle.net/2Sync/](http://jsfiddle.net/2Sync/)

有任何想法吗？！

非常感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-26T01:39:46.137

您可能想尝试添加以下 CSS 规则：

```
#table{
    table-layout:fixed;
    overflow:hidden; 
    white-space: nowrap; 
} 
```

请在[这篇文章](https://stackoverflow.com/a/509825/786796)中查看更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T01:37:20.927

没关系...我使用了 table-layout:fixed; 它奏效了！

# php - 会话变量未结转到成员页面

> ID：13079583
> 
> 赞同：0
> 
> 时间：2012-10-26T01:25:14.243
> 
> 标签：php, session

我试图在登录页面中存储一个会话变量，然后将其传递到成员页面，但由于某种原因，当您转到成员页面时会话变量没有存储。

```
<?php
error_reporting(E_ALL ^ E_NOTICE);
session_start();
$userid = $_SESSION['userid'];
$username = $_SESSION['username'];

?> 
```

然后是一堆html。那么下一个php代码是......

```
<?php

$form = "<form action='login.php' method='post'>
<table>
<tr>
<td><input type='text' name='user' /></td>
</tr>
<tr>
<td><input type='password' name='password' /></td>
</tr>
<tr>
<td><input type='submit' name='loginbtn' value='Login' /></td>
</tr>
</table>
</form>";

if ($_POST['loginbtn']) {
$user = $_POST['user'];
$password = $_POST['password'];

if ($user) {
    if ($password){
        require("connect.php");

        $password = md5(md5("kjfiufj".$password."GSA54"));
        //make sure login info is correct
        $query = mysql_query("SELECT * FROM users WHERE username='$user'");
        $numrows = mysql_num_rows($query);

        if ($numrows == 1) {
            $row = mysql_fetch_assoc($query);
            $dbid = $row['id'];
            $dbuser = $row['username'];
            $dbpassword = $row['password'];
            $dbactive = $row['active'];

            if ($password == $dbpassword) {
                if ($dbactive == 1) {
                //set session info
                    $_SESSION['userid'] = $dbid;
                    $_SESSION['username'] = $username;

                    echo "logged in as        <strong>$dbuser</strong>. <a href='member.php'>Click here</a> to go to the member page.";
                }
                else
                    echo "User not active";
            }
            else
                echo "Wrong password.";
        }
        else
            echo "The username you entered was not found";

        mysql_close();
    }
    else 
        echo "What's the password brah?";

}
else 
    echo "What's the user name brah?";

}
else 
    echo $form;
?> 
```

会员页面的代码是

```
 <?php
error_reporting(E_ALL ^ E_NOTICE);
session_start();
$userid = $_SESSION['userid'];
$username = $_SESSION['username'];

?>

<?php
if ($username && $userid) {
    echo "Welcome <strong>$username</strong>,<a href='logout.php'>Logout</a>.";
}

else
    echo "Please login to acces this page <a href='login.php'>Login here</a>";

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T01:32:55.137

你`session_start()`在登录页面打电话吗？

`session_start()`如果您没有将 `session.auto_start`运行时配置选项设置为 ，则必须调用要访问会话变量的每个页面`true`。

**编辑**

实际上，您`$_SESSION['userid']`可能不是空的，因为您实际上是为它分配了一个已定义的变量`$_SESSION['userid'] = $dbid;`

但是，您通过为其分配似乎未定义`$_SESSION['username']`的值来创建您的。`$username`

也许

```
$_SESSION['username'] = $username; 
```

应该

```
$_SESSION['username'] = $dbuser; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T01:44:14.823

检查变量是否实际包含某些内容

```
session_start();
$userid = $_SESSION['userid'];
$username = $_SESSION['username'];

?>

<?php
if (strlen($username) >0 && strlen($userid)>0) {
    echo "Welcome <strong>$username</strong>,<a href='logout.php'>Logout</a>.";
} 
```

或检查会话变量是否已设置

```
session_start();
$userid = $_SESSION['userid'];
$username = $_SESSION['username'];

?>

<?php
if (isset($_SESSION['username']) && isset($_SESSION['userid'])) {
    echo "Welcome <strong>$username</strong>,<a href='logout.php'>Logout</a>.";
} 
```

# database - 用关系建模 3 个实体

> ID：13079586
> 
> 赞同：9
> 
> 时间：2012-10-26T01:25:47.283
> 
> 标签：database, database-design, entity, erd

假设我们的环境中有三个实体，**教师**、**学生**和**课程**。

*   每位教师都有（教授）1门或更多门课程，每门课程由0位或更多位教师提供
*   每个学生都修过 1 门或更多门课程，每门课程由 0 位或更多学生选修
*   每个教师有 0 个或多个学生，每个学生有 1 个或多个教师

在这种关系中，每个关系都可以从其他两个关系中推断出来，例如知道T1老师正在教哪些学生，通过*Teacher和Course*之间的关系，看看T1老师正在教什么课程，然后去通过*Course 和 Student*之间的关系来查看哪些学生上过这些课程。这些学生是 T1 老师正在教的学生。

所以我们不需要*Student 和 Teacher*之间的明确关系，因为“概念上”这种关系是存在的。

**最后**的问题是：

在**概念设计**中是否有必要展示所有三种关系？

作为额外的信息，在**逻辑设计**（设计数据库表和关系）中，关系应该保持为*推断关系*还是应该明确定义？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-26T15:16:52.960

这是一个例子，

**概念**（使用 NORMA）

![在此处输入图像描述](../Images/265dce8d134a5a04ae87277fc286b69c.png)

**老师讲课**

*   有可能某位教师教授不止一门课程，而对于某些课程，不止一位教师教授该课程。
*   在每个教师教授课程中，每个教师、课程组合最多出现一次。

**学生参加课程**

*   一些学生可能会学习不止一门课程，而对于某些课程，可能会有多个学生学习该课程。
*   在每个学生参加课程的人群中，每个学生，课程组合最多出现一次。

**教师辅导学生课程**

*   对于每个学生和课程，最多有一位教师指导该学生在该课程上的学习。

**约束**

*   对于每个教师和课程，当且仅当该教师教授该课程时，该教师在该课程上辅导某个学生。

*   对于每个学生和课程，当且仅当该学生参加该课程时，一些教师会在该课程上指导该学生。

* * *

**逻辑的**

![在此处输入图像描述](../Images/352872852d497edc48d543151e4af3be.png)

# python - 截断整数而不舍入？

> ID：13079588
> 
> 赞同：1
> 
> 时间：2012-10-26T01:26:04.897
> 
> 标签：python, floating-point, python-3.x, truncate

我制作了这个程序，它需要零钱并计算出多少整美元和剩余的零钱。它的设置方式是取零钱，例如 495，然后将其转换为美元，4.95。现在我想切断 .95 并留下 4，如果不四舍五入到 5，我该怎么做？谢谢！

```
def main():
pennies = int(input("Enter pennies : "))
nickels = int(input("Enter nickels : "))
dimes = int(input("Enter dimes : "))
quarters = int(input("Enter quarters : "))

computeValue(pennies, nickels, dimes, quarters)

def computeValue(p,n,d,q):
print("You entered : ")
print("\tPennies  : " , p)
print("\tNickels  : " , n)
print("\tDimes    : " , d)
print("\tQuarters : " , q)

totalCents = p + n*5 + d*10 + q*25
totalDollars = totalCents / 100
totalDollarsTrunc = int(format(totalDollars, '.0f'))
totalPennies = totalCents - (totalDollarsTrunc * 100)

print("Amount of Change = ", totalDollarsTrunc, "dollars and ", totalPennies ,"cents.")

if totalCents < 100:
    print("Amount not = to $1")
elif totalCents == 100:
    print("You have exactly $1.")
elif totalCents >100:
    print("Amount not = to $1")
else:
    print("Error") 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-26T01:27:38.950

在 Python 中，`int()`从 转换时截断`float`：

```
>>> int(4.95)
4 
```

也就是说，你可以重写

```
totalDollars = totalCents / 100
totalDollarsTrunc = int(format(totalDollars, '.0f'))
totalPennies = totalCents - (totalDollarsTrunc * 100) 
```

使用`divmod`功能：

```
totalDollars, totalPennies = divmod(totalCents, 100) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T01:27:54.803

您可能想要使用`math.ceil`或`math.floor`向您希望的方向进行四舍五入。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-26T01:28:11.810

函数**int()**将做到这一点

# wcf - 通过 webclient 调用 WCF 方法 - HTTP 400 - 错误请求

> ID：13079590
> 
> 赞同：0
> 
> 时间：2012-10-26T01:26:23.993
> 
> 标签：wcf, uri, webclient

我正在使用 WCF 服务并收到错误消息“远程服务器返回错误：(400) 错误请求。” 通过 WebClient 消费时

```
public class WebClientService : WebClient
            ...
            base.Credentials = CredentialCache.DefaultCredentials;
            base.OpenReadCompleted += new OpenReadCompletedEventHandler(ReadJsonStringAsyncComplete);
            base.OpenReadAsync(new Uri("http://localhost/xxxx.svc/GetData"));
            ... 
```

要消费的WCF服务如下（注意两者都存在于同一个解决方案中（不同的项目）

合约/接口：-

```
[OperationContract]
[WebInvoke(Method = "GET", UriTemplate = "/GetData", RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json)]
IList<MyType> GetData(); 
```

执行：-

```
public IList<MyType> GetData()
{
    return (new MyTypeRepository()).All.ToList();
} 
```

配置：-

```
<serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
<services>
  <service name="xxxx.Service.MyService" behaviorConfiguration="DataExtractBehavior">
    <endpoint address="http://localhost:1422/MyService.svc" binding="webHttpBinding" bindingConfiguration="DataExtractBinding" behaviorConfiguration="MyEndpointBehavior" contract="xxxx.Service.Common.IMyService"></endpoint>
  </service>
</services>
<behaviors>
  <endpointBehaviors>
    <behavior name="MyEndpointBehavior">
      <webHttp />
    </behavior>
  </endpointBehaviors>
  <serviceBehaviors>
    <behavior name="Default">
      <serviceMetadata httpGetEnabled="true" />
      <serviceDebug includeExceptionDetailInFaults="true" />
      <serviceAuthorization principalPermissionMode="UseAspNetRoles" />
      <serviceCredentials>
        <windowsAuthentication allowAnonymousLogons="false" includeWindowsGroups="true" />
      </serviceCredentials>
    </behavior>
    <behavior name="DataExtractBehavior">
      <serviceMetadata httpGetEnabled="true" />
      <serviceDebug includeExceptionDetailInFaults="true" />
      <etwTracking profileName="EndToEndMonitoring Tracking Profile" />
    </behavior>
    <behavior name="">
      <serviceMetadata httpGetEnabled="true" />
      <serviceDebug includeExceptionDetailInFaults="false" />
      <etwTracking profileName="EndToEndMonitoring Tracking Profile" />
    </behavior>
  </serviceBehaviors>
</behaviors>
<bindings>
  <webHttpBinding>
    <binding name="DataExtractBinding">
      <security mode="TransportCredentialOnly">
        <transport clientCredentialType="Windows"></transport>
      </security>
    </binding>
  </webHttpBinding>
</bindings> 
```

我可以通过查看服务定义页面，`http://localhost:1422/xxxx.svc`但是我似乎无法调用 GetData 方法（添加到 URI 的末尾 - `http://localhost:1422/xxxx.svc/GetData`）

有谁知道为什么我会收到 HTTP 400 - 错误请求

非常感谢特拉维斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T02:19:15.167

相同的代码对我来说工作正常。更改您的配置设置，如下所示，

```
 <endpointBehaviors>
    <behavior name="MyEndpointBehavior">
        <webHttp helpEnabled="true" automaticFormatSelectionEnabled="true" />
    </behavior>
  </endpointBehaviors> 
```

并浏览您的服务与`http://localhost:1422/xxxx.svc/help`您可以GetData 操作。现在尝试`http://localhost:1422/xxxx.svc/GetData`它会起作用。

此外，如果是这样，您的应用程序正在另一个端口（1422 以外）上运行，请转到您的应用程序（项目）-> 属性-> Web-> 特定端口（输入 1422）现在试试这个浏览。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T11:23:57.793

问题完全是我的错 - 我正在向上述服务发出“发布”请求，该服务被承包为“获取”请求

# mysql - 在 MySQL 存储过程中引发自定义错误

> ID：13079592
> 
> 赞同：0
> 
> 时间：2012-10-26T01:26:35.857
> 
> 标签：mysql, stored-procedures

我正在玩 MySQL 存储过程，我需要一些帮助来解决一些问题。下面我试图;

1）检查student_id在数据库中是否存在，如果存在则显示“校友已经存在” 2）检查输入的部门和学位参数是否不存在，如果不存在则显示“ *_*不存在存在”（旁注：这两列是外键）

现在，我的 IF 语句不起作用并引发任意错误。（例如，student_id 在表中不存在，但抛出错误“Alumni Exist Already”，这是其中之一）

我想知道我做错了什么。另外，如果我处理这个问题的方式有意义，如果没有，那么更务实的方式是什么？

谢谢

```
DELIMITER //
DROP PROCEDURE IF EXISTS sp_add_alumni//

CREATE PROCEDURE sp_add_alumni (
IN  student_id     INT(20),
IN     first_name     VARCHAR(255),
IN     last_name      VARCHAR(255),
IN     street         VARCHAR(255),
IN     city           VARCHAR(255),
IN     state          VARCHAR(2),
IN     zip_code       VARCHAR(15),
IN     email          VARCHAR(255),
IN     telephone      VARCHAR(22),
IN     degree         VARCHAR(255),
IN     department     VARCHAR(255)
)
BEGIN
     DECLARE studentID INT(20);
     DECLARE departmentVAL VARCHAR(255);
     DECLARE degreeVal VARCHAR(255);

     DECLARE EXIT HANDLER FOR SQLWARNING
          BEGIN
               ROLLBACK;
               SELECT 'ALUMNI INSERT HAS FAILED';
          END;

     SET studentID = student_id;
     SET departmentVal = department;
     SET degreeVal = degree;

     IF EXISTS (SELECT 1 FROM alumni WHERE student_id = studentID ) THEN
               SELECT 'ALUMNI ALREADY EXISTS';
     ELSEIF NOT EXISTS (SELECT 1 FROM valid_departments WHERE UCASE(department) = UCASE(departmentVal)) THEN
               SELECT 'DEPARTMENT DOES NOT EXISTS';
     ELSEIF NOT EXISTS (SELECT 1 FROM valid_degrees WHERE UCASE(degree) = UCASE(degreevVal)) THEN
               SELECT 'DEGREE DOES NOT EXISTS';
     ELSE  
              SELECT 'ALUMNI ADDED';
     END IF;

     START TRANSACTION;
        INSERT INTO alumni (student_id, pwd ,first_name, last_name, street, city, state, zip_code, email, telephone, degree, department, role_id, donation_total) VALUES (student_id, NULL ,first_name, last_name, street, city, state, zip_code, email, telephone, degree, department, 1, 0.00);
     COMMIT;
END// 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T02:00:18.300

1.  > 我想知道我做错了什么。

    如[对存储程序的限制中所述](http://dev.mysql.com/doc/en/stored-program-restrictions.html)：

    > ### 存储例程中的名称冲突
    > 
    > 相同的标识符可用于例程参数、局部变量和表列。此外，可以在嵌套块中使用相同的局部变量名称。例如：
    > 
    > ```
    > 创建过程 p (i INT)
    > 开始
    >   DECLARE i INT DEFAULT 0;
    >   从 t 中选择 i；
    >   开始
    >     DECLARE i INT DEFAULT 1;
    >     从 t 中选择 i；
    >   结尾;
    > 结尾;
    > 
    > ```
    > 
    > 在这种情况下，标识符不明确，适用以下优先规则：
    > 
    > *   局部变量优先于常规参数或表列。
    >     
    >     
    > *   例程参数优先于表列。
    >     
    >     
    > *   内部块中的局部变量优先于外部块中的局部变量。
    >     
    >     
    > 
    > 变量优先于表列的行为是非标准的。

    在您的情况下`student_id`是例程参数并且`studentID`是局部变量；因此（考虑到上面的优先规则）过滤器标准`WHERE student_id = studentID`将这两个东西相互比较，并且在任何时候都不会检查表列。

    由于局部变量设置为例程参数的值，因此此过滤器*始终*评估为真。

    您可以通过为参数/变量使用不同的名称来避免这种情况，或者通过使用表前缀限定列引用：

    ```
    WHERE alumni.student_id = studentID 
    ```

2.  > 另外，如果我处理这个问题的方式有意义，如果没有，那么更务实的方式是什么？

    定义合适`UNIQUE`的[外键](http://dev.mysql.com/doc/en/innodb-foreign-key-constraints.html)约束，然后尝试插入无效数据将失败，而无需您明确检查任何内容：

    ```
    ALTER TABLE alumni
      ADD UNIQUE  KEY (student_id),  -- is this not already a PRIMARY KEY ?
      ADD FOREIGN KEY (department) REFERENCES valid_departments (department),
      ADD FOREIGN KEY (degree    ) REFERENCES valid_degrees     (degree    )
    ; 
    ```

    要使外键使用不区分大小写的查找，请确保各个列使用不区分大小写的排序规则。

    请注意上面链接的文章中外键的限制。

# git - git 告诉我我所有的文件在添加和暂存后都是新的

> ID：13079604
> 
> 赞同：3
> 
> 时间：2012-10-26T01:27:47.550
> 
> 标签：git

git 告诉我我一直在添加/暂存/提交的所有 300 个文件现在都是新的。

最新的未暂存修改和删除的文件是正确的，我做了一个

```
 git add .
 git add . -A 
```

但两者都没有解决它仍然看到的 300 个新文件。

有点奇怪，就像我的回购已被破坏或损坏。自上次暂存和提交以来，我进行了相当多的更改，正如我所说，它认为这些已被修改或删除。

预计到达时间：

git status 正在显示（在我执行上述命令之后）

```
 [(master) +300 ~0 -0]> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T06:28:21.490

一种恢复方法是：

*   重新克隆 repo
*   将损坏的 repo 的所有工作树（不是其`.git`子目录）复制到新克隆并签出的工作树上。
*   让 git 检测*更改*（而不是新文件）

# android - android 和 facebook - 向用户墙发布自定义操作

> ID：13079605
> 
> 赞同：1
> 
> 时间：2012-10-26T01:27:48.207
> 
> 标签：android, facebook-graph-api

我一直在阅读最新版本的 facebook sdk 并且我在弄清楚如何在 facebook 上创建自定义操作然后从 android 设备发布到它时遇到了一些麻烦。我想使用最新的 3.0 版本的 sdk 发布用户位置以及照片和描述。我已经看到很多示例正在尝试使用旧版本的 sdk，但他们已经将其中的很多标记为已折旧。除了“阅读文档”之外的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T01:54:16.287

我认为您可以通过 Facebook API 使用常规 POST 请求发布包含该信息的图像。根据[此文档](https://developers.facebook.com/docs/reference/api/photo/)，您可以传递“消息”、“地点”的值。

如果您真的想创建自定义对象 - 使用 FB OpenGraph。创建一个新的动作类型，例如。“share”和新的对象类型“geo_picture”。然后使用您的新对象类型[facebook open-graph](https://stackoverflow.com/questions/9966859/android-facebook-open-graph)发布一个帖子 不幸的是，您必须为您的自定义对象创建一个页面，如此处[第 4 步](https://developers.facebook.com/docs/opengraph/tutorial/)中所述。

# c# - WPF 中 glOrtho 的等价物

> ID：13079610
> 
> 赞同：2
> 
> 时间：2012-10-26T01:28:42.267
> 
> 标签：c#, wpf, xaml

在 OpenGL 中，我可以这样做：

```
glOrtho(-10, 10, -10, 10, -1, 1) 
```

建立一个坐标系，其中x的范围是-10到10，y的范围是-10到10。

有没有办法在 WPF 中更改画布的坐标系？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-26T19:53:10.987

我在 Canvas 上创建了一个扩展方法，允许您设置笛卡尔坐标系。一个示例调用是：

```
canvas.SetCoordinateSystem(-10, 10, -10, 10) 
```

这将设置坐标系，`canvas`使 x 从 -10 变为 10，y 从 -10 变为 10。

这是扩展方法：

```
public static Canvas SetCoordinateSystem(this Canvas canvas, Double xMin, Double xMax, Double yMin, Double yMax)
{
    var width = xMax - xMin;
    var height = yMax - yMin;

    var translateX = -xMin;
    var translateY = height + yMin;

    var group = new TransformGroup();

    group.Children.Add(new TranslateTransform(translateX, -translateY));
    group.Children.Add(new ScaleTransform(canvas.ActualWidth / width, canvas.ActualHeight / -height));

    canvas.RenderTransform = group;

    return canvas;
} 
```

这是一个演示程序，它在画布上绘制 Sin(x) 以及 X 和 Y 轴：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;

namespace CanvasScale
{
    public static class CanvasUtils
    {
        public static Canvas SetCoordinateSystem(this Canvas canvas, Double xMin, Double xMax, Double yMin, Double yMax)
        {
            var width = xMax - xMin;
            var height = yMax - yMin;

            var translateX = -xMin;
            var translateY = height + yMin;

            var group = new TransformGroup();

            group.Children.Add(new TranslateTransform(translateX, -translateY));
            group.Children.Add(new ScaleTransform(canvas.ActualWidth / width, canvas.ActualHeight / -height));

            canvas.RenderTransform = group;

            return canvas;
        }
    }

    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();

            var canvas = new Canvas();

            Content = canvas;

            SizeChanged += (s, e) => canvas.SetCoordinateSystem(-10, 10, -10, 10);                

            canvas.Children.Add(new Line() { X1 = -10, Y1 = 0, X2 = 10, Y2 = 0, Stroke = Brushes.Black, StrokeThickness = 0.2 });
            canvas.Children.Add(new Line() { X1 = 0, Y1 = -10, X2 = 0, Y2 = 10, Stroke = Brushes.Black, StrokeThickness = 0.2 });

            var polyline = new Polyline()
            {
                Stroke = Brushes.BurlyWood,
                StrokeThickness = 0.1,
                Points = new PointCollection()
            };

            for (var x = -10.0; x <= 10.0; x += 0.1)
                polyline.Points.Add(new Point(x, Math.Sin(x)));

            canvas.Children.Add(polyline);
        }
    }
} 
```

这是它的样子：

![在此处输入图像描述](../Images/c7227259e91535b9abde92ab054da6c7.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T02:38:28.823

[`OrthographicCamera`](http://msdn.microsoft.com/en-us/library/system.windows.media.media3d.orthographiccamera.aspx)提供正交投影，而不是更常见的透视投影 ( `PerspectiveCamera`)。

要建立从相机可见的坐标“范围”，您可能不得不摆弄`Width`and`Position`属性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T07:11:52.530

只要您不同时设置`Canvas.Top`、或属性，就可以将 Canvas 中每个子项的`Canvas.Left`LayoutTransform[或](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.layouttransform.aspx)RenderTransform[属性](http://msdn.microsoft.com/en-us/library/system.windows.uielement.rendertransform.aspx)设置为适当的 TransformGroup 或[MatrixTransform](http://msdn.microsoft.com/en-us/library/system.windows.media.matrixtransform.aspx)：`Canvas.Right``Canvas.Bottom`

```
Rect viewport = new Rect(-10, -10, 20, 20);
double scaleX = ActualWidth / viewport.Width;
double scaleY = ActualHeight / viewport.Height;
RenderTransform = new MatrixTransform(
    scaleX, 0d, 0d, scaleY, -viewport.X * scaleX, -viewport.Y * scaleY); 
```

# iphone - UIImageView 边框颜色

> ID：13079612
> 
> 赞同：6
> 
> 时间：2012-10-26T01:28:56.850
> 
> 标签：iphone, objective-c, ios, xcode, cgcolor

我有以下代码：

```
UIColor *borderColor = [UIColor colorWithRed:182 green:10 blue:96 alpha:1.0];
[viewImage.layer setBorderColor:borderColor.CGColor];
[viewImage.layer setBorderWidth:3.0];
[productView addSubview:viewImage]; 
```

我的在哪里，`viewImage`我的在哪里。`UIImageView``productView``UIView`

我想得到这种颜色![在此处输入图像描述](../Images/dcbeb114c69fb42f5167c97b12891ccf.png)，但我得到的只是这种颜色![在此处输入图像描述](../Images/e378ae1b3c1177ed8de98ed982783e3d.png)。我尝试了不同的值，我得到的所有颜色都是白色、红色、黑色、黄色或蓝色。我无法获得任何其他颜色，无论我输入什么值。我试过 colorWithHue:Saturation:Brightness ，我也有同样的问题。

我在 iOS 6 SDK 上使用它。

我做错了什么，我该如何解决？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-26T05:07:19.393

```
#import <QuartzCore/QuartzCore.h>

[imageView.layer setBorderColor: [[UIColor blackColor] CGColor]];
[imageView.layer setBorderWidth: 2.0]; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-26T01:32:16.090

红绿蓝的值应该在 0.0 和 1.0 之间。来自 UIColor 文档：

低于 0.0 的值被解释为 0.0，高于 1.0 的值被解释为 1.0。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T04:29:46.383

尝试这个

```
UIColor *color = [UIColor colorWithRed:r/255.0 green:g/255.0 blue:b/255.0 alpha:1]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-04-11T10:59:35.250

斯威夫特 2.11 版（Xcode 7.2.1）：

```
let borderColor = UIColor(red:0, green:0, blue:0, alpha:1.0)
viewImage.layer.borderColor = borderColor.CGColor
viewImage.layer.borderWidth = 2.0 
```

# c# - 在 ASP.NET 中提取当前用户名

> ID：13079623
> 
> 赞同：0
> 
> 时间：2012-10-26T01:30:13.023
> 
> 标签：c#, asp.net

我希望 IIS 获取查看页面的人的 Active Directory 用户名。这可能吗？我以为我可以通过 ASP.NET 身份验证来做到这一点，但是当我尝试它时，我得到了“401 Unauthorized: Access is denied due to invalid credentials”错误消息。基本上，我想做的是让网页获取当前用户名，进行比较以查看此人是否是特定安全组的成员，如果是，则显示一些内容。使用 VS2010 内置测试服务器在我的本地 PC 上运行良好，但它只是在提取我的 AD 详细信息。现在我已经全部工作了，我想将它移动到运行 IIS7 的测试服务器上，让它在那里工作。

我在我的 default.aspx 代码背后的唯一代码（在我的本地机器上工作）如下：

```
string[] arr = System.Web.HttpContext.Current.Request.LogonUserIdentity.Name.Split('\\');

if (arr.Length > 0)
{
    lblDomain.Text = arr[0].ToString();
    lblUser.Text = arr[1].ToString();
} 
```

从我在这里找到的（http://stackoverflow.com/questions/10584545/activedirectory-current-username-in-asp-net）看起来我想要的是可能的，但我想知道这是否与我的代码背后。我也不确定我的 Web.Config 中是否需要一些特别的东西。我确实有以下内容，但出现 500 错误。

```
<authentication mode="Windows"/>
<identity impersonate="true"/> 
```

我已经尝试了上述 Stack Overflow 问题的答案，但仍然出现 500 个错误。任何提示将不胜感激。

还尝试了以下但仍然出现 500 错误。不知道哪里出错了。

```
string userName = System.Security.Principal.WindowsIdentity.GetCurrent().Name; 
```

和：

```
string userName = Environment.UserName; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T03:20:14.907

在 IIS 中，尝试启用 Windows 身份验证，然后禁用所有其他形式的身份验证（包括匿名）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T01:40:43.813

[如果打开模拟， Environment.UserName](http://msdn.microsoft.com/en-us/library/system.environment.username.aspx)将设置为您想要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T03:14:48.727

您可以使用

```
HttpContext.Current.User.Identity.Name

It will give you Domain\UserName 
```

# php - Flex 在列表项的视图之间传递数据

> ID：13079625
> 
> 赞同：0
> 
> 时间：2012-10-26T01:30:17.843
> 
> 标签：php, database, apache-flex, list, view

大家好，首先感谢您的关注和支持。我是弹性世界的初学者......我想做的事情可能太容易了，但我无法弄清楚。

我正在练习一个简单的移动应用程序，它利用数据库在 phpmyadmin 中创建并连接到我的移动项目。我想要做的是：当我单击任何列表项时，会弹出下一个视图，显示数据库表中所有文本输入中所选项目的值。我知道如何在我正在实现列表的视图中显示它，但是我收到一个错误，因为我在另一个视图中没有（也不想）列表项：

```
protected function list_changeHandler(event:IndexChangeEvent):void
        {
            titleTextInput.text = list.selectedItem.title;
            dateIntro.selectedDate = list.selectedItem.date;
            photoTextInput.text = list.selectedItem.photo;
            descriptionTextInput.text = list.selectedItem.description;
        } 
```

但是我需要做什么才能在我的其他观点中获得相同的结果？

该项目有2个视图，

这是第一个视图

```
<?xml version="1.0" encoding="utf-8"?>
<s:View xmlns:fx="http://ns.adobe.com/mxml/2009"
    xmlns:s="library://ns.adobe.com/flex/spark"
    xmlns:valueObjects="valueObjects.*"
    xmlns:detallesservice="services.detallesservice.*" add="home(event)">

<fx:Script>
    <![CDATA[
        import mx.events.FlexEvent;

        import spark.events.IndexChangeEvent;
        protected function button_clickHandler(event:MouseEvent):void
        {
            var detalles2:Detalles = new Detalles();
            detalles2.title = titleTextInput.text;
            detalles2.date = dateIntro.selectedDate;
            detalles2.photo = photoTextInput.text;
            detalles2.description = descriptionTextInput.text;

            detallesService.createDetalles(detalles2);
            detallesService.getAllDetalles();
        }

        protected function list_creationCompleteHandler(event:FlexEvent):void
        {
            getAllDetallesResult2.token = detallesService.getAllDetalles();
        }

        protected function button2_clickHandler(event:MouseEvent):void
        {
            detallesService.deleteDetalles(list.selectedItem.title);
        }

        protected function list_changeHandler(event:IndexChangeEvent):void
        {
            titleTextInput.text = list.selectedItem.title;
            dateIntro.selectedDate = list.selectedItem.date;
            photoTextInput.text = list.selectedItem.photo;
            descriptionTextInput.text = list.selectedItem.description;

            navigator.pushView(asyouwishView, list.selectedItem);
        }
    ]]>
</fx:Script>

<fx:Declarations>
    <valueObjects:Detalles id="detalles"/>
    <detallesservice:DetallesService id="detallesService"/>
    <s:CallResponder id="createDetallesResult"/>
    <s:CallResponder id="getAllDetallesResult2"/>
    <s:CallResponder id="deleteDetallesResult"/>
</fx:Declarations>
<s:List id="list" x="1100" y="142" width="716" height="372"
        creationComplete="list_creationCompleteHandler(event)" labelField="title" change="list_changeHandler(event)">
    <s:AsyncListView list="{getAllDetallesResult2.lastResult}"/>
</s:List>
<s:Form defaultButton="{button}">
    <s:FormItem label="Title">
        <s:TextInput id="titleTextInput" text="{detalles.title}"/>
    </s:FormItem>
    <s:FormItem width="800" label="Date">
        <s:DateSpinner id="dateIntro" displayMode="date" selectedDate="{detalles.date}"/>
    </s:FormItem>
    <s:FormItem label="Photo">
        <s:TextInput id="photoTextInput" text="{detalles.photo}"/>
    </s:FormItem>
    <s:FormItem label="Description">
        <s:TextInput id="descriptionTextInput" text="{detalles.description}"/>
    </s:FormItem>
    <s:Button id="button" label="CreateDetalles" click="button_clickHandler(event)"/>
</s:Form>
<s:Form x="18" y="950">
    <s:FormItem label="CreateDetalles">
        <s:TextInput id="createDetallesTextInput"
                     text="{createDetallesResult.lastResult as String}"/>
    </s:FormItem>
</s:Form>
<s:Button id="myDelete" x="1100" y="558" label="Delete" click="button2_clickHandler(event)"/> 
```

这是第二种观点：

```
<fx:Script>
    <![CDATA[
        import spark.events.ViewNavigatorEvent;
        protected function button_clickHandler(event:MouseEvent):void
        {
            // Please uncomment the below line if Data Management is enabled for Detalles and updateDetalles is used as the create function.
            // var detalles:Detalles = new Detalles();
            detalles.title = titleTextInput.text;
            detalles.date = dateIntro.selectedDate;
            detalles.photo = photoTextInput.text;
            detalles.description = descriptionTextInput.text;

            updateDetallesResult.token = detallesService.updateDetalles(detalles);
        }
    ]]>
</fx:Script>

<fx:Declarations>
    <valueObjects:Detalles id="detalles"/>
    <detallesservice:DetallesService id="detallesService"/>
    <s:CallResponder id="updateDetallesResult"/>
</fx:Declarations>

<s:actionContent>
    <s:Button label="BACK" click="{navigator.popView();}"/>
</s:actionContent>

<s:Form x="70" y="68" defaultButton="{button}">
    <s:FormItem label="Title">
        <s:TextInput id="titleTextInput" text="@{detalles.title}"/>
    </s:FormItem>
    <s:FormItem width="766" label="Date">
        <s:DateSpinner id="dateIntro" displayMode="date" selectedDate="@{detalles.date}"/>
    </s:FormItem>
    <s:FormItem label="Photo">
        <s:TextInput id="photoTextInput" text="@{detalles.photo}" />
    </s:FormItem>
    <s:FormItem label="Description">
        <s:TextInput id="descriptionTextInput" text="@{detalles.description}"/>
    </s:FormItem>
    <s:Button id="button" label="UpdateDetalles" click="button_clickHandler(event)"/>
</s:Form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T08:46:38.493

学习和使用框架是必要的。我推荐[Swizframework](http://swizframework.org)。

Swiz 中的数据绑定和事件轻而易举。你会喜欢的。

# javascript - javascript 如果数字大于数字

> ID：13079626
> 
> 赞同：25
> 
> 时间：2012-10-26T01:30:26.630
> 
> 标签：javascript, forms

我有这个javascript函数来验证一个数字是否大于另一个数字

```
function validateForm() {
    var x = document.forms["frmOrder"]["txtTotal"].value;
    var y = document.forms["frmOrder"]["totalpoints"].value;

    if (x > y) {
        alert("Sorry, you don't have enough points");
        return false;
    }
} 
```

由于某种原因它不起作用。

如果我这样做，`alert(x)`我得到 1300，并`alert(y)`给出 999

这有效....

```
function validateForm() {
    var x = 1300;
    var y = 999;

    if (x > y) {
        alert("Sorry, you don't have enough points");
        return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-10-26T01:34:23.170

您应该在比较之前将它们转换为数字。

尝试：

```
if (+x > +y) {
  //...
} 
```

或者

```
if (Number(x) > Number(y)) {
  // ...
} 
```

***注意：*** `parseFloat` and`pareseInt`（用于比较整数，并且您需要指定**基数**）会给您`NaN`一个空字符串，比较`NaN`总是会是`false`，如果您不想将空字符串视为是`0`，那么您可以使用它们。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-26T01:36:39.740

您可以使用 Number 构造函数“转换”为数字。

```
var number = new Number("8"); // 8 number 
```

您还可以调用 parseInt 内置函数：

```
var number = parseInt("153"); // 153 number 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-26T01:42:46.323

您正在比较字符串。JavaScript 比较字符串中每个字符的 ASCII 码。

要了解您为什么会出错，请查看 charCodes：

```
"1300".charCodeAt(0);
49
"999".charCodeAt(0);
57 
```

比较是假的，因为在比较字符串时，1 的字符代码不大于 9 的字符代码。

解决方法是将字符串视为数字。您可以使用多种方法：

```
parseInt(string, radix)
parseInt("1300", 10);
> 1300 - notice the lack of quotes

+"1300"
> 1300

Number("1300")
> 1300 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-26T01:34:32.673

做这个。

```
var x=parseInt(document.forms["frmOrder"]["txtTotal"].value);
var y=parseInt(document.forms["frmOrder"]["totalpoints"].value); 
```

# xcode - 弹出按钮菜单项

> ID：13079629
> 
> 赞同：6
> 
> 时间：2012-10-26T01:30:53.983
> 
> 标签：xcode, popup, interface-builder, xcode4.5

好的，我在 Xcode 4.5.1 中使用 Interface Builder，并且刚刚在窗口中添加了一个弹出按钮。如果我点击，我会看到“项目 1”、“项目 2”、“项目 3”，它们是可编辑的。我期待在属性或身份检查器中看到一些东西，让我定义菜单中有多少这些项目，但那里什么都没有。我已经看了好几个小时了。这些在哪里可以定义？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-26T01:35:46.510

它数字......就在我放弃并尝试其他事情时：右下角带有三角形的圆形按钮让我“显示文档大纲”。在这里，大纲元素是可编辑的，复制粘贴，更改名称等。

因此，在“Menu - OtherViews”下，“Menu Item - ...”可以删除或复制/粘贴以添加。

这花了我生命中的几个小时，我永远不会回来，我希望其他人会发现这个提示有用。

# android - Facebook asmack xmpp 客户端返回名册的随机数

> ID：13079632
> 
> 赞同：2
> 
> 时间：2012-10-26T01:31:33.500
> 
> 标签：android, facebook, xmpp, asmack

我按照以下 SO 问题中给出的指导方针使用 xmpp 连接到 facebook 聊天，我能够连接到 facebook 并提取正确数量的联系人，但是当它打印联系人时，它们都是随机数字 @chat.facebook.com 和全部返回离线。

[Android Facebook 聊天示例项目](https://stackoverflow.com/questions/10946508/android-facebook-chat-example-project/11238124#11238124)

```
public void connectToFb() throws XMPPException {

        ConnectionConfiguration config = new ConnectionConfiguration("chat.facebook.com", 5222);
        config.setSASLAuthenticationEnabled(true);
        config.setSecurityMode(SecurityMode.required);
        config.setRosterLoadedAtLogin(true);
        config.setTruststorePath("/system/etc/security/cacerts.bks");
        config.setTruststorePassword("changeit");
        config.setTruststoreType("bks");
        config.setSendPresence(false);
        try {
            SSLContext sc = SSLContext.getInstance("TLS");
            sc.init(null, MemorizingTrustManager.getInstanceList(this), new java.security.SecureRandom());
            config.setCustomSSLContext(sc);
        } catch (GeneralSecurityException e) {
            Log.w("TAG", "Unable to use MemorizingTrustManager", e);
        }
        XMPPConnection xmpp = new XMPPConnection(config);
        try {
            xmpp.connect();
            xmpp.login("user.name", "password"); // Here you have to used only facebookusername from facebookusername@chat.facebook.com
            Roster roster = xmpp.getRoster();
            Collection<RosterEntry> entries = roster.getEntries();
            System.out.println("Connected!");
            System.out.println("\n\n" + entries.size() + " buddy(ies):");
            // shows first time onliners---->
            String temp[] = new String[50];
            int i = 0;
            for (RosterEntry entry : entries) {
                String user = entry.getUser();
                Log.i("TAG", user);
            }
        } catch (XMPPException e) {
            xmpp.disconnect();
            e.printStackTrace();
        }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T16:22:07.270

听起来您只想读取名称，因此请尝试使用

```
rosterEntry.getName() 
```

它返回用户名，而不是

```
rosterEntry.getUser() 
```

它返回 JID。

虽然不确定您的离线问题。你怎么检查？您必须设置一个[名册侦听](http://www.igniterealtime.org/builds/smack/docs/latest/documentation/roster.html)器才能获得在场的变化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T07:50:02.020

它是 XMPP 库中的一个错误。有一个解决方法。

**第 1 步：**连接到 XMPP。

**步骤 2：**通过 xmpp 登录到 facebook 帐户。

**第 3 步：**使用此 fql 查询获取在线好友列表。

```
 SELECT uid, name, online_presence ,
      sex FROM user WHERE uid IN (SELECT uid2 FROM friend WHERE uid1 = me()) 
```

然后我将地址与字符串**uid@chat.facebook.com 连接** 并通过 XMPP 进行通信。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T23:48:26.010

（不是 100% 清楚您在在线/离线方面遇到的问题可能是错误或您做错了什么），但您不会在响应中取回用户的实际用户 ID，这是提到的在文档中：

`The user's own Jabber ID (JID) is different from the Jabber ID that their contacts will see because the translation is done internally.`

# android - Android：如何在 MainThread 中等待 AsyncTask 完成？

> ID：13079645
> 
> 赞同：13
> 
> 时间：2012-10-26T01:33:39.740
> 
> 标签：android, android-asynctask, handler, solution

我知道你首先要做的是......为什么你会使用 AsyncTask。

所以这是我的问题，我正在开发一些 Android 应用程序（Android 2.1 或更高版本的 API 7），我正在模拟器上进行测试，一切都很好，所以我在 HTC Sensation 上进行了测试，上面写着 NetworkOnMainThreadExeption！

我正在下载一些图片，然后在地图上绘制。

因此，在这种情况下，为了解决这个问题，每次（互联网连接）下载图片我必须放在 AsyncTask 上才能工作。

所以我需要一种方法来知道所有图片何时完成，这样我就可以开始画画了。

我尝试了这么多，没有结果我不知道。我得到了一个带有处理程序的解决方案，但如果在较慢的网络上运行，我会得到空指针（因为没有下载图片）。

所以请帮助我。

编辑：

这是想法：

```
Bitmap bubbleIcon ;
    onCreate(){
     ...
// i am making call for Async
new ImgDown().execute(url);
//and then i calling functions and classes to draw with that picture bubbleIcon !
DrawOnMap(bubbleIcon);
}

//THIS IS ASYNC AND FOR EX. SUPPOSE I NEED TO DOWNLOAD THE PIC FIRST
     class ImgDown extends AsyncTask<String, Void, Bitmap> {

        private String url;

        public ImgDown() {
        }

        @Override
        protected Bitmap doInBackground(String... params) {
            url = params[0];
            try {
                return getBitmapFromURL(url);
            } catch (Exception err) {
            }

            return null;

        }

        @Override
        protected void onPostExecute(Bitmap result) {
            bubbleIcon = result;
            bubbleIcon = Bitmap
                    .createScaledBitmap(bubbleIcon, 70, 70, true);

        }

        public Bitmap getBitmapFromURL(String src) {
            try {
                Log.e("src", src);
                URL url = new URL(src);
                HttpURLConnection connection = (HttpURLConnection) url
                        .openConnection();
                connection.setDoInput(true);
                connection.connect();
                InputStream input = connection.getInputStream();
                // /tuka decode na slika vo pomalecuk kvalitet!
                BitmapFactory.Options options = new BitmapFactory.Options();
                options.inSampleSize = 3;
                Bitmap myBitmap = BitmapFactory
                        .decodeStream(new FlushedInputStream(input));
                Log.e("Bitmap", "returned");
                return myBitmap;
            } catch (IOException e) {
                e.printStackTrace();
                Log.e("getBitmapFromURL", e.getMessage());
                return null;
            }
        }

        class FlushedInputStream extends FilterInputStream {
            public FlushedInputStream(InputStream inputStream) {
                super(inputStream);
            }

            public long skip(long n) throws IOException {
                long totalBytesSkipped = 0L;
                while (totalBytesSkipped < n) {
                    long bytesSkipped = in.skip(n - totalBytesSkipped);
                    if (bytesSkipped == 0L) {
                        int byteValue = read();
                        if (byteValue < 0) {
                            break; // we reached EOF
                        } else {
                            bytesSkipped = 1; // we read one byte
                        }
                    }
                    totalBytesSkipped += bytesSkipped;
                }
                return totalBytesSkipped;
            }
        }
    } 
```

我希望现在更清楚。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-10-26T02:20:44.430

```
class OpenWorkTask extends AsyncTask {

    @Override
    protected Boolean doInBackground(String... params) {
        // do something
        return true;
    }

    @Override
    protected void onPostExecute(Boolean result) {
        // The results of the above method
        // Processing the results here
        myHandler.sendEmptyMessage(0);
    }

}

Handler myHandler = new Handler() {

    @Override
    public void handleMessage(Message msg) {
        switch (msg.what) {
        case 0:
            // calling to this function from other pleaces
            // The notice call method of doing things
            break;
        default:
            break;
        }
    }
}; 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-12-30T12:48:18.907

您可以使用 OOP 原则编写自己的 Delegate 来委托有关完成任务的信息：

**task_delegate.java**

```
public interface TaskDelegate {
    void TaskCompletionResult(String result);
} 
```

**main_activity.java**

```
public class MainActivity extends Activity implements TaskDelegate {

    //call this method when you need     
    private void startAsynctask() {
      myAsyncTask = new MyAsyncTask(this);
      myAsyncTask.execute();
     }

//your code

    @Override
    public void TaskCompletionResult(String result) {
        GetSomethingByResult(result);
    }
} 
```

**my_asynctask.java**

```
public class MyAsyncTask extends AsyncTask<Void, Integer, String> {

    private TaskDelegate delegate;

    protected MyAsyncTask(TaskDelegate delegate) {
        this.delegate = delegate;
    }

    //your code 

    @Override
    protected void onPostExecute(String result) {

        delegate.TaskCompletionResult(result);
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-26T02:02:59.143

```
class openWorkTask extends AsyncTask<String, String, Boolean> {

    @Override
    protected Boolean doInBackground(String... params) {
        //do something
        return true;
    }

    @Override
    protected void onPostExecute(Boolean result) {
        // The results of the above method
        // Processing the results here
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T02:11:11.797

如果我是你，我会使用进度对话框。这样，用户可以在 ASyncTask 下载图片时看到正在发生的事情。在 PostExecute 上，从您的主代码中调用一个方法来检查图片是否为空。请记住，您无法在 doInBackground 方法中更新 UI，因此任何 UI 都可以在 onPreExecute 或 onPostExecute 中工作

```
private class DownloadPictures extends AsyncTask<String, Void, String> 
{

    ProgressDialog progressDialog;

    @Override
    protected String doInBackground(String... params) 
    {

        //Download your pictures

        return null;

    }

    @Override
    protected void onPostExecute(String result) 
    {

        progressDialog.cancel();

        //Call your method that checks if the pictures were downloaded

    }

    @Override
    protected void onPreExecute() {

        progressDialog = new ProgressDialog(
                YourActivity.this);
        progressDialog.setMessage("Downloading...");
        progressDialog.setCancelable(false);
        progressDialog.show();

    }

    @Override
    protected void onProgressUpdate(Void... values) {
        // Do nothing
    }

} 
```

# javascript - 如何在主页中获取 javascript 以使用 jquery 附加到 ajax 加载的 div 中的元素？

> ID：13079647
> 
> 赞同：0
> 
> 时间：2012-10-26T01:34:07.370
> 
> 标签：javascript, jquery, ajax, load, getscript

我正在使用 jquery 加载功能来切换一个 div。每当我通过需要运行 javascript 的 ajax 加载某个元素时，它就无法在 div 中工作。我知道这是因为在初始页面加载时 dom 中不存在该元素。

我已经用谷歌搜索了几天，但没有找到可以给我一个易于理解的解释的答案。本质上，我被告知只使用`.on`or `$getScript`。

但是，这似乎不是合适的答案。因为，在 div 中加载的每个元素都具有相似的属性——我只是想加载 jquery 库，以及我的索引页面的 head 部分中相同的两个外部脚本——然后确保这些脚本保持“活动”或附加到简单的通过 ajax 从外部加载到 div 中的 html 内容。

因此，例如，如果`page 1`有一个名为 bouncingcats 的 div 和`page 2`一个名为 bouncingdogs 的 div -两者都需要一个名为“bounce”的外部 javascript -我想在我的索引页面的 head 部分加载 javascript 文件“bounce”一次- 然后在我的索引页面上用猫或狗动态交换名为 bouncinganimals 的 div。

到目前为止，似乎我得到的唯一建议是将 jquery 库和*`bounce.js`*文件`page 1`放在`page 2`. 这当然有效 - 但它似乎太多余了，当然会减慢 ajax 负载。

你知道我可以在我的索引页面头中加载 jquery 库和外部 javascript 页面一次，并在我通过 ajax 将内容加载到我的 div 时让它们运行的​​方法吗？

我遇到的一个问题是我自己没有编写脚本`bounce.js`- 而且它已经被最小化了 - 所以更改脚本可能会非常困难。有什么我可以自己包裹外部javascript链接的东西吗？

# c - 如何在 Linux 中找到 C 编程语言的头文件？

> ID：13079650
> 
> 赞同：69
> 
> 时间：2012-10-26T01:34:30.843
> 
> 标签：c, linux, gcc, header-files

当我在 Linux 中编写 C 程序，然后使用 gcc 编译它们时，我总是很好奇那些头文件在哪里。例如，在哪里`stdio.h`。更一般地说，在哪里`stdbool.h`？

我想知道的不仅是它在哪里，还想知道如何到达那些地方，例如使用shell命令或使用C编程语言。

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-10-26T02:44:43.103

`gcc -H ...`将打印每个包含文件的完整路径作为常规编译的副作用。使用`-fsyntax-only`除了得到它不创建任何输出（它仍然会告诉你如果你的程序有错误）。示例（Linux，gcc-4.7）：

```
$ cat > test.c
#include <stdbool.h>
#include <stdio.h>
^D
$ gcc -H -fsyntax-only test.c
. /usr/lib/gcc/x86_64-linux-gnu/4.7/include/stdbool.h
. /usr/include/stdio.h
.. /usr/include/features.h
... /usr/include/x86_64-linux-gnu/bits/predefs.h
... /usr/include/x86_64-linux-gnu/sys/cdefs.h
.... /usr/include/x86_64-linux-gnu/bits/wordsize.h
... /usr/include/x86_64-linux-gnu/gnu/stubs.h
.... /usr/include/x86_64-linux-gnu/bits/wordsize.h
.... /usr/include/x86_64-linux-gnu/gnu/stubs-64.h
.. /usr/lib/gcc/x86_64-linux-gnu/4.7/include/stddef.h
.. /usr/include/x86_64-linux-gnu/bits/types.h
... /usr/include/x86_64-linux-gnu/bits/wordsize.h
... /usr/include/x86_64-linux-gnu/bits/typesizes.h
.. /usr/include/libio.h
... /usr/include/_G_config.h
.... /usr/lib/gcc/x86_64-linux-gnu/4.7/include/stddef.h
.... /usr/include/wchar.h
... /usr/lib/gcc/x86_64-linux-gnu/4.7/include/stdarg.h
.. /usr/include/x86_64-linux-gnu/bits/stdio_lim.h
.. /usr/include/x86_64-linux-gnu/bits/sys_errlist.h 
```

每行开头的点计算嵌套的深度`#include`。

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2012-10-26T02:51:18.400

如果您使用 gcc，您可以使用以下内容检查特定文件：

```
echo '#include <stdbool.h>' | cpp -H -o /dev/null 2>&1 | head -n1 
```

`-H`要求预处理器以递归方式打印所有包含的文件。 `head -n1`仅获取第一行输出，忽略命名标头中包含的任何文件（尽管 stdbool.h 特别可能没有）。

例如，在我的计算机上，上述输出：

```
. /usr/lib/gcc/x86_64-linux-gnu/4.6/include/stdbool.h 
```

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2012-10-26T01:39:13.687

```
locate stdio.h 
```

或者

```
mlocate stdio.h 
```

但`locate`依赖于数据库，如果您从未更新过它

```
sudo updatedb 
```

您还可以查询`gcc`了解哪些是`gcc`自己扫描的默认目录：

```
gcc -print-search-dirs 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-10-26T03:31:58.590

在预处理期间，所有预处理器指令都将替换为实际值。像宏扩展，代码注释去除，包括头文件源代码等...

我们可以使用`cpp`-C PreProcessor 命令来检查它。

例如在命令行中：

```
cpp Filename.c 
```

显示预处理的输出。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-10-26T01:37:20.487

如果您知道包含文件的名称，一种方法是使用 find：

```
cd /
find . -name "stdio.h"
find . -name "std*.h" 
```

这需要一段时间，因为它会遍历每个目录。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-26T01:36:56.973

使用`gcc -v`，您可以检查包含路径。通常，包含文件在库安装中`/usr/include`或`/usr/local/include`取决于库安装。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-26T01:37:35.447

大多数标准头文件存储在`/usr/include`. 它看起来像`stdbool.h`存储在其他地方，并且取决于您使用的编译器。例如，g++ 将其存储在，`/usr/include/c++/4.7.2/tr1/stdbool.h`而 clang 将其存储在`/usr/lib/clang/3.1/include/stdbool.h`.

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-10-26T02:25:35.023

我认为通用路径是：

/usr/lib/gcc/$(ls /usr/lib/gcc/)/$(gcc -v 2>&1 | tail -1 | awk '{print $3}')/include/stdbool.h

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-01-24T06:58:36.020

当我在寻找（在 Fedora 25 上）时，我使用了“whereis stdio.h”对我来说，它在 /usr/include/stdio.h、/usr/shar/man/man3/stdio、3.gx 中。但是在查找文件时，请使用 whereis 或 locate

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-06-17T09:50:20.363

使用 vim 打开源文件并将诅咒放在 stdio.h 上，在正常模式下，命令“ **gf** ”将让 vim 为你打开 stdio.h 文件。

' **Ctr + g** ' 会让 vim 显示 stdio.h 的绝对路径

# python - 如何使用 SQLAlchemy、自动加载和 Pyramid？

> ID：13079653
> 
> 赞同：1
> 
> 时间：2012-10-26T01:34:50.790
> 
> 标签：python, sqlalchemy, pyramid

我试图让 SQLAlchemy 自动加载我的表列（如果重要的话，使用 MySQL）。我有：

```
DBSession = scoped_session(sessionmaker(extension=ZopeTransactionExtension()))
Base = declarative_base()    

class User(object):
    __tablename__ = 'users'
    __table_args__ = {'schema': 'users', 'autoload': True} 
```

这是我的错误：

```
InvalidRequestError: SQL expression, column, or mapped entity expected - got '<class 'myproject.models.User'>' 
```

我添加了一个`__init__`函数，但仍然得到同样的错误：

```
def __init__(self,col1,col2):
    self.col1 = col1 
    self.col2 = col2 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T01:47:18.157

您的`User`班级应该`Base`作为其父母，而不是`object`：

```
DBSession = scoped_session(sessionmaker(extension=ZopeTransactionExtension()))
engine = create_engine(db_string, echo=db_echo)
Base = declarative_base()    
Base.metadata.bind = engine

class User(Base):
    __tablename__ = 'users'
    __table_args__ = {'schema': 'users', 'autoload': True} 
```

# titanium - 如何在 Appcelerator Alloy 中运行迁移

> ID：13079655
> 
> 赞同：1
> 
> 时间：2012-10-26T01:35:26.993
> 
> 标签：titanium, appcelerator

我正在使用 Titanium Appcelerator 并使用 Alloy Framework 开发 iOS 应用程序。我已运行以下命令并在我的 app/migrations 文件夹中生成了一个迁移文件 (20120926011253_User.js)：

```
alloy generate model User sql name:string phone:string gender:string last_updated:datetime 
```

如何运行此迁移并实际在 SQLite 数据库中创建表？我在网上找不到如何做到这一点，并尝试了我能想到的命令。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-27T00:18:13.627

您不必担心运行迁移。在您生成模型+迁移文件并编译后，alloy 会在您启动应用程序时负责运行迁移。

查看这些生成的文件以获得更好的想法：/Resources/alloy/model/*.js 用于生成的模型。在这些文件中，alloy 调用了 /Resources/alloy.js 中定义的 MODEL.M 函数。

MODEL.M 调用*beforeModelCreate*，后者又调用*InitAdapter*，这是数据库的初始化位置。合金使用的默认数据库是每个应用程序的“_alloy_”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-16T12:16:56.123

使用 Titanium Studio 检查此迁移教程

[http://bit.ly/AlloyMigration](http://bit.ly/AlloyMigration)

# scheme - 澄清球拍中的 `assoc` 语法

> ID：13079658
> 
> 赞同：2
> 
> 时间：2012-10-26T01:36:03.313
> 
> 标签：scheme, racket

我正在尝试`assoc`在球拍中使用来创建一个备忘录表，并希望将有序对 (x,y) 与一个值相关联，但我对语法有点不清楚。

例如我有：

```
[f (lambda (x y)
               (let ([ans (assoc [x y] memo)]) 
```

但这是不正确的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T01:39:08.753

该[`assoc`](http://docs.racket-lang.org/reference/pairs.html#%28def._%28%28lib._racket%2Fprivate%2Flist..rkt%29._assoc%29%29)过程接收您要查找的元素的“键”作为其第一个参数，并将关联列表作为第二个参数 - 在这种情况下，*关联*只是一个键值对。它将返回与给定键对应的第一个关联，或者`#f`如果没有找到。例如：

```
(assoc 'x '((a 1) (b 2) (x 3) (c 4)))
> '(x 3) 
```

如果您需要使用对作为键，那很好，它会像这样工作：

```
(assoc (list 1 2) '(((1 2) x) ((3 4) y)))
> '((1 2) x) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-26T20:24:48.983

另外，在专业级的 Racket 中，您还可以使用[哈希表](http://docs.racket-lang.org/guide/hash-tables.html)来构建查找表。

```
 (define table (make-hash))
 (hash-set! table 'password "location-of-treasure")
 (printf "Where is the treasure?  ~s\n" (hash-ref table 'password)) 
```

# macos - 在 mac 终端上更改默认程序输出颜色

> ID：13079662
> 
> 赞同：0
> 
> 时间：2012-10-26T01:36:46.270
> 
> 标签：macos, colors, terminal, osx-lion, background-color

我不知道这是否是发布此问题的正确位置，但这里是：

我最近（不到一年前）从我的 ubuntu 设置切换到了 mac。我改变的第一件事是 terminal.app 的背景颜色和不透明度。在我的旧设置中，它是一个半透明的黑色窗口，我会将它放在其他窗口的顶部，这样我就可以看到上面的代码，也可以通过它查看它下面的窗口。我的 Mac 上的 terminal.app 现在看起来像这样。这很棒……除非我必须使用 sphinx 之类的程序或查看手册页。

有些程序有黑色字体的输出；手册页有黑色字体的条目。由于我的 terminal.app 的背景也是黑色的，所以这个字体几乎是不可见的（见下面的两个截图）：

![terminal.app 中的不可见字体](../Images/91c9658cea7012d554deaf6b4f21ace4.png)

![突出显示 terminal.app 中的不可见字体](../Images/1578e932f60ffdd72674dd91ee8b9614.png)

有什么方法可以告诉 terminal.app 将所有黑色文本显示为其他颜色？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T02:37:25.710

这不是在终端的首选项中吗？ ![在此处输入图像描述](../Images/7bd0a46864ea41109640345274f03ea6.png)

# php - 开发跟踪像素

> ID：13079666
> 
> 赞同：45
> 
> 时间：2012-10-26T01:37:00.483
> 
> 标签：php, javascript, pixel

我正在尝试构建一个像素来跟踪用户访问时所使用的当前 URL。我可以使用 JS（首选）或 1x1 图像像素。使用 JS，我假设我需要对 PHP 脚本运行 AJAX 请求以捕获我需要的信息，并且使用图像像素我在获取当前 URL 时遇到问题。

我还考虑过使用 JS 对当前 URL 进行 URL 编码，并将具有编码的当前 URL 的图像像素作为查询字符串动态放置到 PHP 脚本中，但我可能会变得很长。

如果我要走 AJAX 路线，我可以使用哪个 AJAX 库？JQuery 对于这个目的来说太臃肿了。

还有其他想法吗？

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-10-26T02:05:23.443

[您可以使用GD 库](http://www.php.net/manual/en/intro.image.php)（在现代版本中通常与 PHP 一起分发）编写一个脚本`.gif`，使用 PHP 来创建和返回一个`.jpeg`或`.png`图像以进行跟踪。如果您无权访问 GD，则始终可以在启用 GD 的情况下重新编译 PHP。

**例子：**

`pixel.php`（为了解释的目的而评论）：

```
<?php

  // Create an image, 1x1 pixel in size
  $im=imagecreate(1,1);

  // Set the background colour
  $white=imagecolorallocate($im,255,255,255);

  // Allocate the background colour
  imagesetpixel($im,1,1,$white);

  // Set the image type
  header("content-type:image/jpg");

  // Create a JPEG file from the image
  imagejpeg($im);

  // Free memory associated with the image
  imagedestroy($im);

?> 
```

在一个简单的示例中，您可以在电子邮件或其他页面中使用以下示例 URL 调用此跟踪像素：

```
<img src="http://example.com/pixel.php?a=value1&b=value2&c=value3"> 
```

**使用变量：**

然后，您可以在您的内部`pixel.php`解析和解释`$_GET`在图像标签中传递给它的任何变量，简单地说：

```
if (isset($_GET['a'])) {
  // (Do|log) act on a
}
if (isset($_GET['b'])) {
  // (Do|log) act on b
}
if (isset($_GET['c'])) {
  // (Do|log) act on c
} 
```

根据需要应用和重复，但您可以非常复杂地了解您所做的事情，尤其是当您可以通过在`$_GET`字符串上设置变量来访问有关用户的大量信息时。

一个更适用的例子可能是：

```
<img src="http://example.com/pixel.php?userid=98798&campaign=302&last=8"> 
```

**不仅跟踪 $_GET 变量：**

您还可以使用 PHP 获取更多信息，例如：

```
// Server variables
$ip = $_SERVER['REMOTE_ADDR'];
$referer = $_SERVER['HTTP_REFERER'];
$useragent = $_SERVER['HTTP_USER_AGENT'];
$browser = get_browser(null, true);
etc... 
```

然后可能插入到数据库中的跟踪表中：

```
$sql = "INSERT INTO campaign_tracking 
        ('when','campaign','last','ip','useragent') 
        VALUES 
        (NOW(),'$campaign','$last','$ip','$useragent')"; 
```

这是一种广泛用于跟踪电子邮件营销活动的基本方法，特别是在 PHP 中，但同样的方法也适用于其他脚本/编程语言和库 - 也可用于其他目的。

有关 GD 的更多有用信息：

*   [GD 参考](http://www.php.net/manual/en/intro.image.php)- 在 php.net 上

* * *

## 回答 #2

> 赞同：57
> 
> 时间：2013-09-17T14:11:30.867

这是另一个跟踪像素的 PHP 实现，来自[Open Web Analytics](http://www.openwebanalytics.com/)项目，它试图基本上是 Google Analytics 的 PHP 克隆。

它返回一个 1x1*透明*GIF 图像（不使用 PHP 图像库！），带有无缓存标头（对于准确跟踪很重要），并刷新输出，以便您可以继续处理分析而不会阻​​塞 HTTP 响应（性能）。这似乎是一个非常先进的实现，值得一试。

```
<?php
ignore_user_abort(true);

// turn off gzip compression
if ( function_exists( 'apache_setenv' ) ) {
  apache_setenv( 'no-gzip', 1 );
}

ini_set('zlib.output_compression', 0);

// turn on output buffering if necessary
if (ob_get_level() == 0) {
  ob_start();
}

// removing any content encoding like gzip etc.
header('Content-encoding: none', true);

//check to ses if request is a POST
if ($_SERVER['REQUEST_METHOD'] === 'POST') {
  // the GIF should not be POSTed to, so do nothing...
  echo ' ';
} else {
  // return 1x1 pixel transparent gif
  header("Content-type: image/gif");
  // needed to avoid cache time on browser side
  header("Content-Length: 42");
  header("Cache-Control: private, no-cache, no-cache=Set-Cookie, proxy-revalidate");
  header("Expires: Wed, 11 Jan 2000 12:59:00 GMT");
  header("Last-Modified: Wed, 11 Jan 2006 12:59:00 GMT");
  header("Pragma: no-cache");

  echo sprintf('%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%',71,73,70,56,57,97,1,0,1,0,128,255,0,192,192,192,0,0,0,33,249,4,1,0,0,0,0,44,0,0,0,0,1,0,1,0,0,2,2,68,1,0,59);    
}

// flush all output buffers. No reason to make the user wait for OWA.
ob_flush();
flush();
ob_end_flush();

// DO ANALYTICS TRACKING HERE 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2014-08-25T11:13:02.133

以这种方式输出 1px x 1px：

```
header('Content-type: image/png');
echo gzinflate(base64_decode('6wzwc+flkuJiYGDg9fRwCQLSjCDMwQQkJ5QH3wNSbCVBfsEMYJC3jH0ikOLxdHEMqZiTnJCQAOSxMDB+E7cIBcl7uvq5rHNKaAIA')); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-02-26T12:21:13.067

这是一个用 PHP 编写的极其简化的跟踪像素。

[跟踪像素的工作原理](http://riceball.com/tracking-pixel-works/)

跟踪像素就像最原始的信标一样，它通过利用网页的事实来操作：图像是来自页面的单独请求。

如果您已经能够在其他人的页面上运行您的 JS 代码，您应该将数据发布回您的服务器。无需显示只会获得相同类型数据的微小像素。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-12-06T19:52:20.067

如果您的项目范围需要，使用[OpenPixel](https://github.com/dockwa/openpixel/)将处理大部分繁重的工作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-06-25T10:21:42.220

这种效果也存在类似的问题，因为在像素的 alt 中引入了对函数的调用以执行电子邮件被看到或打开的标记，但它不会正确地引发操作。

```
<img src="https://datafeeds.baruwa.com/1x1spacer.gif" width="1" height="1" alt="Web Bug from https://devorpenguin.des1.net/module/cartabandonmentpro/FrontCartAbandonment?token_cart=87c83b8f77318a54fdd6be91aacc3574&amp;id_cart=1002&amp;action=visualize&amp;wichRemind=1">

public static function visualize()
{

    $wichRemind = Tools::getValue('wichRemind');
    $id_cart = Tools::getValue('id_cart');
    $token = Tools::getValue('token_cart');

    if ($token == md5(_COOKIE_KEY_.'recover_cart_'.$id_cart)) {
        $query = "UPDATE "._DB_PREFIX_."cartabandonment_remind SET visualize = 1 WHERE wich_remind = ".(int)$wichRemind." AND id_cart = ".(int)$id_cart;
        Db::getInstance()->Execute($query);
    }

    header('Content-Type: image/png');
    echo base64_decode('iVBORw0KGgoAAAANSUhEUgAAAAEAAAABAQMAAAAl21bKAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAApJREFUCNdjYAAAAAIAAeIhvDMAAAAASUVORK5CYII=');

} 
```

# java - 在Java中返回一个带有循环的double

> ID：13079672
> 
> 赞同：2
> 
> 时间：2012-10-26T01:37:51.433
> 
> 标签：java, loops, for-loop, return

我试图从一个简单的 for 循环中返回一个 double。出于某种原因，我不断收到一条错误消息，指出该方法缺少返回语句。

这是我的代码：

```
public static double quantitytable(){

    for(double x=1; x<=1000; x=x+100){    
           return x;
    }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T01:40:34.877

您的循环没有意义：一旦您返回，循环就结束了。本质上，您的程序等效于：

```
public static double quantitytable(){
    return 1;
} 
```

如果您想从一个方法返回多个项目，请返回一个数组或 Java 集合：

```
public static List<Double> quantitytable() {
    List<Double> res = new ArrayList<Double>();
    for(double x=1 ; x<=1000 ; x += 100) {
       res.add(x);
    }
    return res;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T01:42:14.970

在 Java 中，每个代码路径都必须返回一个值。编译器不会试图证明`for`循环在所有情况下都会返回（即使我们可以告诉它确实如此），因此它认为控制可能会超过 for 循环的结尾（因此它需要循环`return`后的语句`for`） .

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T01:39:26.310

你知道你的代码会立即返回。而它在第一次迭代中

```
double x=1 
      for(; x<=1000; x+=100){    
               return x;}

    } 
```

# powershell - 参数中的Powershell变量扩展

> ID：13079674
> 
> 赞同：3
> 
> 时间：2012-10-26T01:38:26.043
> 
> 标签：powershell, exchange-server

我正在使用这个 powershell 脚本来处理交换邮箱，其中一个参数（在我必须运行的许多命令中）需要在 RecipientFilter 下嵌入一个变量。无论我做什么类型的扩展，它总是按字面意思（作为$前缀）评估它，而不是扩展它。我不确定是否有一种特殊的方式我应该逃避它，或者什么。想法？

```
$prefix="FAKEDOM"

New-AddressList -name "AL_${prefix}_Contacts" -RecipientFilter {(RecipientType -eq 'MailContact') -and (CustomAttribute15 -eq $prefix)} 
```

编辑：固定变量名称。请注意，问题是关于 $prefix 的第二次使用，第一次使用正常。

编辑：工作解决方案：

```
 New-AddressList -name "AL_${prefix}_Contacts" -RecipientFilter "(RecipientType -eq 'MailContact') -and (CustomAttribute15 -eq `"${prefix}`" )" 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T17:29:11.663

您的变量（至少在示例代码中）被命名为`$prefix`，而不是`$fakedom`. 您需要在扩展中使用正确的变量名称。

另请注意，下划线字符将被假定为替换字符串中变量名的一部分，因此您需要使用`$($variableName)`或`${variableName}`。也就是说，你不能做这样的替换：`"vanilla_$variableName_strawberry"`，Powershell 会寻找一个名为 的变量`variableName_Strawberry"`，它不存在。

总而言之，这就是您需要的：

```
$prefix="FAKEDOM"

New-AddressList -name "AL_${prefix}_Contacts" -RecipientFilter {(RecipientType -eq 'MailContact') -and (CustomAttribute15 -eq $prefix)} 
```

**编辑**

您的编辑清楚地表明第一次使用`$prefix`是好的，它是造成麻烦的过滤器。 `-RecipientFilter`是一个**字符串**属性，但您没有将过滤器表达式括在任何类型的引号中。相反，您使用`{}`括号。`{}`一般来说这很好，但是当您的字符串通过方括号指定时，Powershell 不会扩展变量。

```
PS> function Parrot([string] $Message){ $message }
PS> $food = 'cracker'
PS> Parrot {Polly want a $food ?}
Polly want a $food ? 
```

您需要更改为使用双引号：

```
PS> Parrot "Polly want a $food ?"
Polly want a cracker ? 
```

因此，您的过滤器应如下所示（在`$prefix`值周围添加内部单引号）：

```
-RecipientFilter "(RecipientType -eq 'MailContact') -and (CustomAttribute15 -eq '$prefix')" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T01:44:48.063

试试这个：

```
New-AddressList -name "AL_$($prefix)_Contacts" ... 
```

注意我添加的额外美元符号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-27T09:07:29.977

使用 Powershell 4 对参数进行变量扩展既不适合我，也不适合我，但以下是`$($variableName)`：`${variableName}`

```
$prefix="FAKEDOM"

New-AddressList -name ("AL_" + $prefix + "_Contacts") -RecipientFilter {(RecipientType -eq 'MailContact') -and (CustomAttribute15 -eq $prefix)} 
```

# java - 说位置超出了声明的序数参数的数量

> ID：13079683
> 
> 赞同：9
> 
> 时间：2012-10-26T01:39:48.643
> 
> 标签：java, hibernate

我想使用休眠执行本机/原始 mysql 查询，我有这个：

```
 sessionFactory.getCurrentSession().createSQLQuery(
       "update table1 set someCounter = someCounter + 1 where id = ?")
     .setParameter(1, someId)
     .executeUpdate(); 
```

我收到错误：

```
threw exception [Request processing failed; nested exception is
      org.hibernate.QueryParameterException: Position beyond number of declared ordinal
      parameters. Remember that ordinal parameters are 1-based! Position: 2] 
      with root cause
      org.hibernate.QueryParameterException: Position beyond number of declared ordinal
      parameters. Remember that ordinal parameters are 1-based! Position: 2 
```

这里有什么问题？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-26T01:44:35.887

使用索引，`0`因为参数索引从 开始 `0`。

```
sessionFactory.getCurrentSession()
  .createSQLQuery("update table1 set someCounter = someCounter + 1 where id = ?")
  .setParameter(0, someId)
  .executeUpdate(); 
```

由于您使用的是 Hibernate，因此您也可以使用命名参数，即

```
sessionFactory.getCurrentSession()
  .createSQLQuery("update table1 set someCounter = someCounter + 1 where id = :id")
  .setParameter("id", someId)
  .executeUpdate(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-26T01:44:54.403

参数使用从零开始的索引。尝试：

```
 sessionFactory.getCurrentSession().createSQLQuery("update table1 set someCounter = someCounter + 1 where id = ?")
                .setParameter(0, someId)
                .executeUpdate(); 
```

当前的 Hibernate JavaDocs 还指定 setPosition 依赖于位置参数的基于零的索引。 [http://docs.jboss.org/hibernate/orm/4.1/javadocs/org/hibernate/Query.html#setParameter%28int,%20java.lang.Object%29](http://docs.jboss.org/hibernate/orm/4.1/javadocs/org/hibernate/Query.html#setParameter%28int,%20java.lang.Object%29)

```
setParameter

Query setParameter(int position,
                   Object val)
                   throws HibernateException

    Bind a value to a JDBC-style query parameter. The Hibernate type of the parameter is first detected via the usage/position in the query and if not sufficient secondly guessed from the class of the given object.

    Parameters:
        position - the position of the parameter in the query string, numbered from 0.
        val - the non-null parameter value 
    Throws:
        HibernateException - if no type could be determined 
```

查看本文档的参数部分：[https ://access.redhat.com/knowledge/docs/en-US/JBoss_Enterprise_Web_Server/1.0/html/Hibernate_Core_Reference_Guide/querysql.html#id3043464](https://access.redhat.com/knowledge/docs/en-US/JBoss_Enterprise_Web_Server/1.0/html/Hibernate_Core_Reference_Guide/querysql.html#id3043464)

关于 setParameter() 方法是基于零还是基于一，已经有一些讨论。这种混淆是由于张贴者收到的异常指出参数是从 1 开始的，而 JavaDoc 声明它们是从零开始的。我分析了 Hibernate 源代码并相信它们实际上是从零开始的。假设我检查了正确的类，底层代码使用一个列表来存储参数绑定值，这意味着 setParameter 方法实际上是从零开始的。查看自己的源代码： [https ://github.com/hibernate/hibernate-orm/blob/master/hibernate-core/src/main/java/org/hibernate/internal/AbstractQueryImpl.java](https://github.com/hibernate/hibernate-orm/blob/master/hibernate-core/src/main/java/org/hibernate/internal/AbstractQueryImpl.java)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T04:13:15.933

`Positional`参数从`0`not开始`1`

> 本机 SQL 查询支持位置参数和命名参数：

通过传递 0 而不是 1 来更新您的查询`setParameter(1, someId)`

```
sessionFactory.getCurrentSession().createSQLQuery("update table1 set someCounter = someCounter + 1 where id = ?")
                .setParameter(0, someId)
                .executeUpdate(); 
```

资源[参数](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/querysql.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-08-16T15:37:26.327

对于那些无法根据上述解决方案解决的人来说，似乎有时休眠（取决于版本，我使用的是 3）实际上会给您错误的错误，例如，如果您让hibernate q 语言中的语法错误：

```
find("from Student s where s.id = :id") 
```

将其更改为：

```
find("from Student s where s.id = ?") 
```

实际上解决了这个问题。我想我的主要观点是，您还应该查看问题的语法，因为 hibernate 似乎可以错误地标记此异常。

# python-sphinx - 使用 Sphinx 将 reST 文档替换为整个目录

> ID：13079686
> 
> 赞同：0
> 
> 时间：2012-10-26T01:40:24.233
> 
> 标签：python-sphinx

我的项目的主要文档是 Sphinx。我还有大量想要集成的 JavaDocs。基本设置是：

`sphinx_source/`

`javadocs_built/`

在构建 Sphinx 文档之前，我可以将 JavaDocs 复制到`sphinx_source`.

如何从 Sphinx 中引用包含非 reST 文件的目录，并在构建过程中将它们带入？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T16:45:37.187

您可能需要使用该`:download:`指令引用文件。

见：[这里](http://sphinx-doc.org/markup/inline.html?highlight=download#role-download)。

请注意，您需要单独引用这些文件，因此您可能需要设置某种脚本来为您生成引用。

# c - C文件同步

> ID：13079694
> 
> 赞同：4
> 
> 时间：2012-10-26T01:41:23.830
> 
> 标签：c, file, synchronization

我想在 C 中打开一个文件，其中读取和写入都是同步的。是正确的方法

```
 fopen("file.txt", O_DSYNCH | O_RSYNCH) 
```

或者

```
 fopen("file.txt", O_SYNCH) 
```

这是在 Linux 上使用

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-26T01:47:08.427

来自`man 3 open`：

> 如果两者`O_DSYNC`都`O_RSYNC`设置在 中`oflag`，则文件描述符上的所有 I/O 操作应按照同步 I/O 数据完整性完成的定义完成。

因此，正确的调用是

```
open("file.txt", O_DSYNC | O_RSYNC); 
```

请注意，`fopen`它不带`O_`标志（它使用模式字符串，如`"r+"`），因此您不能`O_*SYNC`直接使用任何选项。

# java - GWT：带有按钮单击的往返示例

> ID：13079695
> 
> 赞同：1
> 
> 时间：2012-10-26T01:41:38.057
> 
> 标签：java, gwt

我很难将所有点与 GWT 的事件侦听器模型联系起来。假设您有一个 Button 小部件，当用户单击它时，您希望屏幕上其他位置的文本从黑色变为红色（只是考虑一个超级简单的示例）。

当用户单击按钮时，按钮单击事件被放置在事件总线上，该事件总线配置有希望在此事件发生时得到通知的处理程序/侦听器。这与`Place`s、`PlaceChangeEvent`s 和 GWT History API 有何关联？

如果某人的代码提供了这个“往返”过程的超级简单但*功能性*的代码示例，从按钮单击到在总线上触发点击事件，再到处理总线上的事件，再到更新适当的地点/历史对象，最后，将文本更改为红色，我想我可以连接许多当前缺失的点。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T04:18:16.907

GWT 有许多类型的事件，要真正理解它们并不容易。有些事件只发生在逻辑中，有些则来自 DOM（可以在[捕获或冒泡](http://www.quirksmode.org/js/events_order.html)中使用）等等。

一次只走一步，因为您似乎试图将不同的事件混合在一起。（按钮点击和历史事件是完全独立的事件）。一般来说，这个想法是许多类提供不同类型的事件，并且您为您关心的事件连接处理程序。然后，您的处理程序可以调用其他类或生成其他事件。您想要的代码实际上非常简单，这是您项目中唯一需要的类：

```
public class Sandbox_gwt implements EntryPoint
{
   public void onModuleLoad()
   {
      final Label label = new Label("I'm red");
      label.getElement().getStyle().setBackgroundColor("#FF9999");

      Button button = new Button("click me!");
      button.addClickHandler(new ClickHandler()
      {
         @Override
         public void onClick(ClickEvent event)
         {
            label.getElement().getStyle().setBackgroundColor("#99FF99");
            label.setText("I'm green");
         }
      });

      RootPanel.get().add(label);
      RootPanel.get().add(button);
   }
} 
```

如果您真的对此感兴趣，您可以通过调试来查看“流程”，但无需进行“手动往返”或任何其他操作。历史，顺便说一句，BTW 是一个单独的类，用于监听浏览器本身的前进和后退按钮，以及其他一些东西，但根本不需要做你提到的事情。

# rpmbuild - MeeGo 的 rpmbuild 错误

> ID：13079696
> 
> 赞同：0
> 
> 时间：2012-10-26T01:41:55.230
> 
> 标签：rpmbuild, meego

当我尝试使用 rpmbuild 从 MeeGo 1.2 的源代码构建内核时出现错误。

运行此命令后：

```
rpmbuild -bp --target $(uname -m) kernel-adaptation-intel-automative.spec 
```

我收到此错误：

```
make ARCH=x86 listnewconfig
error: Bad exit status from /var/tmp/rpm-tmp.G80JZf 
```

# php - htaccess mod_rewrite 在带有子目录的子域上

> ID：13079706
> 
> 赞同：1
> 
> 时间：2012-10-26T01:44:39.023
> 
> 标签：php, .htaccess, url, mod-rewrite

我知道这个网站上有很多关于这个主题的问题，还有**很多关于谷****歌**的教程。但是，我现在已经搜索了一段时间，但似乎找不到可以解释我的具体情况的内容。

我正在构建一个社交应用程序，其中整个应用程序都存储在网站的子域目录中，如下所示：**subdomain.example.com/network/** <-- network 是所有应用程序文件的目录。

我的 .htaccess 文件位于子域的根目录中，到目前为止，我已经将它从所有文件中删除，并且它在整个项目中都应该正常工作。我有一个 user.php 页面，每个用户的个人资料都基于该页面，每个用户的唯一标识符是他们的用户名（不像大多数人使用的“id”。）所以现在网址看起来像**/network/user.php?username =TylerB**这不是很漂亮。我尝试了许多不同的方法来让它看起来像**/network/user/TylerB**但我尝试的任何方法似乎都不起作用。我不知道是因为它在目录，子域还是什么中。截至目前，当我拥有**/network/user/TylerB**（TylerB 是我的用户名）时，它给了我一个 404 错误。

这是我当前的 .htaccess 文件：

```
RewriteEngine On
RewriteRule ^user/([^/\.]+)/?$ user.php?username=$1 [L]
RewriteRule ^([a-z]+)/([a-z\-]+)$ /$1/$2.php [L] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T01:57:59.537

我建议`RewriteBase`在完整模式上设置指令和匹配，确保重写`/network/`目录。

```
RewriteEngine On
RewriteBase /
RewriteRule ^network/user/([^/\.]+)/? /network/user.php?username=$1 [L]
RewriteRule ^([a-z]+)/([a-z\-]+)$ /$1/$2.php [L] 
```

[使用http://htaccess.madewithlove.be/](http://htaccess.madewithlove.be/)上的测试工具，我得到以下输出：

```
This rule was met, the new url is http://example.com/network/user.php?username=name
The tests are stopped because the L in your RewriteRule options 
```

# ios - 如何使用 UTF8 编码将字节保存到 NSString

> ID：13079711
> 
> 赞同：0
> 
> 时间：2012-10-26T01:45:01.137
> 
> 标签：ios, nsstring, byte

我有一些 NSData 作为字节传入

```
const void *bytes = [responseData bytes]; 
```

这些字节最初是 UTF8 格式的，我现在正试图将它们转换为 UTF8 NSString 而不会弄乱编码。

我以前写过这个，如果将字节复制到一个 cstring 中，这通常会很好，除非我在字节中有任何非英文字符，它需要两个字节而不是一个。这意味着当我将字符串中的任何国际字符复制到 cstring 中时，它们都会变得混乱。

因此，需要将字节直接复制到 UTF8 格式的对象中的原因。如果可能的话，最好是 NSString。

这就是我处理转换的方式，后来我发现这是错误的，但希望能让您对我想要实现的目标有一个很好的了解。

```
else if (typeWithLocalOrdering == METHOD_RESPONSE)
        {
            cstring = (char *) malloc(sizeWithLocalOrdering + 1);
            strncpy(cstring, bytes, sizeWithLocalOrdering);
            cstring[sizeWithLocalOrdering] = '\0';

            NSString *resultString = [NSString stringWithCString:cstring encoding:NSUTF16StringEncoding];
            methodResponseData =[resultString dataUsingEncoding:NSUTF16StringEncoding]; // methodResponseData is used later on in my parsing method

            // Take care of the memory allocatoin, so that you can find the endoffile notification
            free(cstring);
            bytes += sizeWithLocalOrdering;
            length -= sizeWithLocalOrdering;

        } 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T02:43:42.823

我不明白这一点：“这意味着当我将字符串中的任何国际字符复制到 cstring 中时，它们都会变得混乱。” 如果“sizeWithLocalOrdering”对于字节字符串的*实际*长度是正确的，那么您的原始代码似乎应该可以工作（尽管我会使用 memcpy 而不是 strncpy）。如果没有，什么都不会起作用。

**更新：** 好的，我明白了。您的原始代码在这里是错误的：

```
[NSString stringWithCString:cstring encoding:NSUTF16StringEncoding]; 
```

那应该是 NSUTF8StringEncoding。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T22:25:17.257

所以事实证明我发生了一些我没想到的有趣的事情。

这是我用来解决 cstring 的代码，然后将字节直接带到 NSString 作为其原始编码

```
NSString *tempstring = [[NSString alloc] initWithBytes:bytes length:sizeWithLocalOrdering encoding:NSUTF8StringEncoding];
            methodResponseData =[tempstring dataUsingEncoding:NSUTF16StringEncoding]; // methodResponseData is used later on in my parsing method 
```

# closures - TypeScript 方法调用中的“this”？

> ID：13079713
> 
> 赞同：6
> 
> 时间：2012-10-26T01:45:03.203
> 
> 标签：closures, typescript

我如何使这项工作：

```
class TestClass {

   doMethod1 (arg1, arg2, cb)
   {
      this.doMethod2(arg1, arg2, function (result){cb (result)});
   }

  doMethod2 (arg1, arg2, cb) {
      this.doMethod3(arg1, arg2, function(result){cb (result)});
   }

  doMethod3 (arg1, arg2, cb) {
      var result = arg1 + arg2;
      cb(result);
   }
} 
```

测试 = 新的测试类；

test.doMethod3(1,1, cb); test.doMethod2(1,1,cb);

两者都有效。

test.doMethod1(1,1,cb);

编辑：实际上，它确实有效。

我通过使用“胖箭头”语法解决了相关的词汇范围问题：

```
doMethod1 (arg1, arg2, cb)
   {
      this.doMethod2(arg1, arg2, (result) => {cb (result)});
   } 
```

确保 doMethod1 中的“this”与匿名回调函数中的“this”相同。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-26T08:28:20.390

要在 TypeScript 中保留 的词法范围`this`，您可以使用箭头函数表达式。

它们在 TypeScript 语言规范的第 4.9.2 节中定义。

```
ArrowFormalParameters => { return AssignmentExpression ; } 
```

代码中的哪个看起来像：

```
() => { alert(this.arg1); } 
```

# javascript - Greasemonkey 脚本将一个元素移动到另一个元素中？

> ID：13079725
> 
> 赞同：3
> 
> 时间：2012-10-26T01:47:30.473
> 
> 标签：javascript, html, greasemonkey, userscripts

我想移动`<div>`元素。在这种情况下，交换第一个和最后一个`div.clearfix`。所以这：

```
<fieldset>
    <div class="clearfix ">
        <label for="form-title">Title</label>
        <div class="input"></div>
    </div>
    <div class="clearfix "></div>
    <div class="clearfix ">
        <label>Verification</label>
        <div dir="ltr">
            recaptcha
        </div>
    </div>
</fieldset> 
```

会变成这样：

```
<fieldset>
    <div class="clearfix ">
        <label>Verification</label>
        <div dir="ltr">
             recaptcha
        </div>
    </div>
    <div class="clearfix "></div>
    <div class="clearfix ">
        <label for="form-title">Title</label>
        <div class="input"></div>
    </div>
</fieldset> 
```

我已经搜索过，但我所拥有的只是移动（¿screen？）位置，而不是我想要的。我如何交换那些`<div>`s？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T02:49:24.417

`div.clearfix`鉴于 HTML， 要交换第一个和最后一个s，请使用`querySelector`、`insertBefore`和`appendChild`函数。

这是**一个完整的 Greasemonkey 脚本**：

```
// ==UserScript==
// @name     _Swap first and last div.clearfix
// @include  http://YOUR_SERVER.COM/YOUR_PATH/*
// @grant    none
// ==/UserScript==

var container    = document.querySelector ("fieldset");
var firstTargDiv = container.querySelector ("fieldset > div.clearfix:first-child");
var lastTargDiv  = container.querySelector ("fieldset > div.clearfix:last-child");

//-- Swap last to first.
container.insertBefore (lastTargDiv, firstTargDiv);

//-- Move old first to last.
container.appendChild (firstTargDiv); 
```

# excel - Excel，VBA：如何将多个变量传递给 .OnAction

> ID：13079727
> 
> 赞同：10
> 
> 时间：2012-10-26T01:47:44.553
> 
> 标签：excel, vba

我正在尝试将多个变量传递给按钮的 .OnAction 调用。我无法找到与多个变量相关的答案，我可以只用一个变量来完成。这是我拥有的适用于一个变量的内容：

```
shpBar.OnAction = "'Button_Click """ & strText & """'" 
```

如何向其中添加两个其他变量（例如 VarA 和 VarB）？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-26T04:49:20.633

假设 VarA 和 VarB 是变体或数值变量，这将起作用：

```
.OnAction = "'Button_Click """ & strText & """," & varA & "," & varB & " '" 
```

如果它们是字符串，则需要在每个变量名称周围再添加两个双引号。

```
.OnAction = "'Button_Click """ & strText & """,""" & varA & """,""" & varB & """ '" 
```

# java - JDialog关闭后Java JComponents不重新绘制

> ID：13079730
> 
> 赞同：2
> 
> 时间：2012-10-26T01:48:26.150
> 
> 标签：java, swing, user-interface, jframe, jdialog

我有一个使用 a`JTable`来显示一些数据的 Java 应用程序。我想从`JDialog`.

我面临的问题是主窗口 GUI 在打开后将不再刷新`JDialog`。我试图将其更改为 a`JFrame`并且我得到相同的行为。如果我`JTable`用`JPanel`. 一切正常，直到在主窗口顶部打开一个窗口。此后，GUI 元素不会刷新，但按钮仍会对点击做出反应。

有人可以帮我理解什么是错的。

抱歉没有分享任何代码。早上 5 点，我完全忘记了。我有一个带有 a`JTable`和 a的框架`JButton`。按钮打开`JDialog`. `JDialog`有一个嵌有 a`JTextField`和 a的面板`JButton`。当我按下按钮时，`JDialog`它会将数据发送到主框架。在那里，我想用收到的数据填充表格。我可以在调试器中看到数据。问题是在我重新启动应用程序之前它不会显示在表格中。我还在与表格相同的框架中添加了一个按钮来测试数据插入，它工作得很好。

```
public class GUIRezervari {

private static JButton butonNew;
private static JTable tabelRezervari;
public static DefaultTableModel dtm;
private static JScrollPane scrollPaneTabel;
private static JPanel panelRezervari;

private GUIRezervari(){

}

public static JPanel getGui(){
    setPanelRezervari();

    return panelRezervari;
}

private static void setPanelRezervari(){
    panelRezervari=new JPanel();
    panelRezervari.setLayout(new BoxLayout(panelRezervari, 0));

    Box hBox=Box.createHorizontalBox();
    hBox.add(Box.createHorizontalGlue());
    hBox.add(boxRezervari());
    hBox.add(Box.createHorizontalGlue());

    panelRezervari.add(hBox);
}
private static Box boxRezervari(){
    Box vBox=Box.createVerticalBox();

    vBox.add(Box.createVerticalStrut(20));
    vBox.add(boxButoane());
    vBox.add(Box.createHorizontalStrut(10));
    vBox.add(boxTabel());
    vBox.add(Box.createVerticalStrut(20));

    return vBox;
}

private static Box boxButoane(){
    Box hBox=Box.createHorizontalBox();

    butonNew=new JButton("New");
    butonNew.addActionListener(new RezervareNouaAL());

    hBox.add(Box.createHorizontalStrut(10));
    hBox.add(butonNew);
    hBox.add(Box.createHorizontalGlue());
    hBox.add(Box.createHorizontalStrut(10));

     return hBox;
}

private static Box boxTabel(){
    Box hBox=Box.createHorizontalBox();

    dtm=new DefaultTableModel();
    dtm.addColumn("Date");
    dtm.addColumn("Name");

    tabelRezervari=new JTable(dtm);
    scrollPaneTabel=new JScrollPane(tabelRezervari);

    hBox.add(scrollPaneTabel);

    return hBox;
}
}

public class RezervareNouaAL implements ActionListener{

@Override
public void actionPerformed(ActionEvent ae) {

    GUIRezervare.getFrame((JFrame)GUIRezervari.getGui().getParent());
}

}

public class GUIRezervare {

private static JLabel labelName;
private static JLabel labelDate;
private static JTextField fieldName;
private static JTextField fieldDate;
private static JButton butonSalveaza;
private static JButton butonAnuleaza;
private static JPanel panelRezervare;
private static JDialog frame;

private GUIRezervare(){

}

public static void getFrame(JFrame panel) {

    setGui();
    frame = new JDialog(panel, "Rezervare", true);
    frame.add(panelRezervare);
    frame.pack();
    frame.setVisible(true);

    frame.setTitle("Adauga rezervare");

}

public static JPanel getGui(){
    setGui();

    return panelRezervare;
}

private static void setGui(){
    panelRezervare=new JPanel();
    panelRezervare.setLayout(new BoxLayout(panelRezervare, 0));
    panelRezervare.setBorder(BorderFactory.createTitledBorder("Rezervare"));
    panelRezervare.setBackground(new Color(242,197,61));

    Box vBox=Box.createVerticalBox();

    vBox.add(Box.createVerticalStrut(10));
    vBox.add(panelRezervare());
    vBox.add(Box.createVerticalStrut(10));
    vBox.add(boxButoane());
    vBox.add(Box.createVerticalStrut(10));

    panelRezervare.add(vBox);
}
private static JPanel panelRezervare(){
    JPanel panelRezervareT=new JPanel();
    panelRezervareT.setBorder(BorderFactory.createTitledBorder("Date rezervare"));
    panelRezervareT.add(boxRezervare());
    panelRezervareT.setBackground(new Color(169,217,190));

    return panelRezervareT;
}
private static Box boxRezervare(){
    Box hBox=Box.createHorizontalBox();

    hBox.add(Box.createHorizontalGlue());
    hBox.add(boxStanga());
    hBox.add(Box.createHorizontalStrut(10));
    hBox.add(Box.createHorizontalGlue());

    return hBox;
}

private static Box boxStanga(){
    Box vBox=Box.createVerticalBox();

    vBox.add(boxName());
    vBox.add(Box.createVerticalStrut(5));
    vBox.add(boxDate());
    vBox.add(Box.createVerticalStrut(5));

    return vBox;
}

private static Box boxDate(){
    Box hBox=Box.createHorizontalBox();

    labelDate=new JLabel("Date :");
    fieldDate=new JTextField();

    hBox.add(labelDate);
    hBox.add(Box.createHorizontalStrut(10));
    hBox.add(Box.createHorizontalGlue());
    hBox.add(fieldDate);

    return hBox;
}

private static Box boxName(){
    Box hBox=Box.createHorizontalBox();

    labelName=new JLabel("Name :");
    fieldName=new JTextField();

    hBox.add(labelName);
    hBox.add(Box.createHorizontalStrut(10));
    hBox.add(Box.createHorizontalGlue());
    hBox.add(fieldName);

    return hBox;
}

private static Box boxButoane(){
    Box hBox=Box.createHorizontalBox();

    butonSalveaza=new JButton("Salveaza");
    butonSalveaza.addActionListener(new SalveazaClientAL());
    butonAnuleaza=new JButton("Anulaeza");
    butonAnuleaza.addActionListener(new ActionListener(){

        @Override
        public void actionPerformed(ActionEvent ae) {

            frame.dispose();
        }

    });

    hBox.add(butonSalveaza);
    hBox.add(Box.createHorizontalStrut(10));
    hBox.add(butonAnuleaza);

    return hBox;
}

public static String getFieldName() {
    return fieldName.getText();
}

public static String getFieldDate() {
    return fieldDate.getText();
}

public static void inchideFrame(){
    frame.dispose();
}
}

public class SalveazaClientAL implements ActionListener{

@Override
public void actionPerformed(ActionEvent ae) {

    GUIRezervari.dtm.addRow(new Object[]{GUIRezervare.getFieldName(),GUIRezervare.getFieldDate()});
GUIRezervare.inchideFrame();
}

} 
```

这是代码。谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T02:49:21.803

如果您[`JDialog`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JDialog.html)是*modal* ，则可能会发生这种情况。相反，创建一个*无模式*对话框，并让您的主窗口注册为`PropertyChangeListener`对话框。在此[示例](https://stackoverflow.com/a/11832979/230513)中，`JPanel`主窗口中的 a 侦听[`ObservedPanel`](https://stackoverflow.com/a/10523401/230513)对话框中的实例。

# php - 搜索 Post 数据 php 自定义输入变量

> ID：13079733
> 
> 赞同：0
> 
> 时间：2012-10-26T01:48:29.623
> 
> 标签：php, mysql, variables, search

我正在尝试找出一种为 $_POST 搜索表单提供自定义输入变量的方法。

所以假设用户输入

“用户：” - 进入搜索字段，它将搜索用户。"battle:" - 它搜索一场战斗 "sample:" 它搜索一个样本。等等。

如何使用 $_POST 方法？我在想

```
$user_search_check = (!empty($_POST['searchbox'])){
     if (beginning of line first five letters are 'user:'){
       $user_search = "true";
       }
} 
```

然后使用它我会说

```
if ($user_search == "true"){
 // RUN SELECT SCRIPT FOR MYSQL
} 
```

但我不确定如何获得前五个字母。或者我应该把除了前五个字母之外的所有东西都去掉，然后检查它是否说用户？

与往常一样，任何帮助都非常感谢并提前感谢:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T01:51:01.077

```
$firstFive = substr($_POST['searchbox'],0,5); 
```

# ruby-on-rails - 给我一个关于使用 Rails 进行长轮询（彗星）的示例？

> ID：13079741
> 
> 赞同：2
> 
> 时间：2012-10-26T01:49:37.860
> 
> 标签：ruby-on-rails, ajax, comet, long-polling

最近在学习ajax。我对长轮询很好奇。我知道简单的轮询，我做了一个演示（每5秒发送一个请求。）。但是长轮询，有一个关键步骤，服务器端可以暂停请求，直到数据更新。**所以我想知道如何暂停请求？？** 我是前端开发人员。我对服务器端很差。只知道基本的 Rails。我找到了一些示例，但它们都使用 PHP 或 JAVA.... 任何人都可以给我一个使用 Rails 的长轮询的演示吗？

# node.js - 如何在 node.js 中生成视频缩略图？

> ID：13079742
> 
> 赞同：14
> 
> 时间：2012-10-26T01:49:44.773
> 
> 标签：node.js, video, ffmpeg, thumbnails

我正在用 node.js 构建一个应用程序，我成功上传了视频，但我需要为它生成一个视频缩略图。目前我使用 node exec 执行 ffmpeg 的系统命令来制作缩略图。

```
 exec("C:/ffmpeg/bin/ffmpeg -i Video/" + Name  + " -ss 00:01:00.00 -r 1 -an -vframes 1 -f mjpeg Video/" + Name  + ".jpg") 
```

此代码来自[http://net.tutsplus.com/tutorials/javascript-ajax/how-to-create-a-resumable-video-uploade-in-node-js/的教程](http://net.tutsplus.com/tutorials/javascript-ajax/how-to-create-a-resumable-video-uploade-in-node-js/)

上面的代码确实生成了一个 jpg 文件，但它不是缩略图而是视频屏幕截图，我想知道是否有任何其他方法可以生成视频缩略图，或者如何执行 ffmpeg 命令来制作真正的缩略图（调整大小），我更喜欢.png 文件。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2014-06-18T13:20:29.030

[参考 GitHub fluent-ffmpeg 项目](https://github.com/fluent-ffmpeg/node-fluent-ffmpeg)。

重复[原始 StackOverflow 答案](https://stackoverflow.com/a/8804408/621690)的示例：

```
var proc = new ffmpeg('/path/to/your_movie.avi')
  .takeScreenshots({
      count: 1,
      timemarks: [ '600' ] // number of seconds
    }, '/path/to/thumbnail/folder', function(err) {
    console.log('screenshots were saved')
  }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T03:36:15.293

通过在命令中添加 -s widthxheight 选项来调整大小。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-15T22:34:47.247

为此有一个节点模块： [video-thumb](https://github.com/vdemedes/node-video-thumb)

它基本上只是包装了对 exec ffmpeg 的调用

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-06-26T07:30:09.980

我建议使用[https://www.npmjs.com/package/fluent-ffmpeg](https://www.npmjs.com/package/fluent-ffmpeg)从 Node.js 调用 ffmpeg

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-09-18T08:48:53.013

相反，我建议使用[thumbsupply](https://www.npmjs.com/package/thumbsupply)。除了为您提供缩略图之外，它还会缓存它们以显着提高性能。

```
npm install --save thumbsupply 
```

安装模块后，您可以通过以下方式使用它。

```
const thumbsupply = require('thumbsupply')("com.example.application");

thumbsupply.generateThumbnail('some-video.mp4')
.then(thumb => {
    // serve thumbnail
}) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-05-27T18:56:17.510

使用[media-thumbnail](https://www.npmjs.com/package/media-thumbnail)，您可以轻松地从视频中生成缩略图。该模块基本上包装了 ffmpeg 缩略图功能。

```
const mt = require('media-thumbnail')

mt.forVideo(
  './path/to/video.mp4',
  './path/to/thumbnail.png', {
    width: 200
  })
  .then(() => console.log('Success'), err => console.error(err)) 
```

您还可以使用此包从图像创建缩略图。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-06-09T04:13:15.027

```
app.post('/convert', upload.any(), (req, res) => {
    console.log("calling", req.files)
    let thumbNailName = req.files[0].filename.split('.')
    var gm = require('gm');

    gm('./src/Upload/'+req.files[0].filename)// get pdf file from storage folder
    .thumb(
        50, // Width
        50, // Height
        './src/thumbnail/'+thumbNailName[0]+'.png', // Output file name
        80, // Quality from 0 to 100
        function (error, stdout, stderr, command) {
            if (!error) {
                console.log("processing");
            } else {
                console.log("error")
            }
        }
    );
}) 
```

# jquery - jQuery switch 语句（？）

> ID：13079749
> 
> 赞同：0
> 
> 时间：2012-10-26T01:50:39.287
> 
> 标签：jquery

我试图弄清楚如何编写“切换语句”，因此如果一个特定的（我们称之为“yourdomain.com”）外部 URL 匹配它不会在新窗口中打开，其余的会。有人可以帮忙教我吗？

```
jQuery(function ($) {
    $('a[href^="http://"]')
        .not('[href*="http://mydomain.com"]')
        .attr('target', '_blank'); 
```

例如

mydomain.com = 这不会打开新窗口，因为这是我的 URL

yourdomain.com = 即使是外部 URL，此特定 URL 也不会在新窗口中打开

anyotherdomain.com = 除上述以外的所有其他外部 URL 都将在新窗口中打开

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T01:57:22.297

```
$(function() {
     var elms = $('a[href^="http://"]');
     $.each(elms, function() {
          var current_link = $(this).attr("href");
          if (current_link == "yoururl") {
               $(this).attr('target', '_blank');
          }
     });
}); 
```

这有帮助吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T02:18:00.657

通过添加另一个 .not() 来解决它

```
jQuery(function ($) {
    $('a[href^="http://"]')
        .not('[href*="http://mydomain.com"]').not('[href*="http://yourdomain.com"]')
        .attr('target', '_blank'); 
```

# github - github可以提供像gitolite这样的访问控制吗？

> ID：13079753
> 
> 赞同：1
> 
> 时间：2012-10-26T01:52:06.113
> 
> 标签：github

某些分支可以由特殊团队修改，其他团队无法更改。我们需要 gitolite 提供的访问控制功能。我想知道github能不能提供。

如果我们使用 Github Enterprise，我们可以编写钩子来限制分支访问。我们还可以使用 github 功能（例如“代码审查”）。是真的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T06:23:49.810

注意：[gitolite](https://github.com/sitaramc/gitolite)是一个简单（且完整）的[授权层](http://sitaramc.github.com/gitolite/auth.html)，因此您可以将其添加到您想要的任何 Git 存储库服务器，包括[GitHub Enterprise](https://enterprise.github.com/)。

这正是“GitHub Enterprise”的开源版本所做的：[GitLabHq](http://gitlabhq.com/)包括 gitolite。它从 GitLab 3.0 （4 天前发布） 开始
支持[Gitolite V3 。](https://github.com/gitlabhq/gitlabhq/issues/759)

话虽如此，开源版本将缺少[GitHub Enterprise 中包含](https://github.com/blog/978-introducing-github-enterprise)的代码审查功能。我想另一种方法是将 GitLab 与[Gerrit 服务器](https://code.google.com/p/gerrit/)链接。

# powershell-2.0 - Get -WinEvent - 从保存的事件日志文件中读取

> ID：13079754
> 
> 赞同：1
> 
> 时间：2012-10-26T01:52:07.207
> 
> 标签：powershell-2.0, powershell-3.0

简单的问题，我有以下内容可以读取应用程序日志：

```
$out = @()
$endtime=[datetime]::Today
$starttime=    $endtime.AddDays(-10)
$evts = get-winevent -FilterHashtable @{ logname="application"; Level= "1","2"; starttime=    $starttime;endtime=    $endtime } -maxevents 10 | select TimeCreated, Providername, id,Message
foreach(    $evt in     $evts){
$mess = RemoveBlankSpaces(    $evt.Message)
$out += "    $(    $evt.ID),    $(    $evt.Providername),    $(    $evt.TimeCreated),    $mess"
}
  $out | out-file -filepath .\warning.txt 
```

如何让它从 evtx 文件（保存的事件日志文件）中读取？

蒂亚！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-26T20:30:58.300

为请求添加路径，如下所示：

```
$evts = get-winevent -FilterHashtable @{path="c:\mylogpath" logname="application"; Level= "1","2"; starttime = $starttime; endtime = $endtime } -maxevents 10 | select TimeCreated, Providername, id, Message 
```

顺便说一句，我正在寻找一种将某些事件导出到摘要日志文件的方法。你的脚本帮助我做到了，所以谢谢！:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T06:49:41.527

```
Get-WinEvent -Path C:\SavedAppLog.evtx 
```

# python - 带有 MailGun 配置问题的 Heroku 烧瓶

> ID：13079755
> 
> 赞同：1
> 
> 时间：2012-10-26T01:52:14.383
> 
> 标签：python, heroku, flask, mailgun, flask-mail

我的电子邮件无法到达需要的位置。我已经在 Heroku 上设置了我的 Flask 应用程序的配置文件，如下所示：

```
class ProductionConfig(Config):
    DATABASE_URL = 'postgres://stuff'
    MAIL_SERVER = os.environ.get('MAILGUN_SMTP_SERVER', 'localhost')
    MAIL_PORT = os.environ.get('MAILGUN_SMTP_PORT', 25)
    MAIL_USERNAME = os.environ.get('MAILGUN_SMTP_LOGIN', None)
    MAIL_PASSWORD = os.environ.get('MAILGUN_SMTP_PASSWORD', None)
    DEFAULT_MAIL_SENDER = 'myemail@myemail.com'
    MAIL_USE_SSL = True 
```

使用 Flask-Mail 库：

```
 from flask.ext.mail import Mail, Message

    mail = Mail(app)

    def send_mail(to, title, msg):
      email = Message(title, recipients = [to], body = msg)

      return mail.send(email) 
```

但果然，我尝试发送一封电子邮件，但它永远不会到达那里。我做错了什么吗？我错过了什么吗？（如果您想知道，我已经删除了真实的数据库 URL 和电子邮件地址。）

非常感谢提前。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T15:26:49.787

根据[文档](http://documentation.mailgun.net/quickstart.html#sending-messages)，Mailgun 的正确 SMTP 服务器`smtp.mailgun.org`不是`localhost`，端口`587`也不是`25`。也许改变那些会解决它。看起来也需要登录名和密码。

使用 Mailgun API 而不是 Flask-Mail，您可能会取得更大的成功。我发现它更容易在我自己的应用程序中使用。

[这是我编写的配置和一个小实用函数，用于使用requests](http://docs.python-requests.org/en/latest/)库通过 Heroku 上的 Mailgun 发送邮件：

```
import requests    

app = Flask(__name__)
app.config['MAILGUN_KEY'] = 'YOUR-KEY-HERE'
app.config['MAILGUN_DOMAIN'] = 'YOUR-MAILGUN-DOMAIN'

@app.route('/', methods=['GET', 'POST'])
def home():
    ...
    send_mail(...)

def send_mail(to_address, from_address, subject, plaintext, html):
    r = requests.\
        post("https://api.mailgun.net/v2/%s/messages" % app.config['MAILGUN_DOMAIN'],
            auth=("api", app.config['MAILGUN_KEY']),
             data={
                 "from": from_address,
                 "to": to_address,
                 "subject": subject,
                 "text": plaintext,
                 "html": html
             }
         )
    return r 
```

如果您登录 Heroku 并单击 Mailgun 插件，它将带您进入 Mailgun 控制面板，您可以在其中获取上述代码中所需的密钥和域。

# javascript - 使用带有开关功能的 .replaceWith

> ID：13079762
> 
> 赞同：0
> 
> 时间：2012-10-26T01:53:21.653
> 
> 标签：javascript, jquery, switch-statement, replacewith

```
$(".td").click(function() {
    switch (elementNode.previousSibling.id)
    {
  case "location"
    (".td").replaceWith('<input type="text" name="location"></input>');
    break;
  case "occ"
    (".td").replaceWith('<input type="text" name="occ"></input>');
    break;
  case "hobby"
    (".td").replaceWith('<input type="text" name="hobby"></input>');
    break;
    }
}); 
```

以上是我正在使用的 Javascript，这里是 HTML

```
<div class="tr"><div class="td" id="location">{L_LOCATION}:</div> <div class="td">{LOCATION}</div></div>
<div class="tr"><div class="td" id="occ">{L_OCCUPATION}:</div> <div class="td">{OCCUPATION}</div></div>
<div class="tr"><div class="td" id="hobby">{L_INTERESTS}:</div> <div class="td">{INTERESTS}</div></div> 
```

我想要做的是当有人点击“.td” div 使其变成输入字段时。我认为我需要使用 switch 的原因是需要满足很多条件（正如您在代码中看到的那样），并且 if 和 else 语句太多。所以我不确定我这样做是否正确，因为我刚刚开始编程（这里是初学者，如果有很多错误请见谅）您在 HTML 标记中看到的内容是模板变量，以防万一你想知道。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T02:11:34.497

我已经测试了这段代码并且它有效：

```
$(function() {   
$(".td").on('click', function() {
  var id = $(this).prev().attr("id");
  console.log(id);
        switch (id)
        {
          case "location":
        $(this).replaceWith('<input type="text" name="location"></input>');
        break;
          case "occ":
         $(this).replaceWith('<input type="text" name="occ"></input>');
        break;
          case "hobby":
         $(this).replaceWith('<input type="text" name="hobby"></input>');
        break;
        }        
 });
        }); 
```

[http://jsbin.com/ogofus/1/edit](http://jsbin.com/ogofus/1/edit)

（只点击白色文字）

# c++ - C ++使用多个分隔符分解字符串

> ID：13079763
> 
> 赞同：2
> 
> 时间：2012-10-26T01:53:21.887
> 
> 标签：c++

> **可能重复：**
> [在 C++ 中通过多个分隔符将字符串拆分为单词](https://stackoverflow.com/questions/7621727/split-a-string-into-words-by-multiple-delimiters-in-c)

我目前正在尝试读取一个文件，其中每一行都有不同的制表符和空格分隔需要插入二叉树的关键属性。

我的问题是：如何仅使用 STL 使用多个分隔符来拆分队列？在一天的大部分时间里，我一直在试图解决这个问题，但无济于事。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-26T01:58:00.033

利用[`std::string::find_first_of`](http://en.cppreference.com/w/cpp/string/basic_string/find_first_of)

```
vector<string> bits;
size_t pos = 0;
size_t newpos;
while(pos != string::npos) {
    newpos = str.find_first_of(" \t", pos);
    bits.push_back(str.substr(pos, newpos-pos));
    if(pos != string::npos)
        pos++;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-26T01:57:26.117

使用`string::find_first_of()`[[1]](http://www.cplusplus.com/reference/string/string/find_first_of/)：

```
int main ()
{
  string str("Replace the vowels in this sentence by asterisks.");
  size_t found;

  found = str.find_first_of("aeiou");
  while (found != string::npos) {
    str[found]='*';
    found=str.find_first_of("aeiou", found + 1);
  }

  cout << str << endl;

  return 0;
} 
```

# php - 如何判断哪个 Javascript 文件在 PHP 中请求数据？

> ID：13079771
> 
> 赞同：0
> 
> 时间：2012-10-26T01:54:47.777
> 
> 标签：php, javascript, json

我有两个 javascript 文件，调用它

*   test1.js
*   test2.js

它们用于使用以下命令从 php 文件中请求数据：

```
var xmlhttp= new XMLHttpRequest();

xmlhttp.open("GET", "../forum/getSomething.php", true);
xmlhttp.send(); 
```

我有一个 php 文件，用于执行一些查询并将编码的 json obj 返回到上面的 js 文件之一，调用它

*   getSomething.php

我的问题是，我怎样才能知道哪个文件 js 正在向 php 发出请求？最终，我想声明一个条件并执行以下操作：

```
# inside getSomething.php

# conditional statements
if request from test1.js
    do A
else if request from test2.js
    do B 
```

任何提示都会有所帮助，谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T01:56:41.393

如果不让不同的文件自己实际指定这一点，这是不可能的——例如，这可以通过向 . 添加自定义标头`XMLHttpRequest`或添加额外的查询参数来完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T01:56:57.040

您可以使用`HTTP_REFERER`with`HTTP_X_REQUESTED_WITH`但可能会很棘手我建议您可以`js`使用 ID 识别每个请求

例子

```
 xmlhttp.open("GET", "../forum/getSomething.php?action=test1", true); 
```

然后 PHP

```
switch ($_GET['action']) {
    case "test1" :
        // Do Test 1
        break;

    case "test2" :
        // Do Test 2
        break;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T01:58:20.857

您不能一般地编写“这来自脚本 x”的代码 - JavaScript 引擎不会跟踪任何特定代码行的来源。

您始终可以传递与每个脚本不同的显式数据（即在查询字符串中），即

```
 xmlhttp.open("GET", "../forum/getSomething.php?from=test1", true); 
```

旁注：考虑使用 JQuery.ajax 获取更通用的代码......

# c# - WkHtmlToPDF - 使用标准输入和页眉/页脚

> ID：13079774
> 
> 赞同：8
> 
> 时间：2012-10-26T01:55:17.663
> 
> 标签：c#, razor, stdin, wkhtmltopdf

我正在尝试使用从 C# Web 应用程序调用的 wkhtmltopdf.exe 将 HTML 文档呈现为 PDF。

HTML 文档需要在每个页面上重复出现页脚和页眉，这可以通过 wkhtmltopdf 指定`--header-html <a path>`为参数来实现。

但是，页脚是从 Razor 视图动态呈现的，我宁愿不必将其存储在磁盘上的临时文件中并使用该路径，但我想使用已经在内存中呈现的 HTML。通过写入`StandardInput`流，文档本身可以做到这一点，如下所示：

```
var wkhtml = ConfigurationManager.AppSettings["WkHtmlToPdfPath"];
var p = new Process();

p.StartInfo.CreateNoWindow = true;
p.StartInfo.RedirectStandardOutput = true;
p.StartInfo.RedirectStandardError = true;
p.StartInfo.RedirectStandardInput = true;
p.StartInfo.UseShellExecute = false;
p.StartInfo.FileName = wkhtml;

p.StartInfo.Arguments = "-q -n --disable-smart-shrinking - -";
p.Start();

var stdin = p.StandardInput;
stdin.AutoFlush = true;
stdin.Write(template);
stdin.Dispose(); 
```

是否可以对页眉和页脚 HTML 执行相同的操作，即直接将其传递给内联而不必求助于临时文件？

我试过了：

```
stdin.Write(string.Format("--footer-html {0} ", footer)); 
```

但当然，它只是将其视为文档的一部分，而不是页脚。

我也想动态渲染页脚和页眉的主要原因（主要）是由另一个问题引起的。虽然拥有动态页眉和页脚会很好，但这主要是为了解决我必须使用绝对路径（即：C:\templates\images\logo.png）链接到图像的问题，因为相对路径（即： images/logo.png）在您使用标准输入并仅传入 HTML 字符串 blob 时不起作用，因此我需要在运行时通过 Razor 插入绝对路径。

对于这个问题，我尝试设置进程的工作目录以匹配相对路径，但无济于事：

```
p.StartInfo.WorkingDirectory = @"C:\templates"; 
```

如果我能解决这个问题，那也将解决 90% 的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-12T12:59:46.517

请注意，如果您解决了这个 JulianR，我也会假设您在 MVC 中（？）如果没有，您可以忽略下面的一些初始代码，但我有类似的情况，由于安全，我需要将输出直接流式传输到 wkhtmltopdf并登录网站的各个部分。

首先，在控制器中，您可以使用任何适用的母版页（本身可能使用页眉和页脚）拉入显示所需的视图：

```
var view = ViewEngines.Engines.FindView(ControllerContext, myViewName, myMasterPageLayout); 
```

然后，您可以使用任何必要的 ViewData、Tempdata 等获取此视图的当前信息，并将其存储在字符串中（内容如下）：

```
string content;
ViewData.Model = model;
using (var writer = new System.IO.StringWriter())
{
    var context = new ViewContext(ControllerContext, view.View, ViewData, TempData, writer);
    view.View.Render(context, writer);
    writer.Flush();
    content = writer.ToString();
    writer.Close();
} 
```

在这个阶段，如果需要，您实际上可以修改字符串中的输出 html - 例如，将任何本地路径更改为完整路径

随着您输出 HTML，您只需传递到 wkhtmltopdf：

```
var p = new Process();
p.StartInfo.CreateNoWindow = true;
p.StartInfo.RedirectStandardOutput = true;
p.StartInfo.RedirectStandardError = true;
p.StartInfo.RedirectStandardInput = true;
p.StartInfo.UseShellExecute = false;
//Other parameters as required
byte[] file;
try
{
    p.Start();
    byte[] buffer = new byte[32768];

    using (System.IO.StreamWriter stdin = p.StandardInput)
    {
        stdin.AutoFlush = true;
        stdin.Write(content);
    }

    using (MemoryStream ms = new MemoryStream())
    {
        ms.Position = 0;
        p.StandardOutput.BaseStream.CopyTo(ms);
        file = ms.ToArray();
    }

    p.StandardOutput.Close();
    // wait or exit
    p.WaitForExit(60000);

    // read the exit code, close process
    int returnCode = p.ExitCode;

} 
```

然后你有一个字节数组，其中包含整个页面的 PDF 内容。

# mysql - 按周分组返回奇怪的间隔

> ID：13079776
> 
> 赞同：0
> 
> 时间：2012-10-26T01:55:29.800
> 
> 标签：mysql, group-by

出于某种奇怪的原因，按周分组返回带有日期时间字段的奇数日期间隔。

“已完成”是一个日期时间字段，并使用此查询：

```
SELECT 
    Completed, 
    COUNT( DISTINCT Table1.ID ) AS ActivityCount 
FROM Table1 
JOIN Table1Items 
ON Table1.ID = Table1Items.ID 
JOIN database_database.Table2 
ON Table2.Item = Table1Items.Item 
WHERE Completed != '0000-00-00' AND Completed >= '2012-09-25' AND Completed <= '2012-10-25' 
GROUP BY WEEK(Completed) 
```

我越来越：

```
Completed  ActivityCount    CompletedTimestamp
2012-09-25  300            2012-09-25 00:00:00
2012-10-02  764            2012-10-02 00:00:00
2012-10-08  379            2012-10-08 00:00:00
2012-10-17  659            2012-10-17 00:00:00
2012-10-22  382            2012-10-22 00:00:00 
```

有的相隔 7 天，有的相隔 6 天，有的相隔 5 天……还有一个相隔 9 天？

为什么它以如此奇怪的间隔而不是仅仅 7 天对日期进行分组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T02:28:35.350

该`week`函数不计算日期的差异。

该`week`函数返回日期的周数。如果您按它分组，则该组中的日期将是一周的开始和结束以及中间的日期。单个日期之间的差异可以大于 7 天或更短。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T12:53:49.467

正如 juergen d 所暗示的那样，答案是聚合日期列——使用 min 或 max 取决于您是否希望将一周的第一天或最后一天用作一致的间隔；例如：

SELECT MIN(Completed), COUNT(DISTINCT Table1.ID) AS ActivityCount FROM Table1 JOIN Table1Items ON Table1.ID = Table1Items.ID JOIN database_database.Table2 ON Table2.Item = Table1Items.Item WHERE Completed != '0000-00-00' AND Completed >= '2012-09-25' AND Completed <= '2012-10-25' 按周分组（已完成）

# java - 可编辑的 JTableHeader

> ID：13079777
> 
> 赞同：6
> 
> 时间：2012-10-26T01:55:45.380
> 
> 标签：java, swing, jtable, jtableheader

> **可能重复：**
> [访问 JTableHeader 中的 JTextField](https://stackoverflow.com/questions/12598180/accessing-a-jtextfield-in-jtableheader)

如何使 JTableHeader 可编辑。我将 ColumnHeader 设为 JTextField。我必须做什么才能使 JTextField 可编辑。请参阅示例：

```
import java.awt.*;
import javax.swing.*;

import javax.swing.table.*;

import java.awt.event.*;

public class Test extends JFrame {

String[][] cellValues = { { "v00", "v01", "v02" }, { "v10", "v11", "v12" },
        { "v20", "v21", "v22" }, { "v30", "v31", "v32" },
        { "v40", "v41", "v42" }, { "v50", "v51", "v52" } };
String[] columnNames = { "v00", "v01", "v02" };

javax.swing.JTable jTable1 = new javax.swing.JTable(cellValues, columnNames);

public Test() {
    try {
        jbInit();
    } catch (Exception e) {
        e.printStackTrace();
    }
}

private void jbInit() throws Exception {
    this.getContentPane().add(new JScrollPane(jTable1), null);
    for (int i = 0; i < 3; i++)
        jTable1.getColumnModel().getColumn(i)
                .setHeaderRenderer(new Renderer());
}

public static void main(String[] args) {
    Test frame = new Test();
    frame.addWindowListener(new java.awt.event.WindowAdapter() {
        public void windowClosing(WindowEvent e) {
            System.exit(0);
        }
    });
    frame.pack();
    frame.setVisible(true);
}

}

class Renderer extends JPanel implements TableCellRenderer {

JLabel label = new JLabel(" ");
JTextField field = new JTextField("%");

public Renderer() {
    super(new BorderLayout());
    add(label, BorderLayout.NORTH);
    add(field, BorderLayout.CENTER);
    setBorder(BorderFactory.createEtchedBorder());
}

public Component getTableCellRendererComponent(JTable table, Object value,
        boolean isSelected, boolean hasFocus, int row, int column) {
    label.setText(value.toString());
    return (JComponent) this;
}

public String toString() {
    return label.toString();
}

public void setText(String text) {
    label.setText(text);
}

} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-26T14:58:48.323

这是制作可编辑标题的简单方法（不需要自定义渲染器或 UI）：

```
import java.awt.*;
import java.awt.event.*;

import javax.swing.*;
import javax.swing.border.*;
import javax.swing.table.*;

public class JTableEditableHeaderDemo implements Runnable
{
  private JTable table;
  private JTableHeader header;
  private JPopupMenu renamePopup;
  private JTextField text;
  private TableColumn column;

  public static void main(String[] args)
  {
    SwingUtilities.invokeLater(new JTableEditableHeaderDemo());
  }

  public JTableEditableHeaderDemo()
  {
    table = new JTable(10, 5);
    table.setAutoResizeMode(JTable.AUTO_RESIZE_OFF);
    table.setPreferredScrollableViewportSize(table.getPreferredSize());

    header = table.getTableHeader();
    header.addMouseListener(new MouseAdapter(){
      @Override
      public void mouseClicked(MouseEvent event)
      {
        if (event.getClickCount() == 2)
        {
          editColumnAt(event.getPoint());
        }
      }
    });

    text = new JTextField();
    text.setBorder(null);
    text.addActionListener(new ActionListener(){
      public void actionPerformed(ActionEvent e)
      {
        renameColumn();
      }
    });

    renamePopup = new JPopupMenu();
    renamePopup.setBorder(new MatteBorder(0, 1, 1, 1, Color.DARK_GRAY));
    renamePopup.add(text);
  }

  public void run()
  {
    JFrame f = new JFrame("Double-click header to edit");
    f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    f.getContentPane().add(new JScrollPane(table));
    f.pack();
    f.setLocationRelativeTo(null);
    f.setVisible(true);
  }

  private void editColumnAt(Point p)
  {
    int columnIndex = header.columnAtPoint(p);

    if (columnIndex != -1)
    {
      column = header.getColumnModel().getColumn(columnIndex);
      Rectangle columnRectangle = header.getHeaderRect(columnIndex);

      text.setText(column.getHeaderValue().toString());
      renamePopup.setPreferredSize(
          new Dimension(columnRectangle.width, columnRectangle.height - 1));
      renamePopup.show(header, columnRectangle.x, 0);

      text.requestFocusInWindow();
      text.selectAll();
    }
  }

  private void renameColumn()
  {
    column.setHeaderValue(text.getText());
    renamePopup.setVisible(false);
    header.repaint();
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T02:07:25.973

以下链接下有完整的解决方案，乍一看还不错！
[如何创建带有可编辑标题的 JTable？](http://www.esus.com/docs/GetQuestionPage.jsp?uid=1291)

# intellij-idea - 关联一个不同的程序以在 IntelliJ 中打开我的输出文件

> ID：13079778
> 
> 赞同：1
> 
> 时间：2012-10-26T01:56:28.770
> 
> 标签：intellij-idea, flash, file-association

我刚开始使用 linux (Ubuntu) 并切换到 IntelliJ 作为我的新 IDE。我刚刚完成了我的第一个项目的设置，但我找不到在哪里更改打开我的 .swf 输出文件的默认程序。

现在它一直用“电影播放器​​”打开我的文件，它甚至无法识别 .swf 文件。

这是我必须更改的 linux 设置（文件类型的默认程序）还是 IntelliJ 中的设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T00:07:40.950

通常可以在[运行/调试配置](http://www.jetbrains.com/idea/webhelp/run-debug-configurations.html)中覆盖应用程序。对于 Flash，设置是**Launch with**，对于 Haxe，它是**Alternative executable**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T14:03:32.240

您可以在此处进行设置：`Settings > IDE SETTINGS > File Types`. 这将更改不同文件类型的查看模式。在我的 Windows 机器上，`.swf`不在列表中。这可能表明您必须在您的操作系统 (Ubuntu) 中更改此文件的默认程序。

# javascript - Hide dynamically using jQuery

> ID：13079789
> 
> 赞同：0
> 
> 时间：2012-10-26T01:57:56.207
> 
> 标签：javascript, jquery, label

How do I hide a certain label dynamically along with it's leading th tag?

example:

```
<th class="woo_metabox_names"><label for="woothemes_size">sq ft</label></th> 
```

I tried and this doesn't work, by the way:

```
$('label[for="woothemes_size"]').hide(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T02:02:58.160

To hide both the `label` and `th` elements, you can use:

```
$('label[for="woothemes_size"]').parent().hide(); 
```

# javascript - gmaps.js - 遍历元素并添加标记

> ID：13079795
> 
> 赞同：0
> 
> 时间：2012-10-26T01:58:31.093
> 
> 标签：javascript, jquery, google-maps, loops, geocoding

使用**[gmaps.js](http://hpneo.github.com/gmaps/examples.html)** 我怎么能遍历（HTML）之类的东西：

```
<h1 id="location">Phuket</h1>

<div class="blist">
    <h3>Some hotel name</h3>
    <p>Adress 1</p>
</div>

<div class="blist">
    <h3>Another hotel name</h3>
    <p>Adress 2</p>
</div>

<div class="blist">
    <h3>Some name</h3>
    <p>Adress 3</p>
</div>

<div class="blist">
    <h3>Some other name</h3>
    <p>Adress 4</p>
</div> 
```

..和：

1.  地理代码 + 向地图添加标记
2.  `<h3>`在每个标记弹出窗口中添加名称
3.  将链接添加到与它对应的每个弹出窗口（如锚链接）
4.  为所有 GEO 代码锁定使用并添加#location，因为没有该上下文，每个名称都不会说太多

我必须使用循环，但即使搜索了几个小时也没有找到任何好的例子。有人会认为这将是一种常用的.. :)

**[检查/使用 jsFiddle 基础 >>](http://jsfiddle.net/bmGEN/)**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T10:48:33.003

gmaps适配器使这**变得**非常简单。

```
var map = new GMaps({
    div: '#mapCanvas',
    lat: 0,
    lng: 52,
    zoom: 13,
    width: '400px',
    height: '300px'
});

var popupTemplate = '<div class="popupText"><h3>%1</h3><p>%2</p><p>%3</p></div>';

$(".blist").each(function() {
    var title = $(this).find("h3").text();
    var address = $(this).find("p.address").text();
    var tel = $(this).find("p.tel").text();
    GMaps.geocode({
        address: address,
        callback: function(results, status) {
            if (status == 'OK') {
                var latlng = results[0].geometry.location;
                map.setCenter(latlng.lat(), latlng.lng());
                map.addMarker({
                    lat: latlng.lat(),
                    lng: latlng.lng(),
                    title: title,
                    infoWindow: {
                        content: popupTemplate.replace('%1',title).replace('%2',address).replace('%3',tel)
                    }
                });
            }
        }
    });
}); 
```

**[演示](http://jsfiddle.net/PJ6dX/1/)**

笔记：

*   演示中使用的伦敦酒店因为地理编码对于普吉岛的地址不可靠
*   电话号码字段已添加

# c++ - WTSEnumerateSessions API 获取的会话 ID 是否唯一？

> ID：13079796
> 
> 赞同：1
> 
> 时间：2012-10-26T01:58:43.887
> 
> 标签：c++, winapi, sessionid

假设在某个时间点我从本地服务应用程序调用[WTSEnumerateSessions](http://msdn.microsoft.com/en-us/library/windows/desktop/aa383833%28v=vs.85%29.aspx)并获取当前用户会话 ID 的列表。因此，如果稍后我需要知道某个特定用户会话是否仍处于相同状态，我可以依靠[WTS_SESSION_INFO::SessionId](http://msdn.microsoft.com/en-us/library/windows/desktop/aa383864%28v=vs.85%29.aspx)来唯一吗？如果没有，该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T03:12:49.597

Windows 为每个登录会话提供一个 SID。[MSDN 有用于查找它的示例代码，](http://msdn.microsoft.com/en-us/library/windows/desktop/aa446670%28v=vs.85%29.aspx)并且保证对于给定的登录会话它是唯一且恒定的。如果用户注销并重新登录，他将被赋予一个新的登录 SID。

如果同一用户同时在本地登录和远程登录，则每个登录会话将有不同的登录 SID。这张图片显示了我的意思：

![Alice 有两个登录会话，具有不同的登录 SID](../Images/63a87deddbe514809c75a8cdc81a2674.png).

[（免责声明 - 我从我的博客文章中](http://www.paralint.com/blog/2007/12/19/getting-the-username-from-a-desktop-handle-hdesk/)偷了它）

您可以使用此命令获取登录 SID。在不编写任何代码的情况下播放假设场景可能很有用。

```
c:\>whoami /logonid
S-1-5-5-0-329693570 
```

在 Windows Server 2008 上测试。其他版本上的 YMMV。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T07:54:32.083

会话 id 被分配为登录时未使用的最低编号。

因此，如果我有 ID 1，然后注销，然后您登录，您也会获得 ID 1，因为 1 在您登录时可用。

如果我从未注销，您将获得 ID 2，因为 ID 1 正在使用中。如果我然后注销并且您留在下一个用户将再次分配 ID 1（而不是 3），因为 1 是最低的未使用号码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T07:02:19.083

会话 ID 与安全 ID 不同。会话可能有人在某种状态下登录，或者可能没有人登录。您可以调用 WTSEnumerateSessions 并发现有人在会话 1 中登录，然后该人可以注销，稍后其他人可以登录并且 Windows 可能会给他们会话 1，然后您再次调用 WTSEnumerateSessions。因此，经过两次更改并被不同的用户使用后，状态可能与以前相同。你说这是独一无二的吗？不知道你说的独特是什么意思。

# python - 变换多项式图 - 乘以值列表

> ID：13079797
> 
> 赞同：1
> 
> 时间：2012-10-26T01:59:51.377
> 
> 标签：python, matplotlib

我正在使用matplotlib。我有一个包含 600 个值的列表。我还有一个多项式函数，我用 0 到 600 之间的值绘制图形。我试图将每个点乘以列表中的相应值。

我可以在一个循环中评估多项式，然后在那里进行乘法运算，但我最终会得到一个点图而不是一条线。

我想我可能需要使用 Transformations 框架，但不确定如何将其应用于图表。

**编辑：**

```
a = [5, 2, 3 ... 0, 2, 8] # 600 values
poly_a = polyfit(a)

deriv_a = polyder(poly_a)

b = [232, 342 ... 346, 183] # 600 values 
```

我需要将 deriv_a 乘以 b。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T02:12:21.170

我认为你对事情有点误解。这就是`numpy`目的（如果您正在使用`matplotlib`它，则在绘图时已经将事物转换为 numpy 数组，无论如何。）

只需将您的“600 个值列表”转换为 numpy 数组，然后计算多项式。

举个例子：

```
import numpy as np
import matplotlib.pyplot as plt

# Your "list of 600 values"...
x = np.linspace(0, 10, 600)

# Evaluate a polynomial at each location in `x`
y = -1.3 * x**3 + 10 * x**2 - 3 * x + 10

plt.plot(x, y)
plt.show() 
```

![在此处输入图像描述](../Images/03923d010e75483dd62a346674629edc.png)

**编辑：** 根据您的编辑，听起来您在问如何使用`numpy.polyder`？

基本上，您只想`numpy.polyval`用来评估`polyder`在您的点位置返回的多项式。

以上面的示例为基础：

```
import numpy as np
import matplotlib.pyplot as plt

# Your "list of 600 values"...
x = np.linspace(0, 10, 600)

coeffs = [-1.3, 10, 3, 10]

# Evaluate a polynomial at each location in `x`
y = np.polyval(coeffs, x)

# Calculate the derivative
der_coeffs = np.polyder(coeffs)

# Evaluate the derivative on the same points...
y_prime = np.polyval(der_coeffs, x)

# Plot the two...
fig, (ax1, ax2) = plt.subplots(nrows=2)

ax1.plot(x, y)
ax1.set_title('Original Function')

ax2.plot(x, y_prime)
ax2.set_title('Deriviative')

plt.show() 
```

![在此处输入图像描述](../Images/6e6aa705d0ab88d7281c3460c52224a8.png)

# c++ - OpenGL VBO 法线/光照问题

> ID：13079798
> 
> 赞同：2
> 
> 时间：2012-10-26T01:59:59.863
> 
> 标签：c++, opengl, vbo

我无法使用 VBO 正确渲染法线。下面是我正在使用的代码，顶点是一个包含顶点的数组，法线是一个包含法线的数组：

```
//Create the buffers and such
GLuint VBOID;
glGenBuffersARB(1, &VBOID);
glBindBufferARB(GL_ARRAY_BUFFER_ARB, VBOID);
glBufferDataARB(GL_ARRAY_BUFFER_ARB, sizeof(vertices) + sizeof(normals), 0, GL_STATIC_DRAW_ARB);
glBufferSubDataARB(GL_ARRAY_BUFFER_ARB, 0, sizeof(vertices), vertices);
glBindBufferARB(GL_ARRAY_BUFFER_ARB, 0);

///Start loop
cout << "Starting" << endl;
while( window.isOpen() ) {
    sf::Event event;
    while( window.pollEvent( event ) ) {
        if( event.type == sf::Event::Closed )
            window.close();
    }
    fps = FPS.getElapsedTime().asSeconds();
    fps = 1 / fps;
    FPS.restart();
    if(ShowFPS.getElapsedTime().asSeconds() > 1)
    {
        cout << "FPS: " << fps << "\t FrameTime: " << 1000 / fps << endl;
        ShowFPS.restart();
    }

    glClear( GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT );
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    gluPerspective(50.0, 1.0, 1.0, 5000);
    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();
    gluLookAt(5, 5, 5, 0, 0, 0, 0, 1, 0);

    //VBO
    glBindBufferARB(GL_ARRAY_BUFFER_ARB, VBOID);
    glEnableClientState(GL_NORMAL_ARRAY);
    glEnableClientState(GL_VERTEX_ARRAY);

    glColor3f(1, 0, 0);
    glRotatef(25 * TurnTimer.getElapsedTime().asSeconds(), 0, 1, 0);
    glRotatef(15 * TurnTimer.getElapsedTime().asSeconds(), 1, 0, 0);
    glNormalPointer(GL_FLOAT, 0, (void*)sizeof(vertices));
    glVertexPointer(3, GL_FLOAT, 0, 0);
    glDrawArrays(GL_TRIANGLES, 0, NumOfF*3);

    glDisableClientState(GL_VERTEX_ARRAY);
    glDisableClientState(GL_NORMAL_ARRAY);
    glBindBufferARB(GL_ARRAY_BUFFER_ARB, 0);

    window.display();
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-26T02:03:19.457

```
glBufferSubDataARB(GL_ARRAY_BUFFER_ARB, 0, sizeof(vertices), vertices); 
```

*好的，那么您为法线*执行此操作的部分在哪里？

另外，请停止使用 ARB 扩展功能。近十年来，它一直是 OpenGL 的核心功能；已经删除 ARB 后缀。

# actionscript-3 - as3 在 cacheAsBitmap 与 CachedSprite 之间的不同

> ID：13079805
> 
> 赞同：0
> 
> 时间：2012-10-26T02:01:15.410
> 
> 标签：actionscript-3, bitmap

我有 cacheAsBitmap = true

和以下课程

```
package  utility{
    import flash.display.Bitmap;
    import flash.display.BitmapData;
    import flash.display.Sprite;
    import flash.geom.Matrix;
    import flash.geom.Rectangle;
    import flash.utils.getQualifiedClassName;

    public class CachedSprite extends Sprite {
        //Declare a static data cache
        protected static var cachedData:Object = { };

        public var clip:Bitmap;

        public function CachedSprite(asset:Class, centered:Boolean = false, scale:int = 2) {
            //Check the cache to see if we've already cached this asset
            var data:BitmapData = cachedData[getQualifiedClassName(asset)];

            if (!data) {
                // Not yet cached. Let's do it now

                // This should make "Class", "Sprite", and "Bitmap" data types all work.
                var instance:Sprite = new Sprite();
                instance.addChild(new asset());

                // Get the bounds of the object in case top-left isn't 0,0
                var bounds:Rectangle = instance.getBounds(this);

                // Optionally, use a matrix to up-scale the vector asset,
                // this way you can increase scale later and it still looks good.
                var m:Matrix = new Matrix();
                m.translate(-bounds.x, -bounds.y);
                m.scale(scale, scale);

                // This shoves the data to our cache. For mobiles in GPU-rendering mode,
                // also uploads automatically to the GPU as a texture at this point.
                data = new BitmapData(instance.width * scale, instance.height * scale, true, 0x0);
                data.draw(instance, m, null, null, null, true); // final true enables smoothing
                cachedData[getQualifiedClassName(asset)] = data;
            }

            // This uses the data already in the GPU texture bank, saving a draw/memory/push call:
            clip = new Bitmap(data, "auto", true);

            // Use the bitmap class to inversely scale, so the asset still
            // appear to be it's normal size
            clip.scaleX = clip.scaleY = 1 / scale;

            addChild(clip);

            if (centered) {
                // If we want the clip to be centered instead of top-left oriented:
                clip.x = clip.width / -2;
                clip.y = clip.height / -2;
            }

            // Optimize mouse children
            mouseChildren = false;
        }

        public function kill():void {
            // Just in case you want to clean up things the manual way
            removeChild(clip);
            clip = null;
        }
    }
} 
```

有没有人可以向我解释不同之处？为什么我需要实现这个类而不是只使用 cacheAsBitmap = true？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T03:49:12.487

为避免重绘[`DisplayObject`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/DisplayObject.html)if 已移动，您可以设置该[`cacheAsBitmap`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/DisplayObject.html#cacheAsBitmap)属性。如果设置为 true，Flash 运行时缓存显示对象的内部位图表示。

每当您将过滤器应用于显示对象时，cacheAsBitmap 属性都会自动设置为 true。最适合用于具有大部分静态内容且不经常缩放、旋转或更改 alpha 的显示对象，位图数据必须针对水平或垂直移动之外的所有操作重新计算。

自己缓存位图可以控制渲染生命周期。

在您的`CachedSprite`课程中，实际添加到显示列表的是 a [`Bitmap`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/Bitmap.html)，而不是添加原始显示对象。与输入设备的任何[交互](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/InteractiveObject.html)都必须应用于缓存的精灵实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T03:35:55.780

主要区别似乎在这条线上：

```
var data:BitmapData = cachedData[getQualifiedClassName(asset)]; 
```

此类保留对任何先前缓存的位图的静态引用。如果您有两个实例`CachedSprite`显示相同的位图数据（例如粒子），则此类将仅使用 的一个实例`BitmapData`，从而节省内存。

# javascript - 使用 JavaScript 提取标题的同源策略

> ID：13079809
> 
> 赞同：1
> 
> 时间：2012-10-26T02:02:03.273
> 
> 标签：javascript, jquery, url, title, same-origin-policy

我想使用带有 JQuery 的 JavaScript 从 HTML 页面中提取标题，如

```
$.get('page.html', function(text) {
  var pagetitle = $(text).title;
}); 
```

这样当用户在文本框中输入 URL 时，我可以在另一个文本框中显示标题。但是如果页面在我的域之外，这将不起作用，例如`www.google.com`，因为同源策略。还有其他方法可以实现此功能吗？这不是一个关键的功能，但我想问一下，以防万一。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T02:04:54.850

您必须有一个服务器端“代理”，它会出去并获取页面，然后将其返回给 jQuery 进行处理。如果您在客户端环境中运行它（即本地 PC 上的纯 HTML 文件），那么确实没有一种简单的方法可以做到这一点。

一个基本的 PHP 脚本看起来像这样：

```
<?php
echo file_get_contents($_REQUEST["url"]);
?> 
```

注意：这是您所要求的基本演示。仅此一项本身就可能带来某种安全风险。[本文](http://www.emirplicanic.com/php/php-class-to-get-remote-page-title-and-description)介绍了一种更好的方法。

另外，虽然我没有运行你的代码，但我觉得它应该更像这样：

```
$.get('page.html', function(text) {
    var pagetitle = $(text).find("title").text();
}, "html"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T21:55:37.960

你可以解决它！

```
<script src="http://kincrew.github.com/xReader/xReader.full.js"></script> 
<script type="text/javascript"> 
xReader("http://www.google.com", "title/text()", function(data) { 
    alert(data.content); 
})
</script> 
```

看看[xReader](http://kincrew.github.com/xReader/)

# java - AlertDialog.Builder 无法解析为类型

> ID：13079812
> 
> 赞同：0
> 
> 时间：2012-10-26T02:02:38.157
> 
> 标签：java, android, android-alertdialog

所以我正在尝试构建一个显示 3 行的弹出窗口：-时间-事件类型-位置

然后我有两个按钮，确定（这会关闭弹出窗口）和发送到地图（这会向谷歌地图提交明确的意图并将位置发送给它，我还没有编写此代码）

出于某种奇怪的原因，我在 Eclipse 中收到一个错误，上面写着“AlertDialog.Builder 无法解析为一种类型”。我假设我已经正确导入它，并且多次清理它。我不确定如何进行。谢谢您的帮助。

```
import android.R;
import android.app.Dialog;
import android.content.DialogInterface;
import android.os.Bundle;

public class AlertDialog 
{
public Dialog onCreateDialog(Bundle savedInstanceState) 
{
    AlertDialog.Builder builder = new AlertDialog.Builder(this);
    builder.setMessage("Time: " + SMSReceiver.getTime() + "\nIncident: " + 
    SMSReceiver.getCallType() + "\nLocation: " + SMSReceiver.getAddress())
    .setPositiveButton(R.string.ok, new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int id) {

        }
    })
    .setNegativeButton(R.string.cancel, new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int id) {

        }
    });

    return builder.create();

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T02:15:01.440

它实际上不是错误，您错误地使用 AlertDialog 创建了一个类名，该类名实际上已经存在于 android 包中。现在，当您使用 AlertDialog 创建类并尝试访问其 Builder 方法时，它会给您一个错误，因为您的自定义类没有该方法。

您问题的简单解决方案只需将您​​的 AlertDialog 类重命名为其他类名，您的问题就会得到解决。

注意：您的代码中没有其他错误。

我建议您将您的类名更改为任何其他名称，例如说 MyAlertDialog，然后您的类代码将如下所示，（您还需要根据 Java 文件命名约定规则根据您的公共类更改文件名，

```
public class MyAlertDialog // See change is here
{
    public Dialog onCreateDialog(Bundle savedInstanceState) 
    {
        AlertDialog.Builder builder = new AlertDialog.Builder(this);
        builder.setMessage("Time: " + SMSReceiver.getTime() + "\nIncident: " + 
                SMSReceiver.getCallType() + "\nLocation: " + SMSReceiver.getAddress())
                .setPositiveButton(R.string.ok, new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int id) {

                    }
                })
                .setNegativeButton(R.string.cancel, new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int id) {

                    }
                });

        return builder.create();

    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-26T02:20:20.157

因为你的类名是 AlertDialog。在您的 onCreateDialog() 函数中，

```
AlertDialog.Builder builder = new AlertDialog.Builder(this); 
```

在这一行中，“AlterDialog”实际上是对您自定义的 AlterDialog 类的引用。如果你改变这个，它应该是工作。

```
android.app.AlertDialog.Builder builter = new android.app.AlertDialog.Builder(this); 
```

# ruby-on-rails - 未定义的方法“文本？” 对于 nil:NilClass 验证唯一性 rails3 ruby 187

> ID：13079813
> 
> 赞同：2
> 
> 时间：2012-10-26T02:02:54.617
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我刚刚从 rails 2.3 更新到 3，我正在尝试用更干净的方法替换这个旧方法，因为它正在输出模型和字段名称，wtf！

![在此处输入图像描述](../Images/4a899d1f5698ead54cfee96b40e638be.png)

**但是，在调用validates_uniqueness_of**时出现上述错误（存在正常）。我通过了主要 id 范围，仍然得到它。欢迎任何帮助。

```
 def validate
     if org_name.blank?
       errors.add(:org_name, :blank, :default => nil)
     else
       if (org = Organization.find_by_org_name(org_name)) && org != self
         errors.add(:org_name, :taken, :default => nil, :value => org_name)
       end
     end
   end 
```

至

```
validates :org_name, :presence => true
  validates_uniqueness_of :org_name, :scope => :org_id 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T05:22:29.667

这是用于唯一性验证的 Rails 3 语法：

验证：org_name，唯一性：{范围：：org_id}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T05:45:17.630

这很容易解决。

首先分析报错信息：

> 组织名称翻译缺失：en.activerecord.errors.models.user.attributes.org_name.blank

这是由以下代码行引起的：

```
errors.add(:org_name, :blank, :default => nil) 
```

当您调用上述代码时，您是在告诉 rails 查找键为`:blank`. 您可能还没有设置它，因此，只需进入您的语言环境文件 (config/locales/en.yml)，然后添加以下内容：

```
en:
  hello: "Hello world"
  activerecord:
    errors:
      models:
        organization:
          attributes:
            org_name:
              blank: "can't be blank." 
```

希望这将为您解决问题。

# java - 简单的校验和算法

> ID：13079817
> 
> 赞同：0
> 
> 时间：2012-10-26T02:03:01.593
> 
> 标签：java, arrays, while-loop, checksum

整数数组 a 包含数字的数字。在本例中，我将插入随机数，但代码必须适用于任何一组数字。我必须将数组中的整数加在一起，然后将该总和中的最后一个数字存储到一个名为校验和的变量中。

在这个例子中，3 + 5 + 7 = 15 所以校验和 = 5。这是我到目前为止的代码。我将如何计算校验和？

```
int[] a = { 3, 5, 7 }; 

int checksum = 0;
int i = 0;

while ( i < a.length )
    {
        checksum += a[i];
        i++;
    }

checksum = ???????; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T02:04:36.470

只需使用模数运算符。`checksum %= 10`

这基本上意味着，设置为恰好是最后一个数字`checksum`的其余部分。`checksum/10`

编辑：

只是提供另一个建议，您的`while`循环确实更适合成为`for-each`循环，只需尝试：

```
for(int i : a){
    checksum += i;
} 
```

将其读作“For `int i`in `a`”。恕我直言，这更容易理解，您避免了一些打字。

# php - 如何将 CMS PHP 代码与 jQuery fancybox 结合起来？

> ID：13079820
> 
> 赞同：1
> 
> 时间：2012-10-26T02:03:26.803
> 
> 标签：php, jquery, fancybox

我是编程新手，试图制作简单的 cms：

> 一个 index.php 显示所有文章主题，
> 用户点击主题显示 Fancybox 中的内容，而不是转发到新页面。

我使 PHP 代码有效（但它转发到新页面），并测试[https://stackoverflow.com/a/7844043/1775888](https://stackoverflow.com/a/7844043/1775888)（这可以在地址栏中创建 Fancybox 内容自己的 url）也有效。

我不知道如何组合它们？

我之前尝试过：更改 PHP 中的 href，单击主题 $_GET[id] not isset 然后无法获取查询..

任何建议我都非常感谢你抽出时间。

PHP (index.php)

```
if(isset($_GET[id])){
    $id=mysql_real_escape_string($_GET["id"]);
    $sql="select * from $table where id='$id'";
    $query=mysql_query($sql) or die(mysql_error());
    while($list=mysql_fetch_array($query)){
            print"
<div class=\"contentwrap\" align=\"center\">
    <div class=\"content\">\"$list[content]\"</div>
</div>
    ";
        }
}
else{
    $sql="select * from $table order by id desc";
    $query=mysql_query($sql) or die(mysql_error());
    while($list=mysql_fetch_array($query)){
            print"
<div class=\"subjectwrap\" align=\"center\">
    <div class=\"subject\"><a href=\"index.php?id=$list[id]\">$list[subject]</a></div>
</div>
    ";
    }
} 
```

jQuery（来自[https://stackoverflow.com/a/7844043/1775888](https://stackoverflow.com/a/7844043/1775888)）

```
function showfancybox(id) {
    switch(id) {
        case '#_name':

        $(id).show();

        $.fancybox({
            href: id,
            type:'inline',

            onClosed: function() {
                $(id).hide();
            }
        });
    break;
    }
}

showfancybox(location.hash);

$('a.flink').click(function(e){
    showfancybox($(this).attr('href')); 
}); 
```

编辑：
我更改代码让 $list[content] 加载并显示：无。
进入 index.php，得到消息：无法加载请求的内容。请稍后再试。

```
<?php
$sql="select * from $table order by id desc";
    $query=mysql_query($sql) or die(mysql_error());
    while($list=mysql_fetch_array($query)){
        print"
    <div class=\"subjectwrap\">
        <div class=\"subject\"><a class=\"flink\" href=\"#$list[id]\">$list[subject]</a></div>
    </div>
    ";
    print"
<div class=\"atc\" id=\"$list[id]\">
    <div class=\"contentwrap\" align=\"center\">
        <div class=\"content\">\"$list[content]\"</div>
    </div>
</div>
    ";
    }
?> 

<script type="text/javascript">
$(function(){
function showfancybox(id) {
    switch(id) {
        case '<?php "#$list[id]" ?>':

        $(id).show();

        $.fancybox({
            href: id,
            type:'inline',

            onClosed: function() {
                $(id).hide();
            }
        });
    break;
    }
}

showfancybox(location.hash);

$('a.flink').click(function(e){
    showfancybox($(this).attr('href')); //make href to id
});         
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T03:27:24.970

尝试调用 e.preventDefault(); 在您调用其他函数之前的点击事件中，并且 a 标签未分配您在选择器中使用的 flink 类

在你的 get['id'] 上调用 intval() 而不是 escape_string，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T05:37:54.490

我很抱歉，但我不知道如何回答你的问题。您的代码似乎都是错误的。

例如，你甚至知道你为什么有这条线吗？-

`case '<?php "#$list[id]" ?>':`

你认为它是为了什么？你觉得它如何执行？那个 JavaScript 片段在 php 循环中吗？如果是，那么您将获得多个具有相同名称的函数。

除此之外，如果您的目标是根据 url 哈希打开/关闭 fancyBox，那么我建议使用（即将公开发布）历史帮助程序，请参阅此示例 - [http://jsfiddle.net/FB7UW/show/light/](http://jsfiddle.net/FB7UW/show/light/) (http://jsfiddle.net/FB7UW/)

# postgresql - 获取 PostgreSQL 列中所有现有值的集合

> ID：13079821
> 
> 赞同：2
> 
> 时间：2012-10-26T02:03:28.513
> 
> 标签：postgresql

有一个大约 500,000 行的表。其中一列是字符串字段。

有没有办法在 PostgreSQL 中获取该字符串的所有现有值的集合，而不必从数据库中请求每一行并将值手动添加到集合中？

例子：

```
名字姓氏
威廉            
威尔史密斯
布兰妮·斯皮尔斯

```

“first_name”的所有现有值的集合将是`['will', 'britney']`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T02:09:18.410

```
SELECT DISTINCT first_name FROM people; 
```

或者

```
SELECT first_name FROM people GROUP BY first_name; 
```

# sencha-touch - 如何将表单插入到视图中？

> ID：13079824
> 
> 赞同：0
> 
> 时间：2012-10-26T02:03:49.953
> 
> 标签：sencha-touch, sencha-touch-2

我是 sencha touch 的新手，无法将表单加载到视图中。

在我的 app.js 中，我正在加载主视图

```
Ext.Viewport.add(Ext.create('app.view.Main')); 
```

我的完整 app.js 如下

```
Ext.application({
    name: 'app',

    requires: [
        'Ext.MessageBox',
        'Ext.form.FieldSet',
    ],

    views: ['Main'],

    launch: function() {

        // Initialize the main view
        Ext.Viewport.add(Ext.create('PlanPouch.view.Main'));
    },
}); 
```

我的主要观点是：

```
Ext.define("app.view.Main", {
    extend: 'Ext.Container',
    config:{
        items:[
            form
        ]
    }
});

var form = Ext.create('Ext.form.Panel', {
    fullscreen: true,
    items: [
        {
            xtype: 'textfield',
            name: 'name',
            label: 'Name'
        },
        {
            xtype: 'emailfield',
            name: 'email',
            label: 'Email'
        },
        {
            xtype: 'passwordfield',
            name: 'password',
            label: 'Password'
        }
    ]
}); 
```

我从[官方文档](http://docs.sencha.com/touch/2-0/#!/api/Ext.form.Panel)中获取了表格，但由于某种原因表格没有加载。那么如何将表单添加到我的主视图中呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T20:47:56.437

如果您希望表单始终位于 app.view.Main 中，那么只需执行以下操作：

```
Ext.define("app.view.Main", {
    extend: 'Ext.Container',
    config:{
        items:[
            {
                xtype:'formpanel',
                items: [
                    {
                        xtype: 'textfield',
                        name: 'name',
                        label: 'Name'
                    },
                    {
                        xtype: 'emailfield',
                        name: 'email',
                        label: 'Email'
                    },
                    {
                        xtype: 'passwordfield',
                        name: 'password',
                        label: 'Password'
                    }                        
                ]
            }
        ]
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T08:19:54.000

首先让它通过您的方法解决。进行以下更改，它应该可以在您的系统中运行（在我的系统上运行）：-

**1.) 在 app.js 中**

```
 Ext.Viewport.add(Ext.create('app.view.Main')); 
```

**2）。在 Main.js 中**

```
 Ext.define("app.view.Main", {
                extend: 'Ext.Container',
                config:{
                    items:[
                       {
                         xtype: form
                       }
                    ]
                }
            });

            var form = Ext.create('Ext.form.Panel', {
                fullscreen: true,
                items: [
                    {
                        xtype: 'textfield',
                        name: 'name',
                        label: 'Name'
                    },
                    {
                        xtype: 'emailfield',
                        name: 'email',
                        label: 'Email'
                    },
                    {
                        xtype: 'passwordfield',
                        name: 'password',
                        label: 'Password'
                    }
                ]
            }); 
```

但我不喜欢以你正在做的方式调用**窗体。**
相反，您可以遵循 ARolek 答案或遵循这种方法：-

**1) 应用程序.js**

```
 Ext.application({
            name: "app",
            views: ["Main","second"],

            launch: function () {

                Ext.Viewport.add(Ext.create('app.view.Main'));
            }
        }); 
```

**2) Main.js**

```
 Ext.define("app.view.Main", {
         extend: "Ext.Container",
         requires:["app.view.second"],
         config:{
            fullscreen: true,
              layout: 
                    {
                    type: 'fit'
                    },
                items:[
                  {
                    xtype: "form"
                  }
                ]
            }
        }); 
```

**3）第二个.js**

```
 Ext.define("app.view.second", {
        extend: "Ext.form.Panel",
        requires:['Ext.form.FieldSet','Ext.Toolbar'],
        alias: "widget.form",
        config:
        {
            items: 
            [       
                {
                    xtype: 'fieldset',
                    title: 'About You', 
                   items: [             
                    {
                        xtype: 'textfield',
                        name: 'name',
                        label: 'Name'
                    },
                    {
                        xtype: 'emailfield',
                        name: 'email',
                        label: 'Email'
                    },
                    {
                        xtype: 'passwordfield',
                        name: 'password',
                        label: 'Password'
                    }
                    ]
                }
            ]
        }           
        }); 
```

# android - AAR：Android应用记录调度系统

> ID：13079826
> 
> 赞同：0
> 
> 时间：2012-10-26T02:04:24.027
> 
> 标签：android, android-intent, nfc, android-applicationrecord

在 Android API 中，我们被告知以下内容：

> 如果标签包含 AAR，则标签调度系统按以下方式调度：
> 
> 1.  尝试像往常一样使用意图过滤器启动 Activity。如果匹配 Intent 的 Activity 也匹配 AAR，则启动 Activity。
>     
>     
> 2.  如果过滤 Intent 的 Activity 与 AAR 不匹配，如果多个 Activity 可以处理该 Intent，或者如果没有 Activity 处理该 Intent，则启动 AAR 指定的应用程序。
>     
>     
> 3.  如果没有应用程序可以通过 AAR 启动，请转到 Google Play 下载基于 AAR 的应用程序。

第 2 部分有点令人困惑。如果意图与多个*Activity*匹配，则我们启动*应用程序*。因此，如果我过滤 NFC 意图的活动不是我的默认应用程序启动活动，我不会在多个活动过滤意图的情况下启动它？

换句话说，如果我的应用程序有一个默认的活动“A”和另一个过滤 NFC 意图的活动“B”，那么没有任何其他活动过滤该意图，AAR 意图将启动 B。但如果其他人过滤意图，我将获得不同的行为，并且将启动活动 A。

这是否意味着我也可以让意图过滤器始终位于活动 A（默认启动活动）上，因为总有机会将意图传递给它？

希望这很清楚，

山姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T08:43:51.900

所以如果多个Activity过滤器匹配，Android默认主应用Activity。

似乎比选择一个（哪个？）匹配的活动更好。如果您编写“竞争”过滤器，这就是您得到的，但没有人强迫您；-)

# c - 来自文本文件的 C 字符串

> ID：13079828
> 
> 赞同：0
> 
> 时间：2012-10-26T02:04:37.913
> 
> 标签：c, io

我是 C 编程语言的新手。如何从文本文件中搜索特定字符串并将它们放入数组中，然后从这些数组中生成单个字符串？

文本文件：

```
name1,name2,name3,type1,g1,g2,g3
name1,last1,last2,type2,g4,g6,g7
foo1,foo2,foo3,type3,gx,g3,g5
foo1,doo1,doo2,type4,g1,gt,gl 
```

输出应该是 1 个字符串，而不是分开的，所以如果我们说它是

```
printf("%s", strings); 
```

它提供如下输出：

```
2 records found

Name: name1,name2,name3
type: type1
g1 type: g1
g2 type: g2
g3 type: g3

Name: name1,last1,last2
type: type2
g1 type: g4
g2 type: g6
g3 type: g7 
```

到目前为止，我的尝试是获取文本文件并搜索字符串：

```
#include <stdlib.h>
#include <stdio.h>
#include <string.h>

int main(){

    char tmp[1000];
    int count=0;

    FILE *fp=fopen("test.csv","r");

    while(fgets(tmp, sizeof(tmp),fp) != NULL){
            if (strstr(tmp, "name1")){
                    count = count + 1;
                    printf("%s", tmp);
            }
    }

} 
```

只给出输出：

```
name1,name2,name3,type1,g1,g2,g3
name1,last1,last2,type2,g4,g6,g7 
```

进行中的尝试：

```
#include <stdlib.h>
#include <stdio.h>
#include <string.h>

int main(){

    char tmp[1000];
    int count=0;
    char *string;
    char *name1, *name2, *name3, *type,*g1,*g2,*g3;

    FILE *fp=fopen("test.csv","r");

            while(fgets(tmp, sizeof(tmp),fp) != NULL){        

                    name1 = strtok(tmp,",");
                    name2 = strtok(NULL,",");
                    name3 = strtok(NULL,",");
                    type= strtok(NULL,",");
                    g1= strtok(NULL,",");
                    g2= strtok(NULL,",");
                    g3= strtok(NULL,",");

                    if (strstr(tmp, "name1")){
                            count = count + 1;
                            string = malloc(sizeof(*string));
                            sprintf(string, "\n%d record(s) found.\n\nName: %s, %s, %s \nType: %s\ng1 type: %s\ng2 type: %s\ng3 type: %s", count, name1, name2,name3,type,g1,g2,g3);
                    }
        }
        printf("%s", string);

} 
```

输出：

```
2 record(s) found.

Name: name1, last1, last2 
Type: type2
g1 type: g4
g2 type: g6
g3 type: g7 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T02:20:04.383

首先，您需要用`strtok`. [在此处](http://www.cplusplus.com/reference/clibrary/cstring/strtok/)阅读文档。

获得所需的所有字段后，使用`snprintf`

```
#include <stdlib.h>
#include <stdio.h>
#include <string.h>

#define BUFFER_SIZE 1000

int main(){

    char tmp[BUFFER_SIZE];
    int count=0;
    char string[BUFFER_SIZE];
    char all_records[BUFFER_SIZE];
    char *name1, *name2, *name3, *type,*g1,*g2,*g3;

    FILE *fp=fopen("test.csv","r");
    while(fgets(tmp, BUFFER_SIZE,fp) != NULL){        
        name1 = strtok(tmp,",");
        name2 = strtok(NULL,",");
        name3 = strtok(NULL,",");
        type= strtok(NULL,",");
        g1= strtok(NULL,",");
        g2= strtok(NULL,",");
        g3= strtok(NULL,",");

        if (strstr(tmp, "name1")){
            count++;
    // snprintf is very similar to printf, see the reference [here][2]
            snprintf(string, BUFFER_SIZE,"\nName: %s, %s, %s \nType: %s\ng1 type: %s\ng2 type: %s\ng3 type: %s", name1, name2,name3,type,g1,g2,g3);
            strcat(all_records, string);              // combine new correct record
        }
    }
    snprintf(string, BUFFER_SIZE, "%d record(s) found.\n", count);
    strcat(string, all_records);   // add the number of records to the start
    // You can use the return value of snprintf to evaluate the size of all things you will print.
    printf("%s", string);
    return 0;
} 
```

# android - Android：将条件设置为列表视图的背景时出错

> ID：13079829
> 
> 赞同：0
> 
> 时间：2012-10-26T02:04:42.933
> 
> 标签：android, listview, background

我尝试在创建自定义列表视图时使用条件设置背景。

这是 listview 的适配器视图的示例代码：

```
 public lstViewAdapter(Activity a, ArrayList<HashMap<String, String>> d)
    {
       ......
       ......
       ......
    }

    public View getView(int position, View convertView, ViewGroup parent) 

    {

         View vi = convertView;
         if(position % 2 != 0)
         {
        if(convertView==null)
        {
            vi = inflater.inflate(R.layout.list_row,null);

        }
         }
         else
         {
        if(convertView==null)
        {
            vi = inflater.inflate(R.layout.list_row1,null);
        }
         }
         ....
         ....
         ....
     } 
```

![左：第一个午餐应用程序，右：上下滚动后](../Images/7ad2807e10e01a6afd62226f38164103.png)

它正常显示，但是当我上下滚动时...它随机变化...任何建议将不胜感激...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T02:10:44.437

希望你能在这里找到相关的东西。

[http://smartphonebysachin.blogspot.com/2012/03/custom-listview-with-separator-and.html](http://smartphonebysachin.blogspot.com/2012/03/custom-listview-with-separator-and.html)

在那里，您可以将图像替换为背景的 xml 视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T11:54:20.020

我不知道这是否好，但我通过删除covertView != null 的条件来修复它：

```
if(position % 2 != 0)
         {

            vi = inflater.inflate(R.layout.list_row,null);

         }
         else
         {

            vi = inflater.inflate(R.layout.list_row1,null);
      } 
```

# pyqt - QHBoxLayout 没有使用所有的空间

> ID：13079835
> 
> 赞同：0
> 
> 时间：2012-10-26T02:05:00.560
> 
> 标签：pyqt

每行都是一个 QHBoxLayout，我希望布局用完所有灰色空间，并且我希望第一个小部件使用所有空间。我怎样才能做到这一点？这是我目前的设置：

**布局：**

布局拉伸：1,0,0,0

layoutSizeConstraint: SetMaximumSize

**第一个元素具有以下内容：**

sizePolicy: [扩展, 首选, 5, 0]

这当前行为正确，当我最大化窗口时出现额外空间。

![我的布局截图](../Images/b833c8354abe63918331d10502643e39.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T23:07:15.810

看起来第一个小部件受`maximumWidth`. 将其保留为默认值 ( `16777215`)，以便它可以根据需要增长。

# java - Java 继承语法

> ID：13079836
> 
> 赞同：0
> 
> 时间：2012-10-26T02:05:11.497
> 
> 标签：java, inheritance

**要求**

假设现有类 ICalculator 的可用性，该类对整数算术计算器进行建模并包含：

*   存储计算器当前 int 值的实例变量 currentValue

*   方法 add、sub、mul 和 div

    ICalculator 中的每个方法都接收一个 int 参数并将其操作应用于 currentValue 并返回 currentValue 的新值。因此，如果 currentValue 的值为 8 并且 sub(6) 被调用，那么 currentValue 以值 2 结束，并返回 2。

因此，您将基于 ICalculator 编写子类 ICalculator1 的定义。ICalculator1 类有一个附加方法sign，它不接收任何参数，也不修改currentValue。相反，它只是返回 1、0 或 -1，具体取决于 currentValue 分别是正数、零还是负数。

**代码：**

```
1 public class ICalculator1 extends ICalculator {
2 public int getCurrentValue() {return currentValue;} //**did not need this line**
3 
4 int sign() {
5 if(currentValue > -1) return 0; //changed to**int val = add(0);**
6 else if(currentValue < 0) return -1; //changed to **if (val > 0) return 1;**
7 else return 1; //changed to **else if (val < 0) return -1;**
8 }} 
```

**错误信息：**

```
ICalculator1.java:2: error: currentValue has private access in ICalculator
public int getCurrentValue() {return currentValue;}
                                     ^
ICalculator1.java:5: error: currentValue has private access in ICalculator
if(currentValue > -1) return 0;
   ^
ICalculator1.java:6: error: currentValue has private access in ICalculator
else if(currentValue < 0) return -1;
        ^
3 errors 
```

不知道我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T02:12:48.253

所以它接缝`currentValue`是私有的，因此不能直接在您的子类中访问。由于您的方法实际上返回 的值`currentValue`，因此您可以在子类中利用它，例如：

```
public int sign() {
   int val = add(0);   // add 0 and return currentValue
   if (val > 0) return 1;
   else if (val < 0) return -1;
   else return 0;
} 
```

正如其他人所建议的那样，如果您可以修改 的可见性`currentValue`，使其受到保护，那么您将不需要该`add(0)`hack。但是，如果您无法修改`ICalculator`，这是一种可能性。

# php - 如何从 Android APP 调用 C2DM PHP 函数

> ID：13079840
> 
> 赞同：-1
> 
> 时间：2012-10-26T02:05:32.640
> 
> 标签：php, android, android-c2dm

我正在尝试向我的 Android 应用程序添加推送通知服务。我在应用程序中添加了必要的方法（接收器、清单更改等）

然后我继续按照这个（http://stackoverflow.com/questions/4121508/c2dm-implementation-php-code）将功能添加到我的第三方服务器以注册到 C2DM 并发送消息。

这听起来可能很愚蠢，但由于我对 PHP 不是很精通，有人可以告诉我如何调用 PHP 函数来从 Android 应用程序注册/发送消息。

在此先感谢您，我将感谢我收到的任何帮助。

射频

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T02:51:58.890

首先，C2DM 已死。[GCM](http://developer.android.com/guide/google/gcm/index.html)万岁！

其次，[这里有](http://labs.distriqt.com/post/1273)一个例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T20:55:35.340

谢谢323go。

GCM 很棒。真正易于实施和使用。对于需要帮助进行设置的任何人，这就是我使用的：

[Android GCM 实现](https://stackoverflow.com/questions/11438464/android-gcm-basic-implementation)

[PHP 服务器代码](http://labs.distriqt.com/post/1273/ "PHP 代码")

祝你好运

# xaml - 创建全屏 XAML 元素

> ID：13079841
> 
> 赞同：2
> 
> 时间：2012-10-26T02:05:43.847
> 
> 标签：xaml, windows-8, winrt-xaml

刚刚开始使用 Windows 8 SDK。

试图创建一个填满整个屏幕的文本框。不幸的是，在不同的分辨率下，TextBox 不会填满屏幕。

如何将 TextBox 的宽度和高度绑定到屏幕的宽度和高度？

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-27T04:25:52.393

不要在 xaml 中设置 TextBox 的宽度和高度。相反，将 Horizo​​ntalAlignment 和 VerticalAlignment 设置为 Stretch。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-26T02:13:26.630

我让它像这样正确绑定：

```
<Grid x:Name="MyGrid">
...
</Grid>
...
<TextBox x:Name="MainContent" Height="{Binding ActualHeight, ElementName=MyGrid}" HorizontalAlignment="Right" Width="{Binding ActualWidth, ElementName=MyGrid}" TextWrapping="Wrap" VerticalAlignment="Top" Foreground="#FF7A7A7A" FontSize="18.667"><TextBox> 
```

它将它绑定到布局中网格的大小。这通过将 TextBox 的 Height 和 Width 属性绑定到 Grid 的 ActualHeight 和 ActualWidth 值来实现。绑定的 ElementName 链接到网格的 x:Name 属性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T02:09:11.073

尝试绑定到[Window.Current.Bounds](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.window.bounds.aspx)。它具有高度、宽度、X 和 Y 以及其他属性。

# python - 一个线程安全的 memoize 装饰器

> ID：13079842
> 
> 赞同：4
> 
> 时间：2012-10-26T02:05:57.753
> 
> 标签：python, multithreading, decorator, memoization, gil

我正在尝试制作一个可与多个线程一起使用的 memoize 装饰器。

我知道我需要将缓存用作线程之间的共享对象，并获取/锁定共享对象。我当然要启动线程：

```
for i in range(5):
            thread = threading.Thread(target=self.worker, args=(self.call_queue,))
            thread.daemon = True
            thread.start() 
```

工人在哪里：

```
def worker(self, call):
    func, args, kwargs = call.get()
    self.returns.put(func(*args, **kwargs))
    call.task_done() 
```

当然，当我同时向多个线程发送一个装饰有 memo 函数（如[this ）的函数时，问题就开始了。](http://code.activestate.com/recipes/325905-memoize-decorator-with-timeout/)

如何将备忘录的缓存实现为线程之间的共享对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T05:03:00.573

最直接的方法是对整个缓存使用单个锁，并要求对缓存的任何写入首先获取锁。

在您发布的示例代码中，在第 31 行，您将获取锁并检查结果是否仍然丢失，在这种情况下，您将继续计算并缓存结果。像这样的东西：

```
lock = threading.Lock()
...
except KeyError:
    with lock:
        if key in self.cache:
            v = self.cache[key]
        else:
            v = self.cache[key] = f(*args,**kwargs),time.time() 
```

您发布的示例将每个函数的缓存存储在字典中，因此您还需要为每个函数存储一个锁。

但是，如果您在竞争激烈的环境中使用此代码，那么它的效率可能会低得令人无法接受，因为即使线程不计算相同的东西，它们也必须相互等待。您可以通过在缓存中为每个键存储一个锁来改进这一点。但是，您还需要全局锁定对锁存储的访问，否则在创建每个键锁时会出现竞争条件。

# java - 如何用 Guice 注入 SLF4J 绑定？

> ID：13079843
> 
> 赞同：4
> 
> 时间：2012-10-26T02:05:57.437
> 
> 标签：java, spring, dependency-injection, guice, slf4j

经过粗略的检查，似乎 SLF4J 和 Guice（嗯，任何 DI 框架，真的）是一种相互冲突的哲学。SLF4J 采用这种方法“*嘿，直到运行时我们才会知道要绑定到哪些类，这没关系。* ”另一方面，Guice 似乎在说“*嘿，我们需要在编译时知道究竟我们要绑定哪些类。* ”。

所以我问：是否可以使用 Guice/Spring/任何 DI 框架来配置/注入 SLF4J 绑定？

更重要的是，Java`ClassLoader`是在运行时使用适当的 Logger/LoggerFactory/etc 真正“注入”SLF4J。对象，所以我不知道如何注入这些 ClassLoaders 以便它们`org.slf4j.impl.Logger`在运行时返回我想要的：

我问是因为我喜欢 SLF4J 和针对 API 进行日志记录的好处，但也喜欢 DI 的好处。有没有办法使这项工作？提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T03:47:48.993

我相信这是不可能的（除非你做了一些非常麻烦的事情，比如为你的应用程序创建子类加载器的容器......类似的东西）

SLF4j 具有可替换实现的基本思想是让 binder lib 提供`org.slf4j.impl.StaticLoggerBinder`，SLF4J API 将通过类加载器查找这个类。因此，如果 classpath 中有超过 1 个 binder，则无法区分`org.slf4j.impl.StaticLoggerBinder`它们提供的 s。DI 框架不会对此有所帮助，因为 Logging 框架甚至在 DI 发生之前就已初始化。

除非 SLF4J 将来改变它的设计，否则我们无能为力。而且，我怀疑 SLF4J 是否有可能改变它的设计。因为我们无法告诉 DI 容器 Logging 初始化是每个人都依赖的东西。我相信还有更多的原因使它几乎不可能实现。

但是，我怀疑的是，这真的与 DI 有关吗？老实说，我没有看到通过将相应的 JAR 放在类路径中来控制使用哪个日志记录绑定的问题。如果你想在运行时控制它，以编程方式，我认为编写一个小容器来启动你的应用程序是要走的路。但是，它仍然与DI无关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T11:28:18.687

解决这个问题的一种相当简单的方法是通过该方法注入一个`ILoggerFactory`实例。（截至 2012 年 10 月，该方法不存在。） `LoggerFactory``setILoggerFactory()``setILoggerFactory()`

目前 SLF4J 实现的静态绑定机制除了设置`ILoggerFactory`. 这种方法对你有用吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-21T16:04:24.407

对于现在发现这一点的任何人：[Sangria](https://github.com/tavianator/sangria)实现了一个“上下文敏感的活页夹”，对此非常有效；`sangria-slf4j`具体见`sangria-contextual`。

从[作者的博客文章](https://tavianator.com/announcing-sangria/)中，您可以轻松地设置一个名为 logger factory 的 SLF4J：

```
public class YourModule extends AbstractModule {
    @Override
    protected void configure() {
        install(new SangriaSlf4jModule());
    }
} 
```

...并且还有一些示例说明如何将新提供程序用于您自己的类型。

# php - Mod_rewrite 删除索引并追加查询字符串

> ID：13079844
> 
> 赞同：0
> 
> 时间：2012-10-26T02:05:58.630
> 
> 标签：php, .htaccess, mod-rewrite

```
RewriteEngine On
RewriteBase /site1/

RewriteRule ^(?:/(.*))?$ index.php?product=$1 [QSA,L] 
```

我无法让这个 mod_rewrite 工作。每当我在索引上有附加的查询字符串时，我都会得到一个 404 url​​。我试图把这个：

[http://www.domain.com/site1/index.php?product=mug](http://www.domain.com/site1/index.php?product=mug)

进入这个：

[http://www.domain.com/site1/mug](http://www.domain.com/site1/mug)

# ruby-on-rails - Rails 使用 Twitter Bootstrap 导航栏登录（带设计）？

> ID：13079845
> 
> 赞同：2
> 
> 时间：2012-10-26T02:06:24.177
> 
> 标签：ruby-on-rails, ruby-on-rails-3, twitter-bootstrap, devise

我正在尝试将 Twitter 的 Bootstrap (http://twitter.github.com/bootstrap/index.html) 与 Ruby on Rails (v 3.2.8 与 Ruby 1.9.3) 一起使用。我正在使用设计进行身份验证。

Twitter 在他们的导航栏中有一个很好的登录表单。（见[http://twitter.github.com/bootstrap/examples/hero.html](http://twitter.github.com/bootstrap/examples/hero.html)？）

我将如何设置我的 Rails 应用程序以使用该登录名？我可以将 Rails 设置为从其自己的登录页面登录，但如何使用导航栏登录？控制器/模型结构是什么？

我在 github 上找到了这个，但它没有实现导航栏注册（https://github.com/RailsApps/rails3-bootstrap-devise-cancan/）。

谢谢

更新：

找到了答案： [https ://github.com/plataformatec/devise/wiki/How-To:-Display-a-custom-sign_in-form-anywhere-in-your-app](https://github.com/plataformatec/devise/wiki/How-To:-Display-a-custom-sign_in-form-anywhere-in-your-app)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T02:30:39.483

您可以简单地运行`rails g devise:views`和自定义表单以在 nabvar 中正确显示。`render 'devise/sessions/new'`你可以在你的任何布局中渲染它。更多细节请看[这里](https://github.com/plataformatec/devise/wiki/How-To%3a-Display-a-custom-sign_in-form-anywhere-in-your-app)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-26T02:29:28.190

示例中的代码在标记后有以下内容。

```
 <form class="navbar-form pull-right">
          <input class="span2" placeholder="Email" type="text">
          <input class="span2" placeholder="Password" type="password">
          <button type="submit" class="btn">Sign in</button>
        </form> 
```

我将使用此代码，但将表单的操作和输入名称更改为我的登录表单。

只需查看登录表单的源代码并更改必要的值。您还可以添加一些类似于下面的代码，这样如果他们已经通过身份验证，它就不会显示登录表单。

```
<% if not current_user %>
//login form
<% else %>
//welcome the user and provide logout option
<% end %> 
```

# mysql - 如何通过“小于等于”分组对查询结果进行分组？

> ID：13079846
> 
> 赞同：1
> 
> 时间：2012-10-26T02:06:24.840
> 
> 标签：mysql

我需要计算具有特定状态<=特定日期的所有项目。因此，如果我按“天”分组，那么必须计算直到那一天的所有“未清”项目。因此，对于接下来的“一天”，它将是一个累积总和，包括前一天的“未清”项目。

这是架构的示例：

![在此处输入图像描述](../Images/3ef96c68b3ce345b51344e598ffdfabe.png)

**查询**：特定日期有多少项目处于特定状态？

**预期输出：**

```
    天*| 状态 | 数数
    ---------------------
     1 | 开放| 3
     2 | 开放| 6 //3 今天和 3 从前一天
     2 | 也许| 1
     2 | 同意 | 2
     2 | 开放| 6 //没有什么新东西是“开放的”
     3 | 开放| 8 //2 新
     3 | 同意 | 4 //2 新

* 也可以是日期或其他格式。不是规则，只是为了说明

```

我很困惑如何制定这个。我确定您需要一个自我（内部）加入，但我不知道该做什么分组以及确切计算什么，因为它是一个累积和。我猜我需要一些临时变量等，但不确定如何在 MySQL 中执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T02:19:43.263

您可以尝试在 GROUP BY 之后使用 WITH ROLLUP。 [http://dev.mysql.com/doc/refman/5.0/en/group-by-modifiers.html](http://dev.mysql.com/doc/refman/5.0/en/group-by-modifiers.html)

# php - #1093 - 您不能在 FROM 子句中指定目标表 'windUpdates' 进行更新

> ID：13079849
> 
> 赞同：2
> 
> 时间：2012-10-26T02:07:00.940
> 
> 标签：php, mysql, sql

我正在尝试删除最低的 60 行，但它不起作用。我在stackoverflow中尝试了其他一些帖子，但没有一个对我有用。

```
DELETE FROM windUpdates 
WHERE INDEX <= ( 
                  ( SELECT MAX(  INDEX )  FROM windUpdates )  - 60
               ) 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T02:09:03.927

您需要为子查询的结果创建临时表，

```
DELETE FROM tablename
WHERE `Index` NOT IN
(
  SELECT `Index`
  FROM
    (
      SELECT `Index`
      FROM tablename
      ORDER BY `Index` DESC
      LIMIT 60
    ) x
) 
```

**PS：一定要先备份你的数据库。**

# objective-c - 防止其他窗口在 Cocoa 中接收焦点

> ID：13079851
> 
> 赞同：1
> 
> 时间：2012-10-26T02:07:34.783
> 
> 标签：objective-c, macos, cocoa

如何防止我的应用程序中的其他窗口接收焦点？我想将加载窗口放在前面并让它做它的事情，但我不希望用户能够与应用程序中的其他窗口进行交互。

我可以简单地隐藏应用程序中的其他窗口，但是让用户的窗口突然消失感觉有点刺耳。同时，我不能让用户在加载期间继续与其他窗口交互，因为加载将更新每个窗口上的数据（会出现同步问题）。我可以添加额外的锁定机制，但如果它像强制单个窗口保持在顶部并保持焦点一样简单，我宁愿不这样做。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T02:15:15.697

查看模态窗口。

[https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/WinPanel/Concepts/UsingModalWindows.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/WinPanel/Concepts/UsingModalWindows.html)

> 您可以使整个窗口或面板以应用程序模式的方式运行，使用应用程序的正常事件循环机制，但限制对模式窗口或面板的输入。模态操作对于需要用户注意才能进行操作的窗口和面板很有用。示例包括错误消息和警告，以及需要输入的操作，例如打开的对话框或适用于多个窗口的对话框。

# python - 如何在 Pandas 中将两个 DataFrame 堆叠在一起？

> ID：13079852
> 
> 赞同：7
> 
> 时间：2012-10-26T02:08:13.887
> 
> 标签：python, pandas

我在 DataFrames 中有两组股票数据：

```
> GOOG.head()
           Open   High    Low 
Date                                                                            
2011-01-03  21.01  21.05  20.78 
2011-01-04  21.12  21.20  21.05 
2011-01-05  21.19  21.21  20.90 
2011-01-06  20.67  20.82  20.55 
2011-01-07  20.71  20.77  20.27

AAPL.head()
              Open    High     Low
Date                              
2011-01-03  596.48  605.59  596.48
2011-01-04  605.62  606.18  600.12
2011-01-05  600.07  610.33  600.05
2011-01-06  610.68  618.43  610.05
2011-01-07  615.91  618.25  610.13 
```

我想将它们彼此堆叠在一个 DataFrame 中，以便我可以访问和比较股票（GOOG 与 AAPL）中的列（例如高）？在 Pandas 中执行此操作并访问后续列（例如 GOOG 的 High 列和 AAPL 的 High 列）的最佳方法是什么。谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-26T06:43:54.717

pd.concat 也是一个选项

```
In [17]: pd.concat([GOOG, AAPL], keys=['GOOG', 'AAPL'], axis=1)
Out[17]:
             GOOG                  AAPL
             Open   High    Low    Open    High     Low
Date
2011-01-03  21.01  21.05  20.78  596.48  605.59  596.48
2011-01-04  21.12  21.20  21.05  605.62  606.18  600.12
2011-01-05  21.19  21.21  20.90  600.07  610.33  600.05
2011-01-06  20.67  20.82  20.55  610.68  618.43  610.05
2011-01-07  20.71  20.77  20.27  615.91  618.25  610.13 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-26T02:21:48.833

查看数据框的`join`方法，使用`lsuffix`和`rsuffix`属性为连接的列创建新名称。它是这样工作的：

```
>>> x
          A         B         C
0  0.838119 -1.116730  0.167998
1 -1.143761  0.051970  0.216113
2 -0.614441  0.208978 -0.630988
3  0.114902 -0.248791 -0.503172
4  0.836523 -0.802074  1.478333
>>> y
          A         B         C
0 -0.455859 -0.488645 -1.618088
1 -2.295255  0.524681  1.021320
2 -0.484612  1.101463 -0.081476
3 -0.475076  0.915797 -0.998777
4 -0.847538  0.057044  1.053533
>>> x.join(y, lsuffix="_x", rsuffix="_y")
        A_x       B_x       C_x       A_y       B_y       C_y
0  0.838119 -1.116730  0.167998 -0.455859 -0.488645 -1.618088
1 -1.143761  0.051970  0.216113 -2.295255  0.524681  1.021320
2 -0.614441  0.208978 -0.630988 -0.484612  1.101463 -0.081476
3  0.114902 -0.248791 -0.503172 -0.475076  0.915797 -0.998777
4  0.836523 -0.802074  1.478333 -0.847538  0.057044  1.053533 
```

# css - Modx Evo：无法在电视中设置表格样式

> ID：13079856
> 
> 赞同：0
> 
> 时间：2012-10-26T02:08:34.880
> 
> 标签：css, content-management-system, modx, modx-evolution

想知道是否有人知道解决此问题的方法：我有一台 RichText 电视，里面有一张桌子。但是，我的外部 CSS 不会影响它。

我使用了非常具体的指针，甚至给了表格一个 id，但我所做的一切似乎都没有改变风格。然而，内联 CSS 确实有效。

有人知道为什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T23:42:58.650

我可以看到也可能存在一些 CSS 问题。例如，为您正在使用的表格行设置样式：

```
.slideritem .slidertable tr 
```

但你应该改用：

```
.slideritem .slidertable tr td 
```

仔细检查你的css，样式应该没问题

# php - 使用 jquery 加载事件填充下拉列表

> ID：13079857
> 
> 赞同：0
> 
> 时间：2012-10-26T02:08:42.940
> 
> 标签：php, javascript, mysql

我想从 mysql 表中填充下拉值。我在 html 页面中使用了加载事件，但我不知道这段代码不起作用。

**网页**

```
<!DOCTYPE html>
    <html>
    <head>
    <script src="jquery.js"></script>
    <script>
    $(document).ready(function(){
      $("button").click(function(){
        $("#select1").load("se2.php");
      });
    });
    </script>
    </head>
    <body>

    <select id="select1"></select>
    <button>Get External Content</button>

    </body>
    </html> 
```

**se2.php**

```
 <?php
    $dbhandle = mysql_connect("localhost","root","") 
     or die("Unable to connect to MySQL");
    $selected = mysql_select_db("student",$dbhandle) 
      or die("Could not select examples");
    $result1 = mysql_query("SELECT column1 FROM information");
     while($row=mysql_fetch_array($result1))
    {
   if($row['column1']!=NULL)
    {
    echo "<option value='$row[column1]'>$row[column1]</option>";
    }
    }
    ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T05:12:31.477

如果你想在前端使用*jquery*做逻辑，你可以按照这个例子：

[jQuery：填充下拉列表的最佳实践？](https://stackoverflow.com/questions/815103/jquery-best-practice-to-populate-drop-down)

这样，您可以使用返回 php 数组，`json_encode()`并在 jquery 函数中将其作为对象访问，就像上面的示例一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T02:18:28.910

改变这个

```
 <select id="select1"></select> 
```

对此

```
<div id="select1"></div> 
```

并将选择标签添加到 php

```
 $result1 = mysql_query("SELECT column1 FROM information");
echo "<select>";
     while($row=mysql_fetch_array($result1))
    {
   if($row['column1']!=NULL)
    {
    echo "<option value='$row[column1]'>$row[column1]</option>";
    }
    }
echo "</select>"; 
```

并给按钮一个id

```
<button id="button">Get External Content</button> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T02:20:31.483

而`HTML`不是包括`<select>`尝试这个，

```
<div id="select1"></div> 
```

在`php`尝试这个，

```
echo "<select>";
while($row=mysql_fetch_array($result1))
{
   if($row['column1']!=NULL)
   {
     echo "<option value='$row[column1]'>$row[column1]</option>";
   }
}
echo "</select>"; 
```

# java - 抛出自定义 Java 异常

> ID：13079858
> 
> 赞同：2
> 
> 时间：2012-10-26T02:08:46.717
> 
> 标签：java, exception, data-structures, linked-list

我正在为 Java 数据结构类做作业，我们必须使用链表实现从堆栈 ADT 构建一个程序。教授要求我们包含一个名为 popTop() 的方法，该方法弹出堆栈的顶部元素，如果堆栈为空，则抛出“StackUnderflowException”。据我所知，这是一个我们必须自己编写的异常类，我遇到了一些问题。如果有人可以帮助我，我将非常感激。这是我的一些代码：

```
private class StackUnderflowException extends RuntimeException {

    public StackUnderflowException() {
        super("Cannot pop the top, stack is empty");
    }
    public StackUnderflowException(String message) {
        super(message);
    }
} 
```

那是我写的异常类，这里是我迄今为止写的 popTop() 方法的开始：

```
public T popTop() throws StackUnderflowException {
    if (sz <= 0) {
        throw new StackUnderflowException();
    }
} 
```

我收到错误提示 StackUnderflowException 不能是 RuntimeException 的子类，有人可以对此有所了解吗？在方法中，我收到错误说 StackUnderflowException 未定义。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T02:19:35.557

你的构造函数是私有的，你应该扩展`Exception`，而不是`RuntimeException`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T07:16:20.640

您的代码有 2 个问题 1.您的自定义 Exception 类是私有的 2.它扩展了运行时异常，它应该在超类 Exception 中进行扩展

您可以创建自定义异常，如下所示：

公共类 StackUnderflowException 扩展异常{

```
private static final long serialVersionUID = 1L;

/**
 * Default constructor.
 */
public StackUnderflowException(){

}
/**
 * The constructor wraps the exception thrown in a method.
 * @param e the exception instance.
 */
public StackUnderflowException( Throwable e) 
{
    super(e);
}
/**
 * The constructor wraps the exception and the message thrown in a method.
 * @param msg the exception instance.
 * @param e the exception message.
 */
public StackUnderflowException(String msg, Throwable e) 
{
    super(msg, e);

}

/**
 * The constructor initializes the exception message.
 * @param msg the exception message 
 */
public StackUnderflowException(String msg) 
{
    super(msg);
} 
```

# java - GridFS 将文件转换为 IO 文件

> ID：13079859
> 
> 赞同：0
> 
> 时间：2012-10-26T02:08:47.490
> 
> 标签：java, http, io, gridfs

我有一个 java web 应用程序，它在某些时候会渲染带有很多图片的页面。这些图片是作为 html img 标签插入到 jsp 中的。用户可以在浏览器中看到这些。

图片的数量正在增长，我正在考虑将它们移动到 gridfs 中。

我的问题：有什么方法可以选择文件并在网页中将其呈现给客户端，而无需将其写入硬盘驱动器？

我不得不提一下，对于包含 img 链接的各种页面，有很多并发的 http 请求。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T21:58:04.440

找到了答案。我可以在浏览器中看到图像，因此使用 a 作为超链接

```
@RequestMapping (value = "/test", method = RequestMethod.GET, produces = MediaType.IMAGE_JPEG_VALUE)
@ResponseBody
public byte[] test(HttpServletRequest request) {
    //curl -v http://localhost:8080/Bikeshop/admin/test > /dev/null
    String realPath = request.getSession().getServletContext().getRealPath("/resources/images/catalog/sample.jpg");

    try {
        InputStream is = new FileInputStream(realPath);
        BufferedImage img = ImageIO.read(is);
        ByteArrayOutputStream bos = new ByteArrayOutputStream();
        ImageIO.write(img, "jpg", bos);
        return bos.toByteArray();
    } catch (FileNotFoundException e) {
        e.printStackTrace();  //To change body of catch statement use File | Settings | File Templates.
    } catch (IOException e) {
        e.printStackTrace();  //To change body of catch statement use File | Settings | File Templates.
    }

    return null;
} 
```

# javascript - Javascript Timeout 对象到底是什么？

> ID：13079869
> 
> 赞同：1
> 
> 时间：2012-10-26T02:11:01.250
> 
> 标签：javascript, settimeout, dom-events

这是一些示例代码的链接。

[http://jsfiddle.net/4djNt/2/](http://jsfiddle.net/4djNt/2/)

在我开始测试之前，我假设 a 的返回值`setTimeout()`是某种浏览器对象。

事实上，它似乎是一个简单的整数。我还相信将返回值`setTimeout`赋给一个全局变量意味着只能有一个这样的对象。但正如您将看到的，如果您多次单击“启动计时器”按钮，则可能有多个计时器同时运行。

例如

*   我点击开始按钮
*   该脚本创建一个超时
*   是`timeout 1`，由于五秒内着火
*   一秒钟后，我再次点击，现在有一个`timeout 2`
*   现在我要在四秒和五秒内`timeout 1`开火`timeout 2`
*   我点击停止按钮，只有`timeout 2`被清除

用户点击创建多个计时器的问题可以通过在设置之前始终清除当前超时变量来解决。但我真的很想了解 Javascript 在这里实际做了什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T02:15:58.333

[`setTimeout`](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout)并[`setInterval`](https://developer.mozilla.org/en-US/docs/DOM/window.setInterval)返回一个数字。编号是`id`计时器的编号。可以分别使用[`clearTimeout`](https://developer.mozilla.org/en-US/docs/DOM/window.clearTimeout)和停止活动定时器[`clearInterval`](https://developer.mozilla.org/en-US/docs/DOM/window.clearInterval)。

如果您丢失了计时器的 ID，您要么必须再次猜测它，要么等待它完成（假设它是超时）。

如果定时器在参数指定的毫秒数内没有被取消`delay`，它将在全局上下文中执行回调函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T02:14:53.200

的返回值`setTimeout`可以传递给以`clearTimeout`防止计划任务运行。如果已设置变量并且再次按下按钮，`clearTimeout`请先运行，然后`setTimeout`假设您只希望安排第二次按下。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-12T18:18:36.197

提问者只询问**超时对象**，例如，在某些环境中，这些对象会代替数字返回[`timeoutObject`](https://nodejs.org/api/timers.html#timers_settimeout_callback_delay_arg)。为了取消回调，将整个超时对象传递给`clearTimeout(toObj)`就可以了。

```
{
  called : bool
  _idleTimeout : null
  _idlePrev : null
  _idleNext : null
  _idleStart : null
  _onTimeout : function (){}
  _repeat : null
  unref : function () {}
  ref : function () {}
  close : function () {}
} 
```

# sql - 在不同数据库的表之间添加外键约束

> ID：13079872
> 
> 赞同：1
> 
> 时间：2012-10-26T02:11:16.710
> 
> 标签：sql, sql-server, foreign-keys

> **可能重复：**
> [在两个数据库之间添加外键关系](https://stackoverflow.com/questions/4452132/add-foreign-key-relationship-between-two-databases)

我所知道的是，我可以添加一个外键约束，以便表 A 中的一列可以引用表 B 中的另一列：

```
CONSTRAINT fk FOREIGN KEY (column) REFERENCES toTable(toColumn) 
```

但这里两个表都在同一个数据库中。我想知道我是否可以引用另一个数据库中的表。例如，我有两个数据库：databaseA 和 databaseB，当我想关联它们时，我更喜欢在 databaseA 中添加一些表对 databaseB 中另一个表的引用。但我不知道怎么做。就像是 ：

```
CONSTRAINT fk FOREIGN KEY (column) REFERENCES [databaseB].[toTable](toColumn) 
```

不起作用。

# coffeescript - 使用对象作为参数在流星中查找没有结果

> ID：13079878
> 
> 赞同：0
> 
> 时间：2012-10-26T02:12:53.283
> 
> 标签：coffeescript, meteor

我得到以下代码：

```
Clientes = new Meteor.Collection 'clientes'

 Template.listaClientes.clientes = ->   
 query = {}
 query = Session.get "searchData"
 console.log "get: " + query.nombre  
 clientes = Clientes.find(query) 

 Template.listaClientes.events
  'click .listItem' : ->
     console.log "item clicked"

 Template.searchPane.events
 'click #btnToList' : ->
     query = {}
     #asigna los campos a query si no son blancos
     if (x = $("#qNombre").val())? then query.nombre = x
     if (x = $("#qCiudad").val())? then query.ciudad = x
     console.log "q: " + query.nombre + query.ciudad    

     Session.set "searchData", query 
```

它在启动时运行完美，查询是 {}，因此模板显示集合中的每个文档。当我单击 #btnToList 时，我没有从 Find clausule 中得到任何结果。如果我从浏览器控制台手动将“searchData”设置为 {}，它会触发触发器并再次绘制所有文档。

关于我所缺少的任何想法？

编辑：执行以下操作很好，这让我想知道发生了什么更多：/

```
 q={}
  q.nombre = query.nombre if query.nombre?
  Clientes.find q 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T13:49:07.880

好吧，看起来第二个 IF (#qCiudad) 总是在添加一个值，即使是空的。将检查更改为 if (x = $("#qCiudad).val()) != "" then ... 成功并且查询对象被正确传递。

# linux - 用另一个文件中的值替换文件中的字符串

> ID：13079883
> 
> 赞同：1
> 
> 时间：2012-10-26T02:13:42.283
> 
> 标签：linux, shell, unix, sed, awk

我有两个文件。其中一个定义了一组数值对，如下所示（**fileA**）：

```
 1  asm
 2  assert
 3  bio
 4  bootasm
 5  bootmain
 6  buf
 7  cat
 8  console
 9  defs
10  echo 
```

另一个文件包含一堆值对，如下（**fileB**）：

```
bio types
bio defs
bio param
bio spinlock
bio buf
bootasm asm
bootasm memlayout
bootasm mmu
bootmain types
bootmain elf
bootmain x86
bootmain memlayout
cat types
cat stat
cat user 
```

我想编写一个脚本，用文件 A 中的相应数字替换文件 B 上的值。它是生成新文件还是更改现有文件 B 都没有关系。

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T02:18:44.443

```
awk 'NR==FNR{a[$2]=$1;next}{$1=a[$1];}1' fileA fileB 
```

NR==FNR{a[$2]=$1;next} => 处理文件 A 时为真。形成一个关联数组，其中索引是第 2 列，第 1 列作为其值。

{$1=a[$1];} => 处理第二个文件时，将第一列替换为存储在数组中的适当值。

1 => 打印每一行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T04:53:26.560

这可能对您有用（GNU sed）：

```
sed 's|^\s*\(\S*\)\s*\(.*\)$|/^\2\\>/s//\1/|' fileA | sed -f - fileB 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-14T09:58:14.137

请注意，如果您在 fileB 第一列中有未定义的字符串，@Guru 的解决方案将不起作用，例如：

文件B

```
...
name user
name system 
```

将输出：

```
...
 user
 system 
```

在这种情况下，字符串“name”将被截断。如果所有行都匹配，则可以正常工作。

# c++ - 没有包含在其他命名空间中找不到对象，其他文件相同

> ID：13079884
> 
> 赞同：0
> 
> 时间：2012-10-26T02:13:50.113
> 
> 标签：c++, include, llvm, objective-c++

我有两个功能相同的头文件，其中一个会无缘无故地产生错误。我在创建新的（损坏的）文件时一定做错了什么，但我不知道是什么。

我的 IDE 是 Xcode。该项目是使用 Apple LLVM Compiler 4.1 为 Objective C++ 编译的，但有问题的代码部分都是纯 C++，没有 Objective C。

这是一些代码：

# 命名空间A.Common.h

```
#include "../NamespaceB/Common.h"

#include "WorkingClass.h"
#include "BrokenClass.h"

... 
```

# ../命名空间B/Common.h

```
#ifndef NamespaceBCommon
#define NamespaceBCommon

namespace NamespaceB
{
    ...
}

...
#include "Superclass.h"
... 
```

# 工作类.h

```
#ifndef NamespaceA_WorkingClass
#define NamespaceA_WorkingClass

namespace NamespaceA
{
    class WorkingClass : public NamespaceB::Superclass
    {
    public:

        WorkingClass();
        ~WorkingClass();
    };
}

#endif 
```

# 破碎类.h

```
#ifndef NamespaceA_BrokenClass
#define NamespaceA_BrokenClass

// If I don't have this line I get errors. Why??                   !!!!!
// This file is exactly identical to WorkingClass.h 
// as far as I can tell!
//#include NamespaceA.Common.h

namespace NamespaceA
{            
    // Parse Issue: Expected class name                            !!!!!
    // Semantic Issue: Use of undeclared identifier 'NamespaceB'
    class BrokenClass : public NamespaceB::Superclass
    {
    public:

        BrokenClass();
        ~BrokenClass();
    };
}

#endif 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T02:23:08.073

您需要包含所有包含您在代码中引用的命名空间和类的文件。因此，因为您在 中引用`NamespaceB::Superclass`，所以`BrokenClass.h`您需要确保包含声明它的文件。在这种情况下，包含`NamespaceA.Common.h`（希望）解决了这个问题，因为它包含了包含的文件`NamespaceB`。

至于为什么您不必包含`NamespaceA.Common.h`在您的 WorkingClass.h 中，我怀疑这是因为您恰好`../NamespaceB/Common.h`包含在其他地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T02:41:04.510

我发现了问题。`WorkingClass.cpp`是包含`NamespaceA.Common.h`和不包含自己的头文件，而不是在头中包含公共文件，然后在cpp中包含自己的头文件。

我设法错过了`#include`，`WorkingClass.cpp`因为我只是假设它只是包括`WorkingClass.h`而不是`NamespaceA.Common.h`。

简而言之：

# 工作类.h

```
// Class goes here
// No includes 
```

# 工作类.cpp

```
// Notice it does not include WorkingClass.h for whatever reason
#include "NamespaceA.Common.h" 
```

# 命名空间A.Common.h

```
#include "../NamespaceB/Common.h"

#include "WorkingClass.h"
#include "BrokenClass.h"
#include "EveryOtherClass.h" ... 
```

# 破碎类.h

```
// Class goes here
// No includes 
```

# 破碎类.cpp

```
#include "BrokenClass.h"
// Oh no! Where's NamespaceA.Common.h? 
```

我不是这个包含方案的忠实拥护者，但我会接受它，因为它是一个大型项目，我不想对其进行彻底的改变。

# javascript - 如何使用 require.js 管理 Django 项目中的 JavaScript 依赖项？

> ID：13079886
> 
> 赞同：3
> 
> 时间：2012-10-26T02:14:23.187
> 
> 标签：javascript, django, requirejs, django-staticfiles, r.js

我使用[RequireJS](http://requirejs.org/)来管理我的 JavaScript 库和模块之间的依赖关系。后端是用 Django 编写的。Django 有许多[用于管理静态资产的应用程序](http://www.djangopackages.com/grids/g/asset-managers/)，但没有一个提到合并[r.js 编译器](https://github.com/jrburke/r.js)。

**在 Django 中使用 r.js 管理和编译我的 JS 文件的最佳方法是什么？**

我的要求是：

1.  版本化的输出文件可在文件更新时绕过缓存。
2.  `DEBUG = True`在`settings.py`Django中自动使用未编译的 JS 文件，在`Debug = False`.
3.  一些库将从 CDN（如 jquery）加载，并带有本地回退。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-29T12:06:45.170

似乎 django-require 至少涵盖了您需要的一些内容， [https://github.com/etianen/django-require](https://github.com/etianen/django-require)。

# ruby-on-rails - 首次捆绑安装，堆栈级别太深

> ID：13079890
> 
> 赞同：14
> 
> 时间：2012-10-26T02:14:53.570
> 
> 标签：ruby-on-rails, gem, stack, bundle, bundler

我使用命令创建了一个全新的 rails 项目 `rails new qbc --database=mysql`。它可以完美地创建所有文件，但是在捆绑安装时会出错

```
$捆绑安装
从 https://rubygems.org/ 获取 gem 元数据............
从 https://rubygems.org/.. 获取 gem 元数据
不幸的是，发生了致命错误。请参阅捆绑器
http://bit.ly/bundler-issues 上的故障排除文档。谢谢！
/usr/bin/bundle:23: 堆栈级别太深 (SystemStackError)

```

[`gist.github.com/3956513`](http://gist.github.com/3956513)

我已经搜索并搜索了此问题的解决方案，但似乎找不到其他经历过它的人。我正在 Cygwin 上开发，如果这与它有关，我不会感到惊讶。

我尝试在一个空目录中创建一个仅包含源和一个 gem 的 Gemfile，并且 bundle install 仍然给出相同的错误。我遵循了所有的故障排除步骤，重新安装了 Cygwin 和所有软件包，一切。一直吸引我眼球的是`Fetching gem metadata`两次......捆绑器是否有可能陷入某种循环？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-09T19:11:22.097

Cygwin 的 pthread_attr_getstack 默认报告大约 90k。我认为 Cygwin 报告的是提交的**（**迄今为止使用的）堆栈大小，而不是**保留**的（总可用）大小。然后 Ruby 将其（即 90k）视为有史以来的最大堆栈大小。

要更改初始**提交**的堆栈大小：

```
peflags -X409600 `which ruby` 
```

*注意大写的-X。小写 -x 更改保留的堆栈大小，而不是最初提交的堆栈空间。*

这为我解决了所有 Ruby+Rails+Cygwin 问题。

我不太了解 Ruby 或 Cygwin 的内部结构，无法知道哪个是正确的修复方法，但它可能就是其中之一。

*   Cygwin 从 pthread_attr_getstack 报告*保留*的堆栈大小。
*   Ruby 添加了一个构建步骤来运行上面的 peflags 命令。
*   Ruby 以不同的方式确定可用堆栈空间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T03:13:40.923

不幸的是，我认为这个答案可能没有帮助，因为它没有任何意义，但我通过以下方式解决了它：

```
$ gem install rake
$ gem install bundler

$ bundle install 
```

它在那个时候工作而没有遇到同样的错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T04:18:54.530

Windows 二进制文件在可执行标头中编码首选堆栈大小。Cygwin 二进制文件默认为大约 2M。

你可以改变这个：

```
peflags -x8192000 `which ruby` 
```

并重新运行“捆绑安装”。一段时间以来，它一直以这种方式为我工作。

# perl - Perl - 如何将更改写入文件而不是仅查看控制台输出

> ID：13079893
> 
> 赞同：1
> 
> 时间：2012-10-26T02:15:07.053
> 
> 标签：perl

我在 SO 上找到了这个命令，这正是我想知道的，但我只看到控制台输出。我需要命令来重写它正在处理的文件（file.txt）。此命令获取文件中大于 400 的每个数字（嗯，正整数）并将其加 13。

```
perl -pe 's/\d+/$& > 400 ? $&+13 : $&/ge' file.txt 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T02:21:33.757

添加选项 -i 用于就地编辑：

```
perl -i -pe 's/\d+/$& > 400 ? $&+13 : $&/ge' file.txt 
```

# c++ - 文件 i/o 无限循环 c++ eof

> ID：13079900
> 
> 赞同：0
> 
> 时间：2012-10-26T02:16:15.807
> 
> 标签：c++, debugging, file-io, console-application

我已经开始研究一个程序，在我的一生中，我找不到一个不断搜索 eof 并且没有结束的错误。这肯定是我的 fileread 和 widthcount 函数的问题，而且它们很可能有相同的错误。有解决办法吗？它只是不断循环。

文件输入是这个

```
12.43 62.38 Los Angeles
21 59 Columbus, Ohio
0 15.58 Green Bay, Wisconsin 
```

这将持续另外 10 行。

```
#include <iostream>
#include <fstream>
#include <cstdlib>
#include <iomanip>
using namespace std;

void fileread(ifstream &ifFile, char newline, double &temp1, double &temp2, string city);
void widthcount(ifstream &ifFile, int &maxCount, char newline);

int main() {
   double temp1, temp2, minTemp, maxTemp;
   int maxCount;
   char newline=' ';
   string FileRead, city;
   ifstream ifFile;

   cout << "Please enter the location of the input file: ";
   cin >> FileRead;

   ifFile.open(FileRead.c_str());

   if (ifFile.fail()) {
       perror(FileRead.c_str());
       exit(1);
   }

   widthcount(ifFile, maxCount, newline);

   while(!ifFile.eof()) {
       widthcount(ifFile, maxCount, newline);
   }      

   ifFile.close();

   ifFile.open(FileRead.c_str());

   fileread(ifFile, newline, temp1, temp2, city);

   while(!ifFile.eof()) {
       fileread(ifFile, newline, temp1, temp2, city);

       cout << left << setw(20) << city
             << right << setw(6) << fixed << setprecision(2) << temp1
             << right << setw(6) << fixed << setprecision(2) << temp2 << endl;

   }

}

void fileread(ifstream &ifFile, char newline, double &temp1, double &temp2, string city) {
   int charcount = 0;

   ifFile >> temp1 >> temp2;

   while (newline == ' ')
       ifFile.get(newline);
   while (newline != '\n' || !ifFile.eof()) {
       charcount++;
       ifFile.get(newline);
   }
}

void widthcount (ifstream &ifFile, int &maxCount, char newline) {
   double temp1, temp2;
   int charcount = 0;
   ifFile >> temp1 >> temp2;
   ifFile.get(newline);
   while (newline != '\n' && !ifFile.eof()) {
       charcount++;
       ifFile.get(newline);
       cout << newline;
   }

   if (charcount > maxCount)
    maxCount = charcount;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T02:30:33.917

您需要检查失败（测试`.fail()`），而不是文件结尾。

通常`.fail()`通过直接使用流对象作为条件进行检查。

例如`while( f )`等价于`while( !f.fail() )`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T03:56:30.567

你应该尝试类似的东西

```
double t1,t2;
string s1,s2;

ifstream ifs;
ifs.open(Filename.c_str());

ifs>>t1>>t2>>s1>>s2;

while(ifs)
{
.......
do the calculations
.......
ifs>>t1>>t2>>s1>>s2;
} 
```

这适用于所有情况。如果在第一次读取后`ifs`进入失败状态，则将跳过文件读取的其余部分并`while`执行循环之后的行。否则，将在循环中读取其余行。您可以根据是否要读取字符串、字符或行来更改您的要求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T02:43:35.803

专门检查`eof()`几乎总是一个错误 - 例如，如果您在到达文件末尾之前遇到其他错误，`eof`将保持为假，但读取将失败（但由于`eof`仍然为假，您的循环将继续尝试读取并失败， 永远）。

就个人而言，我会以完全不同的方式构建代码。我首先创建一个结构来表示文件中的一个“记录”：

```
struct city {
    double temp1, temp2; // horrible names, but I don't know what they represent.
    std::string name;
}; 
```

然后我会重载`operator>>`从流中提取一个城市的数据，并`operator<<`显示一个城市的数据：

```
std::istream &operator>>(std::istream &is, city &c) { 
    is >> c.temp1 >> c.temp2;
    std::getline(is, c.name);
    return is;
}

std::ostream &operator<<(std::ostream &os, city const &c) { 
    return cout << left << setw(20) << c.name
                << right << setw(6) << fixed << setprecision(2) << c.temp1
                << right << setw(6) << fixed << setprecision(2) << c.temp2;
} 
```

然后我会使用它们按照上帝的意图（使用算法）读取和写入数据：

```
int main(int argc, char **argv) {

    // For the moment, cheat and take the file name from the command line
    std::ifstream ifFile(argv[1]);

    std::copy(std::istream_iterator<city>(ifFile),
              std::istream_iterator<city>(),
              std::ostream_iterator<city>(std::cout, "\n"));
    return 0;
} 
```

顺便说一句，我会注意到，尽管您*调用* `widthcount`，但您似乎从未使用过它的任何结果。至少目前，我已经跳过了类似的操作，因为它不会影响结果。

# python - 如何将持久对象的基本类型属性排除在持久对象之外？

> ID：13079904
> 
> 赞同：1
> 
> 时间：2012-10-26T02:17:02.040
> 
> 标签：python, persistent, zodb

例如，如果类型是对象的 int 或 str 属性，您将如何将其排除在对象的类中。是不是必须在属性之前声明一个装饰器，那是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T02:30:35.360

[持久规则：](http://docs.zope.org/zope2/zdgbook/ZODBPersistentComponents.html#persistent-rules)

> *   您的对象及其属性必须是“可腌制的”。
> *   您的对象不能有任何以“<em>p”开头的属性。
> *   **以开头的对象属性`_v_`是“易失的”，不会保存到数据库中**（请参阅下一节）。
> *   您必须明确表示对可变属性（例如实例、列表和字典）所做的任何更改或使用可变对象的持久版本，例如
>     “ZODB.PersistentMapping”</li>
> 
> 第三条规则是所有以`_v_`“易失性”开头的对象属性都不会保存到数据库中。这意味着只要持久对象在 Zope 内存缓存中，就可以使用 volatile 属性。当对象被停用（从内存中删除）时，易失性属性被丢弃。
> 
> 易失性属性对于适合缓存一段时间但通常可以丢弃并轻松重新创建的数据很有用。文件连接、缓存计算、渲染模板，所有这些都是 volatile 属性的有用应用。使用 volatile 属性时必须小心。由于您几乎无法控制对象何时移入和移出内存，因此您永远不知道易失性属性何时会消失。

# php - 如何注销而不留下 SESSION cookie 的痕迹？

> ID：13079907
> 
> 赞同：0
> 
> 时间：2012-10-26T02:17:47.333
> 
> 标签：php, session

我正在使用以下代码取消登录用户：

```
<?
   session_start();
   session_destroy();
?> 
```

但是这样做会在浏览器中留下一个 PHPSESSID cookie。这是什么？有没有办法确保根本没有它的痕迹？

我也试过：

```
session_start();
session_unset();
session_destroy();
session_write_close();
setcookie(session_name(),'',0,'/');
session_regenerate_id(true); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T02:41:22.730

在您的清算呼叫中使用`session_unset()`之前呼叫可能是问题所在。它会删除您的所有会话变量，让您的 setcookie 调用对错误的或没有的 cookie 进行操作。`session_name()``setcookie()`

# centos - Flash Player 和 Xvfb：应用程序因未处理的 SIGSEGV 而崩溃

> ID：13079915
> 
> 赞同：1
> 
> 时间：2012-10-26T02:18:46.307
> 
> 标签：centos, flash, xvfb

我正在使用 Xvfb 获取 Flash 内容的屏幕截图，但是当我使用 Xvfb 执行此操作时，在 Xvfb 中启动 Flash 后，立即输出错误“Application crashed with an unhandled SIGSEGV”。

有任何想法吗？

当我在 Xvfb 之外运行 flash 时，它不会给出任何异常错误（它抱怨没有显示）。

我正在使用 CentOS。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T20:22:14.703

我发现了问题。

它与一些依赖关系有关。请注意，它需要 32 位的。

需要这些：

yum install xorg-x11-server-Xvfb libX11.i386 libXext.i386 libXt.i386 libXcursor.i386 gtk2.i386

# php - 如何按单词而不是字母数截断

> ID：13079917
> 
> 赞同：1
> 
> 时间：2012-10-26T02:18:57.290
> 
> 标签：php, truncate

我正在将标题打印到`<title>$title</title>`. 但我试图用更少的字符打印标题。问题是我有一个 php 代码，可以打印出我选择的字符限制。但它并不能解决完成整个单词。有没有一种功能或方法可以使被字符截断的单词的其余部分打印出来？

现在这是我使用的代码。

```
$title="Website.com | ". stripslashes($content['text']);
if ($title{70}) {
  $title = substr($title, 0, 69) . '...';
}else{
  $title = $title;
} 
```

所以它会打印出类似的东西`Website.com | Here is your sent...`

但我希望它打印整个单词的其余部分，例如`Website.com | Here is your sentence...`

我如何编辑我的代码或者是否有一个函数可以调用单词的其余部分？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T02:24:18.613

修剪到最后一个空格

```
 $title = substr($title, 0, 69) ;
 $title = substr($title, 0, strrpos($title," ")) . '...'; 
```

[http://php.net/manual/en/function.strrpos.php](http://php.net/manual/en/function.strrpos.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T02:23:47.257

```
<?php
/**
* trims text to a space then adds ellipses if desired
* @param string $input text to trim
* @param int $length in characters to trim to
* @param bool $ellipses if ellipses (...) are to be added
* @param bool $strip_html if html tags are to be stripped
* @return string 
*/
function trim_text($input, $length, $ellipses = true, $strip_html = true) {
//strip tags, if desired
if ($strip_html) {
    $input = strip_tags($input);
}

//no need to trim, already shorter than trim length
if (strlen($input) <= $length) {
    return $input;
}

//find last space within length
$last_space = strrpos(substr($input, 0, $length), ' ');
$trimmed_text = substr($input, 0, $last_space);

//add ellipses (...)
if ($ellipses) {
    $trimmed_text .= '...';
}

return $trimmed_text;
}
?> 
```

# windows - installshield 中的多个安装选项

> ID：13079920
> 
> 赞同：0
> 
> 时间：2012-10-26T02:19:39.940
> 
> 标签：windows, windows-installer, installshield

我是使用 installshield 的新手，目前我正在使用 installsheild 10。

我正在尝试创建一个安装文件，他们可以在其中选择安装

例如

() 安装包 A () 安装包 B

取决于那里的答案取决于安装了哪些文件。

就像我说的那样，我一直在到处寻找要下载的示例文件，所以我可以自学，但我已经放弃了，因为它已经持续了 2 天。

我尝试了很多东西，比如“完整或自定义”选项

在此先感谢您，但请保持简单，以便我遵循 :)

或者有没有什么简单的软件可以解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T09:58:13.870

请尝试使用功能条件意味着制作具有 2 个功能的单个 MSI，并为 FEATURE1、FEATURE2 等设置两个公共属性。将条件设置为导航树中的功能。创建这些文件后，分别将文件添加到两个功能中。当最终用户尝试安装时，让他们通过 cmd 或批处理文件或 vbs 安装以输入参数，例如

```
Msiexec/i"app.msi" FEATURE1=condition name 
```

希望这会奏效

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T14:07:04.780

我可以建议您先阅读[“功能”](http://msdn.microsoft.com/en-us/library/windows/desktop/aa372840%28v=vs.85%29.aspx)，并了解 MSI 的工作原理。关于单独的包裹的问题有答案。但是，如果您已经有 2 个 MSI 并且想要创建将安装第一个、第二个或两者的安装程序 - 请阅读有关“链式 MSI”的信息。

# azure - 在 VS 2010 中将 Web 角色项目发布到 azure 时如何指定文件

> ID：13079928
> 
> 赞同：0
> 
> 时间：2012-10-26T02:21:05.893
> 
> 标签：azure, azure-web-roles

如果我只想修改 web 角色的 web.config 怎么办。我不想改变网络角色的其余部分。似乎每次我发布 web 角色 .VS2010 都会将 web 角色中的所有文件上传到 azure 。我可以将指定的 Web 角色文件上传到云服务吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T06:57:46.463

没有。这对于云服务是不可能的。这意味着如果您更改 web.config，则必须重新部署整个角色。

这就是为什么查看 .cscfg 文件（[云服务配置文件](http://msdn.microsoft.com/en-us/library/windowsazure/ee758710.aspx)）可能比较合适的原因。因为可以随时更改任何内容（在您的角色运行时）。这当然会增加一些初始开销，因为您必须更改（如果在任何地方使用）对连接字符串的所有引用 kind `<%$ ConnectionStrings:MyNorthwind%>`。但是，一旦您将所有与配置相关的设置更改为从与平台无关的源（无论是 web.config 或云服务配置，甚至是 Azure 表存储）中读取，您将拥有非常灵活的应用程序部署选项。唯一不能通过服务配置更改的是`system.serviceModel`web.config 的部分。由于 WCF 自动装配严重依赖它。仅当您使用 WCF 服务时才会这样做。但是，即使是 WCF 服务也可以动态配置。

**更新**（评论后）

您必须重新部署，因为这是提供平台即服务的公共云。其中包括硬件故障的自动“修复”、操作系统补丁/更新、运行时 (.net) 更新、无限可扩展性。PaaS 的东西是无状态的。无状态意味着在系统修复/重新启动/故障/横向扩展/横向缩减过程中不会保留任何状态。您为系统准备的内容（.cspkg 和 .cscfg）被用作“基础映像”，以在发生某些事情（初始部署、修复部署等）时塑造云服务。

我个人不认为重新部署如此耗时。也许我还没有面临足够大的部署。但是，作为最佳实践，我将我的 CSPKG/CSCFG 上传到 blob 存储容器中，然后从那里部署/升级。如果我必须“重新部署”，我只需执行“自动升级”，Azure 平台 Fabric（这是确保我的服务处于实时和运行状态的智能事物）负责其余的工作。剩下的就是从负载均衡器中取出实例，更新我的包，将实例移回负载均衡器轮换，等等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-27T10:28:03.763

不幸的是，azure 不允许逐个文件更新包。必须重新部署整个包。当拥有大尺寸的包裹时，这是一个真正的痛苦。我的解决方案通常需要大约 45 分钟才能上传。

我的建议是在 azure 上创建一个虚拟机并在那里托管您的网站。请记住打开 http 端口 80 作为端点，如果您计划拥有负载平衡的机器，则必须在所有服务器上复制文件。虚拟机是有状态的而不是无状态的（Web 角色 vm），因此您的设置和数据将被保留。

# c# - 在客户端重置原始值时，DropDownList SelectedIndexChanged 不运行

> ID：13079929
> 
> 赞同：2
> 
> 时间：2012-10-26T02:21:09.267
> 
> 标签：c#, jquery, asp.net

这似乎是一个有明显解决方案的常见场景，但不知何故我还没有遇到过。

我有一个`DropDownList`与事件绑定的事件处理程序`SelectedIndexChanged`，`AutoPostback="true"`并且按预期工作。

事件处理程序在值发生更改时执行，但如果在客户端使用 jQuery 通过脚本更改值，并且随后在用户更改值时触发回发（并且下拉`onchange`事件触发），然后服务器端代码检测到自服务器上次看到其状态以来该值没有更改，因此事件处理程序不在服务器端运行。

似乎可以通过视图状态加载某些内容，但禁用`ViewState`无效。

1.  该页面呈现下拉菜单并选择了值“A”。
2.  用户将下拉列表更改为值“B”。
3.  该值会自动发布到服务器，并`SelectedIndexChanged`执行事件处理程序。
4.  运行客户端脚本以使用 将客户端上的值更改回“A” `jQuery.val()`。
5.  用户将值改回“B”。
6.  该值会自动发布到服务器，但由于在服务器上次呈现页面时该值为“B”，因此`SelectedIndexChanged`不会执行事件处理程序。

## 客户端

```
<asp:DropDownList ID="dlst" runat="server" AutoPostBack="true" OnSelectedIndexChanged="dlst_SelectedIndexChanged">
    <asp:ListItem Text="A" Value="A" />
    <asp:ListItem Text="B" Value="B" />
</asp:DropDownList>

<asp:Button ID="btnChange" runat="server" Text="Change" OnClientClick="return changeDDL(this,event)" />
<script type="text/javascript">
    function changeDDL(sender, e) {
        var dlst = $("#<%= dlst.ClientID %>");
        dlst.val(dlst.val() === "A" ? "B" : "A");
        return false;
    }
</script> 
```

## 服务器端

```
protected void dlst_SelectedIndexChanged(object sender, EventArgs e)
{
    btnChange.Text = dlst.SelectedValue == "A" ? "Change B" : "Change A";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T20:29:07.717

调试[.Net Framework Reference Source](http://referencesource.microsoft.com/)后，我得出结论，问题在`DropDownList`实现中很深，如果不重新实现或继承类来改变行为，就无法解决。

在`DropDownList`类中，有一个接口方法的`LoadPostData()`实现。`IPostBackDataHandler`

在内部`LoadPostData()`，当前在下拉列表中选择的值的索引将与在下拉列表中设置的加载或默认设置的属性`SelectedIndex`进行`ViewState`比较。`0``EnableViewState="false"`

该`OnSelectedIndexChanged()`方法由 调用，`RaisePostDataChangedEvent()`顾名思义，只有在发布数据与视图状态/默认数据相比发生更改时才会调用该方法。因此，如果当前选择的索引与视图状态/默认索引匹配，`SelectedIndexChanged`则不会触发该事件。

就我而言，有两件事可能导致问题：

1.  `ViewState`启用后，当前索引值与从中加载的值匹配，`SelectedIndex`因此`ViewState`不会`SelectedIndexChanged`触发。
2.  `ViewState`禁用时，该值`SelectedIndex`默认为`0`，因此当当前索引值为 时`0`，`SelectedIndexChanged`不会触发。

**DropDownList.LoadPostData()**

```
protected virtual bool LoadPostData(String postDataKey, NameValueCollection postCollection) { 
    //{snip...}
    int n = Items.FindByValueInternal(selectedItems[0], false);

    if (SelectedIndex != n) {
        SetPostDataSelection(n); // Calls ListControl.SetPostDataSelection() and sets Items[selectedIndex].Selected = true;
        return true;
    } 

    return false; 
} 
```

稍后，当类通过其发布数据已更改的控件时，如果检测到更改，则调用`Page`下拉菜单的方法。`OnSelectedIndexChanged`由于在这种情况下下拉列表的发布数据没有更改，因此不会引发事件。

**DropDownList.RaisePostDataChangedEvent()**

```
protected virtual void RaisePostDataChangedEvent() { 
    //{snip...}
    OnSelectedIndexChanged(EventArgs.Empty); 
} 
```

# php - 许多加载较少数据的数据库调用还是加载更多数据的较少数据库调用？

> ID：13079933
> 
> 赞同：0
> 
> 时间：2012-10-26T02:21:32.687
> 
> 标签：php, mysql, ajax, performance

我有一个我正在开发的网站，它通过对 PHP 内容加载器进行 AJAX 调用来加载 8 行数据，每次用户点击下一步按钮加载新内容时，该加载器都会调用我的数据库。

作为该站点的单个用户，这种方法现在对我来说非常有效。

我的问题是，如果我在网站上有很多用户，最好在他们点击下一个时预先加载接下来的 16,32 等行数据，还是保持现在的方式，每次加载 8 行他们打下一个？有关系吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T02:30:26.583

真正回答这个问题的唯一方法是通过负载测试和一些判断调用。加载更多行的额外数据库开销是多少？您是否受到数据库处理能力或网络服务器带宽的限制？无论服务器性能如何，加载额外的行是否会增强用户体验？

在做出决定时，您需要回答这些类型的问题，但最终取决于您网站的查询、数据和功能的具体情况。

# macos - 如何在 Coda 2 中更新 WebKit？

> ID：13079937
> 
> 赞同：1
> 
> 时间：2012-10-26T02:22:12.523
> 
> 标签：macos, webkit, coda

Coda 2 有一个 Web Inspector 功能，但它是旧的 WebKit Web Inspector。我想更新它。我该怎么做？下载新**的 WebKit.app**并将**Coda 2.app**中的某个文件夹替换为 WebKit 中的某个文件夹？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-13T03:09:03.877

这已在[其他地方得到解答](https://stackoverflow.com/questions/9007825/using-webkit-framework-from-webkit-nightly-in-cocoa-app)，但请注意，如果您这样做，您可能会遇到错误。

# php - 现在使用 PHP 在日期和日期之间获取年月日和年龄

> ID：13079940
> 
> 赞同：0
> 
> 时间：2012-10-26T02:22:29.847
> 
> 标签：php, cakephp

我有如下代码：

```
<tr>
  <td>Date :</td>
  <td><input type="text" name="txtdembauche" value="<?php echo $value['dateEmbouche'] ?>"class="validate[required] text-input datepicker TextInput"  id="txtdembauche"/></td>
  <td></td>
</tr>
<?php                           

  @$date1 = $_POST['txtdembauche'];
  $date2 = date("Y-m-d");
  $diff = abs(strtotime($date2) - strtotime($date1));
  $years = floor($diff / (365*60*60*24));
  $months = floor(($diff - $years * 365*60*60*24) / (30*60*60*24));
  $days = floor(($diff - $years * 365*60*60*24 - $months*30*60*60*24)/ (60*60*24));     

?>
<tr>
  <td>Ancienneté : <b id="anciente" style="color:#FF0000;"><?php printf("%d years, %d months, %d days\n <br />", $years, $months, $days); ?></b></td>
  <td></td>
  <td></td>
</tr>
<input type="text" name="dateResult" id="dateResult" value="<?php // I do not know how to calculate this ?>"> 
```

**问题：**

```
<tr>
  <td>Ancienneté : <b id="anciente" style="color:#FF0000;"><?php printf("%d years, %d months, %d days\n <br />", $years, $months, $days); ?></b></td>
  <td></td>
  <td></td>
</tr> 
```

它不能很好地工作，它显示错误的日期。

```
<input type="text" name="dateResult" id="dateResult" value="<?php // I do not know how to calculate this ?>"> 
```

我现在想得到日期和日期之间的人的年龄 ex: `12years`，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T03:25:31.143

```
<?php
$birthday = "1987-01-01";
$timestamp = strtotime($birthday);
$age = (date("md") >= date("md", $timestamp)) ? (date("Y") - date("Y", $timestamp)) : (date("Y") - date("Y", $timestamp) - 1);
echo $age."\n"; 
```

希望这可以帮到你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T03:14:50.307

至于评论，这与您的编码技术或概念有关。我已经创建了一个测试代码，只需按照它并确定你哪里出错了

```
<?php                           
if(isset($_POST['submit'])){
  @$date1 = $_POST['txtdembauche'];// if format mm/dd/yyyy
  $date2 = date("m/d/Y");//change m,d,y according to input data format
  $diff = abs(strtotime($date2) - strtotime($date1));
  $years = floor($diff / (365*60*60*24));
  $months = floor(($diff - $years * 365*60*60*24) / (30*60*60*24));
  $days = floor(($diff - $years * 365*60*60*24 - $months*30*60*60*24)/ (60*60*24));     
}
?>
<form action="" method="post">
<table>
<tr>
  <td>Date :</td>
  <td><input type="text" name="txtdembauche" value="<?php echo $value['dateEmbouche'] ?>"class="validate[required] text-input datepicker TextInput"  id="txtdembauche"/></td>
  <td><input type="submit" name="submit" value="Get Age"></td>
</tr>
<tr>
  <td>Ancienneté : </td>
   <td><b id="anciente" style="color:#FF0000;"><?php printf("%d years, %d months, %d days\n <br />", $years, $months, $days); ?></b></td>
  <td></td>
</tr>
<tr>
  <td>Age</td>
  <td><input type="text" name="dateResult" id="dateResult" value="<?php echo $years; ?>"></td>
  <td></td>
</tr>
</table>
</form> 
```

# java - 二维数组：检索行/列而不是值

> ID：13079942
> 
> 赞同：1
> 
> 时间：2012-10-26T02:22:47.647
> 
> 标签：java

我希望将数组与其自身进行比较，因此除非坐标不同，否则它不会处理特定的代码体。例如：

```
if (one [a][b] == two [c][d]) 
{
    //Do Nothing
}

else 
{
    System.out.println(one [a][b]);
} 
```

我想要做的是比较使用的坐标（[a][b] 和 [c][d]），而不是一个或两个元素的值。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T02:48:53.440

如果您只想检查指数，为什么不这样做呢？只需为一个数组创建一对变量：arrOne_col 和 arrOne_row，然后对另一个执行相同操作并比较它们的值。

# javascript - 使用 8 个参数无法将图像绘制到画布上

> ID：13079943
> 
> 赞同：0
> 
> 时间：2012-10-26T02:22:57.937
> 
> 标签：javascript, html, drawimage

我知道这不是关于一般代码问题的问题，但我真的只需要帮助修复我的代码。现在，我正在自己开发我的第一个 HTML5 程序，它是一个非常简单的自上而下的射击游戏。现在，我已经编写了代码，这样一艘船就会出现在屏幕上，您可以左右移动。但是，现在我正在尝试创建一个新的对象来绘制称为子弹。我从船上复制了代码，但我无法让它工作。到目前为止，这里是代码。它相当小，所以你可以理解这艘船。这是船对象：

```
function ship() {
    this.width = 100;
    this.height = 75;
    this.drawX = gameWidth/2 - this.width/2;
    this.drawY = gameHeight - this.height - 5;
} 
```

画那个，我用这个功能：

```
ship.prototype.draw = function() {
    clearCtx(ctxPlayer);
    var srcX;
    var srcY;
    if(isRightKey) {
        srcX = 0;
        srcY = 75;
    } else if (isLeftKey) {
        srcX = 0;
        srcY = 153;
    } else {
        srcX= 0;
        srcY = 0;
    }

    ctxPlayer.drawImage(sprites,srcX,srcY,this.width,this.height,this.drawX,this.drawY, this.width, this.height);
} 
```

顶部的那些东西只会改变图像的来源，因为如果图像以一种或另一种方式移动，则图像会有所不同。无论如何，这是子弹对象：

```
function BulletGreen() {
    var drawX = 0;
    var drawY = 0;
    var height = 33;
    var width = 9;
} 
```

如您所见，它非常相似。现在，这是我用来绘制它的代码：

```
BulletGreen.prototype.draw = function drawBulletsGreen() {
    ctxPlayer.drawImage(sprites,350,0,this.width,this.height,this.drawX,this.drawY, this.width, this.height);
} 
```

但是，当我在控制台中使用命令时，这似乎不起作用。它没有返回错误，但似乎根本没有改变画布。但是，做类似的事情

```
ctxBullet.drawImage(sprites,0,0) 
```

将精灵表绘制到画布上。如果在这里不欢迎这种问题，我深表歉意，但我只是没有想法！这真的让我很困惑。

编辑：我在这里上传了所有内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T11:24:04.397

我想我猜对了：ctxPlayer 是你的画布对象，而 sprites 是新的图像 src（例如 abc.png），那么你可以只使用其中的 5 个而不是使用 8 个参数来绘制图像吗？在你的情况下，我认为那些将是，

```
ctxPlayer.drawImage(sprites,this.drawX,this.drawY, this.width, this.height); 
```

在哪里，

```
this.drawX is the x coordinate where to place the image on the canvas
this.drawY is the x coordinate where to place the image on the canvas
this.width is width of the image
this.height is height of the image 
```

类似的参数对我有用..我认为它们也对你有用:)

这是我找到的参考网址：http: [//www.w3schools.com/tags/canvas_drawimage.asp](http://www.w3schools.com/tags/canvas_drawimage.asp)

同样在 clearCtx(ctxPlayer); 您是在清除整个画布还是在绘制前一个图像的位置？如果您尝试清除整个画布，则必须完全重新绘制

# php - 在 HTML 表格中显示复选框数组和 PHP 变量数组

> ID：13079953
> 
> 赞同：0
> 
> 时间：2012-10-26T02:25:07.407
> 
> 标签：php, html, arrays, checkbox, html-table

我有一个包含 7 列的 html 表。数据是从 XML 提要中提取的，并且应该针对提要中的项目进行循环。我通过以下方式分配 PHP 变量：

```
foreach ($xml->Game as $Game) { 
  $Date = $Game->Date; $AwayTeam = $Game->AwayTeam; 
```

// 然后，我将一个数组分配给计数 for 循环下的变量：

```
for($i=0; $i<$count; $i++){
    $arrayDate = $Date;
} 
```

我正在使用 PHP 来回显 Table 中的数组，例如：`echo "<td>arrayDate[$i]</td>";`

但是，在其中的 3 列中，我需要显示复选框以及我的数组。

有没有办法在同一个单元格中显示复选框和 arrayValue？我对 PHP、JQuery 和 HTML 选项很灵活。

```
<?php  
require_once('db-config.php');
// rss page for Testing -  
$feed_url = "http://www.sportsbooks.com/lines/cgi/lines.cgi?tem=parse&sport=203&ct=text/xml&type=";
$xml = simplexml_load_file($feed_url);
//Connect to mysql server
$link = mysql_connect(DB_HOST, DB_USER, DB_PASSWORD);
if(!$link) {
die('Failed to connect to server: ' . mysql_error());
}
$arrayDate = array('');
$arrayLine = array('');
$arrayLineStrip = array('');
$arrayOverPrice = array('');
$arrayUnderPrice = array('');
$arrayARotation = array('');
$arrayHRotation = array('');
$arrayAwayTeam = array('');
$arrayHomeTeam = array('');
$arrayAwayTeamPrice = array('');
$arrayHomeTeamPrice = array('');
$arrayAwayTeamMoneyLine = array('');
$arrayHomeTeamMoneyLine = array('');
$Date = (string)$xml->Date;
$AwayTeam = (string)$xml->AwayTeam;
$HomeTeam = (string)$xml->HomeTeam;
$AwayRotation = (string)$xml->AwayRotation;
$HomeRotation = (string)$xml->HomeRotation;
$Total = (string)$xml->Total;
$OverPrice = (string)$xml->OverPrice;
$UnderPrice = (string)$xml->UnderPrice;
$Line = (string)$xml->Line;
$AwayTeamPrice = (string)$xml->AwayTeamPrice;
$HomeTeamPrice = (string)$xml->HomeTeamPrice;
$AwayTeamMoneyLine = (double)$xml->AwayTeamMoneyLine;
$HomeTeamMoneyLine = (double)$xml->HomeTeamMoneyLine;
$Title = (string)$xml->Title;
?>
<html>
<div style="font-family:arial; font-size:.8em;"> 
<table id="nfl-main-1" cellpadding="0" cellspacing="0" border="1" bordercolor="#585858" width=100%>
<td>
<table id="nfl-main-2 border=1 cellpadding="0" cellspacing="0" width="100%">
<tr><td colspan="7"><table border=0 width=100% cellspacing=0 cellpadding=0><tr>
<td bgcolor="#585858" align="center" width=100%><h2 style="color:white; font-size: 16px"><?php echo $Title; ?></td>
</tr></table></td></tr>
<tr>
<div style="font-family:arial; font-size:.8em; color:white;"> 
<th>Date</th>
<th>    </th>
<th>#</th>
<th>Team</th>
<th>Money</th>
<th>Spread</th>
<th>Total</th>
</tr>       
</div>
</table>
</div>
</table>
</html>
<?php>
// # items to display 
$count = 20; 
// Characters from each item 
$char = 200; 
echo '<table cellpadding="0" align="left" cellspacing="0" border="1" bordercolor="#585858" width=100%>';
foreach ($xml->Game as $Game) { 
$Date = $Game->Date; $AwayTeam = $Game->AwayTeam; $HomeTeam = $Game->HomeTeam; $AwayRotation = $Game->AwayRotation;
$HomeRotation = $Game->HomeRotation; $Total = $Game->Total; $OverPrice = $Game->OverPrice;
$UnderPrice = $Game->UnderPrice; $Line = $Game->Line; $AwayTeamPrice = $Game->AwayTeamPrice;
$HomeTeamPrice = $Game->HomeTeamPrice; $AwayTeamMoneyLine = $Game->AwayTeamMoneyLine; $HomeTeamMoneyLine = $Game->HomeTeamMoneyLine;
for($i=0; $i<$count; $i++){
$AwayTeamSpread = " ";
$HomeTeamSpread = " ";
$arrayDate = $Date;
$arrayARotation = $AwayRotation;
$arrayHRotation = $HomeRotation;
$arrayAwayTeam = $AwayTeam;
$arrayHomeTeam = $HomeTeam;
$arrayTotal = $Total;
$arrayLine = $Line;
$arrayOverPrice = $OverPrice;
$arrayUnderPrice = $UnderPrice;
$arrayAwayTeamMoneyLine = $AwayTeamMoneyLine;
$arrayHomeTeamMoneyLine = $HomeTeamMoneyLine;
$arrayAwayTeamPrice = $AwayTeamPrice;
$arrayHomeTeamPrice = $HomeTeamPrice;
$arrayLine = $Line;
$LineStrip = str_replace("-", " ",$arrayLine);

if($arrayHomeTeamMoneyLine>0);
{
$AwayTeamSpread = "-";
$HomeTeamSpread = "+";
}
if($arrayAwayTeamMoneyLine>0);
{
$AwayTeamSpread = "+";
$HomeTeamSpread = "-";
}
echo '<tr>';
echo "<td>$arrayDate[$i]</td><td><table><tr><td>$arrayARotation[$i]</td></tr><tr><td>$arrayHRotation[$i]</td></tr></table></td><td><table><tr><td>$arrayAwayTeam[$i]</td></tr><tr><td>$arrayHomeTeam[$i]</td></tr></table></td><td><table><tr><td>$arrayAwayTeamMoneyLine[$i]</td></tr><tr><td>$arrayHomeTeamMoneyLine[$i]</td></tr></table></td><td><table><tr><td>$AwayTeamSpread $LineStrip ($arrayAwayTeamPrice)</td></tr><tr><td>$HomeTeamSpread $LineStrip ($arrayHomeTeamPrice)</td></tr></table></td><td><table><tr><td>Over $arrayTotal</td></tr><tr><td>Under $arrayTotal</td></tr></table></td>";
echo '</tr>';
echo '</table>';
echo '<table cellpadding="0" align="left" cellspacing="0" border="1" bordercolor="#585858" width=100%>';
echo '<tr>';
echo "<td>$arrayDate[$i]</td><td><table><tr><td>$arrayARotation[$i]</td></tr><tr><td>$arrayHRotation[$i]</td></tr></table></td><td><table><tr><td>$arrayAwayTeam[$i]</td></tr><tr><td>$arrayHomeTeam[$i]</td></tr></table></td>";
echo '<tr>';
}
}
?>
<form>
<td><input type="checkbox" name="AwaySpread[]" value="<?php echo '$arrayDate' ?>"><?php echo $count ?><br></td>
<input type="checkbox" name="HomeSpread[]" value="HomeSpread"><br>  
<input type="checkbox" name="Over[]" value="Over"><br> 
<input type="checkbox" name="Under[]" value="Under"><br> 
<input type="checkbox" name="AwayMoneyLine[]" value="AwayMoneyLine"><br> 
<input type="checkbox" name="HomeMoneyLine[]" value="HomeMoneyLine"><br>
<input type="submit" name="Continue" value="Continue"><br>
</form>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T02:39:31.740

你为什么不使用这样的东西，

```
echo "<td><input type='checkbox'/> arrayDate[$i] </td>"; 
```

# aviarc - 如何在 Aviarc 中快速更新数据集列

> ID：13079954
> 
> 赞同：1
> 
> 时间：2012-10-26T02:25:30.857
> 
> 标签：aviarc

例如，我有一个按钮，它遍历数据集并将一个字段设置为一个值。

```
<button left="10" width="100" bottom="12" height="32" label="Select All" enabled-if-dataset="data">
    <when event="onClick" xmlns="urn:aviarc:widget:com.aviarc.toronto.widget.core.action:1">
        <dataset:dataset-iterator dataset="data">
            <set-field field="data.selected" value="y"/>
        </dataset:dataset-iterator>
    </when>
</button> 
```

这适用于较小的数据集，但现在我有一个包含 400 行的数据集，并且在运行时有明显的延迟。

还有另一种方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T02:59:47.783

我建议这样做的方法是通过以下算法：

*   在绑定到记录表的数据集上禁用相关事件
*   使用字段更新进行迭代
*   重新启用数据集事件
*   触发刷新记录表的事件

我会将更新包装到 Javascript 操作小部件中。下面的提取来自 Aviarc 3.6，我在其中做类似的事情（来自 run 方法），但您应该能够根据需要对其进行调整：

```
/* disable all events on the target dataset which would most likely trigger some widget behaviours */
var dsEvents = [
    "ONDATASETCHANGED"
    ,"ONDATACHANGED"
    ,"ONLOCALDATACHANGED"
    ,"ONCONTENTSREPLACED"
    ,"ONCURRENTROWCHANGED"
    ,"ONROWCREATED"
    ,"ONROWDELETED"
    ,"ONROWADDED"
    ,"ONCURRENTROWDELETED"
    ,"ONROWCOMMITACTIONCHANGED"
    ,"ONCURRENTROWCOMMITACTIONCHANGED"
    ,"ONROWFIELDCHANGED"
    ,"ONCURRENTROWFIELDCHANGED"
];
var events = toDS.getEvents();
for (var i = 0, count = dsEvents.length; i < count; i++) { 
    events.getEventByName(dsEvents[i]).disable(); 
}
toDS.deleteAllRows();
fromDS.getAllRows().doLoop(function(fromDSRow) {
    if (doFiltering) {
        if (fromDSRow.getField(userIDField) == userID) {
            this._copyRow(fromDSRow, toDS.createRow());
        }
    } else {
        this._copyRow(fromDSRow, toDS.createRow());
    }
}, this);
toDS.reset();
/* enable all events back */
for (var i = 0, count = dsEvents.length; i < count; i++) { 
    events.getEventByName(dsEvents[i]).enable(); 
}
/* trigger refresh on the widgets as if we just updated ds via ajax */
toDS.onContentsReplaced.fireEvent();
toDS.onDataChanged.fireEvent();
toDS.onDatasetChanged.fireEvent(); 
```

# c# - 单击按钮以在不同的文本框中显示随机信息

> ID：13079955
> 
> 赞同：1
> 
> 时间：2012-10-26T02:25:32.467
> 
> 标签：c#, user-interface, random, textbox, click

所以现在我有一个名为“Clans”的类，它按名称和各自的村庄列出了几个不同的氏族。

```
 static void Main(string[] args)
    {
        Clan Uchiha = new Clan("Uchiha", "Konoha");
    } 
```

这基本上会持续到另外几个氏族。它由两个字符串定义，Clan 和 Village。这是一个 GUI 应用程序，所以当我单击一个按钮时，我希望它选择一个随机的“氏族”，该“氏族”将显示氏族及其村庄。请注意，在我自己考虑项目时，我是一个完全的新手。我知道如何进行点击事件，但我不确定我是如何做到的，因此被点击的按钮会将信息输出到 Clan and Village 文本框中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T02:33:20.317

假设您已经填充了 Clans (List < Clan >)，您可以选择具有以下功能的随机氏族：

```
System.Random l_random = new System.Random();
int l_randomClanId = l_random.Next(0, l_clans.Count-1);
Clan l_randomClan = l_clans[l_randomClanId];//Where l_clans is the Clans object populated 
```

现在您有了 Random Clan 对象，您可以执行以下操作来填充文本框：

```
txtBoxClan.Text = l_randomClan.Clan;
txtBobVillage.Text = l_randomClan.Village; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T02:42:41.980

`Clan`因为我没有定义这个，所以我不能用这个类来做这个。因此，如果您不介意，我将使用`List<string>`它，但此时`Clan`必须是一个集合:)

我们将使用`Random`and`List<string>`来解决这个问题。

首先，我们的集合中必须有一些项目`List<string>`。让我们`List<string>`首先使用以下代码创建

```
List<string> Clans = new List<string>(); 
```

然后，让我们添加一些项目到`Clans`

```
Clans.Add("Uchiha,Konoha");
Clans.Add("Picrofo Groups,Egypt");
Clans.Add("Another Clan,Earth");
Clans.Add("A fourth Clan,Somewhere else"); 
```

现在，我们需要在单击按钮时输出其中的一个项目，因为知道有一个拆分器`,`将每个项目中的第一个值与第二个值分开。例如。`Uchiha`哪个是氏族的名称，第一个值是分开的，`Konoha`哪个是氏族的位置，第二个值`,`是分隔符。我们还需要创建 Random 类。让我们试试这个

```
Random Rand = new Random(); //Create a new Random class
int Index = Rand.Next(0, Clans.Count); //Pick up an item randomly where the minimum index is 0 and the maximum index represents the items count of Clans
string[] Categorizer = Clans[Index].Split(','); //Split the item number (Index) in Clans by ,
MessageBox.Show("Name:" + Categorizer[0] +" | Location: "+ Categorizer[1]); //Output the following 
```

最后，它在您的表单类中看起来像这样

```
 List<string> Clans = new List<string>();
    private void Form1_Load(object sender, EventArgs e)
    {
        Clans.Add("Uchiha,Konoha");
        Clans.Add("Picrofo Groups,Egypt");
        Clans.Add("Another Clan,Earth");
        Clans.Add("A fourth Clan,Somewhere else");
    }

    private void button1_Click(object sender, EventArgs e)
    {
          Random Rand = new Random();
          int Index = Rand.Next(0, Clans.Count);
          string[] Categorizer = Clans[Index].Split(',');
          MessageBox.Show("Name:" + Categorizer[0] +" | Location: "+ Categorizer[1]);
    } 
```

谢谢，
我希望你觉得这有帮助:)

# c# - Automapper 抛出 System.ArgumentException

> ID：13079960
> 
> 赞同：1
> 
> 时间：2012-10-26T02:25:56.993
> 
> 标签：c#, automapper, automapper-2

我已经将 AutoMapper 更新到了第 2 版，现在我遇到了很多问题......

我有一个列表，`ItemToMap`所有这些对象都引用了同一个对象`Tag`

当我尝试使用 映射`ItemToMap`时`ItemToMapDto`，出现此错误：

> AutoMapper.AutoMapperMappingException ：
> 
> 映射类型：Tag -> TagDto DAL.Entities.Tag -> DTO.Objects.TagDto
> 
> 目标路径：ItemToMap[][1].Tag.Tag
> 
> 源值：Entities.Tag ----> System.ArgumentException ：已添加具有相同键的项。

这是映射：

```
Mapper.CreateMap<ItemToMap, ItemToMapDto>();
Mapper.CreateMap<Tag, TagDto>(); 
```

这是突出我的问题的单元测试：

```
var temp = new List<ItemToMap>();
var tag1 = this.RandomTag;
var length = 10;

for (int i = 0; i < length; i++)
{
    temp.Add(new ItemToMap()
    {
        Tag = tag1,
    });
}
var record = temp.ToArray();
var mapped = Mapper.Map<ItemToMap[], ItemToMapDto[]>(record); 
```

让我的映射工作的解决方案是什么？我正在寻找一个全球性的解决方案，因为问题遍布整个代码......

**编辑1：**

问题来自下面的ctor，如果我评论ctor的代码，一切正常......

```
public class ItemToMapDto
{
    public ItemToMapDto()
    {
        /* If I comment the line below, all's fine... But it not the behaviour 
         * I want, I'd like to have a default value for the property... 
         */
        this.Tag = new TagDto() { Name = this.RandomText };
    }

    public string Name
    {
        get;
        set;
    }

    public TagDto Tag
    {
        get;
        set;
    }
} 
```

**编辑2：**

Automapper 正在缓存`ResolutionContext`以重用已设置的解析器。换句话说，它循环遍历映射器并获取在调用 时返回 true 的映射器`IsMatch`。要知道这是否`ResolutionContext`被缓存，它会检查目标属性是否已经设置以及上下文的哈希码。因为目的地是在 Ctor 中设置的，所以 Automapper 认为它没有被缓存，因此它调用未缓存的解析器。后一个解析器将缓存但失败，因为哈希码已存在于`Dictionary`用作缓存存储库中

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T14:03:48.630

这是一个错误。修复将在 2.2.1 版本中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T03:16:42.637

您必须注册`DAL.Entities.Tag`，`DTO.Objects.TagDto`尽管您在 Tag 和 TagDto 上具有相同的属性名称

我猜`Tag`你没有映射类中的一些属性。如果是这样使用`Ignore`

```
Mapper.CreateMap<Tag, TagDto>().ForMember(x => x.value, opt => opt.Ignore()); 
```

看看[这里](https://stackoverflow.com/questions/1942691/getting-an-exception-with-automapper)&[这里](https://stackoverflow.com/questions/11072877/an-exception-of-type-automapper-automappermappingexception-occurred-in-automap)&[这里](https://stackoverflow.com/questions/4393712/how-do-i-debug-automapper-automappermappingexception)

# iphone - 如何在 Xcode 中向主线程发送消息或通知？

> ID：13079963
> 
> 赞同：1
> 
> 时间：2012-10-26T02:27:39.823
> 
> 标签：iphone, xcode, grand-central-dispatch

我在 iPad 上有一个功能，我需要依次运行 3 个步骤，比如说 task1、task2、task3。Task2 需要从服务器加载一些数据。所以我需要把task2放到一个单独的后台线程中。

```
- (IBAction)dbSizeButton:(id)sender {

    //Task1......

    dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0ul);

    dispatch_async(queue, ^{

        //Task2 .....which go to server and download some stuff and update database.

        dispatch_sync(dispatch_get_main_queue(), ^{
            //Task3, continue to work on UI
        });
    });
} 
```

但看起来正在发生的事情是应用程序经常在 Task2 启动时被杀死。我不确定究竟是为什么。我可以看到 Task2 确实在单独的线程中执行。所以我想知道，如果这不是这样做的方法，而不是使用 GCD，我是否可以在 Task2 结束时向主线程发送消息或通知，以便我可以启动 Task3？究竟该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T03:57:39.440

问题仅仅是你使用`dispatch_sync`, 哪个块。这就是你被杀的原因。你几乎是对的。你想要的是：

```
// ... task 1 on main thread
dispatch_async(other_queue, ^{
    // ... task 2 in background thread
    dispatch_async(dispatch_get_main_queue(), ^{
        // ... task 3 on main thread
    });
}); 
```

这是退出主线程并重新启动的标准模式。这里的所有都是它的！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T02:42:27.003

通过使用 NSOperation 和 NSOperationQueue 而不是 GCD，您想要实现的目标会更容易。它不会触发通知，但我相信它会做你想做的事。

如果我正确理解了您的问题，那么您当前正在主线程中运行 task1。Task2 稍后通过 task1 同时触发，但 task2 告诉 task3 调用 UI。所以换句话说，task2 和 task3*依赖*于 task1，对吧？

使用 NSOperations（操作是一段代码，可以是选择器或块，您可以在不同的线程中运行）和 NSOperationQueues，您可以在不到一分钟的时间内实现这些依赖关系。

```
//Assuming task1 is currently running.
NSOperationQueue *downloadAndUpdate; //Leaving out initialization details.

NSOperationBlock *task2; //Leavign out initialization details.
NSOperationBlock *task3;

//This is where it gets interesting. This will make sure task3 ONLY gets fired if task2 is finished executing.
[task3 addDependency:task2];

//Task3 could have the following code to update the main thread.

[[NSOperationQueue mainQueue] addOperation:myUIUpdatingTask]; 
```

这些 API 比 GCD 级别更高，我绝对建议您学习如何使用它们来创建更好的并发性。

这是帮助您开始使用这些 API[的教程。](http://www.andyibanez.com/2012/10/12/multithreading-on-ios-and-mac-os-x-using-nsoperations-a-friendly-tutorial/ "这是一个教程")

（披露：我是这篇文章的作者，但我保证我的目的不是为我的工作做广告。我写这个教程是因为我需要一种比 GCD 更好的并发处理方法，并最终学习了这个。我喜欢教我学到了什么）。

# wix - 使用环境变量工作目录设置 Wix 快捷方式

> ID：13079965
> 
> 赞同：1
> 
> 时间：2012-10-26T02:27:48.940
> 
> 标签：wix, wix3.6

我正在尝试使用以下 WorkingDirectory 在 WIX 中创建快捷方式：

```
<Shortcut Id="PowerShellShortcut" Name="$(var.PRODUCTNAME) Powershell Prompt" Description="$(var.PRODUCTNAME) Powershell Prompt" WorkingDirectory="%HOMEDRIVE%%HOMEPATH%" Target="[POWERSHELLEXE]" Arguments='-noexit -command "Import-Module [APPLICATIONFOLDER]Binaries\MA.dll | Out-Null"' /> 
```

当我尝试构建时，出现以下错误：

> 错误 1 ​​Shortcut/@WorkingDirectory 属性的值“%HOMEDRIVE%%HOMEPATH%”不是合法标识符。标识符可以包含 ASCII 字符 AZ、az、数字、下划线 (_) 或句点 (.)。每个标识符必须以字母或下划线开头。

是否有解决方法将文字字符串“%HOMEDRIVE%%HOMEPATH%”设置为快捷方式的工作目录？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T12:51:24.203

根据[Shortcut Table](http://msdn.microsoft.com/en-us/library/windows/desktop/aa371847.aspx)上的文档，工作目录 (WkDir) 存储了一个属性的名称，该属性具有您想要存储到快捷方式中的值。该属性可能是一个 DirProperty（即也是对目录表的引用），或者它本身可能只是一个硬编码的字符串。如果您希望最终快捷方式具有文字文本`%HOMEDRIVE%%HOMEPATH%`，则将您的工作目录设置为类似于`WKDIR_HOME`您设置的属性的名称`%HOMEDRIVE%%HOMEPATH%`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T08:24:59.353

您不能像`%HOMEDRIVE%`在`.wxs`文件中那样使用环境变量。而不是`%HOMEDRIVE%%HOMEPATH%`，尝试使用`$(env.HOMEDRIVE)$(env.HOMEPATH)`

# java - 将 ArrayLists 中的单个元素链接到 Java 中的另一个 ArrayList 的最佳方法是什么？

> ID：13079966
> 
> 赞同：0
> 
> 时间：2012-10-26T02:27:55.413
> 
> 标签：java

```
private ArrayList<String> professor = new ArrayList();
private ArrayList<String> course = new ArrayList();
private ArrayList<String> courseGroup = new ArrayList() 
```

教授数组列表可能包含：

```
["John","Dick","Harry"] 
```

我想将“John”链接到他可能正在教授的课程的 ArrayList，然后将课程链接到 courseGroup 的 ArrayList，因为一门课程可能有多个课程。所以这就像约翰教授教授的课程和他被分配到的课程组的记录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T02:40:41.307

你需要一个类设计来完成这项工作。例如

```
class Person {
    private String name;
    //getters and setters...
}

class Course {
    private String name;
    private Professor professor;
    private List<Person> students;
    //getters and setters...
}

class CourseGroup {
    private List<Course> courses;
    //getters and setters...
} 
```

这可能是您的计划的开始。如何链接程序中的元素取决于您。这是一个示例：

```
public class School {

    public static void main(String[] args) {
        Person professor = new Professor();
        professor.setName("Harry");
        Course course = new Course();
        course.setName("Dick");
        course.setProfessor(professor);
        Person p = new Person();
        p.setName("Harry");
        course.setStudents(new ArrayList<Person>());
        course.getStudents().add(p);
        CourseGroup courseGroup = new CourseGroup();
        courseGroup.setCourses(new ArrayList<Course>());
        courseGroup.getCourses().add(course);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T02:34:46.397

您可以使用`Map`s ( `HashMap<String, List<String>>`)。

或者，更好地创建类（处理它的适当数据结构）：

```
public class CourseGroup { }

public class Course {
    private List<CourseGroup> courseGroupList = new ArrayList<CourseGroup>();
}

public class Professor {
     private List<Course> courseList = new ArrayList<Course>();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T02:52:35.567

我想您通常会将这些教授、课程和课程组中的每一个都表示为对象。然后一个`Professor`对象将有一个字段`ArrayList<Course>`等等。

为了保持简洁，但在这种情况下，我将添加 2 个额外的数据结构：

```
Map<String, List<String>> profCourses = new HashMap<String, List<String>>();
Map<String, List<String>> courseGroup = new HashMap<String, List<String>>(); 
```

可以通过以下方式启动：

```
List<String> c = new ArrayList<String>();
c.add("Math");
c.add("Biology");
profCourses.put("John", c); 
```

请注意，查找 John 正在教授哪些课程会很快，但要查看哪些教授教授某门课程并不容易，需要遍历 profCourses 地图。

如果需要在另一个方向上快速查找，您可以使用不同的方法或添加冗余数据结构。

# python - 在python2中添加

> ID：13079967
> 
> 赞同：1
> 
> 时间：2012-10-26T02:27:56.890
> 
> 标签：python, loops

这是一个校验位练习。

```
A=str(56784321)
for x in [0,2,4,6]:
    B = int(A[x])*2
        if len(str(B))==2:
            B = int(str(B)[0])+int(str(B)[1])
            print (B) 
```

输出：

```
1
5
8
4 
```

如何使用更多代码将其中的 4 个加在一起？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T02:40:31.880

只需对代码进行最少的更改，您就可以使用 Python[生成器](http://wiki.python.org/moin/Generators)。请参阅[此问题](https://stackoverflow.com/questions/2776829/difference-between-python-generators-vs-iterators)以获得很好的参考。

```
def split_str(A):
  for x in [0,2,4,6]:
    B=int(A[x])*2
    if len(str(B))==2:
      B= int(str(B)[0])+int(str(B)[1])
    yield B

A=str(56784321)
for f in split_str(A):
  print f
print 'Sum is', sum(split_str(A)) 
```

印刷：

```
1
5
8
4
Sum is 18 
```

# c++ - 将向量写入和读取二进制文件

> ID：13079969
> 
> 赞同：0
> 
> 时间：2012-10-26T02:28:30.000
> 
> 标签：c++

我有一个向量：

```
class Element
{
public:

    string pathName;
    ui64 offsitePtr;
    ui64 subPage;

public:

    Element(void);

    ~Element(void);
};

vector<Element> elem; 
```

的大小`elem`将控制在 4096 字节以内。在程序结束时，我应该`fwrite` `elem`变成一个二进制文件。我目前使用的解决方案是制作一个 char 缓冲区并将元素写入`elem`其中。我不认为这是一个好主意。还有其他好主意吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T02:46:39.147

只要您不`Element`直接从内存中写入向量或 s ，就可以了。您需要序列化任何不是 POD（普通旧数据）的东西。这就是你的情况：`vector`和`string`.

向量很简单，因为您只需为`Element`. 但是您可能想要序列化向量大小：

```
ofstream& WriteVec( ofstream& s, vector<Element> &elem )
{
    size_t size = elem.size();
    s.write( (char*)&size, sizeof(size) );
    for( int i = 0; i < size; i++ )
        elem(i).Write(s);
    return s;
} 
```

对于您的元素：

```
ofstream& Element::Write( ofstream& s )
{
    // Serialize pathName
    size_t strsize = pathName.size();
    s.write( (char*)&strsize, sizeof(strsize) );
    s.write( pathName.c_str(), strsize );

    // Serialize other stuff
    s.write( (char*)&offsitePtr, sizeof(offsitePtr) );
    s.write( (char*)&subPage, sizeof(subPage) );
} 
```

当你阅读时，你也会做类似的事情。将让您解决=）请注意，在每种情况下，您都在编写大小，然后是数据。当您阅读时，您会阅读大小，然后在将内容读入之前调整结构的大小。

哦，确保以二进制模式打开文件流。

# .net - 如何使用此 RegEx 删除空格

> ID：13079975
> 
> 赞同：1
> 
> 时间：2012-10-26T02:29:36.800
> 
> 标签：.net, regex, match, removing-whitespace

我的输入是

```
Engineering | AB7407 | 007412665 | Jackie Browne | Drawing for Construction 
```

正则表达式是

```
(?<=^(?:[^|]+ \| ){2})[^|]+ 
```

我正在使用上面`RegEx`的方法来提取 007412665。它可以工作，但是它会在值之前和之后带来空格。

我试过`/s`了，但它没有删除空格。还有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T03:27:38.793

利用您当前的正则表达式，您只需进行少量修改。

而不是这个：

```
(?<=^(?:[^|]+ \| ){2})[^|]+ 
```

使用这个：

```
(?<=^(?:[^|]+\| ){2})[^| ]+ 
```

这是测试它的正则表达式英雄：[http ://regexhero.net/tester/?id=92183ab8-4fa4-4d9a-bd7b-278c11a77bd1](http://regexhero.net/tester/?id=92183ab8-4fa4-4d9a-bd7b-278c11a77bd1)

# visual-studio-2010 - VS2010/Silverlight 设计师未处理的异常

> ID：13079984
> 
> 赞同：0
> 
> 时间：2012-10-26T02:30:48.923
> 
> 标签：visual-studio-2010, silverlight, designer

我安装了 VS2010 10.0.30319.1 RTMRel 和 Silverlight 4。

让我明确一点，我从事过几个项目，没有任何设计师问题。

我不记得曾经使用过 VS 或 Silverlight 4，但是今天当我打开一个项目并尝试调整我的 Web 应用程序的 UI 时，设计器无法加载。我创建了一个新项目，同样的事情发生了。下面是例外。任何帮助将不胜感激。

```
System.NullReferenceException
Object reference not set to an instance of an object.
   at Microsoft.Windows.Design.Platform.SilverlightMetadataContext.SilverlightXamlExtensionImplementations.<GetXmlNamespaceCompatibilityMappings>d__8.MoveNext()
   at MS.Internal.Design.Metadata.ReflectionProjectNode.BuildSubsumption()
   at MS.Internal.Design.Metadata.ReflectionProjectNode.SubsumingNamespace(Identifier identifier)
   at MS.Internal.Design.Markup.XmlElement.BuildScope(PrefixScope parentScope, IParseContext context)
   at MS.Internal.Design.Markup.XmlElement.ConvertToXaml(XamlElement parent, PrefixScope parentScope, IParseContext context, IMarkupSourceProvider provider)
   at MS.Internal.Design.DocumentModel.DocumentTrees.Markup.XamlSourceDocument.FullParse(Boolean convertToXamlWithErrors)
   at MS.Internal.Design.DocumentModel.DocumentTrees.Markup.XamlSourceDocument.get_RootItem()
   at Microsoft.Windows.Design.DocumentModel.Trees.ModifiableDocumentTree.get_ModifiableRootItem()
   at Microsoft.Windows.Design.DocumentModel.MarkupDocumentManagerBase.get_LoadState()
   at MS.Internal.Host.PersistenceSubsystem.Load()
   at MS.Internal.Host.Designer.Load()
   at MS.Internal.Designer.VSDesigner.Load()
   at MS.Internal.Designer.VSIsolatedDesigner.VSIsolatedView.Load()
   at MS.Internal.Designer.VSIsolatedDesigner.VSIsolatedDesignerFactory.Load(IsolatedView view)
   at MS.Internal.Host.Isolation.IsolatedDesigner.BootstrapProxy.LoadDesigner(IsolatedDesignerFactory factory, IsolatedView view)
   at MS.Internal.Host.Isolation.IsolatedDesigner.BootstrapProxy.LoadDesigner(IsolatedDesignerFactory factory, IsolatedView view)
   at MS.Internal.Host.Isolation.IsolatedDesigner.Load()
   at MS.Internal.Designer.DesignerPane.LoadDesignerView() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T08:46:16.867

当这种情况发生在我身上时，这意味着我破坏了代码中的某些内容。设计器本质上是在运行您的 Silverlight 代码以生成预览 - 所以这将是首先要调查的事情。

其次 - 当您查看任何 Silverlight Xaml 时，是否会发生这种情况？如果创建一个新的 Silverlight 项目，你还会遇到同样的问题吗？如果是这种情况，那么您已经以某种方式搞砸了您的安装。

我在 Silverlight 5 和 VS2010 设计器上度过了许多快乐时光，所以我认为那里没有根本问题。

# ios - 地图上显示海洋（蓝屏）以请求 userLocation

> ID：13079986
> 
> 赞同：0
> 
> 时间：2012-10-26T02:31:15.703
> 
> 标签：ios, mkmapview

大家好：这对我来说仍然是一个谜。在我按下“查找我”按钮后，我的应用程序会加载一个蓝屏（海洋），其中包含以下内容：

```
-(IBAction)findMe
{
  self.mapView.showsUserLocation = YES;
  [mapView setCenterCoordinate:mapView.userLocation.coordinate animated:YES];
} 
```

我对这个错误的补救措施的理解是你可能想要 mapView.showsUserLocation = YES; 在 ViewWillAppear 部分，但我愿意接受反馈。我的问题是，如何通过单击我的按钮停止加载蓝屏死机？？？:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T13:36:35.257

啊，我把你引错了（看看我在那里做了什么？地图？转向？嗯？？？）。请参阅此问题的答案：[根据用户位置居中地图](https://stackoverflow.com/questions/2107142/centering-map-against-users-location)- 问题的结尾也进行了更新，以包含指向更多有用信息的链接，以响应位置更新。我认为这应该“让你到达那里”（他又做了一次！）。

# android - 在一台计算机上向 Android 项目添加了一个文件，SVN 是否更新，现在在第二台计算机上的 Eclipse 中显示？

> ID：13079987
> 
> 赞同：1
> 
> 时间：2012-10-26T02:31:21.043
> 
> 标签：android, eclipse, tortoisesvn

我在 Eclipse 中的一台计算机上为一个 android 项目创建了一个 xml 文件，然后做了一个 SVN 提交来上传它。然后我在我的第二台计算机上进行了更新（以前在项目资源管理器中根本没有显示任何内容，但我通过在同步中添加 .project 和 .classpath 来解决这个问题）但新文件没有出现在 Eclipse 中。它肯定在文件夹中，但没有显示。

我关闭了所有的过滤器，仍然没有显示。我尝试导入文件，但不允许我导入任何内容。

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T02:48:33.317

这可能是这里发生的几件事之一。

如果您从命令行进行了 SVN 更新，请确保该文件位于您期望从命令行以及检查 eclipse 之前的目录中。如果文件确实存在，那么您可能需要在 Eclipse 中对项目进行“刷新”（在 Package Explorer 中右键单击项目，然后单击“刷新”）。如果您这样做并且它没有显示，请在 eclipse 中检查您的项目属性，并确保项目的路径与您正在执行 SVN 命令行工作的路径相匹配。

如果您在 Eclipse 中使用 subclipse 之类的插件执行 SVN 命令，我建议您在提交和更新之前执行 Team > Synchronize，这样您就可以在项目或存储库受到影响之前查看发生了什么。如果您尝试该命令并显示您的项目与存储库同步，请检查存储库以确保该文件实际上已提交在那里。也许从计算机 1 进行提交时出现问题。

# xslt - 如何显示“新的”子页面数量 Umbraco XSLT

> ID：13079990
> 
> 赞同：0
> 
> 时间：2012-10-26T02:32:16.017
> 
> 标签：xslt, umbraco

我有两段单独的代码要合并。

第一个计算子页面的数量并显示一个数字：

例如 8 个子页面（或子页面，如果只有 1 个页面）

```
<xsl:choose>
<xsl:when test="count(child::DocTypeAlias) &gt; 1">
    <p><xsl:value-of select="count(child::DocTypeAlias)"/> child pages</p>
</xsl:when>
<xsl:otherwise>
    <p><xsl:value-of select="count(child::DocTypeAlias)"/> child page</p>
</xsl:otherwise> 
```

该代码检测页面是否是在过去 30 天内创建的：

```
<xsl:variable name="datediff" select="umbraco.library:DateDiff(umbraco.library:ShortDate(umbraco.library:CurrentDate()), umbraco.library:ShortDate(@createDate), 'm')" />
    <xsl:if test="$datediff &lt; (1440 * 30)">
        <p>New</p>
    </xsl:if> 
```

我想将它们组合起来，这样我就可以获得子页面的数量和“新”页面的数量。

例如 8 个子页面 - 2 个新页面

我尝试了以下方法，但没有返回正确的值：

```
<xsl:variable name="datediff" select="umbraco.library:DateDiff(umbraco.library:ShortDate(umbraco.library:CurrentDate()), umbraco.library:ShortDate(@createDate), 'm')" />
    <xsl:choose>
        <xsl:when test="$datediff &lt; (1440 * 30) and count(child::DocTypeAlias) &gt; 1">
            <p><xsl:value-of select="$datediff &lt; (1440 * 30) and count(child::DocTypeAlias)"/> new pages</p>
        </xsl:when>
        <xsl:otherwise>
            <p><xsl:value-of select="$datediff &lt; (1440 * 30) and count(child::DocTypeAlias)"/> new page</p>
        </xsl:otherwise>
    </xsl:choose> 
```

它返回：“真正的新页面”我不知道如何让它显示数字（2 个新页面）。

任何人都可以帮忙吗？干杯，合资企业

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T15:13:13.563

仔细查看您为段落指定的内容：

```
<p>
  <xsl:value-of select="
    $datediff &lt; (1440 * 30) 
    and 
    count(child::DocTypeAlias)"/> 
  new pages
</p> 
```

你有`and`一个布尔值作为左参数，一个整数作为右参数。设身处地为处理器着想：它看起来不是很像您要求它计算布尔值吗？

由于此表达式包含在`when`已经测试日期差异的元素中，因此您（几乎可以肯定）不需要重复 $datediff 与 43200 的比较。（我说“几乎可以肯定”，因为我认为我不明白您的应用程序的逻辑详细，所以我可能是错的。）我怀疑你想说的是：

```
<p>
  <xsl:value-of select="count(child::DocTypeAlias)"/> 
  new pages
</p> 
```

您需要在`otherwise`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T00:49:01.447

非常感谢克里斯蒂安·施泰因迈尔：

```
 <!-- The date calculation stuff -->
<xsl:variable name="today" select="umb:CurrentDate()" />
<xsl:variable name="oneMonthAgo" select="umb:DateAdd($today, 'm', -1)" />

<!-- Grab the nodes to look at -->
<xsl:variable name="nodes" select="$currentPage/DocTypeAlias" />

<!-- Pages created within the last 30 days -->
<xsl:variable name="newPages" select="$nodes[umb:DateGreaterThanOrEqual(@createDate, $oneMonthAgo)]" />
<xsl:template match="/">
  <xsl:choose>
    <xsl:when test="count($newPages)">
      <p> <xsl:value-of select="count($newPages)" /> <xsl:text> New Page</xsl:text>
        <xsl:if test="count($newPages) &gt; 1">s</xsl:if>
      </p>
    </xsl:when>
    <xsl:otherwise>
    </xsl:otherwise>
  </xsl:choose>
</xsl:template> 
```

# java - 我可以运行使用 32 位 jdk 和 64 位 jre 开发的 java 程序吗？应用程序使用 32 位非 java 系统库

> ID：13079991
> 
> 赞同：8
> 
> 时间：2012-10-26T02:33:11.183
> 
> 标签：java, 64-bit, jpcap

我正在 64 位 Windows 7 安装上使用 64 位 eclipse 开发一个 java 应用程序。我被迫使用 32 位 JDK(1.7.0) 因为应用程序使用[Jpcap](http://netresearch.ics.uci.edu/kfujii/Jpcap/doc/)，它不会用 64 位 JDK 编译。

应用程序必须是跨 32 位和 64 位系统的跨平台，这通常是使用任何 JDK 开发的 java 应用程序的情况。但我认为情况稍微复杂一些，因为除了 jar 之外，Jpcap 还安装了系统库（.dll/.so），这些库又是 WinPcap 和 libpcap 的包装器。因此，Jpcap 调用是对这些库的一系列嵌套调用。

这是问题：

应用程序可执行文件可以在 64 位平台上运行吗？假设用户将安装所需的 x86 库（jpcap.dll/.so、WinPcap、libpcap），因为 Windows 库不存在 64 位版本。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-26T02:59:00.317

> 应用程序可执行文件可以在 64 位平台上运行吗？假设用户将安装所需的 x86 库（jpcap.dll/.so、WinPcap、libpcap），因为 Windows 库不存在 64 位版本。

您将需要使用 32 位 JRE 来运行应用程序。64 位 Hotspot JRE 不能使用 32 位本机库。

但另一方面，您使用 64 位或 32 位 Eclipse 进行开发和构建并不重要……只要您将 Eclipse 配置为启动 32 位 JRE 以进行任何涉及本机库的测试。

需要明确的是，您可以在 64 位操作系统平台上运行 32 位 JRE，但不能反过来。

* * *

**更新**- 显然 jpcap.dll*可以*为 64 位 Windows 构建 - 请参阅此帖子：[https ://groups.google.com/forum/?fromgroups=#!topic/jpcap/-vxZv0eAcp4](https://groups.google.com/forum/?fromgroups=#!topic/jpcap/-vxZv0eAcp4)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T02:47:46.177

从记忆中（而且有点模糊）我不会。

本机库（至少在 windows 下）需要在与 JVM 相同的比特蜂鸣声中执行。

因此，为了让您能够加载 x32 位库，您应该在 x32 位进程（或 x32 位 JVM）中运行

# iphone - Obj C在sem-singleton和child之间通过两种方式进行通信

> ID：13079992
> 
> 赞同：1
> 
> 时间：2012-10-26T02:33:18.720
> 
> 标签：iphone, ios, cocos2d-iphone

我的问题是关于从一个班级向其孩子传达两个方向。

我有一个带有子 GameObject CCNode 的 GameLayer CCLayer。GameLayer 是一个半单例共享层。我需要在 GameLayer 的标题中导入 GameObject.h 才能初始化 GameObject。我现在正试图与游戏玩家沟通，但我被卡住了。代码在问题之前都有效。

```
static GameLevel1Layer* sharedGameLayer;

+(GameLevel1Layer*) sharedGameLayer
{
    NSAssert(sharedGameLayer != nil, @"shared game layer not there yet");
    return sharedGameLayer;
} 
```

在初始化时，我初始化游戏对象

```
-(id) init
{
    if ((self = [super init]))
    {
        sharedGameLayer = self;

    GameObject1* gameObject1 = [GameObject1 gameObject1];
    fish1.position = CGPointMake(0, 0);
    fish1.tag = kFish1TagValue;
    [self addChild:gameObject1 z:10];
    }
return self;
} 
```

在游戏对象中（这是一个节点，但基本上是一个 ccsprite）

```
+(id) gameObject1{
    return [[self alloc] initWithFish1Image];
    }

-(id) initWithFish1Image {
    if ((self = [super init])) {

        CCSpriteFrameCache* frameCache = [CCSpriteFrameCache sharedSpriteFrameCache];
        [frameCache addSpriteFramesWithFile:@"fish1atlas.plist"];

        sceneSpriteBatchNode = [CCSpriteBatchNode batchNodeWithFile:@"fish1atlas.png"]; 
        [self addChild:sceneSpriteBatchNode z:0]; 

        fish1Sprite = [[CCSprite alloc] initWithSpriteFrameName:@"fish1_normal_1.png"];
        fish1Sprite.tag = kFish1SpriteTag;
        fish1Sprite.rotation = -30;
        [self addChild:fish1Sprite];

        }
    return self;
    } 
```

我的问题是，我试图从 GameObject 中向 GameLayer1 发送消息。如果我包含 GameLayer1.h，则参数会变为循环，并且会出现未声明的标识符混淆。如果我只是尝试：[GameLayer1 sharedGameLayer] methodImTrying]; 它没有重新计算，我得到一个未声明的标识符。

我尝试添加：@class GameLayer1; 当我向 GameLayer 发送消息时，“类消息是前向声明”失败。

[self.parent 方法]; 和 [超级方法] 都失败了。

我认为使用共享层将允许我访问父节点，而无需在游戏对象中导入游戏层的标头。我知道这是objective-c的一个基本问题，任何帮助将不胜感激。

更新：

如果我将 GameLevel1Layer.h 导入 GameObject 的标头并将 @class GameObject 添加到 GameLayer，我可以调用 [GameLevel1Layer sharedGameLayer] 方法]；我想知道我这样做是否完全错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T19:11:40.803

避免此问题的最简单方法是使用前向声明。

在 GameObject1 的 .h 文件中只需声明

```
 @class GameLevel1Layer 
```

在 GameObject1.m 中包括 GameLevel1Layer.h

在 GameLevel1Layer 的 .h 文件中声明

```
 @class  GameObject1 
```

并在 GameLevel1Layer.m 中包含 GameObject1.h

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T04:31:19.550

您可以使用`NSNotificationCenter`来回发送和接收消息。

在此处查看这篇文章，了解如何发送和接收消息：
[通过 Objective-C 中的 NSNotificationCenter 发送和接收消息？](https://stackoverflow.com/questions/2191594/how-to-send-and-receive-message-through-nsnotificationcenter-in-objective-c)

另外，请查看 Apple Developer Library 中的参考资料：http: [//developer.apple.com/library/ios/#DOCUMENTATION/Cocoa/Reference/Foundation/Classes/NSNotificationCenter_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#DOCUMENTATION/Cocoa/Reference/Foundation/Classes/NSNotificationCenter_Class/Reference/Reference.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T19:05:16.010

可以与代表进行回传。创建一个@protocol 并由您的 GameLayer 支持它。创建 GameObject 时，将 GameLayer 设置为委托。当您需要向 GameLayer 发送内容时，只需调用

```
[delegate someMethod:withObject]; 
```

# c++ - 用字符串回显用户输入

> ID：13079994
> 
> 赞同：0
> 
> 时间：2012-10-26T02:33:24.570
> 
> 标签：c++, codeblocks

我的程序应该显示请求形状的名称。我不习惯使用字符串，那么我将如何回显用户输入（C 显示锥体等）？我猜测某种 if 语句，但不知道如何编写它。

样本：

```
Hello.  Welcome to the shape volume  computing program.
Which shape do  you have?  (C for cone, U for   cube,   Y, for  cylinder P for pyramid, S   for sphere, or Q    to quit)
Enter   shape:  U
okay,   cube.   Please enter the length of a side:  3
okay,   the length of the side = 3
the volume  = 27
enter   shape: C
okay,   cone.   Please enter the radius of the  base:   2
please enter the height:    3
okay,   the radius =  2 and the height  = 3
the volume  = 12.56
enter   shape: Q
bye! 
```

代码：

```
int main()
{
    string C,U,Y,P,S;
    C= "cone";
    U= "cube";
    Y= "cylinder";
    P= "pyramid";
    S= "sphere";
    int Q= -1;

    cout<< " Enter C for cone, U for cube, Y for cylinder, P for pyramid, S for sphere or Q
    to quit. " <<endl;
    cin>> C,U,Y,P,S,Q;

    if(Q= -1)
        cout<< " Goodbye! " <<endl;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T02:42:05.477

该声明

```
cin>> C,U,Y,P,S,Q; 
```

方法

```
(cin>> C),U,Y,P,S,Q; 
```

因为**逗号运算符**在所有运算符中的优先级最低。

因此，它将一个字符输入到`C`中，然后（这是逗号运算符所做的）计算`U`, `Y`,和`P`,将后者的值作为表达式结果，然后将其丢弃。`S``Q`

这可能*不是*你想象的那样。

要完成这项工作，您可以

*   使用单个输入变量，例如，称为`line`.

*   使用标题中的`getline`函数`<string>`输入一行。

*   检查输入的那一行是`"U"`，在这种情况下做 U 的事情，或者其他一些字母，在这种情况下做其他的事情。该`if`声明对此有好处。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T02:42:33.290

这段代码是错误的。

```
cin >>  C,U,Y,P,S,Q; 
```

这将尝试将用户键入的任何内容写入 C 指向的内存中。其他以逗号分隔的部分是没有效果的单独语句。

您要做的是将用户的输入写入一个新变量。

```
char choice;
cin >> choice; 
```

然后看看那是什么并做出相应的回应。

```
if ('C' == choice)
{
   // print output
}
else if ('U' == choice)
{
   // print output 
```

等等

# iphone - 从随机数显示图像

> ID：13079995
> 
> 赞同：3
> 
> 时间：2012-10-26T02:33:44.473
> 
> 标签：iphone, image, coronasdk, displayobject

我正在制作一个应用程序（在电晕中），它将显示文件夹中的图像。文件夹里有50张图片，名字都是“number.jpg”（1到50）

我目前正在使用这个来获取号码

```
--populating table with 50 numbers (1-50)
for i =1,50 do
numbers[i] = i 
end

--loop to generate 1 random number
for i = 1, 1 do
-- select random position from the table
local pos = math.random(1,#numbers)
    local num = numbers[pos]
    print(num)
    --remove the number from table once it is selected
table.remove (numbers,table.indexOf(numbers, num))
end 
```

我怎样才能制作这个号码，取出编号的图像？没有使用电晕，但在想像

```
myImage = display.newImage("/folder/", num, ".jpg") 
```

但我知道什么？

希望你能理解我的问题。

——埃里克。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T10:27:53.943

你不远了，只需使用连接运算符“..”，如下所示：

```
myImage = display.newImage("folder/" .. num .. ".jpg") 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-10-26T04:16:41.203

您可以通过以下方式生成图像：

```
UILabel *numberLabel = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, 50, 50)];
numberLabel.text = @"[Your random number]";

// save label as image
UIGraphicsBeginImageContext([numberLabel bounds].size);
[[numberLabel layer] renderInContext:UIGraphicsGetCurrentContext()];
UIImage *outputImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

然后你可以使用 outputImage。

# android - 使用android将字符串发送到蓝牙串口

> ID：13079997
> 
> 赞同：1
> 
> 时间：2012-10-26T02:34:17.673
> 
> 标签：android, bluetooth, serial-port, android-networking

我需要向桌面应用程序的蓝牙串行端口发送一个字符串。android设备应始终连接到PC，每当手机接到电话时，应使用蓝牙将电话号码发送到PC。我怎样才能使用android完成这项工作？

# android - 在android中刷新webview

> ID：13079999
> 
> 赞同：0
> 
> 时间：2012-10-26T02:35:07.157
> 
> 标签：android, webview, meta

我的 android 代码中有标准的 webview。

```
@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    this.getWindow().requestFeature(Window.FEATURE_PROGRESS);
    setContentView(R.layout.main);
    WebView webView = (WebView) findViewById(R.id.webview);
    webView.getSettings().setJavaScriptEnabled(true);
} 
```

我没有任何关于重新加载/刷新的代码。但我在 webview 正在显示的页面中有以下代码。

```
<META http-equiv="REFRESH" content="30"> 
```

我知道非常古老的学校，但它完成了我现在需要的工作。

但是，webview 并没有完全尊重那个元标记，它与 webkit 无关，因为我已经成功地尝试了很多浏览器。

webview 会根据需要刷新应用程序，而不是按照指示每 30 秒刷新一次。

如何让 webview 每 30 秒或更快刷新一次，没有问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T06:26:22.687

使用 CountDownTimer 在 30 秒后一次又一次地重新加载 URL

```
new CountDownTimer(365 * 24 * 60 * 60, 30000) {

 public void onTick(long millisUntilFinished) {
   ACTIVITY_NAME.this.mWebView.loadUrl("http://www.example.com");
 }

 public void onFinish() {
    //Done 
 }
}.start(); 
```