# StackOverflow 问答 14953000-14953999

# racket - 球拍 at-exp 包括大括号

> ID：14953001
> 
> 赞同：3
> 
> 时间：2013-02-19T08:31:30.110
> 
> 标签：racket

如何使用 at-exp 包含自爆原始字符串：

```
package foo

}

import ( 
```

我这样写，但不能包含“}”字符：

```
#lang at-exp racket/base

    (define code @S{
        package foo

        }

        import (
    } 
```

如何在原始部分中包含“{}”等特殊字符。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T09:19:38.753

用于`@S|{...}|`此：由于结束部分是`}|`，plain `}`s 不会是特殊的。此外，请记住`|@`不要仅`@`用于嵌套表单。如果您也想使用`}|`s ，因此需要另一个不同的引用，您可以在两者之间添加更多内容，如`@S|==={...}===|`. 有关详细信息，请参阅[文档页面](http://docs.racket-lang.org/scribble/reader.html)（查找`|{`s，并参阅[第 2.4.1 节](http://docs.racket-lang.org/scribble/reader.html#%28part._alt-body-syntax%29)）。

As for what you've found: this is not the same. What you're doing there is a nested `"{"` string, which you can use for each unbalanced character. But that is much less convenient than the above alternative quotation syntax.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T08:51:04.320

哦，对不起，我发现使用 @|"{"| 没关系。

# sql - SQL Server：按日期显示列状态

> ID：14953004
> 
> 赞同：1
> 
> 时间：2013-02-19T08:31:40.960
> 
> 标签：sql, sql-server

这是我的数据库架构：

[http://sqlfiddle.com/#!3/bbaea/3](http://sqlfiddle.com/#!3/bbaea/3)

唯一重要的列是`CreationTime`（作为时间戳）和`Result`.

`Result`当前可以是 0、1、2 或 3

我的结果应该是这样的：

```
Year, Month, Day | Entries with Result 0 | With 1 | With 2 | .. 
```

我是 SQL Server 本身的新手，我不知道如何解决这个问题。我尝试了一些子选择（比如在我的小提琴中），但它们没有按预期工作。我想这是因为我必须加入子选择，但是如何？我也想知道如何做到这一点的最佳方法..

一些帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T08:45:28.023

你可以试试这个

```
SELECT YEAR(CreationTime) AS y, MONTH(CreationTime) AS m, DAY(CreationTime) AS d,
       COUNT(CASE WHEN Result = 0 THEN 1 END) AS WITH0,
       COUNT(CASE WHEN Result = 1 THEN 1 END) AS WITH1,
       COUNT(CASE WHEN Result = 2 THEN 1 END) AS WITH2          
FROM History
GROUP BY YEAR(CreationTime), MONTH(CreationTime), DAY(CreationTime) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T08:48:10.393

您不需要联合多个查询。您可以使用 case 语句：

```
SELECT
    DAY(CreationTime) AS d, MONTH(CreationTime) AS m, YEAR(CreationTime) AS y
    ,count(CASE WHEN RESULT = 0 THEN 1 ELSE NULL END) AS R0
    ,count(CASE WHEN RESULT = 1 THEN 1 ELSE NULL END) AS R1
    ,count(CASE WHEN RESULT = 2 THEN 1 ELSE NULL END) AS R2
FROM History
GROUP BY DAY(CreationTime), MONTH(CreationTime), YEAR(CreationTime)

SELECT * FROM History; 
```

回答[SQL Fiddle](http://sqlfiddle.com/#!3/dc23a/8/0)。

# javascript - 您可以按上下文过滤现有的 jquery 对象吗？

> ID：14953009
> 
> 赞同：0
> 
> 时间：2013-02-19T08:32:17.817
> 
> 标签：javascript, jquery

我在 jquery 对象中缓存了一些元素。我现在想按上下文过滤它们。我可以这样做还是需要在使用第二个上下文参数的同时使用我的选择器创建另一个 jquery 对象？

这是一个例子：

```
var cached = $('.elements'); 
```

稍后我想通过上下文过滤这个数组而不创建另一个选择器。如果我只是创建另一个选择器来做我想做的事情，它看起来像这样：

```
//in event listener
var parent = $(this).closest('.parent');
$('.elements', parent).removeClass('class'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T09:32:42.693

我不完全理解您的要求，如果我没有弄错，您可以使用`.not`（[http://api.jquery.com/not/](http://api.jquery.com/not/)）

[http://jsfiddle.net/kcy3f/](http://jsfiddle.net/kcy3f/)

```
<span class="a">a1</span>
<span class="a">a2</span>
<span class="b">b3</span>
<span class="b">b4</span>

<script>
var all = $('span');
all.css("background", "#F99");
all = all.not(".a"); // remove class 'a' element
all.css("background", "#9F9");
</script> 
```

# mysql - NOT IN 在我的查询中不起作用

> ID：14953010
> 
> 赞同：1
> 
> 时间：2013-02-19T08:32:18.750
> 
> 标签：mysql, sql

我有 2 个表`data`，`page`在`data`表中我有一些记录，一些`data`记录 id 将存储在`page`表中。

现在我想要选择`id`并`title`形成`data`不在桌子上的`page`表格。所以我写了这个查询：

```
SELECT d.id,d.title
FROM data AS d, page AS p
WHERE d.id NOT IN (p.data_id)
ORDER BY d.title ASC 
```

此查询将起作用，但当`page`表为空时，此查询无法恢复记录！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T08:33:34.023

采用`LEFT JOIN`

```
SELECT  a.*
FROM    data a
        LEFT JOIN page b
            ON a.ID = b.data_id
WHERE   b.data_id IS NULL
ORDER   BY a.title ASC 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/74fcd/1)
*   [SQLFiddle Demo（*空页表*）](http://www.sqlfiddle.com/#!2/4dbde/1)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T08:36:43.840

这是带有子查询的，但没有连接：

```
SELECT id, title
FROM data
WHERE id NOT IN (SELECT data_id FROM page)
ORDER BY title ASC 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T09:22:12.197

NOT IN 会给你你想要的，但取决于你的数据库系统（和索引的类型），这不是最好的（最快的）解决方案。更多的时候 not EXISTS 会更快。但是您的里程可能会有所不同。

试试看：

```
SELECT id, title FROM data
WHERE NOT EXISTS (SELECT * FROM page WHERE page.data_id = data.id)
ORDER BY title ASC 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T08:36:50.667

我认为您正在尝试确定什么`data`没有`page`：

```
SELECT d.id, d.title
FROM data d
WHERE d.id NOT IN (
    SELECT data_id FROM page
)
ORDER BY d.title ASC; 
```

# java - 退货声明不起作用

> ID：14953011
> 
> 赞同：2
> 
> 时间：2013-02-19T08:32:20.523
> 
> 标签：java

有人可以帮我解决我的问题。我有一个函数可以检查文件是否存在于特定路径中。该函数检查文件名是否匹配，路径是否也匹配。（具有特定名称的文件可能存在于多个位置）。请在下面找到我的代码。

memberPath 是一个包含相对路径的静态变量。file_Path 是一个静态变量，在找到匹配项时会更新。

我的问题是该函数找到了匹配项，但它脱离了 for 循环来返回语句，但又回到了 for 循环。有人可以帮我修复我的代码，以便一旦找到匹配项，它就会返回到调用位置。

```
public static String traverse(String path, String filename) {
        String filePath = null;
        File root = new File(path);
        File[] list = root.listFiles();

        for (File f : list) {
            if (f.isDirectory()) {
                traverse(f.getAbsolutePath(), filename);
            } else if (f.getName().equalsIgnoreCase(filename) && f.getAbsolutePath().endsWith(memberPath)) {
                filePath = f.getAbsolutePath();
                file_Path = filePath;
                break ;
                }
        }
        return filePath;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-19T08:36:43.977

添加 ：

```
return traverse(f.getAbsolutePath(), filename); 
```

返回您通过此调用获得的值。

正如所指出的 - 您可以返回值而不是中断。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-19T08:39:43.670

递归的工作方式是函数调用自身。因此，当您的函数`return`s 时，它会返回 for 循环，因为它可能是外部函数（调用它的函数）从下面的行调用它

```
if (f.isDirectory()) {
            traverse(f.getAbsolutePath(), filename); 
```

既然是这种情况，您需要在此处添加返回，正如 baraky 解释的那样，否则您将失去内部函数派生的答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T09:13:52.433

正如 baraky、Karthik 和 JanDvorak 所指出的，更新后的代码是：

```
public String traverse(String path, String filename) {
        String filePath = null;
        File root = new File(path);
        File[] list = root.listFiles();

        for (File f : list) {
            if (f.isDirectory()) {
                return traverse(f.getAbsolutePath(), filename);
            } else if (f.getName().equalsIgnoreCase(filename)
                    && f.getAbsolutePath().endsWith(memberPath)) {
                filePath = f.getAbsolutePath();
                file_Path = filePath;
                return filePath;

                }
        }       
        return filePath;
    } 
```

多谢你们！！

# delphi - 如何在 UIB 中使用 Firebird 事务隔离级别？

> ID：14953013
> 
> 赞同：5
> 
> 时间：2013-02-19T08:32:26.387
> 
> 标签：delphi, firebird, uib

根据[文档](http://www.firebirdsql.org/manual/isql-transactions.html)，Firebird 中有四个事务隔离级别。[但是，据我所知， uib](http://sourceforge.net/projects/uib/)库（TUIBTransaction）中没有明确的隔离级别选择，而是一堆事务选项。我应该如何使用这些？某处有文档吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-07T20:09:55.430

这些选项将改变隔离级别。正如@Arioch 在他的紧凑评论中所说，您可以更改隔离级别，从而更改`Options`type的属性`TTransParams`。这是一组`TTransParam`如下。

```
 // Transaction parameters
TTransParam = (
{ prevents a transaction from accessing tables if they are written to by
other transactions.}
tpConsistency,
{ allows concurrent transactions to read and write shared data. }
tpConcurrency,
{ Concurrent, shared access of a specified table among all transactions. }
{$IFNDEF FB_21UP}
tpShared,
{ Concurrent, restricted access of a specified table. }
tpProtected,
tpExclusive,
{$ENDIF}
{ Specifies that the transaction is to wait until the conflicting resource
is released before retrying an operation [Default]. }
tpWait,
{ Specifies that the transaction is not to wait for the resource to be
released, but instead, should return an update conflict error immediately. }
tpNowait,
{ Read-only access mode that allows a transaction only to select data from tables. }
tpRead,
{ Read-write access mode of that allows a transaction to select, insert,
update, and delete table data [Default]. }
tpWrite,
{ Read-only access of a specified table. Use in conjunction with tpShared,
tpProtected, and tpExclusive to establish the lock option. }
tpLockRead,
{ Read-write access of a specified table. Use in conjunction with tpShared,
tpProtected, and tpExclusive to establish the lock option [Default]. }
tpLockWrite,
tpVerbTime,
tpCommitTime,
tpIgnoreLimbo,
{ Unlike a concurrency transaction, a read committed transaction sees changes
made and committed by transactions that were active after this transaction started. }
tpReadCommitted,
tpAutoCommit,
{ Enables an tpReadCommitted transaction to read only the latest committed
version of a record. }
tpRecVersion,
tpNoRecVersion,
tpRestartRequests,
tpNoAutoUndo
{$IFDEF FB20_UP}
,tpLockTimeout
{$ENDIF}
); 
```

自从 Interbase 6.0 代码“开源”以来，API 的文档并没有太大变化。因此，如果您想对其中任何一个进行解释，您正在查找的文档在 Interbase 手册中。

你可以在这里得到它们[https://www.firebirdsql.org/en/reference-manuals/](https://www.firebirdsql.org/en/reference-manuals/)

下面我在此[链接](http://fb-list-archive.s3-website-eu-west-1.amazonaws.com/firebird-support/2012/2/117101.html)中引用 Ann Harrison来快速解释所使用的常用选项：

> isc_tpb_consistency 可能会导致性能问题，因为它会锁定表并可能排除并发访问。isc_tpb_concurrency 是 Firebird 的设计中心。阅读器不会阻塞写入器，写入器不会阻塞读取器，并且两者都能获得一致的数据库视图。
> 
> isc_tpb_read_committed + isc_tpb_rec_version + isc_tbp_read_only 给出不一致的结果，并且偶尔会在 blob 读取时产生错误*，但与其他模式不同，它不会阻止垃圾收集，因此对于无需获得“正确”的长时间运行的读取事务来说，这是一个很好的模式“ 回答。
> 
> isc_tpb_read_committeed + isc_tpb_rec_version 与 isc_tpb_concurrency 具有相同的性能，但得到的结果不一致 - 在同一事务中运行两次相同的查询可能会返回不同的行。
> 
> isc_tpb_read_committed + isc_tpb_no_rec_version + isc_tpb_wait 比其他模式慢，因为它将等待提交更改而不是读取最新提交的版本。与 isc_tpb_read_committed 的所有变体一样，它不会产生一致的结果。
> 
> isc_tpb_read_committed + isc_tpb_no_rec_version + isc_tpb_no_wait 会产生很多死锁错误，因为每次阅读器遇到正在更改的记录时，它都会返回错误。

注意：我希望您能看到，除了参数名称不同之外，如果您删除“isc_tpb_”部分并不难理解。

# cakephp - CakePHP 2.3：在一个页面中同时保存多个表格中的多个表单

> ID：14953015
> 
> 赞同：0
> 
> 时间：2013-02-19T08:32:30.897
> 
> 标签：cakephp

我正在尝试使用 CakePHP 2.3 建立一个商业提案系统。

它有 5 个相关联的表（请参阅下面的详细信息）。该系统将有 1 页，其中每个表格有 5 个表格。（详见下文）。

表格 1：表格提案
表格 2：表格客户 FK 提案
_id 表格 3：表格产品 FK客户 ID
表格 4：表格规范 FK 产品 ID（产品）
表格 5：表格附录 FK 产品 ID（产品）

在哪里：

建议**有一个**客户。
----------v---------
客户**beongsTo**提案并且有**许多**产品。
----------v---------
产品**属于**客户，并且有许多规格和附录**。**
----------v------------
规格**属于**产品。
附录**属于**产品。

表格 4 可以有多行，因此它位于 foreach 循环内以生成更多输入。与表格 5 相同。因为 1 个产品可以有多个规格和附录。

我承认，这很棘手:)

这是我最终选择的解决方案，但也许有更好的解决方案。例如，我可以制作一个多步骤的表格，但似乎很难到位。无论如何，我愿意接受建议。

同时，我确信我们可以完成这项工作，所以这里是详细信息。对于每个表，我都创建了一个模型并进行了适当的连接。在每个模型中，我都启用了可包含的行为：`public $actsAs = array('Containable');`.

现在这里是 ProposalsController.php：

```
function admin_edit($id=null){
        $this->loadModel('Proposal','Client','Product', 'Specification', 'Appendice');
        $this->Proposal->contain('Proposal','Client','Product', 'Specification', 'Appendice');

        if ($this->request->is('put') || $this->request->is('Post')) {
            $data = $this->request->data;
            if (!empty($data)) {
                // Use the following to avoid validation errors:
                // unset($this->Proposal->Client->validate['proposal_id']);
                // $this->Proposal->saveAssociated($data);
                // $this->Session->setFlash("Le contenu a bien été édité");
                // $this->redirect(array('action' => 'index', $data['Product']['id']));
                debug($data);
            }
        }
        elseif($id){
            $this->Proposal->id = $id;
            $this->request->data = $this->Proposal->read(null,$id);
        }
    } 
```

此编辑操作有很多错误，因为在这种情况下我不知道如何正确设置它。所以请原谅我，但我给你一个原始代码:)。我希望添加或编辑这个 admin_function，但同样，在这种情况下，我不知道如何处理它。

和视图 admin_edit.ctp ：

```
<hr/>
<h1>Proposition</h1>
<hr/>

<?php echo $this->Form->create('Product'); ?>

<?php echo $this->Form->input('Proposal.name', array('label' => "Nom de la proposition")); ?>
<?php echo $this->Form->input('Proposal.created', array('label' => "Date de création")); ?>
<?php echo $this->Form->input('Proposal.due', array('label' => "Date d'échéance")); ?>
<?php echo $this->Form->input('Proposal.content', array('label' => "Termes & conditions")); ?>

<hr/>
<h1>Client</h1>
<hr/>

<?php echo $this->Form->input('Client.name', array('label' => "Nom du client")); ?>
<?php echo $this->Form->input('Client.project', array('label' => "Nom du projet")); ?>
<?php echo $this->Form->input('Client.address', array('label' => "Adresse")); ?>
<?php echo $this->Form->input('Client.phone', array('label' => "Téléphone")); ?>
<?php echo $this->Form->input('Client.email', array('label' => "Email")); ?>
<?php echo $this->Form->hidden('Client.proposal_id'); ?>

<hr/>
<h1>Produit</h1>
<hr/>

<?php echo $this->Form->input('Product.0.name', array('label' => "Nom du produit")); ?>
<?php echo $this->Form->input('Product.0.reference', array('label' => "Référence")); ?>
<?php echo $this->Form->input('Product.0.image', array('label' => "Image")); ?>
<?php echo $this->Form->input('Product.0.pu', array('label' => "Prix Unitaire")); ?>
<?php echo $this->Form->input('Product.0.quantity', array('label' => "Quantité")); ?>
<?php echo $this->Form->input('Product.0.ce', array('label' => "CE")); ?>
<?php echo $this->Form->input('Product.0.nf', array('label' => "NF")); ?>
<?php echo $this->Form->input('Product.0.rohs', array('label' => "RoHS")); ?>
<?php echo $this->Form->hidden('Product.0.client_id'); ?>

<hr/>
<h1>Spécifications :</h1>
<hr/>

<?php
foreach (range(0,1) as $i):
    $a=$i+1;
    echo '<p>Spécification '.$a.'</p>';
    echo $this->Form->input('Specification.'.$i.'.name', array('label' => "Nom de la spécification"));
    echo $this->Form->input('Specification.'.$i.'.value', array('label' => "Valeur de la spécification"));
    echo $this->Form->hidden('Specification.'.$i.'.product_id');
endforeach;
?>

<hr/>
<h1>Annexes :</h1>
<hr/>

<?php
foreach (range(0,1) as $j):
    $b=$j+1;
    echo '<p>Annexe '.$b.'</p>';
    echo $this->Form->input('Appendice.'.$j.'.name', array('label' => "Image"));
    echo $this->Form->input('Appendice.'.$j.'.content', array('label' => "Description de l'annexe"));
    echo $this->Form->hidden('Appendice.'.$j.'.product_id');
endforeach;
?>

<?php echo $this->Form->end('valider'); ?> 
```

最后，这里是 debug($data) 的数组结果：

```
array(
    'Proposal' => array(
        'name' => 'Proposition 3',
        'created' => array(
            'month' => '02',
            'day' => '19',
            'year' => '2013',
            'hour' => '08',
            'min' => '27',
            'meridian' => 'am'
        ),
        'due' => array(
            'month' => '02',
            'day' => '19',
            'year' => '2013',
            'hour' => '08',
            'min' => '27',
            'meridian' => 'am'
        ),
        'content' => 'Termes & conditions'
    ),
    'Client' => array(
        'name' => 'Client 3',
        'project' => 'Projet Client 3',
        'address' => 'Adresse Client 3',
        'phone' => 'Téléphone Client 3',
        'email' => 'Email@test.com',
        'proposal_id' => ''
    ),
    'Product' => array(
        (int) 0 => array(
            'name' => 'Produit 3',
            'reference' => 'Référence Produit 3',
            'image' => 'Image Produit 3',
            'pu' => '100.77',
            'quantity' => '1000',
            'ce' => '1',
            'nf' => '0',
            'rohs' => '0',
            'client_id' => ''
        )
    ),
    'Specification' => array(
        (int) 0 => array(
            'name' => 'Specification 1',
            'value' => 'Valeur 1',
            'product_id' => ''
        ),
        (int) 1 => array(
            'name' => 'Specification 2',
            'value' => 'Valeur 2',
            'product_id' => ''
        )
    ),
    'Appendice' => array(
        (int) 0 => array(
            'name' => 'Image annexe 1',
            'content' => 'Description de l'annexe',
            'product_id' => ''
        ),
        (int) 1 => array(
            'name' => 'Image annexe 2',
            'content' => 'Description de l'annexe',
            'product_id' => ''
        )
    )
) 
```

所以在这个数组中，一切都在那里。我只需要获取这些数据并将它们全部保存在相应的表中即可。第一个问题是管理表的关联。然后是生成多行的 2 个 foreach 循环。

我想一次全部保存，但有可能吗？

在尝试了很多方法让它发挥作用之后，我已经完全疯了，我只是迷失了自己。我真的很绝望，我混淆了保存方法和请求之间的所有内容 - >包含所有内容但无法保存的数据。无论如何，我迫切需要帮助！

非常感谢您为我提供的所有帮助，我真的很感激！

* * *

## [编辑]

我将我的模型添加到当前帖子以获取更多详细信息。

**提案.php：**

```
<?php
class Proposal extends AppModel {

    public $actsAs = array('Containable');

    public $validate = array(
        'name' => array(
            'rule'       => 'notEmpty',
            'message'    => "Veuillez préciser un titre"
        )
    ) ;

    public $hasOne = array(
        'Client' => array(
            'className'    => 'Client',
            'foreignKey'   => 'proposal_id',
            'dependent'    => true
            )
        );
} 
```

**客户端.php：**

```
<?php
class Client extends AppModel {

    public $actsAs = array('Containable');

    public $belongsTo = array(
        'Proposal' => array(
            'className'    => 'Proposal',
            'foreignKey'   => 'proposal_id'
            )
        );

    public $hasMany = array(
        'Product' => array(
            'className'     => 'Product',
            'foreignKey'    => 'client_id',
            'conditions'    => '',
            'order'         => '',
            'limit'         => '',
            'dependent'     => true
            )
        );
} 
```

**产品.php：**

```
<?php
class Product extends AppModel {

    public $actsAs = array('Containable');

    public $belongsTo = array(
        'Client' => array(
            'className'    => 'Client',
            'foreignKey'   => 'client_id'
            )
        );

    public $hasMany = array(
        'Specification' => array(
            'className'     => 'Specification',
            'foreignKey'    => 'product_id',
            'conditions'    => '',
            'order'         => '',
            'limit'         => '',
            'dependent'     => true
            ),
        'Appendice' => array(
            'className'     => 'Appendice',
            'foreignKey'    => 'product_id',
            'conditions'    => '',
            'order'         => '',
            'limit'         => '',
            'dependent'     => true
            )
        );
} 
```

**规范.php：**

```
<?php
class Specification extends AppModel {

    public $actsAs = array('Containable');

    public $belongsTo = array(
        'Product' => array(
            'className'    => 'Product',
            'foreignKey'   => 'product_id'
            )
        );
} 
```

**附录.php：**

```
<?php
class Appendice extends AppModel {

    public $actsAs = array('Containable');

    public $belongsTo = array(
        'ProductAppend' => array(
            'className'    => 'Product',
            'foreignKey'   => 'product_id'
            )
        );
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T11:56:46.410

保存数据时的输出是什么？

```
 if (!empty($this->data)) {
               $this->Proposal->save($this->data);
} 
```

您还应该检查 sql 输出

> echo $this->element('sql_dump');

**编辑：**

在您编辑之后，乍一看，您的关系似乎是错误的。查看书中的示例：http: [//book.cakephp.org/2.0/en/models/associations-linking-models-together.html](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html)

例如 hasOne：另一个模型包含外键。

正如我之前所说，您应该尝试从一个关系开始，让它发挥作用。之后，让另一个工作会容易得多。因此，请尝试注释掉除您的 Proposal 和 Client 模型之外的所有内容。然后尝试只保存这两个。

# asp.net - ASP.NET - 如何在我的 Web 应用程序中引用类项目

> ID：14953019
> 
> 赞同：0
> 
> 时间：2013-02-19T08:32:59.587
> 
> 标签：asp.net

我正在尝试开发一个三层架构。为此，我创建了一个 BAL（类项目）和 DAL（类项目）。我想将 BAL 引用到我的 Web 应用程序，并将 DAL 引用到 BAL。

我应该引用 BAL.dll（编译 BAL 类项目时得到）还是 BAL 类项目作为一个整体。

什么是正确的方法以及如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T08:38:28.013

您应该将类​​项目作为一个整体来引用。在 Visual Studio 中，右键单击要添加引用的项目（在您的情况下为 BAL 项目），单击添加引用。现在，根据您正在运行的 Visual Studio 版本，您看到的下一个窗口看起来会略有不同。在 Visual Studio 2012 中，单击左侧的解决方案选项，然后您可以检查要引用的项目。点击确定就是这样。您应该会看到该项目出现在项目下的引用列表中（您可能需要展开它）。在 Visual Studio 2010 的最后一步中，单击左侧的项目选项，然后单击要添加的项目并单击确定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T08:44:00.767

要执行您的 Web 项目，您必须在您的 Web 项目中添加 BAL.dll 的引用，并在您的 BAL 项目中添加 DAL.dll。如果要访问 BAL 和 DAL 项目的源代码，建议将所有项目包含在单个解决方案下。但在这种情况下，您只需要 .dll 文件即可执行。

# asp.net-mvc-3 - 缓存维度和属性详细信息

> ID：14953020
> 
> 赞同：0
> 
> 时间：2013-02-19T08:33:00.420
> 
> 标签：asp.net-mvc-3, c#-4.0, caching, enterprise-library, ssas-2008

我正在使用 ASP.NET MVC 3.0 并使用 ADOMD 类来获取维度名称和属性名称。这是一项繁重的操作，并且多个用户正在使用此应用程序。

我想知道哪种是我可以使用的最佳缓存技术？**我想创建对 SSAS 多维数据集的依赖项。如果多维数据集更新，我想使缓存无效。**

由于我使用的是 .net framework 4.0，所以我也可以使用 System.Runtime.Caching

可能的选项： 1\. System.Web.HttpContext.Current.Cache 2\. 企业库 3\. System.Runtime.Caching

请推荐最好的缓存库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T08:34:13.590

`System.Runtime.Caching`是缓存的事实标准。`Enterprise library`这种任务可能有点繁重，但也值得探索。

# asp.net - 我可以使用 Entity Framework 操作存储过程的内容吗

> ID：14953028
> 
> 赞同：0
> 
> 时间：2013-02-19T08:33:38.637
> 
> 标签：asp.net, entity-framework

到目前为止，我一直在使用经典的 ADO.NET 模型进行数据库访问。我必须告诉你，我对此很满意。但我最近也听到了很多关于 Entity Framework 的消息，所以我想我可以试一试。实际上推动我的主要原因是需要找到一种方法来构建我的存储过程的 WHERE 子句。使用经典方式，我必须执行以下任一操作：

1.  根据用户输入在客户端构建 WHERE 子句并将其作为 VARCHAR2 参数发送到存储过程，将 WHERE 子句与 SQL 的主要部分连接起来，并将整个字符串传递给 EXECUTE_IMMEDIATE 函数。我个人讨厌不得不这样做。
2.  在存储过程内部构造了大量的 SQL 语句，这意味着我必须考虑 WHERE 子句可能包含的所有可能组合。这似乎比第一种情况更糟。

我知道 EF 也使得使用存储过程成为可能。但是可以动态构建 WHERE 部分吗？EF能以某种方式拯救我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T08:37:10.700

是的，您可以在 Linq 中使用动态查询。

1.  [动态查询库](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)

来自 scott gu 的例子

```
var query = Northwind.Products.Where("Lastname LIKE "someValue%"); 
```

或一些复杂的查询

```
var query =
    db.Customers.
    Where("City = @0 and Orders.Count >= @1", "London", 10).
    OrderBy("CompanyName").
    Select("new(CompanyName as Name, Phone)"); 
```

或从这个答案 [Where 子句动态。](https://stackoverflow.com/questions/5595338/add-the-where-clause-dynamically-in-entity-framework)

```
var pr = PredicateBuilder.False<User>();
foreach (var name in names)
{
    pr = pr.Or(x => x.Name == name && x.Username == name);
}
return query.AsExpandable().Where(pr); 
```

# java - Generic Generics：“令牌“扩展”的语法错误，预期”

> ID：14953029
> 
> 赞同：7
> 
> 时间：2013-02-19T08:33:39.437
> 
> 标签：java, generics

```
public interface View{...

public interface Control<V extends View>{...

public class RemoteControl<C extends Control<V extends View>> implements Control<V>{... 
```

在 RemoteControl 类的“V 扩展视图”上给了我一个“令牌“扩展”，，预期的语法错误。

我想以下替代方案是可能的

```
public class RemoteControl<C extends Control<V>,V extends View> implements Control<V>
{... 
```

我仍然想知道这是否不能以更隐含的方式完成，因为后者需要对视图进行冗余声明。IE：

```
public class TVRemoteControl extends RemoteControl<TVControl,TvView> implements TVControl{... 
```

对比

```
public class TVRemoteControl extends RemoteControl<TVControl> implements TVControl{... 
```

也许我只是再次被困在一个盒子里，但是有没有可能以更优雅的方式获得“通用泛型”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-27T22:39:18.343

你建议：

> 我想以下替代方案是可能的
> 
> ```
> public class RemoteControl<C extends Control<V>,V extends View> implements Control<V>{} 
> ```

这是正确的解决方案，尽管我通常会将其写为（为了便于阅读）：

```
public class RemoteControl<V extends View, C extends Control<V>> implements Control<V>{} 
```

您正在键入`RemoteControl`一个`Control`对象，该对象也是在一个对象上键入的`extends View`。因此，您需要提供`View`类型化`Control`对象的实现`RemoteControl`。

我想您可以将您的问题解释为，为什么我必须提供`V`-不应该从`<C extends Control<V>>`. 对此，答案是*否定*的，您需要提供一个类型`V`以确保`Control`提供正确的类型（即它`extends Control<V>`）

如果您不关心对象的类型是什么`View`，`Control`则无需`Control`输入`RemoteControl`：

```
public class RemoteControl<C extends Control> implements Control{} 
```

但是，事实`Control`是输入`V extends View`and `RemoteControl implements Control<V>`，而是建议您这样做...

# javascript - jquery加载时不显示标记图标

> ID：14953030
> 
> 赞同：1
> 
> 时间：2013-02-19T08:33:40.117
> 
> 标签：javascript, jquery, google-maps-api-3

当我将此页面加载到 div 中时（使用 jQuery.load()），不显示标记图标。该图标将在重新加载页面后显示。当我将它传递给 placeMarker 函数时，这是否导致地图未初始化？如何解决它。

```
<script type="text/javascript">

var map;
var markers = new Array();      
var marker;

var infoWindow = new google.maps.InfoWindow();
function initialize() {
    var myLatlng = new google.maps.LatLng(-6.19605333333333,106.79684);
    var myOptions = {
            zoom: 8,
            center: myLatlng,
            mapTypeId: google.maps.MapTypeId.ROADMAP
    }
    map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

    google.maps.event.addListener(map, 'click', function(event) {
        placeMarker(event.latLng);
        fillPositionForm(event.latLng);
    }); 
}

function placeMarker(location) {
    if ( marker ) {
        marker.setPosition(location);
    } else {
        marker = new google.maps.Marker({
            position: location,
            map: map,
            animation: google.maps.Animation.DROP,
            draggable: true
        });
    }
    google.maps.event.addListener(marker, 'dragend', function(event) {
        clearOverlays();
        fillPositionForm(event.latLng);
    });
}

function fillPositionForm(location){            
    jQuery("#latitude").val(location.lat());
    jQuery("#longitude").val(location.lng());
}

function clearOverlays() {
    if (markers) {
        for (i in markers) {
            markers[i].setMap(null);
        }
    }
}

jQuery(document).ready(function() { 
    initialize();
    jQuery("#frmAddPoi").validate({
        messages: {
            latitude: "Please click on map to select poi center position",
            longitude: "Please click on map to select poi center position",
        },
        submitHandler: function(form) {
            return postForm(form, "savepoi", "listcustopoi", false, false);
        }
    });
});
</script>
<div id="map_canvas" class="widgettitle" style="height:240px;"></div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T12:06:44.510

您正在附加`placeMarker`到 map.click 事件侦听器。

```
google.maps.event.addListener(map, 'click', function(event) {
    placeMarker(event.latLng);
    fillPositionForm(event.latLng);
}); 
```

您需要在调用 map 后加载它。

```
map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
     placeMarker(myLatlng); 
```

见[**jsFiddle**](http://jsfiddle.net/y7HCV/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-19T08:37:00.627

您应该在 load() 成功后调用函数 Initialize()。最好将 javascript 放在主页面中，而不是在加载的页面中。或者您可以使用 iFrame，这是最简单的方法。

# list - (>>) 是否应该丢弃所有左侧输出？

> ID：14953032
> 
> 赞同：12
> 
> 时间：2013-02-19T08:33:48.327
> 
> 标签：list, haskell, monads

我想我确实理解*list monad*，但后来我发现我不是。这是故事。

给定列表`m`和函数`k`

```
> let m = [1..10]
> :t m
m :: [Integer]

> let k = replicate 2
> :t k
k :: a -> [a] 
```

玩绑定`>>=`给出了我的期望

```
> :t (>>=)
(>>=) :: Monad m => m a -> (a -> m b) -> m b
> :t m >>= k
m >>= k :: [Integer]
> m >>= k
[1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10] 
```

但对于`>>`

预期（从体验 IO monad，左侧的所有内容都将被丢弃）

```
m >> m
[1,2,3,4,5,6,7,8,9,10] 
```

拿到

```
> :t (>>)
(>>) :: Monad m => m a -> m b -> m b
:t m >> m
m >> m :: [Integer]
> m >> m
[1,2,3,4,5,6,7,8,9,10,1,2,3,4,5 ... 9,10] -- truncated, real output is 100 elements 
```

请解释为什么`>>`不像我预期的那样表现（当然我一定有误解）以及正确的解释方法是`>>`什么？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-19T09:03:00.793

`(>>)`丢弃其第一个参数的*值*，但不丢弃效果。在这种情况下，可能更容易查看您是否使用不同类型的列表：

```
λ> "ab" >> [1,2,3,4]
[1,2,3,4,1,2,3,4] 
```

注意第一个列表的值根本没有被使用。

记住`(>>)`:的定义`a >> b = a >>= (\_ -> b)`。所以这变成`"ab" >>= (\_ -> [1,2,3,4])`, ie `concat (map (\_ -> [1,2,3,4]) ['a','b'])`, ie `concat [[1,2,3,4],[1,2,3,4]]`(also, `[i | _ <- "ab", i <- [1,2,3,4]]`)。

用`[]`,`(>>=)`表示类似“每个人”的意思。右边的函数将左边的每个值作为参数。所以`(>>)`，丢弃值，仍然意味着“每个”——但这次它不能使用该值，所以它只是意味着“第二个列表的元素，重复的次数与第一个列表中的元素一样多” .

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-02-19T09:01:28.527

`foo >> bar`是一样的`foo >>= \_ -> bar`。因此，在 IO 的情况下，它执行左侧动作，忽略该动作的返回值，然后执行右侧动作。在列表的情况下，它映射到左列表中的每个元素，忽略每个元素的值，并在每个点插入右列表。

另一种看待它的方式是`>>=`for lists 与 相同`flip concatMap`，`>>`与 相同`flip (concatMap . const)`。

# java - java.lang.Thread 静态方法如何工作？

> ID：14953034
> 
> 赞同：0
> 
> 时间：2013-02-19T08:34:02.127
> 
> 标签：java, multithreading

例如方法[`public static void sleep(long millis)`](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Thread.html#sleep%28long%29)。这个方法导致当前线程休眠，但是它怎么知道哪个线程是当前线程呢？静态方法是对象无关的，属于类，那么这种机制是如何工作的呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T08:37:19.180

> 这个方法导致当前线程休眠，但是它怎么知道哪个线程是当前线程呢？

当前线程由底层操作系统（或线程系统）管理**。**底层（系统相关）线程实现提供了当前线程的句柄：

*   对于*POSIX*线程，API 调用[pthread_self()](https://computing.llnl.gov/tutorials/pthreads/man/pthread_self.txt)返回当前执行线程的线程 ID。您可以考虑`Thread.currentThread()`最终调用此 C 函数并将线程 ID 包装在一个 Java`Thread`对象中，然后返回该对象。

*   在*MS Windows*的情况下，API 调用[GetCurrentThread()](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683182%28v=vs.85%29.aspx)返回当前执行线程的 Windows 句柄。同样，您可以考虑`Thread.currentThread()`最终调用此 C 函数并将 Handle 包装在`Thread`返回的 Java 对象中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-19T08:39:19.377

**`native`**方法很特别。他们可以访问 Java API 之外的内容。

在这种情况下，到*当前*线程。您不能使用此方法使另一个线程进入睡眠状态 - 另一个线程必须自己执行此操作（但显然您可以向它发送消息）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T08:40:30.140

始终为当前/正在执行的线程调用此方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T08:41:26.240

这意味着您当前的线程将进入睡眠模式一段时间。例如：如果我写 Thread.sleep(1000) 线程将进入睡眠状态 1000 毫秒。我们使用这种方法主要是在线程之间进行交换。总之，它会给另一个线程执行的机会。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-19T08:41:31.447

当前线程是实际执行这段代码的线程。就如此容易。

例如：

```
public static void main(String[] args) {
    Runnable r = new Runnable() {
        @Override
        public void run() {
             System.out.println("Before sleeping!");
             Thread.sleep(10000);
             System.out.println("After sleeping!");
        }
    }
    Thread t1 = new Thread(r);
    Thread t2 = new Thread(r);
    System.out.println("Main thread!");
} 
```

可能会输出如下内容：

```
Before sleeping!  // t1
Main thread!      // main
Before sleeping!  // t2
After sleeping!   // t1
After sleeping!   // t2 
```

# java - Spring aspectj 注释切入点

> ID：14953036
> 
> 赞同：4
> 
> 时间：2013-02-19T08:34:15.983
> 
> 标签：java, spring, aop

我试图在方法注释上创建一个 Aspectj 切入点，但我一直以不同的方法失败。我正在使用 aspectj autoproxy（我没有在我的 spring 上下文中配置其他编织）。我的课程如下所示：

```
public interface Intf
{
  @SomeAnnotation
  void method1() throws SomeExc;
}

public class Impl implements Intf
{
  @Override
  public void method1() throws SomeExc
  {
    //...
  }
}

@Aspect
public class MyAspect
{
  @AfterThrowing(
    pointcut = "execution(* *(..)) && @annotation(SomeAnnotation)",
    throwing = "error")
  public void afterThrowing(JoinPoint jp, Throwable error)
  {
    System.err.println(error.getMessage());
  }
}

@Component
public class Usage
{
  @Autowired
  Intf intf;

  public void doStuff()
  {
    intf.method1();
  }
} 
```

所以我想知道为什么aspectj不会创建切入点。我设法使用`execution(* *(..) throws SomeExc)`which 为我完成了这项工作，但我仍然想知道我做错了什么。

另外，由于`method1`是在接口中定义的，并且我在实现类上指定了注释，有没有办法让它以这种方式工作？其他代理机制（如事务管理/安全性）在 Spring 的其他部分以这种方式工作，对吗？如果我使用接口代理，是否会在实现类上指定切入点来创建切入点？（我猜不是，因为我没有使用 cglib）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T09:03:12.000

尝试将@Component 添加到 MyAspect 类

```
@Component
@Aspect
public class MyAspect {
... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-01T08:04:43.683

只需将您的方面方法标记为

```
@After("@annotation(package.SomeAnnotation)") 
```

看一下[这个](http://rdafbn.blogspot.co.uk/2013/06/intercept-annotation-with-aspetcj-in.html)一步一步的指南

# javascript - 使用边距的 CSS3 textarea 布局

> ID：14953039
> 
> 赞同：1
> 
> 时间：2013-02-19T08:34:31.987
> 
> 标签：javascript, html, css, windows-store-apps

我有以下 HTML5 页面（在 Windows 商店应用程序中）：

```
<div>
    <textarea id="wideBox" class="wideInput"></textarea>        
    <textarea id="small1" class="narrowInput"></textarea>
    <textarea id="small2" readonly class="narrowInput"></textarea>
</div> 
```

以及以下 CSS：

```
.wideBox {
    width: 100%;
    box-sizing: border-box;
    opacity: 80;
    height: 200px;
    background: -ms-linear-gradient(top, #213A4F, #1a82f7);
}

.narrowInput {
    width: 50%;
    box-sizing: border-box;
    height: 200px;
    float: left;
    padding: 5px;
    background: -ms-radial-gradient(bottom, #6BBEC7, #1a82f7);
} 
```

我所追求的效果是一个宽文本框，下面有两个大小相同的较小文本区域。

这确实有效，但是，较小的文本框只是合并在一起。为了解决这个问题，我尝试引入 的边距`1px`，但是，这具有将第二个较小的文本框推到下一行的效果。

我也尝试在盒子上添加边框，但无济于事。

如何在不改变页面整体布局的情况下获得间隙或轮廓线的效果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T09:03:37.500

您可以简单地将您的第二行包装`textarea`到另一个`div`将具有`50%`并`padding-right`模拟文本区域之间的间隙的行中：

```
/* textareas are inside this .wrap and have 100% */
.wrap {
    width: 50%;
    box-sizing: border-box;
    float: left;
}
.wrap-first {
    padding-right: 1px;
} 
```

[http://jsfiddle.net/dfsq/RHYSL/](http://jsfiddle.net/dfsq/RHYSL/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T08:52:16.667

遗憾的是，宽度 % 没有按预期工作。它被计算为父宽度的百分比，并且不考虑边距和填充。如果父级是 100px 宽并且您设置 50% 宽度，它将与设置 50px 宽度相同。现在向它添加 5px 的填充，你得到一个 55px 的总宽度，它将向下推其中一个框。据我所知，在没有 javascript 的情况下，不可能结合宽度 % 和边距/填充来使像素完美缩放。我能想到的最好的方法是设置一个稍低的宽度，49.5% 而不是 50%，并左右浮动文本框以保持对称。

文本框将随着父级大小缩放，但两个框之间的距离也会缩放，因为如果父级更大，则 0.5% 会更大。

```
<div>
     <textarea id="wideBox" class="wideBox"></textarea>       
     <textarea id="small1" class="narrowInput left"></textarea>
     <textarea id="small2" readonly="readonly" class="narrowInput right"></textarea>
     <div class="clear"></div>
</div>

.wideBox {
width: 100%;    
box-sizing: border-box;
opacity: 80;    
height: 200px;  
background: -ms-linear-gradient(top, #213A4F, #1a82f7);
}

.narrowInput {
width: 49.5%; /* Note lower width */
box-sizing: border-box;    
height: 200px;  
padding: 5px;
background: -ms-radial-gradient(bottom, #6BBEC7, #1a82f7);      
 }

/* Float to keep symmetric layout */
.left {
    float: left;
}

.right {
    float: right;
}

/* clear after float */
.clear {
clear: both;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T10:42:11.183

我不确定我的问题是否正确；

顺便问一下，你能用 CSS3 Calc 吗？

**演示：http: [//jsfiddle.net/4uc3N/](http://jsfiddle.net/4uc3N/)**

HTML

```
<div>
     <textarea id="wideBox" class="wideInput"></textarea>       
     <textarea id="small1" class="narrowInput"></textarea>
     <textarea id="small2" class="narrowInput"></textarea>
</div> 
```

CSS

```
#wideBox {
    width: calc(100% - 4px);    /* A Trick */
    box-sizing: border-box;
    opacity: 80;    
    height: 200px;  
    background: -ms-linear-gradient(top, #213A4F, #1a82f7);
}

.narrowInput {
    width: calc(50% - 14px); /* Another Trick */
    box-sizing: border-box;    
    height: 200px;  
    float: left;
    padding: 5px;
    background: -ms-radial-gradient(bottom, #6BBEC7, #1a82f7);      
} 
```

# c# - 如何用新创建的节点替换 TreeView 的选定节点

> ID：14953041
> 
> 赞同：2
> 
> 时间：2013-02-19T08:34:35.293
> 
> 标签：c#, winforms, treeview

我有一个填充了我创建的节点的树视图，有几个节点类，都从树节点继承。

当我编辑一个节点（使用 GUI 对话框）时，它可能会更改为不同的类，所以我在该过程中创建一个新节点，并尝试用我的新节点替换所选节点，但这不起作用，该节点保持旧节点，无法弄清楚我做错了什么。

代码：

```
TreeNodeMission mission = (TreeNodeMission)treeView.SelectedNode;
TreeNodeMission newMission = ChangeMissionDialog(mission);

treeView.SelectedNode = newMission; // doesn't work 
```

也试过删除和添加它，也不起作用

```
index = treeView.Nodes.IndexOf(treeView.SelectedNode);  // index returns -1
treeView.Nodes.Remove(treeView.SelectedNode);
treeView.Nodes.Insert(index, newMission); 
```

我究竟做错了什么？

更新：treeView.SelectedNode 不为空，它是我选择的有效节点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T10:19:50.377

解决了，发现了bug。

我找到了一种替换节点的方法，方法是删除并重新添加它。我想我认为请求索引会给我树中的一般索引，但它只给父节点提供索引，所以使用父节点，我可以替换它：

```
int index = treeView.SelectedNode.Index;
treeView.SelectedNode.Parent.Nodes.RemoveAt(index);
treeView.SelectedNode.Parent.Nodes.Insert(index, mission);
treeView.SelectedNode = mission; 
```

谢谢

# apache - HAproxy - 代理整个 IP

> ID：14953042
> 
> 赞同：0
> 
> 时间：2013-02-19T08:34:40.280
> 
> 标签：apache, haproxy

为了测试所有可能的解决方案以使 Socket.io 与并行 Apache 安装一起工作，我现在安装了监听端口 80 的 HAproxy。它将所有内容代理到 Apache，除非主机名等于`io.server.com`.

我们有两个 IP 连接到我们的服务器：一个用于 SSL，另一个用于我们拥有的所有非 SSL 子域。我创建了`io.server.com`指向该非 SSL IP 地址的子域。但是，会发生以下情况：

1.  访问`regular_http.server.com`导致 Apache 处理该子域（OK）
2.  访问`io.server.com`结果“Welcome to Socket.io”（OK）
3.  **下次访问`regular_http.example.com`结果“欢迎使用 Socket.io”**

为什么 HAproxy 从未配置为转到 Socket.io 的子域向 Socket.io 发送请求？是的，两个子域共享IP，但是HAproxy真的代理了一个下的整个IP吗？那么基于主机名设置 ACL 有什么意义呢？

这是我的配置：

```
global
    daemon
    maxconn 4096
    user haproxy
    group haproxy

defaults
    log global

#this frontend interface receives the incoming http requests
frontend http-in
    mode http
    bind *:80
    timeout client 86400000
    #default behavior sends the requests to apache
    default_backend www_backend
    #when "io.test.tld" is matched, an acl I call arbitrarily
    # "websocket" triggers
    acl websocket hdr_end(host) -i io.server.com
    use_backend node_backend if websocket 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T07:41:46.937

`option http-server-close`使用HAproxy中的配置值解决了这个问题。

# android - 意图和一些活动的困难

> ID：14953045
> 
> 赞同：1
> 
> 时间：2013-02-19T08:34:48.517
> 
> 标签：android, android-intent

我有一个启动应用程序的主要活动。在主要活动中，我有一个将通过意图`ImageView`从第二个活动中的选定缩略图中获取路径字符串。`GridView`

这可能听起来很奇怪，并且更自然地首先使用 启动第二个活动`GridView`，但这是任务的要求。

所以我正在努力解决如何处理`imageId`期望第二个活动的意图的字符串？我想我将不得不放一个按钮来打开第二个活动之`GridView`类的菜单按钮，但是有什么想法可以处理意图的事情吗？感谢一些帮助！

主要活动中的代码：

```
String imageId = i.getExtras().getString("image");

ImageView imageView = (ImageView) findViewById(R.id.full_image_view);

Bitmap bitmap =BitmapFactory.decodeFile(imageId);
imageView.setImageBitmap(bitmap); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T08:40:57.597

使用 打开第二个活动`startActivityForResult`，例如：

开始第二个活动：

```
Intent i = new Intent(this, SecondActivity.class);
startActivityForResult(i, 1); 
```

然后处理返回的结果：

```
 @Override

protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if(resultCode == Activity.RESULT_OK) {
       String imageId = data.getExtras().getString("image");

       ImageView imageView = (ImageView) findViewById(R.id.full_image_view);

       Bitmap bitmap =BitmapFactory.decodeFile(imageId);
       imageView.setImageBitmap(bitmap);
    }
} 
```

在第二个动力下，选择缩略图：

```
 Intent intent = new Intent();
 intent.putExtra("image", path);
 setResult(RESULT_OK, intent);
 finish(); 
```

检查[https://stackoverflow.com/a/10407371/1434631](https://stackoverflow.com/a/10407371/1434631)

# php - 使用实时搜索在表中创建多行

> ID：14953046
> 
> 赞同：0
> 
> 时间：2013-02-19T08:34:55.323
> 
> 标签：php, jquery, json

我想进行实时检查并在表中为每个结果创建一行。我所做的是当用户在文本字段中填写结果时，我使用 jquery 进行检查。

文本字段如下所示：

```
<input name="teamNaam" type="text" class="personeelField" id="teamNaam" onkeyup="return check_teamnaam();"/> 
```

jquery是这样的：

```
<script language="javascript">
    $(document).ready(function () {
        $('#Loading').hide();
    });

    function wait(msecs) {
        var start = new Date().getTime();
        var cur = start
        while (cur - start < msecs) {
            cur = new Date().getTime();
        }
    }

    function check_teamnaam() {

        var teamNaam = $("#teamNaam").val();
        if (teamNaam.length > 2) {
            $('#Loading').show();
            $.post("checkVriendenTeam.php", {
                teamNaam: $('#teamNaam').val(),
            }, function (response) {
                //$('#Info').fadeOut();
                // $('#Loading').hide();
                var reactie = response;
                var obj = jQuery.parseJSON(reactie);
                console.log(obj.Coureur);

                if (reactie == "Bezet") {
                    //fffkdf
                } else {

                    $('#Info tr').has('td').remove();
                    $('#Info tr:last').after('<tr class="tabeltitel" height="30"><td width="5%">#</td><td width="29%" class="tabeltitel">' + response.Teamnaam + '</td><td width="23%" class="tabeltitel">' + response.Manager + '</td><td width="24%" class="tabeltitel">Vrienden worden</td></tr>');
                }

            });
            return false;
        }
    }
</script> 
```

它正在检查“checkVriendenTeam.php”并返回结果。结果如下所示：

```
[{"Teamnaam":"test"},{"Teamnaam":"test2"},{"Teamnaam":"test3"}] 
```

我用 php 代码得出这个结果：

```
if($_REQUEST)
{
    $teamNaam   = $_REQUEST['teamNaam'];
    $query = "select * from spelers where Teamnaam  LIKE '".strtolower($teamNaam)."%'";
    $results = mysql_query( $query) or die('ok');

    if(mysql_num_rows(@$results) > 0) // not available
    {   $response = array();
        while($inhoud = mysql_fetch_array($results)) {

        $response[]['Teamnaam'] = $inhoud['Teamnaam'];

        }
        $jsonData = json_encode($response); 
        echo $jsonData;
    }
    else
    {
        echo 'no result';
    }   
} 
```

但它只会创建一行没有任何数据（未定义）。那么我需要做什么才能获得 3 行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T08:48:14.833

考虑到你有正确的反应，得到三行..你必须使用`jquery.each`循环

试试这个

```
 ....
    else{
       $('#Info tr').has('td').remove();
       $.each(obj ,function(i,v){  <------ here
         $('#Info tr:last').after('<tr class="tabeltitel" height="30"><td width="5%">#</td><td width="29%" class="tabeltitel">' + v.Teamnaam + '</td><td width="23%" class="tabeltitel">' + v.Manager + '</td><td width="24%" class="tabeltitel">Vrienden worden</td></tr>');
       });
     } 
```

**注意：**不确定为什么要在`v.Manager`那里使用，因为您的对象中没有管理器...要么您必须通过您的 php 代码发送它，或者删除它...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T08:40:49.680

此行不正确：

```
$('#Info tr:last').after('<tr class="tabeltitel" height="30"><td width="5%">#</td><td width="29%" class="tabeltitel">' + response.Teamnaam + '</td><td width="23%" class="tabeltitel">' + response.Manager + '</td><td width="24%" class="tabeltitel">Vrienden worden</td></tr>'); 
```

要获取团队名称，请使用：

```
obj[0].Teamnaam
obj[1].Teamnaam
// and so on.... 
```

这是因为，您将 JSON 分开并将其设置为“obj”。所以 obj 包含您的 PHP 脚本给定的对象数组。

# javascript - JS 中属性与方法的示例

> ID：14953047
> 
> 赞同：11
> 
> 时间：2013-02-19T08:35:01.830
> 
> 标签：javascript, methods, properties

我找到了对属性和方法之间语义差异的很好描述（通过[http://www.webdeveloper.com/forum/showthread.php?133712-Properties-Vs.-Methods](http://www.webdeveloper.com/forum/showthread.php?133712-Properties-Vs.-Methods)转述）：

> 属性就像名词。它们具有价值或状态。
> 
> 方法就像动词。他们执行动作。
> 
> 属性不能执行操作，方法具有的唯一值是完成执行操作后返回的值。
> 
> 例如
> 
> **属性**：门；**可能的值**：打开、关闭
> 
> **方法**：开门；**行动**：将门属性的值更改为“打开”

**创建一个例子：**我在理论上理解这一点，但我想不出一个例子。是否可以向我展示门/openDoor 在实际 Javascript 代码中的外观？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-19T09:00:59.547

确实，您需要备份并阅读上面发布的一些链接。但作为一个简单的例子：

```
var house = {} ;

house.isDoorOpen = false ;

house.openDoor = function(){
    house.isDoorOpen = true ;
} 
```

这`house`是对象。它有一个属性：`house.isDoorOpen`. 在这里，它更像是一个形容词。门打开（真）或关闭（假）。听起来，它描述了房子的属性。

此外，它有一个方法`openDoor`（使用如下：）`house.openDoor()`。这是它可以做的事情。在这种情况下，动作`openDoor`会影响`isDoorOpen`属性，使其成为真的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-08-17T19:01:48.423

让我们看看 javascript 规范 ECMA-262 是如何描述术语属性的

[http://www.ecma-international.org/ecma-262/5.1/#sec-4.3.26](http://www.ecma-international.org/ecma-262/5.1/#sec-4.3.26)

> **4.3.26 财产**
> 
> 名称和作为对象一部分的值之间的关联
> 
> 注意根据属性的形式，值可以直接表示为数据值（原始值、对象或函数对象），也可以通过一对访问函数间接表示。
> 
> **4.3.27 方法**
> 
> 作为属性值的函数
> 
> 注意 当函数作为对象的方法被调用时，对象作为 this 值传递给函数。

还

Javascript 对属性的定义与 Java 不同

> **4.3.29 属性**
> 
> 定义属性某些特征的内部值

* * *

`for in`, 循环遍历对象的可枚举属性，包括它的函数

[http://eloquentjavascript.net/1st_edition/chapter8.html](http://eloquentjavascript.net/1st_edition/chapter8.html)

> “一个函数在作为属性查找时被称为方法，并立即调用，就像在 object.method() 中一样。”

似乎确实有一个更标准的财产定义..

[https://en.wikipedia.org/wiki/Property_(programming)#JavaScript](https://en.wikipedia.org/wiki/Property_(programming)#JavaScript)

> “在一些面向对象的编程语言中，属性是一种特殊的类成员，介于字段（或数据成员）和方法之间。......一些面向对象的语言，如 Java，不支持属性，并要求程序员定义一对访问器和修改器方法。”

在那个更标准的、非javascript的属性定义中

C# 有属性，Java 没有属性

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-27T11:49:54.217

JavaScript 中的对象只是存储在 Hash 中的键值对。b/w 属性和方法的区别在于 - 属性是存储在哈希键中的值，而方法是存储在哈希键中的函数。

# php - 从具有 JSON 内容类型的 PHP 文件中检索 JSON

> ID：14953057
> 
> 赞同：0
> 
> 时间：2013-02-19T08:35:53.527
> 
> 标签：php, json

这似乎是一个愚蠢的问题，但经过长时间的搜索，我被难住了。

我正在使用查询来检索数据，然后编码为 JSON，以便在我的站点周围的各个地方使用。只有一个问题。我似乎无法检索数据！

查询（data.users.php）：

```
$arr = array();

$rs = mysql_query("SELECT
    CONCAT(m.firstName,' ',m.lastName) AS name,
    m.email,
    m.permission,
    m.costRate,
    m.dt,
    m.memberID,
    m.moduleFinancial,
    o.orgName

    FROM members m

    LEFT JOIN organisations o ON m.organisationID = o.organisationID
    WHERE status = 'true'
    ORDER BY name"
) or die(mysql_error());

while($obj = mysql_fetch_object($rs)) {
$arr[] = $obj;
}
header("Content-type: application/json");

    echo json_encode($arr); 
```

数据示例：

```
[{"name":"Admin User","email":"test@test.com","permission":"admin","dt":"2013-02-02 10:26:29","memberID":"M0000001"},{"name":"Another User","email":"another@test.com","permission":"admin","dt":"2012-02-02 10:26:29","memberID":"M0000002"}] 
```

有任何想法吗？

更新获取代码：

```
ob_start();
            include("../data/data.users.php");
            $arr = json_decode(ob_get_clean(), true);

            foreach($arr as $item) {
                if ($item['memberID'] == $_GET["ID"]) {
                    $user_name = $item['name'];
                }
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T08:39:28.917

PHP >= 5.4 具有 JSON_PRETTY_PRINT 选项，如此处所述：http://php.net/manual/en/function.json-encode.php[以](http://php.net/manual/en/function.json-encode.php)获得格式良好的 JSON 字符串：

```
json_encode($arr, JSON_PRETTY_PRINT); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T08:48:00.113

试试这个亲爱的......

输入

```
{"key1":[1,2,3],"key2":"value"} 
```

输出

```
 {
    "key1": [
        1,
        2,
        3
    ],
    "key2": "value"
} 
```

功能代码：

```
 function prettyPrint( $json )
{
    $result = '';
    $level = 0;
    $prev_char = '';
    $in_quotes = false;
    $ends_line_level = NULL;
    $json_length = strlen( $json );

    for( $i = 0; $i < $json_length; $i++ ) {
        $char = $json[$i];
        $new_line_level = NULL;
        $post = "";
        if( $ends_line_level !== NULL ) {
            $new_line_level = $ends_line_level;
            $ends_line_level = NULL;
        }
        if( $char === '"' && $prev_char != '\\' ) {
            $in_quotes = !$in_quotes;
        } else if( ! $in_quotes ) {
            switch( $char ) {
                case '}': case ']':
                    $level--;
                    $ends_line_level = NULL;
                    $new_line_level = $level;
                    break;

                case '{': case '[':
                    $level++;
                case ',':
                    $ends_line_level = $level;
                    break;

                case ':':
                    $post = " ";
                    break;

                case " ": case "\t": case "\n": case "\r":
                    $char = "";
                    $ends_line_level = $new_line_level;
                    $new_line_level = NULL;
                    break;
            }
        }
        if( $new_line_level !== NULL ) {
            $result .= "\n".str_repeat( "\t", $new_line_level );
        }
        $result .= $char.$post;
        $prev_char = $char;
    }

    return $result;
} 
```

这可能对你有帮助........

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T08:42:48.507

我相信，您的问题出在其他地方，`json_decode`不需要换行符。但是，我发现这条线很可疑：

```
json_decode(file_get_contents("../data/data.users.php"),true); 
```

您想以 JSON 格式读取 PHP 脚本吗？这是*源代码*，那里没有任何执行！

**更新：**

就像我怀疑的那样：您读取 PHP 文件并将其传递给`json_decode`. PHP 源代码不是有效的 JSON，因此它返回`null`. `file_get_contents`只有使用 http 包装器才有可能：

```
file_get_contents("http://example.com/data/data.users.php") 
```

但这是不必要的复杂，通常不是一个好主意。此外，该脚本必须位于公共 Web 目录下。你应该**包括** `data.users.php`. 为此，您有两种选择：

1.  更改`echo`为`return`然后使用：

    ```
    $arr = json_decode(include("../data/data.users.php"), true); 
    ```

2.  使用输出缓冲：

    ```
    ob_start();
    include("../data/data.users.php");
    $arr = json_decode(ob_get_clean(), true); 
    ```

第一个选项应该是首选选项，但是，如果`data.users.php`由于某种原因无法更改，则第二个选项是有效的解决方法。

**PS：**您可能也想摆脱对的调用`header()`，如果`data.users.php`不会直接通过网络调用。否则，如果第二个脚本没有将 JSON 传递给浏览器/客户端，请记住覆盖内容类型标头。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T08:41:57.510

```
echo json_encode($arr)."\r\n"; 
```

# javascript - WinJS 中的视频标签样式

> ID：14953058
> 
> 赞同：0
> 
> 时间：2013-02-19T08:36:05.543
> 
> 标签：javascript, html, windows-runtime, winjs

在 Windows 8 HTML5 应用程序中播放视频时，我试图更改视频标签的进度条颜色，但我找不到必须修改的 Css 属性。另外，我找不到有关此的文档。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T08:39:24.683

您可以创建自己的 DOM 节点，并且通过使用视频标签规范的公开方法，您可以模仿和扩展默认功能。

# visual-studio-2010 - visual studio 2010 不记得 ankkhsvn 被用作源代码控制

> ID：14953059
> 
> 赞同：0
> 
> 时间：2013-02-19T08:36:06.390
> 
> 标签：visual-studio-2010, ankhsvn

我在 Visual Studio 2010 中使用 ankkhsvn（在工具中选择作为选项），当我重新启动机器时，项目将恢复到 Team Foundation 作为选定的源代码控制。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T21:13:09.320

右键解决方案，添加到颠覆。确认您要使用颠覆来管理 .sln。

这会在您的 .sln 中添加几行以启用 AnkhSVN（如果已安装）（如果未安装 AnkhSVN，则将被忽略）。

# java - 将传感器数据保存到android中的文件

> ID：14953062
> 
> 赞同：5
> 
> 时间：2013-02-19T08:36:27.257
> 
> 标签：java, android, sensors, android-sdcard, gyroscope

我正在做我的项目来记录来自加速度计和陀螺仪传感器的数据并将其保存到 sdcard 中的文件中。但是我有问题，当我开始录制超过 1 秒时，文件中的结果只有 1 个数据，由 1 个 x 轴、1 个 y 轴和 1 个 z 轴组成。理想情况下，我应该在记录文件时在文件中获取更多数据

```
 public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    //return inflater.inflate(R.layout.get_data, container, false);

    //get path from sdcard
    sdcard = Environment.getExternalStorageDirectory().getPath();

    rootView = inflater.inflate(R.layout.get_data, container,false);
    Button start = (Button) rootView.findViewById(R.id.buttonstart);
    Button stop = (Button) rootView.findViewById(R.id.buttonstop);

    //eksekusi saat klik button stop
    stop.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            rekam = false;
            // TODO Auto-generated method stub

            //sensorManager.unregisterListener(mySensorEventListener);
            //super.onStop();

        }
    });

    //eksekusi saat klik button start
    start.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            rekam = true;
            String nama = sdcard+"/datasensor.txt";
            namafile = new File(nama);

        }
    });
    return rootView;
public void onActivityCreated(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onActivityCreated(savedInstanceState);
    parent = getActivity();
    sensorManager = (SensorManager) parent.getSystemService(Context.SENSOR_SERVICE);
    sensor = sensorManager.getSensorList(Sensor.TYPE_ACCELEROMETER).get(0);
    sensorgyroscope = sensorManager.getSensorList(Sensor.TYPE_GYROSCOPE).get(0);

    koordinatX = (TextView)rootView.findViewById(R.id.coordinatx);
    koordinatY = (TextView)rootView.findViewById(R.id.coordinaty);
    koordinatZ = (TextView)rootView.findViewById(R.id.coordinatz);

    koordinatrollX = (TextView)rootView.findViewById(R.id.coordinatrollx);
    koordinatpitchY = (TextView)rootView.findViewById(R.id.coordinatpitchy);
    koordinatyawZ = (TextView)rootView.findViewById(R.id.coordinatyawz);

    sensorManager=(SensorManager) parent.getSystemService(Context.SENSOR_SERVICE);
    //add listener for accelerometer
    sensorManager.registerListener(this,sensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER),SensorManager.SENSOR_DELAY_NORMAL);
    //add listener for gyroscope
    sensorManager.registerListener(this, sensorManager.getDefaultSensor(Sensor.TYPE_GYROSCOPE), SensorManager.SENSOR_DELAY_NORMAL); 
}

@Override
public void onAccuracyChanged(Sensor sensor, int accuracy) {
    // TODO Auto-generated method stub

}

@Override
public void onSensorChanged(SensorEvent event) {
    // TODO Auto-generated method stub
    if(event.sensor.getType()==Sensor.TYPE_ACCELEROMETER)
    {

        //assign directions accelometer
        float x = event.values[0];
        float y = event.values[1];
        float z = event.values[2];

        koordinatX.setText("X: "+x);
        koordinatY.setText("Y: "+y);
        koordinatZ.setText("Z: "+z);

        if(rekam==true)
        {
            try
            {
                BufferedWriter out = new BufferedWriter(new FileWriter(namafile));
                out.write(Float.toString(event.values[0]) + Float.toString(event.values[1]) + Float.toString(event.values[2]) );
                out.close();
            }
            catch (IOException e)
            {
                System.out.println("Exception");
            }

        }
    }

    if(event.sensor.getType()==Sensor.TYPE_GYROSCOPE)
    {                   
        float roolX = event.values[0];
        float pitchY = event.values[1];
        float yawZ = event.values[2];

        koordinatrollX.setText("Orientation X (Roll) :" + Float.toString(event.values[0]));
        koordinatpitchY.setText("Orientation Y (Pitch) :" + Float.toString(event.values[1]));
        koordinatyawZ.setText("Orientation Z (Yaw):" + Float.toString(event.values[2]));

        if(rekam==true)
        {
            try
            {
            BufferedWriter out = new BufferedWriter(new FileWriter(namafile));
            out.write(Float.toString(event.values[0]) + Float.toString(event.values[1]) + Float.toString(event.values[2]) );
            out.close();
            }

            catch (IOException e)
            {
                System.out.println("Exception");
            }

        }
}

}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T09:28:44.157

而不是`buf.write()`，尝试`buf.append()`

它会在您使用时附加新的传感器读数而不是过度写入`buf.write()`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-13T00:12:32.373

你必须使用：

```
BufferedWriter out = new BufferedWriter(new FileWriter(namafile)); 
```

里面：

```
 //eksekusi saat klik button start
start.setOnClickListener(new View.OnClickListener() {

    @Override
    public void onClick(View v) {
        rekam = true;
        String nama = sdcard+"/datasensor.txt";
        namafile = new File(nama);
        //use it here.
        BufferedWriter out = new BufferedWriter(new FileWriter(namafile));
    }
}); 
```

还：

```
out.close(); 
```

必须在其他“停止”onClick 内。

```
//eksekusi saat klik button stop
stop.setOnClickListener(new View.OnClickListener() {

    @Override
    public void onClick(View v) {
        rekam = false;
        out.close();

    }
}); 
```

正如 Shehroz 所说，你必须使用，

```
out.append(Float.toString(event.values[0]) + Float.toString(event.values[1]) + Float.toString(event.values[2]) ); 
```

我希望能回答你的问题。

# iis-7 - 如何在 64 位服务器上通过 msmdpump.dll 访问 OLAP 多维数据集？

> ID：14953063
> 
> 赞同：2
> 
> 时间：2013-02-19T08:36:33.537
> 
> 标签：iis-7, windows-server-2008, olap, filemaker

我有一个运行 Windows Server 2008 64 位的分析服务器数据库。用户通过 msmdpump.dll 访问多维数据集。在同一台服务器上使用 FileMaker 之前有任何问题。我无法分析服务器数据库。我搜索了一些文档，说我必须将应用程序池更改为启用 32 位。我更改了 OLAP web.config 并添加了 ISAPI 过滤器。我还读到我应该使用 32 位 msmdpump.dll 但我运行 IIS 64 位，你怎么能找到 32 位 dll。现在我无法以任何方式到达。你能帮助我需要遵循哪些步骤吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-09T15:34:08.967

要为连接到 SSAS x64 实例的 IIS x64 安装和配置 OLAP Pump，请使用 x64 SSAS 安装目录的 msmdpump.dll。要访问 SSAS x86 实例，请使用 x86 SSAS 安装目录的 msmdpump.dll。第二个变体要求您在应用程序池上启用 32 位。

可以在此处找到有关如何通过 IIS 设置 SSAS 访问的非常好的指南：

[Microsoft - 通过 IIS 配置对 SSAS 的 HTTP 访问](http://msdn.microsoft.com/en-us/library/gg492140.aspx)

致以真诚的感谢和诚挚的问候

# rubygems - 没有要加载的文件——咕噜

> ID：14953067
> 
> 赞同：0
> 
> 时间：2013-02-19T08:36:50.810
> 
> 标签：rubygems, gollum-wiki

我一直在顽固地尝试在防火墙后面安装 gollum，下载所有依赖项 gem，直到 gollum 安装时没有错误或 --force。现在它已安装，我收到以下错误：

```
~/docs$ gollum
/usr/lib/ruby/vendor_ruby/1.8/rubygems/custom_require.rb:55:in `gem_original_require': no such file to load -- gollum (LoadError)
        from /usr/lib/ruby/vendor_ruby/1.8/rubygems/custom_require.rb:55:in `require'
        from /var/lib/gems/1.8/gems/gollum-2.4.11/bin/gollum:18
        from /usr/local/bin/gollum:19:in `load'
        from /usr/local/bin/gollum:19 
```

有人可以指导我如何实现这一目标吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T08:40:52.787

通常，在发布问题后，我立即尝试了另一件事：下载 gollum gem 本身而不是从 master 构建它。这很好。

# syntax - Vim 语法：仅匹配区域的开头 - 不匹配后续区域

> ID：14953068
> 
> 赞同：3
> 
> 时间：2013-02-19T08:36:55.780
> 
> 标签：syntax, vim

我有以下 Vim 语法文件：

```
" Vim syntax file
" Language: ScreenplayText - the textual source of ScreenplayXML
" Maintainer: Shlomi Fish <shlomif@iglu.org.il>
" Home: http://search.cpan.org/dist/XML-Grammar-Screenplay/
"
" Author: Shlomi Fish
" Filenames: *.screenplay-text.txt
" Last Change: Thu Jul  3 00:59:42 IDT 2008
" Version: 0.0.1

" Thanks to Andy Wokula for his help on:
" https://groups.google.com/group/vim_use/browse_thread/thread/6c0906617d67864e/a21938c5df1d15cb?show_docid=a21938c5df1d15cb

" Quit if syntax file is already loaded
if version < 600
    syntax clear
elseif exists("b:current_syntax")
    finish
endif

syntax sync minlines=50

" syntax match screenplayTextComment /<!--\_.\{-0,}-->/
" syntax match screenplayTextDescription /^ *\[\_.\{-0,}\]/
syntax region screenplayTextComment start="<!--" end="-->"
syntax region screenplayTextDescription start="^ *\[" end="]"

" syntax region screenplayTextSaying start=/\(^\s*\n\)\@<=\_^\(+\{2,\}\|[^[:+]*\):/ end=/^\s*$/ contains=screenplayTextAddress,screenplayTextInnerDesc
syntax region screenplayTextSaying start=/\(^\s*\n\)\@<=\_^\(+\{2,\}\|[^[:+]*\):/ end=/^\s*$/ contains=screenplayTextAddress

" syntax match screenplayTextAddress /\%^\(+\{2,\}\|[^[:+]*\):/ contained nextgroup=screenplayTextInnerDesc
syntax match screenplayTextAddress /[^:]\+:/ contained nextgroup=screenplayTextSayingAfterAddress

syntax region screenplayTextSayingAfterAddress contained
" syntax match screenplayTextInnerDesc /\[\_.\{-0,}\]/ contained nextgroup=screenplayTextInnerDesc

" For debugging - remove.
" hi def link screenplayTextSaying Statement

hi def link screenplayTextComment Comment
hi def link screenplayTextDescription PreProc
hi def link screenplayTextInnerDesc PreProc
hi def screenplayTextAddress      term=bold cterm=bold gui=bold 
```

它适用于[XML-Grammar-Screenplay](http://www.shlomifish.org/open-source/projects/XML-Grammar/Fiction/)，但 screenplayTextAddress 仍然使用“：”突出显示后续行中的内容，例如：

```
Kate: Of course! See, my obsession with the Bible continued throughout my
life, and later on I became a scholar: first as a married woman who just
hanged around universities and learned things from the male professors
and students, later on as someone who helped some professors with their
research and eventually got credited, and as time progressed,
I got a B.A., and then a Ph.D., and am now a professor. 
```

带有“：”冒号的第二行仍然突出显示。如何防止它被突出显示？

感谢您的任何见解。

问候，

——什洛米鱼

**PS：**这里是[vim-screenplay-text highlighting 的存储库](https://bitbucket.org/shlomif/vim-screenplay-text)（bitbucket 上的 Mercurial），这是[我用来测试它的剧本](https://github.com/shlomif/Selina-Mandrake/blob/master/selina-mandrake/screenplay/selina-mandrake-the-slayer.screenplay-text.txt)（在其 GitHub git 存储库中）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T11:44:14.313

该`screenplayTextSaying`组包含两个分支；我将它们分成两个单独的区域，然后使用`matchgroup`直接在以冒号结尾的地址的区域开头进行突出显示。看`:help :syn-matchgroup`

```
syntax region screenplayTextSaying start=/\(^\s*\n\)\@<=\_^+\{2,\}:/ end=/^\s*$/
syntax region screenplayTextSaying end=/^\s*$/ matchgroup=screenplayTextAddress start=/\(^\s*\n\)\@<=\_^[^[:+]*:/
"syntax match screenplayTextAddress /[^:]\+:/ Not needed any more! 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T10:13:46.030

识别段落第一行的唯一方法似乎是它跟在一个空行之后。

```
" Define blank line at first
syntax match EmptyLines "\(^\s*\n\)\+" nextgroup=FistLine, Description

" Then define Fist line
syntax region FirstLine start=+^[^\<\[]+ oneline contains=Address

" Then define Address
syntax match Address "^[^<\[]+:" contained

" Description
syntax match Description "\[[^\[]+\]"

" Comment
" Comment match code

" For the rest of text, just give them a general format 
```

我没有测试代码，只是提供一个想法。请自行尝试。希望这可以帮助。

# php - PHP 的内容不会显示在 jQuery 对话框中

> ID：14953072
> 
> 赞同：0
> 
> 时间：2013-02-19T08:37:14.850
> 
> 标签：php, jquery-ui, dialog

我正在尝试在 jQuery UI 对话框中加载 PHP 文件的内容，但该对话框不会打开。如果我使用 FireBug 调试代码，以下行似乎有一个中断而没有任何错误报告`$('#formDialog_open').load($(this).attr('href'), function()`

**HTML**

```
<div id="formDialog_open" class="widget grid6" title="Dialog with form elements">
//my php codes
</div> 
```

**超链接触发对话框的内容**

```
<a href="edit.php?id=' .$aRow['id']. '" id="form" class="tablectrl_small bDefault tipS" title="Edit"> 
```

**Javascript**

```
 $('#form').live('click',function(e) {
        e.preventDefault();
        $('#formDialog_open').load($(this).attr('href'), function(){

            $('#formDialog_open').dialog({
                title: 'User Administration',
                resizable: true,
                modal: true,
                hide: 'fade',
                width:350,
                height:275,
            });//end dialog   
        });
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T08:45:14.690

建议你关注`

```
$("#button1").click(function () {

        $('#formDialog_open').dialog({
            title: 'User Administration',
            resizable: true,
            modal: true,
            hide: 'fade',
            width:350,
            height:275,
        });//end dialog   
});` 
```

检查一下，发现似乎点击事件没有执行。所以我给出了#button1 点击事件的代码。

您也可以使用跟随[Jquery Dialog](http://jqueryui.com/dialog/)和[Click Event](http://api.jquery.com/click/) Jquery 文档

# node.js - 带有 socket.io 的 node.js 服务器同时处理 50000 个客户端

> ID：14953076
> 
> 赞同：8
> 
> 时间：2013-02-19T08:37:49.380
> 
> 标签：node.js, socket.io, cpu-load

我们正在开发一个 Javascript 控件，该控件应不断连接到服务器以接收动画更新。

我们计划在亚马逊云上托管这些东西。

场景是这样的：服务器连接到 activemq 队列等待更新，对于每个更新它都会将它广播给所有连接的客户端。

甚至可以用 node.js + socket.io 处理这样的负载吗？单个 node.js 服务器是否能够处理这样的负载？如果我们必须使用多个节点，如何组织不同节点之间的快速传输？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-19T09:12:05.310

> 单个 node.js 服务器是否能够处理这样的负载？.. 如果我们必须使用多个节点，如何组织不同节点之间的快速传输

您说您计划在亚马逊上托管。因此，首先，不应将任何内容限定为单个服务器。亚马逊机器将简单地“消失”，您必须假设您将使用多台计算机。

> ...同时处理 50k 个客户端

因此，首先，单个盒子的 50k 连接是一个非常大的数字。这是一篇[非常详细的博客文章](http://weblog.bocoup.com/node-stress-test-analysis/)，讨论了使用 node.js+socket.io “达到 10k”。

这是一个非常有说服力的报价：

> 似乎 10,000 个客户端只需要比我的服务器能够处理的更多的序列化。

因此，“达到 50k”的关键组成部分将是仅通过网络推送数据所需的工作量。

> 如果我们必须使用多个节点，如何组织不同节点之间的快速传输。

那篇博文是 3 篇中的第一篇。完成第一篇后，请阅读另外两篇。那应该为您指明正确的方向。

# jquery - jQuery Validation 条件规则使输入永远无效 - 有效总是返回 0

> ID：14953078
> 
> 赞同：0
> 
> 时间：2013-02-19T08:38:01.320
> 
> 标签：jquery, jquery-validate

我在使用 jQuery 验证条件规则时遇到问题。

我为一个元素指定一个条件规则，如下所示：

```
var validatorSettings = $("form").data('validator').settings; 
validatorSettings.rules = $.extend({}, validatorSettings.rules, {
        TimeFrameAmount: {
            number: function() { return $("select[name='TimeFrameUnits']").val() === "true"; },
            required: function() { return $("select[name='TimeFrameUnits']").val() === "true" } ;
        }
}); 
```

问题是当我提交表单时，`$("form").valid()`返回 0。

我追踪到这`$("input[name='TimeFrameAmount']").valid()`是表单中唯一返回 0 的元素，因此是导致表单验证失败的元素。

我进一步追查到`$("input[name='TimeFrameAmount']").valid()` **始终**返回 0 并导致表单验证失败，即使条件规则函数都返回 false。

我通过在条件规则函数中设置断点来检查这一点，然后`$("input[name='TimeFrameAmount']").valid()`从 Firefox 控制台触发调用。

我的条件规则都返回 false 并且`$("input[name='TimeFrameAmount']").valid()`仍然返回 0 并且表单验证失败。

需要注意的一件事是，`errorPlacement`当我的条件规则返回 false 时，不会触发回调，这是有道理的，因为没有验证 = 没有错误。

实际上，在我验证表单时，输入甚至具有“有效”类（并且之后仍然具有）

但是，这些都不能阻止该`valid()`方法返回 0

任何想法如何让表单通过验证？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T08:59:01.033

原来添加条件规则的正确语法是：

```
TimeFrameAmount: { 
    required: { 
        depends : function () { 
            //check conditionality 
        } 
    } 
} 
```

# java - Spring MV Porlet ActionMapping 不工作

> ID：14953079
> 
> 赞同：1
> 
> 时间：2013-02-19T08:38:06.587
> 
> 标签：java, spring, portlet, spring-portlet-mvc

我在 Spring MVC Portlet 框架中有一个带有控制器的简单登录表单。表格看起来像这样

```
<portlet:actionURL var="loginAction">
    <portlet:param name="action" value="login" />
</portlet:actionURL>

<div class="portlet-section-body">
    <form:form name="loginForm" method="post" action="${loginAction}" commandName="loginForm" >
        <table>
            <tr>
                <td><span class="portlet-form-field-label">Username: </span></td>
                <td><form:input class="portlet-form-input-filed" path="login" /></td>
                <td><form:errors path="login" /></td>
            </tr>
            <tr>
                <td><span class="portlet-form-field-label">Password: </span></td>
                <td><form:input class="portlet-form-input-filed" path="password" /></td>
            </tr>
            <tr>
                <td><input class="portlet-form-button" type="submit" value="Login"/></td>
            </tr>
        </table>
    </form:form>
 </div> 
```

和控制器

```
@Controller
@RequestMapping(value="VIEW")
public class LoginController {

    @RenderMapping("render=showBookListPage")
    public String showBookListPage() {
        return "bookList";
    }

    @ActionMapping(params="action=login")
    public void loginUser(ActionResponse response) {
        response.setRenderParameter("render", "showBookListPage");
    }

    @ModelAttribute("loginForm")
    public LoginForm getLoginForm() {
        return new LoginForm();
    }
} 
```

问题是 - 当我提交表单时，我被重定向到`/bookShop-1.0/portal/classic/showcase/somePortalGeneratedString`错误的页面，因为我的 portlet 在`localhost:8080/portal/classic/showcase`URL 上，所以我收到 404 错误。`<portlet:renderURL>`标签和映射工作正常，但我不能简单地让这个表单工作。

我的环境是：JBoss JPP 6.0（基于 GateIn 3.5）、Spring 3.2.1 和 Portlet 2.0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T10:17:14.090

这是 Spring 3.2.1 和 3.2.2 中的错误：[https ://jira.springsource.org/browse/SPR-10382](https://jira.springsource.org/browse/SPR-10382)

该修复计划用于 3.2.3。同时你可以降级到3.2.0。

# sql-server - EF Code First 如何正确设置数据库凭据

> ID：14953080
> 
> 赞同：3
> 
> 时间：2013-02-19T08:38:08.243
> 
> 标签：sql-server, entity-framework, ef-code-first

我有开发人员 MVC4 + EF Code First + SQL Server 2008 Web 应用程序。使用 IIS7 将其上传到产品服务器。创建了新凭据`PC`。将空数据库添加`PCDB`到 SQL Server 并为其分配具有所有者权限的用户 PC。当我运行网络应用程序时出现错误

> *无法检查模型兼容性，因为数据库不包含模型元数据。只能检查使用 Code First 或 Code First 迁移创建的数据库的模型兼容性*

我的连接字符串是

```
data source=174.xx.x.x;initial catalog=pcdb;user id=pc;password=xxxxx; 
```

例外是可以理解的，我可以删除`PCDB`数据库并让 EFCode First 自己创建它。但是凭证`PC`呢？我不想让`PC`用户成为管理员，但没有它，EF Code First 将无法在 SQL Server 中创建新数据库。

如何解决问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T14:20:27.930

整体设计从 WebsiteASP.NET/IIS 上的表单或 Windows 身份验证开始。并以您想要/需要的应用程序和数据库身份验证结束。应用程序授权是另一个主题。我不会在这里讨论。

您实际上并未说明所需的身份验证模型。因此，我将从免责声明开始。这是我将在生产站点中使用的建议。但这不是最终的结局，也不是​​您可能考虑的唯一短期解决方案。

**这是一个单人表演可以发挥作用的解决方案**。并且是安全的，无需过多的管理工作即可继续运行。

**通过 Windows Auth 使用 SQL Server 登录，** 但您不需要将每个用户都添加到 SQL Server。
还有模拟的选项。但这可能会变得棘手，而且这种解释不是模仿。那是另一种方法。

**首先确保网站正在使用 Windows 身份验证**

将 IIS 设置为使用 Windows 身份验证： ![在此处输入图像描述](../Images/cba34d3557afd92c587a6391e2ad34d2.png)

现在你已经配置好**IIS上网站后面的APP Pool了。**.

我将建议在 APP 池中使用 Psuedo-service 用户作为**开始**的好方法。即WEBAPPLICATION_X_USER。每个 APP 池可以有一个单独的用户。每个用户只能访问其数据库。所以你得到应用程序分离。您在此处输入用户名和密码。IIS 将根据需要进行加密和解密。（比 Web.config 中的计划文本更好）

![在此处输入图像描述](../Images/48a0a36d147644b94b0c0fbc5e602281.png) 该用户应该在服务器本身上减少了身份验证。不是域上的管理员用户，甚至不是本地管理员。刚好可以使用 Sql server 创建数据库。 **所以创建一个普通的windows用户**

让 ASP.Net 登录到 DB。让 ASP.net 加密和解密密码。

![SQL Server 中的特殊服务用户权限](../Images/0c52ea5ef4821d1dc87c8be84b94a49d.png)

所以现在的情况是 IIS 上的 Windows AUTH。IIS 有一个应用程序池，其中有一个可以登录到 SQL 服务器的特殊 Windows 用户。您已将此用户添加到 SQL 服务器实例并分配此服务用户创建数据库的能力。不要让用户访问所有 Dbs :-) 只是它将创建的一个。加上公共访问（通过 EF）。

验证您的WEB APP中的用户凭证情况。请参阅**[System.Security.Principal.WindowsIdentity]** 这应该显示您的 Windows 身份验证最终用户。

**System.Environment.UserName** 应该具有您放置在 IIS APP POOL 中的服务用户 ID。

现在，当 EF 在 SQL 服务器实例上创建或访问数据时，如果 WEB.CONFIG 条目设置为使用 windows 集成安全性，它将与 System.Environment.UserName 连接

```
<connectionStrings>
<add name="DbContextName" connectionString="Data Source=Your SQL server Instance;Initial Catalog=The DBNAME;Integrated Security=True;MultipleActiveResultSets=True;App=EntityFramework" providerName="System.Data.SqlClient" /> 
```

**而且您知道经过身份验证的用户**。 **httpContext会像****thread current principal**一样把它给你。HttpContext.User 默认映射到 {System.Security.Principal.WindowsPrincipal}

因此，您可以执行应用程序级别检查。**同样**的方法也应该适用于 Forms Authentication 。

**警告：**如果您有**Windows WPF** 方法（即您没有使用 IIS，因此没有 APP 池），则必须更改此方法并且更复杂，不再是最佳起点。

我希望这可以帮助您入门

# php - php if 和 isset 以及 if 变量未设置且不存在

> ID：14953083
> 
> 赞同：0
> 
> 时间：2013-02-19T08:38:24.013
> 
> 标签：php, if-statement, isset

可能是一个奇怪的，我希望可以在一行中完成。

我必须有一个 IF 语句来检查两件事。

*   第一个检查变量 $loggedInfo['status'] 是否已设置并且等于“client”。
*   第二个检查变量 $loggedInfo['address1'] 是否已设置并且为空。

原因是当第一个变量等于人员时，“address1”变量不存在。

我确实有以下内容，但是当我以员工身份登录时，它仍然会检查地址 1

```
if((isset($loggedInfo['status'])=="client")&&(!$loggedInfo['address1'])){
  //Do something
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T08:41:29.410

isset 返回真或假。您必须单独检查实际值

```
if(
 isset($loggedInfo['status']) && $loggedInfo['status']=="client" &&
 isset($loggedInfo['address1']) && trim($loggedInfo['address1']) != ''
)
{
  //Do something
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T08:57:18.447

```
if((isset($loggedInfo['status']) && $loggedInfo['status']=="client") &&(empty($loggedInfo['address1'])){
  //Do something
} 
```

`isset()`如果给定变量在当前范围内定义为非空值，则返回 TRUE。

`empty()`如果给定变量未在当前作用域中定义，或者如果它使用被视为“空”的值定义，则返回 TRUE。这些值是：

```
NULL    // NULL value
0       // Integer/float zero
''      // Empty string
'0'     // String '0'
FALSE   // Boolean FALSE
array() // empty array 
```

根据 PHP 版本，没有属性的对象也可能被认为是空的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T08:41:49.673

好吧，您只是无法将 的返回值`isset()`与 string进行比较`"client"`，因为它永远不会等于那个值。引用[http://php.net/manual/en/function.isset.php](http://php.net/manual/en/function.isset.php)它的返回值是“`TRUE`如果 var 存在并且具有除 之外的值`NULL`，`FALSE`否则”。

首先检查是否设置

```
if ((isset($loggedInfo['status']) === true) && ($loggedInfo['status'] === "client") && (empty($loggedInfo['address1']) === true)) {
    // Do something
} 
```

关键应该是查找您使用的每个函数的返回值，例如`empty()`在手册[http://www.php.net/manual/en/function.empty.php](http://www.php.net/manual/en/function.empty.php)中。这将为您将来省去很多麻烦。

# facebook - 以编程方式发布 Facebook 用户的个人资料图片

> ID：14953087
> 
> 赞同：0
> 
> 时间：2013-02-19T08:38:29.110
> 
> 标签：facebook, facebook-graph-api

是否可以使用 以编程方式发布用户的个人资料图片`Graph API`？

我需要将选定的图像发布到 Facebook API 并将其设置为默认头像。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T08:48:46.757

不，这是不可能的......................................

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T09:03:51.350

不，亲爱的，这是不可能的。你所能做的就是从 FB 获取它，但不能设置它。它从 facebook 文档中取出。

# php - javascript 无法与 php 一起正常工作

> ID：14953088
> 
> 赞同：-4
> 
> 时间：2013-02-19T08:38:34.877
> 
> 标签：php, javascript

我试图在 php 中调用简单的 javascript 函数。我无法调用该函数 showResult()。我不知道这段代码有什么问题。你能帮我查一下吗？我感谢您的帮助。
[http://www.mediafire.com/?hycdzegki1n79lg](http://www.mediafire.com/?hycdzegki1n79lg)
关于，

更新：是的。我知道这是修复性问题（现在也以否定关闭），但我认为问题有所不同。实际上，我可以写其他类似的东西，只是我被这个卡住了。我不能在这里发布完整或必要的功能，因为发布后，它变得混乱。很抱歉给你添麻烦了。我要上传什么链接？

```
<?php
echo '<select name="companyNameList" onchange="showResult()" >';
for ($row = 0; $row < 2; $row++)
{
echo '<option value="'.$placement[$row]["company_name"].'">'.$placement[$row]    ["company_name"].'</option>';
}
echo '</select>';
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T08:47:22.653

javascript 不是问题，我为您制作了一个简单的 js-fiddle，我认为问题在于您的 php 代码及其生成的内容。您能否发布 php 代码呈现的完整 html？

我认为`$placement[$row]['company_name']`可能不包含字符串。

这里的 jsfiddle 向您展示了 js。 [http://jsfiddle.net/HWFQH/1/](http://jsfiddle.net/HWFQH/1/)

否则试试这个，如果它在你的视图/html代码中，对你来说可能更容易阅读。

```
<select name="companyNameList" onchange="showResult()">
<?php for ($row = 0; $row < 2; $row++):?>
     <option value="<?php echo $placement[$row]["company_name"];?>">
          <?php echo $placement[$row]["company_name"];?>
      </option>
<?php endfor;?>
</select> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T08:46:16.307

有几个问题。

HTML 结构和 Form 标签不正确，它们应该在正文中

```
<html>
   <head>
      <script>
      </script>
   </head>
   <body>
     <form>
     </form>
   </body>
</html> 
```

这是你应该遵循的结构

他们编写 onChange 函数的方式是正确的，但我认为问题出在 showResult JS 函数中

在您使用过的功能中

```
<script type="text/javascript">
function showResult()
{
    var companyName = companyNameList.value;
    var insertvalue = d.getElementById('lblCompanyName');
    insertvalue.innerHTML = companyName
    //    document.getElementById("lblCompanyName").value=document.getElementById("companyNameList").value;
        <?php echo "hi";?>

}
</script> 
```

请注意，它`<?PHP echo 'hi'; ?>`只会在 JS 中输出“hi”，这没有任何意义，可能会导致 JS 错误。你应该像这样使用它

```
<script type="text/javascript">
function showResult()
{
    var companyName = companyNameList.value;
    var insertvalue = d.getElementById('lblCompanyName');
    insertvalue.innerHTML = companyName
    //    document.getElementById("lblCompanyName").value=document.getElementById("companyNameList").value;
        <?php echo "alert('hi');";?>

}
</script> 
```

我希望这些能解决你的问题

**编辑**

给你的下拉选择一个 id `companyNameList`。

```
<script type="text/javascript">
    function showResult()
    {

        <?php echo "alert('hi');";?>
        var companyName = document.getElementById("companyNameList");
        var companyNameValue = companyName.options[companyName.selectedIndex].value;
        var insertvalue = document.getElementById('lblCompanyName');

        insertvalue.innerHTML = companyNameValue;
    }
</script> 
```

请安装`firebug`在您的 Firefox 中以捕获脚本中的任何错误

**编辑完整代码**

检查此代码

```
<?php
$link = mysqli_connect('localhost', 'root', '','xerox_test');
if (!$link) {
    die('Could not connect: ' . mysql_error());
}
$statement = "SELECT * from form_results";
$result = mysqli_query($link,$statement);
$placement= array(); 
$i=0;
while($row = mysqli_fetch_array($result))
{    
    $rowktl[$i] = $row;
    $placement[$i]['company_name'] = $rowktl[$i]['company_name'];
    $i++;
   }
?>
<html>

<head>
<script type="text/javascript">
    function showResult()
    {

        <?php echo "alert('hi');";?>
        var companyName = document.getElementById("companyNameList");
        var companyNameValue = companyName.options[companyName.selectedIndex].value;
        var insertvalue = document.getElementById('lblCompanyName');

        alert(companyNameValue);
        insertvalue.innerHTML = companyNameValue;
    }
</script>
</head>
<body>
<form method="post" action="">  
<p>Select the data</p> 
<?php
echo '<select name="companyNameList" id="companyNameList" onchange="showResult()" >';
for ($row = 0; $row < 2; $row++)
{
    echo '<option value="'.$placement[$row]["company_name"].'">'.$placement[$row]["company_name"].'</option>';
}
echo '</select>';
?>
<br>
<input name="Submit" type="button" class="Submit" value="Submit"  onClick="showResult()" />
<table border=2>
    <tr>
        <td>Case Number <br></td>
        <td>Technican ID <br></td>
        <td>Company Name <br><label id="lblCompanyName">Here</label> </td>
    </tr>
    <tr>
        <td>Model Number <br></td>
        <td>Machine Serial Number<br></td>
        <td>Company Address<br></td>
    </tr>
    <tr>
        <td>Customer Name<br><?php echo json_encode($placement[0]['customer_name']);?></td>
        <td>Customer Email<br></td>
        <td>Contact Number<br></td>
    </tr>
    <tr><td colspan=3>Remark<br></td></tr>
</table>
</form>
</body>
</html> 
```

我在循环上方的 php 代码中添加了`id="companyNameList"`to `<select>`。还更新了 JS 功能。

现在如果你使用它，你能在警报中看到选定的值吗？如果您看不到这意味着我们尚未获得选定的值。如果您看到正确的值，则表示分配不正确。

# sql - 正则表达式删除字符串中所有出现的多个字符

> ID：14953099
> 
> 赞同：2
> 
> 时间：2013-02-19T08:39:20.277
> 
> 标签：sql, regex, postgresql, pattern-matching

在我的 PostgreSQL 中，我想替换`(;<>)`字符串中出现的所有字符。

我的查询：

```
update table_name set text = regexp_replace(text, '/[(;<>)]+/g', ''); 
```

我认为我的正则表达式是错误的。谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-19T08:48:53.167

[`translate()`](https://www.postgresql.org/docs/current/functions-string.html#FUNCTIONS-STRING-OTHER)在这个简单的情况下使用更快：

```
UPDATE tbl SET text = translate(text, '(;<>)', ''); 
```

第二个参数中没有对应第三个参数的每个字符都被替换为空。

正则表达式解决方案可能如下所示：

```
regexp_replace(text, '[(;<>)]', '', 'g'); 
```

基本元素是`'g'`替换“全局”而不仅仅是第一个匹配项的第四个参数。第二个参数是一个字符类。
您走在正确的轨道上，只是[`regexp_replace()`](https://www.postgresql.org/docs/current/functions-string.html#FUNCTIONS-STRING-OTHER).

### 提示`UPDATE`

如果您不希望更改*所有*行，我强烈建议您调整您的`UPDATE`陈述：

```
UPDATE tbl
SET    text =  translate(text, '(;<>)', '')
WHERE  text <> translate(text, '(;<>)', ''); 
```

这样可以避免（昂贵的）空更新。（`NULL`在这种特殊情况下会自动覆盖。）

# sql-server - 我无法连接到 SQL Server Management Studio Express 版本 9

> ID：14953103
> 
> 赞同：1
> 
> 时间：2013-02-19T08:39:29.110
> 
> 标签：sql-server, local, connect

我已经在我的系统上安装了 SQL Server Management Studio Express，并且之前在我的系统上安装了 Visual Studio 2008。

但问题是我无法连接到 SQL Server Management Studio Express

我试过用`\SQLEXPRESS`or`.`或`(local)\SQLEXPRESS`or`(local)`和其他东西填充服务器 namre 组合框

但我面临不同的错误，如果可以的话请帮忙

# hadoop - hadoop 2.0 shuffle 基准测试

> ID：14953104
> 
> 赞同：2
> 
> 时间：2013-02-19T08:39:29.277
> 
> 标签：hadoop

我发现一些页面说 hadoop 2.0 有一个用于 shuffle 的内置基准测试工具。

但我找不到它！

有人可以指导我在哪里寻找相同的东西吗？我知道在 hadoop 0.20.* 中有一个测试罐。但我在 hadoop 2.0 中找不到它。

# java - EC 签名大小？

> ID：14953113
> 
> 赞同：4
> 
> 时间：2013-02-19T08:39:56.553
> 
> 标签：java, security, cryptography, digital-signature

我已经为此苦苦挣扎了一段时间。这是我的场景。我正在尝试生成 25 个字符的软件产品密钥（如 Microsoft 风格的 FFFFF-EEEEE-DDDDD-BBBBB-77777）。我已经通过 nonce（原始产品密钥）成功生成 - 根据这篇文章，我的最终产品密钥（在以 base 24 格式编码之前）应该正好是 15 个字节（我的 nonce 为 4 个字节，我的数字签名为 11 个字节）。

现在的问题是如何生成一个 11 字节的签名？我尝试过使用当前最短的签名密码术（ECC - 使用 secp128r2 曲线 - 它给了我一个 128 位的私钥）。签名后，我的签名大小为 80 字节（如 Java 语句打印的

```
System.out.println("length: "+signedProductKeyBytes.length); 
```

我的问题是：

1.  EC 密钥大小（以位为单位）与生成的 EC 签名的长度（以字节为单位）之间究竟有什么关系？

2.  例如，一个 128 位的 EC 密钥应该产生多少字节的签名大小？

3.  如何生成 11 字节签名（顺便说一句，我确定在 Windows XP 时代没有 EC 密钥 - 所以 MS 没有使用 EC - 有没有更好的方法？说使用 RSA 32 位密钥或者其他的东西？）？

4.  字符串的大小（在我的情况下是一个只有 9 个字符的字符串，例如正在签名的“123456789”）是否在签名的最终长度中起作用？

已经为此苦苦挣扎了一段时间，在网上到处搜索 - 有很多技术讲座的答案 - 但没有具体回答我的问题（我得到的最近的是 [这篇文章 RSA 密钥](https://stackoverflow.com/questions/6658728/rsa-signature-size)）

我希望我能得到一些快速的回应——我的项目已经延迟了几周。多谢你们！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-19T10:33:50.060

我知道没有生成小签名的安全签名方案。

*   原始 ECC 签名（ECDSA 等）是安全级别的四倍。如果您想要 80 位安全级别（使用 160 位曲线），您将获得 40 字节的签名。您可以减少几个字节，牺牲一点安全性，但将其中断在 20 到 30 个字节之间就变得微不足道了。

    128 位曲线（64 位安全性，可以被破坏，但它可能太昂贵而不值得）将产生一个 32 字节的签名。

*   有限域签名（DSA 等）与具有相同安全级别的 ECC 的签名具有相同的大小。

*   RSA 签名的大小与模数相同。使用相当小的 768 位密钥，您可以获得 96 字节的签名。

*   BLS 签名非常接近。签名大小仅为安全级别的两倍。80 位级别的 20 个字节。64 位级别的 16 个字节。您应该能够通过截断减少另外两个字节左右，以换取更高的签名验证时间。

# mysql - 尽管更新了记录，但 MySQL 中的时间戳没有更新

> ID：14953115
> 
> 赞同：0
> 
> 时间：2013-02-19T08:39:58.983
> 
> 标签：mysql, phpmyadmin

我的 MySQL 数据库中有一个包含时间戳的列。无论我更新记录多少次，我的时间戳都不会更新。有什么我应该做的让它自动更新吗？

在Stackoverflow这里搜索其他问题，大部分都说反了，真的很迷茫！例如，这个， [我应该使用字段'datetime'还是'timestamp'？](https://stackoverflow.com/questions/409286/datetime-vs-timestamp)（查看评分最高的答案）

谢谢

这是我的表结构

```
+----------------+-------------+------+-----+-------------------+----------------+
| Field          | Type        | Null | Key | Default           | Extra          |
+----------------+-------------+------+-----+-------------------+----------------+
| Num            | int(11)     | NO   | PRI | NULL              | auto_increment |
| mem_name       | varchar(50) | NO   |     | NULL              |                |
| mem_id         | int(11)     | NO   |     | NULL              |                |
| car_number     | varchar(11) | NO   |     | NULL              |                |
| firstcall_time | timestamp   | NO   |     | CURRENT_TIMESTAMP |                |
| tow_time       | datetime    | NO   |     | NULL              |                |
+----------------+-------------+------+-----+-------------------+----------------+
6 rows in set (0.00 sec)

One Record:

+-----+----------+--------+------------+---------------------+---------------------+
| Num | mem_name | mem_id | car_number | firstcall_time      | tow_time            |
+-----+----------+--------+------------+---------------------+---------------------+
|   1 | Jakey    |  54564 | SHA34345   | 2013-02-19 16:14:12 | 2013-02-19 16:32:45 |
+-----+----------+--------+------------+---------------------+---------------------+
1 row in set (0.00 sec)

After Updating:

+-----+----------+--------+------------+---------------------+---------------------+
| Num | mem_name | mem_id | car_number | firstcall_time      | tow_time            |
+-----+----------+--------+------------+---------------------+---------------------+
|   1 | Tommy    |  54564 | SHA34345   | 2013-02-19 16:14:12 | 2013-02-19 16:32:45 |
+-----+----------+--------+------------+---------------------+---------------------+
1 row in set (0.00 sec) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-19T09:06:41.520

您的时间戳未更新的主要原因是您没有`ON UPDATE CURRENT_TIMESTAMP`在表创建语句中添加子句。

使用 alter table 命令更改它并修改您的列

```
With both DEFAULT CURRENT_TIMESTAMP and ON UPDATE CURRENT_TIMESTAMP, 
the column has the current timestamp for its default value and 
is automatically updated to the current timestamp. 
```

您必须添加 On UPDATE CURRENT_TIMESTAMP

```
CREATE TABLE t1 (
  id int, ts2 TIMESTAMP DEFAULT CURRENT_TIMESTAMP
            ON UPDATE CURRENT_TIMESTAMP); 
```

编辑 - 表格修改命令

```
alter table <tablename> modify <columnName> TIMESTAMP DEFAULT CURRENT_TIMESTAMP
        ON UPDATE CURRENT_TIMESTAMP; 
```

参考[http://dev.mysql.com/doc/refman/5.0/en/timestamp-initialization.html](http://dev.mysql.com/doc/refman/5.0/en/timestamp-initialization.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-10-20T13:16:46.400

添加`On UPDATE CURRENT_TIMESTAMP`

MySQL 查询：

```
ALTER TABLE `table_name` CHANGE `date_field` `date_field` TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP 
```

希望能帮助到你 ！

# android - 点燃与安卓

> ID：14953116
> 
> 赞同：1
> 
> 时间：2013-02-19T08:40:03.910
> 
> 标签：android, kindle

我为android和kindle开发应用程序。我想为两个设备使用一种布局，这可能还是我应该分别为 android 和 kindle 提供布局？Сan 我将功能实现与 ui 分开，以避免同时开发 2 个项目？Kindle 是否有一些限制（声音、授权、存储库工作）或者它是全价值的 Android 设备？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T08:47:14.643

要分离功能实现 UI，请查看 MVC 设计模式。[http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)

它分为模型-视图-控制器包。

基本上，“视图”类是 UI，“模型”包含您的数据和业务逻辑，控制器从“视图”中提取数据并将其传递给“模型”。这是一种将 UI 与实现分离的非常有效的方法，可以提供不同的数据视图或完全不同的用户界面。

例子：

```
Model: Employee.java
View: MainGui.java
Controller: Controller.java 
```

重要的是要注意控制器将模型和视图链接在一起。代码中的任何一点都不应该模型直接引用视图（反之亦然）。控制器通常也有 Main 方法，尽管有些人喜欢有一个单独的“EntryPoint”类。

查看此页面以获取有关 MVC 的快速教程，它非常棒。我在工作中使用过 MVC 无数次。 [http://www.austintek.com/mvc/](http://www.austintek.com/mvc/)

关于“Kindle”，如果您的意思是 Kindle fire，那么它运行的分叉版本的 android 可能有一些缺失或额外的功能。

# ios - 使用弹出框在 prepareForSegue 中设置属性

> ID：14953119
> 
> 赞同：1
> 
> 时间：2013-02-19T08:40:21.467
> 
> 标签：ios, objective-c

我有一个 ViewController，上面有几个在 Interface Builder 中创建的按钮。第一个按钮将显示一个在 IB 中链接的弹出框，它链接到 UINavigationController 并在其下有一个 TableView，其类为`PopupViewController`.

第二个按钮，我有一个动作设置，`goToCategory`点击它时，我想在`PopupViewController`

```
ViewController.m
//go to category
-(IBAction)goToCategory:(id)sender{
    NSLog(@"GO TO CAT");
    //PopupViewController *popupVC = [self.storyboard instantiateViewControllerWithIdentifier:@"popoverVC"];
    //popupVC.currentLevel = 1;
    [self performSegueWithIdentifier:@"popoverSegue" sender:self];
}

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender{
    NSLog(@"seg1");
    if ([[segue identifier] isEqualToString:@"popoverSegue"]){
        //PopupViewController *popupVC = (PopupViewController *)[[segue destinationViewController] visibleViewController];
        //PopupViewController *popupVC = [segue destinationViewController];
        PopupViewController *popupVC=[[[segue destinationViewController]viewControllers]objectAtIndex:0];
        popupVC.test = @"just a test";
        NSLog(@"seg2");
    }
}

PopupViewController.h
@property (nonatomic, strong) NSString *test;

PopupViewController.m
@synthesize test;
-(void)viewDidLoad{
    NSLog(@"test: %@", test); //returns test: (null)
} 
```

我在 SO 上找到了很多答案，因此我的 prepareForSegue 中有一些注释掉的行。但这些都没有设置 的值`test`。`PopupViewController *popupVC = [segue destinationViewController];`由于它引用 UINavigationController 引发错误，所以我不能按原样使用它，即使这似乎是我见过的很多答案中的方法。但无论我尝试哪种方式，输出总是为空？

**更新：**

`PopupViewController *popupVC = (PopupViewController *)[[segue destinationViewController] visibleViewController];``PopupViewController *popupVC=[[[segue destinationViewController]viewControllers]objectAtIndex:0];`从我上面看，`prepareForSegue`两者都在 6.1 模拟器上工作。我的 iPad 的 iOS 是 5.1.1，它不工作。我需要为 iOS 5 做些什么不同的事情吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T08:58:42.030

尝试这个

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    NSLog(@"seg1");
    if ([[segue identifier] isEqualToString:@"popoverSegue"])
    {
        UINavigationController *navController = (UINavigationController*)[segue destinationViewController];
        PopupViewController *popupVC = [navController topViewController];
        popupVC.test = @"just a test";
        NSLog(@"seg2");
    }
} 
```

# c# - 如何返回自定义匿名类型？

> ID：14953120
> 
> 赞同：5
> 
> 时间：2013-02-19T08:40:24.917
> 
> 标签：c#, linq, dynamic, anonymous-types, asp.net-web-api

如何返回取决于字段参数的匿名类型，其中列出了必须包含在匿名类型中的属性？任务实体有20多个属性，客户希望收到不同的属性组合。

```
public class Test
{
    public class Task
    {
        public int Id { get; set; }
        public string Name { get; set; }
        public string Description { get; set; }
        //... more 20 properties
    }

    public List<Task> Tasks = new List<Task>();

    public Test()
    {
        Tasks.Add(new Task { Id = 1, Name = "Task #1", Description = "Description task #1" });
        Tasks.Add(new Task { Id = 2, Name = "Task #2", Description = "Description task #2" });
        Tasks.Add(new Task { Id = 3, Name = "Task #3", Description = "Description task #3" });
    }

    public IEnumerable<object> GetAllTasks(string fields)
    {
        //if fields == 'Id,Name' then return anonymous type new { Id = t.Id, Name = t.Name }
        return Tasks.Select(t => new { Id = t.Id, Name = t.Name });

        //if fields == 'Id,Name,Description' then return anonymous type new { Id = t.Id, name = t.Name, Description = t.Description }
        return Tasks.Select(t => new { Id = t.Id, Name = t.Name, Description = t.Description });
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T09:45:29.967

我希望它会帮助你

```
public List<Task> Tasks = new List<Task>();

public void Test()
{
    Tasks.Add(new Task { Id = 1, Name = "Task #1", Description = "Description task #1" });
    Tasks.Add(new Task { Id = 2, Name = "Task #2", Description = "Description task #2" });
    Tasks.Add(new Task { Id = 3, Name = "Task #3", Description = "Description task #3" });
}

public ActionResult Index()
{
    Test();

    return Json(GetAllTasks(), JsonRequestBehavior.AllowGet);
}

public IEnumerable<object> GetAllTasks()
{
    return Tasks.Select(GetTask);
}

private object GetTask(Task task)
{
    dynamic expandoObject = new ExpandoObject();
    //your if statment block
    if (task.Id == 1)
    {
        expandoObject.Id = task.Id;
    }

    expandoObject.Name = task.Name;
    expandoObject.Description = task.Description;

    var dictionary = expandoObject as IDictionary<string, object>;
    return dictionary.ToDictionary(item => item.Key, item => item.Value);
} 
```

查看结果：

```
[
   [
      {
         "Key":"Id",
         "Value":1
      },
      {
         "Key":"Name",
         "Value":"Task #1"
      },
      {
         "Key":"Description",
         "Value":"Description task #1"
      }
   ],
   [
      {
         "Key":"Name",
         "Value":"Task #2"
      },
      {
         "Key":"Description",
         "Value":"Description task #2"
      }
   ],
   [
      {
         "Key":"Name",
         "Value":"Task #3"
      },
      {
         "Key":"Description",
         "Value":"Description task #3"
      }
   ]
] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T10:03:25.220

您可以尝试使用`ExpandoObject`and `System.Reflection`：

```
public IEnumerable<object> GetAllTasks(string[] fields)
{
    List<object> response = new List<object>();
    Tasks.ForEach((a) =>
    {
        dynamic expando = new ExpandoObject();
        var p = expando as IDictionary<String, object>;
        foreach (string item in fields)
        {
            p[item] = a.GetType().GetProperty(item).GetValue(a);
        }
        response.Add(expando);
    });
    return response;
} 
```

示例用法是：

```
static void Main(string[] args)
{
    var test = new Test();
    var results = test.GetAllTasks(new[] { "Id"});
    foreach (var result in results)
    {
        Console.WriteLine((result as dynamic).Id);
    }

    results = test.GetAllTasks(new[] { "Name", "Description" });
    foreach (var result in results)
    {
        var dynamicResult=result as dynamic;
        Console.WriteLine("{0} {1}", dynamicResult.Name, dynamicResult.Description);
        // The following line will throw an exception
        //Console.WriteLine((result as dynamic).Id);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T10:50:58.470

在这种情况下，如果 Tasks 是`IQueryable<Task>`并且我们需要从数据源（例如，来自数据库）中只收紧客户端所需的那些列（而不是使数据库服务器超载），那么[SelectDynamic](https://stackoverflow.com/a/723018)方法很有用。因此，最终的决定将在这里：

```
public class Test
{
    public class Task
    {
        public int Id { get; set; }
        public string Name { get; set; }
        public string Description { get; set; }
        //... more 20 properties
    }

    public IQueryable<Task> Tasks;

    public Test()
    {
        Tasks = new List<Task>
            {
                new Task {Id = 1, Name = "Task #1", Description = "Description task #1"},
                new Task {Id = 2, Name = "Task #2", Description = "Description task #2"},
                new Task {Id = 3, Name = "Task #3", Description = "Description task #3"}
            }.AsQueryable();
    }

    public IEnumerable<object> GetAllTasks(string[] fields)
    {
        var response = new List<object>();
        var customTasks = Tasks.SelectDynamic(fields).Cast<dynamic>();
        foreach (var t in customTasks.Take(100))
        {
            dynamic expando = new ExpandoObject();

            if (fields.Contains("Id")) expando.Id = t.Id;
            if (fields.Contains("Name")) expando.Name = t.Name;
            if (fields.Contains("Description")) expando.Description = t.Description;
            // ... other properties

            response.Add(expando);
        }
        return response;
    }
} 
```

示例用法在[这里](https://stackoverflow.com/a/14954742/2017821)

# css - 跨浏览器背景 - 渐变加图像

> ID：14953127
> 
> 赞同：2
> 
> 时间：2013-02-19T08:40:55.470
> 
> 标签：css, background, gradient

我试图用图像作为背景制作渐变，但在除基于 web-kit 的任何浏览器中都不起作用。你能帮我解决这个问题吗？

```
background: url("../images/pattern.png"), -moz-radial-gradient(60% 120%, circle, #dfd5a8 0%, #2f71a9 110%);
background: url("../images/pattern.png"), -webkit-radial-gradient(60% 120%, circle, #dfd5a8 0%, #2f71a9 110%);
background: url("../images/pattern.png"), -o-radial-gradient(60% 120%, circle, #dfd5a8 0%, #2f71a9 110%);
background: url("../images/pattern.png"), -ms-radial-gradient(60% 120%, circle, #dfd5a8 0%, #2f71a9 110%);
background: url("../images/pattern.png"), radial-gradient(60% 120%, circle, #dfd5a8 0%, #2f71a9 110%); 
```

非常感谢。PS：我试图为自己申请[http://modernizr.com](http://modernizr.com)，但我不确定它是否是连接插件的好方法.. 是否有可能只使用纯 css .. 我希望如此。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T09:03:42.080

使用带有 alphachannel 的色彩空间，`rgba`或者`hsla`能够使渐变半透明并使用正确的顺序，它将起作用：

[例子](http://jsfiddle.net/nUC83/1/)

```
background:radial-gradient(60% 120%, circle, rgba(223, 213, 168, .75)   0%,
                                             rgba( 47, 113, 169, .75) 110%),
           url("http://placekitten.com/g/200/300"); 
```

# vb.net - 存储配置数据的最佳方式？

> ID：14953129
> 
> 赞同：0
> 
> 时间：2013-02-19T08:40:57.587
> 
> 标签：vb.net, configuration

去年我开发了一个相当大的应用程序。由于我不是专业的程序员，所以我问了一个程​​序员同事如何存储大量的应用程序设置——他的回答是“使用配置类”。所以我最终得到了一个“Constants.vb”文件，其中包含数以千计的配置细节。其中很多不太可能更改，但其中有几十个可能会更改，并且应该由客户更改。我对这种混乱不满意，因为它变得越来越难以维护 - 我已经看到了 my.settings / my.resources 类，并且我将它们用于一些设置 - 但由于没有明显的方法来组织数据，我不热衷于将大量配置变量放入 my.settings... 你有什么想法给我吗？

# asp.net - IIS 7 错误“指定的登录会话不存在。它可能已被终止。” 使用 https 时

> ID：14953132
> 
> 赞同：83
> 
> 时间：2013-02-19T08:41:04.167
> 
> 标签：asp.net, iis, ssl, client-certificates

我正在尝试为我的 asp.net 网站创建客户端证书身份验证。

为了创建客户端证书，我需要先创建一个证书颁发机构：

> makecert.exe -r -n “CN=我的个人 CA” -pe -sv MyPersonalCA.pvk -a sha1 -len 2048 -b 01/01/2013 -e 01/01/2023 -cy authority MyPersonalCA.cer

然后，我必须将它导入 IIS 7，但由于它接受 .pfx 格式，我先转换它

```
pvk2pfx.exe -pvk MyPersonalCA.pvk -spc MyPersonalCA.cer -pfx MyPersonalCA.pfx 
```

导入 MyPersonalCA.pfx 后，我尝试将 https 站点绑定添加到我的网站并选择上述作为 SSL 证书，但我收到以下错误：

![在此处输入图像描述](../Images/dc39b1165420fabee903401b5e0fcb6b.png)

有什么建议么？

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2014-09-15T18:54:52.797

我遇到了同样的问题，但以不同的方式修复了它。我相信我使用的帐户从我最初尝试设置证书到我返回完成工作的时间发生了变化，从而产生了问题。问题是什么，我不知道，但我怀疑它与当前用户的某种哈希有关，并且在某些情况下不一致，因为用户被修改或重新创建等。

为了解决这个问题，我从 IIS 和证书管理单元（针对当前用户和本地计算机）中删除了相关证书的所有引用：

![IIS 证书](../Images/484ae358c51dd5385524aec9458fc3fd.png)

![mmc.exe --> 添加/删除管理单元，选择证书，然后选择本地计算机或当前用户](../Images/b81dcd6e2c4342ac69b7d1d6c19b2ddc.png)

接下来，我将 *.pfx 文件导入到 MMC 中的 certs 管理单元中，并将其放置在 Local Computer\Personal 节点中：

1.  右键单击个人下的证书节点（在本地计算机下作为根）
2.  所有任务 -> 导入
3.  通过向导导入您的 *.pfx

从那时起，我能够返回 IIS 并在服务器证书中找到它。最后，我访问了我的站点，编辑了绑定并选择了正确的证书。它之所以有效，是因为用户在整个过程中都是一致的。

对于另一个答案中提到的这一点，您不必将其标记为可导出，因为这是一个*主要的安全问题*。您实际上允许任何可以使用类似权限进入该框的人随身携带您的证书并将其导入其他任何地方。显然这不是最优的。

* * *

## 回答 #2

> 赞同：64
> 
> 时间：2013-10-18T14:09:49.043

**安全警告**：复选框的真正含义是证书可以被不应该读取的用户读取。比如运行IIS工作进程的用户。在生产中使用[另一个答案](https://stackoverflow.com/a/25854919/33080)。

也发生在我身上，并通过确保在导入时**选中**“允许导出此证书”来修复它：

                                            ![在此处输入图像描述](../Images/69baf8b0755c55bcc52d4bc7a83ab447.png)

（感谢[这篇文章](http://forums.iis.net/post/1868325.aspx)！）

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-02-19T11:04:14.520

这一定是某种 IIS 错误，但我找到了解决方案。

1-从 IIS导出*MyPersonalCA.pfx 。*

2-将其转换为**.pem**：

`openssl pkcs12 -in MyPersonalCA.pfx -out MyPersonalCA.pem -nodes`

3-将其转换回**.pfx**：

`openssl pkcs12 -export -in MyPersonalCA.pem -inkey MyPersonalCA.pem -out MyPersonalCA.pfx`

4-将其导入**IIS**。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2015-08-17T15:42:40.330

由于错误地将证书导入当前用户个人证书存储，我们遇到了同样的问题。将其从当前用户个人存储中删除并将其导入本地计算机个人证书存储解决了该问题。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2013-12-26T14:21:47.627

可能没有人再关心这个了，但我只是在我的 IIS 7 网站绑定中遇到了这个问题。我修复它的方法是去证书颁发机构并找到颁发给有问题的服务器的证书。我验证了请求证书的用户帐户。然后，我使用该帐户使用 RDP 登录 IIS 服务器。我只能使用该帐户重新绑定 https 协议。不需要导出、重新发布或扩展更改黑客。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2013-11-07T13:45:36.367

在我们的案例中，出现此问题是因为我们已在虚拟机中安装了证书并制作了它的映像以供进一步使用。

从之前创建的映像创建另一个 VM 时，证书会发送消息。

为避免这种情况，请务必在安装的每个新 VM 上安装证书。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2016-06-07T09:26:00.360

与其从 IIS 导入证书，不如从 MMC 导入证书。然后转到 IIS 进行绑定。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2019-02-11T10:57:08.913

根据[MSDN 博客文章](https://blogs.msdn.microsoft.com/asiatech/2010/08/12/got-error-0x80070520-when-binding-certificate-to-web-site-on-iis-7/)，当当前用户帐户无权访问文件夹“ **C:\ProgramData\Microsoft\Crypto\RSA\MachineKeys”**下的私钥文件时，可能会发生这种情况。显然，这可以通过授予用户帐户/用户组对上述文件夹的**完全访问权限来解决。**

我遇到了同样的问题，并且能够通过简单地重新导入 .pfx 文件并**选中****允许导出此证书**复选框来解决它。

 **[![进口证书](../Images/0fbdfab7b0886ff8b8a05b727a36a08c.png)](https://i.stack.imgur.com/f3IYJ.png)

> 但是，此方法会带来安全风险 - 因为任何有权访问您的 IIS 服务器的用户都可以使用私钥导出您的证书。

就我而言，只有我可以访问我的 IIS 服务器 - 因此这不是一个巨大的风险。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2014-01-20T12:45:21.717

由于在导出 PKCS #12 证书期间错误的 openssl 命令行，我收到此错误。-certfile 密钥错误。我再次导出证书并成功导入。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2021-01-07T04:02:00.633

伙计们，在尝试了几乎所有单一的解决方案都无济于事后，我最终找到了“指定登录会话不存在”的解决方案。它可能已经被终止了。” 使用 https 时

1.  使用正确的私钥验证您的 pfx 证书是否健康

2.  运行 certutil 并找到 certs 'unique Container name' - 我使用了 certutil -v -store my

3.导航到 C:\ProgramData\Microsoft\Crypto\RSA\MachineKeys 并找到与上面找到的容器名称对应的系统文件

4.  检查权限并确保“系统”对文件具有完全控制权。

应用后，我检查了 IIS，并且能够正确地应用到 https

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2015-06-10T07:36:16.460

我遇到过同样的问题。通过从个人商店（有人放入其中）和虚拟主机中删除证书来解决。全部通过 IIS 管理器完成。然后我再次添加到虚拟主机商店（检查了所有内容），我可以再次使用 HTTPS...

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2015-09-02T07:01:28.097

就我而言，这是因为 World Wide Publishing Service 用户没有证书的权限。安装证书后，访问 MMC 中的证书模块并右键单击有问题的证书。从“所有任务”菜单中选择“管理私钥...”并添加上述用户。就我而言，这是 SYSTEM 用户。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2017-05-04T20:52:20.553

尝试为我的开发机器绑定 localhost pfx 证书时出现此错误。在我尝试上述任何方法之前，先尝试一些更简单的方法。

1.  关闭了我打开的任何 localhost 开发站点。
2.  停止了我的 IIS 服务器并关闭了管理器
3.  以管理员身份运行管理器
4.  添加了我所有的 https 绑定，这次没有错误或问题。
5.  重新启动 iis

之后一切似乎都正常了。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2020-09-16T18:29:01.570

我在绑定证书时遇到了同样的错误，但在删除证书并通过 mmc 控制台再次导入后修复。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2015-09-22T06:18:53.980

我设法通过使用 Windows 证书管理器导入 SSL 证书 PFX 文件来解决此问题。

[http://windows.microsoft.com/en-us/windows-vista/view-or-manage-your-certificates](http://windows.microsoft.com/en-us/windows-vista/view-or-manage-your-certificates)

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2016-03-29T09:32:52.337

我今天刚遇到这个问题，不得不发布我的解决方案，希望你会比我刚刚做的少掉头发。

在尝试了上述解决方案后，我们不得不从 SSL 提供商重新签发 SSL 证书（RapidSSL 作为 GeoTrust 的经销商签发）。

这个过程没有**任何成本**，只需等待确认电子邮件 (admin@) 到达时的五分钟，我们就再次获得了访问权限。

得到响应后，我们使用 IIS > 服务器证书来安装它。我们不需要 MMC 管理单元。

[https://knowledge.rapidssl.com/support/ssl-certificate-support/index?page=content&id=SO5757](https://knowledge.rapidssl.com/support/ssl-certificate-support/index?page=content&id=SO5757)

我们始终保持打开服务器的远程桌面窗口，以避免不同登录帐户/会话等的任何问题。我确实相信这是一个 IIS 错误，正如另一位专家所认为的那样，因为我们只有一个 RDC 帐户。最令人气愤的是，同一个证书已经完美运行了两个月，才突然“坏掉”。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2016-09-10T19:07:44.413

就我而言，我最近从 StartSSL 导入了一个较新版本的证书（用于 IIS 的 PFX）并忘记删除旧版本，这以某种方式导致了这个错误（现在两个证书有点相同）。我删除了它们，导入了正确的，现在它可以工作了。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2020-05-07T15:52:59.327

我们找到了另一个原因。如果您正在使用 PowerShell 编写证书安装脚本并使用该`Import-PfxCertificate`命令。这将导入证书。但是，导入的证书无法绑定到 IIS 中的网站，出现与此问题提到的相同错误。您可以使用此命令列出证书并查看原因：

```
certutil -store My 
```

这列出了您的个人存储中的证书，您将看到以下属性：

```
Provider = Microsoft Software Key Storage Provider 
```

此存储提供程序是较新的 CNG 提供程序，不受 IIS 或 .NET 支持。您无法访问密钥。因此，您应该使用 certutil.exe 在脚本中安装证书。使用证书管理器 MMC 管理单元或 IIS 导入也可以，但对于脚本，请使用 certutil，如下所示：

```
certutil -f -p password -importpfx My .\cert.pfx NoExport 
```

有关更多信息，请参阅本文：[https ://windowsserver.uservoice.com/forums/295065-security-and-assurance/suggestions/18436141-import-pfxcertificate-needs-to-support-legacy-priv](https://windowsserver.uservoice.com/forums/295065-security-and-assurance/suggestions/18436141-import-pfxcertificate-needs-to-support-legacy-priv)

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2021-05-02T23:22:33.093

我能够通过双击证书删除然后导入它来解决这个问题。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2021-07-26T15:33:53.873

对我来说，解决方法是从 IIS 中删除证书并重新导入，但导入“个人”证书存储而不是“网络托管”

根据以下内容，这很好，至少在我自己的情况下。

*   [个人和虚拟主机证书存储之间有什么区别？](https://stackoverflow.com/questions/26681192/whats-the-difference-between-the-personal-and-web-hosting-certificate-store)

另外，如果有什么不同，我在本地机器上双击它后通过向导导入了证书，而不是通过 IIS 导入方法。在此之后，证书自动在 IIS 中可用。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2022-01-20T08:01:11.597

就我而言，它已通过使用 certutil -repairstore 命令修复。尝试使用 powershell 将证书添加到 IIS 上的 Web 绑定时出现以下错误：

> 指定的登录会话不存在。它可能已经被终止。

我通过运行修复它：

```
certutil.exe -repairstore $CertificateStoreName $CertThumbPrint 
```

其中`CertificateStoreName`是商店名称，`CertThumbPrint`是导入证书的指纹。

* * *

## 回答 #22

> 赞同：-1
> 
> 时间：2018-11-20T13:54:08.940

尝试 ：

1.  进入 IIS 并删除“VSTS Dev Router”网站和“VSTS Dev Router Pool”应用程序池。
2.  运行“certlm.msc”并打开个人/证书
3.  删除任何名为“*.vsts.me”和“vsts.me”的证书
4.  重新部署**

# iphone - 带有后续处理问题的 resignFirstResponder（键盘关闭被阻止或在 iPhone 5 上崩溃）

> ID：14953134
> 
> 赞同：2
> 
> 时间：2013-02-19T08:41:10.273
> 
> 标签：iphone, ios, thread-safety, uitextfield, resignfirstresponder

我有以下工作流程：

```
Input in Textfield -> (Return key of TextField pressed: resignFirstResponder, IBAction of Button called) -> IBAction of Button: perform an intensive operation 
```

问题是密集操作是在键盘被解除之前开始的`resignFirstResponder`。正如在其他帖子中建议的那样（例如[https://stackoverflow.com/a/3452767/1685971](https://stackoverflow.com/a/3452767/1685971)），我尝试使用：

```
- (BOOL)textFieldShouldReturn:(UITextField *)textField {
    [textField resignFirstResponder];
    [self performSelector:@selector(ibActionMethod:) withObject:sender afterDelay:someTime];
    return YES;
} 
```

这在模拟器或 iPhone 4 上运行良好，但会导致在 iPhone 5 上运行崩溃（我无法理解，因为我没有使用`performSelectorInBackground:withObject:`）：

```
void _WebThreadLockFromAnyThread(bool): Obtaining the web lock from a thread other than the main thread or the web thread. UIKit should not be called from a secondary thread.
bool _WebTryThreadLock(bool): Tried to obtain the web lock from a thread other than the main thread or the web thread. This may be a result of calling to UIKit from a secondary thread. Crashing now... 
```

我尝试的另一个选择是在主线程中等待 resignFirstResponder

```
[textField performSelectorOnMainThread:@selector(resignFirstResponder) withObject:nil waitUntilDone:YES]; 
```

但是这样键盘仍然没有立即关闭（可能是因为该方法只等待选择器的返回`resignFirstResponder`而不是键盘动画的完成。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T09:36:55.993

试试这个

```
dispatch_async(dispatch_get_main_queue(), ^{
    // your button action
}); 
```

我也面临同样的错误，通过上述技巧解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T08:51:16.567

试试这个代码，

```
- (BOOL)textFieldShouldReturn:(UITextField *)textField {

       [textField resignFirstResponder];

        dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        //your code here

        });

       return YES; 
```

}

# ios - Google Analytics 不会跟踪 iOS 上的浏览 量？

> ID：14953136
> 
> 赞同：6
> 
> 时间：2013-02-19T08:41:20.157
> 
> 标签：ios, objective-c, google-analytics

我已将最新的 Google Analytics SDK 添加到我的 iOS 应用程序（版本 2.0 beta 4）。我按照指南所说的做了同样的事情，并将此代码添加到应用程序委托中：

```
// Optional: automatically send uncaught exceptions to Google Analytics.
[GAI sharedInstance].trackUncaughtExceptions = YES;
// Optional: set Google Analytics dispatch interval to e.g. 20 seconds.
[GAI sharedInstance].dispatchInterval = 20;
// Optional: set debug to YES for extra debugging information.
[GAI sharedInstance].debug = YES;
// Create tracker instance.
self.tracker = [[GAI sharedInstance] trackerWithTrackingId:@"UA-TRACKINGID-2"];//UA-33873963-13 - My testing google analytics trackingId

[self.tracker setSessionStart:YES];
[self.tracker setSessionTimeout:60]; 
```

现在，在每个视图上我都添加了这个：

```
self.trackedViewName = @"Main Menu Screen"; 
```

一切正常，但出于某种原因，20 个屏幕中有 3 个没有将自己发送到 Google，我不知道为什么。我在网上搜索过，但没有人遇到过这个问题。我想如果有人熟悉这个问题，那就是堆栈溢出。

请帮我。谢谢！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-19T09:46:06.633

前段时间我遇到了同样的问题。我敢打赌，您不会在覆盖中调用以下方法：

1.  `[super viewDidLoad]`在你的`-(void)viewDidLoad`覆盖
2.  `[super viewDidAppear:animated]`在你的`-(void)viewDidAppear:(BOOL)animated`覆盖
3.  `[super viewDidUnload]`在你的`-(void)viewDidUnload`覆盖
4.  ...（注意您要覆盖的所有其他方法`GAITrackedViewController`

具体来说，您的方法应如下所示：

```
-(void)viewDidLoad
{
  // call this at the beginning of the overridden methods
  self.screenName = @"Some Name"; 
  [super viewDidLoad];

  // your remaining code here
}

-(void)viewDidAppear:(BOOL)animated
{
  [super viewDidAppear:animated];

  // your remaining code here
} 
```

最重要的方法是`viewDidLoad`并且`viewDidAppear:`因为特别是对于实时跟踪`viewDidAppear:`显示该视图当前可见的显示。

**编辑：**自 Google Analytics SDK 3.0 版以来，应在调用`viewDidLoad`super 方法之前设置 screenName 属性。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-12-17T21:43:48.800

我使用的是 3.02 版，遇到了同样的问题。以下解决了我的问题：

```
-(void) viewDidAppear:(BOOL)animated {
   self.screenName = @"My Screen"; // set screenName prior to calling super
   [super viewDidAppear:animated];

   ...
} 
```

你肯定想打电话`super`，因为它会触发发送 ga 数据。在我看来，`screenName`需要在它之前设置。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-07T11:32:46.683

问题已经用最简单的方法解决了。

我写的代码是针对`AppDelegate`. 使用跟踪 ID 初始化跟踪器后，您只需在使用它的每个视图中调用它。（我不确定，但无论如何它对我有用。）

所以，在**`AppDelegate`**：

```
// Optional: automatically send uncaught exceptions to Google Analytics.
[GAI sharedInstance].trackUncaughtExceptions = YES;
// Optional: set Google Analytics dispatch interval to e.g. 20 seconds.
[GAI sharedInstance].dispatchInterval = 20;
// Optional: set debug to YES for extra debugging information.
[GAI sharedInstance].debug = YES;
// Create tracker instance.
self.tracker = [[GAI sharedInstance] trackerWithTrackingId:@"UA-TRACKINGID-2"];//UA-33873963-13 - My testing google analytics trackingId

[self.tracker setSessionStart:YES];
[self.tracker setSessionTimeout:60]; 
```

在视图控制器内部**`viewDidLoad`**：

```
[GAI sharedInstance] defaultTracker];
[self.tracker sendView:@"Some name"]; 
```

这样做之后，它工作得很好。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-19T13:47:12.163

所以，我找到了这个问题的答案：

在标题中添加：`#import "GAI.h"`

现在在 viewDidLoad 中：

1.  添加`self.trackedViewName = @"Some Name";`

2.  比这样做： `[GAI sharedInstance] defaultTracker];`

3.  还要添加这个： `[self.tracker sendView:@"Some Name"];`

比它工作得很好。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-25T23:12:10.347

所以..这是给那里的菜鸟的..（包括我自己）..

这可能是一件愚蠢的事情，但对我来说，愚蠢的**超级视图确实出现了 [super viewDidAppear:animated];** 在您调用设置屏幕名称后。

顺便说一句，我只是一个 iOS 用户，但是当我查看 gaitrackedviewcontroller.h 时，要设置的最新屏幕名称是，屏幕名称不是 trackedviewname。所以，这就是我的样子：

*   (void)viewDidAppear:(BOOL)animated {

    self.screenName = @"登录界面";

    [超级 viewDidAppear:动画];

}

祝你好运。希望这对任何人都有帮助。保持优雅。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-02-25T03:41:09.503

在**3.10**环境中，我遇到了类似的问题。我尝试过其他人的方式，但没有希望。最后，我发现答案在官方说明之外。

添加两行后，它可以工作。

```
 NSDictionary *appDefaults = @{kAllowTracking: @(YES)};
 [[NSUserDefaults standardUserDefaults] registerDefaults:appDefaults]; 
```

官方说明没有提到我们需要在默认值中注册 kAllowTraking。

# c# - 使用 c# 创建具有包含特殊字符的实例名称的链接服务器

> ID：14953142
> 
> 赞同：0
> 
> 时间：2013-02-19T08:41:33.333
> 
> 标签：c#, sql, database, linked-server, sqlcommand

我有一个创建新链接服务器的存储过程。

问题是我的 InstanceName 是“my-pc”（包含“-”），因此无法正确生成 LinkedServer。我的猜测是我从 c# 代码传递参数的方式存在问题，但我找不到解决方案。

我的程序是：

```
CREATE PROCEDURE 
    [test].[createlinkedserver] 
    (
         @InstanceName  AS SYSNAME
    )
AS

BEGIN

    EXECUTE sys.sp_addlinkedserver
        @server     = N'Server' ,
        @srvproduct = N'' ,
        @provider   = N'SQLNCLI' ,
        @datasrc    = [@InstanceName] ,
        @location   = NULL ,
        @provstr    = NULL ,
        @catalog    = NULL

    EXECUTE master.dbo.sp_serveroption
        @server     = N'Server' ,
        @optname    = N'rpc out' ,
        @optvalue   = N'true'

    EXECUTE master.dbo.sp_serveroption
        @server     = N'Server' ,
        @optname    = N'remote proc transaction promotion' ,
        @optvalue   = N'true'

END 
```

我从 c# 调用存储过程：

```
 DbCommand Command = CovertixDB.Database.GetStoredProcCommand("test.createlinkedserver");
    CovertixDB.Database.AddInParameter(Command, "InstanceName", DbType.String,  instanceName);
    CovertixDB.Database.ExecuteNonQuery(Command); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T02:51:43.160

您需要确切知道从 c# 应用程序传递到 SQL 的内容。要进一步尝试将转义转移到 SQL 中，请尝试以下操作：

```
DECLARE @EscapedInstanceName nvarchar(128)
SET @EscapedInstanceName = '[' + @InstanceName + ']'

EXECUTE sys.sp_addlinkedserver
    @server     = @EscapedInstanceName ,
    @srvproduct = N'' ,
    @provider   = N'SQLNCLI' ,
    @datasrc    = @EscapedInstanceName ,
    @location   = NULL ,
    @provstr    = NULL ,
    @catalog    = NULL 
```

然后查看生成的服务器名称。这将告诉您将要进入 DataSource 的字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T09:11:08.690

这行不通！@datasrc = [@InstanceName] 保留为其他参数：

```
@datasrc = @InstanceName 
```

而是更改您的 C# 代码，如下所示：

```
DbCommand Command = CovertixDB.Database.GetStoredProcCommand("test.createlinkedserver");
CovertixDB.Database.AddInParameter(Command, "InstanceName", DbType.String,  "[" + instanceName + "]");
CovertixDB.Database.ExecuteNonQuery(Command); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T14:39:10.880

我将我的 c# 更改为：

```
 DbCommand Command = CovertixDB.Database.GetStoredProcCommand("test.createlinkedserver");
    CovertixDB.Database.AddInParameter(Command, "InstanceName", DbType.AnsiString,  instanceName);
    CovertixDB.Database.ExecuteNonQuery(Command); 
```

我将第 2 行从 DbType.String 更改为 DbType.AnsiString。

然后它起作用了。

实际上，我不太明白为什么，因为 c# DbType.String 适合 NCHAR、NVARCHAR，而 DbType.AnsiString 适合 CHAR、VARCHAR。

我希望它可以与 DbType.String 一起使用...

有人对此有任何解释吗？

# java - 使用 java servlet 将数据从一个 html 页面传递到另一个页面

> ID：14953143
> 
> 赞同：1
> 
> 时间：2013-02-19T08:41:34.260
> 
> 标签：java, html, servlets, post, web

所以我在“File1.html”中有一个 html 表单

```
<form action="MyServlet" method="post">
    MyData: <input type="text" name="data"><br>
    <input type="submit" value="submit">
</form> 
```

然后在我的 servlet 中，我执行以下操作：

```
protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        RequestDispatcher myDispatch = request.getRequestDispatcher("File2.html");
    myDispatch.forward(request, response);
    } 
```

因此，在用户点击 File1 中的“提交”按钮后，servlet 会将用户带到 File2。但是如何访问第二个文件中第一个文件中输入的数据呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T08:50:36.437

在使用 Dispatcher 之前设置要传递的属性

```
request.setAttribute("AttributeName","This is the Attribute value."); 
```

在你的情况下

```
request.setAttribute("data",request.getParameter("data")); 
```

并在发送的页面上，通过

```
String something =  request.getAttribute("data"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T08:45:15.047

你可以这样得到它： -

`request.getParameter("param");`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T08:49:04.553

您可以将参数放入请求：

```
String data = request.getParameter("data");
request.setAttribute("key",data);
myDispatch.forward(request, response); 
```

您可以从新的 servlet 或 jsp 中获取数据，例如：

```
Object data = request.getAttribute("key"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T15:36:56.393

如果重定向到静态 html 文件，则无法通过 servlet 获取参数或属性。

如果您在servlet 中没有任何业务，您可以使用 ，然后通过javascript 从File2.html 中获取数据。

* * *

或者，您可以重定向到 servlet 中的 File2.html 并通过查询字符串（如“File2.html?name=blablabla”）附加数据，并在 File2.html 中使用 javascript 来获取这些数据。

顺便说一句，在 javascript 中，您可以使用 window.location.href 来获取包含查询字符串的当前 url。

# list - 如何创建实际存储信息以供以后会话的函数？（省略）

> ID：14953146
> 
> 赞同：1
> 
> 时间：2013-02-19T08:41:45.657
> 
> 标签：list, emacs, save, elisp

我想为用户提供将内容添加到列表的选项，然后将其保存以供进一步会话。如何在elisp中做到这一点？

```
(setq smart-pair-alist
      '(("(" . ")")             ; key 0
        ("[" . "]")             ; key 1
        ("{" . "}")             ; key 2
        ("\"" . "\"")           ; key 3
        ))

(defun smart-pair-adder (open close &optional mode)
  (add-to-list 'smart-pair-alist `(,open . ,close)  t)
  )

(smart-pair-adder "a" "b") 
```

smart-pair-alist 评估为：

`(("(" . ")") ("[" . "]") ("{" . "}") ("\"" . "\"") ("a" . "b"))`

它增加了真的很好，但是如何保存？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T09:22:57.593

如果用户正在使用`savehist-mode`保存 minibuffer 历史记录，您可以使用`savehist-additional-variables`来保存任意变量的值：

```
(add-to-list 'savehist-additional-variables 'smart-pair-alist) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T10:43:11.430

通常，对于这样的事情，保存变量的内容并在以后的会话中加载它并不是最好的方法。（*确实*属于这一类的东西是 minibuffer 命令历史、搜索历史等）

相反，用户通常有一个*init 文件*，其中可以放置如下函数调用：

```
(smart-pair-adder "a" "b") 
```

这是有利的，原因有很多：

*   这是未来安全的，以防使用的包更改变量的内容或格式
*   它更健壮。万一一个变量不知何故会得到错误的值，如果它被保存，该值将永远保留
*   手动维护文件比自动生成的保存文件更容易维护（如在编写注释时）
*   *保存文件在custom*中表现不佳，这是一个为 Emacs 变量的交互式配置而设计的系统。这个系统有它自己的存储和恢复变量的方式。

# iis - Visual Studio PublishProfile 删除文件？

> ID：14953147
> 
> 赞同：4
> 
> 时间：2013-02-19T08:41:48.307
> 
> 标签：iis, msbuild, webdeploy

我正在将我的网站部署到 IIS，使用 msbuild（如[Scott Hanselman](http://www.hanselman.com/blog/TinyHappyFeatures3PublishingImprovementsChainedConfigTransformsAndDeployingASPNETAppsFromTheCommandLine.aspx)所述），如下所示：

```
msbuild MySolution.sln /p:DeployOnBuild=true;PublishProfile=Production;Password=poo 
```

通过 TeamCity 发布到我的生产服务器或登台服务器大部分工作正常。

但是，如果某些文件已从项目中删除，它们不会从服务器中删除。所以一些应该产生 404 错误的东西只是捡起旧的、过时的文件。

是否可以以这种方式进行部署也删除不再属于 Web 项目的文件？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-19T17:50:00.537

在发布配置文件中，在 Settings 选项卡上展开 File Publish Options 并选择**Remove Additional Files**。或者对于 Web 部署配置文件，您可以在命令行中将值作为 /p:SkipExtraFilesOnServer=False 传递

对于 FTP 配置文件，属性为 /p:DeleteExistingFiles=True

# asp.net-mvc - 以 guid 作为用户名的会员登录 asp.net

> ID：14953151
> 
> 赞同：1
> 
> 时间：2013-02-19T08:42:08.347
> 
> 标签：asp.net-mvc, asp.net-membership, guid

我正在创建一个新的 ASP.NET MVC4 Web 应用程序，它部分构建在旧系统中的一些旧数据库表上。

在 User 表中，唯一的唯一标识符是 GUID 值，因此我需要在 ASP.NET 成员资格提供程序中将其用作“用户名”。有没有人有一个简单的方法来做到这一点？我尝试了很多不同的解决方案，这真的让我很烦:)

有谁能够帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T09:33:40.957

如果您希望使用“guid”登录，只需在 WebSecurity.InitializeDatabaseConnection() 中进行一些修改即可启用此功能。阅读此[http://www.itorian.com/2012/11/adding-email-details-field-in.html](http://www.itorian.com/2012/11/adding-email-details-field-in.html)。（在底部）

# extjs - 如何设置数据字段的默认值 - EXTJS 4

> ID：14953152
> 
> 赞同：10
> 
> 时间：2013-02-19T08:42:13.607
> 
> 标签：extjs, extjs4, datefield

```
var startdt = Ext.create('Ext.form.DateField',{
    fieldLabel: 'Start Date',
    name: 'startdt',
    id: 'startdt',
    vtype: 'daterange',
    format: 'd/m/Y',
    endDateField: 'enddt', // id of the end date field
    value = new date()
    })

var enddt = Ext.create('Ext.form.DateField',{
    fieldLabel: 'End Date',
    name: 'enddt',
    id: 'enddt',
    format: 'd/m/Y',
    vtype: 'daterange',
    startDateField: 'startdt', // id of the start date field
    value = new date()
    }) 
```

这种方法会使窗口无法正确显示在中心。任何想法让日期字段设置默认值而不使用此方法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-19T08:47:44.627

这是 extjs 4 的错误，你可以试试下面的代码

```
var startdt = Ext.create('Ext.form.DateField',{
    fieldLabel: 'Start Date',
    name: 'startdt',
    id: 'startdt',
    vtype: 'daterange',
    format: 'd/m/Y',
    endDateField: 'enddt', // id of the end date field
    listeners : {
    render : function(datefield) {
        /// code to convert GMT String to date object
        datefield.setValue(new Date());
                }
        }
    })

    var enddt = Ext.create('Ext.form.DateField',{
    fieldLabel: 'End Date',
    name: 'enddt',
    id: 'enddt',
    format: 'd/m/Y',
    vtype: 'daterange',
    startDateField: 'startdt', // id of the start date field
    listeners : {
    render : function(datefield) {
        /// code to convert GMT String to date object
        datefield.setValue(new Date());
                }
        }
    }) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-18T10:04:33.943

试试这样：

```
var startdt = Ext.create('Ext.form.DateField',{
    fieldLabel: 'Start Date',
    name: 'startdt',
    id: 'startdt',
    vtype: 'daterange',
    format: 'd/m/Y',
    endDateField: 'enddt', // id of the end date field
    value: new Date()
    })

var enddt = Ext.create('Ext.form.DateField',{
    fieldLabel: 'End Date',
    name: 'enddt',
    id: 'enddt',
    format: 'd/m/Y',
    vtype: 'daterange',
    startDateField: 'startdt', // id of the start date field
    value: new Date()
    }) 
```

# grails - 在 grails 中下载 jasper 文件

> ID：14953155
> 
> 赞同：0
> 
> 时间：2013-02-19T08:42:18.540
> 
> 标签：grails, download

我有以下代码：

```
response.contentType = "application/octet-stream"
response.setContentLength(templateFile.bytes.length)
response.setHeader("Content-disposition", "attachment;filename=${fileName}")
IOUtils.copy(templateFile,response.outputStream) 
```

其中 templateFile 是 Jasper 报告模板 (*.jrxml)。而且我总是得到 net::ERR_FILE_NOT_FOUND。对于不同的文件类型，此代码可以正常工作。

我也尝试使用内容类型'text/xml'，但结果是一样的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T11:38:19.287

在 outputStream 上调用 flush() 后问题解决。运算符 << 隐式执行此操作，而 IOUtils.copy 不执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T13:03:07.517

尝试使用设置数据长度`response.setContentLength()`。此外，您可以调试以查看文件的字节是否在`response.outputStream`.

这是对我有用的片段：

```
byte[] bytes = getBytesOfFile()
response.setContentType("application/octet-stream")
response.setContentLength(bytes.length)
response.outputStream << bytes 
```

# android - 如何在服务器上发送变量浮动？

> ID：14953157
> 
> 赞同：2
> 
> 时间：2013-02-19T08:42:25.400
> 
> 标签：android, http-post

我需要`{"location":{"lat": 50.4, "lng": 30.5}}` 在服务器上发送

我这样做

```
List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(1);
List<NameValuePair> gps = new ArrayList<NameValuePair>(2);
            gps.add(new BasicNameValuePair("lat", Util
                    .getLatitude()));
            gps.add(new BasicNameValuePair("lng", Util
                    .getLatitude()));

            nameValuePairs.add(new BasicNameValuePair("location",gps.toString())); 
```

`{"location":{"lat": "50.4", "lng": "30.5"}}`

**我需要发送浮点类型而不是字符串**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T08:50:09.147

如果您想将 json Obejct 发送到服务器，则首先使用创建它，`JSONObject`而不是使用`NameValuePair`. 创建当前 JSONObject 为：

```
// main jsonObject
JSONObject json = new JSONObject();
// location JSONObject
JSONObject jsonlocation = new JSONObject();

// put key-value in  jsonlocation JSONObject
jsonlocation.put("lat", Util.getLatitude());  //<< put lat
jsonlocation.put("lng", Util.getLatitude());  //<< put lng

// put jsonlocation in main json JSONObject

json.put("location",jsonlocation); 
```

现在将`json`对象发送到服务器。

发送 JSONObject 到服务器见

[如何使用 Android 通过 Request 发送 JSON 对象？](https://stackoverflow.com/questions/3027066/how-to-send-a-json-object-over-request-with-android)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T08:50:01.153

我猜您想将 JSON 发送到服务器？您的代码 gps.toString() 创建列表的字符串值，而不是 JSON。您应该使用 JSON 库（例如 GSON）将您的列表解析为有效的 JSON。

使用 GSON，您可以将列表解析为 JSON，如下所示：

```
Gson gson = new Gson();
String json = gson.toJson(list); 
```

# git - git pull: tell it which branch to merge with

> ID：14953158
> 
> 赞同：2
> 
> 时间：2013-02-19T08:42:28.423
> 
> 标签：git, github

So the problem is, I have a git repository and I want to upload it to GitHub. I've ran through multiple threads on SOF and it suggested git push -u origin master. The problem is, when I do that it tells me I need to merge first so I don't lose any data. So it suggested to me to git pull. I did and this is what I get:

```
You asked me to pull without telling me which branch you
want to merge with, and 'branch.master.merge' in
your configuration file does not tell me, either. Please
specify which branch you want to use on the command line and
try again (e.g. 'git pull <repository> <refspec>').
See git-pull(1) for details.

If you often merge with the same branch, you may want to
use something like the following in your configuration file:
    [branch "master"]
    remote = <nickname>
    merge = <remote-ref>

    [remote "<nickname>"]
    url = <url>
    fetch = <refspec>

See git-config(1) for details. 
```

How do I fix this?

EDIT: Never mind I just fixed this. If you guys encounter a problem like this do: git pull

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-19T08:44:13.197

Assuming your branch is called master and the remote is called origin:

```
git pull origin master 
```

If you have not set a remote yet, the command to do so is:

```
git remote add origin git@github.com:username/repository.git 
```

Origin in both cases is just a common name for the github remote. Replace username with your username and repository with your repository name. After that, you will be able to refer to your github repository as "origin".

# javascript - 覆盖 Backbonejs 模型获取函数

> ID：14953162
> 
> 赞同：0
> 
> 时间：2013-02-19T08:42:37.667
> 
> 标签：javascript, backbone.js, backbone-model

我正在使用 Backbonejs 为车辆主机构建应用程序。我希望使用框架的读/写函数而不是使用 HTTP 请求来持久化我的一些模型。

查看backbonejs.org 上的fetch 方法的文档，并没有太多解释。我假设我只需要覆盖 save() 和 fetch() 方法。

这可以正常保存，如下所示：

```
save: function () {
    var json = this.toJSON();
    console.log('Saving model state: ' + JSON.stringify(json));
    sdk.save_json_file('my_model.json', json);
} 
```

对于获取，我不确定这应该是什么样子。我试过了：

```
fetch: function () {
    var json = sdk.read_json_file('my_model.json');
    return json;
} 
```

有人可以告诉我如何正确地做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T09:17:34.740

请试试这个：

```
fetch: function(){
    this.set(this.parse(JSON.parse(sdk.read_json_file('my_model.json'))), {});
    return this;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T09:02:18.513

在您的模型中，您需要指定 url

```
MySampleModel = Backbone.Model.extend({
    url: 'my_model.json'

    ...
}); 
```

现在，如果你这样做

```
var mySampleModelInstance = new MySampleModel();
mySampleModelInstance.fetch(); 
```

将尝试加载您的 json 文件

# .htaccess - 使用 .htaccess 重定向带有参数的旧网址

> ID：14953163
> 
> 赞同：0
> 
> 时间：2013-02-19T08:42:46.697
> 
> 标签：.htaccess

我正在设置我的网站，但我有旧链接，我们现在正在使用对 SEO 友好的链接。例如，老用户是 www.mysite.com/view_member.php?id=X

现在，我们的链接是 www.mysite.com/profile/X

我想知道如何使用 .htaccess

我试过了：

```
RedirectMatch ^/view_member.php?id=(.*) profile/$1 [R] 
```

但没有运气。

谢谢！

**编辑**

添加了当前的 .htaccess 文件

```
RewriteEngine on
RewriteCond $1 !^(index\.php|public|user_guide|files|robots\.txt)
RewriteRule ^(.*)$ index.php/$1 [L]

<ifModule mod_headers.c>
    Header set Access-Control-Allow-Origin: *
</ifModule> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T08:53:10.893

```
RewriteEngine On
RewriteRule ^profile/(.+)$ view_member.php?id=$1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T09:48:47.537

```
Options +FollowSymLinks
RewriteEngine on
RewriteRule ^profile/(.*)$ view_member.php?id=$1 
```

# android - 录制的视频在 Android 三星设备中横向播放

> ID：14953165
> 
> 赞同：3
> 
> 时间：2013-02-19T08:42:56.207
> 
> 标签：android, android-video-player

我正在做一个 Android 视频应用程序，我在其中录制了一些视频并管理列表中的视频。视频拍摄正确，但它们以侧面显示（我的意思是，如果我的设备实际上处于横向模式，我可以在纵向模式下观看视频）。任何人都可以让我知道如何解决这个问题。我正在使用下面的代码来记录

```
Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_VIDEO_CAPTURE);
startActivityForResult(cameraIntent,120); 
```

我会将视频存储在图库中。任何与自定义视频录制相关的代码也很有帮助。您可以在下图中看到我的问题。我尝试了很多方法，比如 put `setDisplayOrientation()`and also `setOrientationHint()`。我想知道这个问题根本没有解决方案吗？那么有多少开发视频应用程序。请有人帮助我。

我也提到[了这个](https://stackoverflow.com/questions/14763204/setorientationhint-rotates-video-counterclockwise-on-some-phones-front-facing-c)和[这个](https://stackoverflow.com/questions/14856968/setorientationhint-does-nothing-on-gingerbread-but-works-on-later-versions)链接。

![在此处输入图像描述](../Images/82e23801d4dfddd3effd725a4a001f88.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T01:05:33.127

确认您的 main.xml 文件（纵向和横向）中有替代布局。这通常应该照顾您设备的两个方向。两个 xml 文件在不同的 Layout 文件夹中应该具有相同的名称（例如 main.xml）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T14:59:13.040

这将是一个小技巧（虽然根据[这篇文章](https://stackoverflow.com/questions/12166731/recorded-video-is-the-wrong-orientation)，没有办法以不同的方向录制视频），但对于 API 级别 14 及更高级别，您可以使用[媒体效果](http://developer.android.com/reference/android/media/effect/package-summary.html)来旋转您的`VideoView`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T07:25:26.680

您显示的录制代码似乎正确。我刚刚用 ICS 在我的三星 S2 上测试了代码，视频以正确的方向播放。您没有显示回放的代码。也许这就是问题所在：

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (requestCode == 120) { // i personally prefer using a constant here
        VideoView videoView = (VideoView) findViewById(R.id.videoView);
        videoView.setVideoURI(data.getData());
        videoView.start();
    }
} 
```

videoView 的布局 xml 非常简单：

```
<VideoView
    android:id="@+id/videoView"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"/> 
```

如果上述方法不起作用，您也可以尝试将 EXTRA_SCREEN_ORIENTATION 设置为不同的值。在我的设备上，它似乎没有什么不同，尽管 YMMV。这是代码，另外我还添加了一些额外内容，因为您要求提供更多自定义视频录制代码：

```
private static final int RECORD_VIDEO = 120;

private void startRecording() {
    Intent cameraIntent = new Intent(MediaStore.ACTION_VIDEO_CAPTURE);
    cameraIntent.putExtra(MediaStore.EXTRA_SCREEN_ORIENTATION, ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
    cameraIntent.putExtra(MediaStore.EXTRA_VIDEO_QUALITY, 0); // low quality
    cameraIntent.putExtra(MediaStore.EXTRA_DURATION_LIMIT, 5); // limit to 5 seconds
    startActivityForResult(cameraIntent, RECORD_VIDEO);
} 
```

还有更多附加功能：http: [//developer.android.com/reference/android/provider/MediaStore.html#EXTRA_DURATION_LIMIT](http://developer.android.com/reference/android/provider/MediaStore.html#EXTRA_DURATION_LIMIT)

# c++ - 每个构造函数、方法和运算符重载的 c++ 多重定义错误

> ID：14953166
> 
> 赞同：3
> 
> 时间：2013-02-19T08:42:58.530
> 
> 标签：c++, multiple-definition-error

*我意识到这里已经有很多“多重定义”问题，但我在过去的 2 个小时里一直在寻找解释，但没有找到。很抱歉，如果这是重复的。*

现在我有 2 个类：Array.h 和 Vector.h。两者都没有任何全局变量，也不依赖于另一个（即 Array 不使用 Vector，Vector 不使用 Array）。实现在 .h 文件中。

这是我的 Main.cpp：

```
#include <iostream>
#include "Array.h"
#include "Vector.h"
using namespace std;

int main() {
    cout << "Done" << endl;

    return 0;
} 
```

...一切运行良好。但是，当我创建另一个仅包含 #include 语句的 .cpp 文件时...

数据读取器.cpp

```
#include "Array.h"
#include "Vector.h" 
```

...然后一切都崩溃了，我得到了 Vector 中每个方法、构造函数和运算符重载的一大堆错误：

```
DataReader.o: In function `Vector':
C:\C++\Eclipse CDT\workspace\3D_Adaptive_FEM\Debug/..//Vector.h:49: multiple definition of `Vector::Vector()'
TestMain.o:C:\C++\Eclipse CDT\workspace\3D_Adaptive_FEM\Debug/..//Vector.h:49: first defined here
DataReader.o: In function `Vector':
C:\C++\Eclipse CDT\workspace\3D_Adaptive_FEM\Debug/..//Vector.h:53: multiple definition of `Vector::Vector(int const&, int const&, int const&)'
TestMain.o:C:\C++\Eclipse CDT\workspace\3D_Adaptive_FEM\Debug/..//Vector.h:53: first defined here
DataReader.o: In function `Vector':
C:\C++\Eclipse CDT\workspace\3D_Adaptive_FEM\Debug/..//Vector.h:56: multiple definition of `Vector::Vector(double const&, double const&, double const&)'
TestMain.o:C:\C++\Eclipse CDT\workspace\3D_Adaptive_FEM\Debug/..//Vector.h:56: first defined here
DataReader.o: In function `ZNK6Vector1xEv':
C:\C++\Eclipse CDT\workspace\3D_Adaptive_FEM\Debug/..//Vector.h:59: multiple definition of `Vector::x() const'
TestMain.o:C:\C++\Eclipse CDT\workspace\3D_Adaptive_FEM\Debug/..//Vector.h:59: first defined here

etc... 
```

但如果我只有`#include "Array.h"`在 DataReader.cpp 中，那么一切运行正常！

`#include "Vector.h"`不适用的可能有什么问题`#include "Array.h"`？

编辑：将实现分离成 .cpp 文件修复了错误，但这并不能解释为什么我必须为 Vector 而不是 Array 这样做。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-19T08:57:15.717

我怀疑您在标题中对这些函数进行了离线定义。例如

```
#ifndef VECTOR_H
#define VECTOR_H

class Vector
{
public:
    Vector(int x, int y, int z);
private:
    int m_x, m_y, m_z;
};

Vector::Vector(int x, int y, int z)
    : m_x(x), m_y(y), m_z(z)
{}

#endif 
```

由于构造函数的定义不是内联在类定义中，因此编译器不会隐式地定义它`inline`。现在，如果您在多个翻译单元（即`*.cpp`文件）中包含同一个文件，链接器将产生您所看到的错误，因为每个`*.cpp`文件都将包含其自己的构造函数定义，而不会将它们标记为内联函数。

解决方法很简单，只要`inline`在构造函数*声明*前加一个：

```
class Vector
{
public:
    inline Vector(int x, int y, int z);
    // ...
};

// ... 
```

或者，如果函数体很短，就像上面显示的构造函数一样，直接将函数定义内联到类定义中，如

```
class Vector
{
public:
    Vector(int x, int y, int z)
        : m_x(x), m_y(y), m_z(z)
    {}
    // ...
};

// ... 
```

# if-statement - 解析错误：我的 PHP 代码中带有 for 循环的语法错误

> ID：14953168
> 
> 赞同：-3
> 
> 时间：2013-02-19T08:43:00.387
> 
> 标签：if-statement, for-loop, php

这段代码有什么问题？我尝试`strstr`在数组中使用，但收到错误消息：

```
<?php

$url = 'http://' . $_SERVER['SERVER_NAME'] . $_SERVER['REQUEST_URI'];
$array = array("modellini", "modelle");
for (i=0;$i<count($array;$i++)) 
{
    $key = strstr($url,$array[$i]);
    $keycap = ucwords($key);
    $bodytag = str_replace("-", " ", $keycap);

    if (false !== $key)
    {
?>

Prova<?php echo $bodytag ?>

<?php
    } else {
        echo 'No cars.';
    }
}
?> 
```

> 解析错误：语法错误，意外 '='，期待 ';'

...在这一行：

```
for (i=0;$i<count($array;$i++)) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T08:44:30.303

```
for (i=0;$i<count($array;$i++)){ 
```

替换为

```
for ($i = 0; $i < count($array); $i++) { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T09:04:09.357

哎呀..

这`for (i=0;$i<count($array;$i++)){`

应该：

```
for ($i = 0; $i < count($array); $i++) { 
```

# android - 如何在特定时间段内执行 strace

> ID：14953170
> 
> 赞同：2
> 
> 时间：2013-02-19T08:43:24.273
> 
> 标签：android, shell, execute, strace

我正在使用“strace”命令记录与 Android 应用关联的系统调用执行。

```
Process process = Runtime.getRuntime().exec("su");
OutputStream os;
os = process.getOutputStream();
os.write("strace -p"+processID+" -o /mnt/sdcard/straceLog.txt".getBytes());
os.close(); 
```

如何仅在任何应用程序的特定时间段（例如 30 秒）内跟踪系统调用并在此之后中断 strace 执行..请帮助...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-08-19T07:45:50.430

使用该`timeout`程序。

`timeout 1 strace -c sleep 5`

或纳入OP的问题：

`os.write("timeout 30 strace -p"+processID+" -o /mnt/sdcard/straceLog.txt".getBytes());`

这*可能*在 Android 上不可用（我不知道），但是当我搜索 running strace time based 时，这个问题是第一个命中，所以希望这可以帮助某人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-11T17:38:01.057

在后台进程中运行 strace 并在给定时间后终止该进程。

[命令行命令在一定时间后自动终止命令](https://stackoverflow.com/questions/601543/command-line-command-to-auto-kill-a-command-after-a-certain-amount-of-time#637753)

os.write("strace -p"+processID+" -o /mnt/sdcard/straceLog.txt & sleep 30; kill $!".getBytes());

# session - 网站应用程序中使用的链接共享是什么

> ID：14953173
> 
> 赞同：0
> 
> 时间：2013-02-19T08:43:43.383
> 
> 标签：session, jakarta-ee

```
session.setAttribute("referrer", "linkshare"); 
```

这就是一些代码中提到的方式。这是如何运作的？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T10:24:22.107

这只是在会话中设置一个对象...（即为该会话维护变量的范围）

语法：session.setAttribute(attributeName,attributeValue);

同时获取（ObjectType）session.getAttribute（attributeName）；

例如设置和获取字符串类型的对象

```
HttpSession session=request.getSession();
String name="abc";
session.setAttribute("nameSession",name);
String sname = (String)session.getAttribute(name); 
```

# c++ - 如何在OpenGL中检测鼠标悬停在某个对象上？

> ID：14953178
> 
> 赞同：3
> 
> 时间：2013-02-19T08:43:57.273
> 
> 标签：c++, c, opengl, graphics

我正在制作简单的 3D 游戏。在 3D 场景中检测鼠标悬停对象的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T09:15:58.767

实际上，我会避免使用这些挑选方法，而只是在数学上进行。创建一条从鼠标光标位置直接进入场景的直线，并将其与场景中每个对象的边界球相交。对于它相交的每个边界球，只需检查哪个顶点最靠近眼睛位置。

可以使用此算法创建直线，其中 z 分别设置为 0 和 1。

```
math::Vec3f windowToObjectf(const math::Vec3f& windowCoord) {
  math::Matrix4f modelViewMatrix;
  math::Matrix4f projectionMatrix;
  std::array <GLint, 4> viewport;
  glGetFloatv( GL_MODELVIEW_MATRIX, modelViewMatrix.data() );
  glGetFloatv( GL_PROJECTION_MATRIX, projectionMatrix.data() );
  glGetIntegerv( GL_VIEWPORT, &viewport.front() );
  math::Vec3f ret(0, 0, 0);
  auto succes = gluUnProject( windowCoord.x , windowCoord.y, windowCoord.z, modelViewMatrix.data(), projectionMatrix.data(), &viewport.front(), &ret.x, &ret.y, &ret.z );
  RASSERT(succes == GL_TRUE);
  GL_RASSERT();
  return ret;
} 
```

# c# - 调用从 c# 返回 char* 的 c++ dll 函数。无法使用 DllImport()

> ID：14953180
> 
> 赞同：6
> 
> 时间：2013-02-19T08:44:02.690
> 
> 标签：c#, c++, dll, character-encoding

我有一个带有 2 个函数的 c++ dll

```
const char* getVersionText1(void);
void        getVersionText2(const char** res); 
```

这两个函数都返回一个描述产品版本的字符串。第一个函数将其作为 const char* 返回（这意味着它在内部分配和处理定位它），第二个函数获取指向 char* 的指针并将其设置为指向描述版本的 char*。

我想从 C# 调用这些函数并显示文本。我不能使用 [dllimport ...] 样式，因为调用函数的顺序很重要。我首先调用构造函数而不是 getVersion，最后调用析构函数。所以dll必须先加载到内存中。

您能否发布几行代码来打印这两个功能的文本。我是 C# 新手，如果您发现我的代码有问题，我很抱歉，我试过了

```
static class NativeMethods{
    [DllImport("kernel32.dll")]
    public static extern IntPtr LoadLibrary(string dllToLoad);
    [DllImport("kernel32.dll")]
    public static extern IntPtr GetProcAddress(IntPtr hModule, string procedureName);
    [DllImport("kernel32.dll")]
    public static extern bool FreeLibrary(IntPtr hModule);
}
class Program{
    // Define function pointers to entires in DLL
    [UnmanagedFunctionPointer(CallingConvention.Cdecl)] private delegate IntPtr getVersionText1();
    [UnmanagedFunctionPointer(CallingConvention.Cdecl)] private delegate void getVersionText2(IntPtr );
    static void Main(string[] args){
        // Pointers to functions of DLL.
        getVersionText1 f1;
        getVersionText2 f2;
        IntPtr pDll = NativeMethods.LoadLibrary("p:\\my.dll");
        IntPtr pAddressOfFunctionToCall;
        pAddressOfFunctionToCall = NativeMethods.GetProcAddress(pDll, "getVersionText1 ");
        f1 = (getVersionText1)Marshal.GetDelegateForFunctionPointer(pAddressOfFunctionToCall, typeof(getVersionText1));
        pAddressOfFunctionToCall = NativeMethods.GetProcAddress(pDll, "getVersionText2 ");
        f2 = (getVersionText2)Marshal.GetDelegateForFunctionPointer(pAddressOfFunctionToCall, typeof(getVersionText2));

        // Here I don't know what to do. It doesn't work ????
        IntPtr verText = f1();
        String s = Marshal.PtrToStringAuto(verText);
        Console.WriteLine(s);   // Doesnt work
        // And how to use the second function. How do I sent a pointer to char* ???
    }
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2015-01-01T03:33:43.337

如果 C++ 库函数返回`char*`，C# 代码会将其视为`IntPtr`并将`Marshal.PtrToStringAnsi()`其转换为 C# `string`。

```
IntPtr verText = f1();
string s = Marshal.PtrToStringAnsi(verText);
Console.WriteLine(s); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-19T08:55:24.500

这是一种拨打电话的方法。可能有更短的替代方案可以自动执行 utf8/字符串转换。

```
[DllImport("mydll.dll")]
public static extern IntPtr getVersionText1(void);
public string getVersionTextConst()
{
    IntPtr ptr = getVersionText1();
    // assume returned string is utf-8 encoded
    return PtrToStringUtf8(ptr);
}

[DllImport("mydll.dll")]
public static extern void getVersionText2(out IntPtr res);
public string getVersionTextConst()
{
    IntPtr ptr;
    getVersionText2(ptr);
    // assume returned string is utf-8 encoded
    String str = PtrToStringUtf8(ptr);
    // call native DLL function to free ptr
    // if no function exists, pinvoke C runtime's free()
    return str;
}

private static string PtrToStringUtf8(IntPtr ptr) // aPtr is nul-terminated
{
    if (ptr == IntPtr.Zero)
        return "";
    int len = 0;
    while (System.Runtime.InteropServices.Marshal.ReadByte(ptr, len) != 0)
        len++;
    if (len == 0)
        return "";
    byte[] array = new byte[len];
    System.Runtime.InteropServices.Marshal.Copy(ptr, array, 0, len);
    return System.Text.Encoding.UTF8.GetString(array);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-01-10T23:43:28.807

如果你需要更快的速度，你也可以做一个**不安全的阅读**：

```
unsafe string GetString(IntPtr ptr) => new string((char*)ptr); // local function

IntPtr charPtr = f1();
var s = GetString(charPtr); 
```

添加`unsafe`方法时，VS 会询问您是否要在项目中允许不安全代码：回答是。或手动“项目属性/构建/允许不安全代码”。

# linux - 有没有更好的方法来模拟标准输入？

> ID：14953183
> 
> 赞同：1
> 
> 时间：2013-02-19T08:44:07.883
> 
> 标签：linux, bash, shell, sed

我今天下午只写了一个 bash 脚本。这很丑陋。所以我认为这里必须存在更好的实施方式`echo $x`。

```
for x in $(ls); do 
    cp $x $(echo $x | sed s/\\./_holo_light./) 
    cp $x $(echo $x | sed s/\\./_holo_dark./) 
done 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T09:02:08.383

改为这样做：

```
for x in *; do 
    cp "$x" "${x/./_holo_light.}"
    cp "$x" "${x/./_holo_dark.}"
done 
```

*   [不要解析`ls`](http://mywiki.wooledge.org/ParsingLs)。请改用 glob。
*   你不需要`sed`这里。Bash 可以执行[字符串操作](http://tldp.org/LDP/abs/html/string-manipulation.html)。
*   [引用](http://mywiki.wooledge.org/BashGuide/Practices#Quoting)你的变量。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-19T08:48:04.767

为什么不只是：

```
ls | sed 's/a/c/g' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T09:28:53.180

请注意，从 ls 解析输出有[一些问题](http://mywiki.wooledge.org/ParsingLs)，如果您确定自己没有受到影响，您可以这样做（GNU sed）：

```
ls | 
sed -nr 's/(.*)\.(.*)$/cp "\1.\2" "\1_holo_light.\2"\ncp "\1.\2" "\1_halo_dark.\2"/p' |
sh 
```

其中 sed 生成复制命令，然后将其传递给 shell 以执行。在追加之前查看 sed 的输出`| sh`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T12:01:04.907

虽然此处提到的答案是正确且经过优化的，但
对于您的原始问题文本“模拟标准输入”，您可以在此处使用字符串。

```
echo "$var" | command 
```

可以替换为

```
command <<< "$var" 
```

# java - （java）如何在零件上拆分一个数字，然后将它们相互比较

> ID：14953185
> 
> 赞同：2
> 
> 时间：2013-02-19T08:44:17.447
> 
> 标签：java, string, split

我想知道如何在零件上拆分一个数字，然后将它们相互比较

例如，我有一组数字

```
 989010
 990009
 991008
 992992
 993006
 994005
 995004 
```

我想将每个数字分成两部分-->>

```
if it's 989010 -- it will be like '989' and '010'. 
```

在那之后，我想我可以比较两个字符串，对吧？

我是说，

```
 '989' != '010'  true
   '990' != '009'  true 
   '992' != '992'  false 
```

看来我应该使用拆分功能，但是我很困惑如何仅在两个部分而不是更多部分上分开

提前致谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-19T08:47:16.103

```
String str = "989010";

System.out.println(str.substring(0, 3).equals(str.substring(3,6))); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-19T08:48:42.280

你可以通过几种方式做到这一点。

要么`String.substring`给你两个字符串，要么你可以划分数字

```
int number = 123456;
int firstPart = number / 1000;
int secondPart = number - firstPart * 1000; 
```

**编辑**
对不起 - 很匆忙。
为了弥补这一点，我将再次证明任何值得解决的问题都可以用（通常令人费解的）语言来解决`regex`：

```
 final String[] strings = new String[]{"123123", "123456"};
    final Pattern pattern = Pattern.compile("([\\d]{3})\\1");
    for (final String string : strings) {
        final Matcher matcher = pattern.matcher(string);
        if (matcher.matches()) {
            System.out.println(string + " matches.");
        }
    } 
```

输出：

```
run:
123123 matches.
BUILD SUCCESSFUL (total time: 0 seconds) 
```

它甚至需要`0 seconds`，哈。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T08:48:57.267

```
 Long number = 989010L;
    String text = number.toString();
    String firstPart = text.substring(0,3);
    String secondPart = text.substring(3);

    Long firstNumber = Long.parseLong(firstPart);
    Long secondNumber = Long.parseLong(secondPart);

    System.out.println(firstNumber == secondNumber); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-19T08:57:17.373

```
`String s = "931492";
 int first = Integer.parseInt(s.substring(0, s.length()/2));
 int second = Integer.parseInt(s.substring(s.length()/2));
 if (first != second)
 {
    System.out.println("Not equal");
 }` 
```

编辑：是的，我在比较错误的子字符串，对此感到抱歉。此外，在比较 Java 中的字符串时，您应该使用 equals()。我更新了我的代码以生成两个整数。可能提供额外的比较功能。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-19T08:53:45.097

看这个

```
public static void main(String[] args) {

        String[] values = { "989010", "990009", "991008", "992992", "993006", "994005", "995004" };

        for(String value : values) {
            String firstPart = value.substring(0, 3);
            String secondPart = value.substring(3);
            if(firstPart.equals(secondPart)) {
                System.out.println(firstPart + " equals " + secondPart);
            }
        }
    } 
```

# c# - 带有工作流的 ASP.net 页面导航

> ID：14953189
> 
> 赞同：3
> 
> 时间：2013-02-19T08:44:20.880
> 
> 标签：c#, asp.net-mvc, visual-studio-2012, workflow, .net-4.5

我正在使用`.Net4.5`和`visual studio 2012`。有人可以告诉我如何使用 ASP.net 页面导航`Workflow 4.5`吗？

1.）无法创建类：

我已经创建了一个 Empty MVC 项目，我尝试 R-Clicking `Project`，选中`Add-->New Item`但无法找到该选项`-->Worfklow -->Activity`。我该如何解决这个问题？

2.) 任何涉及此内容的教程

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T12:14:55.213

您应该创建 2 个项目。

第一个将是您的 ASP.NET MVC 项目。

第二个将是您的工作流项目。确保这是一个活动库项目。

在您的活动库项目中创建活动并在您的 ASP.NET MVC 项目中引用此项目。

# go - 在内存中保存一个大地图或执行多个 sql 调用？

> ID：14953190
> 
> 赞同：1
> 
> 时间：2013-02-19T08:44:23.163
> 
> 标签：go

我来自 Web 开发背景，但现在正在用 Go 构建我的第一个服务器应用程序并且有一些问题。

该应用程序将收到大量包含我需要查找和验证的字符串的 http 请求，基本上如果该字符串存在于数据库中，则它是有效的。

通常我会在每个传入的 http 请求中执行一个新的 SQL 查询，但是在 init 中只执行一个大的 SQL 请求并将所有 50.000 个字符串加载到内存中的映射中会更好吗？并使用它进行快速查找？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T12:14:50.463

这取决于字符串的大小和字符串的数量。

如果它们适合内存就可以进行内存映射，否则查询数据库。

PS：这不是一个真正的问题，也[没有](/questions/tagged/go "显示标记为“开始”的问题")明确的答案。

# c# - 将部分文件添加到现有的表单文件

> ID：14953193
> 
> 赞同：16
> 
> 时间：2013-02-19T08:44:34.303
> 
> 标签：c#, partial

我有一个窗口窗体应用程序项目。目前我所有的代码都在`Form1.cs`文件中，这是默认文件。现在我在这个单个文件中有大约 1300 行代码。我想把这个文件代码分解成几个文件，我想使用“部分”关键字（我不想做任何激烈的事情）。那么我应该如何添加文件

右键项目名称->添加->新建项目->类结果到`class1.cs`，`class2.cs`等等

但是这个文件在编译后转换为一个表格文件。添加的正确方法是什么，以便新文件与我现有的项目`Form1.cs`集成`Form1.cs[Design]`？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-19T08:49:18.220

您必须保留命名空间、类名并用`partial`. 文件名对于它的工作并不重要，但它是一个很好的做法，以便开发人员可以快速识别文件的内容。

*Form1.cs*

```
namespace TheSameNamespace
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }
    }

    // other definitions
} 
```

*Form1.Designer.cs*

```
namespace TheSameNamespace
{
    partial class Form1
    {
        /// <summary>
        /// Required designer variable.
        /// </summary>
        private System.ComponentModel.IContainer components = null;

        // the rest of the designer class
    }
} 
```

*Form1.Calculations.cs*

```
namespace TheSameNamespace
{
    partial class Form1
    {
        // calculation methods definitions
    }
} 
```

*Form1.EventHandlers.cs*

```
namespace TheSameNamespace
{
    partial class Form1
    {
        // event handlers definitions
    }
} 
```

等等...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T08:50:30.097

该`partial`关键字主要用于生成的文件，可以通过您自己的代码对其进行扩展 - 将单个臃肿的类拆分为多个部分是没有用的，但如果您真的想这样做，那么您必须：

1.  创建一个新类。
2.  重命名类以匹配您自己的类 (Form1.xxx.cs)
3.  使用部分关键字并调整名称和命名空间。

清除：

**Form1.cs**

```
public partial class Form1 { /* ... */ } 
```

**Form1.somepart.cs**

```
public partial class Form1 { /* ... */ } 
```

# shell - 上一个命令输出的 Zshell 特殊变量

> ID：14953194
> 
> 赞同：7
> 
> 时间：2013-02-19T08:44:43.640
> 
> 标签：shell, command-line-arguments, zsh

将先前命令的输出存储在 zshell 中的特殊变量是什么？例如，如果我这样做：

```
$ which zsh
  something 
```

有没有办法通过特殊变量获取输出，而不是复制输出“某物”？

我知道我可以`$_`用来获取之前调用的命令，有类似的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-22T22:36:13.470

我想你可以再次执行`$_`它`$()`

```
$ which zsh
/bin/zsh
$ echo $($_)
/bin/zsh 
```

不确定是否有一个变量可以在不重新运行命令的情况下保存该输出......

# api - 基于 SSL 的 HTTP 基本身份验证是否比 2 腿 Oauth 更不安全？

> ID：14953195
> 
> 赞同：5
> 
> 时间：2013-02-19T08:44:47.903
> 
> 标签：api, security, rest

我正在构建一个需要相当安全的 REST API - 没有通过任何付款细节，但我想确保帐户不会被劫持，例如。

我已经研究过实现 2 Legged Oauth，但我看不到仅使用基本身份验证而不是 SSL 的任何真正优势（以编程方式生成的高熵 API 密钥作为密码）

2 Legged Oauth 是否比基于 SSL 的 HTTP 基本身份验证更安全？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T08:46:30.460

HTTPS 是通过 SSL 连接发送的完整 HTTP 数据。
如果您使用 HTTPS，通过 HTTP 基本身份验证发送的数据也会被加密。
基本上，所以它应该没有区别。
不好的可能是您必须使用 HTTP 基本身份验证将密码存储在客户端计算机上。
据我所知，使用 oAuth 只存储一个令牌。

# asp.net - 单击按钮（使用平板电脑）不起作用

> ID：14953196
> 
> 赞同：1
> 
> 时间：2013-02-19T08:44:57.267
> 
> 标签：asp.net

我在平板电脑上单击按钮时遇到问题。问题是当我第一次按下按钮时，我得到按钮：悬停，当我再次按下此按钮时，它会执行该事件。（第一次触摸使按钮悬停，第二次使事件发生）我需要双击来执行事件或禁用按钮：悬停（我不想要这个解决方案）。或者我需要检查这个（首先）单击来自平板电脑然后我可以禁用按钮：悬停但仅限于平板电脑用户到 PC 任何 1 知道如何解决这个问题吗？

# asp.net - 无法加载文件或程序集“System.Web.WebPages”Asp.Net Webforms Navigation

> ID：14953197
> 
> 赞同：1
> 
> 时间：2013-02-19T08:45:01.783
> 
> 标签：asp.net, webforms, navigation

我最近将包 [Navigation] 安装到 ASP.Net 4.5 Web 应用程序。当我在本地机器上运行它时[我安装了 VS 2012] 它工作正常，但是当我部署到生产服务器时，我收到错误：无法加载文件或程序集“System.Web.WebPages”。我添加了对 Syste.Web.WebPages 和 Syste.Web.WebPages.Deployment 的引用，但没有运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T08:50:23.310

您需要将引用设置为复制本地，以便 dll 出现在您的 bon 文件夹中，或者使用 vs 中的“添加可部署依赖项”功能以获得更好的方法。

问题是您的生产服务器的 gac 中没有库，因此您需要提供它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T09:46:35.963

这样做，[http://haacked.com/archive/2008/11/03/bin-deploy-aspnetmvc.aspx](http://haacked.com/archive/2008/11/03/bin-deploy-aspnetmvc.aspx)但是它是一个 MVC 项目，但会为你工作。

# ios - iOS“感叹号”徽章/按钮是否可在应用程序中使用？

> ID：14953198
> 
> 赞同：0
> 
> 时间：2013-02-19T08:45:09.683
> 
> 标签：ios, cocoa-touch

我怀疑答案是否定的——但也许我在 api 中遗漏了一些东西......

我知道 UIButton 的常量 UIButtonTypes：http: [//developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIButton_Class/UIButton/UIButton.html](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIButton_Class/UIButton/UIButton.html)

但我也看到 Apple 在他们的应用程序中使用感叹号，例如，提醒应用程序：

![在此处输入图像描述](../Images/74c6b418f8660875ce6195a334715e6e.png)

有谁知道该按钮/徽章是否可用？

还是我自己做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T09:54:27.113

正如我评论的那样，您将无法直接使用此按钮。

我不认为你可以指出任何来源说这个，但根据我自己的经验，我从来没有找到这个按钮。

但是，您可以做的是创建或查找按钮的图像。第二个选项是最简单的一个；）

我找到了这个，给了你所有 iOS 的图像（iOS 4.3，但仍然很好）：[All stock iOS 4.3 UI Images](http://jailbreakzone.com/2011/04/09/download-all-stock-ios-4-3-ui-image-including-emoji/)。

或者您可以直接使用这些正常/选定的视网膜图像（来自上面的链接）：![失败@2x](../Images/55e561268b195b6e8c6b3f01a7c075a6.png) ![失败按下@2x](../Images/68c3fd049d6bce3c78e14c897566d04b.png)

和非视网膜版本：![失败](../Images/dace8ab7516cda4525d19f58c0d86b22.png) ![失败的压力](../Images/4a68bf64b7682428c66642116e70752a.png)

快速注意，您可能需要非常小心地使用此按钮。由于它是系统映像，因此您必须按照 iOS 使用它的方式使用它。如果您尝试在不适当的环境中使用它，您的应用程序可能会被 Apple 拒绝。

# android - Android Is it posible to get an Activity's preference value from a Service?

> ID：14953204
> 
> 赞同：2
> 
> 时间：2013-02-19T08:45:27.733
> 
> 标签：android, service, android-preferences

Given that a Service may be running even when the launching activity is destroyed,
and also that data is passed usually using the extra bundle along the intent,
I wonder if the Service is able to **directly access the activity's preferences**.

My guess is *no, it cannot*. But it would save me writing a chunk of code if it can do it.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T08:51:13.760

Assuming that You're asking about [SharedPreferences](http://developer.android.com/reference/android/content/SharedPreferences.html "SharedPreferences"). If so, then documentation is clear (by link above):

> Note: currently this class does not support use across multiple processes. This will be added later.

So, currently, if Your service is running in a separate process it's not possible. In that case I would suggest to store Your preferences not in a SharedPreferences, but in some base which could be accessible via specific ContentProvider.

P.S. Actually I tried access SharedPreferences from multiple processes and it has worked (at least in my case), but I've decided to use another way because of the documentation mentioned in the answer.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T08:48:22.717

If you mean [SharedPreferences](https://developer.android.com/reference/android/content/Context.html#getSharedPreferences) then you can just call getSharedPreferences with the same name.

# mongodb - 我想删除我所有的重复项并只保留一个重复项-mongodb

> ID：14953207
> 
> 赞同：1
> 
> 时间：2013-02-19T08:45:35.557
> 
> 标签：mongodb

我的数据库中有大量数据。我有很多重复的。我想删除所有这些重复项，只保留一个数据，

例如，我的登录对象中有这样的数据

**身份证** **名称**

123 美国广播公司

124 美国广播公司

125 美国广播公司

126 美国广播公司

127 pqr

128 个

我只想保留一个名为“abc”的用户并删除所有其他名为“abc”的用户我如何在 mongodb 中实现它提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T08:50:00.040

一种方法是在用户名上实际创建一个唯一索引，并为其提供 dropDups 的选项：http: [//docs.mongodb.org/manual/core/indexes/#drop-duplicates](http://docs.mongodb.org/manual/core/indexes/#drop-duplicates)

所以对于你的例子：

```
db.user.ensureIndex({name:1},{unique:1,dropDups:true}) 
```

将在名称上创建一个唯一索引，该索引将删除所有其他重复项。

当然，这样做的双重好处是您现在在名称上有一个唯一索引，可确保您不会再次出现重复项。

您也可以通过 clent 端执行此操作，但它可能比通过构建索引来执行此操作要慢。

# javascript - 使用 Javascript 在单击时切换 div 的背景图像

> ID：14953208
> 
> 赞同：0
> 
> 时间：2013-02-19T08:45:43.367
> 
> 标签：javascript, onclick, styles

嗨，我正在尝试使用 Javascript 在单击时切换 div 的背景图像

这就是我为实现这一目标所做的工作：

我的代码如下

HTML：

```
<div id="AccordionContainer" class="AccordionContainer">
    <div onclick="runAccordion(1);">
        <div class="AccordionTitle" id="Accordion1Title" onselectstart="return false;" onclick="changeArrow(1);" >
            Instructions
        </div>
    </div>

    <div id="Accordion1Content" class="AccordionContent">  
        <p>Enter in your search parameters by clicking on the title of... </p>
    </div>

    <div onclick="runAccordion(2);">
        <div class="AccordionTitle" id="Accordion2Title" onselectstart="return false;" onclick="changeArrow(2);" >
            Colour
        </div>
    </div>

    <div id="Accordion2Content" class="AccordionContent">  
        [wpv-control field="cultivar-category" type="checkboxes" values="Dark Red" url_param="cultivar-category"]
    </div>

    </div>
</div> 
```

Javascript：

```
function changeArrow(index)
{
    var arrowID = "Accordian" + index + "Title";    
    document.getElementById(arrowID).style.background="url(./img/accordian-title-up.png) no-repeat scroll 0 0 transparent"; 
} 
```

但是，当我单击包含 onclick="runAccordion(index);" 的 div 时，什么也没有发生

我在这里想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T08:52:19.157

~~`runAccordion`可能会覆盖或阻塞`changeArrow`，具体取决于 HTML 的结构。尝试将它们组合在同一个 onclick 侦听器 ( `runAccordion(1);changeArrow(1);`) 中，看看会发生什么。~~

~~此外，如果您已解决此问题，请检查您的图像路径。~~

编辑

你有一个错字：

`var arrowID = "Accordian" + index + "Title";`

应该：

`var arrowID = "Accordion" + index + "Title";`

# sql-server - 多个 TADOConnections 的错误

> ID：14953212
> 
> 赞同：0
> 
> 时间：2013-02-19T08:46:07.433
> 
> 标签：sql-server, delphi, ado

我已经发现了一个使用 ADO 和 SQL Server 以及与一个数据库的不同连接的显示表错误。（请参阅[BUG #1](https://stackoverflow.com/questions/14843551/database-change-not-recognized-by-ado-using-delphi-and-sql-server)中的详细信息）

尝试删除记录时出现另一个问题

代码是这样的

```
function resettable (tablename, databasename, servername) : Boolean;
var
  aADOQuery : TADOQuery;
  aADOConnection : TAdoConnection,
begin
  ///  Create ADO stuff 
  aADOQuery := TADOQuery.Create;
  aADOConnection := TAdoConnection.Create;

  ///  connect to DB & Table 
  ....
  ///

  aADOQuery.sql.add('delete * from ' + Tablename;
  aADOQuery.execsql;

  ///   free objects after use  
  ....
end; 
```

`ADOConnection`当单独在数据库上时，此代码可以正常工作。如果任何其他 ADO 连接发生了一些活动并进行了一些修改，则代码将失败，同时“数据库未更新错误消息”

如何创建一个在删除记录语句之前进行更新的解决方案？？？

# c - 如何在 C 中将元素插入、删除和显示到链表中？

> ID：14953213
> 
> 赞同：0
> 
> 时间：2013-02-19T08:46:14.293
> 
> 标签：c, insert, linked-list

我正在使用 C 语言编写一个我还不太熟悉的程序。它可以选择如何处理链表。但它有错误。到目前为止，这就是我所拥有的。

```
#include<stdio.h>
#include<stdlib.h>

struct node
{
    int data;
    struct node *next;
}*head;

void append(int num)
{
    struct node *temp,*right;
    temp= (struct node *)malloc(sizeof(struct node));
    temp->data=num;
    right=(struct node *)head;
    while(right->next != NULL)
    right=right->next;
    right->next =temp;
    right=temp;
    right->next=NULL;
}

void add( int num )
{
    struct node *temp;
    temp=(struct node *)malloc(sizeof(struct node));
    temp->data=num;
    if (head== NULL)
    {
    head=temp;
    head->next=NULL;
    }
    else
    {
    temp->next=head;
    head=temp;
    }
}
void addafter(int num, int loc)
{
    int i;
    struct node *temp,*left,*right;
    right=head;
    for(i=1;i<loc;i++)
    {
    left=right;
    right=right->next;
    }
    temp=(struct node *)malloc(sizeof(struct node));
    temp->data=num;
    left->next=temp;
    left=temp;
    left->next=right;
    return;
}

int count()
{
    struct node *n;
    int c=0;
    n=head;
    while(n!=NULL)
    {
    n=n->next;
    c++;
    }
    return c;
} 

void insert(int num)
{
    int c=0;
    struct node *temp;
    temp=head;
    if(temp==NULL)
    {
    add(num);
    }
    else
    {
    while(temp!=NULL)
    {
        if(temp->data<num)
        c++;
        temp=temp->next;
    }
    if(c==0)
        add(num);
    else if(c<count())
        addafter(num,++c);
    else
        append(num);
    }
}

int delete(int num)
{
    struct node *temp, *prev;
    temp=head;
    while(temp!=NULL)
    {
    if(temp->data==num)
    {
        if(temp==head)
        {
        head=temp->next;
        free(temp);
        return 1;
        }
        else
        {
        prev->next=temp->next;
        free(temp);
        return 1;
        }
    }
    else
    {
        prev=temp;
        temp= temp->next;
    }
    }
    return 0;
}

void  display(struct node *r)
{
    r=head;
    if(r==NULL)
    {
    return;
    }
    while(r!=NULL)
    {
    printf("%d ",r->data);
    r=r->next;
    }
    printf("\n");
}

int  main()
{
    int i,num;
    struct node *n;
    head=NULL;
    while(1)
    {
    printf("\nList Operations\n");
    printf("===============\n");
    printf("1.Insert\n");
    printf("2.Display\n");
    printf("3.Size\n");
    printf("4.Delete\n");
    printf("5.Exit\n");
    printf("Enter your choice : ");
    if(scanf("%d",&i)<=0){
        printf("Enter only an Integer\n");
        exit(0);
    } else {
        switch(i)
        {
        case 1:      printf("Enter the number to insert : ");
                 scanf("%d",&num);
                 insert(num);
                 break;
        case 2:     if(head==NULL)
                {
                printf("List is Empty\n");
                }
                else
                {
                printf("Element(s) in the list are : ");
                }
                display(n);
                break;
        case 3:     printf("Size of the list is %d\n",count());
                break;
        case 4:     if(head==NULL)
                printf("List is Empty\n");
                else{
                printf("Enter the number to delete : ");
                scanf("%d",&num);
                if(delete(num))
                    printf("%d deleted successfully\n",num);
                else
                    printf("%d not found in the list\n",num);
                }
                break;
        case 5:     return 0;
        default:    printf("Invalid option\n");
        }
    }
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T10:45:23.213

我制作了另一个工作程序。看看这个。你可能有一些补充，也许？

```
#include <iostream>
#include <conio.h>
using namespace std;

class Node {
      int data;
      Node* next;
      public:
             Node() {};
             void SetData(int aData) { data = aData; };
             void SetNext(Node* aNext) { next = aNext; };
             int Data() { return data; };
             Node* Next() { return next; };
};

class List {
      Node *head;
      public:
             List() { head = NULL; };
             void Display();
             void Append(int data);
             void Remove(int data);
};

void List::Display() {
     Node *tmp = head;
     if ( tmp == NULL ) {
          cout << "EMPTY" << endl;
          return;
     }
     if ( tmp->Next() == NULL ) {
          cout << tmp->Data();
          cout << " --> ";
          cout << "NULL" << endl;
          }
     else {
          do {
              cout << tmp->Data();
              cout << " --> ";
              tmp = tmp->Next();
          } while ( tmp != NULL );
     cout << "NULL" << endl;
     }
}

void List::Append(int data) {
     Node* newNode = new Node();
     newNode->SetData(data);
     newNode->SetNext(NULL);
     Node *tmp = head;
     if ( tmp != NULL ) {
          while ( tmp->Next() != NULL ) {
                tmp = tmp->Next();
          }
     tmp->SetNext(newNode);
     }
     else {
          head = newNode;
     }
}

void List::Remove(int data) {
     Node *tmp = head;
     if ( tmp == NULL )
          return;
     if ( tmp->Next() == NULL ) {
          delete tmp;
          head = NULL;
     }
     else {
          Node *prev;
          do {
              if ( tmp->Data() == data ) break;
              prev = tmp;
              tmp = tmp->Next();
          } while ( tmp != NULL );
     prev->SetNext(tmp->Next());
     delete tmp;
     }
}

int main() {
    List list;
    int n[100], i, size;
    char choice;
    for(i=1; i<=100; i++){
             cout<<"Insert[I]\nDisplay[D]\nRemove[R]\n";
             cin>>choice;
             if (choice=='I'||choice=='i'){
                                       cout<<"Enter the number of nodes: ";
                                       cin>>size;
                                       cout<<"Enter a number to be inserted:\n";
                                       for(i=1; i<=size; i++){
                                                         cin>>n[i];
                                                         list.Append(n[i]);
                                       }
             }
             if (choice=='D'||choice=='d'){
                                       cout<<"Elements in the list are: ";
                                       list.Display();
             }
             if (choice=='R'||choice=='r'){  
                                       cout<<"Enter a number to be removed: ";
                                       cin>>n[i];
                                       list.Remove(n[i]);
             }
    }
    getch();
} 
```

# facebook - 如何使用图形 api 检索 facebook 用户访问令牌？

> ID：14953215
> 
> 赞同：1
> 
> 时间：2013-02-19T08:46:23.387
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk, facebook-ios-sdk

我正在使用图形 api，我在我的应用程序中通过 facebook 登录我的登录链接为

```
var authorize_url  = "https://graph.facebook.com/oauth/authorize?";
    authorize_url += "client_id=" + client_id;
    authorize_url += "&redirect_uri=" + redirect_uri;
    authorize_url += "&display="+ ( display ? display : "touch" );
    authorize_url += "&scope=user_about_me,publish_stream,manage_pages,user_interests,friends_interests,user_birthday,friends_birthday,user_education_history,friends_education_history";
    authorize_url += "&type=user_agent"; 
```

这里没有问题，一切正常。

但问题是，它返回给我的是**“APP ACCESS TOKEN”**而不是“ **USER ACCESS TOKEN** ”。我只需要用户访问令牌来获取两个用户的共同朋友列表。我经常冲浪并尝试了所有东西，但还没有运气。谁能帮我吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T12:36:26.987

这是在 javascript sdk 中获取访问令牌的方法。

```
 function login() {
            FB.login(function (response) {                    
                if (response.authResponse) {
                    // connected
                    var token = response.authResponse.accessToken;
                    console.log("Token: " + token);                        
                } else {
                    // cancelled
                } 
            }, { scope: 'publish_stream' });
        } 
```

# php - 如何在 ion auth codeigniter 中创建子组？

> ID：14953219
> 
> 赞同：2
> 
> 时间：2013-02-19T08:46:31.203
> 
> 标签：php, codeigniter, ion-auth

我知道我们可以在 ion auth 中创建组。但我需要成员和员工组中的子组。我的项目需要以下用户角色。

1.  行政
2.  成员
    *   A计划成员
    *   B计划成员
    *   C计划成员
3.  职员
    *   技术人员
    *   管理人员
    *   普通员工

根据会员选择的计划，“视图”和功能将发生变化。

我正在考虑在 users 表中添加一个新列来指定使用的计划。另一种选择是创建 3 个没有父成员组的计划组。有没有其他方法可以使用 ion auth 添加子组？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T11:16:01.337

@Arunu-您将它们设为每个组而不是子组的想法是最好的方法。

没有真正的理由拥有权限层次结构（我认为您可能会将身份验证与 ACL 混合使用，这很容易做到）。

设置 Ion_auth 以便一个用户可以拥有多个组 - 例如，您的所有用户都可以拥有一个成员记录，然后每个子组都有一个单独的记录。

每个控制器入口点都简单地说明允许或不允许哪些组 - 它对待它们都是一样的。

此外，您可以根据用户所属的组动态显示数据

# c++ - 虚函数是在 C++ 中实现运行时多态性的唯一方法吗？

> ID：14953222
> 
> 赞同：10
> 
> 时间：2013-02-19T08:46:46.140
> 
> 标签：c++, polymorphism

我的一位朋友问我“如何在 C++ 中实现运行时多态性？” 我回答“通过继承”

他说“不，只能使用虚函数来实现”。

所以我给了他一个下面代码的例子：-

```
#include<iostream>
using namespace std;

class A
{
public:
    int i;
    A(){i=100;}
};

class B : public A
{
public:
    int j;
    B(){i = -1; j = 99;}
};

void func(A& myA)
{
    cout<<myA.i << endl;
}

int main()
{
    B b;
    A* a = new B();
    func(*a);
    func(b);
    delete a;
    return 0;
} 
```

在这里，函数 func() 引用了 A，但我们传递了 B 的对象，我们可以打印公共成员“i”的值。他说这是编译时多态性。

我的问题是：-

1）运行时多态性是否只能通过虚函数实现？

2) 上面的例子是运行时多态还是编译时？

3）如果我有以下代码： -

```
void func2(A& myA)
{
    cout << myA.i << endl;
    // dynamic/static cast myA to myB
    cout<<myB.j << endl;
} 
```

它是一种什么样的多态性？或者它甚至是多态性？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-19T08:51:13.737

该示例未显示动态多态性。要调用的方法在编译时是已知的。没有关于应该调用哪个方法的运行时决定（*基于实际对象类型）。**不同类型*没有不同的行为。

该示例是动态多态性的示例。
您需要`virtual`在基类中提供一个成员函数并在派生类中覆盖它。要调用的实际方法由基类指针指向的对象的实际类型决定。

**[在线样本](http://ideone.com/XsBv73)：**

```
#include<iostream>
using namespace std;

class A
{
public:
    virtual void doSomething()
    {
        std::cout<<"\nIn A::doSomething()";
    }
};

class B : public A
{
public:
    virtual void doSomething()
    {
        std::cout<<"\nIn B::doSomething()";
    }
};

int main()
{
    B b;
    A obj;
    A* a = &b;
    a->doSomething();

    a = &obj;
    a->doSomething();

    return 0;
} 
```

**输出：**

```
In B::doSomething()
In A::doSomething() 
```

* * *

> **运行时多态性是否仅通过虚拟函数实现？**

不，但`virtual`函数是最常见和最正确的方法。
多态可以通过函数指针来实现。考虑下面的**[代码示例](http://ideone.com/jphmnp)**，调用的实际方法是在运行时根据用户输入决定的。它是一种多态性形式，不是严格意义上的 C++ 意义上的，它要求不同*类型*的不同行为。

```
#include <iostream>

typedef void (*someFunction)(int, char*);

void FirstsomeFunction(int i, char *c)
{
    std::cout<<"\n In FirstsomeFunction";
}

void SecondsomeFunction(int i, char *c)
{
    std::cout<<"\n In SecondsomeFunction";
}

int main()
{
    someFunction arr[1];
    int x = 0;
    std::cin >> x;

    if(x ==0)
        arr[0] = &FirstsomeFunction;
    else
        arr[0] = &SecondsomeFunction;

    (arr[0])(10,"Hello");

    return 0;
} 
```

> **上面的例子是运行时多态还是编译时间？**

不存在任何类型的多态性。在所有情况下都将调用相同的方法。*不同类型*没有不同的行为，因此它不归类为任何类型的多态性。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-19T09:01:20.980

该`C`语言[`fprintf`](http://en.cppreference.com/w/cpp/io/c/fprintf)是一个多态函数。

您可以向它传递各种句柄，它可以打印到文件、标准输出、打印机、[套接字](https://stackoverflow.com/q/8776103/1084416)以及系统可以表示为流的任何东西。

```
FILE* file = fopen("output.txt", "w");                    // a file
FILE* file = stdout;                                      // standard output
FILE* file = fopen("/dev/usb/lp0", "w");                  // a usb printer
FILE* file = popen("/usr/bin/lpr -P PDF", "w");           // a PDF file
FILE* file = fdopen(socket(AF_INET,SOCK_STREAM,0), "r+"); // network socket

fprintf(file, "Hello World.\n"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-19T08:57:42.530

你写的不是多态。

这就是在 C++ 中进行多态性的方式：

```
#include<iostream>
using namespace std;

class A
{
public:
    virtual void func(){
        cout << "printing A" << endl;
    }

    virtual ~A(){}
};

class B : public A
{
public:
    void func(){
        cout << "printing B" << endl;
    }
};

int main()
{
    A* a = new A();
    A* b = new B();

    a->func(); // "printing A"
    b->func(); // "printing B"

    delete a;
    delete b;

    return 0;
} 
```

如果要删除 virtual 关键字，则`func`A 的方法将被调用两次。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-19T10:52:23.273

> 我的一位朋友问我“如何在 C++ 中实现运行时多态性？” 我回答“通过继承”他说“不，只能使用虚函数来实现”。

首先，术语*多态性*是模棱两可的：在一般计算科学意义上，它指的是隐式调用特定类型代码的能力，无论是在编译时还是运行时。在 C++ 标准中，它的定义非常狭窄，是虚拟调度（这是标准的特权）。显然，你朋友的问题是有意义的，因为他在问它是如何在 C++ 中实现的，他的观点必须来自 C++ 之外——在计算科学术语的更大背景下。

当然，虚拟功能/调度是*一个*答案，但它们是*唯一*的答案......？

为了尝试回答这个问题，对什么行为符合运行时多态性有一个清晰的概念是有帮助的。考虑：

```
void f(X& x)
{
    // the only situation where C++ doesn't know the run-time type of a variable is
    // where it's an instance of a class/struct accepted by reference or pointer

    ...some operation involving "x"...
} 
```

任何可能导致涉及“x”的操作被调用的不同机器代码的任何机制，其中原因与“x”的运行时类型特别相关，都*非常接近*运行时多态性，但还有一个最后一个问题：分支是由语言隐式决定的，还是由程序员明确安排的？

在虚拟分派的情况下，编译器隐含地知道创建虚拟分派表和查找分支到适合类型的代码。

但是，假设我们有一个函数指针，该指针以前设置为寻址适合类型的代码，或者用于控制 a`switch`到特定类型的特定类型数字或枚举`case`。这些在功能上实现了与运行时虚拟分派相同的行为，但设置必须由开发人员显式完成，并且没有编译器强制执行来确保纯粹在运行时类型上完成确定。他们是否有资格是*有争议*的。因为 C++ 在虚拟分派中具有完全隐式的机制，并且因为在 C++ 标准中多态性对虚拟分派的定义很窄，所以我猜大多数 C++ 程序员会说“不”。

但是在 C 的世界中，将 say`qsort`或`bsearch`（两个标准 libC 函数，通过函数指针参数使用运行时分派处理任意类型）描述为运行时多态可能有助于快速理解......更正常的说法是它们是*通用*实现虽然。

尽管如此，毫无疑问，有数百本计算科学教科书包含运行时多态性的函数定义，我敢打赌，使用函数指针或其他程序员初始化的元数据进行调度可以满足其中很大一部分。因此，过于坚持只有一个明确的答案是没有意义的。

> 我的问题是：-
> 
> 1）运行时多态性是否只能通过虚函数实现？

如上所述，在 C++ 的上下文中，我倾向于“是”，但它（无休止地）有争议。

2) 上面的例子是运行时多态还是编译时？

也没有......甚至没有两个函数可以根据类型选择 - 你总是运行相同的机器代码`func()`：编译器选择的机器代码假设类型是`A`.

> 3）如果我有以下代码： -

```
void func2(A& myA)
{
    cout << myA.i << endl;
    // dynamic/static cast myA to myB
    cout<<myB.j << endl;
} 
```

> 它是一种什么样的多态性？或者它甚至是多态性？

根本不是多态的，因为您没有基于类型的分支。动态转换可以在 myA 的运行时类型中查询编译器填充的类型元数据，如果您使用它来仅有条件地调用访问`myB.j`- 这将是未定义的行为，除非`myA`是 a `B`- 那么你回到手动、明确地开发人员协调特定类型的行为，以及上面讨论了这是否符合您的“多态性”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-19T10:47:37.390

[C++]

多态性被定义为一个接口来控制对一类通用动作的访问。多态有两种类型，一种是编译时多态，另一种是运行时多态。编译时多态是函数和运算符的重载。运行时多态性是使用继承和虚函数完成的。

多态性意味着函数在不同的时间呈现不同的形式。在编译时，它被称为函数重载。例如，一个程序可以由两个函数组成，一个可以执行整数加法，另一个可以执行浮点数的加法，但函数的名称可以相同，例如 add。函数 add() 被称为重载。两个或多个函数可以具有相同的名称，但它们的参数列表在参数或数据类型方面应该不同。仅返回类型不同的函数不能重载。编译器将根据传递的参数类型选择正确的函数。在类的情况下，构造函数可能会被重载，因为可以同时存在已初始化和未初始化的对象。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-19T08:56:44.057

多态性是通过虚函数实现的。但是要产生任何效果，即取决于类型的不同行为，您也需要继承

```
struct A {
    virtual void f() = 0;
};

struct B : public A {
    void f() {
        // do B things
        std::cout << "B::f() called\n";
    }
};

struct C : public A {
    void f() {
        // do C things
        std::cout << "C::f() called\n";
    }
}; 
```

现在，您可以拥有`A`具有不同行为的指针或引用，具体取决于它是 a`B`还是`C`.

# c# - 等待线程结束的问题

> ID：14953224
> 
> 赞同：0
> 
> 时间：2013-02-19T08:46:47.000
> 
> 标签：c#, multithreading, join

我正在做一些 C# 线程。启动线程并将数据传输给它们没有问题，但是我在等待它们结束时遇到了问题。

我的代码如下所示。我`Join()`用来等待线程结束，但由于某种原因我的代码不起作用。

`Join()`尽管调用了所有活动线程，但主线程（即 for 循环）并未被阻塞。

知道我做错了什么吗？

```
List<Thread> calculationThreads = new List<Thread>();

foreach (string calculation in calculations)
{
    if (calculationThreads.Count < 5)
    {
        Thread calculationThread = new Thread(DoCalculation);
        calculationThreads.Add(calculationThread);

        calculationThread.Start(threadData);
    }
    else
    {
        // Wait for the threads to complete
        foreach (Thread calculationThread in calculationThreads)
        {
            calculationThread.Join();
        }
    }   
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T09:03:25.490

第一个问题是你对`else`案件的处理。如果已经有五个线程，代码将等待线程完成，但它试图添加的任务永远不会添加。它只会丢弃该任务并继续下一个任务。

第二个问题是您没有从列表中删除任何线程，因此一旦达到五个线程，它将永远等待。如果第一个问题没有放弃其余的任务，你的程序就会被锁定。

此外，在继续工作之前等待所有五个线程都完成是在浪费处理时间，但这是一个较小的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T08:52:22.510

我会采用一些方法，我只计算我已经启动了多少线程，并在每个线程结束时减少计数器。

然后在你的循环开始时你可以拥有

```
while(counter >= 5)
{
//Wait
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T08:52:31.643

您可以有一个等待所有线程结束的 while 循环。

```
List<Thread> calculationThreads = new List<Thread>();

foreach (string calculation in calculations)
{
    if (calculationThreads.Count < 5)
    {
        Thread calculationThread = new Thread(DoCalculation);
        calculationThreads.Add(calculationThread);

        calculationThread.Start(threadData);
    }
    else
    {
        // Wait for the threads to complete
        while(calculationThread.Any(x => x.IsAlive)){}
        // Clearing the list
        calculationThread.Clear();
    }   
} 
```

如果你想在 for 循环之后保留线程，你应该有另一个列表来存储线程。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T08:58:37.307

您为该方法提供了多少计算？

阅读代码，如果您提供 4 个计算，您将启动 4 个线程，但从未真正转到执行 thread.Join() 的代码。

将 thread.join 循环移到 if else 语句之外。

```
List<Thread> calculationThreads = new List<Thread>();

    foreach (string calculation in calculations)
    {
        if (calculationThreads.Count < 5)
        {
            Thread calculationThread = new Thread(DoCalculation);
            calculationThreads.Add(calculationThread);

            calculationThread.Start(threadData);
        }

    }
    foreach (Thread calculationThread in calculationThreads)
    {
        calculationThread.Join();
    } 
```

# vb.net - CastleWindsor 在 Silverlight 中使用默认界面注册所有类

> ID：14953239
> 
> 赞同：0
> 
> 时间：2013-02-19T08:47:47.077
> 
> 标签：vb.net, c#-4.0, silverlight-4.0, castle-windsor

我需要扫描我的程序集并注册所有与 Castle 具有默认接口的类。例如：如果存在就`MySpecialClass`应该注册。`IMySpecialClass`

vb.net 注册表：

```
Public Class UiRegistry
    Implements IWindsorInstaller

    Public Sub Install(ByVal container As IWindsorContainer, ByVal store As IConfigurationStore) Implements IWindsorInstaller.Install
        container.Register(Classes.FromThisAssembly().)
    End Sub
End Class 
```

这是我得到的，但我找不到任何提供我需要的实现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T09:09:22.427

这很简单：

```
 container.Register(Classes.FromThisAssembly().Pick().WithServiceDefaultInterfaces()) 
```

我只需要使用 .Pick() 来选择类，然后我可以选择配置接口的选项。

# iphone - 如何从目录中读取文件

> ID：14953243
> 
> 赞同：0
> 
> 时间：2013-02-19T08:47:55.743
> 
> 标签：iphone, ios, nsdocumentdirectory

我有一个别人写的项目。该项目将视频文件保存在此路径中，`file://localhost/var/mobile/Applications/CAC8F2CB-1C7D-4805-BF1A-42B63B258E95/Documents/output.mp4`

我想用 MPMoviePlayerController 播放文件，如何访问文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T08:52:29.723

试试这个 ：-

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);  
NSString *documentsDirectory = [paths objectAtIndex:0];  
NSString *fullPath = [documentsDirectory stringByAppendingPathComponent:@"output.mp4"]; 
```

在这里，`fullPath`您将拥有上面提到的路径。

有关如何播放视频的更多详细信息，请参阅[本教程](http://www.imedian.net/en/2012/03/video-for-iphoneipad-using-mpmovieplayercontroller/)

希望这可以帮助你..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T08:56:21.753

试试这个代码伙伴，

```
NSString *documentDirectory = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,NSUserDomainMask, YES) objectAtIndex:0];

NSString *videoFilePath = [documentDirectory stringByAppendingPathComponent:@"output.mp4"];
    NSURL *videoURL = [NSURL URLWithString:videoFilePath];

MPMoviePlayerController *moviePlayer = [[MPMoviePlayerController alloc] initWithContentURL:videoURL]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T09:10:07.790

首先加载路径和文件 URL：

```
NSString *documentsDirectory = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,    NSUserDomainMask, YES) objectAtIndex:0];

NSString *localFilePath = [photoDirectoryPath stringByAppendingPathComponent:@"output.mp4"]; 
```

然后使用 URL 加载 MPMoviePlayerController

```
- (void)initMoviePlayer 
{
didExit = NO;

[[NSNotificationCenter defaultCenter] addObserver:self 
                                         selector:@selector(moviePreloadDidFinish:) 
                                             name:MPMoviePlayerLoadStateDidChangeNotification 
                                           object:mMoviePlayer];

[[NSNotificationCenter defaultCenter] addObserver:self 
                                         selector:@selector(moviePlayBackDidFinish:) 
                                             name:MPMoviePlayerPlaybackDidFinishNotification 
                                           object:nil];

NSLog(@"initMoviePlayer: %@ ",[self getMovieURL]);

mMoviePlayer = [[MPMoviePlayerController alloc] initWithContentURL:[self getMovieURL]];

mMoviePlayer.shouldAutoplay = YES;

mMoviePlayer.view.hidden = YES;

[mMoviePlayer setControlStyle:MPMovieControlStyleNone];

mMoviePlayer.view.frame = [self.view bounds];

mMoviePlayer.scalingMode = MPMovieScalingModeNone;

[[self view] addSubview:[mMoviePlayer view]];

[mMoviePlayer play];

}

- (void) moviePreloadDidFinish:(NSNotification*)notification {

// start playing the movie

    mMoviePlayer.view.hidden = NO;

    animateTimer = [NSTimer scheduledTimerWithTimeInterval:0.5
                                                target:self 
                                              selector:@selector(playMovie:) 
                                              userInfo:nil 
                                               repeats:NO];
}

- (void) moviePlayBackDidFinish:(NSNotification*)notification 
{        

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-19T10:01:37.303

如果您将上述 URL 存储在某处

```
NSString *fullURL = @"/var/mobile/Applications/CAC8F2CB-1C7D-4805-BF1A-42B63B258E95/Documents/output.mp4"
NSURL *movieURL = [NSURL fileURLWithPath: isDirectory:YES]; //If YES not works use NO
MPMoviePlayerController *player = [[MPMoviePlayerController alloc] initWithContentURL:movieURL]; 
```

希望有帮助

# java - java xml解析：文件的即时更新

> ID：14953245
> 
> 赞同：0
> 
> 时间：2013-02-19T08:48:03.257
> 
> 标签：java, xml, parsing

我有以下一段 xml 代码：

```
<Sequence>
<PreCommand>
 <Copy>
   <Source>pahtToSourceFile</Source>
   <Dest>pathToDest</Dest>
 </Copy> 
```

我想做的是更改源元素。Java中有没有一种方法可以循环遍历xml并在找到源标记时对其进行更新？我对java中的xml解析非常陌生。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T08:55:21.513

您可以使用 DOM 解析器；这对于编辑 XML 很方便。

[http://www.mkyong.com/java/how-to-modify-xml-file-in-java-dom-parser/](http://www.mkyong.com/java/how-to-modify-xml-file-in-java-dom-parser/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T08:54:59.640

通过使用`DomParser`我们创建或编辑 XML。

[参考链接](http://www.mkyong.com/java/how-to-modify-xml-file-in-java-dom-parser/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T08:56:04.050

在这里你可以找到关于[sax-parser](http://docs.oracle.com/javase/tutorial/jaxp/sax/parsing.html)

`DomParser`[已经在](https://stackoverflow.com/questions/6857926/xml-parsing-using-dom-in-java)stackoverflow上

# javascript - 如何更新knockoutjs中的可观察数组元素？

> ID：14953248
> 
> 赞同：10
> 
> 时间：2013-02-19T08:48:04.970
> 
> 标签：javascript, knockout.js

我有以下 JavaScript 数组，

```
[{"unitPrice": 2499,"currency":"$","productId":1,"retailerId":1,"productName":"XX ","formattedPrice":"$ 2,499","productImage":"Images/2012_08_12_00_45_39_4539.jpg","productQuantity":"9","totalPrice":19992},
{"unitPrice": 4999,"currency":"$","productId":2,"retailerId":1,"productName":"XX","formattedPrice":"$ 4,999","productImage":"Images/2012_08_12_00_46_45_4645.jpg","productQuantity":2,"totalPrice":9998},
{"unitPrice":4555,"currency":"$","productId":1,"retailerId":1,"productName":"XXXXX","formattedPrice":"$ 4,555","productImage":"Images/2013_02_12_10_57_49_5749_9868.png","productQuantity":3,"totalPrice":13665}] 
```

这是相关的html，

```
<table>
<tbody data-bind="foreach: $root">
                    <tr>
                        <td><img width="45" height="45" alt="" data-bind="attr:{src: productImage}"/></td>
                        <td><span data-bind="html: productName"></span></td>
                        <td><span data-bind="html: formattedPrice"></span></td>
                        <td><input type="number" class="quantity" data-bind="value: productQuantity, attr:{'data-id': productId }"  /></td>
                        <td><span data-bind="html: totalPrice"></span></td>
                    </tr>
                </tbody>
</table> 
```

然后我创建了可观察数组，

```
observableItems = ko.observableArray(items);
ko.applyBindings(observableItems); 
```

现在我能够使用特定的元素，

```
 var obj = ko.utils.arrayFirst(list(), function (item) {
            return item.productId === id;
        }); 
```

然而当我改变时，

```
item.productQuantity = 20; 
```

但是 UI 没有更新。也试过，

```
item.productQuantity(item.productQuantity) 
```

但是得到错误 productQuantity 不是一个函数

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-19T08:53:35.900

上述行为是因为只有数组是可观察的，而不是数组中的单个元素或每个元素的属性。

当您这样做时`item.productQuantity = 20;`，这将更新属性，但由于它不是可观察的，因此 UI 不会更新。

同样，`item.productQuantity(20)`给你一个错误，因为`productQuantity`它不是可观察的。

您应该查看为数组的每个元素定义对象结构，然后将该类型的元素添加到可观察数组中。完成此操作后，您将能够执行类似`item.productQuantity(20)`的操作，并且 UI 将立即自行更新。

**编辑**添加了 OP 提供的功能 :)。此函数会将数组中元素的每个属性转换为可观察对象。

```
function convertToObservable(list) 
{ 
    var newList = []; 
    $.each(list, function (i, obj) {
        var newObj = {}; 
        Object.keys(obj).forEach(function (key) { 
            newObj[key] = ko.observable(obj[key]); 
        }); 
        newList.push(newObj); 
    }); 
    return newList; 
} 
```

**结束编辑**

如果您无法更改那段代码，您也可以执行类似`observableItems.valueHasMutated()`. 但是，这不是一件好事，因为它会向 KO 和您的 UI 发出整个数组已更改的信号，并且 UI 将根据绑定呈现整个数组。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-19T10:24:25.797

您可以轻松地使用 ko.mapping 插件将对象转换为可观察： http: [//knockoutjs.com/documentation/plugins-mapping.html](http://knockoutjs.com/documentation/plugins-mapping.html)

将常规 JS 实体转换为可观察实体：

```
var viewModel = ko.mapping.fromJS(data); 
```

将 observable 对象转换为常规 JS 对象：

```
var unmapped = ko.mapping.toJS(viewModel); 
```

# deployment - 部署 linux CUDA 应用程序

> ID：14953249
> 
> 赞同：1
> 
> 时间：2013-02-19T08:48:05.307
> 
> 标签：deployment, cuda, nvidia

我使用 NVIDIA CUDA 5 工具包在我的笔记本电脑上编译了一个 cu 程序。一个非常基本的界面，仅使用终端输出。然后我继续测试它如何在我的台式机上运行（两者都安装了 Ubuntu 12.04 LTS）。

在台式电脑上，我收到此错误消息：

加载共享库时出错：libcudart.so.5.0：无法打开共享对象文件：没有这样的文件或目录

好的，我明白了，有些库没有安装。但是我真的需要在每台我希望我的编译代码运行的 PC 上安装 CUDA 工具包吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-19T09:11:30.537

要在 Linux 上部署 CUDA 运行时 API 应用程序，您只需要做两件事：

1.  确保有问题的机器具有与您用于构建应用程序的 CUDA 工具包相匹配的 CUDA 兼容卡和最低驱动程序版本（您可以在工具包的发行说明中找到有关这两者的信息）
2.  分发您使用可执行文件构建应用程序的*运行时库*（如 cudart.so）。如果您使用工具包中的任何其他库（如 CUBLAS、CUFFT、CUSPARSE 等），您也需要包含这些库。CUDA 运行时库是版本化的，您必须拥有与您正在构建的工具包匹配的库。您可能需要使用`LD_LIBRARY_PATH`环境变量来确保链接加载器找到正确版本的库。通常，一个简单的 shell 脚本充当规范应用程序、设置`LD_LIBRARY_PATH`变量并运行构建的可执行文件是执行此操作的最佳方式。

如果你把这两件事做对了，它应该就可以工作了。

# android - 来自浏览器地址栏的自定义 URL android 不起作用

> ID：14953261
> 
> 赞同：3
> 
> 时间：2013-02-19T08:48:42.263
> 
> 标签：android, intentfilter, custom-url

我已经实现了 Android 自定义 URl 方案，当我发送要以邮件形式打开的链接然后单击它时，它工作正常。

当我在移动浏览器的地址栏中键入相同的地址时，它不起作用，这反过来又给出了一个找不到页面的错误。这是我的意图过滤器 -

```
 <intent-filter> 
     <action android:name="android.intent.action.VIEW" />
     <category android:name="android.intent.category.DEFAULT" />
     <category android:name="android.intent.category.BROWSABLE" />
     <data android:scheme="http" android:host="myappname.com"/>
 </intent-filter> 
```

如果我在网络浏览器中键入[http://myappname.com](http://myappname.com)，是否需要指定其他内容才能打开它。是不是某些手机/浏览器不支持这种行为？或者这根本不可能？

任何帮助将不胜感激。先感谢您。

# c# - 有没有办法将任务 ID 传递给调用函数？

> ID：14953265
> 
> 赞同：2
> 
> 时间：2013-02-19T08:48:52.363
> 
> 标签：c#, task

有没有办法将任务 ID 传递给调用函数？

实际上，我`Run`在一个单独的文件中定义了一个函数，它假设在完成时调用一个`callback`函数。我希望这个函数与任务无关（即不想在其中使用 Task.CurrentId）

```
X.cs:
void Run(object userState)
{
    .
    .
    .
    callback(userState);
} 
```

回调函数的目的是在我的情况下执行清理任务，即释放我存储在任务池中的任务的引用。

```
Y.cs
void LaunchTask()
{
    .
    .
    .
    Task task = Task.Factory.StartNew(() => Run(???)); //How to pass Task ID here as an argument yo Run?
    TaskPool[task.Id] = task;
}

void callback(object userState)
{
    .
    .
    .

    A a = (A)userState;
    var taskID = a.ID;
    TaskPool.Remove(taskID); //Free the reference of the task from the pool
} 
```

现在我的问题是我将如何将任务 ID`Run`作为`userState`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T09:03:40.463

在原始任务上放置 continueWith 可能更容易，例如：

```
 public void LaunchTask()
    {
        Task<MyType> t = Task.Factory.StartNew(() => Run());
        t.ContinueWith( _ => CleanUpTask(t));
    }

    private void CleanUpTask(Task<MyType> task)
    {
        int id = task.Id;
        MyType t = task.Result;

        //cleanup
    }

    private MyType Run()
    {
        return new MyType {...};
    } 
```

# java - 修复 PrimeFaces 中的 p:dataTable 宽度

> ID：14953269
> 
> 赞同：1
> 
> 时间：2013-02-19T08:48:59.253
> 
> 标签：java, css, jsf, primefaces, datatable

我想修复我的数据表的宽度。

我正在使用`<p:dataTable> </p:dataTable>`PrimeFaces 3.2。

**如何使用 css 修复 PrimeFace 的 DataTable 宽度？**

我已经试过了

```
style="table-layout: fixed; width:100px;" 
```

但它不起作用

添加DataTable的完整代码

```
 <p:dataTable id="eventTbl" var="e" value="#{eventBean.eventList}" style="table-layout: fixed; width:100px;"
    paginator="true" rows="20" lazy="true"
    paginatorTemplate=" {FirstPageLink} {PreviousPageLink} {CurrentPageReport} {NextPageLink} {LastPageLink}"
    dynamic="true">
    <p:column>
        <p:commandButton id="selectButton" update=":form:display"
            action="#{eventBean.getEventDetails(e.eventNum)}"
            oncomplete="eventDialog.show()" icon="ui-icon-search"
            title="View">
        </p:commandButton>
    </p:column>
    <p:column headerText="Event Type" filterBy="#{e.eventType}">
        <h:outputText value="#{e.eventType}" />
    </p:column>
    <p:column headerText="Order Id" filterBy="#{e.orderId}">
        <h:outputText value="#{e.orderId}" />
    </p:column>
    <p:column headerText="Status" filterBy="#{tr.status}">
        <h:outputText value="#{tr.status}" />
    </p:column>
    <p:column headerText="Event Date" filterBy="#{e.eventDate}">
        <h:outputText value="#{e.eventDate}" />
    </p:column>
    <p:column headerText="Event Number" filterBy="#{e.eventNum}">
        <h:outputText value="#{e.eventNum}" />
    </p:column>
    <p:column headerText="Request Number" filterBy="#{e.requestNum}">
        <h:outputText value="#{e.requestNum}" />
    </p:column>
    <p:column headerText="Masked Pan" filterBy="#{e.maskedPan}">
        <h:outputText value="#{e.maskedPan}" />
    </p:column>
    <p:column headerText="Card Name" filterBy="#{e.cardName}">
        <h:outputText value="#{e.cardName}" />
    </p:column>
    <p:column headerText="Reference Number" filterBy="#{e.refNumb}">
        <h:outputText value="#{e.refNumb}" />
    </p:column>
</p:dataTable> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T09:33:41.267

使用 tableStyle 而不是样式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T09:19:05.710

我很确定您在输入和按钮表单元素的样式类上有一些最小宽度或宽度属性。

使用 firebug 进行检查（选择其中一个输入字段并检查附加到它的样式以获取 min-width 或 width 属性）。

如果您有其中任何一个，请尝试删除或调整它们的大小，因为它们的宽度将被应用，无论您为它们的父（表格）元素设置的宽度是多少。

问候马克

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-21T06:01:58.003

可能有两种可能的方法来解决或找到这个问题。

1.  请检查您是否已将 colspan 大小用于数据表。例如，如果您的表单 colspan 大小为 10，请确保您在数据表中提到 colspan 大小为 10。
2.  使用 styleClass 而不是 style 或继承值，如下所示

`.tableSize{ table-layout:fixed !important; width:100% !important; }`

**使用 styleClass="tableSize"**

# oracle - Performance implications of using (DBMS_RLS) Oracle Row Level Security(RLS)?

> ID：14953270
> 
> 赞同：0
> 
> 时间：2013-02-19T08:48:59.810
> 
> 标签：oracle, performance, security, licensing, row-level-security

If we use Oracle Row Level Security(RLS) to hide some records - **Are there any Performance Implications - will it slow down my SQL Queries?** The Oracle Package for this is: DBMS_RLS.

I plan to add: IS_HISTORICAL=T/F to some tables. And then using RLS, hide the records which have value of IS_HISTORICAL=T.

The SQL Queries we use in application are quite complex, with inner/outer joins, subqueries, correlated subqueries etc.

Of the 200 odd tables, about 50 of them will have this RLS Policy (to hide records by IS_HISTORICAL=T) applied on them. Rest of the 150 tables are child tables of these 50 Tables, so RLS is implicit on them.

**Any License implications?**

Thanks.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T09:18:05.337

> "Are there any Performance Implications - will it slow down my SQL Queries? "

As with all questions relating to performance the answer is, "it depends". RLS works by wrapping the controlled query in an outer query which applies the policy function as a WHERE clause...

```
select /*+ rls query */ * from ( 
    select /*+ your query */ ... from t23 
    where whatever = 42 )
where rls_policy.function_t23 = 'true' 
```

So the performance implications rest entirely on what goes in the function.

The normal way of doing these things is to use context namespaces. These are predefined areas of session memory accessed through the SYS_CONTEXT() function. As such the cost of retrieving a stored value from a context is negligible. And as we would normally populate the namespaces once per session - say by an after logon trigger or a similar connection hook - the overall cost per query is trivial. There are different ways of refreshing the namespace which might have performance implications but again these are trivial in the overall schem of things ([see this other answer](https://stackoverflow.com/a/14605275/146325)).

So the performance impact depends on what your function actually does. Which brings us to a consideration of your actual policy:

> "this RLS Policy (to hide records by IS_HISTORICAL=T)"

The good news is the *execution* of such a function is unlikely to be costly in itself. The bad news is the performance may still be Teh Suck! anyway, if the ratio of live records to historical records is unfavourable. You will probably end up retrieving all the records and then filtering out the historical ones. The optimizer might push the RLS predicate into the main query but I think it's unlikely because of the way RLS works: it avoids revealing the criteria of the policy to the general gaze (which makes debugging RLS operations a real PITN).

Your users will pay the price of your poor design decision. It is much better to have journalling or history tables to store old records and keep only live data in the real tables. Retaining historical records alongside live ones is rarely a solution which scales.

> "Any License implications?"

DBMS_RLS requires an Enterprise Edition license.

# android - wpa_supplicant 是特定于 android 设备还是特定于 android 版本？

> ID：14953271
> 
> 赞同：6
> 
> 时间：2013-02-19T08:49:04.023
> 
> 标签：android, android-wifi, android-networking, android-internet, android-wireless

我最近购买了索尼 xperia P，但它无法检测到 ad-hoc 网络。经过一番谷歌搜索后，我知道 android 不支持 ad-hoc 网络，并且我没有修改 /system/bin/wpa_supplicant 文件，以便它也可以显示 ad-hoc 网络。我在 github 上找到了很多修改过的文件，但我不知道我应该使用哪个。文件 wpa_supplicant 是特定于设备还是特定于 android 版本？我的 android 版本是 4.0.4 (Sony xperia P)，谁能给我我可以在手机上使用的确切文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-09T02:04:46.333

因为wpa_supplicant与网卡驱动交互，而驱动与网卡芯片相关联。并且不同的网卡支持不同范围的 IEEE 802.11（包括可选和强制标准）标准，所以我猜 wpa_supplicant 是特定于网卡芯片的。虽然一个版本的 wpa_supplicant 可能支持多个网络驱动程序和网卡。

![在此处输入图像描述](../Images/d644bd89b8e227d998ae54c3a9198c2b.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-17T02:34:24.630

仅修改 wpa_supplicant 不足以在 Android 中进行临时工作（除非您计划通过命令行而不是设置应用程序使用它）。设置应用程序和 WLAN API 过滤掉 ad-hoc 网络。

wpa_supplicant 也与特定硬件无关，但 Android 对 wpa_supplicant 所做的一些更改取决于 Android 版本，具体取决于新 Android 版本中添加的新功能。

# javascript - Tinyscrollbar 和 Tab 键交互

> ID：14953273
> 
> 赞同：0
> 
> 时间：2013-02-19T08:49:06.560
> 
> 标签：javascript, jquery, tinyscrollbar

如何解决 tab 键与 tinyscrollbar 交互的问题。当我按 Tab 键跳转到不在视图中的输入时，我的布局被破坏，滚动条消失等。如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T09:57:46.947

**这就是我所做的：**为元素添加一个`tabindex`属性，以便元素可以从`tab`键或鼠标单击接收焦点状态：

```
<div class="scroll-area" tabindex="1">
   <div class="viewport">
     <div class="overview">
       … CONTENT …
     </div>
   </div>
   <div class="scrollbar">
     <span class="track"><span class="thumb"></span></span>
   </div>
</div> 
```

**接下来，我在TinyScrollbar**插件中创建此函数以添加键盘支持并启用键盘导航`:focus`：

```
$.fn.tinyscrollbar = function(params) {

    var options = $.extend({}, $.tiny.scrollbar.options, params),
        $this = this;

    $this.each(function() {

        $(this).data('tsb', new Scrollbar($(this), options));

        // Enable keyboard support on focus
        $this.on('focus', function () {
            $(this).on('keydown', function (e) {
                if (e.keyCode == 38 || e.keyCode == 37) {
                    $(this).tinyscrollbar_keystep(40); // step 40px on single keypress
                    return false;
                } else if (e.keyCode == 40 || e.keyCode == 39) {
                    $(this).tinyscrollbar_keystep(-40); // step -40px on single keypress
                    return false;
                }
            });
        });

    });

    return $this;

}; 
```

然后，创建`.tinyscrollbar_keystep()`用于更新下面的滚动步骤`.tinyscrollbar_update()`：

```
 $.fn.tinyscrollbar_update = function(sScroll) {
        return $(this).data('tsb').update(sScroll);
    };

    // Add this functionality for scroll update on keypress (in this case)
    $.fn.tinyscrollbar_keystep = function(sScroll) {
        return $(this).data('tsb').keystep(sScroll);
    }; 
```

并`.keystep`在之后发挥作用`initialize()`

```
 function initialize() { … }

    this.keystep = function(sScroll) {
        if (oContent.ratio < 1) {
            iScroll -= sScroll;
            iScroll = Math.min((oContent[options.axis] - oViewport[options.axis]), Math.max(0, iScroll));
            oThumb.obj.css(sDirection, iScroll / oScrollbar.ratio);
            oContent.obj.css(sDirection, - iScroll);
        }
    }; 
```

**演示：http:** [//jsbin.com/zaqogidexese/1/edit](http://jsbin.com/zaqogidexese/1/edit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-13T22:05:22.320

我在这里有类似的情况，这是我对表单输入字段的解决方案：

```
$(document).on('keydown',function(e) {
    switch (e.keyCode ? e.keyCode : e.which) {  
        case 9: // Tab
            if (e.target.localName == 'input') {
                content.tinyscrollbar_update($(e.target).position().top); 
            }
        break;
    }
}); 
```

如果每个输入都有任何包装器元素，请将“.position().top”更新为“.parent().position().top”

# load-balancing - 可以随机分配给 m 个服务器的 n 个进程的样本空间是多少？

> ID：14953275
> 
> 赞同：1
> 
> 时间：2013-02-19T08:49:16.040
> 
> 标签：load-balancing, probability

如果我们有 n 个进程和 m 个服务器，结果的总数是多少？m 的 n 次方？即 m*m* .. n 次？我认为这是正确的答案。或者它是 n 的 m 次幂？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T04:41:46.223

每个进程都可以分配给`m`服务器，并且有`n`，所以`m*m*m... = m^n`.

更有趣的是，如果进程有一些运行时间，并且您希望最小化运行它们的总时间。那么你有一个一般的[调度问题](http://en.wikipedia.org/wiki/Job_shop_scheduling)。

# android - FileObserver -> onEvent(event, path): 路径为 NULL

> ID：14953278
> 
> 赞同：5
> 
> 时间：2013-02-19T08:49:21.063
> 
> 标签：android, fileobserver

我想知道文件何时完成写入，为此我正在尝试使用`FileObserver`. 我这样做是这样的：

```
FileObserver observer = new FileObserver(imageUri.getPath()) {
        @Override
        public void onEvent(int event, String path) {
            if(event == FileObserver.CLOSE_WRITE)
                Log.d(TAG, "FILE: "+path);
        }
};
observer.startWatching(); 
```

`imageUri`是有效的`Uri`。当文件关闭时，我得到以下日志条目：

```
FILE: null 
```

为什么呢`null`？用户可能写了几个文件，所以我需要知道哪个文件触发了事件。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-19T09:01:00.453

根据以下[文件`onEvent()`](http://developer.android.com/reference/android/os/FileObserver.html#onEvent%28int,%20java.lang.String%29)：

> 触发事件的文件或目录相对于主监控文件或目录的路径

所以我猜它什么时候`path`是`null`指定的文件或目录......

您需要自己跟踪原始路径。并将`path`of附加`onEvent()`到此路径以获取完整路径（除非您正在跟踪文件并且其值始终为`null`）：

```
FileObserver observer = new FileObserver(imageUri.getPath()) {
    public String basePath;

    @Override
    public void onEvent(int event, String path) {
        String fullPath = basePath;
        if(path != null) {
            // Eventually add a '/' in between (depending on basePath)
            fullPath += path;
        }
        Log.d(TAG, "FILE: "+fullPath);
    }
};
observer.basePath = imageUri.getPath();
observer.startWatching(); 
```

我试图使示例尽可能接近您的代码片段。但是，创建一个完整的扩展类要好得多`FileObserver`，因此您可以添加一个构造函数来存储`basePath`并且不需要从类/实例外部访问公共字段！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-22T19:16:33.623

我今天刚遇到这样的事情。我有一个 FileObserver 监视一个文件夹中的新文件，然后我尝试对下载的图像做一些事情。当我通过 BitmapFactory.decodeFile(ImgPath) 访问图像时，有时会得到 NULL 结果。这似乎发生在更新更快的设备上，并且在单步执行事件时从未调试过。我得出的结论是该文件仍在使用中或尚未完全完成，我不得不等到系统从文件中释放它的爪子。

我是 Android 开发的新手，还不熟悉执行此操作的正确方法，但暂时通过插入 Thread.sleep 避免了 NULL 问题。我知道这很糟糕，但它对我来说是一个临时解决方案。

# mono - 使用 gstreamer-sharp 播放音乐流

> ID：14953285
> 
> 赞同：2
> 
> 时间：2013-02-19T08:49:50.577
> 
> 标签：mono, gstreamer

我正在寻找一个示例，向我展示如何从 URL 播放 mp3 流。我正在尝试使用带有 gstreamer 的单声道为 apache 构建命令行客户端。到目前为止，我还没有找到任何线索如何使用 gstreamer sharp - 有人有经验吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T11:45:31.187

看看[Banshee 源代码](http://git.gnome.org/browse/banshee/tree/src/Backends/Banshee.GStreamerSharp/Banshee.GStreamerSharp)，我们有一个 GStreamerSharp 后端。

# c - C中的二叉搜索树：删除节点功能

> ID：14953286
> 
> 赞同：1
> 
> 时间：2013-02-19T08:49:59.960
> 
> 标签：c, data-structures, binary-search-tree

我正在将二叉搜索树的函数放在一起，然后撞到了墙上。我正在处理需要从树中删除持有指定值的节点时可能遇到的每种情况。如果节点没有左右子节点，我不确定如何处理释放节点。该函数必须返回一个节点。我是否备份，检查每个左右孩子，并在孩子的时候删除价值？但是，如果该值在根目录中，我不会在如何删除它方面遇到类似的问题吗？只是作为解释，程序使用 void 指针，然后将 TYPE val 转换为单独的函数 compare()，该函数计算两个值并返回 -1 表示 <，0 表示 ==，1 表示 >。

```
struct Node *_removeNode(struct Node *cur, TYPE val)
{
    if (compare(cur->val, val) == 0) { //if val == cur->val
        if (cur->right != NULL && cur->left != NULL) { //if cur has right and left
            cur = _leftMost(cur->right);
            free(_leftMost(cur->right));
        }
        else if (cur->right == NULL && cur->left != NULL) {  //if cur has left
            cur = cur->left;
            free(cur->left);
        }
        else if (cur->right != NULL && cur->left == NULL){ //if cur has right
            cur = cur->right;
            free(cur->right);
        }
        else if (cur->right == NULL && cur->left == NULL){ //if cur has no child
                //free cur if cur = val

        }
    }
    else if (compare(cur->val, val) == -1) {
        cur->right = _removeNode(cur->right, val);
    }
    else if (compare(cur->val, val) == 1) {
        cur->left = _removeNode(cur->left, val);
    }

    return cur;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T19:19:17.080

如果节点没有子节点，则可以简单地删除它。为了使您的递归在其他情况下工作，您应该从_removeNode 返回NULL。在所有情况下，cur 都应该被删除（释放），因为它不再需要。在每种情况下，您都需要返回替换子树。并发症发生在右孩子的最左边的后代被拉起的第一种情况下。拉上去之后，需要把它从右子树中移除（注意可能是右子树）。

我在脑海中写下了以下所有内容，因此请为一些错误/一些调试做好准备。此外，_leftMost 和 _removeLeftMost 可以通过一些工作进行合并。

有问题的块应该类似于：

```
 Node *replacement;
    if (cur->right != NULL && cur->left != NULL) { //if cur has right and left    
        replacement = _leftMost(cur->right);
        replacement->right = _removeLeftMost(cur->right,replacement);
        replacement->left = cur->left;
    }
    else if (cur->right == NULL && cur->left != NULL) {  //if cur has left
        replacement = cur->left;
    }
    else if (cur->right != NULL && cur->left == NULL){ //if cur has right
        replacement = cur->right;
    }
    else if (cur->right == NULL && cur->left == NULL){ //if cur has no child
        replacement = NULL;
    }
    free(cur);
    cur = replacement; 
```

_removeLeftMost 函数沿着左子指针向下遍历，直到它看到要替换的节点，然后用该节点的右子节点替换它。就像是：

```
Node *_removeLeftMost(node, remove) {
    if (node == remove) {
       return node->right; // Note that remove->left should be null
    }
    else {
       node->left = _removeLeftMost(node->left,remove);
       return node;
    }
} 
```

此外，主要的电话是

```
root = _removeNode(root, val); 
```

因此，当节点是根时，这可以解决您的问题。

# ios - 开始编辑时文本字段消失在键盘后面

> ID：14953288
> 
> 赞同：1
> 
> 时间：2013-02-19T08:50:00.800
> 
> 标签：ios, xamarin.ios

我在滚动视图中有一个文本字段。当我点击文本字段添加文本时，键盘弹出，文本字段消失在键盘后面。如何解决这个问题？滚动视图应向下滚动，以便在键入时文本字段仍然可见。

我为一个 Objective-C 项目找到了几个解决方案。不幸的是，我使用的是 Mono Touch/C#。

我已经为文本字段创建了一个委托。我应该在方法“public override void EditingStarted (UITextField textField)”中添加什么来使其工作？

```
public class CloseTextfieldDelegate : UITextFieldDelegate{
    private NewReportScreen controller;

    public CloseTextfieldDelegate(NewReportScreen newReportScreen)
    {
        controller = newReportScreen;
    }

    public override bool ShouldReturn (UITextField textField)
    {
        textField.ResignFirstResponder();
        return false;
    }

    public override void EditingStarted (UITextField textField)
    {
        //DO SOMETHING (MAKE TEXTFIELD VISIBLE SO IT DOESN'T DISAPPEARS BEHIND THE KEYBOARD)
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T09:22:31.400

例如，这就是使用 ObjC 解决的方法。在这里，我只是移动包含文本字段的视图，使其可见（也许您可以将此代码转换为 mono/C#.

```
- (void)textFieldDidBeginEditing:(UITextField *)textField
{

    if (textField == myTf)
    {
        CGRect rect = inputFieldsView.frame;
        rect.origin.y = -100;//move the view that contains the TextFiled up
        inputFieldsView.frame = rect;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T10:51:01.833

我在 CloseTextfieldDelegate 类中使用以下方法解决了这个问题：

```
public override void EditingStarted (UITextField textField)  //used to scroll the scrollview when editing a textfield
    {
        var yPositionTextFieldDescription =  (newReportController.usedTextFieldDescription.Frame.Location.Y - 143);
        var yPositionTextFieldRoom =  (newReportController.usedTextFieldRoom.Frame.Location.Y - 143);   

        if (textField == newReportController.usedTextFieldDescription){ 
            newReportController.usedScrollView.SetContentOffset (new PointF (0, yPositionTextFieldDescription), true);
        }
        else if (textField == newReportController.usedTextFieldRoom){
            newReportController.usedScrollView.SetContentOffset (new PointF (0, yPositionTextFieldRoom), true);
        }
    } 
```

我认为这不是最好的解决方案，但效果很好。

# performance - Matlab以矩阵和单元格位置为参数执行每个单元格矩阵的函数

> ID：14953291
> 
> 赞同：2
> 
> 时间：2013-02-19T08:50:04.837
> 
> 标签：performance, matlab, matrix

我需要对一组约 400 张图像中的每个图像的每个像素应用一个函数。我编写的函数（称为`customf`）需要 3 个参数：矩阵和单元格在矩阵中的位置（`m`和`n`）。需要像素的位置来计算需要周围像素值的 LBP（局部二进制模式）。 `customf(matrix, m, n)`返回一个整数`d`，以便`0 < d < 256`，并且我想将 的每个值存储`d`在与我的图像大小相同的矩阵中。

鉴于该集合非常大，我希望我的代码尽可能高效，但我不明白如何使用`cellfun`或`arrayfun`以这种方式使用。

还是更好的解决方案？（使用嵌套`for`可能效率低下？）

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T09:27:50.077

你能用`customf`不同的方式写作吗？与其为每个像素（, ）处理*整个*图像，不如只给它一个计算补丁中心像素的 LBP 所需的*局部补丁？*`m``n`

 *例如，如果`customf`需要查看`k`远离`m`,的像素 -/+ 来计算 ,处`n`的响应，那么您可能有`d``m``n`

```
k = 5;
localF = @( patch ) customf( patch, k+1, k+1 ); % assuming patch is of size (2k+1)x(2k+1)
% apply LBP to an image
D = nlfilter( image, [2*k+1 2*k+1], localF ); 
```

请注意，[`nlfilter`](http://www.mathworks.com/help/images/ref/nlfilter.html)零填充`image`以便获得`D`与`image`.*

# sql - 如何在sql server中获取列的运行总和

> ID：14953294
> 
> 赞同：15
> 
> 时间：2013-02-19T08:50:10.673
> 
> 标签：sql, sql-server, sql-server-2008, select

嗨，我有一个来自表 Bills 的名为 Qty 的列，我想要一个显示 Qty 列的运行总和的列，如下所示：

```
Qty   Run_Sum
1      1
2      3
3      6
4      10
5      15 
```

建议我一些合适的方法来运行一些谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-19T08:57:04.983

如果您的 RDBMS 支持窗口功能，

 ~~为了`SQL Server 2012`

```
SELECT  Qty,
        SUM(Qty) OVER (ORDER BY Qty) AS CumulativeTOTAL
FROM    tableName 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!6/6bca9/2)

 ~~为了`SQL Server 2008`

```
SELECT a.Qty, (SELECT SUM(b.Qty)
               FROM   TableName b
               WHERE  b.Qty <= a.Qty)
FROM   TableName a
ORDER  BY a.Qty; 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!3/6bca9/2)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-02-19T09:04:34.033

[SQLFiddle 演示](http://sqlfiddle.com/#!6/bafd76/1)

```
SELECT Qty,
SUM(Qty) OVER (ORDER BY Qty) Run_Sum
FROM t ORDER BY Qty 
```

对于 2012 之前的 SQLServer：

```
select Qty,
(select sum(Qty) from t where Qty<=t1.Qty)
from t t1 order by Qty 
```

[SQLFiddle 演示](http://sqlfiddle.com/#!6/bafd76/2)

或者你也可以在没有子查询的情况下做到这一点：

```
select t1.Qty, sum(t2.Qty)
from t t1 
join t t2 on (t1.Qty>=t2.Qty)
group by t1.Qty
order by t1.Qty 
```

[SQLFiddle 演示](http://sqlfiddle.com/#!6/bafd76/6)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T08:58:50.510

这是一个使用 Oracle/分析函数的示例：

```
select id, qty, sum(qty) over(order by id asc) run_sum
from test; 
```

[http://www.sqlfiddle.com/#!4/3d149/1](http://www.sqlfiddle.com/#!4/3d149/1)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-29T13:35:50.400

@mahmud：看看这会带来什么

```
DECLARE @Bills table
(
    QUANTITY int
)

INSERT INTO @Bills
SELECT 2 UNION ALL
SELECT 6 UNION ALL
SELECT 7 UNION ALL
SELECT 1 UNION ALL
SELECT 3 UNION ALL
SELECT -5 UNION ALL
SELECT 5 UNION ALL
select 1

;with cte as (
  select top 1 QUANTITY, QUANTITY as RunningSum
  from @Bills
  order by QUANTITY

  union all

  select t.QUANTITY, cte.RunningSum + t.QUANTITY
  from cte
  inner join @Bills t on cte.QUANTITY + 1 = t.QUANTITY
)
select * from cte 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-19T09:12:57.677

检查这个

```
DECLARE @TEMP table
(
    ID int IDENTITY(1,1),
    QUANTITY int
)

INSERT INTO @TEMP
SELECT 1 UNION ALL
SELECT 2 UNION ALL
SELECT 3 UNION ALL
SELECT 4 UNION ALL
SELECT 8 UNION ALL
SELECT 7 UNION ALL
SELECT 5 UNION ALL
SELECT 1

SELECT t.QUANTITY AS Qty, SUM(t1.QUANTITY) AS Run_Sum
FROM @TEMP t
INNER JOIN @TEMP t1
ON t1.ID <= t.ID
GROUP BY t.ID, t.QUANTITY
ORDER BY t.ID 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-19T09:37:03.213

```
;with cte as (
  select top 1 Qty, Qty as RunningSum
  from Bills
  order by Qty

  union all

  select t.Qty, cte.RunningSum + t.Qty
  from cte
  inner join Bills t on cte.Qty + 1 = t.Qty
)
select * from cte 
```~~~~

# java - org.quartz.jobStore.clusterCheckinInterval 的推荐值

> ID：14953297
> 
> 赞同：14
> 
> 时间：2013-02-19T08:50:12.743
> 
> 标签：java, spring, quartz-scheduler

我们在集群环境中使用石英调度器（集群中有两个节点，指向一个 Oracle 数据库）。目前我们有**两个工作**，几乎每隔一小时运行一次。

我们为石英作业提供了一个单独的数据库模式。我们注意到的是，quartz 每 15 秒检查一次数据库（**clusterCheckinInterval**的默认值）。

我们不喜欢这样，喜欢减少它的频率。我们想到的是给出 1 分钟的频率，但大多数示例配置都将**clusterCheckinInterval**设为**20000**。

有人可以为 clusterCheckinInterval 推荐一个合适的值吗？

**来自石英文档：**

```
org.quartz.jobStore.clusterCheckinInterval

Set the frequency (in milliseconds) at which this instance "checks-in"* with the other instances of the cluster. Affects the quickness of detecting failed instances. 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-02-19T09:07:47.667

在 Quartz 集群中，它`clusterCheckinInterval`告诉您集群对故障转移的响应程度（考虑 Quartz 作业）。间隔越小，您的应用程序响应速度就越快。实际上，集群节点使用此值来检查是否有可恢复的作业在损坏的节点上运行。如果是，Quartz 会尝试重新运行它们。

一般来说，默认值就足够了，但您必须考虑作业的频率以及错过作业运行可能导致的影响。

如果您有许多*必须*每秒运行的作业，那么您必须将间隔设置为`1000`（以毫秒为单位）。

如果您有每秒运行的作业，但始终运行它们并不重要，那么 5-15 秒就足够了（取决于系统的容错能力）。

如果您有每天运行几次的长达一小时的作业，您甚至可以将间隔提高到 60 秒。

我的观点是，**我不会将每分钟 20-30 个数据库请求视为“负载”**，因此我会将其设置为 2 或 3 秒（`2000`或`3000`毫秒）。

# vba - 运行时错误“13”：在我的 VBA excel 代码中

> ID：14953304
> 
> 赞同：1
> 
> 时间：2013-02-19T08:50:48.537
> 
> 标签：vba, excel

我正在编写一个脚本，它将计算几个单独日期之间的天数。我在单元格中有一个数据，例如：

> 1-进行中#02-分配给团队#22/01/2013 14:54:23,4-等待中#02-分配给团队#18/01/2013 16:02:03,1-进行中#02 -分配给团队#18/01/2013 16:02:03

这是关于我的交易状态的信息。我想计算此交易处于“4-On Hold”的天数。所以在这个例子中，它将在 2013 年 1 月 18 日到 2013 年 1 月 22 日之间。

我写了这样的东西（对不起，文本中的母语单词）

```
Sub Aktywnywiersz()
    Dim wiersz, i, licz As Integer
    Dim tekstwsadowy As String
    Dim koniectekstu As String
    Dim pozostalytekst As String
    Dim dataztekstu As Date
    Dim status4jest As Boolean
    Dim status4byl As Boolean
    Dim datarozpoczecia4 As Date
    Dim datazakonczenia4 As Date
    Dim dniw4 As Long

    wiersz = 2 'I start my scrypt from second row of excel

    Do Until IsEmpty(Cells(wiersz, "A")) 'this should work until there is any text in a row

        status4jest = False 'is status 4-On Hold is now in a Loop
        status4byl = False 'is status 4-On Hold was in las loop
        dniw4 = 0 ' numbers od days in 4-On Hold status
        tekstwsadowy = Cells(wiersz, "H").Value2 'grabing text
        tekstwsadowy = dodanieprzecinka(tekstwsadowy) 'in some examples I had to add a coma at the end of text

        For i = 1 To Len(tekstwsadowy)
          If Right(Left(tekstwsadowy, i), 1) = "," Then licz = licz + 1  'count the number of comas in text that separates the changes in status
        Next

        For j = 1 To licz

            koniectekstu = funkcjaliczeniadni(tekstwsadowy) 'take last record after coma
            Cells(wiersz, "k") = koniectekstu

            dataztekstu = funkcjadataztekstu(koniectekstu) 'take the date from this record
            Cells(wiersz, "m") = dataztekstu

            status4jest = funkcjaokreslenia4(koniectekstu) 'check if there is 4-On Hold in record
            Cells(wiersz, "n") = status4jest

            If (status4byl = False And staus4jest = True) Then

                datarozpoczecia4 = dataztekstu
                status4byl = True

            ElseIf (status4byl = True And staus4jest = False) Then
                datazakonczenia4 = dataztekstu
                status4byl = False  'if elseif funkcion to check information about 4-On Hold
                dniw4 = funkcjaobliczeniadniw4(dniw4, datazakonczenia4, datarozpoczecia4) 'count days in 4-On Hold

            Else
                  'Else not needed...
            End If

            tekstwsadowy = resztatekstu(tekstwsadowy, koniectekstu) 'remove last record from main text

        Next

        Cells(wiersz, "L") = dniw4 ' show number of days in 4-On Hold status

        wiersz = wiersz + 1
    Loop
End Sub

Function funkcjaliczeniadni(tekstwsadowy As String)

    Dim a, dl As Integer
    dl = Len(tekstwsadowy)

    a = 0

On Error GoTo errhandler:

    Do Until a > dl
        a = Application.WorksheetFunction.Find(",", tekstwsadowy, a + 1)
    Loop

    funkcjaliczeniadni = tekstwsadowy
    Exit Function
errhandler:
    funkcjaliczeniadni = Right(tekstwsadowy, dl - a)

End Function

Function dodanieprzecinka(tekstwsadowy As String)

    If Right(tekstwsadowy, 1) = "," Then
        dodanieprzecinka = Left(tekstwsadowy, Len(tekstwsadowy) - 1)
    Else
        dodanieprzecinka = tekstwsadowy
    End If

End Function

Function resztatekstu(tekstwsadowy, koniectekstu As String)

    resztatekstu = Left(tekstwsadowy, Len(tekstwsadowy) - Len(koniectekstu))

End Function

Function funkcjadataztekstu(koniectekstu As String)

    funkcjadataztekstu = Right(koniectekstu, 19)
    funkcjadataztekstu = Left(funkcjadataztekstu, 10)

End Function

Function funkcjaobliczeniadniw4(dniw4 As Long, datazakonczenia4 As Date, datarozpoczecia4 As Date)

    Dim liczbadni As Integer

    liczbadni = DateDiff(d, datarozpoczecia4, datazakonczenia4)
    funkcjaobliczaniadniw4 = dniw4 + liczbadni

End Function

Function funkcjaokreslenia4(koniectekstu As String)

    Dim pierwszyznak As String

    pierwszyznak = "4"

    If pierszyznak Like Left(koniectekstu, 1) Then
        funkcjaokreslenia4 = True
    Else
        funkcjaokreslenia4 = False
    End If

End Function 
```

现在我得到

> 运行时错误“13”

在

```
dataztekstu = funkcjadataztekstu(koniectekstu) 'take the date from this record 
```

如果有任何帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T09:09:24.623

由于类型不匹配，您会收到该错误。`dataztekstu`被声明为日期，并且函数返回的表达式很可能`funkcjadataztekstu`不是日期。您必须逐步完成它才能找到您获得的回报。

这是一个复制该问题的简单示例

这会给你那个错误

```
Option Explicit

Sub Sample()
    Dim dt As String
    Dim D As Date

    dt = "Blah Blah"

    D = getdate(dt)

    Debug.Print D
End Sub

Function getdate(dd As String)
    getdate = dd
End Function 
```

这不会

```
Option Explicit

Sub Sample()
    Dim dt As String
    Dim D As Date

    dt = "12/12/2014"

    D = getdate(dt)

    Debug.Print D
End Sub

Function getdate(dd As String)
    getdate = dd
End Function 
```

如果您将功能更改为此

```
Function funkcjadataztekstu(koniectekstu As String)
    Dim temp As String

    temp = Right(koniectekstu, 19)
    temp = Left(temp, 10)

    MsgBox temp '<~~ This will tell you if you are getting a valid date in return

    funkcjadataztekstu = temp
End Function 
```

然后你可以看到那个函数返回了什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T09:22:11.733

我尝试运行您的代码，但有点难以理解您想要做什么。其中一部分是您的语言中的代码，但由于缺少缩进等，代码也很难阅读：)

另外，我不明白工作表中的数据看起来如何。不过，我确实通过猜测让它运行了，当我这样做时，我遇到了与您在第二次运行 For 循环时描述的相同的错误 - 那是因为`koniectekstu`字符串为空。不确定这是否是您的问题，所以我的解决方案非常笼统。

为了解决这类问题：

1.  `Option Explicit`在代码模块的顶部使用。这将使您必须声明模块中使用的*所有*变量，并且您将在运行代码之前消除许多问题。例如，您正在声明一个变量`status4jest`，但使用了另一个名为的变量`staus4jest`，Excel 不会抱怨，除非您使用`Option Explicit`.

2.  为您的函数声明返回类型。

3.  格式化您的代码，使其更易于阅读。在语句前后使用空格。评论一切！你已经做了一些，但要确保初学者能够理解。我将编辑您的代码作为缩进的示例。

4.  **调试**！`F8`使用并确保所有变量都包含您认为它们的作用来逐步检查您的代码。您很可能会通过这种方式调试代码来解决您的问题。

5.  在此处就您遇到的特定问题或如何解决特定问题寻求帮助，不要发送所有代码并询问它为什么不起作用。如果你把你的问题分解成几个部分，分别问，你自己学习VBA会快很多。

6.  关于您的代码的特定提示：查找`Split`函数。它可以接受一个字符串并根据分隔符创建一个数组 - 示例：`Split(tekstwsadowy, ",")`将为您提供一个字符串数组，其中包含逗号之间的文本。

7.  我提到了`Option Explicit`吗？;)

无论如何，我希望这会有所帮助，即使我没有解决您遇到的确切错误。

# javascript - 将值设置为隐藏字段

> ID：14953305
> 
> 赞同：0
> 
> 时间：2013-02-19T08:50:51.370
> 
> 标签：javascript, html, ajax

[我有一个从教程](http://www.codeforest.net/simple-search-with-php-jquery-and-mysql)中收集的即时搜索程序 。我修改了一些代码行。这是文件：

```
<!DOCTYPE html>
<html>
<head>
    <title></title>
    <link href="styles.css" rel="stylesheet" type="text/css" />
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
    <script type="text/javascript">
        $(function() {
            $(".search_button").click(function() {
                // getting the value that user typed
                var searchString    = $("#search_box").val();
                // forming the queryString
                var data            = 'search='+ searchString;

                // if searchString is not empty
                if(searchString) {
                    // ajax call
                    $.ajax({
                        type: "POST",
                        url: "instant_search.php",
                        data: data,
                        beforeSend: function(html) { // this happens before actual call
                            $(".results").html('');
                            //$("#uname").value('');
                            //$("#searchresults").show();
                            $(".word").html(searchString);
                        },
                        success: function(html){ // this happens after we get results
                            $(".results").show();
                            $(".results").append(html);
                            $('#uname').value(html);
                            //document.getElementById('uname').value(html);
                            //$("#uname").value(html);
                        }
                    });
                }
                return false;
            });
        });
    </script>
</head>
<body>
<?php echo '<center>';?>

    <div class="header_box"><?php echo $f->SYSTEM_NAME; ?></div>

<?php
if($acc_type == 'admin'){ ?>
    <h1>Create new admin account</h1>
    <table>
        <tr>
            <td>Username</td>
            <td>:</td>
            <td><input type="text" name="id" size="20" class="text_box"/></td>
            <td><input type="button" value="Check"></td>
        </tr>
    </table>

    <?php
}else if($acc_type == 'student'){ ?>
    <h1>.:: Create student's account ::.</h1>
    <label style="font-size: 18px"><label style="color: red">*</label> Marked fields are must</label><br/><br/>
<!--    <form action="" method="post">-->
    <table border="0">
        <tr class="unimportant_text">
            <td>Test Username</td>
            <td>:</td>
            <td>
                <form method="post" action="instant_search.php">
                    <input type="text" name="search" id="search_box" class="unimportant_text"/>
                    <input type="submit" class="search_button" value="Check" style="background: #808080; color: white; border: none"/><br />
                </form>
            </td>
        </tr>
        <tr>
            <td>Username<label style="color: red">*</label></td>
            <td>:</td>
            <td>
                <label class="results" style="font-size: 20px; color: green; font-weight: bold"></label>
                <input type="hidden" name="uname" id="uname"/>
            </td>
        </tr>
        <tr>
            <td>Full Name<label style="color: red">*</label></td>
            <td>:</td>
            <td><input type="text" name="name" class="text_box"/></td>
        </tr>
        <tr>
            <td>Contact<label style="color: red">*</label></td>
            <td>:</td>
            <td><input type="text" name="name" class="text_box" /></td>
        </tr>
        <tr>
            <td>Contact (Optional)</td>
            <td>:</td>
            <td><input type="text" name="name" class="text_box" /></td>
        </tr>
        <tr>
            <td>Email</td>
            <td>:</td>
            <td><input type="text" name="name" class="text_box" /></td>
        </tr>
        <tr>
            <td>Course<label style="color: red">*</label></td>
            <td>:</td>
            <td>
                <select name="course">
                    <?php
                    $courses = $f->get_courses();
                    foreach($courses as $c){ ?>
                        <option value="<?php echo $c[1];?>"><?php echo $c[1];?></option>
                    <?php
                    }
                    ?>

                </select>
            </td>
        </tr>
        <tr>
            <td>Address</td>
            <td>:</td>
            <td><input type="text" name="name" class="text_box" /></td>
        </tr>
    </table>
        <input type="submit" value="Submit">
<!--    </form>-->
    <?php
}
?>
<?php echo '</center>';?>
</body>
</html> 
```

这是我的 Instant_search.php：

```
if (isset($_POST['search'])) {
$word = mysql_real_escape_string($_POST['search']);
$res = $f->select_name($word);
if(mysql_num_rows($res) > 0) {
    //echo 'Not available, choose another one';
} else {
    echo $word;
}
} 
```

我想要的很简单。

1.  我只想检查`$word`数据库中是否可用。如果没有，则将其设置为隐藏字段（uname）的值。然后将表单提交到另一个 php 文件并创建帐户。

2.  这里使用了两种形式，这也产生了问题。

请帮我完成这项工作。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T08:59:05.297

您需要从 PHP 返回特定代码并在 AJAX 调用的成功回调中对其进行测试。

即时搜索：

```
if (isset($_POST['search'])) {
    $word = mysql_real_escape_string($_POST['search']);
    $res = $f - > select_name($word);
    if (mysql_num_rows($res) > 0) {
        //The word is not in DB, then specify error in front of it
        echo '[error]'.$word;
    } else {
        echo $word;
    }
} 
```

在您的成功回调中：

```
success: function (html) { // this happens after we get results
    if(html.search('[error]') >= 0)
    {
       //Error : set your input field with returned text
       $('#uname').val(html.split('[error]')[1]);

       //Call your second form here           
    }
    else
    {
        //No error
        $(".results").show();
        $(".results").append(html);
    }
} 
```

# c# - 查询后如何判断缺少哪些 SQL 条目？

> ID：14953307
> 
> 赞同：1
> 
> 时间：2013-02-19T08:50:55.507
> 
> 标签：c#, sql-server, linq, entity-framework

给定以下数据库结构并使用 EntityFramework。

![在此处输入图像描述](../Images/c25e403c140f6043ce556bef40512fe5.png)

每五分钟，“phasecount”表获取“Phase”中每条记录的记录。

```
using (Entities db = new Entities())
{
    db.ContextOptions.LazyLoadingEnabled = false;

    int numberofcontrollers = (from a in db.Junctions select a).Count();
    List<int> controllerids = (from b in db.Junctions select b.Id).ToList();

    var configuration = (from c in db.Configurations select c).First();

    DateTime laststamp = (from s in db.Stamps select s.Time).Max();
    DateTime firststamp = laststamp.AddMinutes(-1 * (CountIntervalsBefore - 1) * TimeSliceLength);

    var stamps = from s in db.Stamps.Include("PhaseCounts.Phase") where s.Time >= firststamp && s.Time <= laststamp orderby s.Id select s;
    // check consistency; number of stamps should equal timeslices*controllers

    if (stamps.Count() != CountIntervalsBefore * numberofcontrollers)
    {
         //counts are not available for all timeslices and controllers
         //do extended consistency check (and use dummy data?)
    }
} 
```

我想为所有阶段选择每个阶段的一小时。

邮票通常等于 72，即 12 个 5 分钟切片 * 6 个路口。

如果不等于 72，如何确定哪些阶段和哪些时间戳有缺失数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T09:10:54.250

我对解决方案的第一个想法；这可能不是最佳搜索方法，但应该可以。

取组中最早的时间戳，并检查您是否确实具有具有该时间戳的正确数量的记录（根据您所说，我相信这是 6）。从中您可以判断此集合中是否缺少任何内容。然后寻找最接近当前时间戳的时间戳。如果它明显超过大约五分钟，则您缺少一整套。如果大约是五分钟，请检查您是否拥有正确数量的带有该时间戳的记录，就像第一组一样。重复直到（丢失的记录总数 + 找到的记录总数 = 72）或记录用完。如果你到了记录的末尾，仍然有一些缺失，那么最早的时间戳不是第一个，而且你也有一个完整的集合缺失。在此刻，

# c - c - 合并两个文本文件

> ID：14953310
> 
> 赞同：1
> 
> 时间：2013-02-19T08:51:08.657
> 
> 标签：c, winapi, file-io

假设我有 2 个文本文件：

**一个.txt：**

```
Param1: Value1
Param2: Value2
      .
      .
      .
      .
ParamM: ValueM 
```

**B.txt**

```
Param1: Value1
Param2: Value2
      .
      .
      .
      .
ParamN: ValueN 
```

*   **A.txt**中的参数个数，即**M**可以大于、小于或等于**B.txt**中的参数个数，即**N**。
*   **A.txt**和**B.txt**中相同参数的值不必相同。
*   **M**和**N**大概可以达到最大值200。
*   参数名称是任意的。他们没有数字。以上只是为了说明。

我的目标是合并**A.txt**和**B.txt**。如果发生任何冲突，我有一个文件/内存存储，它指示哪个优先。

例如，

**A.txt**可能如下所示：

```
Path: C:\Program\Files
Data: ImportantInfo.dat
Version: 1.2.3
Useless: UselessParameter.txt 
```

和

**B.txt**可能如下所示：

```
Path: C:\ProgramFiles
Data: NotSoImportant.dat
Version: 1.0.0
Useful: UsefulParameter.txt 
```

最终的文本文件应如下所示：

```
Path: C:\ProgramFiles
Data: ImportantInfo.dat
Version: 1.2.3
Useful: UsefulParameter.txt 
```

现在我思考这个问题的方法是：

```
get a line from A.txt
get a line from B.txt
tokenize both by ":"
compare param names
if same
    write A.txt's value to Result.txt
else if different
    write A.txt's line into Result.txt
    write B.txt's line into Result.txt  /* Order doesn't really matter */
repeat above steps until end of both text files 
```

**当A.txt**有某个参数而**B.txt**没有时，这种方法不会处理。如果存在一些轻量级库/API 来执行此操作，那将非常有帮助。我不是在寻找命令行工具（由于`system()`调用的开销）。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T09:05:40.900

在具有 Map 数据类型的语言中，这会容易得多。我会这样做：

1.  读取所有 B 并将键值字符串存储在内存中

2.  读取 A 并为每个键覆盖值（如果存在）或添加它（如果不存在）

3.  将键值输出到文件

# c# - 根据我的 c# 类生成 xml 文件

> ID：14953311
> 
> 赞同：9
> 
> 时间：2013-02-19T08:51:12.680
> 
> 标签：c#, xml, c#-4.0, xml-serialization

我有 xml 文件，我需要根据新的客户要求每次更新。由于手动更新 xml 文件，大多数时候 xml 不正确。我正在考虑编写一个提供适当验证的程序（web/windows）。并基于来自 ui 的输入，我将创建 xml 文件。下面是我的示例 xml 文件。

```
<community>
  <author>xxx xxx</author>
  <communityid>000</communityid>
  <name>name of the community</name>

<addresses>
        <registeredaddress>
          <addressline1>xxx</addressline1>
          <addressline2>xxx</addressline2>
          <addressline3>xxx</addressline3>
          <city>xxx</city>
          <county>xx</county>
          <postcode>0000-000</postcode>
          <country>xxx</country>
        </registeredaddress>
        <tradingaddress>
          <addressline1>xxx</addressline1>
          <addressline2>xxx</addressline2>
          <addressline3>xxx</addressline3>
          <city>xxx</city>
          <county>xx</county>
          <postcode>0000-000</postcode>
          <country>xxx</country>
        </tradingaddress>
      </addresses>

<community> 
```

谁能帮助我最好的方法是什么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-19T09:16:08.703

创建以下类来保存您的数据并对其进行验证：

```
public class Community
{
    public string Author { get; set; }
    public int CommunityId { get; set; }
    public string Name { get; set; }
    [XmlArray]
    [XmlArrayItem(typeof(RegisteredAddress))]
    [XmlArrayItem(typeof(TradingAddress))]
    public List<Address> Addresses { get; set; }
}

public class Address
{
    private string _postCode;

    public string AddressLine1 { get; set; }
    public string AddressLine2 { get; set; }
    public string AddressLine3 { get; set; }
    public string City { get; set; }
    public string Country { get; set; }

    public string PostCode
    {
        get { return _postCode; }
        set {
            // validate post code e.g. with RegEx
            _postCode = value; 
        }
    }
}

public class RegisteredAddress : Address { }
public class TradingAddress : Address { } 
```

并将社区类的实例序列化为 xml：

```
Community community = new Community {
    Author = "xxx xxx",
    CommunityId = 0,
    Name = "name of community",
    Addresses = new List<Address> {
        new RegisteredAddress {
            AddressLine1 = "xxx",
            AddressLine2 = "xxx",
            AddressLine3 = "xxx",
            City = "xx",
            Country = "xxxx",
            PostCode = "0000-00"
        },
        new TradingAddress {
            AddressLine1 = "zz",
            AddressLine2 = "xxx"
        }
    }
};

XmlSerializer serializer = new XmlSerializer(typeof(Community));
serializer.Serialize(File.Create("file.xml"), community); 
```

我认为一点谷歌搜索将帮助您了解如何从文件中反序列化社区对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-01T05:18:32.743

这是一个老话题，但我想分享一下自己的观点。您上面提供的 xml 无效，所以我以下面的 xml 为例。

1.  首先，按照您希望的方式构建您的 xml。假设它看起来像这样：

    ```
    <note>
          <to>Tove</to>
          <from>Jani</from>
          <heading>Reminder</heading>
          <body>Don't forget me this weekend!</body>
    </note> 
    ```

2.  复制你的xml代码

3.  转到 Visual Studio

4.  创建一个类文件并清除其中的代码

5.  然后在菜单上，单击`Edit\Paste Special\Paste Xml as Classes`

Visual Studio 将生成整个类。

```
Core/Standard 2.0.
/// <remarks/>
[System.SerializableAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
[System.Xml.Serialization.XmlTypeAttribute(AnonymousType = true)]
[System.Xml.Serialization.XmlRootAttribute(Namespace = "", IsNullable = false)]
public partial class note
{

    private string toField;

    private string fromField;

    private string headingField;

    private string bodyField;

    /// <remarks/>
    public string to
    {
        get
        {
            return this.toField;
        }
        set
        {
            this.toField = value;
        }
    }

    /// <remarks/>
    public string from
    {
        get
        {
            return this.fromField;
        }
        set
        {
            this.fromField = value;
        }
    }

    /// <remarks/>
    public string heading
    {
        get
        {
            return this.headingField;
        }
        set
        {
            this.headingField = value;
        }
    }

    /// <remarks/>
    public string body
    {
        get
        {
            return this.bodyField;
        }
        set
        {
            this.bodyField = value;
        }
    }
} 
```

# http-status-code-404 - Sharepoint 2013 - 404 Not Found while accessing site collection from outside

> ID：14953322
> 
> 赞同：5
> 
> 时间：2013-02-19T08:52:00.597
> 
> 标签：http-status-code-404, wiki, sharepoint-2013, sitecollection

This question may be a dublicate, but no recent post leads to a working answer for my case.

I have a Sharepoint 2013 running on a Windows Server 2012\. Following issue appeared:

I made a new Site-Collection as wiki. Everything (links,...) works fine on the server but when I want to access the wiki from outside (not localhost) the server runs in a 404 Not found error.

```
http://localhost/sites/wiki/Pages/Home.aspx - works fine(localhost)

http://10.38.0.15/sites/wiki/Pages/Home.aspx - doesn't work. 
```

I checked the IIS settings, all servers are up and running. The log file has no errors in it.

Does anyone know, how to solve this problem?

thx Jürgen

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-23T01:52:11.513

The most common cause for this is that you don't have the IIS host header configured correctly. The 404 will appear because you are hitting a different IIS web site and not the one you intended to.

If you go into IIS Manager and click on "Sites" in the right hand pane there will be a column called bindings and a column called ID.

IIS will check in the order of ID for the first site that matches. Make sure the default site is stopped. If you see bindings that look like the following:

ID 1: Bindings: *:80
ID 2: Bindings: www.yoursite.com:80

www.othersite.com will match ID 1\. Any other site that doesn't specify a port or https: will be directed to ID 2\. You need to ensure that the site you are trying to access matches your bindings. The "www.yoursite.com" is added to the site via "New Web Application" in SharePoint. There is a field called Host: in Central Administration. This should match what you are typing from inside and outside the server. If you need the site to respond to multiple names, you need to extend the web application.

Assuming you used the default of claims authentication, here are the instructions for that:

[http://technet.microsoft.com/en-us/library/gg276325.aspx](http://technet.microsoft.com/en-us/library/gg276325.aspx)

I am not sure if this is still required in Server 2012, but disabling the loopback check might also help, although this usually results in a 401, and repeated attempts to log in. Here are the instructions for that.

[http://support.microsoft.com/kb/896861](http://support.microsoft.com/kb/896861)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-08T06:28:30.577

Сheck the alternate access mapping in SharePoint administrator. It should be something like this:

```
http://yourservername         default
http://10.10.1.30:80          internet 
http:// so on .. 
```

# javascript - jquery mobile阻止页面渲染

> ID：14953324
> 
> 赞同：0
> 
> 时间：2013-02-19T08:52:04.187
> 
> 标签：javascript, jquery-mobile

我有一个非常简单的 jquery 移动应用程序：

*   `/index.html`（包含指向 的链接`home.html`）
*   `/home.html`

我只想`home.html`对满足先决条件的用户可见（例如本地存储应该包含 a `logged=true`）。否则我希望他们被重定向回`index.html`. 当然，我希望当用户单击链接`index.html`或他/她`home.html`通过 URL 直接导航到时发生这种情况。

为了执行此操作，我在包含在所有页面中的外部脚本中包含以下内容：

```
$(document).on('pagebeforecreate', function(e) {
    if (!userIsLoggedIn() && e.target.id=='home_page') {
        $.mobile.changePage('index.html');
    }
}); 
```

请注意，我的`home.html`开头是`<div home-role="page" id="home_page">`

此代码有效，但问题是用户可以立即看到内容`home.html`。我在[API](http://api.jquerymobile.com/category/events/)中看到这`pagebeforecreate`是在页面转换时调用的最早事件。调用`changePage`虽然不会从进一步的事件停止到在我不希望用户看到的此页面上被调用。

如何完全停止渲染`home.html`并立即将用户重定向回`index.html`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T09:01:35.777

跟随只是添加您的代码的想法。

1.  默认情况下，在“home.html”中使页面不可见。
2.  当“home_page”位于“pagebeforecreate”时检查登录。
3.  如果已记录，则使页面可见。
4.  如果不是，则更改为 index.html

但是，这只是向未登录的人隐藏一个页面，并不是很安全。它仍然可以从 URL 获取 HTML 纯代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-08T16:15:12.693

这将帮助您防止 jquery mobile 呈现页面。

```
jQuery(document).on('mobileinit', function(){ jQuery.mobile.autoInitializePage = false; }); 
```

# replace - 删除所有包含短语“随机”的序列

> ID：14953326
> 
> 赞同：0
> 
> 时间：2013-02-19T08:52:13.570
> 
> 标签：replace, sed, awk, fasta

这就是我的输入的样子：

```
>a
AACTCTCTC
CGTGCTCTC
>b_random
ACTGSTSTS
CTCTCTCCT
ATATATA
>c
AACTCTCTC
CGTGCTCTC
>d
AACTCTCTC
CGTGCTCTC
CGTGCTCTC
>e_random
ACTGSTSTS
CTCTCTCCT
ATATATA
>c_random
ACTGSTSTS
CTCTCTACT
GSTSTSCTC
TCTCCTCCT
ATATATA 
```

我想删除所有包含短语“随机”的序列 - 序列始终以“>”开头，并在另一个序列开始时结束。

在这种情况下，我想获得 3 个文件：

一个.txt

```
>a
AACTCTCTC
CGTGCTCTC 
```

c.txt

```
>c
AACTCTCTC
CGTGCTCTC 
```

d.txt

```
>d
AACTCTCTC
CGTGCTCTC
CGTGCTCTC 
```

现在，我不知何故不能强迫 sed 做我想做的事。我从这个开始：

```
 sed 's/random.*random//g' sample_data 
```

什么不起作用。非常感谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T08:59:00.710

最简单的方法可能是使用 awk 和合理的 RS/ORS 设置：

```
awk '$1 !~ /random/ { print RS $0 > $1 ".txt"; close($1 ".txt" }' RS='>' ORS='' 
```

如果您有包含空格的描述行，您也需要设置`FS='\n'`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T10:33:58.373

这是使用`awk`它应该处理大文件的一种方法：

```
awk '/^>/ { i=substr($0,2) } i ~ /random/ { i="" } i { print > i ".txt" }' file 
```

结果`grep . *.txt`：

```
a.txt:>a
a.txt:AACTCTCTC
a.txt:CGTGCTCTC
c.txt:>c
c.txt:AACTCTCTC
c.txt:CGTGCTCTC
d.txt:>d
d.txt:AACTCTCTC
d.txt:CGTGCTCTC
d.txt:CGTGCTCTC 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T10:36:19.937

```
awk '/\>/ && $0!~/random/{file=substr($0,2)".txt";f=1}{if($0~/random/)f=0;if(f)print>file}' your_file 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-19T14:39:16.347

另一个不使用 RS 的 awk 以避免限制

```
awk -F\> '/>/{close(f); f=/random/?x:$2 ".txt"} f{print>f}' file 
```

此版本还关闭文件并使用变量作为文件名，因为某些 awk 无法处理连接的打印目标。

# javascript - 在 Oauth Like Situation [jQuery| 中收听子窗口关闭事件 Javascript ]

> ID：14953327
> 
> 赞同：5
> 
> 时间：2013-02-19T08:52:16.213
> 
> 标签：javascript, jquery, html, oauth

我正在使用 oAuth 1.0 访问第 3 方数据。

为此，我正在采取以下步骤：-

1.  用户单击“与第 3 方同步”按钮。（用户必须单击，因为这通常不会调用弹出窗口阻止程序。）

2.  当用户单击此按钮时，将执行以下代码：

    ```
     $('#sync_with_thirdparty').click(function(){
           var child = window.open('/oauth');
           $(child).unload(function() {
               if (this.location != "about:blank") {
                alert("Child window closed");
            }
          });
        }); 
    ```

3.  现在在新窗口中，PHP 从第 3 方获取身份验证 URL，然后将用户重定向到相同的 URL。一旦用户重定向到第 3 方，上面的代码就会显示“子窗口已关闭。”。

4.  然后用户让自己登录第三方网站（如有必要）并允许访问我们的应用程序。只要他点击允许按钮，第三方就会将用户重定向到我们网站的新页面。在此页面上，我正在调用 window.close() 方法，该方法运行良好。

5.  但是在子窗口中的 window.close() 上，父窗口无法知道子窗口已关闭。

我该如何解决这个问题？

注意：这 3rd 不喜欢 iframe 并刷新自身以在顶部窗口中打开。我无法控制第 3 方的内容。我们的网页是 HTML5 格式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-02-18T12:23:57.483

子窗口可以通过`window.opener()` [函数](https://developer.mozilla.org/en-US/docs/Web/API/Window/opener)与父窗口通信。你可以这样做：

**子窗口**

```
window.opener.messageFromChildWindow('closed'); 
```

**父窗口**

```
function messageFromChildWindow(msg) {
    if(msg === 'closed') {
        alert('child window closed');
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-11T08:39:29.503

您无法访问子窗口的内容或事件活动，因为它在 Javascript 中存在权限问题。

好吧，如果事情在同一个域上，你应该尝试一次`document.domain`在两个窗口中强制执行相同的操作。

像：

```
var hdomain="yourdomain.com";
if (document.domain != hdomain){
   if ((document.domain.indexOf(hdomain)) != -1){
       document.domain = hdomain
   }
} 
```

把它放在父母和孩子的页面中。

祝你好运。

# multithreading - 循环（迭代）之间的延迟，如 Grinder

> ID：14953340
> 
> 赞同：1
> 
> 时间：2013-02-19T08:53:04.313
> 
> 标签：multithreading, loops, process, jmeter, grinder

在 Grinder 中，我将负载测试参数设置为

```
grinder.threads = 30
grinder.process = 3
grinder.runs = 2
grinder.processIncrementInterval = 45000(ms) 
```

这意味着我有 4 个进程，每个进程有 30 个线程，每个进程以 45 秒的间隔开始并重复 2 次。

我想在 JMeter 中实现同样的目标，但我无法做到。如果我设置`loop count = 2, threads = 30, ramp-up = 45 secs`，则不。线程数乘以该计数和线程数增加。

我希望首先启动 30 个线程（完成与否 - 无关紧要），然后在 45 秒后，接下来的 30 个线程开始并继续。JMeter 中没有进程的概念。所以我不确定如何模拟同样的情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T09:18:04.950

假设您可以尝试使用jmeter [-plugins](http://code.google.com/p/jmeter-plugins/)集中的[Stepping Thread Group](http://code.google.com/p/jmeter-plugins/wiki/SteppingThreadGroup)甚至更好的[Ultimate Thread Group 。](http://code.google.com/p/jmeter-plugins/wiki/UltimateThreadGroup)

好像

> 第一次启动 30 个线程（完成与否 - 无关紧要），45 秒后，接下来的 30 个线程开始并继续

场景可以通过 Ultimate Thread Group 完全设置。

# android - 使用root清除状态栏通知

> ID：14953342
> 
> 赞同：11
> 
> 时间：2013-02-19T08:53:04.820
> 
> 标签：android

我目前正在开发一个使用**辅助功能服务**来处理通知的应用程序。尤其令人讨厌的是**，第三方应用程序**除了启动与通知链接的意图（并启动应用程序）外，无法清除状态栏通知。

我已经搜索了很长时间，以寻找一种**使用 root 来关闭通知**或清除完整列表的方法，但我失败了。

我想我记得我看到的一个应用程序通过快速打开状态栏并以编程方式单击清除按钮来清除状态栏，但我再也找不到它了，我认为它是在 Android 2.2 上。

我想知道是否有一种方法可以使用某种**数据库**或简单的**SU**调用与状态栏通知进行交互。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-01T21:15:06.720

**更新**- 请参阅下面的工作解决方案

所有这些东西都由 NotificationManagerService 处理（见这里：[https](https://github.com/android/platform_frameworks_base/blob/master/services/java/com/android/server/NotificationManagerService.java) ://github.com/android/platform_frameworks_base/blob/master/services/java/com/android/server/NotificationManagerService.java ）。我认为您尤其会对 void cancelAll(int userId) 方法感兴趣。当您在状态屏幕上按 clear 时，这就是实际调用的方法（使用 ActivityManager.getCurrentUser() 作为参数）。

您可以尝试通过反射调用 NotificationManager.getService 来获取它的实例（请参阅 NotificationManager [http://androidxref.com/4.2.2_r1/xref/frameworks/base/core/java/android/app中隐藏的 getService() 方法/NotificationManager.java](http://androidxref.com/4.2.2_r1/xref/frameworks/base/core/java/android/app/NotificationManager.java)）然后尝试以某种方式在返回的服务上调用 cancelAll（例如再次通过反射）。

**更新**

我找到了一种通过状态栏服务清除通知的更简单方法。以下代码应该可以工作：

```
IBinder b = (IBinder) Class.forName("android.os.ServiceManager").getMethod("getService", new Class[] {
    String.class
}).invoke(null, new Object[] {
    "statusbar"
});

Object iFace = Class.forName("com.android.internal.statusbar.IStatusBarService$Stub").getDeclaredMethod("asInterface", new Class[] {
    IBinder.class
}).invoke(null, new Object[] {
    b
});

iFace.getClass().getMethod("onClearAllNotifications", new Class[0]).invoke(iFace, (Object[]) null); 
```

如果您不是以 root 身份运行，但如果您具有 root 权限，则会成功清除通知，这将引发 SecurityException

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-01-27T06:45:59.900

您可以通过调用清除所有通知

```
service call notification 1 
```

在具有 root 权限的 shell 中

# java - 在java中使用正则表达式替换

> ID：14953345
> 
> 赞同：-3
> 
> 时间：2013-02-19T08:53:16.557
> 
> 标签：java, regex, string, replaceall

假设我有一个字符串

```
 String = ".... helllo.... good \"morning\" .....\" " 
```

我想得到输出

```
 helllo good morning 
```

如何在 Java 中使用正则表达式来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T08:55:42.163

如果您只是想删除`.`and `"`，那么您可以这样做

```
 str = str.replaceAll("\"|\\.", ""); 
```

此正则表达式将 any `"`（转义为`\"`因为在 java 字符串文字中）或 ( `|`) `.`（首先转义为`\.`因为在正则表达式中，然后`\\.`因为 a`\`必须在 java 字符串文字中转义）替换为空（`""`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T08:56:45.357

假设您只想***保留***空格字符和字母，您可以使用以下正则表达式：

```
[^a-zA-Z\s]+ 
```

如果您还想包含数字：

```
[^a-zA-Z0-9\s]+ 
```

只需用空字符串替换该正则表达式的匹配项。

**编辑：**

如果您只想做相反的事情（***删除***某些字符，例如`.`and `"`），那么您可以检查`@dystroy`答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T09:05:43.440

```
public static void main(String[] args) {
    String str = ".... helllo.... good \"morning\" .....\" ";
    str = str.replaceAll("[^a-zA-Z]", " ").replaceAll("  +", " ");

    System.out.println(str);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T09:03:27.263

这个

```
String yourString = ".... helllo.... good \"morning\" .....\" ";
System.out.println(yourString.replaceAll("[.\\\"]", "")); 
```

输出`helllo good morning`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-19T09:10:12.010

有很多方法可以做到这一点。

这是一种使用 String 类的简单替换方法的方法。

```
 String s = ".... helllo.... good \"morning\" .....\" ";
    s = s.replace(".","").replace("\"", "");
    System.out.println(s); 
```

# ios - iOS 中自动调整大小的问题

> ID：14953346
> 
> 赞同：0
> 
> 时间：2013-02-19T08:53:22.657
> 
> 标签：ios, xcode, autoresize

我有一个带有如下图像的 xib 文件：

当我运行它时，它似乎缩小到这个：

宽度：320 高度：370 是我给出的值。上面有一个导航栏，下面有一个标签栏。

图像应该正常显示吗？它似乎已调整大小..不知道为什么...

如何避免缩水？

需要一些指导..谢谢...

**编辑1 **

非常抱歉.. 我正在使用 iPhone（Retina 3.5 英寸）。这就是为什么它出现在中间。我如何确保它保持在 iphone（Retina 4 英寸）、iPhone（Retina 3.5 英寸）和 iPhone 的底部？

**编辑2 **

在 iphone 5 中，它看起来像这样：

如何避免这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T08:58:00.403

请在 xib 文件中将底栏添加为标签栏... ![将底栏放在xib文件上](../Images/5b60116106ae764639dbfe5fc6e6b2f3.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T09:47:06.510

打开您的 xib 并选择您的视图，然后取消选中文件检查器中的“使用自动布局”属性（Option+Command+1）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T10:59:24.163

在 xib 编辑器中选择图像并将模式设置为“顶部”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T11:04:03.220

如果您希望它们始终处于底部，则需要将视图和图像视图的自动调整掩码设置为 UIViewAutoresizingFlexibleTopMargin。

并且您需要删除 UIViewAutoresizingFlexibleHeight。

您可以使用代码或在 interfacebuilder 中执行此操作。

# servlets - Websphere 8.5 Liberty Profile - Servlet API setLocale

> ID：14953347
> 
> 赞同：3
> 
> 时间：2013-02-19T08:53:22.560
> 
> 标签：servlets, http-headers, websphere, locale, websphere-liberty

我在使用带有 Fixpack 1 的 Websphere 8.5 Liberty Profile 时遇到了以下似乎违反 Servlet API 的问题。

如果响应正文正在写入响应输出流 (HttpServletResponse#getOutputStream())，则在 response.setLocale() 之后未设置 Content-Language 响应标头。如果正文写在响应编写器上，它工作正常（HttpServletResponse#getWriter()）

以下 JSP 不返回 Content-Language 响应标头：

```
<%@ page contentType="text/plain;charset=ISO-8859-1" session="false" import="java.util.*" %><% 
response.setLocale(Locale.ITALY); 

java.io.OutputStream os = response.getOutputStream();
try {
  os.write("Hello World".getBytes("ISO-8859-1"));
} finally {
  os.close();
}
%> 
```

请注意，JSP 不得包含 <% ... %> 之外的任何字符，甚至不能在文件末尾包含尾随换行符。我在这里使用 JSP 只是为了重现该案例 - 当然，作家将是正常的方式。我们在 Java 代码内部使用了#getOutputStream。

我的假设是否正确，这种行为违反了 Servlet 规范？如果是这样，向 IBM 报告这些错误的最佳方式是什么？

我发现了一个与 Content-Language 响应标头稍微相关的错误报告，该错误报告仅针对 Liberty Profile 报告（并且已在 FP1 中修复）：[http://www-01.ibm.com/support/docview。 wss?rs=180&uid=swg1PM67523](http://www-01.ibm.com/support/docview.wss?rs=180&uid=swg1PM67523)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T15:09:48.937

我建议使用WASdev 社区上的[此页面向 IBM 报告错误。](https://www.ibm.com/developerworks/mydeveloperworks/blogs/wasdev/entry/participate_report_an_eap_bug?lang=en)如果您不熟悉 WASdev 社区，那么它也是了解更多关于 Liberty 配置文件的好地方，它有一些很棒的教程。

# asp.net - 如何确保用户刚刚登录？

> ID：14953348
> 
> 赞同：-1
> 
> 时间：2013-02-19T08:53:29.350
> 
> 标签：asp.net, asp.net-3.5

我有一个 Web 控制面板，其中包含指向敏感信息（如信用卡号）的链接。当用户单击（之前登录过）这些链接之一时，我需要检查他的凭据。

当他请求（“/sensitive-informations.aspx”）他刚刚输入了他的凭据时，我如何确保在服务器端？

编辑：这里的主要问题是“他刚刚输入了他的凭据”，我需要确保他直接来自登录页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T08:57:44.683

有几种方法可以做到这一点。例如，在用户输入他的凭据后，将它们保存在[Session 对象](http://msdn.microsoft.com/en-us/library/ms178581%28v=vs.100%29.aspx)中。

然后，在`Page_Load`sensitive *-informations.aspx*中确保Session 对象存在。

为了更好地说明这一点：

在您的 login.aspx.cs 页面中：

```
protected btnLoginClick(...)
{
   // CHECK USERNAME and PASSWORD
   if (UserIsAuthenticated)
   {
      Session["UserName"] = user;
   }
} 
```

然后在你的sensitive-informations.aspx.cs

```
protected page_load(...)
{
    // If UserName doesn't exist in Session, don't allow access to page
    if (Session["UserName"] == null)
    {
       Response.Redirect("INVALID_USER.aspx");
    }

} 
```

**编辑：**

根据 OPs 的评论，如果你想知道你来自 *哪个页面，你可以使用：* [**Page.PreviousPage**](http://msdn.microsoft.com/en-us/library/system.web.ui.page.previouspage.aspx)像这样：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        var x = this.Page.PreviousPage; 
```

或者像这样使用[**Request.UrlReferrer**](http://msdn.microsoft.com/en-us/library/system.web.httprequest.urlreferrer.aspx)：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        var x = Request.UrlReferrer; 
```

在这两种情况下，首先确保`x`不为空......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T10:10:22.517

您可以`UrlReferrer`在以下情况`Page_Load`下检查`sensitive-informations.aspx`：

```
if (Request.UrlReferrer != null)
{
     if (Request.UrlReferrer.AbsolutePath.ToLower().Contains("you-login-page"))
     {
        //User came from the login page
     }
} 
```

**更新** 根据您的评论，您应该检查[MembershipUser 类](http://msdn.microsoft.com/en-us/library/za59c2aa.aspx)`LastLoginDate`的属性

这将为您提供当前用户的最后登录日期。您可以将其与当前日期/时间进行比较，以确保用户“刚刚输入了他们的凭据”。将此与检查用户来自哪里（使用`Request.UrlReferrer`或`Page.PreviousPage`）结合起来。

# javascript - 如何使用 asm.js 进行测试和开发？

> ID：14953351
> 
> 赞同：7
> 
> 时间：2013-02-19T08:53:37.570
> 
> 标签：javascript, asm.js

最近我阅读`asm.js`了规范，它看起来很酷，但是是否有任何环境/工具来开发和测试这个工具？那还只是规范阶段吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-19T16:58:03.927

您可以通过使用带有 ASM_JS=1 的 emscripten 并从侧分支在 firefox 构建中运行它来尝试它。这些幻灯片中包含有关 asm.js 的链接和更多说明， http: [//kripken.github.com/mloc_emscripten_talk/#/](http://kripken.github.com/mloc_emscripten_talk/#/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-23T22:18:22.670

使用编译器的“-s”命令行选项，如下所示：

```
./emcc -O1 -s ASM_JS=1 tests/hello_world.c 
```

# hibernate - 如何限制休眠以扩展列或为集合元素创建新表

> ID：14953355
> 
> 赞同：1
> 
> 时间：2013-02-19T08:54:00.637
> 
> 标签：hibernate, hibernate-mapping

我`employee_project`在我的数据库上调用了表，该表已经由以下列创建`EMPLOYEE_NUMBER,PROJECT_CODE,START_DATE,END_DATE,PROJECT_ROLE`。`employee and project`我使用的 for之间存在一对多关系

`private Set<EmployeeProject> employeeProjects = new HashSet<EmployeeProject>();`

由于这个集合，在 Employee pojo 类中，一些列在我的employee_project 表中扩展，它们是 `employeeProject_PROJECT_CODE,employeeProject_EMPLOYEE_NUMBER`. 有什么方法可以限制休眠不扩展列，因为表已经制作好了？项目表中的另一件事是复合 id 命名`EMPLOYEE_NUMBER.PROJECT_CODE`。还有一个问题是为什么 hibernate 为集合元素创建额外的表或扩展现有表中的列？

员工.hbm.xml

```
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE hibernate-mapping PUBLIC 
 "-//Hibernate/Hibernate Mapping DTD//EN"
 "http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd">

<hibernate-mapping package="com.nousinfo.tutorial.model">
    <class name="Employee" table="employee">
        <meta attribute="class-description">
            This class contains the employee detail
        </meta>
        <id name="employeeNumber" type="int" column="EMPLOYEE_NUMBER">

        </id>
        <property name="firstName" type="string" column="FIRST_NAME"></property>
        <property name="lastName" type="string" column="LAST_NAME"></property>
        <property name="title" type="string" column="TITLE"></property>
        <property name="departmentId" type="string" column="DEPARTMENT_ID"></property>
        <set name="employeeProjects" cascade="delete" 
            inverse="false">
            <key column="EMPLOYEE_NUMBER" />
            <one-to-many class="com.nousinfo.tutorial.model.EmployeeProject" />
        </set>
        <property name="address1" type="string" column="ADDRESS_1"></property>

    </class>

</hibernate-mapping> 
```

项目.hbm.xml

```
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE hibernate-mapping PUBLIC 
 "-//Hibernate/Hibernate Mapping DTD//EN"
 "http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd">

<hibernate-mapping package="com.nousinfo.tutorial.model">
    <class name="EmployeeProject" table="employee_project">
        <meta attribute="class-description">
            This class contains the employee detail
        </meta>
        <composite-id>
            <key-property name="employeeNumber" type="int"
                column="EMPLOYEE_NUMBER"></key-property>
            <key-property name="projectCode" type="string" column="PROJECT_CODE"></key-property>
        </composite-id>
        <property name="startDate" type="date" column="START_DATE"></property>
        <property name="endDate" type="date" column="END_DATE"></property>
        <property name="role" type="string" column="PROJECT_ROLE"></property>
        <many-to-one name="employee" column="EMPLOYEE_NUMBER" class="com.nousinfo.tutorial.model.Employee" not-null="true" insert="false" update="false" ></many-to-one>
    </class>
</hibernate-mapping 
```

# java - Quartz-scheduler 数据库锁异常

> ID：14953356
> 
> 赞同：9
> 
> 时间：2013-02-19T08:54:02.193
> 
> 标签：java, quartz-scheduler, spring-roo

我们有一个应用程序使用 Quartz 来安排一些工作。它使用 JDBCJobstore 来持久化与作业相关的元数据。

迄今为止，它一直在使用在quartz.properties 中定义的数据源。但根据即将到来的要求，我们计划从quartz.properties 中移出数据源，并将其作为SchedulerFactoryBean 数据源属性的一部分提供。

```
 org.springframework.scheduling.quartz.SchedulerFactoryBean 
```

根据 SchedulerFactoryBean[文档](http://static.springsource.org/spring/docs/3.0.3.RELEASE/api/org/springframework/scheduling/quartz/SchedulerFactoryBean.html)：

> 使用持久作业时，强烈建议在 Spring 管理（或纯 JTA）事务中对调度程序执行所有操作。否则，数据库锁定将无法正常工作，甚至可能中断

它的数据源属性文档说：

> 因此强烈建议在 Spring 管理的（或纯 JTA）事务中对调度程序执行所有操作。否则，数据库锁定将无法正常工作，甚至可能中断

好吧，就我而言，它正在崩溃。*文档中“在 Spring 管理的（或纯 JTA）事务中对调度程序执行所有操作*”的确切含义是什么。

我们提供的数据源没有在其他任何地方使用。Quartz.properties 看起来像这样：

```
org.quartz.scheduler.instanceName = JobScheduler
org.quartz.scheduler.instanceId = pcmlScheduler

org.quartz.plugin.shutdownHook.class=org.quartz.plugins.management.ShutdownHookPlugin
org.quartz.plugin.shutdownHook.cleanShutdown = true

org.quartz.threadPool.class = org.quartz.simpl.SimpleThreadPool
org.quartz.threadPool.threadCount =  2
org.quartz.threadPool.threadPriority = 4

org.quartz.jobStore.misfireThreshold = 5000
org.quartz.jobStore.class = org.quartz.impl.jdbcjobstore.JobStoreTX
org.quartz.jobStore.driverDelegateClass = org.quartz.impl.jdbcjobstore.StdJDBCDelegate
org.quartz.jobStore.tablePrefix = QRTZ_ 
```

如果我能得到一个上下文究竟是什么事务是指我可以进一步归零数据库锁BreaK：

```
 Failure obtaining db row lock: No row exists in table QRTZ_LOCKS for lock named: TRIGGER_ACCESS [See nested exception: java.sql.SQLException: No row exists in table QRTZ_LOCKS for lock named: TRIGGER_ACCESS] 
```

确实 QRTZ_LOCKS 没有任何行，但管理它应该是石英头痛。它管理得很好，当在quartz.properties 中提供数据源时工作得很好。

更新：从[石英论坛](http://forums.terracotta.org/forums/posts/list/5175.page)，得到了这个问题的副本，根据建议，在 QRTZ_LOCKS 中添加以下行可以解决问题。

```
INSERT INTO QRTZ_LOCKS values('TRIGGER_ACCESS');
INSERT INTO QRTZ_LOCKS values('JOB_ACCESS');
INSERT INTO QRTZ_LOCKS values('CALENDAR_ACCESS');
INSERT INTO QRTZ_LOCKS values('STATE_ACCESS');
INSERT INTO QRTZ_LOCKS values('MISFIRE_ACCESS'); 
```

我不知道这有多可靠，但它确实有效。有趣的观察是，当提供数据源作为 quary.properties 的一部分时，它并不期望这些行。但是作为部分 schedulerFactoryBean 提供数据源，它需要这些（可能）。理想情况下，即使需要它，它也应该由石英本身来照顾。

需要石英内部人员/用户的一些专家评论。

# html - follow ajax call in debugger

> ID：14953357
> 
> 赞同：0
> 
> 时间：2013-02-19T08:54:03.640
> 
> 标签：html, ajax, forms, post

I'm using Chrome (and IE's) network tools in the debugger to view what form data I'm sending by ajax calls.

This is the parsed data:

![enter image description here](../Images/d520b583f9982dc343c520590a7ebd16.png)

This is the source data:

![enter image description here](../Images/7b734c30a1e82ffa83a6f1364ea0a2be.png)

The lines marked in yellow are what my question is about. The first picture shows the correct string that I'm sending: **description +'---'**.

The second picture shows: **description%2B'+---'**, where %2B is code for a plus sign.

I'm wondering, how can there be 2 plus signs in the second picture (the actual plus and the %2B)? Furthermore, what is this second plus doing inside the quotes?

That's not the data that I'm sending. On the server side it receives correctly, but I'm just wondering, is it a bug in IE and chrome Debugger or am I missing something?

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T10:05:10.960

You are missing something, but it's very subtle: in `application/x-www-form-urlencoded` encoding, the space character is changed to a `+`. So the second plus is not a plus, but rather an encoded space.

For more information, see the answer to [this](https://stackoverflow.com/questions/1634271/url-encoding-the-space-character-or-20) question.

# java - 如何获取泛型方法参数的类型参数类？

> ID：14953359
> 
> 赞同：5
> 
> 时间：2013-02-19T08:54:13.650
> 
> 标签：java, generics

如何获取传递给方法的参数的类型参数？例如我有

```
List<Person> list = new ArrayList<Person>(); 

public class Datastore {

  public <T> void insert(List<T> tList) {
     // when I pass the previous list to this method I want to get Person.class ; 
  }
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-19T09:07:15.600

由于类型擦除，唯一的方法是将类型作为参数传递给方法。

如果您有权访问数据存储区代码并且可以进行修改，则可以尝试这样做：

```
public class Datastore {
    public T void insert(List<T> tList, Class<T> objectClass) {
    }
} 
```

然后通过做调用它

```
List<Person> pList = new ArrayList<Person>();
...
dataStore.insert(pList, Person.class); 
```

我看到的对此类问题的每个响应都是将类作为参数发送给方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-19T09:01:09.950

由于类型擦除，我怀疑我们是否能得到它，除非有一些反射魔法可以做到。

但是如果列表中有元素，我们可以联系它们并在它们上调用 getClass。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T09:38:11.993

我认为你不能那样做。看看这个类：

```
public class TestClass
{
    private List<Integer> list = new ArrayList<Integer>();

    /**
     * @param args
     * @throws NoSuchFieldException
     * @throws SecurityException
     */
    public static void main(String[] args)
    {
        try
        {
            new TestClass().getClass().getDeclaredField("list").getGenericType(); // this is the type parameter passed to List
        }
        catch (SecurityException e)
        {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        catch (NoSuchFieldException e)
        {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        new TestClass().<Integer> insert(new ArrayList<Integer>());
    }

    public <T> void insert(List<T> tList)
    {
        ParameterizedType paramType;
        paramType = (ParameterizedType) tList.getClass().getGenericInterfaces()[0];
        paramType.getActualTypeArguments()[0].getClass();
    }
} 
```

您可以从类或字段中获取类型参数，但它不适用于泛型方法。尝试使用非泛型方法！

**或者**

另一种解决方案可能是将实际`Class`对象传递给方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T09:06:51.820

你可以试试这个...

```
if(tList != null && tList.size() > 0){
    Class c = tList.get(0).getClass();
} 
```

# c++ - 如何将 lambda 存储在类中并将其作为参数捕获？

> ID：14953360
> 
> 赞同：1
> 
> 时间：2013-02-19T08:54:31.623
> 
> 标签：c++, class, c++11, lambda

我在存储 lambda 表达式时遇到问题，将类中的“this”指针作为参数捕获。我像这样制作了typedef：

```
typedef void(*func)(); 
```

下面的代码工作正常。

```
#include <iostream>
using namespace std;

typedef void(*func)();

class A {
public:
    func f;
};

class B {
public:
    A *a;

    B() {
        a = new A();
        a->f = [](){
            printf("Hello!");
        };
    }
};

int main() {
    B *b = new B();
    b->a->f();
    return 0;
} 
```

还没有捕获，但是当我想在 lambda 中捕获“this”指针时，它会引发错误。如何使用捕获制作 typedef？我想做这样的事情：

```
#include <iostream>
using namespace std;

typedef void(*func)();

class A {
public:
    func f;
};

class B {
public:
    A *a;

    B() {
        a = new A();

        //There is a problem with [this]
        a->f = [this](){
            //Method from class B using "this" pointer
            this->p();
        };
    }
    void p() {
        printf("Hello!");
    }
};

int main() {
    B *b = new B();
    b->a->f();
    return 0;
} 
```

我究竟做错了什么？请解释一下。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T09:02:30.877

无法从带有捕获的 lambda 转换为函数指针，因为带有捕获的 lambda 包含比函数指针更多的信息（它不仅包含函数的地址，还包含已捕获的变量） .

更改`typedef void(*func)();`以`typedef std::function<void()> func;`获取能够保存任何可复制函数类型的东西。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-19T09:15:03.653

正如 Angew 上面所说，您应该使用`std::function`类模板，而不仅仅是函数指针。您的代码将变成这样（从第二个示例复制）

```
#include <iostream>
#include <functional>
#include <memory>
using namespace std;

class A {
public:
    std::function<void> f;
};

class B {
public:
    shared_ptr<A> a;  // Better ownership

    B() 
     : a(new A())
    {
        // Now this should work
        a->f = [this](){
            //Method from class B using "this" pointer
            this->p();
        };
        // Note, you could just do this instead of a lambda:
        // a->f = bind(b::p, this);
    }
    void p() {
        printf("Hello!");
    }
};

int main() {
    B *b = new B();
    b->a->f();
    return 0;
} 
```

`A`除了正确的可调用对象之外，我还通过智能指针添加了自动清理，并添加了代码来向您展示如何使用它来执行此操作`std::bind`。

# java - 用Java将Excel数据写入数据库

> ID：14953363
> 
> 赞同：-1
> 
> 时间：2013-02-19T08:54:47.047
> 
> 标签：java, database, excel

这是我用来将excel文件数据写入数据库的方法。

```
public static void executeSQLUpdate(String sql, List<Object> arguments) {
    Connection con = null;
    PreparedStatement pstmt = null;
    try {
        con = getConnection(); //a method that returns a java.sql.Connection to your database
        System.out.println("\n01)conection :"+con);
        pstmt =  con.prepareStatement(sql);
        System.out.println("\n02)pstn :"+pstmt);
        System.out.println( "\n03)arguments size :"+arguments.size());
        if (arguments != null) {
            int i = 1;
            System.out.println( "\n04)if :"+arguments);
            for(Object o : arguments) {
                 System.out.println( "\n05)executeSQLUpdate");
                 System.out.println( "\n06)object."+o);                 
                 System.out.println("\n07)................... :"+i + o);
                 pstmt.setObject(i, o);
                 System.out.println("\n08)____________________"+i+o);

            }
        }
        System.out.print("\n09)errorchk........... :");
        //method to execute insert, update, delete statements...
        pstmt.executeUpdate();
        System.out.print("\n10)+++++++++++++++++ :");
    } catch(SQLException e) {
        System.out.println("\n11)************* :"+e);
        //handle the error...
    } finally {
        //closing the resources (always in finally block, not in the try!)
        try {
            if (pstmt != null) {
                pstmt.close();
            }
            if (con != null) {
                con.close();
            }
        } catch (SQLException e) {
        }
    }
} 
```

到 07 为止，所有系统都正常工作。但在那之后，任何系统都无法正常工作。这是什么原因？这个有什么错误吗？

这是我的输出：

```
run:
AAA     BBB     CCC     
DDD     EEE     FFF     
GGG     HHH     III     
JJJ     KKK     LLL     
MMM     NNN     OOO     
PPP     QQQ     RRR 
```

01）连接：com.mysql.jdbc.JDBC4Connection@6e70c7

02）pstn：com.mysql.jdbc.JDBC4PreparedStatement@29428e：插入文件_1值（**未指定**，**未指定**，**未指定**）

03）参数大小：6

04)if :[[AAA, BBB, CCC], [DDD, EEE, FFF], [GGG, HHH, III], [JJJ, KKK, LLL], [MMM, NNN, OOO], [PPP, QQQ, RRR]]

05）执行SQL更新：

06)对象：[AAA, BBB, CCC]

07)....... :1[AAA, BBB, CCC]

08) ***_* __ *_* __ *_* ___** :1[AAA, BBB, CCC]

05）执行SQL更新：

06）对象：[DDD，EEE，FFF]

07)....... :1[DDD, EEE, FFF]

08) ***_* __ *_* __ *_* ___** :1[DDD、EEE、FFF]

05）执行SQL更新：

06）对象：[GGG，HHH，III]

07)....... :1[GGG, HHH, III]

08) ***_* __ *_* __ *_* ___** :1[GGG, HHH, III]

05）执行SQL更新：

06)对象：[JJJ, KKK, LLL]

07)....... :1[JJJ, KKK, LLL]

08) ***_* __ *_* __ *_* ___** :1[JJJ, KKK, LLL]

05）执行SQL更新：

06）对象：[嗯，NNN，OOO]

07)....... :1[嗯，NNN，OOO]

08) ***_* __ *_* __ *_* ___** :1[MMM, NNN, OOO]

05）执行SQL更新：

06)对象：[PPP、QQQ、RRR]

07)....... :1[PPP, QQQ, RRR]

08) ***_* __ *_* __ *_* ___** :1[PPP, QQQ, RRR]

09)errorchk............ : 11) ***** ** *** *** : 没有为参数 2 指定值

```
java.sql.SQLException: No value specified for parameter 2
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1075)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:989)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:984)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:929)
    at com.mysql.jdbc.PreparedStatement.checkAllParametersSet(PreparedStatement.java:2560)
    at com.mysql.jdbc.PreparedStatement.fillSendPacket(PreparedStatement.java:2536)
    at com.mysql.jdbc.PreparedStatement.executeUpdate(PreparedStatement.java:2383)
    at com.mysql.jdbc.PreparedStatement.executeUpdate(PreparedStatement.java:2327)
    at com.mysql.jdbc.PreparedStatement.executeUpdate(PreparedStatement.java:2312)
    at com.project.bulk.ReadExcelFile.executeSQLUpdate(ReadExcelFile.java:112)
    at com.project.bulk.ReadExcelFile.MethodToData(ReadExcelFile.java:138)
    at com.project.bulk.ReadExcelFile.main(ReadExcelFile.java:39) 
```

构建成功（总时间：3 秒）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T08:57:29.347

一个错误肯定是你增加`i`了两次！！！

```
System.out.println("\n07)..................."+i++ + o); // one
pstmt.setObject(i++, o); // two 
```

这意味着您不设置偶数索引，只设置奇数索引：1、3、5...

这应该纠正这个错误：

```
System.out.println("\n07)..................."+i + o); 
pstmt.setObject(i++, o); // only once, and after the evaluation! 
```

**编辑** **其次，也是大错误**

```
} catch(SQLException e) {
    System.out.println("\n11)************* :"+e); //WTF?
    //handle the error...    
} 
```

[原谅我大喊大叫，这必须现在发生！]

**为了我们和您（未来）同事的心理健康，请不要再这样做了！**

打印异常必须以以下两种方式之一发生：

*   logger.error("消息", e);
*   e.printStackTrace();

由于这些**保留堆栈跟踪，因此可以正确调试代码**

但永远不应该**，永远，永远，永远！**以下列任何一种方式发生：

*   System.out.print(e)
*   System.out.print(e.getMessage)
*   System.out.print("消息" + e.getMessage)
*   logger.error(e.getMessage)

所以正确的应该是：

```
} catch(SQLException e) {
    System.out.println("\n11)************* :"+e.getMessage()); 
    e.printStackTrace();
    //TODO: handle the error...    
} 
```

**顺便说一句：**使用像 log4j 这样的正确日志记录*非常值得*花时间！清理所有 System.out.* 比设置适当的日志级别要花费更多的时间......

**编辑2**

至于SQL错误：

```
String sql = "INSERT INTO files_1 VALUES(?)"; 
```

此 SQL 行告诉 DBMS 它将有一个参数需要处理。该表有 3 列，因此您需要指定 3 个值。常量或参数（通过使用`?`）。所以你应该有：

```
String sql = "INSERT INTO files_1 VALUES(?,?,?)"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T09:16:15.357

如您的错误所示

```
java.sql.SQLException: Invalid argument value: java.io.NotSerializableException 
```

您正在尝试使用此行中不可序列化的参数设置一个值：

```
pstmt.setObject(i++, o); 
```

请确保您的所有值都是可以映射到数据库列（如`String`或）的原语或值`Date`。

您可以通过输入这样的一行来找出您要设置的数据（使用日志框架或`System.out.println`：

```
System.out.println("setObject: " + o + ", Class: " + o.getClass()); 
```

# delphi - 合并单元格的报表工具

> ID：14953364
> 
> 赞同：0
> 
> 时间：2013-02-19T08:54:48.563
> 
> 标签：delphi, merge, report, cells

Delphi 是否有任何允许垂直合并单元格的报告工具（如 Excel）？例如，据我所知，流行的报表工具 FastReport 不允许以简单的方式进行这种合并。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T10:08:45.460

TfrxMemoView 上有一个名为 SuppressRepeated 的属性，可用于在视觉上模拟合并单元格。

# django - 如何使用 pip 安装 Django 1.5？

> ID：14953365
> 
> 赞同：5
> 
> 时间：2013-02-19T08:54:50.120
> 
> 标签：django, pip, django-1.5

如何安装 Django 1.5？`pip install django==1.5`不工作。

Django1.5 是稳定版吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-19T08:59:50.377

不，截至 2013 年 2 月 19 日，最新版本是 1.4.3。请参阅[文档](https://www.djangoproject.com/download/)。

如果您确实想要 1.5，您可以从 github 获得它 -

```
pip install -e git+https://github.com/django/django.git@1.5b2#egg=django 
```

更新

可以安装最新的当前版本（截至 2013 年 6 月 7 日的 1.5.1）

```
pip install django 
```

# ios - 如何在您的应用中获取在线用户数？

> ID：14953370
> 
> 赞同：0
> 
> 时间：2013-02-19T08:55:06.123
> 
> 标签：ios, game-center, icloud

我正在创建需要显示有多少用户在线的游戏。例如，可以有 5 分钟的超时。是否有任何用于 iCloud 或 Game Center 的 API 来获取在线用户数？

# c# - 如何在 C# 中使指针泛型？

> ID：14953375
> 
> 赞同：5
> 
> 时间：2013-02-19T08:55:23.873
> 
> 标签：c#

我有一个`WriteableBitmap`我使用不安全的方法来绘制像素。基本部分如下所示：

```
private unsafe void DrawBitmap(WriteableBitmap bitmap, byte[] pixels)
{
         // Boilerplate omitted... 

        fixed (byte* pPixels = pixels)
        {
            for (int y = 0; y < height; y++)
            {
                var row = pPixels + (y * width);
                for (int x = 0; x < width; x++)
                {
                    *(row + x) = color[y + height * x];
                }
            }
        }

        bitmap.WritePixels(new Int32Rect(0, 0, width, height), pixels, width*pf.BitsPerPixel/8, 0);
} 
```

但是，不确定用户想要绘制的内容是 type `byte`，并且使这个方法通用（即`DrawBitmap<T>`）是有意义的，但是我怎样才能制作`pPixels`type的指针`T*`呢？

还有其他一些技巧可以使我变得`DrawBitmap`通用吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T09:08:56.793

考虑使用[重载](http://msdn.microsoft.com/en-gb/library/vstudio/ms229029%28v=vs.100%29.aspx)。

```
public void MethodA(byte[] pPixels) {}
public void MethodA(int[] pPixels {}
//etc... 
```

# syntax - := 在伪代码中是什么意思？

> ID：14953377
> 
> 赞同：2
> 
> 时间：2013-02-19T08:55:29.630
> 
> 标签：syntax, pseudocode

我目前正在研究快速排序算法的伪代码。在某些行上，它说的是：

```
i := left 
```

代表什么`:=`？是`+=`正常的还是正常的`=`？

仅供参考：这是完整的伪代码（德语）：

```
 funktion teile(links, rechts)
 i := links 
 // Starte mit j links vom Pivotelement
 j := rechts - 1
 pivot := daten[rechts]

 wiederhole

     // Suche von links ein Element, welches größer als das Pivotelement ist
     wiederhole solange daten[i] ≤ pivot und i < rechts
         i := i + 1
     ende

     // Suche von rechts ein Element, welches kleiner als das Pivotelement ist
     wiederhole solange daten[j] ≥ pivot und j > links
          j := j - 1 
     ende

     falls i < j dann
         tausche daten[i] mit daten[j]
     ende

 solange i < j // solange i an j nicht vorbeigelaufen ist 

 // Tausche Pivotelement (daten[rechts]) mit neuer endgültiger Position (daten[i])

 falls daten[i] > pivot dann
         tausche daten[i] mit daten[rechts]
 ende

 // gib die Position des Pivotelements zurück

 antworte i

ende 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-19T08:58:23.947

> 代表什么`:=`？

它是一个**赋值**运算符，源自 Pascal 编程语言。

> 是`+=`正常的还是正常的`=`？

`:=`等价于`=`，不要与**复合赋值**运算符（例如`+=`）混淆。

请参阅freepascal.org 上的[*赋值和表达式*](http://www.freepascal.org/docs-html/ref/refsu20.html#x48-550003.7.2)的变体以获得快速参考。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-19T09:14:23.777

您应该将 := 阅读为“变得等于”。

你通常会有这样的组合：

```
a := b  #a becomes equal to b
a = b   #if a equals b 
```

或者这个组合：

```
a = b   #a becomes equal to b
a == b  #if a equals b 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-19T09:00:11.207

它类似于

```
i = "left"; 
```

在Java等中。语法“：=”用于基于Pascal的编程语言，例如Delphi。所以这基本上是一个简单的任务。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-19T09:00:38.690

如果它是帕斯卡风格的伪代码，则该符号主要用于分配值参考：[http ://en.wikipedia.org/wiki/Pseudocode](http://en.wikipedia.org/wiki/Pseudocode)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-07T05:59:46.183

这也在 Ada 中，

:= 等于 =

和 = 等于 ==

# javascript - 如何允许将任意“更新”函数传递给 requestAnimationFrame 循环？

> ID：14953384
> 
> 赞同：2
> 
> 时间：2013-02-19T08:55:51.357
> 
> 标签：javascript, jquery

这是我目前所拥有的：

```
function animateLetter(letter, type){
    letter.css(type, '50%');
    var j = 50;
    loop(function(){
    letter.css(type, (j =- 5) + '%'); 
    return j < 0;
    });
   }

   function loop(run) {
       if(run.apply()) requestAnimationFrame(loop(run));
   } 
```

为什么这行不通？我是 JS 新手，所以可能会遗漏一些明显的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T09:07:18.130

该`loop`函数在调用`requestAnimationFrame`.

```
function loop(run) {
   if(run.apply()) requestAnimationFrame(function() { loop(run) });
} 
```

将循环调用包装在另一个函数中意味着只有在调用`requestAnimationFrame`回调时才会调用它。

# c# - NHibernate - 映射复杂类型以便序列化为字符串

> ID：14953386
> 
> 赞同：0
> 
> 时间：2013-02-19T08:55:54.040
> 
> 标签：c#, sql-server-2008, nhibernate, mapping

我有一个 DTO 对象，其属性类型为“ObservableDictionary”，名为“Test”，它也是可序列化的！

DTO 字段“Test”现在映射到类型为 nvarchar(max) 的 Datbasfield“Test”。

当我保存和加载时，一切正常，但数据库中的序列化不可读，它充满了特殊字符。

是否可以告诉 NHibernate 使用 XMLSerializer？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T12:59:34.627

好，我知道了！在 Rippo 的帮助下！

```
using System;
using System.Collections.Generic;
using System.Data;
using System.Linq;
using System.Text;
using NHibernate;
using NHibernate.SqlTypes;
using NHibernate.UserTypes;

namespace MCC.Common.DL.BaseObjects
{
    public class SerializableUserType<originalType> : IUserType
    {
        public SqlType[] SqlTypes
        {
            get
            {
                SqlType[] types = new SqlType[1];
                types[0] = new SqlType(DbType.String);
                return types;
            }
        }

        public System.Type ReturnedType
        {
            get { return typeof(originalType); }
        }

        public new bool Equals(object x, object y)
        {
            if (x == null)
            {
                return false;
            }
            else
            {
                return x.Equals(y);
            }
        }

        public int GetHashCode(object x)
        {
            return x.GetHashCode();
        }

        public object NullSafeGet(IDataReader rs, string[] names, object owner)
        {
            string txt = (string)NHibernateUtil.String.NullSafeGet(rs, names[0]);
            return StringSerializer<originalType>.DeSerialize(txt);
        }

        public void NullSafeSet(IDbCommand cmd, object value, int index)
        {
            if (value == null)
            {
                NHibernateUtil.String.NullSafeSet(cmd, null, index);
                return;
            }
            var wrt = StringSerializer<originalType>.Serialize((originalType)value);

            NHibernateUtil.String.NullSafeSet(cmd, wrt, index);
        }

        public object DeepCopy(object value)
        {
            if (value == null) return null;
            return StringSerializer<originalType>.DeSerialize(StringSerializer<originalType>.Serialize((originalType)value));            
        }

        public bool IsMutable
        {
            get { return false; }
        }

        public object Replace(object original, object target, object owner)
        {
            return original;
        }

        public object Assemble(object cached, object owner)
        {
            return cached;
        }

        public object Disassemble(object value)
        {
            return value;
        }
    }
} 
```

我在 Fluent 中使用的是：

```
Map(x => x.ScriptedTagScript).CustomType(typeof(SerializableUserType<ObservableDictionary<string, string>>)); 
```

你需要这个助手类：

```
public class StringSerializer<T>
{
    public static string Serialize(T obj)
    {
        if (obj == null)
            return string.Empty;

        // XML-Serialisieren in String
        XmlSerializer serializer = new XmlSerializer(obj.GetType());

        // Serialisieren in MemoryStream
        MemoryStream ms = new MemoryStream();

        XmlWriterSettings settings = new XmlWriterSettings();
        settings.OmitXmlDeclaration = true;
        settings.Indent = true;

        XmlWriter writer = XmlWriter.Create(ms, settings);

        XmlSerializerNamespaces namespaces = new XmlSerializerNamespaces();
        namespaces.Add(string.Empty, string.Empty);

        serializer.Serialize(writer, obj, namespaces);

        // Stream in String umwandeln 
        StreamReader r = new StreamReader(ms);
        r.BaseStream.Seek(0, SeekOrigin.Begin);

        return r.ReadToEnd();
    }        

    public static T DeSerialize(string txt)
    {
        T retVal = default(T);
        if (string.IsNullOrEmpty(txt))
        {
            return retVal;
        }

        try
        {
            XmlSerializer ser = new XmlSerializer(typeof (T));
            StringReader stringReader = new StringReader(txt);
            XmlTextReader xmlReader = new XmlTextReader(stringReader);
            retVal = (T) ser.Deserialize(xmlReader);
            xmlReader.Close();
            stringReader.Close();
        }
        catch (Exception)
        {
        }

        return retVal;
    }        
} 
```

# javascript - ul.slide jQuery插件问题

> ID：14953388
> 
> 赞同：0
> 
> 时间：2013-02-19T08:55:57.073
> 
> 标签：javascript, jquery, html-lists

我正在使用出色的 UL-slide jQuery 插件。通常我没有问题，但是现在我遇到了一些问题：

我正在做一个星期五的测验，我希望问题在回答后滑开。但是，当我单击该框时，它会滑动到“中间帧”而不是下一个 li。

这是我的网站：[http ://carlpapworth.com/friday-quiz/](http://carlpapworth.com/friday-quiz/)

这是我的代码：

html:

```
 <ul id="qBox">
    <!--Q1-->           <li class="qContainer">
                            <div class="qQuestion">Question I
                            </div>
                            <ul class="qAnswers">
                                <li><a href="#" class="qWrong"><h3>Answer 1</h3></li>
                                <li><a href="#" class="qCorrect"><h3>Answer 2</h3></li>
                                <li><a href="#" class="qWrong"><h3>Answer 3</h3></li>
                            </ul>
                        </li>
    <!--Q2-->           <li class="qContainer">
                            <div class="qQuestion">Question II
                            </div>
                            <ul class="qAnswers">
                                <li><a href="#" class="qWrong"><h3>Answer 1</h3></li>
                                <li><a href="#" class="qCorrect"><h3>Answer 2</h3></li>
                                <li><a href="#" class="qWrong"><h3>Answer 3</h3></li>
                            </ul>
                        </li>
    <!--Q3-->           <li class="qContainer">
                            <div  class="qQuestion">Question III
                            </div>
                            <ul class="qAnswers">
                                <li><a href="#" class="qWrong"><h3>Answer 1</h3></li>
                                <li><a href="#" class="qCorrect"><h3>Answer 2</h3></li>
                                <li><a href="#" class="qWrong"><h3>Answer 3</h3></li>
                            </ul>
                        </li>
    </ul> 
```

CSS：

```
#qBox{
width: 2000px;
height: 260px;
}

li.qContainer {
/*
position: relative;
width: 100%!important;
height: 100%!important;
padding: 0px 0px;
float: left;
border: solid 1pt;
*/
}

.qQuestion {
width: 480px;
height: 50px;
padding: 10px 0px;
font-family: corbel;
font-size: 34px;
text-align: center;
color: #ffffff;
}

.qQuestion:after {
content: url(../images/questionShadow.png);
width: 100%;
margin-top: -24px;
padding: 0 0 20px 0;
height: 2px;
display: block;
}

.qAnswers {
width: 460px;
padding: 10px;
height: auto;
text-align: center;
}

.qAnswers li {
height: 30px;
padding: 10px;
}

.qAnswers li:after {
content: url(../images/questionShadow.png);
width: 100%;
margin-top: -8px;
height: 2px;
display: block;
}

.qAnswers li a{
width: 100%;
font-family: silverfake;
font-size: 26p
} 
```

JS：

```
$(document).ready(function() {
            $('#qBox').ulslide({
                    effect: {
                        type: 'slide', // slide or fade
                        axis: 'x',     // x, y
                        distance: 0   // Distance between frames
                    },
                    duration: 2000,
                    autoslide: 0,
                    width: 500,
                    height: 300,
                    mousewheel: false,
                    nextButton: '.qAnswers a',
                    prevButton: '#e1_prev'
            });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T08:59:01.343

您的 HTML 代码有一些问题，请查看您的 LI ：

```
 <li><a href="#" class="qWrong"><h3>Answer 1</h3></li> 
```

你的A没有关闭，我认为这是你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T09:05:25.027

弄清楚..你错过了`<a>`结束标签...`</a>`

```
<li><a href="#" class="qWrong"><h3>Answer 1</h3></a></li>   
                                            ----^^^---- here 
```

[在这里](http://jsfiddle.net/bipen/eSfBJ/)尝试小提琴

# c# - 在不知道大小的情况下读取内存映射文件或内存映射视图访问器的所有内容

> ID：14953393
> 
> 赞同：8
> 
> 时间：2013-02-19T08:56:25.523
> 
> 标签：c#, .net, ipc, accessor, memory-mapped-files

如果我不知道它的大小，我需要类似于 ReadToEnd 或 ReadAllBytes 的东西来使用 MappedViewAccessor 读取 MemoryMappedFile 的所有内容，我该怎么做？

我已经搜索过了，我看到了这个问题，但这不是我要找的东西：

[如何从 .NET 中的内存映射文件中快速读取字节？](https://stackoverflow.com/questions/7956167/how-can-i-quickly-read-bytes-from-a-memory-mapped-file-in-net)

**编辑：**

有一个问题， (int)stream.Length 没有给我正确的长度，而是给出了使用的内部缓冲区的大小！我需要刷新这个问题，因为它非常紧迫。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-19T10:00:48.960

而是使用流：

```
public static Byte[] ReadMMFAllBytes(string fileName)
{
    using (var mmf = MemoryMappedFile.OpenExisting(fileName))
    {
        using (var stream = mmf.CreateViewStream())
        {
            using (BinaryReader binReader = new BinaryReader(stream))
            {
                return binReader.ReadBytes((int)stream.Length);
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-12T05:07:37.930

这很难回答，因为您的应用程序仍有许多细节尚未指定，但我认为 Guffa 和 Amer 的答案仍然部分正确：

*   MemoryMappedFile 比文件内存更多；它是内存中 4Kb 页面的序列。所以，stream.Length 实际上会给你所有的字节（没有“内部缓冲区大小”），但它可能会给你比你预期的更多的字节，因为大小总是会四舍五入到 4Kb 边界。
*   “文件”语义来自将 MemoryMappedFile 与真实文件系统文件相关联。假设创建文件的进程总是调整文件大小，那么您可以通过 fileSystem 获得文件的精确大小。

如果以上所有内容都适合您的应用程序，那么以下内容应该有效：

```
 static byte[] ReadMemoryMappedFile(string fileName)
    {
        long length = new FileInfo(fileName).Length;
        using (var stream = File.Open(fileName, FileMode.OpenOrCreate, FileAccess.Read, FileShare.ReadWrite))
        {
            using (var mmf = MemoryMappedFile.CreateFromFile(stream, null, length, MemoryMappedFileAccess.Read, null, HandleInheritability.Inheritable, false))
            {
                using (var viewStream = mmf.CreateViewStream(0, length, MemoryMappedFileAccess.Read))
                {
                    using (BinaryReader binReader = new BinaryReader(viewStream))
                    {
                        var result = binReader.ReadBytes((int)length);
                        return result;
                    }
                }
            }
        }
    } 
```

要写入数据，您可以使用以下命令：

```
 private static void WriteData(string fileName, byte[] data)
    {
        using (var stream = File.Open(fileName, FileMode.OpenOrCreate, FileAccess.ReadWrite, FileShare.ReadWrite))
        {
            using (var mmf = MemoryMappedFile.CreateFromFile(stream, null, data.Length, MemoryMappedFileAccess.ReadWrite, null, HandleInheritability.Inheritable, true))
            {
                using (var view = mmf.CreateViewAccessor())
                {
                    view.WriteArray(0, data, 0, data.Length);
                }
            }

            stream.SetLength(data.Length);  // Make sure the file is the correct length, in case the data got smaller.
        }
    } 
```

但是，当您执行上述所有操作时，您可能会直接使用该文件并避免内存映射。如果将其映射到文件系统是不可接受的，那么 Guffa 在数据本身中编码长度（或结束标记）的答案可能是最好的。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-03-05T18:02:39.920

你不能那样做。

视图访问器是使用最小系统页面大小创建的，这意味着它可能大于实际文件。视图流只是访问器的流形式，因此它也会给出相同的行为。

> “视图以系统页面为单位提供，视图大小向上舍入到下一个系统页面大小”

[http://msdn.microsoft.com/en-us/library/dd267577.aspx](http://msdn.microsoft.com/en-us/library/dd267577.aspx)

访问器很乐意在实际文件之外进行读写，而不会引发异常。读取时，文件外的任何字节都将为零。写入时，文件外写入的字节将被忽略。

要从具有原始文件确切大小的内存映射文件中读取文件，您必须已经知道该大小。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-02-03T21:33:39.707

MemoryMappedFile 创建的流的长度与文件系统页面大小（通常为 4096）对齐。您必须从其他地方获取文件大小。如果它是内存映射**文件**，您可以使用该代码：

```
byte[] ReadAllMemoryMappedFileBytes(string filePath)
{
    var fileInfo = new FileInfo(filePath);
    using (var file = MemoryMappedFile.CreateFromFile(filePath, FileMode.Open))
    using (var stream = file.CreateViewAccessor())
    {
        byte[] bytes = new byte[fileInfo.Length];
        stream.ReadArray(0, bytes, 0, bytes.Length);
        return bytes;
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-06-05T15:01:12.123

使用 FileInfo 类获取长度，如下所示

```
using System.Data;
using System.IO;
using System.IO.Compression;
using System.IO.MemoryMappedFiles;

// ...

public void WriteToMemoryMap(DataSet ds, string key, string fileName)
{
    var bytes = CompressData(ds);
    using (MemoryMappedFile objMf = MemoryMappedFile.CreateFromFile(fileName, FileMode.OpenOrCreate, key, bytes.Length))
    {
        using (MemoryMappedViewAccessor accessor = objMf.CreateViewAccessor())
        {
            accessor.WriteArray(0, bytes, 0, bytes.Length);
        }
    }
}
public DataSet ReadFromMemoryMap(string fileName)
{
    var fi = new FileInfo(fileName);
    var length = (int)fi.Length;
    var newBytes = new byte[length];
    using (MemoryMappedFile objMf = MemoryMappedFile.CreateFromFile(fileName, FileMode.Open))
    {
        using (MemoryMappedViewAccessor accessor = objMf.CreateViewAccessor())
        {
            accessor.ReadArray(0, newBytes, 0, length);
        }
    }
    return DecompressData(newBytes);
}
public byte[] CompressData(DataSet ds)
{
    try
    {
        byte[] data = null;
        var memStream = new MemoryStream();
        var zipStream = new GZipStream(memStream, CompressionMode.Compress);
        ds.WriteXml(zipStream, XmlWriteMode.WriteSchema);
        zipStream.Close();
        data = memStream.ToArray();
        memStream.Close();
        return data;
    }
    catch (Exception)
    {
        return null;
    }
}
public DataSet DecompressData(byte[] data)
{
    try
    {
        var memStream = new MemoryStream(data);
        var unzipStream = new GZipStream(memStream, CompressionMode.Decompress);
        var objDataSet = new DataSet();
        objDataSet.ReadXml(unzipStream, XmlReadMode.ReadSchema);
        unzipStream.Close();
        memStream.Close();
        return objDataSet;
    }
    catch (Exception)
    {
        return null;
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-08-21T03:03:23.520

只是将@Amer Sawan 解决方案翻译为 Vb.NET：

```
' Usage Example:
' Dim ReadBytes As Byte() = ReadMemoryMappedFile(Name:="My MemoryMappedFile Name") ' Read the byte-sequence from memory.
' Dim Message As String = System.Text.Encoding.ASCII.GetString(ReadBytes.ToArray) ' Convert the bytes to String.
' Message = Message.Trim({ControlChars.NullChar}) ' Remove null chars (leading zero-bytes)
' MessageBox.Show(Message, "", MessageBoxButtons.OK) ' Show the message.    '
'
''' <summary>
''' Reads a byte-sequence from a <see cref="IO.MemoryMappedFiles.MemoryMappedFile"/> without knowing the exact size.
''' Note that the returned byte-length is rounded up to 4kb, 
''' this means if the mapped memory-file was written with 1 byte-length, this method will return 4096 byte-length. 
''' </summary>
''' <param name="Name">Indicates an existing <see cref="IO.MemoryMappedFiles.MemoryMappedFile"/> assigned name.</param>
''' <returns>System.Byte().</returns>
Private Function ReadMemoryMappedFile(ByVal Name As String) As Byte()

    Try
        Using MemoryFile As IO.MemoryMappedFiles.MemoryMappedFile =
            IO.MemoryMappedFiles.MemoryMappedFile.OpenExisting(Name, IO.MemoryMappedFiles.MemoryMappedFileRights.ReadWrite)

            Using Stream = MemoryFile.CreateViewStream()

                Using Reader As New BinaryReader(Stream)

                    Return Reader.ReadBytes(CInt(Stream.Length))

                End Using ' Reader

            End Using ' Stream

        End Using ' MemoryFile

    Catch exNoFile As IO.FileNotFoundException
        Throw
        Return Nothing

    Catch ex As Exception
        Throw

    End Try

End Function 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-11-29T00:35:19.630

我想从 MemoryStream .ToArray() 方法中得到一些东西来返回所有字节，下面的代码对我有用：

```
using (MemoryMappedFile mmf = MemoryMappedFile.OpenExisting(MemoryMappedName))
{
    using (MemoryMappedViewStream stream = mmf.CreateViewStream())
    {
        using (MemoryStream memStream = new MemoryStream())
        {
            stream.CopyTo(memStream);
            return memStream.ToArray();
        }
    }
} 
```

干杯!

# c# - 如何在 Windows Phone 7.5/7.8 中访问收件箱消息

> ID：14953394
> 
> 赞同：1
> 
> 时间：2013-02-19T08:56:26.637
> 
> 标签：c#, windows-phone-7, windows-phone

我正在制作一个应用程序，它基本上告诉您特定用户收到了多少条消息。唯一的问题是我不知道如何访问收件箱消息。

有没有办法做到这一点？我想要一个列表中的所有消息或我可以在我的应用程序中使用的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T10:09:25.867

无法计算 WP7 和 WP8 中的消息。您只能从“SmsComposeTask”类发送短信，它会显示在您的短信列表中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T12:44:11.950

目前还没有办法在任何 WP 平台上访问。您只能通过[SMSComposeTask](http://msdn.microsoft.com/en-us/library/microsoft.phone.tasks.smscomposetask%28v=vs.92%29.aspx)类 (Launcher) 发送 SMS。[或者，您可以在这里](http://wpdev.uservoice.com/forums/110705-dev-platform/suggestions/1901813-sms-access-api)为这个新功能投票。

希望你觉得有用。

问候。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T09:11:45.293

您无法在 Windows Phone 中正常访问邮件消息或 SMS 消息。不幸的是，这是不允许的，我认为您不会很快看到它。但是，您可以尝试编写自己的邮件客户端来提供所需的功能。

# ios - ios - Uitableviewcell 中的 Uilabel 和 UIimageview

> ID：14953396
> 
> 赞同：1
> 
> 时间：2013-02-19T08:56:33.017
> 
> 标签：ios, uitableview, uiimageview, uilabel

我想要在 iPhone 中使用以下类型的布局（使用 UItableview、Uitableviewcell、Uilabel 和 Uiimageview）。

![在此处输入图像描述](../Images/db91cb4ba5f74b62d4443df122b79f3d.png)

（假设**浅蓝色点 == uiimageview**）

在每个 UItableviewcell 中，我有 1 个 UIimageview 和 1 个 Uilabel。两个控件的起始灯是相同的左上角。我的 uilabel 的内容是动态的，而图像只是一张静态图像。

与 uilabel 的内容相比，图像非常小。所以，我的图像垂直和水平居中。但我只想在左上角。

**编辑：**

我已经这样做了`Uitableviewcell`

但是如果 Uilabel 的行数是 2 或更多，那么 imageview 的位置就会改变。它在垂直和水平方向居中。但我只希望图像视图在左上角位置是否 uilabel 的第 1、2、3 行 ....n

我的代码在这里：

```
 In CommonCustomeCell.m

- (id)initWithFrame:(CGRect)frame reuseIdentifier:(NSString *)reuseIdentifier {

self = [super initWithFrame:frame reuseIdentifier:reuseIdentifier];

if (self) {

 dotImage = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"dotPoint.png"]];

        dotImage.opaque = YES;

        [self.contentView addSubview:dotImage];

    titleName3 = [[UILabel alloc] init];

titleName3.textAlignment = UITextAlignmentLeft;       

titleName3.backgroundColor = [UIColor clearColor];

        titleName3.adjustsFontSizeToFitWidth = FALSE;

        titleName3.font = [UIFont systemFontOfSize:14];

        titleName3.textColor = [UIColor colorWithRed:17.0/255.0 green:72.0/255.0 blue:147.0/255.0 alpha:1];

        titleName3.lineBreakMode = NSLineBreakByWordWrapping;     

        [titleName3 sizeToFit];     

        [self.contentView addSubview:titleName3];

}

-(void)layoutSubviews

{

    frame = CGRectMake(20,2,self.bounds.size.width - 45 , self.bounds.size.height);   

    [titleName3 setFrame:frame];

 frame = CGRectMake(4,10,dotImage.frame.size.width,dotImage.frame.size.height);

    self.dotImage.frame = frame;

}

} 
```

在 RootViewController.m 文件中

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath

    {

     CommonCustomeCell *cell = (CommonCustomeCell *) [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

                if (cell == nil) {                

                    cell = [[[CommonCustomeCell alloc] initWithFrame:CGRectZero reuseIdentifier:CellIdentifier] autorelease];

    }

     [cell.dotImage5 setImage:[UIImage imageNamed:@"myLogo.png"]];

     cell.titleName3.text = [[myArr objectAtIndex:indexPath.row] objectForKey:@"title"];

    }

    } 
```

帮助我，提前谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T09:11:58.827

*   `UITableView`使用**部分**和分组样式创建。
*   您的`loarem Ipsm`（文本）设置为**章节**标题。
*   并创建`UITableViewCell`自定义单元格`UIImageView`并`UILabel`显示文本“loarem Ipsm is simple dummy”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T09:28:48.060

您是否为 CustomCell 视图设置了自动调整大小，如下图所示？只应启用顶部和左侧。

![在此处输入图像描述](../Images/c66d9032389d72cc96bb667a90d20b70.png)

# sockets - 旧 TCP 连接的数据是否有机会潜入同一端口上的新 TCP 连接

> ID：14953398
> 
> 赞同：2
> 
> 时间：2013-02-19T08:56:37.870
> 
> 标签：sockets, tcp, time-wait

我在套接字上设置 SO_REUSEADDR 选项。假设一个套接字从一端关闭。

并且套接字描述符被重新分配给其他进程。

旧 TCP 连接的数据是否有机会潜入新的 TCP 连接？

有没有人观察到旧数据潜入新的 TCP 连接，尤其是在 Solaris 上？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T09:30:33.240

不。

如果你重新使用本地端口，但是远程主机或端口在后续连接中发生了变化，那么这是不可能的。

对于从同一个本地 IP/端口重新连接回同一个远程 IP/端口的情况，也称为 TIME-WAIT Assasination，TCP 堆栈需要遵守一些规则。主要是 - 从比前一个连接更高的序列号开始。您可以阅读 RFC 1337 中的细则。但这里有一个更好的链接和引用，它概述了如何在后续连接中调整序列号。

[http://blogs.technet.com/b/networking/archive/2010/08/11/how-tcp-time-wait-assassination-works.aspx](http://blogs.technet.com/b/networking/archive/2010/08/11/how-tcp-time-wait-assassination-works.aspx)

> 在服务器端套接字进入 TIME-WAIT 状态并且客户端在 2MSL（默认 TIME-WAIT 时间）内重新连接到服务器的情况下，可能会发生 2 件事：
> 
> 1.  服务器将不会响应来自客户端的 SYN 数据包，因为套接字处于 TIME-WAIT 状态。
>     
>     
> 2.  服务器可以接受来自客户端的 SYN 并将套接字的状态从 TIME-WAIT 更改为 ESTABLISHED。这被称为 TIME-WAIT 暗杀，或先前连接的化身。
>     
>     
> 
> 上面场景'2'的关键是发送的SYN的ISN（初始序列号）需要高于之前会话中使用的最高序列号。如果 ISN 不符合预期，服务器将不会响应 SYN，并且套接字将等待 2MSL 才能再次使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T09:26:12.127

这就是 TIME_WAIT 状态的用途。它的持续时间是最大段生命周期的两倍，因此发送到旧连接的任何数据都会在相同 IP:port 对之间的新连接形成之前过期。

# python - 为什么这些函数在字典中运行

> ID：14953406
> 
> 赞同：0
> 
> 时间：2013-02-19T08:57:00.710
> 
> 标签：python, dictionary

我是python初学者，正在练习一个简单的计算课。

这段代码假设当用户在命令行中输入 2 个数字和 1 个运算符时，它会告诉你答案。我只是想知道为什么它在函数 add()、subtract()、multiply() 和 divide() 中打印 4 行。我只是将它们放入字典中，而不是全部调用。有人可以为我解释一下吗？向我展示解决方案也很棒。提前致谢！

这是 windows power shell 的输出：

```
PS D:\misc\Code\python\mystuff> python .\CalculationTest.py
Please input a number:
>1
Please input a operator(i.e. + - * /):
>+
Please input another number:
>2
Adding 1 + 2         #why it shows these 4 lines?
Subtracting 1 - 2
Multiplying 1 * 2
Dividing 1 / 2
3 
```

这是我的代码：

```
class Calculation(object):
def add(self, a, b):
    print "Adding %d + %d" % (a, b)
    return a + b

def subtract(self, a, b):
    print "Subtracting %d - %d" % (a, b)
    return a - b

def multiply(self, a, b):
    print "Multiplying %d * %d" % (a, b)
    return a * b

def divide(self, a, b):
    if b == 0:
        print "Error"
        exit(1)
    else:
        print "Dividing %d / %d" % (a, b)
        return a / b

def get_result(self, a, b, operator):
    operation = {
        "+" : self.add(a, b),        # I didn't mean to call these methods,
        "-" : self.subtract(a, b),   # but it seems that they ran.
        "*" : self.multiply(a, b),
        "/" : self.divide(a, b),
    }
    print operation[operator]

if __name__ == "__main__":
    print "Please input a number:"
    numA = int(raw_input(">"))

    print "Please input a operator(i.e. + - * /):"
    operator = raw_input(">")

    print "Please input another number:"
    numB = int(raw_input(">"))

    calc = Calculation()
    #print calc.add(numA, numB)
    calc.get_result(numA, numB, operator) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T08:59:50.093

你说你并不是要调用这些方法。但你做到了。你写

```
self.add(a, b) 
```

并且调用，`add`因为它使用 call operator `()`。在填充字典时，您正在调用每个算术运算符方法。

如果要捕获该方法而不是调用它，则需要将其`self.add`放入`dict`.

然后，当您确实想调用该方法时，您可以这样做：

```
print operation[operator](a, b) 
```

此时我们正在使用调用运算符`()`并提供参数。

综上所述，您的函数如下所示：

```
def get_result(self, a, b, operator):
    operation = {
        "+" : self.add,      
        "-" : self.subtract, 
        "*" : self.multiply,
        "/" : self.divide,
    }
    print operation[operator](a, b) 
```

由于`dict`never 变化，将其设为类属性并仅初始化一次可能更明智。

在我看来，您的实例在这里没有多大用处。你不是指`self`任何地方。这表明这些方法作为[静态方法](https://stackoverflow.com/questions/735975/static-methods-in-python)可能会更好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T09:01:21.990

改为这样做：

```
def get_result(self, a, b, operator):
    operation = {
        "+" : self.add,
        "-" : self.subtract,
        "*" : self.multiply,
        "/" : self.divide,
    }
    print operation[operator](a, b) 
```

`(a, b)`请注意在创建字典后实际的方法调用 (with ) 是如何移动到的。按照您的方式，您调用每个方法并将*结果*存储在字典中，而不是存储方法然后只调用您想要的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T09:03:06.267

以下代码：

```
operation = {
    "+" : self.add(a, b),        # I didn't mean to call these methods,
    "-" : self.subtract(a, b),   # but it seems that they ran.
    "*" : self.multiply(a, b),
    "/" : self.divide(a, b),
} 
```

将热切地评估所有值，因为这就是 python 的工作方式。你想做：

```
operation = {
    "+" : self.add,
    "-" : self.subtract,
    "*" : self.multiply,
    "/" : self.divide,
} 
```

然后调整其余代码以仅调用适当的方法。

如果您想以您的原始风格进行编码，您需要一种具有惰性求值语义的语言，例如 haskell。

# mysql - EXPLAIN 打印中的额外内容 - '在阅读 const 表后不可能注意到 WHERE'

> ID：14953408
> 
> 赞同：8
> 
> 时间：2013-02-19T08:57:06.900
> 
> 标签：mysql, explain

我有一个名为“million_words”的简单表格。它有一行两列-> id INT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY & word VARCHAR(50 NOT NULL.

我运行此查询-：`EXPLAIN SELECT * FROM million_words WHERE word = '-anon'`

该`Extra`列然后打印 : `'Impossible WHERE noticed after reading const tables`，即使该行清楚地存在于表中。

怎么了

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-19T09:11:55.160

**来自 MySQL 文档**：

“*在读取 const 表后注意到不可能的 WHERE* ”：
MySQL 已读取所有 const（和系统）表，并注意到 WHERE 子句始终为假。参考[**`this`**](http://dev.mysql.com/doc/refman/5.5/en/explain-output.html)

* * *

该表最多有一个匹配行，在查询开始时读取。**因为只有一行，所以这一行中列的值可以被优化器的其余部分视为常量**。const 表非常快，因为它们只被读取一次。

`PRIMARY KEY`将 a或的所有部分`UNIQUE index`与常量值进行比较时使用 const。参考[**`this`**](http://dev.mysql.com/doc/refman/5.5/en/explain-output.html#jointype_const)

# java - 在while循环中中断异常与isInterrupted

> ID：14953409
> 
> 赞同：3
> 
> 时间：2013-02-19T08:57:11.177
> 
> 标签：java, multithreading, concurrency, while-loop, interrupted-exception

假设我有以下代码：

```
while(!Thread.currentThread().isInterrupted()){  
    //do something   
    Thread.sleep(5000);  
} 
```

现在`Thread.sleep`抛出 `InterruptedException 所以它应该是这样的：

```
while(!Thread.currentThread().isInterrupted()){  
   //do something   
   try{  
     Thread.sleep(5000);    
   } catch(InterruptedException e){  

   }
} 
```

如果我点击循环`catch`会`while`继续还是我需要这样做`Thread.currentThread().interrupt()`？如果我确实调用此方法，那是否也会导致`InterruptedException`？否则我一开始是怎么得到异常的？

另外，如果我有：

```
while (!Thread.currentThread().isInterrupted()){  
   //do something   
   callMethod();  
}  

private void callMethod(){  
   //do something  
   try {  
     Thread.sleep(5000);    
   } catch(InterruptedException e){  

   }
} 
```

我的`while`循环会再次中断吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T09:03:30.377

实际上，您的问题`try - catch - finally` 不仅仅是关于多线程。

1）如果`sleep`抛出一个`Exception`，该`catch`块将执行，然后`while`循环继续。

2）你做的事情与1）完全相同

要离开`while`循环，请执行以下操作：

```
try{  
   while(!Thread.currentThread.isInterrupted){  
       //do something   
       Thread.sleep(5000);    
   }  
}
catch(InterruptedException e){  

} 
```

在这种情况下，如果`Exception`抛出 an ，`while`则离开循环并`catch`执行块。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T09:29:55.240

`Thread.sleep()`投掷前会清除“中断状态” `InterruptedException`。你需要在catch块中调用，否则while条件很可能不会成功，因为线程在返回`Thread.currentThread().interrupt()`时总是“不被中断” 。`callMethod`

异常不是由`interrupt()`方法引起的，而是由于`sleep()`阻塞了已发出“已中断”信号的线程。[此处](http://www.ibm.com/developerworks/java/library/j-jtp05236/index.html)将对此进行更详细的说明。另请参阅[此答案](https://stackoverflow.com/questions/4906799/why-invoke-thread-currentthread-interrupt-when-catch-any-interruptexception)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-24T21:30:15.997

在线程上调用中断本身不会引发异常。设置中断标志时休眠或等待是引发 InterruptedException 的原因。

什么会抛出 InterruptedException 是完全可以预见的，因此被中断的线程可以控制并且可以选择如何响应。这是一个检查异常，所以很明显是什么引发了它。它不像 ThreadDeath，它可以扔到任何地方。

当抛出 InterruptedException 时，线程的中断状态被重置。如果您想恢复线程的中断状态，因为您想稍后检查标志并使其为真，请调用`Thread.currentThread().interrupt()`以设置它。

在中断期间不会发生任何异常情况来改变指令的处理方式。因此，如果您选择在循环中捕获 InterruptedException 并检查标志以退出，则需要重置标志：

```
while(!Thread.currentThread().isInterrupted()){  
   //do something   
   try{  
     Thread.sleep(5000);    
   } catch(InterruptedException e){  
        Thread.currentThread().interrupt();
   }
} 
```

或者，您可以使用 InterruptedException 退出循环：

```
try {
    while (!Thread.currentThread().isInterrupted()) {
        // do something
        Thread.sleep(5000);
    }
} catch (InterruptedException e) {
    // flag value is not used here, but still good style
    Thread.currentThread().interrupt(); 
} 
```

如果这最后一个片段是被中断线程的整个运行方法，则无需再次设置中断状态即可过关，但如果您有其他部分正在使用的组件，您不希望一个行为不良的部分压制被中断的部分标记以便线程中的其他代码不知道中断。

# java - 在带有 Spring 3.2 的 Hibernate 4 上使用 sessionfactory 时出现空指针错误

> ID：14953410
> 
> 赞同：0
> 
> 时间：2013-02-19T08:57:14.887
> 
> 标签：java, spring, hibernate, java-ee-6, jboss7.x

我正在努力找出确切的问题，为什么当我尝试从 spring bean xml 自动连接 sessionFactory 时，会为 Hibernate sessionFactory 引发空指针错误。有人可以帮我解决这个问题。我是 Spring 新手并在 Jboss 服务器上部署应用程序

这是 Spring-Config.xml

```
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:c="http://www.springframework.org/schema/c"
    xmlns:context="http://www.springframework.org/schema/context" xmlns:p="http://www.springframework.org/schema/p"
    xmlns:tx="http://www.springframework.org/schema/tx"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.2.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.2.xsd http://www.springframework.org/schema/tx
http://www.springframework.org/schema/tx/spring-tx-3.2.xsd">

    <context:annotation-config />
    <context:component-scan base-package="org.kp.db.dao.impl" />

    <bean id="myDataSource"
        class="org.springframework.jdbc.datasource.DriverManagerDataSource">
        <property name="driverClassName" value="com.mysql.jdbc.Driver" />
        <property name="url" value="jdbc:mysql://localhost:3306/ebm" />
        <property name="username" value="root" />
        <property name="password" value="root" />
    </bean>

    <bean id="sessionFactory"
        class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
        <property name="dataSource" ref="myDataSource" />
        <property name="configLocation" value="classpath:/hibernate.cfg.xml" />
    </bean>

    <tx:annotation-driven  transaction-manager="transactionManager" />

    <bean id="transactionManager"
        class="org.springframework.orm.hibernate4.HibernateTransactionManager">
        <property name="sessionFactory" ref="sessionFactory"></property>
    </bean>
</beans> 
```

这是我放在 webcontent 文件夹中的 Hiberante.cfg.xml

```
<!DOCTYPE hibernate-configuration PUBLIC "-//Hibernate/Hibernate Configuration DTD 3.0//EN" "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">
<hibernate-configuration>
  <session-factory>
    <property name="hibernate.dialect">org.hibernate.dialect.MySQLDialect</property>
    <property name="hibernate.connection.driver_class">com.mysql.jdbc.Driver</property>
    <property name="hibernate.connection.url">jdbc:mysql://localhost:3306/ebm</property>
    <property name="hibernate.connection.username">root</property>
    <property name="hibernate.connection.password">root</property>
    <property name="cache.provider_class">org.hibernate.cache.NoCacheProvider</property>
    <property name="hibernate.show_sql">true</property>
    <property name="hibernate.hbm2ddl.auto">update</property>
    <mapping resource="org/kp/db/model/Actioncode.hbm.xml"/>
    <mapping class="org.kp.db.model.TblEBMFieldDetails"/>
    <mapping class="org.kp.db.model.TbleOLI"/>
  </session-factory>
</hibernate-configuration> 
```

我试图访问 sessionFactory 的 DAO 类是

```
package org.kp.db.dao.impl;

import org.hibernate.Session;
import org.hibernate.SessionFactory;
import org.kp.db.dao.ActionCodeDao;
import org.kp.db.model.Actioncode;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Repository;
import org.springframework.transaction.annotation.Propagation;
import org.springframework.transaction.annotation.Transactional;

/**
 *
 * @author Administrator
 */
@Repository
public class ActionCodeDaoImpl implements ActionCodeDao{

    @Override
    public String[] getActionCodes() {
        throw new UnsupportedOperationException("Not supported yet.");
    }

    @Autowired(required=true)
    SessionFactory sessionFactory;

    public SessionFactory getSessionFactory() {
        return sessionFactory;
    }

    public void setSessionFactory(SessionFactory sessionFactory) {
        this.sessionFactory = sessionFactory;
    }

    @Override
    @Transactional(readOnly=true,propagation=Propagation.REQUIRED)
    public String getActionCode(int id) {

        //ApplicationContext context;

        Session  session = sessionFactory.getCurrentSession();
        Actioncode actionCode=null;
        actionCode = (Actioncode)session.get(Actioncode.class, 1);

        return actionCode.getActionName();
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T15:14:52.920

我已经解决了这个问题，而不是访问我使用 getter 方法的对象并且它有效，但不确定它背后的真正概念是什么。

```
public String getActionCode(int id) {

    //ApplicationContext context;

    Session  session = getSessionFactory().getCurrentSession();
    Actioncode actionCode=null;
    actionCode = (Actioncode)session.get(Actioncode.class, 1);

    return actionCode.getActionName();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T17:30:15.063

```
@Named ("kpAction") 
public class Actions { 
    public String getActionCode() { 
        ActionCodeDao action =new ActionCodeDaoImpl(); 
        String str = action.getActionCode(1); System.out.println(str); return str; 
    } 
} 
```

当您运行这行代码时：`ActionCodeDao action =new ActionCodeDaoImpl();`您将获得一个不受 Spring 管理的对象，因此不会包含自动装配的依赖项。

我想说这就是你看到空指针的原因。

但是你说你现在已经修复了它，不确定你是否也无意中改变了它，如果不是我不确定你是如何修复它的:)

# sql - 选择值为 *** 的最新条目的 Id

> ID：14953415
> 
> 赞同：2
> 
> 时间：2013-02-19T08:57:27.613
> 
> 标签：sql, sql-server, stored-procedures

我需要获取包含值的条目的 ID。

这是我用过的：

```
SET @ValuationId = (SELECT ValuationId FROM dbo.Valuation WHERE ValuationPropertyId = @ValuationPropertyId) 
```

上面的问题是它选择了多个值，我可以用什么来让它选择最新的值？

这是我收到的错误消息：

> 消息 512，级别 16，状态 1，过程 GetLatestValuationOfPropIdThenCallUpdateComparibleSalesInfo，第 15 行子查询返回超过 1 个值。当子查询跟随 =、!=、<、<=、>、>= 或子查询用作表达式时，这是不允许的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T08:58:10.380

利用`MAX()`

```
SET @ValuationId = (SELECT MAX(ValuationId) 
                    FROM   dbo.Valuation
                    WHERE  ValuationPropertyId = @ValuationPropertyId) 
```

或者

```
SET @ValuationId = (SELECT TOP 1 ValuationId
                    FROM   dbo.Valuation
                    WHERE  ValuationPropertyId = @ValuationPropertyId
                    ORDER  BY ValuationId DESC) 
```

# java - Android：在 HTTP Post 请求中使用 Cookie

> ID：14953418
> 
> 赞同：3
> 
> 时间：2013-02-19T08:57:39.763
> 
> 标签：java, android, cookies, httpclient

我在通过我的服务器进行身份验证时遇到了一些问题。

当我手动尝试通过 Postman 等 Google 插件设置 cookie 时，它​​可以工作，但通过 android 设备或模拟器完成时不起作用。

这是我的那部分代码：

```
String url = "www.thisismyendpoint.com";
String ci_session = "ci_session=token";

CookieStore cookieStore = new BasicCookieStore();
BasicClientCookie stdCookie = new BasicClientCookie("Cookie",ci_session);
cookieStore.addCookie(stdCookie);
DefaultHttpClient httpClient = new DefaultHttpClient();
HttpContext localContext = new BasicHttpContext();

localContext.setAttribute(ClientContext.COOKIE_STORE,
        cookieStore);
HttpPost httppost = new HttpPost(url);

HttpResponse response = httpClient.execute(httppost, localContext); 
```

这是我在 logcat 中的回复：

```
02-19 16:43:47.149: D/response(27539): response: <div style="border:1px solid             #990000;padding-left:20px;margin:0 0 10px 0;">
02-19 16:43:47.149: D/response(27539): <h4>A PHP Error was encountered</h4>
02-19 16:43:47.149: D/response(27539): <p>Severity: Notice</p>
02-19 16:43:47.149: D/response(27539): <p>Message: Undefined index: ci_session</p>
02-19 16:43:47.149: D/response(27539): <p>Filename: controllers/test.php</p>
02-19 16:43:47.149: D/response(27539): <p>Line Number: 28</p>
02-19 16:43:47.149: D/response(27539): </div> 
```

难道我做错了什么？我也尝试将 ci_session 设置到标题中，但同样它不起作用。请指教。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T09:05:51.287

我遇到了类似的问题。您不应该`DefaultHttpClient`为每个新请求创建一个新请求。相反，请使用静态单例并将其用于所有 Http 请求需求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T09:13:19.137

你确定cookie设置正确吗？
就我而言，我使用 HttpGet 并手动设置 cookie：

```
HttpGet httpGet = new HttpGet(url);
httpGet.addHeader("Cookie", cookie); 
```

cookie 存储在 sharedPreferences 中。应该像我想的那样为 HttpPost 工作。

# ruby-on-rails - 太阳黑子搜索

> ID：14953430
> 
> 赞同：1
> 
> 时间：2013-02-19T08:58:31.170
> 
> 标签：ruby-on-rails, ruby-on-rails-3, sunspot, sunspot-rails

我知道我刚才有这个搜索功能，但一直在用引导程序重做我的搜索和导航栏，现在看起来不错，但搜索功能不起作用！我认为这是索引操作中的内容？它所做的只是，好吧，什么都没有。也许它没有提交表格？- 我怎样才能检查这个？

**视图** *guidelines_controller.rb*

```
 def index
    @guidelines = Guideline.order(:title).all

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @guidelines }
    end
    @search = Sunspot.search(Guideline) do  
    fulltext params[:search]  
  end  
  @guidelines = @search.results 
  end 
```

*布局/application.html.erb*

```
<%= form_tag guidelines_path, :class => 'navbar-search', :method => :get do %>  

    <%= text_field_tag :search, params[:search], :class => 'search-query', :placeholder=>"Search" %> 
```

**模型** *指南.rb*

```
searchable do
    text :title, :default_boost => 2
    text :subtitle
  end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T10:05:21.423

我不是太阳黑子专家，但你的控制器方法有点奇怪。为什么在调用 Sunspot 之前渲染视图？

此外，为什么要获取所有指南行 (Guideline.order(:title).all) ？

如果给定搜索条件 (params[:search])，我已经重构了您的方法，假设您想使用 Sunspot 进行搜索。否则将获取所有行。

```
def index
  if params[:search].present?
    @search = Sunspot.search(Guideline) do  
      fulltext params[:search]
    end

    @guidelines = @search.results
  else
    @guidelines = Guideline.order(:title).all
  end

  respond_to do |format|
    format.html # index.html.erb
    format.json { render json: @guidelines }
  end
end 
```

*顺便说一句，如果 Guideline 模型包含很多行，您应该考虑限制行数（限制或分页）。*

**编辑**

这是关于 Sunspot [#278 Search with Sunspot的截屏视频](http://railscasts.com/episodes/278-search-with-sunspot)

也许您忘记重新索引您的搜索引擎？

```
rake sunspot:reindex 
```

# c# - 去除非 ascii 字符，但允许使用货币符号

> ID：14953441
> 
> 赞同：3
> 
> 时间：2013-02-19T08:59:01.437
> 
> 标签：c#, regex, unicode, currency

我正在使用下面的正则表达式从字符串中删除所有非 ascii 字符。

```
String pattern = @"[^\u0000-\u007F]";
Regex rx = new Regex(pattern, RegexOptions.Compiled);
rx.Replace(data," "); 
```

但是，我想允许使用货币（英镑符号）和商标符号。

我已经修改了上面的正则表达式，如下所示，它对我有用。谁能确认正则表达式是否有效？

```
 String pattern = @"[^\u0000-\u007F \p{Sc}]"; 
```

**基本上，我也想允许所有货币符号。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T09:29:27.130

**是的，您的正则表达式是正确的。**

您对代码所做的是将正则表达式匹配的字符替换为空字符。

现在，您的正则表达式匹配哪些字符？

除了：

*   您指定的范围：`0000-007F`
*   货币符号字符：`\p{Sc}`. 见[http://regular-expressions.info/unicode.html#prop](http://regular-expressions.info/unicode.html#prop)

如果您只想继续允许其他一些字符，是的，您也可以添加它们（就像您使用`\p{Sc}`.

**编辑：**

以后做的时候要小心。正则表达式实际上是`[^\u0000-\u007F\p{Sc}]`（没有空格），尽管在这种情况下它并不重要，因为空格字符已经在 ASCII 范围内。

# html - 如何为热图创建强度遮罩？

> ID：14953444
> 
> 赞同：0
> 
> 时间：2013-02-19T08:59:11.453
> 
> 标签：html, gwt, colors, html5-canvas, heatmap

我正在尝试开发热图，现在最初我必须绘制强度蒙版，并且由于我使用的是 GWT，所以我随机生成了一些坐标并将我的圆圈（具有所需的梯度）放置在这些位置，所以输出来了出来是相互重叠的圆圈。如果我看一下[Dylan Vester](http://dylanvester.com/post/Creating-Heat-Maps-with-NET-20-%28C-Sharp%29.aspx)的强度遮罩，它会变得非常平滑如何绘制我的热图？另外如何实现类似于 Dylan Vester 的输出？问题也是如果我正在画圆圈，那么如何确定两个或更多圆圈相交处的强度，它们是如何实现的？这是我的代码

```
// creating the object for the heat points
        Heat_Point x = new Heat_Point();

    // Variables for random locations
        int Min = 1,Max = 300;
        int randomx,randomy;

    // Generating set of random values
        for( int i = 0 ; i < 100 ; i++ ) {

            // Generating random x and y coordinates
                randomx = Min + (int)(Math.random() * ((Max - Min) + 1));
                randomy = Min + (int)(Math.random() * ((Max - Min) + 1));

            // Drawing the heat points at generated locations 
                x.Draw_Heatpoint(c1, randomx, randomy);

        } 
```

这就是我如何绘制我的热点，即 Heat_Point 类

```
Context con1 = c1.getContext2d(); // c1 is my canvas
CanvasGradient x1;
x1 = ((Context2d) con1).createRadialGradient(x,y,10,x,y,20);
x1.addColorStop(0,"black");
x1.addColorStop(1,"white");
((Context2d) con1).beginPath();
((Context2d) con1).setFillStyle(x1);
((Context2d) con1).arc(x,y,20, 0, Math.PI * 2.0, true);
((Context2d) con1).fill();
((Context2d) con1).closePath();` 
```

在这里我应该添加一些图像，但我没有足够的声誉：D：P

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T04:24:42.137

我快速浏览了 HeatmapJS（[http://www.patrick-wied.at/static/heatmapjs/](http://www.patrick-wied.at/static/heatmapjs/)），他似乎使用了径向渐变（就像你上面所说的那样），他还使用了不透明度和一个名为“乘法”的颜色过滤器blend”以平滑热图中颜色的强度。

他的代码令人印象深刻。它是开源的，所以你可能想检查一下！

# asp.net-mvc - SelectList 选定值

> ID：14953447
> 
> 赞同：1
> 
> 时间：2013-02-19T08:59:22.357
> 
> 标签：asp.net-mvc

**最终解决方案：**

```
public class UpdateUser
{
    public IEnumerable<string> SelectedRoles { get; set; }
    public IEnumerable<SelectListItem> DropDownRoles { get; set; }
} 
```

...

```
var roles = context.Roles.Select(x => x.RoleName).ToList();
UpdateUser userToUpdate = new UpdateUser
{
    SelectedRoles = user.Roles.Select(x => x.RoleName),
    DropDownRoles = new SelectList(roles, user.Roles)
}; 
```

**HTML**

```
@Html.ListBoxFor(x => x.SelectedRoles, Model.DropDownRoles) 
```

==========================

我有一个下拉列表来显示用户角色，如下所示：

**HTML**

```
 @Html.TextBoxFor(x => x.Roles)
    @Html.DropDownList( "roles", ViewData["roles"] as SelectList) 
```

**控制器**

```
var user = context.Users.Include(x => x.Roles).Where(x => x.UserId == id).FirstOrDefault();
ViewData["roles"] = new SelectList(context.Roles, "RoleId", "RoleName"); 
```

问题是我不知道如何在下拉菜单中设置选定的值。我想也许我可以使用 Lambda 表达式将匹配的角色放在列表的顶部，然后按字母顺序排列其余的角色。

```
 var roles = context.Roles
            .ToList()
            .OrderBy( ? matching role then other selectable roles ?) 
```

必须是更简单的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T09:04:01.023

不要使用与 ViewData 键和下拉列表的选定值相同的值。试试这样：

```
@Html.DropDownList("selectedRole", ViewData["roles"] as SelectList) 
```

然后您的 POST 控制器操作可以将此作为参数：

```
[HttpPost]
public ActionResult Index(string selectedRole)
{
    ...
} 
```

如果您的表单中有其他字段，您可以将它们分组到视图模型中：

```
public class MyViewModel
{
    public string SelectedRole { get; set; }
    public string SomeOtherField { get; set; }
} 
```

然后让您的控制器操作将此视图模型作为参数。现在你有了一个视图模型，让我们充分利用它并摆脱可怕的弱类型`ViewData`：

```
public class MyViewModel
{
    public string SelectedRole { get; set; }
    public IEnumerable<SelectListItem> Roles { get; set; }

    public string SomeOtherField { get; set; }
    public string YetAnotherField { get; set; }
} 
```

然后您可以让 GET 操作填充此视图模型：

```
public ActionResult Index()
{
    var model = new MyViewModel();
    model.Roles = new SelectList(context.Roles, "RoleId", "RoleName");
    return View(model);
}

[HttpPost]
public ActionResult Index(MyViewModel model)
{
    ...
} 
```

然后您的视图可以被强输入到视图模型：

```
@model MyViewModel
@using (Html.BeginForm())
{
    ...
    @Html.DropDownListFor(x => x.SelectedRole, Model.Roles)
    ...
    <button type="submit">OK</button>
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-11T10:21:07.910

达林的回答是完整而清晰的，它对我的​​搜索有所帮助。但是，我只需要为强类型视图再添加一个。在我的项目中，我为特定用户填充了具有特定角色的 SelectList。这些角色已存储在数据库中。编辑（更改包括此角色在内的用户属性）时，我希望将最初配置的角色显示为**所选**值。

为此，只需通过调整视图的另一件事来完成 Darin 他的答案（我省略了我自己的模型，但它几乎与您从示例中得出的相同）：

```
model MyViewModel
@using (Html.BeginForm())
{
    ...
    @{
      var selectedItem = Model.Roles.Where(role => role.Value.AsInt().Equals(...).FirstOrDefault();
      var selectedText = selectedItem != null ? selectedItem.Text : null; 
      Html.DropDownListFor(x => x.SelectedRole, Model.Roles, selectedText)
    }

    ...
    <button type="submit">OK</button>
} 
```

[如此处所述，](http://msdn.microsoft.com/en-us/library/ee703561%28v=vs.108%29.aspx) selectedText 被视为optionLabel **，**它将始终将当前选定的值放在下拉列表中。

也许有点晚了，但我确实希望它可以帮助其他人:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T09:04:31.193

`SelectList`包含一个对象列表，`SelectListItem`每个对象都有一个`Selected`属性。因此，您可以执行以下操作：

```
var user = context.Users.Include(x => x.Roles).Where(x => x.UserId == id).FirstOrDefault();
var temp = new SelectList(context.Roles, "RoleId", "RoleName");
temp.First(x => x.Value.Equals(IdOfSelectedObject)).Selected = true;
ViewData["roles"] = temp; 
```

# sql-server - SQL Server - 由于“ARITHABORT”，插入失败

> ID：14953450
> 
> 赞同：10
> 
> 时间：2013-02-19T08:59:35.940
> 
> 标签：sql-server, sql-server-2005, calculated-columns, database-indexes

我使用 NHibernate 和 SQL Server 2005，并且在我的一个表中的计算列上有一个索引。

我的问题是，当我在该表中插入一条记录时，出现以下错误：

> *INSERT 失败，因为以下 SET 选项的设置不正确：'ARITHABORT'*

我`SET ARITHABORT ON;`在插入之前使用，但仍然有这个错误。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-19T09:40:31.727

对于具有计算列的表上的插入，您需要以下设置选项：

NUMERIC_ROUNDABORT 选项必须设置为 OFF，并且以下选项必须设置为 ON：

```
ANSI_NULLS
ANSI_PADDING
ANSI_WARNINGS
ARITHABORT
CONCAT_NULL_YIELDS_NULL
QUOTED_IDENTIFIER 
```

尝试在插入之前添加：

```
set NUMERIC_ROUNDABORT off
set ANSI_NULLS, ANSI_PADDING, ANSI_WARNINGS, ARITHABORT, CONCAT_NULL_YIELDS_NULL, QUOTED_IDENTIFIER on

insert ... 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-09-17T03:35:39.217

我今天遇到了这个问题并得到了解决。

**我在sql server 2008 r2**的列上创建了过滤索引，但插入时会出现此错误。

我看到这个问题没有完全回答，因为`SET ARITHABORT ON`每次插入都可能很乏味。

我发现一个博客显示问题出在数据库兼容性级别。我将兼容级别从**80** (2000) 更改为**100** (2008)，问题就解决了。不确定将兼容性级别更改为 90 是否可以解决此问题，但值得一试。

SQL Server 兼容性级别和要在此处更改的命令。[http://msdn.microsoft.com/en-us/library/bb510680.aspx](http://msdn.microsoft.com/en-us/library/bb510680.aspx)

如果这不起作用或者您无法更改兼容模式，还有另一种解决方法，方法是在我在这里谈论的博客中添加触发器[http://chrismay.org/2013/05/23/interesting-problem- with-sql-server-arithabort-filtered-indexes-calculated-columns-and-compatibility-mode-of-80/](http://chrismay.org/2013/05/23/interesting-problem-with-sql-server-arithabort-filtered-indexes-calculated-columns-and-compatibility-mode-of-80/)

请注意，此更改是在测试数据库上完成的，在生产中进行此类更改之前，应测试所有应用程序。在更改之前，请确保您的 DBA 可以这样做。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-11T06:50:46.353

打开 SQL Server Mgt Studio，右键单击服务器名称，选择属性，打开连接选项卡，然后检查算术中止选项

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-07-22T02:51:33.487

我在从应用程序执行存储过程（更新记录）时也遇到了这个错误，这解决了我的问题： https: [//support.microsoft.com/en-us/kb/305333](https://support.microsoft.com/en-us/kb/305333)

所以基本上，我在执行我的存储过程之前添加了这组代码

```
sqlConn = New SqlConnection(connectionString)
If sqlConn.State = ConnectionState.Closed Then sqlConn.Open()

sqlCmd = New SqlCommand()
With sqlCmd
   .Connection = sqlConn
   .CommandType = CommandType.text
   .CommandText = "SET ARITHABORT ON"
   .ExecuteNonQuery()

   .CommandType = CommandType.StoredProcedure
   .CommandText = "MY PROCEDURE"
   .ExecuteNonQuery()
End With 
```

希望这可以帮助某人。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-13T20:49:05.903

您可以更改数据库选项，因此 SET 选项是全局可用的

```
 ALTER DATABASE [$(DatabaseName)]
        SET ANSI_NULLS OFF,
            ANSI_PADDING OFF,
            ANSI_WARNINGS OFF,
            ARITHABORT OFF,
            CONCAT_NULL_YIELDS_NULL OFF,
            NUMERIC_ROUNDABORT OFF,
            QUOTED_IDENTIFIER OFF 
        WITH ROLLBACK IMMEDIATE; 
```

# asp.net - Firefox 和 ASP.NET - 转义脚本中的引号

> ID：14953452
> 
> 赞同：1
> 
> 时间：2013-02-19T08:59:41.387
> 
> 标签：asp.net, firefox

当我使用以下内容时，Firefox 会更改我的脚本：

```
txtEmail.Attributes.Add("onfocus", "GetNewAccountHelp('email');") 
```

Chrome、IE 和 Safari 都没有问题，但 Firefox 输出如下：

```
 <i>
   <input name="txtEmail" type="text" id="txtEmail" class="textboxBlack" 
       onfocus="GetNewAccountHelp(& #39;email& #39;);" />
 </i> 
```

我试过双引号 - 同样的问题。
火狐版本：`Firefox/10.0.2`

我应该以一种奇怪的方式转义引号 - 还是？

亲切的问候
  托马斯·马蒂森

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T09:16:15.447

应该是这样的

```
txtEmail.Attributes.Add("onfocus", "GetNewAccountHelp(email)"); 
```

接着

```
<script>
  function GetNewAccountHelp(obj) {
      //todo
  }
</script> 
```

# java - 如何处理等待（）通知（）？

> ID：14953453
> 
> 赞同：0
> 
> 时间：2013-02-19T08:59:44.713
> 
> 标签：java, multithreading, performance, exception, concurrency

在这里，我有两个应该相互同步的运行方法。

轮询类：

```
 */
public void run() {
    int seqId = 0;
    while(true) {
    List<KpiMessage> list = null;

        try{
            if(!accumulator.isUsed){                
                try {
                    list = fullPoll(seqId);

                    if (!list.isEmpty()) {
                        seqId = list.get(0).getSequence();
                        accumulator.manageIngoing(list);
                    }
                    System.out.println("Updated");                      
                    wait(); 
                } catch (Exception e1) {
                    e1.printStackTrace();

                }
            }

        } catch (Exception e){
            // TODO:
            System.err.println(e.getMessage());
            e.printStackTrace();                
        }
    }

}

/**
 * Method which defines polling of the database and also count the number of Queries
 * @param lastSeq 
 * @return pojo col
 * @throws Exception
 */
public List<KpiMessage> fullPoll(int lastSeq) throws Exception {
    Statement st = dbConnection.createStatement();
    System.out.println("Polling");
    ResultSet rs = st.executeQuery("Select * from msg_new_to_bde where ACTION = 814 and 
    STATUS = 200 order by SEQ DESC");
    List<KpiMessage> pojoCol = new ArrayList<KpiMessage>();
    try {

        while (rs.next()) {
            KpiMessage filedClass = convertRecordsetToPojo(rs);
            pojoCol.add(filedClass);
        }

        for (KpiMessage pojoClass : pojoCol) {
            System.out.print(" " + pojoClass.getSequence());
            System.out.print(" " + pojoClass.getTableName());
            System.out.print(" " + pojoClass.getAction());
            System.out.print(" " + pojoClass.getKeyInfo1());
            System.out.print(" " + pojoClass.getKeyInfo2());
            System.out.print(" "+ pojoClass.getStatus());
            System.out.println(" " + pojoClass.getEntryTime());

        }

    } finally  {
        try {
            st.close();
            rs.close();
        } catch (Exception e) {
            System.err.println(e.getMessage());
            e.printStackTrace();
        }
    } 
```

处理和更新类：

```
 public void run() {
    while(true){
        try {
            while(!accumulator.isUsed)
            {
                try {
                System.out.println("Waiting for new outgoingmessages"); 
                    this.wait();
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
            }
     Collection<KpiMessage> outgoingQueue = generate(accumulator.outgoingQueue); 
            accumulator.manageOutgoing(outgoingQueue, dbConnection);
        } catch (Exception e) {
            System.err.println(e.getMessage());
            e.printStackTrace();
        }
    }
}
} 
```

我有一个逻辑错误：

轮询器不仅轮询新消息，而且从第一个开始一次又一次地读取数据库。

也是一次又一次的更新。

**如何解决这个同步问题**。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T09:01:07.067

您应该为您正在调用或在其上的对象**同步**或更确切地说**持有锁或监视器**。`wait()``notify()`

以下是对您有帮助的：[wait() throwing IllegalArgumentException](https://stackoverflow.com/questions/1537116/illegalmonitorstateexception-on-wait-call)

```
synchronized(lockObject){

     lockObject.wait(); //you should hold the lock to be able to call wait()
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T09:11:38.180

或者，您可以使用 a`BlockingQueue`在线程之间传输数据。

有关详细信息，请参阅[阻塞队列](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/BlockingQueue.html)。

```
// The end of the list.
private static final Integer End = -1;

static class Producer implements Runnable {
  final Queue<Integer> queue;
  private int i = 0;

  public Producer(Queue<Integer> queue) {
    this.queue = queue;
  }

  @Override
  public void run() {
    try {
      for (int i = 0; i < 1000; i++) {
        queue.add(i++);
        Thread.sleep(1);
      }
      // Finish the queue.
      queue.add(End);
    } catch (InterruptedException ex) {
      // Just exit.
    }
  }
}

static class Consumer implements Runnable {
  final Queue<Integer> queue;
  private int i = 0;

  public Consumer(Queue<Integer> queue) {
    this.queue = queue;
  }

  @Override
  public void run() {
    boolean ended = false;
    while (!ended) {
      Integer i = queue.poll();
      if ( i != null ) {
        ended = i == End;
        System.out.println(i);
      }
    }
  }
}

public void test() throws InterruptedException {
  Queue queue = new LinkedBlockingQueue();
  Producer p = new Producer(queue);
  Consumer c = new Consumer(queue);
  Thread pt = new Thread(p);
  Thread ct = new Thread(c);
  // Start it all going.
  pt.start();
  ct.start();
  // Close it down
  pt.join();
  ct.join();
} 
```

# mysql - 带有 Join 语句的 Sql 更新

> ID：14953454
> 
> 赞同：1
> 
> 时间：2013-02-19T08:59:44.897
> 
> 标签：mysql, sql, join

我有两个表：第一个存储主要信息，第二个存储一些额外信息。我需要借助存储在第二个表中的一些数据来更新第一个表。

我的 SELECT 语句正在工作

```
SELECT  news.news_id, 
        news.title, 
        news.cat_id, 
        news.sub_cat_id, 
        news_extra.date_vision_tr
FROM news_extra
    JOIN news 
        ON news.news_id = news_extra.news_id
WHERE news.cat_id=1 AND sub_cat_id=5 AND news_extra.date_vision_tr < CURDATE() 
```

比我尝试这样的 UPDATE 语句

```
UPDATE news SET news.sub_cat_id=8 
FROM news
   INNER JOIN news_extra
        ON news.news_id = news_extra.news_id
WHERE news.cat_id=1 AND sub_cat_id=5 AND news_extra.date_vision_tr < CURDATE() 
```

但它不起作用。给出这个错误

> *您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在“FROM news INNER JOIN news_extra ON news.news_id = news_extra.news_id WHERE news.”附近使用正确的语法。在第 2 行*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T09:01:02.450

您使用的语法是 for `SQL Server`。

这是语法`MySQL`

```
UPDATE  news a
        INNER JOIN news_extra b
            ON a.news_id = b.news_id
SET     a.sub_cat_id = 8 
WHERE   a.cat_id = 1 and 
        sub_cat_id = 5 and 
        b.date_vision_tr < CURDATE() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T09:04:27.233

您必须更熟悉 SQL Server。您使用的语法将在 SQLServer 中工作。对于 MySQL：

```
UPDATE news
INNER JOIN news_extra
ON news.news_id = news_extra.news_id
SET news.sub_cat_id=8 
WHERE news.cat_id=1 and sub_cat_id=5 and news_extra.date_vision_tr < CURDATE() 
```

——试试这个方法。

[检查类似的线程](https://stackoverflow.com/questions/806882/update-multiple-tables-in-mysql-using-left-join)

# objective-c - 如何在 Objective-C 中正确编码“init”方法，防止“表达式结果未使用”警告

> ID：14953458
> 
> 赞同：1
> 
> 时间：2013-02-19T08:59:52.423
> 
> 标签：objective-c, init

我的教授给了我一个主要内容，我必须使用 Xcode 在 Objective-C 中制作 .h 和 .m 文件。我几乎完成了，但有两个警告我不知道如何摆脱，“未使用的表达式结果”。错误与我创建大小为 100 的数组的 init 方法有关。这里是 main 创建一个对象然后调用我不正确编码的方法的地方，这部分是我的老师给出的，我无法更改它：

```
//  main.m
//  ChutesAndLadders

#import <Foundation/Foundation.h>
#import "ChutesAndLadders.h"
int main(int argc, const char * argv[])
{   
    @autoreleasepool {

        ChutesAndLadders *cl = [[ChutesAndLadders alloc]init];
        [cl initBoard];
        [cl makeChutes:10];
        [cl makeLadders:10];

        int chutes=0; 
        int ladders=0;

        for(int i=0;i<cl.board.count;i++){
            NSString * cell = (NSString *)[cl.board objectAtIndex:i];
            int additionalSpaces = (int)[cl addToMove:cell];
            if(additionalSpaces>0)
                ladders++;
            else if (additionalSpaces<0)
                chutes++;
        }
        [cl printBoard];
    }
    return 0;
} 
```

这是我的方法的相关部分：**错误来自上面的“initBoard”方法和下面的“initWithCapacity”行。**我知道这两个警告描述的是同一个错误。下面的代码是我的，所以我可以更改它，与上面不同。

```
@synthesize board = _board;

-(id) initBoard
    if((self = [super init]){
        [board intiWithCapacity: 100];
        for(int i = 0; i < 100; i++){
            [board addObject:@""];       
        }
    }
return self;
} 
```

这是我在 .h 文件中声明“板”的相关代码：

```
@interface ChutesAndLadders : NSObject{
    @private

    NSMutableArray * board;
}
@property (readwrite, retain) NSMutableArray *board;

-(id) initBoard; 
```

我尝试了很多语法上的小改动，但无济于事。*请不要直接告诉我解决方案*，但我认为我只需要向正确的方向轻推或推动，一旦我知道解决方案，我将发布解决方案。

**伪解决方案：**

```
@synthesize board=board;

-(void) initBoard{
    _board = [board initWithCapacity: 100];
    for(int i =0; i < 100; i++){
        [_board addObject:@""];
    }
} 
```

这消除了其中一个警告，但我的程序运行不正常，所以我还有其他方法要做。虽然这个具体问题已经得到解决，但我对它现在的工作方式有了更好的了解。

**实际解决方案**

```
@synthesize board=_board;

-(void) initBoard{
    _board = [NSMutableArray arrayWithCapacity:100];
    for(int i =0; i < 100; i++){
        [_board addObject:@"   "];
    }
} 
```

这是最终根据[Hermann](https://stackoverflow.com/users/854396/hermann-klecker)工作的方法。我发誓我尝试过一次但它没有用，所以我一直在玩并改变一些东西（把它搞得更糟），然后最终又回到了这个，它当然奏效了。Xcode 的谎言有时会激怒我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T09:12:43.983

编辑因为起初我忽略了一些东西：

只需使用：

```
ChutesAndLadders *cl = [[ChutesAndLadders alloc]initBoard]; 
```

因为在 initBoard 中你`[super init]`无论如何都在打电话。

你的教授想欺骗你吗？不看所有代码就很难说。您正在合成具有 iVar _board 的属性板。这意味着您可以通过`self.board`or`[self board]`或分别访问它的 getter 或 setter `[self setBoard: ...]`。

但在 initBoard 方法中，它的访问方式不同：

```
[board intiWithCapacity: 100]; 
```

尽管我们看不到板实际分配在哪里，并且没有使用 initWithCapacity 方法的结果，但我问自己`board`实际上是什么。它不是属性（即 self.board 等），也不是 iVar（即`_board`）。显然只是`board`指您声明的私有 iVar。但

```
@synthesize board = _board; 
```

创建一个具有相同类型名称的 iVar `_board`(NSMutableArray*)。因此，在您的方法中，`board`不同于`_board`.

尽管我现在第三次编辑这个，我仍然没有得到它。.m 文件是老师给的，你必须创建一个匹配的 .h 文件，对吗？在这种情况下，你应该去

```
@private
NSMutableArray * _board; 
```

好吧，无论如何这都是自动完成的，但是用“_”编写它可以避免创建类似的命名 iVar，从而避免可能的错误。

背景 AFAIK：理论上甚至实际上 init 可能会创建一个与 alloc 创建的实例不同的实例。因此，您应该始终使用 init 的返回值。

一般来说——独立于围绕对象初始化的奇怪的objective-c符号——当一个方法返回一个值时，然后

```
[object method]; 
```

语法正确，运行良好，除返回值外的所有内容均未使用。这就是您的警告信息的全部内容。即使你将它分配给一个虚拟对象，比如

```
SomeClass *someObject = [object method]; 
```

你会得到'someClass'是一个未使用的变量的警告。

最后编辑：你快到了。但是，这是当前版本的 Obj-C 的快捷方式，不适用于旧版本：.h 文件：

```
@interface ChutesAndLadders : NSObject

@property (readwrite, retain) NSMutableArray *board;

-(void) initBoard;
@end 
```

.m 文件：

```
// omitting @synthesize forces the compiler to autosynthesize. In that case it is named "_board"

    -(void) initBoard
        _board = [NSMutableArray arrayWithCapacity: 100]; // this implies the alloc
        for(int i = 0; i < 100; i++){
            [_board addObject:@""];       
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T09:05:09.940

你正在返回一些你不使用的东西。还阅读了在 Objective-C 中编写正确的构造函数/初始化对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T09:16:04.733

正如赫尔曼所说，你应该这样做

```
ChutesAndLadders *cl = [[ChutesAndLadders alloc]initBoard]; 
```

然后在你的 initBoard 方法中

```
self.board = [NSMutableArray alloc] intiWithCapacity: 100]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-31T16:55:32.737

您没有遵循标准的 Objective-C 约定，这会让您陷入困境。

你有一个实例变量板。Objective-C 约定是所有实例变量都应该以下划线字符开头。

你有一个属性板，@synthesize board = _board。合成创建一个带有下划线字符的实例变量，名为 _board。现在你有两个实例变量：board 和 _board。其中之一，_board，是支持 board 属性的实例变量。另一个，董事会，与董事会财产完全无关。

然后在某个地方，你有一个看起来无害但致命的声明板 = 随便什么。分配给那个完全无用的实例变量板。不是_board，而是board。如果您编写了 _board，那么您将遵循 Objective-C 约定：使用高度可见的名称分配给实例变量。或 self.board 这将是财产。

而 [board initWithCapacity:100] 什么也没做。首先，因为 board 实例变量（与 board 属性或 _board 实例变量完全无关）尚未分配。是零。将 initWithCapacity 发送到 nil 什么也不做。将 addObject 发送到 nil 也无济于事。

# c# - 转换 IList 到绑定列表

> ID：14953461
> 
> 赞同：24
> 
> 时间：2013-02-19T08:59:59.710
> 
> 标签：c#, list, generics, casting, bindinglist

如何将`IList<Customer>`列表投射到`BindingList<Customer>`？

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2013-02-19T09:01:41.573

```
var yourList = new List<Customer>();
var listBinding = new BindingList<Customer>(yourList); 
```

[绑定列表构造函数](http://msdn.microsoft.com/en-us/library/ms132681.aspx)

您不需要进行强制转换，只需为`BindingList<T>`类构造函数提供`IList<T>`您拥有的 .

# json - 何时使用mustache.js 或backbone.js

> ID：14953462
> 
> 赞同：1
> 
> 时间：2013-02-19T09:00:06.990
> 
> 标签：json, api, rest, backbone.js, mustache

我想知道什么时候使用moustache.js（或类似的做js模板的东西）有用，什么时候可以使用backbone.js（它在里面使用js模板）

我有一个带有多个页面的网络应用程序，一个 json 应用程序，并且页面数据是通过 api 调用加载的，所以我一直在努力使用 mustache 来清理渲染，但我想知道骨干是否会改善我的案子

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T12:56:42.480

如前所述，它们确实服务于完全不同的目的。Mustache 是一个模板引擎，Backbone 将 MVC 范式带入了 Javascript。引用[Backbone 主页](http://backbonejs.org/)

> 在处理涉及大量 JavaScript 的 Web 应用程序时，您要学习的第一件事就是停止将数据绑定到 DOM。创建 JavaScript 应用程序太容易了，这些应用程序最终会变成一堆错综复杂的 jQuery 选择器和回调，它们都在疯狂地尝试保持 HTML UI、JavaScript 逻辑和服务器上的数据库之间的数据同步。对于富客户端应用程序，更结构化的方法通常很有帮助。

因此，如果您发现自己编写了大量的 DOM 操作调用等。或者您只是更喜欢结构化的代码方法 - 您会发现 Backbone 是天赐之物。

当然，也可以使用其他模板解决方案（与 Underscore 捆绑的解决方案除外）并将其集成到使用 Backbone 创建的客户端应用程序中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T07:21:42.487

两者可以一起使用，

要构建 Web 应用程序架构，您可以使用backbonejs。

要渲染模板，您可以使用 mustachejs。

首先学习两者的基础知识。你会很好地理解什么时候使用什么。

# silverlight - 如何使用 TemplateBinding 在 Silverlight 中设置 CustomControl 的大小？

> ID：14953463
> 
> 赞同：0
> 
> 时间：2013-02-19T09:00:10.117
> 
> 标签：silverlight, xaml, custom-controls, templatebinding

我正在开发一个 Silverlight CustomControl，它定义了一个名为`SpinnerSize`. 现在我想将`Border`默认模板内部的宽度和高度设置为`SpinnerSize`-property 使用`TemplateBinding`：

```
<Style TargetType="local:MyCustomControl">
    <Setter Property="SpinnerSize" Value="12" />
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="local:MyCustomControl">
                <Border 
                    Width="{TemplateBinding SpinnerSize}"
                    Height="{TemplateBinding SpinnerSize}"
                    Background="Red" />
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

上例中的`SpinnerSize`引用定义如下：

```
public static readonly DependencyProperty SpinnerSizeProperty = 
    DependencyProperty.Register(
        "SpinnerSize", 
        typeof(int), 
        typeof(MyCustomControl),
        new PropertyMetadata(default(int)));

public int SpinnerSize
{
    get { return (int)this.GetValue(SpinnerSizeProperty); }
    set { this.SetValue(SpinnerSizeProperty, value); }
} 
```

结果是我根本看不到边界。如果我手动将边框的宽度和高度设置为一个值，一切正常。

是`TemplateBinding`实现这一目标的有效方法，还是我必须`OnApplyTemplate()`在控件的 - 方法中手动设置宽度和高度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T19:58:09.907

您的 XAML 看起来不错，并且像这样使用 TemplateBinding 是有效的，因此问题一定出在您的 DependencyProperty 中。

高度和宽度是双倍的。Binding 引擎不处理隐式强制转换。

将您的 DP 更改为该类型，它应该可以正常工作。

# oracle - SQL 查询中返回的列的顺序（使用表连接）

> ID：14953472
> 
> 赞同：1
> 
> 时间：2013-02-19T09:00:30.163
> 
> 标签：oracle

我想知道是什么决定了 SQL 查询中返回的列的顺序。

例如，`SELECT * FROM SOMETABLE;`

```
SQ_ID   |BUS_TYPE   |VOIP     |LOCAL_PHONE
--------|-----------|---------|-------------
SQ000001|Business   |Y        |N 
```

我猜这个属性`COLUMN_ID`决定了这一点。例如，在表连接的情况下，`SELECT * FROM SOMETABLE LEFT JOIN OTHERTABLE USING (SOME_COL);`现在如何确定顺序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T09:35:52.823

如USER_TAB_COLUMNS 所示，列的顺序`SELECT * FROM some_table`由每列的顺序决定。`column_id`

列的顺序`SELECT * FROM some_table JOIN other_table`是每个表的所有列，从 FROM 子句后最左边的表开始。换句话说，这...

```
SELECT * FROM some_table JOIN other_table 
```

……相当于这个……

```
SELECT some_table.*, other_table.* FROM some_table JOIN other_table 
```

将该内部联接更改为 LEFT JOIN 或 RIGHT JOIN 不会更改投影。

* * *

这当然是理论上的。我们永远不应该`select *`在生产代码中使用。加入时使用表别名的显式列声明总是更安全。除了更好地表达意图之外，显式投影还可以保护我们的代码免受未来对表的更改，例如添加 LOB 列或列名，这会与连接表的列产生歧义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T09:03:45.377

您可以在 Select 语句中列出列的顺序：

```
SELECT SOME_COL, SOME_OTHER_COL
FROM SOMETABLE LEFT JOIN OTHERTABLE USING (SOME_COL) 
```

但是您也谈到了影响顺序的 ID 和一般的排序。所以我认为您也可能正在寻找 ORDER BY 来对行进行排序：

```
SELECT *
FROM SOMETABLE LEFT JOIN OTHERTABLE USING (SOME_COL)
ORDER BY SOME_COL 
```

在这种情况下也很方便的是别名的使用。特别是当两个表都有同名的列时：

```
SELECT s.some_col, o.some_col
FROM SOMETABLE s LEFT JOIN OTHERTABLE o ON(o.id = s.id)
ORDER BY o.SOME_COL 
```

在这种情况下，我使用 ON JOIN 语法，因为我发现在使用别名时这更直观，但它也应该与 USING 一起使用。

# excel - 从 VB 脚本调用宏

> ID：14953473
> 
> 赞同：2
> 
> 时间：2013-02-19T09:00:32.970
> 
> 标签：excel, vbscript, vba

您好我正在尝试使用以下 VB 脚本在 test.xls 中调用宏

```
Option Explicit

Dim returnVal 
returnVal = 0
WScript.Echo returnVal

Dim xlApp, xlBook

Set xlApp = CreateObject("Excel.Application")
Set xlBook = xlApp.Workbooks.Open("D:\test.xls", 0, True)
xlApp.Run "macro1"
xlBook.Close false
xlApp.Quit

Set xlBook = Nothing
Set xlApp = Nothing

WScript.Echo returnVal
''WScript.Quit returnVal 
```

test.xls 中定义的宏是：

```
Dim returnVal as Boolean
sub macro1()
   returnVal = 1
   Exit Sub
...
End Sub 
```

当我尝试运行 VB 脚本时，我得到一个值为 0 的弹出窗口（这是我在开始时所做的回声）。然后我再次得到一个值为 0 的弹出窗口。看起来宏中的值没有被返回。

我在哪里错了。

谢谢，莫妮卡

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T09:21:38.667

将宏定义为函数：

```
Function macro1()
    macro1 = 1
End Function 
```

然后获取值：

```
returnVal = xlApp.Run("macro1", "My Application") 
```

在此处查找更多示例：http:
[//support.microsoft.com/kb/306682](http://support.microsoft.com/kb/306682)

# javascript - 为什么这个作用域属性在链接功能中不可用

> ID：14953488
> 
> 赞同：1
> 
> 时间：2013-02-19T09:01:21.503
> 
> 标签：javascript, angularjs

我正在尝试创建一个指令，我需要一些额外的细节，这些细节必须作为元素的属性传递。

这些值是静态的。即：在父作用域中不会有任何作用域引用（它是一个布尔值）

在指令链接函数中，我需要这些属性可以在指令的链接函数中访问，但值是未定义的。

标记：

```
<div ng-app="myApp">
    <div ng-controller="MainCtrl">
        <div my-directive local-attr="attribute" local-ref="ref">
        </div>
    </div>
</div> 
```

JS：

```
var myApp = angular.module('myApp', []);

myApp.directive('myDirective', function(){
    return {
        scope: {
            localAttr:'@',
            localRef:'='
        },
        link: function(scope, iElement, iAttrs, controller) {
            console.log(scope.localAttr, scope.localRef);
        }
    };
});

myApp.controller('MainCtrl', ['$scope', function($scope){
    $scope.ref="reg"
}]); 
```

在这个演示中，我需要在链接函数中获取值`attribute`。`scope.localAttr`

演示：[小提琴](http://jsfiddle.net/arunpjohny/NDssU/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T09:51:04.783

如果值为 100% 静态，则可以使用`iAttrs.localAttr`（并且可以跳过 bind in `scope: {..}`）

如果值应该被插值（有`{{...}}`）你应该使用`iAttrs.$observe('localAttr', cb)`（你也可以跳过提到它`scope: {...}`）

如果您想对其他范围属性进行一些操作，您应该`$scope.watch('localAttr', cb)`.

甚至可以预期，在链接期间，范围可能无法完全构建。在有关链接函数的“范围”参数的 AngularJS 文档中，有

> *指令用于注册手表的范围。*

[http://docs.angularjs.org/guide/directive](http://docs.angularjs.org/guide/directive)

所以通常你只能注册观察者，而不能获取值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T09:45:44.570

我注意到这是 AngularJS 中的错误还是预期的行为，但是在执行链接函数时未设置 scope.localAttr。但是，如果您将：更改`console.log(scope.localAttr, scope.localRef);`为：`console.log(scope, scope.localAttr, scope.localRef);`并检查范围对象，您会看到 scope.localAttr 被设置，但这似乎是在调用链接函数之后发生的，因为链接函数内部的 scope.localAttr 是未定义的。

# c - 将令牌从数组传递到 strcmp

> ID：14953492
> 
> 赞同：1
> 
> 时间：2013-02-19T09:01:29.077
> 
> 标签：c, arrays, string, delimiter, tcc

我想要做的是用空格作为分隔符来分解用户输入，将这些部分复制到数组（`tokenAr`）中并比较`tokenAr[0]`（第一部分）是否等于`sHistory`。如果相等，则检查`tokenAr[1]`是否为“1”、“2”等的值，以执行输入到`history`数组中的相应命令。这是我尝试过的，但它崩溃了。我在 Windows x64 上使用 TCC。编辑：我忘了提到我两天前才开始学习 C。

EDIT2：我在调试器中运行程序，它已经提出了一个`Acces Violation(Segmentation Fault)`在线`if(strcmp(tokenArPtr[0],sHistory)==0)`

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int main(int argc, char *argv[])
{   
    int i=1; int j=1; int k=0;
    char history[100][100] = {0};
    char sKey[] = "exit";
    char sInput[100];
    char sHistory[]="history";

    do 
    {
        //gather user input
        printf ("hshell> ");
        fgets (sInput, 100, stdin);
        strcpy(history[i],sInput);
        i++;
        //END_gather user input

        //Tokenizing

        char delims[] = " ";
        char *tokenArPtr[5];
        char *result = NULL;

        result = strtok(sInput, delims);
        tokenArPtr[0] = result;

        while (result!=NULL)
        {
              puts(result);
              result= strtok(NULL, delims);
              tokenArPtr[k+1] = result;

              puts(tokenArPtr[k]);
              puts("=====");
              k++;
        }
         k=0;
        /*
        //END_Tokenizing

        if(strcmp(tokenArPtr[0],sHistory)==0)
        {   
            for(j=1;j<i;j++)
            {
                printf("%d. %s \n",j,history[j]);
            }
        }

        else if (strcmp (sKey,tokenArPtr[0]) != 0)
        {
            printf("\nCommand not found \n");
        }*/
     }while (strcmp (sKey,sInput) != 0);  
    return 0;
} 
```

编辑 3：我使用`result`变量而不是`tokenArPtr`直接使用变量，但是在调试时，我注意到数组的值没有被更新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T09:08:37.630

strtok 返回哪种类型？`char *`. tokenAr[k] 的类型是什么？`char`. strcmp 期望输入什么类型？`char *`和`char *`。tokenAr[0] 的类型是什么？`char`.

看到问题了吗？你应该。这`*`是相当重要的。

假设 tokenAr 被声明为`char *tokenAr[2];`，那么 tokenAr 可以存储多少`char *`个值？当 k 超过 2 时会发生什么？您需要确保不会溢出您的 tokenAr 数组。

`history`未初始化。使用未初始化的变量是未定义的行为。我建议初始化它，如下所示：`char history[100][100] = { 0 };`

你在看哪本书？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T09:09:05.730

在标记化时，循环将永远不会结束，因为测试是在永远不会改变的变量“结果”上......所以你最终会出现“tokenAr”的缓冲区溢出......修改你的代码以测试“tokenAr” .

编辑：并且 tokenAR 应该是一个数组......（我不知道它如何编译......）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T09:09:09.110

有很多问题......首先你应该包含 string.h 它将显示编译中的一些错误。

我相信主要问题在这里：

```
 char tokenAr[2];
        result = strtok(sInput, delims);
        while (result!=NULL)
        {
                tokenAr[k] = strtok(NULL, delims);
                k++;
        } 
```

tokenAr 应该是一个指针数组，而不是字符。你确定k永远不会超过2吗？断言将有助于调试。

# javascript - Gridview Javascript 函数中的服务器标记问题

> ID：14953498
> 
> 赞同：1
> 
> 时间：2013-02-19T09:01:44.570
> 
> 标签：javascript, asp.net, gridview

您好，我正在将 Javascript 函数与 Asp.net linkBut​​ton 绑定。
但我正面临调用Javascript函数功能的问题。

```
function AddToDatabase(url) {
     alert(url);
}

  <asp:LinkButton ID="lnkBtn" CommandName ="sendLink" runat="server" 
       OnClientClick='javascript:AddToDatabase("' <%# Eval("myUrl") %> '")'  
        CommandArgument='<%# Eval("myUrl") %>' Text='<%# Eval("myUrl") %>'>'
          <%# Eval("myUrl") %>'</asp:LinkButton> 
```

它显示错误服务器标签格式不正确。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T09:08:21.390

```
 <asp:LinkButton ID="lnkBtn" CommandName ="sendLink" runat="server" 
   OnClientClick='javascript:AddToDatabase(<%# Eval("myUrl") %>)'  
    CommandArgument='<%# Eval("myUrl") %>' Text='<%# Eval("myUrl") %>'>
   </asp:LinkButton> 
```

## 编辑 1

改变 OnClientClick 如下

```
 OnClientClick='<%# Eval("myUrl", "javascript:AddToDatabase({0});") %>' 
```

结合两者

```
 <asp:LinkButton ID="lnkBtn" CommandName ="sendLink" runat="server" 
            OnClientClick='<%# Eval("myUrl", "javascript:AddToDatabase({0});") %>' 
            CommandArgument='<%# Eval("myUrl") %>' Text='<%# Eval("myUrl") %>'>
  </asp:LinkButton> 
```

[将 Eval 参数传递给 ASPX 文件中的 JavaScript 函数的](https://stackoverflow.com/questions/1412857/passing-eval-parameter-to-a-javascript-function-from-aspx-file)参考

## 编辑 2

这是另一个链接
[Passing variables to javascript in onclientclick](https://stackoverflow.com/questions/12850327/passing-variables-to-javascript-in-onclientclick)
[将 rowindex 从 gridview item click 传递到 javascript 函数](https://stackoverflow.com/questions/13615886/passing-a-rowindex-from-gridview-item-click-to-javascript-function)

## 编辑 3

@moiz 帮助回答者的那个

```
 <asp:LinkButton ID="lnkBtn" CommandName ="sendLink" runat="server" 
        OnClientClick='<%# Eval("myUrl", "javascript:AddToDatabase(&#39;{0}&#39;);") %>' 
                 CommandArgument='<%# Eval("myUrl") %>' Text='<%# Eval("myUrl") %>'>
       '<%# Eval("myUrl") %>'
  </asp:LinkButton> 
```

# python - 使用 interp2d 或 scipy.interpolate.RectBivariateSpline 进行线性插值

> ID：14953499
> 
> 赞同：2
> 
> 时间：2013-02-19T09:01:44.250
> 
> 标签：python, numpy, scipy, linear-interpolation

我对 python 很陌生，想在常规网格中进行插值。首先，我用 interp2d 进行了尝试。这适用于大多数情况，但在某些情况下（唯一的区别是值）有一个警告，结果不符合预期。这是代码：

```
img=sys.argv[1]
latitude=np.loadtxt(img+'/'+'geolayer.Lat.txt')
longitude=np.loadtxt(img+'/'+'geolayer.Lon.txt')

n=int(sys.argv[2])

rows=int(sys.argv[3])
cols=int(sys.argv[4])

m=len(latitude)/n

#Latitude
column=latitude[:,0].reshape((m,n))
row=latitude[:,1].reshape((m,n))
val=latitude[:,2].reshape((m,n))

# create interpolation object
interp=interp2d(column,row,val)

# interpolate values
lattmp=interp(np.arange(cols),np.arange(rows))
lat=np.degrees(np.arctan(1.0067395*np.tan(np.radians(lattmp)))) 
```

这是我偶尔收到的警告：

```
Warning:     No more knots can be added because the number of B-spline coefficients
already exceeds the number of data points m. Probably causes: either
s or m too small. (fp>s)
    kx,ky=1,1 nx,ny=14,14 m=143 fp=0.000000 s=0.000000 
```

这是输入的样子：

```
In [174]: shape(column)
Out[174]: (13, 11)
In [175]: shape(row)
Out[175]: (13, 11)
In [176]: shape(val)
Out[176]: (13, 11) 
```

警告和无警告之间的唯一区别是 val 中的值。在阅读了几个线程之后，我也尝试了 scipy.interpolate.RectBivariateSpline：

```
ttt=scipy.interpolate.RectBivariateSpline(rr,cc,val,bbox=[0,4199, 0,4099],kx=1,ky=1)
lattmp=ttt(np.arange(cols),np.arange(rows))
In [181]: shape(cc)
Out[181]: (11,)
In [182]: shape(rr)
Out[182]: (13,)
In [183]: shape(val)
Out[183]: (13, 11) 
```

但我只得到这个：

```
In [170]: lattmp
Out[170]: 
array([[ NaN,  NaN,  NaN, ...,  NaN,  NaN,  NaN],
   [ NaN,  Inf,  Inf, ...,  Inf,  Inf,  Inf],
   [ NaN,  Inf,  Inf, ...,  Inf,  Inf,  Inf],
   ..., 
   [ NaN,  Inf,  Inf, ...,  Inf,  Inf,  Inf],
   [ NaN,  Inf,  Inf, ...,  Inf,  Inf,  Inf],
   [ NaN,  Inf,  Inf, ...,  Inf,  Inf,  Inf]]) 
```

谁能告诉我，我能做什么？

最好的问候，谢谢你，马蒂亚斯

# vb.net - 我的程序正在为数组中的所有对象赋值。发生了什么，我该如何预防？(VB 2008)

> ID：14953501
> 
> 赞同：0
> 
> 时间：2013-02-19T09:01:57.823
> 
> 标签：vb.net

我已经用尽了所有选择，并且非常渴望帮助，因为我无法弄清楚代码中的错误在哪里，或者是否有我不明白的地方。

我正在尝试创建一个“我认为它是黄鼠狼！” 模仿理查德·道金斯 80 年代后期关于进化的纪录片。目标是通过遗传算法取得进展，直到算法通过变异和适应度锦标赛猜出正确答案。

现在，问题来了：

```
 Private Function fitnessTourney(ByVal editGuess() As Guess, ByVal popIndex As Integer, ByVal tourneySize As Integer, ByVal popNum As Integer)
    Dim randInt(tourneySize - 1) As Integer
    Dim loopCount1 As Integer = 0
    Dim fitnessWinner As New Guess
    fitnessWinner.setFitness(-50) 
```

...而且，这个循环是我遇到严重错误的地方...

```
 For i = 0 To tourneySize - 1
        Randomize()
        randInt(i) = Int(Rnd() * popNum)
        While editGuess(randInt(i)).Used = True
            If loopCount1 > tourneySize Then
                loopCount1 = 0
                For i2 = 0 To popNum - 1
                    editGuess(i2).setUsed(False)
                Next
                i = -1
                Continue For
            End If
            loopCount1 += 1
            randInt(i) = Int(Rnd() * popNum)
        End While
        editGuess(randInt(i)).determineFitness(correctPhrase)
        editGuess(randInt(i)).setUsed(True)
    Next
    For i = 0 To popNum - 1
        editGuess(i).setUsed(False)
    Next 
```

这个循环试图做的是挑选出四个随机的 editGuess 对象数组实例。这个循环试图防止一个被多次使用，因为人口正在与 10 个成员中的一个竞争（应该是 4 个被选中的候选人中的最高适应度获胜）。

严重的错误是我神秘地得到了一个无限循环，其中任何 editGuess(randInt(i)).Used 实例将始终评估为真。如果它循环太多次，我试图通过将所有实例重置为 False 来解决这个问题。

难点是我会让所有实例在调试器中评估为 False。然后，当我到达“editGuess(randInt(i)).setUsed(True)”（与“editGuess(randInt(i)).Used = True”完全相同）时，它为数组的每个成员设置这个值.

有没有人可以看到正在发生的事情？我非常接近完成这个！

这是猜测类：

```
 Public Class Guess
Dim Fitness As Integer
Dim strLength As Integer
Dim strArray(30) As String
Dim guessStr As String
Dim Used As Boolean
Public Sub New()
    Fitness = 0
    guessStr = ""
    strLength = 0
    Used = 0
End Sub
Public Sub determineFitness(ByVal correctPhrase As String)
    Dim lowerVal
    If guessStr.Length <= correctPhrase.Length Then
        lowerVal = guessStr.Length
    Else
        lowerVal = correctPhrase.Length
    End If
    strArray = guessStr.Split("")
    Fitness = 0 - Math.Abs(correctPhrase.Length - guessStr.Length)
    For i = 0 To lowerVal - 1
        If correctPhrase(i) = guessStr(i) Then
            Fitness = Fitness + 1
        End If
    Next
End Sub
Public Sub Mutate(ByVal mutatepercentage As Decimal, ByVal goodLetters As String)
    If mutatepercentage > 100 Then
        mutatepercentage = 100
    End If
    If mutatepercentage < 0 Then
        mutatepercentage = 0
    End If
    mutatepercentage = mutatepercentage / 100
    If Rnd() < mutatepercentage Then
        strLength = Int(Rnd() * 25) + 5
        If strLength < guessStr.Length Then
            guessStr = guessStr.Remove(strLength - 1)
        End If
    End If
    For i = 0 To strLength - 1
        If Rnd() < mutatepercentage Then
            If i < guessStr.Length Then
                guessStr = guessStr.Remove(i, 1).Insert(i, goodLetters(Int(Rnd() * goodLetters.Length)))
            Else
                guessStr = guessStr & goodLetters(Int(Rnd() * goodLetters.Length))
            End If
        End If
    Next
End Sub
Public Sub setFitness(ByVal num As Integer)
    Fitness = num
End Sub
Public Sub setStrLength(ByVal num As Integer)
    strLength = num
End Sub
Public Sub initializeText()

End Sub
Public Sub setUsed(ByVal bVal As Boolean)
    Used = bVal
End Sub 
```

结束类

最后，这里是函数的调用位置和方式

```
Private Sub Timer1_Tick(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Timer1.Tick
    population1(counter) = fitnessTourney(population1, counter, 4, 10)
    population2(counter) = fitnessTourney(population2, counter, 4, 10)
    population1(counter).Mutate(2, goodLetters)
    population2(counter).Mutate(20, goodLetters)
    Label1.Text = population1(counter).guessStr
    Label2.Text = population2(counter).guessStr
    counter += 1
    If counter > 9 Then
        counter = 0
    End If
End Sub 
```

结束类

编辑1：谢谢你们的评论。

这是我用于表单的自定义构造函数。这用于填充使用 editGuess 传递给 FitnessTourney 函数的人口数组。

```
Public Sub New()
    InitializeComponent()
    Randomize()
    For i = 0 To 9
        population1(i) = New Guess
        population2(i) = New Guess
    Next
    counter = 0
    correctPhrase = "Methinks it is a weasel!"
    goodLetters = "0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ !@#$%^&*()_+-=?></.,;\|`'~"
    goodLettersArr = goodLetters.Split("")
    For i = 0 To 9
        population1(i).setStrLength(Int(Rnd() * 25) + 5)
        population2(i).setStrLength(Int(Rnd() * 25) + 5)
        For i2 = 0 To population1(i).strLength
            population1(i).guessStr = population1(i).guessStr & goodLetters(Int(Rnd() * goodLetters.Length))
        Next
        For i2 = 0 To population2(i).strLength
            population2(i).guessStr = population2(i).guessStr & goodLetters(Int(Rnd() * goodLetters.Length))
        Next
        Label1.Text = population1(i).guessStr
        Label2.Text = population2(i).guessStr
    Next
    population1(0).guessStr = correctPhrase
    population1(0).determineFitness(correctPhrase)
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T13:21:42.353

我还没有彻底研究过你的所有代码，但一个大问题是你是`Randomize`从循环中调用的。每次调用时`Randomize`，它都会用当前时间重新播种随机数。因此，如果您在时钟更改之前多次调用它，您将使用该时间继续获得序列中的第一个“随机”数字，该数字将始终评估为相同的数字。生成“随机”数时，您希望尽可能少地重新播种随机数生成器。最好只在应用程序启动时播种一次。

附带说明一下，您不应该使用旧的 VB6 样式`Randomize`和`Rnd`方法。这些仅在 VB.NET 中提供以实现向后兼容性。您应该改为使用`Random`该类。它也更容易使用。使用`Random`该类，您甚至不需要调用类似随机化的方法，因为它会在您实例化对象时自动为自己播种。因此，在`Random`类的情况下，要小心的是确保在进入可能使用它的任何循环之前只实例化一次对象。如果您`Random`在循环中创建一个新对象，它同样会继续生成相同的数字。

# linux - 如何从串行设备 (ttyUSBx) 获取 ASCII 输入的 ASCII 输出

> ID：14953511
> 
> 赞同：1
> 
> 时间：2013-02-19T09:02:36.180
> 
> 标签：linux, command-line, io, serial-port

有什么方法可以获取 ASCII 输入的 ASCII 输出（短字符串，如“GET T”）。我尝试了 minicom，但效果不佳。

**例子：**

```
stty speed 9600 cs8 ...  
echo "GET T" > /dev/ttyUSBx 
```

**输出：**

> /SOME/PLACE/WHERE/I/CAN/SEE/WHAT/HAPPENED.{TXT,LOG,...}

或直接 LINE OUTPUT
NO X 解决方案。我需要**经典的命令行**

我更喜欢 miniterm 之类的带有 SEND/GET STRING 功能的东西

谢谢！

# jquery - jQuery 排序表

> ID：14953512
> 
> 赞同：1
> 
> 时间：2013-02-19T09:02:44.003
> 
> 标签：jquery

[我在这篇文章（ jQuery table sort](https://stackoverflow.com/questions/3160277/jquery-table-sort) ）中取得了领先地位- 试图做我正在做的事情......

代码在这里。 [http://jsfiddle.net/daqGC/](http://jsfiddle.net/daqGC/)

它不工作......任何想法

这是js代码。HTML 可以在 jsFiddle 上找到。

```
var user_table = $( '#users' );
$('#company_header, #user_header, #email_header, #type_header')
    .wrapInner('<span title="sort this column"/>')
    .each(function(){

        var th = $(this),
            thIndex = th.index(),
            inverse = false;

        th.click(function(){

            user_table.find('td').filter(function(){

                return $(this).index() === thIndex;

            }).sortElements(function(a, b){

                return $.text([a]) > $.text([b]) ?
                    inverse ? -1 : 1
                    : inverse ? 1 : -1;

            }, function(){

                // parentNode is the element we want to move
                return this.parentNode; 

            });

            inverse = !inverse;

        });

    }); 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T09:09:37.400

你遇到的问题是你得到一个javascript错误：`Uncaught TypeError: Object [object Object] has no method 'sortElements'`

您需要包含外部库：[https ://github.com/padolsey/jQuery-Plugins/blob/master/sortElements/jquery.sortElements.js](https://github.com/padolsey/jQuery-Plugins/blob/master/sortElements/jquery.sortElements.js)

因此，您需要做的就是下载 .js 文件并在您的页面上`after`引用 jQuery 脚本参考，例如：

```
<script type="text/javascript" src="https://raw.github.com/padolsey/jQuery-Plugins/master/sortElements/jquery.sortElements.js"></script> 
```

在此处查看您的 jsFiddle：http: [//jsfiddle.net/daqGC/3/](http://jsfiddle.net/daqGC/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T09:07:55.577

您必须加载插件 SortElements 才能使用此功能。这不是原生的 jQuery 函数。使用这个插件：[https ://raw.github.com/padolsey/jQuery-Plugins/master/sortElements/jquery.sortElements.js](https://raw.github.com/padolsey/jQuery-Plugins/master/sortElements/jquery.sortElements.js)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-15T22:48:53.297

添加数字和字符串排序，除了使用 jquery-ui 之外，您还可以改进界面：

 `````
$('#cuerpoTabla thead tr th.string, #cuerpoTabla thead tr th.numerico')
    .wrapInner('<span title="Ordenar esta columna"/>')
    .each(function()
    {
        var th = $(this);
        //$('<i class="ui-icon ui-icon-caret-2-n-s"></i>').insertAfter(th);
        th.css("cursor","pointer");
        th.append('<i class="ui-icon ui-icon-caret-2-n-s"></i>');
        var thIndex = th.index();
        var inverse = false;
        th.click(function()
        {
            th.siblings().find("i.ui-icon").removeClass("ui-icon-caret-1-n").removeClass("ui-icon-caret-1-s").addClass("ui-icon-caret-2-n-s");
            th.find("i.ui-icon").removeClass("ui-icon-caret-2-n-s");
            if (inverse) {
                th.find("i.ui-icon").removeClass("ui-icon-caret-1-n");
                th.find("i.ui-icon").addClass("ui-icon-caret-1-s");
            }
            else
            {
                th.find("i.ui-icon").removeClass("ui-icon-caret-1-s");
                th.find("i.ui-icon").addClass("ui-icon-caret-1-n");
            }
            $("#cuerpoTabla").find('td').filter(function()
            {
                return $(this).index() === thIndex;

            }).sortElements(function(a, b)
            {
                if($.isNumeric($.text([a])))
                {
                    x = $.text([a]);
                    y = $.text([b]);
                    return (eval(x) > eval(y)) ?inverse ? -1 : 1: inverse ? 1 : -1;
                }else
                {
                    return $.text([a]) > $.text([b]) ?inverse ? -1 : 1: inverse ? 1 : -1;
                }

            }, function()
            {
                return this.parentNode; 
            });
            inverse = !inverse;
        });

    }); 
`````

# python - 如何将一系列任务路由到芹菜中的特定队列？

> ID：14953521
> 
> 赞同：16
> 
> 时间：2013-02-19T09:03:10.713
> 
> 标签：python, rabbitmq, celery, chain

当我将任务路由到特定队列时，它可以工作：

```
task.apply_async(queue='beetroot') 
```

但是如果我创建一个链：

```
chain = task | task 
```

然后我写

```
chain.apply_async(queue='beetroot') 
```

它似乎忽略了 queue 关键字并分配给默认的“celery”队列。

如果 celery 支持链中的路由，那就太好了——所有任务都在同一个队列中按顺序执行。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2014-06-10T09:49:57.400

我这样做：

```
subtask = task.s(*myargs, **mykwargs).set(queue=myqueue)
mychain = celery.chain(subtask, subtask2, ...)
mychain.apply_async() 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-19T13:47:19.643

好的，我明白了这一点。

您必须将所需的执行选项（例如 queue= 或 countdown= 添加到子任务定义中，或者通过部分添加：

子任务定义：

```
from celery import subtask

chain = subtask('task', queue = 'beetroot') | subtask('task', queue = 'beetroot') 
```

部分的：

```
chain = task.s().apply_async(queue = 'beetroot') | task.s().apply_async(queue = 'beetroot') 
```

然后通过以下方式执行链：

```
chain.apply_async() 
```

或者，

```
chain.delay() 
```

任务将被发送到“甜菜根”队列。最后一个命令中的额外执行参数不会做任何事情。在链（或组，或任何其他 Canvas 原语）级别应用所有这些执行参数会很不错。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2016-07-30T13:24:18.517

这已经很晚了，但我认为@mpaf 提供的代码并不完全正确。

上下文：就我而言，我有两个子任务，其中第一个提供一个返回值，该返回值作为输入参数传递给第二个。我在执行第二个任务时遇到了麻烦——我在日志中看到 Celery 会承认第二个任务是第一个任务的回调，但它永远不会执行第二个任务。

这是我的非工作链代码-：

```
from celery import chain

chain(
    module.task1.s(arg),
    module.task2.s()
).apply_async(countdown=0.1, queue='queuename') 
```

使用@mpaf 的答案中提供的语法，我得到了两个任务来执行，但是执行顺序是随意的，第二个子任务没有被确认为第一个子任务的回调。我想到了浏览有关如何在子任务上显式设置队列的文档。

这是工作代码-：

```
chain(
    module.task1.s(arg).set(queue='queuename'),
    module.task2.s().set(queue='queuename')
).apply_async(countdown=0.1) 
```

# c# - c# ReportViewer 导出

> ID：14953524
> 
> 赞同：1
> 
> 时间：2013-02-19T09:03:15.093
> 
> 标签：c#, export, reportviewer

在`ReportView`我想*导出*为以下格式：.docx、.pdf 或 .xlsx

导出为 .pdf：

```
reportViewer.ExportDialog(_reportViewer.LocalReport.ListRenderingExtensions()[3]); 
```

导出到 .docx：

```
reportViewer.ExportDialog(_reportViewer.LocalReport.ListRenderingExtensions()[5]); 
```

导出到 .xlsx：

```
reportViewer.ExportDialog(_reportViewer.LocalReport.ListRenderingExtensions()[1]); 
```

但首先我必须选择一种保存格式。我想首先打开***SaveFileDialog***并在其中选择一种保存格式

我该怎么做 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T09:29:30.140

这是我想出的代码：

```
string _sSuggestedName = String.Empty;

byte[] byteViewerPDF = _reportViewer.LocalReport.Render("PDF");  
byte[] byteViewerExcel = _reportViewer.LocalReport.Render("Excel");  
byte[] byteViewerWord = _reportViewer.LocalReport.Render("Word");

SaveFileDialog saveFileDialog1 = new SaveFileDialog();

saveFileDialog1.Filter = "PDF files (*.pdf)|*.pdf| Doc files
(*.doc)|*.doc| Excel files (*.xls)|*.xls";

if (saveFileDialog1.ShowDialog() == DialogResult.Ok)
{

  FileStream newFile = new FileStream(saveFileDialog1.FileName, FileMode.Create);

  if (saveFileDialog1.FilterIndex == 1)
  {
    newFile.Write(byteViewerPDF, 0, byteViewerPDF.Length);
    newFile.Close();
  }
  else
    if (saveFileDialog1.FilterIndex == 2)
    {
      newFile.Write(byteViewerWord, 0, byteViewerWord.Length);
      newFile.Close();
    }
  else
    if (saveFileDialog1.FilterIndex == 3)
    {
      newFile.Write(byteViewerExcel, 0, byteViewerExcel.Length);
      newFile.Close();
    }

} 
```

# vba - 如何使用变量作为 vba 中 sumifs 公式的标准

> ID：14953531
> 
> 赞同：1
> 
> 时间：2013-02-19T09:03:38.757
> 
> 标签：vba, excel, formulas, sumifs

任何人都可以帮助我更正以下代码：

```
Dim Medium As String

Medium = "XYZ"

ActiveCell.FormulaR1C1 = "=SUMIFS(List2!C[8],List2!C[2],""=XYZ"",List2!C[11],""=prime"")" 
```

我需要`""=XYZ""`用变量替换部分代码

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T09:17:35.443

像这样？

```
Dim Medium As String    
Medium = "XYZ"    
ActiveCell.FormulaR1C1 = "=SUMIFS(List2!C[8],List2!C[2]," & _
                         Chr(34) & _
                         Medium & _
                         Chr(34) & _
                         ",List2!C[11],""=prime"")" 
```

# java - 在 spring social 中使用 social:jdbc-connection-repository 元素配置 connectionSignUp

> ID：14953540
> 
> 赞同：2
> 
> 时间：2013-02-19T09:03:58.247
> 
> 标签：java, spring, spring-security, spring-social

我正在使用带有 XML 配置的 spring social，并且我想注入属性 connectionSignUp 以启用隐式注册，但这是不可能的，因为该元素 social:jdbc-connection-repository 不需要该参数。

我正在尝试修改其中一个示例，即这个： [https ://github.com/SpringSource/spring-social-samples/tree/master/spring-social-showcase-sec-xml](https://github.com/SpringSource/spring-social-samples/tree/master/spring-social-showcase-sec-xml)

social:jdbc-connection-repository 元素在文件中： [https ://github.com/SpringSource/spring-social-samples/blob/master/spring-social-showcase-sec-xml/src/main/webapp/ WEB-INF/spring/social.xml](https://github.com/SpringSource/spring-social-samples/blob/master/spring-social-showcase-sec-xml/src/main/webapp/WEB-INF/spring/social.xml)

感谢您提供任何帮助或解决方法！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T15:05:06.503

您发现了新配置支持中忽略的一些内容。我认识到这并不能帮助您解决今天的问题，但我很高兴您找到了它，以便现在可以修复它。这正是我们进行里程碑发布的原因。

我一定会在 M3 版本中使用它（我正在拍摄 2 月底或 3 月初）。但提醒我一下，你能在[https://jira.springsource.org/browse/SOCIAL](https://jira.springsource.org/browse/SOCIAL)上打开一个改进问题来跟踪这个吗？并且一定要包含一个指向这个 SO 问题的链接作为参考 URL，这样当我在快照构建中得到修复时，我就会知道回来更新这个答案。谢谢

与此同时，没有很多方便的解决方法。您可以返回显式声明连接存储库。或者您*可以*拥有设置该属性的后处理器 bean（BeanPostProcessor 或 BeanFactoryPostProcessor 实现）。实际上，经过深思熟虑，后处理器解决方法可能是最简单的临时解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-17T09:40:16.463

我已经使用了 SocialAuthenticationFilter，似乎它没有被春天识别。因为它的用户连接存储库未定义。我正在使用 Maven 1.1.0.M4

```
<bean id="socialAuthenticationFilter" class="org.springframework.social.security.SocialAuthenticationFilter">
    <constructor-arg index="0" ref="authenticationManager"/>
    <constructor-arg index="1" ref="userIdSource"/>
    <constructor-arg index="2" ref="userConnectionRepository"/>
    <constructor-arg index="3" ref="connectionFactoryLocator"/>

    <!-- Sets the url of the registration form. -->
    <property name="signupUrl" value="/user/register"/>
</bean> 
```

进一步我可以知道定义userConnectionRepository和connectionFactoryLocator的完整xml配置而不使用`<social:jdbc-connection-repository/>`

# java - 如何使用 Google Guice 注入记录器

> ID：14953541
> 
> 赞同：9
> 
> 时间：2013-02-19T09:03:58.950
> 
> 标签：java, logging, guice

通常我这样定义记录器：

```
private static final Logger logger = LoggerFactory.getLogger(MyClass.class); 
```

但是在使用时`@Inject`我们必须使用非静态和非最终字段，例如：

```
@Inject
private Logger logger; 
```

即记录器将在此类的每个实例中创建，记录器也是可变的。可能存在某种方式使记录器静态？另外我如何将记录器绑定到某个类（我在从工厂创建记录器对象时使用发送类对象`LoggerFactory.getLogger(MyClass.class);`，如何使用注入以相同的方式创建记录器？）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-19T09:43:39.620

请查看 Guice wiki 上的[自定义注入](https://github.com/google/guice/wiki/CustomInjections#example-injecting-a-log4j-logger)，有一个完整的 Log4J 示例。

编辑：您可以为记录器使用`static`字段或`final`字段，但不能使用字段`static final`。这是 Java[限制](https://docs.oracle.com/javase/8/docs/api/java/lang/reflect/Field.html#set-java.lang.Object-java.lang.Object-)。

还要小心[：](https://github.com/google/guice/wiki/CustomInjections#example-injecting-a-log4j-logger)

> 不推荐注入 final 字段，因为注入的值可能对其他线程不可见。

尚未对此进行测试，但文章中的代码应该适用于静态字段，尽管您可以通过摆脱 MembersInjector 并在 TypeListener 中完成所有操作来改进它（因为静态字段只需要设置一次）。

使用`requestStaticInjection()`将迫使您在模块文件中列出所有类 - 这不是一个好主意，因为您很快就会忘记添加一个。

OTOH，如果您只想支持 JUL，您可能会更好地使用[内置支持](https://github.com/google/guice/wiki/BuiltInBindings#loggers)（正如 Jeff 所提到的，我假设您不想要一个一般性的答案，因为您没有在问题中特别提到 JUL）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-20T06:00:24.723

在为依赖注入设计应用程序时，通常最佳实践是尽可能避免使用静态字段和方法。这样可以使您的依赖关系更加清晰，并且在测试期间和随着应用程序的发展，更容易用其他实例替换您的真实依赖关系。因此，理想的行为是尽可能避免使用静态方法和字段（包括记录器）。

然而，Guice 确实允许将字段标记为静态，并[在创建 Injector 时请求注入静态字段](http://code.google.com/p/google-guice/wiki/Injections#Static_Injections)。这些字段需要保持可变——`final`并不意味着“除了 Guice 之外的最终结果”。

```
public class YourClass {
  @Inject static Logger logger;

  /* ... */
}

public class YourModule extends AbstractModule {
  @Override public void configure() {
    /* YourClass.logger will work once you create your Injector. */
    requestStaticInjection(YourClass.class);
  }
} 
```

Guice 会自动为您提供嵌入了类名的[`java.util.logger.Logger`实例，但这只是因为](http://google-guice.googlecode.com/git/javadoc/com/google/inject/Injector.html)[Guice 中编码了一个特殊情况](http://code.google.com/p/google-guice/source/browse/core/src/com/google/inject/internal/InjectorShell.java#247)。如果你想要一个特殊的记录器，就像在[这个 SO question](https://stackoverflow.com/questions/2605198/how-do-i-get-google-guice-to-inject-a-custom-logger-say-a-commons-logging-or-lo)中一样，你需要调查 Jakub 链接到的自定义注入——但如果整个目标是集中记录器的创建以便你可以在一个地方控制它，你可以也将其重构为 Guice 之外的静态工厂。

```
@LogToFile
public class YourClass {
  private static final Logger logger = YourLoggerFactory.create(YourClass.class);

  /* ... */
}

public class YourLoggerFactory {
  private YourLoggerFactory { /* do not instantiate */ }

  public Logger create(Class<?> clazz) {
    if (clazz.getAnnotation(LogToFile.class) != null) {
      return someImplementation(new File(...));
    } else {
      return someOtherImplementation();
    }
  }
} 
```

# c# - LINQ 在哪里重载 Console.WriteLine() 因为它是 IEnumerable 结果

> ID：14953542
> 
> 赞同：1
> 
> 时间：2013-02-19T09:03:59.713
> 
> 标签：c#, .net, linq

```
var products1 = new List<Product> {
     new Product { Name = "Apple", Price = 2 }};

var products2 = from product in products1
      select new { product.Name, product.Price };

foreach (var p in products1) 
      Console.WriteLine(p);

foreach (var p in products2)
      Console.WriteLine(p); 
```

为什么第二个打印“{ Name = Apple, Price = 2 }”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T09:06:25.933

> 为什么第二个打印“{ Name = Apple, Price = 2 }”？

因为您使用关键字创建了一个匿名类型`new`，所以它与`Product`类型不同。

既然你称之为`Console.WriteLine(p);`相当于：

```
Console.WriteLine(p.ToString()); 
```

你可能会看到：[C#/.NET Little Wonders: The Joy of Anonymous Types](http://geekswithblogs.net/BlackRabbitCoder/archive/2012/06/21/c.net-little-wonders-the-joy-of-anonymous-types.aspx)

> **匿名类型上的 ToString()**
> 
> 匿名类型为您提供的更简单的覆盖之一是 ToString() 方法，该方法**以与初始化时大致相同的格式打印匿名类型实例的**值（当然，除了实际值而不是适当的表达式）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T09:06:25.137

您正在创建一个实现自己的`ToString`方法的匿名类型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T09:06:37.910

这不是 LINQ，它是 C# 编译器`ToString`为匿名类型生成的方式。

# python - 从http服务器下载hdf5文件的pythonic方式是什么？

> ID：14953549
> 
> 赞同：0
> 
> 时间：2013-02-19T09:04:13.830
> 
> 标签：python, urllib, hdf5

我正在尝试从 http 服务器下载 hdf5 文件。我可以用python子进程模块和wget做到这一点，但我觉得我在作弊

```
 # wget solution
    import subprocess
    url = 'http://url/to/file.h5' 
    subprocess(['wget', '--proxy=off', url]) 
```

我还可以使用 urllib 和 request 模块来下载这样的图像：

```
 # requests solution
    url2 = 'http://url/to/image.png'
    r = requests.get(url2)
    with open('image.png', 'wb') as img:
    img.write(r.content)

    # urllib solution
    urllib.urlretrieve(url2, 'outfile.png') 
```

但是，当我尝试使用此方法下载 hdf5 文件并运行 shell 命令“文件”时，我得到：

```
 >file test.h5 
    >test.h5: HTML document, ASCII text, with very long lines 
```

这是 requests.get() 的标头（不确定是否有帮助）

```
 {'accept-ranges': 'bytes',
    'content-length': '413399',
    'date': 'Tue, 19 Feb 2013 08:51:06 GMT',
    'etag': 'W/"413399-1361177055000"',
    'last-modified': 'Mon, 18 Feb 2013 08:44:15 GMT',
    'server': 'Apache-Coyote/1.1'} 
```

**我应该只使用 wget throug 子进程还是有 pythonic 解决方案？**

**解决方案：** 问题是由于我在尝试下载文件之前没有禁用代理，因此传输被拦截。这段代码成功了。

```
 import urllib2
    proxy_handler = urllib2.ProxyHandler({})
    opener = urllib2.build_opener(proxy_handler)
    urllib2.install_opener(opener)

    url = 'http://url/to/file.h5'

    req = urllib2.Request(url)
    r = opener.open(req)
    result = r.read()

    with open('my_file.h5', 'wb') as f:
        f.write(result) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T09:35:17.833

尝试使用`urllib.geturl`来获取真实的 URL（在重定向之后），然后将其传递给`urlretrieve`.

# data-binding - WinRT (Win 8) Store App XAML Bindings RelativeSourceMode FindAncestor 丢失？

> ID：14953553
> 
> 赞同：14
> 
> 时间：2013-02-19T09:04:28.873
> 
> 标签：data-binding, winrt-xaml

有人知道 XAML 绑定中 FindAncestor 的“新方式”是什么吗？查看RelativeSourceMode ( [http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.data.relativesourcemode](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.data.relativesourcemode) ) 只剩下引用self 或TemplatedParent 的选项。FindAncestor 不见了。我想知道我使用 FindAncestor 修复的问题的原因和典型解决方案是什么。

最好的问候戈佩

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-25T09:34:01.483

为什么它不见了？不知道，但我怀疑除了“微软没有足够的时间及时实现所有功能”之外还有其他解释。

一个简单的解决方法是改用**ElementName**，如下所示：

```
Binding={ ElementName=TheNameOfTheAncesor, Path=DataContext.TheViewModelProperyIWantToBindTo } 
```

并将**x:Name**属性添加到您希望 FindAncestor 绑定指向的祖先：

```
<TextBlock x:Name="TheNameOfTheAncestor" /> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-25T10:40:30.023

对于这种缺乏 afaik 没有通用的解决方案，例如，您无法访问其中`ListViewItem`的属性，`DataTemplate`因此您无法优雅地对选择更改做出反应。在添加之前，您应该为每个特定情况找到解决方法`FindAncestor`（我不敢相信这种缺席不仅仅是因为时间不够）

# c# - “关闭子窗口”事件是否存在？

> ID：14953556
> 
> 赞同：0
> 
> 时间：2013-02-19T09:04:37.087
> 
> 标签：c#, xaml, silverlight-4.0, childwindow

我有个问题 ：

当我们点击子窗口右上角的标记时，事件“关闭子窗口”是否存在？

因为如果我以这种方式关闭 ChildWindow，我想取消所有可以完成的更改。

我可以使用我创建的按钮关闭窗口，但用户仍然可以以另一种方式关闭 ChildWindow，因此，不会取消任何更改的数据。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T09:12:38.903

抱歉，windows标准窗体上没有“关闭子窗口”之类的事件。您可以做的是自己创建它，每次打开新窗口时，您都可以从该新窗口 FormClosed 事件中抛出此事件。

```
public event EventHandler CloseChildWindow; 
```

然后当你打开新窗口时。

```
Form1 frm = new Form1();
frm.FormClosed += (o, e) =>
     {
         if(CloseChildWindow!= null)
              CloseChildWindow(o, e);
     }; 
```

# ruby-on-rails - 使 Rails.logger tee 写入标准输出

> ID：14953558
> 
> 赞同：2
> 
> 时间：2013-02-19T09:04:46.570
> 
> 标签：ruby-on-rails, ruby, logging

我的 Rails.logger 运行良好，非常感谢，但我*也*希望它写入 STDOUT（也就是说，不要放弃记录到日志文件，而是将其“Tee”到 stdout）。

这在 Rails 3 中可行吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T15:51:10.507

这个简单的委托记录器应该（*）做到这一点：

```
class MultiLogger
  def initialize *loggers
    @loggers = loggers
  end

  def method_missing *args, &blk
    @loggers.each {|l| l.send *args, &blk }
  end

  def respond_to_missing? *args
    @loggers.all? {|l| l.respond_to? *args }
  end
end

Rails.logger = MultiLogger.new Rails.logger, Logger.new($stdout) 
```

(*) 我没试过

# perl - 在目录中的所有文件中进行模式搜索

> ID：14953560
> 
> 赞同：0
> 
> 时间：2013-02-19T09:05:00.213
> 
> 标签：perl

我有类似“关键字：多节点”的模式。现在，我需要在目录中的所有文件中搜索此模式。如果我们在任何文件中找到该模式，则应返回一个非空字符串。它可能包含文件名或目录名

在 shell 脚本中，以下将执行相同的操作

关键节点=`grep -w "keyword : Multinode" ${dirname}/*`

我想过使用 find(subroutine,directory_path) 并在子例程中我想遍历整个目录以获取其所有条目。对于每个条目，我想检查它是否是可读文件。如果文件可读，我想在找到的文件中搜索所需的模式“关键字：多节点”。如果我们成功了，整个 find 命令应该会产生一个非空字符串（最好只有现有的目录名称），否则会产生一个空字符串。如果您需要任何进一步的信息，请告诉我。

我希望使用 perl 来完成。请帮我解决问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T09:30:20.170

以下是一些 Perl 工具，可用于执行您所描述的操作：

*   [File::Find](https://metacpan.org/module/File%3a%3aFind)将对目录及其子目录中的文件进行递归搜索，`\&wanted`针对每个文件运行代码（文档中的回调）以确定它是否符合您的条件
*   操作员会`-r`告诉您文件是否可读 ( `if (-r $file_name)...`)
*   [open](http://perldoc.perl.org/functions/open.html)将让您访问该文件并`<$fh>`读取其内容，以便您可以使用正则表达式检查它们是否与您的目标模式匹配
*   添加`\b`到模式的开头和结尾将导致它仅在单词边界处匹配，类似于`grep`'s `-w`switch

如果您有更具体的问题，请使用演示这些问题的代码发布其他问题，包括说明您预期会发生什么以及实际结果与您的预期有何不同，我们很乐意帮助解决这些问题。

**编辑：**从注释中清理和运行的代码版本：

```
#!/usr/bin/env perl    

use strict;
use warnings;
use 5.010;

use File::Find;

# Get $dirname from first command-line argument
my $dirname = shift @ARGV;

find(\&do_process, $dirname); # quotes around $dirname weren't needed

my ($KeyMnode, $KeyThreads);

sub do_process {
#  chomp($_); - not needed; $_ isn't read from a file, so no newline on it
  if (-r $_) {  # quotes around $_ weren't needed
    # $_ is just the final part of the file name; it may be better for
    # reporting the location of matches to set $file_name to 
    # $File::Find::name instead
    my $file_name = $_;
    open(my $fh, '<', $file_name);  # Use three-arg open!
    while (<$fh>) {
      chomp();
      # Note that, if you store all matches into the same scalar values,
      # you'll end up with only the last value found for each pattern; you
      # may want to push the matches onto arrays instead.
      if (/\bkeyword : Multinode\b/i) { $KeyMnode   = "$file_name:$_"; }
      if (/\bkeyword : Threads\b/i)   { $KeyThreads = "$file_name:$_"; }
    }
  }
} 
```

# c++ - 需要一个 Ypsilon 使用示例

> ID：14953563
> 
> 赞同：6
> 
> 时间：2013-02-19T09:05:13.667
> 
> 标签：c++, scheme, bytecode, ffi

我开始搞乱[Ypsilon](http://code.google.com/p/ypsilon/)，它是 Scheme 的 C++ 实现。

它符合[R6RS](http://www.r6rs.org/)，具有快速垃圾收集器，支持多核 CPU 和 Unicode，但**缺少**文档、C++ 代码示例和代码中的注释！

作者将其作为独立的控制台应用程序提供。我的目标是将它用作图像处理应用程序中的脚本引擎。

源代码结构良好，但结构不熟悉。我花了两周时间研究它，这就是我发现的：

1.  与外部世界的所有通信都是通过称为端口的 C++ 结构完成的，它们对应于 Scheme 端口。
2.  虚拟机有 3 个端口：IN、OUT 和 ERROR。
3.  端口可以​​是标准端口（通过控制台）、套接字端口、字节向量端口、命名文件端口和自定义端口。
4.  每个自定义端口都必须提供一个名为*handlers*的填充结构。
5.  *Handlers*是一个包含 6 个元素的向量：第一个是布尔值（端口是否为文本），其他五个是函数指针（onRead、onWrite、onSetPos、onGetPos、onClose）。

据我了解，我需要实现 3 个自定义端口（IN、OUT 和 ERROR）。但是现在我无法弄清楚 handlers 中每个函数（onRead、onWrite、onSetPos、onGetPos、onClose）的输入参数是*什么*。

不幸的是，没有实现自定义端口的示例，也没有以下内容的示例：

1.  C++ 到 Scheme 函数绑定（提供的示例是一堆 .scm 文件，仍然不清楚在 C++ 端做什么）。
2.  编译和运行字节码（通过 bytevector-ports？但是如何将文本编译为字节码？）。

**总而言之**，如果有人提供上述任何场景的 C++ 示例，它将大大节省我的时间。提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T21:21:41.737

要回答您的另一个问题，关于编译和运行“字节码”：

1.  要编译表达式，请使用`compile`. 这将返回一个代码对象。
2.  没有公开导出的方法来运行此代码对象。在内部，代码使用`run-vmi`，但您无法从外部代码访问它。
3.  在内部，加载和使用已编译代码的唯一位置是在其`auto-compile-cache`系统中。

请查看`heap/boot/eval.scm`详细信息。（再次声明，这不是官方回应，纯粹基于个人实验和源代码检查。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-19T20:29:07.793

好的，从我可以阅读的源代码来看，这是调用各种处理程序的方式（这都是非官方的，纯粹基于源代码检查）：

1.  读取处理程序: `(lambda (bv off len))`: 接受一个字节向量（您的处理程序会将读取的数据放入其中）、一个偏移量（fixnum）和一个长度（fixnum）。您应该最多读取`len`字节，将这些字节放入`bv`从`off`. 返回实际读入的字节数（作为固定数字）。
2.  Write handler: `(lambda (bv off len))`: 接受一个字节向量（包含要写入的数据）、一个偏移量（fixnum）和一个长度（fixnum）。从，从 开始，最多抓取`len`字节并将它们写出。返回实际写入的字节数（作为固定数字）。`bv``off`
3.  获取位置处理程序：（`(lambda (pos))`仅在文本模式下调用）：允许您存储一些数据，`pos`以便将来调用具有相同`pos`值的设置位置处理程序会将位置重置回当前位置。返回值被忽略。
4.  设置位置处理程序：：`(lambda (pos))`将当前位置移动到 的值`pos`。返回值被忽略。
5.  关闭处理程序：：`(lambda ())`关闭端口。返回值被忽略。

# perl - 如何只获得第三列？

> ID：14953565
> 
> 赞同：1
> 
> 时间：2013-02-19T09:05:17.380
> 
> 标签：perl

我有一个数组@foo，其中包含以下条目

```
 Database alias                       = SAMPLE1
 Database alias                       = SAMPLE2
 Database alias                       = SAMPLE3 
```

现在我只想要第三列，即

> 样品1
> 
> 样品2
> 
> 样品3

我可以在 shell 中使用`awk (awk '{print $3}')`，我如何在 perl 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T09:14:59.637

```
awk '{print $3}' < data.txt 
```

给出=符号，你的意思是4美元

然而，在 perl 中，自动拆分数组从零开始，所以它是 3

```
perl -lane 'print $F[3]' < data.txt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-23T14:45:38.033

如果你想要第 n 列空格分隔的字符串，这就是如何做到这一点的想法：

```
#!/usr/bin/env perl

use strict;
use warnings;

my @foo = ( "Col1    Col2  Col3     Col4",     # This is
            "Row2    R2C2  Row2C3   Row2C4" ); # the input array.

my $n = 2; # We want to select the 3rd column.

my @nth_columns;

for my $row (@foo) {                   # We go through the input array,
    my @columns = split /\s+/, $row;   # splitting each row by whitespaces
    push @nth_columns, $columns[$n];   # and adding the n-th column to output array
} 
```

你当然可以用许多更短的方式来写。我最喜欢的应该是这样的：

```
my @third_columns = map { (split /\s+/)[2] } @foo; 
```

# javascript - 使用 xmlHTTPRequest 在新窗口中打开安全应用程序

> ID：14953577
> 
> 赞同：1
> 
> 时间：2013-02-19T09:06:02.240
> 
> 标签：javascript, web-applications, xmlhttprequest

我们有一个要求，我们希望能够从基本应用程序 (BaseApp) 启动新应用程序 (NewApp)。BaseApp 和 NewApp 的登录凭据相同，因为它们使用相同的身份存储。BaseApp 和 NewApp 位于不同的技术堆栈上，都是 Web 应用程序。它们托管在不同的服务器上。NewApp 为 Web 访问提供基本的身份验证。

如何使用 java 脚本从 BaseApp 上的链接启动 NewApp。我希望能够注入基本身份验证凭据。

我曾尝试使用 xmlHTTPRequest，但它似乎更适合调用 REST 服务和处理获取的数据，而不是启动 URL。使用 java 脚本 window.open(url) 不允许我注入授权标头！

还有什么我可以探索的吗？

附加信息：BaseApp 的会话 cookie 不适用于 NewApp。当我们第一次在 BaseApp 上完成 Basic Auth 时，它会生成一个需要使用的新 Session Cookie。通过 xhr，我们可以调用 NewApp 的 URL（使用 Basic Auth）。这将返回带有会话 cookie 的响应。我无法弄清楚的问题是，如何在浏览器的新窗口/选项卡上呈现响应。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T09:28:21.193

最简单的解决方案是使用以下 url 调用新窗口

```
http://<user>:<pass>@newapp 
```

但这不是一个好的解决方案，因为您会看到纯文本的凭据。您最好尝试以下解决方案之一：

1.  如果您使用会话 cookie，通常可以将其附加到 url，例如`http://newapp?JSESSIONID=kjasbfkji877786sdf`.
    1.  您可以使用基本应用程序中的相同 Cookie（如果应用程序位于不同的机器上，这应该是不可能的）
    2.  创建 XMLHttpRequest 调用 NewApp 并通过 BasicAuth 进行身份验证。响应标头应包含来自其他服务器的所需会话 cookie。然后您可以使用所需的 cookie 调用 NewApp。
2.  如果您没有会话 cookie，您也可以尝试第二种解决方案 (XHR)，因为如果创建了会话，它也会存储在浏览器中，并且浏览器可以自行管理会话处理。

所以在案例 1.2 中。2\. 您应该执行以下操作：

```
var XMLReq = new XMLHttpRequest();
XMLReq.open("GET", "url", asynchronous?, "user", "password");
XMLReq.send(null); 
```

在案例 1.2 中。您需要为后续调用提供额外的处理程序：

```
XMLReq.onload = function() {
    window.open('http://NewApp?JSESSIONID='+XMLReq.getResponseHeader('Cookie')); 
    // note that 'JSESSIONID' depends on your backend implementation, this example is made for java backend
} 
```

在案例 2\. 它只是

```
XMLReq.onload = function() {
    window.open('http://NewApp'); 
} 
```

在这种情况下，最好的解决方案是 OAuth 或 OpenID，但这取决于您的用例和系统环境，如果当前不支持 OAuth 或 OpenID，则可能需要更复杂的后端实现。

# jquery - jQuery。各种项目的前缀选择器

> ID：14953585
> 
> 赞同：2
> 
> 时间：2013-02-19T09:06:27.973
> 
> 标签：jquery, prefix

如何优化这个？

```
$('link[href="dir/style.css"]').attr("href", "dir/style2.css");
$('link[href="../../dir/style.css"]').attr("href", "../../dir/style2.css");
jQuery('link[href="../dir/style.css"]').attr("href", "../dir/style2.css"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T09:14:17.863

`attr`这应该在使用[以 selector 结尾的属性](http://api.jquery.com/attribute-ends-with-selector/)的单个调用中执行相同的操作：

```
$('link[href$="style.css"]').attr('href', function(index, value) {
    return value.replace('style.css', 'style2.css');
}); 
```

[JSFiddle 示例](http://jsfiddle.net/asAAd/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T09:14:31.950

你可以这样做：

```
$('link[href*="dir/style.css"]').attr('href', function(i, oldHref) {
    return oldHref.replace('dir/style.css', 'dir/style2.css');
}); 
```

它使用[属性包含](http://api.jquery.com/attribute-contains-selector/)选择器来选择元素，然后将一个函数传递给调用以`.attr()`返回更新的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T09:15:32.950

这取决于你的项目结构，但你可以做这样的事情

```
$('a[href*="dir/style.css"]').attr('href', function(i,href) {
       // return a version of the href that replaces "style." with "style2."
    return href.replace('style.', 'style2.');
}); 
```

在这里小提琴：http: [//jsfiddle.net/dT8j6/123/](http://jsfiddle.net/dT8j6/123/)

# http - 在wsgi python中恢复http请求头命令是不可能的吗？

> ID：14953587
> 
> 赞同：2
> 
> 时间：2013-02-19T09:06:32.537
> 
> 标签：http, http-headers, wsgi

据我了解，wsgi 将 http 标头转换为具有 HTTP_ 前缀和大写标头名称的环境变量。

请求是这样的：

```
GET /h HTTP/1.1
X2: a
X1: b 
```

在服务器上，这是我们`environ`目前所拥有的

```
"HTTP_X1":  b,
"HTTP_X2":  a 
```

所以理论上不可能分辨哪个标头在前，哪个标头在最后？

WSGI 下是否有任何允许将 HTTP 请求标头恢复到其原始文本的技巧？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T09:24:30.593

在 WSGI 应用程序中，您很遗憾丢失了请求标头的排序信息。

# java - 读取字符串中非空白字符的数量

> ID：14953588
> 
> 赞同：5
> 
> 时间：2013-02-19T09:06:35.367
> 
> 标签：java

这是我的简单代码。

导入 java.util.Scanner；

```
public class WordLines
{
    public static void main(String[] args) 
    {
        Scanner myScan = new Scanner(System.in);
        String s;

        System.out.println("Enter text from keyboard");

        s = myScan.nextLine();

        System.out.println("Here is what you entered: ");
        System.out.println(s.replace(" ", "\n"));
    }
} 
```

如果我要输入一个句子，例如“早安世界！” （此行中有 17 个非空白字符）

我如何能够显示我的文本并在此之上打印出存在的非空白字符的数量。

*解决了*

再次感谢所有帮助！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-19T09:09:49.423

使用正则表达式删除所有空格（空格、换行符、制表符），然后简单地获取字符串长度。

```
input.replaceAll("\\s+", "").length() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T09:08:40.587

尝试这个：

```
System.out.println(s);
System.out.println(s.replace(" ", "").length()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T10:11:12.957

如果您只想知道非空白字符的数量，希望这会对您有所帮助。

```
 String aString="Good Morning World!";
    int count=0;
    for(int i=0;i<aString.length();i++){
        char c = aString.charAt(i);
        if(c==' ') continue;
        count++;
    }
    System.out.println("Total Length is:"+count); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T09:20:00.430

```
import java.util.Scanner;

public class WordLines
{

  public static void main(String[] args) {

    Scanner myScan = new Scanner(System.in);
    String s="";

    System.out.println("Enter text from keyboard");
    while(myScan.hasNextLine()) s = s+myScan.nextLine();

    System.out.println("Here is what you entered: ");
    System.out.println(s.replace(" ", "\n"));

  }

} 
```

当您想退出输入时，您最后需要使用 CTRL+C。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-19T09:09:45.137

执行以下操作：

```
public static int countNotBlank(String s) {
    int count = 0;
    for(char c : s.toCharArray()) {
        count += c == ' ' ? 0 : 1;
    }
    return count;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-19T09:10:31.700

您可以从字符串计算非空白字符，如下所示：

```
int non_blank_counter = 0;
//your code to read String
for(int i=0;i<s.length();i++){
// .. inside a loop ..//
if ( myStr.charAt( i ) != ' ' )
    non_blank_counter++;
}
System.out.println("number of non blank characters are "+non_blank_counter); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-19T09:12:04.093

另一种处理方式

```
import java.util.Scanner;

public class WordLines {

    public static void main(String[] args) {

        Scanner myScan = new Scanner(System.in);
        String s;

        System.out.println("Enter text from keyboard");

        s = myScan.nextLine();

        String[] splitter = s.split(" ");

        int counter = 0;
        for(String string : splitter) {
            counter += string.length();
        }

        System.out.println("Here is what you entered: ");
        System.out.println(counter);

    }

} 
```

# c# - 从类中获取特定属性

> ID：14953594
> 
> 赞同：0
> 
> 时间：2013-02-19T09:06:56.463
> 
> 标签：c#

我有这样的课：

```
Public class Person 
{
    [NameInLib("id")]
    [NameInXML("ID")]
    public string Id;
    [NameInLib("empType")]
    [NameInXML("EmpType")]
    public string EmpType;
} 
```

我为属性创建了这两个类：

```
public class NameInLib : Attribute
{
    private string name;

    public string Description { get { return name; } }

    public NameInLib(string n)
    {
        this.name  = n;
    }
}

public class NameInXML : Attribute
{
    private string name;

    public string Description { get { return name; } }

    public NameInXML(string n)
    {
        this.name = n;
    }
} 
```

有一个像这样的 XML：

```
<Person>
 <Name insert = "false">ID</Name>
 <Name insert = "false">EmpType</Name>
<Person> 
```

从这个 XML 我会得到插入属性为真的标签。

可以获取属性，简单的 for 循环可以与 xml 中的属性进行比较。

我想知道是否有更好的方法来从 Person 类中获取 NameInLib 属性，这些属性仅存在于从 XML 获得的列表中。

# django - Django：模型字段中的子字段

> ID：14953596
> 
> 赞同：2
> 
> 时间：2013-02-19T09:07:03.667
> 
> 标签：django, django-models, python-2.7

在我的主要类模型 Deals 中，我有某些字段，如描述、价格、date_created 等。我现在必须添加一些具有子字段的字段。例如，我正在尝试向交易添加年龄字段。此年龄字段还有子字段（如 score_for_kid、score_for_baby、score_for_old 等），我想从管理员那里编辑这些分数。

这是我的models.py：

```
class Deals(models.Model):
    description = models.TextField()
    price = models.DecimalField(max_digits=7, decimal_places=2)
    url = models.URLField(verify_exists=False)
    currency = models.CharField(max_length=3)
    created_date = models.DateField(auto_now_add=True)

    kid_score = models.IntegerField(max_length=2,default=0)
    teenager_score = models.IntegerField(max_length=2,default=0)
    youth_score = models.IntegerField(max_length=2,default=0)
    old_score = models.IntegerField(max_length=2,default=0) 
```

我不想在模型中存储所有这些子字段（大约 20-25 个在 4 个不同的字段中），而是一个连接到这些子字段的年龄字段。ManyToManyField 会为此工作吗？

基本要求是当用户在浏览器上选择一个子字段（比如孩子）时，显示所有具有较高孩子分数的对象。

我对 Django 很陌生，对此的任何帮助都会很棒。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T09:12:24.990

如果我正确理解您的问题，您需要使用 ForeignKey 字段。

```
class Deals(models.Model):
    description = models.TextField()
    price = models.DecimalField(max_digits=7, decimal_places=2)
    #...
    age = models.ForeignKey(Age)

class Age(models.Model):
    kid_score = models.IntegerField(max_length=2,default=0)
    teenager_score = models.IntegerField(max_length=2,default=0)
    #... 
```

好好阅读[有关 Models 的文档](https://docs.djangoproject.com/en/1.4/topics/db/models/)。您可能还会发现对关系数据库/基本 sql 进行一些阅读很有用。

当您在 django admin 中编辑对象时，您可能需要使用[InlineModelAdmin](https://docs.djangoproject.com/en/1.4/ref/contrib/admin/#inlinemodeladmin-objects)类。

更新

重新阅读您的问题，听起来您可能只是想在主 Deal 模型上显示/隐藏这些附加字段。如果是这种情况，那么您想在管理员中使用带有“collapse”类的字段集。[文档](https://docs.djangoproject.com/en/1.4/ref/contrib/admin/#django.contrib.admin.ModelAdmin.fieldsets)中有一个示例。

如果您希望每条`Deal`记录都有多个`kid_score`与之关联的 '，那么您需要一个外键。如果每个`Deal`只能有一个`kid_score`，那么您需要将`kid_score`（和其他）字段保留在主模型中（如果这令人困惑，那么一定要阅读 sql / 关系数据库）。

# jquery - jqueryMobile 固定 div 用于广告

> ID：14953603
> 
> 赞同：1
> 
> 时间：2013-02-19T09:07:25.673
> 
> 标签：jquery, jquery-mobile

我正在尝试创建一个始终存在于页脚导航上方的固定 div。我需要这个来展示广告。

到目前为止，我尝试的一切都导致页面被破坏。

是否有任何 jqueryMobile 方式来创建这样一个不会更改且始终存在的固定内容元素？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T12:28:16.547

您可以将 jquery-mobile 元素设置为固定：

```
data-position="fixed" 
```

我的 index.html 文件中的一个示例：

```
<div data-role="header" id="trf2Header" data-position="fixed" data-theme="f">
    <a href="#homePage" data-theme="e">Home</a>
    <h1> <!-- Info Goes Here -->  </h1>
</div> 
```

只要您的元素具有数据角色（“内容”很好），那么 data-position="fixed" 应该可以解决问题。

至于永远存在，您必须将其写入每一页。它不会跨页面持续存在。

# android - 在 android 应用程序中使用 pdfViewer 库从 url 读取 pdf

> ID：14953604
> 
> 赞同：2
> 
> 时间：2013-02-19T09:07:26.540
> 
> 标签：android

我制作了一个 android 应用程序，用于通过在我的代码中集成 pdfViewer 库来查看从 URL 获取的 Pdf 文件。首先应用程序将文件从 Web 下载到外部 sd 卡，然后从那里使用 PdfViewer 库打开应用程序。如果文件工作正常大小很小，但如果 pdf 文件包含图像并且大小更大，则 sdcard 中显示的下载文件大小为 0kb。有人可以帮我弄清楚为什么会这样吗？

以下是java代码：

```
public class MainActivity extends Activity {
    static Context applicationContext;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        applicationContext = getApplicationContext();

        String extStorageDirectory = Environment.getExternalStorageDirectory().toString();
        File folder = new File(extStorageDirectory, "pdfDownloads");
        folder.mkdir();
        File file = new File(folder, "android.pdf");
        try {
            if(!file.exists()) {
                file.createNewFile();
            }
        } catch (IOException e1) {
            e1.printStackTrace();
        }
        boolean downloadFile = downloadFile("http://www.irs.gov/pub/irs-pdf/fw4.pdf", file);
        if (file!=null && file.exists() && file.length() > 0){
            Intent intent = new Intent(this, com.example.soniapdf.Second.class);
            intent.putExtra(PdfViewerActivity.EXTRA_PDFFILENAME,
                    file.getAbsolutePath());
            startActivity(intent);
        }
    }

    public static boolean downloadFile(String fileUrl, File directory) {
        try {
            FileOutputStream f = new FileOutputStream(directory);
            URL u = new URL(fileUrl);
            HttpURLConnection c = (HttpURLConnection) u.openConnection();
            c.setRequestMethod("GET");
            c.setDoOutput(true);
            c.connect();
            InputStream in = c.getInputStream();

            byte[] buffer = new byte[1024];
            int len = 0;

            //
             int fileLength = c.getContentLength();
             long total = 0;
            //
                    Toast.makeText(applicationContext, "Downloading PDF...", 2000).show();

            while ((len = in.read(buffer)) > 0) {
                total += len;

            //Toast.makeText(applicationContext, "Downloading PDF: remaining " + (fileLength / total  )+ "%", 1).show();
                f.write(buffer, 0, len);
            }
            f.close();
            return true;
        } catch (Exception e) {
            e.printStackTrace();
            return false;
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T09:36:13.417

这是一种在 android 应用程序中显示 PDF 的方法，该应用程序使用[http://docs.google.com/viewer的支持将 PDF 文档嵌入到 android webview](http://docs.google.com/viewer)

伪

```
String doc="<iframe src='http://docs.google.com/viewer?url=+location to your PDF File+' 
          width='100%' height='100%' 
          style='border: none;'></iframe>"; 
```

示例如下所示

```
String doc="<iframe src='http://docs.google.com/viewer?url=http://www.iasted.org/conferences/formatting/presentations-tips.ppt&embedded=true' 
          width='100%' height='100%' 
          style='border: none;'></iframe>"; 
```

代码

```
WebView  wv = (WebView)findViewById(R.id.webView); 
wv.getSettings().setJavaScriptEnabled(true);
wv.getSettings().setPluginsEnabled(true);
wv.getSettings().setAllowFileAccess(true);
wv.loadUrl(doc);
//wv.loadData( doc, "text/html",  "UTF-8"); 
```

并在清单中提供

```
<uses-permission android:name="android.permission.INTERNET"/> 
```

[**看到这个答案**](https://stackoverflow.com/a/14578661/1450401)

编辑

如果您的 PDF 文档可以在线访问，请使用[Google 文档查看器](http://docs.google.com/viewer?url=http://mypdf.pdf)在 WebView 中打开您的 PDF

[参考](https://stackoverflow.com/a/11718721/1450401)

```
 wv.loadUrl("https://docs.google.com/gview?embedded=true&url=http://www.irs.gov/pub/irs-pdf/fw4.pdf"); 
```

不知道这些有多稳定

这是在 Android 上运行的其他开源 PDF 阅读器的列表

*   [Android PDF 查看器](http://code.google.com/p/apv/)
*   [APDF查看器](http://code.google.com/p/apdfviewer/)
*   [机器人阅读器](http://code.google.com/p/droidreader/)
*   [安卓-pdf](http://code.google.com/p/android-pdf/)

请注意，这些和任何其他从 MuPDF 派生的项目都受 GPL 条款的约束，[可能不适合商业用途](http://www.palminfocenter.com/news/6679/palm-sued-over-pdf-technology-dispute/)。

以下是适合商业使用的 SDK 列表：

*   [PDFTron](http://www.pdftron.com/pdfnet/mobile/android_pdf_library.html)
*   [土坯](http://www.adobe.com/)
*   [乔帕](http://www.qoppa.com/android/pdfsdk/)
*   [拉达伊](http://www.androidpdf.mobi)

# android - 如何从 DateUtils 只获取年份

> ID：14953606
> 
> 赞同：3
> 
> 时间：2013-02-19T09:07:31.030
> 
> 标签：android, date-format, android-date, android-dateutils

如何使用 DateUtils 仅获取日期的年份部分？我尝试使用

```
DateUtils.FORMAT_SHOW_YEAR 
```

但这似乎甚至返回了月份和日期。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T09:15:56.107

无需重新发明轮子

```
 SimpleDateFormat sdf = new SimpleDateFormat("yyyy");
   String year = sdf.format(new Date()); 
```

要考虑语言环境，请使用构造函数 SimpleDateFormat("template", Locale)

```
 SimpleDateFormat sdf = new SimpleDateFormat("yyyy", Locale.getDefault()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T09:10:28.890

使用 DateFormat "yyyy"，你只会得到年份

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T09:11:04.633

```
Calendar c = Calendar.getInstance(); 
c.setTime(sdf.parse(date));   // sdf is SimpleDateFormat
System.println(c.get(Calendar.YEAR))); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T09:13:42.153

您可以使用

```
Calendar c = Calendar.getInstance(); 
int year = c.get(Calendar.YEAR); 
```

你可以[在这里查看](https://stackoverflow.com/a/136434/1037442)

# java - 代码升级之间的 Mongo db 和 java 数据版本控制

> ID：14953607
> 
> 赞同：3
> 
> 时间：2013-02-19T09:07:33.297
> 
> 标签：java, mongodb, object, versioning

我有一个运行多个应用程序服务器的在线服务，其中有几个存储在 MongoDB 中的集合。我以持续部署的方式工作，这基本上意味着如果一切顺利，代码更新会触发自动化测试，然后是生产升级（这有点复杂，但我相信这个问题也与非 CD 部署有关）。

这在大多数情况下都有效，但有时我的一个（或多个）核心数据模型会发生变化，在这种情况下，升级可能会弄乱内存中的数据，然后是数据库中的数据。

我举个例子：

假设我有一个简单的数据对象：

```
public class User {
    private String id;
    private String name;
    private String[] friendsNames;
} 
```

现在我决定将用户更改为：

```
public class User {
    private String id;
    private String name;
} 
```

并将好友添加为单独的集合，其中存储了一个简单的对象，例如：

```
public class Friend {
    private String name;
    private String friendUserId;
} 
```

这导致了一个问题。在更改数据结构以适应新的数据模型之前，我不能升级我的服务，并且在我关闭服务之前不能更改数据，否则旧版本会读取新数据版本并搞砸。

因此，唯一的解决方案是关闭所有内容，在数据库上运行一些升级过程以更改所有内容，然后在运行新代码的情况下恢复服务。

所以最后的问题是：我想知道是否有版本数据的最佳实践解决方案（特别是 Mongo，如果这是相关的），以便旧版本应用程序能够继续使用旧数据，而新应用程序将“看到”新数据。我想到了像“UserV1.1”和“UserV1.2”这样的类版本，可以在mongo中搜索适当的类版本，但如果有人已经考虑过并想出来，我不想“重新发明轮子”智能解决方案。

需要明确的是，我不关心对象历史，我只是希望能够顺利升级应用程序版本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-28T04:28:27.753

欢迎来到“无模式”的乐趣。在我的应用程序中，我最终对对象进行了编码，以便它们可以经历一个“过渡”时期。也就是说，任何改变模型的版本都必须同时支持新旧“模式”。我将这些位投入生产，然后开始将所有内容转换的漫长过程。下一个版本，我们退出了过渡逻辑。这是一个痛苦的屁股，但它的工作原理。更改架构需要两个版本。

# tomcat7 - 在 Windows 7 上运行的 tomcat 的 maxConnections 默认值

> ID：14953609
> 
> 赞同：7
> 
> 时间：2013-02-19T09:07:39.563
> 
> 标签：tomcat7

我是 tomcat 的新手，想知道 windows 7 上 tomcat 的 maxConnection 的默认值。
已经检查了[http://tomcat.apache.org/tomcat-7.0-doc/config/http.html 上面](http://tomcat.apache.org/tomcat-7.0-doc/config/http.html)写着

> maxConnections ：服务器在任何给定时间接受和处理的最大连接数。当达到这个数字时，服务器将不再接受任何连接，直到连接数低于这个值。操作系统可能仍会根据 acceptCount 设置接受连接。默认值因连接器类型而异。对于 BIO，默认值为 maxThreads 的值，除非使用 Executor，在这种情况下，默认值为来自 executor 的 maxThreads 的值。对于 NIO，默认值为 10000。对于 APR/native，默认值为 8192。请注意，对于 Windows 上的 APR/native，配置的值将减小到小于或等于 maxConnections 的 1024 的最高倍数。这样做是出于性能原因。如果设置为 -1 的值，

我不确定是否`<Connector port="8090" protocol="HTTP/1.1" connectionTimeout="20000" redirectPort="8443" />`属于 BIO 或 NIO 或 APR/native

任何帮助，将不胜感激。
谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-19T22:26:22.607

这是我从 Tomcat 的文档中收集到的：

如果您没有通过元素的`protocol`属性明确指定它`Connector`（如上面的示例），tomcat 将搜索本机库（通过 LD_LIBRARY_PATH 在 Unix 上或在 Windows 上的 Path 环境变量）以查找 APR 连接器，如果未找到连接器它将使用 BIO（阻塞 IO）连接器（参见协议属性[Tomcat HTTP 连接器](http://tomcat.apache.org/tomcat-7.0-doc/config/http.html)的描述）。

对于 BIO 连接器，如果未指定，`maxConnections`将采用`maxThreads`属性值。反过来，默认值`maxThreads`是 200，除非您使用指向[Executor](http://tomcat.apache.org/tomcat-7.0-doc/config/executor.html)元素的 'executor' 属性，在这种情况下，它将是 executor 元素的 maxThreads 的值。

# java - 如何将项目“复制”到对它的 n 引用列表中？

> ID：14953615
> 
> 赞同：0
> 
> 时间：2013-02-19T09:08:02.140
> 
> 标签：java, list, copy

我在 Java 中有一些对象（比如一个 Double），我需要一个长度为 n 的列表，其每个元素都是对该 Double 的引用。我想要一个习惯用法，希望但不一定不使用 O(1) 仅内存。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T09:21:19.893

您可以使用 [java.util.Collections.nCopies(n, value)](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#nCopies%28int,%20T%29)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T09:29:05.937

为此目的创建一个数据结构怎么样？像这样的东西：

```
import java.util.HashMap;

public class SpecialArray {
    private HashMap<Integer, Double> elements;
    private Double specialElement;
    private int size;

    public SpecialArray(Double specialElement, int size) {
        this.elements = new HashMap<Integer, Double>();
        this.specialElement = specialElement;
        this.size = size;
    }

    public Double get(int index) {
        if(index<0 || index>=size) {
            return null;
        }
        if(elements.containsKey(index)) {
            return elements.get(index);
        }
        return specialElement;
    }

    public boolean add(Double d, int index) {
            if(index<0 || index>=size || elements.containsKey(index)) {
                    return false;
            }
            elements.put(index, d);
            return true;
    }
} 
```

当然，这不是一个完整的示例，可以使用泛型类型编写。但是，如果您的列表中还有其他一些元素，那么我认为这可能很有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T09:14:24.477

```
Collections.fill() 
```

可能会帮助你

# sql - 如何删除不在的记录

> ID：14953624
> 
> 赞同：12
> 
> 时间：2013-02-19T09:08:45.247
> 
> 标签：sql, sql-server, sql-delete

嗨，我有以下 SQL 查询，它给了我在**ProjectSchemes**和**Schemes**表中都存在的**Scheme_Id 。**我想从**Schemes**表中删除所有没有记录到**ProjectSchemes**表的记录。我该怎么做？请帮忙。我正在使用 MSSQL

 ******```
select scheme_id from Schemes where Scheme_Id
in(select s.Scheme_Id from Projects p 
inner join ProjectSchemes ps on ps.Project_Id=p.Project_Id
inner join Schemes s on s.Scheme_Id=ps.Scheme_Id) 
```

**我正在尝试执行以下操作，但它不起作用。不工作意味着没有记录受到影响，但是当我检查我的 Schemes 表时，记录太多以至于在 ProjectSchemes 表中找不到它们的 scheme_id**

```
delete from Schemes where Scheme_Id
not in(select s.Scheme_Id from Projects p 
inner join ProjectSchemes ps on ps.Project_Id=p.Project_Id 
inner join Schemes s on s.Scheme_Id=ps.Scheme_Id) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-19T09:12:39.257

```
DELETE FROM schemes
WHERE scheme_id NOT IN (
    SELECT DISTINCT scheme_id
    FROM projectschemes
    WHERE scheme_id IS NOT NULL
) 
```

或者您也可以使用

```
DELETE
FROM schemes
WHERE NOT EXISTS (
      SELECT 1
        FROM projectschemes
       WHERE projectschemes.scheme_id = schemes.ID
      ) 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-19T10:18:48.820

我想从假设开始。

1.  你有一个链式数据模型： Projects --* ProjectSchemes --* Schemes
2.  你的目标是只有有效的链，所以没有没有项目的项目方案，没有没有项目方案的方案。
3.  NULL 不是您的其中一个 ID 的有效值。
4.  所有 id 在他们的表中都是唯一的
5.  您不使用数据库的参照完整性机制

因此，您的 SELECT 将在 Schemes 表中列出所有 Schemes 的 scheme_id。

也就是说，您应该开始删除所有没有相应项目的 ProjectSchemes。这些是 ID 为 NULL 或 ID 不存在于 Projects 表中的 ProjectSchemes：

```
DELETE ProjectSchemes WHERE (Project_Id is NULL) OR 
(NOT EXISTS (SELECT * FROM Projects WHERE
             Projects.Project_Id = ProjectSchemes.Project_Id)) 
```

在没有项目的情况下删除 ProjectsSchemes 后，我们现在在 Schemes 表中可能有一些新的孤儿。接下来是删除所有 ID 为 NULL 或 ID 不存在于 ProjectsSchemes 表中的方案：

```
DELETE Schemes WHERE (Scheme_Id is NULL) OR 
(NOT EXISTS (SELECT * FROM ProjectSchemes WHERE
             ProjectSchemes.Scheme_Id = Schemes.Scheme_Id)) 
```

仍然有机会在不删除 ProjectSchemes 的情况下拥有未连接到项目的方案。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-19T09:15:22.803

```
DELETE s
FROM Schemes s LEFT JOIN ProjectSchemes ps ON s.Scheme_Id=ps.Scheme_Id
WHERE ps.Scheme_Id IS NULL 
```

但听起来你需要这个

```
DELETE sp
FROM ProjectSchemes sp LEFT JOIN Schemes s ON sp.Scheme_Id=s.Scheme_Id
WHERE s.Scheme_Id IS NULL 
```******

# ios - iOS中显示键盘时滚动视图不滚动

> ID：14953628
> 
> 赞同：2
> 
> 时间：2013-02-19T09:09:06.707
> 
> 标签：ios

我有一个文本字段，当用户单击时会向上滑动键盘。然后滚动视图调整，以便您可以阅读您正在输入的内容。

我的问题是，一旦这样，我想让用户继续在屏幕上滚动。如何才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T09:29:37.540

**第1部分：**

滚动视图的内容大小实际上与其包含的视图的大小或位置无关。如果要更改内容视图的大小以及滚动视图的内容，则需要调用两种不同的方法。

```
 CGSize newSize;
 UIScrollView *scrollView;
 // assume self is the content view
 CGRect newFrame = (CGRect){CGPointZero,newSize}; // Assuming you want to start at the     top-left corner of the scroll view. Change CGPointZero as appropriate
  [  scrollView setContentSize:newSize]; // Change scroll view's content size
  [self setFrame:newFrame]; // Change views actual size 
```

**第2部分：**

setNeedsDisplay 将整个视图标记为需要显示。要使其仅显示可见部分，您需要使用 setNeedsDisplayInRect:visibleRect。假设视图位于左上角（其框架的原点为 0）并且滚动视图不允许缩放，则可以使用滚动视图的内容偏移量和边界大小找到可见的矩形。

```
 CGRect visibleRect;
  visibleRect.origin = [scrollView contentOffset];
  visibleRect.size = [scrollView bounds].size;
  [self setNeedsDisplayInRect:visibleRect]; 
```

如果仅部分更改，您也可以选择绘制可见矩形的一部分。

您还可以查看以下示例：

[TPKeyboardAvoiding](https://github.com/michaeltyson/TPKeyboardAvoiding)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-19T09:35:20.707

```
- (void)viewDidLoad
 {
[super viewDidLoad];

[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(keyboardWasShown:)
                                             name:UIKeyboardDidShowNotification
                                           object:nil];
[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(keyboardWasShown:)
                                             name:UIKeyboardWillHideNotification
                                           object:nil];
 }

- (void)keyboardWasShown:(NSNotification *)notification
 {
     // To avoid keyboard hides the view
CGRect frame = self.view.bounds; 
if (capitalTextField.enabled ==YES) 
{
    if ([notification name]== UIKeyboardDidShowNotification ) 
    {

        frame.origin.y += 200;
        [self.scrollView scrollRectToVisible:frame animated:YES];
    }
    else
    {
        frame.origin.y -= 200;
        [self.scrollView scrollRectToVisible:frame animated:YES]; 
    }
  }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-19T09:40:29.793

只需增加 Scrollview 的 contentsize 属性的高度

# objective-c - cocos2d中没有正确检测到CGPath

> ID：14953630
> 
> 赞同：2
> 
> 时间：2013-02-19T09:09:07.720
> 
> 标签：objective-c, cocos2d-iphone, cgpath

通过帮助和建议，我为我的精灵创建了一条路径，以便只能触摸不透明的部分。这是我想出的路径：

```
 path = CGPathCreateMutable();
    CGPathMoveToPoint(path, NULL, endTouch.x, endTouch.y);
    CGPathAddLineToPoint(path, NULL, 0, 250);
    CGPathAddLineToPoint(path, NULL, 30, 0);
    CGPathCloseSubpath(path); 
```

这适用于我所有的其他课程，除了一个。无论我在哪里点击，xcode 都会使用以下代码在“外部”打印：

```
for(int i = 0; i < [sprArray count]; i++)
{
    CCSprite *sprite = (CCSprite *)[sprArray objectAtIndex:i];
    if(CGRectContainsPoint([sprite boundingBox], location))
    {
        selectedSprite = sprite;
        location = [selectedSprite convertToNodeSpace:location];
        if (CGPathContainsPoint(path, NULL, location, NO) ) 
        {
            NSLog(@"inside");
        }
        else 
        {
            NSLog(@"outside");
        }

        break;
    }
} 
```

如果我进入 if 条件，我只能移动我的精灵，否则，即使我点击实际的彩色精灵，它也不会得到我设置的路径。我的测量值有误吗？如果没有，我做错了什么？这类似于我正在尝试使用的图像......

![样本](../Images/f9fc87ddfbec32e70829528f42e06d59.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T09:27:09.257

这仅适用于图像大小相同的情况。根据图像大小计算坐标。

![在此处输入图像描述](../Images/25c7d0a9f7a308da6a419905e1e32325.png)

```
CGPathMoveToPoint(path,    NULL,   54, 0 ); //1: 54 = distance from left, 0 = dis fem bottom
CGPathAddLineToPoint(path, NULL,   28, 34 );
CGPathAddLineToPoint(path, NULL,   36, 76 );
CGPathAddLineToPoint(path, NULL,   51, 104 );
CGPathAddLineToPoint(path, NULL,   46, 147 );
CGPathAddLineToPoint(path, NULL,   67, 147 );
CGPathAddLineToPoint(path, NULL,   70, 105 );
CGPathAddLineToPoint(path, NULL,   56, 66 );
CGPathAddLineToPoint(path, NULL,   52, 42 );
CGPathAddLineToPoint(path, NULL,   67, 20 );
CGPathAddLineToPoint(path, NULL,   92, 0 );
CGPathCloseSubpath(path); 
```

# java - 无法在 Java 中播放声音

> ID：14953633
> 
> 赞同：1
> 
> 时间：2013-02-19T09:09:18.627
> 
> 标签：java

```
 class One {

    public static void main(String[] arg) {
        new One().play();
    }

    public void play() {
        try {
            AudioClip clip = Applet.newAudioClip(new URL(
                    "file:\\C:\\Documents and Settings\\admin\\Desktop\\javabottle-open.wav"));
            clip.play();
            URL ur = new URL("file:\\C:\\Documents and Settings\\admin\\Desktop\\flute+hrn+mrmba.aif");
            clip = Applet.newAudioClip(ur);
            clip.play();
            Thread.sleep(10000);
        } catch(Exception e) {
            System.out.println(e.getMessage());
        }
    }
} 
```

我没有收到任何异常消息，也没有播放音频。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T09:21:55.370

这对我有用

```
public class ClipTest {

    public void run() throws UnsupportedAudioFileException, IOException, LineUnavailableException {
        InputStream inRequest = this.getClass().getResourceAsStream("batR.wav");
        AudioInputStream sound = AudioSystem.getAudioInputStream(inRequest);

        DataLine.Info info = new DataLine.Info(Clip.class, sound.getFormat());
        Clip clip = (Clip) AudioSystem.getLine(info);
        clip.open(sound);

        clip.addLineListener(new LineListener() {

            public void update(LineEvent event) {
                if(event.getType() == LineEvent.Type.STOP) {
                    event.getLine().close();
                    System.exit(0);
                }
            }
        });

        clip.start();

    }

    public static void main(String[] args) throws Exception {
        ClipTest clipTest = new ClipTest();
        clipTest.run();

    }
} 
```

# javascript - 在 iframe 中加载站点在 IE 中出现错误

> ID：14953638
> 
> 赞同：1
> 
> 时间：2013-02-19T09:09:22.910
> 
> 标签：javascript, internet-explorer, iframe, popup

我有一个要加载到弹出窗口内的 iframe 中的 url。父窗口有一个脚本，可以将脚本插入到弹出窗口中，这样弹出窗口就会在弹出窗口关闭时刷新父窗口。

```
function popUp(url) {
    newwindow = window.open('', 'mypopup', '');
    var tmp = newwindow.document;
    tmp.write('<!DOCTYPE html><html><head><title>My Pop-Up</title></head>');
    tmp.write('<body><iframe src="' + url + '" scrolling="no" frameborder="0"></iframe>');
    tmp.write('<script type="text/javascript">window.onunload = function(){ window.opener.location.reload(); }</script></body></html>');
    tmp.close();
} 
```

我选择通过 javascript 编写 html，因为我无法编辑正在加载的页面（当弹出窗口关闭时，我需要真正重新加载父级。）这适用于 chrome 和 firefox，但 IE 有错误' **SCRIPT5: Access被拒绝。**' 我不想访问正在 iframe 中加载的页面的任何部分，我只想加载它。

当我在新的 IE 选项卡中打开页面时，它加载正常。此外，如果我通过 showModalDialog() 加载 url，页面也会加载。我希望我可以只使用 showModalDialog() 但是当在弹出页面上单击保存按钮时，会打开另一个弹出窗口，所以我想这是不可能的。

帮助将不胜感激。

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T09:36:52.147

好吧，如果您只想在弹出窗口**关闭**时检查，那么您可以启动外部计时器来检查：

```
var checkPopup = window.setInterval(function() {
    if (newwindow.closed) {
        window.clearInterval(checkPopup);
        document.location.reload();
    }
}, 100); 
```

这样，您就不必依赖弹出窗口本身内部的花哨脚本。

# timer - EJB 3.0 TimerService 重新部署

> ID：14953641
> 
> 赞同：0
> 
> 时间：2013-02-19T09:09:32.340
> 
> 标签：timer, weblogic, ejb-3.0

几周前，我们开发了一个 EJB 3.0 TimerService 来按需安排一些任务（当用户单击按钮时，我们将创建计时器来执行一些任务）。到目前为止，它一直运行良好，直到今天。

昨天我们重新部署了包含 de TimerService 的 EJB 来更新一些属性，而今天没有触发任何计时器，即使已经创建了一些。

¿ 这正常吗？我的意思是，如果您不更改 ejbTimeOut 的签名，它不应该在重新部署后像往常一样启动吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T12:48:16.773

要使计时器持久使用 TimerHandle，如下所述：

要保存 Timer 对象以供将来参考，请调用其 getHandle 方法并将 TimerHandle 对象存储在数据库中。（TimerHandle 对象是可序列化的。）要重新实例化 Timer 对象，请从数据库中检索句柄并在句柄上调用 getTimer。TimerHandle 对象不能作为定义在远程或 Web 服务接口中的方法的参数传递。换句话说，远程客户端和 Web 服务客户端无法访问 bean 的 TimerHandle 对象。但是，本地客户端没有此限制。

取自[http://docs.oracle.com/javaee/5/tutorial/doc/bnboy.html](http://docs.oracle.com/javaee/5/tutorial/doc/bnboy.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T11:16:43.540

定时器默认是持久的。当您重新启动服务器、重新部署应用程序等时，如果它们被错过，可能会超时。

我过去也遇到过类似的问题。因此，建议取消所有以前的现有计时器，然后再创建一个新计时器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T15:17:23.203

这就是 EJB 3.0 中的行为。在 EJB 3.1 中，计时器服务变得更好。它支持自动计时器，它是在成功部署时创建的。您可能想看看升级到 EJB 3.1 是否适合您。

EE6 教程：[使用定时器服务](http://docs.oracle.com/javaee/6/tutorial/doc/bnboy.html)

> Enterprise bean 计时器是程序化计时器或自动计时器。通过显式调用 TimerService 接口的定时器创建方法之一来设置程序化定时器。自动计时器是在成功部署企业 bean 时创建的，该企业 bean 包含使用 java.ejb.Schedule 或 java.ejb.Schedules 注释进行注释的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-16T05:53:20.547

使用 --keepstate 标志等于 true 的 asadmin redeploy 命令。

完整示例：

```
asadmin redeploy --keepstate=true --name=taskee-1.0-SNAPSHOT target/taskee-1.0-SNAPSHOT.war 
```

更多信息在：

[http://www.oracle.com/technetwork/articles/java/pongegf-1517943.html](http://www.oracle.com/technetwork/articles/java/pongegf-1517943.html)

# actionscript-3 - AS3 带补间的滑动拼图

> ID：14953642
> 
> 赞同：-5
> 
> 时间：2013-02-19T09:09:36.383
> 
> 标签：actionscript-3

我想知道如何在这里实现滑动拼图：

> [http://mypuzzle.org/sliding](http://mypuzzle.org/sliding)

我一直用谷歌搜索，但找不到任何教程

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T09:16:59.453

[TweenMax](http://www.greensock.com/tweenmax/)用于补间对象。

我在谷歌搜索时发现了很多教程。例如[http://ajaybadgujar.com/2011/12/06/as3-number-slide-puzzle-game-for-beginners/](http://ajaybadgujar.com/2011/12/06/as3-number-slide-puzzle-game-for-beginners/)

或者[在这里](http://www.puzzlescripts.com/nm-Sliding_Puzzle_AS3_Simple-cp-39)你可以找到很多与谜题相关的主题和源代码

如果您认为您立即开始申请，那您就大错特错了。你必须分解应用程序并思考你真正需要什么。以一些快速简单的模型为例：

*   主菜单
*   网格（作为数组）
*   瓷砖
    *   填充网格数组并通过循环更新
    *   包含自己的图片
    *   将事件侦听器附加到对象（MouseEvent.CLICK 或其他）
*   检查每一步的胜利情况。

# asp.net - asp.net Usercontrol + 控件值总是返回true

> ID：14953644
> 
> 赞同：1
> 
> 时间：2013-02-19T09:09:40.047
> 
> 标签：asp.net, user-controls

我正在尝试使用底层复选框构建一个简单的动画“开”和“关”开关控件，以便在“开关块”左右移动（开和关）时存储状态，当我将控件导入到页面时我需要使用，我得到的值总是 True，请指教我做错了什么。谢谢。：

**澳交所：**

```
<html>
<head>
    <title></title>

    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"> </script>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.9.2/jquery-ui.min.js"> </script>
</head>
<body>

    <div class="switchcontainer">
        <div id="on">On</div>
        <div id="off">Off</div>
        <div class="block"></div>
    </div>
    <asp:CheckBox ID="chkSwitch" runat="server" Style="display:none"/>

            <script>
                $(".block").click(function () {
                    var $button = $(".block");
                    if ($button.data("lastMove") == "+=46") {
                        $('#<%= chkSwitch.ClientID %>').removeAttr('checked'); // --> change check state
                        $button.animate({
                            left: '-=46'
                        });
                        $button.data("lastMove", '-=46');
                    } else {
                        $('#<%= chkSwitch.ClientID %>').attr('checked', 'checked'); // --> change check state
                        $button.animate({
                            left: '+=46'
                        });
                        $button.data("lastMove", '+=46');
                    }
                });
</script>

</body>
</html> 
```

**ASCX.CS**

```
public partial class BoolSwitch : System.Web.UI.UserControl
    {
        public bool On    
        {
            get { return chkSwitch.Checked; }
        }
    } 
```

**一些使用用户控件的页面：**

```
<%@ Register TagPrefix="BoolSwitch" TagName="BoolSwitch" Src="/UserControls/BoolSwitch.ascx" %>

<BoolSwitch:BoolSwitch runat="server" ID="boolSwitch_1" /> 
```

**代码背后：**

```
 protected void Page_Load(object sender, EventArgs e)
        {
            var x = boolSwitch_1.On; // --> This value is always true;
        } 
```

# c - gcc优化说明

> ID：14953649
> 
> 赞同：9
> 
> 时间：2013-02-19T09:09:48.890
> 
> 标签：c, performance, optimization, gcc

出于黑客的好奇心，我想知道如何`gcc`巧妙地优化下面的功能？

```
int c() {
        int i, j = 0;
        for (i = 0; i < 10; i++) {
                j += i;
        }
        return j;
} 
```

`$objdump -D c.o`下面是 arm 但 x86 在逻辑上没有什么不同。

```
00000000 <c>:
   0:   202d        movs    r0, #45 ; 0x2d
   2:   4770        bx  lr 
```

我最想知道这是否是一系列优化或模板匹配之类的结果？有没有关于这种优化的文档？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-19T09:34:05.137

优化器分阶段/通过...当您指定 -O2 时，启用了许多优化。这里发挥作用的主要优化是

1.  [循环展开](http://en.wikipedia.org/wiki/Loop_unwinding)
2.  [持续传播](http://en.wikipedia.org/wiki/Constant_folding#Constant_propagation)
3.  [不断折叠](http://en.wikipedia.org/wiki/Constant_folding#Constant_folding)
4.  [死码消除](http://en.wikipedia.org/wiki/Dead_code_elimination)

[http://gcc.gnu.org/onlinedocs/gcc/Optimize-Options.html](http://gcc.gnu.org/onlinedocs/gcc/Optimize-Options.html)

所以这段代码

```
int i, j = 0;
for (i = 0; i < 10; i++) {
    j += i;
}
return j; 
```

循环展开后变为

```
int i, j = 0;
i=0; j += i;
i=1; j += i;
i=2; j += i;
i=3; j += i;
i=4; j += i;
i=5; j += i;
i=6; j += i;
i=7; j += i;
i=8; j += i;
i=9; j += i;
return j; 
```

经过不断的传播通过

```
int i, j = 0;
i=0; j += 0;
i=1; j += 1;
i=2; j += 2;
i=3; j += 3;
i=4; j += 4;
i=5; j += 5;
i=6; j += 6;
i=7; j += 7;
i=8; j += 8;
i=9; j += 9;
return j; 
```

消除死码后

```
j = 0;
j += 0;
j += 1;
j += 2;
j += 3;
j += 4;
j += 5;
j += 6;
j += 7;
j += 8;
j += 9;
return j; 
```

[不断折叠](http://en.wikipedia.org/wiki/Constant_folding#Constant_folding)后

```
j = 45;
return j; 
```

最后，

```
return 45; 
```

# c# - 从 c# 连接到 scardsyn.dll 时出现问题

> ID：14953654
> 
> 赞同：0
> 
> 时间：2013-02-19T09:09:52.357
> 
> 标签：c#, .net, dll

当我尝试运行以下代码时：

```
[DllImport("scardsyn.dll")] 
public static int SCardCLGetUID(int ulHandleCard, byte[] pucUID, int ulUIDBufLen, ref int pulnByteUID); 
```

我收到以下错误：

```
'Star.ModWinsCard.SCardCLGetUID(int, byte[], int, ref int)' must declare a body because it is not marked abstract, extern, or partial 
```

任何帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T09:18:24.060

它在消息中，您必须将您的方法标记为[extern](http://msdn.microsoft.com/en-us/library/e59b22c5%28v=vs.80%29.aspx)：

```
[DllImport("scardsyn.dll")] 
public static extern int SCardCLGetUID(int ulHandleCard, byte[] pucUID, int ulUIDBufLen, ref int pulnByteUID); 
```

# c# - 强制转换数组对象

> ID：14953655
> 
> 赞同：0
> 
> 时间：2013-02-19T09:09:55.473
> 
> 标签：c#, .net, arrays

我的要求是`Clone`一个数组`Object`。这是我正在使用的那种代码：

```
 Array numbers = Array.CreateInstance(typeof(int), 10);
        index = 0;
        foreach (int x in numbers)
        {
            numbers.SetValue(index * index, index);
            index++;
        }
        Object numberClone = numbers.Clone(); 
```

现在，我如何将`Object`numberClone 转换`Array`为整数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T10:07:39.613

```
Array numbers = Array.CreateInstance(typeof(int), 10);
int index = 0;
foreach (int x in numbers)
{
    numbers.SetValue(index * index, index);
    index++;
}
Array numberClone = (Array)numbers.Clone(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T09:16:14.080

为什么不在 foreach 中设置相同的值？

像这样

```
int[] numbers = new int[10]();
int[] numberClone = new int[10]();

foreach(var x in numbers)
{
nubmers[index*index] = index;
numberClone[index*index] = index;
} 
```

像这样的事情我在没有 VS 的情况下这样做了，如果它错了，我很抱歉：P

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T09:14:11.300

如果您使用的是 .net 3.5，这可能会对您有所帮助

```
object[] objarr = new object[] {1,2,3 };
 int[] arr= objarr.Cast<int>().ToArray(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T09:14:33.260

```
 Array numbers = Array.CreateInstance(typeof(int), 10);
           int index = 0;
            foreach (int x in numbers)
            {
                numbers.SetValue(index * index, index);
                index++;
            }
            Object numberClone = numbers.Clone();

            Array castNumbers = (Array)numberClone;

            foreach(int x in castNumbers)
            {

                Console.WriteLine(x);
            } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-19T09:15:51.047

```
Object numberClone = numbers.Clone();
var arr = numberClone as Array;
var listOfInt = arr.OfType<int>().Select(c => c).ToArray(); 
```

# iphone - 如何生成任何图像的二维码

> ID：14953658
> 
> 赞同：-1
> 
> 时间：2013-02-19T09:10:15.277
> 
> 标签：iphone, qr-code

当我去阅读它时，是否有任何 API 可以生成任何图像的 QR 码，它会显示相同的图像。

任何建议都会有所帮助。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T23:46:07.277

没有直接的方法将图像编码为 QR 码。这样做有几个问题： - 需要以某种方式对图像进行编码，并且在 QR 码上没有这样做的标准。所以任何实现都不会在全球范围内工作。- 图像通常包含数百或数千 kB，而大多数移动扫描仪难以解码超过数百字节的 QR 码（这至少是信息量的 1.000 倍！）。

简而言之：这是不可能的。对不起。

一种解决方法是将图像上传到服务器，获取该图像的链接并使用该链接创建一个二维码。因此，当扫描二维码时，您的图像会显示在浏览器上。

[QR Droid](http://q.qr.ai)（适用于 Android）实现了此解决方法。（QR Droid > 创建 > 本地图像）。但我认为没有任何 API 可以完成整个过程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-25T07:18:57.097

创建 Chrome 自定义搜索（转到 chrome:settings -> 管理自定义搜索）

然后只需创建一个条目：

```
QR Generator | qr | https://chart.googleapis.com/chart?cht=qr&chs=300x300&chld=H|0&chl=%s 
```

然后每当您打开新标签或其他任何内容时，您只需输入 qr space 您的网址

# mysql - 使用 MySQL WorkBench 分配架构权限时出现 MySql 错误 1064

> ID：14953659
> 
> 赞同：4
> 
> 时间：2013-02-19T09:10:22.810
> 
> 标签：mysql, mysql-workbench

我刚刚在 Windows 8 64 位上下载并安装了最新的 MySQL 版本（5.6）。安装过程中使用了默认值，一切运行顺利。

使用 MySQL Workbench，我用一个简单的表创建了一个模式，还创建了一个新用户。在架构权限选项卡上，我为用户添加了一个新条目，按选择“全部”按钮选择权限并点击保存更改。一旦我这样做，我就会得到以下错误：

![MySQL 错误 1064](../Images/0fe6f97661a6422034001902f7d36b68.png)

任何想法为什么会发生这种情况？我对 DB 很陌生，所以如果您有任何我可以尝试的替代方法，请用简单（逐步）的术语进行解释。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T11:47:48.393

当您打开命令行 mysql 会话并选择数据库时，您可以发出命令

授予选择、插入、更新、删除、创建、删除、引用、索引、更改、创建临时表、锁定表、创建视图、显示视图、创建例程、更改例程、执行、事件、触发 dev_runeslinger。* 到 'dev_runeslinger '@'本地主机';

因此，这是一种对 _ 的错误解释/解析的情况，因为它被转义了。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-19T09:21:26.473

它似乎是MySQL Workbench中的错误[#68175 ：](http://bugs.mysql.com/bug.php?id=68175)

> 包含下划线的数据库名称出现转义/导致 SQL 错误

它是上个月报道的，它仍然开放，所以你可以降级到早于 5.2.46 的版本，或者等待它是否修复。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-01T10:51:17.123

我`phpMyAdmin`通过使用以下查询实现了它，也可以从命令行以管理员身份实现。

`GRANT ALL ON schema_name.* TO 'schemauser_name'@'%' WITH GRANT OPTION;`

# xslt - 对 XSLT 脚本感到困惑

> ID：14953665
> 
> 赞同：0
> 
> 时间：2013-02-19T09:10:45.297
> 
> 标签：xslt

嗨，我想创建一个 HTML 表格，在一列中显示数字（年），在第二列中显示数据。下面是我的xslt。我真的很困惑，因为他们有相同的标签。

```
<chapter>
<row>
        <entry>
            <para>1984</para>
        </entry>
        <entry>
            <para>International Business Companies Act passed into
            law.</para>
        </entry>
    </row>
    <row>
        <entry>
            <para>2004</para>
        </entry>
        <entry>
            <para>BVI Business Companies Act passed into law, coming into
            force on 1 January 2005.</para>
        </entry>
    </row>
    <row>
        <entry>
            <para>2005</para>
        </entry>
        <entry>
            <para>All three corporate statutes exist in parallel and it is
            possible to incorporate companies under any of them.</para>
        </entry>
    </row>
    <row>
        <entry>
            <para>2006</para>
        </entry>
        <entry>
            <para>Incorporation provisions in the International Business
            Companies Act and the Companies Act are repealed on 31 December
            2005; the Acts remain in force but new companies may only be
            incorporated under the BVI Business Companies Act.</para>
        </entry>
    </row>
</chapter> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T09:30:59.963

我假设您发布的 XML 的前两个元素由 <row> 元素包装，并且所有行都分组在称为行的父元素下。

如果其中一些假设是错误的，请告诉我，我会更正代码。

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

    <xsl:output mode="html" indent="yes" omit-xml-declaration="yes"/>

    <xsl:template match="text()" />

    <!-- I am assuming that the parent element for the set of row elements is
         named rows. You can change this to match your XML -->
    <xsl:template match="chapter">
        <table>
            <tr>
                <th>Year</th>
                <th>Data</th>
            </tr>
            <xsl:apply-templates select="row" />
        </table>
    </xsl:template>

    <xsl:template match="row">
        <tr>
            <xsl:apply-templates select="*" />
        </tr>
    </xsl:template>

    <xsl:template match="para">
        <td><xsl:value-of select="." /></td>
    </xsl:template>

</xsl:stylesheet> 
```

更新：如果您只想匹配每行的第一个 entry/para 元素，那么您应该使用如下模板：

```
<xsl:template match="entry[1]/para">
    <!-- Put your code here -->
</xsl:template> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T09:17:48.040

[下面是使用 XSLT](http://www.bewebmaster.com/80.php)创建 HTML 表的示例。示例中使用的数据集与您的 XML 非常相似，只需将示例`<book>`标签替换为您的`<row>`标签等等。

# javascript - jquery的简单timespinner？

> ID：14953669
> 
> 赞同：0
> 
> 时间：2013-02-19T09:10:53.513
> 
> 标签：javascript, jquery, spinner

我是日期和时间方面的新手，我需要为我的应用程序创建一个时间微调器。我已经使用谷歌得到我的要求，但没有达到我的要求。[我需要一个像这个示例这样](http://jqueryui.com/spinner/#time)的简单时间微调器。但我需要那个 TimeSpinner 而不使用 global.js。

有没有办法像上面的链接一样获得简单的 timeSpinner？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T08:02:06.557

**[我从HERE](https://github.com/JQFAQ/DateTimePicker/blob/master/TimeSpinner.js)**找到了一个 Time spinner 。哪个更有用。我希望这会对你有更多帮助。

# c++ - OpenGL 和 QtQuick 纹理问题

> ID：14953671
> 
> 赞同：3
> 
> 时间：2013-02-19T09:11:02.433
> 
> 标签：c++, qt, opengl-es, qtquick2

我正在基于 Qt 附带的“openglunderqml”示例在 C++ 中开发一个简单的 QQuickItem 实现。我做了一些修改以使用不同的着色器和我加载的两个纹理。这个想法是着色器将在两个纹理之间交叉淡入淡出（这基本上只是我加载到纹理中的图像）。

当我将这个 QQuickItem 单独放在 QML 文件中并运行它时，一切正常。图像彼此交叉淡入淡出（我设置了一个属性动画以保持它们交叉淡入淡出）并且一切看起来都很好。但是，如果我放置其他元素（例如文本），则文本无法正确呈现——只是形状奇特的小块。如果我把一张图片放进去，事情就会变得很奇怪。而不是 QQuickItem 呈现它应该呈现的框，它呈现全屏和倒置。据我所知，其他图像从未加载。

我想我一定没有做我应该做的事情，但我不知道是什么。请注意，第一个代码块包含着色器和渲染内容，第二个包含函数 loadNewTexture()，它将新图像加载到纹理中（每个纹理仅调用一次 - 不是每次渲染），第三个包含 QtQuick .qml 文件.

下面是 opengl 代码（在 QQuckItem::Paint 方法中）：

```
// Builds the OpenGL shaders that handle the crossfade
if (!m_program) {
    m_program = new QOpenGLShaderProgram();
    // Shader loads coordinate positions
    m_program->addShaderFromSourceCode(QOpenGLShader::Vertex,
                                       "attribute vec2 position;"
                                       "varying vec2 texcoord;"
                                       "void main() {"
                                       "    gl_Position = vec4(position, 0.0, 1.0);"
                                       "    texcoord = position * vec2(0.5) + vec2(0.5);"
                                       "}");

    // Shader does the crossfade
    m_program->addShaderFromSourceCode(QOpenGLShader::Fragment,
                                       "uniform lowp float xfade;"
                                       "uniform sampler2D textures[2];"
                                       "varying vec2 texcoord;"
                                       "void main() {"
                                       "    gl_FragColor = mix("
                                       "        texture2D(textures[0], texcoord),"
                                       "        texture2D(textures[1], texcoord),"
                                       "        xfade"
                                       "    );"
                                       "}");

    m_program->bindAttributeLocation("vertices", 0);
    m_program->link();

    connect(window()->openglContext(), SIGNAL(aboutToBeDestroyed()),
            this, SLOT(cleanup()), Qt::DirectConnection);
}

m_program->bind();

// Loads corner vertices as triangle strip
m_program->enableAttributeArray(0);
float values[] = {
    -1, -1,
     1, -1,
    -1,  1,
     1,  1
};
m_program->setAttributeArray(0, GL_FLOAT, values, 2);

// Loads the fade value
m_program->setUniformValue("xfade", (float) m_thread_xfade);

glEnable(GL_TEXTURE_2D);

// Check if a new texture needs to be loaded
if (!new_source_loaded && !m_adSource.isEmpty())
    new_source_loaded = loadNewTexture(m_adSource);

// Loads texture 0 into the shader
glActiveTexture(GL_TEXTURE0);
glBindTexture(GL_TEXTURE_2D, textures[0]);
m_program->setUniformValue("textures[0]", 0);

// Loads texture 1 into the shader
glActiveTexture(GL_TEXTURE1);
glBindTexture(GL_TEXTURE_2D, textures[1]);
m_program->setUniformValue("textures[1]", 1);

// Sets the OpenGL render area to the space given to this components
glViewport((GLint) this->x(), (GLint) this->y(), (GLint) this->width(), (GLint) this->height());

// Sets some parameters
glDisable(GL_DEPTH_TEST);

// Sets the clear color (backround color) to black
glClearColor(0, 0, 0, 1);
glClear(GL_COLOR_BUFFER_BIT);

// Draws triangle strip
glEnable(GL_BLEND);
glBlendFunc(GL_SRC_ALPHA, GL_ONE);
glDrawArrays(GL_TRIANGLE_STRIP, 0, 4);

glDisable(GL_BLEND);
glDisable(GL_TEXTURE_2D);

// Cleans up vertices
m_program->disableAttributeArray(0);
m_program->release(); 
```

loadNewTexture() 函数：

```
bool AdRotator::loadNewTexture(QUrl source) {
    // Load the image from source url
    QImage image(source.path());

    // Check that the image was loaded properly
    if (image.isNull()) {
        qDebug() << QString("AdRotator::loadTexture: Loading image from source: ") << source.toString() << QString(" failed.");
        return false;
    }

    // Update this as the active texture
    active_texture = !active_texture;

    // Convert into GL-friendly format
    QImage GL_formatted_image = QGLWidget::convertToGLFormat(image);

    // Check that the image was converted properly
    if (image.isNull()) {
        qDebug() << QString("AdRotator::loadTexture: Converting image from source: ") << source.toString() << QString(" failed.");
        return false;
    }

    // Generate the texture base
    glGenTextures(1, &textures[active_texture]);
    glBindTexture(GL_TEXTURE_2D, textures[active_texture]);

    // Give texture parameters (scaling and edging options)
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S,     GL_CLAMP_TO_EDGE);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T,     GL_CLAMP_TO_EDGE);

    // Load pixels from image into texture
    glTexImage2D(
        GL_TEXTURE_2D, 0,           /* target, level of detail */
        GL_RGBA,                    /* internal format */
        GL_formatted_image.width(), GL_formatted_image.height(), 0,           /* width, height, border */
        GL_RGBA, GL_UNSIGNED_BYTE,   /* external format, type */
        GL_formatted_image.bits()   /* pixels */
    );

    if (textures[active_texture] == 0) qDebug() << QString("New Texture post-load failed.");

    return true;
} 
```

.qml 文件：

```
import QtQuick 2.0

Item {
    width: 1920
    height: 1080

    /* Image{} element breaks things
    Image {
        id: image1
        x: 0
        y: 0
        anchors.rightMargin: 0
        anchors.bottomMargin: 0
        anchors.leftMargin: 0
        anchors.topMargin: 0
        sourceSize.height: 1080
        sourceSize.width: 1920
        anchors.fill: parent
        fillMode: Image.PreserveAspectCrop
        source: "images/background.png"
    }*/

    /* The QQuickItem */
    ImageCrossfader {
        x: 753
        y: 107
        width: 1150
        height: 865
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T01:41:42.750

我最近做了几乎相同的练习（没有实际运行你的代码，只处理了一个纹理）我想我可能知道你错过了什么：你必须确保你的**OpenGL 状态机留在最后您的绘画功能**（或多或少）**与您在开始时找到的完全一样**。您确实释放了着色器程序并禁用了数组属性，但没有取消绑定两个纹理单元中的两个纹理。您的paint成员函数末尾的以下内容应该可以解决问题：

```
glActiveTexture(GL_TEXTURE1);
glBindTexture(GL_TEXTURE_2D, 0);
glActiveTexture(GL_TEXTURE0);
glBindTexture(GL_TEXTURE_2D, 0); 
```

除此之外，还有两条评论：

*   请注意，您的 QML 文件中的*image1*图像将完全隐藏您的 ImageCrossfader 项目（如果我没有错误地解释 anchors 属性）。您添加到 QML 场景中的所有内容都将*在*您的*opengl 底层*上绘制（因此得名 ;)）。

*   您可以安全地删除所有*glEnable()*、*glDisable()*和*glBlendFunc()*调用。实际上删除它们应该使您的代码更安全，因为您更改的越少，您必须记住要恢复的更改就越少。

# sharepoint - 如何将 Outlook 嵌入到共享点

> ID：14953675
> 
> 赞同：0
> 
> 时间：2013-02-19T09:11:08.733
> 
> 标签：sharepoint, outlook

是否有嵌入 SharePoint 以接受和发送电子邮件的方法

我有一个 SharePoint 网站，但我的客户不喜欢使用它与开发团队沟通，而是他们喜欢使用电子邮件，有什么方法可以让我允许客户团队使用使用电子邮件作为与网站的沟通方式，然后我在共享点网站上回复，他们会收到电子邮件，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T01:20:07.887

我认为[SharePoint 站点邮箱](http://www.scinaptic.com/sharepoint-2013-site-mailboxes.html)可以帮助满足这一要求。白皮书将帮助您了解站点邮箱、它们的好处和限制。测试它们的最简单方法是注册 Office 365 试用版（因为所有配置都已为您执行）。

希望能帮助到你。

注意：我与白皮书中提到的 OnePlaceMail 直接相关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T01:57:41.767

您可以使用两个不同的功能来做到这一点：

*   从电子邮件到 SharePoint：在列表中启用入站电子邮件，并确保您拥有电子邮件将填充的正确列（例如，电子邮件正文将进入正文列）
*   从 SharePoint 到电子邮件：您可以使用“分配给”字段（受让人将收到通知）或为您的用户订阅警报

# jquery - 鼠标悬停，设置超时功能不起作用

> ID：14953676
> 
> 赞同：3
> 
> 时间：2013-02-19T09:11:15.537
> 
> 标签：jquery, css

两秒钟后鼠标悬停，但设置超时功能不起作用

js

```
setTimeout(function () {
  $('.box').mouseover(function () {
    $(this).animate({
      marginTop: '-224px',
      height: '300px'
    })
    $(this).find('.rotate-arrow').addClass('rotate');
  });
}, 2000); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-19T09:14:07.227

**解释：**

您已将事件处理程序附加到 setTimeout 内部，这实际上意味着这将等待 2 秒，然后再将函数附加到`mouseover`元素`.box`的 a。

不幸的是`$(this)`， setTimeout 函数超出了范围，因此没有读取您的值。幸运的是，您可以简单地分配给嵌套函数范围*内*`$(this)`的变量，您将能够像往常一样访问 jquery 对象。

 ** * *

**解决方案：**

```
$('.box').mouseover(function () {
  var $this = $(this)
  setTimeout(function () {
    $this.animate({ marginTop: '-224px', height: '300px' })
    $this.find('.rotate-arrow').addClass('rotate');
  }, 2000);
}); 
```

* * *

**jsFiddle：**

*   [http://jsfiddle.net/mF46t/](http://jsfiddle.net/mF46t/)*

# rest - 通过 REST API 检查域可用性

> ID：14953679
> 
> 赞同：1
> 
> 时间：2013-02-19T09:11:25.013
> 
> 标签：rest, restful-architecture

注意：我不是在寻找域可用性网络服务！既然我们已经解决了这个问题......

我将如何构建一个系统，既允许我们通过我们的 REST API 从我们的域组合中检索资源，又在同一个 API 中执行域可用性检查？对这两种情况使用相同的 URI 是个好主意，还是应该为此使用不同的资源？

例如：

如果我想要关于 example.com 的信息（这是我们投资组合中的一个域），我会`GET /domains/example.com/`检索我们的信息（注册信息，如域名服务器、联系人等……还有内部信息，如我们的客户记录、发票号码等...）。

如果我想获得 example.org 的域可用性（它没有在我们这里注册，所以不在我们的投资组合中），我也会调用`GET /domains/example.org/`which 然后返回域是否可用。

简而言之：对这两件事使用相同的 URI 是个好主意（基本上都返回域上的信息？）还是我应该为此使用不同的资源？`/domainregistration/example.com/`例如？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T15:53:11.753

The basic idea of a REST API is to provide an abstraction of implementation details and logic of, in your case, domain information. Under this point of view the abstraction could fit because you retrieve domain information from domains in your portfolio and from domains not in your portfolio.

But there is also some difference in retrieving domain information, for example retrieving domain information about domains not in your portfolio is slow, or at least slower than retrieving information for domains in your portfolio. Another difference is that for REST APIs often some bulk capabilities for retrieving more than one resource information are provided like this `GET /domains/example.com,anotherexample.com,localhost.com/`. You will/might not want such functionality to be accessible when retrieving information about domains that are not in your portfolio.

Another reason why you might split the resources is that you could implement a call that retrieves all information about domains in your portfolio:

```
GET /domains/ 
```

This request could obviously only return information about domains in your portfolio, so your abstraction would break in that case.

When you model your REST API to retrieve domain availability I would suggest to use a resource like

```
PUT /availabilities/example.com 
```

to create a domain availability check. This resource could create a sub resource `example.com` that can be then used to retrieve information about this availability check, or used to cache domain availability check results via:

```
GET /availabilities/example.com 
```

Taking all these arguments together I'd favor splitting resources, because:

*   In case an API user is interested in detailed domain information of domains in your portfolio the API user could check the `/domains` resource
*   To get information if a domain is in your portfolio the user would also use the `/domains/example.com` resource
*   API users that are only interested in a domain availability check can use the `availabilities` resource to perform this check.

# java - PrimeFaces 3.2 中的标签库

> ID：14953689
> 
> 赞同：1
> 
> 时间：2013-02-19T09:11:53.163
> 
> 标签：java, jsf-2, primefaces, facelets, taglib

我正在使用primefaces 3.2。项目是用 maven 构建的

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:f="http://java.sun.com/jsf/core"
xmlns:ui="http://java.sun.com/jsf/facelets"
xmlns:p="http://primefaces.org/ui">

....  

</html> 
```

在 JSP 文件中，我能够看到有关组件参数的建议，我希望在最表面上也一样

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T20:12:03.123

如果您使用 Eclipse for Java EE，您应该有这个。

您的项目可能缺少某些方面（Java Server Faces）。

这可能会对您有所帮助：http: [//help.eclipse.org/indigo/topic/org.eclipse.jst.jsf.doc.user/html/tasks/add_jsf_facet.html](http://help.eclipse.org/indigo/topic/org.eclipse.jst.jsf.doc.user/html/tasks/add_jsf_facet.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T11:25:52.173

我在 pom.xml 中添加了

```
<build>
   <plugins>            
      <plugin>
         <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-eclipse-plugin</artifactId>
            <version>2.7</version> 
            <configuration>                 
               <additionalProjectFacets>
                  <jst.jsf>2.0</jst.jsf>
               </additionalProjectFacets>
            </configuration>
     </plugin>
  </plugins>
</build> 
```

它工作它自动将面孔添加到eclipse项目

# c# - 降低 C# for-loop 的性能以获得比 C for-loop 更大的范围

> ID：14953701
> 
> 赞同：1
> 
> 时间：2013-02-19T09:12:26.267
> 
> 标签：c#, c, performance, for-loop, unmanaged

当我从 C# 调用 ummanaged dll 时，我已经对 C# 和 C 中 for 循环的性能进行了一些测试...

结果令我惊讶的是，随着循环越过更大的范围，与 C 相比，C# 的性能下降。对于较小的范围，C# 表现出优于 C 的良好性能....但是，作为 for 循环的上限增加，与 C 相比，C# 性能下降。

这是我的测试代码....

```
 [DllImport("Testing.dll", CallingConvention =  CallingConvention.Cdecl)]
    public static extern int SumLoop(int lowLimit, int highLimit);

    public static void Main(string[] args)
    {
        const int LowerRange = 1;
        const int HigherRange = 1000000;

        // Test with C# For Loop
        var watch1 = new Stopwatch();
        watch1.Start();
        int sum = 0;
        for (int i = LowerRange; i <= HigherRange; i++)
        {
            sum += i;
        }
        watch1.Stop();

        long elapseTime1 = watch1.ElapsedMilliseconds;

        // Test with C-for loop
        var watch2 = new Stopwatch();
        watch2.Start();
        int sumFromC = SumLoop(LowerRange , HigherRange);
        long elapseTime2 = watch2.ElapsedMilliseconds;
   } 
```

测试.dll：

```
__declspec(dllexport) int SumLoop(int lowLimit, int highLimit)
{
    int idx;
    int totalSum = 0;
    for(idx = lowLimit;idx<= highLimit; idx= idx +1)
    {
        totalSum += idx;
    }
    return totalSum;
} 
```

测试结果：

**测试1：**

更高范围：1000000

C#循环：4毫秒

C循环：9毫秒

**测试 2：**

更高范围：10000000

C# 循环：53 毫秒

C循环：36毫秒

**测试 3：**

更高范围：100000000

C# 循环：418 毫秒

C循环：343毫秒

在这里，我开始进行上面的测试，目的是 C for 循环的性能将优于 C# 循环，但这与我的理解完全相反，并同意这个[问题](https://stackoverflow.com/questions/686483/c-sharp-vs-c-big-performance-difference)并同意......但是当我增加 for 循环的上限时，与 C# 相比，C 的性能表现良好......

现在，我在想测试的方法是错误的还是预期的性能结果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T09:18:56.450

这里发生的是您忽略了使用 P/Invoke 调用 C 函数的固定开销。

C 函数*会*比 C# 版本更快，但由于调用它的开销相对较大，C 函数对于小数组会显得较慢，因为调用开销占总时间的比例相对较大。

但是，随着集合大小的增加，开销在总时间中所占的比例会越来越小，直到 C 版本的额外速度出现并且您开始看到它运行得更快。

如果您查看 C# 函数的时间，您会发现它确实与 N 或多或少呈线性增加，这是您所期望的。将 N 增加 100 倍后，将 T = 4 与 T = 418 进行比较。这正是您所期望的。但是由于上述原因，C 次似乎并没有线性增加。

顺便说一句，如果您至少需要两次计时，则可以使用联立方程来求解：

```
T = K + XN 
```

其中 K 是固定开销，X 是每个元素的开销。

我根据您的时间计算得出，调用非托管代码的固定开销约为 5.6 毫秒，每个元素的开销为 3.373737 x 10^-6 毫秒。

这个开销似乎有点大，但我猜测量的数据有一些不准确之处。

# blackberry-simulator - 在 MacOS 上找不到 BlackBerry 10 模拟器的安装位置，重新安装时出现“不允许多次启动安装程序”错误

> ID：14953705
> 
> 赞同：0
> 
> 时间：2013-02-19T09:12:43.887
> 
> 标签：blackberry-simulator, blackberry-10

Mac OS X 狮子 10.7.5(11G63)

安装程序-bbndk-bb10_1_x-macosx-338-201302012246-201302032157.dmg BlackBerry10Simulator-Installer-BB10_1_X-338-Mac-201302031817.dmg

安装上面的两个dmg文件后，我可以在launchpad中找到qde，但是找不到“BlackBerry10Simulator-BB10_n_nn.vmwarevm”文件”。

我想重新安装，所以我在 Finder->devices->BlackBerry10Simulator-BB10-1-x 中运行应用程序“BlackBerry10Simulator-Installer.app”，弹出框说

> **安装程序无法运行。**
> 
> **不允许多次启动此安装程序。现在将退出**

，然后安装程序退出。

如何找到模拟器安装路径，或

**我怎样才能成功地重新安装它**。

PS 第一次安装时，安装时我没有做任何更改，只是点击了“下一步”、“接受...”按钮。我认为模拟器应该安装在默认文件路径中，但我不知道它在哪里，甚至在Finder中搜索“BlackBerry10Simulator”也找不到它。

第一次安装模拟器时可能有问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T20:08:29.300

BB10 模拟器是 VMware 虚拟机。在 Mac 上，您需要安装[VMWare Fusion](http://www.vmware.com/products/fusion/overview.html)才能运行模拟器 VM。这在[系统要求](http://developer.blackberry.com/develop/simulator/simulator_systemrequirements.html)中有所提及。dmg 安装程序所做的只是解压缩 VMware 映像并将其放置在您的硬盘上。我自己安装了这个，默认位置好像是：

`/Users/<your username>/Documents/Virtual Machines`

里面应该有一个文件夹`Blackberry10Simulator-BB10_1_X-338`，里面应该有`BlackBerry10Simulator-BB10_1_X.vmwarevm`一个包含实际虚拟机 .vmx 和 .vmdk 文件的文件夹。

还应该在您的桌面上创建一个别名（快捷方式）以指向此位置，称为`Blackberry 10 Simulator`.

要卸载，`Blackberry10Simulator-BB10_1_X-338/install`调用`uninstaller`中的脚本应该删除所有内容并允许您再次安装。

不幸的是，VMWare Fusion 不是免费的，但您可以注册[30 天试用](https://my.vmware.com/web/vmware/evalcenter?p=vmware-fusion5)，以便能够运行模拟器并测试您的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-09T15:37:58.967

我最近在使用不同的安装程序（但也基于 installanywhere）时遇到了这个错误。VM Ware Fusion 中的镜像功能和随处安装中的多重安装检测似乎存在问题。如果您禁用镜像，我怀疑“不允许多次启动此安装程序”。将不再发生错误。

# c# - C#中的SQL错误

> ID：14953707
> 
> 赞同：0
> 
> 时间：2013-02-19T09:12:44.773
> 
> 标签：c#, mysql, sql

```
conn.Open();
String sql = "select CATEGORIES.CAT_NAME,PRODUCTS.PRO_MODEL,PRODUCTS.PRO_NAME,PRODUCTS.PRO_PRICE,PRODUCTS.PRO_IMAGE,PRODUCTS.PRO_DESCRIPTION,PRODUCTS.PRO_STATUS,PRODUCTS.PRO_ACTIVE" +
"from PRODUCTS INNER JOIN CATEGORIES on PRODUCTS.CAT_ID = CATEGORIES.CAT_ID"; 
```

我的查询 SQL 在 MYSQL Server 中运行良好，但在 C# 代码中有错误 关键字“INNER”附近的语法不正确。希望尽快得到答复

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T09:14:11.670

您需要在 (和) 字符串连接之间**添加空格。**`.PRO_ACTIVE"``"from`

```
.PRO_ACTIVE " + "from... 
```

所以你的查询应该是：

```
String sql = "select CATEGORIES.CAT_NAME,PRODUCTS.PRO_MODEL,PRODUCTS.PRO_NAME,PRODUCTS.PRO_PRICE,PRODUCTS.PRO_IMAGE,PRODUCTS.PRO_DESCRIPTION,PRODUCTS.PRO_STATUS,PRODUCTS.PRO_ACTIVE" 
+ " " +//explicit space 
"from PRODUCTS INNER JOIN CATEGORIES on PRODUCTS.CAT_ID = CATEGORIES.CAT_ID"; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-19T09:14:20.703

您需要在字符串的第一行末尾有一个空格——C# 不会放入换行符。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-19T09:14:46.943

将其更改为：

```
String sql = "select CATEGORIES.CAT_NAME,PRODUCTS.PRO_MODEL,PRODUCTS.PRO_NAME,PRODUCTS.PRO_PRICE,PRODUCTS.PRO_IMAGE,PRODUCTS.PRO_DESCRIPTION,PRODUCTS.PRO_STATUS,PRODUCTS.PRO_ACTIVE" +
    " from PRODUCTS INNER JOIN CATEGORIES on PRODUCTS.CAT_ID = CATEGORIES.CAT_ID"; 
```

“..PRODUCTS.PRO_ACTIVE”和“来自 PRODUCTS..”之间缺少空格

# tsql - 使用 SQL Server 2012 的 Last_Value() 函数时忽略空值

> ID：14953708
> 
> 赞同：3
> 
> 时间：2013-02-19T09:12:45.613
> 
> 标签：tsql, sql-server-2012

我正在使用 SQL Server 2012 并且有一个看起来像这样的值表。它填充了事件数据。

```
FldType Date                    Price   Size
--------------------------------------------
2       2012-08-22 00:02:01     9140    1048
0       2012-08-22 00:02:02     9140    77
1       2012-08-22 00:02:03     9150    281
2       2012-08-22 00:02:04     9140    1090
0       2012-08-22 00:02:05     9150    1
1       2012-08-22 00:02:06     9150    324
2       2012-08-22 00:02:07     9140    1063 
```

我想跟踪 3 种字段类型 (0,1,2) 中每一种的最新值，以便最终输出如下所示。

```
Date                Price0  Size0   Price1  Size1   Price2  Size2
-----------------------------------------------------------------
2012-08-22 00:02:01  NULL   NULL    NULL    NULL    9140    1048
2012-08-22 00:02:02  9140   77      NULL    NULL    9140    1048
2012-08-22 00:02:03  9140   77      9150    281     9140    1048
2012-08-22 00:02:04  9140   77      9150    281     9140    1090
2012-08-22 00:02:05  9150   1       9150    281     9140    1090
2012-08-22 00:02:06  9150   1       9150    324     9140    1090
2012-08-22 00:02:07  9150   1       9150    324     9140    1063 
```

不幸的是，它并没有忽略后续的空值，所以我得到了这个。

```
Date                Price0  Size0   Price1  Size1   Price2  Size2
-----------------------------------------------------------------
2012-08-22 00:02:01  NULL   NULL    NULL    NULL    9140    1048
2012-08-22 00:02:02  9140   77      NULL    NULL    NULL    NULL    
2012-08-22 00:02:03  NULL   NULL    9150    281     NULL    NULL
2012-08-22 00:02:04  NULL   NULL    NULL    NULL    9140    1090
2012-08-22 00:02:05  9150   1       NULL    NULL    NULL    NULL    
2012-08-22 00:02:06  NULL   NULL    9150    324     NULL    NULL    
2012-08-22 00:02:07  NULL   NULL    NULL    NULL    9140    1063 
```

我当前的查询看起来像这样

```
SELECT [Date],
    LAST_VALUE(Price0) OVER (PARTITION BY FldType ORDER BY [Date] ) AS Price0,
    LAST_VALUE(Size0) OVER (PARTITION BY FldType ORDER BY [Date]) AS Size0,
    LAST_VALUE(Price1) OVER (PARTITION BY FldType ORDER BY [Date] ) AS Price1,
    LAST_VALUE(Size1) OVER (PARTITION BY FldType ORDER BY [Date]) AS Size1,
    LAST_VALUE(Price2) OVER (PARTITION BY FldType ORDER BY [Date] ) AS Price2,
    LAST_VALUE(Size2) OVER (PARTITION BY FldType ORDER BY [Date]) AS Size2
FROM ( 
SELECT FldType, [Date], Price, Size,
    CASE WHEN FldType = 0 THEN Price END as Price0,
    CASE WHEN FldType = 0 THEN Size END as Size0,
    CASE WHEN FldType = 1 THEN Price END as Price1,
    CASE WHEN FldType = 1 THEN Size END as Size1,
    CASE WHEN FldType = 2 THEN Price END as Price2,
    CASE WHEN FldType = 2 THEN Size END as Size2
FROM [RawData].[dbo].[Events]   
) as T1
ORDER BY [Date] 
```

有没有办法让 SQL Server 2012 在确定最新值时忽略空值？还是有更好的方法不使用`Last_Value()`函数？

总而言之，我试图实现两件事。

1.  `Price`将and列拆分`Size`为 6 列（2 列 x 3 字段类型）
2.  跟踪每列中的最新值。

任何建议都将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T10:26:27.340

我不确定你可以用 LAST_VALUE 做到这一点，除非你可能添加一个 PIVOT。

此外，您需要分别处理尺寸和价格，因为它们来自不同的行。所以，这实现了你想要的分解它。

```
DECLARE @source TABLE (FldType int, DateCol DateTime, Price int, Size int);

INSERT @source VALUES
    (2, '2012-08-22 00:02:01', 9140, 1048),(0, '2012-08-22 00:02:02', 9140, 77),
    (1, '2012-08-22 00:02:03', 9150, 281),(2, '2012-08-22 00:02:04', 9140, 1090),
    (0, '2012-08-22 00:02:05', 9150, 1),(1, '2012-08-22 00:02:06', 9150, 324),
    (2, '2012-08-22 00:02:07', 9140, 1063);

SELECT
    S.DateCol, Xp0.Price0, Xs0.Size0, Xp1.Price1, Xs1.Size1, Xp2.Price2, Xs2.Size2
FROM
    @source S
    OUTER APPLY
    (SELECT TOP 1 S0.Price AS Price0 FROM @source S0 WHERE S0.FldType = 0 AND S0.DateCol <= S.DateCol ORDER BY S0.DateCol DESC) Xp0
    OUTER APPLY
    (SELECT TOP 1 S1.Price AS Price1 FROM @source S1 WHERE S1.FldType = 1 AND S1.DateCol <= S.DateCol ORDER BY S1.DateCol DESC) Xp1
    OUTER APPLY
    (SELECT TOP 1 S2.Price AS Price2 FROM @source S2 WHERE S2.FldType = 2 AND S2.DateCol <= S.DateCol ORDER BY S2.DateCol DESC) Xp2
    OUTER APPLY
    (SELECT TOP 1 S0.Size AS Size0 FROM @source S0 WHERE S0.FldType = 0 AND S0.DateCol <= S.DateCol ORDER BY S0.DateCol DESC) Xs0
    OUTER APPLY
    (SELECT TOP 1 S1.Size AS Size1 FROM @source S1 WHERE S1.FldType = 1 AND S1.DateCol <= S.DateCol ORDER BY S1.DateCol DESC) Xs1
    OUTER APPLY
    (SELECT TOP 1 S2.Size AS Size2 FROM @source S2 WHERE S2.FldType = 2 AND S2.DateCol <= S.DateCol ORDER BY S2.DateCol DESC) Xs2
ORDER BY
    DateCol; 
```

另一种方法是通过触发器或一些 ETL 维护一个单独的表，为您做摘要。

# c# - 无法读取在 c# 处理程序中上传的文件

> ID：14953712
> 
> 赞同：2
> 
> 时间：2013-02-19T09:12:58.443
> 
> 标签：c#, asp.net, ashx

我正在尝试将文件上传到 c# 中的处理程序，但似乎文件没有被上传。调用`Request.Files["fileNameHere"]`返回 null

我的html代码：

```
<form id="importManagerForm" action="../ImportManager.ashx" method="POST">
   <input name="selectedFile" id="selectedFile" type="file" /> 
   <input type="submit" value="submit"/>
</form> 
```

ashx 处理程序中的代码是：

```
public void ProcessRequest(HttpContext context)
{
  var importFile = context.Request.Files["selectedFile"]; //This part returns null
  var fileName = new Guid().ToString() + ".csv";
  importFile.SaveAs(fileName);
} 
```

知道有什么问题吗？

更新：

快速调试`context.Request.Files`显示文件计数为 0。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T09:22:07.883

看起来您缺少`enctype="multipart/form-data"`表单上的属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T09:22:49.440

您正在使用 html 表单控件而不是 asp.net 表单服务器控件。

您将需要设置`enctype`

```
<form id="importManagerForm" enctype="multipart/form-data" 
      action="../ImportManager.ashx" method="POST"> 
```

只有这样您才能接收文件

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T09:31:43.397

每当我们有要以 html 形式上传的文件时，或者每当我们在表单中使用标签时，我们都必须通知浏览器该请求包含二进制数据。因此要实现这一点，您必须向标签添加**enctype**属性。

enctype="multipart/form-data" 应该添加到表单中。

它表示在发送之前没有对字符进行编码。即它确保在将数据发送到服务器之前没有对字符进行编码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T09:26:02.313

浏览器可能是原因。如果您使用的是 IE，文件将位于 中`Request.Files`，但在 Chrome 和 FF 中，文件位于`Request.QueryString["qqfile"]` [以下](https://stackoverflow.com/questions/11824642/how-to-cast-string-to-httpfilepostedbase/11825059#11825059)示例代码

# ruby-on-rails - Resque和新遗物

> ID：14953713
> 
> 赞同：7
> 
> 时间：2013-02-19T09:13:05.403
> 
> 标签：ruby-on-rails, ruby, heroku, resque, newrelic

我开始在 New Relic 和 resque 上遇到奇怪的错误

```
INFO : Starting Agent shutdown
ERROR : undefined method `write' for nil:NilClass: Unable to send data to parent process, please see https://newrelic.com/docs/ruby/resque-instrumentation for more information 
```

我已按照[此处的说明进行操作](https://newrelic.com/docs/ruby/resque-instrumentation)

我也不再在我的新遗物控制面板中看到任何内容

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-09T03:59:47.723

路线[最近](https://newrelic.com/docs/ruby/resque-instrumentation)更新了。我相信`:report_instance_busy => false`是从 转移`Resque.before_first_fork`到`Resque.after_fork`。

或者，如果您能够碰到`resque`，`>= 1.23.1`那么您可以完全移除显式`resque`钩子，因为`resque`链接已经修复，并且`newrelic_rpm`gem 指令不会被其他 gem 覆盖。

如果这些修复不起作用，您可能需要在 newrelic.config 中[打开审核日志记录。](https://newrelic.com/docs/ruby/audit-log)您只希望它开启一小段时间（比如 5 分钟），因为它可能会对您的应用程序的性能产生不利影响。您可以将此附加到`newrelic`问题请求和/或可能通过自己阅读文件来找出问题所在。

# java - 更新动作事件的链表

> ID：14953714
> 
> 赞同：-2
> 
> 时间：2013-02-19T09:13:11.797
> 
> 标签：java, swing, linked-list, awt

基本上我需要更新从文本框中按下输入事件的列表，其中包含一个值，例如伯明翰

按下回车后，通过现成的库搜索文本框中的值，并将匹配的值显示在链表中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T09:15:58.843

您需要`ActionListener`在文本框中注册相应的所有内容。

# python - Python - 声明中的 L 错误

> ID：14953715
> 
> 赞同：0
> 
> 时间：2013-02-19T09:13:13.797
> 
> 标签：python, error-handling, declaration

我曾尝试使用此代码：[http](http://www.cgtk.co.uk/data/gemf/generate_efficient_map_file.py) : //www.cgtk.co.uk/data/gemf/generate_efficient_map_file.py 从地图图块创建 GEMF 文件。问题是，当我使用特定文件夹作为参数运行此代码时，例如。“py generate_efficient_map_file.py Mapnik”，第 6 行出现错误。

> 文件“generate_efficient_map_file.py”，第 6 行 file_size_limit = 2000000000L

错误在L字中。当出现声明错误时，如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T09:20:54.247

尝试像这样运行它

```
python generate_efficient_map_file.py dirname 
```

这对我来说很好（没有第 6 行错误 - 我没有输入数据）在 python 2.7.3 上。你可以检查你的python版本

```
python -V 
```

# c# - 什么是 MVVM 中的异步？模型或视图模型。最佳做法？

> ID：14953716
> 
> 赞同：5
> 
> 时间：2013-02-19T09:13:14.360
> 
> 标签：c#, .net, wpf, mvvm, mvvm-light

我正在寻找在层之间进行异步通信的最佳实践。我正在使用[mvvm light 工具包](http://mvvmlight.codeplex.com)

**目前我在模型**中使用了一个后台工作者，因为我在自动生成的代码中看到了这一点。不是后台工作人员，而是异步调用。

```
public void GetConfig(Action<Config, Exception> callback)
{
    BackgroundWorker backgroundWorker = new BackgroundWorker();
    backgroundWorker.DoWork += (backgroundWorkerSender, backgroundWorkerArgs) =>
    {
        try
        {
            backgroundWorkerArgs.Result = AppEnvironment.Instance.Config;
        }
        catch (Exception exception)
        {
            backgroundWorkerArgs.Result = null;
        }
    };

    backgroundWorker.RunWorkerCompleted += (backgroundWorkerSender, backgroundWorkerArgs) =>
    {
        if (backgroundWorkerArgs.Result != null)
        {
            callback((Config) backgroundWorkerArgs.Result, null);
        }
        else
        {
            /* ToDo: exceptionhandling */
        }
    };

    backgroundWorker.RunWorkerAsync(); 
} 
```

现在我找到了在 ViewModel 中实现异步部分的[AsyncDelegateCommand 。](http://www.amazedsaint.com/2010/10/asynchronous-delegate-command-for-your.html)

```
private ICommand _refreshObjectDefinitionCommand;
public ICommand RefreshObjectDefinitionCommand
{
    get
    {
        return _refreshObjectDefinitionCommand
          ?? (_refreshObjectDefinitionCommand = new AsyncDelegateCommand(delegate
              {
                  IsBusy = true;
                  _dataService.GetObjectDefinition(
                    (xmlObjectDef, errorConfig) =>
                    {
                        if (errorConfig != null)
                        {
                            /* ToDo Lenz: exceptionhandling */
                            return;
                        }

                        ObjectDefinition = xmlObjectDef;
                    });

                  _dataService.GetObjectDefinitionTreeView(
                      (treenodes, errorConfig) =>
                      {
                          if (errorConfig != null)
                          {
                              /* ToDo Lenz: exceptionhandling */
                              return;
                          }

                          TreeNodes = treenodes;
                      });
              },
                                () => _isConnected, o => IsBusy = false, exception => IsBusy = false));
    }
} 
```

我对最佳做法有点困惑？我读过很多文章。但不知何故，他们总是有不同的意见。是否有任何规定可以在正常努力下保持最佳兼容性？

一些思考的食物

**模型：**

[http://cshaperimage.jeremylikness.com/2009/12/simplifying-asynchronous-calls-in.html](http://csharperimage.jeremylikness.com/2009/12/simplifying-asynchronous-calls-in.html)

[http://www.dzone.com/articles/mvvmlight-and-async](http://www.dzone.com/articles/mvvmlight-and-async)

**视图模型**

[http://www.codeproject.com/Articles/123183/Asynchronus-MVVM-Stop-the-Dreaded-Dead-GUI-Problem](http://www.codeproject.com/Articles/123183/Asynchronus-MVVM-Stop-the-Dreaded-Dead-GUI-Problem)

[http://www.codeproject.com/Articles/441752/Async-MVVM-Modern-UI](http://www.codeproject.com/Articles/441752/Async-MVVM-Modern-UI)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T15:18:14.213

我建议将异步代码放在您的 ViewModel 中，并让您的模型来存储数据。当我开始使用 MVVM 时，我学到的第一件事就是从我的模型中删除逻辑，并将其保留在我的 ViewModel 中。尽管我会说，只要所有阅读代码的人都能理解，你把代码放在哪里并不重要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T09:30:36.290

好吧，我会说模型的影响并将其转换为视图模型是异步的。谁来做，取决于架构，它可以在视图模型本身上完成，也可以使用控制器层进行异步加载和将初始化的 VM 映射到视图。后台工作人员也是过去，您应该使用 Task 类进行并行操作。当然，当通知视图来自 VM 的更改时，不要忘记通过调度程序调用。

代码示例：

```
 Task<string>.Factory.StartNew(() =>
{
     string text = GetArticleText();
     Application.Current.Dispatcher.BeginInvoke(new Action(()=>MyTextProperty = text));   
}); 
```

# ruby-on-rails - rails 2未定义的方法

> ID：14953720
> 
> 赞同：0
> 
> 时间：2013-02-19T09:13:19.947
> 
> 标签：ruby-on-rails, web

我使用 rails v 2.3.14

我添加路线`routes.rb`

```
 map.with_options :controller => 'consumer_profile' do |m|
   ...
    m.consumer_profile_show_coupons 'consumer/:id/coupons', :action => 'show_coupons', :requirements => {:id => /c-[0-9a-zA-Z]+/}
   ...
  end 
```

我添加def`consumer_profile_controller.rb`

```
 def show_coupons
    ..
  end 
```

我添加文件`consumer_profile/show_coupons.html.erb` rake 路由：

```
consumer_profile_show_coupons      /consumer/:id/coupons                                                                               {:action=>"show_coupons", :controller=>"consumer_profile"} 
```

但是当我使用`seo_consumer_profile_coupons_url(current_user.consumer_profile)` 那个导轨时说：

```
undefined method `seo_consumer_profile_coupons_url' 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T09:31:56.830

我指出了直接`:controller=>'consumer_profile',:action=>'show_coupons'`输入`link_to`，它有效......

# asp.net-mvc - MVC 文件上传集合始终为空

> ID：14953722
> 
> 赞同：0
> 
> 时间：2013-02-19T09:13:21.540
> 
> 标签：asp.net-mvc, file-upload, razor

这是有效的，现在由于未知的原因，我的文件集合为空

看法

```
@section termimalContent {
      @using (Html.BeginForm("Add", "Terminals_Policies", FormMethod.Post, new { enctype = "multipart/form-data" }))
      {
        @Html.ValidationSummary(true)
        <fieldset>
          <legend>
            <h2>
              Create new policy</h2>
          </legend>
          <p>
            <strong>Assigning devices to Node:</strong> @Model.GroupName</p>
          <div class="editor-label">
            @Html.LabelFor(model => model.PolicyName)
          </div>
          <div class="editor-field">
            @Html.EditorFor(model => model.PolicyName)
            @Html.ValidationMessageFor(model => model.PolicyName)
          </div>
          <div class="editor-label">
            @Html.LabelFor(model => model.PolicyType)
          </div>
          <div class="editor-field">
            @Html.DropDownListFor(model => model.SelectedItem, new SelectList(Model.PolicyType, "Value", "Text"),new {@class = "PackageDDL"})
            @Html.ValidationMessageFor(model => model.SelectedItem)
          </div>

           @foreach (var pick in Model.PackageTypeItems)
           {
            <div class="editor-label">
              <label for="@pick.Name">
                @pick.Name:</label>
            </div>
            <div class="editor-field">
              <input class="text-box single-line" type="file" name="@pick.Name.Trim()" id="@pick.Name.Trim()" data-val="@pick.IsRequired.ToString().ToLower()" data-val-required="Please select a file" />
              @Html.ValidationMessage(pick.Name.Trim())
            </div>
           }

          @Html.HiddenFor(model => model.GroupId)
          @Html.HiddenFor(model => model.GroupName)
          <p>
            <input type="submit" value="Create" />
          </p>
        </fieldset>
      }
    } 
```

生成的 HTML

```
<form action="/Terminals_Policies/Add/1" enctype="multipart/form-data" method="post">    <fieldset>
      <legend>
        <h2>
          Create new policy</h2>
      </legend>
      <p>
        <strong>Assigning devices to Node:</strong> Root</p>
      <div class="editor-label">
        <label for="PolicyName">PolicyName</label>
      </div>
      <div class="editor-field">
        <input class="text-box single-line" data-val="true" data-val-length="Policy name cannot be longer than 50 characters." data-val-length-max="50" data-val-required="Please enter the policy name" id="PolicyName" name="PolicyName" type="text" value="" />
        <span class="field-validation-valid" data-valmsg-for="PolicyName" data-valmsg-replace="true"></span>
      </div>
      <div class="editor-label">
        <label for="PolicyType">PolicyType</label>
      </div>
      <div class="editor-field">
        <select class="PackageDDL" data-val="true" data-val-number="The field SelectedItem must be a number." id="SelectedItem" name="SelectedItem"><option value="1">IT application</option>
<option value="3"> definition</option>
<option value="4">definition</option>
<option value="5">project</option>
<option value="6">relay schedules</option>
<option value="7">table data</option>
<option value="9">transfer definition</option>
<option value="10">firmware update request</option>
<option value="11"> firmware update request</option>
<option value="12">dat</option>
<option value="15"> firmware</option>
<option value="16"> hex</option>
<option value="17">project</option>
<option value="18">firmware</option>
</select>
        <span class="field-validation-valid" data-valmsg-for="SelectedItem" data-valmsg-replace="true"></span>
      </div>

        <div class="editor-label">
          <label for="IT application file                               ">
            IT application file                               :</label>
        </div>
        <div class="editor-field">
          <input class="text-box single-line" type="file" name="IT application file" id="IT application file" data-val="true" data-val-required="Please select a file" />
          <span class="field-validation-valid" data-valmsg-for="IT application file" data-valmsg-replace="true"></span>
        </div>

      <input data-val="true" data-val-number="The field GroupId must be a number." data-val-required="The GroupId field is required." id="GroupId" name="GroupId" type="hidden" value="1" />
      <input id="GroupName" name="GroupName" type="hidden" value="Root" />
      <p>
        <input type="submit" value="Create" />
      </p>
    </fieldset>
</form> 
```

控制器：

```
 [HttpGet]
    public ActionResult Add(int id)
    {
      _polAdd = CreatePolicyAddModel(id);
      return View(_polAdd);
    }

    [HttpPost]
    public ActionResult Add(IEnumerable<HttpPostedFileBase> files, vmPoliciesAdd model)
    {
      _policyLogic.AddPolicyFile(files,model.PolicyName,(int)model.SelectedItem, "FILE");
      return View();
    } 
```

在控制器的后期动作中，集合为空，任何人都可以看到明显的错误

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T09:15:43.433

命名问题：

```
<input class="text-box single-line" type="file" name="IT application file" id="IT application file" data-val="true" data-val-required="Please select a file" /> 
```

当然应该是：

```
<input class="text-box single-line" type="file" name="files" id="IT application file" data-val="true" data-val-required="Please select a file" /> 
```

因此，如果您希望模型绑定器能够绑定到名为的操作参数，请修复您的 Razor 代码并确保您已将正确的名称应用于文件输入`files`：

```
<input class="text-box single-line" type="file" name="files" id="@pick.Name.Trim()" data-val="@pick.IsRequired.ToString().ToLower()" data-val-required="Please select a file" /> 
```

啊，顺便说一句`id`'s 不能包含空格。所以你有一个损坏的 HTML。以下似乎是错误的：`id="@pick.Name.Trim()"`也是。

# .htaccess - 静态 URL 上的 RewriteRule

> ID：14953725
> 
> 赞同：0
> 
> 时间：2013-02-19T09:13:39.760
> 
> 标签：.htaccess, mod-rewrite, redirect

我正在网上发布我网站的新版本，我必须将一些旧索引页面重定向到新页面。所以我生成了一个基于静态 url 的 htaccess（旧的重定向到新的）。

它适用于其中一些，但它发现它在拥有 get 参数的那些上产生 404 错误（我认为这是原因）。

有两条规则，一条有效，一条失败：

```
<IfModule mod_rewrite.c>
RewriteEngine on
#Working one
RewriteRule old_page_indexed.htm http://newsite.com [R=301,L] 
#Not working
RewriteRule PBBios.asp?PBMInit=1 http://newsite.com [R=301,L] 
</IfModule> 
```

我试图关注但没有工作：

```
RewriteRule PBBios.asp\?PBMInit=1 http://newsite.com
RewriteRule ^PBBios.asp\?PBMInit=1$ http://newsite.com 
```

您知道如何在 htaccess 中执行此操作吗？

非常感谢 =)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T23:55:18.773

独立测试路径和查询字符串

```
RewriteCond %{REQUEST_URI} ^PBBios.asp$
RewriteCond %{QUERY_STRING} ^PBMInit=1$
RewriteRule ^(.*)$ http://newsite.com [R=301,L] 
```

# java - 具有全屏模式的 MigLayout

> ID：14953726
> 
> 赞同：0
> 
> 时间：2013-02-19T09:13:41.790
> 
> 标签：java, fullscreen, resolution, miglayout

我的应用程序在启动时自动使用全屏模式，并且它以`1024x768`分辨率正确显示，但是当我测试了`1366x768`底部的同一个应用程序时，它消失了。全屏模式设置如下所示：

```
//*********************  Full Screen Parameter  *****************
Toolkit tk = Toolkit.getDefaultToolkit();
setBounds(new Rectangle(new Point(0, 0), tk.getScreenSize()));
setUndecorated(true);
setVisible(true); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T11:20:12.307

您是否尝试过使用 setLocation()？例如

```
setLocation(0,0);
setSize(tk.getScreenSize());
setUndecorated(true);
setVisible(true); 
```

# html - html框架只允许水平调整ie8

> ID：14953732
> 
> 赞同：1
> 
> 时间：2013-02-19T09:14:00.917
> 
> 标签：html, resize, frame, frameset

我创建了一个包含 2 个框架集的网页：

```
<frameset id='frameset1'  cols="30%,70%">

<frameset id='frameset2'  rows="15%,85%" frameborder="0" border="0">
<frame id="headerframe" name="frame3" src="source1" scrolling="no">
<frame id="contentsframe" name="frame1" src="source2">
</frameset>

<frame name="maincontent" src="source3">
</frameset> 
```

我正在尝试使用户无法垂直调整 frameset2 中的框架大小，但仍可以水平调整大小。有没有办法在ie8中做到这一点？我曾尝试使用 CSS resize 属性，但无法在此浏览器中使用它。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T09:17:18.180

将此添加到文件 source1 和 source2 中：

```
<style type="text/css">
    body {
        overflow-x:hidden;
    }
</style> 
```

# php - 使用 php 数组中的第 n 个项目

> ID：14953734
> 
> 赞同：0
> 
> 时间：2013-02-19T09:14:00.997
> 
> 标签：php

我创建了一个数组，如下：

```
$results = array();
do {
  $results[] = $row_products;
} while ($row_products = mysql_fetch_assoc($products));

print_r($results); 
```

这会打印出这样的数组：

```
Array ( 
[0] => Array ( 
       [productName] => product1 
       ) 
[1] => Array ( 
       [productName] => product2 
       ) 
[2] => Array ( 
       [productName] => product3 
     ) 
```

我现在想在另一个 mysql 查询中使用数组中的第二项。

但我无法定义它。我试过了

```
$results[1]; 
```

但这不起作用。所以实际上，如果我回显第二项，它将打印“product2”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T09:16:17.077

您应该在这里学习有关数组的基础知识：[http ://www.php.net/manual/en/language.types.array.php](http://www.php.net/manual/en/language.types.array.php)

您正在使用嵌套数组，因此您可以像这样访问它：

```
echo $results[1]['productName']; 
```

另一种解决方案是使用`$results[] = $row_products['productName'];`然后只是 echo `$results[1]`。

此外，您应该使用 while 循环而不是 do/while 循环，因为似乎没有为第一次迭代定义 $row_products。

```
while ($row_products = mysql_fetch_assoc($products)) {
  $results[] = $row_products;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T09:15:48.770

试试这个 ：

```
echo $results[1]['productName'] ; 
```

`$results[1]`是一个数组，如果你想查看数组`print_r($results[1]);`

# objective-c - 如何让 Xcode 先打开 .h 而不是 .m 文件？

> ID：14953743
> 
> 赞同：3
> 
> 时间：2013-02-19T09:14:15.860
> 
> 标签：objective-c, xcode

在 Xcode 中创建新类时，默认行为是打开并显示实现文件 (.m)。如何让 Xcode 先打开头文件（.h）？我经常发现自己经常需要先更改 .h 文件才能更改成员变量、属性和继承等内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T09:41:22.400

添加新类时，添加的第一个文件是 .h，最后一个文件是 .m。

XCode 会为您打开最新的文件，即 .m。现在你想让它反转，除非进行一些调整或破解，否则这是不可能的，但最佳做法是使用`Ctrl`++或在 .h`Cmd`和.m 之间切换`Up``Down`

# c# - 在 PascalCase 字符串中的数字前插入空格

> ID：14953748
> 
> 赞同：0
> 
> 时间：2013-02-19T09:14:28.237
> 
> 标签：c#, string, space

我想在数字前放置一个空格。

例如，我有这个 PascalCase 字符串：“SupportContactAddressLine1”。

我希望它显示“支持联系人地址行 1”

我试过这个：

```
var s = PascalCase;

 for (var i = 1; i < s.Length; i++)
 {
  if (char.IsLower(s[i - 1]) && char.IsUpper(s[i]))
  {
    s = s.Insert(i, " ");
  }
 } 
```

但结果是：“Support Contact Address Line1”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T09:16:22.623

也检查一个数字：

```
if (Char.IsLower(s[i - 1]) && (Char.IsUpper(s[i]) || Char.IsDigit(s[i]))) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T09:18:09.217

数字不是字母，因此没有大小写之分，`char.IsUpper('1')`返回`false`.

您应该包括使用`char.IsDigit(...)`来检查数字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T09:38:32.530

这应该可以帮助您：

```
var res = Regex.Replace("SupportContactAddressLine100", "([A-Z])|([0-9]+)", " $1$2"); 
```

# sql - 计算两个日期之间的记录的存储过程

> ID：14953754
> 
> 赞同：2
> 
> 时间：2013-02-19T09:14:42.797
> 
> 标签：sql, sql-server-2008, stored-procedures

我正在尝试计算 SQL Server 2008 中两个日期之间状态为 0 的记录有我的程序，但它不是正确的 trows 错误。

> *消息 156，级别 15，状态 1，过程 sp_SerchPickupHispanicBetweenDates，第 6 行
> 关键字“between”附近的语法不正确。*

程序看起来像

```
CREATE procedure sp_SerchPickupHispanicBetweenDates
@date1 date,
@date2 date
as 
select COUNT ( Pickuphispanic ) from  pickup
where  Pickuphispanic = 1 and pickupdate like between @date1+ '%' and @date1 +'%' 
```

正在尝试在互联网上搜索解决方案，但没有成功。任何想法如何纠正它？我也有完美的选择语句

```
select COUNT ( Pickuphispanic ) from  pickup
where  Pickuphispanic = 1 and pickup.pickupdate between '2006-07-01' and '2010-12-31' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T09:18:44.623

和参数属于数据类型`@date1`，因此您不能将 a 附加到这些值（在**使用运算符时，只能**用于基于字符串的数据类型；另外：您**不能**使用值应用于搜索）。`@date2``DATE``%``%`**`LIKE`**`LIKE``DATE`****

 ****改用这个：

```
CREATE procedure procSerchPickupHispanicBetweenDates
   @date1 date,
   @date2 date
AS
   SELECT COUNT (Pickuphispanic) 
   FROM dbo.pickup
   WHERE Pickuphispanic = 1 
     AND pickupdate BETWEEN @date1 AND @date2 
```

要调用它，请使用以下语法：

```
EXEC procSerchPickupHispanicBetweenDates '2006-07-01', '2010-12-31' 
```

（没有大括号，没有括号 - 只需指定两个日期），或者：

```
EXEC procSerchPickupHispanicBetweenDates @date1 = '2006-07-01', @date2 = '2010-12-31' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T09:19:35.030

如果您尝试在 2 个日期之间进行搜索，您的存储过程必须如下所示：

```
pickupdate between @date1 and @date2 
```

您不必使用 LIKE 功能

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T09:20:00.283

**Like**不能嵌套**在**函数之间。

试试这个：

```
CREATE procedure sp_SerchPickupHispanicBetweenDates
@date1 date,
@date2 date
as 
select COUNT ( Pickuphispanic ) from  pickup
where  Pickuphispanic = 1 and CONVERT(VARCHAR(25), pickupdate , 126) like  @date1 + '%' and @date1 + '%' 
```

问候

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-19T09:20:24.693

像这样修改查询：

```
SELECT COUNT ( Pickuphispanic_ID ) from  pickup
where  Pickuphispanic = 1 and pickupdate between @date1 AND @date2 
```

或者

```
SELECT COUNT ( Pickuphispanic_ID ) from  pickup
where  Pickuphispanic = 1 and pickupdate> @date1 AND pickupdate<@date2 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-31T11:19:37.850

Like 不能嵌套在函数之间。

如果你想使用 like 那么它应该是这样的

```
CREATE procedure sp_SerchPickupHispanicBetweenDates
@date1 date,
@date2 date
as 
select COUNT ( Pickuphispanic ) from  pickup
where  Pickuphispanic = 1 and (CONVERT(VARCHAR, pickupdate ,106) like  CONVERT(VARCHAR,@date1,106) + '%' or CONVERT(VARCHAR, pickupdate ,106) like   CONVERT(VARCHAR,@date2,106) + '%') 
```

你想在这之间使用它应该是这样的

```
CREATE procedure procSerchPickupHispanicBetweenDates
   @date1 date,
   @date2 date
AS
   SELECT COUNT (Pickuphispanic) 
   FROM dbo.pickup
   WHERE Pickuphispanic = 1 
     AND Convert(date,pickupdate) BETWEEN Convert(date,@date1) AND Convert(date,@date2) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-01-18T18:02:21.447

ISNULL(CONVERT(DATE,@FromDate),'2000-01-01') 和 ISNULL(CONVERT(DATE,@ToDate),'3000-01-01')) 之间的 FilterDate****

# mysql - 加速mysql查询

> ID：14953755
> 
> 赞同：-2
> 
> 时间：2013-02-19T09:14:44.447
> 
> 标签：mysql, performance

我有三个表，每个表大约有 5k 行

**用户** `id, email`

**FLASH2TIMBRES** `id, id_user, photo_name, valid`

**投票** `id, id_user, id_photo`

我使用此查询使我的网站运行非常缓慢。

```
SELECT  users.email, 
        flash2timbres.id, 
        flash2timbres.id_user, 
        flash2timbres.photo_name, 
        flash2timbres.time, 
        COUNT(votes.id ) AS nbvotes 
FROM    users, flash2timbres 
        LEFT JOIN votes 
            ON flash2timbres.id = votes.id_photo 
WHERE   valid = 1 AND 
        flash2timbres.id_user = users.id 
GROUP    BY flash2timbres.id 
ORDER BY `flash2timbres`.`id` DESC 
LIMIT 0, 30 
```

有人可以帮我改进吗？

**编辑**：索引是：

```
users.id PRIMARY (Type BTREE) Unique  
flash2timbres.id PRIMARY (Type BTREE) Unique  
votes.id PRIMARY (Type BTREE) Unique 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T09:21:39.737

如果你还没有，你应该看看索引你的表：[http](http://dev.mysql.com/doc/refman/5.0/en/mysql-indexes.html) ://dev.mysql.com/doc/refman/5.0/en/mysql-indexes.html 。如果不对索引字段执行连接，则连接速度非常慢，尤其是当您的数据集增长时。

添加索引后，在查询前添加 EXPLAIN 并运行它。结果将确认查询现在正在使用新索引（在`key`列中）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T10:37:40.363

在投票表的 id_photo 以及 flash2timbres 表的 id_user 列上添加索引

# java - 如何在 Windows 中通过命令提示符运行从 selenium IDE 导出的 java 文件

> ID：14953757
> 
> 赞同：0
> 
> 时间：2013-02-19T09:14:50.080
> 
> 标签：java, selenium, command-line, selenium-webdriver

有人可以告诉我如何运行通过命令提示符从 selenium IDE 导出的 java 文件。

我使用了以下命令： "java -jar selenium-server.jar -htmlSuite "*firefox" " [http://www.google.com](http://www.google.com) " "C:\mytestsuite\mytestsuite.html" "C:\mytestsuite\results .html"

能够启动 selenium 功能测试运行程序，但没有执行任何操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T09:18:24.087

转换后的测试是 JUnit 测试。所以你应该有两个过程：

您的硒服务器进程：

java -jar lib/selenium-server-standalone-2.28.0.jar 你的 JUnit 测试运行器

“java -cp /usr/share/java/junit.jar org.junit.runner.JUnitCore [test class name]” 如果您有多个测试类，最好使用 Suite 注释创建一个 TestSuite：

```
@RunWith(Suite.class)
@SuiteClasses({
   MyTestClass1.class,
   MyTestClass2.class})
public class TestSuite {
   ... 
```

如果您使用的是 Spring，您可以设置包含 selenium 服务器地址、浏览器、...的配置

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = { "classpath:my/package/seleniumConfig.xml"})
public abstract class SeleniumTestSuite { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T23:04:35.017

导出的 java 测试用例无法编译，因为它们至少需要 Selenium 库才能编译，并且可能还需要 junit 或 TestNG 才能实际运行。我真的建议你从 Eclipse 中执行此操作。

您可以[在这里获得 32 位或 64 位的 eclipse](http://www.eclipse.org/downloads/packages/eclipse-ide-java-developers/junosr2)。然后通过 File-> New -> Java Project 创建一个新的 Java 项目。您可以在[此处获取 Selenium 客户端 zip](http://selenium.googlecode.com/files/selenium-java-2.31.0.zip)。您需要从该 zip 中获取客户端 jar（称为 selenium-java-2.31.0.jar）并将其放在 eclipse 中新 Java 项目的 lib 目录中。您可能必须创建 lib 目录，然后右键单击 lib 目录中的 jar 文件并“添加到构建路径”。

将 Selenium IDE 生成的 java 代码放到 eclipse 中新建 Java 项目的 src 目录下。（您可能需要在 src 等下创建适当的包）。然后右键单击所需的测试用例 java 文件并选择“Run As ... Junit”。这应该为您运行它。如果您遇到编译或运行错误，您可以在上面更新您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T23:05:48.383

这就是解决方案：Test is your Class mande by selenium

```
import org.junit.runner.JUnitCore;
import com.example.tests;

public static void main(String[] args) {
    Result result = JUnitCore.runClasses(Test.class);
    for (Failure failure : result.getFailures()) {
        System.out.println(failure.toString());
    }
} 
```

# php - 这不会使 $sel = 1 但它应该，为什么不呢？

> ID：14953760
> 
> 赞同：0
> 
> 时间：2013-02-19T09:15:03.433
> 
> 标签：php, if-statement, web

这不会使 $sel = 1 但它应该，为什么不呢？

```
 $countryVar = 'SouthAfrica';
    $day = 'South Africa';
    $cutCountry = str_replace(" ", "", $day);
    if($cutCountry == $CountryVar) { 
        echo '<option value="' . $cutCountry . '" selected>' . $row["Country"] . '</option>';
        $sel = 1;
    } else {
        echo '<option value="' . $cutCountry . '">' . $row["Country"] . '</option>';
    }
if($sel == 0) {
    echo '<option value="na" selected>- Please Select Country -</option>';
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T09:17:47.740

您在第 4 行输入了错误的变量名称：

```
$countryVar != $CountryVar 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T09:43:02.590

有拼写错误，请更改如下。

代替`if($cutCountry == $CountryVar) {`

至`if($cutCountry == $countryVar) {`

中的拼写错误`$countryVar`。

# iphone - 调用警报消息时iOS应用程序崩溃

> ID：14953765
> 
> 赞同：-1
> 
> 时间：2013-02-19T09:15:16.943
> 
> 标签：iphone, objective-c, ios6

我有不同的应用程序，我在其中使用警报消息，到目前为止从来没有问题。现在我得到这个错误。我通常从 didbecomeactive 方法中调用 alertview。有人可以帮我解决这个问题。刚开始编码，所以慢慢来：）非常感谢

```
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSSetM length]: unrecognized selector sent to instance 0xa9737c0' 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-19T09:19:52.923

您计算长度的对象之一是转换为`NSSetM`对象。检查您正在计算`length`它的属性的对象，即释放该对象。请使用它的保留。或在使用后正确释放物体。

# jsf - jsf selectonemenu 从枚举中选择项目

> ID：14953767
> 
> 赞同：1
> 
> 时间：2013-02-19T09:15:18.507
> 
> 标签：jsf, enums, selectonemenu

好的，我想我已经在 StackOverflow 和其他 Internet 站点中看到了所有与此相关的匹配项。我的代码如下：

班级：

```
public enum pruebaEnum{PRUEBA1, PRUEBA2, PRUEBA3};
private pruebaEnum prueba;
private pruebaEnum[] pruebaList;

public pruebaEnum getPrueba() {
    return prueba;
}

public void setPrueba(pruebaEnum prueba) {
    this.prueba = prueba;
}

public pruebaEnum[] getPruebaList() {
    return pruebaEnum.values();
}

public void setPruebaList(pruebaEnum[] pruebaList) {
    this.pruebaList = pruebaList;
} 
```

JSF 代码：

```
<t:selectOneMenu id="categorization" value="#{BookManual.prueba}">
    <t:selectItems Value="#{BookManual.pruebaList}"/>
</t:selectOneMenu> 
```

事实是我只得到一个空的保管箱。我不知道我做错了什么......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T11:39:35.857

属性名称区分大小写。你用过`Value`，但它是`value`。

顺便说一句，你不需要一个 setter `<f:selectItems>`。摆脱它以保存死代码和不必要的未来混乱，因为它从未被调用过。

# c# - 如何比较文本：ANSI 与 Unicode

> ID：14953772
> 
> 赞同：1
> 
> 时间：2013-02-19T09:15:26.537
> 
> 标签：c#

我正在尝试通过序列号查找证书。显然双方是平等的，但调试器说他们不是。我在这里想念什么？当我将序列号复制并粘贴到文本编辑器中时，我注意到 IDE 警告我，我不在乎该消息；unicode啊啊啊啊

**更新**

1.  我从证书窗口复制了序列号。
2.  打开记事本2新文件。它是默认的 ANSI。粘贴了文字。又抄了一遍。粘贴到VS中。值不相等。
3.  将 Notepad2 文件设置为 Unicode。粘贴的序列号。从记事本2复制并粘贴到VS中。现在他们是平等的。

似乎 unicode vs ansi 问题。

![序列号.png](../Images/c6b10b247b356e67f78039faf3522feb.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T09:37:35.367

我看不出你如何创建字符串或如何比较它有什么问题。那应该工作得很好。.NET 中的字符串始终是 unicode，因此也不存在可能的编码问题。

手动重新键入串行字符串。粘贴时似乎有一些不寻常的字符，例如不间断空格而不是常规空格。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T10:01:58.117

当我复制时，我选择了“额外空间”。很奇怪，但它没有出现在 IDE 中。如果我仔细选择序列号，一切都会好起来的。

在记事本中显示如下：

```
?00 c4 aa b9 b1 08 90 5d 
```

它是十六进制 3F 字符（问号），如果它是 unicode，它不会出现在记事本中。在 ANSI 模式下，它变为可见？

![差异.png](../Images/2fdeca76ab2921c7ee7021f44a8c0ef6.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T09:24:05.790

据我所知，当使用英文字母数字时，UNICODE 中的比较完美无缺。对于其他语言，有一些警告。

请您提供“可复制”代码，以便我可以在我的机器上检查它吗？（PS：懒得打字了..:o）

另外，请注意 == 仅适用于值类型。您应该使用 EqualsTo() 来比较 ref 类型（这样，您将比较值，而不是引用！）

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-02-19T09:23:11.670

代替

```
operator== 
```

你应该使用

```
string.Equals(object Obj) 
```

方法。"==" 测试引用而不是内容的相等性。

请参阅[MSDN](http://msdn.microsoft.com/en-us/library/858x0yyx.aspx)以获取更多参考。

# vba - PR_LAST_VERB_EXECUTION_TIME

> ID：14953774
> 
> 赞同：1
> 
> 时间：2013-02-19T09:15:31.337
> 
> 标签：vba, outlook

我已将 Outlook 电子邮件数据导出到 Excel。

现在，我遇到的另一个问题是 PR_LAST_VERB_EXECUTION_TIME 不显示为相同的日期格式。

日期可以是*ddmmyyyy hh:mm:ss AM/PM 或 mmddyyyy hh:mm*格式（请参考 img）。
我还确保所有单元格格式都是通用的。

是否可以标准化日期格式或可能有任何其他原因导致这种情况？
![显示为不同的日期格式（ddmmyyyy hh:mm:ss AM/PM 或 mmddyyyy hh:mm）](../Images/44c298d5441f9e0373f2b8b099300aa6.png)

我的代码如下：

```
For Each itm In Items
'Check item type
If TypeName(itm) = "MailItem" Then
intColumnCounter = 1
Set msg = itm
intRowCounter = intRowCounter + 1
Set rng = wks.Cells(intRowCounter, intColumnCounter)
rng.Value = GetLastVerb(msg)
End If
Next

Function GetLastVerb(olkMsg As Outlook.MailItem) As String

Dim intVerb As Integer
intVerb = GetProperty(olkMsg, "http://schemas.microsoft.com/mapi/proptag/0x10810003")
Select Case intVerb
    Case 102
        Debug.Print ("Reply to Sender")
        GetLastVerb = GetLastVerbTime(olkMsg)
    Case 103
        Debug.Print ("Reply to All")
        GetLastVerb = GetLastVerbTime(olkMsg)
    Case 104
     Debug.Print ("Forward")
        GetLastVerb = olkMsg.ReceivedTime
    Case 108
     Debug.Print ("Reply to Forward")
        GetLastVerb = GetLastVerbTime(olkMsg)
    Case Else
     Debug.Print ("Unknown")
        GetLastVerb = olkMsg.ReceivedTime
End Select
End Function

Public Function GetProperty(olkItm As Object, strPropName As String) As Date
Dim olkPA As Outlook.PropertyAccessor
Set olkPA = olkItm.PropertyAccessor
GetProperty = olkPA.GetProperty(strPropName)
Set olkPA = Nothing
End Function

Function GetLastVerbTime(olkItm As Object) As Variant
GetLastVerbTime = GetDateProperty(olkItm, "http://schemas.microsoft.com/mapi/proptag/0x10820040")
End Function

Public Function GetDateProperty(olkItm As Object, strPropName As String) As Date
Dim olkPA As Outlook.PropertyAccessor
Set olkPA = olkItm.PropertyAccessor
GetDateProperty = olkPA.UTCToLocalTime(olkPA.GetProperty(strPropName))
Set olkPA = Nothing
End Function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T09:41:12.833

背后的原因很简单

该函数`GetLastVerb`调用其他返回 a`Date`或 a 的函数，`variant`然后最终`GetLastVerb`返回一个字符串。最好的方法是在将输出写入范围之前简单地格式化输出

如果您不关心`type`最终输出，即它是字符串还是日期，则替换`rng.Value = GetLastVerb(msg)`为`rng.Value = Format(GetLastVerb(msg), "dd/mm/yyyy hh:mm:ss AM/PM")`

如果您想要正确的日期输出，请将列格式化为相关的日期/时间格式，然后用于`formula`更新单元格

例如

```
Columns("A:A").NumberFormat = "dd/mm/yyyy hh:mm:ss AM/PM"

rng.FormulaR1C1 = Format(GetLastVerb(msg), "dd/mm/yyyy hh:mm:ss AM/PM") 
```

# python - Set vs DAWG 用于在 Python 中检查字典中的成员资格

> ID：14953779
> 
> 赞同：1
> 
> 时间：2013-02-19T09:15:43.203
> 
> 标签：python, dictionary, set, hashset, dawg

我需要能够快速检查给定的单词是否在我的字典（英语单词表）中。我只关心检查成员的速度（不添加或删除元素），内存使用并不是真正的问题。

最初我使用的是这样的集合：

```
words = set(x.strip().lower() for x in open("/usr/share/dict/words").readlines())
if(word in words):
    ... 
```

我的程序大约花了。在测试输入上运行 4 秒。然后，我尝试通过使用 DAWG ( [http://pypi.python.org/pypi/pyDAWG](http://pypi.python.org/pypi/pyDAWG) ) 来优化事物，而不是通过预先计算 DAWG 并对其进行酸洗：

```
words = pickle.load(open('wordlistDAWG.pyd'))
if(words.word2index(word) is not None):
    ... 
```

在相同的测试输入上，程序运行了大约 40 秒（包括几秒钟来加载我不关心的 DAWG）。我希望使用 DAWG 能让事情运行得更快！

也许我错过了一些关于 python 如何散列事物的理解 - 一个集合已经是我将获得的最好的（O（1）成员资格测试？）而不是 DAWG 或 Trie？DAWG 会只节省内存而不是计算吗？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T13:30:18.770

我认为如果您将 DAWG 用作套件替代品，它不会为您节省 CPU 周期。

关于集合大小，集合查找是 O(1)，关于 DAWG 项目计数，DAWG 查找也是 O(1)。关于查找密钥长度，DAWG 查找是 O(N)（当密钥在 DAWG 中时，需要 len(key) 步骤来检查密钥是否*在*DAWG 中）。关于密钥长度的集合查找也是 O(N)（因为必须计算密钥的哈希）。所以这归结为实施，并且

*   hashmaps 通常比其他数据结构（包括 DAWG 和 Tries）更快；
*   Python set 优化得很好；内置类型的哈希计算也得到了优化；CPython 中的 set/dicts 具有用于 unicode 键的专用代码路径。

当项目不在 DAWG 中时，DAWG 可能具有优势，因为它需要少于 len(key) 的步骤来检查它，并且总是需要 len(key) 步骤来计算散列（好吧，如果散列值没有被缓存）。但即使在这种情况下，也很难击败内置设置。

一个无耻的插件 - 你也可以试试[https://pypi.python.org/pypi/DAWG](https://pypi.python.org/pypi/DAWG)`__contains__` - 但仍然比 dict 慢 2 倍。

顺便说一句，pyDAWG Python 版本的 word2index 在内部进行了许多 dict 查找，因此它不能比单个集合查找快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T09:45:41.277

`word2index`通过调用听起来您不需要的方法，您正在使用完美的散列功能。你为什么不`exists`改用？

# apache2 - mod_wsgi 的测试页面

> ID：14953781
> 
> 赞同：-1
> 
> 时间：2013-02-19T09:15:49.897
> 
> 标签：apache2, mod-wsgi, mod-python

`mod_python`有一个测试页面脚本，它发出有关服务器配置的信息。你可以把

```
SetHandler mod_python
PythonHandler mod_python.testhandler 
```

进入你的`.htaccess`，它会显示页面。

现在我的问题是：是否`mod_wsgi`也存在类似的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T10:50:38.057

不，您可以通过迭代 environ 的键来创建一些有用的东西，但是：

```
def application(env, respond):
    respond('200 OK', [('Content-Type', 'text/plain')])
    return ['\n'.join('%s: %s' % (k, v) for (k, v) in env.iteritems())] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T20:09:06.837

我现在在这里整理了一个类似测试页的东西。为了您的方便，我将在这里与您分享：

```
def tag(t, **k):
    kk = ''.join(' %s=%r' % kv for kv in k.items())
    format = '<%s%s>%%s</%s>' % (t, kk, t)
    return lambda content: format % content

def table(d):
    from cgi import escape
    escq = lambda s: escape(s, quote=True)
    tr = tag('tr')
    th = tag('th')
    td_code = lambda content: tag('td')(tag('code')(content))
    return tag('table', border='1')(''.join((
        '\n\t' + tr(th('Key') + th('Value') + th('Repr')) + '\n',
        ''.join(('\t' + tr(td_code('%s') + td_code('%s') + td_code('%s')) + '\n') % (k, escq(str(v)), escq(repr(v))) for k, v in sorted(d.items())),
    ))) + '\n'

def application(environ, start_response):
    import os
    l = []
    from wsgiref.headers import Headers
    h = Headers(l)
    h.add_header('Content-Type', 'text/html')
    start_response('200 OK', l)
    yield '<html><head><title>my mod_wsgi test page</title></head><body>\n'
#    yield '<h3>General information</h3>\n'
#    yield table({})
    yield '<h3>Process info</h3>\n'
    yield table(dict(
        wd=os.getcwd(),
        pid=os.getpid(),
        ppid=os.getppid(),
        uid=os.getuid(),
        gid=os.getgid(),
    ))
    yield '<h3>Environment</h3>\n'
    yield table(environ) 
```

# c# - Windows 服务计时器设置为每周

> ID：14953785
> 
> 赞同：1
> 
> 时间：2013-02-19T09:15:58.290
> 
> 标签：c#, service, timer

我有一个运行多个定时功能的 Windows 服务：

```
 _timer = new Timer(1 * 60 * 1000); // every 1 minute
   _timer.Elapsed += new System.Timers.ElapsedEventHandler(timer_Elapsed);
   _timer.Start();
   _fbtimer = new System.Timers.Timer(48 * 60 * 60 * 1000);
   _fbtimer.Elapsed += new System.Timers.ElapsedEventHandler(fbtimer_Elapsed);
   _fbtimer.Start();
   //Weekley Snapshot
   _ventimer = new System.Timers.Timer(2 * 60 * 1000);
   _ventimer.Elapsed += new System.Timers.ElapsedEventHandler(ventimer_Elapsed);
   _ventimer.Start();
   //Weekly Activity
   _tevtimer = new System.Timers.Timer(2 * 60 * 1000);
   _tevtimer.Elapsed += new System.Timers.ElapsedEventHandler(tevtimer_Elapsed);
   _tevtimer.Start(); 
```

我如何将计时器设置为每周发生一次，或者甚至更好地将其设置为每周一天的特定时间，而不使用 quatrz/windows 调度程序或太不同的方法。

补充：这就是我每天 10 点执行任务的方式

```
private void timer_Elapsed(object sender, System.Timers.ElapsedEventArgs e)
{
    //log.Info("Info - Check time");
    DateTime startAt = DateTime.Today.AddHours(10);
    if (_lastRun < startAt && DateTime.Now >= startAt)
    {
      _timer.Stop();
      //Stuff
      _lastRun = DateTime.Now;
      _timer.Start();
     }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T09:21:26.817

> 不使用 quatrz/windows 调度程序或太不同的方法。

为什么要重新发明轮子，糟糕？无论如何，每周计时器不会有多大好处。如果您将计时器编码为等待一周，并且机器在一周中途重新启动以进行更新怎么办？计时器将再次开始等待一周。

你最好让它以较小的间隔运行，并检查每次是否该运行你想要的方法。这样，您可以预先计算“事件时间”并每次检查它。

# java - Guava：Iterables 变换方法的使用

> ID：14953787
> 
> 赞同：4
> 
> 时间：2013-02-19T09:15:59.327
> 
> 标签：java, guava

我有树`ClassA`类`ClassB`和`ClassC`. `ClassA`和`ClassB extends ClassC`。我已经合并了`Multimap<ClassC`> 并且我有`Collection`不同类型的对象。我想从中获取这些对象，`Collection`但如何区分这些对象？我已经创建`Collection<? super ClassC> coll = multimap.get(key)`并希望使用`trnasform`方法获取这些对象，但我不知道如何区分对象的类型。你能给我建议吗？我感谢每一个帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T09:26:08.603

通过它的声音，您实际上需要将集合过滤为您想要的类型：

```
Collection<? super ClassC> coll = multimap.get(key);

Iterable<ClassA> classAs = Iterables.filter(coll, ClassA.class);
Iterable<ClassB> classBs = Iterables.filter(coll, ClassB.class); 
```

使用重载从@EtienneNeveu 更新`Iterables.filter(Iterable<?> unfiltered, Class<T> type)`删除了我原始答案的任何类型问题。

# html - img 标签的 src 属性是如何执行的？

> ID：14953792
> 
> 赞同：12
> 
> 时间：2013-02-19T09:16:11.610
> 
> 标签：html, image, src

考虑以下代码：

```
 <img src="http://website.com/Page/1"/> 
```

“1”是要插入到 website.com 的“页面”页面中的某个表中的参数。这个页面的访问者（包含上面的代码）会导致页面执行并将 1 插入到表中吗？如果页面包含一些 Javascript 代码。如果我们访问包含上述代码的页面，它会被执行吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-19T09:35:12.487

浏览器，如果配置为加载和显示图像，将首先检查它是否在其自己的缓存中具有与 URL 匹配的文档为新鲜的（通过某些缓存标准）。如果没有，它将通过 HTTP 向 mysite.com 发送资源 /Page/1 的 GET 请求。然后发生什么取决于服务器。它可能只是从其资源中获取一个图像文件并将其发送到浏览器，或者它可能生成一个图像并发送它，或者它可能（而不是或除了这些东西之外）在其数据库中存储或更新某些东西，或者只是文件中的一个计数器，或者它被编程做的任何事情。

如果服务器发送的资源是图片数据，浏览器会尝试显示。如果它碰巧是一个 HTML 文档，它将被丢弃，并且浏览器将显示 alt 属性的值，或显示损坏图像的图标，或两者兼而有之。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T09:24:50.303

当浏览器`img`在可见区域中找到此标签时（例如，不应将其隐藏`display: none`），它会将图像作为 http 请求执行。这也是统计跟踪的工作原理。

因此，由于它是一个常规的 http 请求，它将执行该 URL 的服务器端代码，该代码应该返回一个图像（只是一个空白的 1x1 gif），因此浏览器不会报告错误。

但请记住，如果您第二次访问此页面，浏览器可能会缓存图像。因此，要么在末尾附加一个随机字符串或时间戳（例如[http://website.com/Page/1?23423412341](http://website.com/Page/1?23423412341)），要么用 htaccess 告诉浏览器不要缓存它。

# android - Android 通知 LED 不使用我的颜色

> ID：14953793
> 
> 赞同：9
> 
> 时间：2013-02-19T09:16:12.513
> 
> 标签：android, notifications, led

我正在尝试使用在我的 S3 上也使用通知 LED 的通知，但由于某种原因，颜色将始终为蓝色（我猜这是默认值？）。我尝试使用不同的颜色，但没有任何变化。其他应用程序（如 Whatsapp、Gmail 和 Facebook 在显示不同颜色的光方面没有问题）。

```
Notification.Builder noteBuilder = new Notification.Builder(context)
                .setAutoCancel(true)
                .setPriority(Notification.PRIORITY_DEFAULT)
                .setSmallIcon(R.drawable.ic_launcher)
                .setContentTitle(ContentTitle)
                .setContentText(ContentText)
                .setLights(Color.YELLOW, 500, 500)
                ;

Intent noteIntent = new Intent(context,HoofdScherm.class);
PendingIntent notePendingIntent = PendingIntent.getActivity(context, 0, noteIntent, PendingIntent.FLAG_CANCEL_CURRENT);
noteBuilder.setContentIntent(notePendingIntent);

Notification note = noteBuilder.build();
note.ledARGB = Color.YELLOW;
NotificationManager mgr = (NotificationManager)context.getSystemService(Context.NOTIFICATION_SERVICE);
mgr.notify(0,note); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-19T12:42:35.933

您需要确保通过设置覆盖所有默认值

`notification.defaults = 0;`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-11-15T13:13:51.903

看看下面的来源。在 S3 上完美运行：

```
 NotificationCompat.Builder mBuilder =
                new NotificationCompat.Builder(ctx)
                        .setPriority(Notification.PRIORITY_HIGH)
                        .setSmallIcon(getNotificationIcon())
                        .setColor(0xff493C7C)
                        .setContentTitle(ctx.getString(R.string.app_name))
                        .setContentText(msg)
                        .setDefaults(Notification.DEFAULT_SOUND)
                        .setLights(0xff493C7C, 1000, 1000)
                        .setStyle(new NotificationCompat.BigTextStyle().bigText(styledMsg)); 
```

# c# - 如何在 .net 的 TeeChart 中添加鼠标单击事件

> ID：14953798
> 
> 赞同：2
> 
> 时间：2013-02-19T09:16:16.773
> 
> 标签：c#, winforms, mouseevent, teechart

我正在使用 Windows 窗体在 C# 中创建 GUI。为了以图形表示形式查看数据，我使用了 .Net v3 的许可 TeeChart。我想在 TeeChart 中实现鼠标点击事件。我有 VB6 代码，因为 GUI 之前是在 VB6 中创建的。我已将该 VB6 代码转换为 C#，但仍有一些问题。我想在 TeeChart 上创建鼠标点击弹出窗口。下面的代码显示了在 teechart 上创建鼠标单击弹出窗口的 Vb6 代码。

```
Private Sub TChart1_OnMouseUp(ByVal Button As TeeChart.EMouseButton, ByVal Shift As TeeChart.EShiftState, ByVal x As Long, ByVal y As Long)

If Not m_objTransfer Is Nothing Then

    If chkGraphVolume.value = vbChecked And Button = mbRight Then
        'MsgBox TChart1.Series(0).XValueToText(x)
        'MsgBox TChart1.Series(0).XValueToText(TChart1.Series(0).XScreenToValue(x))

        'MsgBox TChart1.Series(0).XScreenToValue(x)

        m_dblTempVolFromTo = Round(TChart1.Series(0).XValueToText(TChart1.Series(0).XScreenToValue(x)))

        mnuPopupChartFrom.Caption = "From " & m_dblTempVolFromTo & " cc"
        mnuPopupChartTo.Caption = "To " & m_dblTempVolFromTo & " cc"

        PopupMenu mnuPopupChart

    ElseIf chkGraphVolume.value = vbUnchecked And Button = mbRight Then
        Debug.Print CDate(TChart1.Series(0).XScreenToValue(x))
        mnuPopupChartFrom.Caption = "From " & CDate(TChart1.Series(0).XScreenToValue(x))
        mnuPopupChartTo.Caption = "To " & CDate(TChart1.Series(0).XScreenToValue(x))
        m_dtTempTimeFromTo = CDate(TChart1.Series(0).XScreenToValue(x))

        PopupMenu mnuPopupChart

    End If

End If
Debug.Print "From " TChart1.Series(0).XValueToText(TChart1.Series(0).XScreenToValue(x)) & " cc   
 End Sub 
```

我已将上述代码转换为 C#

```
private void TChart1_OnMouseUp(TeeChart.EMouseButton Button, TeeChart.EShiftState Shift, long x, long y) {
    if (!(m_objTransfer == null)) {
        if (((chkGraphVolume.value == vbChecked) 
                    && (Button == mbRight))) {
            // MsgBox TChart1.Series(0).XValueToText(x)
            // MsgBox TChart1.Series(0).XValueToText(TChart1.Series(0).XScreenToValue(x))
            // MsgBox TChart1.Series(0).XScreenToValue(x)
            m_dblTempVolFromTo = Round(TChart1.Series(0).XValueToText(TChart1.Series(0).XScreenToValue(x)));
            mnuPopupChartFrom.Caption = ("From " 
                        + (m_dblTempVolFromTo + " cc"));
            mnuPopupChartTo.Caption = ("To " 
                        + (m_dblTempVolFromTo + " cc"));
            PopupMenu;
            mnuPopupChart;
        }
        else if (((chkGraphVolume.value == vbUnchecked) 
                    && (Button == mbRight))) {
            Debug.Print;
            DateTime.Parse(TChart1.Series(0).XScreenToValue(x));
            mnuPopupChartFrom.Caption = ("From " + DateTime.Parse(TChart1.Series(0).XScreenToValue(x)));
            mnuPopupChartTo.Caption = ("To " + DateTime.Parse(TChart1.Series(0).XScreenToValue(x)));
            m_dtTempTimeFromTo = DateTime.Parse(TChart1.Series(0).XScreenToValue(x));
            PopupMenu;
            mnuPopupChart;
        }
    }
    Debug.Print;
    ("From " + (TChart1.Series(0).XValueToText(TChart1.Series(0).XScreenToValue(x)) + " cc"));
} 
```

但我无法使用上面的代码在 TeeChart 上创建弹出窗口。我想在鼠标单击时使用 x 轴位置创建弹出菜单。所以请帮我解决这个问题。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T12:24:52.683

感谢您的澄清。我已经修改了您的代码以制作一个简单的示例，其中我使用了带有 Xscreenvalues 的 ContextMenu，这些值在 MouseUp 事件中计算，我认为您可以在下一个代码中执行一些操作：

```
 ContextMenu ContextMenu1;
    MenuItem menuItem1;
    MenuItem menuItem2;
    public Form1()
    {
        InitializeComponent();
        ContextMenu1 = new System.Windows.Forms.ContextMenu();
        menuItem1 = new System.Windows.Forms.MenuItem();
        menuItem2 = new System.Windows.Forms.MenuItem();
        ContextMenu1.MenuItems.AddRange(new System.Windows.Forms.MenuItem[] { menuItem1, menuItem2 });
        InitializeChart();
    }
  Steema.TeeChart.Styles.Line line; 
  private void InitializeChart()
  {
      line = new Line(tChart1.Chart);
      line.FillSampleValues();
      tChart1.MouseUp  = new MouseEventHandler(tChart1_MouseUp);
  }

  void tChart1_MouseUp(object sender, MouseEventArgs e)
  {
      if (e.Button == System.Windows.Forms.MouseButtons.Right)
      {
          menuItem1.Index = 0;
          menuItem1.Text = "From:"   Math.Round(tChart1[0].XScreenToValue(e.X)).ToString();
          menuItem2.Index = 1;
          menuItem2.Text = "To:"   Math.Round(tChart1[0].XScreenToValue(e.X)).ToString();
          ContextMenu1.Show(tChart1, new Point(e.X, e.Y));
      }
  } 
```

您能否告诉我们以前的代码是否适用于您？

我希望会有所帮助。

谢谢，

# php - 每行数组爆炸和匹配/使用表行

> ID：14953800
> 
> 赞同：2
> 
> 时间：2013-02-19T09:16:25.853
> 
> 标签：php

你好，你能给我这个正确的代码吗...

```
$split_getCreatedfield = explode(",", "3,1,2");

$fieldsWithValue = explode("~","1->Samuel Pulta~2->21~3->Male~");

for($row=0;$row<count(fieldsWithValue);$row++){

$data = explode("->", $fieldsWithValue[$row]);

} 
```

我想要这样的输出

```
3 = 3 = Male

2 = 2 = 21

1 = 1 = Samuel Pulta 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T10:02:02.350

我宁愿使用`preg_match_all()`，像这样：

```
$i = '3,2,1';
$s = '1->Samuel Pulta~2->21~3->Male~';

preg_match_all('/(\d+)->(.*?)(?:~|$)/', $s, $matches);

$fields = array_combine($matches[1], $matches[2]);

foreach (explode(',', $i) as $index) {
  if (isset($fields[$index])) {
    echo $index, ' = ', $index, ' = ', $fields[$index]. PHP_EOL;
  }
} 
```

正则表达式匹配项，`1->Samuel Pulta`并构建一个数组，其中数字作为键，后面的任何内容作为值。

然后，您只需遍历必要的索引并从`$fields`数组中打印它们的相应值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T09:26:03.603

```
<?php
$split_getCreatedfield  = explode(",", "3,1,2");
$fieldsWithValue        = explode("~","1->Samuel Pulta~2->21~3->Male~");

$result                 = array();
foreach($fieldsWithValue as $key => $val){
    if(trim($val) != ""){
        $res                = explode("->",$val);
        $res_key            = array_search($res[0],$split_getCreatedfield);
        $result[$key][]       = $split_getCreatedfield[$res_key];
        $result[$key][]       = $res[0];
        $result[$key][]       = $res[1];
    }
}
krsort($result); /// Not really required 
echo "<table>";
foreach($result as $vals){
echo "<tr><td>".$vals[0]."</td><td>=".$vals[1]."</td><td>=".$vals[2]."</td></tr>";
}
echo "</table>";

?> 
```

输出：

```
3   =3  =Male
2   =2  =21
1   =1  =Samuel Pulta 
```

# apache - 我正在尝试使用 /usr/local/apache2/bin/apachectl -k start 在服务器下运行 apache 服务器

> ID：14953801
> 
> 赞同：1
> 
> 时间：2013-02-19T09:16:33.840
> 
> 标签：apache

我正在尝试使用 /usr/local/apache2/bin/apachectl -k start 在服务器下运行 apache 服务器，但我得到的输出是 /usr/local/apache2/bin/apachectl ：没有这样的目录或文件。谁能帮我 。提前致谢

# r - 如何比较R中两个不同时间序列的两个预测图？

> ID：14953802
> 
> 赞同：0
> 
> 时间：2013-02-19T09:16:36.850
> 
> 标签：r, forecasting

实际上我想比较两个不同时间序列数据的预测图。我有两个每月观察到的两个不同城市的降雨数据的 5 年数据。为此，我已经绘制了 5 年的时间序列图以及未来 2 年使用两个城市的预测包的图表。现在我想比较这两个图以及它们未来 2 年的预测（可能是误差）。

谁能帮我解决这些问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T20:25:11.460

你可以从这样的事情开始：

```
f1 <- forecast(series1, h=24)
f2 <- forecast(series2, h=24)
accuracy(f1)
accuracy(f2) 
```

这将为您提供许多有关历史数据的错误度量。除非您拥有未来期间的实际数据，否则您将无能为力。

# android - 发送带参数的 JSON 对象

> ID：14953803
> 
> 赞同：1
> 
> 时间：2013-02-19T09:16:41.690
> 
> 标签：android, json

在我的应用程序中，我试图发送带有 UserId 等参数的 JSONObject，任何人都可以向我推荐一些教程，我可以从中获得一些帮助......

我得到了这段代码，但在这段代码中，我只能发送 JSONObject 而不是参数..

我的网址是这样的：[http ://www.example.com/JSONObject/userId](http://www.example.com/JSONObject/userId)

我如何将带有 userId 的 JSONObject 传递给服务器..

```
public class HTTPPoster {
    public HttpResponse doPost(String url, JSONObject jsonProfilo) throws ClientProtocolException, IOException {
        DefaultHttpClient httpclient = new DefaultHttpClient();
        HttpPost request = new HttpPost(url);
        HttpEntity entity;
        StringEntity s = new StringEntity(jsonProfilo.toString());
        s.setContentEncoding((Header) new BasicHeader(HTTP.CONTENT_TYPE, "application/json"));
        entity = s;
        request.setEntity(entity);
        HttpResponse response;
        response = httpclient.execute(request);
        return response;
    }
} 
```

谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T09:32:18.690

在 JSONObject 中，您可以保留您的参数，例如：

```
JSONObject jsonvalue =new JSONObject();
jsonvalue.put("userId", "urUserId"); 
```

示例代码，这里我发送服务器 imeiNumber ， userName 和 paasword：

```
JSONObject jsonvalue =new JSONObject();
jsonvalue = new JSONObject();
jsonvalue.put("imeiNumber", "00000000000");
jsonvalue.put("userName", mUserName);
jsonvalue.put("plainPassword", mPassword); 
```

我的观点同样是你可以将 userId 和 globalId 发送到服务器。

现在在你的 HttpConnection 中：

```
HttpURLConnection conn = null;
conn = (HttpURLConnection) url.openConnection();
conn.setRequestProperty("Content-Type", "application/json");
conn.setDoOutput(true);
conn.setRequestMethod("POST");
conn.setChunkedStreamingMode(0);
conn.setUseCaches(false);
String urlParameters = "body"
    + URLEncoder.encode(jsonvalue.toString(), "UTF-8");       
conn.setRequestProperty("Content-Length",
    "" + Integer.toString(urlParameters.getBytes().length));

try {
     OutputStream os = conn.getOutputStream();
     os.write(jsonvalue.toString().getBytes());
     os.close();
} catch (IOException e) {
    e.printStackTrace();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T09:29:32.570

你是什​​么意思“我只能发送 JSONObject 而不是参数。” ，您可以将所有参数放在 JsonObject 本身中，我没有得到您真正的问题

# bash - 从 bash 进入 cshell

> ID：14953804
> 
> 赞同：3
> 
> 时间：2013-02-19T09:16:44.873
> 
> 标签：bash, csh

我有一个 bash 脚本，需要在其中的 cshell 中运行一些命令。

```
#!/bin/bash

echo entering_to_cshell
csh
echo in_cshell
exit
echo exited_from_cshell 
```

为什么这个脚本没有按预期运行？它只打印`entering_to_cshell`并且不会从 cshell 退出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T09:31:20.680

通过使用

```
csh 
```

你启动一个新的子shell，你的脚本没有被执行。这就是为什么没有执行以下命令的原因。您的脚本等待此子shell 结束，正如您所指出的，这永远不会发生。

尝试

```
csh -c "echo in_cshell" 
```

这样您就不会创建不受脚本影响的新子shell。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T09:38:27.570

通过简单地调用`csh`您的脚本，您将启动一个交互式 csh 子shell。您会注意到，一旦您退出`csh`会话，您的脚本将继续执行后续的 echo 和 quiting on `exit`。

要将一系列命令传递给`csh`bash 脚本，一种方法是使用[Here Document](http://tldp.org/LDP/abs/html/here-docs.html)语法将命令重定向到`csh`.

```
#!/bin/bash

echo entering_to_cshell

csh <<EOF
echo in_cshell
exit
EOF

echo exited_from_cshell 
```

EOF 条目之间的行将被视为由`csh`.

# tomcat - Appfuse 永久永久空间

> ID：14953809
> 
> 赞同：2
> 
> 时间：2013-02-19T09:17:03.637
> 
> 标签：tomcat, web-applications, permgen, appfuse

我正在使用 appfuse 开发应用程序。一切运行良好，但是当我在 Tomcat（6 和 7）上部署它时，出现下一个错误：Perm gen space。

我修改了 catalina.bat 文件添加了这一行：

```
set JAVA_OPTS="-Xmx1024M -XX:PermSize=512m -XX:MaxPermSize=1024m -Djava.awt.headless=true -XX:+CMSClassUnloadingEnabled -XX:+UseConcMarkSweepGC" 
```

webApp 运行速度非常快，但点击几下后，我得到了我之前评论过的错误。我怎样才能避免这种情况？

**编辑**

我正在使用 appfuse 2.2.1

**编辑 2** 右上角的图表显示 permGen 使用...正常吗？

![在此处输入图像描述](../Images/b74a3e9b2f60f2bf0e2a7591103d0cdf.png)

**编辑 3**

当我的开发环境中使用的内存 == 最大大小时，会发生这种情况（但不是在我的生产环境中）：

![在此处输入图像描述](../Images/b21afb15e10aab0cb562728f5d452b1a.png)

开发环境：

Windows 7 - jdk1.6 - mysql 5.1 - tomcat 6 - 7

生产环境：

Windows server 2008 - R2 ISAPI 过滤器在 IIS 上运行 Tomcat - 在 Tomcat 6 和 7 上测试 - Mysql 5.1 - jdk1.6

内存分析器：

![在此处输入图像描述](../Images/9a0f372e3961f6372eb88147e41ed40f.png)

# android - 如何通过在 android 中使用 JSOUP 提供列的名称来获取列的所有行？

> ID：14953818
> 
> 赞同：0
> 
> 时间：2013-02-19T09:17:31.030
> 
> 标签：android, parsing, jsoup

我正在使用 Jsoup 库在我的 android 应用程序中解析 html。这是我要解析的 html 页面中的列：

```
<TD width="9%" ROWSPAN = 2>Days</TD> 
```

现在我想获取该列的所有行。我使用以下代码确实实现了我的目标，但成功还很遥远：

```
StringBuilder s = new StringBuilder(100);

Document doc = Jsoup.parse(htmlPage);

Elements links = doc.select("table tr.Day");

for (Element link : links) 
{
    String linkHref = link.attr("href");
    System.out.println(linkHref);
    s.append(linkHref);
    String linkText = link.text();
    System.out.println(linkText);
    s.append(linkText);
} 
```

我搜索了很多但无济于事。请帮助我。在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T11:59:23.397

假设您的 html 看起来与此类似：

```
 <table> 
   <tbody>
    <tr>
     <td width="9%" rowspan="2">Days</td> 
     <td>a</td> 
     <td>b</td> 
     <td>c</td> 
     <td>d</td> 
    </tr>
   </tbody>
  </table> 
```

如果我理解正确，您希望`td`标签下的所有内容都带有天数。

```
Document doc = Jsoup.parse(htmlPage);

for( Element element : doc.select("td:contains(days) ~ *") ) // Select everything followed after the 'td' tag with 'days' text
{
    System.out.println(element); // do something with the elememnt
} 
```

在获得此输出之前使用发布的 html：

```
<td>a</td>
<td>b</td>
<td>c</td>
<td>d</td> 
```

# python - 任何安装外部 python 库的工具（如 MySQLdb）

> ID：14953825
> 
> 赞同：-1
> 
> 时间：2013-02-19T09:17:57.927
> 
> 标签：python, packages, package-managers

是否有任何工具可以从中央存储库安装外部 python 模块（例如用于 perl 的 cpan）。我使用 yum 安装了 MySQLdb 模块。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T09:24:54.197

查看 pip 和 python 包索引：[https ://pypi.python.org/pypi](https://pypi.python.org/pypi)

您也可以打包自己的模块并将它们上传到私有 pip 服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T09:23:22.390

有一个 pip - 用于管理 Python 包的工具（[https://pypi.python.org/pypi/pip](https://pypi.python.org/pypi/pip)）。

# php - 是否有任何工具可以在代码中按名称对 PHP 类方法进行排序？

> ID：14953833
> 
> 赞同：3
> 
> 时间：2013-02-19T09:18:09.773
> 
> 标签：php, netbeans, ide, coding-style

我想知道是否有任何工具可以对 PHP 代码进行排序（确切地说，是按名称排序的类的方法）。我已经用谷歌搜索了一段时间，但我没有找到任何东西。

编辑：我有很多混合的 setter 和 getter 方法，我想订购它们以提高代码的可读性并更容易找到它们。当然，我更喜欢对相关方法进行分组，而不是按字母顺序对所有方法进行排序，但在每个组中，我更喜欢按这种方式排序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T09:42:54.600

您不想在文件本身中按字母顺序排列您的类方法。当属于一起的方法彼此接近时，代码更容易阅读：

> 密切相关的概念应该保持垂直靠近彼此 [G10] [...] 我们希望避免强迫我们的读者在我们的源文件和类中跳来跳去

^(来自 Martin，清洁代码，“垂直距离”，第 4 页。80)

如果您需要按字母顺序查看它们，请改用 IDE 的动态视图。在 Netbeans 中，这称为类大纲视图。请参阅[Netbeans for PHP 中的“类大纲视图”在哪里？](https://stackoverflow.com/questions/4756770/where-is-the-class-outline-view-in-netbeans-for-php)关于如何启用此功能。

如果您出于某种原因迫切希望使用 PHP 执行此操作，您可以使用[反射 API](http://php.net/Reflection)来执行此操作：

```
// get all the methods
$reflector = new ReflectionClass('Foo');
$methods = $reflector->getMethods();

// sort methods alphabetically
usort($methods, function($method1, $method2) {
    return strcasecmp($method1->getName(), $method2->getName());
});

print_r($methods); 
```

[这将为您提供一个按方法名称排序的ReflectionMethod](http://php.net/ReflectionMethod)对象数组。

# eclipse - 显示 Eclipse 迷你进度条？

> ID：14953834
> 
> 赞同：4
> 
> 时间：2013-02-19T09:18:09.850
> 
> 标签：eclipse

愚蠢的问题：如何让小进度条回到 Eclipse 中？我设法把它从存在中拖出来......

![在此处输入图像描述](../Images/4400509b39351bfb76639a231aa92766.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T10:44:12.363

我不知道您如何仅删除进度条。我猜你删除了控制台窗口。
要添加控制台窗口，请转到
**Window --> Show View --> console**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-11T16:39:52.390

最大化eclipse窗口，它会弹出回来。为我工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-13T15:21:11.817

恢复向下和最大化 Eclipse 窗口对我也有用。

# android - Android通过代码使网页适合屏幕宽度

> ID：14953836
> 
> 赞同：0
> 
> 时间：2013-02-19T09:18:17.553
> 
> 标签：android, resize, webpage

大家晚上好：

有一个为 iPhone4 (640x960) 设计的网页

我有 2 台 Android 设备

*   HTC Butterfly，android 4.1.1(1080x1920)，与United Stats中称为DroidDNA的模块完全相同
*   HTC DesireHD，安卓 2.3.5(480x800)

因为我无法对该网页进行任何修改，所以一切都必须由我的代码完成。

我现在正在做的是：

主要的.xml

```
<WebView android:id="@+id/webView" android:layout_width="match_parent" android:layout_height="match_parent" /> 
```

主.java

```
webView=(WebView)findViewById(R.id.webView);
webView.setInitialScale(1);
webView.getSettings().setLoadWithOverviewMode(true);
webView.getSettings().setUseWideViewPort(true);
webView.getSettings().setJavaScriptEnabled(true);
webView.loadUrl("Some URL"); 
```

Page 非常适合 HTC Butterfly 的屏幕宽度，但仍然比 HTC DesireHD 的屏幕大。

如何缩小页面以适应较小的屏幕？

# django - FastCGI 动态服务器配置。对于 Django/Apache

> ID：14953840
> 
> 赞同：2
> 
> 时间：2013-02-19T09:18:23.417
> 
> 标签：django, apache, fastcgi

我正在尝试在 Apache 上使用 Pyton 2.7、Flup 和 mod_fastcgi 运行 Django 1.4。所以我所做的是：

1.  将 mod_fastcgi 添加到 httpd.conf
2.  创建两个文件：.htaccess 和 index.fcgi 在我的公共 Web 根目录中名为 portal 的目录`c:\xampp\htdocs\portal`中 - 实际的 Django 项目`d:\projects\portal`在 index.fcgi 中，我有以下内容：

```
#!C:/Python27/python.exe
import sys, os
from django.core.servers.fastcgi import runfastcgi

sys.path.append("D:/projects/portal")
os.environ['DJANGO_SETTINGS_MODULE'] = "portal.settings"

runfastcgi(method="threaded", daemonize="false") 
```

但是在运行时`localhost/portal/`，我的 Apache error.log 中出现以下错误

```
_setupSocket 中的文件“C:\Python27\lib\site-packages\flup\server\fcgi_base.py”，第 1020 行
    '如果你想要 FCGI，请创建一个外部 FCGI 服务器'

```

它告诉我可以创建一个外部 FCGI 服务器，但我需要它位于动态服务器上。有任何想法吗？

**更新：** 我的设置是在 Windows 服务器上。我也可以启动 Linux 服务器，所以问题更多的是 Apache、FastCGI 和添加站点而不更改服务器上的任何配置 - Apache/FastCGI 服务器

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T09:20:55.957

你没有[启动你的 fcgi 服务器](https://docs.djangoproject.com/en/dev/howto/deployment/fastcgi/#starting-your-fastcgi-server)。

# sql - plpgsql函数问题

> ID：14953843
> 
> 赞同：0
> 
> 时间：2013-02-19T09:18:25.293
> 
> 标签：sql, postgresql, postgis, plpgsql

我有以下 plpgsql 程序；

```
DECLARE 
     _r record;
     point varchar[] := '{}';
     i int := 0;

BEGIN

FOR _r IN EXECUTE ' SELECT a.'|| quote_ident(column) || ' AS point,
       FROM ' || quote_ident (table) ||' AS a'
LOOP

       point[i] = _r;
       i = i+1;

END LOOP;

RETURN 'OK';
END; 
```

它的主要目标是遍历一个表并将行的每个值存储在一个数组中。我还是 plpgsql 的新手。谁能指出错误，因为它给了我以下错误； ![在此处输入图像描述](../Images/4dfe1615d719c151ac177ace6b87963f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T09:51:52.700

这是完整的语法（请注意，我将参数重命名`column`为`col_name`as`column`保留字。同样适用于`table`）

```
create or replace function foo(col_name text, table_name text)
  returns text
as
$body$

DECLARE 
     _r record;
     point character varying[] := '{}';
     i int := 0;

BEGIN
    FOR _r IN EXECUTE 'SELECT a.'|| quote_ident(col_name) || ' AS pt, FROM ' || quote_ident (table_name) ||' AS a'
    loop
     point[i] = _r;
     i = i+1;
   END LOOP;

   RETURN 'OK';
END;
$body$
language plpgsql; 
```

虽然说实话：我失败了​​，所以看看你在这里想要达到的目标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T17:48:48.630

[@a_horse](https://stackoverflow.com/a/14954529/939860)解决了您尝试失败的*大部分*严重问题。

但是，**没有人应该使用这个**。以下分步说明应该会导致使用现代 PostgreSQL 进行合理的实施。

### 阶段 1：消除错误和恶作剧

*   删除`SELECT`列表后的逗号以修复语法错误。

*   您以 开始数组`0`，而默认以 开始`1`。只有在需要时才这样做。如果您使用`array_upper()`et al. 操作会导致意想不到的结果。开始`1`吧。

*   `RETURN`将类型更改为`varchar[]`以返回组装的数组并使此演示有用。

到目前为止我们有什么：

```
CREATE OR REPLACE FUNCTION foo(tbl varchar, col varchar)
  RETURNS varchar[] LANGUAGE plpgsql AS
$BODY$
DECLARE 
   _r record;
   points varchar[] := '{}';
   i int := 0;
BEGIN
   FOR _r IN
      EXECUTE 'SELECT a.'|| quote_ident(col) || ' AS pt
      FROM ' || quote_ident (tbl) ||' AS a'
   LOOP
      i = i + 1;        -- reversed order to make array start with 1
      points[i] = _r;
   END LOOP;

   RETURN points;
END;
$BODY$; 
```

### 第 2 阶段：去除杂物，使其有用

*   为简单起见，使用/`text`代替。不过，两者都有效。`character varying``varchar`

*   您正在选择单个列，但使用类型的变量`record`。这样，整个记录被强制转换为`text`，其中包括括号。几乎没有任何意义。请改用`text`变量。如果您显式转换为( ) ，则适用于*任何*列。任何类型都可以转换为.`text``::text``text`

*   初始化变量没有意义`point`。它可以从`NULL`这里开始。

*   在这种情况下，内部的表和列*别名*`EXECUTE`是没有用的。动态执行的 SQL 有自己的作用域！

*   在 plpgsql 函数的`;`final 之后不需要分号 ( )。`END`

*   使用 .将每个值附加到数组中更简单[`||`](http://www.postgresql.org/docs/current/interactive/functions-array.html)。

几乎是理智的：

```
CREATE OR REPLACE FUNCTION foo1(tbl text, col text)
  RETURNS text[] LANGUAGE plpgsql AS
$func$
DECLARE 
   point  text;
   points text[];
BEGIN
   FOR point IN
      EXECUTE 'SELECT '|| quote_ident(col) || '::text FROM ' || quote_ident(tbl)
   LOOP
      points = points || point;
   END LOOP;

   RETURN points;
END
$func$; 
```

### 第 3 阶段：让它在现代 PL/pgSQL 中大放异彩

*   如果将表名作为 传递`text`，则会造成模棱两可的情况。您可以使用or很好地阻止[SQLi](http://en.wikipedia.org/wiki/SQL_Injection)，但是对于您之外的表，这将失败。 然后您需要添加*schema-qualification*，这会创建一个模棱两可的值。'xy' 可以代表表名“xy”或模式限定的表名“x”.“y”。你不能传递 "x"."y" 因为它会被转义到 """x"".""y"""。您需要为模式名称使用​​附加参数，或者在强制使用时根据需要自动引用一个类型的参数，这是这里的优雅解决方案。[`format()`](http://www.postgresql.org/docs/current/interactive/functions-string.html)[`quote_ident()`](http://www.postgresql.org/docs/current/interactive/functions-string.html)`search_path`
    *[**`regclass`**](http://www.postgresql.org/docs/current/interactive/datatype-oid.html) `regclass``text`*

**   new**`format()`**比多个（甚至单个）`quote_ident()`调用更简单。

    *   您没有指定任何**订单**。`SELECT`以任意顺序返回行，不带`ORDER BY`. 这*可能*看起来很稳定，因为只要基础表不改变，结果通常是可重现的。但这是 100% 不可靠的。您可能想要添加某种`ORDER BY`.

    *   最后，您根本不需要循环。`SELECT`使用带有[**Array 构造函数**](http://www.postgresql.org/docs/current/interactive/sql-expressions.html#SQL-SYNTAX-ARRAY-CONSTRUCTORS)的纯文本。

    *   使用**`OUT`参数**进一步简化代码* 

 *适当的解决方案：

```
CREATE OR REPLACE FUNCTION f_arr(tbl regclass, col text, OUT arr text[])
 LANGUAGE plpgsql AS
$func$
BEGIN

EXECUTE format('SELECT ARRAY(SELECT %I::text FROM %s ORDER BY 1)', col, tbl)
INTO arr;

END
$func$; 
```

称呼：

```
SELECT f_arr('myschema.mytbl', 'mycol'); 
```*

# javascript - 用于多列列表的 JQuery slideToggle

> ID：14953846
> 
> 赞同：0
> 
> 时间：2013-02-19T09:18:29.147
> 
> 标签：javascript, jquery, html, css, list

我有一个宽度为 li 33% 的大列表，所以有 3 列。

```
computers   monitors   hi-fi
sex-toys    pancakes   scissors 
```

在它们中的每一个中都隐藏了 UL，单击 slideToggle 即可。

**jQuery**

```
$('.subCategory > .parentleaf:has(ul) > .categoryicon').click(function() {
    $(this).siblings('ul').slideToggle('fast');
    }); 
```

不按我的意愿滑动的问题，他们每次都重新构建列表，就像这样

```
computers   monitors   hi-fi
[li]cars    sex-toys   pancakes
[li]dogs    scissors 
```

我想这样滑动它们：

```
computers   monitors   hi-fi
[li]cars    pancakes   scissors
[li]dogs
sex-toys 
```

我怎样才能做到这一点？

[**jsFiddle**](http://jsfiddle.net/dLmYx/)

[**jsFiddle 2**](http://jsfiddle.net/dLmYx/2/) - 在这种情况下需要红色 bg 颜色为 3 列

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T10:25:55.730

我`clearer div`在每三个之间添加了一个`li`

```
<ul class="subCategory">
    <li class="parentleaf">
        <span class="categoryicon">click</span>
        <span class="categoryname">Cars</span>
        <ul class="submenu">
            <li><a href="#">Car 1</a></li>
            <li><a href="#">Car 2</a></li> 
            <li><a href="#">Car 3</a></li>
            <li><a href="#">Car 4</a></li>
        </ul>
    </li>
    <li class="parentleaf">
        <span class="categoryicon">click</span>
        <span class="categoryname">Phones</span>
        <ul class="submenu">
            <li><a href="#">Phone 1</a></li>
            <li><a href="#">Phone 2</a></li> 
            <li><a href="#">Phone 3</a></li>
            <li><a href="#">Phone 4</a></li>
        </ul>
    </li>  
    <li class="parentleaf">
        <span class="categoryicon">click</span>
        <span class="categoryname">Guns</span>
        <ul class="submenu">
            <li><a href="#">Gun 1</a></li>
            <li><a href="#">Gun 2</a></li> 
            <li><a href="#">Gun 3</a></li>
            <li><a href="#">Gun 4</a></li>
        </ul>
    </li>   
    <div class="clearer"></div>
    <li class="parentleaf">
        <span class="categoryicon">click</span>
        <span class="categoryname">Notebooks</span>
        <ul class="submenu">
            <li><a href="#">Notebook 1</a></li>
            <li><a href="#">Notebook 2</a></li> 
            <li><a href="#">Notebook 3</a></li>
            <li><a href="#">Notebook 4</a></li>
        </ul>
    </li> 
```

**CSS**

```
.clearer
{
    clear:both; 
} 
```

**您还可以获取当前单击的索引，`li`并通过一些数学运算在单击时添加更清晰的 div 并在需要时将其删除，但我认为没有必要这样做**

# javascript - 网络工作者不工作

> ID：14953847
> 
> 赞同：1
> 
> 时间：2013-02-19T09:18:28.753
> 
> 标签：javascript, html, web-worker

我是 HTML5 的新手。我最近学习了 HTML5 的基础知识，但是当我使用 HTML5 进行中级编码时，我想出了一个叫做“HTML5 Web Workers”的东西。我用它写了一个简单的程序，但它不起作用。

**我的 HTML5 代码：**

```
<html>
    <head>
        <title>HTML5 - Web Workers</title>
    </head>
    <body>
        <p>Count : <output id="result"></output></p>
        <button onclick="startWorker()">Start count</button>
        <button onclick="endWorker()">End count</button>

        <script>
        var w; //the variable of object for web worker

        function startWorker() {
            if(typeof(Worker)!="undefined") //checking if browser supports web worker
            {
                if(typeof(w)=="undefined")
                {
                    w = new Worker("counter.js");
                }
                w.onmessage = function(e)
                {
                    document.getElementById('result').innerHTML = e.data;
                };
            }
            else
            {
                document.getElementById('result').innerHTML = "Your browser doesnot support HTML5 Web Worker! :)"; // or display the message that web worker is not supported!
            }
        }

        function endWorker() {
            w.terminate();
        }
        </script>
    </body>
</html> 
```

**我的网络工作者文件：**

```
var i=0;

function timedCount() {
    i=i+1;
    postMessage(i);
    setTimeout("timedCount()", 500);
}

timedCount(); 
```

你能告诉我为什么它不起作用吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-19T09:39:09.590

你的代码对我来说很好。您使用的是哪个浏览器，您在错误控制台中遇到了哪个错误？

如果您正在使用 Chrome 并且正在从本地文件系统进行测试（即您尚未将文件上传到 Web 服务器），那么您必须在启动浏览器时添加一个特殊标志。您必须启动 Chrome，`chrome --allow-file-access-from-files`它基本上允许您从本地文件系统上的脚本创建工作人员。但是，如果您将文件上传到网络服务器并使用这些文件进行测试 - 您将不需要此标志。

# sql - 数据库还原因移动而失败

> ID：14953848
> 
> 赞同：19
> 
> 时间：2013-02-19T09:18:37.240
> 
> 标签：sql, sql-server, sql-server-2008

我正在尝试恢复数据库备份但出现错误：

> *服务器“ASIF-VAIO”的恢复失败。(Microsoft.SqlServer.SmoExtended)*
> 
> 附加信息：
> 
> *System.Data.SqlClient.SqlError：文件“C:\Program Files\Microsoft SQL Server\MSSQL10_50.MSSQLSERVER\MSSQL\DATA\uwa.mdf”由“Aston_Fresh_log”（2）和“Aston_Fresh”（1）声明。WITH MOVE 子句可用于重定位一个或多个文件。(Microsoft.SqlServer.Smo)*

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-02-19T09:42:35.603

恢复时，您需要确保

*   选择一个尚不存在的新数据库名称（除非您想覆盖该预先存在的数据库）

![在此处输入图像描述](../Images/406c23f5ea31535eceff90c8829ded0d.png)

*   您勾选`Overwrite`选项卡页面中的选项并为and文件`Options`定义**有效**的新文件名，这样您就不会意外覆盖系统上的另一个数据库：`.mdf``.ldf`

![在此处输入图像描述](../Images/8acb4735f1355870f27b4d894b28abc5.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-02-13T17:58:33.310

这篇文章有一些很好的答案，但我不相信我的解决方案在这里涵盖，或者我不理解答案/评论。

但是，当我遇到此错误时，我正在使用 2 个索引（主索引和索引）还原数据库。问题是，在恢复时它创建了两个 .ndf 文件，每个索引一个，但将它们命名为相同的东西。

所以基本上我有两个“恢复为”文件恢复到“D:\MSSQLDATA\DatabaseName.ndf。

为了克服这个问题，我必须更改其中一个文件名，例如我更改了

```
 Index      |    D:\MSSQLDATA\DatabaseName.ndf
 Primary    |    D:\MSSQLDATA\DatabaseName1.ndf 
```

拥有唯一的文件名为我解决了这个问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-11-28T13:40:06.570

这对我有用：为脚本部分中的每个 MDF 和 LDF 文件赋予不同的名称。

```
MOVE N'R_Data' 
  TO N'C:\Program Files\Microsoft SQL Server\MSSQL10.MSSQLSERVER\MSSQL\DATA\Build51_Testing_db1.mdf',

MOVE N'R_audit' 
  TO N'C:\Program Files\Microsoft SQL Server\MSSQL10.MSSQLSERVER\MSSQL\DATA\Build51_Testing_db2.mdf', 
```

ETC...

最初由 Alberto Morillo 建议

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-09-15T13:00:47.880

我知道距离上一个答案已经很久了，但我碰巧在谷歌搜索这个问题的解决方案。它为我做了什么，是编写恢复脚本（更改文件名并没有解决问题）并手动更改代码中的文件名

```
RESTORE DATABASE [DB_NAME] 
FILE = N'[name]',  
FILE = N'[name1]',
FILE = N'[name2]' 
FROM  DISK = N'[file_path]' 
WITH  FILE = 1m
MOVE N'[name]' TO N'D:\Program Files\Microsoft SQL Server\MSSQL11.MSSQLSERVER\MSSQL\Data\\[name].mdf',
MOVE N'[name1]' TO N'D:\Program Files\Microsoft SQL Server\MSSQL11.MSSQLSERVER\MSSQL\Data\\[name1].mdf',
MOVE N'[name2]' TO N'D:\Program Files\Microsoft SQL Server\MSSQL11.MSSQLSERVER\MSSQL\Data\\[name2].mdf',
MOVE N'[logname]' TO N'D:\Program Files\Microsoft SQL Server\MSSQL11.MSSQLSERVER\MSSQL\Data\\[logname].ldf'
NOUNLOAD,
REPLACE,
STATS = 10
GO 
```

问候

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-06-17T21:41:17.747

就我而言，我的文件夹中已经有一个`.mdf`and`.ldf`文件`\DATA`，所以我必须创建两个新文件：

```
New-Item C:\path\to\sql\DATA\NewDatabase.mdf
New-Item C:\path\to\sql\DATA\NewDatabase_log.ldf 
```

然后在 SQL 管理器中，您需要在恢复数据库时选择那些新文件。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-11-27T16:20:14.180

如果您遇到此问题并且不是上述问题，请尝试在“还原选项”>“文件”下，选中“将所有文件重新定位到文件夹”复选框。

![在此处输入图像描述](../Images/59cc17c5cfa69e6f0840258373ac5f08.png)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-10-18T10:23:11.413

就我而言，数据库有 2 个 mdf 文件。错误来了，因为我试图将两个 mdf 文件恢复为同名。

只需在“还原为”下重命名第二个 mdf 文件。

[![在此处输入图像描述](../Images/2fa2d01076786b299c1f56d838465fd5.png)](https://i.stack.imgur.com/5QX7U.png)

# php - PHP XML createElement 媒体：内容 url=""

> ID：14953853
> 
> 赞同：0
> 
> 时间：2013-02-19T09:19:05.050
> 
> 标签：php, xml, createelement

我正在使用 Php（用于 JW Player）制作一个 DOM XML 文件我如何创建这个元素：

```
<media:content url="foo.mp4" /> 
```

**我试过这个：**

```
$mediacontent = $dom->createElement('media:content', 'foo.mp4');
$item->appendChild($mediacontent); 
```

但它只生成：`<media:content>foo.mp4</media:content>`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T14:12:04.650

这解决了它：

```
$mediacontent = $dom->createElement('media:content');
$item->appendChild($mediacontent);
$url = $dom->createAttribute('url');
$mediacontent->appendChild($url);
$urlvalue = $dom->createTextNode('../movies/Dropbox/'.$filename.'');
$url->appendChild($urlvalue); 
```

# mysql - PHPMyadmin 中表格的奇怪问题

> ID：14953855
> 
> 赞同：0
> 
> 时间：2013-02-19T09:19:24.607
> 
> 标签：mysql, phpmyadmin

我的数据库中的表有问题，而我无法对其执行任何查询。我检查了我的语法乘法次数，在发现它没有问题后，我进入 PHPMyadmin 并发现了以下我以前没有遇到过的问题。

当我尝试浏览表中的行（其中超过 2000 行）时，它不会让我浏览并出现以下错误。即使我单击左侧菜单列表中的表名也是如此。

![在此处输入图像描述](../Images/a6a8a2647a17f4aa2770900cda805b1d.png)

如您所见，每当我尝试访问表时，它都会尝试使用 ORDER BY 来组织行，但我不知道它为什么要这样做。

任何人都可以对此有所了解吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T09:22:08.677

您的`order by`子句不包含列名

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T09:48:13.217

我设法通过删除并重新创建表来解决这个问题，但我仍然不确定为什么在我尝试访问表时它会添加默认的 ORDER BY。如果有人能对此有所了解，如果它再次发生将非常有帮助！谢谢

# javascript - 如何将fancybox附加到打开pdf文件的iframe上

> ID：14953859
> 
> 赞同：0
> 
> 时间：2013-02-19T09:19:43.127
> 
> 标签：javascript, iframe, fancybox

我在脚本文件中有以下java代码

```
$(".various").fancybox({
                maxWidth    : 1035,
                maxHeight   : 850,
                fitToView   : false,
                width       : '70%',
                height      : '70%',
                autoSize    : false,
                closeClick  : false,
                openEffect  : 'none',
                closeEffect : 'none'
            }); 
```

以下

```
html = html
                        + "<li><a href=\""
                        + pdfUrl
                        + "\" onclick=\"trackFactsheetView("+surveyId+",\'pdf\')\" class=\".iframe\" data-fancybox-type=\"iframe\" >View Facts</a></li>"; 
```

...给我

```
<a class=".iframe" data-fancybox-type="iframe" onclick="trackFactsheetView(44,'pdf')" href="public/filespool/0/44/US_Atlantic_East_Coast_Program-_USGS-2010.pdf">View Facts</a> 
```

`a`加载时不会在文档上生成链接。一旦触发事件，它们就会在对话框中创建。

但是，当我单击此链接时，它会在浏览器而不是 iframe 中打开 pdf 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T09:34:02.677

我将班级更改为`fancybox`. 它现在正在工作

# android - 无法将手机连接到 ADB 进行调试

> ID：14953860
> 
> 赞同：0
> 
> 时间：2013-02-19T09:19:45.093
> 
> 标签：android, adb, avd

我的环境——

*   HTC Explorer 开启了 USB 调试
*   Ubuntu 12.10
*   ADT 21
*   可用目标 - android-10、android-17

我系统上的输出`adb devices`是 -

```
List of devices attached 
emulator-5554   device
????????????    no permissions 
```

如果错误消息被认为是权限问题。因此，我尝试将权限更改`/dev/sdb`为 777，但没有成功。（这是我连接手机时出现的设备链接） 过去我使用windows在手机上调试我的应用程序，所以我确信我的手机支持USB调试。

是什么导致了这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T09:28:31.710

这对我有用的是做所有的 adb kill 并以 root 身份启动。这将检测到设备！

如果上述方法不起作用，请尝试按照 [设置设备进行开发（??????没有权限）](https://stackoverflow.com/questions/9210152/set-up-device-for-development-no-permissions)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T09:30:20.340

一年前，我在 Ubuntu 上开发并遇到了这个确切的问题，但不幸的是我不记得我是如何解决它的。我想我正在启动 adb 作为我的 SE 手机连接的根...

试试这个：

adb kill-server sudo adb start-server

# regex - 使用正则表达式表示标识符

> ID：14953861
> 
> 赞同：23
> 
> 时间：2013-02-19T09:19:47.893
> 
> 标签：regex, computer-science, regular-language

在 C 编程语言中识别标识符的常规定义由下式给出

```
letter -> a|b|...z|A|B|...|Z|_
digit -> 0|1|...|9
identifier -> letter(letter|digit)* 
```

此定义将生成形式的标识符

标识符：`[_a-zA-Z][_a-zA-Z0-9]*`

我现在的问题是如何将可以生成的标识符的长度限制为不超过 31 个字符。正则定义需要做哪些改变或者如何编写正则表达式来限制它不超过指定的长度。谁能帮忙。谢谢。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-02-19T09:35:38.177

您正在寻找的正则表达式是：

```
[_a-zA-Z][_a-zA-Z0-9]{0,30} 
```

它将匹配*下划线*或后跟*下划线*、*字母*或*数字的**字母*，其中`X` ***`0 <= X <= 30`***

 **** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T09:27:25.790

**更新：** *更新了正则表达式，使得标识符不以数字开头。*

为了限制长度，`{}`通常使用。
例如，您的正则表达式是`[_a-zA-Z0-9]+`. 意思是，允许任何字母数字值和下划线，并且长度必须大于等于 1。如果我们想限制它不超过 31 个字符，我们可以将正则表达式重写为：

```
[_a-zA-Z0-9]{1,31} 
```

{1,31} 表示这将接受长度大于等于 1 且小于等于 31 的字母数字值。

但是，上面的正则表达式也意味着标识符可以以数字开头。请注意，提供了三个范围：az、AZ 和 0-9。要限制标识符以字母或下划线开头，后跟字母、数字或下划线，可以使用以下正则表达式：

```
[_a-zA-Z][_a-zA-Z0-9]{0,30} 
```

第一部分`[_a-zA-Z]`强制标识符以字符或下划线开头。它还确保标识符不为空。正则表达式的其余部分`[_a-zA-Z0-9]{0-30}`确保只接受字符、下划线和数字，并且除了第一个字符之外，最多可以向标识符添加 30 个字符。

您可以对您的正则表达式进行相应的更改。***

# android - 在 Android 中动态创建 Listview

> ID：14953862
> 
> 赞同：1
> 
> 时间：2013-02-19T09:19:49.217
> 
> 标签：android, android-listview, dynamic-list

我有一个二维字符串`array`，

我想创建一个 3 列列表视图，它显示来自字符串数组的数据，它应该具有与字符串数组大小相同的行数。

这是我的字符串数组：

```
String[][] data = {
   {"001", "JOHN ","1001" },
   {"002", "SIBIN", "1002" },
   {"003", "TOM ",   "1003" },
   {"004", "FREEDY", "1004" }
   }; 
```

我想以`Listview`类似的方式显示它

```
ID    NAME   VACANCY ID
001   JOHN    1001
002   SIBIN   1002
003   TOM     1003
004   FREEDY  1004 
```

此外，当我单击列表视图项目时，它会重定向到具有列表视图 ID 的另一个页面

这怎么可能？我是android开发的新手，我只知道基础知识，我只知道如何创建`listview`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T09:28:39.903

为此，您首先需要一个自定义列表视图，您应该在 main.xml（只是一个 eg）文件中添加一个列表视图，然后创建一个像这样的类

```
public class MySimpleArrayAdapter extends ArrayAdapter<String> {
      private final Context context;
      private final String[] values;
      DataHelper dh;

      public MySimpleArrayAdapter(Context context, int textViewResourceId, String[] values) {
        super(context, textViewResourceId, values);
        this.context = context;
        this.values = values;

        dh=new DataHelper(getApplicationContext());
      }

      @Override
      public View getView(final int position, View convertView, ViewGroup parent) {
        LayoutInflater inflater = (LayoutInflater) context
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View rowView = inflater.inflate(R.layout.list_name, parent, false);
       textView = (TextView) rowView.findViewById(R.id.textname);

        textView.setText(values[position]);
        // Change the icon for Windows and iPhone
        textView.setOnClickListener(new View.OnClickListener() {
               public void onClick(View v) 
               {
                   Toast.makeText(this,""+values[position],10000).show();
               }
               });

        return rowView;
} 
```

R.layout.list_name 这将是新的 xml 文件，它将内容加载到列表视图

并且在您的 on create 方法中的最后一步执行此操作

```
con = (ListView) findViewById(R.id.main_listView); 
 MySimpleArrayAdapter adapter = new MySimpleArrayAdapter(MainActivity.this,  R.id.main_listView ,data);// data is String array valu to be added in list view
    //setting the adapter
    con.setAdapter(adapter); 
```

# html - 样式标签中的“#msg”和“#msg div”有什么区别？

> ID：14953864
> 
> 赞同：-2
> 
> 时间：2013-02-19T09:19:52.793
> 
> 标签：html, css

```
 <html>
 <head>
    <style>
        #msg {
            visibility: hidden;
            position: absolute;
            left: 0px;
            top: 0px;
            width:100%;
            height:100%;
            text-align:center;
        }

        #msg div {
            width:33.3%;
            margin: 100px auto;
            background-color:#0CF;
            border:#000;
            padding:thick;
            text-align:center;
            width:15%;
            size:50;
        }
    </style>
 </head>
 <body>
    <div id="msg"><div>hello</div><a href="#" onClick="display()">Close</a></div>
    <a href="#" onclick="display()">click me</a>
 </body>
    <script>
        function display(){
            temp=document.getElementById("msg");
            temp.style.visibility=(temp.style.visibility=="visible")?"hidden":"visible";
        }
    </script>
</html> 
```

这是我在互联网上找到的代码。我做了一些改变。谁能解释我为什么我们使用两个 div 标签？（一个在另一个里面）以及“#msg”和“#msg div”有什么区别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T09:22:23.240

`#msg`将样式直接应用于具有 ID 的元素`msg`，`#msg div`并将这些样式应用于`div`该元素内的`#msg`元素。

至于为什么要使用两个 div，一个在另一个里面……你必须询问代码的原作者。没有具体的理由这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T09:24:19.697

*   `#msg`将适用于带有 . 的任何元素（应该是一个）`id="msg"`。
*   `#msg div`将样式应用于`div`元素内部的任何`id="msg"`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T09:22:51.877

`#msg`用于具有 id 名称的 div`msg`

`#msg div`适用于 div 中存在的`#msg`div。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T09:22:59.083

`#msg`适用于 ID 为 msg 的 div 标签和 ID`#msg div`为 msg 的 div 标签中的 div 标签。

所以`#msg`你的情况将适用于这个html：

```
<div id="msg"><div>hello</div><a href="#" onClick="display()">Close</a></div> 
```

并且`#msg div`唯一的：

```
<div>hello</div> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-19T09:23:04.770

**#msg**表示它将在 id 的帮助下访问元素。因此添加到#msg 的样式将应用于

```
<div id="msg> 
```

#msg **div**将访问上面 Div 中的 Div 标签

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-19T09:24:20.430

`#msg`是 ID 为 msg 的 Item 的选择器。IE`<div id="msg">...</div>`在您的代码中。

`#msg div`引用`div`id 为 msg 的元素中的元素。`<div>hello</div>`这在您的代码中匹配。

您可能想查看 CSS 选择器的[教程](https://developer.mozilla.org/en-US/docs/CSS/Getting_Started/Selectors)（google it）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-19T09:27:12.267

```
#msg { ... } 
```

这是一个 ID 选择器，由`#`和 ID 文本表示。例如，它将针对与 ID 匹配的单个元素`<div id="msg">`

```
#msg div { ... } 
```

这是一个后代选择器。它将针对所有 div 的后代`#msg`。后代可以位于父级之下的任何级别，这与`>`仅针对直接子级的子级选择器 ( ) 不同。

来自[W3C 文档](http://www.w3.org/wiki/CSS/Selectors/combinators/descendant)：

> **后代组合子 AB**
> 形式为“A B”的选择器表示元素“B”，它是某个祖先元素“A”的任意后代。

```
can anyone explain me why we using two div tag ? 
```

嵌套 div 是可接受且常见的做法，但是在您的代码示例中，文本将更合适地包含在`<p></p>`标签中，而不是在 div 中包含原始内容。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-19T09:28:23.860

试着用一个例子来理解。

这是[小提琴](http://jsfiddle.net/gGKSf/1/)

HTML 代码：

```
<div id="msg">
  <div>
    stuff
  </div>
</div> 
```

CSS 代码：

```
#msg {
  width: 100px
  height: 50px
  background: red;
}

#msg div {
  width: 60px;
  height: 30px;
  background: yellow;
} 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2013-02-19T09:24:27.963

第一个样式“#msg”将应用于包含id为“msg”的div，第二个样式“#msg div”将应用于包含id为“msg”的div内的div，即它将应用于包含文本“hello”的 div。

# php - 如何使用 cURL 获取页面内容？

> ID：14953867
> 
> 赞同：43
> 
> 时间：2013-02-19T09:19:58.020
> 
> 标签：php, curl

我想用 curl抓取这个[谷歌搜索结果页面的内容。](https://www.google.com/search?hl=en&tbo=d&tbs=simg:CAESYxphCxCo1NgEGgQIBQgIDAsQsIynCBo4CjYIARIQ-QSMBeUEigSFBYwEiQWABRog8pwYCTxktmeGRsfQir52lJaebNtk-HopuZePSqpeh0gMCxCOrv4IGgoKCAgBEgSh_1cVaDA&q=flower%20&tbm=isch&sa=X&ei=7TsjUZnWNu3smAWDqIHQAg&ved=0CDsQsw4)我一直在尝试设置不同的用户代理，并设置其他选项，但我似乎无法获取该页面的内容，因为我经常被重定向或出现“页面移动”错误。

我相信这与查询字符串在某处被编码的事实有关，但我真的不确定如何解决这个问题。

```
 //$url is the same as the link above
    $ch = curl_init();
    $user_agent='Mozilla/5.0 (Windows NT 6.1; rv:8.0) Gecko/20100101 Firefox/8.0'
    curl_setopt ($ch, CURLOPT_URL, $url);
    curl_setopt ($ch, CURLOPT_USERAGENT, $user_agent);
    curl_setopt ($ch, CURLOPT_HEADER, 0);
    curl_setopt ($ch, CURLOPT_FOLLOWLOCATION, 1);
    curl_setopt ($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt ($ch,CURLOPT_CONNECTTIMEOUT,120);
    curl_setopt ($ch,CURLOPT_TIMEOUT,120);
    curl_setopt ($ch,CURLOPT_MAXREDIRS,10);
    curl_setopt ($ch,CURLOPT_COOKIEFILE,"cookie.txt");
    curl_setopt ($ch,CURLOPT_COOKIEJAR,"cookie.txt");
    echo curl_exec ($ch); 
```

我需要做什么才能让我的 php 代码显示页面的确切内容，就像我在浏览器上看到的那样？我错过了什么？谁能指出我正确的方向？

我在 SO 上看到过类似的问题，但没有一个可以帮助我的答案。

编辑：

我尝试使用 Selenium WebDriver 打开链接，它提供与 cURL 相同的结果。我仍然认为这与查询字符串中存在特殊字符的事实有关，这些字符在过程中的某个地方被弄乱了。

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2013-02-19T09:22:18.870

这是如何：

```
 /**
     * Get a web file (HTML, XHTML, XML, image, etc.) from a URL.  Return an
     * array containing the HTTP server response header fields and content.
     */
    function get_web_page( $url )
    {
        $user_agent='Mozilla/5.0 (Windows NT 6.1; rv:8.0) Gecko/20100101 Firefox/8.0';

        $options = array(

            CURLOPT_CUSTOMREQUEST  =>"GET",        //set request type post or get
            CURLOPT_POST           =>false,        //set to GET
            CURLOPT_USERAGENT      => $user_agent, //set user agent
            CURLOPT_COOKIEFILE     =>"cookie.txt", //set cookie file
            CURLOPT_COOKIEJAR      =>"cookie.txt", //set cookie jar
            CURLOPT_RETURNTRANSFER => true,     // return web page
            CURLOPT_HEADER         => false,    // don't return headers
            CURLOPT_FOLLOWLOCATION => true,     // follow redirects
            CURLOPT_ENCODING       => "",       // handle all encodings
            CURLOPT_AUTOREFERER    => true,     // set referer on redirect
            CURLOPT_CONNECTTIMEOUT => 120,      // timeout on connect
            CURLOPT_TIMEOUT        => 120,      // timeout on response
            CURLOPT_MAXREDIRS      => 10,       // stop after 10 redirects
        );

        $ch      = curl_init( $url );
        curl_setopt_array( $ch, $options );
        $content = curl_exec( $ch );
        $err     = curl_errno( $ch );
        $errmsg  = curl_error( $ch );
        $header  = curl_getinfo( $ch );
        curl_close( $ch );

        $header['errno']   = $err;
        $header['errmsg']  = $errmsg;
        $header['content'] = $content;
        return $header;
    } 
```

**例子**

```
//Read a web page and check for errors:

$result = get_web_page( $url );

if ( $result['errno'] != 0 )
    ... error: bad url, timeout, redirect loop ...

if ( $result['http_code'] != 200 )
    ... error: no page, no permissions, no service ...

$page = $result['content']; 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-05-29T18:41:12.167

对于模拟大多数人类行为的现实方法，您可能需要在 curl 选项中添加引用者。您可能还想将 follow_location 添加到您的 curl 选项中。相信我，无论谁说无法获取 Google 搜索结果，都是个十足的傻瓜，应该把他/她的电脑靠在墙上，希望再也不会回到 internetz。您可以使用自己的浏览器执行“IRL”的所有操作都可以使用 Python 中的 PHP cURL 或 libCURL 进行模拟。你只需要做更多的cURLS来获得buff。然后你就会明白我的意思了。:)

```
 $url = "http://www.google.com/search?q=".$strSearch."&hl=en&start=0&sa=N";
  $ch = curl_init();
  curl_setopt($ch, CURLOPT_REFERER, 'http://www.example.com/1');
  curl_setopt($ch, CURLOPT_HEADER, 0);
  curl_setopt($ch, CURLOPT_VERBOSE, 0);
  curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
  curl_setopt($ch, CURLOPT_USERAGENT, "Mozilla/4.0 (compatible;)");
  curl_setopt($ch, CURLOPT_URL, urlencode($url));
  $response = curl_exec($ch);
  curl_close($ch); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-19T11:23:16.033

**尝试这个：**

```
$url = "http://www.google.com/search?q=".$strSearch."&hl=en&start=0&sa=N";
  $ch = curl_init();
  curl_setopt($ch, CURLOPT_HEADER, 0);
  curl_setopt($ch, CURLOPT_VERBOSE, 0);
  curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
  curl_setopt($ch, CURLOPT_USERAGENT, "Mozilla/4.0 (compatible;)");
  curl_setopt($ch, CURLOPT_URL, urlencode($url));
  $response = curl_exec($ch);
  curl_close($ch); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-08-28T23:21:41.773

我想你有没有注意到你的链接实际上是一个 HTTPS 链接......似乎 CURL 参数不包括任何类型的 SSH 处理......也许这可能是你的问题。为什么不尝试使用非 HTTPS 链接看看会发生什么（即 Google 自定义搜索引擎）...？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-01-09T10:03:21.987

使用 Curl php 获取内容

请求服务器支持 Curl 功能，在 Apache 文件夹中的 httpd.conf 中启用

```
 function UrlOpener($url)
     global $output;
     $ch = curl_init(); 
     curl_setopt($ch, CURLOPT_URL, $url); 
     curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); 
     $output = curl_exec($ch); 
     curl_close($ch);    
     echo $output; 
```

如果通过 google 缓存使用 Curl 获取内容，您可以使用此 url：[http](http://webcache.googleusercontent.com/search?q=cache:Put) ://webcache.googleusercontent.com/search?q=cache:Put your url Sample：[http ://urlopener.mixaz.net/](http://urlopener.mixaz.net/)

# c - 如何将自定义参数传递给 linux 定时器的函数？

> ID：14953871
> 
> 赞同：3
> 
> 时间：2013-02-19T09:20:17.210
> 
> 标签：c, pointers, linux-kernel

在某些情况下，我想安排一个`struct timer_list`处理自定义数据的计时器 ()。该`function`结构的字段保存将要触发的实际功能，定义如下：

```
void (*function)(unsigned long); 
```

问题是我想传递一个指针而不是`unsigned long`. 我知道根据架构，int-ptr 转换可能安全也可能不安全，但我找不到所有架构是否都将`long`整数与指针对齐，所以这是我的问题（实际上是二合一）：

执行 a `long`to `void*`cast 是否安全？如果不是，我应该如何处理`unsigned long`参数以在计时器函数中获取我想要的数据指针？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2018-05-02T19:46:33.063

Linux 内核 4.15完全[删除了数据字段](https://lwn.net/Articles/735887/)，使得这里的答案已经过时。根据我的推断，将参数传递给计时器回调的首选方法是将它们与计时器一起包含在一个结构中，并使用`from_timer`宏来检索它们，其定义为

```
#define from_timer(var, callback_timer, timer_fieldname) \
    container_of(callback_timer, typeof(*var), timer_fieldname) 
```

所以为了传递参数，定义一个额外的结构为

```
struct timer_data {
    struct timer_list timer;
    datatype data;
}; 
```

并将其传递给设置函数

```
struct timer_data *tmd = init_timer_data(); //your logic for init
timer_setup(&tmd->timer, callback, flags); 
```

稍后，使用`from_timer`检索参数。默认情况下，指向 timer_list 的指针被传递给回调函数，而不是`unsigned long data`4.15 之前的版本。

```
void callback(struct timer_list *t) {
    struct timer_data *tmd = from_timer(tmd, t, timer);
    datatype data = tmd -> data;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-19T15:15:28.820

在计时器函数和其他一些情况下，**可以**将指向数据结构的指针转换为`unsigned long`，将其存储在`data`字段中`struct timer_list`并将计时器函数的参数转换回指向数据结构的指针。这似乎是一种常见的做法。

[Linux 驱动程序开发，第 3 期。编。](http://lwn.net/Kernel/LDD3/)在第 7 章中就该事项陈述如下：

> 如果您需要在参数中传递多个项目，您可以将它们捆绑为一个数据结构并将指针转换为 unsigned long，这是所有支持的架构上的安全做法，并且在内存管理中非常常见（如第 15 章所述）。

内核中有很多这样的例子，例如，参见ext4 文件系统模块中的[`s_err_report`计时器](http://lxr.free-electrons.com/source/fs/ext4/super.c?v=3.7#L3754)。一个指向的指针`struct super_block`被传递给定时器函数，`unsigned long`如上面描述的那样。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-19T09:23:34.330

您可以使用传递的数字作为包含自定义数据结构的数组的索引。

# php - 开发同一产品的不同版本的方法

> ID：14953873
> 
> 赞同：0
> 
> 时间：2013-02-19T09:20:23.313
> 
> 标签：php, git, project-management, versioning

我有一个基本版本的产品，我的一些客户需要一些插件结构无法处理的修改，因为它不是附加功能 - 而是一些核心功能的大量修改版本。问题是我们可以处理为两个或三个客户应用错误修复，但现在很难处理并记住在各种项目中应用相同的代码更改。

问题是：是否有解释如何处理此类问题的方法，以及 GIT 或其他 SCM 之类的软件如何帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T09:26:36.643

> 很难处理和记住在各种项目中应用相同的代码更改。

`git`在你的情况下是完美的。您可以`branch`针对每个客户端并在分支中进行核心修改。在将错误修复应用到每个分支时，您可以为每个分支`cherry-pick`（一个很酷的`git`功能）或`rebase`（另一个很酷`git`的功能）。

# google-chrome-devtools - Google Chrome 制作的 HAR（Http Archive）中未显示分段文件上传的文件内容

> ID：14953878
> 
> 赞同：3
> 
> 时间：2013-02-19T09:20:44.970
> 
> 标签：google-chrome-devtools, multipart

我正在将 CSV 文件上传到服务器，在调试它时，我想利用 google chrome 开发人员工具生成的 HAR 文件。

我感兴趣的请求的 postData 没有显示上传文件的内容。我明白了：

> "postData": { "mimeType": "multipart/form-data; boundary=----WebKitFormBoundaryS0nORM7anPTbfGxB", "text": "------WebKitFormBoundaryS0nORM7anPTbfGxB\r\nContent-Disposition: form-data; name= \"instrumentType\"\r\n\r\nFuture\r\n------WebKitFormBoundaryS0nORM7anPTbfGxB\r\nContent-Disposition: form-data; name=\"csv\"; filename=\"Book5.csv \"\r\nContent-Type: text/csv\r\n\r\n\r\n------WebKitFormBoundaryS0nORM7anPTbfGxB--\r\n" }

为什么我看不到文件的内容？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T09:34:50.497

多读一点，我看到 HAR 旨在用于表示性能数据。它不一定代表整个请求。[（ https://dvcs.w3.org/hg/webperf/raw-file/tip/specs/HAR/Overview.html](https://dvcs.w3.org/hg/webperf/raw-file/tip/specs/HAR/Overview.html)）规范中的相关部分是

```
"postData": {
    "mimeType": "multipart/form-data",
    "params": [],
    "text" : "plain posted data",
    "comment": ""
} 
```

规范中没有承诺文本将包含整个请求实体，所以我猜如果 HAR 只对性能数据感兴趣，那么它足以删除文件上传内容。

# iphone - facebook集成中的登录问题

> ID：14953886
> 
> 赞同：0
> 
> 时间：2013-02-19T09:21:16.067
> 
> 标签：iphone, objective-c, facebook, ios6

我已成功将 facebook 集成到 ios 6 中，但我注意到该应用程序的一个奇怪行为。每当我尝试使用 facebook 登录时，一切正常，但是当任何其他具有他/她凭据的用户尝试登录时，就会出现错误。我不知道它的解决方案是什么。

我正在使用 facebook sdk 示例代码作为参考。对于登录，我只是设置登录的视图框架。FBLoginView 的协议实现如下：

```
- (void)loginViewShowingLoggedInUser:(FBLoginView *)loginView
{
BOOL canShareAnyhow = [FBNativeDialogs canPresentShareDialogWithSession:nil];
// first get the buttons set for login mode
self.postStatusBtn.enabled = YES;
self.shareWithFriendsBtn.enabled = YES;
self.viewFriends.enabled = YES;

}

- (void)loginViewFetchedUserInfo:(FBLoginView *)loginView
                        user:(id<FBGraphUser>)user
{
// here we use helper properties of FBGraphUser to dot-through to first_name and
// id properties of the json response from the server; alternatively we could use
// NSDictionary methods such as objectForKey to get values from the my json object

// setting the profileID property of the FBProfilePictureView instance
// causes the control to fetch and display the profile picture for the user

self.profilePic.profileID = user.id;
self.loggedInUser = user;
NSLog(@"%@",user);

}

- (void)loginViewShowingLoggedOutUser:(FBLoginView *)loginView
{
BOOL canShareAnyhow = [FBNativeDialogs canPresentShareDialogWithSession:nil];

self.postStatusBtn.enabled = NO;
self.shareWithFriendsBtn.enabled = NO;
self.viewFriends.enabled = NO;
if (!self.viewFriends.enabled)
{
    self.viewFriends.titleLabel.textColor = [UIColor grayColor];
}

if(!self.shareWithFriendsBtn.enabled)
{
    self.shareWithFriendsBtn.titleLabel.textColor = [UIColor grayColor];
}

if (!self.postStatusBtn.enabled)
{
    self.postStatusBtn.titleLabel.textColor = [UIColor grayColor];
}

self.profilePic.profileID = nil;

self.loggedInUser = nil;
} 
```

提前谢谢...！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T05:00:21.523

我认为这将解决您的问题：

1.  在您的 Facebook 帐户中访问您的 Facebook 应用程序。
2.  单击编辑您的应用程序。
3.  转到基本信息选项卡。
4.  **沙盒模式：** **选中此项为禁用**
5.  保存设置。

这对你有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T13:33:08.727

当用户注销并且其他人登录时，您是否尝试过清除令牌？在一行之后，您需要在您要注销用户或用户正在按下注销按钮的位置放置：

```
[FBSession.activeSession closeAndClearTokenInformation]; 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T09:38:45.467

使用此代码

```
-(IBAction) loginFrmFbBtnPressed:(id)sender
{
    if (FBSession.activeSession.isOpen)
    {
        [self getData];
    } else
    {
        [FBSession openActiveSessionWithReadPermissions:nil allowLoginUI:YES completionHandler:^(FBSession *session,
                                                                                                 FBSessionState status, NSError *error)
         {
             if (error)
             {
                 UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error" message:error.localizedDescription delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
                 [alert show];
             }
             else if (FB_ISSESSIONOPENWITHSTATE(status))
             {
                 [self getData];
             }
         }];
    }
}

-(void)getData
{
    if ([FBSession.activeSession.permissions indexOfObject:@"read_stream"] == NSNotFound)
    {
        NSArray *permissions = [[NSArray alloc] initWithObjects:
                                @"read_stream" , nil];
        [FBSession.activeSession reauthorizeWithReadPermissions:permissions completionHandler:^(FBSession *session, NSError *error) {
            if (!error) {
                [self request];
            }
        }];
    }
    else
    {
        [self request];
    }
}

-(void)request
{
    [FBRequestConnection startWithGraphPath:@"me" parameters:[NSDictionary dictionaryWithObject:@"picture,id,birthday,email,name,gender,username" forKey:@"fields"] HTTPMethod:@"GET" completionHandler:^(FBRequestConnection *connection, id result, NSError *error)
     {
         [self meRequestResult:result WithError:error];
     }];
}

- (void)meRequestResult:(id)result WithError:(NSError *)error
{
    if ([result isKindOfClass:[NSDictionary class]])
    {
        NSDictionary *dictionary;
        if([result objectForKey:@"data"])
            dictionary = (NSDictionary *)[(NSArray *)[result objectForKey:@"data"] objectAtIndex:0];
        else
            dictionary = (NSDictionary *)result;
        NSLog(@"dictionary : %@",dictionary);

    }
} 
```

# matlab - 在 Matlab 中求解 ODE 时是否可以使用匿名函数作为事件函数

> ID：14953888
> 
> 赞同：5
> 
> 时间：2013-02-19T09:21:21.150
> 
> 标签：matlab, events, anonymous-function, ode

是否可以在 Matlab 中使用匿名函数作为事件函数。我想做的基本上是

```
opt = odeset('Events', @(t,y) (deal(y(end)-t^2,1,0)));
[T,Y] = ode45(@odefun,[tstart tend],y0,opt); 
```

但是，这会返回一个错误，抱怨要处理的输出数量必须完全匹配。还有其他方法可以使匿名函数返回多个参数吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-03-06T11:30:49.973

我注意到这篇文章正在寻找相同问题的答案。这意味着对于某些人来说，这个问题可能仍然有效。由于最终我自己找到了解决方案，所以我想给出一个“过时”的答案。

实际上，是的——这是可能的，但并不简单。试试这个：

evnt_fun = @(t, f)subsref({'一些停止条件', 1, 0}, struct('type', '{}', 'subs', {{':'}}));

我无法完全检查代码的向后兼容性。但是，它适用于 R2011 和更高版本的 MATLAB。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T10:33:38.647

不，你不能这样做。Matlab 中的匿名函数只返回一个值。

相反，您可以定义一个薄包装器`deal`并将您的包装器作为句柄传递：

```
function [a b c] = wrapper(t,y)
    [a b c] = deal('some stop condition', 1, 0);
end

opt = odeset('Events', @wrapper);

[T, Y] = ode45(@odefun, [tstart tend], y0, opt); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-01T23:26:42.267

另外（这在游戏中添加到这个已经很晚了，但这让我感到沮丧）。这是一个带有嵌套函数的解决方案：

```
function [ dealfunchandle ] = dealwithit( arrayfunc )
% Takes as input an event function of (t,z) that returns a 3 array (in same order as event syntax).

    function [a, b, c] = dealfunc(t,z)
       output = arrayfunc(t,z);
       a = output(:,1);
       b = output(:,2);
       c = output(:,3);
    end

dealfunchandle = @dealfunc;
end 
```

这个函数只需要编写一次（如果你必须使用很多不同的事件函数就很方便）。这可用于在代码中生成匿名事件函数，如下所示：

```
arrayfunc = @(t,y) [y(1), 0, 1];
events = dealwithit(arrayfunc);

opts = odeset('Events', events); 
```

然后 ode45 正常。

# magento - 在magento的自定义模块中调用编辑表单上的特定选项卡

> ID：14953896
> 
> 赞同：0
> 
> 时间：2013-02-19T09:21:43.827
> 
> 标签：magento, magento-1.7

我在 magento 中创建了一个自定义模块。当我单击网格时，它会移动到编辑表单，我可以在其中看到三个选项卡，例如 tab1、tab2、tab3。默认情况下选择 tab1。现在我想在网格上添加一个链接，当客户单击该链接浏览器将用户重定向到 tab3。我该怎么做。我的标签代码如下：

```
protected function _beforeToHtml()
  {
      $this->addTab('form_section', array(
          'label'     => Mage::helper('mymodule')->__('Information'),
          'title'     => Mage::helper('mymodule')->__('Information'),
          'content'   => $this->getLayout()->createBlock('mymodule/adminhtml_mymodule_edit_tab_form')->toHtml(),
      ));

     $this->addTab('form_section1', array(
          'label'     => Mage::helper('mymodule')->__(' Management'),
          'title'     => Mage::helper('mymodule')->__('Management'),
          'content'   => $this->getLayout()->createBlock('mymodule/adminhtml_mymodule_edit_tab_managment')->toHtml(),
      ));
          $this->addTab('form_section2', array(
          'label'     => Mage::helper('mymodule')->__('Results'),
          'title'     => Mage::helper('mymodule')->__('Results'),
          'content'   => $this->getLayout()->createBlock('mymodule/adminhtml_mymodule_edit_tab_result')->toHtml(),
      ));

      return parent::_beforeToHtml();
  } 
```

我的链接代码类似于网格列表页面上的链接代码。`<a class="viewit" href="http://localhost/project/index.php/mymodule/adminhtml_mymodule/view/id/4/key/83063e416ef7f9cfb7825d01e4519293/">View</a>`.我的控制器功能为：

```
 public function viewAction()
    {
     $this->loadLayout();
       $block = $this->getLayout()->createBlock('mymodule/adminhtml_mymodule_edit_tab_result');
      //  $this->_addContent($this->getLayout()->createBlock('mymodule/adminhtml_mymodule_edit_tab_result'))
            //->_addLeft($this->getLayout()->createBlock('mymodule/adminhtml_mymodule_edit_tabs'));
       $this->getLayout()->getBlock('content')->append($block);  
       $this->renderLayout();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T09:28:32.370

[Mage_Adminhtml_Block_Widget_Tabs::addTab](https://github.com/varinen/solvingmagento_1.7.0/blob/master/app/code/core/Mage/Adminhtml/Block/Widget/Tabs.php#L141)的代码表明选项卡具有 property `active`。尝试将其添加到您的`addTab`通话中：

```
$this->addTab('form_section2', array(
          'label'     => Mage::helper('mymodule')->__('Results'),
          'title'     => Mage::helper('mymodule')->__('Results'),
          'content'   => $this->getLayout()->createBlock('mymodule/adminhtml_mymodule_edit_tab_result')->toHtml(),
          'active'    => true
      )); 
```

或者，您可以扩展 Grid 的行 URL，并将参数`activeTab`设置为“form_section2”（活动选项卡的名称），并将以下代码添加到块类的`_beforeToHtml`函数中：`Tabs`

```
 $param = Mage::app()->getRequest()->get('activeTab');
        if (array_key_exists($param, $this->_tabs)) {
            $this->_tabs[$param]->setActive();
        } 
```

# c - *( (int *)ptr+1) 的含义

> ID：14953897
> 
> 赞同：2
> 
> 时间：2013-02-19T09:21:48.070
> 
> 标签：c, pointers, casting, type-conversion

假设 ptr 是一些指针，那么：

```
*((int *)ptr+1) 
```

意味着什么：

首先将 ptr 类型转换为 int * 然后递增 1，然后取消引用。

或者

首先将 ptr 加一，然后进行类型转换，然后取消引用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T09:24:41.657

`ptr`是指向任何东西的指针。`(int *) ptr`是指向 int 的指针，它指向与 相同的位置`ptr`，但假定指针对象是`int`。`(int *)ptr + 1`在内存中进一步指向一个单元格（又名一个 int）。`*((int *)ptr+1)`那是int。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-19T09:26:59.023

演员表具有比加法更高的优先级，请参见[此处](http://www.isthe.com/chongo/tech/comp/c/c-precedence.html)。因此，首先转换为整数指针，然后添加`1*sizeof(int)`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-19T09:23:32.993

`ptr[1]`如果 ptr`int *`当然是一个指针，这似乎是 的简短版本。

所以

> 首先将 ptr 类型转换为 int * 然后递增 1，然后取消引用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-19T09:23:36.793

第一个命题：将 ptr 转换为 int*，然后加一，最后得到这个地址的 int。

这是一种处理结构化数据的方法，例如，当您在输入中只有一个 char 流时。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-19T09:54:55.220

```
*((int *)ptr+1) 
```

**这意味着：**

*   通过(sizeof(ptr)) 增加指向内存中下一个位置的指针
*   然后将指针转换为整数指针。
*   然后获取第一个 sizeof(int) 字节！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-19T09:55:58.623

这段代码几乎显示了你在做什么：

```
#include<stdio.h>

int main( ) {

    int onetwo[] = { 1, 2};
    /*create a void pointer to one two*/
    void* ptr = (void*) onetwo;

    printf ( "pointer onetwo[0] = %p\n", &onetwo[0]  );
    printf ( "pointer onetwo[1] = %p\n", &onetwo[1]  );

    /* since you are doing pointer arithmetics
     * it's really important you cast ptr back to
     * int* otherwise the compiler might not
     * return a pointer to onetwo[1] but if sizeof(int)
     * is 4 bytes
     */
    printf ( "value = %d\n", *( (int*)ptr + 1) );

    /* in this print statement ptr is still a void* when
     * it is incremented, therefore it points between 
     * onetwo[0] and onetwo[1]
     */

    printf ( "value = %d\n", * ((int*)( ptr + 1)) );

    /*casting to int* is for illustration properties */
    printf ( "This points between onetwo[0] and onetwo[1] because it's at %p\n", (int*) (ptr + 1));

    return 0;

} 
```

我机器上的输出产量：

```
~/programming/stackoverflow$ ./p
pointer onetwo[0] = 0x7fffdd8e2fc0
pointer onetwo[1] = 0x7fffdd8e2fc4
value = 2
value = 33554432
This points between onetwo[0] and onetwo[1] because it's at 0x7fffdd8e2fc1 
```

我希望这能证明指针算术的一些效果。

# codeigniter - Codeigniter 自动更改输入字段值

> ID：14953918
> 
> 赞同：0
> 
> 时间：2013-02-19T09:22:49.807
> 
> 标签：codeigniter, input

当我将输入字段值设为 blackhat%%1985 并提交时，我将 post 值设为 blackhat%85，该值在 require_once BASEPATH.'core/CodeIgniter.php' 之后更改；

```
<form action="" method="post" id="submitForm">
<input type="hidden" name="a" value="blackhat%%1985" />
<input type="submit" name="b" />
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T11:41:45.123

为此使用 urlencode() 函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T12:19:43.050

您可以在提交表单之前使用 JavaScript 的 encodeURIComponent 对值进行编码。

`encodeURIComponent('blackhat%%1985');`

当然，之后不要忘记在服务器端对其进行解码。

# php - Google Analytics PHP API (GAPI) - 获取直接流量数据

> ID：14953919
> 
> 赞同：1
> 
> 时间：2013-02-19T09:22:51.063
> 
> 标签：php, google-analytics, google-analytics-api

我是谷歌分析的新手，仍在寻找解决方法。我正在尝试找到一种方法来检索仪表板上的直接流量下的数据（登录页面、访问次数、页面/访问次数、平均访问持续时间、新访问百分比、跳出率）（流量来源--> 来源-->直接的）。我已经尝试通过使用[他们的网站状态](http://code.google.com/p/gapi-google-analytics-php-interface/)`define('filter', 'source == direct');`来过滤它，但没有运气。我在[这里](https://stackoverflow.com/questions/8869513/google-analytics-php-api-gapi-getting-number-of-page-views/11243115)看到过类似的帖子，但我想加深搜索。我错过了什么吗？

我当前的代码只能从***所有流量中检索数据。***.

```
require_once('gapi.class.php');

define('email', 'email address');
define('password', 'password');
define('profileID', profileID);
define('dimensions', 'source');
define('metrics', 'visits');
define('sortMetric', '-visits');
define('filter', null);
define('startDate', '2013-01-18');
define('endDate', '2013-02-17');
define('startIndex', 1);
define('maxResult', 10);

$ga = new gapi(email, password);
$ga->requestReportData(profileID,dimensions,metrics,sortMetric,filter,startDate,endDate,startIndex,maxResult);

foreach($ga->getResults() as $result){
    echo '<strong>'.$result.'</strong><br />';
    echo 'Source: ' . $result->getSource() . ' ';
    echo 'Visits: ' . $result->getVisits() . '<br /><br />';
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T11:27:29.297

我找到了答案，只是想分享给你们，以防万一有人遇到同样的问题。

基本上我的错误是我没有`direct`用括号括起来`()`。我刚换了`define('filter', 'source == direct');`成`define('filter', 'source==(direct)');`和中提琴！我得到我想要的。

这是我的代码，以防万一你需要它，你可能会注意到我已经替换了维度和指标，因为我需要它们成为一个数组。

```
require_once('gapi.class.php');

define('email', 'email address');
define('password', 'password');
define('profileID', profileID);
$dimensions = array('landingPagePath');
$metrics = array('visits','pageviewsPerVisit','avgTimeOnSite','percentNewVisits','visitBounceRate');
define('sortMetric', '-visits');
define('filter', 'ga:source==(direct)');
define('startDate', '2013-01-18');
define('endDate', '2013-02-17');
define('startIndex', 1);
define('maxResult', 10);

$ga = new gapi(email, password);
$ga->requestReportData(profileID,$dimensions,$metrics,sortMetric,filter,startDate,endDate,startIndex,maxResult); 
```

# javascript - 简单的 JavaScript 继承插件错误

> ID：14953922
> 
> 赞同：0
> 
> 时间：2013-02-19T09:22:56.953
> 
> 标签：javascript, oop, inheritance, plugins, strict

我阅读了 John Resig 的博客文章，介绍了他基于 base2 和原型编写的简单 JavaScript 继承插件。

示例代码在这里：http: [//jsfiddle.net/rFfX9/](http://jsfiddle.net/rFfX9/)

```
//'use strict';

/* Simple JavaScript Inheritance
 * By John Resig http://ejohn.org/
 * MIT Licensed.
 */
// Inspired by base2 and Prototype
(function () {
  var initializing = false, fnTest = /xyz/.test(function () { xyz; }) ? /\b_super\b/ : /.*/;

  // The base Class implementation (does nothing)
  this.Class = function () { };

  // Create a new Class that inherits from this class
  Class.extend = function (prop) {
    var _super = this.prototype;

    // Instantiate a base class (but only create the instance,
    // don't run the init constructor)
    initializing = true;
    var prototype = new this();
    initializing = false;

    // Copy the properties over onto the new prototype
    for (var name in prop) {
      // Check if we're overwriting an existing function
      prototype[name] = typeof prop[name] == "function" &&
        typeof _super[name] == "function" && fnTest.test(prop[name]) ?
        (function (name, fn) {
          return function () {
            var tmp = this._super;

            // Add a new ._super() method that is the same method
            // but on the super-class
            this._super = _super[name];

            // The method only need to be bound temporarily, so we
            // remove it when we're done executing
            var ret = fn.apply(this, arguments);
            this._super = tmp;

            return ret;
          };
        })(name, prop[name]) :
        prop[name];
    }

    // The dummy class constructor
    function Class() {
      // All construction is actually done in the init method
      if (!initializing && this.init)
        this.init.apply(this, arguments);
    }

    // Populate our constructed prototype object
    Class.prototype = prototype;

    // Enforce the constructor to be what we expect
    Class.prototype.constructor = Class;

    // And make this class extendable
    Class.extend = arguments.callee;

    return Class;
  };
})(); 
```

这行得通。但是，当我`'use strict';`在顶部取消注释时，它会引发异常，但无法找出解决方案。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T09:25:52.403

在这种情况下，当您调用匿名函数时，`this`您`undefined`不会将该函数作为对象的方法调用。在非严格模式下`this`将成为`window`对象。

另请参阅：[为什么在使用严格时未定义匿名函数中的“this”？](https://stackoverflow.com/questions/9822561/why-is-this-in-an-anonymous-function-undefined-when-using-strict)

# php - Explode 没有正确分隔字符串

> ID：14953926
> 
> 赞同：3
> 
> 时间：2013-02-19T09:23:04.377
> 
> 标签：php, explode

我通过使用 cURL 得到以下字符串。代码可以在[此评论](https://stackoverflow.com/questions/14952156/response-is-null-in-php-while-net-is-giving-all-text#comment20988272_14952156)中找到。

```
HTTP/1.1 200 OK ID=347 Date: Tue, 19 Feb 2013 09:15:25 GMT Server:
Apache/2.2.22 (Ubuntu) Content-length: 0 Vary: Accept-Encoding
Content-Type: text/plain; charset=ISO-8859-1 
```

现在我想要字符串中的 ID，为此我使用了 explode 从空间中创建一个数组，如下所示：

```
$getIdElem = explode(' ',$output);
echo '<pre>';print_r($getIdElem); 
```

但我得到**Date:** with ID 字符串，而它前面有空格。打印数组的输出是：

```
Array
(
    [0] => HTTP/1.1
    [1] => 200
    [2] => OK
    [3] => ID=347
Date:
    [4] => Tue,
    [5] => 19
    [6] => Feb
    [7] => 2013
    [8] => 09:15:25
    [9] => GMT
Server:
    [10] => Apache/2.2.22
    [11] => (Ubuntu)
Content-length:
    [12] => 0
Vary:
    [13] => Accept-Encoding
Content-Type:
    [14] => text/plain;
    [15] => charset=ISO-8859-1

) 
```

我不明白为什么它在爆炸功能中不包含该空间。任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T09:29:48.320

改用正则表达式：

```
if (preg_match('# ID=(\d+) #', $response, $match)) { 
   $id = $match[1];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T09:30:49.683

这是 Date 之前的新行，而不是空格。你最好尝试一个正则表达式来提取你想要的位。

# mysql - 来自两个数据库的mysql总和

> ID：14953929
> 
> 赞同：0
> 
> 时间：2013-02-19T09:23:17.983
> 
> 标签：mysql, sum

```
SELECT  db1.table.listener, 
        db2.table.listener, 
        SEC_TO_TIME( SUM( TIME_TO_SEC( db2.table.time ) ) + ( TIME_TO_SEC( db1.table.time ) ) ), 
        count( db2.table.listener )
FROM    table
   INNER JOIN db2.table 
        ON db1.table.listener = db2.table.listener
WHERE db2.table.ldate = '19.02.2013'
   AND db1.table.ldate = '19.02.2013'
GROUP BY db2.table.listener, db1.table.listener 
```

我在两个不同的数据库中有两个表，它们具有相同的列（侦听器、时间、日期）。我需要总结时间并按听众分组。此查询提供多条记录，我只需要“听众、总时间、收听次数”。我怎样才能用一个查询来做到这一点？

期望的结果；

```
| listeners (from both table, full join) | count of values (from both table) | sum of time (from both table) | 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T09:42:42.630

请参阅以下内容：

```
SELECT  db1.table.listener, 
        SEC_TO_TIME( SUM( TIME_TO_SEC( db2.table.time ) ) + 
           ( TIME_TO_SEC( db1.table.time ) ) ), 
        count( db1.table.listener )
FROM    table
   INNER JOIN db2.table 
        ON db1.table.listener = db2.table.listener

WHERE db1.table.ldate = '19.02.2013'

GROUP BY db1.table.listener 
```

# java - 如何在 PHP 中执行 java 函数/脚本

> ID：14953932
> 
> 赞同：0
> 
> 时间：2013-02-19T09:23:24.987
> 
> 标签：java, php, apache, tomcat, bridge

我有一个使用 PHP(Joomla) 实现的系统。现在客户想要集成一个 SMS 网关。不幸的是 SMS 网关不支持 PHP。它是用 Java 编写的，所有的例子都是用 JAVA 编写的。

我应该包含`webservices‐rt.jar`在我的程序中并运行如下示例脚本。

```
lk.mobitel.esms.User user = new lk.mobitel.esms.User (); user.setUsername(“TestUser”);
user.setPassword(“Password”);
lk.mobitel.esms.test.ServiceTest st = new lk.mobitel.esms.test.ServiceTest (); 
System.out.println(st.testService(u)); 
```

据我所知，我可以`.jar`使用 PHP 运行如下

```
<?php exec("java -jar filename.jar arguments",$output); ?> 
```

如何在 PHP 中运行像上面这样的 JAVA 脚本？可能吗？有没有办法连接 PHP 和 JAVA？我想要的是在 PHP 中运行 JAVA，否则我会说这两者之间的通信。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T10:29:31.497

**有没有办法连接 PHP 和 JAVA？我想要的是在 PHP 中运行 JAVA，否则我会说这两者之间的通信。**

简单的回答：

使用数据交换层进行桥接。:)

提示（用超级简单的语言）：我最喜欢的 web 服务使用 PERL 来处理他们的脚本，我使用 XML 获取它们。Groupon 是在 RoR 上制作的，但由于他们的 API 输出 JSON，我很高兴收到推文。

简单的？:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T11:18:26.940

我从来没有这样做过，但是 PHP Manual 提供了 PHP-Java Bridge for PHP5 as [PHP/Java Bridge](http://php-java-bridge.sourceforge.net/pjb/)的链接。如果它是你正在寻找的？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T09:47:06.057

不可能将 PHP 和 Java 组合在同一个脚本中并在一次运行中执行它们。

如果您从 PHP 接近，您`exec`的方法就是要走的路。但是你应该使用[passthru](http://www.php.net/manual/de/function.passthru.php)因为 exec 不返回任何东西。使用 passthru，您可以获得 java 命令的 shell 响应并采取相应措施。

# java - 在 Java 中对对象数组进行排序

> ID：14953934
> 
> 赞同：2
> 
> 时间：2013-02-19T09:23:26.670
> 
> 标签：java, sorting

我正在开发一个报告模块，该模块显示花费的时间和任务数量。这些值在 Java Bean 中设置，bean 对象存储在一个数组中。我使用单独的查询来获取时间和任务数。现在我必须根据时间和任务数对数组进行排序。下面的代码只比较字符串：

```
if (!list.isEmpty()) {
    Collections.sort(list, new Comparator<Project>() {
        @Override
        public int compare(Project p1, Project p2) {

            return p1.getName().compare(p2.getName());
        }
       });
   } 
```

我在对存储在数组中的 JavaBean 中的属性的整数值进行排序时遇到问题。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-19T09:53:48.603

在您下面的问题的评论中，您说您有：

```
Project[] array = new Project[3]; 
```

如果我是你，我会宣布`Project`为

```
public class Project implements Comparable<Project> {

    @Override
    public int compareTo(Project other) {
        return this.id - other.id; // or whatever property you want to sort
    } 
```

然后你可以通过简单地调用来对你的数组进行排序

```
Arrays.sort(array); 
```

如果您不希望您的类实现`Comparable`接口，您可以将比较器传递给`Arrays.sort()`：

```
 Arrays.sort(array, new Comparator<Project>() {
        @Override
        public int compare(Project o1, Project o2) {
            return o1.id - o2.id; // or whatever property you want to sort
        }
    }); 
```

我使用了一个匿名的，如果需要其他地方，你也可以将它提取到它自己的类中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T09:26:57.640

怎么样：

```
Project[] project = ..initialise array;

List<Project> projectList = Arrays.asList(project);
Collections.sort(projectList, new Comparator<Project>() {
    @Override
    public int compare(Project p1, Project p2) {
        if(p1.getIntProperty() == p2.getIntProperty()) return 0;
        return p1.getIntProperty() > p2.getIntProperty() ? 1 : -1;
    }
   });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T09:28:10.610

试试这个对整数进行排序

```
return(p1.getIntProperty() - p2.getIntProperty()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T09:35:04.953

您是否查看过 Java 中的 Comparator 和 Comparable 接口。您可以使用 compare() 方法来比较数组中的元素并相应地对它们进行排序。你检查这个帖子，其中已经回答了同样的问题[Sort Java Collection](https://stackoverflow.com/questions/6957631/sort-java-collection)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-26T11:48:41.747

您可以将比较器传递给`Arrays.sort()`：

```
Arrays.sort(array, new Comparator<Project>() {
    @Override
    public int compare(Project o1, Project o2) {
        return o1.id - o2.id; // or whatever property you want to sort
    }
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-06-14T07:55:49.147

假设你有一个`List<Project>`，你在 Java8 中所需要的（因为你可以为 Comparator 使用[lambda 表达式](https://docs.oracle.com/javase/tutorial/java/javaOO/lambdaexpressions.html)）是：

```
Collections.sort(list, (o1, o2) -> o1.getName().compareTo(o2.getName())); 
```

List 有一个 sort(Comparator) 方法，所以你可以进一步缩短它：

```
list.sort((o1, o2) -> o1.getName().compareTo(o2.getName())); 
```

使用方法引用，它变得更加清晰：

```
list.sort(Comparator.comparing(Project::getName)); 
```

# android - 在 android 内置查看器中查看图像

> ID：14953939
> 
> 赞同：0
> 
> 时间：2013-02-19T09:23:58.213
> 
> 标签：android, android-activity, android-imageview

当我执行以下代码时，我需要在 android 默认图像查看器中查看图像，它显示专辑列表而不是特定图像。请纠正我。

```
MediaScannerConnection.scanFile(this, new String[] {receiptPath}, new String[] {"image/*"}, new MediaScannerConnection.OnScanCompletedListener()
{

    @Override
    public void onScanCompleted(String path, Uri uri)
    {
        Intent intent = new Intent(Intent.ACTION_VIEW, uri);
        intent.setType("image/*");
        startActivity(intent);
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T08:59:37.507

我找到了我的问题的答案，请参阅下面的答案

```
@Override
        public void onScanCompleted(String path, Uri uri)
        {
            Intent intent = new Intent(Intent.ACTION_VIEW);
            intent.setDataAndType(uri, "image/*");
            startActivity(intent);
        } 
```

在分析了android Intent源代码后我的学习是，如果你在Intent构造函数中设置uri然后设置类型，数据uri会自动设置为null，所以我无法在图像查看器中访问特定的图像。

[参考来源](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.3_r1/android/content/Intent.java#Intent.setType%28java.lang.String%29)

# ios - 获取文件的 NSURLIsExcludedFromBackupKey 的属性

> ID：14953943
> 
> 赞同：0
> 
> 时间：2013-02-19T09:24:09.563
> 
> 标签：ios, objective-c

要将文件从备份中排除到 iCloud 和 iTunes，我使用了以下代码：

```
BOOL success = [URL setResourceValue: [NSNumber numberWithBool: YES]

                              forKey: NSURLIsExcludedFromBackupKey error: &error]; 
```

成功的值为YES，但我还是要检查文件的对应属性。我尝试使用下面的代码，但失败了：

```
NSLog(@"%@",[URL valueForKey:NSURLIsExcludedFromBackupKey]); 
```

实现我的目的的正确方法是什么？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T11:58:40.053

正如 Shashank 所建议的，如果您通过 设置资源值`setResourceValue`，则需要通过 访问它`getResourceValue`。`valueForKey`用于 KVC，与资源值无关。

为此，您需要传入要保存结果的对象。

```
NSNumber* backupKeyResult = nil;
NSError* error = nil;

BOOL result = [URL getResourceValue:&result forKey:NSURLIsExcludedFromBackupKey error:&error];

if (result && !error) {
   if (backupKeyResult) {
       BOOL backupKeySet = [backupKeyResult boolValue];
       // backupKeySet has the value you've set previously
   }
   else {
        // The requested resource value is not defined for the URL.
   }
}
else {
    if (error) {
        // An error occurred whilst trying this, check your NSError object to see what's up
    }
    else if (!result) {
        // The value was not successfully populated
    }
} 
```

# sql - 将自由文本日期值转换为日期数据类型导致转换日期中的未来年份

> ID：14953945
> 
> 赞同：1
> 
> 时间：2013-02-19T09:24:16.623
> 
> 标签：sql, sql-server-2008-r2

我面临将自由文本`DOB`（出生日期）值转换为有效日期数据类型的问题。我正在使用 SQL Server 2008 R2。

以下是示例。

`01/28/48`当通过 SQL 的转换函数转换自由文本日期值时，它显示`2048`为年份而不是`1948`未来年份，并且在此出生日期列中是不可能的。

谁能帮我摆脱这个问题？

以下是我附上的屏幕截图，供您快速参考。

![在此处输入图像描述](../Images/f46b298b162228a72636105f620f6620.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T09:31:45.627

取自[CAST 和 CONVERT 文档](http://technet.microsoft.com/en-us/library/ms187928.aspx)：

> 默认情况下，SQL Server 根据截止年份 2049 解释两位数年份。也就是说，两位数年份 49 被解释为 2049，两位数年份 50 被解释为 1950。许多客户端应用程序，例如那些基于自动化对象，使用截止年份 2030。SQL Server 提供了两位数的年份截止配置选项，可更改 SQL Server 使用的截止年份并允许对日期进行一致的处理。我们建议指定四位数的年份。

您可以通过执行以下操作重新配置：

```
EXEC sp_configure 'show advanced options', 1;
GO
RECONFIGURE ;
GO
EXEC sp_configure 'two digit year cutoff', 2030 ;
GO
RECONFIGURE;
GO 
```

有关详细信息，请参阅以下文档：

[**配置两位数年份截止服务器配置选项**](http://msdn.microsoft.com/en-gb/library/ms191004.aspx)

* * *

我个人**不会**重新配置服务器。要么确保您的数据有 4 位数年份，或者如果您*真的*需要它们是 2 位数，因为这些总是出生日期，如果日期在未来，请删除 100 年：

```
DECLARE @dob DATE
SET @dob = CONVERT(DATE, '01/28/48')
IF @dob > GETDATE()
BEGIN
   SET @dob = DATEADD(yy, -100, @dob)
END 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T09:32:09.920

这是 SQL Server 中的系统范围设置 - “两位数年份截止值”。

像这样检查它是什么：

```
sp_configure 'show advanced options', 1
reconfigure

sp_configure 'two digit year cutoff' 
```

就我而言，我得到的值是`2049`- 任何前一年的日期都被认为是`20xx`一年（例如`48`-> `2048`），之后一年的日期被解释为`19xx`（`70`-> `1970`）。

因此，您可以为您更改此设置，或者您需要编写一个自定义 T-SQL 函数来自己处理这种情况（始终将日期转换为`19xx`日期 - 无论系统截止日期如何）

[在这篇关于如何设置两位数年份截止日期的博客文章中](http://www.blackwasp.co.uk/SQLDateTimeCutOff.aspx)查看有关此主题的更多信息

# silverlight-4.0 - 在silverlight中访问根文件夹外的图像

> ID：14953949
> 
> 赞同：0
> 
> 时间：2013-02-19T09:24:23.550
> 
> 标签：silverlight-4.0

```
 Uri uri = new Uri("" + metric.Image, UriKind.Absolute);

        ImageSource imgSource = new BitmapImage(uri);

        ImageMetric.Source = imgSource; 
```

我有这个代码

在数据库中，我将图像保存在路径 /UploadedImages/greenarrow.png 下

UploadedImages 和我的解决方案文件夹放在 E 盘。

但不同的文件夹。

如何访问它？

请帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T06:34:31.610

我终于找到了答案

当您在 iis 中托管网站时，您可以在其中创建一个图像文件夹并保存数据库中的图像

以便您可以浏览链接并找到图像。

Uri uri = new Uri(" [http://www.abc.com](http://www.abc.com) "+fieldname.Image , UriKind.RelativeOrAbsolute); ImageSource imgSource = new BitmapImage(uri); ImageMetric.Source = imgSource;

# php - 为 filter_input_array 构建自定义 FILTER_VALIDATE_XY

> ID：14953952
> 
> 赞同：0
> 
> 时间：2013-02-19T09:24:35.420
> 
> 标签：php, validation, passwords

我找不到任何关于构建自定义验证函数以在 filter_input_array 中使用的信息。

是否有可能针对我自己的功能之一进行验证？

就像是

```
function FILTER_CUSTOM_FUNCTION($input) { // do something }    

$filter = array(

       'id' => FILTER_VALIDATE_INT,
       'action' => FILTER_SANITIZE_STRING,
       'custom_var' => FILTER_CUSTOM_FUNCTION

);

$myArray = filter_input_array(INPUT_GET, $filter); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T09:39:24.940

解决方案是关键字“FILTER_CALLBACK”：

```
function check_languages($var) {
    static $called = 0;
    $called++;
    echo "called: $called: $var<br />";
    $var = filter_var($var, FILTER_SANITIZE_STRIPPED);
    $l = new language($var);
    return $l;
}
$filter = array(
   'favourites' => array(
                            'filter' => FILTER_CALLBACK,
                            'options'  => 'check_languages'
                        )
); 
```

通过[http://devzone.zend.com/703/php-built-in-input-filtering/](http://devzone.zend.com/703/php-built-in-input-filtering/)

# google-app-engine - 使用bulkloader时如何在appengine中填充“ID”字段？

> ID：14953957
> 
> 赞同：0
> 
> 时间：2013-02-19T09:24:48.707
> 
> 标签：google-app-engine, bulkloader, bulk-load

![数据存储查看器](../Images/2cdc957e62edb4852595a981e5161c2d.png)

**更新：见下文**

我已经弄清楚如何为我的数据集填写 Key Name 字段，这样我现在将写入操作减少了 2（从 8 减少）。但是我仍然有这个额外的空列“ID”。我已经尝试了 bulkloader.py 的各种配置，但我无法填充该列并希望进一步减少我的写入操作......

这是我所拥有的：

```
python_preamble:
- import: base64
- import: re
- import: google.appengine.ext.bulkload.transform
- import: google.appengine.ext.bulkload.bulkloader_wizard
- import: google.appengine.ext.db
- import: google.appengine.api.datastore
- import: google.appengine.api.users

transformers:

- kind: Word
  connector: csv 

  property_map:
    - property: __key__
      external_name: word
      export_transform: transform.key_id_or_name_as_string

    - property: ID
      external_name: ID  
      # How to configure this one to use up that silly empty column called "ID"?

    - property: otherlangs
      external_name: otherlangs 
```

这是我的 csv 文件的标题和一些示例行：

```
$ head allting.csv
ID,word,otherlangs
100,a,it|uno|
200,aaltos,fi|aaltojen|
300,aardvark,is|jarðsvín|nl|aardvarken| 
```

**更新：好的，我发现了如何以“键名”列为代价填充“ID”列......**

我将 bulkload.py 更改为如下所示：

```
transformers:

- kind: Word
  connector: csv
  connector_options:
    encoding: utf-8
    columns: from_header
  property_map:
    - property: __key__
      external_name: id
      export_transform: transform.key_id_or_name_as_string
      import_transform: transform.create_foreign_key('id', key_is_id=True)

    - property: word·
      external_name: word·

    - property: otherlangs·
      external_name: otherlangs· 
```

csv 文件如下所示：

```
id,word,otherlangs
100,a,it|uno|
200,aaltos,fi|aaltojen|
... 
```

Datastore Viewer 中的输出现在如下所示：

![数据存储查看器现在的样子](../Images/7e02841353dfe54fee0f84b0ed2088ad.png)

***仍然想知道是否有任何方法可以填充 ID 和“密钥名称”列并将写入操作减少到 4？***

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T04:35:13.170

由于没有人对这个问题有任何想法，我将记录我想出的这个解决方法。

通过对 bulkload.yaml 文件执行此操作，我能够将写入操作减少到 4

```
...
transformers:

- kind: Word
  connector: csv
  connector_options:
    encoding: utf-8
    columns: from_header
  property_map:
    - property: __key__
      external_name: word
      export_transform: transform.key_id_or_name_as_string

    - property: otherlangs
      external_name: otherlangs 
```

改变我的班级看起来像这样：

```
class Word(db.Model):
  word = db.StringProperty(multiline=False)
  otherlangs = db.StringProperty(multiline=True)

  def __str__(self): #encode('utf8')
     return "word: " + str(self.key().name().encode('utf8')) + ", otherlangs: " + self.otherlangs.encode('utf8') 
```

现在写操作是 4，这很好：

![将操作数写到 4](../Images/baeadd860041fe382ea3e557c23c6ac8.png)

在交互式控制台中查询变得更加棘手，我花了一段时间才弄明白。

```
from google.appengine.api import users
from google.appengine.ext.db.metadata import Namespace
import words

foo = words.Word.get_by_key_name('abalone')
print foo 
```

产生：

```
word: abalone, otherlangs: fr|ormeaux|it|orecchie di mare| 
```

我不明白的是......我如何动态添加新单词，以便我可以让单词成为关键，就像批量上传器正在为我做的那样。但我不会太担心这个，只要散装装载机能做到，我想这已经足够了。

# prolog - 如何使用 prolog 用逻辑语言翻译句子？

> ID：14953960
> 
> 赞同：1
> 
> 时间：2013-02-19T09:24:58.373
> 
> 标签：prolog

我有一个句子及其语法，在哪里可以找到谓词序言，让我可以用逻辑语言编写句子？

存在或你们中的任何人都可以帮助我创建一个谓词

将以下字符串作为输入

```
(S (NP (NNP John))
    (VP (VBP see)
      (NP (NNP Mary)))) 
```

并返回这个

```
see(John,Mary) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T13:08:06.880

如果我理解，您希望将 LISP 结构解析为 Prolog。那么Markus Triska 的[LisProlog](http://web.student.tuwien.ac.at/~e0225855/lisprolog/lisprolog.html)可能是合适的工具。使用那个和这个片段

```
test :- parse("(S (NP (NNP John))
        (VP (VBP see)
         (NP (NNP Mary))))",
          R),
    maplist(sexp_write(""), R).

sexp_write(Indent, E) :-
    is_list(E),
    format('~s~w~n', [Indent, E]),
    maplist(sexp_write([0' |Indent]), E).
sexp_write(Indent, E) :-
    format('~s~w~n', [Indent, E]). 
```

我明白了

```
?- test.
[s(S),[s(NP),[s(NNP),s(John)]],[s(VP),[s(VBP),s(see)],[s(NP),[s(NNP),s(Mary)]]]]
 s(S)
 [s(NP),[s(NNP),s(John)]]
  s(NP)
  [s(NNP),s(John)]
   s(NNP)
   s(John)
 [s(VP),[s(VBP),s(see)],[s(NP),[s(NNP),s(Mary)]]]
  s(VP)
  [s(VBP),s(see)]
   s(VBP)
   s(see)
  [s(NP),[s(NNP),s(Mary)]]
   s(NP)
   [s(NNP),s(Mary)]
    s(NNP)
    s(Mary)
true . 
```

现在您应该决定将*逻辑形式*翻译成 Prolog 术语。

一般来说，这是一个困难的主题，因为你需要对*量化*做一些选择。对于您的简单陈述，您可以从一个非常简单的模式匹配开始，完全忽略上述问题。

```
sexp_to_term(S_exp, T_exp) :-
    parse(S_exp, [R]),
    termize(R, T),
    pattern(T, T_exp).

pattern(T, T_exp) :-
    T = 'S'('NP'('NNP'(Subj)),'VP'('VBP'(Verb),'NP'('NNP'(Obj)))),
    T_exp =.. [Verb, Subj, Obj].

termize(s(Tag), Tag).
termize([s(Tag)|Args], Term) :-
    maplist(termize, Args, ArgsT),
    Term =.. [Tag|ArgsT]. 
```

测试：

```
?- gtrace,sexp_to_term("(S (NP (NNP John)) (VP (VBP see) (NP (NNP Mary))))", T).
T = see('John', 'Mary'). 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T18:29:48.860

我认为@CapelliC 的答案更好（+1），但我想尝试一下，看看我想出了什么。你可以在没有 LisProlog 的情况下解决这个问题，但你可以肯定 LisProlog 会比我现成的 DCG 废话做得更好*。*

首先，为了方便起见，我想将您的例句粘贴到代码中，这样我就不必继续重新输入它了：

```
sent("(S (NP (NNP John))
         (VP (VBP see)
             (NP (NNP Mary))))"). 
```

现在一些辅助 DCG 规则：

```
whitespace --> [X], { char_type(X, white) ; char_type(X, space) }, whitespace.
whitespace --> [].

char(C) --> [C], { char_type(C, graph), \+ memberchk(C, "()") }. 
```

我需要`memberchk`在那里以确保我不会将括号放入原子中。

```
chars([C|Rest]) --> char(C), chars(Rest).
chars([C]) --> char(C).

term(T) --> chars(C), { atom_chars(T, C) }.
term(L) --> list(L).

list(T) --> "(", terms(T), ")".

terms([]) --> [].
terms([T|Terms]) --> term(T), whitespace, !, terms(Terms). 
```

术语和列表之间存在相互递归，但这正是我们想要的，因为我们希望列表能够嵌套在任何地方。让我们测试一下解析：

```
?- sent(X), phrase(list(Y), X).
X = [40, 83, 32, 40, 78, 80, 32, 40, 78|...],
Y = ['S', ['NP', ['NNP', 'John']], ['VP', ['VBP', see], ['NP', ['NNP'|...]]]] ; 
```

到目前为止，这看起来不错。模式匹配看起来与@CapelliC 的非常相似：

```
simplify(['S', ['NP', ['NNP', Subject]], 
               ['VP', ['VBP', Verb], 
                      ['NP', ['NNP', Object]]]], 
         Result) :-
    Result =.. [Verb, Subject, Object]. 
```

不幸的是，使用大写的原子会掩盖这里的意图，这实际上是很自然的。如果我们可以使用小写字母，则模式看起来更像这样：

```
simplify([s, [np, [nnp, Subject]], 
             [vp, [vbp, Verb], 
                  [np, [nnp, Object]]]], 
         Result) :-
    Result =.. [Verb, Subject, Object]. 
```

我们在这里使用强大的“univ”运算符 ( `=..`) 从列表中生成 Prolog 术语。您可以将此运算符视为 Lisp 翻译器，因为它本质上就是这样做的：

```
?- s(this, that) =.. X.
X = [s, this, that].

?- X =.. [s, this, that].
X = s(this, that). 
```

所以应该清楚模式匹配是如何工作的。让我们看看整个事情是如何组合在一起的：

```
?- sent(X), phrase(list(Y), X), simplify(Y, Z).
X = [40, 83, 32, 40, 78, 80, 32, 40, 78|...],
Y = ['S', ['NP', ['NNP', 'John']], ['VP', ['VBP', see], ['NP', ['NNP'|...]]]],
Z = see('John', 'Mary') . 
```

对于它的价值，将自然语言句子翻译成逻辑命题是一个大问题。通常不会这么容易，但是有一些书讨论了如何解决这个问题。我建议查看*自然语言*的表示和推理，以获取有关这个大问题的更多信息。

所以你有它。像这样手工完成的好处是，您可以从 Lisp 的语法中精确控制要采用的内容，并且易于扩展或修改。缺点是您必须调试语法——我很确定这个语法存在我没有注意到或花时间发现的问题（我远非 DCG 专家！）。如果没有更好的要求，我肯定会接受@CapelliC 的回答，但我认为看看如何从头开始解决这个问题可能会有所帮助。

# ios - IDA Pro 获得灰色评论

> ID：14953964
> 
> 赞同：0
> 
> 时间：2013-02-19T09:25:17.900
> 
> 标签：ios, objective-c, assembly, arm, ida

我有一个 iOS App 反汇编，它具有以下块：

![IDA Pro 片段](../Images/6b82cb3a087412ec1a1a8d9c4dccf996.png)

在我们想从 IDAPython 中捕获的非常感兴趣的图片中有“灰色”的评论。例如在导入的框架对象上使用了哪些选择器，例如`UIWindow`，`CLHeading`等等。IDA python 只调用获取可重复注释、常规注释和函数注释。知道哪个 idc/idapython 函数会得到这个“灰色”的评论吗？我认为它们是来自某个地方的可重复评论。谢谢。

### 更新

灰色的评论是可重复的评论，所以我尝试按照标记的地址（`selRef_setLastHeading`在第三行）到可重复的评论并到达这一行：

![在此处输入图像描述](../Images/25040d8ebc4174d4dfe580606772546a.png)

但是，当我`RptCmt(here())`在该地址执行 a 时，我希望`@selector(setLastHeading:)`作为评论返回，但它返回了一个空字符串..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T08:50:25.290

灰色评论是来自引用项目的重复评论，因此对于第三行的第一个灰色评论，如果你去了`selRef_setLastHeading_`它应该有一个重复的评论。

如果这是在结构化数据块中，我会说读取地址，然后将其用于评论请求功能（对不起，没有 IDApython 经验，只是 IDC 脚本）。但由于它们是指令的操作数，对于这种类型的事情，我倾向于编写一个脚本，该脚本具有基于指令的开关，因此您知道如何解码参考地址。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-06T16:47:13.773

我发现了一种获取灰色评论的愚蠢方法，如下所示。

```
widget = ida_kernwin.open_xrefs_window(pk_ea)
title = ida_kernwin.get_widget_title(widget)
ida_kernwin.close_widget(widget,0)
print(title) 
```

# string - 字符串转换为 global-set-key (elisp) 的函数命令

> ID：14953968
> 
> 赞同：1
> 
> 时间：2013-02-19T09:25:22.340
> 
> 标签：string, emacs, elisp

我想在一个函数中调用 global-set-key，给它参数，以创建 global-set-keys。

```
(defun global-setter (arg1 arg2)
 (global-set-key arg1 '(concat "example" arg1 arg2))
)

(global-setter "*" "^") 
```

这应该创建在按下 时应该调用`*`该函数的绑定。`example-*^`

我不知道如何让字符串作为函数/命令名称传递。我究竟做错了什么？

到目前为止，我尝试了 , , 的组合``',@`，`(intern)`但`(eval)`我`(function)`不知道我应该做什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T09:35:34.147

您的代码不起作用的一个原因是您引用了 (concat ..) 表达式，因此它从未被评估过。并且 global-set-key 需要一个 lambda 或一个符号。

您可以使用实习生构造一个符号，然后将该符号提供给 set-key：

```
(defun my-test () (interactive) (message "ok"))
(global-set-key "\C-c!" (intern (concat "my" "-" "test"))) 
```

请注意，通过 global-set-key 和 variables 调用的任何函数都必须是**interactive**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T09:35:02.097

用于`lexical-let`定义一个[*闭包*](http://en.wikipedia.org/wiki/Closure_%28computer_science%29)，一个匿名函数，它引用定义它的环境中的值：

```
(defun global-setter (arg1 arg2)
  (lexical-let ((arg1 arg1) (arg2 arg2))
    (global-set-key arg1 (lambda ()
                           (interactive)
                           (concat "example" arg1 arg2))))) 
```

Emacs 24原[生支持](http://www.gnu.org/software/emacs/manual/html_node/elisp/Lexical-Binding.html)词法绑定和闭包，因此`lexical-let`不再需要：

```
(defun global-setter (arg1 arg2)
  (global-set-key arg1 (lambda ()
                         (interactive)
                         (concat "example" arg1 arg2)))) 
```

为此，请务必在您的文件中设置`lexical-binding`为并将其添加到文件末尾，以确保将词法绑定用于字节编译：`t``.emacs`

```
;; Local Variables:
;; lexical-binding: t
;; End: 
```

# java - 求二叉树的直径

> ID：14953979
> 
> 赞同：5
> 
> 时间：2013-02-19T09:26:04.970
> 
> 标签：java, tree, binary-tree

我试图在java中找到二叉树的直径（树中任意两个节点之间的路径长度，包含最大节点数。）。

我的代码片段：

```
public int diametre(Node node, int d)
{
    if(node==null)
        return 0;

    lh=diametre(node.left, d);
    rh=diametre(node.right, d);

    if(lh+rh+1>d)
        d=lh+rh+1;

    return findMax(lh, rh)+1;
} 
```

在主要方法中：

```
 System.out.println( bst.diametre(root,0) ); 
```

逻辑：它实际上是后序逻辑。变量“d”是指子树的直径（在该迭代中）。当发现一些更大的值时，它将被更新。'lh' 指的是：左子树的高度。'rh' 指的是：右子树的高度。

但它给出了错误的输出。

考虑的树：

```
 5
  / \
 /   \
1     8
 \    /\
  \  /  \
  3  6   9 
```

空闲输出：5

但是这段代码给出了 3。

有大神能查出问题出在哪里吗...

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-19T09:30:52.773

```
public int diameter (Node root)
{
    if (root == null) return 0;
    else return Math.max (
        diameter (root.left), 
        Math.max (
            diameter (root.right),
            height (root.left) + height (root.right) + 1));
}

public int height (Node root)
{
    if (root == null) return 0;
    else return 1 + Math.max (height (root.left), height (root.right));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T10:00:11.143

我建议如下：

```
public static TreeAttr calcTreeDiameter(Node root) {
    if (root == null)
        return new TreeAttr(0, 0);

    TreeAttr leftAttr = calcTreeDiameter(root.getLeft());
    TreeAttr rightAttr = calcTreeDiameter(root.getRight());

    int maxDepth = Math.max(leftAttr.depth, rightAttr.depth);
    int maxDiam = Math.max(leftAttr.diameter, rightAttr.diameter);
    maxDiam = Math.max(maxDiam, leftAttr.depth + rightAttr.depth + 1);

    return new TreeAttr(maxDiam, maxDepth + 1);
} 
```

TreeAttr 是一个包含子树直径和深度的简单结构。两者都应该在递归中传递，因为最优值可能来自子树之一，或者来自最长路径的串联。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T09:30:12.137

[通过从任何节点运行BFS](http://en.wikipedia.org/wiki/Breadth-first_search)，然后从最远节点（在第一个 BFS 期间最后访问的节点）运行另一个 BFS，您可以找到树的直径。直径由第一个 BFS 中最后访问的节点和第一个 BFS 中最后访问的节点组成。树是二元的这一事实不会影响算法。

编辑：更改`d`您编写的代码中的值不会影响您传递的参数，因为原始类型在 java 中不是通过引用传递的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-11T01:02:50.663

```
int max=0;
public int diameter(Tree root) {
  if(root==null) return 0;
  int l=diameter(root.left);
  int r=diameter(root.right);
  max=Math.max(max,l+r+1);
  return l>r:l+1:r+1;
} 
```

max 是最大直径。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-29T19:30:22.820

算法需要 O(n)。同时计算高度和路径。

```
public static int findLongestPath(TreeNode root)
{
  // longest path = max (h1 + h2 + 2, longestpath(left), longestpath(right);

  int[] treeInfo = longestPathHelper(root);

  return treeInfo[0];
}

private static int[] longestPathHelper(TreeNode root)
{
  int[] retVal = new int[2];

  if (root == null)
  {
     //height and longest path are 0
     retVal[0] = 0;
     retVal[1] = 0;
  }

  int[] leftInfo = longestPathHelper(root.getLeft());
  int[] rightInfo = longestPathHelper(root.getRight());

  retVal[0] = Math.max(leftInfo[1] + rightInfo[1] + 2, Math.max(leftInfo[0], rightInfo[0]));
  retVal[1] = Math.max(leftInfo[1], rightInfo[1]) + 1;

  return retVal;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-11-29T15:01:05.427

二叉树的直径在 O(n) 中，它会跟踪是否通过根节点的直径，并使用相同的高度函数来跟踪直径。

**DiameterOfTree.class**

```
import BinaryTree.BinaryTreeNode;

public class DiameterOfBinaryTree {
    private int DIAMETER = 0;

    public void getDiameterOfBinaryTree(BinaryTreeNode node) {
        getHeightUtil(node, DIAMETER);
        System.out.print("\n\n Maximum Diameter of the tree is : " + DIAMETER);
    }

    private int getHeightUtil(BinaryTreeNode node, Integer maXValue) {
        if (node == null) {
            return 0;
        }

        // Here we get the maximum value returned + 1 for each subtree left or 
        //  right 
        int leftHeight = getHeightUtil(node.getLeft(), maXValue); 
        int rightHeight = getHeightUtil(node.getRight(), maXValue);

        //finding the new diameter at a particular node and adding 1 to 
        //include that particular node as well: leftHeight + rightHeight + 1 
        DIAMETER = Math.max(DIAMETER, leftHeight + rightHeight + 1);

        return 1 + Math.max(leftHeight, rightHeight);
    }
} 
```

**主.java**

```
package BinaryTree;

public class Main {

    public static void main(String[] args) {
        //Initialise root
        BinaryTreeNode root = new BinaryTreeNode(40);

        //Create a binary Tree
        InitialiseBinaryTree initialiseBinaryTree = new InitialiseBinaryTree();
        initialiseBinaryTree.initialise(root);

        // Find the diameter of the binary tree 
        new DiameterOfBinaryTree().getDiameterOfBinaryTree(root);
    }

} 
```

**初始化二进制树.java**

```
package BinaryTree;

class InitialiseBinaryTree {
    void initialise(BinaryTreeNode root) {
        BinaryTreeOperation bto = new BinaryTreeOperation();
        int[] data = {20, 50, 10, 30, 5,8, 25, 32, 33};
        for (int aData : data) {
            bto.insertElementInBinaryTree(root, aData);
        }
    }
} 
```

**BinaryTreeOperation.java**

```
package BinaryTree;

class BinaryTreeOperation {
    private boolean findInBinaryTree(BinaryTreeNode node, int data) {
        return node != null &&
                (data == node.getData() || (findInBinaryTree(node.getLeft(), data) || findInBinaryTree(node.getRight(), data)));
    }

    void insertElementInBinaryTree(BinaryTreeNode node, int data) {
        if (node == null) {
            new BinaryTreeNode(data);
        } else {
            insertHelper(node, data);
        }
    }

    private void insertHelper(BinaryTreeNode node, int data) {
        if (node.getData() > data) {
            if (node.getLeft() == null) {
                node.setLeft(new BinaryTreeNode(data));
            } else {
                insertHelper(node.getLeft(), data);
            }
        } else {
            if (node.getRight() == null) {
                node.setRight(new BinaryTreeNode(data));
            } else {
                insertHelper(node.getRight(), data);
            }
        }
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-04-17T19:07:19.770

您应该使用树的高度来计算直径。创建一个 getHeight() 函数，它将树的根作为参数并返回树的高度。使用这个值并在递归的帮助下，我们可以计算出树的直径。这是它的代码......

计算直径的功能：-

```
public static int getDiameter(BinaryTreeNode root) {        
  if (root == null)
    return 0;

int rootDiameter = findHeight(root.getLeft()) + findHeight(root.getRight()) + 1;
int leftDiameter = getDiameter(root.getLeft());
int rightDiameter = getDiameter(root.getRight());

return Math.max(rootDiameter, Math.max(leftDiameter, rightDiameter));
} 
```

计算树高的函数：-

```
public static int findHeight(BinaryTreeNode node) {
if(node == null)
    return 0;

else {
    return 1+Math.max(findHeight(node.left), findHeight(node.right));
}
} 
```

# asp.net-mvc - Windows 8 VS2012 IISExpress Windows 身份验证

> ID：14953983
> 
> 赞同：6
> 
> 时间：2013-02-19T09:26:14.260
> 
> 标签：asp.net-mvc, windows-8, orchardcms, iis-express

根据标题，我正在尝试启用 Windows 身份验证在本地开发：

*   Windows 8（专业版）
*   VS2012
*   IISExpress
*   ASP.Net MVC4 项目
*   Orchard CMS 是项目（但我认为这无关紧要）

通过项目属性，我将 Windows 身份验证设置为启用，匿名身份验证设置为禁用。

在我设置的 web.config 中：

```
<authentication mode="Windows" /> 
```

但是，在运行该站点时，我会不断提示我输入凭据。输入 Windows 8 或本地帐户凭据似乎没有任何区别，我已将这些帐户设置为对文件夹具有完全权限。

任何建议都感激不尽！

**更新 1：** 按照 Darin Dimitrov 的建议，我创建了一个空白 MVC 项目并选择了 Intranet 模板。在将匿名授权设置为禁用并启用 Windows 身份验证后，此测试项目完全按预期工作（输入凭据时提示提供对站点的访问）。我将相同的授权配置应用于我的 Orchard 项目 web.config：

```
<authentication mode="Windows" />
<authorization>
  <deny users="?" />
</authorization> 
```

但仍然不高兴，我按预期提示输入凭据，但我输入的任何内容似乎都没有授权用户。我已经粘贴了下面的两个 web.config，以防其他人指出我遗漏了什么？

*   果园网络配置：http: [//pastie.org/private/8oe5jesvt0vmqgyn3w](http://pastie.org/private/8oe5jesvt0vmqgyn3w)
*   示例 Web.Config： http: [//pastie.org/private/zgxyue03crzd6fb8umlidq](http://pastie.org/private/zgxyue03crzd6fb8umlidq)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-19T09:32:18.300

确保您已在 Web 服务器的属性中启用 Windows 身份验证并禁用匿名身份验证：

![在此处输入图像描述](../Images/9f5ea9243f0f8cdd3661ce516dee2624.png)

还要确保您已阅读使用 Intranet 模板创建新的 MVC 应用程序时为您生成的文本文件：

> 为了使用 Intranet 模板，您需要启用 Windows 身份验证并禁用匿名身份验证。
> 
> IIS 7 和 IIS 8
> 
> 1.  打开 IIS 管理器并导航到您的网站。
> 2.  在功能视图中，双击身份验证。
> 3.  在身份验证页面上，选择 Windows 身份验证。如果 Windows 身份验证不是一个选项，您需要确保在服务器上安装了 Windows 身份验证。
>     
>     
>     
>     要在 Windows 上启用 Windows 身份验证：
>     
>     
>     
>     a) 在控制面板中打开“程序和功能”。
>     
>     
>     
>     b) 选择“打开或关闭 Windows 功能”。
>     
>     
>     
>     c) 导航到 Internet 信息服务 > 万维网服务 > 安全并确保选中 Windows 身份验证节点。
>     
>     
>     
>     要在 Windows Server 上启用 Windows 身份验证：
>     
>     
>     
>     a) 在服务器管理器中，选择 Web 服务器 (IIS) 并单击添加角色服务
>     
>     
>     
>     b) 导航到 Web 服务器 > 安全并确保选中 Windows 身份验证节点。
>     
>     
> 4.  在“操作”窗格中，单击启用以使用 Windows 身份验证。
>     
>     
> 5.  在身份验证页面上，选择匿名身份验证。
> 6.  在“操作”窗格中，单击禁用以禁用匿名身份验证。
> 
> IIS 快递
> 
> 1.  在解决方案资源管理器中单击您的项目以选择该项目。
> 2.  如果“属性”窗格未打开，请将其打开 (F4)。
> 3.  在项目的“属性”窗格中：
>     a) 将“匿名身份验证”设置为“禁用”。
>     b) 将“Windows 身份验证”设置为“启用”。

# git - “替换为 Git 索引中的文件”显示为已禁用

> ID：14953984
> 
> 赞同：1
> 
> 时间：2013-02-19T09:26:16.963
> 
> 标签：git, egit

我正在使用 eclipse 和 Egit。我正在尝试撤消尚未提交的单个文件的更改。根据我的阅读，它应该像打开 Git Staging 视图一样简单，右键单击文件并选择“替换为 Git 索引中的文件”。但是，此选项始终显示为禁用（启用仅其他两个，“打开工作树版本”和“添加到 git 索引”）。

我的问题是：

*   为什么它显示为禁用？
*   是否有另一种简单的方法来撤消尚未提交的特定文件中的更改？

我在 Ubuntu 12.04 上使用 Eclipse 3.7.2（与 PDT 捆绑的那个），Egit 1.3.0.201202151440-r。

编辑：当我在 PHP 透视图中打开相同的项目时，似乎禁用了此选项。如果我从 PHP 的角度关闭项目，则灰色选项可用（替换为 Git 索引中的文件和替换为 HEAD 修订版中的文件）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-10T14:58:08.210

重新安装 PDT/Egit 似乎可以解决问题

# scala - 具有约束的自定义字段构造函数

> ID：14953987
> 
> 赞同：3
> 
> 时间：2013-02-19T09:26:20.133
> 
> 标签：scala, playframework-2.0

我编写了自己的字段构造函数，如下所示：

```
@(elements: helper.FieldElements)

@*****************************************************
* Generate input according to Twitter Bootsrap rules *
******************************************************@
<div class="control-group @if(elements.hasErrors) {error}">
    <label class="control-label" for="@elements.id">@elements.label @if(elements.field.constraints.map(c => c._1).contains("constraint.required")) {*}</label>
    <div class="controls">
        @elements.input
        <span class="help-inline">@elements.errors(elements.lang).mkString(", ")</span>
        <span class="help-block">@elements.infos(elements.lang).mkString(", ")</span>
    </div>
</div> 
```

`*`这个想法是在所需元素的标签之后添加一个星号。

它适用于在表单定义中具有`nonEmptyText`映射的字段，但我主要关心的是对所需的电子邮件字段做同样的事情：字段是否可以定义为`email`或`optional(email)`在表单中，使用相同的约束`constraint.email`。

那么如何在我的字段构造函数中找到差异并将星号仅添加到所需的电子邮件字段中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-05T14:08:57.623

**专门针对电子邮件：**

您可以在表单映射中定义您的电子邮件地址，如下所示：

```
import play.api.data.Forms.email
import play.api.data.validation.Constraints.nonEmpty

"email" -> email.verifying(nonEmpty) 
```

这将添加您期望的约束：“constraint.required”

# jquery - 如何从段落标签中获取数值？

> ID：14953990
> 
> 赞同：0
> 
> 时间：2013-02-19T09:26:28.937
> 
> 标签：jquery

我有 N 个段落标签。每个段落标签都会有一些数字。我想获取这些数字并将其存储在变量中。例如：

```
<p id="id_1">1</p>
<p id="id_2">2</p>
<p id="id_3">3</p>
<p id="id_2">4</p>
and so on... 
```

这些数字从输入文本字段中获取并存储在段落标记中。我想将这些数字存储在一个名为 numbers 的变量中。

```
<input type="text" id="numerics" />      //using #numeric.val(); I stored the numbers in paragraph 
```

js是：

```
var numbers = parseInt($("#id_'+$('#numeric').val()+'").text().trim(), 10); 
```

但它不起作用。谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T09:28:10.933

你误用了引号。

利用

```
var number = parseInt($('#id_'+$('#numeric').val()).text().trim(), 10); 
```

要从所有 id_* 段落中创建一个数组，请执行

```
var numbers = $('p[id^="id_"]').map(function(){
     return parseInt($(this).text().trim(), 10)
}).get(); 
```

结果 ：`[1, 2, 3, 4]`

请注意，索引从 0 而不是 1 开始，因此如果您想使用输入查找数字，则需要执行

```
var number = numbers[parseInt($('#numeric').val().trim(),10)-1]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T09:29:44.223

尝试这个

```
var numbers = parseInt($("#id_"+$('#numeric').val()).text().trim(), 10); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T09:36:10.690

这取决于你想如何存储它们，在一个数组中还是只是总结它们？

这是两者的一个例子。

[http://jsfiddle.net/z4HL4/1/](http://jsfiddle.net/z4HL4/1/)

```
$("document").ready(function(){
    var numbers = [];
    var sum = 0;

    $("p").each(function(i){

        // get the number as int
        var idNumber = parseInt($(this).attr("id").replace("id_", ""), 10);

        // save in array
        numbers[i] = idNumber;

        // add to our sum
        sum += idNumber;
    });

    // as array
    console.log(numbers);

    // as sum
    console.log(sum);
}); 
```

# c# - 有没有办法将类型参数数组传递给泛型方法？

> ID：14953993
> 
> 赞同：4
> 
> 时间：2013-02-19T09:26:46.853
> 
> 标签：c#, generics

在处理 OpenXml 时，我遇到了这篇文章：[如何：合并电子表格文档中的两个相邻单元格 (Open XML SDK)](http://msdn.microsoft.com/en-us/library/office/cc880096.aspx)。

那里有一个代码示例，我想重构它。这是它的一部分：

```
// Insert a MergeCells object into the specified position.
if (worksheet.Elements<CustomSheetView>().Count() > 0)
{
     worksheet.InsertAfter(mergeCells, 
                           worksheet.Elements<CustomSheetView>().First());
}
else if (worksheet.Elements<DataConsolidate>().Count() > 0)
{
     worksheet.InsertAfter(mergeCells, 
                           worksheet.Elements<DataConsolidate>().First());
}
else if (worksheet.Elements<SortState>().Count() > 0)
{
     worksheet.InsertAfter(mergeCells, 
                           worksheet.Elements<SortState>().First());
}
//...and 5 more 
```

我管理的最好的事情是扩展方法：

```
public static bool InsertElementAfter<T>(this Worksheet worksheet, 
                                              OpenXmlElement element)
    where T : OpenXmlElement
{
    if (!worksheet.Elements<T>().Any())
        return false;
    else
    {
        worksheet.InsertAfter(element, worksheet.Elements<T>().First());
        return true;
    }
} 
```

但它的用法看起来和原始代码一样糟糕：

```
if (!worksheet.InsertElementAfter<CustomSheetView>(mergeCells))
    if (!worksheet.InsertElementAfter<DataConsolidate>(mergeCells))
        if (!worksheet.InsertElementAfter<SortState>(mergeCells))
            //...and 5 more 
```

如果我能以某种方式声明一个类型参数的数组（或其他东西），我将能够编写如下内容：

```
foreach (var T in typeParameterList)
{
    if (worksheet.InsertElementAfter<T>(mergeCells))
        break;
} 
```

但我不知道有什么方法可以做到这一点。

那么我的选择是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T09:38:02.393

您正在寻找的是他们在 C++ 中所说的“类型列表”。但是，不幸的是，这些在 C# 中不受支持。

您可以做的是通过创建一堆具有各种类型参数的类并使它们“递归”来模拟这种行为，如下所示：

```
public interface ITypelist { Type[] List { get; } }
public class Typelist<T1> : ITypelist {
    public Type[] List { get { return new Type[]{typeof(T1)}; }}
}
public class Typelist<T1, T2> : ITypelist {
    public Type[] List { get { return new Type[]{typeof(T1), typeof(T2)}; }}

}
// etc 
```

然后您可以使用它来传递类型列表：

```
worksheet.InsertElementAfter<Typelist<T1, T2, T3>>(mergeCells) 
```

您可以实现类型列表以添加更多技巧。例如，您可以将 'head' (typeof(T1)) 从 'tail' （其余为 Typelist）中拆分出来，并使 typelist 只处理第一种类型。使用类似的技巧，您可以迭代列表并为多种类型添加行为。

请注意，添加了接口，以便您可以添加限制，例如：

```
void InsertElementAfter<T>(...) where T:ITypelist 
```

...不幸的是，您不能将方法和类型作为“通用”传递给方法（还没有？），所以最好的办法是将它们作为字符串传递并使用反射使其成为“真实”方法（使用 MakeGenericType / .. .)。

最终你会得到一个看起来像这样的大助手类：

```
// ...

public class Typelist<T1, T2> : ITypelist
{
    public Type MakeGenericType(Type t)
    {
        return t.MakeGenericType(typeof(T1));
    }

    public MethodInfo MakeGenericMethod(MethodInfo method)
    {
        return method.MakeGenericMethod(typeof(T1));
    }

    public Type Head { get { return typeof(T1); } }
    public Typelist<T2> Tail { get { return new Typelist<T2>(); } }

    public Type[] List { get { return new Type[] { typeof(T1), typeof(T2) }; } }
}

// ...

public static class Ext
{
    public static void InvokeAll<T1>(this Typelist<T1> typelist, MethodInfo baseMethod, object obj, object[] pars)
    {
        typelist.MakeGenericMethod(baseMethod).Invoke(obj, pars);
        // tail so no recursion
    }

    public static void InvokeAll<T1, T2>(this Typelist<T1, T2> typelist, MethodInfo baseMethod, object obj, object[] pars)
    {
        typelist.MakeGenericMethod(baseMethod).Invoke(obj, pars);
        InvokeAll(typelist.Tail, baseMethod, obj, pars);
    }
} 
```

问题是这是否是一个好主意......附加价值是您可以利用类型系统并获得通过使用泛型传递类型列表的能力，缺点是您有很多代码并且仍然有使用反射。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-19T09:39:20.607

您可以为此创建一个流畅的 API。结果可能允许这样的代码：

```
worksheet.InsertAfter<CustomSheetView>(mergeCells)
         .Or<DataConsolidate>()
         .Or<SortState>(); 
```

这个 fluent API 有两个优点：

1.  很有表现力
2.  它无需反射即可工作。

API 的实现需要一个包含值和`Or()`方法的类：

```
public class ChainedElementInserter
{
    OpenXmlElement _element;
    Worksheet _worksheet;
    bool _previousResult;

    // ctor that initializes all three fields goes here.

    public ChainedElementInserter Or<T>()
        where T : OpenXmlElement
    {
        if (!_previousResult)
            _previousResult = _worksheet.InsertElementAfter<T>(_element);

        return this;
    }
} 
```

`InsertAfter`扩展方法启动此链，如下所示：

```
public static ChainedElementInserter InsertAfter<T>(this Worksheet worksheet, 
                                  OpenXmlElement element)
    where T : OpenXmlElement
{
    return new ChainedElementInserter(
        worksheet, element, worksheet.InsertElementAfter<T>(element));
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-19T09:38:31.390

反射可以帮助您在运行时以正确的类型调用该方法。

```
Type[] typeParamList = new Type[] { typeof(CustomSheetView), typeof(DataConsolidate) } //And 9 more

MethodInfo method = typeof(Extensions).GetMethod("InsertElementAfter");
foreach (var type in typeParamList)
{
    var genericMethod = method.MakeGenericMethod(new Type[] { type });
    genericMethod.Invoke(null, new object[] { worksheet, mergeCells });
} 
```

# c# - 操作事件和平移模式

> ID：14953995
> 
> 赞同：2
> 
> 时间：2013-02-19T09:26:48.493
> 
> 标签：c#, wpf, silverlight, xaml, scrollview

我正在为支持触摸的设备开发 WPF。我面临一个奇怪的问题。我的 XAML 结构是

```
 <ScrollViewer>
     <StackPanel orientation="Horizontal">
         <!--  Control goes here -->
      </StackPanel>
  <ScrollViewer> 
```

现在

1.  要启用触摸滚动，我必须将 PannigMode 设置为**Horizo** **​​ntalOnly**
2.  要接收操作事件，我必须将**PannigMode**设置为**None**

问题是我必须同时拥有这两个功能。

是否有任何解决方法可以使**滚动查看器在触摸时滚动**并且触发**操作**完成事件。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-04T09:20:57.407

我遇到过同样的问题。你至少有两个选择

*   使用 MS Surface 工具包
*   修复 ScrollViewer

我选择了第二个。只需创建一个自定义控件，继承自 ScrollViewer，在 Generic.xaml 中只需要放一个`<ContentPresenter />`，仅此而已。真正的工作是在代码背后，但也不那么复杂。我必须检查用户是否触摸了按钮或只是想滚动。诀窍是检查触摸点上的内容并打开/关闭平移模式。

这是代码：

```
namespace Demo.Controls
{
   public class ScrollViewerWithTouch : ScrollViewer
   {
    private PanningMode panningMode;

    private bool panningModeSet;

      static ScrollViewerWithTouch()
      {
         DefaultStyleKeyProperty.OverrideMetadata(typeof(ScrollViewerWithTouch), new FrameworkPropertyMetadata(typeof(ScrollViewerWithTouch)));
      }

      protected override void OnManipulationCompleted(ManipulationCompletedEventArgs e)
      {
         base.OnManipulationCompleted(e);

         // set it back
         this.PanningMode = this.panningMode;
      }

      protected override void OnManipulationStarted(ManipulationStartedEventArgs e)
      {
         // figure out what has the user touched
         var result = VisualTreeHelper.HitTest(this, e.ManipulationOrigin);
         if (result != null && result.VisualHit != null)
         {
            var hasButtonParent = this.HasButtonParent(result.VisualHit);

            // if user touched a button then turn off panning mode, let style bubble down, in other case let it scroll
            this.PanningMode = hasButtonParent ? PanningMode.None : this.panningMode;
         }
         base.OnManipulationStarted(e);
      }

      protected override void OnTouchDown(TouchEventArgs e)
      {
         // store panning mode or set it back to it's original state. OnManipulationCompleted does not do it every time, so we need to set it once more.
         if (this.panningModeSet == false)
         {
            this.panningMode = this.PanningMode;
            this.panningModeSet = true;
         }
         else
         {
            this.PanningMode = this.panningMode;
         }

         base.OnTouchDown(e);         
      }

      private bool HasButtonParent(DependencyObject obj)
      {
         var parent = VisualTreeHelper.GetParent(obj);

         if ((parent != null) && (parent is ButtonBase) == false)
         {
            return HasButtonParent(parent);
         }

         return parent != null;
      }
   }
} 
```