# StackOverflow 问答 13023000-13023999

# ruby-on-rails - 无法加载此类文件 -- puma/capistrano (LoadError)

> ID：13023003
> 
> 赞同：2
> 
> 时间：2012-10-23T03:09:00.273
> 
> 标签：ruby-on-rails, ruby, capistrano, puma

我正在尝试使用带有 Capistrano 的 puma gem。但是，当我这样做`cap deploy`时，我得到了`cannot load such file -- puma/capistrano (LoadError)`. 我在这里做错了什么？

**宝石文件**

```
gem 'puma', :git => "git://github.com/puma/puma.git" 
```

**Gemfile.lock**

```
GIT
  remote: git://github.com/puma/puma.git
  revision: 2280b68d987bfe17f00bb92c772b971a4f073ca6
  specs:
    puma (2.0.0.b1)
      rack (~> 1.2) 
```

**部署.rb**

```
require 'puma/capistrano' 
```

**堆栈跟踪**

```
/Users/Kyle/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:55:in `require': cannot load such file -- puma/capistrano (LoadError)
    from /Users/Kyle/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:55:in `require'
    from /Users/Kyle/.rvm/gems/ruby-1.9.3-p125/gems/capistrano-2.13.4/lib/capistrano/configuration/loading.rb:152:in `require'
    from ./config/deploy.rb:3:in `load'
    from /Users/Kyle/.rvm/gems/ruby-1.9.3-p125/gems/capistrano-2.13.4/lib/capistrano/configuration/loading.rb:93:in `instance_eval'
    from /Users/Kyle/.rvm/gems/ruby-1.9.3-p125/gems/capistrano-2.13.4/lib/capistrano/configuration/loading.rb:93:in `load'
    from /Users/Kyle/.rvm/gems/ruby-1.9.3-p125/gems/capistrano-2.13.4/lib/capistrano/configuration/loading.rb:172:in `load_from_file'
    from /Users/Kyle/.rvm/gems/ruby-1.9.3-p125/gems/capistrano-2.13.4/lib/capistrano/configuration/loading.rb:89:in `load'
    from /Users/Kyle/.rvm/gems/ruby-1.9.3-p125/gems/capistrano-2.13.4/lib/capistrano/configuration/loading.rb:86:in `block in load'
    from /Users/Kyle/.rvm/gems/ruby-1.9.3-p125/gems/capistrano-2.13.4/lib/capistrano/configuration/loading.rb:86:in `each'
    from /Users/Kyle/.rvm/gems/ruby-1.9.3-p125/gems/capistrano-2.13.4/lib/capistrano/configuration/loading.rb:86:in `load'
    from Capfile:4:in `load'
    from /Users/Kyle/.rvm/gems/ruby-1.9.3-p125/gems/capistrano-2.13.4/lib/capistrano/configuration/loading.rb:93:in `instance_eval'
    from /Users/Kyle/.rvm/gems/ruby-1.9.3-p125/gems/capistrano-2.13.4/lib/capistrano/configuration/loading.rb:93:in `load'
    from /Users/Kyle/.rvm/gems/ruby-1.9.3-p125/gems/capistrano-2.13.4/lib/capistrano/configuration/loading.rb:172:in `load_from_file'
    from /Users/Kyle/.rvm/gems/ruby-1.9.3-p125/gems/capistrano-2.13.4/lib/capistrano/configuration/loading.rb:89:in `load'
    from /Users/Kyle/.rvm/gems/ruby-1.9.3-p125/gems/capistrano-2.13.4/lib/capistrano/configuration/loading.rb:86:in `block in load'
    from /Users/Kyle/.rvm/gems/ruby-1.9.3-p125/gems/capistrano-2.13.4/lib/capistrano/configuration/loading.rb:86:in `each'
    from /Users/Kyle/.rvm/gems/ruby-1.9.3-p125/gems/capistrano-2.13.4/lib/capistrano/configuration/loading.rb:86:in `load'
    from /Users/Kyle/.rvm/gems/ruby-1.9.3-p125/gems/capistrano-2.13.4/lib/capistrano/cli/execute.rb:65:in `block in load_recipes'
    from /Users/Kyle/.rvm/gems/ruby-1.9.3-p125/gems/capistrano-2.13.4/lib/capistrano/cli/execute.rb:65:in `each'
    from /Users/Kyle/.rvm/gems/ruby-1.9.3-p125/gems/capistrano-2.13.4/lib/capistrano/cli/execute.rb:65:in `load_recipes'
    from /Users/Kyle/.rvm/gems/ruby-1.9.3-p125/gems/capistrano-2.13.4/lib/capistrano/cli/execute.rb:31:in `execute!'
    from /Users/Kyle/.rvm/gems/ruby-1.9.3-p125/gems/capistrano-2.13.4/lib/capistrano/cli/execute.rb:14:in `execute'
    from /Users/Kyle/.rvm/gems/ruby-1.9.3-p125/gems/capistrano-2.13.4/bin/cap:4:in `<top (required)>'
    from /Users/Kyle/.rvm/gems/ruby-1.9.3-p125/bin/cap:19:in `load'
    from /Users/Kyle/.rvm/gems/ruby-1.9.3-p125/bin/cap:19:in `<main>' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T05:48:41.123

你可以找到`require 'puma/capistrano'`2.0.0.b7

[https://github.com/puma/puma#capistrano-deployment](https://github.com/puma/puma#capistrano-deployment)

# ember.js - EmberJS 路由器应用程序：视图与控制器

> ID：13023006
> 
> 赞同：7
> 
> 时间：2012-10-23T03:09:16.320
> 
> 标签：ember.js

我正在创建一个基于路由器的 EmberJS 应用程序（强烈模仿[优秀的路由器指南](http://emberjs.com/guides/router_primer/)）。但是，对于视图与控制器中的内容，我感到很困惑。

我完全明白 {{action showFoo}} 通常表示状态更改，并且路由器是我的应用程序的状态机。但我的一些行为不属于这一类。

这是我的实际代码中的一个示例（html 简化但胡子完好无损）。我想要一个通过 ajax 工作的登录表单（即 html 表单不直接发布到服务器，它告诉我的 ember 应用程序尝试通过 json 登录）。

```
<form>
    Email Name: {{view Ember.TextField valueBinding="email"}}
    Password:  {{view Ember.TextField valueBinding="password"}}
    <button type="submit" {{ action logIn target="this" }}>Sign in</button>  
</form> 
```

valueBindings 是我的 loginController 中的字段，但 logIn 处理程序在我的视图中（因为我不知道如何告诉模板调用控制器）。我觉得这是一个奇怪的分布&我不确定 Ember 的正确方法是什么。

我认为路由器不应该处理该操作，因为请求登录尝试并不是真正的状态更改。loginController 感觉是**尝试**登录的正确位置。收到登录响应后，该控制器可以触发状态更改。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T20:12:41.127

> 我认为路由器不应该处理该操作，因为请求登录尝试并不是真正的状态更改。

我认为情况*正是*如此：尝试登录应该转换到一种`authenticating`状态，例如再次单击“登录”将被忽略。

所以恕我直言，这应该由路由器处理。我正在考虑这样的事情，请参阅[http://jsfiddle.net/pangratz666/97Uyh/](http://jsfiddle.net/pangratz666/97Uyh/)：

**车把**：

```
<script type="text/x-handlebars" >
    {{outlet}}
</script>

<script type="text/x-handlebars" data-template-name="login" >
    <p class="info">{{message}}</p>
    Login to view the admin area <br/>
    Email: {{view Ember.TextField valueBinding="email" }} <br/>
    Password: {{view Ember.TextField valueBinding="password" }} <br/>
    <button {{action login}} >Login</button>
</script>

<script type="text/x-handlebars" data-template-name="authenticating" >
    Communicating with server ...
</script>

<script type="text/x-handlebars" data-template-name="admin" >
    Hello admin!
</script> 
```

​</p>

**JavaScript**：

```
App = Ember.Application.create();

App.ApplicationController = Ember.Controller.extend({
    login: function() {
        // reset message
        this.set('message', null);

        // get data from login form
        var loginProps = this.getProperties('email', 'password');

        // simulate communication with server
        Ember.run.later(this, function() {
            if (loginProps.password === 'admin') {
                this.set('isAuthenticated', true);
                this.get('target').send('isAuthenticated');
            } else {
                this.set('message', 'Invalid username or password');
                this.set('isAuthenticated', false);
                this.get('target').send('isNotAuthenticated');
            }
        }, 1000);

        // inform target that authentication is in progress        
        this.get('target').send('authenticationInProgress');
    },
    logout: function() {
        this.set('isAuthenticated', false);
    }
});
App.ApplicationView = Ember.View.extend({
    templateName: 'application'
});

App.LoginView = Ember.View.extend({
    templateName: 'login'
});
App.AdminView = Ember.View.extend({
    templateName: 'admin'
});
App.AuthenticatingView = Ember.View.extend({
    templateName: 'authenticating'
});

App.Router = Ember.Router.extend({
    root: Ember.Route.extend({
        index: Ember.Route.extend({
            route: '/',
            loggedOut: Ember.Route.extend({
                route: '/',
                connectOutlets: function(router) {
                    router.get('applicationController').connectOutlet('login');
                },
                login: function(router) {
                    router.get('applicationController').login();
                },
                authenticationInProgress: function(router) {
                    router.transitionTo('authenticating');
                }
            }),
            authenticating: Ember.State.extend({
                enter: function(router) {
                    router.get('applicationController').connectOutlet('authenticating');
                },
                isAuthenticated: function(router) {
                    router.transitionTo('loggedIn');
                },
                isNotAuthenticated: function(router) {
                    router.transitionTo('loggedOut');
                }
            }),
            loggedIn: Ember.Route.extend({
                route: '/admin',
                connectOutlets: function(router) {
                    if (!router.get('applicationController.isAuthenticated')) {
                        router.transitionTo('loggedOut');
                    }
                    router.get('applicationController').connectOutlet('admin');
                },
                logout: function(router) {
                    router.get('applicationController').logout();
                }
            })
        })
    })
});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T07:50:28.187

您可以为此使用控制器，您使用的模板可以访问控制器。

```
<script type="text/x-handlebars" data-template-name="loginTemplate">
  {{#if controller.login}}
    Logged in!
  {{else}}
    Login failed
  {{/if}}
</script> 
```

这个小提琴展示了一个小应用程序，它可以做到这一点：[小提琴](http://jsfiddle.net/Energiz0r/6dbaq/11/)

然后在登录发生后，您可以对路由器进行操作调用，或向用户显示登录失败。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-27T11:26:49.507

我刚刚通过将代码更改为：

```
{{ action logIn target="controller" }} 
```

# jquery - $("datepicker").getdate() 不适用于新标签

> ID：13023018
> 
> 赞同：0
> 
> 时间：2012-10-23T03:10:07.923
> 
> 标签：jquery, datepicker, getdate

> **可能重复：**
> [日期选择器无法在新选项卡中使用](https://stackoverflow.com/questions/13009404/datepicker-not-working-into-new-tabs)

当我单击按钮“添加选项卡”时。Jquery 将为我创建**新的选项卡**和**新的日期选择器**。但我无法在新的日期选择器上获取日期。它是空的。如何将新的日期选择器选择到新选项卡中？

我的代码

```
<script>
var tabCounter = 2,
    tabTemplate = "<li><a href='#{href}'>#{label}</a> <span class='ui-icon ui-icon-close'>Remove Tab</span></li>";
var tabs = $("#tabs").tabs();
var tabContentHtml = $("#tabs-1").html(); 
```

创建日期选择器

```
datepicker(); 
```

函数创建选择器

```
function datepicker(){
  $( ".rush" ).datepicker({
      changeMonth: true,
      numberOfMonths: 1,
      minDate: myDate,
      onSelect: function( selectedDate ) {
        // day is null for new tabs
        var day = $( ".rush" ).datepicker('getDate').getDate();
      }
  });
} 
```

单击按钮时添加新选项卡

```
$("#add_tab").click(function(){
        addTab();
});
function addTab() {
        var label = "Tab " + tabCounter,
            id = "tabs-" + tabCounter,
            li = $( tabTemplate.replace( /#\{href\}/g, "#" + id ).replace(/#\{label\}/g, label ) );

        tabs.find( ".ui-tabs-nav" ).append( li );
        tabs.append( "<div id='" + id + "'><p>" + tabContentHtml + "</p></div>" );
        tabs.tabs( "refresh" );
        // Create new datepicker into new tabs
        datepicker();
        tabCounter++;
    }
</script> 
```

代码html

```
<div id="tabs">
<ul>
    <li><a href="#tabs-1">Nunc tincidunt</a> <span class="ui-icon ui-icon-close">Remove Tab</span></li>
</ul>
<div id="tabs-1">
    <input type="text" class="rush" />
</div>
</div>
<button id="add_tab">Add Tab</button> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T03:49:50.433

尝试替换`$( ".rush" ).datepicker('getDate').getDate();`为`$(this).datepicker('getDate').getDate();`以避免函数中的选择混淆。

```
function datepicker(){
  $( ".rush" ).datepicker({
      changeMonth: true,
      numberOfMonths: 1,
      minDate: myDate,
      onSelect: function( selectedDate ) {
        // day is null for new tabs
        var day = $(this).datepicker('getDate').getDate();
      }
  });
} 
```

# c# - Threading.Timer 更新的值未反映在 datagridview 中

> ID：13023020
> 
> 赞同：2
> 
> 时间：2012-10-23T03:10:12.850
> 
> 标签：c#, winforms, datagridview, timer

我正在使用 VS express 2010 和 .Net 4.0。

我将 DataGridView 绑定到实现 INotifyPropertyChanged 的​​ BindingList。

更改的值通常反映在网格上，但在使用 Threading.Timers 执行更新作业时失败。

如下所示，除非单元格失去焦点，例如“最小化和最大化”或“网格被其他窗口覆盖”或“选择单元格”，否则该值会更新但不会显示。

[http://i.minus.com/jViIpKKeNNRrB.PNG](http://i.minus.com/jViIpKKeNNRrB.PNG)

我是新手。我已经搜索过，我相信 threading.timer 在更新 UI 方面很糟糕。但就我而言，我只是在更新值。

我厌倦了玩弱 threading.timer。任何其他轻量级计时器的建议将不胜感激！谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T03:40:41.387

在`Threading.Timer`更新 UI 方面并不“坏”，它只是在与 UI 线程不同的线程上触发其事件，并且由于 UI 必须在 UI 线程上更新，因此您遇到了困难。

您需要`Invoke`在 UI 线程上进行更新。

最简单的方法是：

```
myControl.Invoke((Action)(() =>
{
    myControl.Text = "Hello";
})); 
```

显然将您的代码替换为我的示例。

让我知道这个是否奏效。

# ruby-1.9.3 - Ruby 版本显示

> ID：13023025
> 
> 赞同：2
> 
> 时间：2012-10-23T03:10:51.660
> 
> 标签：ruby-1.9.3

当我输入`$ ruby -v`输出时，如下所示：

```
ruby 1.9.3p194 (2012-04-20 revision 35410) [x86_64-darwin11.4.0] 
```

过去，我曾经将输出视为：

```
ruby 1.9.3 
```

为什么我的 ruby​​ 版本现在出现更多数据？我是编程新手，想知道我是否搞砸了我的电脑。帮助！先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T03:34:34.900

您是否使用 RVM 来管理您的 ruby​​ 版本？如果不是，我会建议这样做。 [https://rvm.io/](https://rvm.io/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T03:27:11.230

很有可能，您在某处升级了 Ruby 安装（或者您的系统包管理器升级了）。你不太可能搞砸任何事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T03:48:09.643

听起来您没有使用 RVM，并且系统包管理器安装了更新。我强烈推荐使用 RVM，它会在未来为你省去大量的头痛。

[https://rvm.io/rvm/install/](https://rvm.io/rvm/install/)

如果你不熟悉它，它是 Wayne Seguin 创建的一个很棒的版本管理器。它允许您为不同的项目使用特定版本的 ruby​​ 和特定 gem。

# php - 如何防止重复条目被添加到数据库表中？

> ID：13023026
> 
> 赞同：1
> 
> 时间：2012-10-23T03:10:53.693
> 
> 标签：php, mysql, sql

我有这个 PHP/MySQL 脚本，它在我的数据库中添加了一条评论：

```
$SQL = "INSERT INTO blog_comments (article_id, author_name, comment, path, posted, status) ";
$SQL .= "VALUES (:article_id, :name, :comment, :next_path, Now(), 'Live');";

$STH = $DBH->prepare($SQL);
$STH->bindParam(':article_id', $article_id);
$STH->bindParam(':name', $name);
$STH->bindParam(':comment', $comment);
$STH->bindParam(':next_path', $next_path);
$STH->execute(); 
```

有什么方法可以修改它，使其不插入相同的`[author_name]`,`[article_id]`和`[comment]`到这个表中？我知道可以通过*将 UNIQUE 添加*到我的表中来创建一列，但不确定多列。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T03:12:43.993

您可以`UNIQUE`为多列添加约束

```
CREATE TABLE
(
.....
CONSTRAINT tab_uq UNIQUE (author_name, comment)
) 
```

或通过更改现有表，

```
ALTER TABLE myTable ADD UNIQUE (author_name, comment); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T03:13:53.300

将这些列称为复合主键。这样，它们将具有唯一的条目。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T03:14:12.760

您可以制作多个字段的唯一键

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-23T03:18:51.823

我想你可以在插入数据之前检查数据库的结果

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-23T03:25:34.400

你也可以查看`INSERT ... ON DUPLICATE KEY UPDATE` [dev.mysql.com](http://dev.mysql.com/doc/refman/5.1/en/insert-on-duplicate.html)

# java - C++ 和 Java 中的虚函数

> ID：13023028
> 
> 赞同：4
> 
> 时间：2012-10-23T03:10:59.987
> 
> 标签：java, c++, virtual-functions

我一直在阅读有关虚拟功能的信息并发现，

VF 用于继承类的多态性。

因此，如果一个类和派生类都具有相同的函数名，则 VF 会将相应的函数绑定到函数调用。

即，如果所讨论的函数在基类中被指定为虚拟函数，则将调用派生类的函数。如果它不是虚拟的，则将调用基类的函数。

默认情况下在 Java 中：所有函数都是虚拟 C++：非虚拟，可以在 Java 中通过使用 final、private 访问修饰符将其变为虚拟，而在 C++ 中使用 Virtual 关键字将函数变为虚拟。

基于上述理论，我编写了代码：

```
#include <iostream>

class base{
    public : 
        virtual void function1(){
            std::cout<<"BaseVirtual"<<std::endl;
        }

        void function2(){
            std::cout<<"Base NonVirtual"<<std::endl;
        }
};

class derieved: public base
{
    public : 
        void function1(){
            std::cout<<"Derieved Virtual"<<std::endl;
        }

        void function2(){
            std::cout<<"Derieved NonVirtual"<<std::endl;
        }
};

int main()
{
    base b1;
    derieved d1;

    b1.function1();
    b1.function2();

    d1.function1();
    d1.function2();    

} 
```

现在基于事实，如果它是一个虚函数，那么只调用派生类函数，我对上述程序的输出应该是：

```
BaseVirtual
Base NonVirtual
Derieved Virtual
Base NonVirtual 
```

然而，结果是：

```
BaseVirtual
Base NonVirtual
Derieved Virtual
Derieved NonVirtual 
```

这当然是对的。所以我的问题是输出完全违反了语句**如果有问题的函数在基类中被指定为虚拟，那么将调用派生类的函数。如果它不是虚拟的，则将调用基类的函数。**通话：

```
 d1.function2(); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-23T03:34:54.490

是的..当且仅当您尝试使用基类指针访问派生类对象时，虚拟的角色才会出现。

以你为例： -

```
#include <iostream>

class base{
    public : 
        virtual void function1(){
            std::cout<<"BaseVirtual"<<std::endl;
        }

        void function2(){
            std::cout<<"Base NonVirtual"<<std::endl;
        }
};

class derieved: public base
{
    public : 
        void function1(){
            std::cout<<"Derieved Virtual"<<std::endl;
        }

        void function2(){
            std::cout<<"Derieved NonVirtual"<<std::endl;
        }
};

int main()
{
    base *b1;
    derieved d1;

    b1=&d1;

    b1->function1();
    b1->function2();    
    return 0;
} 
```

输出：-

```
Derieved Virtual
Base NonVirtual 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-23T03:19:34.343

现在，您正在为每个`base`and创建一个对象`derived`，然后直接在这些对象上调用`function1`and 。`function2`在这些条件下，`virtual`（或缺乏）根本没有区别。

至少在 C++ 中，`virtual`为了意味着任何事情，您需要使用指向基类的指针（或引用），该基类引用可能是基类或派生类的对象：

```
base *b2 = &d1;

// invoke non-virtual function. Inovkes base::function1, because we're using 
// pointer to base.
b2->function1(); 

// invoke virtual function. Invokes derived::function2 because the pointee object
// is a derived.
b2->function2(); 
```

如果您（例如）有一组指向对象的指针，这尤其有用，其中这些指针所指的对象可能是几种不同类型中的任何一种。一个经典的例子是一个基`shape`类，从它派生出 , ,`line`等`circle`。`square`当您调用 each 的`draw`成员时，每个都绘制自己的形状。在这种特殊情况下，您的基类可能是一个抽象基类——该`draw`成员被声明为“纯虚拟”，这意味着您不能创建基`shape`类的对象，也不能创建派生类的实例，它具有覆盖`draw`成员函数：

```
class shape {
public:
    virtual void draw() = 0;
};

class circle : public shape { 
public:
    virtual void draw() { /* draw itself */ }
}; 
```

然后，在您的绘图程序中，您有一组（指向）用户创建的形状的集合，要全部绘制它们，您只需遍历该集合并告诉每个都绘制自己。更高级别的代码不需要知道或关心特定形状是否是圆形、正方形、三角形等。

```
for (int i=0; i<shapes.size(); i++)
    shapes[i]->draw(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T03:17:31.900

C++ 中的多态性需要使用指针。如果您将示例更改为：

```
base *b1 = new base();
base *d1 = new derived(); 
```

这实际上将利用虚拟机制。但是，您似乎对多态性背后的基本思想感到困惑。如果您将一个类定义为派生类，它当然会调用该类中定义的函数`derived`，同样使用`base`.

编辑：为了使这一点更明确，这里是输出和解释：

```
b1->function1(); //Will call base::function1()
b1->function2(); //Will call base::function2()
d1->function1(); //Will call derived::function1()
d2->function2(); //Will call derived::function2() 
```

所有多态性/虚拟调用都允许您将派生指针视为基类型，同时在其上调用（正确的）派生函数。因此，如果您有另一个功能，例如：

```
void foo(base& b)
{
    b.function1();
} 
```

然后传递`b1`会调用`base::function1()`，传递`d1`会调用`derived::function1()`。

# sql - 根据函数更改值的格式

> ID：13023034
> 
> 赞同：0
> 
> 时间：2012-10-23T03:11:39.853
> 
> 标签：sql

使用 SQL，我正在尝试对表中的数据进行 3 维分组，为此我需要一种方法来修改基于某些分组标准输出的值。然后我计划使用 GROUP 命令最终将行分组在一起。

用一个例子来描述更容易。

我跑

```
SELECT b as b_bin
   , l as l_bin
   , k_1AperMag1 as k1_bin
   , count(*) as num
FROM gpssource
WHERE b between -1.1 and 1.1
   and l between 9.9 and 11.6
   and k_1AperMag1 between 0 and 25 
GROUP BY b, l, k_1AperMag1 
```

得到一张桌子

```
b_bin               | l_bin              | k1_bin      | num
-1.0115976238979311 | 0.968853586216488  | 13.680575   | 1
-1.0299234557450931 | 11.591887279330654 | 16.761375   | 1
-0.3757959886541285 | 11.446711966673629 | 16.372013   | 1
-0.7250531677528679 | 11.357881248039163 | 17.16921    | 1
...and about 100 million more rows 
```

我基本上需要将每一行分成 b_bin、l_bin 和 k1_bin 的组。比如第一行需要进入ab bin -1.1 -> -1.0, l bin 0.9 -> 1.0 and k1 bin 13 -> 14。我在SQL中这样做的想法是把-1.0115976238979311改为-1.05, 0.968853586216488到 0.95 和 13.680575 到 13.5，然后使用 GROUP by 命令将它们实际分组到 bin 中并获取每组 bin 的计数。

我的最终结果将是：

```
b_bin | l_bin | k1_bin | num
-1.05 |  0.95 |   13.5 |  23
-0.95 |  0.95 |   13.5 |  20
-0.95 |  0.85 |   13.5 |  25
-0.95 |  0.85 |   12.5 |  23
and more, for each bin in b, l and k1. 
```

最终，我将它放入一个矩阵并为它创建一个图像，其中 b 和 l 是 x 和 y 坐标，k1 是 3d 空间中的一个切片，这导致了这样的事情（这是通过在 python 中对数据进行分箱创建的）： ![银河系密度图](../Images/758a5828a0239c5e9ffb7fe2898ed446.png)

不幸的是，我不确定如何将实际值更改为 bin 的中心值。这甚至可以用 SQL 实现吗？我在 python 中完成了所有这些工作，但出于逻辑原因，我需要使用 SQL 来对数据进行分类。

所以我的基本问题是：如何修改 SELECT 打印出的值。我可以使用 format() 以多种方式对其进行格式化，但据我所知，它不允许我选择自己的值来输出...... SQL 甚至有函数吗？我用谷歌搜索了一段时间，找不到太多关于这件事的...

任何指针将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T14:48:40.513

我已经写了一些 SQL 来获得你想要的结果：[http ://www.sqlfiddle.com/#!2/1a54a/1](http://www.sqlfiddle.com/#!2/1a54a/1)

以下是代码。我不确定这会表现如何，但您可以尝试一下：

```
SET @bbinSize = 0.1;
SET @lbinSize = 0.1;
SET @kbinSize = 1;
SELECT
    bbin,
    lbin,
    kbin,
    COUNT(*)
FROM
(
    SELECT
        a.b,
        a.l,
        a.k_1AperMag1,
        ((FLOOR(((1 / @bbinSize) * a.b)) * @bbinSize) + @bbinSize / 2) bbin,
        ((FLOOR(((1 / @lbinSize) * a.l)) * @lbinSize) + @lbinSize / 2) lbin,
        ((FLOOR(((1 / @kbinSize) * a.k_1AperMag1)) * @kbinSize) + @kbinSize / 2) kbin
    FROM

    MyTable a
    ) bins
GROUP BY 
    bbin,
    lbin,
    kbin 
```

更好的主意是创建三个新表 , ，`BBin`每个表都包含三列, , 。然后将每个 bin 填充到这些中。`LBin``KBin``Name``MinValue``MaxValue`

您的查询可能会变成这样：

```
SELECT
    BBin.Name,
    LBin.Name,
    KBin.Name
    COUNT(*) as MyCount
FROM
    MyTable
    LEFT JOIN BBin ON MyTable.B >= BBin.MinValue AND MyTable.B < BBin.MaxValue
    LEFT JOIN LBin ON MyTable.L >= LBin.MinValue AND MyTable.L < LBin.MaxValue
    LEFT JOIN KBin ON MyTable.KAperMag1 >= KBin.MinValue AND MyTable.KAperMag1 < KBin.MaxValue
GROUP BY
    BBin.Name
    LBin.Name
    KBin.Name 
```

我怀疑第二个选项会表现得更好，但我会把它留给你测试。

# javascript - 根据从选择标签中选择的选项选择表单操作

> ID：13023036
> 
> 赞同：0
> 
> 时间：2012-10-23T03:11:56.547
> 
> 标签：javascript

我对此很陌生，所以这可能不是解决这个问题的最佳方法。基本上，我试图在提交表单时运行三个 .php 文件之一。我运行哪个 .php 文件应该取决于用户从 id="periodDisplay" 的选择字段中选择的值。非常感谢一些帮助。

```
<script>

    function onSubmitForm(){

    if(document.getElementById("periodDisplayed").selectedIndex == 'This Week')
    {
        return document.selectDisplay.action ="thisWeek.php";
    }

    else if(document.getElementById("periodDisplayed").selectedIndex == 'This Month')
    {
        return document.selectDisplay.action ="thisMonth.php";
    }

    else if(document.getElementById("periodDisplayed").selectedIndex == 'All Workouts')
    {
            return document.selectDisplay.action ="allWorkouts.php";
    }

    else
    {
        return document.selectDisplay.action = "index.html";
    }
return true;
    }
</script>

<form id="selectDisplay" onsubmit="return onSubmitForm();">
    I want to see 
    <select id="unitDisplayed">
        <option>Distance</option>
        <option>Time</option>
    </select>
     for 
    <select id="periodDisplayed">
        <option>This Week</option>
        <option>This Month</option>
        <option>All Workouts</option>
    </select>

    <input type="submit"></input>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T03:13:30.963

您是否调试以查看 selectedIndex 返回的内容？它返回一个整数，而不是所选选项的值/文本。

为什么搞得这么复杂。将值设置为您要访问的页面并引用它。所有代码都简化为一行。

**HTML**

```
<select id="periodDisplayed">
    <option value="thisWeek.php">This Week</option>
    <option value="thisMonth.php">This Month</option>
    <option value="all.php">All Workouts</option>
</select> 
```

**JavaScript**

```
function onSubmitForm() {
    document.selectDisplay.action = document.getElementById("periodDisplayed").value;
    return true;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T03:16:10.170

应该

```
function onSubmitForm(){

if(document.getElementById("periodDisplayed").value == 'This Week')
{

    document.selectDisplay.action ="thisWeek.php";
    return true;
}
....

document.selectDisplay.action = "index.html";
return true;

} 
```

# hadoop - 收到 WARN ipc.Client: 在将文件复制到 HDFS 时中断等待向服务器发送参数

> ID：13023037
> 
> 赞同：1
> 
> 时间：2012-10-23T03:12:00.740
> 
> 标签：hadoop, hdfs

我写了一个 perl 脚本，在其中`copyFromLocal`调用来上传文件。当它运行时， `WARN ipc.Client: interrupted waiting to send params to server`会发生。我检查了刚刚上传的 HDFS 上的所有文件。看来都复制成功了。

有谁知道这个警告是什么意思？完整的警告信息

```
12/10/23 11:41:07 WARN ipc.Client: interrupted waiting to send params to server
java.lang.InterruptedException
        at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireSharedInterruptibly(AbstractQueuedSynchronizer.java:1279)
        at java.util.concurrent.FutureTask$Sync.innerGet(FutureTask.java:218)
        at java.util.concurrent.FutureTask.get(FutureTask.java:83)
        at org.apache.hadoop.ipc.Client$Connection.sendParam(Client.java:790)
        at org.apache.hadoop.ipc.Client.call(Client.java:1080)
        at org.apache.hadoop.ipc.RPC$Invoker.invoke(RPC.java:226)
        at $Proxy5.renewLease(Unknown Source)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.apache.hadoop.io.retry.RetryInvocationHandler.invokeMethod(RetryInvocationHandler.java:82)
        at org.apache.hadoop.io.retry.RetryInvocationHandler.invoke(RetryInvocationHandler.java:59)
        at $Proxy5.renewLease(Unknown Source)
        at org.apache.hadoop.hdfs.DFSClient$LeaseChecker.renew(DFSClient.java:1147)
        at org.apache.hadoop.hdfs.DFSClient$LeaseChecker.run(DFSClient.java:1159)
        at java.lang.Thread.run(Thread.java:662)
12/10/23 11:41:07 WARN hdfs.DFSClient: Problem renewing lease for DFSClient_-1491276805
java.io.IOException: java.lang.InterruptedException
        at org.apache.hadoop.ipc.Client.call(Client.java:1086)
        at org.apache.hadoop.ipc.RPC$Invoker.invoke(RPC.java:226)
        at $Proxy5.renewLease(Unknown Source)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.apache.hadoop.io.retry.RetryInvocationHandler.invokeMethod(RetryInvocationHandler.java:82)
        at org.apache.hadoop.io.retry.RetryInvocationHandler.invoke(RetryInvocationHandler.java:59)
        at $Proxy5.renewLease(Unknown Source)
        at org.apache.hadoop.hdfs.DFSClient$LeaseChecker.renew(DFSClient.java:1147)
        at org.apache.hadoop.hdfs.DFSClient$LeaseChecker.run(DFSClient.java:1159)
        at java.lang.Thread.run(Thread.java:662)
Caused by: java.lang.InterruptedException
        at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireSharedInterruptibly(AbstractQueuedSynchronizer.java:1279)
        at java.util.concurrent.FutureTask$Sync.innerGet(FutureTask.java:218)
        at java.util.concurrent.FutureTask.get(FutureTask.java:83)
        at org.apache.hadoop.ipc.Client$Connection.sendParam(Client.java:790)
        at org.apache.hadoop.ipc.Client.call(Client.java:1080)
        ... 12 more 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T13:16:51.763

根据我自己对这个问题的研究，它似乎与这个错误有关：[https ://issues.apache.org/jira/browse/HADOOP-6762](https://issues.apache.org/jira/browse/HADOOP-6762)

看起来已经尝试了各种修复程序，但实际上没有一个能令人满意地解决问题。无论如何，这只是一个警告，在我调查过的每个警告的情况下，所需的操作确实成功了。

# javascript - 使用 Javascript 动态创建 HTML 不起作用

> ID：13023044
> 
> 赞同：-4
> 
> 时间：2012-10-23T03:12:59.040
> 
> 标签：javascript, html, dynamic, radio

没有 jQuery。我正在尝试创建一个单选按钮，后跟带有 javascript 的文本。它在 document.writes 之后打印出所有内容。我认为我的引号有问题，但我无法解决。有人可以帮我解决这个问题吗？

```
function printarray (newarray, cnt) { 
  if (cnt < 2) { 
        document.getElementById('radio').style.display = 'none'; 
  } else { 
    for (var i = 0; i < newarray.length; i++) { 
      var cur_text = newarray[i]; 
      if (i == 0) { 
        var radio = '<input type="radio" name="bank" value="KeyBank" onclick="showChoice(this)">' + 'KeyBank'; 
      } else { 
        radio = radio + '<input type="radio" name="bank" value="<script>document.write(cur_text);</script>" onclick="showChoice(this)">' + "<script>document.write(cur_text)</script>;"; 
      } 
    } 
    document.getElementById('btn').style.display = 'none'; 
    var foo = document.getElementById('radio').innerHTML = radio; 
  } 
  document.getElementById('array').innerHTML = cnt; 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T03:18:57.287

第一个问题是，下面的行是错误的，

```
radio = radio + '<input type="radio" name="bank" value="<script>document.write(cur_text);</script>" onclick="showChoice(this)">' + "<script>document.write(cur_text)</script>;"; 
```

修正线，

```
radio = radio + '<input type="radio" name="bank" value="'+cur_text+'" onclick="showChoice(this)">' + cur_text; 
```

# objective-c - 如何使用平移手势旋转文本字段？

> ID：13023053
> 
> 赞同：2
> 
> 时间：2012-10-23T03:14:30.457
> 
> 标签：objective-c, ios, rotation, xcode4.3, uipangesturerecognizer

我正在考虑是否可以使用平移手势来旋转文本字段以进行更平滑的旋转。你能帮帮我吗？拜托。

**更新：**

```
 #import <UIKit/UIKit.h>

    KTOneFingerRotationGestureRecognizer.h

    @interface KTOneFingerRotationGestureRecognizer : UIGestureRecognizer 
    {

    }

    /**
     The rotation of the gesture in radians since its last change.
     */
    @property (nonatomic, assign) CGFloat rotation;

    @end

    KTOneFingerRotationGestureRecognizer.m

    #import "KTOneFingerRotationGestureRecognizer.h"
    #import <UIKit/UIGestureRecognizerSubclass.h>

    @implementation KTOneFingerRotationGestureRecognizer

    @synthesize rotation = rotation_;

    - (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
    {
       // Fail when more than 1 finger detected.
       if ([[event touchesForGestureRecognizer:self] count] > 1) {
          [self setState:UIGestureRecognizerStateFailed];
       }
    }

    - (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
    {
       if ([self state] == UIGestureRecognizerStatePossible) {
          [self setState:UIGestureRecognizerStateBegan];
       } else {
          [self setState:UIGestureRecognizerStateChanged];
       }

       // We can look at any touch object since we know we 
       // have only 1\. If there were more than 1 then 
       // touchesBegan:withEvent: would have failed the recognizer.
       UITouch *touch = [touches anyObject];

       // To rotate with one finger, we simulate a second finger.
       // The second figure is on the opposite side of the virtual
       // circle that represents the rotation gesture.

       UIView *view = [self view];
       CGPoint center = CGPointMake(CGRectGetMidX([view bounds]), CGRectGetMidY([view bounds]));
       CGPoint currentTouchPoint = [touch locationInView:view];
       CGPoint previousTouchPoint = [touch previousLocationInView:view];

       CGFloat angleInRadians = atan2f(currentTouchPoint.y - center.y, currentTouchPoint.x - center.x) - atan2f(previousTouchPoint.y - center.y, previousTouchPoint.x - center.x);

       [self setRotation:angleInRadians];
    }

    - (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
    {
       // Perform final check to make sure a tap was not misinterpreted.
       if ([self state] == UIGestureRecognizerStateChanged) {
          [self setState:UIGestureRecognizerStateEnded];
       } else {
          [self setState:UIGestureRecognizerStateFailed];
       }
    }

    - (void)touchesCancelled:(NSSet *)touches withEvent:(UIEvent *)event
    {
       [self setState:UIGestureRecognizerStateFailed];
    } 
```

在我的视图控制器上

```
 - (IBAction)handleRotate:(KTOneFingerRotationGestureRecognizer *)recognizer {    
    NSLog(@"Rotation");

    choosePhotoView = [recognizer view];
    [choosePhotoView setTransform:CGAffineTransformRotate([choosePhotoView transform], [recognizer rotation])];
    [choosePhotoView setTransform:CGAffineTransformMakeRotation(0)];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T03:59:38.627

您可以考虑`UITextField`作为`UIView`应用合适的`transform`. 你会从网上得到很多示例代码。您需要设置`textfield.transform`相同的属性。

# aviarc - 如何防止在第一次加载屏幕时执行客户端数据规则工作流？

> ID：13023060
> 
> 赞同：0
> 
> 时间：2012-10-23T03:15:12.670
> 
> 标签：aviarc

我遇到的问题是：我有一个数据规则，它根据正则表达式验证字段。我提供了数据规则的服务器端和客户端版本，并将它们绑定到适当的数据集事件。

问题是，当我加载包含记录创建表单的屏幕时，在用户有机会输入值之前，该字段被标记为无效。我认为这与最初绑定到文本编辑小部件的数据集字段有关。我只希望在用户输入值或提交屏幕后测试有效性。

首次加载屏幕时，如何防止数据规则运行？

**更新**

这是我的数据规则定义：

```
<data-rule name="{@name}"
           factory-class="com.aviarc.framework.datarule.xml.DefaultXMLDataRuleProviderFactoryImpl"
           datarule-class="com.aviarc.framework.datarule.workflow.WorkflowDataRule">
    <attributes>
        <attribute name="field" mandatory="y" type="field"/>
        <attribute name="valid-membership-number-regex" default="\d{8}[a-zA-Z\d]" mandatory="n" type="string">
            Valid membership number regex:

            - \d{8}   : match 8 digits
            - [a-zA-Z\d] : match any alphanumeric character
        </attribute>
    </attributes>
    <event name="onRowFieldChanged" workflow="workflows/set-membership-number-valid"/>
    <event name="onCurrentRowFieldChanged" client-action="actions/set-membership-number-valid"/>
</data-rule> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T03:33:57.640

对于像我正在使用的字段更改事件，您需要显式传递数据集绑定到的字段，如下所示：

```
<event name="onRowFieldChanged" field="{@field}" .../>
<event name="onCurrentRowFieldChanged" field="{@field}" .../> 
```

我认为我的数据规则必须在*任何*字段更改事件上执行，而不仅仅是它绑定到的字段。

# python - Python：通过匹配迭代到正则表达式

> ID：13023073
> 
> 赞同：0
> 
> 时间：2012-10-23T03:18:26.757
> 
> 标签：python, regex, sorting

我正在制作一个脚本来自动解析一些文本数据（具有复杂的结构）并将其插入 MySQL 数据库。

我希望有多个 for 循环，这些循环根据文件名的正则表达式匹配来迭代文件列表。最后，我将连接它们并将它们插入数据库。

这是我的正则表达式：

```
Trgx= re.compile('([a-zA-Z0-9]{3,4})_.*_.*_.*$');
Dtrgx= re.compile('[a-zA-Z0-9]{3,4}_[a-zA-Z0-9]{3,4}_([0-9]{10})_[0-9]{3}'); 
Mrgx= re.compile('.*_([a-zA-Z0-9]{3,4})_.*$'); 
Hrgx= re.compile('.*([0-9]{3}).csv$'); 
```

我的文件名如下所示：

```
ecd_cdd_2012102100_000.csv
ecd_cdd_2012102100_024.csv
ecd_hdd_2012102200_000.csv
ecd_hdd_2012102200_024.csv
ecd_hdd_2012102200_048.csv
ecd_avgt_2012102200_120.csv
ecd_avgt_2012102200_144.csv
ecd_avgt_2012102200_168.csv
ecd_mint_2012102200_192.csv
ecd_maxt_2012102200_144.csv
ecd_maxt_2012102200_168.csv
ecd_cdd_2012102200_000.csv
ecd_cdd_2012102200_024.csv 
```

每个表达式都捕获文件名的一个子集：

*   *Trgx*捕获第一部分（本例中每个实例中的“ecd”）
*   *Mrgx*捕获第二部分（“cdd”、“hdd”、“avgt”等）
*   *Dtrgx*捕获日期/时间段（如 2012102100）
*   *Hrgx* 捕获最后一部分（如 000 或 024，在扩展之前）

每个文件名都将匹配每个正则表达式，但`.group(1)`将填充不同的值。

我想使用正则表达式作为“分组”元素来遍历文件，以便以正确的顺序将它们连接在一起。

像这样的东西：

```
for fileName in fileNameList
    for each distinct value in  Trgx.group(1)
         for each distinct value in  Dtrgx.group(1)
              for each distinct value in Hrgx.group(1)
                     do whatever 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T03:28:15.590

将正则表达式组合在一起可能更容易

```
re_fn = re.compile('(?P<T>[a-zA-Z0-9]{3,4})_(?P<M>[a-zA-Z0-9]{3,4})_(?P<Dt>[0-9]{10})_(?P<H>[0-9]{3}).csv') 
```

并省去维护四个正则表达式的麻烦。

然后你可以做

```
groups = re_fn.match(fileName).groupdict()
# do stuff with groups['T'], groups['M'], groups['Dt'], groups['H'] 
```

# c++ - 处理大量接口实现的正确方法是什么？

> ID：13023076
> 
> 赞同：1
> 
> 时间：2012-10-23T03:18:39.960
> 
> 标签：c++, interface

对于我当前的一个项目，我定义了一个接口，我有大量的实现。您可以将其视为具有许多插件的插件接口。

这些“插件”各自处理网络协议中的不同消息类型。所以当我收到一条新消息时，我会遍历我的插件列表，看看谁能处理它，然后通过接口调用它们。

我正在努力解决的问题是如何将所有实现分配、初始化和“加载”到我的数组/向量/任何东西中。

目前我在 main() 中声明所有“插件”，然后调用“plugin_manager.add_plugin(&plugin);” 每一个人。这似乎不太理想。

所以，实际的问题是：1.这种事情有标准化的方法吗？2\. 有没有办法定义一个预加载插件的数组（全局？）？3\. 我是不是完全走错了路？对于这类问题，还有其他（更好的？）架构选项吗？

谢谢。

编辑：

这编译（请原谅丑陋的代码）......但它似乎有点像一个黑客。另一方面，它解决了分配问题，并清理了 main() ......这是一个有效的解决方案吗？

```
class intf
{
public:
    virtual void t() = 0;
};

class test : public intf
{
public:
    test(){}
    static test* inst(){ if(!_inst) _inst = new test; return _inst; }
    static test* _inst;
    void t(){}
};
test* test::_inst = NULL;

intf* ints[] =
{
    test::inst(),
    NULL
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T03:49:34.410

在容器中存储某种形式的智能指针。动态分配插件并在容器中注册，以便以后使用。

您的解决方案的一种可能方法是，如果您有某种形式的插件可以解码的消息 id，则使用从该 id 到处理它的插件的映射。这种方法允许您在给定输入消息的情况下*快速查找插件。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T04:50:11.190

编写更少代码的一种方法是为实例化函数使用模板。那你只需要写一个放到接口里面，而不是每个实现类一个函数。

```
class intf
{
public:
    virtual void t() = 0;

    template<class T>
    static T* inst()
    {
        static T instance;
        return &instance;
    }
};

class test : public intf { ... };

intf* ints[] =
{
    intf::inst<test>(),
    NULL
}; 
```

上面的代码还可以解决您代码中的两个错误：一个是内存泄漏，在您的旧`inst()`函数中您分配但您从未释放；另一个是构造函数将*静态*成员设置为`NULL`.

其他提示是阅读更多关于“单例”模式的信息，这就是你所拥有的。它在某些情况下可能很有用，但通常不建议这样做。

# objective-c - 用 NSOperation 做这件事的等价物是什么？

> ID：13023079
> 
> 赞同：0
> 
> 时间：2012-10-23T03:18:59.800
> 
> 标签：objective-c, nsoperation, xcode4.5, nsoperationqueue

```
[self performSelector:@selector(stopPulling) withObject:nil afterDelay:0.01]; 
```

代码很好。我只是认为使用 NSOperation 和 block 应该是未来的方向。

我熟悉NSOperation。我只想对块和 NSOperation 做同样的事情。

我已经可以用 GCD 做到这一点：

```
int64_t delayInSeconds = 2.0;
dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, delayInSeconds * NSEC_PER_SEC);
dispatch_after(popTime, dispatch_get_main_queue(), ^(void){
    <#code to be executed on the main queue after delay#>
}); 
```

来吧。有什么可以在 GCD 中完成而在 NSOperation 中无法更轻松地完成的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T05:31:21.007

我最终做了这个：

```
#import "BGPerformDelayedBlock.h"

@implementation BGPerformDelayedBlock

+ (void)performDelayedBlock:(void (^)(void))block afterDelay:(NSTimeInterval)delay
{
    int64_t delta = (int64_t)(1.0e9 * delay);
    dispatch_after(dispatch_time(DISPATCH_TIME_NOW, delta), dispatch_get_main_queue(), block);
}

+(void)performSlightlyDelayedBlock:(void (^)(void))block
{
    [self performDelayedBlock:block afterDelay:.1];
}
@end 
```

它基于[如何在延迟后触发块中的答案，例如 -performSelector:withObject:afterDelay:?](https://stackoverflow.com/questions/4139219/how-do-you-trigger-a-block-after-a-delay-like-performselectorwithobjectafter)

我认为它不应该是一个类别。

奇怪的是我最终使用了 GCD。

但是，使用它很简单。我只是做：

```
 [BGPerformDelayedBlock performSlightlyDelayedBlock:^{
        [UIView animateWithDuration:.3 animations:^{
            [self snapToTheTopOfTheNonHeaderView];
        }];
    }]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T05:36:41.897

NSOperationQueue 不提供延迟执行的机制。使用 GCD 或 NSTimer。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T06:31:37.167

您的代码类似于`NSTimer`在 0.01 秒后使用设置选择器，没有重复。这将在主线程上调用。

`NSOperation`或块用于在后台执行操作。您可以使用这些来代替`performSelectorInBackground`.

如果您需要在后台工作，那就去做吧。有很多教程可以用来学习 'NSOperation`using 'NSOperationQueue`和 blocks.

# windows-8 - 在 Windows 8 (HTML + JS) 应用程序中打印从 JSON 数据源获取的 ListView 项目

> ID：13023080
> 
> 赞同：4
> 
> 时间：2012-10-23T03:19:03.027
> 
> 标签：windows-8, winjs

我有一个使用 HTML 和 JavaScript 构建的 Windows 8 应用程序。它有一个 ListView 显示从 JSON 数据源生成的位置的动态列表。

我正在使用[MSDN 示例中的 Print Contract 代码（显示如何打印具有静态内容的页面）](http://msdn.microsoft.com/en-us/library/windows/apps/hh761451.aspx)来实现此应用程序的打印功能。打印时，ListView 中的列表仅显示一半。

当内容很大时，如何从 ListView 打印完整列表并使其分布在多个页面上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T17:18:48.507

这里的技巧是向[MSApp.getHtmlPrintDocumentSource 方法](http://msdn.microsoft.com/en-us/library/windows/apps/hh831251.aspx)提供一个正确表示您想要打印的内容的文档，这不一定与页面上显示的内容相同。

您引用的示例只是将当前*文档*对象传递给 getHtmlPrintDocumentSource，这是最简单的打印方式，但正如您所注意到的，它可能无法准确地为您提供所需的结果。

[正如Kraig Brockschmidt 关于 HTML 和 JavaScript Windows Store 应用程序的优秀（免费）电子书的](http://blogs.msdn.com/b/microsoft_press/archive/2012/10/29/free-ebook-programming-windows-8-apps-with-html-css-and-javascript.aspx)第 15 章所述，自定义输出的一种简单方法是为打印媒体类型添加媒体查询，并使用 CSS 修改页面，如下所示：

```
@media print {
    .win-backbutton {
        display: none;
    }

    .watermark {
        display: none;
    }

    .titlearea {
        font-size: xx-large;
    }
} 
```

但是，这可能不会解决您面临的问题。在您的情况下，最有效的方法可能是创建一个单独的页面，该页面提供更易于打印的输出。

例如，基于打印合同示例中的场景 4，如果我将名为 print.html 的 HTML 页面放在我的应用程序的根目录中，我可以使用以下代码引用它（注意 ms-appx:/// 方案，指的是我的应用程序包中的内容）：

```
// set the alternate content 
var alternateLink = document.createElement("link");
alternateLink.setAttribute("id", "alternateContent");
alternateLink.setAttribute("rel", "alternate");
alternateLink.setAttribute("href", "ms-appx:///print.html");
alternateLink.setAttribute("media", "print");

document.getElementsByTagName("head")[0].appendChild(alternateLink); 
```

现在，当调用设备超级按钮时，我的备用内容页面将作为打印源提供，而不是当前页面。您可以让备用页面从 JSON 源加载内容并以打印机友好的方式呈现，这可能与页面上内容的显示方式不同。

有关 Windows 应用商店应用开发的更多信息，请注册[Generation App](http://bit.ly/gd30tolaunch)。

# java - 石头剪刀布游戏

> ID：13023082
> 
> 赞同：0
> 
> 时间：2012-10-23T03:19:08.610
> 
> 标签：java

我是编程新手，我一直在尝试创建一个简单的石头剪刀布游戏。基本上，它使用一个while循环并询问用户他们是否想玩（或继续）。一旦他们不想再这样做，程序就必须打印出游戏总数、获胜次数、失败次数和获胜百分比。我已经让整个程序运行起来，只是它总是说获胜的百分比是 0.0%，即使它不是。我已经使用了 if 语句来避免除以零错误。我没有收到任何运行时或编译器错误，所以我要么遗漏了某些东西，要么就是找不到逻辑错误。我想继续使用扫描仪。

```
import java.util.Scanner; 

public class RockPaperScissors {

/*
 * Program allows user to play Rock, Paper and Scissors as many times as desired by entering Y until they enter N.
 * Program will print amount of games played, amount lost, amount won and percentage won. 
 * User must enter "Y", "N", "Rock", "Paper" or "Scissors" with correct capitalization and spelling. 
 */ 

public static void main(String[] args) {

    Scanner input = new Scanner(System.in);

    int playerWins = 0;
    int compWins = 0;
    int gamesPlayed = 0;

    while (true) {
        System.out.println("Do you want to play Rock Paper Scissors (Y/N): ");
        String play = input.nextLine();

        // user terminates game and program prints number of wins, losses and percentage of wins.
        if (play.equals("N")) {

            System.out.println("You played a total of " + gamesPlayed + " matches against the computer");
            System.out.println("The computer won " + compWins + " matches");
            System.out.println("You won " + playerWins + " matches");

            // 0% wins when no games are played.
            if (gamesPlayed == 0) { 
                System.out.println("You won 0% of the time!");
                break;

            } else if (gamesPlayed > 0) {
                double totalWins = (int)(playerWins / gamesPlayed) * 100;
                System.out.println("You won " + totalWins + "% of the time!");
                break;
            }

        } else if ((!play.equals("N")) && (!play.equals("Y"))) {
            System.out.println("Invalid entry");
        } else {

            System.out.println("Welcome to Rock, Paper and Scissors!");
            System.out.print("Select \"Paper\", \"Rock\" or \"Scissors\": ");
            String decision = input.nextLine();
            System.out.println("Your selection: " + decision);

            // random number generator producing integer values between 1 to 3 for computer's choices.
            // 1 is for Rock, 2 is for Paper and 3 is for Scissors.
            int num = (int)(Math.random() *  (3-0) + 1);

            switch (num) {

                // Computer picks Rock
                case 1:
                    if (decision.equals("Rock")) {
                    System.out.println("Tie, you and the computer selected rock");
                    gamesPlayed++;
                } else if (decision.equals("Paper")) {
                    System.out.println("You win, paper beats rock!");
                    gamesPlayed++;
                    playerWins++;
                } else if (decision.equals("Scissors")) {
                    System.out.println("Computer wins, rock beats scissors!");
                    gamesPlayed++;
                    compWins++;
                } else {
                    System.out.println(decision + " is not a valid input");
                }
                break;
                case 2:
                    // computer picks Paper
                    if (decision.equals("Rock")) {
                    System.out.println("Computer wins, rock beats paper!");
                    gamesPlayed++;
                    compWins++;
                } else if (decision.equals("Paper")) {
                    System.out.println("Tie, you and the computer selected paper");
                    gamesPlayed++;
                } else if (decision.equals("Scissors")) {
                    System.out.println("You win, scissors beats paper");
                    gamesPlayed++;
                    playerWins++;
                } else {
                    System.out.println(decision + " is not a valid input");
                }
                break;
                case 3:
                    // computer picks Scissors
                    if (decision.equals("Rock")) {
                    System.out.println("You win, rock beats scissors");
                    gamesPlayed++;
                    playerWins++;
                } else if (decision.equals("Paper")) {
                    System.out.println("Computer wins, scissors beats paper");
                    gamesPlayed++;
                    compWins++;
                } else if (decision.equals("Scissors")) {
                    System.out.println("Tie, you and the computer selected scissors");
                    gamesPlayed++;
                } else {
                    System.out.println(decision + " is not a valid input");
                }
                break;

            } 
        }

    }

} 
```

}

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T03:23:36.770

问题出在`double totalWins = (int)(playerWins / gamesPlayed) * 100;`. 由于`playerWins`和`gamesPlayed`都是整数类型（特别`int`是类型），Java 正在执行“整数除法”，它返回除法的商作为结果并忽略余数。因此，为了防止它这样做，您最好将该行更改为：

```
double totalWins = (playerWins * 100.0) / gamesPlayed;
//                 /------------------\
// This converts the `playerWins` to a `double` and does the division as you expect 
```

# html - 链接颜色在 Chrome 中改变，但在 Firefox 和 IE 中没有

> ID：13023093
> 
> 赞同：0
> 
> 时间：2012-10-23T03:20:43.523
> 
> 标签：html, css

如前所述，链接颜色仅在 Chrome（我的默认浏览器）中发生变化。

这是我放在外部 CSS 文件中的代码：

```
a:link {text-decoration: none;}
a:hover { color:darkgray; }
a:active { color:darkgray; }  /* Don't underline links */

a:visited {color:darkgray;text-decoration: none;} 
```

知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T03:37:23.897

好的，所以我发现了问题。在 chrome 中，我的文本颜色也覆盖了我的链接，但如您所见，我实际上并没有在 a:link 中设置链接颜色

仍然感谢大家的投入

a：链接{颜色：深灰色；文字装饰：无；}

a：悬停{颜色：深灰色；}

a：活动{颜色：深灰色；} /* 不要在链接下划线 */

a:visited {color: darkgray ;text-decoration: none ;}

# php - if (x > 0) 输出 0 如何什么都不输出？

> ID：13023094
> 
> 赞同：2
> 
> 时间：2012-10-23T03:21:07.883
> 
> 标签：php, if-statement, foreach

我希望我没有重复这个主题我确定它在这里我只是找不到它。

我有一个产品有一堆尺寸，这些尺寸的可用性存储在数据库中，例如 0 = 没有库存，1 和更多 = 有库存。

当不可用时，我希望大小不显示在下拉列表中。当 1 个或更多可用时，它们会显示...我可以在 1 个或更多时显示大小，但在 =“0”时显示“0”，我理解但不知道如何不显示。认为我在那里的解释过于复杂：S

```
$size_available = "";
$size_6w = $row["size_6w"];
$size_7w = $row["size_7w"];
$size_8w = $row["size_8w"];

$dropdown = "<select class='product-select' name='size' id='size'>";

if ($size_6w > 0) {
    $size_6w = "6w";
}
if ($size_7w > 0) {
    $size_7w = "7w";
}
if ($size_8w > 0)
    $size_8w = "8w";
}

$size=array("$size_6w","$size_7w","$size_8w");

foreach ($size as $size_available)
{
    $dropdown .= "<option value='$size_available'>$size_available</option>";
}

$dropdown .= "\r\n</select>"; 
```

输出是一个简单的回声：

```
echo $dropdown 
```

我应该使用 else 语句吗？如果是这样，你会如何建议我用它来输出什么？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T03:25:53.743

检查大小是否大于或等于 1，然后才向用户显示选项。

以下是我将如何实现它：

```
<?php

$sizes = array(
    '6w' => $row["size_6w"],
    '7w' => $row["size_7w"],
    '8w' => $row["size_8w"]
);

$dropdown = "<select class='product-select' name='size' id='size'>";

foreach ($sizes as $size => $available)
{
    if ($available >= 1)
        $dropdown .= "<option value='$size'>$size</option>\n";
}

$dropdown .= "\r\n</select>"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T03:35:38.250

这就是我要做的。

```
$sizes = array();
if ($row["size_6w"] > 0) $sizes[] = '6w';
if ($row["size_7w"] > 0) $sizes[] = '7w';
if ($row["size_8w"] > 0) $sizes[] = '8w';

if (!empty($sizes)) {
    $options = "<select class='product-select' name='size' id='size'>\n";
    foreach ($sizes as $size)
        $options .= "<option value='$size'>$size</option>\n";
    $options .= "</select>\n";
} else $options = "<div id='size' class='noResult'>0</div>\n"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T03:36:45.643

您可以编写一个检查特定值的循环，而不是使用一堆条件`$row`：

```
// this attempts to simulate the database row data
$row = array(
        'size_6w' => 1,
        'size_7w' => 0,
        'size_8w' => 2,
        'x' => 123, // field thrown in to illustrate the workings
);

$sizes = array();
foreach ($row as $field => $value) {
        // column should start with 'size_' and the value should be more than 0
        if (0 != strncmp($field, 'size_', 5) || !$value) {
                continue;
        }
        $size = substr($field, 5);
        echo sprintf('<option value="%s">%s</option>', $size, $size);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T03:31:02.803

```
if ($size_6w > 0) {
    $size_6w = "6w";
    array_push($size, "6w");
    }
if ($size_7w > 0) {
    $size_7w = "7w";
    array_push($size, "7w");
    }
if ($size_8w > 0) {
    $size_8w = "8w";
     array_push($size, "8w");
    }

//$size=array("$size_6w","$size_7w","$size_8w"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-23T03:31:14.227

```
$size=array($size_6w,$size_7w,$size_8w);
if(!empty($size))
{
foreach ($size as $size_available)
        {
          if(!empty($size_ailvaable)
          {
            $dropdown .= "<option value='$size_available'>$size_available</option>";
          }
        }
}
}
$dropdown .= "\r\n</select>"; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-23T03:35:53.600

如果我做对了，您可能希望像这样更改您的代码：

```
$size = array(); //initialize size array
if ($size_6w > 0) {
    $size_6w = "6w";
    $size[] = $size_6w;
}
if ($size_7w > 0) {
    $size_7w = "7w";
    $size[] = $size_7w;
}
if ($size_8w > 0) {
    $size_8w = "8w";
    $size[] = $size_8w;
}

$size=array("$size_6w","$size_7w","$size_8w"); //remove this line in your code. 
```

`$size`这样，如果它的值大于 0 ，它只会将大小包含到您的数组中。

# java - 敌人破坏 slick2d

> ID：13023096
> 
> 赞同：1
> 
> 时间：2012-10-23T03:21:30.653
> 
> 标签：java, slick2d

我目前正在使用 Slick2D 和我目前设置它的方式在 java 中开发一种平台游戏，敌人是 ArrayList 中的 Enemy 对象。玩家可以向它们射击小圆圈（也包含在 ArrayList 中），如果它们连接起来，应该发生的是敌人“死亡”。这就是我遇到麻烦的地方。我该如何摆脱这样的物体？我已经尝试在 for each 循环中将它们从数组中删除，但是由于它仍在搜索所述数组（我认为），这会引发异常。

```
for (Bullet bullet : bullets) {
  for (Enemy enemy : enemies) {
    if (bullet.intersects(enemy) {
      bullets.remove(bullet);
      enemies.remove(enemies);
    }
  }
} 
```

那没有用，所以现在我试图制作一个子弹和敌人的索引数组，然后在循环后删除它们，如下所示：

```
for (int i = 0; i < bullets.size(); i++) {
  for (int z = 0; z < enemies.size(); z++) {
    if (bullets.get(i).intersects(enemies.get(z).getPoly())) {
      bRemove.add(i);
      eRemove.add(z);
    }
  }
}

for (Integer i : bRemove) {
  bullets.remove(i);
}

for (Integer i : eRemove) {
  enemies.remove(i);
} 
```

现在似乎什么都没有发生。有谁知道我应该怎么做？这是主类的全部内容：

```
package ca.wmc.BasicPlatform;

import java.lang.Math;
import java.util.ArrayList;

import org.newdawn.slick.Animation;
import org.newdawn.slick.AppGameContainer;
import org.newdawn.slick.BasicGame;
import org.newdawn.slick.geom.Circle;
import org.newdawn.slick.GameContainer;
import org.newdawn.slick.Graphics;
import org.newdawn.slick.Input;
import org.newdawn.slick.Image;
import org.newdawn.slick.SlickException;
import org.newdawn.slick.SpriteSheet;
import org.newdawn.slick.geom.Polygon;

public class Game extends BasicGame  {

Player quote;
public BlockMap map;
private boolean start;
private int startCount;
private boolean lost;
private int lostCount;
private int hpTime = 0;
private ArrayList<Enemy> enemies;
private ArrayList<Bullet> bullets;
private int reload = 0;
private final double a = 2;
private int t = 0;

public Game() {
    super("Super Simple Platform");
}

public void init(GameContainer container) throws SlickException {
    container.setVSync(true);
    container.setTargetFrameRate(60);
    map = new BlockMap("tiled/newmap.tmx");
    quote = new Player("tiled/Quote.gif", 320, 320, 3, -8);
    enemies = new ArrayList<Enemy>();
    enemies.add(new Enemy("tiled/King.gif", 50, 0, -8, 26, 32));
    enemies.add(new Enemy("tiled/Quote.gif", 200, 150, -8, 28, 32));
    start = false;
    lost = false;
    bullets = new ArrayList<Bullet>();
}

public void update(GameContainer container, int delta) throws SlickException {
    if (!start) {
        if (container.getInput().isKeyDown(Input.KEY_Z)) {
            start = true;
        }
    } else {
        if (!lost) {

            ArrayList<Integer> eRemove = new ArrayList<Integer>();
            ArrayList<Integer> bRemove = new ArrayList<Integer>();

            quote.update(container, a, t, delta);
            for (Enemy enemy : enemies) {
                enemy.update(quote, a, t);
            }

            if (t == 5) {
                t = 0;
            } else {
                t++;
            }

            if (container.getInput().isKeyDown(Input.KEY_X) && reload == 0) {
                if (quote.getCurAnimation() == quote.right()) {
                    bullets.add(new Bullet(quote.getXPos() + 28, quote.getYPos() + (int)(20 * Math.random() - 22) + 25, "r"));
                } else {
                    bullets.add(new Bullet(quote.getXPos() + 28, quote.getYPos() + (int)(20 * Math.random() - 22) + 25, "l"));
                }
                reload = 10;
            }

            if (reload > 0) {
                reload--;
            }

            for (Bullet bullet : bullets) {
                if (bullet.getDirection()) {
                    bullet.setCenterX(bullet.getCenterX() + 10);
                } else { 
                    bullet.setCenterX(bullet.getCenterX() - 10);
                }
            }

            for (Enemy enemy : enemies) {
                if (quote.getPoly().intersects(enemy.getPoly()) && hpTime > 50 && quote.getHP() != 0) {
                    quote.setHP(quote.getHP() - 1);
                    hpTime = 0;
                    if (quote.getHP() <= 0) {
                        lost = true;
                    }
                }
            }

            hpTime++;

            if (startCount <= 100) {
                startCount++;
            }

            for (int i = 0; i < bullets.size(); i++) {
                for (int z = 0; z < enemies.size(); z++) {
                    if (bullets.get(i).intersects(enemies.get(z).getPoly())) {
                        bRemove.add(i);
                        eRemove.add(z);
                    }
                }
            }

            for (Integer i : bRemove) {
                bullets.remove(i);
            }

            for (Integer i : eRemove) {
                enemies.remove(i);
            }
        }

        if (quote.getYPos() > 640) {
            lost = true;
        }

    }
}

public void render(GameContainer container, Graphics g) throws SlickException{
    g.drawImage(new Image("apsci.jpg"), 0, 0);
    BlockMap.tmap.render(0, 0);
    g.drawAnimation(quote.getCurAnimation(), quote.getXPos(), quote.getYPos());
    for (Enemy enemy : enemies) {
        g.drawAnimation(enemy.getCurAnimation(), enemy.getXPos(), enemy.getYPos());
    }

    for (Circle bullet : bullets) {
        g.draw(bullet);
    }

    g.drawString("HP: " + quote.getHP(), 10, 450);

    if (!start) {
        g.drawString(getTitle(), 150, 0);
        g.drawString("Controls: arrow keys to move, Z to jump, X to fire.", 150, 50);
        g.drawString("Defeat the evil.          Press Z to start.", 150, 100);
    }

    if (startCount < 100) {
        for (Enemy enemy : enemies) {
            g.drawString("The Evil -->", enemy.getXPos() - 125, enemy.getYPos() + 10 + (int)(2 * Math.random()));
        }
        g.drawString("<-- You", quote.getXPos() + 50, quote.getYPos() + 10 + (int)(2 * Math.random()));
    }

    if (lost) {
        g.drawString("You have lost.", 200, 210);
    }
    if (lostCount > 150) {
        g.drawString("Game over.", 200, 260);
    }
    if (lostCount > 200) {
        g.drawString("If that wasn't already obvious.", 200, 310);
    }
}

public static void main(String[] args) throws SlickException{
    // TODO Auto-generated method stub
    try {
        AppGameContainer app = new AppGameContainer(new Game(), 640, 480, false);
        app.start();
    } catch (SlickException e) {
        e.printStackTrace();
    }

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T03:34:47.250

正如您所指出的，您不能使用 for-each 循环修改某些内容并继续迭代。相反，您需要使用`Iterator`:[请参阅此处](http://docs.oracle.com/javase/6/docs/api/java/util/ListIterator.html)。

由于在 an 中删除`ArrayList`还需要将删除对象之后的每个对象左移一个索引（因此是一个`O(n)`操作），我建议您可能还想考虑使用 a`LinkedList`代替。

关于样式，您还应该始终`Collection`通过它们的接口而不是它们的实现来引用对象。那是，

```
ArrayList<Integer> eRemove = new ArrayList<Integer>(); 
```

应该

```
List<Integer> eRemove = new ArrayList<Integer>(); 
```

这样，如果您决定更改为 LinkedList，您只需将代码更改为：

```
List<Integer> eRemove = new LinkedList<Integer(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T03:33:49.250

是的，尝试从您当前正在迭代的 ArrayList 中删除一个元素必然会导致问题。

您确定您的“相交”代码有效吗？快速浏览一下，替换方法似乎是您所需要的。如果它没有做任何事情，也许它没有在应该找到交叉点的时候。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T03:43:04.397

您当前的代码应至少正确删除第一个子弹和第一个敌人。如果不是，则`intersects`方法有问题。

删除第一个项目符号后，它之后的所有元素都会移动，因此您将删除错误的项目符号。

尝试这个：

```
for (int i = 0; i < bullets.size(); i++) {
        boolean hit = false;
        for (int z = 0; z < enemies.size(); z++) {

            if (bullets.get(i).intersects(enemies.get(z).getPoly())) {
                hit = true;
                enemies.remove(z);
                z--;
            }
        }

        if (hit) {
            bullets.remove(i);
            i--;
        }
} 
```

你应该担心 ArrayList 与 LinkedList 的性能，直到你有成千上万的子弹和敌人。

# javascript - “数学”是嵌入对象中的未定义错误

> ID：13023098
> 
> 赞同：4
> 
> 时间：2012-10-23T03:21:30.470
> 
> 标签：javascript, jquery, ajax, internet-explorer, youtube

我使用 ajax 在页面加载时加载 youtube 视频

```
$(document).ready(function(){
     $.ajax({
        url : '/myurl',
        type:"post",           
        data:{"d": $('#d_id').val()},  
        async:false,
        success:function(data){ 
            $('#container').html(data);

            //data is an emebed string

          //This is what i get from PHP page
            /*<embed class="frame"  width="850" scrolling="no" height="415" frameborder="0" src="http://www.youtube.com/embed/' . $k[0] . '?showinfo=1&amp;modestbranding=1&amp;autoplay=1&amp;rel=0&amp;iv_load_policy=3&amp;cc_load_policy=1&amp;loop=1&amp;playlist=' . $k[0] . '&amp;wmode=transparent" frameborder="0""  allowfullscreen="yes" wmode="Opaque"></embed> */
        }    
    });
}); 
```

在除 IE 之外的所有浏览器中工作

![在此处输入图像描述](../Images/1f8e403feb9a1364966ebbd6c2b7e58b.png)

根据屏幕截图，我收到错误“数学未定义”如果我将嵌入更改为 iframe，我会遇到更严重的错误，例如“__flash__removecallback is undefined”。

**更新**

如果我使用 emebed，整个事情在 IE8 中都不起作用

有人帮助我 IE 让我发疯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T10:22:44.907

最后我得到了这个

在服务器端（即 Ajax 响应）

```
if (preg_match('/MSIE 9.0/', $_SERVER['HTTP_USER_AGENT'])) { /*for IE 9.0 generate with objace tag*/ ?>
     <object type="application/x-shockwave-flash" data="VIDEO_URL">
      <param name="movie" value="VIDEO_URL" />
      </object>
 <?php } else { /*rest of all browsers,in iframe*/ ?>
      <iframe src="VIDEO_URL"></iframe>
 <?php } ?> 
```

# python - 我可以在 django 应用程序中使用 apache mahout

> ID：13023103
> 
> 赞同：1
> 
> 时间：2012-10-23T03:21:54.413
> 
> 标签：python, django, apache, mahout

我正在 python/django 中构建 Web 应用程序。

我需要对一些数据应用一些机器学习算法。我知道有可用于 python 的库。但是我公司里有人说 Mahout 非常适合。

我想知道我可以将它与 python/django 一起使用吗？或者我应该只使用 python 库来做到这一点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T05:10:48.103

我认为您可以使用 mahout 构建一个独立的应用程序，而您的 python 应用程序只是一个客户端。

# jquery - 如何在 show.gsp 上显示计算字段？

> ID：13023109
> 
> 赞同：0
> 
> 时间：2012-10-23T03:22:10.267
> 
> 标签：jquery, ajax, grails, service, gsp

我在处理计算的非存储字段时遇到了一些困难。我想展示我的实际领域类，但它们有很多领域。因此，让我们考虑以下域类：

```
class ImportantCalculation {
 BigDecimal parameter1
 BigDecimal parameter2
 BigDecimal parameter3
 BigDecimal result1
 BigDecimal result2
 ...
} 
```

result1 和 result2 是计算字段，依赖于使用 parameter1、parameter2 和 parameter3 的计算子结果。使用一种数学符号（实际计算涉及许多类和数据库查询）：

```
subresult1=function(parameter1)
subresult2=function(parameter2,parameter3)
result1=function(subresult1,subresult2)
result2=function(parameter1,subresult2) 
```

在 create.gsp 中，此计算在由服务调用的 Java 类中执行。该服务由控制器使用。此控制器由 JavaScript 文件中的自动完成 jQuery 元素调用，然后显示在相应的字段中：

```
Calculations.java -> CalculationsService.groovy -> CalculationsController -> calculations.js -> GSP view. 
```

GSP 视图包含显示子结果的字段。

存储这个子结果会更容易，但因为它可以计算，所以没有必要，但我不能用最终结果来做到这一点。

所以，我需要在 show.gsp 视图和 edit.gsp 视图中显示这些子结果。但我不知道该怎么做。我尝试使用 Ajax 和 jQuery，但我是这些工具的新手。

请帮我。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T14:06:13.687

在您的 gsp 中，您可以使用 ajax 调用来为您计算结果并以 JSON 形式返回的控制器。在您的 gsp 中，您将拥有类似以下的 javascript 代码：

```
 $.ajax({
        var value = "any value to be passed as param";
        url: "${createLink(controller: 'calculations', action: 'calculate')}",
        data: {key:value}, //in your controller, look for the parameter "key" in params map
        dataType: 'json',
        success: function(data) {
            if (data) {
             //do something with data (the json object rendered by the action 'calculate')   
            }
        }

    }); 
```

在您的控制器中，您将执行计算结果或获取已存储在某处的结果的操作，例如：

```
def calculate() {
    def result = calculatorService.doSomething()
    render result as JSON
} 
```

带有“render”命令的行是将结果发送回调用者（您的 javascript 'success' 函数）。

[您可以在此处](http://www.kromhouts.net/blog/grails/updating-multiple-page-elements-with-grails-and-ajax/)和[此处](http://moongrails.blogspot.com.br/2008/12/grails-ajax-powered-validation.html)查看相同内容的示例。

# mysql - 在工作台迁移期间无法连接到 MySQL。无法连接到 MySQL (10061)（代码 2003）

> ID：13023111
> 
> 赞同：3
> 
> 时间：2012-10-23T03:22:28.437
> 
> 标签：mysql, mysql-workbench, database-migration

我正在使用 MySql Workbench 连接到远程 MySQL 实例。我有一个连接设置，允许我查询表、创建表......但是当我尝试将数据从 Microsoft SQL Server 迁移到 MySQL 时它失败了。

步骤如下： 数据库 -> 迁移... 输入 Source DBMS 的连接数据 -> 测试连接通过。输入源 DBMS 选择现有保存的连接 -> 测试连接通过。转到下一步。

我收到错误`Can't connect to MySQL server on '127.0.0.1' (10061) (code 2003)`。

完整日志下方。有任何想法吗？

```
> Starting...
Connect to source DBMS...
- Connecting to source...
Connect to source DBMS done
Check target DBMS connection...
- Connecting to target...
Connecting to Mysql@localhost::3306@localhost:32222...
Traceback (most recent call last):
  File "C:\Program Files (x86)\MySQL\MySQL Workbench 5.2 CE\modules\db_mysql_fe_grt.py", line 137, in connect
    con.connect()
  File "C:\Program Files (x86)\MySQL\MySQL Workbench 5.2 CE\workbench\db_utils.py", line 169, in connect
    raise MySQLError(modules.DbMySQLQuery.lastError(), modules.DbMySQLQuery.lastErrorCode(), "%s@%s" % (self.connect_info.parameterValues["userName"], self.connect_info.parameterValues["hostName"]))
workbench.db_utils.MySQLError: Can't connect to MySQL server on '127.0.0.1' (10061) (code 2003)
Connecting to Mysql@localhost::3306@localhost:32222...
Traceback (most recent call last):
  File "C:\Program Files (x86)\MySQL\MySQL Workbench 5.2 CE\modules\db_mysql_fe_grt.py", line 137, in connect
    con.connect()
  File "C:\Program Files (x86)\MySQL\MySQL Workbench 5.2 CE\workbench\db_utils.py", line 169, in connect
    raise MySQLError(modules.DbMySQLQuery.lastError(), modules.DbMySQLQuery.lastErrorCode(), "%s@%s" % (self.connect_info.parameterValues["userName"], self.connect_info.parameterValues["hostName"]))
workbench.db_utils.MySQLError: Can't connect to MySQL server on '127.0.0.1' (10061) (code 2003)

Traceback (most recent call last):
  File "C:\Program Files (x86)\MySQL\MySQL Workbench 5.2 CE\workbench\wizard_progress_page_widget.py", line 65, in run
    self.func()
  File "C:\Program Files (x86)\MySQL\MySQL Workbench 5.2 CE\modules\migration_source_selection.py", line 450, in task_test_target
    raise e
SystemError: MySQLError("Can't connect to MySQL server on '127.0.0.1' (10061) (code 2003)"): error calling Python module function DbMySQLFE.connect
ERROR: Error during Check target DBMS connection: MySQLError("Can't connect to MySQL server on '127.0.0.1' (10061) (code 2003)"): error calling Python module function DbMySQLFE.connect

Traceback (most recent call last):
  File "C:\Program Files (x86)\MySQL\MySQL Workbench 5.2 CE\workbench\wizard_progress_page_widget.py", line 543, in update_status
    task.run()
  File "C:\Program Files (x86)\MySQL\MySQL Workbench 5.2 CE\workbench\wizard_progress_page_widget.py", line 80, in run
    raise e
SystemError: MySQLError("Can't connect to MySQL server on '127.0.0.1' (10061) (code 2003)"): error calling Python module function DbMySQLFE.connect
ERROR: Exception in task 'Check target DBMS connection': SystemError('MySQLError("Can\'t connect to MySQL server on \'127.0.0.1\' (10061) (code 2003)"): error calling Python module function DbMySQLFE.connect',) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-19T13:07:30.263

我在 MySQL Workbench 5.2.47 中遇到了同样的错误，其中两个 MySQL 数据库正常工作。这似乎是一个错误，我很惊讶 Oracle 发布了一个不工作的向导。

一种解决方法是对两个数据库使用 Workbench 中的 Server Administration，并分别使用 Data Export 和 Data Import/Restore。但是，这仅在您从 MySQL 迁移到 MySQL 时才有效。此外，数据导出/导入功能也有问题。

# ios - CALayer 蒙版无法正常工作

> ID：13023112
> 
> 赞同：4
> 
> 时间：2012-10-23T03:22:32.733
> 
> 标签：ios, cocoa-touch, core-animation, calayer

我正在尝试使用它的图层的 mask 属性将 UIView 屏蔽为图像。我见过无数的例子说，“就是这么简单”。然而，经过相当多的调整，我似乎无法重现所描述的结果。设置图层蒙版只会使视图消失。这是我正在使用的代码：

```
- (void)setMaskImage:(UIImage *)maskImage
{
    _maskImage = maskImage;

    self.layer.mask.contents = (__bridge id)(_maskImage.CGImage);
}

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self != nil) {
        self.layer.mask = [CALayer layer];
    }

    return self;
}

- (void)setFrame:(CGRect)frame
{
    [super setFrame:frame];

    self.layer.mask.frame = self.layer.bounds;
} 
```

这是我试图用来掩盖视图的图像： http: [//cl.ly/0a300G2r133V](http://cl.ly/0a300G2r133V)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T03:55:50.617

一种可能性是系统实际上并未`setFrame:`用于设置视图的几何形状。它可以使用`setCenter:`和`setBounds:`。另一种可能性是系统根本没有设置视图的几何图形，并且它只在`[super initWithFrame:frame]`调用中设置一次，然后再添加遮罩层。

无论如何，而不是覆盖`setFrame:`，你应该覆盖`layoutSubviews`：

```
- (void)layoutSubviews {
    [super layoutSubviews];
    self.layer.mask.frame = self.bounds;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T16:23:28.603

以下按预期工作：

```
- (void)setMaskImage:(UIImage *)maskImage
{
    if (_maskView == nil) {
        _maskView = [[UIImageView alloc] initWithImage:maskImage];
        _maskView.frame = self.bounds;
        self.layer.mask = _maskView.layer;
    } else {
        _maskView.image = maskImage;
    }
}

- (UIImage *)maskImage
{
    return _maskView.image;
}

- (void)setBounds:(CGRect)bounds
{
    [super setBounds:bounds];

    _maskView.frame = self.bounds;
} 
```

我不确定为什么只使用普通的 CALayer 不起作用，但这增加了使用可拉伸图像的好处。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T04:36:29.253

您可以覆盖 UIView drawRect() 方法以使其在屏幕上的自定义外观。尝试使用以下方法。

```
//code for drawRect()

CGContextRef context = UIGraphicsGetCurrentContext();
CGContextAddRect(context,ImageFrame);
CGContextClip(context);
CGContextClearRect(context,ImageFrame);
[super drawRect:rect]; 
```

它将使您的视图在 imageFrame 区域中透明。

# php - 如何在 wordpress 中获取父页面列表

> ID：13023115
> 
> 赞同：0
> 
> 时间：2012-10-23T03:23:23.227
> 
> 标签：php, html, wordpress

我试图在 wordpress 中列出所有父页面。更具体地说，一个祖先页面列表，用作面包屑路径。

我想得到父母，它的父母等等。一直到顶层。

例如，对于这个页面结构：

*   页
    *   子页面
        *   子页面
            *   子子页面

从子子页面调用它应该返回

*   页
*   子页面
*   子页面

并从子页面调用它应该返回

*   页
*   子页面

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T03:23:23.227

get_post_ancestors() 将所有祖先的页面 id 作为数组返回。

wp_list_pages() 接受以逗号分隔的页面 ID 列表

implode() 函数将数组与字符串粘合在一起，在本例中为逗号。

通过用逗号分解 get_post_ancestors 的结果，它有效地创建了一个以逗号分隔的祖先页面 id 列表以传递给 wp_list_pages()。

wp_list_pages() 的默认用法将创建嵌套列表。将深度选项设置为 -1 会将所有项目排列在一个平面列表中。

最后重要的一点，if 语句在列出父页面之前检查以确保帖子实际上有父页面。如果没有父母，并且 get_post_ancestors() 被调用，它会出于某种原因返回 WP 站点上的所有页面。

把这一切放在一起，

```
<ul>
    <?php 
        $ancestorsCSV =  implode( ',' , get_post_ancestors( $post));

        if ($post->post_parent){
            wp_list_pages('include='.$ancestorsCSV.'&title_li=&depth=-1' ); 
        }
    ?>
</ul> 
```

令人惊讶的是，我无法通过谷歌搜索找到这样的解决方案。

# python - Python:比较两个字典

> ID：13023120
> 
> 赞同：1
> 
> 时间：2012-10-23T03:24:10.263
> 
> 标签：python

第一个字典是固定的。这个字典将保留为具有短名称的国家列表。

```
firstDict={'ERITREA': 'ER', 'LAOS': 'LA', 'PORTUGAL': 'PT', "D'IVOIRE": 'CI', 'MONTENEGRO': 'ME', 'NEW CALEDONIA': 'NC', 'SVALBARD AND JAN MAYEN': 'SJ', 'BAHAMAS': 'BS', 'TOGO': 'TG', 'CROATIA': 'HR', 'LUXEMBOURG': 'LU', 'GHANA': 'GH'} 
```

然而，这个元组结果里面有多个字典。这是 MySQLdb 返回结果的格式：

```
result =({'count': 1L, 'country': 'Eritrea'}, {'count': 1L, 'country': 'Togo'}, {'count': 1L, 'country': 'Sierra Leone'}, {'count': 3L, 'country': 'Bahamas'}, {'count': 1L, 'country': 'Ghana'}) 
```

现在我想将这两个结果与 COUNTRY Names 进行比较，如果 Result 中的“Country”出现在 firstDict 中，则将 value.else 放入 0 所需的结果是：

```
mainRes={'ER':1,'TG':1,'BS':3,'GH':0,'LU':0} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T03:34:01.310

```
In [2]: firstDict={'ERITREA': 'ER', 'LAOS': 'LA', 'PORTUGAL': 'PT', "D'IVOIRE": 'CI', 'MONTENEGRO': 'ME', 'NEW CALEDONIA': 'NC', 'SVALBARD AND JAN MAYEN': 'SJ', 'BAHAMAS': 'BS', 'TOGO': 'TG', 'CROATIA': 'HR', 'LUXEMBOURG': 'LU', 'GHANA': 'GH'}

In [3]: result =({'count': 1L, 'country': 'Eritrea'}, {'count': 1L, 'country': 'Togo'}, {'count': 1L, 'country': 'Sierra Leone'}, {'count': 3L, 'country': 'Bahamas'}, {'count': 1L, 'country': 'Ghana'})

In [4]: resdict = {r['country'].upper():r['count'] for r in result}

In [5]: mainRes = {abbrev:resdict.get(country,0) for country, abbrev in firstDict.items()}

In [6]: mainRes
Out[6]: 
{'BS': 3L,
 'CI': 0,
 'ER': 1L,
 'GH': 1L,
 'HR': 0,
 'LA': 0,
 'LU': 0,
 'ME': 0,
 'NC': 0,
 'PT': 0,
 'SJ': 0,
 'TG': 1L} 
```

在没有[dict comprehenions](http://www.python.org/dev/peps/pep-0274/)的 Python2.6 或更早版本中，您可以执行以下操作：

```
In [13]: resdict = dict((r['country'].upper(), r['count']) for r in result)

In [14]: mainRes = dict( (abbrev, resdict.get(country,0)) for country, abbrev in firstDict.items()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T03:32:53.480

你可以尝试类似的东西

```
mainRes = dict.fromkeys(firstDict.itervalues(), 0)

for row in result:
    countryCode = firstDict.get(row['country'].upper())
    if countryCode:
        mainRes[countryCode] = row['count'] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T03:49:03.990

您不必进行数组转换。只需将 for 循环用作：

```
import string
desired_result = {}
for c in result:
  country = string.upper(c['country'])
  if  country in firstDict: 
    desired_result[firstDict[country]] = c['count']
print desired_result 
```

# c# - 在 C# Metro 应用程序的发布模式期间显示消息

> ID：13023127
> 
> 赞同：1
> 
> 时间：2012-10-23T03:25:18.593
> 
> 标签：c#, windows-8, microsoft-metro

在发布模式下使用`System.Diagnostics.Debug.WriteLine`Metro 应用程序不会在 Visual Studio 的窗口中打印任何内容。

我可以知道，在 C# Metro 应用程序的发布模式下，如何在 Visual Studio 的窗口中显示消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T05:43:51.733

您可以随时使用`Trace.WriteLine()`，它可以在`Debug`和`Release`模式下使用。

# actionscript-3 - 为什么这不起作用？Flash As3，如果添加的孩子在框架上？

> ID：13023131
> 
> 赞同：0
> 
> 时间：2012-10-23T03:26:24.383
> 
> 标签：actionscript-3, flash, if-statement, addchild

这是我的代码帮我取悦它真的很令人沮丧！我的库中有一个影片剪辑，并将它与 AS3 一起添加到舞台上。那部分很容易。但现在我想控制那个movieclip。如果 introScene "introClass" 到达第 120 帧，那么我想删除该影片剪辑并将其替换为另一个。问题是 if 语句不起作用。我也尝试过 getChildByName 但这也不起作用。

```
var introClass = new introScene;
addChild(introClass);
introClass.x = 640;
introClass.y = 387; 
```

> / ***** ** *** ******介绍场景****** ** *** ***** /

```
introClass.addEventListener(Event, introLoaded);

function introLoaded(event):void{

    if(introClass == 120 ){
        trace("Frame Reached")
    }
} 
```

我试过这个，这也不起作用:(

```
introClass.addEventListener(Event, introLoaded);

function introLoaded (e:Event):void{

    if(MovieClip(introClass).currentFrame == 120){
        trace("120 complete")
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T11:07:53.820

这是错误的说法：

```
introClass.addEventListener(Event, introLoaded); 
```

You need to pass a string to addEventListener. Event type name is converted to a string at runtime which adds a event listener to "flash.events.Event" or something. And your object obviously doesn't have this event. You need to use Event.ENTER_FRAME for example.

# c# - 如何将数组的内容写入文本文件？C＃

> ID：13023147
> 
> 赞同：4
> 
> 时间：2012-10-23T03:28:47.700
> 
> 标签：c#, arrays, file, text

我正在尝试将数组的内容写入文本文件。我已经创建了文件，将文本框分配给了数组（不确定是否正确）。现在我想将数组的内容写入文本文件。streamwriter 部分是我被困在底部的地方。不确定语法。

```
if ((!File.Exists("scores.txt"))) //Checking if scores.txt exists or not
{
    FileStream fs = File.Create("scores.txt"); //Creates Scores.txt
    fs.Close(); //Closes file stream
}
List<double> scoreArray = new List<double>();
TextBox[] textBoxes = { week1Box, week2Box, week3Box, week4Box, week5Box, week6Box, week7Box, week8Box, week9Box, week10Box, week11Box, week12Box, week13Box };

for (int i = 0; i < textBoxes.Length; i++)
{
    scoreArray.Add(Convert.ToDouble(textBoxes[i].Text));
}
StreamWriter sw = new StreamWriter("scores.txt", true); 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-23T03:33:35.553

你可以这样做：

```
System.IO.File.WriteAllLines("scores.txt",
    textBoxes.Select(tb => (double.Parse(tb.Text)).ToString())); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-23T03:31:43.303

```
using (FileStream fs = File.Open("scores.txt"))
{
    StreamWriter sw = new StreamWriter(fs);
    scoreArray.ForEach(r=>sw.WriteLine(r));
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T03:31:39.780

您可以在关闭文件之前尝试写入文件......在`FileStream fs = File.Create("scores.txt");`代码行之后。

您可能还想使用 a `using`。像这样：

```
if ((!File.Exists("scores.txt"))) //Checking if scores.txt exists or not
    {
        using (FileStream fs = File.Create("scores.txt")) //Creates Scores.txt
        {
            // Write to the file here!
        }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-03-13T17:56:54.100

您可以将您转换`List`为数组，然后将数组写入文本文件

```
double[] myArray = scoreArray.ToArray();
File.WriteAllLines("scores.txt",
  Array.ConvertAll(myArray, x => x.ToString())); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-04-21T19:36:23.493

只需这样做即可解决您的问题

Form.Close();

# linux - /run 目录：如何在首次启动时创建它以存储运行时数据

> ID：13023153
> 
> 赞同：0
> 
> 时间：2012-10-23T03:29:44.023
> 
> 标签：linux, boot

我读了一篇关于 Linux 系统上的 /run 目录的文章。 [http://article.gmane.org/gmane.linux.redhat.fedora.devel/146976](http://article.gmane.org/gmane.linux.redhat.fedora.devel/146976)

这篇文章指出，许多 Linux 发行版都同意 /run 目录是 early-runtime-dir 问题的唯一干净解决方案。以前，他们将早期运行时数据放在 /dev/.XXX 或 /var/run 中。但他们现在采用 /run 目录来存储早期运行时数据。

我的问题：他们如何做出这种改变？具体来说，他们是否更改了内核或引导或 initscripts 中的代码？

以这篇文章 (http://article.gmane.org/gmane.linux.redhat.fedora.devel/146976) 为例，实现它需要进行哪些可能的更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T03:40:00.647

该`run`目录对内核本身没有特殊意义，无论是它`/run`还是`/var/run`. 从内核的角度来看，它只是一个常规目录。由于前一段时间出于性能原因，它通常被挂载为`tmpfs`文件系统。Fedora 发行版创建了一个符号链接 /var/run 指向 /run 以实现向后兼容性：

山：

```
tmpfs on /run type tmpfs (rw,nosuid,nodev,seclabel,mode=755) 
```

ls /var：

```
lrwxrwxrwx.  1 root root    6 Jun  8 15:33 run -> ../run 
```

所以实际上所有“旧”程序和脚本都可以工作。但随着惯例的改变，软件包也在进行更新以反映这一点。因此，随着时间的推移，`/var/run`链接中的需求将消失。

为了实现这一移动，`/run`初始化脚本被改变了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T03:42:55.513

`/run`由 Linux 发行版的 init 系统创建和挂载（通常作为 tmpfs 文件系统）。例如 systemd 或 OpenRC。init 系统在任何其他程序之前运行。

内核与它没有任何关系。

# html - 使用媒体查询内联样式

> ID：13023157
> 
> 赞同：17
> 
> 时间：2012-10-23T03:31:07.023
> 
> 标签：html, css, media-queries

我知道这听起来很荒谬，但我可以使用内联样式的 CSS 媒体查询吗？原因是我在 PHP 中呼应背景，如果设备是视网膜，则需要使用视网膜大小的图像。

`ie: <div style="background:url(normal.png); <- need to add style for retina device`

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-23T03:38:07.327

***据我所知，不在内联样式声明中。***

但是，如果您在 PHP 中回显并且**确实**无法访问样式表，我建议您`<style />`使用媒体查询回显内联元素并使用 div 类。

**IE**

```
<style type="text/css">
    .bg {
        background: url(background.jpg);
    }
    @media only screen and (max-device-width: 480px) { /* Change to whatever media query you require */
        .bg {
             background: url(background_highres.jpg);
        }
    }

</style>
<div class="bg">...</div> 
```

# objective-c - 在 Objective-C 中从正则表达式中提取字符串

> ID：13023158
> 
> 赞同：2
> 
> 时间：2012-10-23T03:31:09.703
> 
> 标签：objective-c, ios, regex

我有一个字符串`2000-01-01T10:00:00Z` ，我想从该字符串中提取时间：`10:00`

谁能告诉我如何使用 NSRegularExpression

我尝试了以下代码，但它不起作用（不返回任何结果）

```
NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"(\d{2}:\d{2})" options:NSRegularExpressionCaseInsensitive error:NULL];
NSString *newSearchString = [regex firstMatchInString:opening_time options:0 range:NSMakeRange(0, [opening_time length])]; 
```

`opening_time`在哪里`"2000-01-01T10:00:00Z"`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-23T03:34:30.933

我认为您需要将`\d`s 前面的斜杠加倍：

```
NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"(\\d{2}:\\d{2})" options:NSRegularExpressionCaseInsensitive error:NULL];
NSTextCheckingResult *newSearchString = [regex firstMatchInString:opening_time options:0 range:NSMakeRange(0, [opening_time length])];
NSString *substr = [opening_time substringWithRange:newSearchString.range];
NSLog(@"%@", substr); 
```

这打印`10:00`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T05:25:38.123

使用`NSDateFormatter`. 看起来您可能是从 Rails Web 服务获得这个日期的？试试这个：

```
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:@"YYYY-MM-dd'T'HH:mm:ss'Z'"];

NSDate *date = [dateFormatter dateFromString:opening_time];

NSDateComponents *components = [[NSCalendar currentCalendar] 
                          components:kCFCalendarUnitHour fromDate:date];

NSInteger hour = [components hour]

// Hour should now contain 10 with your sample date 
```

如果您想获取任何其他组件，请更改您的 components 参数，为您要提取的组件添加标志。像这样的东西

```
NSDateComponents *components = [[NSCalendar currentCalendar] 
                          components:kCFCalendarUnitHour | kCFCalendarUnitMinute 
                            fromDate:date];

NSInteger hour = [components hour];
NSInteger minute = [components minute]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T03:49:32.640

如果你真正想要的是这个固定格式字符串的 10:00 部分，为什么不避免使用正则表达式并简单地获取子字符串：

```
NSString *timeStr = [opening_time substringWithRange:NSMakeRange(11, 5)]; 
```

当然，您可以考虑使用具有指定格式的**NSDateFormatter将字符串解析为****NSDate 。**确保日期格式化程序的语言环境设置为**en_US_POSIX**，因为它是固定格式而不是以用户为中心的。

 ****您采取的方法取决于您将如何处理提取的时间。如果您想向用户显示它，那么您需要使用 NSDateFormatter 以便您可以根据用户的语言环境正确格式化它。****

# ruby-on-rails - $ rvm 获取头部 && rvm 重新加载

> ID：13023161
> 
> 赞同：0
> 
> 时间：2012-10-23T03:31:37.233
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我插入了以下“$ rvm get head && rvm reload”并得到了下面的输出。它说目录丢失并运行 rvmsudo 来解决我的问题。有人可以解释我应该创建哪些目录吗？什么是“rvmsudo”？

根据输出，这是否意味着它没有正常运行？最后，它指出..“/usr/local/rvm/ 中的 RVM 升级完成。”

**输出：**

```
 % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100   185  100   185    0     0    199      0 --:--:-- --:--:-- --:--:--   417
100 10009  100 10009    0     0   7016      0  0:00:01  0:00:01 --:--:-- 78811
Downloading RVM from wayneeseguin branch master
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100   125  100   125    0     0    261      0 --:--:-- --:--:-- --:--:--  1179
100 1125k  100 1125k    0     0   640k      0  0:00:01  0:00:01 --:--:-- 1238k

Upgrading the RVM installation in /usr/local/rvm/
mkdir: /usr/local/share/man/man1: Permission denied
stat: /usr/local/share/man/man1: stat: No such file or directory
chown: /usr/local/share/man/man1: No such file or directory
cp: /usr/local/share/man/man1/rvm.1: No such file or directory

    Please run the installer using rvmsudo to fix file permissions

stat: /usr/local/share/man/man1/rvm.1: stat: No such file or directory
chown: /usr/local/share/man/man1/rvm.1: No such file or directory
mkdir: /usr/local/share/man/man1: Permission denied
stat: /usr/local/share/man/man1: stat: No such file or directory
chown: /usr/local/share/man/man1: No such file or directory
cp: /usr/local/share/man/man1/rvm.1.gz: No such file or directory

    Please run the installer using rvmsudo to fix file permissions

stat: /usr/local/share/man/man1/rvm.1.gz: stat: No such file or directory
chown: /usr/local/share/man/man1/rvm.1.gz: No such file or directory
    RVM PATH line found in /Users/XXXXXX/.bashrc /Users/XXXXXX/.zshenv.
    RVM sourcing line found in /Users/XXXXXX/.bash_profile /Users/XXXXXX/.zprofile.

Upgrade Notes:

  * No new notes to display.

.....

# In case of any issues read output of 'rvm requirements' and/or 'rvm notes'

Upgrade of RVM in /usr/local/rvm/ is complete. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T03:56:56.807

如果你输入

```
rvm -v 
```

并得到

```
rvm 1.16.12 (stable) by Wayne E. Seguin <wayneeseguin@gmail.com>, Michal Papis <mpapis@gmail.com> [https://rvm.io/] 
```

然后安装rvm。如果没有正确安装，您可以使用

```
rvm implode 
```

这将删除它并允许您从头开始。

```
rvm get stable 
```

这将为您提供最新的稳定版本。

至于rvmsudo是什么，这里有一个很好的解释

[http://ruby.about.com/od/rubyversionmanager/qt/Rvm-And-Sudo.htm](http://ruby.about.com/od/rubyversionmanager/qt/Rvm-And-Sudo.htm)

# python - 打印模式递归

> ID：13023166
> 
> 赞同：2
> 
> 时间：2012-10-23T03:31:58.250
> 
> 标签：python, design-patterns, recursion

我需要编写一个递归函数 printPattern()，它接受一个整数 n 作为参数，并在一行上打印 n 个星号和 n 个感叹号。该函数不应有任何循环，也不应使用字符串乘法。字符的打印只能递归完成。以下是函数行为的一些示例：

```
>>>printPattern(3)
***!!!
>>>printPattern(10)
**********!!!!!!!!!! 
```

这就是我目前所拥有的

```
def printPattern(n):
if n < 1:
    pass
else:
    return '*'*printPattern(n)+'!'*printPattern(n) 
```

我知道我完全离开了，如果没有递归，这会更容易，但这是我的任务所必需的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T03:37:23.347

问：是什么`printPattern(0)`？
答：没什么。

问： 是`printPattern(n)`为了`n>=1`什么？
答：`*`然后`printPattern(n-1)`，然后`!`。

现在你应该可以做到了。只记得递归思考。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T03:36:22.350

递归基于两件事：

*   基本情况
*   考虑到一些不是基本情况的东西，一种基于更接近基本情况的东西来获得答案的方法。

在您的情况下，最简单的基本情况可能是`0`- 这将打印事物（空字符串）。`printPattern(0)`也是如此`''`。

那么如何从输入中接近 0 呢？好吧，可能通过将其减少 1。

因此，假设您目前处于`n=5`并希望将您的答案建立在更接近基本情况的基础上 - 您希望`n=5`从for 中获得答案`n=4`。

的输出`n=5`是`*****!!!!!`。

的输出`n=4`是`****!!!!`。

你如何从 to 的输出中`n=4`得到`n=5`？好吧，你`*`在前面加上一个`!`，在最后加上一个。

所以你可以说这`printPattern(5)`实际上只是`'*' + printPattern(4) + '!'`.

看看这是怎么回事？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-23T03:38:56.187

试试这个：

```
def printPattern(n):
    if n <= 0:
        return ''
    return '*' + printPattern(n-1) + '!'

print printPattern(5)
> *****!!!!! 
```

# asp.net-mvc-3 - 贝宝沙盒 MVC3

> ID：13023168
> 
> 赞同：7
> 
> 时间：2012-10-23T03:33:07.550
> 
> 标签：asp.net-mvc-3, paypal-sandbox

我正在为我正在制作的网站测试贝宝 API。昨晚一切正常，但今天再次运行时，我收到以下错误：

> 无法为具有权限“api-aa.sandbox.paypal.com”的 SSL/TLS 建立安全通道

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-24T20:31:43.827

有同样的。尝试改用[http://api-3t.sandbox.paypal.com/](http://api-3t.sandbox.paypal.com/)。它帮助了我。我在这里找到它：[setExpressCheckout 和 SSL/TLS 错误](https://stackoverflow.com/questions/12681135/setexpresscheckout-and-ssl-tls-error)

> 如果您没有或未使用 API 证书，则应分别连接到 api-3t.paypal.com 或 api-3t.sandbox.paypal.com 以获取 Live 或 Sandbox。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-02-24T11:21:01.453

我已经和这个问题斗争了几个小时了。在一年前使用带有签名的 SOAP API 编写 PayPal Express 结账集成后，它被搁置了（当时所有单元测试都通过了）。我今天回到错误：

> 无法为具有权限“api-3t.sandbox.paypal.com”的 SSL/TLS 建立安全通道

经过大量研究，我已经将我们实例中的问题隔离为默认`ServicePointManager.SecurityProtocol`值`System.Net.SecurityProtocolType.Ssl3 | System.Net.SecurityProtocolType.Tls`，更新它以`SecurityProtocolType.Tls12`解决问题。

```
ServicePointManager.SecurityProtocol = SecurityProtocolType.Tls12; 
```

# php - Facebook php sdk 用于墙贴

> ID：13023170
> 
> 赞同：-4
> 
> 时间：2012-10-23T03:33:14.600
> 
> 标签：php, facebook, facebook-graph-api, facebook-php-sdk

我尝试了许多使用 php sdk 发布用户墙的方法。但没有成功。任何人都知道成功发布到墙。请帮助我...此代码返回任何错误，但不会发布用户时间石灰。目前我正在使用这个php代码..

```
 require_once('src/facebook.php');

  $config = array(
'appId' => '#########',
'secret' => '#########################',
  );

  $facebook = new Facebook($config);
 $user_id = $facebook->getUser();
 echo $user_id;
$access_token = $facebook->getAccessToken();
 if($user_id!=0) 
 {

 try {$attachment =  array(
 'message' => "good Evening",
  'name' => "good Evening",
 'link' => "good Evening",
'description' => "good Evening",
'picture'=>"http://hotactresshotphotos.files.wordpress.com/2011/02/bhama_028.jpg",
'actions' => json_encode(array('name' => $action_name,'link' => $action_link))
      ); 

$result = $facebook->api('/'.$user_id.'/feed', 'post', $attachment);

} 

   catch(FacebookApiException $e) {

    $login_url = $facebook->getLoginUrl( array(
                   'scope' => 'publish_stream'
                   )); 
    echo 'Please <a href="' . $login_url . '">login.</a>';
    error_log($e->getType());
    error_log($e->getMessage());
  }   

  echo '<br /><a href="' . $facebook->getLogoutUrl() . '">logout</a>';
} else {

  $login_url = $facebook->getLoginUrl( array( 'scope' => 'publish_stream' ) );
  echo 'Please <a href="' . $login_url . '">login.</a>';

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T06:17:28.150

你到底得到了什么错误？顺便说一句，只要您拥有 publish_stream 权限，它对我有用：

```
$attachment =  array(
                 'access_token' => $access_token,
                 'message' => "$message",
                 'name' => "$name",
                 'description' => "$description",
                 'link' => "$link",
                 'picture' => "$pictureUrl",
                 'actions' => array('name'=>'Try it now', 'link' => "$appUrl")
               );

               try{
                  $post_id = $facebook->api("me/feed","POST",$attachment);
               }catch(Exception $e){
                  error_log($e->getMessage());
               } 
```

# php - 在 php 中调用 javascript 输出

> ID：13023177
> 
> 赞同：-2
> 
> 时间：2012-10-23T03:34:04.973
> 
> 标签：php, javascript, html

大家好，我想创建一个下拉菜单来选择时间。我使用 javascript 来获取计算机的时间。然后，如果计算机的时间等于下拉菜单的值，我想有一个输出，那么应该选择输出。下面是我的代码。

```
<script type="text/javascript">
function time(){ 
var currentTime = new Date();
$hours = currentTime.getHours();
document.write($hours);
}
</script>       
<select>
<?php $hr="<script>time();</script>";//calling the output from javascript
for($i = 0; $i < 24; $i++): ?>
<option value="<?= $i; ?>" <?if ($i==$hr) echo "selected";?> > 
<?= $i % 12 ? $i % 12 : 12 ?>   <?= $i >= 12 ? ' pm' : ' am' ?>   
</option>
<?php endfor ?>
</select> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T03:38:55.130

PHP 是一种服务器端脚本语言，而 Javascript 是一种客户端脚本语言。当用户查看您的网页时，php 代码将已经被执行。因此，您不能混合和匹配语言，并尝试使用 JS 与 PHP 混合的输出，而无需表单返回或回传（有或没有 XHR）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T03:50:14.473

我将从不在您的 php 脚本中输出 javascript 开始。这不容易创建、阅读或维护。

我只涉足过 php，对 php 的细节知之甚少，但取决于什么，如果您使用的是任何框架，您应该尝试抽象出尽可能多的视图（客户端标记/脚本）你的 php 逻辑。模板引擎是你的朋友！

如果我是你，我会研究像 codeigniter 或 cakePHP 这样的框架。这些旨在让您的生活更轻松，尽管随着时间的推移，您会发​​现您可能不同意他们为您做出的许多决定。

话虽如此，我认为这很重要，从基础开始，比如提到的 zerkms。了解 Web 应用程序的每一层负责什么。如果您尝试从您的 php.ini 中生成客户端脚本，您只会让自己头疼。

# ios - 什么是 NSvFlags？

> ID：13023178
> 
> 赞同：1
> 
> 时间：2012-10-23T03:34:08.420
> 
> 标签：ios, xib, flags, autolayout

我已经计算出低 6 位对应于视图的自动调整大小掩码，但是直接在 XIB XML 中编辑此属性有什么害处吗？我这样做的原因是因为无论出于何种原因，Xcode 在使用自动布局时坚持给根视图一个错误的自动调整大小掩码（通常为 292 或 256），并且无法更改此设置或根视图上的约束（我想这是有道理的，因为还没有超级视图）。它会使视图保持纵向大小，即使是横向，这违背了自动布局的目的。

我想要的是等价于灵活的宽度和高度，以便根视图始终填充其父视图（通常是 UIWindow 的根视图）。更改 NSvFlags 以使低 6 位以这种方式排列（274）似乎可以解决问题，但是有没有更简单的方法来做到这一点？我不想创建自定义视图*只是*为了让它填满屏幕。

另外，第 9 位的位是做什么用的？我似乎找不到任何关于此的信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T04:19:48.073

如果您手动更换笔尖，IB 可能会随时将其更换回来。

尝试在 Attributes Inspector 的 Simulated Metrics 部分中将大小设置为“Freeform”。如果视图是顶级对象，它就在视图上。如果视图在视图控制器中，它在视图控制器上。当我将大小设置为“自由形式”时，我可以切换任何视图的弹簧和支柱。

如果失败，只需在代码中执行。

# c++ - 在 C++ 中使用具有可变数量参数的构造函数初始化对象

> ID：13023187
> 
> 赞同：0
> 
> 时间：2012-10-23T03:35:09.767
> 
> 标签：c++, class, constructor

我想用 C++ 编写一个代码，以便我可以使用具有未知数量参数的构造函数来初始化一个类。我的类中有一个数组，我想存储我传递给构造函数的所有值以存储在数组中。有没有可能这样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T03:38:37.840

C++11 中最好的方法是有一个构造函数，它接受存储在数组中的类型`std::initializer_list<T>`。`T`

其他选项包括将指针指向不同的数组，或`std::vector<T>`（顺便说一句，考虑使用`std::vector`而不是普通数组）。

# arrays - 和不小于键的数组的最小子集

> ID：13023188
> 
> 赞同：7
> 
> 时间：2012-10-23T03:35:11.090
> 
> 标签：arrays, algorithm

给定一个数组（假设为非负整数），我们需要找到最小长度的子集，使得元素之和不小于 K。K 是作为输入提供的另一个整数。

是否有可能有一个时间复杂度为 O(n) [big oh of n] 的解决方案？

我目前的想法是：我们可以在 O(n * log n) 中对数组进行排序，然后从最大数开始迭代排序数组并保持运行总和，直到运行总和变为 >= K。

但是，这将具有 O(n * (log n + 1)) 的最坏情况运行时间。

因此，如果有人可以在 O(n) 时间内分享这样做的想法，我将非常感激..

注意：在这种情况下，子数组的元素不必是原始数组的连续序列

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-23T04:23:44.260

有一个线性时间算法可以找到最大的 K 个数字 - [http://en.wikipedia.org/wiki/Selection_algorithm](http://en.wikipedia.org/wiki/Selection_algorithm)。当然，您想要的只是足够大的数字来总计至少 K。

在标准选择算法中，您采用随机枢轴，然后查看有多少数字落在它的每一侧。然后你要么接受要么拒绝一半，然后继续处理另一半。您已经依次查看了每一半中的每个数字 - 每个枢轴阶段的成本是线性的，但是在每个阶段考虑的数据量减少得足够快，以至于总成本仍然只是线性的。

如果您将枢轴以上的所有数字相加，则枢轴阶段的成本仍然是线性的。使用这个，你可以计算出如果接受所有这些数字以及之前选择的任何数字，是否会给你一个加起来至少为 K 的数字集合。如果是这样，你可以放弃其他数字并使用上面的数字下一次传球的枢轴。如果没有，您可以接受枢轴上方的所有数字，并使用枢轴下方的数字进行下一次传递。与选择算法一样，枢轴本身和任何关系都会为您提供一些特殊情况以及尽早找到准确答案的可能性。

（所以我认为您可以使用修改后的选择算法在（随机）线性时间内执行此操作，在该算法中，您可以查看枢轴上方数字的总和，而不是枢轴上方有多少数字。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-23T04:15:24.470

这似乎是动态规划的一个问题。构建数组时，您会构建另一个数组，其中包含每个特定索引的累积总和。所以`i`该数组中的每个都有来自 的总和`1..i`。

现在很容易看出索引值的总和`p..q`是`SUM(q) - SUM(p-1)`（在特殊情况下`SUM(0)`是`0`）。显然我在这里使用基于 1 的索引......这个操作是 O(1)，所以现在你只需要一个 O(n) 算法来找到最好的。

一个简单的解决方案是跟踪 a`p`并`q`在数组中遍历它们。你开始扩展`q`。然后你反复收缩`p`和扩张`q`，就像毛毛虫在你的阵列中爬行。

展开`q`：

```
p <- 1
q <- 1

while SUM(q) - SUM(p-1) < K
    q <- q + 1
end while 
```

现在`q`是子数组和刚刚超过（或等于）的位置`K`。子数组的长度为`q - p + 1`。

在`q`循环之后，您测试子数组长度是否小于您当前的最佳长度。然后你前进一步`p`（这样你就不会意外跳过最佳解决方案）并再次前进。

您实际上并不需要创建`SUM`数组...您可以随时构建子数组总和...您需要返回使用“真实”`p`而不是之前的那个。

```
subsum <- VAL(1)
p <- 1
q <- 1

while q <= N
    -- Expand
    while q < N and subsum < K
        q <- q + 1
        subsum <- subsum + VAL(q)
    end while

    -- Check the length against our current best
    len <- q - p + 1
    if len < bestlen
        ...
    end if

    -- Contract
    subsum <- subsum - VAL(p)
    p <- p + 1
end while 
```

笔记：

> **j_random_hacker 说：**这将有助于准确解释为什么只检查该算法检查的 O(n) 个不同子数组而不是所有 O(n^2) 个可能的不同子数组是可以接受的

动态规划的哲学是：

1.  不要遵循会导致非最佳结果的解决方案路径；和
2.  使用先前解决方案的知识来计算新的解决方案。

在这种情况下，通过对元素求和来计算单个解决方案候选者（一些`(p,q)`这样的）。`p <= q`因为这些元素是正整数，所以我们知道对于任何候选`(p,q)`解，候选解`(p,q+1)`都会更大。

所以我们知道如果`(p,q)`是一个最小的解决方案，那么`(p,q+1)`就不是。一旦我们有一个候选人，我们就会结束我们的搜索，并测试那个候选人是否比我们迄今为止看到的任何一个更好。这意味着对于每个`p`，我们只需要测试一个候选人。这导致两者都增加`p`并且`q`只会增加，因此搜索是线性的。

另一部分（使用以前的解决方案）来自于认识到这一点`sum(p,q+1) = sum(p,q) + X(q+1)`和类似`sum(p+1,q) = sum(p,q) - X(p)`的。因此，我们不必对每一步之间的`p`所有元素求和。`q`每当我们推进其中一个搜索指针时，我们只需要加或减一个值。

希望有帮助。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-23T09:15:19.463

OP 在他对评论的回答中明确表示，问题是要找到一个子集，而不一定是一个连续的序列（“子数组”这个词确实很糟糕）。那么，我认为mcdowella所指的方法是正确的，包括以下步骤：

从 N 个元素开始，找到 MEDIAN 元素（即想象一个排序数组的第 (N/2) 个元素，您没有也没有构造它）。这是通过“Median of Medians”算法实现的，被证明是 O(n)，请参阅已经给出并在此处重复的 wiki 参考：[Selection algorithm，请参阅有关 Median of Median 算法的部分](http://en.wikipedia.org/wiki/Selection_algorithm)

具有中值元素：线性扫描整个集合，并在“下方”和“上方”中进行分区，同时对每个“一半”进行求和、计数和做任何你想要跟踪的事情。这一步（也是）O（N）。

完成扫描后，如果“上半部分”-总和高于目标 (K)，您将忘记下半部分并重复上半部分的过程，其大小为（大约）N/2。另一方面，如果“上半部分”总和小于 K，则将上半部分添加到最终结果中，从 K 中减去其总和，然后对下半部分重复该过程。

总而言之，您处理大小为 N、N/2、N/4、N/8 等的集合，每个集合相对于它们各自的大小 M 在 O(M) 中，因此总体内容在 N 中也是线性的，因为 N + N/2 + N/4 + N/8 ... 保持在 2N 以下。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-23T05:16:22.660

这是一个应该足够快的解决方案。我猜它几乎是线性的。

```
def solve(A, k):
    assert sum(A) >= k
    max_ = max(A)
    min_ = min(A)
    n = len(A)
    if sum(A) - min_ < k:
        return A
    bucket_size = (max_ - min_)/n + 1
    buckets = []
    for i in range(n):
        buckets.append([])
    for item in A:
        bucket = (item - min_)/bucket_size
        buckets[bucket].append(item)

    solution = []

    while True:
        bucket = buckets.pop() #the last bucket
        sum_ = sum(bucket)
        if sum_ >= k:
            #don't need everything from this bucket
            return solution + solve(bucket, k)
        else:
            k -= sum_
            solution += bucket

print solve([5,2,7,52,30,12,18], 100)
"[52, 30, 18]" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-23T05:17:32.197

我相信“子数组”一词意味着数组的连续部分（[就像这里](http://en.wikipedia.org/wiki/Maximum_subarray_problem)，另一个问题作为例子）。

所以有一个简单的 O(n) 算法来找到最小长度子数组：

为第一个元素设置两个索引（左、右）并将它们移动到数组的末尾。检查这些索引之间的和，向右推进指针，如果和太小（或指针相等），如果和大则向左推进

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-10-16T04:09:18.620

根据数组的定义，子数组必须是连续的。

使用 2 个指针（开始，结束）。将它们初始化到数组的开头。跟踪 (start, end) 之间的当前总和，并将 end 一个一个向右移动。每次移动结束指针时，sum = sum + array[end]。

当 sum >= target 时，开始向右移动 start 并继续跟踪 sum 为 sum = sum - array[start]。

在向右移动开始的同时，继续检查总和仍然不低于目标。我们还需要通过 length = end - start + 1 以及 minLength = min(minLength, length) 来跟踪长度。

现在，当我们将两个指针尽可能向右移动时，我们只需要返回 minLength。

总体思路是先找到一个满足条件（sum >= target）的“窗口”，然后每次移动窗口时将窗口向右滑动一个元素，并保持窗口大小最小。

# haskell - Haskell当用户输入一些东西时..用txt文件中的数字总结

> ID：13023192
> 
> 赞同：0
> 
> 时间：2012-10-23T03:35:50.450
> 
> 标签：haskell, haskell-platform

假设用户输入= 6000，input.txt中的数字= 5000。总和将是11000。屏幕上显示的数字和文件中存储的值将被覆盖为11000。请帮助我，谢谢

```
import System.IO

menu :: IO ()
menu = do

handle <- openFile "input.txt" ReadMode  
          contents <- hGetContents handle 
      putStr contents
      hClose handle
      contents <- readFile "input.txt"
      print . sum . read $ contents
      putStr("\nThe amount of money that you want to deposit : ")
      y<-getLine 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T04:13:22.053

## 你的代码有什么问题：

你的代码有很多问题。

*   为什么要读两遍。
*   为什么最后有一个 getLine 。
*   您使用的大多数功能的类型都不匹配。
*   输入文件是只包含一行还是多行。

最好查看您正在使用的函数类型，然后组合它们。

根据我可以推断出您想要的内容，您的代码可能会更正

```
import System.IO

main :: IO ()
main = do
    y<-getLine
    content <- readFile "input.txt"
    let out = sum $ map read $ y:(words content)
    putStrLn $ "\nThe amount of money that you want to deposit : " ++ show out
    writeFile "input.txt" $ show out 
```

## 直接回答：

最好`withFile`按你想读然后写的方式使用。`readFile`懒惰地读取文件，因此无法保证何时关闭文件句柄。在上述情况下，如果您`writeFile`在打印输出之前编写该行，则可能会出现运行时错误，抱怨打开的句柄。所以`withFile`是一个更安全的选择，与上述情况相比，您将只打开一次文件。

我考虑过您只想将输入文件的第一行中的数字与您输入的数字相加。

```
import System.IO

main = do
    input <- getLine
    out <- sumFile (read input) "input.txt"
    putStr $ "\nThe amount of money that you want to deposit : " ++ show out

sumFile :: Int -> FilePath -> IO Int
sumFile input fp = withFile fp ReadWriteMode add
    where
        add handle = do
            number <- hGetLine handle
            hSeek handle AbsoluteSeek 0
            let sum = input + read number
            hPutStrLn handle (show sum)
            return sum 
```

# drupal - Drupal：如何将核心配置文件字段迁移到 D7 中的新配置文件字段？

> ID：13023195
> 
> 赞同：0
> 
> 时间：2012-10-23T03:36:03.807
> 
> 标签：drupal, drupal-6, drupal-7, profile, drupal-theming

**前提：**

我正在尝试将大型 D6 站点升级到 D7。

我安装了内容配置文件模块。

我有一些需要保留的核心配置文件字段。

由内容配置文件模块创建的“配置文件”节点中没有字段。我只是为了更好地管理配置文件的主题和演示而使用。

我已经安装了 Profile2 模块。我已经安装了与之捆绑的配置文件页面子模块。

**我的2个问题：**

**1.**我想将所有这些核心配置文件字段导出或转换为 D7 中的新实体字段。**我该怎么做？**

**2.**与此同时（如果第 1 条根本不可能），我尝试对***profile2.tpl.php***文件进行主题化，尝试在其中打印我的旧核心配置文件字段。

我[已按照说明](http://drupal.org/node/1488468)打印这些核心配置文件字段，因此我已将其硬编码`print check_plain($account->profile_nombre);`到模板中，但它不会打印插入到*nombre*字段（核心配置文件字段）中的用户名。那么，我该如何为个人资料页面设置主题？

我也看过这个关于 profile2 模块的[视频教程，但是当你已经有几千个用户在其中包含核心配置文件字段时，我仍然对如何在 D7 中管理配置文件一无所知。](http://codekarate.com/daily-dose-of-drupal/drupal-7-profile-2-module)

***请注意，我尝试使用“迁移”模块和“drupal 2 drupal”迁移模块，但没有成功。***

感谢您的帮助和洞察力！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T03:19:13.980

> 一个好的解决方案可能是使用 Feeds 模块（导入到字段）和 Views Data Export Module（将字段导出到电子表格）。该程序将是：
> 
> 设置一个视图，列出您的所有用户并显示您要迁移的所有字段。然后添加新闻显示（数据导出）并选择CSV格式。
> 
> 使用提要将数据导入 D7。只需将每个导出的字段映射到一个新字段。
> 
> 起初这可能看起来很复杂，但它真的很简单并且应该可以工作。

谢谢你的回复，[take2](https://stackoverflow.com/users/637548/take2)。觉得把它贴在这里会很好。

# android - URL谷歌地图中参数的含义是什么

> ID：13023196
> 
> 赞同：7
> 
> 时间：2012-10-23T03:36:17.750
> 
> 标签：android, google-maps

我正在使用 Android 上的 Webkit 浏览器。我想在下面的 URL 中得到一个红色的“A”标志：

> [https://maps.google.com/maps?f=q&source=s_q&hl=vi&geocode=&q=7+Nguy%E1%BB%85n+Ch%C3%AD+Thanh,+T%C3%A2n+Th%E1 %BA%A1nh,+Tam+K%E1%BB%B3,+Qu%E1%BA%A3ng+Nam,+Vi%E1%BB%87t+Nam&aq=0&oq=7+Nguy%E1%BB%85n+ Ch%C3%AD+Thanh,+T%C3%A2n+Th%E1%BA%A1nh,+Tam+K%E1%BB%B3&sll=15.579176,108.470603&sspn=0.001573,0.002411&vpsrc=6&ie=UTF8&hq=&hnear= 7+Nguy%E1%BB%85n+Ch%C3%AD+Thanh,+Tam+K%E1%BB%B3,+Qu%E1%BA%A3ng+Nam,+Vi%E1%BB%87t+Nam&ll =15.578003,108.471826&spn=0.006294,0.009645&t=m&z=17&ei=mwSGUKXwOK2tiQeHlYH4Ag&pw=2](https://maps.google.com/maps?f=q&source=s_q&hl=vi&geocode=&q=7+Nguy%E1%BB%85n+Ch%C3%AD+Thanh,+T%C3%A2n+Th%E1%BA%A1nh,+Tam+K%E1%BB%B3,+Qu%E1%BA%A3ng+Nam,+Vi%E1%BB%87t+Nam&aq=0&oq=7+Nguy%E1%BB%85n+Ch%C3%AD+Thanh,+T%C3%A2n+Th%E1%BA%A1nh,+Tam+K%E1%BB%B3&sll=15.579176,108.470603&sspn=0.001573,0.002411&vpsrc=6&ie=UTF8&hq=&hnear=7+Nguy%E1%BB%85n+Ch%C3%AD+Thanh,+Tam+K%E1%BB%B3,+Qu%E1%BA%A3ng+Nam,+Vi%E1%BB%87t+Nam&ll=15.578003,108.471826&spn=0.006294,0.009645&t=m&z=17&ei=mwSGUKXwOK2tiQeHlYH4Ag&pw=2)

```
<script type="text/javascript">
    function initialize() {
        var latlng = new google.maps.LatLng(15.578003,108.471826);
        var myOptions = { 
            zoom:15, 
            center:latlng , 
            mapTypeId: google.maps.MapTypeId.ROADMAP
        };
    var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
    }
</script> 
```

如何在文件 HTML 中获得标志红色“A”和一组：

展示图片：http: [//i.stack.imgur.com/STyUG.jpg](http://i.stack.imgur.com/STyUG.jpg)

URL Google Maps 中的参数是什么意思？？？例子 ：

> f=q;
> 源=s_q；
> hl=vi;
> 地理编码；
> aq=0;
> oq=7+Nguy%E1%BB%85n+Ch%C3%AD+Thanh,+T%C3%A2n+Th%E1%BA%A1nh,+Tam+K%E1%BB%B3;
> sll=15.579176,108.470603；
> sspn=0.001573,0.002411；
> vpsrc=6;
> 即=UTF8；
> hnear=7+Nguy%E1%BB%85n+Ch%C3%AD+Thanh,+Tam+K%E1%BB%B3,+Qu%E1%BA%A3ng+Nam,+Vi%E1%BB%87t +南; ll=15.578003,108.471826；
> spn=0.006294,0.009645;
> t=m；
> z=17；
> ei=mwSGUKXwOK2tiQeHlYH4Ag;
> pw=2

我的英语不好，希望人们同情..

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-23T05:41:11.077

参数说明

`f=q` 控制 Google Maps 表单显示的 f 参数可以是 d（用于方向表单或 l 用于本地表单）。如果没有 f 参数，则显示默认搜索表单。

`hl=en` Google 地图支持有限数量的宿主语言，包括英语的 en 和法语的 fr。

`q=1600+Pennsylvania+Ave,+Washington,+DC` q 参数的值被视为是通过[http://maps.google.com](http://maps.google.com)上的查询框输入的。

`sll=36.60585,-121.858956` sll 包含执行业务搜索的中心点的纬度和经度。

`spn=0.006313,0.01133` spn 是地图的大致纬度/经度跨度。

`ie=UTF8` ie 是地图的字符编码。

`om=1` om 确定是否包含概览图。随着`om=0`概览图的关闭。

`iwloc=addr` iwloc 控制信息窗口的显示选项。

了解这些参数如何发挥作用的一个好方法是更改​​参数、添加新参数或删除示例 URL 中的参数，然后查看生成的地图。例如，如果你只有 q 参数，你仍然会得到一个具有一些默认行为的地图：

```
http://maps.google.com/maps?q=1600+Pennsylvania+Ave,+Washington,+DC 
```

也就是说，其他参数不是强制性的。让我们使用 z 参数来调整缩放系数：

```
http://maps.google.com/maps?q=1600+Pennsylvania+Ave,+Washington,+DC&z=0 
```

与以下相比：

```
http://maps.google.com/maps?q=1600+Pennsylvania+Ave,+Washington,+DC&z=17 
```

有一个完整的谷歌地图参数列表

*   `mrad`让您指定额外的目标地址。
*   `output=kml`获取要发送到 Google 地球的 KML 文件。
*   `layer=t`添加交通层。
*   `mrt=kmlkmz`显示“用户创建的内容”。例如，以下显示了用户生成的有关白宫周围酒店的信息：

    [http://maps.google.com/maps?f=q&hl=en&q=hotel&near=1600+Pennsylvania+Ave,+Washington,+DC&sll=36.60585,-121.858956&sspn=0.006313,0.01133&ie=UTF8&z=16&om=1&iwloc=addr&mrt =kmlkmz](http://maps.google.com/maps?f=q&hl=en&q=hotel&near=1600+Pennsylvania+Ave,+Washington,+DC&sll=36.60585,-121.858956&sspn=0.006313,0.01133&ie=UTF8&z=16&om=1&iwloc=addr&mrt=kmlkmz)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T03:54:21.073

```
<script type="text/javascript">  
  function initialize() {  
    var latlng = new google.maps.LatLng(15.578003, 108.471826);  
    var myOptions = {  
      zoom: 15,  
      center: latlng,  
      mapTypeId: google.maps.MapTypeId.ROADMAP  
    }  
    var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);  

    var marker = new google.maps.Marker({  
        position: latlng,   
        map: map,  
        icon: 'http://chart.apis.google.com/chart?chst=d_map_pin_letter&chld=A|FF0000|000000'  
    });     
  }  
</script> 
```

# php - 将数组和子数组包装在无序列表中

> ID：13023198
> 
> 赞同：0
> 
> 时间：2012-10-23T03:36:23.727
> 
> 标签：php, arrays, api, function

我正在使用返回数组的 API 调用。这是一个数组而不是一个刺痛。我想将数组包装在一个无序列表中。我需要两个单独的列表。

1）我想将所有东西（包括子数组）包装在一个无序列表中。

```
<ul>
  <li>[name]</li>
  <li>[name]</li>
  <li>[name]</li>
</ul> 
```

2) 我只想将 [name] 包装在一个无序列表中。

```
<ul>
  <li>[1347037874]</li>
    <ul>
      <li>[level_id]</li>
      <li>[name]</li>
      <li>[canceled]</li>
      <li>[cancelDate]</li>
      <li>and all the rest</li>
    </ul>
  <li>[1347037874]</li>
    <ul>
      <li>[level_id]</li>
      <li>[name]</li>
      <li>[canceled]</li>
      <li>[cancelDate]</li>
      <li>and all the rest</li>
    </ul>
</ul> 
```

我这样分配 API 调用：

```
$member_id = $logged_in_WP_user_id;
$member_levels = member_levels($member_id); 
```

仅用于解释（此行不在我的函数中......当我像这样输出 $member_levels 时：`htmlspecialchars(print_r(get_member($member_id),true))`我得到以下信息：

```
Array
( 
    [1347037874] => stdClass Object
        (
            [Level_ID] => 1347037874
            [Name] => HFM-Cardiac Resistance Training Program
            [Cancelled] => 
            [CancelDate] => 
            [Pending] => 
            [UnConfirmed] => 
            [Expired] => 
            [ExpiryDate] => 
            [Active] => 1
            [Status] => Array
                (
                    [0] => Active
                )

            [Timestamp] => 1349804951
            [TxnID] => WL-2-1347037874
        )

    [1347037875] => stdClass Object
        (
            [Level_ID] => 1347037875
            [Name] => HFM-Official Heart Health Guide
            [Cancelled] => 
            [CancelDate] => 
            [Pending] => 
            [UnConfirmed] => 
            [Expired] => 
            [ExpiryDate] => 
            [Active] => 1
            [Status] => Array
                (
                    [0] => Active
                )

            [Timestamp] => 1349804951
            [TxnID] => WL-2-1347037875
        )
) 
```

我尝试了几种将数组包装在数组中的方法，它接近但仍然可以使其正常工作。

谢！

ps 这里是我现在用来制作第一个列表的内容，但是如何让其他键值显示为键值 => 名称下的无序列表。

```
$member_levels = ember_levels($member_id);

  $output  = '';    
  $output .= '<ul>';                            
  foreach($member_levels as $level) {
    $output .= '<li>' . $level_array[]=$level->Name . '</li>';
  }
  $output .= '</ul>';

  print_r($output); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T03:56:27.610

如果您想将某些东西包装在另一层数组中，请执行以下操作：

```
$wrapped_thing = array($something); 
```

如果这不符合您的要求，那么您没有很好地描述它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T04:09:15.533

```
foreach($member_levels as $level)
{

  $level_array[]=$level->Level_ID;
  $name_array[]=$level->Name;
} 
```

# php - 从表中更新值 if/else

> ID：13023207
> 
> 赞同：1
> 
> 时间：2012-10-23T03:37:41.180
> 
> 标签：php, sql, database

在活动时更改状态，反之亦然，然后将数据库中的状态更改为非活动

```
if (isset($_GET['id']) && is_numeric($_GET['id']))
{
$id = $_GET['id'];
$result = mysql_query("UPDATE profile SET status='active' WHERE status='inactive' AND id =$id")
or die(mysql_error()); 

header("Location: admin-members.php");
}
else{
header("Location: admin-members.php");
} 
```

*这是一个工作代码，但我希望它能够双向工作。当我单击**不活动**时，它会将其更改为**活动状态**，反之亦然。我也用案例尝试过，但没有运气*

?>

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T03:39:43.523

也许您只想过滤它`$sid`并使用它`CASE`来切换`status`

```
UPDATE profile 
SET status = (CASE WHEN status = 'active' THEN 'inactive' ELSE 'active' END)
WHERE id = $id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T03:46:19.280

```
 $getStatus =mysql_query(" select status from profile where id =$id") 
or     die(mysql_error());
    $stat = mysql_fetch_assoc($getStatus);
    if($stat['status']== 'inactive')
    {
    $result = mysql_query("UPDATE profile SET status='active' AND id =$id");
    }
    elseif($stat['status']== 'active')
    {
    $result = mysql_query("UPDATE profile SET status='inactive' id =$id");

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T03:49:08.937

您也可以将您的状态作为 $_GET 变量传递，并检查它是否是可接受的值。

```
if (isset($_GET['id']) && is_numeric($_GET['id']) && in_array($_GET['status'],array('active','inactive')))
{
$id = $_GET['id'];
$status = $_GET['status'];
$result = mysql_query("UPDATE profile SET status='$status' WHERE id =$id")
or die(mysql_error()); 

header("Location: admin-members.php");
}
else{
header("Location: admin-members.php");
} 
```

*从这里你可能想要参数化你的查询以防止 SQL 注入。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-23T03:47:19.840

如果 active 和 inactive 都是可用的选项，我的意思是如果没有任何第三个选项，John Woo 的建议就可以了。然而，这是另一种方法。

```
UPDATE `profile`
SET `status` = IF(`status`='active','inactive','active')
WHERE `id` = $id 
```

如果有第三个选项，那么您可能希望在 when 子句中添加它：

```
WHERE `id` = $id AND `status` IN ('active','inactive') 
```

或者

```
WHERE `id` = $id AND (`status`='active' OR `status`='inactive') 
```

# android-ndk - Android NDK 链接到静态库

> ID：13023209
> 
> 赞同：1
> 
> 时间：2012-10-23T03:38:05.240
> 
> 标签：android-ndk

**对“get_int()”的未定义引用**

我正在尝试在 android 中构建共享库。这个库使用来自预建静态库“libATest.a”的函数我已经尝试了所有可以使用的方法。总是收到错误“未定义对 `get_int()' 的引用”，但我已经在 libAtest.a 中定义了它。寻求帮助！ **安卓 ndk r8**

![在此处输入图像描述](../Images/406f29a7a0a2764dfe997f74fdc10144.png)

安卓.mk：

```
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)
LOCAL_MODULE := ATest
LOCAL_SRC_FILES := libATest.a
include $(PREBUILT_STATIC_LIBRARY)

include $(CLEAR_VARS)
LOCAL_MODULE := capi
LOCAL_SRC_FILES := capi.cpp

LOCAL_STATIC_LIBRARIES := ATest
LOCAL_LDLIBS := -llog
#LOCAL_ALLOW_UNDEFINED_SYMBOLS := true
include $(BUILD_SHARED_LIBRARY) 
```

测试.h：

```
int get_int(); 
```

应用程序.mk：

```
APP_MODULES :=capi 
```

capi.cpp：

```
#include <time.h>
#include <stdio.h>
#include <stdlib.h>
#include <jni.h>
#include <string.h>
#include <android/log.h>

#include "atest.h"

#ifdef __cplusplus
extern "C" {
#endif

jstring Java_com_wzh_test_AndriodJNITestActivity_ttstest(JNIEnv* env, jobject thiz){
    get_int();
    return env->NewStringUTF("I'm from C!");
}

#ifdef __cplusplus
}
#endif 
```

libATest.a：

```
#include "atest.h"
int get_int(){
    return 55;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T03:42:00.877

您也需要包装`get_int`在一个`extern "C"`块中，否则它将被视为具有 C++ 链接。

您可以看出它被视为 C++ 函数，因为链接器错误提到了函数签名（`get_int()`而不是`get_int`）。

编辑：您的第二个问题是您调用了库源文件`libATest.a`！必须编译静态库。相反，您应该有一个`atest.c`包含源代码（`get_int`函数）的文件，并`LOCAL_SRC_FILES := atest.c`在构建`ATest`库时使用。您还需要删除`libATest.a`以避免任何依赖问题。

# objective-c - 获取发送到已释放实例的 [Not a type retain] 和 [Not a type class] 消息

> ID：13023213
> 
> 赞同：2
> 
> 时间：2012-10-23T03:38:46.377
> 
> 标签：objective-c, ios

我正在开发一个可以观看网络摄像头视频的应用程序。现在我想通过使用后台线程添加一个新的录制视频功能。

在 .h 文件中

```
@property (nonatomic, retain) UIImage *image;
@property (nonatomic, retain) NSData *imageData; 
```

在 .m 文件中。当用户按下记录按钮时，它开始将 ImageData 保存到 Documents Dir

```
@synthesize image;
@synthesize imageData
...

- (void) playVideo:(NSData *)data { 
        ...
     // play video code
     CGBitmapInfo bitmapInfo = kCGBitmapByteOrderDefault;
     CGDataProviderRef provider = CGDataProviderCreateWithCFData(data);
     CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
     CGImageRef cgImage = CGImageCreate(width, hieght, 8, 24,
                            bpp * width, colorSpace, bitmapInfo,
                            provider, NULL, NO, kCGRenderingIntentDefault); 
    CGColorSpaceRelease(colorSpace);
    [videoImage = [setImage: UIImage imageWithCGImage:cgImage]];

    CGImageRelease(cgImage);
    CGDataProviderRelease(provider);
    // play video code end
    ...
    if(record == TRUE) {
        dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 
            (unsigned long)NULL), ^(void) {
            image = [UIImage imageWithCGimage:cgImage];
            imageData = [UIImageJPEGRepresentation(image, 1)];
            [imageData writeToFile:DirPath atomically:NO];
        });
    }
} 
```

到目前为止，播放视频代码似乎工作正常。然后我在它下面添加线程并收到错误消息

```
[Not a type retain]: message sent to deallocated instance 
[Not a type class]: message sent to deallocated instance
```

在线程中

```
image = [UIImage imageWithCGimage:cgImage];
```

你能告诉我为什么会这样吗？或有其他方法可以做到这一点。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T07:14:16.163

您在调度之前释放 cgImage。->`CGImageRelease(cgImage);`
将此行移动到块的末尾（内部）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T03:54:50.090

如果`cgImage`是`CGImageRef`类型，那么这意味着它是一个指向 C-struct 的指针，尝试将其强制转换为 Objective-C 对象：

```
 //set play video code like this
        [videoImage setImage: [UIImage imageWithCGImage:(id)cgImage]]; 
```

# objective-c - 正则表达式搜索一个字母

> ID：13023214
> 
> 赞同：-1
> 
> 时间：2012-10-23T03:38:54.007
> 
> 标签：objective-c, regex

我在 Objective-C 中使用正则表达式，我想搜索“a”字母。经过几次测试，我发现如果我想搜索所有“a”字母，我只需要使用简单的正则表达式：

> 一种

但是如果我想在开头匹配“a”字母，我需要使用正则表达式：

> \A*

但不是

> \Aa

有什么不同？你可以解释吗。谢谢！！！

编辑：

我的字符串是

> “ad db bd”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T03:49:04.090

*（星号或星号）与前面的字符匹配 0 次或多次，例如，tre* 将找到 tree（2 次）、tread（1 次）和 trough（0 次）。
类似地，\a* 会找到 a、aa、aaa 等，而 \a 只会在字符串中找到 a 的单个实例。您可以从这里了解更多信息[http://www.zytrax.com/tech/web/regex.htm](http://www.zytrax.com/tech/web/regex.htm)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-23T04:22:04.593

我找到了答案。正确的正则表达式是“\Aa”，但我需要使用下面的字符串来描述正则表达式：

> \\啊

这是因为字符串中的转义字符“\\”描述了“\”。

谢谢大家

# c# - 在c#.net中单击取消时如何关闭所有数据库连接

> ID：13023217
> 
> 赞同：0
> 
> 时间：2012-10-23T03:39:00.450
> 
> 标签：c#, .net

我的系统遇到超时过期问题。有关更多详细信息，请参阅错误消息：

```
Timeout expired.  The timeout period elapsed prior to obtaining a connection from the pool.  This may have occurred because all pooled connections were in use and max pool size was reached. 
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.InvalidOperationException: Timeout expired.  The timeout period elapsed prior to obtaining a connection from the pool.  This may have occurred because all pooled connections were in use and max pool size was reached.

Source Error: 

An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.

Stack Trace: 

[InvalidOperationException: Timeout expired.  The timeout period elapsed prior to obtaining a connection from the pool.  This may have occurred because all pooled connections were in use and max pool size was reached.]
   System.Data.ProviderBase.DbConnectionFactory.GetConnection(DbConnection owningConnection) +5079753
   System.Data.ProviderBase.DbConnectionClosed.OpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory) +126
   System.Data.SqlClient.SqlConnection.Open() +125
   SubSonic.SqlDataProvider.CreateConnection(String newConnectionString) +37
   SubSonic.SqlDataProvider.CreateConnection() +25
   SubSonic.AutomaticConnectionScope..ctor(DataProvider provider) +62
   SubSonic.SqlDataProvider.GetReader(QueryCommand qry) +54
   SubSonic.DataService.GetReader(QueryCommand cmd) +25
   SubSonic.StoredProcedure.ExecuteTypedList() +47
   Db.Employee.FindByUsername(String sUsername) in d:\Hudson\jobs\SMART Staff - Dev\workspace\Staff\site\Classes\DataAccess\Employee.cs:426
   CurrentUser.get_SmartID() in d:\Hudson\jobs\SMART Staff - Dev\workspace\Staff\site\Classes\CurrentUser.cs:38
   DbRoleProvider.GetRolesForUser(String usernameIgnored) in d:\Hudson\jobs\SMART Staff - Dev\workspace\Staff\site\Classes\DbRoleProvider.cs:21
   System.Web.Security.RolePrincipal.IsInRole(String role) +182
   System.Web.Configuration.AuthorizationRule.IsTheUserInAnyRole(StringCollection roles, IPrincipal principal) +132
   System.Web.Configuration.AuthorizationRule.IsUserAllowed(IPrincipal user, String verb) +264
   System.Web.Configuration.AuthorizationRuleCollection.IsUserAllowed(IPrincipal user, String verb) +201
   System.Web.Security.UrlAuthorizationModule.OnEnter(Object source, EventArgs eventArgs) +9018637
   System.Web.SyncEventExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +148
   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +75 
```

只是徘徊有没有人知道如何关闭当我单击取消或刷新 c# .net 中的页面时连接的所有数据库连接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T05:19:01.307

您应该注意在代码结束之前释放所有对象，对于数据库连接，您应该确保尽可能短地打开它们，例如您可以使用 (using) 关键字：

```
using (SqlConnection conn = new SqlConnection(connectionString))
{
  conn.Open();
  ///Use the connection ....
  ///.
  ///.
  ///.
  /// The connection will be closed and disposed automatically before the end of (using) block;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T03:42:19.637

也许这可以帮助你：

[我怎样才能杀死所有用户到我的 sql server 数据库的连接？](http://social.msdn.microsoft.com/Forums/sa/adodotnetentityframework/thread/b41a7376-d5cd-4339-92b3-158e88a96dff)

但不确定，你没有告诉你正在使用什么 DBMS。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T06:41:01.533

打开连接后，尝试像这样关闭它：

```
 using (SqlConnection conn = new SqlConnection(connectionString))
    {  
    try          
    {    
    //
    //
    //             
    conn.Close();
    }
    catch (Exception ex)
    {
    MessageBox.Show(ex.Message);
    }
    finally
    {
    if (conn != null) conn.Close();
    }
    } 
```

# php - wampserver 2 - 显示为在线但不工作

> ID：13023218
> 
> 赞同：2
> 
> 时间：2012-10-23T03:39:02.897
> 
> 标签：php, apache, localhost, wampserver

我正在尝试在 wampserver 2 上使用 php。当我打开 wampserver 时，图标的颜色只会从红色变为橙色（它应该从红色->橙色->绿色）。我永远无法显示本地主机。我尝试从计算机中完全删除 wampserver，重新启动计算机，然后再次安装 wampserver 2。我仍然遇到同样的问题。为什么会发生这种情况，我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T03:48:29.140

有时我也会遇到这种情况，我有一个问题要问你。你使用Skype？如果你的 Skype 在运行 wampserver 之前是打开的，你最好先退出你的 Skype。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T04:20:19.203

如果您安装了其他数据库服务器，例如 SQLserver2005 或 2008，首先使用控制面板中的管理工具停止该服务，然后从管理工具启动 wampserver apache 服务。这个真的对我有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T03:59:05.733

并检查谁实际上在使用端口 80。可能是 IIS 也正在使用该端口。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T16:25:24.027

伙计们，我也多次遇到同样的问题。我做了以下事情。你也请试试

1）首先，通过控制面板卸载wamp服务器。

2）卸载过程完成后，请从您的安装目录中删除wamp文件夹（它通常位于c盘本身。如果您的wamp文件夹在c盘，请删除它。）。如果您没有删除此文件夹，您可能会再次遇到问题。

3）现在重新启动您的计算机

4) 安装最新版本的 wamp 服务器。

5）检查wamp服务器是否工作？

6）仍然无法正常工作，然后通过访问以下链接更改 wamp 的端口号

```
 [http://www.invialgo.com/2011/change-wampserver-port/][1] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-18T12:01:57.870

转到 wamp 服务器 -> apache -> httpd.conf 打开该文件更改 === #Listen 12.34.56.78:80 Listen 80 to

# 收听 12.34.56.78:8080

听 8080 然后重启你做的服务

# android - 如何创建带有百分比进度条的启动画面？

> ID：13023219
> 
> 赞同：-2
> 
> 时间：2012-10-23T03:39:05.750
> 
> 标签：android

我想在启动时通过带有`actual`应用程序负载百分比的进度条为我的应用程序显示启动画面。

我有以下要求/查询 -

1.  我应该使用哪个组件来显示进度条
2.  如果闪屏本身是应用程序的一部分，如何计算负载百分比
3.  触摸启动画面时，我想突出显示进度条

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T04:33:27.860

您可以创建线程或使用异步任务并创建自定义进度条

asynctask 示例（仅伪代码）

```
private class SplashLoading extends AsyncTask<Variable, Variable, Variable> {

     @Override
     protected void onPreExecute(Variable) {
         Show the progress UI in here
     }
     @Override
     protected Long doInBackground(Variable) {
        do the heavy task here and don't forget to publish the progress
     }

     @Override
     protected void onProgressUpdate(Variable) {
         set the progress here
     }

     @Override
     protected void onPostExecute(Variable) {
         what will you do after it complete?
     }
 } 
```

我的 asynctask 伪代码由 4 个函数组成

1.  onPreExecute 将在任务执行后立即在 UI 线程上调用。此步骤通常用于设置任务，例如通过在用户界面中显示进度条。

2.  在 onPreExecute() 执行完成后，将立即在后台线程上调用 doInBackground。此步骤用于执行可能需要很长时间的后台计算。

3.  onProgressUpdate 将在调用 publishProgress(Progress...) 后在 UI 线程上调用。执行的时间是不确定的。此方法用于在后台计算仍在执行时在用户界面中显示任何形式的进度。例如，它可用于动画进度条或在文本字段中显示日志。

4.  onPostExecute(Result) 将在后台计算完成后在 UI 线程上调用。后台计算的结果作为参数传递给该步骤。

您还可以添加 onCancelled() 以防您想在任务取消时进行处理

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T04:46:26.433

试试这个：我试过了，这没有错误

```
/**
 * Async class to get News
 * 
 */
protected class AsynchTask extends AsyncTask<Void, Integer, Integer> {

    @Override
    protected void onPreExecute() {

    }

    @Override
    protected Integer doInBackground(Void... args) {

        download();

        return 1;
    }

    private void download() {
        // We are just imitating some process thats takes a bit of time
        // (loading of resources / downloading)
        int count = 10;
        for (int i = 0; i < count; i++) {

            // Update the progress bar after every step
            int progress = (int) ((i / (float) count) * 100);
            publishProgress(progress);

            // Do some long loading things
            try {
                Thread.sleep(2000);
            } catch (InterruptedException ignore) {
            }
        }

    }

    @Override
    protected void onProgressUpdate(Integer... values) {
        super.onProgressUpdate(values);
        progressBar1.setProgress(values[0]);
    }

    @Override
    protected void onPostExecute(Integer a) {
        progressBar1.setVisibility(View.GONE);
    }
} 
```

# php - Mysql 错误 1130：未知域连接到我的服务器

> ID：13023222
> 
> 赞同：1
> 
> 时间：2012-10-23T03:39:27.843
> 
> 标签：php, mysql, connection, dreamhost, mysql-error-1130

在为客户端测试原型站点（包含 php 和 mysql 数据库）时，我注意到一个奇怪的 mysql 错误，这让我感到担心/困惑。如果这是一个简单或明显的问题，请原谅我，但我无法找到充分解释这一点的文章。

* * *

**情况：** 单击该站点时，我收到以下错误消息：“连接错误（1130）主机'kingdomofkicks.co.uk'不允许连接到此mysql服务器”

这令人困惑，因为“kingdomofkicks.co.uk”对我来说绝对没有任何意义。为了记录，我们的网站托管在 Dreamhost.com 上。

引发错误的 php/mysql 代码是：

```
 //connect to the database
    $mysqli = new mysqli("$dbhost", "$dbuser", "$dbpass", "$dbname");
    //If any errors occur, kill the script and display the error. 
    if ($mysqli->connect_error) {
        die('Connect Error (' . $mysqli->connect_errno . ') '. $mysqli->connect_error);
    } 
```

该站点在此错误之前运行良好，刷新后它现在似乎运行良好。

此外，我查看了 mysql 服务器以查看是否有任何奇怪的地方，并注意到该用户被列为 [myusername]@kingdomofkicks.co.uk。在此之前我从未注意到这一点。

* * *

**我的问题：**

1.  发生了什么导致显示此错误？

2.  这是我需要担心的事情吗？特别是因为我的 mysql 用户现在似乎列在此域下。

3.  将来我可以做些什么来防御/防止这种情况发生吗？

预先感谢您的帮助。

# javascript - Backbone.Marionette 嵌套的 ItemView 不渲染或渲染“空白”视图/模板

> ID：13023229
> 
> 赞同：1
> 
> 时间：2012-10-23T03:40:28.593
> 
> 标签：javascript, backbone.js, marionette

在导航到特定 URL 时，会触发一个控制器方法，它将 ItemView 加载到我的应用程序的一个区域中。这个 ItemView 本身（父级）将包含一些子 ItemView，当它自己渲染时将它们全部渲染。这是父项视图：

```
return Backbone.Marionette.ItemView.extend({
    template: Handlebars.compile(template),
    ui: {
        textInput01: "#text-input-01"
    },
    events: {
        // no events yet
    },
    initialize: function() {
        // no init yet
    },
    onRender: function() {
        this.appRoutefinderTextinputItemView = new AppRoutefinderTextinputItemView({parentView: this});

        $(this.ui.textInput01).html(this.appRoutefinderTextinputItemView.render());
    }
}); 
```

这是当前唯一的 ItemView：

```
return Backbone.Marionette.ItemView.extend({
    template: Handlebars.compile(template),
    events: {
        // no events yet
    },
    initialize: function() {
        // no init yet
    },
    onRender: function() {
        // no onRender yet
    }
}); 
```

出于某种原因，我无法理解，尽管子级上的`initialize`和`onRender`方法都在触发，并且所有必要的数据似乎都存在，但子级要么没有被渲染，要么以“空白”方式渲染，导致父级不变看法。

据我了解，我不需要调用`render()`孩子，因为它在实例化/引用 ItemView 时暗示？即使我挂断`render()`电话，也会得到相同的结果。

我必须假设有一些关于从我刚刚丢失的其他 ItemViews 中渲染 ItemViews 的东西，但是通过文档搜索似乎没有帮助。

第二个问题是：我是否以正确的方式实例化子视图，或者有更好的方法吗？

*编辑 - 所以经过一些试验，似乎“接受”的解决方案只是让父视图成为一个布局，它是一个扩展的 ItemView。这确实有效。但是，我仍然想知道为什么 ItemView 中的 ItemView 不起作用。我是否打算在 ItemView 上集成一个手写`render()`方法，我是否要保持这种方式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T14:19:37.460

您的原始代码的问题是这一行：

`$(this.ui.textInput01).html(this.appRoutefinderTextinputItemView.render());`

主干视图的`render`方法不返回呈现的 HTML。此方法执行渲染并更新`el`视图。此方法的返回值是视图本身。Marionette 不会改变这种行为。

您需要更改代码以使用视图的`el`. 另请注意，这`this.ui.textInput01`已经是一个 jQuery 选定对象，因此您不需要再次包装它。

```
 this.appRoutefinderTextinputItemView.render();
this.ui.textInput01.html(this.appRoutefinderTextinputItemView.el); 
```

# java - Java 类扩展（覆盖）

> ID：13023230
> 
> 赞同：0
> 
> 时间：2012-10-23T03:40:33.127
> 
> 标签：java

我正在尝试扩展二进制数类，但是当我这样做时，我无法访问某些基类函数，例如我试图在 main 中运行的最后一个函数

```
import java.util.*;

class BinaryNumber
{
    private boolean b[];

    public void setBit(int index, boolean value)
    {
        b[index] = value;
    }

    public boolean getBit(int index)
    {
        return b[index];
    }

    public void clear()
    {
        for (int i = 0; i < 8; i++)
            b[i] = false;
    }

    public BinaryNumber()
    {
        b = new boolean[8];
        for (int i = 0; i < 8; i++)
        {
            b[i] = false;
        }
    }

    public void inputNumber(int a)
    {

        if (a > 11111111)
        {
            System.out.println(" Exception Number to Large Nothing Entered ");
        }
        else
        {

            int number = a;
            int c = 7;
            int digit = 0;

            for (int i = 0; i < 8; i++)
            {
                digit = number % 10;
                if (digit == 1)
                {
                    b[c] = true;
                }
                else if (digit == 0)
                {
                    b[c] = false;
                }
                else
                {
                    System.out.println(" Only Binary Number Accepted ");
                    clear();
                    i = 8; // break
                }
                number = number / 10;
                c--;
            }
        }
    }

    public void outputNumber()
    {
        for (int i = 0; i < 8; i++)
        {
            if (b[i] == true)
            {
                System.out.print("1");
            }
            else
            {
                System.out.print("0");
            }
        }
        System.out.println("");
    }

    public BinaryNumber ANDNumbers(BinaryNumber second)
    {
        BinaryNumber result = new BinaryNumber();
        boolean temp = false;
        for (int i = 0; i < 8; i++)
        {
            result.setBit(i, (b[i] && second.b[i]));
        }
        return result;
    }
} 
```

类 ExtendedBinaryNumber

```
class ExtendedBinaryNumber extends BinaryNumber
{
    public ExtendedBinaryNumber binaryAdd(ExtendedBinaryNumber A)
    {
        ExtendedBinaryNumber result = new ExtendedBinaryNumber();
        boolean carry = false;

        for (int i = 7; i >= 0; i--)
        {
            if (getBit(i) == true)
            {
                if (A.getBit(i) == false)
                {
                    if (carry == false)
                    {
                        carry = false;
                        result.setBit(i, true);
                    }
                    else
                    {
                        carry = true;
                        result.setBit(i, false);
                    }
                }
                else
                {
                    if (carry == false)
                    {
                        carry = true;
                        result.setBit(i, false);
                    }
                    else
                    {
                        carry = true;
                        result.setBit(i, true);
                    }
                }
            }
            else
            {
                if (A.getBit(i) == false)
                {
                    if (carry == false)
                    {
                        carry = false;
                        result.setBit(i, false);
                    }
                    else
                    {
                        carry = true;
                        result.setBit(i, true);
                        carry = false;
                    }
                }
                else
                {
                    if (carry == false)
                    {
                        carry = false;
                        result.setBit(i, true);
                    }
                    else
                    {
                        carry = true;
                        result.setBit(i, false);
                    }
                }

            }
        }
        return result;
    }
} 
```

Q6级

```
class Q6
{
    public static void main(String args[])
    {

        ExtendedBinaryNumber numA = new ExtendedBinaryNumber();
        int a = Integer.parseInt("10010111");
        numA.inputNumber(a);
        numA.outputNumber();

        ExtendedBinaryNumber numB = new ExtendedBinaryNumber();
        int b = Integer.parseInt("10010101");
        numB.inputNumber(b);
        numB.outputNumber();

        System.out.println("");

        // BinaryNumber c=numA.ANDNumbers(numB);
        // c.outputNumber();

        // ExtendedBinaryNumber dd=numA.binaryAdd(numB);
        // dd.outputNumber();

        ExtendedBinaryNumber dde = numA.ANDNumbers(numB);
        dde.outputNumber();

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T03:53:29.950

在类 ExtendedBinaryNumber

```
@override
public void outputNumber() {
  super.outputNumber();
}

@override
public BinaryNumber ANDNumbers(BinaryNumber second) {
  return super.BinaryNumber();
} 
```

Q6 班

```
BinaryNumber c=numA.ANDNumbers(numB);
    // c.outputNumber();

ExtendedBinaryNumber dd=numA.binaryAdd(numB);
dd.outputNumber(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T03:45:14.367

`numA.ANDNumbers`返回 a`BinaryNumber`并将其分配给`ExtendedBinaryNumber`变量。默认情况下，您应该进行向下转换以允许这样做，但请注意`ExtendedBinaryNumber`在执行该行时您确实返回了一个实例，否则您将拥有一个`ClassCastException`.

解决此问题的最佳方法是：

```
BinaryNumber dde=numA.ANDNumbers(numB);
dde.outputNumber(); 
```

* * *

如果你真的想使用 Java 中的覆盖能力，你可以覆盖`ANDNumbers`你的类中的方法`ExtendedBinaryNumber`并返回一个协变类型，在这种情况下是`ExtendedBinaryNumber`：

```
class ExtendedBinaryNumber {
    public ExtendedBinaryNumber binaryAdd(ExtendedBinaryNumber A) {
        //here goes your actual code...
    }

    @Override
    public ExtendedBinaryNumber ANDNumbers(BinaryNumber second) {
        //fancy override implemententation that returns ExtendedBinaryNumber instance
    }
} 
```

通过这样做，现在您的行可以编译并运行愉快

```
ExtendedBinaryNumber dde = numA.ANDNumbers(numB);
dde.outputNumber(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T03:49:03.040

`ANDNumbers`方法返回`BinaryNumber`，因此该行中有不兼容的类型`ExtendedBinaryNumber dde=numA.ANDNumbers(numB);`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T03:51:12.630

没有覆盖问题。除了方法的返回类型之外，你很好。

改变

```
 ExtendedBinaryNumber dde = numA.ANDNumbers(numB); 
```

至

```
 BinaryNumber dde = numA.ANDNumbers(numB); 
```

作为`ANDNumbers`方法返回`BinaryNumber`。

# php - html FileReader：将 blob 转换为图像文件？

> ID：13023231
> 
> 赞同：0
> 
> 时间：2012-10-23T03:40:33.553
> 
> 标签：php, javascript, html

客户端代码

```
<head>
<script>
var reader = new FileReader(); 
var objVal;
var image = new Image();
reader.onload = function(e) {
    document.getElementById('propertyImg').setAttribute('src', e.target.result);
};

function readURL(input){    
    if(input.files && input.files[0]){
        reader.readAsDataURL(input.files[0]);
    }
    else {
        document.images[0].src = input.value || "No file selected";
    }
}

function sendPost(){
            var url = 'http://myurl.com';
            var name = document.getElementById('fileInput').files[0].name;
    var data = document.getElementById('propertyImg').getAttribute('src');
    var f = document.createElement("form"); 
    var imgName = document.createElement("input"); 
    var imgData = document.createElement("input"); 
    var f_attr = { 'method' : 'post' , 'action' : url};
    var imgName_attr = {"type" : "hidden", "name" : "img_name", "value" : name};
    var imgData_attr = {"type" : "hidden", "name" : "data", "value" : data};
    setAttributes(f, f_attr);
    setAttributes(imgName, imgName_attr);
    setAttributes(imgData, imgData_attr);
    f.appendChild(imgName);
    f.appendChild(imgData);
    document.body.appendChild(f); 
    f.submit(); 
}

function setAttributes(el, attrs) {
    for(var key in attrs) {
        el.setAttribute(key, attrs[key]);
    }
}
</script>
<body>
   <img id="propertyImg" src="./img/sprite.png"></img>  
   <input type='file' id='fileInput'class='width70_prop' onchange="readURL(this);"></input>
   <button onclick="sendPost()">sendPost</button>
</body> 
```

服务器端代码

```
<html>
    <head>
    <?
          $FileName = $_POST['img_name']; 
          $data = $_POST['data']; 
          list($header, $content) = split('[,]', $data); 
          file_put_contents($FileName, base64_decode($content));
          print "Data Written"; 
     ?>
    <script>
    function showImg(){
    var imgSrc =  "<?=$data?>";
    var imgDiv = document.getElementById('imgDiv');
    imgDiv.src = imgSrc;
    }
    </script>
    </head>
    <body>
    <img id='imgDiv'></img>
    <button onclick="showImg()">show</button>
    </body>
</html> 
```

发送到服务器的 blob 包含有关标头及其内容的信息。当我拆分标头然后保存解码后的内容时，它起作用了....我更改了上面现在可以使用的代码。谢谢各位

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T03:50:06.773

首先，没有任何内容，`$_POST["data"]`因为索引（数据）是由 JSON`key : value`对中的键命名的，而不是 JavaScript `var`。

其次，你应该改变这个：

```
$Handle = fopen($FileName, 'w');
fwrite($Handle, $data); 
print "Data Written"; 
fclose($Handle); 
```

对此：

```
file_put_contents($FileName, base64_decode($data)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T03:52:33.007

哎呀..有人打败了我...当您在客户端以 Dataurl 读取文件时： reader.readAsDataUrl(...) 文件被编码为 base64 字符串.. 这就是为什么如果您直接保存数据，它是格式不正确。正如前面的答案所述，您将数据 base64_decode 为正确的格式。

# node.js - 编译节点给出“No-old-style-declaration”标志错误

> ID：13023239
> 
> 赞同：0
> 
> 时间：2012-10-23T03:42:10.013
> 
> 标签：node.js, gcc, compiler-errors

我正在为外部系统（科学 Linux）编译 Node.js，并且在编译时出现此错误。我已经在 README 中检查了构建 Node 的先决条件，并且我安装了 Python，并且我的 make 版本是 3.81。我不知道为什么那个标志会抛出 cc1 ......

```
make -C out BUILDTYPE=Release V=1
make[1]: Entering directory `/home/nick/node_src/out'
...
...
...
cc '-D_LARGEFILE_SOURCE' '-D_FILE_OFFSET_BITS=64' '-DL_ENDIAN' '-DOPENSSL_THREADS' '-DPURIFY' '-D_REENTRANT' '-DOPENSSL_NO_DGRAM' '-DOPENSSL_NO_DTLS1' '-DOPENSSL_NO_SCTP' '-DOPENSSL_NO_SOCK' '-DOPENSSL_NO_RDRAND' '-DOPENSSL_NO_GOST' '-DOPENSSL_NO_HW_PADLOCK' '-DENGINESDIR="/dev/null"' '-DOPENSSLDIR="/etc/ssl"' '-DTERMIOS' -I../deps/openssl -I../deps/openssl/openssl -I../deps/openssl/openssl/crypto -I../deps/openssl/openssl/crypto/asn1 -I../deps/openssl/openssl/crypto/evp -I../deps/openssl/openssl/crypto/md2 -I../deps/openssl/openssl/crypto/modes -I../deps/openssl/openssl/crypto/store -I../deps/openssl/openssl/include -I../deps/openssl/config/k8  -Wall -Wextra -Wno-unused-parameter -pthread -m64 -Wno-missing-field-initializers -Wno-old-style-declaration -O2 -fno-strict-aliasing -fno-tree-vrp -fno-tree-sink  -MMD -MF /home/nick/node_src/out/Release/.deps//home/nick/node_src/out/Release/obj.target/openssl/deps/openssl/openssl/ssl/bio_ssl.o.d.raw  -c -o /home/nick/node_src/out/Release/obj.target/openssl/deps/openssl/openssl/ssl/bio_ssl.o ../deps/openssl/openssl/ssl/bio_ssl.c
cc1: error: unrecognized command line option "-Wno-old-style-declaration"
make[1]: ***     [/home/nick/node_src/out/Release/obj.target/openssl/deps/openssl/openssl/ssl/bio_ssl.o] Error 1
make[1]: Leaving directory `/home/nick/node_src/out'
make: *** [node] Error 2 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T07:11:19.857

此错误来自`cc1`（GCC 的一部分），因此与 make 无关。

`-W[no-]old-style-declaration`警告选项是在2007 年初的[GCC 更改](http://gcc.gnu.org/viewcvs?view=revision&revision=120347)中引入的，并且很可能首先出现在 GCC 4.3 中。因此，您的 GCC 似乎早于 4.3。

你可以通过升级 GCC 来解决这个问题，但最好还是坚持使用 Scientific Linux 提供的 GCC。可以想象，Node.js 有一个配置选项来控制它，或者更可能你可以手动编辑`-Wno-old-style-declaration`它出现在 makefile 源中的任何位置。

如果 Node.js 的 README 没有将 GCC 4.3 列为先决条件，您可能需要向 Node.js 维护者指出这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T16:00:14.897

这个依赖已经在[这个节点问题](https://github.com/joyent/node/issues/4186)中得到确认，并且有一个补丁可以使用。（为我工作！）

一种解决方法是（暂时）切换到不包含此依赖关系的旧版本的 Node。

# iphone - 在后台继续播放 MPMoviePlayerViewController 中的电影

> ID：13023241
> 
> 赞同：0
> 
> 时间：2012-10-23T03:42:24.607
> 
> 标签：iphone, ios, mpmovieplayercontroller

我有一个 MPMoviePlayerViewController 可以在我的应用程序中播放电影。

启用了多任务处理，以便我可以返回主屏幕或锁定设备，然后使用音乐控件继续播放音频。问题是当应用程序失去焦点时音频会停止，因此您必须手动按下播放才能再次启动它。

当然，默认音乐应用程序以及诸如 Ambiance 之类的其他应用程序会继续在后台播放音频，但是这些应用程序只会播放音频，而我的应用程序的音频源是视频 - 当 MPMoviePlayerViewController 失去焦点时是否可以继续播放？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-13T11:14:33.173

这对我有用。按下视频播放器完成按钮时加载错误的 url。例如

```
 [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(moviePlaybackComplete:)
                                                 name:MPMoviePlayerPlaybackDidFinishNotification
                                               object:yourViewController]; 
```

并实施

```
- (void)moviePlaybackComplete:(NSNotification *)notification
{
    self.playerViewController=[self.playerViewController initWithContentURL:[NSURL URLWithString:@"dummyUrl"]];
    [self.playerViewController.moviePlayer stop];
    MPMoviePlayerViewController *moviePlayerController = [notification object];
    [[NSNotificationCenter defaultCenter] removeObserver:self
                                                    name:MPMoviePlayerPlaybackDidFinishNotification
                                                  object:moviePlayerController];
} 
```

这工作得很好。谢谢

# webgl - 将鼠标位置转换为对象坐标

> ID：13023244
> 
> 赞同：0
> 
> 时间：2012-10-23T03:42:47.323
> 
> 标签：webgl, glge

我正在尝试使用 Collada 对象将基本的鼠标集成到一个小型演示中。我能够获得正确的鼠标 x 和 y，但我不知道如何将它们转换为用于对象的坐标。

我希望 GLGE 函数`duck.setLoc(mousepos.x, mousepos.y)`可以从像素转换，但事实并非如此。

我需要做什么才能将 2D mousepos 像素转换为 3D 点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-05T22:09:36.777

如果您有屏幕坐标 (x0, y0) 的点，您可以取消投影它们并计算它的 3d 坐标，例如，将 z-coord 设置为接近剪切窗格。就像您对 (x,y, near-z) 使用投影矩阵获取屏幕坐标一样，现在您进行逆向处理。

但是如果你想在 3d 中获取交点的坐标，那么你可以使用上面提到的这个采样点和相机的原点在场景中投射光线并计算交点。

伪代码：

```
ray.origin = camera.position;  // vec3
ray.direction = samplePoint.position - camera.position; //vec3

check_intersections_with_triangles_in_scene( scene, ray ); // retrieve 3d coord of intersection 
```

例如，如果您使用的是 Three.js，所有这些功能都已内置在其中，因此轻而易举。检查这个演示：[http](http://threejs.org/examples/webgl_interactive_draggablecubes.html) ://threejs.org/examples/webgl_interactive_draggablecubes.html 。

# java - ImageJ 与 BufferedImage 的兼容性

> ID：13023248
> 
> 赞同：3
> 
> 时间：2012-10-23T03:43:26.923
> 
> 标签：java, image-processing, awt, bufferedimage, imagej

我可以使用ImageJ 类实例中的`BufferedImage`对象吗？`java.awt.image.BufferedImage`例如，我可以使用`BufferedImage`对象*而不是*对象`ImagePlus`吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T03:48:14.747

从[`ImagePlus(String,java.awt.Image)`](http://rsb.info.nih.gov/ij/developer/api/ij/ImagePlus.html#ImagePlus%28java.lang.String,%20java.awt.Image%29).

> 从 Image**或 BufferedImage 构造 ImagePlus。**..

**结果：**`ImagePlus`在需要时使用该构造函数 创建一个。

# c# - 比较对象列表

> ID：13023249
> 
> 赞同：0
> 
> 时间：2012-10-23T03:43:42.210
> 
> 标签：c#

我有 3 种方法应该返回相同的数据。数据是一个列表，`MyObjectModel`我想检查这三个列表是否包含相同的数据。我想在 json 中序列化 3 个列表中的每一个，并计算字符串的长度是否都相同。

有更好的方法吗？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T03:47:00.200

使用[`Enumerable.SequenceEqual`](http://msdn.microsoft.com/en-us/library/bb348567.aspx)：

```
if(list1.SequenceEqual(list2) && list2.SequenceEqual(list3)) {
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T03:47:57.313

您可能希望使用 HashSet 来执行此操作。

首先，将第一个列表中的所有项目添加到 HashSet。

然后迭代第二个列表，询问 HashSet 是否包含该项目。

如果所有都包含在那里，那么它们包含相同的元素。

**例子**

```
var list1 = new string[] { "A", "B", "C" };
var list2 = new string[] { "B", "A", "C" };
var list3 = new string[] { "C", "B", "A" };

var hs = new HashSet<string>(list1);
if (list2.All(x => hs.Contains(x)) && list3.All(x => hs.Contains(x)))
{

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T04:00:01.403

```
var isEqual=List<type>.Equals(List1,List2)
var allEqual= isEqual && List<type>.Equals(List1,List3) 
```

# c++ - C++、Mac OS X 10.6.8 中的串行端口问题

> ID：13023250
> 
> 赞同：0
> 
> 时间：2012-10-23T03:44:10.677
> 
> 标签：c++, macos, serial-port

我已经运行了以下代码，并且一直运行。但是，它似乎没有等待任何输入，我从缓冲区获得的唯一输出是“\377”我一直在阅读 POSIX 操作系统的串行编程指南并尝试使用那里提供的一些建议，但我认为我的配置中的某些东西可能会把它扔掉。任何想法将不胜感激。

```
#include <iostream>
using namespace std;
#include <stdio.h>   /* Standard input/output definitions */
#include <string.h>  /* String function definitions */
#include <unistd.h>  /* UNIX standard function definitions */
#include <fcntl.h>   /* File control definitions */
#include <errno.h>   /* Error number definitions */
#include <termios.h> /* POSIX terminal control definitions */

int open_port() {
    int fd; //Descriptor for the port
    fd = open("/dev/tty.usbmodemfa141", O_RDWR | O_NOCTTY | O_NDELAY);
    if (fd == -1) {
        cout << "Unable to open port. \n";
}
else {
        cout << "Port opened.\n";
}
cout << "Descriptor in open:";
cout << fd;
cout << "\n";
return fd;
}

int configure_port (int fd) {
struct termios options;

tcgetattr(fd, &options);
cfsetispeed(&options, B9600);
cfsetospeed(&options, B9600);

options.c_cflag &= ~PARENB;
options.c_cflag &= ~CSTOPB;
options.c_cflag &= ~CSIZE;
options.c_cflag |= CS8;
options.c_cflag |= (CLOCAL | CREAD);
tcsetattr(fd, TCSANOW, &options);

cout << "Port configured.\n";

return (fd);
}

void read_data(int fd) {
cout << "Reading data from: ";
cout << fd;
cout << "\n";

char buffer;
buffer = fcntl(fd, buffer, 0);
cout << "Buffer: ";
cout << buffer;
cout << "\n";
}

int main (int argc, char * const argv[]) {
int fd; //Descriptor for the port

fd = open_port();
configure_port(fd);
cout << "Descriptor: ";
cout << fd;
cout<< "\n";
read_data(fd);
cout << "Data read.";

return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T04:41:28.793

你没有从串口读取！

从 OSX[`fcntl`手册页](https://developer.apple.com/library/mac/documentation/Darwin/Reference/ManPages/man2/fcntl.2.html)：

> `fcntl`-- 文件控制

作用是`fcntl`控制文件描述符。要阅读，您需要该[`read`](https://developer.apple.com/library/mac/documentation/Darwin/Reference/ManPages/man2/read.2.html)功能。

# c# - 使用 DrawingContext 相对于中心绘制

> ID：13023252
> 
> 赞同：0
> 
> 时间：2012-10-23T03:44:42.620
> 
> 标签：c#, .net, wpf, drawingcontext

我一直想知道如何在 WPF 中绘制[`DrawingContext`](http://msdn.microsoft.com/en-us/library/system.windows.media.drawingcontext.aspx)相对于控件左上角以外的东西的东西。我的问题是我想通过连接各种点来绘制一些形状，并且这些点必须相对于主机控件的中心定位，Y 指向上方。

我的元素是使用自定义子类树呈现的`DrawingVisual`，根是`Border`包含`VisualCollection`. `ScaleTransform`我通过将 a 指定为`RenderTransform`that来解决 Y 方向问题`Border`，基本上垂直翻转整个控件。

不过，其他问题就没有这样的运气了。关于如何将我的原点居中的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T07:31:15.853

您可以使用 MatrixTransform 代替 ScaleTransform，它在 y 方向上按 -1 缩放并将坐标原点转换到控件的中心。但是，只要控件的大小发生变化，就必须更新此转换。因此，您将覆盖 OnRenderSizeChanged，如下所示（假设您设置了`RenderTransform`控件的属性）：

```
protected override void OnRenderSizeChanged(SizeChangedInfo sizeInfo)
{
    base.OnRenderSizeChanged(sizeInfo);

    RenderTransform = new MatrixTransform(1d, 0d, 0d, -1d,
        sizeInfo.NewSize.Width / 2d, sizeInfo.NewSize.Height / 2d);
} 
```

编辑：如果您不想转换整个控件，您还可以将 MatrixTransform 定义为类成员并将其应用于可视子集合中的每个 Visual。

```
private MatrixTransform transform = new MatrixTransform(); 
```

分配给每个新视觉对象的 Transform 属性：

```
ContainerVisual visual = ...
visual.Transform = transform; 
```

在大小更改时，您只需更新 MatrixTransform：

```
protected override void OnRenderSizeChanged(SizeChangedInfo sizeInfo)
{
    base.OnRenderSizeChanged(sizeInfo);

    transform.Matrix = new Matrix(1d, 0d, 0d, -1d,
        sizeInfo.NewSize.Width / 2d, sizeInfo.NewSize.Height / 2d);
} 
```

当然，您只需要将变换应​​用到“顶级”视觉效果。这些视觉的孩子将被他们父母的变换所改变。我不完全了解您如何通过“包含 VisualCollection 的边框子类”来管理您的视觉效果。典型的方法是让*一个*父 ContainerVisual 作为可视化树的根。然后将仅将变换应用于此根视觉对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T03:50:05.583

你试过[TranslateTransform](http://msdn.microsoft.com/en-us/library/system.windows.media.translatetransform.aspx)吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T00:52:02.653

好吧，我明白了。这就是我的做法。

首先，我定义了一个`GroupTransform`并分配给`WorldTransform`我的子类的一个属性`Border`。

```
var trans = new TranslateTransform();
var conv = new HalfConverter(); // a custom converter that halves whatever you pass to it
BindingOperations.SetBinding(trans, TranslateTransform.XProperty, new Binding { Path = new PropertyPath(ActualWidthProperty), Source = this, Converter = conv });
BindingOperations.SetBinding(trans, TranslateTransform.YProperty, new Binding { Path = new PropertyPath(ActualHeightProperty), Source = this, Converter = conv });

WorldTransform = new TransformGroup();
WorldTransform.Children.Add(new ScaleTransform { ScaleY = -1.0 });
WorldTransform.Children.Add(trans);
VisualTransform = WorldTransform; 
```

然后，当我创建 custom 的新实例时`DrawingVisual`，我将其`Transform`属性分配给我的`WorldTransform`.

```
// ZoneVisual is my DrawingVisual subclass
var vis = new ZoneVisual(zone) { Transform = WorldTransform }; 
```

当我添加一个新元素（`Node`顺便说一下，a）时，我只需要将其转换为 my 的倒数`WorldTransform`。

瞧。这可能不是最好的方法，但它似乎工作得很好。我没有非常高的性能需求，所以它可能会完成这项工作。

# api - 功能/集成测试 NodeJS ReST API 实现

> ID：13023253
> 
> 赞同：4
> 
> 时间：2012-10-23T03:44:45.777
> 
> 标签：api, node.js, express, integration-testing, mongoose

我已经使用 mongoose 和 express 构建了一个 NodeJS 应用程序。此应用程序以 ReSTful 方式公开资源，我正在尝试构建一套功能/集成测试。

该套件在执行时应该在隔离环境中启动我的应用程序（在 localhost 上运行很好），并带有一组自定义配置设置（可以作为环境变量提供的路径）。应执行任何其他自定义设置操作。

完成测试套件后，应删除 (mongodb) 数据库，并应执行任何自定义拆卸操作。

有哪些 NodeJS 框架/模块/等可以帮助实现这一目标？

谢谢， 塔桑

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T03:52:59.487

Mocha 可以自己处理测试框架，而 Tobi 或 zombi 可以进行 Web 调用。

# jquery - jQuery：根据 URL 或页面名称选择的主要导航项目

> ID：13023255
> 
> 赞同：0
> 
> 时间：2012-10-23T03:45:11.660
> 
> 标签：jquery

好的，我已经到处寻找解决方案，但到目前为止，我找不到与我需要完成的事情相关的任何事情。

就逻辑而言，我需要的是非常简单的。

我有一个像这样的导航栏：

```
<nav>
    <ul>
       <li><a href="download.shtml">Download</a></li>
       <li><a href="documentation.shtml">Documentation</a></li>
       <li><a href="contact.shtml">Contact</a></li>
       <li><a href="about.shtml">About</a></li>
    </ul>
</nav> 
```

该站点的 URL 很简单：

```
http://domain.net/download.shtml
http://domain.net/documentation.shtml
http://domain.net/contact.shtml
http://domain.net/about.shtml 
```

**问题：**

如何检测我所在的页面/URL 并将一个类添加`.active`到相应的导航项？

最终结果将是，例如，如果我在下载页面中：

```
<nav>
    <ul>
       <li><a href="download.shtml" class="active">Download</a></li>
       <li><a href="documentation.shtml">Documentation</a></li>
       <li><a href="contact.shtml">Contact</a></li>
       <li><a href="about.shtml">About</a></li>
    </ul>
</nav> 
```

提前感谢您在此问题上的任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T03:51:15.053

你可以试试这个，通过检查锚`indexOf`href`location.href`

```
$(function(){
    $.each($("nav a"), function(){
       var self = $(this);
       if(location.href.indexOf(self.prop('href'))>-1){
           self.addClass('active');
           //self.parent().siblings().find('a').removeClass('active');
       }
    });

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T03:57:30.857

如果您的网址如此简单，您可以使用 window.location.pathname。例如：

```
$(function(){
  $('nav a').each(function(){
    if( $(this).attr('href') === window.location.pathname.substring(1) ){
      $(this).addClass('active');
    }
  });
}); 
```

工作示例：http: [//jsbin.com/akevin/1/edit](http://jsbin.com/akevin/1/edit)

# objective-c - 如何在 UIView 中使用 zxing 及其条形码扫描功能，而不是使用 ZXingWidgetController？

> ID：13023257
> 
> 赞同：3
> 
> 时间：2012-10-23T03:45:15.740
> 
> 标签：objective-c, uiview, uiviewcontroller, uitabbarcontroller, zxing

我正在尝试创建一个应用程序，其中我已经有一个视图控制器，并且我希望在这个视图控制器中使用 zxing 功能（条形码扫描）。我有一个带有不同视图控制器的标签栏控制器，其中一个（前面提到的视图控制器）应该充当扫描仪。在不使用 ZXingWidgetController 的情况下如何做到这一点？

# javascript - 为 swf 注入 javascript 不在 IE 中显示，但在 Chrome/FF 中显示

> ID：13023259
> 
> 赞同：0
> 
> 时间：2012-10-23T03:45:38.030
> 
> 标签：javascript, flash

我有以下 javascript 代码（在底部），我从他们发布的网站为客户的每个 api 调用注入这些代码。

客户端在其网页中进行脚本标记调用，例如：

```
<div id="myDivID"/>
<script type="text/javascript" src="http//:srv.ab.com/api/getswf?divIdToReplace=myDivID"></script> 
```

一旦执行了以下代码，就会从 api 调用中注入以下代码，并将 div 替换为 swf：

```
<script type="text/javascript">

        (function () {

            var object = document.createElement('object');
            object.setAttribute('width', '300');
            object.setAttribute('height', '250');
            object.setAttribute('classid', 'clsid:d27cdb6e-ae6d-11cf-96b8-444553540000');

            var param1 = document.createElement('param');
            param1.setAttribute('name', 'movie');
            param1.setAttribute('value', 'http://srv.ab.com/test.swf');

            var embed = document.createElement('embed');
            embed.setAttribute('src', 'http://srv.ab.com/test.swf');
            embed.setAttribute('width', '300');
            embed.setAttribute('height', '250');

            var param2 = document.createElement('param');
            param2.setAttribute('name', 'wmode');
            param2.setAttribute('value', 'transparent');

            object.appendChild(param1);
            object.appendChild(embed); // <-- Invalid argument for IE9!!!
            object.appendChild(param2);

            var container = document.getElementById('myDivID');
            while (container.firstChild) { container.removeChild(container.firstChild); }
            container.appendChild(object);
        })();

</script> 
```

但是，swf 在 IE9 中不显示，但在 Chrome 和 FF 中呈现良好。

需要注意的一件事是 IE9 的无效参数错误仅在我得到的控制台中，如下面的脚本中调用的那样。

我在这里想念什么？我不能使用 jquery/swfobject，因为它必须是我注入客户端页面的纯 JavaScript。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T23:36:40.840

原来 IE 将某些 Intranet/Internet 站点设置为 Quirks 模式。这会导致 IE9 使用 IE6 javascript 行为和 IE7 DOM 操作。

在标头中添加以下元数据可以缓解这种情况：

```
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
</head> 
```

但是，从 api 交付解决方案中，可以在响应中设置 X-UA-Compatible 标头，其值为 IE=edge。

# python - 无法在 Python 中终止 airodump 进程

> ID：13023262
> 
> 赞同：4
> 
> 时间：2012-10-23T03:46:20.670
> 
> 标签：python, subprocess

这是要了我的命。我整天都在这，我被困住了。

我的目标是运行 airodump-ng 10 秒左右，然后终止该进程，以便生成的 csv 文件停止不断更新。

由于各种原因，我尝试了许多没有运气的实现。这是最基本的尝试：

```
command  = "airodump-ng -w airodump mon0"
airodump = subprocess.Popen([command],stdout=subprocess.PIPE,shell=True)
time.sleep(10)
airodump.terminate()
airodump.kill()
airodump.wait()
#trying to run a command like "kill <pid>" does not work either. 
```

如果我不睡在那里，有趣的是，这个过程永远不会被创建。既然我这样做了，这个过程就会出现在屏幕上并且永远不会结束。从我收集的搜索结果来看，我可能正在处理一个完整的管道缓冲区。我不确定这意味着什么？这是否意味着这一进程刚刚接管了一切？这还有其他问题吗？airodump 是怎么回事，它不允许我像往常一样删除它的 Popen 对象和/或终止进程？（如果您不熟悉 airodump，它在行为上与“top”非常相似）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T23:58:24.817

在 Linux 上，以下解决方案应该会有所帮助： [如何终止使用 shell=True 启动的 python 子进程](https://stackoverflow.com/questions/4789837/how-to-terminate-a-python-subprocess-launched-with-shell-true)

你在窗户上吗？

# c++ - 从 VS 2012 开始在 Windows 和 Win XP 上运行 c++ 应用程序的必备条件

> ID：13023263
> 
> 赞同：0
> 
> 时间：2012-10-23T03:46:47.360
> 
> 标签：c++, visual-studio-2012

我已经开发了一个 Visual c++ 应用程序，现在我正在部署它。我已经使用 Visual Studio 2012 Ultimate 64 位和 Windows 8 Pro 64 位构建了该应用程序（是的，在发布之前获得了 Win 8 Pro，这要归功于 Dreamspark）。我想知道在 Windows 上运行 Visual C++ 应用程序的所有系统要求。我知道需要 Visual c++ Redist 和 .NET 框架。

此外，我了解到使用 VS 2012 构建的应用程序无法在 Win XP 和 Win Server 2003 上运行。我在这方面花了一些时间，但找不到合适的帮助。

所以我想知道运行 Visual C++ 应用程序（在 Win Xp、Vista、7 和 8 上）以及在基于 VS 2012 的 Win Xp 上运行 Visual C++ 应用程序的先决条件。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T03:55:31.250

查看[http://blogs.msdn.com/b/vcblog/archive/2012/10/08/10357555.aspx](http://blogs.msdn.com/b/vcblog/archive/2012/10/08/10357555.aspx)，它允许您为 XP 构建 C++ 应用程序

# r - 如何在 r 中执行 printf？

> ID：13023274
> 
> 赞同：46
> 
> 时间：2012-10-23T03:48:25.447
> 
> 标签：r

我正在寻找如何在 r 中执行 printf，即我想输入：

```
printf("hello %d\n", 56 ) 
```

并获得与键入相同的输出：

```
print(sprintf("hello %d\n", 56 ) 
```

我已阅读以下链接：

*   [在 R 中使用 print() 打印换行符](https://stackoverflow.com/questions/4071586/printing-newlines-with-print-in-r)
*   [用 R 打印信息的更漂亮的方法是什么？](https://stackoverflow.com/questions/3102643/whats-a-prettier-way-to-print-info-with-r)

...所以我知道我可以使用`cat("hello", 56)`，这可能就是我会做的，但只是想知道是否有一些快捷的写作方式`print(sprintf(...))`？

对不起，如果这个问题是重复的（我不知道）。搜索“printf r”非常困难，因为它返回的结果是 php、c、...

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-10-23T03:54:53.533

```
printf <- function(...) invisible(print(sprintf(...))) 
```

外部`invisible`调用可能是不必要的，我不是 100% 清楚它是如何工作的。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2014-02-09T05:30:39.197

我的解决方案：

```
> printf <- function(...) cat(sprintf(...))
> printf("hello %d\n", 56)
hello 56 
```

Zack 和 mnel 给出的答案将回车符号打印为文字。不酷。

```
> printf <- function(...) invisible(print(sprintf(...)))
> printf("hello %d\n", 56)
[1] "hello 56\n"
> 
> printf <- function(...)print(sprintf(...))
> printf("hello %d\n", 56)
[1] "hello 56\n" 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-23T03:54:48.043

如果您想要一个执行 print(sprintf(...)) 的函数，请定义一个执行此操作的函数。

```
printf <- function(...)print(sprintf(...))

printf("hello %d\n", 56)
## [1] "hello 56\n"
 d <- printf("hello %d\n", 56)
## [1] "hello 56\n"
d
## [1] "hello 56\n" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-09T20:12:49.980

我这样做：

```
printf = function(s, ...) cat(paste0(sprintf(s, ...)), '\n') 
```

# php - 将随机值作为会话“密钥”存储在表中是否安全？

> ID：13023277
> 
> 赞同：1
> 
> 时间：2012-10-23T03:48:43.023
> 
> 标签：php, mysql

我第一次用用户帐户建立一个网站。我正在使用户登录安全。在注册时，我在保存密码之前对密码进行哈希处理，然后在登录时如果密码正确，我使用 setCookie 保存一个带有用户信息的 cookie。

现在劫持一个帐户就像修改 cookie 值一样简单。我想让网站安全，但我正在阅读的大多数选项似乎太复杂了，我想使用我自己可以做的事情。我已经阅读了几个教程，并且对如何做到这一点有一个基本的了解，但不知道它有多安全。

我的想法是为会话制作一个表格并存储用户 ID + 一个随机值，同时保存一个 cookie 并检查每个页面都根据表格加载两个值，如果它们正确则更新它们。这看起来很简单，即使用户从不同的地方登录也可以工作，但我不知道它有多安全。cookie 是可见的，但我看不到任何劫持会话的方式，除非有人偷了 cookie 并在更新之前使用它。

这安全吗？我还可以使用什么其他简单的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T04:02:18.437

为什么不将用户名存储在会话变量中？客户端存储一个随机 ID 并将其呈现给服务器。然后，服务器将其与用户名（服务器在本地拥有）匹配。**只有服务器可以看到用户名。**它也很容易编码，PHP 会创建随机 ID 并将其提供给客户端。此外，如果用户将 ID 更改为其他内容，他们几乎不可能偶然发现另一个已存在且正在被其他登录用户使用的 ID。

```
session_start();

//setting the username after they log in
$_SESSION['username'] = $username;

//retrieving the username
//this will work from any file as long as they are on the same server for the same domain
$username = $_SESSION['username']; 
```

# java - Java：如何轻松地从控制台输入中获取值

> ID：13023285
> 
> 赞同：1
> 
> 时间：2012-10-23T03:49:30.433
> 
> 标签：java, string, console, split, readline

作为用户，我在 java 控制台中键入以下命令：

```
!login <Username> <udpPort> 
```

所以，即

```
!login Bob 2233 
```

我需要的是轻松从此输入中获取值：

```
String username = "Bob";
int port = 2233; 
```

我正在使用 BufferedReader 来获取输入。

我已经尝试过：但这当然行不通。但这就是我想要的：

```
String [] input = in.readReadLine(); //ofcourse this is not working 
```

然后我可以轻松地分配值：

```
String username = input[2]; //save "Bob"
int port = Integer.parseInt(input[3]); //save 2233 
```

任何建议表示赞赏，戴夫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T03:51:32.107

`BufferedReaeder` [readLine()](http://docs.oracle.com/javase/6/docs/api/java/io/BufferedReader.html#readLine%28%29)方法返回`String`。

获得字符串后，您需要`Split();`（或）`StringTokenizer`作为单独的字符串获得。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T04:07:09.277

Scanner 类最适合从控制台获取输入。

```
import java.util.*;

public class ConsoleInput { 
    public static void main(String[] args) {
        Scanner scanInput = new Scanner(System.in);
        String input = scanInput.nextLine();
        System.out.println("The input is : "+ input);  
    }  
} 
```

这是一个简单的类，演示了 Java 中 Scanner 类的使用。它有几种方法可以帮助您阅读不同类型的输入，例如 ex- ,,,`int`等。`char``String`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T03:59:40.527

我认为你可以使用`java.util.Scanner`如下：

```
 Scanner inputScanner = new Scanner(System.in);
  inputScanner.next(); //reads whole word
  inputScanner.nextInt(); //reads whole numeral
  inputScanner.nextLine(); //reads whole line 
```

现在使用 `nextLine`，阅读该行并拆分

```
 String line = inputScanner.nextLine();
   String[] commands = line.split(" "); //splits space delimited words in the line 
```

或使用`next()`，一次读取一个命令，例如

```
 command[0] = inputScanner.next(); 
  command[1] = inputScanner.next(); 
```

**或者你可以使用`next()`和`nextInt()`**

```
 String username = inputScanner.next();  //save "Bob"
  int port = inputScanner.nextInt(); //save 2233 
```

更多方法细节在这里。[**扫描器**](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T03:59:55.407

你应该做

```
String [] input = in.readReadLine().split("\\s+"); // split the line at spaces 
```

并使用索引 1 和 2，因为数组索引从 0 而不是 1 开始

```
String username = input[1]; //get the second element of the array
int port = Integer.parseInt(input[2]); //get the third element and parse 
```

# javascript - JS 框架处理异步流、回调和闭包？

> ID：13023291
> 
> 赞同：0
> 
> 时间：2012-10-23T03:50:05.033
> 
> 标签：javascript, jquery, mongodb, twitter-bootstrap, flask

我不喜欢 JavaScript。非常好。我认为这是一种混乱的语言，尽管我会第一个承认这可能是因为我不知道如何用它以及其他语言进行编码。

我浪费了过去三天处理的错误，这些错误都是由于我对异步控制流、回调函数和闭包的理解不足。

我想知道是否有更简单的 JS 编程方法，以便我可以恢复生产力。我目前的堆栈是 Flask、MongoDB、JQuery 和 Bootstrap。理想情况下，我想增加而不是替换那些。

什么框架或工具能够最好地缓解我上面概述的 JS 问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T03:53:02.503

我建议您学习如何使用[jQuery Deferreds](http://api.jquery.com/category/deferred-object/)。为了使用异步函数进行干净的编程，它们不是必需的，但它们可能是您正在寻找的工具，以提供一些方向和结构。

如果您展示一些对您来说看起来很混乱的代码示例，我们可以提供更多细节。

当我有超过 10 到 15 行代码的回调函数时，我将它们分解为一个命名函数并给它一个名称来描述它的作用。在某些情况下，我什至将其作为现有对象的方法。例如，在一个 API 中，我使用了一个用于登录的 ajax，我有一个称为`ProcessLoginResponse()`处理来自 ajax 调用的登录响应的方法。如果登录成功，则此方法必须发出另一个 API 调用，并且我在处理对该 ajax 调用的响应的同一对象上创建另一个方法以继续流程。我用注释记录了流程是如何工作的，但是适当命名的方法使代码看起来很干净，并且很容易知道在哪里设置断点或进行修改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-27T06:10:45.380

查看[https://github.com/infinitycbs/jflow](https://github.com/infinitycbs/jflow)

它是一个擅长在 node.js 和浏览器中处理异步任务的框架。它还处理具有静态、公共和私有成员的组件结构，如传统 OOP。

# javascript - 自动刷新聊天问题

> ID：13023296
> 
> 赞同：0
> 
> 时间：2012-10-23T03:50:15.017
> 
> 标签：javascript, jquery, refresh

我有一个`<div id="refresh">`里面有一些 MySQL 内容。我有这个 JavaScript 代码：

```
<script type="text/javascript">
    var auto_refreshs_contents = setInterval(
        function(){
            $('#refresh').load('index.php?_=' +Math.random()+' #refresh').fadeIn("slow");  // load div.refresh
        }
    , 3000); // refresh every 3 seconds
</script> 
```

它实际上第一次发布了代码的副本，所以它看起来像这样：

```
 0 seconds
+-------------------------------------+
|Randome Text                         |
|This is such a cool chat room        |
|Not really                           |
+-------------------------------------+
    3 seconds
+-------------------------------------+
|Randome Text                         |
|This is such a cool chat room        |
|Not really                           |
|This is such a cool chat room        |
|Not really                           |
+-------------------------------------+ 
```

如果你注意到了，它会遗漏“随机文本”这个帖子。我不知道为什么。但是，是的，它基本上是第一次这样做。然后在 6 秒后，它刷新，但没有更多内容，之后，它刷新正确。所以我决定在刷新之前清除页面的内容：

```
<script type="text/javascript">
    var auto_clearContents = setInterval(
        function(){
            $("#refresh").html(""); //clear contents of div#refresh
        }
    , 3000);  //clear existing contents every 3 seconds

    var auto_refreshs_contents = setInterval(
        function(){
            $('#refresh').load('index.php?_=' +Math.random()+' #refresh').fadeIn("slow");  // load div.refresh
        }
    , 3000); // refresh every 3 seconds
</script> 
```

然而那就是事情变得奇怪的时候。我正在查看`networks`Chrome 开发人员工具中的选项卡，它显示它每 200 毫秒左右刷新一次（是的，200 毫秒），有时需要 2.5 秒。我不知道...

我的代码有问题吗？有更好的方法吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T04:11:48.660

我认为后端一定有问题。 [这是一个小提琴](http://jsfiddle.net/Gm82w/)，基本上就是你在说什么，它工作正常。

当您看到 200 毫秒时，我认为这可能是生成`index.php`页面所需的时间，而不是间隔之间的时间。

如果您向我们展示来自 php 页面或 php 页面本身的响应，我们可能会提供帮助。

# python - 如何在 django python 中存储多维数组

> ID：13023297
> 
> 赞同：0
> 
> 时间：2012-10-23T03:50:16.660
> 
> 标签：python, django

我有两个字典，我想比较它们的值。像

```
Dict1['var1'] = 20
Dict1['var2'] = 30

Dict2['var1'] = 23
Dict2['var1'] = 26 
```

现在我想对它们进行比较并将结果如真或假存储在同一个字典中，就像这样

```
if (Dict1['var1']  < Dict2['var1'])
   Dict2['var1']['result'] = true 
```

因为在我的 django 模板中，如果结果为真，我想将表格行的颜色显示为绿色。

我能做到的最好方法是什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T04:21:25.263

因为`Dict2['var1']`被分配为 int 类型，所以`Dict2['var1']['result']`不能是 dict 类型。

你可以试试这个：

```
Dict1['var1'] = {'value':20, 'result':None}
Dict1['var2'] = {'value':30, 'result':None}
Dict2['var1'] = {'value':23, 'result':None}
Dict2['var2'] = {'value':26, 'result':None}

if Dict1['var1']['value']  < Dict2['var1']['value']:
    Dict2['var1']['result'] = True 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T04:15:31.723

如果你想在 django 模板中检查和决定，你不需要预先比较和存储结果。您可以直接在模板本身中比较它们。

```
{%if Dict1.var1 < Dict2.var1 %}
   {# render to show green #}
{%else%}
   {# do something else #}
{%endif}% 
```

# c# - 无法在 C# Visual Studio 中创建数据库

> ID：13023298
> 
> 赞同：1
> 
> 时间：2012-10-23T03:50:19.540
> 
> 标签：c#, database, visual-studio-2010

我使用 Windows 窗体应用程序 C# 在 Visual Studio 中创建了一个项目。

但是，当我尝试将基于服务的数据库添加到项目时，会出现以下消息：

> 文件 \\（出于隐私原因未包含文件名）\mydocuments\visual studio2010\Projects\Experiment\Experiment\Experiment.mdf 位于数据库文件不支持的网络路径上。创建数据库失败。无法创建列出的某些文件名。检查相关错误。用户无权更改数据库。'FF557489-6500-4C96-86DA-B07E7615056D'，或者数据库不存在。ALTER DATABASE 语句失败。用户无权更改数据库“FF557489-6500-4C96-86DA-B07E7615056D”，或数据库不存在。ALTER DATABASE 语句失败。数据库“FF557489-6500-4C96-86DA-B07E7615056D”不存在。提供一个有效的数据库名称。要查看可用的数据库，请使用 sys.databases。

（我会附上错误的图片，但 Stackoverflow 坚持我有 10 个声誉点，然后我才被允许在帖子中包含图像）。

有没有人遇到过这种情况并知道解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T03:57:10.610

错误消息的关键部分`"is on a network path that is not supported for database files"`

尝试确保它在本地磁盘上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T03:56:16.907

建议：

1) 验证您可以连接到您的 MSSQL 数据库实例

2）只需发出“创建数据库MYDATABASE”。让 MSSQL 决定将文件放在哪里（您将拥有一个数据库文件和一个相应的数据库日志文件）。

恕我直言...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T04:02:22.243

根据 MSDN， **创建或部署数据库的权限 -**

1.  导入数据库对象和设置
2.  导入服务器对象和设置
3.  创建或更新数据库项目。
4.  部署新数据库或使用 Always Re-create Database 选项集进行部署
5.  将更新部署到现有数据库
6.  Use an assembly with the EXTERNAL_ACCESS option in a database project
7.  Deploy assemblies to a new or existing database

Please refer - [Permissions to Create or Deploy a Database](http://msdn.microsoft.com/en-us/library/aa833413%28v=vs.100%29.aspx#DatabaseCreationAndDeploymentPermissions) on MSDN

# java - 将用户首选项保存/加载到文件

> ID：13023299
> 
> 赞同：2
> 
> 时间：2012-10-23T03:50:27.530
> 
> 标签：java, eclipse, swing, objectinputstream

我使用 Delphi 已经 10 多年了，现在对使用 Eclipse 和 Java 很感兴趣。使用 Delphi，我开发了任何应用程序的代码，无论有多少表单、文本框、复选框和其他设置用户首选项的方式，我都可以使用一行代码保存和加载默认值我开发的新应用程序。

使用 Java gui，我设法以编程方式收集所有用户界面 gui 组件的列表，但没有设法使用 ObjectInputStream 加载使用 ObjectOutputStream 保存的设置。有两个问题（到目前为止！）：

1.  `ObjectInputStream.ReadObject()`需要对正在加载的类进行类型转换。当类直到运行时才知道时，有没有办法做到这一点？
2.  `ObjectInputStream.ReadObject()`似乎产生了一个新的对象实例，我不知道如何将数据读入现有组件（`JTextField`（s）等）。

是的，我承认我是新手！谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T18:54:18.103

我强烈建议您检查[Java Preferences](http://docs.oracle.com/javase/7/docs/api/index.html?java/util/prefs/Preferences.html)或只是简单的 java [Properties](http://docs.oracle.com/javase/7/docs/api/java/util/Properties.html)类。

# jquery - jQuery向随机文本数组添加超时

> ID：13023300
> 
> 赞同：2
> 
> 时间：2012-10-23T03:50:37.657
> 
> 标签：jquery, timeout

我有一个链接，每次单击时都会更改文本，但我试图找到一种方法让它在一段时间后自动切换到下一个变量，有点像旋转器。

这就是我所拥有的：

```
 $(document).ready( function() {
    var quotes = [
        'Link 1',
        'Link 2',
        'Link 3',
        'Link 4',
        'Link 5',
        'Link 6'
    ];

    function loadQuote(i) {
        return quotes[i];
    }

    function randNumber() {
        return Math.floor( Math.random() * quotes.length );
    }
    $('#button-reload').click(function() {
            $(this).html(loadQuote(randNumber()));
    });
    $('#button-reload').html(loadQuote(randNumber()));
});​ 
```

这是一个[jsfiddle](http://jsfiddle.net/aMv7v/)

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T03:55:41.903

尝试使用[window.setInterval()](https://developer.mozilla.org/en-US/docs/DOM/window.setInterval)如下代码：

```
$(document).ready( function() {
    var quotes = [
        'Link 1',
        'Link 2',
        'Link 3',
        'Link 4',
        'Link 5',
        'Link 6'
    ];

    function loadQuote(i) {
        return quotes[i];
    }

    function randNumber() {
        return Math.floor( Math.random() * quotes.length );
    }

    var interval = window.setInterval(function(){
        $('#button-reload').html(loadQuote(randNumber()));            
    }, 3000);   

    $('#button-reload').click(function() {
        $(this).html(loadQuote(randNumber()));

        //uncomment line bellow to stop intarval when button clicked.
        //window.clearInterval(interval);
    });  
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T04:13:05.910

```
$(document).ready( function() {
    var quotes = [
        'Link 1',
        'Link 2',
        'Link 3',
        'Link 4',
        'Link 5',
        'Link 6'
    ];

    var $theLink = $('#button-reload');

    function loadQuote(i) {
        return quotes[i];
    }

    function randNumber() {
        return Math.floor( Math.random() * quotes.length );
    }

    function changeTheQuote() {
        $theLink.html(loadQuote(randNumber())); 
    }

    var interval = window.setInterval(function(){
        changeTheQuote();
    }, 3000); 

    $theLink.click(function() {
        window.clearInterval(interval);
        changeTheQuote();
        interval = window.setInterval(function(){
            changeTheQuote();
        }, 3000); 
    });
}); 
```

# jquery - jquery定位弹出

> ID：13023303
> 
> 赞同：0
> 
> 时间：2012-10-23T03:51:23.200
> 
> 标签：jquery, html, css

当我单击英文按钮时，弹出窗口出现，但我只能在向下滚动后才能看到弹出窗口的全部内容...有什么办法可以在不向下滚动的情况下看到弹出窗口的全部内容

我在 [http://jsfiddle.net/6QXGG/130/下面提供我的代码](http://jsfiddle.net/6QXGG/130/)

原始代码

[http://www.teslamotors.com/](http://www.teslamotors.com/)

**js代码有问题**

```
 // locale selector actions
    $('#region-picker').click(function(){
        var foot_height = $('#footer').innerHeight();
        var foot_height_css = foot_height-1;
        var select_position = '-=' + (Number(400)+18);
        console.log("hallo"+select_position);
        var $selector = $('#locale-select');
        $('#locale_pop').fadeOut();
        $selector.css({top:foot_height_css});
        $selector.fadeIn(function(){
            $(this).addClass('open');
            $(this).animate({top:select_position}, 1000);
            });
    });
    $('#select-tab').click(function(e){
        e.stopPropagation()
        closeSelector('slide');
        });
    // don't hide when clicked within the box
    $('#locale-select').click(function(e){
        e.stopPropagation();
    });
    $(document).click(function(){ 
        if ($('#locale-select').hasClass('open')) {
            closeSelector('disappear');
        }
    });

    $('.locale-link').click(function(){
        var desired_locale = $(this).attr('rel');
        createCookie('desired-locale',desired_locale,360);
        createCookie('buy_flow_locale',desired_locale,360);
        closeSelector('disappear');
    })

    $('#locale_pop a.close').click(function(){
        var show_blip_count = readCookie('show_blip_count');
        if (!show_blip_count) {
            createCookie('show_blip_count',3,360);
        }
        else if (show_blip_count < 3 ) {
            eraseCookie('show_blip_count');
            createCookie('show_blip_count',3,360);
        }
        $('#locale_pop').slideUp();
        return false;
    });

function closeSelector(hide_type){
    var foot_height = $('#footer').innerHeight();
    var select_position = '+=' + (Number(400)+20);
    if (hide_type == 'slide') {
        $('#locale-select').animate({top:select_position}, 1000, function(){
        $(this).removeClass('open');
        $(this).fadeOut()
        });
    }
    else if (hide_type == 'disappear'){
        $('#locale-select').fadeOut('fast');
        $('#locale-select').removeClass('open');
    }
} 
```

​</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T04:22:38.523

弹出窗口非常大，因此根据显示器的大小，它可能无法一次全部显示在屏幕上。但是，您可以通过更改使其更高一点：

```
var select_position = '-=' + (Number(400)+18); 
```

至：

```
var select_position = '-=' + (Number(700)+18); 
```

[更新的小提琴](http://jsfiddle.net/6QXGG/131/)

# c# - 如何在 MVC 中使对象全局可访问

> ID：13023304
> 
> 赞同：0
> 
> 时间：2012-10-23T03:51:25.657
> 
> 标签：c#, asp.net-mvc-3

我为我的 MVC 应用程序创建了一个自定义缓存提供程序。我将使用此类将会话数据存储/检索到外部服务（如 memcached 或 Redis）。

我想在应用程序启动时创建一次对象实例，以便我可以从任何控制器引用该对象，并且只需“新建”一次实例。我在想我会在 Global.asax Application_Start 方法中实例化该类。但是，该实例似乎无法在任何控制器中访问。

在 MVC 中实例化然后访问（全局）类的首选方法是什么？

这是我的“简化”课程的副本：

```
 public class PersistentSession : IPersistentSession
    {
        // prepare Dependency Injection
        public ICache cacheProvider { get; set; }

        public bool SetSessionValue(string key, string value)
        {
            return cacheProvider.PutToCache(key, value);
        }

        public bool SetSessionValue(string key, string value, TimeSpan expirationTimeSpan)
        {
            return cacheProvider.PutToCache(key, value, expirationTimeSpan);
        }

        public string FetchSessionValue(string key)
        {
            return cacheProvider.FetchFromCache(key);
        }
    } 
```

我想实例化一次，以便我可以从所有控制器应用程序范围内访问它，如下所示：

```
 // setup PersistentSession object
 persistentSession = new PersistentSession();
 string memcachedAddress = WebConfigurationManager.AppSettings["MemcachedAddress"].ToString();
 string memcachedPort = WebConfigurationManager.AppSettings["MemcachedPort"].ToString();

 persistentSession.cacheProvider = new CacheProcessor.Memcached(memcachedAddress, memcachedPort); 
```

应该在 MVC 中的何处/如何实例化对象以从所有控制器获取全局访问权限？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T05:08:28.453

看不出问题！！

您所要做的就是在 PersistentSession 类的方法定义中添加（静态）关键字：

```
public class PersistentSession : IPersistentSession
{
    // prepare Dependency Injection
    public static ICache cacheProvider { get; set; }

    public static bool SetSessionValue(string key, string value)
    {
        return cacheProvider.PutToCache(key, value);
    }

    public static bool SetSessionValue(string key, string value, TimeSpan expirationTimeSpan)
    {
        return cacheProvider.PutToCache(key, value, expirationTimeSpan);
    }

    public static string FetchSessionValue(string key)
    {
        return cacheProvider.FetchFromCache(key);
    }
} 
```

. 您可以在任何地方使用以下代码访问它们：

```
PersistentSession.SetSessionValue (key , value); 
```

您还可以添加一个静态构造函数来在访问任何成员之前初始化任何字段，并且在第一次访问静态类的成员之前调用该构造函数，因此您可以确保在使用之前设置您的类。

```
public static PersistentSession ()
{
//Put your initializing code, for example:
cacheProvider = new CacheProvider();
} 
```

# php - CakePHP 和 Twitter 引导工具提示

> ID：13023307
> 
> 赞同：2
> 
> 时间：2012-10-23T03:51:50.887
> 
> 标签：php, javascript, cakephp, twitter-bootstrap

我正在尝试为 bootstrap-tooltip.js 中的按钮实现工具提示，但是我无法让它们工作。我已将脚本与 jquery.js 一起导入到我的 default.ctp 文件中。

在我想要工具提示的索引文件中，我有这个按钮，我试图为其添加工具提示。

```
<?php echo $this->Html->link(__('<i class="icon-plus"></i>'), array('action' => 'add'), array('class'=>'btn', 'rel'=>'tooltip', 'data-placement'=>'top', 'title'=>'Add', 'escape'=>false));?> 
```

我在一个不同的 HTML 文件中有工作工具提示，就像这样工作；

```
<a id="x-tooltip" href="#" rel="tooltip" data-placement="top" title="x">x</a> 
```

我错过了什么吗？为什么这在 php 语句中不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T13:35:44.033

我让它像这样工作：

您需要包含 bootstrap.min.js 和 jquery.js 才能使其正常工作，还需要包含 bootstrap.css。

我做了这样的按钮：

```
<?php echo $this->Html->link(__('View'), array('action' => 'view', $albumList['AlbumList']['id']), array('class'=>'btn', 'rel'=>'tooltip', 'data-placement'=>'top', 'title'=>'View')); ?> 
```

您需要做的最后一件事是将这个 somwhere 放在您的按钮下方。

```
 <script>
            $('[rel="tooltip"]').tooltip('toggle')
            $('[rel="tooltip"]').tooltip('hide');   
        </script> 
```

这应该够了吧。

# c# - 将 sql 选择转换为 LINQ

> ID：13023308
> 
> 赞同：2
> 
> 时间：2012-10-23T03:52:25.400
> 
> 标签：c#, linq, lambda

我有以下 SQL 查询：

```
SELECT      Devices.*
        ,   DevicesActivityData.* 
FROM        Devices
INNER JOIN  DevicesActivityData 
        ON  Devices.ID = DevicesActivityData.DeviceID
WHERE       DevicesActivityData.DeviceDateTime IN (
                SELECT    MAX(DevicesActivityData.DeviceDateTime) AS MaxDate
                FROM      DevicesActivityData                                
                GROUP BY  DevicesActivityData.DeviceID
            ) 
```

我需要完成我的代码：

```
var Q = db.Devices.Join(
            db.DevicesActivityDatas, 
            d => d.ID, 
            a => a.DeviceID,
            (d, a) => new { d.ID,d.DeviceName,a.DeviceDateTime }
        ); 
```

我在最后一部分有问题选择最大值

如何将此部分添加到我的查询中......

```
[where DevicesActivityData.DeviceDateTime in ( select max(DevicesActivityData.DeviceDateTime) as MaxDate from DevicesActivityData group by DevicesActivityData.DeviceID )] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T08:37:01.057

首先创建选择最大日期的查询：

```
var maxDates = db.DevicesActivityDatas
           .GroupBy(d => d.DeviceID)
           .Select(g => g.Max(t => t.DeviceDateTime)); 
```

然后做：

```
 var Q = db.Devices.Join(db.DevicesActivityDatas
                          .Where(m => maxDates.Contains(m.DeviceDateTime)),
                            d => d.ID, a => a.DeviceID,
                           (d, a) => new { d.ID,d.DeviceName,a.DeviceDateTime}); 
```

延迟执行将使两个查询作为一个运行。

作为旁注，我想指出逻辑可能不正确。在我看来，您想要一个`DevicesActivityData`具有最新日期的设备列表。但是最大日期不再与设备相关，它只是任意日期的列表。因此，设备可以有更多`DevicesActivityData`记录，其日期与收集的日期之一相匹配。我认为您需要查找`DevicesActivityData`具有该特定设备最大日期的记录。

# c# - WCF 的 DataContractSerilaizer 线程安全吗？

> ID：13023310
> 
> 赞同：9
> 
> 时间：2012-10-23T03:52:36.720
> 
> 标签：c#, .net, multithreading, wcf, thread-safety

我一直在将一个相当大的系统从 Remoting 转换为 WCF，一切似乎都运行良好，除了我们经常遇到以下异常：“System.InvalidOperationException：集合已修改；枚举操作可能无法执行。” 我没有任何运气来追踪它，因为它只在有数百个调用通过时才会发生，我只能假设这是因为一个对象在被序列化时正在被修改。

这些类都使用：`[DataContract(IsReference=true)]`.

使用远程处理时没有类似的异常，所以我想知道是否有人在 WCF 中遇到过类似的问题，或者可以让我知道它可能是序列化程序——在这种情况下，我假设我必须编写自己的序列化程序来执行`locks`必要时（我宁愿避免这是一项艰巨的任务）。

以下是堆栈跟踪：

`WCF Error: at System.Collections.Generic.List1.Enumerator.MoveNextRare() at WriteArrayOfLineToXml(XmlWriterDelegator , Object , XmlObjectSerializerWriteContext , CollectionDataContract ) at System.Runtime.Serialization.CollectionDataContract.WriteXmlValue(XmlWriterDelegator xmlWriter, Object obj, XmlObjectSerializerWriteContext context) at System.Runtime.Serialization.XmlObjectSerializerWriteContext.InternalSerialize(XmlWriterDelegator xmlWriter, Object obj, Boolean isDeclaredType, Boolean writeXsiType, Int32 declaredTypeID, RuntimeTypeHandle declaredTypeHandle) at System.Runtime.Serialization.XmlObjectSerializerWriteContext.InternalSerializeReference(XmlWriterDelegator xmlWriter, Object obj, Boolean isDeclaredType, Boolean writeXsiType, Int32 declaredTypeID, RuntimeTypeHandle declaredTypeHandle) at WriteLineGroupToXml(XmlWriterDelegator , Object , XmlObjectSerializerWriteContext , ClassDataContract ) at System.Runtime.Serialization.ClassDataContract.WriteXmlValue(XmlWriterDelegator xmlWriter, Object obj, XmlObjectSerializerWriteContext context) at System.Runtime.Serialization.XmlObjectSerializerWriteContext.SerializeWithoutXsiType(DataContract dataContract, XmlWriterDelegator xmlWriter, Object obj, RuntimeTypeHandle declaredTypeHandle) at System.Runtime.Serialization.XmlObjectSerializerWriteContext.InternalSerialize(XmlWriterDelegator xmlWriter, Object obj, Boolean isDeclaredType, Boolean writeXsiType, Int32 declaredTypeID, RuntimeTypeHandle declaredTypeHandle) at System.Runtime.Serialization.XmlObjectSerializerWriteContext.InternalSerializeReference(XmlWriterDelegator xmlWriter, Object obj, Boolean isDeclaredType, Boolean writeXsiType, Int32 declaredTypeID, RuntimeTypeHandle declaredTypeHandle) at WriteLineToXml(XmlWriterDelegator , Object , XmlObjectSerializerWriteContext , ClassDataContract ) at System.Runtime.Serialization.ClassDataContract.WriteXmlValue(XmlWriterDelegator xmlWriter, Object obj, XmlObjectSerializerWriteContext context) at System.Runtime.Serialization.XmlObjectSerializerWriteContext.SerializeAndVerifyType(DataContract dataContract, XmlWriterDelegator xmlWriter, Object obj, Boolean verifyKnownType, RuntimeTypeHandle declaredTypeHandle, Type declaredType) at System.Runtime.Serialization.XmlObjectSerializerWriteContext.SerializeWithXsiTypeAtTopLevel(DataContract dataContract, XmlWriterDelegator xmlWriter, Object obj, RuntimeTypeHandle originalDeclaredTypeHandle, Type graphType) at System.Runtime.Serialization.DataContractSerializer.InternalWriteObjectContent(XmlWriterDelegator writer, Object graph, DataContractResolver dataContractResolver) at System.Runtime.Serialization.DataContractSerializer.InternalWriteObject(XmlWriterDelegator writer, Object graph, DataContractResolver dataContractResolver) at System.Runtime.Serialization.XmlObjectSerializer.WriteObjectHandleExceptions(XmlWriterDelegator writer, Object graph, DataContractResolver dataContractResolver) at System.Runtime.Serialization.XmlObjectSerializer.WriteObject(XmlDictionaryWriter writer, Object graph) at System.ServiceModel.Dispatcher.DataContractSerializerOperationFormatter.SerializeParameterPart(XmlDictionaryWriter writer, PartInfo part, Object graph) at System.ServiceModel.Dispatcher.DataContractSerializerOperationFormatter.SerializeParameter(XmlDictionaryWriter writer, PartInfo part, Object graph) at System.ServiceModel.Dispatcher.DataContractSerializerOperationFormatter.SerializeBody(XmlDictionaryWriter writer, MessageVersion version, String action, MessageDescription messageDescription, Object returnValue, Object[] parameters, Boolean isRequest) at System.ServiceModel.Dispatcher.OperationFormatter.SerializeBodyContents(XmlDictionaryWriter writer, MessageVersion version, Object[] parameters, Object returnValue, Boolean isRequest) at System.ServiceModel.Dispatcher.OperationFormatter.OperationFormatterMessage.OperationFormatterBodyWriter.OnWriteBodyContents(XmlDictionaryWriter writer) at System.ServiceModel.Channels.BodyWriter.WriteBodyContents(XmlDictionaryWriter writer) at System.ServiceModel.Channels.BodyWriterMessage.OnWriteBodyContents(XmlDictionaryWriter writer) at System.ServiceModel.Channels.Message.OnWriteMessage(XmlDictionaryWriter writer) at System.ServiceModel.Channels.Message.WriteMessage(XmlDictionaryWriter writer) at System.ServiceModel.Channels.BufferedMessageWriter.WriteMessage(Message message, BufferManager bufferManager, Int32 initialOffset, Int32 maxSizeQuota) at System.ServiceModel.Channels.BinaryMessageEncoderFactory.BinaryMessageEncoder.WriteMessage(Message message, Int32 maxMessageSize, BufferManager bufferManager, Int32 messageOffset) at System.ServiceModel.Channels.FramingDuplexSessionChannel.EncodeMessage(Message message) at System.ServiceModel.Channels.FramingDuplexSessionChannel.OnSend(Message message, TimeSpan timeout) at System.ServiceModel.Channels.OutputChannel.Send(Message message, TimeSpan timeout) at System.ServiceModel.Dispatcher.DuplexChannelBinder.DuplexRequestContext.OnReply(Message message, TimeSpan timeout) at System.ServiceModel.Channels.RequestContextBase.Reply(Message message, TimeSpan timeout) at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.Reply(MessageRpc& rpc)`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T05:37:40.807

事实上，这个错误可以很容易地用`DataContractSerializer`. 它不是指 的线程安全`DataContractSerializer`，而是关于某些集合的线程安全，用于您的数据合同：

```
[DataContract]
public class C
{
    [DataMember]
    public List<int> Values { get; set; }
}

class Program
{
    static void Main(string[] args)
    {
        var c = new C
        {
            Values = new List<int>()
        };

        var serializer = new DataContractSerializer(typeof(C));

        Task
            .Factory
            .StartNew(() => 
            {
                while (true)
                {
                    Console.WriteLine("Trying to add new item.");
                    c.Values.Add(DateTime.Now.Millisecond);
                }
            }, 
            TaskCreationOptions.LongRunning);

        Task
            .Factory
            .StartNew(() =>
            {
                while (true)
                {
                    using (var stream = new MemoryStream())
                    {
                        Console.WriteLine("Trying to serialize.");
                        serializer.WriteObject(stream, c);
                    }
                }
            },
            TaskCreationOptions.LongRunning);

        Console.ReadLine();
    } 
```

经过短暂的执行时间后，您将获得具有类似堆栈跟踪的 IOE：

```
 at System.ThrowHelper.ThrowInvalidOperationException(ExceptionResource resource)    at System.Collections.Generic.List`1.Enumerator.MoveNextRare()    at System.Collections.Generic.List`1.Enumerator.MoveNext()    at WriteArrayOfintToXml(XmlWriterDelegator , Object , XmlObjectSerializerWriteContext , CollectionDataContract )    at System.Runtime.Serialization.CollectionDataContract.WriteXmlValue(XmlWriterDelegator xmlWriter, Object obj, XmlObjectSerializerWriteContext context) 
```

看起来您正在继续修改一些共享数据，这些数据同时被序列化。您可以打开 WCF 跟踪（请参阅[此](https://stackoverflow.com/questions/4271517/how-to-turn-on-wcf-tracing)问题）以找出导致此错误的操作，并仔细查看此操作正在使用哪些数据。

然后，根据当前服务行为的[InstanceContextMode](http://msdn.microsoft.com/en-us/library/system.servicemodel.servicebehaviorattribute.instancecontextmode.aspx)和[ConcurrencyMode](http://msdn.microsoft.com/en-us/library/system.servicemodel.servicebehaviorattribute.concurrencymode.aspx)属性的值，可以选择走哪条路：

*   要么使用一些锁定；
*   或使用任何线程安全的集合；
*   或改变服务行为；
*   或更改服务本身（例如，使其无状态）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T07:56:11.930

如果丹尼斯的假设是正确的，那么解决这个问题的最简单方法是复制集合并通过网络发送副本。此时，在序列化过程中是否修改原始文件并不重要

# c# - 在实体框架中连接和切换多个表

> ID：13023311
> 
> 赞同：0
> 
> 时间：2012-10-23T03:52:38.163
> 
> 标签：c#, database, entity

我有一个数据库。它有一个表 ABC，它接收来自另一台机器的记录。
当表有大约 3000 条记录时，该表会自动创建一个名为 ABC + 表创建日期的新表。另一个表 CDE 将存储创建的表名的信息。

我的 Windows 服务将检查表 ABC 是否有新记录并将其发送到另一个数据库。如果 ABC 表达到其限制，它将检查表 CDE 以查看是否创建了任何其他表并转到该表并读取记录以发送。

我的问题是“实体框架是否支持在不将其映射到实体模型的情况下连接到数据库中的表？如果支持，我们该怎么做？”

非常感谢任何答案。

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T04:31:26.963

我个人认为这是不可能的，因为 EF 的整个想法是将数据库表映射到实体，换句话说，如果表不在模型中，则模型会创建您无法访问它并且您不能在项目中使用它，由于模型无法访问，因此它不知道该表实际上存在于数据库端，重要的是要了解在使用 EF 的应用程序中，您不是在查询 db，而是在查询具有直接访问权限的 EF 类和实体对象到 db 所以如果表不在模型上，您可能不会使用 EF 对其进行查询。如果某些情况发生，我建议查看或编写一些可能会动态更新 EF 模型的程序。

# linux - Sugarcrm 模块加载程序扫描包错误

> ID：13023314
> 
> 赞同：2
> 
> 时间：2012-10-23T03:52:47.713
> 
> 标签：linux, module, loader, sugarcrm

我在安装任何模块时收到以下错误：

```
 > Scanning Package 
    > Installation failed! 
    > The package you are attempting
    > to install does not conform to the policies established within the
    > Sugar Open Cloud or by your system administrator.

    >     Sugar Open Cloud customers must obtain a new package from the package provider that addresses the issues described below.
    >     If you are running Sugar locally, you can relax your Module Loader restrictions to allow the package to be installed.
    > 
    > The Sugar Open Cloud package loading policies are detailed in the
    > SugarCRM Knowledge Base. The available restrictions and exceptions are
    > detailed in the SugarCRM Developer Zone.
    > File Issues modules/let_Chat/history.php Invalid usage of a function
    > ob_start() modules/let_Chat/elements/sounds/button-19.mp3 Invalid file
    > extension modules/let_Chat/elements/sounds/Pop.aiff Invalid file
    > extension modules/let_Chat/elements/sounds/button-27.mp3 Invalid file
    > extension modules/let_Chat/elements/sounds/button-20.mp3 Invalid file
    > extension modules/let_Chat/elements/icons/restore_old.png Invalid
    > usage of a function '`' modules/let_Chat/show_chat.php Invalid usage
    > of a function $msi1() modules/let_Chat/JSON.php Invalid usage of a
    > function array_map() Invalid usage of a function array_map() Invalid
    > usage of a function array_map() 
```

请帮我解决问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T07:13:48.860

Sugar Open Cloud 不允许在要安装的包中使用某些功能，[请勾选此项](http://developers.sugarcrm.com/wordpress/2009/08/14/module-loader-restrictions/)。如果您可以更改配置文件而不是更改`packageScan`为`config.php`.

```
 'moduleInstaller' => 
   array (
   'packageScan' => true,
   ), 
```

或者

添加以下数组`config.php`或`config_override.php`通过在其中添加所有冲突的函数。

`$sugar_config['moduleInstaller']['blackListExempt'] = array('unlink', 'ob_start', );`

做

`$GLOBALS[‘sugar_config’][‘moduleInstaller’][‘disableFileScan’] = true;`

如果您无法更改配置文件，那么除了避免功能和文件冲突之外，没有其他解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-04T10:05:02.427

$sugar_config['moduleInstaller']['packageScan'] = false; 在 config_override.php 上设置它以禁用包扫描器

# image - UIWebView 无法正确显示网站上包含的图像

> ID：13023318
> 
> 赞同：0
> 
> 时间：2012-10-23T03:53:30.807
> 
> 标签：image, uiwebview, ios6

我正在使用 iOS 6。我的应用程序打开一个单独的视图，其中包含`UIWebView`. 但问题是网站上包含的图像被截断。这是什么原因以及如何解决这个问题。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T04:01:25.503

您正在加载的网站可能不是为响应而设计的，因此它被 UIWebView 的宽度切断了。

尝试启用“缩放页面以适应”，看看是否有帮助。

# jquery - jQuery - 将多个函数绑定到一个事件但区分函数的执行

> ID：13023319
> 
> 赞同：3
> 
> 时间：2012-10-23T03:53:44.213
> 
> 标签：jquery, drag-and-drop, resize

我有两个不同的函数绑定到一个元素和事件，基本上它们被称为“mousedown”。

我正在尝试找出一种方法来允许我的元素“调整大小”或“移动/拖动”，但不能同时进行。

现在我正在使用“setTimeout”函数，该函数在调用“resize”函数时被清除，通过这样做我取消了“move/drag”函数。它可以工作，但根本不是很好。

**我需要帮助找出更好的方法。我很感激任何建议。**

```
var timer= "",
    resize_select = false;

$('element').resize(function() {
    resize_select = true;
    //do stuff, called every resize, just like resizing <textarea> 
    window.clearTimeout(timer);
});

$('element').on("mousedown", function() {
    $(this) = $this;
    resize_select = false;

    if (resize_select === false) {
        timer = setTimeout(function() {
            $this.addClass('dragable');
        }, 500);
    }

    $(document).on("mousemove", function(e) {
        $('.dragable').css({
            top: e.pageY,
            left: e.pageX
        });
    });
});

$(document).on('mouseup', function() {
    resize_select = false;
    $('.resize').removeClass('dragable');
}); 
```

我正在使用 Ben Alman 的“jQuery 调整大小事件”来允许任何元素绑定到 .resize();

**[这里](http://jsfiddle.net/WHH5V/32/)**是我目前所在位置的 jsfiddle。

* * *

**更新**

```
$('.resize').css({
    resize:'both',
    overflow:'hidden'
});

$('.resize').on('mousedown', function(event) {
    var $this = $(this),
        $this_height = $this.height(),
        $this_width = $this.width(),
        x = event.pageX - $this.offset().left,
        y = event.pageY - $this.offset().top,
        xx = $this_width - 10,
        yy = $this_height - 10,
        img_num = $(this).index();

    event.preventDefault();

    if (xx - x > 0 || yy - y > 0) {
        $(document).mousemove(function(pos) {
            var thisX = pos.pageX - $this_width / 2,
                thisY = pos.pageY - $this_height / 2;

            $this.offset({
                left: thisX,
                top: thisY
            })
        });
    }

    if (xx - x < 0 && yy - y < 0) {
        $(document).mousemove(function(pos) {
            var thisX = pos.pageX - $this.offset().left,
                thisY = pos.pageY - $this.offset().top,
                ratio = ((thisX + thisY) / 2) / (($this_height + $this_width) / 2),
                height_new = $this_height * ratio,
                width_new = $this_width * ratio;

            $this.css({
                'width': width_new,
                'height': height_new
            });
        });
    }
});

$(document).on('mouseup', function() {
    $(document).unbind('mousemove');
}); 
```

这是因为@jfriend00 想弄清楚“mousedown”事件在每个元素中发生的位置以及@Jeremy C 提供各种优化的想法。

js在[这里摆弄](http://jsfiddle.net/WHH5V/47/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T04:24:11.547

你根本不需要计时器。这至少适用于 Chrome，我会在所有浏览器中进行测试以确保安全。给你：

```
var img_amount = $('.resize').length,
    height_org = new Array(),
    width_org = new Array(),
    resize_select = false,
    timer = "";

for (var i = 0; i < img_amount; i++) {
    height_org[i] = $('.resize:eq(' + i + ')').height();
    width_org[i] = $('.resize:eq(' + i + ')').width();
}

//set div width to div height * ratio to preserve aspect ratio
$('.resize').resize(function(event){
    var img_num = $(this).index(),
        height_new = $(this).height(),
        ratio = height_new / height_org[img_num],
        width_new = width_org[img_num] * ratio;

    $(this).css('width', width_new);
});

$('.resize').on('mousedown', function(event) {
    //prevent typical browser behaviour of dragging the div as an image
    event.preventDefault();

    //set z-index so the div you are dragging is in front
    $('.resize').css('z-index', 1);
    $(this).css('z-index', 2);

    $(this).mousemove(setPos);
});

$('.resize').on('mouseup', function() {
    $(this).unbind('mousemove', setPos);
});

function setPos(event) {
    var thisX = event.pageX - $(this).width() / 2;
    var thisY = event.pageY - $(this).height() / 2;
    $(this).offset({
        left: thisX,
        top: thisY
    });
} 
```

编辑：我添加了调整大小功能以使用 css 'resize: vertical' 限制纵横比，但它看起来有点跳跃。为了让它变得非常流畅，我会说在每个 div 的右下角创建自己的调整大小命中区域，向其添加一个 png 以模仿浏览器调整大小的句柄，然后在拖动功能上创建自己的调整大小，而不是使用 css 调整大小。

# c++ - C++ 中的箭头成员运算符

> ID：13023320
> 
> 赞同：6
> 
> 时间：2012-10-23T03:53:59.483
> 
> 标签：c++, pointers, reference, pass-by-reference

我对使用 C++ 很陌生。我以前处理过 Java 和 ActionScript，但现在我想学习这种强大的语言。由于 C++ 授予程序员显式使用指针的能力，我对箭头成员运算符的使用感到非常困惑。这是我尝试编写的示例代码。

主.cpp：

```
 #include <iostream>
   #include "Arrow.h"
   using namespace std;

   int main()
   {
        Arrow object;
        Arrow *pter = &object;

        object.printCrap(); //Using Dot Access
        pter->printCrap(); //Using Arrow Member Operator
        return 0;
   } 
```

箭头.cpp

```
 #include <iostream>
   #include "Arrow.h"
   using namespace std;

   Arrow::Arrow()
   {

   }

   void Arrow::printCrap(){
       cout << "Steak!" << endl;
   } 
```

在上面的代码中，它所做的只是使用两种方法（点和箭头）打印牛排。

简而言之，在使用 C++ 编写一个真正的实际应用程序时，我什么时候使用箭头符号？由于我以前的编程经验，我习惯使用点表示法，但箭头对我来说是全新的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-01-14T07:21:37.653

在 C 中，`a->b`精确地等价于`(*a).b`。为方便起见，引入了“箭头”符号；通过指针访问结构的成员是相当普遍的，箭头符号更容易编写/键入，通常也被认为更具可读性。

不过，C++ 也增加了另一个问题：`operator->`可以为`struct`/重载`class`。尽管在其他方面相当不寻常，但对于智能指针类来说这样做很常见（几乎是必需的）。

这本身并不罕见：C++ 允许重载绝大多数运算符（尽管有些运算符几乎不*应该*重载，例如`operator&&`,`operator||`和`operator,`）。

不寻常的是如何`operator->`解释重载。首先，虽然`a->b`看起来像是`->`一个二元运算符，但当您在 ​​C++ 中重载它时，它被视为一元运算符，因此正确的签名是`T::operator()`, not`T::operator(U)`或按该顺序排列的东西。

结果的解释也有些不寻常。假设`foo`是某种类型的重载对象`operator->`，`foo->bar`被解释为意义`(f.operator->())->bar`。这反过来又限制了重载的返回类型`operator->`。具体来说，它必须返回*另一个*也重载的类的实例`operator->`（或对此类对象的引用），否则它必须返回一个指针。

在前一种情况下，看起来简单`foo->bar`实际上可能意味着“追逐”整个（任意长）对象实例链，每个实例都重载`operator->`，直到最终到达可以引用名为 的成员`bar`。对于一个（公认的极端）示例，请考虑以下内容：

```
#include <iostream>

class int_proxy {
    int val;
public:
    int_proxy(): val(0) {}
    int_proxy &operator=(int n) { 
        std::cout<<"int_proxy::operator= called\n";
        val=n; 
        return *this; 
    }
};

struct fubar {
    int_proxy bar;
} instance;

struct h {
    fubar *operator->() {
        std::cout<<"used h::operator->\n";
        return &instance;
    }
};

struct g {
    h operator->() {
        std::cout<<"used g::operator->\n";
        return h();   
    }
};

struct f {
    g operator->() { 
        std::cout<<"Used f::operator->\n";
        return g();
    }
};

int main() {
    f foo;

    foo->bar=1;
} 
```

尽管`foo->bar=1;`看起来像是通过指针对成员的简单赋值，但该程序实际上会产生以下输出：

```
Used f::operator->
used g::operator->
used h::operator->
int_proxy::operator= called 
```

显然，在这种情况下`foo->bar`不*（*甚至接近）等价于简单的`(*foo).bar`. 从输出中可以明显看出，编译器生成“隐藏”代码以遍历`->`各种类中的整个重载运算符系列，以获取`foo`（指向）具有名为的成员`bar`（在本例中也是一个类型重载`operator=`，所以我们也可以看到赋值的输出）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T04:04:25.513

好问题，

> **Dot(.)** 此运算符用于访问成员函数或有时使用该类/结构的实例变量访问类或结构的数据成员。

```
object.function(); 
object.dataMember; //not a standard for class. 
```

> **箭头（->）**此运算符用于访问成员函数或有时访问类或结构的数据成员，但使用该类/结构的指针。

```
ptr->function();
ptr->datamember; //not a standard for class. 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-23T03:59:13.397

-> 运算符是一种调用被取消引用的指针的成员函数的方法。它也可以写成 (*pter).printCap()。如果没有课程或书籍，C++ 很难学习，所以我建议你买一本，这将是一项很棒的投资！

# c# - “事件”关键字的用途

> ID：13023323
> 
> 赞同：8
> 
> 时间：2012-10-23T03:54:17.380
> 
> 标签：c#, events, delegates

我最近经常使用 c# 和事件，但我才刚刚开始创建自己的事件并使用它们。我对为什么使用 event 关键字有点困惑，我只使用委托就得到了相同的结果。

```
public partial class Form1 : Form
{
    ServerConnection connection = new ServerConnection();

    public Form1()
    {
        InitializeComponent();
        connection.ref = new del(MethOne);
        connection.ref += new del(MethTwo);
    }

    public void MethOne(object message)
    {
        MessageBox.Show((string)message);
    }

    public void MethTwo(object message)
    {
        MessageBox.Show((string)message);
    }

}

public delegate void del(string message);

public class ServerConnection
{
    private TcpListener tcpListener;
    public del ref;

    private List<NetworkStream> clientList = new List<NetworkStream>();

    public ServerConnection()
    {
        this.tcpListener = new TcpListener(IPAddress.Any, 3000);
        ThreadStart startListening = new ThreadStart(ListenForClients);
        Thread startThread = new Thread(startListening);
        startThread.Start();
    }

    public void ListenForClients()
    {
        tcpListener.Start();
        ParameterizedThreadStart handleClient = new ParameterizedThreadStart(HandleClient);

        while (true)
        {
            TcpClient newClient = tcpListener.AcceptTcpClient();
            Thread handleClientThread = new Thread(handleClient);
            handleClientThread.Start(newClient);
        }
    }

    public void HandleClient(object newClient)
    {
        NetworkStream clientStream = ((TcpClient)newClient).GetStream();
        clientList.Add(clientStream);

        BinaryFormatter formatter = new BinaryFormatter();
        string message;

        while (true)
        {
            message = (string)formatter.Deserialize(clientStream);
            ref((string)message);
        }
    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-23T03:57:06.410

看一下

[C# 事件与委托](http://blog.monstuff.com/archives/000040.html)

> event 关键字是委托声明的修饰符，允许将其包含在接口中，限制它从声明它的类中调用，为其提供一对可定制的访问器（添加和删除）并强制签名委托（在 .NET 框架中使用时）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-23T04:00:43.353

`event`关键字允许您指定`add`和`remove`操作与声明内联。

```
private Action _myEvent;

public event Action MyEvent
{
    add
    {
        Console.WriteLine("Listener added!");
        _myEvent += value;
    }
    remove
    {
        Console.WriteLine("Listener removed!");
        _myEvent -= value;
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-23T03:56:32.710

目的是识别什么是事件，什么只是回调。

两者看似相同，但意义不同。

Visual Studio 还放置不同的图标来指示事件。

如果我记得很清楚，那是 C# 的早期，代表们不支持这一点：

```
this.mydelegatefield += somethingHere; 
```

只有事件......但也许这只是我的想象。

**编辑**

只是不要误导......添加/删除方法有所不同。我把它放在其他答案之后（因为我忘记了这一点）。所以，信用不是我的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T04:08:57.233

事件只是一个糖衣。定义事件时会发生 3 件事。

简单的EG：

```
public event EventHandler alarm; 
```

示例编译器输出

```
private EventHandler alarm

public void add_alarm(EventHandler value)
{
}

public void remove_alarm(EventHandler value)
{
} 
```

请注意`private`，与您的`public del me;` Public 访问器相比，可能会导致问题。此外，使用`get`and`set`是一种更好的模式

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-23T04:16:31.363

可以将事件与您的类的属性进行比较。

*   属性是您的 MemberField/Object 状态的接口。
*   同样，事件是底层委托的接口。

你仍然可以在没有事件的情况下达到最终结果。但是你失去了没有事件的封装。

不受保护的委托可能容易被滥用。

# c - 将输入存储到 malloc 数组（1d 和 2d）中并打印

> ID：13023325
> 
> 赞同：1
> 
> 时间：2012-10-23T03:54:27.380
> 
> 标签：c, arrays, malloc

我正在尝试从用户那里获取输入并将其存储到一个数组中并打印出来：我有 2 个功能：

```
 /* Read a vector with n elements: allocate space, read elements,
    return pointer */
double *read_vector(int n){
    double *vec = malloc(n * sizeof(double));

    int i;
    for (i = 0; i < n; i++)
       vec[i] = n;

    return vec;
} 
```

打印功能是：

```
void print_vector(int n, double *vec){
    int i;
    for (i = 0; i < n; i++) {
       printf("%d\n", vec[i]);
    }
} 
```

主要功能是：

```
#include <stdio.h>
#include <stdlib.h>

double *read_vector(int n);
void print_vector(int n, double *vec);
void free_vector(double *vec);

int main(){
    int n;
    double *vector;
    /* Vector */
    printf("Vector\n");
    printf("Enter number of entries: ");
    scanf("%d", &n);
    printf("Enter %d reals: ", n);
    vector = read_vector(n);
    printf("Your Vector\n");
    print_vector(n,vector);
    free_vector(vector);
} 
```

当我运行它时，它不允许我输入任何数字，它只是跳过它并打印出 0。我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T04:12:42.713

试试下面的代码。您几乎可以肯定要么没有编译警告，要么忽略警告。所有警告都有意义，对于初学者来说，它们都很重要。使用 gcc 使用 -Wall 选项，甚至使用 -pedantic。

正如halfelf 指出的那样，您的读取循环中需要一个scanf，但它必须是一个指针（&vec[i]）。总是在 main 的末尾返回一些东西。还要检查 malloc 的返回值，它可能会失败并返回一个空指针。

```
#include <stdio.h>
#include <stdlib.h>

double *read_vector(int n)
{
    double *vec = malloc(n * sizeof(double));
    int i;

    for (i = 0; i < n; i++) {
        printf("Enter number %i of %i: ", i + 1, n);
        scanf("%lf", &vec[i]);
    }
    return vec;
}

void print_vector(int n, double *vec)
{
    int i;

    for (i = 0; i < n; i++) {
        printf("%f\n", vec[i]);
    }
}

void free_vector(double *vec)
{
    free(vec);
}

int main()
{
    int n;
    double *vector;

    printf("Vector\n");
    printf("Enter number of entries: ");
    scanf("%i", &n);
    vector = read_vector(n);
    printf("Your Vector\n");
    print_vector(n, vector);
    free_vector(vector);
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T03:58:48.183

在`read_vector(int n)`函数的 for 循环中：

```
for (i=0; i<n; i++) 
   vec[i] = n;       // this should be scanf("%lf",vec+i) to read input from stdin 
```

并注意你`{`和`}`那里。如果循环中只有一行，`{`并且`}`没有必要，或者您必须使用其中一对。该`return`子句必须在循环之外。

顺便说一句，`return 0`在 main 函数的末尾添加。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-22T14:19:42.843

简单..你忘了写scanf ..！

```
double *read_vector(int n)
{

    double *vec = malloc(n * sizeof(double));

    int i;
    for (i = 0; i < n; i++)
       scanf("%d",&vec[i]);

    return vec;
} 
```

# php - 如何在php中编写正则表达式？

> ID：13023326
> 
> 赞同：1
> 
> 时间：2012-10-23T03:54:41.220
> 
> 标签：php, regex

我的正则表达式很弱。我需要检查这三个字符串'name'、'fatherName'、mohterName'。检查后我需要用大写字母初始化这三个字符串，如Name、FatherName、MotherName。当它在字符串中找到任何大写字母时，例如父亲名称，它将在名称之前添加一个空格。

谁能给我这个问题的正则表达式。我正在使用 PHP。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T05:15:51.633

下面的代码解决了我的问题。

```
$result = preg_match('*[A-Z]*', $name, $matches, PREG_OFFSET_CAPTURE);
            if(!empty($result)) {
            $name = substr_replace($name,' ', $matches[0][1], 0);
            }
            $name = ucfirst($name); 
```

感谢所有对我的帖子发表评论的人。

# .net - 如何将输出参数从 vb.net 传递到 mysql 存储过程？

> ID：13023330
> 
> 赞同：1
> 
> 时间：2012-10-23T03:54:58.650
> 
> 标签：.net, mysql, vb.net

我正在使用 .net 连接器和 mysql 5.5。当我尝试使用“out”参数调用存储过程时，`OUT or INOUT argument 2 for routine` *我* `is not a variable or NEW pseudo-variable in BEFORE trigger`在`cmd.ExecuteNonQuery()`.

怎么了？

VB代码：

```
cmd = New MySqlCommand("call testme(@id, @count)", conn)
cmd.Parameters.AddWithValue("@id", id) ' "id" and "count" are integer variables
cmd.Parameters.AddWithValue("@count", count)
cmd.Parameters("@count").Direction = ParameterDirection.Output
cmd.ExecuteNonQuery() 
```

mysql存储过程：

```
CREATE PROCEDURE testme(in taxid integer, out imageDescCount integer)
BEGIN
set imageDescCount = 23;
End 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T04:16:39.003

请试试这个

在 MySQl 中创建存储过程

```
DELIMITER $$
DROP PROCEDURE IF EXISTS `tempdb`.`GetCity` $$
CREATE PROCEDURE  `tempdb`.`GetCity` 
(IN cid INT,
 OUT cname VarChar(50)
)

BEGIN

  SET cname = (SELECT CityName FROM `City` WHERE CID = cid);

END $$

DELIMITER ; 
```

你的 vb.net 代码就像

```
Dim conn As  New MySqlConnection()
conn.ConnectionString = "server=localhost;user=root;database=tempdb;port=3306;password=******;"
Dim cmd As New MySqlCommand()

conn.Open()
cmd.Connection = conn
cmd.CommandText = "GetCity"
cmd.CommandType = CommandType.StoredProcedure
cmd.Parameters.AddWithValue("@cid", "1")
cmd.Parameters("@cid").Direction = ParameterDirection.Input

cmd.Parameters.AddWithValue("@cname", MySqlDbType.String)
cmd.Parameters("@cname").Direction = ParameterDirection.Output
cmd.ExecuteNonQuery()

Console.WriteLine("City Name: " & cmd.Parameters("@cname").Value) //Access Your Output Value 
```

如果您有任何问题，请告诉我...

谢谢

# iphone - 一个线程如何确定另一个线程是否已崩溃？

> ID：13023332
> 
> 赞同：6
> 
> 时间：2012-10-23T03:55:02.203
> 
> 标签：iphone, objective-c, ios, multithreading

我有一个后台线程正在做一堆工作 - 加载应用程序。主线程在 UIProgressView 上显示进度。

后台线程是用 performSelectorInBackground 产生的（不过，如果不同的方法使这个问题更容易解决，我不喜欢这种方法）

```
[self performSelectorInBackground:@selector(loadAppInBackground) withObject:self]; 
```

在某些情况下，一个错误导致后台线程崩溃（随着应用程序的发展出现不同的错误），导致进度条停止，但用户没有得到任何错误的明确指示。

我想检测这种情况并且比简单地挂起直到用户放弃等待更优雅地失败。

因为加载过程的持续时间可能会有很大差异，所以简单地超时并不是一个理想的选择。

前台线程检测后台线程失败的最佳方法是什么？由于前台线程忙于处理 UI，是否需要第二个后台线程来监视第一个？这看起来很难看。

是否有一些线程间通信机制可用于“ping”后台进程？更好的是，检查其他线程状态的低级系统机制？

调试器知道所有正在运行的线程......并且似乎知道它们的状态。我想知道我的应用程序是否可以调用来做同样的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T04:32:57.313

一种常见的技术是有一个额外的线程来检查相关线程的生命迹象——所谓的心跳线程。心跳线程通过检查它是否及时响应来轮询线程，如果没有，则认为线程死亡并终止它。

一个简单的心跳线程实现是检查一个由另一个线程定期递增的计数器，如果计数器在一定时间内没有递增，则认为它已死，然后可以采取适当的措施，例如重新启动线程或杀死应用程序。另一种更常见的方式是如果 hb 线程向线程发送消息并检查是否有超时响应。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T01:37:06.933

如果后台任务以某种规则循环运行（例如，有一个大循环在其中完成了大部分工作），它可以不时设置一个标志以指示它仍然存在。

一种方法是在`[NSDate timeIntervalSinceReferenceDate]`某处存储后台线程，并且在您的主线程中，偶尔（可能在计时器上）将其与当前时间进行比较。如果差异大于某个合理的限制，您可以猜测后台线程已经死亡。

另一种方法是让后台线程简单地设置一个布尔值，并让主线程询问它并定期清除它。如果布尔值在主线程询问之间没有再次设置，您可以推断它已经死亡。

第一种技术的优点是您可以“调整”“合理限制”以容忍在时间上有些不规则的代码（在任一线程中）。第二种方法通常需要更可预测的时间安排。

当然，无论哪种方法，如果后台线程刚刚结束而您还没有意识到这一点，您都希望以某种方式避免“吹哨”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-11T21:11:58.933

目标 c 中似乎没有直接检查后台线程状态的机制。提供的任何答案都是不错的选择……要么超时，要么让线程创建某种证明其继续存在的证据。

我希望有一些更简单、可靠和实时的东西。

我将尝试在线程中捕获异常，并可能会产生诸如“BackgroundThreadException”之类的通知，前台线程可以侦听并做出反应。

# angularjs - 有条件地让锚链接将用户发送到不同的页面，而不是加载到 ng-view

> ID：13023338
> 
> 赞同：5
> 
> 时间：2012-10-23T03:55:36.700
> 
> 标签：angularjs

我有一个包含锚链接的视图。该链接具有指向我网站中另一个 url 的 href。Angular 尝试使用 html5mode 加载该站点。我宁愿只使用该链接的默认行为并将用户发送到 url。如何指定这个特定链接的行为应该像普通的 html 链接，而不是角度路线？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-23T13:38:18.157

AngularJS 理解一些规则，这些规则将使浏览器执行完全重新加载。这些规则记录在[$location 服务文档](http://docs.angularjs.org/guide/dev_guide.services.$location#hashbang-and-html5-modes_html5-mode_html-link-rewriting)中的“Html 链接重写”部分。

从文档中：

在以下情况下，链接不会被重写；相反，浏览器将对原始链接执行完整的页面重新加载。

*   包含目标元素的链接示例：`<a href="/ext/link?a=b" target="_self">link</a>`
*   指向不同域的绝对链接示例：`<a href="http://angularjs.org/">link</a>`
*   以“/”开头的链接在定义 base 时指向不同的基本路径示例：`<a href="/not-my-base/link">link</a>`

请注意，最后一个示例仅在您使用`base`页面 head 部分中的元素时才有效：

```
<base href="/my-base/" /> 
```

# javascript - 我无法在 windows8 设置魅力中使用 document.GetElementByID() 获得切换控件

> ID：13023342
> 
> 赞同：2
> 
> 时间：2012-10-23T03:56:10.493
> 
> 标签：javascript, windows-8, winjs

我对javascript很陌生，所以这让我很困惑。所有的设置魅力教程只展示了如何将控件放入设置魅力中，但没有一个说明如何找到其中的信息。我试图做其中之一（就像我在主程序中做的那样）：

```
var muteToggle = document.GetElementById("Mute"); 
```

其中“静音”是单独的 html 文件中的 id。muteToggle 最终始终为空。我试着把它放在之后

```
WinJS.UI.ProcessAll().then(function completed() {... 
```

但这也没有用。其他一切与此页面中的相同：http: [//msdn.microsoft.com/en-us/library/windows/apps/hh780611.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh780611.aspx)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T05:59:17.743

确保您在从您的设置 HTML 中引用的 js 文件的 ready 函数中执行此操作。尝试在该行中断时打开 JavaScript 控制台或 QuickWatch，并查看 DOM Explorer 以查看是否可以找到切换控件。您应该可以访问它。另外，尝试 element.getElementById 而不是 document.getElementById。两者都应该实际工作，但只要您进行故障排除。祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T14:11:47.793

您的问题是您试图从应用程序激活期间运行的代码中获取对 HTML 元素的引用。尽管那段代码可以定义要为设置窗格加载的 HTML，但它实际上并未将 HTML 加载到 DOM 中。您只是无法从该位置获取实例。

您需要做的是让设置弹出窗口有自己的实现[IPageControlMembers](http://msdn.microsoft.com/en-us/library/windows/apps/jj126146.aspx)的 js 文件。特别是，您需要实现 ready 方法。一旦为页面加载了所有 HTML 和控件，包括您的切换，就会调用此方法。该链接有一个如何执行此操作的示例。

另见：

*   [WinJS.UI.Pages.define](http://msdn.microsoft.com/en-us/library/windows/apps/hh770579.aspx)
*   [使用单页导航](http://msdn.microsoft.com/en-us/library/windows/apps/hh452768.aspx)

# c# - 如何让 Windows 为以编程方式创建的 PictureBox 引发 mouseclick 事件？

> ID：13023343
> 
> 赞同：1
> 
> 时间：2012-10-23T03:56:14.770
> 
> 标签：c#, winforms, events

我正在构建一个虚拟棋盘游戏，我需要能够点击棋子来移动它们。该板在背景中创建为图片，并且这些部分是顶部的图片框。更具体地说，它们是继承自 PictureBox 的自定义类 GamePiece。我知道 PictureBox 有一个 Name_Click 方法，在单击它时会调用它，但我正在以编程方式创建我的作品，如下所示：

```
 public Player(int identity, GameBoard Board)
    {
        ID = identity;
        for (int i = 0; i < 4; i++)
        {
            Pieces[i] = new GamePiece(ID, Board.GetPlaceSize(), Board.GetPieceColor(ID), Board);
        }
    } 
```

因此，我不想硬编码为每个 Gamepiece 调用的方法，因为这会破坏我在这里的目的。

有什么建议么？我可以包含任何其他有用的代码，而且我在重新设计代码方面非常灵活，如果这能让我以后的生活更轻松的话。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T04:13:27.873

只需[`Control.Click`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.click.aspx)为您的控件添加事件处理程序：

```
public Player(int identity, GameBoard Board)
{
    ID = identity;
    for (int i = 0; i < 4; i++)
    {
        Pieces[i] = new GamePiece(ID, Board.GetPlaceSize(), Board.GetPieceColor(ID), Board);
        Pieces[i].Tag = ID;
        Pieces[i].Click += pieces_Click;
    } 
```

关于`Click`事件：

```
private void pieces_Click(object sender, EventArgs e)
{
    int id = (int) ((Pieces))sender.Tag;
    DoSomethingForId(id);
} 
```

* * *

或使用[`Anonymous Methods`](http://msdn.microsoft.com/en-us/library/0yw3tz5k%28v=VS.100%29.aspx)：

```
public Player(int identity, GameBoard Board)
{
    ID = identity;
    for (int i = 0; i < 4; i++)
    {
        Pieces[i] = new ....
        Pieces[i].Click += (sender, e) =>
                        {
                            // Do some thing
                        };
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T04:05:41.043

（连接到事件处理程序）

```
Pieces[i].Click += new EventHandler(theOnClickEvent); 
```

（事件处理程序）

```
void theOnClickEvent(object sender, EventArgs e)
    {
        //clicked.
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T04:05:53.800

会不会是：

```
gamePiece.Click += myEventHandler; 
```

对象在哪里，`gamePiece`是任何形式的事件处理程序......委托，lambda，等等。`GamePiece``myEventHandler`

# javascript - 禁用通过 jquery 加载检索的内联 javascript 的浏览器缓存

> ID：13023345
> 
> 赞同：0
> 
> 时间：2012-10-23T03:56:17.817
> 
> 标签：javascript, jquery, browser-cache, freemarker

系统设置如下：

页面是从服务器提供的普通 html 页面。页面加载后，会向服务器上的控制器发出 jquery 加载请求，该控制器是 spring mvc。然后控制器发送一个带有其余页面内容的 freemarker 模板（注意这是放在 div 中的）。

freemarker 模板本身包含一些 javascript 文件（即，

```
<script type="text/javascript" src="..."/>. 
```

所以我读到以这种方式进行 ajax 加载，javascript 文件将被内联在页面中，而不是被视为外部文件。然后我的问题是如何最好地告诉浏览器不要缓存这些 javascript 文件，因为在开发时刷新它们通常需要手动清除缓存而不是强制重新加载页面。

在这种情况下，将时间戳附加到 javascript 包括工作（即，

```
<script type="text/javascript" src="somefile.js?v=(timestamp)"> 
```

或设置

```
$.ajaxSetup({ cache: false }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T04:00:23.683

时间戳应该可以工作......就像 (new Date()).getTime() 应该在每次发送请求时为您生成一个不同的数字，因此浏览器不应该能够缓存文件。

# python - 平方和递归

> ID：13023350
> 
> 赞同：1
> 
> 时间：2012-10-23T03:56:41.700
> 
> 标签：python, recursion

我必须编写一个递归函数 sumSquares()，它以非负 (>= 0) 整数 n 作为参数，并返回 1 和 n 之间数字的平方和。例子：

```
>>>sumSquares(2)
5
>>>sumSquares(3)
14 
```

这是我到目前为止所拥有的：

```
def sumSquares(n):
    if n==0:
        return 0
    else:
        return sumSquares(n-1)+sumSquares(n-1) 
```

我也可以解释一下您的所作所为，我仍在学习递归，这将有很大帮助。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T04:00:12.120

那不应该是

```
return n * n + sumSquares(n - 1) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T04:06:18.970

假设你用 S(x) 表示你的函数，x>0

```
S(x) = 1^2 + 2^2 + ... x^2 
```

这可以写成

```
S(x) = (1^2 + 2^2 + ...(x-1)^2 )+ x^2

S(x) = S(x-1) + x^2\. 
```

现在为程序。

```
def sumSquares(n):
        return sumSquares(n-1)+ n*n 
```

但问题是这不知道何时停止。我们必须给出一个基本案例，告诉它何时停止。

你知道 S(0) = 0 或 S(1) = 1。

所以

```
def sumSquares(n):
    assert n >= 0
    if (n == 0):
        return 0
    else:
        return sumSquares(n-1)+ n*n 
```

# ruby-on-rails - assert_redirected_to 用法？

> ID：13023351
> 
> 赞同：0
> 
> 时间：2012-10-23T03:56:43.323
> 
> 标签：ruby-on-rails, testunit

刚开始使用`Test::Unit`但在确定重定向测试时遇到问题：

```
 test "should destroy line_item" do
    assert_difference('LineItem.count', -1) do
      delete :destroy, id: @line_item
    end

    assert_redirected_to controller: 'carts', action: 'show'
  end 
```

引发以下错误：

```
Failure: Expected response to be a redirect to <http://test.host/carts/980190962> but was a redirect to <http://test.host/carts/980190963>.
test_should_destroy_line_item(LineItemsControllerTest)
test/functional/line_items_controller_test.rb:47:in `block in <class:LineItemsControllerTest>' 
```

[文档](http://apidock.com/rails/ActionDispatch/Assertions/ResponseAssertions/assert_redirected_to)说明以下内容：

**assert_redirected_to(options = {}, message=nil) 公共**

断言传入的重定向选项与最新操作中调用的重定向选项匹配。这种匹配可以是部分的，这样 assert_redirected_to(:controller => "weblog") 也会匹配 redirect_to(:controller => "weblog", :action => "show") 等的重定向。

但`assert_redirected_to controller: 'carts'`导致更彻底的失败：

```
Failure: Expected response to be a redirect to <http://test.host/carts> but was a redirect to <http://test.host/carts/980190963>.
test_should_destroy_line_item(LineItemsControllerTest) 
```

如果文档是正确的，我错过了什么？如果不是，无论匹配的ID如何，我都必须测试重定向的替代方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T21:45:34.277

似乎文档`assert_redirected_to`并不完全正确，但部分问题与在设置阶段（`@line_item`创建时）与销毁阶段相比，cart_id 不同。所以解决方法是修改夹具/控制器，使其在销毁时具有相同的 cart_id。它不能解决真正的问题，`assert_redirected_to`但至少测试会通过。

# php - PHP比较两个数组并具有三个结果集，匹配的和不匹配的

> ID：13023355
> 
> 赞同：-1
> 
> 时间：2012-10-23T03:57:01.090
> 
> 标签：php, arrays

我有 2 个数组。一个是原始数据，另一个是新数据。在他们两个之间可能有匹配的值。我需要从新的入站数组中找出什么是新的，什么是匹配的，什么不是匹配的。

最终目标是我需要这 3 个数组，其中一项是从原始数组中删除的，一项是新条目，然后是与新条目中的任何内容匹配的原始条目。

我正在考虑从 3 个空白数组开始填充的程度，因为我循环遍历原始数组或新数组，并比较它们将每种类型的旧、新、删除到相应的数组，以便我可以在那里处理结果后。我可以在脑海中拼凑出一个想法，该想法适用于 2 个数组作为输出，但第三个我迷路了。所以我暂时对这一点有所阻碍。寻求建议和/或帮助创建一个循环或更好的东西，这将产生我正在寻找的 3 组结果。

来自数据库的原始数据数组：

```
Array(
      15,
      22,
      100,
      1500,
      2000,
      500,
      3000,
      1101
   ) 
```

入站新数据数组

```
Array(
      100,
      800,
      920,
      1500,
      2000,
      1603,
      500,
      3000,
      1101
   ) 
```

原始和入站新之间的预期匹配数组：

```
Array(
      100,
      1500,
      2000,
      500,
      3000,
      1101
   ) 
```

原始和新之间的预期“新”条目数组：

```
Array(
      100,
      800,
      920,
      1603
   ) 
```

来自旧的预期条目的数组，在原始和新之间不匹配：

```
Array(
      15,
      22
   ) 
```

它可能不会出现，因为我显然只是手动输入了这些......但希望它在某种程度上展示了我试图实现的目标

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T04:39:05.930

Barmar 的评论是正确的，`array_diff`并且`array_intersect`是您想要的。不过，您的问题中有一个错字，“100”同时出现在匹配和新值数组中。

```
<?php
$orig = array(15, 22, 100, 1500, 2000, 500, 3000, 1101);
$post = array(100, 800, 920, 1500, 2000, 1603, 500, 3000, 1101);

// Gets things in both arrays
$matches = array_intersect($orig, $post);
// Gets things in $post that aren't in $orig
$new     = array_diff($post, $orig);
// Gets things in $orig that aren't in $post
$removed = array_diff($orig, $post);

foreach (array($orig, $post, $matches, $new, $removed) as $array) {
    print_r($array);
} 
```

我的猜测...您正在处理复选框或多选以确定要保留的内容、要添加的内容和要删除的内容。

# c# - C# XML 解析问题

> ID：13023356
> 
> 赞同：0
> 
> 时间：2012-10-23T03:57:03.313
> 
> 标签：c#, xml-parsing

我很想导入一个包含大量特殊字符的大型 xml 文件，这些特殊字符会在我的应用程序中不断抛出错误。在导致令牌错误之前，我通过 XML 文件中的大约 76 条记录。{"解析查询时出错。[令牌行号=1，令牌行偏移量=725，错误令牌=S]"}

我把我的代码放在下面。

```
public void ReadXMLIntoDB()
        {
            OpenFileDialog ofd;
            ofd = new OpenFileDialog();
            ofd.Filter = "Xml Files|*.xml|AllFiles|*.*";
            ofd.ShowDialog();

            StreamReader sr = new StreamReader(ofd.FileName);
            XmlTextReader xr = new XmlTextReader(sr);
            int iNumRows = 0;
            while (xr.ReadToFollowing("row") != false)
            {
                string sFacName, sFacID, sAddress, sCity, sState, sZip, sOwnerID, sOwnerName, sStreetNum, sStreetName, sStreetType, sPostDirectional, sPhone, sProgramCat, sProgramCatDes, sInspectionDate, sInspectionType, sInspectionDes, sSerialNum, sActionCode, sActionDes, sResultCode, sResultDes, sViolationCode, sViolationDes, sInspectionMemo;
                xr.ReadToFollowing("value");
                sFacName = xr.ReadInnerXml();

                xr.ReadToFollowing("value");
                sFacID = xr.ReadInnerXml();

                xr.ReadToFollowing("value");
                sAddress = xr.ReadInnerXml();

                xr.ReadToFollowing("value");
                sCity = xr.ReadInnerXml();

                xr.ReadToFollowing("value");
                sState = xr.ReadInnerXml();

                xr.ReadToFollowing("value");
                sZip = xr.ReadInnerXml();

                xr.ReadToFollowing("value");
                sOwnerID = xr.ReadInnerXml();

                xr.ReadToFollowing("value");
                sOwnerName = xr.ReadInnerXml();

                xr.ReadToFollowing("value");
                sStreetNum = xr.ReadInnerXml();

                xr.ReadToFollowing("value");
                sStreetName = xr.ReadInnerXml();

                xr.ReadToFollowing("value");
                sStreetType = xr.ReadInnerXml();

                xr.ReadToFollowing("value");
                sPostDirectional = xr.ReadInnerXml();

                xr.ReadToFollowing("value");
                sPhone = xr.ReadInnerXml();

                xr.ReadToFollowing("value");
                sProgramCat = xr.ReadInnerXml();

                xr.ReadToFollowing("value");
                sProgramCatDes = xr.ReadInnerXml();

                xr.ReadToFollowing("value");
                sInspectionDate = xr.ReadInnerXml();

                xr.ReadToFollowing("value");
                sInspectionType = xr.ReadInnerXml();

                xr.ReadToFollowing("value");
                sInspectionDes = xr.ReadInnerXml();

                xr.ReadToFollowing("value");
                sSerialNum = xr.ReadInnerXml();

                xr.ReadToFollowing("value");
                sActionCode = xr.ReadInnerXml();

                xr.ReadToFollowing("value");
                sActionDes = xr.ReadInnerXml();

                xr.ReadToFollowing("value");
                sResultCode = xr.ReadInnerXml();

                xr.ReadToFollowing("value");
                sResultDes = xr.ReadInnerXml();

                xr.ReadToFollowing("value");
                sViolationCode = xr.ReadInnerXml();

                xr.ReadToFollowing("value");
                sViolationDes = xr.ReadInnerXml();

                xr.ReadToFollowing("value");
                sInspectionMemo = xr.ReadInnerXml();
                Regex.Replace(sInspectionMemo, @"[^\w\&#.@-]", "");

                SqlCeConnection con;
                SqlCeCommand cmd;
                string cstr, sql;

                cstr = @"Data Source=|DataDirectory|\foodDB.sdf";
                sql = String.Format("Insert Into food(FacilityName,FacilityID,SiteAddress,City,State,ZipCode,OwnerID,OwnerName,StreetNumber,StreetName,StreetType,PostDirectional,Phone,ProgramCategory,ProgramCategoryDescription,InspectionDate,InspectionType,InspectionDescription,SerialNumber,ActionCode,ActionDescription,ResultCode,ResultDescription,ViolationCode,ViolationDescription,InspectionMemo) values ('{0}','{1}','{2}','{3}','{4}','{5}','{6}','{7}','{8}','{9}','{10}','{11}','{12}','{13}','{14}','{15}','{16}','{17}','{18}','{19}','{20}','{21}','{22}','{23}','{24}','{25}')", sFacName, sFacID, sAddress, sCity, sState, sZip, sOwnerID, sOwnerName, sStreetNum, sStreetName, sStreetType, sPostDirectional, sPhone, sProgramCat, sProgramCatDes, sInspectionDate, sInspectionType, sInspectionDes, sSerialNum, sActionCode, sActionDes, sResultCode, sResultDes, sViolationCode, sViolationDes, sInspectionMemo);
                con = new SqlCeConnection(cstr);
                cmd = new SqlCeCommand(sql, con);
                con.Open();
                cmd.ExecuteNonQuery();
                con.Close();

                ++iNumRows;

                Action ac = delegate()
                {
                    txrows.Text = iNumRows.ToString();
                };
                Dispatcher.BeginInvoke(ac);
            }

        }

        private void Button_Click_1(object sender, RoutedEventArgs e)
        {
            Thread t = new Thread(ReadXMLIntoDB);
            t.Start();
        } 
```

据我所知，我可以在该记录中看到的唯一可能导致错误的明显内容是 a ' 应该在哪里。有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T03:58:56.623

您的 xml 文档可能无效。无论如何，您可以设置将在第 76 次迭代时发生的断点并检查错误。

pS：在while语句的某处设置断点。右键单击断点并选择 HitCount。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T15:27:46.520

不久前，我用 C# 编写了一个[带有 XSD 验证器的 XML，](http://bo.codeplex.com/SourceControl/changeset/view/81799#1408233)它可以很容易地适应跳过 XSD，并且只检查 XML 是否至少格式正确。如果您有 XSD 架构，您还可以检查 XML 是否有效。

> [格式良好的 XML](http://en.wikipedia.org/wiki/XML#Well-formedness_and_error-handling)遵循一些 XML 规则
> [有效的 XML](http://en.wikipedia.org/wiki/XML_validation)是格式良好的 XML，也满足模式（XSD 可用于制定这样的模式）

该工具将向您显示它在 XML 文档的哪个位置格式不正确或无效。

让这个工具工作的最简单方法就是[下载整个 bo-library 源代码树](http://bo.codeplex.com/SourceControl/BrowseLatest)，然后将`bo-Library.sln`解决方案加载到 Visual Studio 中，选择`ValidateXmlWithXsd.csproj`并从那里开始。

# javascript - 智能手机操作系统的版本号

> ID：13023357
> 
> 赞同：-2
> 
> 时间：2012-10-23T03:57:03.913
> 
> 标签：javascript, android, ios, regex, blackberry

> **可能重复：**
> [如何以编程方式获取 iOS 的字母数字版本字符串](https://stackoverflow.com/questions/4857195/how-to-programmatically-get-ioss-alphanumeric-version-string)

是否有任何未来证明正则表达式可以从用户代理获取以下智能手机操作系统的版本号？

**安卓**

（我发现了类似的东西： /Androids+([d.]+)/ ）

**iOS**

**黑莓**

任何建议将不胜感激。

澄清：似乎问题是询问如何在网络应用程序中获取移动设备操作系统版本，可能使用 JS。

更新：

在我不好意思问这个问题之后，我至少想提供我想出的解决方案：

```
supportedDevice: function() {
    var supportedDevice = false;
    var userAgent = window.navigator.userAgent;

    // check for supported Android device
    if ( /Android/.test(userAgent) ) {
        var a_index = Number(userAgent.indexOf('Android')) + 8;
        var a_version = +userAgent.substring(a_index, a_index+1);
        if ( a_version >= 3 ) {
            supportedDevice = true;
            console.log('Android device supported!')
        }

    }
    // check for iOS supported devices
    else if ( /iPhone/.test(userAgent) ) {
        var i_index = Number(userAgent.indexOf('iPhone OS')) + 10;
        var i_version = +userAgent.substring(i_index, i_index+1);
        if ( i_version >= 6 ) {
            supportedDevice = true;
            console.log('iPhone device supported!')
        }
    }
    // check for iOS supported devices
    else if ( /BlackBerry/.test(userAgent) ) {
        var b_index = Number(userAgent.indexOf('Version/')) + 8;
        var b_version = +userAgent.substring(b_index, b_index+1);
        if ( b_version >= 6 ) {
            supportedDevice = true;
            console.log('BB device supported!')
        }
    }
    return supportedDevice;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T04:01:44.550

如果您需要在 Web 应用程序中获取版本号，最好的办法是使用设备用户代理并解析出版本号。[一种更稳健的方法是在WURFL 数据库](http://wurfl.sourceforge.net/)中查找用户代理以获得设备特征和相应的操作系统。第一种方法更简单。

如果您使用的是应用程序，大多数操作系统 SDK 都提供 API 来识别设备上运行的操作系统版本

# java - 在 iReport 表达式中调用 Java API

> ID：13023358
> 
> 赞同：2
> 
> 时间：2012-10-23T03:57:03.490
> 
> 标签：java, jasper-reports, ireport

我正在尝试将对*Java*库的调用附加到*iReport*表达式中。

我用一个非常简单的库尝试了这个，它返回了一个 hello world 字符串。

```
package utils;
public class Hello {
    public static String hello()
    {
        return "Hello";
    }
} 
```

在*iReport*中，我想使用这个 API。我将上面的库编译成一个jar文件。*在Tools -> Options -> Classpath*中添加了位置。

然后尝试了以下方法：

*   在文本字段中编辑表达式`new utils.Hello().hello()`
*   创建一个新字段并将其类型设置为`utils.Hello`. 然后`field.hello()`在表达式中使用

在这两种情况下，它都抱怨它无法解析你好。但是它在类路径中。我还尝试右键单击报告根并添加`utils.Hello/utils`到*Java*导入指令。两者似乎都没有上课。

任何意见是极大的赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T07:03:42.127

你正确的表达方式可能是这样的：

```
<textFieldExpression><![CDATA[utils.Hello.hello()]]></textFieldExpression> 
```

工作样本：

```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport ..>
    <queryString>
        <![CDATA[SELECT DISTINCT city FROM address ORDER BY city]]>
    </queryString>
    <field name="CITY" class="java.lang.String"/>
    <detail>
        <band height="20" splitType="Stretch">
            <textField>
                <reportElement x="0" y="0" width="100" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$F{CITY}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="100" y="0" width="100" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[utils.Hello.hello()]]></textFieldExpression>
            </textField>
        </band>
    </detail>
</jasperReport> 
```

您还可以在报告中添加导入指令。在这种情况下，表达式将是：

```
<textFieldExpression><![CDATA[Hello.hello()]]></textFieldExpression> 
```

工作样本：

```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport ... whenNoDataType="AllSectionsNoDetail">
    <import value="utils.Hello"/>
    <title>
        <band height="41">
            <textField>
                <reportElement x="188" y="11" width="100" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[Hello.hello()]]></textFieldExpression>
            </textField>
        </band>
    </title>
</jasperReport> 
```

**注意**：对于这两个示例，*jar*文件（带有***utils.Hello***类）必须在类路径中。

## ![在 iReport 中设置类路径](../Images/a867b80ab8631de87a0d5551aa546b75.png)

您可以在[此处](http://jasperreports.sourceforge.net/sample.reference/scriptlet/index.html#scriptlet)找到有关使用 srciptlets 的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T05:50:06.887

您的字段类型应该是 String ，而不是 utils.Hello

# node.js - node.bcrypt.js 如何比较没有加盐的散列密码和明文密码？

> ID：13023361
> 
> 赞同：113
> 
> 时间：2012-10-23T03:57:10.480
> 
> 标签：node.js, bcrypt

来自[github](https://github.com/ncb000gt/node.bcrypt.js/)：

要散列密码：

```
var bcrypt = require('bcrypt');
bcrypt.genSalt(10, function(err, salt) {
    bcrypt.hash("B4c0/\/", salt, function(err, hash) {
        // Store hash in your password DB.
    });
}); 
```

检查密码：

```
// Load hash from your password DB.
bcrypt.compare("B4c0/\/", hash, function(err, res) {
    // res == true
});
bcrypt.compare("not_bacon", hash, function(err, res) {
    // res = false
}); 
```

从上面看，比较中怎么可能没有盐值？我在这里想念什么？

* * *

## 回答 #1

> 赞同：111
> 
> 时间：2012-10-23T06:00:12.363

盐被合并到散列中（作为明文）。比较函数只是简单地从散列中提取盐，然后使用它来散列密码并执行比较。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2014-05-24T05:23:27.130

我也有与原始海报相同的问题，我环顾四周并尝试不同的事情来理解机制。正如其他人已经指出的那样，盐被连接到最终的哈希值。所以这意味着几件事：

1.  算法必须知道盐的长度
2.  还必须知道盐在最终字符串中的位置。例如，如果从左侧或右侧偏移特定数字。

这两件事通常在实现中被硬编码，例如[bcryptjs](https://github.com/dcodeIO/bcrypt.js)的 bcrypt 实现源将盐长度定义为 16

```
/**
* @type {number}
* @const
* @private
*/

var BCRYPT_SALT_LEN = 16; 
```

因此，为了说明这个想法背后的基本概念，如果想手动完成，它看起来类似于下面。我不建议你自己实现这样的东西，因为有你可以做的库。

```
var salt_length = 16;
var salt_offset = 0;

var genSalt = function(callback)
{
    var alphaNum = '0123456789abcdefghijklmnopqurstuvwxyzABCDEFGHIJKLMNOPQURSTUVWXYZ';
    var salt = '';
    for (var i = 0; i < salt_length; i++) {
        var j = Math.floor(Math.random() * alphaNum.length);
        salt += alphaNum[j];
    }
    callback(salt);
}

// cryptographic hash function of your choice e.g. shar2
// preferably included from an External Library (dont reinvent the wheel)
var shar2 = function(str) {
    // shar2 logic here 
    // return hashed string;
}

var hash = function(passwordText, callback)
{
    var passwordHash = null;
    genSalt(function(salt){
        passwordHash = salt + shar2(passwordText + salt);
    });

    callback(null, passwordHash);
}

var compare = function(passwordText, passwordHash, callback)
{
    var salt = passwordHash.substr(salt_offset, salt_length);
    validatedHash = salt + shar2(passwordText + salt);

    callback(passwordHash === validatedHash);   
}

// sample usage
var encryptPassword = function(user)
{
    // user is an object with fields like username, pass, email
    hash(user.pass, function(err, passwordHash){
        // use the hashed password here
        user.pass = passwordHash;
    });

    return user;
}

var checkPassword = function(passwordText, user)
{
    // user has been returned from database with a hashed password
    compare(passwordText, user.pass, function(result){
        // result will be true if the two are equal
        if (result){
            // succeeded
            console.log('Correct Password');
        }
        else {
            // failed
            console.log('Incorrect Password');
        }
    });
} 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2020-10-21T05:44:50.033

Bcrypt 比较没有盐字符串的散列密码和明文密码，因为散列密码包含我们在散列时创建的盐字符串。

**例如 ：**

取这个普通密码：

> **546456546456546456456546111**

使用 Bcrypt 的上述纯文本的哈希密码：

> **$2b$10$uuIKmW3Pvme9tH8qOn/H7uZqlv9ENS7zlIbkMvCSDIv7aup3WNH9W**

所以在上面的哈希密码中，有**$**符号分隔的三个字段。

i) 第一部分**$2b$**标识使用的 bcrypt 算法版本。

ii) 第二部分**$10$** 10 是成本因素（在我们创建盐串时只有盐轮。如果我们进行 15 轮，那么价值将是**$15$**

iii）第三部分是前**22 个**字符（只不过是盐字符串）在这种情况下，它是

> **uuIKmW3Pvme9tH8qOn/H7u**

剩下的字符串是散列密码。所以基本上，saltedHash = salt string + hashedPassword 可以防止彩虹表攻击。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2020-04-11T19:58:24.057

因为我自己也有同样的问题，所以我很清楚你在想什么。

[您对密码](https://en.wikipedia.org/wiki/Cryptography)算法中使用的[“密钥”](https://en.wikipedia.org/wiki/Key_(cryptography))和用于减慢加密过程并使黑客更难使用暴力的“盐”有误解。

*当您使用**普通密码**和盐生成散列时，此散列**将密码本身用作密钥**！因此，下次您将尝试将其与纯密码进行比较时，此纯密码必须与您用于生成哈希的密码完全相同！这就是为什么您不必将其存储在其他地方的原因，因为它始终由用户在注册和登录步骤中提供！*

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-10-27T19:38:12.880

它只是一个固定长度的字符串。

```
console.log("");
var salt = bcrypt.genSaltSync(10);
console.log(salt);
hash = bcrypt.hashSync("foobar", salt);
console.log(hash);

console.log("");
var salt = bcrypt.genSaltSync(10);
console.log(salt);
hash = bcrypt.hashSync("foobar", salt);
console.log(hash);

console.log("");
var salt = bcrypt.genSaltSync(10);
console.log(salt);
hash = bcrypt.hashSync("foobar", salt);
console.log(hash); 
```

```
$2a$10$onmcKV.USxnoQAsQwBFB3e
$2a$10$onmcKV.USxnoQAsQwBFB3eytL3UZvZ5v/SudaWyaB9Vuq9buUqGO2

$2a$10$mwQfdyVS9dsO4SuxoR5Ime
$2a$10$mwQfdyVS9dsO4SuxoR5ImeG7atz7RXGRXb.c0VHp5zSn1N2VOA.Vq

$2a$10$uVUuJr6LryjchhKEg6PH7u
$2a$10$uVUuJr6LryjchhKEg6PH7unTw8aJGK0i3266c5kqDBLJkf80RHEpq

$2a$10$Y.upG5/54zvJyZacRxP17O
$2a$10$Y.upG5/54zvJyZacRxP17OH60BC0hQRMNfQjJxSWE77fyBrbzalmS 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-10-15T18:08:24.803

盐被合并到哈希中。比较函数只是简单地从散列中提取盐，然后使用它来散列密码并执行比较。

当用户登录我们的系统时，我们应该检查输入的密码是否正确。与其他系统会解密数据库中的密码（如果它是加密的）并将其与用户输入的密码进行比较，我对 bcrypt 所做的（假设它实现单向散列）是对输入的密码进行加密用户。为此，我将密码传递给 bcrypt 以计算哈希，同时还将密码存储在与用户关联的数据库中（哈希）。这是因为，如前所述，bcrypt 算法使用随机段（盐）来生成与密码关联的散列。这与密码一起存储，您需要它来重新计算用户输入的密码的哈希值，最后与注册时输入的密码进行比较，看看它们是否匹配。

# objective-c - NSArrayController 填充 NSTableView 但不设置单元格标题

> ID：13023365
> 
> 赞同：0
> 
> 时间：2012-10-23T03:57:53.660
> 
> 标签：objective-c, cocoa, nstableview, nstablecolumn, nstablecellview

我有一个两列 NSTableView，我想用从 CSV 文件中抓取的条目来填充它。除了未设置每个表格单元格的标题外，一切正常。

这是为 NSArray 中的每一行调用的函数

```
- (void)populateTable:(NSString *)fname :(NSString *)lname {
    NSMutableDictionary *value = [[NSMutableDictionary alloc] init];
    [value setObject:[NSString stringWithFormat:@"%@", fname] forKey:@"first_name"];
    [value setObject:[NSString stringWithFormat:@"%@", lname] forKey:@"last_name"];

    [arrayController addObject:value];
    [value release];
    [fname_list reloadData];
    [lname_list reloadData];
} 
```

"last name" 列的值绑定到 Array Controller**排列**对象.last_name 并且 "first_name" 和 "last_name" 都被列为**Array Controller > Object Controller > Keys**列表中的键

创建了适当数量的表格单元格（CSV 文件中的 3 个条目 = 每列中的 3 行），但未设置每个单元格的标题（根据列设置为“first_name”或“last_name”） ; 单元格的标题仍然是“表格视图单元格”

**编辑：**

使用 navinsillu 的更改后，我最终得到以下功能：

```
- (void)populateTable:(id)sender :(NSString *)fname :(NSString *)lname {
    [arrayController insert:sender];
    [[[self arrayController] selection] setValue:fname forKeyPath:@"first_name"];
    [[[self arrayController] selection] setValue:lname forKeyPath:@"last_name"];

    [fname_list reloadData];
    [lname_list reloadData];
} 
```

在我的标题中，我有

```
@property (retain,nonatomic,readwrite) IBOutlet NSArrayController *arrayController; 
```

但我仍然得到相同的结果：每个表格列中有 3 行/单元格，所有标题为“表格视图单元格”

**编辑：**

经过一番检查，我注意到表列`Model Key Path`的`Value`绑定下没有任何条目。当我输入**first_name**或**last_name**时，即使键列在数组控制器的列表中，它也会显示未**找到完成。**`Keys`不幸的是，我不知道为什么它没有找到钥匙。

**编辑：**

奇怪的。我尝试删除和添加表视图和数组控制器，但没有奏效。但是，创建一个新项目并执行完全相同的操作会产生预期的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T04:42:54.453

您可以在 Interface Builder 中的表格标题处设置标题。您可以双击表格列标题并为其设置标题。![像这样我们可以将标题设置为表格列](../Images/55787bbda0c089cee1dbb637e0faa6b1.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T05:35:58.070

以与我完全相同的方式重新创建项目会产生我所期望的结果。我不确定为什么重做这一切都有效，但确实有效。

# xaml - 如何在 Windows 8 应用程序中保留启动画面的图像？

> ID：13023367
> 
> 赞同：0
> 
> 时间：2012-10-23T03:58:06.907
> 
> 标签：xaml, windows-8, splash-screen

目前我已经为启动画面设置了一个图像，但是当我重新启动系统时，它会更改为默认图像。

我设置的图像不存在。请指导我。

还建议我如何设计一个新的启动画面。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T06:07:28.890

安装应用程序后，启动画面始终存在。您是否尝试过卸载并重新安装该应用程序。同时重建项目。您可以为初始屏幕提供的唯一设计元素是`620x300`图像和与之相配的任何背景颜色。除此之外，您不得更改任何内容。

# javascript - 静态页面大小或动态

> ID：13023370
> 
> 赞同：0
> 
> 时间：2012-10-23T03:58:42.437
> 
> 标签：javascript, html, css

这不是我真正需要的答案，但对我来说更像是一种好奇心。我个人通过检查屏幕尺寸来动态制作我的网页，然后从该尺寸创建我的 div。现在，与我的方法相比，“静态”大小调整（如使用 px）有什么好处？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T04:04:42.707

显而易见的答案是控制您的设计的好处。此外，通过完全动态生成页面内容，您正在（通常但并不总是安全）假设您的使用启用了 javascript。如果没有回退默认值，那些非 JS 用户会看到什么？

就个人而言，我会选择根据范围内的屏幕/窗口大小进行大规模调整。这样一来，您就不必在每次用户调整其视口时都深入 DOM，而且，正如我之前所说，您可以更好地控制内容的呈现方式。

就我的两分钱...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T04:08:55.300

我根据窗口的大小和设备的类型来确定将哪些样式表发送到浏览器——但它们是固定宽度的页面。我个人觉得很难写出好看的网站，在低分辨率和高分辨率屏幕上都可以很好地扩展和看起来不错。对我来说，控制 2 或 3 个不同的“尺寸”要容易得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T04:09:55.420

等待 javascript 执行也会延迟用户开始阅读您的内容的时间，这并不总是可取的。

有时，艺术设计师实际上会进行布局设计，您只需输入重要代码即可使事情正常运行……他们碰巧使用大量静态图像尺寸进行装饰……

访问 dom 可能既慢又昂贵，对于一些我只想快速清晰地查看内容的页面，也许所有这些调整大小真的没有必要。

# java - SSD 上的键/值存储非常慢

> ID：13023379
> 
> 赞同：6
> 
> 时间：2012-10-23T03:59:32.687
> 
> 标签：java, database, key-value, key-value-store, solid-state-drive

我确信：

*   我正在 Linux 上使用 Java/Eclipse，并尝试在磁盘上分别存储大量 16/32 字节的键/值对。密钥是完全随机的，由 SecureRandom 生成。
*   速度保持在约 50000 次插入/秒，直到达到约 100 万个条目。
*   一旦达到此限制，java 进程每 1-2 秒从 0% CPU 到 100%、从 150MB 内存到 400MB、从 10 次插入/秒到 100 次振荡。
*   我尝试了 Berkeley DB 和 Kyoto Cabinet 以及 Btrees 和 Hashtables。结果相同。

什么可能有助于：

*   写在SSD上。
*   对于每个插入，平均有 1.5 次读取 - 不断交替读取和写入。

我怀疑在达到某个缓存/缓冲区限制之前，不错的 50000 速率会上升。那么大的减速可能是由于 SSD 没有处理混合的读/写，正如这个问题所建议的那样：[SSD 的低延迟键值存储](https://stackoverflow.com/questions/10577795/low-latency-key-value-store-for-ssd)。

问题是：
**这种极端减速可能来自哪里？**不可能都是 SSD 的错。很多人都乐于使用 SSD 进行高速 DB 进程，我敢肯定他们经常混合读写。

谢谢。

**编辑：**我已经确保删除任何内存限制，并且 java 进程总是有空间分配更多内存。
**编辑：**仅删除读数和插入不会改变问题。

**最后编辑：**为了记录，对于哈希表，它似乎与初始数字桶有关。在京都机柜上，该数字无法更改，默认为约 100 万，因此最好在创建时获取正确的数字（要存储的最大记录数的 1 到 4 倍）。对于 BDB，它旨在逐步增加存储桶的数量，但由于它消耗资源，因此最好提前预定义数量。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T12:58:03.573

您的问题可能与您正在使用的数据库的强持久性保证有关。

基本上，对于任何符合 ACID 的数据库，每次数据库提交至少需要一次 fsync() 调用。这样做是为了保证*持久性*（否则，更新可能会在系统故障的情况下丢失），同时也是为了保证磁盘上数据库的内部一致性。在 fsync() 调用完成之前，数据库 API 不会从插入操作返回。

fsync()在许多操作系统和磁盘硬件上可能是一个*非常重量级的操作，甚至在 SSD 上也是如此。*（电池或电容器支持的企业 SSD 是一个例外——它们基本上可以将缓存刷新操作视为无操作，以避免您可能遇到的延迟。）

一个解决方案是在一次大交易中完成所有商店。我不了解 Berkeley DB，但对于 sqlite，性能可以通过这种方式大大提高。

要确定这是否是您的问题，您可以尝试使用 strace 观察您的数据库写入过程，并寻找频繁的 fsync() 调用（每秒多次调用将是一个非常强烈的提示）。

**更新：** 如果您绝对确定*不需要*持久性，可以尝试[Optimizing Put Performance in Berkeley DB 中](https://stackoverflow.com/questions/3825022/optimizing-put-performance-in-berkeley-db)的答案；如果你这样做了，你应该研究一下 Berkeley DB 的 TDS（事务数据存储）特性。

# c - 将 int 更改为 double 会将我的结果更改为零

> ID：13023384
> 
> 赞同：0
> 
> 时间：2012-10-23T03:59:56.627
> 
> 标签：c

如果我将所有变量都保留为 int，我得到 32。除法应该给我 32.5，所以我认为将所有变量都更改为 double 就可以了，但它只是给了我零......

这是代码（int中的所有内容）：

```
#include <stdio.h>
#include <stdlib.h>

void sommeTableau(int tableau[], int tailleTableau, int *x, int *average);

int main(int argc, char *argv[])
{
    int tableau[4] = {30, 50, 50};
    int *x = 0;
    int *average = 0;
    const int tailleTab = 4;

    sommeTableau(tableau, tailleTab, &x, &average);

    printf("The average is %d\n", average);

    return 0;
}

void sommeTableau(int tableau[], int tailleTableau, int *x, int *average)
{
  int i = 0;

  for (i = 0 ; i < tailleTableau ; i++)
  {
  *x = *x + tableau[i];
  }
  *average = *x/tailleTableau;

} 
```

所以这行得通，给了我 32...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T04:11:22.880

您的代码中有很多错误。我纠正了所有这些

```
#include <stdio.h>
#include <stdlib.h>

void sommeTableau(int tableau[], int tailleTableau, int *x, double *average);

int main(int argc, char *argv[])
{
    int tableau[4] = {30, 50, 50};
    int x = 0;
    double average = 0;
    const int tailleTab = 4;

    sommeTableau(tableau, tailleTab, &x, &average);

    printf("The average is %lf\n", average);

    return 0;
}

void sommeTableau(int tableau[], int tailleTableau, int *x, double *average)
{
  int i = 0;

  for (i = 0 ; i < tailleTableau ; i++)
  {
  *x = *x + tableau[i];
  }
  *average = (double)(*x)/(double)tailleTableau;

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T04:10:22.430

您的问题之一在于：

```
int *x = 0;
int *average = 0;

sommeTableau(tableau, tailleTab, &x, &average); 
```

前两行应该是：

```
int x = 0;
int average = 0; 
```

假设您使用的是体面的编译器，这从您应该得到的警告中可以明显看出：

```
qq.c: In function ‘main’:
qq.c:13: warning: passing argument 3 of ‘sommeTableau’ from incompatible pointer type
qq.c:4: note: expected ‘int *’ but argument is of type ‘int **’
qq.c:13: warning: passing argument 4 of ‘sommeTableau’ from incompatible pointer type
qq.c:4: note: expected ‘int *’ but argument is of type ‘int **’ 
```

此外，您不需要 _everything 是双精度值，只是平均值，因此您应该只更改该变量的类型并将其与传递给函数的参数相匹配。

在进行除法之前，还需要将总数`*x`转换为双精度数，以便它知道您不是指整数除法。

随着这些变化，输出从以下变化：

```
The average is 4.000000 
```

（对我来说）正确：

```
The average is 32.500000 
```

有关详细信息，请参阅以下程序：

```
#include <stdio.h>
#include <stdlib.h>

void sommeTableau(int tableau[], int tailleTableau, int *x, double *average) {
    int i;
    for (i = 0 ; i < tailleTableau ; i++)
        *x = *x + tableau[i];
    *average = ((double)(*x))/tailleTableau;
}

int main (void) {
    int tableau[4] = {30, 50, 50};
    int x = 0;
    double average = 0;
    const int tailleTab = 4;

    sommeTableau(tableau, tailleTab, &x, &average);
    printf("The average is %lf\n", average);

    return 0;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-23T04:17:31.393

您将 x 和 average 作为空指针传递。这就是为什么您的代码给出分段错误的原因。

根据您的描述，请检查（http://codepad.org/z8fVUTe5）。

```
#include <stdio.h>
#include <stdlib.h>

void sommeTableau(int tableau[], int tailleTableau, int *x, int *average);

int main(int argc, char *argv[])
{
    int tableau[4] = {30, 50, 50};
    int x = 0;
    int average = 0;
    const int tailleTab = 4;

    sommeTableau(tableau, tailleTab, &x, &average);

    printf("The average is %d\n", average);

    return 0;
}

void sommeTableau(int tableau[], int tailleTableau, int *x, int *average)
{
  int i = 0;

  for (i = 0 ; i < tailleTableau ; i++)
  {
  *x = *x + tableau[i];
  }
  *average = *x/tailleTableau;

} 
```

输出：-

> 平均32

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-23T04:04:14.253

这里有一些非常错误的地方——您将`x`and定义`average`为 in 中的指针变量`main`，如果幸运的话，它的大小与 an 相同`int`，但可能会导致未定义的行为。

从和in`*`的局部变量声明中删除它，它实际上可能会起作用。`x``average``main`

此外，在 中`sommeTableau`，除法 (`*x`和`tailleTableau`) 的两个操作数都是`int`，因此执行整数除法并在分配给 之前丢弃余数`*average`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-23T04:08:46.670

```
int *x = 0;
int *average = 0; 
```

这是定义两个*指针*并将*指针*设置为零——在指针上下文中，这将转换为空指针。所以，你必须指向什么都没有。

```
sommeTableau(tableau, tailleTab, &x, &average); 
```

在这里，您将这些指针的*地址*传递给函数，因此该函数实际上正在接收一个`int **`.

```
printf("The average is %d\n", average); 
```

然后获取指针的值——它持有的地址——并（可能）将该位模式视为`int`. 这在技术上是未定义的行为，但在许多机器上，一个指针足以让它看起来像一个 int 工作。但是，浮点数几乎*永远不会发生同样的情况。*

您在这里要做的是定义两个`int`s（或两个`double`s）并将它们的地址传递给您的函数：

```
double x=0.0, average=0.0;

sommeTableau(tableau, tailleTab, &x, &average);

// ...
printf("%f, %f\n", x, average); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-23T04:09:34.550

它实际上不起作用。

在这里，您将`x`和定义`average`为`NULL`指向`int`：

```
int *x = 0;
int *average = 0; 
```

在这里，而不是指向`int`您的指针传递指向指针的指针`int`：

```
sommeTableau(tableau, tailleTab, &x, &average); 
```

这显然是错误的。您应该启用编译器警告以查看此类有问题的地方并更正它们。

这里的更正是：

```
int x = 0;
int average = 0; 
```

现在，这里：

```
printf("The average is %d\n", average); 
```

`printf()`你对你要给它的东西撒谎（一个`int`，因为`%d`），但你实际上是给它一个指向`int`. 上面的更正解决了这个问题。如果您`printf()`对某些参数的类型撒谎，那么任何事情都可能发生。如果您的编译器是`gcc`并且您启用了警告，您也可以发现此类问题。

# css - 您如何在 BlogEngine.net 中使用 LESS？

> ID：13023386
> 
> 赞同：0
> 
> 时间：2012-10-23T04:00:00.870
> 
> 标签：css, less, blogengine.net, blog-engine

这里的 LESS 文档

```
http://lesscss.org/#usage 
```

说：*“确保在脚本之前包含样式表。”*

但是，BlogEngine.net 似乎通过重写所有指向 *.js 文件的链接并将它们放在样式表之前来使这成为不可能。

我已经尝试了所有我能想到的方法，包括将文件放在子目录中并使用相对路径。我很犹豫要不要弄乱 BlogEngine.Net 代码。

有没有办法让 LESS 在 BlogEngine.Net 中使用 CSS？有什么方法可以强制引擎允许我在 *.less 引用*之后订购 Javascript 条目？*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T19:58:39.770

也许您可以使用跟踪脚本或“将自定义代码添加到 HTML 头部”字段（您可以在管理 -> 设置 -> 自定义代码中找到它们）。

从我在代码中可以看到，这些字段在样式表之后的 HEAD 部分中呈现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T02:20:01.963

> 有**没有**办法让 LESS 在 BlogEngine.Net 中使用 CSS？

如果您愿意考虑一种与使用客户端更少的解析器不同的方法，我建议您在[Visual Studio 2012.2](http://www.hanselman.com/blog/ReleasedASPNETAndWebTools20122InContext.aspx)或Visual Studio 2012 早期版本中[的 Web Essentials Extension](http://visualstudiogallery.msdn.microsoft.com/07d54d12-7133-4e15-becb-6f451ea3bea6)中尝试设计时间更少的解析器。它允许您编写更少的代码文件并在每次保存时将其编译为 css 并缩小 css。然后你可以在你的主题中引用输出的 min.css 文件。

# c - 搜索和替换文本

> ID：13023393
> 
> 赞同：1
> 
> 时间：2012-10-23T04:00:42.180
> 
> 标签：c, parsing, search, replace, fopen

我正在编写一个小型 C 程序，它在文件中搜索文本字符串并将其替换为另一个字符串，但在执行此操作时，我不断收到分段错误，并且由于某种原因，我的缓冲区（名为 c）在我的 fgets 调用后为空。

这是我的代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <dirent.h>
#include <string.h>

/*
 *program replaces all strings that match a certain pattern within a file
 */

int main(int argc, char** argv)
{
    // check if there are correct amount of arguments
    if(argc != 4) 
    {
            printf("Error, incorrect amount of input arguments!\n");
            return 1;
    } // end if

    // initializers
    int i;
    char* temp;
    FILE* searchFile;
    char* c = malloc(sizeof(char));
    char* fileName = malloc(sizeof(argv[1]));
    char** searchWord = malloc(sizeof(argv[2]));
    char* replaceWord = malloc(sizeof(argv[3]));

    fileName = argv[1];
    *searchWord = argv[2];
    replaceWord = argv[3];

    // checks to see if searchWord isnt too big
    if(strlen(*searchWord) > 256)
    {
            printf("Error, incorrect amount of input arguments!\n");
            return 1;
    }

    // opens file
    searchFile = fopen(fileName,"r+");

    // searches through file
    do
    {
            fgets(c, 1, searchFile);

            i = 0;
            while(i < strlen(*searchWord))
            {
                    printf("search character number %i: %c\n", i, *searchWord[i]);     

                    /* 
                     * finds number of letters in searchWord 
                     * by incrementing i until it is equal to size of searchWord
                     */
                    if(strcmp(c,searchWord[i])) 
                    {

                            i++;
                    }

                    // replaces searchWord with replace word
                    if(i == (strlen(*searchWord)))
                    {
                            printf("inside replace loop\n");
                            memcpy(searchWord, replaceWord,(sizeof(replaceWord)/sizeof(char))+1);
                            printf("The search term (%s) has been replaced with the term: %s!\n",*searchWord,replaceWord);
                    }
            }
    }while(strlen(c) > 0);

    // closes file
    fclose(searchFile);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T04:17:08.450

您将 1 的大小传递给 fgets。但是 fgets 函数最多从给定流中读取的字符数比由大小指定的字符数少一个。因此，如果您传递 1 的大小，它会读取 0 个字符。它少读一个的原因是为空的“行尾”字符留有空间。

fgets 函数在找到换行符时停止读取，在文件末尾或错误处，并且保留换行符（如果有）。因此，您需要 malloc c 是您希望在字符串中包含的任意多个字符，加上一个用于换行符和一个用于空“行尾”字符的字符。

还有一些需要注意的事情。以下两个语句中的第一个首先分配空间来存储文件名，然后将文件名指针指向它。然后第二个将文件名指针指向包含程序第一个参数的传入字符串：

```
char* fileName = malloc(sizeof(argv[1]));
fileName = argv[1]; 
```

要么直接将文件名指针指向那里并且不分配任何内存：

```
char* fileName = argv[1]; 
```

或者，如果您确实需要分配内存，请更改第二行以复制字符串的内容：

```
char* fileName = malloc(sizeof(argv[1]));
strcpy(fileName,argv[1]); 
```

或者，更容易使用 strdup 分配内存，然后复制内容：

```
char* fileName = strdup(argv[1]); 
```

# java - 我有一个通用方法，它不会采用我将其参数化为的类型

> ID：13023399
> 
> 赞同：3
> 
> 时间：2012-10-23T04:02:03.743
> 
> 标签：java, generics, compiler-errors

我想在这里获取 G.myUglyList 列表的内容并将其传递给 Outer.send() 方法。我不明白为什么这会产生编译器错误。? extends Inner 是我参数化 Outer 的类型。那么为什么它拒绝传递给它的 Inner 呢？它想要一个“? extends Inner”，它不是一种类型。

我希望将列表声明为`List<Outer<? extends Inner>>`它可以采用 Inner 的子类型。（请参阅下面的**编辑**了解为什么会这样）

```
interface Outer<T> {
    void send(T message);
}
interface Inner {}
interface Inner2 extends Inner {}

public class G {

    List<Outer<? extends Inner>> myUglyList;

    void foo() {
        Inner xxx = null;
        for (Outer<? extends Inner> outer : myUglyList) {
            outer.send(xxx); //error
        }
    }
} 
```

我收到此错误：

```
error: method send in interface Outer<T#2> cannot be applied to given types;
required: CAP#1
found: Inner<T#1>
reason: actual argument Inner<T#1> cannot be converted to CAP#1 by method invocation conversion
where T#1,T#2 are type-variables:
T#1 extends Object declared in class G
T#2 extends Object declared in interface Outer
where CAP#1 is a fresh type-variable:
CAP#1 extends Inner<T#1> from capture of ? extends Inner<T#1> 
```

**编辑**：我得到了很多答案，说只是列出 type `List<Outer<Inner>>`，但这是不正确的。如果这样做，我将*无法*添加 Inner 的子类型。如果我尝试添加一个`Outer<Inner2>`，它会失败。所以 list 必须是 type `List<Outer<? extends Inner>>`。

```
interface Inner2 extends Inner {}        
class G {
  void foo() {
    Outer<Inner2> foiled = null;
    myUglyList.add(foiled);   //this will fail if list is of type List<Outer<Inner>>
    Inner xxx = null;
    for (Outer<? extends Inner> outer : myUglyList) {
    outer.send(xxx); //error
  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T04:07:49.293

更改您的代码：

```
interface Outer<T> {
    void send(T message);
}
interface Inner {}
interface Inner2 extends Inner {}

public class G {

    List<Outer<Inner>> myUglyList;

    void foo() {
        Inner2 xxx = null;
        for (Outer<Inner> outer : myUglyList) {
            outer.send(xxx); //error
        }
    }
} 
```

它会编译

**更新：**

```
// No matter if you put 'T extends Inner' here, the 'add' won't compile
interface Outer<T extends Inner> {
    void send(T message);
}
interface Inner {}
interface Inner2 extends Inner {}

public class G {

    List<Outer<Inner>> myUglyList;

    void foo() {
        Outer<Inner2> foiled = null;

        // This way, the 'add' invocation will compile, but it 
        // breaks the generic and generates a warning.
        //
        // Casting 'foiled' to (Outer<Inner>) will also fail
        // because the compiler sees Outer<Inner2> as complete different type
        // from Outer<Inner>
        myUglyList.add((Outer) foiled);  

        Inner xxx = null;
        for (Outer<Inner> outer : myUglyList) {
            outer.send(xxx); //error
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T04:08:07.823

只需声明

```
List<Outer<Inner>> myUglyList; 
```

然后，您可以`Inner`不受限制地添加 的子类型。通过声明它

```
List<Outer<? extends Inner>> myUglyList; 
```

您说的`myUglyList`是“列表`Outer<some specific (but unknown) subtype of Inner>`”。那不是你想要的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-23T04:10:54.210

`outer`是 type `Outer<? extends Inner>`，即某个未知的子类型，`Inner`并且它的`send`方法接受一个相同子类型的对象。

例如`outer`，可能是 type `Outer<OtherInner>`，然后`outer.send`需要 a `OtherInner`，所以`outer.send(xxx)`是错误的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-23T04:09:54.033

```
 for (Outer<? extends Inner> outer : myUglyList) {
     outer.send(xxx); //error
 } 
```

其中，`Outer<? extends Inner> outer`，所以实际类型是未知的（`?`）。`send`接受一些未知的延伸`Inner`，也`outer`有一些延伸`Inner`但仍然未知的东西。

**更新**

```
interface Outer<T extends Inner> {
    void send(T message); //this can take instance of subtype of Inner
}
interface Inner {}
interface Inner2 extends Inner {}

class G {

    List<Outer<Inner>> myUglyList; //you can add instances of subtypes of Inner

    void foo() {
        Inner xxx = null;
        for (Outer<Inner> outer : myUglyList) {
            outer.send(xxx); //error
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-23T18:39:34.273

PECS - 生产者`extends`消费者`super`

因为`outer`是用 参数化的`extends`，所以你不能将*任何东西*（除了`null`）传递给它的`send`方法。

# sql - SQL：多次复制一行，每次改变一个值

> ID：13023404
> 
> 赞同：4
> 
> 时间：2012-10-23T04:03:26.267
> 
> 标签：sql, insert-select

我在表中有一行数据：

```
Key | Val1 | Val2
----+------+-----
1   | A    | B 
```

我想复制这一行，但从列表中为每个新行分配一个不同的键（实际上是外键）：

```
New keys
--------
2
3
4 
```

可以通过查询轻松获得此列表。复制后，表格应如下所示：

```
Key | Val1 | Val2
----+------+-----
1   | A    | B
2   | A    | B
3   | A    | B
4   | A    | B 
```

到目前为止，我想出的只是：

```
INSERT INTO table (Key, Val1, Val2) (
    SELECT '2' AS Key, Val1, Val2 FROM table WHERE Key='1'
); 
```

这有效，但当然它一次只复制一行。有没有办法一次复制所有行？

如果它有所作为，我正在使用 Oracle。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T04:06:04.317

您可以使用 SELECT .. FROM DUAL 来组成值，并且可以使用 UNION ALL 将多行组合成一个结果。有多种其他方法可以创建结果集，例如递归公用表表达式。

```
INSERT INTO table (Key, Val1, Val2)
SELECT d.newKey, t.Val1, t.Val2
FROM table t
cross join (select 2 NewKey from dual union all
            select 3 NewKey from dual union all
            select 4 NewKey from dual) d; 
```

如果您的新键来自子查询，那就更容易了，例如

```
INSERT INTO table (Key, Val1, Val2)
SELECT d.FKey, t.Val1, t.Val2
FROM table t
cross join (select FKey
            from SomeOtherTable
            Where ......) d; 
```

但是，请注意，因为您正在复制`FROM table`and `INTO table`，您将`table`同时复制每个外键的所有记录。

# c++ - 有什么区别：句柄、指针和引用

> ID：13023405
> 
> 赞同：29
> 
> 时间：2012-10-23T04:03:38.830
> 
> 标签：c++, oop, pointers, reference, handle

句柄与指向对象的指针有何不同，为什么我们不能引用引用？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-10-23T04:16:07.497

句柄通常是对对象的*不透明*引用。句柄的类型与引用的元素无关。`open()`例如，考虑系统调用返回的文件描述符。类型是`int`，但它表示打开文件表中的一个条目。`int`存储在表中的实际数据与通过使实现不必维护兼容性而返回的数据无关`open()`（即，可以透明地重构实际表而不影响用户代码。句柄只能由同一库接口中的函数使用，可以将句柄重新映射回实际对象。

指针是内存中的地址和驻留在该内存位置的对象类型的组合。该值是地址，指针的类型告诉编译器可以通过该指针执行哪些操作，如何解释内存位置。指针是*透明*的，因为引用的对象具有指针中存在的具体类型。请注意，在某些情况下，指针可以用作句柄（a`void*`是完全不透明的，指向空接口的指针也是不透明的）。

引用是对象的*别名*。这就是为什么你不能有一个引用的引用：你可以有一个对象的多个别名，但你不能有一个别名的别名。与指针一样，引用是类型化的。在某些情况下，编译器可以将引用实现为在使用时自动取消引用的指针，在某些其他情况下，编译器可以具有没有实际存储的引用。重要的部分是它们是对象的*别名*，它们必须使用对象进行初始化，并且在初始化后不能重新定位以引用不同的对象。一旦它们被初始化，引用的所有使用都是对真实对象的使用。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-10-23T04:15:13.947

甚至问这个问题，“为什么我们不能有一个引用的引用？” 意味着你不明白什么是*引用*。

引用是对象的另一个名称；而已。如果我有一个对象存储在变量 X 中，我可以创建一个变量 Y，它是对该对象的引用。他们都在谈论同一个对象，那么引用 Y 到底意味着什么？这与引用 X 没有什么不同，因为它们都引用了相同的东西。

就 C++ 语言而言，“句柄”没有定义。一般来说，“句柄”是代表某种资源的某种形式的构造。您可以从一些创建资源的 API 中获取它。您调用将句柄作为参数的函数，以查询或修改资源的状态。当你完成它时，你把它交给其他一些 API 函数。

指针*可以*是句柄。引用可以是句柄。一个对象可以是一个句柄。整数可以是句柄*。*这完全取决于实现句柄的系统想要用它做什么。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-10-23T04:16:38.327

A`handle`有时也被称为“魔术饼干”。它只是标识对象的某种不透明类型的值。在某些情况下，它被实现为一个实际的指针，所以如果你将它转换为一个指向正确类型的指针，你可以取消引用它并使用它指向的任何类型的东西。

在其他情况下，它将被实现为指针以外的东西——例如，您可能有一个该类型的对象表，而句柄实际上只是该表的索引。除非你知道表的基地址，否则你不能对索引做很多事情。

C++ 只是说引用引用是不可能的。没有太多“为什么”的方式——如果他们非常想这样做，他们无疑可以允许它（以及引用数组，就此而言）。然而，决定最好限制引用（很多），所以他们就是这样做的。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-10-23T04:13:51.653

区别在于上下文。

句柄的基本含义是它在非常有限的上下文中引用某个对象；例如。一个操作系统只能为一个用户或 pid 打开 20 个文件。指针在“内存”的上下文中引用同一个对象。而reference是一个对象的“别名”——它指的是源代码上下文中的一个对象；因此对引用的引用不存在，因为引用已经“是”对象。

# python - 将变量分配给对象python

> ID：13023406
> 
> 赞同：1
> 
> 时间：2012-10-23T04:03:41.633
> 
> 标签：python, object, python-2.7

`object`除了以下类之外，关键字是否有任何用途：

```
class HelloWorld(object):
    pass 
```

因为当为它分配一个变量时，`object`它似乎没有用（没有`variable.__dict__`或任何东西）。

例如：

```
x=object()
x.anything="foo"#<----- throws an error 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T04:10:28.323

一种可能的用途是用于标记值 - 您希望具有不会被意外复制的唯一值的东西。例如：

```
NOT_SET = object()

def some_function(arg=NOT_SET):
    if arg is NOT_SET:
        # the user didn't pass in a value for 'arg'
     else:
        # the user passed in a value for 'arg' 
```

因为每个对象实例都有一个唯一的标识，所以`if`只有当用户没有传入一个值时，语句的条件才会为真（与参数的常见默认值不同，`None`用户可能会将其传递给某些函数）。

# c - 从链表中删除节点时遇到问题

> ID：13023407
> 
> 赞同：0
> 
> 时间：2012-10-23T04:03:59.020
> 
> 标签：c, linked-list

我一直在为我正在创建的 shell 编写这段代码，但由于某种原因它不起作用。我正在实现一个 watchuser 函数，该函数在给出参数时监视用户（args [1]）。然而，当给出第二个参数（args[2]）“off”时，用户应该从链表中删除并且不再被监视。

```
struct userList * goList;
goList = userInventory;
do{
    if (strcmp(userInventory->username, args[1]) == 0){              
       printf("%s\n", args[1]);
       printf("%s\n",userInventory->username);                      
       struct userList * temp2;
       temp2 = userInventory->next;
       if (userInventory->next != NULL){
          userInventory->next = temp2->next;
          userInventory->next->prev = userInventory;
       }                        
       free(temp2);
    }
    goList = goList->next;      
}while  (goList != userInventory); 
```

我的全局结构也如下：

```
struct userList{
    char * username;
    struct userList * prev;
    struct userList * next;
} 
```

出于某种原因，此代码不会从我的链接列表中删除用户节点。添加工作，但这个删除功能不会，我不知道为什么。打印语句只是为了确保它正在执行条件，它就是。

如果有人可以帮助我找到错误背后的原因，我将不胜感激。到那时，我将尝试调试它。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T04:57:42.420

如果我对您的代码有任何了解，

问题1（似是而非）：

```
goList = userInventory;
do {
    ...
    goList = goList->next;
} while (goList != userInventory); 
```

这是一个循环列表吗？如果不是，则条件`while ()`不会变为真。

问题2：

```
goList = userInventory;
do {
    if (strcmp(userInventory->username, args[1]) == 0) {
    ...
    }
    goList = goList->next;
} while (goList != userInventory); 
```

在这里，您继续比较列表头部（或尾部）中的字符串，而不是比较当前节点中的字符串，`goList`. 如果匹配在最初指向的第一个节点（头/尾）中，则仅在上述代码中找到匹配项才能成功`userInventory`。

问题3：

```
 temp2 = userInventory->next;
   if (userInventory->next != NULL) {
      userInventory->next = temp2->next;
      userInventory->next->prev = userInventory;
   }
   free(temp2); 
```

让我们假设`userInventory`已经更正为`goList`：

```
 temp2 = goList->next;
   if (goList->next != NULL) {
      goList->next = temp2->next;
      goList->next->prev = goList;
   }
   free(temp2); 
```

首先，它`free()`不是匹配节点，而是它之后的节点（或者甚至是`NULL`），这是错误的。

其次，这段代码没有对节点进行正确的取消链接和重新链接。它应该是什么（假设列表不是循环的）：

```
 temp2 = goList;
   if (goList->next != NULL) {
      goList->next->prev = goList->prev; // now goList->next node points to goList->prev node
   }
   if (goList->prev != NULL) {
      goList->prev->next = goList->next; // now goList->prev node points to goList->next node
   }
   free(temp2); 
```

问题4：

```
do {
    if (strcmp(goList->username, args[1]) == 0) {
        temp2 = goList;
        if (goList->next != NULL) {
            goList->next->prev = goList->prev; // now goList->next node points to goList->prev node
        }
        if (goList->prev != NULL) {
            goList->prev->next = goList->next; // now goList->prev node points to goList->next node
        }
        free(temp2);
    }
    goList = goList->next;
} while (...); 
```

如果删除成功，此行将访问刚刚释放的节点并可能使您的程序崩溃：

```
 goList = goList->next; 
```

因此，您需要将代码更改为：

```
do {
    if (strcmp(goList->username, args[1]) == 0) {
        temp2 = goList;
        if (goList->next != NULL) {
            goList->next->prev = goList->prev; // now goList->next node points to goList->prev node
        }
        if (goList->prev != NULL) {
            goList->prev->next = goList->next; // now goList->prev node points to goList->next node
        }
        goList = goList->next;
        free(temp2);
    }
    else
    {
        goList = goList->next;
    }
} while (...); 
```

问题 5：

```
goList = userInventory; 
```

如果删除列表头（或者是尾？）节点，则需要更新`userInventory`以指向它之后的下一个节点。如果不这样做，您将失去对列表的所有访问权限，因为`userInventory`将指向已释放的内存，而不是指向剩余节点（如果有）。

问题 6（似是而非）：

```
 free(temp2); 
```

上面的行没有`free()`后面的记忆`temp2->username`。`free()`如果它是`malloc()`ed ，你想要它。

您真的应该一次一步解决问题（例如，首先，遍历列表，然后取消链接/重新链接节点，然后删除节点）。

当事情不清楚或不起作用时，请使用纸和铅笔（或绘图板和钢笔或粉笔）自己想象问题。绘制对象，箭头描绘指针或它们之间的一些其他连接等，在对象旁边涂抹变量名称，以便您可以清楚地看到如何从图表进展到代码。

# ruby - Ruby json 解析错误：意外令牌

> ID：13023408
> 
> 赞同：4
> 
> 时间：2012-10-23T04:04:03.373
> 
> 标签：ruby, json

我有一个打开和解析 json 文件的工作方法。现在我正在尝试遍历 json 文件的目录并显示它们的内容。

单个文件的工作方法：

```
def aperson
  File.open("people/Elvis Presley.json") do |f|
    parse = JSON.parse(f.read) 
  end
end 
```

遍历目录的非工作方法：

```
16\. def list
17\.   Dir.glob('people/*').each do |f|
18\.     parse = JSON.parse(f) 
19    end
20\. end 
```

我的错误是：

```
/Users/ad/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/json/common.rb:148:in `parse': 743: unexpected token at 'people/Elvis Presley.json' (JSON::ParserError)
    from /Users/ad/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/json/common.rb:148:in `parse'
    from app.rb:18:in `block in list'
    from app.rb:17:in `each'
    from app.rb:17:in `list'
    from app.rb:24:in `<main>' 
```

目录中的所有文件都具有相同的内容，并且根据 JSONlint 是有效的。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-23T04:10:03.930

您尝试将*文件名*解析为 JSON，这不起作用。

相反，您需要先读取文件：

```
parse = JSON.parse(File.read(f)) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-23T04:08:52.787

不确定，但你可以尝试解析文件的内容而不是文件名：

```
parse = JSON.parse( File.read f ) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T04:13:03.410

在您的非工作代码中，`f`只是扩展文件名的字符串。因此，您需要在收到块中的文件名后读取文件。

在编写它时，@nneonneo 已经为您提供了解决方案。所以我不会再给了。

# jaxb - JAXB：使用 xs:extension 时忽略元素的顺序

> ID：13023414
> 
> 赞同：1
> 
> 时间：2012-10-23T04:04:44.177
> 
> 标签：jaxb, xsd, jaxb2, xsd-validation

我们使用 JAXB 进行 Java-xml 绑定。我们最初创建了域类，然后使用**schemagen**命令行工具生成了以下模式。但生成的架构无效，给出以下错误消息。

**错误消息：** cos-all-limited.1.2：一个所有模型组必须出现在一个粒子中，{min 发生} = {max 出现} = 1，并且该粒子必须是构成 {content type} 的一对的一部分复杂的类型定义。

**用例：** 有两个类 Emp(Base class) 和 Dept(Child class)。
1\. 元素顺序没有限制（即empId、deptId、deptName可以以任意顺序出现）。所以我们使用了 xs:all element
2。在 Dept 类中，deptId 字段应该只出现一次（minOccurs =1，maxOccurs=1），deptName 是可选的。
根据我的用例，我无法生成有效的模式。我确实在谷歌上搜索过。但我找不到解决方案。所以我期待专家可以回答这个问题。您能否查看以下课程，模式并指导我正确的方向。

**注意：请不要建议我创建一些临时域类。**
感谢期待。

**Emp.java**

```
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name="EmpType", propOrder={})
@XmlRootElement
public class Emp {

    @XmlElement(name="empId", required = true)
    private String empId;
} 
```

**java部门**

```
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name="DeptType", propOrder={})
public class Dept extends Emp
{

    @XmlElement(name="deptId", required = true)
    private String deptId;
    private String deptName;
} 
```

**Schema1.xsd**

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<xs:schema version="1.0" xmlns:xs="http://www.w3.org/2001/XMLSchema">

  <xs:element name="emp" type="EmpType"/>

  <xs:complexType name="EmpType">
    <xs:sequence>
      <xs:element name="empId" type="xs:string"/>
    </xs:sequence>
  </xs:complexType>

  <xs:complexType name="DeptType">
    <xs:complexContent>
      <xs:extension base="EmpType">
        <xs:all>  <!--showing error message, mentioned above -->
          <xs:element name="deptId" type="xs:string" minOccurs="1" maxOccurs="1"/>
          <xs:element name="deptName" type="xs:string" minOccurs="0"/>
        </xs:all>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
</xs:schema> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T16:32:49.897

您试图允许的文档结构实际上很难在 XML 模式中表示。您可能无法从[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)注释模型生成它。但是，您确实有几个选择：

**选项 #1 - 生成更简单的 XML 模式**

如果您没有使用 XML 模式验证 XML 内容，而只是将其用作人们可以用作指南的文档，那么我会删除这些`all`部分并`sequence`改用它。这将与您拥有的继承关系更好地工作。如果您没有指定实例，`Schema`则`Unmarshaller`不会强制执行元素顺序，因此您将能够读取所有符合您的规则的 XML 文档。

**选项 #2 - 创建您自己的 XML 模式**

如果您希望 XML 模式准确反映所有可能接受的输入，那么您需要自己编写它。`@XmlSchema`您可以使用包级别注释来引用这个现有的 XML 模式。

```
@XmlSchema(location = "http://www.example.com/package/YourSchema.xsd")
package com.example;

import javax.xml.bind.annotation.XmlSchema; 
```

# html - 用于文本链接的 css sprite

> ID：13023417
> 
> 赞同：0
> 
> 时间：2012-10-23T04:05:22.240
> 
> 标签：html, css

我正在尝试对我在无序列表中的一些文本链接使用带有一堆图标的图像，但未能仅显示 1 个图标，其侧面有空格用于文本。这是我所拥有的：

[http://jsfiddle.net/XyVtq/2/](http://jsfiddle.net/XyVtq/2/)

我的CSS：

```
#head_about {    background: url(http://i.imgur.com/IOA8l.png) no-repeat -2px -2px;    width: 9px;    height: 18px; display:block; margin-left:20px;  }​ 
```

我的html：

```
<ul>
        <li><a id="head_about" href="test.html" >About Us</a></li>
 </ul>​ 
```

如果我添加左填充，它会在整个图像中显示更多图标。有没有办法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T04:18:03.503

我将精灵与内容分开，我通常在 html 中添加一个专用于精灵的图标标记，然后单独设置链接的样式。

看到这个：http: [//jsfiddle.net/XyVtq/1/](http://jsfiddle.net/XyVtq/1/)

```
<ul id="header_pages">
  <li>
    <i id="icon"></i> <a id="head_about" href="<?php echo tep_href_link(FILENAME_ABOUT_US); ?>" >About Us</a>
  </li>
</ul>​

#icon {
  background: url(http://i.imgur.com/IOA8l.png) no-repeat -2px -2px;    
  width: 9px;    
  height: 18px; 
  display:inline-block
} 

li a {
   margin-left:18px;   
} 
```

# php - 使用 PHP 从字符串中删除字符

> ID：13023418
> 
> 赞同：-2
> 
> 时间：2012-10-23T04:05:29.510
> 
> 标签：php, mysql

我想知道是否有任何方法可以使用 PHP 从字符串中删除反斜杠“\”？出于某种原因，当我使用 mysqli_real_escape_string() 时，输出文本在任何撇号之前都有一个“\”。我知道我可以使用函数来去除斜杠，但我想保留所有正斜杠“/”。

顺便说一句，我已经确保魔术引号已关闭。问题仍然存在。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T04:09:03.097

有一个功能，令人惊讶的是它被称为`stripslashes`

在这里：http: [//php.net/manual/en/function.stripslashes.php](http://php.net/manual/en/function.stripslashes.php)

*   如果这是您担心的，它将保留您的正斜杠

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T06:32:55.810

```
QUERY:-remove backslashes '\' from a string but I want to keep all forward slashes '/'. 
After hard working and googled if find result of your query:-

$path="uploads\\folder_name\\ankur/like you"; /////string
echo str_replace("\\"," ",$path);

output:-uploads folder_name ankur/like you 
```

# uitableview - UITableViewCell 有 UITextField，可以删除单元格，但是当它是第一响应者时会崩溃

> ID：13023421
> 
> 赞同：0
> 
> 时间：2012-10-23T04:05:53.630
> 
> 标签：uitableview, uitextfield, first-responder

我有一个自定义 UITableViewCell，其中有一个文本字段，可以删除单元格，然后当表格处于编辑模式并且单元格也有文本字段的第一响应者时出现问题，在这种情况下它只是崩溃说我不能删除不让第一响应者辞职的单元格。

当单元格被删除时，我尝试为文本字段 resignFirstResponder ，但由于删除立即发生并且 resignFirstResponder 有动画，所以它仍然不起作用。

有没有人有类似的问题并碰巧找到了解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T08:54:10.447

似乎`UITableViewCell`充当您的`UITextField`. 如果是这样，那么只需尝试在删除单元格之前将`UITextField`委托设置为。`nil`

# solr - 印地语语音过滤器工厂

> ID：13023424
> 
> 赞同：0
> 
> 时间：2012-10-23T04:06:15.733
> 
> 标签：solr, lucene, search-engine, data-analysis

我正在使用 Apache solr，我正在尝试使用语音过滤器工厂，我已经尝试了 solr.PhoneticFilterFactory 可用的所有编码器，但它们都不支持印度语言。是否有任何其他可用的过滤器/方法，以便我可以获得印度语言的语音表示，例如印地语、泰米尔语、孟加拉语等

如果不是，那么我们如何修改现有过滤器以支持这些语言。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T01:54:17.250

您是否尝试过新的 Beider Morse Filter Factory，它刚刚在 3.6 版中添加并且（唉）还没有很好的文档记录？

[https://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#solr.BeiderMorseFilterFactory](https://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#solr.BeiderMorseFilterFactory)

它是为中欧和东欧姓氏的语音搜索而开发的，但也许它也适用于其他语言。我个人发现它比 Soundex 或其他旧的类似声音的方法好得多。

# javascript - 将 bbUI 中的参数传递到另一个页面失败

> ID：13023425
> 
> 赞同：1
> 
> 时间：2012-10-23T04:06:16.733
> 
> 标签：javascript, blackberry, blackberry-webworks

基于：带有我的完整代码的[黑莓 Wiki 屏幕](https://github.com/blackberry/bbUI.js/wiki/Screens) ：[我的完整代码](http://pastebin.com/G8NL7u51)

如果我使用 onscreenready 函数从页面 A 传递我的参数，如下所示：

```
ondomready: function(element, id) {
    if (id == 'UPDATE') {
            UPDATE_initialLoad(element, params);
    }
} 
```

对于我会给出/抛出参数的页面（我们只说页面 B），我如何赢得或获取上一个表单提供的结果/参数。我想让一个表单更新表单中的数据，并且会一直填充抛出 fieldnya 参数数据。

我在我的页面 B 中使用这样的：

```
function UPDATE_initialLoad(element, params) { 
    setTimeout(UPDATE_loadAfterTimeout,100);
}

function UPDATE_loadAfterTimeout() {
    var id                  = data_id
    var nmDepan             = data_depan
    var nmBelakang          = data_belakang
    var phone               = data_phone
    var email               = data_email

    document.getElementById('txtID').value = id
    document.getElementById('txtNMDEPAN').value = nmDepan
    document.getElementById('txtNMBELAKANG').value = nmBelakang
    document.getElementById('txtPhone').value = phone
    document.getElementById('txtEmail').value = email      
} 
```

但是结果失败了……

请帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T20:30:08.473

您需要将数据推送到页面：

```
bb.pushScreen("myPage.html", "UPDATE", myParams); 
```

然后这将在页面加载时触发：

```
ondomready: function(element, id, params) {
    if (id == 'UPDATE') {
        UPDATE_initialLoad(element, params);
    }
} 
```

确保将参数传递给延迟函数：

```
function UPDATE_initialLoad(element, params) { 
    setTimeout(UPDATE_loadAfterTimeout(params),100);
}

function UPDATE_loadAfterTimeout(params) {
    var id                  = params['data_id'];
    var nmDepan             = params['data_depan'];
    var nmBelakang          = params['data_belakang'];
    var phone               = params['data_phone'];
    var email               = params['data_email'];

    document.getElementById('txtID').value = id
    document.getElementById('txtNMDEPAN').value = nmDepan
    document.getElementById('txtNMBELAKANG').value = nmBelakang
    document.getElementById('txtPhone').value = phone
    document.getElementById('txtEmail').value = email      
} 
```

我希望这有帮助。

# iphone - 让委托在两个视图控制器之间工作

> ID：13023428
> 
> 赞同：1
> 
> 时间：2012-10-23T04:06:44.363
> 
> 标签：iphone, ios, delegates, protocols

我是 iPhone 开发的新手，有一些基本问题要`protocols`问`delegates`。我有两个视图控制器：视图控制器和 viewcontroller2nd。我在其中一个中有*UITextField*并想在其中输入一些内容（如名称），在 viewcontroller2nd 中，我有一个*UILabel*，我希望它在 UITextField 更改时显示你好，名称。

我正在关注这个视频：[http](http://www.youtube.com/watch?v=odk-rr_mzUo) ://www.youtube.com/watch?v=odk -rr_mzUo 让基本委托在单个视图控制器中工作。

我正在使用协议来实现这一点：

**SampleDelegate.h**

```
#import <Foundation/Foundation.h>

@protocol ProcessDelegate <UITextFieldDelegate>
@optional
- (BOOL)textFieldShouldReturn:(UITextField *)textField;
@end

@interface SampleDelegate : NSObject
{
    id <ProcessDelegate> delegate;
}

@property (retain) id delegate;

@end 
```

**SampleDelegate.m**

```
#import "SampleDelegate.h"

@implementation SampleDelegate

@synthesize delegate;

- (BOOL)textFieldShouldReturn:(UITextField *)textField{

    lbl.text = [NSString stringWithFormat:@"Hello, %@",txtField.text];
    [txtField resignFirstResponder];

}

@end 
```

**视图控制器.h**

```
#import <UIKit/UIKit.h>
#import "SampleDelegate.h"

@interface ViewController : UIViewController <ProcessDelegate>
{
    IBOutlet UITextField *txtField;
}

@end 
```

**视图控制器.m**

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

**ViewController2nd.h**

```
#import <UIKit/UIKit.h>

@interface ViewController2nd : UIViewController <ProcessDelegate> {

    IBOutlet UILabel *lbl;
}

@end 
```

**ViewController2nd.m**是来自 Xcode 的标准代码。

我的问题是如何将我的委托函数链接到我的 viewcontroller 和 viewcontroller2nd 以使其工作？

如果问题很愚蠢，请原谅我..需要一些指导。请指出我正在做的任何其他错误..谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T04:18:03.657

你的代表团有点……不。

首先：不要通过协议继承覆盖 UIKit 委托方法。这是毫无意义。为什么不首先让你的类符合指定的委托呢？

```
@protocol ProcessDelegate //No more protocol inheritance!
 //...
@end 
```

其次：当一个对象定义了一个协议时，该对象的一个​​有效实例必须由其委托使用（或至少传递给它）。因此，任何想要成为（顺便说一下，对于***class***`SampleDelegate`来说确实是一个坏名字）的代表的东西都会初始化一个有效的对象，并像调用任何其他属性一样调用它。 *`SampleDelegate``-setDelegate:`*

 *```
//#import "SampleDelegate"
@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    //make this a property, so it isn't crushed when the function exits.
    SampleDelegate *myDelegateObject = [[SampleDelegate alloc]init];
    [myDelegateObject setDelegate:self];  //conform to the delegate
} 
```

第三：您实际上并没有定义任何委托方法！如果没有什么可以委托的，那么委托有什么意义！l

```
@protocol ProcessDelegate 
 -(void)someMethod;
@end 
```

第四，也是最重要的一点：***永远，永远，永远，永远，永远不要在委托中使用`retain`, 或存储说明符！`strong`*** 委托对象应该是`weak`或`assign`防止讨厌的保留周期。

```
@property (assign, nomatomic) id delegate; 
```*

# android - Horizo ntalScrollView 中的 ImageView 有错误的纵横比

> ID：13023459
> 
> 赞同：0
> 
> 时间：2012-10-23T04:12:22.310
> 
> 标签：android, android-layout, android-view

我正在尝试显示一张照片，以便它垂直填充显示，并且可以水平滚动。我的照片是任意尺寸的，*但总是横向纵横比*。

我`ImageView`在 a 里面放了一个`HorizonalScrollView`，它几乎可以工作，除了纵横比是关闭的。调整大小以`ImageView`完全适合垂直方向，但图像被水平拉伸或压缩。

**我已经尝试了`scaleType`and`adjustViewBounds`**的所有值组合，但没有任何效果。

可以用纯 XML 完成还是我必须在 Java 中调整视图的大小？

```
<?xml version="1.0" encoding="utf-8"?>
<HorizontalScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="match_parent" >

    <ImageView
        android:id="@+id/image_photo"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:adjustViewBounds="true"
        android:scaleType="fitXY"
        android:src="@drawable/panoramic_1" />

</HorizontalScrollView> 
```

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T04:28:25.493

问题是：

```
android:scaleType="fitXY" 
```

它在 X 和 Y 中独立缩放，以便 imageview 匹配最大可见宽度和高度。

改成：

```
android:scaleType="centerInside" 
```

这将保留原始方面。

更多信息在这里：http: [//developer.android.com/reference/android/widget/ImageView.ScaleType.html](http://developer.android.com/reference/android/widget/ImageView.ScaleType.html)

# javascript - Jquery：将鼠标悬停在标签上时显示图片和文字

> ID：13023462
> 
> 赞同：0
> 
> 时间：2012-10-23T04:12:44.010
> 
> 标签：javascript, jquery

我目前正在使用 jquery 和`<a>`标签。现在，每当我将鼠标悬停在标签上时，我都能获得显示的图像。我正在努力在与正确`<a>`标签对应的图片下方实际显示文本的部分。如何`<legend>`在鼠标悬停期间在每张图片下方显示相应的内容？一次显示一个图例以及匹配的图片。这是我的[示例](http://webprolearner2346.zxq.net/example_code/)

**代码jQuery**

```
<script>
$(document).ready(function () {
var $images = $("div#images");
var $currentImage = $images.children("img#cheeseburger");

$currentImage .show();

$("div#links > a").mouseenter(function() {
    var ID = $(this).data("content");
    var $image = $images.children("img#" + ID);

    if (!$image.is($currentImage)) {
        $currentImage.hide();
    }

    $currentImage = $image;
    $image.stop(true, true).fadeIn("slow");
});

});
</script> 
```

**HTML**

```
<div id="links">
    <h2> Select A Category </h2> 
    <a href="example.htm" class="large magenta awesome" data-content="cheeseburger">Cheeseburger »</a>
    <a href="example.htm" class="large blue awesome" data-content="tacos">Tacos »</a>
    <a href="example.htm" class="large red awesome" data-content="salads">Salads »</a>
</div>
<center>
    <br />
    <div id="images">
        <img src="images/cheeseburger.jpg" id="cheeseburger">
        <img src="images/tacos.jpg" id="tacos">
        <img src="images/salad.jpg" id="salads" >
    </div>      
</center>

<fieldset class="el05">
        <legend style="font-size:15px;"><b>Cheeseburger:</b></legend>
        <p> Example one</p>
</fieldset>

<fieldset class="el05">
        <legend style="font-size:15px;"><b>Tacos:</b></legend>
        <p> Example two.</p>
</fieldset>

<fieldset class="el05">
        <legend style="font-size:15px;"><b>Salad:</b></legend>
        <p> Example three.</p>
</fieldset> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T04:46:37.527

尝试这样的事情，我刚刚在一个上实施

```
 <fieldset class="cheeseburger">
    <legend style="font-size:15px;"><b>Cheeseburger:</b></legend>
    <p> Example one</p>
</fieldset>

<script>
 $(document).ready(function () {
 var $images = $("div#images");
 var $currentfieldset = $(".cheeseburger");
 var $currentImage = $images.children("img#cheeseburger");

 $currentImage .show();

  $("div#links > a").mouseenter(function() {
   var ID = $(this).data("content");
   var $image = $images.children("img#" + ID);
    var $fieldset = $('.' + ID);

   if (!$image.is($currentImage)) {
      $currentImage.hide();
   }
   if (!$fieldset .is($currentfieldset)) {
      $currentfieldset.hide();
   }

   $currentImage = $image;
  $fieldset.show();
  $currentfieldset= $fieldset ;
   $image.stop(true, true).fadeIn("slow");
 });

 });
 </script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T05:12:12.837

请试试这个：

查询：

```
<script type="text/javascript">
$(document).ready(function () {
   var $images = $("div#images");
   var $currentfieldset = $(".cheeseburger");
   var $currentImage = $images.children("img#cheeseburger");

   $currentImage .show();

   $("div#links > a").mouseenter(function() {
   var ID = $(this).data("content");
   var $image = $images.children("img#" + ID);
   var $fieldset = $('.' + ID);

   if (!$image.is($currentImage)) {
      $currentImage.hide();
   }
   if (!$fieldset .is($currentfieldset)) {
      $currentfieldset.hide();
   }

   $currentImage = $image;
   $currentfieldset= $fieldset ;
   $image.stop(true, true).fadeIn("slow");
   $currentfieldset.stop(true,true).fadeIn("slow") ;
   });

});
</script> 
```

HTML

```
<div id="links">
    <h2> Select A Category </h2> 
    <a href="example.htm" class="large magenta awesome" data-content="cheeseburger">Cheeseburger »</a>
    <a href="example.htm" class="large blue awesome" data-content="tacos">Tacos »</a>
    <a href="example.htm" class="large red awesome" data-content="salads">Salads »</a>
</div>
<center>
    <br />
    <div id="images">
        <img src="images/cheeseburger.jpg" id="cheeseburger">
        <img src="images/tacos.jpg" id="tacos">
        <img src="images/salad.jpg" id="salads" >
    </div>      
</center>

<fieldset class="el05 cheeseburger">
        <legend style="font-size:15px;"><b>Cheeseburger:</b></legend>
        <p> Example one</p>
</fieldset>

<fieldset class="el05 tacos" style="display:none;">
        <legend style="font-size:15px;"><b>Tacos:</b></legend>
        <p> Example two.</p>
</fieldset>

<fieldset class="el05 salads" style="display:none;">
        <legend style="font-size:15px;"><b>Salad:</b></legend>
        <p> Example three.</p> 
```

# php - 使用 PHP 从 facebook URL 提取数据到 IFRAME

> ID：13023463
> 
> 赞同：-1
> 
> 时间：2012-10-23T04:12:58.583
> 
> 标签：php, facebook

有这样的网址[https://www.facebook.com/pages/test/?sk=app_4234&test=1](https://www.facebook.com/pages/test/?sk=app_4234&test=1)

我如何让 test=1 进入我的 iframe。

通常，您可以使用 $_REQUEST['test']; 但这不起作用，我该如何实现？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T04:17:45.883

没有办法获得额外的自定义参数，但 Facebook 提供了一个：

使用 app_data。

> [http://facebook.com/pages/PAGE_ID/?sk=app_APP_ID&app_data=YOUR_DATA](http://facebook.com/pages/PAGE_ID/?sk=app_APP_ID&app_data=YOUR_DATA)

然后你从 getSignedRequest

```
$signed_request = $facebook->getSignedRequest();
$app_data = $signed_request['app_data']; 
```

# sml - 为什么我在标准 ML 的这段代码中不断出现错误？

> ID：13023470
> 
> 赞同：0
> 
> 时间：2012-10-23T04:13:25.757
> 
> 标签：sml, ml

我正在学习标准 ML，但我不断收到此错误，我不知道为什么？

这是代码和错误：

```
> fun in_list(element, list) = 
    if hd(list) = element then true
    else val tempList = List.drop(list, 1);
    in_list(element, tempList);
# # Error-Expression expected but val was found
Static Errors 
```

我知道我正在尝试的语法一定有问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T07:39:05.087

您需要将`val`值包装在一个`let..in..end`块中。

```
fun in_list(element, list) = 
    if hd(list) = element then true
    else 
        let
           val tempList = List.drop(list, 1)
        in
           in_list(element, tempList)
        end 
```

此外，`hd`不`drop`建议分解列表。您应该改用模式匹配。

```
fun in_list(element, x::xs) = 
    if x = element then true
    else in_list(element, xs) 
```

有一个缺少空列表的基本情况，您可以使用`orelse`替换`if x = element then true ...`. 我把它们留给你作为建议。

# extjs - Ext-JS 4.1 - 如何将静态 XML 数据加载到 Ext.data.TreeStore

> ID：13023472
> 
> 赞同：1
> 
> 时间：2012-10-23T04:13:29.173
> 
> 标签：extjs

我想知道是否有人可以指出我可以找到从静态 XML 字符串（即不是从文件）加载的 Ext.data.TreeStore 示例的方向？或者提供一个简短的例子？

我已经看到很多示例，您可以将其从 AJAX 调用加载到服务器，但我无法找到一个示例，其中加载了可以嵌入到应用程序文件中的静态 XML JavaScript 字符串。

非常感谢您的帮助。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T12:51:41.053

您将需要一个 XML 存储。看看这个：

[http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.XmlStore](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.XmlStore)

编辑：以上可能不适用于树木。您可以在 XML 上设置代理的阅读器：

```
var store = Ext.create('Ext.data.TreeStore', {

                    model: 'my.Model',  

                    proxy: {  
                        type: 'ajax',
                        url : 'path/to.xml',
                        reader: {
                            type: 'xml',
                            root: 'data'
                        }
                    },

                    root: {
                        expanded: true
                    }

                }); 
```

# matlab - MATLAB：索引超出范围错误

> ID：13023474
> 
> 赞同：0
> 
> 时间：2012-10-23T04:13:53.480
> 
> 标签：matlab, indexing, bounds

```
 clear all; clc;
% Constants
width=12*0.0254; %Conversion: 1 inch = 0.0254 meters
thickness=0.5*0.0254;
length=16*0.0254;
gravity=9.81;
temp_i=293;
temp_r=293:473;
sigma=5.67*(10^-8);
temp_film=(temp_i+temp_r)/2; %Temp at convection boundary layer
beta=1./temp_film;
pr=0.713; %Prandtl number
v=15.09*(10^-6); %m^2/s
k=0.02564;
k_steel=60.5; 
cp_steel=460;
denstity_steel=7845;
volume=length*width*thickness;
area=2*length*width;
x=volume/area;

%% Calculations
Ra_bottom=(gravity.*beta.*(temp_r-temp_i).*(length.*(1./16))^3.*pr)./(v^2);
psi_Pr=(1+(.492./pr).^(9./16))^(-16./9);
Nu_bottom=0.68+0.503.*[(Ra_bottom.*psi_Pr).^(1./4)];
h_bottom=(k./length).*Nu_bottom;

%Initial values to set up loops and evaluate temp. change over time.
  i=0;
  t_bottom1=473; %Assume all parts of plate start at 200C
  t_middle1=473;
  t_top1=473;
  dt1=15;
  l=dt1;

%Evaluating temperature at bottom (t_bottom)
while t_bottom1 > 294 %294 is t_inf (20C) times 1.05 (21) in Kelvin (294K)
    i=i+1;
    l=l+dt1;
    h_bottom1=h_bottom(i)+sigma.*(t_bottom1.^4-temp_i^4)./(t_bottom1-temp_i); %Error Occurs here LINE: 41
    t_bottom1=(t_bottom1-temp_i).*exp(-h_bottom1.*dt1/(denstity_steel.*cp_steel.*volume))+293;
    y_bottom(i)=t_bottom1; %temp in K
    x_bottom(i)=l;
end 
```

**错误：**

试图访问 h_bottom(182)；索引超出范围，因为 numel(h_bottom)=181。

Untitled9 中的错误（第 41 行） h_bottom1=h_bottom(i)+sigma.*(t_bottom1.^4-temp_i^4)./(t_bottom1-temp_i);

我知道为什么会发生这种情况，但我很难解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T04:47:57.570

我不确定是否可以这样做，但如果你定义

```
temp_r = 293:0.5:473; 
```

您将拥有两倍的元素`h_bottom`，这至少使错误消失。但是，由您决定基础物理是否仍然有意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T07:57:16.087

当然，错误是因为您访问`h_botton(182)`when `size(h_bottom,1)`is `181`。您应该检查 while 循环的条件（t_bottom1 是 298，... 在那一刻，不小所以满足条件），所以它永远不会超过 181。我不知道你到底想在这里做什么但问题就在那里。

当 matlab 代码给出错误时，它一直执行到该行，因此您实际上可以在错误发生的确切时刻看到变量的值。为此，只需在命令行中键入变量的名称，或查看工作区。这会对你有很大帮助。

# php - 使用 PHP 创建一个新目录，并在该目录中创建一个文件

> ID：13023482
> 
> 赞同：5
> 
> 时间：2012-10-23T04:15:34.617
> 
> 标签：php, file

我最近开始搞乱一些 HTML 和 PHP，并且遇到了一个可能超级容易解决的错误，但我一生都无法修复。

简而言之，我要做的是创建一个目录，然后在该目录中创建一个同名的 .txt 文件，类似于“/number/number.txt”。虽然创建文件或创建目录似乎很简单，但我在尝试同时做这两种操作时遇到了无穷无尽的麻烦。

这是我的代码：

```
mkdir($postnum, 0777);
chmod($postnum, 0777);

$post = "/" . $postnum . "/" . $postnum . ".txt";
$post = boards(__FILE__) . $post;

$po = fopen($post, 'w+') or die("Can't open file");
chmod($post, 0777); 
```

我在写这篇文章时遇到了一些问题，我读到使用 mkdir 我可以设置我创建的目录的权限，但是尽管做了我认为正确的做法，但它没有做任何事情。所以我之后立即运行 chmod 。

然后，我希望只有 /$postnum/$postnum.txt 可以打开目录，但是当我尝试这样做时，我得到了模具文本，我必须添加“板（**文件**）部分才能得到它工作。（旁注，“板”是我正在工作的目录）

即使那样，虽然它没有给我“无法打开文件”，但它没有创建文件或任何东西。

我已经确定任何文件或文件夹甚至与文件进行远程交互都已将其权限设置为 0777，因此这可能不是问题。（另外，我知道像这样完全打开我的所有文件可能不是最好的主意；一旦我让它正常工作，我一定会把权限设置为更安全的东西）

知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T05:33:15.487

```
making directory and creating path:-

$new_folder=mkdir('uploads\\'.$folder_name, 0777, true);

('uploads\\'.$folder_name)->path where you create folder like www->upload->folder name(whatever you provide)

$path="uploads\\".$folder_name."\\";//if you want to provide path you can provide this way 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T05:46:54.957

mkdir 函数采用相对于文件系统根目录的路径**，**而不是文档根目录。

如果您在 *nix 系统上，您的网站文档根目录可能位于 /var/www/sitename/html 等路径中，但您正在尝试创建您的帐户没有的 /number/number.txt权限做。将您传递给 mkdir 的路径更改为文件系统中您有权创建文件夹和文件的某个位置，并且您的代码应该可以工作。

编辑：

您问题中的代码实际上并未尝试编写任何内容。通过调用 fopen 您已经创建了一个文件句柄，但是您需要调用[fwrite](http://www.php.net/manual/en/function.fwrite.php)才能将数据实际写入文件。正如@JamesSwift 所建议的，您可能想看看[file_put_contents](http://php.net/manual/en/function.file-put-contents.php)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-17T12:25:33.517

在这里，试试这个：

```
$root = realpath($_SERVER["DOCUMENT_ROOT"]);
mkdir("$root/root_website_folder/php/testing_folder", 0777); 
```

PHP 使用您的真实路径而不是虚拟路径，我们将您机器上的真实路径分配给 $root，而不是添加您网站根目录的虚拟路径

# python - Python使用（解析）文本框值作为字符串到函数中

> ID：13023484
> 
> 赞同：0
> 
> 时间：2012-10-23T04:15:42.863
> 
> 标签：python, string, variables, textbox, tkinter

```
url=StringVar()
txt1=Entry(root,textvariable=url)
txt1.pack()

button1 = Button(root, text="Download" ,command=downloadFile)
button1.pack()
root.mainloop() 
```

好的，这是我的基本 GUI...我有一个文本框 txt1，我想在下面的函数中使用它

```
def downloadFile():
    #print "url is:",url
    file_name = url.split('/')[-1] 
```

我的目标是在文本框中输入 URL，然后在我的函数 downloadfile() 中拆分 URL，但我的 url 变量变为 PY_VAR0 而不是“www.example.com/file.exe”

我得到的错误消息是“StringVar 实例没有属性拆分”我做错了，但我不知道在哪里。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T05:05:18.173

StringVar 只是“字符串变量的值持有者”。要获取其内容（字符串），请使用：

```
StringVar.get() # Return value of variable as string. 
```

直接打印 StringVar（“打印 url”）调用：

```
StringVar.__str__() # Return the name of the variable in Tcl. 
```

这将返回内部变量名称，而不是它的值。在您的代码中使用：

```
file_name = url.get().split('/')[-1] 
```

# python - Python用对象列表迭代对象

> ID：13023489
> 
> 赞同：1
> 
> 时间：2012-10-23T04:16:11.047
> 
> 标签：python, list, tree, loops

是否可以迭代包含对象列表的对象。

例如，我有以下课程

```
Class Page(object)

    def __init__(self, name):

        self.name = name
        self.pages = [] 
```

然后我创建一个新的 Page 对象并向其中添加其他页面对象。

```
page = Page('FirstPage')

apagepage = Page('FirstChild')

anotherpagepage = Page('SecondChild')

apagepage.pages.append(Page('FirstChildChild'))

apagepage.pages.append(Page('SecondChildChild'))

page.pages.append(apagepage)

page.pages.append(anotherpagepage) 
```

我想做的是

```
for thispage in page:
    print thispage.name 
```

并得到以下输出

```
FirstPage
FirstChild
SecondChild
FirstChildChild
SecondChildChild 
```

所以我得到了所有的第一级，然后是第二级，然后是第三级。

但是，也会找到以下输出

```
FirstPage
FirstChild
FirstChildChild
SecondChildChild
SecondChild 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T04:35:58.580

你可以定义一个`__str__`

```
from itertools import chain

class Page(object):
    def __init__(self, name):
        self.name = name
        self.pages = []
    def __str__(self):
        return "\n".join(chain([self.name], map(str, self.pages))) 
```

那么你可以`print page`

或者，如果您希望使用 for 循环，您可以定义一个迭代器

```
class Page(object):
    def __init__(self, name):
        self.name = name
        self.pages = []
    def __iter__(self):
        yield self
        for page in self.pages:
            for i in page:
                yield i 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T04:28:28.080

递归执行：

```
class Page(object):
    def __init__(self, name):
        self.name = name
        self.pages = []

    def __iter__(self):
        for p in self.get_children_pages(self):
            yield p

    def get_children_pages(self, start_page):
        result = [start_page.name]
        for this_page in start_page.pages:
            result.extend(self.get_children_pages(this_page))
        return result

>>>>for p in page:
....    print p

FirstPage
FirstChild
FirstChildChild
SecondChildChild
SecondChild 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T04:48:43.400

递归执行

```
def print_all_pages(page):
    print page.name
    if len(page.pages) == 0 then:
        return
    else:
        for child_page in page.pages:
            print_all_pages(child_page)

def print_pages(pages_collection):
    for page in pages_collection:
        print_all_pages(page) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T10:36:49.910

```
class Page(object):
    def __init__(self, name, pages=None):
        self.name = name
        self.pages = pages if pages is not None else []
    def __iter__(self):
        return iter(self.pages) # only immediate children
    def walk(self, topdown=True): # all pages recursively
        if topdown:
            yield self
        for page in self:
            yield from page.walk(topdown)
        if not topdown:
            yield self 
```

您可以`yield from`在 Python <3.3 上替换为：

```
for subpage in page.walk(topdown):
    yield subpage 
```

在这种情况下。

### 例子

```
page = Page('FirstPage', [
        Page('FirstChild', [
                Page('FirstChildChild'),
                Page('SecondChildChild'),
                ]),
        Page('SecondChild'),
        ])

for p in page.walk():
    print(p.name) 
```

### [输出](http://ideone.com/RqcqNF)

```
FirstPage
FirstChild
FirstChildChild
SecondChildChild
SecondChild 
```

# c - C中的字符串初始化

> ID：13023493
> 
> 赞同：0
> 
> 时间：2012-10-23T04:16:38.447
> 
> 标签：c, string, insertion-sort

我正在使用字符串编写插入排序。我有 char 数组，例如：

```
 char array1[4] = {'a', 'b', 'c', '\0'};
 char array2[4] = {'b', 'd', 'e', '\0'}; 
```

我需要使用这个操作：

```
char string[2];
string[1] = array1;
string[2] = array2; 
```

是否可以 ？

因为在插入排序中我需要一个字符串。这是插入代码：

```
char* insertionsort(char* a, int n) {
   int k;
   for (k = 1; k < n; ++k) {
      int key = a[k];
      int i = k - 1;

      while ((i >= 0) && (key < a[i])) {
         a[i + 1] = a[i];
         --i;
      }

      a[i + 1] = key;
   }

   return a;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T04:20:49.417

```
char array1[4] = {'a', 'b', 'c', '\0'};  // same as char *array1 = "abc";
char array2[4] = {'b', 'd', 'e', '\0'};  // same as char *array2 = "bde";

char *string [2]; // an array of 'pointers to chars' / array of strings

string[1] = array1; // this will work
string[2] = array2; // this will work 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T04:22:05.357

> 所以我需要编写这个操作：

```
char string [2];
string[1] = array1;
string[2] = array2; 
```

> 是否可以 ？

简短的回答：不，不是。数组不可赋值。您可以使用`strcpy`将元素从一个字符串复制到另一个字符串，但在这种情况下也不起作用 - 您已定义`string`为 2 个字符的数组，但您尝试为每个字符分配一个完整的字符数组那些。

尚不完全清楚这是您想要的，但一种可能性是：

```
char *string[2];
string[1] = array1;
string[2] = array2; 
```

在这种情况下，是一个由两个*指向*`string`char 的指针组成的数组，并且赋值将它们设置为指向您之前定义的每个字符串的第一个字符。

 *由于您已将其标记为 C 和 C++，因此我将对此进行补充说明：这是用 C 代码编写的。如果您实际上使用的是 C++，您可能想要更多类似的东西：

```
std::string[2] = {"abc", "bde"}; 
```

即使在 C 中，我更愿意在有意义的地方初始化和使用字符串常量：

```
char array1[] = "abc";
char array2[] = "bde";

char *string[] = {array1, array2}; 
```

甚至只是：

```
 char const *string[] = {"abc", "bde"}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T04:55:33.557

当然不是。只要记住，

```
 char ary[4] = {'a', 'b', 'c', '\0'}; //define an array of char 
```

当你像这样使用 ary 时：

```
 char string[2];
    string[0] = ary; 
```

ary 从数组名退化为指针！因此，您在上面所做的是分配一个指向 char 类型的指针，这将在编译时导致类型警告。

这在 C 中非常重要！

你可以像这样修复它：

```
 char *string[2];             //an array of pointers to char
    string[1] = array1;          //correct
    string[2] = array2; 
```*

# vim - vim 在某些区域禁用拼写

> ID：13023495
> 
> 赞同：3
> 
> 时间：2012-10-23T04:17:02.467
> 
> 标签：vim

在表格环境中在 vim 中编写乳胶时，例如

```
\begin{tabular}{rl}
  one & two \\
  \multicolumn{2}{c}{what?}
\end{tabular} 
```

被`rl`标记为未命中咒语，但应忽略。我在 after/ftplugin/tex.vim 中添加了以下内容：

```
syn region texMyNOHL matchgroup=NONE start='{tabular}{' end='}'
    \ contains=@NoSpell 
```

但它仍然被标记为未命中咒语。

忽略特定提到的区域的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T07:27:36.083

您不能只是“覆盖”您的`texMyNOHL`区域；现有的 tex 语法定义会阻止匹配，因为它们的粒度更细。

检查语法时，您会看到该项目与`texMatcher`组匹配。这允许通过`texMatchGroup`语法集群包含内部匹配：

```
:syn match texRl contained contains=@NoSpell "rl"
:syn cluster texMatchGroup add=texRl 
```

# c++ - 位掩码函数

> ID：13023498
> 
> 赞同：0
> 
> 时间：2012-10-23T04:17:08.623
> 
> 标签：c++, visual-studio-2010, bitmask

我正在编写一个程序来查找是否可以用 N 根长度为 N 的棍子制作一个正方形。我使用过 Bitmask，因为它更容易用于我要放入的大量输入。出于某种原因，我的回溯代码没有返回任何内容，在这一行“位掩码 & (1 << vec[i])”中它永远不会进入。如果我使用了错误的函数，有人可以帮助我吗？我最近学到了这个，但我找不到信息。

PD：我不会说英语，抱歉我的语法和句法问题。

谢谢

```
// 10364 - Square.cpp: archivo de proyecto principal.
#include "stdafx.h"
#include <stdio.h>
#include <vector>

using namespace std;

vector<int> vec;
int bitmask,casos,palitos,suma,maximo;
bool analiza(int analizado,int lados)// lados =cantidad lados analizados, contador
{
    if (analizado==maximo)
    {
        analizado=0;
        lados++;
    }
    if(lados==4)
    {
        printf("yes\n");
        return true;
    }

        for (int i=0;i<palitos;i++)
        {
            if (!(bitmask & (1 << i)))
            {
                if (analizado+vec[i]<=maximo)
                {
                    bitmask | (1 << i);
                    if(analiza(analizado+1,lados))
                        return true;
                    bitmask & ~(1 << i);

                }
            }

        }
        return false;
        //prender: bitmask | (1 << indice)
        //apagar: bitmask & ~(1 << indice)
        /*comparar: bitmask & (1 << indice)*/
}
int main()
{
    freopen("in.txt","rt",stdin);
    freopen("out.txt","wt",stdout);

    scanf("%d\n",&casos);
    for(int i=0;i<casos;i++)
    {
        scanf("%d",&palitos);
        vec.clear();
        vec.resize(palitos);
        suma=0;
        for(int j=0;j<palitos;j++)
        {
            scanf("%d",&vec[j]);
            suma+=vec[j];
        }
        if(suma%4!=0)
            printf("no\n");
        else{
            bitmask=0;
            maximo=suma/4;
            analiza(0,0);
            }

    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T04:21:41.547

您似乎从未初始化位掩码。如果位掩码恰好为 0，那么您将永远不会进入循环。这似乎是问题的一部分。
也`(bitmask & (1 << i)`可以简化为 '0' 因为位掩码为 0 并且您正在使用 bitwise `and`。因此，`if`可以消除整个条件，因为它总是评估为真。
此外，您似乎没有以正确的方式使用位掩码。您希望位掩码至少有一个位等于 1，因为当您`and`使用一些带有位掩码的向量时，您将只保留相关位。然后，如果您进行位移，您可以判断向量中有趣的位是打开还是关闭。

# mono - 我可以分别使用 Mono for Android 或 MonoTouch 生成 Eclipse / Xcode 项目吗？

> ID：13023500
> 
> 赞同：-1
> 
> 时间：2012-10-23T04:17:18.483
> 
> 标签：mono, xamarin.ios, xamarin.android, monodevelop

我打算为 Android 购买 MonoTouch 和 Mono，但在此之前我只想知道我是否可以像在 Titanium Studio 中那样从 Mono 生成完整的 Xcode/Eclipse 项目。当我们构建 Titanium 项目时，它会为 Ecpise 生成 Java 项目，为 Xcode 生成 Objective-C 代码。

Mono 中是否有相同的过程？因此，当我遇到任何限制时，我可以继续将项目作为本机项目工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T11:07:12.067

没有支持使用 Mono for Android / MonoTouch 生成 Eclipse / Xcode 项目的方法。

无论如何，这不是您想要做的事情：

*   Mono for Android 的 Eclipse 项目将是非常少的 Java 代码，只是由项目文件中的构建命令编译/捆绑在一起的一堆二进制文件。
*   MonoTouch 会吐出代码，但它会是汇编，而不是 ObjectiveC（还有很多二进制文件）。我几乎看不出这有多有趣……

# java - Java 需要 stepRender 行，但不是所有行

> ID：13023502
> 
> 赞同：1
> 
> 时间：2012-10-23T04:17:37.107
> 
> 标签：java, jfreechart, renderer

我有一个 JFreeChart，上面绘制了几条不同的线。我需要将一些线更改为步进线。我知道我需要使用 CategoryStepRenderer，但在实现它时遇到了麻烦。我附上了以下用于更改线条颜色的代码。我希望能够以类似的方式进行步进线。我发现的所有方法都涉及更改所有行。谢谢

私人无效updateChartColor（ArrayList mlColor，ArrayList mlLine）{

```
 XYPlot plot=(XYPlot)chart.getPlot();
    XYLineAndShapeRenderer renderer=(XYLineAndShapeRenderer)plot.getRenderer();
    for (int i = 0; i < mlColor.size(); i++) {
        renderer.setSeriesPaint(i, mlColor.get(i));         
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T07:56:39.363

JFreeChart 允许您在每个绘图中拥有多个渲染器。您可以将 a`XYStepRenderer`与 a结合使用`XYLineAndShapeRenderer`，此示例改编自 JFreeChart Demos

![在此处输入图像描述](../Images/8af7095d4204c44e27c0506c6f9725b0.png)

```
import java.awt.BasicStroke;

import javax.swing.JPanel;

import org.jfree.chart.ChartFactory;
import org.jfree.chart.ChartPanel;
import org.jfree.chart.JFreeChart;
import org.jfree.chart.labels.StandardXYToolTipGenerator;
import org.jfree.chart.plot.PlotOrientation;
import org.jfree.chart.plot.XYPlot;
import org.jfree.chart.renderer.xy.XYLineAndShapeRenderer;
import org.jfree.chart.renderer.xy.XYStepRenderer;
import org.jfree.data.xy.XYDataset;
import org.jfree.data.xy.XYSeries;
import org.jfree.data.xy.XYSeriesCollection;
import org.jfree.ui.ApplicationFrame;
import org.jfree.ui.RefineryUtilities;

public class XY2RendererDemo extends ApplicationFrame {

    public XY2RendererDemo(String title) {
        super(title);
        JPanel chartPanel = createDemoPanel();
        chartPanel.setPreferredSize(new java.awt.Dimension(500, 300));
        setContentPane(chartPanel);
    }
    private static JFreeChart createChart(XYDataset[] dataset) {
        JFreeChart chart = ChartFactory.createXYLineChart(
            "XYStepRenderer & XYLineAndShapeRenderer",
            "X",
            "Y",
            dataset[0],
            PlotOrientation.VERTICAL,
            true,
            true,
            false
        );
        XYPlot plot = (XYPlot) chart.getPlot();
        plot.setDomainPannable(true);
        plot.setRangePannable(true);

        {
            XYStepRenderer renderer = new XYStepRenderer();
            renderer.setBaseShapesVisible(true);
            renderer.setSeriesStroke(0, new BasicStroke(2.0f));
            renderer.setSeriesStroke(1, new BasicStroke(2.0f));
            renderer.setBaseToolTipGenerator(new StandardXYToolTipGenerator());
            renderer.setDefaultEntityRadius(6);
            plot.setRenderer(renderer);
        }
        {
            XYLineAndShapeRenderer renderer2 = new XYLineAndShapeRenderer();
            plot.setDataset(1, dataset[1]);
            plot.setRenderer(1, renderer2);
        }

        return chart;
    }

    private static XYDataset[] createDataset() {
        XYSeries series1 = new XYSeries("Series 1");
        series1.add(1.0, 3.0);
        series1.add(2.0, 4.0);
        series1.add(3.0, 2.0);
        series1.add(6.0, 3.0);
        XYSeries series2 = new XYSeries("Series 2");
        series2.add(1.0, 7.0);
        series2.add(2.0, 6.0);
        series2.add(3.0, 9.0);
        series2.add(4.0, 5.0);
        series2.add(6.0, 4.0);
        XYSeriesCollection dataset1 = new XYSeriesCollection();
        dataset1.addSeries(series1);
        XYSeriesCollection dataset2 = new XYSeriesCollection();
        dataset2.addSeries(series2);
        return new XYDataset[]{dataset1,dataset2};
    }

    public static JPanel createDemoPanel() {
        JFreeChart chart = createChart(createDataset());
        ChartPanel panel = new ChartPanel(chart);
        panel.setMouseWheelEnabled(true);
        return panel;
    }

    public static void main(String[] args) {
        XY2RendererDemo demo = new XY2RendererDemo(
            "JFreeChart: Using 2 Renderers");
        demo.pack();
        RefineryUtilities.centerFrameOnScreen(demo);
        demo.setVisible(true);
    }

} 
```

在此示例中，我将 theplots initial Renderer 替换为 a `XYStepRenderer`，然后为 second 添加第二`XYLineAndShapeRenderer`个`XYDataset`。一个更简单的方法是添加第二个 Renderer，因为 ChartFactory#createXYLineChart()`XYLineAndShapeRenderer`默认会创建一个。

# nsis - Nsis 脚本无法创建两个安装程序？

> ID：13023505
> 
> 赞同：0
> 
> 时间：2012-10-23T04:17:46.263
> 
> 标签：nsis

我必须使用相同的 nsis 脚本创建两个条件 exe。但它失败并出现错误：

> deflatetofile fwrite 失败。中止创建过程。

我可以立即获得帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T08:15:53.913

文件压缩的​​内部过程似乎失败了。

你有足够的磁盘空间吗？您是否检查了尝试创建安装程序的权限（写入权限）？

# python - 如何使用python在DNA序列中找到共同重复？

> ID：13023508
> 
> 赞同：-4
> 
> 时间：2012-10-23T04:18:03.833
> 
> 标签：python

我有类似的 DNA 序列

```
seq='ATCGTTTTTCGAAACTGCCCCCCACTGGGGA' 
```

我想在 python 中打印连续重复核苷酸（如果它连续重复两次以上）。

对于这个序列输出应该是

```
TTTTT
AAA
CCCCCC
GGGG 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T04:26:21.250

你可能想看看[`itertools.groupby`](http://docs.python.org/library/itertools.html#itertools.groupby)。

一个示例用法：

```
for _, group in itertools.groupby(seq):
    group = ''.join(group)
    if len(group) > 2:
        print group 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T04:44:08.347

[`regular expression`](http://docs.python.org/library/re.html)通过反向引用和方法，您可以很容易地找到重复`findall`；

```
seq = 'ATCGTTTTTCGAAACTGCCCCCCACTGGGGA'

import re
hits = re.findall(r'(([A-Z])\2\2+)', seq) # regex matching all repeating A-Z groups
print [hit[0] for hit in hits]          # Comprehension to filter the results

['TTTTT', 'AAA', 'CCCCCC', 'GGGG'] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T04:52:52.853

```
seq='ATCGTTTTTCGAAACTGCCCCCCACTGGGGA'
while len(seq) > 1:
    value = seq[0]
    repeats = 1
    idx = 1
    while 1:
        if seq[idx] == value:
            repeats += 1
        else:
            if repeats > 1: print value*repeats
            seq = seq[repeats:]
            break
        idx += 1 
```

# android - 不同应用的相同密钥库

> ID：13023509
> 
> 赞同：5
> 
> 时间：2012-10-23T04:18:06.103
> 
> 标签：android, android-keystore

我对所有已发布的应用程序始终使用相同的密钥库和相同的别名密钥...

这是一个正确的选择，还是我应该为每个已发布的应用程序使用不同的别名？

我还没有找到关于正确使用密钥库的真正明确的信息。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-23T04:41:08.323

密钥库文件或应用程序签名表示某些开发人员或公司证明该应用程序已由该特定公司或开发人员开发或验证，而不是应用程序本身。

因此，就您正在开发应用程序而言，使用您的公司或您的公司名称，您应该使用相同的密钥库签署应用程序，尽管不是强制性的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T04:24:41.463

您可以使用相同的密钥库对多个应用程序进行签名。

无需一次又一次地创建新的密钥库文件。

你可以参考[这个](https://stackoverflow.com/questions/7685458/can-i-use-the-same-keystore-file-to-sign-2-applications)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-15T21:04:06.607

在多个应用程序之间共享密钥库是个坏主意，而且不是很安全。

1.  使用密钥库进行识别的 API 控制台可能会变得混乱。
2.  如果一个应用程序密钥库被盗用，所有应用程序都会被盗用

# ruby-on-rails - Rails Installer for Mac 和 Michael Hartl 的 ruby on Rails 教程

> ID：13023512
> 
> 赞同：0
> 
> 时间：2012-10-23T04:18:24.513
> 
> 标签：ruby-on-rails, installation

您能否利用 MAC 的 Rails 安装程序（来自 Engine Yard）绕过 Michael Hartl 的 Ruby on Rails 设置步骤？

看起来通过安装 Rails Installer 你得到：

*   吉特
*   RVM，包括 Ruby Gems
*   红宝石
*   导轨

我已经下载了 Sublime Text。只是想确保下载 Rails Installer 并按照 Michael Hartl 的说明学习如何构建应用程序不会产生意外后果。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T04:32:56.030

可能，但我不会抓住这个机会。

一体式安装程序很方便，但 Rails 开发环境依赖复杂，安装程序可能无法涵盖所有​​可能性。

从长远来看，将这些东西一一安装会更容易调试。相信我，由于 Ruby 版本或缺少依赖项，您会遇到一些随机的 Gem 错误，并且使用一体化安装程序将很难找出您没有安装的依赖项。

按照约定，按照 Hartl 的建议，一个一个地安装零件。

# c - 为什么即使未指定大小，scanf 和 malloc to char 指针也能工作？

> ID：13023515
> 
> 赞同：2
> 
> 时间：2012-10-23T04:18:57.553
> 
> 标签：c, string, pointers, malloc

我正在刷新我的 C 技能。我正在使用 char *s 并使用 malloc 为 s 分配内存。然后使用scanf，我将输入读取到s。但我的问题是我没有指定内存块的大小。但该程序有效。如何为任意长度的输入字符串分配内存？scanf 是否只是增加指针并将数据写入该位置？

```
#include <stdio.h>
#include <stdlib.h>

int main() {
    char *s;
    s = (char *) malloc(sizeof(s));    //I did not specify how much like malloc(sizeof(s) * 128)
    if (s == NULL) {
        fprintf(stderr, "\nError allocating memory for string");
        exit(1);
    }
    scanf("%s", s);
    puts(s);
    free(s);
    return 0;
}

/*
    Input:
    aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
    Output:
    aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
*/ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T04:25:06.937

With `char *s;`,与 4 或 8`sizeof(s)`相同，`sizeof(char *)`具体取决于您使用的是 32 位盒还是 64 位盒。

如果你在一个 32 位的盒子上，那么你可以存储 3 个字符加上空的“字符串结尾”字符。如果您存储更多，它*可能会*爆炸。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T04:22:09.457

`sizeof(s)``s`返回类型为 的字节大小`char*`。通常在 32 但机器上这是 4 字节和 64 位机器上的 8 字节。因此，您实际上已经告诉 malloc 要分配的字节数，`s`并将指向该内存区域。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T04:32:03.280

您确实指定了大小：`sizeof(s)`。由于`s`是`char *`, `sizeof(s) == sizeof(char *)`. 根据您的平台，这可能是 4 或 8 个字节的长度。

因此，您有效地分配了 4（或 8）个字节来存储字符串。如果您在命令行上键入超过 3 个（或 7 个）字符，那么您将开始写入超出分配数组的末尾，这会触发*未定义的行为*。对于未定义的行为，任何事情都可能发生：您的程序可能看起来工作正常，程序可能会用 ZALGO 填充其余内存，程序可能会出现可怕的段错误，或者您可能会遇到流行的鼻恶魔。C 规范没有说明会发生什么（因此称为“未定义行为”）。

您的程序“工作”的事实完全是侥幸，*永远不应依赖*。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-23T04:55:30.860

`sizeof(s)`是否返回字符指针的大小，取决于您是在 32 位还是 64 位平台上运行，它将是 4 字节还是 8 字节。

你想`sizeof(*s)`改用。但是，由于 C 标准指定`sizeof(char)`（这`sizeof(*s)`将是）是一，因此对于字符数组，您不需要它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-23T04:22:45.323

它只会`allocate the space`=`size of char *`而不是简单地增加指针并将数据写入该位置？正如你所想。

它为什么起作用的答案是：因为它把它写在没有分配给你的内存区域上，但是如果该区域被其他进程保留，你的程序就会崩溃。所以最好分配更大的空间。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-23T04:25:01.413

您只分配大小等于大小的内存`Integer`。如果您将更长的字符串写入此变量，它只会覆盖现有的内存位置，并且您的程序将显示意外行为。

# html - 颜色框关闭按钮看不到

> ID：13023516
> 
> 赞同：1
> 
> 时间：2012-10-23T04:19:47.493
> 
> 标签：html, colorbox

我正在玩彩盒演示，看看它是如何工作的。我想为登录页面制作一个简单的颜色框，让它工作并接受困扰我的是我似乎无法获得关闭按钮来显示我想要的图像，这让我发疯了。我不确定我做错了什么。我想知道是不是因为我删除了一些代码行，但我只删除了幻灯片放映功能。有人可以指出我做错了什么。按钮在那里，我只是看不到它....

```
/*
    ColorBox Core Style:
    The following CSS is consistent between example themes and should not be altered.
*/
#colorbox, #cboxOverlay, #cboxWrapper{position:absolute; top:0; left:0; z-index:9999; overflow:hidden;}
#cboxOverlay{position:fixed; width:100%; height:100%;}
#cboxMiddleLeft, #cboxBottomLeft{clear:left;}
#cboxContent{position:relative;}
#cboxLoadedContent{overflow:auto;}
#cboxTitle{margin:0;}
#cboxLoadingOverlay, #cboxLoadingGraphic{position:absolute; top:0; left:0; width:100%; height:100%;}
.cboxPhoto{float:left; margin:auto; border:0; display:block; max-width:none;}
.cboxIframe{width:100%; height:100%; display:block; border:0;}
#colorbox, #cboxContent, #cboxLoadedContent{box-sizing:content-box;}

/* 
    User Style:
    Change the following styles to modify the appearance of ColorBox.  They are
    ordered & tabbed in a way that represents the nesting of the generated HTML.
*/
#cboxOverlay{background:url('overlay.jpg') repeat 0 0;}
#colorbox{}
#cboxTopLeft{width:21px; height:21px; background:url('overlay.jpg') no-repeat -101px 0;}
#cboxTopRight{width:21px; height:21px; background:url('overlay.jpg') no-repeat -130px 0;}
#cboxBottomLeft{width:21px; height:21px; background:url('overlay.jpg') no-repeat -101px -29px;}
#cboxBottomRight{width:21px; height:21px; background:url('overlay.jpg') no-repeat -130px -29px;}
#cboxMiddleLeft{width:21px; background:url('overlay.jpg') left top repeat-y;}
#cboxMiddleRight{width:21px; background:url('overlay.jpg') right top repeat-y;}
#cboxTopCenter{height:21px; background:url('overlay.jpg') 0 0 repeat-x;}
#cboxBottomCenter{height:21px; background:url('overlay.jpg') 0 -29px repeat-x;}
#cboxContent{background:#fff; overflow:hidden;}
#cboxLoadingOverlay{background:url('loading.gif') no-repeat center center;}
#cboxLoadingGraphic{background:url('loading.gif') no-repeat center center;}
#cboxClose{position:absolute; bottom:0; right:0; background:url('xbutton.png') no-repeat -25px 0; width:25px; height:25px; text-indent:-9999px;}
#cboxClose:hover{background-position:-25px -25px;} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T06:42:03.267

你在使用这个[网站的彩盒插件吗](http://www.jacklmoore.com/colorbox)

那么错误将是以下之一

1.  检查您的 js 文件中的行：35

> 关闭：“关闭”，

确保你已经在 jquery.colorbox.js 中给出了

1.  检查您的 css 文件行：45

> 位置：绝对；底部：0；对：0；

已在脚本中正确输入

正如您在玩时提到的那样，您有可能会删除该术语

> 位置：相对；

在行：8

# asp.net-mvc-3 - 如何删除不需要的 WWW-Authenticate 标头

> ID：13023519
> 
> 赞同：4
> 
> 时间：2012-10-23T04:20:16.903
> 
> 标签：asp.net-mvc-3, iis-7, icalendar, plesk

从 MVC 应用程序，我正在采购一个 iCal 订阅，并按照这个 SO 问题的答案进行身份验证：

[通过身份验证在 ASPNET MVC 中提供 iCalendar 文件](https://stackoverflow.com/questions/10973751/serving-an-icalendar-file-in-aspnet-mvc-with-authentication)

iCal 流是使用 DDay.iCal 库从数据库中的事件动态创建的。

此解决方案在本地开发服务器上运行良好：OSX 日历和 Outlook 都可以订阅和接收来自应用程序的更新。

但是，在我的 Web 主机上的共享服务器上，日历和 Outlook 的身份验证都失败了。也就是说，在（正确的）失败后，他们都一直向我询问用户名和密码。

编辑：如果我将浏览器指向日历 URL，它也无法通过身份验证。

编辑：越来越奇怪——Firefox 验证并获取 iCal 文件。Safari、Chrome 和 IE 验证失败。

如果我用相同的凭据将 curl 指向日历 URL，我就成功了（即我得到了所需的 iCal 文件）。而且，当然，相同的凭据可用于登录 MVC 应用程序。

编辑——我想我知道发生了什么，但我不知道如何解决它。在我`OnAuthorization()`只添加`WWW-Authentication Basic`但使用 Fiddler 时，我可以看到提供了三种类型的身份验证：

```
HTTP/1.1 401 Unauthorized
WWW-Authenticate: Basic realm="Secure Calendar"
WWW-Authenticate: Negotiate
WWW-Authenticate: NTLM
... etc ... 
```

此时只有 Firefox 以基本授权响应，该授权成功。

```
GET <<URL>> HTTP/1.1
...
Authorization: Basic <<encoded credentials>> 
```

IE 以 Negotiate 响应，但失败

```
GET <<URL>> HTTP/1.1
...
Authorization Negotiate <<encoded stuff>> 
```

谁在添加另外两个，我怎样才能让它停止？以下是来自服务器响应的更多详细信息：

```
HTTP/1.1 401 Unauthorized
Cache-Control: private
Transfer-Encoding: chunked
Content-Type: text/html
Server: Microsoft-IIS/7.5
X-AspNetMvc-Version: 3.0
WWW-Authenticate: Basic realm="Secure Calendar"
X-AspNet-Version: 4.0.30319
WWW-Authenticate: Negotiate
WWW-Authenticate: NTLM
X-Powered-By: ASP.NET
X-Powered-By-Plesk: PleskWin
Date: Tue, 23 Oct 2012 13:27:48 GMT 
```

谢谢，埃里克

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T03:52:15.220

呵呵，答案在于IIS配置。

我要求我的主机管理员关闭其他身份验证，这破坏了除 iCal 提要之外的所有内容。

现在他们又重新打开了一对，MVC 站点和带有身份验证的日历提要一样工作......哇！非常非常大的笑容。

这是我们最终得到的 IIS 配置：

```
Name                        Status         Response Type
Anonymous Authentication    Enabled
ASP.NET Impersonation       Disabled
Basic Authentication        Disabled       HTTP 401 Challenge
Digest Authentication       Disabled       HTTP 401 Challenge
Forms Authentication        Enabled        HTTP 302 Login/Redirect
Windows Authentication      Enabled        HTTP 401 Challenge 
```

我不确定*为什么*会这样——或者还有什么可能会破坏——但今天我很高兴。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T06:22:10.970

```
WWW-Authenticate: Negotiate
WWW-Authenticate: NTLM 
```

由 Windows 身份验证使用。由于您最终启用了匿名身份验证，`WWW-Authenticate`因此不会出现所有标头。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-02-13T12:09:24.340

简单的方法 ：

如果您希望从每个新创建的域中删除此“ **X-Powered-By-Plesk** ”标头，您可以在“默认主机模板”的“httpdocs”文件夹中创建默认**web.config文件。**

此默认网站模板通常位于：“ *C:\inetpub\vhosts.skel\0\httpdocs* ”下。当您创建新网站时，默认情况下将使用该**web.config文件。**

```
<?xml version="1.0" encoding="UTF-8"?>
  <configuration>
    <system.webServer>
      <httpProtocol>
        <customHeaders>
          <remove name="X-Powered-By-Plesk" />
        </customHeaders>
      </httpProtocol>
    </system.webServer>
  </configuration> 
```

提示 1：您可以使用此方法删除任何不需要的**自定义标头**（为了不告诉坏人太多关于您的服务器的信息）：

```
<remove name="X-Powered-By"/>
<remove name="X-Powered-By-Plesk"/>
<remove name="X-AspNet-Version"/>
<remove name="X-AspNetMvc-Version"/> 
```

提示 2：如果要删除任何**Dynamic 标头**（例如著名的**“Server”**标头），则需要使用**outboundRules**进行操作：

```
 <configuration>
    <system.webServer>
      <rewrite>
        <outboundRules>
          <rule name="StripHeader_Server" patternSyntax="Wildcard">
            <match serverVariable="RESPONSE_SERVER" pattern="*"/>
            <action type="Rewrite" value=""></action>
          </rule>
          <rule name="StripHeader_ETag">
            <match serverVariable="RESPONSE_ETag" pattern=".+" />
            <action type="Rewrite" value="" />
          </rule>
        </outboundRules>
      </rewrite>
    </system.webServer>
  </configuration> 
```

提示 3：此外，您可以使用此默认**web.config**文件来设置您希望用于每个新网站的所有配置参数（例如：为您的网站定义默认文档列表，如此 Plesk 帮助文章中所述：[https://support.plesk.com/hc/en-us/articles/213364049-How-to-configure-global-default-document-settings-in-Parallels-Plesk](https://support.plesk.com/hc/en-us/articles/213364049-How-to-configure-global-default-document-settings-in-Parallels-Plesk)）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-29T15:28:44.913

作为对此的迟来的答案，您还可以通过创建自定义消息处理程序来处理此问题。

消息处理程序将继承自[`DelegatingHandler`](https://docs.microsoft.com/en-us/aspnet/web-api/overview/advanced/http-message-handlers)并必须添加到`HttpConfiguration`其`MessageHandlers`

这可能看起来如下：

```
public class EnsureNoAuthenticationHeaderHandler : DelegatingHandler 
{
    async protected override Task<HttpResponseMessage> SendAsync( HttpRequestMessage request, CancellationToken cancellationToken ) 
    {
        var response = await base.SendAsync( request, cancellationToken );
        if ( response.StatusCode == System.Net.HttpStatusCode.Unauthorized ) 
        {
            response.Headers.Remove( "WWW-Authenticate" );
        }
        return response;
    }
} 
```

然后在 HttpConfiguration 中注册它，有点像下面

```
private void Register( HttpConfiguration configuration ) 
{
    configuration.MessageHandlers.Add( new EnsureNoAuthenticationHeaderHandler() );
} 
```

您可能会从全局配置中调用它。消息处理程序也可以直接附加到路由，因此如果您不希望它随处可用，只需查看 MSDN 上的[链接文章](https://docs.microsoft.com/en-us/aspnet/web-api/overview/advanced/http-message-handlers#per-route-message-handlers)以获得更多说明

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-29T00:36:18.193

我有同样的问题。

响应包括 3 个 WWW-Authenticate 标头，只有 Firefox 正常工作。Chrome、Bing 和 IE 提示输入用户名和密码，但之后它们没有将 Authenticate Header 发送到服务器。

我刚刚更改了 IIS 身份验证设置并解决了：

```
Anonymous Authentication  Enabled
ASP.NET Impersonation     Disabled
Basic Authentication      Disabled          HTTP 401 Challenge
Forms Authentication      Disabled          HTTP 302 Login/Redirect
Windows Authentication    Disabled          HTTP 401 Challenge 
```

# php - 如果提交表单php的语句问题

> ID：13023521
> 
> 赞同：0
> 
> 时间：2012-10-23T04:20:37.867
> 
> 标签：php, if-statement

我有一个网站，管理员用户在其中查看用户提交的发票行，当他们从其中一个行中单击“批准发票”按钮时，它会将它们带到下面的页面上。

管理员用户批准此发票后，他们点击“是”单选按钮并在页面底部提交，在该行的“npc_active”列下输入值“AUDITED”。然后它将数量和点数相乘，并将总数插入到“tally_points”中的新行（连同他们的用户 ID 和销售 ID）。这一切都很好，但是......

然而，我想要做的是设定一个条件，即一旦对销售进行审计，就不能对其进行重新审计。即一旦提交发生，“这张发票已被审计”打印应该显示，但它不工作。

我很接近，但似乎无法弄清楚问题所在。我认为我遇到问题的代码如下，整页代码在这篇文章的底部。

```
$str ='<form method="post" action="audit_invoice.php">
    <font style="font-size:11px;">
    <em>Is this invoice approved?<br />';
if($approved == "AUDITED") {
    $str .='Please select carefully as this action cannot be undone.</em>
    <em>Yes:</em><input type="radio" value="AUDITED" name="npc_active">  <em>No:</em>
        <input type="radio" value=" " name="npc_active"> 
        <input type="submit" name="submit" value="Submit" />
        <input type="hidden" name="submitted" value="TRUE" />
    <input type="hidden" name="id" value="' . $id . '" />
        </font>
        </form></tr>';
}
else {
    $str .='This invoice has been audited'; 
}
echo $str; 
```

如果我把'=='放在“AUDITED”之前，它会在每个实例中显示“发票已被审计”，如果我把'='放在“AUDITED”前面，它会显示yes按钮并提交每个实例中的按钮。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T05:06:52.463

@AdamMC = 运算符仅在分配数据时使用。

您正在比较数据，因此使用 == 时是正确的

```
if($approved == "AUDITED") 
```

我想询问您的 $approve 变量究竟包含什么。截至目前，我只能假设这段代码暗示

如果发票被批准，它将等于已审计，然后将触发它回显“此发票已被审计”

致stackoverflow用户：请不要投反对票，我无法发表评论，因为我的名声不允许。只是想帮忙

# c - 在 C 中使用指针和 strcpy

> ID：13023523
> 
> 赞同：1
> 
> 时间：2012-10-23T04:20:52.347
> 
> 标签：c, linux

我对 C 中指针的概念相当陌生。假设我有两个变量：

```
char *arch_file_name;
char *tmp_arch_file_name; 
```

现在，我想复制 to 的值`arch_file_name`并`tmp_arch_file_name`在其末尾添加单词“tmp”。我将它们视为字符串，所以我有：

```
strcpy(&tmp_arch_file_name, &arch_file_name);
strcat(tmp_arch_file_name, "tmp"); 
```

但是，当`strcat()`被调用时，这两个变量都会改变并且是相同的。我希望其中一个**改变**，另一个**保持不变**。我必须使用指针，因为我稍后将这些名称用于 fopen()、rename() 和 delete() 函数。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T04:23:25.537

你想要的是：

```
strcpy(tmp_arch_file_name, arch_file_name);
strcat(tmp_arch_file_name, "tmp"); 
```

您只是在原始代码中复制指针（和其他随机位，直到达到 0 字节），这就是它们最终相同的原因。

正如 shinkou 正确指出的那样，确保`tmp_arch_file_name`指向足够大小的缓冲区（不清楚您是否在代码中这样做）。最简单的方法是执行以下操作：

```
char buffer[256];
char* tmp_arch_file_name = buffer; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T04:26:08.693

首先，您需要确保这些指针实际上指向有效内存。事实上，它们要么是 NULL 指针，要么是任意值，它们都不能很好地工作：

```
char *arch_file_name = "somestring";
char tmp_arch_file_name[100]; // or malloc 
```

然后你`cpy`和`cat`，但使用指针，而不是你当前拥有的指针：

```
strcpy (tmp_arch_file_name, arch_file_name);  // i.e., no "&" chars
strcat (tmp_arch_file_name, "tmp"); 
```

请注意，此代码中没有进行边界检查 - 示例不需要它，因为很明显所有字符串都适合分配的缓冲区。

但是，除非您完全控制数据，否则更强大的解决方案会在盲目复制或附加之前检查大小。由于它与问题没有直接关系，我不会在这里添加它，但这是需要注意的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-23T04:28:13.487

在使用指针之前，您需要*分配*内存。假设它`arch_file_name`已经被赋值，你应该计算结果字符串的长度，分配内存，做`strcpy`，然后`strcat`，像这样：

```
char *arch_file_name = "/temp/my.arch";
// Add lengths of the two strings together; add one for the \0 terminator:
char * tmp_arch_file_name = malloc((strlen(arch_file_name)+strlen("tmp")+1)*sizeof(char));
strcpy(tmp_arch_file_name, arch_file_name);
//    ^ this   and   this ^ are pointers already; no ampersands!
strcat(tmp_arch_file_name, "tmp");

// use tmp_arch_file_name, and then...
free(tmp_arch_file_name); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-23T04:53:14.293

该`&`运算符是*地址*运算符，即返回变量的地址。但是，在指针上使用它会返回指针存储的地址，而不是它指向的地址。

# asp.net - 在 asp.net web api 上生成唯一的下载链接

> ID：13023524
> 
> 赞同：0
> 
> 时间：2012-10-23T04:21:11.470
> 
> 标签：asp.net, download, asp.net-web-api

如何在 Asp.net api 上生成文件的唯一下载链接？我想通过网络服务提供下载功能，每个用户一次只得到一个唯一的下载链接。

更新：

*   我不想浪费用户登录的时间。

*   一个用户可以下载多个文件。

*   文件类型可以是xml、图像、文本和声音文件。

    我正在尝试开发一个销售电子书的应用程序。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T04:58:03.653

你能告诉我们更多你想要达到的目标吗？

1.  我想知道用户是否注册？
2.  同一个用户会下载超过 1 个文件吗？
3.  什么类型的文件？

你能告诉我们任何其他情况吗？

根据您的情况，它可能不会以多种方式出现。

寻找这个例子&会给你更多 [http://support.microsoft.com/kb/306654](http://support.microsoft.com/kb/306654)

如果适合您的场景，一种方法

虽然您可以使用 GUID 并将其与数据库中的用户相关联，但您需要围绕该 GUID 如何被应用程序排除在外创建一些业务逻辑。例如，您可能会说 UserA 有一个 GUID，如果该 GUID 在接下来的 15 分钟内使用，则让 UserA 自动登录，但在 15 分钟后强制用户使用用户名和密码。

同样，您可以创建一个查询字符串，例如 u=UserA&time=1347&date=01282001，然后通过某种散列运行它。当它回来时，取消它（所以你不能使用 MD5），检查时间戳，看看它自创建时间戳以来已经过去了多长时间。如果在可接受的时间范围内，让用户输入，如果不是，则强制他们使用用户名和密码。这不需要您与数据库中的用户关联任何内容，因此与 GUID 相比，这可能是一个更简单的解决方案。

**更新**：如果我必须这样做，那么我将采用以下方法。如何保护这些文件不被下载取决于您。

第 1 步：一旦用户付款并在此表中存储 guid 和用户 ID、BookID 信息，我将创建一个新表并生成一个 GUID。现在您可以根据此信息生成链接

```
http://www.xyz.com/download.aspx?BookID=XX&UserID=XXX&GUID=guid-guid-guid-guid-guid-guid 
```

第 2 步：创建一个 HTTPHandler 以检查您在上面创建的表中是否存在此类记录，如果存在，则允许用户下载该书，否则他应该无法下载该书。

您可以将所有可下载的文件保存在用户无法直接访问的文件夹下。

我希望你明白我想说什么。

我就是这样做的，我可以将所有文件保存在受保护的文件夹中，也可以将它们存储在数据库中。

我希望这会给你一个起点。

# java - Android iText阅读PDF：iText的解析器和提取的区别

> ID：13023527
> 
> 赞同：0
> 
> 时间：2012-10-23T04:21:28.677
> 
> 标签：java, android, pdf, itext

我在 Java 上尝试了 iText 的示例，输出没有区别。

这个 iText [Example1](http://svn.code.sf.net/p/itext/code/book/src/part4/chapter15/ExtractPageContentSorted1.java)是 PDF 的 Parser，但与提取没有区别

这个 iText [Example2](http://svn.code.sf.net/p/itext/code/book/src/part4/chapter15/ExtractPageContentSorted2.java)是 PDF 中的文本提取器。

iText PDF Parser 做什么以及与 iText 提取有什么区别？

我已经尝试了这两个示例，并且输出没有区别，或者我只是错过了一些东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T05:58:53.847

如果您阅读了代码示例的标题，您将看到对这本书进行解释的参考。我是本书的作者，也是示例的作者。当你写一本书时，你通常不会把人扔到深处。你从简单的例子开始，然后你把它们变得更复杂，最后你告诉人们方便的方法。

Example2 在后台使用了 Example1 中解释的技术。

你错过的是我书中解释的上下文。另外：在 SourceForge 和[http://itextpdf.com/book/](http://itextpdf.com/book/)上发布的一些示例是*不好的示例*。他们在那里解释如何***不***做某事。请不要在未阅读相应文档的情况下复制/粘贴示例！

# javascript - jQuery FLOT图表动态Y轴

> ID：13023529
> 
> 赞同：9
> 
> 时间：2012-10-23T04:21:55.513
> 
> 标签：javascript, jquery, flot

我有一个浮点图，它根据最后 100 个数据点计算最大 Y 轴值，然后成功绘制...但是有时，正在进行的绘图的运行总数（绘制新数据点的 5 秒延迟）超过当前最大限制。在图表上绘制新点时，有没有办法让 Y 轴动态缩放？

如果超出当前 Y 轴，这是一个关于如何动态缩放图表 Y 轴的有效问题，因为图表是随时间绘制的，每 5 秒添加一次新点，我在问如何缩放 Y-如果新绘图数据达到当前最大 Y 轴值以上，则轴适合新绘图数据。

**更新：**

这是我使用的代码（Json 返回的数据）以及绘图更新计时器：“highY”从数据库中获取最后 100 个数据点，并将最大值设置为最高计数 + 10%

```
 <script type="text/javascript">
            $(function () {
                var str1 = [], totalPoints = 300;
                var str2 = [], totalPoints = 300;
                var pts1 = '';
                var pts2 = '';
                if (pts1 == "" || pts == null) { pts = '2012-10-02 17:17:02'; }
                if (pts2 == "" || pts == null) { pts = '2012-10-02 17:17:02'; }
                var maxYaxis = <?PHP echo $highY; ?>;
                function getStr1() {
                    var ts1 = new Date().getTime();
                    var json1 = (function () {
                        var json1 = null;
                        var myURL = '<?PHP echo $updateURL; ?>?s=1&ts=' + ts1;
                        $.ajax({
                            'async': false,
                            'global': false,
                            'url': myURL,
                            'dataType': "json",
                            'success': function (data) {
                                json1 = data;
                            }
                        });
                        return json1;
                    })(); 
                    var y1 = json1['data']['avgpersec'];
                    var total_1 = json1['data']['running_total'];
                    document.getElementById('<?PHP echo $string1; ?>Total').innerHTML = total_1;
                    if (str1.length > 0) { str1 = str1.slice(1); }

                    while (str1.length < totalPoints) {
                        var prev = str1.length > 0 ? str1[str1.length - 1] : 50;
                        str1.push(y1);
                    }

                    // zip the generated y values with the x values
                    var res = [];
                    for (var i = 0; i < str1.length; ++i){ res.push([i, str1[i]]) }
                    return res;
                }

                function getStr2() {
                    var ts2 = new Date().getTime();
                    var json2 = (function () {
                        var json2 = null;
                        var myURL = '<?PHP echo $updateURL; ?>?s=2&ts=' + ts2;
                        $.ajax({
                            'async': false,
                            'global': false,
                            'url': myURL,
                            'dataType': "json",
                            'success': function (data) {
                                json2 = data;
                            }
                        });
                        return json2;
                    })(); 
                    var y2 = json2['data']['avgpersec'];
                    var total_2 = json2['data']['running_total'];
                    document.getElementById('<?PHP echo $string2; ?>Total').innerHTML = total_2;
                    if (str2.length > 0) { str2 = str2.slice(1); }

                    while (str2.length < totalPoints) {
                        var prev = str2.length > 0 ? str2[str2.length - 1] : 50;
                        str2.push(y2);
                    }

                    // zip the generated y values with the x values
                    var res = [];
                    for (var i = 0; i < str2.length; ++i){ res.push([i, str2[i]]) }
                    return res;
                }

                // setup control widget
                var updateInterval = 5000;
                $("#updateInterval").val(updateInterval).change(function () {
                    var v = $(this).val();
                    if (v && !isNaN(+v)) {
                        updateInterval = +v;
                    if (updateInterval < 1)
                        updateInterval = 1;
                    if (updateInterval > 2000)
                        updateInterval = 2000;
                        $(this).val("" + updateInterval);
                    }
                });

                // setup plot
                var options = {
                    series: { shadowSize: 0 }, // drawing is faster without shadows
                    yaxis: { min: 0, max: maxYaxis},
                    xaxis: { show: false },
                    colors: ["<?PHP echo $string1Color; ?>","<?PHP echo $string2Color; ?>"]
                };
                var plot = $.plot($("#placeholder"), [ getStr1(), getStr2() ], options);

                function update() {
                    plot.setData([ getStr1(), getStr2() ]);
                    plot.draw();
                    setTimeout(update, updateInterval);
                }

                update();
            });
        </script> 
```

我希望完成的是在绘制新数据点时实时调整“$highY”（Y 轴）值，以便在新数据绘图点的值超过当前“yaxis { max :#}" 在图表选项中设置。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-23T15:16:29.610

我假设您现在正在使用`flot.setData`and `flot.draw`？

`$.plot`最简单的解决方案是每次收到新数据时都调用它。在不同的时间，flot 插件的作者都建议将其作为处理这种情况的一种相当有效的方法。我在每秒刷新的图表上使用了它，发现它不会在用户计算机上使用过多的 CPU，即使在一页上每秒刷新 3-4 个图表也是如此。

**根据您添加的代码（以及您建议的编辑**）进行编辑，我会将更新功能更改为如下所示：

```
function update() {
   var data = [ getStr1(), getStr2() ];

   //modify options to set the y max to the new y max
   options.yaxis.max = maxYaxis;
   $.plot($("#placeholder"), data, options);
   setTimeout(update, updateInterval);
} 
```

此外，您将添加代码`getStr`并使变量`getStr`保持`maxYaxis`最新。

# java - Japid：从 HashMap 获取键值时的奇怪行为

> ID：13023535
> 
> 赞同：0
> 
> 时间：2012-10-23T04:22:28.003
> 
> 标签：java, playframework-2.0, japid

```
<p> THAT'S OK: ${((Map<String,Integer>)view.get("upgrade_assignment_type_map")).toString()} </p>

<p> THAT'S ALSO OK:
for( String _name : ((Map<String, Integer>)view.get("upgrade_assignment_type_map")).keySet() ) {
<p> ${_name}: ${((Map<String, Integer>)view.get("upgrade_assignment_type_map")).get(_name)} </p>
}
</p>
<br><br>
<p> SADLY THAT'S NOT OK::: ${((Map<String, Integer>)view.get("upgrade_assignment_type_map")).get("MANUAL")} </p> 
```

上面的代码段打印出以下输出，这让我感到惊讶：

```
THAT'S OK: {AUTO_WITH_BALANCE_EMPHASIS=2, AUTO_WITH_OFFENSIVE_EMPHASIS=0, MANUAL=3, AUTO_WITH_DEFENSIVE_EMPHASIS=1}

THAT'S ALSO OK:

AUTO_WITH_BALANCE_EMPHASIS: 2

AUTO_WITH_OFFENSIVE_EMPHASIS: 0

MANUAL: 3

AUTO_WITH_DEFENSIVE_EMPHASIS: 1

SADLY THAT'S NOT OK::: 
```

代码段的最后一行尝试获取键“MANUAL”的值，但它没有打印该值，如果我尝试将其转换为 toString（如`${((Map<String, Integer>)view.get("upgrade_assignment_type_map")).get("MANUAL").toString()}`），它在运行时给我 null。我不明白为什么会这样？

`<p> ${_name}: ${_name.length()} : ${((Map<String, Integer>)view.get("upgrade_assignment_type_map")).get(_name)} </p>`当我打印我得到的每个键的长度（在第一个冒号之后）时：

```
AUTO_WITH_BALANCE_EMPHASIS: 29 : 2

AUTO_WITH_OFFENSIVE_EMPHASIS: 29 : 0

MANUAL: 10 : 3

AUTO_WITH_DEFENSIVE_EMPHASIS: 30 : 1 
```

注意：我在 java 源代码中创建地图为`Map<String, Integer> nameToTypeMap = Maps.newHashMap();`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T05:52:17.603

我怀疑“MANUAL”条目中的某处有一个不可打印的字符。像这样更改您的工作线之一：

```
<p> KEY_LENGTHS:
for( String _name : ((Map<String, Integer>)view.get("upgrade_assignment_type_map")).keySet() ) {
<p> ${_name}: ${_name.length()}</p>
</p> 
```

如果显示 MANUAL 的长度不是 6，则表明我是对的，您应该查看数据源以找出额外字符的来源。

如果没有，我至少会尝试在 HTML 部分*之外进行调试。*我没有使用 Play 框架，但大概必须有一些代码填充这个视图......如果你可以在那里闯入调试器，它可能会更容易诊断。

另一种可能性是该条目包含一个*看起来*像 ASCII 字符但实际上不是的非 ASCII 字符。如果您查看 HTML 的源代码，您可能会看到它（甚至*可能*是不可打印的字符，具体取决于它的处理方式）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T05:22:56.303

Eclipse 没有显示无效字符，并且这些字符串中有无效字符（令人惊讶的是可编译），所以当我在 vim 中打开该特定文件时，它显示我并删除了那些无效字符。这解决了我的问题。

# c++ - C++ 中的大整数字面量源格式

> ID：13023536
> 
> 赞同：3
> 
> 时间：2012-10-23T04:22:30.833
> 
> 标签：c++, integer, code-formatting

我正在使用非常大的整数文字定义，例如：

```
#define X 999999999999 
```

为了提高可读性，我尝试将其更改为：

```
#define X 999/**/999/**/999/**/999 
```

但是编译器就像“nah bru ..”

有没有办法让这些更具可读性？

澄清一下，这个问题只是询问源代码中值的外观。我不是在问如何在 printf 或任何东西中格式化这些值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T04:29:52.413

您可以在定义中执行此操作（但不能在定义之外）：

```
#define X 999##111##333##444 
```

我不确定我会推荐它，但它是合法的。(`##`是预处理器标记连接运算符。)

您明确没有询问输出格式，因此您可能对输入格式也不感兴趣，但它们都可以成为区域设置感知，包括允许特定于区域设置的分组字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T04:46:46.060

你可以这样做：

```
#include <boost/preprocessor.hpp>
BOOST_PP_SEQ_CAT((345)(678)(901)) 
```

这将在源代码中显示为：

```
345678901 
```

# javascript - 处理来自 WCF JSONP 的错误响应

> ID：13023541
> 
> 赞同：0
> 
> 时间：2012-10-23T04:22:48.397
> 
> 标签：javascript, jquery, wcf, jsonp

我有一个 WCF 服务，通过`CrossDomainScriptAccessEnabled`在绑定上设置属性来公开 JSONP 接口。[这里](http://www.codeproject.com/Articles/223572/Calling-Cross-Domain-WCF-service-using-Jquery-Java)有一个与我的代码相似的示例。当服务器通常返回 HTTP 200 时，它的行为与我预期的一样，并返回类似`jsonp_callback({"result":5})`. 但是，当我抛出异常时，格式类似于：

```
jsonp_callback({"error_message":"needs auth"}, 401); 
```

问题在于，据我所知，jQuery 总是期望 JSONP 回调中有一个参数。有什么方法可以通过 jQuery 的 JSONP 处理访问第二个参数？是否有另一个合理的框架可以使这更容易？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T19:00:58.057

I couldn't find a way to do this with jQuery. But for my current purposes it worked fine implementing the JSONP myself:

```
var scriptTag = document.createElement('script');
var cb = "jsonp_" + Math.floor(Math.random() * 1000000);
window[cb] = function(result, statusCode) {
    try {
        onResult(result, statusCode);
    } finally { 
        delete window[cb];
    }
}
scriptTag.src = url + "?callback=" + cb + "&input=" + encodeURIComponent(data);
$('head').append(scriptTag); 
```

# jquery - 使用 Cargo Collective 站点的 jQuery 实现

> ID：13023542
> 
> 赞同：1
> 
> 时间：2012-10-23T04:22:56.340
> 
> 标签：jquery, html, css

我在 Cargo 上运行了[这个网站。](http://cargocollective.com/amytdatta/Amyt-Datta)在此页面的底部，我正在尝试创建一个简单的 20 个问题类型的游戏（两列文本）。我的目标是创建某种按钮，当单击或悬停时会改变错误陈述的文本颜色。

这是我正在使用的 jQuery：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript">$(".showtrue").click(function() { $('.false').css('color','#f5f5f5');return false;});$(".showfalse").click(function() { $('.false').css('color','#999999');return false; });</script> 
```

showtrue 是一个通过将文本颜色设置为 bg 颜色来有效隐藏错误语句的函数，showfalse 重置 showtrue。

这是我在页面上使用的 HTML：

```
<div class="column"><p>Digs disco<br><span class="false">Was born in the 70s</span><br>Grew up in a vicious part of town<br><span class="false">Reads mathematics textbooks to relax</span><br><span class="false">Begins the day with a hundred push-ups</span><br>Was attacked by cockroaches after shooting a lizard</div><div class="column"><p><span class="false">Is a vegetarian</span><br>Was born in the 60s<br>Didn't use a computer until 2012<br><span class="false">Is a completely self-taught musician</span><br>Often sleeps with his guitar next to him<br>Has played on a freezing stage lit by a single naked bulb</div>

Only some of the above is <a class="showtrue" href="#">true</a> / <a class="showfalse" href="#">Reset</a> 
```

我的代码似乎没有做任何事情。但是，我的 jQuery 代码似乎与我的 Cargo CSS 混淆了。例如，我的顶部导航（应该是固定的）现在正在与页面的其余部分一起滚动。应该使用顶部导航修复的“Running On Cargo”链接现在出现在顶部导航上方。

我不确定如何解决这些问题，任何帮助将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T04:27:00.300

将脚本包装在 document.ready 中

```
 <script type="text/javascript">
  $('document').ready(function(){  
    $(".showtrue").click(function() { 
          $('.false').css('color','#f5f5f5');
          return false;
    });
   $(".showfalse").click(function() { 
     $('.false').css('color','#999999');
     return false;
    });
   });
  </script> 
```

# mysql - MySQL 服务器版本，用于在 'OPTION SQL_SELECT_LIMIT=10' 附近使用正确的语法

> ID：13023548
> 
> 赞同：7
> 
> 时间：2012-10-23T04:23:53.220
> 
> 标签：mysql, gerrit

我发布这个是为了节省另一个开发人员浪费的时间。Mysql 候选版本 5.6.7-rc 是垃圾。作为开发人员，我通常会尽可能紧跟最新版本。这让我花了好几个小时调试 gerrit 和 mysql。答案是使用稳定版本。我希望这对其他人有帮助。

不确定在 SO 协议上做这样的事情 - 所以只是作为一个问题发布。

```
mysql> select VERSION();
+--------------+
| VERSION()    |
+--------------+
| 5.6.7-rc-log |
+--------------+
1 row in set (0.00 sec)

mysql> SET OPTION SQL_SELECT_LIMIT=10;
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'OPTION SQL_SELECT_LIMIT=10' at line 1

mysql>  select VERSION();
+------------+
| VERSION()  |
+------------+
| 5.5.28-log |
+------------+
1 row in set (0.00 sec)

mysql> SET OPTION SQL_SELECT_LIMIT=10;
Query OK, 0 rows affected (0.00 sec) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-23T04:35:58.453

> 旧版本的 MySQL 使用 SET OPTION，但不推荐使用这种语法，而支持 SET without OPTION。

SET OPTION 语法已被弃用，并在 5.6 版中被删除。

你应该`SET SQL_SELECT_LIMIT=10;`改用。

看***[这里](http://dev.mysql.com/doc/refman/5.6/en/news-5-6-5.html)***。

> **不兼容的更改：** 已删除**SET**语句的过时**OPTION**修饰符。

# regex - 如何将字符串拆分为数组并确定拆分后出现的字符？

> ID：13023550
> 
> 赞同：0
> 
> 时间：2012-10-23T04:24:05.630
> 
> 标签：regex, arrays, actionscript-3, split

我正在尝试将字符串中的所有单词拆分为 AS3 中的数组。显而易见的答案当然是简单地这样做：

```
str.split(/\s/); 
```

这里的问题是我需要能够判断拆分是发生在换行符还是空格上。我正在尝试将字符串中的单词放入可拖动的框中，并且我希望换行符之后的单词可以放在新行中。

知道最好的方法吗？显然，上面的拆分方法将摆脱关键的换行符，它会告诉我我需要知道的内容。我应该使用带有 while 循环的 regex.exec，还是有什么方法可以使用 split 来保留我需要的字符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T12:51:40.313

首先在换行符处拆分你的字符串

```
var lines:Array = str.split("\n"); 
```

现在你可以循环你的行并将这些中的每一个拆分成单独的单词

```
for(var i:int = 0; i < lines.length; i++){
    var words = str[i].split(" ");
    for(var j:int = 0; j < words.length; j++){
        trace("word", words[i]);
    }
    trace("newline");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T05:17:19.073

示例字符串：

```
 This is an example string  
     with spaces as well as newlines 
     and needs a regex 
```

1/ 在换行符上拆分字符串，得到数组#1。

> array#1 = [ "这是一个示例字符串","带有空格和换行符","需要一个正则表达式"]

2/ 对于 array#1 中的每个元素，根据您当前的正则表达式进行拆分，这将仅在空格上打破字符串，因为已经处理了换行符，这个二维数组是 array#2

> ```
>  array#2  = [ 
>                 ["This","is","an","example","string"] ,
>                 ["with","spaces","as","well","as","newlines"],
>                 ["and","needs","a","regex"]
>               ] 
> ```

3/ 根据需要处理数组#2 的元素。

# c# - C# 解决方案集成-Sharepoint

> ID：13023556
> 
> 赞同：0
> 
> 时间：2012-10-23T04:25:02.950
> 
> 标签：c#, sharepoint

我是 Sharepoint 的新手。我在 C# Visual Studio 2010（Web 应用程序）中创建了一个应用程序。我必须在 SharePoint 中显示内容和解决方案，以便其用户可以使用 C# 应用程序，而无需在每个应用程序中安装 Visual Studio用户的桌面。

我必须将 C# 解决方案上传到 sharepoint 门户服务器，然后在文档选项卡中创建一个链接，该链接将打开此应用程序。如果是这种情况，我不知道该怎么做，任何帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T05:37:32.323

只需在 Windows 资源管理器模式下打开 SharePoint 文档库即可复制您的解决方案。请检查以下链接。 [http://techtrainingnotes.blogspot.in/2010/05/sharepoint-2010-windows-explorer-view.html](http://techtrainingnotes.blogspot.in/2010/05/sharepoint-2010-windows-explorer-view.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T12:41:46.430

请注意，如果将目录排除为托管路径，则任何 .NET 应用程序都可以在 SharePoint 下运行。

访问该应用程序很容易 - 在那里进行简单的重定向或使用页面查看器 Web 部件（一个 IFrame）来显示“内部”SharePoint 的应用程序。

简单 - 无需代码。

此致，

David M. Sterling 斯特林国际咨询集团

# php - 如何划分列表

> ID：13023557
> 
> 赞同：2
> 
> 时间：2012-10-23T04:25:05.620
> 
> 标签：php, jquery

```
<ul><h2>More useful stuff... </h2>
<li><a href="#">category 1</a></li>
<li><a href="#">category 2</a></li>
<li><a href="#">category 3</a></li>
<li><a href="#">category 4</a></li>
<li><a href="#">category 5</a></li>
<li><a href="#">category 6</a></li>
<li><a href="#">category 7</a></li>
<li><a href="#">category 8</a></li>
<li><a href="#">category 9</a></li>
<li><a href="#">category 10</a></li>
<li><a href="#">category 11</a></li>
<li><a href="#">category 12</a></li>
</ul> 
```

如何使用 jquery 自动划分它

喜欢

```
category 1     category 6      category 11
category 2     category 7      category 12
category 3     category 8
category 4     category 9
category 5     category 10 
```

或者我可以使用 php 任何一种方式都可以

示例代码在这里[http://jsfiddle.net/3CRnh/](http://jsfiddle.net/3CRnh/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T04:41:39.587

您可以使用 CSS 自动将列表分成多少列：

```
ul {
    column-count:3; -moz-column-count:3; -webkit-column-count:3; 
    column-gap:2em; -moz-column-gap:2em; -webkit-column-gap:2em;
}​ 
```

**演示：http:** [//jsfiddle.net/3CRnh/2/](http://jsfiddle.net/3CRnh/2/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T04:42:39.327

请检查这个**[演示](http://jsfiddle.net/pintu31/3CRnh/1/)**

你应该使用`.slice`, from [question](https://stackoverflow.com/questions/3366529/wrap-every-3-divs-in-a-div)

```
var li = $("ul > li");
$('li').unwrap();
for(var i = 0; i < li.length; i+=5) {
 li.slice(i, i+5).wrapAll("<ul class='left'></ul>");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T04:46:44.650

假设您只需要每列 5 个类别，并且您可以在数组中使用 php 的类别：

```
<?php
$categories = array(1,2,3,4,5,6,7,8,9,10,11,12); // my made up category array
echo '<div style="float:left">';
foreach($categories as $k=>$category){
    if($k%5==0 && $k!=0){
        echo '</div><div style="float:left">';
    }
    echo '<li><a href="#">category '.$category.'</a></li>';
}
echo '</div>';?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T05:13:03.593

你可以访问链接，那里有，他们给出了一个很好的例子，可以将我们的列表分成几部分

链接在这里

点击这里

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-23T04:38:18.887

您可以为此使用 div 和 CSS

```
<ul><h2>More useful stuff... </h2>
    <div class="a">
          <li><a href="#">category 1</a></li>
          <li><a href="#">category 2</a></li>
          <li><a href="#">category 3</a></li>
          <li><a href="#">category 4</a></li>
          <li><a href="#" >category 5</a></li>
    </div>
    <div class="b">
          <li><a href="#">category 6</a></li>
          <li><a href="#">category 7</a></li>
          <li><a href="#">category 8</a></li>
          <li><a href="#">category 9</a></li>
          <li><a href="#">category 10</a></li>
    </div>
    <div class="c">
          <li><a href="#">category 11</a></li>
          <li><a href="#">category 12</a></li>
    </div>
</ul>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

以及格式化它的CSS：

```
.a,.b,.c{
    float:left;
    padding-right:50px;
} 
```

试试我在[http://jsfiddle.net/DehYQ/](http://jsfiddle.net/DehYQ/)创建的这个演示。

​</p>

# macos - 从 Xcode mac 应用程序打开本地文件

> ID：13023561
> 
> 赞同：0
> 
> 时间：2012-10-23T04:25:54.197
> 
> 标签：macos

我正在界面生成器中制作一个 mac 应用程序，并且想知道如何分配一个按钮来打开文件。

具体来说，当我单击 Xcode 应用程序上的按钮时，我正在尝试启动文件（它是一个安装程序文件）。我该怎么办？

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T08:48:33.317

按钮的编写`IBAction`方法。

```
- (IBAction)install:(id)sender;
{
// your code for installer file..
} 
```

![在此处输入图像描述](../Images/650d2333125fe79aa6afa1e6933fb008.png)

# c# - 具有指定辅音：元音比例的 C# 随机字母生成器

> ID：13023568
> 
> 赞同：3
> 
> 时间：2012-10-23T04:26:35.343
> 
> 标签：c#, string, random, console

我需要创建代码以将 50 个随机字母散布到控制台中（这是一个“蛇”游戏）；那部分，我没有问题。我使用此代码生成字母（一旦我知道如何解决问题，我正在处理的“将它们分散在控制台周围”部分）

```
 Random rand = new Random();
        int number = rand.Next(0, 26);
        char letter = (char)('a' + number); 
```

它生成随机字母就好了，但问题的说明指定***辅音与元音的比例必须为 4:1***，我不知道如何使这部分发生。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T04:32:49.640

创建一对静态字符串：

```
 String consonants = "BCDFGHJKLMNPQRSTVWXYZ";

  String vowels = "AEIOU"; 
```

生成一个介于 1..5（或 0..4）之间的随机数。如果数字是 1 (0)，则从元音列表中选择一个随机字符。否则从辅音列表中选择一个随机字符。

或者，如果您需要*4* :1 的比例，请使用 for 循环代替第一个随机数生成器，即：

```
for ( i = 0; i < 50; i++ )
{
    if ( i % 5 == 0 )
    // select a vowel at random
    else
    // select a consonant at random
} 
```

编辑：完整的解决方案。我正在将我的五十个字符写入一个数组，然后将它们打印到控制台。您可以传递`theChar`给您的输出方法。

```
 public void RandomChars()
    {
        Random random = new Random();
        String consonants = "BCDFGHJKLMNPQRSTVWXYZ";
        String vowels = "AEIOU";
        StringBuilder result = new StringBuilder();
        for (int i = 0; i < 50; i++)
        {
            char theChar;

            if (i % 5 == 0)
            {
                theChar = vowels[random.Next(vowels.Length)];
            }
            else
            {
                theChar = consonants[random.Next(consonants.Length)];
            }

            result.Append(theChar);
        }

        Console.WriteLine(result.ToString());
    } 
```

# php - 有什么方法可以让 PHP 控制 CSS

> ID：13023569
> 
> 赞同：-2
> 
> 时间：2012-10-23T04:26:37.023
> 
> 标签：php, css

1) 数据库

2) php

3）CSS

4）html表单

用户在 html 表单中输入一些属性，例如 background: red 并将其保存在 db 中，然后 php 从 db 加载背景 css 中的颜色选项...然后我如何将 php 变量放入 css 属性中。 .

还有一些主机不允许在 .htaccess 中添加处理程序，还有其他选择吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T04:33:39.210

是的，有可能。

您可以通过设置内容类型来使用 php 提供 css 文件。

```
<?php header('content-type: text/css; charset=utf-8'); ?> 
```

您将从 php 文件中输出 css。

您可以使用表单将值存储在 mySQL 或其他表中，然后使用 mySQLi 或其他库检索它们。

这是 php 脚本的示例：

```
<?
    header('content-type: text/css; charset=utf-8');

    $bgColor = "#FFF"; // Get it from database, I'm setting manually for this example
?>

body{
      background-color:<?php echo "$bgColor" ?>;
} 
```

或者，您可以在页面上输出内联 css。直接进入标签，或内联元素。

如果出于某种原因确实需要一个本机 css 文件（我想不出一个），您可以在技术上使用 php 的 fwrite() 函数覆盖特定的 css 文件，但我不建议这样做。

```
 <?php

      $filename = "phpstyle.css";

      $fp = fopen($filename, 'w');

      $bgcolor = "#FFF";

      $css  = "body{";
      $css .= "background-color:".$bgcolor.";"; 
      $css .= "}";           

      fwrite($fp, $css);

      fclose($fp);

 ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T04:28:15.053

是的，您可以通过 php 脚本提供 css。

一种方法是通过php输出样式元素。

```
<?php
    #css on php file
    $color = '#FFFFFF';
?>
<html>
<head>
    <title>Css through php</title>
    <style>
        .test{
            text-color: <?php echo $color;  ?> 
        }
    </style>
</head>
<body>
<p class="test">Your body </p>
</body>
</html> 
```

另一种方法是在 php 文件中动态生成 css 并将其链接到 html 页面上。

```
<?php
    #css on php file [test_css.php]
    header("Content-type: text/css");
    $color = '#FFFFFF';
?>
.test{
            text-color: <?php echo $color;  ?> 
} 
```

* * *

```
<html>
<!-- test.html -->
<head>
    <title>Css through php</title>
    <link rel="stylesheet" type="text/css" href="test_css.php">
</head>
<body>
<p class="test">Your body </p>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T04:35:02.410

除了 Khaleel 的回答之外，您还可以将 CSS 放在 HTML 文档本身中，

```
<style>
...
</style> 
```

部分。您可以使用 PHP 变量来填写它。

或者您可以在 HTML 中使用内联样式

```
<span style="...">...</span> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-06T19:11:14.917

为什么不只是：

```
<?php if (myCondition) { ?>
<style>.myClass {
background: <?php echo $myColor; ?> !important;
} </style>
<?php } ?> 
```

myCondition 触发插入正文样式。!important 标记会覆盖该属性的所有其他现有值。

简单易懂且易于使用。每次都有效。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-23T04:32:43.807

ether 使用 php 动态创建一个 css 文件，例如：

```
<link href="../styles/styles.php" type="text/css" /> 
```

或使用 php 在您的 html 文件中写入 css 内联：

```
<html>
<head>
<style type="text/css">
body {
   background-color: <?php echo $redcolor; ?>;
}
</style>
</head>
<body></body>
</html> 
```

但是，您不能使用 php.ini 创建标准的 css 文件。

# java - java单元测试

> ID：13023570
> 
> 赞同：0
> 
> 时间：2012-10-23T04:26:39.313
> 
> 标签：java, maven, akka

我有一个 akka maven 项目，我想对其进行单元测试。

我已经定义了测试类，但是当我运行它时，我显示了一个错误。

演员类代码片段如下：

```
public class WorkerActor extends UntypedActor {

    @Override
    public void onReceive(Object msg) throws Exception {

         if(msg instanceof GesturePoints) 
         { GesturePoints message = (GesturePoints) msg;
         Result rslt = initial_Theta(message);
         getSender().tell(rslt);
          } 

         else {unhandled(msg);}
    }

    public Result initial_Theta(GesturePoints p) 
    {           
        Result result = new Result();

        if(p.getPoints().get("x").size() < 3)  //The number of x coordinates as size
        {   return null;}                    

 dx = (double) ((Integer)p.getPoints().get("x").get(2)  - (Integer)p.getPoints().get("x").get(0)) ;

  dy = ((Double)p.getPoints().get("y").get(2)) - ((Double)p.getPoints().get("y").get(0));

             {                                          
                   result.setResult("feature1", initial_cos);
                   result.setResult("feature2", initial_sin);

         } 
             return result;
         }  
} 
```

测试类在下面的代码中给出

```
public class ActorTest {

    TestKit testKit;
    TestActorRef<WorkerActor>  testedActor ;
    TestProbe tProbe;

    @Before
    public void setUp()
    {   

        testKit = new TestKit(ActorSystem.apply());
        tProbe =  TestProbe.apply(testKit.system());
        testedActor = TestActorRef.apply(new Props(new UntypedActorFactory()
                {

            public WorkerActor create()
            {
                return new WorkerActor();
            }
                }),testKit.system());
    }

    @Test
    public void testWorkerActor()
    {    
        ArrayList<Object> x = new ArrayList<Object>();
        ArrayList<Object> y = new ArrayList<Object>();
        x.add(0, 1); x.add(1, 2); x.add(2, 3); x.add(3, 4); x.add(4, 5);
        y.add(0, 1.00); y.add(1, 2.00); y.add(2, 3.00); y.add(3, 4.00); y.add(4, 5.00);

        Map<String, ArrayList<Object>> map = new HashMap<String, ArrayList<Object>>();
        map.put("x", x);
        map.put("y", y);

        GesturePoints gp = new GesturePoints();
          gp.setPoints(map);

         tProbe = TestProbe.apply(testKit.system());
    testedActor.tell(gp , tProbe.ref());

    TestActor.Message message = tProbe.lastMessage();
    Result result = (Result)message;

assertEquals(0.25 , result.getResult().get("x"));
    assertEquals(0.25 , result.getResult().get("y"));

    }
} 
```

maven 还包含一个默认的测试类。故障测试类和`Actortest`类都位于该`src/test/java`文件夹中。

这是pom文件

```
<project>
    <modelVersion>4.0.0</modelVersion>

    <groupId>com.theta.gesture</groupId>
    <artifactId>com-theta-gesture</artifactId>
    <version>1.0-SNAPSHOT</version>
    <packaging>jar</packaging>

    <name>com-theta-gesture</name>
    <url>http://maven.apache.org</url>

    <properties>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    </properties>

    <dependencies>
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.8.1</version>
            <scope>test</scope>
        </dependency>

        <dependency>
            <groupId>Com.RubineEngine.GesturePoints</groupId>
            <artifactId>Com-RubineEngine-GesturePoints</artifactId> 
            <version>1.0-SANPSHOT</version>
        </dependency>

        <dependency>
            <groupId>com.result.gesture</groupId>
            <artifactId>com-result-gesture</artifactId>
            <version>1.0-SNAPSHOT</version>
        </dependency>

        <dependency>
            <groupId>com.typesafe.akka</groupId>
            <artifactId>akka-actor</artifactId>
            <version>2.0.2</version>
        </dependency> 

        <dependency>
            <groupId>com.typesafe.akka</groupId>
            <artifactId>akka-remote</artifactId>
            <version>2.0.2</version>
        </dependency>

        <dependency>
            <groupId>com.typesafe.akka</groupId>
            <artifactId>akka-slf4j</artifactId>
            <version>2.0.2</version>
        </dependency>

        <dependency>
            <groupId>com.typesafe.akka</groupId>
            <artifactId>akka-testkit</artifactId>
            <version>2.0.2</version>
        </dependency>

        <dependency>
            <groupId>com.typesafe.akka</groupId>
            <artifactId>akka-kernel</artifactId>
            <version>2.0.2</version>
        </dependency>            
    </dependencies>

    <repositories>
        <repository>
            <id>typesafe</id>
            <name>Typesafe Repository</name>
            <url>http://repo.typesafe.com/typesafe/releases/</url>
        </repository>
        <repository>
            <id>repo</id>
            <name>repo</name>
            <snapshots>
                <enabled>true</enabled>
            </snapshots>
            <url>file://${project.basedir}/repo</url>
        </repository>
    </repositories>

    <build>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.3.2</version>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                </configuration>
            </plugin>

            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-surefire-plugin</artifactId>
                <version>2.12.4</version>
                <dependencies>
                    <dependency>
                        <groupId>org.apache.maven.surefire</groupId>
                        <artifactId>surefire-junit47</artifactId>
                        <version>2.12.4</version>
                    </dependency>
                </dependencies>
            </plugin>   
        </plugins>
    </build>    
</project> 
```

错误信息如下

```
[INFO] Scanning for projects...
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building com-theta-gesture 1.0-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-resources-plugin:2.4.3:resources (default-resources) @ com-theta-gesture ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 1 resource
[INFO] 
[INFO] --- maven-compiler-plugin:2.3.2:compile (default-compile) @ com-theta-gesture ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-resources-plugin:2.4.3:testResources (default-testResources) @ com-theta-gesture ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory C:\Users\FAISAL\Desktop\disaster\com-theta-gesture\src\test\resources
[INFO] 
[INFO] --- maven-compiler-plugin:2.3.2:testCompile (default-testCompile) @ com-theta-gesture ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-surefire-plugin:2.12.4:test (default-test) @ com-theta-gesture ---
[WARNING] The POM for org.apache.maven:maven-plugin-api:jar:2.0.9 is invalid, transitive dependencies (if any) will not be available, enable debug logging for more details
[WARNING] The POM for org.apache.maven:maven-artifact:jar:2.0.9 is invalid, transitive dependencies (if any) will not be available, enable debug logging for more details
[WARNING] The POM for org.apache.maven:maven-project:jar:2.0.9 is invalid, transitive dependencies (if any) will not be available, enable debug logging for more details
[WARNING] The POM for org.apache.maven:maven-core:jar:2.0.9 is invalid, transitive dependencies (if any) will not be available, enable debug logging for more details
[WARNING] The POM for org.apache.maven:maven-toolchain:jar:2.0.9 is invalid, transitive dependencies (if any) will not be available, enable debug logging for more details
[INFO] Surefire report directory: C:\Users\FAISAL\Desktop\disaster\com-theta-gesture\target\surefire-reports
[INFO] Using configured provider org.apache.maven.surefire.junitcore.JUnitCoreProvider

-------------------------------------------------------
 T E S T S
-------------------------------------------------------
Concurrency config is parallel='none', perCoreThreadCount=true, threadCount=2, useUnlimitedThreads=false
Running com.theta.gesture.AppTest
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.011 sec
Running com.theta.gesture.ActorTest
Tests run: 1, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 1.562 sec <<< FAILURE!
testWorkerActor(com.theta.gesture.ActorTest)  Time elapsed: 0.002 sec  <<< ERROR!
java.lang.ClassCastException: akka.testkit.TestActor$NullMessage$ cannot be cast to com.result.gesture.Result
    at com.theta.gesture.ActorTest.testWorkerActor(ActorTest.java:64)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:76)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
    at org.junit.runners.Suite.runChild(Suite.java:128)
    at org.junit.runners.Suite.runChild(Suite.java:24)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
    at org.junit.runner.JUnitCore.run(JUnitCore.java:157)
    at org.junit.runner.JUnitCore.run(JUnitCore.java:136)
    at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.execute(JUnitCoreWrapper.java:62)
    at org.apache.maven.surefire.junitcore.JUnitCoreProvider.invoke(JUnitCoreProvider.java:139)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray(ReflectionUtils.java:189)
    at org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:165)
    at org.apache.maven.surefire.booter.ProviderFactory.invokeProvider(ProviderFactory.java:85)
    at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:115)
    at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:75)

Results :

Tests in error: 
  testWorkerActor(com.theta.gesture.ActorTest): akka.testkit.TestActor$NullMessage$ cannot be cast to com.result.gesture.Result

Tests run: 2, Failures: 0, Errors: 1, Skipped: 0

[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 6.098s
[INFO] Finished at: Tue Oct 23 05:24:12 BST 2012
[INFO] Final Memory: 16M/106M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-surefire-plugin:2.12.4:test (default-test) on project com-theta-gesture: There are test failures.
[ERROR] 
[ERROR] Please refer to C:\Users\FAISAL\Desktop\disaster\com-theta-gesture\target\surefire-reports for the individual test results.
[ERROR] -> [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException 
```

我是否必须将任何配置添加到 application.conf 文件

希望有人能帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T10:53:17.520

在你的`ActorTest`，尝试更换

```
TestActor.Message message = tProbe.lastMessage();
Result result = (Result)message; 
```

有了这个：

```
tProbe.expectMsgClass(Result.class);     
//TestActor.Message message = tProbe.lastMessage();
//Result result = (Result) message.msg();           <- Important 
```

然后改成`WorkerActor`这样：

```
if(msg instanceof GesturePoints) { 
    GesturePoints message = (GesturePoints) msg;
    //Result rslt = initial_Theta(message);
    //getSender().tell(rslt);
    getSender().tell(new Result());
} 
```

那应该会过去的。这将验证`WorkerActor`发送回正确类型的消息（例如 a `Result`）。

下一步是取消注释您的调用`initial_Theta()`并找出为什么没有`Result`正确填充。

# json - Junit WebSource 类型（Registration.class，register）抛出 ClientHandlerException

> ID：13023576
> 
> 赞同：0
> 
> 时间：2012-10-23T04:27:33.433
> 
> 标签：json, jakarta-ee, junit, jersey

我正在尝试使用 Junit 客户端测试我的基于 JSON 的 Web 服务。`no-arg default constructor' on my request object and its super class (AMessageStrategy). When I add the`由于没有无参数默认构造函数，我得到一个 ClientHandlerException没有`to both of them the server throws a exception`为类型 [简单类型，类 javax.xml.bind.JAXBElement] 找到合适的构造函数：`。这让我陷入了困境。

理想情况下，我不想/不需要拥有`no-arg default constructor`. 问题是，有没有办法解决它。我只需要将对象序列化为 json。该对象有 2 个主要字段，一个消息 ID 和消息数据。消息数据是一个pojo。

我在请求类上添加了@XmlRootElement（尽管字段上没有注释）。

请指教，我有点卡住了。我是 Java EE 的新手。让我知道是否需要更多信息。

```
com.sun.jersey.api.client.ClientHandlerException: javax.ws.rs.WebApplicationException: com.sun.xml.internal.bind.v2.runtime.IllegalAnnotationsException: 2 counts of IllegalAnnotationExceptions
com.mcruiseon.common.message.request.RegistrationRequest does not have a no-arg default constructor.
    this problem is related to the following location:
        at com.mcruiseon.common.message.request.RegistrationRequest
com.mcruiseon.common.message.AMessageStrategy does not have a no-arg default constructor.
    this problem is related to the following location:
        at com.mcruiseon.common.message.AMessageStrategy
        at com.mcruiseon.common.message.request.RegistrationRequest

    at com.sun.jersey.client.urlconnection.URLConnectionClientHandler.handle(URLConnectionClientHandler.java:151)
    at com.sun.jersey.api.client.Client.handle(Client.java:648)
    at com.sun.jersey.api.client.WebResource.handle(WebResource.java:680)
    at com.sun.jersey.api.client.WebResource.access$200(WebResource.java:74)
    at com.sun.jersey.api.client.WebResource$Builder.post(WebResource.java:568)
    at test.carpool4all.Registration.testPost(Registration.java:74) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T20:13:31.577

RegistrationRequest 不是 POJO。理想情况下，它应该是一个 POJO 才能工作。

# mysql - mysql统计热门帖子投票

> ID：13023577
> 
> 赞同：0
> 
> 时间：2012-10-23T04:27:50.493
> 
> 标签：mysql

嗨，我有一个 Mysql 表，如下所示，

```
post_id  | user_id  |   status | date_created
  2          2         funny     20121022120627
  2          3         lame      20121023120627
  3          1         useful    20121023120627
  3          3         lame      20121023120627
  3          4         useful    20121023120627 
```

现在我需要一个关于根据状态计数获取热门帖子的 post_id 的查询。表示当天有很多状态的帖子。示例`post_id = 3`会很受欢迎，因为它有 3 个状态投票，所以我可以在帖子表上找到这个帖子的所有者。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T04:31:55.720

试试这个，

```
SELECT post_id
FROM tableName
GROUP BY post_ID
HAVING COUNT(*) = 
(
    SELECT MAX(x.counts)
    FROM
    (
        SELECT post_id, COUNT(*) counts
        FROM tableName
        GROUP BY post_id
    ) x
) 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!2/07975/3)

基本上，我不建议在这里使用limit，因为某些人有可能`Post_ID`拥有相同的票数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T04:42:21.787

```
select t1.post_id,max(t1.countstatus) 
from 
(select post_id,count(*) as countstatus 
  from table_name
   where status='useful' group by post_id)as t1 
 group by t1.id ; 
```

试试这个我假设大众投票意味着状态='有用'

# email - 是否有可能使用 gmail smtp 配置在 sharepoint 2010 中发送邮件

> ID：13023579
> 
> 赞同：0
> 
> 时间：2012-10-23T04:27:56.647
> 
> 标签：email, sharepoint-2010, sharepoint-workflow

是否有可能使用 gmail smtp 配置在 sharepoint 2010 中发送邮件。

我尝试使用.net。它正在成功运行.. 但是我在 sharepoint 2010 中需要这个，而在 sharepoint 2010 的中央管理中没有使用 SMTP 配置

我尝试使用事件处理程序，但我不能

提前致谢.....

```
 //SmtpClient serverobj = new SmtpClient();
            //serverobj.UseDefaultCredentials = true;
            //serverobj.Credentials = new NetworkCredential("xxx@gmail.com", "Password");
            //serverobj.Port = 587;
            //serverobj.Host = "Smtp.gmail.com";
            //serverobj.EnableSsl = true;
            //MailMessage msgobj = new MailMessage();
            //msgobj.From = new MailAddress("xxx@gmail.com", Subject ", System.Text.Encoding.UTF8);
            //msgobj.To.Add("yyy@gmail.com.com");
            //msgobj.Subject = "New Application Request";
            //msgobj.Body = "Hi this is test mail";
            //serverobj.Send(msgobj); 
```

# oracle - 通过查询填充的 Oracle 嵌套表

> ID：13023587
> 
> 赞同：1
> 
> 时间：2012-10-23T04:28:49.343
> 
> 标签：oracle, user-defined-types, nested-table

是否可以通过查询自动填充嵌套表？也许通过物化视图？像铁

```
CREATE OR REPLACE TYPE also_bought_type AS OBJECT (
also_bought_movie REF MOVIE_TYPE)
/
CREATE OR REPLACE TYPE also_bought_tab_type
AS TABLE OF also_bought_type
/
CREATE OR REPLACE TYPE movie_type AS OBJECT (
title   VARCHAR2(64),
also_bought    also_bought_tab_type)
/
create table movie of movie_type 
object id system generated
/ 
```

现在also_bought_type（嵌套表）应该从辅助表中填充：

```
create or replace TYPE purchases_type as object
(
movie_1 REF MOVIE_TYPE,
movie_2 REF MOVIE_TYPE,
purchases number
)
/
create table purchases of purchases_type
object id system generated
/ 
```

使用查询与购买该电影的其他电影进行检查。

# java - 使用仿射变换摆动放大

> ID：13023588
> 
> 赞同：2
> 
> 时间：2012-10-23T04:29:06.767
> 
> 标签：java, swing, zooming, scale, affinetransform

我正在使用 JAVA swing 进行我的个人项目。

该项目是关于在窗口上绘制地图。

![在此处输入图像描述](../Images/6fee304d46e6166c19942bbacd662e84.png)

该地图可使用仿射变换进行缩放。我在这里遇到的问题是，每当我放大或缩小地图时，地图也会移动，而不是放大/缩小屏幕中心的地图点

```
private void updateAT()
{
    Dimension d = panel.getSize();
    int panelW = d.width;
    int panelH = d.height;

    Rectangle2D r = regionList[0].get("Victoria").getShape().getBounds2D();

    scaleX = (panelW/r.getWidth()) * zoom;
    scaleY = (panelH/r.getHeight()) * zoom;

    AffineTransform goToOrigin = AffineTransform.getTranslateInstance(-r.getMinX(), -r.getMinY());

    AffineTransform pan = AffineTransform.getTranslateInstance(panX, panY);

    AffineTransform scaleAndFlip = AffineTransform.getScaleInstance(scaleX, -scaleY);

    //AffineTransform mirror_y = new AffineTransform(1, 0, 0, -1, 0, panelH);

    AffineTransform centre = AffineTransform.getTranslateInstance(panelW/2, panelH/2);
    centre.translate(-((r.getWidth()*scaleX)/2), ((r.getHeight()*scaleY)/2));

    world2pixel.setToIdentity();
    //world2pixel.concatenate(mirror_y);
    world2pixel.concatenate(pan);
    world2pixel.concatenate(centre);
    world2pixel.concatenate(scaleAndFlip);
    world2pixel.concatenate(goToOrigin);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T13:42:45.043

此[示例](https://stackoverflow.com/a/5594424/230513)`Shape`将 a , `p3`,居中并缩放

*   将对称点平移到原点，

*   缩放`Polygon`然后

*   翻译回面板的中心。

请注意，串联操作是在声明顺序的（明显）相反的情况下执行的，如此处所讨论[的](https://stackoverflow.com/a/3420651/230513)。

```
at.setToIdentity();
at.translate(w / 2, h / 2);
at.scale(scale, scale);
at.translate(-p3x[5] + 10, -p3y[5]); 
```

# .net - 像 msbuild.exe 这样的 .NET Framework 3.0 工具在哪里？

> ID：13023589
> 
> 赞同：2
> 
> 时间：2012-10-23T04:29:11.173
> 
> 标签：.net, msbuild, .net-3.0

当我枚举 Microsoft.NET Framework 目录时，没有任何适用于 .NET v3.0 的目录。

```
PS> Resolve-Path c:\windows\Microsoft.NET\Framework\*\msbuild.exe

Path
----
C:\windows\Microsoft.NET\Framework\v2.0.50727\MSBuild.exe
C:\windows\Microsoft.NET\Framework\v3.5\MSBuild.exe
C:\windows\Microsoft.NET\Framework\v4.0.30319\MSBuild.exe 
```

这些工具是 .NET v2.0 安装的一部分，而 .NET v3.0 是一个简单的附加组件吗？还是 .NET v3.5 取代了旧工具？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T04:32:45.817

.net 3 和 3.5 都在 .net 2.0 clr 下运行，基本上都是功能包。.net 4 在新的 clr 下运行，我认为这意味着不同版本的 msbuild 等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T04:52:58.350

引用这个[MSDN](http://msdn.microsoft.com/en-us/library/bb822049.aspx)网站：

> 此版本 (3.0) 本质上是 .NET Framework 2.0，增加了 Windows Presentation Foundation (WPF)、Windows Communications Foundation (WCF)、Windows Workflow Foundation (WF) 和 CardSpace。它已更新为 SP1 和 SP2。

我猜是因为没有添加新功能，也没有创建新版本的 CLR，即使相同的 VS2005 版本可以构建 .net 3.0 项目，相同的用于 .Net v2.0 的 MSBuild 也适用于 .Net v3.0。

另一方面，在 v3.5 中，发布了新版本的 VS（2008），并添加了功能（LINQ）：

> 添加了新功能，例如启用 AJAX 的网站和 LINQ。SP1 更新添加了动态数据和一小组附加增强功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T05:49:37.883

基本上 .net 框架版本和 CLR 版本是不同的，.net 版本在 CRL 版本的引擎盖下运行。您可以在创建新网站或更改应用程序池的 .net 框架版本时看到差异，您可以看到列表显示的版本少于您认为已安装的版本。他们喜欢在 1.0、2.0 和 4.0 以下。

![在此处输入图像描述](../Images/cfdc1a95a07f114466d424035836e903.png)

**对于 .net framework 1.x，CRL 版本是 1，对于 2.0 和 3.X .Net framework，CLR 版本是 2.0，对于 .net framework 4.x，CLR 版本是 4.0**

在这里更好地[解释](http://vinaykumarchella.wordpress.com/2012/03/31/microsoft-net-framework-versions-history/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T07:28:41.080

其背后的原因是 .NET 3.0 到来时无需更新 MSBuild.exe。在这种情况下，重用 .NET 2 MSBuild 是明智的。

MSBuild.exe 3.5 引入了许多关键更新，

[http://blogs.msdn.com/b/msbuild/archive/2007/11/22/msbuild-3-5-orcas-has-now-shipped.aspx](http://blogs.msdn.com/b/msbuild/archive/2007/11/22/msbuild-3-5-orcas-has-now-shipped.aspx)

> ，但主要特点是：
> 
> -- 多处理器支持 -- 当前仅命令行，只需使用 /m 开关构建您的解决方案。包括针对多进程构建优化的新改进控制台记录器
> 
> -- 多目标支持 -- 如果您愿意，可以使用 MSBuild 3.5 构建面向 .NET 2.0 的项目；在树或解决方案中混合目标
> 
> ——性能改进。您应该会看到完整构建的改进，尤其是增量构建。我们已经看到一些更大的增量构建方案的速度翻了一番。在 Vista 上，由于 SuperFetch，我们看到了更大的改进。这一切都没有启用多进程！
> 
> 还有几个小功能
> 
> -- ItemDefinitionGroups -- 项目的“类型”。
> 
> -- 目标内部的 PropertyGroup/ItemGroup 就像外部一样 -- 不再有不可读的 CreateItem/CreateProperty
> 
> -- 能够在构建过程中从列表中删除项目并修改项目元数据 -- 不再“晃动”到另一个列表中

因此，我们看到 .NET 3.5 附带了一个新的 MSBuild。这也适用于 .NET 4 和 .NET 4.5，其中 MSBuild 收到了进一步的更新，

[http://msdn.microsoft.com/en-us/library/ee240939(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/ee240939(v=vs.100).aspx)

[http://msdn.microsoft.com/en-us/library/hh162058.aspx](http://msdn.microsoft.com/en-us/library/hh162058.aspx)

# python - 将“None”的参数值与“None”的默认参数值区分开来

> ID：13023593
> 
> 赞同：1
> 
> 时间：2012-10-23T04:30:13.667
> 
> 标签：python, function, python-3.x

> **可能重复：**
> [有什么方法可以知道参数的值是默认值还是用户指定的值？](https://stackoverflow.com/questions/11251119/is-there-any-way-to-know-if-the-value-of-an-argument-is-the-default-vs-user-spe)
> [python - 返回一个默认值](https://stackoverflow.com/questions/12265695/python-returning-a-default-value)

在 Python 中，将`None`其用作默认参数值是标准做法。

`None`但是，如果客户端代码可以用作合法的参数值，这种惯用用法就不能很好地工作。在这种情况下，函数无法判断客户端代码是否省略了参数，或者是否显式传递了`None`. 这不好，除非（幸运地）函数的行为在两种情况下应该是相同的。

什么是好的解决方案？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T04:33:37.097

```
_NOT_SET = object()

def some_function(some_arg=_NOT_SET):
    if some_arg is _NOT_SET:
        # ... 
```

任何类实例都有一个`is`可以区分的唯一标识。

# perl - 在 Perl 中编码时安全地执行系统命令

> ID：13023594
> 
> 赞同：2
> 
> 时间：2012-10-23T04:30:24.037
> 
> 标签：perl, security

在 Perl 中编码时真的应该使用外部命令吗？我看到了它的几个缺点。它不是独立于系统的，还可能存在安全风险。你怎么看？如果没有办法，您必须使用 Perl 的 shell 命令，那么执行该特定命令的最安全方法是什么（例如检查 pid、uid 等）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T05:18:22.580

这取决于在 Perl 中复制功能的难度。如果我需要`m4`在某些东西上运行宏处理器，我不会考虑自己尝试在 Perl 中复制该功能，并且由于[http://search.cpan.org/](http://search.cpan.org/)上没有看起来合适的模块，它会出现其他人同意我的观点。在这种情况下，使用外部程序是明智的。另一方面，如果我需要读取目录的内容，那么在 Perl 中结合使用`readdir()`et al plus `stat()`or`lstat()`比使用`ls`.

如果您需要执行命令，请仔细考虑如何调用它们。特别是，您可能希望避免 shell 解释参数，因此请使用数组形式[`system`](http://perldoc.perl.org/functions/system.html)（另请参阅[`exec`](http://perldoc.perl.org/functions/exec.html)）等，而不是命令加参数的单个字符串（这意味着 shell 用于处理命令行） .

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T05:19:46.587

执行外部命令可能很昂贵，因为它涉及派生新进程并在需要时监视其输出。

可能更重要的是，如果外部进程因任何原因失败，可能很难通过您的脚本来理解发生了什么。更糟糕的是，令人惊讶的是，外部进程经常会永远卡住，您的脚本也会如此。您可以使用特殊技巧，例如打开管道并在循环中观察输出，但这本身很容易出错。

Perl 非常有能力做很多事情。所以，如果你坚持只使用 Perl 原生结构和模块来完成你的任务，不仅它会更快，因为你从不分叉，而且通过查看由库例程。当然，它会自动移植到不同的平台。

如果您的脚本在提升的权限下运行（如 root 或在 sudo 下），您应该非常小心您执行的外部程序。确保基本安全性的简单方法之一是始终按全名指定命令，例如 /usr/bin/grep （但仍要三思而后行，只需通过 Perl 本身执行 grep！）。但是，如果攻击者使用 LD_PRELOAD 机制注入恶意共享库，即使这样也可能还不够。

如果您愿意非常安全，建议通过使用 -T 标志来使用污染检查，如下所示：

```
#!/usr/bin/perl -T 
```

如果您的脚本被确定为具有不同的真实有效的用户或组 ID，Perl 也会自动启用污点标志。

污染模式将严重限制您在没有 Perl 抱怨的情况下执行许多操作（如 system() 调用）的能力 - 更多信息请参见[http://perldoc.perl.org/perlsec.html#Taint-mode](http://perldoc.perl.org/perlsec.html#Taint-mode)，但它会给您更高的安全信心。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T07:54:18.157

> 在 Perl 中编码时真的应该使用外部命令吗？

这个问题没有单一的答案。这一切都取决于您在 Perl 的广泛潜在用途中所做的工作。

你是在本地机器上使用 Perl 作为一个美化的 shell 脚本，还是只是想找到一个快速而肮脏的解决方案来解决你的问题？在这种情况下，如果这是完成任务的最简单方法，那么运行系统命令就很有意义。安全性和速度不是那么重要；重要的是快速编码的能力。

另一方面，您正在编写生产程序吗？在这种情况下，您需要安全、可移植、高效的代码。通常最好在 Perl 中编写功能（或使用模块），而不是调用外部程序。至少，您应该认真考虑一下优点和缺点。

# bash - sed/awk - 在跨越多行的模式之间打印文本

> ID：13023595
> 
> 赞同：8
> 
> 时间：2012-10-23T04:30:27.780
> 
> 标签：bash, sed, awk

我是脚本新手，正在尝试学习如何提取存在于两种不同模式之间的任何文本。但是，我仍然无法弄清楚如何在以下场景中提取两种模式之间的文本：

如果我有我的**输入文件**读取：

```
Hi I would like
to print text
between these 
patterns 
```

我的预期**输出**是这样的：

```
I would like
to print text
between these 
```

即我的第一个搜索模式是“Hi”并跳过此模式，但打印匹配模式后同一行中存在的所有内容。我的第二个搜索模式是“模式”，我想完全避免打印这一行或任何超出的行那。

我尝试了以下方法：

```
sed -n '/Hi/,/patterns/p' test.txt 
```

[输出]

```
Hi I would like
to print text
between these 
patterns 
```

接下来，我尝试了：

```
`awk ' /'"Hi"'/ {flag=1;next} /'"pattern"'/{flag=0} flag { print }'` test.txt 
```

[输出]

```
to print text
between these 
```

有人可以帮助我确定如何实现这一目标吗？提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-23T04:37:02.933

你有正确的想法，一个迷你状态机，`awk`但你需要根据以下成绩单进行一些轻微的修改：

```
pax> echo 'Hi I would like
to print text
between these 
patterns ' | awk '
    /patterns/ { echo = 0 }
    /Hi /      { gsub("^.*Hi ", "", $0); echo = 1 }
               { if (echo == 1) { print } }' 
```

或者，以压缩形式：

```
awk '/patterns/{e=0}/Hi /{gsub("^.*Hi ","",$0);e=1}{if(e==1){print}}' 
```

它的输出是：

```
I would like
to print text
between these 
```

按照要求。

其工作方式如下。该`echo`变量最初`0`意味着不会发生回声。

依次检查每一行。如果它包含`patterns`，则禁用回显。

如果它包含`Hi`后跟一个空格，则回显被打开*并* `gsub`用于修改该行以摆脱`Hi`.

`echo`然后，无论如何，当标志打开时，该行（可能已修改）会被回显。

现在，将会有一些边缘情况，例如：

*   包含两次`Hi`;的行 或者
*   *在 .之前*包含某些内容的行`patterns`。

您还没有指定应该如何处理它们，所以我没有打扰，但基本概念应该是相同的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T04:36:53.747

更新了删除“模式”行的解决方案：

```
$ sed -n '/^Hi/,/patterns/{s/^Hi //;/^patterns/d;p;}' file
I would like
to print text
between these 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-23T07:00:41.247

这可能对您有用（GNU sed）：

```
sed '/Hi /!d;s//\n/;s/.*\n//;ta;:a;s/patterns.*$//;tb;$!{n;ba};:b;/^$/d' file 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-23T18:11:33.690

只需在行首 find+replace Hi 时设置一个标志 (f)，找到模式时清除它，然后在设置标志时调用默认打印：

```
$ awk 'sub(/^Hi /,""){f=1} /patterns/{f=0} f'  file
I would like
to print text
between these 
```

# php - PHP：重用 JQGrid 响应以在 DataTable 中显示数据

> ID：13023596
> 
> 赞同：0
> 
> 时间：2012-10-23T04:30:29.223
> 
> 标签：php, datatable

首先，我在我的应用程序中使用 JQGrid。将我的 CSS 更改为 Bootstrap CSS 之后。我必须使用数据表。我想重用我的控制器页面，这些页面进行查询以在 JQGrid 中显示数据。

这是我的控制器页面。

```
<?php

require_once("JsonHeader.php");
$at = $_SESSION['abc'];
$start_date = $_SESSION['start_date'];
$end_date = $_SESSION['end_date'];
if ($_SESSION['list'] == '-1') {
    $user_query = "";
} else {
    $user_list = $_SESSION['list'];
    $user_query = " AND a.user_id IN ($list)";
}
$start_date = $_SESSION['start_date'];
$end_date = $_SESSION['end_date'];

if ($_SESSION['list'] == '-1') {
    $user_query = "";
} else {
    $user_list = $_SESSION['list'];
    $user_query = " AND a.user_id IN ($list)";
}

$page = $_GET['page']; // get the requested page
$limit = $_GET['rows']; // get how many rows we want to have into the grid 
$sidx = $_GET['sidx']; // get index row - i.e. user click to sort
$sord = $_GET['sord']; // get the direction 
$qtype = '';  // Search column
$query = '';  // Search string
if (isset($_GET['searchField'])) {
    $qtype = mysql_real_escape_string($_GET['searchField']);
}
if (isset($_GET['searchString'])) {
    $query = mysql_real_escape_string($_GET['searchString']);
}
if (isset($_GET['searchOper'])) {
    switch ($_GET['searchOper']) {
        case 'eq':
            $oper = '=';
            $query = mysql_real_escape_string($_GET['searchString']);
            break;
        case 'ne':
            $oper = '!=';
            $query = mysql_real_escape_string($_GET['searchString']);
            break;
        case 'cn':
            $oper = 'like';
            $query = "%".mysql_real_escape_string($_GET['searchString'])."%";
            break;
    }
}
$searchSql1 = ($qtype != '' && $query != '') ? "and $qtype $oper '$query'" : '';

if (!$sidx)
    $sidx = 1; // connect to the database 
$result = mysql_query(sprintf("SELECT  ae.col1,ae.col2,ae.col3, ae.col4,ae.col5,ae.col6,ae.col7,a.col8,a.col9,r.col10,p.col11
                           FROM $tablename3 ae,$tableName a, $tablename1 p, $tablename2 r
                           WHERE ae.col1=$at  $searchSql1
                           AND a.col1 = $at
                           AND a.col5=r.col5
                           AND a.col6=p.col6
                            $user_query"));
$row = mysql_num_rows($result);
$count = $row;
if ($count > 0) {
    $total_pages = ceil($count / $limit);
} else {
    $total_pages = 0;
}
if ($page > $total_pages)
    $page = $total_pages; $start = $limit * $page - $limit; // do not put 
$limit * ($page - 1);
$SQL = sprintf("SELECT  ae.col1,ae.col2,ae.col3, ae.col4,ae.col5,ae.col6,ae.col7,a.col8,a.col9,r.col10,p.col11
                           FROM $tablename3 ae,$tableName a, $tablename1 p, $tablename2 r
                           WHERE ae.col1=$at  $searchSql1
                           AND a.col1 = $at
                           AND a.col5=r.col5
                           AND a.col6=p.col6
                            $query");

$result = mysql_query($SQL) or die("Couldn t execute query." . mysql_error());
$responce = new stdClass();
$responce->page = new stdClass();
$responce->total = new stdClass();
$responce->records = new stdClass();

$responce->page = $page;
$responce->total = $total_pages;
$responce->records = $count;
$i = 0;
while ($row = mysql_fetch_array($result, MYSQL_ASSOC)) {

    $responce->rows[$i]['id'] = $row['col1'];
    $responce->rows[$i]['cell'] = array($row['col1'], $row['col2'], $row['col3'], $row['col4'], $row['col5'], $row['col6'], $time, $row['col7']);
    $i++;
}
echo json_encode($responce);
?> 
```

我怎样才能改变这个数据表？。请给我最好的方法...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T04:28:54.403

最后我找到了如何为 DataTable 恢复我的控制器页面。只需更改控制器页面中的 post 变量。喜欢

```
$_GET['page']; By $_REQUEST['sEcho']
$_GET['rows']; By $_REQUEST['iDisplayStart'],$_REQUEST['iDisplayLength']
$_GET['sord']; $_REQUEST['sSortDir_0']
$_GET['searchString']: $_GET['sSearch']: 

And some changes the json response like 
$ans['iTotalRecords'] = $count;
$ans['iTotalDisplayRecords'] = $count;
$ans['aaData'] = $aadata;

echo json_encode($ans); 
```

# java - 如何从远程机器上即时调试 Java servlet 过滤器（我使用的是 Eclipse 和 Apache Tomcat 5.5）

> ID：13023597
> 
> 赞同：2
> 
> 时间：2012-10-23T04:30:44.660
> 
> 标签：java, debugging, servlets, servlet-filters, remote-debugging

我在本地机器上编写了一个 Java servlet 过滤器，并将其部署为远程（机器）Web 服务器。不幸的是，尝试跟踪我的 JSP/servlet 引擎 Apache Tomcat 5.5 报告的错误非常困难且耗时。我不能一直写 System.out.println(...)、保存、部署、测试 JSP 页面等等。时间太长了 必须有更好、更快的方法。

是否可以远程调试 servlet 过滤器？我的本地机器上没有 Web 服务器，这就是我询问远程调试的原因。具体来说，我正在寻找一种方法来逐行调试 servlet 过滤器，因为它发生在远程 Web 服务器上。这样的方法存在吗？

或者，有没有比写入标准输出更好的方法。它花费的时间太长，我觉得这一定是一种更有效的调试 Java servlet 过滤器的方法。

注意：我使用 Eclipse 进行开发。

非常感谢您的帮助。

**更新**

谢谢大家的帮助。对此，我真的非常感激。

我将 JVM 参数添加到 Tomcat，重新启动 Tomcat。然后，在装有 Eclipse 的机器上，我在 Debug 配置中输入适当的信息，放入断点并进行测试。不幸的是，它没有用。在配置中，我将其保留为 Socket Attach，单击应用，就是这样。我按下调试按钮，它说连接被拒绝。我尝试了端口 8000 和 8001，但都没有工作。

让我解释一下我正在尝试做的事情，这可能会更好。

我有一个名为 login.jsp 的登录页面。在该页面上，是一个表单，其操作属性为 servlet/LoginServlet。当用户提交表单时，它会调用 servlet/LoginServlet，它映射到 web.xml 文件中的一个类。我们称这个类为 com.mysite.mypkg.classA。在 A 类中，它调用另一个名为 com.custom.mypkg.classB 的类的方法。我想在 B 类中放置一个断点。

因此，在 Eclipse 调试器中使用带有 login.jsp 页面的 url 不会调用它。我尝试使用 servlet/LoginServlet，但也没有用。

我应该为 URL 输入什么？或者，我要调试这种类型的设置吗？

谢谢你。

**更新 2**

[我在这里](http://jaykhimani.blogspot.com/2009/05/remote-debugging-java-applications.html)找到了这个网站，非常全面。我运行 netstat -a 并注意到调试端口未列出。Windows 防火墙已关闭，但可能有其他东西阻塞了端口，谁知道呢。无论如何，我将 VM 参数放在这里，但它不起作用。

![Tomcat 配置](../Images/271e85f0dd1aaebdaa1fdb91eb686425.png)

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T05:01:19.903

对于远程调试，您需要以调试模式启动服务器。有几种方法可以做到这一点。1 > 使用启动服务器

> catinlina.bat jpda 开始

2> 给tomcat java进程添加jvm参数

> -Xdebug -Xrunjdwp:transport=dt_socket,address=8000,server=y,suspend=n

以调试模式启动服务器后，您需要在 eclipse 中更改项目的透视图以进行调试。然后转到运行-> 调试配置。双击远程java应用程序并输入详细信息，例如

> 远程 IP 地址调试端口。默认的 tomcat 调试端口是 8000。如果使用 jvm 参数，请使用 jvm 参数中提到的端口。单击应用

转到要调试的 java 文件。在源代码中放置一个断点并运行您要测试的场景（例如使用浏览器的 Web 应用程序）

此外，请确保 java 文件中的代码与部署在远程服务器上的代码同步。

*调试愉快！！！*

和平。圣克劳特

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T04:38:34.483

您可以将调试器附加到正在运行的 Tomcat 实例，前提是您在启动它时为其提供了正确的命令行选项。

[Tomcat 开发 Wiki](http://wiki.apache.org/tomcat/FAQ/Developing)解释了如何执行此操作，并且作为奖励为您提供了有关如何设置以从 Eclipse 或 NetBeans IDE 进行调试的说明。

当然，将调试器附加到正在运行的 Tomcat 对安全性和性能都有影响^*。

[* 以及 OH&S 问题 - 如果您在错误的 tomcat 上尝试此操作，您可能会被严重划伤...]

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T04:45:05.187

您应该使用以下启动参数运行远程 tomcat：

```
bin/catalina.bat jpda start 
```

然后在本地机器上的 Eclipse 中运行 -> 调试配置 -> 远程 Java 应用程序，在此处创建新配置，使用远程机器的 IP 作为 a `host`，使用 8000 作为`port`那里

运行此配置并使用 Eclipse 中的断点进行调试

# html - 在joomla中弹出

> ID：13023602
> 
> 赞同：0
> 
> 时间：2012-10-23T04:31:51.483
> 
> 标签：html, joomla

我一直在 Joomla CMS 中做弹出功能。我已经使用了 html5 中使用的功能，在 Joomla 中使用 JQuery mobile 进行弹出。我无法在 Joomla 1.5 中获得任何弹出窗口。任何人都可以帮忙。我已经尝试了很多插件。任何opne可以帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T06:46:16.023

使用此插件，您可以在弹出窗口中播放视频和图像 [点击这里](http://demo.rockettheme.com/extensions/?extension=rokbox)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T08:39:20.490

对于 Joomla 1.5 用户，将以下内容添加到模板的最顶部：

要打开模式窗口，请使用格式为您的文本或图像的链接

而已。非常适合图像弹出窗口。我想知道是否可以从文章中添加文本内容。在分析了管理区域的 URL 后，我想出了一个看起来像这样的链接：

```
<a href="/index.php?option=com_name&id=##&tmpl=component&task=preview" class="modal"  rel="{handler: 'iframe', size: {x: 500, y: 400}}" >Text link here</a> 
```

用文章 ID 替换 ## 字符。

[阅读更多](http://forum.joomla.org/viewtopic.php?p=1392625)

控制器

```
function preview()
{

        $view               = & $this->getView('viewname', 'html');  

        $view->setModel($model, true);
        $view->assignRef('data', $data); //whatever the data you want
        $view->display($tpl = null);

} 
```

# c# - 通过访问控制启用表单中的按钮

> ID：13023605
> 
> 赞同：1
> 
> 时间：2012-10-23T04:31:58.147
> 
> 标签：c#, winforms

> **可能重复：**
> [从用户控件获取对父控件的访问权限 - C#](https://stackoverflow.com/questions/8820606/get-access-to-parent-control-from-user-control-c-sharp)

我有`btnMessage`我的表单`Main`，我也有用户控制（`uc`）。

当我单击`btnMessage`时，它会打开`uc`并且还会生成`btnMessage.enabled = false`. 在`uc`中，有一个名为 的按钮`btnExecute`。

我想要的是，当我点击`btnExecute`in时`uc`，表单将被禁用。我怎么能做到这一点？`btnMessage``Main`

这是更新代码：

我正在使用函数`main.cs`

```
 public Main()
    {
        InitializeComponent();
        formFunctionPointer += new functioncall(buttonHideorEnabled);
        ucMessageTarget.userFunctionPointer = formFunctionPointer;
    }

    public delegate void functioncall(bool _status);

    private event functioncall formFunctionPointer;

    public void buttonHideorEnabled(bool _status)
    {
        btnMessageTarget.Enabled = _status;
    } 
```

并在`uc.cs`：

```
 public static string agentName = UtilitiesToolkit.agentMessageTarget;
    public static string strn;

    public UcMessageTarget(string str)
    {
        InitializeComponent();
        strn = str;
    }

    public Delegate userControlPointer;
    public Delegate userFunctionPointer;
    private void btnExecute_Click(object sender, EventArgs e)
    {
       btnExecute.enabled = false;
       userFunctionPointer.DynamicInvoke(false);
       //I want btnMessage in Main form also disabled, please tell me how
    } 
```

但是，仍然没有工作。当我编译时，我在 main 中有错误，在这一行：

```
 public Main()
    {
        InitializeComponent();
        formFunctionPointer += new functioncall(buttonHideorEnabled);
        ucMessageTarget.userFunctionPointer = formFunctionPointer;
    } 
```

说，那个

> *对象引用未设置为对象实例（在 ucMessageTarget.userFunctionPointer = formFunctionPointer; 中）。*

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T04:41:59.980

您可以在代码隐藏中以编程方式订阅事件处理程序，因此为“子”表单的按钮添加一个到“父”表单：

```
uc.btnExecute.Click += new EventHandler(name_of_method_to_handle_click_event); 
```

唯一的要求是控件必须`public`使父窗体可以访问它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T04:35:39.220

我宁愿做的是从主窗体监听的用户控件中引发一个事件，然后禁用此事件处理程序中的按钮。

类似于[VB 和 C# 中的用户控制事件](http://msmvps.com/blogs/deborahk/archive/2009/07/22/user-control-events-in-vb-and-c.aspx)

这将避免用户控件必须“了解”有关调用者（父窗体）的任何信息。

在 SO 上搜索一下，您会发现很多从用户控件引发事件的示例。

# javascript - Ckeditor [IE] 中的虚拟（重复）节点

> ID：13023608
> 
> 赞同：1
> 
> 时间：2012-10-23T04:32:05.383
> 
> 标签：javascript, internet-explorer, duplicates, ckeditor

在 CKEDITOR 文档中，我有一个名为**User_Image的节点**

```
<User_Image><sometags><sometags>sometext<sometags>sometext</sometags></sometags></sometags></User_Image> 
```

我存储在变量 Uimage 中的 User_Image 节点

```
var Duimage=CKEDITOR.dom.element.createFromHtml(Uimage.getOuterHtml()); 
```

现在我刚刚创建了（虚拟）重复节点，但是这段代码在除 IE 之外的所有浏览器中都支持我。在 IE 中缺少自定义标签。所有标签都是动态的。

然后我尝试以下：

```
var Duimage=ediInstance.document.createElement("User_Image");
 Uimage.appendTo(Duimage); 
```

但在这段代码中，如果我在 Duimage 中进行了更改，它也会影响 CKEDITOR 文档

获得重复节点的任何其他想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T11:37:53.593

首先 - 在此处检查我的答案[IE 在 sethtml 时丢失自定义标签](https://stackoverflow.com/questions/12967695/ie-browser-losing-ckeditor-element-sethtmluserdefinedtags-userdefinedtags/12969485#12969485)

其次 - 在 IE 中添加对自定义标签的支持后（请记住在将使用元素的文档中执行此操作），您可以使用元素的`clone()`方法。这是它的文档： http://nightly-v4.ckeditor.com/ckeditor_api/#! [/api/CKEDITOR.dom.node-method-clone](http://nightly-v4.ckeditor.com/ckeditor_api/#!/api/CKEDITOR.dom.node-method-clone)

# android - 如何在活动中刷新 ListView

> ID：13023609
> 
> 赞同：0
> 
> 时间：2012-10-23T04:32:35.623
> 
> 标签：android, listview

我有一个 ListActivity 类。它有一个按钮，可以根据其中一个属性对项目进行排序。但是碰巧该项目按其名称排序，但单击其原始位置的项目时将被执行。这是代码片段：

```
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.playlist);

        mButton = (ToggleButton) findViewById(R.id.mButton);

        ArrayList<myObject> ListData = new ArrayList<myObject>();

        back = (ImageButton) findViewById(R.id.backButton);
        label = (TextView) findViewById(R.id.likethis);
        label.setText("List");
        inputSearch = (EditText) findViewById(R.id.inputSearch);

        //Manager -- class that reads from the sdcard
        Manager plm = new Manager();

        // get all files from sdcard
        //getList() function of Manager class
        //List declared outside oncreate()
        this.List = plm.getList(); 

        final ArrayList<myObject> backUp = new ArrayList<myObject>(songsList);

        if(sortCalled) {
            mButton.setBackgroundDrawable(getResources().getDrawable(R.drawable.m_checked));
            mButton.setChecked(true);
            Collections.sort(List);

            notifyDataChanged(List);
        }
        else {
            mButton.setBackground(getResources().getDrawable(R.drawable.m_unchecked));
            mButton.setChecked(false);
            notifyDataChanged(backUp);
        }

        back.setOnClickListener(new OnClickListener(){

            @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub
                finish();
            }

        });

        inputSearch.addTextChangedListener(new TextWatcher(){

            @Override
            public void afterTextChanged(Editable arg0) {
                // TODO Auto-generated method stub
                adapter.notifyDataSetChanged();
            }

            @Override
            public void beforeTextChanged(CharSequence s, int start, int count,
                    int after) {
                // TODO Auto-generated method stub

            }

            @Override 
            public void onTextChanged(CharSequence s, int start, int before,
                    int count) {
                // TODO Auto-generated method stub
                //ArrayList <Song> temp;
                ((SimpleAdapter) PlayListActivity.this.adapter).getFilter().filter(s, new Filter.FilterListener() {

                    public void onFilterComplete(int count) {
                        // TODO Auto-generated method stub
                        adapter.notifyDataSetChanged();
                    }
                });
                adapter.notifyDataSetChanged();

            }

        });

        mButton.setOnClickListener(new OnClickListener(){

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                if(mButton.isChecked()){
                    mButton.setBackgroundDrawable(getResources().getDrawable(R.drawable.m_checked));
                    Collections.sort(List);
                    sortCalled = true;
                    notifyDataChanged(List);
                }
                else{
                    sortCalled = false;
                    mButton.setBackgroundDrawable(getResources().getDrawable(R.drawable.m_unchecked));
                    notifyDataChanged(backUp);
                }
            }

        });
    }

    public void settingListAdapter(SimpleAdapter adapter){
        setListAdapter(adapter);
        ListView lv = getListView();
        // listening to single listitem click
        lv.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {
                // getting listitem index
                int Index = position;

                // Starting new intent
                Intent in = new Intent(getApplicationContext(),
                        MainActivity.class);
                // Sending Index to MainActivity
                in.putExtra("Index", Index);
                setResult(100, in);
                // Closing ListView
                finish();
            }
        });
    }

    public void notifyDataChanged(ArrayList<Song> songsList) {
        // TODO Auto-generated method stub
        setListAdapter(null);
        sortCalled = true;
        ArrayList<myObject> songsListData = new ArrayList<myObject>();

        for (int i = 0; i < songsList.size(); i++) {
            // creating new HashMap
            myObject ob = sList.get(i);

            // adding HashList to ArrayList
            ListData.add(ob);
        }

        ArrayList<HashMap<String, String>> array = new ArrayList<HashMap<String,String>>();
       // int j = 0;
        for(myObject i : ListData){
            HashMap<String, String> feed = new HashMap<String, String>();
            feed.put("Title", i.getTitle());
            array.add(feed);

        }
        BaseAdapter adapter1;
       // int i = 0;
        // Adding menuItems to ListView
         adapter1 = new SimpleAdapter(this, array,
                R.layout.list_item, new String[]{"Title" }, new int[] {
                        R.id.Title });

        setListAdapter(adapter1);
        adapter1.notifyDataSetChanged();

        ListView lv = getListView();
        // listening to single listitem click

        lv.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {
                // getting listitem index
                int Index = position;

                // Starting new intent
                Intent in = new Intent(getApplicationContext(),
                        MainActivity.class);
                // Sending songIndex to MainActivity
                in.putExtra("Index", Index);
                setResult(100, in);
                // Closing ListView
                finish();
            }
        }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T04:38:45.363

我认为你应该试试这个。当你对列表视图的数据进行排序时。它对我来说很完美

```
 adapter.notifyDataSetChanged(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T15:39:49.777

每次对适配器进行更改时，都应该在 UIThread 中调用 notifyDataSetChanged()

请查看[此视频](http://www.youtube.com/watch?v=wDBM6wVEO70&t=17m38s)以更好地了解 listView

**编辑**
对于 ArrayAdapter，notifyDataSetChanged 仅在您使用`add, insert, remove, and clear`Adapter 上的函数时才有效。

构造 ArrayAdapter 时，它保存对传入的 List 的引用。如果您要传入一个作为 Activity 成员的 List，然后更改该 Activity 成员，则 ArrayAdapter 仍然持有对原名单。Adapter 不知道你更改了 Activity 中的 List。

您的选择是：

使用 ArrayAdapter 的功能修改底层 List`(add, insert, remove, clear, etc.)` 用新的 List 数据重新创建 ArrayAdapter。（使用大量资源和垃圾收集。）创建您自己的从 BaseAdapter 和 ListAdapter 派生的类，允许更改基础 List 数据结构。每次更新列表时使用 notifyDataSetChanged。要在 UI 线程上调用它，请使用 Activity 的 runOnUiThread 方法。然后 notifyDataSetChanged 将起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T05:29:21.967

You could try the Adapter.notifyDataSetChanged() function. It might work.

If you are using a SimpleCursorAdapter, calling requery() on the cursor attached to the adapter will automatically refresh the adapter and attached view.

If it's BaseAdapter content changes, you call BaseAdapter.notifyDataSetChanged() which will tell the ListView to update itself.

In other words you only need to make the following tiny change:

```
public void setValue(Object newValue) {
     this.value = newValue;
     notifyDataSetChanged();
} 
```

Actually, since you're changing the state of an existing item (rather than adding new ones etc) then notifyDataSetInvalidated() would be a better choice.

# xslt - 获取 Umbraco 缩略图文件大小 - umbracoBytes XSLT

> ID：13023624
> 
> 赞同：1
> 
> 时间：2012-10-23T04:33:46.147
> 
> 标签：xslt, umbraco, thumbnails

我正在尝试获取 ImageGen 为图片库下载部分生成的缩略图 jpg 的文件大小。

我以前在 Umbraco 4.2 中做过，但我正在尝试更新我的 XSLT 并为 Umbraco 4.9 简化它

4.2版方法：

```
<xsl:value-of select="emint:GetFileSize(((memberGroupFunctions:GetFileSize(concat(substring-before($mediaNode/data [@alias='umbracoFile'],'.'), '_thumb_1200.jpg')) div 1024) div 1024))" /> 
```

我要为 4.9 版做什么：

```
<xsl:value-of select="emint:GetFileSize(((memberGroupFunctions:GetFileSize(concat(substring-before(umbraco.library:GetMedia($currentPage/imageGalleryPhoto, 'false')/umbracoFile,'.'), '_thumb_1200.jpg')) div 1024) div 1024))" /> 
```

我不明白为什么它不起作用。原始图像被上传到媒体部分，它被切割成各种尺寸，包括 1200 和 2400。然后使用媒体选择器数据类型在内容部分中选择原始图像。然后我将它和页面上的“拇指”版本显示为可下载的链接。该链接包括图像的宽度、高度和文件大小。我只是无法在“拇指”图像上获得文件大小！宽度和高度显示。但是“拇指”图像的 GetFileSize 会导致“解析 XSLT 文件时出错”错误。

```
<ul>
        <li>
            <a href="{concat(substring-before(umbraco.library:GetMedia($currentPage/imageGalleryPhoto, 'false')/umbracoFile,'.'), '_thumb_1200.jpg')}" title="Medium">
                Medium - <xsl:value-of select="emint:GetThumbailFileDimensionWidth(1200, umbraco.library:GetMedia($currentPage/imageGalleryPhoto, 'false')/umbracoHeight div 1, umbraco.library:GetMedia($currentPage/imageGalleryPhoto, 'false')/umbracoWidth div 1)"/> x <xsl:value-of select="emint:GetThumbailFileDimensionHeight(1200, umbraco.library:GetMedia($currentPage/imageGalleryPhoto, 'false')/umbracoHeight div 1, umbraco.library:GetMedia($currentPage/imageGalleryPhoto, 'false')/umbracoWidth div 1)"/> px
            <xsl:value-of select="emint:GetFileSize(((memberGroupFunctions:GetFileSize(concat(substring-before(umbraco.library:GetMedia($currentPage/imageGalleryPhoto, 'false')/umbracoFile,'.'), '_thumb_1200.jpg')) div 1024) div 1024))" />
            </a>

        </li>
        <li>
            <a href="{concat(substring-before(umbraco.library:GetMedia($currentPage/imageGalleryPhoto, 'false')/umbracoFile,'.'), '_thumb_2400.jpg')}" title="Large">
                Large - <xsl:value-of select="emint:GetThumbailFileDimensionWidth(2400, umbraco.library:GetMedia($currentPage/imageGalleryPhoto, 'false')/umbracoHeight div 1, umbraco.library:GetMedia($currentPage/imageGalleryPhoto, 'false')/umbracoWidth div 1)"/> x <xsl:value-of select="emint:GetThumbailFileDimensionHeight(2400, umbraco.library:GetMedia($currentPage/imageGalleryPhoto, 'false')/umbracoHeight div 1, umbraco.library:GetMedia($currentPage/imageGalleryPhoto, 'false')/umbracoWidth div 1)"/> px
                <xsl:value-of select="emint:GetFileSize((umbraco.library:GetMedia($currentPage/imageGalleryPhoto, 'false')/umbracoBytes div 1024) div 1024)" />
            </a>
        </li>
        <li>
            <a href="{umbraco.library:GetMedia($currentPage/imageGalleryPhoto, 'false')/umbracoFile}" title="Original File">
                Original File - <xsl:value-of select="umbraco.library:GetMedia($currentPage/imageGalleryPhoto, 'false')/umbracoWidth" /> x <xsl:value-of select="umbraco.library:GetMedia($currentPage/imageGalleryPhoto, 'false')/umbracoHeight" /> px
            - <xsl:value-of select="emint:GetFileSize((umbraco.library:GetMedia($currentPage/imageGalleryPhoto, 'false')/umbracoBytes div 1024) div 1024)" />
            </a>
        </li>
    </ul> 
```

下载列表应如何显示的示例：

*   中 - 1200 x 898 像素 - 225 KB
*   大 - 2400 x 1797 像素 - 777 KB
*   原始文件 - 6658 x 4984 像素 - 10.20 MB

这是我用于宽度、高度和文件大小转换的 C# 脚本：

```
<msxsl:script language="C#" implements-prefix="emint">
<![CDATA[public string GetExtension(string fileName)
  { 
  string[] terms = fileName.Split('.');
  if (terms.Length <= 0)
  {
  return string.Empty;
  }
  return terms[terms.Length -1];
  }

  public string GetFileName(string fileName)
  { 
  string[] terms = fileName.Split('/');
  if (terms.Length <= 0)
  {
  return string.Empty;
  }
  return terms[terms.Length -1];
  }

  public string GetFileSize(Decimal mbs)
  { 
  Decimal result = Decimal.Round(mbs, 2);
  if (result == 0)
  {
  result = mbs * 1024;
  return Decimal.Round(result, 2).ToString() + " KB";
  }
  return result.ToString() + " MB";
  } 

    public Decimal GetThumbailSizeRatio(Decimal thumbnailSize, Decimal height, Decimal width)
    {
        Decimal ratio;
        if (height >= width)
        {
            ratio = height / thumbnailSize;
        }
        else
        {
            ratio = width / thumbnailSize;
        }
        return ratio;
    }

    public string GetThumbailFileDimensionHeight(Decimal thumbnailSize, Decimal height, Decimal width)
    {
        Decimal ratio = GetThumbailSizeRatio(thumbnailSize, height, width);
        return Decimal.Round((height / ratio), 0).ToString();
    }

    public string GetThumbailFileDimensionWidth(Decimal thumbnailSize, Decimal height, Decimal width)
    {
        Decimal ratio = GetThumbailSizeRatio(thumbnailSize, height, width);
        return Decimal.Round((width/ ratio), 0).ToString();
    }   

  public string GetCentimeters(Decimal pix)
  {
  Decimal formula  = (decimal)0.026458333;
  Decimal result = pix * formula;
  return Decimal.Round(result,0).ToString();
  }]]> 
```

任何人都可以帮忙吗？

干杯，合资企业

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T15:28:18.840

可以使用[ImageGen](http://our.umbraco.org/projects/website-utilities/imagegen)生成图像吗？

如果是，您必须安装**ImageGenerator**，它是生成任何大小图像的非常有用的工具，您需要从***Packages的******Developer***部分安装在*Umbraco CMS*中。

 **此外，还有如何使用[ImageGen Documentation](http://our.umbraco.org/FileDownload?id=2030)的文档，

我希望这会有所帮助**

# sql - Oracle - PLS-00103：尝试创建 JOB 时遇到符号“END”

> ID：13023625
> 
> 赞同：1
> 
> 时间：2012-10-23T04:34:36.780
> 
> 标签：sql, oracle, oracle9i

我这里有一个问题，我已经有一个名为“SP_DEL_TOKEN”的存储过程，我想每天自动运行存储过程。

这是我完成这项工作的脚本

```
VAR jobno NUMBER;
BEGIN
DBMS_JOB.SUBMIT(:jobno, 'SP_DEL_TOKEN', SYSDATE, 'SYSDATE+1');
COMMIT;
END;
/ 
```

但是当我执行那个脚本时，我遇到了这个错误

```
ERROR at line 1:
ORA-06550: line 1, column 106:
PLS-00103: Encountered the symbol "END" when expecting one of the following:
:= . ( @ % ;
The symbol ";" was substituted for "END" to continue.
ORA-06512: at "SYS.DBMS_JOB", line 79
ORA-06512: at "SYS.DBMS_JOB", line 136
ORA-06512: at line 2 
```

请帮助我，谢谢你帮助我:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T05:19:16.420

您需要在“what”参数的末尾使用分号。使用`'SP_DEL_TOKEN;'`而不是`'SP_DEL_TOKEN'`. [有关更多示例](http://docs.oracle.com/cd/E11882_01/appdev.112/e23448/d_job.htm#sthref4936)，请参阅手册。

我不确定这是为什么。对于动态 SQL，您不能使用分号，而对于动态 PL/SQL，您需要`BEGIN`and `END;`。我猜这个参数是在一些奇怪的上下文中使用的。

# php - 我应该如何引用 Web 主机上的 MySQL 服务器？

> ID：13023632
> 
> 赞同：4
> 
> 时间：2012-10-23T04:35:00.813
> 
> 标签：php, mysql, ip-address, web-hosting

当使用 PHP 连接到 web 主机上的 MySQL 数据库时，引用服务器的最佳方式是什么？

我的 Web 主机上的 MySQL 管理页面显示服务器的 IP 地址是什么，但我可以使用 IP 号码以外的其他内容吗？

例如。

```
$con = mysql_connect("l00.50.10.10","user","password");
if (!$con) { die('Could not connect: ' . mysql_error()); } 
```

当我使用时，`localhost`我得到这个输出：

> 无法连接：无法通过套接字'/var/lib/mysql/mysql.sock'连接到本地MySQL服务器（2）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T04:39:31.003

您可以使用“localhost”作为主机来引用脚本的系统。

```
$con = mysql_connect("localhost", "user", "password"); 
```

但是，连接到 IP 很可能会失败，因为你有一个小写 L，你应该有一个数字（但我希望问题中的 IP 只是一个例子）。

此外，使用 mysqli 或 PDO 代替即将弃用的 mysql。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T04:45:08.597

这个问题的答案取决于您的主机（或他们的控制面板）如何配置 MySQL 权限。权限是特定于 IP 或主机名的，因此通常通过 IP 或主机名连接可能不会有相同的连接结果。如果有疑问，我会坚持他们给你的设置。

阅读更多：[http ://dev.mysql.com/doc/refman/5.0/en/account-names.html](http://dev.mysql.com/doc/refman/5.0/en/account-names.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T04:59:52.803

如果数据库主机是同一台计算机，请使用`localhost`。`localhost`当您使用端口号时，MySQL 将通过本地套接字连接，而不是 tcpip（网络） 。

有时服务器不支持套接字连接，你会得到这样的错误：

> 无法连接：无法通过套接字连接到本地 MySQL 服务器...

**编辑/更正：** 如果您无法通过套接字连接 - 使用`127.0.0.1`. 它将通过 tcpip 强制连接。

如果数据库服务器安装在其他机器上 - 您可以使用`IP address`或`domain`。

在大多数情况下，IP 地址更好，因为即使 DNS（域名服务器）无法正常工作或域过期也可以建立连接。

* * *

还有一个建议 -在新应用程序中**使用 mysqli_ 而不是 mysql_ 函数。**新功能在使用上非常相似，但更安全。

旧的**mysql_ 函数**已过时，**不建议**将它们用于新应用程序。由于与旧的、过时的软件（CMS 系统、电子商务系统等）兼容，它们仍然在 PHP 中可用

[PHP 帮助](http://php.net/manual/en/function.mysql-connect.php)说（关于 mysql_connect）：

> 不鼓励使用此扩展程序。相反，应该使用 MySQLi 或 PDO_MySQL 扩展。

* * *

**有关与 localhost 连接的更多**信息 - [MySQL 参考中的信息](http://dev.mysql.com/doc/refman/5.0/en/connecting.html)

> 在 Unix 上，MySQL 程序对主机名 localhost 进行了特殊处理，与其他基于网络的程序相比，这种方式可能与您所期望的不同。对于到 localhost 的连接，MySQL 程序尝试使用 Unix 套接字文件连接到本地服务器。即使给出 --port 或 -P 选项来指定端口号，也会发生这种情况。要确保客户端与本地服务器建立 TCP/IP 连接，请使用 --host 或 -h 指定主机名值 127.0.0.1

请注意，“--port”和“-P”选项是在 PHP 以外的其他上下文中描述的，但连接机制的工作原理类似，并且`localhost`是“特殊”名称，与 PHP、控制台或其他一些软件无关。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T05:33:42.757

您是否尝试过在 google 中输入类似的内容？

> php无法连接：无法通过套接字'/var/lib/mysql/mysql.sock'连接到本地MySQL服务器（2）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-23T04:39:09.220

您可以使用数据库服务器的主机名，例如`mydbbox.example.com`. 使用 IP 地址可能会更快，因为不需要 DNS 查找。

另请参阅[此 SO question](https://stackoverflow.com/questions/4356893/is-it-faster-to-connect-use-mysql-at-localhost-instead-of-a-domain-even-if-the)。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-10-23T04:40:44.250

这主要取决于您的主机如何配置。根据我的经验，您将使用“localhost”、服务器的 IP 地址或主机设置的某种子域。

我将从测试“localhost”开始，因为这是大多数共享托管环境的默认设置。

```
$con = mysql_connect("localhost", "username", "password"); 
```

# python - 使用递归的最后一个索引

> ID：13023639
> 
> 赞同：-1
> 
> 时间：2012-10-23T04:36:25.120
> 
> 标签：python, recursion

我必须编写一个递归函数 lastIndex()，它接受一个列表和一个值作为参数，返回列表中最后一次出现的值的索引。如果在列表中找不到该值或列表为空，则该函数返回 -1。该函数必须是递归的，并且作为参数提供的列表不能被修改。例子：

```
>>>lastIndex([1,2,3,4,5,1],1)
5
>>>lastIndex([1,4,7,2,3,2],3)
4 
```

我当前的代码：

```
def lastIndex(lst,n):
    if lst[0] ==n:
        return -1
    else:
        1 + lastIndex(lst[1:],n) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T04:43:43.567

正如我对您之前的作业问题的回答中提到的，递归包括两件事：

*   一个基本案例
*   一种基于更接近基础问题的答案的问题答案的方法

在这种情况下，您可能正在寻找的基本情况是一个空列表。

将问题与较小问题联系起来的方法是将输入列表分成两部分：输入的最后一个元素和最后一个元素之前的元素列表。最后一个元素之前的元素列表是您的小问题；最后一个要素是您如何决定是否需要解决较小的问题。

* * *

考虑这组问题：

*   我输入的最后一个元素是我正在寻找的元素吗？如果是这样，它之前有多少个元素？
*   否则，如果我删除当前的最后一个元素并重试，上述问题的答案是什么？

在这种情况下，递归就是“重试”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T04:49:50.703

这个怎么样？它是尾递归的。

```
>>> def lastIndex(lst,n,c=None):
...     if c is None:
...        c = len(lst)-1
...     if c < 0:
...         return -1
...     elif lst[c] == n:
...         return c
...     else:
...         return lastIndex(lst, n, c-1)
... 
>>> lastIndex([1,2,3,4,5,1],1)
5
>>> lastIndex([1,4,7,2,3,2],3)
4 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-23T05:21:17.327

```
def lastindex(lst, what_to_find, start_length=None, depth=0):
    if not start_length:
        start_length=len(lst)-1
    if not lst:
        return -1
    elif lst[-1]==what_to_find:
        return start_length - depth
    else:
        return lastindex(lst[:-1], what_to_find, start_length, depth+1) 
```

我认为这已经足够了。

```
>>> lastindex([0,0,0,0,0,2],3)
-1
>>> lastindex([1,2,3,4,5,6],3)
2
>>> lastindex([1,2,3,4,5,1],1)
5
>>> 
```

# wcf-data-services - 使 WCF 数据服务 DataServiceContext 仅保存实际更改

> ID：13023648
> 
> 赞同：0
> 
> 时间：2012-10-23T04:37:18.597
> 
> 标签：wcf-data-services, silverlight-5.0

我正在使用 PagedCollectionView 将 DataServiceCollection 绑定到 Silverlight 控件。如果用户只是将焦点设置在某些控件（如 DatePicker）中或从中移出，则似乎将记录标记为已编辑。如何拦截/覆盖此行为，以便仅将实际更改发送回服务器进行保存？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T06:02:14.130

它在您添加服务参考时自动生成的 Reference.cs 文件中。查看任何一个设置器，您会看到该值被直接推入而没有像这样的检查

```
set 
{
  if (this._field == value) return;
  //raise the changing events - not shown
  this._field = value;
  //raise the changed events - not shown
} 
```

我希望他们能改变它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T19:10:23.073

您的意思是说发送整个对象以进行更新，而不是仅发送已更改的某些属性？如果是，你可以看看这个博客：http: [//blogs.msdn.com/b/phaniraj/archive/2008/12/11/customizing-serialization-of-entities-in-the-ado-net-数据服务客户端库.aspx](http://blogs.msdn.com/b/phaniraj/archive/2008/12/11/customizing-serialization-of-entities-in-the-ado-net-data-services-client-library.aspx)。

谢谢普拉蒂克

# c++ - 游戏跳转逻辑

> ID：13023652
> 
> 赞同：4
> 
> 时间：2012-10-23T04:37:52.820
> 
> 标签：c++, algorithm, sdl

我正在创建一个 2D 马里奥游戏。

以下函数旨在在按下特定键时更新玩家的位置。玩家可以左右移动，在同一个地方跳跃，或者向左或向右跳跃（形成弧形）。

```
 bool updatePlayerPosition(Movement* mov){
        if (this->keyPressed(SDLK_RIGHT)) {
            mov->applyForce(1); // Changes the velocity in X
        }   
        if (this->keyPressed(SDLK_LEFT)) {
            mov->applyForce(-1);  // Changes the velocity in X
        }           
        if (this->keyPressed(SDLK_SPACE)) {
            mov->jump();        // Changes the velocity in Y
        }       
        if (this->keyPressed(SDLK_DOWN)) {
            mov->fallDown();   // Changes the velocity in X and Y
        }

        Point* pos = mov->getPosition();

        // Check whether the position is out of bounds
        if(Level::allowsMove(pos)){
              // If it is not, I update the player's current position
              position->x = pos->x;
              position->y = pos->y;
              return true;
        }
        // If the movement is not allowed, I don't change the position
        else {
              mov->setPosition(*position);
              return false;
        }
    } 
```

这是错误：当我到达关卡的末端（具有固定宽度）时，如果我尝试向右移动并**同时**跳跃，玩家会跳跃并停留在空中。只有当我释放空格键时，播放器才会落地。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T05:01:44.933

对于您的游戏，我认为您只希望玩家在按下空间*和*玩家在场上时跳跃。然后，您必须检查玩家是否在场上才能获得所需的行为。

我建议您使用这样的机制：

```
if (this->keyPressed(SDLK_SPACE) && this->isOnTheFloor()) {
                                 ^^^^^^^^^^^^^^^^^^^^^^^
   mov->jump();        // Changes the velocity in Y
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T05:08:30.293

您的空格键处理程序应该只施加一次力 - 如果您愿意，可以在按键按下或向上时，而不是每一帧。在空格键向下时，速度“向上”应设置为某个（可能是恒定的）值。然后每一帧，如果不是在地面上，向下的速度应该增加一个指定的量，以最大速度。所以`OnSpacebarDown, YVelocity = 10.0;`对于每一帧`if(!bGrounded) YVelocity -= 1.0;`

# c# - C# 和 SWI-Prolog - 将字符列表转换为事实列表

> ID：13023656
> 
> 赞同：3
> 
> 时间：2012-10-23T04:38:37.027
> 
> 标签：c#, prolog, unity3d, planning

因此，我正在使用 Unity3D 开发游戏，并且正在使用 Prolog 进行 IA 规划。**我的问题与猴子和香蕉问题**非常相似，但是我在断言新的初始状态时遇到了问题。

通过改变初始状态，我的角色将能够在环境中重要的事情发生变化时再次计划他的行动。

但是让我们回到我的问题：

我通过套接字将一个字符串传递给prolog，并且我想建立一个事实列表。然后，我想将这些事实用作我的计划程序的初始状态。

通过将字节数组转换为字符列表，我可以在 SWI 终端上写入套接字的输入流。通过在输出流上写一些东西，我还可以从 prolog 服务器返回一个字符串。但我不知道我应该如何将这些字符/字符串变成事实列表。

另外，我想使用该事实列表作为初始状态，通过将其传递给规划过程，就像我将参数传递给命令式编程语言中的函数（如果是这样的话）。

我想做的是这样的（伪代码）：

```
% on the prolog server, we have a main function
% we get a bytestream (In), 
% turn it into a list of facts
% use it as the initial state
% and write Plan to the output stream (Out).

loopback(In, Out) :-    
    \+at_end_of_stream(In),     
    read_pending_input(In, Codes, []),              
    atom_codes(AtomList, Codes),       %bytes into a list of atoms
    toFacts(Init, AtomList),           %??? Init = AtomList to list of facts
    test(Init, Plan),                  %pass Init as the initial state
    format(Out, '~s', Plan),            %Get the plan back and write to the output
    flush_output(Out),
    loopback(In, Out).

% Init should look like this - a mere list of facts:
Init = [on(monkey, floor),
        on(box, floor),
        at(monkey, a),
        at(box, b),
        at(bananas, c),
        status(bananas, hanging)].

% The planning predicate - Init as an argument, Plan is the result
test(Init, Plan):- 
    write('Initial state:'),nl, 
    write_sol(Init),
    Goal = [status(bananas, grabbed)],
    nl,write('Goal state:'),nl,
    write(Goal),nl,
        solve(Init,Goal,Plan). 
```

我现在真的很困惑，我希望有人能帮助我。谢谢！

参考：

[完整的猴子香蕉问题代码。](http://www.comp.dit.ie/jkelleher/ai1labs/Tut12-Planning1/bandmplanner.pro)

[SWI 套接字服务器代码示例。](http://old.nabble.com/attachment/25786573/0/tmp32.pl)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T06:13:55.930

你有很多选择：最简单的似乎是[read_from_codes](http://www.swi-prolog.org/pldoc/doc_for?object=codesio%3aread_from_codes/2)

```
test :-  
  S = "[on(monkey, floor),
        on(box, floor),
        at(monkey, a),
        at(box, b),
        at(bananas, c),
        status(bananas, hanging)].",
  read_from_codes(S, T),
  writeln(T). 
```

结果是

```
?- test.
[on(monkey,floor),on(box,floor),at(monkey,a),at(box,b),at(bananas,c),status(bananas,hanging)]
true. 
```

[但是使用像JSON](http://www.swi-prolog.org/pldoc/doc_for?object=section%282,%275%27,swi%28%27/doc/packages/http.html%27%29%29)这样的专用协议可以更轻松地交换结构化数据。我只是通过 AJAX/jQuery 使用它。也许对您的用例来说有点矫枉过正......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-25T13:13:12.547

在[http://tinycog.sourceforge.net/](http://tinycog.sourceforge.net/)我们使用 SWI-Prolog HTTP 服务器和 Unity3D HTTP 调用来构建一个接口，在两端使用 JSON 库来编码复杂的术语等。实际上是 Unity3D 端的一个小 C# 脚本只需将所有 GameObjects 的位置发送到 SWI-Server 并接收要在 Unity3D 级别上执行的命令列表，包括“goto”、“grab”和“fire”。SWI-Prolog 代码位于 GIT 存储库中，C# 中的 Unity3D 代码是项目文件中客户端 ZIP 的一部分。

# r - 使用 C 代码为 Linux 和 Windows 构建 R 包

> ID：13023659
> 
> 赞同：2
> 
> 时间：2012-10-23T04:38:48.027
> 
> 标签：r

我一直在做研究，但我不太清楚如何构建我的 R 包，它调用 C 函数，以便它在 Windows 和 Linux 环境中工作。我正在 Linux 机器上构建包。

我有两个 C 文件，一个.C 和两个.C，我使用 package.skeleton(...) 后将这两个文件放在 src 目录中。在命名空间文件中，我使用命令：useDynLib(one,two)。它是否正确？还是我需要输入实际的函数名而不是文件名？我需要导出函数名称吗？

我需要将 .so 文件放在 src 目录中还是会自动创建这些文件？我担心它不会在需要 .dll 文件的 Windows 机器上工作。

如您所见，我有点困惑，谢谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T05:17:15.570

标准 R 手册之一是[编写 R 扩展](http://cran.r-project.org/doc/manuals/R-exts.html)。本手册的一部分是第[5 节系统和外语界面](http://cran.r-project.org/doc/manuals/R-exts.html#System-and-foreign-language-interfaces)。这可能会回答您的大部分问题。关于动态链接库（`dll`或`so`），它们是动态构建的。你开发你的包，包括 C 代码。一旦您想从源代码安装库（例如使用`R CMD INSTALL spam`），或创建二进制发行版，C 代码将被编译到适当的库文件中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-23T10:35:35.083

面对类似的头痛，我将 C++ 与 Rcpp 结合使用。Rcpp 为您解决编译包时的所有难题：

[http://dirk.eddelbuettel.com/code/rcpp.html](http://dirk.eddelbuettel.com/code/rcpp.html)

还有一个关于如何使用 Rcpp 构建包的完整小插图：

[http://dirk.eddelbuettel.com/code/rcpp/Rcpp-package.pdf](http://dirk.eddelbuettel.com/code/rcpp/Rcpp-package.pdf)

# arrays - 找到结构数组的最大值

> ID：13023665
> 
> 赞同：2
> 
> 时间：2012-10-23T04:39:31.647
> 
> 标签：arrays, matlab, data-structures

我一直在谷歌搜索和搜索，但还没有成功。我想知道考虑所有字段`a{1}`的最大值。`a{2}`同样，我想知道每个 a 的平均值，同时考虑所有字段。

```
a{1}.field1=[1:5];
a{2}.field1=[1:6];
a{1}.field2=[2:8];
a{2}.field2=[2:9]; 
```

我希望循环中的以下内容会起作用：

```
fn=fieldnames(a{1});
max(a{1}.(fn{:}))
mean(a{1}.(fn{:})) 
```

我认为有一些我想念的超级有效的方法来做到这一点......有什么建议吗？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T05:00:37.150

首先，我认为您的意思是定义一个多维结构：

```
a(1).field1=[1:5];
a(2).field1=[1:6];
a(1).field2=[2:8];
a(2).field2=[2:9]; 
```

（注意圆括号而不是花括号。花括号会给你一个包含两个`struct`s 的单元格数组）。现在，您寻求的价值观：

```
max_mean = cellfun(@(x)[max(x) mean(x)], {a.field1}, 'UniformOutput', false); 
```

这样做，将为您提供`a(1).field1`in的最大值和平均值，以及in`max_mean{1}`的最大值和平均值。`a(2).field1``max_mean{2}`

对所有字段执行此操作可以通过将`cellfun`上述嵌套在另一个中来完成`cellfun`：

```
max_means = cellfun(@(x) ...
    cellfun(@(y)[max(y) mean(y)], {a.(x)}, 'UniformOutput', false), ...
    fieldnames(a), 'UniformOutput', false); 
```

以便

```
max_means{1}{1} % will give you the max's and means of a(1).field1
max_means{1}{2} % will give you the max's and means of a(2).field1
max_means{2}{1} % will give you the max's and means of a(1).field2
max_means{2}{2} % will give you the max's and means of a(2).field2 
```

使用这些功能，直到找到适合您需求的东西。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-24T00:34:29.287

假设结构中的每个字段都与 max/mean 函数兼容，您可以使用：

`maxima(ii) = max(structfun(@max, a{ii}))
means(ii) = mean(structfun(@mean, a{ii}))`

Structfun 返回列向量中每个字段的最大值/平均值。可以很容易地再次应用 max 和 mean 函数来找到总的 max/mean。然后，您可以在一个循环中为结构数组运行它。

# android - 从我的 Android 应用程序启动 android 应用程序

> ID：13023667
> 
> 赞同：0
> 
> 时间：2012-10-23T04:39:56.200
> 
> 标签：android

我想从我的 android 应用程序列出并启动安装在我的 android 设备上的应用程序。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T04:43:06.013

你应该试试这段代码

```
Intent intent = getPackageManager().getLaunchIntentForPackage("com.android.package");
startActivity(intent ); 
```

# c# - 默认主键设置将值增加 2

> ID：13023668
> 
> 赞同：3
> 
> 时间：2012-10-23T04:40:01.110
> 
> 标签：c#, sql-server, database, primary-key

我刚刚使用 C# Forms 应用程序在 Visual Studio 中创建了一个数据库。

我有很多列，A 列是主键。

我刚刚在行中输入了数据，并注意到主键值增加了两个（`1,3,5,7,9....`等）。

有没有办法改变它以常规方式上升（`1,2,3,4,5,6,....?`）

![在此处输入图像描述](../Images/f4a783615014e53b0ec6d7c4fa18611a.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T04:43:15.670

如果您使用 MS SQL Server，请在 SQL Management Studio 或 Visual Studio 中打开表并设置 Primary Key's `Identity Increment`= 1

![在此处输入图像描述](../Images/51e04c475faae988013fe4ed8c246fc2.png)

# ruby-on-rails - 在 Rails 上充当可标记的角色

> ID：13023670
> 
> 赞同：-1
> 
> 时间：2012-10-23T04:40:06.703
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rubygems, acts-as-taggable-on

如何创建索引路由/操作以查看我创建的所有标签！，我在[https://github.com/mbleigh/acts-as-taggable-on使用 gem](https://github.com/mbleigh/acts-as-taggable-on)

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T05:09:49.043

使用 ActsAsTaggableOn::Tag.all 列出所有标签，例如

```
# tags_controller.rb
def index
  @tags = ActsAsTaggableOn::Tag.all
end

# tags/index.html.erb
<% @tags.each do |tag| %>
  some html to display
<% end %> 
```

当然，如果你没有标签控制器，你将不得不创建一个，并且路由在 routes.rb 中。如果需要，可以使用 rails generate controller tags index 命令。运行 rake routes 以查看路由是什么。

您可以在这里查看实际的 Tag 模型：[https](https://github.com/mbleigh/acts-as-taggable-on/blob/master/lib/acts_as_taggable_on/tag.rb) ://github.com/mbleigh/acts-as-taggable-on/blob/master/lib/acts_as_taggable_on/tag.rb 您可以找到可用于 Tag 的字段在您的 db/schema.rb 文件中。

# c++ - sourceFile.open(文件路径);

> ID：13023671
> 
> 赞同：0
> 
> 时间：2012-10-23T04:40:23.597
> 
> 标签：c++, io

> **可能重复：**
> [ifstream::open() 的 C++ 类型参数](https://stackoverflow.com/questions/5251814/c-type-of-argument-to-ifstreamopen)
> [C++ ifstream 错误使用字符串作为打开文件路径。](https://stackoverflow.com/questions/6323619/c-ifstream-error-using-string-as-opening-file-path)

有什么问题

```
ifstream sourceFile;
sourceFile.open(filepath); 
```

我得到了一些关于：

> 没有匹配的函数调用`ifstream::open(string&)`

怎么了？

与

```
ifstream sourceFile(filepath) 
```

其中文件路径是一个字符串

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T04:45:31.817

从 C++11 开始，iostreams 可以将 a`string`作为参数来命名要打开的文件——但这是在 C++11 中添加的，所以很多库还没有包含它。更新到最新版本的编译器/库*可能会*有所帮助（但话又说回来，它可能不会——我怀疑这种支持是否相当普遍）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T04:43:16.310

看起来`filepath`是一个`string`。 `Open`只接受原始指针。所以这样做 -`Open(filepath.c_str());`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T04:42:14.157

它需要一个`char* filename`而不是一个**字符串**作为参数。

```
sourceFile.open(filepath.c_str()); 
```

* * *

```
The Function is std::ifstream::open
    void open ( const char * filename, ios_base::openmode mode = ios_base::in ); 
```

（**[参考](http://www.cplusplus.com/reference/iostream/ifstream/)**）

# ruby-on-rails - 如何在对模型执行操作之前对相关模型执行复杂的验证检查？

> ID：13023672
> 
> 赞同：1
> 
> 时间：2012-10-23T04:40:24.907
> 
> 标签：ruby-on-rails, ruby-on-rails-3, validation, model

我正在为问题管理构建一个简单的 Ruby on Rails 应用程序。我有一个问题模型如下：

```
class Problem < ActiveRecord::Base
  attr_accessible :active, :impact, :incident_number, :issue_description, :root_cause, :user_id, :problem_summary, :incident_priority, :timeline_enabled
  attr_accessor :enable_timeline

  validates :problem_summary, :length => { :in => 10..100 }

  belongs_to :user
  has_one :timeline
  has_many :actionitems

end 
```

它与 actionitems 的模型有一个 has_many belongs_to 关联：

```
class Actionitem < ActiveRecord::Base
  attr_accessible :completion_date, :description, :initial_due_date, :notes, :problem_id, :revised_due_date, :status, :user_id

  belongs_to :problem
end 
```

我希望能够更新问题记录并使用一些有限的验证来保存它（我仍然需要添加这些验证）。但是，我想要一个“完成问题调查”按钮，它会触发问题控制器上的一个方法，将问题记录上的 :active 属性设置为 false。我希望能够在执行此操作之前对问题记录运行一组不同的、更完整的验证，并验证与此问题记录关联的所有操作项（如果有）是否处于：状态“已完成” .

我有两个问题：

1.  如何仅对给定操作执行一组特定的验证？
2.  在对问题执行操作之前，如何验证 Actionitem 的相关实例处于“完成”状态？

这个任务对我来说似乎很复杂。如果您能指出我需要利用什么才能实现这一目标，我们将不胜感激！（我阅读了 validates :on => :save 等和 accept_nested_attributes_for 但我不确定如何将所有这些放在一起以实现我想要的行为）。

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T04:44:59.833

您需要对验证应用检查条件，例如

```
validate :xyz , length => {:in => 1..12}, :if => , :if => lambda {self.active == true } 
```

此验证仅在 aCTIVE 为 TRUE 时运行。同样，您可以通过检查添加更多验证

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T05:13:03.543

试试这个

```
validates_length_of :problem_summary, :in => 10..100, :if => :status_active?

def status_active?
  self.active == true  
end 
```

详细查看 -[验证](http://railscasts.com/episodes/41-conditional-validations)& [validates_length_of](http://ar.rubyonrails.org/classes/ActiveRecord/Validations/ClassMethods.html#M000084)

# php - 登录后按下返回按钮时将登录用户重定向到主页

> ID：13023676
> 
> 赞同：0
> 
> 时间：2012-10-23T04:40:50.530
> 
> 标签：php, codeigniter

我目前正在使用 codeigniter 作为我的框架学习 MVC 的基础知识，并创建了一个登录页面。现在我已经在用户登录并存储了会话数据后重定向了用户，但问题是在我登录后（我重定向到另一个页面）然后按下后退按钮，登录页面仍然显示，除非我突出显示地址中的 URL栏并按下回车键，在其中我再次返回重定向页面。好吧，我知道这是因为我进行了会话检查，但我需要一个解决方案来解决这个问题，以便用户除非他注销，否则不会再次返回登录页面。除非他/她再次登录，否则注销用户不要返回某个页面也是如此。

为了提供更多详细信息，我到底想要发生什么，就像在 facebook 登录中一样，在您登录并单击浏览器上的后退按钮后，facebook 仍会将您重定向到您的主页，而不是登录页面。同样的事情要注销。

到目前为止，这是我的控制器，我认为这说明了一切。如果我在我的代码中做了一些冗余并理解我是这方面的新手，请纠正我。:)

```
public function index()
{
    $data['error'] = null;
    $username = $this->input->post('username');
    $password = $this->input->post('password');
    $data['login'] = $this->login_model->get_login_credentials($username,$password);
    $data['session'] = $this->login_model->get_session($username);

    //CHECK IF THE $PAGE VIEW IS EXISTING
    if ( ! file_exists('application/views/pages/login.php'))
    {
        // IF PAGE DOESN'T EXISTS SHOW 404 ERROR
        show_404();
    }

    if(($this->input->post('login')=='Login'&&$data['login']==1)||($username==$data['session']['username'])){
        //SUCCESS LOGIN
        $this->load->helper('url');  
        redirect('news');
    }

    if($this->input->post('login')=='Login'&&$data['login']!=1){
        //LOGIN FAILED
        $data['error'] = "Invalid login credentials.";
    }

    //FOR THE TITLE PART
    $data['title'] = ucfirst('login'); 

    $this->load->view('pages/login/login', $data);
    $this->load->view('templates/footer', $data);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T04:46:29.007

首先检查会话数据，您可以使用：

```
$this->session->userdata('item'); 
```

这里

```
$username==$data['session']['username']) 
```

也许您可以在索引的开头设置 1 检查为：

```
if($this->session->userdata('username'))
redirect('news'); 
```

不要忘记在调用这些函数之前加载所需的所有帮助程序和库。

对于会话检查[http://codeigniter.com/user_guide/libraries/sessions.html](http://codeigniter.com/user_guide/libraries/sessions.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T05:01:31.060

如果您不想在成功登录后进入登录页面，您可以在登录页面中测试会话，如果`session`设置了则重定向到其他页面。试试这个代码。

```
if ($data['session']['username']) != NULL) {
    redirect('home_page','refresh');
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T12:15:53.093

这个问题已经在这里解决了：清除缓存后按以防止在Hashem Qolami[注销后返回登录页面或上一页同样的问题，但角度不同。](https://stackoverflow.com/questions/13099805/clear-cache-on-back-press-to-prevent-going-back-on-login-page-or-previous-page-a/13099962#comment17804359_13099962)

# php - 如何使用 php 访问 Oracle APEX 的数据库？

> ID：13023677
> 
> 赞同：0
> 
> 时间：2012-10-23T04:40:53.503
> 
> 标签：php, database, oracle, oracle-apex

我刚刚发现`PHP`并`APEX`相互对比。我想做的是`Oracle`使用`PHP`而不是`APEX`.

我想这样做的主要原因是免费使用 Oracle 数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-01-28T08:36:34.617

作为初学者，您可能会发现这很有用：

[http://php.net/manual/en/function.oci-connect.php](http://php.net/manual/en/function.oci-connect.php)

另请参阅该页面代码中使用的其他相关函数的文档（也可以在该站点中找到它们）。

您可能需要一些其他工具，如 Oracle SQL Developer 或 TOAD for Oracle - 执行一些初始数据库操作工作（即 - 解锁用户）和其他相关任务（如手动执行查询以检查查询的正确性，检查是否根据应用程序逻辑修改/更新/更改的数据库/表）。

# android - API 级别小于 14 的 ShareActionProvider

> ID：13023690
> 
> 赞同：8
> 
> 时间：2012-10-23T04:42:23.613
> 
> 标签：android, shareactionprovider

是否可以将 shareActionProvider 用于 API 少于 14 的应用程序？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-09-03T20:55:09.203

现在可以使用 v7 支持库来执行此操作。

[http://developer.android.com/reference/android/support/v7/widget/ShareActionProvider.html](http://developer.android.com/reference/android/support/v7/widget/ShareActionProvider.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T05:18:56.773

不，您不能在预 ICS SDK 上使用它，可能使用 v4 支持库，请参阅此主题[跨版本 ShareActionProvider 支持](https://groups.google.com/forum/#!msg/actionbarsherlock/1W2TiP1zD3s/kA-fP3Xu25IJ)您可以使用[ActionBarSherlock](https://github.com/JakeWharton/ActionBarSherlock)支持旧版本，请参阅此示例[ShareActionProviders.java](https://github.com/JakeWharton/ActionBarSherlock/blob/master/actionbarsherlock-samples/demos/src/com/actionbarsherlock/sample/demos/ShareActionProviders.java)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-09-14T13:07:30.490

如果有人在查找要导入的库时遇到挫折（阅读文档不是很清楚）：

```
import android.support.v7.widget.ShareActionProvider; 
```

我猜想，给你一个线索的是你正在查看的文档的 URL，我认为它对应于 API 结构：

![在此处输入图像描述](../Images/8b4caa179e2237c95b7eb50d66bb3d86.png)

对我自己来说，到目前为止，这适用于与兼容性库相关的文档。

# objective-c - UITableViewController 在网络请求完成之前执行延迟函数

> ID：13023691
> 
> 赞同：0
> 
> 时间：2012-10-23T04:42:33.163
> 
> 标签：objective-c, ios, multithreading, uitableview, afnetworking

我在尝试`UITableView`用网络请求的结果填充 a 时遇到问题。我的代码似乎没问题，因为当我的网络速度很快时它可以完美运行，但是，当它不是时，函数 `- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath-`仍然执行，这会导致错误的访问错误。我推测这是因为上述函数试图使用的数组尚未被填充。这让我想到了我的问题：无论如何我可以`UITableView`延迟委托方法以避免这种情况吗？

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"AlbumsCell";
//UITableViewCell *basicCell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];

AlbumsCell *cell = (AlbumsCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];

if (!cell) {
    **// Here is where the Thread 1: EXC_BAD_ACCESS (code=2 address=0x8)**
    cell = [[[AlbumsCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
}

    Album *album = [_albums objectAtIndex:[indexPath row]];
    [cell setAlbum:album];

return cell;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T04:58:26.427

修改您的委托方法以处理“进行中”状态的网络请求。一旦你得到你的回应，调用`reloadData`on tableview 它将用正确的数据重新加载表格。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"AlbumsCell";
//UITableViewCell *basicCell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];

    AlbumsCell *cell = (AlbumsCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (!cell) {
        **// Here is where the Thread 1: EXC_BAD_ACCESS (code=2 address=0x8)**
        cell = [[[AlbumsCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
    }

    if ((_albums) && ([_albums count] > [indexPath row])) {
        Album *album = [_albums objectAtIndex:[indexPath row]];
        [cell setAlbum:album];
    } else {
    //show some loading message in the cell
    }

    return cell;
    } 
```

# php - php文件获取带有post数据的内容

> ID：13023692
> 
> 赞同：2
> 
> 时间：2012-10-23T04:42:33.860
> 
> 标签：php, http, encoding, stream

> **可能重复：**
> [通过 Rest 服务器登录 Drupal](https://stackoverflow.com/questions/8535820/drupal-login-via-rest-server)

我一直在使用此代码获取包含发布数据的文件内容，但收到错误

```
Warning: file_get_contents(http://50.116.19.49/rest/user/login.json): failed to open  
stream: HTTP request failed! HTTP/1.0 406 Not Acceptable: Unsupported request content type 
application/x-www-form-urlencoded in C:\xampp\htdocs\post.php on line 20 
```

我的代码是

```
<?php

$postdata = http_build_query(
array(
    'var1' => 'myuser',
    'var2' => 'pwd'
)
);

$opts = array('http' =>
array(
    'method'  => 'POST',
    'header'  => 'Content-type: application/x-www-form-urlencoded',
    'content' => $postdata
)
);

$context  = stream_context_create($opts);

$result = file_get_contents('http://50.116.19.49/rest/user/login.json', false,    
$context);

?> 
```

任何人都可以在此提前提供帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T04:53:20.327

我们可以使用 curl 代替函数 file_get_contents($request); 这是 curl 的代码：

```
 $ch = curl_init();
 curl_setopt($ch, CURLOPT_URL,$request);
 curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
 curl_setopt($ch, CURLOPT_TIMEOUT, 15);
 curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 0);

 $xml_response = curl_exec($ch); 
```

其中 $request 是您的网址。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T09:34:58.043

看起来，这个特定的服务器希望在您调用时在 POST 数据中看到 JSON `/login.json`，因此您应该在代码中重写一些内容。

1.  改变`$postdata`结构：

    ```
    $postdata = json_encode(array(
        'var1' => 'myuser',
        'var2' => 'pwd'
    )); 
    ```

2.  更改`Content-Type`标题：

    ```
    $opts = array('http' => array(
        'method'  => 'POST',
        'header'  => 'Content-type: application/json',
        'content' => $postdata
    )); 
    ```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T08:51:35.373

`file_get_contents`HTTP 流包装器也会返回`FALSE`错误。错误表示 HTTP 响应的任何错误情况，例如 400 范围内的 HTTP 状态代码，如[406 Not Acceptable: Unsupported request content type](https://www.rfc-editor.org/rfc/rfc2616#section-10.4.7) in your case。

[您可以通过将HTTP 上下文选项](http://www.php.net/context.http)设置为来禁用*“错误时为 FALSE”*行为：[`ignore_errors`](http://www.php.net/context.http)`TRUE`

```
'ignore_errors' = TRUE, 
```

然后，您也会在错误情况下获得请求的响应正文作为结果。

要获取状态代码本身，您可以使用[特殊`$http_response_header`变量](http://php.net/reserved.variables.httpresponseheader)。

有关这些设置以及如何解析响应标头的讨论，请参阅[HEAD first with PHP Streams](http://hakre.wordpress.com/2011/09/17/head-first-with-php-streams/)。但是，在您的情况下，响应正文可能已经包含有关该问题的更多信息。

在您的具体问题中，您需要仔细检查服务器是否支持请求的编码。由于我不知道你的服务器，我不能说太多。对错误代码的引用可能会为您提供一些启示。*您正在使用的Content-type: application/x-www-form-urlencoded*似乎有问题。

例如，正如该站点上的其他聪明人告诉我的那样，该端点是 Drupal。如果是这样，在[类似的问题](https://stackoverflow.com/q/8535820/367456)中提出了以下建议：

> 您必须启用`application/x-www-form-urlencoded`服务端点的内容类型。
> 
> 执行以下操作：服务->编辑资源->选择选项卡“服务器”->启用“应用程序/x-www-form-urlencoded”，就是这样。

希望这对您有所帮助。

# html - 悬停时如何阻止文本移动？（涉及背景图像）

> ID：13023694
> 
> 赞同：0
> 
> 时间：2012-10-23T04:42:50.567
> 
> 标签：html, css, positioning, background-image

这基本上是我现在面临的问题，[http://jsfiddle.net/NCJeP/](http://jsfiddle.net/NCJeP/)。

## HTML

```
 <nav>
    <ul id="city-navigation">
        <li><a href="../chennai/" class="active">Chennai</a></li>
        <li><a href="../trichy/">Trichy</a></li>
        <li><a href="../madurai/">Madurai</a></li>
        <li><a href="../coimbatore/">Coimbatore</a></li>
        <li><a href="../salem/">Salem</a></li>
    </ul>
    </nav>​ 
```

## CSS

```
#city-navigation {
    width: 100%;
    position: relative;
    left: 10px;
}

#city-navigation li a {
    float: left;
    font: 14px Rockwell, Georgia, Times, “Times New Roman”, serif;
    margin: 20px 20px;
    color: #FFF;
}

#city-navigation li a:hover {
    background-image: url(http://i.imgur.com/QVzKG.png);
    background-repeat: no-repeat;
    color: #000;
    width: 116px;
    height: 60px;
    display: block;
    text-align: center;
    position: relative;
    z-index: 4;
}

#city-navigation .active {
    background-image: url(http://i.imgur.com/HbLa1.png);
    background-repeat: no-repeat;
    color: #000;
    width: 116px;
    height: 60px;
    display: block;
    text-align: center;
}​ 
```

由于背景图像添加的额外宽度，我似乎无法弄清楚如何阻止文本向右移动。我知道有足够的空间，我只希望图像和文本是静态的。

如果有人可以提供帮助，我将非常感谢！=) 干杯！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T04:48:55.560

悬停的宽度导致跳跃。我将它移到“a”标签并清理了其他代码：

```
#city-navigation li a {
    float: left;
    font: 14px Rockwell, Georgia, Times, “Times New Roman”, serif;
    margin: 20px 20px;
    color: #FFF;
    display: block;
    text-align: center;
    width: 116px;
    height: 60px;
}
#city-navigation li a:hover {
    background: url(http://i.imgur.com/QVzKG.png) no-repeat;
    color: #000;
}
#city-navigation .active {
    background: url(http://i.imgur.com/HbLa1.png) no-repeat;
    color: #000;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T04:45:58.037

`#city-navigation .active`从和中删除 width 属性`#city-navigation li a:hover`，这会导致在悬停列表项时宽度增加。

这将使您的CSS代码看起来像

```
body {
    background-color: red;
}

#city-navigation {
    width: 100%;
    position: relative;
    left: 10px;
}

#city-navigation li a {
    float: left;
    font: 14px Rockwell, Georgia, Times, “Times New Roman”, serif;
    margin: 20px 20px;
    color: #FFF;
}

#city-navigation li a:hover {
    background-image: url(http://i.imgur.com/QVzKG.png);
    background-repeat: no-repeat;
    color: #000;
    height: 60px;
    display: block;
    text-align: center;
    position: relative;
    z-index: 4;
}

#city-navigation .active {
    background-image: url(http://i.imgur.com/HbLa1.png);
    background-repeat: no-repeat;
    color: #000;
    height: 60px;
    display: block;
    text-align: center;
}​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T04:51:45.683

这样做：[**我的小提琴**](http://jsfiddle.net/NCJeP/3/)

以为我没有为您清理，而是使用`inline-block`并删除导航周围不必要的边距..

CSS

```
body {
    background-color: red;
}

#city-navigation {
    width: 100%;
    position: relative;
    left: 10px;
}

#city-navigation li a {
    float: left;
    font: 14px Rockwell, Georgia, Times, “Times New Roman”, serif;
    margin: 20px 0px;
    color: #FFF;
    display: inline-block;
    width: 116px;
    text-align: center;
}

#city-navigation li a:hover {
    background-image: url('http://i.imgur.com/QVzKG.png');
    background-repeat: no-repeat;
    color: #000;
    width: 116px;
    height: 60px;
    display: inline-block;
    text-align: center;
    position: relative;
}

#city-navigation .active {
    background-image: url('http://i.imgur.com/HbLa1.png');
    background-repeat: no-repeat;
    color: #000;
    width: 116px;
    height: 60px;
    display: block;
    text-align: center;
} 
```

# ruby-on-rails - Rmagick 无法操作 PNG

> ID：13023700
> 
> 赞同：4
> 
> 时间：2012-10-23T04:43:18.900
> 
> 标签：ruby-on-rails, imagemagick, carrierwave, rmagick

在[CarrierWave](http://railscasts.com/episodes/253-carrierwave-file-uploads)上的 Railscast 插曲之后：

我通过自制软件安装`ImageMagick`在 Mountain Lion 上，导出以下路径：

```
export PKG_CONFIG_PATH="/opt/local/lib/pkgconfig:$PKG_CONFIG_PATH" 
```

符号链接以下内容：

```
ln -s /usr/local/include/ImageMagick/wand /usr/local/include/wand
ln -s /usr/local/include/ImageMagick/magick /usr/local/include/magick 
```

并`rmagick`通过捆绑器安装。

在我的`uploader`我有以下内容：

```
include CarrierWave::RMagick
version :thumb do
     process :resize_to_limit => [85, 85]
end 
```

它可以很好地创建缩略图，但不适用于`png`文件。我尝试了一些`png`图像，但总是失败并出现以下错误：

```
 Failed to manipulate with rmagick, maybe it is not an image? Original Error: no decode delegate for this image format `<path>/public/uploads/tmp/20121022-2133-9885-3333/thumb_cat_vs_internet.png' @ error/constitute.c/ReadImage/544 
```

`jpeg`图像工作得很好。

**编辑**

`identify -list format | grep -i png`什么都不返回，表明可能缺少 png 解码委托。怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T13:26:37.637

在确定未安装 PNG 委托后（使用`identify -list format`），您应该尝试卸载/重新安装 ImageMagick，因为安装程序可能遗漏了某些内容。

# google-app-engine - 如何在生产中维护 Google App Engine 站点

> ID：13023702
> 
> 赞同：4
> 
> 时间：2012-10-23T04:43:30.100
> 
> 标签：google-app-engine, google-cloud-datastore, development-environment, production-environment

在过去的几个月里，我一直在使用 Google App Engine 开发一个网站，我真的不必担心当网站出现故障时人们会添加新数据或扰乱用户，因为我的用户很少，但我现在正计划将网站推广给很多人。

该站点涉及发布主题的用户，通常当我在站点上进行更改时，我需要使用一些数据库条目。我想知道在生产过程中开发网站并且不会丢失用户数据或降低用户体验的最专业和最有效的方法是什么。

如果我可以将 10% 的流量分配到我正在测试的新网站上，但我没有发现任何类似的东西，那将是理想的情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T07:32:19.440

你见过[流量分裂](https://developers.google.com/appengine/docs/adminconsole/trafficsplitting)吗？它允许您将一定比例的用户发送到替代应用程序版本，例如`testing.example.appspot.com`

# javascript - Socket.io - 客户端断开连接后手动重新连接

> ID：13023703
> 
> 赞同：16
> 
> 时间：2012-10-23T04:43:32.017
> 
> 标签：javascript, node.js, websocket, socket.io

我使用`node.js`and`socket.io`创建一个实时 Web 应用程序。我将让用户完全控制套接字连接，例如手动断开和（重新）连接。

```
function socket_connect()
{
    console.log('func socket_connect');
    socket = io.connect('http://url/to/the/app');
}

function socket_reconnect()
{
    console.log('func socket_reconnect');
    socket_connect();
}

function socket_disconnect ()
{
    console.log('func socket_disconnect');
    if (socket) socket.disconnect();
} 
```

在客户端启动该`socket_connect()`功能工作正常，但使用后`socket.disconnect()`，没有新的连接开始。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-11-25T08:03:59.347

您可以按照客户端配置重新连接。

```
 // for socket.io version 1.0
io.connect(SERVER_IP,{'forceNew':true }); 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-10-23T21:55:44.153

它现在可以使用 socket.socket.reconnect()

```
function socket_connect()
{
    console.log('func socket_connect');
    socket = io.connect('http://url/to/the/app');
}

function socket_reconnect()
{
    console.log('func socket_reconnect');
    socket.socket.reconnect();
}

function socket_disconnect ()
{
    console.log('func socket_disconnect');
    if (socket) socket.disconnect();
} 
```

相关：[https ://github.com/LearnBoost/socket.io-client/issues/251](https://github.com/LearnBoost/socket.io-client/issues/251)

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2014-07-11T14:35:48.827

如果您使用的是 Socket.io 1.0，请尝试使用`io`套接字上的管理器来处理手动断开和重新连接。

```
// Connect to socket.io 
var socket = io.connect('url');

function manual_disconnect() {
   socket.io.disconnect();
}

function manual_reconnect() {
   socket.io.reconnect();
} 
```

套接字上的 reconnecting_attempt、reconnecting、reconnected 和 connected 事件都应该在之后发出。

# c++ - 需要多个数独解决方案

> ID：13023705
> 
> 赞同：0
> 
> 时间：2012-10-23T04:43:50.337
> 
> 标签：c++, c, algorithm, sudoku

我正在尝试`output multiple sudoku solutions`在我的程序中。例如，当您输入此作为输入时：

```
8..6..9.5.............2.31...7318.6.24.....73...........279.1..5...8..36..3...... 
```

`.`' 表示空格。数字代表已经填充的空格。输出应该是这样的数独解决方案：

```
814637925325149687796825314957318462241956873638274591462793158579481236183562749 
```

但是，我想输出多个解决方案。这将是应该打印的所有解决方案：

```
814637925325149687796825314957318462241956873638274591462793158579481236183562749
814637925325941687796825314957318462241569873638472591462793158579184236183256749
834671925125839647796425318957318462241956873368247591682793154579184236413562789
834671925125839647796524318957318462241956873368247591682793154519482736473165289
834671925125839647796524318957318462241965873368247591682793154519482736473156289 
```

但我的程序只打印出一个解决方案。谁能帮我想出一种打印出多种解决方案的方法？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T04:55:32.500

你不应该回到这里：

```
 if(testTheNumber(arr, row, column+1)==true)
  {
    return true;
  } 
```

相反，您应该让算法尝试所有可能的 k 值。而且您应该只在最后打印解决方案（当您找到所有数字时）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T04:56:32.357

您可以通过在找到解决方案时不停止递归来做到这一点。例如，类似：

```
if (row == 9) {
    // print solution here
    return true;
} 
```

并删除另一个`return true;`，然后递归：

```
testTheNumber(arr, row, column+1); 
```

当您找到解决方案（通过到达最后一行）时，上述将停止递归，并且还将在该点之后继续尝试更多数字。

此外，您可能在该`if(k == 10)`部分中存在错误，因为`k`此时不应该是 10。`k`从循环中存在后，您需要将单元格设置为 0 。

# java - 需要输入数组直到用户输入 0 JAVA

> ID：13023716
> 
> 赞同：1
> 
> 时间：2012-10-23T04:45:29.317
> 
> 标签：java, arrays, user-input

我需要帮助了解如何编写一个接收一定数量整数（必须是 1 到 10）的 for 循环，一旦输入 0（0 将是最后一个数字），它就会停止接收数字。到目前为止，我的代码是：

```
 import java.util.Scanner;
   public class countNum {

      public static void main(String[] args) {

        int[] array;

        Scanner input = new Scanner(System.in);
        System.out.println ("Enter in numbers (1-10) enter 0 when finished:");

        int x = input.nextInt();

        while (x != 0) {
          if (x > 2 && x < 10) {
          //Don't know what to put here to make array[] take in the values
          }
          else
          //Can I just put break? How do I get it to go back to the top of the while loop?
        }
      }   

     } 
```

}

我不明白如何在让扫描仪读取一定数量的未知长度的数字的同时初始化具有设定长度的数组，直到输入 0，然后循环停止接收数组的输入。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T04:53:02.203

好的，这里有更多细节：-

*   `ArrayList`如果你想要一个动态增加的数组，你需要使用。你这样做： -

    ```
    List<Integer> numbers = new ArrayList<Integer>(); 
    ```

*   现在，在上面的代码中，您可以将`number`阅读语句 ( `nextInt`) 放在 while 循环中，因为您想定期阅读它。并在 while 循环中添加一个条件以检查输入的数字是否为 int：-

    ```
    int num = 0;
    while (scanner.hasNextInt()) {
        num = scanner.nextInt();
    } 
    ```

*   此外，您可以自行移动。只需检查号码是否`0`。如果不是`0`，则将其添加到`ArrayList`：-

    ```
    numbers.add(num); 
    ```

*   如果是`0`，请跳出您的 while 循环。

*   而且您在 while 循环中不需要该`x != 0`条件，因为您已经在循环内检查它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T04:54:25.313

在您的情况下，用户似乎能够输入任意数量的数字。对于这种情况，拥有一个数组并不理想，因为需要在数组初始化之前知道数组的大小。不过，您有一些选择：

1.  使用[ArrayList](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html)。这是一种动态扩展的动态数据结构。
2.  询问用户他/她将要输入的数字数量，并使用它来初始化数组。
3.  根据对大小的一些假设创建一个数组。

在情况 2 和 3 中，您还需要包含一些逻辑，使程序在以下情况下停止： (1) 用户输入 0 (2) 或当用户提供的数字数量超过数组的大小时。

我建议坚持第一个解决方案，因为它更容易实施。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T05:12:52.470

我强烈建议你去体验一下 Java Collections。

您可以将程序修复为

```
import java.util.ArrayList;
import java.util.InputMismatchException;
import java.util.List;
import java.util.Scanner;

  public class arrayQuestion {

    public static void main(String[] args) {

        List<Integer> userInputArray = new ArrayList<Integer>();

        Scanner input = new Scanner(System.in);
        System.out.println("Enter 10 Numbers ");
        int count = 0;
        int x;
        try {
            do {
                x = input.nextInt();
                if (x != 0) {
                    System.out.println("Given Number is " + x);
                    userInputArray.add(x);
                } else {
                    System.out
                            .println("Program will stop Getting input from USER");
                    break;
                }
                count++;
            } while (x != 0 && count < 10);

            System.out.println("Numbers from USER : " + userInputArray);
        } catch (InputMismatchException iex) {
            System.out.println("Sorry You have entered a invalid input");
        } catch (Exception e) {
            System.out.println("Something went wrong :-( ");
        }

        // Perform Anything you want to do from this Array List

    }
} 
```

我希望这能解决您的疑问.. 除此之外，如果用户输入任何字符或无效输入，您需要处理异常，如上所述

# asp.net - Windows 服务 SQL 超时异常

> ID：13023727
> 
> 赞同：3
> 
> 时间：2012-10-23T04:47:02.347
> 
> 标签：asp.net, .net, sql-server-2008, windows-services

我有一个 Windows 服务，它每 10 秒连续查询一次 SQL Server 数据库表，我还有一个网站，它也在 25 秒后查询同一个数据库表。

一段时间后我得到异常 - `server timeout exception has occurred`。我浏览了 stack-overflow 站点并对 SQL 配置设置进行了更改，但仍然遇到相同的异常。该怎么办？

**堆栈跟踪**

> 在 System.Data.SqlClient.SqlConnection.OnError(SqlException 异常，Boolean breakConnection) 在 System.Data.SqlClient.SqlInternalConnection.OnError(SqlException 异常，Boolean breakConnection) 在 System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning() 在 System.Data .SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj) 在 System.Data.SqlClient.SqlDataReader.ConsumeMetaData() 在 System.Data.SqlClient.SqlDataReader.get_MetaData() 在 System.Data .SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString) at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream,布尔异步）在 System.Data.SqlClient.SqlCommand.RunExecuteReader（CommandBehavior cmdBehavior，RunBehavior runBehavior，布尔 returnStream，字符串方法，DbAsyncResult 结果）在 System.Data.SqlClient.SqlCommand.RunExecuteReader（CommandBehavior cmdBehavior，RunBehavior runBehavior，布尔 returnStream，字符串方法）在 System.Data.SqlClient.SqlCommand.ExecuteDbDataReader（CommandBehavior 行为）的 System.Data.SqlClient.SqlCommand.ExecuteReader（CommandBehavior 行为，字符串方法）在 System.Data.Common.DbCommand.ExecuteReader（CommandBehavior 行为）System.Data.SqlClient.SqlCommand.ExecuteReader（CommandBehavior 行为，String 方法）处 System.Data.SqlClient.SqlCommand.ExecuteDbDataReader（CommandBehavior 行为）处的 RunExecuteReader（CommandBehavior cmdBehavior，RunBehavior runBehavior，布尔 returnStream，String 方法）。 Common.DbCommand.ExecuteReader（CommandBehavior 行为）System.Data.SqlClient.SqlCommand.ExecuteReader（CommandBehavior 行为，String 方法）处 System.Data.SqlClient.SqlCommand.ExecuteDbDataReader（CommandBehavior 行为）处的 RunExecuteReader（CommandBehavior cmdBehavior，RunBehavior runBehavior，布尔 returnStream，String 方法）。 Common.DbCommand.ExecuteReader（CommandBehavior 行为）
> 在 Microsoft.Practices.EnterpriseLibrary.Data.Database.DoExecuteReader（DbCommand 命令，CommandBehavior cmdBehavior） 在 Microsoft.Practices.EnterpriseLibrary.Data.Database.ExecuteReader（DbCommand 命令）在 Microsoft.Practices.EnterpriseLibrary.Data.CommandAccessor `1.<Execute>d__0.MoveNext() at System.Collections.Generic.List`1..ctor（ IEnumerable 1 源）在 System.Runtime.Remoting.Messaging.Message.Dispatch（对象目标，布尔 fExecuteInContext）在 System.Runtime.Remoting.Messaging.StackBuilderSink.SyncProcessMessage（IMessage msg，Int32 methodPtr，布尔 fExecuteInContext）`1 collection)
> at System.Linq.Enumerable.ToList[TSource](IEnumerable`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T04:56:18.870

给我看代码！超时异常通常是因为您没有关闭数据库连接。

尝试在算法的最后添加代码

```
if (connection.State == System.Data.ConnectionState.Open)
    {
        connection.Close();
        connection.Dispose();
    } 
```

如果您使用 EnterpriseLibrary，请尝试向 commandTimeOut 添加更多时间

```
DbCommand dbcommand = database.GetStoredProcCommand("usp_TheStoredProcedureName");
dbcommand.CommandTimeout = 120; 
```

# android - 将 AVD 连接到 WiFi 而不是 3G

> ID：13023730
> 
> 赞同：1
> 
> 时间：2012-10-23T04:47:38.113
> 
> 标签：android, wifi, avd

我目前正在尝试调试一个需要我连接到 wifi 而不是 3G 的应用程序。我如何告诉 AVD 说它使用的是 WiFi 而不是 3G？

# sql - 单个列中的多个 AS 语句

> ID：13023731
> 
> 赞同：1
> 
> 时间：2012-10-23T04:47:48.727
> 
> 标签：sql

我`SQL`还很陌生，遇到了一个让我难过的问题。解释我正在尝试做的事情会更容易。我有一个表，其中有一列`t.number`包含 4、6 或我不感兴趣的东西。它对应于一个文本字段，`t.text`。这是我想做的伪代码：

```
if (t.number == 4)
   t.text as ImAFour
else if (t.number == 6)
   t.text as ImASix 
```

我尝试写的所有内容都以重复输入或覆盖而告终。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T04:51:56.380

您可以尝试以下方法：

```
SELECT
    CASE t.number WHEN 4 THEN t.text ELSE '' END AS ImAFour,
    CASE t.number WHEN 6 THEN t.text ELSE '' END as ImASix,
    ....
FROM table t 
```

确切的语法将取决于您的 RDBMS，原始问题中没有标记。

# memory-management - 如何将 Thrust 库创建的变量复制到普通的 CUDA 变量

> ID：13023733
> 
> 赞同：0
> 
> 时间：2012-10-23T04:48:09.553
> 
> 标签：memory-management, cuda, thrust

我正在使用 Thrust 库来解决问题。我在使用该库时面临的问题是，当我使用 device_vector 分配内存时，thrust 会自动管理内存。现在我有一个由 cudaMalloc 分配的数组，我想使用在并行之前创建的 device_vector 填充它。所以我会为此编写一个内核，但是推力创建的向量的数据类型是什么。

# python - 用平均值列出理解

> ID：13023734
> 
> 赞同：0
> 
> 时间：2012-10-23T04:48:14.203
> 
> 标签：python, string, list, dictionary, average

我有一个字符串，字典形式为：

```
('The puppy likes flowers',
 {'laughter': (8.5, 0.9313),
  'flowers': (7.88, 1.1718),
  'the': (4.98, 0.9145),
  'puppy': (7.58, 1.4581),
  'died': (1.56, 1.198),
  'laugh': (9.5, 0.1),
  'flow': (2.3, 0.51),
  'likes':(5.9, 0.032),
  'like':(6.5, 0.021)    
   }
  ) 
```

每个括号是对应于（分数，标准差）的元组。我只取每个元组中第一个整数的平均值。我试过这个：

```
def score(string, d):
    if len(string) == 0:
        return 0
    string = string.lower()
    included = [d[word][0]for word in d if word in string]
    return sum(included) / len(included) 
```

当我运行时：

```
print score ('The puppy likes flower', {'laughter': (8.5, 0.9313), 'flower': 
(7.88, 1.1718), 'the':(4.98, 0.9145), 'puppy':(7.58, 1.4581), 
'died':(1.56, 1.198),'laugh': (9.5, 0.1),'flow': (2.3, 0.51)}) 
```

我应该只得到`'the'`,`'puppy',` `'likes'`和`'flowers'`:的平均值，`4.98 + 7.88 + 5.9 + 7.58 / 4`但是这个运行函数还包括`'like'`和`'flow'`: `4.98 + 7.88 + 5.9 + + 7.58 + 6.5 + 2.3 / 6`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T05:12:04.970

首先使用变量字符串不是一个好主意...但是在这里可以...您的逻辑有缺陷...以下有效

```
def avg(l):
    if l:
        return sum(l)/len(l)
    return 0

def score(s, d):
    return avg([d.get(x,[0])[0] for x in s.lower().split()]) 
```

这将为`s`不在其中的字符串添加 0 `d`... 如果您想忽略它们，请改用以下内容

```
def score(s, d):
    return avg([d[x][0] for x in s.lower().split() if x in d]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T04:55:51.207

您应该首先拆分字符串：

```
splited_string = string.split()
included = [d[word][0]for word in d if word in splited_string] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T05:05:53.260

你可以在下面的函数中得到这部分，但我决定稍微清理一下你的元组：

```
tuple = ('The puppy likes flowers',
 {'laughter': (8.5, 0.9313),
  'flowers': (7.88, 1.1718),
  'the': (4.98, 0.9145),
  'puppy': (7.58, 1.4581),
  'died': (1.56, 1.198),
  'laugh': (9.5, 0.1),
  'flow': (2.3, 0.51),
  'likes':(5.9, 0.032),
  'like':(6.5, 0.021)    
   }
  )

string = tuple[0]
dict = tuple[1] 
```

现在定义我们的函数：

```
def score(string, dict):
    s = 0
    n = 0
    for each in string.lower().split(' '):
       if each in dict.keys():
          s += dict[each][0]
          n += 1
    average = s/n
    return average 
```

在你的情况下：

```
In [43]: string
Out[43]: 'The puppy likes flowers'

In [44]: dict
Out[44]: 
{'died': (1.56, 1.198),
 'flow': (2.3, 0.51),
 'flowers': (7.88, 1.1718),
 'laugh': (9.5, 0.1),
 'laughter': (8.5, 0.9313),
 'like': (6.5, 0.021),
 'likes': (5.9, 0.032),
 'puppy': (7.58, 1.4581),
 'the': (4.98, 0.9145)} 
```

评估功能：

```
In [45]: score(string, dict)
Out[45]: 6.585 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T05:15:31.313

而不是使用python的'in'操作尝试使用==，即编辑：

```
string = string.split(' ') #Returns a list of word

included = [d[word][0]for word in d if word == string] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-23T06:29:42.533

与到目前为止的其他答案一样，此答案在字典中查找从输入字符串中拆分出来的单词的分数，这与您的示例代码所做的不同，即查找字典单词作为输入字符串的一部分并将其相加分数。此外，此答案的逻辑与其他一些答案的逻辑相似，但通过使用 python 的内置`filter`函数可以更紧凑地表达。下面显示的程序的输出是`6.585`, `6.15333333333`, `None`,`6.032`四行。

```
w={'puppy': (7.58, 1.4581), 'likes': (5.9, 0.032), 'laugh': (9.5, 0.1), 'flow': (2.3, 0.51), 'the': (4.98, 0.9145), 'flowers': (7.88, 1.1718), 'laughter': (8.5, 0.9313), 'died': (1.56, 1.198), 'like': (6.5, 0.021)}

def score(s, d):
    v = [d[a][0] for a in filter(lambda x: x in d, s.lower().split())]
    return sum(v)/len(v) if len(v) else None

print score('the puppy likes flowers', w)
print score('the puppy likes flower', w)
print score('short stuff', w)
print score('the flowers flow like laughter', w) 
```

# iphone - Cocos2d 在特定的 CCScene 上没有自动旋转

> ID：13023736
> 
> 赞同：0
> 
> 时间：2012-10-23T04:48:32.393
> 
> 标签：iphone, ios, cocos2d-iphone

我有一个菜单场景，我想成为仅限肖像，然后我有一个`gamescene`我想只允许`landscape-home-button-right`但我无法为我的生活弄清楚它。我尝试添加`shouldAutoRotate..`到 CCScene，但这似乎只适用于 RootViewController。如何在 CCScene 中停止自动旋转？感谢您的任何帮助！

我正在使用 Cocos2D 2.0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T09:52:28.543

我可以建议您执行以下步骤： 1\. 创建一个单例，根据正在运行的场景来管理您的方向。2\. 当你进入一个新场景时，你应该告诉这个单例这个场景支持什么方向 3\. 向你的应用程序委托添加如下内容：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    return [[YourSingleton manager] supportingInterfaceOrientation];
}

- (NSUInteger)application:(UIApplication*)application supportedInterfaceOrientationsForWindow:(UIWindow*)window {
    return [[YourSingleton manager] supportingInterfaceOrientation];
} 
```

我之前没有对此进行测试，但它应该可以工作。

# c - 如何在 c 中创建二维数组并使用指针和函数显示它？

> ID：13023739
> 
> 赞同：6
> 
> 时间：2012-10-23T04:48:49.833
> 
> 标签：c, arrays, pointers, malloc, 2d

我正在尝试编写 2 个函数，一个用于读取矩阵（二维数组），另一个用于将其打印出来。到目前为止，我有：

```
 /* Read a matrix: allocate space, read elements, return pointer. The
       number of rows and columns are given by the two arguments. */
    double **read_matrix(int rows, int cols){

        double **mat = (double **) malloc(sizeof(double *)*rows);
        int i=0;
        for(i=0; i<rows; i++){
        /* Allocate array, store pointer  */
        mat[i] = (double *) malloc(sizeof(double)*cols); 
       //what to do after??

         return mat;
    } 
```

然后是打印矩阵功能，不知道是否正确

```
void print_matrix(int rows, int cols, double **mat){
    for(i=0; i<rows; i++){    /* Iterate of each row */
      for(j=0; j<cols; j++){  /* In each row, go over each col element  */
      printf("%f ",mat[i][j]); /* Print each row element */
  }
}
} 
```

这是我用来运行的主要功能：

```
 #include <stdlib.h>

    double **read_matrix(int rows, int cols);
    void print_matrix(int rows, int cols, double **mat);
    void free_matrix(int rows, double **mat);

    int main(){

      double **matrix;
      int rows, cols;
      /* First matrix */
      printf("Matrix 1\n");
      printf("Enter # of rows and cols: ");
      scanf("%d %d",&rows,&cols);
      printf("Matrix, enter %d reals: ",rows*cols);
      matrix = read_matrix(rows,cols); 
      printf("Your Matrix\n");  /* Print the entered data */
      print_matrix(rows,cols,matrix);
      free_matrix(rows, matrix);   /* Free the matrix */

        return 0;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-23T05:10:50.090

试试这个。可能对你有帮助。

```
#include <stdio.h>
#include <stdlib.h>

double **read_matrix(int rows, int cols);
void print_matrix(int rows, int cols, double **mat);
void free_matrix(int rows, double **mat);

double **read_matrix(int rows, int cols){

    double **mat = (double **) malloc(sizeof(double *)*rows);
    int i=0,j=0;
    for(i=0; i<rows; i++)
    /* Allocate array, store pointer  */
        mat[i] = (double *) malloc(sizeof(double)*cols); 

       for(i=0; i<rows; i++){
           for(j=0; j<cols; j++){
               scanf("%lf",&mat[i][j]);
           }
       }
     return mat;
}

void print_matrix(int rows, int cols, double **mat){
    int i=0,j=0;
  for(i=0; i<rows; i++){    /* Iterate of each row */
        for(j=0; j<cols; j++){  /* In each row, go over each col element  */
            printf("%lf ",mat[i][j]); /* Print each row element */
        }
        printf("\n");
    }
}

void free_matrix(int rows, double **mat){
    int i=0;
    for(i=0;i<rows;i++)    
        free(mat[i]);
    free(mat);
}

int main(){

  double **matrix;
  int rows, cols;
  /* First matrix */
  printf("Matrix 1\n");
  printf("Enter # of rows and cols: ");
  scanf("%d%d",&rows,&cols);
  printf("Matrix, enter %d reals: \n",rows*cols);
  matrix = read_matrix(rows,cols); 
  printf("Your Matrix\n");  /* Print the entered data */
  print_matrix(rows,cols,matrix);
  free_matrix(rows, matrix);   /* Free the matrix */

  return 0;
 } 
```

执行：

```
:~$ gcc  exam.c
:~$ ./a.out 
Matrix 1
Enter # of rows and cols: 3
4
Matrix, enter 12 reals: 
1
2
3
4
5
6
7
8
9
9
0
1
Your Matrix
1.000000 2.000000 3.000000 4.000000 
5.000000 6.000000 7.000000 8.000000 
9.000000 9.000000 0.000000 1.000000 
```

# php - 返回给定的字符串匹配行

> ID：13023741
> 
> 赞同：1
> 
> 时间：2012-10-23T04:49:00.100
> 
> 标签：php, file-io, string-matching

我想写这样的功能

```
getLine($mySteing){
 .....
} 
```

给定刺痛包含（匹配），如何获取行格式文件（file.txt）？请帮忙

```
define('COMPANY_FULL_NAME', 'sdfstd') = getLine( "define\(\'COMPANY_FULL_NAME\'\" ); 
```

**文件.txt**

```
define ( 'APP_TITLE', 'Ekdi Inc' ); 
define('COMPANY_NAME', 'WosdfP');
define('COMPANY_FULL_NAME', 'sdfstd'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T04:59:33.200

以下函数将查找与您的字符串匹配的所有行，并将回显行号，如 $i

```
 function getLine($string)
    {

    $file = fopen("fle.txt", "r") or exit("Unable to open file!");
    //Output a line of the file until the end is reached
    $i = 0;
    while(!feof($file))
      {
       $i++;
       $line = fgets($file);
       $pos = strpos($line, $string);
       if( $pos !== false )echo $i.'<br/>';
      }
    fclose($file);

    } 
```

顺便说一句，不要转义字符，不要在字符串参数中使用 \，就像你在你的代码中所做的那样

阅读[http://php.net/manual/en/function.strpos.php](http://php.net/manual/en/function.strpos.php)

# java - 如何计算平均考试成绩

> ID：13023742
> 
> 赞同：0
> 
> 时间：2012-10-23T04:49:39.817
> 
> 标签：java, average

作业问题是编写一个程序，将课堂考试的所有分数相加并求平均值。

我有两个问题。要找到平均值，您必须将总分除以应试人数。我不知道如何记录有多少应试者。

获取平均值的方法是在 while 循环中还是在 while 循环之外？

```
import acm.program.*;

public class AvgScore extends ConsoleProgram {
   public void run(){
   println("This program averages the test scores of an exam until the SENTINEL is entered     ."); 

   int total = 0;

   while(true) {
       int score = readInt("enter the test score: ");
       if (score == SENTINEL) break;  
       total += score; 
            }

  println("the average for the class was");

    }

  private static final int SENTINEL = -1; 

  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T04:51:38.477

只需为每次读取添加一个计数变量

```
int count=0

while(true) {
  int score = readInt("enter the test score: ");
  if (score == SENTINEL) break;  
  total += score; 
  count++;
} 
```

计算平均值

```
double avg = (double)total/count; 
```

# objective-c - 在 uiwebview 中禁用水平滚动视图

> ID：13023743
> 
> 赞同：0
> 
> 时间：2012-10-23T04:49:46.033
> 
> 标签：objective-c

我有一个大小为 650 的视图，我`UIWebView`在这个视图中添加了一个。当我将信息加载到 时`WebView`，水平滚动正在工作。我想禁用水平滚动`WebView`。

内容是否符合我的观点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-23T05:02:19.030

尝试这个：

```
- (void)webViewDidFinishLoad:(UIWebView *)webView {

[webView.scrollView setContentSize: CGSizeMake(webView.frame.size.width, webView.scrollView.contentSize.height)];

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-12T05:28:25.087

如果您能够修改 html，请将下面的 meta 添加到 html 头。

```
 <meta name="viewport" content="width=device-width" /> 
```

# php - 移动网站的 HTML 缩小

> ID：13023745
> 
> 赞同：4
> 
> 时间：2012-10-23T04:49:50.253
> 
> 标签：php, html, apache, mobile, blackberry

我们正在为 Blackberry OS 5.X - 7.X 等低端移动设备开发网站。我们正在使用*gzip 压缩*技术。但是当我检查黑莓 5.X 对*gzip*支持的支持时，我发现他们没有在他们的请求中指定*gzip*支持，这使得服务器自己发送未压缩版本。

那么在这一点上，我可以看看提供缩小的 html 吗？这样我们就可以使用这些版本（不支持*gzip*的版本）节省一些带宽。

这是个好主意吗？如果不是，为什么？

还有是否有任何 apache 模块仅用于缩小（删除空格等）并且不进行压缩？还是我应该使用*php*将它带到缓冲区并用*正则表达式*缩小它？

如果我在某个地方错了，请纠正我？感谢帮助。

**更新：**我找到了这个[apache 模块：pagespeed](https://developers.google.com/speed/pagespeed/mod)但无法测试，因为它仅适用于 Cent OS / Fedora / Ubuntu 并且我在*WAMP上*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T04:53:45.073

您必须使用您的页面测试缩小以查看会发生什么。

它可能不会对下载速度产生太大影响，并且实际上可能会增加服务器处理请求所花费的时间，而不是您节省的下载时间。

许多移动设备，甚至是较旧的黑莓设备，实际上具有与硬连线连接一样快或更快的连接。

例如，这个页面：[http ://en.wikipedia.org/wiki/Comparison_of_server-side_JavaScript_solutions](http://en.wikipedia.org/wiki/Comparison_of_server-side_JavaScript_solutions)

被缩小前是 47560 个字符，没有被缩小是 44729 个。它节省了 6%，但是当它开始时只有 48258 字节时，它只会为您节省 2872 字节或 22980 位。

换句话说，即使在 56k 拨号调制解调器上也只能节省半秒。在任何现代连接上，它都可以忽略不计。

# ruby-on-rails - 在本地存储 CopyCopter 结果

> ID：13023749
> 
> 赞同：2
> 
> 时间：2012-10-23T04:50:13.250
> 
> 标签：ruby-on-rails, caching, copycopter

在[copycopter](http://railscasts.com/episodes/336-copycopter)上的 Railscast 剧集之后，我在 heroku 上设置了我的 copycopter 服务器。一切都很好，直到 AWS 宕机并关闭了 heroku。在那一刻，我所有的copycopter文本都恢复为我在html页面上输入的默认文本。

有没有一种方法可以将成功调用 copycopter 服务器的结果存储在我的 rails 服务器上，以便在另一个 heroku 中断的情况下，我的文本仍然来自 copycopter？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T20:31:09.353

您可以通过传递缓存存储甚至 I18n 记忆来使用 I18n 缓存吗？在我的 Rails 应用程序中，我有`I18n::Backend::Simple.include(I18n::Backend::Memoize)`一个初始化程序，因此所有翻译在第一次命中后都缓存在内存中。I18n 还支持使用真正的缓存存储，因此您可以使用 memcached 或 redis 来存储副本，这将避免您在 copycopter 服务器出现故障时提到的问题。

从[copycopter 自述文件](https://github.com/copycopter/copycopter-ruby-client)中，您还可以导出简介：

> 当 Rails 应用程序运行时，Blurbs 会缓存在内存中。要将所有缓存的简介导出到 yml 文件以供离线访问，请使用 rake 任务：
> 
> `rake copycopter:export`
> 
> 导出的 yaml 将位于`config/locales/copycopter.yml`.

# java - Java中的字符串比较

> ID：13023750
> 
> 赞同：1
> 
> 时间：2012-10-23T04:50:18.833
> 
> 标签：java

我想使用 Java 比较两个字符串。我使用 GDAL 以 cp1251 编码`name`从文件中获取的第一个刺痛。`.mif`其次`kadname`，我从 jsp 获得。为了比较我这样做：

```
if (attrValue instanceof String)
{
    String string3 = 
        new String((attrValue.toString()).getBytes("ISO-8859-1"), "cp1251");
    dbFeature.setAttribute(name, string3);
    System.out.println("Name=" + name);
    System.out.println("kadname=" + kadname);
    if (name.equalsIgnoreCase(kadname))
    {
        kadnum = string3;
        System.out.println("string3" + string3);
    }
} 
```

在控制台中我得到了这个：

```
Name = kadnumm
kadname = kadnumm 
```

这有什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T04:57:08.287

我可以看到它们不相等的唯一原因是前导或尾随空格。

您可以`trim`将字符串删除任何这些空格，然后比较它们：-

```
if (name.trim().equalsIgnoreCase(kadname.trim())) 
```

或者，可能还有一些其他`non-printable`字符不会被`trimming`. 您可以尝试在 中打印您的字符串`single quotes`，并检查是否有：-

```
System.out.println("'" + name + "'"); 
```

# javascript - Backbone.js collection.where 数组包含字符串

> ID：13023751
> 
> 赞同：1
> 
> 时间：2012-10-23T04:50:20.817
> 
> 标签：javascript, backbone.js

我有一个模型的主干集合，其中一个属性（region_list）是一个字符串数组。如何找到 region_list 包含特定字符串的所有模型？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T04:57:41.657

```
collection.filter(function(model){
    return ( _.indexOf(model.get('region_list'), 'specific_string') >= 0 );
}); 
```

使用 Underscore 的**[filter](http://underscorejs.org/#filter)**和**[indexOf](http://underscorejs.org/#indexOf)**方法过滤集合中`region_list`数组中包含 value的所有模型`specific_string`。

此 .filter() 调用的返回值将是模型数组。

# objective-c - 使用 NSMutableURLRequest 以及如何管理响应/失败

> ID：13023752
> 
> 赞同：0
> 
> 时间：2012-10-23T04:50:22.113
> 
> 标签：objective-c, ios, ios6

我正在创建一个`iOS`使用 Web 服务的应用程序。我有一个类可以建立连接并将响应存储在变量中。它还有一个状态变量，其中 1 表示连接成功。我已经设置了一个`NStimer`和一个函数来检查连接和下载何时完成以及是否成功。

我的问题是：

这是管理连接及其结果的正确方法吗？有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T05:15:46.037

[这](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/URLLoadingSystem/Tasks/UsingNSURLConnection.html)是来自 Apple Developer 网站的编程指南，它描述了如何使用 NSURLConnection 委托。您可以在`connectionDidFinishLoading:`方法中管理接收到的数据。请注意，使用这些委托方法将异步加载数据。如果你想同步处理数据，请尝试`sendSynchronousRequest:returningResponse:error:`，但是这个函数不应该在主线程中调用。

# ios6 - UICollectionView 教程请求

> ID：13023753
> 
> 赞同：0
> 
> 时间：2012-10-23T04:50:28.770
> 
> 标签：ios6, uistoryboardsegue, uicollectionview

寻找教程或帮助执行以下操作

将其保留为 iPad 应用程序并使用情节提要。我需要一个（这是我的主）viewController（无细节或导航视图），带有一个显示图像的 UiCollectionView（和单元格）的弹出窗口。我想要一个 ContainerView 在我的主目录中）。Container 显示默认的 imageView 和 CollectionView 中的选择，更改 Container 中的 Image。此外，从 CollectionView Cell 到 Container 的 Image 的 segue 需要是自定义 Segue 类型。

请记住，它适用于带有 Storyboard 的 iPad。没有细节或导航控制器。

教程怎么样。现在没有其他类似的东西了，我肯定会使用帮助。

道格

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T16:16:18.097

另一个[UICollectionView 教程](http://www.raywenderlich.com/22324/beginning-uicollectionview-in-ios-6-part-12)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T23:10:22.387

这个看起来不错..代码也在github上..

教程： http: [//maniacdev.com/2012/09/tutorial-how-to-create-an-ios-6-uicollectionview-using-storyboards/](http://maniacdev.com/2012/09/tutorial-how-to-create-an-ios-6-uicollectionview-using-storyboards/)

来源：[https ://github.com/AshFurrow/UICollectionViewExample](https://github.com/AshFurrow/UICollectionViewExample)

# java - DAO 如何使系统的可扩展性受益？

> ID：13023754
> 
> 赞同：-2
> 
> 时间：2012-10-23T04:51:18.830
> 
> 标签：java, scalability, dao

也许这不是一个技术问题，但我敢打赌这里有很多经验丰富的开发人员可以帮助我回答这个问题

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T05:01:12.683

正如 Sajit 所说，DAO 层本质上是一种抽象。不过我不同意他的解释。抽象某些东西以实现目标的意义——通常是一些更复杂的用例的简化。

您可以轻松地创建一个 DAO 层，该层还提供了比简单地执行应用程序实体 - 数据实体映射更多的功能。它可以提供缓存、优化、翻译、弹性等。所以它没有理由不能提供更好地扩展应用程序的能力。

最终取决于条款 - 缩放对您的应用程序意味着什么？更多更快 ？？？等等

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T04:53:34.747

Dao 通常用于抽象出应用程序中数据库的实现细节，与可伸缩性无关。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T05:00:50.813

DAO（数据访问对象）用于在数据库之上提供一个抽象层。它往往具有最终打开连接并执行查询和/或存储过程的方法。

我认为当涉及到可伸缩性问题时，您需要注意 DAO 中的一件主要事情：连接管理。如果您正在使用一些第三方库，也许类似于[Hibernate](http://www.hibernate.org/)的东西，您*很可能*不必担心连接，因为这些是由库本身管理的。

另一方面，如果您自己实现所有内容，则需要确保在可能的最后一刻打开连接并在可能的第一时间释放它。拥有一个占用连接的 DAO 最终将限制您的应用程序的扩展方式。

最后，在某些情况下，DAO 将直接查询传递给数据库。您需要密切关注如何构建这些查询，以确保它们不涉及任何不必要的处理。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T05:01:13.810

用非常简单的话来说，如果一切都捆绑在一起，您真的无法制作可扩展的应用程序。DAO 只是帮助您处理数据访问逻辑的另一层。这样你就知道在哪里可以找到你的动态 sql 和东西，并且可以增强和维护它。

# cordova - OnRender / onShow / appendHtml 函数未在骨干木偶复合视图中触发

> ID：13023755
> 
> 赞同：0
> 
> 时间：2012-10-23T04:51:22.163
> 
> 标签：cordova, backbone.js, marionette

我们在布局中绑定视图的方式是：

```
App.main.currentView.ChartViewRegion.show(new ChartView({model:chartDataCollections})); 
```

在 ChartView 初始化中，它正确返回了模型数据，但没有调用其他函数。这可能是什么原因？它在网络上运行良好，但是当我们用 phonegap 包装它时，它不会触发这些事件。

谢谢彼得

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-06T05:18:15.083

我注意到了同样的问题，所以我查看了源代码。

onRender 和 onShow 都已从源代码中删除......它们不再存在。他们仍然在评论和文档中，但这些功能不存在..它杀了我。

（我们使用的是 1.04 版）

所以我现在摸不着头脑，试图弄清楚谁在控制 Marionette 的开发，还有多少其他变化……现在看来，一切都需要访问围绕渲染的触发事件，而不是依赖这些回调，但没有找到任何文档来解释它是如何工作的，或者什么是最佳实践。

# javascript - 使用未来日期的小时、分钟和秒数创建计时器倒计时

> ID：13023756
> 
> 赞同：1
> 
> 时间：2012-10-23T04:51:21.653
> 
> 标签：javascript

我正在使用我在互联网上找到的一些代码，该代码从某个日期开始倒计时。我正在尝试编辑代码，以便它只给我一个从未来日期指定的小时、分钟和秒的倒计时。我不能只拥有从指定时间倒计时的代码，我需要它倒计时到未来的指定日期。这很重要，因此如果刷新浏览器，倒计时不会重新开始，而是从中断的地方继续。我将使用 cookie，以便浏览器记住第一次运行时指定的未来日期。

这是HTML：

```
<form name="count">
<input type="text" size="69" name="count2">
</form> 
```

这是javascript：

```
window.onload = function()  {
//change the text below to reflect your own,
var montharray=new Array("Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec")

function countdown(yr,m,d){
var theyear=yr; var themonth=m; var theday=d
var today=new Date()
var todayy=today.getYear()
if (todayy < 1000)
todayy+=1900;
var todaym=today.getMonth()
var todayd=today.getDate()
var todayh=today.getHours()
var todaymin=today.getMinutes()
var todaysec=today.getSeconds()
var todaystring=montharray[todaym]+" "+todayd+", "+todayy+" "+todayh+":"+todaymin+":"+todaysec

futurestring=montharray[m-1]+" "+d+", "+yr

var dd=Date.parse(futurestring)-Date.parse(todaystring)
var dday=Math.floor(dd/(60*60*1000*24)*1)
var dhour=Math.floor((dd%(60*60*1000*24))/(60*60*1000)*1)
var dmin=Math.floor(((dd%(60*60*1000*24))%(60*60*1000))/(60*1000)*1)
var dsec=Math.floor((((dd%(60*60*1000*24))%(60*60*1000))%(60*1000))/1000*1)
if(dday==0&&dhour==0&&dmin==0&&dsec==1){
document.forms.count.count2.value=current
return
}
else
document.forms.count.count2.value= dhour+":"+dmin+":"+dsec;
setTimeout(function() {countdown(theyear,themonth,theday)},1000)
}
//enter the count down date using the format year/month/day
countdown(2012,12,25)
} 
```

我确信上面有多余的代码，因为我只需要一个小时、分钟和秒来传递给`countdown()`函数。年、月和日并不重要，但正如我所说，这是我正在尝试编辑的代码，我在互联网上找到。任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T05:51:08.500

您可以为目标时间创建一个日期对象并获取与当前日期对象的差异。请注意，这取决于具有正确设置时钟的客户端。

```
function timeDiff(target) {

  function z(n) {return (n<10? '0' : '') + n;}

  var timeDiff = target - (new Date());
  var hours    = timeDiff / 3.6e6 | 0;
  var minutes  = timeDiff % 3.6e6 / 6e4 | 0;
  var seconds  = timeDiff % 6e4 / 1e3 | 0;

  return z(hours) + ':' + z(minutes) + ':' + z(seconds);
}

alert(timeDiff(new Date(2012,9,23,17,50,0))); 
```

每秒运行一次，在下一整秒后几毫秒。我会把它留给你。

### 编辑

什么鬼，这是一个计时器来调用它。只需要在文档中有一个 id 为“timer”的元素：

```
function doCountDown(target) {
  document.getElementById('timer').innerHTML = timeDiff(target);
  var lag = 1020 - (new Date() % 100);
  setTimeout(function(){doCountDown(target);}, lag);
}

window.onload = function() {
  doCountDown(new Date(2012,9,23,17,50,0));
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T05:03:13.827

您可以使用[jquery 倒数计时器](http://keith-wood.name/countdown.html)集成很简单，并且有许多选项可以以不同的格式显示....

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-23T04:58:45.007

怎么样

```
now = new Date();
then = new Date("30 Oct 2013");
time_diff_in_milliseconds = then-now;

integer_seconds=(time_diff_in_milliseconds/1000) >>0;
minutes = seconds / 60 |0;  // another convention to get floor
... etc. 
```

您也可以将一天中的时间放入字符串。

```
a=new Date('Oct 30 2013 07:55:07'); b=new Date('Feb 28 2000 20:12:33');

a-b
..
431350954000 
```

# css - 子导航栏覆盖的 Twitter Bootstrap 2 顶部导航下拉菜单

> ID：13023757
> 
> 赞同：2
> 
> 时间：2012-10-23T04:51:27.417
> 
> 标签：css, drop-down-menu, twitter-bootstrap

我正在创建一个 Twitter Bootstrap 主导航和子导航，主导航上有一个下拉菜单。问题是我永远无法让下拉菜单显示在子导航上方。这是HTML：

```
<div class="mainnav navbar navbar-fixed-top navbar-inverse">
    <div class="navbar-inner">
        <div class="container">
            <ul class="nav">
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                        Settings
                    </a>
                    <ul class="dropdown-menu">
                        <li><a>test 1</a></li>
                        <li><a>test 2</a></li>
                    </ul>
                </li>
            </ul>
        </div>
    </div>
</div>

<div class="subnav navbar navbar-fixed-top">
    <div class="navbar-inner">
        <div class="container">
            <ul class="nav">
                <li><a>foo</a></li>
                <li><a>bar</a></li>
            </ul>
        </div>
    </div>
</div> 
```

CSS：

```
.subnav {
    top: 40px;
}

.mainnav .dropdown-menu {
    // how can I show this menu above the subnav???
} 
```

​</p>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T04:54:32.640

没关系，这是我自己想出来的。

```
.subnav {
    top: 40px;
    z-index: 1020; // make z-index smaller than .mainnav
} 
```

JsFiddle 链接：

[http://jsfiddle.net/j2pCX/1/](http://jsfiddle.net/j2pCX/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T04:57:52.720

试试 z-index：

```
.subnav {
    position: absolute;
    top: 40px;
    z-index: 10;

}

.mainnav .dropdown-menu {
    position: absolute;
    z-index: 20;
} 
```

# php - 使用 IMG_FILTER_GAUSSIAN_BLUR 让我的拇指太模糊

> ID：13023767
> 
> 赞同：0
> 
> 时间：2012-10-23T04:52:37.580
> 
> 标签：php

所以我使用我的班级将图像调整为一个非常小的拇指，并且我试图模糊那个拇指以获得一个像样的图像而不是一些破碎的图像全部像素化。但 IMG_FILTER_GAUSSIAN_BLUR 有点太多了。

```
imagefilter($newImg, IMG_FILTER_GAUSSIAN_BLUR);
                imagefilter($newImg, IMG_FILTER_EDGEDETECT);
                imagejpeg($newImg, $this->getImage(), 90); 
```

有什么不错的方法可以从图片中获得高质量的缩略图吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T05:44:20.887

我通过使用此功能找到解决方案：

```
imagecopyresampled($newImg, $img, 0, 0, 0, 0, $this->newWidth, $this->newHeight, $this->width, $this->height);
                imagejpeg($newImg, $this->getImage(), 90); 
```

它真的是一个完美的样品，它的尺寸质量最好！！

:)

# php - getResponseHeader('最后修改'); 不改变价值

> ID：13023776
> 
> 赞同：0
> 
> 时间：2012-10-23T04:53:24.647
> 
> 标签：php, javascript, getresponse

```
var page = 'data/appointments/<? echo $_SESSION['name']; ?><? echo $_SESSION['last']; ?>App.html';
var lM;
function checkModified(){
   $.get(page, function(a,a,x){
      var mod = x.getResponseHeader('last-modified');
      alert (lM);
      alert ("page" +mod);
});
} 
```

当我从我的页面提醒 last-modified 时，它输出相同的值，即使我删除了所有 cookie 和缓存，从服务器中删除文件并替换它。

它仍然输出一个值

```
Tue , Oct 23, 2012 3:37:41 GMT 
```

# php - 使用 curl 来使用 Facebook 中的构建，例如

> ID：13023781
> 
> 赞同：0
> 
> 时间：2012-10-23T04:53:48.163
> 
> 标签：php, facebook, facebook-graph-api, curl

我试图从 facebook 创建内置按钮，但现在 facebook 需要使用 curl 系统，一旦我创建了动作，facebook 就会给我这个代码：

```
curl -F 'access_token=AAAAAKcSOZB8IBACXBZBQ1F5fUqqEeueY0bkj7eAZAeAWgjU5vU8c8ZC5X8L1ZAWGYVTlR0vySQQU0raZCuNCmPlcjxavrG6hsZD' \
 -F 'object=http://samples.ogp.me/226075010839791' \
    'https://graph.facebook.com/me/og.likes' 
```

但我不确定如何使用链接或表单按钮调用此代码，我的网站在 mysql 中有多个用户访问令牌存储

一旦发送了 like 命令，facebook 将发送回一个 id_from_create_call 必须存储，因此当用户不喜欢某些内容时，必须在此处使用 facebook 发送的值：

```
curl -X DELETE \
 -F 'access_token=AAAAAKcSOZB8IBACXBZBQ1F5fUqqEeueY0bkj7eAZAeAWgjU5vU8c8ZC5X8L1ZAWGYVTlR0vySQQU0raZCuNCmPlcjxavrG6hsZD' \
    'https://graph.facebook.com/{'{id_from_create_call}'}' 
```

有人能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T04:56:24.940

[https://developers.facebook.com/docs/reference/php/](https://developers.facebook.com/docs/reference/php/)

你最好使用FB api..

# wordpress - 尝试在 wordpress 中编辑页面或帖子时收到“感谢您使用 WordPress 创建。版本 3.4.2”

> ID：13023785
> 
> 赞同：-2
> 
> 时间：2012-10-23T04:54:37.253
> 
> 标签：wordpress

当我尝试在我的管理员中编辑帖子或页面时，它会显示“**感谢您使用 WordPress 创建。版本 3.4.2** ”。所以，我不能进行任何编辑，只能进行快速编辑。请帮忙，它很紧急。在此先感谢。

![在此处输入图像描述](../Images/0fc9b647cdb6000f0c6fcff6fd065a2e.png)

![在此处输入图像描述](../Images/ab46417a164d0e66547751f92161a1ab.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T06:20:15.437

我刚刚删除并替换了我的 wordpress 文件夹的 wp-admin 文件夹。然后，一切顺利。

# algorithm - 具有指定结果概率的值的随机样本

> ID：13023787
> 
> 赞同：2
> 
> 时间：2012-10-23T04:54:53.243
> 
> 标签：algorithm, random, probability, random-sample

想象一下，我们有四个符号 - *'a'*、*'b'*、*'c'*、*'d'*。我们还有四个给定的符号出现在函数输出中的概率 - **P1**、**P2**、**P3**、**P4**（它们的总和等于**1**）。如何实现一个函数，该函数会生成其中三个符号的随机样本，例如结果符号以那些指定的概率出现在其中？

示例：*'a'*、*'b'*、*'c'*和*'d'*的概率分别为**9/30**、**8/30**、**7/30**和**6/30**。该函数输出这四个符号中任意三个的各种随机样本：*'abc'*、*'dca'*、*'bad'*等等。我们多次运行此函数，计算每个符号在其输出中出现的次数。*最后，为'a'*存储的计数值除以输出的符号总数应收敛到**9/30**，对于*'b'***，对于*'c'*到**7/30**，对于*'d'*到**6/30**。**

 **例如，该函数生成 10 个输出：

```
adc
dab
bca
dab
dba
cab
dcb
acd
cab
abc 
```

其中 30 个符号中包含 9 个*'a'*， 8 个*'b'*， 7 个*'c'*和 6 个*'d'*。当然，这是一个理想主义的例子，因为只有当样本数量大得多时，这些值才会收敛——但它应该有望传达这个想法。

显然，这一切只有在两个概率都不大于 1/3 时才有可能，因为每个单个样本输出总是包含三个不同的符号。如果无法满足所提供的值，则函数可以进入无限循环或以其他方式行为异常。

注意：该函数显然应该使用 RNG，否则应该是无状态的。每个新的调用都应该独立于之前的任何调用，除了 RNG 状态。

**编辑**：即使描述提到从 4 个值中选择 3 个，理想情况下该算法应该能够处理任何样本大小。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T20:39:44.497

您的问题未确定。

如果我们为每个允许的三个字母字符串分配一个概率，p(abc)、p(abd)、p(acd) 等 xtc，我们可以生成一系列方程

```
eqn1: p(abc) + p(abd) + ... others with a "a" ... = p1
  ...
  ...
eqn2: p(abd) + p(acd) + ... others with a "d" ... = p4 
```

这比方程式有更多的未知数，因此有很多解决方法。找到解决方案后，无论您选择哪种方法（如果您是我，请使用单纯形算法），使用@alestanis 描述的轮盘赌方法从每个字符串的概率中采样。

```
from numpy import *

# using cvxopt-1.1.5
from cvxopt import matrix, solvers 

###########################
# Functions to do some parts

# function to find all valid outputs
def perms(alphabet, length):
    if length == 0:
        yield ""
        return
    for i in range(len(alphabet)):
        val1 = alphabet[i]
        for val2 in perms(alphabet[:i]+alphabet[i+1:], length-1):
            yield val1 + val2

# roulette sampler
def roulette_sampler(values, probs):
    # Create cumulative prob distro
    probs_cum = [sum(probs[:i+1]) for i in range(n_strings)]
    def fun():
        r = random.rand()
        for p,s in zip(probs_cum, values):
            if r < p:
                return s
        # in case of rounding error
        return values[-1]
    return fun

############################
#    Main Part

# create list of all valid strings

alphabet = "abcd"
string_length = 3
alpha_probs = [string_length*x/30\. for x in range(9,5,-1)]

# show probs
for a,p in zip(alphabet, alpha_probs):
    print "p("+a+") =",p

# all valid outputs for this particular case
strings = [perm for perm in perms(alphabet, string_length)]
n_strings = len(strings)

# constraints from probabilities p(abc) + p(abd) ... = p(a)
contains = array([[1\. if s.find(a) >= 0 else 0\. for a in alphabet] for s in strings])
#both = concatenate((contains,wons), axis=1).T # hacky, but whatever
#A = matrix(both)
#b = matrix(alpha_probs + [1.])
A = matrix(contains.T)
b = matrix(alpha_probs)

#also need to constrain to [0,1]
wons = array([[1\. for s in strings]])
G = matrix(concatenate((eye(n_strings),wons,-eye(n_strings),-wons)))
h = matrix(concatenate((ones(n_strings+1),zeros(n_strings+1))))

## target matricies for approx KL divergence
# uniform prob over valid outputs
u = 1./len(strings)
P = matrix(eye(n_strings))
q = -0.5*u*matrix(ones(n_strings))
# will minimise p^2 - pq for each p val equally

# Do convex optimisation
sol = solvers.qp(P,q,G,h,A,b)
probs = array(sol['x'])

# Print ouput
for s,p in zip(strings,probs):
    print "p("+s+") =",p
checkprobs = [0\. for char in alphabet]
for a,i in zip(alphabet, range(len(alphabet))):
    for s,p in zip(strings,probs):
        if s.find(a) > -1:
            checkprobs[i] += p
    print "p("+a+") =",checkprobs[i]
print "total =",sum(probs)

# Create the sampling function
rndstring = roulette_sampler(strings, probs)

###################
# Verify

print "sampling..."
test_n = 1000
output = [rndstring() for i in xrange(test_n)]

# find which one it is
sampled_freqs = []
for char in alphabet:
    n = 0
    for val in output:
        if val.find(char) > -1:
            n += 1
    sampled_freqs += [n]

print "plotting histogram..."
import matplotlib.pyplot as plt
plt.bar(range(0,len(alphabet)),array(sampled_freqs)/float(test_n), width=0.5)
plt.show() 
```

编辑：Python代码

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T21:56:32.353

假设一个单词的长度总是比符号数小一，下面的 C# 代码可以完成这项工作：

```
using System;
using System.Collections.Generic;
using System.Linq;
using MathNet.Numerics.Distributions;

namespace RandomSymbols
{
    class Program
    {
        static void Main(string[] args)
        {
            // Sample case:  Four symbols with the following distribution, and 10000 trials
            double[] distribution = { 9.0/30, 8.0/30, 7.0/30, 6.0/30 };
            int trials = 10000;

            // Create an array containing all of the symbols
            char[] symbols = Enumerable.Range('a', distribution.Length).Select(s => (char)s).ToArray();

            // We're assuming that the word length is always one less than the number of symbols
            int wordLength = symbols.Length - 1;

            // Calculate the probability of each symbol being excluded from a given word
            double[] excludeDistribution = Array.ConvertAll(distribution, p => 1 - p * wordLength);

            // Create a random variable using the MathNet.Numerics library
            var randVar = new Categorical(excludeDistribution);
            var random = new Random();
            randVar.RandomSource = random;

            // We'll store all of the words in an array
            string[] words = new string[trials];

            for (int t = 0; t < trials; t++)
            {
                // Start with a word containing all of the symbols
                var word = new List<char>(symbols);

                // Remove one of the symbols
                word.RemoveAt(randVar.Sample());

                // Randomly permute the remainder
                for (int i = 0; i < wordLength; i++)
                {
                    int swapIndex = random.Next(wordLength);
                    char temp = word[swapIndex];
                    word[swapIndex] = word[i];
                    word[i] = temp;
                }

                // Store the word
                words[t] = new string(word.ToArray());
            }

            // Display words
            Array.ForEach(words, w => Console.WriteLine(w));

            // Display histogram
            Array.ForEach(symbols, s => Console.WriteLine("{0}: {1}", s, words.Count(w => w.Contains(s))));
        }

    }
} 
```

更新：以下是 rici 概述的方法的 C 实现。棘手的部分是计算他提到的阈值，这是我用递归完成的。

```
#include <stdio.h>
#include <stdlib.h>
#include <time.h>

// ****** Change the following for different symbol distributions, word lengths, and number of trials ******
double targetFreqs[] = {10.0/43, 9.0/43, 8.0/43, 7.0/43, 6.0/43, 2.0/43, 1.0/43 };
const int WORDLENGTH = 4;
const int TRIALS = 1000000;
// *********************************************************************************************************

const int SYMBOLCOUNT = sizeof(targetFreqs) / sizeof(double);
double inclusionProbs[SYMBOLCOUNT];

double probLeftToIncludeTable[SYMBOLCOUNT][SYMBOLCOUNT];

// Calculates the probability that there will be n symbols left to be included when we get to the ith symbol.
double probLeftToInclude(int i, int n)
{
    if (probLeftToIncludeTable[i][n] == -1)
    {
        // If this is the first symbol, then the number of symbols left to be included is simply the word length.
        if (i == 0)
        {
            probLeftToIncludeTable[i][n] = (n == WORDLENGTH ? 1.0 : 0.0);
        }
        else
        {
            // Calculate the probability based on the previous symbol's probabilities.
            // To get to a point where there are n symbols left to be included, either there were n+1 symbols left
            // when we were considering that previous symbol and we included it, leaving n,
            // or there were n symbols left and we didn't included it, also leaving n.
            // We have to take into account that the previous symbol may have been manditorily included.
             probLeftToIncludeTable[i][n] = probLeftToInclude(i-1, n+1) * (n == SYMBOLCOUNT-i ? 1.0 : inclusionProbs[i-1])
                + probLeftToInclude(i-1, n) * (n == 0 ? 1.0 : 1 - inclusionProbs[i-1]);
        }
    }
    return probLeftToIncludeTable[i][n];
}

// Calculates the probability that the ith symbol won't *have* to be included or *have* to be excluded.
double probInclusionIsOptional(int i)
{
    // The probability that inclusion is optional is equal to 1.0
    // minus the probability that none of the remaining symbols can be included
    // minus the probability that all of the remaining symbols must be included.
    return 1.0 - probLeftToInclude(i, 0) - probLeftToInclude(i, SYMBOLCOUNT - i);
}

// Calculates the probability with which the ith symbol should be included, assuming that
// it doesn't *have* to be included or *have* to be excluded.
double inclusionProb(int i)
{
    // The following is derived by simple algebra:
    // Unconditional probability = (1.0 * probability that it must be included) + (inclusionProb * probability that inclusion is optional)
    // therefore...
    // inclusionProb = (Unconditional probability - probability that it must be included) / probability that inclusion is optional
    return (targetFreqs[i]*WORDLENGTH - probLeftToInclude(i, SYMBOLCOUNT - i)) / probInclusionIsOptional(i);
}

int main(int argc, char* argv[])
{
    srand(time(NULL));

    // Initialize inclusion probabilities
    for (int i=0; i<SYMBOLCOUNT; i++)
        for (int j=0; j<SYMBOLCOUNT; j++)
            probLeftToIncludeTable[i][j] = -1.0;

    // Calculate inclusion probabilities
    for (int i=0; i<SYMBOLCOUNT; i++)
    {
        inclusionProbs[i] = inclusionProb(i);
    }

    // Histogram
    int histogram[SYMBOLCOUNT];
    for (int i=0; i<SYMBOLCOUNT; i++)
    {
        histogram[i] = 0;
    }

    // Scratchpad for building our words
    char word[WORDLENGTH+1];
    word[WORDLENGTH] = '\0';

    // Run trials
    for (int t=0; t<TRIALS; t++)
    {
        int included = 0;

        // Build the word by including or excluding symbols according to the problem constraints
        // and the probabilities in inclusionProbs[].
        for (int i=0; i<SYMBOLCOUNT && included<WORDLENGTH; i++)
        {
            if (SYMBOLCOUNT - i == WORDLENGTH - included // if we have to include this symbol
                || (double)rand()/(double)RAND_MAX < inclusionProbs[i]) // or if we get a lucky roll of the dice
            {
                word[included++] = 'a' + i;
                histogram[i]++;
            }
        }

        // Randomly permute the word
        for (int i=0; i<WORDLENGTH; i++)
        {
            int swapee = rand() % WORDLENGTH;
            char temp = word[swapee];
            word[swapee] = word[i];
            word[i] = temp;
        }

        // Uncomment the following to show each word
        // printf("%s\r\n", word);
    }

    // Show the histogram
    for (int i=0; i<SYMBOLCOUNT; i++)
    {
        printf("%c: target=%d, actual=%d\r\n", 'a'+i, (int)(targetFreqs[i]*WORDLENGTH*TRIALS), histogram[i]);
    }

    return 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T23:16:23.097

我认为这是一个非常有趣的问题。我不知道一般的解决方案，但在样本大小为 n-1 的情况下（如果有解决方案）很容易解决，因为正好有 n 个可能的样本，每个样本都对应于一个不存在的样本的元素。

假设我们正在从大小为 4 的宇宙中寻找大小为 3 的样本中的 F a = 9/30、F b = 8/30、F c = 7/30、F d = 6/30 [，]就像[在]OP[中]一样[。]我们可以通过选择不包含给定对象的样本将这些频率中的每一个直接转换为样本频率。例如，我们希望选择的对象中有 9/30 是`a`'s；`a`一个样本中不能有多个符号，并且样本中总是有三个符号；因此，9/10 的样本必须包含`a`，而 1/10 的样本不能包含`a`。但是只有一个可能的样本不包含`a`: `bcd`。所以 10% 的样本必须是`bcd`. 同样，20% 必须是`acd`; 30%`abd`和 40% `abc`。（或者，更一般地说，F [ā] = 1 - (n-1)F [a]其中 F [ā]是不包括 的（唯一）样本的频率`a`）

我不禁想到，这种观察与生成独特样本的经典方法之一相结合可以解决一般问题。但我没有那个解决方案。对于它的价值，我正在考虑的算法如下：

```
To select a random sample of size k out of a universe U of n objects:
1) Set needed = k; available = n.
2) For each element in U, select a random number in the range [0, 1).
3) If the random number is less than k/n:
     3a) Add the element to the sample.
     3b) Decrement needed by 1\. If it reaches 0, we're finished.
4) Decrement available, and continue with the next element in U. 
```

所以我的想法是应该可以通过在步骤 3 中更改阈值来操纵元素的频率，使其以某种方式成为相应元素所需频率的函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T06:46:22.383

为此，您必须使用一个临时数组来存储概率的**累积总和**。

在您的示例中，概率分别为 9/30、8/30、7/30 和 6/30。然后你应该有一个数组：

```
values = {'a', 'b', 'c', 'd'}
proba = {9/30, 17/30, 24/30, 1} 
```

然后你选择一个随机数`r`并`[0, 1]`这样做：

```
char chooseRandom() {
    int i = 0;
    while (r > proba[i])
        ++i; 

    return values[i];
} 
```**

# android - 如何从图库中加载图像视图中的图像？

> ID：13023788
> 
> 赞同：12
> 
> 时间：2012-10-23T04:54:55.147
> 
> 标签：android, image, android-intent, loadimage

我有一个活动，它有一个按钮。当我单击按钮时，它会将我重定向到图片库。我想使用图像视图在下一个活动中显示所选图像。但它不显示图像。设置图像时视图在屏幕外。

下面给出了我选择图像并继续下一步的代码。我在我的活动中没有使用真实的历史。

```
 @Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);

     if (requestCode == RESULT_LOAD_IMAGE && resultCode == RESULT_OK
            && null != data) {
        Uri selectedImage = data.getData();
        String[] filePathColumn = { MediaStore.Images.Media.DATA };

        Cursor cursor = getContentResolver().query(selectedImage,
                filePathColumn, null, null, null);
        cursor.moveToFirst();
        int columnIndex = cursor.getColumnIndex(filePathColumn[0]);
        String picturePath = cursor.getString(columnIndex);
        cursor.close();
        if (!(picturePath.equals(""))) {
            Intent intent = new Intent();
            intent.setClass(MainActivity.this, ImageInGellary.class);
            intent.putExtra("picturePath", picturePath);
            startActivity(intent);

        }
    }
}

public class ImageInGellary extends Activity {
    Button cancel;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
                WindowManager.LayoutParams.FLAG_FULLSCREEN);
        setContentView(R.layout.load_image);
        cancel = (Button) findViewById(R.id.buttonCancelPicture);
        Intent in = getIntent();
        savedInstanceState = in.getExtras();
        String picturePath = savedInstanceState.getString("picturePath");
        ImageView imageView = (ImageView) findViewById(R.id.img_view);
        imageView.setImageBitmap(BitmapFactory.decodeFile(picturePath));
        cancel.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {

                /*
                 * Intent i = new Intent(Intent.ACTION_PICK,
                 * android.provider.MediaStore
                 * .Images.Media.EXTERNAL_CONTENT_URI);
                 * 
                 * startActivityForResult(i, RESULT_LOAD_IMAGE);
                 */
                Intent intent = new Intent();
                intent.setClass(ImageInGellary.this, MainActivity.class);
                startActivity(intent);

            }
        });
    }

} 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-23T05:29:30.313

```
 public class ImageGalleryDemoActivity extends Activity {

        private static int RESULT_LOAD_IMAGE = 1;

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);

            Button buttonLoadImage = (Button) findViewById(R.id.buttonLoadPicture);
            buttonLoadImage.setOnClickListener(new View.OnClickListener() {

                @Override
                public void onClick(View arg0) {

                    Intent i = new Intent(
                            Intent.ACTION_PICK,
                            android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);

                    startActivityForResult(i, RESULT_LOAD_IMAGE);
                }
            });
        }

        @Override
        protected void onActivityResult(int requestCode, int resultCode, Intent data) {
            super.onActivityResult(requestCode, resultCode, data);

            if (requestCode == RESULT_LOAD_IMAGE && resultCode == RESULT_OK && null != data) {
                Uri selectedImage = data.getData();
                String[] filePathColumn = { MediaStore.Images.Media.DATA };

                Cursor cursor = getContentResolver().query(selectedImage,
                        filePathColumn, null, null, null);
                cursor.moveToFirst();

                int columnIndex = cursor.getColumnIndex(filePathColumn[0]);
                String picturePath = cursor.getString(columnIndex);
                cursor.close();

                ImageView imageView = (ImageView) findViewById(R.id.imgView);
                imageView.setImageBitmap(BitmapFactory.decodeFile(picturePath));

            }

        }
    } 
```

To support android 11 you need to add this code in AndroidMainfest.xml

```
 <queries>
            <intent>
                <action android:name="android.intent.action.GET_CONTENT" />
                <data android:mimeType="image/*"/>
            </intent>
        </queries> 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-05-04T06:49:44.520

# 如果您想在 1 行中实现它，那么您需要做的就是：

```
Picasso.with(MainActivity.this).load(data.getData()).noPlaceholder().centerCrop().fit().into((ImageView) findViewById(R.id.imageView1)); 
```

**完整的解决方案：-**

选择图片

```
public void pickImage() {

    Intent intent = new Intent();
    intent.setType("image/*");
    intent.setAction(Intent.ACTION_GET_CONTENT);
    startActivityForResult(Intent.createChooser(intent, "Select Picture"), SELECT_PICTURE);

} 
```

加载图像

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    if (resultCode == RESULT_OK) {
        if (requestCode == SELECT_PICTURE) {

            //Get ImageURi and load with help of picasso
            //Uri selectedImageURI = data.getData();

            Picasso.with(MainActivity1.this).load(data.getData()).noPlaceholder().centerCrop().fit()
                    .into((ImageView) findViewById(R.id.imageView1));
        }

    }
} 
```

在您的情况下，您需要将 ImageURI 传递给下一个活动

```
Uri selectedImageURI = data.getData(); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-08-31T20:54:31.027

```
public void onClick(View view) {
    Intent gallery = new Intent(Intent.ACTION_GET_CONTENT);
    gallery.setType("image/*");
    startActivityForResult(gallery, RESULT_LOAD_IMAGE);
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);

    if(requestCode == RESULT_LOAD_IMAGE && resultCode == RESULT_OK){
        Uri imageUri = data.getData();
        imgView.setImageURI(imageUri);

    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-01-22T08:40:28.263

我已经解决了你的问题。选择图像后，将图像 Uri 转换为字符串，然后在您的第二个类中，将字符串转换回图像。

[http://whats-online.info/science-and-tutorials/95/Android-get-image-from-gallery-into-imageview-programmatically/](http://whats-online.info/science-and-tutorials/95/Android-get-image-from-gallery-into-imageview-programmatically/)

[http://whats-online.info/science-and-tutorials/49/Android-passing-multiple-data-from-one-activity-to-another/](http://whats-online.info/science-and-tutorials/49/Android-passing-multiple-data-from-one-activity-to-another/)

```
@Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        switch(requestCode) {
            case SELECT_PHOTO:
                if(resultCode == RESULT_OK){
                    Uri selectedImage = data.getData();
                    if(selectedImage !=null){
                        Intent intent=new Intent(MainActivity.this, Activity2.class);
                  Bundle extras = new Bundle();
                  extras.putString("image", selectedImage.toString());
                  intent.putExtras(extras);
                  startActivity(intent);

                    }
                }
        } 
```

**Activity2.class**

```
 Bundle extras = getIntent().getExtras();
          String name = extras.getString("image");
         Uri imageFinal=Uri.parse(name); 
```

# iphone - 如何在 iphone 中将时间转换为 24 小时格式？

> ID：13023797
> 
> 赞同：2
> 
> 时间：2012-10-23T04:56:18.490
> 
> 标签：iphone, xcode

我必须将给定的时间转换为 24 小时格式。但我没有得到它。不知道我哪里出错了。如果我将 TimeStart 设置为下午 1:15，那么我应该得到 13:15 ..

```
Item *item=[sectionItems objectAtIndex:itemId];
 NSLog(@"%@",item.TimeStart);
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    [dateFormatter setDateFormat:@"HH:mm a"];
    NSString *formattedDateString = [dateFormatter stringFromDate:item.TimeStart];
    NSLog(@"%@",formattedDateString); 
```

在上面的代码中，我有一个 Item 类，并且我有`NSString`*TimeStart; 当我看到 formattedDateString 它返回 null。我该如何解决？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T05:09:39.607

```
 Item *item=[sectionItems objectAtIndex:itemId];
  NSLog(@"%@",item.TimeStart);

NSString *str = @"1:45.PM";// put here item.TimeStart

NSDateFormatter *dateFormatter = [[[NSDateFormatter alloc] init] autorelease];
[dateFormatter setDateFormat:@"hh:mm.a"];// here give the format which you get in TimeStart

NSDate *date = [dateFormatter dateFromString: str];

dateFormatter = [[[NSDateFormatter alloc] init] autorelease];
[dateFormatter setDateFormat:@"HH:mm"];

NSString *convertedString = [dateFormatter stringFromDate:date];
NSLog(@"Converted String : %@",convertedString); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T04:59:40.530

我只是简单地 setDateFormat 像`[formatter setDateFormat:@"HH:mm"];` Remove`a`

并在 caode 下方检查其时间格式为 24 小时或 12

```
NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
[formatter setLocale:[NSLocale currentLocale]];
[formatter setDateStyle:NSDateFormatterNoStyle];
[formatter setTimeStyle:NSDateFormatterShortStyle];
NSString *dateString = [formatter stringFromDate:[NSDate date]];
NSRange amRange = [dateString rangeOfString:[formatter AMSymbol]];
NSRange pmRange = [dateString rangeOfString:[formatter PMSymbol]];
BOOL is24h = (amRange.location == NSNotFound && pmRange.location == NSNotFound);
[formatter release];
NSLog(@"%@\n",(is24h ? @"YES" : @"NO")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T05:11:12.617

使用它来设置 24 小时格式。

```
[currentDate setDateFormat:@"yyyy-MM-dd HH:mm"]; 
```

或者

```
[formatter setDateFormat:@"HH:mm"]; 
```

不使用格式化程序

```
NSRange range;
range.location = 2;
range.length = 2;
NSString *dateString=[NSString stringWithFormat:@"%@:%@",[myString substringToIndex:2],          [myString substringWithRange:range]]; 
```

这是我在项目中使用的代码，它为我工作

```
NSDateFormatter *dateFormatter = [[[NSDateFormatter alloc] init] autorelease];
[dateFormatter setDateFormat:@"HH:mm"];
 NSString *dateString = [dateFormatter stringFromDate:[NSDate date]];

NSLog(@"Current time date:%@", dateString); 
```

输出：当前时间日期：14:41

# ruby-on-rails - 如何查询activerecord的select_value方法？

> ID：13023799
> 
> 赞同：3
> 
> 时间：2012-10-23T04:56:28.490
> 
> 标签：ruby-on-rails, ruby-on-rails-3, postgresql

谁能告诉我如何在 select_value 中编写查询。

我试过了，

```
 ActiveRecord::Base.connection.select_value("select count(*) from leave_details where status= 'Pending' and 'employeedetails_id'=25") 
```

但它显示错误

```
 invalid input syntax for integer: "employeedetails_id". 
```

我正在使用 PostgreSQL。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-23T05:15:00.957

单引号用于引用 PostgreSQL 中的字符串（以及甚至假装尊重 SQL 标准的所有其他 SQL 数据库），所以你说的是这样的：

```
some_string = some_integer 
```

当你这样做时：

```
'employeedetails_id'=25 
```

这没有任何意义：如果没有明确的类型转换，您将无法比较字符串和整数。您根本不需要引用该标识符：

```
ActiveRecord::Base.connection.select_value(%q{
    select count(*)
    from leave_details
    where status = 'Pending'
      and employeedetails_id = 25
}) 
```

如果您甚至确实需要引用标识符（可能区分大小写或包含空格），那么您将在 PostgreSQL 中使用双引号。

* * *

显然，您创建的列`"EmployeeDetails_id"`是区分大小写的。这意味着您总是必须使用这种情况，并且总是必须双引号：

```
ActiveRecord::Base.connection.select_value(%q{
    select count(*)
    from leave_details
    where status = 'Pending'
      and "EmployeeDetails_id" = 25
}) 
```

我建议您修改您的表格以不使用​​混合大小写标识符：

1.  它们违背了标准的 Ruby/Rails 命名。
2.  它们迫使您在使用它们的任何地方都使用混合大小写的列名双引号。
3.  他们违背了标准的 PostgreSQL 实践。

这会让你一次又一次地绊倒。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T05:24:17.580

直接执行 SQL 并不是真正的 Rails 方式，这样做会失去任何数据库的可移植性。

您应该为 leave_details 创建一个模型。例如

```
rails g model LeaveDetails status:string employeedetails_id:integer 
```

然后，代码将是：

```
LeaveDetails.where({ :status => 'Pending', :employeedetails_id => 25 }).count 
```

# ubuntu - 无法在 Ubuntu 10.04 中安装最新的 phpUnit

> ID：13023808
> 
> 赞同：15
> 
> 时间：2012-10-23T04:57:44.687
> 
> 标签：ubuntu, phpunit, pear

我正在尝试在 Ubuntu 10.04 中安装 PHPUnit，但我收到这些错误消息

```
sudo pear install -a pear.phpunit.de/PHPUnit
Duplicate package channel://pear.phpunit.de/File_Iterator-1.3.3 found
Duplicate package channel://pear.phpunit.de/File_Iterator-1.3.2 found
install failed 
```

我尝试重新安装 PEAR，升级它；更新了 PEAR 和 PHPUnit 频道；清除了 PEAR 的缓存但仍然没有运气，我不断收到同样的错误。

有没有人有同样的问题并且知道如何解决它？

谢谢你。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-25T21:43:50.200

是的，Dex 指出，但我想我也会把它作为答案。

不知道为什么你需要 sudo （取自 edorian 的回答），这就是我所做的。

```
pear clear-cache
pear install phpunit/File_Iterator
pear install phpunit/Text_Template
pear install --force --alldeps pear.phpunit.de/PHPUnit 
```

基本上，文件迭代器和文本模板是我得到重复的两个，所以这些是我必须单独安装的，所以在进行 phpunit 安装时它不会失败。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T13:55:02.713

我也遇到了这个问题，因为工作的服务器仍在 PHP 5.2 上，并且直接从 PEAR 安装 PHPUnit 选择了一些与 PHP 5.2 不兼容的包的错误版本。

为了修复安装：

1）我首先从频道 phpunit**卸载了所有软件包。**

2）接下来我安装**了冲突包的正确版本**：

```
pear install pear.phpunit.de/File_Iterator-1.3.2
pear install pear.phpunit.de/Text_Template-1.1.2
pear install pear.phpunit.de/PHP_Timer-1.0.2 
```

3）接下来我可以**安装 phpunit**：

```
[root@DanielGarcia ~]# pear install pear.phpunit.de/phpunit
Did not download optional dependencies: pear.phpunit.de/PHP_Invoker, use --alldeps to download automatically
phpunit/PHPUnit can optionally use package "pear.phpunit.de/PHP_Invoker" (version >= 1.1.0)
downloading PHPUnit-3.6.12.tgz ...
Starting to download PHPUnit-3.6.12.tgz (120,240 bytes)
..........................done: 120,240 bytes
downloading PHP_CodeCoverage-1.1.4.tgz ...
Starting to download PHP_CodeCoverage-1.1.4.tgz (132,781 bytes)
...done: 132,781 bytes
downloading PHPUnit_MockObject-1.1.1.tgz ...
Starting to download PHPUnit_MockObject-1.1.1.tgz (19,910 bytes)
...done: 19,910 bytes
downloading PHP_TokenStream-1.1.4.tgz ...
Starting to download PHP_TokenStream-1.1.4.tgz (9,877 bytes)
...done: 9,877 bytes
install ok: channel://pear.phpunit.de/PHPUnit_MockObject-1.1.1
install ok: channel://pear.phpunit.de/PHP_TokenStream-1.1.4
install ok: channel://pear.phpunit.de/PHP_CodeCoverage-1.1.4
install ok: channel://pear.phpunit.de/PHPUnit-3.6.12** 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-04T16:35:13.543

我在使用 Ubuntu-10.04 时遇到了同样的问题。与 PHP 5.3.2 兼容的 PHPUnit 版本是 3.6。这就是造成问题的原因。我通过安装所有依赖项的确切版本来修复它。以下是我们需要的包：

*   PHPUnit
*   File_Iterator-1.3.2
*   PHP_Timer-1.0.3
*   PHP_TokenStream-1.1.4
*   PHPUnit_MockObject-1.1.1
*   Text_Template-1.1.2
*   PHP_CodeCoverage

详细说明在[这里](http://blog.ashwinidhekane.com/installing-phpunit-with-php-5-3-2/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-24T17:01:52.437

最近有一个导致该错误的包装问题：

要修复它，请尝试：

```
sudo pear install --force --alldeps pear.phpunit.de/PHPUnit 
```

你可能已经这样做了，但是把它留给其他人：

```
sudo pear clear-cache 
```

（一旦备份；目前似乎有问题）。

在 bugtracker 上讨论的参考问题：

[https://github.com/sebastianbergmann/phpunit/issues/687](https://github.com/sebastianbergmann/phpunit/issues/687)

和梨中的错误：

[https://pear.php.net/bugs/bug.php?id=19650](https://pear.php.net/bugs/bug.php?id=19650)

# java - DJ JWebBrowser: how to show but disable Address and Button bars?

> ID：13023809
> 
> 赞同：-1
> 
> 时间：2012-10-23T04:57:51.013
> 
> 标签：java, swing, url, browser, swt

I am using chrriis.dj.nativeswing.swtimpl.components.JWebBrowser in my swing application to open web page.

The page is going to show "Facebook Authentication" page and I want to prevent user from inputting some other URL other than I specify and also Forward and Back buttons should be visible but not has no affect.

So following functions are applicable for my goal

```
 setButtonBarVisible(false);
    setLocationBarVisible(false); 
```

Once user completes the authentication I will handle the locationChanged event.

```
 @Override
    public void locationChanged(WebBrowserNavigationEvent arg0) {
        System.out.println("locationChanged!");
        ....
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T16:07:00.133

I think what you want is a custom decorator. Check the demo application, under "JWebBrowser > Custom Decorator".

In your case, you could create a new decorator class, as an adapted copy of DefaultWebBrowserDecorator or a subclass with appropriate override. You would also have to decide if this decorator is to be used only by one instance of the JWebBrowser or all instances (like child popups, etc.)

# php - Mysqli 参数错误

> ID：13023813
> 
> 赞同：0
> 
> 时间：2012-10-23T04:58:22.893
> 
> 标签：php, mysqli

当我运行此查询时，我收到

```
Warning: mysqli_fetch_array() expects parameter 1 to be mysqli_result, boolean given in /home/morgan58/public_html/wow/includes/index/index_admin.php on line 188
SELECT * FROM characters WHERE id=5
Warning: mysqli_free_result() expects parameter 1 to be mysqli_result, boolean given in /home/morgan58/public_html/wow/includes/index/index_admin.php on line 194 
```

查询正在运行，它正在尝试选择正确的信息，但是对于实际输出，它给了我一个 fetch_array 错误；如果有人能看到错误所在，将不胜感激。谢谢你。

```
<?php
  $adminid= $admin->get_id();
  $characterdb= 'characters';
$link = mysqli_connect("$server", "$user", "$pass", "$characterdb");
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}
$query = "SELECT * FROM characters WHERE id=$adminid";
$result = mysqli_query($link, $query);
while ($row = mysqli_fetch_array($result, MYSQLI_ASSOC))
{
echo $query;
echo $row['name'];
}
mysqli_free_result($result);
mysqli_close($link);
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T05:02:36.193

您的查询中有错误，因此`mysqli_query()`返回 false。使用前检查是否有效：

```
if ($result) {
    /// your code
}else {
    // your query failed
    die("Error: ".mysqli_error($link)); // will print your error
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T05:19:24.280

```
$query = "SELECT * FROM characters WHERE id=$adminid";
//further correction is single quote your variable in this case you are increase success run of your query
$query = "SELECT * FROM characters WHERE id='$adminid'";

$result = mysqli_query($link, $query);

// its good you check before you leap
if($result){
    // your process
} else {
    echo "Unable to find given admin id";
} 
```

# java - Java 代码不工作

> ID：13023816
> 
> 赞同：-3
> 
> 时间：2012-10-23T04:58:32.000
> 
> 标签：java

```
public static long sum7()
{
    int c = 1;
    boolean isprime = true;
    long prime = 0;
    for (long i = 3; i <= Long.MAX_VALUE; i++)
    {
        for (long j = 2; j < i; j++)
        {
            if (i % j == 0)
            {
                isprime = false;
                break;
            }
        }
        if (isprime == true)
        {
            c++;
        }
        if (c == 10001)
        {
            prime = i;
            break;
        }
    }
    return prime;
}
static Scanner scanner1 = new Scanner(System.in);

public static void main(String[] args)
{
    System.out.println(sum7());
} 
```

我正在为项目欧拉问题（Q7）尝试以下代码，我应该找到第 10001 个素数，但它只是不起作用。构建成功，但没有显示任何内容请帮助。提前致谢....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T05:02:28.780

目前尚不清楚您要做什么，因此我必须根据代码进行猜测。我假设您希望找到第 10001 个素数。

首先，您忘记`isprime`在循环结束时设置回 true 。就像现在一样，在第一次迭代后它将永久为假，这意味着 3 是唯一检测到的素数，之后您将一直循环到 2^63（实际上是无限的）并最终返回 0。

`boolean isprime = true;`您可以通过移动到循环的开头来解决问题并更好地确定变量的范围。您还不如`prime`在循环中进入循环并将`if c==10001`位更改为直接返回。

其次，`c = c++;`不正确。您正在递增变量，然后将其重置为旧值。你应该做`c++;`或`c = c + 1`。

# google-maps-api-3 - 谷歌地图信息窗口大小

> ID：13023820
> 
> 赞同：-1
> 
> 时间：2012-10-23T04:59:01.810
> 
> 标签：google-maps-api-3, infowindow

我的信息窗口大小有问题..当我将更多信息添加到选项卡向下部分时，更多信息会增加..请查看此链接..

[关联](http://toymasini.com/me/)

我的问题： infowindow 到大.. 我如何调整它的大小？下来白色聚我这么大..（（

在 css 文件中，我无法提交任何内容..

```
/* Layout helpers
----------------------------------*/
.ui-helper-hidden { display: none; }
.ui-helper-hidden-accessible { position: absolute; left: -99999999px; }
.ui-helper-reset { margin: 0; padding: 0; border: 0; outline: 0; line-height: 1.3; text-decoration: none; font-size: 100%; list-style: none; }
.ui-helper-clearfix:after { content: "."; display: block; height: 0; clear: both; visibility: hidden; }
.ui-helper-clearfix { display: inline-block; }
/* required comment for clearfix to work in Opera \*/
* html .ui-helper-clearfix { height:1%; }
.ui-helper-clearfix { display:block; }
/* end clearfix */
.ui-helper-zfix { width: 100%; height: 100%; top: 0; left: 0; position: absolute; opacity: 0; filter:Alpha(Opacity=0); }

/* Interaction Cues
----------------------------------*/
.ui-state-disabled { cursor: default !important; }

/* Icons
----------------------------------*/

/* states and images */
.ui-icon { display: block; text-indent: -99999px; overflow: hidden; background-repeat: no-repeat; }

/* Misc visuals
----------------------------------*/

/* Overlays */
.ui-widget-overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; }

/*
* jQuery UI CSS Framework
* Copyright (c) 2010 AUTHORS.txt (http://jqueryui.com/about)
* Dual licensed under the MIT (MIT-LICENSE.txt) and GPL (GPL-LICENSE.txt) licenses.
* To view and modify this theme, visit http://jqueryui.com/themeroller/?ctl=themeroller
*/

/* Component containers
----------------------------------*/
.ui-widget { font-family: Verdana,Arial,sans-serif; font-size: 1.1em; }
.ui-widget .ui-widget { font-size: 1em; }
.ui-widget input, .ui-widget select, .ui-widget textarea, .ui-widget button { font-family: Verdana,Arial,sans-serif; font-size: 1em; }
.ui-widget-content { border: 1px solid #aaaaaa; background: #ffffff url(images/ui-bg_glass_75_ffffff_1x400.png) 50% 50% repeat-x; color: #222222; }
.ui-widget-content a { color: #222222; }
.ui-widget-header { border: 1px solid #aaaaaa; background: #cccccc url(images/ui-bg_highlight-soft_75_cccccc_1x100.png) 50% 50% repeat-x; color: #222222; font-weight: bold; }
.ui-widget-header a { color: #222222; }

/* Interaction states
----------------------------------*/
.ui-state-default, .ui-widget-content .ui-state-default { border: 1px solid #d3d3d3; background: #e6e6e6 url(images/ui-bg_glass_75_e6e6e6_1x400.png) 50% 50% repeat-x; font-weight: normal; color: #555555; }
.ui-state-default a, .ui-state-default a:link, .ui-state-default a:visited { color: #555555; text-decoration: none; }
.ui-state-hover, .ui-widget-content .ui-state-hover, .ui-state-focus, .ui-widget-content .ui-state-focus { border: 1px solid #999999; background: #dadada url(images/ui-bg_glass_75_dadada_1x400.png) 50% 50% repeat-x; font-weight: normal; color: #212121; }
.ui-state-hover a, .ui-state-hover a:hover { color: #212121; text-decoration: none; }
.ui-state-active, .ui-widget-content .ui-state-active { border: 1px solid #aaaaaa; background: #ffffff url(images/ui-bg_glass_65_ffffff_1x400.png) 50% 50% repeat-x; font-weight: normal; color: #212121; }
.ui-state-active a, .ui-state-active a:link, .ui-state-active a:visited { color: #212121; text-decoration: none; }
.ui-widget :active { outline: none; }

/* Interaction Cues
----------------------------------*/
.ui-state-highlight, .ui-widget-content .ui-state-highlight {border: 1px solid #fcefa1; background: #fbf9ee url(images/ui-bg_glass_55_fbf9ee_1x400.png) 50% 50% repeat-x; color: #363636; }
.ui-state-highlight a, .ui-widget-content .ui-state-highlight a { color: #363636; }
.ui-state-error, .ui-widget-content .ui-state-error {border: 1px solid #cd0a0a; background: #fef1ec url(images/ui-bg_inset-soft_95_fef1ec_1x100.png) 50% bottom repeat-x; color: #cd0a0a; }
.ui-state-error a, .ui-widget-content .ui-state-error a { color: #cd0a0a; }
.ui-state-error-text, .ui-widget-content .ui-state-error-text { color: #cd0a0a; }
.ui-priority-primary, .ui-widget-content .ui-priority-primary { font-weight: bold; }
.ui-priority-secondary, .ui-widget-content .ui-priority-secondary { opacity: .7; filter:Alpha(Opacity=70); font-weight: normal; }
.ui-state-disabled, .ui-widget-content .ui-state-disabled { opacity: .35; filter:Alpha(Opacity=35); background-image: none; } 
```

第二部分

```
/* Icons
----------------------------------*/

/* states and images */
.ui-icon { width: 16px; height: 16px; background-image: url(images/ui-icons_222222_256x240.png); }
.ui-widget-content .ui-icon {background-image: url(images/ui-icons_222222_256x240.png); }
.ui-widget-header .ui-icon {background-image: url(images/ui-icons_222222_256x240.png); }
.ui-state-default .ui-icon { background-image: url(images/ui-icons_888888_256x240.png); }
.ui-state-hover .ui-icon, .ui-state-focus .ui-icon {background-image: url(images/ui-icons_454545_256x240.png); }
.ui-state-active .ui-icon {background-image: url(images/ui-icons_454545_256x240.png); }
.ui-state-highlight .ui-icon {background-image: url(images/ui-icons_2e83ff_256x240.png); }
.ui-state-error .ui-icon, .ui-state-error-text .ui-icon {background-image: url(images/ui-icons_cd0a0a_256x240.png); }

/* positioning */
.ui-icon-carat-1-n { background-position: 0 0; }
.ui-icon-carat-1-ne { background-position: -16px 0; }
.ui-icon-carat-1-e { background-position: -32px 0; }
.ui-icon-carat-1-se { background-position: -48px 0; }
.ui-icon-carat-1-s { background-position: -64px 0; }
.ui-icon-carat-1-sw { background-position: -80px 0; }
.ui-icon-carat-1-w { background-position: -96px 0; }
.ui-icon-carat-1-nw { background-position: -112px 0; }
.ui-icon-carat-2-n-s { background-position: -128px 0; }
.ui-icon-carat-2-e-w { background-position: -144px 0; }
.ui-icon-triangle-1-n { background-position: 0 -16px; }
.ui-icon-triangle-1-ne { background-position: -16px -16px; }
.ui-icon-triangle-1-e { background-position: -32px -16px; }
.ui-icon-triangle-1-se { background-position: -48px -16px; }
.ui-icon-triangle-1-s { background-position: -64px -16px; }
.ui-icon-triangle-1-sw { background-position: -80px -16px; }
.ui-icon-triangle-1-w { background-position: -96px -16px; }
.ui-icon-triangle-1-nw { background-position: -112px -16px; }
.ui-icon-triangle-2-n-s { background-position: -128px -16px; }
.ui-icon-triangle-2-e-w { background-position: -144px -16px; }
.ui-icon-arrow-1-n { background-position: 0 -32px; }
.ui-icon-arrow-1-ne { background-position: -16px -32px; }
.ui-icon-arrow-1-e { background-position: -32px -32px; }
.ui-icon-arrow-1-se { background-position: -48px -32px; }
.ui-icon-arrow-1-s { background-position: -64px -32px; }
.ui-icon-arrow-1-sw { background-position: -80px -32px; }
.ui-icon-arrow-1-w { background-position: -96px -32px; }
.ui-icon-arrow-1-nw { background-position: -112px -32px; }
.ui-icon-arrow-2-n-s { background-position: -128px -32px; }
.ui-icon-arrow-2-ne-sw { background-position: -144px -32px; }
.ui-icon-arrow-2-e-w { background-position: -160px -32px; }
.ui-icon-arrow-2-se-nw { background-position: -176px -32px; }
.ui-icon-arrowstop-1-n { background-position: -192px -32px; }
.ui-icon-arrowstop-1-e { background-position: -208px -32px; }
.ui-icon-arrowstop-1-s { background-position: -224px -32px; }
.ui-icon-arrowstop-1-w { background-position: -240px -32px; }
.ui-icon-arrowthick-1-n { background-position: 0 -48px; }
.ui-icon-arrowthick-1-ne { background-position: -16px -48px; }
.ui-icon-arrowthick-1-e { background-position: -32px -48px; }
.ui-icon-arrowthick-1-se { background-position: -48px -48px; }
.ui-icon-arrowthick-1-s { background-position: -64px -48px; }
.ui-icon-arrowthick-1-sw { background-position: -80px -48px; }
.ui-icon-arrowthick-1-w { background-position: -96px -48px; }
.ui-icon-arrowthick-1-nw { background-position: -112px -48px; }
.ui-icon-arrowthick-2-n-s { background-position: -128px -48px; }
.ui-icon-arrowthick-2-ne-sw { background-position: -144px -48px; }
.ui-icon-arrowthick-2-e-w { background-position: -160px -48px; }
.ui-icon-arrowthick-2-se-nw { background-position: -176px -48px; }
.ui-icon-arrowthickstop-1-n { background-position: -192px -48px; }
.ui-icon-arrowthickstop-1-e { background-position: -208px -48px; }
.ui-icon-arrowthickstop-1-s { background-position: -224px -48px; }
.ui-icon-arrowthickstop-1-w { background-position: -240px -48px; }
.ui-icon-arrowreturnthick-1-w { background-position: 0 -64px; }
.ui-icon-arrowreturnthick-1-n { background-position: -16px -64px; }
.ui-icon-arrowreturnthick-1-e { background-position: -32px -64px; }
.ui-icon-arrowreturnthick-1-s { background-position: -48px -64px; }
.ui-icon-arrowreturn-1-w { background-position: -64px -64px; }
.ui-icon-arrowreturn-1-n { background-position: -80px -64px; }
.ui-icon-arrowreturn-1-e { background-position: -96px -64px; }
.ui-icon-arrowreturn-1-s { background-position: -112px -64px; }
.ui-icon-arrowrefresh-1-w { background-position: -128px -64px; }
.ui-icon-arrowrefresh-1-n { background-position: -144px -64px; }
.ui-icon-arrowrefresh-1-e { background-position: -160px -64px; }
.ui-icon-arrowrefresh-1-s { background-position: -176px -64px; }
.ui-icon-arrow-4 { background-position: 0 -80px; }
.ui-icon-arrow-4-diag { background-position: -16px -80px; }
.ui-icon-extlink { background-position: -32px -80px; }
.ui-icon-newwin { background-position: -48px -80px; }
.ui-icon-refresh { background-position: -64px -80px; }
.ui-icon-shuffle { background-position: -80px -80px; }
.ui-icon-transfer-e-w { background-position: -96px -80px; }
.ui-icon-transferthick-e-w { background-position: -112px -80px; }
.ui-icon-folder-collapsed { background-position: 0 -96px; }
.ui-icon-folder-open { background-position: -16px -96px; }
.ui-icon-document { background-position: -32px -96px; }
.ui-icon-document-b { background-position: -48px -96px; }
.ui-icon-note { background-position: -64px -96px; }
.ui-icon-mail-closed { background-position: -80px -96px; }
.ui-icon-mail-open { background-position: -96px -96px; }
.ui-icon-suitcase { background-position: -112px -96px; }
.ui-icon-comment { background-position: -128px -96px; }
.ui-icon-person { background-position: -144px -96px; }
.ui-icon-print { background-position: -160px -96px; }
.ui-icon-trash { background-position: -176px -96px; }
.ui-icon-locked { background-position: -192px -96px; }
.ui-icon-unlocked { background-position: -208px -96px; }
.ui-icon-bookmark { background-position: -224px -96px; }
.ui-icon-tag { background-position: -240px -96px; }
.ui-icon-home { background-position: 0 -112px; }
.ui-icon-flag { background-position: -16px -112px; }
.ui-icon-calendar { background-position: -32px -112px; }
.ui-icon-cart { background-position: -48px -112px; }
.ui-icon-pencil { background-position: -64px -112px; }
.ui-icon-clock { background-position: -80px -112px; }
.ui-icon-disk { background-position: -96px -112px; }
.ui-icon-calculator { background-position: -112px -112px; }
.ui-icon-zoomin { background-position: -128px -112px; }
.ui-icon-zoomout { background-position: -144px -112px; }
.ui-icon-search { background-position: -160px -112px; }
.ui-icon-wrench { background-position: -176px -112px; }
.ui-icon-gear { background-position: -192px -112px; }
.ui-icon-heart { background-position: -208px -112px; }
.ui-icon-star { background-position: -224px -112px; }
.ui-icon-link { background-position: -240px -112px; }
.ui-icon-cancel { background-position: 0 -128px; }
.ui-icon-plus { background-position: -16px -128px; }
.ui-icon-plusthick { background-position: -32px -128px; }
.ui-icon-minus { background-position: -48px -128px; }
.ui-icon-minusthick { background-position: -64px -128px; }
.ui-icon-close { background-position: -80px -128px; }
.ui-icon-closethick { background-position: -96px -128px; }
.ui-icon-key { background-position: -112px -128px; }
.ui-icon-lightbulb { background-position: -128px -128px; }
.ui-icon-scissors { background-position: -144px -128px; }
.ui-icon-clipboard { background-position: -160px -128px; }
.ui-icon-copy { background-position: -176px -128px; }
.ui-icon-contact { background-position: -192px -128px; }
.ui-icon-image { background-position: -208px -128px; }
.ui-icon-video { background-position: -224px -128px; }
.ui-icon-script { background-position: -240px -128px; }
.ui-icon-alert { background-position: 0 -144px; }
.ui-icon-info { background-position: -16px -144px; }
.ui-icon-notice { background-position: -32px -144px; }
.ui-icon-help { background-position: -48px -144px; }
.ui-icon-check { background-position: -64px -144px; }
.ui-icon-bullet { background-position: -80px -144px; }
.ui-icon-radio-off { background-position: -96px -144px; }
.ui-icon-radio-on { background-position: -112px -144px; }
.ui-icon-pin-w { background-position: -128px -144px; }
.ui-icon-pin-s { background-position: -144px -144px; }
.ui-icon-play { background-position: 0 -160px; }
.ui-icon-pause { background-position: -16px -160px; }
.ui-icon-seek-next { background-position: -32px -160px; }
.ui-icon-seek-prev { background-position: -48px -160px; }
.ui-icon-seek-end { background-position: -64px -160px; }
.ui-icon-seek-start { background-position: -80px -160px; }
/* ui-icon-seek-first is deprecated, use ui-icon-seek-start instead */
.ui-icon-seek-first { background-position: -80px -160px; }
.ui-icon-stop { background-position: -96px -160px; }
.ui-icon-eject { background-position: -112px -160px; }
.ui-icon-volume-off { background-position: -128px -160px; }
.ui-icon-volume-on { background-position: -144px -160px; }
.ui-icon-power { background-position: 0 -176px; }
.ui-icon-signal-diag { background-position: -16px -176px; }
.ui-icon-signal { background-position: -32px -176px; }
.ui-icon-battery-0 { background-position: -48px -176px; }
.ui-icon-battery-1 { background-position: -64px -176px; }
.ui-icon-battery-2 { background-position: -80px -176px; }
.ui-icon-battery-3 { background-position: -96px -176px; }
.ui-icon-circle-plus { background-position: 0 -192px; }
.ui-icon-circle-minus { background-position: -16px -192px; }
.ui-icon-circle-close { background-position: -32px -192px; }
.ui-icon-circle-triangle-e { background-position: -48px -192px; }
.ui-icon-circle-triangle-s { background-position: -64px -192px; }
.ui-icon-circle-triangle-w { background-position: -80px -192px; }
.ui-icon-circle-triangle-n { background-position: -96px -192px; }
.ui-icon-circle-arrow-e { background-position: -112px -192px; }
.ui-icon-circle-arrow-s { background-position: -128px -192px; }
.ui-icon-circle-arrow-w { background-position: -144px -192px; }
.ui-icon-circle-arrow-n { background-position: -160px -192px; }
.ui-icon-circle-zoomin { background-position: -176px -192px; }
.ui-icon-circle-zoomout { background-position: -192px -192px; }
.ui-icon-circle-check { background-position: -208px -192px; }
.ui-icon-circlesmall-plus { background-position: 0 -208px; }
.ui-icon-circlesmall-minus { background-position: -16px -208px; }
.ui-icon-circlesmall-close { background-position: -32px -208px; }
.ui-icon-squaresmall-plus { background-position: -48px -208px; }
.ui-icon-squaresmall-minus { background-position: -64px -208px; }
.ui-icon-squaresmall-close { background-position: -80px -208px; }
.ui-icon-grip-dotted-vertical { background-position: 0 -224px; }
.ui-icon-grip-dotted-horizontal { background-position: -16px -224px; }
.ui-icon-grip-solid-vertical { background-position: -32px -224px; }
.ui-icon-grip-solid-horizontal { background-position: -48px -224px; }
.ui-icon-gripsmall-diagonal-se { background-position: -64px -224px; }
.ui-icon-grip-diagonal-se { background-position: -80px -224px; } 
```

/ ***** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** *** /

```
/* Misc visuals
----------------------------------*/

/* Corner radius */
.ui-corner-tl { -moz-border-radius-topleft: 4px; -webkit-border-top-left-radius: 4px; border-top-left-radius: 4px; }
.ui-corner-tr { -moz-border-radius-topright: 4px; -webkit-border-top-right-radius: 4px; border-top-right-radius: 4px; }
.ui-corner-bl { -moz-border-radius-bottomleft: 4px; -webkit-border-bottom-left-radius: 4px; border-bottom-left-radius: 4px; }
.ui-corner-br { -moz-border-radius-bottomright: 4px; -webkit-border-bottom-right-radius: 4px; border-bottom-right-radius: 4px; }
.ui-corner-top { -moz-border-radius-topleft: 4px; -webkit-border-top-left-radius: 4px; border-top-left-radius: 4px; -moz-border-radius-topright: 4px; -webkit-border-top-right-radius: 4px; border-top-right-radius: 4px; }
.ui-corner-bottom { -moz-border-radius-bottomleft: 4px; -webkit-border-bottom-left-radius: 4px; border-bottom-left-radius: 4px; -moz-border-radius-bottomright: 4px; -webkit-border-bottom-right-radius: 4px; border-bottom-right-radius: 4px; }
.ui-corner-right {  -moz-border-radius-topright: 4px; -webkit-border-top-right-radius: 4px; border-top-right-radius: 4px; -moz-border-radius-bottomright: 4px; -webkit-border-bottom-right-radius: 4px; border-bottom-right-radius: 4px; }
.ui-corner-left { -moz-border-radius-topleft: 4px; -webkit-border-top-left-radius: 4px; border-top-left-radius: 4px; -moz-border-radius-bottomleft: 4px; -webkit-border-bottom-left-radius: 4px; border-bottom-left-radius: 4px; }
.ui-corner-all { -moz-border-radius: 4px; -webkit-border-radius: 4px; border-radius: 4px; }

/* Overlays */
.ui-widget-overlay { background: #aaaaaa url(images/ui-bg_flat_0_aaaaaa_40x100.png) 50% 50% repeat-x; opacity: .30;filter:Alpha(Opacity=30); }
.ui-widget-shadow { margin: -8px 0 0 -8px; padding: 8px; background: #aaaaaa url(images/ui-bg_flat_0_aaaaaa_40x100.png) 50% 50% repeat-x; opacity: .30;filter:Alpha(Opacity=30); -moz-border-radius: 8px; -webkit-border-radius: 8px; border-radius: 8px; }/* Tabs
----------------------------------*/
.ui-tabs { position: relative; padding: .4em; zoom: 0; } /* position: relative prevents IE scroll bug (element with position: relative inside container with overflow: auto appear as "fixed") */
.ui-tabs .ui-tabs-nav { margin: 0; padding: .3em .3em 0; }
.ui-tabs .ui-tabs-nav li { list-style: none; float: left; position: relative; top: 1px; margin: 0 .2em 1px 0; border-bottom: 0 !important; padding: 0; white-space: nowrap; }
.ui-tabs .ui-tabs-nav li a { float: left; padding: .5em 1em; text-decoration: none; }
.ui-tabs .ui-tabs-nav li.ui-tabs-selected { margin-bottom: 0; padding-bottom: 1px; }
.ui-tabs .ui-tabs-nav li.ui-tabs-selected a, .ui-tabs .ui-tabs-nav li.ui-state-disabled a, .ui-tabs .ui-tabs-nav li.ui-state-processing a { cursor: text; }
.ui-tabs .ui-tabs-nav li a, .ui-tabs.ui-tabs-collapsible .ui-tabs-nav li.ui-tabs-selected a { cursor: pointer; } /* first selector in group seems obsolete, but required to overcome bug in Opera applying cursor: text overall if defined elsewhere... */
.ui-tabs .ui-tabs-panel { display: block; border: 0; padding: 1em 1.4em; background: none; }
.ui-tabs .ui-tabs-hide { display: none !important; } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T16:05:33.003

在Firefox中使用“检查元素”；包含信息窗口的 div 在内联 css 中分配了 500+ 的高度。

# android - 无法在外部存储中写入或读取文件 - Android

> ID：13023826
> 
> 赞同：1
> 
> 时间：2012-10-23T04:59:53.230
> 
> 标签：android, file, file-io

我正在尝试编写一个简单的程序，将文件写入外部存储并从中读取。以下是问题的描述：
1\. 文件名 = "hello_files.txt" 包含文本 "hello world" 存储在`/sdcard`.
2\. 将数据写入文件后，可以看到文件`adb`。
3\. 但是，一旦将应用程序加载到手机上并使用第三方文件浏览器应用程序查看，文件 hello_files.txt 中似乎没有写入任何文本。似乎写入部分有问题我的程序，但我不知道是什么。我在下面给出了代码的两个部分，用于编写和阅读。

从文件读取的代码：

```
 public void readFromFile() {

            //Step 1\. Check if the storage is available. 
            boolean mStorageAvailable;
            boolean mStorageReadWrite;

            String state = Environment.MEDIA_MOUNTED;
            Log.v(this.toString(), "State of media = " + state);

            if(Environment.MEDIA_MOUNTED.equals(state)) {
                Log.v(this.toString(), "Media is mounted.");
                mStorageAvailable = true;
                mStorageReadWrite = true;

                File dir = Environment.getExternalStorageDirectory();
                String fileName = dir + "/" + file;
                Log.v(this.toString(), "Reading from file = " + fileName);

                File f = new File(dir, file);

                FileReader fr = null;
                try {
                    fr = new FileReader(f);
                    Log.v(this.toString(), "Wrapping a buffered reader around file reader.");
                    BufferedReader bufRead = new BufferedReader(fr, 8192);
                    //Log.v(this.toString(), bufRead.toString());
                    String line;
                    try {
                        line = bufRead.readLine();
                        Log.v(this.toString(), "Line read = " + line);
                        Toast.makeText(getApplicationContext(), line, Toast.LENGTH_SHORT).show();
                    } catch (IOException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                        Log.v(this.toString(), "IOException found in reading line from file.");
                    }   
                } catch (FileNotFoundException e1) {
                    // TODO Auto-generated catch block
                    e1.printStackTrace();
                    Log.v(this.toString(), "File not found for reading.");
                }
            }
} 
```

写入文件的代码是：

```
 public void writeToFile() {

        //Step 2\. Check if external storage is mounted. 
        boolean mStorageExists;
        boolean mStorageReadWrite;

        String state = Environment.getExternalStorageState();
        Log.v(this.toString(), "External media mounted state = " + state);

        if(Environment.MEDIA_MOUNTED.equals(state)) {
            //media is mounted.
            //Mounted storage is read/write. 
            //Write to the file.

            mStorageExists = true;
            mStorageReadWrite = true;

            Log.v(this.toString(), "Going to write to a file.");

            //get directory.
            File dir = Environment.getExternalStorageDirectory();
            Log.v(this.toString(), "Root directory = " + dir.getAbsolutePath());
            String fileName = dir.getAbsolutePath() + "/" + file;

            Log.v(this.toString(), "File to write to is present at " + fileName);

            File f = new File(dir, file);

            FileOutputStream fos;
            try {
                fos = new FileOutputStream(f);
            } catch (FileNotFoundException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
                Log.v(this.toString(), "File not found.");
            }
            try {
                fos = openFileOutput(file, MODE_WORLD_READABLE | MODE_WORLD_WRITEABLE);
                Log.v(this.toString(), "Bytes of the string = " + str.getBytes().toString());
                fos.write(str.getBytes());
                //Log.v(this.toString(), "Local path = ");
                fos.close();
            } catch (FileNotFoundException e) {
                // TODO Auto-generated catch block
                Log.v(this.toString(), "File not found!!");
                e.printStackTrace();
            } catch (IOException e) {
                Log.v(this.toString(), "IO Exception.");
                e.printStackTrace();
            }
        } else if(Environment.MEDIA_MOUNTED_READ_ONLY.equals(state)) {
            //media is mounted but read only.
            mStorageExists = true;
            mStorageReadWrite = false;
            Log.v(this.toString(), "The media is read-only mounted.");
        } else if( (Environment.MEDIA_NOFS.equals(state)) || (Environment.MEDIA_REMOVED.equals(state)) || (Environment.MEDIA_UNMOUNTED.equals(state))) {
            mStorageExists = false;
            mStorageReadWrite = false;
            Log.v(this.toString(), "There is some problem with the media.");
        }
    } 
```

日志（来自`Log`详细标签）：

```
10-23 10:26:19.444: V/com.sriram.fileops.MainActivity$2@44e95cc0(466): Read from file button clicked.
10-23 10:26:19.444: V/com.sriram.fileops.MainActivity@44e90428(466): State of media = mounted
10-23 10:26:19.444: V/com.sriram.fileops.MainActivity@44e90428(466): Media is mounted.
10-23 10:26:19.444: V/com.sriram.fileops.MainActivity@44e90428(466): Reading from file = /sdcard/hello_files.txt
10-23 10:26:19.453: V/com.sriram.fileops.MainActivity@44e90428(466): Wrapping a buffered reader around file reader.
10-23 10:26:19.453: V/com.sriram.fileops.MainActivity@44e90428(466): Line read = null 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-21T17:10:41.627

除了包括访问外部存储的权限外，以下用于写入和读取文件的功能也有效。

```
 <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

写入文件：

```
 public void writeToFile() {

        //Step 2\. Check if external storage is mounted. 
        boolean mStorageExists;
        boolean mStorageReadWrite;

        String state = Environment.getExternalStorageState();
        Log.v(this.toString(), "External media mounted state = " + state);

        if(Environment.MEDIA_MOUNTED.equals(state)) {
            //media is mounted.
            //Mounted storage is read/write. 
            //Write to the file.

            mStorageExists = true;
            mStorageReadWrite = true;

            Log.v(this.toString(), "Going to write to a file.");

            //get directory.
            File dir = Environment.getExternalStorageDirectory();
            Log.v(this.toString(), "Root directory = " + dir.getAbsolutePath());

            String file_to_write = getFileToWrite(dir);  //this returns the exact name of the file.

            String fileName = dir.getAbsolutePath() + "/" + file_to_write;

            Log.v(this.toString(), "File to write to is present at " + file_to_write);

            File f = new File(dir, file_to_write);
            FileWriter fw = null;
            try {
                fw = new FileWriter(f);
                fw.write(str);
                fw.close();
            } catch (IOException e2) {
                // TODO Auto-generated catch block
                Log.v(this.toString(), "IOException caught in initializing filewriter.");
                e2.printStackTrace();
            }
        } else if(Environment.MEDIA_MOUNTED_READ_ONLY.equals(state)) {
            //media is mounted but read only.
            mStorageExists = true;
            mStorageReadWrite = false;
            Log.v(this.toString(), "The media is read-only mounted.");
        } else if( (Environment.MEDIA_NOFS.equals(state)) || (Environment.MEDIA_REMOVED.equals(state)) || (Environment.MEDIA_UNMOUNTED.equals(state))) {
            mStorageExists = false;
            mStorageReadWrite = false;
            Log.v(this.toString(), "There is some problem with the media.");
        }
    } 
```

和从文件中读取的函数：

```
 public void readFromFile() {

        //Step 1\. Check if the storage is available. 
        boolean mStorageAvailable;
        boolean mStorageReadWrite;

        String state = Environment.MEDIA_MOUNTED;
        Log.v(this.toString(), "State of media = " + state);

        if(Environment.MEDIA_MOUNTED.equals(state)) {
            Log.v(this.toString(), "Media is mounted.");
            mStorageAvailable = true;
            mStorageReadWrite = true;

            File dir = Environment.getExternalStorageDirectory();
            String file_to_read_from = getFileToRead(dir);
            String fileName = dir + "/" + file_to_read_from;
            Log.v(this.toString(), "Reading from file = " + fileName);

            File f = new File(dir, file_to_read_from);
            //Log.v(this.toString(), "Read from file = " + f.canRead() + " " + f.isFile() + " " + f.exists() + " " + f.length() + " " + f.lastModified());

            try {
                FileReader fis = new FileReader(f);
                Log.v(this.toString(), "Wrapping a buffered reader around file reader.");
                BufferedReader bufRead = new BufferedReader(fis, 100);
                String line;
                try {
                    line = bufRead.readLine();
                    Toast.makeText(getApplicationContext(), line, Toast.LENGTH_SHORT).show();
                    Log.v(this.toString(), "Line read = " + line);
                    while(line != null) {
                        Log.v(this.toString(), "Line read = " + line);
                        Toast.makeText(getApplicationContext(), line, Toast.LENGTH_SHORT).show();
                        line = bufRead.readLine();
                    }
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                    Log.v(this.toString(), "IOException found in reading line from file.");
                }   
            } catch (FileNotFoundException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
                Log.v(this.toString(), "File not found for reading.");
            }
        }
    } 
```

# c - 将数据发送到我的服务器中选择的客户端

> ID：13023829
> 
> 赞同：0
> 
> 时间：2012-10-23T05:00:13.873
> 
> 标签：c, linux, sockets

我正在学习套接字编程，我希望客户端连接到我的服务器。我可以用他们的具体地址向他们发送数据..

例如

服务器--->客户端1

╚--->客户端2

╚--->客户3

连接来自：192.168.5.3

连接来自：192.168.5.10

连接来自：192.168.5.15

例如，假设客户端 1 向我发送数据，然后客户端 2 也向我发送数据，我只想回复客户端 1，我怎么可能这样做？..

我将如何存储我的客户，所以当我需要向他们发送数据时，我知道我将向哪个客户发送数据？

这是我的代码。

```
#include <stdio.h>
#include <stdlib.h>
#include <sys/ioctl.h>
#include <sys/socket.h>
#include <sys/time.h>
#include <netinet/in.h>
#include <errno.h>
#include <string.h>
#include <sys/select.h>
#include <sys/types.h>
#include <unistd.h>
#include <sys/stat.h>
#include <fcntl.h>
#include <poll.h>

#define TRUE             1
#define FALSE            0

typedef struct SERVER_FD{

int sPort;
int serverFD;
int smaxFD; 
int newFD;

}sSD;
pid_t pid, sid;
int cFD, 
    dSize, 
    err, 
    start = 1,
    state,
    DescRead,
    DCSERVER = FALSE;

int fd;
char buf[255];
int nbytes; 

struct sockaddr_in  addr, cli_addr;
unsigned long ip;
char strbuf[256];
socklen_t clilen;
fd_set fdin, fduse;
struct pollfd pfds[2];
int rc;

void process(int ServerFD, int Port, int sMax, int NewSFD);
void cleanUP(int i, int max);
void dlogs(unsigned long ip);

main (int argc, char *argv[])
{
    sSD link;
    sSD *sCon;
    sCon = &link;
    sCon->sPort = 53234;

    fd = open("/tmp/myFIFO", O_RDWR);
        if(fd == -1) {
        printf("Could not open the pipe\n");
    }

fcntl(fd, F_SETFL,
fcntl(fd, F_GETFL) | 
O_NONBLOCK);

   sCon->serverFD = socket(AF_INET, SOCK_STREAM, 0);
   if (sCon->serverFD != -1)
   {
    err = setsockopt(sCon->serverFD, SOL_SOCKET,  SO_REUSEADDR,(char *)&start, sizeof(start));
      if (err != -1)
            {
                err = ioctl(sCon->serverFD, FIONBIO, (char *)&start);

                    if (err != -1){

                    process(sCon->serverFD,sCon->sPort,sCon->smaxFD,sCon->newFD);

                    }
                            else{

                        perror("ioctl() failed");
                            close(sCon->serverFD);
                                exit(EXIT_FAILURE);

                        }
            }

                    else{

              perror("setsockopt() failed");
                close(sCon->serverFD);
                    exit(EXIT_FAILURE);
                        }
   }
       else{
       perror("FAILED CONNECTING TO SOCKET");
            exit(EXIT_FAILURE);
   } 

}

void process(int ServerFD, int Port, int sMax, int NewSFD){

   bzero((char *) &addr, sizeof(addr));

   addr.sin_family      = AF_INET;
   addr.sin_addr.s_addr = 0;
   addr.sin_port        = htons(Port);

   err = bind(ServerFD,(struct sockaddr *)&addr, sizeof(addr));
   if (err < 0)
   {
      perror("bind() failed");
      close(ServerFD);
      exit(EXIT_FAILURE);
   }

   err = listen(ServerFD, 32);
   if (err < 0)
   {
      perror("listen() failed");
      close(ServerFD);
      exit(EXIT_FAILURE);
   }

   clilen = sizeof(cli_addr);

   FD_ZERO(&fdin);
   sMax = ServerFD;
   FD_SET(ServerFD, &fdin);

   do
   {

        fduse = fdin;

      //printf("Waiting on select()...\n");
      err = select(sMax + 1, &fduse, NULL, NULL, NULL);

      if (err < 0)
      {
     perror("  select() failed");
     break;
      }

      DescRead = err;
      for (cFD=0; cFD <= sMax  &&  DescRead > 0; ++cFD)
      {

     if (FD_ISSET(cFD, &fduse))
     {

        DescRead -= 1;

        if (cFD == ServerFD)
        {
           //printf("  Listening socket is readable\n");

           do
           {

              NewSFD = accept(ServerFD,(struct sockaddr *) &cli_addr, &clilen);
              if (NewSFD < 0)
              {
                 if (errno != EWOULDBLOCK)
                 {
                    perror("  accept() failed");
                    DCSERVER = TRUE;
                 }
                 break;
              }
                ip = ntohl(cli_addr.sin_addr.s_addr);
                printf("  Connection from %d.%d.%d.%d\n",
                    (int)(ip>>24)&0xff,
                    (int)(ip>>16)&0xff,
                    (int)(ip>>8)&0xff,
                    (int)(ip>>0)&0xff);
                    dlogs(ip);

              FD_SET(NewSFD, &fdin);
              if (NewSFD > sMax)
                 sMax = NewSFD;

           } while (NewSFD != -1);

        }

        else
        {
           //printf("  Descriptor %d is readable\n", cFD);
          pfds[0].fd = fd;
          pfds[0].events = POLLIN;
          pfds[1].fd = cFD;
          pfds[1].events = POLLIN;
          state = FALSE;

           do
           {
            rc = poll(pfds, 2, -1);

            if (pfds[0].revents & POLLIN)
             {
              while ((nbytes = read(fd, buf, sizeof(buf)-1)) > 0)
               {
                   buf[nbytes] = '\0';
                     printf("%s\n", buf);
                   }

              pfds[0].events = 0;
              pfds[1].events = POLLIN | POLLOUT;

               }

            if (pfds[1].revents & POLLIN)
            {
              err = recv(cFD, strbuf, sizeof(strbuf), 0);
              if (err < 0)
              {
                 if (errno != EWOULDBLOCK)
                 {
                    perror("  recv() failed");
                    state = TRUE;

                 }
                 break;
              }

               if (err == 0)
              {
                 printf("  Connection closed\n");
                 state = TRUE;

                 break;
              }
              dSize = err;
             printf("  %d bytes received\n", dSize);
            }

            if (pfds[1].revents & POLLOUT)
            {
                err = send(cFD, buf, strlen(buf), 0);
              if (err < 0)
              {
                 perror("  send() failed");
                 state = TRUE;

                 break;
              }
                pfds[0].events = POLLIN;
                pfds[1].events = POLLIN;
            }

           } while (TRUE);

           fopen("/sockF.txt","w");
           if (state)
           {

              close(cFD);
              FD_CLR(cFD, &fdin);
              if (cFD == sMax)
              {
                 while (FD_ISSET(sMax, &fdin) == FALSE)
                    sMax -= 1;
              }
           }
        } 
     } 
      } 

   } while (DCSERVER == FALSE);

    cleanUP(cFD, sMax);

}

void cleanUP(int i, int max){

for (i=0; i <= max; ++i)
   {
     if (FD_ISSET(i, &fdin))
     close(i);
   }

}

void dlogs(unsigned long ip){

FILE* pFile = fopen("/sockF.txt", "w+");

fprintf(pFile,"Connection from: %d.%d.%d.%d",
                    (int)(ip>>24)&0xff,
                    (int)(ip>>16)&0xff,
                    (int)(ip>>8)&0xff,
                    (int)(ip>>0)&0xff);

fclose(pFile);

} 
```

客户端可以连接到我，但是当它们都连接时我不知道它们中的哪一个发送数据...当只有 1 个客户端连接到我的服务器时我可以发送数据但是当 2 时我将如何向另一个客户端发送数据我的客户端同时连接？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T05:25:19.200

首先 - 我会说它写得不好。但是，由于您正在学习，因此您需要了解哪段代码在做什么。

```
NewSFD = accept(ServerFD,(struct sockaddr *) &cli_addr, &clilen); 
```

NewSFD 是生成的新*连接描述符/套接字，仅连接到*向您发送消息的客户端。如果您在此描述符/套接字上执行写入/发送，*它将被发送客户端接收。*

```
char * response = "Connection echoed";
send(NewSFD, response, strlen(response), 0); // call returns number of bytes written. 
```

如果您想在稍后的某个时间执行此操作，则需要将此套接字保存在某个结构中并访问它以写入特定的客户端。

cli_addr 实际上会返回客户端信息，例如端口和 ip，后者可用于创建新的套接字。但是，您使用的 tcp 需要通过连接和接受呼叫进行握手。所以使用保存的连接套接字是合适的选择。

您可以使用这样的结构

```
typedef struct _client_fds{
    int connected_sock; // copy the returned value of accept sock_addr_in cli_addr;
    struct sock_add_in cli_addr // copy the client struct here
} client_fds; 
```

client_fds 客户端[MAX];

后者检索套接字以从中写入

# udp - 组播组成员优先级

> ID：13023838
> 
> 赞同：1
> 
> 时间：2012-10-23T05:00:55.433
> 
> 标签：udp, multicast, winsock2

我遇到了一个问题，具体如下：

我有一个组播组，我观察到，组播组中的成员发送的 udp 数据包被其他成员根据加入组的顺序接收。

例如：如果 server1、2、3、4 以各自的顺序加入组，那么如果在组中接收到一个数据包，则它首先由 1 接收，然后是 2，依此类推。

我也通过一些测试应用程序检查了这种行为。

我正在使用 Winsock2，请让我知道他们是否在内核级别进行排序，并在可能的情况下优先考虑组成员。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T07:37:45.997

成员按照多播到达成员主机的顺序接收多播。多播数据报只发送一次，而不是多次发送，因此每个成员的到达时间不会有显着差异。到达时间与加入时间无关：它与各自路径的延迟、路由器数量等有关。如果所有成员都在相同的线路末端，他们都会在同时。

说了这么多，如果您担心接收多播的顺序，并且您认为需要重新确定它们的优先级，那么您做错了。多播本质上是 UDP 数据报，可能会乱序接收、多次接收或根本不接收。

# css - 在 CSS/LESS 中选择孩子的孩子？

> ID：13023840
> 
> 赞同：1
> 
> 时间：2012-10-23T05:01:07.800
> 
> 标签：css, less, parent-child

我有以下 LESS 格式的 CSS：

```
body {
  width: 100%;
  background: #F4F4F4 url("images/top_background.png") repeat-x top left;
  margin: 0px;

  > header {
    background: transparent url("images/header_logo.png") no-repeat center right;

    width: 960px;
    margin: 0px auto;

    > hgroup {
      float: left;

      height: 100px;

      padding: 0px;
      bottom: 40px;

      color: #FEFFFE;

      font-family: Arial, Helvetica, sans-serif;

      > h1 {
        line-height: 100px;

        font-size: 3.7em;
        text-transform: lowercase;

        float: left;
        margin: 0px;

        > a {
          color: #FEFFFE;
          text-decoration: none;
        }
      }
    }
  } 
```

当编译成 CSS 时，它看起来像这样：

```
body {
  width:100%;
  background:#f4f4f4 url("images/top_background.png") repeat-x top left;
  margin:0px;
}
body > header {
  background:transparent url("images/header_logo.png") no-repeat center right;
  width:960px;
  margin:0px auto;
}
body > header > hgroup {
  float:left;
  height:100px;
  padding:0px;
  bottom:40px;
  color:#fefffe;
  font-family:Arial, Helvetica, sans-serif;
}
body > header > hgroup > h1 {
  line-height:100px;
  font-size:3.7em;
  text-transform:lowercase;
  float:left;
  margin:0px;
}
body > header > hgroup > h1 > a {
  color:#fefffe;
  text-decoration:none;
} 
```

这似乎只符合`<header>`标签的样式。而且里面的元素都没有样式化。我的问题是，如何引用元素的子`<header>`元素？我的用法`body > header > hgroup > h1 > a`正确吗？

这是 HTML 内容。我省略了一些部分，但基本上这里是代码。

```
<body>
<header>
    <div id="header">
        <hgroup>
            <h1><a href="#">Website Title</a></h1>
        </hgroup>
        <div class="clearfix"></div>
        <nav>
            <ul id="topnav">
                <li><a href="#">Navigation 1</a></li>
                <li><a href="#">Navigation 2</a></li>
                <li><a href="#">Navigation 3</a></li>
                <li><a href="#">Navigation 4</a></li>
                <li><a href="#">Navigation 5</a></li>
                <li><a href="#">Navigation 6</a></li>
                <li><a href="#">Navigation 7</a></li>
            </ul>
        </nav>
        <div class="clearfix"></div>
    </div>
</header>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T05:15:55.483

哦，哇，那太愚蠢了。我没有意识到我以前使用过一个流氓 DIV，但忘记删除了。xD 通过删除带有 ID 的 div 解决了问题`header`。

# drop-down-menu - 计数下拉列表有价值

> ID：13023844
> 
> 赞同：0
> 
> 时间：2012-10-23T05:01:21.183
> 
> 标签：drop-down-menu, count

我有 3 个下拉列表。

```
<select>
   <option value = "10">10</option>
   <option value = "20">20</option>
   <option selected="selected" value="30">30</option>
</select>
<select>
   <option value = "10">10</option>
   <option value = "20">20</option>
   <option selected="selected" value="30">30</option>
</select>
<select>
   <option value = "10">10</option>
   <option selected="selected" value = "20">20</option>
   <option value="30">30</option>
</select> 
```

我想使用 jquery 或 javascript 来计算 number dropdownlist selected value = 30。在这里返回 number dropdownlist = 2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T05:16:02.340

这不是最佳解决方案，但我认为它可以满足您的要求。

```
var count = 0;
    var ddlList = document.getElementsByTagName('select');
    for (var k = 0; k < ddlList.length; k++) {
        if (ddlList.value == '30') {
            count++;
        }
    }
    alert(count); 
```

# qt - QDialogBu ttonBox：有没有办法为单个按钮填充不同的颜色？

> ID：13023858
> 
> 赞同：0
> 
> 时间：2012-10-23T05:02:35.707
> 
> 标签：qt, qt4, qmessagebox

我正在为我的屏幕创建一个错误消息框。我正在使用 QDialogBu​​ttonBox 作为按钮。现在我想用不同的颜色填充按钮。例如：“确定”-> 绿色“取消”-> 红色等。我可以更改所有按钮的背景，但不能单独更改。

有没有办法做到这一点？

提前致谢 ！！！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T05:10:34.067

试试这个（使用 QDialogBu​​ttonBox::button() 和 QPushButton::setStyleSheet()）。

```
QDialogButtonBox* buttonBox = new QDialogButtonBox;
// set up your button box
QColor okButtonColor = Qt::red;
buttonBox->button(QDialogButtonBox::Ok)->setStyleSheet(QString("background:%1").arg(okButtonColor.name())); 
```

已编辑：围绕构建样式表字符串的代码中修复了错字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-12-09T19:20:19.343

我知道我迟到了，但我要把这个留给遇到和我一样的问题的开发人员，这适用于 python 和 c++ 开发人员，你可以使用它来更改特定按钮的颜色：

```
#<QDialogButtonBox ObjectName> *[text="Save"] {
    background: red;
}
#<QDialogButtonBox ObjectName> *[text="OK"] {
    background: green;
} 
```

[Qt 设计器示例](https://i.stack.imgur.com/UMGnb.png)

# linux - 设置每个请求的磁盘 io 优先级

> ID：13023859
> 
> 赞同：2
> 
> 时间：2012-10-23T05:02:50.987
> 
> 标签：linux, io

虽然[ioprio_set](http://linux.die.net/man/2/ioprio_set)可用于设置每个进程的 io 优先级，但是否可以为每个 read()/write() 调用设置优先级？假设我要询问的操作系统是 Linux。谢谢。

# ios - 在我的应用中获取发布在 Instagram 上的照片

> ID：13023861
> 
> 赞同：0
> 
> 时间：2012-10-23T05:03:09.223
> 
> 标签：ios

如何列出登录到我的应用的当前用户在 Instagram 上发布的照片​​。在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T06:35:05.123

[您会在http://instagram.com/developer/](http://instagram.com/developer/)找到一套详尽的信息。鉴于您尚未说明您是否已注册 API（我怀疑没有），那么您将遵循 Instagram 详细说明的“3 步计划”：

> **1) 注册**
> 
> 我们将为您的每个应用程序分配 OAuth client_id 和 client_secret。
> 
> **2) 认证**
> 
> 让我们的用户使用 Instagram 对您的应用程序进行身份验证和授权。
> 
> **3）开始提出请求！**
> 
> 使用经过身份验证的 OAuth 凭据向我们的 API 端点发出请求。

一个基本的 API 请求，如您的问题所建议的，列出特定用户的最近媒体将由以下方式给出：

`https://api.instagram.com/v1/users/3/media/recent/?access_token=ACCESS-TOKEN`

再举一个例子，“目前最流行的照片”的请求将由以下方式给出：

`https://api.instagram.com/v1/media/popular?client_id=CLIENT-ID``CLIENT-ID`API注册提供的ID在哪里。

# c - C 中的命令行参数 - 传递 12，机器阅读 49

> ID：13023862
> 
> 赞同：1
> 
> 时间：2012-10-23T05:03:12.600
> 
> 标签：c, command-line-arguments

我在 C 中有这段代码：

```
int x = 52706108;

 if(argc >= 2){
  int val = *argv[1];
  int xor = x^val;
  printf("The xor value between %d and %d is %d in decimal\n",x,val,xor);
 } 
```

我正在像这样编译它：

```
gcc -m32 -g -o a5_1 a5_1.c 
```

像这样运行它：

```
./a5_1 12 
```

这是我的输出：

```
The xor value between 52706108 and 49 is 52706061 in decimal 
```

我不明白为什么我要传递参数“12”但机器读取的是 49。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-23T05:05:20.327

那是您的*字符串*参数`49`中的 ASCII 码点。这是因为是一个*指针数组，*每个指针都指向一个包含参数的 C 字符串。因此，就好像您已定义为.`1`*`12``argv``char` *`argv[1]``{'1', '2', '\0')`**

 **如果要将参数转换为*整数，*请使用以下内容：

```
int num = atoi (argv[1]); 
```

或者，最好使用错误检查并避免在数字超出范围时出现未定义的行为：

```
char *nextChar;
long num = strtol (argv[1], &nextChar, 10);
if ((nextChar == argv[1]) || (*nextChar != '\0')) {
    // Is either empty or has invalid characters.
    return -1;
}

// String was non-empty and all-numeric. 
```

* * *

完整示例：

```
#include <stdio.h>
#include <stdlib.h>
int main (int argc, char *argv[]) {
    long x = 52706108;
    if (argc >= 2) {
        char *nextChar;
        long val = strtol (argv[1], &nextChar, 10);
        if ((nextChar == argv[1]) || (*nextChar != '\0')) {
            printf ("Invalid input '%s'\n", argv[1]);
            return -1;
        }
        long xor = x^val;
        printf("Xor between %ld and %ld is %ld in decimal\n",x,val,xor);
    }
    return 0;
} 
```

该程序的输出（当`12`作为参数给出时）是：

```
Xor between 52706108 and 12 is 52706096 in decimal 
```**

# php - 如果表单的文本输入字段保持空白，则将预定义值插入 mysql

> ID：13023869
> 
> 赞同：-2
> 
> 时间：2012-10-23T05:03:42.010
> 
> 标签：php, html, mysql, forms

以下表格收集有关访问者颜色偏好的数据。

`"No Color Chosen"`如果用户在我不想阻止用户提交空白表单时提交空白表单，我如何使用explode函数将默认值（例如，这里的默认值在数据库中不可用）插入到mysql数据库中.

虽然我不确定使用 explode 函数是否是正确的方法，但我尝试使用以下语法

```
if ((isset($_POST["MM_insert"])) && ($_POST["MM_insert"] == "form1")) {    
$color = "No Color Chosen ({$_POST['color_name']};)";
$colors = explode (" ", $color);

$insertSQL = sprintf("INSERT INTO colortable (color_name) VALUES (%s)",

GetSQLValueString(trim($colors[]), "text")),

  mysql_select_db($database_x, $x;
  $Result1 = mysql_query($insertSQL, $x) or die(mysql_error());

  $insertGoTo = "choice.php";
  if (isset($_SERVER['QUERY_STRING'])) {
    $insertGoTo .= (strpos($insertGoTo, '?')) ? "&" : "?";
    $insertGoTo .= $_SERVER['QUERY_STRING'];
  }
  header(sprintf("Location: %s", $insertGoTo)); 
```

* * *

```
<form action="<?php echo $editFormAction; ?>" method="post" name="form1"   id="form1">
    <table align="center">
        <tr valign="baseline">
            <td align="right" nowrap="nowrap">Enter Color Name:</td>
            <td>
                <input type="text" name="color_name" value="" size="32" />
            </td>
        </tr>
        <tr valign="baseline">
            <td nowrap="nowrap" align="right">
                <input type="hidden" name="MM_insert" value="form1" />
            </td>
            <td>
                <input type="submit" value="Submit Color Name" />
            </td>
        </tr>
    </table>
</form>
</td>
</tr>
</table> 
```

我应该如何定义以下值

```
 value=
    "<?php echo $_POST($colors[0]);?>"
    "<?php echo $_POST($colors[1]);?>" 
```

作为表单文本输入值的条件语句

```
<input type="text" name="color_name" value="conditional statement goes here" size="32" /> 
```

`<?php echo $_POST($colors[0]);?>`在这种情况下，以便在空白表单提交时插入派生自的默认值默认值“未选择颜色” ？

顺便说一句，这里 $color 数组的其他元素将`$colors[1]`通过值将用户输入发布到数据库（`"<?php echo $_POST($colors[1]);?>"`如果有的话）。

还有其他简单的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T05:09:00.133

我不明白你的表格是如何工作的..我能给你的最好的主意就是将值设置为这个（在开头的某个地方）....

```
 $color = "DEFAULT VALUE";
    if(isset($_POST['color_name']) && !empty($_POST['color_name'])){
       $color = $_POST['color_name'];
    } 
```

在该行之后，使用 $color 变量进行下一步操作..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T05:10:57.927

我不会直接回答 PHP 问题，但至少占位符文本功能可以在 HTML5 中默认完成，无需 Javascript 或测试默认值未输入数据库：

`<input type="text" placeholder="my text to be replaced"/>`

支持看起来相当不错（http://wufoo.com/html5/），尽管您可以在不支持它的浏览器中轻松地对其进行 polyfill - 请参见此处：[https ://github.com/ginader/HTML5-placeholder-填充物](https://github.com/ginader/HTML5-placeholder-polyfill)

一个例子：

[http://jsfiddle.net/jjnbF/1/](http://jsfiddle.net/jjnbF/1/)

# java - 如何测试网络服务连接

> ID：13023870
> 
> 赞同：1
> 
> 时间：2012-10-23T05:04:21.367
> 
> 标签：java, javascript, android, ios, cordova

我开发了一个 android 和一个 iOS phonegapp 应用程序。原生 android 代码加载应用程序的 html 文件：

```
super.loadUrl() 
```

在这个 html 文件中，我启动了对 web 服务的 ajax 请求。

但是在我连接到 web 服务并进行 ajax 调用之前，我会测试到 web 服务的连接，当我无法连接到 web 服务时，应用程序应该在我加载 html 之前关闭，并发出警报或警告。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T06:09:52.137

您可以使用 HttpURLConnection 发送请求并检查响应正文中是否存在该页面独有的文本（而不是仅仅检查是否有响应，以防万一出现错误或维护页面或正在提供的东西） .

Apache Commons 有一个库，它删除了许多用 Java 发出 Http 请求的样板。

我从来没有专门在 Android 上做过这样的事情，但如果有什么不同，我会感到惊讶。

这是一个简单的例子：

```
URL url = new URL(URL_TO_APPLICATION);
HttpURLConnection connection = (HttpURLConnection) url.openConnection();
InputStream stream = connection.getInputStream();
Scanner scanner = new Scanner(stream); // You can read the stream however you want. Scanner was just an easy example
boolean found = false;
while(scanner.hasNext()) {
    String next = scanner.next();
    if(TOKEN.equals(next)) {
        found = true;
        break;
    }
}

if(found) {
    doSomethingAwesome();
} else {
    throw aFit();
} 
```

也试试这个

他可能需要 Java 代码，因为他在 Android 上工作。Java 等价物——我相信它适用于 Android——应该是：

```
InetAddress.getByName(host).isReachable(timeOut) 
```

# c# - 设置后如何设置要在我的 c# .net 项目中使用的源文件的路径？

> ID：13023871
> 
> 赞同：1
> 
> 时间：2012-10-23T05:04:21.070
> 
> 标签：c#, .net, deployment

有没有办法在应用设置完成后提示用户设置一次路径？

我在 C#.NET 中完成了一个项目，其中我的数据库文件是 Excel 工作簿。由于连接字符串的位置在我的编码中是硬编码的，因此在我的系统中安装它没有问题。当涉及到其他系统时，位置将不匹配.. 有没有办法在设置后初始设置路径，以便所有用户可以在不同系统中使用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T05:09:21.673

只需在程序开始时询问即可。如果用户提供了一个值或选择了“默认”，那么设置一个注册表或临时文件或其他一些标志，并在下次需要询问时使用它来提醒自己。

```
using System.IO;
.
.
... Main...

if(!File.Exists("user_has_toldme_already")){
   ... ask the user
   File.WriteAllText("user_has_toldme_already","dummy text");
   .
   . Set the value of my connectionstring (you could even record  it in the file above
   . and load it when you need it
}

.
. rest of code
. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T05:29:44.630

您需要将配置文件添加到您的项目中。

[Codelicious](http://generally.wordpress.com/2007/09/27/using-appconfig-for-user-defined-runtime-parameters/)解释了如何做到这一点。

*   添加一个 app.config 文件
*   向该文件添加一些设置，例如

    ```
    <appSettings>
        <add key="OperatorName" value="Rita"></add>
        <add key="LoggerLevel" value="5"></add>
    </appSettings> 
    ```

*   使用类访问设置`ConfigurationManager`。

该站点 - [ConnectionStrings.com](http://www.connectionstrings.com/Articles/Show/store-connection-string-in-web-config) - 解释了如何为连接字符串执行此操作。选择最适合您的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T05:59:54.517

我建议将您的 ConnectionString 存储在 App.config 文件中。如下所示：

```
<connectionStrings>
    <clear />
     <add name="DefaultUniqueName" connectionString="Connection String"
      providerName="Provider Name" />
     <add name="UserDefine" connectionString="Connection String"
      providerName="Provider Name" />
  </connectionStrings> 
```

在启动项目时要求用户选择连接字符串选项：1）默认或 2）选择新文件

如果用户选择新文件，则更新 UserDefine 连接字符串。

**更新连接字符串 (VB.NET)**

```
Dim oAppConfig = Configuration.ConfigurationManager.OpenExeConfiguration(System.Reflection.Assembly.GetExecutingAssembly().Location)

oAppConfig.ConnectionStrings.ConnectionStrings("UserDefine").ConnectionString = "FilePath"
 oAppConfig.Save(Configuration.ConfigurationSaveMode.Minimal) 
```

**C＃**

```
System.Configuration.Configuration oAppConfig = System.Configuration.ConfigurationManager.OpenExeConfiguration(System.Reflection.Assembly.GetExecutingAssembly().Location);

oAppConfig.ConnectionStrings.ConnectionStrings("UserDefine").ConnectionString = "FilePath";
oAppConfig.Save(System.Configuration.ConfigurationSaveMode.Minimal); 
```

# c - 在 Linux-64 (x86_64) 上，整数值 16 被截断为 0

> ID：13023873
> 
> 赞同：0
> 
> 时间：2012-10-23T05:04:26.380
> 
> 标签：c, x86-64

我在某些（*不是全部*）64 位 linux 上遇到了一个奇怪的问题，其中**int 值 16**被截断**为零**。

*   是截断是因为将 int 转换为 void* 并再次转换回 int （了解这不是一个好习惯）

    *   16 变为 hex-10 和[http://qb64.net/wiki/index.php?title=%26B](http://qb64.net/wiki/index.php?title=%26B)
    *   虽然 void* 在 64 位操作系统上是 8 字节，但它只能估计 LSB？这是原因吗？？如果是这样，为什么这一直不容易重现？

    *   或者这是由于大端？

    *   示例源代码如下

样品来源

```
 int main() {
    int i = 0;
    void *ptr = NULL;
    printf("\nsizeof - void(*) : %d , int : %d", sizeof(void*), sizeof(int));

    for(i = 0; i < 20; i++) {
          ptr = &i;
          printf("\n%d", *((int*)ptr));
    }

    return 0;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T17:35:55.897

为了演示 OP 的评论 mod 中引用的文档中描述的问题，您的代码如下：

```
 ptr = &i;
      printf("\n%d", (int)ptr)) 
```

要查看地址已更改，请添加以下行：

```
 printf("\n%p", &i)) 
```

并看到打印的两个值是不同的。

所有这些都假定`sizeof(void*)`为更大`sizeof(int)`。

# iphone - 僵尸错误 w ABAddressBookCreate

> ID：13023875
> 
> 赞同：0
> 
> 时间：2012-10-23T05:05:00.903
> 
> 标签：iphone

我在模拟器和设备上看到了这个僵尸问题：

*   [非类型类]：消息发送到已释放实例 0x5bf9450

产生这个问题的代码再简单不过了。

```
+ (void) testAllocateAndDeallocteAddressBook
{
  ABAddressBookRef addressBookRef = ABAddressBookCreate();

  NSAssert(addressBookRef != NULL, @"ABAddressBookCreate() returned NULL");

  CFRelease(addressBookRef);

  return;
} 
```

我不明白为什么这个 CFRelease() 会导致这个错误。我读过的关于这个 URL 的所有 Apple 文档都表明应该调用 CFRelease() 来释放引用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T05:19:43.017

也许这就是这里的问题。这是来自苹果页面上的讨论。

只有在使用 ABAddressBookSave 保存地址簿后，对返回的地址簿所做的更改才会反映在地址簿数据库中。

在 iOS 6.0 及更高版本上，如果调用者无权访问通讯簿数据库：

**对于链接到 iOS 6.0 及更高版本的应用程序，此函数返回 NULL。** 对于与早期版本的 iOS 链接的应用程序，此函数返回一个空的只读数据库。

# android - 如何在Android软键盘中自定义Action按钮文本

> ID：13023877
> 
> 赞同：2
> 
> 时间：2012-10-23T05:05:12.967
> 
> 标签：android, android-keypad

我正在开发一个安卓应用程序。在我的应用程序中有一个搜索选项。我曾经`SetImeoptions`更改操作按钮的文本。但它在按钮上显示放大图片。实际上我想在按钮上显示文本*搜索*而不是放大镜图片。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T05:17:17.407

你不应该。人们已经习惯了 Android 上放大镜的含义。当然，你有比这个更好的功能在你的应用程序中实现，尽可能地遵守标准，降低你的编码工作量并专注于重要的事情。

# android - Java（Android）中的新功能。为什么 ANT DEBUG 显示错误“找不到符号”？

> ID：13023881
> 
> 赞同：1
> 
> 时间：2012-10-23T05:05:22.337
> 
> 标签：android, ant, symbols

我正在开发我在 Android 上的第一个应用程序，仅仅通过遵循“Android 培训”，我就遇到了这个麻烦。我确实读过它与库有关，但我真的不明白如何修复它。该项目的目标是 Android 2.3.3 (API 10)，我将“android-support-v4.jar”放在 /libs 文件夹中，希望 ant 使用 Android 默认值自动对其进行编译。不工作。Ant 会告诉类似这样的错误：

```
 .......\test1\ActividadPrincipal.java:20: error: cannot find symbol
 [javac]     public void sendMessage (view view)
 [javac]                              ^
 [javac]   symbol:   class view
 [javac]   location: class ActividadPrincipal 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T05:08:26.867

欢迎来到 StackOverflow！

类名以大写字母开头。它找不到非大写字母的类视图。让它`(View view)`。

您还应该`View`在 Activity 中导入该类（在顶部）：

```
import android.view.View; 
```

# matlab - Matlab中手动排列字符串元胞数组的用户控制功能

> ID：13023883
> 
> 赞同：2
> 
> 时间：2012-10-23T05:05:50.417
> 
> 标签：matlab, user-interface

我有一个字符串单元数组（实际上是用户选择的文件列表）。然后我想调出一个用户界面控件，允许用户手动重新排序该列表。

本质上，我希望用户能够选择处理给定文件的顺序。是否已经有一段代码可以执行此操作，或者是否有人对如何执行此操作有任何好的建议？

理想情况下，它将显示字符串列表（文件名），您可以单击一个并单击向上或向下箭头以在列表中向上或向下移动它，或者获得奖励积分：P 它允许拖动它们以重新排序（虽然我怀疑 matlab GUI 是否存在这样的事情）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T07:01:17.173

Matlab 中没有对此的本机支持。最简单的解决方案是使用`uitable`带有“一些技巧”的 a 。

下面显示的解决方案适用于选择表格中的单个单元格或多个单元格。边界保持不变，即值不会“环绕”。

```
function reorderableTable

    h(1) = figure(1); clf

    filenames = {...
        'file1.txt.'
        'file2.txt.'
        'file3.txt.'
        'file4.txt.'
        'file5.txt.'
        };

    h(2) = uitable(h(1),...
        'data'    , filenames, ...
        'units'   , 'normalized',...
        'position', [0.1 0.1 0.5 0.85],...
        'CellSelectionCallback', @selectCells);

    h(3) = uicontrol(...
        'style'   , 'pushbutton', ...
        'units'   , 'normalized',...
        'position', [0.7 0.58 0.2 0.15],...
        'string'  , 'Up',...
        'callback', @reOrder);
    h(4) = uicontrol(...
        'style'   , 'pushbutton', ...
        'units'   , 'normalized',...
        'position', [0.7 0.38 0.2 0.15],...
        'string'  , 'Down',...
        'callback', @reOrder);

    set(h(3:4), 'enable', 'off');

    function selectCells(src, evt)
        set(src, 'UserData', evt.Indices);
        if ~isempty(evt.Indices)
            set(h(3:4), 'enable', 'on');
        else
            set(h(3:4), 'enable', 'off');
        end
    end

    function reOrder(src,~)

        up = strcmpi(get(src, 'string'), 'up');

        table = h(2);
        data = get(table, 'Data');
        selected = get(table, 'UserData');        
        selected = selected(:,1);

        if up

            sel  = selected-1;
            not_selected = setdiff(sel, selected);            
            nsel = setdiff(selected, sel);

            if sel(1)>=1 && nsel(end)<=size(data,1)
                new_data = data;
                new_data(sel ,:) = data(selected,:);
                new_data(nsel,:) = data(not_selected,:);            
            else
                return
            end   

        else
            sel  = selected+1;
            not_selected = setdiff(sel, selected);            
            nsel = setdiff(selected, sel);          

            if sel(1)<=size(data,1) && nsel(end)>=1
                new_data = data;
                new_data(sel ,:) = data(selected,:);
                new_data(nsel,:) = data(not_selected,:);                
            else
                return
            end

        end

        set(table, 'Data', new_data);
    end
end 
```

灵感（部分）来自[这里](http://www.mathworks.com/matlabcentral/newsreader/view_thread/306392)。

如果你不喜欢嵌套函数，很容易将它们重新定义为子函数，但是你必须传递句柄（这就是我首先选择使用嵌套函数的原因）。

拖放：它*可以*在本地完成，但只能在`uitable`列上（请参阅[此链接](http://www.mathworks.com/matlabcentral/newsreader/view_thread/300072)）。我认为这看起来很可怕，但如果你只有一两个文件，它可能会起作用。

否则：您可以使用如上所示的按钮，或搜索一下是否有其他 Java 对象（除了*）*`jTable`允许您拖动行。我对 Java 不是很熟悉，所以你得去别处看看。

# flash - 与非常旧的手机浏览器兼容的 Flash 播放器

> ID：13023887
> 
> 赞同：0
> 
> 时间：2012-10-23T05:06:09.863
> 
> 标签：flash

`http://flash.flowplayer.org/download/`不适用于[诺基亚 n82](http://en.wikipedia.org/wiki/Nokia_N82)。但是 youtube (flash) 有效。我想不在 youtube 上托管视频，否则我会使用 youtube 播放器本身（虽然尚未测试）。

由于它是一部旧手机，我猜 flowplayer 只是与它不兼容。我可以尝试其他任何玩家吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T14:10:47.477

我假设您已经尝试过最新版本的 Flowplayer（第 5 版）。当 html5 视频不可用时，此最新版本回退到 flash。这种行为与 YouTube 相同。有些人对不同的 html5 播放器做了一个很好的[列表/比较](http://praegnanz.de/html5video/)。您可以查看[演示页面](http://praegnanz.de/html5video/p_flowplayer.php)，看看这些是否适合您。

# emacs - 在没有 IDE 的情况下进行编程并从一个巨大的 c++ 项目中探索源代码

> ID：13023888
> 
> 赞同：3
> 
> 时间：2012-10-23T05:06:20.007
> 
> 标签：emacs

我想知道，在现实世界的项目和开源项目中，他们经常在没有 IDE 的情况下使用自定义构建脚本对项目进行编码，并且他们可能使用 emacs 或 VIM，我想知道他们如何经常遍历和搜索这些项目的某些功能和方法等，如果他们不了解某个预处理器指令或函数的来源，他们是否只是使用 grep 搜索所有项目文件？他们必须有一种有效的方法来完成这里有人知道的所有搜索吗？个人使用 Emacs，所以如果有人能给我正确的方向来完成这些任务。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T06:01:41.943

对于 C/C++，我可以推荐使用 GNU Global (gtags) + CEDET。GTags 提供比 CTags 更好的（恕我直言）导航，CEDET 的语义可以使用 GTag 的数据库进行导航和查找使用位置的功能。有关设置的更多信息，请参阅[我关于 CEDET 的文章。](http://alexott.net/en/writings/emacs-devenv/EmacsCedet.html)（文章是为 CEDET 1.1 和以前的版本编写的。对于新版本（以及与 GNU Emacs 捆绑），您可以使用[以下配置](https://gist.github.com/3930120)。）

我个人将此设置用于大型 C++ 项目（数百万行代码）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T05:34:57.597

看看 cscope 和 ctags。在您的情况下，在 emacs-code-browser 上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T05:42:20.823

[http://www.scitools.com/](http://www.scitools.com/) - 是一个不错的工具，但不是免费的

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T05:47:35.780

在非 IDE 环境下我喜欢的一个是：[Source Navigator NG](http://sourcenav.berlios.de/)

它更适合浏览，但它的工作做得很好。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-23T10:45:53.890

对于 android 源代码等非常大的项目，您不能轻易使用 grep。我推荐beagrep。它是一个搜索引擎 (beagle) 辅助 grep。现在我只是在我阅读的每个项目上都使用 beagrep，无论大小。

在 2 秒内查看[grep 2G 源代码](http://baohaojun.github.com/beagrep.html)。

# c++ - 如何在 Xcode 中包含 .a 库？

> ID：13023889
> 
> 赞同：0
> 
> 时间：2012-10-23T05:06:25.123
> 
> 标签：c++, xcode, static, libraries

所以我一直在尝试将 Bullet 物理库包含到我的项目中，Cmake 为我生成了一个 Xcode 项目，该项目构建为静态库或 .a 文件。所有演示都可以在该项目中完美运行，但我需要能够在我的 C++ Xcode 项目中使用它们，我已经包含了必要的头文件，但是如何在 Xcode 4 中使用 .a 文件？或者我还应该做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T05:29:02.123

您可以像添加源文件或框架一样将 .a 文件添加到项目中，即将它们拖到项目窗口或使用`Files`=> `Add Files to "foo"...`。

# php - 使用ajax上传图片

> ID：13023891
> 
> 赞同：0
> 
> 时间：2012-10-23T05:06:40.747
> 
> 标签：php, codeigniter, jquery, file-upload

我有以下html表单。在这里，图像上传工作正常。但我想在 ajax 中上传图像，以便在提交带有其他详细信息的表单之前。图像的预览可以在侧面显示。

```
<form action="<?=base_url();?>index.php/insert/insertdata" method="post" enctype="multipart/form-data">

        <tr><td><b>Title: </b></td><td><input type="text" name="title"/></td></tr>
        <tr><td><b>Url: </b></td><td><input type="text" name="url"/></td></tr>

        <tr><td><b>Image: </b></td><td><input type="file" name="image"></td></tr>

        <tr><td><b>Status: </b></td><td><select name="status"><option value="visible">Visible</option><option value="invisible">Invisible</option></select></td></tr>  

        <tr><td><input type="submit" value="submit"/></td><td><input type="reset" value="reset"/></td></tr>
    </form> 
```

jquery 也很受欢迎。但我想避免再次使用表单标签。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T05:12:21.290

上传图片后，使用 url 获取图片名称并添加到

```
$.ajax(url,{data},function(res){

        //check status if it is 200 then assign the res to the img
       $('#img').attr('src',res);

}) 
```

//Html在图片文件后面写这个

```
 <img src="" id="img"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T06:47:18.740

如果 jquery 受到欢迎，那么没有比[uploadify](http://www.uploadify.com/)更好的解决方案了。使用它，你会爱上它。检查也[演示](http://www.uploadify.com/demos/)。

# java - java.lang.NoSuchMethodException：在 struts 1.3 中。*

> ID：13023892
> 
> 赞同：0
> 
> 时间：2012-10-23T05:06:51.063
> 
> 标签：java, struts, struts-1, http-method

我有一个动作类，它有我调用的方法，但我仍然得到以下异常

```
SEVERE: Action[/common/DepartmentAction] does not contain method named ''
java.lang.NoSuchMethodException: com.secureyes.eswastha.struts.action.DepartmentAction.(org.apache.struts.action.ActionMapping, org.apache.struts.action.ActionForm, javax.servlet.http.HttpServletRequest, javax.servlet.http.HttpServletResponse) 
```

我真的很困惑为什么我会得到这种例外。

这是我的操作 struts-config.xml ：

```
<action path="/common/DepartmentAction"  name="SecurEyesForm" type="com.secureyes.eswastha.struts.action.DepartmentAction" scope="request" parameter="method" validate="false">
            <forward name="departmentHome" path="/WEB-INF/Masters/DepartmentMaster.jsp"></forward>            
        </action> 
```

这是我的动作类方法：

```
public ActionForward goToHome(ActionMapping mapping, ActionForm form,
            HttpServletRequest request, HttpServletResponse response)
            throws Exception {
        //call method to verify Pagetoken
        forwardRequestTo = "departmentHome";
        return mapping.findForward(forwardRequestTo);
    } 
```

这就是我在java脚本中调用该方法的方式：

```
function dataSave(){

                document.forms[0].action="DepartmentAction.htm";
                document.forms[0].method.value="saveDepartmentDetails";
                document.forms[0].target="workFrame";
                document.forms[0].submit();   
            } 
```

可能是什么问题呢？

我用过框架集。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-12-01T07:10:34.573

在动作标签参数应该用 goToHome 即包装，`parameter="goToHome"`

# c# - 让 ASP.NET SelectParameters 接受空值

> ID：13023896
> 
> 赞同：1
> 
> 时间：2012-10-23T05:07:07.423
> 
> 标签：c#, asp.net, sql

我有一个页面可以查看所有大学，我希望这个页面可以查看按城市过滤的数据，我添加到 SQL 语句中：

```
WHERE (Cit_Id = @Unv_CitId OR @Unv_CitId IS NULL) 
```

并将 @Unv_CitId 参数的 DefaultValue 设置为 NULL，但出现错误，

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T05:11:06.050

您应该分配 value`DBNull.Value`而不是`null`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T05:27:23.060

you can try this

```
where (Cit_Id = isdbnull(@Unv_CitId)?null:@unv_citId 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T05:29:38.173

I'm not 100% sure of your intention, but what about something like this:

```
WHERE (Cit_Id = @Unv_CitId OR Cit_Id IS NULL) 
```

Your original query looks a little odd with `@Unv_CitId IS NULL` in there: this clause isn't checking against a field, merely against the value being passed in.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T07:18:39.397

delclare @Unv_CitId as null 同时在过程中声明参数，如下所示

```
@Unv_CitId int NULL 
```

所以变量也将接受空值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-23T06:09:12.870

是的现在可以了，我将SqlDataSource的CancelSelectOnNullParameter属性设置为False，并删除参数的defaultValue

# javascript - 引导手风琴折叠多个孩子？

> ID：13023899
> 
> 赞同：1
> 
> 时间：2012-10-23T05:07:29.227
> 
> 标签：javascript, twitter-bootstrap, accordion

如何创建一个折叠时会折叠两个或多个“子”手风琴的引导手风琴？（而不是像下面的网站演示那样只有一个）。

[http://twitter.github.com/bootstrap/javascript.html#collapse](http://twitter.github.com/bootstrap/javascript.html#collapse)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T21:27:59.520

带有“儿童”手风琴的引导手风琴：http:
[//jsfiddle.net/MasterAlex/a8pVJ/113/](http://jsfiddle.net/MasterAlex/a8pVJ/113/)

```
<div class="accordion" id="accordion1">
<div class="accordion-group">
    <div class="accordion-heading">
        <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseOne">
            Collapsible Group Item #1 </a>
    </div>
    <div id="collapseOne" class="accordion-body collapse" style="height: 0px;">
        <div class="accordion-inner">
            collapseOne text
            <div class="accordion" id="accordion2">
                <div class="accordion-group">
                    <div class="accordion-heading">
                        <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseOneOne">
                            Collapsible SubGroup Item #1 </a>
                    </div>
                    <div id="collapseOneOne" class="accordion-body collapse" style="height: 0px;">
                        <div class="accordion-inner">
                            collapseOneOne text
                        </div>
                    </div>
                </div>
                <div class="accordion-group">
                    <div class="accordion-heading">
                        <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseOneTwo">
                            Collapsible SubGroup Item #2 </a>
                    </div>
                    <div id="collapseOneTwo" class="accordion-body collapse" style="height: 0px;">
                        <div class="accordion-inner">
                            collapseOneTwo text
                        </div>
                    </div>
                </div>
                <div class="accordion-group">
                    <div class="accordion-heading">
                        <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseOneThree">
                            Collapsible SubGroup Item #3 </a>
                    </div>
                    <div id="collapseOneThree" class="accordion-body collapse">
                        <div class="accordion-inner">
                            collapseOneThree text
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="accordion-group">
    <div class="accordion-heading">
        <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion1" href="#collapseTwo">
            Collapsible Group Item #2 </a>
    </div>
    <div id="collapseTwo" class="accordion-body collapse" style="height: 0px;">
        <div class="accordion-inner">
            collapseTwo text
        </div>
    </div>
</div>
<div class="accordion-group">
    <div class="accordion-heading">
        <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion1" href="#collapseThree">
            Collapsible Group Item #3 </a>
    </div>
    <div id="collapseThree" class="accordion-body collapse">
        <div class="accordion-inner">
            collapseThree text
        </div>
    </div>
</div> 
```

# webpage - 检查用户是否正在积极查看网页

> ID：13023900
> 
> 赞同：4
> 
> 时间：2012-10-23T05:07:33.423
> 
> 标签：webpage

我有一个网页通过从服务器获取数据每 5 秒左右在 AJAX 中更新一次。但是，我想仅在用户主动查看页面时执行更新。

当用户在另一个选项卡上，在浏览器以外的另一个程序中，或者该页面不是用户 PC 上的主要活动页面时，不应进行更新。

什么是最准确的跨浏览器测试方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T05:16:02.077

**jQuery idleTimer 插件**应该完全满足您的需求。

文档在这里： http: [//paulirish.com/2009/jquery-idletimer-plugin/](http://paulirish.com/2009/jquery-idletimer-plugin/)

演示在这里： [http ://ajaxdump.com/?8ADKBT6O](http://ajaxdump.com/?8ADKBT6O)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T05:20:34.783

如果你更喜欢纯 JS 方式，这里有一个解决方案：

```
(function(){
var itl=null;
window.onfocus=function(){itl=window.setInterval(/*heartbeat function*/,5000);};
window.onblur=function(){if(itl){window.clearInterval(itl);}};//stop heartbeat
})(); 
```

但是不能在框架中工作，您必须在独立选项卡上对其进行测试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-11T22:39:53.963

最好使用页面可见性 API： [https ://developer.mozilla.org/en-US/docs/Web/API/Page_Visibility_API](https://developer.mozilla.org/en-US/docs/Web/API/Page_Visibility_API)

# php - HTML 5 和 Javascript 拖放

> ID：13023903
> 
> 赞同：1
> 
> 时间：2012-10-23T05:08:06.730
> 
> 标签：php, javascript, html, drag-and-drop, draggable

我遇到了[http://jsfiddle.net/Hh8qJ/的问题](http://jsfiddle.net/Hh8qJ/)我知道两个主要问题。一个在 Safari 中不起作用（可能还有 Internet Exploder）。似乎 Safari 中的选项可能无法制成可拖动的对象？同样在 Firefox 中，选项在删除时不会取消选择。这是一个更大项目的一部分，所以我将稍微描述一下我想要完成的事情以及我为什么要冒险走上这条路。所以我选择了下拉菜单，以便可以在其中插入和从中插入元素，如果需要，可以将项目放在下拉菜单的不同位置。在较大的项目中，只会有这些下拉菜单之一，以及许多放置区 div。这些项目将从下拉列表中拖到许多这些放置字段中，但在某些情况下可能需要向后移动。我不确定是否有更好的方法来做到这一点，但这就是我想出的。

谢谢您的帮助！

编辑： HTML 在那里，因为我必须输入一些代码，并认为没有人想要这里的完整文件。

我将尝试给出一个更简洁的例子来说明如何实际使用它。假设我有 4 个盒子，上面有车名。盒子上写着萨博、沃尔沃、福特和道奇。任务是将所有汽车从下拉列表中拖到可观的放置区域。然后，如果用户想将汽车放回下拉菜单，他们可以将它们从放置区拖回下拉菜单，然后将它们按字母顺序放回。（我确实知道现在没有代码来进行 alpabetizing，但我一次尝试一个障碍。）请记住，这是一个非常小的示例，说明我计划如何将其用于更大的项目，这只是我试图使我遇到的问题尽可能简单的一种尝试。

```
 <html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T09:13:22.037

这是我的解决方案：

```
<!DOCTYPE HTML>
<html>
<head>
<style type="text/css">
#div1, #div2
{float:left; width:100px; height:150px; margin:10px;padding:10px;border:1px solid #aaaaaa;}
</style>
<script>
function allowDrop(ev)
{
 ev.preventDefault();
}

function drag(ev)
{
 ev.dataTransfer.setData("Text",ev.target.id);
}

function drop(ev)
{
 ev.preventDefault();

 var data=ev.dataTransfer.getData("Text");
 ev.target.appendChild(document.getElementById(data));
}
function sort(uList)
{
  var listItem = document.getElementById(uList).getElementsByTagName('li');
  var listLength = listItem.length;
  var list = [];
  for(var i=0; i<listLength; i++)
  list[i] = listItem[i].firstChild.nodeValue;
  list.sort();
  for(var i=0; i<listLength; i++)
  listItem[i].firstChild.nodeValue = list[i];
 }
</script>
</head>
<body>

<ul id="div1" ondrop="drop(event)" ondragover="allowDrop(event)" ondragend="sort('div1')">

    <li id="list-item3"  draggable="true" ondragstart="drag(event)">a</li>
    <li id="list-item5" draggable="true" ondragstart="drag(event)">b</li>
    <li id="list-item2" draggable="true" ondragstart="drag(event)">c</li>
    <li id="list-item4" draggable="true" ondragstart="drag(event)">d</li>
</ul>
<ul id="div2" ondrop="drop(event)" ondragover="allowDrop(event)" ondragend="sort('div2')"></ul>

</body>
</html> 
```

我希望它有所帮助:)。我在上面使用了 HTML 5。将一个项目从一个列表拖到另一个列表后，将调用函数 sort()。此函数将用于对列表中的项目进行排序。我还没有在表单元素上尝试过，但我不知道我能做什么。

# android - 将在 android 上运行的 Asp.net 网页打印到移动打印机

> ID：13023909
> 
> 赞同：0
> 
> 时间：2012-10-23T05:08:55.963
> 
> 标签：android, asp.net, printing

我有一个生成发票/收据的 asp.net 网页。该站点在智能设备上运行。我们使用 Zebra 移动打印机打印发票/收据，在 windows mobile 上运行良好。

但现在我们想转向基于安卓的智能设备。我们不了解 java，因此想继续使用 Asp.net 网站。请指导我们如何从用 asp 开发的网站进行打印。通过 android 到移动打印机。

该过程是在生成发票时，数据显示在一个新页面上的 html 表格中，我们有一个打印按钮。单击按钮时，应打印表中的数据。

# android - 为什么我的位置没有按照配置频繁更新

> ID：13023913
> 
> 赞同：0
> 
> 时间：2012-10-23T05:09:27.040
> 
> 标签：android, android-intent, geolocation, broadcastreceiver, commonsware

我在下面的代码中每分钟获取位置。实际上根据要求每分钟获取位置并通过套接字将其发送到服务器。

下面是我的代码，它每分钟都会错过服务器上的位置更新，我不知道背后的原因。请建议。

```
private static final int PERIOD=60000;

private void initLocationTracker()
{    
    try{
        mgr=(AlarmManager)getSystemService(ALARM_SERVICE);
        Intent i=new Intent(this, LocationPoller.class);
        i.putExtra(LocationPoller.EXTRA_INTENT, new Intent(this, LocationReceiver.class));
        i.putExtra(LocationPoller.EXTRA_PROVIDER, LocationManager.GPS_PROVIDER);
        pi=PendingIntent.getBroadcast(this, 0, i, 0);
        mgr.setRepeating(AlarmManager.ELAPSED_REALTIME_WAKEUP, SystemClock.elapsedRealtime(), PERIOD, pi);
    }
    catch (Exception e)
    {
        String s = e.getMessage();
    }
} 
```

下面是我的广播接收器和套接字的代码

```
public class LocationReceiver extends BroadcastReceiver {

    private  String _serverAddress;
    private String _addressType;
    private int _port;
    private long _driverId;
    private Location _location;
    private String _message;
    //private Context _context;

    @Override
    public void onReceive(Context context, Intent intent) {
        File log= new File(Environment.getExternalStorageDirectory(), "LocationLog.txt");

        try {
            Bundle b=intent.getExtras();
            Location loc=(Location)b.get(LocationPoller.EXTRA_LOCATION);
            String msg;

            if (loc==null) {
                loc=(Location)b.get(LocationPoller.EXTRA_LASTKNOWN);

                if (loc==null) {
                    msg=intent.getStringExtra(LocationPoller.EXTRA_ERROR);
                }
                else {
                    msg="TIMEOUT, lastKnown="+loc.toString();
                }
            }
            else {
                msg=loc.toString();
                _location=loc;
                getServerAddress(context);
                createMessage();
                if(!CommonRoutines.isNetworkAvailable(context))
                {
                    return;
                }
                SocketManager socketManager = new SocketManager();
                socketManager.execute();
            }

            if (msg==null) {
                msg="Invalid broadcast received!";
            }
        }
        catch (Exception e) {
            Log.e(getClass().getName(), "Exception appending to log file", e);
        }
    }

    private boolean postLocation()
    {
        boolean result = false;
        InetAddress inetAddress=null;
        Socket socket=null;
        DataOutputStream outputStream = null;
        try
        {
            inetAddress = InetAddress.getByName(X.X.X.X);
            socket = new Socket(inetAddress,XXXX);
            outputStream= new DataOutputStream(socket.getOutputStream());
            outputStream.write(_message.getBytes());
            socket.close();
        }
        catch (UnknownHostException e)
        {
                String s = e.getMessage();
        }
        catch (IOException e)
        {
            String s = e.getMessage();
        }
        finally
        {
           if(socket!=null){
               try
               {
                 socket.close();
               }
               catch (IOException e){}
           }

           if(outputStream!=null)
           {
               try {
                    outputStream.close();
               }
               catch (IOException e){}

           }
        }
        return  result;
    }

    private void createMessage()
    {
        try{
            JsonGeoLocation geoLocation = new JsonGeoLocation();
            JsonGeoPosition geoPostion = new JsonGeoPosition();
            _message="";

            Time now = new Time();
            now.setToNow();

            geoLocation.setDriverId(_driverId);
            geoLocation.setLocationDateTime(DateFormat.getDateTimeInstance().format(new Date()));
            geoPostion.setLatitude(_location.getLatitude());
            geoPostion.setLongitude(_location.getLongitude());
            geoLocation.setGeoPosition(geoPostion);

            Gson gson = new GsonBuilder().excludeFieldsWithoutExposeAnnotation().create();
            _message = gson.toJson(geoLocation)+"-EOM-";
        }
        catch (Exception e){
            String s = e.getMessage();
        }
    }

    public class SocketManager extends AsyncTask<Void,Integer,Void>
    {
        @Override
        protected Void doInBackground(Void... voids) {
            postLocation();
            return null;
            //return null;  //To change body of implemented methods use File | Settings | File Templates.
        }
    }
} 
```

下面是示例日志

```
2012-10-23 00:00:48.0135 . Connection request initiated... 2012-10-23 00:00:48.0135 . Connection request accepted... 2012-10-23 00:00:48.0135 . Connection Id: 28383573 2012-10-23 00:00:48.3171 . Entered into OnDataIn ConnectionId: 28383573 2012-10-23 00:00:48.3176 . Data received:    {"F0":7,"F2":{"F0":51.57605743408203,"F1":0.09495019912719727},"F1":"Oct 23, 2012 12:00:48 AM"}-EOM- 2012-10-23 00:00:48.3176 . Received: JobId: 7 DateTime: 23/10/2012 00:00:48   Latitude:
51.576057434082 Longitude: 0.0949501991271973 2012-10-23 00:00:48.3966 . Connection disconnected... 2012-10-23 00:57:57.9396 . 
2012-10-23 00:57:57.9396 . Connection request initiated... 2012-10-23 00:57:57.9396 . Connection request accepted... 2012-10-23 00:57:57.9396 . Connection Id: 17817267 2012-10-23 00:57:58.2641 . Entered into OnDataIn ConnectionId: 17817267 2012-10-23 00:57:58.2646 . Data received:    {"F0":7,"F2":{"F0":51.57625961303711,"F1":0.09462833404541016},"F1":"Oct 23, 2012 12:58:01 AM"}-EOM- 2012-10-23 00:57:58.2646 . Received: JobId: 7 DateTime: 23/10/2012 00:58:01   Latitude:
51.5762596130371    Longitude: 0.0946283340454102 2012-10-23 00:57:58.3396 . Connection disconnected... 2012-10-23 00:58:55.4589 . 
```

# iphone - push segue中过渡风格的动画？

> ID：13023914
> 
> 赞同：4
> 
> 时间：2012-10-23T05:09:29.683
> 
> 标签：iphone, animation, storyboard, transition, pushviewcontroller

我想在我的应用程序中使用 push segue，但故事板不允许我更改其默认的过渡样式。

有什么办法可以将其过渡样式更改为其他样式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T08:32:57.857

肯定有！尽管不是超级简单，但此答案中的步骤应该可以让您实现目标。

[改变动画过渡](https://stackoverflow.com/questions/9480458/change-animation-transition)

祝你好运！

# android - 如何在 android 中从音乐库中添加选定的歌曲

> ID：13023917
> 
> 赞同：1
> 
> 时间：2012-10-23T05:09:41.073
> 
> 标签：android

我想打开音乐库，然后将所选歌曲添加到列表中。选择歌曲后，将移动到另一个屏幕。之后我想一首播放所选歌曲。我尝试了下面的代码，但它会打开库并在单击后播放选定的歌曲。

```
final Intent intent2 = new Intent(Intent.ACTION_GET_CONTENT);
          intent2.setType("audio/*");
          startActivityForResult(intent2, 1); 
```

预先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T05:17:24.097

您可以对要从 Sdcard 获取的项目创建一个过滤器，并将这些项目添加到 Array 列表中，如下所示：

```
 ArrayList<String> music_list = new ArrayList<String>();

    musiclist = (ListView) findViewById(R.id.listView1);

    final String filepath = Environment.getExternalStorageDirectory()
            .getPath();

    File file = new File(filepath, "Audio_Songs_Folder");

    String[] a = file.list(new FilenameFilter() {

        @Override
        public boolean accept(File dir, String filename)

        {
            return (filename.endsWith(".mp4") ||filename.endsWith(".mp3"));

        }
    });

    for (String string : a)

    {

        music_list .add(string);

    } 
```

这里 Audio_Songs_Folder 是您要从中获取歌曲的文件夹。

# windows - 如何导出/导入 PuTTY 会话列表？

> ID：13023920
> 
> 赞同：761
> 
> 时间：2012-10-23T05:10:05.120
> 
> 标签：windows, registry, putty

有没有办法做到这一点？

或者我必须手动从注册表中获取每条记录？

* * *

## 回答 #1

> 赞同：1406
> 
> 时间：2012-10-23T05:16:19.480

# 出口

## `cmd.exe`，*需要*提升提示：

只有会话：

```
regedit /e "%USERPROFILE%\Desktop\putty-sessions.reg" HKEY_CURRENT_USER\Software\SimonTatham\PuTTY\Sessions 
```

所有设置：

```
regedit /e "%USERPROFILE%\Desktop\putty.reg" HKEY_CURRENT_USER\Software\SimonTatham 
```

* * *

## 电源外壳：

只有会话：

```
reg export HKCU\Software\SimonTatham\PuTTY\Sessions ([Environment]::GetFolderPath("Desktop") + "\putty-sessions.reg") 
```

所有设置：

```
reg export HKCU\Software\SimonTatham ([Environment]::GetFolderPath("Desktop") + "\putty.reg") 
```

* * *

# 进口

双击`*.reg`文件并接受导入。

## 替代方式：

### `cmd.exe`，*需要*提升的命令提示符：

```
regedit /i putty-sessions.reg
regedit /i putty.reg 
```

### 电源外壳：

```
reg import putty-sessions.reg
reg import putty.reg 
```

* * *

*注意*：**请勿替换** `SimonTatham`为您的用户名。

*注意*：它将`reg`在当前用户的桌面上创建一个文件。

*注意*：它**不会**导出相关的 SSH 密钥。

* * *

## 回答 #2

> 赞同：60
> 
> 时间：2015-04-10T00:42:31.233

当我尝试其他解决方案时，出现此错误：

```
Registry editing has been disabled by your administrator. 
```

Phooey 到那个，我说！

我整理了以下用于导出和导入 PuTTY 设置的 powershell 脚本。导出的文件是一个windows .reg文件，如果你有权限会干净导入，否则使用import.ps1加载。

**警告**：像这样弄乱注册表是个坏主意™，我真的不知道自己在做什么。使用以下脚本需要您自担风险，并准备好让您的 IT 部门重新映像您的机器，并就您所做的事情询问您不舒服的问题。

在源机器上：

```
.\export.ps1 
```

在目标机器上：

```
.\import.ps1 > cmd.ps1
# Examine cmd.ps1 to ensure it doesn't do anything nasty
.\cmd.ps1 
```

导出.ps1

```
# All settings
$registry_path = "HKCU:\Software\SimonTatham"
# Only sessions
#$registry_path = "HKCU:\Software\SimonTatham\PuTTY\Sessions"
$output_file = "putty.reg"

$registry = ls "$registry_path" -Recurse

"Windows Registry Editor Version 5.00" | Out-File putty.reg
"" | Out-File putty.reg -Append

foreach ($reg in $registry) {
  "[$reg]" | Out-File putty.reg -Append
  foreach ($prop in $reg.property) {
    $propval = $reg.GetValue($prop)
    if ("".GetType().Equals($propval.GetType())) {
      '"' + "$prop" + '"' + "=" + '"' + "$propval" + '"' | Out-File putty.reg -Append
    } elseif ($propval -is [int]) {
      $hex = "{0:x8}" -f $propval
      '"' + "$prop" + '"' + "=dword:" + $hex | Out-File putty.reg -Append
    }
  }
  "" | Out-File putty.reg -Append
} 
```

导入.ps1

```
$input_file = "putty.reg"

$content = Get-Content "$input_file"

"Push-Location"
"cd HKCU:\"

foreach ($line in $content) { 
  If ($line.StartsWith("Windows Registry Editor")) {
    # Ignore the header
  } ElseIf ($line.startswith("[")) {
    $section = $line.Trim().Trim('[', ']')
    'New-Item -Path "' + $section + '" -Force' | %{ $_ -replace 'HKEY_CURRENT_USER\\', '' }
  } ElseIf ($line.startswith('"')) {
    $linesplit = $line.split('=', 2)
    $key = $linesplit[0].Trim('"')
    if ($linesplit[1].StartsWith('"')) {
      $value = $linesplit[1].Trim().Trim('"')
    } ElseIf ($linesplit[1].StartsWith('dword:')) {
      $value = [Int32]('0x' + $linesplit[1].Trim().Split(':', 2)[1])
      'New-ItemProperty "' + $section + '" "' + $key + '" -PropertyType dword -Force' | %{ $_ -replace 'HKEY_CURRENT_USER\\', '' }
    } Else {
      Write-Host "Error: unknown property type: $linesplit[1]"
      exit
    }
    'Set-ItemProperty -Path "' + $section + '" -Name "' + $key + '" -Value "' + $value + '"' | %{ $_ -replace 'HKEY_CURRENT_USER\\', '' }
  }
}

"Pop-Location" 
```

为非惯用代码道歉，我对 Powershell 不是很熟悉。欢迎改进！

* * *

## 回答 #3

> 赞同：57
> 
> 时间：2015-10-04T05:54:21.087

1.  启动运行，然后在打开下拉窗口中输入：regedit

2.  导航到，就像在 Window 的资源管理器中一样：
    HKEY_CURRENT_USER\Software\SimonTatham

3.  右键单击“SimonTatham”键（目录图标），选择导出
    为文件命名（例如）putty.reg 并将其保存到您的位置以供
    以后使用。
4.  关闭注册表编辑器。

完毕。

* * *

## 回答 #4

> 赞同：37
> 
> 时间：2013-05-06T12:52:10.563

如果您想导入设置，`PuTTY Portable`您可以使用该 `putty.reg`文件。

只是把它放在这条路上`[path_to_Your_portable_apps]PuTTYPortable\Data\settings\putty.reg`。程序将导入它

* * *

## 回答 #5

> 赞同：27
> 
> 时间：2015-12-24T19:31:33.273

对于那些需要从脱机注册表文件中导入 Putty 的人，例如，当您从崩溃的系统中恢复或只是移动到新机器并从旧驱动器中获取数据时，还有一个值得一提的解决方案：

[http://www.nirsoft.net/utils/registry_file_offline_export.html](http://www.nirsoft.net/utils/registry_file_offline_export.html)

这个伟大而免费的控制台应用程序将导出整个注册表或仅导出特定的注册表项。在我的情况下，我只是将注册表文件从旧驱动器复制到与导出工具相同的目录，然后我在 CMD 窗口中使用以下命令和语法以管理员身份运行：

RegFileExport.exe NTUSER.DAT putty.reg "HKEY_CURRENT_USER\Software\SimonTatham"

导入 .reg 文件并启动 Putty 后，一切都在那里。简单高效。

* * *

## 回答 #6

> 赞同：17
> 
> 时间：2015-11-03T16:51:37.657

对于那些不想弄乱注册表的人，已经创建了一种保存到文件的腻子变体。它位于此处：http: [//jakub.kotrla.net/putty/](http://jakub.kotrla.net/putty/)

如果腻子团队将其作为主要发行版的一个选项，那就太好了。

* * *

## 回答 #7

> 赞同：15
> 
> 时间：2016-01-29T13:35:38.103

导入注册表导出比上面提到的要容易得多。+ 简单地说：

1.  右键单击文件并
2.  选择“合并”

在 Win 7 Pro 上像冠军一样工作。

* * *

## 回答 #8

> 赞同：12
> 
> 时间：2017-04-05T09:42:39.043

m0nhawk 的答案在 Windows 10 上对我不起作用 - 它需要提升命令提示符并拒绝发出文件。

这有效并且不需要提升：

```
reg export HKEY_CURRENT_USER\Software\SimonTatham\PuTTY putty.reg 
```

* * *

## 回答 #9

> 赞同：11
> 
> 时间：2016-12-21T02:02:12.220

**示例：**
如何将 putty 配置和会话配置从一个用户帐户转移到另一个帐户，例如，当创建一个新帐户并希望使用旧帐户中的 putty 会话/配置时

**过程：**
- 将旧帐户中的注册表项导出到文件中
- 将文件中的注册表项导入新帐户中

**导出 reg 密钥：（** *来自 OLD 帐户）*

1.  登录旧帐户，例如 tomold
2.  打开正常的“命令提示符”（不是管理员！）
3.  输入“注册表”
4.  导航到存储配置的注册表部分，例如 [HKEY_CURRENT_USER\SOFTWARE\SimonTatham] 并单击它
5.  从文件菜单中选择“导出”或单击鼠标右键（radio ctrl 'selected branch'）
6.  保存到文件中并命名，例如“puttyconfig.reg”
7.  再次注销

**导入注册密钥：（** *进入新账户）*

8.  登录新帐户，例如 tom

9.  打开正常的“命令提示符”（不是管理员！）

10.  输入“注册表”

11.  从菜单中选择“导入”

12.  选择要导入的注册表文件，例如“puttyconfig.reg”

13.  完毕

**注意：**
不要使用“管理员命令提示符”，因为设置位于“[HKEY_CURRENT_USER...]”下，并且 regedit 将以管理员身份运行并为管理员用户显示该部分，而不是让用户从中传输和/或到。

* * *

## 回答 #10

> 赞同：10
> 
> 时间：2013-11-22T13:40:16.980

对 bumerang 将数据导入到`PuTTY portable`.

简单地将导出`putty.reg`（使用 m0nhawk 解决方案）移动到`PuTTYPortable\Data\settings\`不起作用。PuTTY Portable 备份文件并创建一个新的空文件。

要解决此问题，请合并`putty.reg`手动复制要从导出的配置迁移到以下行`putty.reg`中新创建的配置。`PuTTYPortable\Data\settings\putty.reg`

```
REGEDIT4

[HKEY_CURRENT_USER\Software\SimonTatham\PuTTY]
"RandSeedFile"="D:\\Programme\\PuTTYPortable\\Data\\settings\\PUTTY.RND" 
```

* * *

## 回答 #11

> 赞同：9
> 
> 时间：2015-09-05T02:24:35.230

当我在 Windows 7 机器上测试时，@m0nhawk 发布的答案似乎不起作用。相反，使用以下脚本将导出/导入 putty 的设置：

```
::export
@echo off
set regfile=putty.reg
pushd %~dp0

reg export HKCU\Software\SimonTatham %regfile% /y

popd 
```

--

```
::import
@echo off
pushd %~dp0
set regfile=putty.reg

if exist %regfile% reg import %regfile%

popd 
```

* * *

## 回答 #12

> 赞同：9
> 
> 时间：2019-09-18T06:36:27.317

如果您像我一样安装了新的 Windows，并且只有**在**您记得 putty 会话之后，您仍然可以导入它们，如果您有旧的 Windows 硬盘驱动器或至少备份了旧的“主”目录（`C:\Users\<user_name>`）。

在这个目录中应该有`NTUSER.DAT`文件。默认情况下它是隐藏的，因此您应该在 Windows 资源管理器中启用隐藏文件或使用其他文件浏览器。此文件包含`HKEY_CURRENT_USER`旧 Windows 注册表的分支。

要使用它，您需要`regedit`在新的 Windows 上打开，然后选择`HKEY_USERS`密钥。

然后选择`File`->`Load Hive...`并找到旧 Windows 安装的旧“主”目录。在这个目录中应该有`NTUSER.DAT`文件。它默认是隐藏的，因此，如果您没有在 Windows 资源管理器属性中启用显示隐藏文件，那么您可以手动`File name`在“Load Hive”对话框的输入框中输入文件名并按`Enter`。然后在下一个对话框窗口中输入一些键名以将旧注册表加载到其中。例如`tmp`。

您的旧注册表`HKEY_CURRENT_USER`分支现在应该可以在`HKEY_USERS\tmp`您当前注册表的分支下访问。

现在将`HKEY_USERS\tmp\Software\SimonTatham`分支导出到文件中，在您喜欢的文本编辑器中打开此文件，然后将所有字符串`putty.reg`查找并替换为. 现在保存文件。`HKEY_USERS\tmp``HKEY_CURRENT_USER``.reg`

您现在可以通过双击将此文件导入当前的 Windows 注册表。请参阅[m0nhawk 的回答](https://stackoverflow.com/a/13023979/758991)如何做到这一点。

最后，`HKEY_USERS\tmp`在注册表编辑器中选择分支，然后选择`File`->`Unload Hive...`并确认此操作。

* * *

## 回答 #13

> 赞同：6
> 
> 时间：2015-11-24T21:58:16.563

使用此方法还可以执行批量配置更改，例如更改所有会话字体。

1.  导出到 .reg
2.  对 .reg 执行搜索和替换
3.  删除所有会话
4.  导入新的 .reg

从这里摘录：[http ://www.sysadmit.com/2015/11/putty-exportar-configuracion.html](http://www.sysadmit.com/2015/11/putty-exportar-configuracion.html)

* * *

## 回答 #14

> 赞同：4
> 
> 时间：2018-04-01T14:50:02.337

[在ratil.life/first-useful-powershell-script-putty-to-ssh-config](https://ratil.life/first-useful-powershell-script-putty-to-ssh-config/)中有一个 PowerShell 脚本，它可以将会话转换为可以在`.ssh/config`. 它也可以在[GitHub](https://github.com/tmsteen/PowerShell-Scripts/blob/master/PuTTY_to_SSH_config.ps1)上找到。

此摘录包含代码的主要内容，并将生成的配置直接打印到标准输出：

```
# Registry path to PuTTY configured profiles
$regPath = 'HKCU:\SOFTWARE\SimonTatham\PuTTY\Sessions'

# Iterate over each PuTTY profile
Get-ChildItem $regPath -Name | ForEach-Object {

    # Check if SSH config
    if (((Get-ItemProperty -Path "$regPath\$_").Protocol) -eq 'ssh') {
        # Write the Host for easy SSH use
        $host_nospace = $_.replace('%20', $SpaceChar)
        $hostLine =  "Host $host_nospace"

        # Parse Hostname for special use cases (Bastion) to create SSH hostname
        $puttyHostname = (Get-ItemProperty -Path "$regPath\$_").HostName
        if ($puttyHostname -like '*@*') {
            $sshHostname = $puttyHostname.split("@")[-1]
            }
        else { $sshHostname = $puttyHostname }
        $hostnameLine = "`tHostName $sshHostname"   

        # Parse Hostname for special cases (Bastion) to create User
        if ($puttyHostname -like '*@*') {
            $sshUser = $puttyHostname.split("@")[0..($puttyHostname.split('@').length - 2)] -join '@'
            }
        else { $sshHostname = $puttyHostname }
        $userLine = "`tUser $sshUser"   

        # Parse for Identity File
        $puttyKeyfile = (Get-ItemProperty -Path "$regPath\$_").PublicKeyFile
        if ($puttyKeyfile) { 
            $sshKeyfile = $puttyKeyfile.replace('\', '/')
            if ($prefix) { $sshKeyfile = $sshKeyfile.replace('C:', $prefix) }
            $identityLine = "`tIdentityFile $sshKeyfile"
            }

        # Parse Configured Tunnels
        $puttyTunnels = (Get-ItemProperty -Path "$regPath\$_").PortForwardings
        if ($puttyTunnels) {
            $puttyTunnels.split() | ForEach-Object {

                # First character denotes tunnel type
                $tunnelType = $_.Substring(0,1)
                # Digits follow tunnel type is local port
                $tunnelPort = $_ -match '\d*\d(?==)' | Foreach {$Matches[0]}
                # Text after '=' is the tunnel destination
                $tunnelDest = $_.split('=')[1]

                if ($tunnelType -eq 'D') {
                    $tunnelLine = "`tDynamicForward $tunnelPort $tunnelDest"
                }

                ElseIf ($tunnelType -eq 'R') {
                    $tunnelLine = "`tRemoteForward $tunnelPort $tunnelDest"
                }

                ElseIf ($tunnelType -eq 'L') {
                    $tunnelLine = "`tLocalForward $tunnelPort $tunnelDest"
                }

            }

        # Parse if Forward Agent is required
        $puttyAgent = (Get-ItemProperty -Path "$regPath\$_").AgentFwd
        if ($puttyAgent -eq 1) { $agentLine = "`tForwardAgent yes" }

        # Parse if non-default port
        $puttyPort = (Get-ItemProperty -Path "$regPath\$_").PortNumber
        if (-Not $puttyPort -eq 22) { $PortLine = "`tPort $puttyPort" }

        }

        # Build output string
        $output = "$hostLine`n$hostnameLine`n$userLine`n$identityLine`n$tunnelLine`n$agentLine`n"

        # Output to file if set, otherwise STDOUT
        if ($outfile) { $output | Out-File $outfile -Append}
        else { Write-Host $output }
    }

} 
```

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2016-01-21T09:52:22.903

我使用[腻子连接管理器](http://www.thegeekstuff.com/scripts/puttycm.zip) ，您可以在其中创建会话数据库。将该数据库复制并导入到其他计算机很容易。

看到这个[方便的指南](http://www.thegeekstuff.com/2009/03/putty-extreme-makeover-using-putty-connection-manager/)

# c# - 将平面表规范化为字典

> ID：13023921
> 
> 赞同：1
> 
> 时间：2012-10-23T05:10:12.710
> 
> 标签：c#, nhibernate, fluent-nhibernate, fluent-nhibernate-mapping

我修改了如下所示的表格

```
ALTER TABLE [Plant]
  ADD
    Name nvarchar(128) NULL,
    GLN nvarchar(15) NULL,
    LicenceInformation nvarchar(1024) NULL,
    MondayStart smallint NULL,
    MondayEnd smallint NULL,
    TuesdayStart smallint NULL,
    TuesdayEnd smallint NULL,
    WednesdayStart smallint NULL,
    WednesdayEnd smallint NULL,
    ThursdayStart smallint NULL,
    ThursdayEnd smallint NULL,
    FridayStart smallint NULL,
    FridayEnd smallint NULL,
    SaturdayStart smallint NULL,
    SaturdayEnd smallint NULL,
    SundayStart smallint NULL,
    SundayEnd smallint NULL 
```

我想映射到类似的东西：

```
public class Plant : ProjectAggregateRootEntity<int>
{
    public virtual string Code { get; set; }
    public virtual string Name { get; set; }
    public virtual string Gln { get; set; }
    public virtual string LicenceInformation { get; set; }
    public virtual IDictionary<DayOfWeek, PlantOpeningHours> OpeningHours
    {
        get; set;
    }
}

public class PlantOpeningHours
{
    public virtual DayOfWeek Day { get; set; }
    public virtual int StartMinutes { get; set; }
    public virtual int DurationMinutes { get; set; }
} 
```

所以我可以列举每天的营业时间或具体参考一个：plant.OpeningHours[DayOfWeek.Monday]

所以它有点像组件映射......但不完全是。

```
Cache.ReadWrite().Region("ReferenceData");
Table("Plant");
Map(x => x.Code);
Map(x => x.Name);
Map(x => x.Gln);
Map(x => x.LicenceInformation);
Component(x => x.OpeningHours, x =>
{
    //??
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T08:30:31.917

您需要为此创建自己的 UserType：

```
public class CustomDictionaryType : IUserType
{
    public CustomDictionaryType()
    {
        SqlTypes = Enumerable.Range(0, 14).Select(x => SqlTypeFactory.Int32).ToArray();
    }

    public bool Equals(object x, object y)
    {
        // should do a key/value comparison here
        return ReferenceEquals(x, y);
    }

    public int GetHashCode(object x)
    {
        return x.GetHashCode();
    }

    public object NullSafeGet(IDataReader rs, string[] names, object owner)
    {
        // DayOfWeek.Sunday = 0, so have to shift days down by one since we start with Monday in our columns
        return names.Select((x, i) => new {DayOfWeek = GetDay(i/2), value = (int) rs[x]})
            .GroupBy(x => x.DayOfWeek, x => x.value)
            .ToDictionary(g => g.Key, g => new PlantOpeningHours
                                               {
                                                   DayOfWeek = g.Key,
                                                   StartMinutes = g.First(),
                                                   DurationMinutes = g.First() - g.Last()
                                               });
    }

    private DayOfWeek GetDay(int index)
    {
        return (DayOfWeek) ((index + 6)%7);
    }

    public void NullSafeSet(IDbCommand cmd, object value, int index)
    {
        var map = value as IDictionary<DayOfWeek, PlantOpeningHours>;
        if (map == null)
            throw new ArgumentException("Cannot handle null dictionary");
        for(var i = 0; i < 7; i++)
        {
            var day = GetDay(i);
            var entry = map[day];
            ((IDataParameter) cmd.Parameters[index + i*2]).Value = entry.StartMinutes;
            ((IDataParameter) cmd.Parameters[index + i*2 + 1]).Value = entry.StartMinutes + entry.DurationMinutes;
        }
    }

    public object DeepCopy(object value)
    {
        return new Dictionary<DayOfWeek, PlantOpeningHours>((IDictionary<DayOfWeek, PlantOpeningHours>) value);
    }

    public object Replace(object original, object target, object owner)
    {
        return new Dictionary<DayOfWeek, PlantOpeningHours>((IDictionary<DayOfWeek, PlantOpeningHours>)original);
    }

    public object Assemble(object cached, object owner)
    {
        return DeepCopy(cached);
    }

    public object Disassemble(object value)
    {
        return DeepCopy(value);
    }

    public SqlType[] SqlTypes { get; private set; }
    public Type ReturnedType { get { return typeof (IDictionary<DayOfWeek, PlantOpeningHours>); } }
    public bool IsMutable { get { return true; } }
} 
```

映射它时，您需要按顺序指定列：

```
var propMap = x.Map(t => t.Duration).CustomType<CustomDictionaryType>()
    .Columns.Clear();
for(var i = 0; i < 7; i++)
{
    var day = (DayOfWeek) ((i + 6)%7);
    propMap.Columns.Add(day + "Start");
    propMap.Columns.Add(day + "Duration");
} 
```

# ubuntu - 如何停止 apt-get install 命令的 sudo 访问？

> ID：13023923
> 
> 赞同：0
> 
> 时间：2012-10-23T05:10:18.437
> 
> 标签：ubuntu, system-administration, ubuntu-server, server-administration

我正在使用一些命令如

> apt-get 安装

需要 sudo 访问权限，因此需要停止对该特定命令的 sudo 访问权限，即在执行该命令时我们不需要 sudo 访问权限。那么如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T05:17:26.800

有很多方法可以做到这一点。

立即浮现在脑海中的是有一个 setuid 脚本可以为您完成这项工作。使其归组所有`root`并可由组`aptgrp`（您自己创建和管理）运行。

该脚本基本上将接受参数然后依次调用`apt-get`，但作为`root`用户。

但是，我建议不要这样做，因为您正在创建一个新工具，其中包含所有导致安全错误的机会。特别是因为`sudo`可以非常详细地配置允许运行的程序（无需打开所有程序`"pax ALL=(ALL) ALL"`）以及是否需要为其提供密码（`"NOPASSWD"`子句）。

`sudo`在尝试任何其他解决方案之前，我会考虑正确配置。

# directx - 如何在 Direct3D 9 中使用无窗口？

> ID：13023924
> 
> 赞同：1
> 
> 时间：2012-10-23T05:10:19.150
> 
> 标签：directx, direct3d, directx-9, direct3d9

我知道 directshow 可以通过 VMR-9 使用无窗口。VMR-9 基于 Direct3D。我可以直接使用 Direct3D 编写无窗口应用程序吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T03:31:01.140

我想你可以尝试如下

1.  创建您的 Direct3D 库，例如一个 dll 并公开两个接口，一个是 InitD3D，它以 hwnd 作为参数（创建设备时需要它），另一个是 render()，您可以调用它来绘制场景。
2.  在您的客户端应用程序代码中，首先调用 InitD3D 来初始化您的 Direct3D 内容，然后在消息循环中调用 render 以在没有要处理的消息时呈现您的场景。

# iphone - ios 6中的方向问题

> ID：13023936
> 
> 赞同：0
> 
> 时间：2012-10-23T05:11:42.430
> 
> 标签：iphone, ios6

我在通用应用程序中工作，直到 ios 5 都可以正常工作，但在 ios 6 中存在方向问题。我的应用程序仅处于纵向模式。问题是当我的 ipad 处于横向模式时，如果我启动我的应用程序，则方向不会更改为 protrait。所以请帮助我一些代码，以便我在应用程序启动之前强制我的应用程序处于 protrait 模式，仅独立于设备的方向

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T06:09:18.037

首先，我们必须在 Targets->Summary... 中设置支持的方向。

在 iOS6.0 中 shouldAutorotateToInterfaceOrientation 方法已被弃用。所以，我们必须使用 shouldAutorotate 方法来代替这个方法。

使用supportedInterfaceOrientations方法，如果我们想要所有方向，我们必须设置我们想要的方向，比如UIInterfaceOrientationMaskAll

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T05:19:57.293

发生这种情况是因为 Apple 改变了管理 UIViewController 的方向的方式。在 iOS6 中，Oreintation 处理方式不同。在 iOS6 中容器（例如 UINavigationController）不会咨询它们的子级来确定它们是否应该自动旋转。默认情况下，应用程序和视图控制器支持的界面方向设置为 iPad 惯用语的 UIInterfaceOrientationMaskAll 和 iPhone 惯用语的 UIInterfaceOrientationMaskAllButUpsideDown 。因此，设备在默认情况下会更改方向。

所以需要执行一些步骤。

**1 - 从这里设置方向**

![在此处输入图像描述](../Images/edac387fc1d47aaf5163e2747ad6d090.png)

**2 - 将此代码放在添加到 RootViewController 的 FirstViewController 中**

```
 @implementation UINavigationController (RotationIn_IOS6)
   //Here UINavigationController is the RootViewController added To the Window

 -(BOOL)shouldAutorotate
{
return [[self.viewControllers lastObject] shouldAutorotate];
}

 -(NSUInteger)supportedInterfaceOrientations
{
   return [[self.viewControllers lastObject] supportedInterfaceOrientations];
}

 - (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation
{
     return [[self.viewControllers lastObject] preferredInterfaceOrientationForPresentation];
}

@end 
```

** 将以下方法放入 ViewController 中，IOS6 中引入 Allow Oreintation Change **

```
 - (BOOL)shouldAutorotate
 {

   return NO;

  }

/*Return the Number of Oreintation going to supported in device*/

 - (NSUInteger)supportedInterfaceOrientations
  {
return  (UIInterfaceOrientationMaskPortrait |     UIInterfaceOrientationMaskPortraitUpsideDown );

 }

 // Returns interface orientation masks.

  - (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation
  {
      return  (UIInterfaceOrientationPortrait | UIInterfaceOrientationPortraitUpsideDown      ) ;

 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T05:33:02.273

在你的`ViewController.m`你将不得不定义你支持的方向。在 IOS 6 中，这是处理支持的方向的方法。

```
- (NSUInteger)supportedInterfaceOrientations{
    return UIInterfaceOrientationMaskAll;
} 
```

`UIInterfaceOrientationMaskAll`意味着它将支持`view`.

另请阅读 Apple Doc - [Doc about Orientation](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIApplication_Class/Reference/Reference.html)

# cakephp - Cakephp 树行为 moveUp()/moveDown() 返回 false

> ID：13023940
> 
> 赞同：1
> 
> 时间：2012-10-23T05:12:08.257
> 
> 标签：cakephp, cakephp-2.0

所以我实现[了 CakePHP 的 Tree Behavior](http://book.cakephp.org/2.0/en/core-libraries/behaviors/tree.html#TreeBehavior)

`$this->Model->moveUp(4, 1)`（或我传入的任何内容）返回 false。我已从书中复制并粘贴以尝试解决此问题。

我已经验证了数据库中存在带有 id 的记录，并且它可以在树中上下移动，但是该函数总是返回 false。

有人有想法么？我难住了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T07:48:07.937

`TreeBehavior::verify()`在这种情况下，我会尝试`TreeBehavior::reorder`确保树结构是正确的。

# python - Python多行字符串格式

> ID：13023941
> 
> 赞同：2
> 
> 时间：2012-10-23T05:12:09.373
> 
> 标签：python

我试图有一个脚本来为我生成一些makefile。我想格式化这个多行字符串，但我遇到了一个奇怪的错误。

代码：

```
make_content = """ PCC = pgcc 
%(bench)_serial: src/main.c src/%(bench)_serial.c ../common/util.c
\t$(PCC) $(ACCFLAGS) -o bin/%(bench)_serial src/main.c src/%(bench)_serial.c

clean:
\trm -rf *.o *.oo bin/*""" % {'bench':'umpalumpa'} 
```

错误：

```
Traceback (most recent call last):
  File "./new_bench.py", line 27, in <module>
    \trm -rf *.o *.oo bin/*""" % {'bench':'umpalumpa'}
ValueError: unsupported format character '_' (0x5f) at index 21 
```

有任何想法吗？

注释：这是生成文件的截断版本，对此没有评论。注[2]：'umpalumpa' 是一个占位符，以确保它是一个字符串。总有一天会成为真正的东西。

**编辑：**我正在使用 python 2.7

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T05:25:55.527

正如您已经得到了为什么这不起作用的答案，一个更好的方法并且还建议使用 if`format`函数（如果您使用的是`Python 2.6+）： -

```
"src/{bench}_serial.c".format(bench='umpalumpa') 
```

因此，对于您的字符串，它变为： -

```
ake_content = """ PCC = pgcc 
{bench}_serial: src/main.c src/{bench}_serial.c ../common/util.c
\t$(PCC) $(ACCFLAGS) -o bin/{bench}_serial src/main.c src/{bench}_serial.c

clean:
\trm -rf *.o *.oo bin/*""".format(bench='umpalumpa') 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-23T05:22:07.927

您需要在映射键后[指定转换类型：](http://docs.python.org/library/stdtypes.html#string-formatting)

```
"%(bench)s_serial" % {'bench':'umpalumpa'} 
```

注意`s`下划线前的。这里的输出仍然是`"umpalumpa_serial"`.

转换类型始终是必需的，并且始终位于`%`和任何可选组件之后。

格式化三引号字符串文字和单引号字符串文字没有区别。

# ios - AVmutablevideo 合成中的 CAlayer

> ID：13023945
> 
> 赞同：1
> 
> 时间：2012-10-23T05:12:34.190
> 
> 标签：ios, xcode, avfoundation, calayer

我正在尝试`videoasset CGSize`为`CAlayer`.

```
CGSize videoSize = [videoasset naturalSize]; 
```

不幸的是，`naturalSize`已弃用。我可以用什么来代替 naturalSize？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T21:47:34.240

从资产创建一个[AVPlayerItem](http://developer.apple.com/library/ios/#documentation/AVFoundation/Reference/AVPlayerItem_Class/Reference/Reference.html#//apple_ref/doc/c_ref/AVPlayerItem)，并读取其`CGSize presentationSize`属性。

然后，您可以使用对象的`videoGravity`属性`AVPlayerLayer`来根据自己的喜好缩放视频。

# php - 在 foreach 循环中增加唯一变量

> ID：13023950
> 
> 赞同：0
> 
> 时间：2012-10-23T05:12:55.650
> 
> 标签：php

我有这样的场景：

```
$data = "A,B,C=>fruit'\n'D,E,F=>veggie'\n'A,D=>mix"
$rules = array_map('trim', explode('\n', $data));
$i = 1;
foreach ($rules as $rule) {
   $letter_group."_".$i = array_map('trim', explode('=>', $rule));
   $letter.$i = array_map('trim', explode(',', $letter_group."_".$i[0]));
   $group.$i = array_map('trim', explode(',', $letter_group."_".$i[1]));
   $i++;
   var_dump($letter.$i);
   var_dump($group.$i);
} 
```

但这不起作用。如何获得这些输出？

```
$letter1 = array('A','B','C');
$letter2 = array('D','E','F');
$letter3 = array('A','D');
$group1 = array('fruit');
$group2 = array('veggie');
$group3 = array('mix'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T05:47:14.813

我同意这些评论，您应该尝试将您的值放入一个数组中（为此 +1）。我认为这就是你想要的：

```
<?php
$data = "A,B,C=>fruit'\n'D,E,F=>veggie'\n'A,D=>mix";
$data=str_replace("'","",$data);//you don't need the single quotes in there
$rules = explode("\n", $data);
$array=array();
foreach ($rules as $rule) {
    $ar=explode("=>",$rule);
    $array[$ar[1]]=explode(",",$ar[0]);
}
print_r($array);
?> 
```

这打印出来：

```
Array
(
[fruit] => Array
    (
        [0] => A
        [1] => B
        [2] => C
    )

[veggie] => Array
    (
        [0] => D
        [1] => E
        [2] => F
    )

[mix] => Array
    (
        [0] => A
        [1] => D
    )

) 
```

**从以下问题编辑：**

虽然我建议将其存储在上面的多用途数组中，但如果您**必须**将它们放在单独的变量中，您可以从上面构建的数组中分配变量：

```
$letter1=$ar['fruit']
$letter2=$ar['veggie'];
$letter3=$ar['mix'];
//etc .... 
```

我可以问一下，为什么您需要在单个变量中使用这些？

# c++ - 在这种情况下我可以重复使用指针吗？

> ID：13023953
> 
> 赞同：0
> 
> 时间：2012-10-23T05:13:17.613
> 
> 标签：c++, pointers, delete-operator

认为：

```
struct Foo
{
    Obj* pObj;
    Foo() : pObj(NULL);
};

Obj* CreateObj()
{
   //do some stuff and then
   return new Obj; //obj is a class
}

int main()
{
   Foo foo;
   foo.pObj = CreateObj();
   DoSomeOperationWithTheObj( foo.pObj );
   //suppose foo is a monster that should be 'killed' or deleted now
   delete foo.pObj;
   foo.pObj = NULL;
   //the question is can this pointer be 're-used' now like this:
   foo.pObj = CreateObj(); //create another object
} 
```

既然指针被删除了，重用它不是有问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T06:33:21.613

至于你原来的问题：是的，你可以重新分配给这样的指针。指针只保存一个内存地址，仅此而已。

但是您实际上不应该这样做，因为像这样处理原始指针可能会导致错误，您的代码中已经有一些错误。现代 C++ 允许您以更好的方式做到这一点而无需担心。假设我们从这个（可编译的）代码开始，我用 int 替换了 Obj，但它是本机类型而不是类的事实并不重要：

```
#include <iostream>

struct Foo
{
    int* pObj;
    Foo() : pObj(NULL) {}
};

int* CreateObj()
{
   return new int(42); //obj is a class
}

int main()
{
   Foo foo;
   foo.pObj = CreateObj();
   std::cout << *foo.pObj << std::endl;
   delete foo.pObj;
   foo.pObj = new int(13);
   std::cout << *foo.pObj << std::endl;
   delete foo.pObj;
} 
```

我们可以将其转换为以下内容：

```
#include <iostream>
#include <memory>

struct Foo
{
    std::unique_ptr<int> pObj;
    Foo() : pObj(NULL) {}
};

std::unique_ptr<int> CreateObj()
{
   return std::unique_ptr<int>(new int(42));
}

int main()
{
   Foo foo;
   foo.pObj = CreateObj();
   std::cout << *foo.pObj << std::endl;
   foo.pObj = std::unique_ptr<int>(new int(13));
   std::cout << *foo.pObj << std::endl;
} 
```

请注意，主要变化是我删除了原始指针并用[`unique_ptr`](http://en.cppreference.com/w/cpp/memory/unique_ptr)包装器替换了它们。这有几个优点：

1.  您明确声明所有权， a`unique_ptr`只能由当前范围拥有。当 createObj 创建对象时，通过返回临时（无名）`unique_ptr`它释放所有权，以便调用者可以随时删除它。这将避免棘手的内存泄漏。
2.  `unique_ptr`当超出范围或被覆盖时（例如被赋值运算符），删除会自动为您发生。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T05:20:57.920

是的，您可以重复使用指针。指针只是一种引用对象的方式。由于您删除了对象，因此您可以随意使用指针来满足您的任何需要。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T05:23:18.717

这样做绝对没有问题。指针只是地址的容器（类似于包含值的变量）。

`new`分配一个对象并返回一个地址给它。然后，您可以将结果地址分配给您想要的任何指针（适当类型的），无论它可能是`delete`d 指针、持有“现有”分配对象的指针、持有 NULL 的指针或未初始化的指针。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T05:58:39.433

重用指针没有问题，只要先释放先前分配的内存，就像您在代码中所做的那样。

当您`delete`使用指针时，您实际上释放了它指向的内存。指针的值（*该内存的起始地址*）保持不变，直到您通过`pointer = NULL`或重新分配它`pointer = new ..`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-23T05:59:06.290

您可以重用指针，因为您从未删除过指针；你删除了`Obj`指针指向的那个。请记住，指针正在存储内存地址。因此，就像您可以将 int 更改为不同的值一样，您始终可以更改指针以记住或指向不同的内存地址。此外，当您对 执行删除操作时`foo.pObj`，您并不是在说“删除 foo.pObj”。相反，您说的是“删除 foo.pObj 指向的 Obj”。

如果您`foo.pObj`在执行操作后尝试对指向的对象执行某些操作，则会出现问题`delete`。

# c++ - 这个 C++ 代码有什么问题？它在运行时崩溃

> ID：13023956
> 
> 赞同：0
> 
> 时间：2012-10-23T05:13:58.600
> 
> 标签：c++, pointers, nodes

我想知道以下 C++ 代码有什么问题。它在运行时崩溃。

```
#include <iostream.h>
#include <conio.h>
using namespace std;

class node
{
    public:
        int info;
        node *addr;

        node(){
            info = 0;
            addr = NULL;          
        }

        ~node(){}
};

void func(node *);

int main(void){   
    node *head;
    node b;

    b.info = 10;

    *head = b;

    func(head); 
    getch();
}

void func(node *obj){
    cout<<"i: "<<(*obj).info;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T05:18:39.827

```
*head = b; 
```

不正确，因为 head 没有指向任何东西

```
head = &b ; 
```

应该解决问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T08:41:25.427

看来问题出在

```
*head = b; 
```

将其替换为

```
head = &b ; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T05:16:45.457

错误的一件事是您在这里声明了一个指针：

```
node *head; 
```

然后在这里使用它：

```
 *head = b; 
```

不为`head`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T05:20:59.167

该行`*head = b;`应该改为`head = &b;`，假设您想将地址分配给`b`指针`head`。

错误的版本可以编译，但它会将对象的副本分配给*未初始化*指针`b`中包含的地址。

 ** * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-23T05:26:56.363

其他人已经回答了您写入任意内存的问题，但我想专注于其他一些事情，例如：

```
#include <iostream.h>
#include <conio.h> 
```

这有什么问题是您使用的编译器*严重*过时。C++ 头文件不再具有`.h`它们，并且`conio.h`严重不标准且老化。

我建议您首先更新到更新的环境。

此外，OO 的基石之一是对象对自己的行为负责。让代码直接访问对象内部几乎*从来都不是一个好主意。*

您应该提供适当的 getter 和 setter，并通常确保您的类中唯一的*公共*内容是函数而不是数据。

换句话说，类似：

```
class node {
    public:
        node () {
            info = 0;
            addr = NULL;          
        }

        ~node() {
        }

        int getInfo() {
            return info;
        }
        void setInfo (int newInfo) {
            // Check newInfo for validity first.
            info = newInfo;
        }

        node *getAddr() {
            return addr;
        }
        void setAddr (node *newAddr) {
            // Check newAddr for validity first.
            addr = newAddr;
        }

    private:
        int info;
        node *addr;

}; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-23T05:34:12.540

我看到两个问题：

1.  你引用了一个未初始化的指针 `*head`

2.  您将堆栈变量存储在指针中。

我（和其他人一样）认为，当您说`*head = b` 您的真正意思时`head = &b`。在第一种情况下，您引用一个节点指针并在其上分配一个节点值。这是一个错误，因为该`head`变量尚未初始化，因此您在无效的内存地址之上复制了一个完整的节点值。

如果替换为`head = &b`，会稍微好一些，因为现在您将`head`指针设置为 的地址`b`。但是现在你遇到了另一个错误，因为`b`它是一个堆栈变量，一个指针只有在函数的生命周期内才有效。一旦函数完成，堆栈空间将被重用，`head`指针会破坏那里的任何东西。

典型的解决方案是保留`head`指向节点的指针，但也更改`b`为指向节点的指针，并使用堆内存分配对其进行初始化，例如`b = (node *)malloc(sizeof(node);`, 或`b = new node;`. 然后，您可以将任何内容存储在 中`*b`，最后将指针存储到寿命更长的变量中，例如`heap=b;`.*

# php - 从 PHP 到 HTTP 处理程序执行 HTTP Post

> ID：13023959
> 
> 赞同：0
> 
> 时间：2012-10-23T05:14:23.857
> 
> 标签：php, http-post, httphandler

所以标题是自我描述的。这是我的php代码

```
function do_post_request($url, $data, $optional_headers = null)
{
    $url = 'http://localhost:1181/WebSite1/PostHandler.ashx';
    $data = array( 'fprm' => 1, 'sprm'=> 2, 'tprm'=>3
                  );

  $params = array('http' => array(
              'method' => 'POST',
              'content' => $data
            ));

 //$params = array('method'=>'POST', 'content'=>$data);
 /* if ($optional_headers !== null) {
    $params['http']['header'] = $optional_headers;
  }*/
  $ctx = stream_context_create($params);
  //stream_context_set_option()

  //debug($params);
  //die();
  $fp = @fopen($url, 'rb', false, $ctx);
  if (!$fp) {
    throw new Exception("Problem with $url, $php_errormsg");
  }
  $response = @stream_get_contents($fp);
  if ($response === false) {
    throw new Exception("Problem reading data from $url, $php_errormsg");
  }
  return $response;
} 
```

这是我的处理程序代码：

```
 public void ProcessRequest(HttpContext context)
{
    context.Response.ContentType = "text/plain";
    string responseStr = "Hello World, this reply is from .net";
    string fprm = context.Request["fprm"];
    string sprm = context.Request["sprm"];
    string tprm = context.Request["tprm"];
    context.Response.Write(responseStr + " " + fprm + " " + sprm + " " + tprm);

} 
```

这是我得到的答复：

```
'Hello World, this reply is from .net   ' 
```

即没有参数值，我读了一个[类似的帖子](https://stackoverflow.com/questions/6828089/passing-parameter-to-http-handler-from-jquery-call)，我得到的想法是，也许你需要设置不同的上下文类型来传递内容参数。但是通过 php 文档查看，我没有找到任何用于设置上下文类型的选项[http://php.net/manual/en/context.http.php](http://php.net/manual/en/context.http.php)

任何帮助都会很棒，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T05:22:35.813

您只是忘记`content-type`在流上下文中设置标题。将其设置为`application/x-www-form-urlencoded`

而且您不能将数组作为内容直接传递给流上下文，它必须是 urlencoded 表单字符串，所以使用`http_build_query`它

```
 $params = array('http' => array(
              'method' => 'POST',
              'header'=>'Content-Type: application/x-www-form-urlencoded',
              'content' => http_build_query($data)
            )); 
```

您没有找到如何在 php 的流上下文文档中更改内容类型的原因是因为它们没有为此提供包装器，但它们确实为您提供了一种添加所需 HTTP 标头的方法。

这`content-type`是必要的，因为否则请求的服务器端应用程序最终会得到一个它不知道如何处理的字符串，因为从理论上讲，您可以通过 http 请求的内容发送任何类型的数据。`application/x-www-form-urlencoded`告诉服务器作为内容发送的字符串只是一个常规的 html 表单序列化和 urlencoded。`http_build_query`接受一个关系数组并像 html 表单一样对其进行序列化。

# algorithm - 使用 BFS 在三角形中定位费马点

> ID：13023960
> 
> 赞同：2
> 
> 时间：2012-10-23T05:14:31.397
> 
> 标签：algorithm, graph, geometry, breadth-first-search

给定网格中的 3 个点，您如何找到一个点，使该点与所有 3 个点的距离总和最小化。这个问题的一个明显答案是费马三角形。我有兴趣知道我们是否可以在图中使用广度优先搜索算法来定位费马点。

```
struct node{
  int Person1X,Person1Y,Person2X,Person2Y,Person3X,Person3Y; //X and Y coordinates of all 3 persons
  int steps;   //sum of distances covered by all 3 person to reach this state
} 
```

在进行 BFS 时，我们可以设置一个约束条件，如果 steps>min（以 3 个人为顶点的三角形任意两条边的总和）返回；

```
if(Person1X=Person2X=Person2X)AND(Person1Y=Person2Y=Person3Y) return steps; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T00:02:50.233

无需搜索。

给定“三角形”ABC： SumOfDistances( p ) = dist( A, p ) + dist( B, p ) + dist( C, p )

其中 dist( q, p ) = |q [x] -p [x] | + |q [y] -p [y] | *（曼哈顿距离）*

你可以看到 SumOfDistances( p ) = SumOfDistances [x] ( p ) + SumOfDistances [y] ( p )

因此，您可以独立地最小化 x 和 y 轴上的距离。

因此，费马点的 x 坐标是 3 个给定 x 坐标的中值。费马点的 y 坐标是 3 个给定 y 坐标的中值。

# php - 即使定义了函数，也调用未定义的函数错误

> ID：13023961
> 
> 赞同：1
> 
> 时间：2012-10-23T05:14:32.183
> 
> 标签：php, runtime-error

我有一个受会话保护的文件“admin.php”。这是登录后的默认页面。这会引发下面给出的错误：

> 致命错误：在第 14 行调用 C:\xampp\htdocs\cd-website\cms\admin.php 中未定义的函数 listPages()

```
<?php
/*
* initialize session for admin
*/
session_start();

if(isset($_SESSION['admin_user']))
{
    require_once '../cms/config.php';

    $action = isset($_POST['action']) ? $_POST['action'] : '';

    if ($action == null)
    {
        listPages();
        exit;
    }

    /*
     * using switch for choosing function
     */
    switch($action)
    {
        case 'ManagePages':
            ManagePages();
            break;
        case 'listUsers':
            listUsers();
            break;
        case 'orderList':
            listOrders();
            break;
        case 'listBanner':
            listBanners();
            break;
        case 'NewsletterUser':
            NewsletterUsers();
            break;
        case 'Newsletter':
            Newsletter();
            break;
        case 'listQuestion':
            listquestions();
            break;
        case 'testinomial':
            listTesti();
            break;
        default:
            listPages();
    }

    /*
     * different function for different tasks
     */
    function ManagePages()
    {
        listPages();
    }

    function listUsers()
    {
        // include listusers.php here. required rows is in listusers.php file
    }

    function listOrders()
    {
        // include listorders.php here
    }

    function  listBanners()
    {
        // include listbanners.php here
    }

    function  NewsletterUsers()
    {
        // include listNUsers.php here
    }

    function listquestions()
    {
        // include listquestions.php here.
    }

    function listTesti()
    {
        // include listTesti.php here.
    }

    function Newsletter()
    {
        //  include newsletter.php
    }

    function listPages()
    {
        //  include listPages.php here
    }
}
else
{
    header("Location:index.php");
} 
```

当我尝试解决第 14 行的错误时，它会在`listPages()`存在的每一行上显示错误。

为什么会这样？请帮忙！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-23T05:25:50.457

You declared a function inside a `if` block, which can be tricky. According to [http://www.php.net/manual/en/functions.user-defined.php](http://www.php.net/manual/en/functions.user-defined.php), [conditional functions](http://www.php.net/manual/en/functions.user-defined.php#example-147), they will not be available until the execution reaches the function definition, but if you place the function outside, the sequence doesn't matter and the function is available throughout the whole script.

```
<?php
bar(); // OK
function bar()
{
  echo "I exist immediately upon program start.\n";
}

if (TRUE) {
  foo(); // Fails because `foo` isn't defined yet.
  function foo()
  {
    echo "I don't exist until program execution reaches me.\n";
  }
} 
```

And please check [http://codepad.org/EMW3kzqC](http://codepad.org/EMW3kzqC).

So the solution is to declare the function outside the `if` block, or place them above the location where you use it (if it really needs to reside inside the `if` block).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T05:29:21.017

I'm not exceptionally familiar with php, but it looks like you're defining your functions only within the big if block there. You might be running into the way php handles scope.

Try placing your function definitions outside of the if block and see what happens?

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T14:03:34.807

在调用之前检查您的功能是否已设置。在 PHP 中，您必须在调用函数之前声明它们。

您的错误清楚地表明，当您调用`listPages()`此函数时还不存在。

我确定您是否紧随其后：

```
if(isset($_SESSION['admin_user']))
{ 
```

该函数的声明

```
function listPages()
{
    //Do something here
} 
```

您的错误将消失。

我可以看到您正在尝试在结构代码中使用函数，就像它们在某些类（面向对象的代码）中一样，不幸的是 PHP 不能那样工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T05:23:45.340

这里有两种解决方案，一种是使用类，上述方法如果您使用上述方法，则应在调用该函数之前定义函数。

所以

```
function listPages()
   {
                              //include listPages.php here
   }

after that call listPages() 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-23T05:34:02.023

```
<?php
/*
* initialize session for admin
*/
session_start();

if(isset($_SESSION['admin_user']))
{
    require_once '../cms/config.php';

    $action = isset($_POST['action']) ? $_POST['action'] : '';

    if ($action == null)
    {
        listPages();
        exit;
    }

    /*Functions */
    function ManagePages()
    {
        listPages();
    }

    function listUsers()
    {
        // include listusers.php here. required rows is in listusers.php file
    }

    function listOrders()
    {
        // include listorders.php here
    }

    function  listBanners()
    {
        // include listbanners.php here
    }

    function  NewsletterUsers()
    {
        // include listNUsers.php here
    }

    function listquestions()
    {
        // include listquestions.php here.
    }

    function listTesti()
    {
        // include listTesti.php here.
    }

    function Newsletter()
    {
        //  include newsletter.php
    }

    function listPages()
    {
        //  include listPages.php here
    }

    /*
     * using switch for choosing function
     */
    switch($action)
    {
        case 'ManagePages':
            ManagePages();
            break;
        case 'listUsers':
            listUsers();
            break;
        case 'orderList':
            listOrders();
            break;
        case 'listBanner':
            listBanners();
            break;
        case 'NewsletterUser':
            NewsletterUsers();
            break;
        case 'Newsletter':
            Newsletter();
            break;
        case 'listQuestion':
            listquestions();
            break;
        case 'testinomial':
            listTesti();
            break;
        default:
            listPages();
    }

    /*
     * different function for different tasks
     */

}
else
{
    header("Location:index.php");
} 
```

# scala - 有没有办法在 Scala IDE 中使用 Java 7 进行编译？

> ID：13023964
> 
> 赞同：1
> 
> 时间：2012-10-23T05:14:47.467
> 
> 标签：scala, scala-ide

我下载了 Typesafe 的 Scala IDE 包，现在我尝试让它与我的项目一起使用，该项目使用 Scala 2.9.2 和 Java 7。我的问题是，Eclipse 仍然使用 Java 6 编译它，我得到了关于`javax.swing.JComboBox does not take type parametes`.

我正在启动 eclipse 并`JAVA_HOME`指向我的`jdk7/jre`目录，并将 JRE 7 库添加到项目中。我究竟做错了什么？

**编辑：**出于某种原因，似乎只有 Scala 编译器可以用 Java 6 编译 - 如果我使用纯`.java`文件，它似乎是用正确的版本编译的。Eclipse 怎么会在一个项目中使用两个不同的 jdk？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T13:19:10.247

*eclipse IDE*使用环境的默认 JRE 启动，例如使用`JAVA_HOME`.

在这方面，它就像您机器上的任何其他 java 应用程序一样。

用于在 ide 中编译和运行代码的 jdk 是完全独立的，它在 eclipse*首选项*中定义

**Java > 已安装的 JRE**

您可以在那里添加任何运行时或 sdk，并选择用于新项目的默认值。

*此外，您可以在项目属性*中为每个项目覆盖此首选项

 *通过这种方式，编译输出独立于您的机器 java 环境，并且可以选择在每个项目的基础上定义。

至于*Scala-IDE*，我需要时间，因为我的日常工作机器上没有安装它。我稍后会检查。*

# gps - GPS 信号低时使用加速度计和陀螺仪跟踪汽车

> ID：13023966
> 
> 赞同：3
> 
> 时间：2012-10-23T05:15:23.430
> 
> 标签：gps, position, accelerometer, gyroscope

我们计划编写一个软件，每 5 秒左右跟踪汽车的 GPS 位置、GPS 信号强度、加速度计（X、Y、Z）和陀螺仪（X、Y、Z）。并将数据发送到服务器进行后期处理。服务器将确定哪些道路被汽车覆盖。所以这不是实时处理。它可能发生在后端（在夜间作为批处理）

当 GPS 信号下降时，说 30 秒。后处理应该使用同时记录的其他传感器数据来猜测纬度和经度。所以我正在寻找一种解决方案来找到使用加速度计和陀螺仪传感器覆盖的速度或距离。

客户端可以是任何 Android 设备或 Windows ce 设备。后处理服务器只需要解决以 CSV 或任何其他格式发送的数据。

我找到了一些关于惯性导航系统和其他算法的文章和白皮书。并尝试实施其中一些。或者有没有其他更好的公式，比如我在下面找到的那个。

```
vel_new = vel_old + ( acc_old + ( (acc_new - acc_old ) / 2.0 ) ) * SAMPLING_TIME; 
```

**编辑：** 除了所有传感器数据之外，我还有我感兴趣的特定城市地图的所有道路，我的数据库存储为 sqlgeography。因此，根据我能得到的大致位置，我会尝试找到他们本可以到达或转弯的最近的道路。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T08:29:44.533

这是一个经典的问题：[它行不通。](https://stackoverflow.com/a/7835988/341970)这个答案是关于位置的，但即使是速度也不起作用。

使用 GPS 的最后和第一个测量速度并在它们之间进行插值的启发式方法会更好，从而执行可从地图推导出的位置约束。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-14T08:50:13.017

我也在研究这个话题。我读过一篇论文，也许它对你也有好处。在本文中，通过使用加速度计和陀螺仪与 gps 相结合的解决方案成为现实。但我有一个疑问，如何减去重力效应来获得真正的加速度？如果您对本文有一些想法，希望您可以与我分享。 [纸](http://www.tkt.cs.tut.fi/research/nappo_files/Davidson08.pdf)

# javascript - onclick javascript 函数在 IE 中不起作用

> ID：13023972
> 
> 赞同：0
> 
> 时间：2012-10-23T05:15:54.913
> 
> 标签：javascript, onclick

```
var myButton = document.getElementsByTagName("input");

myButton[0].onclick = function() {
  if(ansArray[0] == 'a')
    myButton[0].style.backgroundColor = "green";
  else
    myButton[0].style.backgroundColor = "red";
}

myButton[1].onclick = function() {
  if(ansArray[0] == 'b')
    myButton[1].style.backgroundColor = "green";
  else
    myButton[1].style.backgroundColor = "red";
} 
```

**onclick**函数在我上面的示例（IE9）中不起作用，但它们在 Chrome 和 Firefox 中运行良好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T05:41:17.327

问题是当您尝试访问按钮时，您的 DOM 尚未加载。将您的 onclick 处理程序包装在 window.load 中，一切都应该正常工作：

```
window.onload = function () {
    var myButton = document.getElementsByTagName("input");

    myButton[0].onclick = function() {
        if(ansArray[0] == 'a') {
            myButton[0].style.backgroundColor = "green";
        } else {
            myButton[0].style.backgroundColor = "red";
        }
    }

    myButton[1].onclick = function() {
        if(ansArray[0] == 'b') {
            myButton[1].style.backgroundColor = "green";
        } else {
            myButton[1].style.backgroundColor = "red";
        }
    }
} 
```

我真的很惊讶这在 Webkit 和 Mozilla 下工作。我创建了一个小型演示[小提琴](http://jsfiddle.net/LCbkp/2/)。在所有情况下，在所有浏览器中，对象在加载前都显示为 null，除非脚本块位于您在正文中访问的元素之后。

请注意，尽管`getElementsByTagName`在不同浏览器中的反应方式有所不同，但它不同于`getElementById`：[fiddle](http://jsfiddle.net/LCbkp/3/)

另一种选择是不等待`window.onload`将是等待，`document.body`因为`window.onload`在加载包括图像在内的所有内容之后发生。

```
function Start() {
    if (document.body) {
        var myButton = document.getElementsByTagName("input");

        myButton[0].onclick = function() {
            if(ansArray[0] == 'a') {
                myButton[0].style.backgroundColor = "green";
            } else {
                myButton[0].style.backgroundColor = "red";
            }
        }

        myButton[1].onclick = function() {
            if(ansArray[0] == 'b') {
                myButton[1].style.backgroundColor = "green";
            } else {
                myButton[1].style.backgroundColor = "red";
            }
        }
    }
}

setInterval(Start, 50); // 50 ms is a small enough interval to retry 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T05:36:51.603

我在这里使用的相同答案[Javascript onclick 函数不起作用](https://stackoverflow.com/questions/13062412/javascript-onclick-functions-do-not-work/13062634#13062634)应该适用。

# php - URL 参数值替换

> ID：13023974
> 
> 赞同：1
> 
> 时间：2012-10-23T05:15:55.080
> 
> 标签：php, string, url

> **可能重复：**
> [更改查询字符串中的单个变量值](https://stackoverflow.com/questions/4037909/change-single-variable-value-in-querystring)

例如：`www.example.com/feeds?arg1=xyz&arg2=abc$arg3=pqr`。我想用 123 替换 arg2 值以获得`www.example.com/feeds?arg1=xyz&arg2=123$arg3=pqr`. 请提出一种最简单的方法来实现这一目标。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T05:31:38.747

过程很简单。

1.  解析查询部分。
2.  使用[parse_str](http://php.net/parse_str)提取查询中的每个变量
3.  代替它。
4.  使用[http_build_query](http://php.net/http_build_query)再次构建查询
5.  将此查询字符串放入主 url

请参阅此代码。

```
$str = "www.example.com/feeds?arg1=xyz&arg2=abc$arg3=pqr";
$p = strpos($str, "?");
if($p!==false){
    $q = substr($str, $p+1);
    parse_str($q, $u);
    $u['arg2']='new value';
    $q=http_build_query($u);
    $str = substr($str, 0, $p). "?". $q;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T05:20:21.603

```
$url = "?";
foreach ($_GET as $key => $value) {
  if ($key != 'arg2') {
    $url .= "$key=$value&";
  }
}
$url .= "arg2=123"; // has arg=123 at the very end 
```

一旦你有了这个，你所要做的就是：

```
header("Location: $url"); 
```

由于您在 之前没有提供任何东西`?`，它只会更改`$_GET`参数，这就是您所需要的。

# python - 从文件创建列表字典

> ID：13023983
> 
> 赞同：3
> 
> 时间：2012-10-23T05:16:37.690
> 
> 标签：python, list, dictionary

我在 txt 文件中有以下格式的列表：

```
Shoes, Nike, Addias, Puma,...other brand names 
Pants, Dockers, Levis,...other brand names
Watches, Timex, Tiesto,...other brand names 
```

如何将这些放入字典中，如下所示：dictionary={Shoes: [Nike, Addias, Puma,.....] Pants: [Dockers, Levis.....] Watches:[Timex, Tiesto,... ..] }

如何在 for 循环中而不是手动输入中执行此操作。

我努力了

```
 clothes=open('clothes.txt').readlines() 
       clothing=[]
       stuff=[] 
       for line in clothes:
               items=line.replace("\n","").split(',')
               clothing.append(items[0])
               stuff.append(items[1:])

   Clothing:{}
         for d in clothing:
            Clothing[d]= [f for f in stuff] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T05:21:23.810

这是一种更简洁的做事方式，尽管您可能希望将其拆分一下以提高可读性

```
wordlines = [line.split(', ') for line in open('clothes.txt').read().split('\n')]
d = {w[0]:w[1:] for w in wordlines} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T05:19:59.340

怎么样：

```
file = open('clothes.txt')
clothing = {}
for line in file:
    items = [item.strip() for item in line.split(",")]
    clothing[items[0]] = items[1:] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T06:33:41.797

试试这个，它将消除替换换行符的需要，并且非常简单但有效：

```
clothes = {}
with open('clothes.txt', 'r', newline = '/r/n') as clothesfile:
    for line in clothesfile:
        key = line.split(',')[0]
        value = line.split(',')[1:]
        clothes[key] = value 
```

'with' 语句将确保在执行实现字典的代码后关闭文件读取器。从那里您可以随心所欲地使用字典！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T05:23:07.080

使用列表理解，您可以：

```
clothes=[line.strip() for line in open('clothes.txt').readlines()]
clothingDict = {}
for line in clothes:
  arr = line.split(",")
  clothingDict[arr[0]] = [arr[i] for i in range(1,len(arr))] 
```

# google-app-engine - Python App Engine 中的 Static_files 与 Static_dir 缓存过期标头

> ID：13023987
> 
> 赞同：4
> 
> 时间：2012-10-23T05:17:04.870
> 
> 标签：google-app-engine, python-2.7, cache-expiration

我正在使用 Google App Engine 1.7.2 / Python 2.7 并尝试添加静态文件的客户端缓存。

当我在 app.yaml 中指定 static_dir 时，缓存控制标头未设置。

```
- url: /static/images
  static_dir: static/images
  expiration: "7d 0h" 
```

但是，当我将规范切换到 static_files 时，如下所示，它确实被设置了。

```
- url: /static/images(.*)
  static_files: static/images/\1
  upload: static/(.*)
  expiration: "7d 0h" 
```

还有人看到这个吗？我错过了什么吗？我的印象是 static_dir 和 static_files 如果像上面那样写是等价的。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-04T17:02:22.783

我意识到您的问题是不久前提出的，但我在搜索类似问题时遇到了它，并认为我会为了他人的利益而回答它。

您已正确指定静态文件处理程序。缓存问题可能是由于您在浏览器中以管理员身份登录（登录到 appengine.google.com）。在没有以管理员身份登录的情况下运行您的应用程序，应该会显示缓存按预期工作。这是[“问题”](https://code.google.com/p/googleappengine/issues/detail?id=8509)的链接。

# arrays - 在 MATLAB 中从数组中选择元素

> ID：13023997
> 
> 赞同：4
> 
> 时间：2012-10-23T05:17:47.637
> 
> 标签：arrays, matlab, indexing

我知道在 MATLAB 中，在一维情况下，您可以选择具有索引的元素，例如`a([1 5 3])`, 以返回 a 的第一个、第五个和第三个元素。我有一个二维数组，想根据我拥有的一组元组选择单个元素。所以我可能想得到`a(1,3), a(1,4), a(2,5)`等等。目前我拥有的最好的是`diag(a(tuples(:,1), tuples(:,2))`，但是对于较大的 a 和/或元组，这需要大量的内存。我是否必须将这些元组转换为线性索引，或者是否有一种更简洁的方法可以在不占用太多内存的情况下完成我想要的操作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T05:25:00.987

转换为线性索引似乎是一种合法的方式：

```
indices = tuples(:, 1) + size(a,1)*(tuples(:,2)-1);
selection = a(indices); 
```

请注意，这也在 Matlab 内置解决方案中实现`sub2ind`，如 nate'2 答案：

```
a(sub2ind(size(a), tuples(:,1),tuples(:,2))) 
```

然而，

```
a = rand(50);
tuples = [1,1; 1,4; 2,5];

start = tic;
for ii = 1:1e4
    indices = tuples(:,1) + size(a,1)*(tuples(:,2)-1); end
time1 = toc(start);

start = tic;
for ii = 1:1e4
    sub2ind(size(a),tuples(:,1),tuples(:,2)); end
time2 = toc(start);

round(time2/time1) 
```

这使

```
ans =   
    38 
```

所以虽然`sub2ind`在眼睛上更容易，但它也*慢*了约 40 倍。如果您必须经常进行此操作，请选择上述方法。否则，用于`sub2ind`提高可读性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T05:35:39.230

如果 x 和 y 是矩阵 a 的 xy 值的向量，那么 sub2und 应该可以解决您的问题：

```
a(sub2ind(size(a),x,y)) 
```

例如

> a=魔法(3)
> 
> 一个=
> 
> ```
>  8     1     6
>  3     5     7
>  4     9     2 
> ```

```
x = [3 1];
y = [1 2];

a(sub2ind(size(a),x,y))

ans =

 4     1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T05:38:24.930

您可以使用 1D 数字引用 2D matlab 位置，如下所示：

```
a = [3 4 5;
     6 7 8;
     9 10 11;];
a(1) = 3;
a(2) = 6;
a(6) = 10; 
```

因此，如果您可以像这样获得矩阵中的位置：

```
a([(col1-1)*(rowMax)+row1, (col2-1)*(rowMax)+row2, (col3-1)*(rowMax)+row3]) 
```

注意：在这种情况下，rowmax 为 3

将为您提供 col1/row1 col2/row2 和 col3/row3 的元素列表。

因此，如果

```
row1 = col1 = 1
row2 = col2 = 2
row3 = col3 = 3 
```

你会得到：

```
[3, 7, 11] 
```

背部。

# ruby - 在另一个类中使用 ActiveRecord

> ID：13023998
> 
> 赞同：1
> 
> 时间：2012-10-23T05:17:49.867
> 
> 标签：ruby, activerecord, cinch

我正在尝试在后端使用 ActiveRecord 设置一个 IRC 机器人来处理所有繁重的数据（可能是矫枉过正，但这部分是我的学习经验：3）

我遇到的问题是，在定义我的数据库模式之后，稍后在同一个脚本中，当我尝试引用我创建的表时，我从 SQLite gem 收到一个错误，说它找不到表。

此外，我的 IDE（RubyMine）抱怨它“无法找到 :notes 关联字段的 rails 模型”

有些东西告诉我，如果我不被限制为机器人框架的一类，这将不会发生，但这只是一个疯狂的猜测。

我在这里做错了什么？

```
require 'cinch'
  require 'active_record'
  puts 'Memobox loaded'
  class Memobox
    include Cinch::Plugin
    ActiveRecord::Base.establish_connection(
        :adapter => 'sqlite3',
        :database => ':memory:'
    )
    ActiveRecord::Schema.define do
      create_table :notes do |table|
        table.column :id, :integer
        table.column :timeset, :DateTime
        table.column :sender, :string
        table.column :recipient, :string
        table.column :text, :string
      end
    end

  class Note < ActiveRecord::Base
     has_many :notes
  end

   match(/note.*/, :prefix => "?")
   def execute(m)
    Memobox::Note.create(
        :timeset => (Time.new).ctime,
        :sender  => m.user.nick,
        :text => m.message,
        :recipient => (m.message).split("_").at(1)
        )

   end
  end 
```

错误：

```
 C:/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.8/lib/active_record/connection_adapters/sqlite_adapter.rb:472:in `table_structure': Could not find table 'notes' (ActiveRecord::StatementInvalid) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T07:42:24.430

你应该替换这个

```
class Note < ActiveRecord::Base
  has_many :notes
end 
```

和

```
class Note < ActiveRecord::Base
end 
```

ActiveRecord::Base 类的后代表示表中的单行，而不是整个表。因此，要通过 id 查找一些便笺，您只需调用`Note.find(123)`，其中 123 是 db 表中便笺记录的 id。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T19:29:35.453

感谢大家对 has_many 的使用和语法的澄清，但我的问题最终是使用内存表而不是磁盘表。一旦我改变第七行说

```
:database => 'notes.db' 
```

代替

```
:database => ':memory:' 
```

并从 Notes 类中删除了 has_many 声明（我确实尝试过但没有这样做，但得到了一个不同的错误），一切正常 :)