# StackOverflow 问答 14679000-14679999

# python - (Python) 解析文件以避免性能问题的最佳方法

> ID：14679000
> 
> 赞同：4
> 
> 时间：2013-02-04T00:31:41.233
> 
> 标签：python

我有点担心哪种方式最适合处理包含必须隔离的信息的文件。

例如，想象一个日志文件，其中的数据分为块，每个块都有一个子块列表。

日志文件示例：

```
data
data
data
data 
   block 1 start
    -sub block 1 start
    --data x
    --data y
    -sub block 1 end
    -sub block 2 start
    --data x
    --data marked as good
    --data z
    -sub block 2 end
    block 1 end
    block 1 summary

    block 2 start
    -sub block 1 start
    .....
    -sub block 1 end
    ....
data
data
data 
```

我正在寻找一种有效的方法来解析更大的文件（这是各种 mb 的文本），隔离块，然后在每个块中检查子块中的特定行。如果该行在子块中，我将保存子块所在的块开始和结束行，以及该行所在的子块（但会丢弃其他没有数据的子块）。直到我到达文件的末尾。

结果应如下所示的示例：

```
block 1 start
-sub block 2 start
--data marked as good
-sub block 2 end
block 1 summary
..... 
```

现在我正在使用这种方法：我打开文件，然后将文件分成较小的子集以使用；我有 3 个收集信息的列表。

第一个列表，称为 List_general，将包含整个日志文件中的解析结果，减去与我需要隔离的块无关的内容。基本上在这一步之后，我将只有上面示例中的块，减去“数据”行。当我这样做时，我会检查“好数据”字符串，所以如果我看到该字符串至少一次，这意味着我需要处理和保存数据，否则我就结束函数。

如果有数据需要处理，我会在list_general中逐行进行，并开始隔离每个块和子块。从第一个块开始（如果您查看示例，那么从块 1 开始到块 1 的摘要）。

一旦我到达一个块的末尾（块 1 摘要）；如果有数据标记为好，我会开始解析它，遍历每个子块，找出哪个数据好。

我将逐行复制每个子块，就像我对块所做的那样（基本上开始从“子块1开始”到“子块1结束”逐行复制）并检查好数据是否在那个子堵塞。如果是，我会将列表内容复制到最终列表，否则我将删除列表并从下一个子块开始。

我知道这种解析每个部分的机制非常繁琐且资源昂贵；所以我想知道是否有“更好”的方法来做到这一点。我对 python 很陌生，所以我不确定如何处理类似问题的方法。希望这里有人有类似的问题，所以可以建议我面对这个问题的最佳方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T01:02:00.793

对于日志文件，我会在解析文件时丢弃我不关心的行，在 sqlite 中填充任何有用的内容（检查模块 sqlite3）。然后在我完成文件解析后进行报告/处理。

Sqlite 可以配置为使用磁盘或内存作为存储——因此您可以根据需要进行选择。

我喜欢这种方法，因为它很灵活，我不需要解析任何东西两次。

补充：类似的东西？

```
class Parser:
    def __init__(self, logfile):
        self.log = open(logfile)
        self.logentry = []
    def next(self):
        found = False
        for line in self.log:
            self.logentry.append(line)            
            if <block ends>:
                e = '\n'.join(self.logentry)
                self.logentry = []
                yield e 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T01:09:50.373

如果您可以使用 和 标识块或子块边界`block ... start`，`block ... end`则可以在读取结果时处理每个块并将结果存储在任何需要的地方。

# html - 如何利用 XML 注释进行 XSLT 转换？

> ID：14679004
> 
> 赞同：0
> 
> 时间：2013-02-04T00:32:55.207
> 
> 标签：html, xml, xslt, html-lists

什么 XSLT 会将下面的 XML 模式转换为下面的 HTML 输出？

```
<ELEMENT1>
  <!--
  Comment for element 2
  -->
  <ELEMENT2>
    <ELEMENT3>ABC</ELEMENT3>
  </ELEMENT2>
  <!--
  Comment for element 4
  -->
  <ELEMENT4>
    <ELEMENT5>0534564117</ELEMENT5>
    <!--
        Comment for element 6
    -->   
    <ELEMENT6>123456</ELEMENT6>
  </ELEMENT4>
</ELEMENT1> 
```

**输出：**

> *   元素1
> 
> *   *对元素 2 的评论*
> *   元素2
> 
> *   元素3
> 
> *   *对元素 4 的评论*
> *   元素4
> 
> *   元素5
> *   *对元素 6 的评论*
> *   元素6

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T00:53:17.137

您将需要一个包含三个模板的样式表。一个模板匹配文档根并发出外部 HTML 结构，并像往常一样在所有子节点上重复出现。它将所有其他内容包装在 HTML 无序列表中。

```
<xsl:template match="/">
  <html>
    <head><title>Demo document</title></head>
    <body>
      <ul>
        <xsl:apply-templates/>
      </ul>
    </body>
  </html>
</xsl:template> 
```

一个模板通过发出包含元素类型名称的列表项来处理元素。如果元素有子元素，它会在它们上递归，将它们的输出包装在嵌套`ul`元素中。

```
<xsl:template match="*">
  <li>
    <xsl:value-of select="name()"/>
    <xsl:if test="node()">
      <ul>
        <xsl:apply-templates select="node()"/>
      </ul>
    </xsl:if>
  </li>
</xsl:template> 
```

如果您不介意发出一个空`ul`元素（大多数浏览器并不特别关心），您可以不`xsl:if`使用嵌套的`ul`.

第三个模板匹配注释并为它们发出列表项，将注释的内容包装在一个`i`元素中。

```
<xsl:template match="comment()">
  <li><i><xsl:value-of select="."/></i></li>
</xsl:template> 
```

如果文本节点的默认模板不可接受，您可能还需要一个模板来处理文本节点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T08:57:58.123

您可能正在寻找的是 xsl:comment 指令，它会在输出中创建注释。

# python - 从单个文件中的一堆 python 函数中捕获日志信息

> ID：14679012
> 
> 赞同：0
> 
> 时间：2013-02-04T00:34:19.413
> 
> 标签：python, python-2.7

我有 3 个脚本。一个是`starttest.py`执行 in 中调用的方法`test.py`。方法定义在`module.py`.

每个文件中有许多打印语句，我想从`Starttest.py`文件本身捕获日志文件中的每个打印语句。我尝试`sys.stdout`在`starttest.py`文件中使用，但这个函数只从`starttest.py`文件中获取打印语句。它没有任何控制`test.py`和`module.py`文件打印语句。

有什么建议可以仅在一个地方从所有文件中捕获打印语句吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T01:09:56.830

`test.py`在从or导入任何内容之前`module.py`，将 tye`sys.stdout`文件对象替换为您喜欢的对象之一：

```
import sys

sys.stdout = open("test-output.txt", "wt")

# Import the rest 
```

如果您在类 Unix 操作系统上运行，则有一种更安全的方法，不需要替换文件对象引用。特别是因为覆盖`sys.stdout`并不能保证先前的对象被销毁：

```
import os
import sys

fd = os.open("test-output.txt", os.O_WRONLY | os.O_CREAT, 0644)
os.dup2(fd, sys.stdout.fileno())
os.close(fd) 
```

请注意，几乎所有 Python 的守护进程实现都使用上述*技巧*。

即使没有直接关系，也请记住，您可以使用 shell 将命令输出重定向到文件（也适用于 Windows）：

```
python starttest.py >test-output.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T01:08:43.083

也许看看python自带的日志模块

# html - ASP Classic 代码返回 true 而不是 response.write 结果

> ID：14679013
> 
> 赞同：0
> 
> 时间：2013-02-04T00:34:31.833
> 
> 标签：html, asp-classic

我有一段 ASP Classic 代码，它不是响应写入我的信息，而是返回“true”

这是相关的行：

```
response.write "<a href='search.htm?supplier_name= & request.querystring('supplier_name') & "&aircraft_type=" & request.querystring('aircraft_type') & "&state=" & request.querystring('state') & "&order=state'>State</a>" 
```

我相信这个问题与本节有关：

```
& "&order=state'>State</a>" 
```

完整的 ASP 代码：

```
<%
if request.querystring("order") = "state" then 
response.write("State")
else
response.write "<a href='search.htm?supplier_name= & request.querystring('supplier_name') & "&aircraft_type=" & request.querystring('aircraft_type') & "&state=" & request.querystring('state') & "&order=state'>State</a>"
end if
%> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T00:37:32.423

后缺少双引号`supplier_name=`：

```
response.write "<a href='search.htm?supplier_name=" & request.querystring('supplier_name') & "&aircraft_type=" & request.querystring('aircraft_type') & "&state=" & request.querystring('state') & "&order=state'>State</a>" 
```

# loops - 想知道如何让一段代码等待其他事情完成

> ID：14679015
> 
> 赞同：0
> 
> 时间：2013-02-04T00:34:47.963
> 
> 标签：loops, wait, execution, performselector

另一个快速的：

如果我执行这样的操作：

```
runningAnimation = YES;
[self performSelector:@selector(animationsComplete) withObject:nil afterDelay:0.1[;

// Return to main function
-(void) mainFunction
{
while (runningAnimation)
{
continue;
}
}

// And, animationsComplete looks like this:
-(void) animationsComplete
{
runningAnimation = NO;
} 
```

该程序似乎永远不会退出 while 循环。谁能告诉我这是为什么？

另一方面，如果这种类型的“在我的代码中等待某事完成执行”在我试图做的意义上真的无法正常工作，那么还有另一种方法可以做同样的事情吗？在等待调用的同时暂停一个函数

```
[self performSelector:withObject:afterDelay:] 
```

去完成？抱歉，这似乎是一个业余问题。我是业余爱好者。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T00:43:40.527

那是因为你的“ `performSelector:`”发生在你当前的（主）线程上。

`NSLog( @"in main function");`如果您在该“ ”循环中添加类似“”的行`while`，则一旦您的 performSelector 启动，它应该停止。

您需要在另一个（分离的）线程上执行 performSelector，或使用块。[某些块可以](https://stackoverflow.com/questions/12357904/what-is-the-bool-stop-argument-for-enumerateobjectsusingblock-used-for)在其参数中使用“停止”布尔值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T00:46:38.427

```
WHILE (ANIMATIONCOMPLETE != 1) {
... Do work ...
... When work is done, like using if code... ...
IF (SomeBoolean // That means work done == (0 for false, continue, 1 for true, break)) {
BREAK;
}
ELSE {
CONTINUE
}
} 
```

# django - Django 测试使用 SQLite 而不是 MySQL

> ID：14679019
> 
> 赞同：1
> 
> 时间：2013-02-04T00:36:33.233
> 
> 标签：django, unit-testing

我为我的 Django 应用程序编写的测试在我使用 SQLite 的初始开发过程中运行良好。现在我准备好部署我已经设置了一个 MySQL 服务器（因为这就是我将要部署的）但是现在我的一些测试失败了。

最后，当我手动测试功能时，失败的测试不会失败。

会发生什么？

我没有做任何不寻常的事情，所有的视图都会做一些数据库恶作剧并返回响应。没有任何与时间相关的东西（没有线程或任何东西）。

这些测试都继承自 django.test.TestCase 并且我没有使用任何固定装置。

这是一个失败的测试示例。

```
class BaseTest(TestCase):
    def setUp(self):
        super(BaseTest, self).setUp()

        self.userCreds = dict(username='test', password='a')

        # Create an admin user
        admin = models.User.objects.create_superuser(
            email='', username='admin', password='a')

        # Create a user and grant them a licence
        user = models.User.objects.create_user(
            email='some@address.com', first_name="Mister",
            last_name="Testy", **self.userCreds)

        profile = models.getProfileFor(user)
        node = profile.createNode(
            '12345', 'acomputer', 'auser',
            'user@email.com', '0456 987 123')

        self.node = node

class TestClientUIViews(BaseTest):
    def test_toggleActive(self):
        url = reverse('toggleActive') + '?nodeId=%s' % self.node.nodeId

        self.assertFalse(self.node.active)

        # This should fail because only authenticated users can toggle a node active
        resp = self.client.get(url)
        self.assertEqual(resp.status_code, 403)
        self.assertFalse(self.node.active)

        # Login and make sure visiting the url toggles the active state
        self.client.login(**self.userCreds)
        resp = self.client.get(url)
        self.assertEqual(resp.status_code, 200)
        self.assertTrue(self.node.active)

        resp = self.client.get(url)
        self.assertEqual(resp.status_code, 200)
        self.assertFalse(self.node.active) 
```

这是模型的样子：

```
class Node(models.Model):
    @property
    def active(self):
        '''
        Activation state gets explictly tracked in its own table but is
        exposed as a property for the sake of convenience
        '''
        activations = NodeActivation.objects \
            .filter(node=self) \
            .order_by('-datetime')

        try:
            return activations[0].active
        except IndexError:
            return False

    @active.setter
    def active(self, state):
        if self.active != state:
            NodeActivation.objects.create(node=self, active=state)

class NodeActivation(models.Model):
    node = models.ForeignKey("Node")
    datetime = models.DateTimeField(default=datetimeM.datetime.now)
    active = models.BooleanField(default=False) 
```

我的本地 MySQL 是 5.5.19（所以它使用 InnoDB），但我在使用 5.1.56 的部署服务器上遇到了同样的故障。无论存储引擎如何，测试都会失败。

正如我在开头提到的，如果我切换回使用 SQLite 数据库，所有测试都会返回通过。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T06:14:04.593

现在揭示了更多实际代码，我将提供以下假设来说明此测试失败的原因。

`NodeActivation`模型不正确。该`datetime`字段应为：

```
datetime = models.DateTimeField(auto_now=True) 
```

在模型定义中使用`datetime.datetime.now()`只会被评估一次。

每次设置者创建新`NodeActivation`记录时，都会使用相同的日期/时间创建记录。即`NodeActivation`模型首次评估的日期/时间。

你的 getter 只返回一个结果。但由于两个激活记录具有相同的日期/时间，因此排序可能取决于数据库后端。测试结束时，您的数据库中将有两条`NodeActivation`记录，返回的一条是不确定的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T07:14:34.857

通过将 Node 模型类的 active 属性更改为：

```
@property
def active(self):
    '''
    Activation state gets explictly tracked in its own table but is
    exposed as a property for the sake of convenience
    '''
    activations = NodeActivation.objects \
        .filter(node=self) \
        .order_by('-id')

    try:
        return activations[0].active
    except IndexError:
        return False 
```

问题消失了。

注意`order_by`呼叫的变化。

记录的创建速度如此之快，以至于按日期时间排序不是确定性的，因此行为不稳定。而且我猜 SQLite 只是比 MySQL 慢，这就是为什么将它用作后备数据库时它不是问题的原因。

注意：感谢[Austin Phillips](https://stackoverflow.com/users/302243/austin-phillips)的提示（查看他的回答中的评论）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-15T22:29:29.243

我有一个类似的问题（不确定是否相同），使用设置方法从 SQLite 到 PostgreSQL，就像你对初始数据库对象使用的那样。

例子：：

```
def setUp(self):
   user = User.objects.create_user(username='john', password='abbeyRd', email='john@thebeatles.com')
   user.save() 
```

我发现这在 SQLite 上可以正常工作，但是在 PostgreSQL 上我遇到了数据库连接失败（它仍然会像你说的那样构建数据库，但是如果没有连接错误就无法运行测试）。

事实证明，解决方法是按如下方式运行您的设置方法：

```
@classmethod
def setUpTestData(cls):
    user = User.objects.create_user(username='john', password='abbeyRd', email='john@thebeatles.com')
    user.save() 
```

我不记得为什么这个有效而另一个无效的确切原因，但它与与数据库的`setUp(self)`连接`setUpTestData(cls)`有关实例化，但我可能没有完美的细节。我真正知道的是它有效！

希望有所帮助，不确定它是否解决了您的确切问题，但我花了好几个小时才弄清楚，所以我希望它对您和将来的其他人有所帮助！

# c - 从整数纪元时间值转换为本地时间

> ID：14679022
> 
> 赞同：1
> 
> 时间：2013-02-04T00:36:58.927
> 
> 标签：c, time, epoch

我一直坚持将整数纪元时间值转换为本地时间。

我目前有自纪元以来的时间存储在一个整数变量中，我需要一种方法将其转换为本地时间。

我已经尝试将它传递到本地时间，但它似乎不起作用。

如果我简单地打电话，我可以让本地时间工作

```
 time_t rawtime;
  struct tm * timeinfo;

  time ( &rawtime );
  timeinfo = localtime ( &rawtime ); 
```

并直接获取原始时间，但如果我想给 localtime() 一个整数值而不是当前时间，我会被卡住。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-04T00:43:10.863

该`localtime()`函数需要一个指针，因此您必须在调用之前`const time_t`首先将整数时期值转换为 a 。`time_t``localtime`

```
int epoch_time = SOME_VALUE;
struct tm * timeinfo;

/* Conversion to time_t as localtime() expects a time_t* */
time_t epoch_time_as_time_t = epoch_time;

/* Call to localtime() now operates on time_t */
timeinfo = localtime(&epoch_time_as_time_t); 
```

# c# - 为博客保存样式

> ID：14679023
> 
> 赞同：1
> 
> 时间：2013-02-04T00:37:03.130
> 
> 标签：c#, asp.net-mvc, entity-framework

我正在创建一个博客，我想知道如何允许管理员用户在他们的帖子中添加样式。例如，如果他们想在段落中加粗一些单词或在段落中间添加图像。

我正在使用 MVC 4 和实体框架。计划是有一个文本区域供用户创建帖子并保存到数据库。并且还允许用户对文本进行基本格式化。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T00:39:17.460

您将希望实现一个（可能是 jQuery？）HTML WYSIWYG 编辑器，例如[Redactor](http://imperavi.com/redactor/) 。有许多 WYSIWYG 插件可配置并与您的 textarea 挂钩。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T08:29:31.497

首先尝试制作一个可以将文本保存在数据库中的简单文本区域，然后您可以更改该文本区域并使用一些插件，如 **ckeditor**（*参考：[http](http://drupal.org/project/ckeditor) : //drupal.org/project/ckeditor，http [:// drupal.org/project/ckeditor](http://drupal.org/project/ckeditor)*），您可能还想使用我现在也在使用的**nicEdit （** *[http://nicedit.com/](http://nicedit.com/)*），或者您可能想使用**WYSIWYM Markdown Editor[wmd]**（*[https： //github.com/derobins/wmd](https://github.com/derobins/wmd) , [http://code.google.com/p/wmd/](http://code.google.com/p/wmd/)*）喜欢这个堆栈溢出..还有另一个**富文本编辑器[RTE]**（*演示在这里：[http：/ /www.kevinroth.com/rte/demo.htm](http://www.kevinroth.com/rte/demo.htm)*，主站点在这里：[http](http://www.kevinroth.com/rte/) ://www.kevinroth.com/rte/ ）

# opengl - Cygwin：在带有 OpenGL/GLEW 库的 X11 xterm 中无法运行/出错

> ID：14679026
> 
> 赞同：0
> 
> 时间：2013-02-04T00:37:30.597
> 
> 标签：opengl, cygwin, x11, glew, freeglut

我正在使用 Cygwin 上的 X11 opengl 并尝试使用 glew 库运行一些测试。

尝试从[这里编译“Chapter2.4.c”示例](http://openglbook-samples.googlecode.com/svn/trunk/Chapter%202/)

它编译没有错误。但是当尝试在 xterm 从 x11 (startxwin) 运行时，我收到以下错误：

```
X Error of failed request:  GLXBadFBConfig
Major opcode of failed request:  148 (GLX)
Minor opcode of failed request:  34 ()
Serial number of failed request:  21
Current serial number in output stream:  20 
```

知道为什么会这样吗？可能与[此处](https://stackoverflow.com/questions/7052624/glcreateshader-returns-0-need-help-debugging)建议的库/标题中的 nvidia/x11 不匹配有关吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T01:09:51.997

> GLXBadFBConfig

Cygwin 的 X11 服务器不支持选择扩展窗口 FBConfigs 所需的功能，而这正是该消息告诉您的内容。如果您在 Windows 上运行，最好的做法是在本地使用 OpenGL。

# python - Python 中按位运算符的风格

> ID：14679032
> 
> 赞同：3
> 
> 时间：2013-02-04T00:38:30.360
> 
> 标签：python, pep

我在 PEP 中找不到有关按位运算符（|、&）样式的信息，尤其是在这段代码中：

```
class MySplashScreen(wx.SplashScreen):
    def __init__(self, parent=None):
        wx.SplashScreen.__init__(self, logo.getBitmap(), wx.SPLASH_CENTRE_ON_SCREEN | wx.SPLASH_TIMEOUT, 2000, parent) 
```

在这种情况下我应该使用空格（**wx.SPLASH_CENTRE_ON_SCREEN | wx.SPLASH_TIMEOUT**）吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T00:39:40.540

我肯定会在两边使用空格。否则，很难发现`|`变量/常量名称之间的区别。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T00:48:00.360

如果存在的话，可以在 PEP 8[中的表达式中找到空格](http://www.python.org/dev/peps/pep-0008/#whitespace-in-expressions-and-statements)。但是，没有提到这些运算符：

> 始终在这些二元运算符两边加上一个空格：赋值 (=)、扩充赋值（+=、-= 等）、比较（==、<、>、!=、<>、<=、>= , in, not in, is, is not), 布尔值 (and, or, not)。

我认为这是有充分理由的。虽然您几乎可以肯定想要其中的空间`wx.SPLASH_CENTRE_ON_SCREEN | wx.SPLASH_TIMEOUT`，但我不确定您是否想要它`a|b`。事实上，like 的表达方式`a&b | c&d`似乎与推荐的`x*x + y*y`.

您在此处需要它的原因与操作符无关`|`，而是与值有关`wx.SPLASH_CENTRE_ON_SCREEN`。事实上，我认为你会做出同样的决定`BIG_LONG_CONSTANT_1 + BIG_LONG_CONSTANT_2`。因此，当操作数是丑陋的大写常量时，样式指南中可能应该有一条关于运算符周围空格的附加规则。

但与此同时，我认为没有或不需要关于按位运算符的特定规则。以与算术运算符相同的方式对待它们。（请注意，除了在同一表达式中使用具有不同优先级的运算符的情况外，是否在周围放置空格没有特定规则`+`。事实上，您可以在 PEP8 本身中看到这两种方式。那意味着它在一般情况下都是可以接受的，您必须在特定情况下使用自己的判断。）

综上所述，样式检查器[`pep8`](http://pypi.python.org/pypi/pep8)使用 E225 标记不带空格的位和算术运算符。它甚至用可选的 E226 警告标记“不同优先级”的示例，例如`x = x/2 - 1`（PEP 8 将其列为“好”）。详情请参阅[`missing_whitespace_around_operator`](https://github.com/jcrocholl/pep8/blob/master/pep8.py#L614)。我不认为这算作任何形式的官方认可——但我认为“我把空格放在这里是为了让代码通过我们选择用于这个项目的样式检查器”是一个非常正当的理由。（但您可能想要检查替代方案，例如`pep8ify`, 并查看`pylint`,`pyflakes`等是否有关于该主题的内容。）

# java - c:url 标签包含 jsession id 查询字符串

> ID：14679033
> 
> 赞同：1
> 
> 时间：2013-02-04T00:38:42.283
> 
> 标签：java, jsp, jstl, contextpath

在 jsp 页面上获取上下文根的最佳方法是什么。如果我将我的 css/image 硬编码为“/myapp/images/foo.gif”，那么如果上下文根/应用程序名称发生更改，它将是一个断开的链接。使用相对路径并不总是可取的，因为上下文根可以是多路径（例如：/mysite/myapp）

到目前为止，我已经尝试使用`<c:url var="root" value="/"/>`which 可以正常工作（`${root}`将给出 context-root `/myapp/`），但是如果这是用户第一次访问该站点（或者如果在浏览器上清除了 cookie），则分配给的值`${root}`类似于`/myapp/;jsessionid=019762g1hk3781kh98uihilho`它破坏了图像/css 参考。还有比这更好的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T00:44:07.780

> *到目前为止，我已经尝试过使用`<c:url var="root" value="/"/>`which 可以正常工作（${root} 将提供上下文根 /myapp/）*

这不是正确的方法。应该*单独*`<c:url>`应用于每个URL **。**

 ***你最好用

```
<c:set var="root" value="${pageContext.request.contextPath}" /> 
```

### 也可以看看：

*   [调用转发到 JSP 的 Servlet 时，浏览器无法访问/查找相关资源，如 CSS、图像和链接](https://stackoverflow.com/questions/3655316/browser-cant-access-find-relative-resources-like-css-images-and-links-when-cal/3658735#3658735)***

# c++ - 方法问题：删除数组中的重复字符

> ID：14679034
> 
> 赞同：1
> 
> 时间：2013-02-04T00:38:43.530
> 
> 标签：c++, arrays, char, duplicates

所以我试图删除部分填充数组中的重复字符。该阵列是从位于我的 PC 上的文件中填充的。我的数组填充方法运行良好；但是，我的重复删除方法不是。这是我的方法：

```
 void deleteRepeated(char array[], int* numberUsed)
{
    for (int x = 0; x < *numberUsed ; x++) 
    {
        cout << "Positions used: " << *numberUsed << endl;
        for (int y = x+1; y < *numberUsed; y++ )
        {
            cout << "Positions used: " << *numberUsed << endl;
            if (array[y] == array[x])
            {
                cout << "Positions used: " << *numberUsed << endl;
                for (int z = y; z < *numberUsed; z++)
                    array[z] = array[z+1];
                y--; 
                *numberUsed--;
                cout << "Positions used: " << *numberUsed << endl;
            }
        }
    }
} 
```

我正在传递整个数组，以及该数组中使用的索引数。数组长度为 10，我的测试中，我使用了 10 个字符中的 6 个字符：{'g'、'g'、'n'、'o'、'r'、'e'}。我究竟做错了什么？

注意： "cout << "Positions used: " << *numberUsed << endl" 用于检查方法是否正确删除。在索引为 z 的最内层循环中，该方法开始变得疯狂。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T01:16:30.450

每次找到 dup 时，都会减少使用的字符数

```
*numberUsed--; 
```

但请记住这个控制第一个循环索引

```
for (int x = 0; x < *numberUsed ; x++) 
```

所以试试这个

```
int count =*numberUsed;
for (int x = 0; x < count ; x++) 
```

这样您就可以访问数组中的所有原始字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T01:39:27.813

（在阅读您关于不允许使用 STL 的评论之前，我写了此答案的第一部分，但无论如何我都会留下它，因为我认为这是相当简洁的代码。）

您可以使用 C++ 标准库为您提供的功能。使用`std::string`而不是 char 数组（这几乎总是一个好主意），然后您可以执行以下操作（注意：C++11 仅因为`unordered_set`and `std::begin`）：

```
#include <string>
#include <unordered_set>
#include <iostream>
#include <iterator>

std::string uniquechars(const std::string& s) {
    std::unordered_set<char> uniquechars(std::begin(s), std::end(s));
    std::string newstring(std::begin(uniquechars), std::end(uniquechars));
    return newstring;
}

int main() {
    std::string teststr("thisisanexamplesentence");
    std::cout << "The unique characters of " << teststr << " are " << uniquechars(teststr) << std::endl;
} 
```

请注意，它不会保留字符的原始顺序，因此如果需要，这不起作用。

* * *

如果你必须在没有标准库的情况下工作，你必须更深入地挖掘。上面的@TimChild 已经很好地开始诊断您的程序出了什么问题，但是还有更有效的解决方案，例如记录您已经看到的字符。当您使用`char`s 时，我会考虑一个可以保存标记的位字段（256/8=32 字节的额外开销），或者如果不是太多，只是一个普通的布尔数组（额外开销 256 字节）。因为后者更容易实现并且代码更清晰：

```
void deleteRepeated(char array[], int *numused) {
    bool seenthischar[256] = {false};
    char *readpointer = &array[0];
    char *writepointer = &array[0];
    int length = *numused;
    for ( ;readpointer <= &array[0] + length; readpointer++) {
      if (seenthischar[((unsigned char) *readpointer)]) {
        *numused--;
      } else {
        seenthischar[((unsigned char) *readpointer)] = true;
        *writepointer = *readpointer;
        writepointer++;
      }
    }
} 
```

这只有一个循环，所以它只需要遍历数组一次，即它的时间复杂度与输入数组的长度成线性关系。

# java - 多对多where子句

> ID：14679039
> 
> 赞同：1
> 
> 时间：2013-02-04T00:40:07.457
> 
> 标签：java, hibernate

给定3张桌子：

```
student (id)
student_to_class (student_id, class_id)
class (id) 
```

我想在 student_to_class 上应用 where 子句，其中 student_id = :studentId。我发现许多示例适用于“班级”表或“学生”表上的 where 子句，但不适用于多对多表。

学生表有一个@ManyToMany

```
@ManyToMany(fetch = FetchType.LAZY)
    @JoinTable(
    name = "student_to_class",
    joinColumns = { @JoinColumn(name = "student_id", nullable = false) },
    inverseJoinColumns = { @JoinColumn(name = "class_id", nullable = false) }
)
private Set<ClassEntity> classes; 
```

类表有一个@ManyToMany

```
@ManyToMany(fetch = FetchType.LAZY)
    @JoinTable(
    name = "student_to_class",
    joinColumns = { @JoinColumn(name = "class_id", nullable = false) },
    inverseJoinColumns = { @JoinColumn(name = "student_id", nullable = false) }
)
private Set<StudentEntity> students; 
```

这是我试图翻译成标准的查询：

```
select * from student, student_to_class where student_to_class.student_id = 1 and student.id = student_to_class.class_id 
```

我试图弄清楚如何引用多对多表，因为我没有代表该表的实际类。

```
Criteria c = sessionFactory.getCurrentSession().createCriteria(ClassEntity.class);
c.createAlias("student_to_class", "entities"); // how to reference the student_to_class ?
c.add(Restrictions.eq("entities.user_id", studentEntity.getId())); 
```

但是我收到了一个错误，这对我来说很有意义，但是我没有太多的运气来修复它：无法解析属性：student_to_class

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T01:03:15.143

由于Student 表中的`studentid`与表中的 相同，因此无需按连接表进行过滤。只需运行 where 子句反对`studentid``student_to_class``student.student_id`

# google-maps - 脚本谷歌地图差异

> ID：14679042
> 
> 赞同：-1
> 
> 时间：2013-02-04T00:40:52.877
> 
> 标签：google-maps, google-maps-api-3

放谷歌地图的脚本有什么区别

这种方式

```
<script src="https://maps.googleapis.com/maps/api/js?key=&sensor=true"></script> 
```

并使用我的谷歌 API 密钥

```
<script src="https://maps.googleapis.com/maps/api/js?key=DIzaSyDrNBNwe3GPemgne7rE54wAa5ndZOt26Hw&sensor=true"></script> 
```

我尝试了两种方法并且它有效，但我想知道，有什么区别？是一样的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T00:53:27.083

[来自谷歌文档](https://developers.google.com/maps/documentation/javascript/tutorial)

> Google Maps API for Business 开发人员不得在其请求中包含密钥。请参阅加载 Google Maps JavaScript API for Business 特定说明。

在这种情况下，如果您想收集使用统计信息等，您只需要一个密钥。在第 2 版中是必需的，但由于 Google 地图第 3 版不需要 API 密钥，但建议这样做。

[还要检查这个](http://googlegeodevelopers.blogspot.com/2010/03/introducing-new-google-geocoding-web.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T01:13:15.113

Google Maps API V3 不需要 API 密钥。所以你可以走了。

自从我回答这个问题以来，Google 在 v3 中发布了对 API 密钥的支持，让您可以在 Google 的开发者控制台中查看您的 API 站点的使用情况。最初的答案仍然是准确的：API 密钥不是必需的，但现在建议使用它们。

# matlab - mm/dd hh:mm:ss 浮动

> ID：14679043
> 
> 赞同：0
> 
> 时间：2013-02-04T00:40:54.837
> 
> 标签：matlab, time, octave

我有一些要在一组文件中解析的数据。这些文件包含许多数据点的年、月、日、小时、分钟和秒界限。

这是流的示例：

```
> 2010/01/01,00:00:00.979131, 27.4485,  51.9362, 14.8,  6
> 2010/01/01,00:00:01.021977, 27.5149,  51.9375, 16.0,  6
> 2010/01/01,00:00:01.074032, 27.4797,  51.9446, 14.5, 10
> 2010/01/01,00:00:01.663689, 25.8441,-152.8141, 14.6,  6 
```

到目前为止，我可以这样做以获得秒数：

```
raw = textscan(fid, '%d/%d/%d %d:%d:%f %f %f %f %d', 'delimiter', ',');
m = cellfun(@double, raw, 'UniformOutput', false); %convert to doubles
seconds = ((m{:,4} *  3600.0) + (m{:,5} * 60.0) + m{:,6}); 
```

放弃年份，我如何使用我所拥有的，加上一些涉及月份和日期的特殊魔法来创建一个单调递增的数字，将一年中的天数表示为浮点数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T00:58:55.710

使用[`datenum`](http://www.mathworks.com/help/matlab/ref/datenum.html)，例如：

```
 datenum(Y, M, D, H, MN, S) 
```

返回 Y、M、D、H、MN 和 S（年、月、日、小时、分钟和秒）数组值的对应元素的日期序列号。datenum 在单独的输入中不接受毫秒，而是作为秒 (DateString) 输入的小数部分。输入 Y、M、D、H、MN 和 S 必须是大小相同的双精度数组（或任何可以是标量）。您还可以将输入参数指定为日期向量 [YMDH MN S]。

# groovy - 如何在 Groovy 中将所有映射值乘以一个因子？

> ID：14679046
> 
> 赞同：2
> 
> 时间：2013-02-04T00:42:00.627
> 
> 标签：groovy

例如，如果地图等于：

```
z = ['x':1, 'y':2] 
```

对于 f(2) 我希望它变成：

```
[x':2, 'y':4] 
```

我知道可以使用 .each 循环来完成，问题是是否有更简单的方法。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T03:15:46.690

有一个[`collectEntries`](http://groovy.codehaus.org/groovy-jdk/java/util/Map.html#collectEntries%28groovy.lang.Closure%29)函数，它应用于 a 中的所有键和值`Map`，并返回一个带有更新值的**新函数：** `Map`

```
def z = [x:1, y:2]
z = z.collectEntries{ key, value -> [(key): value*2] }
assert z == [x:2, y:4] 
```

这里有几点注意事项：

*   首先，你不需要在 map 字面量中引用字符串键，含义`['z':1]`与 相同`[z:1]`，但后者更 groovier 和更易读
*   其次，`collectEntries`闭包的返回值必须是一个map，所以要小心那里
*   第三，在map中提供动态键时，需要用括号括起来，所以需要使用`(key)`，而不仅仅是`key`
*   第四，您需要分配方法的结果，它不会就地执行。

* * *

但是，几乎可以肯定，`each()`与单参数闭包一起使用会更干净，如下所示：

```
def z = [x:1, y:2]
z.each{ it.value = it.value*2 }
assert z == [x:2, y:4] 
```

这种方式的问题较少，并且它会就地修改地图，因此您不必重新分配变量。

# javascript - 使用 jquery 定位元素父级

> ID：14679049
> 
> 赞同：1
> 
> 时间：2013-02-04T00:42:34.570
> 
> 标签：javascript, jquery, hide, parent

我有以下列表，我需要能够隐藏所有接受课堂活动时实际关注的内容。

```
 <Ul>
        <Li>something</li>
          <ul>
           <li>Something</>
           <li>Something</>
          </ul>
        <Li>something</li>
        <Li>something</li>
        <Li>
            <Ul>
                <Li class="active">something</li>
                <Li>omething</li>
            </Ul>
        </li>
        <Li>something</li>
    </Ul> 
```

我需要能够在与活动类的底层不相关的所有 li 上使用 .hide()

结果将是

```
<Ul>
  <Li>something</li>
  <Li>something</li>
  <Li>something</li>
    <Li>
        <Ul>
            <Li class="active">something</li>
            <Li>omething</li>
        </Ul>
    </li>
  <Li>something</li>
 </Ul> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T00:49:58.137

您可以[遍历 DOM](http://api.jquery.com/category/traversing/tree-traversal/)找到第一级`li`元素及其兄弟。如果您只有两个级别，则应该可以：

```
$('li.active').parent().closest('li').siblings().children('ul').hide(); 
```

如果你有两个以上的级别，我建议给根`ul`一个类或 ID：

```
$('li.active').closest('#root > li').siblings().children('ul').hide(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T01:54:43.623

`$( 'li:not(.active,.active ~ li,.active li,:has(.active))' ).hide();`

这将选择所有`li`元素，但排除（通过使用`:not()`）：

1.  `.active`— 活动`li`元素本身
2.  `.active ~ li``li`—活动元素的`li`兄弟元素
3.  `.active li``li`—活动元素的`li`后代元素
4.  `has(.active)`—`li`将活动`li`元素作为其后代的元素

[*jsfiddle 演示*](http://jsfiddle.net/wskyq/)

如果您还想继续显示活动`li`元素的兄弟姐妹的后代，请添加`.active ~ li li`到`:not()`选择器：

`$( 'li:not(.active,.active ~ li,.active li,.active ~ li li,:has(.active))' ).hide();`

[*jsfiddle 演示*](http://jsfiddle.net/wskyq/1/)

跟进 OP 对此答案的第一条评论：

`li`只需在初始选择器之前添加一个：

`$( 'li li:not(.active,.active ~ li,.active li,.active ~ li li,:has(.active))' ).hide();`

[*jsfiddle 演示*](http://jsfiddle.net/wskyq/2/)

# php - php + sql 服务器登录和会话

> ID：14679055
> 
> 赞同：4
> 
> 时间：2013-02-04T00:43:42.830
> 
> 标签：php, sql, sql-server-2008

您好，我正在尝试使用 php 创建用于 sql server 的登录和会话脚本，但我无法让它工作，无论我在登录表单中输入什么，只要它验证它可以工作，我就无法弄清楚代码有什么问题，但是，我刚刚开始使用 php 和 sql 服务器，并且还没有获得知识来解决我自己的问题，如果 soeone 可以帮助那将是很好的，如果你知道任何好的教程网站使用 sql server 和 php 的你能否分享一下，因为遗憾的是，没有那么多好的教程网站适合他们。在这个阶段非常欢迎任何帮助。我的主要问题是，它没有检查在 html 表单中发布的信息是否存在于数据库中。（我已经取出了 js 验证，因为它没有接缝必要但有效）

登录.html

```
<form name="log" action="log_action.php" method="post">
Username: <input class="form" type="text" name="uNm"><br />
Password: <input class="form" type="password" name="uPw"><br />
<input name="submit" type="submit" value="Submit">
</form> 
```

log_action.php

```
session_start();
$serverName = "(local)";
$connectionInfo = array("Database"=>"mydatabase","UID"=>"myusername", "PWD"=>"mypassword");
$conn = sqlsrv_connect( $serverName, $connectionInfo);
if( $conn === false){
    echo "Error in connection.\n";
    die( print_r( sqlsrv_errors(), true));
}
$username = $_REQUEST['uNm'];
$password  = $_REQUEST['uPw'];
$tsql = "SELECT * FROM li WHERE uNm='$username' AND uPw='$password'";
$stmt = sqlsrv_query( $conn, $tsql, array(), array( "Scrollable" => SQLSRV_CURSOR_KEYSET ));
if($stmt == true){
    $_SESSION['valid_user'] = true;
    $_SESSION['uNm'] = $username;
    header('Location: index.php');
    die();
}else{
    header('Location: error.html');
    die();
} 
```

索引.php

```
<?php
session_start();
if($_SESSION['valid_user']!=true){
    header('Location: error.html');
    die();
}
?> 
```

谢谢你们可能带来的任何帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T01:04:16.933

问题是您从未真正检查过查询的结果。

```
if($stmt == true){ 
```

只检查查询是否执行没有错误 - 它没有说明查询返回的结果。

因此，您需要使用[sqlsrv_fetch](http://www.php.net/manual/en/function.sqlsrv-fetch.php)函数（或相关函数之一）来实际检查查询的结果。

在您的特定情况下，只需检查结果集是否包含带有[sqlsrv_has_rows](http://www.php.net/manual/en/function.sqlsrv-has-rows.php)的行就足够了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-30T06:19:28.513

对不起，如果它不是你的回答方式，我只是这里的新手，但我想我有一些贡献。看看这段代码是否适合你：

```
<?php

#starts a new session
session_start();

#includes a database connection
include 'connection.php';

#catches user/password submitted by html form
$user = $_POST['user'];
$password = $_POST['password'];

#checks if the html form is filled
if(empty($_POST['user']) || empty($_POST['password'])){
    echo "Fill all the fields!";
}else{

#searches for user and password in the database
$query = "SELECT * FROM [DATABASE_NAME].[dbo].[users] WHERE user='{$user}' AND"
         ."password='{$password}' AND active='1'";
$result = sqlsrv_query($conn, $query);  //$conn is your connection in 'connection.php'

#checks if the search was made
if($result === false){
     die( print_r( sqlsrv_errors(), true));
}

#checks if the search brought some row and if it is one only row
if(sqlsrv_has_rows($result) != 1){
       echo "User/password not found";
}else{

#creates sessions
    while($row = sqlsrv_fetch_array($result)){
       $_SESSION['id'] = $row['id'];
       $_SESSION['name'] = $row['name'];
       $_SESSION['user'] = $row['user'];
       $_SESSION['level'] = $row['level'];
    }
#redirects user
    header("Location: restrict.php");
}
}

?>
```

如果需要，您可以将 sqlsrv_fetch 与 sqlsrv_get_field() 结合使用。某事喜欢：

```
<?php
session_start();

[... CONNECTION ...]

[...  your POST request ...]

[... check your forms ...]

 Here is the past that is kinda particular
 [... YOUR QUERY ...]

$result = sqlsrv_query( $conn, $query);

if(!sqlsrv_fetch($result)){
  die(print_r(sqlsrv_erros()),true);
}else{
  $_SESSION['id'] = sqlsrv_get_field($result, 0);
  [... and so on ...]
}
?>
The sqlsrv_fetch() only holds a row and sqlsrv_get_field reads the content of that row. One grabs the other punches. Once you only is retrieving data from the database if the row that contains user AND password exists, sqlsrv_fetch() will only stay with the row that does have the parameters passed by form, if they exist in the database.
```

不推荐，但是可以使用sqlsrv_num_rows()来查看行数，但是需要给sqlsrv_query设置一些参数： $sqlsrv_query($conn, $stmt, array($params), array("Scrollable " => SQLSRV_CURSOR_KEYSET )) 或类似的东西。

谢谢你给我的机会！！！:D

祝你好运！

# c - C- 在 Windows 中使用 exec()

> ID：14679058
> 
> 赞同：1
> 
> 时间：2013-02-04T00:43:50.303
> 
> 标签：c, windows, cygwin, exec

我已经看到了很多关于 unix 系统的结果。我正在使用 cygwin，所以我正在使用`unistd.h`库。我正在尝试运行此命令，但它没有运行。我在这里能错过什么？

`execl("C:\\WINDOWS\\SYSTEM32\\CMD.EXE", "/c echo foo>C:\\Users\\Sarp\\Desktop\\foo.txt");`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T08:44:49.707

[`execl`函数调用](http://linux.die.net/man/3/execl)不会为您**拆分**参数。这基本上意味着您需要在调用函数时将每个命令行参数分隔为不同的字符串参数。例如：

```
execl("C::\\WINDOWS\\SYSTEM32\\CMD.EXE", "cmd.exe", "/c", 
      "echo", "foo", ">C:\\Users\\Sarp\\Desktop\\foo.txt") 
```

但是，我的印象是输出重定向可能不起作用（取决于 Windows shell 如何解释这些），因此我鼓励您尝试更接近于您的用例[的`system()`功能。](http://linux.die.net/man/3/system)

# c++ - 使用 std::unique 时如何防止悬空指针？

> ID：14679060
> 
> 赞同：2
> 
> 时间：2013-02-04T00:44:08.727
> 
> 标签：c++, algorithm, pointers, unique, containers

如何在调用 std::unique 后删除向量中的指针？

例如：

```
struct Foo
{
    Foo(int bar) : mBar(bar) {}
    ~Foo() { std::cout << "~dtor\n"; }

    int mBar;
};

bool SortFunc(Foo * right, Foo * left) { return right->mBar < left->mBar; }

// Should I 'delete left;' in case of equality?
bool CompareFunc(Foo * right, Foo * left)
{
    return right->mBar == left->mBar;
}

// NOTE: In my code, vector is initialized in another class which I cannot modify.
void InitializeList(std::vector<Foo *> & fooList)
{
    Foo * firstFoo = new Foo(1);
    Foo * secondFoo = new Foo(2);
    // This pointer will not be in vector anymore after std::unique is called!
    Foo * thirdFoo = new Foo(1);
    Foo * forthFoo = new Foo(4);

    fooList.push_back(firstFoo);
    fooList.push_back(secondFoo);
    fooList.push_back(thirdFoo);
    fooList.push_back(forthFoo);
}

int main()
{
    { // Block exists to see if Foo::dtor is called.
    std::vector<Foo *> fooList;
    InitializeList(fooList);

    std::sort(fooList.begin(), fooList.end(), SortFunc);

    std::vector<Foo *>::iterator itrResult = fooList.end();
    // Pointer to thirdFoo is dangling after std::unique is called.
    itrResult = std::unique(fooList.begin(), fooList.end(), CompareFunc);
    fooList.erase(itrResult, fooList.end());

    // ... Other operations and clean up code.
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T01:08:14.767

`InitializeList`您可以通过立即将其结果包装在智能指针中来将自己与实施不佳的情况隔离开来：

```
std::vector<std::unique_ptr<Foo>> foos;
{
  std::vector<Foo *> foo_ptrs;
  InitializeList(foo_ptrs);
  foos.assign(foo_ptrs.begin(), foo_ptrs.end());
} 
```

现在您可以打电话`std::unique`并`foos`知道没有任何东西会泄漏。如果您经常这样做，则包装函数可能是一个好主意：

```
std::vector<std::unique_ptr<Foo>> get_foos() {
  std::vector<Foo *> foo_ptrs;
  InitializeList(foo_ptrs);
  return {foo_ptrs.begin(), foo_ptrs.end()};
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-05T06:55:51.813

正如 juanchopanza 提到的，您需要`delete`显式调用重复元素。

泄漏在这里：

```
 fooList.erase(itrResult, fooList.end()); 
```

将`erase`简单地删除两个迭代器之间的指针。你必须先打电话`delete`给他们。

# android - Canvas.drawVertices(...) 什么都不画

> ID：14679063
> 
> 赞同：5
> 
> 时间：2013-02-04T00:44:33.763
> 
> 标签：android, api, android-canvas

下一个类是红色三角形的视图：

```
public class FreeStyleViewII extends View {

private final Paint paint = new Paint();
private final int[] colors = new int[] {
        Color.RED,
        Color.RED,
        Color.RED,
        0xFF000000, 0xFF000000, 0xFF000000
};
private final float[] verts = new float[] {
    1f/2f * 200f, 1f/4f * 200f,
    1f/4f * 200f, 3f/4f * 200f,
    3f/4f * 200f, 3f/4f * 200f
};
private final Path path = new Path();
{
    path.moveTo(1/2 * 200, 1/4 * 200);
    path.lineTo(1/4 * 200, 3/4 * 200);
    path.lineTo(3/4 * 200, 3/4 * 200);
    path.lineTo(1/2 * 200, 1/4 * 200);
}

private final RectF bounds = new RectF();

    public FreeStyleViewII(Context context) {
        super(context);
    }

    public FreeStyleViewII(Context context, AttributeSet attrs) {
    super(context, attrs);
}

public FreeStyleViewII(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
}

    @Override
    protected void onDraw(Canvas canvas) {
        canvas.clipRect(bounds);
        canvas.drawRGB(0, 0, 0);

        paint.setStyle(Style.FILL);
        paint.setColor(Color.RED);

        // HERE. WHY DRAWVERTICES DOESN'T WORK BUT DRAWPATH DOES?... 
        canvas.drawVertices(Canvas.VertexMode.TRIANGLES, verts.length, verts, 0, null, 0, colors, 0, null, 0, 0, paint);
        // canvas.drawPath(path, paint);

        paint.setStyle(Style.STROKE);
        paint.setColor(Color.LTGRAY);
        canvas.drawLine(0, bounds.bottom / 2, bounds.right, bounds.bottom / 2, paint);
        canvas.drawLine(bounds.right / 2, 0, bounds.right / 2, bounds.bottom, paint);

        // Delay
    try {  
        Thread.sleep(30);  
    } catch (InterruptedException e) { }

        invalidate();

    }

@Override
public void onSizeChanged(int w, int h, int oldW, int oldH) {
    bounds.set(1, 1, w - 1, h - 1);
    System.out.println(bounds.left + " " + bounds.top + " " + bounds.right + " " + bounds.bottom);

    verts[0] = bounds.left + ((bounds.right - bounds.left) * (1f / 2f));
    verts[1] = bounds.top + ((bounds.bottom - bounds.top)  * (1f / 4f));
    System.out.println(" Point: X ----> " + verts[0] + " | Y ----> " + verts[1]);

    verts[2] = bounds.left + ((bounds.right - bounds.left) * (1f / 4f));
    verts[3] = bounds.top + ((bounds.bottom - bounds.top)  * (3f / 4f));
    System.out.println(" Point: X ----> " + verts[2] + " | Y ----> " + verts[3]);

    verts[4] = bounds.left + ((bounds.right - bounds.left) * (3f / 4f));
    verts[5] = bounds.top + ((bounds.bottom - bounds.top)  * (3f / 4f));
    System.out.println(" Point: X ----> " + verts[4] + " | Y ----> " + verts[5]);

    path.reset();

    path.moveTo(verts[0], verts[1]);
    path.lineTo(verts[2], verts[3]);
    path.lineTo(verts[4], verts[5]);
    path.lineTo(verts[0], verts[1]);

}
} 
```

当我使用 Canvas.drawPath 方法时，它工作正常。但是，如果我更改为 Canvas.drawVertices，它不会绘制任何内容。我检查了[Canvas.drawVertices 中的 Bug 中所说的内容？（使用 repro 代码和 logcat）](https://stackoverflow.com/questions/6434132/bug-in-canvas-drawvertices-with-repro-code-and-logcat)和[Method drawVertices() 没有在 Android Canvas 上绘制任何东西](https://stackoverflow.com/questions/10579382/method-drawvertices-didnt-drawing-anything-on-android-canvas)，但在我的情况下结果是一样的。

我在[VirtualBox(v 4.1.22)中使用](https://www.virtualbox.org/wiki/Downloads)[AndroVM(v 4.1.1)](http://androvm.org/blog/download/)进行测试。会不会是模拟器？

任何的想法？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-27T21:37:26.850

**简短的回答：**

禁用硬件加速，你会没事的！

**长答案：**

我有同样的问题。在我的自定义视图代码中，我调用了 Canvas.drawVertices()，如下所示：

```
canvas.drawVertices(Canvas.VertexMode.TRIANGLES, mTriVerts.length, mTriVerts, 0, null, 0, mTriangleColors, 0, null, 0, 0, mTriPaint); 
```

这与许多设备上的预期完全一样，但是在我的 4.x 测试设备上，我试图绘制的三角形只是消失了，并且 logcat 中没有任何痕迹可以说明原因。

在 SO 没有找到解决方案后，我开始四处寻找，偶然发现了以下令人震惊的解决方案：如果启用了硬件加速，包括`Canvas.drawVertices()`对支持 Android 4.x 及更高版本的设备。

[官方 android 文档](http://developer.android.com/guide/topics/graphics/hardware-accel.html)中概述了该问题和一个好的解决方案。在这里总结一下，只需将其放在不受支持的呼叫之前的行上：

```
setLayerType(View.LAYER_TYPE_SOFTWARE, null); 
```

这是在`View`水平上，不幸的是，目前无法在已设置为软件模式的视图上重新启用硬件加速，但阅读文档感觉这可能是未来的一种选择。如果您觉得您的代码需要硬件加速，只需避免使用调用，或在视图中单独收集您不兼容的代码，并对其进行分析以查看您实际上通过这种方式获得了一些东西。

**重要编辑：**

该`setLayerType()`调用仅在 Android API 级别 11 及更高版本上受支持，这意味着您必须将对该函数的调用包装在版本检查中，以使其在早期版本上工作，如下所示：

```
if (android.os.Build.VERSION.SDK_INT >= 11) {
    setLayerType(View.LAYER_TYPE_SOFTWARE, null);
} 
```

现在你应该准备好了！

**PS：**希望这个答案能及时传达给你！

# ios - 观察自定义单元格

> ID：14679066
> 
> 赞同：0
> 
> 时间：2013-02-04T00:45:21.770
> 
> 标签：ios, objective-c, key-value-observing, custom-cell, kvc

我正在尝试添加观察者（KVO）来观察我的自定义单元格。选择单元格后，我应该会收到事件通知。我的代码：

```
[colMain addObserver:self forKeyPath:@"colMain" options:0 context:NULL];

}

-(void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context
{

    if (keyPath == @"colMain") {
        NSLog(@"cell Selected");
        [self performSelector:@selector(deleteCell) withObject:nil];

    }
} 
```

colMain 代表集合视图。我不太确定该怎么做，因为我没有 customCell 作为属性，否则它无法编译。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T00:55:53.700

为什么不在你的集合视图上设置一个委托，然后实现这两种方法之一呢？

[`[– collectionView:shouldSelectItemAtIndexPath:]`](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UICollectionViewDelegate_protocol/Reference/Reference.html#//apple_ref/occ/intfm/UICollectionViewDelegate/collectionView%3ashouldSelectItemAtIndexPath%3a)

[`[– collectionView:didSelectItemAtIndexPath:]`](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UICollectionViewDelegate_protocol/Reference/Reference.html#//apple_ref/occ/intfm/UICollectionViewDelegate/collectionView%3adidSelectItemAtIndexPath%3a)

# css - IE8 浮动错误地显示边距

> ID：14679082
> 
> 赞同：0
> 
> 时间：2013-02-04T00:48:28.193
> 
> 标签：css, twitter-bootstrap, internet-explorer-8, css-float, margins

我的页面位于[http://jerswebempire.com/ovrtur/index.php](http://jerswebempire.com/ovrtur/index.php)

该页面在除 IE8 之外的所有浏览器中几乎都能完美显示。在 IE8 中，浮动 div 的边距不正确。例如，您会看到顶部的搜索栏位于导航下方。但是，如果您在 Chrome 或 Firefox 或 IE9 中打开该页面，它会显示在正确的位置。

我究竟做错了什么？！我似乎找不到解决办法。

此外，除 IE8 之外，所有浏览器中的最新视频框都位于两列中。它类似于上面的问题，其中添加了不应该存在的左边距。

该页面是使用 Bootstrap 构建的。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T14:37:46.323

我无法在 ie8 上调试，但我搜索并发现实际上[ie7/8 上存在负边距错误](http://www.trickyclicks.com/web-coding/css/negative-margin-for-ie7-ie8.html)。他们建议使用

```
zoom:1, position: relative 
```

作为一种解决方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T01:23:26.400

在索引之间使用 ie 条件

```
<html> </html> 
```

像 html 样板一样为“ie 8 only”边距添加一个类。

加载一个自定义的 ie 8 only 样式表并在那里解决边距问题，如下所示：

```
<!--[if IE 8]><link rel="stylesheet" type="text/css" href="ie8-only.css" /> <![endif]--> 
```

或者在你需要的地方加载一个类。

```
<!--[if IE 8]><html class="ie8 lt-ie9"> <![endif]--> 
```

将 ie 条件类应用于您需要的任何内容。

```
<div class="floatedDiv ie8" 
```

CSS

```
.ie8 { margin:0px; } 
```

# php - 为 URL 添加价值

> ID：14679083
> 
> 赞同：0
> 
> 时间：2013-02-04T00:48:45.057
> 
> 标签：php, iframe, add

如何向链接添加值：

```
http://wl.breedbandwinkel.nl/postcodecheck/2652/BL/6?sub=alles-in-een-pakketten&domain=www.kabeladviseur.nl&aff_id=6081&focus=glasvezel&hide=mobiel-internet 
```

我需要能够添加和或更改值`2652/BL/6`。

是否有任何脚本（php）可以为我做到这一点？所以我可以将结果加载到新页面中？

这是我正在运行的脚本：

```
http://wl.breedbandwinkel.nl/?domain=kabeladviseur.nl&aff_id=6081&focus=glasvezel&hide=mobiel-internet 
```

这是一个检查邮政编码是否有效的检查器。我`iframe`现在运行了这个，但这还不够好。

我希望这足以让您知道我在寻找什么。如果您需要更多信息，我很乐意提供给您。

下面是我为邮政编码检查器运行的脚本：

```
 <FORM name="pcc" id="pcc" method="post" action="http://wl.breedbandwinkel.nl/postcodecheck/?sub=alles-in-een-pakketten&domain=www.kabeladviseur.nl&aff_id=6081&focus=glasvezel&hide=mobiel-internet" onSubmit="return validatePcc(this);">
    <DIV class="blok">

        <H2>Ik ben op zoek naar:</H2>

        <DIV class="ff"><INPUT type="radio" class="pccrad radio" name="sub" value="alles-in-een-pakketten" id="pcc-alles-in-een-pakketten" onclick="$('#pcc-no').hide(); $('#pcc-fpcon').css('visibility', 'visible'); if($('#pcg').val() == '') $('#pcg').focus();"><LABEL class="left pcm" for="pcc-alles-in-een-pakketten" onmouseover="mpopup('Alles-in-&eacute;&eacute;n pakketten','Extra voordelig pakket met internet, digitale telefonie en/of digitale televisie.');" onmouseout="kill();">Alles-in-&eacute;&eacute;n pakketten</LABEL></DIV>         <DIV class="ff"><INPUT type="radio" class="pccrad radio" name="sub" value="internet" id="pcc-internet" onclick="$('#pcc-no').hide(); $('#pcc-fpcon').css('visibility', 'visible'); if($('#pcg').val() == '') $('#pcg').focus();"><LABEL class="left pcm" for="pcc-internet" onmouseover="mpopup('Internet','Altijd supersnel onbeperkt online tegen een vast bedrag per maand.');" onmouseout="kill();">Internet</LABEL></DIV>                      <DIV class="ff"><INPUT type="radio" class="pccrad radio" name="sub" value="digitale-televisie" id="pcc-digitale-televisie" onclick="$('#pcc-no').hide(); $('#pcc-fpcon').css('visibility', 'visible'); if($('#pcg').val() == '') $('#pcg').focus();"><LABEL class="left pcm" for="pcc-digitale-televisie" onmouseover="mpopup('Digitale Televisie','Geniet van haarscherp digitaal beeld en geluid inclusief de gratis digitale programmagids.');" onmouseout="kill();">Digitale Televisie</LABEL></DIV>    
    </DIV>

    <DIV class="blok">

        <DIV id="pcc-no" class="hide"><I>Voor het vergelijken van Mobiel Internet is geen postcode nodig.</I></DIV>

        <DIV id="pcc-fpcon">
            <H2>Mijn postcode en huisnummer zijn:</H2>

            <TABLE border="0" cellspacing="0" cellpadding="0">
              <TR>
                <TD height="14" colspan="2">Postcode</TD>
                <TD>Huisnr.</TD>
              </TR>
              <TR>
                <TD width="51"><INPUT type="text" class="text" maxlength="4" size="5" value="" name="pcg" id="pcg" onKeyUp="autoTab(event,this,4,pcl);" style="width: 41px;"></TD>
                <TD width="46"><INPUT type="text" class="text" maxlength="2" size="2" value="" name="pcl" id="pcl" onKeyUp="autoTab(event,this,2,hn);" onKeyDown="backSpace(event,this,pcg);" onBlur="upperCase(event,this);" style="width: 26px;"></TD>
                <TD width="36"><INPUT type="text" class="text" maxlength="6" size="4" value="" name="hn" id="hn" onKeyDown="backSpace(event,this,pcl);" style="width: 36px;"></TD>
              </TR>
            </TABLE>

            <U class="dot small" onmouseover="popup('Waarom mijn postcode invullen?','Om te kunnen controleren welke abonnementen op uw adres leverbaar zijn hebben wij uw postcode en huisnummer nodig.<br>Uiteraard respecteren wij uw privacy. Deze gegevens worden niet opgeslagen.');" onmouseout="kill();">Waarom mijn postcode invullen?</U>
        </DIV>
        <DIV class="spa"></DIV>

        <INPUT type="submit" name="submit" value="Vergelijk de aanbiedingen op uw adres" class="button">

    </DIV>
</FORM> 
```

# asp.net - 向世界公开基于 Web 的内部应用程序的安全性

> ID：14679086
> 
> 赞同：0
> 
> 时间：2013-02-04T00:49:07.913
> 
> 标签：asp.net, asp.net-mvc, asp.net-web-api, security

我们有一个内部 CRM 系统，该系统目前是一个只能在我们的 Intranet 内部访问的网站。老板现在想让它暴露在外面的世界，这样人们就可以在家中和路上使用它。我担心的是安全性，因为我们将把我们的客户群暴露给外界。我已经实现了 3 层安全性，如下所示：

1.  用于登录的用户名和强密码组合
2.  跨行推送的所有数据的 SSL
3.  一旦用户登录并通过身份验证，服务器就会向他们传递一个令牌，该令牌必须用于与服务器的所有通信。

基本上我在网络安全方面有点新手。任何人都可以就我是否遗漏任何东西给我建议吗？或者应该改变什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T01:33:07.527

您应该考虑的东西有很多，而且很难快速回答这个问题 - 所以我会为您指出一系列可以帮助您/帮助您入门的资源。

首先，我将插入[http://security.stackexchange.com](http://security.stackexchange.com)，以解决您遇到的任何具体问题 - 它们可能会很有帮助。

现在，您应该检查更直接的事情：

1.  您的系统是否在防火墙后面？我建议至少将您的数据库放置在外部世界无法直接使用的服务器上。

2.  探索并针对您的站点运行一系列（免费）安全工具，以尝试找出任何问题。例如： [https ://asafaweb.com](https://asafaweb.com) [http://sectools.org/](http://sectools.org/)

3.  阅读常见漏洞（例如 SQL 注入）并确保您防范它们： [https ://www.owasp.org/index.php/Top_10_2010-Main](https://www.owasp.org/index.php/Top_10_2010-Main) [https://www.owasp.org/index.php/类别：漏洞](https://www.owasp.org/index.php/Category:Vulnerability)

4.  您的令牌是如何传递的，如果另一个用户获得它（例如，在它被缓存在另一台机器上之后），它会发生什么？

5.  确保你有一个体面的密码保护策略（体面的复杂性，通过在 3 次尝试后锁定帐户来防止暴力攻击）。

6.  如果这对您来说是一个大问题（考虑在最坏的情况下对您的业务造成的风险）考虑聘请专家或有人对您的系统进行安全测试？

或者，正如 mrunion 在上面的评论 (+1) 中出色指出的那样，您是否考虑过其他更安全的方法来打开它，这样您就不需要在网络上发布它？

希望这能让你开始。

# php - 页面上的 ModRewrite url 以删除扩展名

> ID：14679088
> 
> 赞同：0
> 
> 时间：2013-02-04T00:49:44.613
> 
> 标签：php, apache, .htaccess

是否可以更改页面上的所有链接以删除扩展名。

```
Example:
www.domain.com/index.php
changes to
www.domain.com/index 
```

我希望页面上的实际链接发生变化，以便当用户将鼠标悬停在链接上时，它没有 php 扩展名，而不是每次都进行重定向。我不确定这是否可能，但我更愿意这样做，而不是必须更改我的所有代码来删除 php 扩展。

我也可以重写每个链接，例如：

```
www.domain.com/index?id=12&sid=2
to
www.domain.com/index/id/12/sid/2 
```

或者我是否必须为我想要为其执行的每个页面手动执行此操作。

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T01:17:22.810

当然。我想我会通过使用输出缓冲来做到这一点。所以我把 ob_start(); 在页面顶部（在任何输出之前），然后在底部 $contents = ob_get_contents();

然后，您需要一组正则表达式来进行更改。此处的详细信息取决于您构建网站的方式，例如是否有完整的 URL 或相对链接；如果您一直在使用双引号或单引号来表示属性等。但类似：

```
$urls = preg_match_all( '|href="http://www.domain.com/[^"]+\.php?[^"]+"|', $contents, $m );
foreach( $m as $u ) {
  $n = preg_replace( "/\?|=|&/", '/', $u );
  $contents = str_replace( $u, $n, $contents );
}
$contents = preg_replace( '|(href="http://www.domain.com/[^"]+)\.php|', $1, $contents );
echo $contents; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T01:04:00.193

首先，您应该在根目录中添加一个 .htaccess 文件，其中包含：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /router.php 
```

这将做什么：将每个请求重定向到您的 router.php 文件中不存在的文件。我所做的是，在我的 router.php 文件中，我检查 url (www.domain.com/index) 是什么，然后包含好文件。例子 ：

```
$requestURI = explode('/', trim($_SERVER['REQUEST_URI']));
if (isset ($requestURI[1]) && (resquestURI[1] === "index"){
    require "index.php";
}
else {
    //file not found
} 
```

为了 ”？”。我认为您不能删除它，它用于将您的 GET 参数与 url 分开。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T01:03:01.250

删除 .php 很简单，添加重写可能很棘手。

wordpress（和许多其他脚本）的方式是通过重定向 PHP 脚本的所有内容：

```
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L] 
```

您可以通读代码并反向设计类似的解决方案。

或者，如果 URL 总是相同的（例如，总是 id=12&sid=2 类型的东西），您可以添加重写规则 - 例如：

```
RewriteRule ^/index\.php\/?id\=([0-9]+)&sid=([0-9]+)$ /index/id/{$1}/sid/{$2} 
```

这只是伪语法可能需要检查。

另外，您使用的是预打包的软件包吗？如果是这样，它可能已经有了这个选项。请告诉我们。

# iphone - 增加标签栏项目之一的高度

> ID：14679089
> 
> 赞同：2
> 
> 时间：2013-02-04T00:49:53.060
> 
> 标签：iphone, ios, objective-c, uitabbar, uitabbaritem

我创建了一个基于选项卡的应用程序，它有 5 个选项卡。

我希望第三个标签栏项目的高度比所有其他标签都高。

这第三个标签栏项目的大小将始终大于其他标签。

如何在基于选项卡的应用程序中执行此操作？没有自定义标签栏是否可能？

请帮忙

提前致谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-04T00:57:07.057

您可以通过覆盖自定义视图或按钮轻松实现此效果。这是我在应用程序中为实现此效果所做的工作（如下所示）。我不相信没有额外的子视图就可以做到这一点。

```
UIButton *middleButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
[middleButton addTarget:self action:@selector(tappedMiddleButton:) forControlEvents:UIControlEventTouchUpInside];

CGRect frame;
frame.size.height = 54;
frame.size.width = 72;
frame.origin.x = ceil(0.5 * (tabBarController.view.bounds.size.width - frame.size.width));
frame.origin.y = tabBarController.tabBar.bounds.size.height - frame.size.height;
[middleButton setFrame:frame];

[[tabBarController tabBar] addSubview:middleButton]; 
```

然后你可以有你的方法被称为：

```
-(void)tappedMiddleButton:(id)sender {

} 
```

在该方法内部，您可以设置选项卡栏的选定索引：

```
[tabBarController setSelectedIndex:2]; 
```

# asp.net-mvc-4 - ASP.net MVC - 进行 ajax 调用，返回数据但客户端代码似乎被忽略

> ID：14679098
> 
> 赞同：1
> 
> 时间：2013-02-04T00:50:53.427
> 
> 标签：asp.net-mvc-4

因此，在更改一个下拉列表时，我试图填充第二个列表。

我有这个客户端功能：

```
 $('#ProjectReference').change(function() {

       var url = "@Url.Action("GetProjectIterations", "Rally")";
       var data = { selectedProject: $('#ProjectReference').val() };

       $.getJSON(url, data, function(iterations) {
              alert("hello?");
              var items;
              $.each(iterations, function(i, iteration) {
                   items += "<option value='" + iteration.Name + "'>" + iteration.Name + "</option>";
              });
            }
       );

       $.ajax({
            url: url,
            type: 'GET',
            dataType: 'json',
            data: data,
            contentType: 'application/json; charset=utf-8',
            success: function (iterations) {
                        alert("hello?");
                        var items;
                        $.each(iterations, function(i, iteration) {
                            items += "<option value='" + iteration.Name + "'>" + iteration.Name + "</option>";
                        });

                        $("#ProjectIteration").html(items);},
             failure: function () { alert("nope");}
            });
        }); 
```

我已经尝试了 2 种不同的格式来调用我的控制器（所以我知道我不需要两者 - 我只是将两者都包括在内以突出我尝试过的内容）。

我的控制器被调用，我正在返回数据，但我的警报都没有被触发（我试图更新的下拉列表没有任何反应）。所以也许我返回数据的方式不正确？我的选择列表计数为 33，因此在返回之前似乎有数据。

```
public ActionResult GetProjectIterations(string selectedProject)
{
     var projectIterations = cache.Get("ProjectIterations") as Hashtable;
     var iterations = (projectIterations[selectedProject] as ArrayList).Cast<DynamicJsonObject>().ToList();
     var selectList = iterations.Select(
            iteration => new SelectListItem {Text = iteration["Name"], Value = iteration["Name"]});
     return Json(selectList);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T15:40:22.390

由于您正在使用`GET`，您需要更改`JsonRequestBehavior`控制器操作。

在您的示例中，代码应为：

```
public ActionResult GetProjectIterations(string selectedProject)
{
     var projectIterations = cache.Get("ProjectIterations") as Hashtable;
     var iterations = (projectIterations[selectedProject] as ArrayList).Cast<DynamicJsonObject>().ToList();
     var selectList = iterations.Select(
            iteration => new SelectListItem {Text = iteration["Name"], Value = iteration["Name"]});
     return Json(selectList, JsonRequestBehavior.AllowGet); //check the overload for Json()
} 
```

# c++ - 使用循环调用具有不同名称的数组

> ID：14679100
> 
> 赞同：0
> 
> 时间：2013-02-04T00:51:37.873
> 
> 标签：c++, arrays, string, loops

我有 5 个数组，我正在尝试使用循环填充它们。我想向用户询问第一个数组的 4 个条目（我确实有一个循环），然后循环到第二个、第三个、第四个和第五个数组。

我需要这些数组是单独的一维数组。

我可以获得第一个数组的信息，但由于它们都有不同的名称，我无法弄清楚如何让循环进入其他数组。

这是我仅获取第一个数组的信息的内容...我可以使用不同的数组名称重复所有内容 5 次，但似乎应该有一种使用循环的方法。

```
 #include <iostream>
 #include <iomanip>
 #include <string>

 using namespace std;

 int main()
 {
 int Array1[4];
 int Array2[4];
 int Array3[4];
 int Array4[4];
 int Array5[4];
 int countArray = 1;

 cout <<" \nEnter 4 integers: \n\n";

 for (countArray; countArray <=4; countArray ++)
     cin >> Array1[countArray];

 // Need to get info in to Array1, followed by Array2, Array3, Array4, Array 5
 // Want ot use a loop to call the other arrays

 countArray = 1;
 cout << "\n\n";
 for (countArray = 1; countArray <=4; countArray ++)
     cout << Array1[countArray] << "  ";;
     cout << "\n\n";

 // Need to outpit info from Array1, followed by Array2, Array3, Array4, Array 5
 // Want ot use a loop to call the other arrays

system("PAUSE");

return 0;
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T00:55:50.000

您应该定义一个函数来遍历单个数组的输入，并为四个数组中的每一个调用该函数：

```
void handleInput(int array[], int count) {
    // Input the data into the array, up to the count index
}
void handleOutput(int array[], int count) {
    // Output the data from the array, up to the count index
} 
```

`main()`现在您可以从传递`Array1`的 ,`Array2`等中调用这些方法，如下所示：

```
handleInput(Array1, 3);
handleInput(Array2, 4);
handleInput(Array3, 4);
handleOutput(Array1, 3);
handleOutput(Array2, 4);
handleOutput(Array3, 4); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T00:54:41.217

您能否在 cin >> Array1[countArray]; 之后不添加以下行

```
Array2[countArray] = Array1[countArray];
Array3[countArray] = Array1[countArray];
Array4[countArray] = Array1[countArray];
Array5[countArray] = Array1[countArray]; 
```

这将在相同的索引处用相同的值填充它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T05:28:41.107

如果所有数组的大小都相等，我建议您在这种情况下使用二维数组。

```
int main()
{
    int Array[5][4];
    int countArray = 0;
    int countItem = 0;

    for (countArray = 0; countArray < 5; ++countArray) 
    {
        cout <<" \nEnter 4 integers: \n\n";
        for (countItem = 0; countItem < 4; ++countItem)
            cin >> Array[countArray][countItem];
    }

    // Need to get info in to Array1, followed by Array2, Array3, Array4, Array 5
    // Want ot use a loop to call the other arrays

    cout << "\n\n";
    for (countArray = 0; countArray < 5; ++countArray)
    {
        for (countItem = 0; countItem < 4; ++countItem)
            cout << Array[countArray][countItem] << "  ";
        cout << "\n\n";
    }

    // Need to outpit info from Array1, followed by Array2, Array3, Array4, Array 5
    // Want ot use a loop to call the other arrays

    return 0;
} 
```

# c++ - C++ - 执行速度测试的正确方法是什么？

> ID：14679105
> 
> 赞同：2
> 
> 时间：2013-02-04T00:52:40.373
> 
> 标签：c++, performance, compiler-construction, dead-code, optimization

我搜索了许多询问相关信息的问题，但答案并不完全符合我想要的答案。我会尽力解释这个问题。

基本上，在发布模式下运行代码时，编译器似乎会删除大多数冗余或死代码。所以它最终什么都不检查。一些修复是使代码存储到某个变量，但随后编译只是删除了循环并存储了它看起来的最后一个增量。

现在我确实希望进行优化以改进所使用的代码，但我仍然想要它最初所做的一切例如，如果我让它循环代码 100,000 次，我希望它实际执行代码 100,000 次。我不确定如何修改 Visual Studio 2010 上的编译器，以便在发布模式下编译时进行最小的优化。我非常想准确计时，但我不确定如何准确计时。

起初我认为在不调试的情况下在调试中运行可能会解决问题，因为结果与 Java 应用程序的结果相匹配，但在发布模式下运行时结果快得离谱，这让我感到困惑。我不确定 C++ 在优化方面是否更好，或者是否更改了大量代码。

有没有办法也可以反汇编代码并查看编译器将代码编译成什么？这将是我希望看到的另一项测试，但我对这些东西知之甚少，任何朝着正确方向的东西都将不胜感激。好吧，感谢任何能理解我要求的人。我很乐意回答有关手头问题的任何误解或不确定性的任何问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T01:07:04.457

因此，为了避免编译器优化掉你的所有代码，你需要确保你“使用”你在代码中所做的事情的结果。

另一个技巧是将要测试的代码放在单独的文件中，因此编译器无法内联您的“函数在文件之外”（除非您启用“整个程序优化”）。

我经常使用函数指针 - 与其说是因为它阻止了优化 [虽然它经常这样做]，但因为它为我提供了一个很好的基础，可以用相同的基本“测量花了多长时间并打印出结果”进行多次测试，通过有一张桌子，看起来有点像这样：

```
 typedef void (*funcptr)(void);

 #define FUNC(f) { f, #f }

 struct func_entry
 {
      funcptr func;
      const char *name;
 };
 func_entry func_table[] = 
 {
      FUNC(baseline),
      FUNC(better1),
      FUNC(worse1),
 };

 void do_benchmark()
 {
     for(int i = 0; i < sizeof(func_table)/sizeof(func_table[0]); i++)
     {
          timestamp t = now();
          func_table[i].func();
          t = now() - t;

          printf("function %s took %8.5fs\n", func_table[i].name, 
                 timestamp_to_seconds(t));
     }
 } 
```

显然，您需要`now()`用一些合适的时间获取函数，以及`timestamp`该函数的相关类型以及`timestamp_to_seconds`有效的东西来替换......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T01:22:51.990

您不仅需要使用在循环中计时的调用结果，而且还应该使用*每次*迭代的结果。在这里，您尝试确保使用每个循环的结果，但不要在您尝试测试的内容之外施加过多的开销。

一种典型的方法是累积所有方法调用的总和，以获得返回整数值的东西。这可以通过调用其他返回 int 的方法扩展到不返回 int 的方法。例如，如果您的方法创建`std::string`s，则调用`size()`返回的字符串，这应该非常快。在 C++ 中，您可以使用 address-of 运算符`&`作为将几乎任何内容转换为整数的快速方法。

在某些情况下，编译器可能仍然能够看穿你的技巧并将实际方法提升到循环之外，这会退化为添加一堆值甚至是一个大乘法。

您可以通过迭代运行时生成的某种输入来避免这种情况 - 编译器将无法不断折叠您的循环。使用函数指针也可以工作，但会增加额外的开销，并且一些编译器（以及未来的更多）可能仍然可以查看它们。

在你这样做的整个过程中，你必须问自己你真正测量的是什么。在循环中测量的非常小的方法不一定能很好地说明当循环更复杂时它们在现实生活中的表现。这适用于优化范围的两侧 - 例如，您在基准测试中试图避免的“提升”实际上可能发生在实际代码中，因此您的基准测试过于悲观。相反，在你的基准测试中总是达到 L1 的 8K 查找表之类的东西可能会在实际代码中导致大量未命中。

总而言之-微基准测试是一个需要谨慎使用的工具-一旦您了解如何防止您认为在实践中不切实际的优化，您绝对可以测量*某些东西*-但您应该始终评估一些真实世界的用例作为健全性检查（了解微基准测试的巨大差异总是转化为大型程序中更小的改进，其中测试的方法是运行时的一小部分开始）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T01:39:30.630

我所做的是有一个`benchmark()`位于 DLL 中的函数，并将函数指针传递给它。防止编译器优化基准循环的最佳方法是使其无法这样做，并将其放在单独的 DLL 中绝对可以防止这种情况发生。随着 LTCG 变得普遍，单独的翻译单元将不再起作用。

第一：一些快速设置。将线程的亲和性设置为单个核心，并赋予其高优先级。这将防止由于上下文切换或缓存抖动而导致的许多可能的变化。并且不要忘记使用高精度计时器，例如`QueryPerformanceCounter`计时 - 不依赖系统时间的东西。

接下来，在循环中调用函数指针，直到两秒过去。这将预热缓存中的代码/数据，让您大致了解其速度，并允许您自动得出合理的循环计数。我选择将在 1 秒内完成的循环计数。

接下来，实际的基准测试：维护一个计数器，每次循环不会提高前一个循环的速度时，该计数器就会增加。当计数器达到某个设定值时，停止并假设我们已经找到了最佳时间。当速度提高时，计数器复位。

请注意，这不会像适当的分析器那样告诉您要优化什么，但如果您的唯一目标是将一段代码与另一段代码进行比较，它应该会给出非常准确的结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T01:39:55.783

这取决于您的代码试图做什么以及您期望它的行为方式。

1.  您的代码是否在执行 I/O（网络、磁盘、音频等）？
2.  它是多线程的吗？
3.  它处理内存很多吗？
4.  您是否处于时间紧迫的循环中？
5.  它是处理器密集型的吗？

通常，您希望在发布模式下运行并使用分析器来查看您的代码在有效的使用/测试用例中的执行情况。即使这样，您也需要知道[要使用什么分析器](http://en.wikipedia.org/wiki/Profiling_%28computer_programming%29)，这取决于您要解决的问题。

最重要的是，当没有问题时不要去寻找问题。相信你的编译器。这些天试图超越你的编译器是一个非常徒劳（和愚蠢）的练习。您的分析器只会吐出数据。由您决定要查找和解释什么。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2013-02-04T00:56:17.257

假设您使用的是 Visual Studio (Visual C++)，将其设置为调试配置文件，右键单击项目 -> 属性并转到 C/C++ -> 优化。确保它被禁用。

然后，您可以使用秒表或 unix 程序`time`来计算程序运行的时间。

当然还有更复杂的分析性能的方法——比如使用分析器。

# iphone - 如何在搜索 iPhone 期间检查项目是否已下载

> ID：14679106
> 
> 赞同：0
> 
> 时间：2013-02-04T00:52:53.373
> 
> 标签：iphone, ios, core-data

我正在开发一个允许用户浏览/搜索书籍并下载它们的应用程序。有3个UITableView，下载/搜索/浏览

如果未下载，我想显示“下载”按钮，否则显示“打开”按钮。在下载表格视图中很简单，我只是从核心数据中查询并显示所有书籍。

服务器是无状态的，不知道用户是否下载了这本书。

我将下载的书籍保存在核心数据中。使用 FetchedResultsController 下载表格视图。

当用户按类别搜索/浏览时，开始一个新的 REST 请求并使用响应的 JSON 作为内存 NSArray 来备份 tableview 以显示标题和作者姓名等。

图书列表很大，服务器支持一些高级搜索，例如使用 Acronym 和按受欢迎程度排序。所以下载整个列表并在本地执行搜索需要更多的工作。

什么是更新确定是否在搜索视图中下载书籍的好方法？每次`cellForRowAtIndexPath`在主线程中查询核心数据库听起来很昂贵。我还想在后台下载完成时实时更新UI状态，所以下载后修改JSON也不起作用

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T01:51:36.343

如果书籍列表很小（足够小以至于您可以一次从服务器下载它），您可能会在内存中为其构建模型而侥幸。尝试查询服务器，使用 CoreData 结果修改响应（全部在后台），然后告诉`UITableView`重新加载自身（在 UI 线程中）。

伪代码来说明：

```
dispatch_async(..., ^{
  [server requestData:param onComplete:^(NSDictionary* result){
    NSArray* someResult = [moc executeFetchRequest:...];
    NSArray* tableViewData = [mybusinesslogic mergeServerResult:result 
                              withCoreDataResult:someResult];
    myTableViewController.tableViewData = tableViewData;
    dispatch_async(dispatch_get_main_queue(), ^{
      [myTableViewController.tableView reloadData];
    });
  }];
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T14:52:01.340

对每个单元进行核心数据查询是昂贵的。所以做一个查询，然后在内存中匹配它。如果书籍有某种易于匹配的 ID。也许是这样的：

1) 获取响应的 JSON NSArray。（也许将 id 解析到另一个 NSArray 中） 2）在单个查询中将其中的 id 与 Core Data 中的 id 匹配。返回仅具有匹配 id 的数组，如下所示：

```
-(NSArray*) findMatchInGraph:(NSManagedObjectContext*)context forResults:(NSArray*)searchResultIDs {

    NSFetchRequest *request = [[NSFetchRequest alloc] init];
    [request setEntity: [NSEntityDescription entityForName:@"Books" inManagedObjectContext:context]];

    NSPredicate *reqPredicate = [NSPredicate predicateWithFormat:@"(id IN %@)", searchResults;
    [request setPredicate:reqPredicate];

    NSError *error = nil;
    NSArray *results = [context executeFetchRequest:request error:&error];
    NSMutableArray *matching = [NSMutableArray array];
    if (results) {
        for (NSManagedObject *item in results) {
            [matching addObject:[item valueForKey:@"id"]];
        }
    }
    return [matching copy];
} 
```

3) TableViewController，具有匹配 ID 的索引单元格将添加“已下载”指示符？

也许有一种更有效的方法来做到这一点。

# javascript - 使用正则表达式获取所有 URL 参数

> ID：14679113
> 
> 赞同：16
> 
> 时间：2013-02-04T00:54:39.137
> 
> 标签：javascript, regex

> **可能重复：**
> [如何获取查询字符串值？](https://stackoverflow.com/questions/901115/how-can-i-get-query-string-values)

试图获得一个正则表达式（Javascript）。

```
Input:   url.html?id=14114&yolo=hahaha
Output:  id=14114
         yolo=hahaha 
```

所以这就是我到目前为止所做的：`(\&|\?)(.*?)\=(.*?)`

**我如何还包括红圈区域？**

![在此处输入图像描述](../Images/e2ed64256b9e75c4ad83ae3aa03a6280.png)

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-02-04T00:59:46.117

这个模式怎么样：

```
(\?|\&)([^=]+)\=([^&]+) 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-02-04T01:04:00.870

尝试使用这个：

```
[^&?]*?=[^&?]* 
```

# php - 对 SimpleXMLElement 的 getName() 调用返回致命错误“调用非对象上的成员函数”

> ID：14679124
> 
> 赞同：0
> 
> 时间：2013-02-04T00:56:44.113
> 
> 标签：php, simplexml

我遇到了一个非常奇怪的错误。我正在编写一个函数来根据元素名称验证 XML，在本例中作为数组传入。首先，我将输入标准化为一个`SimpleXMLElement`对象；在这种情况下，我传入一个 DOMDocument，并对其进行了测试，它正确转换为`SimpleXMLElement`.

让我感到困惑的是，调用`getName()`会抛出以下内容：

```
PHP Fatal error:  Call to a member function getName() on a non-object 
```

但是使用`exit($xml->getName())`(or `echo`) 将返回正确的结果 - 根元素名称！

相关代码：

```
function validateXML($xml, $format='') {
(get_class($xml) !== 'SimpleXMLElement') ?
    ((get_class($xml) === 'DOMDocument') ?
        $xml = simplexml_import_dom($xml)
        : $xml = simplexml_load_string($xml))
    : $xml = $xml;
$rootName = ($xml->getName());
if ($rootName != $format[0]) {
    exit($xml->getName())));
} 
```

此外，如果重要的话，服务器正在运行 PHP 5.3

我对 PHP 非常陌生，因此非常感谢您的帮助！

PS为了清楚到底发生了什么，下面的代码：

```
function validateXML($xml, $format='') {
    echo(get_class($xml);
    $xml = simplexml_import_dom($xml);
    echo(get_class($xml);
    echo($xml->getName());
} 
```

输出到服务器

```
DOMDocument
SimpleXMLElement
'ElementName' (the correct root name of my XML document) 
```

...所以它似乎正在工作，除了致命错误仍然被抛出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T01:01:50.420

`$xml`当XML 无效时，您的代码（假设它与您在问题中编写的内容足够接近）将失败，因为[`simplexml_load_string()`](http://php.net/manual/en/function.simplexml-load-string.php)：

> **返回**一个 SimpleXMLElement 类的对象，其属性包含 xml 文档中保存的数据，**如果失败，则返回 FALSE**。

如果您仍然没有看到这一点，我建议您使用`if`语句而不是第三语句来重写您的代码。您的函数，当`$xml`不是`SimpleXMLElement`实例，也不是`DOMDocument`实例时，将有效地归结为以下函数：

```
function validateXML($xml, $format='') {
    simplexml_load_string($xml);
    $rootName = ($xml->getName());
    if ($rootName != $format[0]) {
        exit($xml->getName());
    };
} 
```

# ruby-on-rails - 活动管理员。始终在索引表上方显示顶部过滤器

> ID：14679127
> 
> 赞同：2
> 
> 时间：2013-02-04T00:57:33.110
> 
> 标签：ruby-on-rails, activeadmin

在索引页面上，如果使用侧过滤器的搜索结果不为空，我在索引表上方有具有预定义范围的顶级过滤器，但如果没有任何结果，这行过滤器将消失...

但我在所有情况下都需要它，并且搜索结果的数量正确![顶部过滤器](../Images/88769a085461cc435becbdd7216a627e.png)

希望问题足够清楚=）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T06:46:53.600

一种方法是修改 Scopes 构建器类。你可以通过在 Rails 项目中添加一个初始化文件来轻松做到这一点：

**配置/初始化程序/activeadmin_scope_patch.rb**

```
module ActiveAdmin
  module Views
    class Scopes < ActiveAdmin::Component
      def build(scopes, options = {})
        scopes.each do |scope|
          build_scope(scope, options) if call_method_or_proc_on(self, scope.display_if_block)
        end
      end
    end
  end
end 
```

这是有效的，因为默认渲染器会检查结果集是否为空，如果是则短路进程。通过删除该检查，渲染器将显示所有包含 0 个项目的范围，因为没有结果。

# heroku - 非本地包中的本地导入

> ID：14679130
> 
> 赞同：5
> 
> 时间：2013-02-04T00:57:54.563
> 
> 标签：heroku, go

我知道应该避免本地进口，但在这种情况下需要特殊情况。`go get ./...`这是一个私人仓库，由于服务器上缺少私钥，heroku buildpack 在与绝对网址一起使用时会在该阶段失败。

现在我得到这个错误`local import ".." in non-local package`。

所有导入路径都更改为本地版本，那么还有什么可以将包限定为“非本地”？我该如何解决？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T11:17:11.577

我修好了它。问题是根包位于`$GOPATH/src/<host>/<user>/<package>`. 一旦我将包移动到`~/Git/<package>`错误就消失了（因此，“使其成为本地”）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T04:32:42.823

彼得索是对的。查看生成该错误消息的代码，如果正在加载的包没有以 / ./ 或 ../ 开头，但它导入了一个这样的包，就会发生这种情况。在您的问题的情况下，有几件事可能导致它。

1.  go get 导致使用非本地路径引用的依赖包被构建，然后依次加载本地路径。
2.  您将获得一个包含本地导入的非本地包路径。

我认为也许您应该只修复服务器上丢失的私钥问题，而不是尝试使用本地路径。

为了正确调试，我需要知道你得到了哪些包，以及它们的传递依赖是什么。

最后一件事你为什么使用 go get 进行本地路径安装（即。`go get ./...`）？在这种情况下，go install 或 go build 通常是您想要的。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-04T01:45:42.327

> 本地包导入路径是绝对文件系统路径或以 ./ 或 ../ 开头的路径。非本地包导入路径不是本地包导入路径。
> 
> [cmd/go/pkg.go](http://code.google.com/p/go/source/browse/src/cmd/go/pkg.go)

# css - 分解大字/防止破坏布局/连字符 js

> ID：14679132
> 
> 赞同：0
> 
> 时间：2013-02-04T00:58:44.517
> 
> 标签：css, hyphenation, word-break

我已经看到并浏览了太多页面来解释相同的问题并取得了各种成功。我想做的是想出一种方法，我可以分解大单词，这样它们就不会通过将内容拉伸到指定宽度之外来破坏 table/divs/etc。我需要为百分比宽度元素完成此操作。我觉得我已经尝试了一切，但必须有一个解决方案，即使它是一个 hack。到目前为止，我发现的最佳解决方案是使用[hyphenator js](http://code.google.com/p/hyphenator/)。它适用于大多数长单词，除了它似乎只适用于可以在字典文件中找到的真实单词。例如，在我的所有示例中都很好地分解了这一点：

这是一串文本，如果我正在使用连字符 json 这将与连字符很好地分手，一切都会好起来的

像这样的事情不会被破坏，而是会破坏我的网站：

阿里巴巴

=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=- =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=- =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-

我想使用它的大多数网站都允许用户创建的文本出现在网站上，并且等号和连字符的长字符串很常见。我还注意到stackoverflow通过使用自动换行来解决这个问题：break-word; CSS（至少在Firefox中）。我对此进行了试验，发现它效果很好，但仅在使用预定义的像素宽度时才有效，我需要一个适用于百分比宽度的解决方案。我还使用了 word-wrap: break-all ，但它看起来很丑，因为它在应该换行时会在中间切断小词。

如果可能的话，我想继续使用连字符，因为它在大多数情况下都很好用。也许我已经看这个太久了，但是我可以设置连字符中的某种选项来分解像上面那些太大的非单词吗？也许有人在调整连字符正则表达式以实现这一点方面取得了一些成功？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T08:55:33.960

设置`word-wrap: break`百分比宽度（在技术意义上）也有效，对于单元格/列的百分比宽度的表格，即使`table-layout`设置为`fixed`. 要解决此问题，似乎有必要在内容中添加换行提示。

旧的换行提示是`<wbr>`，但现在一些浏览器存在问题。新的换行提示是零宽度空格字符，可以这样写`&#x200b;`（使用 UTF-8 时）；它在现代浏览器中运行良好，但会对旧版本的 IE 造成不良影响。这些天我倾向于投票给后者，但在我的[换行问题](http://www.cs.tut.fi/~jkorpela/html/nobr.html)页面上，我解释说有一个“防弹”但尴尬的方法：使用 `<wbr><a class=wbr></a>`CSS 规则`.wbr:after { content: "\00200B"; }`。当您以编程方式生成页面时，这种笨拙的标记可能是可行的。

您应该仅在需要时插入此类提示。它们不应该用于自然语言中的单词。作为一种简单的方法，当您处理用于在页面上呈现的用户输入时，您可以将其拆分为技术意义上的“单词”（最大非空白字符串），然后，对于每个长度超过 N 个字符的“单词”，插入一个任何 K 个字符后的换行提示。需要根据您的布局选择参数 N 和 K。缺点：这会导致“紧急中断”，就好像字符串包含空格但不包含空格一样，这也可能任意破坏长的自然语言单词。

也许您可以在客户端做一些事情，首先运行 Hyphenator.js，然后处理文本内容，以便将文本内容在任何空白和任何软连字符 ( `\00AD`; 您需要确保仅在之后执行此操作Hyphenator.js 已经完成了它的工作）。然后您可以在片段上运行上面的算法，即为长片段添加换行提示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-25T15:23:44.980

还有比 Hyphenator 更新的[https://github.com/bramstein/hypher](https://github.com/bramstein/hypher)

# android - 为 Android 实现卫星菜单，XML 文件状态未找到资源

> ID：14679134
> 
> 赞同：3
> 
> 时间：2013-02-04T00:59:25.730
> 
> 标签：android

首先，我正在尝试使用这个库，并且正在尝试编译一个基本测试程序：[https ://github.com/siyamed/android-satellite-menu](https://github.com/siyamed/android-satellite-menu)

我已将项目保存到我的硬盘驱动器并将其导入 Eclipse。我还确保它使用 Java 1.6 进行编译并设置为“is library”。实际的库是在 Eclipse 中设置的，没有任何错误。

至于我的项目，我已按照 GitHub 上列出的说明进行操作，但我的 XML 文件中出现了这些错误：

```
Multiple annotations found at this line:
    - error: No resource identifier found for attribute 'satelliteDistance' in package 'android.view.ext'
    - error: No resource identifier found for attribute 'mainImage' in package 'android.view.ext'
    - error: No resource identifier found for attribute 'closeOnClick' in package 
     'android.view.ext'
    - error: No resource identifier found for attribute 'expandDuration' in package 
     'android.view.ext'
    - error: No resource identifier found for attribute 'totalSpacingDegree' in package 'android.view.ext' 
```

这是整个 XML 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout 
xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:sat="http://schemas.android.com/apk/res/android.view.ext"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<android.view.ext.SatelliteMenu
    android:id="@+id/menu"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="bottom|left" 
    android:layout_margin="8dp"
    sat:satelliteDistance="170dp"
    sat:mainImage="@drawable/ic_launcher"
    sat:totalSpacingDegree="90"
    sat:closeOnClick="true"
    sat:expandDuration="500"/>

</FrameLayout> 
```

还有我的 Java 源文件：

```
package com.example.test_satellite_menu;

import java.util.ArrayList;
import java.util.List;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.ext.SatelliteMenu;
import android.view.ext.SatelliteMenuItem;

public class MainActivity extends Activity {
SatelliteMenu menu = (SatelliteMenu) findViewById(R.id.menu);
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    List<SatelliteMenuItem> items = new ArrayList<SatelliteMenuItem>();
    items.add(new SatelliteMenuItem(4, R.drawable.ic_launcher));
    items.add(new SatelliteMenuItem(4, R.drawable.ic_launcher));
    items.add(new SatelliteMenuItem(4, R.drawable.ic_launcher));
    items.add(new SatelliteMenuItem(3, R.drawable.ic_launcher));
    items.add(new SatelliteMenuItem(2, R.drawable.ic_launcher));
    items.add(new SatelliteMenuItem(1, R.drawable.ic_launcher));
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}
} 
```

我已经确保我的测试项目包含了卫星菜单库，并且我使用了“修复项目属性”和“清理项目”，所以现在我没有想法了 :) 关于获取的任何反馈这工作会很棒。谢谢！

* * *

在通过 StackOverflow 阅读更多内容后找到了我自己的答案。不得不将 android.view.awt 包名更改为我当前项目的包名。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T07:41:18.857

在通过 StackOverflow 阅读更多内容后找到了我自己的答案。不得不将 android.view.awt 包名更改为我当前项目的包名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-05T11:28:43.237

```
<FrameLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:sat="http://schemas.android.com/apk/res/com.example.android.activities"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="bottom|center_horizontal"
    android:layout_weight="0.10"
    >

    <com.example.android.activities.SatelliteMenu
        android:id="@+id/satteliteMenu"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="bottom|center_horizontal"
        android:layout_margin="8dp"
        sat:closeOnClick="false"
        sat:expandDuration="500"
        sat:mainImage="@drawable/ic_launcher"
        sat:satelliteDistance="130dp"
        sat:totalSpacingDegree="180" />
</FrameLayout> 
```

编辑 xmlns 并在 /res/.. 之后添加您的项目包名称并清除您的项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-24T05:39:17.003

```
 SatelliteMenu menu = (SatelliteMenu) findViewById(R.id.satelliteMenu1);
     float distance = TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP,            170, getResources().getDisplayMetrics());
              menu.setSatelliteDistance((int) distance);
              menu.setExpandDuration(300);
              menu.setCloseItemsOnClick(true);
              menu.setTotalSpacingDegree(120);

    List<SatelliteMenuItem> items = new ArrayList<SatelliteMenuItem>();
    items.add(new SatelliteMenuItem(6, R.drawable.ic_action_search));
    items.add(new SatelliteMenuItem(5, R.drawable.ic_action_search));
    items.add(new SatelliteMenuItem(4, R.drawable.ic_action_search));
    items.add(new SatelliteMenuItem(3, R.drawable.ic_action_search));
    items.add(new SatelliteMenuItem(2, R.drawable.ic_action_search));
    items.add(new SatelliteMenuItem(1, R.drawable.ic_action_search));
    menu.addItems(items); 
```

# python - 获取匹配的数字以及结果

> ID：14679135
> 
> 赞同：0
> 
> 时间：2013-02-04T00:59:32.983
> 
> 标签：python, regex

我有这个正则表达式：

```
a_list = re.compile(r'\(\d+\)\s*\n').split(content) 
```

最后匹配行与（数字）的效果很好，但是我也需要得到那个数字。

我怎么做？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T05:02:33.973

使用`split`函数可能需要后视断言，不幸的是后视需要固定宽度的模式（这就是@Thunderforge 尝试过的）。我的解决方案使用`findall`：

```
re.findall(r'(.*?\(\d+\))\s*\n', content, re.S) 
```

笔记：

*   标志`re.S`使“。” 完全匹配任何字符，包括换行符
*   `.*?`表示非贪婪匹配

但是这个解决方案仍然存在缺陷。如果`content`不以数字和“\n”结尾，则最后一部分将被丢弃。我们可以通过列表推导或者生成器表​​达式来解决这个问题，即：

```
[i or j for i, j in re.findall(r'(.*?\(\d+\))\s*\n|(.+)', content, re.S)] 
```

或者：

```
(i or j for i, j in re.findall(r'(.*?\(\d+\))\s*\n|(.+)', content, re.S)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T01:11:38.310

如[Python 的正则表达式文档中](http://docs.python.org/2/library/re.html)所述，正则表达式上的 split 方法会拆分正由正则表达式模式的所有匹配项处理的字符串。现在，您的正则表达式正在捕获所有末尾有数字的匹配项，并在该匹配项上拆分字符串。所以 a_list 包含每行中包含数字的所有内容，除了数字及其周围的括号（和可选空格）。

假设您不想拆分所有换行符（仅通过制作您的 regex `'\n'`），您可以使用[否定的lookbehind](http://www.regular-expressions.info/lookaround.html#lookbehind)仅捕获与匹配之前另一个正则表达式的正则表达式的匹配，但不包括第二个正则表达式的匹配项结果。其格式是`(?<!x)y`当且仅当 x 短语正在处理它时，y 的所有实例都将被捕获，但 x 短语不会与它一起包含。

在这种情况下使用否定后视的唯一问题是它需要匹配固定数量的字符，但是您有`\d+`，它可以是任意数量的字符。幸运的是，您可以只删除`+`前导`\(`，以便检查正则表达式模式之前是否至少有一位数字，以便我们只检查`\d\)`; 之所以有效，是因为我们不在乎该行是否以`(10000)`or结尾`(1)`。

不幸的是，这会导致像被捕获的行，这与您最初拥有的正则表达式`(abc123)`不匹配。`\(\d+\)`如果您需要确保行以仅包含多位数字的括号结尾，您可能必须使用多个正则表达式操作。

这确实留下了 的问题`\s*`，因此您有两个选择。如果您知道末尾有多少个空格，您可以创建一个 or 表达式，例如`(\d|\d\s)`，或者您可以只`\s*`在匹配中包含换行符，从而也删除任何尾随空格。

假设您采用后一种选项，您的示例将如下所示`(?<!\d\))\s*\n`，这将导致 a_list 包含所有在末尾包含数字的行，以及数字本身（及其周围的括号）。

# javascript - RegEx 模式不适用于 AJAX 响应

> ID：14679136
> 
> 赞同：0
> 
> 时间：2013-02-04T00:59:34.053
> 
> 标签：javascript, css, regex

**更新**

我需要你的帮助来打败正则表达式！我以 AJAX 响应的形式获取外部 CSS 文件，如下所示：

```
$.when($.get("style.css")).done(function(response) {
    var myCSS = response;
    var patt = new RegExp("#mydiv(.*?)}","g");
    var match = myCSS.match(patt);
    alert(match);  
} 
```

我在这里想要实现的是我想得到从*#mydiv*到最后一个右括号*}*的所有内容，但由于某种原因*alert(match)*返回*null*。

最烦人的是当我将模式更改为：

```
var patt = new RegExp("#mydiv(.*?){","g"); // <-- Changed } to { 
```

*alert(match)*返回我应该返回的内容 --> *#mydiv .mylink {*

或者当我以这样的简单字符串形式表示相同的 CSS 时：

```
$.when($.get("style.css")).done(function(response) {
    var myCSS = "The same style.css but copy-pasted here";
    var patt = new RegExp("#mydiv(.*?)}","g");
    var match = myCSS.match(patt);
    alert(match);  
} 
```

按预期使用我的初始模式。有什么想法我在这里想念什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T01:03:51.600

是正则表达式上的`}`保留字符，您必须使用`\`. 我认为你所追求的正则表达式是`"#mydiv(.*)\}"`或者`"#mydiv(.*)\\}"`如果它`\`本身必须被转义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T12:16:07.503

好的，我想我已经找到了解决方案。

```
var patt = new RegExp("#" + myID + "(\n|.)*?}","g"); 
```

在疯狂的谷歌搜索、stackoverflow 和整晚与社区讨论之后。我发现问题在于 JS Regex 无法将其识别`.`为新行，因此您需要`(\n|.)`替换。

我不确定这个解决方案是否通用，并且会在不同的 CSS 文件上对其进行测试。谢谢评论我帖子的小伙伴们！我真的很感谢你的合作！

**来源： http:** [//goo.gl/1W55l](http://goo.gl/1W55l)的尽头

# mysql - Django 如何确定我的数据库是否支持事务？

> ID：14679137
> 
> 赞同：2
> 
> 时间：2013-02-04T00:59:44.047
> 
> 标签：mysql, django, transactions, innodb

在我的开发机器上，我可以使用`transaction.commit_on_success`and `transaction.commit_manually`，但在我的生产机器上，装饰器被忽略了，Django 的行为就好像我的数据库不支持事务一样。这发生在我的视图函数和我在 Django shell 中编写的琐碎测试函数中：

```
>>> from django.db import transaction
>>> from myapp.models import *
>>> @transaction.commit_on_success
... def blah():
...   MyModel.objects.create(name="wazzup")
...   raise Exception
... 
>>> blah()
Traceback (most recent call last):
  File "<console>", line 1, in <module>
  File "/opt/local/python-environments/myenv/lib/python2.6/site-packages/django/db/transaction.py", line 209, in inner
    return func(*args, **kwargs)
  File "<console>", line 4, in blah
Exception
>>> MyModel.objects.all()       
[<MyModel: wazzup>] 
```

如果我实例化模型对象然后调用`save`它们而不是仅仅调用`create`管理器，也会发生同样的事情。 `commit_manually`以同样的方式失败。总而言之，它似乎`autocommit`卡在了 on 位置。

但仅限于生产机器上。在我的 MacBook Pro 上一切正常。

两种环境都使用 MySQL，所有表都在 InnoDB 上运行。Django 1.4.3，Python 2.6.6。

对于我在 settings.py、我的 MySQL 配置或其他任何地方可能做错的任何想法，我将不胜感激——我正在努力应对任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-25T14:18:13.507

它是这样完成的：

```
from django.db import connection
if connection.features.supports_transactions:
    # We _do_ have transaction support.
else:
    # We _don't_ have transaction support. 
```

# wpf - 如果我创建一个 ViewModel 我需要以 MVVM 模式为它创建模型，这是真的吗？

> ID：14679146
> 
> 赞同：2
> 
> 时间：2013-02-04T01:01:37.643
> 
> 标签：wpf, mvvm, model, menu, viewmodel

如果我创建一个 ViewModel 我需要以 MVVM 模式为它创建模型，这是真的吗？

例如，我的任务是在窗口顶部的 WPF 应用程序中创建简单菜单。

这是我的视图**MainWindow.xaml**

```
<Window x:Class="AppMvvm.View.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
    xmlns:vm="clr-namespace:AppMvvm.ViewModel"
    Title="{Binding DisplayName}" Height="350" Width="525"
    WindowStartupLocation="CenterScreen">

<Window.Resources>
    <Style x:Key="MenuItemStyle">
        <Setter Property="MenuItem.Command" Value="{Binding Command}" />
    </Style>
    <HierarchicalDataTemplate DataType="{x:Type vm:MenuItemViewModel}"
                              ItemsSource="{Binding Children}">
        <ContentPresenter Content="{Binding DisplayName}" />
    </HierarchicalDataTemplate>
</Window.Resources>

<DockPanel>
    <DockPanel DockPanel.Dock="Top">
        <Menu ItemsSource="{Binding MenuItems}" ItemContainerStyle="{StaticResource MenuItemStyle}"/>
    </DockPanel>

</DockPanel>
</Window> 
```

这是我的**MenuItemViewModel.cs的****ViewModel**

 **```
namespace AppMvvm.ViewModel
{
    public class MenuItemViewModel : ViewModelBase
    {

        public MenuItemViewModel(string menuItemName, IList<MenuItemViewModel> children)
        {
            base.DisplayName = menuItemName;
            this.Children = children;
        }

        public MenuItemViewModel(string menuItemName)
            : this (menuItemName, children: null)
        {
        }

        public MenuItemViewModel(string menuItemName, ICommand command)
        {
            base.DisplayName = menuItemName;
            this.Command = command;
        }

        public IList<MenuItemViewModel> Children { get; private set; }

        public ICommand Command { get; private set; }
    }
} 
```

我的类**WorkspaceViewModel.cs**是绑定到视图的**MainWindowViewModel.cs**的基类

```
namespace AppMvvm.ViewModel
{
    using Helpers;

    public abstract class WorkspaceViewModel : ViewModelBase
    {
        #region Fields
        private IList<MenuItemViewModel> _menuItems;
        private RelayCommand _closeCommand;
        #endregion

        #region MenuItems
        public IList<MenuItemViewModel> MenuItems
        {
            get
            {
                if (_menuItems == null)
                    _menuItems = CreateMenuItems();
                return _menuItems;
            }
        }

        List<MenuItemViewModel> CreateMenuItems()
        {
            return new List<MenuItemViewModel>
                {
                    new MenuItemViewModel("File", CreateFileMenuItems()),
                    new MenuItemViewModel("Tools"),
                    new MenuItemViewModel("About")
                };
        }

        #region CreateFileMenuItems & Commands
        List<MenuItemViewModel> CreateFileMenuItems()
        {
            return new List<MenuItemViewModel>
                {
                    new MenuItemViewModel("New"),
                    new MenuItemViewModel("Exit", CloseCommand)
                };
        }

        public ICommand CloseCommand
        {
            get
            {
                if (_closeCommand == null)
                    _closeCommand = new RelayCommand(p => Close());
                return _closeCommand;
            }
        }

        void Close()
        {
            Application.Current.Shutdown();
        }
        #endregion

        #endregion
    }
} 
```

以这种方式这样做是否正确，或者我需要为 MenuItemViewModel 类创建一个模型并以另一种方式进行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T01:10:15.897

是和不是。

MVVM 模式本质上规定您将拥有一个模型，但这并不意味着您需要完全实现 MVVM。

您决定做什么将取决于您的项目以及您对 MVVM 的理解（或解释）。在此之前，我采用了一种方法，即 MVVM 与 MVC 的组合——即它有一个 V/VM，然后有一个控制器位于其后面（控制器几乎就像一个超级复制模型）。如果您有一个非常简单的应用程序，那么仅仅为了模式纯度而将其复杂化是没有意义的 - 如果适合您的目的，请只使用视图和视图模型。

要记住的是，模式只是如何做某事的配方或处方。没有规则说你应该严格遵守它，在许多情况下你可能会发现你做不到，因此你必须适应一种模式或使用多种模式——关键是要保持与你所做的事情的一致性。**

# css - 样式化 iframe

> ID：14679160
> 
> 赞同：2
> 
> 时间：2013-02-04T01:03:14.853
> 
> 标签：css, html, iframe

我正在尝试在 ASP.NET MVC 页面上显示两个网站。第一个网站应该出现在上部 130 左右像素，第二个网站应该用完所有剩余的垂直空间。两个网站都应该用完浏览器的整个宽度。

[这里](http://freewebfiles.com/Site.aspx?url=http://www.soundfilesonline.com)有一个我想要的示例，但它使用带有`<frame>`标签的框架集，现在[已弃用](http://paulwallas.com/html5-obsolete-and-deprecated-elements/)。

所以我开始了一个[jsFiddle](http://jsfiddle.net/LUZeg/)来尝试安排两个`<iframe>`标签。我已经拥有了大部分，但无法让第二个网站用完所有剩余的垂直空间。（除非绝对必要，否则我宁愿不使用 jQuery。）

有人知道丢失的部分吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T01:27:24.237

通过设置内容框架的绝对位置，您可以将其定位在距顶部 130 像素的位置，即标题的高度。然后也将其从底部设置为 0。这会产生拉伸它以填充视口剩余高度的效果。

```
#contentdiv {
    width: 100%;
    position:absolute;
    top:130px;bottom:0;
}
#contentframe {width: 100%;height:100%;
} 
```

这是小提琴

[http://jsfiddle.net/bAfBs/](http://jsfiddle.net/bAfBs/)

# linq - 任何 Linq Nhibernate 搜索？

> ID：14679163
> 
> 赞同：1
> 
> 时间：2013-02-04T01:03:41.793
> 
> 标签：linq, nhibernate, lucene.net, nhibernate-search

我想使用 lucene.net 来搜索数据。我阅读了结合 lucene.net 和 nhibernate 进行搜索的 nhibernate 搜索。

但是我使用流利的 nhibernate，我喜欢使用 linq。我认为使用流利的 nhibernate 不会有问题，但我似乎找不到任何将 linq 与 nhiberante 搜索一起使用的示例。

我可以使用 linq 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-04T09:35:29.857

您可以同时使用 NHibernate.Search 和 FluentNHibernate，您只需在创建 ISessionFactory 时连接 NHibernate.Search 侦听器。

**个人意见先！**

我不喜欢使用 linq 来使用全文搜索功能，这只是试图将真实且通常功能强大的界面隐藏在愚蠢的 api 后面，并且通常会出现问题或在此过程中丢失。（一个例子是带有 simple 的 linq-to-sql `where user.Alias == "sisve"`，它会自动转换为 sql `WHERE Alias = 'sisve'`。需要一些详细的知识才能理解 C# 中区分大小写的比较在 SQL Server 的标准安装中变成了不区分大小写的比较。 )

NHibernate 和 Lucene 都是强大的库，但我会说将它们分开。自己构建 Lucene 索引（您可以使用自定义侦听器来做到这一点，就像 NHibernate.Search 侦听器一样），然后自己查询它。这使您可以更好地了解两个系统的工作方式，并且您可以更轻松地在此基础上实现更好的搜索（您的意思是，方面，自定义增强，...）

# java - 如何将数据从android发送到服务器然后从服务器发送到android

> ID：14679173
> 
> 赞同：-2
> 
> 时间：2013-02-04T01:05:29.467
> 
> 标签：java, android

我想构建一个应用程序将数据从`Android`客户端发送到`Java`本地主机服务器，然后将重播从服务器返回到客户端，我该如何构建服务器？并发送数据pelase？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T01:06:40.837

1.  在 Android 上：你必须设置服务器`IP`，所以如果你在模拟器上工作，你必须使用`10.0.2.2`，如果你想在使用 WIFI 的真实设备上尝试它，那么你必须使用你的 PC 的 IP。
2.  在安卓上：

```
URI website;
try {
    HttpClient client = new DefaultHttpClient();
    website = new URI("http://"+ IP+ ":8080/ServerName/ServletName");
    HttpPost request = new HttpPost();
    request.setHeader("Data Name", Data Value);
    request.setURI(website);
    HttpResponse response = client.execute(request);
    // Response From Server
    Header[] headers = response.getAllHeaders();
    for (int i = 0; i < headers.length; i++) {
    Header h = headers[i];
    }
    } catch (URISyntaxException e) {
         e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
   } 
```

1.  构建服务器：`Eclipse`文件 -> 新建 -> 动态 Web 项目。
2.  创建 Servlet：在服务器上，右键单击`src`文件夹，添加你的包 -> 新的 servlet。
3.  在服务器上：在方法中`doPost`

```
String value = request.getHeader("Data Name");
response.setHeader("Response1", "Value"); 
```

### 笔记

我将向您展示如何使用响应和请求的标头发送数据，您可以使用`inputstream`和`outstream`处理大量数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T01:12:05.050

您可以在服务器端创建一个 Web 服务并从 android 客户端调用它来发送和接收数据，或者您编写一个 servlet

# azure - 即使复制本地集，Azure 包也不包括链接项目 DLL

> ID：14679174
> 
> 赞同：17
> 
> 时间：2013-02-04T01:05:36.043
> 
> 标签：azure, package, filenotfoundexception, azure-deployment, assembly-references

我有一个包含 4 个项目的 Azure 解决方案。（Windows 8 上的 VS 2012，Azure 工具 1.8）

1.  具有通用代码的核心项目
2.  Web 角色前端
3.  服务数据的服务角色（来自 SQL Azure DB）
4.  计划任务的工作角色

所有角色项目都使用 copy local = true... 标准内容引用核心项目。

web 角色和 worker 角色工作正常，但我的服务角色一直卡在 Initializing - Starting - Recycling 循环中。当我浏览到该服务时，我得到了`Could note load file or assembly FileNotFoundException`. 果然，RDP 到服务器和 DLL 都不见了。

在本地查看包文件，其他角色包括缺少的 DLL，但不包括服务角色。

如果我使用 VS 将服务角色（不是 azure publish）发布到本地文件系统，*则*包含核心 DLL，证明 VS 设置对于复制本地是正确的。

VS 中是否有任何其他方法可以影响添加到 Azure 部署包中的文件，或者是否有一种简单的方法可以在不使用 VS 的情况下编写包的创建脚本？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-07T10:40:47.307

正如我在评论中所写，我的情况与您相同（Windows 7 和 8、VS 2012、Azure SDK 1.8）。*Copy Local*设置为*true*，但是当我打开 * *.cspkg包时，* *approot*文件夹中缺少引用的程序集。我做了什么，我创建了新的 Worker Role 项目并从旧项目中复制了代码。现在包括所有组件。

更新：在我的情况下，上述解决方案并不是真正必要的。我真正的问题是我的 Web 角色不小心引用了我的 Worker Role 程序集。当我删除这个不必要的引用时，工作角色获得了包中的所有程序集。在我看来，这种行为是错误的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-14T22:47:20.510

我可以确认安东在以“更新”开头的段落中的回答中所描述的内容：

我有一个名为“Utils”的类库项目、一个“WorkerRole”和一个“WebRole”项目。WorkerRole 和 WebRole 都引用了 Utils。此外，WebRole 引用了 WorkerRole - 因为后者包含一些用作服务总线消息的类。

结果是 Utils.dll 没有包含在云服务的 .cspkg 文件中，并且 Visual Studio 中没有错误消息。在将消息类放入项目 Utils 并删除引用 WebRole->WorkerRole 之后，一切都很好了。

似乎确实是一个错误。

# bash - 为什么 ssh 在没有 -t 的情况下等待我的子 shell，然后用 -t 杀死它们？

> ID：14679178
> 
> 赞同：16
> 
> 时间：2013-02-04T01:06:11.460
> 
> 标签：bash, ssh, tty, subshell

我有一个 bash 脚本 start.sh，它看起来像这样：

```
for thing in foo bar; do
    {
        background_processor $thing
        cleanup_on_exit $thing
    } &
done 
```

这就是我想要的：我运行 start.sh，它以代码 0 退出，两个子 shell 在后台运行。每个子shell运行`background_processor`，当它退出时，它运行`cleanup_on_exit`。即使我退出最初运行 start.sh 的终端（即使那是 ssh 连接），这也有效。

然后我尝试了这个：

```
ssh user@host "start.sh" 
```

这有效，除了`start.sh`退出之后，ssh 显然还等待子shell 退出。我真的不明白为什么。退出`start.sh`后，子shell 成为pid 1 的子shell，甚至没有为它们分配tty ......所以我不明白它们是如何与我的ssh 连接相关联的。

我后来试过这个：

```
ssh -t user@host "start.sh" 
```

现在进程有一个分配的伪终端。现在，我发现 ssh 确实会在退出后立即`start.sh`退出，但它也会杀死子进程。

我猜想在后一种情况下正在向子进程发送 SIGHUP，所以我这样做了：

```
ssh -t user@host "nohup start.sh" 
```

这确实有效！所以，我有一个解决我的实际问题的方法，但我想在这里掌握 SIGHUP/tty 东西的微妙之处。

总之，我的问题是：

1.  为什么 ssh（没有 -t）即使在`start.sh`退出后仍等待子进程，即使它们的父 pid 为 1？
2.  为什么 ssh (with -t) 会杀死子进程，显然是使用 SIGHUP，即使当我从终端运行它们并注销该终端时不会发生这种情况？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-14T02:16:11.397

我想我现在可以解释了！我必须通过阅读[The TTY Demystified](http://www.linusakesson.net/programming/tty/)来了解一下什么是会话和流程组。

> 1.  为什么即使在 start.sh 退出后，ssh（没有 -t）也会等待子进程，即使它们的父 pid 为 1？

因为没有 tty，ssh 通过管道（然后由子进程继承）连接到 shell 进程的 stdin/stdout/stderr，并且我正在使用的 OpenSSH 版本（OpenSSH_4.3p2）等待这些套接字关闭之前退出。一些早期版本的 OpenSSH 的行为方式并非如此。有一个很好的解释，有理由，[here](http://www.snailbook.com/faq/background-jobs.auto.html)。

相反，当使用交互式登录（或`ssh -t`）时，ssh 和进程正在使用 TTY，因此无需等待管道。

我可以通过重定向流来恢复我想要的行为。此变体立即返回：`ssh user@host "start.sh < /dev/null > /dev/null 2>&1"`

> 2.  为什么 ssh (with -t) 会杀死子进程，显然是使用 SIGHUP，即使当我从终端运行它们并注销该终端时不会发生这种情况？

因为 bash 以非交互模式启动，这意味着默认情况下禁用作业控制，因此子进程与父 bash 进程（即会话负责人）位于同一进程组中。当父 bash 进程退出时，内核将 SIGHUP 发送到其进程组（位于前台），如下所述`setpgid(2)`：

> 如果会话有一个控制终端，... [and] 会话领导者退出，SIGHUP 信号将被发送到控制终端的前台进程组中的每个进程。

相反，当使用交互式登录时，bash 处于交互模式，这意味着默认情况下启用作业控制，因此子进程进入单独的进程组，并且在我退出时永远不会收到 SIGHUP。

我可以通过`set -m`在 bash 中启用作业控制来恢复我想要的行为。如果我添加`set -m`到`start.sh`ssh 退出时，孩子们将不再被杀死。

谜团解开了:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T01:52:30.770

我怀疑（但我假设）当没有 tty 时，bash 会将 SIGHUP 传递给您的分叉进程，该进程本身正在处理信号，并悄悄地忽略它并继续占用 SSH 会话。

然而，在你和进程之间有一个 tty，tty 驱动程序正在拦截 SIGHUP，意识到它已经失去了用户，并在没有 ssh 会话作为父进程的情况下分叉自己运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-23T15:17:09.637

在您不希望此 SIGHUP 发生的任何呼叫前加上“nohup”。

# ios - 放置“[NSNotificationCenter defaultCenter] addObserver”的最佳位置在哪里

> ID：14679184
> 
> 赞同：3
> 
> 时间：2013-02-04T01:07:08.253
> 
> 标签：ios, nsnotificationcenter

我习惯将“[NSNotificationCenter defaultCenter] addObserver”放在 init 方法中。而且我已经看到很多其他人放入 viewDidLoad。是否有任何说明或最佳实践？

梁

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-14T19:19:44.123

两个问题要问自己：

1.  这个通知可以在 UIViewController 被初始化和它的视图被加载之间触发吗？

2.  如果可以在这些事件之间触发通知，那么这对您的 UIViewController 的状态是否重要？

这些问题将引导您了解在哪个方法中调用 addObserver。除此之外没有特别的“最佳实践”：

*只在需要的时候听。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-14T19:07:12.163

我会说老实说这并不重要。我的观点是在 viewDidLoad 中是最好的，但就像@EricS 所说，如果你想在视图没有显示时得到通知，那么这将不完全有效。所以这真的取决于你喜欢如何使用它，以及你什么时候想要收到这些事件的通知

# php - 在 IE 兼容模式下，第一个帖子链接不起作用？

> ID：14679186
> 
> 赞同：0
> 
> 时间：2013-02-04T01:07:21.487
> 
> 标签：php, html, wordpress, web

我在我的一个网站上遇到了一个非常令人沮丧的问题，我一生都无法弄清楚是什么原因造成的——所以我希望这里的某个人可能能够为我指出它。

出于某种奇怪的原因，在 IE 的兼容性视图中，网站上画廊的第一个链接不是从整个图像链接，而是从标题链接。预期的行为（在其他浏览器中看到）是无论单击该图像的哪个位置，它都应该链接。

为了进一步增加混乱，第一个之后的其余链接都可以工作。更令人困惑的是，将鼠标悬停在第一个链接上似乎就像一个链接（它显示链接标题，甚至是超链接；它只是没有指向任何地方）。

如果我描述得不够好，这里有一张图片说明了这个问题： ![红色圆圈不链接，蓝色圆圈](../Images/fde843efbb41a00b7e602a54549bb5bd.png) 网站地址是[http://kaitlynpaynephotography.com](http://kaitlynpaynephotography.com)

我目前正在使用 Wordpress 作为网站的引擎，但我看不出这是问题所在。我目前用于主循环的代码是：

```
<?php while ( have_posts() ) : the_post() ?>
    <article id="post-<?php the_ID(); ?>" <?php post_class('portfolio-preview'); ?>>
        <script type="text/javascript">
            <!--//--><![CDATA[//><!--
            document.write( '<div class="fade-wrapper">' );
            //--><!]]>
        </script>
        <a href="<?php the_permalink(); ?>" title="<?php the_title_attribute() ?>" rel="bookmark">
            <?php
            if ( has_post_thumbnail() ) {
                the_post_thumbnail(array(215,280), array('title' => ''));
            }?>
            <h2 class="gallery-title"><?php the_title(); ?></h2>
        </a>
        <script type="text/javascript">
            <!--//--><![CDATA[//><!--
            document.write( '</div><!-- .fade-wrapper -->' );
            //--><!]]>
        </script>
    </article><!-- #post-<?php the_ID(); ?> -->
<?php endwhile; ?> 
```

我正在使用 HTML5，因此在 a 中包含标题和 p 标签是有效的（据我所知），所以我认为这也不是问题。

我只是无法弄清楚它是什么。不仅如此，我不确定我是否应该为这样一个小问题而烦恼；但同时，我想尝试让它尽可能跨浏览器兼容。

有什么建议或想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T09:22:57.293

正如我在评论中提到的，我需要查看生成的 HTML 源代码（包括第一行和 DTD），但我最初的想法是这些`script`块看起来很丑，尤其是巨大的评论。IIRC 这种风格的评论早在 XHTML 验证的早期就被提出来了，而且真的没有必要——它将验证置于简单的解析之上。也许IE“兼容模式”让他们窒息。

也就是说，我也不太喜欢 document.writes，所以我建议你重组如下：

```
<?php while ( have_posts() ) : the_post() ?>
    <article id="post-<?php the_ID(); ?>" <?php post_class('portfolio-preview'); ?>>
        <div class="fade-if-js">
        <a href="<?php the_permalink(); ?>" title="<?php the_title_attribute() ?>" rel="bookmark">
            <?php
            if ( has_post_thumbnail() ) {
                the_post_thumbnail(array(215,280), array('title' => ''));
            }?>
            <h2 class="gallery-title"><?php the_title(); ?></h2>
        </a>
        </div>
    </article><!-- #post-<?php the_ID(); ?> -->
<?php endwhile; ?> 

<!-- rest of your HTML content -->

<script type="text/javascript">
    // <![CDATA

    // this uses jQuery, but use getElementsByClassName, etc... if you prefer plain JS. If using jQuery, you may need to use it in noconflict mode...
    $(function() {
        $('.fade-if-js').addClass('fade-wrapper');
    });

    // ]]>
</script> 
```

如果 JavaScript 可用，这会将 fade-wrapper 类添加到现有的 DOM 元素中，而不是将元素直接写入页面。因为我想象淡入淡出动画会使用 DOM 方法，这应该使后备更合适。

# iis - IIS 重写规则未按预期运行

> ID：14679187
> 
> 赞同：0
> 
> 时间：2013-02-04T01:07:28.777
> 
> 标签：iis, url-rewriting, reverse-proxy

我正在尝试将`http://www.domain.com/some/url(.*)`（后面的所有内容`/url`）路由到`http://some.other.com/some/url{R:1}`（其中 {R:1} 成为匹配 url 中 (.*) 的内容。

我尝试了以下规则和各种变体，但似乎都没有正确重写：

```
<rule name="Reverse Proxy" stopProcessing="true">
    <match url="^some\/url\/(.*)" />
    <action type="Rewrite" url="http://some.other.com/some/url/{R:1}" />
</rule> 
```

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T02:34:02.607

您的正则表达式可能是问题所在。
如果您想在之后重定向所有内容，请`some/url`使用：

```
<rule name="Reverse Proxy" stopProcessing="true">
    <match url="^some/url(.+)$" />
    <action type="Rewrite" url="http://some.other.com/some/url/{R:1}" />
</rule> 
```

如果您想在之后重定向所有内容`some/url/`并保留路径，那么您可以使用：

```
<rule name="Reverse Proxy" stopProcessing="true">
    <match url="^some/url/(.+)$" />
    <action type="Rewrite" url="http://some.other.com/{R:0}" />
</rule> 
```

您可以使用 IIS 测试模式工具轻松测试您的模式。
[http://www.iis.net/learn/extensions/url-rewrite-module/testing-rewrite-rule-patterns](http://www.iis.net/learn/extensions/url-rewrite-module/testing-rewrite-rule-patterns)

**编辑**

我为测试第二条规则所做的工作：

*   设置`test.com`域以重定向到我的服务器（使用主机文件）
*   使用 IIS 设置规则如下：![规则](../Images/2dc8165541688222edd3ffa6800b8fb1.png)

在文件中给出以下配置`web.config`：

```
<rule name="test" stopProcessing="true">
    <match url="^some/url/(.+)$" />
    <action type="Rewrite" url="http://www.google.com/{R:0}" />
</rule> 
```

*   使用`http://test.com/some/url/google`浏览器访问： ![铬合金](../Images/61f325f5b22761370b78405a5e91d3d8.png)

它表明 URL 是使用 Google 作为目标重写的，并将首先请求的路径作为参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-07T02:15:43.180

我为此苦苦挣扎了好几天。我尝试过的10-20重写规则，失败的原因是：

1.  如果您尝试在 VisualStudio(2012/2013/2015) 中进行重定向，则它无法在实际的 IIS 托管站点中工作，因为 VS 在调试时生成自己的证书（当您在项目属性中指定时）以及权限问题由 VS 处理。

2.  IIS 中的站点应具有有效的（没有从启用 thawte/verisign 的网站复制粘贴文件，甚至没有由 snk.exe 生成的自签名）证书；请不要假设没有有效的证书就可以。（IIS 8 和 10 中的自签名（也称为开发证书）对我有用；购买和自签名之间的区别在[这里](https://www.sslshopper.com/article-how-to-create-a-self-signed-certificate-in-iis-7.html)）。应该安装证书，因为 IIS 可以有多个证书，但每个网站都应该使用自己单独的证书。

3.  站点绑定应该同时具有 http(80) 和 https(443)

4.  现在重定向语法出现了；有几个在互联网上；您可以轻松获得正确的正则表达式

5.  故事的另一面也必须考虑到可以使用 MVC 4/5 中的 Global.asax->Application_BeginRequest 或 ActionFilter 来处理重定向。

    使用 config 或以编程方式进行重定向可能会导致不同的错误（`TOO_MANY_REDIRECTS`在`<validation validateIntegratedModeConfiguration="false" />` `<modules runAllManagedModulesForAllRequests="true">`web.config 中）

6.  我面临的另一个问题是从 http->https 重定向工作正常，但我无法从 https->http 恢复；

7.  从可用选择中考虑您的场景（通常不应混合）

    ```
    HttpRedirect::
    Request 1 (from client):    Get file.htm
    Response 1 (from server): The file is moved, please request the file newFileName.htm
    Request 2 (from client):    Get newFileName.htm
    Response 2 (from server): Here is the content of newFileName.htm

    UrlRewrite::
    Request 1 (from client):     Get file.htm
    URL Rewriting (on server):   Translate the URL file.htm to file.asp
    Web application (on server): Process the request (run any code in file.asp)
    Response 1 (from server):    Here is the content of file.htm (note that the client does not know that this is the content of file.asp) 
    ```

是否需要 HttpRedirect 或 UrlRewrite

[https://weblogs.asp.net/owscott/rewrite-vs-redirect-what-s-the-difference](https://weblogs.asp.net/owscott/rewrite-vs-redirect-what-s-the-difference)

# oauth - 如何在 IBM Connections 3.0.1 中为 LDAP 目录之外的用户实现注册？

> ID：14679189
> 
> 赞同：1
> 
> 时间：2013-02-04T01:07:53.317
> 
> 标签：oauth, ldap, oauth-2.0, ibm-connections

让我们考虑基于以下内容的 IBM Connections 3.0.1 的部署：

> *   TDI 7
> *   DB2 9.7.2
> *   WebSphere 服务器网络部署 V7.0
> *   IBM HTTP 服务器 7.0.0.11

它与用于验证用户身份的 Active Directory 相连。我想通过引入 LDAP 中不存在的用户的注册来扩展 Connections 的功能。有可能这样做吗？如果是这样，是否可以将 OAuth 用于该任务？文档指定了对 Connections 4 的 OAuth 支持，但没有说明 3.x 版本。如果 3.x 版本无法使用 OAuth，请详细说明在 Connections 4 中实现以下功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T18:44:52.717

Connections 4 中的 OAuth 支持用于从外部访问 Connections 数据。一个例子是 Domino 9 Social Edition，它为 Notes 和 iNotes 使用 Embedded Experience 和 Updates 小部件。这些小部件的配置需要由 Connections 生成 OAuth 密钥并将其输入到这些小部件的代理设置中。通过这种方式，Notes 和 iNotes 用户可以从 Connections 访问内容。

此时，Connections 用户要求允许从其组织外部访问 Connections。然而这个问题还没有解决。在 Greenhouse Connections 社区中，您会在构思博客中找到一些关于它的想法。到目前为止，这些想法都没有被标记为已批准。然而，仍然希望看到它在 4.5 中实现，预计将于 2013 年 3 月发布。IBM 还允许外部人员访问其 IBM 客户体验套件中的 Connections，您可以在其中创建一个可供外部人员访问的社区。我个人没有使用此产品的经验，但看过 IBM Connect 2012 的 IBM 演示。我计划在获得足够的计算能力来安装套件时使用 POC。

# css - 以一致的方式制作指南针顺序精灵

> ID：14679196
> 
> 赞同：2
> 
> 时间：2013-02-04T01:08:46.780
> 
> 标签：css, jquery-ui, sass, compass-sass

如何以一致的方式制作 Compass 顺序精灵，以便为悬停状态提供单独的工作表？

我正在使用 Compass 的精灵表工具，如下所示：

```
@import "ui-icon/*.png";
@include all-ui-icon-sprites; 
```

这使得一个很好的精灵表像：{

```
.ui-icon-add {
  background-position: 0 -5344px; }

.ui-icon-alert {
  background-position: 0 -2352px; }

...etc... 
```

但是，如果我将源精灵切换为悬停颜色，它会重新生成生成的表格：

```
.ui-icon-add {
  background-position: 0 -5376px; }

.ui-icon-alert {
  background-position: 0 -2320px; }

...etc... 
```

我正在使用这样的悬停状态（基于 jQuery UI）：

```
.ui-icon {
    width: 16px;
    height: 16px;
    display: block;
    background-image: url('ui-icons.png');
}

.ui-state-hover .ui-icon {
    background-image: url('ui-icons-hover.png');
} 
```

但由于指南针不一致，因此悬停时图标会有所不同。

*（我知道 Compass 支持`_hover`后缀，但我更希望它像 jQuery UI 那样生成它们。）*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T18:57:59.713

尝试设置魔法变量：

```
$ui-icon-sprite-layout: horizontal; 
```

对于您的两个图标精灵。根据我的经验，水平是唯一一种每次都以相同顺序生成两个具有相同图标的精灵的布局模式。

另请参阅 GitHub 上的 Compass 问题：[https ://github.com/chriseppstein/compass/issues/690](https://github.com/chriseppstein/compass/issues/690)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T19:10:11.050

您可以使用`@each`循环以您想要的方式创建映射。缺点是它要求您遵循 and 的命名约定`sprite`，`hover-sprite`以及手动编辑`$icons`变量。

**目录结构**

```
├── ui-icon
│   ├── add.png
│   ├── alert.png
│   ├── hover-add.png
│   └── hover-alert.png
└── ui-icon-s38eb55a811.png 
```

**SCSS**

```
import "compass/utilities/sprites";

@import "ui-icon/*.png";
$icons:   add alert;

  @each $icon in $icons {
    .ui-icon-#{$icon} {
      @include ui-icon-sprite($icon);
    }
    .ui-icon-hover-#{$icon}{
      @include ui-icon-sprite("hover-" + $icon)
    }
} 
```

**CSS**

```
.ui-icon-add {
  background-position: 0 0;
}

.ui-icon-hover-add {
  background-position: 0 -64px;
}

.ui-icon-alert {
  background-position: 0 -32px;
}

.ui-icon-hover-alert {
  background-position: 0 -96px;
} 
```

# javascript - Chrome 扩展评估替代方案

> ID：14679197
> 
> 赞同：1
> 
> 时间：2013-02-04T01:08:52.390
> 
> 标签：javascript, google-chrome-extension, eval

我已经构建了一个 Chrome 扩展程序，它使用特定于网站的脚本来解析来自不同网站的数据。我想添加一个选项页面，用户可以在其中为最初不受支持的网站编写（和存储）他自己的脚本。Chrome 不允许我评估字符串，我可以使用什么替代路线？我认为 Tampermonkey 正在做类似的事情，但我不知道怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T11:05:28.623

请参阅文章：[“在 Chrome 扩展程序中使用 eval。安全。”](http://developer.chrome.com/apps/sandboxingEval.html)

它描述了如何拥有一个沙盒 iframe，您可以在其中运行`eval`并使用消息传递与您的扩展程序通信结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T13:11:35.540

也许 [脚本注入](http://developer.chrome.com/extensions/tabs.html#method-executeScript)可以帮助你

# python - 如何从ip地址中删除最后一位

> ID：14679198
> 
> 赞同：2
> 
> 时间：2013-02-04T01:09:05.560
> 
> 标签：python, ip-address

如何在 Python 中将 IP 地址的最后*n*位归零？我更喜欢使用标准库的解决方案，很可能是[ipaddress](http://docs.python.org/3.3/library/ipaddress)。

一些`strip_addr`测试用例看起来像：

```
assert strip_addr(u'1.2.3.4', 24) == u'1.2.3.0'
assert strip_addr(u'2001:1234:f678::9', 33) == u'2001:1234:8000::' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T01:43:47.060

如何使用[接口网络对象](http://docs.python.org/3.3/howto/ipaddress.html#inspecting-address-network-interface-objects)？

```
import ipaddress

def strip_addr(ip, bits):
    nwif = ipaddress.ip_interface(u'%s/%s' % (ip, bits))
    return str(nwif.network.network_address)

assert strip_addr(u'1.2.3.4', 24) == u'1.2.3.0'
assert strip_addr(u'2001:1234:f678::9', 33) == u'2001:1234:8000::' 
```

# scala - 带有 CloudBees Play2 部署的“502 Bad Gateway”（Java 和 Scala）

> ID：14679201
> 
> 赞同：3
> 
> 时间：2013-02-04T01:09:33.737
> 
> 标签：scala, playframework, playframework-2.0, sbt, cloudbees

我按照此处描述的说明将我的 Play2 应用程序部署到 CloudBees：[https ://developer.cloudbees.com/bin/view/RUN/Playframework](https://developer.cloudbees.com/bin/view/RUN/Playframework)

我的 Build.scala 设置如下所示：

```
val main = PlayProject(appName, appVersion, appDependencies, mainLang = JAVA)
        .settings(cloudBeesSettings :_*)
        .settings(CloudBees.applicationId := Some("application"))
        .settings(CloudBees.username := Some("username"))
        .settings(CloudBees.apiKey := Some("0123456789ABCDEF"))
        .settings(CloudBees.apiSecret := Some("88888889999999$999999998888888="))
        .settings(CloudBees.host := "https://api.cloudbees.com/api")
        .settings(
          // Add your own project settings here  
        ) 
```

但是，我在部署时收到以下消息：

```
[info] Deploying application-1.0-SNAPSHOT to Run@Cloud/username/application
........................uploaded 25%
........................uploaded 50%
........................uploaded 75%
........................upload completed
deploying application to server(s)...
....[info] Application available at http://application.username.cloudbees.net
[error] {file:/Users/user/dev/play2/Application/application/}Application/*:cloudbees-deploy: java.lang.ExceptionInInitializerError
[error] Total time: 74 s, completed Feb 3, 2013 7:44:43 PM 
```

当我访问[http://application.username.cloudbees.net](http://application.username.cloudbees.net)时，我收到“502 Bad Gateway - nginx/1.2.0”错误...

我在想这是因为我使用的是具有 Java 1.7 的 Mac，而 CloudBees 期待 1.6 ...？从 sbt-cloudbees-play-plugin 项目源中，我可以看到在哪里可以将“deployParams”选项设置为 Map，但我对 Scala 完全陌生，不确定如何操作。我想在 Build.scala 中做类似的事情，但我不断收到错误：

```
.settings(CloudBees.deployParams += ("java_version" -> "1.7")) 
```

这里描述了 java_version 参数：[https ://developer.cloudbees.com/bin/view/RUN/JVMVersion](https://developer.cloudbees.com/bin/view/RUN/JVMVersion)

您可以在此处查看项目的来源：[https ://github.com/CloudBees-community/sbt-cloudbees-play-plugin/blob/master/src/main/scala/cloudbees.scala](https://github.com/CloudBees-community/sbt-cloudbees-play-plugin/blob/master/src/main/scala/cloudbees.scala)

我不知道该怎么做，或者我的部署有什么问题？即使创建一个没有数据库连接的全新 Play 应用程序，它也会继续失败。

任何对我可能做错的洞察力将不胜感激:) 谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T06:18:27.893

您可以尝试这些选项。

```
CloudBees.deployParams := Map("runtime.java_version" -> "1.7"),
CloudBees.openOnUpload := false, 
```

第一个选项将运行时设置为 java 1.7，这可能是您的问题。如果 sbt 使用的是 JDK7，那么您需要将 RUN@cloud 平台设置为 java 7。

第二个选项`ExceptionInInitializerError`通过在部署时禁用浏览器打开来修复。以我的经验，此错误表明您的计算机上正在使用 Java 7，因为我只看到 Java 7 而不是 Java 6 的此错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T06:38:02.167

另外 - 始终记得通过 Web 控制台或 bees app:tail 命令查看您的应用程序的日志，以防它以某种特定于容器的方式失败（我们不能返回非 500 错误，并且不要）不想通过网络泄露有关您的错误的信息，因此在这种情况下这是一个通用错误）。

# windows - 如何防止双击打开文件对话框注册单击它下面的表单？

> ID：14679207
> 
> 赞同：12
> 
> 时间：2013-02-04T01:10:11.800
> 
> 标签：windows, delphi, click, messages, double-click

我有一个自定义控件，它本质上是一个绘图画布，以及一个使用它来编辑文件的程序。但是，当打开一个新文件时，可能会发生一些非常奇怪的事情。

如果用户在“打开文件”对话框（标准控件）中双击文件`TOpenDialog`而不是选择项目并点击`ENTER`，则下方的画布会注册一个单击事件并最终在加载后立即在光标位置执行绘制操作完全的。

显然，这不是预期的行为。我之前注意到，当您双击鼠标时，双击消息会在第二次单击消息*之前*到达。我认为对话框可能会从双击关闭，然后第二次单击消息到达并被发送到适当坐标处的任何位置，因为它已经消失了。

有什么办法可以让这停止发生吗？我不能告诉我的代码“加载后，只吃下一次点击”，因为它可以用“ENTER”键打开，然后它会错过第一次合法点击。谁能想到更好的方法来处理这个问题？（使用 Windows 7，以防万一。）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-04T04:51:05.843

如果出现“第二次点击消息”，则说明有问题。（一方面，Windows 没有“单击”消息，只有鼠标向上和鼠标向下消息。）[双击是这样的](http://msdn.microsoft.com/en-us/library/windows/desktop/ms645601.aspx#_win32_Client_Area_Mouse_Messages)：鼠标向下，鼠标向上，双击，鼠标向上。对话框在双击消息和第二个鼠标向上消息之间消失。如果您的控件收到鼠标向上消息并将其视为完全单击，则说明了问题，您需要停止；单击始终是*一对*鼠标按下和鼠标按下消息。如果你还没有得到两者，那么它不是一个点击。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-24T09:10:19.637

事实上，它是在图片框上触发的第二个鼠标上移事件，这会导致事件处理程序调用。这似乎是一个 OpenFileDialog 错误。需要为鼠标向上事件添加对 IsMouseCaptured 的检查，单击是鼠标向下和鼠标向上，而不仅仅是鼠标向上。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-13T10:32:57.673

我以这种方式解决了它（这当然是一种解决方法）：

```
 CFileDialog my_file_dialog(...);
    if ( my_file_dialog.DoModal()!=IDOK )
        return;

    CString fileName= my_file_dialog.GetPathName();

    //...

    CSelectItemsDlg dlg;

    // Avoid that the double-click on the CFileDialog sends the WM_LBUTTONUP message to the next window causing the Unselect of an item that is under the mouse cursor.
    // http://www.experts-exchange.com/Programming/System/Windows__Programming/Q_10287063.html#a2476475
    MSG msg;
    while(PeekMessage(&msg,0,WM_LBUTTONUP,WM_LBUTTONUP,PM_REMOVE));

    int DoModalRes = dlg.DoModal(); 
```

你可以相信我在我老板的脸上露出了灿烂的笑容:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-11T04:35:35.437

```
Private IsMouseDown As Boolean
Private Sub picNenIn_MouseDown(ByVal sender As Object, ByVal e As MouseEventArgs) Handles picNenIn.MouseDown
    IsMouseDown = True
    'Code
End Sub
Private Sub picNenIn_MouseMove(ByVal sender As Object, ByVal e As MouseEventArgs) Handles picNenIn.MouseMove
    If IsMouseDown Then
        'Code
    End If
End Sub
Private Sub picNenIn_MouseUp(ByVal sender As Object, ByVal e As MouseEventArgs) Handles picNenIn.MouseUp
    IsMouseDown = False
    'Code
End Sub 
```

# ios - 异步 NSData 仍在内存中，没有缓存

> ID：14679208
> 
> 赞同：1
> 
> 时间：2013-02-04T01:10:12.007
> 
> 标签：ios, memory, memory-management, asynchronous, nsdata

我的应用程序中的内存有问题。

当我启动它时，我的应用程序的文档和数据是 212KB

推送 ViewControler A 后，我在 TableView 中加载了许多来自 Facebook 的异步图像：

```
 UIButton *friendPhoto = [UIButton buttonWithType:UIButtonTypeCustom];
    [friendPhoto addTarget:self
                    action:@selector(friendPhotoWasClicked:)
          forControlEvents:UIControlEventTouchUpInside];
    [friendPhoto setFrame:CGRectMake(x, photoMargeY, photoSize, photoSize)];

    // GET IMAGE ASYNC
    NSURL *imageURL = [NSURL URLWithString:faceURL];
    [friendPhoto setImage:[UIImage imageNamed:@"default"]
                     forState:UIControlStateNormal];
        dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0ul);
        dispatch_async(queue, ^{
            NSData *data = [NSData dataWithContentsOfURL:imageURL];
            UIImage *image = [UIImage imageWithData:data];
            dispatch_async(dispatch_get_main_queue(), ^{
                [friendPhoto setImage:image
                             forState:UIControlStateNormal];
            });
        });
    //}
    [cell.contentView addSubview:friendPhoto]; 
```

并且完美地工作！此时，Documents and Data 10MB

但是在弹出 ViewController 并在 NSLog 中看到为 ViewController 调用 dealloc 之后，我的应用程序仍然有 10MB。我不会缓存图像。

为什么还有10MB？我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T02:09:00.693

检查数据和图像的所有保留/释放可能会有所帮助。

如果您需要查看对象使用工具的保留、释放和自动释放发生的位置：

在仪器中运行，在分配中设置“记录参考计数”（您必须停止记录才能设置选项）。导致问题代码运行，停止记录，搜索感兴趣的 ivar，向下钻取，您将能够看到所有保留、释放和自动释放发生的位置。

![在此处输入图像描述](../Images/7838716286f7948b8b94a93abc6764ae.png)

# c - 给定一个程序，我们如何确定执行的保存/恢复操作的数量？

> ID：14679210
> 
> 赞同：-1
> 
> 时间：2013-02-04T01:10:18.317
> 
> 标签：c

假设我们有以下简单的程序：

```
int foo() {
    int a = 1, b = 2, c = 3, w;
    c = abs(c);
    c = c + b + 7;
    for (w = 0; w<10; w++) {
      b += bar(b);
    }
    return c;
  }

int bar(int v) {
    int a = 1, b = 2;
    a += v + b;
    printf(“v=%d\n”, v);
    return v;
  } 
```

如果`foo()`被调用一次，我们如何确定对变量`a`、`b`、执行的保存/恢复操作的数量`c`，以及`w`何时存储在*调用者*保存的寄存器与*被调用者*保存的寄存器中？可能是我不理解术语，但是对确定每个变量在每种情况下有多少加载/存储的过程的解释会很好。

感谢您的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T01:21:09.193

唯一的答案是“至少为零”。

1.  现代编译器将删除`a`,`b`和`c`from `foo()`。由于这些变量不存在，它们将永远不会被加载或存储。

2.  该`w`变量可能存在，也可能通过展开循环来消除。

3.  `a`和`b`变量`bar()`是不需要的，因此它们也可能会被删除。

## 输出可能是什么样子：

编译器可能会产生如下输出：

```
int foo()
{
    printf("v=%d\n", 2);
    printf("v=%d\n", 4);
    printf("v=%d\n", 8);
    printf("v=%d\n", 16);
    printf("v=%d\n", 32);
    printf("v=%d\n", 64);
    printf("v=%d\n", 128);
    printf("v=%d\n", 256);
    printf("v=%d\n", 512);
    printf("v=%d\n", 1024);
    return 12;
} 
```

如您所见，在此优化版本中没有要保存或恢复的变量。

## 更新

使用 编译时`-O2`，GCC 会保存 x86-64 上被调用者保存的`rbx`和`rbp`寄存器。这些寄存器保存一次，恢复一次。GCC 的输出`foo()`never calls `bar()`，它`printf()`直接调用。

```
foo:
        pushq   %rbp                ; save register rbp
        movl    $2, %ebp            ; b = 2
        pushq   %rbx                ; save register rbx
        movl    $10, %ebx           ; ctr = 10
        subq    $8, %rsp
.L4:                                ; begin loop
        movl    %ebp, %esi
        xorl    %eax, %eax
        movl    $.LC0, %edi
        call    printf              ; printf("v=%d\n", b)
        addl    %ebp, %ebp          ; b += b
        subl    $1, %ebx            ; ctr--
        jne     .L4                 ; end loop (when ctr == 0)
        addq    $8, %rsp
        movl    $12, %eax           ; return 12
        popq    %rbx                ; restore register rbx
        popq    %rbp                ; restore register rbp
        ret 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T01:30:12.553

术语“调用者保存的寄存器”和“被调用者保存的寄存器”分别是指函数调用者保存的寄存器和被调用函数保存的寄存器。什么寄存器取决于处理器架构和称为“ABI”（应用程序二进制接口）的规范 - 这因处理器系列而异，并且在操作系统之间也经常不同。但基本原则是编译器生成的机器码是有一定期望的：任何函数都可以自由使用R0、R1、R2，调用者必须期望这些在调用中被修改。R3-R6是被调用函数保存的，如果调用函数使用R7或R8，在调用任何函数之前都必须保存。[这是一个“任意处理器”，

所以要分析你的功能......

让我们首先分解这个函数：

```
int foo() {
    int a = 1, b = 2, c = 3, w;
    c = abs(c);
    c = c + b + 7;
    for (w = 0; w<10; w++) {
      b += bar(b);
    }
    return c;
  } 
```

变量“a”未使用，因此可以删除。函数“abs”可以在编译时解析，因此可以删除该行。 `c = c + b + 7;`可以在编译时解析为 2 + 3 + 7 = 12。我们只需将常量 12 移至 return 语句并去掉`c`. 所以，现在我们剩下：

```
int foo() {
    int b = 2, w;

    for (w = 0; w<10; w++) {
      b += bar(b);
    }
    return 12;
  } 
```

这至少使用了 2 个寄存器。

对下一个函数执行相同的操作：

```
int bar(int v) {
    int a = 1, b = 2;
    a += v + b;
    printf(“v=%d\n”, v);
    return v;
  } 
```

我们可以删除`a = 1, b = 2`and `a += v + b`，因为`a`and`b`没有被使用。这留下：

```
int bar(int v) {
    printf(“v=%d\n”, v);
    return v;
  } 
```

现在，一个聪明的编译器会内联`bar`到 foo 中，现在我们得到：

```
int foo() {
    int b = 2, w;

    for (w = 0; w<10; w++) {
      printf(“v=%d\n”, b);
      b += b;
    }
    return 12;
  } 
```

实际上，这可以通过两个或三个寄存器来完成，加上需要做的任何事情`printf`（我们无法真正说出那是什么......）。编译器很可能会再走一步并“展开”循环，在这种情况下，可能会再删除一个寄存器。

# java - 如何使用 SVN？

> ID：14679214
> 
> 赞同：-2
> 
> 时间：2013-02-04T01:10:38.580
> 
> 标签：java, svn

我是 SVN 的新手，我已经阅读了[Link](http://www.institute.loni.org/lasigma/document_files/SVN_tutorial_Windows.pdf)，但是当我访问我的 java 应用程序代码并尝试执行 svn add 时，它说没有提供足够的参数。我该怎么办？

我的应用程序是 Java 我在 Windows 上使用 svn

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T01:16:59.597

您是否设置了存储库？如果您没有可能是它正在寻找的另一个参数的存储库

# c# - 如何检测 Visual Studio IDE 是否正在使用 VSPackage 关闭？

> ID：14679217
> 
> 赞同：4
> 
> 时间：2013-02-04T01:11:11.683
> 
> 标签：c#, visual-studio-2012, vspackage

我正在编写一个 VS 包，我需要在其中存储用户启动我的包以及用户关闭 Visual Studio 的时间。

问题是，我不知道如何获取 Visual Studio 的结束事件。谁能给我有关如何检测 VS 是否正在关闭的任何信息？

注意：当我从互联网上搜索时，我遇到了以下类似的问题：[如何通过 VSPackage 取消 ToolWindowPane 或 Visual Studio IDE 关闭操作？](https://stackoverflow.com/questions/2385146/how-do-you-cancel-a-toolwindowpane-or-visual-studio-ide-close-operation-via-a-vs)，但是当我尝试时，这个解决方案是在Package窗口关闭时检测并执行某些操作，而无法检测Visual Studio何时关闭。

非常感谢任何帮助。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-05T06:38:56.550

只是为了明确并关闭这个问题。这是检查 VS 是否正在关闭的代码快照：

```
// Create 2 variables below
private DTE2 m_applicationObject = null;
DTEEvents m_packageDTEEvents = null; 
```

然后在初始化中添加：

```
// Link the Event when VS CLOSING                
m_packageDTEEvents = ApplicationObject.Events.DTEEvents;
m_packageDTEEvents.OnBeginShutdown += new _dispDTEEvents_OnBeginShutdownEventHandler(HandleVisualStudioShutDown); 
```

您需要的另外两种方法：

```
 public DTE2 ApplicationObject
 {
        get
        {
            if (m_applicationObject == null)
            {
                // Get an instance of the currently running Visual Studio IDE
                DTE dte = (DTE)GetService(typeof(DTE));
                m_applicationObject = dte as DTE2;
            }
            return m_applicationObject;
        }
  } 
```

和

```
public void HandleVisualStudioShutDown()
{
    MessageBox.Show("Exiting Visual Studio. Bye");
} 
```

# android - 如何使用 CursorLoader 在 ListFragment 中实现 Header

> ID：14679219
> 
> 赞同：2
> 
> 时间：2013-02-04T01:11:40.590
> 
> 标签：android, android-listfragment, android-cursorloader

试图将标题放在这样的 ListFragment 中

```
@Override
public View onCreateView(org.holoeverywhere.LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    View listRoot = inflater.inflate(R.layout.list, null);
    headerView = inflater.inflate(R.layout.header);
    return listRoot;
} 
```

**在 onActivityCreated**

```
@Override
public void onActivityCreated(Bundle savedInstanceState) {

    super.onActivityCreated(savedInstanceState);

    setEmptyText("No Contacts");
    setHasOptionsMenu(true);

    ListView listView = getListView();
    //String headerData = "ZZZZZZZZ";
    if(headerView != null) listView.addHeaderView(headerView);

    String[] from = {TableMetaData.NAME};
    int[] to = {R.id.menu_name};

    customListAdapter = new ContactListAdapter(getActivity(), R.layout.menu_row,
            null, from, to, 0);
    setListAdapter(customListAdapter);
    setListShown(false);
    getLoaderManager().initLoader(0, null, this).forceLoad();

} 
```

我在 Logcat 中收到以下错误

```
02-04 05:53:09.287: E/AndroidRuntime(22767): FATAL EXCEPTION: main
02-04 05:53:09.287: E/AndroidRuntime(22767): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.abc.xyz/com.abc.xyz.mnp.Mnp}: java.lang.IllegalStateException: Can't be used with a custom content view
02-04 05:53:09.287: E/AndroidRuntime(22767):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2669)
02-04 05:53:09.287: E/AndroidRuntime(22767):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2685)
02-04 05:53:09.287: E/AndroidRuntime(22767):    at android.app.ActivityThread.access$2300(ActivityThread.java:126)
02-04 05:53:09.287: E/AndroidRuntime(22767):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2038)
02-04 05:53:09.287: E/AndroidRuntime(22767):    at android.os.Handler.dispatchMessage(Handler.java:99)
02-04 05:53:09.287: E/AndroidRuntime(22767):    at android.os.Looper.loop(Looper.java:123)
02-04 05:53:09.287: E/AndroidRuntime(22767):    at android.app.ActivityThread.main(ActivityThread.java:4633)
02-04 05:53:09.287: E/AndroidRuntime(22767):    at java.lang.reflect.Method.invokeNative(Native Method)
02-04 05:53:09.287: E/AndroidRuntime(22767):    at java.lang.reflect.Method.invoke(Method.java:521)
02-04 05:53:09.287: E/AndroidRuntime(22767):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
02-04 05:53:09.287: E/AndroidRuntime(22767):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
02-04 05:53:09.287: E/AndroidRuntime(22767):    at dalvik.system.NativeStart.main(Native Method) 
```

对我来说，它看起来像是在要求我删除`setEmptyText("No Contacts");`和删除`setListShown(false);``setListShown(true);``public void onLoadFinished(Loader<Cursor> cursorLoader, Cursor cursor) {`

**我的问题**

为什么会出现这个错误？如何避免/规避这个错误？

# android - 如何加载一个android项目

> ID：14679223
> 
> 赞同：0
> 
> 时间：2013-02-04T01:12:12.457
> 
> 标签：android

我是 android 开发的新手，并通过 google 的培训文档学习它。我已经下载了一个演示，但不知道如何使用 ADT 插件将它加载到我的 Eclipse 中。

下图是demo的目录。 ![在此处输入图像描述](../Images/ff1113a8f07c532bc5a617539d138cfa.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T01:15:40.440

右键单击eclipse项目列表，然后导入项目。选择 Android 项目并选择 demo 的存储库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T04:54:05.570

1.File->Import->General->Existing Projects into Workspace，下一步

2 选择根目录：/path/to/project

3个项目->全选

4 取消选中“将项目复制到工作区”和“将项目添加到工作集”

5.完成

或者您可以使用本教程[http://android.programmerguru.com/how-to-import-android-project-in-eclipse/](http://android.programmerguru.com/how-to-import-android-project-in-eclipse/)

# python - heroku postgresql 不会同步数据库

> ID：14679224
> 
> 赞同：1
> 
> 时间：2013-02-04T01:12:44.770
> 
> 标签：python, sql, django, postgresql, heroku

所以...我是一个在 django 应用程序上工作的新手，但是当我尝试`heroku run python manage.py syncdb`通过 virtualbox heroku 运行时，它一直在下面告诉我：

```
 (blog-venv)vagrant@precise64:/vagrant/projects/microblog$ heroku run python manage.py syncdb
Running `python manage.py syncdb` attached to terminal... up, run.9695
Traceback (most recent call last):
  File "manage.py", line 10, in <module>
    execute_from_command_line(sys.argv)
  File "/app/.heroku/python/lib/python2.7/site-packages/django/core/management/__init__.py", line 443, in execute_from_command_line
    utility.execute()
  File "/app/.heroku/python/lib/python2.7/site-packages/django/core/management/__init__.py", line 382, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "/app/.heroku/python/lib/python2.7/site-packages/django/core/management/base.py", line 196, in run_from_argv
    self.execute(*args, **options.__dict__)
  File "/app/.heroku/python/lib/python2.7/site-packages/django/core/management/base.py", line 232, in execute
    output = self.handle(*args, **options)
  File "/app/.heroku/python/lib/python2.7/site-packages/django/core/management/base.py", line 371, in handle
    return self.handle_noargs(**options)
  File "/app/.heroku/python/lib/python2.7/site-packages/django/core/management/commands/syncdb.py", line 57, in handle_noargs
    cursor = connection.cursor()
  File "/app/.heroku/python/lib/python2.7/site-packages/django/db/backends/__init__.py", line 306, in cursor
    cursor = self.make_debug_cursor(self._cursor())
  File "/app/.heroku/python/lib/python2.7/site-packages/django/db/backends/postgresql_psycopg2/base.py", line 177, in _cursor
    self.connection = Database.connect(**conn_params)
  File "/app/.heroku/python/lib/python2.7/site-packages/psycopg2/__init__.py", line 178, in connect
    return _connect(dsn, connection_factory=connection_factory, async=async)
psycopg2.OperationalError: could not connect to server: No such file or directory
    Is the server running locally and accepting
    connections on Unix domain socket "/var/run/postgresql/.s.PGSQL.5432"? 
```

这是部署到heroku时不会在我的应用程序中加载我的管理页面的链接。

[http://sheltered-dusk-5757.herokuapp.com/admin/](http://sheltered-dusk-5757.herokuapp.com/admin/)

这也遵循 heroku django 指南。[https://devcenter.heroku.com/articles/django#database-settings](https://devcenter.heroku.com/articles/django#database-settings)

以下是我的树：

```
(blog-venv)vagrant@precise64:/vagrant/projects/microblog$ tree .
.
|-- manage.py
|-- microblog
|   |-- __init__.py
|   |-- __init__.pyc
|   |-- settings
|   |   |-- base.py
|   |   |-- base.pyc
|   |   |-- __init__.py
|   |   |-- __init__.pyc
|   |   |-- local.py
|   |   `-- local.pyc
|   |-- settings.pyc
|   |-- templates
|   |   |-- 500.html
|   |   `-- index.html
|   |-- urls.py
|   |-- urls.pyc
|   |-- wsgi.py
|   `-- wsgi.pyc
|-- Procfile
`-- requirements.txt

3 directories, 18 files 
```

在我的设置文件夹中：**init** .py

```
# settings/__init__.py
from .base import *

try: 
    from .local import *
except ImportError:
    pass 
```

本地.py

```
DEBUG = True
TEMPLATE_DEBUG = DEBUG
DATABASES = { 
    'default': {
        'ENGINE': 'django.db.backends.postgresql_psycopg2', 
        'NAME': 'microblog',                      
        'USER': 'vagrant',                      
        'PASSWORD': '',                  
        'HOST': '',                      
        'PORT': '5432',                      
    }
} 
```

基础.py

```
import os
import dj_database_url
# here() gives us file paths from the root of the system to the directory
# holding the current file.
here = lambda * x: os.path.join(os.path.abspath(os.path.dirname(__file__)), *x)

PROJECT_ROOT = here("..")
# root() gives us file paths from the root of the system to whatever
# folder(s) we pass it starting at the parent directory of the current file.
root = lambda * x: os.path.join(os.path.abspath(PROJECT_ROOT), *x)

DEBUG = False
TEMPLATE_DEBUG = DEBUG

ADMINS = (
#    ('myname', 'email'),
)

MANAGERS = ADMINS

DATABASES = {
    'default': dj_database_url.config()
}

# Local time zone for this installation. Choices can be found here:
# http://en.wikipedia.org/wiki/List_of_tz_zones_by_name
# although not all choices may be available on all operating systems.
# In a Windows environment this must be set to your system time zone.
TIME_ZONE = 'America/Chicago'

# Language code for this installation. All choices can be found here:
# http://www.i18nguy.com/unicode/language-identifiers.html
LANGUAGE_CODE = 'en-us'

SITE_ID = 1

# If you set this to False, Django will make some optimizations so as not
# to load the internationalization machinery.
USE_I18N = True

# If you set this to False, Django will not format dates, numbers and
# calendars according to the current locale.
USE_L10N = True

# If you set this to False, Django will not use timezone-aware datetimes.
USE_TZ = True

# Absolute filesystem path to the directory that will hold user-uploaded files.
# Example: "/home/media/media.lawrence.com/media/"
MEDIA_ROOT = ''

# URL that handles the media served from MEDIA_ROOT. Make sure to use a
# trailing slash.
# Examples: "http://media.lawrence.com/media/", "http://example.com/media/"
MEDIA_URL = ''

# Absolute path to the directory static files should be collected to.
# Don't put anything in this directory yourself; store your static files
# in apps' "static/" subdirectories and in STATICFILES_DIRS.
# Example: "/home/media/media.lawrence.com/static/"
STATIC_ROOT = root("..","static")

# URL prefix for static files.
# Example: "http://media.lawrence.com/static/"
STATIC_URL = '/static/'

# Additional locations of static files
STATICFILES_DIRS = (
    # Put strings here, like "/home/html/static" or "C:/www/django/static".
    # Always use forward slashes, even on Windows.
    # Don't forget to use absolute paths, not relative paths.
    root("assets"),
)

# List of finder classes that know how to find static files in
# various locations.
STATICFILES_FINDERS = (
    'django.contrib.staticfiles.finders.FileSystemFinder',
    'django.contrib.staticfiles.finders.AppDirectoriesFinder',
#    'django.contrib.staticfiles.finders.DefaultStorageFinder',
)

# Make this unique, and don't share it with anybody.
SECRET_KEY = 'i-5%d5z&amp;a8z95@&amp;8@x0k*4zczs#38s-ui0=99i6ck7bdy_3af4'

# List of callables that know how to import templates from various sources.
TEMPLATE_LOADERS = (
    'django.template.loaders.filesystem.Loader',
    'django.template.loaders.app_directories.Loader',
#     'django.template.loaders.eggs.Loader',
)

MIDDLEWARE_CLASSES = (
    'django.middleware.common.CommonMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    'django.middleware.clickjacking.XFrameOptionsMiddleware',
)

ROOT_URLCONF = 'microblog.urls'

# Python dotted path to the WSGI application used by Django's runserver.
WSGI_APPLICATION = 'microblog.wsgi.application'

TEMPLATE_DIRS = (
    # Put strings here, like "/home/html/django_templates" or "C:/www/django/templates".
    # Always use forward slashes, even on Windows.
    # Don't forget to use absolute paths, not relative paths.
    root("templates"),
)

DJANGO_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'django.contrib.admin',
)

LOCAL_APPS = (

)

THIRD_PARTY_APPS = (

)

INSTALLED_APPS = DJANGO_APPS + THIRD_PARTY_APPS + LOCAL_APPS

# A sample logging configuration. The only tangible logging
# performed by this configuration is to send an email to
# the site admins on every HTTP 500 error when DEBUG=False.
# See http://docs.djangoproject.com/en/dev/topics/logging for
# more details on how to customize your logging configuration.
LOGGING = {
    'version': 1,
    'disable_existing_loggers': False,
    'filters': {
        'require_debug_false': {
            '()': 'django.utils.log.RequireDebugFalse'
        }
    },
    'handlers': {
        'mail_admins': {
            'level': 'ERROR',
            'filters': ['require_debug_false'],
            'class': 'django.utils.log.AdminEmailHandler'
        }
    },
    'loggers': {
        'django.request': {
            'handlers': ['mail_admins'],
            'level': 'ERROR',
            'propagate': True,
        },
    }
} 
```

谢谢你们的帮助。

**已编辑:: 问题已解决**

保持 base.py 为：

```
DATABASES = {'default' : dj_database_url.config() } 
```

然后在部署前注释掉local.py数据库...

如果发生致命错误： [https ://devcenter.heroku.com/articles/postgres-logs-errors#fatal-role-rolename](https://devcenter.heroku.com/articles/postgres-logs-errors#fatal-role-rolename)

然后进入 postgres.heroku.com 并找到您的数据库的颜色并将其推广回您的应用程序。

现在一切都应该正常工作:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T01:24:50.330

我认为这里发生的事情是您的 local.py 文件被检入 git 并被错误地用于 Heroku。尝试将其添加到 .gitignore 或遵循此答案中的建议。[GSWD Heroku Django manage.py 问题](https://stackoverflow.com/questions/14574827/gswd-heroku-django-manage-py-issue)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T01:23:11.413

尝试这个

```
import dj_database_url
DATABASES = {'default': dj_database_url.config(default='postgres://localhost')} 
```

而不是你现在的设置

# cobol - 分两列打印

> ID：14679229
> 
> 赞同：2
> 
> 时间：2013-02-04T01:15:21.367
> 
> 标签：cobol

我们应该形成一个出现 108 次的名称数组。我们应该在左栏中有名称 1-54，在右栏中有名称 55-108。一页有 108 个名称后，我们初始化数组并重新开始。我的代码的输出显示打印的名称 1-54，而不是在同一页面上和名称 1-54 旁边，名称 55-108 在右列但在名称 1-54 之后。任何想法将不胜感激。

这是我的一些代码：

```
 PERFORM UNTIL ARE-THERE-MORE-RECORDS = 'NO '
           READ NAMELIST-FILE-IN
               AT END
                   MOVE 'NO ' TO ARE-THERE-MORE-RECORDS
               NOT AT END
                   PERFORM 200-PROCESS-ONE-RECORD
           END-READ
       END-PERFORM
       CLOSE NAMELIST-FILE-IN
       CLOSE NAMELIST-FILE-OUT
       STOP RUN.

   200-PROCESS-ONE-RECORD.
       ADD 1 TO NAME-SUB
       MOVE NAME-IN TO NAME-1 (NAME-SUB)
       PERFORM 220-MOVE-RECORDS.

   220-MOVE-RECORDS.
       IF NAME-SUB <= 54
           MOVE NAME-1 (NAME-SUB) TO LEFT-LABEL
           MOVE SPACES TO RIGHT-LABEL
       END-IF
       IF NAME-SUB >= 55
           MOVE NAME-1 (NAME-SUB) TO RIGHT-LABEL
           MOVE SPACES TO LEFT-LABEL
       END-IF
       MOVE DETAIL-LINE TO NAMELIST-RECORD-OUT
       WRITE NAMELIST-RECORD-OUT
           AFTER ADVANCING 1 LINE
       IF NAME-SUB >= 108
           MOVE SPACES TO DETAIL-LINE
           MOVE ZERO TO NAME-SUB
           PERFORM 300-WRITE-HEADING
       END-IF. 
```

我已经对所有正确的 WORKING-STORAGE 条目进行了编码以容纳这些信息。您知道我编写详细信息的方式是否有问题，还是我处理数据的方式有问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T02:00:24.813

你的逻辑是错误的。假设（为了简单起见）您有 216 个名称，您需要读取其中的 108 个并将它们存储在您的 NAME-1 数组中。

然后您可以遍历将 NAME-1[n] 放入 LEFT-LABEL 和 NAME-1[n+54] 放入 RIGHT-LABEL 的 54 行，然后移动您的详细信息行并写入输出；重复行 n = 1 <= 54

现在阅读你接下来的 108 行并重复。所以两个循环；读取 108 个名称，打印 54 行。

显然你需要保护你的余数，即如果你没有正好是 108 个名字的倍数，比如

```
if n <= name-sub 
    move NAME-1[n] to LEFT-LABEL
else
    move spaces to LEFT-LABEL
endif

if n+54 <= name-sub 
    move NAME-1[n+54] to RIGHT-LABEL
else
    move spaces to RIGHT-LABEL
endif 
```

我意识到你必须正确设置变量（n+54 不是正确的 cobol）并且对于大小写的混合感到抱歉，但很久以前写 COBOL 并且现在习惯于小写。;)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T05:19:41.143

如果我理解正确，这应该接近你想要的

```
 220-MOVE-RECORDS.

       IF NAME-SUB >= 108
           perform varing i from 1 to 54
               MOVE NAME-1 (NAME-SUB) TO LEFT-LABEL
               compute ip54 = i + 54
               MOVE NAME-1 (ip54) TO RIGHT-LABEL

               WRITE NAMELIST-RECORD-OUT 
                from DETAIL-LINE
               AFTER ADVANCING 1 LINE
           end-perform

           MOVE SPACES TO DETAIL-LINE
           MOVE ZERO TO NAME-SUB
           PERFORM 300-WRITE-HEADING

    END-IF. 
```

注意：许多 Cobol 编译器允许小写

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-04T10:34:29.880

您应该始终对所有 IO 进行错误检查。

一个文件入一个文件输出总是看起来像这样：

```
open input
check status
open output
check status
process file until end
close input
check status
close output
check status

process file
read input
check staus
do what is needed
write output
check status 
```

更好的是这样：

```
open input
check status
open output
check status
*priming read*
process file until end
close input
check status
close output
check status

process file
do what is needed
write output
check status
read input
check staus 
```

“启动读取”处理文件上的第一条记录（如果有的话）。您可以巧妙地处理“空文件”，而不必“混淆”您的主要逻辑或在别处区分两种不同类型的“文件结尾”。“进程文件”末尾的现在读取消除了有些曲折的“AT END/NOT AT END”。

例如，您的表中只*需要*54 个元素。在处理页面“右侧”的记录时，您可以从“左侧”中取第一个并立即执行该行。

使用 88s 而不是文字进行测试。

不要在页面末尾添加“标题”，因为好像没有更多记录要处理，标题后面会出现“空白页”。

如果您的打印行的写入在一个段落中，则可以使用该段落检查是否需要标题，“行数”的初始值为 54。

使用一次打印一页的 108 元素方法，在顶部做标题。

如果数据在设置为其他值之前从未使用过，则无需将其设置为初始值。

您已经对程序代码采用了“最小句号/句号”方法，这很好 - 将必要的最后一个句点单独放在一行中怎么样？

```
 PERFORM 220-MOVE-RECORDS. 
```

变成

```
 PERFORM 220-MOVE-RECORDS
   . 
```

仅当值在逻辑上可以超过最大值时才使用 >= 或<=。你的永远不可能，所以使用 EQUAL TO。是的，如果超过，你会得到一个大胖圈。但这比在发生意外情况时“工作”要好。如果您想测试 > 是否超出然后失败并显示诊断消息，那没关系。一些编译器允许对表访问进行“边界检查”，如果你使用它，你甚至不需要额外的检查。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-04T17:14:39.077

查看您的工作存储定义以及代码会很有帮助。没有另一个很难理解。

无论如何，您所描述的是一个相当“标准”的问题，有几种可能的解决方案。以下是一种可能方法的概述。

从数据结构开始......工作存储：

```
 01 WS-PAGE-BUFFER.
     02 WS-LINE OCCURS 54 TIMES.
        03 WS-NAME PIC X(40) OCCURS 2 TIMES. 
```

上面的工作存储描述了一页输出。该页面包含 54 行。每行包含两个名称。接下来你需要几个柜台......

```
 01.
    02 WS-LINE-CNTR      PIC S9(4) COMP.
    02 WS-NAME-CNTR      PIC S9(4) COMP. 
```

要解决的两个问题：

*   以正确的顺序填充页面
*   打印带有适当标题/预告片的页面

解决这些问题时要记住的另一件事是，您需要涵盖与输入相关的几个场景：无输入，输入恰好适合某些数量的输出页面，输入部分填充输出页面。所以无论你做什么，所有这些情况都需要以一种“自然”的方式来解决。此外，通常需要解决某种前/后同步信号（例如初始化、打开文件、关闭文件等）。

还有一件事......**始终**为您的输入/输出文件声明一个 FILE-STATUS 以捕获错误和文件结束条件。下面的算法假设您已经完成了（文件结束状态通常为“10”）

骨架算法。

```
 MAINLINE
    PERFORM INITIALIZE-PAGE
    Open input file (check status etc...)
    Open output file (check status etc...)
    Read first line from file (check for errors/end of file etc...)
    PERFORM UNTIL INPUT-FILE-STATUS NOT = ZERO /* read until eof/error
       IF WS-LINE-CNTR = 54 AND WS-NAME-CNT = 2 /* check for full page.
          PERFORM OUTPUT-PAGE
       END-IF
       ADD +1 TO WS-LINE-CNTR
       IF WS-LINE-CNTR > 54
          MOVE +1 TO WS-LINE-CNTR /* Start next column...
          ADD +1 TO WS-NAME-CNTR  /* Increment column
       END-IF
       MOVE input-record TO WS-NAME (WS-LINE-CNTR, WS-NAME-CNTR)
       Read next line from input file
    END-PERFORM

    IF INPUT-FILE-STATUS = '10' AND WS-LINE-CNTR > ZERO
       PERFORM OUTPUT-PAGE /* force the last page to print
    END-IF

    close input file
    close output file

    GOBACK /* done 
    .

 INITIALIZE-PAGE.
     MOVE SPACE TO WS-PAGE-BUFFER  /* Blank page (ie. SPACES)
     MOVE ZERO TO WS-LINE-CNTR     /* Top of page 
     MOVE +1   TO WS-NAME-CNTR     /* First column of page
     .

 OUTPUT-PAGE.
     Ouput page headers...
     PERFORM VARYING WS-LINE-CNTR FROM 1 BY 1
               UNTIL WS-LINE-CNTR > 54
        write WS-LINE (WS-LINE-CNTR) to output file (check status etc...)
     END-PERORM
     Output page trailers...
     PERFORM INITIALIZE-PAGE /* Start a fresh page...
     . 
```

我留下了很多“空白点”来填补，我承认还有其他更优雅的方式来完成你想要做的事情，但这应该让你开始。

# ruby-on-rails - Rails Rspec 错误“未定义的方法”（railstuial 第 10 章）

> ID：14679235
> 
> 赞同：0
> 
> 时间：2013-02-04T01:17:01.490
> 
> 标签：ruby-on-rails, rspec, railstutorial.org

我正在阅读 Michael Hartl 的无价教程，但遇到了一些 Rspec 错误。我已经仔细检查了所有内容，但似乎我仍然缺少一些东西。这是错误消息的样子。

![错误](../Images/d06d8dd878d01cb10e6f79008f557075.png)

最困扰我的事情是，当我生成 Microposts 模型时，我不小心在其中一个选项中打错了，所以我在再次生成模型之前做了 rails destroy model Microposts 以撤消生成命令。我想知道这是否与我看到的错误有关。

我真的希望尽快完成本教程，以便继续构建自己的 Web 应用程序。任何帮助，将不胜感激。

这是我的代码的样子。

**micropost_pages_spec.rb**

```
require 'spec_helper'

describe "MicropostPages" do
    subject {page}
    let(:user) {FactoryGirl.create(:user)}
        before {sign_in user}
        describe "micropost creation" do
            before {visit root_path}

            describe "with invalid information" do
                it "should not create a micropost" do
                expect {click_button "Post"}.not_to change(Micropost, :count)               
            end

            describe "error messages" do
                before {click_button "Post"}
                it {should have_content('error')}
            end
        end
    end
end 
```

**microposts_controller.rb**

```
class MicropostsController < ApplicationController
    before_filter :signed_in_user, only: [:create, :destroy]

    def create
        @micropost = current_user.micropost.build(params[:micropost])
        if @micropost.save
            flash[:success] = "Micropost created!"
            redirect_to root_path
        else
            render 'static_pages/home'
        end
    end

    def destroy
    end
end 
```

**static_pages_controller.rb**

```
class StaticPagesController < ApplicationController
  def home
    @micropost = current_user.microposts.build if signed_in?
  end

  def help
  end

  def about
  end

  def contact
  end

end 
```

**user.rb（用户模型）**

```
class User < ActiveRecord::Base
  attr_accessible :email, :name, :password, :password_confirmation
  has_secure_password
  has_many :microposts, dependent: :destroy

  before_save {self.email.downcase!}
  before_save :create_remember_token

  VALID_EMAIL_REGEX = /\A[\w+\-.]+@[a-z\d\-.]+\.[a-z]+\z/i
  validates :name,  presence: true, length: {maximum: 50}
  validates :email, presence: true, format: {with: VALID_EMAIL_REGEX},
                    uniqueness: {case_sensitive: false}
  validates :password, presence: true, length: {minimum: 6}
  validates :password_confirmation, presence: true

  private

    def create_remember_token
      self.remember_token = SecureRandom.urlsafe_base64
    end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T01:18:45.747

错误在于这一行：

```
@micropost = current_user.micropost.build(params[:micropost]) 
```

它应该是：

```
@micropost = current_user.microposts.build(params[:micropost]) 
```

你在`micropost`应该使用的时候使用`microposts`。

# mysql - mysql查询使用另一个查询的每一行

> ID：14679237
> 
> 赞同：4
> 
> 时间：2013-02-04T01:17:31.820
> 
> 标签：mysql, sql, cumulative-sum

我搜索了很多，但找不到有用的答案：

我想通过给我一个开始和结束日期来获得用户定义的一段时间内的总计列表。总数应每次从开始日期到开始日期开始，并每行添加 1 天。所以最后一行给出了从开始到结束日期的总数。示例： - 给定期间 = 开始 2013-01-01 ，结束 = 2013-01-31

```
total day 1 = 100
total day 2 = 0 (not listed in my totalsperday query, but should have a row in my final query)
total day 3 = 140
total day 4 = 20
...

final table should look like:
end day 1: 100
end day 2: 100
end day 3: 240
end day 4: 260
... 
```

所以我有一个计算所有天数的查询：

```
SELECT '2013-01-01' as startdate, w.endDate
FROM
(
    SELECT date('2013-01-01' + INTERVAL u.i*100 + v.i*10 + w.i DAY) AS endDate
    FROM sysints AS u
    JOIN sysints AS v
    JOIN sysints AS w
    WHERE ( u.i*100 + v.i*10 + w.i ) <= 
    (
        SELECT DATEDIFF( '2013-01-31','2013-01-01') as ddff
    )
) w
ORDER BY w.endDate ASC 
```

我有一个查询谁计算每天的总数

```
SELECT p.selldate, SUM(p.price) as totalPerDay
FROM products p
WHERE   '2013-01-01' >= p.selldate <= '2013-01-31'
GROUP BY p.selldate
ORDER BY p.selldate ASC 
```

现在将这两者结合起来得到我的最终结果很难。

基本上最终的查询应该是这样的：

```
- make the sum of sumperday from day 1 to day 1
- make the sum of sumperday from day 1 to day 2
- make the sum of sumperday from day 1 to day 3 
... 
```

有什么帮助吗？谢谢。这是我最终查询的简化示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T17:53:41.413

下面是示例。这个想法是获得一个按日期排序的初始数据集，并具有汇总总计、隐式日期范围记录。然后使用游标，您可以通过每一行来获得最终的总列（示例中的 amountCalc 列），只需汇总以前的记录 - 因为您已经拥有按日期排序的列，所以可以工作。

该过程可以有其他输入/输出参数。您可以从一个视图中获取数据，而不是从表中获取信息，其中视图可以按日期升序排列。只是一个示例，因此可以根据需要进行定制。

祝你好运。

```
-- drop table `Balance`;
CREATE TABLE `Balance` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `date` DATE NOT NULL,
  `account` varchar(30) NOT NULL,
  `amount` DECIMAL(10,2) NOT NULL, 
  PRIMARY KEY (`id`)
);

INSERT INTO `Balance` (`date`, `account`, `amount`) VALUES 
('2013-01-02', 'T355176', 8700), 
('2013-01-03', 'T355176', 8900), 
('2013-01-04', 'T355215', 33308), 
('2013-01-03', 'T355215', 116581), 
('2013-01-06', 'T812022', 275000), 
('2013-01-02', 'T812063', 136500), 
('2013-01-05', 'T812063', 11682), 
('2013-01-06', 'T812064', 615100), 
('2013-01-03', 'T812064', 25000), 
('2013-01-02', 'T812085', 82500);

SELECT * FROM Balance WHERE date >= '2013-01-01' AND date <= '2013-01-06' ORDER BY date ASC;
CALL sp_getTotals('2013-01-01', '2013-01-06');

-- --------------------------------------------------------------------------------
-- Routine DDL
-- Note: comments before and after the routine body will not be stored by the server
-- --------------------------------------------------------------------------------
DELIMITER $$

CREATE DEFINER=`root`@`%` PROCEDURE `sp_getTotals`(IN startDate DATE, IN endDate DATE)
BEGIN

DECLARE dt DATE;
DECLARE amt DECIMAL(10,2);
DECLARE amtCalcPart DECIMAL(10,2);
DECLARE done INT DEFAULT 0;

DECLARE dtStart DATE;
DECLARE dtEnd DATE;

DECLARE cur1 CURSOR FOR SELECT date, amount FROM `TempMB`;
DECLARE cur2 CURSOR FOR SELECT startDate, endDate;
DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = 1;

DROP TEMPORARY TABLE IF EXISTS `TempMB`;
CREATE TEMPORARY TABLE IF NOT EXISTS `TempMB` (
`id` int(11) NOT NULL AUTO_INCREMENT,
  `date` DATE NOT NULL,
  `amount` DECIMAL(10,2) NULL DEFAULT 0.00,
  `amountCalc` DECIMAL(10,2) NULL DEFAULT 0.00,
  PRIMARY KEY (`id`)
);

SET dtStart = DATE(startDate);
SET dtEnd = DATE(endDate);

WHILE dtStart <= dtEnd DO
    INSERT INTO `TempMB` (`date`) SELECT dtStart;
    SET dtStart = DATE_ADD(dtStart, INTERVAL 1 DAY);
END WHILE;

SELECT * FROM TempMB;

-- Fill temp table with info needed
UPDATE `TempMB` t 
INNER JOIN 
(
    SELECT date, SUM(amount) AS amount
    FROM Balance 
    WHERE 
        date >= startDate AND date <= endDate 
    GROUP BY date
    ORDER BY date ASC
) b ON b.date = t.date 
SET 
    t.amount = b.amount;
/*INSERT INTO `TempMB` (`date`, `amount`)
SELECT date, SUM(amount) AS amount
FROM Balance 
WHERE 
    date >= startDate AND date <= endDate 
GROUP BY date
ORDER BY date ASC;
*/

SET amtCalcPart = 0.00;
-- Initialise cursor
OPEN cur1;
-- USE BEGIN-END handler for cursor-control within own BEGIN-END block
BEGIN
DECLARE EXIT HANDLER FOR NOT FOUND BEGIN END;
-- Loop cursor throu temp records
LOOP 
    -- Get next value
    FETCH cur1 INTO dt, amt;

    -- Calculate amountCalc
    SET amtCalcPart = (SELECT SUM(amount) as amt FROM `TempMB` WHERE Date <= dt);
    UPDATE `TempMB` SET amountCalc = amtCalcPart WHERE date = dt;

END LOOP;
END;

-- Release cursor
CLOSE cur1;

SELECT * FROM TempMB;

END 
```

# android - 切换操作栏菜单

> ID：14679238
> 
> 赞同：0
> 
> 时间：2013-02-04T01:17:48.483
> 
> 标签：android, android-webview, android-actionbar, actionbarsherlock

我正在尝试在操作栏中显示不同的菜单（我正在使用 sherlock 操作栏），具体取决于在 webview 中执行打开页面的 javascript 函数。

例如，在 page1.html 中，`Android.showMenu(1)`被调用。在 page2.html 中，`Android.ShowMenuB(2)`被调用。

目前菜单全部由java代码定义，如下所示：

```
public boolean onCreateOptionsMenu (Menu menu) {
super.onCreateOptionsMenu (menu);
MenuItem menu0 menu.add = (0, 0, 0, "ButtonA");
{
menu0.setIcon (R.drawable.buttona);
menu0.setShowAsAction (MenuItem.SHOW_AS_ACTION_IF_ROOM);
}
MenuItem menu1 menu.add = (0, 1, 1, "ButtonB");
{
menu1.setIcon (R.drawable.buttonb);
menu1.setShowAsAction (MenuItem.SHOW_AS_ACTION_IF_ROOM);
}
return true;
} 
```

我以这种方式使用 JavascriptInterface 检测函数的存在：

```
myWebView.addJavascriptInterface (new WebAppInterface (this), "Android");
...
{public class WebAppInterface
Context mContext;
WebAppInterface (Context c) {
mContext = c;
}
@ JavascriptInterface
public void showMenuA (int menu) {
??
}
} 
```

可能吗？还是我必须使用其他方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T03:27:06.297

您可以使用`onPrepareOptionsMenu()`动态填充操作项并使操作栏无效`invalidateOptionsMenu()`

# php - 将mysql数据从一个表复制到另一个表？

> ID：14679239
> 
> 赞同：-1
> 
> 时间：2013-02-04T01:17:55.943
> 
> 标签：php, mysql

有人可以帮忙吗，我正在尝试从一行/所有列中移动所有数据并将其放入另一个表中。

所以我有一个名为 ptb_registrations 的表，用户信息将被发送到并存储，然后我希望将这些数据复制到 ptb_users 中，然后从 ptb_registrations 中删除。

我在 ptb_registrations 表中名为 id 的列上有一个 auto_increment，因此我可以使用它来识别要复制的行。

这个想法是，在用户注册后，他们会收到一封带有验证链接的电子邮件，并在单击该链接后以某种方式回显 id（可能通过电子邮件 WHERE emial = ），然后我的代码将继续复制 id 1 的所有行来自 ptb_registrations 的数据并复制到该用户的 ptb_users 中。

这是我开始做的事情，任何人都可以告诉我并指出正确的方向吗？

谢谢

```
 <?php
    require_once("session.php"); 
    require_once("functions.php");
    require('_config/connection.php');

    $sql=mysql_query("INSERT INTO `ptb_users` SELECT * FROM `ptb_registrations`");

    ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T01:28:02.663

为什么不在用户表中有一个“已验证”列？注册时设置为 0，验证时设置为 1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T03:24:12.920

你正在为你创造更多的工作。要检查用户是否存在/更改密码/编辑用户数据..您将不得不不断引用数据库中的两个表并最终可能会重复您的代码（代码重复 = 不好的做法）-

在删除未经验证的用户方面。您可以将 cronjob 设置为在每天、每周、每月的进程中运行，以自动删除未经验证的用户...示例：

注册后 3 天仍未验证 - 说明未验证帐户的电子邮件用户将被删除

注册后 1 周仍未验证 - 发出最终警告，说明其帐户将被删除的日期

2 周 -`DELETE FROM tabl WHERE Verified=0` 发出通知，告知他们的帐户已从您的系统中删除。

由于您没有提供有关您尝试过的内容的深入代码，因此除了 cronjobs 之外，我不会提供任何提示。

# php - php - try/catch gearman 没有捕捉到超时警告

> ID：14679240
> 
> 赞同：0
> 
> 时间：2013-02-04T01:18:27.153
> 
> 标签：php, try-catch, gearman

我正在使用 php gearman 客户端，并且在 gearman 服务器离线时尝试捕获/忽略任何错误：

```
 try {
        $gearman = new GearmanClient();
        $gearman->addServer('apps-1');
        $gearman->setTimeout(4000);
        $result = $gearman->doNormal("function", "params");
    } catch (Exception $e) {} 
```

但是，这仍然输出以下错误消息：

```
Warning: GearmanClient::doNormal(): _client_do(GEARMAN_TIMEOUT) occured during gearman_client_run_tasks() -> libgearman/client.cc:154 
```

我知道错误消息只是一个警告而不是致命错误，但我希望 try/catch 会抑制它。有人知道解决这个问题的方法吗？在 $gearman->doNormal() 之前放置一个 @ 符号确实会抑制错误，但我不知道这是否是政治上正确的做法。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T01:31:37.493

那是由于实施。在 PHP 中，错误不会引发异常。如果您希望在发生超时时通知您的程序，您必须使用手动注入错误处理程序`set_error_handler`。

```
 $errorHandler = set_error_handler(
         function($errorNumer, $errorString) { 
         //possibly handle error here
         }
    ); 
    $gearman = new GearmanClient();
    $gearman->addServer('apps-1');
    $gearman->setTimeout(4000);
    $result = $gearman->doNormal("function", "params");
    if (isset($errorHandler)) {
        set_error_handle($errorHandler);
    } 
```

# python - Python - %d 格式，而不是列表

> ID：14679241
> 
> 赞同：3
> 
> 时间：2013-02-04T01:18:33.653
> 
> 标签：python

我正在尝试将列表中的数据值打印到文件中。错误不断打印出来

```
TypeError: %d format: a number is required, not list 
```

我似乎不明白..当我尝试在屏幕上单独打印它们时，我没有任何问题。你能看出问题出在哪里吗？

```
 print >>map_file0, "%d,%d,%d" % (coreid[0],ret_perf[0][0],llc_perf[0][0]) 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T01:33:15.727

如果您使用[较新的字符串格式](http://docs.python.org/2/library/string.html#string-formatting)，则无需指定类型。

```
# old
old_method = "%d,%d,%d" % (1, 2, 3)

# new (2.7)
new_method = "{},{},{}".format(1, 2, 3) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T01:23:05.387

根据 python 文档，[这里](http://docs.python.org/2/library/stdtypes.html#string-formatting-operations)是`%d`有***符号整数十进制***。表示您尝试格式化的一个或多个值是列表而不是整数。您可能有一个列表列表。

# time - 时间测量的批处理脚本无法正常工作

> ID：14679246
> 
> 赞同：1
> 
> 时间：2013-02-04T01:19:07.007
> 
> 标签：time, batch-file, measurement

我正在使用批处理脚本来测量命令的时间。我在 StackOverflow 上找到了这个脚本。不幸的是，它有时无法正常工作，不幸的是我对批处理编程知之甚少。我的印象是它有时有效，有时无效。也许我在这方面犯了错误，但它似乎在午夜后无法正常工作。

剧本：

```
@echo off
setlocal

rem The format of %TIME% is HH:MM:SS,CS for example 23:59:59,99
set STARTTIME=%TIME%

rem here begins the command you want to measure
dir /s > nul
rem here ends the command you want to measure

set ENDTIME=%TIME%

echo STARTTIME %STARTTIME%

rem convert STARTTIME and ENDTIME to centiseconds

set /A STARTTIME=(1%STARTTIME:~0,2%-100)*360000 + (1%STARTTIME:~3,2%-100)*6000 + (1%STARTTIME:~6,2%-100)*100 + (1%STARTTIME:~9,2%-100)

echo STARTTIME %STARTTIME%

echo ENDTIME %ENDTIME%

set /A ENDTIME=(1%ENDTIME:~0,2%-100)*360000 + (1%ENDTIME:~3,2%-100)*6000 + (1%ENDTIME:~6,2%-100)*100 + (1%ENDTIME:~9,2%-100)

echo ENDTIME %ENDTIME%

rem calculating the duration is easy
set /A DURATION=%ENDTIME%-%STARTTIME%

rem we might have measured the time inbetween days
if %ENDTIME% LSS %STARTTIME% set set /A DURATION=%STARTTIME%-%ENDTIME%

rem outputing

echo DURATION: %DURATION% in centiseconds

endlocal
goto :EOF 
```

我半小时前正在使用它，我得到了这个结果：

```
STARTTIME  1:29:25.17 
STARTTIME  1:29:25.17 
ENDTIME  1:29:27.82 
ENDTIME  1:29:27.82 
DURATION: 1 in centiseconds 
```

所以有线条的东西

```
set /A STARTTIME=(1%STARTTIME:~0,2%-100)*360000 + (1%STARTTIME:~3,2%-100)*6000 + (1%STARTTIME:~6,2%-100)*100 + (1%STARTTIME:~9,2%-100) 
```

和

线

```
set /A ENDTIME=(1%ENDTIME:~0,2%-100)*360000 + (1%ENDTIME:~3,2%-100)*6000 + (1%ENDTIME:~6,2%-100)*100 + (1%ENDTIME:~9,2%-100) 
```

似乎是错误的。

它是什么？

问候，大卫

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T02:02:34.247

问题在于`"%STARTTIME:~0,2%-100"`存在`" 1"`，有一个额外的空间。然后程序会尝试找到 的值`(1 1)`而不是`(101)`。

前面的额外 1 仅适用于将时间输出为的系统`"01:29:25.17"`（给出 101 而不是系统将解释为八进制数的 01），但对于输出时间为的系统`" 1:29:25.17"`（注意 1 前面的空格）有一个问题（这会给出`1 1`）。

一个简单的方法就是删除 and 中的 1 `STARTTIME=(1%STARTTIME:~0,2%-100)*360000`，`ENDTIME=(1%ENDTIME:~0,2%-100)*360000`尽管这可能会导致其他系统出现问题。

更防水的解决方案是在 rem 行之后添加两行：

```
rem convert STARTTIME and ENDTIME to centiseconds

set STARTTIME=%STARTTIME: =0%

set ENDTIME=%ENDTIME: =0% 
```

（编辑：Andriy M 上面的更短的方法）

* * *

`set`在`if %ENDTIME% LSS %STARTTIME% set set /A DURATION=%STARTTIME%-%ENDTIME%`尝试测量天之间的时间时，还有两个可能会导致问题。

# msbuild - 如何在同一个项目中定位 WinPhone 和 WinRT？

> ID：14679247
> 
> 赞同：2
> 
> 时间：2013-02-04T01:19:22.827
> 
> 标签：msbuild, visual-studio-2012, windows-runtime, windows-phone-8

我创建了一个针对 WinPhone 8 和 WinRT 的 Visual Studio 2012 C++/CX 项目。如果有人感兴趣，可以在[此处下载解决方案（Hybrid.zip） 。](http://zoy.org/~sam/private/Hybrid.zip)

不幸的是，它在解决方案平台上无法按预期工作。两个平台正常工作：

*   如果我选择解决方案平台`ARM`，则会构建本机 ARM WinPhone 二进制文件。

*   如果我选择解决方案平台`x64`，则会构建本机 64 位 Windows 二进制文件。

但是我遇到了麻烦`Win32`。Windows Phone SDK 理解`Win32`为“用于模拟器的 WinPhone x86 二进制文件”，而 Windows SDK 理解`Win32`为“Windows x86 本机二进制文件”。同一个项目平台用于两个截然不同的事情！

我尝试过创建一个解决方案平台`WinPhoneEmu`。但是，我不知道如何创建一个*项目*平台，让我有两种不同的平台配置选择`Win32`，`WinPhoneEmu`并且表现得如我所愿。我怎么能那样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T11:31:32.117

如果我对您的理解正确，在这种情况下，您需要手动选择平台（x86、x64、ARM）和目标（设备、模拟器）。您可以通过在 Visual Studio 工具栏中添加平台选择器来轻松完成此操作。工具 -> 自定义 -> 命令 -> 工具栏 -> 标准，然后添加“解决方案平台”命令。这是一个包含 x86、x64、ARM、任何 CPU 等的组合框。然后你就可以选择，比如说，用于 WP8 模拟器的 x86 + 模拟器 WXGA，或用于 W8 设备的 x86 + 设备：

![看我的截图](../Images/2155519d152c0a089d7615f26e7f5ea0.png)

...以及之后它在VS中的外观：

![在此处输入图像描述](../Images/0d937aece5da5c346581d34356a70653.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T01:23:27.653

我很确定这是明确**不支持**的。主要原因是 WinRT 和 Phone 之间的 XAML 语法相似，但不完全兼容（手机是 Silverlight-ish，WinRT 是一些奇怪的新事物）。

针对两者的最佳方法是总共拥有 3 个项目：

1.  一个面向 Phone 和 WinRT 的可移植类库，所有逻辑都在其中
2.  链接到 PCL 的 WinRT UI 层
3.  链接到 PCL 的 Phone 的 UI 层

# c++ - 这个内存屏障是否正确实施？

> ID：14679248
> 
> 赞同：4
> 
> 时间：2013-02-04T01:19:29.347
> 
> 标签：c++, memory-barriers

我正在阅读一个遗留 C++ 代码，其中内存屏障定义如下。主要操作系统是 linux 和 vxworks。编译器是 gcc（WindRiver 的 gcc）。

```
#if((KCompilerGNU)||(kCompilerWindRiver))
   #define MEMORY_BARRIER   __asm__ volatile("nop\n");
#else
   #define MEMORY_BARRIER   __asm nop;
#endif 
```

但是我看不到无操作操作如何产生内存屏障？或者这只是一个错误的实现？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-04T01:28:36.687

这是一个编译器屏障，而不是一个完整的硬件内存屏障。也就是说，它旨在成为编译器无法优化的不透明调用，但在内存重新排序方面对硬件没有任何影响¹。如果所讨论的编译器实际上将 asm 块视为不透明的，则可以为此目的正确定义它（例如，gcc asm 块具有用于准确定义块之间可以更改的内容的特定规则等）。

如果您知道此代码所针对的硬件具有从不重新排序内存操作的强大内存模型，则将其称为完整内存屏障（通常会抑制编译器和硬件重新排序）可能是合适的。

* * *

¹也就是说，在程序是单线程或机器没有表现出有趣的重新排序（例如，简单的有序、非推测 CPU 或单 CPU 系统）的情况下，这样的屏障仍然是*足够*的.

# assembly - 未知的 Int 21 参数

> ID：14679251
> 
> 赞同：0
> 
> 时间：2013-02-04T01:20:38.577
> 
> 标签：assembly, x86, dos, interrupt

`int 21`就在我看到一个电话之前`XOR AX, 21CD`，只是好奇它的作用。我在 wiki 上找不到这种类型的参数调用[http://en.wikipedia.org/wiki/MS-DOS_API](http://en.wikipedia.org/wiki/MS-DOS_API)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T01:24:23.737

您必须知道 XOR 指令之前寄存器中的内容，因为这只会翻转 1 的位：

```
0010 0001 1100 1101 
```

如果寄存器最初包含零，则调用随机读取的函数 21。AL 寄存器将通过相同的指令设置为 CD。这是一个谜，因为在我能找到的文档中，这个调用没有使用 AL 寄存器来做任何事情。

# scala - 如何在scala中编写自定义线性集合

> ID：14679252
> 
> 赞同：3
> 
> 时间：2013-02-04T01:20:54.207
> 
> 标签：scala, collections

我想编写自定义线性集合。在某些特定情况下（不适用于所有参数类型），类似于扩展列表。

Scala 有复杂的集合类层次结构，我迷路了。我应该扩展什么特征，我应该实现什么方法？

我找到了*自定义可遍历*实现的理解教程：http: [//daily-scala.blogspot.ru/2010/04/creating-custom-traversable.html](http://daily-scala.blogspot.ru/2010/04/creating-custom-traversable.html)。

我正在寻找有关实现自定义线性序列的类似提示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T01:52:09.413

这与实现一个可遍历的确实没有什么不同。只有两个抽象方法 on`LinearSeq`和三个 on `LinearSeqLike`，您还应该扩展它们。

但是，正如后者的文档所表明的那样，重写以下方法很重要，这样它们才能有效地实现：

```
 def isEmpty: Boolean
 def head: A
 def tail: Repr 
```

# c# - 如何在 C# 中的组合框显示成员中附加两个字段值

> ID：14679253
> 
> 赞同：17
> 
> 时间：2013-02-04T01:21:02.257
> 
> 标签：c#, winforms, combobox

在我的表中，我有一个 and 字段`firstname`，`lastname`现在我想要在组合框中设置`firstname`和`lastname`，`displaymember`但我不知道该怎么做。

像这样的东西

```
cmbEmployees.DataSource = GetEmployees();
//something like below line which doesn't work
cmbEmployees.DisplayMember = "lastname, first_name";     
cmbEmployees.ValueMember = "id"; 
```

我怎样才能做到这一点？这样`lastname`和`firstname`都将显示在`combobox`

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2013-09-15T20:49:16.840

此示例将指导您如何在不修改基类的情况下执行此操作。

首先，您可以为 DisplayMember 保留一个属性，例如：

```
cmbEmployees.DisplayMember = "lastname"; 
```

现在，在 [Design] 模式下转到您的表单，右键单击 ComboBox -> Properties。

在属性窗口的顶部，单击事件（闪电图标），

在下面的事件列表中（在 Property Changed 下）查找 Format 并在那里输入一些事件名称，比如说： ComboBoxFormat ，然后按 Enter。你会看到这个：

```
private void ComboBoxFormat(object sender, ListControlConvertEventArgs e)
{

} 
```

现在在里面写下以下几行：

```
private void ComboBoxFormat(object sender, ListControlConvertEventArgs e)
{
    // Assuming your class called Employee , and Firstname & Lastname are the fields
    string lastname = ((Employee)e.ListItem).Firstname;
    string firstname = ((Employee)e.ListItem).Lastname;
    e.Value = lastname + " " + firstname;
} 
```

而已 ;）

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2013-02-04T01:36:12.703

假设您有这样的课程：

```
class Person
{
    public string FirstName
    {
        get;
        set;
    }

    public string LastName
    {
        get;
        set;
    }

    public string FullName
    {
        get
        {
            return LastName + ", " + FirstName;
        }
    }

    public Person(string firstname, string lastname)
    {
        FirstName = firstname;
        LastName = lastname;
    }
} 
```

如果您没有`FullName`属性，只需以您希望显示名称的格式创建一个。然后设置`DisplayMember`等于`FullName`。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2013-02-04T06:51:22.613

**您的查询在GetEmployees()**函数中应该是这样的。

```
"SELECT id,(lastname + ' ' + first_name) AS NAME FROM TABLE"

cmbEmployees.DataSource = GetEmployees();
cmbEmployees.DisplayMember = "NAME"; 
cmbEmployees.ValueMember = "id"; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-10-24T22:29:10.067

在 C# 6 中，在您的 Employee 类中创建只读属性

```
public string FullName=>$"{lastname} {firstname}"; 
```

然后

```
cmbEmployees.DataSource = GetEmployees();
//something like below line which doesn't work
cmbEmployees.DisplayMember = "FullName";     
cmbEmployees.ValueMember = "id"; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-04T01:36:24.153

尝试其中一种方法：

*   `Dictionary`以串联字段为值的新功能 - [https://stackoverflow.com/a/1006588/1816426](https://stackoverflow.com/a/1006588/1816426)
*   计算列 - [https://stackoverflow.com/a/1006546/1816426](https://stackoverflow.com/a/1006546/1816426)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-10-14T09:41:39.360

```
 public void alldata1()
    {
        var Person= context.Person.Select(s => new { 
            display = s.surName+" "+s.name,
            value = s.studentID
        });
        comboBoxStudentNom.DataSource = Person.ToList();
        comboBoxStudentNom.ValueMember = "value";
        comboBoxStudentNom.DisplayMember = "display";
    } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-02-28T20:45:53.197

CREATE VIEW [dbo].[get_view] AS SELECT CONCAT(sell_tb.Name,extra_tb.Name,purchase_tb.Name) AS Name FROM sell_tb FULL JOIN extra_tb ON extra_tb.E_ID = sell_tb.E_ID FULL JOIN purchase_tb ON purchase_tb.S_ID = sell_tb。 S_ID；

```
 private void alldata1()
    {
        conn.Open();
        SqlCommand cmd = conn.CreateCommand();
        cmd.CommandType = CommandType.Text;
        cmd.CommandText = "select * from [get_view]";
        cmd.ExecuteNonQuery();
        DataTable dt = new DataTable();
        SqlDataAdapter sda = new SqlDataAdapter(cmd);
        sda.Fill(dt);
        comboBox1.DataSource = dt;
        comboBox1.DisplayMember = "Name";
        conn.Close();
    } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-12-17T14:00:01.067

```
// Declare a class
private class ComboRec
   {
     public string ID { get; set; }
     public string FirstName { get; set; }
     public string LastName { get; set; }
     public string FullName { get; set; }
     public string Department { get; set; }
   }

    // Fill the Combo Items
    private void FillMyComboList()
            {
                EmployeesCombo.Items.Clear();
                EmployeesCombo.ValueMember = "ID";
                EmployeesCombo.DisplayMember = "FullName";

                MySqlCommand cmd = new MySqlCommand("select id, firstname, lastname, department from employees order by lastname, firstname", MyConnection);
                cmd.Transaction = myTransaction;
                MySqlDataReader rdr = cmd.ExecuteReader();

                ComboRec comborec;

                while (rdr.Read())
                {
                    comborec = new ComboRec();
                    comborec.ID = rdr["id"].ToString();
                    comborec.FirstName = rdr["firstname"].ToString();
                    comborec.LastName = rdr["lastname"].ToString();
                    comborec.FullName = rdr["lastname"].ToString() + ", " + rdr["firstname"].ToString();
                    comborec.Department = rdr["department"].ToString();

                    EmployeesCombo.Items.Add(comborec);
                }

                rdr.Close();
            }   

    // Get the values from combo
    string id = ((ComboRec)EmployeesCombo.SelectedItem).ID);
    string firstname = ((ComboRec)EmployeesCombo.SelectedItem).FirstName);
    string lastname = ((ComboRec)EmployeesCombo.SelectedItem).LastName);
    string fullname = ((ComboRec)EmployeesCombo.SelectedItem).FullName);
    string department = ((ComboRec)EmployeesCombo.SelectedItem).Department); 
```

# boolean-expression - 使用布尔代数证明 ~(A XOR B) 与 (~A XOR B) 相同

> ID：14679256
> 
> 赞同：-2
> 
> 时间：2013-02-04T01:21:21.397
> 
> 标签：boolean-expression

我需要证明表达式：

```
~(A XOR B) 
```

相当于

```
(~A XOR B) 
```

使用布尔代数。

我真的不知道如何开始，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T01:52:43.903

为了证明两个逻辑表达式是等价的，你可以用两种不同的方式进行。

1.  为每个表达式写一个[真值表](http://www.millersville.edu/~bikenaga/math-proof/truth-tables/truth-tables.html)，然后，如果得到的函数真值相同，则表达式是等价的；

2.  等价与两个方向的蕴涵相同；

    > A <=> B 等价于 (A => B) AND (B => A)

    因此，您需要尝试从 ~(A xor B) 中获取 (~A xor B)，反之亦然。

    *   **~(A xor B)** =
    *   根据 xor + 否定的定义 = **~ ( (~A and B) or (A and ~B) )** =
    *   根据德摩根定律 = **~ (~A 和 B) 和 ~(A 和 ~B)** =
    *   再次由德摩根定律 = **(A or ~B) and (~A or B)** =
    *   通过应用分配律 = **(A and ~A) or (A and B) or (~B and ~A) or (~B and B)** =
    *   忽略矛盾 = **(A and B) or (~B and ~A)** =
    *   在另一个方向应用 xor 的定义 = **~A xor B**。

    **结束**

    必须在另一个方向上执行相同的过程（从 (~A xor B) 获取 ~(A xor B) ）。那么证明就完成了。

# javascript - 将数组项添加到数组 X 次

> ID：14679258
> 
> 赞同：0
> 
> 时间：2013-02-04T01:21:24.620
> 
> 标签：javascript, arrays, loops

我有一个代表游戏元素的 6 个不同单词的基本数组。只是想知道如何将数组中每个单词的实例数相乘。

```
var gameItem = [cattle, wood, stone, metal, grain, craft]; 
```

也就是说，假设我希望将每个单词的 10 个实例添加到数组中，我该怎么做？顺序并不重要，因为它会被洗牌。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T01:38:11.003

不要忘记，除非您定义每个变量，否则您的数组不起作用。但据我了解，这些是单词，而不是变量。所以正确的数组声明是：

```
var newGameItem = ["cattle", "wood", "stone", "metal", "grain", "craft"] 
```

要重复该数组 10 次，您可以使用 for 循环和数组方法`concat()`。

```
var newGameItem = [];
for(var i=0 ; i<10 ; i++) {
    newGameItem = newGameItem.concat(gameItem);
}

> newGameItem : ["cattle", "wood", "stone", "metal", "grain", "craft", "cattle" ... ] 
```

我不知道您对此有何想法，但是，如果您想存储**大量**此类元素，例如，玩家有 1 头牛、12 块木头、20 块石头等……您可能应该有一个更好的数据结构，如下所示：

```
 var gameItem = {"cattle" : 1, "wood" : 12, "stone" : 20, "metal" : 0, "grain" : 0, "craft" : 0 }; 
```

所以通过这样做`gameItem.wood`，你会得到结果`> 12`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T01:30:30.680

你只需要几个循环：

```
function dupElements(arr, n) {
    for (var i = 0, len = arr.length; i < len; i++) {
        for (var j = 0; j < n; j++) {
            arr.push(arr[i]);
        }
    }
}

dupElements(gameItem, 10); 
```

外循环循环通过初始元素。内部循环添加`n`每个副本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T01:37:36.003

你可以做：

```
var gameItem = ['cattle', 'wood', 'stone', 'metal', 'grain', 'craft'];
var doublearr = gameItem.concat(gameItem); //x2
gameItem = doublearr.concat(doublearr);//x4
gameItem = gameItem.concat(gameItem );//x8
gameItem = gameItem.concat(doublearr);//x10 
alert(gameItem); 
```

将数组连接到自身，直到到达最近的 ^2（在我们的例子中为 8 = 2^3），然后添加其余部分。

我发布此解决方案是因为您在其中一个评论中写道，您希望得到一些性能不密集的东西。但我同意其他人的观点，即维护一个简单的 for 循环更具可读性和更容易。因此，如果您只有 x10 - 请保持简单。

# c# - CSharp 命名空间中的 RuntimeBinderException 是否表示 DLR 语言依赖？

> ID：14679259
> 
> 赞同：2
> 
> 时间：2013-02-04T01:21:48.230
> 
> 标签：c#, .net, dynamic

考虑到很大程度上与语言无关的 .NET 框架，包括类库和运行时，以及 DLR 受多种语言支持的事实，我觉得奇怪的是`System.Dynamic.DynamicObject`，C# 应用程序中的子类实际上会引发命名空间中的异常`CSharp`。尝试访问`dynamic`运行时不存在的成员时，我捕获了以下异常：

`{Name = "RuntimeBinderException" FullName = "Microsoft.CSharp.RuntimeBinder.RuntimeBinderException"}`

异常是否 `RuntimeBinderException`特定于 C#，如果是，每种语言都必须实现自己的绑定器异常吗？为什么异常不在更通用的名称空间中，这让我感到奇怪，这让我想知道“怎么了”？

我在 .NET 4.5 上的 VS 2012 Express 中以调试模式运行。该应用程序是用 C# 构建的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T01:50:32.380

您在命名空间中遇到异常的`CSharp`原因是 DLR 已确定有`dynamic`问题的对象是 C# 对象，并将其传递给 C# 运行时绑定程序进行处理。

支持 DLR 的每种语言都需要自己实现此运行时绑定系统，并且每种语言都依赖于语言的语义。例如，像 JScript 这样支持动态属性和方法创建的语言，可能不会在每次绑定失败时抛出异常，而是设置或返回一个新属性。

所以答案是，是的，每种想要在 DLR 绑定失败时抛出异常的语言都必​​须单独实现它。

（作为另一个示例：VB.NET 对动态对象的支持与它现有的后期绑定支持完全相同；`IDispatch`例如，您会从 DLR 绑定失败中得到与后期绑定失败相同的错误，所以它没有不需要单独的例外。）

# c++ - 带类型指针的C++函数调用，参数混淆：不允许不完整类型

> ID：14679260
> 
> 赞同：0
> 
> 时间：2013-02-04T01:22:14.650
> 
> 标签：c++, pointers, typedef, dynamic-arrays

我正在尝试围绕 C++ 进行思考。我将只给你一些小片段来帮助说明这个想法，而不会让事情变得复杂。顺便说一句，我只实现这些方法，我无法更改设置或参数。

我有一个用于动态数组数据结构的类，它包含称为股票的对象：

```
typedef class Stock ArrayType;

class DynamicArray {
    ArrayType** items;
    int numberOfElements;
    ...
} 
```

这是它的构造函数。我应该分配数组并添加一项，然后设置元素的数量。

```
DynamicArray::DynamicArray(ArrayType* const item){
    Stock *items = NULL; // ... i guess? pointers to pointers confuse me
    // now im guessing i need to create a actual stock array and point the above pointer to it
    items = new Stock[1]; // ERROR: incomplete type is not allowed? I've tried several things, and cant get rid of the red squiggles
    this->numberOfElements = 1;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T02:03:28.257

好的，有几个问题。马上，您必须首先包含 Stock。`Stock`编译器在编译之前需要完整的定义`DynamicArray`，因为我猜是内存分配。

其次，您希望`items` *成员值*包含对在构造函数中创建的数组的引用。因此，不要`Stock *items[1]`在构造函数中定义，而是将`new`语句的值直接分配给`this->items`; `this->`只要您没有在您正在处理的任何函数中定义具有相同名称的变量，您就可以省略。

最后，您分配了一个*指针数组*，因此您使用以下语法：`new ArrayType*[1]`

此外，正如编码实践要点一样，您不应在同一源中混合使用 typedef 及其原始类型。因此，我建议您`ArrayType`始终使用或根本不使用。

# ios - iOS - 阐明类和实例方法

> ID：14679262
> 
> 赞同：0
> 
> 时间：2013-02-04T01:22:51.053
> 
> 标签：ios, class, static, instance

我只是想确保我正确使用了类方法。

举例来说，假设我正在创建一个包含单个地图和该地图上的单个图块（例如，16 x 16 块）的游戏。

每个图块可以由建筑物、树木、道路等组成——这可以在整个游戏中发生变化。

我是否正确地设置一个带有**类方法**的 Map 类来初始化地图，仅仅是因为只有一个地图并且我不需要实例化多个地图？

**我是否也可以使用实例方法**设置一个 Tile 类来初始化瓷砖，因为会有 256 个瓷砖，每个瓷砖都有自己的属性？

努力解决这一切，任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T01:30:29.243

有多种模式可以处理这个问题，但基本上归结为这个`Map`类是一个单例。有些人更喜欢通过禁止创建多个实例来强制类的单例性（例如，通过隐藏构造函数，或使构造函数抛出异常等）。`Map`在其他情况下，只需将类记录为单例并照此使用就足够了。

在 Objective-C 中处理单例的一种简单方法是创建一个类方法来实例化它，即：

```
static Map* defaultMap = nil;
+ (Map*) defaultMap {
    if(!defaultMap) defaultMap = [[Map alloc] init];
    return defaultMap;
} 
```

对地图使用类方法可能不是一个好主意，就像全局变量通常应该减少到最低限度一样（尽管上面的示例实际上是一个全局变量，但重构一次代码会容易得多您需要多张地图）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T01:34:55.973

地图类可以实现为[单例模式](http://en.wikipedia.org/wiki/Singleton_pattern)。或将其限制为仅 1 个共享实例的任何其他方式。

# android - Android：AutoCompleteTextView 隐藏软键盘

> ID：14679264
> 
> 赞同：16
> 
> 时间：2013-02-04T01:22:54.417
> 
> 标签：android, android-softkeyboard, autocompletetextview

我有一个 AutoCompleteTextView，它像往常一样在用户输入 3 个字母后提供建议。一旦我触摸建议列表以隐藏软键盘，我想要一次。我在下面对表格布局所做的操作仅在单击建议列表以外的任何位置时隐藏键盘。

XML

```
<TableRow
    android:id="@+id/tableRow2"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:gravity="center" >

    <AutoCompleteTextView
        android:id="@+id/auto_insert_meds"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:ems="15"
        android:inputType="textVisiblePassword|textMultiLine"
        android:scrollHorizontally="false"
        android:text=""
        android:textSize="16sp" />
</TableRow> 
```

爪哇

```
TableLayout tbl = (TableLayout) findViewById(R.id.main_table);
tbl.setOnTouchListener(new OnTouchListener() {

    @Override
    public boolean onTouch(View v, MotionEvent event) {
        InputMethodManager in = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
        in.hideSoftInputFromWindow(v.getWindowToken(), 0);
        return true;
    }
}); 
```

自定义列表的 XML

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/medlist_linear_layout"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >

        <TextView
        android:id="@+id/med_name"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:scrollHorizontally="false"
        android:padding="3dp"
        android:textColor="@android:color/white" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-02-04T01:29:19.490

使用`OnItemClickListener`. 希望这有效:)

```
AutoCompleteTextView text = (AutoCompleteTextView) findViewById(R.id.auto_insert_meds);

text.setOnItemClickListener(new OnItemClickListener() {

  @Override
  public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
    InputMethodManager in = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
    in.hideSoftInputFromWindow(arg1.getWindowToken(), 0);

  }

}); 
```

**更新**

用这个

```
in.hideSoftInputFromWindow(arg1.getApplicationWindowToken(), 0); 
```

代替 -

```
in.hideSoftInputFromWindow(arg1.getWindowToken(), 0); 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2015-09-21T05:30:37.033

正如 chakri Reddy 建议的那样：

它对我有用，我刚刚更换了

这：

```
 in.hideSoftInputFromWindow(arg1.getWindowToken(), 0); 
```

和：

```
 in.hideSoftInputFromWindow(arg1.getApplicationWindowToken(), 0); 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-07-10T07:58:53.600

1) 将 AutoCompleteTextView 下拉高度更改为 MATCH_PARENT

```
setDropDownHeight(LinearLayout.LayoutParams.MATCH_PARENT); 
```

2) 通过覆盖 AutoCompleteTextView 适配器的 getView() 来关闭软键盘

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {

    View v = super.getView(position, convertView, parent);
    v.setOnTouchListener(new View.OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent event) {

            if (event.getAction() == MotionEvent.ACTION_DOWN) {
                InputMethodManager imm = (InputMethodManager) getActivity()
                        .getSystemService(
                                Context.INPUT_METHOD_SERVICE);
                imm.hideSoftInputFromWindow(
                        typeTextView.getWindowToken(), 0);
            }

            return false;
        }
    });

    return v;
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-03-17T12:24:31.803

在类似的线程中找到了这段代码。希望能帮助到你：

```
 private void hideKeyboard() {   
        // Check if no view has focus:
        View view = this.getCurrentFocus();
        if (view != null) {
            InputMethodManager inputManager = (InputMethodManager) this.getSystemService(Context.INPUT_METHOD_SERVICE);
            inputManager.hideSoftInputFromWindow(view.getWindowToken(), InputMethodManager.HIDE_NOT_ALWAYS);
        }
} 
```

[链接](https://stackoverflow.com/questions/1109022/close-hide-the-android-soft-keyboard/7696791#7696791)到原始帖子。请注意，这不是公认的答案。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2020-10-19T12:29:05.890

如果即使点击/单击也需要隐藏键盘（在使用下拉菜单（TextInputLayout + MaterialAutoCompleteTextView）的下拉场景中，以防止从预定义的下拉菜单中选择时出现键盘）

（科特林）

```
autoCompleteTextView.inputType = InputType.TYPE_NULL 
```

RG

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-08-21T22:10:07.947

如果这对任何人都有帮助，我也有类似的情况。

我的 AutoCompleteTextView 显示在没有标题栏的 DialogFragment 上，因为我`getWindow().requestFeature(Window.FEATURE_NO_TITLE);`在`onCreateDialog()`

我在后面添加了以下行`FEATURE_NO_TITLE`，结果列表显示在键盘上：

```
@Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {
        Dialog dialogo=super.onCreateDialog(savedInstanceState);
        dialogo.getWindow().requestFeature(Window.FEATURE_NO_TITLE);
        dialogo.getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_HIDDEN);
        return dialogo;
    } 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-12-30T12:14:05.413

```
AutoCompleteTextView autoText= (AutoCompleteTextView) findViewById(R.id.auto_insert_meds);

autoText.setOnItemClickListener(new OnItemClickListener() {
  @Override
  public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
    View view = this.getCurrentFocus();
    if (view != null) {
        InputMethodManager inputManager = (InputMethodManager) this.getSystemService(Context.INPUT_METHOD_SERVICE);
        inputManager.hideSoftInputFromWindow(view.getWindowToken(), InputMethodManager.HIDE_NOT_ALWAYS);

    }
  }
}); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-07-08T08:56:35.870

我为此工作了一整天，并设法开发了一个扩展（材料）AutoCompleteTextView 的自定义视图，并使用反射在弹出窗口上设置 OnTouchListener 以在触摸键盘时隐藏键盘，这样您就可以继续在 TextView 中输入，直到您准备滚动浏览建议。

希望有人觉得它有用。

[https://gist.github.com/MachFour/c6b5252292dd3bfe18d6b1141f137d32](https://gist.github.com/MachFour/c6b5252292dd3bfe18d6b1141f137d32)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-11-22T04:54:43.573

```
autoCompleteTextView.setInputType(InputType.TYPE_NULL); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-08-04T10:33:38.893

试试这个家伙..它会工作..!!!

```
 AutoCompleteTextView auto_text = (AutoCompleteTextView)findViewById(R.id.auto_insert_meds);
 auto_text.setOnItemClickListener(new OnItemClickListener() {
 @Override
public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) 
{
   InputMethodManager in = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
   in.hideSoftInputFromWindow(arg1.getApplicationWindowToken(), 0);
} }); 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-10-26T12:40:32.363

我已经使用 TextWatcher 来检测用户何时输入了至少 3 个字母（这会触发下载 API），如下所示：

```
 searchAutoComplete.addTextChangedListener(new TextWatcher() {
        @Override
        public void beforeTextChanged(CharSequence s, int start, int count, int after) {}

        @Override
        public void onTextChanged(CharSequence s, int start, int before, int count) {
            // when the user has clicked on an item in the list, it will trigger onTextChanged.
            // To avoid querying the server and showing the dropdown again, use searchAutoComplete.isPerformingCompletion()
            if (!searchAutoComplete.isPerformingCompletion()){
                if (s != null && s.length() >= 3) {
                    downloadSearchResults(s.toString());
                } else {
                    searchAutoComplete.dismissDropDown();// hide dropdown after user has deleted characters and there's less than 3 visible
                }
            } else {
                // user has clicked on a list item so hide the soft keyboard
                InputMethodManager in = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
                if (in != null) in.hideSoftInputFromWindow(searchAutoComplete.getApplicationWindowToken(), 0);
            }
        }

        @Override
        public void afterTextChanged(Editable s) { }
    }); 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-03-07T23:45:01.377

更好的解决方案是观察焦点。在 OnItemClickListener 中隐藏键盘仅在选择项目时才隐藏键盘，但从前一个元素（例如 EditText）的焦点丢失和回车丢失但键盘显示。这里是 Kotlin 中的代码

```
yourAutoCompleteTextView.setOnFocusChangeListener { v, hasFocus ->
    if (hasFocus) {
        val inputMethodManager = v.context.getSystemService(Context.INPUT_METHOD_SERVICE) as InputMethodManager
        inputMethodManager.hideSoftInputFromWindow(v.applicationWindowToken, 0)
   }
} 
```

# php - 下载文件作为附件文件大小不正确

> ID：14679268
> 
> 赞同：1
> 
> 时间：2013-02-04T01:23:17.243
> 
> 标签：php, header, force-download

我正在尝试强制链接以将文件下载为附件。这是我以前做过的事情，但是出了点问题，我不确定是什么。我尝试作为附件发送的文件类型都是 mp4 文件。这是我正在做的事情：

```
<?php
if(isset($_GET['file']))
{
    $file_path = dirname(__FILE__) . "/videos/$_GET[file]";
    if(file_exists($file_path))
    {

        $file_url = "/videos/$_GET[file]";
        header ("Content-type: video/mp4");
        header("Content-Transfer-Encoding: binary"); 
        header("Content-disposition: attachment; filename=\"".basename($_GET['file']) ."\""); 
        header("Content-Length: ".filesize($file_path));
        echo readfile($file_url);
    }
}
?> 
```

如您所见，我正在检查文件是否存在，然后再尝试提供它。发生的情况是我得到了文件，它的类型是正确的（MP4 视频），但文件的大小只有 100 字节左右。在调试时，我测试了文件大小是否正确，是的。我已将`readfile()`行更改为： `header("location:/videos/$_GET[file]");`

它带我去看视频。我已经做了很多谷歌搜索，但我没有想出这种行为的原因。有没有人见过这种类型的东西？关于可能导致这种情况的任何想法？任何帮助将不胜感激，非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T01:24:46.023

如果您在文本编辑器中打开您下载的文件的内容，您无疑会看到一条错误消息。这可能是因为您的路径以`/`. 当您从磁盘打开文件时，您的服务器路径的 doc root 是没有意义的。您需要指定真实路径。

此外，您的脚本非常不安全！任何人都可以从您的服务器上下载他们想要的任何文件。确保在提供文件之前检查该文件是否位于 doc 根目录中。 **永远不要**让用户不受限制地指定他们想要的任何文件。你不想做一些事情`?file=../../../etc/passwd`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-11T05:42:37.970

使用这些功能，它可以帮助你。

```
function getRemoteFilesize($url)
{
    $file_headers = @get_headers($url, 1);
    if($size =getSize($file_headers)){
return $size;
    } elseif($file_headers[0] == "HTTP/1.1 302 Found"){
        if (isset($file_headers["Location"])) {
            $url = $file_headers["Location"][0];
            if (strpos($url, "/_as/") !== false) {
                $url = substr($url, 0, strpos($url, "/_as/"));
            }
            $file_headers = @get_headers($url, 1);
            return getSize($file_headers);
        }
    }
    return false;
}

function getSize($file_headers){

    if (!$file_headers || $file_headers[0] == "HTTP/1.1 404 Not Found" || $file_headers[0] == "HTTP/1.0 404 Not Found") {
        return false;
    } elseif ($file_headers[0] == "HTTP/1.0 200 OK" || $file_headers[0] == "HTTP/1.1 200 OK") {

        $clen=(isset($file_headers['Content-Length']))?$file_headers['Content-Length']:false;
        $size = $clen;
        if($clen) {
            switch ($clen) {
                case $clen < 1024:
                    $size = $clen . ' B';
                    break;
                case $clen < 1048576:
                    $size = round($clen / 1024, 2) . ' KiB';
                    break;
                case $clen < 1073741824:
                    $size = round($clen / 1048576, 2) . ' MiB';
                    break;
                case $clen < 1099511627776:
                    $size = round($clen / 1073741824, 2) . ' GiB';
                    break;
            }
        }
        return $size;

    }
    return false;
} 
```

用法：

```
echo getRemoteFilesize('https://stackoverflow.com/questions/14679268/downloading-files-as-attachment-filesize-incorrect'); 
```

# vb.net - 在 HTML 中显示 VB 表格

> ID：14679272
> 
> 赞同：0
> 
> 时间：2013-02-04T01:23:35.960
> 
> 标签：vb.net, razor

我担心我错过了显而易见的事情，但我一直无法找到如何在 Razor 视图中显示 Visual Basic DataTable 对象。有没有办法将 DataTable 的行/列元素更改为所需的格式。

我正在使用 Visual Studio Professional 2012。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-13T12:03:54.023

这对我有用。我已经做了一天 MVC/Razor。似乎比@dan-o 的链接解决方案复杂得多

```
<table>
   @For Each row In Model.myDataTable.Rows
        @<tr>
            <td>@row("col1") </td>
             <td>@row("col2") </td>
        </tr>
   Next
</table> 
```

# ffmpeg - ffmpeg命令合并音频和图像

> ID：14679274
> 
> 赞同：7
> 
> 时间：2013-02-04T01:23:55.853
> 
> 标签：ffmpeg

我正在尝试实现我之前认为应该是一项简单任务的事情。是否有可以执行以下操作的 ffmpeg 命令：

将 audio.wav 文件转换为视频，将大约 100 张图片 (img%d.png) 添加到视频中，以便它们“自动”拉伸以填充视频的整个长度。

我不想手动设置帧速率，因为它要么让音频继续前进，要么落后。

我也不希望发生以下情况，当我使用“loop_input”时会发生这种情况：

创建了一个简短的图像视频，播放速度很快，然后在整个音频期间重复播放。

请让我知道命令。

我目前尝试了以下方法，但这些都没有给我想要的结果：

这个制作，但视频速度很快，音频不完整：

```
ffmpeg -i img%d.png -i audio.wav -acodec copy output.mpg 
```

这个制作短视频，在整个音频持续时间内重复：

```
ffmpeg -loop_input -shortest -i img%d.png -i audio.wav -acodec copy output.mpg 
```

这几乎可以工作，但是“-r 4”使视频变慢而音频继续。如果我使用“-r 5”，那么音频会变慢，而视频会继续播放：

```
ffmpeg -r 4 -i img%d.png -i audio.wav -acodec copy -r 30 output.mpg 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T14:16:48.460

测量音轨的时间，然后使用 -t $audio_duration。

此 arg 与“-loop 1”一起将在与音频匹配的时间停止 mp4。

您也可以尝试 2 pass 技术，包括 -vcodec libx264，因为它可以很好地生成 mp4。

并考虑根据您的输入和记录率调整的以下内容：

```
 -b:v 200k -bt 50k 
```

# jquery - 鼠标悬停/图像交换问题

> ID：14679275
> 
> 赞同：1
> 
> 时间：2013-02-04T01:24:08.680
> 
> 标签：jquery, html, css

在这个 JSFiddle 中，我试图做一个简单的鼠标悬停在图像上，它改变图像，鼠标关闭，图像变回来。但由于某种原因，我没有在代码中看到问题。

[http://jsfiddle.net/gmULU/2/](http://jsfiddle.net/gmULU/2/)

```
 $(document).ready(function(){
 $('.normalClassName').click(function () {
$(this).addClass('hoverClassName');
}, function () {
$(this).removeClass('hoverClassName');
});
}); 
```

原始图像平铺的地方似乎存在“平铺”问题。请参阅 JSFiddle。

另外，如果有人能告诉我我需要添加什么代码，那么我可以在第二个图像上单击鼠标，然后在右侧出现另一个图像，我可以在其中单击第三个图像以转到链接. 谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T01:46:04.937

1.  如果您希望它发生在`mouseover`or `hover`，为什么要使用`.click()`？
2.  `.click()`没有`handlerOut`附加到它。

如果您只需要按照问题中的说明切换图像（而不是背景）（我忽略了您的代码），那么您可以使用它：

```
$(document).ready(function () {
    $('.normalClassName').hover(function () {
        $(this).find('img').attr( 'src', 'http://creativebits.org/files/500px-Apple_Computer_Logo.svg_.png' );
    }, function () {
        $(this).find('img').attr( 'src', 'http://www.applegazette.com/wp-content/uploads/apple-logo.jpg' );
    });
}); 
```

这是工作小提琴更新的[链接。](http://jsfiddle.net/gmULU/5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T01:43:31.273

如果您只需要从一个图像交换到另一个图像，您可以这样做：

**HTML**

```
<div class="normalClassName"></div> 
```

**CSS**

```
.normalClassName {
    width: 512px;
    height: 512px;
    background: transparent url('http://www.applegazette.com/wp-content/uploads/apple-logo.jpg') top left no-repeat;
}

.normalClassName:hover {
     background: transparent url('http://creativebits.org/files/500px-Apple_Computer_Logo.svg_.png') top left no-repeat;
} 
```

这样，当鼠标悬停时，背景将从一个图像切换到另一个图像，但请记住使用相同大小的图像。

这里要测试的[小提琴。](http://jsfiddle.net/ragnarokkr/Eqxb9/)正如你所看到的图像有不同的大小，效果是*丑陋*的。

# php - Doctrine MongoDB 在没有 ODM 的情况下使用

> ID：14679281
> 
> 赞同：7
> 
> 时间：2013-02-04T01:24:52.403
> 
> 标签：php, mongodb, doctrine, odm

我在 Symfony2 中使用 Doctrine MongoDB，但现在我想做一些没有 ODM 对我来说更容易的事情，我怎样才能获得 MongoClient 或 MongoCollection 对象？

我想以老式方式使用 MongoDB，例如： http: [//php.net/manual/en/mongocollection.find.php](http://php.net/manual/en/mongocollection.find.php)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-04T01:34:04.497

您可以`MongoClient`从`DocumentManager`使用中获得

```
$mongoClient = $dm->getConnection()->getMongo(); 
```

同样，您可以使用获取`MongoCollection`文档类*className*的实例

```
$mongoCollection = $dm->getDocumentCollection('className')->getMongoCollection(); 
```

或更简单地说

```
$mongoCollection = $dm->getConnection()->getMongo()
    ->selectCollection('collectionName'); 
```

# xml - Razor 而不是 XSLT 在 MVC3/MVC4 应用程序中转换 XML 文档？

> ID：14679285
> 
> 赞同：3
> 
> 时间：2013-02-04T01:25:39.033
> 
> 标签：xml, asp.net-mvc-3, razor

**背景**

我需要将 XML 文档转换为 XHTML 文档，以便在 MVC3 Web 应用程序中转换为 DOCX。我将在 XML 数据周围的段落文本中进行合并。段落文本是从数据库中提取的。在过去，我肯定会使用 XSLT 来转换 XML。但是我现在意识到 Razor 提供了一个非常引人注目/更好的选择。我的 XSLT 现在有点生疏了，无论如何我都会在我的 MVC 应用程序中大量使用 Razor。那么Razor是要走的路吗？

如果剃须刀是要走的路，那么我将不胜感激如何将其包含在控制器中。我最初的伪代码想法是：

```
 ViewBag.MyXMLDoc = DocXML;    
  var MyDocXHtml = View("XHtmlRazorRenderer", ParagraphTextListModel); 
```

想法非常感谢。

**编辑**

```
MyDocument = MyDocument.LoadXML("MyDocXML.xml")    
ViewBag.MyDocument = MyDocument;
var MyDocXHtml = View("XHtmlRazorRenderer", ParagraphTextListModel); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T01:34:11.153

对于给定的工作，我会坚持使用 XSLT。

请注意，Razor 是一个“通用”文本模板引擎，它不会帮助生成正确的 XML。此外，与 LINQ-to-XML 相比，使用 XPath 遍历具有名称空间的复杂 XML 更加自然和简洁。

生成执行 XSLT 工作的自定义视图引擎并不难，就像 Razor 模板呈现文本和 HTML 一样。这允许在 ASP.NET MVC 应用程序范围内很好地自然地集成 XSLT 呈现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T01:56:48.520

也许您可以创建一个模仿 XML 结构的 ViewModel。

那样...您不依赖 ViewBag... 并且可以遍历 viewmodel 属性和集合以使用 Razor 生成 HTML。

应该在控制器上创建视图模型，加载 XML，然后使用 xpath 加载视图模型。

然后，在 Razor 中，使用 ViewModel 生成 HTML。

希望您的 XML 不太复杂。

**您的视图模型：**

```
public class MyViewModel{
   public ParsedXMLDoc myXmlData {get; set;}
   public ParagraphTextListModel paragraph {get; set;}
} 
```

在您的控制器中，只需将其`MyViewModel`作为模型传递给视图。

# parallel-processing - 使用 pthread 会增加执行时间，改进建议

> ID：14679286
> 
> 赞同：2
> 
> 时间：2013-02-04T01:26:00.280
> 
> 标签：parallel-processing, pthreads, mutex, latency

我有一段代码，看起来像这样，

```
 for(i=0;i<NumberOfSteps;i++)
{
    for(k=0;k<NumOfNodes;k++)
    {

        mark[crawler[k]]++;
        r = rand() % node_info[crawler[k]].num_of_nodes;
        crawler[k] = (int)DataBlock[node_info[crawler[k]].index+r][0];
    }
} 
```

我对其进行了更改，以便可以在多个线程之间分配负载。现在看起来像这样

```
for(i=0;i<NumberOfSteps;i++)
{
    for(k=0;k<NumOfNodes;k++)
    {            
        pthread_mutex_lock( &mutex1 );
        mark[crawler[k]]++;
        pthread_mutex_unlock( &mutex1 );

        pthread_mutex_lock( &mutex1 );
        r = rand() % node_info[crawler[k]].num_of_nodes;
        pthread_mutex_unlock( &mutex1 );

        pthread_mutex_lock( &mutex1 );
        crawler[k] = (int)DataBlock[node_info[crawler[k]].index+r][0];
        pthread_mutex_unlock( &mutex1 );
   }
} 
```

我需要互斥锁来保护共享变量。事实证明我的并行代码比较慢。但为什么 ？是因为互斥体吗？

这可能与缓存线大小有关吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T08:20:16.277

You are not parallelizing anything but the loop heads. Everything between lock and unlock is forced to be executed sequentially. And since lock/unlock are (potentially) expensive operations, the code is getting slower.

To fix this, you should at least separate expensive computations (without mutex protection) from access to shared data areas (with mutexes). Then try to move the mutexes out of the inner loop.

You could use atomic increment instructions (depends on platform) instead of plain '++', which is generally cheaper than mutexes. But beware of doing this often on data of a single cache line from different threads in parallel (see ['false sharing'](http://mechanical-sympathy.blogspot.de/2011/07/false-sharing.html)).

AFAICS, you could rewrite the algorithm as indicated below with out needing mutexes and atomic increment at all. getFirstK() is NumOfNodes/NumOfThreads*t if NumOfNodes is an integral multiple of NumOfThreads.

```
for(t=0;t<NumberOfThreads;t++)
{
    kbegin = getFirstK(NumOfNodes, NumOfThreads, t);
    kend   = getFirstK(NumOfNodes, NumOfThreads, t+1);

    // start the following in a separate thread with kbegin and kend 
    // copied to thread local vars kbegin_ and kend_

    int k, i, r;
    unsigned state = kend_; // really bad seed

    for(k=kbegin_;k<kend_;k++)
    {
        for(i=0;i<NumberOfSteps;i++)
        {
            mark[crawler[k]]++;
            r = rand_r(&state) % node_info[crawler[k]].num_of_nodes;
            crawler[k] = (int)DataBlock[node_info[crawler[k]].index+r][0];
        }
    }
}
// wait for threads/jobs to complete 
```

This way to generate random numbers may lead to bad random distributions, see [this question](https://stackoverflow.com/questions/10984974/why-do-people-say-there-is-modulo-bias-when-using-a-random-number-generator) for details.

# facebook - Facebook 我需要 app_id 来在我的网站上集成开放图吗

> ID：14679287
> 
> 赞同：1
> 
> 时间：2013-02-04T01:26:04.087
> 
> 标签：facebook, facebook-opengraph

我一直在阅读有关使用 Open Graph (OG) 元标记来改进 facebook 与您的网站合作的方式。我已经阅读了两篇关于创建应用程序并使用应用程序 ID 的教程。但我不是在开发应用程序，我只有一个业务页面......我可以只使用页面 ID 吗？

任何人还可以指出在我的网站中使用 OG 的任何好的、简单的资源吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T01:42:24.473

sharer.php 方法（已弃用）允许您在没有应用程序的情况下发布。feed/post 方法似乎需要一个 app_id，尽管可能有一些方法可以解决这个问题。从好的方面来说，创建应用程序没有什么复杂的，所以，如果这是你必须做的，我会说做吧:)

[这](http://sb2013boulevard.myverizonpic.com/drawImageForFB4.php?user_videos_id=97947)是一个使用提要/发布方法的应用程序的工作方式示例（您需要单击顶部的“发布到提要”链接（是的，我知道它看起来不像链接！）。

[这](https://www.facebook.com/sharer/sharer.php?u=http://sb2013boulevard.myverizonpic.com/drawImageForFB2.php?user_videos_id=97947)是仅使用 Sharer的完全相同的示例（请注意，这次它指向的 url 略有不同（drawImageForFB2.php 而不是 drawImageForFB4.php）。

我使用 php 来呈现基于我收集的 vidId 的标签，但这既不在这里也不在那里......你可以像静态 HTML 页面一样轻松地拥有它。

OG 标签的内部结构几乎相同，OG 中的 app_id 标签是完全可选的，因为它属于第二个示例）。

哦，addthis 使用看起来像这样的对话框 api 来完成它

> [https://www.facebook.com/dialog/feed?redirect_uri=http://s7.addthis.com/static/postshare/c00.html&app_id=140586622674265&link=http://support.addthis.com/customer/portal/文章/381222-optimize-facebook-sharing#.UQ8bBJM9KQk.facebook&name=Optimize%20Facebook%20Sharing&description=](https://www.facebook.com/dialog/feed?redirect_uri=http://s7.addthis.com/static/postshare/c00.html&app_id=140586622674265&link=http://support.addthis.com/customer/portal/articles/381222-optimize-facebook-sharing#.UQ8bBJM9KQk.facebook&name=Optimize%20Facebook%20Sharing&description=)

# r - R中条件的两个数据集之间的比率

> ID：14679288
> 
> 赞同：0
> 
> 时间：2013-02-04T01:26:21.387
> 
> 标签：r

我有两个数据集。一个数据集是染料，它有两列时间和染料，另一个数据集是 sed。Sed 数据集也有 time 和 sed。然后我想从 sed 与染料的比率中找到新的变量 new。我想找到这样的比率，如果染料或 sed 为零，那么 new 将为零，否则将 new 计算为 sed /dye。

到目前为止我工作的代码如下：

```
dyei94j66 <- read.table("i94 j66 dye time series.Dat",header=T,sep="\t")
names(dyei94j66) <- c("Time","Dye")
head(dyei94j66)
sedi94j66 <- read.table("i94 j66 sediment time series.Dat", header=T,sep="\t")
names(sedi94j66) <- c("Time","Sed")
head(sedi94j66)
newi94j66 <- data.frame(sedi94j66$Sed / dyei94j66$Dye)
head(newi94j66)
# Merge two datasets
totaldata <- merge(dyei94j66,sedi94j66, all=TRUE) 
```

我不知道如何使用条件来计算比率。可能是我需要创建一个我不确定的功能。现在，当染料或 sed 为零时，R 计算的值为 NaN。所以，我想在计算比率时将 NaN 更改为零。

我希望我解释了我在寻找什么。谢谢。

i94 j66 沉积物时间序列的数据可以在[https://www.dropbox.com/s/1cbo8wul9nb8zeh/i94%20j66%20sediment%20time%20series.Dat](https://www.dropbox.com/s/1cbo8wul9nb8zeh/i94%20j66%20sediment%20time%20series.Dat) i94 j66 dey 时间序列的数据可以在[https上找到://www.dropbox.com/s/sqm8rip2xjh3tiu/i94%20j66%20dye%20time%20series.Dat](https://www.dropbox.com/s/sqm8rip2xjh3tiu/i94%20j66%20dye%20time%20series.Dat)

# c - 使用代码运动进行优化

> ID：14679289
> 
> 赞同：1
> 
> 时间：2013-02-04T01:26:49.793
> 
> 标签：c, loops, optimization

我正在做一项优化 C 代码的任务；教授暗示代码运动应该是解决这个特定问题的主要工具。

这是最初的未优化代码：

```
void naive_smooth(int dim, pixel *src, pixel *dst) {
    int i, j;
    for (i = 0; i < dim; i++)
        for (j = 0; j < dim; j++)
            dst[RIDX(i, j, dim)] = avg(dim, i, j, src);
}

typedef struct {
    unsigned short red;
    unsigned short green;
    unsigned short blue;
} pixel;

#define RIDX(i,j,n) ((i)*(n)+(j))

static pixel avg(int dim, int i, int j, pixel *src) {
    int ii, jj;
    pixel_sum sum;
    pixel current_pixel;
    initialize_pixel_sum(&sum);
    for(ii = max(i-1, 0); ii <= min(i+1, dim-1); ii++)
        for(jj = max(j-1, 0); jj <= min(j+1, dim-1); jj++)
            accumulate_sum(&sum, src[RIDX(ii, jj, dim)]);

    assign_sum_to_pixel(&current_pixel, sum);
    return current_pixel;
}

static void initialize_pixel_sum(pixel_sum *sum) {
    sum->red = sum->green = sum->blue = 0;
    sum->num = 0;
    return;
}

static void accumulate_sum(pixel_sum *sum, pixel p) {
    sum->red += (int) p.red;
    sum->green += (int) p.green;
    sum->blue += (int) p.blue;
    sum->num++;
    return;
}

static void assign_sum_to_pixel(pixel *current_pixel, pixel_sum sum) {
    current_pixel->red = (unsigned short) (sum.red/sum.num);
    current_pixel->green = (unsigned short) (sum.green/sum.num);
    current_pixel->blue = (unsigned short) (sum.blue/sum.num);
    return;
} 
```

这是我到目前为止的优化版本：

```
void smooth(int dim, pixel *src, pixel *dst) {
    int i, j;
    int ii, jj;
    pixel_sum sum;
    pixel current_pixel;
    pixel p;
    int localDim = dim;
    for (i = 0; i < localDim; i++) {
        int dimi = localDim * i;
        int mini = min(i+1, localDim-1);
        int maxi = max(i-1, 0);
        for (j = 0; j < localDim; j++) {
            int minj = min(j+1, localDim-1);
            int maxj = max(j-1, 0);
            sum.red = sum.green = sum.blue = sum.num = 0;
            for(ii = maxi; ii <= mini; ii++) {
                int dimii = localDim * ii;
                for(jj = maxj; jj <= minj; jj++) {
                    p = src[dimii + jj];
                    sum.red += (int) p.red;
                    sum.green += (int) p.green;
                    sum.blue += (int) p.blue;
                    sum.num++;
                }
            }
            current_pixel.red = (unsigned short) (sum.red/sum.num);
            current_pixel.green = (unsigned short) (sum.green/sum.num);
            current_pixel.blue = (unsigned short) (sum.blue/sum.num);
            dst[dimi + j] = current_pixel;
        }
    }
} 
```

到目前为止，我对此所做的更改都是我认为应该是代码运动优化原则的所有事情——我已经将方法调用（avg、initialize_pixel_sum 等）转换为本地代码，创建了全局变量的本地版本（dim 到 localDim），并将循环定义中的函数移到循环之外（min 和 max 函数以及 dim/localDim 上的乘法）。然而，虽然任务附带的测试套件表明这与原始代码产生了相同的结果，但它显示 CPE 完全没有变化......所以我重写了代码而没有造成任何优化效果。

我真的很困惑为什么这没有任何效果，并且非常感谢任何关于什么样的代码运动会导致这组功能的 CPE 变化的见解。

谢谢！

# python - 提供的文件是陈旧的/缓存的；Python 为 fcgi + web.py + nginx

> ID：14679298
> 
> 赞同：0
> 
> 时间：2013-02-04T01:28:22.313
> 
> 标签：python, ubuntu, nginx, web.py, fastcgi

我正在使用 Nginx 和 fcgi、python 和 web.py 在 ubuntu 中提供文件。我的 index.py 内容是：

```
app = web.application(urls, globals(), True)
if __name__ == "__main__":
    web.wsgi.runwsgi = lambda func, addr=None: web.wsgi.runfcgi(func, addr)
    app.run() 
```

我正在启动：

```
spawn-fcgi -n -d /usr/share/nginx/www -f ~/Projects/index.py -a 127.0.0.1 -p 9002 
```

效果很好，除了，一旦我对源文件（index.py 或它包含的任何类）进行了更改，这些新文件就永远不会加载。我必须停止 spawn-fcgi 并重新启动它以查看任何更改。这使得开发非常繁琐。

此外，我已经关闭了 python .pyc/cache 文件的生成。

TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T02:03:18.303

这很可能是设计使然。

您通常不希望在生产环境中重新加载模块（性能，并且由于 Python 中的模块重新加载并不总是具有预期的效果）。

对于开发，使用一些其他更简单的服务器模型（例如，Django 为这个确切目的提供了自己的开发服务器，我没有使用 webpy，但根据[教程](http://webpy.org/docs/0.3/tutorial)它似乎具有相同的功能）。仅在部署 webapp 时使用 nginx，而不是在您的开发环境中。

在正常情况下，您不必担心 .pyc 文件（在一些有问题的 NFS 设置中，或者当 .pyc 文件由错误的用户使用错误的权限创建时除外）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T07:01:31.337

我使用 nginx+uwsgi 或 apache+mod_wsgi 部署我的应用程序，如果我`touch code.py`. 但是我在开发时从集成服务器运行应用程序。

如果在开发模式下运行具有自己的重新加载器的 web.py 集成服务器不是一个选项，那么唯一的选择是编写您自己的具有重新加载功能的调度程序。

# c++ - C++：可以用具有相同参数的私有构造函数重载构造函数吗？

> ID：14679299
> 
> 赞同：3
> 
> 时间：2013-02-04T01:28:29.980
> 
> 标签：c++, class, constructor, overloading

可以用具有相同参数的私有构造函数重载构造函数吗？

基本上，如果某个东西存储了一个正整数，那么在公共构造函数中它会确保存储了一个正整数，而在私有构造函数中它不会执行检查。

显然这个例子并不是一个真正合适的用途，但有时你想在一个方法中创建一个对象并且你不希望它浪费时间来执行完全安全的初始化；当您稍后要再次执行它们或者它们只是不必要的时候，您可能只想告诉它在没有特殊检查的情况下立即创建一些东西（或者更谨慎的堆分配或一些昂贵的东西），并且类中的方法应该能够自动使用此构造函数，而不是具有相同参数的其他公共构造函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T01:31:11.673

不，您不能用私有构造函数重载公共构造函数或另一个成员函数：只有名称和参数类型才可用于重载决议。

要执行您要查找的操作，请定义一个私有构造函数，该构造函数接受一个`bool`指示需要执行参数检查的附加参数：

```
class A {
public:
    A(int x) : A(x, true) {}
private:
    A(int x, bool check) {
        if (check) {
            // Perform the check of the x argument
        }
    }
}; 
```

为了构造一个实例并绕过检查，可以访问私有构造函数的函数调用

```
A aUnchecked(-123, false); 
```

已检查的实例以通常的方式构造：

```
A aChecked(123); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T01:35:50.450

您不能重载私有与公共的访问权限，但您可以重载签名：参数的数量及其类型。

私有构造函数很常见。

一种用法是用于逻辑“删除”的构造函数（最终由 C++11 直接支持），另一种用法是供公共工厂函数使用。

* * *

例子：

```
class A
{
public:
    A( int const x)
    {
        // Whatever, checked construction.
        // Perform the check of the x argument.
        // Then other things.
        // In C++11 it can be done by checking x and forwarding to the
        // unchecked constructor in the same class. Not shown here though.
    }

private:
    enum unchecked_t { unchecked };
    A( int const x, unchecked_t )
    {
        // Unchecked construction.
    }

    // Methods that possibly use the unchecked constructor.
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T01:36:58.870

使用私有构造函数，您不能直接实例化一个类，而是使用名为 Constructor Idiom 的东西。

您不能继承该类的其他事情，因为要继承的类将无法访问构造函数

你应该做的是创建从构造函数调用的方法来检查

# xcode - UITapGestureRecognizer 在 segue 期间作为僵尸崩溃

> ID：14679300
> 
> 赞同：1
> 
> 时间：2013-02-04T01:28:33.643
> 
> 标签：xcode, ios5, segue, uitapgesturerecognizer, nszombie

我遇到了奇怪的崩溃。我有一个 UITableViewController 与上下文连接到另一个 tableview 控制器。

单击单元格时，我收到以下消息崩溃：

```
[UITapGestureRecognizer retain]: message sent to deallocated instance 0x8700af0 
```

所以我运行了僵尸仪器，这就是它所显示的：

```
#   Address Category    Event Type  RefCt   Timestamp   Size    Responsible Library Responsible Caller
0   0xf5f36c0   UITapGestureRecognizer  Malloc  1   00:04.128.790   80  UIKit   UINibDecoderDecodeObjectForValue
1   0xf5f36c0   UITapGestureRecognizer  Retain  2   00:04.128.807   0   UIKit   -[UIRuntimeConnection initWithCoder:]
2   0xf5f36c0   UITapGestureRecognizer  Retain  3   00:04.128.880   0   UIKit   UINibDecoderDecodeObjectForValue
3   0xf5f36c0   UITapGestureRecognizer  Retain  4   00:04.128.959   0   UIKit   -[UIRuntimeConnection initWithCoder:]
4   0xf5f36c0   UITapGestureRecognizer  Retain  5   00:04.129.007   0   UIKit   UINibDecoderDecodeObjectForValue
5   0xf5f36c0   UITapGestureRecognizer  Retain  6   00:04.129.017   0   UIKit   UINibDecoderDecodeObjectForValue
6   0xf5f36c0   UITapGestureRecognizer  Retain  7   00:04.129.079   0   UIKit   -[UINib instantiateWithOwner:options:]
7   0xf5f36c0   UITapGestureRecognizer  Release 6   00:04.129.111   0   UIKit   -[UINibDecoder finishDecoding]
8   0xf5f36c0   UITapGestureRecognizer  Release 5   00:04.129.124   0   UIKit   -[UINibDecoder finishDecoding]
9   0xf5f36c0   UITapGestureRecognizer  Release 4   00:04.129.130   0   UIKit   -[UINibDecoder finishDecoding]
10  0xf5f36c0   UITapGestureRecognizer  Release 3   00:04.129.135   0   UIKit   -[UINibDecoder finishDecoding]
11  0xf5f36c0   UITapGestureRecognizer  Release 2   00:04.129.139   0   UIKit   -[UIRuntimeConnection dealloc]
12  0xf5f36c0   UITapGestureRecognizer  Release 1   00:04.129.144   0   UIKit   -[UIRuntimeConnection dealloc]
13  0xf5f36c0   UITapGestureRecognizer  Release 0   00:04.130.131   0   Foundation  __NSFireDelayedPerform
14  0xf5f36c0   UITapGestureRecognizer  Zombie  -1  00:04.131.132   0   UIKit   -[UINib instantiateWithOwner:options:] 
```

tapGestureRecognizer 通过 IB 添加，声明为弱。有人建议不要在 ViewDidUnload 中将其设置为 nil，所以我将其注释掉。

现在，如果我转到选项卡控制器中的另一个选项卡并在那里进行一些 segues 并返回到第一个遇到崩溃的表视图控制器，则没有崩溃，一切都很好。

同样在崩溃的控制器中，我显示了两种不同类型的对象，有些只是文本，有些是图像。只有图像崩溃。文本单元格很好。

我在 iOS5 和 iOS5.1 上运行它。发生在手机和模拟器上。这不会在 iOS6 设备或 iOS6.1 模拟器上崩溃。

有谁知道这里发生了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T03:42:13.003

我有这个完全相同的问题。我有一个静态表格视图，用于我的菜单，该视图与其他视图相结合。只有我有手势识别器的视图在 iOS 5 中不起作用，但在 iOS 6 中可以正常工作。最初我只有 IBOutlets 用于操作，而不是实际的手势识别器本身。我为识别器本身添加了 IBOutlets，现在我没有得到任何僵尸:)

-Rojuinex

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T11:41:29.060

删除在 Xib 或情节提要中实现的 UITapGestureRecognizer 并使用代码实现它。它工作正常所有操作系统版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T02:36:00.963

到目前为止，解决方案是从我正在使用的控制器中删除手势识别器，这似乎导致了问题。

# ruby-on-rails - RefineryCMS 索引视图在 /public 中生成/保存

> ID：14679308
> 
> 赞同：0
> 
> 时间：2013-02-04T01:30:05.650
> 
> 标签：ruby-on-rails, refinerycms, refinery

我刚开始在我的 Rails 应用程序中使用 RefineryCMS 作为宝石，到目前为止我一直很喜欢它（真的很棒）！

宝石文件：

```
gem 'refinerycms', '~> 2.0.0'
# refinerycms engines
gem 'refinerycms-blog', '~> 2.0.0'
gem 'refinerycms-inquiries', '~> 2.0.0'
gem 'refinerycms-page-images', '~> 2.0.0'
gem 'refinerycms-search', '~> 2.0.0' #TODO: remove this gem, not used 
```

我在生产模式下运行应用程序时遇到问题。当用户访问根页面时，应用程序会将生成的 html 页面作为响应发送，并将其保存在 /public 作为 index.html。这有效地将根目录转换为静态页面。:(

我认为问题可能源于我想使用 blog/posts#index 视图作为根页面。

这是我的 route.rb：

```
# root :to => "refinery/blog/posts#index"
  root :to => redirect { |p, req| req.flash.keep; "/blog" }
  mount Refinery::Core::Engine, :at => '/' 
```

我最初在问题开始之前使用了注释掉的行，然后我切换到第二个根 :to 在搜索之后并认为重定向可能会解决问题。

我以为它消失了几天，但并不不幸。现在该应用程序在 /public 中生成了一个“blog.html”，导致与以前相同的问题。

如果有人有任何建议，我会全力以赴，谢谢。

# java - Java 图形未显示

> ID：14679317
> 
> 赞同：0
> 
> 时间：2013-02-04T01:30:52.283
> 
> 标签：java, swing, nullpointerexception

我正在尝试画一个红绿灯。基本上是一个长方形框架，上面附有 4 个按钮。我已经按照给我的指示进行了操作，但我一定遗漏了一些东西。当我运行程序时，我得到：

```
Exception in thread "main" java.lang.NullPointerException
    at TrafficLightPanel.<init>(TrafficLightPanel.java:14)
    at TrafficLightApp.main(TrafficLightApp.java:11) 
```

对此的任何帮助都会很棒^^

主要方法

```
import javax.swing.*;
public class TrafficLightApp {
public static void main(String[] args) {

    JFrame frame = new JFrame("Traffic Lights");
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setVisible(true);

    TrafficLightPanel lightPanel = new TrafficLightPanel(); //line 11
    frame.add(lightPanel);//JFrame containing instance of TrafficLightPanel class

    }

} 
```

支持类

```
import javax.swing.*;
import java.awt.*;
public class TrafficLightPanel extends JPanel{
    private JButton red,amber,green,change;
    private JLabel buttonLabel,lastPressed;
    private JPanel buttonPanel;

    public TrafficLightPanel(){
        //JFrame frame = new JFrame();
        JPanel panel = new JPanel();

        panel.setSize(200,400);
        panel.setBackground(Color.blue);
        buttonPanel.setSize(80,390); //line 14
        buttonPanel.setBackground(Color.white);
        buttonPanel.add(red);
        buttonPanel.add(amber);
        buttonPanel.add(green);
        buttonPanel.add(change);
        buttonPanel.add(buttonLabel);

        panel.add(buttonPanel);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T01:37:07.397

您使用了**很多**空变量，仅仅因为在顶部声明的引用变量**并不**意味着它们神奇地分配了一个实例，您仍然需要创建`JComponent`对象。

由于您实例化`panel`但不实例化`buttonPanel`，那是您的第一个 NPE。您也不需要实例化您的 JButton，您只需将它们添加到您的, 与and`buttonPanel`相同的东西（但此 var 未使用）。`buttonLabel``lastPressed`

另外，请记住，这`TrafficLightPanel`已经是一个`JPanel`，您也许可以摆脱一些冗余。

所以，基本上你必须在使用之前**实例化**（使用`new`关键字）在顶部声明的*每个变量。*定位也将是一个问题，但这不是您当前的问题。

# graphics - 以 8 位浮点数 (cg) 编码数据

> ID：14679324
> 
> 赞同：0
> 
> 时间：2013-02-04T01:31:54.673
> 
> 标签：graphics, encoding, floating-point, cg, rgba

语言是cg。

我有一个必须介于 0 和 1 之间的 8 位浮点数（它是 float4 rgba 颜色值的“a”分量）。我想在其中存储一个 6 位无符号整数和一个 2 位无符号整数。如何安全地将这两个值存储在这 8 位中？

我找不到任何关于 8 位浮点数格式的文档，尤其是限制在 0 和 1 之间的文档。我假设它比仅仅更复杂`data / 255`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T01:37:52.040

OpenGL 标准保证在写入 8 位帧缓冲区时至少保留 256 个不同的值。我很确定 Cg 也会这样做。

因此，您应该能够以这种方式编写两个值：

```
output.a = (4.0 * clamp(val1, 0.0, 63.0)
                + clamp(val2, 0.0, 3.0)) / 255.0; 
```

并像这样检索它们：

```
float val1 = floor(input.a * 255.0 / 4.0);
float val2 = fmod(input.a * 255.0, 4.0); 
```

这相当于对整数的按位运算。

# asp-classic - 将包含日期的 ASP 经典变量转换为另一种日期格式

> ID：14679326
> 
> 赞同：1
> 
> 时间：2013-02-04T01:31:57.990
> 
> 标签：asp-classic

我有一个包含 mm/dd/yy 格式的日期的变量，我想将该格式更改为 dd/mm/yy

我正在尝试使用下面的代码来做到这一点：

```
<%
d= response.write con("date")
if IsDate(d) then
document.write(CDate(d))
%>
<tr>
    <td><%=con("location")%></td>
    <td><%=con("state")%></td>
    <td><%=con("date")%></td>
</tr> 
```

我是在走错路还是有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T02:02:50.907

好的，您在上面的代码中有一些错误：

你不能那样使用`response.write`——你可以使用它来将内容写入页面。将该行更改为：

```
d=con("date") & "" 
```

我更喜欢附加空白来消除经典 ASP 的潜在空问题。

然后要将其从 mm/dd/yy 转换为 dd/mm/yy，您可以尝试以下操作：

```
d = split(d,"/")
newd = d(1) & "/" & d(0) & "/" & d(2) 
```

希望这会有所帮助，祝你好运。

# python - 在 JSON 对象中查找值 (Python)

> ID：14679329
> 
> 赞同：0
> 
> 时间：2013-02-04T01:32:54.650
> 
> 标签：python, json

我在 Python 中有一个表示操作数据的 JSON 对象，并且它是高度嵌套的。在为它构建我的 UI 时，看起来我需要在树视图中显示它的一部分。

有没有办法在 Python 中找到 JSON 对象中的键？从文档来看，它看起来不像。我可以写一些东西来遍历对象并找到它，但如果有一种开箱即用的方式，那就更好了。有没有这样的方法？

感谢您的时间。

# php - 选择元素的 PHP 数据保留 - 寻找优雅的解决方案

> ID：14679335
> 
> 赞同：0
> 
> 时间：2013-02-04T01:33:32.117
> 
> 标签：php, forms, select

基本上，我的表单会在提交时向自身发布，但是，我希望用户选择的值在出现任何错误输出的情况下保持不变。

我知道如何对大多数表单元素执行此操作，但是在使用 select 时我很难过。

这是我目前的解决方案，我正在寻找更优雅的东西，帮助？

```
 <select name="birthday_month" id="dob_month" label="Month" class="" >
  <option value="-1">M</option>
  <option value="1" <?php if(isset($_POST['birthday_month']) && 1 == $_POST['birthday_month']){ echo "selected='selected'";} ?>>Jan</option>
  <option value="2" <?php if(isset($_POST['birthday_month']) && 2 == $_POST['birthday_month']){ echo "selected='selected'";} ?>>Feb</option>
  <option value="3" <?php if(isset($_POST['birthday_month']) && 3 == $_POST['birthday_month']){ echo "selected='selected'";} ?>>Mar</option>
  <option value="4" <?php if(isset($_POST['birthday_month']) && 4 == $_POST['birthday_month']){ echo "selected='selected'";} ?>>Apr</option>
  <option value="5" <?php if(isset($_POST['birthday_month']) && 5 == $_POST['birthday_month']){ echo "selected='selected'";} ?>>May</option>
  <option value="6" <?php if(isset($_POST['birthday_month']) && 6 == $_POST['birthday_month']){ echo "selected='selected'";} ?>>Jun</option>
   <option value="7" <?php if(isset($_POST['birthday_month']) && 7 == $_POST['birthday_month']){ echo "selected='selected'";} ?>>Jul</option>
   <option value="8" <?php if(isset($_POST['birthday_month']) && 8 == $_POST['birthday_month']){ echo "selected='selected'";} ?>>Aug</option>
   <option value="9" <?php if(isset($_POST['birthday_month']) && 9 == $_POST['birthday_month']){ echo "selected='selected'";} ?>>Sep</option>
   <option value="10" <?php if(isset($_POST['birthday_month']) && 10 == $_POST['birthday_month']){ echo "selected='selected'";} ?>>Oct</option>
   <option value="11" <?php if(isset($_POST['birthday_month']) && 11 == $_POST['birthday_month']){ echo "selected='selected'";} ?>>Nov</option>
   <option value="12" <?php if(isset($_POST['birthday_month']) && 12 == $_POST['birthday_month']){ echo "selected='selected'";} ?>>Dec</option>
      </select> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T01:39:27.257

使用循环来创建您`<option>`的 s。

**天**

```
for ($i=1;$i<=31;$i++) {
  echo "<option value='$i'";
  if ($_POST['birthday_day'] == $i) {
    echo " selected='selected'";
  }
  echo ">$i</option>";
} 
```

**月**

```
for ($i=1;$i<=12;$i++) {
  echo "<option value='$i'";
  if ($_POST['birthday_month'] == $i) {
    echo " selected='selected'";
  }
  echo ">".date("M",mktime(0, 0, 0, $i, 1))."</option>";
} 
```

# curl - 使用 curl CouchDB 删除

> ID：14679345
> 
> 赞同：2
> 
> 时间：2013-02-04T01:35:19.007
> 
> 标签：curl, couchdb

考虑以下构建 CouchDB 数据库并添加文档的 PUT 请求

```
curl -X PUT http://localhost:5984/mydb 
```

响应：{"ok":true}

```
curl -X PUT http://localhost:5984/mydb/mydoc -d '{"name":"John", "email":"john@example.com"}' 
```

响应：{"ok":true,"id":"mydoc","re​​v":"1-8c497db1c5b38cb65981a2c83b349d83"}

好的，我们有一份文件。现在我想删除这个文件。我尝试：

```
curl -X DELETE http://localhost:5984/mydb/mydoc -d '{"_rev":"1-8c497db1c5b38cb65981a2c83b349d83}' 
```

响应：{"error":"conflict","re​​ason":"文档更新冲突。"}

唔。我不明白为什么这不起作用，所以我试试这个：

```
curl -X DELETE http://localhost:5984/mydb/mydoc?rev=1-8c497db1c5b38cb65981a2c83b349d83 
```

响应：{"ok":true,"id":"mydoc","re​​v":"2-e8b8b0632384aae62338c57e1826ea81"}

这行得通……但为什么呢？第一个有什么问题？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T02:06:43.760

`DELETE`requests 共享`GET`语义和消息体被[忽略](https://stackoverflow.com/questions/299628/is-an-entity-body-allowed-for-an-http-delete-request)，因此您需要使用查询参数来传递修订令牌与请求。

# spring - Spring：404错误仅将vo类作为spring控制器中的参数

> ID：14679347
> 
> 赞同：0
> 
> 时间：2013-02-04T01:35:53.153
> 
> 标签：spring, controller, http-status-code-404, value-objects, modelattribute

我正在使用 Spring 框架制作网站。问题是仅当我将 VO 作为参数时才会发生 404 错误。我将 VO 作为 @ModelAttribute 放在控制器中。

我用两个表格列一起制作了 VO 的属性。我猜这个问题是因为 1-VO 匹配 2-Table 引起的，因为当我使用 1-VO mathces 1-table 相同的方式时，没有错误。

如果有人知道，请告诉我发生此错误的确切原因。

这里是来源。

这是与 VO 属性匹配的第一个表。

```
TAN_ASE_NO          int(11)
ASE_TP_DT_CD        int(11)
NM                  varchar(20)
XPN                 tinytext
WST_DT              date
ASE_ST_DT_CD        varchar(5)
TAN_ASE_CR_NO       int(11)
TAN_ASE_ENTP_INFO   int(11)
TAN_ASE_AD_FILE_NO  int(11)
TAN_ASE_CHRPS_NO    int(11) 
```

这是与 VO 属性匹配的第二个表。

```
TAN_ASE_NO_HDW  int(11)
HDW_FLG         varchar(20)
OS_TP           varchar(20)
AMG_FLG         varchar(20) 
HDW_MODL_NM     tinytext
HDW_PST         varchar(30)
HOSTNM          varchar(30)
IP              varchar(20)
US_USE          varchar(20)
PRD_CMP         varchar(30) 
MDL             varchar(30) 
CLK             varchar(10)
CPU_CNT         int(11)
CR_CNT          int(11)
MEMR            int(11)
STRG_TOT_CAPA   int(11)
ADMR            varchar(20) 
```

我用这些 2 表创建了一个 VO 类，以插入与这些表相关的数据。

```
public class HDW {
private int tan_ase_no;
private int ase_tp_dt_cd;
private String nm;
private String xpn;
private String wst_dt;
private int ase_st_dt_cd;
private int tan_ase_cr_no;
private int tan_ase_entp_info;
private int tan_ase_ad_file_no;
private int tan_ase_chrps_no;
private int tan_ase_no_hdw;
private String hw_flg;
private String os_tp;
private String amg_flg;
private String hw_modl_nm;
private String hw_pst;
private String hostnm;
private String ip;
private String us_use;
private String prd_cmp;
private String mdl;
private String clk;
private int cpu_cnt;
private int cr_cnt;
private int memr;
private int strg_tot_capa;
private String admr; 
```

（省略了设置器/获取器。）

最后，这是控制器源代码部分。

```
public String addHdw(HttpServletRequest request, HttpServletResponse response,
        @ModelAttribute("command") HDW hdw) throws Exception{
    System.out.println("$$Test for hdwControl");
    System.out.println(hdw);
    hdwDAO.addHdw(hdw);
    return "redirect:/index.do";
} 
```

当我删除 @modelAttribute("command") HDW hdw 参数时，控制台会毫无问题地显示“$$Test for hdwControl”。

我应该怎么做才能解决这个问题？

**这里是添加源**

当然，我将 @ModelAttribute 与 html 输入字段进行了匹配。

```
<form name="form1">
<div class="containerRight">
    <article>
        <header>
            <h2>H/W</h2>
            <input type="hidden" name="tan_ase_no" value="">
            <input type="hidden" name="tan_ase_no_hdw" value="">
            <input type="hidden" id="ase_tp_dt_cd" name="ase_tp_dt_cd" value="401">
        </header>
        <div class="articleBody">
            <div class="articleBodyLeft">
                <section>
                    <h3>BASIC</h3>
                    <table class="tableArticle">
                        <tr>
                            <td width="120">NAME
                            </td>
                            <td><input name="nm" type="text" id="nm" value=""></td>
                        </tr>
                        <tr>
                            <td>FLAG</td>
                            <td>
                                <select name="hw_flg" id="codeList600">                         
                                </select>
                            </td>
                        </tr>
                        <tr>
                            <td>OS</td>
                            <td>
                                <select name="os_tp" id="codeList700">
                                </select>
                                <label>*VIRTUALIZATION FLAG : </label>
                                <select name="amg_flg" id="codeList800">
                                </select> 
                            </td>
                        </tr>
                        <tr>
                            <td width="120">MODEL</td>
                            <td><input type="text" name="hw_modl_nm" value=""></td>
                        </tr>
                        <tr>
                            <td width="120">COMPANY</td>
                            <td><input type="text" name="tan_ase_entp_info"  value="">  
                        </tr>
                        <tr>
                            <td width="120">POSITION</td>
                            <td><input type="text" name="hw_pst" value=""></td>
                        </tr>
                        <tr>
                            <td>DESCRIPTION</td>
                            <td><input type="text" name="xpn" value=""></td>
                        </tr>
                        <tr>
                            <td>STATUS</td>
                            <td>
                                <input type="radio" name="ase_st_dt_cd" value="501">OPERATION
                                <input type="radio" name="ase_st_dt_cd" value="502">UNUSED
                                <input type="radio" name="ase_st_dt_cd" value="503">DISCARD
                            </td>
                        </tr>
                        <tr>
                            <td>DICARD DATE</td>
                            <td><input type="date" name="wst_dt" value=""></td>
                        </tr>
                    </table>
                </section>
                <section>
                    <h3>INFO</h3>
                    <table class="tableArticle">
                        <tr>
                            <td>Hostname</td>
                            <td>
                                <input type="text" name="hostnm" id="hostnm" value=""> 
                                <label for="ip">IP : </label><input type="text" name="ip" id="ip">
                            </td>
                        </tr>
                        <tr>
                            <td>ADMIN Agent</td>
                            <td>
                                <input type="checkbox" name="admr" value="1001">SERVER
                                <input type="checkbox" name="admr" value="1002">SECURITY
                                <input type="checkbox" name="admr" value="1003">BACK-UP
                            </td>
                        </tr>
                        <tr>
                            <td>USE</td>
                            <td>
                                <input type="checkbox" name="us_use" value="901">DEVELOP
                                <input type="checkbox" name="us_use" value="902">TEST
                                <input type="checkbox" name="us_use" value="903">VERIFY
                                <input type="checkbox" name="us_use" value="904">OPERATE
                            </td>
                        </tr>
                    </table>
                </section>
                <section>
                    <h3>제원</h3><input type="button" value="TEST">
                    <table class="tableArticle">
                        <tr>
                            <td>CPU</td>
                            <td>
                                PRODUCTION : <input type="text" name="prd_cmp" value="">
                                MODEL : <input type="text" name="mdl" value=""> 
                                Clock : <input type="text" name="clk" value=""> GHz
                            </td>
                        </tr>
                        <tr>
                            <td>CPU QUANTITY</td>
                            <td>
                                <input type="text" name="cpu_cnt" value="">CPU × <input type="text" name="cr_cnt" value="">Core = 48 Core
                            </td>
                        </tr>
                        <tr>
                            <td>Memory</td>
                            <td>
                                <input type="text" name="memr" value="">GB
                            </td>
                        </tr>
                        <tr>
                            <td rowspan="2">DISK IN</td>
                            <td>TOTAL CAPA : 500 GB <input type="button" value="MANAGEMENT" onclick="popUp($('#tan_ase_no').val(),$('#ase_tp_dt_cd').val())"></td>
                        </tr>
                        <tr>
                            <td>= 100GB × 2 + 200GB × 2</td>
                        </tr>
                        <tr>
                            <td rowspan="2">DISK-OUT(Mount)</td>
                            <td>
                                <input type="button" value="INFO">
                            </td>
                        </tr>
                        <tr>
                            <td></td>
                        </tr>                       
                    </table>
                </section>
                <section>
                    <h3>Volume</h3><input type="button" value="INFO">
                    <table class="tableArticle">
                        <tr>
                            <td>TOTAL</td>
                            <td>
                                10.,246 GB
                            </td>
                        </tr>
                    </table>
                </section>
                <section>
                    <h3>ADDED FILE</h3><input type="file" value="ADD">
                    <table class="tableArticle">
                        <tr>
                            <td>ADDED LIST</td>
                            <td><input type="hidden" name="tan_ase_ad_file_no" value=""></td>
                        </tr>
                    </table>
                </section>
                <section>
                    <h3>MANAGER</h3>
                    <table class="tableArticle">
                        <tr>
                            <td>Main</td>
                            <td><input type="search" results="10" name="tan_ase_chrps_no"></td>
                        </tr>
                        <tr>
                            <td>Sub</td>
                            <td><input type="search" results="10" name=""></td>
                        </tr>
                    </table>
                </section>
            </div>
            <div class="articleBodyRight">
                <section>
                    <h3>CONTRACT</h3>
                    <table class="tableArticleRel">
                        <tr>
                            <td>Name<input type="hidden" name="tan_ase_cr_no" value=""></td>
                            <td><a href="#"></a></td>
                        </tr>
                        <tr>
                            <td>DATE</td>
                            <td>2012-01-05</td>
                        </tr>
                    </table>
                </section>                  
            </div>
        </div>
        <section class="btnDetailArea">
            <button type="button">Send Message</button> 
            <button type="button" id="btnEdit" onclick="setEditMode()">EDIT</button>
            <input id="btnSubmit" type="button" onclick="submitForm()" value="SAVE">
            <button type="button">CLOSE</button>
        </section>
    </article>
</div> 
```

这是 xml 文件 (iBatis sqlMap) 包含将 HDW 插入数据库的查询。

```
<?xml version="1.0" encoding="UTF-8" ?> 
```

```
<insert id="addHdw" parameterClass="Hdw">
    <![CDATA[
        insert into tan_ase values (0,#ase_tp_dt_cd#,#nm#,#xpn#,#wst_dt#,#ase_st_dt_cd#,
        #tan_ase_cr_no#,#tan_ase_entp_info#,#tan_ase_ad_file_no#,#tan_ase_chrps_no#)
    ]]>
    <selectKey keyProperty="tan_ase_no_hdw" resultClass="Integer">
        select LAST_INSERT_ID()
    </selectKey>
        insert into hdw values (#tan_ase_no_hdw#,#hw_flg#,#os_tp#,#amg_flg#,#hw_modl_nm#,#hw_pst#,
        #hostnm#,#ip#,#us_use#,#prd_cmp#,#mdl#,#clk#,#cpu_cnt#,#cr_cnt#,#memr#,#strg_tot_capa#,#admr#) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T01:44:44.030

请求处理程序上的 @ModelAttribute 注释通常用于将 HTML 表单输入绑定到特定类型（在您的情况下为 HDW 类）。它不处理与您的数据库的映射。

您收到的 404 错误可能是 Spring 无法绑定，因为您没有发布所有必填字段

如果您认为您的问题与 ORM（对象关系映射）有关，请调查您的持久性配置（Hibernate / JPA / 等）

# svn - 运行 websvn 的某些 URL 未强制执行 LDAP 身份验证

> ID：14679349
> 
> 赞同：0
> 
> 时间：2013-02-04T01:36:04.550
> 
> 标签：svn, directory, apache2, ldap, websvn

我正在使用 WebSVN 2.3.3 和 Subversion 1.5.6 在我的 32 位 Win7 桌面上运行 Apache 服务器 (2.2.21)。

这是问题所在：

如果我要导航到`http://myservername/websvn`，将强制执行 LDAP 身份验证，并且只有我在配置文件中允许的用户才能访问它。但是，如果我要导航到`http://myservername/WebSvn`or`/Websvn`甚至`/webSVN`，您就会明白，LDAP 身份验证不会被强制执行，它们允许任何用户，即使是那些未在配置文件中指定的用户，进入相同的 websvn 页面。

那么，我该如何解决这个问题呢？

更新：这是我的 websvn.conf 文件。出于安全原因，我已将其更改为适合此处的帖子。通过在文件末尾附近`httpd.conf`插入 ' '在文件中调用此特定文件。`Include C:/somehwere/websvn.conf`

```
<Location /websvn/> 
    #Redirect any requests to this page to the listing.php
    FallbackResource listing.php

    AuthLDAPBindDN "acct@xxx.com"
    AuthLDAPBindPassword "password"

    #The LDAP query URL
    AuthLDAPURL "ldap://x.x.x.x.x.x:389/DC=x,DC=x,DC=x,DC=x,DC=x?sAMAccountName?sub?(objectClass=user)" NONE

    AuthType Basic
    AuthName "Websvn"
    AuthBasicProvider ldap
    AuthzLDAPAuthoritative off  

    AuthUserFile /dev/null          
    Require ldap-user user1

</Location> 
```

2013 年 7 月 2 日更新：我被告知应该使用而不是，我已经这样做了。Apache[文档](http://httpd.apache.org/docs/2.2/sections.html)详细介绍了“何时使用什么”部分之间的区别，尤其是在“什么时候使用”部分。因此，我修改了 websvn.conv 文件以反映这一点：

```
<Directory /websvn> 
        DirectoryIndex listing.php

        Options FollowSymLinks

        Order allow,deny
        Allow from all

        AuthLDAPBindDN "acct@xxx.com"
        AuthLDAPBindPassword "password"

        #The LDAP query URL
        AuthLDAPURL "ldap://x.x.x.x.x.x:389/DC=x,DC=x,DC=x,DC=x,DC=x?sAMAccountName?sub?(objectClass=user)" NONE

        AuthType Basic
        AuthName "Websvn"
        AuthBasicProvider ldap
        AuthzLDAPAuthoritative off  

        Require ldap-user user1 
    </Directory> 
```

但是，即使使用不正确的 URL，我仍然可以访问我的 websvn，例如./websVn，此外，身份验证不再启动。

此外，页面listing.php 不显示。而是显示 websvn 的目录列表。

谁能指出我做错了什么？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T07:22:33.187

我已经通过在我的 httpd.conf 文件中使用这行代码将所有传入的 URL 转换为小写来解决这个问题。

```
 RewriteEngine On
   RewriteMap  lc int:tolower
   RewriteCond %{REQUEST_URI} [A-Z]
   RewriteRule (.*) ${lc:$1} [R=301,L] 
```

为了使 LDAP 身份验证也能正常工作，我必须使用 websvn 配置文件的 < Location > 版本。

但是，我仍然对为什么 < Directory > 不处理大小写敏感问题感到困惑，即使 Apache 文档声称它确实如此。

# facebook - 在 Windows 窗体中从 Facebook 注销 c#

> ID：14679352
> 
> 赞同：0
> 
> 时间：2013-02-04T01:36:23.007
> 
> 标签：facebook, facebook-c#-sdk

我一直在研究以在我的 windows 窗体 c# 应用程序中从我的 facebook 帐户注销，但无济于事。根据 Prabir'blog [here](http://blog.prabir.me/post/Facebook-CSharp-SDK-Logout.aspx)的这篇博客，GetLogoutUrl 不再起作用。对于我在这里找到的[问题 1](https://stackoverflow.com/questions/6023908/facebook-logout-c-sharp-sdk)和[问题 2](https://stackoverflow.com/questions/6394223/cannot-logout-of-facebook-with-facebook-c-sharp-sdk)，它对我不起作用，因为我的新闻源显示在我的 Web 浏览器控件中。我想要实现的是我的 Facebook 帐户将通过单击一个按钮注销.. 任何人都可以帮助我吗？我的代码如下：

```
private void Form1_Load(object sender, EventArgs e)
    {
        try
        {
            webBrowser2.Navigate(new Uri(String.Format("https://facebook.com/logout.php?access_token={0}", myToken.Default.token)));

        }

        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }

    } 
```

更新代码：

```
//logout of the app
    private void logoutBtn_Click_1(object sender, EventArgs e)
    {
            try
            {
                string AccessToken = myToken.Default.token;
                GetLogoutURL(AccessToken);

            }
            catch (Exception ex)
            {
                Console.WriteLine(ex.Message);
            }
        }
    }
    public static string GetLogoutURL(string AccessToken)
    {
        var fb = new FacebookClient();

        var logoutUrl = fb.GetLogoutUrl(new { access_token = AccessToken, next = "https://www.facebook.com/connect/login_success.html" });
        return logoutUrl.ToString();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T14:54:04.353

只需使用此方法：

```
public static string GetLogoutURL(string AccessToken)
{
    var fb = new FacebookClient();
    var logoutUrl = fb.GetLogoutUrl(new { access_token = AccessToken, next = "https://www.facebook.com/connect/login_success.html" });
    return logoutUrl.ToString();
} 
```

你只需要给它一个有效的 AccessToken 。

# powershell - 如何获取对象数组并从这些对象中提取位以构建新数组？

> ID：14679354
> 
> 赞同：0
> 
> 时间：2013-02-04T01:36:42.170
> 
> 标签：powershell

我不确定我是否以正确的方式提出这个问题或使用正确的符号，但这就是我想要做的。

我弄完了

```
$matches=$_|Select-String '(?smi)(\d*)\: (.*?)' -AllMatches | Foreach{$_.Matches} 
```

Select-String 返回类型 [MatchInfo]，并且 Foreach 吸出该类型的 Matches 属性，即类型 [System.Array]

$matches 是找到的每个匹配项的 [System.Text.RegularExpressions.Group] 元素数组，但我想要的是捕获组值结果的二维数组。

也就是说，我想要一个包含如下元素的数组：

```
$whatiwant=
   ($matches[0].Groups[1].Value,$matches[0].Groups[2].Value),
   ($matches[1].Groups[1].Value,$matches[1].Groups[2].Value),
   ($matches[2].Groups[1].Value,$matches[2].Groups[2].Value),
   ($matches[3].Groups[1].Value,$matches[3].Groups[2].Value),
   ... 
```

我该如何构建这个数组？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T03:37:30.503

这是我发现的一种方法。不知道有没有更好的办法。

```
$whatiwant=Foreach($_ in $matches) {,@($_.Groups[1].Value, $_.Groups[2].Value)} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T17:33:46.830

我用这个： http: [//gallery.technet.microsoft.com/scriptcenter/New-PSObjectFromMatches-87d8ce87](http://gallery.technet.microsoft.com/scriptcenter/New-PSObjectFromMatches-87d8ce87)

它接受一个正则表达式参数，并从输入的匹配组中生成自定义 PS 对象。

# html - 内联块，内联，块

> ID：14679357
> 
> 赞同：1
> 
> 时间：2013-02-04T01:37:07.263
> 
> 标签：html, css

我最近一直在搜索 CSS，试图自学这些技巧。我遇到的另一个问题与`display:`属性直接相关。

我一直在尝试让“菜单按钮”的背景元素的宽度与它们包含的文本一样宽。按钮只是`<div>`元素。

当我使用`display:block;`它们的所有宽度时，它们的宽度都显示为最长的项目，并且当我将其设置为`display:inline;`或`display:inline-block`它们只是出现在同一行时，就像内联元素的工作方式一样。

现在，我想知道的是，我怎样才能让它们看起来像一个列表，但仍然只使背景颜色与它包含的文本一样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T01:41:06.987

使用这样的标记结构

```
<ul id="menu">
<!-- By the use of UL you can have the menu displayed as list -->
    <li><a href="#">Home</a></li>
    ...
</ul> 
```

并将背景 CSS 应用到`#menu li a`

```
#menu li a {
    /* a (anchor tag) is an inline tag, so the background 
    will span up to its content only */

    background: url("../src/to/img.jpg");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T03:05:21.483

如果要保留格式，请让它们环绕文本并为每个项目设置一行，内联块或内联不是一个选项。你必须使用花车。

您可以通过浮动您的项目“float:left;”来强制每个元素在单独的行上。并使用 clear:both 强制其他行上的浮动元素；

```
.item{
float:left;
clear:both;
} 
```

这是一个例子：http: [//jsfiddle.net/Bn9Qx/](http://jsfiddle.net/Bn9Qx/)

# sql - 乘以 SQL 在哪里

> ID：14679361
> 
> 赞同：1
> 
> 时间：2013-02-04T01:37:43.217
> 
> 标签：sql, replace, phpmyadmin, where

我使用下面列出的代码将一些客户端从一个 SQL 合并到另一个（209 个客户端）：

```
 INSERT INTO `tblclients` (`firstname`, `lastname`, `companyname`, `email`, `address1`, `address2`, `city`, `state`, `postcode`, `country`, `phonenumber`, `password`, `currency`, `defaultgateway`, `credit`, `taxexempt`, `latefeeoveride`, `overideduenotices`, `separateinvoices`, `disableautocc`, `datecreated`, `notes`, `billingcid`, `securityqid`, `securityqans`, `groupid`, `cardtype`, `cardlastfour`, `cardnum`, `startdate`, `expdate`, `issuenumber`, `bankname`, `banktype`, `bankcode`, `bankacct`, `gatewayid`, `lastlogin`, `ip`, `host`, `status`, `language`, `pwresetkey`, `pwresetexpiry`) VALUES
('Name', 'LastName', 'companyname', 'gdfgdfg@example.no', 'Gatenavn 6', '', 'Halden', 'Østfold', '1780', 'NO', '+4452335445', '339bfb3999994f0e7c696c7cafafbbe:U#!!I', 1, '', '0.00', 'on', 'on', 'on', '', '', '2011-05-11', '', 0, 0, 'YAiAIpIrK5KcghdhdfgdfFGDF/jWZd7654564A==', 1, '', '', '', '', '', '', '', '', '', '', '', '2011-12-31 01:20:43', '81.000.00.000', '81.000.00.000', 'Active', '', '', 0),
('Name2', 'LastName', 'companyname', 'gdfgdfg@example.no', 'Nilsen 154', '', 'Fredrikstad', 'Østfold', '1904', 'NO', '+445244535445', '339bfb36654f0e7c696c7cafafbbe:U#!!I', 1, '', '0.00', 'on', 'on', 'on', '', '', '2011-05-11', '', 0, 0, 'YAiAIpIrK5KcghdhdfgdfFG56465DF/jWZd7A==', 2, '', '', '', '', '', '', '', '', '', '', '', '2011-12-31 01:20:43', '81.000.00.000', '81.000.00.000', 'Active', '', '', 0),
('Cliff', 'LastName', 'companyname', 'gdfgdfg@example.no', 'Josefineveri 2', '', 'Oslo', 'Østfold', '4544', 'NO', '+445244, '339bfb35556330e7c696c7cafafbbe:U#!!I', 1, '', '0.00', 'on', 'on', 'on', '', '', '2011-05-11', '', 0, 0, 'YAiAIpIrK5KcghdhdfgdfFGDF/jWZd74546A==', 3, '', '', '', '', '', '', '', '', '', '', '', '2011-12-31 01:20:43', '81.000.00.000', '81.000.00.000', 'Active', '', '', 0),
('Ann', 'LastName', 'companyname', 'gdfgdfg@example.no', 'oskar 183', '', 'Hamar', 'Østfold', '0001', '5158', '+44524445445', '339bfb6644f0e7c696c7cafafbbe:U#!!I', 1, '', '0.00', 'on', 'on', 'on', '', '', '2011-05-11', '', 0, 0, 'YAiAIpIrK5KcghdhdfgdfFGDF/jWZd755A==', 2, '', '', '', '', '', '', '', '', '', '', '', '2011-12-31 01:20:43', '81.000.00.000', '81.000.00.000', 'Active', '', '', 0), 
```

如何`groupid`在列出的所有 clent 上更改为 5，而不是在未列出的 clent 上更改为 5？我之前有 500 个客户，不应该是新的`groupid`。客户端是导入的，所以也许我可以使用 SQL WHERE 或其他东西来做它？

**解决方案**：我知道导入前的最新 ID。所以我只是做了：

```
 UPDATE `norskhos_nhnfm`.`tblclients`
 SET `groupip` = '5'
 WHERE `tblclients`.`id` >= 571; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-04T23:42:42.190

我对“在列出的所有 clents 上将 groupid 更改为 5 而不是未列出的它们？”有点困惑？

如果我理解正确......在 SQL Server 中（我相信你没有使用，但类似）我会这样做：

假设电子邮件是唯一的

```
UPDATE `norskhos_nhnfm`.`tblclients`
 SET `groupip` = '5'
 WHERE `tblclients`.`id` >= 571;
 AND email not in(not them that is not listed) 
```

# handlebars.js - Handlebars、Jquery、PHP 和 MySql 中的条件

> ID：14679362
> 
> 赞同：1
> 
> 时间：2013-02-04T01:37:46.353
> 
> 标签：handlebars.js

我有一些带有 Handlebars 模板的 HTML/表格数据：

```
<div class="users">
    <script id="userlist" type="text/x-handlebars-template"> 
        <table class="table table-striped table-hover table-condensed">
            <thead>
                <th>Username</th> 
                <th>Real Name</th> 
                <th>Email</th> 
            </thead>
            <tbody>
                {{#each this}}     
                <tr>
                    <td>{{name}}</td>
                    <td>{{email}} {{lastName}}</td> 
                    <td>{{time}}</td> 
                </tr> 
                {{/each}} 
            </tbody> 
        </table> 
    </script> 
</div> 
```

我想找到最优雅/优化的方法来有条件地识别表格行，以便根据我从 JSON 中获得的值突出显示该行。

这段代码从我的 PHP 类中获取 JSON：

```
$("#register").submit(function(event) {

    /* stop form from submitting normally */
    event.preventDefault();

    /* get some values from elements on the page: */
    var $form = $( this ),
        name = $form.find( 'input[name="name"]' ).val(),
        email = $form.find( 'input[name="email"]' ).val(), 
        func  

    /* Send the data using post */
    var posting = $.post( 'controller.php', { name: name, email: email, func: 'register'  } );

    /* Put the results into a template */
    posting.done(function(data) {
        var data = $.parseJSON(data);
        var userlist = Handlebars.compile( $("#userlist").html() );
        $(".users").html(userlist(data));
    }); /*end function */

}); 
```

我可以看到我的数据列表没问题。这很好用。我觉得我需要做一个 registerHelper 或一个 registerPartial 但不确定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T06:27:18.243

如果你有一个布尔属性，比如说`active`，设置在你的对象上，表示一个活动的行，那么你只需在你的模板中做这样的事情：

```
{{#each this}}
<tr{{#if active}} class="active"{{/if}}>
    <td>{{name}}</td>
    <td>{{email}} {{lastName}}</td> 
    <td>{{time}}</td> 
</tr> 
{{/each}} 
```

# jquery - jquery关于错误的选择器调用函数

> ID：14679372
> 
> 赞同：1
> 
> 时间：2013-02-04T01:39:42.173
> 
> 标签：jquery, javascript-events

我有`on(...)`与以下代码一起使用的动态内容，它管理用户的标记 - 想法是动态构建标记菜单（它用于多个页面），然后允许用户添加标记：

```
function tagging(){
    _this = this
    this.build_content = function(){
    //build tagging menu
    ...
    _this.bind_triggers
    }
    this.bind_triggers = function(){
        _this.$I_tag_add = $('#I_add_user_tag');
        _this.$B_tag_add = $('#B_add_user_tag');
        $(document).on('click', _this.$B_tag_add, _this.add_user_tag);
    this.add_user_tag = function(){
        //add user tag
        ...
    }
} 
```

`$I_tag_add`是输入框 `$B_tag_add`是按钮

当我单击`$I_tag_add`输入要添加的标签时，`_this.add_user_tag`会调用它，但我希望这只会在单击`$B_tag_add`.

我已经解决了这个问题

```
_this.$B_tag_add = $('#B_add_user_tag').click(_this.add_user_tag); 
```

这实际上是比我以前更好的代码 - 但想知道我以前的代码是怎么回事。我错过了一些奇怪的东西`.on(...)`吗？

# c++ - 如何读取相邻的字符串

> ID：14679376
> 
> 赞同：-1
> 
> 时间：2013-02-04T01:40:07.943
> 
> 标签：c++

我是编程新手。任何人都可以帮助我如何做到这一点。我的输入文件是这样的

> 这
> 
> 狗
> 
> 是
> 
> 跑步

我需要得到这样的输出

> 狗
> 
> 狗是
> 
> 在跑

那就是我必须阅读相邻的单词对。我如何在 C++ 中做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-04T01:51:23.733

这是我的新手 C++ 方法（我只是 C++ 的初学者）。我敢肯定，更有经验的 C++ 开发人员会想出更好的东西 :-)

```
#include <fstream>
#include <iostream>
#include <string>

int main()
{
    std::ifstream file("data.txt");    
    std::string lastWord, thisWord;

    std::getline(file, lastWord);

    while (std::getline(file, thisWord))
    {
        std::cout << lastWord << " " << thisWord << '\n';
        lastWord = thisWord;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T02:43:54.027

虽然我认为@dreamlax 已经展示了一些不错的代码，但我认为我会做一些不同的事情：

```
#include <fstream>
#include <string>
#include <iostream>

int main() { 
    std::string words[2];
    std::ifstream file("data.txt");

    std::getline(file, words[1]);
    for (int current = 0; std::getline(file, words[current]); current ^= 1)
        std::cout << words[current] << ' ' << words[current^1] << "\n";
} 
```

这会稍微缩短代码（有点好）并避免不必要地复制字符串（更好）。

# symfony - 在 Symfony 中获取包内目录的路径

> ID：14679377
> 
> 赞同：11
> 
> 时间：2013-02-04T01:40:08.867
> 
> 标签：symfony

从控制器内部，我需要获取包中一个目录的路径。所以我有：

```
class MyController extends Controller{

    public function copyFileAction(){
        $request = $this->getRequest();

        $directoryPath = '???'; // /web/bundles/mybundle/myfiles
        $request->files->get('file')->move($directoryPath);

        // ...
    }
} 
```

如何正确`$directoryPath`？

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2014-04-02T19:57:06.790

有一个更好的方法来做到这一点：

```
$this->container->get('kernel')->locateResource('@AcmeDemoBundle') 
```

将给出 AcmeDemoBundle 的绝对路径

```
$this->container->get('kernel')->locateResource('@AcmeDemoBundle/Resource') 
```

将给出 AcmeDemoBundle 中 Resource 目录的路径，依此类推...

如果这样的目录/文件不存在，将抛出 InvalidArgumentException。

此外，在容器定义中，您可以使用：

```
my_service:
class: AppBundle\Services\Config
    arguments: ["@=service('kernel').locateResource('@AppBundle/Resources/customers')"] 
```

**编辑**

您的服务不必依赖于**kernel**。你可以使用一个默认的 symfony 服务：**file_locator**。它在内部使用**Kernel::locateResource**，但在测试中更容易加倍/模拟。

服务定义

```
my_service:
    class: AppBundle\Service
    arguments: ['@file_locator'] 
```

班级

```
namespace AppBundle;

use Symfony\Component\HttpKernel\Config\FileLocator;

class Service
{  
   private $fileLocator;

   public function __construct(FileLocator $fileLocator) 
   {
     $this->fileLocator = $fileLocator;
   }

   public function doSth()
   {
     $resourcePath = $this->fileLocator->locate('@AppBundle/Resources/some_resource');
   }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T04:41:35.587

像这样的东西：

```
$directoryPath = $this->container->getParameter('kernel.root_dir') . '/../web/bundles/mybundle/myfiles'; 
```

# css - 创建三列，其中两列固定位置

> ID：14679378
> 
> 赞同：0
> 
> 时间：2013-02-04T01:40:14.523
> 
> 标签：css, position

[jsfiddle](http://jsfiddle.net/weemy/p4fMV/) 我有三列，但我想要左右列，固定位置，当我滚动页面时，这些列伴随滚动，我的问题是，我不能让它们都固定在它们的位置，我有i18n 的另一个问题是，当我从 rtl 更改为 ltr 时。

css

```
 body{
    background:#fff;    
    margin:0px auto 0px auto ;
    padding:0px auto 0px auto ;

}
html{
    background:#fff;    
    margin:0px auto 0px auto ;
    padding:0px auto 0px auto ;
}

.inner-page{
    margin:0px auto 0px auto;
    padding:0px auto 0px auto;
    position: relative;
}
.inner-navbar{
    margin:0px auto 0px auto;
    padding:0px auto 0px auto;
    width:1000px;
}
.inner-page-right{
    background: #000; 
    width:200px;
    min-height:1000px;
            color:#fff;
            float:right
}
.inner-page-center{
    width:600px;
    min-height:1000px;
            float:right
}
.inner-page-left{
    background: #000; 
    width:200px;
    min-height:1000px;
            color:#fff;
            float:left
}
.inner-page-center-up{
    height:50px;
}
.inner-page-center-down{
    background-color:#e6e6e6;
    border:1px solid #cccccc;   
} 
```

和 HTML

```
<div class="inner-page inner-navbar">
    <div class="inner-page-right" >
        column right
    </div><!--inner-page-big-right_right-->
    <div class="inner-page-center">
            column center
    </div><!--inner-page-big-right_right-->
    <div class="inner-page-left">
        column left
    </div><!--inner-page-big-left-->
</div><!--inner-page--> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T23:50:45.517

您可以使用 修复左右列`position: fixed`。我们将它们放在正确的位置，用 / 将它们放在中心，然后用/将它们移动到容器宽度的`right: 50%`一半：`left: 50%``margin-right: -500px``margin-left: -500px`

**CSS**

```
.inner-page-right {
    ...
    position: fixed;
    top: 0;
    right: 50%;
    margin-right: -500px;
}
.inner-page-left {
    ...
    position: fixed;
    top: 0;
    left: 50%;
    margin-left: -500px;
} 
```

**[演示](http://jsfiddle.net/p4fMV/2/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T08:58:50.887

我不认为这可以用纯CSS来完成。您可以将您的两个设置在绝对位置并使用 javascript 滚动事件更新它们的最高值，以使它们始终位于导航器的顶部。

# unix - 我应该在哪里安装 phpDocumentor 2？

> ID：14679382
> 
> 赞同：2
> 
> 时间：2013-02-04T01:41:22.407
> 
> 标签：unix, installation, phpdoc

我想[使用安装程序](http://www.phpdoc.org/docs/latest/for-users/installation.html)在 Unix 上手动安装 phpDocumentor 2 。

我对命令行的了解有限，但我确实有 root 访问权限。说明说要将安装程序下载*到预定位置*。那么我应该在哪里下载/安装它？

我意识到我可以把它放在我想要的任何地方，但我有兴趣了解一些标准位置以及为什么一个位置可能比另一个位置更好。

另外，安装程序会创建它自己的父目录吗？还是我应该创建它？我一直不清楚。例如，我不想以 /usr/bin/phpDoc/phpDoc 结尾

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-13T06:16:15.560

## 在哪里安装

如果打算将其安装在公共共享位置，那`/opt`将是一个[好地方](https://unix.stackexchange.com/q/20600/62291)。

引用[文件系统层次标准](http://www.pathname.com/fhs/pub/fhs-2.3.html#OPTADDONAPPLICATIONSOFTWAREPACKAGES)

> /opt 保留用于安装附加应用程序软件包。

## 父目录

自问题发布以来，手动安装的安装程序似乎已经消失。但是根据他们的[主页](http://www.phpdoc.org/)，您可以从 GitHub 下载 tarball（不是源代码！）并将其解压缩到您的目标目录中。

如果您打开压缩包，您会看到顶层目录是 phpDocumentor-2.3.0（其中 2.3.0 是版本）。所以当你提取它时，你最终会得到 /path/to/current/dir/phpDocumentor-2.3.0/...

## 考虑梨

您应该考虑安装 PEAR。PEAR 本身只是一个包管理器。安装包管理器不会安装所有可选的 PEAR 包。使用包管理器（如`yum`或`apt-get`.

**使用 PEAR 安装 phpDocumentor 有**几个优点。

*   有新版本时升级更容易。
*   你可以用 just`phpdoc`而不是调用它`[PHPDOC_FOLDER]/bin/phpdoc.php`

**使用 PEAR 安装**

如果您使用 command `pear install PhpDocumentor`，您会从默认频道获得最新版本。在撰写本文时，1.5.0a1 (alpha) 已被弃用。

要获得**最新版本**，请从 phpdoc 频道安装它。

```
pear channel-discover pear.phpdoc.org
pear install phpdoc/phpDocumentor 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T22:15:24.510

使用以下命令安装 phpdoc。

```
sudo pear install PhpDocumentor
password ***** 
```

或者

```
pear install PhpDocumentor 
```

它将安装在以下路径上。

```
cd /usr/lib/php/pear/data/PhpDocumentor 
```

键入以下命令以查看帮助。

```
phpdoc -h 
```

要创建 PHP 文档，请使用以下命令。

```
phpdoc -o HTML:frames:earthli -f pathofthefile/sample1.php -t docs 
```

# macos - OS X 10.8 上的 gcc 链接/段错误问题

> ID：14679384
> 
> 赞同：1
> 
> 时间：2013-02-04T01:41:32.323
> 
> 标签：macos, gcc, linker

所以关于发生的事情的一些背景故事。我目前正在构建许多东西（包括 SDL、SDL_image 等）并将它们全部链接到一个可执行文件中，然后手动完成。我正在制作自己的自定义 makefile，并且只使用命令行，而不是 Xcode。（我不喜欢 Xcode） 到目前为止，我已经成功完成了这一切，但我想开始将 Lua 脚本放在我的代码之上，所以我现在正在编译 luajit2.0 并尝试将其链接进去。

然而，虽然 SDL 工作正常，我可以打开一个加载图像的窗口，但 luajit 拒绝正确链接。它给了我 dyld: Library not loaded... 消息，引用 /usr/local/lib 即使它不仅在那里不存在，而且 gcc 在命令行上被赋予 -L 到保存我构建的文件夹卢吉特。在我的二进制文件上使用 otool -L 会给出该目录，即使它甚至不存在于那里。

在尝试用谷歌搜索这个问题时，我遇到了一个给我这个命令的解决方案：`install_name_tool -id `pwd`/install/lib/libluajit-5.1.dylib install/lib/libluajit-5.1.dylib`. （[来自 SO](https://stackoverflow.com/questions/4979821/mac-gcc-trying-to-link-against-old-nonexistent-library)）重建二进制文件并在其上使用 otool 后，我现在看到了该库的正确目录。然而，现在，虽然它没有给我 dyld 错误，但在我使用 luajit 函数的那一刻它给了我一个段错误。（特别是luaL_newstate）

构建我的二进制文件的命令如下：

```
gcc -g -Wall -arch x86_64 -framework Cocoa -Iinstall/include -Linstall/lib src/native/main.c -lluajit-5.1.2.0.0 -lSDL2_image -lSDL2 -lSDL2main -lpng -lz -o game 
```

libluajit-5.1.2.0.0.dylib，所有对应的符号链接都在 install/lib 中。lua 包含文件在安装/包含中。这里出了什么问题？我很困惑，只想让它开始工作。我宁愿与代码搏斗，也不愿与 gcc 和 OS X 搏斗。

编辑：根据请求，在我得到的当前“分段错误：11”错误之前我得到的上一个错误基本上是这样的：

```
dyld: Library not loaded: /usr/local/lib/luajit-5.1.2.dylib
  Referenced from: <my application, forgot this exact bit>
  Reason: image not found 
```

如果我做了 otool -L game 我得到了：

```
MacBook-Air:old freezerburn$ otool -L game
game:
    /System/Library/Frameworks/Cocoa.framework/Versions/A/Cocoa (compatibility version 1.0.0, current version 19.0.0)
    /usr/local/lib/libluajit-5.1.2.dylib (compatibility version 2.0.0, current version 2.0.0)
    /Users/freezerburn/Dropbox/Code/lua_engine/old/install/lib/libSDL2_image-1.2.0.dylib (compatibility version 9.0.0, current version 9.5.0)
    /Users/freezerburn/Dropbox/Code/lua_engine/old/install/lib/libSDL2-2.0.0.dylib (compatibility version 1.0.0, current version 1.0.0)
    /Users/freezerburn/Dropbox/Code/lua_engine/old/install/lib/libpng15.15.dylib (compatibility version 30.0.0, current version 30.0.0)
    /Users/freezerburn/Dropbox/Code/lua_engine/old/install/lib/libz.1.dylib (compatibility version 1.0.0, current version 1.2.7)
    /usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 169.3.0) 
```

即使 libluajit 在 ./install/lib 中。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-04T09:15:18.477

共享库有一个安装路径。这意味着您*必须*使用正确的 PREFIX 构建和安装，请参阅安装文档。或者考虑与静态 LuaJIT 库链接——从非系统位置加载动态库是一罐蠕虫。

段错误是由于没有遵循 OSX/x64 的[LuaJIT 嵌入指令](http://luajit.org/install.html#embed)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T09:23:15.527

为什么不让自己的生活变得轻松并使用[Macports](http://macports.org)：

1.  安装 macports
2.  `$ xcode-select -switch /Applications/Xcode.app/Contents/Developer`
3.  `$ sudo port selfupdate`
4.  `$ sudo port install libsdl_image luajit`

这将安装您请求的端口和任何依赖项。

然后，您可以专注于您的项目，并且知道一个合格的团队正在处理所有其他事情。

# java - arraylist 迭代器等于返回 java.util.NoSuchElementException

> ID：14679386
> 
> 赞同：3
> 
> 时间：2013-02-04T01:42:03.713
> 
> 标签：java, exception, arraylist, iterator

```
while(it.hasNext())
{
    System.out.println("List: " +it.next().getProduct().getName() + " " + product.getName());

    if (it.next().getProduct().getName().equals(product.getName())) 
    {
        System.out.println("asd");
    }
} 
```

它返回完全相同的东西：

> 列表：苹果苹果
> 
> 清单：橙橙

但是当我尝试比较它们时，我得到了

> 清单：橙橙
> 
> 线程“AWT-EventQueue-0”中的异常 java.util.NoSuchElementException

问题出在 if () 行中。我是否将它们与 getName() 进行比较都没关系（因为它们是相同的对象。）有什么想法吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-04T01:45:22.610

您应该`next()`在每次迭代中只调用一次该方法。`next()`它在每次调用该方法时将光标移动到下一个元素。您不想这样做，以确保`hasNext()`在每次调用 之前执行它`next()`，以避免超过最后一个元素。

如下所示

```
Product p = it.next();
//and use p onwards 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T02:28:44.347

```
Product temp = null; // might break your equals if written badly
while ( it.hasNext() ) {
    // get next product
    Product product = it.next().getProduct(); // use this when you need to refer to "next" product

    if ( product.equals( temp ) ) { // compare previous product (temp) with this product
         // do something
    }

    temp = product; // set temp equal to current product, on next iteration it is last
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T01:47:21.517

每个 next() 调用都会将迭代器向前移动。您在代码中调用它两次。因此，要么在第二个 next() 前面添加 haveext()，要么删除 next() 的第二个调用

# java - 读取输出参数后无法获取结果集

> ID：14679387
> 
> 赞同：1
> 
> 时间：2013-02-04T01:42:07.790
> 
> 标签：java, sql-server, stored-procedures, resultset, callable-statement

我正在使用 java 访问 mssql 2012 DB

我有一个存储过程“procX”，参数中只有 1 个（比如命名为@p1）并返回一个结果集。除非我在获得结果集之前尝试读取返回值，否则它工作正常。代码如下。如果我删除“//”并获得返回值，我会得到`null`结果。

```
cs = con.prepareCall("{? = call procX(?)}");
cs.registerOutParameter(1, Types.INTEGER);
cs.setInt("p1", 1);
cs.execute();         
//cs.getInt(1);
rs = cs.getResultSet(); 
```

即使我在获得结果集后读取了返回值，这也会关闭结果集。

有没有办法读取返回值而不导致无法获取结果集？

据我所知，这种情况不受返回值限制，也适用于任何其他输出参数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T09:20:28.683

看起来您必须在读取任何输出参数之前获取结果集。

您可以从[https://stackoverflow.com/a/5576442/1519458获取详细信息](https://stackoverflow.com/a/5576442/1519458)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T03:03:12.613

挺有趣的，

*   首先：我不知道您使用的是哪种驱动程序，但尝试更改并向我们提供信息将是相同的行为或没有。
*   其次：如果您使用 Microsoft JDBC Driver for SQL Server 尝试调整记录器并查看问题出在哪里，该库 `java.util.logging.Logger`用于在执行每个操作之前/之后进行记录。
*   我认为您正在使用 java 7，尝试降级并在 Java 6 上运行它，为什么？因为在 Microsoft JDBC Driver for SQL Server 中有一些有趣的逻辑（带有 Closeable 接口），用于从方法`getValue`调用的`getInt`方法。

# javascript - 使用 JavaScript API 使 filepicker.io 拖放窗格无法正常工作

> ID：14679394
> 
> 赞同：0
> 
> 时间：2013-02-04T01:42:46.510
> 
> 标签：javascript, ruby-on-rails-3, filepicker.io

我无法让我的 filepicker.io“拖放窗格”使用 javascript 工作。我已经有 filepicker.io html 小部件的工作方式类似于：

```
<input type="filepicker-dragdrop" data-fp-drag-class="filepicker_dragdrop"/> 
```

但是，我无法从 JavaScript 调用 filepicker.io。当我将文件拖入“div.filepicker_dragdrop”容器时，什么也没有发生。有什么想法吗？

在我的表单 .html.erb 中：

```
<div class="filepicker_dragdrop"></div> 
```

在我的 .css 文件中：

```
.filepicker_dragdrop {
  padding: 8px;
  height: 100px;
  width: 100%;
  text-align: center;
  margin: auto;
  border: 1px dashed #aaa;
  border-radius: 5px;
  background-color: #fff;
} 
```

在我的 filepicker_dragdrop.js 中：

```
filepicker.makeDropPane($('.filepicker_dragdrop')[0], {
    multiple: true,
    dragEnter: function() {
        $(".filepicker_dragdrop").html("Drop to upload").css({
            'backgroundColor': "#E0E0E0",
            'border': "1px solid #000"
        });
    },
    dragLeave: function() {
        $(".filepicker_dragdrop").html("Drop files here").css({
            'backgroundColor': "#F6F6F6",
            'border': "1px dashed #666"
        });
    },
    onSuccess: function(fpfiles) {
        $(".filepicker_dragdrop").text("Done, see result below");
        $("#localDropResult").text(JSON.stringify(fpfiles));
    },
    onError: function(type, message) {
        $("#localDropResult").text('('+type+') '+ message);
    },
    onProgress: function(percentage) {
        $(".filepicker_dragdrop").text("Uploading ("+percentage+"%)");
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-18T02:04:32.053

老问题，但仍然，只是被咬了。**确保在加载文档后**调用 makeDropPane 函数！

# c - 推荐的 C 中的 2D 条码生成器 api

> ID：14679398
> 
> 赞同：4
> 
> 时间：2013-02-04T01:43:55.327
> 
> 标签：c, 2d, barcode

有人可以建议免费提供 C 中的 2D Barcode Generator 库/api吗？

问候，广告

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T01:48:08.440

您可以使用 ZXing，它在谷歌代码[http://code.google.com/p/zxing/](http://code.google.com/p/zxing/)中用于 C++ 和 zint 用于 C 检查手册[ftp://ftp.heanet.ie/mirrors/sourceforge/z/project /zi/zint/zint/2.4.2/zint_manual_242.pdf](ftp://ftp.heanet.ie/mirrors/sourceforge/z/project/zi/zint/zint/2.4.2/zint_manual_242.pdf)以及您可以从 sourceforge 下载的源代码

# azure - 由于数据总线配置问题，nservicebus 工作人员在 azure 重新启动中的角色

> ID：14679403
> 
> 赞同：0
> 
> 时间：2013-02-04T01:45:31.470
> 
> 标签：azure, nservicebus, azure-worker-roles

我有两个工作人员角色设置为 nservicebus 端点（nservicebus 3.2.8），并且两者都使用 AzureDataBus 配置来处理大于为 azure 队列分配的大小的消息。我的雇主不允许在配置中放置凭据，因此使用 IProvideConfiguration 来配置存储凭据。

这似乎可行，但似乎 nservicebus 仍在尝试使用本地开发存储连接初始化数据总线通道，这导致工作角色重新启动多次。最终它会启动并选择正确的配置。

关于我应该如何配置数据总线通道，我做错了什么吗？

**以下是辅助角色的事件日志中的异常：**

```
An unhandled exception occurred. Type: System.Exception Process ID: 2420
Process Name: WaWorkerHost
Thread ID: 6
AppDomain Unhandled Exception for role My.WorkerRole.Assembly_IN_1
Exception: Exception when starting endpoint, error has been logged. Reason: Unable to connect to the remote server
   at NServiceBus.Hosting.GenericHost.Start()
   at NServiceBus.Hosting.Azure.RoleEntryPoint.Run()
   at Microsoft.WindowsAzure.ServiceRuntime.RoleEnvironment.StartRoleInternal()
   at Microsoft.WindowsAzure.ServiceRuntime.Implementation.Loader.RoleRuntimeBridge.<StartRole>b__1()
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.ThreadHelper.ThreadStart()

Inner Exception: Unable to connect to the remote server
   at Microsoft.WindowsAzure.StorageClient.Tasks.Task`1.get_Result()
   at Microsoft.WindowsAzure.StorageClient.Tasks.Task`1.ExecuteAndWait()
   at Microsoft.WindowsAzure.StorageClient.CloudBlobContainer.CreateIfNotExist(BlobRequestOptions options)
   at NServiceBus.DataBus.Azure.BlobStorage.BlobStorageDataBus.Start()
   at System.EventHandler.Invoke(Object sender, EventArgs e)
   at NServiceBus.Unicast.UnicastBus.NServiceBus.IStartableBus.Start(Action startupAction)
   at NServiceBus.Hosting.GenericHost.Start()

Inner Exception: No connection could be made because the target machine actively refused it 127.0.0.1:10000
   at System.Net.Sockets.Socket.EndConnect(IAsyncResult asyncResult)
   at System.Net.ServicePoint.ConnectSocketInternal(Boolean connectFailure, Socket s4, Socket s6, Socket& socket, IPAddress& address, ConnectSocketState state, IAsyncResult asyncResult, Int32 timeout, Exception& exception) 
```

**这会立即导致进程终止：**

```
Application: WaWorkerHost.exe
Framework Version: v4.0.30319
Description: The process was terminated due to an unhandled exception.
Exception Info: System.Exception
Stack:
   at NServiceBus.Hosting.GenericHost.Start()
   at NServiceBus.Hosting.Azure.RoleEntryPoint.Run()
   at Microsoft.WindowsAzure.ServiceRuntime.RoleEnvironment.StartRoleInternal()
   at Microsoft.WindowsAzure.ServiceRuntime.Implementation.Loader.RoleRuntimeBridge.<StartRole>b__1()
   at System.Threading.ExecutionContext.Run(System.Threading.ExecutionContext, System.Threading.ContextCallback, System.Object, Boolean)
   at System.Threading.ExecutionContext.Run(System.Threading.ExecutionContext, System.Threading.ContextCallback, System.Object)
   at System.Threading.ThreadHelper.ThreadStart() 
```

**这是我的端点配置：**

```
internal class EndpointConfig : IConfigureThisEndpoint, AsA_Worker, IWantCustomInitialization
    {
        #region IWantCustomInitialization Members

        public void Init()
        {
            Configure.With()
                     .DefaultBuilder()
                     .AzureConfigurationSource()
                     .MessageForwardingInCaseOfFault()
                     .AzureMessageQueue()
                     .JsonSerializer()
                     .AzureDataBus()
                     .AzureSubcriptionStorage()
                     .UnicastBus()
                     .DisableTimeoutManager()
                     .DisableSecondLevelRetries()
                     .IsTransactional(true)
                     .IsolationLevel(System.Transactions.IsolationLevel.ReadCommitted)
                     .PurgeOnStartup(false);
            }
} 
```

**数据总线配置覆盖：**

```
 public class ConfigOverride : IProvideConfiguration<AzureDataBusConfig>
    {

        AzureDataBusConfig IProvideConfiguration<AzureDataBusConfig>.GetConfiguration()
        {
            return new AzureDataBusConfig()
            {
                ConnectionString = "my storage key";
            };
        } 

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T20:30:04.540

听起来像是初始化逻辑中的计时问题，基本上您在 nsb 应用配置覆盖之前调用 AzureDataBus() 并回退到默认设置。您可以尝试将 IWantCustomInitialization 放在一个单独的类中（而不是稍后运行）。

如果这没有帮助，请随时给我发送一个小型复制品，我会看看它！

PS：你可以省略 .With().DefaultBuilder() 因为那是默认值！

亲切的问候，伊夫

# scala - 如何从 Scala 中的重写方法返回正确的类型？

> ID：14679406
> 
> 赞同：1
> 
> 时间：2013-02-04T01:46:03.357
> 
> 标签：scala, types, subclassing, overriding

作为 Scala 的新手，我偶然发现了 SubClassing 和 Overriding 方法这个看似简单的点。

我因此专门设置了一个集合：

```
 class SpecializedSet [T](s:Int, b: Boolean) (implicit ordering: Ordering [T]) extends TreeSet [T] { 
      override def + (t: T): SpecializedSet [T] = {

           if (this.isEmpty) {

              s = s + 1

              // I want to add an element to the Set
              super.+ (t) 

           }
           ....
       } 
```

在使用此类的站点上，我这样做：

```
 class Driver {

         var e = new SpecializedSet [MyEarlierDefinedType](3,false);

         ......

         val elem1 = new MyEarlierDefinedType()

         e = e + eleme1 

         ......
     } 
```

编译器立即抱怨：

> 类型不匹配; 找到：scala.collection.immutable.TreeSet[T] 需要：org.personal.exercises.SpecializedSet[T]

我知道重写的 '+' 方法必须返回一个 'SpecializedSet' 类型 - 一个子类型 - 并且仅仅调用 super.+() 并不能实现这一点。

它与 super.+() 返回的 TreeSet 不同，它是在其位置创建的新 TreeSet。我在想我现在必须自己创建一个新的 SpecializedSet() 实例，*使用*这个新的 TreeSet。我被困在这里。如何使用作为*其超类型*的 TreeSet 创建一个新的 SpecializedSet() ？在这种情况下使用 Scala 世界的成语是什么？在这里使用 asInstanceOf() 是最合适和最简短的答案吗？但是，不是一直不鼓励使用这种方法吗？

我是否必须创建一个 SpecializedSet 的伴随对象，在其中定义一个 apply() 方法？或者，我是否必须更深入地使用[Scala 中描述的 Traits 概念：如何编写将对象类型化为接收器](https://stackoverflow.com/questions/6647626/scala-how-to-write-method-that-returns-object-typed-to-implementation-type-of-r?rq=1)和[子类的实现类型以及返回类型](https://stackoverflow.com/questions/5387602/subclasses-and-return-types)和其他相关链接的方法？[或者，按照http://www.scala-lang.org/docu/files/collections-api/collections-impl.html中创建](http://www.scala-lang.org/docu/files/collections-api/collections-impl.html)*Builder*的更复杂的方向？

我也经历过这个问题（和答案）：[Extended a Scala collection](https://stackoverflow.com/questions/2259297/extending-a-scala-collection) - 它们当然很有用 - 但不知何故，我认为它比我理解的要多。例如，该链接中的解决方案之一是在函数签名中明确提及 Baseclass 的类型，因此：

```
 override def + (t: T): TreeSet [T] = { // instead of SpecializedSet 
             ...... 
```

但是，在某种程度上，这不是违背了方法调用者的期望吗？我很困惑。

解决方案是否必须像这些链接中所述那样参与？我遗漏的明显点是什么？任何指针都会有所帮助。我已经进行了相当大的搜索，但如果我的问题是重复的，请耐心等待并指导我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T10:17:14.093

我更愿意扩展相应的特征并通过组合而不是直接继承来使用类：

```
class SpecializedSet[T](s: Int, b: Boolean)(implicit ordering: Ordering[T]) extends SortedSet[T] {
  private var ts = new TreeSet[T]()
  override def +(t: T): SpecializedSet[T] = {
    ts += t
    this
  }
  override def -(t: T): SpecializedSet[T] = {
    ts -= t
    this
  }
  override def contains(t: T): Boolean = ts.contains(t)
  override def iterator(): Iterator[T] = ts.iterator
  override def ordering(): Ordering[T] = ts.ordering
  override def rangeImpl(from: Option[T], until: Option[T]) = ts.rangeImpl(from, until)
} 
```

我认为这种方法对新手更友好，因为它避免了直接的类继承和（直接）对 super 的调用。这个非常简单的解决方案的缺点是我们引入了可变性。这可以通过重新设计构造函数来解决，以便可以使成员 a`val`并真正返回一个新的修改`SpecializedSet`实例而不是`this`.

# sql - 如何使用max函数获取db2中的最后一条记录

> ID：14679408
> 
> 赞同：1
> 
> 时间：2013-02-04T01:46:11.000
> 
> 标签：sql, db2

我想通过使用 max() 函数来获取该表的最后一条记录。

询问

```
select oafaci, oaorno, min(obfded) ,max(oblded) from mvxcdtpusd.oohead join mvxcdtpusd.ooline on oacono = obcono and oaorno = oborno and oafaci = obfaci and oawhlo = obwhlo where obitno like '19140%' and OBCONO = 888 group by OAFACI, OAORNO 
```

结果

```
OAFACI  OAORNO      FDate            LDate
812 0000556215  20130109    20130109
812 0000554203  20130102    20130102
812 0000553769  20121017    20121017
812 0000554204  20130130    20130130
812 0000556214  20121024    20121024
812 0000556216  20130206    20130206 
```

从该结果表中-我想要以下数据。

愿望结果

```
812 0000556216  20130206    20130206 
```

需要帮助以使用 max() 获取最后一条记录

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-04T03:45:07.590

为什么*需要*使用该`max()`功能？如果这是家庭作业，您应该在问题中说明这一点。

获得最后一条记录的最佳方法是：

```
select *
from t
order by date
fetch first 1 row only 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T01:51:40.470

***试试***这个查询，

```
SELECT  *
FROM    tablename
WHERE   OAFACI = 812 AND
        OAORNO = (SELECT MAX(OAORNO) 
                    FROM tableName
                    WHERE OAFACI = 812) 
```

**更新**

```
SELECT  a.*
FROM    tableName a
        INNER JOIN 
        (
            SELECT  OAFACI, MAX(FDATE) max_date
            FROM    tableName
            GROUP   BY OAFACI
        ) b ON  a.OAFACI = b.OAFACI AND
                a.FDATE = b.max_date
-- WHERE    a.OAFACI = 812 
```

# php - 检测php中当前页面是从哪个页面转发的？

> ID：14679410
> 
> 赞同：0
> 
> 时间：2013-02-04T01:46:50.160
> 
> 标签：php

首先，我对 php 非常陌生。我在 php 中有一个名为 CurrentPage.php 的页面。CurrentPage.php 使用方法从名为 PreviousPage.php 的页面转发

`header('Location:CurrentPage.php')`.

现在在被转发到名为 CurrentPage.php 的页面后，是否可以发现该页面是从 PreviousPage.php 转发的？（不使用会话）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T01:47:42.313

您可以在`Referer`标题¹可用时使用它，但不能保证它可用
（或正确；它可以被恶意用户修改）：

```
echo $_SERVER["HTTP_REFERER"]; 
```

¹是的，确实拼错了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T01:51:26.673

您很可能希望保留来自您自己网站的推荐，在这种情况下，请查看：

[MSIE 中 $_SERVER['HTTP_REFERER'] PHP 变量的替代方案](https://stackoverflow.com/questions/3966059/alternative-for-serverhttp-referer-php-variable-in-msie)

# mysql - 在 ARM 上构建的 mySQL C 连接器

> ID：14679414
> 
> 赞同：0
> 
> 时间：2013-02-04T01:47:34.473
> 
> 标签：mysql, gcc, ubuntu, compilation, arm

我已经按照 mySQL 网站上的说明在运行 Ubuntu 10 的 ARM 计算机上构建了 mySQL C 连接器[。](https://dev.mysql.com/doc/refman/5.1/en/connector-c-building.html)然后，我将构建的头文件和库以及正确的系统链接复制到由`mysql_config --cflags`和指定的路径`mysql_config --libs`。所以，我有以下输出`my_sql_config --cflags --libs`：

```
-I/usr/local/include
-L/usr/local/lib -lmysql -lpthread 
```

和以下目录树：

```
/usr/local/include:
atomic        hash.h      my_aes.h        my_base.h      my_dbug.h     my_list.h                my_pthread.h     my_trie.h     mysql.h          mysys               sha2.h             t_ctype.h    waiting_threads.h
base64.h      keycache.h  my_alarm.h      my_bit.h       my_dir.h      my_md5.h         my_stacktrace.h  my_uctype.h   mysql_com.h      mysys_err.h         sql_common.h       thr_alarm.h  wqueue.h
config-win.h  lf.h        my_alloc.h      my_bitmap.h    my_getopt.h   my_net.h         my_sys.h         my_vle.h      mysql_time.h     queues.h            sslopt-case.h      thr_lock.h
decimal.h     m_ctype.h   my_atomic.h     my_charsets.h  my_global.h   my_no_pthread.h  my_time.h        my_xml.h      mysql_version.h  service_versions.h  sslopt-longopts.h  typelib.h
errmsg.h      m_string.h  my_attribute.h  my_config.h    my_libwrap.h  my_nosys.h       my_tree.h        myisampack.h  mysqld_error.h   sha1.h              sslopt-vars.h      violite.h

/usr/local/lib:
drwxr-xr-x  3 root root     4096 Oct 21 10:19 .
drwxr-xr-x 11 root root     4096 Oct 21 09:38 ..
lrwxrwxrwx  1 root root       14 Oct 21 10:12 libmysql.so -> libmysql.so.16
lrwxrwxrwx  1 root root       18 Oct 21 10:11 libmysql.so.16 -> libmysql.so.16.0.0
-rw-r--r--  1 root root  2156350 Oct 21 09:56 libmysql.so.16.0.0
-rw-r--r--  1 root root  2539588 Oct 21 09:56 libmysqlclient.a
lrwxrwxrwx  1 root root       11 Oct 21 10:12 libmysqlclient.so -> libmysql.so
lrwxrwxrwx  1 root root       11 Oct 21 10:13 libmysqlclient_r.so -> libmysql.so 
```

现在，当我尝试静态编译某些东西时，使用这样的东西：

```
gcc -static -o hello_world $(mysql_config --cflags) hello_world.c $(mysql_config --libs) 
```

我收到如下错误消息：

```
/usr/bin/ld: cannot find -lmysql
collect2: ld returned 1 exit status 
```

有人知道为什么我的链接器在正确的位置并且构建在同一平台上时找不到库吗？预先感谢。

编辑：当我在没有静态标志的情况下运行相同的编译命令时，编译工作正常，但是，在运行时我得到一个`error while loading shared libraries: libmysql.so.16: cannot open shared object file: No such file or directory` 有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T01:59:39.260

您正在静态链接，`libmysql.a`但您没有这样的库可用。

带后缀`.so`的库是动态库，带后缀`.a`的库是静态库。

如果您为动态库创建类似的符号链接，它可能会起作用：

```
ln -s libmysqlclient.a /usr/local/lib/libmysql.a 
```

# angularjs - 使用 AngularJS 创建 SPA 如何仅向经过身份验证的用户显示模板？

> ID：14679417
> 
> 赞同：1
> 
> 时间：2013-02-04T01:47:57.610
> 
> 标签：angularjs, single-page-application

我正在使用 AngularJS 和 Bootstrap 创建一个 SPA。假设我的 Web 应用程序为经过身份验证和未经身份验证的用户提供服务。未经身份验证的用户看到一个带有顶部菜单导航的小册子站点。带有关于我们、联系方式等的链接。我定义了我的路线和内容，即部分交换进出主体，一切正常。

然后他登录并通过身份验证。现在我想让他看到左手导航。菜单和内容在右边。只有右边的内容被换入和换出。所以有两个页面模板 (1) 小册子网站模板 - 顶部菜单和 (2) 安全网站模板 - 侧面 + 顶部菜单。

使用 Angular 最有效的方法是什么？我是否使用 ng-include 指令为每个部分加载相同的侧边菜单？例如 ng-include src='menu.html'？

如果有某种方法可以指定两个“主”页面模板，那就太好了！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T03:03:29.157

`ngSwitch`根据您的需要，您可以使用 CSS 和 的组合来做一些漂亮的事情。这是一个简单的例子：

```
<body ng-controller="LoginController">
  <div ng-switch="currentUser.loggedIn">
    <div ng-switch-when="false">
      <div class='top'>
        <h1>Welcome</h1>
        <a href='about'>About</a>
        <a href='contact'>Contact</a>
        <a ng-click='login()'>Login</a>
      </div>
      <div ng-view>
    </div>

    <div ng-switch-when="true">
      <div class='side'>
        <h2>Authenticated</h2>
        <a href='about'>About</a>
        <a href='contact'>Contact</a>
        <a ng-click='logout()'>Logout</a>
      </div>
      <div ng-view>
    </div>
  </div>
</body> 
```

`currentUser.loggedIn`现在您可以通过更改值（即做什么`login()`和做什么）在两种布局之间切换`logout()`。这是一个基于此概念的示例：[http](http://plnkr.co/edit/Ng1KGe0Qt9Lpdl2jfhNX?p=preview) ://plnkr.co/edit/Ng1KGe0Qt9Lpdl2jfhNX?p=preview （单击链接查看效果）。

也有可能，根据您的服务器端技术和堆栈（包括模板和 CSS），根据用户是否登录，提供两个不同的 Angular HTML 页面之一可能同样容易。

# jekyll - 启动网站的本地版本时出错

> ID：14679423
> 
> 赞同：1
> 
> 时间：2013-02-04T01:49:09.703
> 
> 标签：jekyll

我尝试在 Windows 7 上安装 Jekyll。我按照本指南[http://www.testically.org/2012/02/02/installing-jekyll-and-ruby-on-windows/](http://www.testically.org/2012/02/02/installing-jekyll-and-ruby-on-windows/) 所以我首先下载了 Ruby 并添加了 \; C:\Ruby193\bin 到路径变量。然后我下载了 DevKit 并将 \;C:\Users\jimmy\Downloads\teeheeband\bin\ 添加到路径变量中。然后我打开我的命令并执行以下（按顺序） cd ;C:\Users\jimmy\Downloads\teeheeband ruby​​ dk.rb init ruby​​ dk.rb install

以下是我执行上述步骤时出现在屏幕上的代码。

```
Microsoft Windows [Version 6.1.7601]
Copyright (c) 2009 Microsoft Corporation.  All rights reserved.

C:\Users\jimmy>cd ;C:\Users\jimmy\Downloads\teeheeband

C:\Users\jimmy\Downloads\teeheeband>ruby dk.rb init
[INFO] found RubyInstaller v1.9.3 at C:/Ruby193

Initialization complete! Please review and modify the auto-generated
'config.yml' file to ensure it contains the root directories to all
of the installed Rubies you want enhanced by the DevKit.

C:\Users\jimmy\Downloads\teeheeband>ruby dk.rb install
[INFO] Skipping existing gem override for 'C:/Ruby193'
[WARN] Skipping existing DevKit helper library for 'C:/Ruby193'

C:\Users\jimmy\Downloads\teeheeband>gem install jekyll
Successfully installed jekyll-0.12.0
1 gem installed
Installing ri documentation for jekyll-0.12.0...
Installing RDoc documentation for jekyll-0.12.0...

C:\Users\jimmy\Downloads\teeheeband> 
```

完成上述操作后，我下载了 github 并克隆了我想要处理的 repo。然后我去了Gitshell并做了以下

```
Windows PowerShell
Copyright (C) 2009 Microsoft Corporation. All rights reserved.

C:\Users\jimmy\Documents\GitHub> cd  prog694.github.com
C:\Users\jimmy\Documents\GitHub\prog694.github.com [new-branch]> jekyll --server
 --auto
Configuration from C:/Users/jimmy/Documents/GitHub/prog694.github.com/_config.ym
l
Auto-regenerating enabled: C:/Users/jimmy/Documents/GitHub/prog694.github.com ->
 C:/Users/jimmy/Documents/GitHub/prog694.github.com/_site
[2013-02-03 20:19:00] regeneration: 402 files changed
[2013-02-03 20:19:01] INFO  WEBrick 1.3.1
[2013-02-03 20:19:01] INFO  ruby 1.9.3 (2013-01-15) [i386-mingw32]
[2013-02-03 20:19:01] INFO  WEBrick::HTTPServer#start: pid=4036 port=4000
[2013-02-03 20:20:24] ERROR no access permission to     `/'
jimmy-PC - - [03/Feb/2013:20:20:24 Atlantic Standard Time] "GET / HTTP/1.1" 403
283
- -> /
[2013-02-03 20:20:24] ERROR `/favicon.ico' not found.
jimmy-PC - - [03/Feb/2013:20:20:24 Atlantic Standard Time] "GET /favicon.ico HTT
P/1.1" 404 281
- -> /favicon.ico 
```

最后我打开浏览器并尝试通过以下方式运行网站的本地副本： localhost:4000 我失败并收到此消息

```
Forbidden

no access permission to `/'
WEBrick/1.3.1 (Ruby/1.9.3/2013-01-15) at 127.0.0.1:4000

so I used h**p://127.0.0.1:4000/( replace t with **) 
```

又失败了

```
Forbidden

no access permission to `/'
WEBrick/1.3.1 (Ruby/1.9.3/2013-01-15) at 127.0.0.1:4000 
```

我想要的只是能够打开并运行该网站的本地版本。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-15T02:18:30.880

检查您的端口 4000 是否未被其他设备使用，或者您是否有防火墙启用对它的访问。

我非常不推荐 Windows 用于 jekyll（或任何 ruby​​ gem/app），在 Linux 中安装和使用它会容易得多。

# java - 更新对象属性

> ID：14679425
> 
> 赞同：1
> 
> 时间：2013-02-04T01:49:29.467
> 
> 标签：java, security, struts2, passwords, password-storage

我正在使用 Struts 2，我的问题是我不想更新我的所有对象属性，因为我得到了一些敏感数据。

这是我的代码示例

```
public class person {
  private name;
  private email;
  private password;
} 
```

例如，在我的表单中，我显示了用于更新的姓名和电子邮件，因此当我在提交后更新我的人员属性时，人员的密码属性获取值为 null，但是当我将属性密码放在`<s:hidden>`表单中的标记中时，更新工作正常。

如何让 Struts 2 在不使用表单中的隐藏标签的情况下记住密码的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T09:20:38.150

如果您需要存储以下信息

*   必须在请求中保持不变；
*   不得在页面中显示；

那么你必须[使用 Session](http://www.splinter.com.au/how-to-use-sessions-with-struts-2/)，通过实现`SessionAware`：

* * *

也就是说，我不确定您是否应该存储用户密码，也不应该将密码与用户关联；

您应该在您的 Web 应用程序中创建一个登录页面，仅在该操作中处理密码，根据数据库（或其他）验证它，并在 Session 中存储一些身份验证 ID，而不是密码本身（您不会验证用户同样，除非会话过期，否则用户将被重定向到登录页面......无需将密码保存在内存中）。

* * *

也就是说，用户身份验证的最佳实践不鼓励根据数据库中存储的密码验证输入的密码；

您应该使用一些单向[散列算法](http://en.wikipedia.org/wiki/Cryptographic_hash_function)（[添加盐](http://en.wikipedia.org/wiki/Salt_%28cryptography%29)以防止`Rainbow Table`s 攻击）来散列密码，并根据数据库上的散列密码检查它。这样，即使是数据库管理员也无法知道用户的密码，一旦忘记密码，密码将被重置，而不是被找回。

在 Java 中，最好的实现之一是基于[BCrypt的](http://www.mindrot.org/projects/jBCrypt/)[jBCrypt](http://en.wikipedia.org/wiki/Bcrypt)。

希望有帮助...

* * *

**编辑**

作为在概念上分离您在 Web 应用程序中处理的对象的一种方法，您可以使用两个不同的 bean：一个用于读取的“完整 Bean”，具有所有属性，一个用于写入的“子集 Bean”，仅包含可以改变。

例如，ID 和密码不应该改变......您可以从数据库中读取“完整”，然后写入 JSP，然后写入数据库“子集”（除了在用户注册中，您将在其中写入完整）。 ..

为了更容易理解，Full Bean 是`Dao`映射数据库字段的对象，而 Subset Bean 是一个`Presentation`对象，您将通过仅从 Dao 对象中复制所需的属性来创建它......它们都是 DTO，但是具有两个不同层次的语义。

否则，只需将您的 bean 放入会话中，它就是一行代码，您就可以了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T02:25:50.260

您可以在服务器端检查“null”（或唯一值）值（如果为null，则表示：没有变化。）。或者您可以将此类用于更新请求

```
Public class person
{

  protected name;
  protected email;
}
Public class personNew: person // inherit from person
{
    private password;
} 
```

我不使用“Struts 2”，而是在我的 Web 应用程序（APS.NET C#）中。我走这条路

# c# - Convert.ChangeType 矩阵

> ID：14679426
> 
> 赞同：1
> 
> 时间：2013-02-04T01:49:32.340
> 
> 标签：c#, .net, type-conversion, changetype

是否有任何资源可以`Convert.ChangeType()`在表格中显示 .NET 结果？即从哪种类型转换为哪种类型会成功、溢出、无效转换或抛出其他异常。

特别是，我想知道相同大小的有符号和无符号数字（例如 Int32 和 UInt32）之间的转换是否会成功、溢出或无效转换。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T01:55:44.853

int32 最大值是 2,147,483,647，UInt32 最大值是 4,294,967,295 所以如果你将一个数字从 int32 转换为 uint32 并坚持 int32 最大边界，反之亦然，否则它会给你一个异常除以零我猜

# java - JTextPane 中的 Max CaretPosition 不等于带有 CRLF 换行符的 Textlength

> ID：14679429
> 
> 赞同：1
> 
> 时间：2013-02-04T01:49:50.713
> 
> 标签：java, swing, newline, jeditorpane

JEdi​​torPane 在换行符和 TextLength 之后具有关于 CaretPosition 的奇怪行为。如果存在 CarriageReturn 和 LineFeed，则中断后的 Caret Position 为一到低，因为 Java 在计算 CaretPosition 时将其视为一个字符。但是，Textlength 将其正确处理为两个字符。这种行为似乎是由[DefaultEditorKit](http://docs.oracle.com/javase/6/docs/api/javax/swing/text/DefaultEditorKit.html)引起的，但我看不到使 .getCaretPosition 与 .getText().length() 同步的可能性，而与使用的换行符无关。

我附上了一个小代码。只需将插入符号放在第二行的末尾并按更新。TextLength 是 5，但 CaretPosition 最后只有 4。如果我只使用 CR 作为换行符，那没关系。JTextArea 做得对。问题的根源 [类似于 JTextPane 中的插入符号位置不正确？！错误或预期行为？](https://stackoverflow.com/questions/8878392/caret-position-in-jtextpane-is-not-correct-bug-or-expected-behavior).

你有什么想法来解决这个问题吗？

```
 import java.awt.*;
    import javax.swing.*;
    import javax.swing.text.*;
    import java.awt.event.*;

    public class test2 extends JFrame {

    JTextComponent testingArea = new JEditorPane();
    JButton button = new JButton("Update");
    JTextComponent resultArea = new JTextField(25);

    public test2() {
    initialise();
    testingArea.setText("01\r\n4");
}

private void initialise() {
    testingArea.setPreferredSize(new Dimension(100,100));
    setLayout(new FlowLayout());
    getContentPane().add(testingArea);
    getContentPane().add(new JLabel("answer"));
    getContentPane().add(resultArea);
    getContentPane().add(button);
    button.addActionListener(new ActionListener() {

        @Override
        public void actionPerformed(ActionEvent e) {
            try { 
                int caretPosition = testingArea.getCaretPosition();
                int textLength = testingArea.getText().length();
                resultArea.setText("TextLength is " + textLength + ". Current CaretPosition is " + caretPosition);
            }catch (Exception ex) {
                ex.printStackTrace();
                resultArea.setText("ERROR");
            }

        }
    });
    setDefaultCloseOperation(EXIT_ON_CLOSE);
}

public static void main(String[] args) {
    final test2 ex = new test2();
    SwingUtilities.invokeLater(new Runnable() {

        @Override
        public void run() {
            ex.pack();
            ex.setVisible(true);

        }
    });
}
} 
```

# python - 如何将单个 python 列表元素拆分为几个独立的列表元素？

> ID：14679431
> 
> 赞同：0
> 
> 时间：2013-02-04T01:50:01.263
> 
> 标签：python, list, nested-lists

我有一个 .txt 文件，其内容如下：

> 0，你好，01，烹饪，02，骑自行车，13，我的夏威夷假期，14，爱荷华州的冰冻天气，0

我到目前为止的代码是：

```
a = open('wiki.txt','r')
ar = a.readlines()
biglistA = map(lambda each:each.strip('\n'), ar) 
```

这给了我以下输出：

```
['0,Hello,0', '1,Cooking,0', '2,Biking,1', '3,My Hawaii Vacation,1', '4,Freezing weather in Iowa,0'] 
```

我需要让它看起来像：

```
[['0','Hello','0'], ['1','Cooking','0'], ['2','Biking','1'], ['3','My Hawaii Vacation','1'], ['4','Freezing weather in Iowa','0']] 
```

最终产品需要是一个嵌套列表，每个元素都被引用，即：

```
print newlist[1][1] 
```

'烹饪'

**那是期望的输出。如果有人可以提供帮助，将不胜感激！**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T01:56:38.890

在我看来，您需要类似的东西：

```
with open('wiki.txt') as fin:
    bigListA = [ line.strip().split(',') for line in fin ] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T02:00:11.177

一个奇怪的要求。我想正则表达式是最好的选择：

```
import re
with open('wiki.txt') as f:
  s = f.read()
newlist = [triple.split(',') for triple in re.findall(r'\d,.*?,\d', s)] 
```

或者，从您已经在的位置继续，只需应用一个列表理解，例如：

```
newlist = [x.split(',') for x in biglistA] 
```

# javascript - jQuery 事件委托

> ID：14679432
> 
> 赞同：1
> 
> 时间：2013-02-04T01:50:03.043
> 
> 标签：javascript, jquery, callback, jquery-events

我需要一些关于回调的帮助。出于某种原因，它们不能很好地工作。
我正在用 jQuery 制作游戏。我有一个`<div id='button'></div>`用于游戏中的所有按钮。游戏将有两个按钮来执行操作，以及一个问题。问题由 a 控制`<h3 id='text'></h3>`。我想知道的是，由于某种原因，我无法将回调函数设置为按钮的 ID。例如，我会选择是或否，它们通过 jQuery 设置自己的 id，如下所示：

`$('#button').html('<button id='yes'>Yes</button><button id='no'></button>');`
但由于某种原因，我可以设置这个：

```
$('yes').click(function(){
  //function I would want
}); 
```

当然，这不是我的代码所具有的，这只是一个示例。这是真正的代码：

```
$(document).ready(function(){
    $('#main,#batman,#car,#cop,#hobo,#knife,#gangfight,#ganggun,#gangknife,#blood,#hr').hide(-100);
    var hr=$('#hr');
    var main=$('#main');
    var batman=$('#batman');
    var car=$('#car');
    var hobo=$('#hobo');
    var cop=$('#cop');
    var knife=$('#knife');
    var gangfight=$('#gangfight');
    var ganggun=$('#ganggun');
    var gangknife=$('#gangknife');
    var blood=$('#blood');
    var text=$('#text');
    var button=$('#button');
    $('#start').html('Are you ready to play?');
    $('#button').html('<button id="yes">Yes</button><button id="no">No</button>');
        $('#yes').click(function(){
            $('#yes,#no').hide(function(){
                $('#start').hide();
                main.fadeIn(-100);
                hr.fadeIn(-100,function(){
                text.delay(1000).html("You were just wandering around in the streets of new york, when suddenly.. You see batman!! You've never really liked him, what do you do?")
                    button.html('<button id="fight">Fight</button><button id="leave">Leave</button>',function(){
                        batman.fadeIn(1000);
                        $('fight').click(function(){
                        });
                        $('leave').click(function(){
                            text.fadeOut(function(){
                                text.text('Good call. As you leave, you encounter a hobo. What do you do?');
                            });
                        });
                    });
                });
            });
        });
        $('#no').click(function(){
            $('#yes,#no').hide();
            $('#start').text('Oh, okay then. Come back later!');
        });
    }); 
```

我只是想知道..如何将回调函数设置为“战斗”和“离开”。
如果您想知道为什么一开始会有所有这些变量，那只是图像和字符。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T01:54:29.863

您不能`click`在不存在的元素上设置处理程序。您应该做的是使用`.on`将元素绑定到树的上方。就像是：

```
$("#someparentelement").on("click", "#yes", function() {
    // your code
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T01:54:12.657

您使用的是哪个版本的 jQuery？在这种情况下，您可能应该使用 jQuery.on()，因为您的单击处理程序代码可能会在按钮在 DOM 中实际可用之前执行。

```
$("#button").on("click", "#yes", function (event) {
    // Your yes-button logic comes here.
}); 
```

有关更多详细信息和可能性，请阅读[jQuery 文档](http://api.jquery.com/on/)`.on(events [, selector ] [, data ], handler(eventObject))`中的方法：

> 如果选择器被省略或为空，则事件处理程序被称为直接或直接绑定。每次在选定元素上发生事件时都会调用处理程序，无论它是直接发生在元素上还是来自后代（内部）元素的冒泡。
> 
> 当提供选择器时，事件处理程序被称为委托。当事件直接发生在绑定元素上时，不会调用处理程序，而只会调用与选择器匹配的后代（内部元素）。jQuery 将事件从事件目标冒泡到附加处理程序的元素（即，从最内到最外的元素），并为沿该路径匹配选择器的任何元素运行处理程序。

在这种情况下，您想要`delegate`该事件，因为当您绑定事件时，您的元素在 DOM 中尚不可用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T01:54:11.380

不要使用`click()`，使用`on('click')`并将其附加到文档中。

以这种方式创建处理程序将确保任何新元素都能够触发事件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T01:56:22.980

$('fight') 选择战斗标签，而不是带有战斗 ID 的标签。尝试使用 $('#fight') 代替。

# python-2.7 - 如何在 Windows 上从 pygraphviz 运行neato

> ID：14679434
> 
> 赞同：12
> 
> 时间：2013-02-04T01:50:50.617
> 
> 标签：python-2.7, neato, pygraphviz

我正在尝试在 python (v 2.7) 中使用 pygraphviz 和 networkx 来创建网络图。我发现了一个在 stackoverflow 上看起来非常有用的脚本：

```
import networkx as nx
import numpy as np
import string
import pygraphviz

dt = [('len', float)]
A = np.array([(0, 0.3, 0.4, 0.7),
               (0.3, 0, 0.9, 0.2),
               (0.4, 0.9, 0, 0.1),
               (0.7, 0.2, 0.1, 0)
               ])*10
A = A.view(dt)

G = nx.from_numpy_matrix(A)
G = nx.relabel_nodes(G, dict(zip(range(len(G.nodes())),string.ascii_uppercase)))    

G = nx.to_agraph(G)

G.node_attr.update(color="red", style="filled")
G.edge_attr.update(color="blue", width="2.0")

G.draw('/tmp/out.png', format='png', prog='neato') 
```

我在最后一行得到一个错误，基本上它找不到neato：

> “ValueError：在路径中找不到程序整洁。”

该错误指的是 agraph.py 文件`pygraphviz`，但是当我查看 agraph.py 时，我看不到任何可能导致问题的东西

任何想法如何解决这个问题？我正在使用 windows 和 IDLE 进行编码。谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-06-02T19:09:54.820

我有同样的问题。这是我所做的，以防其他人努力让 pygraphvis 在 Windows 上工作。

首先，我安装了graphviz。我试图通过 pip 安装 pygraphvis，但它拒绝工作。最终，我找到了非官方的 Windows 二进制文件，所以我安装了它。导入模块现在可以工作，但调用`G.layout()`导致上述错误。

调用`neato -V`有效，所以它在我的路径上。我发现问题在于 python 在安装 pygraphvis 之前创建的命令提示符中运行，因此 PATH 没有更新。重新启动命令提示符解决了这个问题，但导致了一个新错误，关于`C:\Program`不是一个有效的命令。

我认为 pygraphvis 可能无法正确引用路径，这意味着它会在 Program Files 中的空间处截断。我通过将其符号链接到没有空格的路径来解决问题。

```
mklink /d C:\ProgramFilesx86 "C:\Program Files (x86)" 
```

请注意，这必须在管理员模式下运行。您可以通过转到开始菜单，输入 cmd，然后按 Ctrl+shift+enter 来完成。

在此之后，我编辑了我的 PATH 以引用符号链接，重新启动 cmd，一切正常。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-04T20:31:14.187

问题是 pygraphviz 调用了一个外部程序，即 graphviz 套件的一部分，称为[neato](http://www.google.it/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CCsQFjAA&url=http://www.graphviz.org/pdf/neatoguide.pdf&ei=qhkQUeygDcbStAaXw4HgCw&usg=AFQjCNGnFzc_Q56x31OxgAU-dAsTSMrW2w&bvm=bv.41867550,d.Yms)来绘制图形。发生的事情是您没有安装 graphviz 并且当 python 尝试调用它时它抱怨找不到它。实际上 pygraphviz 只是一个包装器，它使您可以从 python 内部调用 graphviz，但它本身不做任何事情，并且默认情况下不安装 graphviz。

最简单的解决方案是为情节尝试不同的解决方案，而不是使用neato。接受的选项是：

```
neato
dot
twopi
circo
fdp
nop 
```

尝试其中一个，看看其中一个是否有效。否则，您可以安装 graphviz，它将为您提供所需的程序。它是每个平台上都可用的开源程序，因此安装它应该不是问题。

见[http://www.graphviz.org/](http://www.graphviz.org/)

如果您只需要绘制图形草图，则可以在 networkx 图形上使用 networkx.draw 函数，该函数使用 matplotlib 创建交互式绘图。

```
import networkx as nx
G = G=nx.from_numpy_matrix(A)
nx.draw(G) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-10-15T07:38:32.810

您的问题是`neato`缺少。
`neato`是 graphviz 套件的一部分，您可以从[这里](https://graphviz.gitlab.io/_pages/Download/Download_windows.html)安装到您的 PC 上。（我用过`.msi`）

现在，neato 已“安装”，但您的系统不知道在哪里。因此，将`neato.exe`包含的目录添加到您的`PATH`环境变量中。在 Win10 上，这可以使用`Start -> Edit environment variables for your account -> select path in the upper window -> edit -> New -> C:\Program Files (x86)\Graphviz2.38\bin\` 或任何您的安装目录来完成。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-02-09T01:39:04.230

尝试这样的事情，看看 pygraphviz 认为你的外部程序在哪里：

```
# Get paths of graphviz programs
import pygraphviz as pgv

A = pgv.AGraph()
progs_list = ['neato', 'dot', 'twopi', 'circo', 'fdp', 'nop', 'wc', 'acyclic', 'gvpr',
              'gvcolor', 'ccomps', 'sccmap', 'tred', 'sfdp', 'unflatten']
for prog in progs_list:
    try:
        runprog = A._get_prog(prog)
        print(f'{runprog}')
    except ValueError as e:
        print(f'{prog} gets this error: {str(e).strip()}') 
```

在查看结果之后，在您的 IDE 之外安装 Graphviz 并在系统控制面板中设置您的 Path 环境变量等需要做很多工作。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-11-04T20:57:29.890

导致此错误的原因可能不止一个，但如果它是由缺少 graphviz modules 的路径引起的`[neato,dot,twopi,circo,fdp,nop]`，那么有一个 hack 对我有用。我目前正在询问正确的解决方案是什么，但是您可以使用它

```
if  not 'C:\\Program Files (x86)\\Graphviz2.38\\bin' in os.environ["PATH"]: 
    os.environ["PATH"] += os.pathsep + 'C:\\Program Files (x86)\\Graphviz2.38\\bin' 
```

在脚本的开头。概括地说，如果您的 graphviz 文件保存在其他地方：

```
graph_path='your_bin_folder_path'
    if  not graph_path in os.environ["PATH"]: 
        os.environ["PATH"] += os.pathsep + graph_path 
```

特别是，这适用于 Windows 10，使用 anaconda navigator 和 python 版本 3.7。

# java - Glassfish 2.x EJB 库缺失

> ID：14679442
> 
> 赞同：0
> 
> 时间：2013-02-04T01:51:30.913
> 
> 标签：java, netbeans, glassfish, ejb

我有一个在本地机器上的 GlassFish 3.1.2 上流畅运行的网络应用程序。但是，我可以将此应用程序放在运行 GF2.1 的实际服务器上。

当我尝试将 netbeans 项目导入 netbeans（较低版本）并编译它时，我的导入库中很少出现“找不到类”错误。

以下是这些进口：

```
import javax.ejb.Schedule;
import javax.ejb.Singleton;
import javax.ejb.Startup;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.SessionScoped; 
```

只是想知道我怎么可能解决这个问题？

有没有机会我可以在 Glassfish 2.1 上手动添加更多库？

或者我可以采用任何替代方法吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T02:23:32.943

看起来您正在使用 EJB 3 中定义的项目（例如 javax.ejb.Startup）。Glassfish 2 不支持 EJB 3。

您已经根据 JavaEE 6 规范（Glassfish 3 支持该规范）编写了应用程序。所以最好的办法是在支持它的容器中运行它。Glassfish 2.x 支持 JavaEE 5，而不是 6。我认为您无法像在 Glassfish 2 中那样运行它

# java - SAX 解析：在文本元素中遇到混合内容

> ID：14679445
> 
> 赞同：1
> 
> 时间：2013-02-04T01:52:03.627
> 
> 标签：java, xml-parsing, sax

我正在尝试解析如下所示的 XML 文件（代表电视指南）...

```
<?xml version="1.0" encoding="utf-8"?>
<channels>
  <channel>
    <name>BBC ONE</name>
    <oid>10029</oid>
      ...
    <programmes>
      <programme>
        <description>Blah blah blah</description>
        <end_time>2013-02-04 01:40:00</end_time>
        <episode>9</episode>
        <genres>Entertainment</genres>
        <oid>10583734</oid>
        <season>8</season>
        <start_time>2013-02-04 00:15:00</start_time>
        <title>The Celebrity Apprentice USA</title>
      </programme>
      <programme>
        ..
      </programme>
    </programmes>
  </channel>
  <channel>
    ...
  </channel>
</channels> 
```

我正在使用两个解析器——一个用于通道，另一个用于程序，但显然这意味着我需要检索整个 of`<programmes>...</programmes>`以将其传递给“程序”解析器。

我在“频道”解析器中尝试了以下内容......

```
public List<XMLTVChannel> parse() {
    RootElement rootElement = new RootElement("channels");
    final List<XMLTVChannel> channelsList = new ArrayList<XMLTVChannel>();
    Element channelElement = rootElement.getChild("channel");

    ...

    // Set the EndTextElementListeners for the <channel> child elements
    channelElement.getChild(CHANNEL_OID).setEndTextElementListener(new EndTextElementListener() {
        public void end(String body) {
            currentChannel.setOid(body);
        }
    });

    ...

    // HERE'S THE PROBLEM
    channelElement.getChild("programmes").setEndTextElementListener(new EndTextElementListener() {
        public void end(String body) {
            // NEED TO INVOKE XMLTVProgrammeParser HERE
        }
    });
    try {
        Xml.parse(getInputStream(), Xml.Encoding.UTF_8, rootElement.getContentHandler());
    } catch (Exception e) {
        throw new RuntimeException(e);
    }
    return channelsList;
} 
```

好的，所以我已经用谷歌搜索了，我确切地知道问题出在哪里——`String body`传递给`end(...)`方法的参数应该只包含文本，而它是元素及其文本的混合。

我已经阅读了一些类似的 stackoverflow 问题和文章，这些问题和文章建议我需要定义自己的`ContentHandler`内容，但我还没有找到与我正在尝试做的事情完全一样的事情。定制是`ContentHandler`我唯一的选择还是有其他方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T19:14:56.843

你的意思是你想要这个输出：

```
 BBC ONE
10029
------------------------
The Celebrity Apprentice USA
2013-02-04 00:15:00 - 2013-02-04 01:40:00
Entertainment
Season : 8 / Episode : 9
Description:
Blah blah blah
10583734
**********************
The Celebrity Apprentice USA
2013-02-04 01:45:00 - 2013-02-04 02:25:00
Entertainment
Season : 8 / Episode : 10
Description:
Blah blah blah
10583735
**********************
//////////////////////////
BBC TWO
10030
------------------------
American Dad
2013-02-04 00:30:00 - 2013-02-04 01:25:00
Cartoon
Season : 14 / Episode : 1
Description:
Blah blah blah
10583734
**********************
American Dad
2013-02-04 01:30:00 - 2013-02-04 02:15:00
Cartoon
Season : 14 / Episode : 2
Description:
Blah blah blah
10583735
**********************
////////////////////////// 
```

我已经修改了你的 xml 文件：

```
 <?xml version="1.0" encoding="utf-8"?>
<channels>
  <channel>
    <name>BBC ONE</name>
    <oid>10029</oid>
    <programmes>
      <programme>
        <description>Blah blah blah</description>
        <end_time>2013-02-04 01:40:00</end_time>
        <episode>9</episode>
        <genres>Entertainment</genres>
        <oid>10583734</oid>
        <season>8</season>
        <start_time>2013-02-04 00:15:00</start_time>
        <title>The Celebrity Apprentice USA</title>
      </programme>
       <programme>
        <description>Blah blah blah</description>
        <end_time>2013-02-04 02:25:00</end_time>
        <episode>10</episode>
        <genres>Entertainment</genres>
        <oid>10583735</oid>
        <season>8</season>
        <start_time>2013-02-04 01:45:00</start_time>
        <title>The Celebrity Apprentice USA</title>
      </programme>
    </programmes>
  </channel>
  <channel>
      <name>BBC TWO</name>
      <oid>10030</oid>
      <programmes>
      <programme>
        <description>Blah blah blah</description>
        <end_time>2013-02-04 01:25:00</end_time>
        <episode>1</episode>
        <genres>Cartoon</genres>
        <oid>10583734</oid>
        <season>14</season>
        <start_time>2013-02-04 00:30:00</start_time>
        <title>American Dad</title>
      </programme>
       <programme>
        <description>Blah blah blah</description>
        <end_time>2013-02-04 02:15:00</end_time>
        <episode>2</episode>
        <genres>Cartoon</genres>
        <oid>10583735</oid>
        <season>14</season>
        <start_time>2013-02-04 01:30:00</start_time>
        <title>American Dad</title>
      </programme>
    </programmes>
  </channel>
</channels> 
```

**Java 类：**

*渠道*

```
public class Channel {

        private String name;
        private String oid;
        private ArrayList<Programme> alProgrammes;

        public Channel(){}

        public String getName() {
            return name;
        }

        public void setName(String name) {
            this.name = name;
        }

        public String getOid() {
            return oid;
        }

        public void setOid(String oid) {
            this.oid = oid;
        }

        public ArrayList<Programme> getAlProgrammes() {
            return alProgrammes;
        }

        public void setAlProgrammes(ArrayList<Programme> alProgrammes) {
            this.alProgrammes = alProgrammes;
        }

    } 
```

*程序*

```
 public class Programme {

    private String description;
    private String end_time;
    private String episode;
    private String genres;
    private String oid;
    private String season;
    private String start_time;
    private String title;

    public Programme() {
    }

    //Getters / Setters
    public String getDescription() {
        return description;
    }
    public void setDescription(String description) {
        this.description = description;
    }
    public String getEnd_time() {
        return end_time;
    }
    public void setEnd_time(String end_time) {
        this.end_time = end_time;
    }
    public String getEpisode() {
        return episode;
    }
    public void setEpisode(String episode) {
        this.episode = episode;
    }
    public String getGenres() {
        return genres;
    }
    public void setGenres(String genres) {
        this.genres = genres;
    }
    public String getOid() {
        return oid;
    }
    public void setOid(String oid) {
        this.oid = oid;
    }
    public String getSeason() {
        return season;
    }
    public void setSeason(String season) {
        this.season = season;
    }
    public String getStart_time() {
        return start_time;
    }
    public void setStart_time(String start_time) {
        this.start_time = start_time;
    }
    public String getTitle() {
        return title;
    }
    public void setTitle(String title) {
        this.title = title;
    }

} 
```

*XML管理器*

```
public final class XMLManager {

    public static ArrayList<Channel> getAlChannels(){

          DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
          DocumentBuilder db = null;
          Document doc = null;
          ArrayList<Channel> alChannels = new ArrayList<>();

          try {

            db = dbf.newDocumentBuilder();
            doc = db.parse(new File("D:\\Loic_Workspace\\Test2\\res\\test.xml"));
            NodeList ndListChannels = doc.getElementsByTagName("channel");

            Integer channelsCount = ndListChannels.getLength();
            NodeList ndListChannel = null;
            Integer ndListChannelLength = null;
            Channel channel = null;
            NodeList ndListProgrammes = null;
            for(int i=0;i<channelsCount;i++){

                ndListChannel = ndListChannels.item(i).getChildNodes();
                ndListChannelLength = ndListChannel.getLength();
                channel = new Channel();
                for(int j=0;j<ndListChannelLength;j++){

                    Node currentNode = ndListChannel.item(j);
                    String currentNodeName = currentNode.getNodeName();
                    String value = currentNode.getTextContent();

                    if(currentNodeName.equals("name")){
                        channel.setName(value);
                    }
                    if(currentNodeName.equals("oid")){
                        channel.setOid(value);
                    }
                    if(currentNodeName.equals("programmes")){
                        ndListProgrammes = currentNode.getChildNodes();
                        ArrayList<Programme> alProgrammes = new ArrayList<>();
                        for(int k=0;k<ndListProgrammes.getLength();k++){

                            Node ndProgrammes = ndListProgrammes.item(k);
                            if(ndProgrammes.hasChildNodes()){

                                NodeList ndListProgramme = ndProgrammes.getChildNodes();
                                Integer ndListProgrammeLength = ndListProgramme.getLength();
                                Programme programme = new Programme();
                                for(int l=0;l<ndListProgrammeLength;l++){

                                    Node  ndProgramme = ndListProgramme.item(l);
                                    String nodeProgrameName = ndProgramme.getNodeName();
                                    String nodeProgrameValue = ndProgramme.getTextContent();
                                    if(nodeProgrameName.equals("description")){
                                        programme.setDescription(nodeProgrameValue);
                                    }
                                    if(nodeProgrameName.equals("end_time")){

                                        programme.setEnd_time(nodeProgrameValue);
                                    }
                                    if(nodeProgrameName.equals("episode")){
                                        programme.setEpisode(nodeProgrameValue);
                                    }
                                    if(nodeProgrameName.equals("genres")){
                                        programme.setGenres(nodeProgrameValue);
                                    }
                                    if(nodeProgrameName.equals("oid")){
                                        programme.setOid(nodeProgrameValue);
                                    }
                                    if(nodeProgrameName.equals("season")){
                                        programme.setSeason(nodeProgrameValue);
                                    }
                                    if(nodeProgrameName.equals("start_time")){
                                        programme.setStart_time(nodeProgrameValue);
                                    }
                                    if(nodeProgrameName.equals("title")){
                                        programme.setTitle(nodeProgrameValue);
                                    }

                                }

                                alProgrammes.add(programme);

                            }

                        }

                        channel.setAlProgrammes(alProgrammes);

                    }

                }

                alChannels.add(channel);

            }

          } catch (ParserConfigurationException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (SAXException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

          return alChannels;

    }

} 
```

*主要的*

```
public class MyMain {

    /**
     * @param args
     */
    public static void main(String[] args) {

        ArrayList<Channel> alChannels = XMLManager.getAlChannels();
        for(Channel c:alChannels){
            System.out.println(c.getName());
            System.out.println(c.getOid());
            System.out.println("------------------------");
            for(Programme p:c.getAlProgrammes()){
                System.out.println(p.getTitle());
                System.out.println(p.getStart_time()+" - "+p.getEnd_time());
                System.out.println(p.getGenres());
                System.out.println("Season : "+p.getSeason()+" / Episode : "+p.getEpisode());
                System.out.println("Description:\n"+p.getDescription());
                System.out.println(p.getOid());
                System.out.println("**********************");
            }

            System.out.println("//////////////////////////");

        }

    }

} 
```

## **更新**

这是我如何使用 SAX 进行操作的示例。

重要提示：我保留了我的课程计划和频道

*频道处理程序*

```
public class ChannelsHandler extends DefaultHandler{

    private ArrayList<Channel> tvGuide;
    private Channel channel;
    private ArrayList<Programme> alProgrammes;
    private Programme programme;
    private String reading;

    public ChannelsHandler(){
        super();
    }

    @Override
    public void startElement(String uri, String localName, String qName,
            Attributes attributes) throws SAXException {

        if(qName.equals("channels")){
            tvGuide = new ArrayList<>();
        }else if(qName.equals("channel")){
            channel = new Channel();
        }
        else if(qName.equals("channel")){
            channel = new Channel();
        }
        else if(qName.equals("programmes")){
            alProgrammes = new ArrayList<>();
        }
        else if(qName.equals("programme")){
            programme = new Programme();
        }

    }

    @Override
    public void characters(char[] ch, int start, int length)
            throws SAXException {
        reading = new String(ch, start, length);
    }

    @Override
    public void endElement(String uri, String localName, String qName)
            throws SAXException {

        if(qName.equals("channel")){
            tvGuide.add(channel);
            channel = null;
        }
        if(qName.equals("name")){
            channel.setName(reading);
        }
        else if(qName.equals("programmes")){
            channel.setAlProgrammes(alProgrammes);
            alProgrammes = new ArrayList<>();
        }
        else if(qName.equals("programme")){
            alProgrammes.add(programme);
            programme = null;
        }
        else if(qName.equals("description")){
            programme.setDescription(reading);
        }
        else if(qName.equals("end_time")){
            programme.setEnd_time(reading);
        }
        else if(qName.equals("episode")){
            programme.setEpisode(reading);
        }
        else if(qName.equals("genres")){
            programme.setGenres(reading);
        }
        else if(qName.equals("season")){
            programme.setSeason(reading);
        }
        else if(qName.equals("start_time")){
            programme.setStart_time(reading);
        }
        else if(qName.equals("title")){
            programme.setTitle(reading);
        }

    }

    public ArrayList<Channel> getTVGuide(){
        return tvGuide;
    }

} 
```

*我的新主*

```
public static void main(String[] args) {

        SAXParserFactory factory = SAXParserFactory.newInstance();
        try {
            SAXParser parser = factory.newSAXParser();
            File file = new File("D:\\Loic_Workspace\\TestSAX\\res\\test.xml");
            ChannelsHandler handler = new ChannelsHandler();
            parser.parse(file,handler);
            List<Channel> tvGuide = handler.getTVGuide();
            for(Channel c:tvGuide){
                System.out.println(c.getName());
                System.out.println("------------------------");
                for(Programme p:c.getAlProgrammes()){
                    System.out.println(p.getTitle());
                    System.out.println(p.getStart_time()+" - "+p.getEnd_time());
                    System.out.println(p.getGenres());
                    System.out.println("Season : "+p.getSeason()+" / Episode : "+p.getEpisode());
                    System.out.println("Description:\n"+p.getDescription());
                    System.out.println("**********************");
                }

                System.out.println("//////////////////////////");

            }
        } catch (ParserConfigurationException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (SAXException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    } 
```

在我的控制台中输出：

```
BBC ONE
------------------------
The Celebrity Apprentice USA
2013-02-04 00:15:00 - 2013-02-04 01:40:00
Entertainment
Season : 8 / Episode : 9
Description:
Blah blah blah
**********************
The Celebrity Apprentice USA
2013-02-04 01:45:00 - 2013-02-04 02:25:00
Entertainment
Season : 8 / Episode : 10
Description:
Blah blah blah
**********************
//////////////////////////
BBC TWO
------------------------
American Dad
2013-02-04 00:30:00 - 2013-02-04 01:25:00
Cartoon
Season : 14 / Episode : 1
Description:
Blah blah blah
**********************
American Dad
2013-02-04 01:30:00 - 2013-02-04 02:15:00
Cartoon
Season : 14 / Episode : 2
Description:
Blah blah blah
**********************
////////////////////////// 
```

这是我第一次使用 SAX。也许您可以找到更有效的方法，但它正在工作:-) 我没有在我的更新中管理程序或频道的重复 OID 标签。

# objective-c - 填充表格视图混乱

> ID：14679459
> 
> 赞同：0
> 
> 时间：2013-02-04T01:54:30.253
> 
> 标签：objective-c, cocoa

在 mac osx 10.7 上使用 cocoa 我用一些行填充了一个 TableView，我有一些困惑，

names 是一个 NSArray* 包含 NSString*

```
- (id)tableView:(NSTableView *)aTableView objectValueForTableColumn:(NSTableColumn *)aTableColumn row:(NSInteger)rowIndex;
{
  return [names objectAtIndex:rowIndex];
} 
```

我检查了苹果文档中数据源的协议参考

[https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Protocols/NSTableDataSource_Protocol/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Protocols/NSTableDataSource_Protocol/Reference/Reference.html)

我在上面的函数中返回一个 NSString* ，该方法的签名只返回 id 而不是 NSString* 。文档没有让我知道它刚刚说的返回类型

```
 An item in the data source in the specified tableColumn of the view. 
```

我的案例很简单 NSString* 是有道理的，它有效，但我不确定。我想知道这个隐含的知识来自哪里，这个方法必须返回什么类型的数据，因为签名中没有提到，方法的文档中也没有提到：/

有什么建议吗？我来自 .Net/android/ 背景，那里的文档更有意义，可能是因为这些是强类型语言，...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T07:16:31.307

您应该返回的对象类型取决于 NSTableView 中单元格的定义方式。默认情况下，当您在 Interface Builder 中创建 NSTableView 时，单元格被定义为 NSTextFieldCell，因此可以为这些单元格返回 NSString。但是，您可以在代码中定义单元格以接受其他类型的对象（例如 NSImageCell、NSButtonCell 等）。

# php - PHP图像插入不起作用

> ID：14679464
> 
> 赞同：-1
> 
> 时间：2013-02-04T01:54:45.967
> 
> 标签：php, mysql, upload, insert, blob

G'day，我正在尝试将图像上传到我的数据库中名为“store”的表中，但它似乎不起作用。没有显示错误，但出现了我上传的错误消息，所以语法没有问题。

这是我编写的两个相互关联的 PHP 文件：

索引.php

```
 <html>
    <body>
    <form action="index.php" method="POST" enctype="multipart/form-data">
 File:
<input type="file" name="image"><input type="submit" value="Upload">
     </form>

    <?php
     // connect to database
    include "connect.inc.php";

     //file properties
     $file = $_FILES['image']['tmp_name'];

     if(!isset($file))
echo "Please select an image.";
     else
      {
      $image = addslashes(file_get_contents($_FILES['image']['tmp_name']));
      $image_name = addslashes($_FILES['image']['name']);
      $image_size = getimagesize($_FILES['image']['tmp_name']);

      if($image_size==FALSE)
   echo "That's not an image.";
    else
    {
if (!$insert = mysql_query("INSERT INTO store VALUES  ('','$image_name','$image')")) 
    echo "Problem uploading image.";        
else
{
 $lastid = mysql_insert_id();
 echo "Image uploaded.<p />Your image:<p /><img src=get.php?id=$lastid>";
}
    }
   }    
   ?>
  </body>
  </html> 
```

获取.php

```
 <?php
include "connect.inc.php";

$id = addslashes($_REQUEST['id']);

$image = mysql_query("SELECT * FROM store WHERE id=$id");
$image = mysql_fetch_assoc($image);
$image = $image['image'];

header("Content-type: image/jpeg");

echo $image;

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T16:21:12.867

您在读取文件内容并传回时遇到问题。看起来文件的内容没有放在数据库字段中。检查该字段的长度，内容可以很长（mediumtext 或 longtext）。

您还需要检查上传文件的类型，您可以通过函数“mime_content_type”来完成。如果用户将上传 gif。或 .png 文件 header("Content-type: image/jpeg") 会设置错误信息，您可以使用更通用的 header header("Content-type: image/*")。

并用于实时站点 PDO 或其他 ORM，因为您的方法有很多漏洞。

# python - Subprocess.call 或 Subprocess.Popen 不能使用 PATH (Linux/Windows) 中的可执行文件

> ID：14679466
> 
> 赞同：14
> 
> 时间：2013-02-04T01:55:42.630
> 
> 标签：python, windows, shell, subprocess

我正在编写一个需要在 Linux 和 Windows 上运行并使用路径中存在的可执行文件（带参数）的程序。（假定）

目前，我在使用 Subprocess.Call 和 Subprocess.Popen 在 Windows 中运行可执行文件时遇到问题。

对于这样的代码，在 Windows 8 中

```
def makeBlastDB(inFile, inputType, dbType, title, outDir):
    strProg = 'makeblastdb'
    strInput = '-in ' + inFile
    strInputType = '-input_type ' + inputType
    strDBType = '-dbtype ' + dbType
    strTitle = '-title ' + title
    strOut = '-out ' + os.path.join(os.sep, outDir, title)
    cmd = [strProg, strInput, strInputType, strDBType, strTitle, strOut]
    result = Popen(cmd, shell=True) 
```

我在控制台中收到错误消息

```
'makeblastdb' is not recognized as an internal or external command,
operable program or batch file. 
```

即使我可以使用 cmd.exe 运行相同的命令，我也会得到与 shell=False 相同的响应。

假设可执行文件位于 PATH 环境变量中，关于如何运行命令的任何想法？谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-04T02:12:10.147

您可以通过传递带有`env`关键字参数的映射来控制生成的子进程中可用的环境变量。例如

```
proc = subprocess.Popen(args, env={'PATH': '/some/path'}) 
```

或者从系统环境变量继承`PATH`，而不必从系统环境中插入其他所有内容：

```
proc = subprocess.Popen(args, env={'PATH': os.getenv('PATH')}) 
```

不过，使用绝对路径可能更容易/更简单。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-22T03:31:05.420

好的，这就是我如何让它工作的。

```
env = os.environ
proc = subprocess.Popen(args, env=env) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-06-14T17:03:58.283

我自己一直在努力解决这个问题，直到找到[这个 python 错误报告](http://bugs.python.org/issue17023)。

“如果您在 Windows 上将目录添加到 PATH 中，以便该目录包含在引号中，则子进程在其中找不到可执行文件。” 由于 Windows 不需要引号，因此删除它们可以解决我的问题（在 2.7 中）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-12-12T10:33:27.430

我的一位同事在 Windows 10 64 位上使用 Python 3.6.5 重现了这个问题。

然而，安装的 Python 版本是 32 位的。

重新安装 64 位版本的 Python 解决了这个问题。

# c++ - C++ 多个类导致架构错误

> ID：14679468
> 
> 赞同：2
> 
> 时间：2013-02-04T01:55:48.927
> 
> 标签：c++, class, importerror

我正在做一个需要我使用各种类的项目。出于某种原因，每当我尝试编译时，都会收到一条错误消息：
`Undefined symbols for architecture x86_64:`

我最初正在研究一个我们可以调用的类`User`，它有这样的声明`user.h`：

```
#ifndef USER_H
#define USER_H
...other include statements

class User
{
    public:
    User();
    public and private members and functions
};

#endif 
```

方法的定义位于同一目录中的单独文件中，`user.cpp`.

每当我尝试编译时，都会收到一条错误消息，指出构造函数和析构函数存在未定义的符号。我在`.cpp`文件中定义了这两个，但我无法让错误消失。

我在 main 中包含 User 类，其中包含以下内容：

```
#include "user.h" 
```

我设法通过将`user.cpp`文件中的所有代码粘贴到 中来解决此`user.h`问题，但现在我遇到了其他类的问题，这些类的代码我不允许修改。

现在，我有一个名为 GMLReader 的类，`gmlreader.h`其中包含我静态调用的方法。但是，即使我为我的 main 导入它，每当我尝试调用它时，我都会收到以下错误代码：

```
Undefined symbols for architecture x86_64:
  "GMLReader::read(char const*, std::vector<std::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::allocator<std::basic_string<char, std::char_traits<char>, std::allocator<char> > > >&, std::vector<std::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::allocator<std::basic_string<char, std::char_traits<char>, std::allocator<char> > > >&)", referenced from:
      _main in cchnzOEh.o
ld: symbol(s) not found for architecture x86_64
collect2: ld returned 1 exit status 
```

我正在使用以下内容进行编译以`sn.cpp`容纳我的主要内容：

```
g++ -g -Wall -o sn sn.cpp 
```

是否有任何原因会发生这样的错误，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T02:14:40.383

您还需要编译和链接 user.cpp：

```
g++ -g -Wall -c user.cpp -o user.o
g++ -g -Wall -o sn sn.cpp user.o 
```

# javascript - 抽象出一个常见的习语

> ID：14679470
> 
> 赞同：1
> 
> 时间：2013-02-04T01:56:14.337
> 
> 标签：javascript

在这段代码中

```
if (direction === 'up') {
    for (key in elements) {
        if (elements.hasOwnProperty(key)) {
            elements[key].style.opacity = statics.elapsed / max_time;
        }
    }
} else if (direction === 'down') {
    for (key in elements) {
        if (elements.hasOwnProperty(key)) {
            elements[key].style.opacity = (max_time - statics.elapsed) / max_time;
        }
    }
} 
```

我想抽象出这个常见的成语：

```
for (key in elements) {
    if (elements.hasOwnProperty(key)) {
        // function using elements[key] and outside parameters
    }
} 
```

所以我可以简单地写

```
manyElements(element, function () {
}); 
```

我将如何编写函数原型作为起点。我的猜测是。

```
function manyElements (elements, the_function) {
    for (key in elements) {
        if (elements.hasOwnProperty(key)) {
            the_function();
        }
    }
} 
```

但我需要访问外部参数，传递这些参数的最佳方法是什么？一般来说，抽象出这段代码是个好主意吗？

似乎我必须单独传递每个参数，从而违背了制作通用功能的目的。

我不喜欢不使用外部库，除了相关性。这里的每个答案是 lodash 实现：

**片段 1**

```
 function forEach(collection, callback, thisArg) {
    if (callback && typeof thisArg == 'undefined' && isArray(collection)) {
      var index = -1,
          length = collection.length;

      while (++index < length) {
        if (callback(collection[index], index, collection) === false) {
          break;
        }
      }
    } else {
      each(collection, callback, thisArg);
    }
    return collection;
  } 
```

**片段 2**

```
var each = createIterator(eachIteratorOptions); 
```

**片段 3**

```
 function createIterator() {
    var data = {
      'arrayLoop': '',
      'bottom': '',
      'hasDontEnumBug': hasDontEnumBug,
      'isKeysFast': isKeysFast,
      'objectLoop': '',
      'nonEnumArgs': nonEnumArgs,
      'noCharByIndex': noCharByIndex,
      'shadowed': shadowed,
      'top': '',
      'useHas': true
    };

    // merge options into a template data object
    for (var object, index = 0; object = arguments[index]; index++) {
      for (var key in object) {
        data[key] = object[key];
      }
    }
    var args = data.args;
    data.firstArg = /^[^,]+/.exec(args)[0];

    // create the function factory
    var factory = Function(
        'createCallback, hasOwnProperty, isArguments, isString, objectTypes, ' +
        'nativeKeys, propertyIsEnumerable',
      'return function(' + args + ') {\n' + iteratorTemplate(data) + '\n}'
    );
    // return the compiled function
    return factory(
      createCallback, hasOwnProperty, isArguments, isString, objectTypes,
      nativeKeys, propertyIsEnumerable
    );
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T02:01:38.893

起初，有些库，如 lodash 或 underscore 已经这样做了。检查[http://lodash.com/docs#forEach](http://lodash.com/docs#forEach)函数。

其次，您可以使用 Object.keys(elements).forEach(function (key) { ... }) 来简化代码。

第三，您可能需要了解 JavaScript 函数——它们可以作为参数传递给其他函数，然后被调用。像这样：

```
function do(something) {
 ...
 something(item);
 ...
}
do(function (arg) { console.log(arg); }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T02:15:48.640

如果您在代码中多次执行此操作，那么将其抽象出来并没有错。您几乎也已经有了答案：只需将您需要的参数传回您传入的函数中`manyElements`。我会同时传递键和值，因为您可能在某些地方需要键（例如，将分配更改为其他内容）。

```
function manyElements (elements, the_function) {
    for (key in elements) {
        if (elements.hasOwnProperty(key)) {
            the_function(key, elements[key]);
        }
    }
} 
```

用法是这样的：

```
if (direction === 'up') {
    manyElements(elements, function (key, value) {
        value.style.opacity = statics.elapsed / max_time;
    });
} else if (direction === 'down') {
    manyElements(elements, function (key, value) {
        value.style.opacity = (max_time - statics.elapsed) / max_time;
    });
} 
```

不过，我不会调用函数 manyElements，因为该名称并不能真正解释函数的作用。类似的东西`forEachProperty`可能更自我记录。

# ios - 关于 ARC 中的 self.view = nil

> ID：14679475
> 
> 赞同：1
> 
> 时间：2013-02-04T01:56:44.697
> 
> 标签：ios, automatic-ref-counting

我只是想知道 ARC 中的 self.view = nil 。

1.  当设置 self.view = nil 时，self.view 会自动释放吗？
2.  当设置self.view = nil时，所有子视图会自动nil并释放？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T02:06:54.573

这取决于其他对象是否正在使用相同的视图（对象被取消）。ARC 为您进行对象引用计数。因此，如果同一个对象被强引用，ARC 应该保留它。因此，如果没有其他人引用对象 self.view = nil 将摆脱 self.view。

但是，我不确定所有子视图会发生什么。我想象同样的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T02:14:27.390

1）是的，假设不存在其他强引用（这是一个非常大的如果，这可能会出现在意想不到的地方）。唯一可以保证发生的事情是它的保留计数将减少 1。

2）**如果**你的view设置为满足以上条件deallocated，那么子view会自动被释放（retain count减1）。假设不存在对它们的其他引用（参见第 1 点），它们也将被释放。

一切都取决于对对象的强引用的数量。理解这一点绝对至关重要。当且仅当对象的保留计数达到零时，才会释放对象。从 ARC 开始，您不能直接控制它，但它仍然非常相关。

# ios - 在uitableview编辑模式下丢弃segue

> ID：14679478
> 
> 赞同：7
> 
> 时间：2013-02-04T01:57:27.180
> 
> 标签：ios, objective-c, uitableview

当我将 uitableview 更改为编辑模式时，我希望用户能够在不发生 segue 的情况下选择一个单元格。segue 在故事板中被链接。有没有办法在编辑模式下禁用segue？

我无法在编辑过程中禁用与单元格的交互，因为我需要按下编辑控件（插入按钮）。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-04T02:07:38.810

在您的视图控制器中，覆盖：

```
- (BOOL)shouldPerformSegueWithIdentifier:(NSString *)identifier sender:(id)sender{
    return !self.isEditing;
} 
```

在该方法中检查这是否是正确的 segue，并验证编辑状态。如果正在编辑，则返回`NO`；否则，返回`YES`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-11-13T21:50:30.730

**斯威夫特 3+：**

假设你从 UITableViewController 继承：

```
override func shouldPerformSegue(withIdentifier identifier: String, sender: Any?) -> Bool {
    return !tableView.isEditing
} 
```

请注意，这将在编辑时禁用所有转场。如果您有多个，并且您希望某些在编辑模式下保持启用，请在此函数中应用适当的逻辑以根据需要返回 true 或 false。

# linux - 如何使用模式匹配的 sed 写入多个文件

> ID：14679479
> 
> 赞同：3
> 
> 时间：2013-02-04T01:57:52.467
> 
> 标签：linux, sed

我有这样的文件

```
Orange 23 34 56
Apple 23 44 56
Pear 23 44 56 
```

我想使用 sed 以便将水果后的数字移动到文件名`Orange.txt`和`Apple.txt`不同的文件中

就像是

`s -re 's/(^\w+).*//' > \1.txt`

我知道我可以在 awk 中做，但我只想要 sed 解决方案，没有其他 unix 命令

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T02:26:24.050

这是一种方法，使用`GNU sed`：

```
sed -r 's/(\w+) (.*)/echo "\2" >> \1.txt/e' file 
```

* * *

但是为什么你不能使用`awk`. 它确实使问题变得微不足道：

```
awk '{ print $2, $3, $4 > $1 ".txt" }' file 
```

或者，如果您有很多列：

```
awk '{ r=$1; sub($1 FS, ""); print > r ".txt" }' file 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T02:14:50.803

这只有在`sed`您愿意提前写下所有可能水果的巨大清单时才有可能。然后它看起来像这样：

```
#! /usr/bin/sed -nf

/^Apple /w Apple.txt
/^Durian /w Durian.txt
/^Kiwi /w Kiwi.txt
/^Orange /w Orange.txt
/^Pear /w Pear.txt
/^Pineapple /w Pineapple.txt
/^Tomato /w Tomato.txt
# ... perhaps dozens more lines ... 
```

如果您不能提前列出所有可能的水果，那么这显然是不可能的。但是，即使您可以，您是否真的想要让自己成为 Daily WTF 的特色？

```
awk '{ print > $1 ".txt" }' 
```

# scheme - 方案解释器 - 为什么不能计算？

> ID：14679484
> 
> 赞同：1
> 
> 时间：2013-02-04T01:58:25.903
> 
> 标签：scheme

程序：

```
(define (double fn) (lambda (x) (fn (fn x)))) 
```

为什么不能使用 Scheme 解释器计算以下内容：

```
((((((double double) double) double) double) 1+) 0) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T02:11:16.057

当然*可以*计算，只是每次`double`调用的计算次数都呈指数增长……如果您等待*非常非常长的时间*，您最终会得到答案（多长时间？几个小时之间的任何事情或几个世纪）。

```
(((double double) 1+) 0)
=> 4
((((double double) double) 1+) 0)
=> 16
(((((double double) double) double) 1+) 0)
=> 65536
((((((double double) double) double) double) 1+) 0)
=> ... ; takes too long to compute! 
```

# c# - 如何阻止图表在图表区域中绘制点？

> ID：14679487
> 
> 赞同：0
> 
> 时间：2013-02-04T01:58:55.030
> 
> 标签：c#, winforms, mschart

我在图表中添加点，使用

```
chart1.Series[0].Points.AddXY(x,y); 
```

增加了数百万分。图表会自动开始在当前图表区域中绘制它们。问题是，程序可能需要很长时间才能响应，而且我不需要在一开始就看到所有这些。

如果我打电话

```
chart1.ChartAreas[0].AxisX.ScaleView.Zoom(a, b); 
```

添加点后，它不会工作，因为图表视图仍然是空的。

那么如何停止自动绘图过程呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T07:41:20.280

只是一些观点不知道是否可以帮助，但
也许减少AxisX最大值的减小值可以加快速度，在chart1
处将AntiAliasing关闭为none可以尝试否则保持设置全部，
也许正在绘图绘制可以通过捕获相关的 Pre Post 绘制或其他事件来停止，
  并在绘制足够需要的请求点后返回“已处理”
尝试减少要在 Series 的 Points 数组中使用的值的数量，并
  在需要时使用新点更新此 Points 数组

问候

# asp.net - 如何围绕现有/遗留经典 ASP 应用程序创建 MVC4 包装器？

> ID：14679490
> 
> 赞同：2
> 
> 时间：2013-02-04T01:59:23.403
> 
> 标签：asp.net, asp-classic, asp.net-mvc-4, proxy, legacy-app

我有一个用经典 asp 和 asp.net webforms 组合编写的大型遗留 web 应用程序。客户同意重写应用程序，我们决定使用 MVC4，但当然我们没有时间停止支持旧应用程序来构建新应用程序。

有没有办法在现有/遗留应用程序周围放置一个新的 MVC4 包装应用程序，以便可以将遗留应用程序的一部分逐个移植到新环境中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T23:58:33.077

这是一个很老的问题，但我遇到了它，所以我想我会试着帮忙。通过修改 MVC 的路由功能，您仍然可以在 MVC4 中使用 .aspx 页面。此链接应该可以帮助您入门：[http ://weblogs.asp.net/scottgu/archive/2009/10/13/url-routing-with-asp-net-4-web-forms-vs-2010-and- net-4-0-series.aspx](http://weblogs.asp.net/scottgu/archive/2009/10/13/url-routing-with-asp-net-4-web-forms-vs-2010-and-net-4-0-series.aspx)

# maven - 为什么 PMD 从命令行可以正常工作，但不能在 Maven 中工作？

> ID：14679491
> 
> 赞同：2
> 
> 时间：2013-02-04T01:59:31.283
> 
> 标签：maven, pmd

在多年成功使用 PMD 和 Ant 之后，我现在尝试让 PMD 在 Maven 中工作，但没有成功。

为了说明我的问题，我创建了一个简单的 Maven 系统（基于 Maven 教程“my-app”hello world 程序）。它的不同之处仅在于包含一行代码，该代码行应使用基本规则集触发 PMD 错误：

```
Boolean bar = new Boolean("true"); 
```

当我从命令行运行 PMD 时，代码中的问题就暴露出来了：

```
run.sh pmd -d src/main/java -f text -R rulesets/java/basic.xml -language java
maven-pmd-example/src/main/java/com/mycompany/app/App.java:11   Avoid instantiating Boolean objects; reference Boolean.TRUE or Boolean.FALSE or call Boolean.valueOf() instead. 
```

但是，当我在 Maven 中运行 pmd 时，代码中的问题并没有显示出来：

```
-> mvn pmd:check
[INFO] Scanning for projects...
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building my-app 1.0-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] >>> maven-pmd-plugin:2.7.1:check (default-cli) @ my-app >>>
[INFO] 
[INFO] --- maven-pmd-plugin:2.7.1:pmd (pmd) @ my-app ---
[WARNING] Unable to locate Source XRef to link to - DISABLED
[INFO] 
[INFO] <<< maven-pmd-plugin:2.7.1:check (default-cli) @ my-app <<<
[INFO] 
[INFO] --- maven-pmd-plugin:2.7.1:check (default-cli) @ my-app ---
[INFO] 
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 1.375s
[INFO] Finished at: Sun Feb 03 15:38:02 HST 2013
[INFO] Final Memory: 12M/309M
[INFO] ------------------------------------------------------------------------ 
```

这是 pom.xml：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>com.mycompany.app</groupId>
  <artifactId>my-app</artifactId>
  <packaging>jar</packaging>
  <version>1.0-SNAPSHOT</version>
  <name>my-app</name>
  <url>http://maven.apache.org</url>
  <properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
  </properties>
  <dependencies>
    <dependency>
      <groupId>junit</groupId>
      <artifactId>junit</artifactId>
      <version>3.8.1</version>
      <scope>test</scope>
    </dependency>
  </dependencies>

  <build>
    <plugins>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-pmd-plugin</artifactId>
        <version>2.7.1</version>
        <executions>
          <execution>
            <phase>verify</phase> 
            <goals>
              <goal>check</goal> 
            </goals>
          </execution>
        </executions>
        <configuration>
          <verbose>true</verbose>
          <minimumPriority>0</minimumPriority>
          <rulesets>
            <ruleset>rulesets/basic.xml</ruleset>
          </rulesets>
          <targetJdk>1.6</targetJdk>
        </configuration>
      </plugin>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-jxr-plugin</artifactId>
        <version>2.3</version>
      </plugin>
    </plugins>
  </build>
</project> 
```

我已将此示例系统上传到 GitHub，因此您可以查看整个示例系统（如果您愿意，可以下载/使用它）：

[https://github.com/philipmjohnson/maven-pmd-example](https://github.com/philipmjohnson/maven-pmd-example)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T02:31:32.083

这是因为您已将 设置`minimumPriority`为 0，这将有效地阻止 PMD 评估任何规则（有关优先级的讨论，请参阅[此 SO 问题）。](https://stackoverflow.com/questions/5498189/which-is-the-highest-priority-in-pmd)

有关更多信息，请[参阅](http://maven.apache.org/plugins/maven-pmd-plugin/pmd-mojo.html#minimumPriority)PMD 插件的目标文档的这一部分。

我建议修改配置以将 设置`minimumPriority`为 2，这样您就可以在`BooleanInstantiation`.

希望这可以帮助！

# java - Java，减去双精度数据类型

> ID：14679494
> 
> 赞同：-1
> 
> 时间：2013-02-04T01:59:54.190
> 
> 标签：java, double, subtraction

我正在尝试做一个简单的计算。我不知道如何在最后一个 if-else 语句中减去“double admissionPrice”。

它指向减法符号给我这个错误消息： operator - cannot be applied to java.lang.String,double

请帮忙。谢谢。

* * *

```
import java.text.*;
import java.util.Scanner;

class IMC {
    public static void main(String[] args) {

    int numEmployees = 0;
    double costPerAttendee = 0.00;
    int employeeDiscount;
    double admissionPrice = 0.00;

    Scanner keyboard = new Scanner (System.in);

    System.out.print("Enter amount of employees attending: ");
    numEmployees = keyboard.nextInt();

    System.out.print("Have any employees attended previously? \n For: YES=1 or NO=2"
                        );
    employeeDiscount = keyboard.nextInt();

    if (numEmployees == 1)  { admissionPrice = 695.00;

    } else if (numEmployees == 2 || numEmployees ==  3 ||numEmployees ==  4) { admissionPrice = 545.00;

    } else if (numEmployees >= 5 ||numEmployees >= 6 ||numEmployees >= 7 ||numEmployees >= 8){ admissionPrice = 480.00;

    }  else if (numEmployees >= 9)  { admissionPrice = 395.00;

    }

        System.out.print("The cost per attendee is: " + admissionPrice );

  if (employeeDiscount == 1){
        System.out.print("Total price after discount (15%) is : " + admissionPrice - (admissionPrice * 0.15) );

    } else if (employeeDiscount == 2) {
            System.out.print("No discount. Total price is still: " + admissionPrice);
    }   

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T02:02:42.293

将括号放在`(admissionPrice - (admissionPrice * 0.15) )`. 现在，它`"Total price after discount (15%) is : "`在尝试减法之前将 admissionPrice 连接到 。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T02:02:49.407

`+`您`println()`语句中的运算符优先并转换`admissionPrice`为`String`.

把你的算术运算放在括号里。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T02:02:28.080

```
System.out.print("Total price after discount (15%) is : " + (admissionPrice - (admissionPrice * 0.15)));
                                                            ^                                        ^ 
```

您需要添加`()`以修复优先级，否则，如错误所示，您正在减去，而不是从`admissionPrice`组成的字符串中减去`"To....:" + admissionPrice`

# matlab - 在matlab中是单元格数组的单元格数组相当于列表列表

> ID：14679499
> 
> 赞同：-1
> 
> 时间：2013-02-04T02:01:23.360
> 
> 标签：matlab, cell-array

我正在尝试在 matlab 中实现功能，我需要与列表列表等效的数据结构。根据我的发现，在 matlab 中，一个单元阵列的单元阵列是一个很好的等价物。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T02:05:34.153

是的，大致......除了列表是顺序访问和单元阵列是随机访问之外。 *即*单元阵列实际上是一个数组，而不是一个列表。我认为 MatLab 中没有类似的列表，所以这是最接近的。

# c# - XML 文档上的错误 (4,11)

> ID：14679507
> 
> 赞同：1
> 
> 时间：2013-02-04T02:02:44.933
> 
> 标签：c#, xna, isolatedstorage

目前我正在开发使用隔离存储来处理信息的窗口游戏。我正在尝试在 XML 中执行此操作，但是在尝试生成 XML 文档并从中读取它时遇到了这个问题。这是生成的代码和 XML。

部分代码：

```
using(IsolatedStorageFile file = IsolatedStorageFile.GetUserStoreForAssembly())
{
    using(IsolatedStorageFileStream stream =
      new IsolatedStorageFileStream("class.xml", FileMode.Create, file))
    {
        XmlWriterSettings setting = new XmlWriterSettings();
        setting.Indent = true;
        using(XmlWriter writer = XmlWriter.Create(stream, setting))
        {
            XmlSerializer serializer = new XmlSerializer(typeof (Student));
            serializer.Serialize(stream, new Student()
            {
                Name = "AhLim"
            });
        }
    }

    using(IsolatedStorageFileStream stream =
      new IsolatedStorageFileStream("class.xml", FileMode.Open, file))
    {
        XmlSerializer serializer = new XmlSerializer(typeof (Student));
        studentA = (Student) serializer.Deserialize(stream);
    }
} 
```

学生班：

```
public class Student
{
    public String Name { get; set; }
} 
```

生成的 XML 文档：

```
<?xml version="1.0"?>
<Student xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
 <Name>AhLim</Name>
</Student> 
```

毕竟，作为标题的错误，在 (4,11) 处的 XML 文档错误发生在反序列化时。当我用谷歌搜索并知道流问题时，我无法找出问题所在。感谢大家的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T03:16:11.053

这是因为您正在使用`IsolatedStorageFileStream`错误的编码来编写 xml，请尝试使用`XmlWriter`您创建的这将使用`utf-8`编码并且`Deserialization`应该可以正常工作

```
using(IsolatedStorageFileStream stream = new IsolatedStorageFileStream("class.xml",FileMode.Create,file))
{
     XmlWriterSettings setting = new XmlWriterSettings();
     setting.Indent = true;
     using (XmlWriter writer = XmlWriter.Create(stream, setting))
     {
         XmlSerializer serializer = new XmlSerializer(typeof(Student));
         serializer.Serialize(writer, new Student() { Name = "AhLim" });
     }
} 
```

`IsolatedStorageFileStream`创建标题

```
<?xml version="1.0"?> 
```

`XmlWriter`创建标题

```
<?xml version="1.0" encoding="utf-8"?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-03T12:20:27.870

我有同样的问题。愚蠢的微软忘了告诉你学生班必须有一个公共的默认构造函数。即 public Student() {}，问题就会消失。

# qt - 连接三个组合框来控制 qt 中可用的选项

> ID：14679510
> 
> 赞同：0
> 
> 时间：2013-02-04T02:03:15.833
> 
> 标签：qt, combobox

我有三个具有三个相似选项的组合框，“一”、“二”、“三”，我想防止在不同的组合框中出现相同的选项。

例子：

组合框1：'一个'，

所以当我在 combobox2 和 combobox3 中选择时，只有“二”和“三”可供选择。

我知道我可以结合使用 for 循环和 if 来做到这一点，但是任何人都可以帮我解决一些我可以在这里使用的技巧吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T05:48:46.307

只使用一个组合框怎么样？只有六种可能的选择：

1.  一二三
2.  一三二
3.  二一三
4.  二三一
5.  三一二
6.  三二一

用户只使用一个组合框而不是使用三个可用选项不断变化的组合框会容易得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T14:30:54.573

编写您自己的类`MyComboBox`，该类派生自`QComboBox`.

在其中实现一个插槽`MyComboBox`将执行以下操作：

```
void excludeIndex(const QString & text)
{
    // Get the list of all the options for the ComboBox
    QStringList list = getIndices();
    // Remove one (the only) item 'text' from the list
    list.removeOne( text );
    // Clear the ComboBox and fill with the new values
    this->clear();
    this->addItems( list );
} 
```

在您的父小部件/应用程序中，将`void currentIndexChanged(const QString & text)`来自每个 'sending'`MyComboBox`的信号连接`QComboBox`到 'receiving' 的这个插槽`MyComboBox`。

如果您需要从多个其他`ComboBox`es 中排除值，那么在 parent 中实现 slot 可能会更好`Widget`。这样，您可以遍历所有“接收” `ComboBox`。`ComboBox`您将读取其他 es 的所有当前值并`ComboBox`从中删除这些值`list`。您在父级中的插槽`Widget`将不再需要输入`QString`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T17:50:32.710

这是一种解决方案。

基本上，它使用所有项目初始化所有框，并且当框的当前文本发生更改时，它会从其他框中删除该文本。如果框包含的先前文本不是空白的，它会将其添加回所有其他框。

如果您想用超过 8 个来测试它，`m_numOfBoxes`请将 mainwindow.cpp 中的变量更改为其他值。

主文件

```
#include <QApplication>
#include "mainwindow.h"

int main(int argc, char *argv[])
{
    QApplication a(argc, argv);
    MainWindow w;
    w.show();

    return a.exec();
} 
```

主窗口.h

```
#ifndef MAINWINDOW_H
#define MAINWINDOW_H

#include <QMainWindow>
#include <QComboBox>
#include <QList>
#include <QStringList>
#include <QMap>

class MainWindow : public QMainWindow
{
    Q_OBJECT

public:
    MainWindow(QWidget *parent = 0);
    ~MainWindow();
public slots:
    void on_comboBox_changed();
private:
    QList <QComboBox *> m_boxes;
    QMap <QComboBox *, QString> m_previousText;
    int m_numOfBoxes;
    QStringList m_allItems;
};

#endif // MAINWINDOW_H 
```

主窗口.cpp

```
#include "mainwindow.h"
#include <QVBoxLayout>
#include <QDebug>

MainWindow::MainWindow(QWidget *parent)
    : QMainWindow(parent)
{
    QVBoxLayout * vbox = new QVBoxLayout();

    m_numOfBoxes = 8;
    m_allItems << "";
    for(int i = 0; i< m_numOfBoxes; i++)
    {
        m_allItems << QString::number(i+1);
    }

    for(int i = 0; i< m_numOfBoxes; i++)
    {
        QComboBox * temp = new QComboBox;
        QObject::connect(temp, SIGNAL(currentIndexChanged(int)), this, SLOT(on_comboBox_changed()));
        vbox->addWidget(temp);
        temp->addItems(m_allItems);
        m_boxes.append(temp);
        m_previousText[temp] = "";
    }
    this->setCentralWidget(new QWidget());
    this->centralWidget()->setLayout(vbox);
}

MainWindow::~MainWindow()
{

}

void MainWindow::on_comboBox_changed()
{
    QComboBox * editedBox = qobject_cast <QComboBox *> (QObject::sender());
    QString currentText = editedBox->currentText();
    if(currentText == m_previousText[editedBox])
    {
        return;
    }

    foreach(QComboBox * box, m_boxes)
    {
        if(box == editedBox)
        {
            continue;
        }

        if(currentText != "")
        {
            // remove the current text from the other boxes

            int index = box->findText(currentText);
            if(index != -1)
            {
                box->removeItem(index);
            }
        }

        if(m_previousText[editedBox] != "")
        {
            // add the previous text back into the lists for the other boxes
            box->addItem(m_previousText[editedBox]);
            qDebug() << "Adding back" << m_previousText[editedBox];

        }
    }

    m_previousText[editedBox] = currentText;
} 
```

请注意，当一个项目被添加回一个盒子的列表时，它只是被添加到列表的末尾，所以随着时间的推移，你的项目的顺序可能会被打乱。

希望有帮助。

# objective-c - 为什么这个 Block 在其描述符中没有复制和处置指针？

> ID：14679511
> 
> 赞同：5
> 
> 时间：2013-02-04T02:03:17.850
> 
> 标签：objective-c, compilation, objective-c-blocks

根据该`Block_private.h`文件，每当在 Objective-c 文件中声明一个块时，都会在目标文件中创建以下结构来表示它：

```
struct Block_descriptor {
    unsigned long int reserved;
    unsigned long int size;
    void (*copy)(void *dst, void *src);
    void (*dispose)(void *);
};

struct Block_layout {
    void *isa;
    int flags;
    int reserved; 
    void (*invoke)(void *, ...);
    struct Block_descriptor *descriptor;
    /* Imported variables. */
}; 
```

但是，当我`clang -S ...`从

```
int(^squared)(int) = ^(int i) {
    return i*i;
}; 
```

我得到以下代表该块的代码段：

```
 .type   .L.str210,@object       # @.str210
.L.str210:
    .asciz   "i12@?0i8"
    .size   .L.str210, 9

    .type   __block_descriptor_tmp,@object # @__block_descriptor_tmp
    .section    .rodata,"a",@progbits
    .align  16
__block_descriptor_tmp:
    .quad   0                       # 0x0
    .quad   32                      # 0x20
    .quad   .L.str210
    .quad   0
    .size   __block_descriptor_tmp, 32

    .type   __block_literal_global,@object # @__block_literal_global
    .align  8
__block_literal_global:
    .quad   _NSConcreteGlobalBlock
    .long   1342177280              # 0x50000000
    .long   0                       # 0x0
    .quad   __main_block_invoke
    .quad   __block_descriptor_tmp
    .size   __block_literal_global, 32 
```

所以`__block_literal_global`和`__block_descriptor_tmp`分别是 a`Block_layout`和 a `Block_descriptor`。但是，如您所见， 的第三个字段`__block_descriptor_tmp`应该是 a`void (*copy)(void *dst, void *src)`按照`Block_private.h`，是`const char *`指向块的类型编码的 a。

我的问题是：块描述符结构到底是什么样的？我的`Block_private.h`文件是否已弃用，因此`Block_descriptor`目前的实现与我提出的不同？如果我的文件是正确的，为什么 a 的第三个字段`__block_descriptor_tmp`不是`const char *`a `void (*copy)(void *dst, void *src)`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-04T02:09:57.003

仅当块具有需要管理的捕获时才包含复制和处置助手（实际上是：对象和 __block vars）

如果他们在场，那么`block->flags & BLOCK_HAS_COPY_DISPOSE`

您需要知道的一切都在这里概述：http: [//clang.llvm.org/docs/Block-ABI-Apple.html](http://clang.llvm.org/docs/Block-ABI-Apple.html)

# ruby-on-rails - Rails install 'Bundle' 抛出错误信息

> ID：14679517
> 
> 赞同：0
> 
> 时间：2013-02-04T02:04:04.870
> 
> 标签：ruby-on-rails, ruby, bundle

我刚刚尝试`Ruby on Rails`通过[RailsInstaller for Windows 安装](http://railsinstaller.org)。一切都很好，直到我尝试创建我的第一个应用程序。基本上我跑

```
rails new 'first_app' 
```

它会创建所有适当的文件，但在尝试运行“捆绑安装”时会抛出此错误消息

```
C:/RailsInstaller/Ruby1.9.3/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:
36:in `require': 193: %1 is not a valid Win32 application.   - C:/RailsInstaller
/Ruby1.9.3/lib/ruby/1.9.1/i386-mingw32/openssl.so (LoadError)
    from C:/RailsInstaller/Ruby1.9.3/lib/ruby/site_ruby/1.9.1/rubygems/custo
m_require.rb:36:in `require'
    from C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/openssl.rb:17:in `<top (
required)>'
    from C:/RailsInstaller/Ruby1.9.3/lib/ruby/site_ruby/1.9.1/rubygems/custo
m_require.rb:36:in `require'
    from C:/RailsInstaller/Ruby1.9.3/lib/ruby/site_ruby/1.9.1/rubygems/custo
m_require.rb:36:in `require'
    from C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/net/https.rb:22:in `<top (required)>'
    from C:/RailsInstaller/Ruby1.9.3/lib/ruby/site_ruby/1.9.1/rubygems/custo
m_require.rb:36:in `require'
    from C:/RailsInstaller/Ruby1.9.3/lib/ruby/site_ruby/1.9.1/rubygems/custo
m_require.rb:36:in `require'
    from C:/RailsInstaller/Ruby1.9.3/lib/ruby/site_ruby/1.9.1/rubygems/remot
e_fetcher.rb:316:in `connection_for'
    from C:/RailsInstaller/Ruby1.9.3/lib/ruby/site_ruby/1.9.1/rubygems/remot
e_fetcher.rb:368:in `request'
    from C:/RailsInstaller/Ruby1.9.3/lib/ruby/site_ruby/1.9.1/rubygems/remot
e_fetcher.rb:203:in `fetch_http'
    from C:/RailsInstaller/Ruby1.9.3/lib/ruby/site_ruby/1.9.1/rubygems/remot
e_fetcher.rb:213:in `fetch_http'
    from C:/RailsInstaller/Ruby1.9.3/lib/ruby/site_ruby/1.9.1/rubygems/remot
e_fetcher.rb:231:in `fetch_path'
    from C:/RailsInstaller/Ruby1.9.3/lib/ruby/site_ruby/1.9.1/rubygems/spec_
fetcher.rb:265:in `load_specs'
    from C:/RailsInstaller/Ruby1.9.3/lib/ruby/site_ruby/1.9.1/rubygems/spec_
fetcher.rb:231:in `block in list'
    from C:/RailsInstaller/Ruby1.9.3/lib/ruby/site_ruby/1.9.1/rubygems/spec_
fetcher.rb:227:in `each'
    from C:/RailsInstaller/Ruby1.9.3/lib/ruby/site_ruby/1.9.1/rubygems/spec_
fetcher.rb:227:in `list'
    from C:/RailsInstaller/Ruby1.9.3/lib/ruby/site_ruby/1.9.1/rubygems/spec_
fetcher.rb:150:in `find_matching_with_errors'
    from C:/RailsInstaller/Ruby1.9.3/lib/ruby/site_ruby/1.9.1/rubygems/spec_
fetcher.rb:89:in `fetch_with_errors'
    from C:/RailsInstaller/Ruby1.9.3/lib/ruby/site_ruby/1.9.1/rubygems/depen
dency_installer.rb:110:in `find_gems_with_sources'
    from C:/RailsInstaller/Ruby1.9.3/lib/ruby/site_ruby/1.9.1/rubygems/depen
dency_installer.rb:228:in `find_spec_by_name_and_version'
    from C:/RailsInstaller/Ruby1.9.3/lib/ruby/site_ruby/1.9.1/rubygems/depen
dency_installer.rb:259:in `install'
    from C:/RailsInstaller/Ruby1.9.3/lib/ruby/site_ruby/1.9.1/rubygems/comma
nds/install_command.rb:121:in `block in execute'
    from C:/RailsInstaller/Ruby1.9.3/lib/ruby/site_ruby/1.9.1/rubygems/comma
nds/install_command.rb:115:in `each'
    from C:/RailsInstaller/Ruby1.9.3/lib/ruby/site_ruby/1.9.1/rubygems/comma
nds/install_command.rb:115:in `execute'
    from C:/RailsInstaller/Ruby1.9.3/lib/ruby/site_ruby/1.9.1/rubygems/comma
nd.rb:278:in `invoke'
    from C:/RailsInstaller/Ruby1.9.3/lib/ruby/site_ruby/1.9.1/rubygems/comma
nd_manager.rb:147:in `process_args'
    from C:/RailsInstaller/Ruby1.9.3/lib/ruby/site_ruby/1.9.1/rubygems/comma
nd_manager.rb:117:in `run'
    from C:/RailsInstaller/Ruby1.9.3/lib/ruby/site_ruby/1.9.1/rubygems/gem_r
unner.rb:65:in `run'
    from C:/RailsInstaller/Ruby1.9.3/bin/gem:21:in `<main>' 
```

我已经尝试重新安装，但它仍然会出现该错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T02:35:14.533

这里的相关错误信息是`193: %1 is not a valid Win32 application`。

查看[此答案以获取有关相同的先前问题](https://stackoverflow.com/a/10473646/429758)；它解释了问题发生的原因，并提供了有关如何解决问题的建议。

提供答案的人 - [Luis Lavena](https://twitter.com/luislavena) - 为使 ruby​​ 在 Windows 上正常工作而进行了大量工作，并且是[Ruby Installer for Windows](http://rubyinstaller.org)的创建者。

# matlab - MATLAB：如何动态增加矩阵的列长度之一

> ID：14679520
> 
> 赞同：0
> 
> 时间：2013-02-04T02:04:50.643
> 
> 标签：matlab, matrix

我像这样声明了一个三维矩阵，在迭代的后期，我需要动态扩展三维的长度。

请注意，目前，我只声明了两个维度，但没有声明第三个维度，所以我会收到这样的错误：

> 尝试访问 bins(1,2,2)；索引超出范围，因为 size(bins)=[2,22,1]。

但问题是，Xk 维度是可变的，我真的无法决定如何需要它。无论如何要声明一个可变矩阵？

```
bins=zeros(2,size(Xtrain,2));
%Some for loop
    bins(Y,k,Xk)=bins(Y,k,Xk)+1;
%end loop 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T03:54:44.117

您可以使用`end + k`符号来动态扩展矩阵，如下所示：

```
A = zeros(10,10,10);
size(A) %[10 10 10]
Xk = 5;
A(:,:,end+Xk) = 4;
size(A) %[10 10 15] 
```

的大小`A`会自动增加，Matlab 会自动用零填充中间值。然而，在循环中调整数组的大小并不是一个好的编程方法。你可能想重新考虑你的方法，这样你就不会这样做了。

# jquery - 使用 JQuery 的 MVC3 级联下拉列表以在编辑时填充子列表

> ID：14679521
> 
> 赞同：0
> 
> 时间：2013-02-04T02:05:23.883
> 
> 标签：jquery, json, asp.net-mvc-3

我在使用此 javascript 创建视图中有一个有效的级联下拉列表

```
<script type="text/javascript">
      $(document).ready(function () {
      $("#GaCatId").change(function () {
        var id = $(this).val();
        $.getJSON("/Gallery/GetSubCategories/", { id: id },
        function (data) {
            var select = $("#GaSCatId");
            select.empty();
            select.append($('<option/>', {
                value: 0,
                text: "Select a Sub Category"
            }));
            $.each(data, function (index, data) {

                select.append($('<option/>', {
                    value: data.Value,
                    text: data.Text
                }));
            });
        });
    });
}); 
```

我想编辑它，以便在 Edit razor View 上它将根据数据库中的默认 ID 记录填充子列表。实际上，我正在寻找代码检查是否有 ID

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T02:23:32.350

您可以做的是检查 firstdropdowns 是否选择了项目值，如果它有效，则进行另一个 ajax 调用以获取第二个下拉列表的数据并加载它。假设页面中存在 2 个下拉菜单，

```
$(function(){

  var gaCatId=$("#gaCatId").val();  
  if(gaCatId!="") 
  {
     var items="";
     $.getJSON("@Url.Action("GetSubCategories","Gallery")/"+gaCatId,
                                                                 function(data){
           $.each(data, function (index, item) {
             items+="<option value='"+item.Value+"'>"+item.Text+"</option>";
           });
        $("#GaSCatId").html(items);
     });
  }   

}); 
```

这应该有效。**但如果它是一个编辑屏幕，为什么不从操作方法本身加载它呢？**我会那样做。

假设您正在编辑产品页面。所以你可能有这样的视图模型

```
public class ProductVM
{
  public int ID {  set;get;}
  public string Name { set;get;}
  public List<SelectListItem> Categories { set;get;} 
  public List<SelectListItem> SubCategories { set;get;}
  public int SelectedCategoryID { set;get;}
  public int SelectedSubCategoryID { set;get;}
} 
```

在您的编辑 GET 操作方法中，

```
public ActinResult Edit(int id)
{
  var vm=new ProductVM { ID=id};
  Product product=repo.GetProductFromID(id);
  vm.Name=product.Name;
  vm.Categories=GetAvailableCategories();
  vm.SelectedCategoryID=product.Category.ID;
  vm.SubCategories=GetSubCategories(product.Category.ID);
  vm.SelectedCategoryID=product.SubCategory.ID;
  return View(vm);
} 
```

假设`GetAvailableCategories`和`GetSubCategories`是 2 个返回列表的方法`SelectListItem`

```
private List<SelectListItem> GetAvailableCategories()
{
  //TO DO : read from repositary and build the list and return.
} 
```

在您看来，这对我们的 ProductVM 类是强类型的

```
@model ProductVM
@using(Html.Beginform())
{
   @Html.HiddenFor(x=>x.ID)
   @Html.EditorFor(x=>x.Name)
   @Html.DropDownListfor(x=>x.SelectedCategoryID ,
                                      Model.Categories,"select")
   @Html.DropDownListfor(x=>x.SelectedSubCategoryID,
                                      Model.SubCategories,"select")
  <input type="submit" />

} 
```

# javascript - 当另一个文本框具有值 HTML 时禁用文本框

> ID：14679523
> 
> 赞同：1
> 
> 时间：2013-02-04T02:06:21.633
> 
> 标签：javascript, jquery

我很抱歉这个问题，但是如果另一个文本框有值，我怎么能禁用一个文本框？我已经尝试过这段代码，但它不起作用，抱歉这个菜鸟问题 T_T

```
function disable(downpayment,full_payment)
{

if ( downpayment.value.length >= 1 )
document.getElementById(full_payment).disabled = true;

else

document.getElementById(full_payment).disabled = false;
}

</script>
        <input name="downpayment" id="downpayment" type="text" onselect="function disable(downpayment,full_payment);" style="width:250px" />
      </p>
      <p>
        <input name="full_payment" id="full_payment" type="text" style="width:250px" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T02:19:01.380

如果您想继续使用纯 JavaScript：

```
// finding the relevant elements *outside* the function
var downpayment = document.getElementById('downpayment'),
    full_payment = document.getElementById('full_payment');

function enableToggle(current, other) {
    /* 'current' is the element that currently has focus
       'other' is the other input element, that does not have focus.

    1\. if the 'current' value of the focused/active element, once the whitespace
       is removed, is greater than 0 (so it has something in it other than whitespace,
       the disabled property of the 'other' element is true,
    2\. if the 'current' element has only whitespace, and/or a zero-length value,
       the 'other' element's disabled property is false.
    */

    other.disabled = current.value.replace(/\s+/,'').length > 0;
}

// using the onkeyup event to call a function on the elements.
downpayment.onkeyup = function () {
    enableToggle(this, full_payment);
}
full_payment.onkeyup = function () {
    enableToggle(this, downpayment);
} 
```

这适用于以下 HTML：

```
<input name="downpayment" id="downpayment" type="text" style="width:250px" />
<input name="full_payment" id="full_payment" type="text" style="width:250px" /> 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/PJpAG/)。

如果您已经在使用 jQuery，那么您可以将上述内容嵌套到 jQuery 中`$(document).ready(function(){ /* the code in here */});`，或者切换到仅 jQuery 的解决方案，例如[Alex 的](https://stackoverflow.com/a/14679547/82548).

要坚持使用纯 JavaScript，并避免解释如何设置等效的 DOM 就绪事件，请将以下内容放在 HTML 内容的末尾，就在结束`</body>`标记之前：

```
<script>
    var downpayment = document.getElementById('downpayment'),
        full_payment = document.getElementById('full_payment');

    function enableToggle(current, other) {
        other.disabled = current.value.replace(/\s+/,'').length > 0;
    }

    downpayment.onkeyup = function () {
        enableToggle(this, full_payment);
    }
    full_payment.onkeyup = function () {
        enableToggle(this, downpayment);
    }
</script> 
```

（这与上面的 JavaScript 完全相同，只是去掉了注释，但包含在`<script></script>`标签中）

将它放在 HTML 的底部意味着元素在您尝试为它们分配事件处理程序之前存在于 DOM 中。

顺便说一句，使用调整后的 HTML，给出：

```
<form>
<!--
     I associated the relevant elements with a class-name 'enableToggle',
     you don't have to, it just reduces the work the jQuery has to do later
     when using siblings('.enableToggle') to find the relevant elements.
-->
<div>
    <label for="downpayment">Downpayment</label>
    <input name="downpayment" class="enableToggle" id="downpayment" type="text" style="width:250px" />
    <label for="full_payment">Full payment</label>
    <input name="full_payment" class="enableToggle" id="full_payment" type="text" style="width:250px" />
</div>
</form> 
```

可以使用以下 jQuery：

```
// binds both event-handler to both 'keyup' and 'paste' events.
$('.enableToggle').on('keyup paste', function(){
    /* 'curVal' is a Boolean (true or false) depending on whether there's
        a value other than whitespace */
    var curVal = $(this).val().replace(/\s+/g,'').length > 0;

    /* sets the 'disabled' property of the sibling elements of the current
       element, as long as those siblings have the class 'enableToggle'
       (this avoids having to explicitly identify all the elements you want
       to act on). */
    $(this).siblings('.enableToggle').prop('disabled', curVal);
}); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/PJpAG/5/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T02:09:12.980

您已经标记了问题 jQuery，所以它就像...

```
$("#downpayment").on("change paste", function() { 
                         $("#full_payment").prop("disabled", this.value.length); 
                          }); 
```

只要您的首付中有一些内容（即使是空格，如果不理想，`$.trim()`请在检查其`length`属性之前输入），然后它将启用全额付款。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T07:11:47.357

```
$(document).ready(function()
{   
    $(".PaxHeads").on('keypress','input[name="DebitAmount"]',function()
    {
         var myLength = $('input[name="DebitAmount"]').val().length;
         if (myLength!=0)
         {
            $('input[name="CreditAmount"]').attr("disabled", "disabled");   
         }
        else 
        {
            $('input[name="CreditAmount"]').removeAttr("disabled"); 
        }
    });
    $(".PaxHeads").on('keypress', 'input[name="CreditAmount"]', function()
    {
        var myLength1 = $('input[name="CreditAmount"]').val().length;
        if (meLength1!=0)
        {
            $('input[name="DebitAmount"]').attr("disabled", "disabled");    
        }
        else
        {
            $('input[name="DebitAmount"]').removeAttr("disabled");      
        }
    });
}); 
```

# ruby - RubyOnRails：如何制作 rake 任务来解析 Twitter JSON？

> ID：14679524
> 
> 赞同：0
> 
> 时间：2013-02-04T02:06:24.043
> 
> 标签：ruby, ruby-on-rails-3, json, rake, rake-task

我正在尝试编写一个 rake 任务来解析一个包含大量 json 格式的 twitter 更新的文件。

json 文件如下所示：

```
{ "_id" : { "$oid" : "50f82aeab4aa879861000000" }, "text" : "Golden Globes, lots of fashion messes...but glad Argo won. Really good movie, along w Moonrise Kingdom and Salmon Fishing Yeman.", "created_at" : { "$date" : 1358137508000 }, "id" : 290675893024747523, "user" : { "screen_name" : "Dpharmakis23", "id" : 852045842 } }
{ "_id" : { "$oid" : "50f82aeab4aa879861000001" }, "text" : "RT @RPLife: 2 Red Carpet HQs added and maybe my favorites of the night http://t.co/Fiq08m7i", "created_at" : { "$date" : 1358137507000 }, "id" : 290675892668211203, "user" : { "screen_name" : "dri_violet", "id" : 88925839 } }
{ "_id" : { "$oid" : "50f82aeab4aa879861000002" }, "text" : "After watching the Golden Globes it made me want to watch Les Mis again. It's gonna be a late night tonight.", "created_at" : { "$date" : 1358137507000 }, "id" : 290675892416573440, "user" : { "screen_name" : "JessBess4", "id" : 273137370 } }
{ "_id" : { "$oid" : "50f82aeab4aa879861000003" }, "text" : "I'm pretty how I've felt during the Golden Globes is how most of my followers feel during a NASCAR race/football game. #TweetOverload", "created_at" : { "$date" : 1358137507000 }, "id" : 290675892311715840, "user" : { "screen_name" : "JordanTMcGraw", "id" : 25172777 } }
{ "_id" : { "$oid" : "50f82aeab4aa879861000004" }, "text" : "RT @LaAbuela961: Hay personas que solo compran ropa en Jacarandas pero se pasaron criticando los vestuarios de los famosos en los Golden Globes. #NoMeJodan", "created_at" : { "$date" : 1358137507000 }, "id" : 290675892278157313, "user" : { "screen_name" : "silvita_hdez", "id" : 269487031 } } 
```

我想要做的是将这些条目中的每一个解析到我的“推文”模型中，该模型在架构中如下所示：

```
create_table "tweets", :force => true do |t|
  t.integer  "tid"
  t.datetime "created_at", :null => false
  t.text     "text"
  t.string   "user_name"
  t.integer  "user_id"
  t.datetime "updated_at", :null => false
end 
```

来自 twitter JSON 的数据应按如下方式进入我的表中：

*   _id.user.screen_name -> Tweet.user_name
*   _id.user.id -> Tweet.user_id
*   _id.text -> Tweet.text
*   _id.created_at -> Tweet.created_at
*   _id.id -> Tweet.tid

* * *

到目前为止，我编写的 rake 任务如下所示：

```
require 'multi_json'

namespace :db do
  task :import_tweets => :environment do
    File.open('/omittedPath/5tweets.json', 'r') do |file|
      file.each do |line|
        attrs = JSON.parse line
        twt = Tweet.find_or_initialize_by_identifier(attrs[2])
        twt.save!
      end
    end
  end
end 
```

当我尝试在 rails 控制台中解析 twitter json 时，我运行了以下命令：

```
JSON.parse { "_id" : { "$oid" : "50f840c2b4aa879ae4000d5d" }, "text" : "Nanananana BATMAN! Christian Bale is presenting now. #GoldenGlobes", "created_at" : { "$date" : 1358134191000 }, "id" : 290661983240454144, "user" : { "screen_name" : "egbrown27", "id" : 377696330 } } 
```

但我得到的回应是

```
SyntaxError: (irb):11: syntax error, unexpected ':', expecting '}'
JSON.parse { "_id" : { "$oid" : "50f840c2b4aa879a...
                ^
(irb):11: syntax error, unexpected ':', expecting tASSOC
...JSON.parse { "_id" : { "$oid" : "50f840c2b4aa879ae4000d5d" }...
...                               ^
(irb):11: syntax error, unexpected ',', expecting $end
...: "50f840c2b4aa879ae4000d5d" }, "text" : "Nanananana BATMAN!... 
```

任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T02:16:54.133

您应该将字符串传递给`JSON.parse`. 尝试这个：

```
JSON.parse '{ "_id" : { "$oid" : "50f840c2b4aa879ae4000d5d" }, "text" : "Nanananana BATMAN! Christian Bale is presenting now. #GoldenGlobes", "created_at" : { "$date" : 1358134191000 }, "id" : 290661983240454144, "user" : { "screen_name" : "egbrown27", "id" : 377696330 } }' 
```

它将返回一个已解析的哈希：

```
{"_id"=>{"$oid"=>"50f840c2b4aa879ae4000d5d"}, "text"=>"Nanananana BATMAN! Christian Bale is presenting now. #GoldenGlobes", "created_at"=>{"$date"=>1358134191000}, "id"=>290661983240454144, "user"=>{"screen_name"=>"egbrown27", "id"=>377696330}} 
```

# sql-server - 与停用词完全匹配的全文搜索

> ID：14679530
> 
> 赞同：2
> 
> 时间：2013-02-04T02:07:08.987
> 
> 标签：sql-server, tsql, full-text-search, stop-words, exact-match

我实现了全文搜索并有一个包含单词“is”和“here”的停止列表，当我运行第一个查询时，它返回的结果数量与第二个查询完全相同。我知道当我应用此设置时找到停用词时它会转换关键字

```
EXEC sp_configure 'transform noise words', 1 
```

1.  SELECT * FROM dbo.Tracks t WHERE t.accountid = 27 AND CONTAINS(t.searchterms, '"summer is here"')

2.  SELECT * FROM dbo.Tracks t WHERE t.accountid = 27 AND CONTAINS(t.searchterms, '"summer"')

我的问题是，有没有办法让停用词列表保持原样并同时搜索“夏天来了”的确切短语？

# windows - 从 VirtualBox 测试在 mac os x 上运行的 Rails 应用程序

> ID：14679536
> 
> 赞同：4
> 
> 时间：2013-02-04T02:07:55.617
> 
> 标签：windows, macos, networking, cross-browser, virtualbox

我在 Mac OS X 上的服务器 3000 上运行 Rails 应用程序，并尝试（但未能）从 Windows XP IE7 VM 连接到它。

我尝试了以下方法：

NAT 并`ifconfig` 在混杂模式下通过桥接适配器使用 mac 上提供的 ip 地址，并通过`ifconfig` Host Only 使用 mac 上提供的 ip 地址，并在混杂模式下使用通过桥接适配器在 mac 上提供的 ip 地址`ifconfig` 和 10.0.2.2:3000 (如此处所述：http: //ubuntuforums.org/showthread.php?t= [682519](http://ubuntuforums.org/showthread.php?t=682519)）。

这些似乎都没有工作......

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-11T20:59:23.100

我通过将 VM 上的适配器设置保留为 NAT 并`http://`在`10.0.2.2:3000`地址前面添加来实现此目的。

有一阵子试了试`10.0.2.2:3000`，但没有奏效。

希望它可以帮助某人节省一些时间。

# ios - 为什么我的 if 条件出错了

> ID：14679537
> 
> 赞同：-3
> 
> 时间：2013-02-04T02:07:59.597
> 
> 标签：ios, objective-c, xcode

> **可能重复：**
> [在 Objective-C 中检查相等性](https://stackoverflow.com/questions/2293859/checking-for-equality-in-objective-c)

我有以下代码：

```
    NSLog(@"之前，让我们看看 itemTitleField: %@", self.itemTitleField.text);
    NSLog(@"项目标题为：%@",self.item.title);
    if (self.itemTitleField.text == @"test") {
        NSLog(@"看，我有了新标题：%@",self.itemTitleField.text);
    } 别的 {
        NSLog(@"No item title is different: %@", self.itemTitleField.text);
    }

```

当我检查日志时，它显示如下：

```
2013-02-04 09:59:03.308 测试[1275:11303] 之前，让我们看看 itemTitleField: 测试中的内容
2013-02-04 09:59:03.309 测试[1275:11303] 项目标题为：测试
2013-02-04 09:59:03.309 测试[1275:11303] 否项目标题不同：测试

```

我期待：

```
看，我有了新的头衔：test

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T02:09:50.843

在 if 语句中，您需要使用 isEqualToString 函数：

```
if([self.itemTitleField.text isEqualToString:@"test"]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T02:10:48.803

你应该使用 isEqualToString 而不是 "==": if ([self.itemTitleField.text isEqualToString:@"test")) {

# php - 更新查询后记录不加载到编辑页面

> ID：14679538
> 
> 赞同：0
> 
> 时间：2013-02-04T02:08:10.070
> 
> 标签：php, mysql

我被这个难住了......我正在使用以下代码将记录加载到表单中进行编辑。记录很好地加载到字段等中。我单击提交并且记录没有重新加载。如果我在 url 中使用 edit_link.php?link_pk=50 ，则不会加载记录。如果我将值更改为未编辑的记录，它会很好地加载到表单中，但是如果我编辑该记录，也会发生同样的事情。数据库中的数据看起来与编辑之前完全相同（即在提交之前我没有更改任何内容）：

```
$link_pk = $_GET['link_pk'];
$author_pk = $_GET['author_pk'];

$title = $_POST['title'];
$url = mysql_real_escape_string($_POST['url']);
$url_for_link = $_POST['url'];
$alt = $_POST['alt'];
$credit = $_POST['credit'];
$sub_discipline_fk = $_POST['sub_discipline'];
$link_category_fk = $_POST['category'];
$icon = $_POST['icon'];

$query_link = "SELECT * FROM link, sub_discipline, link_category, link_icon WHERE link.sub_discipline_fk = sub_discipline.sub_discipline_pk AND link.link_category_fk = link_category.link_category_pk AND link.link_icon_fk = link_icon.link_icon_pk AND link.link_pk = '$link_pk'";
$result_link = mysql_query($query_link, $connection) or die(mysql_error());
$row_link = mysql_fetch_assoc($result_link);

switch ($icon) {
    case '1':
        $link = mysql_real_escape_string("<a class='text' href='" . $url_for_link . "' target='_blank' alt='" . $alt . "' >" . $title . "</a>");
        break;
    case '2':
        $link = mysql_real_escape_string("<a class='video' href='" . $url_for_link . "' target='_blank' alt='" . $alt . "' >" . $title . "</a>");
        break;
    case '3':
        $link = mysql_real_escape_string("<a class='interactive' href='" . $url_for_link . "' target='_blank' alt='" . $alt . "' >" . $title . "</a>");
        break;
    case '4':
        $link = mysql_real_escape_string("<a class='microscope' href='" . $url_for_link . "' target='_blank' alt='" . $alt . "' >" . $title . "</a>");
        break;
}

if(isset($_POST['submit'])){ 
        $query = "UPDATE link SET link_title = '$title', url = '$url', link = '$link', alt = '$alt', credit = '$credit', sub_discipline_fk = '$sub_discipline_fk', updated = NOW(), updated_by = '$author_pk', link_category_fk = '$link_category_fk', link_icon_fk = '$link_icon_fk' WHERE link_pk = '$link_pk'";
        $result = mysql_query($query, $connection) or die(mysql_error());
                if($result){
                    $query_link = "SELECT * FROM link, sub_discipline, link_category, link_icon WHERE link.sub_discipline_fk = sub_discipline.sub_discipline_pk AND link.link_category_fk = link_category.link_category_pk AND link.link_icon_fk = link_icon.link_icon_pk AND link.link_pk = '$link_pk'";
$result_link = mysql_query($query_link, $connection) or die(mysql_error());
$row_link = mysql_fetch_assoc($result_link);
            $message = '- The link has been updated';
        }
} 
```

请不要提醒我上述内容已被贬低，我知道这一点。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T03:31:51.200

愚蠢的错误...我更改了一个变量名并没有在查询中更改它... link_icon_fk = '$link_icon_fk' 应该是 link_icon_fk = '$icon' - 试图工作太快...

# c# - 通过 SSL c# 上传 FTP 文件

> ID：14679541
> 
> 赞同：0
> 
> 时间：2013-02-04T02:08:15.147
> 
> 标签：c#, c#-4.0, ftp, sftp, ftpwebrequest

主题：基于 SSL 的 FTP 文件传输

我正在尝试将文件上传到我拥有的一台 ftp 服务器，但是在到达侦听端口 990 的服务器服务器时出现异常我认为问题出在隐式/显式设置上，谁能建议我如何使用隐式设置通过 SSL 进行 ftp在.net 4.0 中？

我在调用 GetRequestStream 方法时遇到的异常：底层连接已关闭：服务器违反了协议。

这是代码片段：

```
FileInfo ExportFile = new FileInfo("C:\\ServiceXML.xml");
FtpWebRequest request = (FtpWebRequest)FtpWebRequest.Create("ftpserver" + "/FolderName/" + ExportFile.Name);
request.EnableSsl = true;
request.Credentials = new NetworkCredential("username", "password");
request.KeepAlive = true;
request.Method = WebRequestMethods.Ftp.UploadFile;
request.UseBinary = true;
request.ContentLength = ExportFile.Length;
request.UsePassive = true;
ServicePointManager.ServerCertificateValidationCallback = delegate(object s, X509Certificate certificate, X509Chain chain, SslPolicyErrors sslPolicyErrors) { return true; };

        try
        {
            int bufferLen = 4096;
            byte[] buffer = new byte[4096];
            int contentLen;

            FileStream fsExport = ExportFile.OpenRead();
            Stream ftpStream = request.GetRequestStream();

            contentLen = fsExport.Read(buffer, 0, bufferLen);

            while (contentLen != 0)
            {
                ftpStream.Write(buffer, 0, contentLen);
                contentLen = fsExport.Read(buffer, 0, bufferLen);
            }

            fsExport.Close();
            fsExport.Dispose();
            ftpStream.Close();
            ftpStream.Dispose();
        }
        catch (Exception ex)
        {
            //LogError(ex, "Error in FTP Request.");
        } 
```

现在在这个问题上苦苦挣扎了几天..任何帮助将不胜感激..任何人都可以建议我使用 .net 4.0 中的隐式设置通过 SSL 进行 FTP 的好例子吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-02-16T22:52:58.520

有类似的问题，除了我在 .net 4 上收到“处理中的本地错误”。将框架更改为 .net 3.5 并且它有效。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-07-05T15:15:58.863

当我没有在 URI 中设置端口时，我遇到了同样的问题，您的 ftpserver 变量应该类似于`ftp://127.0.0.1:990`

# c++ - 试图理解我在 Opencv & c++ 中发现的一些内容

> ID：14679543
> 
> 赞同：1
> 
> 时间：2013-02-04T02:08:30.020
> 
> 标签：c++, opencv

嘿，偷看我正在研究 opencv 并浏览一些教程，我很好地遇到了这些属性，我认为它们确实是问题所在，我不知道他们尝试了什么，但没有运气：

所以这些是我不知道它们是什么的位看看也许有人可以向我解释这些，所以这些教程对我来说更有意义：

```
vector<Vec4i>() //I know what vector is :) but Vec4i....?
CV_8UC1 // <------- ? 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T02:24:07.233

OpenCV 基本结构页面（在[`Vec`部分](http://opencv.willowgarage.com/documentation/cpp/basic_structures.html#vec)下）解释说它`Vec4i`是一个`typedef`，等价于`Vec<int, 4>`4 个整数的向量。

此外，在同一页（在[`Mat`部分](http://opencv.willowgarage.com/documentation/cpp/basic_structures.html#mat)下），它解释了这`CV_8UC1`是一个 8 位单通道矩阵。具体来说：

*   `8`表示位深度
*   `U`表示它是`unsigned`
*   `C1`表示只有一个通道。

[这是](http://www.cs.iit.edu/~agam/cs512/lect-notes/opencv-intro/opencv-intro.html#SECTION00023000000000000000)一个页面，其中包含有关 OpenCV 命名约定的更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T02:24:41.770

1.  `Vec4i`只是一个`typedef`aa 向量：

    `typedef Vec<int, 4> Vec4i;`从[这里](http://opencv.willowgarage.com/documentation/cpp/basic_structures.html?highlight=vec4i)。

2.  `CV_8UC1`是一个#Define，它有助于 OpenCV 矩阵的初始化：

    例如

    CV_8UC1 表示 8 位单通道矩阵，

如果您需要 OpnenCV 类型建议，请查看[文档](http://opencv.willowgarage.com/documentation/cpp/index.html)。

这是非常有帮助的。

# visual-studio-2010 - 转换不可用/卸载的项目

> ID：14679544
> 
> 赞同：1
> 
> 时间：2013-02-04T02:08:50.703
> 
> 标签：visual-studio-2010, project

我的解决方案中有一个当前已卸载的项目。当我尝试重新加载项目时，出现错误：

> 该项目尚未转换

项目又回到：`projectName (unavailable)`

我不知道这是怎么发生的，我似乎找不到打开项目并转换它的方法。有一些我想念的简单方法吗？

此外，右键单击项目名称时给出的选项是：重新加载/编辑/剪切/删除。

编辑：

原来 sp1 有某种错误，所以在修复它之后，现在一切都很好。奇怪的。

# jquery - 可滚动的焦点元素

> ID：14679545
> 
> 赞同：2
> 
> 时间：2013-02-04T02:08:52.940
> 
> 标签：jquery, scroll

```
 var newrow =
     $(
     "<tr id=" + mahs + ">"
    + "<td id=\"stt\">" + $("#txtIncrement").val() + "</td>"
    + "<td id=\"mahs\">" + mahs + "</td>"
    + "<td id=\"fullname\">" + $("#txtFullname").val() + "</td>"
    + "<td id=\"delete\">" + "<a href=\"#\"><img src=\"/Contents/Images/delete.png\" style=\"width:30px;height:30px;\" alt=\"\" /></a>" + "</td>"
    + "</tr>");
    $("#tbContent").append(newrow); 
```

我使用此代码在下面的 div 标签中向 table(tbContent) 添加新行。

```
 <div  id="scrollpanel" class="cvleft" style="height:417px; overflow:scroll;">
        <table id="tbContent">
        <thead>
            <tr>
                <th>STT</th>
                <th>HS</th>
                <th>Name</th>
                <th>Delete</th>

            </tr>
        </thead>
        <tbody>
        </tbody>
        </table>
    </div> 
```

添加到 table 时如何聚焦该行？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T02:11:35.990

假设您在输入新行后尝试滚动到 div 的底部，请尝试以下操作：

```
var height = $('#scrollpanel')[0].scrollHeight;
$('#scrollpanel').scrollTop(height); 
```

或者，如果您想让它动画化：

```
var height = $('#scrollpanel')[0].scrollHeight;
$("#scrollpanel").animate({ scrollTop: height}, 1000); 
```

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T02:16:29.093

如何尝试 - 添加行时使用 jquery 可能像 -->

```
$('#scrollpanel').scrollIntoView() 
```

[如何使用 javascript/jquery 关注给定表的行？](https://stackoverflow.com/questions/2188245/how-can-i-focus-on-a-given-tables-row-using-javascript-jquery)

# android - 将数据输入到 EditText 2 时禁用 EditText 1

> ID：14679555
> 
> 赞同：-2
> 
> 时间：2013-02-04T02:11:15.827
> 
> 标签：android, android-edittext

我对android编程相当陌生，我有以下情况：我想要两个editText字段，如果用户在第一个字段中键入数据，它会禁用另一个字段，这意味着它仍然可见但不可编辑用户。

我确信有一个简单的方法可以做到这一点，但我一直无法找到它。

感谢您的帮助，如果我遗漏任何具体细节，请告诉我，Classy

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T02:30:17.687

用于`EditText.addTextChangedListener`检测用户输入数据。
用于`EditText.setEnabled(false)`禁用您的第二个 EditText。

```
editText.addTextChangedListener(new TextWatcher() {

            @Override
            public void onTextChanged(CharSequence s, int start, int before,
                    int count) {

            }

            @Override
            public void beforeTextChanged(CharSequence s, int start, int count,
                    int after) {

            }

            @Override
            public void afterTextChanged(Editable s) {
                disableEditTExt.setEnabled(false);
            }
        }); 
```

希望这会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T02:33:36.900

```
firstEditText.addTextChangedListener(new TextWatcher() {

            @Override
            public void onTextChanged(CharSequence s, int start, int before,
                    int count) {
                // TODO Auto-generated method stub

            }

            @Override
            public void beforeTextChanged(CharSequence s, int start, int count,
                    int after) {
                // TODO Auto-generated method stub

            }

            @Override
            public void afterTextChanged(Editable s) {
                // TODO Auto-generated method stub
                secondEditTExt.setEnabled(false);
            }
        }); 
```

# xcode - Xcode 中注释块的键盘快捷键 /* ... */

> ID：14679558
> 
> 赞同：13
> 
> 时间：2013-02-04T02:11:18.360
> 
> 标签：xcode, comments

我正在寻找一个键盘快捷键来注释掉一段代码。我已经知道`Command`+在选定的代码行前面`/`添加`//`，但我希望能够以`/* ... */`这种方式创建注释块。

我想要一个快捷方式的原因`/* ... */`是能够折叠评论块，据我所知，你不能用`//`评论来做。

所以要么我需要一种折叠`//`类型评论的方法，要么需要一个键盘快捷键来创建`/* ... */`评论

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T23:32:47.553

它没有我想要的那么好，但这是迄今为止我想出的最佳选择。我在 Xcode 中创建了一些自定义代码片段，每个片段都用适当大小的注释块替换了一个快捷方式。

例如，我让它用一个 80 个字符宽的注释块（对于非缩进的行）替换快捷方式“com1”。这是 Xcode 的代码片段库中的以下代码：

```
/*******************************************************************************
<#comment#>
******************************************************************************/ 
```

对于缩进的行，我有快捷键“com2”、“com3”和“com4”，它们的宽度分别为 76、72 和 68 个字符。

======

此外，在代码片段方面，Xcode 的文档也不是很有帮助。要创建新的代码片段，请显示实用程序视图（右侧窗格）并选择`{}`底部的图标以显示代码片段库。选择一些要添加的代码，并将其拖到代码片段库中（通过左键单击并**按住一秒钟**然后拖动 - 作为 Windows 用户，我花了很长时间才弄清楚这一点）。`My Code Snippet`这将在代码片段库的最底部创建一个标题为新条目，您可以将鼠标悬停`Edit`在您喜欢的位置上。

======

编辑：[在这里](https://www.dropbox.com/s/xm8gyrav0l9n6tb/MB_codesnippets.zip)，我上传了一个包含五个代码片段的 zip 文件。级别 1 到 4（com1、com2、com3、com4）分别为 80、76、72 和 68 个字符宽。Level 0 是一个单行注释块，不会自动格式化宽度（我将它用于单个注释以保持格式）。

编辑 2：此外，用户代码片段存储在`~/Library/Developer/Xcode/UserData/CodeSnippets/`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-19T21:14:34.610

我在苹果开发论坛上转发了你的问题....我也在寻找答案。这是我得到的回应.....还没有尝试过，但很快就会尝试。

在 WWDC 2012 视频 Session 402 - Working Efficiently with Xcode（大约 6 分钟后）中描述了如何使用 Mac OSX Automator 添加服务来操作选定的文本。视频中显示的示例是使用 shell 命令 sort 和 uniq 删除所选文本中的重复项。使用这种方法，您可以使用 awk

awk 'BEGIN{print"/ *"}{print $0}END{print"* /"}'

对于任何给定的选定文本，它将在之前和之后放置注释分隔符。然后添加一个快捷方式来调用这个服务。

# java - Java中弹性计算节点的架构选项

> ID：14679561
> 
> 赞同：1
> 
> 时间：2013-02-04T02:12:38.633
> 
> 标签：java, amazon-web-services, queue, load-balancing, distributed-computing

我有一个需要计算的应用程序`foo(String parm1, String parm2): String`。

让我们假设方法 foo 是计算密集型的。

我想有一个简单的进程坐在计算 foo 的 AWS 微实例上。

为了简单起见，我启动了 10 个运行 JVM 进程的微型实例来计算 foo。

我的问题是：

我正在寻找一个框架，该框架将自动负载平衡从我的 foo 调用进程到我的 foo 计算节点的调用。并且，如果需要，最好允许我添加计算节点。

笔记：

我可以使用几种架构来实现这一点（我都不喜欢这些架构——我正在寻找更无缝的东西）：

1.  使用队列作为负载分配机制——但是我必须管理从紧密耦合的调用到异步机制然后返回——不要太喜欢这个
2.  我可以让被调用者查找某种名称服务并随机选择一个计算节点并调用 Web 服务调用——同样不太喜欢这个。
3.  正如评论者指出的那样，AWS 有一个负载均衡器——但是我正在寻找架构级别的解决方案。
4.  有人建议使用 haproxy，这是一种很好的方法，我考虑过，但是我真的很想要一个 in-JVM 解决方案。
5.  可以看一下 Haddop MapReduce 类比，我正在寻找一种能够以类似于 Hadoop 将 MapReduce 发送到可用计算节点的方式向计算节点发送紧密耦合方法调用的能力。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T18:59:21.673

AWS 中可用的 Amazon[弹性负载均衡器](http://aws.amazon.com/elasticloadbalancing/)和[Auto Scaling](http://aws.amazon.com/autoscaling/)组的组合应该为您提供一个简单且可扩展的解决方案。

触发 Auto Scaling 以根据您决定的指标添加实例或删除实例。它可以是 ELB 上的数量或请求，也可以是实例上的负载。

如果你有恒定的负载，你应该考虑使用更大的实例，这些实例可以与多个内核并行处理。从价格的角度来看，拥有一个大型实例比拥有几个微型实例要好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T02:34:03.687

为此，我认为 haproxy 负载均衡器是一个非常好的解决方案。它提供了负载均衡策略列表，支持各种协议。

# matlab - 在不改变大小的情况下扩大/侵蚀图像

> ID：14679562
> 
> 赞同：2
> 
> 时间：2013-02-04T02:12:41.857
> 
> 标签：matlab, image-processing

我正在尝试在 matlab 中编写自己的扩张和侵蚀函数。我有一个有效的实现，但它改变了输出图像的大小。

这就是我所拥有的：

侵蚀

```
function eroded = erode(X) 
eroded = col2im(min(im2col(X, [3 3])), [3 3], size(X));
end 
```

扩张

```
function dilated = dilate(X) 
dilated = col2im(max(im2col(X, [3 3])), [3 3], size(X));
end 
```

这些在视觉上可以工作，但是当我尝试覆盖用它们制作的区域时，它会变得一团糟，因为图像矩阵的尺寸已经改变。我已经确定问题出在`col2im`或中`im2col`。谁能告诉我我做错了什么？

玩弄它，我发现它可能与如何将转换后的矩阵中的列的大小减小到 1`min`相关联。`max`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T05:55:45.723

您似乎没有考虑实施中的边界条件。

为此，您很可能无法将您的函数写在一行中。您可以执行以下两种操作之一：1）创建一个单独的过滤器以应用于边缘，然后将这些值附加到您的输出中，或 2）忽略边界和零填充，或 3）忽略边界并附加值从原始图像。

注意：虽然您正在编写自己的函数，但一个有效的内置 Matlab 函数如下：

```
eroded = imerode(X,[1,1,1;1,1,1;1,1,1]); 
```

对于膨胀：

```
dilated = imdilate(X,[1,1,1;1,1,1;1,1,1]); 
```

# php - 使用 PHP 向使用 PHP、MySQL、Perl 和 SSH 的多个服务器上的 perl 脚本发送命令

> ID：14679563
> 
> 赞同：1
> 
> 时间：2013-02-04T02:13:01.213
> 
> 标签：php, sql, perl, ssh

好。我有一个很大的基础可以去。我只是不知道该怎么做。使用 exec() 函数。但我认为我真的只需要帮助进行远程 SSH。其余的我已经有点理解了

我在 5 台服务器上有一个 perl 脚本需要更新，而自动执行此操作的最佳方法是从远程服务器上的管理面板。

php 文件需要从 MySQL 收集服务器 ips、用户名、密码 + .pl 的目录，同时还发送刚刚发送的 post 数据，然后通过 SSH（从每个变量）发送该数据并使用命令执行带有发布数据（来自 php 文件）作为参数的远程 perl 脚本。

基本上：PHP(+post data) -> SQL(gets table info) -> perl -> (SSH -> perl)[重复直到没有更多的服务器需要更新]

它越快越简单越好。如果可以删除任何步骤以加快速度，那就太好了，除非它降低了安全性。

我真的不知道该怎么做，因为我仍在尝试学习 Perl 和 SQL

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T02:47:18.067

您可以在服务器之间设置 ssh[无密码身份验证](http://www.packetsource.com/article/ssh/40064/how-to-setup-password-less-ssh-using-public-private-keys)，在不同服务器上的相同路径中设置和测试脚本，并在 PHP 脚本中编写

```
for($hostname in $hosts)
    system("ssh $hostname -c 'perl /path/to/my/script.pl'") 
```

或者您可以设置公钥/私钥身份文件并执行以下操作：

```
for($hostname in $hosts)
    system("ssh $hostname -i ~/.ssh/identity_file -c 'perl /path/to/my/script.pl'") 
```

# javascript - 在 jQuery 中显示另一个 div 时隐藏一个 div？

> ID：14679564
> 
> 赞同：0
> 
> 时间：2013-02-04T02:13:21.183
> 
> 标签：javascript, jquery, fadein, fadeout

当另一个 div 可见时，我试图隐藏一个 div。

我有 div 1 和 div 2。

如果显示 div 2，则 div 1 应隐藏，如果未显示 div 2，则 div 1 应可见/取消隐藏。

该功能需要在页面加载时准备好功能/文档。

我已经尝试过了，但我没有任何运气，有人可以告诉我如何做到这一点。

```
<script>
    window.onLoad(function () {
        if ($('.div2').is(":visible")) {
             $(".div1").fadeOut(fast);

        } else if ($('.div2').is(":hidden")) {
            $('.div1').fadeIn(fast);

        }
    });
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T02:19:34.473

为每个 div添加一个类`hidden`，然后使用 jQuery 在该类之间切换。顺便说一句，`window.onload`它不是一个函数，它需要一个像`window.onload = function() {}`. 另外，加`fast`引号。我不知道这是否是*必需*的，但 jQuery 就是这么说的。

```
<div class="div1"></div>
<div class="div2 hidden"></div>

.hidden { display: none }

$(document).ready(function() {

    if($(".div1").hasClass("hidden")) {
        $(".div2").fadeIn("fast");
    }

    else if($(".div2").hasClass("hidden")) {
        $(".div1").fadeIn("fast");
    }

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T02:22:10.337

您应该将字符串传递给`.fadeIn()`and`.fadeOut()`方法。

取而代之的`.fadeIn(fast)`是`.fadeIn("fast")`. 对`.fadeOut()`.

一般来说，既然您已经在使用 jQuery，最好像这样包装您的代码：

```
$(function () {
    // Code goes here
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T02:22:37.203

您可以使用 setTimeout 或 setInterval 来跟踪这些 div 是否存在

```
$(function() {
  var interval = window.setInterval(function() {
    if($('#div2').hasClass('showing')) {
      $('#div1').fadeOut('fast');
    }      
    if($('#div2').hasClass('hidden')) {
      $('#div1').fadeIn('fast');
    }
  }, 100);

  // when some time u don't want to track it
  // window.clearInterval(interval)
}) 
```

为了更好的性能

```
var div1 = $('#div1')
  , div2 = $('#div2')

var interval ....
// same as pre code 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T02:26:08.607

看起来您正在使用 jquery 选择器（一个 javascript 库）。如果您要使用 jquery，请确保通过将其包含在文档标题中来正确加载库（谷歌通过为您托管它使这很容易
`<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>`）

加载 jQuery 后，您可以这样做

```
$(document).ready(function(){
if ($('.div1').is(":visible")) {
$('div2').hide();
}

else if ($('.div2').is(":visible")) {
$('div1').hide();
}

}); 
```

**工作示例**： http: [//jsfiddle.net/HVDHC/](http://jsfiddle.net/HVDHC/) - 只需将 display:none 从 div 2 更改为 div 1 并单击“运行”以查看它的替代。

# java - issueCommand(java.lang.String,int) 在 com.sun.mail.smtp.SMTPTransport 编译错误中具有私有访问权限

> ID：14679566
> 
> 赞同：0
> 
> 时间：2013-02-04T02:13:33.373
> 
> 标签：java, ant, compiler-errors

添加新的 AUTH XOAUTH2 命令后尝试编译项目时出现以下错误。

```
 byte[] response = String.format("user=%s\1auth=Bearer %s\1\1", msg.getFrom(),
            token).getBytes();

    response = BASE64EncoderStream.encode(response);
    transport.issueCommand("AUTH XOAUTH2 " + new String(response), 235);

issueCommand(java.lang.String,int) has private access in com.sun.mail.smtp.SMTPTransport
[javac] Note: Some input files use or override a deprecated API.
[javac] Note: Recompile with -Xlint:deprecation for details.
[javac] Note: Some input files use unchecked or unsafe operations.
[javac] Note: Recompile with -Xlint:unchecked for details.
[javac] 1 error 
```

我尝试包括`<compilerarg value="-Xlint:unchecked"/>`，但仍然无法解决。所以我添加了另一个`<compilerarg value="-Xlint:deprecation"/>`. 但仍然说有错误。

这是编译xml信息。

```
<javac source="1.6" target="1.6" srcdir="${src}" destdir="${build}" deprecation="no" debug="yes" listfiles="no"> 
```

注意：我使用的是 Javamail 1.4 版本 Java Class Version: 1.4 (48.0)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T06:10:28.087

*   `javap com.sun.mail.smtp.SMTPTransport`报告 public synchronized void issueCommand(java.lang.String, int) throws javax.mail.MessagingException；对于 JavaMail 1.4.4。

*   Javadoc 说该方法是@since 1.4.1。

所以该方法是公开的，而不是私有的。

因此，您*必须*在某处放置另一个版本的 mail-*.jar。否则你描述的情况是不可能的。否则，`com.sun.mail.smtp.SMTPTransport`由于某种原因，您有自己的不兼容类。

否则，该方法在 JavaMail 1.4 中是私有的，并且您还没有升级 JavaMail，您当然应该升级，因为您落后 5 个版本。

# c - 字母字符的字符到整数转换关闭

> ID：14679568
> 
> 赞同：1
> 
> 时间：2013-02-04T02:13:56.077
> 
> 标签：c

我正在将字符串逐个字符转换为整数。所以'A' - '0' 应该是 10。然而，即使数字很好，字母字符（即 AF）也会出现 7。例如，这是我的转换代码行：

```
result = result + (((int) (*new - '0')) * pow(16, bases)); 
```

如果我为像“A2C9”这样的十六进制字符串逐段打印该行，那么由于某种原因，我的 A 被转换为 17，而我的 C 被转换为 19。但是数字 2 和 9 输出正确。我想弄清楚我是否在某处遗漏了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T02:17:35.517

您正在减去 ASCII 值。这对 AZ 和 0-9 来说很好，但如果你开始混合它们就不行了。阅读 ASCII 表以更好地理解该问题。

这是表格： [http ://www.asciitable.com/index/asciifull.gif](http://www.asciitable.com/index/asciifull.gif)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T02:21:10.090

'A' 的 ASCII 码是 65；'Z' 是 90。'0' 的 ASCII 码是 48；对于“9”，它是 57。这些代码也用于 Unicode (UTF-8)、8859-x 和许多其他代码集。

当您计算 时`'A' - '0'`，您会得到 65 - 48 = 17，这是您所看到的 'off-by-7'。

要将字母字符 'A' 转换为 'F' 到它们的十六进制等价物，您需要一些变化：

```
c - 'A' + 10; 
```

记住 'a' 到 'f' 也是允许的，对于他们你需要：

```
c - 'a' + 10; 
```

或者您需要先转换为大写。或者您可以使用：

```
const char hexdigits[] = "0123456789ABCDEF";

int digit = strchr(hexdigits, toupper(c)) - hexdigits; 
```

或无数其他技术中的任何一种。最后一个片段假定`c`已知包含有效的十六进制数字。如果不是这种情况，它会非常失败。

请注意，C 确实保证数字 0-9 的代码是连续的，但不保证字母 AZ 的代码是连续的。特别是，如果代码集是 EBCDIC（主要但不只用于 IBM 大型机），则字母的代码是不连续的。

# php - SimpleXML 和 foreach 错误

> ID：14679574
> 
> 赞同：0
> 
> 时间：2013-02-04T02:14:42.213
> 
> 标签：php, api, foreach, simplexml

```
$typeID = 34;
        $reader = simplexml_load_file("http://api.eve-central.com/api/quicklook?typeid=".$typeID);
    foreach ($reader -> buy_orders -> order as $orderrow) {
        if($orderrow->price > $bestPrice)
        {
            if($orderrow->security >= "0.5")
            {
                $bestPrice = $orderrow->price;
                $bestStation = $orderrow->station_name;
                $bestStationID = $orderrow->station;
            }
        }
    } 
```

给我：

```
Warning: Invalid argument supplied for foreach() 
```

我不明白为什么。这里的想法是遍历那里列出的每个购买订单，并比较价格，如果订单更高，则将其设置为最佳。这样做直到所有订单都完成，变量将列出最佳价格、最佳站点和稍后使用的站点 ID。我查看了许多 StackOverflow 问题、参考资料等。许多示例报告深入三级很好，所以我不明白为什么这是一个无效的论点。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T02:31:47.183

您能否添加您的 xml 或示例 xml 的架构？

我是 PHP 新手，但根据 PHP foreach 示例，我猜是“foreach”行导致了这个警告，也许它应该像这样工作：

```
foreach ($reader -> buy_orders as $orderrow) {
...
} 
```

如果 $reader -> buy_orders 是数组表达式，则不应添加 '->order'

请参考 [http://php.net/manual/en/control-structures.foreach.php](http://php.net/manual/en/control-structures.foreach.php)

foreach (array_expression as $value) 语句

我没有测试我的答案，您可以尝试是否适合您并告诉我。谢谢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T02:45:56.827

在仔细检查 XML 文档后，我发现我跳过了一个级别。应该是

```
foreach($reader -> quickorder -> buy_orders -> order as $buyOrder) 
```

# c++ - 如何编写一个 Excel C 加载项函数，将字符串返回到 Excel 而不发生内存泄漏？

> ID：14679575
> 
> 赞同：2
> 
> 时间：2013-02-04T02:14:45.650
> 
> 标签：c++, excel, memory-leaks, add-in, xll

我正在使用 C++ 编写 Excel XLL 插件，我希望我的函数使用预定义的 XLOPER12 将字符串返回到 Excel。

据我了解，Excel 要求函数返回一个指向内存的指针，然后它会进行浅拷贝，然后在不清除函数中分配的内存的情况下消失。所以如果我写这样的东西：

```
extern "C" LPXLOPER12 WINAPI strgen() {
    XLOPER12 res;

    res.xltype = xltypeString;
    res.val.str = (XCHAR*)malloc(2*sizeof(XCHAR));
    res.val.str[0] = (XCHAR)1;
    res.val.str[1] = L"X";

    return (LPXLOPER12)&xRes;
} 
```

但显然这会导致内存泄漏。有人建议我可以将 res 声明为静态变量，但我真的不知道如何初始化它。

欢迎所有建议。

最好的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-09T03:49:58.370

为自己省点麻烦并使用[https://xll.codeplex.com](https://xll.codeplex.com)。注册和定义函数的完整代码是

```
static AddIn12 xai_strgen(
    L"?strgen", L"STRGEN",
    XLL_LPOPER12, L"");
LPOPER12 WINAPI strgen() 
{
#pragma XLLEXPORT
    static XLOPER12 xRes(L"X");

    return &xRes;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T03:53:15.653

您可以尝试声明静态数组并返回它的地址

```
XCHAR s_res[3] = {0};
XLOPER12 res;
extern "C" LPXLOPER12 WINAPI strgen() {

res.xltype = xltypeString;
res.val.str = (XCHAR*)s_res;
res.val.str[0] = (XCHAR)1;
res.val.str[1] = L"X";

return (LPXLOPER12)&res;
} 
```

注意你不应该`s_res`在函数内部移动，因为它会有一个堆栈存储，当函数返回时将被清除

# .net - 如何使用休眠搜索？无法成功构建

> ID：14679581
> 
> 赞同：0
> 
> 时间：2013-02-04T02:15:24.720
> 
> 标签：.net, nhibernate, lucene.net, nhibernate-search

我正在尝试连接 nhibernate 搜索，但遇到了几个问题。

1.  我下载了[nuget 包](https://nuget.org/packages/NHibernate.Search/)，但出现错误

    'Lucene.Net.Search.Query' 类型在未引用的程序集中定义。您必须添加对程序集 'Lucene.Net, Version=2.9.2.2, Culture=neutral, PublicKeyToken=null' 的引用

它似乎没有正确的版本。有没有我能得到的更新版本？我似乎找不到一个。

2 我得到的下一个错误是

```
 string query = "Name: Test";
                using (var nhibernateSearch = Search.CreateFullTextSession(unitOfWork.Session))
                {
                    base.unitOfWork.BeginTransaction();

                    var carSearchResults = nhibernateSearch.CreateFullTextQuery(query)
                        .SetMaxResults(5)
                        .List();

                    //var results = nhibernateSearch.CreateFullTextQuery(query).List();

                    base.unitOfWork.Commit();
                } 
```

我明白了

```
The best overloaded method match for 'NHibernate.Search.IFullTextSession.CreateFullTextQuery(Lucene.Net.Search.Query, params System.Type[])' has some invalid arguments 
```

3 我得到的下一个错误是

```
Error   13  Argument 1: cannot convert from 'string' to 'Lucene.Net.Search.Query' 
```

我一直在尝试遵循[本教程](http://www.d80.co.uk/post/2011/03/04/Nhibernate-Search-Tutorial-with-LuceneNet-and-NHibernate-30.aspx)，到目前为止似乎发生了很多变化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-04T12:42:44.347

我无法重现您的第一个问题。

你在打电话`CreateFulltextQuery(Query, params Type[])`，但听起来你想打电话`CreateFulltextQuery<MyEntityType>(String)`。

根据您的变量名，我猜...

```
var carSearchResults = nhibernateSearch.CreateFullTextQuery<Car>(query)
                                       .SetMaxResults(5)
                                       .List(); 
```

# python - 如果 numpy 数组索引不存在，则设置 none

> ID：14679582
> 
> 赞同：5
> 
> 时间：2013-02-04T02:15:26.593
> 
> 标签：python, numpy, python-2.7

我在 Python (2.7) 类中有一个函数，它应该在二维 numpy 数组中检索它周围的“单元格”的值。如果索引超出范围，我会将值设置为无。

我正在努力寻找一种方法来做到这一点，而无需编写 8 个 try/catch 语句，或者不使用多个 if x else None 语句，如下面的代码所示。虽然它们都可以工作，但它们似乎结构不太好，我认为必须有一种更简单的方法来做到这一点 - 我可能会以完全错误的方式思考这个问题。任何帮助将非常感激。

```
# This will return a dictionary with the values of the surrounding points
def get_next_values(self, column, row):
    if not (column < self.COLUMNS and row < self.ROWS):
        print "Invalid row/column."
        return False

    nextHorizIsIndex = True if column < self.COLUMNS - 2 else False
    nextVertIsIndex = True if row < self.ROWS - 2 else False

    n = self.board[column, row-1] if column > 0 else None
    ne = self.board[column+1, row-1] if nextHorizIsIndex else None
    e = self.board[column+1, row] if nextHorizIsIndex else None
    se = self.board[column+1, row+1] if nextHorizIsIndex and nextVertIsIndex else None
    s = self.board[column, row+1] if nextVertIsIndex else None
    sw = self.board[column-1, row+1] if nextVertIsIndex else None
    w = self.board[column-1, row] if row > 0 else None
    nw = self.board[column-1, row-1] if 0 not in [row, column] else None

    # debug
    print n, ne, e, se, s, sw, w, nw 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-04T02:26:51.117

这是一个标准技巧：创建您的板，边缘填充值为 None。然后您可以访问任何内部 3x3 正方形并使用

```
nw, n, ne, w, _, e, sw, s, se = (self.board[column-1:column+2, row-1:row+2]).ravel() 
```

* * *

例如，

```
import numpy as np

board = np.empty((10,10), dtype = 'object')
board[:,:] = None
board[1:9, 1:9] = np.arange(64).reshape(8,8)
print(board)
# [[None None None None None None None None None None]
#  [None 0 1 2 3 4 5 6 7 None]
#  [None 8 9 10 11 12 13 14 15 None]
#  [None 16 17 18 19 20 21 22 23 None]
#  [None 24 25 26 27 28 29 30 31 None]
#  [None 32 33 34 35 36 37 38 39 None]
#  [None 40 41 42 43 44 45 46 47 None]
#  [None 48 49 50 51 52 53 54 55 None]
#  [None 56 57 58 59 60 61 62 63 None]
#  [None None None None None None None None None None]]

column = 1
row = 1
nw, n, ne, w, _, e, sw, s, se = (board[column-1:column+2, row-1:row+2]).ravel()
print(nw, n, ne, w, _, e, sw, s, se)
# (None, None, None, None, 0, 1, None, 8, 9) 
```

注意

*   当您以这种方式定义板时，第一个非无索引现在是 1，而不是 0。
*   我认为更典型的做法是将第一个索引视为行，将第二个索引视为列，因为当您`print(board)` 这样做时，这就是值的格式化方式。所以也许你想要`board[row-1:row+2, column-1:column+2]`。当然，您可以定义自己的`print_board`函数，然后随意使用您喜欢的任何约定。

# javascript - 木偶布局切换策略

> ID：14679588
> 
> 赞同：6
> 
> 时间：2013-02-04T02:17:41.860
> 
> 标签：javascript, backbone.js, marionette

我有以下情况：

**app.js：** Singleton Marionette.Application()，我在其中定义了导航、页脚和主区域。在初始化程序中，我构造 Marionette.Contoller 并将它们附加到应用程序的 this.controller 对象以供以后控制。我可能不会在这里构建所有控制器，只是我想急切加载的那些。有些是稍后延迟加载的。我还在这里实例化一个 Backbone.Router，并传入对我的应用程序对象的引用：

```
var theApp = new TP.Application();

theApp.addRegions(
{
    navRegion: "#navigation",
    mainRegion: "#main",
    footerRegoin: "#footer"
});

theApp.addInitializer(function()
{
    // Set up controllers container and eagerly load all the required Controllers.
    this.controllers = {};

    this.controllers.navigationController = new NavigationController({ app: this });
    this.controllers.loginController = new LoginController({ app: this });
    this.controllers.calendarController = new CalendarController({ app: this });

    this.router = new Router({ app: this });
}); 
```

* ***Controller.js：**这是一个处理视图和模型实例化和事件的通用控制器。每个 Controller 拥有自己的 Marionette.Layout，将填充到 App.mainRegion 中。每个控制器都绑定到布局的“显示”事件以使用自定义视图填充布局的区域。每个控制器都提供了一个 getLayout() 接口，该接口返回控制器的关联布局。

```
Marionette.Controller.extend(
{
    getLayout: function() { return this.layout; },
    initialize: function()
    {
        this.views.myView = new MyView();
        ...
        this.layout.on("show", this.show, this);
        ...
    },
    show: function()
    {
        this.layout.myViewRegion.show(myView);
    }
}); 
```

**router.js：**路由器使用应用程序单例将控制器的布局加载到应用程序的主区域：

```
...
routes:
{
    "home": "home",
    "login": "login",
    "calendar": "calendar",
    "": "calendar"  
},
home: function ()
{
    var lazyloadedController = new LazyLoadController();
    this.theApp.mainRegion.show(lazyLoadController.getLayout());
},
login: function (origin)
{
    this.theApp.mainRegion.show(this.theApp.controllers.loginController.layout);
} 
```

实际上，除了重新加载相同的布局/控制器两次之外，一切正常。发生的情况是 LoginView 中定义的 DOM 事件不会在第二次显示时重新绑定。这很容易通过将 LoginView 初始化代码移动到该控制器的“show”事件处理程序中来解决：

```
LoginController = Marionette.Controller.extend(
{
    ...
    show: function()
    {
        if (this.views.loginView)
            delete this.views.loginView.close();

        this.views.loginView = new LoginView({ model: this.theApp.session });
        this.views.loginView.on("login:success", function()
        {
        });

        this.layout.mainRegion.show(this.views.loginView);
    } 
```

现在一切正常，但它消除了我创建控制器的部分原因：我希望他们拥有一个视图及其模型，创建一次，而不必在每次切换布局时销毁和重新创建它们。

我错过了什么吗？这不是我应该如何使用布局吗？布局和区域的重点不是我可以随意切换视图吗？

显然我不会经常跳回 LoginController/Layout，但是在 HomeController/Layout、CalendarController/Layout、SummaryController/Layout 等之间呢？在单页应用程序中，我可能会在这些“顶级”布局之间切换相当频繁，我希望视图保持在后台缓存。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-06-19T20:07:59.727

我认为您的问题是您没有维护控制器的单个实例。处理路由/控制器的推荐方法（基于[Brian Mann 的视频](http://www.backbonerails.com/series/engineering_single_page_apps)）是这样的

```
App.module('Routes', function (Routes, App, Backbone, Marionette, $, _) {

    // straight out of the book...
    var Router = Marionette.AppRouter.extend({
        appRoutes: {
            "home": "home",
            "login": "login",
            "calendar": "calendar"
        }
    });

    var API = {
        home: function () {
            App.Controller.go_home();
        },
        login: function () {
            App.Controller.go_login();
        },
        calendar: function () {
            App.Controller.go_calendar();
        }
    };

    App.addInitializer(function (options) {
        var router = new Router({controller: API});
    });
}); 
```

...和控制器：

```
App.module("Controller", function (Controller, App, Backbone, Marionette, $, _) {
    App.Controller = {
        go_home: function () {
            var layout = new App.Views.Main();
            layout.on('show', function () {
                // attach views to subregions here...
                var news = new App.Views.News();
                layout.newsRegion.show(news);
            });

            App.mainRegion.show(layout);
        },

        go_login: function () {
            ....
        },

        go_calendar: function () {
            ....
        }
    };
}); 
```

我*怀疑*你的问题是延迟加载的控制器......

# android - Admob 测试广告未展示，但真实广告已展示

> ID：14679589
> 
> 赞同：1
> 
> 时间：2013-02-04T02:18:03.923
> 
> 标签：android, admob

现在我的设备上没有显示测试广告。

我已经为我的每台设备调用了 adTestDevice，并确保它们是正确的 ID。

这很有趣，因为当我删除测试设备代码时，我得到了真实的广告，但是当我使用 addTestDevice 时，没有广告出现。我可以看到在我的 logcat 中调用了广告请求，但没有显示测试广告。

以前有没有其他人遇到过这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T04:37:37.883

有时 TestAds 坏了，它发生在我身上几次。尝试不同的时间它可能会再次开始工作。

# objective-c - 异步获取图像并设置 setNeedsDisplay

> ID：14679592
> 
> 赞同：1
> 
> 时间：2013-02-04T02:18:59.030
> 
> 标签：objective-c, setneedsdisplay, dispatch-async

此代码位于设置自定义单元格元素的单元格初始化例程中。它从网络异步获取图像。但是一旦完成，我需要它重新绘制。

这是我的代码片段：

```
dispatch_async(myCustomQueue, ^{

    //Look for the image in a repository, if it's not there
    //load the image from the web (a slow process) and return it
    mCover.image = [helperMethods imageManagerRequest:URL];

    //Set the image to be redrawn in the next draw cycle
    dispatch_async(dispatch_get_main_queue(), ^{
        [mCover setNeedsDisplay];
    });

}); 
```

但它不会重绘 UIImageView。我也尝试重新绘制整个单元格，但这也不起作用。非常感谢您的帮助。我一直在努力解决这个问题一段时间！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T03:27:14.873

而不是`setNeedsDisplay`，您应该像 Apple 在[其文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIKit_Framework/Introduction/Introduction.html)中提到的那样在主线程上设置图像。

> 注意：在大多数情况下，UIKit 类只能在应用程序的主线程中使用。对于从 UIResponder 派生的类或涉及以任何方式操作应用程序的用户界面的类尤其如此。

这应该可以解决您的问题：

```
dispatch_async(myCustomQueue, ^{

    //Look for the image in a repository, if it's not there
    //load the image from the web (a slow process) and return it
    UIImage *image = [helperMethods imageManagerRequest:URL];

    //Set the image to be redrawn in the next draw cycle
    dispatch_async(dispatch_get_main_queue(), ^{
        mCover.image = image;
    });

}); 
```

# user-interface - 如何将 GUI 添加到 hadoop 程序？

> ID：14679594
> 
> 赞同：1
> 
> 时间：2013-02-04T02:19:09.413
> 
> 标签：user-interface, hadoop, mapreduce

我用hadoop写了一个可以部署到ec2和本地集群的mapreduce程序，我用命令行运行程序没问题，但是有没有办法给hadoop程序添加接口，让用户只需要单击并运行程序而不是使用命令行？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T17:45:01.187

我不确定你到底想要什么，但我想你问是否有用于提交地图减少作业 hadoop 的 UI？如果是这样，你应该尝试色调：[http ://cloudera.github.com/hue/](http://cloudera.github.com/hue/)

# numpy - & vs * 和 | 与 +

> ID：14679595
> 
> 赞同：10
> 
> 时间：2013-02-04T02:19:19.270
> 
> 标签：numpy

在进行*布尔*数组比较时，使用`&`代替`*`或`|`代替有什么优势/约定`+`？这些总是等价的吗？

（如果这些在文档中，链接可能是一个可以接受的答案，但我对“numpy & 符号”和“numpy elementwise boolean comparison”的天真搜索没有产生任何相关信息）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-04T03:32:12.760

在 numpy中`&`and`|`等价于[`np.bitwise_and`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.bitwise_and.html)and [`np.bitwise_or`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.bitwise_or.html)。您也可以`^`使用[`np.bitwise_xor`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.bitwise_xor.html). 这都记录在 ndarray 文档的[算术和比较操作](http://docs.scipy.org/doc/numpy/reference/arrays.ndarray.html#arithmetic-and-comparison-operations)部分。[`np.logical_and`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.logical_and.html)和也有[`np.logical_or`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.logical_or.html)ufunc [`np.logical_xor`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.logical_xor.html)。

如果您的数组都是 dtype`bool`应该没有任何区别。我个人倾向于`&`and `|`，即使你对`bool`dtype 不严格，它也会让你陷入这样的麻烦：

```
In [30]: np.array(2) & np.array(1)
Out[30]: 0 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-04T14:47:22.330

如果有人想知道：操作具有相同的速度，因此您选择哪一个并不重要。

```
In [1]: import numpy as np

In [2]: a = np.random.randn(1000)>0

In [3]: b = np.random.randn(1000)>0

In [4]: %timeit a*b
100000 loops, best of 3: 2.89 us per loop

In [5]: %timeit a&b
100000 loops, best of 3: 2.87 us per loop

In [6]: %timeit a+b
100000 loops, best of 3: 2.69 us per loop

In [7]: %timeit a|b
100000 loops, best of 3: 2.62 us per loop 
```

就我而言，我使用`&`and`|`明确表示我对布尔运算感兴趣（以防读者忘记了相关数组的 dtype）。

# ios - ios - 存档时出现以前不存在的奇怪新错误

> ID：14679598
> 
> 赞同：0
> 
> 时间：2013-02-04T02:20:25.020
> 
> 标签：ios, ios5, ios6

我收到这样的错误：

```
GenerateDSYMFile /Users/owner12/Library/Developer/Xcode/DerivedData/Fundraising-ejuvymrlffmggbafituyflpzvhsh/Build/Intermediates/ArchiveIntermediates/Fundraising/BuildProductsPath/Release-iphoneos/Fundraising.app.dSYM /Users/owner12/Library/Developer/Xcode/DerivedData/Fundraising-ejuvymrlffmggbafituyflpzvhsh/Build/Intermediates/ArchiveIntermediates/Fundraising/InstallationBuildProductsLocation/Applications/Fundraising.app/Fundraising
    cd /Users/owner12/Desktop/Fundraising
    setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
    /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/dsymutil /Users/owner12/Library/Developer/Xcode/DerivedData/Fundraising-ejuvymrlffmggbafituyflpzvhsh/Build/Intermediates/ArchiveIntermediates/Fundraising/InstallationBuildProductsLocation/Applications/Fundraising.app/Fundraising -o /Users/owner12/Library/Developer/Xcode/DerivedData/Fundraising-ejuvymrlffmggbafituyflpzvhsh/Build/Intermediates/ArchiveIntermediates/Fundraising/BuildProductsPath/Release-iphoneos/Fundraising.app.dSYM 
```

我不太确定这个 .dSYM 文件是什么，以及为什么它现在开始引起问题。或者也许还有其他问题？

作为一个注释，我最近开始从我的 mac 中得到一些奇怪的行为，它说由于内存不足而无法保存文件，但还有很多内存。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T02:25:43.567

尝试关闭并重新启动 Xcode；从设备中删除应用程序并重新安装。如果这不起作用，那么您的项目可能缺少某些文件。也许某些文件没有复制到您的项目中，它会在您的目标 -> 构建阶段 -> 复制捆绑资源中显示为红色，如果是这种情况，请将其删除并重新添加

# jquery - 使 jquery ：包含接受多个值

> ID：14679601
> 
> 赞同：0
> 
> 时间：2013-02-04T02:21:04.370
> 
> 标签：jquery, contains, multiple-value

我有一个简单的实时搜索过滤器，运行如下：

```
jQuery.expr[':'].Contains = function(a,i,m) { 
    return jQuery(a).text().toUpperCase().indexOf(m[3].toUpperCase())>=0;
};

var $section = $('section');
var $noresults = $('#noresults');

$noresults.hide();

$('#search').bind('keyup focus', function() {
    var input = $(this).val();

    if(input) {
        $section.hide();
        var result = $("section:Contains('"+input+"')");

        if(result.length) {
            $noresults.hide();
            result.show();
        }
        else {
            $noresults.show();
        }
    }
    else {
        $noresults.hide();
        $section.show();
    }
}); 
```

它工作正常，但我被要求让它接受多个值。使用此当前过滤器，如果我键入*“ABC”* ，则只会显示包含字符串*“ABC”*的部分。然而，如果我键入*"ABC DEF"*，即使这两个字符串包含在文档的一个或多个部分中，也不会显示任何内容。

我想要获得的是一个过滤器，当我在输入字段中键入*“ABC DEF ”时，它只显示包含字符串**“ABC”* **和** *“DEF”的部分。*

 *我尝试了几个涉及拆分输入的解决方案，并提出了以下版本，但它不起作用。你能帮我让这个过滤器接受多个值吗？

```
$('#search').bind('keyup focus', function() {
    var input = $(this).val();

    var arr = input.split(/[ ,]+/);

    var len = arr.length;

    console.log(arr);
    console.log(len);

    for(var i=0; i<len; ++i) {  
        if(input) {
            $section.hide();

            var result = $("section:Contains('"+arr[i]+"')");

            if(result.length) {
                $noresults.hide();
                result.show();
            }
            else {
                $noresults.show();
            }
        }
        else {
            $noresults.hide();
            $section.show();
        }
    }
}); 
```

非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-04T02:47:32.193

看起来不可能从一个“：contains”方法（[http://forum.jquery.com/topic/how-to-get-contains-to-work-with-multiple-criteria](http://forum.jquery.com/topic/how-to-get-contains-to-work-with-multiple-criteria)）中选择多个标准。

链接 :contains 方法将完成您想要实现的目标：

```
$('section:contains("ABC"):contains("DEF")'); 
```

您可以动态创建选择器，以便它适用于可变长度的数组。

这是一个 jsfiddle，它应该做你所追求的：http: [//jsfiddle.net/sKgpj/](http://jsfiddle.net/sKgpj/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-04T02:43:39.180

*   缓存`jQuery(a).text().toUpperCase()`
*   按空格拆分查询
*   循环拆分查询，测试每一个
*   如果找到不包含的查询成员，则返回 false
*   在循环结束时，返回 true

另请注意，如果您不想更改自定义选择器代码，也可以编写`section:Contains('ABC'):Contains('DEF')`.

编辑：翻译：

```
jQuery.expr[':'].Contains = function(a,i,m) { 
  var text = jQuery(a).text().toUpperCase();          // Cache `jQuery(a).text().toUpperCase()`
  var words = m[3].split(/\s+/);                      // Split query by whitespace
  for (var i = 0; i < words.length; i++) {            // Loop over the split query, testing each one
    if (-1 == text.indexOf(words[i].toUpperCase())) { // If you find a query member that is not contained,
      return false;                                   // return false
    }
  }
  return true;                                        // At loop end, return true
}; 
```*

# c++ - 内置类型是否具有移动语义？

> ID：14679605
> 
> 赞同：33
> 
> 时间：2013-02-04T02:21:38.517
> 
> 标签：c++, c++11, move-semantics, built-in-types

考虑[这段](http://ideone.com/DDd4bn)代码：

```
#include <iostream>
using namespace std;

void Func(int&& i) {
    ++i;
}

int main() {
    int num = 1234;
    cout << "Before: " << num << endl;
    Func(std::move(num));
    cout << "After: " << num << endl;
} 
```

它的输出是：

```
Before: 1234
After: 1235 
```

显然，`i`在内部被修改`Func`，因为它`i`在被“转换”为 r 值引用后绑定到参数`std::move`。

**好吧，我的观点：**

移动对象意味着将资源的所有权从一个对象转移到另一个对象。但是，内置类型不*包含*资源，因为它们本身就是资源。转移他们持有的资源是没有意义的。如示例所示，`num`的值被修改。它的资源，它的自身，是被修改的那个。

**内置类型是否具有移动语义？**

另外，移动后的内置类型对象（如果是的话）是明确定义的行为吗？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2013-02-04T03:03:53.203

> 那么，示例中显示的行为是否定义明确？

是的，示例中显示的行为是标准允许的唯一行为。那是因为`std::move`不动。移动的东西是移动构造函数和移动赋值运算符。

所做的只是将左值更改为xvalue `std::move`，以便它可以绑定到右值引用。它不调用任何构造函数或其他任何东西。更改值类别发生在类型级别。运行时*没有任何反应。*

右值引用仍然是引用：它们引用原始对象。该函数通过给定的引用递增原始整数。

如果函数通过引用获取参数，则不会发生复制或移动：原始对象绑定到引用。

如果一个函数按值接受参数，那么我们*可能会*采取行动。

但是，基本类型没有移动构造函数。在这种情况下，移动会降级到副本。

# javascript - 在 d3 可视化中访问 MySQL 数据库

> ID：14679610
> 
> 赞同：4
> 
> 时间：2013-02-04T02:22:34.487
> 
> 标签：javascript, python, mysql, d3.js, data-visualization

我需要一些关于 d3 和 MySQL 的帮助。以下是我的问题：

我将数据存储在 MySQL 中（例如：关键字及其频率）。我现在想使用 d3 将其可视化。据我对 d3 的了解，它需要 json 文件作为输入。我的问题是：如何从 d3 脚本访问这个 MySQL 数据库？我能想到的一种方法是：

1.  使用 Python 连接数据库并将数据转换为 json 格式。将其保存在一些 .json 文件中。

2.  在 d3 中，读取这个 json 文件作为输入并在可视化中使用它。

有没有其他方法可以直接使用 d3 将 MySQL 中的数据转换成 .json 格式？我们可以从 d3 连接到 MySQL 并读取数据吗？

非常感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-04T08:57:32.540

以下是一个 php 脚本，您应该可以将其保存为文件（假设您将其称为“getdata.php”），可以从您的 HTML 文件中访问，其中包含您的 D3 代码。调用时，它将以 json 格式从您的 MySQL 数据库返回数据（只要数据库服务器不在您的域之外）；

```
<?php
    $username = "******"; 
    $password = "******";   
    $host = "******";
    $database="***dbase_name***";

    $server = mysql_connect($host, $user, $password);
    $connection = mysql_select_db($database, $server);

    $myquery = "
    query here
    ";

    $query = mysql_query($myquery);

    if ( ! $myquery ) {
        echo mysql_error();
        die;
    }

    $data = array();

    for ($x = 0; $x < mysql_num_rows($query); $x++) {
        $data[] = mysql_fetch_assoc($query);
    }

    echo json_encode($data);     

    mysql_close($server);
?> 
```

显然，您需要为用户名、密码、主机和数据库输入适当的详细信息。您还需要为您的数据包含一个适当的查询，以便它返回“dateTimeTaken”和“阅读”的数据。类似的东西（这只是一个猜测）；

```
SELECT `dateTimeTaken`, `reading` FROM `tablename` 
```

然后，当您读取您的 json 文件时，您将对您将在 json 中读取的代码使用以下语法；

```
d3.json("getdata.php", function(error, data) { 
```

希望这接近您正在寻找的内容。我已经在本地对其进行了测试，这一切似乎都有效..

我已经整理了一篇文章来介绍简单 WAMP 服务器的本地安装并在此处从 d3.js 对 MySQL 数据库设置查询[http://www.d3noob.org/2013/02/using-mysql-database -as-source-of-data.html](http://www.d3noob.org/2013/02/using-mysql-database-as-source-of-data.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T02:46:48.987

`d3`是一个在客户端运行的 javascript 库，而 MySQL 数据库应该在服务器端运行。
`d3`无法连接MySQL数据库，更别说转换成json格式了。您认为可能的方式（步骤 1 和 2）是您应该做的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T01:23:12.513

我偶然发现了 Jerome Cukier 的详细教程，标题为“将 d3 与 mySql 数据库一起使用”。它似乎回答了你的问题： http: [//www.jeromecukier.net/blog/2012/01/02/using-d3-with-a-mysql-database/](http://www.jeromecukier.net/blog/2012/01/02/using-d3-with-a-mysql-database/)

简而言之，您确实需要一个 php（或 perl，或 python）脚本来从服务器端的数据库中获取您的数据。

# ruby-on-rails - 从 ActiveRecord 移动到 Mongoid 后无法访问方法

> ID：14679613
> 
> 赞同：1
> 
> 时间：2013-02-04T02:22:46.063
> 
> 标签：ruby-on-rails, mongoid, rails-activerecord

我正在尝试为我的应用程序使用 Mongoid 而不是 SQLite。

所以，我的代码如下所示：

```
class User 

  include Mongoid::Document
  include Mongoid::Timestamps

  field :name,  type: String
  field :email, type: String
  field :encrypted_password, type:  String
  field :salt , type: String
  field :admin , type: Boolean

  attr_accessor   :password
  attr_accessible :name, :email, :password, :password_confirmation
 .....

   def has_password?(submitted_password)
      encrypted_password == encrypt(submitted_password)
    end

  ....

 class << self
def authenticate(email_id, submitted_password)
  print "authenticate the user " + email_id
  user = User.where(email:email_id)

  if user.nil?
    return false
  else
    print "\n Check the passsword" + user.has_password?(submitted_password)

  end

end 
```

所以，

以前当我使用 ActiveRecord 时，我可以通过以下功能对用户进行身份验证：

```
 def authenticate(email, submitted_password)
-      user = find_by_email(email)
-      (user && user.has_password?(submitted_password)) ? user : nil 
```

但是现在，验证功能失败了：

```
undefined method `has_password?' for #<Array:0xbcc55b4> 
```

我错过了使用 Mongoid 的任何微小细节吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T07:43:30.830

Mongoid 中的这一行`user = User.where(email:email_id)`返回标准，它是一个数组，因此要选择一个用户，您必须将其替换为`user = User.where(email:email_id).first`仅返回一个文档并且您可以在其上运行该方法的用户`has_password?`

# git - 有没有办法将多个项目放在一个 git 存储库中？

> ID：14679614
> 
> 赞同：238
> 
> 时间：2013-02-04T02:22:51.900
> 
> 标签：git

出于某种原因，我只有**一个存储库**可供使用。
但我有***多个项目***，包括`java`项目`PHP scripts`和`Android`应用程序项目。

现在我的问题是，我必须将它们放在存储库中的不同**子文件夹**
中。 我使用不同的 IDE，你知道，每个 IDE 都可以有自己的工作区。

是否有一种简单的方法（例如，通过设计而不是通过意见）来解决问题？

* * *

## 回答 #1

> 赞同：236
> 
> 时间：2013-02-04T04:22:01.907

虽然大多数人会告诉你只使用多个存储库，但我觉得值得一提的是还有其他解决方案。

## 解决方案 1

单个存储库可以包含多个*独立*的分支，称为**孤立分支**。孤儿分支彼此完全分开；他们不分享历史。

```
git checkout --orphan BRANCHNAME 
```

这将创建一个与当前分支无关的新分支。每个项目都应该在自己的孤立分支中。

现在无论出于何种原因，git 需要在孤儿结帐后进行一些清理。

```
rm .git/index
rm -r * 
```

**在删除之前确保所有内容都已提交**

孤立分支清理干净后，就可以正常使用了。

## 解决方案 2

避免孤儿分支的所有麻烦。创建两个独立的存储库，并将它们推送到同一个远程。只需为每个 repo 使用不同的分支名称。

```
# repo 1
git push origin master:master-1

# repo 2
git push origin master:master-2 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2017-08-04T10:45:27.503

# 解决方案 3

这是为了将单个目录用于多个项目。我将这种技术用于一些密切相关的项目，我经常需要将更改从一个项目拉到另一个项目中。它类似于孤立分支的想法，但分支不需要孤立。只需从相同的空目录状态启动所有项目。

## 从一个已提交的空目录启动所有项目

不要指望这个解决方案会带来奇迹。正如我所看到的，您总是会对未跟踪的文件感到烦恼。Git 并不真正知道如何处理它们，因此如果有由编译器生成并被您的 .gitignore 文件忽略的中间文件，如果您尝试快速交换，它们很可能会在某些时候挂起例如，在您的软件项目和 PH.D 论文项目之间。

然而，这是计划。通过提交空存储库来启动任何 git 项目，然后从相同的空目录状态启动所有项目。这样您就可以确定这两批文件是相当独立的。另外，给你的分支一个合适的名字，不要懒惰地使用“master”。您的项目需要分开，因此请给它们适当的名称。

Git 提交（以及因此的标签和分支）基本上存储目录及其子目录的状态，**Git 不知道这些是相同项目还是不同项目的一部分**，因此 git 将不同项目存储在同一个存储库中确实没有问题。然后问题是您在使用另一个项目时从一个项目中清除未跟踪的文件，或者稍后分离项目。

## 创建一个空的存储库

```
cd some_empty_directory
git init
touch .gitignore
git add .gitignore
git commit -m empty
git tag EMPTY 
```

从空开始你的项目。

## 做一个项目。

```
git branch software EMPTY
git checkout software
echo "array board[8,8] of piece" > chess.prog

git add chess.prog 
git commit -m "chess program" 
```

## 开始另一个项目

随时随地。

```
git branch thesis EMPTY
git checkout thesis
echo "the meaning of meaning" > philosophy_doctorate.txt
git add philosophy_doctorate.txt 
git commit -m "Ph.D" 
```

## 来回切换

随时在项目之间来回切换。这个例子可以追溯到国际象棋软件项目。

```
git checkout software
echo "while not end_of_game do make_move()" >> chess.prog
git add chess.prog 
git commit -m "improved chess program" 
```

## 未跟踪的文件很烦人

但是，在项目/分支之间交换时，您会因未跟踪的文件而烦恼。

```
touch untracked_software_file.prog
git checkout thesis 
ls
    philosophy_doctorate.txt  untracked_software_file.prog 
```

## 这不是一个无法克服的问题

根据定义，git 并不真正知道如何处理未跟踪的文件，而是由您来处理它们。您可以阻止未跟踪的文件从一个分支转移到另一个分支，如下所示。

```
git checkout EMPTY 
ls
    untracked_software_file.prog
rm -r *
    (directory is now really empty, apart from the repository stuff!)
git checkout thesis
ls
    philosophy_doctorate.txt 
```

通过在签出我们的新项目之前确保目录为空，我们确保没有来自另一个项目的挂起的未跟踪文件。

## 细化

```
$ GIT_AUTHOR_DATE='2001-01-01:T01:01:01' GIT_COMMITTER_DATE='2001-01-01T01:01:01' git commit -m empty 
```

如果在提交空存储库时指定相同的日期，则独立创建的空存储库提交可以具有相同的 SHA1 代码。**这允许独立创建两个存储库，然后将它们合并到一个树中，稍后在一个存储库中具有一个共同的根。**

## 例子

```
# Create thesis repository. 
# Merge existing chess repository branch into it

mkdir single_repo_for_thesis_and_chess
cd single_repo_for_thesis_and_chess
git init
touch .gitignore
git add .gitignore
GIT_AUTHOR_DATE='2001-01-01:T01:01:01' GIT_COMMITTER_DATE='2001-01-01:T01:01:01' git commit -m empty
git tag EMPTY
echo "the meaning of meaning" > thesis.txt
git add thesis.txt
git commit -m "Wrote my PH.D"
git branch -m master thesis

# It's as simple as this ...
git remote add chess ../chessrepository/.git
git fetch chess chess:chess 
```

## 结果

[![合并存储库示意图](../Images/a8dbcabbd4d99949a31b124b932b5768.png)](https://i.stack.imgur.com/i94dQ.png)

## 每个项目使用子目录？

如果您尽可能将项目保存在子目录中，例如而不是拥有文件，这也可能会有所帮助

```
chess.prog
philosophy_doctorate.txt 
```

有

```
chess/chess.prog
thesis/philosophy_doctorate.txt 
```

在这种情况下，您未跟踪的软件文件将是`chess/untracked_software_file.prog`. 在该`thesis`目录下工作时，您不应该被未跟踪的国际象棋程序文件打扰，并且您可能会发现在不删除其他项目中未跟踪的文件的情况下可以愉快地工作。

此外，如果您想从其他项目中删除未跟踪的文件，转储不需要的目录比通过选择每个文件来删除不需要的文件更快（并且更不容易出错）。

## 分支名称可以包含“/”字符

所以你可能想把你的分支命名为

```
project1/master
project1/featureABC
project2/master
project2/featureXYZ 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2017-08-04T10:50:26.737

我会用[`git submodules`](https://git-scm.com/book/en/v2/Git-Tools-Submodules).

在这里查看[Git 存储库中的 Git 存储库](https://stackoverflow.com/questions/5980960/git-repository-in-a-git-repository)

根据 2019 年 2 月，我建议`Monorepos`

*   [勒纳](https://github.com/lerna/lerna)
*   [少量](https://docs.bitsrc.io/)

# parsing - 使用 cmd 创建包含基于 ipconfig 和调制解调器所需信息的 url 的 .txt

> ID：14679620
> 
> 赞同：1
> 
> 时间：2013-02-04T02:23:47.093
> 
> 标签：parsing, text, merge, cmd

我对 cmd 或任何东西都不太熟悉，但我做了一些研究并整理了一些我想要的东西。我试图制作的这个 .bat 将获取 ipconfig/all 的输出并选择以太网适配器的 mac 地址和 ip 地址，并将它们插入到计算机没有的那些实例的预先规定的 url 中的关键位置自动重定向到我酒店的互联网计费设置的首页。这不是正式工作；我只是想稍微“减轻我的负担”并节省打字时间。

我需要在 .txt 中创建的完整地址是 000.000.000.00/defaulta.php?mac=xxxxxxxxxxxx&ip=xxx.xxx.xx.xxx

除了 mac 和 ip 地址（均列为 x）之外的所有内容都与它们在每种情况下所需的完全一样。出于安全原因，故意更改显示为 0 的 IP 地址，无需为此做任何工作。我已经能够创建一个简单的 .bat 来创建 ipconfig 数据的输出到任何用户的桌面以便于访问：

```
@echo off
ipconfig/all > %userprofile%\Desktop\url_address.txt 
```

我已经尝试使用其他解析解决方案来获取我需要的数据，但是当我进行最简单的替换时，我最容易适应的一个（[在此处链接](https://stackoverflow.com/questions/2569640/dos-batch-command-to-read-some-info-from-text-file)）只会输出最后一个实例，而不是第一个或中间的任何实例。我可以尝试使用其中一种解决方案来仅选择某些线路，但我已经看到一些计算机首先列出他们的以太网，然后是无线，而另一些则首先列出无线，然后是以太网。我需要专门根据以太网线路进行解析，因为房间内没有无线互联网。

这是我个人电脑的输出示例：

```
Ethernet adapter Local Area Connection:

Connection-specific DNS Suffix  . : xxxx.net
Description . . . . . . . . . . . : Atheros AR8121/AR8113/AR8114 PCI-E Ethernet Controller
Physical Address. . . . . . . . . : xx-xx-xx-xx-xx-xx
DHCP Enabled. . . . . . . . . . . : Yes
Autoconfiguration Enabled . . . . : Yes
Link-local IPv6 Address . . . . . : xxxx::xxxx:xxxx:xxxx:xxxx%12(Preferred) 
IPv4 Address. . . . . . . . . . . : xxx.xxx.xx.xxx(Preferred) 
```

任何查找自己并进行比较的人都会发现它的长度并不完全相同，因此基于字符长度的解析将不起作用，因为不同的客人将拥有不同的卡片等。这意味着我需要解析两个特定点，即物理点url中的mac地址和url中ip地址的ipv4地址。这是否意味着我必须制作两个文本，每个解析一个？以及如何将这两个变量插入到最终 url 中？

所以我的主要问题是：

1）是否可以从以太网数据中获取我需要的两部分并将它们插入所需链接中的适当位置并将其放入.txt中，如果可以，究​​竟需要做什么？

2）我打算的全部功能是否需要通过编写几个.txt文件来完成，因为功能进展到最终解决方案，或者这些都可以输出到客人桌面上的一个文本文件中以减少混乱和更容易删除？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T19:24:22.647

问题是tl;博士。这是否符合您的要求？适当地修改`xxxx.net`和。`000.000.000.00`

```
@echo off
setlocal enabledelayedexpansion
set found=0
for /f "tokens=1,2 delims=:(" %%I in ('ipconfig /all') do (
    if !found!==1 (
        for /f %%x in ('echo "%%I" ^| find "Physical Address"') do set mac=%%J
        for /f %%x in ('echo "%%I" ^| findstr "IP[v4]*.Address"') do (
            set ip=%%J
            goto next
        )
    )
    for /f %%x in ('echo "%%J" ^| find /i "xxxx.net"') do set found=1
)
echo Couldn't scrape info.  Press any key to exit.
pause >NUL
goto :EOF

:next
set mac=%mac: =%
start http://000.000.000.00/defaulta.php?mac=%mac:-=%^&ip=%ip: =% 
```

它在输出中执行`ipconfig /all`and 循环，忽略所有内容，直到遇到`xxxx.net`（特定于连接的 DNS 后缀）。然后它从那里寻找`Physical Address`并`IPv4`寻址。必须从两个捕获中删除空格，并从 MAC 地址中删除破折号，所有这些都通过[变量字符串替换](http://www.dostips.com/DtTipsStringManipulation.php)。然后它会启动用户的默认 Web 浏览器来访问您构建的 URL。

如果您确实需要将此 URL 写入文本文件而不是启动，则更改

```
start http://000.000.000.00/defaulta.php?mac=%mac:-=%^&ip=%ip: =% 
```

至

```
echo http://000.000.000.00/defaulta.php?mac=%mac:-=%^&ip=%ip: =% >outfile.txt 
```

请务必在 之前放置一个空格，`>`以确保 Windows 将标准输出重定向到文本文件，而不是 IP 地址恰好以任何结尾的数字。

* * *

### 更新 2013.02.27：

无论用户访问级别（管理员或普通用户）如何，上述内容都应该有效。如果要模拟以非特权用户身份运行，请运行以下命令：

```
runas /trustlevel:0x20000 cmd 
```

...以受限权限打开 cmd 提示符。然后你可以亲眼看到它`ipconfig /all`仍然有效。

值得一提的是，`ipconfig /all`它并不是唯一可以抓取 IP 和 MAC 地址的地方。如果您想要上述脚本的替代方案，请尝试以下脚本：

```
@echo off
setlocal
for /f "tokens=1,2 delims=={}," %%I in (
    'wmic nicconfig where ^(ipenabled^='TRUE' and dnsdomain is not null^) get ipaddress^, macaddress /format:list'
) do (
    if %%I==IPAddress set ip=%%~J
    if %%I==MACAddress set mac=%%J
)
start "" "http://000.000.000.00/defaulta.php?mac=%mac::=%&ip=%ip%" 
```

和以前一样，不要忘记根据需要更改 URL 中的 IP 地址。

* * *

### 2013.03.29 更新：

好吧，因为没有其他方法适用于每台客户端计算机（因为`wmic`在 WinXP Home 上不起作用），只是为了看看我是否能做更多的事情，这里有另一个可以尝试的方法——批处理/JScript 混合脚本。用`.bat`扩展名保存它，我认为它应该适用于 98 和 ME 之后的每个 Windows 版本（如果我没记错的话，错误版）。

和以前一样，不要忘记`000.000.000.00`在 url 中替换。

```
@if (@a==@b) @end /* <-- ignore this, please

:: batch portion

@echo off
setlocal
for /f "tokens=1,2" %%I in ('cscript /nologo /e:jscript "%~f0"') do (
    set mac=%%I
    set ip=%%J
)

start "" "http://000.000.000.00/defaulta.php?mac=%mac::=%&ip=%ip%"

goto :EOF

:: JScript portion  (leave this weird bit here, please) --> */

var wmi = GetObject("winmgmts:\\\\.\\root\\cimv2");
var adapters = wmi.InstancesOf("Win32_NetworkAdapterConfiguration");
for (var res=new Enumerator(adapters); !res.atEnd(); res.moveNext()) {
    var adapter = res.item();

    /* -------------------------------------------------------------
    Note to supergaijin: If this script fails like all the others,
    try removing "|| !adapter.DNSDomain" from the following line so
    it reads as follows:  if (!adapter.IPEnabled) continue;
    ------------------------------------------------------------- */

    if (!adapter.IPEnabled || !adapter.DNSDomain) continue;
    WSH.Echo(adapter.MACAddress + ' ' + adapter.IPAddress.toArray()[0]);
} 
```

致谢：我偶然发现了`Win32_NetworkAdapterConfiguration`使用[WMI Explorer](http://www.ks-soft.net/hostmon.eng/wmi/)的课程。我想出了如何在[Scriptomatic](http://www.microsoft.com/en-us/download/details.aspx?id=12028)的帮助下查询它的子实例（这比 TechNet 文档有用得多）。

# php - Php 对金钱的计算精度为 0.01 美分

> ID：14679623
> 
> 赞同：-1
> 
> 时间：2013-02-04T02:24:12.037
> 
> 标签：php

我正在为需要计算，特别是除法的客户端构建一个 PHP 平台，以通过金钱来完成。这些计算需要精确到 0.01 美分。将货币乘以 10000 并转换为 INT 的正确方法是否正确，然后对这个数字进行计算？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-04T02:43:42.840

我建议您使用正确/实际的浮点数进行所有计算（不要投射或转换它们），然后您可以稍后使用 2 个小数精度对其进行格式化。

仅使用**number_format**或**round**来显示结果。

# javascript - Cisco IP 电话尝试使用 Javascript XMLHttpRequest

> ID：14679626
> 
> 赞同：0
> 
> 时间：2013-02-04T02:25:37.807
> 
> 标签：javascript, xml, xmlhttprequest, voip, cisco

我正在尝试编写一个网络浏览器，我可以在其中让我的 Cisco 7942 电话拨号。我正在使用 Firefox 来处理相同的来源/域问题。我没有使用网络服务器，只是直接访问手机的浏览器页面。

我不断收到 NS_ERROR_FAILURE：失败

如果我在浏览器页面中手动键入 URL，我可以访问（只是访问...不发送任何 XML 对象）电话`http://172.25.11.59/CGI/Execute`...所以我不知道。

```
document.domain = "company.com";

    var xml = new XMLHttpRequest();

            xml.open("post", "http://172.25.11.59/CGI/Execute", false);
            xml.setRequestHeader("Authorization", "Basic MTgyMjg6MTgyMjg=");
            xml.setRequestHeader('Content-Type', 'text/xml');

            xml.send('<CiscoIPPhoneExecute><ExecuteItem URL="Dial:2102263232" /></CiscoIPPhoneExecute>');

        console.log(xml.status);
        console.log(xml.responseText);
        console.log("it ran") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T07:21:12.457

Your xml.send is missing 'XML='

`'XML=<CiscoIPPhoneExecute><ExecuteItem URL="Dial:2102263232" /></CiscoIPPhoneExecute>'`

and are you sure that your authorization server returns 'AUTHORIZED'?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T11:14:26.663

我发现是思科电话仍然在拒绝我。

# python - Python文件打开一个文本文件并在文本文件中运行其他python文件

> ID：14679629
> 
> 赞同：0
> 
> 时间：2013-02-04T02:25:51.250
> 
> 标签：python, python-2.7, windows-shell

我有一个文本文件，其中有几个 python 文件的路径以及在命令提示符下运行它们时要指定的参数。

我正在寻找一个 python 脚本，它可以打开文本文件并运行文本文件中指定的 python 程序以及提供的参数。

文本文件将类似于 `C:\hello.py world

C:\square.py 5`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T02:32:10.603

我认为您应该参考以下内容：

[在 Python 中调用外部命令](https://stackoverflow.com/questions/89228/calling-an-external-command-in-python)

1.  第一步

读取命令文件中的所有行获取 python 脚本文件名和参数列表，例如：“C:\hello.py 和参数：word”

2.  第二步

以下面的代码样式调用它们

```
from subprocess import call
call(["python C:\hello.py", "word"])
...... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T03:32:01.027

我认为这篇文章不值得投反对票。但是从现在开始，我建议OP自己寻找解决方案，然后如果您在堆栈溢出中找不到答案！

```
from subprocess import call

with open("somefile.txt", 'r') as f:
    some_files_to_run = [line.split('\n')[0] for line in f.readlines()]
    for file_to_run in some_files_to_run:
        call(["python", file_to_run]) 
```

# android - 如何在 Android 中实现套接字服务器类

> ID：14679630
> 
> 赞同：0
> 
> 时间：2013-02-04T02:26:05.573
> 
> 标签：android, sockets, nested-class

我有一个包含多个活动的 android 应用程序。一个需要的类包含一个套接字连接服务器。

我决定将此服务器类作为主要活动中的嵌套子类或扩展 Service 以作为服务类在后台运行。

有人评论说该服务真的会烧掉用户的电池，我发现很难杀死一个服务类。我有时会在顶部菜单中使用通知，以便用户可以通过单击按钮来停止服务和应用程序。但是当用户这样做时，它会给出一条错误消息，看起来像是应用程序崩溃了，而且看起来不干净。

通过将套接字服务器类放在不包含 xml 布局文件的空白活动中，它可能会打开一个空白页面，该页面将失去主活动的焦点，并且看起来不太好，除非有某种方法可以解决这个问题.

另一种想法是将套接字服务器放在不扩展任何其他类的实用程序类中，并使用嵌套的广播接收器或意图将消息发送回主要活动。

另一个替代想法是将套接字服务器放在扩展应用程序的类中。

实现这个套接字服务器类的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T02:48:30.877

我们有一个（蓝牙）服务器套接字，它在专用服务的线程中运行，用户没有报告任何问题。

> 有人评论说这项服务真的可以烧掉用户的电池

在我看来，您应该“吸一口然后看看”，即除非您尝试并测试它，否则您永远不会知道。是的，有替代品，是的，它需要的额外电池不止零，但要对其进行测试并进行测量。

# python - 如何在 Matplotlib 中绘制时间 (mm:ss)（格式化输出值）

> ID：14679639
> 
> 赞同：1
> 
> 时间：2013-02-04T02:27:36.327
> 
> 标签：python, time, charts, matplotlib, plot

我正在 Python Matplotlib 中绘制以 mm:ss.tttt 格式获得的时间线图。

我已经将这些值转换回 10thousanths 秒，我可以创建一个漂亮的情节。但这意味着 Y 轴显示的值是“832323”，而不是更容易阅读的“1:23.2323”。

有什么方法可以适当地格式化输出值吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T02:27:36.327

在我写完这篇文章后不久，我自己解决了这个问题。使用 Matplotlibs 的轴，set_major_formatter() 函数。

我写了一个快速格式化函数，它会在千分之一秒内获取一个值，然后将其转换回 mm:ss.tttt。然后将此格式化程序传递给轴定义。

将“ticker”模块与绘图内容一起导入：

```
import matplotlib.pyplot as plt                                                 
from matplotlib import ticker 
```

创建自己的值格式化函数：

```
def format_10Kth_time(time, pos=None):                                          
    mins     = time // (10000 * 60)                                             
    secs     = (time - (mins * 10000 * 60)) // (10000)                          
    fracsecs = time % 10000                                                     
    return "%d:%02d.%d" % (mins, secs, fracsecs) 
```

然后在我的绘图代码中，我这样做是为了改变 Y 轴格式：

```
plt.gca().yaxis.set_major_formatter(ticker.FuncFormatter(format_10Kth_time))
plt.plot(...) 
plt.show() 
```

# ssl - SSL ASN1 编码例程和 x509 证书例程错误

> ID：14679641
> 
> 赞同：10
> 
> 时间：2013-02-04T02:28:00.213
> 
> 标签：ssl, ssl-certificate

直到昨天晚上和今天，我对任何与安全套接字层相关的东西都是全新的。我需要获得一个自签名证书才能继续进行应用程序注册过程，以便我可以在我正在编写的应用程序中实施 OAuth。[我在这里](https://help.ubuntu.com/community/OpenSSL)阅读了有关如何生成证书的不错的教程。我是 ubuntu 用户，如果你没有点击链接来解决这个问题。我一直在尝试以 PEM 格式生成一个自签名的 1024 位 RSA 密钥编码的 x.509 证书。在设置配置并按照教程中的所有操作之后（当然，将环境相关数据指定到我自己的环境中除外）。完成配置后生成新证书和密钥的命令是：

强制 SSL 在备用位置查找配置文件（服务器配置文件）：

```
export OPENSSL_CONF=~/myCA/exampleserver.cnf 
```

生成证书和密钥：

```
openssl req -newkey rsa:1024 -keyout tempkey.pem -keyform PEM -out tempreq.pem -outform     PEM 
```

在这两个命令之后，将显示以下内容：

```
Generating a 1024 bit RSA private key
...++++++
...............++++++
writing new private key to 'tempkey.pem'
Enter PEM pass phrase:
Verifying - Enter PEM pass phrase:
----- 
```

我输入我的密码，我不断得到的错误是：

```
problems making Certificate Request
3074111688:error:0D06407A:asn1 encoding routines:a2d_ASN1_OBJECT:first num too      large:a_object.c:109:
3074111688:error:0B083077:x509 certificate    routines:X509_NAME_ENTRY_create_by_txt:invalid field name:x509name.c:285:name=organizationUnitName 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2014-09-22T09:23:30.130

在遵循您提到的相同教程时，我遇到了类似的问题。就我而言，错误是：

```
problems making Certificate Request
140098671105696:error:0D07A097:asn1 encoding routines:ASN1_mbstring_ncopy:string too long:a_mbstr.c:154:maxsize=2 
```

所以我发现我写了一些应该是 2 个字符长的字符串（`maxsize=2`），但发生的时间更长。我回到我的配置文件，很快发现我写的是国家的长名称，而不是两个字符的代码。这解决了我的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T02:47:32.623

不是很熟悉这个过程，但似乎“无效的字段名称：x509name.c:285:name=organizationUnitName”意味着您的组织单位名称无效。

根据digicert.com：组织单位是贵公司订购证书的任何分支机构，例如会计、营销等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-03T12:47:50.957

这取决于您的 conf 文件中的内容，openssl ca 工具查找文件中的部分，这些部分查找其他部分，某些部分名称是强制性的，部分中的某些名称/值对是强制性的..这个文件提供了相当大的配置空间

当 openssl 在不同场景中无法识别部分内的名称时，您提到的错误就会出现，例如，当我为最终实体证书添加自定义 oid 以及自定义 ca 证书的内容时，我已经看到了它。

如果您在生成的证书中发布您的配置文件和您期望的内容，那么我们可以提供帮助。您还可以说您打算将证书用于什么用途（例如，在生产网络服务或其他东西上保护客户端会话）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-30T19:02:41.350

我有同样的问题，有 C=USA 而不是 C=US

# c - Turbo C 中的 scanf() 和浮点数

> ID：14679642
> 
> 赞同：2
> 
> 时间：2013-02-04T02:28:29.920
> 
> 标签：c, floating-point, floating-point-conversion

我创建了一个结构：

```
typedef struct {
  float real, img;
} cmplx; 
```

并创建了一个函数：

```
void input(cmplx *a){
  scanf("%f + %f i", &a->real, &a->img); } 
```

并将 main 中的函数调用为：

```
cmplx a;
input(&a); 
```

到达时停止执行`scanf`。如果将浮点数替换为整数，问题就解决了。这是什么行为？有没有办法可以使用浮点数来解决我的问题？

该程序在 Turbo C 上编译，在 MS-WINDOWS XP 中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T03:59:22.203

在不知道程序执行停止的错误消息的情况下很难回答，但是根据您的评论“我可以编写任何代码来告诉编译器链接浮点库”，我怀疑这可能是[这个问题](http://www.faqs.org/faqs/msdos-programmer-faq/part2/section-5.html)：

> “浮点格式未链接”是 Borland 运行时错误（Borland C 或 C++、Turbo C 或 C++）。Borland 的编译器尽量智能，除非您需要，否则不会在浮点 (fp) 库中链接。唉，他们都把决定弄错了。一种常见的情况是您不调用任何 fp 函数，但在 scanf() 或 printf() 调用中有 %f 或其他 fp 格式。解决方法是调用一个 fp 函数，或者至少强制一个函数出现在链接中。
> 
> 为此，请在源文件中的某处定义此函数，但不要调用它：
> 
> ```
> static void forcefloat(float *p)
> { 
>     float f = *p;
>     forcefloat(&f);
> } 
> ```
> 
> 它不必与主程序一起位于模块中，只要它位于将包含在链接中的模块中即可。
> 
> 如果您有 Borland C++ 3.0，则 README 文件记录了一个稍微不那么难看的解决方法。在您的程序中插入这些语句：
> 
> ```
> extern unsigned _floatconvert;
> #pragma extref _floatconvert 
> ```

使用此解决方法或更现代的编译器可能会解决您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T02:46:57.590

问题是使用像 TurboC 这样多年的 C 编译器，因为它对我来说很好（我正在使用 DevC++）检查[这个讨论](http://www.daniweb.com/software-development/c/threads/329012/when-scaning-float-value-in-structure-which-produce-error#)是否有类似的问题

# iphone - 停止 NSTimer 不断增加间隔

> ID：14679643
> 
> 赞同：1
> 
> 时间：2013-02-04T02:28:36.017
> 
> 标签：iphone, ios, objective-c, nstimer

我的倒数计时器有一个奇怪的问题。此计时器从设定的时间（即 60 秒）开始倒计时。这段代码放在 myViewDidLoad 方法中。除非我返回并再次加载视图，否则一切正常。每次加载视图时，倒计时都会增加 1 秒。

例如：

1.  第一次加载：60、59、58...
2.  第二次加载：60、58、56...
3.  第三次加载：60、57、54...

我的代码如下。有谁知道为什么会这样？我需要在某个地方发布一些东西吗？谢谢！

```
countDown=[NSTimer scheduledTimerWithTimeInterval:1.0 target:self 
selector:@selector(TimeOver) userInfo:nil repeats:YES]; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-04T02:34:59.453

每次加载视图时，都会创建一个新计时器，但旧计时器仍然存在。在计时器的操作方法中`TimeOver`，您正在递减一个跟踪秒数的索引变量，并且每个计时器在每次触发时都会运行该方法。因此，如果您有三个计时器，则索引将每次减少三个。

您需要在视图加载时不要创建新的计时器，或者最好在视图消失时销毁计时器：

```
[countDown invalidate];
countdown = nil; 
```

并在它重新出现时重新创建它。

另外，请注意您的计时器的操作方法具有不正确的签名。它应该是一个不返回任何内容并接受一个参数的方法，即计时器本身，如下所示：

```
- (void)timeOver: (NSTimer *)tim; 
```

[此外，Cocoa 方法不应以大写字母开头。]

# wpf - 例外 - 具有给定名称的区域已注册。如何多次调用xaml中的区域

> ID：14679651
> 
> 赞同：0
> 
> 时间：2013-02-04T02:30:06.937
> 
> 标签：wpf, xaml, mvvm, prism, cal

在 WPF 应用程序中工作时。我试图在 XAML 中多次使用一个区域。但不能获得运行时异常“具有给定名称的区域已注册：DeviceListRegion”

我正在尝试做类似的事情。

```
 <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="3*"/>
        </Grid.ColumnDefinitions>
        <ContentControl cal:RegionManager.RegionName="{x:Static Regions.DeviceListRegion}"
                    Grid.Column="0"/>
        <GridSplitter 
        ResizeDirection="Columns" 
        Grid.Column="1" 
        Width="3"
        Height="Auto"
        Background="Black"
        HorizontalAlignment="Stretch" 
        VerticalAlignment="Stretch" 
        Margin="0"/>
        <ContentControl cal:RegionManager.RegionName="{x:Static Regions.DeviceListRegion}"
                    Grid.Column="0"/>
    </Grid> 
```

我的要求是我需要在不同的 xaml 中多次调用同一个视图。这样做的正确方法是什么？

编辑：- 我的具体情况是我有 MainProject ，其中我有一个 UserControl 仅在 MainProject 中注册了 Region 并且也在那里使用。

```
<ContentControl cal:RegionManager.RegionName="{x:Static UIFramework:Regions.PropertiesRegion}" Grid.Column="2"/> 
```

现在我创建了另一个不引用主项目的项目。但我仍然想使用相同的区域“Regions.PropertiesRegion”。

```
 <TabControl>
        <TabItem Header="General">
            <ContentControl cal:RegionManager.RegionName="{x:Static UIFramework:Regions.PropertiesRegion}"/>
        </TabItem>
        <TabItem Header="Properties">
            <ContentControl cal:RegionManager.RegionName="{x:Static PwrGui:LocalRegions.AnotherRegion}"/>
        </TabItem>
  </TabControl> 
```

此代码引发异常“具有给定名称的区域已注册。”。我怎样才能做到这一点？

# c# - 安全存储密码的最佳方法

> ID：14679657
> 
> 赞同：4
> 
> 时间：2013-02-04T02:31:10.833
> 
> 标签：c#, .net, encryption, cryptography

在计算机上保存密码以使其无法访问的最佳方法是什么？我想将它们存储在加密的注册表中。我希望您能够重置密码，但这不适用于服务器。这是为了将它们存储在计算机上以记住它们并自动登录。

重要编辑：我需要能够从程序中检索纯文本密码，而不是其他任何地方。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T02:36:12.607

[CryptProtectData](http://msdn.microsoft.com/en-us/library/aa380261%28v=vs.85%29.aspx)和[CryptUnprotectData](http://msdn.microsoft.com/en-us/library/aa380882%28v=vs.85%29.aspx)是您在 Windows 上的最佳选择。他们使用登录凭据加密数据，因此密码不会受到磁盘攻击。但是，它们可以被同一用户下运行的任何程序访问。我建议将它们存储在其权限阻止其他程序访问它们的文件中（例如需要管理员权限才能访问的文件）。

托管类[ProtectedData](http://msdn.microsoft.com/en-us/library/system.security.cryptography.protecteddata.aspx)使用这些函数，因此可以从 C# 中使用。

您也可以使用 P/Invoke 直接使用这些函数。这里有一些示例代码可以做到这[一点](http://www.obviex.com/samples/dpapi.aspx)。

响应额外要求的扩展：

有一种方法可以确保您的程序是唯一能够访问密码的程序，而无需以管理员权限启动您的程序，尽管这需要更多的工作。

基本思想是这样的：您创建一个在安装应用程序时安装的 Windows 服务。当它想要存储/检索用户密码时，它应该从您的应用程序按需启动。该服务将简单地提供对具有权限设置的文件的读/写访问权限，以便只有管理员可以读/写它。额外的安全性来自于进程的 IPC 连接，该进程将使用[命名管道](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365590%28v=vs.85%29.aspx)。然后，您可以使用[GetNamedPipeClientProcessId](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365440%28v=vs.85%29.aspx)（抱歉，您需要 P/Invoke）通过查找连接到管道的客户端的进程 ID 来验证请求。

根据您对安全性的担忧程度，如果您有权访问有效证书，则可以使用代码签名来验证进程 ID。或者，您可以验证可执行文件的校验和或类似的东西。

这是我能想到的在 Windows 上创建您正在寻找的安全性的唯一方法。您的应用程序还应该使用 ProtectedData 对数据进行加密，然后再将其交给 Windows 服务以防止硬盘攻击。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-04T14:18:08.793

我相信我正在寻找的是AES。这似乎是一种存储密码的简单方法。当然，这只是为了记住计算机上的密码，因此用户不必键入它。

[http://en.wikipedia.org/wiki/Advanced_Encryption_Standard](http://en.wikipedia.org/wiki/Advanced_Encryption_Standard)

# php - 我将如何设置 smarty 模板？

> ID：14679658
> 
> 赞同：0
> 
> 时间：2013-02-04T02:31:13.707
> 
> 标签：php, mysql, smarty3

我有 Smarty 3.1 与我的网站一起使用 JUST Index.php。

现在，我将如何添加并制作联系页面？

1) 制作contact.php 并制作一个全新的模板？

2) 让它 index.php?page=contact ??

3）制作contact.php并使用模板并将变量传递给模板，使其显示联系人信息......？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T03:59:09.300

> 2) 使其成为 index.php?page=contact

更好的方法是使用集中式系统。您可以获取页面值并加载适当的模板。

例如：

```
switch ($page) {
    case "home":
        $template="home.tpl";
        break;
    case "contect":
        $template="contact.tpl";
        break;
    default:
        $template="404.tpl";
        break;
}

$smarty->display($template); 
```

# android - 打算显示一些文本？

> ID：14679659
> 
> 赞同：0
> 
> 时间：2013-02-04T02:31:14.190
> 
> 标签：android

我正在使用意图在按钮单击时显示网页：

```
link1Btn.setOnClickListener( new View.OnClickListener()
{
      public void onClick(View v)
  {
       Uri uri = Uri.parse( "http://www.youtube.com" );
       startActivity( new Intent( Intent.ACTION_VIEW, uri ) );
  } 
```

有没有办法使用意图来显示一些文本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T02:55:20.710

**发送方**

```
 linkbtn.setOnClickListener(new OnClickListener() {

        public void onClick(View v) 
        {

            Intent n = new Intent(youractivity.this,secondactivity.class);
            n.putExtra("param", "your string to pass");
            startActivity(n);   
        }
    }); 
```

**接收方**

```
TextView tv = (TextView)findViewById(R.id.textview);
Bundle extras = getIntent().getExtras();
if(extras != null)
{
   String val  = extras.getString("param");
       tv.setText(val);
} 
```

# php - 查询内连接问题

> ID：14679660
> 
> 赞同：1
> 
> 时间：2013-02-04T02:31:23.177
> 
> 标签：php, mysql, sql

我在数据库中有三个连接在一起的表。我遇到的问题是，当我搜索主键和外键以前导零开头的候选人时，查询将不会返回数据。我已经确认数据存在于数据库中。这是查询的示例。

```
SELECT *
FROM candidate_exam
INNER JOIN candidate
    ON candidate_exam.idcandidate = candidate.idcandidate
INNER JOIN exam
    ON candidate_exam.exam_id = exam.exam_id
WHERE candidate.idcandidate = '000011111'
  AND candidate.lname = 'testlastname'
  AND candidate_exam.alpha_exam_score = 'Pass' 
```

# php - 使用 AJAX 内容加载器加载成功页面内容

> ID：14679664
> 
> 赞同：0
> 
> 时间：2013-02-04T02:31:52.457
> 
> 标签：php, jquery, ajax

在我的联系表单上单击“提交”后，我想使用 AJAX 将我的内容加载`success.html`到一个 div 中（类似于我网站的其他部分），但我在确定为此使用哪个特定 AJAX/jQuery 时遇到了问题。

我正在努力：

```
$("#submitButton").click(function(){
    $("#mainImage").load("success.html");
}); 
```

但无济于事。

这是我用来将网站的其余部分加载到`#mainImage`div 中的 AJAX：

```
$("#thumbs div").click(function(){             
    var toLoad = $(this).children('a').attr('href')+' #mainImage';
    $('#mainImage').fadeOut("fast",loadContent);
    window.location.hash = $(this).children('a').substr(0,$(this).children('a').length-5);
    function loadContent() {
        $('#mainImage').load(toLoad,'',showNewContent())
    }
    function showNewContent() {
        $('#mainImage').fadeIn("1000");
    }
    return false;
}); 
```

这是我`success.html`在点击“提交”后直接访问的 PHP 表单。

```
<?php
ob_start();

if(isset($_POST['submit'])) { 
    $to =  "shubba4142@gmail.com";
    $subject = "BP Contact Form";
    $name_field = $_POST['name'];                
    $email_field = $_POST['email']; 
    $phone_field = $_POST['phone'];                            
    $message = $_POST['message'];
    $body = "From: $name_field\n E-Mail: $email_field\n Phone: $phone_field\n         Message:\n $message"; 
    $success = mail($to, $subject, $body);
}

if (mail($to, $subject, $body)){
    header("location:/BP%20SITE-SHD/success.html");
} 

else {
    header("location:/BP%20SITE-SHD/error.html");
}

?> 
```

谢谢！！

# alignment - 将标签的一部分向右对齐

> ID：14679672
> 
> 赞同：0
> 
> 时间：2013-02-04T02:32:50.647
> 
> 标签：alignment, label

我有一个标签，它的一部分需要向右对齐。

例如，如果这是文本框：

|左…………右|

如果没有简单的方法来对齐......我有一个想法，但我不确定它是否可能，但它是：

我可以通过添加每个字符的像素宽度来计算正确字符串的宽度，固定宽度的字体是理想的。有了这个，我可以计算出我需要插入的空格量，以使文本一直向右。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T02:37:26.360

```
<div style="width:200px">
  Left
  <div style="float:right;">Right</div>
</div> 
```

# javascript - TypeScript 编译错误“未知文件扩展名”

> ID：14679677
> 
> 赞同：1
> 
> 时间：2013-02-04T02:34:06.960
> 
> 标签：javascript, visual-studio-2012, typescript, tsc

我收到多个 *.ts 文件的构建错误。TypeScript 编译器说

> 文件的未知扩展名：“<*文件名*和路径 >.ts”。仅允许 .ts 和 .d.ts 扩展名。

这些文件在保存时构建良好。Web Essentials 从不抱怨任何事情，这是我在输出窗口中收到的唯一消息。我正在使用 VS 2012

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T11:18:40.967

当您从 0.8.2.0 之前的 TypeScript 版本升级时，有时您会收到这样的错误消息。错误在您的项目文件中，该文件指向编译器的错误位置。例如，它正在寻找：

```
c:\Program Files\Microsoft SDKs\TypeScript\0.8.1.1\tsc 
```

但是编译器现在位于：

```
c:\Program Files\Microsoft SDKs\TypeScript\tsc 
```

您可以[编辑您的项目文件来修复此错误](https://stackoverflow.com/questions/14665718/vs2012-project-cannot-find-output-dll-of-typescript-project-in-bin-folder)。

在您的场景中，当您使用 Web Essentials 在保存时进行编译并在此时进行所有检查时，您可以完全关闭构建时的编译。只需从项目文件中删除该部分。

# xslt - xslt 测试一组节点的值是否相等

> ID：14679681
> 
> 赞同：0
> 
> 时间：2013-02-04T02:35:01.727
> 
> 标签：xslt

给定以下xml：

```
<parameterGroup>
    <parameter value="1" name="Level0_stratum">
    </parameter>
    <parameter value="1" name="Level2_stratum">
    </parameter>
    <parameter value="1" name="Level1_stratum">
    </parameter>
    <parameter value="6" name="foo">
    </parameter>       
    <parameter value="9" name="bar">
    </parameter>    
</parameterGroup> 
```

我想派生一个布尔变量，指示所有 Level*_stratum 值的@value 是否相同，在这种情况下它们是 (1)。

到目前为止，我已经能够将所有相关节点分组如下：

```
select="//parameter[starts-with(@name,'Level') and ends-with(@name,'_stratum') ]" 
```

但我不确定比较所有@value 属性是否相等的最有效方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T14:41:51.997

如果 ends-with() 可用，那么您使用的是 XSLT 2.0，因此 distinct-values() 可用，因此您可以简单地做

```
count(distinct-values(
  //parameter[starts-with(@name,'Level') and ends-with(@name,'_stratum') ])/@value))
= 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T03:30:44.693

我相信这应该做你想做的事情（这些`value-of`行不是必需的，只是在那里显示变量的值）：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml" indent="yes" omit-xml-declaration="yes"/>

    <xsl:template match="/">
      <xsl:variable 
             name="allStrata"
             select="//parameter[starts-with(@name, 'Level') and
                                 ends-with(@name, '_stratum')]" />
      <xsl:value-of select="concat(count($allStrata), ' strata. ')"/>

      <!-- Determines whether all strata have the same values by comparing them all 
             against the first one. -->
      <xsl:variable name="allStrataEqual" 
                    select="not($allStrata[not(@value = $allStrata[1]/@value)])" />

      <xsl:value-of select="concat('All equal: ', $allStrataEqual)" />
    </xsl:template>
</xsl:stylesheet> 
```

当在上面的示例输入上运行时，结果是：

```
3 strata. All equal: true 
```

`value`在将第三个更改为 8（或其他任何内容）后在您的示例输入上运行此命令时，结果为：

```
3 strata. All equal: false 
```

# c# - 当另一个应用程序关闭时，如何调试为什么应用程序死机无异常？

> ID：14679686
> 
> 赞同：5
> 
> 时间：2013-02-04T02:36:04.877
> 
> 标签：c#, c++, .net, debugging, crash

我正在修复应用程序上的错误，这是一种数据使用者/工作者，从第三方应用程序获取数据，使用提供的 API 和库来执行此操作。它是基于 c++ 的 API，.net 应用程序使用一点 c++ 来访问库。此外 - 该应用程序是多线程的，它是窗口化的（Winforms），使用多个第三方库（nhibernate、mysql 等）。可能需要补充一点，当我们的消费者线程访问 c++ 库时，它是代码中唯一的位置。

问题？当生产应用程序关闭时（需要更多时间，超过一分钟），消费者应用程序会在几秒钟内死亡，没有错误/异常 - 即使它们是独立打开的。事件日志中没有信息，没有 Dr. Watson 操作，Visual Studio 中没有异常（调试只是停止）。

我试过了：

*   遍历代码以查看它关闭的时刻，但它总是发生在不同的地方，它是否调用了生产者的库代码。
*   使用配置为在任何异常抛出时中断的 Visual Studio 调试应用程序 - 但它会一事无成地死去。
*   创建故障转储（使用 ADPlus.vbs）并在其上使用 windbg（不过，我是这种低级调试的新手），但是 !analyze 导致了不同的堆栈跟踪 - 让我*无痕*。

找出消费者应用程序为何死亡的好方向是什么？有没有办法解决这个问题（比如向用户显示提示消息，比如：“生产者应用程序正在关闭，消费者应用程序也会这样做！”）？

[编辑]

消费者应用程序是多线程的，它是一个消费者线程，作为 UI 线程的插件。此外 - 我们作为生产者使用的第三方应用程序使用 COM 将信息发送到任何消费者应用程序（也称为附加组件）。

我和我的同事决定注释掉一些代码，以找到可能导致问题的代码。也许我们已经找到了——当且仅当我们将消费者注册到生产者时，应用程序才会死掉。看了第三方应用的文档，发现消费者应用必须主动查询关闭生产者的消息，否则会被生产者应用强行终止。

所以：95% 的问题是我们正在查询数据的第三方应用程序正在发送 COM 消息以强制终止我们的应用程序（我会将信息/更改发布到 wiki，如果我们要测试它是唯一的原因）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-04-11T08:32:44.213

此处描述的一般场景是一个非常常见的混淆和误解的来源，这些案例与人们试图理解*“我的应用程序为什么消失得无影无踪？”的案例有关。*.

直接的假设是：我的应用程序*“死亡”*或*“崩溃”*或*“遇到这种意外异常，调试器甚至看不到它，因此没有创建任何转储文件*。发生在我身上的好几次...

在大多数情况下，真正的答案是应用程序并没有真正崩溃或死亡，也没有收到任何异常，而是**只是优雅地关闭了**，但来自我没想到的流程。

调试这种情况的最简单方法是在其中放置一个断点`kernel32!ExitProcess`并跟踪堆栈，看看我们是如何到达这里的。

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T13:59:22.903

事实证明，它的主机应用程序杀死了我的应用程序。调试问题的正确方法是监视 Windows 消息并查看我的应用程序正在获取 Process Terminate 消息。

# android - 在安卓上保存文件

> ID：14679687
> 
> 赞同：2
> 
> 时间：2013-02-04T02:36:08.737
> 
> 标签：android, xml, android-file, input-buffer

我正在制作一个 xml 文件并将其保存在我的设备代码如下

```
HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost("http://xx:xx:xx:xx:yy/LoginAndroid.asmx/login");
        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
        HttpResponse response = httpclient.execute(httppost);
        String responseBody = EntityUtils.toString(response.getEntity());
        //Toast.makeText( getApplicationContext(),"responseBody:   "+responseBody,Toast.LENGTH_SHORT).show();

        //saving the file as a xml
        FileOutputStream fOut = openFileOutput("loginData.xml",MODE_WORLD_READABLE);
        OutputStreamWriter osw = new OutputStreamWriter(fOut);
        osw.write(responseBody);
        osw.flush();
        osw.close();

        //reading the file as xml
        FileInputStream fIn = openFileInput("loginData.xml");
        InputStreamReader isr = new InputStreamReader(fIn);
        char[] inputBuffer = new char[responseBody.length()];
        isr.read(inputBuffer);
        String readString = new String(inputBuffer); 
```

文件正在保存我也可以读取文件一切都很好但是看看这一行

`char[] inputBuffer = new char[responseBody.length()];`

它正在计算保存文件时保存的字符串长度。我将文件保存在一个活动中并从另一个活动中读取它，我的应用程序将在本地保存文件一次，因此我无法获得长度每次都返回字符串**那么有没有办法`char[] inputBuffer`动态分配大小？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T05:44:01.190

您可以在另一个活动中使用以下代码来读取文件。看看[BufferedReader](http://developer.android.com/reference/java/io/BufferedReader.html)类。

```
InputStream instream = new FileInputStream("loginData.xml");

// if file the available for reading
if (instream != null) {
  // prepare the file for reading

  InputStreamReader inputreader = new InputStreamReader(instream);
  BufferedReader buffreader = new BufferedReader(inputreader);

  String line;

  // read every line of the file into the line-variable, on line at the time
  while (buffreader.hasNext()) {
     line = buffreader.readLine();
    // do something with the line 

  }

} 
```

**编辑**：

上面的代码可以很好地读取文件，但是如果您只想分配`char[] inputBuffer`dynamicall 的大小，那么您可以使用下面的代码。

```
InputStream is = mContext.openFileInput("loginData.xml");
ByteArrayOutputStream bos = new ByteArrayOutputStream();
byte[] b = new byte[1024];
while ((int bytesRead = is.read(b)) != -1) {
   bos.write(b, 0, bytesRead);
}
byte[] inputBuffer = bos.toByteArray(); 
```

现在，根据需要使用 inputBuffer。

# ruby-on-rails - 如何在 Heroku 上设置自定义域

> ID：14679688
> 
> 赞同：3
> 
> 时间：2013-02-04T02:36:11.450
> 
> 标签：ruby-on-rails, heroku

我已经将 Rails 3.2 应用程序部署到 Heroku。我希望可以从[http://myapp.mydomain.com](http://myapp.mydomain.com)访问该应用程序，并希望可以从该 url 访问路由，例如[http://myapp.mydomain.com/ModelA/1](http://myapp.mydomain.com/ModelA/1)

我已按照[https://devcenter.heroku.com/articles/custom-domains上的说明进行操作](https://devcenter.heroku.com/articles/custom-domains)

当我在 Bowser 地址栏中输入[http://myapp.mydomain.com时，它成功地将我带到了应用程序。](http://myapp.mydomain.com)

但是 url 被重写为 myapp.herokuapp.com

我已经将该域添加到 Heroku `heroku domains:add myapp.mydomain.com`。

如何在整个应用程序中维护自定义域？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T02:48:02.873

这看起来像是 DNS 配置问题。您应该检查您的托管服务提供商，以确保您将站点设置为 proxy.heroku.com 的 CNAME，而不是重定向或其他任何内容。

（很高兴你能解决它！）

# c# - 如何调试大型字符串列表和多维数字数组？

> ID：14679690
> 
> 赞同：6
> 
> 时间：2013-02-04T02:36:14.150
> 
> 标签：c#, .net, debugging, visual-studio-2012, visualization

我经常使用 C# 处理大型数据集，这些数据集采用非常大的字符串列表或大型 2 或 3 维数字数组的形式。后者尤其是在 Matlab 中非常容易可视化，这是我在 C# 中经常错过的功能。

VS2012 具有非常好的调试功能，可以让您停止执行并以各种方式检查不同的变量。它还将突出显示随红色变化的变量。

不幸的是，对于列表和矩阵，这是没有用的。默认情况下，列表不会展开，如果您展开它们，单个条目的值将不可见，除非您单独展开每个条目。布局不节省空间，因此您一次只能看到几个条目。对于较大的 2D 数组，条目的排列方式使一目了然地解释数组成为一场噩梦。

对于数据集，有一个很棒的可视化工具，当您在调试模式下单击放大镜时会自动显示。不幸的是，对于字符串列表、字符串数组或二维数字数组，我找不到任何类似的东西。

执行暂停时是否有用于查看此类数据结构的扩展或隐藏功能？如果没有，我怎样才能自己制作？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-04T02:39:07.600

您可以编写自己的自定义[Visualizer](http://msdn.microsoft.com/en-us/library/e2zc529c%28v=vs.100%29.aspx)。

*   [演练：用 C# 编写可视化工具](http://msdn.microsoft.com/en-us/library/ms164759.aspx)
*   [如何：安装可视化工具](http://msdn.microsoft.com/en-us/library/sb2yca43.aspx)

还有这个：

*   [数组可视化器](http://visualstudiogallery.msdn.microsoft.com/eedc48e7-5169-40d3-b602-ad451990a420)

> Array Visualizer 是 Visual Studio 的免费开源扩展。它旨在在调试应用程序时显示 2D、3D 和 4D 阵列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-23T17:12:02.100

对我来说，Quickwatch (shift + F9) 比你在 VS 中得到的默认检查要好得多（对我来说，这将是悬停工具提示和监视窗口）。

也看看这个：[在运行时搜索对象中的值 [QuickWatch 增强]](https://stackoverflow.com/questions/5275078/search-for-a-value-in-an-object-at-runtime-quickwatch-enhancement) 使用即时窗口和 ?yourlist 应该给出你想要的。

我只是希望即时窗口会在某个时候做 linq，然后你就可以做真正的魔法了。:)

# java - JPQL 返回 NamedQuery 中的数字列表（带分组依据）

> ID：14679694
> 
> 赞同：0
> 
> 时间：2013-02-04T02:37:08.483
> 
> 标签：java, jpa, jpql, openjpa

我想创建一个查询，该查询返回存储在数据库中的实体客户端的所有 roomId。roomId 是 Client 实体中的一个属性。

我想使用这样的类型安全构造：

```
TypedQuery<Set<Long>> q = em.createNamedQuery("getRoomIdsByServer", Set.class);
q.setAttribute("server",server); 
```

但是这会产生编译错误。

NamedQuery 可能看起来像这样：

```
@NamedQuery(name = "getRoomIdsByServer", query = "SELECT c.room_id FROM Client c WHERE c.server = :server GROUP BY c.room_id") 
```

然而，这似乎超出了 JPQL 的范围。我们正在使用 openJPA（版本 2.2.1）

有一种解决方案可以在*不*使用类型化查询的情况下解决此问题，请参阅[https://stackoverflow.com/a/6956037/1448704](https://stackoverflow.com/a/6956037/1448704)
但我想使用类型化查询来防止那些讨厌的强制转换操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T05:04:38.767

无需`<long>`在您的 TypedQuery 中进行强制转换。请参阅此；

```
 TypedQuery<Set> q = em.createNamedQuery("getRoomIdsByServer", Set.class);
    q.setAttribute("server",server); 
```

或者你可以这样使用；

```
 public List<String> getAllRoomIds(String server) {
          return em.createNamedQuery("getRoomIdsByServer", Set.class).setParameter("server", server).getResultList();
     } 
```

# matlab - svrkernel 输入参数

> ID：14679695
> 
> 赞同：0
> 
> 时间：2013-02-04T02:37:10.137
> 
> 标签：matlab, regsvr32

我正在尝试在 matlab 中使用 svr。我将所有输入参数都提供给它。当我执行我得到的功能

```
??? Error using ==> mrdivide
Matrix dimensions must agree.

Error in ==> svkernel at 35
    k = exp(-(u-v)*(u-v)'/(2*p1^2));

Error in ==> svr at 40
      H(i,j) = svkernel(ker,X(i,:),X(j,:)); 
```

我检查了错误行。u 和 v 从列向量 X 和 Y 中获取值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T04:11:45.043

I finally sorted it out. SVR toolbox is generated by Steve R. Gunn has a function svKernel that uses `p1` and `p2` as global variables. But these two values are not declared anywhere in the toolbox, so it's giving an error. Just try to copy those functions into your workspace and add the values to p1 and p2.

# google-maps - 无法实例化 google.maps.Icon

> ID：14679696
> 
> 赞同：1
> 
> 时间：2013-02-04T02:37:22.243
> 
> 标签：google-maps, google-maps-api-3

我试图实例化 google.maps.Icon，

```
var icon = new google.maps.Icon({
    anchor:new google.maps.Point(0,0),
    origin:new google.maps.Point(0,0),
    scaledSize: new google.maps.Size(10,10),
    size: new google.maps.Size(10,10),
    url:"http://maps.google.com/mapfiles/kml/paddle/purple-square.png"
}); 
```

但我得到了错误，

```
Uncaught TypeError: undefined is not a function 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-04T04:27:20.307

我无法让它工作：[什么是构造接口`google.maps.Icon`](https://stackoverflow.com/questions/14407079/what-is-the-construct-interface-google-maps-icon)（[示例](http://geocodezip.com/v3_GoogleEx_icon-complex_IconA.html)）

对我来说，它适用于匿名对象：

```
 var image = {url: 'https://developers.google.com/maps/documentation/javascript/examples/images/beachflag.png',
        size: new google.maps.Size(20, 32),
        origin: new google.maps.Point(0,0),
        anchor: new google.maps.Point(0, 32)};

      var marker = new google.maps.Marker({
          position: myLatLng,
          map: map,
          icon: image,
      }); 
```

[文档中的示例](http://geocodezip.com/v3_GoogleEx_icon-complex_Icon.html)

[带有图标的示例](http://geocodezip.com/v3_GoogleEx_icon-complex_IconB.html)

**代码片段：**

```
function initialize() {
  var mapOptions = {
    zoom: 10,
    center: new google.maps.LatLng(-33.9, 151.2),
    mapTypeId: google.maps.MapTypeId.ROADMAP
  }
  var map = new google.maps.Map(document.getElementById('map_canvas'),
    mapOptions);

  setMarkers(map, beaches);
}

/**
 * Data for the markers consisting of a name, a LatLng and a zIndex for
 * the order in which these markers should display on top of each
 * other.
 */
var beaches = [
  ['Bondi Beach', -33.890542, 151.274856, 4],
  ['Coogee Beach', -33.923036, 151.259052, 5],
  ['Cronulla Beach', -34.028249, 151.157507, 3],
  ['Manly Beach', -33.80010128657071, 151.28747820854187, 2],
  ['Maroubra Beach', -33.950198, 151.259302, 1]
];

function setMarkers(map, locations) {
  // Add markers to the map

  // Marker sizes are expressed as a Size of X,Y
  // where the origin of the image (0,0) is located
  // in the top left of the image.

  // Origins, anchor positions and coordinates of the marker
  // increase in the X direction to the right and in
  // the Y direction down.
  var image = {
    anchor: new google.maps.Point(16, 32),
    origin: new google.maps.Point(0, 0),
    scaledSize: new google.maps.Size(32, 32),
    size: new google.maps.Size(64, 64),
    url: "http://maps.google.com/mapfiles/kml/paddle/purple-square.png"
  };

  for (var i = 0; i < locations.length; i++) {
    var beach = locations[i];
    var myLatLng = new google.maps.LatLng(beach[1], beach[2]);
    var marker = new google.maps.Marker({
      position: myLatLng,
      map: map,
      icon: image,
      title: beach[0],
      zIndex: Math.round(myLatLng.lat() * -100000) << 5
    });
  }
}

google.maps.event.addDomListener(window, 'load', initialize);
```

```
html,
body {
  height: 100%;
  margin: 0;
  padding: 0;
}
#map_canvas {
  height: 100%;
}
@media print {
  html,
  body {
    height: auto;
  }
  #map_canvas {
    height: 650px;
  }
}
```

```
<script src="https://maps.googleapis.com/maps/api/js"></script>
<div id="map_canvas"></div>
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-09-30T05:55:56.847

google.maps.Icon 是一个 Javascript 对象文字，而不是一个类。直到 5 分钟前，当我试图解决同样的问题时，我才知道这一点。

谷歌地图 API 文档：

[https://developers.google.com/maps/documentation/javascript/overlays#ComplexIcons](https://developers.google.com/maps/documentation/javascript/overlays#ComplexIcons)

举一个从不推荐使用的 MarkerImage (v3.9) 转换为 Icon (v3.10+) 的示例

```
var image = new google.maps.MarkerImage(
    place.icon,
    new google.maps.Size(71, 71),
    new google.maps.Point(0, 0),
    new google.maps.Point(17, 34),
    new google.maps.Size(25, 25)); 
```

变成

```
var image = {
    url: place.icon,
    size: new google.maps.Size(71, 71),
    origin: new google.maps.Point(0, 0),
    anchor: new google.maps.Point(17, 34),
    scaledSize: new google.maps.Size(25, 25)
}; 
```

所以艾伦（和我）试图使用一个`new google.maps.Icon()`不存在的构造函数。只需删除该文本离开`var icon = {<list of properties>};`，一切都应该工作。

谷歌 API 参考：

[https://developers.google.com/maps/documentation/javascript/reference#Icon](https://developers.google.com/maps/documentation/javascript/reference#Icon)

并没有使这很明显。

我还自学了对象文字 - 你可以在 mozilla 找到解释 - 搜索 javascript 对象文字 - 我无法发布链接，因为这是我在堆栈交换上给出的第一个答案，我需要更多点来添加两个以上的链接！

# c# - 使用 WPF 在 VLC 中覆盖文本

> ID：14679698
> 
> 赞同：-1
> 
> 时间：2013-02-04T02:37:52.840
> 
> 标签：c#, wpf, vlc

我正在创建一个使用 WPF 显示歌词的程序。我想使用视频作为背景（使用 VLC 播放器）。如何在视频背景上叠加歌词？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T02:55:09.243

这可能无法直接在 WPF 中实现。我假设您需要一个 WinformsHost 来托管 VLC 播放器。WPF 控件和 winform 不能共享相同的屏幕区域（空域限制）是一个已知问题（限制）。但是，有许多解决此限制的方法，其中之一是添加 2 个重叠的 WPF 窗口。

或者，您可以尝试升级到 WPF 4.5（使用 VS-2012），这个问题似乎已经解决了。

读：

[https://msdn.microsoft.com/en-us/library/aa970688(v=vs.100).aspx](https://msdn.microsoft.com/en-us/library/aa970688(v=vs.100).aspx)

[http://bartwullems.blogspot.in/2010/11/wpf-and-winforms-airspace-problem.html?m=1](http://bartwullems.blogspot.in/2010/11/wpf-and-winforms-airspace-problem.html?m=1)

# android - 如何根据android简单代码自动启用蓝牙？

> ID：14679699
> 
> 赞同：0
> 
> 时间：2013-02-04T02:38:11.780
> 
> 标签：android

这是我正在尝试使用的代码。你能告诉我它有什么问题吗？

我的代码：

```
 public void onStart() {
    super.onStart();
    if(D) Log.e(TAG, "++ ON START ++");
        BluetoothAdapter mBluetoothAdapter = BluetoothAdapter.getDefaultAdapter();
          if (!mBluetoothAdapter.isEnabled()) {

          }else{
               mBluetoothAdapter.enable(); 
          } ;
    } {
        if (mChatService == null) setupChat();

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T02:51:51.997

你有什么问题？我的猜测是您需要将 BLUETOOTH 和 BLUETOOTH_ADMIN 权限添加到您的应用程序中。

请注意，首选的解决方案是使用意图来提示用户是否要启用蓝牙：

```
 Intent enableIntent = new Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE);
        startActivity(enableIntent); 
```

另请注意，调用`enable`是异步的，它会立即返回并在后台启用蓝牙。因此，蓝牙实际上可能尚未启用，它可能仍在准备中。另请参阅[有关蓝牙的 Android 指南](http://developer.android.com/guide/topics/connectivity/bluetooth.html)

**编辑**添加禁用/等待/启用/等待示例代码

这是请求蓝牙关闭，然后等待它打开的示例代码。它**必须**在单独的线程中运行，而**不是**在 UI 线程中。可以将其封装在一个`Runnable`Class 中，`volatile`如果它成功完成，则将（最好）标志设置为 true。

**注意：** 已知此示例代码在一些不允许从用户应用程序调用 diable/enable 的旧设备上存在问题。

```
 BluetoothAdapter.getDefaultAdapter().disable();
            while (BluetoothAdapter.getDefaultAdapter().isEnabled())
            {
                try
                {
                    Thread.sleep(100L);
                }
                catch (InterruptedException ie)
                {
                    // unexpected interruption while disabling Bluetooth
                    Thread.currentThread().interrupt(); // restore interrupted flag
                    return;
                }
            }
            // disabled, re-enabling Bluetooth
            BluetoothAdapter.getDefaultAdapter().enable();
            while (!BluetoothAdapter.getDefaultAdapter().isEnabled())
            {
                try
                {
                    Thread.sleep(100L);
                }
                catch (InterruptedException ie)
                {
                    // unexpected interruption while enabling bluetooth
                    Thread.currentThread().interrupt(); // restore interrupted flag
                    return;
                }
            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-29T09:47:21.600

```
public class MainActivity extends Activity
{
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        BluetoothAdapter mBluetoothAdapter = BluetoothAdapter.getDefaultAdapter();    
        if (mBluetoothAdapter.isEnabled()) {
            mBluetoothAdapter.disable(); 
        } 
        else(!mBluetoothAdapter.isEnabled()) {
             mBluetoothAdapter.enable(); 
        }
    }
} 
```

# ajax - Web 服务 Ajax 返回 HTML

> ID：14679701
> 
> 赞同：1
> 
> 时间：2013-02-04T02:38:37.123
> 
> 标签：ajax, vb.net, web-services, streamreader

嘿，我想弄清楚为什么我无法从我的网络服务中获取任何返回的 HTML。

这是我调用 WS 的 javascript：

```
function getTVGuide(whatsBeingSent) {
jQuery.support.cors = true;

$.ajax({
    crossDomain: true,
    async : true,
    type: "POST",
    url: "http://192.168.9.7/Service.asmx/getTVGuideData",
            data: '',
            contentType: "application/json",
        dataType: "json",
        success: OnSuccessCallTVGuide,
        error: OnErrorCallTVGuide
    });      
}

    function OnSuccessCallTVGuide(response) {
    console.log(response.d);
}

function OnErrorCallTVGuide(response) {
    console.log('ERROR: ' + response.status + " " + response.statusText);
} 
```

WS 是这样的：

```
<WebMethod()> Public Function getTVGuideData() As String
    Try
        Dim sr As StreamReader = New StreamReader("c:\tvlistings.html")
        Dim line As String = ""

        line = sr.ReadToEnd()
        sr.Close()
        Return "done"
    Catch Ex As Exception
        Return "err" 'Ex.Message
    End Try
End Function 
```

如果我只返回“DONE”之类的东西，那效果很好。

但是，如果我尝试返回**线路**，则它不再有效。给出错误：

```
ERROR: 500 Internal Server Error 
```

我尝试将 AJAX 中的返回值更改为：

```
contentType: "application/html",
dataType: "html", 
```

并且

```
contentType: "application/text",
dataType: "text", 
```

但我仍然得到同样的错误......

我可能做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T10:04:42.383

ERROR: 500 Internal Server Error 表示服务中有一些内部异常。由于 CustomError ON 和 customError 模块返回在 IIS 中配置的 HTML 页面，您可能会获取 HTML 内容。CustomError 模块会将 Content-type 更改为 text/HTML。

HTH，阿米特

# javascript - 是否有任何 javascript 库可以将 HTML 转换为印象笔记的 ENML？

> ID：14679702
> 
> 赞同：2
> 
> 时间：2013-02-04T02:38:56.593
> 
> 标签：javascript, evernote

我很惊讶evernote为什么不提供正式版的ENML转换工具。

即使是 ENML 在线验证对开发人员来说也很好，而不仅仅是一个简单的 dtd。

所以我正在寻找一个用于 ENML 的 js lib 转换器。

曾尝试使用[https://code.google.com/p/jquery-clean/](https://code.google.com/p/jquery-clean/)，但遇到了`<pre> / <code>`标签问题，似乎有一些错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-20T18:30:23.210

This library works well for me [https://github.com/wanasit/enml-js](https://github.com/wanasit/enml-js)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-30T18:01:24.327

在发现没有完全支持我需要的库之后，我编写了[enml2thml 。](https://github.com/flotemaha/node-html2enml)看看它是否适合你。

# objective-c - 在不同 CCSpriteBatchNode 的精灵之间插入 CCParticleSystemQuad

> ID：14679703
> 
> 赞同：0
> 
> 时间：2013-02-04T02:39:02.990
> 
> 标签：objective-c, cocos2d-iphone, kobold2d

我目前在 Cocos2d 场景中有几层（在 Kobold2d 中运行）。每层都有一个附加的精灵批处理节点。我需要使用批处理节点，因为我一次在屏幕上拥有大量可笑的精灵。一切正常，我已经设置了一个小粒子系统。我遇到的问题是 CCParticleBatchNode 粒子发射器总是在一切之上（因为它是 zOrder 的最高层） - 但这是一个等距游戏，显然不起作用。

有没有一种方法可以让我在包含 CCSpriteBatchNode 的任何层上的精灵之间偷偷摸摸发射器？我尝试过使用 vertexZ（我使用的是最新版本的 cocos2d 2.+），但不管我做什么，它似乎都没有改变任何东西，即使 Kobold2d 的 LUA 文件会启用此项已正确设置，并且我的批处理节点上的 programForKey:kCCShader_PositionTextureColorAlphaTest 的着色器已启用 - 但这也许不是最好的解决方案？

有没有人遇到过这样的事情或建议我可以做出的任何牺牲或我可以做的我没有想到的技巧？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T05:23:23.260

要使用 vertexZ，您需要启用深度缓冲（参见 config.lua）。Vertexz 是改变 spritebatches 和其他节点之间绘制顺序的唯一方法。

# java - 推荐用于重写类文件以更改字段类型的字节码操作库？

> ID：14679704
> 
> 赞同：2
> 
> 时间：2013-02-04T02:39:04.930
> 
> 标签：java, bytecode, java-bytecode-asm, bytecode-manipulation

我正在寻找一种从现有文件生成类文件的方法，同时允许我用另一种类型替换字段的类型。

考虑这个示例片段，我想在其中每次使用`int bar`...

```
class Foo {
  private final int bar;

  public Foo(int bar) {
    this.bar = bar;
  }

  public int getBar() {
    return bar;
  }

  public static int of(int bar) {
    return new Foo(bar);
  }
} 
```

， `long bar`像这样：

```
class Foo_Long {
  private final long bar;

  public Foo_Long(long bar) {
    this.bar = bar;
  }

  public long getBar() {
    return bar;
  }

  public static Foo_Long of(long bar) {
    return new Foo_Long (bar);
  }
} 
```

我研究了多个字节码操作库，如 cglib、javassit 和 ASM，但它们似乎都专注于添加成员或用现有的不同方法体替换一个方法体。

有没有提供类似...的图书馆

```
byte[] rewriteFieldWithType(Class klazz,
                            Field field,
                            Class type,
                            String newClassName) { ... }

Field field = Foo.class.getDeclaredField("bar");
byte[] newClass = rewriteFieldWithType(Foo.class,
                                       field,
                                       java.lang.Long.TYPE,
                                       "Foo_Long"); 
```

...以一种万无一失的方式？或者我是否需要实现所有丑陋的东西，比如修复元数据和替换方法主体中的不同字节码指令，例如`iload`手动`lload`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T04:02:51.553

我不相信您会找到用于这种特定字节码转换的框架。由于您提到了 ASM 和其他字节码操作框架，它们都是通用框架并且允许实现任何转换。

使用 ASM，实际转换看起来比您预期的要简单得多，例如，您可以使用[Type.getOpcode()](http://asm.ow2.org/asm40/javadoc/user/org/objectweb/asm/Type.html#getOpcode%28int%29)来获取新类型的指令操作码。

此外，要跟踪堆栈或本地变量中的值的来源，您可以使用ASM[分析包中的](http://asm.ow2.org/asm40/javadoc/user/org/objectweb/asm/tree/analysis/package-summary.html)[SourceInterpreter](http://asm.ow2.org/asm40/javadoc/user/org/objectweb/asm/tree/analysis/SourceInterpreter.html)。

# testing - 谁应该编写任务的变更日志？开发人员还是测试人员？

> ID：14679706
> 
> 赞同：1
> 
> 时间：2013-02-04T02:39:16.330
> 
> 标签：testing, project-management, agile, scrum, changelog

我在一家维护一些产品的软件公司工作。

我们使用“bugtracker”来管理与相关产品相关的所有任务。

我们和 Scrum 一起工作，公司的套路基本是这样的：

1.  客户联系支持并请求解决问题或实施功能。
2.  产品的所有者按优先级顺序对任务进行分组，并将它们引导到 Sprint。
3.  开发人员完成任务，最终需要填写一种“变更日志”。
4.  测试人员确保开发人员的编码正确完成并结束通话。

这是我的问题：

开发人员不喜欢填写“变更日志”，通常会忘记填写。

这是我的问题：

谁应该完成“变更日志”？开发人员和测试人员？

这个“变更日志”在每个 Sprint 结束时发送给最终客户，主要用于以非技术性的方式解释在软件中已解决或实现的内容。

然后，谁应该做呢？开发人员和测试人员？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T11:59:01.853

这不是一个 Scrum 问题，它读起来像一个过程问题。我是否还可以说 Scrum 并不适合维护工作，在这种情况下您可能会更好地尝试看板？

也就是说，尽管 Scrum 不包含对变更日志工件的任何引用，但我想说确保更新变更日志是团队的责任（而不是任何一个开发人员或测试人员）。作为提醒，团队可能需要考虑将此要求添加到他们的“完成定义”中。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T03:00:09.560

找出最适合您的团队的方法。开发人员/测试人员直接与客户交流似乎很奇怪。我希望这是最初与客户联系的支持团队的角色。

正如您在评论中所说，他们可能会拖拖拉拉，因为这不是他们擅长的，因此他们不喜欢这样做。

有几件事可以尝试：

*   把每个人都放在一个房间里，然后说出来（如果人太多就行不通了——也许只是让部门负责人）。我们需要这个来完成，它没有完成，为什么不呢？谁知道如何解决这个问题？
*   我不确定为什么客户甚至需要描述更改的内容 - 我正在描绘“我们如何修复它”的情况。谁在乎如何，只是它是固定的。我的意思是重新检查是否有必要 - 也许有一个更合适的替代品。
*   尝试自动化它。如果客户确实需要手持说明如何修复它并且他们真正需要知道的是它已修复，也许您可​​以自动化您的错误跟踪工具，以便在该票关闭时通知报告问题的客户- 或者更确切地说，当它为客户部署并明显固定时。

最大的建议是不要让这成为指责游戏的情况。你的同事不是不讲道理的人——如果他们有抵抗力，那么也许这个过程太繁重了。对替代解决方案持开放态度。

仅供参考 - 这种问题可能会在 pm.stackexchange.com 上做得更好

# objective-c - 多行重复块的多个正则表达式匹配

> ID：14679708
> 
> 赞同：0
> 
> 时间：2013-02-04T02:39:37.747
> 
> 标签：objective-c, regex

**更新 0**

我在下面添加了代码`for (... match in)`。

**更新 0**

我的源文本大约每 40 行重复一次。下面我为下面的 2 次重复显示 8 行。[完整的数据集在这里](http://www.atlantaduplicatebridgeclub.com/scorepost/2013/01/20130126ana.pbn)。我需要“[Board]”行中引号之间的一位或两位数；从“[经销商]”行我需要引号之间的单个字母。

```
[Board "1"]
[Dealer "N"]
[Vulnerable "None"]
[Deal "N:Q952.652.KJT4.95 T.KQT84.A865.J73 K8763.A7.Q.KQT84 AJ4.J93.9732.A62"]
[Scoring ""]
[Declarer ""]
[Contract ""]

[Board "2"]
[Dealer "E"]
[Vulnerable "NS"]
[Deal "E:K8542.3.4.AT7532 J76.K7.AT85.KQJ8 QT3.AJ84.KJ963.4 A9.QT9652.Q72.96"]
[Scoring ""]
[Declarer ""]
[Contract ""] 
```

以下正则表达式有效，但只选择一个匹配项，而不是我文本中的 30 多个匹配项。

```
NSString *toMatch = @"\\[Board \"([0-9][0-9]?)\"\\].*\\[Dealer \"([NEWS])\"\\]";
NSRegularExpression *regex = [NSRegularExpression  regularExpressionWithPattern:toMatch options:NSRegularExpressionDotMatchesLineSeparators error:&error];
for (NSTextCheckingResult* match in [regex matchesInString:string options:NSRegularExpressionDotMatchesLineSeparators range:NSMakeRange(0, [string length])])
    {
        NSLog(@"Number of ranges in match: %u", match.numberOfRanges);
        for (NSUInteger i = 0; i < match.numberOfRanges; ++i)
        {
            NSRange matchedRange = [match rangeAtIndex: i];
            NSString* tstring = [string substringWithRange: matchedRange];
            NSLog(@"range %lu string: %@", (unsigned long)i, tstring);
        }
    } 
```

我怀疑问题出在换行符中，但我不知道如何解决它和 options 。这是这个[问题](https://stackoverflow.com/questions/14674787/gobbledygook-from-regex-with-capture-group)的延续。

如何修复正则表达式模式以获取多个匹配项？

（此外，我需要在“[Deal]”行中添加以下内容，但我们暂时忽略它。我需要四个单独的组，第一个在“：”之后和空格之前，第二个和第三个在空格之间，最后一个是最后一个空格之后和引号之前的所有内容。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T03:48:46.607

我可能是错的，但我认为你的模式中的问题是你有`.*` *并且*你已经选择`NSRegularExpressionDotMatchesLineSeparators`了，所以`.*`它将匹配*所有内容*，直到它到达`[Dealer`源文本中的最后一次出现。

您可以使用 将`.*`转换为“非贪婪”版本`.*?`，或者您可以完全避免使用`.*`并替换它`\\n`（假设您的输入用单个 分隔`\n`）。请注意，为了让正则表达式编译器看到`\`and `n`（这是与换行符匹配的公认转义序列），您必须`\`在 NSString 中转义，因此您必须使用`\\n`，即：

```
NSString *toMatch = "\\[Board \"([0-9][0-9]?)\"\\]\\n\\[Dealer \"([NEWS])\"\\]"; 
```

如果您的源文本有 Windows 行尾，您可以`\\r\\n`改用，等等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T02:50:41.183

试试这个（未转义）模式：

```
\[(\w+)\s+\"([^\"]*)\"\] 
```

第一组是标签名称，第二个匹配组是引号之间的内容，无论它是什么。您可能能够在代码中分别使用`\1`和捕获这些值。`\2`

# php - 为什么表格没有被转发到提到的页面

> ID：14679709
> 
> 赞同：-1
> 
> 时间：2013-02-04T02:40:20.070
> 
> 标签：php, forms

我有一个名为 abc.php 的页面

```
<?php include("CommonToSignedPage.php")?>
<div class="backgroundbox">
<div id="content">
<div id="menu">
      <?php include("menu.php");?>
</div> 
<div id="contentBody">

<form action"xyz.php" method="post">

     First Name<input class="reviewTextBoxes" type="text" name="firstName" />

     Last  Name<input class="reviewTextBoxes" type="text" name="lastName" />

               <input type="submit" class="buttonn" value="submit"/>

</form>

</div> <!--end of contentBody-->   
</div><!--end of  content-->
</div><!--end of backgroundbox--> 
```

现在提交此表单后，该页面不会转发到 xyz.php，而是继续显示同一页面（abc.php）。我尝试在表单的操作字段中放置许多不同的页面名称，但它们都没有工作。我有以前从未遇到过这样的问题

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T02:41:11.787

您没有正确使用属性。你忘了`=`...

```
<form action="xyz.php">
<!--        ^       --> 
```

为空时的默认`action`属性是它本身。这就是您的页面提交给自身的原因。

# asp.net - 参数化查询是避免sql注入的唯一方法吗？

> ID：14679711
> 
> 赞同：0
> 
> 时间：2013-02-04T02:40:34.893
> 
> 标签：asp.net

除了参数化查询之外，有没有一种方法（特别是使用 ASP.net 工具）来避免 sql 注入？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T02:46:06.063

最简单的方法之一就是我所说的消毒。就`Replace( vsInputString, "'", "''")`在构造 SQL 语句时：

```
Dim vsSQLStatement = "SELECT * FROM table01 WHERE myField = '" & Replace(vsFormTextInput, "'", "''" ) & "';" 
```

也将有助于阻止 SQL 注入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T15:12:33.693

是的当然。除了参数化查询，您还应该考虑这些：

1.  使用存储过程
2.  使用受限访问帐户连接到数据库（不是管理员级别）
3.  加密 ConnectionString 和其他敏感数据
4.  设置 debug=false（在 customError 中）以最小化发生错误时的信息

我希望它对你有帮助。

# android - Android sdk 4.2 和 cordova 2.3 模拟器问题

> ID：14679715
> 
> 赞同：1
> 
> 时间：2013-02-04T02:41:54.447
> 
> 标签：android, cordova, android-emulator

我已经安装在 mac lion Android sdk 4.2 和 phonegap cordova 2.3 上。eclipse Indigo，使用科尔多瓦的设置我创建了一个项目。我没有做任何更改我收到一个错误 [2013-02-02 21:34:46 - And2] 无法在设备 'emulator-5554 上安装 And2.apk！[2013-02-02 21:34:46 - And2] (null) [2013-02-02 21:34:46 - And2] 发射取消！

接下来我在 windows 7 Android 4.2、eclipse Indio、cordova 2.3 上安装，我使用 cordova 标准方式创建一个项目（没有做任何更改）我在它运行的模拟器上运行项目，很酷，下次（之后的任何时间）我运行在设置 WebViewCore 之前，我收到错误 webcore EventHub.removeMessages (int what = 107) is not supported。

问题是什么 ？我只是无法继续，有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T02:54:28.223

我不知道这是否有帮助，但我建议使用 android sdk 2.3。大多数手机似乎至少在运行这个

# c++ - C++11：普通字符串文字和 UTF-8 字符串文字之间的区别示例？

> ID：14679717
> 
> 赞同：7
> 
> 时间：2013-02-04T02:42:18.163
> 
> 标签：c++, utf-8, character-encoding, c++11, string-literals

> 不以编码前缀开头的字符串文字是普通的字符串文字，并使用给定的字符进行初始化。
> 
> 以 u8 开头的字符串文字，例如 u8"asdf"，是 UTF-8 字符串文字，并使用以 UTF-8 编码的给定字符进行初始化。

我不明白普通字符串文字和 UTF-8 字符串文字之间的区别。

有人可以提供一个他们不同的情况的例子吗？（导致不同的编译器输出）

（我的意思是从标准的 POV，而不是任何特定的实现）

> 字符文字或字符串文字中的每个源字符集成员，以及字符文字或非原始字符串文字中的每个转义序列和通用字符名称，都将转换为执行字符集的相应成员。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-04T03:06:19.073

C 和 C++ 语言在其实现中允许有很大的自由度。C 语言早在 UTF-8 成为“以单字节编码文本的方式”之前就已经编写好了：不同的系统有不同的文本编码。

因此，C 和 C++ 中字符串的字节值实际上取决于编译器。 `'A'`是编译器为 character 选择的编码`A`，它可能与 UTF-8 不一致。

C++ 增加了编译器必须支持真正的 UTF-8 字符串文字的要求。的位值`u8"A"[0]`由 C++ 标准通过 UTF-8 标准固定，与编译器所针对的平台的首选编码无关。

现在，就像大多数平台 C++ 目标使用 2 的补码整数一样，大多数编译器都具有大多数与 UTF-8 兼容的字符编码。`"hello world"`所以对于像,这样的字符串`u8"hello world"`几乎可以肯定是相同的。

举一个具体的例子，从`man gcc`

> -fexec-charset=字符集
> 
> 设置执行字符集，用于字符串和字符常量。默认值为 UTF-8。charset 可以是系统的 iconv 库例程支持的任何编码。
> 
> -finput-charset=字符集
> 
> 设置输入字符集，用于从输入文件的字符集转换为 GCC 使用的源字符集。如果 locale 没有指定，或者 GCC 无法从 locale 中获取此信息，则默认为 UTF-8。这可以被语言环境或此命令行选项覆盖。目前，如果存在冲突，命令行选项优先。charset 可以是系统的 iconv 库例程支持的任何编码。

是能够更改 C/C++ 的执行和输入字符集的示例。

# mysql - 选择其他表不包含类似记录的查询

> ID：14679722
> 
> 赞同：2
> 
> 时间：2013-02-04T02:43:17.800
> 
> 标签：mysql, sql, select

我需要有关此查询的帮助...

```
SELECT FIRST_NAME, LAST_NAME, test.EMAIL 
      FROM test
INNER JOIN suppression ON suppression.EMAIL = test.EMAIL
AND NOT EXISTS (select * from suppression) 
```

我想要表“test”中的所有记录，其中表“suppression”不包含类似的记录。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T02:44:45.233

采用`LEFT JOIN`

```
SELECT  a.*
FROM    test a
        LEFT JOIN suppression 
            ON suppression.EMAIL = a.EMAIL
WHERE   suppression.EMAIL IS NULL 
```

要全面了解联接，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codeproject.com/Articles/33052/Visual-Representation-of-SQL-Joins)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-04T02:44:14.693

我个人更喜欢这种`LEFT JOIN` `IS NULL`方法，但这里有一个替代方法`NOT EXISTS`：

```
SELECT FIRST_NAME, LAST_NAME, EMAIL 
FROM test
WHERE NOT EXISTS (SELECT * FROM suppression WHERE email = test.email) 
```

也不能真正离开`NOT IN`：

```
SELECT FIRST_NAME, LAST_NAME, EMAIL 
FROM test
WHERE Email NOT IN (SELECT Email FROM suppression) 
```

祝你好运。

# ios - 如何防止uiwebview访问服务器

> ID：14679724
> 
> 赞同：0
> 
> 时间：2013-02-04T02:43:22.007
> 
> 标签：ios, webview

我调用 loadData:MIMEType:textEncodingName:baseURL: 将内容加载到 web 视图中。在 webView:shouldStartLoadWithRequest:navigationType 我必须返回 Yes，否则 webview 不会显示内容。但我已经有了数据，所以我不需要 webview 来真正访问 baseURL。我能做些什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T02:52:19.937

它不会访问 baseURL。该参数用于您提供的网页内的相对 URL。如果没有相对 URL，则 baseURL 甚至可以为零。但是，如果有*相对*URL（例如`<img>`标签），那么 Web 视图当然必须从其他地方获取它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T14:23:08.950

我终于找到了原因。我有一个空白 src。

# wordpress - WordPress父页面和子页面上的自定义CSS

> ID：14679725
> 
> 赞同：3
> 
> 时间：2013-02-04T02:43:29.590
> 
> 标签：wordpress, wordpress-theming

相信我，我已经连续几天寻找这个问题的答案。我相信答案很简单，但我无法让它发挥作用。我会尽量具体。

我已经学会了如何为特定的 WordPress 页面设置 CSS，但是我需要为 WordPress 父页面及其子页面设置 CSS。虽然可以通过将每一页都包含到我的代码中来完成，但我知道必须有一种更有效的方法，因为我在每个父页面下有大约 20 页。

我正在寻找的一个例子可以在这里找到：（原始网站） [www.viewmonthealth.com](https://www.viewmonthealth.com/)

我试图做到这一点的地方：[www.notthemama.net/prime/](http://notthemama.net/prime/)

每个主链接都指向具有单独 css 的不同部分。

这是我所拥有的：

```
<?php if (is_page('imaging')) { ?>
    <link rel="stylesheet" href="<?php bloginfo('template_url'); ?>/viewmont-imaging.css" type="text/css">
<?php } elseif (is_page('labs')) { ?>
    <link rel="stylesheet" href="<?php bloginfo('template_url'); ?>/viewmont-labs.css" type="text/css">
<?php } else { ?>
    <link rel="stylesheet" href="<?php bloginfo('stylesheet_url'); ?>" type="text/css" />
<?php } ?> 
```

这非常适用于页面。我只需要包含父页面（我现在拥有的）和子页面（imaging/forms.php）。我怎样才能做到这一点？任何帮助表示赞赏！:D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T05:55:34.547

您可以尝试使用父 ID 做一些事情

```
function is_child($pageID) { 
    global $post; 
    if( is_page() && ($post->post_parent==$pageID) ) {
               return true;
    } else { 
               return false; 
    }
} 
```

把它放在你的函数中，然后

```
<?php if (is_child(12)) { ?>
    <link rel="stylesheet" href="<?php bloginfo('template_url'); ?>/viewmont-imaging.css" type="text/css">
<?php } elseif (is_child(14)) { ?>
    <link rel="stylesheet" href="<?php bloginfo('template_url'); ?>/viewmont-labs.css" type="text/css">
<?php } else { ?>
    <link rel="stylesheet" href="<?php bloginfo('stylesheet_url'); ?>" type="text/css" />
<?php } ?> 
```

希望这就是你要找的。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-07T14:58:45.423

更精简的方法是使用以下条件检查，实际上不需要自定义函数：

```
if ( $post->post_parent == 2 ) { ?>
    <link rel="stylesheet" href="<?php bloginfo('template_url'); ?>/viewmont-imaging.css" type="text/css">
<?php } ?> 
```

# vbscript - VBScripting 错误，预期然后预期结束？

> ID：14679726
> 
> 赞同：0
> 
> 时间：2013-02-04T02:43:34.540
> 
> 标签：vbscript

我在使用 VBScript 时遇到了各种各样的问题。它似乎起源于 If Then 语句。这是代码...

```
Option Explicit
Dim User, Pass

User=InputBox("Username")
If User = Guest then
 msgbox "hi" 
```

它只是不起作用，它给了我错误代码 800A03F6 我需要做什么来解决这个问题？错误在第 6 行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T05:58:34.117

无论是这个......

```
Option Explicit
Dim User
User = InputBox("Username")
If User = "Guest" then
  MsgBox "hi"
End If 
```

或者 ...

```
 Option Explicit
    Dim User
    User = InputBox("Username")
    If User = "Guest" then MsgBox "hi" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T02:50:06.837

您正在尝试将字符串用作变量，但它不是一个（至少从您发布的代码中）。`Guest`根本没有声明。您需要引用字符串。

试试这个：

```
User = InputBox("Username")
If User = "Guest" then
  MsgBox "hi" 
```

# sql - 返回自动生成的列值

> ID：14679731
> 
> 赞同：1
> 
> 时间：2013-02-04T02:44:03.197
> 
> 标签：sql, sql-server-2008

我需要在数据库中创建一个新员工，并且需要使用自动生成的 EmployeeID。

找不到程序需要编写的方式并在我的 c# 代码中使用自动生成的值。

请帮帮我谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T02:52:35.507

SCOPE_IDENTITY() 函数返回当前 SQL 执行范围内最近创建的标识值，并且是在刚刚执行 INSERT 的存储过程中查找 ID 的推荐方法。

```
INSERT INTO YourTable(col1, col2) VALUES "abc", "xyz";

SELECT SCOPE_IDENTITY(); 
```

您可以将存储过程中的值返回给您的 C# 客户端 1) 通过使用 SELECT（如上所述）作为数据集，或者，2) 作为存储过程的返回值，或者 3) 通过将其传递回 OUTPUT在存储过程中声明的参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T03:01:14.220

像这样 ：

```
using (var connection = new SqlCeConnection(Settings.Default.Database1ConnectionString))
    using (var command = connection.CreateCommand())
    {
        connection.Open();

        command.CommandText = @"
            INSERT Test (Name)
            VALUES (@TestName)
            ";
        command.Parameters.AddWithValue("TestName", "SomeName");
        command.ExecuteNonQuery();

        command.CommandText = "SELECT SCOPE_IDENTITY()";
        int id = command.ExecuteScalar();
    } 
```

# performance - 获取节点邻居之间的所有关系

> ID：14679737
> 
> 赞同：1
> 
> 时间：2013-02-04T02:44:47.720
> 
> 标签：performance, neo4j, cypher

我有一个节点（推特用户）和有向边（跟随）的嵌入式图形数据库。

我正在尝试获取指定用户（节点 U）之后的用户（集合 A）之间的所有关系。`A`还有 in 中的节点与指定节点之间的关系`U`。

我的查询：

```
START u=node:user_id(user_id={id_of_U})
MATCH p = u-->following, p2= following-[?]->u, p3 = following-[?]->()<--u
RETURN distinct rels(p),rels(p2),rels(p3) 
```

这个查询给了我我的期望，但问题是，当指定的用户关注太多用户时，它需要很长时间。

我尝试了很多查询，上面的查询是迄今为止最好的查询。然而，我确信有更有效的方法可以做到这一点，因为当我通过遍历“A”中的所有用户来获取这些关系时，获取每个用户的所有关系（Direction.BOTH），然后过滤与“A”的关系（删除具有不属于“A”的开始或结束节点的关系），跟踪 500 人的用户只需 8 秒，而密码查询甚至不会在不炸毁我的堆的情况下失败...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T04:49:12.727

你可以试试这个吗？

```
start u=node:user_id(user_id={id_of_U})
MATCH u-[r]->following
with u, r, following
match following-[r2?]->u, following-[r3?]->()<-[r4]-u
RETURN distinct r, r2, r3, r4 
```

另外，你用的是最新的1.9吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T13:06:34.467

开始`p = u-->following`不是最佳选择，因为它需要所有相关节点，然后您尝试过滤这些节点。我建议选择更少的节点，然后稍微扩展一下这个集合：

```
START u=node:user_id(user_id={id_of_U})
MATCH u-[:FOLLOWS]->following
WITH u,following
MATCH u-[r]-following
RETURN distinct r; 
```

这将为您提供 setA 中节点之间的所有关系，这些节点也由节点 U 跟踪。

如果您的图表中没有关系 FOLLOW - 您应该有，否则您的图表设计不是最佳的。我注意到您在查询中没有使用任何特定的 rel 类型 - 当且仅当您的数据中只有 1 个关系类型时，这可能是最佳的。据我了解您的问题，您有超过 1 种 rel 类型。

**编辑：**

```
START u=node:user_id(user_id={id_of_U})
MATCH u-[]-following
WITH u, following
MATCH u-[r]-again, again-[r2]-following
RETURN r, r2 
```

# java - 系统不识别maven

> ID：14679741
> 
> 赞同：-1
> 
> 时间：2013-02-04T02:45:28.530
> 
> 标签：java, maven

> **可能重复：**
> [安装 Maven](https://stackoverflow.com/questions/6156647/installing-maven)

我已经将所有环境变量设置如下，但是当我输入 mvn --version 系统不识别命令时，解压下载的maven源代码位于C:\Program Files\Apache Software Foundation\apache-maven- 3.0.4

用户变量

```
 M2        %M2_HOME%\bin
 M2_HOME   C:\Program Files\Apache Software Foundation\apache-maven-3.0.4
 PATH      %M2%
 JAVA_HOME C:\Program Files\Java\jdk1.7.0_11 
```

系统变量

```
 JAVA_HOME C:\Program Files\Java\jdk1.7.0_11
  PATH      
  %SystemRoot%\system32;%SystemRoot%;%SystemRoot%\System32\Wbem;%SYSTEMROOT%\System32\WindowsPowerShell\v1.0\;C:\Program Files (x86)\Google\Google Apps Sync\;C:\Program Files (x86)\Google\Google Apps Migration\;C:\Program Files\TortoiseSVN\bin;C:\Program Files\Java\jdk1.7.0_11 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T03:38:03.023

（尚未测试或验证，只是您可能会研究的一个可能方向）

afaik，系统属性中的 Windows 环境变量设置按照键名的顺序进行评估。

因此，在 M2_HOME 设置值之前评估 M2。结果，设置了 M2 `\bin`，因此未正确设置 PATH。

要验证，请打开命令提示符，键入`set M2`and `set path`，您应该会看到设置的值。

最简单的解决方法是只做这些：

```
set M2_HOME=your_manve_path
set PATH=%MAVEN_HOME%\bin;whatever;other;path 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T03:41:27.697

尝试

系统变量

```
M2_HOME   C:\Program Files\Apache Software Foundation\apache-maven-3.0.4   
JAVA_HOME C:\Program Files\Java\jdk1.7.0_11
PATH      
%SystemRoot%\system32;%SystemRoot%;%SystemRoot%\System32\Wbem;%SYSTEMROOT%\System32\WindowsPowerShell\v1.0\;C:\Program Files (x86)\Google\Google Apps Sync\;C:\Program Files (x86)\Google\Google Apps Migration\;C:\Program Files\TortoiseSVN\bin;%M2_HOME%\bin;%JAVA_HOME%\bin 
```

# xquery - 避免 XDMP-EXPNTREECACHEFULL 和加载文档

> ID：14679746
> 
> 赞同：8
> 
> 时间：2013-02-04T02:46:44.533
> 
> 标签：xquery, marklogic

我正在使用 marklogic 4，我有大约 15000 个文档（每个文档大约 10 KB）。我想将整个内容作为文档加载（并将全部文档转换为单个 csv 文件并输出到 HTTP 输出流以供下载）。当我以这种方式加载文档时：

```
let $uri := cts:uri-match('products/documents/*.xml')
let $doc := fn:doc ($uri) 
```

xpath 有大约 15000 个 xml。所以**fn:doc**会抛出一个错误**XDMP-EXPNTREECACHEFULL**。

有什么解决方法吗？我无法在管理控制台中增加树缓存大小，因为**products/documents/*.xml**中的 xml 文件数量可能会增加。

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-04T07:19:51.940

当您想从 MarkLogic 导出大量 XML 时，最好的技术是编写查询以便结果可以流式传输，完全避免扩展树缓存。但是，这是一种非常不同的编码风格：您必须避免任何类型的强类型，并重构您的代码以删除 FLWOR 表达式。您也无法在 cq 或 qconsole 中测试任何代码。

查看[http://blakeley.com/blogofile/2012/03/19/let-free-style-and-streaming/](http://blakeley.com/blogofile/2012/03/19/let-free-style-and-streaming/)了解如何到达那里的一些提示。您发布的代码示例至少必须变为：

```
doc(cts:uri-match('products/documents/*.xml')) 
```

顺便说一句，我会尝试对其进行返工以避免该`*.xml`部分，因为它会比需要的慢。也许是这样的？

```
cts:search(
  collection(),
  cts:directory-query('products/documents/', 'infinity')) 
```

如果您需要测试的不仅仅是目录，您可以添加一个`cts:and-query`with some `cts:element-query`test。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-12-17T16:32:17.507

有关此错误的一般信息，请参阅有关 XDMP-EXPNTREECACHEFULL的[MarkLogic 知识库文章](https://help.marklogic.com/Knowledgebase/Article/View/9/0/resolving-xdmp-expntreecachefull-errors)

# python - 未渲 染的 Python 页面

> ID：14679747
> 
> 赞同：2
> 
> 时间：2013-02-04T02:46:46.357
> 
> 标签：python, cgi

我创建了一个工作正常的 CGIHTTPServer，问题是无论我做什么，python 页面都不会呈现，源代码总是显示在浏览器中。

pyhttpd.py

```
#!/usr/bin/python
import CGIHTTPServer
import BaseHTTPServer
class Handler(CGIHTTPServer.CGIHTTPRequestHandler):
    cgi_directories = [""]
PORT = 8080
httpd = BaseHTTPServer.HTTPServer(("", PORT), Handler)
print "serving at port", PORT
httpd.serve_forever() 
```

cgi-bin/hello.py

```
#!/usr/bin/python
print 'Content-Type: text/html'
print
print '<html>'
print '<head><title>Hello</title></head>'
print '<body>'
print '<h2>Hello World</h2>'
print '</body></html>' 
```

[http://some.ip.address:8080/cgi-bin/hello.py](http://some.ip.address:8080/cgi-bin/hello.py)：

```
#!/usr/bin/python
print 'Content-Type: text/html'
print
print '<html>'
print '<head><title>Hello</title></head>'
print '<body>'
print '<h2>Hello World</h2>'
print '</body></html>' 
```

我已将所有文件的权限设置为可执行，.html 文件呈现正常，即使将文件移回服务器运行的根文件夹也没有区别，我尝试以 root 和另一个普通用户身份运行，正是相同的结果。

尝试使用谷歌搜索“未呈现的 python 页面”，但没有发现任何有用的东西！

# 编辑

我也尝试过运行一个没有覆盖的更简单的服务器，但结果是相同的，pything 代码永远不会呈现：

pyserv.py

```
#!/usr/bin/python
from BaseHTTPServer import HTTPServer
from CGIHTTPServer import CGIHTTPRequestHandler
serve = HTTPServer(("",80),CGIHTTPRequestHandler)
serve.serve_forever() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T02:58:47.800

我相信您遇到此问题是因为您已覆盖`cgi_directories`.

[文档](http://docs.python.org/2/library/cgihttpserver.html#CGIHTTPServer.CGIHTTPRequestHandler.cgi_directories)的相关部分内容如下：

“这默认`['/cgi-bin', '/htbin']`并描述了要视为包含 CGI 脚本的目录。”

将您的脚本放在根目录中，或者删除覆盖并将脚本放在`cgi_directories`目录中`/cgi-bin`。

这是一个很好的链接，它逐行描述了类似的简单设置： [https ://pointlessprogramming.wordpress.com/2011/02/13/python-cgi-tutorial-1/](https://pointlessprogramming.wordpress.com/2011/02/13/python-cgi-tutorial-1/)

**更新：**

根据上述页面上的[评论](https://pointlessprogramming.wordpress.com/2011/02/13/python-cgi-tutorial-1/#comment-293)，似乎设置`cgi_directories = [""]`会导致*禁用*cgi 目录功能。相反， set 将`cgi_directories = ["/"]`其设置为当前目录。

# javascript - 从 Javascript 附加 HTML 代码

> ID：14679749
> 
> 赞同：0
> 
> 时间：2013-02-04T02:46:50.430
> 
> 标签：javascript, jquery, css

我如何更改当前正在将 CSS 类附加到 HTML 上的 div 的此功能

```
if (!this.sortDisabled) {
        var $th = $(this).addClass(table.config.cssHeader);
        if (table.config.onRenderHeader) table.config.onRenderHeader.apply($th);
} 
```

追加这个而不是添加类“table.config.cssHeader”

```
'&nbsp<font face="webdings">6</font>' 
```

所以我的问题解释是我怎么能得到这个

```
if (!this.sortDisabled) {
    var $th = $(this).addHTMLCODE(&nbsp<font face="webdings">6</font>);
    if (table.config.onRenderHeader) table.config.onRenderHeader.apply($th);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T02:49:57.933

看起来你正在使用 jQuery。你很接近; 而不是`addHTMLCODE`，您需要[`append`](http://api.jquery.com/append)，并且您还需要引用 HTML：

```
var $th = $(this).append('&nbsp<font face="webdings">6</font>'); 
```

# c++ - 我怎样才能完全杀死一个 gnome 终端？

> ID：14679758
> 
> 赞同：0
> 
> 时间：2013-02-04T02:47:34.137
> 
> 标签：c++, linux, gnome-terminal

我注意到当我执行以下操作时，gnome-terminal 只是进入“僵尸状态”

```
char *cmd = "kill <pidofterminal>"
popen(cmd, "r"); 
```

有没有办法完全杀死程序？我需要它来释放它的 PID。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T03:06:58.910

您可以`-9`在 kill 命令中指定

```
char *cmd = "kill -9 <pidofterminal>"
popen(cmd, "r"); 
```

在 sudo 或 root 下运行程序：

```
sudo ./program 
```

它将杀死您可以杀死的所有进程。

# java - ListView和使用ArrayAdapter显示arraylist有什么关系？

> ID：14679759
> 
> 赞同：0
> 
> 时间：2013-02-04T02:47:41.257
> 
> 标签：java, android, listview, android-arrayadapter

在过去的几个小时里，我一直在尝试做一些我认为应该是微不足道的事情。我一直在阅读有关 stackoverflow 的答案，但它并没有和我开玩笑。人们在stackoverflow上展示了`ArrayAdapters`接受字符串的例子。`ArrayLists`这对我不起作用。

[使用 ArrayList 填充 ListView？](https://stackoverflow.com/questions/5070830/populating-a-listview-using-arraylist)

我试图了解这里发生了什么。如果我正在处理 String 类型的数组列表，这意味着我唯一可以将数据绑定到的是文本视图，当然不是列表视图，除非我创建自己的自定义链接适配器类？这似乎我错过了一些信息。我认为这个问题会如此普遍，因此会提出解决方案。我的代码在下面，我收到“ `E/ArrayAdapter(5106): You must supply a resource ID for a TextView`”错误。

```
public class Favorites extends Activity{
UserFunctions userFunctions  = new UserFunctions();

ArrayAdapter<String> arrayAdapter1;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.favoritespage);
    arrayAdapter1 = new ArrayAdapter<String>(Favorites.this,android.R.layout.activity_list_item);
    new DownloadDataTask().execute();
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main_screen, menu);
    return true;
}

   private class DownloadDataTask extends AsyncTask<JSONArray, JSONArray, ArrayList<String> > {

        @Override
        protected ArrayList<String> doInBackground(JSONArray... params) {
            JSONArray json = userFunctions.ziplistrequest("39", "-74", "50");
            ArrayList<String> zipcodes = new ArrayList<String>();
            for(int i=0; i < json.length() ; i++) {
                JSONObject jarray = null;
                try {
                    jarray = json.getJSONObject(i);
                    String zip = jarray.getString("ZIPCODE");
                    zipcodes.add(zip);
                    arrayAdapter1.add(zip);
                    Log.d(zip,"Output");
                } catch (JSONException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }
            return zipcodes;
        }   
        protected void onPostExecute(ArrayList<String> result){
            ListView listView = (ListView) findViewById(R.id.list);
            arrayAdapter1.addAll(result);
            listView.setAdapter(arrayAdapter1);
        }
    } 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T03:59:37.573

尝试使用`android.R.layout.simple_list_item1`而不是'android.R.layout.activity_list_item`

# mysql - MySQL 是否加入 MUL 键会影响性能？

> ID：14679760
> 
> 赞同：1
> 
> 时间：2013-02-04T02:47:42.317
> 
> 标签：mysql, sql, performance

我正在使用对四个表执行三个表连接的 MySQL 查询。其中两个连接在一对 MUL 键上。第三个连接是在一对主键上。查询需要整整一分钟才能获取 100 行。

我相信两对 MUL 密钥都是独一无二的；所以我想知道，如果这些键被索引为唯一的，或者被制成外键，我会注意到显着的性能提升吗？

MUL 键上的连接可能是这里的罪魁祸首吗？

**编辑**

好的，这是架构。我用字母代替了实际的表/列名。

```
mysql> 描述表 A；
+-----------------+------------------+------+--- --+---------+----------------+
| 领域 | 类型 | 空 | 钥匙 | 默认 | 额外 |
+-----------------+------------------+------+--- --+---------+----------------+
| 键 | int(10) 无符号 | 否 | 优先级 | 空 | 自动增量 |
| 麦键 | int(10) 无符号 | 否 | 穆尔 | 空 | |
| 一个 | int(10) 无符号 | 否 | | 空 | |
| 乙 | int(10) 无符号 | 否 | | 空 | |

```

```
mysql>描述表B；
+-----------------+------------------+------+--- --+---------+----------------+
| 领域 | 类型 | 空 | 钥匙 | 默认 | 额外 |
+-----------------+------------------+------+--- --+---------+----------------+
| 键 | int(10) 无符号 | 否 | 优先级 | 空 | 自动增量 |
| mkey1 | int(10) 无符号 | 否 | 穆尔 | 空 | |
| mkey2 | int(10) 无符号 | 否 | 穆尔 | 空 | |
| 一个 | int(10) 无符号 | 否 | | 空 | |
| 乙 | int(10) 无符号 | 否 | | 空 | |
| c | int(10) 无符号 | 否 | | 空 | |

```

```
mysql>描述表C；
+---------------+------------------+------+-----+- --------+--------+
| 领域 | 类型 | 空 | 钥匙 | 默认 | 额外 |
+---------------+------------------+------+-----+- --------+--------+
| 键 | int(10) 无符号 | 否 | 优先级 | 空 | |
| 麦键 | varchar(128) | 否 | 穆尔 | 空 | |

```

```
mysql> 描述表 D；
+---------------+------------------+------+-----+- --------+--------+
| 领域 | 类型 | 空 | 钥匙 | 默认 | 额外 |
+---------------+------------------+------+-----+- --------+--------+
| 键 | int(10) 无符号 | 否 | 优先级 | 空 | |
| 麦键 | varchar(128) | 否 | 穆尔 | 空 | |

```

询问：

```
select
A.a, A.b, B.c, A.mkey, C.pkey, D.mkey
from
A, B, C, D
where
A.pkey=C.pkey and
A.mkey=B.mkey1 and
B.mkey2=D.pkey and
B.a <= A.a and
B.b >= A.b
D.mkey in ('str1', 'str2', ...); 
```

返回 77 行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T21:46:06.977

使用显式连接

```
select
A.a, A.b, B.c, A.mkey, C.pkey, D.mkey
from
A INNER JOIN C ON (A.pkey = C.pkey)
INNER JOIN B ON (A.mkey = B.mkey1)
INNER JOIN D ON (B.mkey2 = D.pkey)
where
B.a <= A.a and
B.b >= A.b
D.mkey in ('str1', 'str2', ...); 
```

# xcode - 通过 shell 脚本 (jhbuild) 运行 XCode 应用程序

> ID：14679764
> 
> 赞同：1
> 
> 时间：2013-02-04T02:48:48.620
> 
> 标签：xcode, gtk, jhbuild

我正在 XCode 中开发 GTK+ 应用程序。为了让它正常运行，我需要使用一个特殊的 GTK+ 脚本来设置大量的环境变量：

```
jhbuild run path/to/compiled/binary 
```

如何覆盖 XCode 中的“运行”函数，以便它以这种方式调用应用程序？

（我发现的一种解决方法是创建一个运行 shell 脚本的新聚合构建目标。这需要我在编译应用程序和运行它之间更改方案。这在语义上是不正确的，并且还会导致应用程序在后台启动.)

# java - 无法理解如何创建链表数组

> ID：14679766
> 
> 赞同：0
> 
> 时间：2013-02-04T02:49:36.727
> 
> 标签：java, arrays, class, generics, linked-list

好的，所以我一直在阅读有关创建链表数组和大多数堆栈溢出线程的每个谷歌结果，但我并不真正了解它们在做什么。我是否需要创建一个扩展链接列表的单独类，然后创建该类的数组？

我已经尝试过一百万种不同的方式来安排这段代码，但这就是我目前所拥有的。

```
public static int[][] genPerms(int numElements, int totPerms) {
    int permArray[][] = new int[totPerms][numElements];
    LinkedList<Integer>[] elementsLeftList = new LinkedList<Integer>[numElements]; 
```

错误是通用数组创建。有人可以向我解释这里到底发生了什么。

除了下面的解决方案，我被告知您可以创建一个头指针数组。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T03:16:55.937

不允许创建泛型数组，请执行以下操作

```
 @SuppressWarnings("unchecked")
    LinkedList<Integer>[] elementsLeftList = new LinkedList[numElements]; 
```

它工作正常

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T03:09:54.360

如果不经历一个复杂的过程，您目前无法在 Java 中创建泛型数组。您可以改为执行以下操作吗？

```
List<LinkedList<Integer>> elementsLeftList = new ArrayList<LinkedList<Integer>>(); 
```

如果你真的需要它作为一个数组，你可以从 elementsLeftList.toArray() 获取它并转换结果。

您可以阅读以下链接进行解释：[http ://www.angelikalanger.com/GenericsFAQ/FAQSections/ParameterizedTypes.html#FAQ104](http://www.angelikalanger.com/GenericsFAQ/FAQSections/ParameterizedTypes.html#FAQ104)

# c++ - Ofstream 正在自行关闭？

> ID：14679767
> 
> 赞同：0
> 
> 时间：2013-02-04T02:49:40.100
> 
> 标签：c++

我遇到了一个奇怪的行为，我正在使用 ofstream 写入文件并且它在循环中间自发关闭。我注意到文件只写了一半的循环，所以我在整个循环中输出流的状态，并注意到它正在关闭自己。在这个循环中，我正在写入多个文件，而这只发生在其中一个文件上，即写出最少数据的那个文件。我将尝试编辑和添加代码，但循环本身非常大（800 行），所以我需要找出一种方法来发布所需的部分。

在我发布代码之前，以前有人发生过这种情况吗？有谁知道我可以检查的可能的明显原因？

谢谢！

# javascript - D3 甘特图

> ID：14679774
> 
> 赞同：6
> 
> 时间：2013-02-04T02:51:21.013
> 
> 标签：javascript, charts, d3.js, schedule, gantt-chart

我一直在研究 D3 甘特图；它有一个画笔视图、树网格视图的列标签（我的应用程序需要这个）和工具提示。该图表允许您通过单击树层次结构中的节点来使用树视图扩展和缩小节点。

关于我遇到的问题，随着时间的推移，画笔滚动明显变慢，我最初认为可能是我没有删除我应该删除的节点，这导致了速度变慢，但我确实花时间检查这个问题，似乎并非如此。它还不支持剪辑，并且当您滚动画笔时，图表中的活动栏会与树形网格重叠。它似乎变慢了，在firefox中有点慢，但是如果你在树网格视图中收缩和扩展顶级节点，树刷的滚动再次变得更快。

我需要有关以下问题的帮助：

1.  剪裁; 我不确定如何修改代码以使其正常工作。
2.  使用画笔时图表视图的延迟滚动，因此画笔不会在每次移动时调用更新。
3.  关于如何解决使用刷子时随时间发生的减速的一些指导。

你可以在这里看到它（全屏）：[http ://bl.ocks.org/d/4704709/](http://bl.ocks.org/d/4704709/)

我添加了全屏视图，因为普通的块视图太小而无法容纳它。

它在 github 上，供那些想要分支它并用它做的事情比我能做的更好的人：

[https://gist.github.com/4704709](https://gist.github.com/4704709)

# windows - 检查 VirtualFreeEx 是否已完成/执行

> ID：14679777
> 
> 赞同：1
> 
> 时间：2013-02-04T02:51:39.983
> 
> 标签：windows, delphi, winapi, memory-management

我在远程进程上使用 VirtualAllocEx 来保留一些空间，如下所示：

```
VirtualAllocEX (RemoteProcessHandle, nil, SizeInBytes, MEM_COMMIT or MEM_RESERVE, PAGE_EXECUTE_READWRITE); 
```

然后我“填充”/写入分配的地址空间`WriteProcessMemory`

然后我正确使用

```
VirtualFreeEx (RemoteProcessHandle, Address, 0, MEM_RELEASE); 
```

释放分配的空间。

是否可以检查调用`VirtualAllocEx` **后** `VirtualFreeEx`的地址以检查是否`VirtualFreeEx`成功？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T03:50:15.617

一旦您将该地址返回给系统，该地址的任何未来引用都是无效的。成功调用 后`VirtualFreeEx`，不得`Address`再次引用。一旦您将地址返回给系统，系统就拥有它。该地址在未来变为有效的唯一方法是通过另一个调用`VirtualAllocEx`.

# opengl - 在openGL中的三角形上绘制纹理的一部分

> ID：14679779
> 
> 赞同：0
> 
> 时间：2013-02-04T02:51:53.813
> 
> 标签：opengl, geometry, drawing, textures

我正在尝试在三角形上绘制部分纹理。三角形由 3 个点定义。其中一个点将始终是图像的中心。现在我想在那个三角形上画出一部分纹理。所以三角形会切掉图像的那一部分并将其绘制在自己身上。但我不希望纹理在绘制时缩放。它必须保持不变。所以即使三角形的基点落在图像之外。图片无法缩放。我不明白这是怎么做到的。每当我使用纹理时，图像都会被缩放或绘制多次。

这是一张图片：所以红色三角形的绘制方式与 openGL 中的完全相同。

![在此处输入图像描述](../Images/d7d1827bda70b2e808ea26bf9cdd7f26.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T13:45:50.097

在您的片段着色器中检查texcoord 上的`s`&值，以及是否小于零或大于一。`t``discard`

**编辑：**示例：

```
// g++ main.cpp -o main -lglut -lGLEW
#include <GL/glew.h>
#include <GL/glut.h>
#include <vector>
#include <iostream>

using namespace std;

void CheckStatus( GLuint obj )
{
    GLint status = GL_FALSE, len = 10;
    if( glIsShader(obj) )   glGetShaderiv( obj, GL_COMPILE_STATUS, &status );
    if( glIsProgram(obj) )  glGetProgramiv( obj, GL_LINK_STATUS, &status );
    if( status == GL_TRUE ) return;
    if( glIsShader(obj) )   glGetShaderiv( obj, GL_INFO_LOG_LENGTH, &len );
    if( glIsProgram(obj) )  glGetProgramiv( obj, GL_INFO_LOG_LENGTH, &len );
    vector< char > log( len, 'X' );
    if( glIsShader(obj) )   glGetShaderInfoLog( obj, len, NULL, &log[0] );
    if( glIsProgram(obj) )  glGetProgramInfoLog( obj, len, NULL, &log[0] );
    cerr << &log[0] << endl;
    exit( -1 );
}

GLuint LoadShader( GLenum type, const char* src )
{
    GLuint shader = glCreateShader( type );
    glShaderSource( shader, 1, &src, NULL );
    glCompileShader( shader );
    CheckStatus( shader );
    return shader;
}

GLuint LoadProgram( const char* vert, const char* geom, const char* frag )
{
    GLuint program = glCreateProgram();
    if( vert ) glAttachShader( program, LoadShader( GL_VERTEX_SHADER, vert ) );
    if( geom ) glAttachShader( program, LoadShader( GL_GEOMETRY_SHADER, geom ) );
    if( frag ) glAttachShader( program, LoadShader( GL_FRAGMENT_SHADER, frag ) );
    glLinkProgram( program );
    CheckStatus( program );
    return program;
}

#define GLSL(version, shader) "#version " #version "\n" #shader

const GLchar* vert = GLSL
(
    120,
    void main()
    {
        gl_TexCoord[0] = gl_MultiTexCoord0;
        gl_Position = gl_ModelViewProjectionMatrix * gl_Vertex;
    }
);

const GLchar* frag = GLSL
(
    120,
    uniform sampler2D texture;
    void main()
    {
        if( any( lessThan( gl_TexCoord[0].st, vec2( 0.0, 0.0 ) ) ) || 
            any( greaterThan( gl_TexCoord[0].st, vec2( 1.0, 1.0 ) ) ) )
        {
            gl_FragColor = vec4( 1.0, 1.0, 1.0, 1.0 );
            //discard;
        }
        else
        {
            gl_FragColor = texture2D( texture, gl_TexCoord[0].st );
        }
    }
);

GLuint prog = 0;
GLuint tex = 0;
void init()
{
    prog = LoadProgram( vert, NULL, frag );

    unsigned char bits[ 32 * 32 * 4 ];
    for( unsigned int i = 0; i < 32*32; ++i )
    {
        bits[i*4 + 0] = rand() % 255;
        bits[i*4 + 1] = rand() % 255;
        bits[i*4 + 2] = rand() % 255;
        bits[i*4 + 3] = 255;
    }

    glGenTextures( 1, &tex );
    glBindTexture( GL_TEXTURE_2D, tex );
    glTexParameteri( GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE );
    glTexParameteri( GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE );
    glTexParameteri( GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST );
    glTexParameteri( GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST ); 
    glTexImage2D( GL_TEXTURE_2D, 0, 4, 32, 32, 0, GL_RGBA, GL_UNSIGNED_BYTE, bits );
}

void display()
{
    glClear( GL_COLOR_BUFFER_BIT );

    glMatrixMode( GL_PROJECTION );
    glLoadIdentity();
    double w = glutGet( GLUT_WINDOW_WIDTH );
    double h = glutGet( GLUT_WINDOW_HEIGHT );
    double ar = w / h;
    glOrtho( -3 * ar, 3 * ar, -3, 3, -1, 1);

    glMatrixMode( GL_MODELVIEW );
    glLoadIdentity();

    glUseProgram( prog );
    glUniform1i( glGetUniformLocation( prog, "texture" ), 0 );    
    glActiveTexture( GL_TEXTURE0 );
    glBindTexture( GL_TEXTURE_2D, tex );

    glBegin( GL_TRIANGLES );
    glTexCoord2f( 0.5, 0.5 );
    glVertex2f( 0, 0 );
    glTexCoord2f( 1.5, 0.5 );
    glVertex2f( 2, 0 );
    glTexCoord2f( 0.5, 1.5 );
    glVertex2f( 0, 2 );
    glEnd();

    glutSwapBuffers();
}

int main(int argc, char** argv)
{
    glutInit( &argc, argv );
    glutInitDisplayMode( GLUT_RGBA | GLUT_DOUBLE );
    glutInitWindowSize( 640,480 );
    glutCreateWindow( "test" );
    glutDisplayFunc( display );
    glewInit();
    init();
    glutMainLoop();
    return 0;
} 
```

# vb.net - VB.NET 中的事件处理

> ID：14679783
> 
> 赞同：0
> 
> 时间：2013-02-04T02:52:10.210
> 
> 标签：vb.net

在 VB.NET 中，为什么不触发以下自定义事件？

```
Public Class classes1
    Public Event buttonload(ByVal sender As System.Object, ByVal e As System.EventArgs)
    Protected Sub Button2_Click(ByVal sender As System.Object, ByVal e As System.EventArgs)        Handles Button2.Click
        attd.Show()
        RaiseEvent buttonload(sender, e)
    End Sub
End Class

Public Class attd
    Dim WithEvents c1 As New classes1
    Sub c1_buttonload(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles c1.buttonload
        MsgBox("Event received")
    End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T04:13:59.207

您正在使用您的第一个表单 ,`classes1`来显示您的第二个表单，`attd`，然后引发您的 CustomEvent。然后在您的第二个表单中`attd`，您正在创建第一个表单的另一个实例，`classes1`然后尝试将您的处理程序附加到该实例的事件。它们**不一样**，所以它不会着火。

真的不清楚你到底想做什么。如果你只是在试验一些事件，你可以尝试这样的事情。

**表格1**

```
Public Class Form1
    Dim attd As Form2 = New Form2
    Private Sub Button2_Click(sender As System.Object, e As System.EventArgs) Handles Button2.Click
        attd.Show()
    End Sub

    Public Sub New()

        ' This call is required by the designer.
        InitializeComponent()

        ' Add any initialization after the InitializeComponent() call.
        AddHandler attd.buttonload, AddressOf buttonLoadHandler
    End Sub

    Private Sub buttonLoadHandler(sender As Object, e As EventArgs)
        MsgBox("Event received")
    End Sub

End Class 
```

**表格2**

```
Public Class Form2
    Public Event buttonload(ByVal sender As System.Object, ByVal e As System.EventArgs)

    Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click
        RaiseEvent buttonload(sender, e)
    End Sub
End Class 
```

如果您只是想让您的第二个表单响应第一个表单按钮单击，请尝试这样的操作。

**表格1**

```
Public Class Form1
    Dim attd As Form2 = New Form2
    Private Sub Button2_Click(sender As System.Object, e As System.EventArgs) Handles Button2.Click
        attd.Show()
        attd.showMessageBox()
    End Sub

    Public Sub New()

        ' This call is required by the designer.
        InitializeComponent()

        ' Add any initialization after the InitializeComponent() call.

    End Sub
End Class 
```

**表格2**

```
Public Class Form2
    Public Sub showMessageBox()
        MsgBox("Hello World")
    End Sub
End Class 
```

# ruby-on-rails - 如何在rails中冒泡异常

> ID：14679785
> 
> 赞同：3
> 
> 时间：2013-02-04T02:52:20.910
> 
> 标签：ruby-on-rails, error-handling

Rails 新手，遇到一些关于最佳实践错误处理的问题。

我在 /lib 文件夹中的帮助程序中有以下代码，用于将优惠券应用于某些定价。

正如您从下面的代码中看到的那样，我正在尝试几种不同的方法来返回任何错误。具体来说，model.errors.add 和 flash[:error]。

一旦应用了有效的优惠券，下面的代码应该会返回一个新价格。我不确定在发生错误时要返回什么？我不能像下面那样返回 false，因为这个方法实际上应该返回一个数值，而不是一个布尔值。从 lib/helper 向视图冒泡并停止执行的最佳方法是什么？

```
def calc_coupon transaction_price, discount_code, current_tenant
   coupon = Coupon.where(code: discount_code, tenant_id: current_tenant.id).first

   if coupon.nil?
     current_tenant.errors.add :base, "No such coupon exists"
     return false
   else
     if coupon.maxed? || coupon.expired?
       flash[:error] = "This coupon is no longer valid."
       return false
     else
      transaction_price = coupon.calculate(transaction_price)
     end
   end
   return transaction_price
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T08:42:16.277

我认为您走在正确的轨道上，但您正在苦苦挣扎，因为您将视图逻辑与业务逻辑混合在一起。忘记辅助类并将功能添加到您的模型中。

通过将验证添加到模型而不是辅助类并将错误添加到基础您的控制器操作将能够在尝试以正常方式保存/创建记录时处理错误，从而“冒泡错误”

例如

```
 class MyModel < ActiveRecord ...
      validate :validate_coupon
      protected
        def validate_coupon
#          add your validations here - call your boolean check which adds errors to the model
#          if validations are ok then calculate your transaction price here
        end
    end 
```

如果您将检查作为模型上的公共方法，则可以从任何地方调用它们，即在视图中，因此模型上的公共 transaction_price 方法首先检查错误并设置价格，可以在这样的视图中使用

```
<%= @some_object.transaction_price %> 
```

正如我之前所说，因为验证是在模型中添加的，那么您的控制器操作只需要检查调用的值以保存并在返回 false 时正常闪烁错误，因此根本不需要在控制器操作中执行任何自定义操作. 只是默认的脚手架行为。

您可以使用大量的验证选项。看看 [http://guides.rubyonrails.org/active_record_validations_callbacks.html](http://guides.rubyonrails.org/active_record_validations_callbacks.html)

希望这是有道理的。

**更新回应评论**

1）你有很多地方。这只是一个建议，您可以计算交易价格作为验证的一部分。如果这不符合您的要求，那很好。我只是想给你最适合你的问题。问题是你应该有两个单独的实例方法，然后你可以从任何你想要的地方调用它们，这使得实验和移动东西变得更加简单。使用您建议的解决方案很好:)

2) 仔细查看脚手架控制器和视图。您将使用 if 语句看到保存/更新如何失败（如果您在验证过程中添加错误，它们将自动失败），您将看到 _form 部分如何显示错误

这是处理我正在开发的应用程序中的引擎的表单示例。

```
<%= form_for(@engine) do |f| %>
  <% if @engine.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@engine.errors.count, "error") %> prohibited this engine from being saved:</h2>

      <ul>
      <% @engine.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %> 
```

基本上，它正在检查错误并遍历它们（如果存在）以显示它们。

要处理 flash 消息，您应该使用应用程序主布局以下代码将在名为“info”的 div 中显示 flash 消息，您可以根据需要设置样式

```
 <% unless flash.empty? %>
    <div class="info">
    <%- flash.each do |name, msg| -%>
      <%= content_tag :div, msg, :id => "flash_#{name}" %>
    <%- end -%>
    </div>
  <% end %> 
```

通过将它放在 view/layouts 文件夹中 application.html.erb 的 main yield 之前，您可以确保无论呈现什么页面，flash 消息都将始终显示给用户

当然，如果您正在显示 Flash 消息，那么也许您不需要显示错误。有时两者都是正确的做法，有时只是其中一个或另一个很好。这取决于您根据具体情况决定。

主要的是，HTTP POST 或 HTTP PUT（创建或更新操作）的接收操作会处理您认为合适的使用或不使用闪存保存的失败，例如创建操作

```
 def create
    @engine = Engine.new(params[:engine])

    respond_to do |format|
      if @engine.save
        format.html { redirect_to @engine, notice: 'Engine was successfully created.' }
        format.json { render json: @engine, status: :created, location: @engine }
      else
        flash.now[:notice] = "Failed to save!" # flash.now because we are rendering. flash[:notice] if using a redirect
        format.html { render action: "new" }
        format.json { render json: @engine.errors, status: :unprocessable_entity }
      end
    end
  end 
```

希望这能说明问题

**更新 2** 忘了提到 flash 只是一个哈希并使用会话 cookie，因此您可以设置任何您喜欢的键，例如

```
flash.now[:fred] 
```

如果您希望通过添加代码来处理特定视图中的 :fred 键（或您选择的名称）的代码与应用程序布局提供的样式不同，这将使您能够在特定视图中设置和处理特定 fred 通知的样式

# android - 升级 Twitter 登录以使用 Twitter API 1.1

> ID：14679787
> 
> 赞同：0
> 
> 时间：2013-02-04T02:52:40.730
> 
> 标签：android, twitter

我使用[这个示例](http://www.londatiga.net/it/how-to-post-twitter-status-from-android/comment-page-2/)登录 Twitter、发布状态和照片。我用了很长时间。现在 Twitter 需要从 Twitter API 1.0 升级到 Twitter API 1.1。我需要做什么来升级它？我试图用[这个库](http://twitter4j.org/en/index.html)替换旧的库，到目前为止没有问题，但我害怕我没有完全做改变。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-22T08:46:51.657

您必须通过 OAUTH ( [https://dev.twitter.com/docs/auth/using-oauth](https://dev.twitter.com/docs/auth/using-oauth) ) 登录才能连接。因此，您还必须在 dev.twitter.com 上注册您的应用程序。您可以在此处找到以下示例[https://github.com/browep/Android-OAuth-Twitter-Example](https://github.com/browep/Android-OAuth-Twitter-Example)。

```
public class Main extends Activity{

public static final String TAG =  Main.class.getSimpleName();
public static final String TWITTER_OAUTH_REQUEST_TOKEN_ENDPOINT = "..."; //cannot share more then 2 lins, sorry

public static final String TWITTER_OAUTH_ACCESS_TOKEN_ENDPOINT = "...";
public static final String TWITTER_OAUTH_AUTHORIZE_ENDPOINT = "...";
private CommonsHttpOAuthProvider commonsHttpOAuthProvider;
private CommonsHttpOAuthConsumer commonsHttpOAuthConsumer;

@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    commonsHttpOAuthProvider = new CommonsHttpOAuthProvider(TWITTER_OAUTH_REQUEST_TOKEN_ENDPOINT,
            TWITTER_OAUTH_ACCESS_TOKEN_ENDPOINT, TWITTER_OAUTH_AUTHORIZE_ENDPOINT);
    commonsHttpOAuthConsumer = new CommonsHttpOAuthConsumer(getString(R.string.twitter_oauth_consumer_key),
            getString(R.string.twitter_oauth_consumer_secret));
    commonsHttpOAuthProvider.setOAuth10a(true);
    TwDialog dialog = new TwDialog(this, commonsHttpOAuthProvider, commonsHttpOAuthConsumer,
            dialogListener, R.drawable.android);
    dialog.show();

}

private Twitter.DialogListener dialogListener = new Twitter.DialogListener() {
    public void onComplete(Bundle values) {
        String secretToken = values.getString("secret_token");
        Log.i(TAG,"secret_token=" + secretToken);
        String accessToken = values.getString("access_token");
        Log.i(TAG,"access_token=" + accessToken);
        new Tweeter(accessToken,secretToken).tweet(
                "Tweet from sample Android OAuth app.  unique code: " + System.currentTimeMillis());
    }

    public void onTwitterError(TwitterError e) { Log.e(TAG,"onTwitterError called for TwitterDialog",
            new Exception(e)); }

    public void onError(DialogError e) { Log.e(TAG,"onError called for TwitterDialog", new Exception(e)); }

    public void onCancel() { Log.e(TAG,"onCancel"); }
};

public static final Pattern ID_PATTERN = Pattern.compile(".*?\"id_str\":\"(\\d*)\".*");
public static final Pattern SCREEN_NAME_PATTERN = Pattern.compile(".*?\"screen_name\":\"([^\"]*).*");

public class Tweeter {
    protected CommonsHttpOAuthConsumer oAuthConsumer;

    public Tweeter(String accessToken, String secretToken) {
        oAuthConsumer = new CommonsHttpOAuthConsumer(getString(R.string.twitter_oauth_consumer_key),
                getString(R.string.twitter_oauth_consumer_secret));
        oAuthConsumer.setTokenWithSecret(accessToken, secretToken);
    }

    public boolean tweet(String message) {
        if (message == null && message.length() > 140) {
            throw new IllegalArgumentException("message cannot be null and must be less than 140 chars");
        }
        // create a request that requires authentication

        try {
            HttpClient httpClient = new DefaultHttpClient();
            Uri.Builder builder = new Uri.Builder();
            builder.appendPath("statuses").appendPath("update.json")
                    .appendQueryParameter("status", message);
            Uri man = builder.build();
            HttpPost post = new HttpPost("http://twitter.com" + man.toString());
            oAuthConsumer.sign(post);
            HttpResponse resp = httpClient.execute(post);
            String jsonResponseStr = convertStreamToString(resp.getEntity().getContent());
            Log.i(TAG,"response: " + jsonResponseStr);
            String id = getFirstMatch(ID_PATTERN,jsonResponseStr);
            Log.i(TAG,"id: " + id);
            String screenName = getFirstMatch(SCREEN_NAME_PATTERN,jsonResponseStr);
            Log.i(TAG,"screen name: " + screenName);

            final String url = MessageFormat.format("https://twitter.com/#!/{0}/status/{1}",screenName,id);
            Log.i(TAG,"url: " + url);

            Runnable runnable = new Runnable() {
                public void run() {
                    ((TextView)Main.this.findViewById(R.id.textView)).setText("Tweeted: " + url);
                }
            };

            Main.this.runOnUiThread(runnable);

            return resp.getStatusLine().getStatusCode() == 200;

        } catch (Exception e) {
            Log.e(TAG,"trying to tweet: " + message, e);
            return false;
        }

    }
}

public static String convertStreamToString(java.io.InputStream is) {
    try {
        return new java.util.Scanner(is).useDelimiter("\\A").next();
    } catch (java.util.NoSuchElementException e) {
        return "";
    }
}

public static String getFirstMatch(Pattern pattern, String str){
    Matcher matcher = pattern.matcher(str);
    if(matcher.matches()){
        return matcher.group(1);
    }
    return null;
} 
```

# akka - akka骆驼消费者中的autoAck是什么意思？

> ID：14679789
> 
> 赞同：1
> 
> 时间：2013-02-04T02:53:09.040
> 
> 标签：akka, consumer

akka camel 消费者中的 autoAck 返回布尔值 true 或 false。

如果autoAck = true，那么当消息进入消费者邮箱但在消费者处理消息之前，消费者怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T08:51:16.493

当`autoAck=true`发送者不会等待消息被消费者actor处理时。换句话说，以下发送将立即返回：

```
camel.template.asyncSendBody("direct:my-endpoint", "some message").get(timeoutDuration.toSeconds, TimeUnit.SECONDS) 
```

当`autoAck=false`上述`get`将阻塞，直到您发送`Ack`或`Failure`或超时。

# algorithm - 求解递归 T(n) = T(n/2) + lg n？

> ID：14679790
> 
> 赞同：1
> 
> 时间：2013-02-04T02:53:50.207
> 
> 标签：algorithm, math, big-o, recurrence, master-theorem

我在如何解决重复关系方面遇到了一些问题。

> T(n) = T(n/2) + log2(n)，T(1) = 1，其中 n 是 2 的幂

这是一个家庭作业问题，所以不要只给我答案。我只是想知道如何开始这个问题。

在课堂上，我们复习[了 Master 定理](http://en.wikipedia.org/wiki/Master_theorem)。但我认为这不是解决这种特殊关系的最佳方式。

我真的不知道如何开始这个问题......我应该去吗

```
T(n) = T(n/2) + log_base2(n)
T(n/2) = [T(n/4)+log_base2(n/2)]
  T(n) = [T(n/4)+log_base2(n/2)] + log_base2(n) 
```

并且继续努力得到一些我可以看到的东西构成一个基本方程？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-11-05T01:10:35.610

此递归求解为**Θ((log n) ² )**。这里有两种方法可以看到这一点。

# 一些替代品

如果您知道 n 是 2 的完美幂（即 n = 2 ^k），则可以将递归重写为

> T(2 ^k ) = T(2 ^(k-1) ) + k

让我们定义一个新的递归 S(k) = T(2 ^k )。然后我们得到

> S(k) = S(k - 1) + k

如果我们扩展这个重复，我们得到

> S(k) = S(k - 1) + k
> 
> = S(k - 2) + (k - 1) + k
> 
> = S(k - 3) + (k - 2) + (k - 1) + k
> 
> = S(k - 4) + (k - 3) + (k - 2) + (k - 1) + k
> 
> ...
> 
> = S(0) + 1 + 2 + 3 + ... + k
> 
> = S(0) + Θ(k ² )

假设 S(0) = 1，则此递归求解为 Θ(k ² )。

由于 S(k) = T(2 ^k ) = T(n)，我们得到 T(n) = Θ(k ² ) = Θ(log ² n)。

# 迭代递归

这里的另一个选择是扩展一些递归项，看看是否出现了任何好的模式。这是我们得到的：

> T(n) = T(n / 2) + lg n
> 
> = T(n / 4) + lg (n / 2) + lg n
> 
> = T(n / 8) + lg (n / 4) + lg (n / 2) + lg n
> 
> ...

最终，在 lg n 层之后，这种递归式触底，我们只剩下这个表达式：

> lg n + lg (n / 2) + lg (n / 4) + ... + lg (n / 2 ^(lg n))

使用对数的性质，我们可以将其重写为

> lg n + (lg n - 1) + (lg n - 2) + (lg n - 3) + ... + (lg n - lg n)

或者，反过来写，这是总和

> 0 + 1 + 2 + 3 + ... + lg n

该总和是高斯对 lg n 的总和，其计算结果为 (lg n)(lg n + 1) / 2 = Θ((log n)2)。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-04T23:27:16.447

如果 n 是 2 的幂，那么您可以扩展递归并精确求解，使用 lg(a/b) = lg(a) - lg(b)。

```
T(n) = lg(n) + lg(n/2) + lg(n/4) + ... + lg(1) + 1
     = (lg(n) - 0) + (lg(n) - 1) .... + (lg(n) - lg(n)) + 1
     = lg(n)*lg(n) - lg(n)*(lg(n)+1)/2 + 1
     = lg(n)*lg(n)/2 - lg(n)/2 + 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-04T22:08:36.483

这可以通过 Akra-Bazzi 定理来完成。[请参阅http://people.mpi-inf.mpg.de/~mehlhorn/DatAlg2008/NewMasterTheorem.pdf](http://people.mpi-inf.mpg.de/~mehlhorn/DatAlg2008/NewMasterTheorem.pdf)中的第三个示例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-15T08:29:01.487

这可以用[Master theorem](https://en.wikipedia.org/wiki/Master_theorem)解决。你的`a=1`和`b=2`和`f(n) = log(n)`。然后`c = log2(1) = 0`。因为你`c`和`f(n)`你陷入了第二种情况（哪里`k=1`）。

所以解是**Θ(log ² n)**

# java - 与片段中动态创建的 EditText 交互

> ID：14679791
> 
> 赞同：0
> 
> 时间：2013-02-04T02:53:51.133
> 
> 标签：java, android, fragment

我正在使用 Eclipse 活动创建器中的标题条 + 滑动模板。这是我的片段代码：

```
 public static class FactorFragment extends Fragment {

    static EditText numHolder;
    Button btnFactor;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        Activity me = getActivity();
        // Create the layout
        // Create the views
        RelativeLayout holder = new RelativeLayout(me);
        numHolder = new EditText(me);
        numHolder.setId(1);
        btnFactor = new Button(me);
        btnFactor.setId(2);
        // Style the RelativeLayout
        holder.setLayoutParams(new RelativeLayout.LayoutParams(
                LinearLayout.LayoutParams.MATCH_PARENT,
                LinearLayout.LayoutParams.MATCH_PARENT));
        // Style the EditText
        RelativeLayout.LayoutParams edittext = new RelativeLayout.LayoutParams(
                LinearLayout.LayoutParams.WRAP_CONTENT,
                LinearLayout.LayoutParams.WRAP_CONTENT);
        edittext.addRule(RelativeLayout.ALIGN_BOTTOM, btnFactor.getId());
        edittext.addRule(RelativeLayout.ALIGN_PARENT_LEFT);
        edittext.addRule(RelativeLayout.LEFT_OF, btnFactor.getId());
        numHolder.setEms(10);
        numHolder.setInputType(InputType.TYPE_CLASS_NUMBER);
        numHolder.setLayoutParams(edittext);
        // Style the button
        RelativeLayout.LayoutParams btn = new RelativeLayout.LayoutParams(
                LinearLayout.LayoutParams.WRAP_CONTENT,
                LinearLayout.LayoutParams.WRAP_CONTENT);
        btn.addRule(RelativeLayout.ALIGN_PARENT_RIGHT);
        btn.addRule(RelativeLayout.ALIGN_PARENT_TOP);
        btnFactor.setText("Factor");
        btnFactor.setLayoutParams(btn);
        btnFactor.setOnClickListener(onClick);
        // Add them to the layout
        holder.addView(numHolder);
        holder.addView(btnFactor);
        return holder;
    }

    static OnClickListener onClick = new OnClickListener() {
        public void onClick(View v) {
            int num = Integer.parseInt(numHolder.getText().toString());
            Log.e("hi", Integer.toString(num));
        }
    };
} 
```

如您所见，我正在创建一个名为 numHolder 的 EditText，它将保存数值。我遇到的问题是，当我单击按钮时，在此行出现强制关闭错误：

```
 Log.e("hi", Integer.toString(num)); 
```

LogCat 告诉我`Integer.toString()`无法解析空字符串。但是，从我在上面的行中获得 EditText 的内容这一事实，这让我相信 1）我使用错误的方法从 EditText 获取数字或 2）numHolder 是出于某种原因无法使用。

怎么了？几个小时以来，我一直试图弄清楚这一点。

**编辑**：

我`static`从`EditText`和 中删除了`onClickListener`。它现在似乎起作用了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T02:59:59.607

您应该使用`numHolder.getText().toString()`numHolder 来获取 EditText 的内容。

您应该先检查 EditText 的内容，然后再将其转换为整数。

```
int num = 0;
try {
  String numText = numHolder.getText().toString();
  Log.d("Hi", "Text obtained is: " + numText);
  num = Integer.parseInt(numText);
} catch (NumberFormatException e) {
  // Handle exception
}
Log.e("hi", Integer.toString(num)); 
```

# ruby-on-rails - 连接子模型结果项的查询多次错误显示

> ID：14679793
> 
> 赞同：1
> 
> 时间：2013-02-04T02:54:10.413
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rails-models

我有以下模型，每个模型都是前一个模型的相关子代（为简洁起见，我排除了其他模型方法和声明）：

```
class Course < ActiveRecord::Base 
  has_many :questions

  scope :most_answered, joins(:questions).order('questions.answers_count DESC') #this is the query causing issues  
end 

class Question < ActiveRecord::Base 
  belongs_to :course, :counter_cache => true
  has_many: :answers

end 

class Answer < ActiveRecord::Base 
  belongs_to :question, :counter_cache => true
end 
```

现在我只`Course`填充了一个（所以当我在 console 运行时`Course.all.count`，我得到**1**）。第一个`Course`当前`questions`填充了三个，但是当我运行时`Course.most_answered.count`（如上所示，`most_answered`我的范围方法是这样写的），我在控制台中得到**3作为结果，这是不正确的。**我已经尝试了查询的各种迭代，以及咨询[Rails guide on queries](http://guides.rubyonrails.org/active_record_querying.html)，但似乎无法弄清楚我做错了什么。提前致谢。`Course`

 *** * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T03:58:43.437

据我所知，您 most_answered 范围正试图按`questions.answer_count`.

因为它是 no `sum`，并且由于第一门课程有三个答案，所以您加入该表将产生三个结果。

您需要做的是如下所示：

```
scope :most_answered, joins(:questions).order('questions.answers_count DESC')
  .select("courses.id, courses.name, ..., SUM(questions.answers_count) as answers_count")
  .group("courses.id, courses.name, ...")
  .order("answers_count DESC") 
```

您需要明确指定要选择的课程字段，以便可以在 group by 子句中使用它们。

编辑：

我提到的两个地方`courses.id, courses.name, ...`（在选择和组中），您都需要将其替换为您要选择的实际列。由于这是一个范围，因此最好选择课程表中的所有字段，但您需要单独指定它们。**

# smalltalk - Smalltalk 中的大数据？

> ID：14679794
> 
> 赞同：3
> 
> 时间：2013-02-04T02:54:10.383
> 
> 标签：smalltalk, bigdata

有了如此多的社交网络、新服务和无处不在的计算，[大数据](http://en.wikipedia.org/wiki/Big_Data)的新时代终于到来了，很难想象没有[海量数据](http://www.slideshare.net/bigdatalandscape/the-big-data-landscape)的未来。似乎在像 Java 这样的语言中，有像[Hadoop](http://en.wikipedia.org/wiki/Apache_Hadoop)这样的流行平台具有一个很好的生态系统。

我想知道 Smalltalk 的最新技术是什么。有人用 Smalltalk 做大数据吗？任何库、应用程序或经验报告？建议或建议？

# minify - 为什么 Google Closure Compiler 不重命名这些外部变量？

> ID：14679804
> 
> 赞同：3
> 
> 时间：2013-02-04T02:56:13.730
> 
> 标签：minify, google-closure-compiler

根据文档（[https://developers.google.com/closure/compiler/docs/api-tutorial3#externs](https://developers.google.com/closure/compiler/docs/api-tutorial3#externs)），似乎闭包编译器应该在不存在外部声明时重命名变量，包括使用来自外部的函数/变量时一点代码。他们给出的例子是

```
function makeNoteDom(noteTitle, noteContent, noteContainer) {
  // Create DOM structure to represent the note.
  var headerElement = textDiv(noteTitle);
  var contentElement = textDiv(noteContent);
...
} 
```

其中 textDiv 函数由某种第三方库在全局范围内声明。它说 textDiv 应该声明为外部以防止重命名。

我的问题是 - 当我将此代码或类似代码放入没有任何外部声明的[闭包编译器](http://closure-compiler.appspot.com/home)中时，为什么 textDiv 没有重命名（这会破坏代码），如文档所示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T14:36:27.527

编译器假定对未定义函数的调用实际上是对外部函数的调用。使用命令行编译器，您可以使用`--warning_level VERBOSE`让编译器将此情况视为错误。

[Web 应用程序](http://closure-compiler.appspot.com/)主要是为演示而构建的，默认情况下假设是这样。虽然您可以设置`VERBOSE`警告级别，但它不会更改此功能。有关选项的信息，请参阅[附加 Web 服务选项](https://code.google.com/p/closure-compiler/wiki/AdditionalWebserviceOptions)页面。我已经提交了一个关于这个的[错误报告](https://code.google.com/p/closure-compiler/issues/detail?id=911)。

由于属性的重命名算法，如果未在 externs 中的对象上声明相同的属性名称，则未声明的属性将以破坏方式重命名。

# android - 如果数据来自 Web 服务一小时前，Android 会获取数据

> ID：14679808
> 
> 赞同：0
> 
> 时间：2013-02-04T02:58:07.647
> 
> 标签：android

我有一个 android 应用程序，其中 web 服务数据不经常更新，比如一天一次。

我还必须将数据保存在数据库中以供离线查看，现在我在想，当用户单击按钮获取数据时，它会检查输入数据库的最后一个数据是否为一小时前，如果没有，则不从网络服务下载如果是，则下载。

所以，在我保存数据的时候，我会用它保存当前时间，并计算差异并获取最新数据。

这是一个正确的方法。

阿斯米

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T03:07:55.177

仅仅为此目的在数据库表中拥有一个字段并不是一种理想的方法。相反，您应该将当前时间保存在 SharedPreferences 中并比较时间以查看是否需要刷新数据。

# macos - 如何通过在每个选项卡上执行一些命令在 mac os Lion 的终端上自动打开多个选项卡？

> ID：14679809
> 
> 赞同：3
> 
> 时间：2013-02-04T02:58:08.473
> 
> 标签：macos, tabs, terminal

我需要自动打开带有多个选项卡的终端，并且需要在其上执行多个命令。

我知道如何在ubuntu中做到这一点。但它不适用于mac os。任何想法？

```
gnome-terminal --tab -e "tail -f somefile" --tab -e "some_other_command" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T03:00:04.617

我可以给你一个线索。

使用`osascript`，您可以做到。

**更新：**

您需要了解的一件事是，`gnome-terminal`对于 Linux。`Gnome`是为 Linux 编写的非常流行的桌面环境。

使用这个 oneliner 打开一个以 $PWD 作为工作目录的新选项卡：

```
osascript -e "tell application \"Terminal\"" -e "tell application \"System Events\" to keystroke \"t\" using {command down}" -e "do script \"cd $PWD; clear\" in front window" -e "end tell" > /dev/null 
```

跟随一个班轮将只打开一个带有`$PWD`工作目录的新选项卡并将执行`echo Hi`

```
osascript -e "tell application \"Terminal\"" -e "tell application \"System Events\" to keystroke \"t\" using {command down}" -e "do script \"cd $PWD; echo HI\" in front window" -e "end tell" > /dev/null 
```

# regex - 这个重写规则到底在做什么？

> ID：14679810
> 
> 赞同：1
> 
> 时间：2013-02-04T02:58:25.583
> 
> 标签：regex, mod-rewrite, url-rewriting

我没有很好地阅读正则表达式。有人可以帮我理解这到底在做什么吗？

```
RewriteRule ^[!/.]*([\/A-Za-z0-9]+)$ index.php 
```

我有一个基本的想法，只是没有具体的清晰，我不想错过一些重要的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T08:54:08.650

此正则表达式将匹配一个 url

*   以 !、/ 或 . 开头。和
*   后跟正斜杠、大写字母或数字。

所有符合此规则的 URL 请求都将发送到 index.php。

这是一个非常不寻常的 RewriteRule，因为它启用了以下 URL：

```
http://example.com/!asdf 
http://example.com/!.asdf2
http://example.com/!./asdf5
http://example.com/./asdf5
http://example.com/.asdf5 
```

这种类型的重写规则通常旨在将对不存在的文件/目录的请求定向到前端控制器。这样的事情可能会更好地为您服务：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^.*$ index.php 
```

# javascript - 挂钩 javascript “document.addEventListener”

> ID：14679813
> 
> 赞同：0
> 
> 时间：2013-02-04T02:59:09.597
> 
> 标签：javascript, events

在我的 html 中，我有一个事件绑定，如下所示：

```
document.addEventListener('keydown', onKeyDown); 
```

现在我想挂钩`keydown`事件，即，当发生时，调用另一个函数并手动`keydown`触发。`onKeyDown`

已经`document.addEventListener('keydown', onKeyDown);`存在（上游），我不想改变它。所以总结一下：

```
`keydown` -> `do something` -> `onKeyDown` 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T03:14:23.990

如果`onKeyDown`可以访问您的方法，则可以将其从事件侦听器中删除并重新附加修改后的版本：

```
function myKeyDown() {
    // your logic
    onKeyDone.apply(this, arguments);
}
document.addEventListener('keydown', myKeyDown);
document.removeEventListener('keydown', onKeyDown); 
```

# eigen - 为什么两个相似的浮点计算会给出两个不同的结果？

> ID：14679817
> 
> 赞同：1
> 
> 时间：2013-02-04T03:00:46.967
> 
> 标签：eigen, floating, floating-point-precision

以下代码通过仅使用特征向量**作为容器**或简单的 C 数组来实现相同的计算。它产生一个封闭但不是逐位等效的结果。

最后的数学运算是`x * alpha + y * beta`。

```
#include <Eigen/Eigen>

int main()
{
  Eigen::VectorXd x(2);
  double* y = new double[2];
  long long int a = 4603016991731078785;
  double ga = *(double*)(&a);
  long long int b = -4617595986472363966;
  double gb = *(double*)(&b);
  long long int x0 = 451;
  long long int x1 = -9223372036854775100;
  x[0] = *(double*)(&x0);
  y[0] = *(double*)(&x0);
  x[1] = *(double*)(&x1);
  y[1] = *(double*)(&x1);
  double r = ga*x[0] + gb*x[1];
  double s = ga*y[0] + gb*y[1];
} 
```

为什么会这样？

使用 MSVC 和 gcc（64 位操作系统）时结果不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T12:39:33.570

这可能是因为一个计算完全在 FPU（浮点单元）内完成，精度为 80 位，而另一个计算部分使用 64 位精度（双精度的大小）。这也可以在不使用 Eigen 的情况下证明。看下面的程序：

```
int main()
{
  // Load ga, gb, y[0], y[1] as in original program
  double* y = new double[2];
  long long int a = 4603016991731078785;
  double ga = *(double*)(&a);
  long long int b = -4617595986472363966;
  double gb = *(double*)(&b);
  long long int x0 = 451;
  long long int x1 = -9223372036854775100;
  y[0] = *(double*)(&x0);
  y[1] = *(double*)(&x1);

  // Compute s as in original program
  double s = ga*y[0] + gb*y[1];

  // Same computation, but in steps
  double r1 = ga*y[0];
  double r2 = gb*y[1];
  double r = r1+r2;
} 
```

如果你在没有优化的情况下编译它，你会看到 r 和 s 有不同的值（至少，我在我的机器上看到了）。看汇编代码，在第一次计算中，将ga、y[0]、gb和y[1]的值加载到FPU中，那么计算ga * y[0] + gb * y[1]为完成，然后将结果存储在内存中。FPU 使用 80 位进行所有计算，但是当结果存储在内存中时，数字会四舍五入，以使其适合双精度变量的 64 位。

第二次计算以不同的方式进行。首先，将 ga 和 y[0] 加载到 FPU 中，相乘，然后四舍五入为 64 位数字并存储在内存中。然后，gb 和 y[1] 被加载到 FPU 中，相乘，然后四舍五入为 64 位数字并存储在内存中。最后，将 r1 和 r2 加载到 FPU 中，相加，四舍五入为 64 位数字并存储在内存中。这一次，计算机对中间结果进行四舍五入，这导致了差异。

对于此计算，舍入具有相当大的影响，因为您正在使用非正规数。

现在，我不太确定的地方来了（如果这是你的问题，我很抱歉）：这与原始程序有什么关系，其中 x 是一个 Eigen 容器？这里的计算如下：调用 Eigen 中的函数以获取 x[0]，然后 ga 并将该函数的结果加载到 FPU 中，相乘并存储在临时内存位置（64 位，所以这是圆角）。然后将 gb 和 x[1] 加载到 FPU 中，相乘，加到存储在临时内存位置的中间结果，最后存储在 x 中。所以在原程序计算r时，将ga*x[0]的结果四舍五入到64位。原因可能是浮点堆栈没有在函数调用中保留。

# c# - WCF 和 SimpleMembershipProvider。如何管理用户？

> ID：14679818
> 
> 赞同：1
> 
> 时间：2013-02-04T03:01:12.970
> 
> 标签：c#, asp.net, .net, wcf

我有基于 SimpleMemebershipProvider 的具有用户身份验证的 ASP.NET MVC 4 应用程序。使用 Ms SQL 数据库。一切正常。我可以注册新用户，登录，注销等。

问题是我想创建可以连接到服务器的 Windows 窗体应用程序，并且在传递凭据后它可以验证用户是否存在于数据库中（通过 MVC 注册），如果存在，请做一些事情，例如更改用户名或密码。我的想法是使用 WCF 服务库。我知道 WCF 的基本概念，或者至少我希望如此 :) 我知道有可能对用户进行身份验证。

我在网上搜索，但我没有找到如何使用 simplememebership 提供者来做到这一点。我也尝试过自己编写 WCF 服务库，并在下面创建了类似的东西，但它不起作用。当我测试并输入错误的凭据时，它会返回字符串“坏凭据”，这很好。但是，当我输入有效凭据时，它会在线显示错误“NullReference 异常”：

`if (WebSecurity.Login(UserName, password, persistCookie: false))`.

我也不认为它是安全的：/

有人可以解释一下我该怎么做或我做错了什么吗？或者也许有比 WCF 更好的解决方案？

**服务1.cs**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Runtime.Serialization;
using System.ServiceModel;
using System.Text;
using WebMatrix.WebData;
using System.Web.Mvc;

namespace AR_WCF_Library
{
    // NOTE: You can use the "Rename" command on the "Refactor" menu to change the class name "Service1" in both code and config file together.
    public class Service1 : IService1
    {
        public string GetData(string UserName, string password)
        {

            WebSecurity.InitializeDatabaseConnection("MyDB", "UserProfile", "UserId", "UserName", autoCreateTables: false);

            if (WebSecurity.Login(UserName, password, persistCookie: false))
            {
                return string.Format("Hello: {0}", UserName);
            }
            else
            {
                return "bad credentials";
            }
        }

    }
} 
```

**应用程序配置**

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>

  <appSettings>
    <add key="aspnet:UseTaskFriendlySynchronizationContext" value="true" />
  </appSettings>
  <connectionStrings>

    <add name="MyDB" connectionString="Data Source=SERWER\MORPHEUS;Initial Catalog=AOR;Integrated Security=True;Connect Timeout=15;Encrypt=False;TrustServerCertificate=False" providerName="System.Data.SqlClient" />

  </connectionStrings>
  <system.web>
    <compilation debug="true" />

    <roleManager enabled="true" defaultProvider="SimpleRoleProvider">
      <providers>
        <clear/>
        <add name="SimpleRoleProvider" type="WebMatrix.WebData.SimpleRoleProvider, WebMatrix.WebData"/>
      </providers>
    </roleManager>

    <membership defaultProvider="SimpleMembershipProvider">
      <providers>
        <clear/>
        <add name="SimpleMembershipProvider"
             type="WebMatrix.WebData.SimpleMembershipProvider, WebMatrix.WebData"
             enablePasswordReset="true" />
      </providers>
    </membership>

  </system.web>
  <!-- When deploying the service library project, the content of the config file must be added to the host's 
  app.config file. System.Configuration does not support config files for libraries. -->
  <system.serviceModel>
    <services>
      <service name="AR_WCF_Library.Service1">
        <host>
          <baseAddresses>
            <add baseAddress = "http://localhost:8733/Design_Time_Addresses/AR_WCF_Library/Service1/" />
          </baseAddresses>
        </host>
        <!-- Service Endpoints -->
        <!-- Unless fully qualified, address is relative to base address supplied above -->
        <endpoint address="" binding="wsHttpBinding" contract="AR_WCF_Library.IService1">
          <!-- 
              Upon deployment, the following identity element should be removed or replaced to reflect the 
              identity under which the deployed service runs.  If removed, WCF will infer an appropriate identity 
              automatically.
          -->
          <identity>
            <dns value="localhost"/>
          </identity>
        </endpoint>
        <!-- Metadata Endpoints -->
        <!-- The Metadata Exchange endpoint is used by the service to describe itself to clients. --> 
        <!-- This endpoint does not use a secure binding and should be secured or removed before deployment -->
        <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange"/>
      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior>
          <!-- To avoid disclosing metadata information, 
          set the values below to false before deployment -->
          <serviceMetadata httpGetEnabled="True" httpsGetEnabled="True"/>
          <!-- To receive exception details in faults for debugging purposes, 
          set the value below to true.  Set to false before deployment 
          to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="False" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
  </system.serviceModel>

</configuration> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T12:46:57.400

将以下内容添加到任何托管 WCF 服务的 Web.config 中：

```
<system.serviceModel>
   <serviceHostingEnvironment aspNetCompatibilityEnabled="true" />
</system.serviceModel> 
```

# c++ - 在 C++ 错误中重载 << 运算符 ::: 二进制 '<<' : 未找到采用 'const std::string 类型的右侧操作数的运算符

> ID：14679821
> 
> 赞同：1
> 
> 时间：2013-02-04T03:01:43.037
> 
> 标签：c++, oop, operator-overloading

我正在尝试重载 << 运算符，以便像这样打印出学生对象：

```
Student: <name>,<number>,<email address>,<year>,<major> 
```

尝试编译显示以下内容的程序时，我不断收到错误消息：

```
error C2679: binary '<<' : no operator found which takes a right-hand operand of type 'const std::string' (or there is no acceptable conversion) 
```

我的实现文件中的函数如下所示：

```
ostream& operator<<(ostream& output, const Student& student)
{
  output << "Student: " << student.name <<", " << student.m_Number <<", " << student.email <<", " << student.year << ", " << student.major << endl;
  return output;
} 
```

我这个类的头文件：

```
#include <iostream>

using namespace std;

class Student
{
public:
   //Default constructor
   Student();
   //Set the student information
   Student setStudent(string[], int);
   //Retrieve the Student M_Number
   int getM_Number();

   friend ostream& operator << (ostream& output, const Student& student);

private:
   //Student's name, M_Number, Email Address, Year in School and Major
   string name;
   int m_Number;
   string email;
   string year;
   string major;

}; 
```

如果有人可以帮助我弄清楚是什么给了我这个问题，我将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-04T03:04:04.197

你需要

```
#include <string> 
```

为了得到适当的声明`operator<<(std::ostream&, std::string)`

# java - 计算基于移动和时间的游戏得分的算法

> ID：14679822
> 
> 赞同：-3
> 
> 时间：2013-02-04T03:01:44.287
> 
> 标签：java, android

我正在创建一个由动作和时间组成的益智游戏。

显然，你结束游戏的动作越多，意味着你比完成后剩下的少量动作做得更好或水平更高。

时间从 0 开始计算，直到玩家完成关卡。玩家完成关卡所需的时间越少，这意味着他/她比花费大量时间来完成关卡做得更好。

话虽如此，使用此信息计算球员最终得分等于超过 1000 分的最佳方法是什么。

PS我知道对你们中的一些人来说这可能是一件容易的事，但我只想在这方面得到一些指导。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T03:10:45.950

这太主观了。你为什么不决定什么是合适的？

您需要决定哪个更重要：移动次数或速度。

然后，为其中一个或另一个计算一个合适的惩罚，以及一个分数乘数，使你的分数在合理的范围内。

就个人而言，我会先提供按动作排序的原始统计数据，然后是时间。例如：

```
Moves       Time
10          02:30
15          02:00
15          02:35
20          01:50 
```

在这里，我使用了使用的移动次数*，*而不是*剩余的*。你的描述令人困惑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T03:14:57.387

稻谷说的。另一方面，你可以去

```
(1/sqrt(time) + 2/(moves^2))*1000 
```

这至少可以确保使用的时间和做出的动作都与玩家获得的点数成反比。使用这个公式计算 4 次幂的移动与时间一样多，这可能是矫枉过正。

# php - 针对更具体的网络浏览器用户（版本）

> ID：14679825
> 
> 赞同：0
> 
> 时间：2013-02-04T03:02:55.170
> 
> 标签：php, html, browser, web

有没有针对浏览器版本的用户？

现在我目前有：

```
<?php
    if(strpos($_SERVER['HTTP_USER_AGENT'], 'MSIE') !== FALSE)
                    $browser = 'ie';
    elseif(strpos($_SERVER['HTTP_USER_AGENT'], 'Firefox') !== FALSE)
                    $browser = 'firefox';
    elseif(strpos($_SERVER['HTTP_USER_AGENT'], 'Safari') !== FALSE)
                    $browser = 'safari';

                    elseif(strpos($_SERVER['HTTP_USER_AGENT'], 'Chrome') !== FALSE)
                            $browser = 'chrome';

                            else
                                    $browser = 'Something else'; 

    include $browser.'.php';

    ?> 
```

目前，我正在将人们发送到浏览器样式的页面..但是我想更深入一点并针对他们的版本，例如：FireFox 3.6 - 18

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T03:08:19.980

您也可以从 $_SERVER['HTTP_USER_AGENT'] 获取版本。

```
if (strpos($_SERVER['HTTP_USER_AGENT'], 'Firefox/18') !== FALSE)
{
    $browser = 'firefox';
    $version = '18';
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T03:29:56.810

您可以使用“ [get_browser](http://www.php.net/manual/en/function.get-browser.php) ”，它看起来非常适合您的需要。

这是一个概念示例：

```
<?php

$user=get_browser(null,true)

if($user['browser'] == 'Firefox')
{
    if($user['version'] == '2.0')
    {
        if($user['platform'] == 'Linux')
        ...
    }
}

?> 
```

有关更多详细信息，请参阅文档。

# c# - MVC3 模型抛出 null 即使它们不是表单的一部分。如何做“只读”模型值

> ID：14679827
> 
> 赞同：1
> 
> 时间：2013-02-04T03:03:22.033
> 
> 标签：c#, asp.net-mvc, razor

所以在我看来，我只想能够读取模型提供的值。

```
@{
    var bgPath = "../Files/somedir/" + Model.FilePath;
} 
```

所以我可以将它转储到一个字符串中以将图像渲染到 DOM：

```
 <img id="bg-image" class="background-image" src="@bgPath" draggable ="false" alt="" /> 
```

现在，这工作得很好。我的视图正确呈现。我的问题是，提交表单时，会抛出**Model.FilePath 为空的错误。**

代码已经在视图中的主要（也是唯一的）表单字段之外。

我不想绑定这些数据，我只是用它来给 js 赋值。我还有许多其他领域似乎可以工作，并且没有真正的选择来改变它而无需大量重写。

所以我的问题是，如何获得只读模型值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T03:06:15.957

您需要将其保存在表单的隐藏字段中，以便 MVC 模型绑定在提交表单时使其可用。

```
@using(Html.Beginform())
{
   @Html.HiddenFor(x=>x.FilePath)
   //other elements also 
   <input type="submite" />
} 
```

但请记住，隐藏值字段可以在发布之前使用浏览器扩展（如萤火虫）进行更改。因此，如果您没有通过从用户读取新值来更新文件路径，请执行以下任一操作

1) 仅更新相关字段。有一个 Update 方法，它只更新模型的相关字段。

```
 public bool UpdateCustomer(string name,string description,int id); 
```

2）如果更新所有字段，首先从域对象中读取并更新

```
[HttpPost]
public ActionResult Edit(YourViewModel model)
{
  var domainObject=repo.GetCustomerFromID (model.ID)
  //update only the relevant fields on loaded domain object
  domainObject.Description=model.Description;
  repo.SaveCustomer(domainObject);
  return RedirectToAction("Success");
} 
```

# python - 根据项目的长度将python列表分成块

> ID：14679836
> 
> 赞同：5
> 
> 时间：2013-02-04T03:04:38.083
> 
> 标签：python, list, limit, chunks, slice

我在这里看到了一些关于如何将 Python 列表拆分为块的好帖子，例如[如何将可迭代的对象拆分为固定大小的块](https://stackoverflow.com/questions/8290397/how-to-split-an-iterable-in-constant-size-chunks)。大多数帖子处理分割块或将列表中的所有字符串连接在一起，然后根据正常的切片例程进行限制。

但是，我需要基于字符限制执行类似的操作。如果您有一个句子列表但不能截断列表中的任何切片。

我可以在这里编写一些代码：

```
def _splicegen(maxchars, stringlist):
    """
    Return a list of slices to print based on maxchars string-length boundary.
    """
    count = 0  # start at 0
    slices = []  # master list to append slices to.
    tmpslices = []  # tmp list where we append slice numbers.

    for i, each in enumerate(stringlist):
        itemlength = len(each)
        runningcount = count + itemlength
        if runningcount < int(maxchars):
            count = runningcount
            tmpslices.append(i)
        elif runningcount > int(maxchars):
            slices.append(tmpslices)
            tmpslices = []
            count = 0 + itemlength
            tmpslices.append(i)
        if i==len(stringlist)-1:
            slices.append(tmpslices)
    return slices 
```

输出应返回如下内容：切片为：[[0, 1, 2, 3, 4, 5, 6], [7, 8, 9, 10, 11, 12, 13], [14, 15, 16, 17, 18, 19, 20]] （每个数字引用字符串列表中的一个项目）

所以，当我遍历这个列表列表时，我可以使用类似 "".join([item for item in each]) 的东西在一行上打印 0,1,2,3,4,5,6, 7, 8,9,10,11,12,13 在另一个上。有时，一个列表可能只有 2 个项目，因为这两个项目中的每一个都非常长（加起来会低于 380 个字符或其他字符的限制）。

我知道代码很糟糕，我应该使用生成器。我只是不确定该怎么做。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T03:36:20.740

像这样的东西应该工作

```
def _splicegen(maxchars, stringlist):
    """
    Return a list of slices to print based on maxchars string-length boundary.
    """
    runningcount = 0  # start at 0
    tmpslice = []  # tmp list where we append slice numbers.
    for i, item in enumerate(stringlist):
        runningcount += len(item)
        if runningcount <= int(maxchars):
            tmpslice.append(i)
        else:
            yield tmpslice
            tmpslice = [i]
            runningcount = len(item)
    yield(tmpslice) 
```

另请参阅[textwrap](http://docs.python.org/2/library/textwrap.html)模块

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T03:16:21.427

这只是一个班轮。希望它有用

```
>>>list=[[1,2], [1]]
>>>sorted(list, key=lambda sublist: len(sublist))
[[1], [1,2]] 
```

还：

```
>>>list=[[1,2,3],[1],[1,2]]
>>>sorted(list, key=lambda sublist: -len(sublist))
[[1,2,3], [1,2], [1]] 
```

# java - 线程“主”java.net.BindException 中的异常：地址已在使用中 - 仅 Netbeans 中的错误

> ID：14679837
> 
> 赞同：6
> 
> 时间：2013-02-04T03:04:46.743
> 
> 标签：java, netbeans

在我的机器上，以下代码在 Eclipse 中编译，但在 Netbeans 中引发异常。错误消息显示“线程“主”java.net.BindException 中的异常：地址已在使用中”。

Netbeans 中使此代码编译的正确配置是什么？似乎问题与我有两个主要功能有关。如果我开始运行其中一个应用程序，第二个应用程序将无法启动，引发上面发布的异常。

服务器.java

```
import java.io.*;
import java.net.*;

public class Server {

    public static void main(String[] args) throws Exception {

        Server myServ = new Server();
        myServ.run();

    }

    public void run() throws Exception {

        ServerSocket mySS = new ServerSocket(9999);
        Socket SS_accept = mySS.accept();

        InputStreamReader mySR = new InputStreamReader(SS_accept.getInputStream());
        BufferedReader myBR = new BufferedReader(mySR);

        String temp = myBR.readLine();
        System.out.println(temp);

    }

} 
```

客户端.java

```
import java.io.*;
import java.net.*;

public class Client {

    public static void main(String[] args) throws Exception {

        Client myCli = new Client();
        myCli.run();

    }

    public void run() throws Exception {

        Socket mySkt = new Socket("localhost", 9999);
        PrintStream myPS = new PrintStream(mySkt.getOutputStream());

        myPS.println("Hello server");

    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T14:53:27.840

实现我想要的方法是右键单击`Server.java`我要运行的特定类（例如）并选择“运行此文件”。这使我能够仅运行服务器应用程序。然后，对另一个文件`Client.java`.

但是，在这种特殊情况下，Netbeans 有点令人困惑/欺骗。Netbeans 所做的是它运行该`Server`进程，但将该进程标记为项目的名称（例如 MyTestNetworkingProject）并在其上放置一个运行编号，从而为我们提供`MyTestNetworkingProject run #1`（实际上它在第一个进程中省略了 #1）。然后，如果我转到 Client.java 文件并选择“运行此文件”，它会生成第二个进程，`MyTestNetworkingProject run #2`. 然后它会在屏幕底部生成第二个结果窗口，因为它会在创建新进程时在新选项卡中生成这些结果。

由于我的特定代码的性质，我想在结果窗口中看到以确认我的应用程序正在运行的是我想观察 Server.java 结果窗口（在本例中为`MyTestNetworkingProject run #1`）。鉴于我上面列出的运行不同文件的确切步骤顺序，运行 #2 是最后一个运行过程，因此顶部的选项卡覆盖了运行 #1 选项卡。我可以单击运行#1 并查看我希望在控制台中看到的结果（“Hello server”），但我只需要知道/记住它`MyTestNetworkingProject run #1`代表的是服务器应用程序而不是客户端应用程序。

不酷，海事组织。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-04T03:23:19.720

问题是由于您让服务器的一个实例运行，然后启动另一个实例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T03:12:34.637

如果你是在windows系统下写的，你可以使用netstat -nao来查看哪个进程使用了​​9999端口。如果是不重要的进程，你可以杀掉这个进程。否则你可以改变程序的端口。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2021-04-04T06:55:07.260

我确实尝试了该方法`catch`并解决了问题。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2018-05-21T01:20:11.653

服务器.java

```
public class SocServer {

    public static void main(String[] args) {
        try {
            ServerSocket server = new ServerSocket(5001);
            Socket client = server.accept();
            DataOutputStream os = new DataOutputStream(client.getOutputStream());
            os.writeBytes("Hello Sockets\n");
            client.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
} 
```

客户端.java

```
public class SocClient {

    public static void main(String[] args) {
        try {
            Socket socClient = new Socket("localhost", 5001);
            InputStream is = socClient.getInputStream();
            BufferedReader br = new BufferedReader(new InputStreamReader(is));
            String receivedData = br.readLine();
            System.out.println("Received Data: " + receivedData);
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

} 
```

参考上面的代码，它对我有用..

# javascript - 警报栏而不是警报框

> ID：14679838
> 
> 赞同：0
> 
> 时间：2013-02-04T03:04:52.747
> 
> 标签：javascript, html, css

我现在有一个脚本，可以防止用户在我的表单的状态字段中输入除状态缩写之外的任何内容。感谢[吉迪恩](https://stackoverflow.com/users/368070/gideon)

我稍微修改了脚本，以便在输入无效状态时包含一条警报消息。但我真的不喜欢它。我想要一个在页面顶部或字段正下方闪烁的警报栏。当输入不正确的缩写时自动出现的东西并闪烁以吸引用户的注意力并在几秒钟后消失。欢迎任何想法或想法！我非常愿意接受建议！再次感谢！

我开始认为你们不理解我。这是我的代码：

```
<script>
                        function validateState(el) {
                        //put all states in this array. 
                        var states =    ["AK","AL","AR","AS","AZ","CA","CO","CT","DC","DE",
                    "FL","GA","GU","HI","IA",
                    "ID","IL","IN","KS","KY","LA","MA","MD","ME","MH","MI","MN","MO","MS","MT",
                    "NC","ND","NE","NH","NJ","NM","NV","NY","OH","OK","OR","PA","PR","PW","RI",
                    "SC","SD","TN","TX","UT","VA","VI","VT","WA","WI","WV","WY"];
                        for(var i=0;i< states.length;i++) {
                          if(el.value.toUpperCase() == states[i]) {
                            return true;
                          }
                        }
                        //clear element if it doesn't match a state
                        el.value = ""; //you could maybe do something else here.
                        alert('Invalid State Abbreviation, You must fix this before continuing')
                        document.getElementById("state").focus();
                        return false;
                    }
                    </script> 
```

如果语句返回 false，我希望在屏幕上运行一个条形图。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T03:17:11.460

您可以简单地创建一个位于用户视图上方的元素（顶部：-100px 等）。进入无效状态后，您可以使用 jQuery 之类的库将其设置为顶部位置 0。您可以使用 setInterval() 内的简单条件语句使其闪烁；

我不确定您是否要使用 jQuery，但如果您这样做，那么您的代码将如下所示：

```
//if the input is not what you expect..
if(input != state){
    //drop the bar down
    $("#bar").animate({
            top: 0
    }, 1500);//drop it in 1500 milliseconds.
    //this is a lot like a loop that runs every 400 milliseconds.. 
    setInterval(function () {  <-------------------------------| 
        if ($("#bar").css("display") == 'none') {              |
            //if the bar is HIDDEN show it..                   |
            $("#bar").show();                                  |  
        } else {                                               | 
            //else hide it.                                    | 
            $("#bar").hide();                                  |
        }                                                      |
    }, 400);//<< EVERY 400 milli-seconds go here >-------------^
} 
```

当然这只是一个例子，可以很容易地转换回传统的 JavaScript。

查看[jsFiddle](http://jsfiddle.net/grFT7/)。

我希望这就是你要找的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T05:14:59.370

调整@Shawn 的代码，您需要一个函数来显示栏和隐藏栏，我已经删除了使栏闪烁的代码：

```
function ShowError(txt)
{
  $("#bar").show();
  $("#bar").text(txt);
  $("#bar").animate({
      top: 0
  }, 1500);
}
function ClearError()
{
   $("#bar").hide();
} 
```

然后稍后您将执行以下操作：

```
if(el.value.toUpperCase() == states[i]) {
     ClearError();
     return true;
} else {
      ShowError("Please Enter a valid state");
} 
```

查看此处运行的整个代码：http: [//jsfiddle.net/grFT7/8/](http://jsfiddle.net/grFT7/8/)

* * *

要使该栏在某个时候消失，您可以：

```
 setInterval(function () { $("#bar").hide(); }, 5000);
                           //hide the bar every 5 secs (5000 milliseconds). 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T04:24:00.550

使用[BootStrap 的警报](http://twitter.github.com/bootstrap/components.html#alerts)。它易于使用且看起来很酷。

# objective-c - NSWindow 设置视图

> ID：14679839
> 
> 赞同：0
> 
> 时间：2013-02-04T03:05:00.170
> 
> 标签：objective-c, macos, cocoa, nswindow

我的应用程序有不同的部分。我想让按钮改变视图。因此，如果我单击第一个按钮，Windows 的视图将更改为另一个视图。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T03:59:47.867

更新：使用此代码的示例项目：

[切换视图.zip](http://www.markdouma.com/developer/SwitchView.zip)

![在此处输入图像描述](../Images/760a018a900a4e69cd4c075df8b91cdf.png)

您可以使用以下类别`NSWindow`来实现从一个视图切换到另一个视图。

MDAppKitAdditions.h：

```
@interface NSWindow (MDAdditions)
- (CGFloat)toolbarHeight;
- (void)resizeToSize:(NSSize)newSize;
- (void)switchView:(NSView *)aView title:(NSString *)aString;
- (void)switchView:(NSView *)aView;
@end 
```

MDAppKitAdditions.m：

```
static NSView *blankView() {
    static NSView *view = nil;
    if (view == nil) view = [[NSView alloc] init];
    return view;
}

@implementation NSWindow (MDAdditions)

- (CGFloat)toolbarHeight {
    NSToolbar *toolbar = self.toolbar;
    CGFloat toolbarHeight = 0.0;
    if (toolbar && toolbar.isVisible) {
        NSRect windowFrame = [[self class] contentRectForFrameRect:self.frame
                                                     styleMask:self.styleMask];
        toolbarHeight = NSHeight(windowFrame) - NSHeight([self.contentView frame]);
    }
    return toolbarHeight;
}

- (void)resizeToSize:(NSSize)newSize {
    CGFloat newHeight = newSize.height + [self toolbarHeight];
    CGFloat newWidth = newSize.width;
    NSRect aFrame = [[self class] contentRectForFrameRect:self.frame
                                                styleMask:self.styleMask];
    aFrame.origin.y += aFrame.size.height;
    aFrame.origin.y -= newHeight;
    aFrame.size.height = newHeight;
    aFrame.size.width = newWidth;
    aFrame = [[self class] frameRectForContentRect:aFrame
                                         styleMask:self.styleMask];
    [self setFrame:aFrame display:YES animate:YES];
}

- (void)switchView:(NSView *)aView title:(NSString *)aTitle {
    if (self.contentView != aView) {
        [self setContentView:blankView()];
        if (aTitle) [self setTitle:NSLocalizedString(aTitle, @"")];
        [self resizeToSize:aView.frame.size];
        [self setContentView:aView];
    }
}

- (void)switchView:(NSView *)aView {
    return [self switchView:aView title:nil];
}

@end 
```

要使用它，我假设您将拥有一个如下所示的控制器类，其中 IBOutlets 用于视图和您的主窗口：

```
@interface MDAppController : NSObject {
    IBOutlet NSWindow  *mainWindow;
    IBOutlet NSView    *firstView;
    IBOutlet NSView    *secondView;
}

- (IBAction)changeView:(id)sender;

@end 
```

然后在你的实现中，像这样：

```
#import "MDAppKitAdditions.h"

@implementation MDAppController

- (IBAction)changeView:(id)sender {
    NSInteger tag = [sender tag];
    NSView *targetView = nil;

    if (tag == 0) {
       targetView = firstView;
    else if (tag == 1) {
       targetView = secondView;
    }
    [mainWindow switchView:targetView title:@"New window title"];
}

@end 
```

您可以对其进行设置，以便您要用于切换视图的按钮每个都调用相同的`changeView:`方法，而不是为每个按钮定义单独的方法。在 Interface Builder 的 nib 文件中，您可以设置按钮的 tag 属性以区分它们。在运行时，当您单击按钮并调用该`changeView:`方法时，该按钮将作为通用`sender`参数传入，因此您可以检查它以确定您应该切换到哪个视图。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T05:28:37.263

使用[NSTabView](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSTabView_Class/Reference/Reference.html)。您可以使选项卡视图无边框，以便不绘制边框或选项卡（使用`[tabView setTabViewType:NSNoTabsNoBorder]`），然后实现您自己的按钮操作，通过使用`-selectTabViewItem:`或切换活动选项卡以编程方式更改视图`-selectTabViewItemAtIndex:`。这具有额外的好处，即能够在 Interface Builder 中配置所有视图。

# android - 我应该为这个实现套接字服务器的实用程序类使用上下文吗？

> ID：14679840
> 
> 赞同：0
> 
> 时间：2013-02-04T03:05:07.060
> 
> 标签：android, android-context

在设置如下所示的此类时，对上下文的需求有点困惑。在创建此类的实例以在我的活动中使用它时，我是否需要上下文？

我可以像这样为类设置构造函数：

```
 public Server(Context myContext) 
```

或没有上下文作为参数，不使用上下文：

```
 public Server() 
```

现在获取更多来自 Server 类的代码：

```
public class Server {

private TextView serverStatus;
public TextView receivedCommand;
public String line = null;

// default ip
 // public static String SERVERIP = "192.168.1.001";
public static String SERVERIP = "localhost";

// designate a port
public static final int SERVERPORT = 8080;

private Handler handler = new Handler();

private ServerSocket serverSocket;

public Server(){
     SERVERIP = getLocalIpAddress();

     Thread fst = new Thread(new ServerThread());
     fst.start();
}

public class ServerThread implements Runnable {

// ... the rest of the code 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T03:10:32.233

如果您的类扩展`android.app.Service`了，那么您已经可以访问`getApplicationContext()`但已经说过这`Context`不是必需的，但是我们通常使用它来从我们的服务内部访问应用程序首选项和目录。

# javascript - 如何使用 avgrund 创建两个弹出窗口，而不让它们同时显示？

> ID：14679843
> 
> 赞同：0
> 
> 时间：2013-02-04T03:05:45.307
> 
> 标签：javascript, css, popup, modal-dialog, avgrund

我正在尝试使用 js 库[Avgrund](http://lab.hakim.se/avgrund/)创建两个弹出窗口。问题是，每当我在同一页面上有两个表单时，只要调用 activate 函数，它们都会被激活。

总结一下javascript-用户按下登录或注册按钮，并导致调用以下内容：

```
 function activate( state , selector ) {

    var popup = document.querySelector( selector );

    document.addEventListener( 'keyup', onDocumentKeyUp, false );
    document.addEventListener( 'click', onDocumentClick, false );

    removeClass( popup, currentState );
    addClass( popup, 'no-transition' );
    addClass( popup, state );

    setTimeout( function() {
        removeClass( popup, 'no-transition' );
        addClass( container, 'avgrund-active' );
    }, 0 );

    currentState = state;
} 
```

这会将“活动”类添加到表单中，并导致显示签名 avgrund 转换和弹出窗口 -**用于两种表单**。querySelector 的目的是仅修改具有与其关联的特定 id（选择器）的 side 元素。这应该只导致**具有特定 id（'#login' 或 '#signup'）的表单弹出**。

旁边元素的类（登录和登录表单）根据每个按钮进行更改 - 但两者都显示弹出窗口。最后，其中一种形式始终显示在另一种形式之上。

这是[CodePen中问题的简化版本](http://codepen.io/anon/pen/zqepn)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T17:00:55.413

您可以为此使用 Avgrund jQuery 插件。它是原始 Avgrund 概念的更跨浏览器安全且灵活的包装器。

[http://labs.voronianski.com/jquery.avgrund.js](http://labs.voronianski.com/jquery.avgrund.js)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-24T17:13:46.067

您可以在第一个弹出窗口的 onUnload 属性中加载第二个弹出窗口（使用[Avgrund jquery 插件](http://labs.voronianski.com/jquery.avgrund.js/)）。

**jQuery代码**

```
$("#first").avgrund({
    onUnload: function (elem) {
        $('#second').click();
    },
    template: 'first popup'
});

$("#second").avgrund({
    template: 'second popup'
}); 
```

**HTML**

```
<a href="#" id="first">Open first popup</a>
<a href="#" id="second" style="display:none;">Open second popup</a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-29T19:46:02.260

您可以按如下方式触发 Avgrund 的模态

**JavaScript**

```
function openDialog() {
  Avgrund.show("#default-popup");
}
```

**HTML**

```
<body>
  <button onclick="javascript:openDialog();">Open Avgrund</button>
  <aside id="default-popup" class="avgrund-popup">
    <h2>Header</h2>
    <p>...</p>
    <button onclick="javascript:closeDialog();">Close</button>
  </aside>
</body>
```

[来源](https://github.com/hakimel/avgrund)：[https ://github.com/hakimel/avgrund](https://github.com/hakimel/avgrund)

# ios - 如何在 NSUrl 中传递 * () $ 等？

> ID：14679848
> 
> 赞同：0
> 
> 时间：2013-02-04T03:06:20.007
> 
> 标签：ios, nsurl

例如，我试图将这些字符传递给服务器`*()$`

我以这种方式对 NSUrl 进行了编码：

```
NSString *partialURL = [NSString stringWithFormat:@"/%@", commentBody];
NSString *fullURL = [NSString stringWithFormat:@"%@%@", CONST_URL, partialURL];
NSString *encStr = [fullURL stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
NSURL *url = [NSURL URLWithString:encStr]; 
```

但是随后，`commentBody`传入的 url 仍然有`*()$`东西并且没有编码成 utf8。

正确的方法是什么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T03:09:52.910

```
NSString * test = (NSString *) CFURLCreateStringByAddingPercentEscapes(kCFAllocatorDefault, 
                                                                            (CFStringRef)validUrl,
                                                                            NULL, 
                                                                            (CFStringRef)@";/?:@&=$+{}<>,",
                                                                            kCFStringEncodingUTF8); 
```

**更新**

嗨@Rendy。对不起昨天的快速回复。在跳下之前，我只有时间经过一个 1 班轮，并希望这足以让您纠正您遇到的问题。

您总是希望对 URL 的参数进行编码。如果您的 URL 是另一个 URL 的参数或嵌入在某些 XML 中；您需要对整个 url 进行编码（这意味着参数会被双重编码 - 因为您采用“有效” URL 并将其转义，因此它成为另一个 URL 中的有效参数（即，`:`并被`&`转义，因此参数不会混合在一起。）

如果您愿意，您可以在下面的字符串中添加额外的字符，它们将被百分比编码值替换。我相信下面的字符串已经涵盖了无效值。

这是一个类别`NSString`：

```
@implementation NSString (encode)

+ (NSString*)stringEncodedAsUrlParameter:(NSString *)string
{
    NSString *newString = NSMakeCollectable(
                [(NSString *)CFURLCreateStringByAddingPercentEscapes(
                                                                     kCFAllocatorDefault,
                                                                     (CFStringRef)string,
                                                                     NULL, /* charactersToLeaveUnescaped */
                                                                     CFSTR(":/?#[]@!$ &'()*+,;=\"<>%{}|\\^~`"),
                                                                     kCFStringEncodingUTF8
                                                                     ) autorelease]
                );

    if (newString) {
        return newString;
    }
    return @"";
}

- (NSString*)stringByEncodingAsUrlParameter
{
    return [NSString stringEncodedAsUrlParameter:self];
}

@end 
```

像这样称呼它：

```
NSString * escapedParameters = [NSString stringEncodedAsUrlParameter:unescapedParameters]; 
```

或者：

```
NSString * escapedParameters = [unescapedParameters stringByEncodingAsUrlParameter]; 
```

然后将正确转义的参数添加到 URL 的末尾。如果您对整个 URL 进行编码，您将对“http://”部分进行编码，但它不起作用。

我最初从 ASIHttpRequest 复制了以上内容，但添加的任何错误都是我的。

希望有帮助！祝你好运！！

# c++ - C++ 类中的 PThread 崩溃

> ID：14679850
> 
> 赞同：0
> 
> 时间：2013-02-04T03:06:58.247
> 
> 标签：c++, multithreading, class

所以我对一般的线程很陌生，并且在过去的几周里一直在试验 pthreads。我创建了一个内部具有线程函数的类。它工作正常，直到我尝试将类属性（整数）设置为一个值。

.h 文件：

```
#ifndef TESTCLASS_H
#define TESTCLASS_H

#include <iostream>
#include <windows.h>

using namespace std;

class testClass
{
    public:
        testClass();
        HANDLE h;
        static DWORD WINAPI mythread(LPVOID param);
        int mytestint;
        void printstuffs();
        void startThread();
};

#endif // TESTCLASS_H 
```

.cpp 文件

```
#include "testClass.h"

testClass::testClass()
{
    cout << "Created class" << endl;
}
DWORD WINAPI testClass::mythread(LPVOID param)
{
    cout << "In thread" << endl;
    testClass* This = (testClass*)param;

    cout << "Calling class function" << endl;
    This->printstuffs();

    cout << "Thread is done" << endl;

    return NULL;
}
void testClass::printstuffs()
{
    cout << "In class function " << endl;
    mytestint = 42; // <- crashes here
    cout << "Test Int = " << mytestint << endl;
}
void testClass::startThread()
{
    h = CreateThread(NULL, 0, mythread, (LPVOID)0, 0, NULL);
    cout << "Thread started" << endl;
} 
```

那么为什么我打电话时它会崩溃`mytestint = 42;`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T03:16:39.337

您实现线程回调的方式不正确。你确定它在整数赋值时崩溃了吗，我认为它一定在你的线程回调的第一行崩溃了。

您没有在 CreateThread 函数调用中传递对“this”的引用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T03:17:56.973

您正在`mythread`使用空指针调用。当您将其转换为 时`This`，您最终会在空对象上调用一个函数。当您这样做`mytestint = 42`时，计算机将其视为`this->mytestint = 42`，并且因为`this`is `NULL`，您取消引用空指针，并且程序段错误。您需要执行以下操作：

```
h = CreateThread(NULL, 0, mythread, (LPVOID)this, 0, NULL); 
```

如果可能的话，我还建议迁移到 C++11 中引入的标准 C++ 线程。由于看起来您只是在学习多线程，因此学习标准工具（包含在最新版本的 MSVC 和 GCC 中）以及特定于供应商的 API 会很有用。

# r - 用 3 个点定义 S4 方法

> ID：14679852
> 
> 赞同：4
> 
> 时间：2013-02-04T03:07:26.647
> 
> 标签：r, dispatch, s4

我正在尝试为我创建的对象定义“c”方法。

就像是

```
setMethod("c", 
          signature(...), 
          definition=function (...) {
            myObject = list(...)[[1]]
            myObject@mySlot=lapply(list(...), FUN = function(x) slot(x, "mySlot"))
            return(myObject)
         }
) 
```

问题是我无法定义 ... 的类，以便正确完成调度。任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T04:06:56.660

详细说明@hadley 的评论，签名应该适用于您的班级，并且定义应该遵循`getGeneric`。因此

```
> getGeneric("c")
standardGeneric for "c" defined from package "base"

function (x, ..., recursive = FALSE)
standardGeneric("c", .Primitive("c"))
<environment: 0x4956ab8>
Methods may be defined for arguments: x, recursive
Use  showMethods("c")  for currently available ones. 
```

所以

```
setClass("A", representation(x="numeric"))
setMethod("c", "A", function(x, ..., recursive=FALSE) {
  "here I am"
}) 
```

和

```
> c(new("A"), new("A"))
[1] "here I am" 
```

# android - 比较两个数组列表并从那里删除额外的元素

> ID：14679853
> 
> 赞同：3
> 
> 时间：2013-02-04T03:07:35.990
> 
> 标签：android, arraylist

如何比较两个数组列表？

我有一个 sdCoverList 数组和 thumbnailList 数组。

```
02-04 11:05:05.210: I/System.out(4035): HASHED THUMBNAIL[-2122410790, 2043473787, 1914391068, 1785308349, 1656225630, 1527142911, 1398060192, 1268977473, 1139894754, 1010812035, 1242943301, 1113860582, 984777863, 855695144, 726612425, 597529706, 468446987, 339364268, 210281549]
02-04 11:05:05.210: I/System.out(4035): SD COVER LIST[-2122410790, 2043473787, 1914391068, 1785308349, 1268977473, 1656225630, 1527142911, 1139894754, 1398060192, 1010812035, 1242943301, 1113860582, 984777863, 855695144, 726612425, 597529706, 468446987, 339364268, 210281549, 717409028] 
```

在我的 sd 封面列表中，我有一个额外的值要删除，但首先我必须先与 thumbnailList 数组进行比较。如果两者具有相同的元素，则不要做任何事情，但如果有多余的，请将其从 SD 卡中删除。

我的数组列表

对于 sdCoverList：

```
// CHECK DIRECTORY BEFORE DELETING THEM
            File strPath = new File(Environment.getExternalStorageDirectory() + folderName+"/Covers");
            File yourDir = new File(strPath, "");
            if(yourDir.length()!=0)
            for (File f : yourDir.listFiles()) {
                if (f.isFile())
                {
                    String name = f.getName();
                    sdCoverList.add(name);
                    //System.out.println(sdCoverList);
                } 
```

对于散列缩略图

```
for (int a=0;a<=thumbnailList.size()-1;a++)
        {
            String hashed = String.valueOf(thumbnailList.get(a).hashCode());
            Log.d("hashed",hashed);
            hashedThumbnail.add(hashed);
        } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-04T03:39:13.193

```
List<String> sdCoverList = new ArrayList<String>();
sdCoverList.add("-2122410790");
sdCoverList.add("2043473787");
sdCoverList.add("717409028");

List<String> hashedThumbnail = new ArrayList<String>();
hashedThumbnail.add("-2122410790");
hashedThumbnail.add("2043473787");

System.out.println("sdCover List: " + sdCoverList);
System.out.println("hashedThumbnail List: " + hashedThumbnail);

List<String> temp = new ArrayList<String>();
temp.addAll(sdCoverList);
temp.removeAll(hashedThumbnail);

System.out.println("temp List: " + temp);

sdCoverList.removeAll(temp);

System.out.println("sdCover List: " + sdCoverList); 
```

输出将是

```
sdCover List: [-2122410790, 2043473787, 717409028]
hashedThumbnail List: [-2122410790, 2043473787]
temp List: [717409028]
sdCover List: [-2122410790, 2043473787] 
```

# http - 使用 Curl 将 HTTP 发布到 Ebay 交易 API

> ID：14679856
> 
> 赞同：2
> 
> 时间：2013-02-04T03:08:21.337
> 
> 标签：http, post, curl, ebay-api

我正在尝试`HTTP POST`从 Ebays Trading API 检索订单数据。我对此有些陌生-您可能会看到。我首先使用了他们的 API 测试工具，并通过生产环境成功获取了我的实际订单数据。

我复制了 HTTP 标头信息和 XML 请求部分，将其与我认为可以使其成为有效 HTTP Post 的文件一起放入文件中，然后使用 Curl 可执行文件 - 通过批处理文件调用。

这不起作用 - 所以我改用了一个更简单的请求 - GeteBayTime - 并得到了完全相同的结果。

我的批处理文件是...（全部为一行）

```
Curl -X POST --header "Content-Type:text/xml" -d @postfile https://api.ebay.com/ws/api.dll  > out.xml 
```

邮编是...

```
POST / HTTP/1.1
Host: https://api.ebay.com/ws/api.dll
User-Agent: App v1.0
Connection: Keep Alive
Content-Length: 125
Content-Type: text/xml
X-EBAY-API-APP-ID:***-MyReal-APP-ID-here***
X-EBAY-API-VERSION:807  
X-EBAY-API-COMPATIBILITY-LEVEL:707
X-EBAY-API-SITE-ID:0
X-EBAY-API-CALL-NAME:GeteBayTime
X-EBAY-API-REQUEST-ENCODING:XML

<?xml version="1.0" encoding="utf-8"?>
<GeteBayTimeRequest xmlns="urn:ebay:apis:eBLBaseComponents">
</GeteBayTimeRequest> 
```

结果（在 out.xml 中）是......

```
<?xml version="1.0" encoding="UTF-8"?>
-<GeteBayOfficialTimeResponse xmlns="urn:ebay:apis:eBLBaseComponents">
<Timestamp>2013-02-04 02:56:43</Timestamp><Ack>Failure</Ack>-<Errors>  
<ShortMessage>Unsupported API call.</ShortMessage><LongMessage>The API call 
"GeteBayOfficialTime" is invalid or not supported in this release.</LongMessage>   
<ErrorCode>2</ErrorCode><SeverityCode>Error</SeverityCode>
<ErrorClassification>RequestError</ErrorClassification></Errors><Build>15743293</Build>
</GeteBayOfficialTimeResponse 
```

谁能发现我的问题？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T09:29:21.790

只有请求正文必须在数据中 -

```
<?xml version="1.0" encoding="utf-8"?>
<GeteBayTimeRequest xmlns="urn:ebay:apis:eBLBaseComponents">
</GeteBayTimeRequest> 
```

此值必须在标题中 -

```
X-EBAY-API-APP-ID:***-MyReal-APP-ID-here***
X-EBAY-API-VERSION:807  
X-EBAY-API-COMPATIBILITY-LEVEL:707
X-EBAY-API-SITE-ID:0
X-EBAY-API-CALL-NAME:GeteBayTime
X-EBAY-API-REQUEST-ENCODING:XML 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-25T19:38:59.160

我有解决方案 - 我花了一些时间找到正确的方法：

```
Curl -X POST -H "Content-type: text/xml" -H "X-EBAY-API-COMPATIBILITY-LEVEL:911" -H "X-EBAY-API-SITEID:3" -H "X-EBAY-API-CALL-NAME:GeteBayOfficialTime" -d @postfile.txt https://api.ebay.com/ws/api.dll 
```

邮编：

```
<?xml version="1.0" encoding="utf-8"?>
<GeteBayOfficialTimeRequest xmlns="urn:ebay:apis:eBLBaseComponents">
    <RequesterCredentials>
        <eBayAuthToken>Your Token</eBayAuthToken>
    </RequesterCredentials>
</GeteBayOfficialTimeRequest> 
```

# java - Java将两个双打乘以另一个双打

> ID：14679858
> 
> 赞同：-2
> 
> 时间：2013-02-04T03:08:39.927
> 
> 标签：java, double

我正在尝试替换`payRate * hoursWorked`为单个变量`grossPay`，但是当我这样做时，它会为任何计算返回 0.0 的值。`double grossPay`被故意注释掉，所以你可以看到我想要做什么。

```
import java.text.*;
import java.util.Scanner;

public class elseIfPayroll{

        public static void main(String[] args){

        double hoursWorked =0.00;
        double payRate =0.00;
        int dependents =0;

        Scanner keyboard = new Scanner(System.in);
        NumberFormat f = new DecimalFormat("#0.00");

            System.out.print("Enter pay rate: ");
            payRate = keyboard.nextInt();

            System.out.print("Enter hours worked: ");
            hoursWorked = keyboard.nextInt();

            System.out.print("Enter amount of dependents: ");
            dependents = keyboard.nextInt();

            double grossPay= (payRate * hoursWorked);

//gross pay decision statements

        if (hoursWorked<=40) {
            System.out.println("Total $ Earned: " + payRate * hoursWorked); 
            }

            else if (hoursWorked >= 40) {
                System.out.println("Total $ Earned: " + payRate * hoursWorked +(payRate * 0.5));
                }

            else if (hoursWorked>=60){
                System.out.println("Total $ Earned: " + payRate * hoursWorked + (payRate * 2));
                }

//else if statements for dependents

        if (dependents == 0){
                    f.format(payRate * hoursWorked);
            }

            else if (dependents == 1){
                    f.format(payRate * hoursWorked - (payRate *                                         hoursWorked*0.04) );
            }

            else if (dependents == 2){
                     f.format(payRate * hoursWorked - (payRate *                                                hoursWorked*0.0775));
            }

            else if (dependents == 3){
                    f.format(payRate * hoursWorked - (payRate *                                                 hoursWorked*0.1125) );
            }

            else if (dependents == 4){
                    f.format(payRate * hoursWorked - (payRate *                                                 hoursWorked*0.145) );
            }

            else if (dependents == 5){
                    f.format(payRate * hoursWorked - (payRate *                                                 hoursWorked*0.175) );
            }

            else if (dependents >= 6){
                    f.format(payRate * hoursWorked - (payRate *                                                 hoursWorked*0.2025) );
            }

            System.out.println("New gross Pay: " + f.format(payRate * hoursWorked - (payRate *                                      hoursWorked*0.04)));

    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-04T03:19:28.637

在 Java - 和许多其他语言中 - 做

```
result = operand1 operator operand2 
```

*立即*计算结果。Java 不会将结果中的程序行保存在内存中，该*结果*会在*hoursWorked*或*payRate*被修改后立即更新*GrossPay ，而只会保存**双重*结果。

 ***所以当你

```
 double hoursWorked =0.00;
    double payRate =0.00;
    double grossPay= (payRate * hoursWorked); 
```

*GrossPay*采用`0 * 0`（即零）的结果。

你只需要移动一点*GrossPay*计算

```
 System.out.print("Enter pay rate: ");
        payRate = keyboard.nextInt();

        System.out.print("Enter hours worked: ");
        hoursWorked = keyboard.nextInt();

        System.out.print("Enter amount of dependents: ");
        dependents = keyboard.nextInt();

        double grossPay= (payRate * hoursWorked); 
```

让它发挥作用。***

# python - 当我按下“Enter”按钮时，为什么我没有得到 self.entry 的值？

> ID：14679859
> 
> 赞同：1
> 
> 时间：2013-02-04T03:08:55.533
> 
> 标签：python, tkinter

现在我正试图通过简单地打印它所持有的值来测试我的条目小部件，但 .get() 似乎不起作用。我在看什么？

```
from tkinter import *  

class Game(Frame):  
    'Number guessing application'  
    def __init__(self,parent=None):  
        'constructor'  
        Frame.__init__(self, parent)  
        self.pack()
        Game.make_widgets(self)
        Game.new_game(self)
        self.number = random.randrange(1,100)
        self.pack()

    def make_widgets(self):
        self.entry = Entry(self, width = 25, bg = 'purple',fg= 'green')
        self.entry.pack()
        self.button = Button(self,text = 'Enter',relief = 'ridge',command = self.reply())
        self.button.pack()
    def new_game(self):
        pass

    def reply(self):
       print(self.entry.get())

Game().mainloop() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T03:19:51.193

您有`command = self.reply()`, 它调用`self.reply()`并使用返回值（在本例中为隐式`None`）作为操作。

将其更改为`command = self.reply`，这将使其`reply`每次都调用该方法。

# php - 搜索查询在 Firefox 中不起作用，但在其他浏览器中起作用？

> ID：14679865
> 
> 赞同：0
> 
> 时间：2013-02-04T03:10:45.280
> 
> 标签：php, mysql, firefox

我有一个搜索查询脚本，可以在 Firefox、Safari 等中正常工作，但不能在 chrome 中使用。

无论出于何种原因，一旦用户输入查询并点击提交，我就会注意到网址非常不同。

在 chrome 中，我得到了这个有效并且是正确的

```
http://localhost/ptb1/home.php?query=london&submit.x=0&submit.y=0&submit=Start+Search 
```

但是在 Firefox 中我得到了这个（注意 stat+search 丢失了，我不知道为什么

```
http://localhost/ptb1/home.php?query=london&submit.x=12&submit.y=10 
```

请谁能告诉我为什么我会遇到这个问题以及如何解决这个问题，谢谢。

这是我的代码：

```
<form method="get" action="">
<input type="text" id="text" name="query" class="searchbox" placeholder="Search Name/Location" style="width:120px;"/>
<input type="image" src="../PTB1/assets/img/icons/search.png" height="19" width="20" class="searchbutton" name="submit" value="Start Search" />
</form>

<?php
//PHP CODE STARTS HERE

if(isset($_GET['submit'])){

// Change the fields below as per the requirements
$db_host="localhost";
$db_username="root";
$db_password="";
$db_name="";
$db_tb_atr_name="display_name";

//Now we are going to write a script that will do search task
// leave the below fields as it is except while loop, which will display results on screen

mysql_connect("$db_host","$db_username","$db_password");
mysql_select_db("$db_name");

$query=mysql_real_escape_string($_GET['query']);

$query_for_result=mysql_query("SELECT *,MATCH(display_name, location, sex, ethnicity, hobbies, station, age, weight_st, weight_lb, height_ft, height_in, build) AGAINST ('$query' IN BOOLEAN MODE) AS relevance FROM ptb_stats WHERE MATCH(display_name, location, sex, ethnicity, hobbies, station, age, weight_st, weight_lb, height_ft, height_in, build) AGAINST('$query' IN BOOLEAN MODE) ORDER BY relevance DESC LIMIT 5");
echo "<div class=\"search-results\">";
while($data_fetch=mysql_fetch_array($query_for_result))

{

    echo "<div class=\"text\"><a href=\"profile.php?id={$data_fetch['user_id']}\" class=\"search\">";
    echo "<div class=\"spacing\"><img width=35px height= 30px src=\"data/photos/{$data_fetch['user_id']}/_default.jpg\" class=\"boxgridsearch\"/> "; 
     echo substr($data_fetch[$db_tb_atr_name], 0,160);
    echo "</a></div></div>";

}
echo "<div class=\"morebutton-search\"><a href=\"search_results.php?query=$query\" \">+ view more results</a></div>";

mysql_close();
}

?>

<style type="text/css">

.boxgridsearch{ 
                width: 35px; 
                height: 30px; 
                margin-top:-3px;
                margin-left:0px; 
                margin-right:10px; 
                float:left; 
                background:#161613; 
                        border:4px solid #000 .8;
    -moz-box-shadow: 0px 0px 8px #CCC;
    -webkit-box-shadow: 0px 0px 0px #CCC;
    box-shadow: 0px 3px 10px #030303;

            }

    .suggestionsBox {
        position: relative;
        left: 12px;
        margin: 10px 0px 5px 0px;
        width: 172px;
        background-color: #FFF;
        border: 1px solid #CCC; 
        color: #fff;
        z-index:99;
    }

    .searchbutton {

        padding-top: 2px;
        padding-left:5px;
        position:absolute;
        z-index:70;

    }

    .spacing {

        padding-top: 12px;
        padding-bottom:12px;
        border-bottom: solid #CCC 1px;
        border-top: solid #CCC 1px;
        text-align:left;
        margin-left:0px;
        margin-top:5px;
        width:160px;

    }

    .text {
        text-align:left;
        margin-left:20px;
        margin-top:0px;
        width:200px;

    }

        .search-results {
    width: 200px;
    height:218px;
    float: left;

    margin-bottom: 20px;
    margin-left: 0px;
    margin-top:10px;
    text-align: center;

    /* [disabled]margin-left: 30px; */
    overflow: hidden;
    padding-top: 0px;
    padding-bottom: 10px;

}   

    .searchbox {

        margin-left: -25px;

    }

    .suggestionList {
        margin: 0px;
        padding: 0px;

    }

    .suggestionList li {

        margin: 0px 0px 3px 0px;
        padding: 3px;
        cursor: pointer;
    }

    .suggestionList li:hover {
        background-color: #659CD8;
    }

    a.search {
    color: #646464;
    text-decoration: none;
}
a.search:visited {
    color: #646464;
}
a.search:hover {
    color: #646464;
    text-decoration: none;
}
a.search:active {
    color: #646464;
}

</style> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T03:53:03.827

您可以尝试使用`$_SERVER['REQUEST_METHOD']`来确定页面是否已提交，而不是 `isset($_GET['submit'])`基本上这样：

```
if(isset($_GET['submit'])){

// Change the fields below as per the requirements
$db_host="localhost";
$db_username="root"; 
```

你做：

```
if($_SERVER['REQUEST_METHOD'] == 'GET'){

// Change the fields below as per the requirements
$db_host="localhost";
$db_username="root"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T04:02:24.400

浏览器将解释该表单如何以不同方式提交。您在 Firefox 中看到的行为实际上是起草的标准： http: [//www.whatwg.org/specs/web-apps/current-work/multipage/](http://www.whatwg.org/specs/web-apps/current-work/multipage/)

我们可以深入研究样式按钮与使用图像（提交，vs 图像输入类型，vs 按钮） - 最简单的解决方法是在表单中添加一个隐藏的输入值：

```
<form method="get" action="">
    <input type="hidden" name="dosearch" value="1">
    <input type="text" id="text" name="query" class="searchbox" placeholder="Search Name/Location" style="width:120px;"/>
    <input type="image" src="../PTB1/assets/img/icons/search.png" height="19" width="20" class="searchbutton" name="submit" value="Start Search" />
</form> 
```

然后只需调整 PHP 中的处理条件：

```
if(isset($_GET['dosearch'])){ 
```

快速补丁。

如果你要做很多这样的事情，你应该考虑一个框架；您可以在非常干净和分层的代码 (MVC) 中免费获得许多此类逻辑。

# c# - 从文本框中读取输入到代码后面

> ID：14679869
> 
> 赞同：-1
> 
> 时间：2013-02-04T03:12:11.487
> 
> 标签：c#, asp.net, textbox, code-behind

我这里有一个 ASP.NET Webform 格式的文本框

```
<asp:TextBox ID="Year_BuiltTextBox" CssClass="datepicker" 
      placeholder="Click to open calendar" runat="server" 
      Text='<%# Bind("DateBuilt","{0:MM/dd/yyyy}") %>' /> 
```

我想从文本框中读取用户的输入，并使用 C# 作为后面的代码更改日期的格式。

例如，从 2005 年的输入开始，它将变为 2005 年 1 月 1 日。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T05:08:58.760

这可能是一个失败的原因，但无论如何我都会尝试。

您有 2 个选项，简单的回发方式和硬 ajax 方式。

最简单的方法：您需要做的就是在*某个*事件上查看文本框中的值。

```
string inputValue = Year_BuiltTextBox.Text;
DateTime inputDate = new DateTime(int.Parse(inputValue.Text), 1, 1);
Year_BuiltTextBox.Text = inputDate.ToString(); 
```

您可以使用其他形式`ToString()`来满足您的需求。

艰难的（呃）方式：就我个人而言，我不知道如何使用它，但我有同事说这是救命稻草。Ajax 有一个`Calendar Extender`可以附加到文本框的功能，允许用户直接输入日期（他们也可以在字段中输入）。一个例子可以在[这里](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/Calendar/Calendar.aspx)找到。如果你想走这条路，学习如何在你的页面上实现 ajax。可以在[此处](http://asp-net-example.blogspot.com/2009/11/ajax-calendarextender-how-to-use.html)找到相关资源（请注意脚本管理器）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T04:02:52.413

Try`DateTime dt = new DateTime(year, 1, 1);` 使用用户输入的年份，Jan 作为月份，1 作为日期。

# php - PHP ajax 请求返回字符串

> ID：14679870
> 
> 赞同：0
> 
> 时间：2013-02-04T03:12:14.730
> 
> 标签：php, jquery

我在我的 ajax 请求中收到错误 200。我想在我的 ajax 请求中向页面发布 1 个值，这是一个电子邮件地址。有人可以告诉我出了什么问题

错误：

```
message=:[object Object], text status=:parsererror, error thrown:=SyntaxError: JSON.parse: unexpected end of data 
```

jQuery

```
$('#checkemail').click(function() {
    $.ajax({
        url:'http://' +  location.host + '/buyme/include/getemailaddress.php',
        type:'POST',
        contentType: "application/json; charset=utf-8",

        data: {email:$('#email').val()},
        dataType:"json",
        success: function(msg) {
            alert(msg);
        },
        error: function(ms, textStatus, errorThrown) {
            alert(errorThrown); 
        }   
    });/**/
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T03:38:19.997

当您使用 json 数据类型时，从服务器返回的任何数据都必须采用该格式。

所以首先不要忘记您发送`post`数据，因此请使用：

```
if ($_SERVER['REQUEST_METHOD'] == 'POST')
{
    $email = $_POST['email'];
    // ...

    // and SECOND return suitable data type, ie, a json coded string.
    echo json_encode($your_result);

    // where $your_result can be simple as

    // $your_result['result'] = true;
    // $your_result['result'] = false;

    // a message
    // $your_result['msg'] = 'all OK';

    // a message and and a flag
    // $your_result['msg'] = 'all OK';
    // $your_result['result'] = true;
} 
```

因此，在您的 jquery 回调中，您会得到如下返回的数据：

```
success: function(data) {
    if (data.msg != "") alert(data.msg);
    if (data.result === true) {} else {}
}, 
```

# jquery - 使用 .delay() 延迟点击事件

> ID：14679875
> 
> 赞同：7
> 
> 时间：2013-02-04T03:13:17.400
> 
> 标签：jquery, delay, timedelay

我有一个通过单击另一个按钮触发的按钮。我想延迟点击第二个按钮两秒钟。我使用了 .delay() 但它没有用。

```
jq(function() {
      jq('a.box').click(function() {
         jq(this).closest('.button').find('.add_this').delay(2000).click();
      })
    }); 
```

或使用 setTimeout；

```
jq(function() {
      jq('a.box').click(function() {
      setTimeout(function(){
         jq(this).closest('.button').find('.add_this').click();
      },800);
      });
    }); 
```

但是没有用。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-04T03:25:40.850

来自文档[http://api.jquery.com/delay/](http://api.jquery.com/delay/)

> .delay() 方法最适合在排队的 jQuery 效果之间进行延迟。因为它是有限的——例如，它不提供取消延迟的方法——.delay() 不能替代 JavaScript 的本机 setTimeout 函数，这可能更适合某些用例。

您可以`setTimeout`在延迟后使用绑定点击处理程序

```
setTimeout(function(){

jq('a.box').closest('.button').find('.add_this').click();
},2000); 
```

编辑

```
jq(function() {
      jq('a.kklike-box').click(function() {
      $this = $(this);
      setTimeout(function(){
         $this.closest('.deal_buttons').find('.add_this').click();
      },800);
      });
    }); 
```

# c# - 如何调试 SqlCommand Parameter.AddWithValue

> ID：14679876
> 
> 赞同：1
> 
> 时间：2013-02-04T03:13:18.053
> 
> 标签：c#, sql, string, winforms, sqlcommand

我在我的 SqlCommand 变量中使用 Parameters.AddWithValue。

我可以通过说将输出转储到文本框

```
tb.Text = command.CommandText.ToString(); 
```

但它不会将我的参数值转储到文本框中。

关于如何验证参数是否“正常”的任何建议？

我正在使用 VS2012 为 Windows 8 使用 WinForm

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T03:14:35.027

SQL 参数与命令文本一起发送到服务器；它们没有与 CommandText 集成。

您可以通过查看集合中的`Value`属性来检查参数。`Parameters`

# c++ - 交互式 Switch 语句

> ID：14679877
> 
> 赞同：-1
> 
> 时间：2013-02-04T03:13:28.397
> 
> 标签：c++, switch-statement

我试图做一个 switch 语句，要求用户输入一封信。取决于输入。用户将获得电子色码图的色码编号。如果颜色不在电子色码表中，则输出“未知颜色”。当用户输入“b”时我遇到了问题。如何让 switch 语句只输出棕色、蓝色或黑色。我不能使用任何 if、else 语句。*/

```
#include <stdlib.h>         // Directive for Pause
#include <iostream>         // Directive for Input / Output
using namespace std;

int main ()
{
    char first_letter;
    char second_letter;
    char third_letter ;
    char electronic_color_code;

    cout << "Electronic Color Code" << endl << endl;

    cout << "To find out the digit of a particular color code," << endl <<
    "enter a letter: " ;
    cin >> electronic_color_code;
    cout << endl;

    switch (electronic_color_code)
    {
        case 'r':
        case 'R':
            cout << "Red stands for digit 2.";
            break;

        case 'o':
        case 'O':
            cout << "Orange stands for digit 3.";
            break;

        case 'y':
        case 'Y':
            cout << "Yellow stands for digit 4.";
            break;

        case 'v':
        case 'V':
            cout << "Violet stands for digit 7.";
            break;

        case 'w':
        case 'W':
            cout << "White stands for digit 9.";
            break;

        case 'b':
        case 'B':
            cout << "Enter a second letter: ";
            cin >> second_letter;
            cout << endl;
        case 'brows':
        case 'BROWS':
            cout << "Brown stands for digit 1.";
            cout << endl;
            break;

        case 'lue':
        case 'LUE':
            cout << "Enter a third letter: ";
            cin >> third_letter;
            cout << endl;
        case 'a':
        case 'A':
            cout << "Black stands for digit 0.";
            cout << endl;
        case 'u':
        case 'U':
            cout << "Blue stands for digit 6.";
            break;

        case 'g':
        case 'G':
            cout << "Enter the second and third letter" << endl;
            cin >> second_letter >> third_letter ;
        case 'rayd':
        case 'RAYD':
            cout << "Grey stands for the digit 8.";
        case 0:
        case 'reen':
        case 'REEN':
            cout << "Green stands for the digit 5." ;
            break;

        default:
            cout << "Unknown Color";
    }

    cout << endl << endl;
    system ("Pause");        
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T04:00:25.527

你肯定误解了这个任务。

你怎么能考虑接受一个字符输入并基于它来选择颜色！！！！

如果用户输入是“b”，则无法确定颜色是黑色还是棕色。您需要将整个单词作为用户输入。例如，您需要输入“XXXX”而不是字符串与“黑色”或“棕色”匹配。

# openssl - 通过 RVM 和 Rbenv 安装 Ruby 2.0.0 时出现 OpenSSL 错误

> ID：14679878
> 
> 赞同：2
> 
> 时间：2013-02-04T03:13:45.620
> 
> 标签：openssl, rvm, rbenv, ruby-2.0

我正在尝试安装 Ruby 2.0.0-rc1，但出现 OpenSSL 错误。

系统环境： OS：MacOS 10.8.2 Mountain Lion 编译环境：Xcode CommandTools 4.6 xcode46cltools_10_86938131a.dmg

RVM 分期付款：

```
rvm get head
brew install openssl
rvm reinstall 2.0.0 --with-openssl-dir=`brew --prefix openssl` 
```

并且我尝试了 RVM pkg：</p>

```
rvm pkg install openssl
rvm reinstall 2.0.0 --with-openssl-dir=$HOME/.rvm/usr 
```

但是当我运行时遇到了同样的错误`bundle`：

[https://gist.github.com/4704589](https://gist.github.com/4704589)

请注意，这不是认证错误。我搜索了谷歌很多，但没有人得到同样的错误。

* * *

现在我`rvm use system`也破产了：</p>

```
─(⚡refactory/test_for_git_server)─(￣▽￣)~*>rvm use system
Now using system ruby.
─(⚡refactory/test_for_git_server)─(￣▽￣)~*>which ruby
/Users/ranmocy/.rvm/rubies/ruby-2.0.0-rc1/bin/ruby 
```

* * *

rbenv 也有错误：

[https://gist.github.com/4704619](https://gist.github.com/4704619)

* * *

但是当我手动从源代码编译 ruby​​ 2.0.0-rc1 时，完全没有问题。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-25T20:35:02.897

哦，我今天也遇到了类似的问题，并且学习了一些关于**pkg-config**的知识，这是一个描述库安装的精彩系统。作为回报这种解释的一种方式，**[我写了一篇关于它](http://ollehost.dk/blog/2013/06/25/install-ruby-2-0-0-p195-using-ruby-build-and-pkg-config/)**的文章。

TL;博士

将此添加到您的 shell 启动文件（例如 ~/.bash_profile 或 ~/.zshrc）。然后再次运行安装。

```
export PKG_CONFIG_PATH=/usr/local/opt/openssl/lib/pkgconfig:/usr/local/lib/pkgconfig 
```

这使得配置脚本可以找到未损坏的 OpenSSL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T15:21:00.680

这就是我设法用 rvm 和 MacOSX 10.8 编译 ruby​​2 的方法

```
导出 CC=/usr/bin/gcc
rvm pkg 安装 openssl
rvm install ruby​​-head --with-gcc=clang --verify-downloads 1 # 见 *
rvm 使用红宝石头
红宝石-v
# => ruby​​ 2.0.0dev (2013-02-24) [x86_64-darwin12.2.0]﻿

```

更多评论：[https ://gist.github.com/iboard/5023717](https://gist.github.com/iboard/5023717)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T16:06:35.020

这看起来像`clang`问题，请参阅我描述问题的其他答案 - [https://stackoverflow.com/a/14594287/497756](https://stackoverflow.com/a/14594287/497756)

# java - JSF 不正确的 BigDecimal 转换

> ID：14679879
> 
> 赞同：1
> 
> 时间：2013-02-04T03:14:03.197
> 
> 标签：java, jsf, jsf-2, bigdecimal

问题：需要通过 JSF 格式化 BigDecimal，但是 JSF 破坏了 BigDecimal 的精度。

JSF：

```
<h:outputText value="#{webUtilMB.roundUp(indexPrice.percentage, 2)}"/> 
```

爪哇：

```
public class IndexPrice {
  public BigDecimal getPercentage(){ return new BigDecimal("1.325"); }
}

@ManagedBean("webUtilMb")
public class WebUtilManagedBean{
  public BigDecimal roundUp(BigDecimal dbvalue, int scale){
    return dbvalue.setScale(decimalPlaces, BigDecimal.ROUND_HALF_UP);
  }
} 
```

在 WebUtilManagedBean.roundUp 方法中有一个断点显示“dbvalue”是“1.3249999999999999555910790149937383830547332763671875”而不是“1.325”。

然后我重载了 WebUtilManagedBean 中的 roundUp 方法：

```
public Double roundUp(Double dvalue, int scale){
  System.out.println(dvalue);
} 
```

在这个重载方法中有一个断点时让我感到惊讶的是： - 'dvalue' 是 '1.325'，这是正确的。- 该方法实际上被调用而不是 roundUp(BigDecimal, int) 方法。

后来我尝试了 BigDecimal 构造函数，结果如下：

```
BigDecimal db1 = new BigDecimal("1.325"); -> 1.325
BigDecimal db2 = new BigDecimal(1.325d); -> 1.3249999999999999555910790149937383830547332763671875 
```

* * *

理论：从上面看，似乎 JSF 将我的 BigDecimal 值转换为 String，而不是 Double，而不是在值上调用“new BigDecimal(double)”来获取 BigDecimal - 它返回错误的值。

* * *

修复：解决此问题的一种方法是使用以下代码：

```
@ManagedBean("webUtilMb")
public class WebUtilManagedBean{
  public Double roundUp(Double dvalue, int scale){
    return this.roundUp(**new BigDecimal(dvalue.toString())**, BigDecimal.ROUND_HALF_UP);
  }
  public BigDecimal roundUp(BigDecimal dbvalue, int scale){
    return dbvalue.setScale(decimalPlaces, BigDecimal.ROUND_HALF_UP);
  }
} 
```

但这对我来说似乎是一种黑客行为。

有关解决此问题的任何想法及其背后的原因。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T04:25:07.427

理想情况下，如果 f:convertNumber 具有“舍入”属性，则可以通过它来完成，但事实并非如此。

干净的方法是编写自己的综合 f:converter 类，并在 XHTML 中的适当位置使用 f:converter 标记，而不是使用 EL 方法调用。您的转换器将获得作为对象的值，即 BigDecimal，并负责将其转换为字符串本身。请参阅 f:converter 的文档。很惊讶 JSF 没有正确地做到这一点，但我想一旦你进入 EL 方法调用，一切都是一个字符串。像这样的东西（警告：未经测试）：

```
import java.math.BigDecimal;
import javax.faces.component.UIComponent;
import javax.faces.context.FacesContext;
import javax.faces.convert.Converter;
import javax.faces.convert.FacesConverter;

/**
 * Use via e.g.:
 * <pre>
 * &lt;h:outputText value="#{EL}"&gt;
 *  &lt;f:converter id="com.edsi.jsf.RoundHalfUp"/&gt;
 *  &lt;f:attribute name="decimalPlaces" value="2"/&gt;
 * &lt;/h:outputText&gt;
 * <pre>
 * @author Esmond Pitt
 */
@FacesConverter(value="com.edsi.jsf.RoundHalfUp")
public class RoundHalfUpConverter implements Converter
{

    @Override
    public Object getAsObject(FacesContext context, UIComponent component, String value)
    {
        throw new UnsupportedOperationException("Not supported yet.");
    }

    @Override
    public String getAsString(FacesContext context, UIComponent component, Object value)
    {
        BigDecimal  bd = (BigDecimal)value;
        int decimalPlaces;
        try
        {
            decimalPlaces = Integer.parseInt((String)component.getAttributes().get("decimalPlaces"));
        }
        catch (Exception exc)
        {
            decimalPlaces = 2;  // or whatever
        }
        return bd.setScale(decimalPlaces, BigDecimal.ROUND_HALF_UP).toString();
    }

} 
```

# powershell - 是否可以从多个文件中自动计算 Powershell 中相似列的平均值？

> ID：14679881
> 
> 赞同：0
> 
> 时间：2013-02-04T03:14:08.507
> 
> 标签：powershell

我是powershell的新用户。我有 30 个文件，其中包含三列的相似数据集。列数据是 Lat Long 值。它还有一个标题，如下所示。但是，这些列没有标记。

示例数据如下所示：

```
* , Water Column, Depth Averaged
   437416.450  3350091.975        0.000
   437379.500  3350133.550        0.000
   437583.925  3350278.375        0.000
   437545.475  3350312.800        0.000
   437768.700  3350492.125        0.000
   437730.675  3350525.050        0.000
   437919.750  3350668.850        0.000
   437883.350  3350701.150        0.000
   438072.475  3350836.850        0.000
   438039.500  3350871.075        0.000
   438221.250  3350960.400        0.000
   438189.300  3351005.500        0.000
   438381.025  3351048.025        0.000
   438346.900  3351107.250        0.000
   438588.600  3351155.800        0.000
   438548.000  3351225.825        0.000
   438802.400  3351278.925        0.002
   438753.750  3351354.150        0.001
   439000.525  3351414.850        0.013
   438946.625  3351488.475        0.009
   439181.000  3351557.950        0.064
   439126.725  3351626.025        0.048
   439361.600  3351708.700        0.277
   439308.550  3351773.525        0.227 
```

我想计算同一文件夹中所有文件的每一行的平均值。基本上，第一行将有来自 30 个文件的平均 30 个数据点。我认为powershell可能可以用一个简单的算法来做。

我在 stackoverflow 上发现了一个类似的帖子[，使用 awk 从多个文件中计算平均值](https://stackoverflow.com/questions/13263963/calculating-average-using-awk-from-multiple-files)，但我不明白它是如何实现的。

任何人都可以帮助我了解 Powershell 如何实际计算多个文件中同一列的平均值吗？我想创建一个具有相似列的新文件；纬度和平均。

谢谢

贾巴巴

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T07:28:23.953

肯定有更有效的方法，但这里有一个：

```
$results=@{}

#assuming your files are tab delimited and named position1.csv, position2.csv ...:
ls c:\temp\position*.csv | foreach
    {
    get-content $_.fullname | foreach
    {
        $slices=$_.split("`t")
        #verify we have our 3 columns
        if( $slices.count -eq 3)
        {
            #create an hash table with latitude-longitude as key
            $key=$slices[0]+"-"+$slices[1]

            if( $results.count -ne 0 -and $results.GetEnumerator().name -contains $key ) {
                $results[$key]+=$slices[2]
            }
            else{
                $results[$key]=@($slices[2])
            }
        }
    }
}

$results.GetEnumerator().name |%{
   "{0}`t{1}`t{2}" -f ($_.split("-")[0]) , ($_.split("-")[1]) , ($results[$_] | Measure-Object -Average).Average
} 
```

# ocaml - 设置符号 OCaml

> ID：14679885
> 
> 赞同：1
> 
> 时间：2013-02-04T03:14:30.967
> 
> 标签：ocaml

这只是一个关于 OCaml 中符号的问题。

我正在尝试测试该功能

```
let rec add (x : 'a) (l : 'a set) : bool =
begin match l with
| [] -> []
| hd :: rest -> if x = hd then rest else (hd :: (add x rest))
end 
```

我的测试用例是

```
let test () : bool =
add (3 [1; 2; 4]) = [1; 2; 3; 4]
;; run_test "add 3 [1; 2; 4]" test 
```

我收到“此表达式不是函数，无法应用”错误

我的符号有问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T03:34:49.947

OCaml 没有内置的集合类型（而是有一个 Set 模块或库）。因此，设置常量也没有内置符号。

对于较小的集合，通常使用列表。而且，事实上，`List.mem`它是一个对列表（而不是集合）进行操作的函数。列表的符号是这样的：`[1; 2; 3; 4]`.

（作为旁注，您命名的函数`add`没有添加任何内容。但也许您才刚刚开始。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T03:40:36.393

OCaml 中没有设置符号。我不知道您的`'a set`类型是什么，我不明白为什么要使用 来测试成员资格`List.mem`，但它应该没有特定的符号。

标准库中有一个[Set.Make 仿](http://caml.inria.fr/pub/docs/manual-ocaml/libref/Set.Make.html)函数，由一个模块实例化，该模块至少有一个类型和一个键上的比较函数（[见这里](http://caml.inria.fr/pub/docs/manual-ocaml/manual004.html#htoc15)）：

```
module StringSet = Set.Make(String)
let set = StringSet.(add 0 (add 1 (add 2 empty)))
let test = StringSet.mem 3 set 
```

如果您想要一个方便的表示法，最好的办法是使用从列表到集合的转换函数，并使用列表表示法：

```
let set_of_list li = List.fold_left (fun s v -> StringSet.add v s) StringSet.empty li
let set = set_of_list [0; 1; 2] 
```

# php - 为什么 cURL 返回一个空字符串？

> ID：14679886
> 
> 赞同：20
> 
> 时间：2013-02-04T03:14:32.250
> 
> 标签：php, curl, domdocument

我遇到了 PHP 的 cURL 返回带有一些 URL 的空字符串的问题。我正在尝试解析不同网页的 OG 元数据，它适用于我尝试过的所有网站，纽约时报除外。到目前为止，这是我的代码。

```
print_r(get_og_metadata('http://somewebsite.com'));

public function get_data($url)
{
    $ch = curl_init();
    $timeout = 5;
    // the url to fetch
    curl_setopt($ch, CURLOPT_URL, $url);
    // return result as a string rather than direct output
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    // set max time of cURL execution
    curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, $timeout);
    $data = curl_exec($ch);
    curl_close($ch);
    return $data;
}

public function get_og_metadata($url)
{
    libxml_use_internal_errors(TRUE);
    $data = $this->_get_data($url);
    $doc = new DOMDocument();
    $doc->loadHTML($data);

    $xpath = new DOMXPath($doc);
    $query = '//*/meta[starts-with(@property, \'og:\')]';

    $metadatas = $xpath->query($query);
    $result = array();
    foreach($metadatas as $metadata)
    {
        $property = $metadata->getAttribute('property');
        $content = $metadata->getAttribute('content');
        $result[$property] = $content;
    }

    return $result;
} 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2014-07-22T05:46:17.013

## 这 5 行对我来说很神奇。

```
 curl_setopt($ch, CURLOPT_USERAGENT,'Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.17 (KHTML, like Gecko) Chrome/24.0.1312.52 Safari/537.17');
   curl_setopt($ch, CURLOPT_AUTOREFERER, true); 
   curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
   curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
   curl_setopt($ch, CURLOPT_VERBOSE, 1); 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-02-04T03:26:18.997

我的猜测是像纽约时报这样的网站可以防止这种行为。这很可能是基于用户代理，您可以这样伪造：

```
curl_setopt($ch,CURLOPT_USERAGENT,'Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.17 (KHTML, like Gecko) Chrome/24.0.1312.52 Safari/537.17'); 
```

这是最常见的代理顺便说一句。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2016-10-14T03:09:39.073

（另一个答案也是我）

这就是为我做的。它正在寻找 SSL 验证，在这种特定情况下我碰巧不需要。

```
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, FALSE); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-10-14T03:02:05.507

这就是为我做的。它正在寻找 SSL 验证，在这种特定情况下我碰巧不需要。

```
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, FALSE); 
```

# jquery - Mouseover/Mouseleave：第三张图像定位和打开和关闭

> ID：14679887
> 
> 赞同：0
> 
> 时间：2013-02-04T03:14:34.460
> 
> 标签：jquery, html, css

在这个 JSFiddle 中，我正在尝试将鼠标悬停在 image1 上，它会更改为 image2 并出现一个图标图像，其中还包含一个要单击的链接。我无法让这个小图标图像（+链接）在鼠标关闭时消失，而是在每次鼠标悬停时不断添加更多相同的图标图像（+链接）（我知道这是因为我在 jquery 中有 .after()），但是有什么东西可以做一个简单的鼠标悬停/鼠标离开吗？

还有一种方法可以使用 px 将该图标图像定位在页面上主 image1/2 周围的任何位置出现吗？

[http://jsfiddle.net/KpYnD/2/](http://jsfiddle.net/KpYnD/2/)

```
$(document).ready(function(){
$('.normalClassName').addClass('.normalClassName:hover').mouseover(function(){
$(this).after('<a href="http://www.yahoo.com" /></a><img src="http://www.quarktet.com/Icon-small.jpg">')

});

 }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T03:24:04.350

这就是你所追求的吗？

**编辑：**更新了这个 jsfiddle 链接

[http://jsfiddle.net/KpYnD/3/](http://jsfiddle.net/KpYnD/3/)

**HTML**

```
<div class="normalClassName">
    <a href="http://www.yahoo.com"><img src="http://www.quarktet.com/Icon-small.jpg" /></a>
</div> 
```

**CSS：**

```
.normalClassName {
    width: 150px;
    height: 150px;
    background: transparent url('http://files.softicons.com/download/web-icons/vector-stylish-weather-icons-by-bartosz-kaszubowski/png/256x256/sun.rays.medium.png') top left no-repeat;
    position:relative;
}

.normalClassName a {
    display:none;
    position:absolute;
    left:50%;
    top:0;
}

.normalClassName:hover {
     background: transparent url('http://icons.iconarchive.com/icons/oxygen-icons.org/oxygen/256/Status-security-medium-icon.png') top left no-repeat;
}

.normalClassName:hover a {
    display:block;
} 
```

# php - 如何以易于安装的方式为最终用户部署我的 php+mysql 应用程序？

> ID：14679891
> 
> 赞同：0
> 
> 时间：2013-02-04T03:15:18.833
> 
> 标签：php, mysql, bitnami

这是一个常见的任务，我浏览了这个网站，然后我发现了一个名为“ [BitNami Stacks](http://bitnami.org/stacks) ”的工具正在做这样的事情，所以我试了一下。

我下载了一个带有phpbb的安装程序，并开始安装它，效果很好！所以，我的问题是：

1) 如何修改安装向导，使其可以部署我的应用程序而不是 phpbb3？

2) 如何在向导中使用我的语言（实际上是中文）而不是英文？

当然，如果 BitNami 不能做到这一点，也欢迎任何其他选择。

谢谢你的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T03:31:30.027

我会生成自己的 linux .sh 来：

1)wget 包含的我的脚本包的压缩存档是具有已知文件名的 SQL。

2）解压到/var/www（或其他设置的web目录）

2a) 提示用户输入 SQL 的 root 密码并将其保存到变量中

3) 通过这个 shell 连接到 SQL 数据库，然后`cat filename.sql | mysql -u root -p pass-variable`

4)`RM -f /var/www/ filename.sql` 删除原始 SQL 文件

*您想要完成的所有事情都可以通过 bash 脚本完成，这在技术上就是您提供的链接所做的*

在 Windows 上，我不知道如何处理这个问题。

# google-apps-script - 谷歌脚本使用“^”在 URL 上获取炸弹

> ID：14679895
> 
> 赞同：1
> 
> 时间：2013-02-04T03:16:14.873
> 
> 标签：google-apps-script, google-sheets

出于某种原因，这两种方法都有效：

```
var fetchString="http://ichart.finance.yahoo.com/table.csv?s=SPY&a=1&b=4&c=2011&d=1e=4&f=2013&g=d"
var response = UrlFetchApp.fetch(fetchString)

var fetchString="http://ichart.finance.yahoo.com/table.csv?s=IBM&a=1&b=4&c=2011&d=1e=4&f=2013&g=d"
var response = UrlFetchApp.fetch(fetchString) 
```

但这不起作用：

```
var fetchString="http://ichart.finance.yahoo.com/table.csv?s=^GSPC&a=1&b=4&c=2011&d=1e=4&f=2013&g=d"
var response = UrlFetchApp.fetch(fetchString) 
```

这也不起作用：

```
var fetchString="http://ichart.finance.yahoo.com/table.csv?s=^HSI&a=1&b=4&c=2011&d=1e=4&f=2013&g=d"
var response = UrlFetchApp.fetch(fetchString) 
```

似乎“^”正在扔掉它？但是，如果您将该 url 粘贴到任何浏览器中，数据就会出现。有人知道这里发生了什么吗？

这可能是一个错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T04:25:29.170

来自[RFC 1738](http://www.faqs.org/rfcs/rfc1738.html)规范：

> 因此，只有字母数字、特殊字符“$-_.+!*'()”和用于其保留目的的保留字符可以在 URL 中未编码地使用。

如果您对上面列出的特殊字符和保留字符以外的特殊字符进行编码，它将起作用。浏览器会自动执行此操作。

这是一个工作代码。

```
var fetchString="http://ichart.finance.yahoo.com/table.csv?s="+encodeURIComponent('^')+"HSI&a=1&b=4&c=2011&d=1e=4&f=2013&g=d";
  var response = UrlFetchApp.fetch(fetchString); 
```

# c - 这段代码是关于什么的？

> ID：14679898
> 
> 赞同：-3
> 
> 时间：2013-02-04T03:16:53.333
> 
> 标签：c, byte-shifting

好的..我知道问这样的问题听起来很烦人，但我真的不明白下面的代码 [advance_reg(int*)]。在代码的注释中，它说“/*寄存器根据原始多项式（64,4,3,1,0）;* /”，我只是没有得到它。有人请给我有关此代码的提示吗？例如，为什么它会这样定义 adv_64 数组？我理解第一个 for 块移动了 27 次，每次一位。但为什么？这背后的数学原理是什么？此外，为什么要执行第二个 for 块？这些都与多项式（64,4,3,1,0）有什么联系？

```
 static int bitcnt( int x) 
 {
    unsigned i=0,y;

    for (y=(unsigned)x; y; y &= (y-1) ) 
      i++;
    return(i);
 } 

 static void advance_reg(int *reg_fill)
 {
  const int mask = 0x1b;
  int adv_64[4][2];
  int i,new_fill[2];
  unsigned temp;

  adv_64[0][0] = 0xb0000000;
  adv_64[0][1] = 0x1b;
  adv_64[1][0] = 0x60000000;
  adv_64[1][1] = 0x2d;
  adv_64[2][0] = 0xc0000000;
  adv_64[2][1] = 0x5a;
  adv_64[3][0] = 0x80000000;
  adv_64[3][1] = 0xaf;
  new_fill[1] = new_fill[0] = 0;
  temp = mask<<27;

  for (i=27;i>=0;i--) 
  {
     new_fill[0] = (new_fill[0]<<1) | (1&bitcnt(reg_fill[0]&temp));
     new_fill[1] = (new_fill[1]<<1) | (1&bitcnt(reg_fill[1]&temp));
     temp >>= 1;
  }

  for (i=28;i<32;i++) 
  {
     temp = bitcnt(reg_fill[0]&(mask<<i));
     temp ^= bitcnt(reg_fill[1]&(mask>>(32-i)));
     new_fill[0] |= (1&temp)<<i;
     temp = bitcnt(reg_fill[0]&adv_64[i-28][0]);
     temp ^= bitcnt(reg_fill[1]&adv_64[i-28][1]);
     new_fill[1] |= (1&temp)<<i;
   }

  reg_fill[0] = new_fill[0];
  reg_fill[1] = new_fill[1];
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T03:47:16.953

它是一个[线性反馈移位寄存器](http://en.wikipedia.org/wiki/Linear_feedback_shift_register)。（或者给出描述，这就是它应该是的。）

这样的函数是根据二元多项式定义的，并生成一个固定的、确定性的正整数排列，直到给定的 2 次幂。因此，它是可以称为“随机”的最不随机的事物之一。

# php - 使用 PHP 从联系表中通过电子邮件发送信息

> ID：14679901
> 
> 赞同：0
> 
> 时间：2013-02-04T03:17:27.560
> 
> 标签：php, forms, email, contact, feedback

首先，我想说我只是 php 的新手。

我有这个简单的 php，就目前而言，当它发送信息时，它会显示一个可怕的“Ok”消息。

你能帮我改进这个 php：-更好的代码（可以吗？会更好吗？）已发送。

另一件事是我不确定这是否有效。我安装了 xampp，但在本地它无法正常工作。我还尝试使用上传到服务器的所有文件填写表格，但我仍在等待它们......邮件到达我的收件箱的奇迹？=S 也许我做错了什么？

```
<?php
if(isset($_POST["nombre"]) && isset($_POST["email"]) && isset($_POST["consulta"])){
$mymail = "myemail@gmail.com";
$subject = "Consulta";
$contenido = ":: Nombre: ". $_POST["nombre"]."\n";
$contenido .= ":: E-mail: ". $_POST["email"]."\n";
$contenido .= ":: Escribiò el siguiente mensaje: ". $_POST["consulta"]."\n";

$header = "From:".$_POST["email"]."\n"; 

mail($mymail, $subject, utf8_decode($contenido));*/
echo "&estatus=ok&";
}?> 
```

在此先感谢您的帮助！问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T03:42:48.040

好的，所以您的代码对我来说看起来不错，如果您想更改消息，您应该更改 echo 语句中的文本。喜欢`echo "Some fancy html in here";`。关于邮件未接收的第二个问题可能是由于 php 默认情况下依赖本地 smtp 服务器来发送邮件，这在 Windows 上不存在，因此如果您可能有 xampp 并且在 linux 上取决于很多，它根本不会发送它它可能正在发送它并将其放入您的垃圾邮件文件夹中的变量，或者它可能根本不发送它。如果您想使用第三方 smtp 服务器（例如您的 gmail）仅用于测试目的，最好和最简单的方法是使用一些库，例如：

[http://swiftmailer.org/docs/sending.html](http://swiftmailer.org/docs/sending.html)

并定义第三方 smtp 详细信息。

示例代码：

```
 require_once 'lib/swift_required.php';

// Create the Transport
$transport = Swift_SmtpTransport::newInstance('smtp.example.org', 25)
  ->setUsername('your username')
  ->setPassword('your password')
  ;

/*
You could alternatively use a different transport such as Sendmail or Mail:

// Sendmail
$transport = Swift_SendmailTransport::newInstance('/usr/sbin/sendmail -bs');

// Mail
$transport = Swift_MailTransport::newInstance();
*/

// Create the Mailer using your created Transport
$mailer = Swift_Mailer::newInstance($transport);

// Create a message
$message = Swift_Message::newInstance('Wonderful Subject')
  ->setFrom(array('john@doe.com' => 'John Doe'))
  ->setTo(array('receiver@domain.org', 'other@domain.org' => 'A name'))
  ->setBody('Here is the message itself')
  ;

// Send the message
$result = $mailer->send($message); 
```

我认为这很简单，您还可以添加：

```
if($result){ echo "Message has been sent"; }else{ echo "Error!"; } 
```

最后。这应该够了吧...

顺便说一句，gmail的设置是：

```
$transport = Swift_SmtpTransport::newInstance('smtp.gmail.com', 465, 'ssl'); 
```

并相应地使用您的 gmail 电子邮件和密码作为用户名和密码...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T03:44:57.223

在理解 PHP 和邮件功能方面，这个[链接](http://www.w3schools.com/php/php_mail.asp)是一个很好的资源（一般来说，PHP/web 编码的网站也是如此。
你给用户的消息是在最后一行显示 echo "&status =ok&"; [Echo](http://w3schools.com/php/)是向页面输出文本的函数。如果你知道 html，你可以输出任何你想要的 html，例如

```
echo "<b>This success message is in BOLD</b>"; 
```

不过，您需要小心使用引号，因为您需要将它们与其他一些特殊字符一起[转义，例如](http://www.homeandlearn.co.uk/php/php7p7.html)

```
echo "This \"code\" will\nprint like \\\"this\\\""; 
```

看起来像

```
This "code" will
print like \"this\" 
```

无论如何，这正在切线。至于你的 xampp，你必须配置你的 smtp 设置。看看这篇[文章](http://egrasp.wordpress.com/2010/02/03/sending-email-in-php-using-xampp-lite-1-7-3-on-windows/)。

如果您的问题得到解答，请告诉我:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T03:52:45.007

这是一个很大的问题。

首先，您想在本地进行测试，并使用一个简单的邮件客户端来检查您的邮件传输代理是否会将电子邮件发送到本地帐户。没有 PHP

然后让邮件再次发送到远程电子邮件帐户（gmail）没有php

然后让你的 PHP 在本地发送。

最后尝试从 php 发送远程电子邮件。

您的脚本需要验证输入表单中的输入参数，以避免垃圾邮件，例如[www.w3schools.com](http://www.w3schools.com/php/php_secure_mail.asp)以供初学者阅读。

对于示例代码，下载并查看一些成熟的代码，例如 Drupal 或 Wordpress，看看他们是如何做到的。由于发送电子邮件最终取决于您的传输代理和远程端（SSL、TLS），这可能需要密钥身份验证才能允许接收邮件进行中继。

Stack Exchange 上也有很多参考资料和示例。你需要自己做一些研究。

# android - 为什么 WakefulIntentService 会检查 START_FLAG_REDELIVERY？

> ID：14679906
> 
> 赞同：0
> 
> 时间：2013-02-04T03:18:08.493
> 
> 标签：android, android-service, android-lifecycle, wakelock, commonsware-cwac

在来自[CWAC Wakeful 库](https://github.com/commonsguy/cwac-wakeful)[的](https://github.com/commonsguy/cwac-wakeful/blob/master/src/com/commonsware/cwac/wakeful/WakefulIntentService.java)WakefileIntentService.java中，代码包含：

```
@Override
public int onStartCommand(Intent intent, int flags, int startId) {
    PowerManager.WakeLock lock = getLock(this.getApplicationContext());
    if (!lock.isHeld() || (flags & START_FLAG_REDELIVERY) != 0) {
        lock.acquire();
    }
    super.onStartCommand(intent, flags, startId);
    return(START_REDELIVER_INTENT);
} 
```

为什么要检查代码`START_FLAG_REDELIVERY`- 是什么阻止了以下情况？

1.  `onStartCommand()`被调用并获得锁。
2.  系统在完成之前终止服务。
3.  系统使用 重新传递意图，导致对已持有的锁的`START_FLAG_REDELIVERY`另一个调用。`acquire()`
4.  服务完成并调用`release()`一次。
5.  由于被获取了两次但只释放了一次，因此引用计数锁仍然永远持有。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T04:52:53.453

如果服务被杀死，那么它的执行过程就会终止，稍后当它重新启动时，锁就不再持有了。您可以在此代码段中看到锁只是保存在一个静态变量中。

```
synchronized private static PowerManager.WakeLock getLock(Context context) {
    if (lockStatic == null) {
      PowerManager mgr=
          (PowerManager)context.getSystemService(Context.POWER_SERVICE);

      lockStatic=mgr.newWakeLock(PowerManager.PARTIAL_WAKE_LOCK, NAME);
      lockStatic.setReferenceCounted(true);
    }

    return(lockStatic);
  } 
```

[https://groups.google.com/forum/?fromgroups=#!topic/android-developers/w8BdsI1BVdA](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/w8BdsI1BVdA)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T09:46:17.703

似乎是为了在进程被杀死后重新获取锁，但是当另一个意图服务已经使用锁运行时，在这种情况下，它需要增加重新传递的意图的引用计数，因为来自 sendWakefulWork() 的原始锁定在旧的过程中不再存在。

由于未处理 START_FLAG_RETRY 似乎很奇怪，我为此打开了问题[https://github.com/commonsguy/cwac-wakeful/issues/10](https://github.com/commonsguy/cwac-wakeful/issues/10)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T00:36:16.427

> 是什么阻止了以下情况？

您的场景意味着 Android 将终止服务并留下`WakeLock`未完成的服务。我知道不会发生这种情况。Android 会终止*进程*，而不是服务，并且操作系统有责任释放此时获取`WakeLock`的任何内容。

> 由于未处理 START_FLAG_RETRY 似乎很奇怪，我为此打开了问题[https://github.com/commonsguy/cwac-wakeful/issues/10](https://github.com/commonsguy/cwac-wakeful/issues/10)。

正如我在那个问题中指出的那样，虽然`START_FLAG_REDELIVERY`有不错的文档，`START_FLAG_RETRY`但没有。我不知道它什么时候会被使用。我不知道`WakeLock`基于那些无证原因的遗嘱状态是什么。等等。冒着偶然意外睡眠的风险，总比意外地让 CPU 无限期开机要好得多。

# css - 在 CSS 背景中使用 web-kit 渐变和图像

> ID：14679907
> 
> 赞同：0
> 
> 时间：2013-02-04T03:18:08.947
> 
> 标签：css, webkit

我正在尝试在此类顶部放置图像，并使用 Web-Kit Gradiant 添加当前背景

```
background: -webkit-gradient(linear, left bottom, left top, 
color-stop(0.03, #3A79C1), color-stop(0.99, #5F9EE6), 
color-stop(1, #75ABEA)) url(images/bg.gif) no-repeat center right; 
```

虽然它只是添加背景而不是图像，但代码是否正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T03:35:55.073

正确的想法，但是您缺少一个逗号，并且您希望您的图像显示在渐变的顶部.. 不在下面！所以重新排列顺序。看看这个[**jsFiddle**](http://jsfiddle.net/sDRuc/)

```
background: url('images/bg.gif') no-repeat center right,-webkit-gradient(linear, left bottom, left top, 
color-stop(0.03, #3A79C1), color-stop(0.99, #5F9EE6), 
color-stop(1, #75ABEA)) ; 
```

# iphone - tableView 调用另一个 tableView，indexPath 带参数

> ID：14679910
> 
> 赞同：0
> 
> 时间：2013-02-04T03:18:28.280
> 
> 标签：iphone, objective-c, xcode, xcode4, xcode4.5

第一个 tableview 必须将参数传递给第二个 tableView，我将使用 SQLite 创建一个选择来创建第二个 tableView，在第二个 tableview 之后创建将调用 viewcontroller。

我在这里搜索但没有找到。

帮我。坦克。

对不起，我的英语不太好理解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T06:30:21.623

很抱歉我无法在这里编写所有代码，但这个[答案](http://iphonedevsdk.com/forum/iphone-sdk-development/54859-sharing-data-between-view-controllers-and-other-objects-link-fixed.html)是帮助您在视图控制器之间共享数据。

在 ExampleAppDataObject.h 中添加此代码

```
NSString*   carName;
@property (nonatomic, copy) NSString* carName; 
```

并在 .m 文件中

```
@synthesize carName;

#pragma mark -
#pragma mark -Memory management methods

- (void)dealloc 
{
    //Release any properties declared as retain or copy.
    self.carName = nil;
    [super dealloc];
} 
```

并在选择行时在您的第一个 tableview 中添加 carName。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T06:45:16.707

使用 Segue 将第一个视图控制器上的行选择数据传递到第二个。

# umbraco - UmbracoLog 表

> ID：14679913
> 
> 赞同：2
> 
> 时间：2013-02-04T03:18:53.487
> 
> 标签：umbraco

在负载平衡的服务器设置中，我们的 UmbracoLog 表每秒接收大约 50 条记录，这些记录都遵循相同的模式（格式化道歉）

```
**id    userId  NodeId  Datestamp   logHeader   logComment

1122069437  0   -1  41302.1891  System  Submitting calls to distributed servers

1122069438  0   -1  41302.1891  Custom  http://www.url.com/umbraco/webservices/cacheRefresher.asmx

1122069439  0   -1  41302.1891  System  Submitting calls to distributed servers

1122069440  0   -1  41302.1891  System  Distributed server push completed with no nodes reporting an error

1122069441  0   -1  41302.1891  System  Distributed server push completed with no nodes reporting an error

1122069442  0   -1  41302.1891  Custom  http://www.url.com/umbraco/webservices/cacheRefresher.asmx** 
```

在 24 小时内，这会产生一个 6.9GB 的表和一个数据库，就 CPU 和内存使用而言，该数据库一直处于热运行状态。

我们检查了其他类似站点设置的 web.config 和 umbraco.config 设置文件，在配置方面没有差异。

我们可以禁用系统级别的日志记录，但我们会丢失其他有意义的消息。

任何人都可以帮助隔离这个问题吗？

TL;DR Umbraco，日志表每毫秒被多次调用敲击。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T22:34:16.260

我们已经确定了这个问题。它归结为过期文件以及 umbraco 4.5.2 如何处理它们。

拆解dll后，我们在publishingService类（umbraco.presentation）的CheckPublishing方法中找到了罪魁祸首：

```
foreach (Document d in Document.GetDocumentsForExpiration())
{
   library.UnPublishSingleNode(d.Id);
} 
```

GetDocumentsForExpiration() 运行以下查询：

```
IRecordsReader dr = CMSNode.SqlHelper.ExecuteReader("select distinct nodeId from cmsDocument where newest = 1 and not expireDate is null and expireDate <= @today", new IParameter[] { CMSNode.SqlHelper.CreateParameter("@today", DateTime.Now) }); 
```

因此，umbraco 运行此发布服务来检查和取消发布过期文档，而无需实际更新过期日期，该日期用于获取需要过期/取消发布的文档。因此，这些文件永远不会过期（尽管它们尚未发布）。

每次文档发生更改（发布、取消发布、保存等）时，都会调用分布式服务器。由于 publishingService 和上面概述的代码，这些过期的文档在每次服务运行时都不会发布，从而导致许多分布式调用（以及正在写入的数据库记录）。

解决方案是清除这些文档上的到期日期（手动或通过 SQL 代理作业）或修复 Umbraco 源代码。

此错误已在 Umbraco 的更高版本中修复（不确定它是在哪个版本中修复的，但我检查了 4.11.3 并且它具有固定代码）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T21:49:39.053

我建议你有两个选择，你两个都选。

在问题跟踪器 (issues.umbraco.org) 上报告问题，以便这些人可以调查它是否有异常。

然后要停止它，您可以使用注释掉的日志消息进行自定义构建。有关违规代码，请参阅此文件：[https ://bitbucket.org/slace/umbraco/src/e9e2f67c6cae/umbraco/presentation/umbraco/cache/dispatcher.cs](https://bitbucket.org/slace/umbraco/src/e9e2f67c6cae/umbraco/presentation/umbraco/cache/dispatcher.cs)

不理想，但可以让您启动并运行并减轻数据库服务器上的负载，直到您得到修复。

一个更大的问题是为什么代码会如此频繁地运行，可能值得在代码中挖掘一下，看看你是否能明白原因。如果您确实发现了，请向 Umbraco 总部报告，以便他们为其他人修复它；）

# php - LinkedIN：在不询问允许访问的情况下阻止自动登录（JavaScript）

> ID：14679914
> 
> 赞同：3
> 
> 时间：2013-02-04T03:19:14.030
> 
> 标签：php, linkedin

在我的应用程序中，我使用了linkedIn API 登录。如果用户已经在同一个浏览器中的linkedIn中登录并在我的网站中按下linkedin登录按钮，用户将自动登录到我的网站。但我想问一下linkedIn提供的“允许访问”弹出身份验证窗口。

**编辑：** 使用 Samer Bechara 回答

```
$(document).ajaxSend(function(event, jqxhr, settings) {   
    if ( settings.url == "https://www.linkedin.com/uas/oauth/authenticate" ) {
           settings.url = "https://www.linkedin.com/uas/oauth/authorize"   
    } 

 }); 
```

* * *

```
<script type="text/javascript" src="http://platform.linkedin.com/in.js">
        api_key: apikey goes here
        onLoad: onLinkedInLoad
      authorize: false
    </script>

    <script type="text/javascript">
      function onLinkedInLoad() {
       IN.ENV.js.scope = new Array();
       IN.ENV.js.scope[0] = "r_emailaddress";
       IN.ENV.js.scope[1] = "r_contactinfo";  

       //IN.User.authorize();
       IN.Event.on(IN, "auth", onLinkedInAuth);
      }

      function onLinkedInAuth() {

        IN.API.Profile("me").fields("id,firstName,lastName,headline,emailAddress,mainAddress,phoneNumbers").result(displayProfiles);
      }

      function displayProfiles(profiles) {

        member = profiles.values[0];
        var phs="";
        var mid =member.id;
        var eid= member.emailAddress;
        var mad= member.mainAddress;
        var ln= member.lastName;
        var fn= member.firstName;
         var json = JSON.stringify(profiles);
         var ph=member.phoneNumbers._total;

         if(ph >0){
          phs=member.phoneNumbers.values[0].phoneNumber;
         }

      }

    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T13:31:43.470

为了实现您想要的，您应该将 OAuth 端点从[https://www.linkedin.com/uas/oauth/authenticate](https://www.linkedin.com/uas/oauth/authenticate)更改为[https://www.linkedin.com/uas/oauth/authorize](https://www.linkedin.com/uas/oauth/authorize)。这应该适合你。

但是，这不能使用基于 Javascript 的 API 来完成，因为出于安全目的，它们的 JS 文件被混淆了。这样做的唯一方法是将您的身份验证系统移动到服务器端（例如 PHP），这允许您自己更改授权端点。

**编辑**

您可以使用`jQuery.ajaXSend()`如下方法来修改请求。我没有测试过这个，但应该对你有用。

```
$(document).ajaxSend(function(event, jqxhr, settings) {   
    if ( settings.url == "https://www.linkedin.com/uas/oauth/authenticate" ) {
           settings.url = "https://www.linkedin.com/uas/oauth/authorize"   
    } 
}); 
```

# jquery - Jquery从复选框中获取多个选中值

> ID：14679916
> 
> 赞同：2
> 
> 时间：2013-02-04T03:19:25.283
> 
> 标签：jquery, checkbox

我的表单有以下复选框，我想勾选显示带有选中值的警报的选项，但是当我勾选它时没有任何事情显示警报：

```
<form id="booking_form">
    <input type="checkbox" name="bType[]" id="bType" value="A,200">&nbsp;Type A - USD200<br>
    <input type="checkbox" name="bType[]" id="bType" value="B,150">&nbsp;Type B - USD150<br>
    <input type="checkbox" name="bType[]" id="bType" value="C,100">&nbsp;Type C - USD100<br>
    <input type="checkbox" name="bType[]" id="bType" value="D,50">&nbsp;Type D - USD50<br>

</form> 
```

我有 JQ 脚本：

```
<script>
$("input[type=checkbox]:checked").each ( function() {
    alert ( $(this).val() );
});
</script> 
```

请指教，谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T03:31:24.973

您必须添加一个启动代码的事件处理程序。现在它在页面加载时运行。

例如，您可以让按钮单击处理它：

```
$('.btn').click(function(){
    $("input[type=checkbox]:checked").each(function() {
        alert( $(this).val() );
    });
}); 
```

这是一个例子：http: [//jsfiddle.net/tMRvL/](http://jsfiddle.net/tMRvL/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T03:29:19.993

那应该有效

```
 $("input[type=checkbox]").change( function() {
    if($(this).is(":checked")){
       alert( $(this).val() );
    }
  }); 
```

[Jsfiddle](http://jsfiddle.net/roine/Y9KgQ/)上的[演示，JSBin 上的其他演示](http://jsbin.com/ocadug/1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-18T08:41:25.890

```
<script>
    $("[type=checkbox]:checked").each ( function() {
        console.log($(this).val());
    });
</script> 
```

为我工作:)

# javascript - 是否可以将包含“高”unicode 字符的字符串转换为由从 utf-32（“真实”）代码派生的 dec 值组成的数组？

> ID：14679920
> 
> 赞同：5
> 
> 时间：2013-02-04T03:20:02.120
> 
> 标签：javascript, html, utf-8, character-encoding, utf-32

请查看在（理论上可能的）字符串上运行的此脚本：

```
<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title></title>
<script src="jquery.js"></script>
<script>
    $(function () {
        $("#click").click(function () {
            var txt = $('#high-unicode').text();
            var codes = '';
            for (var i = 0; i < txt.length; i++) {
                if (i > 0) codes += ',';
                codes += txt.charCodeAt(i);
            }
            alert(codes);
        });
    });
</script>
</head>
<body>
<span id="click">click</span><br />
<span id="high-unicode">&#x1D465;<!-- mathematical italic small x -->&#xF31E0;<!-- some char from Supplementary Private Use Area-A -->A<!-- char A -->&#x108171;<!-- some char from Supplementary Private Use Area-B --></span>
</body>
</html> 
```

代替“55349,56421,56204,56800,65,56288,56689”，是否有可能得到“119909,995808,65,1081713”？我已经阅读[了 more-utf-32-aware-javascript-string](http://marc.durdin.net/2012/04/more-utf-32-aware-javascript-string.html)和**Q：从 UTF-16 转换为字符代码的算法是什么？**+**问：没有更简单的方法吗？**来自[unicode.org/faq/utf_bom](http://www.unicode.org/faq/utf_bom.html)，但我不确定如何使用此信息。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-04T05:58:09.350

看起来您必须手动解码[代理对。](http://en.wikipedia.org/wiki/UTF-16#Code_points_U.2B10000_to_U.2B10FFFF)例如：

```
function decodeUnicode(str) {
    var r = [], i = 0;
    while(i < str.length) {
        var chr = str.charCodeAt(i++);
        if(chr >= 0xD800 && chr <= 0xDBFF) {
            // surrogate pair
            var low = str.charCodeAt(i++);
            r.push(0x10000 + ((chr - 0xD800) << 10) | (low - 0xDC00));
        } else {
            // ordinary character
            r.push(chr);
        }
    }
    return r;
} 
```

完整代码：http: [//jsfiddle.net/twQWU/](http://jsfiddle.net/twQWU/)

# scala - scala 和抽象类型“拆箱”

> ID：14679921
> 
> 赞同：0
> 
> 时间：2013-02-04T03:20:17.863
> 
> 标签：scala, abstract-type

给定的类

```
object A {
  type URLT = String
}

case class A(url : URLT)

class ForeignStreamWriter {
  def writeString(str: String) {}
}

trait WriterA {

  val writer : ForeignStreamWriter

  def write(src: A) {
    writer.write(src.url)
  }
} 
```

我如何告诉编译器我正在使用 String - 而不是 URLT - 在**writer.write(src.url)**中？我无法修改 ForeignStreamWriter 的签名。

**UPD**

至于现在我找到了唯一的解决方案

```
 def write(src: A) {
    writer.write(src.url.asInstanceOf[String])
  } 
```

但我真的不喜欢它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T04:45:06.097

你需要`import A._`在范围内。顺便说一句，没有它，您的示例无法编译。

# ruby - 如何确保 GET 来自我的网站？

> ID：14679922
> 
> 赞同：1
> 
> 时间：2013-02-04T03:20:18.973
> 
> 标签：ruby, ajax

我有一个 servlet 响应我的 GET 请求`'/getdata'`：

```
get '/getdata' do
  if request.referrer.to_s == '/my_website_uri'
    erb :content
  else
    reponse = [ 404, {'Content-Type' => 'text/html'}, '<h1>404 - Not Found</h1>' ]
  end
end 
```

我想确定请求是否来自我的页面，然后给出数据，否则给出 404。

我有上面的代码。如果它包含我的URI，它会检查请求引用者，但我认为任何人都可以模拟这样的请求......有没有更好的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T03:28:33.263

是的，[`referer`欺骗是微不足道的](http://en.wikipedia.org/wiki/Referer_spoofing)。不，没有一种既简单又安全的方法。

您可以像控制对任何其他 URL 的访问一样控制对该 URL 的访问：使用您选择的授权和身份验证协议——就像[HTTP 基本](http://en.wikipedia.org/wiki/HTTP_basic_authentication)（通过 SSL！）一样简单，或者像[OAuth](http://en.wikipedia.org/wiki/Oauth)一样现代。

# c++builder-xe - 如何在运行时替换 TDateTime 类型的 Day

> ID：14679923
> 
> 赞同：1
> 
> 时间：2013-02-04T03:20:52.393
> 
> 标签：c++builder-xe, tdatetime

我有名为 dtBegin 的 TDateTime 变量。dtBegin 包含值“7/3/2000”。我只需要将 Day 替换为“2”即可将值更改为“2/3/2000”。

这该怎么做？有人建议我在 C++ Builder XE 中使用 RecodeDay() 方法，但该方法不起作用。我把 dtBegin 放在方法上：

```
RecodeDay(dtBegin, 2); 
```

但是该方法没有返回我想要的值。

有什么方法可以做到这一点吗？请帮帮我。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T03:23:48.653

[`RecodeDay`](http://docwiki.embarcadero.com/Libraries/XE3/en/System.DateUtils.RecodeDay)是一个声明为 的函数`System::TDateTime __fastcall RecodeDay(const System::TDateTime AValue, const System::Word ADay);`，因此您需要存储返回值：

```
dtBegin = RecodeDay(dtBegin, 2); 
```

# message - akka camel 消费者在处理消息之前还是在处理消息之后使消息出列？

> ID：14679928
> 
> 赞同：0
> 
> 时间：2013-02-04T03:22:00.653
> 
> 标签：message, akka, consumer

```
class MyConsumer1 extends Consumer {
  def endpointUri = "some protocol string"

  def receive = {
    case msg: CamelMessage ⇒ // processing msg
  }
} 
```

MyConsumer1 是骆驼消费者的一般形式。

问题：receive() 中的 msg 是在调用之前还是在 receive() 之后先出队？端点协议和 autoAck 如何影响出队行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T16:28:04.220

我不确定你在这里的意思是什么。您在 Consumer Actor 内部处理的消息不再在 Actors 邮箱中，因为它正在被处理，但这并不意味着 Endpoint 没有等待 Actor 确认它正在处理的消息。从端点正在使用的某些队列中删除。

我认为[您的其他问题中已经回答了 autoAck 问题](https://stackoverflow.com/questions/14679789/what-does-autoack-in-akka-camel-consumer-mean)

# ios - 删除表格视图中的行后更新标签

> ID：14679930
> 
> 赞同：0
> 
> 时间：2013-02-04T03:22:29.837
> 
> 标签：ios, uitableview

好的，所以我的问题是我在单击按钮时删除表视图中的行，并且我通过获取发件人的标签并将其从我的数据源数组中删除并从桌子...

在 cellForRowAtIndexPath 中（相关部分是 deleteBtn）：***下面是固定和工作代码**

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"questionCell";

    HTQuestionCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];

    if(cell == nil)
    {
        cell = [[HTQuestionCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    NSDictionary *dict = [NSDictionary dictionary];
    dict = _questionsArray[indexPath.row];

    NSMutableAttributedString *atbString;
    NSMutableAttributedString *atbQuestionString;

    atbString = [[NSMutableAttributedString alloc] initWithString:[dict objectForKey:@"person"] attributes:@{NSFontAttributeName:[UIFont boldSystemFontOfSize:34]}];

    atbQuestionString = [[NSMutableAttributedString alloc] initWithString:[dict objectForKey:@"question"] attributes:@{NSFontAttributeName:[UIFont systemFontOfSize:34]}];

    [atbString appendAttributedString:atbQuestionString];

    [cell.questionTxtView setAttributedText:atbString];

    [cell.deleteBtn setTag:indexPath.row];
    [cell.showBtn setTag:indexPath.row];

    NSLog(@"Delete Button : %@", cell.deleteBtn);

    [cell.deleteBtn addTarget:self action:@selector(deleteMsg:) forControlEvents:UIControlEventTouchUpInside];
    [cell.showBtn addTarget:self action:@selector(showMsg:) forControlEvents:UIControlEventTouchUpInside];

    return cell;
} 
```

然后在删除方法中我这样做：

```
UIButton *tempButton = sender;
NSIndexPath *indexPath = [NSIndexPath indexPathForRow:tempButton.tag inSection:0];
[_questionsArray removeObjectAtIndex:tempButton.tag];
[_dataTable deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
[_dataTable reloadData]; 
```

我也尝试过使用 beginUpdates 和 endUpdates 而不是 reloadData，但没有任何效果......

所以，当我测试它时，我有两行......最初他们的标签设置正确 - 0和1......但是当我删除第0行并检查新第一行的标签时，它仍然有tag = 1，当它现在应该为0时......几乎就像删除后它不会更新按钮的标签......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-04T04:00:01.837

解决方案1：使用：

```
[_dataTable reloadData]; 
```

重置标签，因为 cellForRowAtIndexPath 再次被调用

解决方案2：使用：

```
[_dataTable beginUpdates];
[_dataTable deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
[_dataTable endUpdates]; 
```

它还将调用 cellForRowAtIndexPath 并更新标签

# php - ajax请求中的json数据解析错误

> ID：14679938
> 
> 赞同：1
> 
> 时间：2013-02-04T03:24:05.983
> 
> 标签：php, jquery

我在我的 ajax 请求中收到错误 200。我想在我的 ajax 请求中向页面发布 1 个值，这是一个电子邮件地址。有人可以告诉我出了什么问题

错误：

```
message=:[object Object], text status=:parsererror, error thrown:=SyntaxError: JSON.parse: unexpected end of data 
```

刚刚更改为 $.parseJSON 它没有错误但成功功能不会提醒 JQuery

```
$('#checkemail').click(function() {
    var json = $.parseJSON({ "email": $('#email').val() }); 
    $.ajax({
        url:'http://' +  location.host + '/buyme/include/getemailaddress.php',
        type:'POST',
    contentType: "application/json; charset=utf-8",
    data: json,
    dataType:"json",
    success: function(msg) {
        alert(msg);
    },
    error: function(msg, textStatus, errorThrown) {
        alert( 'message=:' + msg + ', text status=:' + textStatus + ', error thrown:=' +  errorThrown); 
    }});
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T03:32:21.473

> 我还没有走那么远，我现在不知道该怎么做。我需要一个 json 解析器。我真正需要的是返回一个“真”或“假”的空字符串

是的，您发布的那段代码期望从中收到 json`getemailaddress.php`

在你的 php 文件中尝试把

```
<?php

   echo json_encode("hello");

?> 
```

很可能事情会为你解决

编辑

例如，从 php 脚本中，您发送一个数组，例如

```
$responseVar = array(
                    'message'=>'some message',
                    'value'=>'some value'
                    ); 
```

在您的 ajax 请求的成功处理程序中，您可以执行类似的操作

```
success:function(data){
 console.log(data.message);
 console.log(data.value);
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-04T04:09:02.323

you can access your json like this:

```
$.ajax({
     type: 'POST',
     url : URL,
     data: {wis_videoId:wis_v_id},
     success: function(data){
         if(data !=''){
            var obj = JSON.parse(data);
              alert(obj.message)
                              alert(obj.value)
          }
       },
     error:function(request, status, error){
                    alert('', request.responseText);return false}
    }); 
```

# sql - SQL Server 表中有多个标识列

> ID：14679944
> 
> 赞同：2
> 
> 时间：2013-02-04T03:26:10.990
> 
> 标签：sql, sql-server, stored-procedures, identity-column

我有以下问题要解决，我认为我需要一些帮助，因为我认为我认为可能的解决方案不正确：

我有一个带有`identity`列的 SQL Server 表。该表将存储当前数据以及历史数据，如下所述：

1.  让我们假设下表：

    ```
    CREATE TABLE Patient 
    (PatientKey int IDENTITY(1,1) NOT NULL,
     PatientId int,
     UpdateDate datetime NOT NULL,
     UpdateUser int NOT NULL,
     RecordStatus tinyint NOT NULL) 
    ```

`PatientKey`是主键，也是标识列。`PatientId`是唯一标识患者（当前记录以及历史记录）。`UpdateDate`是插入或更新患者的日期。`UpdateUser`用于插入或更新患者的用户的密钥。`RecordStatus`是表示一条记录的状态：0-历史，1-当前，2-已删除。

1.  在上表中`PatientId + RecordStatus = 1`是唯一标识一个患者的当前记录。

2.  当插入新患者时，会`PatientKey`为记录分配一个新患者（这由 SQL Server 引擎自动完成），并且`PatientId`还必须计算一个新患者并将其分配给记录。此外，`RecordStatus`设置为 1。

3.  当现有患者被更新时，当前记录被更新为设置`RecordStatus`等于 0。然后，使用患者的修改数据插入新行。作为插入的一部分，`PatientKey`会为记录生成一个新的，但不会`PatientId`计算新的（即`PatientId`不会改变）。此外，`RecordStatus`设置为 1。

4.  删除患者时，当前记录将更新为设置`RecordStatus`为 2。

问题在于 的计算`PatientId`。我正在考虑`MAX(PatientId) + 1`在存储过程中使用 a 来获取`PatientId`要分配给新记录的新记录，但这将是并发问题。如果多个用户同时创建一个新患者，则 SP 基本上会`PatientId`为他们两个计算相同的值，然后我会在表中结束两个不同的患者相同的`PatientId`.

然后，我正在考虑将更新放在 SQL Server 事务中以阻止表，但我认为这太过分了。此外，对于复杂的更新，我认为该表会被阻塞太久，并且其他创建患者的尝试会超时。有没有更好的方法来实现这一点？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T03:38:36.330

您可以只使用 PatientKey 作为 PatientId（在创建新患者时）并从那时起使用该 Id。

我会看到插入 SP 的工作方式如下：

```
-- Insert A new record with some values
INSERT INTO Patient (UpdateDate, UpdateUser, RecordStatus) 
SELECT @UpdateDate, @UpdateUser, @RecordStatus
     --if patient id is `not null` then just use a place holder value like 1 or 0

--update the new record with the UNIQUE patientKey
UPDATE Patient 
SET PatientId = PatientKey
WHERE PatientKey = SCOPE_IDENTITY() 

SELECT SCOPE_IDENTITY() --to return the new id 
```

* * *

您可以通过使用 Patient 表来完全解决此问题，该表为每位患者保存 1 条记录，并使用 patient_log 表来维护随时间的变化。使用更新前和删除触发器从 Patient 插入 Patient_log。这有很多好处，包括简化查询以获得当前状态，这可能是您执行的最常见的查询，表搜索的性能更快，因为表上没有那么多记录，降低复杂性和更好的数据约束，同时为您提供全面的可审计性，并能够通过一些巧妙的查询创建患者表在特定点的样子的快照。

如果您希望我详细说明这种方法，只需给我发电子邮件或发表评论。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-15T15:58:39.257

```
/*

   this trigger exhibits the following behavior:
   for one or more inserts into the Patient table
   where the inserted record did not explicitly provide a value for PatientId
   the patient id is cacluated using the ROW_NUMBER function and
   an arbitrarily chosen seed value such that each new inserted row
   gets the next available patient id

   works for single or bulk inserts,
   only assigned patient ids to records who were inserted without one.

   NOTE 1: your inserts will probably need to be made within a transaction to avoid problems.
           i'll leave that for commentors to pick on ;)

   NOTE 2: you can then write an udpate trigger to ensure the immutability of PatientId

*/
CREATE TRIGGER [Rewards].[Trigger_Patient_Id]
   ON Patient
AFTER INSERT
AS
BEGIN
   SET NoCount ON

   /* create arbitrary seed value, just like an identity field */
   DECLARE @PatientIdSeed int = 512; 

   /* get the highest id currently in the database greater than the seed value */
   DECLARE @MaxPatientId int = (SELECT ISNULL(MAX(PatientId), @PatientIdSeed) FROM [Patient] WHERE PatientId > @PatientIdSeed) ;

   /* update the patient table... */
   UPDATE 
      [Patient]
   SET 
      /* ... getting new patient id ... */
      PatientId = NewPatientId
   FROM
      /* ... by joining the patient table ... */
      [Patient] AS Patient
      JOIN
         /* ... to this sub-query, that uses the ROW_NUMBER() function
                over the inserted table + MaxPatientId to get new PatientIds */
         (SELECT 
            inserted.Id,
            @MaxPatientId + ROW_NUMBER() OVER(ORDER BY inserted.Key) AS NewPatientId
          FROM 
            inserted
          /* remove this where clause if you wish to overwrite PatientId regardless of insert */
          WHERE
            inserted.PatientId IS NULL
         ) AS newinserts
         ON Patient.Key = newinserts.Key
END 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T03:30:15.490

为什么需要 PatientKey 列和 PatientId 列——它们不能组合为一个字段吗？由于您的表是 Patient，因此将主键设置为 PatientId 是有意义的，这可能是您的身份列。

假设不是，请考虑使用 a`Computed Column`作为您的 PatientId。

这是一个很好的参考指南：

[http://msdn.microsoft.com/en-us/library/ms191250(v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/ms191250(v=sql.105).aspx)

祝你好运。

# multithreading - ZeroMQ 和多线程

> ID：14679945
> 
> 赞同：4
> 
> 时间：2013-02-04T03:26:17.683
> 
> 标签：multithreading, zeromq

ZeroMQ Guide 有使用 ZeroMQ 进行进程内多线程（进程内传输）的很好的例子。但是，该示例显示了一个简单的消息有效负载，它是一个字符串。因此，序列化和去序列化的成本很小。

但是，以大型业务领域对象为例。这个域对象可以被序列化为它的 XML 表示。那么，如果与每个线程通信意味着必须在一个线程中对域对象进行序列化，发送到 inproc 工作线程，进行反序列化并根据消息有效负载采取行动，那么 ZeroMQ 如何在多线程中表现出色。序列化和反序列化的成本不会抵消消息传递的任何性能提升吗？

我理解这种结构的好处，因为将来可以跨 CPU、跨节点、跨网络等进行扩展。但我对整个“使用 ZeroMQ 的多线程”概念感到困惑。

另一种方法是将域对象存储在缓存中，然后将身份传递给工作线程，工作线程将从缓存中获取实际的域对象。这是故意的吗？

欢迎任何用例或最佳实践。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T12:39:47.960

ØMQ 擅长在进程内外移动数据，但不适用于将数据编组到/从二进制表示。

> 序列化和反序列化的成本不会抵消消息传递的任何性能提升吗？

有效地通过消息传递，您已将同步过程转变为并行过程。关键的好处不是您可以传输消息的速度，而是您现在正在并行工作。

# eclipse - 将其他东西放在eclipse工作区中

> ID：14679946
> 
> 赞同：0
> 
> 时间：2013-02-04T03:26:17.853
> 
> 标签：eclipse

我的主目录中有一个`projects`文件夹，用作 Eclipse 工作区。我有一些其他项目（比如写作）我不在其他目录中使用 eclipse，但我想将它们移动到`projects`文件夹中（因为它们毕竟是项目）。鉴于该`projects`文件夹也是一个 Eclipse 工作区，只要我不触摸该`.metadata`文件夹，将非 Eclipse 项目移入其中有什么缺点吗？我已经用谷歌搜索并搜索了关于此的讨论，但没有以一种或另一种方式找到任何有用的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T17:06:44.963

我从 Oracle 中找到了有关设置 Oracle Enterprise Pack for eclipse 的指南，[该指南建议将](http://docs.oracle.com/cd/E15919_01/wlp.1032/e14246/prep.htm)*所有*项目（包括 eclipse 项目）保留在 eclipse 工作区之外，以便可以更轻松地通过源代码管理来管理它们。我将采用这种方法。

# redirect - nginx简单的uri通配符

> ID：14679948
> 
> 赞同：2
> 
> 时间：2013-02-04T03:26:31.863
> 
> 标签：redirect, path, nginx

我正在尝试做一些我认为很简单的事情，但结果却给我带来了很多麻烦。

我在 nginx 下有一个这样定义的虚拟主机

```
server {

    listen 80;
    server_name test.com;
    root   /var/apps/failover/;
    location / {
                index  index.html index.htm;
            }
} 
```

我想要做的是所有设置了 request_uri 的请求（例如：test.com/something）将只发送到 test.com/。

我想要一种用于 uri 的通配符，它​​将用户重定向到虚拟主机的根目录。

我尝试了许多重写语句的组合，但我没有任何工作。

我确信它应该很简单，但我无法让它工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T03:20:50.870

我终于使它与这样的东西一起工作：

```
 server {
    listen 80;
    server_name text.com;
    root   /var/apps/failover/;
    location / {
      index index.html;
      error_page 404 =200 /index.html;
    }
 } 
```

不确定这是否是最好的方法，但可以正常工作并且可以满足我的需要

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T20:47:51.080

如果我的理解是正确的，您希望所有进入您网站的请求都由某种`index`文件提供服务，是吗？我想这是事实，因为如果任何请求将被重写为仅域名而没有任何其他路径，那么我不知道您还能想到什么。

因此，有了这样的假设，还有一个问题：*您是想将带有`301`http 状态代码的用户重定向为永久重定向（用户会知道）* **，还是只是** *在您的应用程序内部轻轻重定向而没有任何返回信息（用户不会知道）*

如果是第一个，那么这个重写指令应该可以工作，将它粘贴在任何`location`块之前：

```
rewrite /.+ / permanent ; 
```

如果是第二个，那么这个`rewrite`指令应该可以工作，将它粘贴在任何`location`块之前：

```
rewrite ^/.* / last; 
```

您还需要一个`location`可以提供路径的块`/`

```
location / {
   try_files index.html =404;
} 
```

有了这个`location`和`try_files`指令，我们说无论你的应用程序是什么都没关系，因为它总是必须使用我们的`index.html`文件或返回 http 状态代码`404`（未找到错误）。

它会帮助你还是你正在寻找不同的东西？

# javascript - 测试失败后如何让 jasmine.js 停止？

> ID：14679951
> 
> 赞同：10
> 
> 时间：2013-02-04T03:27:09.023
> 
> 标签：javascript, tdd, jasmine

我希望跑步者在第一次失败后停止，而不是运行所有测试。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T22:08:26.503

这是一个 hack，但您可以通过在第一次测试之前插入此脚本来做到这一点；

```
<script type="text/javascript">
// after every test has run
afterEach(function () {
  // check if any have failed
  if(this.results_.failedCount > 0) {
    // if so, change the function which should move to the next test
    jasmine.Queue.prototype.next_ = function () {
      // to instead skip to the end
      this.onComplete();
    }
  }
});
</script> 
```

Jasmine 在申请时的最新提交是[https://github.com/pivotal/jasmine/commit/8b02bf731b193e135ccb486e99b3ecd7165bf95c](https://github.com/pivotal/jasmine/commit/8b02bf731b193e135ccb486e99b3ecd7165bf95c)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-12T04:15:48.930

这是 jasmine 项目非常流行的功能请求： [https ://github.com/jasmine/jasmine/issues/414](https://github.com/jasmine/jasmine/issues/414)

看起来有兴趣实施它，但它也已经开放了很长时间，所以谁知道它什么时候可以发布。或者，Mocha 使用其 -b/--bail 选项实现此功能：[https](https://mochajs.org/#usage) ://mochajs.org/#usage 。它的 api 与 Jasmine 的非常相似，因此您可能需要考虑进行切换。

# windows-phone-8 - 如何在 Proxmox VM 上运行 Windows 8 Phone 模拟器？

> ID：14679954
> 
> 赞同：0
> 
> 时间：2013-02-04T03:27:49.260
> 
> 标签：windows-phone-8, windows-phone-8-emulator

VMPlayer 有 VM 设置来运行 Windows 8 Phone 模拟器，Proxmox 有可用的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-02-10T10:04:55.280

您可以尝试为此使用嵌套虚拟化。是否支持嵌套虚拟化以及是否可以在 Proxmox 主机上的 KVM 中启用它取决于您的硬件。

您不能通过 GUI 激活嵌套虚拟化，您必须通过命令行来完成，并且您必须手动完成所有操作。

在 Proxmox 自己的文档 wiki 中，有一篇关于此的文章草稿：

[https://pve.proxmox.com/wiki/Nested_Virtualization](https://pve.proxmox.com/wiki/Nested_Virtualization)

# javascript - 使用 javascript 为用户提供图像下载

> ID：14679955
> 
> 赞同：0
> 
> 时间：2013-02-04T03:28:28.607
> 
> 标签：javascript, image, download

假设我有一些指向网络上图像的 url。可以说...网址是“ [http://hd.wallpaperswide.com/thumbs/abstract_crystal_structure-t2.jpg](http://hd.wallpaperswide.com/thumbs/abstract_crystal_structure-t2.jpg) ”

现在我想当用户按下下载按钮时，图像将被下载。

这个我试过了。。

```
window.location.href = Link; 
```

但有时它只是在浏览器上打开图像..有时会按预期提供下载。

如何达到..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T03:29:24.993

做到这一点的唯一方法是使用`Content-Disposition`服务器端的标头。

```
Content-Disposition: attachment; filename="somefile.jpg" 
```

您不能使用 JavaScript 强制执行此行为。（您也不能 100% 依赖此控件，即使使用`Content-Disposition`标题也是如此。支持因浏览器而异。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T04:04:46.107

[假设一个 HTML5/ES5 浏览器](http://caniuse.com/#feat=download)，你可以使用元素的*下载*属性。`<a>`

1.  将*下载*属性设置`<a>`为所需的文件名。
2.  将*href*设置为图像的位置。
3.  模拟点击它。

如果您已经使用 an`<a>`作为下载按钮，则不必模拟点击，只需使用该元素即可。

请[**在此处**](https://stackoverflow.com/a/14632349/1615483)查看我的答案以获取更多信息，请记住，您无需执行任何 dataURI 操作，因为您有直接链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T03:36:39.423

如果你愿意依赖 Flash，这个库可以解决这个问题。

[https://github.com/dcneiner/Downloadify](https://github.com/dcneiner/Downloadify)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T03:44:36.973

如果您愿意牺牲下载速度，您可以创建一个充当代理的服务器端脚本：它将文件下载到您的服务器，然后使用适当的标头将其传递给客户端的浏览器 ( `Content-Disposition: attachment`) 如布拉德的回答中所述。而不是链接到文件本身，而是链接到您自己服务器上的“网关”。确切的实现将取决于您的基础设施和您选择使用的语言/库。

有许多反对这种方法的论据（责任方面、安全方面和性能方面），除非您别无选择，否则我不会推荐它。

# php - 如何使用 php 将 26-Feb-2013 类型的日期格式转换为 26-02-2013 格式

> ID：14679959
> 
> 赞同：0
> 
> 时间：2013-02-04T03:29:07.810
> 
> 标签：php

我想使用 php 将 26-Feb-2013 类型的日期格式转换为 26-02-2013 格式我可以在很长一段时间内做到这一点，如下所示

```
$date='26-Feb-2013';
$datew=explode('-',$date);
$mounth=$datew[1];
if($mounth=='Jan'){
$mounth=='Jan'

}
elseif($mounth=='feb'){
$mounth=='Feb'

} 
```

并再次使用 implode 函数转换 26-02-2013 格式，但我想知道有什么简单的方法可以做到这一点有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T03:37:54.657

```
$date='26-Feb-2013';
echo date("d-m-Y", strtotime($date)); // prints 26-02-2013 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T03:36:54.000

试试这个：

```
 $date='26-Feb-2013';
   $datew= date('d-m-Y',strtotime($date)); 
```

修正了抱歉应该在提交前测试过

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T04:10:36.060

试试这个

```
 $date='26-Feb-2013';
 echo $datew = date('d-m-Y',strtotime($date)); 
```

# jquery - 在同一页面上具有总天数字段的多个日期选择器

> ID：14679963
> 
> 赞同：0
> 
> 时间：2013-02-04T03:29:29.807
> 
> 标签：jquery, datepicker

在同一页面上需要多个日期选择器的帮助！

我正在使用两组两个日期选择器来计算第一个日期和第二个日期之间的日期。

所以基本上这个，两次：

```
<input type="text" class="datepower" id="datepicker_start" name="from"
        value="">
<input type="text" class="datepower" id="datepicker_end" name="to" value=""
        />
<input type="text" class="datepower" name="totaldays" id="totaldays"
        style="width:80px">days</td> 
```

不记得我在哪里得到了 js 代码（我不知道 js），但我最终通过一些摆弄让它为我工作，唯一的问题是当我尝试运行实际页面时它不会计算总数总天数字段之一（以 js 中的先到者为准）。

这是它的链接：http: [//jsfiddle.net/lhfiso/vXLtX/1](http://jsfiddle.net/lhfiso/vXLtX/1)

它可能很难看，但它正在工作！但不是当我把它放到一个实时页面中时。不知道为什么？！

该代码在 PHP 文档中被引用。我正在使用 DW CS5.5。PHP 版本 5.2.14。还有什么需要知道的？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T03:36:30.240

首先想到的是把你所有的jquery代码放在准备好的处理程序中，比如

```
$(function(){
 //your js code
}); 
```

# html - 为一列而不是行？

> ID：14679964
> 
> 赞同：8
> 
> 时间：2013-02-04T03:29:34.950
> 
> 标签：html, css, html-table

考虑以下 HTML：

```
<table>
    <tr>
        <td>Born</td>
        <td><time datetime="1986-11-05">5<sup>th</sup> November 1986</time></td>
    </tr>
    <tr>
        <td>Gender</td>
        <td>Male</td>
    </tr>
    <tr>
        <td>Sports</td>
        <td>Football<br />Tennis</td>
    </tr>
    <tr>
        <td>Teams</td>
        <td>Liverpool FC<br />Spain FC</td>
    </tr>
</table> 
```

是否`<th>`可以引用列而不是行？我想把左栏加粗。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-04T03:31:55.033

是的，您可以`<th>`用于行或列中的单元格。

```
<table>
    <tr>
        <th>Born</th>
        <td><time datetime="1986-11-05">5<sup>th</sup> November 1986</time></td>
    </tr>
    <tr>
        <th>Gender</th>
        <td>Male</td>
    </tr>
... 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-04T09:36:27.100

[规范](http://www.w3.org/TR/REC-html40/struct/tables.html#edef-TH)明确指出，一个`th`元素可以为一列或一行（或一组列或行）提供标题信息。该属性`scope=row`可用于明确表示标题单元格是行标题。

使用`th`vs.`td`有一些含义。其功能含义是用户代理可能会`th`以一种特殊的方式进行处理，通过相应的头信息让用户访问数据单元。这主要适用于基于语音的代理。为了使这一点有意义，`th`单元格应该真正提供数据行或数据列的标识信息。在这种情况下，条件得到满足。因此，您可以并且应该使用`th`而不是`td`，完全独立于所需的渲染。

其他含义是默认情况下，`th`元素内容以粗体呈现并水平居中。如果这不合适，您可以轻松地在 CSS（甚至 HTML）中覆盖它。在您的情况下，如果您希望内容为粗体但左对齐，请使用`th { text-align: left; }`. （另一种可能更好的风格是右对齐行标题：`th { text-align: right; }`。居中可能看起来很奇怪。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T03:36:18.743

或者您可以将该css添加到仅第一列的粗体

```
table tr td:first-child{font-weight:bold;} 
```

# asp.net-mvc - ASP.Net MVC 对某些 HTTP 帖子没有响应

> ID：14679965
> 
> 赞同：2
> 
> 时间：2013-02-04T03:29:53.723
> 
> 标签：asp.net-mvc

*   ASP.Net MVC 4 .Net 4.5 应用程序
*   在“小型”HTTP 帖子上提交没问题。
*   似乎“更大”的 HTTP Post 请求没有得到响应。
*   发生在所有浏览器和不同设备上。
*   没有错误，只是没有响应。（“连接被重置”）
*   IIS 8 日志显示 Post 已收到
*   在我的开发机器上运行良好：Windows 8、IIS 8。

试过了

*   将 maxRequestLength 更改为 50000 (kb)
*   新的空 ASP.Net MVC 项目，带有一个控制器和一个用于测试 HTTP 发布行为的操作。同样的问题。
*   记录每个 application_... 事件：没有任何记录的帖子没有响应。
*   在不同的 VPS 主机上设置新的 Web 服务器 VS 2012 IIS 8：同样的问题。
*   尝试在提交 10K 个字符的文本时触发错误，并将 maxRequestLength 设置为 1 (kb)。在开发机器上抛出“超出最大请求长度”异常，但在主机上响应。

所以...

1.  我还应该尝试什么？
2.  这种“无响应”的可能原因是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T11:17:51.663

这是我忽略的尝试。

*   尝试从不同国家/地区的浏览器进行 HTTP Post。
*   尝试从不同 Internet 服务提供商后面的浏览器进行 HTTP Post。

在这种情况下，事实证明这是我本地 ISP 的缓存问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T09:28:16.843

我的理解是大帖子的问题，通常不建议通过网络发布大数据，因为数据包有可能在途中丢失，这是一个普遍的问题。

maxRequestLength 表示 ASP.NET 支持的最大文件上传大小，maxAllowedContentLength 指定 IIS 支持的请求中内容的最大长度。因此，我们需要同时设置 maxRequestLength 和 maxAllowedContentLength 值来上传大文件。来源：[http](http://forums.iis.net/t/1169846.aspx) ://forums.iis.net/t/1169846.aspx 所以试试 maxAllowedContentLength

# dojo - dojo 1.8 - 命名和销毁对象的实例

> ID：14679967
> 
> 赞同：0
> 
> 时间：2013-02-04T03:30:01.723
> 
> 标签：dojo

嗨如何命名和销毁对象的实例？请参阅[我](http://jsfiddle.net/clementyap/sTxbh/14/)在 jsfiddle 中的工作

```
declare("obj_Button", [_WidgetBase], {
        buildRendering: function () {
            // create the DOM for this widget
            this.domNode = domConstruct.create("button", {
                innerHTML: "New Button Instance"
            });
        }
    });

    on(dom.byId('btn1'), "click", function(evt)
    {
        (new obj_Button()).placeAt(dom.byId('id'));
         //name the instance
    });

    parser.parse(); // check out more!

    on(dom.byId('btn2'), "click", function(evt)
    {
    // destroy the instance by name, not object
    }); 
```

请指教。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T13:47:29.927

如果您知道小部件的 ID，则可以使用“dijit/registry”获取小部件，然后将其销毁：

```
require(["dijit/registry"], function(registry) {
   registry.byId("myWidgetId").destroyRecursive();
}); 
```

如果只知道dom节点的ID，可以registry.findWidgets()（如果widget是dom节点的子节点）或者registry.getEnclosureWidget()（如果dom节点是widget的子节点）。

请参阅[http://dojotoolkit.org/reference-guide/1.8/dijit/registry.html#finding-all-widgets-underneath-a-dom-node](http://dojotoolkit.org/reference-guide/1.8/dijit/registry.html#finding-all-widgets-underneath-a-dom-node)

# ios - iOS IMAP 同步与 MailCore 最佳实践

> ID：14679970
> 
> 赞同：1
> 
> 时间：2013-02-04T03:30:37.043
> 
> 标签：ios, email, ios6, imap, mailcore

我正在开发一个应用程序，其中本地核心数据数据库与用户的 IMAP 电子邮件帐户保持同步。我正在使用 MailCore ( [http://libmailcore.com](http://libmailcore.com) ) 来处理所有 IMAP API 调用，但似乎有一些缺点。这是我希望我的应用程序能够执行的操作：

*   在服务器上拥有最近 50 封电子邮件的本地副本
*   下载自上次提取以来用户收到的所有新电子邮件，设备上最多保留 50 封。
*   删除服务器上已删除的本地邮件。

MailCore 提供的用于检索电子邮件的唯一方法如下：

```
- (NSArray *)messagesFromSequenceNumber:(NSUInteger)startNum to:(NSUInteger)endNum withFetchAttributes:(CTFetchAttributes)attrs

- (NSArray *)messagesFromUID:(NSUInteger)startUID to:(NSUInteger)endUID withFetchAttributes:(CTFetchAttributes)attrs 
```

现在，我正在从服务器检索最新的电子邮件并下载有关它们的所有信息，然后我从服务器检索最新的 50 个 UID，并将它们与我的本地缓存进行比较，以查看已删除的内容。这似乎非常低效。有没有更好的方法来同步收件箱而无需两次往返服务器（至少）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T10:18:27.953

检查 imap 服务器功能。NOOP 和 imap 空闲功能的实现是您查询的答案。

# c - 如果我在 fopen() 失败时使用 fclose() 会发生什么（可能）

> ID：14679972
> 
> 赞同：3
> 
> 时间：2013-02-04T03:31:04.347
> 
> 标签：c, fopen, fclose

这是我相对简单的场景，我想知道是否可以为自己节省一个条件并整理一下代码。它的生产代码是别人写的，我正在整理。它根本没有 fclose，所以我添加的只是条件 fclose() 行：

```
 FILE *fp;
  struct stat sb;
  /* snipped code */
  if (((fp = fopen (config_file, "r+")) == NULL) || (fstat (fileno (fp), &sb))) {
      syslog (LOG_ERR, "Fault. Unable to read config file");
      if (fp != NULL) {
          fclose (fp);
      }
      return -1;
  }
  /* code carries on after this */ 
```

问题是，我真的需要`if(fp != null)`在我的代码中加入吗？只做`fclose(fp)`不检查有什么影响？我阅读了 C89 标准，但我不清楚结果会是什么。

提前喝彩

史蒂夫

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T03:35:32.673

`fclose`在空指针上具有未定义的行为。这意味着它可能会出现段错误或导致您出现问题。我会坚持你的检查，因为它们是很好的做法，并且使代码更易于阅读。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T03:35:20.263

在 BSD 中，`fclose( NULL )`会出现段错误。我相信对*可能*发生的事情的经典描述是鼻恶魔可能会飞出你的鼻子，但不确定行为是未定义还是未指定。我从不认为这是一个非常重要的区别：只是不要这样做。

# javascript - 带有父目录和当前文件名的动态href

> ID：14679988
> 
> 赞同：0
> 
> 时间：2013-02-04T03:33:45.030
> 
> 标签：javascript, href

我在每个页面上都有一个菜单页面，我希望链接具有当前页面和文件夹的引用。

假设文件夹目录如下

```
root > Folder1> Foldcer2> File.html 
```

我当前的链接如下所示

```
<a href="'../../OtherFolder/newpage.html?ref=#'+'Folder1|File.html
<a href="'../../OtherFolder/newpage2.html?ref=#'+'Folder1|File.html 
```

我怎样才能动态地将它变成一些东西，我不必在每个页面的 href 中更改“Folder1”。

我设法获取当前页面名称，但我一直在获取父目录以及如何将其添加到“href”中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T03:40:17.307

扩展我的评论：

```
 <html>
<body>

 The referrer of this document is:
<script>
 document.write(document.referrer);
</script>

</body>
</html> 
```

很确定您可以使用它来达到您的意图吗？

# php - 如何在 CentOS 上安装 PHP intl 扩展？

> ID：14679990
> 
> 赞同：33
> 
> 时间：2013-02-04T03:34:17.970
> 
> 标签：php, centos, installation, yum, php-extension

我对安装软件包几乎一无所知。通过遵循一个非常具体的教程，我设法用 yum 安装了 Zend Framework 1。

现在我需要 PHP intl 扩展，但我不知道如何安装它。

我做了

```
yum list php*intl 
```

并看到有一个可用。所以我做了

```
yum install php-intl 
```

并收到以下错误消息：

```
Error: Package: php-intl-5.3.3-14.el6_3.x86_64 (updates)
       Requires: php-common = 5.3.3-14.el6_3
       Installed: php-common-5.3.17-2.el6.remi.x86_64 (@remi)
           php-common = 5.3.17-2.el6.remi
       Available: php-common-5.3.3-3.el6_2.8.x86_64 (base)
           php-common = 5.3.3-3.el6_2.8
       Available: php-common-5.3.3-14.el6_3.x86_64 (updates)
           php-common = 5.3.3-14.el6_3
 You could try using --skip-broken to work around the problem
 You could try running: rpm -Va --nofiles --nodigest 
```

我没有尝试消息中提到的建议，因为我不知道他们会做什么，而且我害怕破坏某些东西。这是一台生产机器，我没有另一台机器可以测试。我试图找到一个与我的 PHP 版本相同的 rpm 来下载，但没有运气。

这两个建议有什么作用，可以*安全*尝试吗？我还能尝试什么来安装 intl 扩展？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2014-02-07T00:44:17.370

由于您有来自 remi 存储库的 php-commom，因此您还需要从 remi 获取 php-intl。

添加`--enable-repo`选项如下：

```
yum --enablerepo=remi install php-intl 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-07-06T09:29:27.087

如果你有更高的 PHP 版本，比如 5.6，你必须同时启用`remi`和`remi-php56`repos 来安装所有额外的依赖项：

```
yum --enablerepo=remi,remi-php56 install php-intl 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-09-08T10:48:45.493

我使用以下步骤通过 pecl 成功安装了 INTL。

1) 安装 icu 和库：

`yum -y install icu libicu libicu-devel`

2）php-devel包和phpize：

`yum -y install php-devel phpize`

3) and, of course gcc:

`yum -y install gcc gcc-cpp gcc-c++`

This is working for me.my php version is 5.6.12

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-04-02T20:43:31.130

for php 7.0 using

```
#list all options    
$ sudo yum list php7*intl

#install
$ sudo yum install php70-intl 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-21T17:45:24.230

Yum 抛出错误，因为我们正在尝试将多个包更新为有冲突的版本。您的 yum 输出表明 php-intl 需要特定版本的 php-common。删除所有垃圾：

```
Requires 5.3.3-14
Installed 5.3.17-2
Available 1st Option: 5.3.3-3
Available 2nd Option: 5.3.3-14 
```

这告诉我们您已经安装了比 php-intl 允许的更新版本的 php-common (5.3.17-2)。

我认为你有两个选择。（作为一个新手，我不会在没有在开发环境中练习的情况下尝试这些。）

# 1) 删除 remi 包

引用关于超级用户的类似问题。“尝试删除所有 remi php 包，禁用 remi 存储库并安装默认的 centos 6 php 5.3.3 包。”

[https://superuser.com/questions/505340/centos-6-how-to-install-php-mysql-when-php-common-remi-is-present](https://superuser.com/questions/505340/centos-6-how-to-install-php-mysql-when-php-common-remi-is-present)

# 2) 将 php-common 降级到版本 5.3.3-14

```
yum downgrade php-common 
```

我不知道您是否会遇到更多依赖问题并不得不降级其他软件包。我在这里找到了更多细节。

[https://www.centos.org/modules/newbb/viewtopic.php?topic_id=40567&forum=56](https://www.centos.org/modules/newbb/viewtopic.php?topic_id=40567&forum=56)

其他 Stack Exchange 站点也有类似的问题。

[https://serverfault.com/search?q=centos+error+package（370](https://serverfault.com/search?q=centos+error+package)个结果）

[https://unix.stackexchange.com/search?q=centos+error+package（57](https://unix.stackexchange.com/search?q=centos+error+package)个结果）

# iphone - ASIhttprequest在wifi，iOS6中有时会超时，重启iphone后就OK了

> ID：14679997
> 
> 赞同：0
> 
> 时间：2013-02-04T03:35:41.433
> 
> 标签：iphone, ios6, wifi, asihttprequest

我正在使用 ASIhttprequest，它适用于大多数情况。但是，我和一些客户在极少数情况下会遇到超时。（3个月内日常使用可能会发生3~5次。）此外，我已经将超时设置为30s。当这个问题发生时，我还将超时设置为 130 秒，但这并没有帮助。

发生这种情况时，我无法将大约 200KB JPEG 文件的图像上传到我的 http 服务器，但 100 字节的文本上传是可以的，其他功能（发布）工作正常。

我的平台是iphone4、iOS6、wifi。最奇怪的是，当我将网络切换到 3G 时没问题，而 wifi 却失败了。但是，Safari 总是在同一部手机上运行良好。

iOS5 上的另一个 ipad 对于 wifi 和 3G 似乎总是可以的。

我通过谷歌搜索，但我无法得到解决方法。是苹果 iOS6 的 bug 还是 ASIhttprequests 的 bug？

我该如何解决？ASIhttpreqeust 停止更新... MKNetworkKit 可靠吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T04:55:04.993

不，它不可能是一个错误。我已经使用 ASI 几年了，没有任何问题。是的，根据您的网络稳定性，它可能会在任何情况下失败。只需尝试增加请求的超时时间。有时会发生，因为服务器抛出错误。最好在 requestFailed 回调中记录错误并查看。

按照此设置所有 ASI 请求的超时。

```
[ASIHTTPRequest setDefaultTimeOutSeconds:10]; 
```

按照此设置特定 ASI 请求的超时。

```
asiRequest.timeOutSeconds = 20; 
```

由于 ASI 现在已弃用，您可以考虑迁移到 AFNetworking 或 RestKit 或任何其他框架。使用这个基于可达性类，您可以轻松捕获网络不可用性。

# css - 为什么 div 不排成一行以及如何让他们排成一行？

> ID：14679998
> 
> 赞同：0
> 
> 时间：2013-02-04T03:35:45.490
> 
> 标签：css, layout, twitter-bootstrap, grid, fluid-layout

我尝试为 3 个相同大小的 div 制作自己的网格系统，目的是让它们以 1024 像素的屏幕/设备宽度甚至更低的宽度保持在同一行中。但是由于某种原因，在 1024 像素时，div 不同步，但在更高的宽度下很好，尽管它们本身不占用 1024 像素，我也在使用引导程序和我的代码（下面的代码） -

html

```
<div clss="row-fluid">
<div id="box" class="span12">

  <div class="grid">

    <div class="b b1">

      <div class="module">
        <h2>
        IMPORTANT TITLE GOES HERE
        </h2> 
      </div>  

    </div>  

    <div class="b b2">

        <div class="module">
        <h2>
        IMPORTANT TITLE GOES HERE
        </h2> 
      </div>

    </div>  

    <div class="b b3">

       <div class="module">
        <h2>
        IMPORTANT TITLE GOES HERE
        </h2> 
      </div>

    </div>  

  </div>    

</div>
</div> 
```

CSS -

```
*, {
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  box-sizing: border-box;
}

#box{
  max-width: 1024px;
  min-width: 250px;
  margin: 30px auto;
  background: #111;
}

.grid {
  overflow: hidden;
}
.grid .b{
  float: left;
}

.grid .b1 {
  max-width: 341px;
  min-width: 250px;
  height: 200px;
  background: blue;
}
.grid .b2 {
  max-width: 341px;
  min-width: 250px;
  height: 200px;
  background: red;
}
.grid .b3 {
  max-width: 341px;
  min-width: 250px;
  height: 200px;
  background: green;
}

.module {
  padding-top: 20%;
} 
```

那么我哪里出错了，我该如何解决呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T03:45:07.580

基本上你需要做的是使用css属性'float'和'clear'。

在这里查看这个[JSFiddle](http://jsfiddle.net/h6GQR/)。

对于这个例子，我只是针对所有 div，如下所示，但显然你会改变它来定位你需要的单个 div，而不是页面上的所有 div。

```
div {
    float:left;
    clear:left;
} 
```

希望这可以帮助！