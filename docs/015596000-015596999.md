# StackOverflow 问答 15596000-15596999

# c# - C# 泛型接口协方差

> ID：15596005
> 
> 赞同：5
> 
> 时间：2013-03-24T07:02:23.227
> 
> 标签：c#, generics, covariance

我不确定这里发生了什么，但使用以下代码出现编译器错误：

```
namespace SO
{
    interface IUser<PostType>
    {
        PostType Post { get; set; }
    }

    interface IPost<UserType>
    {
        UserType User { get; set; }
    }

    class User : IUser<Post>
    {
        //Implementation
    }

    class Post : IPost<User>
    {
        //Implementation
    }

    class SomeOtherClass
    {
        // Compiler Error: Cannot implicitly convert type 'SO.User' to
        // 'SO.IUser<SO.IPost<SO.User>>'. An explicit conversion exists 
        // (are you missing a cast?)
        IUser<IPost<User>> user = new User();

        //Works Fine
        IUser<Post> user = new User();
    }
} 
```

`Post`如果是 的子类型，为什么我会收到错误消息`IPost<User>`？我知道在这种情况下我可以只使用`User`而不是`IUser<IPost<User>>`，但我想知道为什么这不起作用。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-24T08:07:04.620

我将尝试用简单的例子来解释它。假设您还有一个类实现`IPost<User>`：

```
class PicturePost : IPost<User>
{
    // Implementation
} 
```

那么这段代码将无法编译：

```
 IUser<Post> user = new User();
    user.Post = new PicturePost(); 
```

因为是不兼容`user.Post`的具体类（它们是兄弟姐妹）。`Post``PicturePost`

然后想象您问题中的那一行已成功编译：

```
 // C# compiler is so kind today and it compiled this.
    IUser<IPost<User>> user = new User(); 
```

由于`user.Post`now 将是类型`IPost<User>`，您可能会编写这样的代码行：

```
 IUser<IPost<User>> user = new User();
    user.Post = new PicturePost(); 
```

他们将完美编译，但第二行将因**运行时错误**而失败！这是因为实际类型`user.Post`不是or 。`Post``IPost``PicturePost`

因此，为了实现类型安全，如果有可能编写此类代码，C# 编译器将禁止编译。为了确保您不会编写此类代码，`Post`属性应该是只读的：

```
interface IUser<PostType>
{
    PostType Post { get; } // No setter, this is readonly.
} 
```

现在您将无法编写邪恶的代码，并且`Post`就其接口而言，所有用法都将是类型安全的，因为您可以**获取**它，而不是完美地分配给其接口的变量。

但这还不够，要告诉编译器你的接口是轻量级的，你需要明确指定你的类型参数只是**out**（你可以使用它，但你不能将它传入）。因此，具有以下接口实现（注意`out`关键字），您的代码将编译：

```
interface IUser<out PostType>
{
    PostType Post { get; } // No setter, this is readonly.
}

    // Both lines compile!
    IUser<IPost<User>> user = new User();
    IUser<Post> user1 = new User(); 
```

希望我保持简单，同时不要错过重点:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T08:06:11.827

那么你必须让你的接口协变：

```
interface IUser<out PostType>
{
    PostType Post { get; }
}

interface IPost<out UserType>
{
    UserType User { get;  }
} 
```

请参阅 [http://msdn.microsoft.com/en-gb/library/ee207183.aspx](http://msdn.microsoft.com/en-gb/library/ee207183.aspx) [http://msdn.microsoft.com/en-gb/library/dd799517.aspx](http://msdn.microsoft.com/en-gb/library/dd799517.aspx)

# javascript - 调用 ClientScript 不会保留网页控件中的值

> ID：15596011
> 
> 赞同：0
> 
> 时间：2013-03-24T07:03:00.120
> 
> 标签：javascript, asp.net, clientscriptmanager

我有一个小问题。如果使用 F5 刷新页面，TextBox 应保留其旧值。在 Page_Load() 中，如果我保持 // Loading(); 然后 TextBox1 保留其旧值。
一旦我删除评论，它就会在 TextBox1 中失去价值。

请告诉我它背后的原因以及应该做些什么来避免它。

```
 <script type="text/javascript">

      function TextBox1_TextChanged() {
       <%
           Session["HitCount1"] = TextBox1.Text ;
       %>

     }

     function getMyvalSession() {
            var ff = "Loading Value";
           return ff;
     }

    </script>

<body>
    <form id="form1" runat="server">

    <asp:TextBox ID="TextBox1"  Name="TextBox1"  runat="server" 
 AutoPostBack='true'  onchange="TextBox1_TextChanged()"></asp:TextBox>

          <%
                 string x = null;
                  x = Session["HitCount1"].ToString().Trim();

                  if ((x.Equals(null)) || (x.Equals("")))
                 { 
                     // Session Variable is either empty or null .
                 } 
                 else 
                 {
                     TextBox1.Text = Session["HitCount1"].ToString();
                 }
          %>

  </form>
</body>

    protected void Page_Load(object sender, EventArgs e)
    {
      //  Loading();
    }

    void Loading()
    {
        String csname = "OnSubmitScript";
        Type cstype = this.GetType();

        // Get a ClientScriptManager reference from the Page class.
        ClientScriptManager cs = Page.ClientScript;

        // Check to see if the OnSubmit statement is already registered.
        if (!cs.IsOnSubmitStatementRegistered(cstype, csname))
        {
string cstext = " document.getElementById(\"TextBox1\").value = getMyvalSession()  ; ";
cs.RegisterOnSubmitStatement(cstype, csname, cstext);
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T11:33:54.307

结合内联服务器端代码和代码隐藏代码通常是一个坏主意。我建议只使用代码隐藏代码。

这段代码：

```
 function TextBox1_TextChanged() {
   <%
       Session["HitCount1"] = TextBox1.Text ;
   %>

 } 
```

...不会产生（服务器端）会话条目“HitCount1”设置为的效果`Textbox1.Text`，因为`TextBox1_TextChanged`它是一个客户端函数，并且您的赋值语句将在服务器端发生。在运行时，编译器将删除服务器代码块，因此`TextBox1_TextChanged`将是一个空函数。

经验法则：事情发生在客户端，或者它们在回发时发生在服务器上，或者它们通过 Ajax 调用发生在服务器上。您不能将客户端和服务器代码混合在一起。

我的建议：切换到在代码隐藏中做所有事情。当你让它工作时，如果你有太多的回发，请调查 Ajax 调用。

# php - in_array 函数无法正常工作

> ID：15596012
> 
> 赞同：1
> 
> 时间：2013-03-24T07:03:20.403
> 
> 标签：php, arrays, multidimensional-array, get

我正在使用多维数组来保存给定页面的变量。我正在尝试从 url 中获取一个字符串，并将其与我的模板数组中的一个数组匹配，以提取正确的变量以显示在页面上。

这是我的数组：

```
$template = array(

    "index" => array(
        "title" => "Dashboard",
        "model" => "model/dash.php"
    ),
    "input" => array(
        "title" => "Dashboard",
        "model" => "model/input.php"
    ),
    "jobboard" => array(
        "title" => "Job Board",
        "model" => "model/job_board.php"
    ),
    "jobcreate" => array(
        "title" => "Job Creator",
        "model" => "model/job_create.php"
    )
); 
```

这是我用来尝试验证页面的内容：

```
if(isset($_GET['page'])){ $page = $_GET['page']; }

if(in_array($page, $template)){
    $title = $template[$page]['title'];
    $model = $template[$page]['model'];
    echo "yes";
}else{
    $title = $template['index']['title'];
    $model = $template['index']['model'];
    echo "no";
} 
```

这`echo "yes/no";`就是我用来调试它是否工作的东西，但无论我做了什么，它都会继续输出不。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T07:06:53.603

[`in_array()`](http://php.net/manual/en/function.in-array.php)看价值观。这可能是您想要的钥匙。

你可以用[`array_key_exists()`](http://php.net/manual/en/function.array-key-exists.php).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T07:07:00.730

看看php的文档[`in_array()`](http://php.net/manual/en/function.in-array.php)

> in_array — 检查一个值是否存在于数组中

看起来您的意图是检查数组的索引，而不是值。数组中的值是数组。

尝试[`array_key_exists()`](http://www.php.net/manual/en/function.array-key-exists.php)改用。

```
if (array_key_exists($page, $template)) {
  $title = $template[$page]['title'];
  $model = $template[$page]['model'];
  echo "yes";
}
else {
  $title = $template['index']['title'];
  $model = $template['index']['model'];
  echo "no";
} 
```

# php - 打开 localhost 时权限被拒绝

> ID：15596020
> 
> 赞同：9
> 
> 时间：2013-03-24T07:04:35.987
> 
> 标签：php, ubuntu, permissions, localhost

我最近在 Ubuntu 中安装了 Apache、PHP 和 MySQL。并将我创建的文件复制到`var/www`目录中。但是当我打开`http://localhost`它显示

> 警告：未知：无法打开流：第 0 行的未知中的权限被拒绝
> 
> 致命错误：未知：在第 0 行的未知中打开所需的 '/var/www/index.php' (include_path='.:/usr/share/php:/usr/share/pear') 失败

如何正常运行我的项目？它在 Windows 中运行良好。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-24T07:16:42.907

根据这篇文章，您需要为所有者、组和每个人授予读取/执行权限。

将问题文件的权限设置为 777。注意，您应该避免在可从 Internet 访问的服务器上执行此操作。

[http://webomania.wordpress.com/2007/03/12/permission-denied-in-unknown-on-line-0/](http://webomania.wordpress.com/2007/03/12/permission-denied-in-unknown-on-line-0/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T07:25:52.170

要解决此问题，请查看 ErrorLog 中的行，找出它试图访问的文件夹。如果该文件夹已存在块，请确保将其设置为根据需要允许访问。如果没有，请在您的 Apache 配置文件中添加一个块，根据需要允许访问。有关文件夹 /usr/local/awstats/htdocs，请参见下面的示例。

命令允许，拒绝所有人允许

如需完整参考，请查看[apache wiki](http://wiki.apache.org/httpd/ClientDeniedByServerConfiguration?highlight=%28Client%29%7C%28denied%29%7C%28by%29%7C%28server%29%7C%28configuration%29)

# jquery - 可以在删除然后重新创建元素后保持与委托的绑定

> ID：15596024
> 
> 赞同：0
> 
> 时间：2013-03-24T07:04:58.533
> 
> 标签：jquery

我正在为 UL 中的 LI 下的所有锚创建绑定。（我使用 Delegate 是因为我在工作中使用 1.6 jQuery 版本）。无论如何，出于某种原因，我删除了文本锚。然后在以后重新应用它。

简而言之，有没有办法将锚标签与委托绑定，由于某些条件而删除锚标签。重新应用锚（通过包装），然后取回该绑定？

我很清楚，我正在使用“委托” - 但是一旦我打开锚标签，绑定就会丢失 - 即使我重新包装它。翼。

```
jQuery(pc).delegate("li > a",'click', function(){
    showit(jQuery(this).closest('li').index());
    pc.find("li:not(:has(a))").wrap('<a href="#">'); <-- this is when I add it lateron
    jQuery(this).replaceWith(jQuery(this).text()); <-- this is when I remove it.
}); 
```

**编辑::: 也许这可以在未来帮助某人。DELEGATE 确实按预期工作。如果您查看我的代码，您会看到我包装了“LI”，而不是 li 中的文本。这就是事件没有保留其绑定的原因。当我用锚包裹 LI 的文本时，宾果游戏——它起作用了。我为转移人们的时间而道歉。因此，在这种情况下，解决方案是“wrapInner”，而不是“wrap”。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T07:10:32.240

你的意思是这样的吗？

```
 if(new Date().getTime() % 2 == 0) 
     {
        $("body").on('click','ul>li a', doWork);
     }
     else
    {
        $("body").off('click');
    }

     //...
     //...
     // later , ReBind the event ...    

function doWork()
{
        alert('mod2');
} 
```

[jsbin](http://jsbin.com/uvakit/2/edit)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T07:11:11.217

有关更多信息，请参阅 jQuery 的“委托”区域：http `on`: [//api.jquery.com/on/](http://api.jquery.com/on/)

如果您将绑定应用于文档，它应该处理您添加和删除锚点：

```
jQuery(document).on('click', 'ul li a', function(event){
  // Check event here
  // Do something here
}); 
```

# java - Hibernate 命名查询及其性能优势？

> ID：15596025
> 
> 赞同：7
> 
> 时间：2013-03-24T07:05:03.003
> 
> 标签：java, hibernate

正如休眠文档所说，命名查询的目的是将项目中不同位置的 HQL 清除到某些 xml 中的单个位置（在声明性方法的情况下）。这意味着在查询修改的情况下不需要重新编译，但重新加载会话工厂是required 这意味着在大多数情况下服务器会在查询对象被缓存时启动。但是在注释的情况下，我需要在实体级别定义命名查询。所以这里再次编译需要。我的问题是命名查询是否也有助于提高性能。这是我的理解：-

1）当我使用命名查询时，只是查询对象被缓存在二级缓存中。当我说只是查询对象时，这意味着只缓存查询语法而不是查询结果。对吗？如果它是正确的，那么它可能仅在 HQL 的情况下才有用，因为我们可以避免将 HQL 转换为本地查询，每次查询被触发并具有良好的时间性能。

但是，如果我们使用本机 sql，命名查询不会提供这种优势，因为在这种情况下不会发生任何翻译。

因此，命名查询的主要优点是创建 sqls 的中央存储库。是的，在 HQL 的情况下，它也可以为我们节省一些到本地 sql 的翻译时间，但请记住，查询对象将在 jvm 的生命周期内存在，并且会消耗一些内存。所以有些权衡在这里。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-24T08:34:46.537

命名查询有两个小优点：

*   创建会话工厂时检查它们的语法，使应用程序在出现错误时快速失败（这可能表明您的应用程序缺少一些单元测试）
*   可以从多个地方访问和使用它们（这可能表明存在设计问题）

它们也有一个缺点：当使用命名查询读取或调试代码时，如果不搜索其定义，您将无法立即看到正在执行的查询。

其余的真的不重要：

*   与实际执行查询的成本相比，将 HQL 查询转换为 SQL 的成本可以忽略不计
*   缓存查询的内存成本非常小。请记住，无论如何，Hibernate 都需要将所有实体元数据保存在内存中。

我倾向于在使用它的代码中定义查询，并对它们进行单元测试。这使得代码更易读，更健壮。

# textbox - 从文本区域获取文本

> ID：15596029
> 
> 赞同：0
> 
> 时间：2013-03-24T07:05:40.240
> 
> 标签：textbox, google-apps-script

我觉得我要疯了，试图让最简单的事情发挥作用！我在 Google Drive 上的 Google 电子表格中有一个邮件列表。我创建了一个用户界面，提示输入用户想要包含在电子邮件中的消息。我的代码看起来像这样。

```
function startBulkEmailUI(e) {
  //create main form
  var app = UiApp.createApplication().setTitle('Send Email').setWidth(602).setHeight(402);
  var scrollPanel = app.createScrollPanel().setId('scrollPanel').setAlwaysShowScrollBars(true) ;
  var mainPanel = app.createVerticalPanel().setId('mainPanel');
  mainPanel.setStyleAttribute('border', '1px solid #C0C0C0').setWidth("100%").setHeight("100%");
  scrollPanel.add(mainPanel);
  //create panel for input boxes etc
  var inputPanel =     app.createVerticalPanel().setId('inputPanel').setWidth("100%").setHeight("100%").setSpacing(0);
  var messageLabel = app.createLabel('E-mail Message');
  var messageBox = app.createTextArea().setName('messageBox').setId('messageBox').setVisible(true).setWidth(400).setHeight(150);
  var attachmentLabel = app.createLabel('E-mail Attachment');
  var attachmentCheckBox = app.createCheckBox('Attach a file').setValue(false);
 inputPanel.add(messageLabel).add(messageBox).add(attachmentLabel).add(attachmentCheckBox);
  mainPanel.add(inputPanel).setCellHorizontalAlignment(inputPanel, UiApp.HorizontalAlignment.CENTER) ;
  inputPanel.setCellHorizontalAlignment(messageLabel, UiApp.HorizontalAlignment.CENTER);
  inputPanel.setCellHorizontalAlignment(messageBox, UiApp.HorizontalAlignment.CENTER);
  inputPanel.setCellHorizontalAlignment(attachmentLabel, UiApp.HorizontalAlignment.CENTER);
  inputPanel.setCellHorizontalAlignment(attachmentCheckBox, UiApp.HorizontalAlignment.CENTER);
  //add function buttons
  var buttonsPanel = app.createHorizontalPanel().setStyleAttribute('margin', '20px').setWidth(500);
  var closeButton = app.createButton('Close',app.createServerHandler('close_'));
  var sendButton = app.createButton('Send!').setId("sendButton");
  buttonsPanel.setId('buttonsPanel').add(closeButton).add(sendButton);
  mainPanel.add(buttonsPanel).setCellHorizontalAlignment(buttonsPanel, UiApp.HorizontalAlignment.CENTER);
  buttonsPanel.setCellHorizontalAlignment(closeButton, UiApp.HorizontalAlignment.CENTER).setCellHorizontalAlignment(sendButton, UiApp.HorizontalAlignment.CENTER);
  app.add(scrollPanel);
  //handlers
  var handlerSendEmails = app.createServerClickHandler('sendEmails');
  handlerSendEmails.addCallbackElement(inputPanel);
  sendButton.addClickHandler(handlerSendEmails);

  //show the form
  ss.show(app);

  return app;
}

function sendEmails(e) {
  var contactDetail = getContactDetail();
  var count = 0;
  var failed = 0;
  for (i in contactDetail) {
  var row = contactDetail[i];
  var emailAddress = row[9];

  var stuff = e.parameter.messageBox.value;
  Logger.log(e.parameter);
  var message = 'Hi, ' + row[4] + '\n\n' + 'This is a test!';       // Second column
  var subject = 'Test Email';
  try {
//      MailApp.sendEmail(emailAddress, subject, message);
      count = count+1;
    } catch(e) {
      failed = failed+1;
    }
  }
  var msg = stuff;
  Browser.msgBox('Debug Msg', msg, Browser.Buttons.OK);
} 
```

我希望用户在 textarea 中输入信息，然后我可以将其用作电子邮件的正文。我发现没有 getText，所以我找到了数百个答案说它应该看起来像上面的代码：你创建一个回调处理程序，然后使用 e.parameter.OBJECT_NAME.value 来获取文本。它根本不适合我，我已经尝试了我能想到的所有解决方法。有什么建议么？我的代码有问题吗（我知道它很乱……）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T07:44:13.753

在处理函数中获取小部件值的“正常”方式是在表单中，`e.parameter.widgetName`所以在你的情况下你应该简单地使用

`var stuff = e.parameter.messageBox;` 没有 ".value" ，结果是一个字符串。

# c# - PInvokeStackImbalance 不是由 CallingConvention 引起的

> ID：15596030
> 
> 赞同：7
> 
> 时间：2013-03-24T07:05:49.807
> 
> 标签：c#, c, pinvoke

我不知道这里有什么问题。

我有大量的 p/invoke 调用正常工作......除了这个。

我设法将我的问题减少到以下示例代码。

如果我删除任一结构成员（双精度或整数），它工作正常。

我假设问题在某种程度上与结构的布局有关 - 但是当我在 C 中执行 sizeof() 和在 C# 中执行 Marshal.SizeOf() 时，它们都返回相同的值......所以如果结构大小在 C# 和 C 中是相同的，可能是什么问题？

我显然在这里遗漏了一些基本的东西。

**SampleDLLCode.c**

```
#pragma pack(1)

typedef struct SampleStruct {
    double structValueOne;
    int structValueTwo;
} SampleStruct;

__declspec(dllexport) SampleStruct __cdecl SampleMethod(void);
SampleStruct SampleMethod(void) { 
    return (SampleStruct) { 1, 2 };
} 
```

**构建脚本**

```
gcc -std=c99 -pedantic -O0 -c -o SampleDLLCode.o SampleDLLCode.c
gcc -shared --out-implib -o SampleDLL.dll SampleDLLCode.o 
```

**C# 代码**

```
using System;
using System.Runtime.InteropServices;

namespace SampleApplication
{
    [StructLayout(LayoutKind.Sequential, Pack=1)]
    public struct SampleStruct {
        public double structValueOne;
        public int structValueTwo;
    } 

    class Program
    {
        [DllImport("SampleDLL.dll", CallingConvention = CallingConvention.Cdecl)]
        public static extern SampleStruct SampleMethod();

        static void Main(string[] args)
        {
            SampleStruct sample = SampleMethod();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-24T11:41:38.633

首先，让我祝贺你提出了一个很好的问题。一次，很高兴收到重现问题所需的所有代码。

问题是由于 gcc 和 Microsoft 工具用于函数返回值的 ABI 略有不同。对于可以放入寄存器的返回值，例如`int`返回值，没有区别。但是由于您的结构太大而无法容纳在单个寄存器中，并且在这种情况下 API 之间存在差异。

对于较大的返回值，调用者将隐藏指针传递给函数。这个隐藏的指针被调用者压入堆栈。该函数将返回值写入该隐藏指针指定的内存地址。ABI 的区别在于谁将隐藏的指针从堆栈中弹出。Microsoft 工具使用的 ABI 要求调用者弹出隐藏指针，但默认的 gcc ABI 要求被调用者这样做。

现在，gcc 几乎可以无限配置，有一个开关可以让您控制 ABI。您可以让 gcc 使用与 Microsoft 工具相同的规则。这样做需要[`callee_pop_aggregate_return`函数属性](http://gcc.gnu.org/onlinedocs/gcc/Function-Attributes.html)。

将您的 C 代码更改为：

```
__declspec(dllexport) SampleStruct __cdecl SampleMethod(void) 
    __attribute__((callee_pop_aggregate_return(0)));
    // specifies that caller is responsible for popping the hidden pointer

SampleStruct SampleMethod(void) { 
    return (SampleStruct) { 1, 2 };
} 
```

# php - 如何解决从 USB 闪存驱动器运行 wampserver 的问题？

> ID：15596033
> 
> 赞同：1
> 
> 时间：2013-03-24T07:06:08.967
> 
> 标签：php, apache, wampserver

我在我的系统上使用 Windows 7。我正在尝试在 USB 闪存驱动器上远程运行 wampserver。为此，我进行了必要的路径配置设置，并将 wamp 的整个安装文件夹从我的机器移动到 USB 闪存驱动器。我参考了以下链接以将 wamp 从本地计算机迁移到 USB 闪存驱动器：`http://forum.wampserver.com/read.php?2,62431,62812`

完成所有必要的步骤后，我双击 wamp 文件夹中的 wampmanager.exe，红色的 wamp 符号“W”出现在系统托盘中。它没有转换为绿色“W”，这意味着 wampserver 尚未启动。为了检测问题，我检查了端口 80 的可用性，它是可用的。当我单击 Apache->Service->Start?Resume Service 时，我得到一个标题为“Aestan Tray Menu”的对话框，其中包含消息“无法执行菜单项（内部错误）[异常] 无法执行服务操作：系统无法找到指定的文件”。我用谷歌搜索了解决方案，但无法得到它。谁能帮我解决这个问题？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T07:09:22.897

当您将所有服务器移动到闪存时，您可能忘记了一些文件。有一个特定于闪存的版本（便携式版本），称为“统一服务器”。

有作者网页的链接。 [http://www.uniformserver.com](http://www.uniformserver.com)

它是完全免费的。问候！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-12T07:12:03.317

Wamp 中的错误警告很模糊，但我想你会发现 Wamp 只是在错误的地方寻找。

请记住`localhost`，它是所有设备上的根目录，因此`wamp`将查找`localhost`.

也许为了避免混淆，您应该调用一些独特`"localhost"`的东西。`usb`

请参阅这篇关于重命名“localhost”的帖子 [如何在使用 wampserver 的本地系统上将 URL 从“localhost”更改为其他内容？](https://stackoverflow.com/questions/17652373/how-to-change-the-url-from-localhost-to-something-else-on-a-local-system-usin)

# eclipse - 如何控制 popupMenus 中 objectContribution 的可见性？

> ID：15596051
> 
> 赞同：1
> 
> 时间：2013-03-24T07:10:00.363
> 
> 标签：eclipse, eclipse-rcp, eclipse-plugin, eclipse-gef

![在此处输入图像描述](../Images/981d5686f355ff42f134ac0ad2e612a7.png)
大家好，我用上面的代码创建了一个弹出菜单，只有当文件夹的名称与“AAA”匹配时才会显示这个菜单。

这就是问题所在：如果有一个文件夹在另一个文件夹之后也被命名为“AAA”，这个菜单也会显示出来。实际上我们只是希望我们的弹出菜单显示在特定的主文件夹中，而不是它们的子文件夹中。那么如何我可以这样做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T07:44:40.440

为该贡献定义一个额外的“可见性”标签，然后在可见性标签内使用[PropertyTester](http://wiki.eclipse.org/Command_Core_Expressions#Property_Testers)来更详细地检查名称。

# angularjs - 使用 Jasmine 测试一个简单的 AngularJS 服务

> ID：15596065
> 
> 赞同：16
> 
> 时间：2013-03-24T07:13:12.333
> 
> 标签：angularjs, jasmine, karma-runner, angularjs-service

我有一个简单的服务，我正在尝试对其进行单元测试。无论我尝试什么，searchService 要么是未知的提供者，要么 service 为空（奇怪的是这不会导致我的测试失败！！）。

任何人都知道我可能做错了什么？

```
angular.module('app').service('searchService', function( $q, _ ) { // _ is lodash

  var cache = [
    {
      id: "current",
      name: "Current",
      description: "Search current data"
    },
    {
      id: "historical",
      name: "Historical",
      description: "Search historical data"
    }
  ];

  this.getSearchOptions = function() {
    var deferred = $q.defer();
    deferred.resolve( angular.copy( cache ) );
    return( deferred.promise );
  };

  this.getSearchOptionsByID = function( id ) {
    var deferred = $q.defer();
    var searchOption = _.findWithProperty( cache, "id", id );

    if ( searchOption ) {
      deferred.resolve( angular.copy( searchOption ) );
    } else {
      deferred.reject();
    }
    return( deferred.promise );
   };
  }
); 
```

我正在尝试创建一个加载到 searchService 中的单元测试，以便我可以检查缓存的值：

```
describe("Unit: Testing Services", function() {
  describe("Search Service:", function() {
    var service = null;

    beforeEach(function() {
      angular.module('app').service('_');
    });
    // I've also tried the commented out code below
    //beforeEach(inject(function(searchService) {
    //this.service = searchService;
    //}));
    //it('should contain an searchService', invoke(function(service) {

    it('should contain an searchService', function(searchService) {
      expect(searchService).not.to.equal(null);
    });

    it('should contain two search options', function(searchService) {
      expect(searchService.getSearchOptions()).to.equal(2);
    });
  });
}); 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-24T20:24:55.297

以下应该适用于没有参数的服务，也许这可以是一个起点：

```
describe("Unit: Testing Services", function() {
    describe("Search Service:", function() {

        beforeEach(function() {
            angular.module('app');
        });

        it('should contain a searchService',
           inject(function(searchService) {
                expect(searchService).not.to.equal(null);
        }));

        it('should contain two search options',
            inject(function(searchService) {
                expect(searchService.getSearchOptions()).to.equal(2);
        }));

   });
}); 
```

（您也可以在这里查看：[如何使用 Jasmine 测试 AngularJS 服务？](https://stackoverflow.com/questions/13013772/how-do-i-test-an-angularjs-service-with-jasmine)）

# facebook - 使用 Facebook C# Sdk 发布到朋友墙

> ID：15596075
> 
> 赞同：0
> 
> 时间：2013-03-24T07:14:58.947
> 
> 标签：facebook, windows-phone-7, facebook-graph-api, windows-phone-7.1, facebook-c#-sdk

我正在设计一个 WP7.1 应用程序，该应用程序使用**Facebook C# Sdk**发布到其他用户的墙上，无需用户交互（即在后台）。
我搜索了方法，发现*POST*可以做这些事情。
但是，[Facebook 路线图页面](https://developers.facebook.com/roadmap/completed-changes/)和[此](https://developers.facebook.com/blog/post/2012/10/10/growing-quality-apps-with-open-graph/)博客文章提到，通过**Graph API**发布到其他用户的墙的功能已被删除，而必须使用**Feeds Dialog 。**
我的问题是：
- 此更改是否会影响上述 POST 方法。*- 如果是，那么是否有一种解决方法可以在没有*
用户交互的情况下 在其他用户的墙上发布（即在后台）。

 ** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T07:41:33.543

现在要在朋友墙上发帖，要么你必须使用提要对话框，它会提示用户。但是如果您不想提示用户，那么您可以在用户墙上发布带有标签的用户朋友，假设朋友批准该标签，它将显示在标记的朋友墙上。*

# salt-stack - saltstack：重用特定于 minion 的计算变量

> ID：15596076
> 
> 赞同：1
> 
> 时间：2013-03-24T07:14:59.000
> 
> 标签：salt-stack

使用 puppet 时，我曾经做过类似以下的事情：

```
 class common_vars {
        $some_var = calculate_some_var()
    }

    class A {
        Class[common_vars] -> Class[A]
        do_something_with($common_vars::some_var)
    }

    class B {
        Class[common_vars] -> Class[B]
        do_something_else_with($common_vars::some_var)
    } 
```

我现在正在 saltstack 中寻找类似的东西。

例如，我使用它来设置绑定到特定网络地址的网络服务。我首先设置网络，然后计算一些常用地址，然后设置网络服务。

我不想在每个状态文件中一遍又一遍地计算这些地址（不同的服务可能共享相同的地址），我想计算一次，然后再使用它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T10:45:46.090

这可能超出了 Salts YAML 渲染器。相反，您可以用纯 Python 编写 SLS，让您能够编写函数、类等并返回状态数据。例如：

```
some_var = lambda: 1 + 2    

def do_something():
    global(some_var)
    return some_var() + 5  # 8

def do_something_else():
    global(some_var)
    return some_var() + 10  # 13

def run():
    return {
        '/home/user/somefile.txt': {
            'file.append': [
                {'text': do_something()},
             ]
        },
        '/home/user/some_other.txt': {
            'file.append': [
                {'text': do_something_else()},
             ]
        },
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T05:56:42.937

我会在 Salt's Pillar 中这样做。

这是一个演练：[http ://docs.saltstack.com/topics/tutorials/pillar.html](http://docs.saltstack.com/topics/tutorials/pillar.html)

# heroku - 使用 CarrierWave 将文件上传到 Linode

> ID：15596077
> 
> 赞同：0
> 
> 时间：2013-03-24T07:14:59.450
> 
> 标签：heroku, carrierwave, linode

我的应用程序托管在 Heroku 上，我想知道是否可以将文件上传到 Heroku 上的 public/ 文件夹而不是直接上传到 - 比如说 - Linode

我的应用同时使用 Heroku 和 Linode。两者通过网络服务请求相互交谈。但一般来说，我尝试仅在 Linode 上存储任何生成/上传的文件 - 而在 Heroku 上没有任何内容

现在我有一种情况，我想允许用户上传文件。最终目的地是 Linode。但目前，我不得不从客户端 PC -> Heroku -> Linode 去。然而，最佳解决方案是 Client PC -> Linode

在尝试重新连接现有代码之前，我想我会问一下。如下更改 storage_dir 方法会成功吗？

```
def storage_dir
  return http://<linode>/<local-folder>
end 
```

感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-01T21:41:29.170

那么，您使用的是 CarrierWave 吗？我不确定您当前如何上传到 Linode，但我会尝试一下。

因此，根据 CarrierWave 在 GitHub 上的文档，您可能需要在 config/initializers 中的carrierwave.rb 文件中添加类似这样的内容：

```
CarrierWave.configure do |config|
  config.fog_credentials = {
    :provider               => 'AWS',          # required
    :aws_access_key_id      => 'xxx',          # required
    :aws_secret_access_key  => 'yyy',          # required
  }
  config.fog_directory  = 'name_of_directory'  # required
end 
```

当然，前提是您使用的是 Amazon AWS S3。[我在http://ruby-doc.org/gems/docs/p/phpfog-fog-0.4.1.2/Fog/Linode/Compute/Mock.html](http://ruby-doc.org/gems/docs/p/phpfog-fog-0.4.1.2/Fog/Linode/Compute/Mock.html)找到了一些 linode （和其他存储服务）的雾文档如果你点击在 'new(options={}),' 上，你会看到`@linode_api_key = options[:linode_api_key]`. 因此，我认为您将能够使用 CarrierWave 直接上传到 Linode：

```
CarrierWave.configure do |config|
  config.fog_credentials = {
    :provider               => 'Linode',       
    :linode_api_key         => 'xxx',          
  }
  config.fog_directory  = 'name_of_directory'  
end 
```

# php - 如何为 Mac OS X 下载 PHP 扩展

> ID：15596078
> 
> 赞同：1
> 
> 时间：2013-03-24T07:15:01.077
> 
> 标签：php, xcode, macos

我最近购买了一台 Mac 来进行 LAMP 开发。但是，来自 Debian，使用 apt-get 工具下载 PHP 扩展非常简单，但在我的 Mac 上不存在。在阅读了多个论坛之后，似乎需要下载 Xcode 并使用端口来这样做，或者，下载二进制文件并编译它们。所以我的问题是，为了获得所有这些扩展（、、、等），最好`php5-mysql`使用什么工具`php5-gd`。`libapache2-mod-php5``php5-curl`

注意：我使用的是安装在我的 Mac 上的默认 PHP，它显然没有很多扩展或对它们的支持。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T07:17:49.497

你是对的。您可以先下载[XCode](https://developer.apple.com/xcode/)，然后使用[MacPorts](http://guide.macports.org/)下载/安装/启用 php 和每个扩展。这与我们在工作时在 MacBook Pro 上设置 LAMP 开发环境时使用的方法相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T11:36:21.240

除了 MacPorts，还有[http://mxcl.github.com/homebrew/](http://mxcl.github.com/homebrew/)具有相同的方法

# java - 使用 v8::Locker 的正确方法是什么，为什么必须使用它？

> ID：15596083
> 
> 赞同：6
> 
> 时间：2013-03-24T07:16:26.870
> 
> 标签：java, android, java-native-interface, v8

我正在尝试使用 NDK 将 v8 嵌入到 Android 应用程序中。

我有一个看起来像这样的 JNI 模块（未显示 JNI 映射代码）：

```
#include <jni.h>
#include <android/log.h>

#include <v8.h>
using namespace v8;

static jlong getMagicNumber() {
  HandleScope handle_scope;
  Persistent<Context> context = Context::New();
  Context::Scope context_scope(context);

  Handle<String> source = String::New("40 + 2");

  Handle<Script> script = Script::Compile(source);
  Handle<Value> result = script->Run();

  context.Dispose();

  return result->NumberValue();
} 
```

我第一次运行时`getMagicNumber`，它正确运行并返回 42。我第二次尝试运行它时，它崩溃了。

具体来说，这`ASSERT`在 v8 中看到的`isolate.h`失败：

```
// Returns the isolate inside which the current thread is running.
INLINE(static Isolate* Current()) {
  Isolate* isolate = reinterpret_cast<Isolate*>(
      Thread::GetExistingThreadLocal(isolate_key_));
  ASSERT(isolate != NULL);
  return isolate;
} 
```

这听起来很像[这个问题](https://groups.google.com/forum/?fromgroups=#!topic/v8-users/Px0JcsfDjYA)，它建议使用`v8::Locker`来获得“对隔离的独占访问权”。

`Locker l;`通过在 的顶部添加一个简单的`getMagicNumber`，不再发生崩溃。当我不注意时，容易解决的问题往往会自行解决。

我对为什么这能解决我的问题只有最微不足道的理解，而且我收到了编译器警告，我正在`v8::Locker`以不推荐的方式使用它们。推荐的方法是为它提供 a`v8::Isolate`作为`v8::Locker`构造函数的参数，但我不知道我应该如何“获得”一个隔离。

最终：根据 v8 的当前状态，解决此问题的正确方法是什么，*为什么*？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-24T20:07:30.680

据我了解，V8 隔离是 V8 运行时的一个实例，包含一个堆、一个垃圾收集器和零个或多个 V8 上下文。隔离*不是*线程安全的，必须通过`v8::Locker`.

一般来说，要使用 V8，您必须首先创建一个隔离：

```
v8::Isolate* isolate = v8::Isolate::New(); 
```

然后，要使用任何线程的隔离：

```
v8::Locker locker(isolate);
v8::Isolate::Scope isolateScope(isolate); 
```

此时线程拥有隔离，可以自由创建上下文、执行脚本等。

现在，为了非常简单的应用程序的好处，V8 提供了默认隔离并放宽了锁定要求，但是如果您始终从同一个线程访问 V8，则只能使用这些拐杖。我的猜测是您的应用程序失败了，因为第二次调用是从不同的线程进行的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-07T20:30:52.400

我现在只是在学习 V8，但我认为你需要调用：

v8::Locker locker（隔离）；

这将创建一个堆栈分配的 Locker 对象，该对象将阻止 Isolate 在另一个线程上使用。当当前函数返回此堆栈对象的析构函数时，将自动调用导致 Isolate 被解锁。

您需要致电：

v8::Isolate::ScopeisolateScope(isolate);

这会将当前线程设置为运行此 Isolate。隔离只能在一个线程上使用。Locker 强制执行此操作，但 Isolate 本身需要为当前线程配置。这将创建一个堆栈分配对象，该对象指定哪个 Isolate 与当前线程相关联。就像 Locker 一样，当此变量超出范围时（当当前函数返回时），将调用 Scope 析构函数以取消将 Isolate 设置为默认值。我相信这是必要的，因为许多 V8 API 调用需要对 Isolate 的引用，但不要将其作为参数。因此他们需要一个他们可以直接访问的（可能通过每个线程变量）。

Isolate::Scope 类所做的只是在构造函数中调用isolate::Enter() 并在析构函数中调用isolate::Exit()。因此，如果您想要更多控制权，您可以自己调用 Enter()/Exit()。

# asp.net - 如何在具有 VS2010 的开发服务器上测试将我的 ASP.NET Web 应用程序作为 64 位进程运行？

> ID：15596085
> 
> 赞同：3
> 
> 时间：2013-03-24T07:16:53.617
> 
> 标签：asp.net, visual-studio-2010, iis, 64-bit

我的任务很简单：我需要在我的开发机器上的 64 位环境中测试我的 ASP.NET Web 应用程序。（此时我什至不询问通过调试器运行它。我所需要的只是在 64 位进程中运行它。）

所以我在 Visual Studio 2010 中创建了一个普通的 C# Web 应用程序并调整了它的属性，如下所示：

![在此处输入图像描述](../Images/0a211bc8c58027c4f874176478b970a9.png)

然后我做了 Ctrl+F5 （或不调试就运行），IE 加载并挂断，如下所示：

![在此处输入图像描述](../Images/bf6f5dfda07b0de096934d23375531fc.png)

我在这里做错了什么？

PS。在 Windows 7 Ultimate（64 位）上运行它。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-09-11T14:38:47.310

我们遇到了同样的问题，当团队跳转到 Visual Studio 2012 时，这个注册表项对我们非常有用：

您可以添加一个注册表项来强制 Visual Studio 使用 iisexpress.exe 的 64 位版本；不幸的是，它是一个仅适用于 VS2012 的解决方案。

```
reg add HKEY_CURRENT_USER\Software\Microsoft\VisualStudio\11.0\WebProjects
    /v Use64BitIISExpress /t REG_DWORD /d 1 
```

然后重新启动 Visual Studio 并勾选 [X] Use IIS Express in your settings。

（另见[来源](http://visualstudio.uservoice.com/forums/121579-visual-studio/suggestions/3254745-allow-for-iis-express-64-bit-to-run-from-visual-st)）。

**更新**：作为参考，在**Visual 2013**中，可以在界面中找到此选项：***选项/项目和解决方案/Web 项目/使用 64 位版本的 IIS Express 用于网站和项目***

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T09:23:32.317

在 IIS 中确保应用程序池、高级设置、启用 32 位应用程序 = false

如果此设置为 true，则工作进程将作为 32 位 WOW64 进程运行。

克里斯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T09:46:11.753

项目或解决方案级别无需设置。我正在 VS2010 上同时在 32 位和 64 位机器上开发 WebApp。实际上我们正在开发 SVN，我们的几台机器有 Win7 32 位，我的几个伙伴有 Win7-64 位笔记本电脑。但是在两台不同的机器上编译应用程序时，我们没有遇到任何此类问题，即使在实时服务器上，它也能顺利运行。几乎不关心位和字节。

验证测试运行。在本地 IIS 或 Cassini 网络服务器中发布您的代码和主机，并通过 LAN 访问它。

此外，如果可能，将解决方案和项目设置恢复为其原始配置设置。通常，除非严格要求，否则我们不需要更改目标。作为，AFAIK，它在“任何 CPU”下编译程序集作为目标，它适用于所有，即 IA、X64 和 X86 ..

最后，如果您遇到任何错误，请在此处发布。它也会帮助您和我们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-24T14:59:33.050

首先，您如何知道您的 IIS 进程目前是以 32 位还是 64 位运行您的网站？打开任务管理器检查 w3wp.exe 的位数。如果你的机器是 64 位的，那么 IIS 默认运行 64 位。你的问题似乎是别的。如果位是问题，那么你甚至不会走到这一步。检查 IIS 日志 (c:\inetpub\logs{website-ID}{date})... 这可能会给您一些指示。如果那里什么都没有，请检查事件查看器。如果没有，则检查虚拟目录是否实际上是在默认网站下的 IIS 管理器中创建的。

您是否实际测试过 IIS（无 ASPX）是否正常工作？http:// 本地主机？那样有用吗？如果这有效，那么我建议检查您的 ASP.NET 模块是否正确安装在 IIS 中。

希望这可以帮助。

# c++ - 类内的朋友函数c ++

> ID：15596088
> 
> 赞同：-2
> 
> 时间：2013-03-24T07:17:29.433
> 
> 标签：c++, class, friend-class

我写了这段代码，但朋友功能不起作用（foodmoney 和 hobbymoney 没有在我的朋友功能中声明。我的错误在哪里？

```
#include <iostream>
using namespace std;
class myBase
{
private:
    int friendvar;
    int foodmoney;
    int hobbymoney;
public:
    void setdata();
    myBase(){friendvar=0;}
    friend void caldata(myBase &mbo);
};

void myBase::setdata()
{
    cout<<"Enter foodmoney :" ;cin>>foodmoney;
    cout<<"enter hoobymoney:";cin>>hobbymoney;
}

void caldata(myBase &mbo)
{
    mbo.friendvar=(foodmoney+hobbymoney)/2;
    cout<<mbo.friendvar<<endl;
}

int main()
{
    myBase baseobj;
    baseobj.setdata();
    myBase friends;
    caldata(friends);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T07:18:30.363

```
mbo.friendvar=(foodmoney+hobbymoney); 
```

应该

```
mbo.friendvar=(mbo.foodmoney+mbo.hobbymoney); 
```

等等等等

Friend 函数**不是**成员函数，因此它们没有对任何特定对象的特殊访问权限。您必须指定要访问的对象（`mbo`在您的情况下使用）。

话虽如此，我看不出 caldata 是朋友功能的任何充分理由。为什么不让它成为一个普通的成员函数呢？或者也许你应该让它成为一个有两个参数的友元函数？很难说你想在这里实现什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T07:22:01.137

改变

```
 cin>>foodmoney; 
```

至

```
cin>>mbo.foodmoney; 
```

和改变

```
cin>>hobbymoney; 
```

至

```
cin>>mbo.hobbymoney; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-25T06:27:20.463

您的代码根本无法编译。修复已经描述过了。但是要使 ti 完整：正如您所引用的`friendvar`using ，对and`mbo.friendvar`执行相同的操作。`foodmoney``hobbymoney`

此外，您还没有初始化`foodmoney`并且`hobbymoney`在您的构造函数中。因此，在您给`caldata(friends);`您的电话中，随机结果会打印在屏幕上。最后：您使用实例化新对象，`myBase friends;`因此这是不受先前调用影响的全新对象`setdata()`。

您的问题中没有定义您对此功能的低级要求，我无法提供更多帮助。

# java - 如何使用 Jacob 从 java 代码中禁用 VB6 MsgBox

> ID：15596091
> 
> 赞同：5
> 
> 时间：2013-03-24T07:17:43.137
> 
> 标签：java, excel, jacob, vba

我正在使用 JACOB API 从 VB 宏中调用一些 Sub。我想阻止这个宏生成的 MsgBox。

这是我打开宏 XXXX.xls 并运行包含一些 MsgBox 的 sub traiteOT 的代码。

```
 `private static void callExcelMacro(File file, String macroName) {
        ComThread.InitSTA();

        final ActiveXComponent excel = new ActiveXComponent("Excel.Application");

        try {
            // This will open the excel if the property is set to true
             excel.setProperty("Visible", new Variant(true));

            final Dispatch workbooks = excel.getProperty("Workbooks").toDispatch(); 
            //String    eventSink = null ;

            Dispatch.call(workbooks,"Add");
         Dispatch workBook = Dispatch.call(workbooks,"Open", file.getAbsolutePath()).toDispatch();
            ExcelEventHandler w = new ExcelEventHandler();

            Variant V1=new Variant(file.getName() + macroName);
            // Calls the macro
            final Variant result = Dispatch.call(excel, "Run", V1 );

            // Saves and closes
            //Dispatch.call(workBook, "Save");

            com.jacob.com.Variant f = new com.jacob.com.Variant(true);
        //  Dispatch.call(workBook, "Close", f);

        } catch (Exception e) {
            e.printStackTrace();
        } finally {

            excel.invoke("Quit", new Variant[0]);
            ComThread.Release();
        }
    }

    public static void main(String[] args) {
        ExcelMacroTest emt = null;
        try {

            final File file = new File("D:XXXXXXXX.xls");
            final String macroName = "!TraiteOT";
            callExcelMacro(file, macroName);

        } finally {
            if (emt != null) {
                emt.quit();
            }
        }
    }
} 
```

`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T17:02:47.807

除非您注释执行函数的代码，否则您不能阻止 msgbox，或者避免以其他方式调用该代码。

如果你真的需要，你可以将 VBA 代码读入一个变量，去掉 Msgbox 函数调用，然后执行它（使用 Visual Basic For Applications Extensibility）

最好只在工作簿中编写一个没有 MsgBox 的特殊函数

# php - 窗口消息后保留文本字段数据

> ID：15596101
> 
> 赞同：0
> 
> 时间：2013-03-24T07:19:16.080
> 
> 标签：php, javascript, forms

当用户输入错误或空字段值并提示窗口消息时，如何保留用户在窗口消息后输入的文本字段中的数据？

```
<?php if(empty($value) && in_array($key, $required_fields) === true) {?>
        <script type="text/javascript">
        alert("Fields marked with an asterisk are required");
        history.back();
        </script>
<?php } ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T07:47:11.450

至少有三种解决方案

1.  客户端 HTML5：`required`为每个必需元素添加属性（请参阅[此处](http://caniuse.com/#search=required)的支持）
2.  客户端 javascript 看[这里](https://stackoverflow.com/questions/1182755/stop-submit-with-empty-input-values)
3.  服务器端 php（如您所做）：将 POST 值存储到 SESSION 并将它们设置为这些元素的值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T07:43:49.530

我认为最好的方法是要么使用 ajax 来阻止页面发生变化。或者，不要在 if 中执行 javascript，而是使用用户给出的答案作为默认值重新打印整个表单。你根本不应该使用 history.back() 来做你想做的事情。

# php - $_SESSION['loggedin']，特定用户的识别和安全问题

> ID：15596108
> 
> 赞同：0
> 
> 时间：2013-03-24T07:21:12.033
> 
> 标签：php, mysql, login, token

请指教，如果我的想法是正确的。我搜索了信息，但没有找到确切的答案。

用户输入用户名和密码，输入的用户名/密码与mysql中相同。

我创建 $_SESSION['loggedin'] = 1; 这意味着在服务器上的某个地方创建了具有随机名称的文件，例如 r21bj2a3....，并且在用户浏览器中创建了具有类似 r21bj2a3...的值的 cookie。

在下一页我检查 if( $_SESSION['loggedin'] == 1 )。用户浏览器连接到服务器，向服务器发送如下信息：我有值为 r21bj2a3....的 cookie，请给我发送内容？会议？服务器发送特定 cookie 会话登录为 1 的信息。

据我了解，如果恶意用户获取 cookie 值 r21bj2a3....，发送到服务器并获得与普通用户相同的答案？

根据 $_SESSION['loggedin'] 我无法识别特定用户？要在成功登录后识别特定用户，我可以创建唯一令牌，在 mysql 中记录并通过会话传递？在来自传递的会话的密码保护页面上，我获取令牌值并检查（选择）该值是否存在于 mysql 中。这种方式可以吗？可以用好的方法发布一些链接吗？

关于令牌。我通过会话传递令牌值。这意味着如果恶意用户获取 cookie 值，发送到服务器并获取包含令牌值的答案（因此恶意用户获得普通用户的权限）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T07:29:34.283

HTTP 是无状态协议。它不会跨多个页面跟踪数据。因此我们需要可以在网站的所有页面上全局访问的会话

为了识别当前登录网站的用户，我们需要在他成功认证后将用户表中的 user_id 字段的值存储到会话中。

例如

```
$_SESSION['user_id']=$result['user_id'] 
```

为了确定用户是否登录，我们可以检查 $_SESSION['user_id'] 变量的值。如果它为空，则用户未登录，否则用户已登录

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T07:34:31.297

我建议将所有活动会话保存在数据库中，您可以为此创建一个表，以防止会话劫持，您可以检查每个特定会话（登录）并查看用户是否已经过身份验证，然后，不允许二次身份验证。

这里的问题，如何识别用户？可以绑定一些信息，比如USER_AGENT，IP地址，但是这些信息也可以被黑客欺骗，但是概率比较小。

此外，一旦用户退出，您可以删除数据库中的会话记录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T07:24:14.080

要识别会话属于哪个用户，只需在会话中设置一个可行的

```
$_SESSION['user'] = user 
```

您对授予会话访问权限的 cookie 是正确的。如果安全很重要，请使用 SsL。

# android - Sencha Touch 2.1：表单面板键盘隐藏 Android 上的活动文本字段

> ID：15596111
> 
> 赞同：13
> 
> 时间：2013-03-24T07:21:38.280
> 
> 标签：android, sencha-touch-2

当我点击屏幕底部的文本字段时，键盘会出现并隐藏活动元素。在 iOS 上，它运行完美。

我可以滚动表单，所以文本字段在可见区域中，但这一点都不好。我做错了什么还是这是一个已知的错误，因为我在 Sencha Touch 本身的这个示例中具有相同的行为：docs.sencha.com/touch/2-1/touch-build/examples/forms/

如果在此表格上：

![在此处输入图像描述](../Images/35b87df27005920f5cd7c2295f4a1462.png)

我点击“Bio”的文本字段，键盘隐藏了文本字段，而不是向上滚动文本字段以使其在键入时可见：

![在此处输入图像描述](../Images/937085898e7744491530a8fb16380568.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-26T16:06:43.153

这绝对是一个已知问题，我在 Android 上见过很多次。您唯一可以尝试做的就是在输入字段上侦听焦点事件，然后滚动到元素。您可能必须使用`Y`最适合您情况的正确值。

```
{
    xtype: 'textareafield',
    name: 'bio',
    label: 'Bio',
    maxRows: 10,
    listeners: {
        focus: function(comp, e, eopts) {
            var ost = comp.element.dom.offsetTop;
            this.getParent().getParent().getScrollable().getScroller().scrollTo(0, ost);
        }
    }
}, 
```

这对我有用。如果您需要任何帮助来实现这一点，请告诉我！

![在此处输入图像描述](../Images/32dd161eb1923941e04353e39e15a2cd.png)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-08-20T14:47:56.613

侵入性较小的解决方案：

在应用程序启动方法上添加以下行：

```
launch: function() {
    if (Ext.os.is.Android) { //maybe target more specific android versions.
        Ext.Viewport.on('painted', function() {
            Ext.Viewport.setHeight(window.innerHeight);
        });
    }
    // ... rest of the launch method here
} 
```

这在我一直在测试的许多情况下都很好用。Cordova 和 Chrome 实现。对于 Cordova/Phonegap 应用程序，您只需要注意将全屏设置为 false。（在 Cordova 3.5 上测试）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-24T11:15:36.640

“Ext.Viewport.on('painted'”-解决方案给了我滚动问题。整个页面在方向改变后无法滚动，因为视口高度会大于窗口高度。(Ext.Viewport.getHeight() 将与方向更改后的 Ext.Viewport.getWindowHeight() 不同。）

使用覆盖输入进行了工作：

创建文件 app/overrides/field/Input.js

```
Ext.define('myApp.overrides.field.Input', {
  override: 'Ext.field.Input',

  initialize: function() {
    var me = this;

    // Solves problem that screen keyboard hides current textfield
    if (Ext.os.is.Android) {
        this.element.on({
            scope      : this,
            tap        : 'onTap',
        });
    }

    me.callParent();
  },

  onResize: function(input) {
    var me = input;
    //if input is not within window
    //defer so that resize is finished before scroll
    if(me.element.getY() + me.element.getHeight() > window.innerHeight) {
        Ext.Function.defer(function() {
            me.element.dom.scrollIntoView(false);
        }, 100);
    }
  },

  // Solves problem that screen keyboard hides current textfield in e.g. MyTimeRowForm
  //old solution with Viewport.on('painted', gave scroll problem when changeing orientation
  onTap: function(e) {
    me = this;
    window.addEventListener( "resize", function resizeWindow () {
        me.onResize(me);
        window.removeEventListener( "resize", resizeWindow, true );
    }, true );
  },   
}); 
```

并将其添加到 app.js

```
requires: ['myApp.overrides.field.Input'] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-30T07:32:45.380

您可以订阅键盘的显示/隐藏事件并补偿输入的偏移量。它已经在 Android 4.2 和 4.4（HTC One 和 Nexus 7）上进行了测试。

```
if (Ext.os.is.Android4 && Ext.os.version.getMinor() >= 2) {
    (function() {
        var inputEl = null;
        var onKeyboardShow = function() {
            setTimeout(function() {
                if (!inputEl) {
                    return;
                }
                var currentClientHeight = window.document.body.clientHeight;
                var elRect = inputEl.getBoundingClientRect();
                var elOffset = elRect.top + elRect.height;
                if (elOffset <= currentClientHeight) {
                    return;
                }
                var offset = currentClientHeight - elOffset;
                setOffset(offset);
            }, 100);
        };
        var onKeyboardHide = function() {
            setOffset(0);
        };
        var setOffset = function(offset) {
            var el = Ext.Viewport.innerElement.dom.childNodes[0];
            if (el) {
                el.style.setProperty('top', offset + 'px');
            }
        };
        document.addEventListener('deviceready', function() {
            document.addEventListener("hidekeyboard", onKeyboardHide, false);
            document.addEventListener("showkeyboard", onKeyboardShow, false);
        }, false);
        Ext.define('Ext.field.Input.override', {
            override: 'Ext.field.Input',
            onFocus: function(e){
                inputEl = e.target;
                this.callParent(arguments);
            },
            onBlur: function(e){
                inputEl = null;
                this.callParent(arguments);
            }
        })
    })();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-08T16:36:23.570

它对我来说效果更好

```
{
   xtype: 'passwordfield',
   name: 'pass',
   listeners: {
      focus: function (comp, e, eopts) {
        var contr = this;
        setTimeout(function () {
          if (Ext.os.is('Android')) {
            var ost = comp.element.dom.offsetTop;
            contr.getParent().getParent().getScrollable().getScroller().scrollTo(0, ost, true);
          }
        }, 400);
      }
   }
} 
```

# android - 如何让 Toast 显示 LogCat 文本？

> ID：15596115
> 
> 赞同：-2
> 
> 时间：2013-03-24T07:22:06.983
> 
> 标签：android, logcat, toast, server-response

我有一个 HttpPost 将数据发送到服务器以存储在数据库中。成功存储该数据后，我在 LogCat 中收到一条响应，显示“消息已成功保存”（此响应在我的 PHP 代码中定义）。我对此很满意，但我试图在 Toast 中显示相同的响应。这是我的代码：

```
String myBreadfromr, myBreadtor;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    Bundle myBasket = getIntent().getExtras();
    myBreadfromr = myBasket.getString("keyfromcellr");
    myBreadtor = myBasket.getString("keytocellr");
    new SendData().execute("");
}

public class SendData extends AsyncTask<String, Integer, Void> {

    protected void onPreExecute(String f) {
        // called before doInBackground has started
        f = "f";
    }

    protected Void doInBackground(String... params) {
        // TODO Auto-generated method stub
        // Create a new HTTP client
        HttpClient client = new DefaultHttpClient();
        // Create a new HTTP Post
        HttpPost post = new HttpPost("http://192.xxx.xxx.xxx/androidp2p/process.php");
        try {
            // Add the data
            List<NameValuePair> pairs = new ArrayList<NameValuePair>(3);
            pairs.add(new BasicNameValuePair("from", myBreadfromr));
            pairs.add(new BasicNameValuePair("to", myBreadtor));
            pairs.add(new BasicNameValuePair("message", "What is your location?"));
            // Encode Post data into valid URL format
            post.setEntity(new UrlEncodedFormEntity(pairs));
            // Go back to the first page
            Intent back2start = new Intent(RequestLocation.this, StartApp.class);
            startActivity(back2start);
            // Make the HTTP Post Request
            HttpResponse response = client.execute(post);
            // Convert the response into a String
            final HttpEntity resEntity = response.getEntity();
            // Write the response to a log file
            if (resEntity != null) {
                Log.i("RESPONSE", EntityUtils.toString(resEntity));
            }
            runOnUiThread(new Runnable(){
                   public void run() {
                        Toast.makeText(RequestLocation.this, resEntity.toString(), Toast.LENGTH_LONG).show();
                   }
            });
        } catch (UnsupportedEncodingException uee) {
            uee.printStackTrace();
        } catch (ClientProtocolException cpe) {
            cpe.printStackTrace();
        } catch (IOException ioe) {
            ioe.printStackTrace();
        }
        return null;
    }

    protected void onProgressUpdate(Integer... progress) {
        // called when the background task has made any progress
    }

    protected void onPostExecute() {
        // called after doInBackground has finished
    }
}

/**
 * @param args
 */
public static void main(String[] args) {
    // TODO Auto-generated method stub
} 
```

我在 Toast 中看到的是：“org.apache.http.conn.BasicManagedEntity@41284b48”。

提前感谢您为解决此问题提供的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T07:28:27.937

在 Toast 中使用`EntityUtils.toString(resEntity)`以获得相同的文本。

也不需要调用`runOnUiThread`，`doInBackground`必须返回一些东西，而不是，并且那些已经在 UI 线程上运行的`null`东西将是可用的。`onPostExecute`

[异步任务](http://developer.android.com/reference/android/os/AsyncTask.html)

# twitter-bootstrap - 引导工具提示和弹出框冲突

> ID：15596117
> 
> 赞同：1
> 
> 时间：2013-03-24T07:22:39.297
> 
> 标签：twitter-bootstrap, twitter-bootstrap-rails

我有一个表单，其中通过 Javscript 附加了引导工具提示。这些元素具有 HTML 标题属性（[就像在 bootstrap 示例中一样](http://twitter.github.io/bootstrap/javascript.html#tooltips)），并且表单中的元素也有使用 HTML 添加的弹出框。

出于某种原因，工具提示出现在我没有初始化它的元素上——这意味着我的弹出框和工具提示之间存在冲突。

我曾尝试使用不同的标签，例如`<span>` `<div>`和`<button>`试图防止冲突，但我的弹出框和工具提示继续同时显示。

任何想法为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-12-04T14:07:58.020

我遇到了类似的事情，虽然我还没有弄清楚问题的根源（我确定我做了一些愚蠢的事情），但我能够找到解决问题的解决方法。

您需要使用 Bootstrap 的默认选择器和标题属性以外的东西来初始化您的工具提示或弹出框。

所以代替这个...

```
$('body').tooltip({
            container: 'body',
            selector: '[data-toggle="tooltip"]'
        });

<span data-toggle="tooltip" title="My Title" data-placement="top"></span> 
```

做这个...

```
$('body').tooltip({
            container: 'body',
            selector: '.bs-tooltip',
            title : function () {
               return $(this).attr('tooltip-title');
            }
        });

<span class="bs-tooltip" tooltip-title="My Title" data-placement="top"></span> 
```

只需确保更改选择器和标题即可。仅更改标题不会更正冲突，仅更改选择器将导致 Bootstrap 将标题和数据原始标题属性添加到您的元素，并且提示或弹出框将查找它们以获取它们的信息，因为它们是空什么都不会显示。

# python - 在 Python 中解析 C 结构

> ID：15596118
> 
> 赞同：2
> 
> 时间：2013-03-24T07:22:56.123
> 
> 标签：python, ctypes

我确定这是非常错误的，而且我遇到了一些问题。我已经将一系列`WIN32_FIND_DATAW`结构一个接一个地写入磁盘，我想在我的 Python 脚本中使用和解析它们。

我目前使用的代码是：

```
>>> fp = open('findData', 'r').read()
>>> data = ctypes.cast(fp, ctypes.POINTER(wintypes.WIN32_FIND_DATAW))
>>> print str(data[0].cFileName) 
```

第一个问题是第三行没有像我期望的那样打印一个漂亮的字符串。而不是打印`$Recycle.Bin`它打印`UnicodeEncodeError: 'ascii' codec can't encode characters in position 0-5: ordinal not in range(128)`

这是仅打印存储在那里的数据的结果：

```
>>> data[0].cFileName
u'\U00520024\U00630065\U00630079\U0065006c\U0042002e\U006e0069' 
```

这看起来比较合理。 `$`是 ASCII 0x24，`R`是 ASCII 0x52 等等。

**那么为什么我不能像字符串一样打印呢？**

我的第二个问题是这样做：

```
>>> data[1].cFileName 
```

给我荒谬的数据。我很确定我没有`ctypes.cast`正确使用它。我应该怎么做才能访问这些？为了澄清，在 C 中，我只需将`PWIN32_FIND_DATAW`指针指向缓冲区的开头并使用类似的代码访问数组中的各个结构，我正在尝试在 Python 中做同样的事情。

**更新**

正在做：

```
>>> data[0].cFileName.encode('windows-1252') 
```

产生此错误：

```
UnicodeEncodeError: 'charmap' codec can't encode characters in position 0-5: character maps to <undefined> 
```

***更新***

第一个条目的开头（`data[0]`直到 cFileName 的第一部分）如下所示：

```
user@ubuntu:~/data$ hexdump -C findData | head -n 6
00000000  16 00 00 00 dc 5a 9f d2  31 04 ca 01 ba 81 89 1a  |.....Z..1.......|
00000010  81 e2 cd 01 ba 81 89 1a  81 e2 cd 01 00 00 00 00  |................|
00000020  00 00 00 00 00 00 00 00  00 00 00 00 24 00 52 00  |............$.R.|
00000030  65 00 63 00 79 00 63 00  6c 00 65 00 2e 00 42 00  |e.c.y.c.l.e...B.|
00000040  69 00 6e 00 00 00 00 00  00 00 00 00 00 00 00 00  |i.n.............|
00000050  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................| 
```

如果需要，我可以发布更多数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T09:44:40.837

正如评论中已经提到的，这是由于 windows 和 linux 之间的差异。该`ctypes`模块试图适应本地环境，因此不匹配。最好的解决方案是使用`struct`模块以独立于平台的方式处理它。以下代码显示了如何为单个记录完成此操作。

```
# Setup test data based on incomplete sample
bytes = "\x16\x00\x00\x00\xdc\x5a\x9f\xd2\x31\x04\xca\x01\xba\x81\x89\x1a\x81\xe2\xcd\x01\xba\x81\x89\x1a\x81\xe2\xcd\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x24\x00\x52\x00\x65\x00\x63\x00\x79\x00\x63\x00\x6c\x00\x65\x00\x2e\x00\x42\x00\x69\x00\x6e\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
bytes = bytes + "\x00"*(592-len(bytes))

import struct
import codecs

# typedef struct _WIN32_FIND_DATA {
#   DWORD    dwFileAttributes;
#   FILETIME ftCreationTime;
#   FILETIME ftLastAccessTime;
#   FILETIME ftLastWriteTime;
#   DWORD    nFileSizeHigh;
#   DWORD    nFileSizeLow;
#   DWORD    dwReserved0;
#   DWORD    dwReserved1;
#   TCHAR    cFileName[MAX_PATH];
#   TCHAR    cAlternateFileName[14];

fmt = "<L3Q4L520s28s"

attrs, creation, access, write, sizeHigh, sizeLow, reserved0, reserved1, name, alternateName = struct.unpack(fmt, bytes)
name = codecs.utf_16_le_decode(name)[0].strip('\x00')
alternateName = codecs.utf_16_le_decode(alternateName)[0].strip('\x00')
print name 
```

注意：这假设 MAX_PATH 的大小是 260（这应该是真的，但你永远不知道）。

要从文件中读取所有值，您需要一次读取 592 字节的块，然后按上述方式对其进行解码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T09:02:48.617

您应该使用`struct`标准库[http://docs.python.org/2/library/struct.html](http://docs.python.org/2/library/struct.html)中的模块，因为您正在解析二进制文件格式。该`ctypes`模块用于将共享库 (DLL) 与二进制 API 集成到 Python 应用程序中。我并不是说你试图做的事情是不可能的，但是使用`ctypes`比简单地从二进制文件中解析 C 结构更复杂。

请记住，在 C 中没有 PWIN32_FIND_DATAW 指针之类的东西。这只是一个 typedef，它将解析为原始 C 数据类型之一，例如 32 位指针、64 位指针等。文件中的数据表示原始基本 C 数据类型。

在回答评论...避免寻找捷径。您确实需要深入了解正在写入文件的位以及它们的组织方式。为此，您可能需要做一些 hexdumps 并检查实际的数据表示。根据 MS [http://msdn.microsoft.com/en-ca/library/windows/desktop/aa365740(v=vs.85).aspx](http://msdn.microsoft.com/en-ca/library/windows/desktop/aa365740(v=vs.85).aspx)这不是一个真正复杂的结构。如果 wintypes 中的结构对您不起作用，则可能是您发现了一个错误。磁盘上的结构也可能与内存中的结构不同。通常，in-ram 数据结构包括填充以保持 16 或 64 字节边界上的对齐。但是众所周知，程序员不会按原样转储结构，而是将其分离并输出到一个文件中减去填充。由于 ctypes/wintypes 旨在对 DLL 进行二进制 api 调用，因此其偏向是在数据布局中包含填充。但该文件可能不包含此内容。

# php - 页面加载时自动发送电子邮件

> ID：15596120
> 
> 赞同：-2
> 
> 时间：2013-03-24T07:23:26.463
> 
> 标签：php, email, http-status-code-404

是否有可能使用 PHP/HTML/JS 当用户加载 404 网页时，它会自动触发一封电子邮件发送给网络管理员，通知他们该页面已加载以及用户如何到达那里（之前的页面是什么？他们在该页面上单击了什么以到达 404 页面。

我不是说它打开了用户的电子邮件客户端，它应该是干净和不引人注目的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T07:29:44.407

为此，您需要创建一个 .php 脚本，该脚本将发送电子邮件并服务器页面。这是在 Apache 中设置自定义 404 页面的[快速演练。](http://webdesign.about.com/od/apache/ht/ht404apache.htm)

为了发送电子邮件，您需要使用 PHP 的`mail()`功能。你可以在[这里](http://php.net/manual/en/function.mail.php)阅读。

说完这句话，做之前要认真考虑。我重复……强烈。网络爬虫和漏洞扫描程序不断地访问 404 页...如果碰巧访问了您的网站，您真的希望您的管理员收到数千封电子邮件吗？您必须想办法避免所有这些情况，并且仅在发生“合法”404 时才发送电子邮件。同样，发送这些电子邮件会占用您的服务器资源，这可能会使 DOS 攻击更容易摧毁您的网站（通过发送如此多的电子邮件使其过载）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T07:25:09.020

是的。有可能的。看看 php 的[`mail()`](http://php.net/manual/en/function.mail.php).

# python - 将字符串转换为字典 python

> ID：15596121
> 
> 赞同：7
> 
> 时间：2013-03-24T07:23:36.293
> 
> 标签：python, string, dictionary, python-2.7

我想要一本字典

```
 >>> page_detail_string = urllib2.urlopen("http://graph.facebook.com/Ideas4India").read() 
```

它返回一个字符串，如

```
>>> page_detail_string
'{"about":"Ideas for development of India","category":"Community","description":"Platform where you can discuss and share your ideas which you think might help in betterment of our country.\\nPlease respect other community members and do not talk politics here.","is_published":true,"talking_about_count":0,"username":"Ideas4India","were_here_count":0,"id":"250014455083430","name":"Ideas 4 India","link":"http:\\/\\/www.facebook.com\\/Ideas4India","likes":23}' 
```

现在我想将它转换为字典，我可以使用 ast.literal_eval 轻松完成

```
>>> import ast
>>> dict_page = ast.literal_eval(page_detail_string)
Traceback (most recent call last):
File "<stdin>", line 1, in <module>
File "/usr/lib/python2.7/ast.py", line 80, in literal_eval
return _convert(node_or_string)
File "/usr/lib/python2.7/ast.py", line 63, in _convert
in zip(node.keys, node.values))
File "/usr/lib/python2.7/ast.py", line 62, in <genexpr>
return dict((_convert(k), _convert(v)) for k, v
File "/usr/lib/python2.7/ast.py", line 79, in _convert
raise ValueError('malformed string') 
```

但我认为它抛出这个错误是因为

```
"is_published":true 
```

有什么方法可以通过剥离键和值（“is_published”：true）将其转换为字典。

谢谢

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-24T07:28:39.467

你得到的是一个 json 字符串，你应该使用 json.loads 转换为 dict

```
import json
json.loads(page_detail_string) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-24T07:25:28.900

使用`json`模块

```
import json
json.loads(page_detail_string) 
```

要了解有关该`json`模块的更多信息，请查看[http://docs.python.org/2/library/json.html](http://docs.python.org/2/library/json.html)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-03-24T07:26:35.740

使用[json 模块](http://docs.python.org/2/library/json.html)：

```
In [1]: s = '{"about":"Ideas for development of India","category":"Community","description":"Platform where you can discuss and share your ideas which you think might help in betterment of our country.\\nPlease respect other community members and do not talk politics here.","is_published":true,"talking_about_count":0,"username":"Ideas4India","were_here_count":0,"id":"250014455083430","name":"Ideas 4 India","link":"http:\\/\\/www.facebook.com\\/Ideas4India","likes":23}'

In [2]: import json

In [3]: json.loads(s)
Out[3]: 
{u'about': u'Ideas for development of India',
 u'category': u'Community',
 u'description': u'Platform where you can discuss and share your ideas which you think might help in betterment of our country.\nPlease respect other community members and do not talk politics here.',
 u'id': u'250014455083430',
 u'is_published': True,
 u'likes': 23,
 u'link': u'http://www.facebook.com/Ideas4India',
 u'name': u'Ideas 4 India',
 u'talking_about_count': 0,
 u'username': u'Ideas4India',
 u'were_here_count': 0} 
```

另外，请注意，您可以直接在文件对象上使用`json.load`（而不是）：`json.loads`

```
In [4]: import urllib2

In [5]: json.load(urllib2.urlopen("http://graph.facebook.com/Ideas4India"))
Out[5]: 
{u'about': u'Ideas for development of India',
 u'category': u'Community',
 u'description': u'Platform where you can discuss and share your ideas which you think might help in betterment of our country.\nPlease respect other community members and do not talk politics here.',
 u'id': u'250014455083430',
 u'is_published': True,
 u'likes': 23,
 u'link': u'http://www.facebook.com/Ideas4India',
 u'name': u'Ideas 4 India',
 u'talking_about_count': 0,
 u'username': u'Ideas4India',
 u'were_here_count': 0} 
```

# java - 为什么 ProcessBuilder 在提供绝对文件名时无法启动我的可执行文件？

> ID：15596123
> 
> 赞同：0
> 
> 时间：2013-03-24T07:23:53.107
> 
> 标签：java, android, processbuilder

我有一个 Android 应用程序正在尝试（但失败）使用`ProcessBuilder`. 这是我所拥有的：

```
String[] args = {"/data/data/com.me.myapp/files/myexec", "param1", "param2"};
Process process = new ProcessBuilder(args)
    .directory(new File("/data/data/com.me.myapp/files/somedir"))
    .start();
process.waitFor(); 
```

^(（**注意：**出于本示例的目的，我已经对路径进行了硬编码。真正的应用程序应该使用`Context.getFilesDir()`.）)

这里有几点需要注意：

*   该可执行文件是使用 NDK 为 ARMv6 交叉编译的。
*   二进制文件确实设置了可执行位。
*   我可以从`adb`shell 运行可执行文件。

但是，在运行上面的代码时，我得到一个异常：

```
运行 exec() 时出错。命令：[/data/data/com.me.myapp/files/myexec, param1,
  param2] 工作目录：/data/data/com.me.myapp/files/somedir ...
```

为什么我的应用程序不能`exec`执行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T07:27:48.823

哇 - 在我发现我做错了什么之前问这个问题只花了大约 2 分钟。

问题只是工作目录在运行之前不存在`exec`。

# jquery - 像脸书一样的照片库

> ID：15596133
> 
> 赞同：-6
> 
> 时间：2013-03-24T07:25:56.337
> 
> 标签：jquery, photo-gallery

我必须创建一个像 facebook 这样的图片库。我正在寻找一个灯箱。当我点击下一张图片时，背景需要保持静止，只有图片需要滑动或改变。

如果您在 fb 照片库中注意到，它会重新加载页面但只有照片库会改变，背景帖子将保持不变。如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T07:27:54.783

我想你正在寻找[这个](http://lokeshdhakar.com/projects/lightbox2/)。

# ant - Html5 样板构建脚本

> ID：15596134
> 
> 赞同：0
> 
> 时间：2013-03-24T07:26:26.940
> 
> 标签：ant, html5boilerplate

我使用[Initializr](http://www.initializr.com/)建立了一个新的 HTML5 项目。
我正在尝试使用[Ant Build Script](https://github.com/h5bp/ant-build-script)来优化生产文件：最小化和所有这些东西。

我基本上遵循了[自述文件中的每一条说明：](https://github.com/h5bp/ant-build-script#readme)

*   安装 JAVA JDK 和 WinAnt
*   前往项目~~根~~/构建并执行`ant build`

我有这个错误：

```
Buildfile: build.xml does not exist!
Build failed 
```

这是我应该自己写的文件吗？如果是这样，那么我认为自述文件根本没有提到它很奇怪。

**编辑**：对不起，我在路径中犯了一个错误，我已经在自述文件中指定的 /build 子文件夹中。

**Edit2**：我现在也意识到我跳过了“将构建脚本添加到您的项目”部分。当我执行“git checkout -b ant-build-script”时出现错误：

```
fatal: Not a git repository (or any of the parent directories): .git 
```

所以我想我需要先在我的项目中设置一个 git repo。**有没有办法在不使用 git 的情况下检索正确的文件？**

**Edit3**：我设置了一个 git repo 并按照说明进行操作，但现在在构建过程中出现错误。问题似乎是 concat.js。这些错误似乎表明缺少文件，例如：

```
[concat] C:\wamp\www\MoviesLouis\intermediate\index.html does not exist. 
```

该`intermediate`文件夹是由 Ant 构建脚本创建的，我无法控制它。构建仍然以“BUILD SUCCESSFUL”结束。

结果在 /publish 文件夹中，我可以看到我所有的 javascript 文件都丢失了（除了 /js/vendor 文件夹中的文件）。

我应该提出一个新问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T12:09:08.863

您可以在[project.properties](https://github.com/h5bp/ant-build-script/blob/master/config/project.properties#L24)中更改 file.root.page 属性以指向您想要的任何文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T07:41:35.470

正如您在此处的 build.xml 文件中看到的那样：[https](https://github.com/h5bp/ant-build-script/blob/master/build.xml) ://github.com/h5bp/ant-build-script/blob/master/build.xml第 3 行`basedir`是`../`，然后它解释了原因：“自从我们正在构建中”这意味着您必须从构建子文件夹执行，而不是从项目的根目录执行。此外，在 runscript.bat [https://github.com/h5bp/ant-build-script/blob/master/runbuildscript.bat](https://github.com/h5bp/ant-build-script/blob/master/runbuildscript.bat)中，它说：“如果您使用的是 mac 或 linux，只需`ant build`从终端中的此文件夹运行”，其中“此文件夹”再次是构建子文件夹。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T09:32:57.823

构建脚本不起作用，因为我将 index.html 重命名为 index.php。现在，每次我想构建时，我都会将其重命名为 html，但我仍在寻找一个自动化的解决方案。

# java - 试图理解已经制作的 JApplet 代码

> ID：15596138
> 
> 赞同：0
> 
> 时间：2013-03-24T07:27:47.680
> 
> 标签：java, swing, graphics, actionlistener, japplet

**问题：**正如您所看到的，当我们执行此代码并单击圆形按钮时，它会正确计数，但是当单击方形按钮时，它会再次正确计数，但是再次单击圆形按钮，则先前的圆形计数会消失并且它再次从 1 开始。

**问题出在哪里：**经过一番搜索后，我知道在 ContentPane 对象上调用的方法**getGraphics()**导致了问题，我尝试更改它，但程序甚至没有运行，如果它运行则所有 GUI 组件会有问题。

编辑：做了 mKorbel 所说的

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class CountShapes1 extends JApplet implements ActionListener
{
    Container cont;
    JPanel p;

    JLabel lblCount;
    JButton btCircle,btSquare;

    boolean blnCircle,blnSquare;
    int count=0;
    String shape="";

    public void init() 
    {
        cont=getContentPane();

        lblCount=new JLabel("Shape Count : 0",JLabel.CENTER);
        lblCount.setFont(new Font("Arial",Font.BOLD,18));
        cont.add(lblCount,BorderLayout.NORTH);

        btCircle=new JButton("Circle");
        btSquare=new JButton("Square");

        btCircle.addActionListener(this);
        btSquare.addActionListener(this);

        p=new JPanel();
        p.add(btCircle);
        p.add(btSquare);

        cont.add(p,BorderLayout.SOUTH);
    }

     public void actionPerformed(ActionEvent ae)
     {
        if(ae.getSource()==btCircle)
        {
            if(blnSquare==true)
            {
                blnSquare=false;
                count=0;
            }

            blnCircle=true;
            shape="CIRCLE";
            count++;

        lblCount.setText(shape+" Count : "+count);
        repaint();
    }

    if(ae.getSource()==btSquare)
    {
        if(blnCircle==true)
        {
                blnCircle=false;
                count=0;
        }
        blnSquare=true;
        shape="SQUARE";
        count++;

        lblCount.setText(shape+" Count : "+count);
        repaint();
    }
}

    public void paint(Graphics g)
   {
       cont.paint(cont.getGraphics());

       int x=10,y=30,w=30,h=30;
       if(shape.equals("CIRCLE") || shape.equals("SQUARE"))
       {
         for(int i=0;i<count;i++)
         {
            if(shape.equals("CIRCLE"))
            {
                g.drawOval(x,y,w,h);
            }
            else
            {
                g.drawRect(x,y,w,h);
            }
             x+=40;
                if(x>=getWidth()-30)
                {
                    x=10;
                    y+=40;
                }
         }  //for -loop finished

      }  // if-finished
   } // paint() finished
 } // class finished

/*
   <applet code="CountShapes1" width=500 height=500>
   </applet>
*/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T07:54:32.930

我认为以前的开发人员调用`paint`. `cont`无论如何，这将作为部分过程自动完成，我将其替换为`super.paint`

我怀疑原作者无法弄清楚如何一次绘制一个以上的形状。

该`paint`方法一次只能绘制一个形状。除非您将形状添加到某种列表中，然后循环遍历该列表，否则每次调用该`paint`方法时，每次`paint`调用时，它将删除先前的内容并仅绘制命名的形状。

你真的应该创建一个自定义组件，扩展类似的形式`JPanel`并覆盖它的`paintComponent`方法。在此，您应该绘制形状。

您在当前实现中遇到的问题是，可能会在控件上绘制形状，这很可能是不可取的

# ruby-on-rails - 500 内部服务器错误 - Rails 生产中的 ActionView::Template::Error

> ID：15596141
> 
> 赞同：1
> 
> 时间：2013-03-24T07:28:05.040
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我在生产 Rails 站点上收到 500 内部服务器错误，这就是我在 logs/production.log 上看到的。令人惊讶的是，代码在开发中的本地服务器上工作

```
Completed 500 Internal Server Error in 11745ms

ActionView::Template::Error (undefined method `[]' for nil:NilClass
  (in /home/jason/public_html/site/app/assets/stylesheets/application.css)):
    8:     
    9:     <%= csrf_meta_tags %>
    10: 
    11:     <%= stylesheet_link_tag "application", :media => "all" %>
    12:  
    13:   </head>
    14:   <body>
  app/views/layouts/application.html.erb:11:in `_app_views_layouts_application_html_erb__243082314235891573_4889460'
  app/controllers/main_controller.rb:18:in `index' 
```

我在这里有点迷路，有什么帮助吗？

这是Application.css

```
 /* You're free to add application-wide styles to this file and they'll appear at the top of the
 * compiled file, but it's generally better to create a new file per style scope.
 *
 *= require_tree .
 *= require_self
 */

/* Main Body */

body {
    background: #f3f3f3;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T07:48:35.597

推送到生产环境时需要预编译资产

```
bundle exec rake assets:precompile 
```

另外，阅读一些[资产管道](http://guides.rubyonrails.org/asset_pipeline.html#in-production)文档，值得您花时间

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-18T14:38:42.713

对于像我这样的人，他们在发生类似错误后最终来到这里，但没有堆栈跟踪：gem`better_errors`为我提供了解决问题的信息。

# wordpress - 使用 htaccess 重写 Wordpress 页面 url

> ID：15596142
> 
> 赞同：0
> 
> 时间：2013-03-24T07:28:11.463
> 
> 标签：wordpress, .htaccess

在我现有的 wordpress 站点中，我有一个页面设置，其中包含特定页面的自定义模板文件。根据 slug /at/ 重写此页面的 Wordpress 永久链接

然后我们使用一些额外的变量来获取这个页面上的不同数据

[http://websitename.com/at/?h=s3fgh](http://websitename.com/at/?h=s3fgh)

现在想用 htaccess 将这个 url 重写为这样的东西

[http://websitename.com/at/s3fgh](http://websitename.com/at/s3fgh)

但似乎无法使其工作。目前我试图修改 htaccess 文件但没有首选结果

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteRule ^at/([a-zA-Z0-9_-]+)/?$  /index.php?page_id=113&h=$1 [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule> 
```

其中 113 等于特定的页面 id

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T08:26:06.127

您可以尝试用这个替换问题中的完整规则集：

```
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]

# Add this line
RewriteCond %{REQUEST_URI}   !/at/  [NC]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]

# /at/ folder rule
RewriteCond %{REQUEST_URI}   !index\.php                [NC]
RewriteRule ^at/([^/]+)/?   /index.php?page_id=113&h=$1 [NC,L] 
```

最后一条规则静默映射此请求的 URL：

`http://websitename.com/at/anything`

对此，根据问题中的规则：

`http://websitename.com/index.php?page_id=113&h=anything`

### 选项

此选项是必需的，因为问题说明了一件事，而同一问题 ( **?** ) 中包含的规则显示了另一件事。这次让我们坚持问题中的示例。

将上述规则集中的最后 3 行替换为以下行：

```
# /at/ folder rule
RewriteCond %{QUERY_STRING} !h=        [NC]
RewriteRule ^at/([^/]+)/?   /at/?h=$1  [NC,L] 
```

静默映射此请求的 URL：

`http://websitename.com/at/anything`

对此，根据问题中的 URL 示例：

`http://websitename.com/at/?h=anything`

# c++ - 验证二叉树的小问题

> ID：15596149
> 
> 赞同：1
> 
> 时间：2013-03-24T07:28:38.937
> 
> 标签：c++, recursion, binary-tree, compiler-warnings, binary-search-tree

我写了这个递归函数，它按预期工作。它验证二叉树，即检查给定的二叉树是否是二叉搜索树，并给出正确的答案。

但是，我收到编译器警告说：

```
Control may reach end of non-void function 
```

我确实知道这个错误意味着什么：函数应该返回 a`bool`而不仅仅是在函数结束时脱落。我只是不知道如何克服它，因为它确实返回 a `bool`。

我试图搜索递归时可能忽略的东西，但无济于事。

```
bool isBSTRecursively(Node * root){
    if (!root) {
        return true;
    }else if (!root->getLeft() && !root->getRight()){
        return true;
    }else if(!root->getLeft()){
        if (root->getRight()->getData() > root->getData()) {
            return isBSTRecursively(root->getRight());
        }
    }else if (!root->getRight()){
        if (root->getLeft()->getData() < root->getData()) {
            return isBSTRecursively(root->getLeft());
        }
    }else{
        return (isBSTRecursively(root->getLeft()) && isBSTRecursively(root->getRight()));
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T07:31:04.060

在这些部分：

```
}else if(!root->getLeft()){
    if (root->getRight()->getData() > root->getData()) {
        return isBSTRecursively(root->getRight());
    }
}else if (!root->getRight()){
    if (root->getLeft()->getData() < root->getData()) {
        return isBSTRecursively(root->getLeft());
    } 
```

请注意，您只在两种特定情况下返回？这就是警告告诉您的内容，代码可以采用的路径不明确包含`return`带值的 a。如果您遇到代码没有明确执行此操作的情况，这可能会导致奇怪的问题`return`。

消除警告的最简单方法是`return false`在函数末尾添加 a。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T07:40:40.813

您编写了一个函数，该函数在所有 true 选项上都返回 true，但没有返回 false。

看起来最后 return false 将是正确的结果以及修复警告。

# c# - 捆绑。处理元素之间的区别

> ID：15596152
> 
> 赞同：0
> 
> 时间：2013-03-24T07:29:02.830
> 
> 标签：c#, windows-phone-8, windows-phone

好吧，这里的一些聪明人告诉我在操作 UI 项时应该使用绑定。好吧，我对这个有约束力的话题有了一点了解，但是有一件奇怪的事情一直在折磨我。让我们举个例子，这样我就可以更好地描述我的问题。

xml代码：

```
<TextBox x:Name="MyTextBox" 
                 Text="Text" 
                 Foreground="{Binding Brush1, Mode=OneWay}"/> 
```

c#代码：

```
public class MyColors : INotifyPropertyChanged
{
    private SolidColorBrush _Brush1;

    // Declare the PropertyChanged event.
    public event PropertyChangedEventHandler PropertyChanged;

    // Create the property that will be the source of the binding.
    public SolidColorBrush Brush1
    {
        get { return _Brush1; }
        set
        {
            _Brush1 = value;
            // Call NotifyPropertyChanged when the source property 
            // is updated.
            NotifyPropertyChanged("Brush1");
        }
    }

    // NotifyPropertyChanged will raise the PropertyChanged event, 
    // passing the source property that is being updated.
    public void NotifyPropertyChanged(string propertyName)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this,
                new PropertyChangedEventArgs(propertyName));
        }
    } 
```

现在要更改前景的颜色，我可以简单地用代码编写：

```
MyColors textcolor = new MyColors();

        // Brush1 is set to be a SolidColorBrush with the value Red.
        textcolor.Brush1 = new SolidColorBrush(Colors.Red);

        // Set the DataContext of the TextBox MyTextBox.
       // MyTextBox.DataContext = textcolor;
        MyTextBox.Foreground = new SolidColorBrush(Colors.Blue); 
```

呸，我们终于明白了。现在让我们转到我使用的第二个解决方案。

xml:

```
<TextBox x:Name="MyTextBox"/> 
```

c#: MyTextBox.Foreground = new SolidColorBrush(Colors.Red);

哇，同样的效果：o 所以现在我的问题是。

除了这件事之外，还有什么命令给了我？Cus 在这一点上我没有看到结果有太大的不同，期望第一个示例占用更多空间并且实现了偶数，而第二个示例占用了 2 行。谁能给我一个很好的例子，他们可以派上用场，因为 msdn 的例子没有给我一个明确的答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T07:54:45.937

第一种方法（使用 MVVM 设计模式）将您的视图模型与视图分离，从而允许可测试性和在更短的时间内迁移到其他平台的可能性。

第二种方法很简单，但它是紧耦合的。阅读 MVVM 设计模式以全面了解其优势。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T08:22:48.637

首先要做的事情...在您的问题中，您注释掉了设置 MyTextBox.DataContext 的行，因此您当时甚至没有使用绑定。然后在下一行中，您将值直接设置为 Blue，这意味着您刚刚键入的所有其他内容甚至都没有被使用。我不知道你为什么这样做，但这有点不重要。可能只是一个错字，但我不会编辑它，因为我不确定你的意图。

如前所述，进入问题的“实质”，您做事的第一种方式遵循 MVVM 或 Model-View-ViewModel 模式。模型是数据，在这种情况下是画笔。View 是 TextBox，而 ViewModel 就是您所说的 MyColors。ViewModel 实现了 IPropertyChanged，因此它可以为侦听器（例如绑定）发出更改通知以进行侦听。

使用 MVVM 而不是在第二种情况下（您只需在代码隐藏中直接设置值）进行设计的原因与代码的关注点分离有关。具体来说，应用程序的逻辑及其业务规则与 UI 的逻辑是分开的。

例如，您的业务逻辑可能会说“错误文本需要为红色”，因此您可以在 ViewModel 上公开一个名为 ErrorTextBrush 的属性。您不需要考虑 TextBox 的名称是什么，甚至根本不需要考虑它是否出现在屏幕上。您已将业务关注点与 UI 关注点分开。

同样，开发 UI 的人不需要考虑与业务逻辑相关的任何事情。他们只需要知道他们在屏幕上定义一个 TextBox 作为错误文本的占位符，因此他们只需将 ErrorTextBox.Foreground 绑定到 ErrorTextBrush，现在 UI 遵循业务逻辑的要求。

实际上，人们可以（而且您应该）更进一步，并在 XAML 中定义 ErrorTextBrush，因为它与视图相关，而不是与业务逻辑相关。然后在 ViewModel 中，您将拥有 HasError 之类的属性，并且您将在 XAML 中设置触发器或绑定，说明如果出现错误则使用该错误画笔，否则使用标准画笔。

在这种情况下，业务逻辑甚至不必知道文本是红色的。这完全由 UI 决定。相反，UI 根本不需要知道是什么导致了错误。它只需要知道存在错误，*因此*它需要向用户显示反映该错误的视觉效果。

同样如上所述，ViewModel 只是一个常规类，而不是一个 UI，这使得进行单元测试变得更加容易。例如，使用上面的示例进行测试，您所要做的就是实例化 ViewModel，设置任何触发错误的条件，然后测试 HasError 属性是否被触发。您可以在没有任何 UI 的情况下完成所有这些操作。

这使开发人员可以处理应用程序的逻辑，而设计人员可以在很少交互的情况下处理 UI。他们几乎只需要交换 UI 需要了解的内容即可。

# mysql - 在限制mysql中的行数之后排序

> ID：15596153
> 
> 赞同：0
> 
> 时间：2013-03-24T07:29:08.827
> 
> 标签：mysql, sql

我有下表

```
PACKAGE     DISTANCE
--------    --------
 Q1           5.0

 Q2           4.5

 Q3           0.5 
```

我想以 Q2 后跟 Q1 的方式提取 MySQL 中的行。

当我使用这个查询

```
select package,distance from new_travel order by distance desc limit 0,2 
```

我得到的是 Q1，然后是 Q2。

当我使用

```
 (select package,distance from new_travel order by distance desc limit 0,2) order by distance asc 
```

它给出的错误。如何按需要的顺序提取这些行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T07:31:26.617

SQL 中的限制意味着（例如在 0,2 中）从 0 开始并带两个。你需要带三个，所以你的极限是 0,3。

或者，如果你只想把结果 Q2 和 Q3 做 1,2

要获得 Q2，然后是 Q1，您需要做的就是：

```
select package,distance from new_travel order by distance asc limit 1,2 
```

# entity-framework - POCO 和自我跟踪实体之间的差异

> ID：15596155
> 
> 赞同：0
> 
> 时间：2013-03-24T07:29:12.327
> 
> 标签：entity-framework

我知道 POCO，最近听说过自我跟踪实体。谁能解释一下 POCO 和 STE 的区别

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T09:18:05.860

自跟踪实体是在实际实体类的 getter/setter 中具有持久性逻辑的实体。简而言之，他们是懂得如何自救的实体。

这与仅作为存储实体的 POCO 实体（普通旧 CLR 对象）不同（即它们没有内部逻辑）。

EF 与如何处理这些的主要区别在于 EF 如何检测更改。STE 将更改告诉 EF，EF 通常使用跟踪图来检测附加实体的更改。

**注意：** STE 在最新版本的 EF 中已弃用

POCO 和带有 EF 的 STE 之间也有一点中间地带，称为 POCO 代理实体。对于此实体框架将重载您的 POCO 类的属性并创建一个代理，该代理将在发生更改时通知 EF。为此，您需要将类上的所有属性设为虚拟。POCO 代理在某些情况下可以表现得更好，尤其是在跟踪图很大的情况下。然而，性能并非在所有情况下都更好，请参阅[Arthur Vickers（来自 EF）在 POCO Proxies 上的帖子](http://blog.oneunicorn.com/2011/12/05/should-you-use-entity-framework-change-tracking-proxies/)。

据我了解，POCO 代理旨在取代 STE。

# c - 此代码保存了有关中断线程的哪些信息？

> ID：15596156
> 
> 赞同：1
> 
> 时间：2013-03-24T07:29:29.660
> 
> 标签：c, assembly, fpga, intel-fpga, nios

我的分析是程序集将被中断线程的堆栈指针保存到数组中。那是对的吗？我一直在看的我认为这样做的代码是：

```
 ldw     r4,0(sp)        # POP r4
    addi    sp,sp,4
#
#   This comment marks the end of the code for printing a nice message.
#   Now comes other code, which is potentially much more interesting.
#
################################################################

    # Move on to thread-switch code.

oslab_not_a_trap:

    # Clear tick counter, since we are going to switch threads.

    movia   et,oslab_internal_tickcount
    stw     r0,0(et)

    # Now it is time to execute the thread-switch code.
    # We use the more general callr, rather than call.

    movia   et,oslab_internal_threadswitch
    callr   et              # Call thread switch routine written in C with stack pointer as argument
    #Saved the address of the next instruction in the return address register, and transfers execution
    #to the address contained in register et 
```

我认为第一条指令`ldw`（加载字）将堆栈指针保存到 r4 寄存器，然后 r4 将成为线程开关的参数：

```
/*
 * oslab_internal_threadswitch - change thread
 * 
 * The thread stack-pointer is supplied as a parameter.
 * The old thread's stack-pointer value is saved to the array
 * oslab_thread_info_array, and a new thread is selected from the array.
 * The stack pointer of the new thread is returned.
 */
unsigned int * oslab_internal_threadswitch( unsigned int * old_sp )
{
  unsigned int * new_sp;

  oslab_number_of_thread_switches += 1; /* Increase thread-switch counter. */

  /* Print line 1 of an informational message. */
  printf( "\nPerforming thread-switch number %d. The system has been running for %d ticks.\n",
          oslab_number_of_thread_switches,
          oslab_get_internal_globaltime() );

  /* Save the stack pointer of the old thread. */
  oslab_thread_info_array[ oslab_currently_running_thread ].thread_sp = old_sp;

  /* Print part 1 of a message saying which threads are involved this time. */
  printf( "Switching from thread-ID %d ",
          oslab_thread_info_array[ oslab_currently_running_thread ].thread_id );

  /* Perform the scheduling decision (round-robin). */
  oslab_currently_running_thread += 1;
  if( oslab_currently_running_thread >= oslab_current_thread_count )
  {
    oslab_currently_running_thread = 0;
  }

  /* Print part 2 of the informational message. */
  printf( "to thread-ID %d.\n",
          oslab_thread_info_array[ oslab_currently_running_thread ].thread_id );

  /* Get the stack pointer of the new thread. */
  new_sp = oslab_thread_info_array[ oslab_currently_running_thread ].thread_sp;

  /* Return. */
  return( new_sp );
} 
```

看来我理解正确了吗？计时器中断线程，该线程保存有关被中断线程的信息，这就是上面的代码所做的，而保存的有关线程的信息是它的堆栈指针？

完整的汇编：

```
# The label alt_main is defined in this file.
# There is a call to this label in the Altera-supplied startup code for Nios II.
# At label alt_main, interrupts and handlers are initialized; thereafter,
# the label main is called, starting the main program.
################################################################
#
# Definitions for important devices and addresses in this system.
#
# Uart_0 at 0x860

.equ de2_uart_0_base,0x860

# Timer_1 at 0x920, interrupt index 10 (mask 2^10 = 0x400)

.equ de2_timer_1_base,0x920
.equ de2_timer_1_intmask,0x400

# Timeout value for 0,1 ms tick-count interval (CHANGED in every version)

.equ de2_timer_1_timeout_value,4999

# Required tick count per time-slice, meaning
# the number of timer-interrupts before a thread-switch is performed

.equ oslab_ticks_per_timeslice,100

# Interrupt address at 0x800020

.equ de2_nios2_interrupt_address,0x800020

#
# End of device-address definitions
#
################################################################

################################################################
#
# Definition of variables for keeping system time etcetera.
#

.data
.align 2
.global oslab_internal_globaltime
oslab_internal_globaltime:  .word 0

# Definition of variable for remembering the number of
# timer-interrupts since the last thread-switch

.data
.align 2
.global oslab_internal_tickcount
oslab_internal_tickcount:   .word 0

# Definition of system (interrupt) stack, sp, and gp

.data
.align 2
oslab_internal_gp:  .word 0
oslab_internal_sp:  .word 0
oslab_system_stack: .fill 256,1,0
oslab_system_stacktop:

# Definition of the end-of-timeslice message.

oslab_internal_yield_message:
                    .asciz "\n#### Thread yielded after using %d tick%c."

#
# End of system-time variable definitions.
#
################################################################

################################################################
#
# Interrupt handling code.
#

# Stub for interrupt handler

.text
oslab_internal_stub:
    movia   et,oslab_exception_handler
    jmp     et

# The interrupt handler

oslab_exception_handler:
    # Check source of exception, following the procedure
    # described in the Nios II Processor Reference Handbook.

    rdctl   et,estatus      # Check ESTATUS
    andi    et,et,1         # Test EPIE
    beq     et,r0,oslab_exception_was_not_an_interrupt
    rdctl   et,ipending     # Check IPENDING
    beq     et,r0,oslab_exception_was_not_an_interrupt

    # If control comes here, we have established that the
    # exception was caused by an interrupt.
    # Subtract 4 from ea, so that the interrupted instruction
    # will be re-run when we return.

    subi    ea,ea,4

    # Check the source of the interrupt.
    # Possible source No. 1: Timer_1 (currently the only source).

    rdctl   et,ipending
    andi    et,et,de2_timer_1_intmask
    bne     et,r0,oslab_timer_1_interrupt

    # If control comes here, we have an interrupt from an unknown source.
    # This condition is IGNORED in this version of OSLAB.

    eret

oslab_exception_was_not_an_interrupt:

    # Test if the interrupted instruction was a TRAP

    subi    sp,sp,4         # PUSH r8 (instruction 1)
    stw     r8,0(sp)        # PUSH r8 (instruction 2)

    movia   r8,0x003b683a   # binary code for TRAP
    ldw     et,-4(ea)       # Load interrupted instruction
    cmpeq   et,et,r8        # Compare to binary code for TRAP

    # Result from comparison is now in et.

    ldw     r8,0(sp)        # POP r8 (instruction 1)
    addi    sp,sp,4         # POP r8 (instruction 2)

    # Use the comparison result in et as branch condition.
    # The value in et will also be used later, to tell if the
    # exception was a trap or an interrupt.

    bne     et,r0,oslab_trap_handler

    # If control comes here, we have an exception which was not a TRAP.
    # This should not normally happen.
    # However, someone writing programs for the OSLAB micro-operating system
    # could perhaps use unimplemented instructions. To catch unimplemented
    # instructions, we insert a BREAK instruction here. This will stop execution
    # unless the program is run through the debugger.

    break 0
    eret

oslab_timer_1_interrupt:

    # Acknowledge the timer_1 interrupt.

    movia   et,de2_timer_1_base
    stw     r0,0(et)

    # Save contents of R8, to get a free register for
    # temporary values.

    subi    sp,sp,4
    stw     r8,0(sp)        # PUSH r8

    # Increase system clock.

    movia   r8,oslab_internal_globaltime
    ldw     et,0(r8)
    addi    et,et,1
    stw     et,0(r8)

    # Increase tick counter.

    movia   r8,oslab_internal_tickcount
    ldw     et,0(r8)
    addi    et,et,1
    stw     et,0(r8)

    # Restore original contents of R8.

    ldw     r8,0(sp)        # POP r8
    addi    sp,sp,4

    # Check value of tick counter,
    # against the required number of ticks per time-slice.
    # Note: oslab_ticks_per_timeslice is an assembler constant,
    # and not a variable. Hence, no load/store-instructions here.

    subi    et,et,oslab_ticks_per_timeslice

    # If the result from the subtraction is zero (or perhaps positive),
    # then it is time to switch threads.

    bge     et,r0,oslab_time_to_switch

    # If we fall-through here, then we have had one of those many
    # timer interrupts on which we should not switch threads.
    # Return to caller.

    eret

oslab_time_to_switch:

    # This code will now fall-through into the TRAP handler
    # which performs a context switch.
    #
    # We will print out a message for each timer interrupt.
    # To be able to tell that we had a timer interrupt, and not
    # a TRAP, we set et to zero.

    movi    et,0

oslab_trap_handler:

    # Save registers r1 through r23, plus fp, gp, ra and ea

    .set noat               # R1 is used here.
    subi    sp,sp,108       # Make room for all registers. 
    stw     r1, 4(sp)       # R1 is saved in slot 1, not slot 0.
    stw     r2, 8(sp)
    stw     r3,12(sp)
    stw     r4,16(sp)
    stw     r5,20(sp)
    stw     r6,24(sp)
    stw     r7,28(sp)
    stw     r8,32(sp)
    stw     r9,36(sp)
    stw    r10,40(sp)
    stw    r11,44(sp)
    stw    r12,48(sp)
    stw    r13,52(sp)
    stw    r14,56(sp)
    stw    r15,60(sp)
    stw    r16,64(sp)
    stw    r17,68(sp)
    stw    r18,72(sp)
    stw    r19,76(sp)
    stw    r20,80(sp)
    stw    r21,84(sp)
    stw    r22,88(sp)
    stw    r23,92(sp)
    stw    r26,96(sp)
    stw    r28,100(sp)
    stw    r31,104(sp)
    stw     ea,0(sp)        # Special case, saved in slot 0.

    mov     r4,sp           # Copy stack pointer to param1 register
    movia   sp,oslab_system_stacktop     # Use system stack instead

    # Test et to see if this was a timeout event or a TRAP.

    beq     et,r0,oslab_not_a_trap

    # If this was a trap event, we fall through here.
    # Our simplified printf is used to print a message,
    # saying that the previous thread yielded parts of its time-slice.

################################################################
#
#   The following code prints a nice message. Nothing more.
#   This code saves and restores all registers it uses.
#   You can safely ignore the following code, up to
#   (but NOT including) the label oslab_not_a_trap.
#
    subi    sp,sp,4         # Contents of r4 must be preserved.
    stw     r4,0(sp)        # PUSH r4.

    movia   r4,oslab_internal_yield_message
    movia   r5,oslab_internal_tickcount
    ldw     r5,0(r5)
    movi    r6,0            # Gold-plating: check if 1 tick or several ticks.
    subi    et,r5,1         # Do not print the s if only 1 tick.
    beq     et,r0,oslab_no_plural_ticks
    movi    r6,'s'          # If 0 ticks, or 2 or more ticks, print the s.
oslab_no_plural_ticks:
    call    printf

    ldw     r4,0(sp)        # POP r4
    addi    sp,sp,4
#
#   This comment marks the end of the code for printing a nice message.
#   Now comes other code, which is potentially much more interesting.
#
################################################################

    # Move on to thread-switch code.

oslab_not_a_trap:

    # Clear tick counter, since we are going to switch threads.

    movia   et,oslab_internal_tickcount
    stw     r0,0(et)

    # Now it is time to execute the thread-switch code.
    # We use the more general callr, rather than call.

    movia   et,oslab_internal_threadswitch
    callr   et              # Call thread switch routine written in C with stack pointer as argument
    #Saved the address of the next instruction in the return address register, and transfers execution
    #to the address contained in register et

    mov     sp,r2           # Copy return value to stack pointer
                            # Yes, the system stack pointer is lost,
                            # but who cares? We will not need it any more.

    # restore registers
    ldw     r1, 4(sp)
    ldw     r2, 8(sp)
    ldw     r3,12(sp)
    ldw     r4,16(sp)
    ldw     r5,20(sp)
    ldw     r6,24(sp)
    ldw     r7,28(sp)
    ldw     r8,32(sp)
    ldw     r9,36(sp)
    ldw    r10,40(sp)
    ldw    r11,44(sp)
    ldw    r12,48(sp)
    ldw    r13,52(sp)
    ldw    r14,56(sp)
    ldw    r15,60(sp)
    ldw    r16,64(sp)
    ldw    r17,68(sp)
    ldw    r18,72(sp)
    ldw    r19,76(sp)
    ldw    r20,80(sp)
    ldw    r21,84(sp)
    ldw    r22,88(sp)
    ldw    r23,92(sp)
    ldw    r26,96(sp)
    ldw    r28,100(sp)
    ldw    r31,104(sp)
    ldw     ea,0(sp)        # Special case
    addi    sp,sp,108

    eret                    # Return from exception

#
# End of exception handling code.
#
################################################################

################################################################
#
# Startup code.
#
# When the system is started, Altera-supplied code initializes the
# Nios II CPU and cache memories, and then calls alt_main.
#

.global alt_main
alt_main:
    wrctl   status,r0       # Disable interrupts. status is register 0
    wrctl   ienable,r0      # Clear all bits in IENABLE. ienable is internal interrupt-enable bits

    # Now copy the stub.

    movia   r8,oslab_internal_stub
    movia   r9,de2_nios2_interrupt_address
    ldw     r10,0(r8)
    stw     r10,0(r9)
    ldw     r10,4(r8)
    stw     r10,4(r9)
    ldw     r10,8(r8)
    stw     r10,8(r9)

    # Initialize timer_1.

    movia   r8,de2_timer_1_base
    movia   r9,de2_timer_1_timeout_value
    srli    r10,r9,16
    stw     r10,12(r8)      # Write periodh
    andi    r10,r9,0xffff
    stw     r10,8(r8)       # Write periodl
    movi    r10,7           # Continuous, interrupt on timeout, and start
    stw     r10,4(r8)

    # Initialize CPU for interrupts from timer_1.

    movi    r10,de2_timer_1_intmask
    wrctl   ienable,r10
    movi    r10,1
    wrctl   status,r10

    # Call to main. Do not jump, main is a subroutine,
    # and may execute a ret instruction.

    subi    sp,sp,4
    stw     ra,0(sp)        # PUSH r31
    movia   r8,main
    callr   r8
    ldw     ra,0(sp)        # POP r31
    addi    sp,sp,4

    # If main returns, we will return directly to the routine
    # that called us (that called alt_main).

    ret

#
# End of startup code.
#
################################################################

################################################################
#
# Helper functions for initialization and thread handling.
#

.text
.align 2
.global oslab_internal_get_gp
oslab_internal_get_gp:
    mov     r2,gp
    ret

.global oslab_begin_critical_region
oslab_begin_critical_region:
    wrctl   status,r0
    ret

.global oslab_end_critical_region
oslab_end_critical_region:
    movi    r8,1
    wrctl   status,r8
    ret

.global oslab_get_internal_globaltime
oslab_get_internal_globaltime:
    movia   r2,oslab_internal_globaltime
    ldw     r2,0(r2)
    ret

.global oslab_get_internal_tickcount
oslab_get_internal_tickcount:
    movia   r2,oslab_internal_tickcount
    ldw     r2,0(r2)
    ret

.global oslab_yield
oslab_yield:
    trap
    ret

#
# End of helper functions.
#
################################################################
#
# ********************************************************
# *** You don't have to study the code below this line ***
# ********************************************************
#
################################################################
#
# A simplified printf() replacement.
# Implements the following conversions: %c, %d, %s and %x.
# No format-width specifications are allowed,
# for example "%08x" is not implemented.
# Up to four arguments are accepted, i.e. the format string
# and three more. Any extra arguments are silently ignored.
#
# The printf() replacement relies on routines
# out_char_uart_0, out_hex_uart_0,
# out_number_uart_0 and out_string_uart_0
# in file oslab_lowlevel_c.c
#
# We need the macros PUSH and POP - definitions follow.

# PUSH reg - push a single register on the stack

.macro PUSH reg
    subi sp,sp,4    # reserve space on stack
    stw  \reg,0(sp) # store register
.endm

# POP  reg - pop a single register from the stack

.macro POP  reg
    ldw  \reg,0(sp) # fetch top of stack contents
    addi sp,sp,4    # return previously reserved space
.endm

.text
.global printf
printf:
    PUSH    ra      # PUSH return address register r31.
    PUSH    r16     # R16 will point into format string.
    PUSH    r17     # R17 will contain the argument number.
    PUSH    r18     # R18 will contain a copy of r5.
    PUSH    r19     # R19 will contain a copy of r6.
    PUSH    r20     # R20 will contain a copy of r7.
    mov     r16,r4  # Get format string argument
    movi    r17,0   # Clear argument number.
    mov     r18,r5  # Copy r5 to safe place.
    mov     r19,r6  # Copy r6 to safe place.
    mov     r20,r7  # Copy r7 to safe place.
asm_printf_loop:
    ldb     r4,0(r16)   # Get a byte of format string.
    addi    r16,r16,1   # Point to next byte
    # End of format string is marked by a zero-byte.
    beq     r4,r0,asm_printf_end
    cmpeqi  r9,r4,92    # Check for backslash escape.
    bne     r9,r0,asm_printf_backslash
    cmpeqi  r9,r4,'%'   # Check for percent-sign escape.
    bne     r9,r0,asm_printf_percentsign
asm_printf_doprint:
    # No escapes present, just print the character.
    movia   r8,out_char_uart_0
    callr   r8
    br      asm_printf_loop
asm_printf_backslash:
    # Preload address to out_char_uart_0 into r8.
    movia   r8,out_char_uart_0
    ldb     r4,0(r16)   # Get byte after backslash
    addi    r16,r16,1   # Increase byte count.
    # Having a backslash at the end of the format string
    # is illegal, but must not crash our printf code.
    beq     r4,r0,asm_printf_end
    cmpeqi  r9,r4,'n'   # Newline
    beq     r9,r0,asm_printf_backslash_not_newline
    movi    r4,10       # Newline
    callr   r8
    br      asm_printf_loop
asm_printf_backslash_not_newline:
    cmpeqi  r9,r4,'r'   # Return
    beq     r9,r0,asm_printf_backslash_not_return
    movi    r4,13       # Return
    callr   r8
    br      asm_printf_loop
asm_printf_backslash_not_return:
    # Unknown character after backslash - ignore.
    br      asm_printf_loop
asm_printf_percentsign:
    addi    r17,r17,1   # Increase argument count.
    cmpgei  r8,r17,4    # Check against maximum argument count.
    # If maximum argument count exceeded, print format string.
    bne     r8,r0,asm_printf_doprint
    cmpeqi  r9,r17,1    # Is argument number equal to 1?
    beq     r9,r0,asm_printf_not_r5 # beq jumps if cmpeqi false
    mov     r4,r18      # If yes, get argument from saved copy of r5.
    br      asm_printf_do_conversion
asm_printf_not_r5:
    cmpeqi  r9,r17,2    # Is argument number equal to 2?
    beq     r9,r0,asm_printf_not_r6 # beq jumps if cmpeqi false
    mov     r4,r19      # If yes, get argument from saved copy of r6.
    br      asm_printf_do_conversion
asm_printf_not_r6:
    cmpeqi  r9,r17,3    # Is argument number equal to 3?
    beq     r9,r0,asm_printf_not_r7 # beq jumps if cmpeqi false
    mov     r4,r20       # If yes, get argument from saved copy of r7.
    br      asm_printf_do_conversion
asm_printf_not_r7:
    # This should not be possible.
    # If this strange error happens, print format string.
    br      asm_printf_doprint
asm_printf_do_conversion:
    ldb     r8,0(r16)   # Get byte after percent-sign.
    addi    r16,r16,1   # Increase byte count.
    cmpeqi  r9,r8,'x'   # Check for %x (hexadecimal).
    beq     r9,r0,asm_printf_not_x
    movia   r8,out_hex_uart_0
    callr   r8
    br      asm_printf_loop
asm_printf_not_x:
    cmpeqi  r9,r8,'d'   # Check for %d (decimal).
    beq     r9,r0,asm_printf_not_d
    movia   r8,out_number_uart_0
    callr   r8
    br      asm_printf_loop
asm_printf_not_d:
    cmpeqi  r9,r8,'c'   # Check for %c (character).
    beq     r9,r0,asm_printf_not_c
    # Print character argument.
    br      asm_printf_doprint
asm_printf_not_c:
    cmpeqi  r9,r8,'s'   # Check for %s (string).
    beq     r9,r0,asm_printf_not_s
    movia   r8,out_string_uart_0
    callr   r8
    br      asm_printf_loop
asm_printf_not_s:
asm_printf_unknown:
    # We do not know what to do with other formats.
    # Print the format string text.
    movi    r4,'%'
    movia   r8,out_char_uart_0
    callr   r8
    ldb     r4,-1(r16)
    br      asm_printf_doprint
asm_printf_end:
    POP     r20
    POP     r19
    POP     r18
    POP     r17
    POP     r16
    POP     ra
    ret

#
# End of simplified printf() replacement code.
#
################################################################
.end 
```

C

```
#include <stdio.h>              /* Declaration of printf() */
#include "oslab_lowlevel_h.h"   /* Declarations of low-level stuff. */

#define MAX_THREADS ( 17 )
struct oslab_thread_info
{
  unsigned int * thread_sp; /* Storage space for thread stack-pointer. */
  int thread_id;            /* Storage space for a thread ID. */
};
struct oslab_thread_info oslab_thread_info_array[ MAX_THREADS ];
unsigned int oslab_currently_running_thread = 0;
unsigned int oslab_current_thread_count = 1;
unsigned int oslab_next_available_thread_id = 1;

unsigned int oslab_number_of_thread_switches = 0;

unsigned int * oslab_internal_threadswitch( unsigned int * old_sp )
{
  unsigned int * new_sp;

  oslab_number_of_thread_switches += 1; /* Increase thread-switch counter. */

  /* Print line 1 of an informational message. */
  printf( "\nPerforming thread-switch number %d. The system has been running for %d ticks.\n",
          oslab_number_of_thread_switches,
          oslab_get_internal_globaltime() );

  /* Save the stack pointer of the old thread. */
  oslab_thread_info_array[ oslab_currently_running_thread ].thread_sp = old_sp;

  /* Print part 1 of a message saying which threads are involved this time. */
  printf( "Switching from thread-ID %d ",
          oslab_thread_info_array[ oslab_currently_running_thread ].thread_id );

  /* Perform the scheduling decision (round-robin). */
  oslab_currently_running_thread += 1;
  if( oslab_currently_running_thread >= oslab_current_thread_count )
  {
    oslab_currently_running_thread = 0;
  }

  /* Print part 2 of the informational message. */
  printf( "to thread-ID %d.\n",
          oslab_thread_info_array[ oslab_currently_running_thread ].thread_id );

  /* Get the stack pointer of the new thread. */
  new_sp = oslab_thread_info_array[ oslab_currently_running_thread ].thread_sp;

  /* Return. */
  return( new_sp );
}

int oslab_create_thread( int (*thread_function)(void *),
                         void * thread_arg,
                         unsigned int * thread_stack )
{
  int i;                /* Loop index. */
  int new_thread_id;    /* The thread-ID for the new thread. */

  /* new_thread_sp is used for the initial stack pointer of the new thread. */
  unsigned int * new_thread_sp;

  new_thread_sp = thread_stack - 27;
  for( i = 1; i < 24; i += 1 ) new_thread_sp[ i ] = 0;
  new_thread_sp[ 24 ] = (unsigned int) oslab_internal_get_gp();
  new_thread_sp[ 25 ] = 0;
  new_thread_sp[ 26 ] = (unsigned int) oslab_exit_thread;
  new_thread_sp[  0 ] = (unsigned int) thread_function;
  new_thread_sp[  4 ] = (unsigned int) thread_arg;

  oslab_begin_critical_region();

  /* If the thread_info_array is full, a new thread cannot be created. */
  if( oslab_current_thread_count >= MAX_THREADS )
  {
    oslab_end_critical_region();
    return( -1 );
  }

  /* Allocate a thread ID and a thread_info_array entry. */
  new_thread_id = oslab_next_available_thread_id;
  oslab_next_available_thread_id += 1;
  oslab_thread_info_array[ oslab_current_thread_count ].thread_id = new_thread_id;
  oslab_thread_info_array[ oslab_current_thread_count ].thread_sp = new_thread_sp;
  oslab_current_thread_count += 1;

  /* Finished. Enable interrupts again and return. */
  oslab_end_critical_region();
  return( new_thread_id );
}

void oslab_exit_thread( void )
{
  int i;
  int current_thread_id;

  /* Disable interrupts while we modify the thread-management data-structures. */
  oslab_begin_critical_region();

  /* Save the current thread ID, in case someone checks for it. */
  current_thread_id = oslab_thread_info_array[ oslab_currently_running_thread ].thread_id;

  /* Shift array contents to compact ready queue.
   * When this code runs, it is the currently-running thread that has
   * requested its own removal from the system. We overwrite the
   * thread_info_array entry for this thread with the next one,
   * and so on, moving all the remaining entries down one slot. */
  for( i = oslab_currently_running_thread; i < oslab_current_thread_count - 1; i += 1 )
  {
    oslab_thread_info_array[ i ].thread_id = oslab_thread_info_array[ i + 1 ].thread_id;
    oslab_thread_info_array[ i ].thread_sp = oslab_thread_info_array[ i + 1 ].thread_sp;
  }
  /* We have now shifted all entries down one slot. The last thing to do
   * is to mark the last entry (the one with the highest index) as invalid.
   * This entry has just been copied down to the next-to-last slot, so
   * we're not losing it. */
  oslab_current_thread_count -= 1;

  /* Now set the currently-running thread to the entry that we just marked
   * as invalid. Later, we call oslab_yield, and then the thread stack-pointer
   * will be written to the invalid entry (and thereby thrown away). */
  oslab_currently_running_thread = oslab_current_thread_count;
  /* Set the thread ID correctly, in case someone checks for it. */
  oslab_thread_info_array[ oslab_currently_running_thread ].thread_id = current_thread_id;

  /* We're finished modifying the thread-management data-structures.
   * Enable interrupts again. */
  oslab_end_critical_region();

  oslab_yield();
}

void oslab_idle( void )
{
  while( 1 )            /* Loop forever. */
  {
    oslab_yield();      /* Of course we should yield here. But why? */ 
  //  Sleep(5000);        /* Should we call Sleep? Or perhaps, maybe not. */
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T07:45:56.323

陷阱处理程序首先将所有寄存器保存在堆栈中。然后将堆栈指针寄存器的值传递给线程切换函数，将其保存在数组中。然后这个函数从数组中选择下一个线程的堆栈指针值（以相同或相似的方式进入数组）并返回它。然后陷阱处理程序将此指针加载到堆栈指针寄存器中，弹出所有寄存器并返回。

如果这就是你的想法，那就对了。

这是线程切换器/调度器的一个相当典型的实现。

# python - 无法导入名称 SIGNATURE_HMAC

> ID：15596157
> 
> 赞同：5
> 
> 时间：2013-03-24T07:29:30.857
> 
> 标签：python, django, python-2.7, importerror, hmac

我正在运行[python-social-auth](https://python-social-auth.readthedocs.org/en/)提供的[django 示例](https://github.com/omab/python-social-auth/tree/master/examples/django_example)，并且收到以下 500 服务器错误。

```
ImportError at /login/bitbucket/
cannot import name SIGNATURE_HMAC
Request Method: GET
Request URL:    http://localhost:8000/login/bitbucket/
Django Version: 1.4.4
Exception Type: ImportError
Exception Value:    
cannot import name SIGNATURE_HMAC
Exception Location: /usr/local/lib/python2.7/dist-packages/requests_oauthlib/core.py in  <module>, line 3
Python Executable:  /usr/bin/python
Python Version: 2.7.3 
```

我在 Google 和 StackOverflow 中搜索并找不到任何答案。我刚刚克隆了它并没有更改任何代码。我安装了 hashlib 和 hmac 库

[编辑] 我升级了 oauthlib 和 requests_oauthlib 并且错误被一个新的替换

```
AttributeError at /login/bitbucket/
'Request' object has no attribute 'body'
Request Method: GET
Request URL:    http://localhost:8000/login/bitbucket/
Django Version: 1.4.4
Exception Type: AttributeError
Exception Value:    
'Request' object has no attribute 'body'
Exception Location: /usr/local/lib/python2.7/dist-packages/requests_oauthlib/core.py in         __call__, line 46
Python Executable:  /usr/bin/python
Python Version: 2.7.3 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-28T14:23:58.233

仅供参考，我通过 pip 重新安装 oauthlib 包解决了标题中的问题（来自 Google）。

```
sudo pip install --upgrade oauthlib 
```

由于这个问题，我无法打开 Ubuntu 软件中心，升级 oauthlib 后一切正常。

# for-loop - WMI Win32_Directory 在 For 循环中失败，错误 800706BE 远程过程调用失败

> ID：15596159
> 
> 赞同：3
> 
> 时间：2013-03-24T07:29:44.000
> 
> 标签：for-loop, vbscript, wmi, wmi-query

我在询问之前搜索并没有找到适用于我的代码的任何内容。我尝试过的也在代码中进行了注释。错误 800706BE（*远程过程调用失败*）出现在`For..Next`循环中，并且每次都会以不同的随机迭代次数打破循环。我想念什么以及如何修复该（简单）代码？

```
'List All the Folders on a Computer
strComputer = "."
Set objWMIService = GetObject("winmgmts:" _
    & "{impersonationLevel=impersonate}!\\" & strComputer & "\root\cimv2")
'With objWMIService.Security_
'    .impersonationlevel = 3
'    For I = 1 To 27
'        .Privileges.Add(I)
'    Next
'End With '--------------------------not help at all!
Set colFolders = objWMIService.ExecQuery("Select * from Win32_Directory")
cnt = 0
'Do Until IsObject(colFolders) '-----not help at all!
'    WScript.Sleep 500
'Loop
On Error Resume Next 'enabled to get extra info from SWbemLastError
For Each objFolder In colFolders
    Wscript.Echo objFolder.Name
    cnt = cnt + 1
'    WScript.Sleep 10 '--------------that make it worst!
Next '---------------the error appear always at this line----------
If Err Then
    Wscript.Echo Err.Number, Err.Description, Err.Source
    Set lastErr = CreateObject("WbemScripting.SWbemLastError")
    Wscript.Echo lastErr.Operation
End If
Wscript.Echo "LastIter.: " & cnt
'-2147023170
'ExecQuery
'LastIter.: 2152 or 1592 or 1314 or 959 ... varied random 
```

WBEM测试：

![在此处输入图像描述](../Images/c9467e4a88e053c1a2bc38477f35a921.png)

**PS**我做了一些测试`System Restore`来测试一个假设并在上次 Windows 安全更新前几天恢复，你猜怎么着？现在我得到不同的错误：**80041033** “正在关机”。之后更加困惑`Undo Last Restore`，我仍然收到相同的**新**错误（*正在关闭*）。这已经没有意义了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-12T16:38:45.763

你试过 sfc /scannow 了吗？我没有看到提到这涉及哪个 Windows 平台。XP、Vista、7、8.x、10 预览版？32位，64位？

# php - 将 html 和脚本添加到 wordpress

> ID：15596161
> 
> 赞同：0
> 
> 时间：2013-03-24T07:29:55.460
> 
> 标签：php, wordpress

我是 wordpress 插件开发的新手。

我想使用我刚刚从 wordpress codex 中学到的动作钩子向 wp_footer 添加一个简单的 html 代码。

```
<?php
        /* 
        Plugin Name: test
        Plugin URI: http://mysite.com
        Description: test
        Version: 1.0 
        Author: me
        Author URI: http://mysite.com
        */  

    function addbar(){
    echo '<div id="cbar">';
    echo '</div>';
    }

    if ( is_user_logged_in() ){
       add_action('wp_footer','addbar');
    } else {
    }
?> 
```

此代码不起作用，它使我的网站崩溃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T07:53:06.573

我认为由于此功能位于pluggable.php 中，因此激活插件时该功能不存在。这*应该*意味着您只需要延迟逻辑的加载。

```
function addbar(){
if(is_user_logged_in()){
    echo '<div id="cbar">';
    echo '</div>';
}
}

 add_action('wp_footer','addbar'); 
```

# sql - 将数据库保存为 .mdb

> ID：15596162
> 
> 赞同：-4
> 
> 时间：2013-03-24T07:30:02.047
> 
> 标签：sql, sql-server

我有一个小问题，我想将在 SQL Server 中创建的数据库`.mdb`保存`.mdf`为默认值。所以我找不到任何方法可以做到这一点，请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T07:37:07.527

您可以使用[SQL Server 导入和导出向导](http://msdn.microsoft.com/en-us/library/ms141209.aspx)

在目标部分中选择 Microsoft Access。

# java - 如何插入特殊字符？

> ID：15596164
> 
> 赞同：0
> 
> 时间：2013-03-24T07:30:20.100
> 
> 标签：java, char

我需要插入一个分字符，我该怎么做：

```
JOptionPane.showInputDialog("Please choose the number of cents,
"should be the symbol of cents"); 
```

应该有方法`char`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T07:32:44.127

Java 支持开箱即用的 Unicode。只需插入`¢`字符串文字。如果这不起作用，请尝试[`\u00A2`](http://www.fileformat.info/info/unicode/char/a2/index.htm).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T07:35:32.070

Java 支持 Unicode 源文件：

`JOptionPane.showInputDialog("Please choose the number of ¢: ");`应该管用！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-30T01:10:23.690

你是对的，有一个特殊的命令可以使用，我猜是 169 ......但是 Java 几乎接受任何特殊字符，所以你可以简单地在网上找到它并复制粘贴

# java - 在 Java 中存储和保存星期/时间 - 值对

> ID：15596167
> 
> 赞同：0
> 
> 时间：2013-03-24T07:30:53.070
> 
> 标签：java, android, collections

我正在从[网页](http://aikataulut.hsl.fi/pysakit/en/1020249.html)中抓取一些数据，并希望将其保存在结构中。我的数据是日期/时间值对示例的集合：

```
Monday  07:15   312
Monday  07:20   553
Monday  09:55   312
Tuesday 09:55   312 
```

我不需要存储日期，只需要存储星期几和 24 小时制。我希望能够查询此集合以获取下一对。例如，如果我查询它`Tuesday, 07:00`，我应该得到下一个最接近的记录，即`Tuesday, 09:55`。

对于在不诉诸 SQLite 或其他类似方法的情况下存储这些信息的好方法，我感到非常迷茫。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T07:40:25.080

在 Java 中，我会选择树形图，其中我可以将月份中的日期存储为键，并将时间存储为其值。日期可以是一个枚举，存储星期一、星期二、星期三、星期四、星期五和星期六和星期日的七个值，而值可以是存储小时和分钟的时间戳。

该集合将是排序的哈希映射或树映射（或排序的 EnumMap，这将比其他两个选项更好）。

希望这可以帮助 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T14:06:28.503

我接受了 Panky1986 的建议，并使用`EnumMap`包含 a`TreeMap`来存储小时和嵌套`TreeMap`在其中来存储分钟，而分钟又存储数据。

```
/* This is the enumeration which tracks the days */
public enum DAY {WEEKDAY, SATURDAY, SUNDAY};

/* This is the map that stores the timings */
private EnumMap<DAY, TreeMap<Integer, TreeMap<Integer, String>>> mapDays; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T05:11:54.590

只是为了更清楚。使用枚举映射来存储您的数据。只需像这样修改您的枚举 public enum DAYTIME { MONDAY(System.currentTimeMillis()),TUESDAY(System.currentTimeMillis()),OTHER_WEEKDAYS(System.currentTimeMillis());

```
 DAYTIME(Long time) {
        this.time = time;
    }

    private final Long timeInMillis;

    public Long getTimeInMillis() {
        return time ;
    }
} 
```

现在调用 DayTime 时将返回带有日期和当前时间戳的枚举。我认为这满足了时间存储方面的要求。

你的 EnumMap 会是这样的

```
private EnumMap<DAYTIME, Object> mapDays; 
```

这里 Object 表示您希望保存在数据库中的任何数据，无论是另一个列表/地图/其他集合您现在需要编写一个实用程序，该实用程序将在枚举时间字段上对存储的地图进行排序。这样，您可以通过指定日期和时间来获取下一个元素。

# javascript - 用于在客户端和 node.js 服务器之间同步数据的 JavaScript 库？

> ID：15596174
> 
> 赞同：2
> 
> 时间：2013-03-24T07:31:29.803
> 
> 标签：javascript, jquery, html, sandbox

是否有一个 JavaScript 库可以获取服务器上的特定数据（例如，一个数组）并在客户端之间自动同步它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T10:34:41.397

# [Opa 框架](http://opalang.org/)

> Opa Slicer 自动执行客户端和服务器之间的调用。不再需要手动编写 AJAX 调用或值序列化！

也可以看看：

*   [维基百科上的欧巴](http://en.wikipedia.org/wiki/Opa_%28programming_language%29)
*   [developer.com 上的比较](http://www.developer.com/open/node.js-opa-javascript-framework.html)
*   [Opa 计数器示例](https://github.com/akoprow/hands-on-opa/blob/master/examples/counter/counter.opa)

# 函数式反应式编程

对于 FRP，一般来说：

*   [FRP 维基百科](http://en.wikipedia.org/wiki/Functional_reactive_programming)
*   [用于 Web 的函数式响应式编程，或者：我的 Lunascript 在哪里？！](http://yz.mit.edu/wp/functional-reactive-programming-for-the-web-or-wheres-my-lunascript/)（[Reddit 讨论](http://www.reddit.com/r/programming/comments/im3z3/functional_reactive_programming_for_the_web_or/)）

网页 FRP 示例：

**新语言**：

*   **[Ur/Web](http://www.impredicative.com/ur/)**（[计数器示例](http://www.impredicative.com/ur/demo/counter.html)，（此示例中没有服务器同步，但客户端视图/模型同步是第一步）
*   **[Elm](http://elm-lang.org/)** [（没有计数器，但邮政编码示例](http://elm-lang.org/edit/examples/Reactive/ZipCodes.elm)非常相似）
*   **[Flapjax](http://www.flapjax-lang.org/)**（找不到 AJAX 示例，似乎不关注服务器同步）
*   可能也可以在某个时候与**[罗伊一起实现](http://roy.brianmckenna.org/)**
*   可能也可以[在某个时候](https://github.com/boothead/fay-frp)通过**[Fay实现](https://github.com/faylang/fay/wiki)**

**JavaScript 库**：

*   **[Bacon.js](https://github.com/raimohanska/bacon.js)**（[简介中的计数器示例](https://github.com/raimohanska/bacon.js#intro)）

# [Angular.js](http://angularjs.org/)

FRP 仍然是相对实验性的，所以如果你正在构建大型的东西，我会选择 Angular.js ，因为[这里提到的原因](http://www.yesodweb.com/blog/2012/10/yesod-fay-js)，因为它似乎有适当的雄心壮志。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T08:35:35.470

It sounds like WebSockets might be what you're looking for. [https://developer.mozilla.org/en-US/docs/WebSockets](https://developer.mozilla.org/en-US/docs/WebSockets)

Otherwise, standard AJAX polling could probably do the job.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T09:44:56.357

不确定它是否符合您的需要，但您可以尝试[jIO](http://www.j-io.org/) ( [Github](http://github.com/nexedi/jio) )，它可以跨不同存储同步 JSON 文档。

因此，在您的情况下，您将在服务器上拥有阵列，并且每个客户端都使用复制修订存储设置（本地存储/远程服务器存储）。JIO 将保持客户端-服务器同步，因此当用户更新阵列时，服务器阵列也将被更新。将引发冲突（客户端上存在的不同版本），因此您必须编写自己的处理程序来解决冲突（例如，获取最新的数组，删除另一个数组）。

JIO 的工作方式与[CouchDB](http://couchdb.apache.org/)类似。

当然你也可以看看[PouchDB](http://pouchdb.com/)

# windows-ce - wince上未解析的外部符号

> ID：15596175
> 
> 赞同：0
> 
> 时间：2013-03-24T07:31:32.360
> 
> 标签：windows-ce, lnk2019, lnk2001

尝试编译 wince 代码时收到此错误：

```
Error   3   error LNK2019: unresolved external symbol "public: __thiscall CTransInPlaceFilter::CTransInPlaceFilter(wchar_t *,struct IUnknown *,struct _GUID const &,long *)" (??0CTransInPlaceFilter@@QAE@PA_WPAUIUnknown@@ABU_GUID@@PAJ@Z) referenced in function "private: __thiscall myFilter::myFilter(wchar_t *,struct IUnknown *,long *)" (??0myFilter@@AAE@PA_WPAUIUnknown@@PAJ@Z)   myFilter.obj    MyFilter
Error   4   error LNK2001: unresolved external symbol "public: virtual long __cdecl CTransformFilter::FindPin(wchar_t const *,struct IPin * *)" (?FindPin@CTransformFilter@@UAAJPB_WPAPAUIPin@@@Z)  myFilter.obj    MyFilter
Error   5   error LNK2001: unresolved external symbol "public: virtual long __cdecl CBaseFilter::JoinFilterGraph(struct IFilterGraph *,wchar_t const *)" (?JoinFilterGraph@CBaseFilter@@UAAJPAUIFilterGraph@@PB_W@Z)    myFilter.obj    MyFilter
Error   6   error LNK2001: unresolved external symbol "public: virtual long __cdecl CBaseFilter::QueryVendorInfo(wchar_t * *)" (?QueryVendorInfo@CBaseFilter@@UAAJPAPA_W@Z) myFilter.obj    MyFilter
Error   7   fatal error LNK1120: 4 unresolved externals WINCE600_SDK    MyFilter 
```

我链接到项目必要的文件，如：strmbase.lib。我试图查看 strmbase.lib 是否有 CTransInPlaceFilter 的 c'tor（如 error3），我发现它有，但不同：

```
public: __thiscall CTransInPlaceFilter::CTransInPlaceFilter(unsigned short *,struct IUnknown *,struct _GUID const &,long *); 
```

我不能将 wchar_t* 转换为 short*。

我的特定“strmbase.lib”有问题还是我做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T20:15:22.207

在早期的 MS 编译器版本中，wchar_t 只是 unsigned short 的别名（这违反了 C++ 标准），因此可以解释 strmbase.lib 中的实现。在 MSC 13 中，这是可配置的，如果我没记错的话，在 MSC 14 中，它甚至成为了默认值。

现在，您可以翻转此开关以使其与库匹配，但这样做也有缺点，例如，您不能使用 wchar_t 和 unsigned short 重载。也许有更好的方法，但为此我会问您使用的是哪个版本的 CE 以及您使用的是哪个编译器版本。

# lisp - 如何在嵌套的for循环中累积计数？

> ID：15596176
> 
> 赞同：1
> 
> 时间：2013-03-24T07:31:32.777
> 
> 标签：lisp, common-lisp, nested-loops

我有以下内容：

```
(let ((count 0))
  (loop for i from 1 to 3 do
        (loop for j from 1 to 3 do
              (loop for k from 1 to 3 do
                    (setq count (+ 1 count))))
        finally (return count))) 
```

哪个是最快的，口齿不清的构造来做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-24T08:17:54.067

什么是最好的方法取决于代码的目的，即为什么要嵌套三个循环。

在您的具体情况下，最快和最短的答案是`(* 3 3 3)`或`27`

更一般地说，一个可能的改进是`(setq count (+ 1 count))`用`(incf count)`

您也可以将循环编写为

```
(loop for i from 1 to 3 summing
   (loop for j from 1 to 3 summing
      (loop for k from 1 to 3 summing 1))) 
```

除了非循环答案外，所有版本的速度应该大致相同。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-24T21:37:54.410

您可以`count`在最内层循环中使用 loop 关键字，`sum`在外层循环中使用结果：

```
(loop :for i :below 3
      :sum (loop :for j :below 3
                 :sum (loop :for k :below 3
                            :count t))) 
```

# sql - 来自多个表的 Oracle 查询

> ID：15596185
> 
> 赞同：0
> 
> 时间：2013-03-24T07:33:38.960
> 
> 标签：sql, oracle

1.  确定在订单 1002 上购买的图书产生的总利润金额。显示书名和利润。利润的格式应显示一个美元符号和两位小数。

ZJLB_ORDERITEMS 包含 ORDER#、ISBN

ZJLB_BOOKS 包含 ISNB、TITLE、RETAIL、COST

```
SELECT ISBN
FROM ZJLB_ORDERITEMS
WHERE ORDER# = '1002'; 
```

（然后我得到 8843172113 的输出）

```
SELECT TITLE,
       TO_CHAR(RETAIL - COST, '$99,999.99') "Profit"
FROM ZJLB_BOOKS,
WHERE ISBN = '8843172113'; 
```

（然后我得到我想要的标题）

但我需要将两个脚本组合在一起，因为我无法先手动找到 ISBN，然后输入`WHERE ISBN = '8843172113'`；

我可以先将在脚本中找到的 ISBN 的值输出到 X，然后在脚本 2 中输出，其中 ISBN= X（上一个结果）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T07:40:29.717

您可以使用[JOIN](http://docs.oracle.com/cd/B19306_01/server.102/b14200/queries006.htm)子句：

> SQL 连接子句组合数据库中两个或多个表的记录

尝试这个：

```
SELECT A.ISBN, B.TITLE, TO_CHAR(B.RETAIL - B.COST, '$99,999.99') "Profit"

FROM ZJLB_ORDERITEMS A JOIN ZJLB_BOOKS B

ON A.ISBN = B.ISBN

WHERE A.ORDER# = '1002'; 
```

有关连接概念，请参见[此处](http://en.wikipedia.org/wiki/Join_%28SQL%29)。

# ios - iOS url方案在各自的应用程序中打开特定的youtube和soundcloud页面？

> ID：15596188
> 
> 赞同：1
> 
> 时间：2013-03-24T07:34:01.970
> 
> 标签：ios, url, youtube, soundcloud

无论如何使用 iOS URL 方案来打开 YouTube 和 Soundcloud iOS 应用程序到特定用户的个人资料？

我试过 youtube://user/myusername 和 soundcloud:user:myusername 但它们似乎不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-24T15:07:03.323

我不知道 youtube，但对于 SoundCloud，`soundcloud:users:id`应该可以正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T10:39:43.957

@vince 是对的，您可以使用 SoundCloud 的[/resolve](http://developers.soundcloud.com/docs/api/reference#resolve)端点来检索用户的 id

# php - 通过 javascript 从 HTTP 页面调用 HTTPS API

> ID：15596189
> 
> 赞同：2
> 
> 时间：2013-03-24T07:34:27.723
> 
> 标签：php, javascript, security, https, authorization

我在[http://example.com](http://example.com)上有一个登录页面；上面有一个 ajax 登录栏，它将用户的登录信息发送到服务器，接收身份验证响应，并将其显示给用户。

这种方法的问题在于，用户登录信息以明文形式发送到服务器，没有 SSL 加密。[但是，当对https://example.com](https://example.com)执行相同的 POST 请求时，NGINX 会以 401 Unauthorized 响应。

我们可以通过哪些方式使用[https://example.com/user_api](https://example.com/user_api)作为授权 URL？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T15:07:19.420

你真的应该为整个网站使用 https，包括登录页面。不允许常规 http。如果你这样做，你遇到的问题就会消失。

即使登录页面上没有敏感数据，您也应该对整个站点使用 https 的原因是加密通信只是 SSL 的一半。另一半（这对于保护您的用户同样重要）是服务器的标识。当使用 https 检索站点时，通过检查其证书来验证远程服务器的标识，该证书使用其私钥签名。此证书已针对受信任的第三方进行验证，因此用户知道他们确实在与您的服务器通话。

如果您不对整个站点使用 https，那么恶意服务器就可以轻松冒充您的站点并获取用户的凭据。更好的是，由于这种设计，他们可以将您的用户登录到您的应用程序并将他们转发到正确的页面，没有人更聪明！

另一个原因是，当大团队在开发 Web 应用程序时，很容易有人不小心创建了一个应该安全但使用 http 的页面。这可能是一个很大的安全漏洞。

请考虑重新设计以将 https 用于您的整个网站。这是更多的前期工作，但安全性的回报是巨大的。

# json - 在 JSON 中查找值

> ID：15596190
> 
> 赞同：1
> 
> 时间：2013-03-24T07:34:28.853
> 
> 标签：json, python-2.7, dictionary

我要做的是找到关键“符号”下的市场价值。

使用此代码，我得到了错误

```
File "C:\Python27\bitcoinAPI", line 9, in getmarket
    for key, value in data.items():
AttributeError: 'list' object has no attribute 'items' 
```

这是代码：

```
def getmarket():
    page = urllib2.urlopen("http://bitcoincharts.com/t/markets.json")
    data = json.load(page)
    for key, value in data.items():
        if ["symbol"] == "mtgoxUSD":
            print ["symbol"]
getmarket() 
```

我也试过这个

```
for key, value in data.itervalues():
for key, value in data.iteritems(): 
```

他们都说列表没有属性 iterwhatever

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T07:46:13.223

解码您指定的 json 后，该`json.load`方法返回一个列表而不是字典。错误消息是指列表`data`没有`items`方法的事实。

此外，此表达式: `["symbol"] == "mtgoxUSD"`, 将始终返回 false，因为您正在将具有单个元素 ( `"symbol"`) 的列表与字符串进行比较`"mtgoxUSD"`。

此代码可能会帮助您：

```
def getmarket():
    page = urllib2.urlopen("http://bitcoincharts.com/t/markets.json")
    data = json.load(page)
    for elem in data:
        if elem['symbol'] == "mtgoxUSD":
            print elem 
```

# java - subClass sc = new subClass() 和 superClass sc = new subClass 有什么区别？

> ID：15596193
> 
> 赞同：4
> 
> 时间：2013-03-24T07:34:39.410
> 
> 标签：java, object, initialization

```
class superClass {}

class subClass extends superClass{}

public class test
{

    public static void main()

{

    superClass sc1 = new subClass();
    subClass sc2 = new subClass();
    //whats the difference between the two objects created using the above code?

}
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-24T07:37:12.560

简单说明：当你使用

```
SuperClass obj = new SubClass(); 
```

只有在 中定义的公共方法`SuperClass`是可访问的。中定义的方法`SubClass`不是。

当你使用

```
SubClass obj = new SubClass(); 
```

中定义的公共方法`SubClass`也可以与`SuperClass`公共方法一起访问。

在这两种情况下创建的对象是相同的。

前任：

```
public class SuperClass {

  public void method1(){

  }
}

public class SubClass extends SuperClass {
  public void method2()
  {

  }
}

SubClass sub = new SubClass();
sub.method1();  //Valid through inheritance from SuperClass
sub.method2();  // Valid

SuperClass superClass = new SubClass();
superClass.method1();
superClass.method2(); // Compilation Error since Reference is of SuperClass so only SuperClass methods are accessible. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T07:36:14.643

> 使用上述代码创建的两个对象有什么区别？

这两个对象完全相同。不同的是存储对象引用的变量的类型。在实践中，这意味着如果有任何特定于 的方法`subClass`，您将能够通过`sc2`但不能通过`sc1`（后者需要强制转换）来访问它们。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-24T07:38:47.710

在这两种情况下，`subClass`都会创建 的对象，但引用会有所不同。

使用`superClass`ie的引用`sc1`，您将无法调用存在于 中`subClass`但不存在于`superClass`. 您将需要强制转换来调用这些`subClass`方法。

喜欢 ：

```
class superClass {
   public void superClassMethod(){
   }
}

class subClass extends superClass{
   public void subClassMethod(){
   }
} 
```

现在 ：

```
public class test
{
  public static void main(){

    superClass sc1 = new subClass();
    subClass sc2 = new subClass();
    //whats the difference between the two objects created using the above code?

    sc2.subClassMethod(); //this is valid

    sc1.subClassMethod(); // this is a compiler error, 
                          // as no method named subClassMethod
                          // is present in the superClass as the
                          // reference is of superClass type

   // for this you require a type cast

   (subClass)sc1.subClassMethod(); // Now this is valid

  }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-24T07:36:04.400

对象是一样的。但是，因为`sc1`被声明为类型，所以`superClass`您不能`subClass`在不强制转换的情况下对其使用方法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-06-14T10:31:26.727

除了上面的答案，因为构造的对象实际上是一个类型的对象， `SubClass`您可以将其转换为`SubClass`并调用方法：

```
SuperClass superClass = new SubClass();
superClass.method1();
((SubClass)superClass).method2(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-24T08:44:51.780

只是这样想。当您使用父级（超类）引用时，您将只能访问父级拥有的事物（变量、方法）。但是如果您使用孩子的引用，您将获得父母和孩子所拥有的一切（孩子从父母那里继承属性）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-12-26T05:59:30.043

```
public class SuperClass {

      public void method1(){

      }

 public void method3(){

      }

    }

    public class SubClass extends SuperClass {
      public void method2()
      {

      }
@override
 public void method3(){

      }
    }

    SubClass sub = new SubClass();
    sub.method1();  //Valid through inheritance from SuperClass
    sub.method2();  // Valid 
    sub.method3();//valid 

   superClass sc1 = new subClass();
    superClass.method1();
superClass.method2();////compilation error: cannot find symbol method
superClass.method3();//run over ridden version

superClass sc1 = new subClass(); 
```

您可以为引用 sc1 调用 SuperClass 中定义的所有方法，（实际上是持有一个 Subclass 对象），这是因为子类实例拥有其超类的所有属性。

但是，您不能调用引用 sc1, 的子类中定义的方法。

// 不能调用子类中的方法，因为 sc1 是超类引用

这是因为 sc1 是对超类的引用，它不知道子类中定义的方法。

sc1 是对超类的引用，但包含其子类的对象。但是，引用 sc1 保留其内部标识。在我们的示例中，子类覆盖方法 Method3 。sc1.Method3 调用在子类中定义的覆盖版本，而不是在超类中定义的版本。这是因为 sc1 实际上在内部持有一个子类对象。

# linux - 如何计算 Bash 变量中的字符数

> ID：15596199
> 
> 赞同：80
> 
> 时间：2013-03-24T07:35:26.843
> 
> 标签：linux, bash

如何计算 bash 变量中的所有字符？例如，如果我有

```
"stackoverflow" 
```

结果应该是

```
"13" 
```

* * *

## 回答 #1

> 赞同：106
> 
> 时间：2013-03-24T07:43:37.993

使用`${#VAR}`语法将计算变量中的字符数。

[https://www.gnu.org/software/bash/manual/bashref.html#Shell-Parameter-Expansion](https://www.gnu.org/software/bash/manual/bashref.html#Shell-Parameter-Expansion)

* * *

## 回答 #2

> 赞同：72
> 
> 时间：2015-03-11T13:21:44.097

使用带有*print the byte counts* ( ) 选项的[wc](http://linux.die.net/man/1/wc)实用程序：*`-c`*

 *```
$ SO="stackoverflow"
$ echo -n "$SO" | wc -c
    13 
```

您必须使用*不输出尾随换行符*( `-n`) 选项`echo`。否则，换行符也将被计算在内。

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2013-03-24T07:51:51.353

```
jcomeau@intrepid:~$ mystring="one two three four five"
jcomeau@intrepid:~$ echo "string length: ${#mystring}"
string length: 23 
```

链接 [计算一个句子中的字符，单词，单词的长度和总长度](https://stackoverflow.com/questions/8736856/bash-script-to-count-word-charcters-in-string)

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2013-03-24T07:41:39.063

```
${#str_var} 
```

`str_var`你的字符串在哪里。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-10-03T10:18:06.837

您可以使用 wc 来计算文件 wc -m filename.txt 中的字符数。希望有所帮助。*

# python - 如何将时间戳插入 GQL DateTimeProperty()？

> ID：15596208
> 
> 赞同：1
> 
> 时间：2013-03-24T07:36:51.097
> 
> 标签：python, google-app-engine, datetime, python-2.7, gql

我的 cron 工作的目标是将带有时间戳的推文保存到 Google App Engine 的数据存储中。我无法弄清楚如何以时间戳形式保存数据（当前保存为字符串）。理想情况下，我想将其保存为 DateTimeProperty 以便更轻松地对条目进行排序。我正在努力解决两个特别的问题：

1.  正确使用 time.mktime()，以及
2.  将正确的格式化值放入 GQL

该字段在 json 中的格式如下：

```
s = "Wed, 20 Mar 2013 05:39:25 +0000" 
```

我尝试使用[datetime](http://docs.python.org/2/library/datetime.html)模块来解析这个字符串：

```
timestr = datetime.datetime.strptime(s, "%a, %b %Y %d %H:%M:%S +0000")
when = datetime.fromtimestamp(time.mktime(timestr)) 
```

总结一下，这是我的 cron.py 文件的片段：

```
result = simplejson.load(urllib.urlopen(twitterurl))
for item in result['results']:

g = ""
try:
    g = simplejson.dumps(item['geo']['coordinates'])
except:
    pass

timestr = datetime.datetime.strptime(str(item['created_at']), "%a, %b %Y %d %H:%M:%S +0000")
when = datetime.fromtimestamp(time.mktime(timestr))

tStore = TweetsFromJSON(user_id=str(item['from_user_id']),
                        user=item['from_user'], 
                        tweet=unicodedata.normalize('NFKD', item['text']).encode('ascii', 'ignore'),
                        timestamp=when,
                        iso=item['iso_language_code'], 
                        geo=g
                        ) 
```

数据存储的模型将是：

```
class TweetsFromJSON(db.Model):
    user = db.TextProperty()
    user_id = db.TextProperty()
    tweet = db.TextProperty()
    timestamp = db.DateTimeProperty()
    iso = db.StringProperty()
    geo = db.StringProperty() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T09:39:38.853

您应该使用以下格式来扫描时间字符串`datetime.strptime`：

```
"%a, %d %b %Y %H:%M:%S %z" 
```

这在 Python 3 中可以正常工作：

```
Python 3.3.0 (default, Mar 22 2013, 20:14:41) 
[GCC 4.2.1 Compatible FreeBSD Clang 3.1 ((branches/release_31 156863))] on freebsd9
Type "help", "copyright", "credits" or "license" for more information.
>>> from datetime import datetime
>>> s = 'Wed, 20 Mar 2013 05:39:25 +0000'
>>> datetime.strptime(s, "%a, %d %b %Y %H:%M:%S %z")
datetime.datetime(2013, 3, 20, 5, 39, 25, tzinfo=datetime.timezone.utc) 
```

请注意，这会返回一个`datetime`对象，因此不需要进一步的操作。

不幸的是，这在 Python 2 中不起作用；

```
Python 2.7.3 (default, Jan 17 2013, 21:23:30) 
[GCC 4.2.1 Compatible FreeBSD Clang 3.0 (branches/release_30 142614)] on freebsd9
Type "help", "copyright", "credits" or "license" for more information.
>>> from datetime import datetime
>>> s = 'Wed, 20 Mar 2013 05:39:25 +0000'
>>> datetime.strptime(s, "%a, %d %b %Y %H:%M:%S %z")
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/local/lib/python2.7/_strptime.py", line 317, in _strptime
    (bad_directive, format))
ValueError: 'z' is a bad directive in format '%a, %d %b %Y %H:%M:%S %z' 
```

这似乎是 Python 2.7 中的一个错误。[文档](http://docs.python.org/2/library/datetime.html#strftime-and-strptime-behavior)中提到了 ，但其中`%z`的代码`/usr/local/lib/python2.7/_strptime.py`不包含与之匹配的正确正则表达式。

作为 Python 2 的解决方法，您可以尝试以下方法：

```
>>> datetime.strptime(s[:-6], "%a, %d %b %Y %H:%M:%S")
datetime.datetime(2013, 3, 20, 5, 39, 25) 
```

这只是切断了最后 6 个字符。这只有在时区偏移量有符号和四位数字时才能正常工作。另一种选择是使用`split`and `join`：

```
>>> datetime.strptime(' '.join(s.split()[:-1]), "%a, %d %b %Y %H:%M:%S")
datetime.datetime(2013, 3, 20, 5, 39, 25) 
```

据我了解，您必须自己扫描时区信息，创建一个自定义[`tzinfo`](http://docs.python.org/2/library/datetime.html#tzinfo-objects)子类（使用`FixedOffset`链接文档中的类示例）并将`datetime.replace()`其放入`datetime`对象中。

# java - 通过 Java servlet 访问 heroku 和 neo4j

> ID：15596212
> 
> 赞同：0
> 
> 时间：2013-03-24T07:37:14.323
> 
> 标签：java, heroku, neo4j

我开始使用 Heroku 和 Neo4j。我有一个 servlet，它在本地运行以插入一些节点并在它们之间创建关系。当我在 Heroku 使用相同的代码时，我没有收到任何错误，但什么也没发生。

我尝试在 Neo4j 上使用 webadmin 手动插入节点，然后在代码中读回它，它再次在本地工作，但在 Heroku 没有任何反应。再次没有错误消息。

这是代码：

```
String dbPATH = System.getenv("NEO4J_URL")+"/db/data";
String dbName = "/mnt/e67f2f314/data/graph.db";
String dbLoc = dbPATH+dbName;
GraphDb=new GraphDatabaseFactory().newEmbeddedDatabase(dbLoc); 
```

然后我使用：

```
ExecutionEngine engine = new ExecutionEngine(GraphDb);
int length=-1;
try{
    ExecutionResult result = engine.execute("start n=node(*) return n");
    if (result == null){
        length = 0;
    } else
    {
        for (@SuppressWarnings("unused")
            Map<String, Object> row:result){
                length++;   
            }
    }
} catch (NullPointerException e) {
//  _log.error(e.getMessage(),e);
    length=-2;
} 
```

长度为 0，因此返回一个空对象。我使用 heroku run bash 然后 java -cp 来运行 jar 文件。

heroku 配置：NEO4J_URL： [http://xxx:xxx@e67f2f314.hosted.neo4j.org](http://xxx:xxx@e67f2f314.hosted.neo4j.org)：

我在传递给 newEmbeddedDatabase 的 dbLoc 上尝试了一些变体，但没有任何效果。

我将不胜感激有关在 Heroku 上实现 Java 和 Neo4j 以运行 servlet 的任何链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T10:10:41.427

Heroku 上的 Neo4j 只能通过 REST 访问，因此您不能使用嵌入式。因此，您需要修改应用程序的以下依赖项：

```
<dependency>
    <groupId>org.neo4j</groupId>
    <artifactId>neo4j-rest-graphdb</artifactId>
    <version>[your version]</version>
</dependency> 
```

初始化如下：

```
RestAPI restAPI = new RestAPIFacade(System.getenv("NEO4J_URL"), 
   System.getenv("NEO4J_USERNAME"), 
   System.getenv("NEO4J_PASSWORD"));
GraphDatabaseService gds = new RestGraphDatabase(restAPI);
RestCypherQueryEngine rcqe = RestCypherQueryEngine(restAPI); 
```

然后只需使用`rcqe.query()`.

# javascript - highslide - 你能在同一页面上合并 YouTube 和图片吗？

> ID：15596216
> 
> 赞同：-1
> 
> 时间：2013-03-24T07:37:52.940
> 
> 标签：javascript, highslide

我研究了 highslide.com 脚本，并计划在我的网站上使用它。

我已经下载了文件，包括示例中所示的 youtube.html 和 gallery-white.html。我打算将这两个脚本合并到一个页面中。我看到他们使用了 highslide-with-gallery.js 和 highslide-with-html.js。这意味着对于具有这两个 javascript 文件的初学者来说，我的页面应该超过 150KB。

将这些文件组合成一个文件的理想方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T08:05:39.740

只需使用 highslide-full.js，它就是完整的脚本。highslide-with-gallery.js 和 highslide-with-html.js 脚本都是完整脚本的子集，有很多重叠。您*永远不*应该在一个页面上加载两个版本的 Highslide 脚本。这样做会产生一些致命的碰撞。

如果您担心大小，请使用 highslide-full.min.js，它是完整脚本的缩小版本。

# delphi - 两个向量之间的角度

> ID：15596217
> 
> 赞同：3
> 
> 时间：2013-03-24T07:38:07.700
> 
> 标签：delphi, math

所以，我试图在 Delphi 中获得两个 TPoints 之间的角度，结果比我预期的要难。我得到的结果我无法解释（似乎是“度数”部分的一些问题，或者 ArcTan2 没有以我预期的形式返回总和。-Delpi-v7：

```
function Modulo(x,y:Extended): Extended;
var d: Extended;
begin
  d := x / y;
  Result := (d - floor(d)) * y;
end;

function Degrees(Rads: Extended): Extended;
begin
  Result := Rads*(180/Pi);
end;

function GetPointAngle(P1, P2: TPoint): Extended;
begin
  Result := Modulo(Degrees(ArcTan2(-(P1.Y - P2.Y), P1.X - P2.X)) - 90, 360);
end; 
```

然而，当我将代码移植到 Python 或在另一个 Pascal 变体中对其进行测试时，上述方法**可以正常工作**。但是现在，它似乎返回了一个静态的总和（如果我“移动”第二个 TPoint 不会改变）。

如果您想知道；我创建了“模”函数只是因为“模”运算符中使用的除数运算符舍入为 0，而不是向下舍入（因此负数不起作用）。

编辑：我注意到，当远离另一个点（反之亦然）时，返回的值（角度）会`GetPointAngle()`增加，即使 TPoint ( ) 沿第二个 TPoint ( ) 的 X 轴拖动。`p``c``p``c`

**编辑**：

你们已经超越了自己，我查看了大部分答案，似乎很难选择最佳答案！既然你们都写得这么详细，我会用同样的细节来处理所有的事情:-)

另外：我在最初的帖子中没有分享的是，我的函数被导出为一个 DLL，可以从另一个 pascal 解释器（与 delphi 兼容）访问。

**最后的解决方案**（更改）：

`GetPointAngle(P1, P2: TPoint)`至：`GetPointAngle(const P1, P2: TPoint)`

^*我不明白声明常量的必要性...*

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-24T08:51:58.790

我假设您要计算相对于在这两个点之间形成的线的 X 轴的角度。

![在此处输入图像描述](../Images/df8d926492fe7cd5db3ac42093e082f3.png)

对于这种情况，以下公式适用：

```
Tan(a) = (P2.Y - P1.Y) / (P2.X - P1.X) 
```

翻译为：

```
a = ArcTan((P2.Y - P1.Y) / (P2.X - P1.X)) 
```

当两个点的X坐标相同时，这显然会导致`EDivByZero`异常，因此您必须自己处理。此外，`ArcTan`导致角度在 0°..90° 范围内（即 0..π/2），因此忽略正确的象限，而`ArcTan2`导致角度在 -180°..180° 范围内。将 360° 添加到结果以将负角度转换为正角度：

```
function AngleOfLine(const P1, P2: TPoint): Double;
begin
  if P2.X = P1.X then
    if P2.Y > P1.Y then
      Result := 90
    else
      Result := 270
  else
    Result := RadToDeg(ArcTan2(P2.Y - P1.Y, P2.X - P1.X));
  if Result < 0 then
    Result := Result + 360;
end; 
```

结果是：

```
 A := AngleOfLine(Point(10, 10), Point(20, 10)); // 0
  A := AngleOfLine(Point(10, 10), Point(20, 20)); // 45
  A := AngleOfLine(Point(10, 10), Point(10, 20)); // 90
  A := AngleOfLine(Point(10, 10), Point(0, 20));  // 135
  A := AngleOfLine(Point(10, 10), Point(0, 10));  // 180
  A := AngleOfLine(Point(10, 10), Point(0, 0));   // 225
  A := AngleOfLine(Point(10, 10), Point(10, 0));  // 270
  A := AngleOfLine(Point(10, 10), Point(20, 0));  // 315 
```

现在，这是相对于世界坐标系的，默认情况下其正 Y 轴指向上方。如果要将结果转换为正 Y 轴指向下方的设备坐标系，则从 360° 中减去结果：

```
Result := 360 - Result; 
```

### 更新：

似乎`ArcTan2`确实处理了除以零，（即使在 D7 中，尽管有文档），所以例程变得更加简单：

```
function AngleOfLine(const P1, P2: TPoint): Double;
begin
  Result := RadToDeg(ArcTan2((P2.Y - P1.Y),(P2.X - P1.X)));
  if Result < 0 then
    Result := Result + 360;
end; 
```

### 编辑：

> 我注意到，当远离另一点`GetPointAngle()`时，返回的值会增加（反之亦然）。`p``c`

那要看。查看上图，如果第二个点沿 x 轴进一步移动，则角度会减小。如果第二个点沿 y 轴进一步移动，则角度会增加。当然，这取决于两个点都在哪个象限。

此外，您的代码否定 的第一个参数`ArcTan2`并从结果中减去另一个 90°。我不知道您的意思是什么以及是否是故意的，但这可能是意外结果的根源。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-24T08:27:24.570

我想你正在寻找的是两个向量之间的角度。即图中的 θ：

![在此处输入图像描述](../Images/4a9e65de3eb69d58ad06b81972a81027.png)

代数点积在几何上可以表示为 <v [1] ,v [2] > = |v [1] ||v [2] |cos θ。这可以重新排列以找到 θ = cos ^(-1) <v [1] ,v [2] >/(|v [1] ||v [2] |)。

```
function DotProduct(const v1, v2: TPoint): Integer;
begin
  Result := v1.X*v2.X + v1.Y*v2.Y;
end;

function Magnitude(const v: TPoint): Double;
begin
  Result := Sqrt(Sqr(v.X)+Sqr(v.Y));
end;

function AngleBetweenVectors(const v1, v2: TPoint): Double;
var
  Magv1, Magv2: Double;
begin
  Magv1 := Magnitude(v1);
  Magv2 := Magnitude(v2);
  if abs(Magv1*Magv2)=0.0 then
    Result := 0.0
  else
    Result := ArcCos(EnsureRange(DotProduct(v1,v2)/(Magv1*Magv2), -1.0, 1.0));
end; 
```

以弧度返回一个角度。`RadToDeg()`您可以使用from单位将其转换为度数`Math`。

现在，解释你的问题的另一种方法是你想取两个点并在它们之间形成一条线。然后找到那条线和水平线之间的角度，比如说。如此图所描述的：

![在此处输入图像描述](../Images/9e31eafbcc2ec8eaf22d29fcd3754020.png)

仍然可以表示为两个向量之间的角度。第一个向量是 p [2] -p [1]，另一个是水平方向的向量 (0, 1)。把这两个喂进去`AngleBetweenVectors`，你就有答案了。如果要测量垂直角度，则可以使用相同的想法。

希望这里有足够的内容供您解决问题，无论它实际上是什么。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T09:53:13.253

以下代码使用 Delphi 7 和 FPC 2.7.1 返回相同的结果，并且看起来是正确的。
所以主要问题是：我们期待什么，我们拥有什么？

```
program Project2;

{$APPTYPE CONSOLE}
uses
    Math;

{.$define speed}

function CalcAngle(const lx, ly: extended): extended; {$ifdef speed} inline; {$endif}
begin
    Result := RadToDeg(ArcTan2(ly, lx));
end;

function Modulo(x, y: extended): extended; {$ifdef speed} inline; {$endif}
var
    d: extended;
begin
    d := x / y;
    Result := (d - floor(d)) * y;
end;

function Degrees(Rads: Extended): Extended;
begin
  Result := Rads*(180/Pi);
end;

function Modulo2(x: extended): extended; {$ifdef speed} inline; {$endif}
begin
    if x < 0 then
        Result := 360 + x
    else
        Result := x;
end;

function GetPointAngle(const lx, ly: integer): Extended;
begin
    Result := Modulo(Degrees(ArcTan2(ly, lx)) - 90, 360);
end;

procedure OutTest(const lx, ly: extended);
var
    a: extended;
begin
    a := CalcAngle(lx, ly);
    Writeln(
        a: 10: 4,
        Modulo(a - 90, 360):10:4,
        GetPointAngle(round(lx), round(ly)):10:4);
end;

begin
    OutTest(2, 0);
    OutTest(0, 2);
    OutTest(-2, 2);
    OutTest(-2, -2);
    OutTest(2, 3);
    OutTest(100, 2);
    Readln;
end. 
```

# sql - 如何将关系（具有属性）转换为关系模式/sql？

> ID：15596222
> 
> 赞同：1
> 
> 时间：2013-03-24T07:39:10.003
> 
> 标签：sql, database

我对数据库设计比较陌生。

我最近了解到 EER 中的关系可以拥有属性，因此构建了以下实体。

图书馆成员 (memberID)

书籍（bookID）

两个实体通过关系“reserve”连接，每本书可以被0到1个LibraryMember预约，每个LibraryMember可以预约0到多本书。

现在，问题来了。我已将时间和日期等属性分配给“保留”关系，但我不知道如何将其转换为关系模式。LibraryMembers 和 Books 之间的关系不是多对多的，是否仍然可以创建一个名为“reserve”的表来链接它们？

（我被告知只有当关系从多到多 EER 映射时才会创建一个附加表）

非常感谢您的帮助，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T08:16:33.660

您可以像这样在预订中映射成员和书籍

```
CREATE TABLE members(
member_id INT,
member_name VARCHAR(64),
PRIMARY KEY(member_id)
);

CREATE TABLE books(
book_id INT,
title VARCHAR(64),
PRIMARY KEY(book_id)
);

CREATE TABLE reservations(
reservation_id INT,
book_id INT,
member_id INT,
reservation_date DATETIME,
PRIMARY KEY(reservation_id),
CONSTRAINT FOREIGN KEY (book_id) REFERENCES books (book_id),
CONSTRAINT FOREIGN KEY (member_id) REFERENCES members (member_id)
); 
```

但是您仍然需要实现防止一本书同时被预订两次的逻辑，就像@Najzero 评论的那样。

# ruby - 依赖于本质上随机的实例变量的测试方法

> ID：15596223
> 
> 赞同：2
> 
> 时间：2013-03-24T07:39:20.003
> 
> 标签：ruby, unit-testing

我正在开发二十一点游戏。我的游戏对象包含一个牌组对象，该牌组在牌组达到一定程度的穿透后会被洗牌。我的许多方法都依赖于这个甲板对象。我看不出有任何理由可以通过 setter 方法访问甲板对象。我在测试我的 Game 类上的方法时遇到了麻烦，因为它们取决于牌组的顺序，这是随机的。

例如，我有 deal_hand 方法。

```
def deal_hand(player)
    reset_deck if @deck.size < 2
    player.hands.push(Hand.new(*@deck.pop(2)))
end 
```

我应该如何测试这样的方法？我在想我可以手动创建一个在 @deck 实例变量中使用的 Deck 对象。不幸的是，我不能设置实例变量，我也不想添加一个设置器，因为除了测试之外没有理由让它成为“可设置的”。我应该从我的测试文件中修补类并添加一个设置器吗？

顺便说一句——我主要编写脚本——我决定在这个项目失控后开始编写测试。是否有“测试模式”的规范资源？

编辑：

我正在使用支持存根/模拟的 MiniTest。尽管据我所知，它只允许您为模拟对象上的方法调用设置预期的返回值。如果我制作了一个 Mock 甲板，实际的甲板对象也取决于一个内部数组。没有调用卡片组的代码直接访问数组。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T08:12:50.920

使用模拟库。RSpec 自带一个，但我不喜欢它，所以我将向您展示它的样子[Surrogate](http://github.com/JoshCheek/surrogate)，我写的那个：

```
class Deck
  def pop(n)  end
  def reset() end
  def size()  end
end

class Game
  def initialize(deck)
    @deck = deck
  end

  def deal_hand(player)
    reset_deck if @deck.size < 2
    player.hands.push(Hand.new(*@deck.pop(2)))
  end

  def reset_deck
    @deck.reset
  end
end

Hand = Struct.new :card1, :card2

class Player
  def hands
    @hands ||= []
  end
end

require 'surrogate/rspec'
class MockDeck
  Surrogate.endow self
  define(:reset)
  define(:pop)  { |n| n.times.to_a }
  define(:size) { 1 }
end

describe Game, 'deal_hand' do
  let(:deck)   { MockDeck.new }
  let(:player) { Player.new }
  let(:game)   { Game.new deck }

  it 'resets the deck if there are less than 2 cards' do
    deck.will_have_size 2 # set the return value of deck.size
    game.deal_hand player
    deck.was_not told_to :reset # assert what happened to the deck

    deck.will_have_size 1
    game.deal_hand player
    deck.was told_to :reset
  end

  it 'deals the top 2 cards to the player' do
    deck.will_pop [:card1, :card2]
    game.deal_hand player
    deck.was told_to(:pop).with(2)
    player.hands.last.should == Hand.new(:card1, :card2)
  end
end

describe Deck do
  it 'is substitutable for the mock' do
    # because we use the mock in tests
    # we want to make sure its interface matches the real deck
    Deck.should substitute_for MockDeck
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T07:42:04.970

你考虑过使用[mocha](http://gofreerange.com/mocha/docs/)吗？

这将允许您对 Deck 进行存根或模拟，以确保它具有您的测试运行所需的卡片。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T07:54:37.407

在您的测试中使用方法 instance_variable_set，它是对象上的 ruby​​ 方法。

所以我假设你的方法在 Game 类中，所以如果你正在设置类似的东西

```
@test_deck = something_that_sets_up_state_of_test_deck

@game = Game.new
@game.instance_variable_set(:deck, @test_deck 
```

这将在 Game 中设置您的实例变量，而无需显式构建 attr_accessible 或 getter 和 setter。

# oracle - 来自 EF 数据库的评论

> ID：15596229
> 
> 赞同：0
> 
> 时间：2013-03-24T07:40:26.340
> 
> 标签：oracle, entity-framework, comments

是否可以将表列上的 Oracle 数据库注释导入到生成的 EF 类中，作为每个生成属性的 [DisplayName("column comment")] 注释？

例如你有这个表

```
employee
column-name   type          comment
ID            integer       Personnel Code
NAME          varchar2(30)  Employee Name
ADDData       date          Start Date 
```

当从这个表中创建 EF 类时，我喜欢生成这个类

```
public class Employee
{
    [DisplayName("Personnel Code")]
    public int Id { set; get; }

    [DisplayName("Employee Name")]
    public string Name { set; get; }

    [DisplayName("Start Date")]
    public DateTime AddDate { set; get; }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T13:57:54.073

是的，您可以使用 T4 文本模板生成您的实体上下文和 POCO。

[来自维基百科](http://en.wikipedia.org/wiki/Text_Template_Transformation_Toolkit)

> Microsoft 的文本模板转换工具包（通常称为“T4”）是 Visual Studio 中包含的基于模板的文本生成框架。T4 源文件通常由文件扩展名“.tt”表示。
> 
> 开发人员将 T4 用作应用程序或工具框架的一部分，以自动创建具有各种参数的文本文件。这些文本文件最终可以是任何文本格式，例如代码（例如 C#）、XML、HTML 或 XAML。

[这里](http://msdn.microsoft.com/en-us/data/ff717739.aspx)有 Julie Lerman 的视频示例。

[这](https://github.com/damieng/DamienGKit/tree/master/T4/MultipleOutputHelper)是从单个 T4 模板创建多个文件的绝佳实用程序。

# android - Android：为用户提供替代上下文菜单

> ID：15596230
> 
> 赞同：0
> 
> 时间：2013-03-24T07:40:27.670
> 
> 标签：android, android-intent, android-menu

在 android 上，每当用户长按文本字段时，他们都会获得一个上下文菜单，其中包含“复制”、“粘贴”、“全选”等选项。现在，我知道我无法将自己的项目添加到此菜单，系统范围 - android 不会也不应该让我这样做。但我可以从头开始编写自己的上下文菜单，并且每当用户长按文本视图时，他们将获得两个选项 - 1\. 系统上下文菜单 2\. 我自己的菜单。

我知道这可以做到，但我不知道使用什么 API 调用来实现这一点。执行类似操作的现有应用程序：

1.  Swype 键盘：此键盘应用程序会覆盖系统键盘。因此，当用户单击文本视图键入内容时，他们会得到两个选项，即 - 1\. 默认系统键盘，或 2\. 用户安装的 Swype 键盘。用户还可以选择将其中之一设为默认值。

2.  同样，Go Launcher Ex：系统范围内每当我们按下“主页”按钮时，我们都有两个选项 - 显示常规主屏幕，或显示 Go Launcher 主屏幕。

非常感谢任何建议或参考材料。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T07:45:08.710

您的两个示例都是使用 Intent 过滤器完成的。但是，EditText 的上下文菜单未使用 Intent 显示，因此不能以这种方式覆盖。

您可以使用 onContextMenu 和相关 API 覆盖应用程序中的菜单，但其他应用程序无法这样做。

# performance - 提高 d3 的性能？

> ID：15596234
> 
> 赞同：-3
> 
> 时间：2013-03-24T07:40:52.317
> 
> 标签：performance, map, d3.js, datapoint

我对 d3.js 在地图上显示点的性能有一些问题。

[我正在使用我在这里找到的这段漂亮的代码作为我的代码https://gist.github.com/bobuss/1985684](https://gist.github.com/bobuss/1985684)的起点

基本上链接上的代码所做的是在地图上绘制点并绘制曲线以连接线。但是，当我尝试添加更多数据点（大约 300 个）时，它会以某种方式使我的浏览器崩溃或延迟很多

所以我想知道在这种情况下是否有任何方法可以真正提高性能..

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T21:03:13.613

我考虑使用 d3 来显示一些基因组数据（散点图​​上的 23k 点）。

它只是无法工作，当您添加 23k dom 节点时，大多数浏览器都会崩溃，并且如果您尝试进行一些交互（悬停，单击），您最终会遇到太多事件侦听器并且一切都死了。

我喜欢 d3，我从 protovis 时代就开始使用它，但根据我的经验，它在几千个元素之后变得无法使用，每次我不得不创建这样的图表时，我最终都从头开始构建它并在画布上实现它。最后你会遇到一系列全新的问题——实现你自己的命中测试、事件、模拟悬停......

这是一场噩梦。

JS 中的“大数据”图表没有很好的解决方案，至少据我所知没有。

老实说，这是一种耻辱，看到我的 MacBookPro 以最大速度旋转他的风扇并且浏览器没有响应——因为我试图在 i7 8GB ram 机器上绘制 25k 点，这是一派胡言。

但这就是当我们尝试将浏览器用于不该做的事情时得到的结果。是的，2D GPU 加速有帮助，但作用不大。

# mysql - “查询期间丢失与 MySQL 服务器的连接”错误

> ID：15596236
> 
> 赞同：1
> 
> 时间：2013-03-24T07:41:30.980
> 
> 标签：mysql, mysqlconnection

我有 MySQL 5.5.20 和这张表：

```
mysql> desc country;
+----------------+-------------+------+-----+---------+-------+
| Field          | Type        | Null | Key | Default | Extra |
+----------------+-------------+------+-----+---------+-------+
| id             | int(255)    | NO   | PRI | NULL    |       |
| iso            | varchar(2)  | NO   |     | NULL    |       |
| name           | varchar(80) | NO   |     | NULL    |       |
| printable_name | varchar(80) | NO   |     | NULL    |       |
| iso3           | varchar(3)  | YES  |     | NULL    |       |
| numcode        | smallint(6) | YES  |     | NULL    |       |
+----------------+-------------+------+-----+---------+-------+ 
```

如果我运行这样的查询

```
SELECT country.ID, country.ISO, country.NAME,
   country.PRINTABLE_NAME, country.ISO3, country.NUMCODE
FROM country; 
```

它返回：

```
ERROR 2013 (HY000): Lost connection to MySQL server during query 
```

如果我像这样更改列的顺序（例如 PRINTABLE_NAME 之前的 ISO3）：

```
SELECT country.ID, country.ISO, country.NAME,
   country.PRINTABLE_NAME,  country.NUMCODE, country.ISO3
FROM country; 
```

它工作正常！

或者，如果我为列使用小写字母重写查询，它也可以工作。

这个问题不时出现（大约一个月一次），修复它的唯一解决方案是重新启动 MySQL！我检查了错误日志，这就是我在其中的内容：

```
130310 11:01:23 [Warning] /usr/sbin/mysqld: Forcing close of thread 401108  user: 'root' 
```

我真的很困惑，不知道为什么会这样！关于如何解决这个问题的任何想法？

# angularjs - Angular：切换显示布局的最佳指令 - ng-show？

> ID：15596244
> 
> 赞同：3
> 
> 时间：2013-03-24T07:42:37.967
> 
> 标签：angularjs

我想实现一个具有多种显示类型的结果列表（线、网格、详细与否等，...）

做到这一点的最佳方法是什么？

我正在考虑使用`ng-show`，但我想知道性能，隐藏元素是否以某种方式处理，或者是否可以使用 4 或 5 种类型的布局并一次显示一个`ng-show`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T09:28:28.527

你可以`ng-switch`改用。不同的是它只渲染满足条件的元素。但是话又说回来，如果您最初预加载它们并只是显示/隐藏，它们之间的切换会很快，而初始加载会更长（稍微）。与`ng-switch`您在一起时，每个显示都会有一定的渲染时间。

我会说`ng-show`除非您有大量数据，否则可以使用。试一试，看看什么更适合你。

甚至`ng-view`可能是一种选择。

# haskell - 在 if 中执行 readLine

> ID：15596248
> 
> 赞同：3
> 
> 时间：2013-03-24T07:43:34.060
> 
> 标签：haskell, io

我在 Haskell 中编写了一个小型命令行实用程序，它应该接受带有可选命令行参数的命令 - 但如果该参数不存在，则应提示用户输入它*。例如：

```
$ my_prog add item_name
Adding... done

$ my_prog add
Enter item name: item_name
Adding... done 
```

我最初的尝试看起来像这样：

```
add args = do
    let id = if length args > 0
        then head args
        else input where
            input <- readLine
    -- Do stuff with id
    putStrLn id 
```

无法在`<-`.

*我已经决定这是一个愚蠢的想法，但我想我还是会问这个问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-24T08:00:50.483

您正在尝试在`do`内部使用 -notation `if`，这将不起作用（此外，由于整个`if`在`IO`monad 之外，因此不会进行类型检查）。

```
add args = do
    id <- if length args > 0
              then return $ head args
              else readLine
    putStrLn id 
```

# asp.net - 登录到一个 ASP.net 网站会注销托管在同一服务器上的另一个网站？

> ID：15596260
> 
> 赞同：1
> 
> 时间：2013-03-24T07:45:04.623
> 
> 标签：asp.net, forms-authentication

有两个具有相同域但需要不同身份验证的网站。但是当两个网站都在同一个浏览器上登录时，后者会注销前一个。我可以看到这种情况正在发生，因为当一个用户登录到一个网站时，会发出不同的表单身份验证票，这会更新第一个身份验证票。为什么两个网站都使用相同的身份验证票？如何防止一个网站的身份验证票更新另一个网站。

我的配置文件如下所示

```
<authentication mode="Forms">
  <forms  loginUrl="~/Login.aspx" name=".ASPXFORMSAUTH" defaultUrl="~/Default/Home.aspx"    protection="All" timeout="10" slidingExpiration="true" requireSSL="false"/>
 </authentication> 
```

以下用于签发一个网站的身份验证票

```
 FormsAuthentication.SetAuthCookie(userid,true); 
```

对于另一个网站，以下使用。此外，这两个网站都有不同的用户 ID

```
 var ticket = new FormsAuthenticationTicket(1,userid, DateTime.Now,
                                                                       DateTime.Now.AddMinutes(90), false,string.Empty, FormsAuthentication.FormsCookiePath);
string cookieStr = FormsAuthentication.Encrypt(ticket);
var cookie = new HttpCookie(FormsAuthentication.FormsCookieName, cookieStr);

Response.Cookies.Add(cookie); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T09:43:07.413

如果两个站点都是子域，则在 webconfig 中设置 cookie 域，例如 subdomain.domain.com 否则 cookie 将跨 domain.com 工作

请参阅[本地 IIS 上跨子域的表单身份验证](https://stackoverflow.com/questions/8278015/forms-authentication-across-sub-domains-on-local-iis)

了解更多信息

克里斯

# hta - 动态添加和删除 HTA 组件

> ID：15596268
> 
> 赞同：2
> 
> 时间：2013-03-24T07:46:14.173
> 
> 标签：hta

谁能帮助我如何在 HTA 中动态删除文本框？

此代码动态*添加*文本框：

```
Sub AddTextBox
    strHTML = DataArea.InnerHTML strHTML=strHTML&"<tr><td>Source Path</td><td><input type="&Chr(34)& _ "text"&Chr(34)&">"&"</td><td><button type="&Chr(34)&"button"&Chr(34)& _ "onclick="&Chr(34)&"RemoveTextBox"&Chr(34)&">"&"x"&"</button></td></tr>"
    DataArea.InnerHTML = strHTML
    tabHTML = tabHTML & strHTML
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-31T22:44:03.567

我相信这与您正在寻找的相似，这至少会给您一个可以构建的工作示例。该`Window_OnLoad`子例程加载初始内容，然后新创建的内容包含一个按钮，单击该按钮会删除文本框/按钮并添加一个标记为 的新按钮`Add Again?`。这个新按钮可以`Window_OnLoad`再次调用子程序并重新加载原始内容。

```
<html>
<head>
<title>Dynamically Add Controls</title>
<HTA:APPLICATION
  APPLICATIONNAME="Dynamically Add Controls"
  ID="Dynamically_Add_Controls"
  VERSION="1.0"/>
</head>

<script language="VBScript">

Sub Window_OnLoad
    strHTML = "<tr><td>Source Path</td><td><input type="& Chr(34)& "text"&Chr(34)&">"&"</td><td><button type="&Chr(34)&"button"&Chr(34)& "onclick="&Chr(34)&"RemoveTextBox"&Chr(34)&">"&"Remove All?"&"</button></td></tr>"
    DataArea.InnerHTML = strHTML
End Sub

Sub RemoveTextBox()
    strHTML = "<td><button type="&Chr(34)&"button"&Chr(34)& "onclick="&Chr(34)&"Window_OnLoad"&Chr(34)&">"&"Add Again?"&"</button></td></tr>"
    DataArea.InnerHTML = strHTML
End Sub

</script>

<body bgcolor="white">
    <table border="0" cellspacing="0" cellpadding="0">
        <tr>
            <td valign="top"><Div id="DataArea"></Div></td>
        </tr>
    </table>
</body>
</html> 
```

# android - 离线中转路由算法

> ID：15596271
> 
> 赞同：2
> 
> 时间：2013-03-24T07:46:30.930
> 
> 标签：android, algorithm, routing, android-maps, openstreetmap

我正在为 Android 开发离线地图和导航应用程序作为我的最后一年项目。该应用程序必须提供类似于 Google Transit 的公交路线规划。目前我正在一个小城市作为原型工作，效率现在不是问题。

但是，我不知道有任何现成的 Java 框架可以帮助我实现这样的功能，我也不知道有任何算法可以帮助我编写自己的代码。

谁能指导我从哪里开始，或者通过指向我的代码示例，或者至少路由理论页面来帮助我编写自己的代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T09:43:14.287

**理论与算法：**
如果您还没有读过它，[最短路径问题](http://en.wikipedia.org/wiki/Shortest_path_problem)主要是大多数旅程规划算法正在处理的挑战。在 wiki 页面上，阅读“算法”部分以获取可能的解决方案列表（[Dijkstra](http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm)可能是最受欢迎的）。有一些专门针对公共交通的算法变体，例如[RAPTOR](http://research.microsoft.com/apps/pubs/default.aspx?id=156567)。

**模型和旅程规划器：**
根据您的工作范围，设计一个模型并自行实施整个旅程规划器可能是最重要的。

我建议您以[GTFS 格式](https://developers.google.com/transit/gtfs/)（非常简单，基于 CSV 文件）提供您的数据（站点、连接、时间……），然后使用诸如[OpenTripPlanner](https://github.com/openplans/OpenTripPlanner/wiki)之类的旅程规划器。它考虑了几个计划因素，并且可以导入您提供的 GTFS 数据。OpenTripPlanner还有一个[Android 实现](https://github.com/marchica/OpenTripPlanner-for-Android/wiki)，但我不确定它有多先进。

**替代方案：**
除了 GTFS/OpenTripPlanner，欧洲还有一个广泛使用的标准来模拟运输信息，称为[Transmodel](http://www.transmodel.org/)，并支持“JourneyWeb”等规划引擎。许多当地的运输供应商（包括我所在城市的一家）在 Transmodel 之上构建他们的服务。但我认为这将更难实现（另外我不确定许可证和免费/开放实现），所以我会坚持上述解决方案。

# ubuntu-12.04 - Ubuntu 12.04 LTS bash：sudo：找不到命令

> ID：15596278
> 
> 赞同：15
> 
> 时间：2013-03-24T07:47:45.857
> 
> 标签：ubuntu-12.04, sudo, apt-get

我是 Linux 终端的新手，现在我尝试使用 sudo、apt-get、whereis 等，linux 中的命令返回错误 bash: sudo: command not found

我的命令

```
 $sudo apt-get install libc6-dev 
```

错误是

```
 bash: sudo: command not found. 
```

请让我知道这里可能是什么问题，提前谢谢

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-03-24T08:02:30.547

尝试使用 su 登录

```
$ su - 
```

并安装须藤

```
# apt-get install sudo 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T07:51:56.160

也许它没有安装？打开你的包管理器并安装 sudo 包。

另外，尝试使用完整路径（如果您已安装）

```
/usr/bin/sudo 
```

如果该命令有效，则将其包含`/usr/bin/`在您的环境变量 PATH 中`~/.bashrc`

```
echo "export PATH="$PATH:/usr/bin"" >> ~/.bashrc 
```

希望有效..

# web-services - Web服务中的标记是什么意思？

> ID：15596280
> 
> 赞同：-2
> 
> 时间：2013-03-24T07:48:11.877
> 
> 标签：web-services, soap, wsdl, tagging

我知道并且我一直致力于在博客文章中进行标记..etc 我刚刚看到一篇论文，其中介绍了如何在 Web 服务中自动标记。但是，在 Web 服务的情况下标记到底是什么意思？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T15:47:04.317

*   标签是分配给一条信息的非分层关键字或术语。
*   这种元数据对 Web 服务进行了简要描述，使用户更容易找到合适的服务，对 Web 服务进行分类，使 Web 服务管理更加有效。
*   标签允许文档之间的交叉浏览。
*   标签可以作为搜索引擎的关键字，这有助于提高搜索引擎的性能。
*   标签还可以用作查询扩展系统和推荐系统中的功能。

# eclipse - 带有方法参数类型名称的 Eclipse 自动完成

> ID：15596282
> 
> 赞同：0
> 
> 时间：2013-03-24T07:48:23.767
> 
> 标签：eclipse, autocomplete

目前我通过 Eclipse 自动完成得到了这个结果。

```
System.console().printf(format, args) 
```

当然，Eclipse 将参数类型显示为弹出窗口，但我也希望将类型显示在参数名称的前面。像这样。

```
System.console().printf(String format, Object ... args)    // `String`, `Object` inserted automatically. 
```

我可以配置 Eclipse 来显示参数类型吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T16:14:09.520

当然不是。Eclipse 自动完成只建议有效的语法，而您的需求不是有效的 java 代码。

您的替代方法可能是打开“声明”视图或“JavaDoc”视图。在您键入时，两者都将始终显示当前选定元素的声明/JavaDoc。因此，您可以在编写该方法调用时看到方法声明/javadoc。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-06-30T08:50:30.990

*更新* 遇到这个老问题的人。现在可以使用eclipse代码挖掘了：

[Eclipse 的参数名称提示](https://stackoverflow.com/questions/42926238/parameter-name-hint-for-eclipse/58198356#58198356)

# javascript - Javascript未提交隐藏字段值

> ID：15596283
> 
> 赞同：0
> 
> 时间：2013-03-24T07:48:23.937
> 
> 标签：javascript, forms

我有将值提交给隐藏的基本示例。但它似乎不想在我的职能中发挥我的价值。也许我们缺少一些东西。

```
<script language="JavaScript">
function submitForm() {
document.statusform.do.value = "checkstatus";
document.statusform.submit();
}
</script>

<form action="" method="GET" enctype="multipart/form-data" id="statusform">
<input type="hidden" name="do" id="do" value="">
<input type="submit" class="button" name="submit" value="Resume Request" onClick="submitForm();" /></form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T08:00:47.497

首先，你在这部分错了：

```
document.statusform.do.value = "checkstatus";
document.statusform.submit(); 
```

在 firefox 错误控制台中会显示一个错误：

> 错误：TypeError：document.statusform 未定义

将该代码更改为：

```
document.forms['statusform'].do.value = "checkstatus";
document.forms['statusform'].submit(); 
```

其次，从提交按钮中删除名称属性。

更改此部分：

```
<input type="submit" class="button" name="submit" value="Resume Request" onClick="submitForm();" /></form> 
```

至：

```
<input type="submit" class="button" value="Resume Request" onClick="submitForm();" /></form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T07:59:28.377

改变

```
<form action="" method="GET" enctype="multipart/form-data" id="statusform"> 
```

至

```
<form action="" method="GET" enctype="multipart/form-data" name="statusform"> 
```

# mysql - 如何使用mysql命令将以下csv导入mysql？

> ID：15596286
> 
> 赞同：0
> 
> 时间：2013-03-24T07:48:46.567
> 
> 标签：mysql, text, csv, data-import

如何使用 mysql 命令将以下 csv 导入 mysql 表？

```
##
#File name : proj.csv
 #line 1 are the field headers
 #record 1 starts at line 2, ends at line 583
 #from line 2 "<!DOCTYPE" to line 582 "</html>" are actually text blob of
 #record 1 's "html" field
##

line 1: "proj_name","proj_id","url","html","proj_dir"
line 2: "Autorun Virus Remover",1,"http://www.softpedia.com/get/Antivirus/Autorun-Virus-Remover.shtml","<!DOCTYPE HTML PUBLIC ""-//W3C//DTD HTML 4.01 Transitional//EN"" ""http://www.w3.org/TR/html4/loose.dtd"">
line 3: <html>
line 4: <head profile=""http://a9.com/-/spec/opensearch/1.1/"">
...
line 582: </html>
line 583: ","Antivirus/Autorun-Virus-Remover" 
```

问题是目标csv文件中有一个文本blob字段（名为“html”，其中包含多行文本），所以我不能使用'\n'作为记录分隔符，否则它会说“第 1 行不包含所有列的数据”。万分感谢 ！！！

# php - 检查变量是否是 PDO 对象？

> ID：15596290
> 
> 赞同：4
> 
> 时间：2013-03-24T07:50:28.260
> 
> 标签：php, mysql, pdo

我有一个用于处理 SQL 的通用函数。我收到了这个错误（一天只有几次，不经常）。

```
PHP Catchable fatal error:  Object of class PDO could not be converted to string in... 
```

基本上，为我正在使用的函数传递了一个值数组，我必须在我的代码中滑倒并在该数组中放置了一个 PDO 对象。

我需要创建一个 array_filter 函数来检查变量是否是 PDO 对象。我该如何为此做一个简单的 if 语句？

```
if($var == PDO) 
```

编辑：感谢您的精彩回答！如果有人感兴趣，这就是我解决问题的方法。我能够找到无效输入的来源。

```
$before=$original_array;
$after = array_filter($before, "find_error");
if(count($before)!=count($after)){
    $error=print_r(debug_backtrace(false),true);
    $arr=print_r($before,true);
    send_message("admin@email.com","Error Report",$arr.$error); 
//send_message is a simple function for sending emails. You could also write information to a txt file, etc.
}

function find_error($var){
    return !($var instanceof PDO);
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-24T07:53:24.770

instanceof 用于判断 PHP 变量是否为某个类的实例化对象：

```
if($var instanceof PDO) {
   // your code
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T08:16:48.130

1.  你试图治愈症状而不是疾病。
2.  你只是出于猜测而尝试它。

你想要做的就是所谓的“错误信息抑制”。有了好心人已经给你带来的期望`if`声明，你只是闭上眼睛假装程序流程没有错误。虽然它仍然存在。

一个好的程序员必须问“如何追踪错误以及如何修复它”，而不是“如何堵嘴”。

因此，您必须使用`debug_backtrace()`跟踪添加错误数据的位置。此功能必须放置在您的错误消息标记的行中。
然后您需要调试代码以确保您添加 PDO 结果的假设是正确的。
最后修复错误。

在我写这个答案时，您似乎设法以正确的方式解决了问题。但我必须把它留给未来的读者。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-24T07:55:12.433

您可以为此使用[instanceof 。](http://php.net/instanceof)

```
if($var instanceof PDO){
    //code here
} 
```

然而你说

> 我一定是在我的代码中滑倒并在该数组中放置了一个 PDO 对象

我建议您找出并纠正错误，否则您可能会在继续开发时为自己存储其他问题，并可能将该数组传递给应用程序的其他部分。

始终解决问题，而不是专注于治疗症状。

# javascript - 向数组添加元素不会增加其长度

> ID：15596292
> 
> 赞同：3
> 
> 时间：2013-03-24T07:51:10.003
> 
> 标签：javascript, arrays

我已经编写了将其`arrvar`变量设置为接收到的参数的函数。然后我为该函数添加了一些方法：

*   `setArray`: 将参数添加到末尾`arrvar`
*   `showArray`: 输出数组`arrvar`
*   `showArrayType`: 输出数组的类型`arrvar`（总是对象）
*   `showLength`: 输出数组的长度`arrvar`

这里的问题是，当我如下所示调用时，长度`arrvar`不会增加。`setArray()`为什么会这样？

```
 function ArrayClass()
    {            
        if (arguments.length != 0) {
            this.arrvar = arguments;
        }        
    }

    ArrayClass.prototype.setArray = function () {
        for (var i = this.arrvar.length, j = 0; j < arguments.length; i++, j++)
        {
            this.arrvar[i] = arguments[j];                
        }            
    }

    ArrayClass.prototype.showArray = function ()
    {
        for (var i in this.arrvar) {
            document.writeln(this.arrvar[i]+'  ');
        }
        document.writeln("<br />");
    }

    ArrayClass.prototype.showArrayType = function ()
    {
        document.writeln(typeof this.arrvar + '<br />');
    }

    ArrayClass.prototype.showLength = function()
    {
        if (this.arrvar) {
            document.writeln('Length: ' + this.arrvar.length + "<br />");
        }
    }

    var arrObj = new ArrayClass(11, 22, 33, 44);
    arrObj.showArray();  //11  22  33  44
    arrObj.showArrayType();  //object
    arrObj.showLength();  //4
    arrObj.setArray(55, 66, 77); 
    arrObj.showArray();   //11  22  33  44  55  66  77
    arrObj.showArrayType();  //object
    arrObj.showLength();  //**4** 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T08:03:01.433

您的问题`arguments`不是数组，而是某种数组，例如集合。您可以将其转换为这样的数组`this.arrvar = Array.prototype.slice.call(arguments, 0);`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T08:08:06.530

我看不到这个`ArrayClass`功能的任何用途。为什么不直接使用原生 javascript`Array`对象？无论如何，您的代码可以短得多，例如（替换`document.write`为`console.log`此处）：

```
function ArrayClass(){            
   this.arrvar = [].slice.call(arguments) || [];
}

ArrayClass.prototype.setArray = function () {
   this.arrvar = this.arrvar.concat([].slice.call(arguments));
}

ArrayClass.prototype.showArray = function() {
   for (var i=0;i<this.arrvar.length;i+=1) {
    console.log(this.arrvar[i]);
   }
}

ArrayClass.prototype.showArrayType = function()  {
    console.log(typeof this.arrvar + '<br />');
}

ArrayClass.prototype.showLength = function() {
    console.log('Length: ' + this.arrvar.length);
} 
```

[**JsFiddle**](http://jsfiddle.net/KooiInc/BAcc7/)演示了这一点，*并*使用 native 演示了相同的`Array`。

# python - Python 3.2 - 将单词转换为小写和至少有 3 个字母的单词列表中的回文数

> ID：15596293
> 
> 赞同：-3
> 
> 时间：2013-03-24T07:51:24.983
> 
> 标签：python, return, return-value, python-3.2, palindrome

我有一个随机的单词文件，其中一些是回文，有些不是。其中一些回文长度为 3 个或更多字母。我如何计算它们？我想知道如何使条件更好。我以为我可以长度，但我的答案一直是 0，我知道这不是真的，因为我有 .txt 文件。我在哪里搞砸了？

```
number_of_words = []

with open('words.txt') as wordFile:
    for word in wordFile:
       word = word.strip()
       for letter in word:
           letter_lower = letter.lower()

def count_pali(wordFile):
    count_pali = 0
    for word in wordFile:
        word = word.strip()
        if word == word[::-1]:
            count_pali += 1
    return count_pali

print(count_pali)

count = 0
for number in number_of_words:
    if number >= 3:
       count += 1

print("Number of palindromes in the list of words that have at least 3 letters: {}".format(count)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T08:29:11.083

在循环之前，您的代码看起来不错：

```
for number in number_of_words:
    if number >= 3:
        count += 1 
```

这里的逻辑有问题。如果您考虑 number_of_words 的数据结构，以及您实际要求 python 与 'number >= 3' 条件进行比较的内容，那么我认为您会很好地解决它。

--- 修改外观：

```
# Getting the words into a list
#    word_file = [word1, word2, word3, ..., wordn]
word_file = open('words.txt').readlines()

# set up counters
count_pali, high_score = 0, 0
# iterate through each word and test it

for word in word_file:

    # strip newline character
    word = word.strip()

    # if word is palindrome
    if word == word[::-1]:
        count_pali += 1

        # if word is palindrome AND word is longer than 3 letters
        if len(word) > 3:
            high_score += 1

print('Number of palindromes in the list of words that have at least 3 letter: {}'.format(high_score)) 
```

NOTES: count_pali: 统计回文单词的总数 high_score: 统计长度超过 3 个字母的回文总数 len(word): 如果 word 是回文，将测试单词的长度

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T10:29:49.380

You are looping through `number_of_words` in order to calculate `count`, but `number_of_words` is initialized to an empty list and never changed after that, hence the loop

```
for number in number_of_words:
    if number >= 3:
        count += 1 
```

will execute exactly 0 times

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T00:47:10.547

这并不能直接回答您的问题，但它可能有助于理解我们在这里遇到的一些问题。大多数情况下，您可以看到如何添加到列表中，并希望看到获取字符串、列表和整数长度之间的区别（实际上您做不到！）。

尝试运行下面的代码，并检查发生了什么：

```
def step_forward():
    raw_input('(Press ENTER to continue...)')
    print('\n.\n.\n.')

def experiment():
    """ Run a whole lot experiments to explore the idea of lists and
variables"""

    # create an empty list, test length
    word_list = []
    print('the length of word_list is:  {}'.format(len(word_list)))
    # expect output to be zero

    step_forward()

    # add some words to the list
    print('\nAdding some words...')
    word_list.append('Hello')
    word_list.append('Experimentation')
    word_list.append('Interesting')
    word_list.append('ending')

    # test length of word_list again
    print('\ttesting length again...')
    print('\tthe length of word_list is:  {}'.format(len(word_list)))

    step_forward()

    # print the length of each word in the list
    print('\nget the length of each word...')
    for each_word in word_list:
        print('\t{word} has a length of:  {length}'.format(word=each_word, length=len(each_word)))
        # output:
        #    Hello has a length of:  5
        #    Experimentation has a length of:  15
        #    Interesting has a length of:  11
        #    ending has a length of:  6

    step_forward()

    # set up a couple of counters
    short_word = 0
    long_word = 0

    # test the length of the counters:
    print('\nTrying to get the length of our counter variables...')
    try:
        len(short_word)
        len(long_word)
    except TypeError:
        print('\tERROR:  You can not get the length of an int')
    # you see, you can't get the length of an int
    # but, you can get the length of a word, or string!

    step_forward()

    # we will make some new tests, and some assumptions:
    #     short_word:    a word is short, if it has less than 9 letters
    #     long_word:     a word is long, if it has 9 or more letters

    # this test will count how many short and long words there are
    print('\nHow many short and long words are there?...')
    for each_word in word_list:
        if len(each_word) < 9:
            short_word += 1
        else:
            long_word += 1
    print('\tThere are {short} short words and {long} long words.'.format(short=short_word, long=long_word))

    step_forward()

    # BUT... what if we want to know which are the SHORT words and which are the LONG words?
    short_word = 0
    long_word = 0
    for each_word in word_list:
        if len(each_word) < 9:
            short_word += 1
            print('\t{word} is a SHORT word'.format(word=each_word))
        else:
            long_word += 1
            print('\t{word} is a LONG word'.format(word=each_word))

    step_forward()

    # and lastly, if you need to use the short of long words again, you can
    # create new sublists
    print('\nMaking two new lists...')
    shorts = []
    longs = []
    short_word = 0
    long_word = 0

    for each_word in word_list:
        if len(each_word) < 9:
            short_word += 1
            shorts.append(each_word)
        else:
            long_word += 1
            longs.append(each_word)

    print('short list:  {}'.format(shorts))
    print('long list:  {}'.format(longs))
    # now, the counters short_words and long_words should equal the length of the new lists
    if short_word == len(shorts) and long_word == len(longs):
        print('Hurray, its works!')
    else:
        print('Oh no!')

experiment() 
```

希望当您在这里查看我们的答案并检查上面的小型实验时，您将能够让您的代码完成您需要的工作:)

# mysql - 如何在 JOIN 中包含另一个表

> ID：15596294
> 
> 赞同：-1
> 
> 时间：2013-03-24T07:51:44.353
> 
> 标签：mysql, join

下面是我的mysql查询

```
SELECT 
    opensalesorder.so_number,
    items.VendorName,
    opensalesorder.item_number,
    items_custom_fields.FieldValue AS `Stock Item`,
    vendor_custom_fields.FieldValue AS `Paid Freight Allowance`,
    items.QuantityOnHand,
    items.ReorderPoint,
    items.MaxQty,
    SUM(opensalesorder.quantity_on_order),
    items.PurchaseCost,
    items.VendorName,
    items.VendorName,
    items.PurchaseCost,
    opensalesorder.status,
    items.ItemType
FROM
    vendor,
    `opensalesorder` 
inner join  items 
  on opensalesorder.item_number = items.ItemName
JOIN items_custom_fields 
  ON items_custom_fields.ItemName = items.ItemName
JOIN vendor_custom_fields 
  ON vendor_custom_fields.VName = vendor.VName
WHERE opensalesorder.item_number = items.ItemName 
        and items_custom_fields.FieldName ='Stock Item' 
        and vendor_custom_fields.FieldName ='Paid Freight Allowance' 
        and opensalesorder.status NOT LIKE 'on po'  
        AND opensalesorder.so_number NOT IN ('2','3') 
        AND items.VendorName NOT IN ('Access') 
        AND opensalesorder.item_number NOT IN ('018-0001')  
        group by opensalesorder.item_number
LIMIT 100 
```

在执行此查询时，我收到类似的错误

```
#1054 - Unknown column 'vendor.VName' in 'on clause' 
```

但是我在 FROM 子句中包含了供应商表。这是在 JOIN 中包含表的正确方法吗？那么这个查询有什么问题呢？

**编辑：**

为 opensalesorder 显示创建表

```
CREATE TABLE `opensalesorder` (
  `so_number` decimal(10,0) NOT NULL,
  `item_number` varchar(20) NOT NULL,
  `quantity_on_order` int(11) NOT NULL,
  `quantity_to_order` int(11) NOT NULL,
  `status` varchar(20) NOT NULL,
  `editsequence` text NOT NULL,
  `TxnLineID` text NOT NULL,
  `TxnID` text NOT NULL,
  `dateCreated` date NOT NULL,
  `shipDate` date NOT NULL,
  `customer` text NOT NULL,
  `itemclass` text NOT NULL,
  UNIQUE KEY `unique_mapping` (`so_number`,`item_number`),
  KEY `so_number` (`so_number`),
  KEY `item_number` (`item_number`),
  KEY `status` (`status`)
) 
```

显示为项目创建表

```
CREATE TABLE `items` (
  `ItemName` varchar(30) NOT NULL,
  `VendorName` varchar(40) DEFAULT NULL,
  `QuantityOnHand` int(11) DEFAULT NULL,
  `QuantityOnSalesOrder` int(11) DEFAULT NULL,
  `ReorderPoint` int(11) DEFAULT NULL,
  `PurchaseCost` double DEFAULT NULL,
  `AverageCost` double DEFAULT NULL,
  `SalesPrice` double DEFAULT NULL,
  `PurchaseDesc` varchar(200) DEFAULT NULL,
  `SalesDesc` varchar(200) DEFAULT NULL,
  `ItemType` varchar(30) DEFAULT NULL,
  `FreeCode` int(11) DEFAULT NULL,
  `SubGroup` varchar(10) DEFAULT NULL,
  `DateNewItem` date DEFAULT NULL,
  `Notes` text,
  `MaxQty` int(11) DEFAULT NULL,
  `QuantityOnPO` int(11) DEFAULT NULL,
  PRIMARY KEY (`ItemName`),
  KEY `ItemName` (`ItemName`),
  KEY `VendorName` (`VendorName`)
) 
```

显示为 vendor_custom_fields 创建表

```
CREATE TABLE `vendor_custom_fields` (
  `VName` text NOT NULL,
  `FieldName` text NOT NULL,
  `FieldValue` text NOT NULL,
  `FieldType` text NOT NULL,
  PRIMARY KEY (`VName`(120),`FieldName`(120)),
  FULLTEXT KEY `VName_index` (`VName`)
) 
```

显示为供应商创建表

```
 CREATE TABLE `vendor` (
  `VName` varchar(60) NOT NULL,
  `CompanyName` varchar(100) NOT NULL,
  `Address1` varchar(120) NOT NULL,
  `Address2` varchar(120) NOT NULL,
  `City` varchar(40) NOT NULL,
  `State` varchar(50) NOT NULL,
  `PostalCode` varchar(13) NOT NULL,
  `Phone` varchar(13) NOT NULL,
  `Fax` varchar(13) NOT NULL,
  `AlternatePhone` varchar(13) NOT NULL,
  `AlternateContact` varchar(30) NOT NULL,
  `Email` varchar(40) NOT NULL,
  `AccountNumber` varchar(30) NOT NULL,
  `Balance` double NOT NULL,
  `RepEmail` varchar(40) NOT NULL,
  `FreightAllowance` double DEFAULT NULL,
  `MinimumPOLimit` double DEFAULT NULL,
  `Notes` text NOT NULL,
  PRIMARY KEY (`VName`)
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T11:36:55.167

我认为问题在于将隐含连接与（未隐含的）“声明”连接混合在一起。当我将“供应商”作为常规连接放入时，查询很好。

（我不得不注释掉对“items_custom_fields”的引用，因为您没有包含表定义）

这是一个[小提琴](http://sqlfiddle.com/#!2/c21174/9)。

# postgresql - 查询以获取用户收件箱的最后对话

> ID：15596302
> 
> 赞同：2
> 
> 时间：2013-03-24T07:52:09.810
> 
> 标签：postgresql

我需要一个特定的 SQL 查询来为用户收件箱选择最后 10 个对话。收件箱仅显示与每个用户的对话（线程） - 它从对话中选择最后一条消息并将其显示在收件箱中。

已编辑。

预期结果：`latest message`从每个`10 latest conversations`. Facebook 以相同方式显示最新对话

还有一个问题。如何在`pagination`下一页中显示来自以前最新对话的下 10 条最新消息？

数据库中的私人消息如下所示：

```
| id | user_id | recipient_id | text
| 1  | 2       | 3            | Hi John!
| 2  | 3       | 2            | Hi Tom! 
| 3  | 2       | 3            | How are you? 
| 4  | 3       | 2            | Thanks, good! You? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T08:40:34.440

As per my understanding, you need to get the latest message of the conversation on per-user basis (of the last 10 latest conversations)

**Update:** I have modified the query to get the `latest_conversation_message_id` for every user conversation

The below query gets the details for `user_id = 2`, you can modify, `users.id = 2` to get it for any other user

**[SQLFiddle](http://sqlfiddle.com/#!12/4021d/12)**, hope this solves your purpose

```
SELECT
    user_id, 
    users.name, 
    users2.name as sent_from_or_sent_to,
    subquery.text as latest_message_of_conversation
FROM
    users
    JOIN
    (
    SELECT
        text,
        row_number() OVER ( PARTITION BY user_id + recipient_id ORDER BY id DESC) AS row_num,
        user_id,
        recipient_id,
        id
    FROM
        private_messages
    GROUP BY
        id,
        recipient_id,
        user_id,
        text
    ) AS subquery ON ( ( subquery.user_id = users.id OR subquery.recipient_id = users.id)  AND row_num = 1 )
    JOIN users as users2 ON ( users2.id = CASE WHEN users.id = subquery.user_id THEN subquery.recipient_id ELSE subquery.user_id END )
WHERE
    users.id = 2
ORDER BY
    subquery.id DESC
LIMIT 10 
```

**Info:** The query gets the latest message of every conversation with any other user, If `user_id 2`, sends a message to `user_id 3`, that too is displayed, as it indicates the start of a conversation. The latest message of every conversation with any other user is displayed

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T10:21:39.070

要解决 pg 中的 groupwise-max，您可以使用`DISTINCT ON`. 像这样：

```
SELECT
DISTINCT ON(pm.user_id)
    pm.user_id, 
    pm.text
FROM
    private_messages AS pm
WHERE pm.recipient_id= <my user id>
ORDER BY pm.user_id, pm.id DESC; 
```

[http://sqlfiddle.com/#!12/4021d/19](http://sqlfiddle.com/#!12/4021d/19)

但是，要获得最新的 X，我们必须在子选择中使用它：

```
SELECT
q.user_id,
q.id,
q.text
FROM
(
SELECT
DISTINCT ON(pm.user_id)
    pm.user_id,
pm.id,
    pm.text
FROM
    private_messages AS pm
WHERE pm.recipient_id=2
ORDER BY pm.user_id, pm.id DESC
  ) AS q
ORDER BY q.id DESC
LIMIT 10; 
```

[http://sqlfiddle.com/#!12/4021d/28](http://sqlfiddle.com/#!12/4021d/28)

要同时获取已发送和已接收的线程：

```
SELECT
q.user_id,
q.recipient_id,
q.id,
    q.text
FROM
(
SELECT
DISTINCT ON(pm.user_id,pm.recipient_id)
    pm.user_id,
    pm.recipient_id,
pm.id,
    pm.text
FROM
    private_messages AS pm
WHERE pm.recipient_id=2 OR pm.user_id=2
ORDER BY pm.user_id,pm.recipient_id, pm.id DESC
  ) AS q
ORDER BY q.id DESC
LIMIT 10; 
```

[http://sqlfiddle.com/#!12/4021d/42](http://sqlfiddle.com/#!12/4021d/42)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T07:55:42.297

将其粘贴在 WHERE 子句之后

```
ORDER BY "ColumnName" [ASC, DESC] 
```

[W3Schools 的 UNION 描述](http://www.w3schools.com/sql/sql_union.asp)它结合了这 2 个语句的结果。

```
SELECT "ColumnName" FROM "TableName"
UNION
SELECT "ColumnName" FROM "TableName" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-24T10:28:55.023

对于大型数据集，我认为您可能希望尝试运行这两个语句，然后合并结果，因为对 (user_id 和 id) 或 (recipient_id 和 id) 的索引扫描应该非常有效地获取 10 个最近的对话每种类型。

```
with sent_messages as (
  SELECT   *
  FROM     private_messages
  WHERE    user_id = my_user_id
  ORDER BY id desc
  LIMIT    10),
received_messages as (  SELECT   *
  FROM     private_messages
  WHERE    recipient_id = my_user_id
  ORDER BY id desc
  LIMIT    10),
all_messages as (
  select *
  from   sent_messages
  union all
  select *
  from   received_messages)
select   *
from     all_messages
order by id desc
limit    10 
```

编辑：实际上另一个值得尝试的查询可能是：

```
select *
from   private_messages
where  id in (
         select id
         from   (
           SELECT   id
           FROM     private_messages
           WHERE    user_id = my_user_id
           ORDER BY id desc
           LIMIT    10
           union all
           SELECT   id
           FROM     private_messages
           WHERE    recipient_id = my_user_id
           ORDER BY id desc
           LIMIT    10) all_ids
          order by id desc
          limit 10) last_ten_ids
order by id desc 
```

这在 9.2+ 中可能会更好，其中单独的索引可用于获取 id，或者在要检索的最新数字非常大的情况下。尽管如此，仍然有点不清楚。如果有疑问，我会选择以前的版本。

# jsf - Primefaces 向导从以前的选项卡中删除信息

> ID：15596303
> 
> 赞同：0
> 
> 时间：2013-03-24T07:52:14.287
> 
> 标签：jsf, primefaces, wizard

我是 JSF 的新手。我正在尝试使用 Primefaces 官方网站上的向导组件，但我遇到了一个问题：当移动到下一个选项卡时，前一个选项卡的信息会被删除。我使用了网站上的代码，除了 User bean。当我进行调试时，我看到每次按下 Next 按钮时，都会调用每个字段的 setter，但在前面的步骤中设置的字段为 null。我正在使用 primefaces 3.5 版本和 jsf-api 和 jsf-impl 2.1.18。

这是代码：

用户向导：

```
@ManagedBean(name="userWizardBean")
@SessionScoped
public class UserWizard {

private User user = new User();
private boolean skip;

private static Logger logger = Logger.getLogger(UserWizard.class.getName());

public User getUser() {
    return user;
}

public void setUser(User user) {
   this.user = user;
}

public void save(ActionEvent actionEvent) {
    //Persist user

    FacesMessage msg = new FacesMessage("Successful", "Welcome :" + user.getFirstname());
    FacesContext.getCurrentInstance().addMessage(null, msg);
}

public boolean isSkip() {
    return skip;
}

public void setSkip(boolean skip) {
    this.skip = skip;
}

public String onFlowProcess(FlowEvent event) {
    logger.info("Current wizard step:" + event.getOldStep());
    logger.info("Next step:" + event.getNewStep());

    if(skip) {
        skip = false;   //reset in case user goes back
        return "confirm";
    }
    else {
        return event.getNewStep();
    }
}

} 
```

用户：

```
public class User {

private String firstname;
private String lastname;
private Integer age;
private String street;
private String city;
private String postalCode;
private String info;
private String email;
private String phone;

public User(String firstname, String lastname, Integer age, String street, String city, String postalCode, String info, String email, String phone) {
    this.firstname = firstname;
    this.lastname = lastname;
    this.age = age;
    this.street = street;
    this.city = city;
    this.postalCode = postalCode;
    this.info = info;
    this.email = email;
    this.phone = phone;
}

public User() {

}

public String getFirstname() {
    return firstname;
}

public void setFirstname(String firstname) {
    this.firstname = firstname;
}

public String getLastname() {
    return lastname;
}

public void setLastname(String lastname) {
    this.lastname = lastname;
}

public Integer getAge() {
    return age;
}

public void setAge(Integer age) {
    this.age = age;
}

public String getStreet() {
    return street;
}

public void setStreet(String street) {
    this.street = street;
}

public String getCity() {
    return city;
}

public void setCity(String city) {
    this.city = city;
}

public String getPostalCode() {
    return postalCode;
}

public void setPostalCode(String postalCode) {
    this.postalCode = postalCode;
}

public String getInfo() {
    return info;
}

public void setInfo(String info) {
    this.info = info;
}

public String getEmail() {
    return email;
}

public void setEmail(String email) {
    this.email = email;
}

public String getPhone() {
    return phone;
}

public void setPhone(String phone) {
    this.phone = phone;
}
} 
```

和 xhtml 文件：

```
<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:p="http://primefaces.org/ui"
  xmlns:f="http://java.sun.com/jsf/core">
<h:head>
</h:head>
<h:body>
  <h:form>

    <p:growl id="growl" sticky="true" showDetail="true"/>

    <p:wizard widgetVar="wiz"
              flowListener="#{userWizard.onFlowProcess}">

        <p:tab id="personal" title="Personal">

            <p:panel header="Personal Details">

                <h:messages errorClass="error"/>

                <h:panelGrid columns="2" columnClasses="label, value" styleClass="grid">
                    <h:outputText value="Firstname: *" />
                    <p:inputText required="true" label="Firstname"
                                 value="#{userWizard.user.firstname}" />

                    <h:outputText value="Lastname: *" />
                    <p:inputText required="true" label="Lastname"
                                 value="#{userWizard.user.lastname}" />

                    <h:outputText value="Age: " />
                    <p:inputText value="#{userWizard.user.age}" />

                    <h:outputText value="Skip to last: " />
                    <h:selectBooleanCheckbox value="#{userWizard.skip}" />
                </h:panelGrid>
            </p:panel>
        </p:tab>

        <p:tab id="address" title="Address">
            <p:panel header="Adress Details">

                <h:messages errorClass="error"/>

                <h:panelGrid columns="2" columnClasses="label, value">
                    <h:outputText value="Street: " />
                    <p:inputText value="#{userWizard.user.street}" />

                    <h:outputText value="Postal Code: " />
                    <p:inputText value="#{userWizard.user.postalCode}" />

                    <h:outputText value="City: " />
                    <p:inputText value="#{userWizard.user.city}" />

                    <h:outputText value="Skip to last: " />
                    <h:selectBooleanCheckbox value="#{userWizard.skip}" />
                </h:panelGrid>
            </p:panel>
        </p:tab>

        <p:tab id="contact" title="Contact">
            <p:panel header="Contact Information">

                <h:messages errorClass="error"/>

                <h:panelGrid columns="2" columnClasses="label, value">
                    <h:outputText value="Email: *" />
                    <p:inputText required="true" label="Email"
                                 value="#{userWizard.user.email}" />

                    <h:outputText value="Phone: " />
                    <p:inputText value="#{userWizard.user.phone}"/>

                    <h:outputText value="Additional Info: " />
                    <p:inputText value="#{userWizard.user.info}"/>
                </h:panelGrid>
            </p:panel>
        </p:tab>

        <p:tab id="confirm" title="Confirmation">
            <p:panel header="Confirmation">

                <h:panelGrid id="confirmation" columns="6">
                    <h:outputText value="Firstname: " />
                    <h:outputText styleClass="outputLabel"
                                  value="#{userWizard.user.firstname}" />

                    <h:outputText value="Lastname: " />
                    <h:outputText  styleClass="outputLabel"
                                   value="#{userWizard.user.lastname}"/>

                    <h:outputText value="Age: " />
                    <h:outputText styleClass="outputLabel"
                                  value="#{userWizard.user.age}" />>

                    <h:outputText value="Street: " />
                    <h:outputText styleClass="outputLabel"
                                  value="#{userWizard.user.street}" />

                    <h:outputText value="Postal Code: " />
                    <h:outputText styleClass="outputLabel"
                                  value="#{userWizard.user.postalCode}" />

                    <h:outputText value="City: " />
                    <h:outputText styleClass="outputLabel"
                                  value="#{userWizard.user.city}" />

                    <h:outputText value="Email: " />
                    <h:outputText styleClass="outputLabel"
                                  value="#{userWizard.user.email}" />

                    <h:outputText value="Phone " />
                    <h:outputText styleClass="outputLabel"
                                  value="#{userWizard.user.phone}"/>

                    <h:outputText value="Info: " />
                    <h:outputText styleClass="outputLabel"
                                  value="#{userWizard.user.info}" />

                    <h:outputText />
                    <h:outputText />
                </h:panelGrid>

                <p:commandButton value="Submit" update="growl"
                                 actionListener="#{userWizard.save}"/>

            </p:panel>
        </p:tab>

    </p:wizard>

 </h:form>
</h:body>
</html> 
```

任何帮助或提示将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T14:03:43.073

我已经设法使它工作：刚刚添加：@ManagedBean(name = "userWizard") 和 @ViewScoped 到 UserWizard 类，它工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-09T12:43:36.327

实际上问题出在范围上，因为您提到了会话范围，因此数据仅存储用于单个会话，它应该是视图范围，因为视图范围数据保持存储，除非您被重定向到另一个页面。

我希望它对你有帮助。

# makefile - makefile 递归 -q 模式错误 1

> ID：15596304
> 
> 赞同：0
> 
> 时间：2013-03-24T07:52:29.063
> 
> 标签：makefile, gnu-make

我正在尝试运行“问题模式”的递归调用，但在一个非常独特的场景中出现错误。

我使用的是 MAKE 3.81，并且已经在两个完全独立的环境中进行了测试。

我调用“make -q”，然后那个makefile调用“$(MAKE) -C sub/a/”，然后那个makefile调用“$(MAKE) -f ../../makefile.b”

测试用例尽可能简单。有人可以告诉我为什么会出现此错误：

```
nachum:/home/nachum/makefile_bug[1497]$make -q
make -C sub/a
make[1]: Entering directory `/home/nachum/makefile_bug/sub/a'
make -f ../../makefile.b
make[1]: *** [b] Error 1
make[1]: Leaving directory `/home/nachum/makefile_bug/sub/a'
make: *** [a] Error 2
nachum:/home/nachum/makefile_bug[1498]$ 
```

以下是生成文件：

```
makefile:
a:
        $(MAKE) -C sub/a

sub/a/makefile:
b:
        $(MAKE) -f ../../makefile.b

makefile.b:
all:
        echo hi 
```

这个练习的重点是能够检查是否需要重新编译子项目，以便我可以在必要时正确构建顶级项目。否则我必须对所有内容使用时间戳。（我以前使用过时间戳，但我意识到这会给其他事情带来额外的混乱。）

这个问题有一些奇怪的解决方法。例如，如果（在 makefile 中）的配方在对 $(MAKE) 的调用上方有一个附加行，即：

```
makefile:
a:
        @echo hi
        $(MAKE) -C sub/a 
```

问题消失了，并且依赖项（在我的完整测试用例中）仍然有效。也直接使用 make 似乎会改变行为（与 $(MAKE) 相反）。

任何帮助，将不胜感激。谢谢， 纳楚姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T11:22:07.647

`-q`您的问题是围绕指定的选项漫游。`-q`如果是最新的，将不运行任何命令，但会给出退出状态。当你使用时`${MAKE}` `make -q -C sub/a`被执行。经过一点排列和组合，我发现我们不能使用`-q`with `-C`option。如果您想使用`make --quite`，或者您只想检查时间戳，请尝试使用`-t`（触摸但不编译）或“-n”（试运行）。

# android - android：使用opencv进行图像识别

> ID：15596306
> 
> 赞同：3
> 
> 时间：2013-03-24T07:52:44.937
> 
> 标签：android, opencv, image-recognition

我希望我的 android 应用程序能够识别数百万张图像。所以我想知道 openCv 是否是这个解决方案的选择。我希望将图像与大量（数百万）参考图像进行比较，并查找是否有任何匹配项。使用opencv时这是否可以高效实现

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T01:24:42.147

根据您使用的算法，时间会有所不同。

这[是](https://stackoverflow.com/questions/9748900/logo-detection-using-opencv)关于您要问的内容。正如 Tushar 所说，最好在服务器上进行这些计算并返回结果，而不是在客户端设备上。尽管我将在下面发布的代码在 Galaxy SIII 上显示出惊人的速度。

此外，如果您想要一些示例代码，请查看[此处](https://github.com/torcellite/imageComparator)。

# android - android中的XML SAXParserException

> ID：15596312
> 
> 赞同：2
> 
> 时间：2013-03-24T07:53:28.020
> 
> 标签：android, xml, xpath, xml-parsing, android-xml

使用下面的代码，我试图获取 xml 中的节点列表，但应用程序崩溃并抛出 saxparser 异常。

这是我试图使用的 xml

```
<?xml version="1.0"?><Root><ResponseCode>1</ResponseCode><ResponseMessage>Reported Successfully</ResponseMessage><ResultSet><Post><id>1</id><title>Garbage Problem near my home</title><comment>We the citizens have been facing the problems of garbage since 2004 , kindly fix it , authorities are concerned</comment><imagepath></imagepath><cordx>24.818688</cordx><cordy>67.029686</cordy><tag>Garbage</tag><userid>1</userid><departmentid>1</departmentid><response></response><createdOn>2013-03-23 14:44:43</createdOn><status>2</status></Post></ResultSet></Root> 
```

这是我试图用来从 xml 获取的代码

```
InputSource is = new InputSource();
is.setCharacterStream(new StringReader(result));
XPathFactory factory = XPathFactory.newInstance();
XPath xPath = factory.newXPath();
String code = xPath.evaluate("/Root/ResponseCode/text()", is);
if(code.compareTo("1")==0){
    Log.d("Responce Code", code);
    NodeList nodeList = (NodeList) xPath.evaluate("//Post", is,XPathConstants.NODESET);
for(int i=0; i<nodeList.getLength(); i++){
    Node n=nodeList.item(i);
    Element element = (Element) n;
    Log.d("LIST DATA", element.getElementsByTagName("id").item(0).getTextContent());

    } 
```

这是日志猫：

```
03-24 12:31:16.357: I/Post service Response(901): <?xml version="1.0"?><Root><ResponseCode>1</ResponseCode><ResponseMessage>Reported Successfully</ResponseMessage><ResultSet><Post><id>1</id><title>Garbage Problem near my home</title><comment>We the citizens have been facing the problems of garbage since 2004 , kindly fix it , authorities are concerned</comment><imagepath></imagepath><cordx>24.818688</cordx><cordy>67.029686</cordy><tag>Garbage</tag><userid>1</userid><departmentid>1</departmentid><response></response><createdOn>2013-03-23 14:44:43</createdOn><status>2</status></Post></ResultSet></Root>
03-24 12:31:16.498: D/Responce Code(901): 1
03-24 12:31:16.537: W/System.err(901): org.xml.sax.SAXParseException: Unexpected end of document
03-24 12:31:16.537: W/System.err(901):  at org.apache.harmony.xml.parsers.DocumentBuilderImpl.parse(DocumentBuilderImpl.java:129)
03-24 12:31:16.537: W/System.err(901):  at org.apache.xpath.jaxp.XPathImpl.evaluate(XPathImpl.java:474)
03-24 12:31:16.548: W/System.err(901):  at com.teamgreen.greenit.HistoryActivity$1.run(HistoryActivity.java:69)
03-24 12:31:16.548: W/System.err(901): --------------- linked to ------------------
03-24 12:31:16.548: W/System.err(901): javax.xml.xpath.XPathExpressionException: org.xml.sax.SAXParseException: Unexpected end of document
03-24 12:31:16.577: W/System.err(901):  at org.apache.xpath.jaxp.XPathImpl.evaluate(XPathImpl.java:479)
03-24 12:31:16.577: W/System.err(901):  at com.teamgreen.greenit.HistoryActivity$1.run(HistoryActivity.java:69)
03-24 12:31:16.587: W/System.err(901): Caused by: org.xml.sax.SAXParseException: Unexpected end of document
03-24 12:31:16.587: W/System.err(901):  at org.apache.harmony.xml.parsers.DocumentBuilderImpl.parse(DocumentBuilderImpl.java:129)
03-24 12:31:16.587: W/System.err(901):  at org.apache.xpath.jaxp.XPathImpl.evaluate(XPathImpl.java:474)
03-24 12:31:16.607: W/System.err(901):  ... 1 more 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T21:21:21.183

问题是，一旦 InputStream 被消费了，我们就不能再次使用它了它没有什么可提供的，因此解析失败。通过创建 InputStream 的另一个新对象然后使用它从 xml 获取帖子来解决该问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T04:31:43.153

```
public class SAXXmlParser {
    private static final String ROOT_ELEMENT="Root";

    private String ResponseCode="ResponseCode";
    private String ResponseMessage="ResponseMessage";

    private LinkedHashMap<String,String> resultMap=null;
    private String xml="";

    public SAXXmlParser(String str) {
        this.xml=str;
        resultMap=new LinkedHashMap<String, String>();
    };

    protected InputStream getInputStream() 
    {
        ByteArrayInputStream is=new ByteArrayInputStream(xml.getBytes());
        return is;
    }

    public LinkedHashMap<String,String> parse()
    {
        RootElement root = new RootElement(ROOT_ELEMENT);
        root.setEndElementListener(new EndElementListener()
        {
            public void end()
            {

            }
        });
        root.getChild(ResponseCode).setEndTextElementListener(new EndTextElementListener()
        {
            public void end(String body) 
            {
                resultMap.put("ResponseCode",body);
            }
        });
        root.getChild(ResponseMessage).setEndTextElementListener(new EndTextElementListener()
        {
            public void end(String body) 
            {
                resultMap.put("ResponseMessage",body);
            }
        });

        try 
        {
            Xml.parse(this.getInputStream(), Xml.Encoding.UTF_8, root.getContentHandler());
        } 
        catch (Exception e) 
        {
            throw new RuntimeException(e);
        }
        return resultMap;
    }
} 
```

使用这个示例类，并调用为，

```
LinkedHashMap<String,String> resultMap =new LinkedHashMap<String,String>();
SAXXmlParser parser=new parser(xml);
resultMap =parser.parse();
Log.d("ResponseCode",resultMap.get("ResponseCode"));
Log.d("ResponseMessage",resultMap.get("ResponseMessage")); 
```

# c++ - 从 dll 中的函数返回对象

> ID：15596314
> 
> 赞同：0
> 
> 时间：2013-03-24T07:54:31.290
> 
> 标签：c++, .net, visual-studio-2010, dll

有一个实现此功能的库：

```
extern "C" _declspec(dllexport) int Material() //want to replase int
{
    IMaterial** Materials = new IMaterial*(); //Abstract class
    IMaterial* Material = Materials[0];
} 
```

在 NET 代码中，我想像这样返回：

```
object[] = Material() 
```

如何更改代码 CPP 以使其返回

```
Materials [0] 
```

# c - 尽可能避免使用 mod 运算符会更好吗？

> ID：15596318
> 
> 赞同：65
> 
> 时间：2013-03-24T07:54:43.683
> 
> 标签：c, performance, optimization, modulo

我假设计算一个数字的模是一个有点昂贵的操作，至少与简单的算术测试相比（例如查看一个数字是否超过数组的长度）。如果确实如此，是否更有效地替换例如以下代码：

```
res = array[(i + 1) % len]; 
```

与以下？：

```
res = array[(i + 1 == len) ? 0 : i + 1]; 
```

第一个在眼睛上更容易，但我想知道第二个是否更有效。如果是这样，我是否希望优化编译器在使用编译语言时将第一个片段替换为第二个片段？

当然，这种“优化”（如果它确实是一种优化）并非在所有情况下都有效（在这种情况下，它只有在`i+1`不超过时才有效`len`）。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-03-24T07:57:06.660

我的一般建议如下。使用您认为更容易使用的任何版本，然后配置您的整个系统。仅优化分析器标记为瓶颈的那些代码部分。我敢打赌，模运算符不会在其中。

就具体示例而言，只有基准测试才能判断使用您的特定编译器在您的特定架构上哪个更快。您可能会用[branching](http://software.intel.com/en-us/articles/avoiding-the-cost-of-branch-misprediction)替换 modulo ，而且速度更快是显而易见的。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2016-01-31T13:33:47.973

一些简单的测量：

```
#include <stdio.h>
#include <stdlib.h>

int main(int argc, char *argv[])
{
    int test = atoi(argv[1]);
    int divisor = atoi(argv[2]);
    int iterations = atoi(argv[3]);

    int a = 0;

    if (test == 0) {
        for (int i = 0; i < iterations; i++)
            a = (a + 1) % divisor;
    } else if (test == 1) {
        for (int i = 0; i < iterations; i++)
            a = a + 1 == divisor ? 0 : a + 1;
    }

    printf("%d\n", a);
} 
```

使用 gcc 或 clang with 编译`-O3`，并运行`time ./a.out 0 42 1000000000`（模数版本）或`time ./a.out 1 42 1000000000`（比较版本）导致

*   **模数版本的用户运行时间为**6.25 秒，****
***   **比较版本为1.03 秒**。**

 **（使用 gcc 5.2.1 或 clang 3.6.2；Intel Core i5-4690K @ 3.50GHz；64 位 Linux）

这意味着使用比较版本可能是个好主意。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-09-24T15:05:17.483

好吧，看看 2 种方法来获得“模 3”循环计数器的下一个值。

```
int next1(int n) {
    return (n + 1) % 3;
}

int next2(int n) {
    return n == 2 ? 0 : n + 1;
} 
```

我已经用 gcc -O3 选项（对于常见的 x64 架构）和 -s 来编译它以获取汇编代码。

第一个函数的代码做了一些无法解释的魔法（*）来避免除法，无论如何都使用乘法：

```
addl    $1, %edi
movl    $1431655766, %edx
movl    %edi, %eax
imull   %edx
movl    %edi, %eax
sarl    $31, %eax
subl    %eax, %edx
leal    (%rdx,%rdx,2), %eax
subl    %eax, %edi
movl    %edi, %eax
ret 
```

并且比第二个函数要长得多（我敢打赌要慢得多）：

```
leal    1(%rdi), %eax
cmpl    $2, %edi
movl    $0, %edx
cmove   %edx, %eax
ret 
```

因此，“（现代）编译器无论如何都比你做得更好”并不总是正确的。

有趣的是，使用 4 而不是 3 的相同实验导致第一个函数的 and-masking

```
addl    $1, %edi
movl    %edi, %edx
sarl    $31, %edx
shrl    $30, %edx
leal    (%rdi,%rdx), %eax
andl    $3, %eax
subl    %edx, %eax
ret 
```

但它仍然，而且在很大程度上，不如第二个版本。

更明确地说明做事的正确方法

```
int next3(int n) {
    return (n + 1) & 3;;
} 
```

产生更好的结果：

```
leal    1(%rdi), %eax
andl    $3, %eax
ret 
```

(*) 好吧，没那么复杂。乘以倒数。计算整数常数 K = (2^N)/3，以获得足够大的 N 值。现在，当您想要 X/3 的值时，而不是除以 3，计算 X*K，并将其移位 N位置向右。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-08-20T19:36:19.890

这是一些额外的基准。请注意，我还添加了一个无分支版本：

```
#include <iostream>
#include <array>
#include <algorithm>
#include <random>
#include <chrono>
using namespace std::chrono;

constexpr size_t iter = 1e8;

int main() {
  std::minstd_rand rnd_engine{1234};
  std::uniform_int_distribution<int> dist {-1000, 1000};
  auto gen = [&]() { return dist(rnd_engine); };

  std::array<int, 10> a;
  std::generate( a.begin(), a.end(), gen);

  for (size_t size = 2; size < 10; size++) {
    std::cout << "Modulus size = " << size << '\n';

    {
      std::cout << "operator%  ";
      long sum = 0;
      size_t x = 0;
      auto start = high_resolution_clock::now();
      for (size_t i = 0; i < iter; ++i) {
        sum += a[x];
        x = (x + 1) % size;
      }
      auto stop = high_resolution_clock::now();
      std::cout << duration_cast<microseconds>(stop - start).count()*0.001
                << "ms\t(sum = " << sum << ")\n";
    }

    {
      std::cout << "ternary    ";
      long sum = 0;
      size_t x = 0;
      auto start = high_resolution_clock::now();
      for (size_t i = 0; i < iter; ++i) {
        sum += a[x];
        x = ((x + 1) == size) ? 0 : x + 1;
      }
      auto stop = high_resolution_clock::now();
      std::cout << duration_cast<microseconds>(stop - start).count()*0.001
                << "ms\t(sum = " << sum << ")\n";
    }

    {
      std::cout << "branchless ";
      long sum = 0;
      size_t x = 1;
      auto start = high_resolution_clock::now();
      for (size_t i = 0; i < iter; ++i) {
        sum += a[x-1];
        x = ( x != size ) * x + 1;
      }
      auto stop = high_resolution_clock::now();
      std::cout << duration_cast<microseconds>(stop - start).count()*0.001
                << "ms\t(sum = " << sum << ")\n";
    }

  }
  return 0;
} 
```

这是我的 i7-4870HQ 上的输出

```
$ g++ -Ofast test.cpp && ./a.out
Modulus size = 2
operator%  904.249ms    (sum = -4200000000)
ternary    137.04ms     (sum = -4200000000)
branchless 169.182ms    (sum = -4200000000)
Modulus size = 3
operator%  914.911ms    (sum = -31533333963)
ternary    113.384ms    (sum = -31533333963)
branchless 167.614ms    (sum = -31533333963)
Modulus size = 4
operator%  877.3ms      (sum = -36250000000)
ternary    97.265ms     (sum = -36250000000)
branchless 167.215ms    (sum = -36250000000)
Modulus size = 5
operator%  891.295ms    (sum = -30700000000)
ternary    88.562ms     (sum = -30700000000)
branchless 167.087ms    (sum = -30700000000)
Modulus size = 6
operator%  903.644ms    (sum = -39683333196)
ternary    83.433ms     (sum = -39683333196)
branchless 167.778ms    (sum = -39683333196)
Modulus size = 7
operator%  908.096ms    (sum = -34585713678)
ternary    79.703ms     (sum = -34585713678)
branchless 166.849ms    (sum = -34585713678)
Modulus size = 8
operator%  869ms        (sum = -39212500000)
ternary    76.972ms     (sum = -39212500000)
branchless 167.29ms     (sum = -39212500000)
Modulus size = 9
operator%  875.003ms    (sum = -36500000580)
ternary    75.011ms     (sum = -36500000580)
branchless 172.356ms    (sum = -36500000580) 
```

在这种特殊情况下，三元运算符看起来要好得多，当分支预测器上升时，它变得更加如此。但是请注意，这是一个非常特殊的情况：如果我们不按非常量值递增索引，则使用更通用`operator%`的方法会很简单，而其他两种方法可能会变得非常复杂。

我想强调这个被低估的评论：

> *如果 len 是编译时常量，则最近的 GCC 编译器（带有 -02）* *通常会做一些聪明的事情，通常会避免目标处理器的模数机器* *指令。*——[巴西尔·斯塔林克维奇](https://stackoverflow.com/users/841108/basile-starynkevitch)

例如，通过删除`size`变量上的循环并在`const size_t size = 4;`我得到时声明它：

```
g++ -Ofast test.cpp && ./a.out
Modulus size = 4
operator%  62.103ms     (sum = -36250000000)
ternary    93.674ms     (sum = -36250000000)
branchless 166.774ms    (sum = -36250000000) 
```

* * *

## 结论

无分支版本的执行时间在各种场景中都相当稳定。在考虑的情况下，三进制始终优于无分支，尤其是在分支预测器启动时。最后，`operator%`虽然更通用且速度明显较慢，但在特定 const 值的情况下，有机会优化以成为最快的的右手边。

当然，这完全取决于平台，谁知道这将如何在 Arduino 上进行 :)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-04-17T14:12:29.853

如果代码中的“len”足够大，那么条件会更快，因为分支预测器几乎总是会正确猜测。

如果不是，那么我相信这与循环队列密切相关，在这种情况下，长度通常是 2 的幂。这将使编译器能够用简单的 AND 替换模。

代码如下：

```
#include <stdio.h>
#include <stdlib.h>

#define modulo

int main()
{
    int iterations = 1000000000;
    int size = 16;
    int a[size];
    unsigned long long res = 0;
    int i, j;

    for (i=0;i<size;i++)
        a[i] = i;

    for (i=0,j=0;i<iterations;i++)
    {
        j++;
        #ifdef modulo
            j %= size;
        #else
            if (j >= size)
                j = 0;
        #endif
        res += a[j];
    }

    printf("%llu\n", res);
} 
```

大小=15：

*   模数：4,868s
*   条件：1,291s

大小=16：

*   模数：1,067s
*   条件：1,599s

在 gcc 7.3.0 中编译，带有 -O3 优化。机器是i7 920。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-09-05T23:08:41.613

我阅读了有关制作快速哈希图的文章。瓶颈可以是模算子来找到哈希桶。他们建议将您的存储桶数设为 2 的幂。显然，通过 2 的幂进行取模就像查看最后 n 位一样。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-01-31T02:21:36.870

模运算符很昂贵，但除法也很昂贵。因此，将您的代码从使用模运算符转换为除法不会优化您的代码。

```
 (i + 1) % len 
```

优化上面的代码

```
if ((i+1)==len){
   return 0
} else {
   return i+1
} 
```

* * *

## 回答 #8

> 赞同：-3
> 
> 时间：2013-03-24T08:02:33.513

在大多数架构（例如 x86 上的 DIV）上，可以使用单个处理器指令来完成取模。但是，这可能是您需要的过早优化。**

# c++ - 如何在 char[] 中找到短路回文子序列

> ID：15596324
> 
> 赞同：0
> 
> 时间：2013-03-24T07:55:47.490
> 
> 标签：c++, char, substring, palindrome

我正在寻找 char[] 中最短的回文。除了获取每个字符并检查其周围的字符之外，该怎么做`O(n^2)`？

# .net - 对已编译的 DLL 进行签名的批处理文件命令集？

> ID：15596325
> 
> 赞同：0
> 
> 时间：2013-03-24T07:55:49.080
> 
> 标签：.net, assembly-signing

签署已编译的批处理文件命令集是`.NET DLL`什么？

这个问题的答案应该做[这里](http://buffered.io/posts/net-fu-signing-an-unsigned-assembly-without-delay-signing/)描述的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T08:05:01.040

```
SET INSTR_PATH=your.compiled.dll
SET SNK_FILE=your.key.snk

SET IL_PATH=%INSTR_PATH%.il
SET SIGNED_PATH=%INSTR_PATH%.signed.dll

ildasm "%INSTR_PATH%" /out:"%IL_PATH%"
ilasm "%IL_PATH%" /dll /key="%SNK_FILE%" /output="%SIGNED_PATH%" 
```

# mysql - where="1234" 不等于 where=1234

> ID：15596327
> 
> 赞同：0
> 
> 时间：2013-03-24T07:55:56.813
> 
> 标签：mysql, sql, where

对于这里的 sql 专业人士来说，这可能是一个简单的问题：如何使用数据库（一个字段`varchar(30)`）进行以下查询，得到不同的结果：

```
SELECT field FROM table WHERE field=1234; 
```

返回：

```
1234
1234 
```

和

```
SELECT field FROM table WHERE field="1234"; 
```

返回：

```
1234 
```

因此，第一个查询似乎两次返回结果 1234，第二个查询是否只返回一次结果。数据库中的数据未知。更令人不安的是，数据库中的字段“字段”具有唯一键。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T08:05:57.840

一种可能性是该字段是一个字符串，并且两行包含这些值

```
1234
1234.0 
```

这两个都将与数字 1234 进行比较。

[http://dev.mysql.com/doc/refman/5.5/en/comparison-operators.html](http://dev.mysql.com/doc/refman/5.5/en/comparison-operators.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T07:58:41.843

第一种情况“1234”是正确的，因为字段值不接受重复值。

确保没有错误或系统错误：

尝试将相同的东西应用到其中值很少的新表上。使列唯一...并应用带有 "" 和不带 "" 的查询。

结果应仅在第一种带有“”的情况下返回一个值。

问候

# vba - WinWord2007 - 是否有任何直接 VBA 访问样式窗口的样式实例计数？

> ID：15596328
> 
> 赞同：0
> 
> 时间：2013-03-24T07:55:57.703
> 
> 标签：vba, styles, ms-word

在样式窗口中，当您单击样式的下拉菜单并且样式已分配到文档中的任何位置时，您会立即看到该样式的实例数，并可以选择或删除所有实例. 如果尚未在任何地方指定样式，则这些选项将显示为灰色。

我在 VBA 程序中需要这些信息，但我还没有找到任何方便的方法来获取它，尽管 WinWord 似乎随时可以在它的指尖下获得它。

作为一种解决方法，我已经修改了来自 Tech-Tav.com 的“DeleteUnusedStyles”-Macro [，](http://www.tech-tav.com/products/tech-tav-macro-suite/functionality)但是我的代码太慢了，以至于处理 ca 350 内置 Microsoft 样式变得不切实际 - 就目前而言，宏不甚至不计算已分配某种风格的实例，而只计算已分配的故事范围。以这种方式计算每个单独的实例将使宏运行一个多小时：

如果没有直接的方法从 VBA 中获取所需的信息（我已经徒劳地研究了一个多星期），有人可以给我一个提示如何加快搜索程序吗？

该例程需要以下信息：

```
Dim iStyle% '(the number of the style which is to be processed) 
```

并交回以下信息：

```
Dim V_NumberOfStylesFound% '(how many styles have been found within the document)
Dim Dim A_StylesUsedInDoc() As String '(An array containing all styles which have been used as base style)
Dim V_BaseStych leListedWhere '(A string listing the Story ranges whithin which the style has been found)

Sub S_SearchForStylesInDocument(V_NumberOfStylesFound, A_StylesUsedInDoc, iStyle, V_BaseStyleListedWhere)
Dim R_MyRange, R_MyStory As Range
Set O_MyStyle = ActiveDocument.Styles(iStyle)
V_iNameLocal = ActiveDocument.Styles(iStyle).NameLocal
V_iBaseStyle = ActiveDocument.Styles(iStyle).BaseStyle
V_ListedWhere = ""

StatusBar = iStyle & " Examining Story Ranges"
For Each R_MyStory In ActiveDocument.StoryRanges
    Set R_MyRange = R_MyStory
    'StatusBar = iStyle & " Examining " & F_ResolveStoryName(R_MyStory.StoryType) & "..."
        R_MyRange.Find.ClearFormatting
        R_MyRange.Find.Style = ActiveDocument.Styles(O_MyStyle)
        With R_MyRange.Find
            .Text = ""
            .Replacement.Text = ""
            .Forward = True
            .Wrap = wdFindContinue
            .Format = True
         End With
         If R_MyRange.Find.Execute Then
            StatusBar = iStyle & " Examining Styles Found"
            Select Case V_NumberOfStylesFound
            Case 0
                If V_iBaseStyle <> "" And V_iBaseStyle <> V_iNameLocal Then
                    V_NumberOfStylesFound = V_NumberOfStylesFound + 1
                    A_StylesUsedInDoc(V_NumberOfStylesFound) = V_iBaseStyle
                End If
            Case Is > 0
                Dim i%, Vb_IsListed As Boolean
                Vb_IsListed = False

                If Vb_IsListed = False Then 'found style is not yet listed
                    Dim j%, Vb_IsBaseStyleListed As Boolean
                    'StatusBar = V_iNameLocal & " style is in use."
                    For j = 1 To V_NumberOfStylesFound 'check whether the base style to found style is already listed?
                        If A_StylesUsedInDoc(j) = V_iBaseStyle Then
                            j = V_NumberOfStylesFound
                            Vb_IsBaseStyleListed = True
                        End If
                    Next j
                    If Vb_IsBaseStyleListed = False And V_iBaseStyle <> "" Then 'base style to found style is not yet listed
                        V_NumberOfStylesFound = V_NumberOfStylesFound + 1
                        A_StylesUsedInDoc(V_NumberOfStylesFound) = V_iBaseStyle
                        'StatusBar = V_iBaseStyle & " style is in use."
                    End If
                Else
                    'Stop 'how can style get listed twice?
                End If
                V_BaseStyleListedWhere = V_ListedWhere & R_MyStory.StoryType & ","
            End Select
         Set R_MyRange = R_MyStory
         End If
Next R_MyStory
'Stop
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T13:46:40.307

我认为您可以使用[Style.InUse 属性](http://msdn.microsoft.com/en-us/library/office/bb211265%28v=office.12%29.aspx)快速查找是否已使用样式，然后查找以获取实例计数。

# objective-c - 将任意形状的 CGPath 动画化为矩形

> ID：15596329
> 
> 赞同：0
> 
> 时间：2013-03-24T07:56:01.743
> 
> 标签：objective-c, cocoa-touch, cocoa, core-graphics, cashapelayer

我正在使用 a`CAShapeLayer`来显示当用户在屏幕上跟踪他/她的手指时更新的路径。我想将此路径转换为仅包含路径的矩形。我可以很好地计算矩形；棘手的部分是动画转换。

文档说这是关于动画`path`属性的`CAShapeLayer`：

> 如果两条路径具有不同数量的控制点或段，则结果未定义。

那么如何向矩形添加更多控制点`CGPath`呢？或者有没有更好的方法来实现这个动画？谢谢。=)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T12:13:00.983

我认为您必须手动构建一系列矩形形式的线条。遍历路径中的元素，计算您希望该点转换到的边界矩形上的位置，并将该段添加到新的矩形路径中。您可能必须使用相同类型的元素（例如，恰好形成一条直线的三次或二次贝塞尔曲线），以便控制点的数量匹配。

动画完成后，您可以根据需要将路径重置为纯矩形。

# php - 通过 Composer.json 访问本地 svn 存储库，无需以明文形式提供登录凭据

> ID：15596330
> 
> 赞同：1
> 
> 时间：2013-03-24T07:56:12.690
> 
> 标签：php, svn, composer-php

我的 composer.json 文件中包含“私有”本地 svn 存储库的包。每个源 url 都包含 svn 用户名和密码。

随着项目部署在不同的服务器上，我不希望 svn 登录凭据以纯文本形式提供。

还有另一种方法可以做到这一点吗？我不介意每次运行更新时都必须输入登录详细信息。

下面是 composer.json 文件的示例：

```
{
"repositories": [
{
    "type": "package",
    "package": {
        "name": "localpackage/localpackage1",
        "version": "0.0.1",
        "source": {
            "url": "http://<username>:<password>@<ip_address>/local-package1/tags/",
            "trunk-path": "trunk",
            "branches-path": "branches",
            "tags-path": "tags",
            "type": "svn",
            "reference": "0.0.1"
        }
    }

},
{
    "type": "package",
    "package": {
        "name": "localpackage/localpackage2",
        "version": "0.0.1",
        "source": {
            "url": "http://<username>:<password>@<ip_address>/local-package2/tags/"
            "trunk-path": "trunk",
            "branches-path": "branches",
            "tags-path": "tags",
            "type": "svn",
            "reference": "0.0.1"
        }
    }

},
],
"require": {
    "localpackage/localpackage1" : "0.0.1",
    "localpackage/localpackage2" : "0.0.1"
}
]
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T11:23:38.707

如果您没有指定它，composer 应该在安装/更新时提示您输入密码。

# android - 我没有得到最新的 Roster smack（xmpp 库）

> ID：15596334
> 
> 赞同：2
> 
> 时间：2013-03-24T07:56:26.710
> 
> 标签：android, smack, asmack

```
I am using smack/asmack library for chatting purpose in android.

I am using below code for request/accept, connected users, 
```

获取用户的存在和通知。但它不能正常工作。

```
1\.  I have made connection and loged in by below code

public static boolean XMPPConnect() {
        try {
            config = new ConnectionConfiguration(Constant._hostName, 5222);
            SmackConfiguration.setPacketReplyTimeout(1000*60);
            connection = new XMPPConnection(config);
            config.setSASLAuthenticationEnabled(false);
            connection.connect();
        } catch (Exception e) {
            e.printStackTrace();
                        return false;
        }
        return true;
    }

    public static boolean XMPPLogin(String uname, String password) {
        try {
            connection.login(uname, password);
        } catch (Exception e) {
            e.printStackTrace();
            return false;
        }
        return true;
    }

2\.   I have requested user by create entry in roster by below code
    try {
Roster roster = XMPPSmackConnection.getInstance().connection.getRoster();
roster.setSubscriptionMode(Roster.SubscriptionMode.accept_all);

//Presence response = new Presence(Presence.Type.subscribe);     //response.setTo(_username);                                              //XMPPSmackConnection.getInstance().connection.sendPacket(response);
                    roster.createEntry(_username+Constant._hostNameWithAt, _username, null);

    } catch (Exception e) {
      e.printStackTrace();
    }

3\.  I am accepting the request by below code

       try{
Roster roster = XMPPSmackConnection.getInstance().connection.getRoster();               roster.setSubscriptionMode(Roster.SubscriptionMode.accept_all);             _username=_username+Constant._hostNameWithAt;
                        roster.createEntry(_username+Constant._hostNameWithAt, _username, null);
       }catch(Exception e){
       }

And I also making request and accepting by subscribe and unsubscribe by

Presence response = new Presence(Presence.Type.subscribe);
response.setTo(_username);
XMPPSmackConnection.getInstance().connection.sendPacket(response);

Presence response = new Presence(Presence.Type.subscribed);
response.setTo(_username);
XMPPSmackConnection.getInstance().connection.sendPacket(response);

Presence response = new Presence(Presence.Type.unsubscribe);
response.setTo(_username);
XMPPSmackConnection.getInstance().connection.sendPacket(response);

Presence response = new Presence(Presence.Type.unsubscribed);
response.setTo(_username);
XMPPSmackConnection.getInstance().connection.sendPacket(response);

And another problem is that I am not getting updated roster instantly from openfire server.

try{
Thread.sleep(5000);
Roster roster = XMPPSmackConnection.getInstance().connection.getRoster();
    Presence presence;
    if (roster != null) {
    Collection<RosterEntry> entries = roster.getEntries();
    /*   Fetch roster buddies  */
    for (RosterEntry r : entries) {
    presence = roster.getPresence(r.getUser());
    String Usertype = presence.getType().toString();
      if(r.getType().name()=="both"){  
            // For fetch connected  buddies
            Constant._connectedUserNameList.add(r.getUser()); 
      }
    }
}catch(Exception e){}

Can anybody suggest me best way..

Thank You. 
```

# ruby-on-rails - 单击时更新参数并在控制器中调用操作？

> ID：15596336
> 
> 赞同：0
> 
> 时间：2013-03-24T07:56:40.697
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

在过去的 3 天里，我一直在努力解决这个问题（不开玩笑！！！）....这似乎是一件非常简单的事情，但我就是做不到。所以我在这里提出这个问题，并对任何可行的方法持开放态度。

背景：提交时的高级搜索表单用于生成对服务器来说太大的 URL。所以表单必须通过 POST 提交。到目前为止，一切都很好。表单提交成功，并显示结果。唯一剩下的问题是分页。

因为它是一个 POST 调用，所以它排除了分页。虽然 will-pagination 将参数页面合并到现有参数，但问题是它显示在 url 上导致相同的错误。

问题：那么有什么办法，如果用户点击一个链接NEXT，我可以

a) 更新页面参数

b) 保留现有参数

c) 在不更改 URL 的情况下

d) 将控制权转移回控制器中的动作？

到目前为止建议的唯一解决方案是隐藏表单，重新填充它的值并再次提交。表格非常复杂，所以如果有更清洁的方式我想知道。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T08:18:56.360

我从你的评论中看到了你想要的。所以相应地编辑我的回复。您希望在排序中选择哪一列的信息可供控制器使用，而 url 字符串中没有该信息，并且您希望对此使用 GET 而不是 POST

您面临的挑战是您希望保留请求之间的状态，并且您需要一种机制来执行此操作。POST 通过在 POST 请求的正文中发送该信息来保留该信息。GET 通过允许您填充查询字符串来做到这一点。保存状态的另一种方法是使用 cookie。

您可以在页面上使用 javascript 操作 url。网上有这方面的教程。

但是，如果您只想要一个简单的控制器破解，就像您在评论中所说的那样，那么我能想到的最简单的方法是允许用户向其中包含查询参数的 url 发出 GET 请求，然后分两步处理此请求- 第一步将查询信息保存到 cookie，第二步将它们重定向到去掉查询字符串数据的 url，然后在为该页面构建数据之前查看 cookie 以查看它是否具有这些字段。这是hacky，但它的工作原理。

```
def sort
  session[:sort] = params[:sort]
  redirect_to url_without_the_query_string
end 
```

还有新的 html 5 功能：

```
window.history.replaceState(“Replace”, “Page Title”, “/mypage”); 
```

从这里的stackoverflow答案：[如何使用javascript从url中删除查询字符串](https://stackoverflow.com/questions/9716412/how-to-remove-query-string-from-url-using-javascript)

但是我不确定我是否建议在加载后弄乱 url（我对该解决方案知之甚少，所以我建议您阅读该答案，看看是否合适）。因此，如果您必须从 url 字符串中丢失该数据，因为您需要在请求之间以某种方式传递它，您要么必须使用 POST，要么使用我上面描述的会话 cookie/重定向方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T13:31:47.953

你的html`<form>`有`action`属性吗？如果没有，请添加一个指向该页面的内容。

如果您想保留当前的 ​​GET 参数以便 POST 的结果可以使用，您还需要修改标题链接上触发的 javascript，以便以及（或代替）修改查询字符串，它们编写相同数据到隐藏的表单字段（当然然后发布在请求的正文中）。你的 JS 库可能已经包含了有用的函数。

# sql-server - 为 SQL Server 中的每个组返回带有额外行的分组数据

> ID：15596339
> 
> 赞同：2
> 
> 时间：2013-03-24T07:57:07.833
> 
> 标签：sql-server, tsql

我有表 Composition、CompositionDetails 和 Tracks
Composition 包含组成名称，而 compositionDetails 用于映射轨道与组成。一个作品可以有多个轨道。

表结构是这样的：

**合成**表 - CompositionId、CompositionName
**轨道**表 - TrackId、TrackName
**CompositionDetails** - CompositionId (FK)、TrackId (FK)

现在通过我的查询，我能够实现这一点：

![在此处输入图像描述](../Images/4e612bce64dbbfc88fe99f84373c56f9.png)

但我想要这个：

![在此处输入图像描述](../Images/89046de45bd560ceeef3addf2f045ebe.png)

我的意思是每组作文上方多出一行。
我实现了它创建临时表并循环插入额外的行。但是有数百万的数据，它非常慢。

关于如何在不创建临时表和遍历循环插入新行的情况下实现这一点的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T10:47:07.267

```
Select Componame,TrackTitle from
(
Select Componame,TrackTitle,Componame as h,1 as Sort
from Composition
UNION 
Select Componame,Componame,MIN(Componame),0 as Sort
from Composition
group by Componame
) a
Order by h,Sort,Componame,TrackTitle 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T12:10:05.263

假设`CompositionDetails`表的列中没有包含 NULL 的`TrackId`行：

1.  使用，将每个`UNION`空白 (NULL) 添加到中。`TrackId``CompositionId``CompositionDetails`

2.  将结果集内连接到`Composition`.

3.  用 左连接内连接的结果`Tracks`。显然，这将为 #1 中添加的行生成 NULL 轨道名称。

4.  在 ORDER BY 子句中，`CompositionName`先排序，然后再排序`TrackName`。（在 Transact-SQL 中，NULL 位于任何值之前。因此，具有空白轨道名称的行将位于其各自组中的其他行之前。）

5.  在 SELECT 子句中，使用[`COALESCE`](http://msdn.microsoft.com/en-us/library/ms190349.aspx "合并 (Transact-SQL)")或[`ISNULL`](http://msdn.microsoft.com/en-us/library/ms184325.aspx "ISNULL (Transact-SQL)")将空白轨道名称替换为乐曲名称。

```
SELECT
  c.CompositionName,
  COALESCE(t.TrackName, c.CompositionName)
FROM
  Composition AS c
  INNER JOIN (
    SELECT          CompositionId, TrackId FROM CompositionDetails
    UNION ALL
    SELECT DISTINCT CompositionId, NULL    FROM CompositionDetails
  ) AS d ON c.CompositionId = d.CompositionId
  LEFT JOIN Tracks AS t ON d.TrackId = t.TrackId
ORDER BY
  c.CompositionName,
  t.TrackName
;
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T05:44:19.973

尝试这个

```
SELECT c2.CompositionName, c2.CompositionName, c2.CompositionId
FROM Composition c2
UNION
SELECT c.CompositionName, t.TrackName, cd.CompositionId
FROM CompositionDetails cd join Composition c ON cd.CompositionId = c.CompositionId
JOIN Tracks t on t.Trackid = cd.Trackid 
```

# scons - 如何添加链接器标志以在 scons 中创建编译器特定的可执行文件

> ID：15596343
> 
> 赞同：4
> 
> 时间：2013-03-24T07:57:42.840
> 
> 标签：scons

我正在为不同的编译器使用 scons。vc10 和瑞萨编译器。如果我使用 env.program(---) 编译程序，则链接标志为

“链接 /nologo /subsystem:console /pdb:project.pdb /OUT:program.exe D:\build1\subdirA\subdirA.lib D:\build1\subdirB\subdirB.lib main.obj”

它适用于 VC10 编译器。但是对于瑞萨（我的微控制器）编译器，我收到一个错误，例如

"无法打开文件："/OUT:program.exe""

链接时它将接受“-output=program.abs”命令。我怎样才能改变那个。你能告诉我吗

当程序链接 /OUT:program.exe 默认添加。

你能告诉我如何将其更改为“-output=program.abs”

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T11:26:21.377

你要做的是`cross-compile`：编译一个`Renesas`二进制文件`Windows`。似乎您所做的是`Windows VC10`在 SCons 中加载了工具集（SCons 会自动执行此操作，除非被告知不要这样做）并且只是更改了编译器二进制文件，因此 SCons 仍在使用似乎不兼容的 VC10 编译器/链接器标志。曾经我不得不用 SCons 做类似的事情，我在 Linux 环境中交叉编译了 Cavium Octeon，但幸运的是，几乎所有的标志都是兼容的。

我对此一无所知`Renesas`，但如果它的编译标志更类似于另一个平台/工具集，则加载它们而不是 Windows，如下所示我加载 Linux gcc 工具集的位置。

```
env = Environment(tools = ['gcc']) 
```

`Construction Environments`在[SCons 手册页](http://www.scons.org/doc/production/HTML/scons-man.html)中查找支持工具的完整列表。请记住，通过这样做，您将不再支持本机平台工具集`Windows VC10`。

如果您发现类似的平台，并且您仍然需要更改一些编译器/链接器标志或选项，请查看更改相关的[SCons 构造变量](http://www.scons.org/doc/production/HTML/scons-user/a5025.html)。一些可能有帮助的有：`CXXFLAGS, LIBSUFFIX, LINKFLAGS, OBJSUFFIX,`和`PROGSUFFIX`。构造`LINKFLAGS`变量实际上是您原始问题的答案。

我在谷歌上搜索了 scons Renesas，发现这个[链接](http://rt-thread.googlecode.com/svn/trunk/bsp/m16c62p/readme.txt)也可能有帮助。

# sql - Group By .... SQL 查询未正确执行

> ID：15596344
> 
> 赞同：0
> 
> 时间：2013-03-24T07:57:57.223
> 
> 标签：sql, ms-access

我想查看一个日期范围内销售的总产品数量，即

```
 -------------------------
 |  PRODUCT   | QUANTITY |
 -------------------------
 |   A        |    120   |
 -------------------------
 |   B        |     75   |
 ------------------------- 
```

**我在MS Access 2003**中有以下 sql 查询：

```
SELECT Product, Sum(PurchaseQuantity) AS Quantity
FROM tblInvoice
GROUP BY Product
HAVING PurchaseDate BETWEEN #3/19/2013# and #3/22/2013#; 
```

但这没有执行。MS Access 给我错误，例如：

> “您尝试执行的查询不包含指定表达式‘PurchaseDate BETWEEN #3/19/2013# and #3/22/2013#’作为聚合函数的一部分。”

到目前为止，我知道我需要在 Group By 子句中添加 PurchaseDate 。但是有没有办法在不将 PurchaseDate 放在 Group By 子句中的情况下做到这一点？

先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T08:00:24.510

您应该在“WHERE”子句中使用 purchaseDate 条件：

```
SELECT Product, Sum(PurchaseQuantity) AS Quantity 
FROM tblInvoice
WHERE PurchaseDate BETWEEN #3/19/2013# and #3/22/2013#
GROUP BY Product 
```

# git - 确定 git 中两次提交之间的祖先引用

> ID：15596345
> 
> 赞同：3
> 
> 时间：2013-03-24T07:57:59.667
> 
> 标签：git, branching-and-merging, git-merge, revision-history, revision-graph

假设我们在同一个存储库中有两个提交 A 和 B，并且 A 是 B 的祖先。
已使用存在状态 0 检查：

```
git merge-base --is-ancestor A B 
```

或者，如果以下两个命令的输出相同，则以旧方式：

```
git merge-base A B
git rev-parse A 
```

我想知道是否有 git 命令或简单的解决方案可以使用 ^ 和 ~ 使用祖先引用来查找基于 A 的 B 表示。

如果有多个路径，我现在需要的是找到具有最少数量的非第一父路径（^n，n>1）的最快路径。根据我的计算，没有两条路径在其路径中具有相同数量的非第一父母。

结果可能如下所示：
A~3, A~4^2~3, A^^3~2

# objective-c - 给出解析错误的 Objective-C 宏：预期标识符

> ID：15596352
> 
> 赞同：0
> 
> 时间：2013-03-24T07:58:55.903
> 
> 标签：objective-c, macros

以下宏给了我一个解析错误。看不出这里有什么问题。

```
 #define adjust(tag, x, y) if (self.tag==tag) { origin.x += x; origin.y += y; return origin; }

  ....

 adjust(20, 28, 265) 
```

编辑：

查看随附的屏幕截图。我想使用宏扩展只是为了提高代码的可读性。这是一种非常本地化的用法，因此没有风险或重复使用等。

![在此处输入图像描述](../Images/6399a186c8385071dae7379e0e9d952e.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T08:08:46.023

你的宏引用了一个未定义的属性`origin`，如果它不存在于替换的范围内，宏扩展后会导致编译器错误。实际上，作为一个整体，您的宏并不是非常模块化。例如，您有对`tag`and的引用`self`，它们是

1.  将非常符合上下文
2.  宏展开完成后如果不发生且具有特定含义会导致编译失败

# c++ - 如何将 CoInitializeEx 与 ShellExecuteEx 一起使用

> ID：15596355
> 
> 赞同：1
> 
> 时间：2013-03-24T07:59:35.510
> 
> 标签：c++, winapi, com

我正在使用 WinAPI 函数`ShellExecuteEx()`在 Windows 资源管理器中打开一个文件夹。

根据 MSDN，我应该总是`CoInitializeEx()`在使用之前调用，`ShellExecuteEx()`但是我应该为 的第二个参数使用什么标志`CoInitializeEx()`？

> 在某些情况下，ShellExecute 不使用这些类型的 Shell 扩展之一，并且这些实例根本不需要初始化 COM。尽管如此，在使用此函数之前始终初始化 COM 是一种很好的做法。

```
CoInitializeEx(NULL, What params should I use?); //COINIT_APARTMENTTHREADED | COINIT_DISABLE_OLE1DDE)

ShExecInfo.cbSize = sizeof(SHELLEXECUTEINFO);
ShExecInfo.fMask = NULL;
ShExecInfo.hwnd = NULL;
ShExecInfo.lpVerb = _T("explore");
ShExecInfo.lpFile = pszParseName;
ShExecInfo.lpParameters = NULL;
ShExecInfo.lpDirectory = NULL;
ShExecInfo.nShow = SW_MAXIMIZE;
ShExecInfo.hInstApp = NULL;

ShellExecuteEx(&ShExecInfo);
CoUninitialize(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T08:07:28.293

`CoInitializeEx()`为您的应用程序初始化 COM-SCM。您至少应该使用 调用它`COINIT_APARTMENTTHREADED`，尽管到目前为止您没有使用代码中的任何 COM 对象。这意味着，调用线程将被放入它自己的单元中，并且需要编组对 COM 对象的调用。如果你看[这里](http://msdn.microsoft.com/en-us/library/windows/desktop/ms678505%28v=vs.85%29.aspx)
，也可以选择打电话。最好使用此选项，因为它可能会提高性能。COM 是一个相当复杂的话题，尤其是关于公寓的话题。`COINIT_MULTITHREADED`

# jquery - .clone() put 的元素相乘，我只想要一次

> ID：15596357
> 
> 赞同：1
> 
> 时间：2013-03-24T07:59:45.450
> 
> 标签：jquery, clone

我有这样的事情：

```
<div class="cont">
    <img src="http://something1.png" class="1">
</div>
<div class="cont">
    <img src="http://something2.png" class="1">
</div>
<div class="cont">
    <img src="http://something3.png" class="1">
</div>
.
.
. 
```

以及如何从中获得类似的东西：

```
<div class="cont">
   <img src="http://something1.png" class="1">
   <img src="http://something1.png" class="2">
</div>
<div class="cont">
   <img src="http://something2.png" class="1">
   <img src="http://something2.png" class="2">
</div>
<div class="cont">
   <img src="http://something3.png" class="1">
   <img src="http://something3.png" class="2">
</div>
.
.
. 
```

我正在使用这段代码：

```
$('.1').clone().toggleClass("1 2").insertAfter('.1'); 
```

但是它会复制每个带有 class="1" 的 img 并将其放在每个带有 class="1" 的 img 之后，因此 class="2" 在每个 div 中相乘。有没有办法像我不会的那样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T08:01:43.183

你必须使用`.each()`：

```
$('.1').each(function() {
    $(this).clone().toggleClass('1 2').insertAfter(this);
}); 
```

# z3 - 当我向 Z3 寻求其他解决方案时，结果很奇怪

> ID：15596359
> 
> 赞同：0
> 
> 时间：2013-03-24T08:00:03.473
> 
> 标签：z3

我使用 Z3 作为一个简单的 SAT 求解器，断言命题术语如下：

```
let ctx = new Context()
let x = ctx.MkBoolConst("x")
let y = ctx.MkBoolConst("y")
let z = ctx.MkBoolConst("z")
let f = ctx.MkOr(ctx.MkAnd(x,y), ctx.MkAnd(ctx.MkNot(x),z))
let s = ctx.MkSolver()
s.Assert(f)
assert (s.Check() = Status.SATISFIABLE)
let r= [s.Model.Eval(x); s.Model.Eval(y); s.Model.Eval(z)]
printfn "%A" r 
```

哪个返回

```
[false; true; true] 
```

正如预期的那样。但是，当我尝试通过将找到的分配和否定并将其添加回 Z3 求解器来向 Z3 寻求进一步的解决方案时

```
let mkB(z3_lit:BoolExpr,bvalue:Expr) = 
  if (bvalue:?> BoolExpr).IsTrue then z3_lit else ctx.MkNot z3_lit
let founds = List.map mkB (List.zip [x;y;z] r)
let and_founds = ctx.MkAnd (List.toArray(founds))
let negated = ctx.MkNot and_founds
s.Assert negated
assert (s.Check() = Status.SATISFIABLE)
let r2 = [s.Model.Eval(x); s.Model.Eval(y); s.Model.Eval(z)]
printfn "%A" r2 
```

我得到了一个奇怪的 z 任务。IE：

```
[true; true; z] 
```

为什么之前`true`更改为z 的分配`z`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T11:09:03.350

如果我没记错的话，将变量作为自己的模型意味着它是“无关紧要的”：任何值 for`z`都会给你一个有效的模型。实际上，在这种情况下，该子句已经满足`x`并且`y`为真。

如果你想让Z3为你完成模型，你可以看看[这个问题](https://stackoverflow.com/questions/11115004/z3-4-0-get-complete-model)。

此外，C API 至少为 定义了一个额外的参数[`Z3_model_eval`](http://research.microsoft.com/en-us/um/redmond/projects/z3/group__capi.html#ga86670c291a16640b932e7892176a9d1b)，您可以使用该参数向 Z3 指示您想要所有变量的值。

# design-patterns - 工厂方法的字母实现

> ID：15596362
> 
> 赞同：0
> 
> 时间：2013-03-24T08:00:11.777
> 
> 标签：design-patterns, factory-pattern

通过工厂方法实现字母表是不是好主意？

例子：

```
public class Alphabet
{
    public Alphabet(image picture, string name)
    {
       _picture = picture;
       _name = name;
    }

    public void Show()
    {
       _picture.Show();
    }
}

public LetterA: Alphabet
{
    public LetterA() : Alphabet("lttrA.png", "Letter A"){}
}

....

public LetterZ: Alphabet
{
    public LetterZ() : Alphabet("lttrZ.png", "Letter Z"){}
} 
```

使用：

```
Alphabet ltr1 = new LetterA(); 
```

要求：图片永不改​​变，以后无添加方法

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T08:11:00.783

工厂方法在每次调用时提供一个类的新实例。在您的情况下，无需创建多个实例，您可以为字母创建一个枚举。

```
public enum Alphabet
{
    A(/*some image*/, "A"),
    B(/*some image*/, "B"),
    C(/*some image*/, "C"),
    D(/*some image*/, "D");
    // ... and so on till Z

    private final String name;
    private final Image picture;

    private Alphabet(Image picture, String name)
    {
       this.picture = picture;
       this.name = name;
    }

    public void Show()
    {
       picture.Show();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T10:25:20.667

为什么要 26 个子类？如果我了解您想从字符串字母映射到图像文件。一张简单的地图就足够了。也许还有一种方法来处理对该地图的访问，检查是否只传递了字母，将它们标准化（大写），......

# dynamic-programming - 为什么归并排序不是动态编程

> ID：15596363
> 
> 赞同：16
> 
> 时间：2013-03-24T08:00:13.297
> 
> 标签：dynamic-programming

我读过这些话：

> 为了使动态规划适用，问题必须具有两个关键属性：最优子结构和重叠子问题。如果可以通过组合非重叠子问题的最优解来解决问题，则该策略称为“分而治之”。这就是为什么归并排序和快速排序不属于动态规划问题的原因。

我有3个问题：

1.  为什么mergesort和quicksort不是动态编程？我认为mergesort也可以划分小问题和小问题然后做同样的事情等等。
2.  Dijkstra 算法是否使用动态算法？
3.  是否有使用动态规划的应用示例？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-24T08:51:07.827

1.  这里的关键词是“重叠子问题”和“最优子结构”。当您执行快速排序或合并排序时，您会递归地将数组分解为不重叠的较小部分。在任何给定的递归级别期间，您永远不会对原始数组的相同元素进行两次操作。这意味着没有机会重复使用以前的计算。另一方面，许多问题确实涉及在重叠子集上执行相同的计算，并且具有有用的特性，即在计算更大问题的最优解时可以重复使用子问题的最优解。

2.  Dijkstra 算法是动态规划的经典示例，因为它重用先前的计算来发现两个节点 A 和 Z 之间的最短路径。假设 A 的直接邻居是 B 和 C。我们可以通过以下方式找到从 A 到 Z 的最短路径将 A 和 B 之间的距离与我们计算的从 B 到 Z 的最短路径相加；并类似地寻找从 C 到 Z 的最短路径。那么从 A 到 Z 的最短路径将是这两条路径中较短的一条。这里的关键见解是，在计算长度为 3 的最短路径时，我们可以对长度为 2 的路径重新使用最短路径计算，依此类推。这样做会产生更有效的算法。

3.  动态编程可用于解决多种类型的问题——有关一些示例，请参见[http://en.wikipedia.org/wiki/Dynamic_programming#Examples:_Computer_algorithms](http://en.wikipedia.org/wiki/Dynamic_programming#Examples%3a_Computer_algorithms)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-08-08T16:47:38.707

1.  为了使动态规划适用于一个问题，应该有

    一世。子问题中的最优结构：

这意味着当您将问题分解为更小的单元时，这些更小的单元也需要被分解为更小的单元以获得最佳解决方案。例如，在归并排序中，如果我们将一个数字数组分成两个子数组，对它们进行排序并组合它们，则可以对其进行排序。在对这两个子数组进行排序时，重复您在上一句中遵循的相同过程。因此，当我们找到其子问题的最优解（我们对子数组进行排序并组合它们）时，就会得到最优解（排序数组）。合并排序满足此要求。此外，子问题必须是独立的，它们才能遵循最佳结构。这也可以通过合并排序来实现，因为子问题的解决方案不会受到彼此解决方案的影响。例如，

ii. 重叠子问题：

这意味着在求解解决方案时，您制定的子问题会重复，因此只需求解一次。在归并排序的情况下，这个要求在正常情况下只会很少满足。像 2 1 3 4 9 4 2 1 3 1 9 4 这样的数字数组可能是合并排序的重叠子问题的良好候选者。在这种情况下，子问题 sort(2 1 3) 的解决方案可以存储在一个表中以供重复使用，因为它在计算过程中会被调用两次。但正如你所看到的，随机数字数组具有这种重复设计的可能性非常小。因此，如果我们将动态编程技术（如记忆化）用于合并排序等算法，则只会效率低下。

2.  是的。Dijkstra 的算法使用@Alan 在评论中提到的动态编程。[关联](https://en.wikipedia.org/wiki/Dynamic_programming#Dijkstra%27s_algorithm_for_the_shortest_path_problem)

3.  是的。如果我可以在这里引用维基百科的话，“动态编程在生物信息学中被广泛用于序列比对、蛋白质折叠、RNA 结构预测和蛋白质-DNA 结合等任务。” ^([1](https://en.wikipedia.org/wiki/Dynamic_programming#Dijkstra%27s_algorithm_for_the_shortest_path_problem))

[1](https://en.wikipedia.org/wiki/Dynamic_programming#Dijkstra%27s_algorithm_for_the_shortest_path_problem) [https://en.wikipedia.org/wiki/Dynamic_programming](https://en.wikipedia.org/wiki/Dynamic_programming)

# excel - Excel 宏更改了 ActiveChart.SeriesCollection(1).XValues 但文本保持不变

> ID：15596365
> 
> 赞同：0
> 
> 时间：2013-03-24T08:00:39.363
> 
> 标签：excel, vba

我对 VB 或 VBA 非常陌生，但最近使用 Excel 需要大量重复。这就是为什么我现在正在考虑使用 VBA 宏方法来简化该过程。

工作很简单——用给定的数据生成图表。但是要创建数百个图表，所以我使用复制和粘贴来保持样式一致性，然后更改其中的值。

数据处理得很好，但轴标签并不那么顺利。我试图用来`ActiveChart.SeriesCollection(1).XValues = "=<sheet_name>!$<row_num>$<col_num>"`将值修改为相应单元格中的一些现有文本，但它在图表上没有解决，即，如果标签是“总计”，就像在 A6 单元格中一样，在原始图表中我从中复制的，在选择粘贴的图表并执行上面的命令后，新图表中的标签仍然显示“总计”，而不是 B6 单元格中的内容，例如“中国”。但是当我右击图表进入“选择数据”时，“水平（类别）轴标签”确实变成了“=sheet1!$B$6”，这让我很困惑。

任何人都知道这是怎么发生的以及如何解决这个问题？图表对象是否有“更新”方法或我缺少的任何东西？

我目前正在使用 Excel 2010。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T11:52:11.677

欢迎来到 Excel VBA 的陌生世界。

`SeriesCollection().XValues`需要一个`Range`对象或一个点数组，因此您必须将字符串转换为一个范围：

```
ActiveChart.SeriesCollection(1).XValues = Sheets(<sheet_name>).Range("$<row_num>$<col_num>") 
```

# c++ - 多元非线性回归

> ID：15596369
> 
> 赞同：2
> 
> 时间：2013-03-24T08:01:00.880
> 
> 标签：c++, machine-learning, regression

我是机器学习的新手，我想实现多元非线性回归，但我似乎找不到任何好的 C++ 库（例如：数据）

```
 y        x1         x2       x3          x4       x5         x6      
4.52e+005  8.32e+000 4.10e+001 8.801e+002 1.29e+002 3.22e+002 1.26e+002 
3.585e+005 8.30e+000 2.10e+001 7.099e+003 1.10e+003 2.40e+003 1.13e+003 
3.521e+005 7.25e+000 5.20e+001 1.467e+003 1.91e+002 4.96e+002 1.77e+002 
3.413e+005 5.64e+000 5.20e+001 1.274e+003 2.35e+002 5.58e+002 2.19e+002 
3.422e+005 3.84e+000 5.20e+001 1.627e+003 2.81e+002 5.65e+002 2.59e+002 
```

我需要非线性回归模型来预测给定输入变量的输出（x1，x2，x3，x4，x5，x6）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T12:33:53.100

我会对此尝试核岭回归和/或支持向量回归。它们中的任何一个都可能工作得很好。

dlib [C++ 库](http://dlib.net)具有这两种方法的易于使用的实现。有关详细信息，请参阅[支持向量回归](http://dlib.net/svr_ex.cpp.html)或[核岭回归](http://dlib.net/krr_regression_ex.cpp.html)示例程序。请注意，这些示例仅显示了一个输入变量，但您只需将输入向量的维数更改为 1 以外的值。因此在示例中，这意味着您只需更改行

```
typedef matrix<double,1,1> sample_type; 
```

至

```
typedef matrix<double,6,1> sample_type; 
```

然后他们将处理 6 个输入变量。

# openstack - Openstack-Keystone 无法启动

> ID：15596370
> 
> 赞同：0
> 
> 时间：2013-03-24T08:01:02.010
> 
> 标签：openstack, keystone

在过去的几天里，我几乎尝试了所有方法来让 keystone 运行无济于事。

设置都在同一台主机上，虚拟化和openstack和keystone都在同一台主机上，所以我尝试使用127.0.0.1和localhost设置keystone以及主机的IP，但没有运气

```
[DEFAULT] log_file = /var/log/keystone/keystone.log 
admin_token = *** 
bind_host = 192.168.33.11 
public_port = 5000 
admin_port = 35357 
compute_port = 8774

# === Logging Options ===
# Print debugging output verbose = True

# Print more verbose output
# (includes plaintext request logging, potentially including passwords)
# debug = False

# Name of log file to output to. If not set, logging will go to stdout. log_file = keystone.log

# The directory to keep log files in (will be prepended to --logfile) log_dir = /var/log/keystone

# Use syslog for logging.
# use_syslog = False

# syslog facility to receive log lines
# syslog_log_facility = LOG_USER

# If this option is specified, the logging configuration file specified is
# used and overrides any other logging options specified. Please see the
# Python logging module documentation for details on logging configuration
# files. log_config = logging.conf

# A logging.Formatter log message format string which may use any of the
# available logging.LogRecord attributes.
# log_format = %(asctime)s %(levelname)8s [%(name)s] %(message)s

# Format string for %(asctime)s in log records.
# log_date_format = %Y-%m-%d %H:%M:%S

# onready allows you to send a notification when the process is ready to serve
# For example, to have it notify using systemd, one could set shell command:
# onready = systemd-notify --ready
# or a module with notify() method:
# onready = keystone.common.systemd

[sql] connection = mysql://keystone:***@localhost/keystone
# idle_timeout = 200

[identity] driver = keystone.identity.backends.sql.Identity

[catalog] template_file = /etc/keystone/default_catalog.templates driver = keystone.catalog.backends.sql.Catalog
# dynamic, sql-based backend (supports API/CLI-based management commands)
# driver = keystone.catalog.backends.sql.Catalog

# static, file-based backend (does *NOT* support any management commands)
# driver = keystone.catalog.backends.templated.TemplatedCatalog

# template_file = default_catalog.templates

[token] driver = keystone.token.backends.sql.Token
# driver = keystone.token.backends.kvs.Token

# Amount of time a token should remain valid (in seconds)
# expiration = 86400 
```

我在 logging.conf 文件中启用了日志记录并将级别设置为 DEBUG 和 INFO，但日志文件中没有任何内容。

```
[root@* keystone]# service openstack-keystone restart
Stopping keystone:                                         [FAILED]
Starting keystone:                                         [  OK  ]
[root@* keystone]# service openstack-keystone restart
Stopping keystone:                                         [FAILED]
Starting keystone:                                         [  OK  ]
[root@* keystone]# ps aux | grep keystone
root     25580  0.0  0.0 103236   880 pts/1    S+   09:41   0:00 grep keystone
[root@* keystone]# 
```

任何想法将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T15:24:35.600

正如我在评论中提到的，我从未见过一个配置文件的部分标题与配置选项位于同一行：

```
[DEFAULT] log_file = /var/log/keystone/keystone.log 
```

我也见过这样的：

```
[DEFAULT]
log_file = /var/log/keystone/keystone.log 
```

但是，我不知道这是否与您的问题有关。

要启用调试级日志记录，请确保在 /etc/keystone/logging.conf 中设置以下内容：

```
[logger_root]
level=DEBUG 
```

然后尝试手动运行 keystone 而不是作为服务运行：

```
$ sudo -u keystone bash
$ HOME=/var/lib/keystone keystone-all --debug 
```

希望您会在标准输出上看到相关的错误消息。

（我相信它仍然会将日志记录发送到 /var/log/keystone/keystone.log，不确定如何在像这样手动运行时真正让它记录到标准输出）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-25T15:28:49.447

这可能是由于**keystone** 未正确启动，因此端口 35357 未处于侦听模式。这似乎是服务基石的异常行为。我提到了在我的系统上用于在 Ubuntu 12.04 内核版本 3.2.0-67-generic 上安装哈瓦那的步骤。围绕这个问题头疼了一天。尝试这些步骤，最好按照相同的顺序。

1）删除梯形包： -

```
 apt-get remove  keystone 
```

2）重新启动系统

```
 reboot 
```

3) 重新启动后再次安装 KEYSTONE。

```
apt-get install keystone 
```

4) 检查keystone服务状态

```
 service keystone status 
```

它将显示启动/运行

5) 现在在 /etc/keystone/keystone.conf 中做你想做的必要的改变

更改 conf 文件后，**请勿重新启动 KEYSTONE SERVICE**

使用 stop 和 start 命令来产生重启的效果，但不要重启。

服务基石停止

服务基石启动

如需进一步帮助，请粘贴我的 CLI 转储：-

[http://pastebin.com/sduuFCL7](http://pastebin.com/sduuFCL7)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-02T00:05:19.143

`icehouse`文档和安装存在多个问题。`packstack`已损坏，因此开始的唯一方法是手动遵循[您发行版的上游文档](http://docs.openstack.org/icehouse/install-guide/install/yum/content/keystone-install.html)。`keystone`在继续之前先正确设置非常重要，因为其他服务依赖它。

1.  粘贴文件`/usr/share/keystone/keystone-dist-paste.ini`应该被复制到`/etc/`这样的配置脚本可以访问：

    ```
    cp /usr/share/keystone/keystone-dist-paste.ini /etc/keystone/
    chown keystone:keystone /etc/keystone/* 
    ```

    确保`keystone.conf`使用新`config_file`值进行更新

2.  文档关于连接是错误的`mysql`，它应该去`[sql]`而不是`[database]`这样：

    ```
    openstack-config --set /etc/keystone/keystone.conf    sql connection mysql://keystone:PASSWD@controller/keystone 
    ```

3.  该名称`controller`应解析为任何绑定的名称，如果in是`mysql`，我将其添加为：`/etc/hosts``[mysqld]/bind-address``/etc/my.cnf``10.1.1.100`

    ```
    10.1.1.100  controller 
    ```

4.  确保取消注释`log_file`以`keystone.conf`了解正在发生的事情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-16T17:05:22.963

我也遇到了这个问题。我在 Ubuntu 12.04LTS 上运行。我发现服务启动命令`/etc/init/keystone.conf`是使用 start-stop-daemon 来运行服务。它是为比我盒子上的版本更新的版本编写的。不接受该`--chdir`变量作为输入。一旦我删除了该行梯形石立即启动。

尝试运行：

```
start-stop-daemon --start --chuid keystone --name keystone --exec /usr/bin/keystone-all

/etc/init/keystone.conf  after

description "Keystone API server"
author "Soren Hansen <soren@linux2go.dk>"

start on runlevel [2345]
stop on runlevel [!2345]

respawn

exec start-stop-daemon --start --chuid keystone \
            --name keystone \
            --exec /usr/bin/keystone-all 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-22T06:41:42.577

检查您的 IP 地址是否等于`HOST_IP=...`localrc

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-25T12:35:38.660

1.  为 admin_token 添加一个有效的令牌。它不应该是“ *** ”。

2.  检查以下行： [sql] connection = mysql://keystone: *** @localhost/keystone 它应该类似于： connection = mysql://keystone:keystone@localhost/keystone

3.  请参阅此 URL 以获取示例 keystone.conf 文件 [http://docs.openstack.org/trunk/openstack-compute/install/yum/content/keystone-conf-file.html](http://docs.openstack.org/trunk/openstack-compute/install/yum/content/keystone-conf-file.html)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-03-19T14:56:06.317

我遇到了类似的问题。我按照下面提到的步骤操作并启动了 openstack-keystone 服务。

编辑 /etc/keystone/keystone.conf 文件并完成以下操作：

1.  在 [DEFAULT] 部分

    ```
    [DEFAULT]

    admin_token = ADMIN_TOKEN 
    ```

2.  在 [数据库] 部分

    ```
    [database]
    connection = mysql://keystone:KEYSTONE_DBPASS@controller/keystone 
    ```

3.  在 [token] 部分，配置 UUID 令牌提供程序和 SQL 驱动程序

    ```
    [token]
    provider = keystone.token.providers.uuid.Provider
    driver = keystone.token.persistence.backends.sql.Token 
    ```

4.  在 [撤销] 部分

    ```
    [revoke]
    driver = keystone.contrib.revoke.backends.sql.Revoke 
    ```

进行上述更改后，使用命令填充身份服务数据库

```
su -s /bin/sh -c "keystone-manage db_sync" keystone 
```

使用以下命令启动 openstack-keystone 服务

```
systemctl start openstack-keystone 
```

# python - 无法通过 pyserial 发送十六进制（Modbus 数据包）

> ID：15596371
> 
> 赞同：1
> 
> 时间：2013-03-24T08:01:27.820
> 
> 标签：python, serial-port, pyserial, modbus

我在将以下十六进制代码 0x01 0x03 0x00 0x00 0x00 0x01 0x0a 0x84 发送到串行设备（电压传感器）时遇到了一些麻烦，该设备将使用 Python 和 pyserial 返回当前电压的 int。我的代码如下：

```
import serial
import time

ser = serial.Serial(
port=1,
baudrate=38400,
parity=serial.PARITY_NONE,
stopbits=serial.STOPBITS_TWO,
bytesize=serial.EIGHTBITS,
timeout=0,
xonxoff=0,
rtscts=0)    

ByteStringToSend = "\x01\x03\x00\x00\x00\x01\x0a\x84"
ser.write(ByteStringToSend)
time.sleep(1)
RecievedData = ""
while ser.inWaiting() > 0:
    RecievedData = ser.read(1)
return RecievedData 
```

问题是 Python 似乎将每个字节作为单独的数据包发送，请参见下图来自串行监视器

见图片[http://www.centralinfo.com.au/images/SerialOutput.png](http://www.centralinfo.com.au/images/SerialOutput.png)

前 8 个字节（00 - 07）来自 python 应用程序（注意不同数据包的交替颜色）接下来的 8 个字节（08 - 0f）是一个 VB.net 应用程序，它发送相同的工作数据。

我的问题是如何根据 vb.net 应用程序发送上面的 8 个十六进制字节，使其位于一个数据包（Modbus 协议）中？

VB代码对比：

```
 ' open the serial port if it is closed
            If Me.SerialPort1.IsOpen = False Then
                Me.SerialPort1.PortName = ComPort
                Me.SerialPort1.BaudRate = "38400" 'Set Baud rate
                Me.SerialPort1.RtsEnable = False ' Set RTS
                Me.SerialPort1.DtrEnable = False ' Set DTR
                Me.SerialPort1.Parity = IO.Ports.Parity.None
                Me.SerialPort1.StopBits = IO.Ports.StopBits.Two
                Me.SerialPort1.DataBits = 8 ' Set data length
                Me.SerialPort1.Handshake = Handshake.XOnXOff
                Me.SerialPort1.ReadTimeout = 10000
                Me.SerialPort1.WriteTimeout = 10000
                Me.SerialPort1.Open()
            End If

    Try
            Dim CommandBlock(7) As Byte
            CommandBlock(0) = &H1
            CommandBlock(1) = &H3
            CommandBlock(2) = &H0
            CommandBlock(3) = &H0
            CommandBlock(4) = &H0
            CommandBlock(5) = &H1
            CommandBlock(6) = &HA
            CommandBlock(7) = &H84
            Me.SerialPort1.Write(CommandBlock, 0, CommandBlock.Length)
            Thread.Sleep(100)
            Return True
        Catch ex As Exception
            Return False
        End Try 
```

提前感谢您的宝贵时间克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T08:46:40.253

您的 VB 应用程序启用 XON/XOFF 协议，而您的 python 应用程序没有。如果没有打开 XON/XOFF，我怀疑您的 python 应用程序在发送之前在每个字节之间等待一定的时间，因此接收设备将每个字节视为一个单独的“数据包”。

# osgi - 查找 OSGi 包的策略

> ID：15596373
> 
> 赞同：1
> 
> 时间：2013-03-24T08:01:53.510
> 
> 标签：osgi, bundle

在开发 OSGi 应用程序时，您寻找捆绑软件的策略是什么？

我就是这样做的，我认为这在某些方面有点麻烦。

当我需要参考时，可以说：

```
GroupId: group.name

Artifact: artifact.name 
```

我在 Eclipse 中启动添加 maven 依赖项并搜索它并将其添加到我的 pom 中，开始使用它，一切都很好，源代码明智。

但是当我将我的包部署到我的容器并安装 group.name/artifact.name/1.2.3 时，我有时会运气不好，并且引用的包不是一个包，而是一个简单的普通 jar。

在这里，我开始 google 搜索一组 group.name/artifact.name。下载 pom.xml 以查看构建中是否有 maven-bundle 插件。下载 jar 并查看 manifest.mf 中是否有任何导出包等。

有没有更好的策略呢？如何轻松找到 OSGi 捆绑包？

您进行 OSGi 开发的方式是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T07:36:45.410

我创建了一个实验站点，其中包含所有 maven Central、ebr 等。您可以专门查找将 osgi:* 添加到查询的捆绑包。

[https://jpm4j.org/#/search?q=osgi:*](https://jpm4j.org/#/search?q=osgi%3a%2a%5d)

同样，这目前是实验性的，但感谢反馈。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T12:16:31.820

试试这个网站：[http ://ebr.springsource.com/repository/app/](http://ebr.springsource.com/repository/app/)

它是“捆绑”库的存储库。有很多库，您可以确定库的传递依赖项也是捆绑包

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T08:15:12.330

好的，还有两个 :-) 一个总是值得一看的地方是 servicemix 项目，它有很多 osgi-fied 库。另一个是 ops4j pax Tipi 项目。这两个项目的巨大优势在于，您可以在 maven Central 中找到这些人工制品，因此无需将额外的存储库添加到您的项目中。

# android - Android 无法使用 AVRDUDE 与 Arduino 对话

> ID：15596376
> 
> 赞同：3
> 
> 时间：2013-03-24T08:02:01.293
> 
> 标签：android, arduino, avr-gcc, avrdude

我正在使用[AVRDUDE](http://www.nongnu.org/avrdude/) for Android ( [http://code.google.com/p/andavr/](http://code.google.com/p/andavr/) )。我可以编译[C](http://en.wikipedia.org/wiki/C_%28programming_language%29)代码。我可以跑

```
$ avr-gcc -Os -DF_CPU=16000000UL -mmcu=atmega328p -c -o led.o led.c
$ avr-gcc -mmcu=atmega328p led.o -o led
$ avr-objcopy -O ihex -R .eeprom led led.hex 
```

都没有问题。然后我尝试运行：

```
avrdude -F -V -c arduino -p ATMEGA328P -P /dev/bus/usb/002/002  -b 115200 -C /data/data/jackpal.androidterm/local/etc/avrdude.conf -U flash:w:led.hex 
```

结果是：

```
avrdude: ser_open(): can't open device "/dev/bus/usb/002/002"; Permission denied
loctl("TIOCMGET"): Invalid argument

avrdude done. Thank you. 
```

我运行时的情况类似：

```
avrdude -F -V -c arduino -p ATMEGA328P -P /dev/bus/usb/002/001  -b 115200 -C /data/data/jackpal.androidterm/local/etc/avrdude.conf -U flash:w:led.hex 
```

我可以确认这是用[OTG](https://en.wikipedia.org/wiki/USB_On-The-Go)电缆`/dev/bus/usb/002/002`连接的 Arduino 设备。在连接之前，我运行

```
ls -l /dev/bus/usb/002/ 
```

我得到：

```
total 0 
```

通过 USB 将 Arduino 连接到平板电脑后，我运行以下命令：

```
ls -l /dev/bus/usb/002 
```

我得到

```
crw-rw----   1 0   1018  180,128 Mar 24 07:53 001
crw-rw----   1 0   1018  180,129 Mar 24 07:53 002 
```

这清楚地向我展示了 Arduino 已连接。我很想知道是否有人能看到我做错了什么。

PS：我正在尝试创建一个 Android 应用程序，允许直接从 Android 平板电脑进行 Arduino 编程。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T09:24:49.207

它说“权限被拒绝”，您似乎没有使用 root shell。尝试“su”，然后尝试失败的命令。如果你的手机没有root，我认为它不能工作。

我什至不确定当你是 root 时它是否能正常工作，所以请发布结果！我的猜测是，如果您的手机不充当 USB 主机，它就不会（只有一些可以）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-24T21:53:49.893

我不是专家。但是你不需要一个[USB](http://en.wikipedia.org/wiki/Universal_Serial_Bus) [屏蔽](http://www.arduino.cc/en/Main/ArduinoShields)来通过电缆与 Arduino - Android 通信吗？两者都是奴隶（所以当 Android/Arduino 插入 PC 时，PC 会控制它）。试用*[适用于 Arduino 的 USB Host Shield 2.0](http://www.ebay.com.au/itm/USB-Host-Shield-2-0-For-Arduino-/330832197023?pt=LH_DefaultDomain_15&hash=item4d0722b59f)*。

再说一次，我可能是错的。我希望这有帮助。

# objective-c - 优化 -drawRect: 方法的建议

> ID：15596377
> 
> 赞同：1
> 
> 时间：2013-03-24T08:02:05.870
> 
> 标签：objective-c, core-graphics, drawrect, cgcontext

    我想画 31 个不同笔画宽度的圆圈。在我看来，我不能重用它，因为我无法缩放它，所有圈子都有不同的选择。这些视图不是静态的，当我推动我的视图控制器时，我总是必须重新绘制它。

**更新部分：**

    这是我`drawRect:`在**CircleView.m**中的方法的 Time Profiler 的屏幕截图，当我转换到具有 31 个圆圈的视图时：

![Time Profiler 屏幕截图：过渡到 31 个圆圈的视图，没有任何优化](../Images/6622d37e2e64c056a5c5fac0aeabd300.png) ![在此处输入图像描述](../Images/e7c0bf84a5655e8a37aa42393c9ced18.png)

    按照计划，用户会经常交换视图，每次都等待重绘变得很烦人。
    我有几个自定义容器视图。另外约 30% 的时间用于从情节提要中加载视图。尽管如此，我还是觉得很奇怪，因为现在OtherTimeWasteView只有一个subView：DatePickerView，但是根据TProfile的运行时间是84ms，100%都花在了`[super loadView]`方法上。

**我的天真（？）优化尝试：**

    我之前尝试过一次加载这个视图，将它存储在 parentViewController“combinedViewController”中并一直重复使用它。我在**CircleView.h**添加了属性：

```
@property (strong,nonatomic) UIImage *imageCircle; 
```

    然后我通过添加调用方法 对**CircleView.m进行了一些更改：**`-createImage`

```
- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
        self.imageCircle=[self createImage];
    }
    return self;
}

-(UIImage*)createImage
{
    CGSize size=self.frame.size;

    UIGraphicsBeginImageContextWithOptions(size, NO, 1.0);

    CGContextRef contextRef = UIGraphicsGetCurrentContext();

    self.brush=0.6;

    CGRect frameOfCircle=CGRectMake(self.brush/2,self.brush/2, self.frame.size.width-self.brush-1.0f, self.frame.size.height-self.brush);
    // Draw a circle (border only)
    CGContextSetLineWidth(contextRef, self.brush);
    CGFloat mainColor[4]={23.0f/255.0f, 12.0f/255.0f, 0.0f, 0.5};
    CGContextSetStrokeColor(contextRef, mainColor);
    CGContextStrokeEllipseInRect(contextRef, frameOfCircle);

    UIImage *image = UIGraphicsGetImageFromCurrentImageContext();

    UIGraphicsEndImageContext();

    return image;

} 
```

**combineViewController.m：**
这是我尝试在可见区域之外初始化前 10 个圆圈：

```
-(void)createCircles

    {
        self.arrayOfCircles=[[NSMutableArray alloc]init];
        for (int i=0; i<10; i++)
        {
            [self.arrayOfCircles addObject:[self circleViewWithRadius:530+i*35 withBrush:5+i tag:1014+i alphaParam:0.60]];
        }

    } 
```

我想在 CirclesViewController.m 中**添加Subview：**

```
-(void)addCircles

    {
        CombinedViewController *parentVC=(CombinedViewController*)[self parentViewController];
        for (int i=0; i<10; i++)
        {

            CircleView *circle=(CircleView*)[parentVC.arrayOfCircles objectAtIndex:i];
            UIImageView *imgv=[[UIImageView alloc]initWithImage:circle.imageCircle];
            imgv.center=CGPointMake(self.view.frame.size.width/2,self.view.frame.size.height/2);
            [self.view insertSubview:imgv belowView:someView];
        }

    }

-(void)viewWillAppear:(BOOL)animated
{
   [super viewWillAppear:animated];  
   [self addCircles];
} 
```

a）不幸的是，如果我尝试第二种方法，则*没有*添加任何圆圈。我用断点调试，arrayOfCircles 不是 nil，circle 的 image 属性也不是 nil。但是，在我看来仍然没有圈子。我的代码有什么错误吗？

b）通过提前从 CGContext 获取图像来优化性能是否*合适？*如果不是，我恳请您忽略我的“a”问题，并提供一些如何正确获得高性能的提示。
太谢谢了！

**UPDATE2：** 链接：[http ://i.stack.imgur.com/EstBG.png](https://i.stack.imgur.com/Kw0cz.png)
[http://i.stack.imgur.com/uAjSJ.png](https://i.stack.imgur.com/EstBG.png)
[http://i.stack.imgur.com/Kw0cz.png](https://i.stack.imgur.com/uAjSJ.png)

# javascript - 从 html 元素中添加或删除类如何影响 onclick 和附加到这些元素的其他类似功能？

> ID：15596378
> 
> 赞同：1
> 
> 时间：2013-03-24T08:02:14.133
> 
> 标签：javascript, jquery, javascript-events, onclick, addclass

我有一些简单的代码。我正在使用`Jquery`. 我有两个元素，它们分配了一个特定的类 a。其中之一也被分配了类`b1`。

b1 类有一个`onclick`属性。

现在我放置一个按钮，单击该按钮时会尝试从所有元素中删除类 b1 。但即使在那之后，我看到点击功能仍然有效。

有人可以解释一下吗？[我在jsfiddle](http://jsfiddle.net/Ktfyz/)上有我的代码

我观察到只有 CSS 属性被添加。与这些元素相关的 javascript 事件没有到位。

```
<body>
    <table>
        <tr>
            <td class="a b1" id="cell1">Cell 1</td>
            <td class="a b2" id="cell2">Cell 2</td>
        </tr>
    </table> <a href="#" id="click1">Remove B1 </a>
    <br/>
</body>

<script>
    $(document).ready(function() {

    $(".b1").click(function () {

            alert("B1");

        });

        $("#click1").click(function () {
            alert("removed b1");

            $(".a").removeClass('b1');
              alert("removed b1 from all elements. ");

    //even after executing this statment - the onclick still remains active.

        });
    });
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T08:05:19.230

`$(".b1")`返回元素并将`.click()`事件处理程序附加到元素本身。选择器不是“动态的”。您正在寻找的是事件委托：

```
$('table').on('click', '.b1', function() {
    ...
}); 
```

这会将事件处理程序附加到`table`元素，然后将其委托给与该选择器匹配的子元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T08:04:26.793

您将`onclick`事件处理程序附加到与选择器匹配的元素。选择器只是抓取元素的集合，然后将其应用于它们，您不能将事件处理程序应用于类。

你可以做这样的事情，只在类存在时运行处理程序。

```
$(".b1").click(function () {
    if ($(this).hasClass('b1')) {
        alert("B1");
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T08:11:39.597

JavaScript 在此实例中的工作方式是，一旦文档准备就绪，它会将侦听器添加到适当的 DOM 对象。*（所以在这种情况下，它会将点击侦听器添加到文档完成加载时*具有类 b1 的所有标签）。即使您在文档加载完成后更改了类，侦听器仍会查找原始标签。

为了使函数仅在当前选定的元素上运行，请尝试[on()](http://api.jquery.com/on/)函数

# c++ - 单例类中的 C++ 链接器错误未定义引用

> ID：15596381
> 
> 赞同：-1
> 
> 时间：2013-03-24T08:02:38.997
> 
> 标签：c++, design-patterns, singleton, linker-errors

我正在尝试将此 java 单例类移植到 C++：

```
public class Singleton {
private static Singleton uniqueInstance;

private Singleton() {} 
public static Singleton getInstance() {
    if (uniqueInstance == null) {
        uniqueInstance = new Singleton();
    }
        return uniqueInstance;
    }
} 
```

我移植到这个 C++ 代码：

```
class Singleton {
private:
  Singleton() {
    cout << "new Singleton is called" << endl;
  }
  static Singleton* uniqueInstance;
public:
   static Singleton* getInstance() {
    if (!uniqueInstance) {
      uniqueInstance = new Singleton();
    }
    return uniqueInstance;
  }
}; 
```

但我不能编译这个！并且发生 gcc 链接器错误。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-24T08:06:10.897

确保`static`在声明之外定义成员：

```
Singleton* Singleton::uniqueInstance = nullptr; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T08:07:19.690

您的 cpp 文件可能没有为静态实例保留空间，您需要添加 `Singelton* Singleton::uniqueInstance = NULL;`到您的 cpp 文件中，然后在第一次调用中分配它

# android - 如何创建在配置更改后仍然存在的 CountDownTimer

> ID：15596382
> 
> 赞同：1
> 
> 时间：2013-03-24T08:02:59.453
> 
> 标签：android, countdowntimer

比如说，如果我希望 CountDownTimer 在完成后更新一些 UI 元素，但在倒计时中间发生了配置更改，从而强制重新创建活动。

```
public class MyActivity extends Activity {

    private TextView textView;

    ....

    public void onButtonClicked(View view)
    {
        // start CountDownTimer
        new CountDownTimer(10000, 10000) {
            public void onTick(long millisUntilFinished) {
                // do nothing
            }
            public void onFinish() {
                textView.setText("Hello World!");
            }
        }.start();
    }

} 
```

我发现当 CountDownTimer 完成时，它设置了活动中的 textView 刚刚被破坏，但不是重新创建的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T08:06:37.723

[http://developer.android.com/guide/topics/resources/runtime-changes.html](http://developer.android.com/guide/topics/resources/runtime-changes.html)

```
@Override
public void onSaveInstanceState(Bundle savedInstanceState) {
super.onSaveInstanceState(savedInstanceState);
// Save UI state changes to the savedInstanceState.
// This bundle will be passed to onCreate if the process is
// killed and restarted.
savedInstanceState.putString("timer",1223);

// etc.
}

@Override
public void onRestoreInstanceState(Bundle savedInstanceState) {
super.onRestoreInstanceState(savedInstanceState);
// Restore UI state from the savedInstanceState.
// This bundle has also been passed to onCreate.
 time = savedInstanceState.getString("time");
} 
```

当您拥有大量数据时，例如来自数据库或数组列表的数据。

```
@Override 
public Object onRetainNonConfigurationInstance() {
final MyDataObject data = collectMyLoadedData(); 
return data;
} 
```

在 onCreate

```
 final MyDataObject data = (MyDataObject) getLastNonConfigurationInstance();
if (data == null) {
    data = loadMyData();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T20:19:17.430

我已经实现了一个可暂停的 CountDownTimer 并在调用 onPause()/onResume() 时暂停/恢复它，并在带有 setRetainInstance(true) 的片段中引用它。它现在可以在屏幕旋转或任何配置更改后保持进度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T08:04:50.493

您可以将计数是否完成存储在文件中

[http://developer.android.com/guide/topics/data/data-storage.html](http://developer.android.com/guide/topics/data/data-storage.html)

并在之后参考这个文件

# c# - RegEx.Replace 问题 - 自定义 URL 重写

> ID：15596391
> 
> 赞同：0
> 
> 时间：2013-03-24T08:05:06.367
> 
> 标签：c#, regex, asp.net-mvc

我正在尝试编写自己的 301 重定向。我有 2 个字符串。一个是旧网址，另一个是新网址。示例如下

**原始网址：**

```
procurement-notice-(\d+).html 
```

**新网址：**

```
/Bids/Details/$1 
```

像这样，我有很多新旧网址。我正在执行以下操作以匹配正常工作的 Urls。其中“重定向”是一个包含新旧 url 的字典。

```
var matchedURL = redirect.SingleOrDefault(d => Regex.Match(url, d.Key, RegexOptions.Singleline).Success); 
```

但现在我想用新的 url 替换匹配的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T08:22:16.400

您已匹配 URL，其中 Key - 旧 url 正则表达式和 Value - 新 url 替换模式。

您可以使用 Regex.Replace 方法，该方法接受 3 个字符串参数。

```
using System;
using System.Text.RegularExpressions;

class App
{
  static void Main()
  {
    var input = "procurement-notice-1234.html";
    var pattern = @"procurement-notice-(\d+).html";
    var replacement = "/Bids/Details/$1";
    var res = Regex.Replace(input, pattern, replacement);
    Console.WriteLine(res);
    // will output /Bids/Details/1234
  }
} 
```

因此，在您的情况下，代码可能如下所示：

```
var matchedURL = redirect.SingleOrDefault(d => Regex.Match(url, d.Key, RegexOptions.Singleline).Success);
if (matchedURL != null)
{
  var result = Regex.Replace(url, matchedURL.Key, matchedURL.Value);
} 
```

# javascript - HTML5 缓冲并使用 createMediaElementSource() 播放音频

> ID：15596392
> 
> 赞同：1
> 
> 时间：2013-03-24T08:05:16.553
> 
> 标签：javascript, html, web-audio-api

我正在使用音频 API 在网页中即时播放 iOS 6 中的声音。我已经使用 Ajax 调用完成了它，就像建议的文档一样，效果很好。但是，我读到您可以在没有 Ajax 调用的情况下使用 createMediaElementSource() [https://developer.apple.com/library/archive/documentation/AudioVideo/Conceptual/Using_HTML5_Audio_Video/PlayingandSynthesizingSounds/PlayingandSynthesizingSounds.html做同样的事情](https://developer.apple.com/library/archive/documentation/AudioVideo/Conceptual/Using_HTML5_Audio_Video/PlayingandSynthesizingSounds/PlayingandSynthesizingSounds.html)

但是，似乎以这种方式从音频节点加载，您不能使用 noteon(0) 方法 - 所以实际上无法播放声音！

有没有人让这个工作？我想创建一些降级为使用音频元素的可重用函数，而不是依赖于 Ajax 调用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T15:16:43.350

您仍然可以在传递给 createMediaElementSource() 的音频元素上调用 play() 和 pause() 方法。以下站点演示了 MediaElementAudioSourceNode 的使用： [http ://webaudioapi.com/samples/audio-tag](http://webaudioapi.com/samples/audio-tag)

# php - 更新mysql数据库中的数据

> ID：15596394
> 
> 赞同：-4
> 
> 时间：2013-03-24T08:05:28.613
> 
> 标签：php, mysql, updates

// 我有 3 个 .php。代码没有给出任何错误，但它没有；t 修改数据。第一个是edit.php，下面是以下代码：

```
 <?php

       include"db.php";//database connection

        /*$result = mysql_query("SELECT * FROM inward ");
    $row = mysql_fetch_array($result);*/
          $order = "SELECT * FROM inward";
          $result = mysql_query($order);
          while ($row=mysql_fetch_array($result))
          {
           $inwardid = $row['inwardID'];    
                    echo "<tr align='center'>"; 
                    echo"<td><font color='black'>" .$row['inwardID']."</font></td>";
                    echo"<td><font color='black'>" .$row['inreceiptno']."</font></td>";
                    echo"<td><font color='black'>". $row['inreceiptdt']. "</font></td>";
                    echo"<td><font color='black'>". $row['sendername']. "</font></td>";
                    echo"<td><font color='black'>". $row['senderaddress']. "</font></td>";  
                    echo"<td><font color='black'>" .$row['insubject']."</font></td>";
                    echo"<td><font color='black'>" .$row['inacceptedby']."</font></td>";
                    echo"<td><font color='black'>" .$row['inreceiptmode']."</font></td>";
                    echo"<td><font color='black'>" .$row['remark']."</font></td>";
                    echo"<td><font color='black'>" .$row['person']."</font></td>";
                    echo"<td><font color='black'>" .$row['duedate']."</font></td>";
                    echo"<td><font color='black'>" .$row['compliancemode']."</font></td>";
                    echo"<td><font color='black'>" .$row['adreceiptdate']."</font></td>";
                    echo"<td><font color='black'>" .$row['filename']."</font></td>";

            echo ("<td><a href=\"edit_form.php?id=".$row['inwardID']."\">Edit</a></td></tr>");

          }
    ?> 
```

// 我的第二个文件名是edit_form.php。源代码是：

```
 <?php
      include "db.php";//database connection
      $id = $_GET["id"];

     /* $result = mysql_query("SELECT * FROM inward WHERE inwardID='$id'");
$row = mysql_fetch_array($result);*/

       $order = "SELECT * FROM inward 
where inwardID='$id'";
      $result = mysql_query($order);
      $row = mysql_fetch_array($result);
      ?>
      <form method="post" action="edit_data.php">
      <input type="hidden" name="id" value="<?php echo $row['inwardID']; ?>">

        <tr>        
          <td>Receipt No</td>
          <td>
            <input type="text" name="inreceiptno" size="20" value="<?php echo "$row[inreceiptno]"?>">
          </td>
        </tr>

        <tr>
          <td>Receipt Date</td>
          <td>
            <input type="text" name="inreceiptdt" size="40" value="<?php echo "$row[inreceiptdt]"?>">
          </td>
        </tr>

        <tr>
          <td>Sender Name</td>
          <td>
            <input type="text" name="sendername" size="40" value="<?php echo "$row[sendername]"?>">
          </td>
        </tr>

        <tr>
          <td>Sender Address</td>
          <td>
            <input type="text" name="senderaddress" size="40" value="<?php echo "$row[senderaddress]"?>">
          </td>
        </tr>

        <tr>
          <td>Subject</td>
          <td>
            <input type="text" name="insubject" size="40" value="<?php echo "$row[insubject]"?>">
          </td>
        </tr>

        <tr>
          <td>Accepted by</td>
          <td>
            <input type="text" name="inacceptedby" size="40" value="<?php echo "$row[inacceptedby]"?>">
          </td>
        </tr>

        <tr>
          <td>Receipt Mode</td>
          <td>
            <input type="text" name="inreceiptmode" size="40" value="<?php echo "$row[inreceiptmode]"?>">
          </td>
        </tr>

        <tr>
          <td>Remark For Action</td>
          <td>
            <input type="text" name="remark" size="40" value="<?php echo "$row[remark]"?>">
          </td>
        </tr>

        <tr>
          <td>Responsible Person</td>
          <td>
            <input type="text" name="person" size="40" value="<?php echo "$row[person]"?>">
          </td>
        </tr>

        <tr>
          <td>Compliance Due Date</td>
          <td>
            <input type="text" name="duedate" size="40" value="<?php echo "$row[duedate]"?>">
          </td>
        </tr>

        <tr>
          <td>Mode of Compliance Sent</td>
          <td>
            <input type="text" name="compliancemode" size="40" value="<?php echo "$row[compliancemode]"?>">
          </td>
        </tr>

        <tr>
          <td>Date of A.D.receipt ( If A.D.)</td>
          <td>
            <input type="text" name="adreceiptdate" size="40" value="<?php echo "$row[adreceiptdate]"?>">
          </td>
        </tr>

        <tr>
          <td>Name of the file for record</td>
          <td>
            <input type="text" name="filename" size="40" value="<?php echo "$row[filename]"?>">
          </td>
        </tr>

        <tr>
          <td align="right"> <input name="submit" type="submit" value="save">

          </td>
        </tr>
      </form>
            </table>

    </td>
  </tr>
</table> 
```

//我的第三个文件是edit_data.php。代码是：

```
include "db.php";
if(isset($_POST['save']))
{   
    $inreceiptno= $_POST['inreceiptno'] ;                   
    $inreceiptdt=$_POST['inreceiptdt'] ;
    $sendername=$_POST['sendername'] ;
    $senderaddress=$_POST['senderaddress'] ;
    $insubject=$_POST['insubject'] ;
    $inacceptedby=$_POST['inacceptedby'] ;
    $inreceiptmode=$_POST['inreceiptmode'] ;
    $remark=$_POST['remark'];
    $person=$_POST['person'];
    $duedate=$_POST['duedate'];
    $compliancemode=$_POST['compliancemode'];
    $adreceiptdate=$_POST['adreceiptdate'];
    $filename=$_POST['filename'];

$order= "UPDATE inward SET inreceiptno='$inreceiptno',
                                    inreceiptdt='$inreceiptdt',
                                    sendername='$sendername',
                                    senderaddress='$senderaddress',
                                    insubject='$insubject',
                                    inacceptedby='$inacceptedby',
                                    inreceiptmode='$inreceiptmode',
                                    remark='$remark',
                                    person='$person',
                                    duedate='$duedate',
                                    compliancemode='$compliancemode',
                                    adreceiptdate='$adreceiptdate',
                                    filename='$filename'
            WHERE inwardID='$id'";
            }
            }
mysql_query($order);

header("location:edit.php");

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T08:08:09.980

您的支票不正确，无法`if(isset($_POST['save']))`将其更改为：

```
if(isset($_POST['submit'])) 
```

因为您没有任何名为 save 的输入

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T08:08:19.937

在edit_data.php

改变

```
if(isset($_POST['save'])) 
```

至

```
if(isset($_POST['submit'])) 
```

并把 mysql_query($order); 在 if 语句中

更改代码，例如

```
include "db.php";
if(isset($_POST['save']))
{   
    $inreceiptno= $_POST['inreceiptno'] ;                   
    $inreceiptdt=$_POST['inreceiptdt'] ;
    $sendername=$_POST['sendername'] ;
    $senderaddress=$_POST['senderaddress'] ;
    $insubject=$_POST['insubject'] ;
    $inacceptedby=$_POST['inacceptedby'] ;
    $inreceiptmode=$_POST['inreceiptmode'] ;
    $remark=$_POST['remark'];
    $person=$_POST['person'];
    $duedate=$_POST['duedate'];
    $compliancemode=$_POST['compliancemode'];
    $adreceiptdate=$_POST['adreceiptdate'];
    $filename=$_POST['filename'];

$order= "UPDATE inward SET inreceiptno='$inreceiptno',
                                    inreceiptdt='$inreceiptdt',
                                    sendername='$sendername',
                                    senderaddress='$senderaddress',
                                    insubject='$insubject',
                                    inacceptedby='$inacceptedby',
                                    inreceiptmode='$inreceiptmode',
                                    remark='$remark',
                                    person='$person',
                                    duedate='$duedate',
                                    compliancemode='$compliancemode',
                                    adreceiptdate='$adreceiptdate',
                                    filename='$filename'
            WHERE inwardID='$id'";
mysql_query($order);
            }
header("location:edit.php");

?> 
```

# java - 获得 NPE（已编辑）

> ID：15596398
> 
> 赞同：1
> 
> 时间：2013-03-24T08:06:04.580
> 
> 标签：java, android, nullpointerexception, runtime

我仍在获得 NPE，但现在它来自我的 onCreate()。当我删除按钮时，一切正常。

这是 XML（每个表行都来自单独的 XML）：

```
<TableRow
        android:id="@+id/tableRow1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginTop="50dp" >

        <Button
            android:id="@+id/doneP1"
            android:layout_width="50dp"
            android:layout_height="wrap_content"
            android:text="Done" />

        <Button
            android:id="@+id/resetP1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Reset" />

    </TableRow>

<TableRow
            android:id="@+id/tableRow1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="50dp" >

            <Button
                android:id="@+id/doneP2"
                android:layout_width="50dp"
                android:layout_height="wrap_content"
                android:text="Done" />

            <Button
                android:id="@+id/resetP2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Reset" />

        </TableRow> 
```

这是代码：

```
@Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.tictactoegame);

        /*doneP1 = (Button) this.findViewById(R.id.doneP1);
        doneP2 = (Button) this.findViewById(R.id.doneP2);
        resetP1 = (Button) this.findViewById(R.id.resetP1);
        resetP2 = (Button) this.findViewById(R.id.resetP2);

        checkTurn(); //starts the game

        //buttons
        doneP1.setOnClickListener(this);
        doneP2.setOnClickListener(this);
        resetP1.setOnClickListener(this);
        resetP2.setOnClickListener(this);*/ //commented out 
    } 
```

在 onCreate 之外

```
@Override
public void onClick(View v) {
       switch(v.getId()) {
       case R.id.doneP1:
            checkTurn();
           break;
       case R.id.doneP2:
           checkTurn();
           break;
       case R.id.resetP1:
           break;
       case R.id.resetP2:
           break;
       }
} 
```

这是checkturn

```
public void checkTurn()
    {
        if(turn == 1)
        {
            changeLayout(turn);
            turn = 2;
        }
        else
        {
            changeLayout(turn);
            turn = 1;
        }
    } 
```

这是changelayout（编辑：新的changeLayout，我刚刚重新初始化了方法中的每个按钮但仍然没有效果，我做得对吗？）

```
public void changeLayout(int turn)
{
    FragmentManager fm       = getSupportFragmentManager();
    Fragment        fragment = fm.findFragmentById(R.id.fragment_container);
    FragmentTransaction ft;

    if(turn == 1) //if its player 1's turn
    {  
        doneP1 = (Button) this.findViewById(R.id.doneP1);
        resetP1 = (Button) this.findViewById(R.id.resetP1);
        doneP1.setOnClickListener(this);
        resetP1.setOnClickListener(this);
        if(fragment == null) //checks wether the current framelayout contains a fragment or not
        {   
            ft = fm.beginTransaction();
            ft.add(R.id.fragment_container, new PlayerTurn1());
            ft.commit(); 
            //setPlayer1();
        }
        else
        {
            ft = fm.beginTransaction();
            ft.replace(R.id.fragment_container, new PlayerTurn1());
            ft.commit();

        }
    }
    else
    {   
        doneP2 = (Button) this.findViewById(R.id.doneP2); 
        resetP2 = (Button) this.findViewById(R.id.resetP2);  
        doneP2.setOnClickListener(this);
        resetP2.setOnClickListener(this);
        if(fragment == null)
        {
            ft = fm.beginTransaction();;
            ft.add(R.id.fragment_container, new PlayerTurn2());
            ft.commit(); 
            //setPlayer2();
        }
        else
        {
            ft = fm.beginTransaction();;
            ft.replace(R.id.fragment_container, new PlayerTurn2());
            ft.commit(); 
        }
    }
} 
```

这是logcat

> 03-24 07:51:55.954: E/AndroidRuntime(5092): 引起: java.lang.NullPointerException 03-24 07:51:55.954: E/AndroidRuntime(5092): 在 As2.packageTK.TicTacToeGame.onCreate(TicTacToeGame .java:88)

第 88 行是：

```
doneP1.setOnClickListener(this); 
```

我已经为此工作了大约 4 个小时，但我仍然无法解决一个简单的问题。我的头在流口水，我真的很累，我想在睡觉前解决这个问题，所以我会很感激快速响应。我清理并重建了我的问题......什么都没有。一切似乎都很好，但没有...... NPE 总是要闯入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T08:18:42.080

如果你得到一个 NPE

```
doneP1.setOnClickListener(this); 
```

这意味着 doneP1 为空。您是否仅通过打印/登录 doneP1、doneP2、resetP1 和 resetP2（当然在第 88 行之前）进行了检查。例如：

```
Log.d(TAG, "doneP1 = "+doneP1);
Log.d(TAG, "doneP2 = "+doneP2);
... 
```

我的猜测是所有这些组件都是空的。这意味着您可能加载了错误的布局。或者，也许您从一开始就加载了正确的内容，但您将其更改为其他内容

```
public void changeLayout(int turn) 
```

**编辑：**

您的 TableRows 有不同的布局？

```
"Here are the XML(each table rows are from separate XMLs):" 
```

那么当你加载 P2 布局时，当然 P1 组件将为空，反之亦然。

**编辑2：**

在 changeLayout 中加载您的引用。由于您同时在屏幕上只有两个按钮（重置和完成），您实际上只需要两个引用（即您不需要 donep1 和 donep2）。然后在更改布局中更改对正确按钮的引用。因此，您需要在按钮的 onClick 中轮到谁的逻辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T08:26:18.057

看起来你正在获得这些视图`onCreate`：

```
 doneP1 = (Button) this.findViewById(R.id.doneP1);
    doneP2 = (Button) this.findViewById(R.id.doneP2);
    resetP1 = (Button) this.findViewById(R.id.resetP1);
    resetP2 = (Button) this.findViewById(R.id.resetP2); 
```

但是在您更改为打开并更改了您的布局之后：

```
public void checkTurn()
{
    if(turn == 1)
    {
        changeLayout(turn);
        turn = 2;
    }
    else
    {
        changeLayout(turn);
        turn = 1;
    }
} 
```

并运行这个：

```
ft.replace(R.id.fragment_container, new PlayerTurn1()); 
```

你基本上失去了对这些观点的参考。因为已经不存在了。它们被另一个片段的观点所取代。

**编辑：**

另一种方法是`onClick`在布局文件中设置属性：

设置`"android:onClick="onDoneButtonOnClick"`

并在您的活动中创建方法：

```
public void onDoneButtonOnClick (View v)
{
      // do here what every you want with this button.
} 
```

在这种情况下，您必须`onClickListener`从您的活动中删除实现。

# php - 使用 xDebug、Eclipse 和 Chrome 调试 php：浏览器输出不使用断点更新

> ID：15596399
> 
> 赞同：1
> 
> 时间：2013-03-24T08:06:06.683
> 
> 标签：php, eclipse, google-chrome, xdebug, eclipse-pdt

我设法用 PDT 安装 Eclipse，用 XAMPP 安装 xDebug 并使用 Chrome 作为 Eclipse 的外部浏览器。我现在的问题是，如果我在我的 PHP 代码中设置断点，调试器会按预期停止。然而，浏览器输出仅在所有 PHP 代码块执行完毕后才会显示结果。例如，如果我有一个这样的 php 文件：

```
<?php 
    echo 'Test Line 1';
    echo 'Test Line 2';
    echo 'Test Line 3';
    echo 'Test Line 4';
    echo 'Test Line 5';
    echo 'Test Line 6';
    echo 'Test Line 7';
?> 
```

我在每一行设置断点，调试器将在每一行停止，但浏览器将在所有代码执行后显示最终结果，而不是在我处于断点时显示每个输出。

有什么建议我可以正确设置吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T23:57:08.927

您的输出被缓冲。[有关输出缓冲控制](http://php.net/manual/en/book.outcontrol.php)的信息，请参阅 PHP 手册。

另外，请参阅此答案：[PHP flushing output as soon as you call echo](https://stackoverflow.com/questions/3483035/php-flushing-output-as-soon-as-you-call-echo)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-08T07:04:19.283

添加 ob_get_contents() Eclipse 表达式，您将看到缓冲区

# javascript - 如何在 jQuery 中使用 .=

> ID：15596407
> 
> 赞同：-1
> 
> 时间：2013-03-24T08:07:08.453
> 
> 标签：javascript, jquery, string, string-concatenation

我有一些 HTML，例如：

```
<div class="blah">
    <span class="fileName">1.jpg</span>
</div>
<div class="blah">
    <span class="fileName">2.jpg</span>
</div>
<div class="blah">
    <span class="fileName">3.jpg</span>
</div>
<div class="blah">
    <span class="fileName">4.jpg</span>
</div> 
```

我想用 jQuery 获取文件名（一个存储诸如 1.jpg、2.jpg、3.jpg、4.jpg 之类的变量的变量）。

我终于可以用一个隐藏的输入框来做到这一点，这是我的工作脚本：

```
<input type="hidden" id="img_names_input" />
<script>
$('.fileName').each(function(){
    var img_names_input = $(img_names_input).val();
    var img_names = $(this).html();
    $(img_names_input).val(img_names_input+','+img_names);
});
</script> 
```

这工作得很好，但对我来说似乎不是一个完美的解决方案，我只是一个学习者，任何人都可以提出更好的解决方案？就像是：

```
$('.fileName').each(function(){
        var img_names .= ',' + $(this).html();
        alert(img_names);
    }); 
```

或者可能是某种数组实现在这里......！？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T08:08:53.040

使用`+=`而不是`.=`.

您需要`+`在 javascript 中连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T08:10:47.610

JavaScript 用于`+`连接字符串。我会做一个数组：

```
var images = [];

$('.fileName').each(function() {
    images.push($(this).text());
}); 
```

或与`.map()`：

```
var images = $('.fileName').map(function() {
    return $(this).text();
}).get(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T08:11:33.167

代码应该是这样的：

```
var img_names = "";
$('.fileName').each(function() {
    img_names += $(this).html();
});
$('#img_names_input').val(img_names); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-24T08:17:37.760

这个试试这个片段。可能会帮助你。

```
$(document).ready(function() {
    var img_names = [];
    $('.fileName').each(function(index){
        img_names.push($(this).html());     
    });
    alert(img_names);
}); 
```

请注意，这`.=`在 javascript 中不起作用。

# codeigniter - 自定义 pyro cms -> css 和 js 不起作用

> ID：15596411
> 
> 赞同：0
> 
> 时间：2013-03-24T08:07:33.600
> 
> 标签：codeigniter, codeigniter-2, codeigniter-url, pyrocms, pyrocms-lex

我想自定义主题在 addons->themes->myprojectname 我保留了 css,img,js,views,theme.php 并从 pyrocms 的控制面板激活了主题

1）在views->partials->meta.html中我保留了这样的

```
{{ theme:favicon file="favicon.ico" }}

{{ theme:css file="style.css" }}

{{ theme:css file="cake-debug.css" }}

{{ theme:css file="global.css" }}

{{ theme:css file="jquery-ui.css" }} 
```

我的页面，即视图在模块中，但这个 css 并不适用于我的页面，而是页面。

！）这个页面不是pyro cms主题页面，它是.html页面重命名为.php并放置在视图中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T12:23:46.503

您可能在单独的文件夹中拥有 css 图像和 js 文件。像这样试试

```
{{ theme:favicon file="img/favicon.ico" }}

{{ theme:css file="css/style.css" }}

{{ theme:css file="css/cake-debug.css" }}

{{ theme:css file="css/global.css" }}

{{ theme:css file="css/jquery-ui.css" }} 
```

# php - Magento 如何获取覆盖的资源集合对象？

> ID：15596417
> 
> 赞同：0
> 
> 时间：2013-03-24T08:08:35.837
> 
> 标签：php, collections, magento-1.7

我想按受欢迎程度对类别页面产品进行排序。所以我创建了一个模块。

```
class Tal_Popularity_Model_Config extends Mage_Catalog_Model_Config
{
    public function getAttributeUsedForSortByArray()
    {
        $options = array(
            'position'      => Mage::helper('catalog')->__('Position'),
            'popularity'    => Mage::helper('catalog')->__('Popularity'),
            'topsellings'   => Mage::helper('catalog')->__('Top Selling') 
        );
        foreach ($this->getAttributesUsedForSortBy() as $attribute) 
        {
            /* @var $attribute Mage_Eav_Model_Entity_Attribute_Abstract */
            $options[$attribute->getAttributeCode()] = $attribute->getStoreLabel();
        }

        return $options;
    }
} 
```

配置文件

```
....
<global>
    <models>
        <catalog>
            <rewrite>
                <config>Tal_Popularity_Model_Config</config>
                <category>Tal_Popularity_Model_Category</category>
               <resourceModel>catalog_resource</resourceModel>
            </rewrite>
        </catalog>   
        <catalog_resource>
            <rewrite>
                <product_collection>Tal_Popularity_Model_Resource</product_collection>
            </rewrite>
        </catalog_resource>
    </models>
     <blocks>
        <catalog>
            <rewrite>
                <product_list_toolbar>Tal_Popularity_Block_Product_List_Toolbar</product_list_toolbar>
            </rewrite>
           </catalog>
        </blocks>
... 
```

资源收集

```
class Tal_Popularity_Model_Resource_Product_Collection extends Mage_Catalog_Model_Resource_Product_Collection
{

    public function sortByReview($dir)
    {
         $table = $this->getTable('review/review');
         $entity_code_id = Mage::getModel('review/review')->getEntityIdByCode(Mage_Rating_Model_Rating::ENTITY_PRODUCT_CODE); 
         $cond = $this->getConnection()->quoteInto('t2.entity_pk_value = e.entity_id and ','').$this->getConnection()->quoteInto('t2.entity_id = ? ',$entity_code_id); 
         $this->getSelect()->joinLeft(array('t2'=>$table), $cond,array('review' => new Zend_Db_Expr('count(review_id)'))) 
        ->group('e.entity_id')->order("review $dir"); 
 }

} 
```

类别模型类

```
 class Tal_Popularity_Model_Category extends Mage_Catalog_Model_Category
    {

        public function getProductCollection()
        {  

       //    $collection = Mage::getModel('catalog/config')->getCollection()
       $collection = Mage::getResourceModel('tal_popularity/product')->getCollection()
                ->setStoreId($this->getStoreId())
                ->addCategoryFilter($this);
            return $collection;
        }
    } 
```

这些代码有什么错误？我找不到。有没有更好的方法来按 popl=ularity 而不是这样对类别页面产品进行排序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T08:18:58.193

你的`Tal_Popularity_Model_Category`班级应该更像这样：

```
public function getProductCollection()
{
    $collection = Mage::getResourceModel('catalog/product_collection')
        ->setStoreId($this->getStoreId())
        ->addCategoryFilter($this)
        ->sortByReview('ASC')
    ;
    return $collection;
} 
```

# javascript - 强制重新加载javascript

> ID：15596422
> 
> 赞同：0
> 
> 时间：2013-03-24T08:08:54.333
> 
> 标签：javascript, lightbox

我已经修改了js，`lightbox`不知道怎么做才能让其他浏览器为新版本加载。在我的机器上我做到了`Ctrl-F5`，但我不知道如何为访问者浏览器做到这一点。我在想我可以修改 的文件名`.js`，但这不是一个干净和公平的方法。

你有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T10:08:07.670

尝试从您的配置服务器发送 version_number 。

```
<script src="lightbox.js?version_number"></script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T08:30:17.660

你可以使用这样的东西：

```
randomNumber = Math.floor(Math.random()*999);

<script src="lightbox.js?randomNumber"></script> 
```

它应该强制浏览器在每次页面刷新时去下载最新版本的 js 文件。

# lua - 如何在 iupLua 中显示更改的标签图像？

> ID：15596423
> 
> 赞同：1
> 
> 时间：2013-03-24T08:09:01.043
> 
> 标签：lua, luabind

当我更改标签的图像属性后，图像无法显示。当我双击列表更改标签图像但没有响应时，图像不显示。为什么？

```
require "iuplua"
require "iupluaim"
list = iup.list{"flag", "cut", "undo"; expand = "no"}
image = nil
box = nil
label = iup.label{active = "yes", visited = "true"}
function list:dblclick_cb(i, str)
    image = iup.LoadImage(str .. ".PNG")
    label.image = image
end
box = iup.vbox{list, label}
dlg = iup.dialog{box; title = "Lists", size = "400x100"}
dlg.show(dlg)
iup.MainLoop() 
```

# c# - 尝试关闭（）串行端口后程序崩溃

> ID：15596427
> 
> 赞同：1
> 
> 时间：2013-03-24T08:10:03.940
> 
> 标签：c#, serial-port

我正在编写控制机器人的应用程序。我有一个按钮单击方法，它应该打开或关闭端口。

```
private void cONNECTToolStripMenuItem_CheckStateChanged(
                 object sender, EventArgs e)
{
    if (cONNECTToolStripMenuItem.Checked)
    {
        cONNECTToolStripMenuItem.Text = "DISCONNECT!";
        ports.connect();
    }
    else
    {
        cONNECTToolStripMenuItem.Text = "CONNECT!";
        ports.disconnect();
    }
} 
```

此外，我有 DataReceived 事件处理程序，它在接收到来自串行端口的一些数据后调用。

```
private void serialPort_DataReceived(
                 object sender, System.IO.Ports.SerialDataReceivedEventArgs e)
{
    SerialPort sp = (SerialPort)sender;
    string data = sp.ReadExisting();

    mainForm.addData(data);
} 
```

当此事件处理程序试图调用 addData(data) 函数时

```
public void addData(string data)
{
    //if (!this.Disposing || !this.IsDisposed || 
    //    !this.listBox1.Disposing || !this.listBox1.IsDisposed)
    if (this.listBox1.InvokeRequired)
    {
        SetTextCallback d = new SetTextCallback(addData);
        this.Invoke(d, new object[] { data });
    }
    else
        listBox1.Items.Add(data);         
} 
```

有一个跨线程错误，所以我将函数内容包装到 InvokeRequired 条件中。

现在还有其他错误： 1\. 尝试调用 ports.disconnect() 函数后程序崩溃

```
public void disconnect()
{
    serialPort.Close();
} 
```

端口类：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.IO.Ports;
using System.Threading;

namespace server_client
{
    public class COM_Port
    {
        private Main_Form mainForm;
        public SerialPort serialPort;

        //MySQL - 1, XML File - 2, None - 0
        public int writeStatus;

        public COM_Port(Main_Form form)
        {
            mainForm = form;

            //by default niekur neirasineja nebent pasirenka
            writeStatus = 0;

            //sukuriam serialPort kintamaji
            serialPort = new SerialPort();

            //nustatom duomenis portui
            serialPort.BaudRate = 9600;
            serialPort.DataBits = 8;
            serialPort.StopBits = StopBits.One;
            serialPort.ReadTimeout = 500;
            serialPort.WriteTimeout = 500;

        }

        ~COM_Port()
        {
            disconnect();
            serialPort.Dispose();
        }

        public void connect()
        {
            if (!serialPort.IsOpen)
                if (serialPort.PortName != "") 
                    serialPort.Open();
                else
                    MessageBox.Show("Please choose COM Port in settings.");
        }

        public void disconnect()
        {
            //serialPort.DiscardInBuffer();
            //serialPort.DiscardOutBuffer();
            serialPort.Close();
        }

        public void serialPort_DataReceived(object sender, System.IO.Ports.SerialDataReceivedEventArgs e)
        {
            string data = null;

            SerialPort sp = (SerialPort)sender;

            if (sp.IsOpen)
                data = sp.ReadExisting();
            else
                data = null;

            //perduoda duomenis atvaizdavimui i maina
            if (data != null)
            {
                mainForm.addData(data);

                switch (writeStatus)
                {
                    //neirasyti
                    case 0:
                        break;
                    //irasyti i mysql
                    case 1:
                        MySQL mysql = new MySQL();
                        break;
                    //irasyti i xml file
                    case 2:
                        File file = new File();
                        break;
                    default:
                        break;
                }
            }
        } 
    }
} 
```

我相信，关闭端口机器人后仍在向我发送数据，并且 DataReceived 事件处理程序试图从串行端口的缓冲区中获取该数据。

感谢您阅读这封情书，感谢您的帮助:)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-21T17:28:18.990

如果您收到大量数据，就会发生这种情况。事件处理程序一直很忙，`DataReceived`并试图读取缓冲区。在这个处理程序中，`ReadExisting()`具有迄今为止最长的执行时间。`DataReceived`当处理程序正在执行时，您不能关闭端口。您不能等待`ReadExisting()`完成，因为在此等待时间内，`DataReceived`事件将再次被触发。

所以你必须在关闭端口之前停止调用`ReadExisting()`，例如，像这样：

首先构造一个新`SerialPort`实例

```
 SerialComPort = new SerialPort();
 SerialComPort.DataReceived += new SerialDataReceivedEventHandler(SerialComPort_DataReceived);
 SerialComPort.ReadTimeout = 100; //[ms] Time out if Read operation does not finish
 bool SerialPortPendingClose=false; 
```

然后`DataReceived`处理程序看起来像：

```
byte[] InputData = new byte[512]; 
private void SerialComPort_DataReceived(object sender, SerialDataReceivedEventArgs e)
{
     if (!SerialPortPendingClose)
     { SerialComPort.Read(InputData, 0, 512); }
     //Do something with InputData
} 
```

最后，使用（例如）关闭端口：

```
SerialPortPendingClose = true;
Thread.Sleep(SerialComPort.ReadTimeout); //Wait for reading threads to finish
SerialComPort.Close();
SerialPortPendingClose = false; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-01T09:50:13.423

我自己也遇到过这个问题，解决方案是使用`BeginInvoke()`而不是`Invoke()`在`SerialPort.DataRecieved`事件处理程序中。

参考：[重复问题](https://stackoverflow.com/questions/8843301/c-sharp-winform-freezing-on-serialport-close)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-05T05:49:31.787

我会使用以下处理程序

```
private void SerialComPort_DataReceived(object sender, SerialDataReceivedEventArgs e)
{
 if (!SerialPortPendingClose)
 { SerialComPort.Read(InputData, 0, 512); }
 //Do something with InputData
 else
 { SerialComPort.DataReceived -= SerialComPort_DataReceived;} //to ensure this will be called only once
} 
```

# php - 删除特定 URI 的缓存文件

> ID：15596433
> 
> 赞同：1
> 
> 时间：2013-03-24T08:11:29.207
> 
> 标签：php, caching, symfony, symfony-2.1

当我为自定义页面使用 HTTP 缓存时，Symfony2 会在缓存文件夹下为其创建一个文件，并且可以为此缓存设置超时。但是，当我更新与该特定页面相关的一些数据库信息时，我的用户无法看到更改（取决于缓存寿命）。为了解决这个问题，我想使用该页面的 URI 在更新操作中删除特定文件，但我不知道该怎么做！。

您知道如何使用其 URI 删除缓存文件或解决此问题的任何其他方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-06-14T11:38:04.747

对我来说这个工作，但我修改了我的环境类。您必须使用自己的缓存路径和环境：

```
private function clearCache($slug)
{
    global $kernel;
    if (get_class($kernel) == 'AppCache') {
        $key = 'md' . hash('sha256', ($_SERVER['SERVER_PORT'] == 80 ? 'http://' : 'https://') . $_SERVER['HTTP_HOST'] . '/' . $slug);
        $cacheMdFileName = \Environment::instance()->getCachePath() . '/' . $kernel->getKernel()->getEnvironment() . DIRECTORY_SEPARATOR . 'http_cache' . DIRECTORY_SEPARATOR . substr($key, 0, 2) . DIRECTORY_SEPARATOR . substr($key, 2, 2) . DIRECTORY_SEPARATOR . substr($key, 4, 2) . DIRECTORY_SEPARATOR . substr($key, 6);
        $file = file_get_contents($cacheMdFileName);
        $key = unserialize($file)[0][1]['x-content-digest'][0];
        $cacheEnFileName = \Environment::instance()->getCachePath() . '/' . $kernel->getKernel()->getEnvironment() . DIRECTORY_SEPARATOR . 'http_cache' . DIRECTORY_SEPARATOR . substr($key, 0, 2) . DIRECTORY_SEPARATOR . substr($key, 2, 2) . DIRECTORY_SEPARATOR . substr($key, 4, 2) . DIRECTORY_SEPARATOR . substr($key, 6);

        unlink($cacheMdFileName);
        unlink($cacheEnFileName);
    }
} 
```

# java - csv 到 bean ，不包括 csv 标头 java 中未包含的值

> ID：15596438
> 
> 赞同：1
> 
> 时间：2013-03-24T08:12:15.233
> 
> 标签：java, csv, javabeans

我正在尝试编写一个将 csv 内容转换为 bean 的代码。这就是我的代码的样子

```
final String TEMPLATE_FILE="addresses.csv";

    CSVReader template = new CSVReader(new FileReader(TEMPLATE_FILE));
    String [] header = template.readNext();
    ColumnPositionMappingStrategy strat = new ColumnPositionMappingStrategy();
    strat.setType(PersonEx.class);
    strat.setColumnMapping(header);
    CsvToBean csv = new CsvToBean();
    List list = csv.parse(strat, template); 
```

在这里，如果 csvHeader 中缺少 PersonEx.class 的特定属性，则该属性被归为空。有没有办法，我可以忽略这一点，只创建一个存在于标题中的值的 bean？

# graph - 如何在 LaTeX 中绘制这样的图片？

> ID：15596439
> 
> 赞同：0
> 
> 时间：2013-03-24T08:12:19.117
> 
> 标签：graph, tree, latex

我想像下图一样画两张图？如何实现？

![在此处输入图像描述](../Images/38a7d84b59f3ac9ded7f12f9f908f1a2.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T08:25:01.153

您可以使用 Graphviz ( [http://www.graphviz.org/](http://www.graphviz.org/) )，它会导出一个手动脚本，例如

```
digraph vis{
rankdir=LR;
"P"->"Q";
"P"->"R";
"Q"->"S";
"S"->"T";
} 
```

作为 *.eps 文件（和许多其他类型），就像您在此处发布的文件一样，您可以在 tex 的 {figure} 块中引用它

# wordpress - 修复 Wordpress 301 重定向到带有斜线的帖子

> ID：15596445
> 
> 赞同：0
> 
> 时间：2013-03-24T08:13:11.700
> 
> 标签：wordpress, redirect, azure, azure-web-app-service

[我在https://www.mysite.com/blog/mypost/](https://www.mysite.com/blog/mypost/)上有一篇博文，加载良好。

但是，[https://www.mysite.com/blog/mypost](https://www.mysite.com/blog/mypost)重定向到不同域[https://mysite.azurewebsites.net/mypost/上的帖子](https://mysite.azurewebsites.net/mypost/)

我将 nginx 设置为反向代理，以从 mysite.azurewebsites.net 加载 mysite.com/blog。我认为重定向是由 Wordpress 引起的，我不确定如何修复它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T17:53:25.743

重定向发生在 wp-includes/canonical.php 中。它正在查看 HOST 标头。我将 nginx 设置为反向代理到 mysite.azurewebsites.net，但正确的解决方案是[在 Azure 上设置自定义域](https://www.windowsazure.com/en-us/develop/net/common-tasks/custom-dns-web-site/)。

# css - 垂直和水平居中内容，浏览器不允许滚动

> ID：15596448
> 
> 赞同：3
> 
> 时间：2013-03-24T08:13:30.687
> 
> 标签：css, css-position, vertical-alignment, centering, alignment

我正在使用以下 css 将我的内容垂直和水平居中；问题是，当您最小化浏览器以使其小于内容`div`时，它会继续居中但无法滚动。内容只是在顶部切断。

```
#splash-centre-container{
  position: absolute;
  top: 50%;
  left: 50%;
  height: 550px;
  width: 760px;
  min-height: 550px;
  padding: 20px;
  margin: -310px 0 0 -400px;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T08:15:30.673

这是因为当您将某些`absolute`内容从页面流中拉出时定位，它不会“占用空间”。

您希望将`min-width`and`min-height`应用于`body`（或其容器），以便当屏幕变得太小时，启动屏幕居中的元素永远不会小于启动屏幕，因此不会离开屏幕。

[jsFiddle](http://jsfiddle.net/Tyriar/U42vg/2/)

![在此处输入图像描述](../Images/3da8b5b9b954e0a5379c0cf360f6ba3b.png)

**HTML**

```
<div class="spacer">
    <div id="splash-centre-container">abc</div>
</div> 
```

**CSS**

```
html, body { 
    min-width:760px;
    height:100%;
    min-height:550px;
    position:relative;
}
#splash-centre-container {
    position: absolute;
    top: 50%;
    left: 50%;
    height: 550px;
    width: 760px;
    margin: -275px 0 0 -380px;
    background-color:red;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T08:20:07.880

你可以这样做

```
#splash-centre-container {
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
  margin: auto;
  width: 50%;
  height: 50%;
  position: absolute;
  overflow: auto;
  border: solid black 2px;
} 
```

[http://jsfiddle.net/btevfik/XMNTM/](http://jsfiddle.net/btevfik/XMNTM/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-19T00:39:36.737

Chris Coyier[在 2009 年发布了我能在这里](https://css-tricks.com/snippets/css/center-div-with-dynamic-height/)找到的最佳解决方案。我认为这是最好的，因为它将内容垂直和水平居中，*并且*它允许动态高度（此处发布的其他答案取决于固定高度，这是不必要的限制）加上滚动较小的屏幕。这对于创建替换模式弹出窗口的居中内联表单非常有用。

我清理了该代码并将其转换为 Sass mixin，以便您可以轻松自定义表单宽度（提示：将表单元素 CSS 和相关变量添加到 Sass mixin，因为您的表单元素宽度将被限制在居中的内联表单内）。

[jsFiddle](https://jsfiddle.net/alight3874/0n3hxow5/)

**SCSS**

```
html,
body,
form {
  height: 100%;
  margin: 0;
  padding: 0;
}

@mixin CenteredInlineForm( $ContainerSetName, $formWidth) {
  div.#{$ContainerSetName}_CenteredForm {
    display: table;
    overflow: hidden;
    margin: 0 auto;
    height: 100%;
    width: #{($formWidth + 15)}px;
    div.#{$ContainerSetName}_CenteredFormContentContainer {
      display: table-cell;
      vertical-align: middle;
      div.#{$ContainerSetName}_CenteredFormContent {
        background-color: lightgrey;
        border: 3px solid darkgrey;
        border-radius: 15px;
        padding: 15px;
      }
    }
  }
  *:first-child + html div.#{$ContainerSetName}_CenteredForm {
    position: relative;
  }
  /*ie6 Support: */
  /* * html div.#{$ContainerSetName}_CenteredForm{position:relative;} */
  *:first-child + html div.#{$ContainerSetName}_CenteredFormContentContainer {
    position: absolute;
    top: 50%;
  }
  /*ie6 Only: */
  /* * html div.#{$ContainerSetName}_CenteredFormContentContainer{position:absolute;top:50%;} */
  *:first-child + html div.#{$ContainerSetName}_CenteredFormContent {
    position: relative;
    top: -50%;
  }
}

@include CenteredInlineForm(UserInfoInput, 400); 
```

**HTML**

```
<div class="UserInfoInput_CenteredForm">
  <div class="UserInfoInput_CenteredFormContentContainer">
    <div class="UserInfoInput_CenteredFormContent">
      <p>
        Content or form labels/inputs
      </p>
      ...
    </div>
  </div>
</div> 
```

# sql - SUM 正在减少记录的数量

> ID：15596455
> 
> 赞同：1
> 
> 时间：2013-03-24T08:14:29.957
> 
> 标签：sql, sql-server, group-by, sum, aggregate

我正在尝试从两个查询的联合中进行选择 这两个查询的联合给了我 90,000 条记录，但是当我选择它们的总和时，它给了我 89,800 条记录。因此，总和正在减少记录的数量。

```
Select Site,building,..., 
SUM(PhysicalCount) as PhysicalResult
From(
    Select Site,building,...,
    Count(TagID) as PhysicalCount 
    FROM Physical
    Where <SomeCondition1>
    Union
    Select Site,building,...,
    Count(TagID) as PhysicalCount 
    FROM Physical
    Where <SomeCondition2>
) T1
Group by Site,building,..., 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T10:13:13.577

这就是你所期望的。

构造这个简单的例子：

```
CREATE TABLE #X 
(
[Id] VARCHAR(100),
[Amount] INT
)
INSERT INTO #X VALUES
('michaeljackson',10),
('jim',20),
('jill',20),
('j',30)

CREATE TABLE #Y 
(
[Id] VARCHAR(100),
[Amount] INT
)
INSERT INTO #Y VALUES
('michaeljackson',100),
('jim',200),
('jill',200),
('j',300) 
```

现在尝试运行这个：

```
SELECT * FROM #X
UNION
SELECT * FROM #Y 
```

现在运行以下命令，这是您的脚本的模型：

```
SELECT  x.Id,
    SUM(x.Amount) AS "Aggregate"
FROM 
    (
    SELECT * FROM #X
    UNION
    SELECT * FROM #Y
    ) x
GROUP BY x.Id 
```

`UNION`不会汇总正在`UNION`编辑的脚本中的数量 - 它只是将一个记录集附加到另一个记录集并删除重复项。如果您想将一个附加到另一个并保留重复项，请使用`UNION ALL`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T13:25:02.960

首先，您的查询没有意义，因为您`count`在子查询中有一个没有对应的`group by`. 这应该返回一个错误。

如果您想要组的总和，而不是聚合组，请改用窗口函数：

```
Select Site,building,..., 
       SUM(PhysicalCount) over (partition by site, building) as PhysicalResult
From(
    Select Site,building,...,
    Count(TagID) as PhysicalCount 
    FROM Physical
    Where <SomeCondition1>
    group by site, building
    Union
    Select Site,building,...,
    Count(TagID) as PhysicalCount 
    FROM Physical
    Where <SomeCondition2>
    group by site, building
    ) T1 
```

尽管`union`删除了重复项，但显然存在具有不同计数的站点和建筑物的组合。

也许您的意图实际上是这样做的：

```
 Select Site, building, Count(TagID) as PhysicalCount 
    FROM Physical
    Where (<SomeCondition1>) or (<someCondition2)
    group by site, building; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-24T08:25:20.287

是的，您应该看到预期的差异。
给你一个例子，你就会明白为什么在 group by 之后，总行数小于你在内部联合查询中得到的行数。例如，这是您的内部查询输出：

```
站点 1, 建筑物 1, ...., 15
站点 1，建筑 1，......，16

```

您在内部查询中使用 UNION ，但这 2 行不同，因为 count 不同。
但是，然后您在外部查询中使用 GROUP BY，按站点分组，建筑物，......
然后这 2 行将变为 1，并且计数将为 31

# jquery-mobile - pagebeforecreate 在 jquery mobile 1.3.0 中不起作用

> ID：15596458
> 
> 赞同：0
> 
> 时间：2013-03-24T08:14:57.117
> 
> 标签：jquery-mobile

下面的代码在使用 jQueryMobile 1.2.1 时运行顺利，但在使用 1.3.0 时，似乎没有触发 pagebeforecreate 事件。

1.2.1 版本：[http](http://www.karinedaelman.be/mobile.php) : //www.karinedaelman.be/mobile.php 在单击“登录”按钮后尝试输入“hanne”。登录按钮将更改为“Uitloggen”，“...”按钮将更改为“相册”

带有 1.3.0 的版本[http://www.karinedaelman.be/mobile3.php](http://www.karinedaelman.be/mobile3.php)：执行与上述相同的操作将保持登录按钮和“...”按钮不变。

我怎样才能让它与 jQuery Mobile 1.3.0 一起工作？感谢您的任何建议

这是代码：

```
$("#thuisPage").on('pagebeforecreate', function(){
document.getElementById('mijnalbum').href= "foto-mobile.php?token=0xmsxqkos0nvzpvily09bwihyy9o1or";
document.getElementById('mijnalbum').innerHTML = "Album";
document.getElementById('inloggen').href = "#";
document.getElementById('inloggen').innerHTML = "Uitloggen";
$("#inloggen").click(function(){
    DelCookie("paswoord");
    window.location.reload(true);
});
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T17:08:13.650

由于您在 pagebeforecreate 之后进行的 DOM 工作，您可能想要尝试 pageinit。

```
$("#thuisPage").on('pageinit', function(){...}); 
```

如果你不介意我问你为什么决定使用常规的 javascript 来进行 dom 操作而不是 jquery 内置的选择器？

```
$('#mijnalbum').attr("href","foto-mobile.php?token=0xmsxqkos0nvzpvily09bwihyy9o1or");
$('#mijnalbum').html("Album");
$('#inloggen').attr("href","#");
$('#inloggen').html("Uitloggen");

document.getElementById('mijnalbum').href= "foto-mobile.php?token=0xmsxqkos0nvzpvily09bwihyy9o1or";
document.getElementById('mijnalbum').innerHTML = "Album";
document.getElementById('inloggen').href = "#";
document.getElementById('inloggen').innerHTML = "Uitloggen"; 
```

# java - 字符串数组错误

> ID：15596461
> 
> 赞同：0
> 
> 时间：2013-03-24T08:15:53.477
> 
> 标签：java, arrays, string, println

我有一个数组错误，说它超出了界限，我不知道出了什么问题。这是我的代码：

```
import java.util.*;
public class gameVar {
    public static int size;
    public static int counter;
    public static Scanner input = new Scanner(System.in);
    public static String currentIn;
    public static String nameArray[] = new String[size];
} 
```

和第二类（我在第 6 行得到错误）：

```
public class mainThread extends gameVar {
public static void main(String[] args){
    System.out.println("Please type the desired amount of players: ");
    size = input.nextInt();
    for(int counter = 0; counter < size; counter++){
        System.out.println("Please enter the name of player " + nameArray[counter])
        }
    }
} 
```

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T08:17:39.340

下面分配一个零元素数组：

```
public static int size;
public static String nameArray[] = new String[size]; // <<<< Here, `size` is zero 
```

您需要将数组初始化移动到`main()`：

```
public static void main(String[] args){
    System.out.println("Please type the desired amount of players: ");
    size = input.nextInt();
    nameArray = new String[size]; // <<< THIS
    for(int counter = 0; counter < size; counter++){
        System.out.println("Please enter the name of player " + nameArray[counter])
        }
    }
} 
```

然后，您可以`= new String[size]`从`nameArray`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T08:18:09.310

在获得所需的大小后，您没有重新初始化数组类。您的设计作为一个整体需要一些工作，因为您过度依赖静态（全局）状态。

在游戏变量中：

```
public static int size; // <-- by default this is zero
public static String nameArray[] = new String[size]; // <-- Initialized here to size zero! 
```

在主线程中：

```
size = input.nextInt(); // <-- size is no longer zero
for(int counter = 0; counter < size; counter++) {
  System.out.println("Please enter the name of player " + nameArray[counter]); // <-- But your array is still size zero!
} 
```

简单的解决方法是在获得新尺寸后执行此操作：

```
nameArray = new String[size]; 
```

但正如我之前提到的，您应该重新考虑您的设计（设计一个没有静态变量的适当类）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T08:18:16.043

在您的字段声明中，当您将`public static int size;`Java 默认大小设置为 0 时。因此，当您创建 String 数组时，数组的大小为 0。

通常不建议在字段声明中创建新对象。相反，只要有

```
public static String nameArray[]; 
```

然后在知道大小之后将 nameArray 设置为新的 String 数组。

```
size = input.nextInt();
nameArray[] = new String[size];
for(...... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-24T08:18:49.750

`Array`size本质上是静态的，用零`nameArray`声明，因为没有初始化，它会得到默认的0。`size``static size variable`

所以`nameArray[counter]`它必须填充 Array 超出范围的异常。

您必须以正确的大小初始化数组。

```
nameArray = new String[size]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-24T08:20:01.800

你的`MainThread`班级应该是这样的：

```
public class mainThread extends gameVar {
public static void main(String[] args){
    System.out.println("Please type the desired amount of players: ");
    size = input.nextInt();
    nameArray = new String[size];//reinitialize the nameArray here.
    for(int counter = 0; counter < size; counter++){
        System.out.println("Please enter the name of player " + nameArray[counter]=input.next())
        }
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-24T08:20:56.340

size 的值默认为零。因此创建的数组大小为 0。例如：`public static String nameArray[] = new String[0];`

因此你得到了例外。为变量大小分配一些值。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-24T08:35:24.503

初始化数组时，它的大小设置为 0。

public static String nameArray[] = new String[size];

如果您更改 size 的值，则 size = input.nextInt();

它会更改整数变量大小的值，但不会更改数组的大小，这就是您收到错误的原因。您可以通过稍后打印数组 (nameArray.length) 的大小来检查它。

您需要在获取“大小”的值后对其进行初始化。

# jquery - jquery - 合并 url 参数的最简单方法是什么？

> ID：15596462
> 
> 赞同：1
> 
> 时间：2013-03-24T08:16:13.037
> 
> 标签：jquery, uri

出于某种原因，我的页面上有一个 iframe：

```
<iframe src="/widget?id=2"/> 
```

我的 js 代码中有变量**地址**。

```
var address = 'some street'; 
```

我需要向 iframe src 属性添加一个新参数，使其看起来像：

```
<iframe src="/widget?id=2&address=some%20street"/> 
```

我希望：

*   不用关心**地址**变量的格式是什么：它不仅可以包含空格，还可以包含逗号、分号等（*以某种方式由用户插入*）；
*   不要进行丑陋的字符串操作，这总是难以阅读；
*   能够以更优雅的方式处理多个参数（*不仅是地址*）。

例如，在**Ruby on Rails中合并****url**参数非常简单：

 **```
params.merge {:address => address} 
```

如果可能的话，我想要在 jQuery 中使用类似的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T08:16:13.037

我目前（粗略和快速）的实现是：

```
var src = $('iframe').attr('src');
var new_src = src.replace(/([?&])address=[^$&]*/,'$1address='+encodeURI(address));;
if (src == new_src) new_src = src+'&address='+encodeURI(address);
$('iframe').attr('src',new_src); 
```**

# c - 如何使用 EOF 停止程序代码

> ID：15596467
> 
> 赞同：2
> 
> 时间：2013-03-24T08:16:41.663
> 
> 标签：c, eof

我已经完成了程序的输入和处理部分，但我不知道如何用 EOF 终止程序。这是我的 int main(void) 代码：

```
int main(void)
{
    int size;

    int n;

    char preorder[26];
    char inorder[26]; 

    while(/* I don't know what to put on this part...*/)
    {
        for(n = 0; n < maxSize; n++)
        {
            preorder[n] = ' ';
            inorder[n] = ' ';
        }
        preIndex = 0;

        scanf("%s %s", preorder, inorder);

        size = strlen(preorder);

        struct node *root = constructTree(inorder, preorder, 0, (size - 1));
        printPostorder(root);
        printf("\n");
    }

    return 0;
} 
```

每个功能都运行良好，我已经分别检查了它们。基本上，用户想通过按 Ctrl + Z 来结束这个程序（我在 Windows 上工作，所以它是 Z）。我必须使用EOF。提前谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T08:22:40.873

检查输入函数的返回值。`scanf`如果遇到文件结束，将返回存储的项目数或 EOF。

正如 Anthon 所说，您可以将`while(1)`其用作循环控件，并用于`break;`退出循环。

```
while(1) {
    if (scanf(...) == EOF)
        break;
} 
```

不要试图使用被调用的函数，`feof()`因为它只检查 FILE 结构中的标志，即。它只会在您尝试阅读*后检测到 EOF。*不过，它可以用于多层错误处理结构。

```
while(1) {
    if (scanf(...) < N_elements_specified) {
        if (feof(...)) {
            /* EOF detected */
            break;
        } else {
            /* some other cause of insufficient data */
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-24T08:23:39.477

你想做这样的事情：

```
while (scanf(...) != EOF) {

} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-06-19T11:54:27.400

您可以从while has characters left添加`cin`和获取输入：`preorder``preorder`

```
while (cin >> preorder)
{
    ...
} 
```

# macos - 如何使用新的 lambda 功能在 OS X Mountain Lion 上安装 JDK 8

> ID：15596469
> 
> 赞同：6
> 
> 时间：2013-03-24T08:16:53.553
> 
> 标签：macos, java-8

谁能帮我在 mac Mountain 上安装 JDK 8？

我已经安装了`java_for_os_x_2013002_dp__11m4203.dmg`，我可以看到： `/Library/Java/JavaVirtualMachines/jdk1.8.0.jdk/Contents/Home`. 但不知道还能做什么。

*如何创建指向新版本的符号链接等？*

我使用*Eclipse*和*maven*，所以我不希望与它们发生任何冲突。我是一个新的mac用户。

*JDK 7*已经安装在我的 Mac 上，但我只想对新的 lambda 表达式做一些实验。

感谢所有帮助

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-04-29T08:10:41.437

尽管[EKG 的回答](https://stackoverflow.com/a/17387167/499797)很好地解释了运行 Java 8 项目需要做什么，但如果您希望将 Java 8 设置为系统上的默认版本，您可以将其设置为 Java 主目录。

我（之前的 maven）在我的 .profile 中添加了以下行来设置我的 Java 主页。

> 导出 JAVA_HOME=$(/usr/libexec/java_home)

现在，要将其设置为特定版本，我将其更新为以下值

> 导出 JAVA_HOME=$(/usr/libexec/java_home -v 1.8)

**这确实允许您**将特定版本设置为默认版本，但如何更新整个系统的默认版本（每个没有自己设置的用户）仍然让我望而却步。

*注意：*我知道这不是一个直接的答案，而是人们在寻找这个时会找到的东西。唉，这太大了，不能在评论中写。如果这个“答案”以另一种方式更好地表示，我很乐意做出改变。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-30T04:30:03.280

如果您只想尝试使用 JDK8 进行编码，则无需在系统上安装它。就像支持 Java 8 的 eclipse 版本中的 JRE。要获得 Eclipse 的 beta 版本，您可以自己构建它（我对此有疑问）或下载预构建版本。我在 Eclipse 站点上找不到任何预构建版本，但我在这里找到了一个。[http://downloads.efxclipse.org/eclipse-java8/](http://downloads.efxclipse.org/eclipse-java8/)

下载完成后，`Eclipse > Preferences > Java > Installed JREs` 点击添加，然后指定 java 8 主目录。对我来说这是`/Library/Java/JavaVirtualMachines/jdk1.8.0.jdk/Contents/Home.`

现在创建一个项目。1.8 的源级别在 UI 中不可用，您需要修改`<my_project>/.settings/org.eclipse.jdt.core.prefs`并确保您有以下几行。

```
org.eclipse.jdt.core.compiler.codegen.targetPlatform=1.8
org.eclipse.jdt.core.compiler.compliance=1.8
org.eclipse.jdt.core.compiler.source=1.8 
```

那你就可以走了。

eclipse 的构建是测试版，因此代码辅助并不总是适用于新语法。但它可以很好地编译和运行 java 8 代码:-)

# php - 如何在php中隐藏来自url的查询字符串？

> ID：15596471
> 
> 赞同：-1
> 
> 时间：2013-03-24T08:17:05.403
> 
> 标签：php, url, query-string

我正在尝试制作一个消息系统，当接收者正在阅读消息时，会有一个链接来回复消息，如下所示：

```
<a href=mail.php?action=compose&toid='".urlencode($viewrow['sender'])."'&subject='RE:+".urlencode($viewrow['subject'])."'&message=".urlencode($viewrow['message']).">Reply</a> 
```

正在从 mysql 检索发件人、主题和消息。

用户看到的内容如下：

```
http://www.somesite.com/author/mail.php?action=compose&toid='8'&subject='RE:+test+subject'&message=test+message 
```

我需要知道的是，是否有办法隐藏回复 url 中的主题和消息，所以用户只会在地址栏上看到：

```
http://www.somesite.com/author/mail.php?action=compose&toid='8' 
```

这就是从数据库中检索主题、消息和 ID 的方式。

```
//view message
if (isset($_GET['action']) && $_GET['action'] == inbox) { 
        if(isset($_GET['viewid'])) { 
            $viewid = $_GET['viewid'];
    /*      $viewsql = "select * from mail where reciever='".$userid."' and mail_id=".$viewid; */
            $viewsql = "select * from mail, authors where (mail.sender = authors.id) and (mail.reciever = '".$userid."') and (mail.reciever_deleted ='0') and mail.mail_id = ".$viewid;
            $viewquery = mysql_query($viewsql,$connection) or die(mysql_error());
            $viewrow = mysql_fetch_assoc($viewquery);
            if ($viewrow['reciever'] == $userid) { //check if user is the reciever
            } else { 
                header('Location: mail.php?action=inbox');
                exit; 
            } 
            echo "<h3>Lendo mensagem particular da Caixa de Entrada</h3>";
            echo "<table align=\"center\" width=\"75%\" class=\"sortable\">
                    <tr>
                        <td colspan='2' style=\"text-align:center;font-weight:normal;\">Mensagem particular enviada por ".$viewrow['displayname']." em ".date('d/m/y',strtotime($viewrow['created_at'])).".</td>
                    </tr>
                    <tr>
                        <td colspan='2'>
                            <img style=\"float:left;padding: 5px 15px 5px 2px;width: 65px;\" src=\"".$viewrow['gravatar']."\" alt=\"".$viewrow['displayname']."\" title=\"".$viewrow['displayname']."\" />
                            <div style=\"padding: 8px 5px 2px;\"><span style=\"font-size:1.6em;\">&#8594; </span><b>".$viewrow['subject']."</b></div>
                            <div style=\"padding: 8px 30px 8px 85px;\">".nl2br($viewrow['message'])."<br /></div>
                            <span style=\"float:right;\">
                                <a href=mail.php?action=compose&toid='".urlencode($viewrow['sender'])."'&subject='RE:+".urlencode($viewrow['subject'])."'&message=".urlencode($viewrow['message']).">Responder</a> | <a href=javascript:confirmDelete('mail.php?action=inbox&deleteid=".$viewid."')>Apagar</a>
                            </span>
                        </td>
                    </tr>
                </table>";

            // mark as read by reciever
            $query="update mail set mail_status='read' where reciever = '$userid' and mail_id = '$viewid'"; 
            mysql_query($query,$connection) or die(mysql_error());
        }                   
    }elseif (isset($_GET['action']) && $_GET['action'] == outbox) { ... 
```

我知道我需要使用 post，但是如何？

我试过但无法让它工作。

对不起我的愚蠢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T08:51:02.593

您不能通过`<a>`使用 POST 将信息发送到页面。
但是您可以使用 JavaScript 或表单来完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-11T03:42:35.783

您无法隐藏查询字符串，但您可以改为通过 POST 发送数据，这在地址栏中不可见。为此，您需要使用表格提交数据；虽然 Pietroalbini 是正确的，您不能使用`a`元素，但您可以设置 a 的样式，`button`使其看起来与微不足道的相同：

```
<style>
button {
    background:none;
    border: 0;
    border-bottom:1px solid blue;
    color: blue;
    padding:0;        
}
</style>

<form action="script.php" method="post">
     <input type="text" name="Test"/>
     <button type="submit">Submit</button>
</form> 
```

# php - 我的 SHA1 字符串是否有可能是非唯一的？

> ID：15596477
> 
> 赞同：1
> 
> 时间：2013-03-24T08:17:54.230
> 
> 标签：php, duplicates, unique, sha

我有以下代码段，我在其中构造一个字符串以作为电子邮件确认码发送给用户：

```
$confirmation_code = $user_id . time() . date('d-m-Y',time());
$confirmation_code = sha1($confirmation_code); 
```

有没有可能`$confirmation_code`在任何一步被复制？

注意：请记住，`$user_id`每个用户都是独一无二的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T08:20:08.500

鉴于`$user_id`每个用户都是独一无二的，这应该（理论上）意味着您的确认代码永远不会冲突（“不唯一”）

然而，实际上，SHA1 哈希*可能会*发生冲突（有关更多信息，请参阅[此 MSDN 博客文章](http://blogs.msdn.com/b/tomarcher/archive/2006/05/10/are-hash-codes-unique.aspx)）。

因此，如果您问这个问题的原因是您可以决定是否`UNIQUE`在数据库中创建该列，请不要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T08:23:45.947

是的，代码*应该*是唯一的，除非您每秒为每个用户生成一个以上的代码。这也是非常**可预测**的。如果攻击者知道用户的 id 以及生成代码的*大致*时间，那么猜测代码就很容易了。如果允许攻击者进行无限次数的猜测，那么即使是粗略的时间也无关紧要，因为他可以轻松地尝试过去几年的所有有效代码。

您应该真正生成*（伪）随机*代码，而不是基于相当静态数据的代码。在 Linux 上，只需阅读以下内容`/dev/random`：

```
$code = bin2hex(file_get_contents('/dev/random', false, null, -1, 32));
                                                                  ^^
                                                          desired length/2 
```

# magento - 如何在没有标签的单页中显示产品描述和附加信息

> ID：15596483
> 
> 赞同：0
> 
> 时间：2013-03-24T08:18:25.547
> 
> 标签：magento, magento-1.7

我正在使用 magento 社区版本 1.7.0.2

目前我的网站在选项卡中显示了产品描述，如下图所示，但我想在没有任何选项卡的产品页面中显示“产品描述”以及“附加信息”和评论，但找不到任何信息如何做到这一点

无论如何，产品页面中没有显示“附加信息”，如何在管理面板中启用它？

我是 magento 的新手。请帮忙。

当前布局（选项卡）：

```
| Product Description | Reviews | Product Tags
+---------------------+---------+------------- 
```

想要将其更改为此布局（不带标签）：

**产品描述**

说明内容…………

**产品附加信息**

附加信息内容…………

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-23T06:06:55.790

只需通过属性设置使您正在使用的属性“在前端可见”，它们就会出现在“附加信息”选项卡下的“产品描述”旁边。

# java - Android Canvas：仅在透明背景上绘制圆圈

> ID：15596484
> 
> 赞同：0
> 
> 时间：2013-03-24T08:18:35.653
> 
> 标签：java, android, background, android-canvas, transparent

我在 Android 中有一个画布，我在其中绘制了许多直径为 1 到 10 像素的圆圈。

我只想在透明背景上打印这个圆圈，如果要画圆圈的地方有任何其他颜色，它应该被取消，我想知道那个地方已经存在的颜色。当它只是重叠一点时。

问题是，我发现的所有方法都表现不佳。

我在屏幕上画了超过 10000 个圆圈，效果很好，但它们是重叠的，我必须处理这个问题。

谁能帮我？？:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T09:13:37.167

你的问题不是很清楚。

如果您想知道“在绘制视图背景之前”存在哪种颜色，我看不到任何解决方案。如果有人能找到答案，我会非常感兴趣。

如果您想知道“如果您之前绘制了一个与您要绘制的当前圆重叠的圆”，那么最好的解决方案是自己以编程方式维护您之前绘制的所有圆的列表，它们的中心位置和直径并检查它是否会与新圆重叠。这种计算非常简单，应该足够快，即使是 1000 圈。

另请注意，有一些方法可以优化此类计算。例如，如果事情太慢，您可以考虑使用不同的距离度量而不是经典的欧几里得度量。例如，可以使用中心之间使用绝对值的 x 和 y 的差值来代替它们的差值平方和的平方根。

# java - Java TCP 侦听器循环

> ID：15596489
> 
> 赞同：1
> 
> 时间：2013-03-24T08:19:30.210
> 
> 标签：java, tcp, irc

我一直在谷歌上搜索几个小时，因为我知道这是我面临的一个非常简单的问题，但我找不到一个简单的解决方案来解决我的问题。

我正在编写一个非常基本的 IRC 客户端，只是为了重新学习 Java 的基本原理，因为我已经很久没有进行任何编码了，而且我有一个我想稍后做的项目。

我被困在套接字侦听器上，如果需要，我可以提供代码，但我真正需要的是一个简单的教程，介绍如何创建一个循环来侦听和已经创建的套接字，并在它收到任何数据后立即执行某些操作. 这个循环应该一直持续到套接字关闭（用户断开与服务器的连接）

我当前代码的问题是侦听器似乎挂起整个程序，直到它接收到数据。我什至在一个单独的线程中放置了一个 while 循环，因此它可以挂起该线程直到数据到达，但它仍然挂起整个程序。

我不想被告知答案，我想知道如何找到答案。我什至考虑过创建一个事件驱动的侦听器，但这对于我的需要来说似乎过于复杂。

我希望不必发布代码，因为在我为尝试使其正常工作而进行的所有编辑之后它一团糟，但这是我到目前为止所拥有的：

ListenToServer.java：

```
class ListenToServer extends Thread{

JTextPane outputDestination = null;
Socket establishedSocket = null;

public void kickStartprep(Socket establishedSocket, JTextPane outputDestination){
    this.establishedSocket = establishedSocket;
    this.outputDestination = outputDestination;
}

@Override
public void run(){

    UpdateServerStatusWindow("Thread is running!", outputDestination);

    BufferedReader inFromServer = null;

  try{
  inFromServer = new BufferedReader(new InputStreamReader(establishedSocket.getInputStream()));

      while (inFromServer.readLine().isEmpty() == false){
        UpdateServerStatusWindow(inFromServer.readLine(), outputDestination);  
      }

  }
  catch (Exception e){
      UpdateServerStatusWindow(e.toString(), outputDestination);
  }
}

public void UpdateServerStatusWindow(String message, JTextPane destination){

    StyledDocument doc = destination.getStyledDocument();
    try
{
doc.insertString(doc.getLength(), '\n' + message, null);    
}
catch(Exception e){ 
    JOptionPane.showMessageDialog(null, "There was an error updating the server     message output window in the TCP Listner!");
    JOptionPane.showMessageDialog(null, e);

}

}
} 
```

然后我这样调用：

MainGUI.java

```
 ListenToServer serverListener = new ListenToServer();
    serverListener.kickStartprep(establishedConnection, ServerMessageOutput);
    serverListener.run(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T20:09:03.477

一位朋友查看了这段代码，发现问题出在我调用线程的方式上。基本上我需要打电话：

```
serverListener.start(); 
```

代替

```
serverListener.run(); 
```

这已经解决了问题，我的 IRC 客户端现在可以正确连接到服务器。

# c# - ext.net 上的 javascript 错误

> ID：15596491
> 
> 赞同：0
> 
> 时间：2013-03-24T08:19:39.343
> 
> 标签：c#, asp.net-mvc, razor, ext.net

我是 ext.net 框架的新手，需要很多帮助。从问题开始，我设法解决了有关`web.config`文件的问题。现在我可以轻松使用 ext.net 并且没有出现引用问题，但现在我无法运行代码。

当我调试并运行所需的解决方案时，会弹出有关 java 脚本的错误。错误说`Microsoft JScript runtime error: 'Ext' is undefined`。

我不知道这个错误，如果你们中的任何人能在这件事上帮助我，那将会很有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T14:01:52.663

在您的`Global.asax`文件和`RegisterRoutes`方法中，确保您具有以下行：

```
routes.IgnoreRoute("{resource}.axd/{*pathInfo}");
routes.IgnoreRoute("{exclude}/{extnet}/ext.axd"); 
```

“ext.axd”`IgnoreRoute`是重要的。

该`.RegisterRoutes`方法可能位于 /App_Start/RouteConfig.cs

希望这可以帮助。

# django - Django 多个查询集组合成一个分页

> ID：15596497
> 
> 赞同：4
> 
> 时间：2013-03-24T08:20:11.633
> 
> 标签：django, django-queryset

我将来自不同模型的 2 个查询集组合到一个列表中，并使用分页显示为一个列表。

问题是列表中的对象根据创建它们的模型由分页显示。

![在此处输入图像描述](../Images/25ab08062b7970707fcba97b334c85e8.png)

当从模型创建新对象时，如何修复列表。即使最近创建的对象来自不同的模型，它也会显示在最近创建的对象之后。

例子是 . 我有一个用户白板和用户评论的组合查询集。如果最近创建了一个新的白板对象，我将创建另一个评论。评论将在 whiteboard 的对象之后由分页显示，而不是与所有其他评论一起显示在分页下方，因为它位于不同的模型中

![在此处输入图像描述](../Images/5a3cf99fb4539ba1fc4816dd6d567d98.png)

我希望你能明白我想要达到的目标:)

我的模块的一部分

```
class WhiteBoard(models.Model):

    user = models.ForeignKey(User)
    name = models.CharField(max_length=100)
    created = models.DateTimeField(auto_now_add=True)
    picture = models.OneToOneField('Picture',related_name='picture',blank=True,null=True)
    def __unicode__(self):
        return self.name

class Comment(models.Model):
    created = models.DateTimeField(auto_now_add=True)
    user = models.ForeignKey(User)
    body = models.TextField()
    picture = models.ForeignKey(Picture) 
```

视图.py

```
@login_required
def archive(request):
        user = User.objects.get(username=request.user)
        person = Person.objects.get(user=user)
        users = User.objects.filter(pk__in=person.following.all().values_list('user__pk',flat=True))
        picture = whiteboard .objects.filter(user__in=users).order_by("-created")
        comment = Comment.objects.filter(user__in=users).order_by("-created")
        posts= list(chain(picture,comment))
        paginator = Paginator(posts, 5)

        try: page = int(request.GET.get("page", '1'))
        except ValueError: page = 1

        try:
            posts = paginator.page(page)
        except (InvalidPage, EmptyPage):
            posts = paginator.page(paginator.num_pages)
        return render(request,'archive.html',{'picture':picture,'comment':comment,'posts':posts}) 
```

存档.html

```
{% for post in posts.object_list %}

{{post.name }}
<br>
{{post.body}}
{% endfor %}

        <!-- Next/Prev page links  -->
        {% if posts.object_list and posts.paginator.num_pages > 1 %}
        <div class="pagination" style="margin-top: 20px; margin-left: -20px; ">
            <span class="step-links">
                {% if posts.has_previous %}
                        <a href= "?page={{ posts.previous_page_number }}">newer entries &lt;&lt; </a>
                {% endif %}

                    <span class="current">
                    &nbsp;Page {{ posts.number }} of {{ posts.paginator.num_pages }}
                </span>

            {% if posts.has_next %}
                    <a href="?page={{ posts.next_page_number }}"> &gt;&gt; older entries</a>
            {% endif %}
        </span>
    </div>
    {% endif %}

</div> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-24T10:45:07.137

您只需要按它们共享的属性对组合查询集列表进行[排序：](http://docs.python.org/2/howto/sorting.html)`created`

```
from itertools import chain
...
posts = list(
            sorted(
                chain(picture,comment),
                key=lambda objects: objects.created,
                reverse=True  # Optional
            ))
paginator = Paginator(posts, 5)
... 
```

[这是关于该主题的类似问题](https://stackoverflow.com/questions/431628/how-to-combine-2-or-more-querysets-in-a-django-view)

# php - 使用 strtotime 获取要显示的数据

> ID：15596500
> 
> 赞同：-2
> 
> 时间：2013-03-24T08:20:59.310
> 
> 标签：php

我`strtotime()`用来显示给定的数据，例如每个星期六。问题是星期天到来时数据不显示。例如，我想要的是能够让数据从周六到周三保持不变。

```
DATE = "'".date("Y-m-d", strtotime("saturday"))."'"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T08:32:46.303

我对此的方法是：

1.  检查今天的日期是否是星期六。
2.  如果是星期六，请执行以下操作：`DATE = "'".date("Y-m-d", strtotime("saturday"))."'";`
3.  如果不是星期六，请执行以下操作：`DATE = "'".date("Y-m-d", strtotime("last Saturday"))."'";`

我从[这里](https://stackoverflow.com/questions/10096978/php-get-most-recently-passed-saturday-last-saturday)得到了这个技巧！希望这可以帮助！

如果这还不够好，也许您可​​以将这些数据存储到数据库或本地文件中，但这太过分了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T08:34:33.580

如果您只想在特定日期显示上周六，请尝试使用以下代码：

```
if(in_array(date('w'), array(3,4,5,6)) {
     echo date('Y-m-d', strtotime("last Saturday"));
} 
```

# ember.js - Ember 事件，用于最佳丢弃同一 Route 之间的更改

> ID：15596502
> 
> 赞同：5
> 
> 时间：2013-03-24T08:22:06.747
> 
> 标签：ember.js, ember-data

我有一个 Ember 列表和一个编辑表单。每次列表中选定的项目更改时，编辑表单都会丢弃任何更改并加载新模型。

我的问题是无法丢弃更改，因为停用事件不会触发。

例如，从`url/favs/123/edit`到`url/favs/456/edit`停用（和退出）事件不会触发。因此，无法正确丢弃任何更改。

这是我所指的代码的一部分：

```
App.Router.map(function() {
    this.resource('favs', { path: '/favs' }, function() {
        this.route('new');
        this.route('edit', { path: ':fav_id/edit' })
    });
});

[...]

App.FavsEditRoute = Ember.Route.extend({
    deactivate: function() {
        var model = this.get('currentModel');
        if(model && model.get('isDirty')) {
            model.get('transaction').rollback();
        }
    },

    model: function(params) {
        return App.Fav.find(params.fav_id);
    },
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-04T18:31:58.000

我建议使用 willTransition 路由操作。它目前似乎被宣传为 Ember 指南中的解决方案：

[https://guides.emberjs.com/release/routing/preventing-and-retrying-transitions/](https://guides.emberjs.com/release/routing/preventing-and-retrying-transitions/)

除了在公共 API 中，这种方法的优点是您可以提示用户确认他们是否真的要放弃更改，如果他们拒绝，则取消转换。

例如：

```
App.FavsEditRoute = Ember.Route.extend({
  ...
  actions: {
    willTransition: function(transition) {
      controller = this.controllerFor('fav');
      if (controller.get('isDirty') &&
          !confirm("Are you sure you want to abandon progress?")) {
        transition.abort();
        return false;
      } else {
        controller.get("content").rollback();
        return true;
      }
    }
  }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T11:39:39.163

当路由完全离开时，才执行 deactivate 钩子。因此，我建议覆盖您的路线的 contextDidChange 函数。以下是 Ember Source 的摘录：

```
Ember.Route = Ember.Object.extend({
    /**
    @private

    Called when the context is changed by router.js.
  */
  contextDidChange: function() {
    this.currentModel = this.context;
  }
}); 
```

我建议这样做：

```
App.FavsEditRoute = Ember.Route.extend({
    deactivate: function() {
        this.doRollback();
    },
    contextDidChange: function() {
        this.doRollback();
        this._super();
    },
    doRollback: function(){
        var model = this.get('currentModel');
        if(model && model.get('isDirty')) {
            model.get('transaction').rollback();
        }
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-18T08:43:55.737

在 Ember 2.2 中，正确的代码（在路由中）是：

```
actions: {
  saveScene: function (scene) {
    var _that = this;

    scene.save().then(function (response) {
      // on saveScene action, go to list route
      _that.transitionTo('scenes');
    });
  },

  willTransition: function (transition) {
    // on transition, if model has unsaved changes, revert them
    var model = this.controller.get('model');
    if (model && model.get('hasDirtyAttributes')) {
      model.rollbackAttributes();
    }
  }
} 
```

# google-apps-script - 您可以通过 Google 文档中的应用程序脚本设置 rowspan / colspan 吗？

> ID：15596503
> 
> 赞同：2
> 
> 时间：2013-03-24T08:22:07.837
> 
> 标签：google-apps-script, google-docs

有没有人举例说明我们如何/如果我们可以在应用脚本生成的 Google 文档中的 TableCell (?) 元素上设置行/列跨度？

这是否需要使用 .setAttributes() 方法来完成？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T16:51:18.400

不，目前没有办法做到这一点。我也没有在问题跟踪器上看到功能请求。

对象上有一个`.merge()`方法`TableCell`，听起来很有希望。然而，当它被使用时，它通过将“当前”TableCell 的内容附加到“前一个”对象，然后删除“当前”对象，将“当前”TableCell 对象与“前一个”同级 TableCell 对象组合在一起。

## 前

![前](../Images/6b44ddf5e0d990d97daabe55acaaac51.png)

## 后

![后](../Images/5a1f928272534c7bb6463b3504b52f5e.png)

## 代码

我修改[了先前答案](https://stackoverflow.com/a/14000073/1677912)中的代码以进行实验`.merge()`，这里是：

```
function mergeExperiment() {
  var folder = "StackOverflow";
  var docname = "Experiment.gdoc";
  var docId = getFileByName_(folder, docname).getId();

  var doc = DocumentApp.openById(docId);
  var docBody = doc.getActiveSection();

  var totalElements = doc.getNumChildren();
  var el=[]
  for( var j = 0; j < totalElements; ++j ) {
    var element = doc.getChild(j);
    var type = element.getType();

    switch (type) {
      case DocumentApp.ElementType.PARAGRAPH:
        break;

      case DocumentApp.ElementType.TABLE:
        var tablerows=element.getNumRows();
        for ( var row = 0; row < tablerows; ++row ) {
          var tablerow = element.getRow(row)
          for ( var cell=0; cell < tablerow.getNumCells(); ++cell) {
            // Experiment - merge two cells in the second row
            if (row==1 && cell==1) {
              tablerow.getChild(cell).merge();
            }
          }
        }
        break;
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-11-01T18:12:29.467

我发现了这个问题，因为我想摆脱表格中的 RowSpan 并搜索“如何将 RowSpan 或 ColSpan 设置为 1.

正如你所做的那样，我不得不意识到没有办法对 TableCell 的这些隐藏属性进行可写访问。

但在我的研究中，我找到了这个问题的答案。这是一个不舒服的解决方法，但是一旦正确设置，它就会非常好用：

关键是您可以删除一个单元格并将其替换为您之前手动跨越的单元格的深层副本。

如果您有一个包含一些手动创建的跨越单元格的表，例如一个包含 3 行和 3 个单元格的表，您将它们全部跨越，那么您可以制作跨越单元格的深度分离副本并将其插入到另一个表中的任何位置。目标表中插入的单元格将像在源表中一样跨越周围的单元格。

你要知道周围单元格的内容还在，但是看不到。如果您再次删除跨越单元格或手动取消跨越，它们将再次显示。

插入已经跨越的 srcCell 的效果与您将 3x3 单元格重叠在目标表上的白纸具有相同的效果。所有的细胞都还在，但你看不到它们。guugel-doc 引擎仅显示跨单元格的内容。

而且这种行为是可以复制的。这不是很好吗？

我知道，这是一个 moloch，如果您必须跨越许多具有许多不同跨越宽度和方向的单元格，但如果您根据需要设计它，那么您可能值得花时间在跨越单元格模式上。

可以创建一个文档，其中仅包含您需要的所有跨单元格的表格。您可以将此文档用作您的“生成单元格源”。

您可以复制以下测试文档，其中包含 3 个表格，并清楚地显示了其背后的原理。第一个表在 tableindex 0,0 处包含一个 3x3 跨越单元格。第二个表将单元格本身中每个单元格的索引保存为行、列对和一个“TestCell”，它应该跨越 3x3 个其他单元格。第三张表仅供比较：

[https://docs.google.com/document/d/1G8C2JP_4689RFmtxHZ2djslwoGWwHwieHfbIwr2XzeQ/edit](https://docs.google.com/document/d/1G8C2JP_4689RFmtxHZ2djslwoGWwHwieHfbIwr2XzeQ/edit)

然后您可以访问绑定脚本，该脚本保留“TestCell”的内容，将其替换为 3 乘以 3 的跨越单元格并再次放回内容。您将看到以下绑定脚本：

```
var doc     = DocumentApp.getActiveDocument();
var docBody = doc.getBody();

function myFunction() {
  var tables   = docBody.getTables();
  var srcTable = tables[ 0 ];
  var dstTable = tables[ 1 ];

  var foundText = docBody.findText( "TestCell" );
  if ( foundText ) {
    //  The cell that should span others
    var dstCell = foundText.getElement().getParent().getParent();

    //  If you want to preserve the contents of the cell
    var cellContents = [];
    var numChildren  = dstCell.getNumChildren();
    for ( var i = 0; i<numChildren; i++ ) {
      cellContents.push( dstCell.getChild( i ).copy() );
    }

    //  Row- and ColumnIndex of the future spanning cell
    var dstRowIndex = dstTable.getChildIndex( dstCell.getParent() );
    var dstColIndex = dstCell.getParent().getChildIndex( dstCell );

    //  Deep, detached copy of an already spanning cell
    var srcCell = srcTable.getCell( 0, 0 ).copy();

    // delete dstCell and insert the deep, detached copy of the spanning cell
    dstCell.removeFromParent();
    dstCell = dstTable.getChild( dstRowIndex ).insertTableCell( dstColIndex, srcCell );

    //  If you preserved the contents of the deleted, non-spanning cell,
    //     you can put them back again
    for ( var i = numChildren-1; i>=0; i-- ) {
      var childType = cellContents[ i ].getType();
      // Do not forget to extend this switch by your other ElementTypes !!!
      switch ( childType ) {
        case DocumentApp.ElementType.PARAGRAPH:
          dstCell.insertParagraph( 0, cellContents[ i ] );
          break;
      }
    }
    //  Get rid of the default single and empty PARAGRAPH of the srcCell,
    //      if you had to put back the contents of the delted non-spanning cell
    dstCell.removeChild( dstCell.getChild( dstCell.getNumChildren() - 1 ) );
  }
} 
```

我希望，这会有所帮助。

非常感谢您的关注，

理查德

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-19T11:54:07.623

我发现了一个非常笨拙的解决方法，因为`colspan`GAS 缺乏......

1.  使用您想要的列/行创建一个表（`FlexTable`,`Grid`等）
2.  当你到达你想使用的区域时`colspan`，`rowspan`创建一个新表格（具有不同的单元格宽度和高度
3.  每次要更改单元格宽度或高度时，请继续创建一个新表格
4.  创建一个`VerticalPanel`并按顺序添加您在步骤 1-3 中创建的每个表

您现在拥有一个带有和特征的表格的*外观。*`colspan``rowspan`

不是很优雅，但这是我能想出的唯一解决方案。

# java - 实现状态模式是简单国际象棋游戏的良好设计选择吗？

> ID：15596504
> 
> 赞同：1
> 
> 时间：2013-03-24T08:22:14.283
> 
> 标签：java, design-patterns, chess, state-pattern

我正在尝试编写两个用户玩的离线无 AI 无 GUI 同步命令行国际象棋游戏（或一个用户同时玩白色和黑色）。这意味着只有 1 个线程。

国际象棋游戏包括特殊运动{捕获，过路，晋级，易位，将死，相持}

用户通过说明开始位置和结束位置与游戏进行交互。例如 e1 g1。就是这样，一行。

我试图充分利用面向对象设计的特权。但只是为了这个要求。**实施状态模式值得**吗？由于用户只输入命令，游戏不应要求用户在其后做出任何其他决定。

**编辑**：我很抱歉没有说清楚。我感到困惑的是，是在游戏控制级别实现状态，如下图：![在此处输入图像描述](../Images/8bff49cdd2626315567ebd47e659e69f.png)还是游戏块级别：![在此处输入图像描述](../Images/a9fd783dbe88750cbcc81df909eb031a.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T08:28:31.517

如果您不打算稍后改进游戏或在其中添加更多功能，则无需使其有状态。

但是，如果未来的工作有任何机会（低至**1%**），那么你最好让它有状态。因为编写不必要的代码总是比在新上下文中重写功能更容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T08:32:12.747

使用状态将为您提供 cosnosle 应用程序国际象棋游戏的好处，就像它为您提供一个完整的 UI 应用程序一样。主要好处是您可以跟踪允许的移动和游戏状态，就像您所说的：casteling、en-passant、check、check-mate 等。

游戏状态和可能的移动不受您使用控制台应用程序、UI、分布式 Web 应用程序或其他任何事实的影响。它们与游戏的内部逻辑有关。

**编辑：**

对于 UI 国际象棋应用程序，我能想到的一个好处是，如果您希望专门查看某些特定状态的外观，例如：当出现检查状态时，在国王上放置一个红色方块。

# android - 如何使用linearLayout设置onClick方法？

> ID：15596507
> 
> 赞同：34
> 
> 时间：2013-03-24T08:22:36.707
> 
> 标签：android, android-linearlayout

我正在创建一个应用程序并昨天发布了一个问题， [如何通过单击行上的任何位置来开始活动](https://stackoverflow.com/questions/15591147/how-to-start-activity-by-click-any-where-on-row)。有一个想法，如下所示，但我收到此**错误：**

> View 类型中的方法 setOnClickListener(View.OnClickListener) 不适用于参数（new OnClickListener(){}）

这是我的**代码：**

```
LinearLayout menu_photos = (LinearLayout )findViewById(R.id.picture_part);
menu_photos.setOnClickListener(new OnClickListener() {      
    @Override
    public void onClick(View v) {
        Intent picture_intent = new Intent(CurrentActivity.this,PictureActivity.class);
        startActivity(picture_intent );     
    }
}); 
```

**XML:**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
   android:layout_width="fill_parent"
   android:layout_height="fill_parent"
   android:background="@drawable/main_background"
   android:orientation="vertical" >
   <include
        android:id="@id/includeTop"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        layout="@layout/private_space_title" />

<ScrollView
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >
<LinearLayout
    android:id="@id/mail_list"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/main_list_bg"
    android:orientation="vertical"
    android:paddingBottom="10.0dip"
    android:paddingLeft="20.0dip"
    android:paddingRight="20.0dip"
    android:paddingTop="15.0dip" >
<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <LinearLayout
        android:id="@id/picture_part"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/background_selector"
        android:clickable="true"
        android:gravity="center_vertical"
        android:orientation="horizontal"
        android:paddingRight="10.0dip" >

        <ImageView
            android:id="@id/left_icon1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:padding="10.0dip"
            android:src="@drawable/icon_picture" />

        <TextView
            android:id="@id/textView1"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1.0"
            android:ellipsize="end"
            android:singleLine="true"
            android:text="@string/function_img_management"
            android:textAppearance="?android:textAppearanceMedium"
            android:textColor="@color/white" />

        <ImageView
            android:id="@id/right_icon1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/listview_arrow" />
    </LinearLayout>

    <ImageView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:src="@drawable/list_view_divider" />

    <LinearLayout
        android:id="@id/video_part"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/background_selector"
        android:clickable="true"
        android:gravity="center_vertical"
        android:orientation="horizontal"
        android:paddingRight="10.0dip" >

        <ImageView
            android:id="@id/left_icon2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:padding="10.0dip"
            android:src="@drawable/icon_video" />

        <TextView
            android:id="@id/textView2"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1.0"
            android:ellipsize="end"
            android:singleLine="true"
            android:text="@string/function_video_management"
            android:textAppearance="?android:textAppearanceMedium"
            android:textColor="@color/white" />

        <ImageView
            android:id="@id/right_icon2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/listview_arrow" />
    </LinearLayout>

    <ImageView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:src="@drawable/list_view_divider" />

    <LinearLayout
        android:id="@id/sms_call_part"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/background_selector"
        android:clickable="true"
        android:gravity="center_vertical"
        android:orientation="horizontal"
        android:paddingRight="10.0dip" >

        <RelativeLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <ImageView
                android:id="@id/left_icon2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:padding="10.0dip"
                android:src="@drawable/icon_sms_call" />

            <TextView
                android:id="@id/unread_count"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignRight="@id/left_icon2"
                android:layout_marginRight="5.0dip"
                android:layout_marginTop="3.0dip"
                android:background="@drawable/counter"
                android:gravity="center"
                android:textColor="@color/white"
                android:visibility="visible" />
        </RelativeLayout>

        <TextView
            android:id="@id/textView3"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1.0"
            android:ellipsize="end"
            android:singleLine="true"
            android:text="@string/function_sms_management"
            android:textAppearance="?android:textAppearanceMedium"
            android:textColor="@color/white" />

        <ImageView
            android:id="@id/right_icon3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/listview_arrow" />
    </LinearLayout>

    <ImageView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:src="@drawable/list_view_divider" />

    <LinearLayout
        android:id="@id/private_contact_part"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/background_selector"
        android:clickable="true"
        android:gravity="center_vertical"
        android:orientation="horizontal"
        android:paddingRight="10.0dip" >

        <ImageView
            android:id="@id/left_icon4"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:padding="10.0dip"
            android:src="@drawable/icon_contact" />

        <TextView
            android:id="@id/textView4"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1.0"
            android:ellipsize="end"
            android:singleLine="true"
            android:text="@string/function_privacy_management"
            android:textAppearance="?android:textAppearanceMedium"
            android:textColor="@color/white" />

        <ImageView
            android:id="@id/right_icon4"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/listview_arrow" />
    </LinearLayout>

    <ImageView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:src="@drawable/list_view_divider" />

    <LinearLayout
        android:id="@id/break_in_part"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/background_selector"
        android:clickable="true"
        android:gravity="center_vertical"
        android:orientation="horizontal"
        android:paddingRight="10.0dip" >

        <RelativeLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <ImageView
                android:id="@id/left_icon5"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:padding="10.0dip"
                android:src="@drawable/icon_break_in" />

            <TextView
                android:id="@id/login_record_main_unread_count"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignRight="@id/left_icon5"
                android:layout_marginRight="5.0dip"
                android:layout_marginTop="3.0dip"
                android:background="@drawable/counter"
                android:gravity="center"
                android:textColor="@color/white"
                android:visibility="visible" />
        </RelativeLayout>

        <TextView
            android:id="@id/textView5"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1.0"
            android:ellipsize="end"
            android:singleLine="true"
            android:text="@string/function_break_in_management"
            android:textAppearance="?android:textAppearanceMedium"
            android:textColor="@color/white" />

        <ImageView
            android:id="@id/right_icon5"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/listview_arrow" />
    </LinearLayout>

    <ImageView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:src="@drawable/list_view_divider" />
</LinearLayout>

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="90.0dip"
    android:layout_weight="1.0"
    android:gravity="center" >

    <Button
        android:id="@id/member_up_btn"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginLeft="20.0dip"
        android:layout_marginRight="20.0dip"
        android:background="@drawable/upgrade_selector"
        android:text="@string/main_upgrade_button"
        android:textSize="18.0sp" />
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-03-24T08:32:21.497

下面的行是你的代码： -

```
menu_photos.setOnClickListener(new OnClickListener() { 
```

将此行替换为以下代码：-

```
menu_photos.setOnClickListener(new View.OnClickListener() { 
```

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2014-09-03T09:21:48.163

```
LinearLayout app_layer = (LinearLayout) findViewById (R.id.main_activity_app_layer);
app_layer.setOnClickListener(new View.OnClickListener() {
    @Override
    public void onClick(View v) {
        Toast.makeText(this, "hello", Toast.LENGTH_LONG).show();
    }
}); 
```

如果您在所有`android:clickable="true"`
布局中都有任何按钮或文本视图，请设置 LinearLayout 属性`set android:clickable="false"`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T08:44:04.253

从您的 xml 布局文件中，我认为您正在寻找的是一个列表视图，而不是大量的线性布局。[这](http://www.vogella.com/articles/AndroidListView/article.html)是一个很好的教程，可以帮助您入门，可能正是您需要的，带有图像和文本的行。对于列表视图，只需使用[setOnItemCLickListener()](http://developer.android.com/reference/android/widget/AdapterView.html#setOnItemClickListener%28android.widget.AdapterView.OnItemClickListener%29)。

回到你想要的，我认为你需要使线性布局可聚焦/可触摸以便“接收”点击。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-06-26T09:31:39.823

@duggu 的大收获。除了答案之外，在 LinearLayout 中使用 ImageView 和 TextView，嵌套 LinearLayout 是个坏主意。代替使用`drawableLeft:@src`TextView 和分隔线，您可以使用简单的 View 而不是膨胀 drawable。

```
<View
android:background="#aeaeae"
android:layout_width="match_parent"
android:layout_height="0.5dp"/> 
```

# ruby - 考虑单个哈希键值合并哈希数组

> ID：15596510
> 
> 赞同：1
> 
> 时间：2013-03-24T08:22:49.097
> 
> 标签：ruby

我有一个这样的哈希数组。

```
[
 {"package_details"=>{"name"=>"Package3", "price"=>3000.0, "id"=>"281"},"event_id"=>336},
 {"package_details"=>{"name"=>"2000/-", "price"=>2000.0, "id"=>"280"}, "event_id"=>337}, 
 {"package_details"=>{"name"=>"Package1", "price"=>1000.0, "id"=>"282"},"event_id"=>337},
 {"package_details"=>{"name"=>"Package2", "price"=>2000.0, "id"=>"283"},"event_id"=>337}
] 
```

我希望它是这样的。

```
[
  {"event_id"=>336, "package_details"=>[
    {"name"=>"Package3", "price"=>3000.0, "id"=>"281"}
  ]},
  {"event_id"=>337, "package_details"=>[
    {"name"=>"2000/-", "price"=>2000.0, "id"=>"280"},
    {"name"=>"Package1", "price"=>1000.0, "id"=>"282"},
    {"name"=>"Package2", "price"=>2000.0, "id"=>"283"}
  ]},
] 
```

哈希应该根据相等的`event_id`值合并，并且事件可以有很多包。

我想知道最简单的方法来做到这一点。尽管我能够处理许多 if 和 else 。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-24T16:28:31.087

为您提供所需功能结果的最简单转换是使用[`Enumerable#group_by`](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-group_by).

```
details = [
 {"package_details"=>{"name"=>"Package3","price"=>3000.0,"id"=>"281"},"event_id"=>336},
 {"package_details"=>{"name"=>"2000/-","price"=>2000.0,"id"=>"280"},"event_id"=>337}, 
 {"package_details"=>{"name"=>"Package1","price"=>1000.0,"id"=>"282"},"event_id"=>337},
 {"package_details"=>{"name"=>"Package2","price"=>2000.0,"id"=>"283"},"event_id"=>337}
]

grouped = details.group_by{ |d| d["event_id"] }
#=> {
#=>   336=>[
#=>     {"package_details"=>{"name"=>"Package3", "price"=>3000.0, "id"=>"281"}, "event_id"=>336}],
#=>   337=>[
#=>     {"package_details"=>{"name"=>"2000/-", "price"=>2000.0, "id"=>"280"}, "event_id"=>337},
#=>     {"package_details"=>{"name"=>"Package1", "price"=>1000.0, "id"=>"282"}, "event_id"=>337},
#=>     {"package_details"=>{"name"=>"Package2", "price"=>2000.0, "id"=>"283"}, "event_id"=>337}]
#=> } 
```

有了这个，你可以这样做：

```
grouped.each do |event_id, packages|
  # event_id is the actual value, like 336
  # packages is an array of hashes from your original
end 
```

如果您确实需要您描述的格式，那么您可以这样做：

```
transformed = details.group_by{ |d| d["event_id"] }.map do |event_id, hashes|
  {
    "event_id"=>event_id,
    "package_details"=>hashes.map{ |h| h["package_details"] }
  }
end    
#=> [
#=>   {"event_id"=>336, "package_details"=>[
#=>     {"name"=>"Package3", "price"=>3000.0, "id"=>"281"}
#=>   ]},
#=>   {"event_id"=>337, "package_details"=>[
#=>     {"name"=>"2000/-", "price"=>2000.0, "id"=>"280"},
#=>     {"name"=>"Package1", "price"=>1000.0, "id"=>"282"},
#=>     {"name"=>"Package2", "price"=>2000.0, "id"=>"283"}
#=>   ]}
#=> ] 
```

以上内容通过分组并将每个键/值对转换（“映射”）为自定义哈希，其内容已根据您的需要进行修改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T10:05:56.353

Finally I got it. For above input hash, I was manage to get a like this.

```
[{"packages"=>[{"name"=>"Package3", "price"=>3000.0, "id"=>"281"}], "event_id"=>336}, {"packages"=>[{"name"=>"2000/-", "price"=>2000.0, "id"=>"280"}, {"name"=>"Package1", "price"=>1000.0, "id"=>"282"}, {"name"=>"Package2", "price"=>2000.0, "id"=>"283"}], "event_id"=>337} 
```

With using these methods. This is not the most accurate way. But it has done the the trick for me.

```
event_id_array = Array.new
events_with_packages = Array.new
events.each.each do |event|
event_id_array.push(event.id)
end
event_id_array.uniq!.each_with_index do |e_id, i|
  events_with_packages[i]  = Hash.new
  events_with_packages[i]["event_id"] = e_id
  events_with_packages[i]["packages"] = Array.new
    events.each do |event|
    tmp_event = Hash.new
    if(event.id==e_id)
      tmp_event["id"] = event[:ep_id]
      tmp_event["price"] = event[:price]
      tmp_event["name"] = event[:ep_name]
      events_with_packages[i]["packages"].push(tmp_event)
    end
  end
end
events_with_packages # the answer 
```

# php - SQL - 按相关性排序结果

> ID：15596511
> 
> 赞同：0
> 
> 时间：2013-03-24T08:23:02.937
> 
> 标签：php, mysql, sql

我目前正在学习 MySQL，我正在掌握它，但我遇到了一些困难。

这是我的表结构 - [http://i.imgur.com/XcGKKcA.jpg](http://i.imgur.com/XcGKKcA.jpg)

这是我的代码 -

```
$host = 'localhost';
$username = 'user';
$password = 'pass';
$database = 'db';

$url = $_GET['url'];
$title = $_GET['title'];
$description = $_GET['description'];

mysql_connect($host, $username, $password);
@mysql_select_db($database) or die('DB ERROR');

$query = "SELECT * FROM search";
$result = mysql_query($query);
$number = mysql_numrows($result);
mysql_close();

$i=0;
while ($i < $number) {

$db_url = mysql_result($result, $i, "url");
$db_title = mysql_result($result, $i, "title");
$db_description = mysql_result($result, $i, "description");

echo $i.'-'.$db_url.'-'.$db_title.'-'.$db_description.'<br />';
$i++;
}

?> 
```

请注意，`$query`不完整。例如，我如何通过相关性来排序`$search_query`？

提前谢谢你，请注意我刚刚启动 MySQL，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T08:28:50.000

例如：

筛选：

```
SELECT * FROM search WHERE title = 'Vlad'

SELECT * FROM search WHERE description LIKE 'Vlad%' 
```

命令：

```
SELECT * FROM search ORDER BY title DESC

SELECT * FROM search ORDER BY title ASC 
```

# codeigniter - 带有连接表的codeigniter分页

> ID：15596513
> 
> 赞同：2
> 
> 时间：2013-03-24T08:23:25.023
> 
> 标签：codeigniter, join, pagination, html-table

我正在尝试将分页放入我的 CodeIgniter 项目中。我已经仔细按照说明进行操作，我确实设法加入表格并将它们显示在我的“mahasiswa_view”中，但是当我尝试将它与分页结合使用时，它显示错误：

![检查这个错误图片](../Images/2aaab9b99d2de647c0ef44d9b0283092.png)

这是我的控制器代码 = "home" ：

```
class Home extends CI_Controller
{
function __construct()
{
    parent::__construct();
    $this->load->model('modelku');
}

function index($offset = NULL)
{
    //pagination
    $limit = 3;
    if(!is_null($offset))
    {
        $offset = $this->uri->segment(3);
    }
    $this->load->library('pagination');
    $config['uri_segment'] = 3;
    $config['base_url'] = site_url('home/index');
    $config['total_rows'] = $this->modelku->total_record_mahasiswa();
    $config['per_page'] = $limit;
    $config['num_links'] = 5;
    $config['first_link'] = 'First';
    $config['last_link'] = 'Last';
    $this->pagination->initialize($config);

    //$data['mahasiswa']=$this->modelku->get_mahasiswa_all();
    $data['mahasiswa'] = $this->modelku->get_mahasiswa_all($limit,$offset);
    $this->load->view('mahasiswa_view',$data);
} 
```

这是我的模型代码=“modelku”：

```
if(!defined('BASEPATH')) exit('No direct script access allowed');

class Modelku extends CI_Model
{
//pagination
function total_record_mahasiswa()
{
    return $this->db->count_all('tb_mahasiswa','tb_prodi');
    //return $this->db->count_all('tb_mahasiswa');
}

function get_mahasiswa_all($limit,$offset)
{
    $this->db->select('tb_mahasiswa.nim, tb_mahasiswa.nama, tb_mahasiswa.tanggal_lahir,
            tb_mahasiswa.jenis_kelamin, tb_mahasiswa.alamat, tb_mahasiswa.propinsi,
            tb_mahasiswa.telepon, tb_mahasiswa.email, tb_mahasiswa.photo,
            tb_mahasiswa.prodi,
            tb_prodi.namaprodi');
    $this->db->from('tb_mahasiswa');
    $this->db->join('tb_prodi','tb_mahasiswa.prodi=tb_prodi.kode');
    //$query = $this->db->get();
    $this->db->order_by('nim','ASC');
    //$query = $this->db->get('tb_mahasiswa','tb_prodi',$limit, $offset);
    $query = $this->db->get($limit, $offset);
    return $query->result();
} 
```

最后一个，我的观点 = 'mahasiswa_view' ：

```
<!doctype html>
<html>
<head>
    <title>PHP Framework</title>
    <link rel="stylesheet" href="<?php echo base_url() ?>asset/css/style.css"/>
</head>

<body>
    <h3>Selamat Datang di Form Mahasiswa</h3>

    <table width="80%" border="1" >

        <tr style="background-color:blue; color:white;">
            <td> No. </td>
            <td> NIM </td>
            <td> Nama </td>
            <td> Tanggal Lahir </td>
            <td> Jenis Kelamin </td>
            <td width="20%"> Alamat </td>
            <td> Telepon </td>
            <td> Email </td>
            <td> Prodi </td>    
            <td> Photo </td>
        </tr>

    <?php if(isset($msg_error))
        {
            echo '<div style="color:red;">' . $msg_error.'</div>';
        }
    ?>
    <?php
        echo anchor('home/login','Login');
        $no=1;
        foreach ($mahasiswa as $row)
        { 
    ?>
        <tr>
            <td><?php echo $no; ?></td>
            <td><?php echo $row->nim . ' '; ?></td>
            <td><?php echo $row->nama . ' '; ?></td>
            <td><?php echo $row->tanggal_lahir . ' '; ?></td>
            <td><?php echo $row->jenis_kelamin . ' '; ?></td>
            <td><?php echo $row->alamat . ' '; ?></td>
            <td><?php echo $row->telepon . ' '; ?></td>
            <td><?php echo $row->email . ' '; ?></td> 
            <td><?php echo $row->namaprodi . ' ';?></td>
            <td><?php echo $row->photo . ' </br>';?></td>
        </tr>

    <?php
        $no++;
        }
    ?>
    &nbsp
    <form action="<?php print site_url();?>/home/cari" method=POST>
        <input type=text name=cari> <input type=submit value="Cari">
    </form>
</table>

    <?php 
        echo "<br /><div>" .$this->pagination->create_links() ."</div>";
    ?>
</body>
</html> 
```

我还是 CodeIgniter 的新手，所以任何帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T09:33:14.043

你不能`$query = $this->db->get($limit, $offset);` `$limit, $offset`在 get() 中使用

```
$this->db->limit($limit, $offset);
$query = $this->db->get(); 
```

像这样使用它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T10:26:39.083

@Noel_Yahan 提供的答案是正确的。但是你的问题到底是什么？

```
Table 'db_kampus.3' does not exist 
```

可能是您正在使用某些第三方应用程序并且缺少表 [db_kampus.3]。

尝试安装缺少的表并按照上面的答案，它应该可以工作。

# android - Android 从 JSONObject 读取 JSONArray

> ID：15596516
> 
> 赞同：0
> 
> 时间：2013-03-24T08:24:06.777
> 
> 标签：android, json

我正在尝试从 json 文件中读取，该文件在 JSONObject 中有 JSONArray，它正在读取第一个 JSONObject 值，但没有从名为“zoom”的数组内部读取，你能帮帮我吗？

```
 {
   "@file_name": "materials",
   "materials": [
        {
            "@site_name": "N/A",
            "@site_icon_iPad_xPosition": "150",
            "@site_icon_iPad_yPosition": "150",
            "@site_icon_Android_xPosition": "215",
            "@site_icon_Android_yPosition": "206",
            "zoom": 
                {
                    "@zoom_name": "Main Reservoir",
                    "@zoom_number": "zoom1"

                }

        },
        {
            "@site_name": "Building Applications",
            "@site_icon_iPad_xPosition": "636",
            "@site_icon_iPad_yPosition": "313",
            "@site_icon_Android_xPosition": "215",
            "@site_icon_Android_yPosition": "206",
            "zoom": [
                {
                    "@zoom_name": "Rooftop Reservoir &amp; Pump Station",
                    "@zoom_number": "zoom10-1"

                },
                {
                    "@zoom_name": "Compact Zone PRV System",
                    "@zoom_number": "zoom10-2"

                },
                {
                    "@zoom_name": "Basement Reservoir &amp; Pump Room",
                    "@zoom_number": "zoom10-3"

                }
            ]           
        }
   ]
} 
```

我的代码：

```
 JSONParser jParser = new JSONParser();
         JSONObject json = jParser.getJSONFromUrl(Environment.getExternalStorageDirectory().getPath()+"/Materials.json");

            try {

                JSONArray materials = json.getJSONArray("materials");
                for(int i = 0; i < materials.length(); i++){

                    JSONObject c = materials.getJSONObject(i);

                    // Storing each json item in variable
                    String a1= c.getString("@site_name");
                    String a2 = c.getString("@site_icon_Android_xPosition");
                    String a3 = c.getString("@site_icon_Android_yPosition");

                    Log.d(TAG, a1+" "+a2+" "+a3);

                    JSONArray zoom = c.getJSONArray("zoom");
                    Log.d(TAG, ""+zoom.length());
                    for(int j = 0; j < zoom.length(); j++){

                        JSONObject d = zoom.getJSONObject(j);
                         String b1 = d.getString("@zoom_name");
                         String b2 = d.getString("@zoom_number");
                         Log.d(TAG, b1+" "+b2);
                    }

                   Log.d(TAG, "--------------------------------");

                }
            } catch (JSONException e) {
                 Log.d(TAG, "exeption");
                e.printStackTrace();
            } 
```

我的输出：

```
Applications 215 206
exeption 
```

例外：

```
03-24 11:29:01.188: W/System.err(17952): org.json.JSONException: Value {"@zoom_number":"zoom1","@zoom_name":"Main Reservoir"} at zoom of type org.json.JSONObject cannot be converted to JSONArray
03-24 11:29:01.198: W/System.err(17952):    at org.json.JSON.typeMismatch(JSON.java:100)
03-24 11:29:01.198: W/System.err(17952):    at org.json.JSONObject.getJSONArray(JSONObject.java:548)
03-24 11:29:01.198: W/System.err(17952):    at com.weterworks.MainActivity.onCreate(MainActivity.java:120)
03-24 11:29:01.198: W/System.err(17952):    at android.app.Activity.performCreate(Activity.java:4465)
03-24 11:29:01.198: W/System.err(17952):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
03-24 11:29:01.198: W/System.err(17952):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
03-24 11:29:01.198: W/System.err(17952):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
03-24 11:29:01.198: W/System.err(17952):    at android.app.ActivityThread.access$600(ActivityThread.java:123)
03-24 11:29:01.198: W/System.err(17952):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
03-24 11:29:01.198: W/System.err(17952):    at android.os.Handler.dispatchMessage(Handler.java:99)
03-24 11:29:01.198: W/System.err(17952):    at android.os.Looper.loop(Looper.java:137)
03-24 11:29:01.198: W/System.err(17952):    at android.app.ActivityThread.main(ActivityThread.java:4424)
03-24 11:29:01.198: W/System.err(17952):    at java.lang.reflect.Method.invokeNative(Native Method)
03-24 11:29:01.198: W/System.err(17952):    at java.lang.reflect.Method.invoke(Method.java:511)
03-24 11:29:01.198: W/System.err(17952):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
03-24 11:29:01.198: W/System.err(17952):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
03-24 11:29:01.198: W/System.err(17952):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T08:31:42.010

您的代码中有一个小错误。在处理该`zoom`属性的内部循环中，您指的是错误的数组对象。

```
for (int j = 0; j < zoom.length(); j++) {

    JSONObject d = materials.getJSONObject(j); // <-- Should refer to zoom, not materials
    String b1 = d.getString("@zoom_name");
    String b2 = d.getString("@zoom_number");
    Log.d(TAG, b1 + " " + b2);
} 
```

# eclipse - 从 Eclipse 的内部 Web 浏览器中删除 cookie 和缓存

> ID：15596519
> 
> 赞同：8
> 
> 时间：2013-03-24T08:24:59.420
> 
> 标签：eclipse, browser-cache

当使用*Eclipse Java EE IDE for Web Developers*版本的 Eclipse Juno SR2 并在内部 Web 浏览器中运行 Web 应用程序时，如何删除该浏览器的 cookie 和缓存？

我搜索了 Eclipse 的帮助、Google 和 StackOverflow.com，但令人惊讶的是，没有找到对这个简单问题的直接正确答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T17:43:56.903

Eclipse 并没有真正的内部浏览器。它只是使用系统上的默认浏览器。您可以更改此行为

`Window > Preferences > General > Web Browser`

应从浏览器清除 cookie。

让我知道这是否有帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-23T21:45:42.963

**在 Eclipse 的内部 Web 浏览器中修剪历史列表**

我在开发时经常使用内部 Web 浏览器 - 如果没有别的，它是一个方便的地方来测试 RESTful Web 服务的 GET 请求。我还使用 Eclipse 编写 HTML，内部浏览器再次成为“这看起来对吗？”的有用的第一个测试。这意味着我建立了一个相当长的历史列表，而最近的条目——我最有可能寻找的——需要滚动才能找到并重新使用它们。迄今为止，我还没有在 Eclipse 中找到一个设置（在撰写本文时我使用的是 3.3.2）来编辑内部浏览器历史记录。我很高兴被证明是错误的。

同时，解决方法是关闭 Eclipse，然后编辑Eclipse 工作区根目录`$WORKSPACE/.metadata/.plugins/org.eclipse.core.runtime/.settings/org.eclipse.ui.browser.prefs`所在的文件。`$WORKSPACE`这是一个纯文本文件：我在 Linux 和 Windows 上首选的文本编辑器是 SciTE，但实际上哪个并不重要。该文件有一个偏好键 internalWebBrowserHistory，格式为：

`internalWebBrowserHistory=url|*|url|*| ...`

删除过时的条目很简单；修改或添加新条目是完全可行的，注意冒号字符 (:) 使用前面的反斜杠 (\:) 进行转义。保存更改，重新启动 Eclipse，完成。希望将来会有一个内部首选项编辑器在 Eclipse 中使这更容易（或者，有人会向我指出我一直不注意并且它已经存在）。

# git - 在 Jenkins 中使用多个 git 分支进行声纳分析

> ID：15596522
> 
> 赞同：12
> 
> 时间：2013-03-24T08:25:23.597
> 
> 标签：git, maven, jenkins, sonarqube

我已经设置 Jenkins 来自动构建我项目的几个 git 分支。构建还会触发声纳分析，作为构建后的操作。

问题是所有分支都指向同一个 Sonar 项目。我知道有一个 sonar.branch 属性。是否可以让 Jenkins 自动将 sonar.branch 属性设置为正在构建的当前 git 分支（无需更改项目的 pom.xml）？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-24T10:01:32.350

You can try adding `-Dsonar.branch.name=something` in the field MAVEN_OPTS in jenkins post-build action (Advanced configuration).

I don't know how to resolve `something`, since I don't know how you configure your jenkins job... but it will probably be something like [`$git.branch`](http://docs.codehaus.org/display/SONAR/Triggering+Sonar+on+Jenkins+Job#TriggeringSonaronJenkinsJob-TriggeringaSonarAnalysiswithMaven).

I didn't try, so i'm not sure it will work.

In a Jenkins multi-branch pipeline, the variable is `BRANCH_NAME`.

**P.S.** While reading your question it's difficult to say if you are using maven or not to trigger sonar. If you are not using maven: [there is a `project properties` field in the Jenkins config where you can define `sonar.branch`](http://docs.codehaus.org/display/SONAR/Triggering+Sonar+on+Jenkins+Job#TriggeringSonaronJenkinsJob-TriggeringaSonarAnalysiswiththeSonarRunner).

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-08-31T06:00:59.900

这应该工作

```
mvn sonar:sonar -U -Dsonar.branch.name=$BRANCH_NAME 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-02T13:42:31.740

我不确定这是否有助于您自动执行 Jenkins，但是要运行具有正确分支集的 mvn sonar:sonar，如果您在基于 Unix 的环境中，您可以运行命令（注意反引号）：

```
mvn -Dsonar.branch=`git rev-parse --abbrev-ref HEAD` sonar:sonar 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-18T11:10:35.263

您是否使用构建参数来指定分支？

如果是，您可以轻松地告诉 Sonar 它是哪个分支，只需在配置文本区域中添加：

```
sonar.branch=${branch} 
```

其中 branch 是构建参数的名称。

# c# - 在 Parent 中将 TableLayoutPanel 居中

> ID：15596524
> 
> 赞同：0
> 
> 时间：2013-03-24T08:25:44.663
> 
> 标签：c#, layout, anchor, tablelayoutpanel, dockpanel

我花了几个小时试图弄清楚如何组织我的用户界面，而 PHP/CSS 中的简单之处却让我在 C# 中发疯。

基本上，我正在创建一个名为 Reply 的类，它是一个 2x2 TablePanelLayout 来显示电子邮件回复。每个回复都将是它的一个实例，它们将出现在垂直列表中。我试图弄清楚如何创建这个布局，但保持它居中并在父容器被拉伸时调整它的大小。

我最后一次尝试使用了 2 个 TablePanelLayouts。一个是 3x3 网格，使用中心单元格作为内容，其余的用于在边缘之间创建间距，但我意识到这种方法不允许滚动中心内容区域。所以我的问题是……最好的方法是什么？

我认为垂直 FlowLayoutPanel 最适合内容，但我不知道如何保持内容区域居中，同时在调整父级大小时允许它拉伸。

*编辑*

如果它更清楚，我认为这个想法将是......

```
<OutsideLayout>
     <RepliesContainer>
          <Reply></Reply>
          <Reply></Reply>
          <Reply></Reply>
     </RepliesContainer>
<OutsideLayout> 
```

其中“RepliesContainer”是一个垂直 FlowLayoutPanel，“Reply”是我的每个响应的 TableLayoutPanel，而“OutsideContainer”是保持居中但允许内部内容滚动所需的任何内容。我不确定是否需要“OutsideContainer”，但我不知道如何使用 DockStyle.Fill 并且仍然保持边缘之间的间距。

![在此处输入图像描述](../Images/89472806c87484414418855901075deb.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T08:43:55.580

The easiest way to keep the spaces is to add a left and right margin of equal values to your RepliesContainer. Then set its HorizontalAlignment to Stretch (which should already be the default.)

Next make your RepliesContainer just list out all of the replies you need. This may make your list taller than your visible area (which is solved by the next step)

Finally make your OutsideLayout simply be a ScrollViewer.

Of course, I wouldn't approach it this way in the first place. I'd personally use a simple ItemsControl which handles the scrollbar and vertical panel and laying out the individual 2x2 replies. Something like this (in pseudo-code so it may not compile. But you'll get the idea.)

```
<ItemsControl x:Name="MyRepliesControl"
    DataSource="{Binding MyRepliesData}">

    <!-- This is the template for an individual reply.
         The ItemsControl will create one instance for each reply automatically. -->
    <ItemsControl.ItemTemplate>

        <!-- 2x2 Reply Grid with a 24-unit margin on the left and right -->
        <Grid Margin="24,0" ...>
            ... contents of grid cells, etc. ...
        </Grid>

    </ItemsControl.ItemTemplate>

</ItemsControl> 
```

Note: This puts the left and right margins inside of the scrollbar area. If you want the margins outside of the scrollbar, instead put the Margin attribute on the ItemsControl itself.

Then you simply set the DataContext and ensure it has an IEnumerable property called MyRepliesData which has each individual reply.

This is the proper way to do it. with this approach, you can customize anything you need to visual-wise by only focusing on the 'templates' of how the data works. The ItemsControl worries about laying it all out and giving you a scrollbar. Your only responsibility is giving it the data via MyRepliesData.

# google-analytics - 广告词转换可能是页面组合而不是 1 个 URL？

> ID：15596525
> 
> 赞同：1
> 
> 时间：2013-03-24T08:26:01.923
> 
> 标签：google-analytics, google-ads-api

预先感谢您的帮助。

当客户访问页面组合时（访问页面的顺序无关紧要），我们希望在 adwords 中衡量转化（甚至作为分析目标）。

我们使用 adwords 转换优化器，因此 adwords 绝对必须接收数据才能根据正确的数据优化出价。

例如，如果一个人以任意顺序访问这两个页面，那么 AdWords 会将其作为转化来衡量：

[http://www.mysite.org/category_s/45.htm](http://www.mysite.org/category_s/45.htm)

[http://www.mysite.org/category_s/90.htm](http://www.mysite.org/category_s/90.htm)

现在，在 google adwords 中，您只能在客户访问一个页面时衡量转化，而不是页面组合。

对我们来说，潜在客户访问这两个页面以使转换有价值是非常重要的。

我们曾尝试使用 google anayltics 目标漏斗（我们确实已将其链接到我们的 adwords 帐户）来执行此操作，但实际上并不需要所谓的“必需步骤”来衡量转化。衡量是否访问了其他页面，并将其计为转化。

这可能吗？修改 adwords 转化跟踪代码？是否可以设置为分析“事件”目标？

谢谢您的帮助！

GW

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T20:27:46.513

为网址一创建目标。为 url 2 创建一个目标。为满足这两个目标的访问者创建自定义细分。

是的，有可能有基于事件的目标，我只是不明白这将如何解决你的问题。

# c# - 从输出文件中删除原始行

> ID：15596528
> 
> 赞同：0
> 
> 时间：2013-03-24T08:26:19.163
> 
> 标签：c#

我想`tempstring`从 output.txt 文件中删除行

```
File.Copy(words, Npath);
StreamReader temp = new StreamReader(Npath, Encoding.UTF8);
string tempstring = temp.ReadToEnd();
string[] temp3 = tempstring.Split(',');
temp.Close();

StreamWriter sW = File.AppendText(Npath);
string remove = tempstring.Replace(tempstring," ");
foreach (string item in temp3)
{
    string str = item.TrimStart().TrimEnd();
    string newStr = "<addr-line>" + str + "</addr-line>";
    sW.WriteLine(newStr);
}
sW.Close(); 
```

输出 .txt 文件显示

> > **Marko Kostic, 诺维萨德大学技术科学学院, Trg D. Obradovica 6, 21125 Novi Sad, 塞尔维亚**

```
<addr-line>Marko Kostic</addr-line>
<addr-line>Faculty of Technical Sciences</addr-line>
<addr-line>University of Novi Sad</addr-line>
<addr-line>Trg D. Obradovica 6</addr-line>
<addr-line>21125 Novi Sad</addr-line>
<addr-line>Serbia</addr-line> 
```

我想删除代码中`tempstring`来自输出文件的粗体段落

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T08:35:48.007

why are using append?

```
//StreamWriter sW = File.AppendText(Npath);
StreamWriter sW = new StreamWriter(Npath); 
```

this will remove the old content (which you read before) and set the new one.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T08:45:21.887

代替

```
StreamWriter sW = File.AppendText(Npath); 
```

和

```
StreamWriter sW = new StreamWriter(Npath, false); 
```

因为，您想覆盖文件中的文本，所以不要以附加模式打开文件，您应该创建一个新的`StreamWriter`并传递`false`参数，该参数将为`append`选项设置 false 值。

# node.js - 一只猫鼬收集会减慢另一只猫鼬收集速度吗？

> ID：15596529
> 
> 赞同：1
> 
> 时间：2013-03-24T08:27:11.483
> 
> 标签：node.js, mongodb, collections, mongoose

我正在运行一个网站，我希望用户能够上传和存储图像。我意识到建议使用外部服务（例如 amazon s3）存储图像，但是我现在不想为这样的东西付费。

我被告知的另一种选择是创建一个用于图像检索的 API。然而，mongoose 似乎不允许同时连接多个数据库，因此最简单的方法就是为我的图像使用单独的集合。

不过，我的问题是，使用单独的图像集合是否仍会减慢对其他集合的访问速度？理想情况下，我希望它是分开的，这样即使是繁重的图像流量也不会影响我的其他收藏，但我不确定是否是这种情况......

有人可以为我澄清一下吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T18:07:36.107

我知道这不是您问题的直接答案，但是恕我直言，如果您要做某事，请在第一次做对并将您的图像保存到 S3 之类的东西中。

S3 有一个免费层，您可以使用 1 年。它将为您提供 5 GB 的空间、20 000 个 GET 请求和每月 2000 次上传（老实说，如果您要过一遍，您可能可以负担得起一个小计划的费用）。[您可以在此处](http://aws.amazon.com/free/)阅读有关 AWS 的免费产品的信息。

# c# - 包含文件（如 XAML 中的转换器）的问题

> ID：15596531
> 
> 赞同：0
> 
> 时间：2013-03-24T08:27:26.190
> 
> 标签：c#, wpf, xaml, kinect

我有一个非常奇怪的问题：InteliSense 工作正常，但是当我想构建我的项目时，我看到了类似的错误

```
The name "NegationConverter" does not exist in the namespace "clr-  namespace:KinectAttractWindow.Converters". 
```

对于包含其他文件的每个文件都会发生这种情况，例如`App.xaml`.

该项目的源代码在[GitHub上可用](https://github.com/tkowalczyk/KinectAttractWindow)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T12:58:49.183

在这种情况下，真正令人讨厌的错误通常是别的东西。一旦编译处于错误状态，它将取消，因此这些命名空间错误可能只是未完成编译器传递的副产品。尝试检查您的错误列表以查找对您更有意义的错误。

我无法编译您的解决方案，因为不包括 Microsoft.Kinect 程序集。

# c# - 在 UpdateProgress 中更改图像 URL 的 C# 代码

> ID：15596537
> 
> 赞同：0
> 
> 时间：2013-03-24T08:28:49.907
> 
> 标签：c#, asp.net, updateprogress

我正在尝试在网站上注册时为新用户创建用户 ID 可用性检查。

我的代码如下所示：

```
<table>
    <tr>
        <td>
            <asp:UpdateProgress ID="UpdateProgress1" runat="server">
                <ProgressTemplate>
                    <asp:Image ID="Image1" runat="server" Height="23px" ImageUrl="~/Images/x_mark_red.png" Width="24px" />
                </ProgressTemplate>
            </asp:UpdateProgress>
            <asp:Button ID="Button2" runat="server" Text="Check" OnClick="Button2_Click" />
        </td>
    </tr>
</table> 
```

我想编写一个 C# 代码来更改图像 URL，这是用于将图像从 Spinning 更改为绿色复选标记或红色 X 标记。

请问有什么想法吗？

此致

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T08:51:55.410

首先，最初在实际 id 检查完成之前，我会将 Image1 url 设置为空白。所以我会有这样的一行：

```
<asp:Image ID="Image1" runat="server" Height="23px" ImageUrl="" Width="24px" /> 
```

然后在您的代码隐藏中，您可以定义一个事件处理程序来完成工作并更新图像 url：

```
public void Button2_Click(object sender, EventArgs e)
{
   bool isIdAvailable = SomeFunction() - Do whatever you need to determine whether userId is available.

   Image1.ImageUrl = (isIdAvailable) ? 
      "~/Images/green-check-mark.png" : "~/Images/x_mark_red.png";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T08:54:11.720

如果您在检查按钮单击时检查用户可用性，请在 Button2_Click 处理程序中编写以下代码：

```
if (UserIdIsAvailable()) // your check for user id availability here
{
  Image1.ImageUrl = "~/Images/available.png";
} 
```

还要确保不要覆盖 Page_Load 上的 ImageUrl。

如果您使用 ajax 请求检查客户端上的用户可用性，则需要使用 javascript 更改图像。

# android - 接收器不工作

> ID：15596538
> 
> 赞同：-1
> 
> 时间：2013-03-24T08:29:05.190
> 
> 标签：android, broadcastreceiver, intentfilter

我有两个实现接收器。

**第一次实现：**

```
 public class ApplicationStartListener extends BroadcastReceiver {
        Context mContext;
        @Override
        public void onReceive(Context context, Intent intent) {
                mContext = context;
                Toast.makeText(mContext, "FUI", Toast.LENGTH_LONG).show();
                Log.v("Server application FUI", intent.getAction());
        } 
```

此实现不起作用。

**二次实施：**

```
 public class TestActiv extends Activity{

        public void onCreate(Bundle bundle){
            super.onCreate(bundle);
            setContentView(R.layout.main);
            final IntentFilter intentFilter = new IntentFilter();
            intentFilter.addAction(Intent.ACTION_PACKAGE_CHANGED);
            intentFilter.addAction(Intent.ACTION_PACKAGE_ADDED);
            intentFilter.addAction(Intent.ACTION_PACKAGE_REPLACED);
            intentFilter.addAction(Intent.ACTION_SCREEN_OFF);
            intentFilter.addAction(Intent.ACTION_SCREEN_ON);
            intentFilter.addAction(Intent.ACTION_CAMERA_BUTTON);

            BroadcastReceiver broadcastReceiver = new BroadcastReceiver() {
                @Override
                public void onReceive(Context context, Intent intent) {
                    Log.v("Server applic", "FUI: " + intent.getAction());
                }
            };
            registerReceiver(broadcastReceiver, intentFilter);
        }
    } 
```

为什么不能先实现BroadcastReceiver？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T08:36:18.713

To register this receiver this cannot be inside the AndroidManifest.xml, register at runtime

Register this receiver in any service.

```
IntentFilter filter = new IntentFilter(Intent.ACTION_SCREEN_ON);
filter.addAction(Intent.ACTION_SCREEN_OFF);
BroadcastReceiver mReceiver = new ScreenReceiver();
registerReceiver(mReceiver, filter); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T17:16:30.003

我不需要意图 SCREEN_ON 和 SCREEN_OFF。只需要 PACKAGE_CHANGED。它在设备上运行应用程序时有效吗？

```
 public class TestActiv extends Activity{

        public void onCreate(Bundle bundle){
            super.onCreate(bundle);
            setContentView(R.layout.main);
            final IntentFilter intentFilter = new IntentFilter();
            intentFilter.addAction(Intent.ACTION_PACKAGE_CHANGED);  

            BroadcastReceiver broadcastReceiver = new BroadcastReceiver() {
                @Override
                public void onReceive(Context context, Intent intent) {
                    Log.v("Server applic", "FUI: " + intent.getAction());
                }
            };
            registerReceiver(broadcastReceiver, intentFilter);
        }
    } 
```

# java - 如何在 Java 中验证任何日期格式模式本身

> ID：15596542
> 
> 赞同：2
> 
> 时间：2013-03-24T08:29:58.157
> 
> 标签：java, validation, date, date-format, simpledateformat

在验证任何日期之前，我只是找不到任何方法来检查提供的模式是否有效。

例如

```
String datePattern = "blablabla"; 
```

我们如何验证创建对象 SimpleDateFormat 或任何其他 dateFormat 是否是有效模式。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T08:32:46.627

从[JavaDoc](https://docs.oracle.com/javase/9/docs/api/java/text/SimpleDateFormat.html#SimpleDateFormat-java.lang.String-)：

```
IllegalArgumentException - if the given pattern is invalid 
```

换句话说，捕获异常。如果它被捕获，它是一个无效的模式：

```
try {
    new SimpleDateFormat("invalid");
} catch (IllegalArgumentException e) {
    // invalid pattern
} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-24T08:34:12.793

试试这个：

```
String datePattern = "not a date object";
    SimpleDateFormat format = new SimpleDateFormat("yyyy-MM-dd");
    try {
        System.out.println(format.parse(datePattern));
    } catch (ParseException exception) {
        // Not in proper format
        System.out.println("Exception occured. String not in a date format.");
    } 
```

# matlab - Matlab坐标系不同于我们通常的坐标系

> ID：15596549
> 
> 赞同：1
> 
> 时间：2013-03-24T08:30:23.183
> 
> 标签：matlab, coordinate-systems

我注意到在 Matlab 中，坐标系有点不同，但我不能确定我的观察是否正确。当我尝试进行一些简单的图像处理时，我注意到 X 轴和 Y 轴是相反的：

Matlab中的纵轴是X轴，横轴是Y轴。我在尝试裁剪图像时注意到了这一点，`Im(XX:XX, YY:YY)`结果发现该`YY:YY`部分实际上代表了水平长度而不是垂直长度。

那么Matlab中的坐标将我们通常的X轴切换到它的Y轴并且我们通常的Y轴切换到它的X轴是真的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T08:46:50.783

您必须注意**坐标系**和**矩阵索引**之间的区别。当您访问矩阵中的元素（如 in `Im( a:b, c:d )`）时，您必须提供**行**索引，然后提供**列**索引：`Im( from_row : to_row, from_col : to_col )`。
现在可能有点混乱，因为行在 Y 方向，列在 X 方向。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T08:34:15.233

Matlab 是一种称为[Row-major order](http://en.wikipedia.org/wiki/Row-major_order)的东西。

您先说行，然后说列，这是数学的标准。

我个人从点积的公式中记住了这一点`row-dot-column`。

![http://www.terramath.com/tutorials/basics/col_row_major.jpg](../Images/9826543a4153656af5b7e405afa406a4.png)

# sql-server - SLEEP_TASK 等待类型

> ID：15596550
> 
> 赞同：1
> 
> 时间：2013-03-24T08:30:28.837
> 
> 标签：sql-server

我最近遇到了等待类型“SLEEP_TASK”，乳房空闲类别的问题。

在我的系统中，它是主要的等待类型。

有人知道它是什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T12:25:13.133

SLEEP_TASK 表示调度程序正在等待某事发生（这并不意味着这是坏事），如果您正在收集等待统计信息，那么在许多情况下您可能希望过滤掉一些等待，而 SLEEP_TASK 就是其中之一。什么您在服务器上还有其他等待类型吗？

[Paul White 对这个问题给出了很好的](https://dba.stackexchange.com/questions/11800/sleep-task-wait-type-in-sql-server-what-does-it-indicate)回答。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-19T09:24:32.183

“情况 [...] 始终是 SQL Server 正在等待来自客户端的下一个命令的情况。”

我在这里找到了这个答案：[https ://blogs.msdn.microsoft.com/psssql/2008/04/21/how-it-works-what-is-a-sleeping-awaiting-command-session/](https://blogs.msdn.microsoft.com/psssql/2008/04/21/how-it-works-what-is-a-sleeping-awaiting-command-session/)

# php - 如何使用 ORDER BY 选择多行

> ID：15596555
> 
> 赞同：1
> 
> 时间：2013-03-24T08:31:51.347
> 
> 标签：php, mysql, sql, greatest-n-per-group

我想选择按 desc 排序的多行。例如，我想为 Kandy、Ampara 和 Anuradhapura 选择最后添加的行。请从下面的链接查看我的数据库的屏幕截图。

![一个](../Images/ee186b7819a5afe25b0255e8abc64119.png)

我试过了：

```
SELECT thripstot, g_midgetot, l_foldertot 
FROM pest_data 
WHERE district = 'ampara' OR district = 'kandy' OR district = 'anuradhapura' 
order by id desc 
limit 0,1; 
```

这并没有提供我需要的结果。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-24T08:34:53.063

如果我没有正确理解您，您希望获取子句中`district`定义的每个指定的最新记录。`where`

如果将其设置为*Auto_increment*列，则可以使用子查询`district`通过最大值分别获取每个记录的最新记录。为了从选定的最新行中获取所有行，您需要将其与原始表连接起来，前提是它与和匹配。`ID`*`district``ID`*

 *```
SELECT  a.thripstot, a.g_midgetot, a.l_foldertot 
FROM    tableName a
        INNER JOIN
        (
            SELECT  district, MAX(id) max_id
            FROM    tableName
            GROUP   BY district
        ) b ON  a.district = b.district AND
                a.id = b.max_id
WHERE   a.district IN ('ampara','kandy', 'anuradhapura') 
```*

# php - 配置 symfony 以使用 eaccelerator

> ID：15596559
> 
> 赞同：1
> 
> 时间：2013-03-24T08:32:37.500
> 
> 标签：php, symfony, symfony-2.1, eaccelerator

是否有任何配置可以通过 eaccelerator 提高 symfony2 的性能？那么是否有任何配置可以使用 eaccelerator 来利用“查询缓存、结果缓存、元数据缓存”原则？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T15:41:44.813

可以将 eAccelerator 与 Symfony2 和 Doctrine 一起使用，但是您需要解决以下问题：

1.  [默认情况下，Eaccelerator 会去除 doc 块，使 Symfony/Doctrine 几乎不起作用](http://wildlyinaccurate.com/eaccelerator-and-doctrine-2)

2.  要看到 Symfony2 的宝贵性能提升，您需要创建一个 eAccelerator [ClassLoader](https://github.com/symfony/ClassLoader)。`--optimize`如果您不使用（至少我这样做）优化作曲家自动加载转储，您会发现 Symfony 中的大部分开销来自自动加载器中的 file_exists 调用。

# c - 将 OpenOffice/Libreoffice 与 Doxygen 结果相结合以获取代码文档？

> ID：15596563
> 
> 赞同：3
> 
> 时间：2013-03-24T08:33:33.790
> 
> 标签：c, doxygen

### 问题

我们目前希望通过重用我们之前的 OpenOffice 结果，从手动迁移到自动化 C 代码文档。

### 背景

在过去的 10 年中，我们手动生成了许多 OpenOffice (*.odt) 文件，包括类似于架构的散文、“工作原理”、图形和详细的 API 描述。因此，我们为每个产品提供了一个文档（为我们的客户导出为 *.pdf）。

我们现在更改了 C 代码以使用与 Doxygen 兼容的格式和关键字，从而生成格式良好的文档（HTML+CHM，直到现在还没有 PDF）。但这当然只包括详细的 API。目标仍然是生成一个包含 prosa 和图形的结果文件。

考虑合并 OpenOffice 和 Doxygen 的结果，我们想知道如何以及在哪个方向进行：

1.  转换 *.odt => *.html 并在 C-Code for Doxygen 中引用这些
2.  转换 *.odt => *.txt/png 并在 C-Code for Doxygen 中引用这些
3.  转换 *.odt => *.html 作为基础并在这些文件中引用 Doxygen-HTML-Results
4.  另一种可用的通用格式，用于合并两个结果（？）

### 问题

什么可能是最有效的方法，从我们的旧文档样式迁移到等效的单个文档文件 - 包括 Doxygen 结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-31T02:24:01.413

在花了太长时间试图在 Doxygen 中构建完整的文档之后，我最近过渡到了 Sphinx + Breathe + Doxygen。我发现多个工具增加的复杂性不仅仅被可用的文档所抵消。

Doxygen 用于您的 API 文档，将其保持内联有助于鼓励 API 使用代码进行更新。

[Sphinx](http://sphinx-doc.org/)用于您的系统文档、架构描述等。Sphinx 是一个基于文本的重组文档系统，您需要转换现有的 ODT 文档。

[Breathe](http://michaeljones.github.io/breathe/)是一座桥梁，可让您将 Doxygen 文档带入 Sphinx。Doxygen 被编译为 XML，Breathe 然后提取 XML 并将其推送到编译后的 Sphinx 文档中。

Sphinx & Breathe 可能还有其他替代品，但我强烈推荐这样的拆分。它允许 Doxygen 做它擅长的 API，并允许你在一个你不必每天都在努力的工具中做更高级别的系统文档。

# android - 在Android中将记录的值设置为变量

> ID：15596564
> 
> 赞同：0
> 
> 时间：2013-03-24T08:33:43.997
> 
> 标签：android, sqlite, variables

我有一个包含sqlite记录的表，我想将记录的值分配给一个变量，我尝试过这种方式：

```
latitudeB = database.execSQL("SELECT latitude FROM " + TABLE_NAME + "WHERE _id in (SELECT COUNT(_id)-1 FROM " + TABLE_NAME + ")"); 
```

但 execsql 返回无效。sql代码似乎在sqlite中工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T08:36:00.253

Your problem is `execSQL()` that is designated for statements which are not `SELECT`

So exactly from reference.

> Execute a single SQL statement that is NOT a SELECT or any other SQL statement that returns data.

instead it you need to use [`Cursor`](http://developer.android.com/reference/android/database/Cursor.html).

```
String query = SELECT latitude FROM " + TABLE_NAME 
               + " WHERE _id in (SELECT COUNT(_id)-1 FROM " + TABLE_NAME + ")";
Cursor c = db.rawQuery(query, null);
if (c.moveToFirst()) { // if cursor is not empty
   // do your work
   double latitude = c.getDouble(0); // getting latitude's value
} 
```

# windows - 在 Windows 的 QT Creator 中运行项目

> ID：15596566
> 
> 赞同：1
> 
> 时间：2013-03-24T08:33:58.347
> 
> 标签：windows, ffmpeg, qt-creator

我想在 Windows 上的 QT Creator 中使用 FFMPEG 开发一个视频播放器，但对 QT Creator 环境来说是全新的。

我已经从这个[链接](https://github.com/wang-bin/QtAV)下载了一个示例项目。当我在其中打开 QT Creator 并运行它时，它返回了这个错误，`:-1: error: avutil is required, but compiler can not find it`.

我已经下载了这个 (ffmpeg-20130322-git-e0e8c20-win64-static) FFMPEG 文件并将其解压缩到 C 分区中的文件夹中。我想我得到了那个错误，因为 QT 找不到 FFMPEG 在哪里，但仍然不知道如何链接它。你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T14:51:27.603

我是 QtAV 的作者。我猜您正在使用针对 OpenGL ES2 构建的官方 Qt5 库。但 QtAV 使用 OpenGL 1.x。所以你可能会得到编译错误。但是几天前我通过禁用 OpenGL 代码解决了这个问题。所以我想知道您是否使用的是最新代码。如果没有，请使用

```
git update 
```

更新 QtAV。如果编译错误仍然存​​在，请告诉我。我在我的电脑上测试并且工作正常。您还可以通过修改 QtAV.pro 来禁用 OpenGL 代码。在这里删除'gl'

```
OptionalDepends = portaudio direct2d gdiplus xv gl #openal 
```

我不熟悉 OpenGL，所以支持 OpenGL ES2 需要几天时间。如果要启用 OpenGL，可以使用 Qt4.8 或自己构建 Qt5。我建议你使用 Qt4.8，因为 Qt5 现在不稳定。

:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T11:05:05.427

您应该设置一些环境变量，以便编译器可以找到 FFmpeg 和其他库文件。

对于 VC 编译器，它们是 INCLUDE 和 LIB。对于 gcc，它们是 CPATH 和 LIBRARY_PATH。例如

vc:

```
set INCLUDE=ffmpeg_path\include;portaudio_path\include;%INCLUDE%
set LIB=ffmpeg_path\lib;portaudio_path\lib;%LIB% 
```

unix shell 环境中的 gcc（包括 mingw 和 sh.exe）：

```
export CPATH=ffmpeg_path/include:portaudio_path/include:$CPATH
export LIBRARY_PATH=ffmpeg_path/include:portaudio_path/lib:$LIBRARY_PATH 
```

没有sh.exe的windows cmd环境下的gcc

```
set CPATH=ffmpeg_path\include;portaudio_path\include;%CPATH%
set LIBRARY_PATH=ffmpeg_path\lib;portaudio_path\lib;%LIBRARY_PATH% 
```

如果您在 QtCreator 中构建，请转到 QtCreator 的“项目”页面并添加或附加这些环境。

我想我应该写一些文件来展示如何构建 QtAV。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T06:02:53.763

经过一番研究，我能够解决上述问题。这是解决方案，

*   从此[链接](http://beatinginfinity.blogspot.tw/2013/04/running-qtav-project-using-qt5-ffmpeg.html)下载“ffmpeg-20130322-git-e0e8c20-win32-dev” 。

*   将“ffmpeg-20130322-git-e0e8c20-win32-dev/include”文件夹中的所有文件夹复制到“C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include”

*   将所有 DLL 文件从“ffmpeg-20130322-git-e0e8c20-win32-dev/lib”复制到“C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\lib”

但是现在有很多与OpenGL命令相关的错误。最后，我能够成功运行该项目。[我博客上的这篇](http://beatinginfinity.blogspot.tw/2013/04/running-qtav-project-using-qt5-ffmpeg.html)文章显示了这些步骤。

# asp.net - 如何在 GridView EmptyDataTemplate 中找到 FormView

> ID：15596571
> 
> 赞同：0
> 
> 时间：2013-03-24T08:34:29.953
> 
> 标签：asp.net, gridview

我有一个 GridView 包含 Formview，如：

```
<asp:GridView ID="gv1" runat="server" AutoGenerateColumns="false"
     OnRowCommand="gv1_RowCommand" DataKeyNames="employeeID"
     DataSourceID="ds">
   <EmptyDataTemplate>
       <asp:FormView ID="fv1" runat="server" DataKeyNames="employeeID" 
                     DataSourceID="ds" DefaultMode="Insert">
           <InsertItemTemplate>
               // insert mode table
           </InsertItemTemplate>
           <EditItemTemplate>
              //  edit mode table
           </EditItemTemplate>
      </asp:FormView>
   </EmptyDataTemplate>

   <Columns>
       <asp:TemplateField>
       <HeaderTemplate>
           <asp:Button ID="btnNew" runat="server" Text="New Record" CommandName="New" />
       </HeaderTemplate>
           <ItemTemplate>
           <asp:Button ID="btnEdit" runat="server" Text="Edit" CommandName="Edit" />
       </ItemTemplate>
       </asp:TemplateField>
   </Columns>
</asp:GridView> 
```

我想要的是当单击按钮时，页面显示 EmptyDataTemplate，所以在代码隐藏中我尝试：

```
protected void gv1_RowCommand(object sender, GridViewCommandEventArgs e) {
    switch(e.CommandName){
        case "New":
            gv1.DataSourceID = null;
            break;
        case "Edit":
            var row = ((Control)e.CommandSource).NamingContainer as GridViewRow;
            if (row != null) {
                var fv = row.FindControl("fv1") as FormView;
                fv.ChangeMode(FormViewMode.Edit);
            }
            gv1.DataSourceID = null;
            break;
    }
} 
```

但是我一直在获取 FormView，它发生 NullReferenceException 错误。任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T11:21:24.600

我相信`EmptyDataTemplate`只有当您绑定到数据源并且源中没有记录时才会显示。因此，如果您有任何记录，您`EmptyDataTemplate`将永远不会显示。而且我也不相信带有命令按钮的列会在数据源为空时显示，因此您尝试做的事情不能以这种方式完成。

有些人通过使用网格页脚作为添加新行的位置来提供添加记录功能。这是一个堆栈溢出问题和答案（带有示例），说明如何做到这一点：

[ASP.net GridView 未从页脚模板插入](https://stackoverflow.com/questions/6263891/asp-net-gridview-not-inserting-from-footertemplate?rq=1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T08:40:23.833

`EmptyDataTemplate`当数据源返回零记录时使用。它用于显示诸如“未找到记录”之类的消息。如果要对控件进行数据绑定，请在 RowDataBoundEvent 上使用`Templatefield`& fetch 控件。`FindControl`

# ios - 谷歌地图 iOS

> ID：15596572
> 
> 赞同：-1
> 
> 时间：2013-03-24T08:34:32.377
> 
> 标签：ios, xcode, ios6, maps, google-maps-sdk-ios

我正在尝试 `CGRect` 在 iOS 中插入 Google 地图。但是下面的代码仍然在整个 iPhone 页面中显示地图。我该如何解决

```
CGRect rect = CGRectMake(50, 10, 200, 200);
GMSCameraPosition *camera = [GMSCameraPosition cameraWithLatitude:-33.8683
                                                        longitude:151.2086
                                                             zoom:6];
mapView_ = [GMSMapView mapWithFrame:rect camera:camera];
mapView_.myLocationEnabled = YES;
self.view = mapView_;
GMSMarkerOptions *options = [[GMSMarkerOptions alloc] init];
options.position = CLLocationCoordinate2DMake(-33.8683, 151.2086);
options.title = @"Sydney";
options.snippet = @"Australia";
[mapView_ addMarkerWithOptions:options]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T12:40:42.297

默认情况下，视图控制器的根视图会调整大小以填充屏幕。

您需要添加一个单独的视图作为根视图，然后将地图视图添加到其中。例如：

```
self.view = [[UIView alloc] initWithFrame: CGRectZero];
[self.view addSubview: mapView_]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-07T18:56:25.957

我发现使用 Google Maps Views 的一个好方法是：

1 - 将新的视图对象拖到您的控制器或视图上

2 - 相应的大小和位置

4 - 在身份检查器中将类设置为 GMSMapView

5 - 使用助手控制拖动，将其作为属性提供给您的视图控制器

6 - 让所有内容都与您在编辑器中指定的大小完全相同，并将其视为已初始化的地图视图！

# java - What's the best way to parallelize calls in JSP?

> ID：15596585
> 
> 赞同：2
> 
> 时间：2013-03-24T08:36:49.303
> 
> 标签：java, jsp, concurrency, parallel-processing

My understanding of JSP is that each line in the java code is run step by step (in sequence). E.g. if I have a code below, `doSomething("apple")` will be executed first until it returns a value, then `doSomething("orange")` will be executed next until it returns a value, then finally `doSomething("pear")` will be executed until it returns a value and the whole page is displayed.

```
<table border="1">
    <thead>
        <tr>
            <th>Test</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>Column A</td>
            <td><%=javaBean.doSomething("apple")%></td>
        </tr>
        <tr>
            <td>Column B</td>
            <td><%=javaBean.doSomething("orange")%></td>
        </tr>
        <tr>
            <td>Column C</td>
            <td><%=javaBean.doSomething("pear")%></td>
        </tr>
    </tbody>
</table> 
```

What is the best way to make these calls parallel e.g. run `doSomething("apple") & doSomething("orange") & doSomething("pear")` concurrently? Thank you.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T09:03:58.447

`JSP`创建动态 html。因此，您实际上是将业务逻辑的结果从`javaBean`您的 html 表中。因为你不能让它并发，因为你需要将每个方法的结果放在行中。
您应该重构您的代码，以便计算您需要的所有内容（可能使用并发），然后检索结果以将它们放置在行中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T08:44:45.017

据我了解您的问题，您需要为您的方法创建三个任务（三个线程），无论它们的完成顺序如何，它们都将独立运行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-24T09:24:32.080

您不应该在 JSP 中执行此操作，它被设计为在单个线程中呈现。如果页面太慢，现在常用的方法是使用三个占位符的快速加载页面。然后用 AJAX 加载慢速部分。这些可以并发调用回服务器以加载其余部分。

# python - How to provide Django label_tag and as_widget arguments (e.g. contents and attrs)

> ID：15596589
> 
> 赞同：0
> 
> 时间：2013-03-24T08:37:16.023
> 
> 标签：python, django, python-2.7, django-templates, django-views

From django/forms/forms.py:

```
def label_tag(self, contents=None, attrs=None):
    ..

def as_widget(self, widget=None, attrs=None, only_initial=False):
    .. 
```

From my templates I call the label_tag as follows:

```
{{ form.my_field.label_tag }} 
```

which outputs the label.

How should I provide the arguments to those tag as in their definition? For example I want to provide an alternative label text and css classes.

I tried something like:

```
{{ form.my_field.label_tag contents='My alternative label' }} 
```

but it gives me:

```
Could not parse the remainder: ' contents='My alternative label'' from 'form.code.label_tag contents='My alternative label'' 
```

The same goes for the attrs field. Can I supply a value for that one from the template. I would like to provide the css class. For css class I'm using a filter at the moment but while going through the Django source code I noticed label_tag and as_widget has these additional arguments, and that's why I'm wondering now I can supply them from my templates.

(I'm using Django 1.4 on App Engine)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T13:27:52.447

Django 非常刻意地限制模板功能，以确保您最终不会像使用 PHP 那样在模板中编写整个网站。

来自[The Django Book 2.0: Templates: Philosophies and Limitations](http://www.djangobook.com/en/2.0/chapter04.html#philosophies-and-limitations)：

> ...在 Django 模板中直接调用 Python 代码是不可能的。所有的“编程”基本上都局限于模板标签可以做的范围内。

你*可以* [编写一个自定义模板标签或过滤器](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/)来做你想做的事……*但是*——因为这似乎是表单逻辑——你几乎肯定做其他事情会更好。

最简单的可能是定义表单定义的标签/小部件。IE：

```
from django import forms

class MyForm(forms.Form):
    my_field = forms.CharField(label='My label', widget=forms.Textarea) 
```

也就是说，对于小部件，还有[其他记录在案的方式](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/#overriding-the-default-field-types-or-widgets)。如果您使用[django-floppy-forms](http://django-floppyforms.readthedocs.org/)，您可以轻松覆盖用于呈现它们的整个模板。

最后，我强烈推荐[django-crispyforms](http://django-crispy-forms.readthedocs.org/)。它为您节省了大量时间，因为您不再有在模板中手写表单的痛苦。

# mysql - MySQL Partitioning. The partition function return wrong type

> ID：15596590
> 
> 赞同：0
> 
> 时间：2013-03-24T08:37:26.317
> 
> 标签：mysql, hash, partitioning

What is incorrect in the following query?

```
CREATE TABLE `tbl_user_geolocation` (
            `id` INT(11) NOT NULL AUTO_INCREMENT COMMENT 'Идентификатор',
            `user_id` VARCHAR(100) NOT NULL COMMENT 'ID пользователя',
            `client_type` VARCHAR(38) NULL DEFAULT NULL COMMENT 'Тип клиента',
            `lat` DECIMAL(28,8) NOT NULL COMMENT 'Широта',
            `lon` DECIMAL(28,8) NOT NULL COMMENT 'Долгота',
            `created_at` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'Дата создания',
            PRIMARY KEY (`id`, `user_id`)
        )
        PARTITION BY HASH(id+user_id) PARTITIONS 200; 
```

Error: The partition function returns the wrong type. 1491. This table using for save users geo-location data

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T08:52:29.803

您需要将整数传递给`HASH`函数。但在你的情况下`user_id`是 type `VARCHAR`。

> **[18.2.3\. 哈希分区](http://dev.mysql.com/doc/refman/5.1/en/partitioning-hash.html)**
> 
> 要使用 HASH 分区对表进行分区，必须在 CREATE TABLE 语句中附加一个 PARTITION BY HASH (expr) 子句，其中**expr 是一个返回整数的表达式**。

# java - for loop skip issue

> ID：15596594
> 
> 赞同：1
> 
> 时间：2013-03-24T08:38:00.257
> 
> 标签：java, arrays, for-loop, skip

I have this code, and everything is running as i want to except the face that it skips the first time it is supposed to wait for the next input by the user. Here is the code:

```
import java.util.Scanner;
public class mainThread {
    public static int size;
    public static int counter;
    public static Scanner input = new Scanner(System.in);
    public static String currentIn;
    public static void main(String[] args){
        System.out.println("Please type the desired amount of players: ");
        size = input.nextInt();
        String nameArray[] = new String[size];
        for(int counter = 0; counter < size; counter++){
            System.out.println("Please enter the name of player " + (counter+1));
            currentIn = input.nextLine();
            nameArray[counter] = currentIn;
            System.out.println(nameArray[counter]);
        }
    }
} 
```

Here is what the console says:

```
Please type the desired amount of players: 
3
Please enter the name of player 1

Please enter the name of player 2
Jacob
Jacob
Please enter the name of player 3 
```

It completely skips the first loop, and i can't seem to figure out why. Thanks for your time!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T08:42:30.530

`nextInt()` reads just the "3", but not the line break part. It's basically just reading up to the first token separator, but not consuming that. So if you typed in

```
3 Foo 
```

and *then* hit return, it would take " Foo" as the name of the first player.

It sounds like you probably want to use `nextLine()` when finding the number of players, too:

```
String playerCountText = input.readLine();
size = Integer.parseInt(playerCountText); // Or use a NumberFormat 
```

Personally I've always found `Scanner` to be a bit annoying like this - it sort of promises to make everything simple, but you really need to work out everything it's going to do...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T08:44:47.913

修改程序如下：

```
import java.util.Scanner;
public class mainThread {
    public static int size;
    public static int counter;
    public static Scanner input = new Scanner(System.in);
    public static String currentIn;
    public static void main(String[] args){
        System.out.println("Please type the desired amount of players: ");
        size = Integer.parseInt(input.nextLine().trim());
        String nameArray[] = new String[size];
        for(int counter = 0; counter < size; counter++){
            System.out.println("Please enter the name of player " + (counter+1));
            currentIn = input.nextLine();
            nameArray[counter] = currentIn;
            System.out.println(nameArray[counter]);
        }
    }
} 
```

问题是`\n`留在缓冲区中，这就是为什么`.nextLine()`被跳过了..

编辑，以下程序还完成了一些输入验证：

```
import java.util.Scanner;
public class mainThread {
    public static int size;
    public static int counter;
    public static Scanner input = new Scanner(System.in);
    public static String currentIn;
    public static void main(String[] args){
        boolean valid = false;
        System.out.println("Please type the desired amount of players: ");
        while(valid == false){
         try{
           size = Integer.parseInt(input.nextLine().trim());
           valid = true;
         }catch(Exception e){
            System.out.println("Error input, try again");
         }
        }
        String nameArray[] = new String[size];
        for(int counter = 0; counter < size; counter++){
            System.out.println("Please enter the name of player " + (counter+1));
            currentIn = input.nextLine();
            nameArray[counter] = currentIn;
            System.out.println(nameArray[counter]);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T08:46:27.937

我不确定问题是什么，但如果你更换线路

```
currentIn = input.nextLine(); 
```

和：

```
currentIn = input.next(); 
```

它会起作用的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-24T09:03:15.110

基本上事情是当您输入 3 然后按 enter 时，输入计为一个新行值，它留在缓冲区中，当您尝试在循环中读取新行时

currentIn = input.nextLine();

第一次将存储的新行作为输入。您可以通过添加 currentIn = input.nextLine(); 来避免这种情况 在 size = input.nextInt() 之后；

或从文件中读取输入。

# oauth - Retrieving Additional information from Microsoft.AspNet.Membership.OpenAuth

> ID：15596601
> 
> 赞同：1
> 
> 时间：2013-03-24T08:40:12.943
> 
> 标签：oauth, dotnetopenauth

Does anybody have resources to get the additional OAuth information {first name, last name, profile picture} from when using webforms from this template? [https://github.com/rustd/ASPNETTemplates](https://github.com/rustd/ASPNETTemplates)

I have searched for hours on trying to find examples and nothing has shown to work. I tried adding the extradata parameter but that errors

```
 //Dictionary<string, string> googleExtraData = new Dictionary<string, string>
        //    {
        //        {"email", WellKnownAttributes.Contact.Email},
        //        {"country", WellKnownAttributes.Contact.HomeAddress.Country},
        //        {"firstName", WellKnownAttributes.Name.First},
        //        {"lastName", WellKnownAttributes.Name.Last}
        //    };
        //googleExtraData.Add("Icon", "GoogleLogin.png");

        OpenAuth.AuthenticationClients.AddGoogle(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-18T08:24:56.060

我找到了这个信息。看来您必须构建自己的自定义类才能在此处获取附加信息：http: [//blogs.msdn.com/b/webdev/archive/2012/08/23/plugging-custom-oauth-openid-providers.aspx](http://blogs.msdn.com/b/webdev/archive/2012/08/23/plugging-custom-oauth-openid-providers.aspx)

# javascript - Jquery - How do I access the element that was clicked to run a function?

> ID：15596604
> 
> 赞同：0
> 
> 时间：2013-03-24T08:41:17.893
> 
> 标签：javascript, jquery, html, events

I am using jQuery . I have some code like below -

----HTML-----

```
<table> 
<tr>
<td class="cell" id="cell1" ></td>
<td class="cell" id="cell2"></td>
<td class="cell" id="cell3" ></td>

</tr>

<tr>
<td class="cell" id="cell4"></td>
<td class="cell" id="cell5"></td>
<td class="cell" id="cell6"></td>

</tr>

</table> 
```

* * *

---JS----

```
$(".cell").click(function() {

do_something();

}

function do_something(){

// I want to print the id of the cell that was clicked here . 

} 
```

How do I access the element that caused the function to be run ? For eg in the above code , I want to access the id of the cell that was clicked from inside the function do_Something()

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T08:44:02.280

```
$(".cell").click(function() {
    do_something(this); // this is the clicked element
});
function do_something(element){
    console.log(element.id); // open the console to see the result
} 
```

当然，直接调用它会更简单：

```
$(".cell").click(do_something);  
function do_something(){
    console.log(this.id); // open the console to see the result
} 
```

或者

```
$(".cell").click(function(){
    console.log(this.id); // open the console to see the result
}); 
```

# android - get all the days of the current week in arabic android

> ID：15596607
> 
> 赞同：0
> 
> 时间：2013-03-24T08:43:04.467
> 
> 标签：android, calendar, date-format

I'm using the following code to get the days of the current week

```
 DateFormat format = new SimpleDateFormat("EEEE yyyy/MM/dd");
    Calendar calendar = Calendar.getInstance();
    calendar.setFirstDayOfWeek(Calendar.MONDAY);
    calendar.set(Calendar.DAY_OF_WEEK, Calendar.MONDAY);

    String[] days = new String[7];
    for (int i = 0; i < 7; i++)
    {
        days[i] = format.format(calendar.getTime());
        calendar.add(Calendar.DAY_OF_MONTH, 1);
    }

    for (int i = 0; i < 7; i++)
    {
    System.out.println("days of week: "+days[i]);
    } 
```

it gives me the days and dates ok, but I want them in arabic, what is the code to do this?

Thanks in Advance.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T09:10:24.017

在 SimpleDateFormat 的构造函数中，您可以传入语言环境。新的 SimpleDateFormat（字符串模板，区域设置语言环境）；将其设置为任何一种以阿拉伯语为基础的语言都应该可以解决问题。

更新：正是：

```
//  Arabic available since 2.3
DateFormat format = new SimpleDateFormat("EEEE yyyy/MM/dd", new Locale("ar")); 
```

# python - How to create dictionary of dictionaries from python tuples

> ID：15596608
> 
> 赞同：-1
> 
> 时间：2013-03-24T08:43:10.040
> 
> 标签：python, data-structures, dictionary, tuples

I would like to create dictionary of the format in the example below.

```
c={
    'A':{('AB',2.9)},
    'B':{('AS',3.9)},
    'R':{('D',2.0)},
    'V':{('AD',2.9)},
    'G':{('AX',2.9)}
 } 
```

I have this tuples feed in a loop. Here is what I have tried but I get a wrong format from this.

```
my_tuple  = ('AB',2.9)
c         = {}
my_key    = 'A'
c.update({my_key:{my_tuple}}) 
```

For this specific case I would like to get `{'A': set([('AB', 2.9)])}`. I understand this is a proper dictionary but how can do it better and return value of `c` in a format?. I want i.e.:

```
{'A': {('AB', 2.9)}} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T08:54:23.393

`s = {1, 2, 3}`是一种较短的声明方式 `s = set([1,2,3])`

因此，你已经得到了你想要的，这只是一个代表问题。

```
>>> {('AB',2.9)} == set({('AB',2.9)})
True 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T08:59:43.180

如果表示对您来说很重要，您可以继承`set`并创建您自己的版本，`__repr__`这将使您可以自由地使用您的想象力来满足您:-)

```
>>> class funky_set(set):
    def __new__(cls,*args):
        return set.__new__(cls,args)
    def __repr__(self):
        return "{{{}}}".format(','.join(map(str, self)))

>>> my_tuple  = ('AB',2.9)
>>> c         = {}
>>> my_key    = 'A'
>>> c.update({my_key:funky_set(my_tuple)})
>>> c
{'A': {AB,2.9}} 
```

# php - Kohana：Ajax 请求错误

> ID：15596617
> 
> 赞同：0
> 
> 时间：2013-03-24T08:44:45.827
> 
> 标签：php, ajax, routing, kohana

我有这个代码在我的`bootstrap.php`

```
Route::set('get_locations','ajax/locations.json')
    ->defaults(array(
    'controller' => 'ajax',
    'action'     => 'locations',
  )); 
```

这是我的代码`Ajax.php`

```
public function locations(){
  echo json_encode(array("success" => true));
} 
```

当我进行如下所示的 ajax 调用时，我似乎无法使其工作

```
$(document).ready(function(){
  $.ajax({
    url: "ajax/locations.json",
    type: "GET",
    dataType: "json",
    success: function(result){
      if(result["success"]=='true'){
        alert('success');
      }
    }
  });
}); 
```

请求总是返回`404 Not Found`

任何帮助都可以。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T10:38:22.713

您的操作函数命名不正确。目前是：

```
public function locations(){ 
```

应该：

```
public function action_locations(){
//              ^^^^^^^ 
```

注意`action_`前缀。所有操作方法都需要它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T06:58:05.730

只需使用没有 . 在里面。将您的路线更改为：

```
Route::set('get_locations','ajax/locations') 
```

不带（json 扩展名）并在控制器名称前加上“action_”：

```
public function action_locations() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T01:20:07.713

我终于修好了！

我刚刚`.htaccess`在我的项目的根目录中添加了文件！

这解决了问题。

感谢所有的答案家伙。

# sql-server-2008 - 根据字段的值设置行号

> ID：15596621
> 
> 赞同：0
> 
> 时间：2013-03-24T08:45:15.807
> 
> 标签：sql-server-2008, tsql

我有一些查询返回类似这样的内容

```
 Column 1   | Column 2   | Column 3   | 
 somevalue  | somevalue  | somevalue  | 
```

我应该如何修改我的声明以获得这个？第 3 列来自 DB，第 4 列应基于第 3 列

```
 Column 1   | Column 2   | Column 3   | Column 4 | 
 somevalue  | somevalue  | 1          | 1        |
 somevalue  | somevalue  | 0          | NULL     |
 somevalue  | somevalue  | 0          | NULL     |
 somevalue  | somevalue  | 1          | 2        |
 somevalue  | somevalue  | 1          | 3        | 
```

所以这不仅仅是简单的 row_number() 或 rank()

询问

```
select SUBLVLNAME
,SPECGROUPNAME
,PRGNAME
,(REPLACE(SPECSUBGROUPCODE,'99999999','')) AS SPECSUBGROUPCODE
,SPECSUBGROUPNAME
,row_number() over( order by SPECSUBGROUPCODE) as ROW
,ADDACCR 
from
(
SELECT 
DISTINCT top 999999999
LOWER(EDU_SUBLEVELS.NAME) AS SUBLVLNAME
,SPECIALITY_GROUPS.NAME AS SPECGROUPNAME
,SPECIALITY_SUBGROUPS.NAME AS SPECSUBGROUPNAME
,case 
when EDU_SUBLEVELS.CODE not like 'Postgraduate' and EDU_SUBLEVELS.CODE not like 'void' then upper(substring(ACCREDITED_PROGRAMS.NAME,1,1)) + lower(substring(ACCREDITED_PROGRAMS.NAME,2, len(ACCREDITED_PROGRAMS.NAME)))
when EDU_SUBLEVELS.CODE like 'Postgraduate' then upper(substring(SPECIALITY_GROUPS.NAME,1,1)) + lower(substring(SPECIALITY_GROUPS.NAME,2, len(SPECIALITY_GROUPS.NAME)))
when EDU_SUBLEVELS.CODE like 'void' and SPECIALITY_SUBGROUPS.CODE is not null then upper(substring(SPECIALITY_GROUPS.NAME,1,1)) + lower(substring(SPECIALITY_GROUPS.NAME,2, len(SPECIALITY_GROUPS.NAME)))
end as PRGNAME
,ISNULL((case  
when EDU_SUBLEVELS.CODE =  'Postgraduate'  
then SPECIALITY_SUBGROUPS.CODE
when EDU_SUBLEVELS.CODE like 'void' and SPECIALITY_SUBGROUPS.CODE is not null then SPECIALITY_SUBGROUPS.CODE
end),'99999999') as SPECSUBGROUPCODE
,ACCREDITED_PROGRAMS.HAS_ADDITIONAL_ACCREDITED_PROGRAMS AS ADDACCR 

FROM ACCREDITED_PROGRAMS 
LEFT JOIN CERTIFICATE_SUPPLEMENTS ON ACCREDITED_PROGRAMS.CERTIFICATE_SUPPLEMENT_FK = CERTIFICATE_SUPPLEMENTS.ID 
LEFT JOIN SPECIALITY_SUBGROUPS ON ACCREDITED_PROGRAMS.SPECIALITY_SUBGROUP_FK = SPECIALITY_SUBGROUPS.ID 
LEFT JOIN SPECIALITY_GROUPS ON SPECIALITY_SUBGROUPS.SPECIALITY_GROUP_FK = SPECIALITY_GROUPS.ID 
LEFT JOIN EDU_SUBLEVELS ON SPECIALITY_GROUPS.EDU_SUB_LEVEL_FK = EDU_SUBLEVELS.ID 
LEFT JOIN EDU_LEVELS ON EDU_SUBLEVELS.EDU_LEVEL_FK = EDU_LEVELS.ID

WHERE     
CERTIFICATE_SUPPLEMENTS.ID = '2e1b2dec-ab81-4191-a423-97f3ac9c88e2' and EDU_LEVELS.CODE = 'PostHigh'

) as outq 
```

**UPD1：**

```
DECLARE @COLUMN3Count int
SELECT @COLUMN3Count = COUNT(HAS_ADDITIONAL_ACCREDITED_PROGRAMS) FROM ACCREDITED_PROGRAMS WHERE HAS_ADDITIONAL_ACCREDITED_PROGRAMS = 0

SELECT *,row,
       CASE WHEN ADDACCR = 0 THEN NULL 
       ELSE ROW_NUMBER() OVER (ORDER BY SPECGROUPCODE) - @COLUMN3Count
       END AS Footnote

FROM (SELECT DISTINCT top 99999999
dense_rank() OVER(ORDER BY SPECIALITY_GROUPS.CODE) AS ROW,
EDU_SUBLEVELS.ORDERING,
EDU_LEVELS.CODE, EDU_LEVELS.NAME AS EDU_LEVEL,
LOWER(EDU_LEVELS.NAME) AS EDU_LEVEL2,
EDU_SUBLEVELS.CODE  AS SUBLVLCODE,
EDU_SUBLEVELS.NAME AS SUBLVLNAME,
SPECIALITY_GROUPS.CODE AS SPECGROUPCODE,
UPPER(SUBSTRING(SPECIALITY_GROUPS.NAME,1,1)) + LOWER(SUBSTRING(SPECIALITY_GROUPS.NAME,2, LEN(SPECIALITY_GROUPS.NAME)))  AS SPECGROUPNAME,
CASE
when EDU_SUBLEVELS.CODE ='Magistracy' then 'магистр'
when EDU_SUBLEVELS.CODE ='Specialty' then 'специалист'
when EDU_SUBLEVELS.CODE ='Undergraduate' then 'бакалавр'
END AS QUALNAME,
case
when EDU_SUBLEVELS.NAME ='Специалитет' then 'подготовка специалиста'
when EDU_SUBLEVELS.NAME ='Магистратура' then lower(EDU_SUBLEVELS.NAME)
when EDU_SUBLEVELS.NAME ='Бакалавриат' then lower(EDU_SUBLEVELS.NAME)
END AS SUBLVLNAMEHEADER,
HAS_ADDITIONAL_ACCREDITED_PROGRAMS as ADDACCR

FROM ACCREDITED_PROGRAMS 
LEFT JOIN CERTIFICATE_SUPPLEMENTS ON ACCREDITED_PROGRAMS.CERTIFICATE_SUPPLEMENT_FK = CERTIFICATE_SUPPLEMENTS.ID 
LEFT JOIN SPECIALITY_SUBGROUPS ON ACCREDITED_PROGRAMS.SPECIALITY_SUBGROUP_FK = SPECIALITY_SUBGROUPS.ID 
LEFT JOIN SPECIALITY_GROUPS ON SPECIALITY_SUBGROUPS.SPECIALITY_GROUP_FK = SPECIALITY_GROUPS.ID 
LEFT JOIN EDU_SUBLEVELS ON SPECIALITY_GROUPS.EDU_SUB_LEVEL_FK = EDU_SUBLEVELS.ID 
LEFT JOIN EDU_LEVELS ON EDU_SUBLEVELS.EDU_LEVEL_FK = EDU_LEVELS.ID

WHERE     CERTIFICATE_SUPPLEMENTS.ID = 'eb22a2fb-929e-4b4f-9716-23d9e340cd4b'and EDU_LEVELS.CODE = 'High' and EDU_SUBLEVELS.CODE = 'Specialty'
) as tmp 
```

int 的输出

```
SPECGROUPCODE   ADDACCR row Footnote
010000          0         1 NULL
020000          0         2 NULL
030000          0         3 NULL
030000          1         3 -138858 
```

位输出

```
SPECGROUPCODE   ADDACCR row Footnote
010000          0       1   NULL
020000          0       2   NULL
030000          0       3   NULL
030000          1       3   3 
```

此外，正如您所看到的，该解决方案在第三行明显不同，我该如何避免这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T17:03:14.897

步骤 1\. 引入`PARTITION BY`您的`ROW_NUMBER`调用以分别枚举 1 和 0，即代替

```
ROW_NUMBER() OVER (ORDER BY ...) AS Column4 
```

利用

```
ROW_NUMBER() OVER (PARTITION BY Column3 ORDER BY ...) AS Column4 
```

Step 2\. 引入条件`CASE`显示结果`ROW_NUMBER`：

```
CASE Column3
  WHEN 1 THEN ROW_NUMBER() OVER (PARTITION BY Column3 ORDER BY ...)
END AS Column4 
```

如果省略`ELSE`了表达式的一部分，则表示隐含。因此，如果不是 1，则表达式将评估为 NULL。`CASE``ELSE NULL``Column3`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T09:14:44.920

考虑到您在问题中给出的示例，您可以执行以下操作：

```
DECLARE @COLUMN3Count INT
SELECT @COLUMN3Count = COUNT(COLUMN3) FROM TABLE1 WHERE COLUMN3 = 0

SELECT *,
       CASE WHEN COLUMN3 = 0 THEN NULL 
       ELSE ROW_NUMBER() OVER (ORDER BY COLUMN3) - @COLUMN3Count
       END AS COLUMN4
FROM yourTABLE 
```

[SQL 小提琴演示](http://www.sqlfiddle.com/#!3/7aa13/2)

# sql - 使用 OdbcConnection 在 INSERT INTO 中出现语法错误

> ID：15596630
> 
> 赞同：-1
> 
> 时间：2013-03-24T08:47:27.303
> 
> 标签：sql, ms-access

`4200 Syntax Error`当我为 MS Access 数据库执行此代码时，我得到：

```
protected void Button1_Click(object sender, EventArgs e)
    {
        using (OdbcConnection conn = new OdbcConnection(@"Dsn=ani;dbq=D:\anita\inventory\chemicals.accdb;defaultdir=D:\anita\inventory;driverid=25;fil=MS Access;maxbuffersize=2048;pagetimeout=5;uid=admin"))
        {
          conn.Open();
          string CommandText = "INSERT INTO SupplierDetails (ID, Supplier, Company, Address, State, Country, Pincode, PhoneNo, MobileNo, Email, Fax, RawMaterials, Note) VALUES (@ID, @Supplier, @Company, @Address, @State, @Country, @Pincode, @PhoneNo, @MobileNo, @Email, @Fax, @RawMaterials, @Note)";

            using (OdbcCommand cmd = new OdbcCommand(CommandText, conn))
            {
                cmd.Parameters.AddWithValue("@ID", TextBox3.Text);
                cmd.Parameters.AddWithValue("@Supplier", TextBox4.Text);
                cmd.Parameters.AddWithValue("@Company", TextBox1.Text);
                cmd.Parameters.AddWithValue("@Address", TextBox11.Text);
                cmd.Parameters.AddWithValue("@State", TextBox2.Text);
                cmd.Parameters.AddWithValue("@Country", TextBox5.Text);
                cmd.Parameters.AddWithValue("@Pincode", TextBox10.Text);
                cmd.Parameters.AddWithValue("@PhoneNo", TextBox6.Text);
                cmd.Parameters.AddWithValue("@MobileNo", TextBox7.Text);
                cmd.Parameters.AddWithValue("@Email", TextBox8.Text);
                cmd.Parameters.AddWithValue("@Fax", TextBox9.Text);
                cmd.Parameters.AddWithValue("@RawMaterials", TextBox12.Text);
                cmd.Parameters.AddWithValue("@Note", TextBox13.Text);
                cmd.ExecuteNonQuery();
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-24T09:02:24.677

命名的字段与JET 4.0中的[保留关键字](http://support.microsoft.com/kb/321266)`NOTE`具有相同的名称。 用方括号封装它

```
string CommandText = "INSERT INTO SupplierDetails (ID, Supplier, Company, Address, " + 
                     "State, Country, Pincode, PhoneNo, MobileNo, Email, Fax, " + 
                     "RawMaterials, [Note]) VALUES (@ID, @Supplier, @Company, @Address, " + 
                     "@State, @Country, @Pincode, @PhoneNo, @MobileNo, @Email, " + 
                     "@Fax, @RawMaterials, @Note)"; 
```

**编辑**我看到您使用的是`OdbcConnection`，这将要求您的参数占位符将使用问号提供，而不是带有 @ 前缀的字符串。所以你的 CommandText 应该是：

```
string CommandText = "INSERT INTO SupplierDetails (Supplier, Company, Address, " + 
                     "State, Country, Pincode, PhoneNo, MobileNo, Email, Fax, " + 
                     "RawMaterials, [Note]) VALUES (?,?,?,?,?,?,?,?,?,?,?,?)"; 
```

请注意我是如何删除 ID 字段及其参数占位符的，因为您说它是一个 AutoIncrement 字段，因此您不能为此传递您自己的值。还要记住，在这种情况下，参数是通过它们在参数集合中的位置来识别的。因此，以 commandText 期望的正确顺序添加它们非常重要。

# iphone - UIView 上的圆角

> ID：15596631
> 
> 赞同：9
> 
> 时间：2013-03-24T08:47:36.370
> 
> 标签：iphone, ios, objective-c, uiview

我对如何绕过角落感到困惑，我看过大约**10 个其他帖子**，但没有一个对我有帮助。我这样做正确吗？

```
#import "QuartzCore/QuartzCore.h" // in my ViewController.h

- (void)viewDidLoad
{
[super viewDidLoad];

     self.backgroundLayer.cornerRadius = 10.0f;
} 
```

如果有人可以帮助我解决这个问题，将不胜感激。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-24T09:29:19.143

尝试开启`masksToBounds`。另外，什么是背景层？

```
- (void)viewDidLoad {
    [super viewDidLoad];

    self.view.layer.cornerRadius = 10.0f;
    self.view.layer.masksToBounds = YES;
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-24T09:02:07.740

是的，您是正确的，但是设置`self.backgroundLayer.layer.borderWidth`，我输入以下代码可能对您的情况有所帮助。

为给**圆形边框**。`UIView`

添加`#import "QuartzCore/QuartzCore.h"`框架工作。（*你已经完成了*）

```
self.backgroundLayer = [UIView alloc] initWithFrame:CGRectMake(@"As You Want")];
self.backgroundLayer.backgroundColor = [UIColor redColor];
self.backgroundLayer.layer.cornerRadius = 10.0; // set cornerRadius as you want.
self.backgroundLayer.layer.borderColor = [UIColor lightGrayColor].CGColor; // set color as you want.
self.backgroundLayer.layer.borderWidth = 1.0; // set borderWidth as you want.
[self.view addSubView:self.backgroundLayer]; 
```

在你的情况下给**边界**。`UIView`

# javascript - 为什么我的 .ogg 文件只能在本地播放？

> ID：15596633
> 
> 赞同：1
> 
> 时间：2013-03-24T08:47:48.063
> 
> 标签：javascript, google-chrome, audio, dynamic, ogg

我正在编写一个 Chrome Web 应用程序，在其中我通过 Javascript 动态创建 <audio> 标记。Javascript 正在从对象文字中提取名称。当我通过 Chrome 在本地运行文件时，它工作得很好。一旦我将它们加载到服务器上，它们就会停止工作。动态图像工作正常，所以我很好奇为什么音频没有。什么可能是错的？这是我的javascript代码：

```
var IG = {
  0: { 'sound': 'chair.ogg', 'link': 'images/chair.png', 'name': 'Chair'}
};

var audio1 = '<audio controls><source src="audio"';
var audio2 = '" type="audio/ogg">Your browser does not support the audio element.       Please upgrade your browser.</audio>';

document.getElementById('quiz').innerHTML += audio1 + IG[order].sound + audio2; 
```

更新：如果我直接播放声音文件，它工作正常。例如：www.site.com/audio/chair.ogg。我也尝试过使用具有相同结果的 mp3 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T18:34:22.600

我找到了解决方案。我只是在需要放 / 的地方放了一个 "

```
src="audio"'; 
```

需要是：

```
src="audio/'; 
```

# php - 密码库致命错误

> ID：15596635
> 
> 赞同：1
> 
> 时间：2013-03-24T08:48:09.233
> 
> 标签：php, phar

我正在使用[PasswordLib](https://github.com/ircmaxell/PHP-PasswordLib/blob/master/lib/PasswordLib/PasswordLib.php)。我在 wamp 上运行我的项目，一切正常，但是当我将它上传到我的主机时，我收到了这个错误：

> 致命错误：未捕获的异常 'PharException' 带有消息 '__HALT_COMPILER(); 必须在 /data/web/virtuals/9784/virtual/www/subdom/roids/_libs/PasswordLib.phar:21 的 phar' 中声明 堆栈跟踪：#0 /data/web/virtuals/9784/virtual/www/ subdom/roids/_libs/PasswordLib.phar(21): Phar::mapPhar('PasswordLib.pha...') #1 /data/web/virtuals/9784/virtual/www/subdom/roids/index.php( 7): require_once('/data/web/virtu...') #2 {main} 在第 21 行的 /data/web/virtuals/9784/virtual/www/subdom/roids/_libs/PasswordLib.phar 中抛出
> 
> 致命错误：未捕获的异常 'PharException' 带有消息 'phar "/data/web/virtuals/9784/virtual/www/subdom/roids/_libs/PasswordLib.phar" SHA1 签名无法验证：/data/ 中的签名损坏web/virtuals/9784/virtual/www/subdom/roids/_libs/PasswordLib.phar:21 堆栈跟踪：#0 /data/web/virtuals/9784/virtual/www/subdom/roids/_libs/PasswordLib.phar(21 ): Phar::mapPhar('PasswordLib.pha...') #1 /data/web/virtuals/9784/virtual/www/subdom/roids/index.php(7): require_once('/data/web/ virtu...') #2 {main} 在第 21 行抛出 /data/web/virtuals/9784/virtual/www/subdom/roids/_libs/PasswordLib.phar

你有什么想法可能是什么问题？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T09:08:10.057

[__halt_complier()](http://php.net/manual/en/function.halt-compiler.php)需要 PHP 5.1.0 或更高版本，您的主机是否使用旧版本？

您可以调用[phpinfo()](http://uk.php.net/manual/en/function.phpinfo.php%20phpinfo%28%29)来找出您正在运行的版本。

# java - Java、Eclipse、Ant：如何创建自定义类生成器对话框

> ID：15596637
> 
> 赞同：0
> 
> 时间：2013-03-24T08:48:30.240
> 
> 标签：java, eclipse, class, ant

我想创建自定义对话框以在 Eclipse 中创建类。

我希望此对话框具有用于方法名称的名称字段和用于方法参数的参数字段。对于已知类型，使用 Eclipse 自动完成选项。

然后我将创建一个包，在这个包中我将创建一个类，该类根据给定的参数实现接口。

我从哪说起呢？有什么教程可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T11:46:11.943

The best will be to create Eclipse plugin so the first thing you should do is to read something about Eclipse RPC. [This](http://www.vogella.com/articles/EclipseRCP/article.html) tutorial should help you to start with it.

# android - Facebook 时间线 android 使用滚动视图还是列表视图？

> ID：15596644
> 
> 赞同：1
> 
> 时间：2013-03-24T08:49:47.697
> 
> 标签：android, facebook, listview, scrollview, facebook-timeline

我正在开发一个像 facebook 时间轴这样的小型应用程序，但我不知道它使用 srollview 或 listview。你能告诉我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T09:03:32.277

最有可能使用 ListView，它被实现来处理同质项目的 ScrollView，包括所有视图重用和重绘。使用 ScrollView 执行此操作需要您从头开始处理。

# node.js - 如何在 express/jade 中将非 ASCII 字符编码为 \uXXXX 序列

> ID：15596648
> 
> 赞同：3
> 
> 时间：2013-03-24T08:50:59.677
> 
> 标签：node.js, unicode, express, escaping, pug

我有以下快速路线：

```
var data = [
    {
        id: 1,
        title: 'aide-memoire'
    },
    {
        id:2,
        title: 'apres moi'
    }
];

app.get('/', function (req, res) {
    res.render('photo/list', {
        data: data
    });
}); 
```

在我的 JADE 模板中，我得到如下数据：

```
!!!5
html
    head
    body
        script
            var data = !{JSON.stringify(calculates)}; 
```

但是我在这样的客户端上获得了该数据数组：

```
<!DOCTYPE html>
<html>
    <head></head>
    <body>
        <script type="text/javascript">
        var data = [
            { "id":1, "title": 'aide-memoire'},
            { "id":2, "title": 'apres moi'}
        ];
        </script>
    </body>
</html> 
```

但我需要将非 ASCII 字符编码为 \uXXXX 序列，如下所示：

```
[
    {"id":1, "title": "aide-m%E9moire"},
    {"id":2, "title": "apr%E8s%20moi"}  
] 
```

我怎样才能在快递/玉中做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-24T17:53:03.780

```
JSON.stringify(["ä", "ä"]).replace(/[\u0080-\uFFFF]/g, function(m) {
    return "\\u" + ("0000" + m.charCodeAt(0).toString(16)).slice(-4);
});
//["\u00e4","\u00e4"] 
```

* * *

```
JSON.stringify([{title: "ä"}, {title: "ä"}]).replace(/[\u0080-\uFFFF]/g, function(m) {
    return "\\u" + ("0000" + m.charCodeAt(0).toString(16)).slice(-4);
});
//[{"title":"\u00e4"},{"title":"\u00e4"}] 
```

* * *

尽管这完全没用，而且它消耗 CPU 以提供更大的响应：/ 请记住，node.js 中使用的每个 CPU 周期都是一个 CPU 周期，除非您进行集群，否则整个服务器都已关闭。

# mysql - 在使用存储过程插入mysql期间将两列相乘并将结果放入第三列

> ID：15596655
> 
> 赞同：2
> 
> 时间：2013-03-24T08:52:08.760
> 
> 标签：mysql, database, stored-procedures, insert

我想做这样的事情：

```
Quantity   Price    Payment
1           12      12.00 
```

这是我的代码：

```
CREATE DEFINER=`root`@`localhost` 
PROCEDURE `insertproducts`
(
    pname varchar(50), 
    pdesc varchar(50),
    psupp varchar(50),
    pdate date,
    pquant int,
    pprice double
)
begin
insert into products
(
    prodname,
    proddescription,
    prodsupplier,
    proddate,
    prodquantity,
    prodprice,
    prodpayment
) 
values 
(
    pname,
    pdesc,
    psupp,
    pdate,
    pquant,
    pprice,
    ppayment
) 
set prodpayment = pprice * prodquantity;
end 
```

这不起作用，有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T08:58:57.423

什么是`ppayment`？可以直接将参数相乘，

```
insert into products
(
    prodname, 
    proddescription, 
    prodsupplier, 
    proddate, 
    prodquantity, 
    prodprice, 
    prodpayment
) 
values 
(
    pname, 
    pdesc, 
    psupp, 
    pdate, 
    pquant, 
    pprice, 
    pprice*prodquantity
) 
```

# html - 为什么 HTML 注释缩进在浏览器中显示不同？

> ID：15596656
> 
> 赞同：0
> 
> 时间：2013-03-24T08:52:12.650
> 
> 标签：html, css, google-chrome, comments, notepad++

我试图美化我的html，以便每当有人点击`view source`我的页面时都能看到它。所以，我决定在我的 html 上写下我的名字作为评论。但是，Google Chrome 上显示的`view source`内容与我在 Notepad++ 中看到的不同。就像图片中一样：

![在此处输入图像描述](../Images/4c1f514a78de2415f15b63120a544eec.png)

*   left = 谷歌浏览器在查看源代码模式。

*   对=记事本++

为什么我没有得到我在 notepad++ 中输入的内容？是因为 Notepad++ 使用了与 Google Chrome 不同的字体吗？如果是，Google Chrome 中使用的字体是什么？

**我怎样才能在谷歌浏览器的视图源上很好地显示我想要的内容？**

*PS我还没有在其他浏览器上尝试过。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T08:58:18.413

我看到的问题是自动换行。如果您的文本行太长，它将被换行到下一行。我怀疑是否有解决方案，除了使消息更短并希望用户窗口比消息更宽。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T09:00:42.317

在您想要的任何地方都很难（我会说不可能）这样做。我的意思是，这种视觉外观的目的是在平台上修饰您的代码；无论是否使用字符间距、换行甚至换行，它都因编辑器而异。问候。

# javascript - 如何使用 Javascript 区分 HTML 中的内容标签和格式化标签

> ID：15596667
> 
> 赞同：-1
> 
> 时间：2013-03-24T08:53:35.080
> 
> 标签：javascript, html

是否有一种通用的方法来区分格式化标签（如 B、BR、P 等）和包含标签（如 DIV、SPAN 等）的文本。使用 Javascript。即使格式化标签中包含内容（例如 B 或 P 标签中包含内容），该方法也应该有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T09:02:36.410

通过标记名选择元素可以通过使用`document.getElementsByTagName`或来实现`document.querySelectorAll`。后者可能适合您的需求，例如

```
var nontxt = document.querySelectorAll('b, i, em, hr, br'); 
```

如果您需要文档中的所有空元素，请尝试使用此 (css3) 选择器

```
var nontxt = document.querySelectorAll(':empty'); 
```

# apache2 - 使用码头 8 的 apache 2.2 子域 proxypass 配置

> ID：15596669
> 
> 赞同：0
> 
> 时间：2013-03-24T08:54:04.440
> 
> 标签：apache2, jetty, subdomain, mod-proxy, jetty-8

我正在尝试将子域 xxx.yyy.de 代理传递到 yyy.de:8080/app 上的码头 webapp。首先，我遵循了文档[http://wiki.eclipse.org/Jetty/Howto/Configure_mod_proxy](http://wiki.eclipse.org/Jetty/Howto/Configure_mod_proxy)，我猜这很简单。所以我的虚拟主机配置如下所示：

```
<VirtualHost *:80>
ServerName xxx.yyy.de

ProxyRequests Off
ProxyPreserveHost On

<Proxy *>
  Order deny,allow
  Allow from all
</Proxy>

ProxyPass / http://yyy:8080/app/
</VirtualHost> 
```

这样做会导致 302 从 apache 转发到：xxx.yyy.de/app/ 而不是 yyy.de:8080/app/

我尝试了几种不同的组合，但都没有让我工作，所以我想知道我在这里做错了什么以及如何做对？

我想一些重写可以解决这个问题，但这对我来说似乎是错误的方式，因为根据 apache/jetty 文档它应该更简单。

最好的问候， 斯文

**编辑** 好吧，看来问题是我在码头上运行了一个 grails 应用程序。但是我通过使用具有虚拟主机功能的tomcat解决了它。然后我的配置按预期工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T03:40:40.693

它在我的 Ubuntu 12.10 笔记本电脑上运行良好，这就是我所做的：

1.  创建 /etc/apache2/av​​ailable-sites/jetty
2.  sudo a2enmod proxy_http
3.  须藤a2ensite码头
4.  sudo 服务 apache2 重启

Apache 虚拟主机配置文件：

```
 <VirtualHost *:80>
        ServerAdmin webmaster@localhost
        ServerName jetty.valkiria
        ProxyRequests Off
        <Proxy *:80>
          Order deny,allow
          Allow from all
        </Proxy>
        ProxyPass / http://valkiria:8080/
        ProxyPreserveHost On
     <VirtualHost *:80> 
```

# git - 从 Bitbucket (git) 上的远程恢复已删除的分支

> ID：15596670
> 
> 赞同：20
> 
> 时间：2013-03-24T08:54:09.940
> 
> 标签：git, bitbucket

我想恢复从 Bitbucket 上的远程共享存储库中删除的分支。我知道这`reflog`是使用本地存储库的方式。

我将如何在远程实现这一目标？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2017-05-04T21:28:53.623

四年后...

我遇到了这个答案，因为我通过 bitbucket.org UI 删除了团队成员想要恢复的分支。

我发现它`git branch --remote`显示了原点上的所有分支，甚至是那些通过 UI 删除的分支。

我用 本地检查了 origin 分支`git checkout origin/<branch_name> -b <branch_name>`，然后做了`git push -u origin <branch_name>`，它再次出现在 UI 中。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-24T11:10:45.173

`reflog` is still the answer, except you don't have access to the `reflog` on the remote (Bitbucket ) side.

That means you need to write to Bitbucket support in order for them to restore what you need.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-08-10T08:47:35.597

是的，这种方法完全有效。但我建议先检查此命令，然后再继续执行其他两个恢复分支：

```
git branch --remote 
```

如果您的分支显示在上述命令输出的列表中，请自信地执行以下操作：

```
git checkout origin/<branch_name> -b <branch_name>
git push -u origin <branch_name> 
```

# url - url中的codeigniter允许的字符

> ID：15596675
> 
> 赞同：0
> 
> 时间：2013-03-24T08:54:25.737
> 
> 标签：url, codeigniter-2

使用 codeigniter 我在后端传递变量时遇到问题，例如

```
http://localhost:4949/admin/delete_post/6/?action=delete 
```

生产`The URI you submitted has disallowed characters.`

我知道这个问题可以从 config.php 得到纠正`$config['permitted_uri_chars']`，但我怎么能排除过滤我的后端并允许这种结构并保持前端完好无损。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T09:07:18.730

This kind of formatting is not necessary in Codeigniter. Although query strings can be enabled, using them in my opinion goes against codeigniters way of handeling things. As you can pass variables from your views via uri.

```
http://yourdomain_baseurl/controller/controller_function/var1/var2/var3 
```

I suggest doing the following:

Send variables in an url like this:

```
http://yourdomain_baseurl/admin/post_action/id/action 
```

in your 'admin' controller, you can create something like this:

```
function post_action($id, $action){

    switch ($action) {
        case "delete":
            //do something here with your post with id $id
            break;
        case "update":
            //do something here with your post with id $id
            break;
        case "create":
            //do something here with your post with id $id
            break;
    }

} 
```

Or if you like to create a seperate function for each Post action:

```
http://yourdomain_baseurl/admin/post_delete/id
http://yourdomain_baseurl/admin/post_edit/id 
```

With the following functions in your admin controller

```
function post_delete($id){
    //Delete Archive the post with $id here!
}

function post_edit($id){
    //edit the post with $id here!
} 
```

As most user input comes from forms, you can use $_POST data get user input. There is a usefull class to help you out:

```
 $this->input->post('some_data'); 
```

I suggest reading the documentation that comes with codeigniter and read the following:

URL's [http://ellislab.com/codeigniter/user-guide/general/urls.html](http://ellislab.com/codeigniter/user-guide/general/urls.html)

URls [http://ellislab.com/codeigniter/user-guide/general/routing.html](http://ellislab.com/codeigniter/user-guide/general/routing.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T01:24:47.907

像这样与与号 (&) 一起使用

```
$config['permitted_uri_chars'] = 'a-z 0-9~%.:_+&-'; 
```

它可能会解决您的问题。

详细解释在[这里](https://stackoverflow.com/questions/1021609/percent-symbol-in-codeigniter-uri)

# magento - 带有配置的magento捆绑产品

> ID：15596676
> 
> 赞同：1
> 
> 时间：2013-03-24T08:55:14.707
> 
> 标签：magento, configurable-product

我有一家在 magento 下经营的服装店。我创建了几个可配置的项目，允许用户选择他们需要的项目的大小和颜色。

如何在 magento 中创建一组可配置项目，用户可以在其中为每个项目选择大小和颜色？

例如说我有 4 种尺寸和 4 种颜色的 3 件衬衫（总共 16 个选项 * 3）我如何从这 3 个可配置项目中创建一个捆绑包？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T09:02:39.430

您不能在当前的 Magento CE 中捆绑可配置产品。捆绑包中的每个简单产品都会获得捆绑包选项值。您想要的是一个选项层次结构，这在核心发行版中目前是不可能的。为此，您需要第三方扩展。

此[扩展程序](http://ecommerce.brimllc.com/grouped-options.html)可以对分组产品执行此操作。Classy Llama Studios 的捆绑产品还有一个扩展名为 Configurable Bundle Module，但它已经死了。

# r - 在 R 中跨多行的固定宽度文件中读取观察结果

> ID：15596679
> 
> 赞同：4
> 
> 时间：2013-03-24T08:57:28.973
> 
> 标签：r, read.table

我正在尝试读取 R 中的 dat 文件。数据可[在此处](http://www.amstat.org/publications/jse/datasets/93cars.dat.txt)获得。

有关数据集的规范可[在此处](http://www.amstat.org/publications/jse/datasets/93cars.txt)获得。

我的问题的第一部分是通过使用该`sep`选项并提供有关每列开始位置的信息并提供`na.strings="*"`. 但是，我不知道如何处理跨越超过 1 行的单个观察。

在这个数据集中，所有的观察跨越 2 行。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-24T12:37:07.120

你实际上需要`read.fwf`这个。

设置一些示例数据

```
 txt <- 'Acura         Integra        Small   12.9 15.9 18.8 25 31 0 1 4 1.8 140 6300
2890 1 13.2 5 177 102 68 37 26.5 11 2705 0
Acura         Legend         Midsize 29.2 33.9 38.7 18 25 2 1 6 3.2 200 5500
2335 1 18.0 5 195 115 71 38 30.0 15 3560 0
Audi          90             Compact 25.9 29.1 32.3 20 26 1 1 6 2.8 172 5500
2280 1 16.9 5 180 102 67 37 28.0 14 3375 0' 
```

使用 read.fwf 阅读 - 注意`widths`参数。`widths`应该是 2 个整数向量的列表，指定多行的元素宽度

```
DF <- read.fwf(textConnection(txt), 
               widths = list(
                 c(14, 15, 8, 5, 5, 5, 3, 3, 2, 2, 2, 4, 4, 4), 
                 c(5, 2, 5, 2, 4, 4, 3, 3, 5, 3, 5, 1)
               ), 
               header = FALSE) 
```

使用`pander`包来漂亮地打印表格，因为它有很多列。

```
require(pander)
pandoc.table(DF)
## 
## ---------------------------------------------------
##  V1     V2      V3     V4   V5   V6   V7   V8   V9 
## ----- ------- ------- ---- ---- ---- ---- ---- ----
## Acura Integra  Small  12.9 15.9 18.8  25   31   0  
## 
## Acura Legend  Midsize 29.2 33.9 38.7  18   25   2  
## 
## Audi    90    Compact 25.9 29.1 32.3  20   26   1  
## ---------------------------------------------------
## 
## Table: Table continues below
## 
##  
## -----------------------------------------------
##  V10   V11   V12   V13   V14   V15   V16   V17 
## ----- ----- ----- ----- ----- ----- ----- -----
##   1     4    1.8   140  6300  2890    1   13.2 
## 
##   1     6    3.2   200  5500  2335    1   18.0 
## 
##   1     6    2.8   172  5500  2280    1   16.9 
## -----------------------------------------------
## 
## Table: Table continues below
## 
##  
## -----------------------------------------------
##  V18   V19   V20   V21   V22   V23   V24   V25 
## ----- ----- ----- ----- ----- ----- ----- -----
##   5    177   102   68    37   26.5   11   2705 
## 
##   5    195   115   71    38   30.0   15   3560 
## 
##   5    180   102   67    37   28.0   14   3375 
## -----------------------------------------------
## 
## Table: Table continues below
## 
##  
## -----
##  V26 
## -----
##   0  
## 
##   0  
## 
##   0  
## -----
## 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-24T09:19:41.317

这是一个解决方法：

```
link <- "http://www.amstat.org/publications/jse/datasets/93cars.dat.txt" 
```

阅读原始行：

```
rawlines <- readLines(file(link)) 
```

转换为一个文本字符串：

```
lines <- paste(rawlines[c(TRUE, FALSE)], rawlines[c(FALSE, TRUE)], collapse = "\n") 
```

该函数`paste`用于组合多个字符串。`rawlines[c(TRUE, FALSE)]`代表奇数行，`rawlines[c(FALSE, TRUE)]`代表偶数行。（有关如何使用布尔值选择偶数和奇数元素的详细信息，请参阅[此答案](https://stackoverflow.com/questions/13461829/r-how-to-list-every-other-element/13462110#13462110)。）两条小线合并为一条长线。然后，将所有长行组合成一个带有参数的字符串`collapse = "\n"`。这些行由换行符 ( `\n`) 分隔。

阅读新文本`read.table`：

```
dat <- read.table(text = lines, na.string = "*") 
```

结果：

```
> head(dat)
     V1      V2      V3   V4   V5   V6 V7 V8 V9 V10 V11 V12 V13  V14  V15 V16  V17
1 Acura Integra   Small 12.9 15.9 18.8 25 31  0   1   4 1.8 140 6300 2890   1 13.2
2 Acura  Legend Midsize 29.2 33.9 38.7 18 25  2   1   6 3.2 200 5500 2335   1 18.0
3  Audi      90 Compact 25.9 29.1 32.3 20 26  1   1   6 2.8 172 5500 2280   1 16.9
4  Audi     100 Midsize 30.8 37.7 44.6 19 26  2   1   6 2.8 172 5500 2535   1 21.1
5   BMW    535i Midsize 23.7 30.0 36.2 22 30  1   0   4 3.5 208 5700 2545   1 21.1
6 Buick Century Midsize 14.2 15.7 17.3 22 31  1   1   4 2.2 110 5200 2565   0 16.4
  V18 V19 V20 V21 V22  V23 V24  V25 V26
1   5 177 102  68  37 26.5  11 2705   0
2   5 195 115  71  38 30.0  15 3560   0
3   5 180 102  67  37 28.0  14 3375   0
4   6 193 106  70  37 31.0  17 3405   0
5   4 186 109  69  39 27.0  13 3640   0
6   6 189 105  69  41 28.0  16 2880   1 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-24T09:11:02.990

您可以使用选项`fill=TRUE`

```
dat <- read.table('93cars.dat.txt',fill=TRUE)
               V1             V2      V3   V4    V5    V6 V7 V8   V9 V10  V11 V12 V13  V14
1           Acura        Integra   Small 12.9  15.9  18.8 25 31    0   1    4 1.8 140 6300
2            2890              1    13.2  5.0 177.0 102.0 68 37 26.5  11 2705 0.0  NA   NA
3           Acura         Legend Midsize 29.2  33.9  38.7 18 25    2   1    6 3.2 200 5500
4            2335              1    18.0  5.0 195.0 115.0 71 38 30.0  15 3560 0.0  NA   NA
5            Audi             90 Compact 25.9  29.1  32.3 20 26    1   1    6 2.8 172 5500 
```

然后，如果您想在单独的 data.frame 中获取每一行；我的意思是在一个 data.frame 中的 line1,line3,.. 和另一个 data.frame 中的 line2,line4,.. 你可以这样做：

```
dat.even <- dat[c(FALSE,TRUE),]
dat.odd  <- dat[c(TRUE,FALSE),] 
```

# java - 为本地车牌本地化 JavaAnpr

> ID：15596684
> 
> 赞同：21
> 
> 时间：2013-03-24T08:58:02.873
> 
> 标签：java, anpr

我正在使用[JavaAnpr](http://javaanpr.sourceforge.net/)来自动识别车牌。虽然它适用于欧洲车牌，但不适用于我的国家。例如;

![我国家的车牌](../Images/3722a3b8d00c0f5dbd4795007deb38c9.png)

我如何编辑资源文件和语法 XML 以支持其他国家/地区？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-09-08T22:50:41.733

@michel_layyous - 这是作者的文档。阅读第 57 页：http: [//javaanpr.sourceforge.net/anpr.pdf](http://javaanpr.sourceforge.net/anpr.pdf)

syntax.xml 本质上是一个正则表达式文件。

以此页面为例： [https ://code.google.com/p/android-anpr/source/browse/trunk/res/raw/syntax.xml?r=21](https://code.google.com/p/android-anpr/source/browse/trunk/res/raw/syntax.xml?r=21)

```
<type name="russia">
   <char content="abcehkmoptxy"/>
   <char content="0123456789"/>
   <char content="0123456789"/>
   <char content="0123456789"/>
   <char content="abcehkmoptxy"/>  
   <char content="abcehkmoptxy"/>
   <char content="0123456789"/>
   <char content="0123456789"/>
</type> 
```

这个俄罗斯车牌图案是 8 个字符。第一个字符可以是这些字母中的任何一个。接下来的 3 个字符可以是它们各自集合中的任意数字。接下来的 2 个字符可以是它们各自集合中的任何字母，最后 2 个字符可以是它们各自集合中的任何字母。

下一个俄罗斯车牌就像第一个俄罗斯车牌，除了一个关键区别：

```
<type name="russia2">
   <char content="abcehkmoptxy"/>
   <char content="0123456789"/>
   <char content="0123456789"/>
   <char content="0123456789"/>
   <char content="abcehkmoptxy"/>  
   <char content="abcehkmoptxy"/>
   <char content="012"/>
   <char content="0123456789"/>
   <char content="0123456789"/>
</type> 
```

第 6 个字符只能是 0、1 或 2。

我还在此页面上找到了相关的宣传： [http ://www.mp3car.com/software-and-software-development/124529-automatic-number-plate-recognition-anpr-3.html](http://www.mp3car.com/software-and-software-development/124529-automatic-number-plate-recognition-anpr-3.html)

我为您的国家找到了一个非常相似的车牌，但是它由两行组成。前两个数字在顶行，底行有 5 个数字。看起来您所在的国家/地区有 7 位数的特定样式的盘子。我不知道点是如何识别您的盘子的，但是，作者文档的第 58 页指出：

> 更正车牌意味着将每个无效字符替换为另一个。如果板 P 的第 i 个位置的字符 ( ) i p 与所选模式 ( ) ` sel P 不匹配，它将被 ( ) s y 中的第一个有效字符替换。( ) s y 是输出活动的排序向量，表示识别的字符与字母表中单个字符的相似程度。分段车牌的启发式分析有时会错误地将非字符元素评估为字符。接受非字符元素会导致识别的车牌包含冗余字符。冗余字符通常出现在印版的两侧，但很少出现在中间。如果识别的车牌号比最长的语法模式长，

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-16T17:14:39.087

查看 OpenALPR ( [http://www.openalpr.com](http://www.openalpr.com) )。它在各个国家/地区都有更好的支持。该库是用 C++（而不是 Java）编写的，但使用 JNI 应该很容易连接。

# php - 如何更改已使用 php 包含的下拉菜单项的类

> ID：15596686
> 
> 赞同：1
> 
> 时间：2013-03-24T08:58:39.967
> 
> 标签：php, html, html-lists

我已使用 php 包含函数将标题和导航附加到我的网页。导航有一个“活动”类来指示用户当前正在查看的页面。

我成功地使用以下代码为常规列表项实现了这一点。

```
<li <?php if (strpos($_SERVER['PHP_SELF'], 'index.php')) echo 'class="active"'; ?>><a href="index.php">Home</a></li> 
```

但是，我无法弄清楚如何为下拉列表项中的页面实现这一点。

```
<li class="dropdown">
    <a class="dropdown-toggle" data-toggle="dropdown" href="services.php">Services<b class="caret"></b></a>
        <ul class="dropdown-menu">
            <li><a href="services.php">Services</a></li>
            <li><a href="web-development.php">Web Development</a></li>
            <li><a href="graphic-design.php">Graphic Design</a></li>
        </ul>
</li> 
```

我试图实现的结果是，当用户查看“服务”、“Web 开发”或“图形设计”页面时，主“服务”列表项将有一个 class="active"。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T09:11:24.717

您可以使用客户端 javascript 来实现这一点。

我推荐使用 jQuery，因为它易于使用。只需将其包含在您的 html 中：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script> 
```

并使用[addClass()](http://api.jquery.com/addClass/)函数，例如：

```
<script>
$(function() {
  var url = window.location.href;
  if(url.indexOf("services.php") > -1)
    $('.dropdown-menu [href*=services.php]').addClass('active');
  //repeat the if statement for each case...
});
</script> 
```

# linux - GCC：内联汇编中的 putchar(char)

> ID：15596688
> 
> 赞同：2
> 
> 时间：2013-03-24T08:59:02.380
> 
> 标签：linux, gcc, assembly, x86-64, inline-assembly

溢出，

如何仅使用内联汇编来实现 putchar(char) 过程？我想在 x86-64 程序集中执行此操作。我这样做的原因是实现我自己的标准库（或至少部分）。这是我到目前为止所拥有的：

```
void putchar(char c)
{   
    /* your code here: print character c on stdout */
    asm(...);
}   

void _start()
{   
    /* exit system call */
    asm("mov $1,%rax;"
        "xor %rbx,%rbx;"
        "int  $0x80"
    );  
} 
```

我正在编译：

```
gcc -nostdlib -o putchar putchar.c 
```

谢谢你帮助我！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T11:18:27.780

这是 GCC x86-64 内联汇编中的一个示例`my_putchar`（在 Intel 语法中，转换为 AT&T 应该很简单）。

编译：

```
gcc -ggdb -masm=intel -o gcc_asm_putchar gcc_asm_putchar.c

```

**编辑：** `rdi`从损坏的寄存器中丢失。固定的。

这是代码：

```
int main(void)
{
    char my_char;

    for (my_char = 'a'; my_char <= 'z'; my_char++)
            my_putchar(my_char);

    my_char = '\n';
    my_putchar(my_char);
    return 0;
}

void my_putchar(char my_char)
{
    int dword_char;
    dword_char = (int)my_char;
    asm volatile(
                    ".intel_syntax noprefix;"
                    "mov r10,rsp;"   // save rsp.
                    "sub rsp,8;"     // space for buffer, align by 8.
                    "mov [rsp],al;"  // store the character into buffer.
                    "mov edi,1;"     // STDOUT.
                    "mov rsi,rsp;"   // pointer to buffer.
                    "mov edx,1;"     // string length in bytes.
                    "mov eax,1;"     // WRITE.
                    "syscall;"       // clobbers rcx & r11.
                    "mov rsp,r10;"   // restore rsp.
                    ".att_syntax prefix;"
                    /* outputs */
                    :
                    /* inputs: eax */
                    : "a"(dword_char)
                    /* clobbered regs */
                    : "rcx", "rdx", "rsi", "rdi", "r10", "r11"
                );
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T01:56:31.230

请注意，`getchar(3)`/是宏（用于性能），用于处理/结构`putchar(3)`中的复杂数据，特别是处理缓冲和其他。nrz 的答案只是对文件描述符 1 做了一个 1 字符，这是*非常*不同的。`FILE``stdin``stdout``write(3)`

 ** * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-06-05T02:35:19.363

当使用 GNU C 内联 asm 时，**使用约束来告诉编译器你想要的东西**，而不是使用 asm 模板中的指令“手动”执行它。

对于`writechar`and `readchar`，我们只需要 a`"syscall"`作为模板，[根据](http://man7.org/linux/man-pages/man2/write.2.html)x86-64 Linux 系统调用约定（`char`非常[接近](http://man7.org/linux/man-pages/man2/write.2.html)匹配 System V ABI 的函数调用约定）。 [i386 和 x86-64 上的 UNIX 和 Linux 系统调用的调用约定是什么](https://stackoverflow.com/questions/2535989/what-are-the-calling-conventions-for-unix-linux-system-calls-on-i386-and-x86-6)。[`write(2)`](http://man7.org/linux/man-pages/man2/write.2.html)

这也可以轻松避免破坏编译器可能保留值的红色区域（低于 RSP 128 字节）。你不能从内联 asm 中破坏它（所以`push`/`pop`除非你`sub rsp, 128`首先使用：请参阅[Using base pointer register in C++ inline asm](https://stackoverflow.com/questions/34520013/using-base-pointer-register-in-c-inline-asm)以及许多关于 GNU C inline asm 的有用链接），并且没有办法告诉编译器你破坏它。您可以使用 构建`-mno-redzone`，但在这种情况下，输入/输出操作数要好得多。

* * *

我很犹豫叫这些`putchar`和`getchar`。如果您正在实现自己的不支持缓冲的 stdio，则可以这样做，但某些功能*需要*输入缓冲才能正确实现。例如，`scanf`必须检查字符以查看它们是否与格式字符串匹配，如果不匹配则将它们设为“未读”。不过，输出缓冲是可选的；你*可以*我认为完全实现 stdio 与创建私有缓冲区和`write()`它的函数，或直接`write()`他们的输入指针。

## `writechar()`：

```
int writechar(char my_char)
{
    int retval;  // sys_write uses ssize_t, but we only pass len=1
                 // so the return value is either 1 on success or  -1..-4095 for error
                 // and thus fits in int

    asm volatile("syscall  #dummy arg picked %[dummy]\n"
                    : "=a" (retval)  /* output in EAX */
                    /* inputs: ssize_t read(int fd, const void *buf, size_t count); */
                    : "D"(1),         // RDI = fd=stdout
                      "S"(&my_char),  // RSI = buf
                      "d"(1)          // RDX = length
                      , [dummy]"m" (my_char) // dummy memory input, otherwise compiler doesn't store the arg
                    /* clobbered regs */
                    : "rcx", "r11"  // clobbered by syscall
                );
    // It doesn't matter what addressing mode "m"(my_char) picks,
    // as long as it refers to the same memory as &my_char so the compiler actually does a store

    return retval;
} 
```

[这在 Godbolt 编译器资源管理器上使用 gcc -O3](https://gcc.godbolt.org/#z:OYLghAFBqd5QCxAYwPYBMCmBRdBLAF1QCcAaPECAKxAEZSAbAQwDtRkBSAJgCFufSAZ1QBXYskwgA5HhYEA1AHdihTMgRNiEdZvkBbAJ4B9HcQCUHAAwARKwEEOAdj43789/NkLimAgDcmBg4AZh53AHpw%2BUEDQSNlVXkRQUxBaME8AC9MIwJSeQAjEQVFTHlUFgYDeQAHJkE0hkwWEOtaK1tLOw8e3t7I6NR5AgQynwIxFnkAhhEyvDTMQlHieVpyqcERZAkG8tX5AFpaADoTw4AWSwBOAFZ5ADMSeUxiYhIO%2B0%2Bunvq9adQzAIeCaEG4XBigmQgQY7m4wXQIj0hnkmmAtTwyAA1ph0PJuLcOLceIjkQYibZbgBhFpcLjfbp9Jl9ED4umtJjg%2BQQcYzMwRABU5WKNWKnim2DsAA15ALwgzmYqPOEhbJRQRBKyGlkct5MEx0BAvI90Pk0CxBAo/Kg8HiBUUHvkMtlcvI0CI5BZQrL5a4fkrFazwbY6RBaGZ8syBgAlawASXxwWsJtalvQogICoDSvBAGVwWCuAA2QwmDTmSMx3MJ1qFEQPLPZ5ng9AF8NKmPWGW1ppsEaNpt9fJEklIwwU8F6LkQUumfkDUkovSYPQkapq4r5VAjV6KBZlNB6Gog17ydOpFhgKQKS0kMo71HEYADweCt0MVAFAqvXHyHzANI5RfV8gzpcQAA9wWHMDaHaOkIiiZAPy/H88QKapIWhBggj9RlBy9FxOjw%2BQBjjBRz0ES9r30JgCAIU9FA0BQDXQHxtTYfQMDKScC1nct%2BWPbFBFIAcBnqeQPw48TCD/TAHleNIiGGUZoiYZd9BXNdUTSbgS2MUxBmUg9UCPE9ViYZAJhhaoKNRaIiB8BkB3GSZZP8QIQkIr5HE6IiGWNHwDVMCBrVtCxcKcLz/XcALfBmTyBw9DJgBYX8DL4zQEtw35BH%2Ba0gRPQsIViLDYTZBEx2qNEMWxX8CRHRdyVuSkaXBYDBxVYUCHVQDfSI19elA%2Bkk05eCeTiwJwv6gaehE4lGondkkynMaMvMEiono7CjLdEzjyaVYHz%2BM8f3knwWF2Nk9LLTKIuyma3w3DUtWdXVZINI05BNfJQrtB0nR1V13U9TyfXapshpDLgIEsCNFU7GskxTJM01kcHBzzaddLWuGEcTZMHXRpsWzbfl4aiWNuyR3tgH7O7poeoaIKgtkuGIWCuQ299P2/Hw0IwkqYSJvoCIHPAHm5XlAkTKl5Fh5UomOeQziOK47kfMpDleYgWCGGY5kEcGXJ1tz4tCZzfFctbQYQl4GBSOzLDOLhbnuAyonQ%2BinJ8pz6fsY09CYWQQptdApu8qLiPS/Tyyyvz7vcJ5VhnGPdFrK8mCvUG1pl9OpEyLPvWt3h%2BHD6LFQSejgpxuOvgTpQVCr8sICz6kqNF%2BvjamSxa66JxfLr%2BO/K4YJxblhkBgAOWjAAtK80lkOSHkxPBmmYlg0JEYBgGqbRkN5xSVL5zIKkwfk/AUvAKgnqJWDQwKsTSPcRiOQPctaLxMBwojfv0Yx1WCtHG65hvaRx6MadAigSDoGAb3YikDoHAPxtyLwZhrbm3rsdfKtFCrC0VOCE4n8GBGBiHIJg4F5C6xqD4ZekFzZtzavXAak5UB%2BD/LQSwpBiCCBqAlBh8FbaCCYBfP8PCTh4ObHSLYBRRE1FIAADj4a1ARCtoh1AkI8Z4Dozr5ECHgFKhRqjyPEUw18LC2Ejm4bw5qpAPL0OUVwQRDl7wqVMBZeiqwvBDG0a8ExDMZrmJePgUg7R7G0kcT0AYuYAAq1gADyABVaJfi3APVZquNh3C8BcJ4Uo8Jqiag2jkKeJSPjiApPLswukGSgngRCXkzmqjLQqA4jTF%2BshDH0UEBU4iVSuA1P1HU0JfB%2BERNUQAdWjHGaJ2AelpNZphIWYTGmRMQvvBSf5kAUN0uw04EimSBKsVwjhDSVEDDYs42Rcy0kENogQEhBgyEUOoXJPAdCRkOP2X0TqGYepg1MYOEAXz%2BiqhYD1Vkgz/n%2BIGkNUa0MEHEBgXOYFkShRIR5qhWSAEoWpMZqzZmdJoJs3QJBQl%2BKMgs3BIivAlKYI9zJVSjm7IAWKg7n5H2EUR7NHwA2XCUgIwMGkLcKQpAWDSEsCK1A0gqT8H4IMMQGj4S0BFQQcV/KIxYhALcLgJxggjyLPI64XBaDyK4BceRlguCMGkBcEVYqpAStIFKqQIrNScNVQ6/lpA4CwCQIefarxyCUH9WZEAwB5H0GXgwDxmoIAFDVaQAoshNAGGkMq0gh5lxyDiZUVNnrSBYEDmwJoCb8A%2BEsngC%2Bmp82YHAmoYokgpDpqIWmlVKg9CtoFawdgsreCMDwAUTUkAIyoBqMCCo1bDjgWQEcOJwQjhplaClEQsEjjjJhGu2tBBiBMFdaIcQkhwzWqkMK0VCbnXgXkUWQ4RYLjyGADseQxj1gQFwIQZ4Sr8hUj2mZcq7YZUl14CqtVZgNUgAuI4E4RZHBFmCBwxwEbHC3FoNceRx7bWkA7Rwzh9rHXOtdSAd1IGBXSC4Ha890hgOetA6QC%2BWSKjgaAA%3D)非常有效地编译。

```
writechar:
    movb    %dil, -4(%rsp)        # store my_char into the red-zone
    movl    $1, %edi
    leaq    -4(%rsp), %rsi
    movl    %edi, %edx            # optimize because fd = len
    syscall               # dummy arg picked -4(%rsp)

    ret 
```

@nrz 的测试比该答案中的不安全（红色区域破坏）版本*更*`main`有效地内联它，利用了大多数寄存器未修改的事实，因此它可以只设置一次。*`syscall`*

 *```
main:
    movl    $97, %r8d            # my_char = 'a'
    leaq    -1(%rsp), %rsi       # rsi = &my_char
    movl    $1, %edx             # len
.L6:                           # do {
    movb    %r8b, -1(%rsp)       # store the char into the buffer
    movl    %edx, %edi           # silly compiler doesn't hoist this out of the loop
    syscall  #dummy arg picked -1(%rsp)

    addl    $1, %r8d
    cmpb    $123, %r8b
    jne     .L6                # } while(++my_char < 'z'+1)

    movb    $10, -1(%rsp)
    syscall  #dummy arg picked -1(%rsp)

    xorl    %eax, %eax         # return 0
    ret 
```

* * *

## readchar()，以同样的方式完成：

```
int readchar(void)
{
    int retval;
    unsigned char my_char;
    asm volatile("syscall  #dummy arg picked %[dummy]\n"
                    /* outputs */
                    : "=a" (retval)
                     ,[dummy]"=m" (my_char) // tell the compiler the asm dereferences &my_char

                    /* inputs: ssize_t read(int fd, void *buf, size_t count); */
                    : "D"(0),         // RDI = fd=stdin
                      "S" (&my_char), // RDI = buf
                      "d"(1)          // RDX = length

                    : "rcx", "r11"  // clobbered by syscall
                );
    if (retval < 0)   // -1 .. -4095 are -errno values
        return retval;
    return my_char;   // else a 0..255 char / byte
} 
```

调用者可以通过检查来检查错误`c < 0`。**

# java - 本地字符串文字的内存分配？

> ID：15596694
> 
> 赞同：4
> 
> 时间：2013-03-24T08:59:52.077
> 
> 标签：java, string, memory, garbage-collection

我知道当我们创建字符串文字时，它会进入 permgenspace。我的问题是它是否会在 jvm 的整个生命周期内一直存在，即使该字符串文字是方法的本地值。例如，我有以下代码片段：-

```
private static void testString1(){
        String str1="tetingLiteral";
    }

private static void testString2(){
        String str2="tetingLiteral";
    } 
```

现在从我调用的主要方法

```
testString1();
testString12(); 
```

str1 和 str2 将引用相同的内存位置。

我的理解是它们将引用相同的内存位置（即使在方法内部创建了字符串文字，它也会在 jvm 的整个生命周期内保留在那里）。但仍然想确认它，因为我无法以编程方式检查它，因为无法打印字符串内存位置

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-24T09:07:08.147

从[Java 语言规范的第 3.10.5 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html#jls-3.10.5)：

> 此外，字符串字面量总是引用 String 类的同一个实例。这是因为字符串字面量 - 或者更一般地说，作为常量表达式值的字符串（第 15.28 节） - 是“内部的”，以便使用 String.intern 方法共享唯一实例。

（请参阅下面的示例，该示例显示字符串实习也在不同包中的类之间起作用。）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-24T09:28:43.377

确切的实现是 JVM 特定的，但在 Oracle Java 7 中，字符串文字位于堆上，并且可以在没有类使用字符串文字时被清理（因为它们已被卸载）

# python - 为什么我的代码会出现 nzec 错误？

> ID：15596701
> 
> 赞同：0
> 
> 时间：2013-03-24T09:01:32.283
> 
> 标签：python, python-2.7

为什么我在 codechef 上的代码中出现 nzec 错误？？？？？？请帮助问题链接是 [http://www.codechef.com/problems/DCE05](http://www.codechef.com/problems/DCE05) 我的解决方案是

```
maxn = 10**9

i = 0

lis = [1]

while(maxn !=0):

    lis.append(2*lis[i])

    i = i+1

    maxn = maxn/2

t = int(input())

for y in range(t):

    n = int(input())

    if n == 0:

        print n

        continue

    for j in range(len(lis)):

        if n > lis[j]:

            continue

        else:

            if lis[j]== n:

                print lis[j]

            else:

                print lis[j-1]

            break 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T10:11:39.507

不是很容易回答，但是您确定不应该先读取所有输入，然后再打印输出吗？据我了解，输入 2 5 10，您的代码将首先读取 2（测试用例的数量，然后 5（人数）打印第一个结果，然后才读取下一个输入 10。我不确定如果这有帮助，但很容易尝试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T10:23:14.353

我以前参加过编程比赛，你应该在产生任何输出之前读取所有输入，而不是同时交错。使用页面上提供的测试用例 [2,5,12] 运行您的代码

```
2
5
4
12
8 
```

虽然它应该显示什么

```
2
5
12
4
8 
```

# vim - 如何调用vimrc中的函数取决于文件类型

> ID：15596703
> 
> 赞同：0
> 
> 时间：2013-03-24T09:01:59.393
> 
> 标签：vim

我在 vimrc 中有一个函数。该功能是关于完成html中的标签。

```
 42 function! InsertHtmlTag()
 43     let pat = '\c<\w\+\s*\(\s\+\w\+\s*=\s*[''#$;,()."a-z0-9]\+\)*\s*>'
 44     normal! a>
 45     let save_cursor = getpos('.')
 46     let result = matchstr(getline(save_cursor[1]), pat)
 47     if (search(pat, 'b', save_cursor[1]))
 48         normal! lyiwf>
 49         normal! a</
 50         normal! p
 51         normal! a>
 52     endif
 53     :call cursor(save_cursor[1], save_cursor[2], save_cursor[3])
 54 endfunction
 55 inoremap > <ESC>:call InsertHtmlTag()<CR> 
```

但我最近发现了一些麻烦。当我写 C++ 代码时，在我写完之后`#include <iostream>`，vim 用`</iostream>`... 完成它。我想知道只有当文件类型是 .html 时才调用这个函数的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T09:27:18.107

Vim 允许特定于文件类型的配置。将代码段从您的移动`~/.vimrc`到 eg `~/.vim/ftplugin/html_inserttag.vim`，并使映射缓冲区本地化：

```
inoremap <buffer> > <ESC>:call InsertHtmlTag()<CR> 
```

这要求你`:filetype plugin on`在你的`~/.vimrc`. 有关`:help filetypes`更多信息，请参阅。

# orchardcms - 如何格式化 Orchard CMS 自动路由以不显示零

> ID：15596705
> 
> 赞同：0
> 
> 时间：2013-03-24T09:02:08.567
> 
> 标签：orchardcms, orchardcms-1.6

我是果园新手，刚刚开始迁移我的博客（它是从头开始创建的）。我还没有开始研究如何扩展果园，我只是在寻找一个尽可能不接触代码的解决方案（只需在管理面板上进行配置就可以了）。

我基本上只是想从自动路由生成的 url 中删除零。例子：

[http://johnvinnymarquez.net/blog/2012/2/26/mvc-assethelper](http://johnvinnymarquez.net/blog/2012/2/26/mvc-assethelper) -> 这是我原来网站的路线

[http://orchard.johnvinnymarquez.net/blog/2012/02/26/mvc-assethelper](http://orchard.johnvinnymarquez.net/blog/2012/02/26/mvc-assethelper) -> 从我的临时站点生成

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T07:52:29.087

在自动布线模式中使用 M 和 d 而不是 MM 和 dd。

# c# - C# 自动将 ToLower 应用于方法字符串参数？

> ID：15596708
> 
> 赞同：3
> 
> 时间：2013-03-24T09:02:18.857
> 
> 标签：c#, tolower

有没有办法让 C# 编译器在方法内部使用特定方法参数之前自动将 ToLower() （或任何其他操作方法调用）应用于特定方法参数？

**//附加信息**：其目的是使用带有不区分大小写键的字典。显然，我的第一种方法是完全错误的，因为我已经找到了一种完全不同的方法来解决字典本身，而不是访问它的键。

我的错！我应该向你提供这些信息。所以，**不需要进一步的答案**。无论如何，非常感谢！

在这种特殊情况下更好的方法：[c# Dictionary: making the Key case-insensitive through declarations](https://stackoverflow.com/questions/6676245/c-sharp-dictionary-making-the-key-case-insensitive-through-declarations)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-24T09:11:03.780

不，C# 编译器不会为您执行此操作（为什么要根据这样的特定要求对其进行定制？），但是您*可以*通过编写一个简单的包装器`struct`来完成此操作`string`：

```
struct LowerCaseString
{
    public LowerCaseString(string value)
    {
        this.value = value.ToLower();
    }

    private readonly string value;

    public static implicit operator LowerCaseString(string value)
    {
        return new LowerCaseString(value);
    }

    public override string ToString()
    {
        return value;
    }

    … // perhaps implement IEquatable<>, IComparable<>, etc.
} 
```

隐式转换运算符允许您编写如下代码：

```
Foo("Hello world.");

void Foo(LowerCaseString text)
{
    Console.WriteLine(text);
} 
```

虽然这如您所料，但这种方法有一些缺点：

*   对性能的影响很小（可能可以忽略不计），因为必须在字符串周围实例化包装器对象。

*   对于您的代码的其他用户来说，存在隐式转换运算符可能并不明显，因此他们最终`new LowerCaseString("Hello world.")`改为编写代码。如果您的团队经常使用它，使用 Visual Studio 的对象浏览器查看该类可能会解决此问题。

*   此包装器不允许您指定`CultureInfo`用于`.ToLower()`. 您想使用`CurrentCulture`, 或`InvariantCulture`, 还是其他？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-24T09:04:44.967

不使用某种 AOP，不。

[PostSharp](http://www.postsharp.net/aop.net)就是这样一种工具，但它增加了复杂性、隐藏代码和更高的编译时间。

`ToLower`直接*在*方法中应用参数要简单得多，或者使用`ToLower`预先调用的方法包装对方法的所有调用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-24T09:04:08.063

一些 AOP 工具，如 PostSharp，可以做到这一点。

但是请检查两次，这是否真的是您想要的，并且没有更简单和更清洁的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-24T09:14:35.807

您可以按照其他人的建议完成此操作 - 通过 AOP。但是，如果情况只是传递小写字符串，这将变得太复杂并且不值得付出努力（在我看来）。

您应该提供有关此事的更多信息，但我相信有更简单的方法可以实现您的目标。看看内置的字符串比较器类 -`StringComparer.OrdinalIgnoreCase`如果您需要小写字符串进行比较，也许会适合您的目的。如果您需要以小写格式向用户显示字符串，那么这是显示字符串的代码的责任，而不是业务逻辑的责任。

# php - 从 javascript 生成 URL 的问题

> ID：15596719
> 
> 赞同：0
> 
> 时间：2013-03-24T09:04:06.563
> 
> 标签：php, javascript, jquery, html, mysql

我正在尝试通过从数据库中获取值来生成多个链接。我可以毫无问题地连接到数据库，并且可以毫无问题地提取变量，但是当我尝试生成我的 html 代码时，一切都变成了乱码。

```
<script type="text/javascript">
//Generate carousel
var mymovies = "<div id='tumbnailtest' class = 'carousel'><ul><li><a href='watchmovie.php?path=";
for (var i = 1; i < 10; i++){
    <?php
    //Get movie List
    $result = mysql_query("SELECT Title, Filepath, Posterpath FROM movies WHERE ID = $count");
    while ( $row = mysql_fetch_array($result) ) {
        //for generating url
        $mpath = $row["Filepath"];
        $mmname = $row["Title"];
        $ppath = $row["Posterpath"];
        $count = $count + 1;
    }
    ?>
    mymovies += "<li><a href=watchmovie.php?path=<?php echo $mpath;?>"
    mymovies += "&mname=<?php echo $mmname;?><img src=<?php echo $ppath;?> width='200' height='300' border='0' style='padding: 0 0px 0 0px;' title='<?php echo $mmname; ?>'></a></li>";
    }
    mymovies += "</ul></div>";
document.write(mymovies);

</script> 
```

链接最终看起来像这样

```
<a href="watchmovie.php?path=&lt;li&gt;&lt;a href=watchmovie.php?path=Movies/iRobot.mp4&amp;mname=iRobot&lt;img src=images/iRobot.jpeg width=" 200'="" height="300" border="0" style="padding: 0 0px 0 0px;" title="iRobot"></a> 
```

当它最终应该看起来像这样

```
<li><a href='watchmovie.php?path=<?php mname ?>&mname=<?php echo $mname;?>' target="_blank"><img id='' src='<?php echo $ppath; ?>' width="200" height="300" border="0" style="padding: 0 0px 0 0px;" title="<?php echo $mname; ?>"></a></li> 
```

当 $count = 1 时，mname 是 iRobot。这个额外的 <li><a href=watchmovie.php?path= 来自哪里？似乎我将随机垃圾写入我的链接。

此处更新文件。

```
<?php
//connect to database server
$row;
    $dbcnx1 = mysql_connect("localhost", "root", "wouldntyouliketoknow");
    if (!$dbcnx1){
        echo( "<P>Unable to connect to the database server at this time.</P>" );
        exit();
    }
    else{
        echo( "<P>Successfully connected to the database!</P>" );
    }
    //select database
    mysql_select_db("movies", $dbcnx1);
    if (! @mysql_select_db("movies") ) {
        echo( "<P>Unable to locate the movies database at this time.</P>" );
        exit();
    } else {
        echo( "<P>Successfully connected to the movies database!</P>" );
    }
    //Get movie List
    $count = 1;
?>
<html>
<link rel="stylesheet" type="text/css" href="css/JMyCarousel.css" />
<script type='text/javascript' src="js/jquery.js"></script>
<script type='text/javascript' src='js/scollingcarouselunminified1.js'></script>
<script type="text/javascript">
$(document).ready(function() {
    $('#tumbnailtest').scrollingCarousel({
    autoScroll: false
    });
});
</script>
<?php
$mymovies = "<div id='tumbnailtest' class = 'carousel'><ul>";
for ($i = 1; $i <= 10; i++) {
//Get movie List
$result = mysql_query("SELECT Title, Filepath, Posterpath FROM movies WHERE ID = ".$i);
while ( $row = mysql_fetch_array($result) ) {
    //for generating url
    $mpath = $row["Filepath"];
    $mmname = $row["Title"];
    $ppath = $row["Posterpath"];
}
$mymovies .= "<li><a href='watchmovie.php?path=".$mpath;
$mymovies .= "&mname=".$mmname."'><img src='".$ppath."' width='200' height='300' border='0' style='padding: 0 0px 0 0px;' title='".$mmname."'></a></li>";
}
$mymovies .= "</ul></div>";
echo $mymovies;
?>

</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T09:12:52.503

~~将JS~~代码更改为：

```
<html>
<head>
    <link rel="stylesheet" type="text/css" href="css/JMyCarousel.css" />
</head>
<body>
<?php
//connect to database server
$row;
    $dbcnx1 = mysql_connect("localhost", "root", "wouldntyouliketoknow");
    if (!$dbcnx1){
        echo( "<P>Unable to connect to the database server at this time.</P>" );
        exit();
    }
    else{
        echo( "<P>Successfully connected to the database!</P>" );
    }
    //select database
    mysql_select_db("movies", $dbcnx1);
    if (! @mysql_select_db("movies") ) {
        echo( "<P>Unable to locate the movies database at this time.</P>" );
        exit();
    } else {
        echo( "<P>Successfully connected to the movies database!</P>" );
    }
?>
<script type='text/javascript' src="js/jquery.js"></script>
<script type='text/javascript' src='js/scollingcarouselunminified1.js'></script>
<script type="text/javascript">
$(document).ready(function() {
    $('#tumbnailtest').scrollingCarousel({
    autoScroll: false
    });
});
</script>
<?php
$mpath;
$mmname;
$ppath;
$mymovies = "<div id='tumbnailtest' class = 'carousel'><ul>";
for ($i = 1; $i <= 10; $i++) {
//Get movie List
$result = mysql_query("SELECT Title, Filepath, Posterpath FROM movies WHERE ID = '".$i."'");
while ( $row = mysql_fetch_array($result) ) {
    //for generating url
    $mpath = $row["Filepath"];
    $mmname = $row["Title"];
    $ppath = $row["Posterpath"];
}
$mymovies .= "<li><a href='watchmovie.php?path=".$mpath;
$mymovies .= "&mname=".$mmname."'><img src='".$ppath."' width='200' height='300' border='0' style='padding: 0 0px 0 0px;' title='".$mmname."'></a></li>";
}
$mymovies .= "</ul></div>";
echo $mymovies;
?>
</body>
</html> 
```

~~JS和PHP仍然存在问题，你不能像这样混合它来实现我认为你正在尝试做的事情......~~但是试试这个，看看它是否有效:)

# actionscript-3 - as3 中添加来自不同类的对象的问题

> ID：15596722
> 
> 赞同：0
> 
> 时间：2013-03-24T09:04:34.793
> 
> 标签：actionscript-3, external

所以，我试图通过代码向我的舞台添加一个对象。我已经在文件、Cosmo1 和 Mass1 之间设置了它。我将Mass1设置为我在flash中的类目录，Mass1的代码如下：

```
package com.mass.basics1
{
import flash.display.MovieClip;
import flash.display.Stage;
public class Mass1 extends MovieClip
{

    public function Mass1()
    {
        var Cosmo:Cosmo1 = new Cosmo1();
        stage.addChild(Cosmo1);
        Cosmo.x = stage.stageWidth / 2;
        Cosmo.y = stage.stageHeight / 2;
    }
}
} 
```

这是 Cosmo1 的代码：

```
package  com.mass.basics1
{  
import flash.display.MovieClip;  
public class Cosmo1 extends MovieClip  
{  
    public function Cosmo1()  
    {  

    }  
}  
} 
```

现在，我的所有目录都设置正确，我没有收到任何错误，但它根本没有添加我的对象。该对象在我的库中，具有符号名称和目录.Cosmo1 的类名称，所以我真的看不出问题出在哪里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T09:10:58.750

您必须将您的实例添加为阶段的子级。但是在您的代码中，您添加了类名。

您的错误可能来自您的实例名称以大写字母开头的事实。代码约定通常告诉实例名称以小写字母开头。

这是您的代码的更新版本：

```
package com.mass.basics1
{
    import flash.display.MovieClip;
    import flash.display.Stage;

    public class Mass1 extends MovieClip
    {
        public function Mass1()
        {
            var cosmo:Cosmo1 = new Cosmo1();
            stage.addChild(cosmo);
            cosmo.x = stage.stageWidth / 2;
            cosmo.y = stage.stageHeight / 2;
        }
    }
} 
```

# ruby-on-rails - Rails 3 基于时间的动态作业

> ID：15596723
> 
> 赞同：1
> 
> 时间：2013-03-24T09:04:36.180
> 
> 标签：ruby-on-rails, cron, gem, rake

在我的 Rails 3 应用程序中，给用户一个小包，他们只能持有很短的时间，例如 20 分钟。包的所有权存储在具有用户`has_many`包关系的表中。20 分钟后，包应将所有权转让给另一个用户。这意味着在重复此过程时更新相关表并重新添加另一个基于时间的事件。

此外，每 20 分钟间隔的开始时间是随机的，它是用户启动的过程。

这可以使用任何基于时间的事件的常见解决方案（如 cron、delayed_job 等）来完成吗？如果有很多包裹被传递，我预计这将导致大量事件队列。

额外注意事项 - 20 分钟的所有权转让过程也可以中断。这意味着该解决方案还应考虑到这些动态作业也可以单独取消。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T09:47:35.497

是的。
delay_job和[sidekiq](https://github.com/collectiveidea/delayed_job)[都有](https://github.com/mperham/sidekiq)内置的调度程序，[resque](https://github.com/defunkt/resque)有[插件](https://github.com/bvandenbos/resque-scheduler)。这些系统非常简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T10:47:53.943

无论何时 gem 非常适合从 Rails 应用程序配置 cron 任务。

[https://github.com/javan/无论何时](https://github.com/javan/whenever)

# node.js - 加载模块时的nodejs异常处理

> ID：15596729
> 
> 赞同：0
> 
> 时间：2013-03-24T09:05:04.340
> 
> 标签：node.js, error-handling

当我在 node.js 中加载模块时如何处理错误假设如下：

```
mysql = require('mysql') ; 
```

当加载 mysql 模块出错时，我想更优雅地处理错误。像这样的东西：

```
try: 
mysql = require('mysql') ;
catch(e):
console.log("there is a error loading module X"); 
```

问题的另一部分是我正在寻找一种基于主机操作系统加载模块的方法。例如，在 linux 上加载一些模块，在 windows 上加载其他模块。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T09:15:11.450

这工作得很好：

```
try {
  var mysql = require('mysql');
} catch(e) {
  console.log('error loading mysql module', e);
}; 
```

可以通过检查来加载基于操作系统的模块`os.platform()`：

```
var platform = require('os').platform();
if (platform === 'linux') {
  ...
}
else
if (platform === 'windows') { // not sure if its called `windows` because I don't have a Windows machine
  ...
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T09:15:10.530

用过你的快递吗？如果是，您可以尝试错误 500 处理：

```
app.use(function(err, req, res, next){
    console.log("this is an error");
}); 
```

# ruby-on-rails-3 - 是否可以在 gmaps4rails 谷歌地图显示上按颜色分隔点组？

> ID：15596730
> 
> 赞同：3
> 
> 时间：2013-03-24T09:05:18.670
> 
> 标签：ruby-on-rails-3, google-maps, gmaps4rails

我有一个用于送货的地址的地图显示。每个地址都在特定的送货路线上，因此根据送货路线以不同颜色显示点非常方便。

可能会显示数百个送货地址，但通常只有几条送货路线。阅读文档，这可以[通过使用不同的图像](https://github.com/apneadiving/Google-Maps-for-Rails/wiki/Controller)来实现，但由于我不控制路由的数量，我宁愿能够动态地设置现有默认图标的颜色变化。到目前为止，我的控制器中有以下内容：

```
@json = @company.addresses.where(:route_id => @premise.routes).to_gmaps4rails do |address, marker|
  marker.title "#{address.route.name}"
  # address route can be differentiated with address.route.id

end 
```

目标是使具有特定路由 id 的所有地址都具有相同的颜色。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T03:52:01.843

您可以使用 RMagic [http://www.imagemagick.org/RMagick/doc/](http://www.imagemagick.org/RMagick/doc/)为每条路线动态创建一个新的标记图像，并使用带有 route.id 作为索引的地图缓存它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-13T19:59:25.080

我的回答相当冗长，但似乎工作正常。我从我发现的[一篇博客文章](http://martin.ankerl.com/2009/12/09/how-to-create-random-colors-programmatically/)中获取了一些代码，这些代码可以生成可能既不同又可读的颜色。

我根据路线名称的第一个字母为每个市场分配一个不同的字母。然后分配一种颜色，该颜色对于每条路线都是唯一且一致的。这意味着即使两条路线的首字母相同，它们也很有可能具有不同的颜色。

毫无疑问，有很多重构要做！

```
def index
  @premise = @company.premises.find(params[:premise]) if params[:premise]

  #only generate the map info if a premise has been selected
  if @premise.present?
    @json = @company.addresses.approved.where(:route_id => @premise.routes).to_gmaps4rails do |address, marker|
      marker.picture({
        :picture => "http://chart.apis.google.com/chart?chst=d_map_pin_letter&chld=#{address.route.name[0]}|#{random_colour_by_index(address.route.name)}|000000"
      })
      marker.title "#{address.route.name}"
    end
  end
end

private

def random_colour_by_index(index)
  @colour ||= Hash.new
  @colour[index] ||= array_rgb_to_hex(hsv_to_rgb(rand, 0.5, 0.95))
end

def array_rgb_to_hex(rgb)
  rgb.inject("") { |hex, element| hex + single_rgb_to_hex(element) }
end

def single_rgb_to_hex(rgb)
  hex = rgb.to_s(16)
  rgb < 16 ? "0#{hex}" : hex
end

def hsv_to_rgb(h, s, v)
  h_i = (h*6).to_i
  f = h*6 - h_i
  p = v * (1 - s)
  q = v * (1 - f*s)
  t = v * (1 - (1 - f) * s)
  r, g, b = v, t, p if h_i==0
  r, g, b = q, v, p if h_i==1
  r, g, b = p, v, t if h_i==2
  r, g, b = p, q, v if h_i==3
  r, g, b = t, p, v if h_i==4
  r, g, b = v, p, q if h_i==5
  [(r*256).to_i, (g*256).to_i, (b*256).to_i]
end 
```

# python - 使用 Selenium 和 Python 进行网页抓取：捕获 JSON 正文

> ID：15596737
> 
> 赞同：1
> 
> 时间：2013-03-24T09:06:49.403
> 
> 标签：python, ajax, json, selenium, web-scraping

我正在尝试抓取在后台运行一些 AJAX 的网页。使用 python 和 Selenium，我已经完成了加载网页、将数据输入表单、单击提交并等待。在这一点上，我正在尝试捕获返回的 JSON 格式的数据，但是[本文](https://stackoverflow.com/questions/8363752/capturing-traffic-in-selenium)建议将 JSON 主体取出是不可能的。我试图自己查看 Selenium 代码以使其返回所有内容，但我运气不佳。有没有人遇到过类似的问题并有解决方法的建议？我不必使用硒（或python）谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T09:13:16.713

我通过查看网站正在执行的 ajax 调用（在源代码中）来做到这一点。这通常是 POST（有时是 GET）。然后我 cURL (PHP) 或 urllib2 (Python) 该 URL + 发送所需的数据。这将返回正文，包括我的 JSON。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T10:46:04.197

在这种情况下，您应该能够直接获取 JSON。JSON 位于[此处](http://www.celebritycruises.com/search/loadSearchJSON.do?_=1364121769879&isWidget=false&dest=ANY&sailStartDate=ANY&sailEndDate=ANY&ship=ANY&port=ANY&duration=ANY&includeAdjascentPorts=Y&promoid=&promoType=&promotionTypeId=&priceProgram=&sortBy=4&startRow=0&count=10&cruiseType=CO&cruiseInt=Y&isCrieriaExcluded=false)。您可以使用 firefox 和 firebug 来检查 XHR 请求以找到它。

# ios - 重新排序自定义分组 UITableView 时单元格的背景图像

> ID：15596738
> 
> 赞同：2
> 
> 时间：2013-03-24T09:07:00.450
> 
> 标签：ios, uitableview

我创建了自己的自定义分组 UITableView。这是一个表格，顶部单元格使用“top.png”作为背景，中间单元格使用“middle.png”，底部单元格使用“bottom.png”。

我在用着

```
- (NSIndexPath *)tableView:(UITableView *)tableView targetIndexPathForMoveFromRowAtIndexPath:(NSIndexPath *)sourceIndexPath toProposedIndexPath:(NSIndexPath *)proposedDestinationIndexPath 
```

在重新排序期间拖动单元格时更改单元格的背景图像。但是，我似乎无法找到一个简单的解决方案。不管我怎么尝试，我总是会得到一个非常复杂的解决方案，其中包含很多 if 案例，而且感觉真的很混乱，过于复杂，就像我没有涵盖所有案例一样。我正在监督这个问题是否有一个简单的解决方案？

我在[这里](https://stackoverflow.com/questions/7266568/how-can-i-refresh-a-uitableview-while-a-user-is-re-arranging-cells)和[这里](https://stackoverflow.com/questions/4237360/reloading-custom-uitableviewcell-after-reordering-cells)找到了这个问题的“解决方案” 。但它们并不完整，并不适用于所有情况。

应处理的特殊情况，但上述两种解决方案无法处理：

*   移动行，然后回到原来的位置
*   在行周围快速移动一行，向下滚动表格视图

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T04:54:07.070

我有同样的问题，我想我已经找到了解决方案。从我的测试来看，它在一个部分中运行良好（测试了两个到大约十几个单元格），但如果您在不同部分之间拖动单元格，则需要进行一些修改。我还没有进行这些修改，因为我不需要那个功能。

此方法假定您已实现委托方法

```
- (void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath 
```

设置单元格的初始背景并确保其正常工作。

此方法将在单元格移动时更新其新位置

```
- (NSIndexPath *)tableView:(UITableView *)tableView targetIndexPathForMoveFromRowAtIndexPath:(NSIndexPath *)sourceIndexPath toProposedIndexPath:(NSIndexPath *)proposedDestinationIndexPath {

    // Get the index paths of the cells above and below our current target cell
    NSIndexPath *higherPath = [NSIndexPath indexPathForRow:proposedDestinationIndexPath.row - 1 inSection:proposedDestinationIndexPath.section];
    NSIndexPath *lowerPath = [NSIndexPath indexPathForRow:proposedDestinationIndexPath.row + 1 inSection:proposedDestinationIndexPath.section];

    // Update our source cell to the appropriate image for its current position
    [self tableView:self.tableView willDisplayCell:[tableView cellForRowAtIndexPath:sourceIndexPath] forRowAtIndexPath:proposedDestinationIndexPath];

    if (sourceIndexPath.row > proposedDestinationIndexPath.row) {
        // Source cell is below the target

        // Update the cell that was in our target position
        [self tableView:self.tableView willDisplayCell:[tableView cellForRowAtIndexPath:proposedDestinationIndexPath] forRowAtIndexPath:lowerPath];

        // Ensure that any cell above our new target is refreshed if the cell is dragged back down the list
        [self tableView:self.tableView willDisplayCell:[tableView cellForRowAtIndexPath:higherPath] forRowAtIndexPath:higherPath];

    } else if (sourceIndexPath.row < proposedDestinationIndexPath.row) {
        // Source cell is above the target

        // Update the cell that was in our target position
        [self tableView:self.tableView willDisplayCell:[tableView cellForRowAtIndexPath:proposedDestinationIndexPath] forRowAtIndexPath:higherPath];

        // Ensure that any cell below our new target is refreshed if the cell is dragged back up the list
        [self tableView:self.tableView willDisplayCell:[tableView cellForRowAtIndexPath:lowerPath] forRowAtIndexPath:lowerPath];

    } else {
        // Source cell is the same as the target - cell is back in its original position

        // Update any cells below and above the position
        [self tableView:self.tableView willDisplayCell:[tableView cellForRowAtIndexPath:higherPath] forRowAtIndexPath:higherPath];
        [self tableView:self.tableView willDisplayCell:[tableView cellForRowAtIndexPath:lowerPath] forRowAtIndexPath:lowerPath];
    }

    return proposedDestinationIndexPath;
} 
```

我在患流感时想出了这个，所以我可能在解释中犯了一些愚蠢的错误，但我非常有信心这应该可靠地工作，除了单节限制。

# javascript - IE 中的 Javascript：“this”关键字指的是窗口对象 (?)

> ID：15596740
> 
> 赞同：0
> 
> 时间：2013-03-24T09:07:27.860
> 
> 标签：javascript, jquery, explorer

我在我的代码中创建了一个 JS 对象（模块模式）：

```
var Validator = {
    regexEmail: /^([a-zA-Z0-9_.-])+@(([a-zA-Z0-9-])+.)+([a-zA-Z0-9]{2,4})+$/,

    settings: {
        error_class: "error-field",
        formValid: true
    },

    init: function (form, default_error_class) {
        self = this;
        alert(self == window);
    },
}; 
```

在 chrome 上运行“init”函数时，self == window（预期）为 false。但是当我在 IE9 上尝试它时，我得到了真实的（！）。你能告诉我为什么吗？我希望“this”能够捕获我的自定义 Validator 对象而不是窗口

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T09:25:40.820

在定义“自我”时修正你的范围。此外，使用显式而非隐式比较器，即 === 而非 ==。

```
var Validator = {
    regexEmail: /^([a-zA-Z0-9_.-])+@(([a-zA-Z0-9-])+.)+([a-zA-Z0-9]{2,4})+$/,

    settings: {
        error_class: "error-field",
        formValid: true
    },

    init: function (form, default_error_class) {
        var self = this;
        alert(self === window);
    },
};

Validator.init(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T09:27:17.957

您可以使用立即执行的匿名构造函数

```
var Validator = new function(){
    this.regexEmail = 
        /^([a-zA-Z0-9_.-])+@(([a-zA-Z0-9-])+.)+([a-zA-Z0-9]{2,4})+$/;
    this.settings = {
        error_class: "error-field",
        formValid: true
    };
    this.init = function (form, default_error_class) {
        console.log(this === window);
    };
    return this;
}();
Validator.init(); //=> false 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T11:21:18.250

我认为 IE 在这种情况下实际上是正确的。

`var`因为你在定义`self`它时没有使用隐式全局。当您尝试设置此全局`self`时，它会失败，因为浏览器中的全局对象`window`已经有一个`window.self`属性，它是对`window`.

[HTML 生活标准 说](http://www.whatwg.org/specs/web-apps/current-work/#the-window-object)：

> window、frames 和 self IDL 属性都**必须**返回 Window 对象的浏览上下文的 WindowProxy 对象。

这意味着它`window.self`应该是不可变的。

所以，`window.self == window`它提醒真实。

**然而**，由于历史黑客与一些旧网站保持兼容，WebKit 和 Gecko 中有一个[错误/功能](https://www.w3.org/Bugs/Public/show_bug.cgi?id=13403#c0)允许你覆盖它，即使你真的不应该这样做。似乎[（至少在 Gecko 中）](https://stackoverflow.com/a/2725379/778975)与[split objects](https://developer.mozilla.org/en-US/docs/SpiderMonkey/Split_object)有关。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-24T09:28:27.170

使用 `alert(self === window);`而不是相等运算符。您也可以在此处查看接受的答案以获取有关 2 个运算符的更多详细信息：[JavaScript 比较中应该使用哪个等于运算符 (== vs ===)？](https://stackoverflow.com/questions/359494/javascript-vs-does-it-matter-which-equal-operator-i-use)

还有一件事：正如天才所说，修复你的范围：

```
var self=this; 
```

# jquery - Jquery 插件在 Facebook 静态 HTML 选项卡中不起作用

> ID：15596742
> 
> 赞同：1
> 
> 时间：2013-03-24T09:07:38.350
> 
> 标签：jquery, html, facebook, static, tabs

对于 facebook 粉丝页面，我创建了一个静态 html 选项卡（[https://www.facebook.com/jgsportevents/app_190322544333196](https://www.facebook.com/jgsportevents/app_190322544333196)），我想在其中使用链接的 jquery 插件，就像我在客户网站上所做的一样（[http:// /tinyurl.com/c3bfz93](http://tinyurl.com/c3bfz93)）。Chained 插件位于选项卡的基本 script.js 中，如下所示：

```
(function($) {

$.fn.chained = function(parent_selector, options) { 

    return this.each(function() {

        /* Save this to self because this changes when scope changes. */            
        var self   = this;
        var backup = $(self).clone();

        /* Handles maximum two parents now. */
        $(parent_selector).each(function() {

            $(this).bind("change", function() {
                $(self).html(backup.html());

                /* If multiple parents build classname like foo\bar. */
                var selected = "";
                $(parent_selector).each(function() {
                    selected += "\\" + $(":selected", this).val();
                });
                selected = selected.substr(1);

                /* Also check for first parent without subclassing. */
                /* TODO: This should be dynamic and check for each parent */
                /*       without subclassing. */
                var first = $(parent_selector).first();
                var selected_first = $(":selected", first).val();

                $("option", self).each(function() {
                    /* Remove unneeded items but save the default value. */
                    if (!$(this).hasClass(selected) && 
                        !$(this).hasClass(selected_first) && $(this).val() !== "") {
                            $(this).remove();
                    }                        
                });

                /* If we have only the default value disable select. */
                if (1 == $("option", self).size() && $(self).val() === "") {
                    $(self).attr("disabled", "disabled");
                } else {
                    $(self).removeAttr("disabled");
                }
                $(self).trigger("change");
            });

            /* Force IE to see something selected on first page load, */
            /* unless something is already selected */
            if ( !$("option:selected", this).length ) {
                $("option", this).first().attr("selected", "selected");
            }

            /* Force updating the children. */
            $(this).trigger("change");             

        });
    });
};

/* Alias for those who like to use more English like syntax. */
$.fn.chainedTo = $.fn.chained;

})(jQuery);

$("#bestemming").chained("#sport"); /* or $("#series").chainedTo("#mark"); *///         Javascript Document 
```

此外，我在标签的 index.html 文件中使用 [[script.js]] 调用标签的脚本页面，并使用 http://code.jquery.com/jquery-latest.min.js'> 调用 jquery。不幸的是，我无法让插件像在客户网站上那样工作。

出了什么问题？

**更新**

根据 Fabio Antunes 的回答，我更改了代码。不幸的是，它仍然无法正常工作。我已经更改了代码，但仍然没有效果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T13:42:54.590

您的 jquery 被阻止，facebook 阻止来自非安全 url 的每个脚本，因此更改此：

`http://code.jquery.com/jquery-latest.min.js`

对此：

```
https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js 
```

出于同样的原因，您的字体也被阻止的另一件事：

```
http://fonts.googleapis.com/css?family=Roboto+Condensed:300italic,400italic,700italic,400,700,300 
```

您只需要将协议更改为 https

```
https://fonts.googleapis.com/css?family=Roboto+Condensed:300italic,400italic,700italic,400,700,300 
```

**编辑**

您的代码还有一个错误，您没有正确加载 facebook javascript，使您的应用程序触发 javascript 错误，因此您的应用程序不会运行任何脚本

改变这个：

```
<script>
  FB.init({
    appId  : 'YOUR_APP_ID',
    status : true, // check login status
    cookie : true, // enable cookies to allow the server to access the session
    oauth  : true // enable OAuth 2.0
  });
  FB.Canvas.setAutoResize();
</script> 
```

对此：

```
<script>
  window.fbAsyncInit = function() {
  FB.init({
Uncaught ReferenceError: FB is not defined
    appId  : 'YOUR_APP_ID',
    status : true, // check login status
    cookie : true, // enable cookies to allow the server to access the session
    oauth  : true // enable OAuth 2.0
  });
  FB.Canvas.setAutoResize();
  };
  // Load the SDK Asynchronously
      (function(d){
         var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
         if (d.getElementById(id)) {return;}
         js = d.createElement('script'); js.id = id; js.async = true;
         js.src = "//connect.facebook.net/en_US/all.js";
         ref.parentNode.insertBefore(js, ref);
       }(document));
</script> 
```

# iphone - webView动态高度问题

> ID：15596743
> 
> 赞同：1
> 
> 时间：2013-03-24T09:07:43.407
> 
> 标签：iphone, html, uiwebview, uiscrollview

我有一个 webView，我在其中显示 html 文本。我正在计算 webView 的高度，如下所示。

```
int height = [[_webViewDesc stringByEvaluatingJavaScriptFromString:@"document.body.offsetHeight;"] integerValue]; 
```

WebView 的实际体型与我得到的不同。如何获取 webView 的实际高度。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T11:30:10.070

要获得高度，您的 webview 必须先加载 html 字符串。将委托属性赋予您的 webview 对象并尝试在下面的函数中获取高度

```
- (void)webViewDidFinishLoad:(UIWebView *)webView {
    int height = [[_webViewDesc stringByEvaluatingJavaScriptFromString:@"document.body.offsetHeight;"] integerValue];
    NSLog(@"%d",height);
} 
```

你也可以使用下面的方法来获取 webview 的高度

```
NSLog(@"%f",_webViewDesc.scrollView.contentSize.height); 
```

# php - CURL Post 为上传的文件数据添加标题

> ID：15596745
> 
> 赞同：0
> 
> 时间：2013-03-24T09:08:42.007
> 
> 标签：php, post, curl, upload, header

我对 PHP 有点陌生，所以我需要一些帮助。

我有一个在 Tomcat 7 上运行的 Java Servlet，它公开了一个接收 Wav 文件的 API。我在 Servlet 中所做的是从 request.getInputStream(); 并将其保存到文件中。

使用 fiddler 我会调用 API（在请求正文中使用这个 <@INCLUDE *C:\wavlocation\2.wav* @>），它会正确保存文件。现在我在 PHP 中有一个脚本，它使用 curl 调用这个 API，但由于某种原因，它向数据（主体的输入流）添加了更多信息。

这是正确的 Wav 文件在文本编辑器中的样子：

```
RIFFd¯ WAVEfmt      @¬  €&gt;  [1]  data@¯ çÿ×ÿïÿ÷ÿÿÿ ÿÿ÷ÿÿÿ ÿÿïÿ ' 7 7 _ ? /  ÿÿ… 
```

这是从我的 servlet 中保存 wav 文件的方式：

```
------------------------------4564fc26ec61
Content-Disposition: form-data; name="file_box"; filename="/var/www/recordings/1ab26427-0b9e-428e-8730-9fd6076c52e7.wav"
Content-Type: application/octet-stream

RIFFd¯ WAVEfmt      @¬  €&gt;  [1]  data@¯ çÿ×ÿïÿ÷ÿÿÿ ÿÿ÷ÿÿÿ ÿÿïÿ ' 7 7 _ ? /  ÿÿ¬… 
```

正如您所看到的，由于某种原因，PHP curl 向我不需要的数据添加了更多信息。我只想保存 wav 文件的数据。

请帮助我:)提前谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T15:13:35.077

看起来，由于您缺乏细节（例如没有代码显示您所做的事情或 API 的确切要求是什么），您似乎正在做多部分表单，而服务器端希望您这样做发送一个没有多部分内容的更“纯”的 POST。

但实际上，如果您能告诉我们更多细节，我们可以更确定地回答。

# mongodb - MongoDB：通过_id查询子文档集

> ID：15596748
> 
> 赞同：0
> 
> 时间：2013-03-24T09:09:20.637
> 
> 标签：mongodb

收藏：

```
[
{
   tracks: [{_id: 'xxx', title: 'track x'}, {_id: 'yyy', title: 'track y'}
},
{
   tracks: [{_id: 'zzz', title: 'track z'}, {_id: 'ttt', , title: 'track t'}
}
] 
```

我想获得只包含 id 为 xxx 和 zzz 的曲目的结果集：

```
tracks: [{_id: 'xxx'}, {_id: 'zzz'} 
```

我尝试使用聚合框架：

```
{$unwind : "$tracks" },
{$match: {'tracks._id': {$in:['xxx', 'zzz']}} } 
```

但它返回空集 []

对我来说奇怪的是，如果我尝试与另一个（字段不是_id）匹配，它会起作用

```
{$unwind : "$tracks" },
{$match: {'tracks.title': {$in:['track x', 'track x']}} } 
```

我怎样才能完成我的任务？

PS 我使用 mongoose.js 框架进行查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T22:51:08.703

所以我发现了问题：通过 _id 选择需要将 id 值显式转换为原生 ObjectId 类型。

```
var ObjectId = mongoose.Types.ObjectId
...
{$unwind : "$tracks" },
{$match: {'tracks._id': {$in:[ObjectId('5140a09be5c703ac2c000002'), ObjectId('5140a09be5c703ac2c000002')]}} } 
```

我认为这是一个错误，我在 mongoose.js 存储库中创建了一个问题。

UPD。对 mongoose.js 贡献者的问题的回答：此时，参数不会转换为模式，因为 $project 运算符允许在管道的任何阶段重新定义文档的“形状”。- 返回的文档是普通的 javascript 对象，而不是转换为此模型模式定义的猫鼬文档（因为可以返回任何形状的文档）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T11:48:51.877

您的查询没有任何问题，它应该可以正常工作（但是我从未使用过猫鼬）。但是您可以尝试使用`find()`with projection 来实现类似的结果：

```
db.tracks.find(
  { 'tracks._id': { $in: [ 'xxx', 'zzz' ] } }, 
  { _id: 0, 'tracks.title': 0, tracks: { $elemMatch: { _id: { $in: [ 'xxx', 'zzz' ] } } }
) 
```

# joomla - 构建原生 Joomla 3.x 组件

> ID：15596749
> 
> 赞同：7
> 
> 时间：2013-03-24T09:09:34.550
> 
> 标签：joomla, joomla3.0, joomla3.1

所以我决定看看新的Joomla！MVC 带来。因为我是一个边做边学的人，所以我开始构建本地 Joomla！3.x 组件，我的意思是在现实世界的项目中不使用遗留类，而不仅仅是 hello world 的东西。

作为学习材料点，我使用了[Lendr 教程](http://lendr.sparkbuilt.com/)，并且还检查了一些新的 Joomla！[jissues代码](https://github.com/joomla/jissues)。

我从遗留类中错过的一件事是 JModelList。所以我基本上说明了从那里复制粘贴到我的组件的方法。

现在一切都如此轻巧和灵活，但基本上为了实现与遗留类相同的功能，我实际上必须编写和维护更多代码。我“喜欢”编写的功能之一是基本的 CRUD 功能。

**所以我的问题是：**有没有使用 Joomla 的新 MVC 的好例子？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-24T21:12:40.047

新的 MVC 类确实不适合与 CMS 一起使用。如果您愿意维护额外的代码来做到这一点，它们是可用的。

**3.1 安装程序使用新的 MVC**，否则，我所知道的使用新 MVC 的最佳示例是跟踪器应用程序（这是我见过的唯一公开使用它的大型 Web 应用程序）和 Platform Pull Tester。

David Hurley 正在 Joomla 上运行一个系列！关于使用新 MVC 的杂志（[最新文章](http://magazine.joomla.org/issues/issue-mar-2013/item/1137-joomla-30-extension-development-series-writing-the-core)），但目前还不是很远。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-24T18:26:56.447

据我所知，[JIssues](https://github.com/joomla/jissues/)是在 Joomla CMS 中使用新 MVC 的唯一公开示例。

虽然我发现新的 MVC 极简主义对于平台/框架应用程序非常方便，但由于您所写的原因，我不愿意将它用于新组件 - 它缺少一些特定于 CMS 的东西。

我认为我们（社区）应该开发这些类（稍后在 /libraries/cms/ 中可用），同时考虑到 Joomla（MVC、路由器、ApplicationWeb）以及 PHP 5 中的新事物。

[JModelTracker](https://github.com/joomla/jissues/tree/master/libraries/tracker/model)可能是一个值得回顾的好东西

*编辑：*

在 Joomla 平台上构建了一个应用程序：[Cobalt CRM](http://cobaltcrm.org/)。

虽然它不是 CMS 组件，但某些设计模式类似于在 CMS 中使用新 MVC 的方式：有一个基本模型[CobaltModelDefault](https://github.com/cobaltcrm/cobalt/blob/master/libraries/crm/model/default.php)可以由其他模型扩展（即[CobaltModelDocuments](https://github.com/cobaltcrm/cobalt/blob/master/libraries/crm/model/documents.php)）。

对我来说，准备一些在 CMS 中常用的类是有意义的（这可能与遗留类非常相似），但要考虑 RAD 技术，如[Framework-on-Framework](https://akeeba.assembla.com/spaces/fof/wiki)、命名空间等。

# node.js - 如何使用 opsWorks 在 aws 上部署 nodejs？

> ID：15596751
> 
> 赞同：0
> 
> 时间：2013-03-24T09:09:46.960
> 
> 标签：node.js, amazon-web-services, amazon-ec2

我正在使用 opsWorks，并在 ec2 上创建了一个 nodejs 应用程序。

我希望能够创建一台将在 opsWorks 部署上运行的 ec2 机器，但我所能做的就是制作一台安装了 nodejs 的 EC2 机器。对于我想做的简单事情，CHEF 接缝很复杂。

有人做过吗？我想要 EC2 机器： 1\. nodejs 安装 2\. git clone 3\. npm 永远安装 4\. npm log4js + mongoose 安装

有人做过吗？最好的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T18:01:09.847

Using OpsWorks is relatively simple, and you can probably just use the default Node set up. Check out [Has anyone been successful deploying a node (express) app with Amazon OpsWorks?](https://stackoverflow.com/questions/14986794/has-anyone-been-successful-deploying-a-node-express-app-with-amazon-opsworks) for some things to remember.

If you do it properly, OpsWorks will start your Node app for you. (most likely your filename is wrong).

As well, getting the packages you want installed is easy enough by just adding them into your package.json file.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T11:54:25.397

您是否尝试过用于 Node.js 的弹性 beantalk？它为 Node.js 提供了预配置的容器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-06T04:07:35.663

我最近使用 Opsworks 部署了 nodejs 应用程序。我遇到了类似的问题，我[在这个 gist 上](https://gist.github.com/jalquisola/2e78b9f1c04a862e8ba1)记录了解决方案。

# visual-studio-2010 - 在 Visual Studio 2010 中将文件添加到 cmake 项目

> ID：15596752
> 
> 赞同：3
> 
> 时间：2013-03-24T09:10:07.620
> 
> 标签：visual-studio-2010, visual-studio, cmake, projects-and-solutions

我在 linux 中使用 cmake 已经有一段时间了，但出于一些原因，我需要转到 Visual Studio 中工作......

我生成了 cmake 项目，我可以在 Visual Studio 中加载解决方案，但是当我尝试添加文件时，它被添加到构建文件的位置，而不是添加到源目录中。有没有办法解决这个问题，还是必须通过资源管理器添加它们，然后重新生成 cmake 构建文件，然后重新打开解决方案？这似乎有点笨拙，我希望有一个更简单的方法。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-24T12:02:26.067

是的，您应该通过 CMakeLists.txt 文件而不是通过 VS 添加文件。这里有几个选择。

推荐的方法是在 CMakeLists 文件中明确列出所有源文件。如果要添加新文件，则必须将其添加到 CMakeLists.txt。这种方法的好处是修改CMakeLists文件后，整个构建是“过时的”，所以仅仅尝试在VS中构建任何目标都会导致CMake重新运行并将文件添加到适当的目标中。

另一种选择是使用 CMake 的[`file(GLOB ...)`](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#command%3afile)命令。这将在给定的路径中搜索来源，并可用于自动生成您的来源列表。好处是它比在 CMakeLists 文件中手动列出所有文件更简单。但是，缺点是如果将新文件添加到源目录，则必须手动重新运行 CMake，因为 CMake 不会知道源目录已过期。我不得不说，我通常不认为这是一个问题——如果你刚刚添加了一个文件并且它没有出现在你的 VS 资源管理器中，这很明显，当然到构建时它会更加明显，因为构建失败（或者你不是在使用该文件）。

请注意，对于任一选项，如果您重新运行 CMake，则无需关闭 VS。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T08:21:43.653

要通过 Visual Studio 添加新文件，您可以选择“添加 -> 新项目”选项。在结果窗口中，应该有一个“位置”文本输入框。这具有默认指定的构建目录，但可以轻松地将路径更改为源代码树中的某个位置。

# youtube-api - 如何使用 YouTube API 版本 3 获取视频时长？

> ID：15596753
> 
> 赞同：106
> 
> 时间：2013-03-24T09:10:07.930
> 
> 标签：youtube-api, youtube-data-api

我正在使用 YouTube API v3 搜索 YouTube。

[https://developers.google.com/youtube/v3/docs/search](https://developers.google.com/youtube/v3/docs/search)

如您所见，响应 JSON 不包含视频时长。有没有办法获得视频时长？

最好不要再次为结果中的每个元素调用 API（除非这是获取持续时间的唯一方法）。

* * *

## 回答 #1

> 赞同：145
> 
> 时间：2013-03-25T00:22:59.910

进行搜索调用后，您必须调用 YouTube 数据 API 的视频资源。您最多可以在搜索中添加 50 个视频 ID，因此您不必为每个元素调用它。

[https://developers.google.com/youtube/v3/docs/videos/list](https://developers.google.com/youtube/v3/docs/videos/list)

你会想要设置`part=contentDetails`，因为持续时间在那里。

例如，以下调用：

```
https://www.googleapis.com/youtube/v3/videos?id=9bZkp7q19f0&part=contentDetails&key={YOUR_API_KEY} 
```

给出这个结果：

```
{
 "kind": "youtube#videoListResponse",
 "etag": "\"XlbeM5oNbUofJuiuGi6IkumnZR8/ny1S4th-ku477VARrY_U4tIqcTw\"",
 "items": [
  {

   "id": "9bZkp7q19f0",
   "kind": "youtube#video",
   "etag": "\"XlbeM5oNbUofJuiuGi6IkumnZR8/HN8ILnw-DBXyCcTsc7JG0z51BGg\"",
   "contentDetails": {
    "duration": "PT4M13S",
    "dimension": "2d",
    "definition": "hd",
    "caption": "false",
    "licensedContent": true,
    "regionRestriction": {
     "blocked": [
      "DE"
     ]
    }
   }
  }
 ]
} 
```

时间被格式化为 ISO 8601 字符串。PT代表Time Duration，4M是4分钟，13S是13秒。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2015-03-29T07:08:08.437

我知道了！

```
$dur = file_get_contents("https://www.googleapis.com/youtube/v3/videos?part=contentDetails&id=$vId&key=dldfsd981asGhkxHxFf6JqyNrTqIeJ9sjMKFcX4");

$duration = json_decode($dur, true);
foreach ($duration['items'] as $vidTime) {
    $vTime= $vidTime['contentDetails']['duration'];
} 
```

在那里它返回 YouTube API 版本 3 的时间（密钥是顺便组成的；）。我`$vId`曾经从正在播放视频的频道中删除了返回的视频列表...

有用。谷歌真的需要在片段中包含持续时间，这样你就可以通过一个电话而不是两个电话来获得所有信息……它在他们的“wontfix”列表中。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-06-10T15:43:54.523

我编写了以下类来使用 YouTube API v3 获取 YouTube 视频持续时间（它也返回缩略图）：

```
class Youtube
{
    static $api_key = '<API_KEY>';
    static $api_base = 'https://www.googleapis.com/youtube/v3/videos';
    static $thumbnail_base = 'https://i.ytimg.com/vi/';

    // $vid - video id in youtube
    // returns - video info
    public static function getVideoInfo($vid)
    {
        $params = array(
            'part' => 'contentDetails',
            'id' => $vid,
            'key' => self::$api_key,
        );

        $api_url = Youtube::$api_base . '?' . http_build_query($params);
        $result = json_decode(@file_get_contents($api_url), true);

        if(empty($result['items'][0]['contentDetails']))
            return null;
        $vinfo = $result['items'][0]['contentDetails'];

        $interval = new DateInterval($vinfo['duration']);
        $vinfo['duration_sec'] = $interval->h * 3600 + $interval->i * 60 + $interval->s;

        $vinfo['thumbnail']['default']       = self::$thumbnail_base . $vid . '/default.jpg';
        $vinfo['thumbnail']['mqDefault']     = self::$thumbnail_base . $vid . '/mqdefault.jpg';
        $vinfo['thumbnail']['hqDefault']     = self::$thumbnail_base . $vid . '/hqdefault.jpg';
        $vinfo['thumbnail']['sdDefault']     = self::$thumbnail_base . $vid . '/sddefault.jpg';
        $vinfo['thumbnail']['maxresDefault'] = self::$thumbnail_base . $vid . '/maxresdefault.jpg';

        return $vinfo;
    }
} 
```

请注意，您需要 API_KEY 才能使用 YouTube API：

1.  在此处创建一个新项目：[https ://console.developers.google.com/project](https://console.developers.google.com/project)
2.  在“APIs & auth”-> APIs 下启用“YouTube Data API”
3.  在“APIs & auth”-> Credentials 下创建一个新的服务器密钥

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-07-13T09:53:22.417

此代码通过传递视频 ID 使用 YouTube API v3 提取 YouTube 视频时长。它对我有用。

```
<?php
    function getDuration($videoID){
       $apikey = "YOUR-Youtube-API-KEY"; // Like this AIcvSyBsLA8znZn-i-aPLWFrsPOlWMkEyVaXAcv
       $dur = file_get_contents("https://www.googleapis.com/youtube/v3/videos?part=contentDetails&id=$videoID&key=$apikey");
       $VidDuration =json_decode($dur, true);
       foreach ($VidDuration['items'] as $vidTime)
       {
           $VidDuration= $vidTime['contentDetails']['duration'];
       }
       preg_match_all('/(\d+)/',$VidDuration,$parts);
       return $parts[0][0] . ":" .
              $parts[0][1] . ":".
              $parts[0][2]; // Return 1:11:46 (i.e.) HH:MM:SS
    }

    echo getDuration("zyeubYQxHyY"); // Video ID
?> 
```

[您可以在https://console.developers.google.com](https://console.developers.google.com)上获取您的域自己的 YouTube API 密钥，并为您自己的要求生成凭据。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-09-19T06:38:50.567

您可以从 json 响应中的“contentDetails”字段获取持续时间。

[![在此处输入图像描述](../Images/4efab82a0b00b7024879f28cfed8a852.png)](https://i.stack.imgur.com/qpQPs.png)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-06-11T23:27:10.477

使用 Python 2.7 和 YouTube API v3 的持续时间（以秒为单位）：

```
 try:        
        dur = entry['contentDetails']['duration']
        try:
            minutes = int(dur[2:4]) * 60
        except:
            minutes = 0
        try:
            hours = int(dur[:2]) * 60 * 60
        except:
            hours = 0

        secs = int(dur[5:7])
        print hours, minutes, secs
        video.duration = hours + minutes + secs
        print video.duration
    except Exception as e:
        print "Couldnt extract time: %s" % e
        pass 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-09-19T06:18:07.837

Youtube 数据 3 API，持续时间字符串到 Python 中的秒数转换

# 例子：

> convert_YouTube_duration_to_seconds('P2DT1S')
> 172801
> 
> convert_YouTube_duration_to_seconds('PT2H12M51S')
> 7971

```
def convert_YouTube_duration_to_seconds(duration):
   day_time = duration.split('T')
   day_duration = day_time[0].replace('P', '')
   day_list = day_duration.split('D')
   if len(day_list) == 2:
      day = int(day_list[0]) * 60 * 60 * 24
      day_list = day_list[1]
   else:
      day = 0
      day_list = day_list[0]
   hour_list = day_time[1].split('H')
   if len(hour_list) == 2:
      hour = int(hour_list[0]) * 60 * 60
      hour_list = hour_list[1]
   else:
      hour = 0
      hour_list = hour_list[0]
   minute_list = hour_list.split('M')
   if len(minute_list) == 2:
      minute = int(minute_list[0]) * 60
      minute_list = minute_list[1]
   else:
      minute = 0
      minute_list = minute_list[0]
   second_list = minute_list.split('S')
   if len(second_list) == 2:
      second = int(second_list[0])
   else:
      second = 0
   return day + hour + minute + second 
```

# jquery - 在jquery mobile中使用jqm.page.params.js在页面之间传递参数

> ID：15596757
> 
> 赞同：0
> 
> 时间：2013-03-24T09:10:48.190
> 
> 标签：jquery, jquery-mobile

我有这个代码在 jquery mobile 中显示一个列表视图：

`$('#actualites').append('<li><a data-transition="slide" href="actualite.htm?id=' + id + '&titre=' + titre + '&contenu=' + contenu + '&date=' + date + '&type=' + type + '&image=' + image + '"><img src="' + image + '" height="100%" width="100%"/><h3>' + titre + '</h3><p>' + contenu + '</p></a></li>'); $('#actualites').listview('refresh');`

我添加了这个文件： `<script src="js/jqm.page.params.js"></script>`

在索引上，我添加了这个来获取参数：

```
$("#actualite").live("pagebeforeshow", function(e, data){
            if ($.mobile.pageData && $.mobile.pageData.titre){
                console.log("Parameter titre=" + $.mobile.pageData.titre);
            }
        }); 
```

得到滴度，但它是不确定的......所以我忘记了什么吗？

谢谢

# twitter-bootstrap - AngularUI typeahead 插件是否允许任何类型的值？

> ID：15596765
> 
> 赞同：3
> 
> 时间：2013-03-24T09:11:46.063
> 
> 标签：twitter-bootstrap, angularjs, angular-ui-bootstrap, typeahead.js

我有一个 <input> 使用[Bootstrap typeahead 和 Angular UI 指令](http://angular-ui.github.com/bootstrap/)。下拉列表中值的显示和选择工作正常。

但是，当我在输入中键入不是下拉选项之一的值时，该值不会绑定到模型属性。然而，我输入的内容仍保留在输入中，就好像它是有效输入一样。

在下面的示例中，当我在输入中键入不是 autocomplete.referrers 数组中的选项的文本时，此文本不会绑定到 registration.referrer。

我是否正确配置了输入？

```
<input type="text" 
    name="referrer" 
    ng-model="registration.referrer"
    autocomplete="off"
    typeahead="referrer for referrer in autocomplete.referrers | filter:$viewValue"
    /> 
```

也许对随机文本输入的限制是设计使然？

如果您能回答这个问题，非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T21:14:15.023

@reggoodwin 这是当前版本的预输入指令的设计： [https ://github.com/angular-ui/bootstrap/blob/929a46faa3a3eea3dec7ae8c1387f332eee9a9bc/src/typeahead/typeahead.js#L110](https://github.com/angular-ui/bootstrap/blob/929a46faa3a3eea3dec7ae8c1387f332eee9a9bc/src/typeahead/typeahead.js#L110)

这种行为背后的基本原理是来自自动完成的值应该作为参考值。但我正在思考这种行为，它可以被配置。随意在[https://github.com/angular-ui/bootstrap](https://github.com/angular-ui/bootstrap)中打开一个问题来讨论更多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-03T17:18:44.150

将此指令添加为属性对我有用：

```
<input typeahead-editable="false" > 
```

# javascript - 禁用触摸屏中的水平滚动

> ID：15596767
> 
> 赞同：2
> 
> 时间：2013-03-24T09:12:00.127
> 
> 标签：javascript, jquery, horizontal-scrolling, touchscreen

首先是一些支持信息：目前我正在制作触摸屏导航，类似于 iOS facebook 应用程序。它需要一个 div 从屏幕上滑开（几乎完全）。为此，我使用可拖动的 jqueryUI。我的问题是当 div 被滑走时出现，但用户继续水平滑动（div 可以移动到奇怪的地方）。这就是为什么我决定编写一个脚本来完全禁用各种水平滚动（没有 CSS overflox-x:hidden 没有帮助）。

我的想法是比较手指在 X 轴和 Y 轴上的速度。你可以在下面看到我的代码。当它归结为纯粹的水平滚动时，这很好用，但在做一些对角线移动时会中断。任何人都知道如何在不完全禁用到处滚动的情况下阻止这种对角滚动。

```
var t1,sX,sY;//vars for the initial touch start time and position

$(window).bind('touchstart',function(e){
    dateX = new Date();//time at start
    t1 = dateX.getTime();

    sX = event.changedTouches[0].clientX;//starting x coordinates
    sY = event.changedTouches[0].clientY;//starting y coordinates
});

$(window).bind('touchmove',function(e){
    dateX = new Date();//get current x time
    var t2 = dateX.getTime();

    var T = t2 - t1;//substract initial from it

    var s1X = Math.abs( event.changedTouches[0].clientX - sX);//get current x coordinates and substract initial from them
    var s1Y = Math.abs( event.changedTouches[0].clientY - sY);//get current y coordinates and substract initial from them

//speed of finger in px/ms
     var X=Math.abs(s1X/T);
     var Y=Math.abs(s1Y/T);

//absolute value of the speeds and if moving horizontally, dont scroll

if(X>Y){
    e.preventDefault();
}
}); 
```

# css - CSS：将 div 完全包裹在复选框周围

> ID：15596768
> 
> 赞同：5
> 
> 时间：2013-03-24T09:12:00.547
> 
> 标签：css, checkbox, background-color

我想在一个复选框周围精确地放置一个 div。我这样做是因为我想用它来设置复选框的背景颜色。

我已经尝试过了，但是粉红色的 div 突出显示在复选框下方。

[jsFiddle](http://jsfiddle.net/Tyriar/8fhyf/)

```
#checkbox{ margin:0px; 
           padding:0px;
           opacity:0.5;}

#checkbox_wrapper{ background:pink;
                  float:left;}

<div id = "checkbox_wrapper" >
      <input  type="checkbox" id = "checkbox"/>
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T09:17:57.537

设置`line-height`为`0`，默认字体大小设置`height`为`20px`。

[jsFiddle](http://jsfiddle.net/Tyriar/8fhyf/1/)

![在此处输入图像描述](../Images/f840cde4888ab07d732e8a33b1b93099.png)

```
#checkbox_wrapper {
    background:pink;
    float:left;
    line-height:0;
} 
```

PS很酷的技巧，我将来会使用它;）

## 更新

这是另一种实现方式，不需要包装器或类。不幸的是，仅适用于 IE9+、Chrome 和 Safari。[显然它违反了 CSS 2.1 规范](https://bugzilla.mozilla.org/show_bug.cgi?id=241985)。

[jsFiddle](http://jsfiddle.net/Tyriar/ppqt8/)

**HTML**

```
<input type="checkbox" /> 
```

**CSS**

```
input[type=checkbox] {
    position:relative;
}
input[type=checkbox]:before {
    content:"";
    display:block;
    background:pink;
    position:absolute;
    left:0;
    top:0;
    right:0;
    bottom:0;
    z-index:1;
    opacity:0.5;
} 
```

# visual-studio-2010 - 我可以在 Visual Studio 中只跟踪我的 TODO 任务吗？

> ID：15596772
> 
> 赞同：9
> 
> 时间：2013-03-24T09:12:36.753
> 
> 标签：visual-studio-2010, visual-studio

有没有办法只能在 Visual Studio 中过滤掉我自己的**TODO任务？**

目前有几个开发人员在工作，他们添加了自己的**TODO**。最后，如果我查看我的任务列表，列出了一大堆 TODO，我几乎无法弄清楚哪些是我的。

我尝试搜索一些 VS 网站，但没有发现任何有用的信息。如何只过滤我自己的**TODO**，或者至少过滤我接触过的文件中的所有**TODO ？**我正在使用 VS 2010。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-24T09:14:44.090

您可以添加将在任务列表中跟踪的自定义标签，如[MSDN](http://msdn.microsoft.com/en-us/library/zce12xx2.aspx)中所述。

所以，你可以只为你的东西添加一个标签，尽管你可以添加`todo me`，这意味着它仍然会被通用`todo`任务列表跟踪。

# ios - 如何在没有 UIAccelerometerDelegate 的情况下使用 iOS 加速度计

> ID：15596773
> 
> 赞同：0
> 
> 时间：2013-03-24T09:12:45.363
> 
> 标签：ios, objective-c, accelerometer, gyroscope

是否可以在不使用连续委托的情况下请求 的值`Accelerometer/Gyroscope`（例如 using`UIAccelerometerDelegate`或类似的东西`CMMotionManager startGyroUpdatesToQueue`）？我的意思是，我只想请求一次 和 的值`x`，`y`并且`z`尽可能节省资源。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T09:38:51.147

这应该有效。

```
CMMotionManager* motionManager = [[CMMotionManager alloc] init];
[motionManager startAccelerometerUpdates];
CMAccelerometerData* data = [motionManager accelerometerData];
while ( data.acceleration.x == 0 )
{
    data = [motionManager accelerometerData];
}
NSLog(@"x = %f, y = %f, z = %f.", data.acceleration.x, data.acceleration.y, data.acceleration.z); 
```

这只是您可以做些什么来使事情正常进行的一个示例。在我看来，这是一个非常糟糕的主意，但如果你想完成它，它确实可以让事情顺利进行。

该代码非常简单明了，您告诉 a`CMMotionManager`开始从加速度计或陀螺仪检索数据，然后向其请求数据。这就是为什么它不好，更新有间隔，所以在前几毫秒，从中检索到的数据`CMMotionManager`是零值的。这就是 while 循环的用途。这种类型的事情应该被卸载到另一个线程，这样 UI 就不会被阻塞，但它比它更消耗资源`UIAccelerometerDelegate`并且阻塞不会超过半秒。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-20T17:23:54.190

如果您每小时只需要 3 次数据，您可以停止使用

```
accelerometer.delegate = nil; 
```

这应该可以防止资源丢失（至少足以告诉系统您的应用目前不需要加速度计数据）

# xcode - Xcode - 每次for循环迭代更改按钮的图像

> ID：15596776
> 
> 赞同：0
> 
> 时间：2013-03-24T09:12:52.693
> 
> 标签：xcode, memory, for-loop

我正在创建一个记忆游戏，并希望在 for 循环中每次迭代更改四个按钮的图像。实际发生的是在循环的最后一次迭代之前什么都没有发生。

按下按钮时：

```
- (IBAction)bNewRound:(id)sender {
for (int i = 0; i < 10; i++) {
    numbers1[i] = arc4random()%4+1;
    NSLog(@"%i: %i", i, numbers1[i]);

    if (numbers1[i] == 1) {
        [self b1On];
    }
    if (numbers1[i] == 2) {
        [self b2On];
    }
    if (numbers1[i] == 3) {
        [self b3On];
    }
    if (numbers1[i] == 4) {
        [self b4On];
    }
    sleep(1);
    }
} 
```

更改按钮图像的方法：

```
- (void)b1On {
NSLog(@"b1 state1");
[self.button1 setBackgroundImage:[UIImage imageNamed:@"memory_green.png"] forState: UIControlStateNormal];

bool1 = FALSE;
[self b2Off];
[self b3Off];
[self b4Off];
}
- (void)b1Off {
//  NSLog(@"b1 state2");
[self.button1 setBackgroundImage:[UIImage imageNamed:@"memory_grey.png"] forState: UIControlStateNormal];

bool1 = TRUE;
} 
```

（仅适用于按钮 1，但你明白了）

我遵循日志中的代码，一切正常，每秒生成一个新数字并保存在数组中，b1On 方法（或 b2On、b3On 等）运行但行

```
[self.button1 setBackgroundImage:[UIImage imageNamed:@"memory_green.png"] forState: UIControlStateNormal]; 
```

每次迭代都不会改变图像。但是当 for 循环结束时，数组中的最后一个（随机）按钮将颜色变为绿色。

为什么 for 循环的每次迭代都没有更新图像？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T12:49:20.367

1.  永远不要`sleep()`在主线程上使用
2.  UI 更新不会立即发生。它们发生在当前运行循环的末尾，这意味着在您的方法完成之后。

您可以使用 NSTimer。像这样的东西应该工作：

```
- (void)timerFired:(NSTimer *)timer {
    _timerCount--;
    if (_timerCount <= 0) {
        [timer invalidate];
    }
    // do something
}

- (void)startTimer {
    [_timer invalidate];
    _timerCount = 10;
    _timer = [NSTimer timerWithTimeInterval:1 target:self selector:@selector(timerFired:) userInfo:nil repeats:YES];
    [[NSRunLoop currentRunLoop] addTimer:_timer forMode:NSRunLoopCommonModes];
} 
```

# android - 切换线性布局

> ID：15596783
> 
> 赞同：1
> 
> 时间：2013-03-24T09:13:37.133
> 
> 标签：android, android-layout, custom-controls

我需要创建一个复杂的切换按钮（rtl 复选框）。

我知道LinearLayout是可以点击的，我看到了下面的[例子](http://tokudu.com/2010/android-checkable-linear-layout/)

我只能通过 XML 来完成吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T19:21:55.783

LinearLayout 可以点击但不可检查。
为了获得 RTL 切换视图，我执行了以下操作：

1.  我创建了一个九路径图像来按下、选中和默认状态。

2.  创建了一个选择器：

```
<item android:drawable="@drawable/button1_on" android:state_pressed="true"/>
<item android:drawable="@drawable/button1_selected" android:state_checked="true"/>
<item android:drawable="@drawable/button1_off"/> 
```

3.创建了一个扩展 Button 并实现 Checkable 的类：

```
public class MyCheckbox extends Button implements Checkable {

private static final int[] CHECKED_STATE_SET = {android.R.attr.state_checked};
private boolean mIsChecked = false;

public MyCheckbox(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
}

public MyCheckbox(Context context, AttributeSet attrs) {
    super(context, attrs);
}

public MyCheckbox(Context context) {
    super(context);
}

@Override
public boolean isChecked() {
    return mIsChecked;
}

@Override
public void setChecked(boolean isChecked) {
    mIsChecked = isChecked;
}

@Override
public void toggle() {
    setChecked(!mIsChecked);
}

@Override
public boolean performClick() {
    toggle();
    return super.performClick();
}

@Override
protected int[] onCreateDrawableState(int extraSpace) {
    final int[] drawableState = super.onCreateDrawableState(extraSpace + 1);
    if (isChecked()) {
        mergeDrawableStates(drawableState, CHECKED_STATE_SET);
    }
    return drawableState;
}

} 
```

以同样的方式，它可以在可点击的 LinearLayout 上实现

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T09:23:22.123

使用 rtl 语言环境时，应直接交换复选框和其他视图。如果您想确保您与 RTL 语言兼容，请使用 JellyBean 中包含的新“开始”和“结束”参数（marginStart 和 marginEnd 而不是 marginLeft/Right 和 marginRight/Left）。尽管如果您需要以前版本的这种行为，您可能需要其他技巧。请注意，TextView 已经完全移动到框的另一侧：确保在这种情况下不要使用大量 WRAP_CONTENT，这可能会导致错位。

# c++ - 创建对象而不是构造函数的静态方法

> ID：15596787
> 
> 赞同：7
> 
> 时间：2013-03-24T09:14:00.323
> 
> 标签：c++, oop, design-patterns, smart-pointers

我正在我的 C++ 应用程序中创建一个 GUI，我有一个名为的类`GUIObject`，它是所有其他组件的基类，例如`Button`,`CheckBox`等`Window`。

我还有一个 class `GUIObjectsStorage`，它由所有`GUIObject`创建的 s 组成。到目前为止，我一直在使用原始指针，所以我只有这个类的构造函数`GUIObject`：

```
GUIObject::GUIObject() :
{
    GUIObjectsStorage::Instance().addObject(this);
} 
```

这对我的需要来说没问题，因为每当我想访问特定对象时，我只是从`GUIObjectsStorage`. 但是现在我正在尝试使用智能指针，因此`GUIObjectsStorage`现在存储数组`std::shared_ptr<GUIObject>`而不是原始指针，并且我不能像以前那样使用我的构造函数：

```
GUIObject::GUIObject() :
{
    GUIObjectsStorage::Instance().addObject(std::shared_ptr<GUIObject>(this));
} 
```

因为例如：

```
// Somewhere in code
std::shared_ptr<Button> bt = std::shared_ptr<Button>(new Button()); 
```

基本上我现在有两个`shared_ptr`s （一个在这里，第二个`GUIObjectsStorage`，因为它是在`Button`的构造函数中添加的），它们都有引用计数 = 1，但都指向内存中的同一个对象。然后，如果其中一个死了，对象本身也会被破坏。

所以我想出了一个想法，可能为所有继承自的类创建私有构造函数，`GUIObject`并创建一个静态方法，该方法将创建并返回`std::shared_ptr`，并将其复制添加到`GUIObjectsStorage`. 这样我就可以得到`shared_ptr`s 的引用计数 = 2，这是正确的：

```
class Button : public GUIObject 
{
private:
    // ...
    Button();
public:
    // ...
    static std::shared_ptr<Button>  create(); 
}

std::shared_ptr<Button> Button::create()
{
    std::shared_ptr<Button> bt = std::shared_ptr<Button>(new Button());
    GUIObjectsStorage::Instance().addObject(bt);

    return bt;
} 
```

通过隐藏构造函数，我可以确定没有人会以与使用`create()`方法不同的方式创建对象。

但这是设计这个的好方法吗？如果没有，有什么更好的解决方案来解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T13:20:06.977

这是工厂用于制造对象的经典用途。

也就是说，你可能不需要这个。你知道什么时候不再需要小部件吗？像这样的 GUI 管理器经常这样做。如果是这样，评论者是对的：指定对象的所有者，让它删除它，然后你就设置好了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T09:44:58.183

您可以考虑从**[enable_shared_from_this](http://en.cppreference.com/w/cpp/memory/enable_shared_from_this)**继承。

然后，在您拥有对象的 shared_ptr 之后，您可以使用**[shared_from_this()](http://en.cppreference.com/w/cpp/memory/enable_shared_from_this/shared_from_this)**来获取包含该对象的 shared_ptr。

# python - 如何在 PyDev 中编辑键绑定？

> ID：15596788
> 
> 赞同：0
> 
> 时间：2013-03-24T09:14:10.060
> 
> 标签：python, pydev, key-bindings

[这里](http://pydev.org/manual_adv_keybindings.html)说，如果你按两次 Ctrl+Shift+L，它将带你到可以编辑/查看安装中的键绑定的地方。但它在我的 PyDev 中不起作用，之后什么也没有发生键入 Ctrl+Shift+L

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T09:36:33.860

如果它不起作用，请转到“首选项”中的“常规”>“键”。

# php - 'or' 运算符在 switch PHP 中

> ID：15596799
> 
> 赞同：1
> 
> 时间：2013-03-24T09:14:54.907
> 
> 标签：php, comparison, switch-statement

好吧，我觉得这有点奇怪，但我想知道我是否可以在开关中使用“或”运算符，如下所示：

```
$pet = 'cat';

switch($pet)
    case 'cat' or 'Cat':
      echo 'Is a cat';
      break;
    case 'dog' or 'Dog':
      echo 'Is a dog';
      break;
    default:
      echo 'There is no pet';
      break;
  }; 
```

我昨天尝试过，不知何故我认为它有效，也许，今天我尝试了类似的东西但它没有奏效，我想知道是否有办法做这样的事情，以及是否有办法比较里面的两个值一件事。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-24T09:17:43.130

我不是百分百肯定，因为我有一段时间没有使用 PHP，但你应该可以写这样的东西：

```
$pet = 'cat';

switch ($pet)
{
    case 'cat':
    case 'Cat':
      echo 'Is a cat';
      break;
    case 'dog':
    case 'Dog':
      echo 'Is a dog';
      break;
    default:
      echo 'There is no pet';
      break;
}; 
```

或者，您可以使用`strtolower($pet)`在运行 switch case 之前的方法，这样您一次只需要测试一件事。

```
$pet = 'cat';

$testedString = strtolower($pet);

switch ($testedString)
{
    case 'cat':
      echo 'Is a cat';
      break;
    case 'dog':
      echo 'Is a dog';
      break;
    default:
      echo 'There is no pet';
      break;
}; 
```

# python - Python：打印来自用户输入的普通字母

> ID：15596801
> 
> 赞同：1
> 
> 时间：2013-03-24T09:15:07.390
> 
> 标签：python, printing, count, letter

有没有更好的方法来编写这段代码。虽然没有错误，但它似乎打印了我输入的所有字母都排序到一个列表中。

我想打印一个字符串中的常见字母，即使不止一个。

**这是我所拥有的**

```
mystr = input("Enter a string:")
s = list(mystr) 
letter_counter = {}
for word in mystr:
    if word in letter_counter:
         letter_counter[word] += 1
    else:
         letter_counter[word] = 1

 user_letter = sorted(letter_counter, key = letter_counter.get, reverse = True)

 number_1 = user_letter[:2]
 print(number_1) 
```

我可以打印正确字母的唯一方法是设置限制

`number_1 = user_letter[:2]`

例如，如果我输入以下内容：

```
mystr = input("Thomas Jones") 
```

在代码中，打印输出将是

```
print(number_1)       
[o], [s] 
```

这是正确的，但如果限制设置为从`2`到`3`

`number_1 = user_letter[:3]`

它将打印`[o] [s] [a]`只有一个`a`不应该存在的内容。我想要它，以便用户输入的任何数量的单词都将显示正确的重复字母**而没有**限制器。

我很自由，我不知道如何纠正这个

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-24T09:23:47.787

```
from collections import Counter
[letter for letter,count in Counter("Thomas Jones").items() if count > 1] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T09:25:36.207

您的代码产生

```
letter_counter = {'a': 1, ' ': 1, 'e': 1, 'h': 1, 'J': 1, 'm': 1, 'o': 2, 'n': 1, 's': 2, 'T': 1}
user_letter = ['o', 's', 'a', ' ', 'e', 'h', 'J', 'm', 'n', 'T'] 
```

这是正确的。

如果您只想要重复的字母，请尝试

```
user_letter = [letter for letter in letter_counter if letter_counter[letter] > 1] 
```

或类似的东西。

# php - php post无法抓取使用jquery附加的元素

> ID：15596806
> 
> 赞同：1
> 
> 时间：2013-03-24T09:15:55.567
> 
> 标签：php, jquery

这是我的代码，希望大家能看懂。
**[html表单编码]**

```
<form method='post' action='pro/handle.php'><br/>
    <input type='text' name='FirstTXT' value='First'>
    <button type='button' name='ADDINPUT'>add</button>
    <div id='SETSET'>
        <!-- prepare for adding input element by using jquery -->
    </div>
    <input type='text' name='LastTXT' value='Last'>
    <button type='submit' name='BTN' value='Submit'>submit</button>
</form> 
```

**【jquery编码】**

```
$(document).on("click","[name=ADDINPUT]",function(){
    var inp = "<input type='text' name='ADDTXT'>";
    $("#SETSET").append(inp);
}); 
```

到目前为止，上述代码（已测试）没有错误/问题，jquery 输入确实相应地附加到 #SETSET 中**。**

**[问题是]**
单击表单[提交]按钮后，当我使用php循环并从上一页获取所有内容时，php**无法**获取[ADDTXT]的元素
，结果如下：-

**[PHP编码]**

```
foreach($_post as $key=>$val){
    echo "<br/>$key : $val";
} 
```

**[结果]**

```
FirstTXT : First<br/>
LastTXT : Last<br/>
BTN : Submit<br/>
//=== Missing ADDTXT (between First & Last)===// 
```

你们知道为什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T09:35:53.677

你有一个来自该字段的数组。

代替：

```
var inp = "<input type='text' name='ADDTXT'>"; 
```

和：

```
var inp = "<input type='text' name='ADDTXT[]'>"; 
```

和 PHP：

```
if(is_array($val)) { print_r($val); } 
```

或尝试：

```
var no = 0;
 $(document).on("click","[name=ADDINPUT]",function(){
++no;
var inp = "<input type='text' name='ADDTXT"+ no +"'>";
$("#SETSET").append(inp);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T09:36:04.497

也许是：

html:

```
<form method='post' action='pro/handle.php'><br/>
    <input type='text' name='FirstTXT' value='First'>
    <button type='button' name='ADDINPUT'>add</button>
    <div id='SETSET' style='display: none;'>
        <!-- prepare for adding input element by using jquery -->
        <input type='text' id='ADDTXT' name='ADDTXT' disabled='disabled'>
    </div>
    <input type='text' name='LastTXT' value='Last'>
    <button type='submit' name='BTN' value='Submit'>submit</button>
</form> 
```

和JS：

```
$(document).on("click","[name=ADDINPUT]",function(){
    $("#SETSET").show();
    $("#ADDTXT").removeAttr("disabled");
}); 
```

# javascript - 计算发送 Ajax 请求和接收应答之间的时间

> ID：15596809
> 
> 赞同：2
> 
> 时间：2013-03-24T09:16:54.697
> 
> 标签：javascript, ajax, http, xmlhttprequest

有没有一种方法可以在发送请求和接收答案之间获得时间，还是我需要手动完成？

框架：Vanilla JS

问候， 马特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T08:11:14.073

抱歉不行。

您必须手动完成。这是[示例代码和文章](http://ditio.net/2008/08/06/detect-connection-speed-with-javascript/)。

而且技术是

```
 var duration = (endTime - startTime)/1000; 
```

这是一个工作[小提琴](http://jsfiddle.net/yahavbr/tEFpC/2/)

# php - 无法在服务器上使用 'body' => htmlentities($_POST['body']) 将文本保存到数据库，但在 localhost 上它可以工作

> ID：15596811
> 
> 赞同：-2
> 
> 时间：2013-03-24T09:17:04.583
> 
> 标签：php, mysql, html-entities

我有一个名为 $data 的数组，我将此数据发送到我的数据库插入方法。

与以下内容一起使用时效果很好：

```
'body' => $_POST['body'] 
```

但是，当我尝试：

```
'body' => htmlentities($_POST['body']) 
```

只保存了前 3 个单词，但当涉及字符**ě**时，它停在那里，文本的其他部分没有保存。

在我的数据库中，正文存储在标准文本类型 utf_8_general_ci 的正文列中。

我猜它与数据库设置无关，因为所有表都设置为 uf8_general_ci 以及表本身（与我的本地主机相同）。

最有趣的部分是，在我运行 wamp 的 localhost 机器上，它与所有这些奇怪的字符一起工作，并且在唱 htmlentities 时文本被正确保存。

只有在服务器上它不起作用。顺便提一句。如果有帮助，它只是主机。

您知道如何以与我的 localhost 或除 htmlentities 之外的任何其他功能相同的方式运行它吗？

我需要 htmlentities，因为我有像谷歌地图这样的 html 代码，它需要保存。如果没有 htmlentities，它会被错误地保存。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T09:20:14.770

在插入数据库时​​尝试使用 mysql_real_escape_string 或 mysqli_real_escape_string 或准备好的语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T09:57:01.600

Try and set the [htmlentities](http://php.net/manual/en/function.htmlentities.php) encoding to match your form data encoding.

Note the dividing PHP version 5.4.0: default encoding for htmlentities can be UTF-8 or ISO-8859-1\. Does your local machine have the same PHP version as server?

Note to all local machine users (MAMP, WAMP, LAMP, whatever): always check your PHP/MySQL versions if they match the server version. There is almost always some common function that doesn't work as expected when the testing environment isn't identical to production environment (been there, done that – once or twice...).

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-24T09:22:35.017

您可以在插入之前使用 set utf8 to mysql 。它可以在数据库中插入特殊字符。仅供参考[http://php.net/manual/en/function.mysql-set-charset.php](http://php.net/manual/en/function.mysql-set-charset.php)

# google-sheets - 如何从 Google 电子表格的 url 列表中检查文件是否存在？

> ID：15596812
> 
> 赞同：1
> 
> 时间：2013-03-24T09:17:20.980
> 
> 标签：google-sheets

假设我有一个 URL 列表，每个 URL 返回代码 200 或 404。

如何从这些 URL 中提取 HTTP 响应代码？

是否有类似的功能`importHTML`，但它只检查响应代码？

```
 |A                              |B                       |
-+-------------------------------+------------------------+
1|URL                            |response code           |
-+-------------------------------+------------------------+
2|http://example.com/huge1.tar.gz|=importHTMLResponse($A2)|
3|http://example.com/huge2.tar.gz|=importHTMLResponse($A3)|
4|http://example.com/huge3.tar.gz|=importHTMLResponse($A4)|
... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T15:40:06.993

然后，您必须将代理服务正确设置为已知的 url

```
importHTMLResponse(http://MYPROXYSERVER/reponsecode?url=$A2) 
```

或类似的东西。代理服务将运行您喜欢的任何语言，只需点击提供的 url 返回状态代码。

# windows-runtime - WinRT Xaml 工具包列系列错误？

> ID：15596813
> 
> 赞同：4
> 
> 时间：2013-03-24T09:17:36.350
> 
> 标签：windows-runtime, winrt-xaml, winrt-xaml-toolkit

我有一个来自[Win RT Xaml Toolkit](https://github.com/xyzzer/WinRTXamlToolkit)的图表，我想显示这样的 ColumnSeries：

```
<charting:Chart Name="columnChart" Grid.Row="1" Grid.Column="1" Width="400" Height="400">
    <charting:Chart.Series>
        <charting:ColumnSeries  
             ItemsSource="{Binding items}"
             IndependentValueBinding="{Binding Name}"
             DependentValueBinding="{Binding Value}" 
             IsSelectionEnabled="True">
        </charting:ColumnSeries>  
    </charting:Chart.Series>
</charting:Chart> 
```

但我总是收到这个错误：

> WinRT 信息：无法将“WinRTXamlToolkit.Controls.DataVisualization.Charting.ColumnSeries”类型的实例添加到“System.Collections.ObjectModel.Collection<WinRTXamlToolkit.Controls.DataVisualization.Charting.ISeries>”类型的集合中

这可能是什么原因？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T11:47:51.947

好的，我找到了，

错误是**ColumnSeries**缺少**Title**属性，如下所示：

```
<charting:Chart Name="columnChart" Grid.Row="1" Grid.Column="1" Width="400" Height="400">
    <charting:Chart.Series>
        <charting:ColumnSeries  
             Title="Chart Title"
             ItemsSource="{Binding items}"
             IndependentValueBinding="{Binding Name}"
             DependentValueBinding="{Binding Value}" 
             IsSelectionEnabled="True">
        </charting:ColumnSeries>  
    </charting:Chart.Series>
</charting:Chart> 
```

似乎**Title**属性是强制性的。

# d3.js - 多行 d3

> ID：15596814
> 
> 赞同：1
> 
> 时间：2013-03-24T09:17:42.607
> 
> 标签：d3.js

我正在尝试用 d3 做一个简单的情节。当我一次只绘制一行时它工作正常，但我想让我的代码更通用。

我的数据采用这种格式（请注意，2 组数据可能包含不同数量的点，并且我的 2 组度量之间的时间不完全同步）：

> var data = [{key: "kmm03", value:[{"time":1364108443000,"mesure":"1.6299999952316284"},{"time":1364108503000,"mesure":"1.100000023841858"},{"time" :1364108563000,"mesure":"1.159999966621399"}}, {key:"kmm04", value:[{"time":1364108416000,"mesure":"2.690000057220459"},{"time":1364108476000,"mesure": "3.319999933242798"},{"time":1364108536000,"mesure":"3.140000104904175"},{"time":1364108596000,"mesure":"2.9800000190734863"}}]

现在我尝试像这样绘制它，但我无法让 svg 行显示：

```
 var margin = {top: 20, right: 40, bottom: 20, left: 40};
    var width = 780 - margin.left - margin.right,
    height = 250 - margin.top - margin.bottom;

    var time_scale = d3.time.scale()
        //.domain(time_extent)
        .domain([1364108443000, 1364112559000])
        .range([0, width]);

    var mesure_scale = d3.scale.linear()
        .domain([0,10])
        .range([height, 0]);

    var vis = d3.select("#box1")
    .append("svg:svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

    var time_axis = d3.svg.axis()
        .scale(time_scale)
        .orient("bottom");
    var mesure_axis = d3.svg.axis()
        .scale(mesure_scale)
        .orient("left");

    var set_axis_t = vis.append("svg:g")
      .attr("transform", "translate(0, " + height +")")
      .call(time_axis);

    var set_axis_m = vis.append("svg:g")
    .attr("transform", "translate(0, 0)")
    .call(mesure_axis);

    var line = d3.svg.line()
        .x(function(d){return time_scale(d.time);})
        .y(function(d){return mesure_scale(d.mesure);});

    var group = vis.selectAll('path')
       .data(data)
       .enter().append('path')
       .attr("d", line); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-24T17:08:01.520

d3 [selection.data()](https://github.com/mbostock/d3/wiki/Selections#wiki-data)接受一个元素数组。在您的代码中，数据 var 是两个对象的数组。当您在 d 上调用 line 时，d3 会在每个元素中查找时间和度量属性。这些不存在，因此没有附加路径。

您要渲染的数量和时间值在每个对象的 value 属性中嵌套一层。

`.attr('d', line)`要绘制这些，请将`.attr("d", function(d) {return line(d.value);});`

[这是一个工作版本。](http://bl.ocks.org/andrewStaroscik/5232640)为了让它工作，我做了一些其他的改变：

1-缺少值数组的右括号

2-`.selectAll('path')`不适用于数据，因为它与轴中的路径元素冲突。为了解决这个问题，我为类 visline 分配了数据路径并用于`.selectAll('.visline')`访问它们

# ruby-on-rails - 未定义的局部变量或方法“hej”

> ID：15596817
> 
> 赞同：0
> 
> 时间：2013-03-24T09:18:02.777
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

您好，我对 ruby​​ on rails 完全陌生。

我收到此错误：未定义的局部变量或方法“hej”

在我的 application.html.erb 我有：

```
 <%=hej%> 
```

在 application.controller 我有这个：

```
class ApplicationController < ActionController::Base
    def index
       hej = "Hej hans" #also tried @hej = "Hej hans"
    end
end 
```

__URL/主页/索引

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-24T09:19:50.830

您在控制器中将 hej 设置为局部变量，因此它在视图中不可用。当您使用 = 为其赋值时，方法中的非大写单词（如此处的“hej”）将被视为局部变量。如果你想让它对其他方法可用，并且在 Rails 中对视图可用，你需要通过调用它'@hej' 而不仅仅是'hej'来使它成为一个实例变量。要在 Rails 的视图中调用该实例变量，您需要使用它的全名“@hej”——@ 符号很重要。

需要是：

```
def index
  @hej = "Hej hans"
end 
```

在视野中

```
<%= @hej %> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T09:28:25.503

*hej*是一个局部变量。*它们只存在于它的范围内（当前块） - 并且对您的视图*不可用。

*@hej*是一个实例变量 - 可用于类中的所有方法。它也可供您*查看*。您还需要在视图中使用@hej 调用它。

您需要在 hej 变量 (@hej) 中添加一个 @。

# android - Android 浮点乘法系数 0.004739

> ID：15596820
> 
> 赞同：1
> 
> 时间：2013-03-24T09:18:34.053
> 
> 标签：android, math, floating-point, floating-accuracy

谁能向我解释为什么`speed`计算关闭？
这是一个浮点计算。我在日志打印中显示（下）所有涉及的因素。
根据我的手算机：

> 长度：sqrt(3.497924^2 + (-1.134711)^2) = 3.67736881
> 速度：1.05 * 3.67736881 = **3.86123725**

这与打印结果**3.879624 相差 4.739 10^-3**

编码：

```
 float factor = yTouch(paddle, ballBounds);
        float speed = SPEED_TRANSFER[level] * PointF.length(mSpeed.x, mSpeed.y);
        double alpha = Math.PI/2;
        double beta = Math.atan2(mSpeed.y, mSpeed.x);
        double tau = -(2*alpha+beta);
        Log.v("debug", String.format("speed(%f) mSpeed(%f,%f) transfer(%2.2f) 
            length(%f) Original tau(%3.2f)", speed, mSpeed.x, mSpeed.y, 
            SPEED_TRANSFER[level], PointF.length(mSpeed.x, mSpeed.y), tau/Math.PI)); 
```

日志：

```
03-24 10:48:53.421: V/debug(3236): speed(3.879624) mSpeed(3.497924,-1.134711) transfer(1.05) length(3.677369) Original tau(-0.90) 
```

**编辑**
我试过了，直接乘法是对的。

```
Log.v("debug", "Direct multiplication:" + (1.05f * 3.677369f) );

03-24 11:49:08.687: V/debug(7644): Direct multiplication:3.8612373 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T12:27:55.570

`SPEED_TRANSFER[level]`你能在你的日志行中打印更多的数字吗？您正在查看小数点后 3 位的错误，但仅显示其中一个因素的 2 位。例如，如果`SPEED_TRANSFER[level] == 1.055`结果是正确的（尽管我希望这会在您的 Log 行中打印为 1.06，但这是另一回事）。

# android - 如何在android中为不同的屏幕尺寸设置布局

> ID：15596822
> 
> 赞同：2
> 
> 时间：2013-03-24T09:19:27.610
> 
> 标签：android, xml, android-layout

我正在开发一个应用程序，其中有一些文本字段和按钮，当我在不同屏幕尺寸的设备上运行它时，它显示出意外的结果，如下图所示！

[图 1] [http://oi45.tinypic.com/25yvon4.jpg](http://oi45.tinypic.com/25yvon4.jpg) [图 2] [http://oi45.tinypic.com/xmlqns.jpg](http://oi45.tinypic.com/xmlqns.jpg)

在第一张图片中，由于屏幕尺寸大，底部留有一些空间，而在第二张图片中，由于屏幕尺寸小，最后一行按钮被隐藏。对于按钮，我正在使用表格布局。

有什么办法可以解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T09:27:49.403

这是一个广泛的话题，首先需要空间理解。这是一个很好的起点 - [http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

长话短说，始终使用点单位 (dps)，尽量避免在代码中硬编码像素，以相对方式定位项目（即：相对于其他对象 - RelativeLayout、LinearLayout 等）并确保利用“values-...”文件夹的强大功能。例子

值-xhdpi (XH)

值-hdpi (H)

值-mdpi (M)

价值观-土地（景观）

values-sw600dp（最小宽度至少600dp）

……

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T13:40:55.300

如果您关心各种屏幕尺寸，请使用 layout、layout-large 和 layout-xlarge 资源文件夹自定义您的布局文件。在手机、7 英寸和 10 英寸平板电脑上测试这些布局，以覆盖您的所有基础。

对于小于 4" 屏幕的小型手机 (qvga) 以及较旧的设备 (wvga)，制作自定义布局文件（在布局文件夹中）并在检测到这些类型的设备时在您的 java 代码中动态引用它们。同样，尽可能多地在这些较旧和较小的手机上进行测试。从 Sony Device Loaner Program 借用一些手机，以便完成真实世界的测试。

最后，如果您想在较小的屏幕上进行垂直滚动，请使用 ScrollView 嵌入您的布局。不要疯狂地尝试将所有内容都放在较小的屏幕上。有时滚动是您的用户会理解的自然解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T09:26:30.187

如果您想解决您的问题，您必须为所有设备制作屏幕。阅读以下文档以了解不同的屏幕：-

[http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

或者

您可以使用权重或布局权重来防止此问题。

# c++ - QT 多文件 C++ 变量

> ID：15596824
> 
> 赞同：0
> 
> 时间：2013-03-24T09:19:38.770
> 
> 标签：c++, file, qt, variables

我在 QT 中的变量有一点问题。虽然它可能更像是一个结构问题，而不是一个实际的 QT 问题......

我正在尝试编写一个简单的数据库应用程序，用户可以在其中创建一个新数据库，然后添加/删除和插入条目。

到目前为止，这些文件都在我的项目中（-头文件）：

```
add.cpp 
database.cpp
main.cpp
mainwindow.cpp 

add.ui
mainwindow.ui 
```

我希望用户在 mainwindow.cpp 中创建或加载数据库。

```
Database* data1 = new Database(); 
```

我现在的问题是如何访问 add.cpp 中的对象 data1 ？

抱歉，我来自控制台 c++ - 将所有内容放在文件背景中，还没有阅读回答问题的教程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T09:23:12.547

一种方法是创建一个命名空间并使对象在该命名空间中全局可用。不过我不推荐这个，因为它破坏了封装。
其次，将您的类设为 a `Singleton`，这样您就可以保持封装，但可以通过`static`-methods 在任何地方访问您的对象。

在[这里](http://en.wikipedia.org/wiki/Singleton_pattern)寻找`Singleton`。

这意味着创建您的构造函数`private`并使用一种`static`方法来创建数据库对象的实例或访问现有对象。

# linux - shell脚本中的$@和$*有什么区别？

> ID：15596826
> 
> 赞同：6
> 
> 时间：2013-03-24T09:19:44.513
> 
> 标签：linux, bash, shell

在我的`script.sh`：

```
aa=$@
bb=$*
echo $aa
echo $bb 
```

运行时：

```
 source script.sh a b c d e f g 
```

我得到：

```
a b c d e f g
a b c d e f g 
```

`$@`和 和有什么不一样`$*`？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-24T09:20:29.780

`$*`和之间没有区别，但是和`$@`之间有区别。`"$@"``"$*"`

```
$ cat 1.sh
mkdir "$*"

$ cat 2.sh
mkdir "$@"

$ sh 1.sh a "b c" d

$ ls -l
total 12
-rw-r--r-- 1 igor igor   11 mar 24 10:20 1.sh
-rw-r--r-- 1 igor igor   11 mar 24 10:20 2.sh
drwxr-xr-x 2 igor igor 4096 mar 24 10:21 a b c d 
```

我们为脚本提供了三个参数（和） `a`，但在 "$*" 中它们都被合并为一个参数。`b c``d``a b c d`

```
$ sh 2.sh a "b c" d

$ ls -l
total 24
-rw-r--r-- 1 igor igor   11 mar 24 10:20 1.sh
-rw-r--r-- 1 igor igor   11 mar 24 10:20 2.sh
drwxr-xr-x 2 igor igor 4096 mar 24 10:21 a
drwxr-xr-x 2 igor igor 4096 mar 24 10:21 a b c d
drwxr-xr-x 2 igor igor 4096 mar 24 10:21 b c
drwxr-xr-x 2 igor igor 4096 mar 24 10:21 d 
```

您可以在此处看到，这`"$*"`意味着始终只有一个参数，并且`"$@"`包含与脚本一样多的参数。"$@" 是一个特殊的标记，意思是“将每个单独的参数用引号括起来”。所以`a "b c" d`变成（或更确切地说是保持）`"a" "b c" "d"`而不是`"a b c d"`（`"$*"`）或`"a" "b" "c" "d"`（`$@`或`$*`）。

另外，我会推荐这个关于主题的美丽读物：

[http://tldp.org/LDP/abs/html/internalvariables.html#ARGLIST](http://tldp.org/LDP/abs/html/internalvariables.html#ARGLIST)

# java - Java，而不是 while(true) 循环

> ID：15596828
> 
> 赞同：-3
> 
> 时间：2013-03-24T09:20:03.257
> 
> 标签：java, loops, callback, while-loop

我开发了虚拟键盘模块，它包含 2 个类

1.  KBM（模块本身）（在输入时它将字符串数据的值设置为我在 KBMListener 中键入的文本，并且布尔值在 KBMListener 中更改为 true）
2.  知识库监听器
3.  主机

mainFrame 在做什么：

当我运行程序 MainFrame 加载 GUI 并在“public void run()”中启动“while(true)”循环。这个循环看起来像：

```
while(true){
    if(status_changed){
        jTextArea.setText(getKbml().getData());   
        getKbml.setStatus_changed(false);
    }
    sleep(500);
} 
```

布尔状态_changed 在键盘侦听器中更改。

KBM 是虚拟键盘。当用户键入文本并按下回车键时，它会将字符串数据设置为文本类型，并且在 KBMListener 中将 boolean status_changed 设置为 true。

KBML 只是将 MainFrame 与 KBM 连接起来，并在用户每次点击 mainframe 中的 textarea 时从 KBM 加载键盘。

我想要的是每 0.5 秒或按下回车键时立即为大型机获取价值。

虽然循环运行良好，但在 1.6GHz 双核处理器上 CPU 使用率约为 12%。我听说过回调，但我不明白它是如何工作的。我希望有人可以帮助我...请尽量避免文件监听器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T09:24:59.503

您要研究的是观察者设计模式。它使用一个接口来通知“侦听器”的变化，并且通常是无限循环的答案。您可以在这里找到一个简单的实现示例 + 更多信息：http: [//java.dzone.com/articles/design-patterns-uncovered](http://java.dzone.com/articles/design-patterns-uncovered)

或者干脆在网上搜索“observer pattern java”。

# android - 无法在 Android 中使用 XMPP 客户端登录到 ejabberd 服务器

> ID：15596830
> 
> 赞同：4
> 
> 时间：2013-03-24T09:20:18.230
> 
> 标签：android, xmpp, ejabberd

我正在尝试使用 Android 中的 XMPP 客户端连接并登录到 ejabberd 服务器。XMPP 客户端连接到服务器，但没有登录。我收到异常消息作为**No response from the server**。我不知道问题出在哪里。

以下是代码：

XMPP 客户端.java

```
package org.apache.android.xmpp;

import android.app.Activity;
import android.os.Bundle;
import android.os.Handler;
import android.util.Log;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.EditText;
import android.widget.ListView;
import org.jivesoftware.smack.PacketListener;
import org.jivesoftware.smack.XMPPConnection;
import org.jivesoftware.smack.filter.MessageTypeFilter;
import org.jivesoftware.smack.filter.PacketFilter;
import org.jivesoftware.smack.packet.Message;
import org.jivesoftware.smack.packet.Packet;
import org.jivesoftware.smack.util.StringUtils;

import java.util.ArrayList;

public class XMPPClient extends Activity {

private ArrayList<String> messages = new ArrayList();
private Handler mHandler = new Handler();
private SettingsDialog mDialog;
private EditText mRecipient;
private EditText mSendText;
private ListView mList;
private XMPPConnection connection;

/**
 * Called with the activity is first created.
 */
@Override
public void onCreate(Bundle icicle) {
    super.onCreate(icicle);
    Log.i("XMPPClient", "onCreate called");
    setContentView(R.layout.main);

    mRecipient = (EditText) this.findViewById(R.id.recipient);
    Log.i("XMPPClient", "mRecipient = " + mRecipient);
    mSendText = (EditText) this.findViewById(R.id.sendText);
    Log.i("XMPPClient", "mSendText = " + mSendText);
    mList = (ListView) this.findViewById(R.id.listMessages);
    Log.i("XMPPClient", "mList = " + mList);
    setListAdapter();

    // Dialog for getting the xmpp settings
    mDialog = new SettingsDialog(this);

    // Set a listener to show the settings dialog
    Button setup = (Button) this.findViewById(R.id.setup);
    setup.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) {
            mHandler.post(new Runnable() {
                public void run() {
                    mDialog.show();
                }
            });
        }
    });

    // Set a listener to send a chat text message
    Button send = (Button) this.findViewById(R.id.send);
    send.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) {
            String to = mRecipient.getText().toString();
            String text = mSendText.getText().toString();

            Log.i("XMPPClient", "Sending text [" + text + "] to [" + to + "]");
            Message msg = new Message(to, Message.Type.chat);
            msg.setBody(text);
            connection.sendPacket(msg);
            messages.add(connection.getUser() + ":");
            messages.add(text);
            setListAdapter();
        }
    });
}

/**
 * Called by Settings dialog when a connection is establised with the XMPP server
 *
 * @param connection
 */
public void setConnection
        (XMPPConnection
                connection) {
    this.connection = connection;
    if (connection != null) {
        // Add a packet listener to get messages sent to us
        PacketFilter filter = new MessageTypeFilter(Message.Type.chat);
        connection.addPacketListener(new PacketListener() {
            public void processPacket(Packet packet) {
                Message message = (Message) packet;
                if (message.getBody() != null) {
                    String fromName = StringUtils.parseBareAddress(message.getFrom());
                    Log.i("XMPPClient", "Got text [" + message.getBody() + "] from [" + fromName + "]");
                    messages.add(fromName + ":");
                    messages.add(message.getBody());
                    // Add the incoming message to the list view
                    mHandler.post(new Runnable() {
                        public void run() {
                            setListAdapter();
                        }
                    });
                }
            }
        }, filter);
    }
}

private void setListAdapter
        () {
    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
            R.layout.multi_line_list_item,
            messages);
    mList.setAdapter(adapter);
}
} 
```

SettingDialog.java

```
package org.apache.android.xmpp;

import android.app.Dialog;
import android.util.Log;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import org.jivesoftware.smack.ConnectionConfiguration;
import org.jivesoftware.smack.XMPPConnection;
import org.jivesoftware.smack.XMPPException;
import org.jivesoftware.smack.packet.Presence;

/**
 * Gather the xmpp settings and create an XMPPConnection
 */
public class SettingsDialog extends Dialog implements android.view.View.OnClickListener {
private XMPPClient xmppClient;

public SettingsDialog(XMPPClient xmppClient) {
    super(xmppClient);
    this.xmppClient = xmppClient;
}

protected void onStart() {
    super.onStart();
    setContentView(R.layout.settings);
    getWindow().setFlags(4, 4);
    setTitle("XMPP Settings");
    Button ok = (Button) findViewById(R.id.ok);
    ok.setOnClickListener(this);
}

public void onClick(View v) {
    String host = "10.0.2.2";//getText(R.id.host);
    String port = "5222";//getText(R.id.port);
    String service = "@domain";//getText(R.id.service);
    final String username = "userid@domain";//getText(R.id.userid);
    final String password = "password";//getText(R.id.password);

    // Create a connection
    ConnectionConfiguration connConfig =
            new ConnectionConfiguration(host, Integer.parseInt(port), service);
    final XMPPConnection connection = new XMPPConnection(connConfig);

    new Thread(new Runnable()
    {
        public void run()
        {
            try {
                connection.connect();
                Log.i("XMPPClient", "[SettingsDialog] Connected to " + connection.getHost());
            } catch (XMPPException ex) {
                Log.e("XMPPClient", "[SettingsDialog] Failed to connect to " + connection.getHost());
                Log.e("XMPPClient", ex.toString());
                xmppClient.setConnection(null);
            }
            try {
                connection.login(username, password);
                Log.i("XMPPClient", "Logged in as " + connection.getUser());

                // Set the status to available
                Presence presence = new Presence(Presence.Type.available);
                connection.sendPacket(presence);
                xmppClient.setConnection(connection);
            } catch (XMPPException ex) {
                Log.e("XMPPClient", "[SettingsDialog] Failed to log in as " + username);
                Log.e("XMPPClient", ex.toString());
                    xmppClient.setConnection(null);
            }
        }
    }).start();

    dismiss();
}

private String getText(int id) {
    EditText widget = (EditText) this.findViewById(id);
    return widget.getText().toString();
}
} 
```

请任何人都可以提供帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T15:57:20.203

如果您在本地运行服务器，那么您只需将主机设置为**localhost**，但服务（即 XMPP 域）需要设置为服务器上配置的任何内容。它不会是**@domain**，而是**domain**。

# android - 使用基本 web 视图时出错 - Android

> ID：15596831
> 
> 赞同：0
> 
> 时间：2013-03-24T09:20:23.843
> 
> 标签：android, android-webview

我正在`webview`Android 上尝试一个非常简单的应用程序。虽然程序构建正常，但存在我无法解码的运行时错误。布局：

```
<?xml version="1.0" encoding="utf-8" ?>

   <Webview xmlns:android="http://schemas.android.com/apk/res/android"
       android:id="@+id/helloWebview"
       android:layout_width="fill_parent"
       android:layout_height="fill_parent"
     /> 
```

编码：

```
/* Program to create sample webview.
 * Steps:
 * 1\. Create webview.
 * 2\. Show some website in it.
 * 3\. Show some transitions as well.
 */

package com.sriram.hellowebview;

import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.view.Menu;
import android.webkit.WebView;

public class helloWebview extends Activity {

    WebView myWebview;
    String url = "http://www.google.com";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_hello_webview);

        Log.v(this.toString(), "Starting activity.");

        myWebview = (WebView) findViewById(R.id.helloWebview);

        Log.v(this.toString(), "Getting settings.");
        //myWebview.getSettings().setJavaScriptEnabled(true);

        Log.v(this.toString(), "Loading URL now.");
        myWebview.loadUrl(url);
        Log.v(this.toString(), "Loaded URL.");

        //open all links within the same webview.
        //myWebview.setWebViewClient(new WebViewClient());
        //Log.v(this.toString(), "All done here.");
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_hello_webview, menu);
        return true;
    }
} 
```

观察到的错误：

```
03-24 14:48:27.618: E/AndroidRuntime(388): Uncaught handler: thread main exiting due to uncaught exception
03-24 14:48:27.658: E/AndroidRuntime(388): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.sriram.hellowebview/com.sriram.hellowebview.helloWebview}: android.view.InflateException: Binary XML file line #3: Error inflating class Webview 
```

我在大型项目中遇到过详细说明 OutOfMemoryExceptions 的类似错误，但由于上述代码是项目的全部内容，因此这似乎不是一个可能的解释。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T09:35:08.460

您的布局中存在拼写错误：WebView 需要用 CamelCase 编写。没有像“Webview”这样的视图。因此，您的布局应如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<WebView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/helloWebview"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T09:33:34.420

您收到此错误，因为您没有任何 webview 的父布局。

将您的 xml 文件更改为：

```
<?xml version="1.0" encoding="utf-8" ?>

   <LinearLayout  xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
   />

   <WebView
       android:id="@+id/helloWebview"
       android:layout_width="fill_parent"
       android:layout_height="fill_parent"
     /> 
```

希望能帮助到你。

# jquery - jQuery :: 如何在 div 中加载新页面时引发事件

> ID：15596833
> 
> 赞同：0
> 
> 时间：2013-03-24T09:20:39.467
> 
> 标签：jquery

我在 asp.net 中有 2 页。父.aspx 和子.aspx。parent.aspx 上有一个超链接，它将 child.aspx 加载到 div 中。此加载是使用 jquery 的 load 方法完成的。Child.aspx 有一个类似的代码

```
 $(".lnkButton").click(function() 
  { 
         /* code */
  } 
```

现在我的问题是 - 每当我从 parent.aspx 加载 child.aspx 页面时，我想从 child.aspx 调用特定事件。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T09:32:55.437

只需选择您的目标元素并在其上触发事件，如下所示：

```
$(function(){  //ready
  $(".lnkButton").click(function() { 
    $('.childDiv').load('child.aspx',function(){ //load complete
      $('#parentDiv').trigger('click');  //replace 'click' with your event
    });
  });
}); 
```

# asp.net - 无法加载文件或程序集“Oracle.DataAccess”或其依赖项之一。试图加载格式不正确的程序

> ID：15596834
> 
> 赞同：15
> 
> 时间：2013-03-24T09:20:44.967
> 
> 标签：asp.net, oracle, iis-7, windows-server-2008, gac

我在 IIS 7.0 Windows Server 2008 R2 64bit 上安装了一个 Web 应用程序。我指的是 oracle.DataAccess.dll；当我尝试访问应用程序时，我收到以下消息：“无法加载文件或程序集 'Oracle.DataAccess' 或其依赖项之一。尝试加载格式不正确的程序。” 有人可以帮我吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-24T09:25:13.770

使用“11.2 Release 3 (11.2.0.2.1) with Xcopy Deployment”版本的 Oracle 数据访问组件安装过程似乎被破坏了。要解决此问题，您必须在 GAC 中注册缺少的程序集。要针对此特定版本执行此操作，请从管理员控制台中运行以下命令：

```
md C:\Windows\assembly\GAC_32\Oracle.DataAccess\4.112.2.0__89b483f429c47342\

copy %ORACLE_HOME%\odp.net\bin\4\Oracle.DataAccess.dll C:\Windows\assembly\GAC_32\Oracle.DataAccess\4.112.2.0__89b483f429c47342\

md C:\Windows\assembly\GAC_32\Oracle.Web\4.112.2.0__89b483f429c47342\

copy %ORACLE_HOME%\asp.net\bin\4\oracle.web.dll C:\Windows\assembly\GAC_32\Oracle.Web\4.112.2.0__89b483f429c47342\ 
```

请注意，这仅注册 DLL，但不注册其他语言资源。因此，如果您使用除英语之外的任何其他语言（de、es、fr、it、ja、ko、pt-BR、zh-CHS 和 zh-CHT），那么您还需要使用相应的资源注册这些语言文件。

如果您在计算机上安装了 Visual Studio，则可以发出以下命令：

```
gacutil /i %ORACLE_HOME%\odp.net\bin\4\Oracle.DataAccess.dll
gacutil /i %ORACLE_HOME%\asp.net\bin\4\oracle.web.dll 
```

注意：在 Visual Studio 安装文件夹下查找 gacutil.exe。

希望这可以帮助。

PS 或者你可以试试[这个](http://rambletech.wordpress.com/2011/09/26/could-not-load-file-or-assembly-oracle-dataaccess-error/)。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-11-13T22:04:55.167

[我通过将应用程序池的“启用 32 位应用程序”设置为 true 来](http://www.codeproject.com/Questions/178312/Could-not-load-file-or-assembly-Oracle-DataAccess)避免在 GAC 中注册 11.2 Release 5 程序集。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2014-04-04T13:12:57.830

您可能需要在 AppPool 中启用 32 位应用程序。

[http://www.alexjamesbrown.com/development/could-not-load-file-or-assembly-chilkatdotnet2-or-one-of-its-dependencies-an-attempt-was-made-to-load-a-程序格式不正确/](http://www.alexjamesbrown.com/development/could-not-load-file-or-assembly-chilkatdotnet2-or-one-of-its-dependencies-an-attempt-was-made-to-load-a-program-with-an-incorrect-format/)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-03-24T09:28:04.980

您需要使用 GAC util 在实时服务器上注册该 dll。还要检查它是否存在于 bin 文件夹中。有时在 bin 目录中缺少 dll 会导致相同的错误

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-10-30T18:10:27.047

就我而言，我使用 VS 2010，Oracle v11 64 位。我可能会以 64 位模式发布（在 Web 项目配置中设置为“任何 Cpu”模式），我可能会将生产服务器上的 IIS 设置为 32 位兼容性为 false（因为服务器是 64 位的，我喜欢利用它）。

然后解决“Could not load file or assembly 'Oracle.DataAccess'”的问题（有时会出现“Compiler Error Message: CS1705: Assembly”错误）：

*   在本地 PC 和服务器中安装了 Oracle v11，64 位。
*   在所有本地开发 PC 中，我引用了 64 位的 Oracle.DataAccess.dll (C:\app\user\product\11.2.0\client_1\odp.net\bin\4)。
*   在 IIS 生产服务器中，我将 32 位兼容性设置为 False。
*   System.Web.Mvc.dll 的 Web 项目中的参考是本地 PC 中的版本 v3.0.0.1，但是在生产中仅安装了 MVC 版本 3.0.0.0。因此，该修复程序在本地使用 MVC 3.0.0.0 而不是 3.0.0.1 并在服务器上再次发布，并且可以正常工作。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-09-15T15:31:41.510

从以下位置安装 64 位 ODAC 11.2 Release 3 (11.2.0.2.1) Xcopy for Windows x64：

[http://www.oracle.com/technetwork/database/windows/downloads/index-090165.html](http://www.oracle.com/technetwork/database/windows/downloads/index-090165.html)

为我修好了。确保按照自述文件中的第 4 步更新您的系统路径。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-09-14T22:59:24.897

是的，这是我有时遇到的一个非常烦人的问题。主要问题是 Web 应用程序错误地使用了 32 位 Oracle.DataAccess.dll 而不是 64 位，或者相反。有一些解决方案。

**1.如果您的应用程序是 64 位的并且需要运行 32 位的 Oracle.DataAccess.dll，请在应用程序池中**启用 32 位应用程序。****

 **转到 IIS 并在应用程序池的高级设置中将“启用 32 位应用程序”选项设置为 true。

**2.修正引用dll。**

参考路径应该是Oracle安装过程配置的系统参考路径。但是，在某些情况下，例如安装或更新新的 Oracle 版本、最新的 DLL 不会更新旧的、路径已更改或 Web 应用程序项目中的引用未更新。因此，我们应该手动更正 Oracle.DataAccess 引用。

转到 Web 应用程序并删除 Oracle.DataAccess 引用。并为 Oracle.DataAccess 添加新的参考。它必须是您的 oracle 安装路径中的正确 Oracle.DataAccess.dll。例如：

C:\Oracle\product\12.2.0\client_1\odp.net\bin\4\Oracle.DataAccess.dll

> ODP.NET 和从属非托管 DLL 不匹配 为了强制使用 Oracle.DataAccess.dll 程序集及其非托管 DLL 的正确版本，如果 Oracle.DataAccess.dll 注意到它加载了一个不匹配版本的从属非托管 DLL，则会引发异常.
> 
> [https://docs.oracle.com/cd/E11882_01/win.112/e23174/InstallODP.htm#ODPNT152](https://docs.oracle.com/cd/E11882_01/win.112/e23174/InstallODP.htm#ODPNT152)

**3.解决问题的简单快捷方法**（但不是正确的解决方案）是直接覆盖从oracle安装路径复制的Oracle.DataAccess.dll文件（例如：C:\Oracle\product\12.2.0\client_1\odp .net\bin\4\ ) 到您的 Web 应用程序的 Bin 文件夹。

希望这对您有所帮助。祝你好运。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-07-22T09:58:45.297

George Netu 发布的公认答案帮助解决了我的问题，但我不得不摆弄一些额外的小事：

**问题描述：**

在*C:\Windows\assembly*下，我找到了两个*Oracle.DataAccess*项（GAC 文件夹？）。Relict，由多个 Oracle 客户端安装引起。一项显示版本 2.112.1.0 但**实际上是**版本 2.121.2.0（通过*Properties->Version*可见）。这种不一致就是错误。

**第一次无益的尝试：**

*   尝试在运行时/管理员版本中卸载并重新安装 Oracle 完整客户端
*   尝试重新部署正确的 .dll
*   尝试在 GAC 几次复制新安装的程序集，如上面通过命令提示符接受的答案中所述（但这并没有解决版本不匹配问题..）
*   试图使用`gacutil /i ...`

**最终成功：**

我登陆了[Gacutil.exe msdn 页面](https://msdn.microsoft.com/en-us/library/ex0ss12c(v=vs.110).aspx)，最终能够从*C:\Windows\assembly*文件夹中删除这些项目。

```
gacutil /u Oracle.DataAccess, Version=2.112.1.0, Culture="Neutral",PublicKeyToken=45e343aae32233ca
gacutil /u Oracle.DataAccess, Version=2.212.2.0, Culture="Neutral",PublicKeyToken=45e343aae3223abc
gacutil /u Oracle.Web, Version=2.112.1.0, Culture="Neutral",PublicKeyToken=45e343aae3223def 
```

之后，我重复了这两个`gacutil /i ...`命令，两个 dll 以一致的版本出现在那里。

最后重新启动IIS，它可以工作..

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-12-29T12:09:54.480

我有同样的问题。

我转到一般部分的项目属性，将平台目标设置为 64 位（x64），我的问题解决了

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-11-19T17:27:53.593

在应用程序池中 ---> 单击高级设置 --> 启用 32 位选项

看这张图片

[![在此处输入图像描述](../Images/ae6b11fcfd9119437cc774c3dbe6241d.png)](https://i.stack.imgur.com/o0FIm.png)**

# objective-c - Objective-C 中有队列数据结构吗？

> ID：15596836
> 
> 赞同：0
> 
> 时间：2013-03-24T09:21:35.483
> 
> 标签：objective-c

Objective-C 中是否有像 C# 或 Java 一样的队列数据结构？如果不是，我应该使用什么数据结构来进行入队和出队？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T09:27:43.053

如果队列中没有太多元素，`NSMutableArray`则适合。当移动元素的开销确实成为问题时，您应该考虑使用 Objective-C++ 和`std::dequeue`.

# android - 关于android中的警报管理器

> ID：15596838
> 
> 赞同：0
> 
> 时间：2013-03-24T09:21:53.863
> 
> 标签：android, alarmmanager, android-preferences, android-alarms

我已经制作了一个警报管理器来安排一些用户定义的事件并且它工作成功然后我制作了一个设置屏幕（来自首选项活动）让用户更改一些设置，例如（警报前几天）

我的问题是如果我在活动开始日期之前安排活动 3 天，那么用户将前几天从设置更改为仅一天

然后我在活动开始日期前 1 天再次安排活动，这意味着用户将收到两次通知

*   3天前的一个
*   1天前

如果这是真的，那么我该如何防止这种情况发生

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T09:37:47.533

每个警报都伴随着一个 PendingIntent，它具有唯一的哈希标识符。当使用相同的标识符时，该警报将覆盖前者，如文档中所述：http: [//developer.android.com/reference/android/app/AlarmManager.html#set](http://developer.android.com/reference/android/app/AlarmManager.html#set(int) (int , long, android.app.PendingIntent)

> 安排闹钟。注意：...如果已经为同一个 IntentSender 安排了警报，它将首先被取消...

请注意，PendingIntent 的特征在于它们的参数和标识符。

```
Intent intent = new Intent(mContext, YourTarget.class);
// The hashcode works as an identifier here. By using the same, the alarm will be overwrriten
PendingIntent sender = PendingIntent.getBroadcast(mContext, hashCode, intent,
                PendingIntent.FLAG_UPDATE_CURRENT);

if (Build.VERSION.SDK_INT < Build.VERSION_CODES.KITKAT) {
    mAlarmManager.set(AlarmManager.RTC_WAKEUP, calendar.getTimeInMillis(), sender);
} else {
    mAlarmManager.setExact(AlarmManager.RTC_WAKEUP, calendar.getTimeInMillis(), sender);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T09:51:23.530

> ```
> public void cancel (PendingIntent operation)
> 
> Remove any alarms with a matching Intent. Any alarm, of any type, whose Intent 
> ```
> 
> 匹配这个（由 filterEquals(Intent) 定义），将被取消。

因此，您可以在待处理的意图上调用[取消](http://developer.android.com/reference/android/app/AlarmManager.html#cancel%28android.app.PendingIntent%29)alarmManager.cancel(myPendingIntent) 并创建一个具有新时间的新意图。

但是您不必显式调用取消，因为只要 filterEquals 在将您的新 PendingIntent 与前一个比较时返回 true，那么您的警报将仅在 1 天前开始。

> public boolean filterEquals (Intent other)
> 
> ```
> Determine if two intents are the same for the purposes of intent resolution 
> ```
> 
> （过滤）。也就是说，如果它们的动作、数据、类型、类和类别相同。这不会比较意图中包含的任何额外数据。

# php - 在 Yii 的小部件视图中使用 Controller 方法

> ID：15596839
> 
> 赞同：1
> 
> 时间：2013-03-24T09:22:03.310
> 
> 标签：php, yii, yii-widgets

我有一个想要完成的简单任务 - 我有一个导航栏小部件，我想将“活动”类添加到指向当前显示页面的链接。

Cetver 的回答@ [Yii 如何突出显示当前菜单项](https://stackoverflow.com/questions/9802662/yii-how-to-highlight-the-current-menu-item)给了我一个漂亮的方法，我需要将它放入 Controller 类中。它在控制器和视图中就像一个魅力。

我确实需要在我的小部件视图中使用它......我如何从那里访问它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T09:49:32.317

我找到了答案：CWidget->controller 返回当前控制器。所以： $this->controller->isActive(); 可以在小部件类或其视图中使用。

# php - 保存在 ramdisk 中的 php 会话

> ID：15596843
> 
> 赞同：3
> 
> 时间：2013-03-24T09:22:30.100
> 
> 标签：php, apache, session, centos, ramdisk

我正在尝试将我的 php 会话保存在 ramdisk 上。我有权限问题，但我看不出问题出在哪里。

1.  我有虚拟磁盘：

    `/dev/ram0 407M 2.4M 404M 1% /var/lib/php/session/ramd`

2.  我有权限：

    `drwxrwx---. 3 root apache 1024 Mar 24 01:53 ramd`

3.  我的错误：

    `Warning: session_start(): open(/var/lib/php/session/ramd/sess_b0ko6hl3p6ojj2ot3qfqvm9km1, O_RDWR) failed: Permission denied (13) in /var/www/html/index.php on line 3 Warning: Unknown: open(/var/lib/php/session/ramd/sess_b0ko6hl3p6ojj2ot3qfqvm9km1, O_RDWR) failed: Permission denied (13) in Unknown on line 0 Warning: Unknown: Failed to write session data (files). Please verify that the current setting of session.save_path is correct (/var/lib/php/session/ramd) in Unknown on line 0`

4.  在 php.ini 中，session.save_path 变量设置为`"/var/lib/php/session"`

5.  在我的脚本中，我将 session.save_path 设置为`"var/lib/php/session/ramd"`

如果我使用我创建的 ramdisk，我可以将我的会话保存在 /rand 文件夹中。我安装它..我不能。我还尝试了 chmod root:root / apache:apache 和 chmod 0777 1777。现在是 0770。

我使用：CentOS 6.4、PHP 5.3.3、Apache/2.2.15

有人可以帮我解决这个问题吗？

乐：

```
[root@localhost ~]# ps aux | grep apache
apache    2355  0.0  0.4 394868  7840 ?        S    01:53   0:00 /usr/sbin/httpd
apache    2356  0.0  0.4 394876  7844 ?        S    01:53   0:00 /usr/sbin/httpd
apache    2357  0.0  0.4 394876  7824 ?        S    01:53   0:00 /usr/sbin/httpd
apache    2358  0.0  0.4 394876  7816 ?        S    01:53   0:00 /usr/sbin/httpd
apache    2360  0.0  0.4 394876  7900 ?        S    01:53   0:00 /usr/sbin/httpd
apache    2361  0.0  0.4 394876  7800 ?        S    01:53   0:00 /usr/sbin/httpd
apache    2362  0.0  0.4 394876  7844 ?        S    01:53   0:00 /usr/sbin/httpd
apache    2363  0.0  0.4 394868  7716 ?        S    01:53   0:00 /usr/sbin/httpd
root      3119  0.0  0.0 103248   868 pts/0    S+   02:52   0:00 grep apache

[root@localhost ~]# ps aux | grep php
root      3132  0.0  0.0 103244   868 pts/0    S+   02:54   0:00 grep php 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T14:49:50.473

执行以下命令查看 SELinux 是否处于强制模式：

```
# sestatus 
```

如果是这样，您可能想尝试通过以 root 身份（或使用 sudo）运行以下命令来禁用 SELinux：

```
# setenforce 0 
```

这将使 SELinux 停止执行任何策略。如果这解决了问题，您将不得不关闭 SELinux 或增加策略以允许这条新路径正确运行。如果确实达到了这一点，请参考[https://serverfault.com/a/323528/165777](https://serverfault.com/a/323528/165777)以获取有关如何执行该步骤的一些信息！

此外，如果这没有产生影响和/或您想重新启用 SELinux，请执行：

```
# setenforce 1 
```

# objective-c - 我应该在哪里放置我的应用程序范围的 UI 自定义

> ID：15596845
> 
> 赞同：0
> 
> 时间：2013-03-24T09:22:40.960
> 
> 标签：objective-c, uiview, subclass, appdelegate, uiappearance

我创建了一个类来完成自定义外观的所有工作。该类是`UIAppearance`委托的。

UI 定制目前影响，

1.  导航栏
2.  搜索栏
3.  标签栏

所有这些元素都不会改变，`Views`因为我无法预见我可能对其中任何一个有不同风格的情况。

**我可以在哪里以及如何将它放置在应用程序范围内，这样我就不必从任何地方调用这些方法（一次调用以影响 UI 调整）？**

*   通过子类化？
*   AppDelegate 是一个很好的候选人吗？
*   导入主题类并手动调用方法

**是否可以一次性调用这些自定义项？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T09:27:05.493

您可以在`-applicationDidFinishLaunching`.

当你调用*类*时，UIKit 类`UINavigationBar`会给你一个*外观代理*：`appearance`

 *`[[UINavigationBar appearance] setTintColor:myColor];`设置`myColor`为所有导航栏的 tintColor。

有关更多详细信息，请参阅[UIAppearance 文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIAppearance_Protocol/Reference/Reference.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T12:22:46.010

您可以使用像 SharedManager 这样的 singleTon 类，在其中创建所有这些对象，它将在您的应用程序中可用。

// 第一步：创建一个名为“SharedManager.h”的文件

```
#import <Foundation/Foundation.h>

@interface SharedManager : NSObject
{
    UINavigationBar *navBar;
    UISearchBar *searchBar;
}

@property (nonatomic, retain) UINavigationBar *navBar;
@property (nonatomic, retain) UISearchBar *searchBar;

+(SharedManager *)sharedInstance;

@end 
```

// 第 2 步：创建一个文件：“SharedManager.m”

```
#import "SharedManager.h"

static SharedManager *_sharedManager;
@implementation SharedManager

@synthesize navBar , searchBar;

+(SharedManager *)sharedInstance
{
    if(_sharedManager == nil)
    {
        _sharedManager = [[SharedManager alloc] init];

        // Create Navigation Bar
        _sharedManager.navBar = [[UINavigationBar alloc] init];

        // Create Search Bar
        _sharedManager.searchBar = [[UISearchBar alloc] init];
    }

    return _sharedManager;
}

@end 
```

// 要访问对象，请使用以下代码，#import "SharedManager.h"

```
 [[SharedManager sharedInstance].navBar]; 
```

它将返回 NavigationBar 的对象*

# javascript - 在 ZXing 库中查找坐标并在画布上输出

> ID：15596852
> 
> 赞同：2
> 
> 时间：2013-03-24T09:23:36.377
> 
> 标签：javascript, html, canvas, qr-code, zxing

我正在使用这个基于[ZXing 库的](http://code.google.com/p/zxing/)[JS 代码扫描仪](https://github.com/LazarSoft/jsqrcode/)，我想找到找到的 QR 码的坐标，然后在元素上找到的 QR 码周围放置一个边框。我找不到包含二维码坐标的变量。我在网上也找不到任何好的信息，所以我将不胜感激。`<canvas>`

**注意：**如果您能告诉我哪些变量保存了坐标，将会很有帮助；那时我会更接近答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T19:25:47.383

*注意：这是在黑暗中拍摄的，因为我无法测试它。*

在detector.js 中有一个`detect`返回对象“info”的方法。该对象具有以下属性：

```
var topLeft = info.TopLeft;
var topRight = info.TopRight;
var bottomLeft = info.BottomLeft; 
```

您可以在方法中看到这些变量的作用`processFinderPatternInfo`。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-25T14:08:37.733

如果您使用的是 jQuery，您可以使用以下方法找到任何元素的位置`$(element).position`

应该很容易找到 QR 码所属的 ID 或 Class 并找到它的位置。

[http://api.jquery.com/position/](http://api.jquery.com/position/)

# android - 从浏览器启动 Android Intent

> ID：15596860
> 
> 赞同：3
> 
> 时间：2013-03-24T09:25:06.437
> 
> 标签：android, intentfilter

这个主题之前已经讨论过，但我找不到特定于我所问内容的答案。

**我在哪里：**我在这里遵循了 hackmod 的第一条建议：[在 Android 浏览器中创建链接启动我的应用程序？](https://stackoverflow.com/questions/3469908/make-a-link-in-the-android-browser-start-up-my-app/3472228#3472228)并使其与网页中的链接一起使用。

但是，我无法理解第二个选项（意图 uri）。这就是我所拥有的：

```
 <activity android:name="com.myapps.tests.Layout2"
        android:label="Auth Complete"
        >
        <intent-filter>
          <action android:name="android.intent.action.VIEW" />
          <category android:name="android.intent.category.DEFAULT" />
          <category android:name="android.intent.category.BROWSABLE" />
          <data android:scheme="http" android:host="mydomain.com"
                android:path="/launch" />
        </intent-filter>
    </activity> 
```

现在，我可以转到“mydomain.com/launch”并启动我的活动。这一切都很好，除了我得到了选择器。我想要的是让它在不提供选项的情况下启动我的活动。

从我引用的帖子中的解释来看，这似乎就是意图 uris 的用途，但我找不到一个简单的例子。我的网页中的链接应该是什么样子才能在没有选择器的情况下启动它？

我见过几个看起来像这样的例子：

```
<a href="intent:#Intent;action=com.myapp.android.MY_ACTION;end"> 
```

但是，当我尝试时，这似乎不起作用。

我的测试设备是 Galaxy Tab 2。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-02-06T12:11:27.340

我还尝试以推荐的方式启动该应用程序。以下代码对我有用。

AndroidManifest.xml`<activity>`块内的代码：`YourActivity`

```
<intent-filter>
    <action android:name="android.intent.action.MAIN" />
    <category android:name="android.intent.category.LAUNCHER" />
</intent-filter>
<intent-filter>
    <action android:name="your.activity.namespace.CUSTOMACTION" />
    <category android:name="android.intent.category.DEFAULT" />
    <category android:name="android.intent.category.BROWSABLE" />
</intent-filter> 
```

活动 onCreate() 方法中的代码：

```
Intent intent = getIntent();
if(intent != null && intent.getAction() == "your.activity.namespace.CUSTOMACTION") {
    extraValue = intent.getStringExtra("extraValueName");
    Log.e("AwseomeApp", "Extra value Recieved from intent : " + extraValue);
} 
```

对于 HTML 中的代码，编写启动特定 Activity 的意图，其中包含 action`your.activity.namespace.CUSTOMACTION`和您的应用程序包名称`your.activity.namespace`。您还可以在意图中添加一些额外的内容。例如`intent.putExtra("extraValueName", "WOW")`. `intent.toUri(Intent.URI_INTENT_SCHEME)`然后通过打印Log 中的值来获取所需的 URL 。它应该看起来像：

```
intent:#Intent;action=your.example.namespace.CUSTOMACTION;package=your.example.namespace;component=your.example.namespace/.activity.YourActivity;S.extraValueName=WOW;end 
```

因此，您的 HTML 代码应如下所示：

```
<a href="intent:#Intent;action=your.example.namespace.CUSTOMACTION;package=your.example.namespace;component=your.example.namespace/.activity.YourActivity;S.extraValueName=WOW;end">
    Launch App
</a> 
```

这是根据@hackbod 在[此处](https://stackoverflow.com/questions/3469908/make-a-link-in-the-android-browser-start-up-my-app/3472228#3472228)和developers.google.com 的[此](https://developers.google.com/chrome/mobile/docs/intents)页面中建议的内容。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-24T09:27:48.093

根据您的意图过滤器，此链接应该可以工作：

```
<a href="http://mydomain.com/launch">start my app</a> 
```

但是您应该注意，android 系统会询问用户是否应该启动您的应用程序或任何其他浏览器。

如果您想避免这种情况，请实现自定义协议处理程序。所以只有你的应用程序会监听它，而用户不会得到意图选择器。

尝试添加此数据意图：

```
<data android:scheme="mycoolapp" android:host="launch" /> 
```

使用上面的代码，此链接应该可以工作：

```
<a href="mycoolapp://launch">start my app</a> 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-04-03T09:02:57.720

我需要对 abhishek89m'a 答案进行一些小改动才能完成这项工作。

```
<a href="intent:#Intent;action=your.example.namespace.CUSTOMACTION;package=your.example.namespace;component=your.example.namespace/.YourActivity;S.extraValueName=WOW;end">
    Launch App
</a> 
```

我在组件名称中的斜杠后删除了“.activity”。

我想补充一点，如果您不希望应用选择器出现，那么自定义操作可能是解决此问题的最佳方法。

ps 我会将此添加为评论，但我是新用户，我没有足够的声誉点。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-24T09:31:05.020

```
<a href="your.app.scheme://other/parameters/here"> 
```

您浏览器上的此链接将使用特定架构启动应用程序，就像您的意图一样

```
<intent-filter>
<data android:scheme="your.app.scheme" />
<action android:name="android.intent.action.VIEW" />
</intent-filter> 
```

# delphi - Delphi XE3 - TDataSet 的性能问题

> ID：15596863
> 
> 赞同：6
> 
> 时间：2013-03-24T09:25:26.593
> 
> 标签：delphi, delphi-xe3

使用 XE3 程序进行数据处理的时间是使用 XE2 编译的相同程序的 10 倍。这是已知问题（可能主要指 TStringField），已报告给[QC 111942](http://qc.embarcadero.com/wc/qcmain.aspx?d=111942)，但尚未修复。有人对此问题有修复/解决方法吗？

TIA布兰科

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-13T06:28:21.940

在 XE5 中也一样。加上额外的流量和所有这些客户端-服务器的东西需要> 5 Mbit每秒（！）才能正常工作。我只使用 TFDConnection 和 TFDQuery。特别是对于 MySQL，速度与 Delphi 组件和第三方驱动程序 (libmysql.dll) 相同。如果您没有 FireDAC，您可以将 TFDQuery 替换为 TSQLQuery。以下是如何填充字符串网格的过程：

```
procedure SelGrid(sql:ansiString;Q:TFDQuery;grid:TStringGrid);
var i: integer;
begin
  Q.Close;
  Q.SQL.Text:='';
  Q.Open(sql);
  grid.ColCount:=Q.FieldCount;
  grid.RowCount:=1;
  while not Q.Eof do begin
    for i := 0 to grid.ColCount-1 do grid.Cells[i,grid.RowCount-1]:=Q.Fields.Fields[i].AsString;
    grid.RowCount:=grid.RowCount+1;
    Q.Next;
  end;
  Q.Close;
  if grid.RowCount>1 then grid.RowCount:=grid.RowCount-1;
  grid.Row:=0;
  //AutoSizeGridColumns(grid,30,200);
end; 
```

这是 VCL 字符串网格。当然你会考虑处理更新等等，但你不会有更多的性能问题。

# prolog - Prolog 中的运算符优先级

> ID：15596867
> 
> 赞同：0
> 
> 时间：2013-03-24T09:25:54.370
> 
> 标签：prolog

我正在研究 Ivan Bratko 的书：“人工智能编程”

现在我正在研究**运营商**，对此我有一些疑问，在书上我可以阅读以下内容：

> 因此，运算符的优先级决定了表达式的正确解释是什么。例如，表达式**a + b*c**原则上可以理解为：

**1.** `+(a, *(b,c))`

或作为：

**2.** `*(+(a,b), c)`

现在我有第一个疑问：“这件事是什么意思？这似乎很奇怪，因为这两个表达式给出了不同的三个和不同的结果！！！

例如，如果我有：`a=2`, `b=3`,`c=4`

第一个的结果是 14，第二个的结果是 20，所以有不同：不同的 thress 意味着不同的运算符执行顺序，这意味着不同的结果！！！

所以我认为（使用算术运算符的通常优先级：首先执行乘法，然后执行总和）正确的表达式是第一个，第二个是错误的。

这是对的吗？

继续阅读我还可以阅读的书：

> 一般规则是具有最高优先级的运算符是该术语的主要函子。如果要根据我们的常规约定来理解包含 + 和 * 的表达式，**则 + 的优先级高于 * 运算符**

现在我有第二个疑问：正如我所说，在算术的正常约定中，我首先执行乘法，然后执行总和，所以我认为 * 运算符具有优先级而不是 +

我错过了什么？那为什么书上说`+`优先级更高`*`呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T09:41:02.757

“术语的主要函子”是指要执行的*最后一个*操作，或前缀表示法中最外层的一个。这个定义与你的相反，因此是矛盾的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T10:00:33.050

> 因此，运算符的优先级决定了对表达式的正确解释。例如，该表达式`a + b*c`原则上可以理解为：
> 
> ```
> +(a, *(b,c)) 
> ```
> 
> 或作为：
> 
> ```
> *(+(a,b), c) 
> ```

它说没有优先权，这是解释表达式的两种可能的方式（并且解析表达式的不同方式会产生不同的结果）。`a + (b * c)`只有在知道`*`应该执行之前才知道分组`+`。（我避免在这里*优先*解释，因为它会令人困惑，如下所述）。

`+`and`*`只是符号，只是碰巧它们被用作具有某些已定义优先级的运算符。一般来说，您可以将任何东西定义为运算符，并赋予它优先级。

> 一般规则是具有最高优先级的运算符是该术语的主要函子。`+`如果包含and的表达式`*`要按照我们的常规约定来理解，则`+`优先**级**高于`*`运算符

*英语中优先级*的定义是“被认为比某人或其他事物更重要的条件；在重要性、顺序或等级上的优先级”。只要某件事必须在其他事情之前发生，我们就有*优先权*。

在 C 中，[运算符优先级](http://en.wikipedia.org/wiki/Operators_in_C_and_C%2B%2B#Operator_precedence)是表达式中绑定的顺序。*C 中的高优先级*运算符将在低优先级运算符之前执行。

在 Prolog 中，[优先级](http://www2.gm.fh-koeln.de/Prolog/operators.html)是获取函子的顺序，这与 C 运算符的绑定顺序相反。当我们用 分析表达式时，更高*优先级*的运算符会*更早*[`=..`](http://www.swi-prolog.org/pldoc/doc_for?object=section%282,%274.20%27,swi%28%27/doc/Manual/manipterm.html%27%29%29)出现。

# javascript - 找到对象但未定义文档属性

> ID：15596868
> 
> 赞同：0
> 
> 时间：2013-03-24T09:26:17.707
> 
> 标签：javascript, meteor

我正在使用 Meteor 和 Javascript 编写一个编程示例，但遇到了一个奇怪的问题。这是我的代码：

```
Items.allow({
  insert: function(userId, doc) {
    return (userId && doc.owner === userId);
  },
  update: function(userId, docs, fields, modifier) {
    console.log("------------");
    console.log(docs);
    return _.all(docs, function(doc) {
      console.log(doc);
      console.log(doc.name);
      console.log(doc._id);
      console.log(doc.owner);
      console.log(userId);
      return doc.owner === userId;
    });
  }
}); 
```

当我尝试使用 Javascript 控制台更新 Items 集合的一个对象时

```
Items.update({_id: "cY87rAW8g4f92bRY2"}, {$set: {price: "$20"}}); 
```

我在控制台中看到以下内容：

```
------------
{ name: 'two',
  owner: 'ZGXiBDBR6J5XdTHSe',
  _id: 'cY87rAW8g4f92bRY2' }
two
undefined
undefined
undefined
ZGXiBDBR6J5XdTHSe 
```

第一次登录控制台“console.log(doc);” 表明我正在更新正确的项目，但控制台日志 doc.name、doc._id 和 doc.owner 的其余部分未定义。这实际上会导致更新失败，因为我无法将 doc.owner 与 userId 进行比较。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T10:05:59.560

由于`_.all`迭代了一个数组或对象，并且 update 传递了**一个**文档，`_.all`因此迭代了该文档的属性。

所以什么时候`two`输出，那是`console.log(doc)`行的结果。未定义的输出是您尝试记录属性本身的属性。

因此，将`_.all`包装器移除到块中，你会没事的：

```
update: function(userId, doc, fields, modifier) {
  console.log(doc);
  console.log(doc.name);
  console.log(doc._id);
  console.log(doc.owner);
  console.log(userId);
  return doc.owner === userId;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T09:47:41.890

做什么的`_.all`？看起来它的设置`name`是 的根元素`doc`，它没有任何键，因此它返回未定义。没有它，您的代码应该可以正常工作：

```
update: function(userId, doc, fields, modifier) {
    console.log(doc);
    console.log(doc.name);
    console.log(doc._id);
    console.log(doc.owner);
    console.log(userId);
    return doc.owner === userId;
} 
```

我也更改`docs`为，`doc`因为在 collection.allow 中，[更新处理单个文档](http://docs.meteor.com/#allow)，而不是它们的数组，每个更新都将单独针对允许/拒绝运行

# javascript - Dijit 小部件构造函数抛出“调用链式构造函数”错误

> ID：15596885
> 
> 赞同：3
> 
> 时间：2013-03-24T09:27:49.843
> 
> 标签：javascript, inheritance, widget, dojo

我有一个`Base`继承自`[_WidgetBase, _TemplatedMixin]`. `Base`工作正常。现在我`Base`在另一个不起作用的类中继承了它

```
define([
   "dojo/_base/declare", "dojo/parser", ...
], function(declare, parser, ...){
    return declare("mc.widgets.Base", [_WidgetBase, _TemplatedMixin], {
        templateString: 
            '<div class="mc-note-base">'+
            '</div>',
        constructor: function(argv){
            var self = this.inherited(arguments);
            return self;
        },
        data: function(){

        },
        postCreate: function(){
            ...
        }
    })
}); 
```

派生类

```
define([
    "dojo/_base/declare", "mc/base/path", "mc/widgets/Base"
], function(declare, path, Base){
    return declare("mc.widgets.Derived", [Base], {});
}) 
```

派生类抛出

> 错误：声明 mc.widgets.Derived：使用继承调用链式构造函数

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T19:50:59.620

发生这种情况是因为`constructor`Widget 生命周期的一部分是通过一种特殊的链接机制来处理的，该机制专为更灵活的 Widget 创建而设计。您可以[在此处阅读](http://dojotoolkit.org/reference-guide/1.8/dojo/_base/declare.html#manual-constructor-chaining)更多信息，但适用于您的情况的部分说：

> 超类构造函数总是被自动调用，并且总是在子类构造函数之前。该约定在 90% 的情况下减少了样板文件。如果它不符合您的需求，请参阅下面的手动构造函数链接。对于所有其他方法，使用 this.inherited(arguments) 调用同名的超类方法。

如果您只是`this.inherited(arguments)`从 Widget 的构造方法中删除调用，您的问题将得到解决。[这是一个简单的 jsfiddle](http://jsfiddle.net/H7Zh8/35/)，它模仿您的 Widget 设置并演示了解决方案。

# c# - 如何在 C# 中使用动态名称在 Microsoft Access 中创建表？

> ID：15596887
> 
> 赞同：3
> 
> 时间：2013-03-24T09:28:07.553
> 
> 标签：c#, database, ms-access, oledb

我可以在代码中创建具有唯一名称的表，但是当我想使用文本框的内容创建具有动态名称的表时，它会在消息框中显示“CREATE TABLE 语句中的语法错误”。我的代码：

```
private void createTableInDatabase(string fName, string lName)
    {
        OleDbConnection conn = new OleDbConnection();
        conn.ConnectionString = @"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=D:\Project\Learning\Visual C#\Form\Tailor Assistance\Tailor Assistance\bin\Release\Tailor Assistance.mdb";
        conn.Open();
        string tableName = fName + " " + lName;
        OleDbCommand cmmd = new OleDbCommand("", conn);
        cmmd.CommandText = "CREATE TABLE " + tableName + "( [ID] Counter Primary Key, [FirstName] Text, [LastName] Text, [Gender] Text, [Phone] Text, [CellPhone] Text, [FriendsFirstName] Text, [FriendsLastName] Text, [RegisterDate] Text, [Size] Text, [Description] Text)";
        if (conn.State == ConnectionState.Open)
        {
            try
            {
                cmmd.ExecuteNonQuery();
                MessageBox.Show("Add!");
                conn.Close();
            }
            catch (OleDbException expe)
            {
                MessageBox.Show(expe.Message);
                conn.Close();
            }
        }
        else
        {
            MessageBox.Show("Error!");
        }
    } 
```

有什么问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-24T09:33:46.967

您的表名包含一个空格。您需要用方括号将其封装起来。就写这个

```
string tableName = "[" + fName + " " + lName + "]"; 
```

但是，我强烈建议您避免这种情况。

将来，对于您编写的每个查询，您将始终必须这样做。
一个简单的众所周知的解决方法是使用下划线而不是空格。

而且，查看您的字段名称，我注意到一个名为 SIZE 的字段。
这是[MS Access 的保留关键字](http://support.microsoft.com/kb/321266)。您将在这里面临同样的问题。使用该字段的每个查询都需要将名称封装在方括号中，
同样，为了您未来的心理健康，请更改该名称。:-)

**注意 - 7 年**
后回顾这个答案，虽然是正确的，但它缺乏重要的一点。
从上面的代码无法知道用于定义表名的输入值是否安全。如果您让您的用户键入这些名称，那么可能会输入非常讨厌的字符串，这些字符串与您当前的字符串相结合可能会对您的数据库造成严重破坏。[这种 hack 以Sql Injection](http://stackoverflow.com/questions/332365/how-does-the-sql-injection-from-the-bobby-tables-xkcd-comic-work)的名义而广为人知，解决方案总是相同的。您应该使用参数将值传递给您的数据库，如果因为参数不能用于表示表或列名而无法做到这一点，那么您应该强制用户从一组名称中进行选择，而不让他们输入任何字符串.

# jquery - iOS touchmove 事件 - 改变 backgroundPosition 不顺畅

> ID：15596888
> 
> 赞同：4
> 
> 时间：2013-03-24T09:28:12.327
> 
> 标签：jquery, ios, parallax, touchmove

我正在尝试创建简单的视差效果来改变背景位置，但在 iOS Safari 中移动并不顺畅。只有当我释放触摸屏时背景才会改变它的位置，但当我滚动它时不会改变它的位置。

Javascript：

```
 $(window).bind('touchmove',function(e){  
        var scrolled = $(window).scrollTop();
        $('#home').css('backgroundPosition', 'center ' + (0-(scrolled*2)) +'px');
    }); 
```

它实际上不仅发生在 chnaging`backgroundPosition`中，还发生在`top`for div 元素中：

```
$('#home').css('top', (scrolled*2) +'px'); 
```

但同时`margin-top`工作正常，运动平稳。

我做错了什么，如何让它以与鼠标滚轮事件相同的方式在 iOS 上工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T09:52:27.707

iOS 浏览器会在滚动或手势发生时冻结 DOM 操作。这是无法解决的，因为这是浏览器的问题。来自[jQuery Mobile](http://jquerymobile.com/demos/1.2.0/docs/api/events.html)，它说：

> 请注意，iOS 设备在滚动期间冻结 DOM 操作，将它们排队以在滚动完成时应用。

# c# - 文本文件中的 IV 数据解析

> ID：15596892
> 
> 赞同：2
> 
> 时间：2013-03-24T09:28:31.303
> 
> 标签：c#, file-io, text-files, streamreader

我正在使用一个源表来扫描电流并测量电压，最后通过 rs232 导出所有 IV 数据。我将它们写入格式如下的文本文件；I1,V1,I2,V2,I3,V3... 我用“split”函数拆分所有“逗号”，但我不知道如何将 IV 对保持为一个数组，然后我想计算每个电阻每个 IV 通过简单的 I/V 计算。
任何帮助将不胜感激。

```
public class Sample
{
public static void Main() {
    using (StreamReader reader = new StreamReader("myfilefile.txt")) {
        string line = null;
        while (null != (line = reader.ReadLine())) 
           {
            string[] values = line.Split(',');
           }
    }
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T09:41:30.290

你可以这样做：

```
for (int j = 0; j < values.Length; j += 2) {
    double i = double.Parse(values[j]);
    double v = double.Parse(values[j+1]);
    double r = v / i;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T09:42:26.637

如果您可以假设您总是有对（因此值中有偶数个元素），您可以这样做：

```
// your line 
string[] values = line.Split(',');
// my addition
for(int pair=0; pair<values.Length; pair=pair+2)
{
   string iValue = values[pair];
   string vValue = values[pair+1];

   Double i;
   Double v;
   bool iOk = Double.TryParse(iValue, out i);
   bool vOk = Double.TryParse(vValue, out v);
   if (iOk && vOk)
   {
       Double r = i/v;
       Console.WriteLine("{0} (R) = {1} (I) / {2} V ",r, i, v);
   }
   else
   {
       Console.WriteLine("{0} or {1} is not parseable", iValue, vValue);
   }
} 
```

# mysql - 使用 sql 获取 AUTO_INCREMENT VALUE 而不使用 max(id) 或先前的 id 或行数

> ID：15596895
> 
> 赞同：0
> 
> 时间：2013-03-24T09:29:14.637
> 
> 标签：mysql

帮助 如何使用 sql 获取数据库表的 auto_increment 值而不使用 mysql 中的 max(id) 或以前的 id 或行数

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T09:30:00.250

使用 LAST_INSERT_ID() ^([DOCS](http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_last-insert-id))获取最后生成的 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-15T08:28:16.707

考虑具有列 'Id' 的表 'Student'（Id 是自动递增的）。然后，

```
select Id from Student order by Id desc LIMIT 1 
```

# vim - Vim 错误命令模式

> ID：15596898
> 
> 赞同：0
> 
> 时间：2013-03-24T09:29:27.670
> 
> 标签：vim

有时我在命令模式下偶然发现了这个奇怪的 vim 错误，我很确定这是由我的一些新的和奇怪的 vimrc 自定义引起的。

![在此处输入图像描述](../Images/28b5655e95e7e13fc264f952fb43f091.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T10:01:27.897

`cmap` is tricky: `h` will insert `tab` (with a space) then the following `h` (in `help`) will be expanded to `tab` then `h` will be expanded to…</p>

This is a basic recursion problem.

I suggest you use a normal mode mapping instead.

# jquery-ui - Jquery的微调器ui.value没有注销值

> ID：15596900
> 
> 赞同：2
> 
> 时间：2013-03-24T09:29:33.053
> 
> 标签：jquery-ui

我希望这样可以注销输入的值：

HTML：

```
<input id="spinner" /> 
```

JS：

```
$(function() {
    $("#spinner").spinner({
        change: function(event, ui) {
            console.log(ui.value)
        }
    }); 
}); 
```

小提琴：http: [//jsfiddle.net/u9T5s/](http://jsfiddle.net/u9T5s/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T09:35:43.163

**[jsFiddle 演示](http://jsfiddle.net/u9T5s/2/)**

我不确定就 jquery ui API 而言合适的钩子是什么，但这里也有一个简单的方法：

```
$(function() {
 $("#spinner").spinner(); 
 $('.ui-spinner-up').click(function(){
   console.log("Increased to "+$('#spinner').val()); 
 });
 $('.ui-spinner-down').click(function(){
   console.log("Decreased to "+$('#spinner').val()); 
 });    
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T09:32:32.837

这个：http: [//jsfiddle.net/u9T5s/1/](http://jsfiddle.net/u9T5s/1/)

```
$(function() {
    $("#spinner").spinner({
        change: function(event, ui) {
            console.log(this.value)
        }
    }); 
}); 
```

使用 this.value 而不是 ui.value。这将获取更改函数所附加到的当前对象。

回复评论：您实现不同的功能，一个是更改，一个是旋转。

此外，在发生真正的更改后，更改将在模糊时执行，一旦触发向上/向下单击，就会执行旋转。

```
spin: function( event, ui ) {
        if ( ui.value > 10 ) {
          $( this ).spinner( "value", -10 );
          return false;
        } else if ( ui.value < -10 ) {
          $( this ).spinner( "value", 10 );
          return false;
        }
      } 
```

# c++ - 扩展 std::vector 以从其他向量类型移动元素

> ID：15596901
> 
> 赞同：2
> 
> 时间：2013-03-24T09:29:50.967
> 
> 标签：c++, c++11, move-semantics

假设我有一个与 std::vector 兼容的非 STL 向量类型`operator std::vector<T>`。是否可以*将*其元素移动到 std::vector 而不是默认的复制构造，以便

```
OtherVectorType<SomeClass> f()
{
    OtherVectorType<SomeClass> v;
    v.pushBack(SomeClass());
    v.pushBack(SomeClass());
    v.pushBack(SomeClass());
    return v;
}

std::vector<SomeClass> sv = f(); 
```

创建 std::vector 时会使用 SomeClass 的移动构造函数（3 次）`sv`吗？

我想像

```
template<typename T>
std::vector<T>& operator= (std::vector<T>& self, OtherVectorType<T>&& from)
{
    [...]
} 
```

但还没有找到任何可行的解决方案。

* * *

为了说明，这是 std::vector 运算符的定义方式：

```
template<typename T> class OtherVectorType
{
    [...]

    operator std::vector<T>() const
    {
        if (!m_size)
            return std::vector<T>();

        return std::vector<T>(reinterpret_cast<T*>(m_pElements),
                              reinterpret_cast<T*>(m_pElements) + m_size);
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-24T10:00:11.550

[我认为您需要`*this`](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2007/n2439.htm)支持.

```
operator std::vector<T>() const &; // copy your own type's data
operator std::vector<T>() &&;      // move it into the std::vector<T> 
```

可悲的是，支持很少，即使 GCC 4.8 也没有。:(

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T14:31:12.487

最简单的事情（特别是如果你没有 rvalue-this）是使用`make_move_iterator`如下所示：

```
#include <deque>
#include <vector>
#include <memory>
#include <iterator>

typedef std::unique_ptr<int> SomeClass;
typedef std::deque<SomeClass> OtherVectorType;

OtherVectorType
f()
{
    OtherVectorType v;
    v.push_back(SomeClass(new int (1)));
    v.push_back(SomeClass(new int (2)));
    v.push_back(SomeClass(new int (3)));
    return v;
}

std::vector<SomeClass>
to_vector(OtherVectorType&& o)
{
    return std::vector<SomeClass>(std::make_move_iterator(o.begin()),
                                  std::make_move_iterator(o.end()));
}

int main()
{
    std::vector<SomeClass> v = to_vector(f());
} 
```

# c++ - C++ std::hash_map：密钥的作用是什么

> ID：15596903
> 
> 赞同：2
> 
> 时间：2013-03-24T09:30:01.853
> 
> 标签：c++, hashmap, key, std

两者都`maps`被设计`hash_maps`成这样`pairs`。`<key, data>`我很清楚为什么地图应该有一个用于排序的键（更准确地说：树），但我不明白为什么 hash_maps 需要一个键，为什么不能单独对数据进行散列并放入哈希表中？

我在文档中或在网上搜索都找不到答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T09:39:09.887

走到柜子边。拿出电话簿，查一个号码。它具有名称和数字之间的映射

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-24T09:35:37.767

`std::unordered_set`完全按照您描述的方式工作。但是，有时您想从一个数据映射到另一个数据；这就是`std::unordered_map`发挥作用的地方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T09:41:04.197

Hash Map 也称为`Unordered Map`使用 a作为buckets 或 Slots`HASH`的一个。换句话说，任何 Hash Table 都需要一个散列函数来计算一个buckets 或 slots 的数组，从中可以找到正确的值。这些是哈希表的键，在最佳情况下用于在 O(1) 时间内访问数据。`KEY``index``index``index`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-24T12:44:29.920

如果要使用数据本身作为键，则适当的容器是`std::set`或`std::unordered_set`。一个map同时拥有一个key和一个value；`std::map`和之间的区别在于`std::unordered_map`数据的组织方式**；**`std::map`按键排序，按键`std::unordered_map`哈希。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-24T09:33:04.090

您正在寻找[set](http://en.wikipedia.org/wiki/Set_data_structure)，其中键也是数据。

C++ 提供了一些不同的风格：[set](http://en.cppreference.com/w/cpp/container/set)，[unordered_set](http://en.cppreference.com/w/cpp/container/unordered_set)等......

# python - django url 获取方法 urlpatterns

> ID：15596904
> 
> 赞同：0
> 
> 时间：2013-03-24T09:30:23.267
> 
> 标签：python, django, url-pattern

找不到页面 (404)
请求方法：GET
请求 URL： [http ://chinafhp.sinaapp.com/search/?q=ag](http://chinafhp.sinaapp.com/search/?q=ag)

网址模式：

```
urlpatterns = patterns('',
    # Examples:
    # url(r'^$', 'web.views.home', name='home'),
    # url(r'^web/', include('web.foo.urls')),

    # Uncomment the admin/doc line below to enable admin documentation:
    # url(r'^admin/doc/', include('django.contrib.admindocs.urls')),

    # Uncomment the next line to enable the admin:

    url(r'^serach/$',views.serach),
    url(r'^admin/', include(admin.site.urls)),
    url(r'^$',views.home),

    url(r'^movie/([^/]+)/$',views.movieList),
    url(r'^tv/([^/]+)/$',views.tvList),
) 
```

为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T09:34:12.987

`url(r'^serach/$',views.serach),`

应该

`url(r'^search/$',views.search),`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T10:16:14.487

似乎你在那里拼错了**搜索**词，但问题是你输入`views.serach`正确，因为 django 没有抱怨它，所以有一个`serach`明确的观点。

因此，如果您想访问您的网址，您可以：

```
http://chinafhp.sinaapp.com/serach/?q=ag 
```

# arrays - 如何使用 Perl 模块 AI::ExpertSystem::Advanced 登录初始事实数组

> ID：15596906
> 
> 赞同：1
> 
> 时间：2013-03-24T09:30:43.687
> 
> 标签：arrays, perl, expert-system

我正在尝试使用 Perl[`AI::ExpertSystem::Advanced`](https://metacpan.org/module/AI%3a%3aExpertSystem%3a%3aAdvanced)模块，并尝试在初始事实数组中使用符号。该模块的文档显示了一个示例：

```
my $ai = AI::ExpertSystem::Advanced->new(
viewer_class => 'terminal',
knowledge_db => $yaml_kdb,
initial_facts => ['I', ['F', '-'], ['G', '+']); 
```

但是有问题（语法错误）。我认为`]`代码末尾缺少一个。

**第一个问题**：正确的形式是什么？当我运行该示例时，我的终端显示了很多错误。

**第二个问题**：我可以使用文件来存储初始事实吗？

感谢您的回答。

**错误日志**：

当我使用文档中的示例时：

```
syntax error at mix.pl line 24, near "])"
Global symbol "$ai" requires explicit package name at mix.pl line 26.
Missing right curly or square bracket at mix.pl line 27, at end of line
Execution of mix.pl aborted due to compilation errors. 
```

当我`]`在表达式末尾放置正确的位置时：`initial_facts => ['I', ['F', '-'], ['G', '+']]);`

```
Attribute (initial_facts) does not pass the type constraint because: Validation failed for 'ArrayRef[Str]' with value ARRAY(0x3268038) at C:/Perl64/lib/Moose/Meta/Attribute.pm line 1274.
  Moose::Meta::Attribute::verify_against_type_constraint('Moose::Meta::Attribute=HASH(0x3111108)', 'ARRAY(0x3268038)', 'instance', 'AI::ExpertSystem::Advanced=HASH(0x30ef068)') called at C:/Perl64/lib/Moose/Meta/Attribute.pm line 1261
  Moose::Meta::Attribute::_coerce_and_verify('Moose::Meta::Attribute=HASH(0x3111108)', 'ARRAY(0x3268038)', 'AI::ExpertSystem::Advanced=HASH(0x30ef068)') called at C:/Perl64/lib/Moose/Meta/Attribute.pm line 531
  Moose::Meta::Attribute::initialize_instance_slot('Moose::Meta::Attribute=HASH(0x3111108)', 'Moose::Meta::Instance=HASH(0x32673d8)', 'AI::ExpertSystem::Advanced=HASH(0x30ef068)', 'HASH(0x3118298)') called at C:/Perl64/lib/Class/MOP/Class.pm line 525
  Class::MOP::Class::_construct_instance('Moose::Meta::Class=HASH(0x2eb2418)', 'HASH(0x3118298)') called at C:/Perl64/lib/Class/MOP/Class.pm line 498
  Class::MOP::Class::new_object('Moose::Meta::Class=HASH(0x2eb2418)', 'HASH(0x3118298)') called at C:/Perl64/lib/Moose/Meta/Class.pm line 274
  Moose::Meta::Class::new_object('Moose::Meta::Class=HASH(0x2eb2418)', 'HASH(0x3118298)') called at C:/Perl64/lib/Moose/Object.pm line 28
  Moose::Object::new('AI::ExpertSystem::Advanced', 'viewer_class', 'terminal', 'knowledge_db', 'AI::ExpertSystem::Advanced::KnowledgeDB::YAML=HASH(0x3118478)', 'verbose', 1, 'initial_facts', 'ARRAY(0x3268038)') called at mix.pl line 20 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T17:16:06.847

这是文档中的一个错误（可能在模块本身中）。

要使用否定的初始事实设置对象，您需要首先创建字典对象。

```
my $initial_facts_dict = AI::ExpertSystem::Advanced::Dictionary->new(
    stack => [ 'I', ['F', '-'], ['G', '+'] ]);

my $ai = AI::ExpertSystem::Advanced->new(
    viewer_class => 'terminal',
    knowledge_db => $yaml_kdb,
    initial_facts_dict => $initial_facts_dict,
); 
```

# java - 如何在休眠（HQL）中编写查询以执行 2 个连接而不进行映射？

> ID：15596907
> 
> 赞同：0
> 
> 时间：2013-03-24T09:30:46.627
> 
> 标签：java, hibernate, join, hql, hibernate-mapping

我想将以下查询转换为 HQL：

```
SELECT C.ID, E.DESCRIPTION as STATUS, E1.DESCRIPTION as SUBJECT
FROM CRED C 
join CODE_EVN E
ON E.CODE = C.STATUS_CODE
AND E.SUBCODE =  C.STATUS_SUBCODE 
join CODE_EVN E1
ON E1.CODE = C.SUBJECT_CODE
AND E1.SUBCODE =  C.SUBJECT_SUBCODE 
```

我有两个类 User 和 Codes，它们之间没有映射，那么如何在 Hibernate 中执行以下查询？我尝试了很多东西，但似乎没有任何效果

这些是我的 2 个 bean 类：

**用户等级：**

```
@Entity
@Table(name="CRED")
public class User {

    private String id;
    private String STATUS_CODE;
    private String STATUS_SUBCODE;
    private String SUBJECT_CODE;
    private String SUBJECT_SUBCODE;

    @Id
    @Column(name="ID")  
    public String getId() {
        return id;
    }
    public void setId(String id) {
        this.id = id;
    }

    public void setSTATUS_CODE(String sTATUS_CODE) {
        STATUS_CODE = sTATUS_CODE;
    }
    public String getSTATUS_CODE() {
        return STATUS_CODE;
    }

    public void setSTATUS_SUBCODE(String sTATUS_SUBCODE) {
        STATUS_SUBCODE = sTATUS_SUBCODE;
    }
    public String getSTATUS_SUBCODE() {
        return STATUS_SUBCODE;
    }

    public void setSUBJECT_CODE(String sUBJECT_CODE) {
        SUBJECT_CODE = sUBJECT_CODE;
    }
    public String getSUBJECT_CODE() {
        return SUBJECT_CODE;
    }

    public void setSUBJECT_SUBCODE(String sUBJECT_SUBCODE) {
        SUBJECT_SUBCODE = sUBJECT_SUBCODE;
    }
    public String getSUBJECT_SUBCODE() {
        return SUBJECT_SUBCODE;
    }

} 
```

**代码类：**

```
 @Entity
    @Table(name="CODE_EVN")
public class Codes {
    @Id
    private String CODE;

    private String SUBCODE;
    private String DESCRIPTION;

    public void setCODE(String cODE) {
        CODE = cODE;
    }
    public String getCODE() {
        return CODE;
    }

    public void setSUBCODE(String sUBCODE) {
        SUBCODE = sUBCODE;
    }
    public String getSUBCODE() {
        return SUBCODE;
    }

    public void setDESCRIPTION(String dESCRIPTION) {
        DESCRIPTION = dESCRIPTION;
    }
    public String getDESCRIPTION() {
        return DESCRIPTION;
    }
} 
```

# android - Android FC 报告：接口未实现

> ID：15596908
> 
> 赞同：0
> 
> 时间：2013-03-24T09:30:54.317
> 
> 标签：android, exception

刚刚在 Android 开发控制台上收到以下崩溃报告，但它没有命中我的代码，并且报告没有显示 Android 版本：

检查 4.1.x 和 4.0.x 的源代码，第 345 行是这个，length() 在接口中定义：return getText().length();

这怎么可能真的不见了？我假设我在某些东西上使用了 setText() 并且它不好，但是我是否进行调查，虽然我不知道它实际发生在哪里！？

```
java.lang.IncompatibleClassChangeError: interface not implemented
at android.text.BoringLayout.getLineStart(BoringLayout.java:345)
at android.text.Layout.drawText(Layout.java:229)
at android.text.Layout.draw(Layout.java:205)
at android.text.BoringLayout.draw(BoringLayout.java:400)
at android.widget.TextView.onDraw(TextView.java:4886)
at android.view.View.draw(View.java:13470)
at android.view.View.draw(View.java:13354)
at android.view.ViewGroup.drawChild(ViewGroup.java:2929)
at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2799)
at android.view.View.draw(View.java:13352)
at android.view.ViewGroup.drawChild(ViewGroup.java:2929)
at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2799)
at android.view.View.draw(View.java:13352)
at android.view.ViewGroup.drawChild(ViewGroup.java:2929)
at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2799)
at android.view.View.draw(View.java:13575)
at android.widget.FrameLayout.draw(FrameLayout.java:467)
at android.widget.ScrollView.draw(ScrollView.java:1569)
at android.view.View.draw(View.java:13354)
at android.view.ViewGroup.drawChild(ViewGroup.java:2929)
at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2799)
at android.view.View.draw(View.java:13352)
at android.view.ViewGroup.drawChild(ViewGroup.java:2929)
at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2799)
at android.view.View.draw(View.java:13352)
at android.view.ViewGroup.drawChild(ViewGroup.java:2929)
at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2799)
at android.view.View.draw(View.java:13352)
at android.view.ViewGroup.drawChild(ViewGroup.java:2929)
at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2799)
at android.view.View.draw(View.java:13473)
at android.widget.FrameLayout.draw(FrameLayout.java:467)
at com.android.internal.policy.impl.PhoneWindow$DecorView.draw(PhoneWindow.java:2185)
at android.view.ViewRootImpl.drawSoftware(ViewRootImpl.java:2258)
at android.view.ViewRootImpl.draw(ViewRootImpl.java:2153)
at android.view.ViewRootImpl.performDraw(ViewRootImpl.java:2021)
at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1832)
at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:1000)
at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:4214)
at android.view.Choreographer$CallbackRecord.run(Choreographer.java:725)
at android.view.Choreographer.doCallbacks(Choreographer.java:555)
at android.view.Choreographer.doFrame(Choreographer.java:525)
at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:711)
at android.os.Handler.handleCallback(Handler.java:615)
at android.os.Handler.dispatchMessage(Handler.java:92)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4899)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:791)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:558)
at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-19T10:53:33.143

这可能是由于 android.text.BoringLayout 所属的库发生了变化。可能是类实现的接口更改了它的方法签名或添加了新方法或更改了它的可访问权限（公共保护私有）。

可能发生这种情况的设备可能正在托管由独立用户开发的自定义 rom，这些自定义 rom 具有不同的定义，这些定义赋予了 BinaryLayout 实现的接口之一或其超类之一。

向后二进制兼容性案例

# matlab - 在matlab中显示目录的内容

> ID：15596911
> 
> 赞同：-2
> 
> 时间：2013-03-24T09:31:44.177
> 
> 标签：matlab, math

我是 Matlab 新手，正在编写小代码。
我必须加载一个包含当前目录中所有文件的窗口，然后从该目录中的变量中选择一个图像以进行进一步处理。我可以通过加载目录和选择图像来加载单个图像问题请帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T09:36:42.217

听起来你需要使用[`uigetfile`](http://www.mathworks.com/help/matlab/ref/uigetfile.html). 阅读文档并按照示例进行操作 - 你应该没问题。

# python - 芹菜任务不在 PyCharm 调试器中运行

> ID：15596912
> 
> 赞同：1
> 
> 时间：2013-03-24T09:31:44.327
> 
> 标签：python, pydev, celery, django-celery, pycharm

我正在使用 PyCharm，并注意到当我将调试器附加到 celery 工作进程时，我的任务没有完成，并且此错误记录到控制台：

```
Traceback (most recent call last):
  File "<string>", line 1, in <module>
ImportError: No module named pydevd 
```

调用 celery 任务时也会记录此消息：

`[2013-03-24 05:24:26,336: INFO/MainProcess] Got task from broker: celery.group[91218981-204a-414c-a674-fcd8e2b22d23]`

但是，此任务从未真正完成。

这是用于将 PyCharm 中的 pydevd 调试器附加到我的 celery 工作进程的实际命令：

`/home/scottc/venv/myproj/bin/python home/scottc/.IntelliJIdea12/config/plugins/python/helpers/pydev/pydevd.py --multiproc --client 127.0.0.1 --port 60283 --file manage.py celeryd -E -B --loglevel=INFO`

当我在 PyCharm 中简单地运行进程而不附加调试器时，永远不会显示 ImportError 消息并且我的任务确实完成了。

最后，我知道在我的路径中找到了 pydevd，因为我可以在我的代码中手动输入以下内容：

```
from pydev import pydevd
pydevd.settrace('my_host', port=5643, stdoutToServer=True, stderrToServer=True) 
```

并且调试器将成功附加。然而，问题是，这远不如在 PyCharm 中设置一些断点并单击“调试”方便。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T03:11:07.577

当我升级芹菜和台球时，这个问题就消失了：

```
billiard==2.7.3.23
celery==3.0.17 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-07T08:20:11.320

对于调试 celery，我发现添加以下配置更简单：

```
from celery import current_app
current_app.conf.CELERY_ALWAYS_EAGER = True
current_app.conf.CELERY_EAGER_PROPAGATES_EXCEPTIONS = True 
```

这使得 celery 与当前执行的线程在同一个线程中运行。

# sql-server - MSSQL 2008：连接字符串错误

> ID：15596914
> 
> 赞同：0
> 
> 时间：2013-03-24T09:32:04.140
> 
> 标签：sql-server, sql-server-2008, jdbc

在我的 config.properties 我有：

```
url = jdbc:sqlserver://ABC\SQLSERVER2008:1433;databasename=M4E;username=sa;password=123456
driver = com.microsoft.sqlserver.jdbc.SQLServerDriver 
```

但它没有正确连接到数据库。我得到错误：

> com.microsoft.sqlserver.jdbc.SQLServerException：与主机 ABCSQLSERVER2008、端口 1433 的 TCP/IP 连接失败。错误：“null。验证连接属性，检查 SQL Server 实例是否正在主机上运行并在端口接受 TCP/IP 连接，并且没有防火墙阻止与端口的 TCP 连接。”。

当我调试时，它显示为 ABCSQLSERVER2008，而不是我期望的 ABC\SQLSERVER2008。

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T10:36:18.607

请试试：

```
url = jdbc:sqlserver://ABC\\SQLSERVER2008:1433;databasename=M4E;username=sa;password=123456 
```

# iterator - 使用时指定动态 id 我需要生成布尔复选框并提供不同的 ID 以跟踪单击了哪个复选框，如下所示： 这不会添加 Employeedid。 而不是这个，当我使用它时，它可以工作并动态生成 id。 有关如何使用迭代器和 selectbooleancheckbox 问问题 问问题 2013-03-24T09:32:41.590 604 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. iteratororacle-adf 4 0 回答 0 Related 1 c - printf debugging to trace a function 2 winapi - mciSendString with Visual C++ - Parameters? 3 c# - c# events execution are thread safe? 1 eclipse - Set Vaadin default browser as Chrome 0 jquery - jQuery Isotope Combination Filters with BBQ Hash History - 在浏览历史时突出显示过滤器选项 2 zurb-foundation - Zurb Foundation Switch 控制如何工作 2 typo3 - TYPO3：BE用户只能看到他们创建的记录吗？ 0 c++ - 找不到未处理异常的原因 2 .net - .NET 方法用 Long 类型限定符解析字符串 1 jquery - Jquery 在 Firefox、IE 和 chrome 中运行 mp4 文件 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

ID：15596916

赞同：0

时间：

标签：iterator, oracle-adf

# c# - 将许多 Excel 图表作为链接粘贴到 Word

> ID：15596923
> 
> 赞同：2
> 
> 时间：2013-03-24T09:33:28.383
> 
> 标签：c#, excel, vba, ms-word

我正在尝试编写 C# 代码以从 Excel 复制粘贴图表并在 MS Word 中使用粘贴链接，因为在 Excel 中，当您对表格、文本、图表等使用粘贴链接时，我可以单击更新 Word 中的所有字段在您更改 Excel 中的任何内容后。

我试图使用 OpenXML 在 Word 中添加内容控件并将图表粘贴到这些位置，就像这个博主所做的那样。 [http://www.dotblogs.com.tw/angus/archive/2010/05/19/15332.aspx](http://www.dotblogs.com.tw/angus/archive/2010/05/19/15332.aspx)

我为每个图表添加了“图片”类型的内容控件，它们已成功粘贴，但不是链接。因此，当我在 Excel 数据更改后单击 Word 中的“立即更新链接”时，Word 中的图表保持不变。

也许我没有添加正确类型的内容控件？我不知道应该使用哪种类型的链接。

任何人都可以向我指出一些源代码甚至软件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-30T11:57:00.737

看看这里：

**VBA：** [如何以编程方式将 Excel 图表插入 Word](http://support.microsoft.com/kb/176868)。

**C#：** [为数据插入和提取自动化字表](http://msdn.microsoft.com/en-us/library/office/aa537149%28v=office.11%29.aspx#officewordautomatingtablesdata_linkingintables)

神奇的是**PasteSpecial**方法及其输入参数：**链接**设置为**True** ;)

有关详细信息，请参阅：[链接或嵌入 Excel 工作表](http://office.microsoft.com/en-us/word-help/link-or-embed-an-excel-worksheet-HA010120810.aspx)

# javascript - 使用表单输入附加 URL

> ID：15596927
> 
> 赞同：2
> 
> 时间：2013-03-24T09:34:08.447
> 
> 标签：javascript, append, query-string

这是我第一次尝试用 javascript 编写任何东西，虽然这完全符合预期，但我相信它可以做得更简单。并不是说这个脚本很有用，只是一个学习新东西的练习。我也试图不使用邪恶的文档写入。

那么更优雅的方法是什么？

```
<html>
<body>

<input name="abc" type="text" id="foo">
<button onclick="AddInputValue()">Submit</button>

<p id="displayURL"></p>

<script>
function AddInputValue(){
var domain = "http://site.com?abc="
var qstring = document.getElementById("foo").value;
document.getElementById("displayURL").innerHTML=domain + qstring;
}
</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T09:42:53.470

如果你使用**jQuery**：

```
<html>
    <!-- Include jQuery! -->
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <body>
        <form id="form1">
            <input name="abc" type="text" id="foo">
            <button type="submit">Submit</button>
        </form>

        <p id="displayURL"></p>

        <script>
            $(document).ready(function () {
                var form = document.getElementById("form1");
                $(form).submit(function () {
                    var domain = "http://site.com/?";
                    var data = $(this).serialize();

                    document.getElementById("displayURL").innerHTML = domain + data;

                    return false;
                });
            });
        </script>
    </body>
</html> 
```

您甚至可以添加更多表单元素，并且`name`元素的 将匹配查询字符串。[http://jsfiddle.net/3muu6/](http://jsfiddle.net/3muu6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T19:25:58.660

只需在[http://jsfiddle.net/3muu6/](http://jsfiddle.net/3muu6/)中发布示例。

增加了输入的数量。这基本上是 Google Analytics URL Builder 所做的，也是本练习的灵感来源。

```
<html>
<head>
<!-- Include jQuery! -->
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js">
</script>
</head>

<body>
 <form id="form1">
    <input name="abc" type="text" id="foo" /><br />
    <input name="def" type="text" id="bar" /><br />
    <input name="ghi" type="text" id="tar" /><br />
    <input name="jkl" type="text" id="boo" /><br />
<button type="submit">Submit</button>
</form>
<p id="displayURL"></p>

<script>
$(document).ready(function () {
    var form = document.getElementById("form1");
    $(form).submit(function () {
        var domain = "http://example.com/?";
        var data = $(this).serialize();

        document.getElementById("displayURL").innerHTML = domain + data;

        return false;
    });
}); 
</script>
</body></html> 
```

现在，当用户将输入值留空时，如何省略查询字符串对？唔。

# c# - 从另一个表中读取数据

> ID：15596933
> 
> 赞同：0
> 
> 时间：2013-03-24T09:35:23.247
> 
> 标签：c#, asp.net, webforms

我需要提示。我在数据库中创建了两个表，每个表都有一列，称为数量。我把数量的数量变成了文本，所以用户可以输入数量。我确实循环了第一个表，并通过单击循环按钮在网格视图中显示了整个表的结果。我需要知道的是，如何插入或添加用户通过另一个表中的按钮输入的数量，所以我可以在表的记录中找到它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T10:39:05.247

您是否尝试将一个表的整个副本插入到另一个表中？？？？如果您尝试在第一个表的 gridview 中插入所选行的数据，您可以使用 DATAKEYFIELD="TableID" 到您的 GRID VIEW 并可以通过 GRIDVIEW 事件访问它（项目命令有帮助），它将返回您的 ID第一个表，所以现在你得到了 Id 意味着你得到了数据，记住 ID 应该是你数据库表中的主键

# c - 在 Windows XP 下，使用 C 语言：检查文件是否打开

> ID：15596944
> 
> 赞同：4
> 
> 时间：2013-03-24T09:36:46.737
> 
> 标签：c, windows-xp, rename, file-exists

在我的应用程序中，用 C 编写，在 Windows-XP 下：如何检查文件是否已被另一个应用程序打开？一种选择是重命名文件，并检查它是否被重命名。另一种选择是打开文件进行附加。但是这些选项非常耗时。有没有其他更省时的解决方案来解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T12:36:16.443

Windows API 中不存在用于检查某个函数是否在另一个应用程序中打开的函数。如果它确实存在，它将受到竞争条件的影响。

假设您首先检查了一个文件是否已经打开并且得到的答案是它当前没有打开。然后你继续打开它，但与此同时其他人已经打开它。然后您尝试打开失败。

因此，了解您是否可以打开文件的唯一方法是尝试这样做。如果文件以阻止您尝试打开它的方式打开，则该尝试将失败。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T12:29:40.710

[以独占模式](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363874%28v=vs.85%29.aspx)打开文件。

```
HANDLE file = CreateFile(_T("MyFile"), GENERIC_READ, 0, NULL, OPEN_EXISTING, FILE_ATTRIBUTE_NORMAL);
if (file != INVALID_HANDLE_VALUE)
{
    // file is not used by anyone else
    CloseHandle(file);
} 
```

# c# - 创建自己的对象模型（如 Excel VBA）

> ID：15596946
> 
> 赞同：4
> 
> 时间：2013-03-24T09:37:06.060
> 
> 标签：c#

我是 Stackoverflow 的新手，*如果我问错了问题，希望会员们能原谅我*。我刚刚开始学习 C# 和课程。我想到的一个非常基本的问题是如何创建我的类的对象模型（层次结构）。让我解释 ：

可以说，我有一个名为**PEX**的课程。当我实例化这个类时，它应该包含一些属性、方法和另一个名为**Windows**的类。现在 Windows 还将包含一些方法和属性以及另一个类**Window**。

类 Windows & Window 不应直接访问，而只能通过 PEX 类访问。

Windows 将返回所有 Window 实例......基本上就像 Excel 对象模型一样。

我应该能够做 foreach(Window window in PEX.Windows) { ....} 和其他类似的东西......我也阅读了继承，但无法获得这个对象模型。

```
public class PEX
{
    public _Windows Windows;

    public PEX()
    {
        Windows = new _Windows();
    }
}

public class _Windows
{
    public _Window Window;
    private int _count;

    public _Windows()
    {
        Window = new _Window();
        _count = 10;
    }

    public int Count
    {
        get { return _count; }
    }       
}

public class _Window
{

    private string _title;

    public _Window()
    {
        _title = "Roshan";
    }

    public string Title
    {
        get { return _title; }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T09:42:33.067

您所描述的通常称为[工厂模式](http://en.wikipedia.org/wiki/Factory_method_pattern)。这是父类负责创建子类的地方。此外，您可能希望避免将`Window`其用作类名。这是一个类具有嵌套类的简单示例。

```
public class PEX
{
 public List<PexWindow> Windows { get; set; }//list of windows you can foreach on
 public PEX()
 {
  Windows = new List<PexWindow>();//constructor to make sure the list can be worked with
 }

 private class PexWindow
 {
  public int Param { get; set; }
  public string Description { get; set; }
 }
} 
```

# java - 使用 JPA 和 EJB 插入数据

> ID：15596947
> 
> 赞同：0
> 
> 时间：2013-03-24T09:37:11.227
> 
> 标签：java, hibernate, jakarta-ee, jpa, ejb

假设我想对现有的 JPA 方案执行单个数据操作，例如为每个实体*类*创建 n 个实体*Student*。我添加了处理学生的功能，我想从 CSV 文件中加载它们（只是一个虚构的例子）。当然，我已经准备好了实体和表格。

现在如何在 EJB 范围内做到这一点？

通常使用 Spring 我会简单地编写一个单元测试，它使用 `@RunWith(SpringJUnit4ClassRunner.class)`注释来加载上下文，其中初始化持久性。我无法在 EJB 中执行此操作，因为我依赖 Java EE 容器为我提供数据源和`PersistenceContext`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T09:54:51.760

You can use JPA outside of application containers. When running within an application container, you're using container-managed entity managers. You can use JPA in plain JavaSE applications. In those cases, you want an application-managed entity manager. Which is using the javax.persistence.Persistence class to get the EntityManagerFactory (from which you get the EntityManager).

Once you have the entityManager, you can perform the same code. All you need to do in your tests is ensure you can get at the Persistence class, and you should be all good.

# wpf - WPF 将 MaxDropDownHeight 属性绑定到网格行高

> ID：15596948
> 
> 赞同：0
> 
> 时间：2013-03-24T09:37:22.253
> 
> 标签：wpf, combobox, grid

我有一个组合框，我想将 MaxDropDownHeight 属性动态绑定到第二行高度。

这里的xaml：

```
 <Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="*" />
        <RowDefinition Height="6*" />
    </Grid.RowDefinitions>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*" />
        <ColumnDefinition Width="*" />
    </Grid.ColumnDefinitions>

    <ComboBox MaxDropDownHeight="">

    </ComboBox>
</Grid> 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T10:24:43.967

绑定到您的第二行`Grid`可以通过两种方式实现：

第一：通过`RelativeSource`装箱：

```
<ComboBox DropDownOpened="ComboBox_DropDownOpened" 
          MaxDropDownHeight="{Binding Path=RowDefinitions[1].ActualHeight, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=Grid}, UpdateSourceTrigger=PropertyChanged}">       
</ComboBox> 
```

第二：通过`ElementName`绑定（在这种情况下，您必须在 grid 中设置`Name="RootLayout"`）：

```
<ComboBox DropDownOpened="ComboBox_DropDownOpened" 
          MaxDropDownHeight="{Binding ElementName=RootLayout, Path=RowDefinitions[1].ActualHeight, UpdateSourceTrigger=PropertyChanged}">            
</ComboBox> 
```

在事件处理程序中，您应该使用类`DropDownOpened`更新值 。`MaxDropDownHeight``BindingExpression`

```
private void ComboBox_DropDownOpened(object sender, EventArgs e)
{
    ComboBox cb = sender as ComboBox;
    BindingExpression be = cb.GetBindingExpression(ComboBox.MaxDropDownHeightProperty);
    be.UpdateTarget();
} 
```

# c++-cli - 如何执行多个打开的文件？

> ID：15596950
> 
> 赞同：0
> 
> 时间：2013-03-24T09:37:37.157
> 
> 标签：c++-cli

我的任务就是这样

我创建了一个由两个按钮组成的 GUI，如图所示，

![在此处输入图像描述](../Images/e17aa543d4e365b71b19f2a1d5562c4b.png)

因此，对于“浏览捕获的文件”按钮，我必须通过 OpenFIleDialog 打开多个文件并阅读它。这是打开和读取文件的代码。

```
Stream^ myStream;

OpenFileDialog^ openFileDialog1 = gcnew OpenFileDialog;
openFileDialog1->InitialDirectory = "c:\\";
openFileDialog1->Title = "open captured file";
openFileDialog1->Filter = "CP files (*.cp)|*.cp|All files (*.*)|*.*|txt files (*.txt)|*.txt";
openFileDialog1->FilterIndex = 2;
openFileDialog1->Multiselect = true;

if ( openFileDialog1->ShowDialog() == System::Windows::Forms::DialogResult::OK )
     {

for each (String^ file in openFileDialog1->FileNames) 
{  

       array<String^>^ lines = System::IO::File::ReadAllLines(file);  

     for each (String^ line in lines) 
     {          
     }
} 
```

}

之后，我想开始对每个文件进行实施。我打开的文件例如“1_1.cp”、“2_1.cp”和“3_1.cp”。在“开始分析”按钮，我将开始对文件进行分析，并需要分配每个文件来执行不同的任务或功能。

现在我的问题是，我将如何分配每个打开的文件来执行特定的任务或功能。比如1_1.cp做任务A，2_1.cp做任务B等等？任何人都可以帮助提出一些想法？

我想把它变成一个自动化系统。

提前谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T09:45:37.590

您需要为自己定义一个工作方法，`System::Threading::ThreadPool`并且在分析一行时，将一个项目排队到`ThreadPool`.

```
 for each (String^ line in lines) 
 {
    System::Threading::ThreadPool::QueueUserWorkItem( gcnew WaitCallback(YourMethod), dataToPass);    
 } 
```

在[这里](http://msdn.microsoft.com/en-us/library/system.threading.threadpool.aspx?cs-save-lang=1&cs-lang=cpp#code-snippet-1)寻找`ThreadPool`。

# css - 将媒体查询放入 mixin

> ID：15596951
> 
> 赞同：4
> 
> 时间：2013-03-24T09:37:47.173
> 
> 标签：css, media-queries, stylus

我有很多 css 文件，并且经常出现：

```
@media all and (max-width: 400px), (orientation: portrait) {
    ....//In each file different style that relevant to the component the file represnt
} 
```

我正在使用手写笔。
有一天，我的老板让我将媒体查询更改为：

```
@media all and (max-width: 400px), (max-height: 400px) {
    ....
} 
```

现在我需要搜索我的所有文件并替换为新的媒体查询。

是否有任何选项可以将此媒体查询放入 mixin 或其他东西中？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-06-21T09:41:16.107

取自[我之前回答的一个问题](https://stackoverflow.com/questions/15222219/are-lots-of-media-queries-spread-across-files-ok/17231406#17231406)。这是我使用的黑客：

在`variables.styl`

```
smartphoneWidth = 748px
tabletWidth     = 1012px

mqSmartphone = "only screen and (max-width: " + smartphoneWidth + ")"
mqTablet     = "only screen and (max-width: " + tabletWidth     + ")" 
```

现在在您的其他手写笔文件中，您可以使用：

```
@media mqSmartphone
    // Styles go here

@media mqTablet
    // Styles go here 
```

虽然仍然很丑，但我觉得它比使用 unquote() 稍微优雅一些

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-09-27T13:11:58.747

With stylus, you can also define a couple of [block mixins](http://learnboost.github.io/stylus/docs/mixins.html#block-mixins) if you prefer. I use this:

```
widerthan(var)
  condition = 'screen and (min-width: %s)' % var
  @media condition
    {block}

narrowerthan(var)
  condition = 'screen and (max-width: %s)' % var
  @media condition
    {block}

mobile = 748px 
```

Which you can then use like this:

```
button
  +narrowerthan(mobile)
    flex-direction column 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T15:49:32.517

由于 Stylus 不支持媒体查询中的插值或变量（或 mixins 的块参数），因此您只能使用此 hack：

```
$my_query = "@media all and (max-width: 400px), (orientation: portrait) {"

unquote($my_query)
…
unquote("}") 
```

那么当您需要更改查询时，您需要更改`$mu_query`变量。

除了丑陋的语法之外，唯一的缺点是这不适用于冒泡的媒体查询。

# javascript - 如何在没有ID的文本区域中输入随机值？

> ID：15596953
> 
> 赞同：1
> 
> 时间：2013-03-24T09:37:48.033
> 
> 标签：javascript, textarea, greasemonkey

我必须`textarea`使用油脂猴子脚本在网站的 a 中输入随机值，文本区域没有，`id`所以`document.getElementById`不起作用。

我可以使用另一种方法来做到这一点吗？

我当前的 HTML 显示我的`textarea`：

```
<tr>
    <td class="tdv pd5"><span class="tbg">
        Message</span>&nbsp;</span>
    </td>
    <td class="pd5">
        <textarea name="inpx_msg" class="msgbox"></textarea>
        <br />
        <div class="tsm">140 characters max.</div>
    </td>
</tr> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T09:42:22.060

使用[getElementsByName](https://developer.mozilla.org/docs/DOM/document.getElementsByName)：

```
document.getElementsByName("inpx_msg")[0] 
```

显然，您必须检查它是否存在等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T10:00:37.673

如果您希望能够使用 CSS 选择器专门定位元素，则可以使用[**element.querySelector ，类似于以下内容：**](https://developer.mozilla.org/en-US/docs/DOM/Element.querySelector)

```
var textArea = document.querySelector('table tr td.pd5 textarea.msgbox');
textArea.value = "My Random Text"; 
```

以上正在处理以下 HTML 示例：

```
<table>
    <tbody>
        <tr>
            <td class="tdv pd5"><span class="tbg">Message</span>&nbsp;</span>
            </td>
            <td class="pd5">
                <textarea name="inpx_msg" class="msgbox"></textarea>
                <br />
                <div class="tsm">140 characters max.</div>
            </td>
        </tr>
    </tbody>
</table> 
```

* * *

[**演示**](http://jsfiddle.net/rFJeM/)- 使用`element.querySelector`

* * *

当然，您现在可以将 CSS 选择器更改为您喜欢的任何内容以匹配您的 DOM 层次结构。使用`element.querySelector`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T16:15:07.493

[使用getElementsByTagName](https://developer.mozilla.org/en-US/docs/DOM/document.getElementsByTagName)可能会有所帮助：

```
document.getElementsByTagName("textarea")[0] 
```

当然，如果您有多个 textarea 标签，则必须根据它们可能具有的属性来区分它们。或者，如果您知道您的 textarea 位于具有 ID 的特定元素内，您可以尝试

```
document.getElementById("someparentid").getElementsByTagName("textarea")[0] 
```

# javascript - 如何将包含数组的 json 转换为 javascript 对象？

> ID：15596954
> 
> 赞同：-1
> 
> 时间：2013-03-24T09:37:50.023
> 
> 标签：javascript, jquery, json

我有如下的json，

```
{
    "Message": "{\"Errors\":[\"The message.\",\"The message.\"],\"Infos\":[\"The message.\"],\"Warnings\":[\"The message.\"],\"Successes\":[\"The message.\"]}"
} 
```

我想将其转换为如下所示的对象，

```
var obj = {
    Errors : new Array(),
    Infos : new Array(),
    Warnings : new Array(),
    Successes : new Array()
} 
```

**注意：**我无法对 json 进行更改。

我使用**了 jQuery.parseJson**，但我做不到。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T09:41:13.827

您发布的内容很不寻常：它是 JSON 定义具有单个属性的对象，该属性`Message`具有包含第二个嵌入 JSON 字符串的字符串值。很奇怪的结构。

如果您真的以 JSON 形式接收它，那么：

```
var outer = jQuery.parseJSON(theStringWithTheJSON);
var obj = jQuery.parseJSON(outer.Message); 
```

[实例](http://jsbin.com/adutof/1)| [资源](http://jsbin.com/adutof/1/edit)

但是，如果您通过`ajax`（例如）检索该信息，jQuery 很可能已经`parseJSON`为您完成了第一个操作，在这种情况下您只需要执行第二个操作：

```
jQuery.ajax({
    /* ...other parameters here...*/
    success: function(data) {
        var obj = jQuery.parseJson(data.Message);
    }
}); 
```

[实例](http://jsbin.com/adutof/2)| [资源](http://jsbin.com/adutof/2/edit)

但是，如果可以的话，我可能会更改您收到的字符串的结构，因此它不会像这样进行双重编码：

```
{
    "Message": {
        "Errors": [
            "The message.",
            "The message."
        ],
        "Infos": [
            "The message."
        ],
        "Warnings": [
            "The message."
        ],
        "Successes": [
            "The message."
        ]
    }
} 
```

然后你不需要对它进行双重解码，只需第一次解码（可能已经为你完成了，你没有显示任何代码，所以很难说）是必要的，你可以使用`var obj = yourVariable.Message;`.

[实例](http://jsbin.com/adutof/3)| [资源](http://jsbin.com/adutof/3/edit)

# java - Java 静态变量和继承与内存

> ID：15596955
> 
> 赞同：6
> 
> 时间：2013-03-24T09:37:50.257
> 
> 标签：java, class, memory, static, subclass

我知道如果我有同一个类的多个实例，它们都将共享相同的类变量，所以无论我有多少类实例，类的静态属性都将使用固定数量的内存。

我的问题是： **如果我有几个子类从它们的超类继承一些静态字段，它们会共享类变量吗？**

如果没有，确保它们共享相同的类变量的最佳实践/模式是什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-24T09:38:58.307

> **如果我有几个子类从它们的超类继承一些静态字段，它们会共享类变量吗？**

是的，它们将在单个类加载器中在当前运行的应用程序中共享相同的类变量。
例如，考虑下面给出的代码，这将使您清楚地了解每个子类共享类变量。

```
class Super 
{
    static int i = 90;
    public static void setI(int in)
    {
        i = in;
    }
    public static int getI()
    {
        return i;
    }
}
class Child1 extends Super{}
class Child2 extends Super{}
public class ChildTest
{
    public static void main(String st[])
    {
        System.out.println(Child1.getI());
        System.out.println(Child2.getI());
        Super.setI(189);//value of i is changed in super class
        System.out.println(Child1.getI());//same change is reflected for Child1 i.e 189
        System.out.println(Child2.getI());//same change is reflected for Child2 i.e 189
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-24T09:40:49.917

对于给定的类加载器，该类或子类的所有实例共享相同的静态字段。

注意：如果您在多个类加载器中多次加载同一个类，则每个类加载器都有自己的静态字段副本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T09:56:50.440

Yes all the class hierarchy(same class and all child classes instances) share the same static variable. As the JAVA doesn't support the global variable but you are able to use the static variable as a Global variable without violation of OOP concepts.

If you changed the value of static variable from one of the class, the same changed value replicated to all the classes that uses this variable.

# php - 形成脚本传递强度并生成传递

> ID：15596979
> 
> 赞同：0
> 
> 时间：2013-03-24T09:41:40.907
> 
> 标签：php, javascript, forms

我在表单上有以下脚本用于输入密码：

```
$('#genPass').click(function() {
    var password = "";
    var possible = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";

    for (var i = 0; i < 12; i++)
    password += possible.charAt(Math.floor(Math.random() * possible.length));
    $('input[name="password"]').val(password);
    document.getElementById("str").innerHTML = password;

});

function passwordStrength(password)

{

    var desc = new Array();

    desc[0] = "Very Weak";

    desc[1] = "Weak";

    desc[2] = "Better";

    desc[3] = "Medium";

    desc[4] = "Strong";

    desc[5] = "Strongest";

    var score   = 0;

    //if password bigger than 6 give 1 point

    if (password.length > 6) score++;

    //if password has both lower and uppercase characters give 1 point      

    if ( ( password.match(/[a-z]/) ) && ( password.match(/[A-Z]/) ) ) score++;

    //if password has at least one number give 1 point

    if (password.match(/\d+/)) score++;

    //if password has at least one special caracther give 1 point

    if ( password.match(/.[!,@,#,$,%,^,&,*,?,_,~,-,(,)]/) ) score++;

    //if password bigger than 12 give another 1 point

    if (password.length > 12) score++;

     document.getElementById("passwordStrength").innerHTML = desc[score];

     document.getElementById("passwordStrength").className = "strength" + score;

} 
```

输入字段和生成密码按钮：

```
<input name="password" type="password" size="25" maxlength="20" id="pass" onchange="passwordStrength(this.value)" onselect="passwordStrength(this.value)" onclick="passwordStrength(this.value)"/>

<button id="genPass" type="button">Generate Password !</button> 
```

现在，一旦您单击一个按钮，它就会在密码输入中生成一个密码，但只有在您单击密码输入字段时，才会显示通过强度。我希望它在您单击生成按钮时显示强度，有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T09:45:57.337

```
$('#genPass').click(function() {
    var password = "";
    var possible = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";

    for (var i = 0; i < 12; i++)
    password += possible.charAt(Math.floor(Math.random() * possible.length));
    $('input[name="password"]').val(password);
    document.getElementById("str").innerHTML = password;
    passwordStrength(password); //added this

}); 
```

# php - PHP Mysql 配置在 Windows 7 上引发 dll 错误

> ID：15596982
> 
> 赞同：0
> 
> 时间：2013-03-24T09:42:15.410
> 
> 标签：php, mysql

在运行 php 命令时，它会引发以下错误

```
c:\> php -v 
```

![ql](../Images/6978d9c3338e3c97ba3288fb094b2ec1.png)

```
php.ini file

; Directory in which the loadable extensions (modules) reside.
extension_dir ="C:\PHP\ext"
extension=php_mysql.dll
extension=php_mysqli.dll
extension=php_pdo_mysql.dll 
```

# spring-mvc - 阔叶贸易中的货币变化

> ID：15596987
> 
> 赞同：0
> 
> 时间：2013-03-24T09:43:01.143
> 
> 标签：spring-mvc, thymeleaf, broadleaf-commerce

我正在尝试更改出现在整个阔叶应用程序中的更改货币符号。

探索代码我发现 BLC 有一个 thymleaf 方言 'blc' 和属性 'price' 以在网页中呈现价格/成本。

例子：

```
<div style="font: 32px/28px 'Oxygen', Helvetica, sans-serif;" blc:price="${order.total}"></div> 
```

参考“ **org.broadleafcommerce.core.web.processor.PriceTextDisplayProcessor** ”类，被覆盖的方法 getText 似乎返回带有价格的“$”符号：-

```
 if (price == null || price.isZero()) {
        return "$0.00";
    } else {
        return "$" + price.getAmount().toString();
    } 
```

怀疑：-

1.  为 BLC 方言和处理器定义的 spring bean 在哪里？如何实际配置 blc 方言以及如何为价格属性配置我自己的处理器。

2.  “货币分辨率”如何与此相关[参见此处](http://docs.broadleafcommerce.org/2.2/Currency-Resolution.html)

3.  此问题的任何快速解决方法。

如果我遗漏任何信息，请纠正我。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T19:33:35.843

库马尔，

您需要升级到 Broadleaf Commerce 2.2，其中 PriceTextDisplayProcessor 已得到增强以处理货币格式。

关于您的其他问题的信息：

*   Broadleaf Commerce 提供了一组统称为 BLCDialect 的 Thymeleaf 处理器。大多数都[在 Github 上的这个文件中定义](https://github.com/BroadleafCommerce/BroadleafCommerce/blob/master/core/broadleaf-framework-web/src/main/resources/bl-framework-web-applicationContext.xml)
*   [此处](http://docs.broadleafcommerce.org/2.2/Merge-Configuration.html)讨论了创建您自己的百里香方言以与 BLC 一起使用。
*   在 2.2 中，设置语言环境（通常是货币）的关键机制发生在[BroadleafRequestProcessor](https://github.com/BroadleafCommerce/BroadleafCommerce/blob/BroadleafCommerce-2.2.x/common/src/main/java/org/broadleafcommerce/common/web/BroadleafRequestProcessor.java)

对多种货币的支持是通过作为 Broadleaf Commerce 商业模块一部分的价目表功能实现的。可以使用上述步骤显示单一货币，或者在您的情况下通过编写自己的 Thymeleaf 处理器更简单。

# ruby-on-rails - ElasticSearch 将嵌套文档与 boost 匹配

> ID：15596988
> 
> 赞同：3
> 
> 时间：2013-03-24T09:43:01.520
> 
> 标签：ruby-on-rails, elasticsearch, tire

我有一个用户模型，用户可以有多种兴趣，这个人对主题的兴趣程度有多大。一个样本`user.to_indexed_json` 是：

```
{
   // user attributes
  interests: [
    {category_id: 1, degree: 1}
    {category_id: 2, degree: 3}
    // more category stuff here
  }
} 
```

映射是：

```
 tire do
    mapping do
      indexes :name,   type: 'string', analyzer: 'snowball'
      indexes :email,   type: 'string', analyzer: 'snowball'
      indexes :lat_lon, type: 'geo_point'
      indexes :interests, type: 'nested', :category_id => :number
    end
  end 
```

给定一个包含多个传入兴趣（基本上是另一个用户的兴趣）的数组 [{category_id, degree}, {category_id, degree}]，匹配所有具有这些相似兴趣的用户，并按度数排序（提升）。我尝试了很多不同的查询，但无法获得结果。

您知道如何编写轮胎查询吗？是`dis_max`嵌套查询还是我应该研究的更多内容？

我无法在 Tire 中编写查询，所以我编写了原始 JSON 搜索查询。我可以得到一些结果，但它没有任何提升

```
{
  "query": {
    "filtered": {
      "query": { "match_all": {} },
      "filter": {
        "nested": {
          "path": "interests",
          "query": {
            "bool": {
              "minimum_number_should_match": 1,
              "should": [
                {"match": { "interests.category_id": 7}
                ,{"match": {"interests.category_id": 1}}
                ,{"match": {"interests.category_id": 10}}
              ]
            }
          }
        }
      }
    }
  }
} 
```

我是 ES 的新手，所以非常感谢任何帮助。

# c# - 使用迭代器块减少嵌套的 for 循环和 if 语句？

> ID：15596994
> 
> 赞同：-1
> 
> 时间：2013-03-24T09:43:52.160
> 
> 标签：c#

是否可以减少这种长嵌套的 for 循环和 if 条件以增加其可读性并对其进行优化以供将来参考。

在为我的日程安排应用程序编写代码时，我最终得到了如下所示的方法。[真的，我有这样](http://pastie.org/7097616)的数据结构。在这里，我检查 - 是否有任何阶段（在 LCycle 内部）同时使用相同的工具，如果发现，`LCycleTimeShift`则调用另一种方法进行重新排列。

但我想检查新的排列是否具有适应性，并重置 for 循环计数器，以便再次检查新的排列。我认为这不是编写代码以提高可读性的更好方法。对该主题的一些研究发现枚举器可以在这方面帮助我。但我不知道如何使用以下代码完成此操作。

```
public List<LCycle> ToolArrangment(List<LCycle> TimeLineInit)
{
    for (int i = 0; i < TimeLineInit.Count; i++)//Each LIfeCycles In TimeLine
    {
        for (int j = 0; j < TimeLineInit[i].Stage.Count; j++)//Each Stages inTimeLine
        {
            for (int k = 0; k < i; k++)//Each L esvd =ifeCycles Upto Current LifeCycle
            {
                for (int l = 0; l < TimeLineInit[k].Stage.Count; l++)//Each Stages of (LifeCycle upto current LifeCycle) 
                {
                    for (int m = 0; m < TimeLineInit[i].Stage[j].ToolList.Count; m++)//each tools in stage of timelkine
                    {
                        for (int n = 0; n < TimeLineInit[k].Stage[l].ToolList.Count;n++ )// Each tools In that stage (for loop outer of outer)
                        {
                            if (TimeLineInit[i].Stage[j].ToolList[m].ToolName == TimeLineInit[k].Stage[l].ToolList[n].ToolName)//If both tools are same (satidfying above for loop conditions)
                            {
                                if (IsTimeOverLaps(TimeLineInit[i].Stage[j].StageSpan, TimeLineInit[k].Stage[l].StageSpan))
                                {//tool using at same time.
                                    Stage ReplaceStage = TimeLineInit[i].Stage[j].DeepCopy();//Taking Copy of stage Span to make time shift
                                    Double TimeDifference=(ReplaceStage.StageSpan.ToTime-ReplaceStage.StageSpan.FromTime).TotalMinutes;//Calculating required time shift
                                    ReplaceStage.StageSpan.FromTime=TimeLineInit[k].Stage[l].StageSpan.ToTime;//FromTime changed accordingly
                                    ReplaceStage.StageSpan.ToTime=ReplaceStage.StageSpan.ToTime.AddMinutes(TimeDifference);//To Time Changed accordingly
                                    LCycleTimeShift(TimeLineInit[i], ReplaceStage);//passing refernce
                                    j = 0; k = 0; l = 0; m = 0; n = 0;//Counter Reset to validate the new arrangment
                                }
                            }
                        }
                    }
                }
            }
        }
    }

    return TimeLineInit;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T09:48:58.473

尝试使用 LINQ ，尤其是 SelectMany 和 Join 方法

```
var t = TimeLineInit
          .SelectMany(t=>t.Stage)
          .SelectMany(s=>s.ToolList);

... 

t
 .Join(t, [your conditions 1])
 .Join(t, [your conditions 2]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T09:48:52.407

唯一合理的选择是将迭代的东西作为方法放在你的模型中相互调用，这样它就会更具可读性，也更容易理解。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T10:54:13.483

在你开始走那条路之前做一些事情。代码现在工作了吗？你有单元测试吗？我只问是因为在开始任何重构之前，如果您有测试用例，那就太好了。

关于枚举数的话题，有一行代码让我印象深刻：

```
LCycleTimeShift(TimeLineInit[i], ReplaceStage);//passing refernce
j = 0; k = 0; l = 0; m = 0; n = 0;//Counter Reset to validate the new arrangment 
```

您不允许在枚举操作中修改集合，因此您可能会发现无论您在该函数中执行的任何魔术都可以与 for(...) 一起正常工作，但它可能不再适用于 foreach(.. .) 或 LINQ 枚举。仅当它正在删除，将项目添加到集合中时，这才是正确的，它似乎正在这样做。我必须在下面进行一些更改，因为我假设枚举在每次通过后都会发生变化，这意味着我每次都重新评估重复项。

正如您所说，您似乎想要找到包含同时使用的相同工具的任何两个阶段（不属于同一个 LCycle）。然后，您对该阶段的时间进行一些更改，然后修改父级。我感觉合理。这就是我想出的。我没有任何测试用例，但也许它能让你朝着正确的方向前进。

```
var toolsInUse = TimeLineInit
                    .SelectMany(cycle => cycle.Stage
                    .SelectMany(stage => stage.ToolList.Select(tool => new
{
    Cycle = cycle,
    Stage = stage,
    Tool = tool.ToolName
})));

var duplicateUse = toolsInUse.Join(toolsInUse, 
                                    x => x.Tool, 
                                    x => x.Tool, 
                                    (a, b) => new { Use = a, Duplicate = b })
                                .Where(x => x.Use.Cycle != x.Duplicate.Cycle &&
                                            IsTimeOverLaps(x.Use.Stage.StageSpan, x.Duplicate.Stage.StageSpan));

while (duplicateUse.Count() > 0)
{
    var item = duplicateUse.First();

    Stage ReplaceStage = item.Use.Stage.DeepCopy();//Taking Copy of stage Span to make time shift
    Double TimeDifference = (ReplaceStage.StageSpan.ToTime - ReplaceStage.StageSpan.FromTime).TotalMinutes;//Calculating required time shift
    ReplaceStage.StageSpan.FromTime = item.Duplicate.Stage.StageSpan.ToTime;//FromTime changed accordingly
    ReplaceStage.StageSpan.ToTime = ReplaceStage.StageSpan.ToTime.AddMinutes(TimeDifference);//To Time Changed accordingly
    LCycleTimeShift(item.Use.Cycle, ReplaceStage);//passing refernce
} 
```

我对性能和准确性不做任何声明。这只是为您指明一个方向。我希望它有所帮助。

# java - 如何在屏幕上显示标记

> ID：15596998
> 
> 赞同：1
> 
> 时间：2013-03-24T09:44:07.347
> 
> 标签：java, android, google-maps-android-api-2

我尝试使用 GoogleMap API 2 创建 android java 应用程序。

Marker.isVisible() 如果标记在地图上，则返回 true，包括标记是否在地图上但不在当前屏幕上（现在向用户显示的地图片段）。我需要当前屏幕上的可见性状态。

在当前地图屏幕上查看我的标记的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T10:45:10.463

查看 Maps API 文档，它应该是：

```
GoogleMap map = getMap();
LatLngBounds visibleBounds = map.getProjection().getVisibleRegion().latLngBounds;
boolean isMarkerVisible = visibleBounds.contains(marker.getPosition()); 
```