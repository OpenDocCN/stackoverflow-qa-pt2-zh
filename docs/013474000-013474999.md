# StackOverflow 问答 13474000-13474999

# linux - ARM 性能计数器与 linux clock_gettime

> ID：13474000
> 
> 赞同：4
> 
> 时间：2012-11-20T13:14:58.683
> 
> 标签：linux, arm, performancecounter, gettime, time-measurement

我在开发板 (ZC702) 上使用 Zynq 芯片，它有一个 667MHz 的双 cortex-A9 MPCore，并带有一个 Linux 内核 3.3 我想比较一个程序的执行时间，所以首先使用 clock_gettime 然后使用由 ARM 的协处理器提供的计数器。计数器每一个处理器周期递增一次。（基于这个[stackoverflow的问题](https://stackoverflow.com/questions/3247373/how-to-measure-program-execution-time-in-arm-cortex-a8-processor)和[这个](http://archlinuxarm.org/forum/viewtopic.php?f=23&t=3291)）

我用 -O0 标志编译程序（因为我不希望完成任何重新排序或优化）

我用性能计数器测量的时间是 583833498（周期）/666.666687 MHz = **875750.221**（微秒）

使用 clock_gettime() （ REALTIME 或 MONOTONIC 或 MONOTONIC_RAW ）时，测量的时间为： **731627.126**（微秒），少了**150000**微秒。

谁能解释我为什么会这样？为什么有区别？处理器没有时钟缩放，如何通过 clock_gettime 获得更少的执行时间？我在下面有一个示例代码：

* * *

```
#define RUNS 50000000
#define BENCHMARK(val) \
__asm__  __volatile__("mov r4, %1\n\t" \
                 "mov r5, #0\n\t" \
                 "1:\n\t"\
                 "add r5,r5,r4\n\t"\
                 "mov r4 ,r4  \n\t" \
                 "mov r4 ,r4  \n\t" \
                 "mov r4 ,r4  \n\t" \
                 "mov r4 ,r4  \n\t" \
                 "mov r4 ,r4  \n\t" \
                 "mov r4 ,r4  \n\t" \
                 "mov r4 ,r4  \n\t" \
                 "mov r4 ,r4  \n\t" \
                 "mov r4 ,r4  \n\t" \
                 "mov r4 ,r4  \n\t" \
                 "sub r4,r4,#1\n\t" \
                 "cmp r4, #0\n\t" \
                 "bne 1b\n\t" \
                 "mov %0 ,r5  \n\t" \
                 :"=r" (val) \
                 : "r" (RUNS) \
                 : "r4","r5" \
        );
clock_gettime(CLOCK_MONOTONIC_RAW,&start);
__asm__ __volatile__ ("MRC p15, 0, %0, c9, c13, 0\t\n": "=r"(start_cycles));
for(index=0;index<5;index++)
{
    BENCHMARK(i);
}
__asm__ __volatile__ ("MRC p15, 0, %0, c9, c13, 0\t\n": "=r"(end_cycles));
clock_gettime(CLOCK_MONOTONIC_RAW,&stop); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T10:31:23.350

我找到了解决方案。我将平台从 linux 内核 3.3.0 升级到 3.5，其值与性能计数器的值相似。显然，假设 3.3.0 中时钟计数器的频率高于它的频率（大约 400 MHz），而不是 CPU 频率的一半。可能是旧版本中的移植错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T13:52:38.697

POSIX 时钟在一定精度内运行，您可以使用`clock_getres`. 检查 150,000us 的差异是否在误差范围之内或之外。

无论如何，没关系，您应该多次重复基准测试，而不是 5 次，而是 1000 次或更多。然后，您可以获得单个基准测试运行的时间，例如

`((end + e1) - (start + e0)) / 1000`， 或者

`(end - start) / 1000 + (e1 - e0) / 1000`.

如果`e1`和`e0`是由一个小常数限制的误差项，则您的最大测量误差将为`abs (e1 - e0) / 1000`，随着循环次数的增加，该误差可以忽略不计。

# javascript - Raphael & Href 目标

> ID：13474008
> 
> 赞同：0
> 
> 时间：2012-11-20T13:15:21.277
> 
> 标签：javascript, svg, raphael

我有链接，在我的绘图中作为带有 h​​ref 和 target 参数的文本完成。我可以看到 TARGET 存在，但在单击链接后，尽管 Target 设置为“_blank”，它仍会在当前窗口中打开。我的浏览器是当前的 Chrome 23.whatever 这是我在页面中看到的内容：

```
<a style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);" xlink:href="http://www.google.com" xlink:target="_blank">
<text style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: start; font-style: normal; font-variant: normal; font-weight: normal; font-size: 14pt; line-height: normal; font-family: Arial; opacity: 1;" x="275.8000030517578" y="157.31666564941406" text-anchor="start" font="14pt &quot;Arial&quot;" stroke="none" fill="#0070c0" opacity="1">
<tspan style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
This is the link to Google
</tspan></text></a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T14:26:13.733

尽管有 xlink:show 属性，但它只是[目标（没有 xlink）。](http://www.w3.org/TR/SVG/linking.html#AElementTargetAttribute)

# mysql - Invoke pusher when mysql has changed

> ID：13474012
> 
> 赞同：6
> 
> 时间：2012-11-20T13:15:26.047
> 
> 标签：mysql, pusher

How possible is it to get `mysql` database changes to be pushed to a an admin screen without admin interaction using `pusher`?

Can `pusher` run some kind of listener for changes on the `mysql` or will `pusher` simple do some kind of fancy polling?

All in all how would such a setup be coded?

A simple example or a link would be very much appreciated.

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-20T19:25:24.610

# Invoke PubNub PUSH Message via MySQL Trigger on UPDATE, INSERT and DELETE

> ⚠️ **Warring!** this may cause slowdowns on your database. This will introduce relatively poor performance given sys exec'ing curl for every insert. Far better to also have a trigger write the message to another table and have another process checking for new rows in a loop.

MySQL Makes it simple to wrap your coding into easily accessible **TRIGGERS** via Stored Procedures. You can create something similar with pusher and I know how to do it with PubNub; so here is a quick guide with PubNub and MySQL. Simplicity is what you seek and here is your solution! I will walk you through an easy way to bind any **UPDATE**, **INSERT** and **DELETE** action on your table to a stored function that will get invoked each time, sending a push notifications to your mobile and web apps easily with PubNub.

## PubNub Push Message

```
DELIMITER $$
CREATE PROCEDURE push_message
(p1   DOUBLE,
 p2   DOUBLE,
 p3 BIGINT)
BEGIN
 DECLARE cmd CHAR(255);
 DECLARE result CHAR(255);
 SET cmd = CONCAT('curl https://pubsub.pubnub.com/publish/demo/demo/0/mysql_triggers/0/%22',p1, ',' ,p2, ',' ,p3,'%22');
 SET result = sys_eval(cmd);
END$$; 
```

*NOTE: Make sure your PROCEDURE types are correct **DOUBLE** or **VARCHAR** or **TEXT**.*

## MySQL Trigger Code INSERT Example

```
CREATE TRIGGER push_message_trigger AFTER INSERT ON your_table_name_here
FOR EACH ROW
CALL push_message(NEW.Column1, NEW.Column2, NEW.Column3); 
```

*NOTE: Make sure to include the columns you need here in your push message.*

## MySQL Trigger Code UPDATE Example

```
CREATE TRIGGER push_message_trigger AFTER UPDATE ON your_table_name_here
FOR EACH ROW
CALL push_message(NEW.Column1, NEW.Column2, NEW.Column3); 
```

## Monitor the Push Message via Debug Console

[http://www.pubnub.com/console?sub=demo&pub=demo&channel=mysql_triggers](http://www.pubnub.com/console?sub=demo&pub=demo&channel=mysql_triggers) - You can watch your triggers being fired via PubNub Dev Console. This way you can understand what paramaters you need to have changed and what data is important for you to include in each push notifications that can be received by PubNub websocket and more on the Mobile and Web device.

## Receiving The Push Message in JavaScript

```
<div id=pubnub ssl=on></div>
<script src=//pubnub.a.ssl.fastly.net/pubnub-3.4.5.min.js></script>
<script>(function(){

    PUBNUB.init({
        subscribe_key : 'demo',
        ssl           : true
    }).subscribe({
        channel  : 'mysql_triggers',
        callback : function(mysql_trigger_details) {
            alert(mysql_trigger_details);
        }
    });

})();</script> 
```

Now you have the steps needed to send and receive **change events** from MySQL directly via simple procedures. There are ways to optimize this method as well such as issuing a signal to a daemon process that queues and pools HTTPS push notifications. This should be plenty efficient.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T13:21:30.497

In MySQL, this takes an administration application with a polling loop.

If you design the MySQL schema for it, the polling loop can be cheap. It can query the interesting tables for either a latest time stamp or a latest row id.

But it still has to poll.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T13:22:23.597

You have several options. The most common would be to handle this at your application layer when you change the database. This of course means you need a singular point in your code where the database is updated and this isn't always possible. However, if possible, I would recommend this solution.

Polling is another option, although obviously less real-time. You would simply write a script that checks those conditions and calls the pusher API when things change.

One other possibility is to use MySQL triggers with a custom plugin so you can call the Pusher API immediately when the database changes. This is by far the most complicated solution and I wouldn't really recommended it. See the first answer of [this question](https://stackoverflow.com/questions/5771925/python-how-to-get-notifications-for-mysql-database-changes) for some of the reasons why.

# c# - 谁能提供一个关于excel插件开发的分步参考

> ID：13474015
> 
> 赞同：1
> 
> 时间：2012-11-20T13:15:32.457
> 
> 标签：c#, excel, plugins, vsto, ribbon

我刚开始研究如何用VSTO开发excel 2010插件，我用的是C#。但我觉得很难继续。我想开发带有按钮或复选框的界面的插件，而不是UDF。（我相信可以使用Ribbon）我从Excel-DNA中学到了一些，但这不是我想要的。谁能给我一个参考或链接？最好是一步一步的教程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T13:35:25.450

Microsoft 在这里提供了一个不错的教程以及示例和对象模型图。

[http://msdn.microsoft.com/en-us/library/cc668205.aspx](http://msdn.microsoft.com/en-us/library/cc668205.aspx)

对于 UI 自定义：

[http://msdn.microsoft.com/en-us/library/bf08984t.aspx](http://msdn.microsoft.com/en-us/library/bf08984t.aspx)

# android - Android USB 触摸屏 HID 描述符问题

> ID：13474017
> 
> 赞同：4
> 
> 时间：2012-11-20T13:15:36.870
> 
> 标签：android, usb, touchscreen, hid

我会尽量清楚地描述我的问题。我正在尝试让触摸屏设备与 Android 一起使用。该设备是一个 USB 设备，我让它在各种操作系统（Windows、Mac OS X、Ubuntu）中正常工作。在 Android 4.0.4 中，我似乎遇到了问题。有一些触摸响应，但不正确。触摸屏表现为触摸板而不是绝对触摸屏，而且触摸不正确。

我一直在查看各种 HID 描述符，发现以下可能导致 Android 出现问题：

```
接口 0 HID 报告描述符鼠标
项目标签（值）原始数据
使用页面（通用桌面）05 01
用法（鼠标） 09 02
收藏（申请）A1 01
    用法（指针） 09 01
    集合（物理）A1 00
        使用页面（数字化仪）05 0D
        用法（触摸） 09 33
        最低使用量（数字化仪） 19 01
        最大使用量（数字化仪） 29 01
        逻辑最小值 (0) 15 00
        逻辑最大值 (1) 25 01
        报告数 (1) 95 01
        报告大小 (1) 75 01
        输入 (Data,Var,Abs,NWrp,Lin,Pref,NNul,Bit) 81 02
        报告数 (1) 95 01
        报告大小 (7) 75 07
        输入 (Cnst,Ary,Abs) 81 01
        使用页面（通用桌面）05 01
        用法 (X) 09 30
        用途 (Y) 09 31
        逻辑最小值 (0) 15 00
        逻辑最大值 (1024) 26 00 04
        体力最低 (16) 35 10
        物理最大值 (1024) 46 00 04
        单位（无）65 00
        报告大小 (16) 75 10
        报告数 (2) 95 02
        输入（数据、Var、Abs、NWrp、Lin、NPrf、Null、Bit）81 62
    结束收集 C0
结束收藏

```

现在看起来该设备同时报告为数字化仪和触摸设备？该设备只是一个单点触摸“点按”设备，并报告绝对 X 和 Y 坐标。

我想知道 android 是否会对阅读此报告感到困惑，因此会加载数字化器/平板电脑配置而不是触摸屏配置？这里有一些指针[http://source.android.com/tech/input/touch-devices.html](http://source.android.com/tech/input/touch-devices.html)，但我真的不明白这些东西是在哪里报告/定义的？

任何帮助将不胜感激。如有必要，我可以从 HID 报告中发送更多信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T12:46:48.347

根据我的分析，我给出了这个建议。将 X 和 Y 的逻辑最大值与物理最大值相乘。

factorValue = 逻辑最大值/物理最大值

将此 factorValue 与来自触摸屏的原始坐标相乘，然后尝试发送到 android。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-18T17:03:07.740

通常，使用发送绝对坐标的鼠标设备至关重要。例如，在 Linux 上，由于 X11 中的错误和错误设计，这将不起作用。

你的描述肯定是错误的。您不能混合使用鼠标和数字化仪。
它们是两个不同的设备类别。数字化仪可以是触摸屏或笔，但不是鼠标。您冒着司机不知道如何处理您的设备的风险。你的描述符既非鱼非禽。

您正在混淆不同的东西：使用页面“通用桌面”与使用页面“数字化器”。

为了确保在我的项目中，我不使用手工制作的描述符。我终于从 ELO Touchsystems 克隆了一个真正的触摸屏。这适用于我测试过的所有操作系统。我不能说它是否也适用于 Android。

但是您可以简单地尝试我的描述符：http: [//www.codeproject.com/Articles/1001891/A-USB-HID-Keyboard-Mouse-Touchscreen-emulator-with](http://www.codeproject.com/Articles/1001891/A-USB-HID-Keyboard-Mouse-Touchscreen-emulator-with)

# c# - C# - 字符串转数字

> ID：13474018
> 
> 赞同：0
> 
> 时间：2012-11-20T13:15:38.120
> 
> 标签：c#

我再次带着我的一个问题和疑问回来。

```
 using System;
 using System.Collections.Generic;
 using System.Linq;
 using System.Text;

namespace compare_string
   {
     class Program
     {
        static void Main(string[] args)
        {
            string str1 = "85.8500000000000";
            string str2 = "85.85";
            double num1 = Convert.ToDouble(str1);
            double num2 = Convert.ToDouble(str2);
            if (num1 != num2)
            {
                 Console.WriteLine("Unequal");
            }
            else {
                 Console.WriteLine("Equal");
            }
             Console.ReadKey();
         }
    }
  } 
```

为什么给出两个数字不相等？提前致谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-20T13:19:20.563

这很可能与您的语言环境有关。试试这个，它应该工作

```
double num1 = Convert.ToDouble(str1,CultureInfo.InvariantCulture);
double num2 = Convert.ToDouble(str2,CultureInfo.InvariantCulture); 
```

Alo 尝试打印您的数字，您会看到不同之处。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-20T13:20:12.447

原因是您在使用逗号作为十进制字符而不是点的机器上运行它。当您将代码更改为以下内容时，它将打印`Equal`.

```
string str1 = "85,8500000000000";
string str2 = "85,85"; 
```

这再次说明了为什么你总是应该在这样的方法中指定一种文化。当您指定时，您的原始代码将使用点[`CultureInfo.InvariantCulture`](http://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo.invariantculture.aspx)：

```
string str1 = "85.8500000000000";
string str2 = "85.85";
double num1 = Convert.ToDouble(str1, CultureInfo.InvariantCulture);
double num2 = Convert.ToDouble(str2, CultureInfo.InvariantCulture); 
```

`CultureInfo`在命名空间中`System.Globalization`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T13:19:31.247

我认为这是因为您当前的语言环境。你有没有研究过这些价值观？

对我在德国来说，第一个数字是 858500000000000，第二个是 8585。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T13:20:37.083

A guess would be that the `CurrentCulture` of your thread has a `NumberFormatInfo` where the `NumberDecimalSeparator` is not `"."`.

If you use `Convert.ToDouble(str1, System.Globaliztion.CultureInfo.InvariantCulture)` the local culture of your thread will be disregarded.

# java - java.nio.charset.IllegalCharsetNameException：Windows-1252/WinLatin 1

> ID：13474022
> 
> 赞同：4
> 
> 时间：2012-11-20T13:15:48.607
> 
> 标签：java, parsing, csv

当我解析我的 CSV 文件时，会生成此错误。我的 CSV 文件的字体类型为 Windows-1252/WinLatin 1。所以我在解析时将其设置为字符集。我怎么解决这个问题。我的代码是：

```
reader = new CSVReader(new InputStreamReader(new FileInputStream(
                    new File(directory)),
                    Charset.forName("Windows-1252/WinLatin 1")), Configuration.CSV_SEPERATOR); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T22:09:05.153

您应该使用`Charset.forName("windows-1252")`or`Charset.forName("Cp1252")`来避免 IllegalCharsetNameException。（正如麦克道尔上面所说。）

# applescript - 无法在子文件夹中找到我的文件也无法读取它（applescript）

> ID：13474024
> 
> 赞同：1
> 
> 时间：2012-11-20T13:15:54.693
> 
> 标签：applescript, text-files, posix, containers

我想从位于名为“data”的子文件夹中的文本文件“test.txt”中读取列表中的文本。文本格式为纯文本，每一行都以 enter 结尾。毕竟我想解决我的代码无法再保存的问题，因为我存储了太多的数据，比如将名称设置为 {"Adam", "Adele",... 通过从文本文件中读取大量列表，这使 sctp 超过 500kb .

我尝试哪种方式，最终在我的设置文件夹中获得 xyz.app-name，我不知道如何更好地使用 read 或使用 POSIX 进行操作，或者当我使用 container of 过滤我的时遇到权限问题文件名，也不是嵌套代码以打开文件的位置。

有人可以帮我开始吗？

编辑

我尝试了一下，得到了一个对我有用的解决方案，在列表中阅读我的文本。见下文。然后我遇到了另一个问题：我无法在 MacOSRoman 中保存一个列表，所以我不得不使用 Unicode UTF-16。但是我不能再把 myfile2 分解成一个列表了。有人可以帮我解决这个问题吗？

作为一个新用户，我无法上传我的屏幕截图，所以这里是代码：
将 List1 设置为（使用分隔符换行读取文件 myFile1）作为列表
将 List2 设置为（使用分隔符换行读取文件 myFile2 作为 Unicode 文本）作为列表

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T14:10:48.917

尝试以下任何一种：

```
set aData to read file "Mac OS X:Users:j0k:Desktop:text file.txt"
set bData to read POSIX file "/Users/j0k/Desktop/text file.txt"
set cData to read alias "Mac OS X:Users:j0k:Desktop:text file.txt"
set dData to do shell script "cat '/Users/j0k/Desktop/text file.txt'" 
```

获取文件路径的一种简单方法是将文件拖到脚本编辑器中。

编辑：

```
tell application "Finder" to set myFolder to container of (path to me) as text
set myFile to myFolder & "Data:test.txt"
set aData to read file myFile 
```

![在此处输入图像描述](../Images/1e6afb42fb42cd49e242a2bd2dde42df.png)

# c# - Ravendb 多映射在同一组文档上构建查询对象？

> ID：13474026
> 
> 赞同：0
> 
> 时间：2012-11-20T13:15:58.180
> 
> 标签：c#, nosql, mapreduce, ravendb, document-database

我正在通过在项目中使用 RavendDb 并尝试做一些事情来学习它。我没有任何 SQL/关系数据库经验背景，这就是为什么我发现使用 map reduce 和文档数据库更容易。

我试图创建一个静态索引来创建一个对象，该对象保存 4 个条件字段的出现次数，而不是创建 4 个静态索引并在 4 个数据库查询后组合结果。

这是静态索引：

```
public class Client_ProductDeploymentSummary : AbstractIndexCreationTask<Product, ClientProductDeploymentResult>
{
    public Client_ProductDeploymentSummary()
    {
        Map = products =>
              from product in products
              select new {
                  product.ClientName, 
                  NumberProducts = 1,
                  NumberProductsWithCondition = 0,
                  NumberProductsWithoutCondition = 0,
                  NumberProductsConditionTestInconclusive = 0
              };

        Map = products =>
              from product in products
              where product.TestResults.Condition == true
              select new
              {
                  product.ClientName,
                  NumberProducts = 0,
                  NumberProductsWithCondition = 1,
                  NumberProductsWithoutCondition = 0,
                  NumberProductsConditionTestInconclusive = 0
              };

        Map = products =>
              from product in products
              where product.TestResults.Condition == false
              select new
              {
                  product.ClientName,
                  NumberProducts = 0,
                  NumberProductsWithCondition = 0,
                  NumberProductsWithoutCondition = 1,
                  NumberProductsConditionTestInconclusive = 0
              };

        Map = products =>
              from product in products
              where product.TestResults.Condition == null
              select new
              {
                  product.ClientName,
                  NumberProducts = 0,
                  NumberProductsWithCondition = 0,
                  NumberProductsWithoutCondition = 0,
                  NumberProductsConditionTestInconclusive = 1
              };

        Reduce = results =>
                from result in results
                group result by result.ClientName
                into g
                select new ClientProductDeploymentResult() 
                { 
                    ClientName = g.Key, 
                    NumberProducts = g.Sum(x => x.NumberProducts),
                    NumberProductsWithCondition = g.Sum(x => x.NumberProductsWithCondition),
                    NumberProductsWithoutCondition = g.Sum(x => x.NumberProductsWithoutCondition),
                    NumberProductsConditionTestInconclusive = g.Sum(x => x.NumberProductsConditionTestInconclusive)
                };
    }
} 
```

我将 4 个变量添加到每个 select new 语句中，以使索引在我的单元测试中编译和部署。正如我在一些示例中看到的那样，我似乎无法使用 AddMap(...) 函数（我意识到我只是覆盖了 Map 变量）。没有那么多客户，在 10 或 100 中，但可能有很多产品，每个客户肯定在 1000 中。

有没有一种简洁的方法来构建这个索引的意图？还是每个字段使用一个 map reduce 并将结果组合到调用者代码中是更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T16:08:36.803

MultiMap 索引具有不同的基类。您将继承 from`AbstractMultiMapIndexCreationTask`以创建多图索引。

但是，您在此处描述的内容不适合多图。当数据来自不同的源文档时使用 multimap，而不是在条件不同时使用。您需要的是具有内联条件逻辑的单个 map 语句。

```
Map = products =>
  from product in products
  select new {
    product.ClientName, 
    NumberProducts = 1,
    NumberProductsWithCondition = product.TestResults.Condition == true ? 1 : 0,
    NumberProductsWithoutCondition = product.TestResults.Condition == false? 0 : 1,
    NumberProductsConditionTestInconclusive = product.TestResults.Condition == null ? 1 : 0
  }; 
```

# asp.net-mvc - 将新路由插入 RouteTable

> ID：13474027
> 
> 赞同：1
> 
> 时间：2012-11-20T13:16:05.997
> 
> 标签：asp.net-mvc

我想在路由表中插入一条路由，但不知道该怎么做。

例如，我有一个映射如下的路线：

```
 routes.MapRoute(
            name: "Default", 
            url: "",
            defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
            ); 
```

但是我想使用下面的语法将相同的路由插入到路由表中。我该怎么做？

```
RouteTable.Routes.Insert(0, new Route( 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T13:47:30.320

经过一番思考，我找到了方法：

```
 Route myRoute = new Route("", new RouteValueDictionary { { "controller", "Home" }, { "action", "Index" }, {"id", UrlParameter.Optional }}, new MvcRouteHandler());
        RouteTable.Routes.Insert(0, myRoute); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T13:42:09.367

您在那里的路线是 RouteTable.Routes 并且通过 MapRoute 这被添加到表中。每条路线只能添加一次。

# vb.net - 将字符串分解为数组

> ID：13474028
> 
> 赞同：6
> 
> 时间：2012-11-20T13:16:11.923
> 
> 标签：vb.net

**我有什么**：

所以我正在为学校做这个大型项目，除了一个小而重要的部分外，我所有的东西都在工作。我正在处理的程序必须转换货币，并从 txt 文件中获取汇率。该文件如下所示：

```
USD 1,2694
JPY 100,44
BGN 1,955
CZK 25,396
DKK 7,45792
... 
```

名称和值之间有一个制表符，值和下一个货币名称之间有一个换行符。值具有浮点数，并且没有固定长度。

**我需要的：**

我需要把这个字符串分成两个数组，`currencyNames()`和`currencyValues()`，或分成一个二维数组`currency()`。

**我自己能做什么：**

我可以将它从一个文件加载到一个字符串中

```
fileReader = My.Computer.FileSystem.ReadAllText("rates.txt") 
```

我能够用一个简单的循环把它分解成一个数组

```
Do While i < 32
    dummyArray = Split(fileReader, " ")
    i += 1
Loop 
```

但仅当文件内的名称和值有空格分隔时。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T13:52:02.843

基本思想是这样的：

*   从文件中读取每一行
*   在空格键上分割线
*   将 Country 存储为拆分的第一部分
*   将金额存储为第二部分，格式为整数
*   将 Country 和 Amount 投影到单独的数组中

这是 Vb.Net 中的一个简单实现

```
Sub Main

    dim input = System.IO.File.ReadAllLines("c:\yourdata.txt")

    dim projection = from line in input
                    let split = line.Split(new string(){" "},StringSplitOptions.RemoveEmptyEntries)
                    select Country = split.First(), Amount = split.Last().Replace(",","").Parse()

    dim countries = projection.Select(function(p) p.Country).ToArray()
    dim amounts = projection.Select(function(p) p.Amount).ToArray()

End Sub 
```

我还用了一个小的扩展方法来换行`Integer.TryParse`

```
namespace ExtensionMethods
    public module Extensions
        <Extension()>_
        public function Parse(byval value as string) as integer
            dim i = 0
            if integer.TryParse(value,out i) then
                return i
            end if
            return 0
        end function
    end module
end namespace 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-20T14:09:48.953

您正在寻找的是[VB 常量](http://msdn.microsoft.com/en-us/library/13sa7263.aspx)，一组用于特殊字符（如制表符和换行符）的特殊字符串 - 链接上有一个列表，但您的列表尤其是`vbTab`and `vbCrLf`。你不需要导入任何东西——它们是内置在 VB 中的。

要使用它们，您可以将其更改为：

```
dummyArray = Split(fileReader, vbCrLf) ' to split on lines 
```

进而：

```
For Each s as String In dummyArray
  otherArray = Split(s, vbTab) ' to split on tab characters 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T13:21:51.730

ReadLine() 和 String.Split() 的组合应该可以帮助您解决问题。

如果您要逐行读取每个项目，使用 ReadLine()，您可以像这样在空间上拆分：

```
ReadLine().Split(' ').First(); 
```

和

```
ReadLine().Split(' ').Last(); 
```

从您的配对中获取相关值。

# sqlite - Windows Phone 7.1 和 Windows Phone 8 上的 Sqlite

> ID：13474029
> 
> 赞同：11
> 
> 时间：2012-11-20T13:16:27.727
> 
> 标签：sqlite, windows-phone-7, windows-phone-7.1, windows-phone-8

我正在为 Windows Phone 7.1(7.5) - 8 (Must work for both) 开发一个应用程序，其中需要数据库连接。这个应用程序已经为 Iphone 和 Android 实现了，所以我必须使用那里的数据库文件，数据库结构对于所有应用程序都是相同的。Sqlite 用作数据库。Windows Phone 的所有 Sqlite 客户端都已过时，不再受支持。

*   [http://dotnetslackers.com/articles/silverlight/Windows-Phone-7-Native-Database-Programming-via-Sqlite-Client-for-Windows-Phone.aspx](http://dotnetslackers.com/articles/silverlight/Windows-Phone-7-Native-Database-Programming-via-Sqlite-Client-for-Windows-Phone.aspx)
*   [http://wp7sqlite.codeplex.com/](http://wp7sqlite.codeplex.com/)
*   [http://www.wirebear.com/blog/2010/11/12/using-sqlite-in-your-wp7-app/](http://www.wirebear.com/blog/2010/11/12/using-sqlite-in-your-wp7-app/)
*   [http://sqlitewindowsphone.codeplex.com/releases](http://sqlitewindowsphone.codeplex.com/releases)

官方客户端仅适用于 windows phone 8 [http://www.sqlite.org/download.html](http://www.sqlite.org/download.html) ，不适用于 windows phone 7.1

如果有人能给我任何建议，我能在这种情况下做些什么，那将非常有帮助。

*   仅针对 Windows Phone 8 开发并使用官方 Sqlite 客户端
*   为 sqlite 使用旧库并尝试在 windows phone 8 上使用它们
*   使用 SQL CE 作为数据库

（PS.：Windows RT 不支持 SQL CE 而只支持 Sqlite，这让情况更加复杂，这让我抓狂。）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-21T06:53:39.153

[如dotnetslackers 链接](http://dotnetslackers.com/articles/silverlight/Windows-Phone-7-Native-Database-Programming-via-Sqlite-Client-for-Windows-Phone.aspx)中所述，我在我的 Windows Phone 7 应用程序中使用了 sqlite，它在 WP 8 中工作正常（我在 WP8 模拟器中进行了测试）。

我认为说“Windows Phone 的所有 Sqlite 客户端都已过时且不再受支持”没有任何意义。你自己试过吗？

[此链接](http://www.infoq.com/news/2012/07/sqlite-metro-winmobile)还显示“SQLite 现在在 Windows RT、Windows 8 Metro Apps 上受支持，并将在 Windows Phone 8 上支持本地应用程序存储。”

这里还有一个[链接](http://www.codeguru.com/csharp/.net/wp7/using-sqlite-in-your-windows-phone-application.htm)，我没有测试。

如果您遇到任何问题，我建议您尝试[dotnetslackers 链接并在此处发布。](http://dotnetslackers.com/articles/silverlight/Windows-Phone-7-Native-Database-Programming-via-Sqlite-Client-for-Windows-Phone.aspx)祝你好运 ！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T21:29:33.330

请注意，SQL Server Compact 4.0 没有适用于 Windows Mobile、Windows Phone 或 Windows CE 设备的版本。[http://technet.microsoft.com/en-us/library/gg592946.aspx](http://technet.microsoft.com/en-us/library/gg592946.aspx)

您可以在 WP 7.5 上使用 SQL Server Compact 3.5，但我不确定此版本是否适用于 WP8。

# c# - 在 datatrigger 上更改 datagridcell 中的内容

> ID：13474030
> 
> 赞同：1
> 
> 时间：2012-11-20T13:16:34.047
> 
> 标签：c#, wpf, binding, datatrigger, datagridcell

我想更改 DataGridCell 的内容。我在datagridview中有一个这样的列

```
<DataGridCheckBoxColumn CellStyle="ChangeContentOfCellSstyle"... 
```

然后我有一个像这样的DataTrigger：

```
<Style TargetType="DataGridCell" x:Key="ChangeContentOfCellSstyle">
    <Style.Triggers>
        <DataTrigger Binding="{Binding IsWashed}" Value="True">
            <Setter Property="Content" Value="The new value for the cell."/> 
            <Setter Property="Background" Value="Red"/> //sets the background of the cell to red just to show the trigger is working
        </DataTrigger>
    </Style.Triggers>
</Style> 
```

但是单元格的内容没有改变。甚至当我尝试对 DataGridTextColumn 进行相同操作时，尽管单元格变为红色。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T14:29:14.460

我已经删除了我之前的答案，因为使用模板选择器是一种更好的方法。

首先，我创建了一个 DataTemplateSelector 类，该类可用于基于绑定在 DataTemplates 之间切换，注意 2 个属性引用了将要应用的样式，我可以在这里使用 find 资源，但我认为这更干净并且不会不需要视图设计者坚持使用硬编码的模板键。

```
public class IsWashedStyleSelector : DataTemplateSelector
{

    public DataTemplate TrueStyle { get; set; }
    public DataTemplate FalseStyle { get; set; }

    public override DataTemplate SelectTemplate(object item, DependencyObject container)
    {
        TestClass targetItem = item as TestClass;
        if (targetItem != null)
        {
            return targetItem.IsWashed ? TrueStyle : FalseStyle;
        }
        return base.SelectTemplate(item, container);
    }
} 
```

现在要使用这个模板选择器，我必须定义 2 个数据模板并在 xaml 资源中实例化选择器。

```
<DataTemplate x:Key="styleIsWashedTrue">
    <Button>It's true</Button>
</DataTemplate>
<DataTemplate x:Key="styleIsWashedFalse">
    <Label>is false</Label>
</DataTemplate>

<local:IsWashedStyleSelector x:Key="isWashedStyleSelector"  TrueStyle="{StaticResource styleIsWashedTrue}" FalseStyle="{StaticResource styleIsWashedFalse}"/> 
```

最后，选择器可以像这样在 DataGridTemplateColumn 中使用。

```
<DataGrid ItemsSource="{Binding Items}" AutoGenerateColumns="False">
        <DataGrid.Columns>
            <DataGridCheckBoxColumn Binding="{Binding IsWashed}"/>
            <DataGridTextColumn Binding="{Binding Text}"/>
            <DataGridTemplateColumn CellTemplateSelector="{StaticResource isWashedStyleSelector}"/>
        </DataGrid.Columns>
    </DataGrid> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-06T14:37:18.687

这个答案实际上是对@Andy 答案的评论。看来我无法在评论中格式化代码。

请注意，您可以`DataTemplate`在 XAML 中内联定义，将所有内容放在一个位置。

```
<local:IsWashedStyleSelector x:Key="isWashedStyleSelector">
  <local:IsWashedStyleSelector.TrueStyle>
    <DataTemplate>
      <Button>It's true</Button>
    </DataTemplate>
  </local:IsWashedStyleSelector.TrueStyle>
  <local:IsWashedStyleSelector.FalseStyle>
    <DataTemplate>
      <Label>is false</Label>
    </DataTemplate>
  </local:IsWashedStyleSelector.FalseStyle>
</local:IsWashedStyleSelector> 
```

当然，这适用于您只想`DataTemplate`在一个地方使用这些定义的情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-13T10:19:32.107

在我想根据绑定到行的属性更改单元格内容的情况下，上述方法不起作用。我想出了以下解决方案。

```
<DataGridTemplateColumn  >
<DataGridTemplateColumn.CellTemplate>
    <DataTemplate>
        <ContentPresenter   
                    Style="{StaticResource LockedStyle}" Content="{Binding}">
        </ContentPresenter>
    </DataTemplate>
</DataGridTemplateColumn.CellTemplate> 
```

在资源字典中使用以下样式：

```
 <DataTemplate x:Key="LockedTemplate">
    <TextBlock FontFamily="Segoe MDL2 Assets" Text="&#xE72E;" ></TextBlock>
</DataTemplate>
<DataTemplate x:Key="UnLockedTemplate">
    <TextBlock FontFamily="Segoe MDL2 Assets" Text="&#xE785;"></TextBlock>
</DataTemplate>
<DataTemplate x:Key="NoneTemplate"></DataTemplate>
 <Style x:Key="LockedStyle" TargetType="ContentPresenter">
    <Setter Property="ContentTemplate" Value="{StaticResource NoneTemplate}"/>
    <Style.Triggers>
        <DataTrigger Binding="{Binding IsLocked}" Value="true">
            <Setter Property="ContentTemplate" Value="{StaticResource LockedTemplate}"/>
        </DataTrigger>
        <DataTrigger Binding="{Binding IsLocked}" Value="false">
            <Setter Property="ContentTemplate" Value="{StaticResource UnLockedTemplate}"/>
        </DataTrigger>
    </Style.Triggers>
</Style> 
```

# tomcat - FAIL - 在上下文路径 /blah 部署应用程序，但上下文无法启动

> ID：13474031
> 
> 赞同：0
> 
> 时间：2012-11-20T13:16:34.923
> 
> 标签：tomcat, web-applications

部署战争文件时出现错误（在标题中）。

这是我得到的 catalina.out 的日志。我猜根据第一行，我需要更改 catalina.2012-11-19.log 的权限，但怎么办？（请原谅我新手的问题）。Tks

```
 Listening for transport dt_socket at address: 50754
java.util.logging.ErrorManager: 4
java.io.FileNotFoundException: /usr/share/tomcat6/logs/catalina.2012-11-19.log (Permission denied)
    at java.io.FileOutputStream.openAppend(Native Method)
    at java.io.FileOutputStream.<init>(FileOutputStream.java:207)
    at java.io.FileOutputStream.<init>(FileOutputStream.java:131)
    at org.apache.juli.FileHandler.openWriter(FileHandler.java:304)
    at org.apache.juli.FileHandler.<init>(FileHandler.java:63)
    at org.apache.juli.FileHandler.<init>(FileHandler.java:54)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:532)
    at java.lang.Class.newInstance0(Class.java:372)
    at java.lang.Class.newInstance(Class.java:325)
    at org.apache.juli.ClassLoaderLogManager.readConfiguration(ClassLoaderLogManager.java:458)
    at org.apache.juli.ClassLoaderLogManager.readConfiguration(ClassLoaderLogManager.java:403)
    at org.apache.juli.ClassLoaderLogManager.readConfiguration(ClassLoaderLogManager.java:281)
    at java.util.logging.LogManager$2.run(LogManager.java:278)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.util.logging.LogManager.readPrimordialConfiguration(LogManager.java:276)
    at java.util.logging.LogManager.getLogManager(LogManager.java:259)
    at java.util.logging.Logger.<init>(Logger.java:245)
    at java.util.logging.LogManager$RootLogger.<init>(LogManager.java:1106)
    at java.util.logging.LogManager$RootLogger.<init>(LogManager.java:1103)
    at java.util.logging.LogManager$1.run(LogManager.java:199)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.util.logging.LogManager.<clinit>(LogManager.java:176)
    at java.util.logging.Logger.getLogger(Logger.java:307)
    at org.apache.juli.logging.DirectJDKLog.<init>(DirectJDKLog.java:71)
    at org.apache.juli.logging.DirectJDKLog.getInstance(DirectJDKLog.java:178)
    at org.apache.juli.logging.LogFactory.getInstance(LogFactory.java:171)
    at org.apache.juli.logging.LogFactory.getInstance(LogFactory.java:243)
    at org.apache.juli.logging.LogFactory.getLog(LogFactory.java:298)
    at org.apache.catalina.startup.Bootstrap.<clinit>(Bootstrap.java:55) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T09:48:13.320

假设您使用的是 tomcat6，只需在 /usr/share/tomcat6 中输入此命令

```
chown -R tomcat6 logs
chmod -R 750 logs 
```

如果需要，对其他子目录（webapps、conf 等）执行相同操作。

# html - 共享小部件未在 wordpress 上显示

> ID：13474032
> 
> 赞同：0
> 
> 时间：2012-11-20T13:16:37.187
> 
> 标签：html, wordpress, wordpress-theming

有人能告诉我为什么社交分享小部件不会出现在以下博客上：

[http://geckomonitor.com/blog/](http://geckomonitor.com/blog/)

我已将它们添加到 wp-admin 并激活等。我尝试添加 sharethis 和 addthis。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T13:39:23.813

大多数时候，当您安装一个小部件时，除了激活它之外，您还需要将它放置在您网站的某个区域中。

为此，请登录您的 Wordpress 后端，然后选择外观 > 小部件。

如果您看不到该菜单项，则表示您使用的主题不支持小部件。您必须先确保它支持它，然后才能使用您的小部件。

如果您可以看到该菜单项，您可能会在“可用小部件”列表中看到您的小部件。只需将其拖动到右侧的区域，它就会出现在您的网站上。

您可以在此处找到有关 Wordpress 小部件的更多信息：http: [//codex.wordpress.org/WordPress_Widgets](http://codex.wordpress.org/WordPress_Widgets)

# html - 内容未在 IE 中显示

> ID：13474033
> 
> 赞同：0
> 
> 时间：2012-11-20T13:16:41.970
> 
> 标签：html, css, internet-explorer, web

我有一个我整理的测试网站，但由于某种原因，内容根本没有显示，只有选定的元素！

请在 Chrome 浏览器浏览[http://www.jn-design.co.uk/test/flyer.html](http://www.jn-design.co.uk/test/flyer.html)浏览器浏览比较

似乎是 P 标签中的某些元素？

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T13:25:55.083

尝试关闭您的 h2 元素。它丢失了，可能会破坏 IE 上的渲染。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T13:28:02.600

```
<div id="hi_life"><h2>Hi-Life Diners Club </div> 
```

你错过了结束 h2 标签

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T13:20:43.853

消除

```
text-indent: -9999px; 
```

它也会显示在IE上

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T13:23:29.443

在类 Saving_green 中，尝试设置宽度和高度：宽度：540px；高度：75px；

# dom - Google Dart：IListElement 的更改事件

> ID：13474034
> 
> 赞同：2
> 
> 时间：2012-11-20T13:16:48.283
> 
> 标签：dom, dart

我想知道您是否可以听到 a 的元素何时`UListElement`更改（即`LIElement`添加或删除）？

```
UListElement toDoList = query('#to-do-list');
LIElement newToDo = new LIElement();
newToDo.text = "New Task";
toDoList.elements.add(newToDo);
// how do I execute some code once the newToDo has been added to the toDoList? 
```

我假设`elements.add()`是异步的，因为我来自 ActionScript 背景。这是一个有效的假设吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T16:54:04.140

更高级别的框架为此提供了事件，但在 HTML5 API 级别，您必须使用 MutationObserver。

这是一个可以在任何 DOM Element 对象上设置突变观察者的示例。然后，处理程序可以根据需要处理突变事件。

```
void setMutationObserver(Element element){
  new MutationObserver(mutationHandler)
    .observe(element, subtree: true, childList: true, attributes: false);
}

void mutationHandler(List<MutationRecord> mutations,
                    MutationObserver observer){
  for (final MutationRecord r in mutations){
    r.addedNodes.forEach((node){
      // do stuff here
    });

    r.removedNodes.forEach((node){
      // or here
    });
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T13:53:58.360

`element.elements.add(otherElement)`是同步的，相当于`element.appendChild(otherElement)`Javascript（即[DOM Level 2 Core : appendChild](http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-184E7107)）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T02:54:38.883

您可能还对我们与 MDV 的合作感兴趣：

*   [http://blog.sethladd.com/2012/11/your-first-input-field-binding-with-web.html](http://blog.sethladd.com/2012/11/your-first-input-field-binding-with-web.html)
*   [http://blog.sethladd.com/2012/11/your-first-model-driven-view-with-dart.html](http://blog.sethladd.com/2012/11/your-first-model-driven-view-with-dart.html)

# c++ - C++ 随机数 1,0 不工作

> ID：13474036
> 
> 赞同：-1
> 
> 时间：2012-11-20T13:16:49.760
> 
> 标签：c++, visual-c++

我正在尝试将 X 或 O 放入数组中。但是，它似乎不起作用。它说，“运行时检查失败 #2 - 变量 'row1' 周围的堆栈已损坏。”

```
char row1[19];
char row2[19];
char row3[19];
char row4[19];

for (int i = 0; i < 20; i++)
{
    int r = int(((double) rand() / (RAND_MAX)) + 1);

    if (r == 0)
    {
        row1[i] = 'X';
    }
    else
    {
        row1[i] = 'O';
    }

}

cout << row1[0] << endl; 
```

如何生成随机 X 或 O？谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T13:24:20.213

正如 elmigranto 所说：您的循环不正确。它应该是：

```
for (int i = 0; i < 19; i++) 
```

那是因为`char row4[19];`是一个包含 19 个元素的数组。第一个元素是`row4[0]`，最后一个是`row4[18]`因为编号是从0开始的。所以在最后一个循环中`row[19]`会导致错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T13:23:49.863

如果你想抛硬币，你可以做类似的事情

```
char row1[20];
char row2[20];
char row3[20];
char row4[20];

for (int i = 0; i < 20; i++)
{
    int r = rand() % 2;

    if (r == 0)
    {
        row1[i] = 'X';
    }
    else
    {
        row1[i] = 'O';
    }

} 
```

虽然我不知道您的代码中的 row2 - row4 是什么。堆栈损坏发生在 row1[19] 上，因为您只指定了 19 个元素，但 0..19 表示需要 20 个元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T13:33:06.017

```
const int arr_size = 19;
char row1[arr_size];

for (int i = 0; i < arr_size; ++i) {
    row1[i] = rand() % 2 ? 'O' : 'X';
} 
```

# javascript - 如何使用字符串变量作为 JSON 对象中的键

> ID：13474040
> 
> 赞同：26
> 
> 时间：2012-11-20T13:17:02.613
> 
> 标签：javascript, json

> **可能重复：**
> [是一种使用 var 在键中创建 JSON 对象的方法吗？](https://stackoverflow.com/questions/882727/is-a-way-that-use-var-to-create-json-object-in-key)

我想通过使用（字符串）变量的值作为键在 JavaScript 中构造一个 JSON 对象。但是我得到的是变量的名称作为键。

例子.js：

```
function constructJson(jsonKey, jsonValue){
   var jsonObj = { "key1":jsonValue, jsonKey:2};
   return jsonObj;
} 
```

通话

```
constructJson("key2",8); 
```

返回 JSON -> {"key1":8,"jsonKey":2} 但我想要 {"key1":8,"key2":2}。

有谁知道如何实现这一目标？似乎是一个简单的问题，但我找不到解决方案。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-11-20T13:19:19.313

```
function constructJson(jsonKey, jsonValue){
   var jsonObj = {"key1": jsonValue};
   jsonObj[jsonKey] = "2";
   return jsonObj;
} 
```

# continuous-integration - 声纳相关问题 - 哪些测试涵盖哪些代码（集成测试）

> ID：13474041
> 
> 赞同：1
> 
> 时间：2012-11-20T13:17:07.597
> 
> 标签：continuous-integration, sonarqube

如果我有多个集成测试并且所有这些测试都涵盖了一些 java 类 AI 想知道是否有任何方法可以让集成测试涵盖 java 类 A 的哪一部分。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T13:31:03.220

不，这还不可能。您可以投票给以下票：http: [//jira.codehaus.org/browse/SONAR-2501](http://jira.codehaus.org/browse/SONAR-2501)

# git - 带有 git-flow 功能分支和 Gerrit 的工作流

> ID：13474044
> 
> 赞同：9
> 
> 时间：2012-11-20T13:17:09.807
> 
> 标签：git, workflow, gerrit, git-flow

在 Gerrit 中使用 git-flow 功能分支是否有推荐的工作流程？有什么最佳实践吗？

我们正在与多个开发人员和一个由 Git 管理的中央存储库启动一个项目。在使用 git-flow 时，我遇到了将功能分支推送到 Gerrit 的问题，作为在功能未完成时备份开发人员工作的一种方式：

我们不希望在开发过程中审查功能分支，因此我们允许所有开发人员直接推送到 refs/heads/feature/* ，绕过神奇的审查分支。我们希望在功能分支合并到开发分支时进行审查，但是当开发人员在合并后将她的工作推送到 Gerrit 时，只有合并提交需要审查。在功能分支中所做的更改不会出现在此补丁集中。我认为这是因为这些更改被直接推送到 refs/heads/feature/* 所以 Gerrit 认为他们不再需要审查。

开发人员是否应该在完成功能分支之前将功能分支推送到 Gerrit？为了能够做到这一点，她需要有权在 refs/heads/feature/* 和 refs/for/refs/heads/feature/* 上推送和创建引用，确保她只推送到审查分支。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-23T15:30:47.670

我和我的一个同事实际上已经用 gerrit 为 git-flow 做了一个分叉。我们决定推进称为主题的分支，以区分常规开发和“功能/主题”分支的访问控制。

让我星期一和他讨论一下，然后回到我们将所有内容发布到 github 的地方：）

我将开始在源代码中删除一些次要的公司特定项目并发布到 github。我将在北京时间明天早上开始:)

最后你可以签出这个 git-flow 的分支 [https://github.com/RasmusVoss/gitflow](https://github.com/RasmusVoss/gitflow)

您需要阅读一些项目。 [https://github.com/RasmusVoss/gitflow/wiki](https://github.com/RasmusVoss/gitflow/wiki)

看看普通 git-flow 和这个版本的区别，这个版本主要是为使用 Gerrit 的开发者准备的，我们还没有使用 git-flow 的任何发布功能。

干杯。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T14:53:07.790

集成 git-flow 和 gerrit 并不是那么简单，在推送分支时，您无法更改 git-flow 中的原点以反映在 gerrit 中审查所需的原点。

我阅读了一个[wiki 页面](http://www.mediawiki.org/wiki/User%3aDAndreescu/GitFlowGerrit)，其中讨论了集成 git-flow 和 gerrit 的棘手部分。您可能也想阅读它。

# php - php后台脚本

> ID：13474046
> 
> 赞同：1
> 
> 时间：2012-11-20T13:17:11.427
> 
> 标签：php, multithreading, background, synchronization

这是我的问题：我有一个应用程序允许用户将他们的数据与社交网络同步。问题是每次同步可能需要长达 10 秒。所以我想在“后台”任务中触发同步，如果可能的话，并行化所有同步。

目前，我的脚本如下所示：

```
$user =  user::login($username, $password);
/* Do some treatments, display the home page */ 
$user->synchronize();
/* END OF LOGIN SCRIPT */ 
```

在我的 user.class.php 中，我有类似的东西

```
public function synchronize(){
 $Networks = socialNetworks::getByUserId($this->userid);
 foreach($Networks as $n) $n->synchronize();
} 
```

最后在 socialNetworks.class.php 中，我为每个社交网络（fb、linkedin、google+、...）实现了所有同步脚本。

请注意，我登录时不需要等待同步的结果。

所以我在这里有两个问题：

1.  当调用 $user->synchronize(); 登录脚本被阻塞，直到循环结束
2.  循环本身很长，我想启动并行“线程”，以使其在调用 synchronize() 方法时更快（我有一些 Ajax 触发此操作）。

你会建议什么来优化这个？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T13:21:16.360

有2种方式。

1.  用于`exec()`进行多个系统调用，例如`exec("php /path/to/script?networkId=1 > /dev/null 2>/dev/null &")`
2.  使用仅适用于 Linux 的`pcntl_fork()` [功能。](http://php.net/manual/en/ref.pcntl.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T13:23:14.840

一种选择是使用[Gearman](http://gearman.org/)，并将这项工作交给它的工人。

您基本上创建了一个执行某些工作的 PHP 脚本。然后你告诉它从你的登录脚本中完成这项工作，这项工作将在请求之外的后台完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T13:23:57.430

她是一篇关于使用 php 进行异步处理的博文：

[http://robert.accettura.com/blog/2006/09/14/asynchronous-processing-with-php/](http://robert.accettura.com/blog/2006/09/14/asynchronous-processing-with-php/)

```
 <?php
      include 'AsynchronousProcessing.php'

      launchBackgroundProcess('php /path/to/task1.php');
      launchBackgroundProcess('php /path/to/task2.php');
      $class->SomeWork();
      $class->SomeOtherWork();
?> 
```

# java - 如何在我的 gwt 应用程序中导入 java.security.*

> ID：13474048
> 
> 赞同：3
> 
> 时间：2012-11-20T13:17:14.550
> 
> 标签：java, gwt, jar, rsa, browser-plugin

我想使用 gwt 开发一个插件。它必须使用 java.security.* 在客户端生成密钥。我已经提出了所有要求，但它显示以下错误。

> 加载模块
> 
> coreservlets.GwtApp1
> 
> ```
> Loading inherited module 'coreservlets.GwtApp1'
>     Loading inherited module 'java.security.KeyPair'
>        [ERROR] Unable to find 'java/security/KeyPair.gwt.xml' on your classpath; >could be a typo, or maybe you forgot to include a classpath entry for source?
>     [ERROR] Line 15: Unexpected exception while processing element 'inherits' 
> ```

我在我的 gwtapp1.gwt.xml 文件中继承了所有相关的类，如“java.security.KeyPair”

我也将 jar 包含在类路径本身中。但错误仍然没有消失。我应该怎么做.plz建议这里是我的java代码

```
package coreservlets.client;

import java.io.UnsupportedEncodingException;
import java.security.KeyPair;
import java.security.KeyPairGenerator;
import java.security.NoSuchAlgorithmException;
import java.security.NoSuchProviderException;
import java.security.PrivateKey;
import java.security.PublicKey;
import java.security.SecureRandom;

public class Keygen {

private PrivateKey privKey;
private PublicKey pubKey;
private static Keygen keygen = null;

private Keygen() {

}

public static Keygen getInstance() {

    if (keygen == null) {
        keygen = new Keygen();
    }

    return keygen;
}

public void KeyGenerator(String ALGORITHAM) {
    KeyPairGenerator keyGen = null;
    SecureRandom random = null;
    try {
        keyGen = KeyPairGenerator.getInstance(ALGORITHAM);
    } catch (NoSuchAlgorithmException ex) {
        ex.printStackTrace();
    }
    try {
        random = SecureRandom.getInstance("SHA1PRNG", "SUN");
        //random = SecureRandom.getInstance("SHA1PRNG");
    } catch (NoSuchAlgorithmException e) {
        e.printStackTrace();

    } catch (NoSuchProviderException ex) {
        ex.printStackTrace();
    }

    //keyGen.initialize(1024, random);
    keyGen.initialize(1024);
    KeyPair key = keyGen.generateKeyPair();
    privKey = key.getPrivate();
    pubKey = key.getPublic();

}

public String getPubKeyasString() {
    //return Base64.encodeBase64String(pubKey.getEncoded());
    try {
        return new String(pubKey.getEncoded(),"ISO-8859-1");
    } catch (UnsupportedEncodingException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    return null;
}
public String getPriKeyasString() {
    //return Base64.encodeBase64String(privKey.getEncoded());
    try {
        return new String(privKey.getEncoded(),"ISO-8859-1");
    } catch (UnsupportedEncodingException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    return null;
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T19:48:52.373

对于密钥生成，您可以使用[gwt-crypto](http://code.google.com/p/gwt-crypto/)库，但要为某些性能问题和不受支持的功能做好准备。

[编辑] 前段时间，我成功地使用 jsni 封装了一个纯 js rsa 解决方案。我拿的js是[jsbn.js](http://www-cs-students.stanford.edu/~tjw/jsbn/)库

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T14:41:55.403

在一个`.gwt.xml`文件`<inherits ...>`中指另一个`.gwt.xml`文件。我怀疑您已经像使用 java 一样使用它了`import ...`？

如果您想`java.security.KeyPair`在 GWT 中使用客户端，您应该做的是确定 GWT 编译器可以使用源代码。这是使用文件`<source path="..." />`中的条目完成的`.gwt.xml`。

您可能想访问[GWT JRE Emulation Reference](https://developers.google.com/web-toolkit/doc/1.6/RefJreEmulation)页面，遗憾的是您会看到不`javax.*`支持任何包，祝您的项目好运...也许您应该`KeyPair`只在服务器端使用代码？

希望有帮助。

# java - Spring Batch 的元表不是由 Hibernate4 创建的

> ID：13474049
> 
> 赞同：3
> 
> 时间：2012-11-20T13:17:29.830
> 
> 标签：java, spring, hibernate

编辑：虽然我认为休眠应该能够自动执行此操作，但我有一个 DDL 脚本 [pt 包含我需要的结构。如果我可以运行这个脚本以便休眠自动创建表，我现在很高兴......`[看到这个问题](https://stackoverflow.com/questions/13475714/how-to-get-hibernate-to-create-tables-based-on-ddl-sql-script)

我为这篇冗长的帖子找借口。我的问题虽然可能很简单，但作为一个冬眠和春天的菜鸟，这整个早上都在困扰着我......

我正在使用春季批次。运行导入作业时，Spring 希望将有关作业执行的元数据存储在名为 BATCH_JOB 的表中。但是，此表不是由 Hibernate 创建的。

我通过以下方式运行工作：

```
public static void main(String[] args) throws JobExecutionAlreadyRunningException, JobRestartException, JobInstanceAlreadyCompleteException, JobParametersInvalidException {

        ApplicationContext context = new ClassPathXmlApplicationContext("bean_configuration.xml");
        SimpleJobLauncher launcher = (SimpleJobLauncher) context.getBean("jobLauncher");
        FlowJob job = (FlowJob) context.getBean("importIVSJob");
        launcher.run(job, new JobParameters());
    } 
```

我的休眠属性文件：

```
#hibernate.c3p0.min_size=5
#hibernate.c3p0.max_size=20
#hibernate.c3p0.timeout=1800
#hibernate.c3p0.max_statements=50
hibernate.dialect=org.hibernate.dialect.HSQLDialect
hibernate.show_sql=true
hibernate.hbm2ddl.auto=create 
```

和xml配置：

```
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:p="http://www.springframework.org/schema/p"
xmlns:batch="http://www.springframework.org/schema/batch"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:context="http://www.springframework.org/schema/context"
xsi:schemaLocation="http://www.springframework.org/schema/beans
                    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd 
                    http://www.springframework.org/schema/jdbc 
                    http://www.springframework.org/schema/jdbc/spring-jdbc-3.0.xsd
                    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-2.5.xsd
                    http://www.springframework.org/schema/batch 
                    http://www.springframework.org/schema/batch/spring-batch-2.1.xsd">

        <batch:job job-repository="jobRepository" id="importIVSJob">
        <batch:step id="step1">
            <batch:tasklet transaction-manager="transactionManager">
                <batch:chunk reader="csvFileReader" writer="itemWriter"
                    commit-interval="5" />
            </batch:tasklet>
        </batch:step>
    </batch:job>

    <bean id="csvFileReader" class="org.springframework.batch.item.file.FlatFileItemReader">
        <property name="resource" ref="inputResource" />
        <property name="lineMapper">
            <bean class="org.springframework.batch.item.file.mapping.DefaultLineMapper">
                <property name="lineTokenizer">
                    <bean
                        class="org.springframework.batch.item.file.transform.DelimitedLineTokenizer"
                        p:delimiter=";"
                        p:names="objectcode, event, beginTijd, duurEvent, kolkNummer, deelkolkNummer, vaarrichting, eniNummer, aantalSchepen, scheepType, vaartType, subTypeVaart, rwsKlasseHoofgroep, rwsKlasseSubgroep, cemtKlasse, laadvermogen, dwtLaadvermogen, scheepslengte, scheepsbreedte, scheepsdiepgang, scheepshoogte, vlagCode, beladingsCode, cargoGewicht, seinVoeringKegel, vrachtAanBoord, aantalContainers, aantalTEU_containers, reisId, toerbeurt, invaartGroen, uitvaartGroen" />
                </property>
                <property name="fieldSetMapper">
                    <bean
                        class="org.springframework.batch.item.file.mapping.BeanWrapperFieldSetMapper"
                        p:targetType="nl.triopsys.styx.importeer.IVS.IvsBericht" />
                </property>
            </bean>
        </property>
    </bean>

    <bean id="itemWriter" class="org.springframework.batch.item.file.FlatFileItemWriter">
        <property name="resource" ref="outputResource" />
        <property name="lineAggregator">
            <bean
                class="org.springframework.batch.item.file.transform.DelimitedLineAggregator">
                <property name="delimiter" value="," />
                <property name="fieldExtractor">
                    <bean
                        class="org.springframework.batch.item.file.transform.BeanWrapperFieldExtractor">
                        <property name="names"
                            value="objectcode, event, beginTijd, duurEvent, kolkNummer, deelkolkNummer, vaarrichting, eniNummer, aantalSchepen, scheepType, vaartType, subTypeVaart, rwsKlasseHoofgroep, rwsKlasseSubgroep, cemtKlasse, laadvermogen, dwtLaadvermogen, scheepslengte, scheepsbreedte, scheepsdiepgang, scheepshoogte, vlagCode, beladingsCode, cargoGewicht, seinVoeringKegel, vrachtAanBoord, aantalContainers, aantalTEU_containers, reisId, toerbeurt, invaartGroen, uitvaartGroen" />
                    </bean>
                </property>
            </bean>
        </property>
    </bean>

    <bean id="inputResource" class="org.springframework.core.io.FileSystemResource">
        <constructor-arg index="0" value="file:C:\Users\jgoddijn\testdata\IVS90.csv" />
    </bean>

    <bean id="outputResource" class="org.springframework.core.io.FileSystemResource">
        <constructor-arg index="0" value="C:\Users\jgoddijn\testdata\output.csv" />
    </bean>

    <bean
        class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer"
        p:location="batch.properties" p:ignoreUnresolvablePlaceholders="true" />

    <bean id="dataSource"
        class="org.springframework.jdbc.datasource.DriverManagerDataSource">
        <property name="driverClassName" value="org.hsqldb.jdbcDriver" />
        <property name="url"
            value="jdbc:hsqldb:file:/D:/DMVV/HSQLDB;shutdown=true;hsqldb.write_delay=false" />
        <property name="username" value="sa" />
        <property name="password" value="" />
    </bean>

    <bean id="transactionManager"
        class="org.springframework.orm.hibernate4.HibernateTransactionManager">
        <property name="sessionFactory" ref="sessionFactory" />
    </bean>

    <bean id="sessionFactory"
        class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
        <property name="dataSource" ref="dataSource" />
        <property name="annotatedClasses">
            <list>
                <value>nl.triopsys.styx.importeer.IVS.IvsBericht</value>
                <value>nl.triopsys.styx.domain.Vaartuig</value>
                <value>nl.triopsys.styx.domain.AIS.MMSI</value>
                <value>nl.triopsys.styx.domain.IVS90.valuetype.Scheepsnummer</value>
                <value>nl.triopsys.styx.domain.IVS90.valuetype.EniNummer</value>
                <value>nl.triopsys.styx.domain.IVS90.valuetype.ImoNummer</value>
            </list>
        </property>
        <property name="hibernateProperties">
            <bean
                class="org.springframework.beans.factory.config.PropertiesFactoryBean">
                <property name="location" value="batch.properties" />
            </bean>
        </property>
    </bean>

    <bean id="jobRegistry"
        class="org.springframework.batch.core.configuration.support.MapJobRegistry" />

    <bean id="jobLauncher"
        class="org.springframework.batch.core.launch.support.SimpleJobLauncher"
        p:jobRepository-ref="jobRepository" />

    <bean id="jobRegistryBeanPostProcessor"
        class="org.springframework.batch.core.configuration.support.JobRegistryBeanPostProcessor"
        p:jobRegistry-ref="jobRegistry" />

    <bean id="jobRepository"
        class="org.springframework.batch.core.repository.support.JobRepositoryFactoryBean"
        p:dataSource-ref="dataSource" p:transactionManager-ref="transactionManager" />

</beans> 
```

我得到的错误：

```
Exception in thread "main" org.hibernate.exception.SQLGrammarException: user lacks privilege or object not found: BATCH_JOB_INSTANCE
    at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:83)
    at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:49)
    at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:125)
    at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:110)
    at org.hibernate.engine.jdbc.internal.proxy.ConnectionProxyHandler.continueInvocation(ConnectionProxyHandler.java:146)
    at org.hibernate.engine.jdbc.internal.proxy.AbstractProxyHandler.invoke(AbstractProxyHandler.java:81)
    at $Proxy20.prepareStatement(Unknown Source)
    at org.springframework.jdbc.core.JdbcTemplate$SimplePreparedStatementCreator.createPreparedStatement(JdbcTemplate.java:1436)
    at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:581)
    at org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:637)
    at org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:666)
    at org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:674)
    at org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:714)
    at org.springframework.jdbc.core.simple.SimpleJdbcTemplate.query(SimpleJdbcTemplate.java:204)
    at org.springframework.jdbc.core.simple.SimpleJdbcTemplate.query(SimpleJdbcTemplate.java:209)
    at org.springframework.batch.core.repository.dao.JdbcJobInstanceDao.getJobInstance(JdbcJobInstanceDao.java:221)
    at org.springframework.batch.core.repository.support.SimpleJobRepository.getLastJobExecution(SimpleJobRepository.java:253)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:318)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)
    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:106)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
    at $Proxy19.getLastJobExecution(Unknown Source)
    at org.springframework.batch.core.launch.support.SimpleJobLauncher.run(SimpleJobLauncher.java:94)
    at nl.triopsys.styx.sandbox.importeer.RunImport.main(RunImport.java:39) 
```

似乎没有为作业执行创建表。如何让休眠自动执行此操作？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T16:08:45.760

最快的方法是将脚本指定为 H2 DB URL 上的初始化参数：

`jdbc:h2:~/mydb;init=runscript from 'classpath:org/springframework/batch/core/schema-h2.sql'`

如果 spring-batch-core jar 在您的类路径中，它将在您的测试的第一次运行时创建这些表。然后，您可以在创建表后将其删除。

# javascript - 在一台服务器上运行多个 node.js 演示的最佳方式

> ID：13474050
> 
> 赞同：3
> 
> 时间：2012-11-20T13:17:29.283
> 
> 标签：javascript, node.js, webserver

我开始使用 node.js 并且正在寻找在一台服务器上托管多个 node.js 演示 (>20) 的最佳方式。我唯一的要求是一个错误不会影响其余部分。

到目前为止，我已经看过：

*   多个 node.js 实例 - 这可行，但大量演示进程的开销非常高
*   将前端路由快速发送到单个演示文件 - 没有开销，但一个错误会导致一切崩溃
*   使用集群模块将每个模块作为子进程运行 - 我目前正在研究这个选项，看起来很有希望，但需要一些工作（并且集群仍然只是实验性的）

任何人都可以提出更好的方法吗？其他人是如何做到的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T13:28:24.740

我正在采用类似于方法#1 和#3 的方法。我有**apache**（是的，我知道，蹩脚，但我确实与需要/想要它的其他人共享此服务器），并且我使用**mod_proxy**作为到 webapps 的路由。然后每个应用程序都有自己的 node.js 守护程序。

这样我就可以在自己的端口上运行每个应用程序并从 apache 路由到那里。可能不适合您的用例，因为当时我只有 2-3 个 weabpps。

# python - django 网址中的国际月

> ID：13474052
> 
> 赞同：1
> 
> 时间：2012-11-20T13:17:33.423
> 
> 标签：python, django, localization, django-urls

我有这个永久链接定义：

```
@models.permalink
def get_absolute_url(self):
        creation_date = timezone.localtime(self.start_publication)
        return ('entry_detail', (), {
            'year': creation_date.strftime('%Y'),
            'month': creation_date.strftime('%b').lower(),
            'day': creation_date.strftime('%d'),
            'slug': self.slug}) 
```

网址如下所示：

/news/2012/oct/20/slug-title

oct 是英文的，不是我当地指定的语言。我怎样才能得到“okt”而不是“oct”？

这是我的设置：

```
LANGUAGE_CODE = 'nb'
USE_I18N = True
USE_L10N = True 
```

# kanban - Kanban story assignment

> ID：13474056
> 
> 赞同：1
> 
> 时间：2012-11-20T13:17:46.873
> 
> 标签：kanban

We are starting to use Kanban and my boss just asked me a question, as one of two people with prior Kanban experience within the group, that I don't really know how to answer.

My previous experience and training with Kanban had developers pulling stories in from the backlog by priority, in our case that was the topmost card. However, my boss would like certain stories to go to the developers that have domain knowledge for particular areas. For example, let's say Joe has the most experience in working with Contracts and a contract story comes onto the board. He would like Joe to be the one to work on that particular story.

This, to me, feels a little "off" and could lead to some developers having significant extra work due to having worked in any given area of functionality. My previous experience with Kanban worked under the assumption that any developer should be able to pick up the next card and figure out what to do and that this practice would eventually eliminate any single functionality area experts and level out developer expertise over time. However, I can also see how using subject matter experts can help move a story through the process faster.

What is the most "Kanban" way of handling priority vs. expertise when it comes to pulling in the next story?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T13:28:26.107

我曾经使用过的每个系统都允许一些开发人员级别的优先级。如果下一张卡具有绝对（自上而下驱动）优先级，那么您必须选择该卡。不过，大多数情况下，我倾向于在“接下来的 6 张牌出现，选择你喜欢的一张”的地方工作。这为开发人员提供了一点空间来进行他或她喜欢的工作类型。另外，它给了开发人员更大的主人翁感，因为他们确实（在某种程度上）选择了他们正在做的工作。

关于您的示例，这有点偏离基础。在理想的世界中，任何开发人员都应该能够拿起任何卡。实际上，这并不总是正确的。如果我把这个项目交给 Jim，可能需要 2 天时间。如果我把它给非吉姆，它需要整个星期。这是一个标志！缺少哪些信息共享？您如何让其他开发人员像 Jim 一样理解 Contracts 组件？

如果优先级有点灰色，那么这些东西往往会自行解决。所有其他开发人员都知道 Jim 可以处理合同的内容。然而，如果吉姆没有能力，那么其他人必须接受挑战。看板应该提醒您注意被阻止的故事。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T16:19:12.797

看板非常适合可视化工作流程、限制 WIP 和暴露瓶颈。

Henrik Kniberg 有一本很棒的书，《从战壕中精益求精》。他讲述了他在现实世界的例子中使用的许多技术。他描述了一种让化身（代表开发人员）可以放置在任务上以显示谁在做什么的方法。

对于您的情况，一个想法是使用这种化身方法来预先分配谁应该在缓冲区中处理导致开发的任务。

如果那些预先分配的任务没有造成瓶颈并且流程是自然的，那么一切都很好。如果它们在您的流程早期造成瓶颈，那么您就有问题了，但现在您有一个简单的方法来可视化并看到导致您的瓶颈的是预分配！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T15:13:23.307

看板系统应显示真实的过程。如果经理将故事分配给开发人员，那么系统应该反映这一点。这可以通过多种方式完成，您可以为开发者 X 准备一个特定项目，或者您可以在卡片上写下开发者的姓名。另一种选择是为每个开发人员设置一条泳道。

然而，从“全球”的角度来看，这一切可能都不是好事。你应该与你的老板分享你的看板数据。您的交货时间是多少，您的吞吐量是多少等？然后你应该邀请老板参加过程改进会议。我们将如何改善我们的数据？希望他能看到，如果乔直接向他分配任务，他可能会成为瓶颈。教他利特尔法则，教他瓶颈和一般的精益。

不要忘记让你的策略明确，也就是说，它应该写在墙上，你的优先级策略是什么样的。祝你好运！

# java - 在 Java 中使用 xpath 编辑 XML 文件中的常规节点

> ID：13474063
> 
> 赞同：1
> 
> 时间：2012-11-20T13:17:57.457
> 
> 标签：java, xml, xpath, xml-parsing

我需要使用 Java 中的 xpath 编辑 XML 文件中的一般节点。我尝试了许多不同的方法和方法，但都成功地完成了这项任务。请协助，下面代码中提到的有问题的部分。

我使用的 xml 文件示例：

> ```
> <data-source>
>       <account-id>1102</account-id>
>       <type>ftp</type>    
>       <url>http://a.b.com</url>
>       <port>21</port>
>       <username>user</username>
>       <password>12345678</password>
>       <update-frequency>1200</update-frequency>
> </data-source> 
> ```

我的功能如下和参数：

```
 * Usage example: updateElementValue(FILE_LOCATION + "addDataSource.xml", "/data-source", "port", "80")
 * @param fileNameToUpdate - full file name (path + file name) to update
 * @param xpath - element node xpath
 * @param elementName - element name
 * @param elementValue - value to set  

  public static void updateElementValue(String fileNameToUpdate, String xpath, String elementName, String elementValue) throws Exception
      {
        // Exit with exception in case value is null
        if(elementValue == null) {
            throw new Exception("Update element Value function, elementValue to set is null");
        }

        //Read the file as doc  
        File fileToUpdate = new File(fileNameToUpdate);
        Document doc = FileUtils.readDocumentFromFile(fileToUpdate);

        //WHAT SHOULD I DO HERE?...

        //Save the doc back to the file
        FileUtil.saveDocumentToFile(doc, fileNameToUpdate);         
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T13:32:44.577

如果我理解正确，您将不需要`elementName`，因为 XPath 应该唯一地标识一个节点。使用`javax.xml.xpath`包...

```
XPathFactory xfactory = XPathFactory.newInstance();
XPath xpathObj = xfactory.newXPath();
Node node;

try {
    node = (Node)xpathObj.evaluate(xpath, doc, XPathConstants.NODE);
} catch (XPathExpressionException e) {
    throw new RuntimeException(e);
}

node.setTextContent(elementValue); 
```

我没有尝试过完全运行您的代码，但它应该可以工作。

# api - Can I hide the artwork from the received embed code when calling SoundCloud oEmbed?

> ID：13474067
> 
> 赞同：2
> 
> 时间：2012-11-20T13:18:06.350
> 
> 标签：api, iframe, soundcloud, oembed

Is there any way to send a parameter to `/oembed` so that the artwork will not be shown in the received embed code?

I am thinking about rewriting the `src` attribute of the iframe in the response `html` value, but I'd rather not resort to such a hack.

Also, is it safe to assume that the iframe `src` contains `/track/` if (and only if) it's a track?

What I want to achieve is a player that displays artwork for all content types except track, where I want to hide it. My solution would be to look at the received src attribute and set `show_artwork=false` on it if it's a track.

Does this seem like a very bad idea? :)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T17:16:25.330

我也需要这个。不久前，当我在我的 oembed 请求中包含 show_artwork=false 时，它​​已经工作了。

例如。

```
http://soundcloud.com/oembed?url=http%3A//soundcloud.com/xxx/xxxx&format=json&show_artwork=false&auto_play=false 
```

但是，Soundcloud 似乎对他们的 oembed api 进行了一些更改，现在即使我指定了，返回的代码也指定了 show_artwork=true。

我认为我们可能不得不就此向 Soundcloud 提出功能请求。

当然，我们可以编辑收到的结果，它会起作用，但这绝对不是一个令人满意的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T17:09:21.550

是的，show_artwork 是缺少的 oembed 参数：http: [//developers.soundcloud.com/docs/api/reference#oembed](http://developers.soundcloud.com/docs/api/reference#oembed)

# c# - How to get the Login time and log out (shut down) time of user's computer using Active directory

> ID：13474068
> 
> 赞同：0
> 
> 时间：2012-11-20T13:18:11.893
> 
> 标签：c#, c#-4.0, active-directory

I am new to .net. I have a requirement that whenever employee switch on(log on) his computer I want to capture that time and whenever user shut down his system again I want to capture that particular time through Active Directory i.e I want to capture both login and logout time of particular PC using Active directory using C#. Is it possible? Here I should read this information (login and logout time of PC) from Active Directory only.

Please assist me.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T10:36:05.627

用户和计算机具有 lastLogon 和 lastLogoff 属性，但它们不会在域控制器之间复制，因此您需要查询所有 DC。lastLogoff 似乎也没有被填充......

您可以执行以下任何操作：

1.  为客户端 PC 创建服务以监视这些事件并将它们写入数据库。
2.  使用启动和关闭脚本创建 GPO 以记录这些事件。
3.  监控 DNS / DHCP 的请求和发布

可以在[此处](http://technet.microsoft.com/en-us/library/cc779329%28v=ws.10%29.aspx)和[此处](http://www.petri.co.il/setting-up-logon-script-through-gpo-windows-server-2008.htm)找到有关启动和关闭脚本的信息。

您可能有一个执行以下操作的 CMD 启动脚本：

echo %Computername% 从 %Date% - %Time% >> \\Server\NULLSHARE\%Computername%.log

并在关闭脚本中：

echo %Computername% 在 %Date% - %Time% >> \\Server\NULLSHARE\%Computername%.log 关闭

# java - java的日期格式问题

> ID：13474069
> 
> 赞同：3
> 
> 时间：2012-11-20T13:18:23.890
> 
> 标签：java, date, datetime

我从 Joynet 云 api 服务器获取日期格式：

```
2012-11-20T10:26:04+00:00" 
```

但是，我不知道要处理最后一段**+00:00**，我已经制作了除 +00:00 之外的格式

```
SimpleDateFormat fmt = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss");
Date date = fmt.parse("2012-11-20T10:26:04"); 
```

* * *

感谢@Abu

我重写它以删除“：”，

```
SimpleDateFormat fmt = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ssZ");
String input = "2012-11-20T10:25:58+00:00";

String s1 = input.split("T")[0];
String s2 = input.split("T")[1];
String sep = null;
if (s2.contains("+")) {
    sep = "+";
}
if (s2.contains("-")) {
    sep = "-";
}
String s3 = s2.split("\\" + sep)[0];
String s4 = s2.split("\\" + sep)[1].replace(":", "");
String cleanDate = s1 + "T" + s3 + sep + s4;
Date date = fmt.parse(cleanDate);
System.out.println(date); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-20T13:20:54.573

`:`如果您不使用 java 7，请在时区部分中删除它

并使用它：

`SimpleDateFormat fmt = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ssZ");`

[请参阅Java 6 中 SimpleDateFormat 的](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)javadoc

和

如果您使用的是 Java 7，请直接使用：

`SimpleDateFormat fmt = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ssX");`

[请参阅Java 7 中 SimpleDateFormat 的](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)javadoc

# mysql - 删除mysql中的重复项（2个表）

> ID：13474070
> 
> 赞同：0
> 
> 时间：2012-11-20T13:18:26.193
> 
> 标签：mysql

我有两个表 (id_test, test) ，每个表都有一个 ID 列，它是唯一的，并且两个表中具有相同 id 的两个条目是相同的。现在，我在其中一个表（id_test）中有另一列也应该是唯一的，所以我想根据另一列消除重复项，我们称之为 YD。

识别我使用的重复项

```
SELECT ID, YD AS x, COUNT(*) AS y
FROM id_test 
GROUP BY x 
HAVING y>1; 
```

现在，我想删除两个表中的这些条目。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T13:21:45.330

如[`ALTER TABLE`语法](http://dev.mysql.com/doc/en/alter-table.html)中所述（强调添加）：

> `IGNORE`是标准 SQL 的 MySQL 扩展。`ALTER TABLE`如果新表中的唯一键有重复项，或者在启用严格模式时出现警告，它会控制如何工作。如果`IGNORE`未指定，则在发生重复键错误时中止并回滚副本。**如果`IGNORE`指定，则仅第一行用于在唯一键上具有重复项的行。其他冲突的行被删除。**不正确的值将被截断为最接近的匹配可接受值。

所以：

```
ALTER IGNORE TABLE id_test ADD UNIQUE (YD) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T14:22:35.653

此查询显示表`ID`中每个`YD`的第一个`id_test`：

```
SELECT ID, YD
FROM id_test
GROUP BY YD 
```

这些是您必须保留的行。以下查询返回您必须删除的 ID：

```
SELECT id_test.ID
FROM id_test LEFT JOIN (select ID, YD from id_test group by YD) id_test_keep
     on id_test.ID=id_test_keep.ID and id_test.YD = id_test_keep.YD
WHERE id_test_keep.ID IS NULL 
```

现在我想我需要更多关于你的桌子的细节，但我认为你需要的是：

```
DELETE FROM test
WHERE
  test.ID IN (
    SELECT id_test.ID
    FROM id_test LEFT JOIN (select ID, YD from id_test group by YD) id_test_keep
         on id_test.ID=id_test_keep.ID and id_test.YD = id_test_keep.YD
    WHERE id_test_keep.ID IS NULL) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-07T09:01:17.007

我认为您不要用户选择，因为如果数据很大，那是不可能的。您应该克隆一个具有相同结构的表。插入不重复的数据。

***INSERT INTO test_new (ID, YD) SELECT t.ID, t.YD FROM test t LEFT JOIN test_id ti ON t.ID = ti.id WHERE ti.id IS NULL;***

删除表测试后，重命名 test_new -> test。

# c# - Removing ScatterViewItems of type other

> ID：13474072
> 
> 赞同：0
> 
> 时间：2012-11-20T13:18:30.467
> 
> 标签：c#, wpf

I add a ScatterViewItem dynamically as so, noting that I am not creating a ScatterViewItem specifically as they should be wrapped in one when added as per the docs:

```
VideosProducts videosProducts = VideosProducts.GetVideoProductsControl();
videosProducts.Name = "VideosProducts";
main.Items.Add(videosProducts);
ScatterViewItem item = main.ItemContainerGenerator.ContainerFromItem(videosProducts) as ScatterViewItem;
item.ApplyTemplate();
item.Background = new SolidColorBrush(Colors.Transparent);
item.ShowsActivationEffects = false;
item.Center = new Point(430, 820);
SurfaceShadowChrome ssc = item.Template.FindName("shadow", item) as SurfaceShadowChrome;
ssc.Visibility = Visibility.Hidden; 
```

But now when I try to remove them as follows:

```
Window window = Application.Current.Windows.Cast<Window>().SingleOrDefault(x => x.IsActive);
ScatterView main = UIHelper.FindChild<ScatterView>(window, "MainScatterView");
List<ScatterViewItem> svItems = main.Items.Cast<ScatterViewItem>().Where(svi => svi.Name != "MenuControl").ToList(); 
```

I get an invalid cast exception. What gives? I thought these items were added as ScatterViewItems?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T13:23:08.350

`ItemContainerGenerator.ContainerFromItem`对第二个代码中的每个项目使用与上述代码相同的机制。

# c++ - 在 C++ 中打印对象列表

> ID：13474074
> 
> 赞同：1
> 
> 时间：2012-11-20T13:18:34.197
> 
> 标签：c++, list, class, iterator

我想知道是否有人可以帮助我打印出自定义类的列表（第一次使用容器）。

目前我有一个变量声明为：

`std::list<Item> inventory;`

在一个名为 player 的类中。

现在我在类（播放器）中创建了一个名为`void printInventory();`.

所以我的问题是如何打印该列表中的内容。

我的`Item`课程包含 3 个变量；

```
std::string name; 
int damage;
int value; 
```

我也有打印这些变量的功能`void itemDetails();`

任何帮助深表感谢。

编辑：

由于提供的答案，我知道已经解决了我的问题，这就是我所做的：

重载项目类中的输出运算符：

```
 ostream& operator<<(ostream& os, const Item& item)
    {
            if (item.getTypeInt() == 0)
            {
                    os << "Name: " << item.getName() << endl
                    << "Type: " << item.getTypeString() << endl
                    << "Damage: " << item.getDamage()<< endl
                    << "Value: " << item.getValue() << endl;
            }
            else
            {
            os << "Name: " << item.getName() << endl
            << "Type: " << item.getTypeString() << endl
            << "HP: " << item.getHP()<< endl
            << "Value: " << item.getValue() << endl;
    }

    return os;
    } 
```

然后我使用了其中一个答案，但对其进行了修改，因此它没有声明另一个变量：

```
 void Player::printInventory()
    {   
        for(std::list<Item>::iterator it = inventory.begin(); it!= inventory.end(); ++it)
        {
                cout << *it;
        }

        cout <<"Inventroy Printed!!"<<endl;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T13:24:21.183

您应该重载`std::ostream& operator<<`for`Item`和`player`，这将允许您将数据写入标准输出以外的流。这是一个例子：

```
std::ostream& ooprator<<(std::ostream& os, const Item& item)
{
  return os << "Item {" << item.name << " " << item.damage << " " << item.value << "}";
} 
```

这可以让你做

```
Item i;
std::cout << i << "\n"; 
```

然后，您实现一个类似的运算符 for `player`，循环列表并打印每个项目。

```
std::ostream& ooprator<<(std::ostream& os, const player& p)
  for (const auto& i : p.inventory) os << i << " "
  return os;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T13:22:10.303

`std::for_each`一起来看看`std::mem_fun`。[MSDN 有一个很好的例子](http://msdn.microsoft.com/en-us/library/wtc0dy7y%28v=vs.80%29.aspx)。或者，您总是可以推出自己的循环，直接调用成员函数。

我手头没有编译器，但这样的事情应该可以解决问题：

```
std::for_each(inventory.begin(), inventory.end(), std::mem_fun<Item>(&Item::printInventory)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T13:28:38.310

您已经在`inventory`. 遍历它并调用`itemDetails`

```
void printInventory()
{
  for(std::list<Item>::iterator it = inventory.begin(); it!= inventory.end(); ++it)
  {
    Item item = *it;
    item.itemDetails();
  }
} 
```

这将完成这项工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T13:23:35.873

这是一个简单的for循环

```
for (std::list<Item>::iterator i = inventory.begin(); i != inventory.end(); ++i)
    i->itemDetails(); 
```

还有其他方法，但我就是这样做的。

`itemDetails`对于您的方法来说，这不是一个很好的名称。也许`printDetails`？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-20T13:24:00.080

您可以重载运算符`<<`，以便能够通过标准输出输出 Item。[您可以在此处](http://www.cprogramming.com/tutorial/operator_overloading.html)找到一些示例。

# objective-c - [__NSCFString superview]：发送到实例的无法识别的选择器

> ID：13474083
> 
> 赞同：0
> 
> 时间：2012-11-20T13:19:02.543
> 
> 标签：objective-c, ios, memory, nsarray, unrecognized-selector

我正在尝试将 NSMutableArray* 复制到 NSArray* 中，但它不起作用并且会生成**[__NSCFString superview]: unrecognized selector sent to instance** error 。这是代码：

```
//where gc is a NSDictionary*, recentKey is a NSString*, and _objects is a NSArray*
//gc is an singleton is used to save chache data, with NSKeyedUnarchiver class
//_objects is used to reload the UITableView's data

NSArray *savedNews = [[NSArray alloc] initWithArray:[gc objectForKey:recentkey]];

//this not works...why??
_objects = [[NSArray alloc] initWithArray:savedNews]; 
```

**解析度：**

是的，正如赫尔曼所说，错误是外部的。savedNews 数组使用带有 NSEncoding 的类，但出现错误：

```
- (void)encodeWithCoder:(NSCoder *)encoder {
//...where element was NSString* and not "UIImageView"
// element should be imgView
    if (imgView) [encoder encodeObject:element forKey:@"imgView"];
} 
```

谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T13:24:01.807

在您的应用程序中某处是获取的 NSString 对象的超级视图。我猜您将 NSString 对象分配给了需要 UIView 的东西。可能是这样的：

```
someButton.textLabel = someString; // wrong - but should generate a compiler warning 
```

代替

```
someButton.textLabel.text = someString; // correct 
```

这与您的阵列问题没有直接关系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T13:56:21.667

首先，检查字典中该键的对象是什么。

```
NSLog(@"GC Object type for recentkey:%@", [[gc objectForKey:recentkey] class]); 
```

您只能将 NSArray 传递给 initWithArray：因此，如果该对象还不是 NSArray，但您希望该对象位于数组中。这样做..

```
id obj = [gc objectForKey:recentkey]; //Because I have no idea what this is
NSArray *savedNews = [NSArray arrayWithObject:obj]; 
```

# apache - Apache configuration, Setting document root or virtual host

> ID：13474086
> 
> 赞同：0
> 
> 时间：2012-11-20T13:19:05.790
> 
> 标签：apache, phpmyadmin, lamp, opensuse

how can I say to apache to go to look in the /home/user/Web folder for the project without missing the possibility to display localhost/phpMyAdmin. Itried with Alias, Document root an Virtual Host.

# javascript - QUOTA_EXCEEDED_ERR in Chrome FileSystem API

> ID：13474089
> 
> 赞同：3
> 
> 时间：2012-11-20T13:19:15.057
> 
> 标签：javascript, html, html5-filesystem

In Chrome23/Mac OS 10.8.2 [this fiddle](http://jsfiddle.net/paulftw/Xp9PZ/) logs an error, and I want to know why.

Surprisingly enough, error does not occur if I put a breakpoint on the line that says '// BREAKPOINT' and simply resume execution.

Is it possible for JS to exceed some call rate limit in Chrome? I couldn't think of a better explanation.

Full code (I am using lodash, see its documentation of [_.bind and _.bindAll](http://lodash.com/docs#bind)):

```
window.requestFileSystem = window.requestFileSystem || window.webkitRequestFileSystem;
window.LocalFileSystem = window.LocalFileSystem || {PERSISTENT: window.PERSISTENT};

fs = {
 initFS: function() {
    window.requestFileSystem(LocalFileSystem.PERSISTENT,
                             1024 * 1024, this.gotFS, this.fail);
 },

 fail: function(source, err) {
    err.source = source;
    var msg = '';

    switch (err.code) {
      case FileError.QUOTA_EXCEEDED_ERR:
        msg = 'QUOTA_EXCEEDED_ERR';
        break;
      case FileError.NOT_FOUND_ERR:
        msg = 'NOT_FOUND_ERR';
        break;
      case FileError.SECURITY_ERR:
        msg = 'SECURITY_ERR';
        break;
      case FileError.INVALID_MODIFICATION_ERR:
        msg = 'INVALID_MODIFICATION_ERR';
        break;
      case FileError.INVALID_STATE_ERR:
        msg = 'INVALID_STATE_ERR';
        break;
      default:
        msg = 'Unknown Error';
        break;
    };
    err.msg = msg;
    console.log('err ', JSON.stringify(err));
 },
 failarg: function(msg) {
    return _.bind(this.fail, this, msg);
 },

 gotFS: function(fs) {
    this.fs = this.fs || fs;
    this.readConfig();
    this.listApps(fs.root);  // BREAKPOINT
 },

 listApps: function(fsroot) {
    this.rootReader = this.rootReader || fsroot.createReader();
    this.rootReader.readEntries(this.gotRootEntries, this.fail);
 },

 gotRootEntries: function(entries) {
    _(entries).forEach(function(entry) {
        if (entry.isDirectory && this.controller) {
            // TODO
        }
    });
 },

 readConfig: function() {
    this.fs.root.getFile('config.json', {create:true}, this.gotConfigFileEntry, this.failarg('getFile'));
},
gotConfigFileEntry: function(entry) {
    entry.file(this.gotConfigFile, this.failarg('entry.file'));
},
gotConfigFile: function(file) {
    this.configFile = file;

    var reader = new FileReader();
    reader.onloaded = function(evt) {
        if (evt.target.result) {
            this.config = JSON.parse(evt.target.result);
        }
    };
    reader.readAsText(this.configFile);
},
};
_.bindAll(fs);

$(function() {
   fs.initFS();
});​ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-29T14:20:54.127

以下 Fiddle 基于原始 HTML 5 Rocks 文章 ( [http://www.html5rocks.com/en/tutorials/file/filesystem/](http://www.html5rocks.com/en/tutorials/file/filesystem/) )，演示了如何调用配额系统。

[http://jsfiddle.net/kim3er/h76qq/1/](http://jsfiddle.net/kim3er/h76qq/1/)

```
window.webkitStorageInfo.requestQuota(PERSISTENT, 1024*1024, function(grantedBytes) {
  //window.requestFileSystem(PERSISTENT, grantedBytes, onInitFs, errorHandler);
  initFS(grantedBytes);
}, function(e) {
  console.log('Error', e);
}); 
```

# java - Eclipse 中的问题：java.lang.ClassCastException

> ID：13474094
> 
> 赞同：5
> 
> 时间：2012-11-20T13:19:23.577
> 
> 标签：java, android, eclipse, classcastexception, java.lang.class

两天以来，我每 45 秒不断收到一个错误对话框，标题为：

> 出现了多个问题

在它下面说：

> java.lang.ClassCastException

并且在详细信息中有一条重复的行，上面写着：

> org.eclipse.core.internal.dtree.NoDataDeltaNode 不能转换为 org.eclipse.core.internal.dtree.DataTreeNode

这是它的图片：

![在此处输入图像描述](../Images/0c5ddebeea488ca586afb46871f6e7b1.png)

我按 OK，然后继续编码，我的代码在模拟器和我的手机上都可以正常工作，但是每分钟看到这个对话框真的很烦人，或者我什至不到一分钟！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-12-07T08:44:06.500

也许您的工作空间以某种方式损坏。尝试设置一个新的工作区。

从 Eclipse 菜单中选择`File`-> `Switch Workspace`-> 。`Other`然后选择一个新目录。您将不得不重新导入源并进行所有配置。

# asp.net-mvc - Opening a TIFF File from the Web Browser

> ID：13474099
> 
> 赞同：6
> 
> 时间：2012-11-20T13:19:33.653
> 
> 标签：asp.net-mvc, asp.net-mvc-3, tiff

I checked previous questions here on SO but I think I want my functionality to work a little different. I understand that `.tif` files are not natively supported in Internet Explorer and that an extension, such as [AlternaTIFF](http://www.alternatiff.com/), are available to remedy this. However, I would like the dialog to show up where the user can either save/open the file on the client side. I know that MS Windows Picture and Fax Viewer can open them, no problems.

The files are located on our servers and this will be an intranet site. Currently, I have a link to the files populate in the view but again, I'd like that option for the user to Save/Open the file.

I'm using MVC, which I'm a little unfamiliar with, and can't seem to figure this one out. Thank you.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T15:18:16.170

您可以通过更改标题来执行返回 tiff 的操作，这样当有人单击链接时，文件将被下载或使用 FileResult。

FileResult 示例（我发现它更容易）：[http ://www.dotnetcurry.com/ShowArticle.aspx?ID=807](http://www.dotnetcurry.com/ShowArticle.aspx?ID=807)

保存它们就像使用 MVC 上传任何文件一样。这篇文章很有用[http://haacked.com/archive/2010/07/16/uploading-files-with-aspnetmvc.aspx](http://haacked.com/archive/2010/07/16/uploading-files-with-aspnetmvc.aspx)

我的建议是在使用 GDI+ 上传时将它们转换为 .jpg 或 .png。

```
//You first upload the tiff to the server like the post above explains
//And then open and convert it to .JPEG
Bitmap bm = Bitmap.FromFile("mypic.tiff");
bm.Save("mypic.jpg",ImageFormat.JPEG); 
```

如果您已经拥有所有 tiff 的 url，您可以随时使用控制台应用程序来转换所有这些。即使您需要使用 tiff，在网络上显示 .jpg 版本也是一个好主意。您甚至可以调整它们的大小以创建预览并节省一些带宽！:-)

# android - 远程视图中的 achartengine 位图宽度

> ID：13474102
> 
> 赞同：1
> 
> 时间：2012-11-20T13:19:45.597
> 
> 标签：android, achartengine

我对 aChartEngine 有疑问。我试图在主屏幕小部件中显示图形。到目前为止没有成功，问题是当我将位图放入容器时，它会缩小而不是拉伸以匹配容器宽度。我看到有数据正在更新，但就像这张图片一样：

![在此处输入图像描述](../Images/4732625702c6312192d3e774c2861011.png)

图像上是容器和图形加载的位图部分填充。

当这个图表像这样添加（到活动中）时，没有问题：

```
GraphicalView graph = ChartFactory.getTimeChartView(context, getDataSet(dates, values, seriesTitle), getRenderer(context, lblAxisY), "HH:mm");
graphLayout.removeAllViews();
graphLayout.addView(graph, new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.MATCH_PARENT)); 
```

当我将图形转换为位图并返回时，这是错误的：

```
float dpi = AndroidResolution.getScreenDpi(context);
        GraphicalView graph = ChartFactory.getTimeChartView(context, getDataSet(dates, values, seriesTitle), getRendererWidget(context,
                lblAxisY), "HH:mm");

        graph.setDrawingCacheEnabled(true);
        graph.layout((int) (0 * dpi), (int) (0 * dpi), (int) (100 * dpi), (int) (100 * dpi));
        graph.setDrawingCacheQuality(View.DRAWING_CACHE_QUALITY_HIGH);
        graph.buildDrawingCache();
        graph.getDrawingCache();

        Bitmap bmp = Bitmap.createBitmap((int) (100 * dpi), (int) (100 * dpi), Bitmap.Config.ARGB_8888);
        Canvas canvas = new Canvas(bmp);
        graph.draw(canvas);

        return bmp; 
```

我尝试了各种布局和位图大小的值，但我总是得到一些扭曲和缩小的东西。我无法获得视图宽度和高度，因为它是远程视图。

接收 bmp 的方法：

```
remoteView.setImageViewBitmap(R.id.imgRecentDetails, AndroidPlot.generateTimePlot(context, values, dates,"VALUES", "AXIS Y"))); 
```

渲染器代码：

```
XYMultipleSeriesRenderer returningRenderer = new XYMultipleSeriesRenderer();
    returningRenderer.setApplyBackgroundColor(true);
    returningRenderer.setBackgroundColor(Color.argb(0, 0, 255, 0));
    returningRenderer.setMarginsColor(Color.argb(0, 0, 255, 0));
    returningRenderer.setGridColor(Color.argb(119, 128, 128, 128));
    returningRenderer.setShowGrid(true);
    returningRenderer.setShowLegend(false);
    returningRenderer.setAxisTitleTextSize(dpi * 3);
    returningRenderer.setChartTitleTextSize(dpi * 3);
    returningRenderer.setYLabels(5);
    returningRenderer.setXLabels(3);
    returningRenderer.setYTitle(lblAxisY);
    returningRenderer.setAntialiasing(true);
    returningRenderer.setYAxisMax(100);
    returningRenderer.setYAxisMin(0);
    returningRenderer.setYLabelsAlign(Align.RIGHT, 0);
    returningRenderer.setYLabelsColor(0, Color.WHITE);
    returningRenderer.setXLabelsColor(Color.WHITE);
    returningRenderer.setZoomEnabled(false);
    returningRenderer.setInScroll(true);
    returningRenderer.setPanLimits(new double[] { 0, 1000, 0, 0 });
    returningRenderer.setPanEnabled(true, false);
    XYSeriesRenderer renderer = new XYSeriesRenderer();
    renderer.setPointStyle(PointStyle.POINT);
    renderer.setColor(Color.WHITE);
    renderer.setFillBelowLine(true);
    renderer.setFillBelowLineColor(Color.argb(255, 23, 123, 189));
    returningRenderer.addSeriesRenderer(renderer);
    return returningRenderer; 
```

非常欢迎任何见解或解决方案。

更新：我也在常规活动中尝试过它，它也在容器的左上角缩小（使用了 graph.toBitmap()）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T17:47:23.937

尝试使用`returningRenderer.setInScroll(false)`.

# scala - scala：无法检查匹配是否不可达

> ID：13474107
> 
> 赞同：4
> 
> 时间：2012-11-20T13:20:04.880
> 
> 标签：scala, pattern-matching, playframework-2.0, playframework-2.1

我正在将应用程序从 play 2.0.4 迁移到 play 2.1

但是以下代码会引发此警告：

```
def toConditionOperator(value: String): ConditionOperator.Value = {
  if (value==null) {
    ConditionOperator.Unknown
  } else {
    value.toLowerCase match {
      case "equal" | "=" | ":"             => ConditionOperator.Equal
      case "notequal" | "!=" | "!:" | "<>" => ConditionOperator.NotEqual
      case "greaterorequal" | ">="         => ConditionOperator.GreaterOrEqual
      case "greater" | ">"                 => ConditionOperator.Greater
      case "lessorequal" | "<="            => ConditionOperator.LessOrEqual
      case "less" | "<"                    => ConditionOperator.Less
      case "between"                       => ConditionOperator.Between
      case "in"                            => ConditionOperator.In
      case "startswith"                    => ConditionOperator.StartsWith
      case "endswith"                      => ConditionOperator.EndsWith
      case "contains" | "$"                => ConditionOperator.Contains
      case "missing" | ""                  => ConditionOperator.Missing
      case "unknown" | _                   => ConditionOperator.Unknown
    }
  }
}

[info] Compiling 98 Scala sources and 2 Java sources to /home/sas/tmp/ideas-ba/webservice/target/scala-2.10/classes...
[warn] /home/sas/tmp/ideas-ba/webservice/app/utils/query/ConditionParser.scala:203: Cannot check match for unreachability.
[warn] (The analysis required more space than allowed. Please try with scalac -Dscalac.patmat.analysisBudget=512 or -Dscalac.patmat.analysisBudget=off.)
[warn]       value.toLowerCase match {
[warn]             ^ 
```

在 play 2.0.4（使用 scala 2.9.1）中它工作正常，使用这个版本（scala 2.10）它会产生这个警告

知道有什么问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T13:44:51.457

也许[这个？](https://github.com/scala/scala/pull/1134)

~~如果添加会发生什么~~

 ~~```
scalacOptions ++= Seq("-Dscalac.patmat.analysisBudget=1024") 
```~~ 

~~给你的`project/Build.scala`？~~

**[更新/更正]**

我错了`scalacOptions`-`-D`选项需​​要作为 JVM 参数传递，而不是`scalac`. 由于`sbt`/`play`尊重`JAVA_OPTS`环境，变量，也许你可以尝试运行`play`或`sbt`这样？

```
JAVA_OPTS="-Dscalac.patmat.analysisBudget=off" sbt
# Or
JAVA_OPTS="-Dscalac.patmat.analysisBudget=off" play 
```

假设您使用的是 Unix-y 操作系统。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T01:18:36.400

刚刚遇到同样的问题（但不是在 Play 中）。要获得更永久的修复，只需创建一个文件`~/.sbtconfig`，然后添加以下行：

```
#!/bin/sh
SBT_OPTS="-Dscalac.patmat.analysisBudget=off" 
```

`SBT_OPTS`每次运行时都会使用此文件及其内部定义的文件`sbt`。根据你从哪里获得 Play，它可能与它自己的 sbt 版本捆绑在一起，并且在启动时可能不会使用这个文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-22T15:25:48.860

对于“**每个项目**”的 SBT 配置，将其添加到您的`.scala`构建文件中。

```
initialize ~= { _ => sys.props("scalac.patmat.analysisBudget") = "off" } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-16T12:37:52.213

对于 sbt 0.13.* 在 build.sbt 添加 -J scalac 选项对我有用：

```
scalacOptions ++= Seq("-Jscalac.patmat.analysisBudget=off") 
```

或者

```
sbt -J-Dscalac.patmat.analysisBudget=off 
```

或者您可以将带有“-J”的选项添加到全局选项文件：/usr/local/etc/sbtopts

# protocols - MSNP的未来是什么

> ID：13474111
> 
> 赞同：1
> 
> 时间：2012-11-20T13:20:12.683
> 
> 标签：protocols, deprecated, skype, msn

这是我在这里的第一个问题。我一直在研究这方面的很多东西，但什么都没有出现，因为关于这方面的消息太新了。

当Skype取代msn时，我真的需要知道MSNP的未来。通过 MSNP 连接到@hotmail.com、@msn.com 或类似的 api 会发生什么？

提前致谢。

问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T13:40:53.143

正如 NoPyGod 所指出的， http: [//msdn.microsoft.com/en-us/live//default.aspx](http://msdn.microsoft.com/en-us/live//default.aspx)声明如下：

> 我们最近宣布，我们将开始鼓励 Messenger 用户开始使用 Skype。因此，Messenger 开发者计划将结束。使用 Extensible Messaging and Presence Protocol (XMPP) 的现有实现将继续工作到 2013 年 10 月。使用 MSP 的现有实现将继续工作到 2014 年 3 月。

# c# - 如何以编程方式延长缩短的网址

> ID：13474112
> 
> 赞同：1
> 
> 时间：2012-11-20T13:20:11.727
> 
> 标签：c#, http, url-shortener

我需要获取缩短网址的最终目的地的网址。目前，我正在执行以下似乎可行的操作：

```
 var request = WebRequest.Create(shortenedUri);
        var response = request.GetResponse();
        return response.ResponseUri; 
```

但是有人可以提出更好的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T13:22:23.193

如果这个缩短的 url 是由某个在线服务提供商生成的，那么只有这个服务提供商会存储短 url 和实际 url 之间的映射。所以你需要通过向它发送一个 HTTP 请求来查询这个提供者，就像你做的那样。也不要忘记通过将 IDisposable 资源包装在`using`语句中来正确处理它们：

```
var request = WebRequest.Create(shortenedUri);
using (var response = request.GetResponse())
{
    return response.ResponseUri;
} 
```

如果服务提供商支持 HEAD 动词，您也可以使用该动词并读取必须指向实际 url 的 Location 响应 HTTP 标头。作为替代方案，您可以在请求对象上将[AllowAutoRedirect](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.allowautoredirect.aspx)属性设置为 false，然后读取 Location 响应 HTTP 标头。这样，当您对它不感兴趣时​​，客户端将不会重定向到实际资源并获取整个响应正文。

当然，最好的方法是如果您的在线服务提供商提供一个 API，允许您直接从短网址中为您提供实际网址。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T13:33:21.093

您确实需要发出 HTTP 请求 - 但您不需要遵循重定向，`WebRequest`默认情况下会这样做。*以下是仅发出一个*请求的简短示例：

```
using System;
using System.Net;

class Test
{
    static void Main()
    {
        string url = "http://tinyurl.com/so-hints";
        Console.WriteLine(LengthenUrl(url));
    }

    static string LengthenUrl(string url)
    {
        var request = WebRequest.CreateHttp(url);
        request.AllowAutoRedirect = false;
        using (var response = request.GetResponse())
        {
            var status = ((HttpWebResponse) response).StatusCode;
            if (status == HttpStatusCode.Moved ||
                status == HttpStatusCode.MovedPermanently)
            {
                return response.Headers["Location"];
            }
            // TODO: Work out a better exception
            throw new Exception("No redirect required.");
        }
    }
} 
```

请注意，这意味着如果“加长”URL*本身就是*一个重定向，那么您将不会像在原始代码中那样获得“最终”URI。同样，如果加长的 URL 无效，您将不会发现 - 您只会得到您将重定向到的 URL。这是否是一件好事取决于您的用例......

# mysql - MySQL Workbench 中的可见属性

> ID：13474113
> 
> 赞同：5
> 
> 时间：2012-11-20T13:20:20.267
> 
> 标签：mysql, mysql-workbench

在使用不断增长的 ERM 期间，我想到视图切换功能会非常简洁，因此我可以根据插件 xyz 隐藏所有表格。

我正在使用 MySQL Workbench，并在文档中找到了这个答案：

> 在某些情况下，您可能希望使图层不可见。选择图层，然后在“特性”选项板中，将可见特性设置为 False。

我的问题是：没有Visible属性，单表的属性中没有，Layers的属性中也没有。

我正在使用该工具的最新版本。

有人知道出了什么问题（也许有一个特殊的设置/配置来使用该属性），或者是否有人知道他们是否删除了这个功能？

# android - tabactivity android中的自定义标题栏按钮

> ID：13474114
> 
> 赞同：1
> 
> 时间：2012-11-20T13:20:20.467
> 
> 标签：android, button, custom-titlebar

嘿嘿。如何通过 TabActivity 在自定义标题栏中添加按钮？我可以根据调用的子活动设置标题 TextView。但我不知道如何添加按钮？

我的标签活动：

```
public class TabsManager extends TabActivity {

static TabsManager mTab;

@Override
protected  void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    mTab = this;
    requestWindowFeature(Window.FEATURE_CUSTOM_TITLE);
    setContentView(R.layout.tabhostbottom);
    }
public void setMyTitle(String string) {

    ((Activity) mTab).getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE, R.layout.custom_title);
    TextView textView = (TextView) findViewById(R.id.header);
    textView.setText(string);       
} 
```

我的子活动：

```
@Override
protected void onResume() {
    super.onResume();
    TabsManager.mTab.setMyTitle("Activity1");
}

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.main_club);         
    TabsManager.mTab.setMyTitle("Activity1");
     } 
```

# actionscript-3 - AS3 按钮按下时更改文本

> ID：13474118
> 
> 赞同：0
> 
> 时间：2012-11-20T13:20:28.650
> 
> 标签：actionscript-3, button

我需要一些帮助。在 Flash 中，我从组件面板设计了一个简单的按钮。我给了它 btn_one 的实例名称。我试图做的是每次用户单击按钮时，我希望按钮将文本从发送更改为下一个。但是，你如何做到这一点？

不幸的是，我对 as3 的了解有限。它们是 as3 按钮的许多教程，但我还没有找到任何关于此的教程。如果你们能向我展示一些代码示例或提供一些教程链接，我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T13:42:58.287

我尝试对 SimpleButtons 的文本字段做一些事情，并提出了以下代码。希望它会有所帮助。

```
public class GenericTextButton extends flash.display.SimpleButton { 
    public var buttonText:String;
    private var tfs:Vector.<TextField>;    
    public function GenericTextButton():void 
        {
        tfs=new Vector.<TextField>();
        var tc:DisplayObjectContainer;
        var i:int;
        // now let's init embedded TFs
        // trace((upState as DisplayObjectContainer).numChildren); // wow there's property available! YES
        if (upState is DisplayObjectContainer) {
            tc=(upState as DisplayObjectContainer);
            for (i=0;i<tc.numChildren;i++) 
                if (tc.getChildAt(i) is TextField) tfs.push(tc.getChildAt(i) as TextField);
        } // now same with overState and downState
        if (overState is DisplayObjectContainer) {
            tc=(overState as DisplayObjectContainer);
            for (i=0;i<tc.numChildren;i++) 
                if (tc.getChildAt(i) is TextField) tfs.push(tc.getChildAt(i) as TextField);
        }
        if (downState is DisplayObjectContainer) {
            tc=(downState as DisplayObjectContainer);
            for (i=0;i<tc.numChildren;i++) 
                if (tc.getChildAt(i) is TextField) tfs.push(tc.getChildAt(i) as TextField);
        }
        // trace(name+' has '+tfs.length+' textfields'); // 3 !!!! Unbelieveable, but true
    }
    public function setText(the_text:String):void {
        for (var i:int=0;i<tfs.length;i++) tfs[i].text=the_text; // and NOW we can do as simple as this
    }
} 
```

它的作用：您将按钮实例声明为 GenericTextButton 后代，而不是 SimpleButton，然后您将有`setText()`可用的方法将该按钮中的所有文本立即更改为您提供的任何文本。它枚举 SimpleButton 的内部结构，抓取任何 TextFields，并将其存储在 Vector 中以便于参考。

# android - 如何从设备中删除 ldpi 支持？

> ID：13474128
> 
> 赞同：1
> 
> 时间：2012-11-20T13:20:46.457
> 
> 标签：android, android-layout

如何从 Android 设备中删除 ldpi 支持？我不想在 ldpi 支持的设备中显示任何内容。怎么做？

我更改了清单文件：
在清单中我做了以下更改：

```
Screen Support 
android:smallScreens="false"; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T13:31:15.800

在 Android 开发者网站上找到的代码，[这里](http://developer.android.com/guide/topics/manifest/compatible-screens-element.html)。

```
<compatible-screens>
    <!-- all small size screens - except ldpi -->
    <screen android:screenSize="small" android:screenDensity="mdpi" />
    <screen android:screenSize="small" android:screenDensity="hdpi" />
    <screen android:screenSize="small" android:screenDensity="xhdpi" />
    <!-- all normal size screens - except ldpi -->
    <screen android:screenSize="normal" android:screenDensity="mdpi" />
    <screen android:screenSize="normal" android:screenDensity="hdpi" />
    <screen android:screenSize="normal" android:screenDensity="xhdpi" />
    <!-- all large size screens - except ldpi -->
    <screen android:screenSize="large" android:screenDensity="mdpi" />
    <screen android:screenSize="large" android:screenDensity="hdpi" />
    <screen android:screenSize="large" android:screenDensity="xhdpi" />
    <!-- all xlarge size screens - except ldpi -->
    <screen android:screenSize="xlarge" android:screenDensity="mdpi" />
    <screen android:screenSize="xlarge" android:screenDensity="hdpi" />
    <screen android:screenSize="xlarge" android:screenDensity="xhdpi" />
</compatible-screens> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T13:27:03.613

在你的清单中，在使用权限后添加这个

```
<supports-screens android:smallScreens="false"/> 
```

或检查这个

[https://stackoverflow.com/a/9800554/1838457](https://stackoverflow.com/a/9800554/1838457)

# c# - 将参数传递给 Telerik Report

> ID：13474131
> 
> 赞同：1
> 
> 时间：2012-11-20T13:21:00.947
> 
> 标签：c#, asp.net, telerik, telerik-reporting

我有一个 Telerik 报告项目添加到我的网站，我正在尝试将参数传递给它，但我收到以下错误

> 错误：
> 
> 你调用的对象是空的。

ASP.NET 代码

```
protected void Page_Load(object sender, EventArgs e)
{
   if (!Page.IsPostBack)
    {
        MembershipCard rpt = new MembershipCard();
        // Error occuring here
        rpt.ReportParameters["@MemberID"].Value = "5"; // Request["MemberID"];
        ReportViewer1.Report = rpt;
    }        
} 
```

Telerik 报告类

```
 public MembershipCard()
    {
        /// <summary>
        /// Required for telerik Reporting designer support
        /// </summary>
        InitializeComponent();
        this.DataSource = null;
    }

    private void MembershipCard_NeedDataSource(object sender, EventArgs e)
    {
        string proc = "rpt_MembershipCard" + this.ReportParameters["@MemberID"].Value.ToString();
        SqlDataAdapter adapter = new SqlDataAdapter(proc, "Data Source=(local); Initial Catalog= northwind; intergrated security = True");
        DataSet dataSet = new DataSet();
        adapter.Fill(dataSet);
        (sender as Telerik.Reporting.Processing.Report).DataSource = dataSet;
    } 
```

有人可以指出我正确的方向吗？我无法在互联网上找到任何相关的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T13:40:52.473

问题是您没有提供参数。尝试改变：

```
rpt.ReportParameters.Add("MemberID", "5"); 
```

和：

```
string proc = this.ReportParameters["MemberID"].Value.ToString(); 
```

此外，如果您`DataSet.xsd`在解决方案中添加了文件，请使用其生成的`TableAdapter`.

存储过程示例：

```
using System.Data;
using YourNamespace.StoredProcedureNameTableAdapter;

//Keep in mind StoredProcedureName is taken from SP name in your database
//when you add DataSet.xsd to your solution by default if you don't change anything

private void ClassName_NeedDataSource(object sender, EventArgs e)
{
   int someID = int.Parse(this.ReportParameters["ParameterID"].Value.ToString());
   StoredProcedureNameTableAdapter adapter = new StoredProcedureNameTableAdapter();
   DataSetFile.StoredProcedureNameDataTable data = adapter.GetData(someID); //DataSetFile is DataSetFile.xsd and GetData is method name you defined on DataSetFile.xsd creation
   ((Telerik.Reporting.Processing.Report)sender).DataSource = data.AsDataView();
} 
```

# android - 需要在一个线程中升级 SQLite，如何以及在哪里？

> ID：13474132
> 
> 赞同：3
> 
> 时间：2012-11-20T13:21:04.740
> 
> 标签：android, sqlite

我在我所有的应用程序中都使用 SQLiteOpenHelper（如下所示），很开心。对现有数据库的大量升级在许多年内都取得了成功。

这次我需要在我的一个应用程序中升级数据库，这一步将持续一段时间。所以我需要把这些升级语句放在他们自己的线程中。

这样做的最佳地点是什么？

非常感谢任何帮助。

```
public class MySQLiteOpenHelper extends SQLiteOpenHelper {

    protected static final Object lock = new Object();

    private static final int DATABASE_NAME = "mydatabase.db";
    private static final int DATABASE_VERSION = 3;

    private Context context;
    private SQLiteDatabase database;

    public MySQLiteOpenHelper(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);

        this.context = context;
    }

    @Override
    public void onCreate(SQLiteDatabase database) {
        synchronized (lock) {
            this.database = database;

            // Create database statements
        }
    }

    @Override
    public void onUpgrade(SQLiteDatabase database, int oldVersion, int newVersion) {
        synchronized (lock) {
            this.database = database;

            switch (newVersion) {
                case DATABASE_VERSION:
                    switch (oldVersion) {
                        case 1:
                            upgradeFrom1To2();
                        case 2:
                            upgradeFrom2To3();
                    }

                    break;
            }
        }
    }

    private void upgradeFrom1To2() {
        // Upgrade database statements
    }

    private void upgradeFrom2To3() {
        // Upgrade database statements
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T18:46:13.660

我会将代码放在 IntentService 中，这是一种为长时间运行的操作（尤其是保存数据的操作）实现后台线程的简单方法。使用广播 Intent 从 IntentService 向其他组件发送状态，如果需要，使用 BroadcastReceiver 接收这些 Intent。

我真的会避免在 Activity 中的 AsyncTask 中这样做；操作被杀死的风险太大。无论如何，AsyncTask 比 IntentService 复杂得多。

注意事项： IntentService 不保留任何内容，包括其类字段。为了保护自己，您可能希望将状态存储在 SharedPreferences 中。

# c# - 将嵌套循环重构为单个 LINQ 查询

> ID：13474133
> 
> 赞同：1
> 
> 时间：2012-11-20T13:21:08.140
> 
> 标签：c#, .net, linq

我正在尝试将其重构为查询：

```
 while (IsRunning)
 {

 ...

 //specialPoint is a string
 foreach (PointTypeItem pointTypeItem in PointTypeItemCollection)
    {
        foreach (PointItem pointItem in pointTypeItem.PointItemCollection)
        {
            //Replace the point name with point ID
            if (specialPoint.Contains(pointItem.PointName))
            {
                replacedCode += s.Replace(specialPoint , pointItem.ID);
                //I want to go back to the beginning point of while (IsRunning) from here
                //Simply putting continue; here won't work
            }
        }
    }
 } 
```

我基本上想把它变成一个 LINQ 查询，但我一直在写一个。实际上，我什至不确定我是否采取了正确的方向。

```
var results = from pointTypeItem in ddcItem.PointTypeItemCollection
              where pointTypeItem.PointItemCollection.Any(pointItem => pointName.Contains(pointItem.PointName))
              select //What do I select? 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-20T13:27:39.640

```
var results = from pointTypeItem in ddcItem.PointTypeItemCollection
              from pointItem in pointTypeItem.PointItemCollection
              where specialPoint.Contains(pointItem.PointName)
              select pointItem.ID; 
```

得到一个.`IEnumerable<*the type of pointItem.ID*>`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T13:31:14.093

您可以使用 SelectMany() 扩展方法执行此操作：

```
 PointTypeItemCollection.SelectMany(pointCollection => pointCollection.PointItemCollection)
                .Where(pointItem => pointItem.PointName.Contains(specialPoint))
                .Select(pointItem => pointItem.ID); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T13:32:39.707

在没有任何值的情况下很难进行测试，但是像这样的东西呢？

```
 replacedCode = string.Concat(
        this.PointTypeItemCollection.SelectMany(i => i.PointItemCollection)
        .Where(i => specialPoint.Contains(i.PointName))
        .Select(i => s.Replace(specialPoint, i.ID))
      ); 
```

# extjs - 展开节点不调用回调

> ID：13474135
> 
> 赞同：2
> 
> 时间：2012-11-20T13:21:12.777
> 
> 标签：extjs, extjs4.1

我正在用 Jasmine 测试我的 ExtJs 应用程序。所以没有涉及到意见。

我想扩展几个节点，但首先是我的根节点。但即使扩展该节点也会失败。

我创建了我的 TreeStore，然后：

代码：

```
// oStore is my treestore, everything OK
// Here, I also tried calling oStore.load(); see below

var oNode = oStore.getNodeById( 'root' );

// oNode.isExpanded() says false
// oNode.hasChildNodes() says false

oNode.expand(false, function(oChildren) {
    // it never gets here
    console.log( "hello?");
}); 
```

我的监听器`load`被调用，但监听`beforeexpand`器没有被调用。

如果我`oStore.load()`在商店创建后开始调用，那么当`load`监听器被调用时，它会说，`oNode.childNodes.length`有 3 个孩子......

1.  那么为什么`expand()`不调用 's 回调呢？如何让该节点扩展？

2.  为什么调用时节点的子节点已经加载`oStore.load()`？之后`expand()`也不会被解雇。

* * *

编辑：

启动我的根节点`expanded: true`会使我的商店在 上正确折叠`collapse()`，但之后它`expand()`什么也不做。

```
oNode.collapse(false, function() {
   console.log( "collapse()" ); // works, but expand() afterwards does not
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T13:38:45.130

找到了解决方案。我需要等待商店加载。是茉莉花问题：

```
runs( function() {
         oStore.on( 'load', function() {
            bStoreLoaded = true;
         });
      });

waitsFor( function() {
         return bStoreLoaded; 
      }, " store to be loaded", 5000 );

runs( function() {
         oNode.expand(false, function( aoChildren ) {
            aoChildrenRoot = aoChildren;
            bRootExpanded = true;
         });
      }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T19:13:39.823

源代码中有一些复杂的逻辑来告诉节点它是否需要扩展或可扩展。看看下面的代码，当我尝试以编程方式操作树时，我最终求助于这些代码：

```
if (!parentNode.isExpanded() && !parentNode.isLeaf()) {
    parentNode.expand(false, function () {// deal with open or closed paths
        console.log('expanded parent to pick up new item');                 
    });
} else {
    parentNode.callStore('suspendAutoSync');
    if (parentNode.isLeaf()) {         // Parts that are leafs
        parentNode.set("leaf", false);  //must be set to work properly
        parentNode.appendChild(newPart);
        parentNode.expand(); //expand to show newly created child
    } else {
        parentNode.insertChild(0, newPart);
    }
    parentNode.callStore('resumeAutoSync');
} 
```

# r - 设置设备的默认图形参数

> ID：13474137
> 
> 赞同：7
> 
> 时间：2012-11-20T13:21:16.237
> 
> 标签：r, graphics

我经常喜欢在 IDE 中在深色背景颜色主题上使用浅色文本。当我在 R 中绘制某些东西时，绘图的默认颜色方案是白色背景上的黑色文本/边框/点。我试图默认更改此设置，最好是默认情况下从 R 调用的特定设备（`X11cairo`, `RStudioGD`），同时保持“输出”设备的正常默认值，例如`pdf`和`png`。

我的问题有两个：（1）如何设置默认图形参数？(2) 我可以只对特定设备执行此操作吗？

例如，我可以很容易地在当前设备中设置颜色方案`par`：

```
par(
  bg = "black",
  col = "white",
  col.axis = "white",
  col.lab = "white",
  col.main = "white",
  col.sub = "white")

plot(1) 
```

按预期创建黑底白字，并按预期将设备重置为默认值：

```
dev.off()
plot(1) 
```

我尝试将以下内容放入我的`.Rprofile`：

```
graphics:::par(
  bg = "black",
  col = "white",
  col.axis = "white",
  col.lab = "white",
  col.main = "white",
  col.sub = "white")
graphics:::plot(1,type="n",xlab="",ylab="",axes=FALSE)
graphics:::text(1,1,"Plotting area") 
```

这有点工作，除了它在启动时打开一个绘图窗口，这可能有点烦人，在 RStudio 中它不会打开 RStudio 设备而是一个`x11`窗口。此外，如果我关闭该窗口，参数将再次重置。我希望能够在每次打开带有例如 RStudio 的默认设备的绘图窗口时默认使用此“颜色方案”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T19:25:09.093

图形参数在设备的生命周期内持续存在，这就是为什么在关闭图形设备并开始新绘图时会看到它们重置的原因。

对于您想要做的事情，最好的方法可能是为您想要更改默认值的设备编写一个包装函数。此功能将启动感兴趣的设备并为您设置默认参数。`options(device=mygrdevice)`然后，您可以使用`mygrdevice`自定义功能将您的功能设置为默认设备。然后，如果没有设备打开并且您发出绘图命令，您的功能将运行，打开设备并设置默认值。但是，如果您打开不同的设备，例如 pdf 或 png，则常规默认设置将就位。

您还可以使用`setHook`设置在绘图时运行的钩子函数，但检查哪个设备是当前的可能比它值得做的工作更多。如果在绘图设备启动时可以使用挂钩，那可能是更好的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T15:00:47.513

至少我自己确实为 RStudio 设备想出了一个答案，但它有点混乱。我可以在打开后覆盖设备功能`.Rprofile`以更改`par`设置：

```
RStudioGD <- function()
{
  .Call("rs_createGD")
  graphics:::par(
       bg = "black",
       col = "white",
       col.axis = "white",
       col.lab = "white",
       col.main = "white",
       col.sub = "white")
} 
```

看起来这不是最合适的方法吗？

# highcharts - Highcharts 菜单底部到图表的右侧

> ID：13474141
> 
> 赞同：1
> 
> 时间：2012-11-20T13:21:27.360
> 
> 标签：highcharts

我有**[这样](http://www.highcharts.com/demo/pie-legend)**的高图。
如何将图例（*Firefox、IE、chrome...*）移动到图表的右侧？

*PS我不熟悉jQuery。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T13:33:09.847

您需要将**[`legend.align`](http://api.highcharts.com/highstock#)**选项设置为`'right'`

```
 legend: {
            layout: 'vertical',
            align: 'right',
            verticalAlign: 'bottom',
            x: 0,
            y: -10
          }, 
```

**[这是演示](http://jsfiddle.net/QQk8Z/)**。我只是用上面提到的代码对其进行了调整。

我希望**[Highcharts API](http://api.highcharts.com/highcharts)**对您有很大帮助，探索可用于个性化图表的选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T13:27:06.130

试试这个`legend: { align: 'right' }`所以你可以在右侧对齐你的图例

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T13:32:52.720

看看这个[jsfiddle](http://jsfiddle.net/g6Vs3/)，它对齐右侧的图例。

添加了以下内容：

```
legend: {
    width:180, align: 'right',  
    itemWidth: 180, verticalAlign: 'middle',
    x: 0,
    y: 0
}, 
```

# javascript - How to show y axis value in this amchart sample code?

> ID：13474153
> 
> 赞同：1
> 
> 时间：2012-11-20T13:22:05.913
> 
> 标签：javascript, charts, amcharts

I was trying to display the y axis values in the amcharts. [Here is the jsfiddle link.](http://jsfiddle.net/amcharts/XxeFD/)

Here is the html code:

```
<script src="http://www.amcharts.com/lib/amcharts.js" type="text/javascript">
</script>
<div id="chartdiv" style="width: 80%; height: 362px;align:right;">
</div>​ 
```

Here is the javascript code

```
 var lineChartData = [{
    date: new Date(2009, 10, 2),
    value: 5},
{
    date: new Date(2009, 10, 3),
    value: 15},
{
    date: new Date(2009, 10, 4),
    value: 13},
{
    date: new Date(2009, 10, 5),
    value: 17},
{
    date: new Date(2009, 10, 6),
    value: 15},
{
    date: new Date(2009, 10, 9),
    value: 19},
{
    date: new Date(2009, 10, 10),
    value: 21},
{
    date: new Date(2009, 10, 11),
    value: 20},
{
    date: new Date(2009, 10, 12),
    value: 20},
{
    date: new Date(2009, 10, 13),
    value: 19},
{
    date: new Date(2009, 10, 16),
    value: 25},
{
    date: new Date(2009, 10, 17),
    value: 24},
{
    date: new Date(2009, 10, 18),
    value: 26},
{
    date: new Date(2009, 10, 19),
    value: 27},
{
    date: new Date(2009, 10, 20),
    value: 25},
{
    date: new Date(2009, 10, 23),
    value: 29},
{
    date: new Date(2009, 10, 24),
    value: 28},
{
    date: new Date(2009, 10, 25),
    value: 30},
{
    date: new Date(2009, 10, 26),
    value: 72,
    customBullet: "http://www.amcharts.com/lib/images/redstar.png" // note, one line has a custom bullet defined
    },
{
    date: new Date(2009, 10, 27),
    value: 43},
{
    date: new Date(2009, 10, 30),
    value: 31},
{
    date: new Date(2009, 11, 1),
    value: 30},
{
    date: new Date(2009, 11, 2),
    value: 29},
{
    date: new Date(2009, 11, 3),
    value: 27},
{
    date: new Date(2009, 11, 4),
    value: 26}];

AmCharts.ready(function() {
    var chart = new AmCharts.AmSerialChart();
    chart.dataProvider = lineChartData;
    chart.pathToImages = "http://www.amcharts.com/lib/images/";
    chart.categoryField = "date";

    // sometimes we need to set margins manually
    // autoMargins should be set to false in order chart to use custom margin values
    chart.autoMargins = false;
    chart.marginRight = 0;
    chart.marginLeft = 0;
    chart.marginBottom = 22;
    chart.marginTop = 0;

    // AXES
    // category                
    var categoryAxis = chart.categoryAxis;
    categoryAxis.parseDates = true; // as our data is date-based, we set parseDates to true
    categoryAxis.minPeriod = "DD"; // our data is daily, so we set minPeriod to DD
    categoryAxis.gridAlpha = 0;
    categoryAxis.tickLength = 0;
    categoryAxis.axisAlpha = 0;
    categoryAxis.title = "ko";

    // value
    var valueAxis = new AmCharts.ValueAxis();
    valueAxis.dashLength = 4;
    valueAxis.axisAlpha = 0;
    valueAxis.title="Count";
    chart.addValueAxis(valueAxis);

    // GRAPH
    var graph = new AmCharts.AmGraph();
    graph.type = "line";
    graph.valueField = "value";
    graph.lineColor = "#D8E63C";
    graph.customBullet = "http://www.amcharts.com/lib/images/star.gif"; // bullet for all data points
    graph.bulletSize = 14; // bullet image should be a rectangle (width = height)
    graph.customBulletField = "customBullet"; // this will make the graph to display custom bullet (red star)
    chart.addGraph(graph);

    // CURSOR
    var chartCursor = new AmCharts.ChartCursor();
    chart.addChartCursor(chartCursor);

    // WRITE
    chart.write("chartdiv");
});​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T08:42:07.773

有两种选择：

1) 设置 valueAxis.inside = true;

2）删除这两行：

```
chart.autoMargins = false;
chart.marginRight = 0; 
```

# ssis - 我在来自 HRESULT 的 ssis 异常中出现错误：0xC001404D & 0xC0014052

> ID：13474161
> 
> 赞同：0
> 
> 时间：2012-11-20T13:22:30.707
> 
> 标签：ssis

如何在 ssis 2005 中解决这个问题？我使用脚本组件进行验证。

我正在使用 VB 脚本验证脚本组件中的每一列。同时导入大量数据超过5000万。如果任何一列值根据我的验证脚本失败。那个时候在 ssis 中出现以下错误（尝试锁定变量时检测到死锁。16 次尝试后无法获取锁。锁超时。）

Public Overrides Sub ValidateColumn_ProcessInputRow(ByVal Row As ValidateColumnBuffer) Try Row.IsSkipped = False '声明并设置变量 Dim Var As IDTSVa​​riables90 = Nothing Dim str As String

```
 Me.VariableDispenser.GetVariables(Var)
        Me.VariableDispenser.LockForRead("User::strEligibilityKeyEmptyMsg")
        Me.VariableDispenser.LockForRead("User::strMemberIDEmptyMsg")
        Me.VariableDispenser.LockForRead("User::strServiceFromDateEmptyMsg")
        Me.VariableDispenser.LockForRead("User::strServiceToDateEmptyMsg")
        Me.VariableDispenser.LockForRead("User::strDxCode1EmptyMsg")
        Me.VariableDispenser.LockForRead("User::strAllowedAmountEmptyMsg")
        Me.VariableDispenser.LockForRead("User::strPaidAmountEmptyMsg")
        Me.VariableDispenser.LockForRead("User::strPaidDateEmptyMsg")
        Me.VariableDispenser.LockForRead("User::strFacilityIDEmptyMsg")
        Me.VariableDispenser.LockForRead("User::strServiceTypeEmptyMsg")
        Me.VariableDispenser.LockForRead("User::strServiceFromDateInvalidMsg")
        Me.VariableDispenser.LockForRead("User::strPaidDateInvalidMsg")
        Me.VariableDispenser.LockForRead("User::strServiceToDateInvalidMsg")

        'Field length and Expression validation
        Row.RowId = intRowId + 1
        intRowId = intRowId + 1
        Row.IsValidationSuccess = True

        'Required field validation
        'User::strEligibilityKeyEmptyMsg - Eligibility Key is empty !
        If (Row.EligibilityKey_IsNull Or Row.EligibilityKey.Trim().Length = 0) Then
            Row.IsSkipped = True
            Row.ErrorDesc = Var("User::strEligibilityKeyEmptyMsg").Value.ToString()
            Return
        End If

        'User::strMemberIDEmptyMsg - MemberID is empty !
        'If (Row.MemberIDClaimantID_IsNull Or Row.MemberIDClaimantID.Trim().Length = 0) Then
        '    Row.IsSkipped = True
        '    Row.ErrorDesc = Var("User::strMemberIDEmptyMsg").Value.ToString()
        '    Return
        'End If
        'User::strServiceFromDateEmptyMsg - ServiceFromDate is empty !
        If (Row.ServiceFromDate_IsNull Or Row.ServiceFromDate.Trim().Length = 0) Then
            Row.IsSkipped = True
            Row.ErrorDesc = Var("User::strServiceFromDateEmptyMsg").Value.ToString()
            Return
        End If

        'strServiceFromDateEmptyMSg - Invalid ServiceFromDate ! 
        Dim ServiceFromDate1 As Match = Regex.Match(Row.ServiceFromDate, "^([1][012]|[0]?[1-9])[/]([3][01]|[12]\d|[0]?[1-9])[/]([1-8][0-9][0-9][0-9]|9000)$")
        'Dim ServiceFromDate1 As Match = Regex.Match(Row.ServiceFromDate, "^(([1-9])|(0[1-9])|(1[0-2]))\/(([0-9])|([0-2][0-9])|(3[0-1]))\/(([0-9][0-9])|([1-9][0,9][0-9][0-9]))$")
        If Not ServiceFromDate1.Success Then
            Row.IsSkipped = True
            Row.ErrorDesc = "Invalid ServiceFromDate"
            Return
        End If

        'User::strServiceToDateEmptyMsg - ServiceToDate is empty !
        If (Row.ServiceToDate_IsNull Or Row.ServiceToDate.Trim().Length = 0) Then
            Row.IsSkipped = True
            Row.ErrorDesc = Var("User::strServiceToDateEmptyMsg").Value.ToString()
            Return
        End If

        'strServiceToDateEmptyMSg - Invalid ServiceToDate ! 
        Dim ServiceToDate1 As Match = Regex.Match(Row.ServiceToDate, "^([1][012]|[0]?[1-9])[/]([3][01]|[12]\d|[0]?[1-9])[/]([1-8][0-9][0-9][0-9]|9000)$")
        'Dim ServiceToDate1 As Match = Regex.Match(Row.ServiceToDate, "^(([1-9])|(0[1-9])|(1[0-2]))\/(([0-9])|([0-2][0-9])|(3[0-1]))\/(([0-9][0-9])|([1-9][0,9][0-9][0-9]))$")
        If Not ServiceToDate1.Success Then
            Row.IsSkipped = True
            Row.ErrorDesc = "Invalid ServiceToDate"
            Return
        End If

        'User::strDxCode1EmptyMsg - DxCode1 is empty ! 
        If (Row.DxCode1_IsNull Or Row.DxCode1.Trim().Length = 0) Then
            Row.IsSkipped = True
            Row.ErrorDesc = Var("User::strDxCode1EmptyMsg").Value.ToString()
            Return
        End If
        'User::strAllowedAmountEmptyMsg - AllowedAmount is empty ! 
        If (Row.AllowedAmount_IsNull) Then
            Row.IsSkipped = True
            Row.ErrorDesc = Var("User::strAllowedAmountEmptyMsg").Value.ToString()
            Return
        End If

        'Placeofservice value more than 2 digits! 
        If Row.PlaceofService.ToString().Length > 2 Then
            Row.IsSkipped = True
            Row.ErrorDesc = "Placeofservice value more than 2 digits!"
            Return
        End If

        'MemberAmount is empty ! 
        If (Row.MemberAmount_IsNull) Then
            Row.MemberAmount = 0
        End If

        'User::strPaidAmountEmptyMsg - PaidAmount is empty ! 
        If (Row.PaidAmount_IsNull) Then
            Row.IsSkipped = True
            Row.ErrorDesc = Var("User::strPaidAmountEmptyMsg").Value.ToString()
            Return
        End If
        'User::strPaidDateEmptyMsg - PaidDate is empty !
        If (Row.PaidDate_IsNull Or Row.PaidDate.Trim().Length = 0) Then
            Row.IsSkipped = True
            Row.ErrorDesc = Var("User::strPaidDateEmptyMsg").Value.ToString()
            Return
        End If

        'strPaidDateEmptyMSg - Invalid PaidDate ! 
        Dim PaidDate1 As Match = Regex.Match(Row.PaidDate, "^([1][012]|[0]?[1-9])[/]([3][01]|[12]\d|[0]?[1-9])[/]([1-8][0-9][0-9][0-9]|9000)$")
        'Dim ServiceToDate1 As Match = Regex.Match(Row.ServiceToDate, "^(([1-9])|(0[1-9])|(1[0-2]))\/(([0-9])|([0-2][0-9])|(3[0-1]))\/(([0-9][0-9])|([1-9][0,9][0-9][0-9]))$")
        If Not PaidDate1.Success Then
            Row.IsSkipped = True
            Row.ErrorDesc = "Invalid PaidDate"
            Return
        End If

        'User::strFacilityIDEmptyMsg - FacilityID is empty !
        If (Row.FacilityID_IsNull Or Row.FacilityID.Trim().Length = 0) Then
            Row.IsSkipped = True
            Row.ErrorDesc = Var("User::strFacilityIDEmptyMsg").Value.ToString()
            Return
        End If

        'User::strServiceTypeEmptyMsg- ServiceType is empty !
        If (Row.ServiceType_IsNull Or Row.ServiceType.Trim().Length = 0) Then
            Row.IsSkipped = True
            Row.ErrorDesc = Var("User::strServiceTypeEmptyMsg").Value.ToString()
            Return
        End If

        'Invalid service Type!
        If (Row.ServiceType.Trim().ToUpper <> "IPS" And Row.ServiceType.Trim().ToUpper <> "IPA" And Row.ServiceType.Trim().ToUpper <> "OPM" And Row.ServiceType.Trim().ToUpper <> "OPS" And Row.ServiceType.Trim().ToUpper <> "ER" And Row.ServiceType.Trim().ToUpper <> "EM" And Row.ServiceType.Trim().ToUpper <> "ANC") Then
            Row.IsSkipped = True
            Row.ErrorDesc = "Invalid Service Type!"
            Return
        End If

        'In case of any char or special char in integer/money/numeric  field, importer must skip those records.
        If (Not IsNumeric(Row.AllowedAmount)) Then
            Row.IsSkipped = True
            Row.ErrorDesc = "Invalid char/speceial char is in Allowed Amount"
            Return
        End If
        'In case of any char or special char in integer/money/numeric  field, importer must skip those records.
        If (Not IsNumeric(Row.PaidAmount)) Then
            Row.IsSkipped = True
            Row.ErrorDesc = "Invalid char/speceial char is in Paid Amount"
            Return
        End If

        'In case of any char or special char in integer/money/numeric  field, importer must skip those records.
        If (Not IsNumeric(Row.MemberAmount)) Then
            Row.IsSkipped = True
            Row.ErrorDesc = "Invalid char/speceial char is in Member Amount"
            Return
        End If

        'User::strServiceFromDateInvalidMsg - ServiceFromDate is Invalid Format !
        If (Not IsDate(Row.ServiceFromDate)) Then
            Row.IsSkipped = True
            Row.ErrorDesc = Var("User::strServiceFromDateInvalidMsg").Value.ToString()
            Return
        End If

        'User::strPaidDateInvalidMsg - PaidDate is Invalid Format !
        If (Not IsDate(Row.PaidDate)) Then
            Row.IsSkipped = True
            Row.ErrorDesc = Var("User::strPaidDateInvalidMsg").Value.ToString()
            Return
        End If

        'User::strServiceToDateInvalidMsg - ServiceToDate is Invalid Format !
        If (Not IsDate(Row.ServiceToDate)) Then
            Row.IsSkipped = True
            Row.ErrorDesc = Var("User::strServiceToDateInvalidMsg").Value.ToString()
            Return
        End If

        'PaidDate greater then default date ! 
        If (Convert.ToDateTime(Row.PaidDate.Trim()) > Convert.ToDateTime("12/31/9000")) Then
            Row.IsSkipped = True
            Row.ErrorDesc = "PaidDate greater than default dates !"
            Return
        End If

        Var.Unlock()
    Catch ex As Exception
        Row.ErrorDesc = ex.Message().ToString()
    End Try
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T13:54:40.437

在**If**条件中的每个**Return**之前使用 Var.UnLock() 。

# git - Git 从命令行提示输入用户名和密码

> ID：13474165
> 
> 赞同：2
> 
> 时间：2012-11-20T13:22:41.423
> 
> 标签：git, windows-7, batch-file, cmd

我在跑步

```
git pull 
```

在命令行中的存储库上。它要求输入用户名和密码。当我完成它们时，拉取成功，但我想从批处理文件运行 git pull 并且我希望我的批处理文件提供询问的用户名和密码。如果我的用户名是 myusername 而我的密码是 mypassword，如何从批处理文件运行 git pull？我尝试了以下（在我的批处理文件中）：

```
cd mylocation
git pull
myusername
mypassword 
```

但这并不成功。我怎样才能达到我想要的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T13:30:50.157

我使用腻子选美（Plink）作为身份验证守护进程。然后您可以将您的密钥加载到选美比赛中，然后身份验证会自动运行。

[腻子安装程序](http://the.earth.li/~sgtatham/putty/latest/x86/putty-0.62-installer.exe)

问题是你必须重新安装你的 msysgit 并且在安装过程中你可以选择 Tortoise Plink 作为守护进程。

[配置 Git 以使用 Plink](https://stackoverflow.com/questions/2985074/how-do-i-set-git-to-use-plink-exe)

也许它可以解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T13:35:39.100

运行此命令：

```
git config --global user.name "Your Name Here"
git config --global user.email "your_email@youremail.com" 
```

再次输入后它会记住您的用户名和密码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-18T23:40:33.160

现在正确的解决方案是使用来自 Microsoft 的[Git Credential Manager for Windows](https://github.com/Microsoft/Git-Credential-Manager-for-Windows)。

# dynamic - 动态 JFreechart

> ID：13474167
> 
> 赞同：1
> 
> 时间：2012-11-20T13:22:45.840
> 
> 标签：dynamic, charts, jfreechart

我有一个项目，我从文件中读取值。我想创建一个动态图表，用户将能够选择图表的各个部分，这些部分将放大 - 以查看结果。此功能类似于 Excel 的功能。

例如，在初始图表中，用户能够看到全年的图表，但我希望能够放大并在同一面板（标签框架）中查看特定日期的图表。

是否可以通过 JFreechart 完成？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T07:41:25.393

在[Java Web Start 演示](http://www.jfree.org/jfreechart/jfreechart-1.0.13-demo.jnlp)中，大多数示例都启用了缩放。要进行缩放，请右键单击以查看上下文菜单，单击并拖动选择或使用鼠标滚轮。[`TimeSeriesChartDemo1`](http://www.jfree.org/jfreechart/api/javadoc/src-html/org/jfree/chart/demo/TimeSeriesChartDemo1.html#line.70)，在 中找到`org.jfree.chart.demo`，是一个很好的起点。

# c - 仅使用 SSE2 提取 SSE shuffled 32 位值

> ID：13474170
> 
> 赞同：6
> 
> 时间：2012-11-20T13:23:01.127
> 
> 标签：c, optimization, sse

我试图以有效的方式从 128 位寄存器中提取 4 个字节。问题是每个值都在一个单独的 32bit`{120,0,0,0,55,0,0,0,42,0,0,0,120,0,0,0}`中。我想将 128 位转换为 32 位的形式`{120,55,42,120}`。

“原始”代码如下所示：

```
__m128i byte_result_vec={120,0,0,0,55,0,0,0,42,0,0,0,120,0,0,0};
unsigned char * byte_result_array=(unsigned char*)&byte_result_vec;
result_array[x]=byte_result_array[0];
result_array[x+1]=byte_result_array[4];
result_array[x+2]=byte_result_array[8];
result_array[x+3]=byte_result_array[12]; 
```

我的 SSSE3 代码是：

```
unsigned int * byte_result_array=...;
__m128i byte_result_vec={120,0,0,0,55,0,0,0,42,0,0,0,120,0,0,0};
const __m128i eight_bit_shuffle_mask=_mm_set_epi8(1,1,1,1,1,1,1,1,1,1,1,1,0,4,8,12);    
byte_result_vec=_mm_shuffle_epi8(byte_result_vec,eight_bit_shuffle_mask);
unsigned int * byte_result_array=(unsigned int*)&byte_result_vec;
result_array[x]=byte_result_array[0]; 
```

如何使用 SSE2 有效地做到这一点。SSSE3 或 SSE4 有更好的版本吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-20T14:14:38.627

您可以查看[我以前的答案](https://stackoverflow.com/a/12122607/743214)以获取对此和反向操作的一些解决方案。

特别是在 SSE2 中，您可以通过首先将 32 位整数打包成带符号的 16 位整数并饱和来实现：

```
byte_result_vec = _mm_packs_epi32(byte_result_vec, byte_result_vec); 
```

然后我们使用无符号饱和将这些 16 位值打包成无符号 8 位值：

```
byte_result_vec = _mm_packus_epi16(byte_result_vec, byte_result_vec); 
```

然后我们最终可以从寄存器的低 32 位中获取我们的值：

```
int int_result = _mm_cvtsi128_si32(byte_result_vec);
unsigned char* byte_result_array = (unsigned char*)&int_result;
result_array[x]   = byte_result_array[0];
result_array[x+1] = byte_result_array[1];
result_array[x+2] = byte_result_array[2];
result_array[x+3] = byte_result_array[3]; 
```

**编辑：**以上假设 8 位字最初位于其各自 32 位字的低字节中，其余部分用`0`s 填充，否则它们将在饱和打包过程中被钳位。因此操作如下：

```
 byte   15                               0
                    0 0 0 D  0 0 0 C  0 0 0 B  0 0 0 A

_mm_packs_epi32 ->  0 D 0 C  0 B 0 A  0 D 0 C  0 B 0 A

_mm_packus_epi16 -> D C B A  D C B A  D C B A  D C B A
                                               ^^^^^^^

_mm_cvtsi128_si32 -> int DCBA, laid out in x86 memory as bytes A B C D

-> reinterpreted as unsigned char array { A, B, C, D } 
```

如果最初没有用`0`s 填充 uninterresting 字节，则必须事先将它们屏蔽掉：

```
byte_result_vec = _mm_and_si128(byte_result_vec, _mm_set1_epi32(0x000000FF)); 
```

或者，如果有趣的字节最初位于高字节中，则必须事先将它们转移到低字节中：

```
byte_result_vec = _mm_srli_epi32(byte_result_vec, 24); 
```

或者，如果你真的想要`{ D, C, B, A }`（从你的问题中我并不完全清楚），那么这相当于只是在分配中切换数组索引（或者`_mm_shuffle_epi32`预先在初始 SSE 寄存器上执行 32 位随机播放（） ）。

# websocket - 实时消息传递和 Internet Explorer

> ID：13474180
> 
> 赞同：1
> 
> 时间：2012-11-20T13:23:25.237
> 
> 标签：websocket, socket.io, real-time, pusher

我们目前正在开发一个应用程序，该应用程序使用 pusher.com 来维护我们聊天应用程序上可用人员的列表。

不幸的是，我们的一些用户的 IE < 10（即没有 websockets）并且没有 flash，因此 pusher.com 将无法运行。此外，对于我们的使用来说，推送器变得越来越昂贵（推送器更多地用于具有大量数据的少量连接，而我们正在做相反的事情！）

因此，我正在寻找可以在 IE7+ 上使用或不使用 flash 的 pusher（托管或自托管）的替代方案。

到目前为止，这是我正在考虑的：

*   XMPP/BOSH
*   socket.io（自托管）
*   酒馆

至于规模，我们可能必须每秒处理 100 多条消息和 10000 个并发用户。这里没有人玩过socket.io（或bosh），我们不希望有太多的维护工作（即处理许多服务器等）。所以 2 或 3 个自托管服务器是可以的，10+ 则不是。

有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T09:56:46.983

> 不幸的是，我们的一些用户的 IE < 10（即没有 websockets）并且没有 flash，因此 pusher.com 将无法运行。

这是不正确的。Pusher（*我为之工作*）为旧版浏览器提供后备方案。基于 HTTP 的后备已经开始发布，与现有的 Flash 套接字后备一起使用。因此，旧版本的 IE 已经使用 Flash 套接字回退进行处理，但基于 HTTP 的回退将提供接近 100% 的浏览器覆盖率。

2012年[11 月的 Pusher 通讯](http://us2.campaign-archive1.com/?u=637914c3660698d70f0dfec61&id=791b3e7ede&e=748c6256b3)有以下内容：

> 我们一直很喜欢 WebSocket，从一开始它们就是我们的主要传输机制。虽然它们仍然是在应用程序之间发送数据的最佳方式，但我们有时不得不诉诸各种诡计来协商麻烦的代理。根据大众的需求，我们很快将通过将基于 HTTP 的传输添加到我们现有的后备选项中来支持我们的传统支持。
> 
> 我们已经部署了一些适用于一组有限条件的临时端点，我们将在接下来的几个月内继续扩展此功能。如果您想以 beta 用户的身份尽早访问此内容，请联系 support@pusher.com。

在成本方面：

> 此外，对于我们的使用来说，推送器变得越来越昂贵（推送器更多地用于具有大量数据的少量连接，而我们正在做相反的事情！）

您是否联系过 Pusher 支持解释您的用例？可能会有折扣。

> 因此，我正在寻找可以在 IE7+ 上使用或不使用 flash 的 pusher（托管或自托管）的替代方案。

有一个[实时网络技术指南](http://www.leggetter.co.uk/real-time-web-technologies-guide)，其中有一个很好的实时网络技术解决方案列表（它在我的网站上并且我维护它）。如果您想支持 IE，那么提供基于 HTTP 的回退的解决方案是最安全的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T13:33:59.753

我个人会选择socket.io。它支持 Internet Explorer 5.5+。

它支持各种传输并使用最合适的传输来确保浏览器兼容性，而无需使用特殊代码来处理每个浏览器。以下是网站上的运输清单：

```
WebSocket
Adobe® Flash® Socket
AJAX long polling
AJAX multipart streaming
Forever Iframe
JSONP Polling 
```

[您可以在此处查看浏览器支持](http://socket.io/#browser-support)的完整列表。

至于 BOSH，这里是关于[BOSH vs Websockets](https://stackoverflow.com/questions/6434088/why-isnt-bosh-more-popular-especially-as-an-alternative-to-websockets-and-long)的讨论。如果您继续使用 BOSH，您将错过现代浏览器支持的 Websockets 功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-05T10:13:27.897

您应该查看[ScaleDrone](https://www.scaledrone.com/)作为 Pusher 的实惠替代品。

# android - Android 警报管理器不起作用

> ID：13474186
> 
> 赞同：2
> 
> 时间：2012-11-20T13:23:36.557
> 
> 标签：android, alarmmanager, android-pendingintent

所以我有一个`BroadcastReceiver`看起来像这样的：

```
public class UpdateReceiver extends BroadcastReceiver {

    public UpdateReceiver() {
    }

    @Override
    public void onReceive(Context context, Intent intent) {
        Calendar cal = Calendar.getInstance();
        cal.add(Calendar.SECOND, 10);
        System.out.println("Broadcast received");       

        PendingIntent operation = PendingIntent.getService(context, 0,new Intent("REFRESH_THAT"), PendingIntent.FLAG_UPDATE_CURRENT);       
        AlarmManager alarmManager = (AlarmManager) context.getSystemService(Context.ALARM_SERVICE);
        alarmManager.setInexactRepeating(AlarmManager.ELAPSED_REALTIME, System.currentTimeMillis(), cal.getTimeInMillis(), operation);
    }
} 
```

这就是我所说的`BroadcastReceiver`

```
 Intent in = new Intent ("REFRESH_BROADCAST");       
 sendBroadcast(in); 
```

这是我在 Android`Manifest`文件中的意图过滤器

```
<service android:name = ".services.RefreshService">     
    <intent-filter>
        <action android:name="REFRESH_THAT"/>
    </intent-filter>
</service>

<receiver android:name=".services.UpdateReceiver">        
    <intent-filter>
        <action android:name="REFRESH_BROADCAST"/>        
    </intent-filter>    
</receiver> 
```

`BroadcastReceiver`收到了没有任何问题的广播，但`AlarmManager`似乎什么也没做。如果我称`operation.send()`它可以正常工作，那么我认为`AlarmManager`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T16:33:40.770

好吧，最后我找到了解决方案，这是我的错。

我设置`int type`的 to`AlarmManager.ELAPSED_REALTIME`和 `long triggerAtMillis`to`System.currentTimeMillis()`属性`alarmManager.setInexactRepeating(.....)`是错误的，它只能与`AlarmManager.RTC / RTC_WAKEUP`.

所以功能代码是这样的：

```
PendingIntent operation = PendingIntent.getService(context, 0,new Intent("REFRESH_THAT"), 0);       
        AlarmManager alarmManager = (AlarmManager) context.getSystemService(Context.ALARM_SERVICE);
        alarmManager.setInexactRepeating(AlarmManager.ELAPSED_REALTIME, SystemClock.elapsedRealtime() , 30000, operation); 
```

我真的应该更仔细地阅读 API 文档。如果您将鼠标悬停`AlarmManager.ELAPSED_REALTIME`，它会告诉您必须使用哪种时间触发器。希望我这个愚蠢的错误将来会对某人有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T13:32:11.020

根据[`setInexactRepeating`](http://developer.android.com/reference/android/app/AlarmManager.html#setInexactRepeating%28int,%20long,%20long,%20android.app.PendingIntent%29)文档，第三个参数是：

> > intervalMillis：警报的后续重复之间的间隔（以毫秒为单位）

然后你应该把`10000`ms （这是 10 秒）而不是`cal.getTimeInMillis()`

```
alarmManager.setInexactRepeating(AlarmManager.ELAPSED_REALTIME, cal.currentTimeMillis(), 10000, operation); 
```

这意味着，您的警报将在意图触发 10 秒后响起，然后每 10 秒重复一次。当然，由于您使用的是这种方法，所以这是不准确的时机。

# objective-c - Xcode 的多合一共享框架

> ID：13474187
> 
> 赞同：0
> 
> 时间：2012-11-20T13:23:43.430
> 
> 标签：objective-c, ios, xcode

我需要为至少 facebook、tweeter 和电子邮件实现共享功能。我正在使用 Xcode 4.5。我找到了 Sharekit，当将类添加到项目中时出现 ARC 错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T13:29:19.317

iOS 6 中的新[UIActivityViewController为您完成了这项工作。](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIActivityViewController_Class/Reference/Reference.html)您只需指定输入文本/图像并呈现控制器，即可分享到 Facebook、Twitter、Email、SMS 等...

引用[本教程](http://www.techotopia.com/index.php/An_iPhone_iOS_6_Facebook_Integration_Tutorial_using_UIActivityViewController)：

```
- (IBAction)sendPost:(id)sender {
    NSArray *activityItems;

    if (_postImage.image != nil) {
        activityItems = @[_postText.text, _postImage.image];
    } else {
        activityItems = @[_postText.text];
    }

    UIActivityViewController *activityController =
                    [[UIActivityViewController alloc]
                    initWithActivityItems:activityItems
                    applicationActivities:nil];

    [self presentViewController:activityController
                   animated:YES completion:nil];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T13:26:26.100

Sharekit 还没有为 ARC 构建。您的选择是关闭 ARC，修复错误/警告，或者不使用 sharekit 并使用 Facebook、Twitter 和电子邮件的内置 Apple API。

# c# - 如何在 Windows Phone 8 (C#) 框架中添加 C++ DLL

> ID：13474189
> 
> 赞同：12
> 
> 时间：2012-11-20T13:23:48.567
> 
> 标签：c#, dll, visual-studio-2012, dllimport, windows-phone-8

我正在尝试将 C++ DLL 添加到`Windows Phone 8`Visual Studio Express 2012 中的框架。

我尝试了以下方法

1.  通过 PInvoke 导入和调用

    > [DllImport("WP8DLL.dll", CallingConvention = CallingConvention.Cdecl)]
    > 
    > 公共静态外部 int 函数ReturningInteger();

    **结果：**这种方式虽然没有编译错误，但是当我尝试访问 DLL 的方法时，它会抛出`System.NotSupportedException`.

2.  在项目属性中添加引用

    **结果：**我收到消息“无法将对*更高版本或不兼容程序集的引用添加到项目中*”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T21:58:40.733

您不能将托管 Windows Phone 8 项目中的引用直接添加到本机静态或本机动态库。您将需要创建一个 Windows Phone 运行时组件。这些可以被您的 UI 项目引用，也可以引用 C++ 项目等。

例如，请参阅[此链接](http://www.jarredcapellman.com/2012/11/03/how-to-get-c-winrt-in-a-windows-phone-8-application/)以获取更多信息。

# jquery - 如果 div 具有不同的类，则更改单击操作

> ID：13474196
> 
> 赞同：0
> 
> 时间：2012-11-20T13:24:05.343
> 
> 标签：jquery

我有许多带有容器的 div。当单击其中一个 div 时，我比较该 div 的 ID 和具有“当前”类的那个，如果它们不一样，我会做一些事情。

我想添加另一个条件，检查类“红色”是否存在而不是“绿色”，如果是，则显示警报。我尝试了下面的代码，但我想我可能检查错了，因为当我单击带有“main”的任何 div 时会收到警报...

```
<div id="main">
   <div id="1"><span class="red"></span>Label 1</div>
   <div id="2"><span class="red"></span>Label 2</div>
   <div id="3"><span class="green current"></span>Label 3</div>
   <div id="4"><span class="green"></span>Label 4</div>
</div>

$('#main div').live('click', function() {

   var ct = $('.current').attr('id');
   var cc = $(this).attr('id');

   // need to add conditional statement
   // if ($(this).find('.red')) {
   //    alert("Has red class");

   if (ct != cc) {
      // do something
   }

}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T13:25:39.600

尝试

```
if ($(this).hasClass('red')) {
   // do something
} 
```

编辑：对不起，这是假设点击事件来自跨度本身。

```
if ($('span', this).hasClass('red')) {
   // do something
} 
```

应该管用...

第二次编辑：你应该关闭你的 div... 然后：http: [//jsfiddle.net/E9948/](http://jsfiddle.net/E9948/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T13:27:28.293

检查元素是否具有类的方法是使用`.hasClass()`

```
if ($('span', this).hasClass('red')){
    alert('has red class');
} 
```

当你有的时候你正在做的`.find('.red')`是让后代`$(this)`有一个 class `red`。它不会像 .hasClass() 那样返回布尔值。

此外，您`div` `id`的 s 以数字开头。那不是正确的方法。他们应该以一封信开头。关闭`div`标签是个好主意。:-)

这是一个[jsbin](http://jsbin.com/utomar/1/edit)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T13:41:21.777

替代方案（工作示例[http://jsbin.com/oqopaw/1/edit](http://jsbin.com/oqopaw/1/edit)）：

```
<!DOCTYPE html>
<html>
<head>
<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
<meta charset=utf-8 />
<title>JS Bin</title>
  <style>
    #main span{
      cursor:pointer;
    }
    .red{
      background-color:red;
    }
    .green{
      background-color:green;
    }
  </style>
</head>
<body>
<div id="main">
   <div id="1"><span class="red">Label 1</span></div>
   <div id="2"><span class="red">Label 2</span></div>
   <div id="3"><span class="green current">Label 3</span></div>
   <div id="4"><span class="green">Label 4</span></div>
</div>
<script>
$('#main span').click(function() {
  if($(this).attr('class').indexOf('current') >= 0) 
  {
    if($(this).attr('class').indexOf('green') >= 0) alert('current green!');
  }
});  
</script>
</body>
</html> 
```

# symfony - 如何包含 Facebook-SDK

> ID：13474197
> 
> 赞同：0
> 
> 时间：2012-11-20T13:24:09.317
> 
> 标签：symfony

我正在使用带有 FOSFacebookBundle 的 FOSUserBundle 示例。在此我已经构建了我的应用程序。

相关的项目结构如下：

```
src\ABC\MainBundle\
src\ABC\UserBundle\

src\ABC\MainBundle\Controller\DefaultController.php

src\ABC\UserBundle\Security\User\Provider\FacebookProvider.php

vendor\facebook\php-sdk\src\base_facebook.php 
```

FacebookProvider 的一部分：

```
use \BaseFacebook;
use \FacebookApiException;

class FacebookProvider implements UserProviderInterface
{

protected $facebook;

public function __construct(BaseFacebook $facebook, $userManager, $validator)
{
    $this->facebook = $facebook;
}

public function loadUserByUsername($username)
{           
    try {
        $fbdata = $this->facebook->api('/me');

... 
```

如您所见，Facebook-Object 已经可用。我现在想要做的几乎相同，但在我的 DefaultController 中：

```
use \BaseFacebook;
use \FacebookApiException;

class DefaultController extends BaseController
{
   public function indexAction(){
      $facebook = new Facebook('key', 'secret');
      $fbfriends_obj = $facebook->api('/'.$fbid.'/friends');
... 
```

但是我收到了消息

```
Fatal error: Class 'ABC\MainBundle\Controller\Facebook' not found in C:\xampp\htdocs\...\src\ABC\MainBundle\Controller\DefaultController.php on line x 
```

这是为什么？如何从我的默认控制器内部访问 facebook 类？如果 facebookprovider 已经可以使用，为什么我的控制器无法使用？

任何提示将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T16:46:09.867

问题在这里：

```
use \BaseFacebook;
use \FacebookApiException; 
```

您正在从命名空间导入 BaseFacebook 类，您应该使用 \Facebook （在 Controller 和 FacebookProvider 类中）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T15:05:50.603

该问题的解决方案是，facebook-class 没有命名空间，您必须执行类似的操作

```
$facebook = new \Facebook(...) 
```

# android - 警报对话框生成器停止响应

> ID：13474199
> 
> 赞同：1
> 
> 时间：2012-11-20T13:24:14.213
> 
> 标签：android, android-alertdialog

我有问题显示`AlertDialog`。每当我运行代码时，应用程序都会没有响应并强制关闭。附上我的代码：

```
公共无效显示列表（查看视图）{

     新的 AsyncTask<String, Void, List<Address>>() {

          protected List<Address> doInBackground(String...params) {
               /* 一些操作 */
               返回空值；
          }

          protected void onPostExecute(List<Address> 结果) {
               如果（结果大小（）== 0）{
                    /* 做点什么 */
               } 别的 {

                    /* 一些代码 */

                    AlertDialog.Builder alert = new AlertDialog.Builder(this);
                    alert.setMessage(sometext);
                    警报.show();
               }
          }

     }.execute(目标);

}

```

这是我的 logCat

```
11-20 20:26:56.848: E/AndroidRuntime(29789): 致命异常: main
11-20 20:26:56.848: E/AndroidRuntime(29789): java.lang.NullPointerException
11-20 20:26:56.848: E/AndroidRuntime(29789): 在 android.app.AlertDialog.resolveDialogTheme(AlertDialog.java:142)
11-20 20:26:56.848: E/AndroidRuntime(29789): 在 android.app.AlertDialog$Builder.(AlertDialog.java:359)
11-20 20:26:56.848: E/AndroidRuntime(29789): 在 com.ceria.tuntun.MainActivity$5.onPostExecute(MainActivity.java:201)
11-20 20:26:56.848: E/AndroidRuntime(29789): at com.ceria.tuntun.MainActivity$5.onPostExecute(MainActivity.java:1)
11-20 20:26:56.848: E/AndroidRuntime(29789): 在 android.os.AsyncTask.finish(AsyncTask.java:602)
11-20 20:26:56.848: E/AndroidRuntime(29789): 在 android.os.AsyncTask.access$600(AsyncTask.java:156)
11-20 20:26:56.848: E/AndroidRuntime(29789): 在 android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:615)
11-20 20:26:56.848: E/AndroidRuntime(29789): 在 android.os.Handler.dispatchMessage(Handler.java:99)
11-20 20:26:56.848: E/AndroidRuntime(29789): 在 android.os.Looper.loop(Looper.java:137)
11-20 20:26:56.848: E/AndroidRuntime(29789): 在 android.app.ActivityThread.main(ActivityThread.java:4511)
11-20 20:26:56.848: E/AndroidRuntime(29789): 在 java.lang.reflect.Method.invokeNative(Native Method)
11-20 20:26:56.848: E/AndroidRuntime(29789): 在 java.lang.reflect.Method.invoke(Method.java:511)
11-20 20:26:56.848: E/AndroidRuntime(29789): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:980)
11-20 20:26:56.848: E/AndroidRuntime(29789): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:747)
11-20 20:26:56.848: E/AndroidRuntime(29789): at dalvik.system.NativeStart.main(Native Method)

```

我不知道这是怎么回事。我已经使用了很多次 AlertDialog 并且想知道为什么这个不能工作。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T13:25:34.350

```
AlertDialog.Builder alert = new AlertDialog.Builder(this); 
```

因为“this”将引用异步任务的匿名内部类，并且它需要来自活动的上下文

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T13:27:57.877

用这个..

```
AlertDialog.Builder alert = new AlertDialog.Builder(yourActivity.this); 
```

如果您在 TabHost 中使用 AlertDialog，请使用以下行。

```
AlertDialog.Builder alert = new AlertDialog.Builder(getParent()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T13:35:02.457

您在创建对话框时使用了错误的上下文。`this`关键字是对**当前对象**的引用，当您`this`在上下文中使用时，`AsyncTask`然后`this`引用 AsyncTask 对象。这是罪魁祸首。您需要使用您的父活动对象作为上下文，这可以通过编写来实现`YouActivityClassName.this`：

```
AlertDialog.Builder alert = new AlertDialog.Builder(YouActivityClassName.this); 
```

# graph - 图：通过公共边进行分组/聚类的算法

> ID：13474201
> 
> 赞同：1
> 
> 时间：2012-11-20T13:24:19.567
> 
> 标签：graph, grouping, cluster-analysis, nodes, edges

首先，如果我的英语有点不对劲（这不是我的母语），我很抱歉。我会尽力让自己被理解。

我正在为我的硕士论文做一个可视化项目，我想出了一个算法问题。可视化由一个图表组成，该图表通过我所谓的关键字（边缘）表示我称之为人工制品（图表的节点）之间的连接。这些人工制品可以是各种各样的东西。例如，它们可以表示照片，而边缘将表示照片之间的标签。出于说明目的，假设照片 A 通过标签 1 连接到照片 B。这意味着照片 A 和照片 B 都具有标签 1。

现在，我有一个称为扩展的操作，它以这种方式工作：

用户双击一个节点（在我的示例中是一张照片），程序会查询数据库以查找与该节点的每个新连接。在上面的示例中，如果用户双击照片 B，则扩展将生成例如分别带有标签 2 和 3 的照片 C 和照片 D。问题是这会产生大量数据，让我无法解决分组节点的问题。理想的情况是使用尽可能多的常见关键字（边缘）进行分组。例如，现在假设照片 C 和 D 都具有标签 5，那么将有一组具有 C 和 D 的边缘为 5。但是如果照片 D 和 E 都具有标签 5 和 6，则该组是带有边缘的 D 和 E 5 和 6，然后是带有边缘 5 的照片 C（边缘可以重复）。为了显示：

```
 5,6
A----B -> expand B -> A----B-----DE
   1                    1  |
                           |5
                           |
                           C 
```

我的问题是完成这个算法。在数据库上，我有以下表格：

**关键字** （keyword_id、other_attributes）

**人工制品（artefact_id， other_attributes** ）

**Keyword_Artefact** (keyword_id, artefact_id)

**Keyword_Artefact_Artefact** (keyword_id, artefact_id1, artefact_id2)

解决这个问题的最佳方法是什么？一个可以用相当数量的数据完成的。

我正在使用 prefuse 库在 java 中开发这个程序。

# android - 如何在 Android 上检查互联网访问（包括网络共享！）？

> ID：13474205
> 
> 赞同：0
> 
> 时间：2012-11-20T13:24:26.263
> 
> 标签：android, networking, connection, tethering

我正在寻找一段代码来检查 Android 设备的网络连接，包括网络共享，而不仅仅是无线通道。

我在网上花了几个小时寻找这样的东西，但没有任何结果！我发现的所有功能都只管理无线网络测试。与网络共享无关。那么至少有可能吗？你有一些对应的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T08:34:25.500

这将检查是否启用了 Tethering。从我更改为让 adbWireless 通过系留连接工作的类中剪切：

```
 // check if tethering is on
    try {
        Method[] wmMethods = mWifiManager.getClass().getDeclaredMethods();
        for(Method method: wmMethods)
            if("isWifiApEnabled".equals(method.getName()))
                return (Boolean) method.invoke(mWifiManager);
        return false;
    } catch (Exception x) {return false;} 
```

你还需要 android.permission.ACCESS_WIFI_STATE

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T13:44:16.397

看一下这个：

```
 public static boolean isOnline(Context context) {
    boolean isOnline = false;
    try {
        final ConnectivityManager conMgr = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);
        final NetworkInfo activeNetwork = conMgr.getActiveNetworkInfo();
        if(activeNetwork != null && activeNetwork.isConnected() && activeNetwork.isAvailable()) {
            isOnline = true;
        } else {
            isOnline = false;
        } 
    } catch(Exception e) {
        Log.e(Config.LOG_TAG, e.toString());
        isOnline = false;
    }
    return isOnline;
} 
```

还将此类权限添加到 AndroidManifest.xml 中：

```
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
```

# jquery - Jquery 检查所有不早于 jquery 1.4.2 的作品

> ID：13474206
> 
> 赞同：0
> 
> 时间：2012-11-20T13:24:27.800
> 
> 标签：jquery, checkbox

我有一个关于复选框的问题。

在链接的小提琴中，我有 2 个复选框。如果我同时选择（汽车，公共汽车）复选框，它还必须选择“Checkall”复选框。

切换状态的代码：

```
$('.checkAll').change(function() {
    $('.chc').attr('checked', $( this ).is( ':checked' ) ? 'checked' :'');
}); 
```

下面它完美:(使用*jquery-ui 1.9.1*和*jquery 1.4.2* )

演示：http: **[//jsfiddle.net/nUwfB/](http://jsfiddle.net/nUwfB/)**

但是如果我删除*jquery 1.4.2*版本并添加*jquery 1.8.3*，它就不起作用：

演示：http: **[//jsfiddle.net/dSCfp/](http://jsfiddle.net/dSCfp/)**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T13:43:34.373

[该`.attr()`方法](http://api.jquery.com/attr/)已更改（并且不再适用`checked`于 > v1.6 中的复选框属性）。

> 从 jQuery 1.6 开始，.attr() 方法为尚未设置的属性返回 undefined。此外，.attr() 不应用于普通对象、数组、窗口或文档。要检索和更改 DOM 属性，请使用 .prop() 方法。

请改用[该`.prop()`方法](http://api.jquery.com/prop/)（它接受布尔值，而不是字符串）。

```
$(document).ready(function() {
    $('.checkAll').change(function() {
        $('.chc').prop('checked', $(this).is(':checked'));
    });

    $("#slctble").selectable({
        filter: 'td',
        cancel: 'td:not(.isaretle)',
        stop: function() {
            $(".ui-selected input", this).each(function() {
                this.checked = !this.checked
            }); //end-ui-selected input
            $('.chc').length == $('.chc:checked').length ? $('.checkAll').prop('checked', true) : $('.checkAll').prop('checked', false);
        } //endStopFunction
    }); //endSelectable
});​ 
```

更新了非工作小提琴：http: [//jsfiddle.net/dSCfp/1/](http://jsfiddle.net/dSCfp/1/)

# sql - sql查询如果参数为空全选

> ID：13474207
> 
> 赞同：56
> 
> 时间：2012-11-20T13:24:40.633
> 
> 标签：sql, parameters, where-clause

`?`如果为空，是否可以修改以下查询以返回所有记录？

```
SELECT NAME, SURNAME FROM MY_TABLE WHERE NAME = ?; 
```

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2012-11-20T13:25:39.483

尝试这个：

```
SELECT * 
FROM MY_TABLE 
WHERE @parameter IS NULL OR NAME = @parameter; 
```

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2012-11-20T13:40:05.787

您还可以使用函数`IFNULL`, `COALESCE`, `NVL`,`ISNULL`来检查空值。这取决于您的 RDBMS。

**MySQL**：

```
SELECT NAME, SURNAME FROM MY_TABLE WHERE NAME = IFNULL(?,NAME); 
```

或者

```
SELECT NAME, SURNAME FROM MY_TABLE WHERE NAME = COALESCE(?,NAME); 
```

**甲骨文**：

```
SELECT NAME, SURNAME FROM MY_TABLE WHERE NAME = NVL(?,NAME); 
```

**SQL Server** / **SYBASE**：

```
SELECT NAME, SURNAME FROM MY_TABLE WHERE NAME = ISNULL(?,NAME); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-05-16T06:31:48.567

下一个。查询将处理名称（表列值）也可以为 NULL 的情况：

```
SELECT NAME, SURNAME FROM MY_TABLE WHERE COALESCE(NAME,'') = COALESCE(?,NAME,''); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-07-06T03:03:53.450

```
SELECT NAME
FROM MY_TABLE
WHERE NAME LIKE CASE WHEN ? IS NOT NULL THEN ? ELSE '%' END 
```

这将完美地工作，但它只会返回非空值。

# css - CSS3 - 3D 翻转动画 - IE10 transform-origin: preserve-3d workaround

> ID：13474210
> 
> 赞同：26
> 
> 时间：2012-11-20T13:24:49.430
> 
> 标签：css, animation, internet-explorer-10

在浏览了 IE10 的[开发者博客](http://msdn.microsoft.com/en-gb/library/ie/hh673529%28v=vs.85%29.aspx#the_ms_transform_style_property)后，我发现他们不支持 preserve-3d 设置。

他们确实提供了一种解决方法，但我似乎无法让它工作。下面的示例适用于 Safari、Chrome 和 Firefox，但不适用于 IE10。如果有人可以帮助我实现这一目标，我将非常感激。

单击时框应围绕 Y 轴旋转以显示一些文本和绿色背景颜色。在 IE10 中并非如此

**我的例子：** [http ://codepen.io/2ne/pen/zEpge](http://codepen.io/2ne/pen/zEpge)

部分代码：

HTML

```
<div class="flip-wrapper">
    <div class="front"></div>
    <div class="back">IE10 SUCKS</div>
</div> 
```

CSS

```
.flip-wrapper {
    cursor: pointer;
    height: 100%;
    -moz-perspective: 1000;
    -webkit-perspective: 1000;
    -ms-perspective: 1000;
    perspective: 1000;
    -moz-transform-style: preserve-3d;
    -webkit-transform-style: preserve-3d;
    -ms-transform-style: preserve-3d;
    transform-style: preserve-3d;
    width: 100%;
}

.flip-wrapper .front,
.flip-wrapper .back {
    -moz-backface-visibility: hidden;
    -webkit-backface-visibility: hidden;
    -ms-backface-visibility: hidden;
    backface-visibility: hidden;
    height: 100%;
    position: absolute;
    width: 100%;
}

.flip-wrapper .back {
  background: none repeat scroll 0 0 #298F68;
    -webkit-transform: rotateY(180deg);
    -moz-transform: rotateY(180deg);
    transform: rotateY(180deg);
}

.flip-wrapper.flipped {
  cursor: default;
  -webkit-animation: flip 500ms 1;
    -moz-animation: flip 500ms 1;
    animation: flip 500ms 1;
    -webkit-animation-fill-mode: forwards;
    -moz-animation-fill-mode: forwards;
    -o-animation-fill-mode: forwards;
    -ms-animation-fill-mode: forwards;
    animation-fill-mode: forwards;
} 
```

2ne

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2015-01-17T17:59:35.607

我似乎也无法在任何地方找到一个很好的例子，所以我花~~了~~太多时间自己制作。

这个适用于所有浏览器，没有那种奇怪的 360 度 IE 翻转，并且包括静态内容的设置（位于卡片的两侧 - 我需要在两侧的右上角放置一个“翻转”按钮） .

--我在最新版本的 Chrome、Firefox、Safari、Opera 和 IE 上进行了测试。

[http://jsfiddle.net/Tinclon/2ega7yLt/7/](http://jsfiddle.net/Tinclon/2ega7yLt/7/)

编辑：也适用于透明背景：http: [//jsfiddle.net/Tinclon/2ega7yLt/8/](http://jsfiddle.net/Tinclon/2ega7yLt/8/)

css（当然）包括 IE hack，所以有点长，但 html 非常简单：

```
<div class="card">
  <div class="content">
    <div class="cardFront">FRONT CONTENT</div>
    <div class="cardBack">BACK CONTENT</div>
    <div class="cardStatic">STATIC CONTENT</div>
  </div>
</div> 
```

```
$('.card').hover(function(){$('.card').toggleClass('applyflip');}.bind(this)); 
```

```
.card {
    perspective: 1000px;
    -webkit-perspective: 1000px;
    -moz-perspective: 1000px;
    -o-perspective: 1000px;
    -ms-perspective: 1000px;
    margin:80px 150px;
    width:320px;
    height:243px;
    vertical-align:top;
    position:absolute;
    display:block;
    font-size:25px;
    font-weight:bold;
}

.card .content {
    transition: 0.5s ease-out;
    -webkit-transition: 0.5s ease-out;
    -moz-transition: 0.5s ease-out;
    -o-transition: 0.5s ease-out;
    -ms-transition: 0.5s ease-out;
    transform-style: preserve-3d;
    -webkit-transform-style: preserve-3d;
    -moz-transform-style: preserve-3d;
    -o-transform-style: preserve-3d;
    -ms-transform-style: preserve-3d;

    /* content backface is visible so that static content still appears */
    backface-visibility: visible;
    -webkit-backface-visibility: visible;
    -moz-backface-visibility: visible;
    -o-backface-visibility: visible;
    -ms-backface-visibility: visible;

    border: 1px solid grey;
    border-radius: 15px;
    position:relative;
    width: 100%;
    height: 100%;

}
.card.applyflip .content {
    transform: rotateY(180deg);
    -webkit-transform: rotateY(180deg);
    -moz-transform: rotateY(180deg);
    -o-transform: rotateY(180deg);
    -ms-transform: rotateY(180deg);
}

.card .content .cardStatic {
    /* Half way through the card flip, rotate static content to 0 degrees */
    transition: 0s linear 0.17s;
    -webkit-transition: 0s linear 0.17s;
    -moz-transition: 0s linear 0.17s;
    -o-transition: 0s linear 0.17s;
    -ms-transition: 0s linear 0.17s;
    transform: rotateY(0deg);
    -webkit-transform: rotateY(0deg);
    -moz-transform: rotateY(0deg);
    -o-transform: rotateY(0deg);
    -ms-transform: rotateY(0deg);

    text-align: center;
    position: absolute;
    top: 0;
    left: 0;
    height: 0;
    width: 100%;
    line-height:100px;
}

.card.applyflip .content .cardStatic {
    /* Half way through the card flip, rotate static content to -180 degrees -- to negate the flip and unmirror the static content */
    transition: 0s linear 0.17s;
    -webkit-transition: 0s linear 0.17s;
    -moz-transition: 0s linear 0.17s;
    -o-transition: 0s linear 0.17s;
    -ms-transition: 0s linear 0.17s;
    transform: rotateY(-180deg);
    -webkit-transform: rotateY(-180deg);
    -moz-transform: rotateY(-180deg);
    -o-transform: rotateY(-180deg);
    -ms-transform: rotateY(-180deg);
}

.card .content .cardFront {
    background-color: skyblue;
    color: tomato;
}

.card .content .cardBack {
    background-color: tomato;
    color: skyblue;
}

.card .content .cardFront, .card .content .cardBack {
    /* Backface visibility works great for all but IE. As such, we mark the backface visible in IE and manage visibility ourselves */
    backface-visibility: hidden;
    -webkit-backface-visibility: hidden;
    -moz-backface-visibility: hidden;
    -o-backface-visibility: hidden;
    -ms-backface-visibility: visible;
    position: absolute;
    top: 0;
    left: 0;
    height: 100%;
    width: 100%;
    text-align: center;
    line-height:200px;
    border-radius: 14px;
}
.card .content .cardFront, .card.applyflip .content .cardFront {
    transform: rotateY(0deg);
    -webkit-transform: rotateY(0deg);
    -moz-transform: rotateY(0deg);
    -o-transform: rotateY(0deg);
    -ms-transform: rotateY(0deg);
}

.card .content .cardBack, .card.applyflip .content .cardBack {
    transform: rotateY(-180deg);
    -webkit-transform: rotateY(-180deg);
    -moz-transform: rotateY(-180deg);
    -o-transform: rotateY(-180deg);
    -ms-transform: rotateY(-180deg);
}

.card .content .cardFront, .card.applyflip .content .cardBack {
    /* IE Hack. Halfway through the card flip, set visibility. Keep other browsers visible throughout the card flip. */
    animation: stayvisible 0.5s both;
    -webkit-animation: stayvisible 0.5s both;
    -moz-animation: stayvisible 0.5s both;
    -o-animation: stayvisible 0.5s both;
    -ms-animation: donothing 0.5s;
    -ms-transition: visibility 0s linear 0.17s;
    visibility: visible;
}
.card.applyflip .content .cardFront, .card .content .cardBack {
    /* IE Hack. Halfway through the card flip, set visibility. Keep other browsers visible throughout the card flip. */
    animation: stayvisible 0.5s both;
    -webkit-animation: stayvisible 0.5s both;
    -moz-animation: stayvisible 0.5s both;
    -o-animation: stayvisible 0.5s both;
    -ms-animation: donothing 0.5s;
    -ms-transition: visibility 0s linear 0.17s;
    visibility: hidden;
}
@keyframes stayvisible { from { visibility: visible; } to { visibility: visible; } }
@-webkit-keyframes stayvisible { from { visibility: visible; } to { visibility: visible; } }
@-moz-keyframes stayvisible { from { visibility: visible; } to { visibility: visible; } }
@-o-keyframes stayvisible { from { visibility: visible; } to { visibility: visible; } }
@-ms-keyframes donothing { 0% { } 100% { } } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-01-21T14:10:31.977

这是一个简单得多的翻转算法，它也适用于 IE。 [https://jsfiddle.net/mff4jzd2/8/](https://jsfiddle.net/mff4jzd2/8/)

JAVASCRIPT：

```
 var state = 0;

        $('.container').on('click',function(){
            if(state == 0){

                state = 1;
                $('.front').addClass('flip-front');
                $('.back').addClass('flip-back');

            }
            else{

                state = 0;
                $('.front').removeClass('flip-front');
                $('.back').removeClass('flip-back');

            }   
        }); 
```

CSS：

```
 .container{

        width:170px;
        height:280px;
        display:inline-block;
        position:relative;
        transform: perspective(400px);
        cursor:pointer;

    }
    .front{

        position:absolute;
        top:0;
        left:0;
        width:100%;
        height:100%;
        background-color:blue;        
        transform: perspective(400px) rotateY(0deg);        
        backface-visibility: hidden;
        transition: 1.0s;
        opacity:1;
        box-shadow: 0 8px 6px -6px black;
    }
    .back{

        position:absolute;
        top:0;
        left:0;
        width:100%;
        height:100%;
        background-color:green;       
        transform: perspective(400px) rotateY(-180deg);         
        backface-visibility: hidden;
        transition: 1.0s;
        opacity:0;
        box-shadow: 0 8px 6px -6px black;
    }       
    .flip-front{
        opacity:0;
        transform: perspective(400px) rotateY(180deg);

    }
    .flip-back{
         opacity:1;  
         transform: perspective(400px) rotateY(0deg);
    } 
```

HTML：

```
<div class="container">

    <div class="back"></div>
    <div class="front"></div>

</div> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-02T07:26:16.407

[在这里](https://stackoverflow.com/questions/11400317/backside-visibility-not-working-in-ie10-works-fine-in-webkit?rq=1)找到了答案。[在这里](http://jsfiddle.net/UwUry/18/)发布了我自己更新的小提琴- 这是 css（为了简洁起见，我包含了 ms 前缀）：

```
.container {
width: 200px;
height: 260px;
position: relative;
margin: 0 auto 40px;
border: 1px solid #CCC;
-ms-perspective: 1000;
perspective: 1000;
}

.card {
display: block;
height: 100%;
width: 100%;
line-height: 260px;
color: white;
text-align: center;
font-weight: bold;
font-size: 140px;
position: absolute;
transition: all 0.5s linear;
backface-visibility: hidden;
}

.card.flipped {
    -ms-transform: rotateY(360deg);
    transform: rotateY(360deg);
}

.front {
    background: red;
}
.back {
    background: #00f;
    transform: rotateY( 180deg );
}

.container:hover .card {
    -ms-transform: rotateY(360deg);
    transform: rotateY(360deg);
} 
```

这是一个用于翻转的按钮处理程序（除了悬停事件）：

```
$('button').click(function() {
    $('.card').toggleClass('flipped');
}); 
```

IE10 的答案是 360 度翻转（css 中的“翻转”类和悬停事件），这很有趣（也有点令人不安）。仍然围绕着那个。

这里希望他们尽快实施preserve-3d。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-03-05T13:08:27.287

使用浏览器确定器 JS 或任何其他方法仅将 CSS 样式应用于 IE。

然后使用以下代码：

```
.ie .flip-wrapper:hover .back {
    -ms-backface-visibility: visible;
}

.ie .flip-wrapper:hover .front {
    visibility: hidden;
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-01-17T09:35:57.600

这是一个非常简单的 Nicholls 版本

[翻转矩形](http://jsfiddle.net/UwUry/197/)

```
#container {
 position: relative;
 height:362px;
 width: 282px;
 margin: 0 auto;
}

#container div {
 position:absolute;
 left:0;
 top:0;
 width:242px;
 height: 322px;
 padding:20px;
 background:#463;
 -ms-border-radius: 5px;
 -moz-border-radius: 5px;
 -webkit-border-radius: 5px;
 border-radius: 5px;
 -webkit-transition: 1.5s ease-in-out;
 -moz-transition: 1.5s ease-in-out;
 -ms-transition: 1.5s ease-in-out;
 -o-transition: 1.5s ease-in-out;
 transition: 1.5s ease-in-out;
}

#container:hover div.upper {
 -webkit-transform: perspective(800px) rotateY(179.9deg);
 -moz-transform: perspective(800px) rotateY(179.9deg);
 transform: perspective(800px) rotateY(179.9deg);
}

<div id="container" aria-haspopup="true">    
   <div class="upper"></div>
</div> 
```

我只留下了翻转代码。

顺便说一句，尼科尔斯效果很好！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-26T22:10:36.410

正如 OP 所指出的，他们的博客上有这个问题的答案，但遗憾的是他没有[引用](http://msdn.microsoft.com/en-gb/library/ie/hh673529%28v=vs.85%29.aspx#the_ms_transform_style_property)：

> 注意 W3C 规范为此属性定义了关键字值 preserve-3d，表示不执行展平。目前，Internet Explorer 10 不支持 preserve-3d 关键字。除了子元素的正常变换之外，您可以通过**手动将**父元素的变换应用于**每个子元素来解决此问题。**

总之，像往常一样，微软的浏览器严重**损坏**。

进一步调查，IE10中的插值引擎似乎不完整或损坏；当涉及到多个轴的旋转时，根据矩阵变换应用所有内容会导致“随机”翻转发生。矩阵插值的唯一方法是手动手动处理所有插值。此外，似乎任何涉及直角的插值都会导致不一致的“随机”翻转。

我已成功插入所需的 css，但是（缩小），代码长达数千行。所以，是的，如果你不介意预编译和漫长的等待时间，IE 可以做 3d css。

# c# - 列表 特定类型导致 ComboBox 中断

> ID：13474213
> 
> 赞同：3
> 
> 时间：2012-11-20T13:24:52.857
> 
> 标签：c#, wpf, combobox, subsonic, equals

我有一个`List<T>`包含 SubSonic 生成的实体类型。我们称这种类型`NaughtyItem`。当列表`NaughtyItem`绑定到 ComboBox 时，奇怪的事情开始发生*。ComboBox 以一种方式绑定到集合，如下所示：

```
<ComboBox  ItemsSource="{Binding Model.NaughtyCollection,Source={StaticResource ModelSource}}" Width="120" Margin="0,0,10,0" /> 
```

*第一次选择项目时，选择会改变。但是，一旦我更改了项目，我就无法再次选择项目。我订阅了该`SelectionChanged`事件，它触发了事件，就是这样。我通过创建包装器类型解决了这个问题

```
public class NaughtyWrapper
{
   public NaughtyItem {get;set;}
} 
```

我的猜测是 NaughtyItem 正在做的事情是导致 ComboBox 崩溃和燃烧。我已经在 VisualStudio 中打开了所有 CLR 异常，但是我没有得到任何有趣的异常来解释为什么未包装的 NaughtyItems 会导致问题。

以前有人遇到过这样的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T15:26:09.880

所有功劳归功于 Nicolas Repiquet 的答案。

SubSonic 中的实体有一个自定义实现，`Equals()`这是导致此问题的原因。删除自定义实现解决了这个问题，但我仍将使用包装的 SubSonic 实体的原始解决方案，因为我不想弄乱框架。

```
public override bool Equals(object obj){
    if(obj.GetType()==typeof(NaughtyItem)){
        NaughtyItem compare=(NaughtyItem)obj;
        return compare.KeyValue()==this.KeyValue();
    }else{
        return base.Equals(obj);
    } 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T19:29:13.777

万一尼古拉斯不回答。

我怀疑多个项目具有相同的 KeyValue。

我建议您检查配置以生成唯一的 KeyValue，因为重复的键可能会导致其他错误。
包装它只是掩盖了问题。

当您在 UI 中选择一个项目时，它会将其与当前选定的项目进行比较。
如果它们是 Equal 它假定该项目已被选中并且什么都不做。

当您包装它时，您会从 Object 中获得 GetHashCode 和 Equals，并且 object 会给出正确的答案（每个对象都是唯一的）。

# windows - Git状态显示文件两次但大小写不同

> ID：13474218
> 
> 赞同：15
> 
> 时间：2012-11-20T13:25:19.973
> 
> 标签：windows, git, git-extensions

我试图搜索我的问题，我能做的最接近的事情就是这个。

[git Status 两次显示相同的文件 - 但路径斜杠样式不同](https://stackoverflow.com/questions/5302468/git-status-shows-same-file-twice-but-with-different-path-slash-styles)

但这似乎与我遇到的问题不同。

我正在提交，并注意到同一个文件被列出了两次，但大小写不同。例如，`Directory/resource.h`和`Directory/Resource.h`。现在目录中只有一个文件`resource.h`。如果我通过 Git Extensions 查看文件，它们看起来完全一样。似乎没有另一个隐藏文件，只有一个文件。

因此，我尝试通过删除`resource.h`文件、提交，然后重新添加文件并再次重新提交来解决此问题。只有一个文件显示为已添加。我以为我解决了这个问题，但现在如果我尝试签出不同的分支，我会收到以下错误。

```
error: The following untracked working tree files would be overwritten by checkout:
    Directory/Resource.h
Please move or remove them before you can switch branches.
Aborting
Done 
```

我真的不知道从这里做什么，我只使用了几个月的 Git，而且我不需要做任何比合并分支和推拉更复杂的事情。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-24T04:24:36.297

如果您有一个包含`ignorecase = false`并重命名文件而不使用 git 的 repo，则可能会在 Windows 中发生这种情况。要修复，这应该有效

```
git mv -f Resource.h resource.h
git commit -m 'fix case' 
```

这应该可以防止它再次发生。

```
git config core.ignorecase true 
```

# asp.net - 如何有效地使用 Server.Transfer

> ID：13474220
> 
> 赞同：4
> 
> 时间：2012-11-20T13:25:23.890
> 
> 标签：asp.net, response.redirect, server.transfer

如何使用`Server.Transfer("default.aspx")`更好的*性能*在网站*内*导航。当我使用它时，它不会更改地址栏中的 url。如何通过 server.transfer 实现新的 url。**或者**（**如果不是**）我怎样才能获得*性能*。 `Response.Redirect("default.aspx")`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-20T13:59:01.343

`Response.Redirect("page.aspx")`您需要了解和之间的区别`Server.Transfer("page.aspx")`

服务器。传输：

*   它不会更改 URL，因此它不是用于调试目的，因为您不确定浏览器中哪个页面正在运行，因为 URL 可能不会在多个`Server.Transfer` 语句中更改。

*   它将表单上所有控件的数据发布到下一页，您可以从该页面使用`Request.Form["myTextBox"]`

*   它只适用于同一个域，它不会重定向到当前域名之外。

*   它不需要从浏览器返回服务器的往返费用，因此与`Response.Redirect`.

使用您的最佳判断何时使用`Response.Redirect`和何时使用`Server.Transfer`。如果您想将表单控件的数据从一个页面发送到另一个页面，我只建议使用“Server.Transfer”，否则它会给您带来调试噩梦。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T11:22:34.150

我不确定我是否喜欢这种方法，但如果您坚持使用，则`Server.Transfer`可以在您的响应到达浏览器并在那里进行处理后使用`HTML5 History API`更改浏览器地址栏中的 URL。请注意，只有较新的浏览器支持此功能，但随着时间的推移，这应该不再是一个问题。

您需要在页面中使用一段 JavaScript 来操作历史的当前状态。这看起来像：

```
<script type="text/javascript">
    window.history.pushState({ path: <pageurl> }, '', <pageurl>);
</script> 
```

占位符必须在`<pageurl>`服务器上设置为您在`Server.Transfer`呼叫中实际处理的页面的真实 URL。

现在网上有很多关于如何使用html5 history api的例子，例如[http://html5demos.com/history](http://html5demos.com/history)。

# f# - F# 中的条件求和

> ID：13474223
> 
> 赞同：5
> 
> 时间：2012-11-20T13:25:30.047
> 
> 标签：f#, pivot, record

我在 F# 中为某些客户端数据定义了一个记录类型，如下所示：-

```
 type DataPoint = {
       date: string; 
       dr: string; 
       Group: string; 
       Product: string; 
       Book: int; 
       Revenue: int} with 
          static member fromFile file =
               file
               |> File.ReadLines
               |> Seq.skip 1 //skip the header
               |> Seq.map (fun s-> s.Split ',') // split each line into array
               |> Seq.map (fun a -> {date = string a.[0]; dr = string a.[1];
                              Group = string a.[2]; Product = string a.[3];
                                Book = int a.[4]; Revenue = int a.[5] });;  

    // creates a record for each line
    let pivot (file) = DataPoint.fromFile file
              |> ?????????? 
```

对于 date、dr、Group 和 Product 都相等的行，我想将所有 Book 和 Revenue 条目相加，生成一个旋转的行。所以某种 if else 语句应该没问题。我怀疑我需要从第一个数据点开始并递归地添加每个匹配的行，然后删除匹配的行以避免输出中的重复。

完成此操作后，我将能够轻松地将这些旋转的行写入另一个 csv 文件。

任何人都可以让我开始吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-20T13:36:40.710

[Seq.groupBy](http://msdn.microsoft.com/en-us/library/ee370445.aspx)和[Seq.reduce](http://msdn.microsoft.com/en-us/library/ee353740.aspx)是您正在寻找的：

```
let pivot file = 
    DataPoint.fromFile file
    |> Seq.groupBy (fun dp -> dp.date, dp.dr, dp.Group, dp.Product)
    |> Seq.map (snd >> Seq.reduce (fun acc dp -> 
                          { date = acc.date; dr = acc.dr; 
                            Group = acc.Group; Product = acc.Product;
                            Book = acc.Book + dp.Book; 
                            Revenue = acc.Revenue + dp.Revenue; })) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-20T13:40:43.223

快速破解，应该给你一些想法：

```
// Sample data
let data = [
             {date    = "2012-01-01"
              dr      = "Test"
              Group   = "A" 
              Product = "B"
              Book    = 123
              Revenue = 123}
             {date   = "2012-01-01"
              dr      = "Test"
              Group   = "A"
              Product = "B"
              Book    = 123
              Revenue = 123}
             {date = "2012-01-01"
              dr = "Test"
              Group = "B" 
              Product = "B"
              Book = 11
              Revenue = 123}]

let grouped = data |> Seq.groupBy(fun d -> (d.date, d.dr, d.Group, d.Product))
                   |> Seq.map (fun (k,v) -> (k, v |> Seq.sumBy (fun v -> v.Book), v |> Seq.sumBy (fun v -> v.Revenue)))

for g,books,revs in grouped do
   printfn "Books %A: %d" g books
   printfn "Revenues %A: %d" g revs 
```

印刷

```
Books ("2012-01-01", "Test", "A", "B"): 246
Revenues ("2012-01-01", "Test", "A", "B"): 246
Books ("2012-01-01", "Test", "B", "B"): 11
Revenues ("2012-01-01", "Test", "B", "B"): 11 
```

# windows-phone-7 - Windows Phone 7.5 浏览器中的数字小键盘

> ID：13474229
> 
> 赞同：1
> 
> 时间：2012-11-20T13:25:40.957
> 
> 标签：windows-phone-7, internet-explorer-9, mobile-browser

如何将数字键盘带入在 Windows Phone 7.5 浏览器中打开的网页中，我可以使用以下代码在 android webkit 浏览器和 iphone safari 中进行操作，

```
<input type=”number”/> or <input type="text" pattern="\d*"/> 
```

但无法在 windows phone 7.5 浏览器中执行此操作？。在 windows phone 7.5 浏览器中始终显示 alpha Query 键盘而不是数字键盘。

无论如何要在 Windows Phone 浏览器中执行此操作。请帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T13:33:59.670

不幸的是，Windows Phone 7.5 和 Internet Explorer 9 不支持此功能
。Windows Phone 8 为 Internet Explorer 10 带来了[对 HTML5 输入元素](http://msdn.microsoft.com/en-us/library/ie/hh673544%28v=vs.85%29.aspx)的支持。

# java - 如何在项目中独立共享资源文件夹？

> ID：13474233
> 
> 赞同：1
> 
> 时间：2012-11-20T13:25:56.650
> 
> 标签：java, android, android-layout, android-library

我有一个库项目，它包含所有资源和类文件，该项目包含所有与主题相关的图像，我正在共享我的库项目以创建新项目，一切正常。

但是当我想更改应用程序主题相关的图像时，我需要更新我的库项目图像，但我的库项目已经与其他一些项目共享，所以我不想碰它。

还有另一种方法可以在我的新项目中添加所有新图像集，但它增加了我的项目大小并且不必要我在图像上运送两套图像。

有没有办法与项目独立共享资源文件夹？所以取决于要求，我可以与受人尊敬的项目共享我的资源文件夹。

所以会是这样

```
图书馆计划
    |
    |__ 类文件
    |
    |__ 资源文件夹（包含所有可绘制对象和布局）

```

我可以在编译时选择特定的资源文件夹吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T13:30:25.740

我会使用 maven 或类似的东西对库进行版本控制并管理依赖项。这样，您不会破坏其余正在使用旧版本库的项目，您可以在有时间的时候将任何项目更新到任何版本的库，当然，您可以不断更新库并生成新版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T13:43:30.087

我会`static`在库中添加一个描述资源文件夹的字段，如下所示。

```
public class Library {

    // The resource-folder
    public static final File RES_FOLDER;

} 
```

然后使用该字段访问资源文件夹。我建议将主题创建为单独的应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T13:55:39.567

解决方案 #1：版本化资源，在运行时从网络下载。考虑不要将任何资源嵌入到您的库项目中。这样您就可以将其作为 .jar 文件分发，这将简化 3 方开发人员的集成。这样，您将需要在运行时从 Web 下载资源并将它们缓存在 /data 文件夹或 SD 卡或内存中。

解决方案 #2：使用 ant 或 maven 构建您的项目。这样，您将能够使用默认配置分发您的项目，并且可以构建自定义配置。这样，资源可以位于任何文件夹中，并在编译期间根据定义的配置参数从那里获取。

# javascript - 用两种方法声明 ViewModel

> ID：13474237
> 
> 赞同：0
> 
> 时间：2012-11-20T13:26:07.550
> 
> 标签：javascript, data-binding, knockout.js

阅读[knockoutJs 教程](http://knockoutjs.com/documentation/computedObservables.html)，但无法使其正常工作。在第一页上，使用了第一种方法，在第二页上，使用了第二种方法来创建模型。但第二种方法不起作用。可能是什么问题呢？

**第一种方法**

```
var AppViewModel {
    this.firstName = 'Bob',
    this.lastName = 'Smith'
}; 
```

**第二种方法**

```
function AppViewModel() {
    this.firstName = 'Bob';
    this.lastName = 'Smith';
} 
```

Html部分如下：

```
<body>

  <span data-bind="text: firstName"></span>

  <script type="text/javascript">
      ko.applyBindings(AppViewModel);
  </script>
</body> 
```

这适用于第一种方法，但第二种方法会引发错误：

> 未捕获的错误：无法解析绑定。消息：ReferenceError：firstName 未定义；绑定值：文本：firstName

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T13:29:23.127

在第一种方法中，您定义了一个对象。在第二种方法中，您定义了一个类的构造函数，因此您必须使用`new`关键字创建该类的实例：

```
<body>
  <span data-bind="text: firstName"></span>

  <script type="text/javascript">
      ko.applyBindings(new AppViewModel());
  </script>
</body> 
```

# android - Android平板，菜单溢出位置

> ID：13474246
> 
> 赞同：0
> 
> 时间：2012-11-20T13:26:53.583
> 
> 标签：android, android-actionbar, tablet

我正在阅读许多无法移动菜单溢出的网站。问题是，我的平板电脑上有另一个应用程序，溢出位于底部栏，在背面右侧，主页和应用程序列表按钮。不幸的是，我没有这个应用程序的代码 =(

我必须做些什么才能让菜单溢出其他按钮？

```
public boolean onCreateOptionsMenu(Menu menu) {
    menu.add(Menu.NONE, MENUID_TEST, 0, R.string.test);
    menu.add(Menu.NONE, MENUID_TEST2, 1, R.string.test2);
    return super.onCreateOptionsMenu(menu);     
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T13:34:10.553

正如 Stephan 在他的评论中所说，这个“菜单”图标适用于为 Android 2.x 编写的没有 ActionBar 而是普通选项菜单的旧应用程序。此外，仅当设备没有物理菜单按钮时才会显示此图标。

onCreateOptionsMenu 必须返回 true 才能显示菜单。

尝试这个：

```
public boolean onCreateOptionsMenu(Menu menu) {
    super.onCreateOptionsMenu(menu); 
    menu.add(Menu.NONE, MENUID_TEST, 0, R.string.test);
    menu.add(Menu.NONE, MENUID_TEST2, 1, R.string.test2);
    return true;
} 
```

# algorithm - 地理空间查找

> ID：13474247
> 
> 赞同：3
> 
> 时间：2012-11-20T13:26:56.110
> 
> 标签：algorithm, data-structures, language-agnostic, lookup

我正在开发一种算法和数据结构来处理大量二维点上的欧几里得距离查找。

我曾尝试在谷歌学者上对此进行研究，但尚未发现任何结果（可能是因为我不知道这个问题在文献中通常被称为什么）。

这是我考虑过的两种方法：

方法 1：创建带有桶的双向网格。将点插入桶中，保留每个点的桶的引用。在查找距离为 D 的点 P 时，获取它的桶 B 以及其网格正方形的任何角具有（到 B 的距离）< D 的所有桶。最后，枚举所有这些桶中的点并计算到 P 的距离.

方法 2：创建两个列表，每个列表中的所有点都按坐标 (x,y) 之一排序。在查找距离为 D 的点 P 时，执行二进制搜索以在每个列表中找到两个点，以找到点到 P < D 的切比雪夫距离的矩形区域。最后，计算所有这些点到 P 的欧几里得距离

不过，我猜最先进的算法会大大优于这个？对此的任何想法表示赞赏

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T13:35:11.253

一些可以帮助您的提示：

*   看一下[KDTree](http://en.wikipedia.org/wiki/K-d_tree)，它是一棵 k 维树（在您的情况下为 2d），这是寻找最近邻居的最佳方法之一。
*   也许您可以从专门为处理地理空间数据而开发的[空间数据库中受益；](http://en.wikipedia.org/wiki/Spatial_database#Spatial_database_systems)
*   您可以将上述任何一种与您想要的距离函数一起使用。根据您的应用，您需要地图距离、大圆距离、恒定坡距、恒定方位距离等。您应该知道您的距离函数。我使用大圆（haversine）距离来处理类似谷歌地图的地图和轨迹。

如果您想要 Python 实现，可以使用`scipy.spatial`( [docs](http://docs.scipy.org/doc/scipy/reference/spatial.html) )。从这个模块中，该功能`query_ball_point((px, py), radius)`似乎是您正在寻找的。

希望这可以帮助！

# fopen - VC6 fopen 模式参数

> ID：13474249
> 
> 赞同：0
> 
> 时间：2012-11-20T13:27:00.027
> 
> 标签：fopen, visual-c++-6

我正在尝试了解一些旧版 VC6 代码，并查看`fopen`使用`"ra"`. 这是什么模式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T13:46:07.437

通过反复试验，我认为它相当于“a+”

# git - Git：如何修改分支以使其完全反映另一个

> ID：13474253
> 
> 赞同：2
> 
> 时间：2012-11-20T13:27:07.113
> 
> 标签：git

我们希望将所有生产版本都放在一个分支上。因此，当我们准备好 RC 时，我们希望将该分支与我们的开发分支保持同步，进行 RC 构建并应用修补程序，直到我们高兴地发布该版本。在这种情况下，我们团队的其他成员将继续在我们的开发分支上工作。

诀窍是，我们不想将 dev 分支中的更改合并到此版本分支中，我们希望它只是 dev 分支的精确副本——因此基本上忽略了发布中发生的任何先前的修补程序/等工作分支，因为无论如何这些都会被拉入 dev 分支。造成这种情况的原因之一是我们处理了很多不能很好地合并的二进制文件，另一个是我们的 dev 分支会经过更严格的测试，并且替换会更安全。

最后的细节是，我们确实希望在发布分支中仍然保留旧的提交和标签，以防我们需要修复旧版本（我们会为此分支）。

如果我们找不到与之匹配的解决方案，我们的替代方案是每个版本都有一个分支，但这似乎很混乱。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T15:50:33.630

一种解决方案是简单地将您的 prod 分支重置为下一个 RC 提交。
但这会失去所说的产品分支的历史。

另一种解决方案是`merge --theirs`：所有选项都列在“ [git command for making a branch like another](https://stackoverflow.com/questions/4911794/git-command-for-making-one-branch-like-another) ”中。
[qqx](https://stackoverflow.com/users/1507392/qqx)的[脚本使用了](https://stackoverflow.com/a/13476890/6309)[这个答案](https://stackoverflow.com/a/12301108/6309)中提到的提交树。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T15:49:46.280

我不久前开发了[这个脚本](https://gist.github.com/4118615)来做你所描述的几乎完全一样的事情。要使用它，请检查您的发布分支，然后运行此脚本，提供您要合并的开发分支的名称。它将创建一个新的提交，记录这两个分支的合并，但树将与提供名称作为参数的分支中的完全相同。

我实际上并没有最终将其用于实际部署，因此尚未在现实​​世界中进行测试，仅在开发情况下进行了测试。

# perl - 如何调试 Perl 项目

> ID：13474255
> 
> 赞同：2
> 
> 时间：2012-11-20T13:27:13.510
> 
> 标签：perl

在 Perl 项目中，通常如何修复脚本中的错误？请任何人都可以给出一些想法。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T13:32:33.607

我的第一个想法是[perldoc perldebug](http://perldoc.perl.org/perldebug.html)

我认为这是更好的起点。

我的第二个是：总是放

```
use strict;
use warnings; 
```

在你的脚本的顶部，你可以把

```
use diagnostics; 
```

也用于产生更详细的警告诊断

* * *

在打开 Pandora 盒子之前，先利用 Perl 模块`Data::Dumper`。

显示所有（嵌套）数据结构和对象很有用，请参阅（我使用`perlconsole`，尝试一些技巧很好）：

```
$ perlconsole
Perl Console 0.4
Perl> my $ref = { foo => 'bar', arr => [ 1, 2, 3, [ qw/a z e r t y/ ] ] }
HASH(0x1fc25a8)

Perl> use Data::Dumper;
Perl> print Dumper  $ref;
$VAR1 = {
          'foo' => 'bar',
          'arr' => [
                     1,
                     2,
                     3,
                     [
                       'a',
                       'z',
                       'e',
                       'r',
                       't',
                       'y'
                     ]
                   ]
        };
1

Perl> 
```

* * *

你会看到 Perl 可以在调试器中运行脚本

```
perl -d -e 42 script.pl 
```

帮忙说：

```
$ perl --help | grep -- '-d'
  -d[:debugger]     run program under debugger 
```

您也可以使用以下命令“追踪”它：

```
perl -d:Trace script.pl 
```

* * *

还有一个[gui](/questions/tagged/gui "显示标记为“gui”的问题")调试器，它带有`Devel::ptkdb`模块，例如：

```
perl -d:ptkdb script.pl 
```

![ptkdb](../Images/c918728f6541c0c8bf80d3f4b72f5150.png)

* * *

尝试

```
perlcritic 
```

还有一个用于批评 Perl 源代码的命令行界面。

* * *

也可以分析您的代码，请参阅

[http://metacpan.org/pod/Devel::NYTProf](http://metacpan.org/pod/Devel::NYTProf)

[http://blog.timbunce.org/2008/07/15/nytprof-v2-a-major-advance-in-perl-profilers/](http://blog.timbunce.org/2008/07/15/nytprof-v2-a-major-advance-in-perl-profilers/)

![调试](../Images/a1847800eb77802995384b93bc3c67ef.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-20T13:32:35.363

```
perl -c <your program> 
```

...将在 Perl 脚本中为您提供任何语法错误，包括您可以在 Internet 上查找的特定错误消息。

另外，给自己一个机会：-

```
use strict; 
```

在每个 Perl 文件的顶部。没有它，Perl 会自动激活你输入错误的变量。有了它，任何未声明的变量都算作语法错误。

# tcp - wxPython GUI 在启动 TCP 服务器时失去响应

> ID：13474259
> 
> 赞同：1
> 
> 时间：2012-11-20T13:27:22.043
> 
> 标签：tcp, wxpython

最近在学习wxPython。所以我用 wxPython 写了一个小的 TCP 服务器程序。按下“init”按钮后，我的程序将崩溃。我还编写了另一个客户端程序，当服务器 GUI 失去响应时，它成功地连接到了这个 wxPython TCP 服务器。这真的让我很困惑。

```
#!/usr/bin/env python
#Boa:App:BoaApp
#coding:utf-8

import wx

import Frame1

modules ={'Frame1': [1, 'Main frame of Application', u'Frame1.py']}

class BoaApp(wx.App):
    def OnInit(self):
        self.main = Frame1.create(None)
        self.main.Show()
        self.SetTopWindow(self.main)
        return True

def main():
    application = BoaApp(0)
    application.MainLoop()

if __name__ == '__main__':
    main() 
```

#

```
#Boa:Frame:Frame1
#coding:utf-8

import wx
import socket
import sys
import time

def create(parent):
    return Frame1(parent)

[wxID_FRAME1, wxID_FRAME1BUTTON1, wxID_FRAME1BUTTON2, wxID_FRAME1PANEL1, 
 wxID_FRAME1STATICLINE1, wxID_FRAME1STATICTEXT1, wxID_FRAME1STATICTEXT2, 
 wxID_FRAME1TEXTCTRL1, wxID_FRAME1TEXTCTRL2, wxID_FRAME1TEXTCTRL3, 
] = [wx.NewId() for _init_ctrls in range(10)]

class Frame1(wx.Frame):
    def _init_ctrls(self, prnt):
        # generated method, don't edit
        wx.Frame.__init__(self, id=wxID_FRAME1, name='', parent=prnt,
              pos=wx.Point(644, 336), size=wx.Size(302, 375),
              style=wx.DEFAULT_FRAME_STYLE & ~ wx.RESIZE_BORDER, 
              title=u'TCP SERVER')                     
        self.SetClientSize(wx.Size(286, 337))

        self.panel1 = wx.Panel(id=wxID_FRAME1PANEL1, name='panel1', parent=self,
              pos=wx.Point(0, 0), size=wx.Size(286, 337),
              style=wx.TAB_TRAVERSAL)

        self.staticText1 = wx.StaticText(id=wxID_FRAME1STATICTEXT1,
              label=u'HOST', name='staticText1', parent=self.panel1,
              pos=wx.Point(32, 24), size=wx.Size(80, 24), style=0)

        self.staticText2 = wx.StaticText(id=wxID_FRAME1STATICTEXT2,
              label=u'PORT', name='staticText2', parent=self.panel1,
              pos=wx.Point(32, 64), size=wx.Size(72, 22), style=0)

        self.textCtrl1 = wx.TextCtrl(id=wxID_FRAME1TEXTCTRL1, name='textCtrl1',
              parent=self.panel1, pos=wx.Point(136, 24), size=wx.Size(136, 22),
              style=0, value=u'ENTER HOSTNAME')

        self.textCtrl2 = wx.TextCtrl(id=wxID_FRAME1TEXTCTRL2, name='textCtrl2',
              parent=self.panel1, pos=wx.Point(136, 64), size=wx.Size(136, 22),
              style=0, value=u'ENTER PORT')

        self.button1 = wx.Button(id=wxID_FRAME1BUTTON1, label=u'INIT',
              name='button1', parent=self.panel1, pos=wx.Point(48, 112),
              size=wx.Size(75, 24), style=0)

        self.button2 = wx.Button(id=wxID_FRAME1BUTTON2, label=u'CLEAR',
              name='button2', parent=self.panel1, pos=wx.Point(168, 112),
              size=wx.Size(75, 24), style=0)

        self.staticLine1 = wx.StaticLine(id=wxID_FRAME1STATICLINE1,
              name='staticLine1', parent=self.panel1, pos=wx.Point(16, 152),
              size=wx.Size(256, 2), style=0)

        self.textCtrl3 = wx.TextCtrl(id=wxID_FRAME1TEXTCTRL3, name='textCtrl3',
              parent=self.panel1, pos=wx.Point(32, 168), size=wx.Size(232, 144),
              style=wx.TE_MULTILINE, value=u'MESSAGE')  #STYLE CHANGED

    def __init__(self, parent):
        self._init_ctrls(parent)
        self.Bind(wx.EVT_BUTTON, self.ServerInit, self.button1)
        self.Bind(wx.EVT_BUTTON, self.CleanUp, self.button2) 

    def ServerInit(self, event):
        self.textCtrl3.ChangeValue('')
        self.HOST = ''      
        self.PORT = 8888    
        #self.GetValue()
        self.s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
        self.textCtrl3.AppendText('Socket created\n')

        try:
            self.s.bind((self.HOST, self.PORT))
        except socket.error , msg:
            self.textCtrl3.AppendText('Bind failed. Error Code : ' + str(msg[0]) + ' Message ' + msg[1] + '\n')
            sys.exit(1)

        self.textCtrl3.AppendText('Socket bind complete\n')

        self.s.listen(10)
        self.textCtrl3.AppendText('Socket now listening\n')

        #now keep talking with the client
        while (1):
            #wait to accept a connection - blocking call
            conn, addr = self.s.accept()
            tempStr = 'Connected with ' + addr[0] + ':' + str(addr[1]) + '\n'
            self.textCtrl3.AppendText(tempStr)

            while (1):
                data = conn.recv(1024)
                reply = 'RECEIVED:' + data + '\n'
                self.textCtrl3.AppendText(reply)
                conn.sendall('SERVER RECEIVED')
        conn.sendall('DISCONNECTED')
        conn.close()
        s.close()

    def CleanUp(self, event):
        self.textCtrl3.ChangeValue(' ') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T17:19:24.293

通常，您只需导入另一个模块并实例化该类。像这样的东西会更好

```
import myFrame

# then in your OnInit
def OnInit(self):
   frame = myFrame.Frame1() 
```

或类似的东西。就个人而言，我几乎从不继承 wx.App，除非我打算做一些 PreCreate 的东西。至于为什么您的 GUI 变得无响应，您在**ServerInit**方法中执行了一个长时间运行的过程，这阻塞了 GUI 的主循环。您需要将套接字连接和通信代码放入单独的线程中，并使用 wxPython 的线程安全方法将结果传回。有关更多信息，请参阅以下链接：

*   [http://wiki.wxpython.org/LongRunningTasks](http://wiki.wxpython.org/LongRunningTasks)
*   [http://www.blog.pythonlibrary.org/wxpython-and-threads](http://www.blog.pythonlibrary.org/wxpython-and-threads)

# html - 为什么这个导航栏不居中？

> ID：13474260
> 
> 赞同：0
> 
> 时间：2012-11-20T13:27:24.080
> 
> 标签：html, css

我注意到导航`li`项目（黄色部分）在中心的右侧，所以我更改了包含`div`/`nav`宽度和背景背景颜色，以便我可以看到正在发生的事情以尝试修复错位；但是，我似乎看不出发生这种情况的原因（在大约 6 个浏览器中）。

这是有问题的标记[/css：http://building-more.site50.net/](http://building-more.site50.net/)

它似乎在 jsfiddle 中工作正常：http: [//jsfiddle.net/cTXXH/1/](http://jsfiddle.net/cTXXH/1/)

它似乎根本不显示在 IE 中，这里出了什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T13:30:13.113

这是因为某些元素已经具有默认值，例如 padding 和 marging 会影响您的定位，并且对于每个浏览器来说这可能是不同的。这就是为什么人们在开始使用自己的样式之前经常“重置” CSS 以默认使用 0 边距和 0 填充。

您的示例在您的 Fiddle 中运行良好，因为选中了“规范化 CSS”。这是一个类似于 CSS 重置的框架，可以在此处找到：http: [//necolas.github.com/normalize.css/](http://necolas.github.com/normalize.css/) - 它确保您的默认定位在浏览器之间保持一致，并为您提供一个干净的工作状态.

如果您将其包含到您的网页中，它将解决您的问题。希望有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T13:38:44.497

此外，您似乎忘记了用于 IE 检查的 endif 语句中的结束括号。

应该：

```
<![endif]--> 
```

# matlab - 如何将参数传递给“Matlab Weka 接口”

> ID：13474273
> 
> 赞同：0
> 
> 时间：2012-11-20T13:28:07.700
> 
> 标签：matlab, options, weka

[我已经从这里](http://www.mathworks.com/matlabcentral/fileexchange/21204-matlab-weka-interface)安装了“Matlab Weka Interface” 。我使用 BayesNet 的代码如下，但它会引发异常。请帮助我如何通过选项。

代码：

```
 try
    classifierNo=classifierNo+1;
    wekaClassifierName = 'bayes.BayesNet';
    wekaClassifierConfig = {'-D -Q weka.classifiers.bayes.net.search.local.K2 -- -P 1 -S BAYES -E weka.classifiers.bayes.net.estimate.SimpleEstimator -- -A 0.5'};

    for i = 1:10
        test = (indices == i); 
        train = ~test;
        testSize = sum(test);

        if testOriginal==0
            train = [num2cell(mskMat(train,:)),irisLabels(train,:)];
            test  = [num2cell(global_origMat(test,:)),irisLabels(test,:)];

            %Convert to weka format
            train = matlab2weka('iTrain',featureNames,train,classIndex);
            test =  matlab2weka('iTest',featureNames,test);

            %Train the classifier
            nb = trainWekaClassifier(train,wekaClassifierName,wekaClassifierConfig);

            %Test the classifier
            predicted = wekaClassify(test,nb);

            %The actual class labels (i.e. indices thereof)
            actual = test.attributeToDoubleArray(classIndex-1); 

            correctRate = sum(actual == predicted)/testSize;
        else
            train = [num2cell(global_origMat(train,:)),irisLabels(train,:)];
            test  = [num2cell(global_origMat(test,:)),irisLabels(test,:)];

            %Convert to weka format
            train = matlab2weka('iTrain',featureNames,train,classIndex);
            test =  matlab2weka('iTest',featureNames,test);

            %Train the classifier
            nb = trainWekaClassifier(train,wekaClassifierName,wekaClassifierConfig);

            %Test the classifier
            predicted = wekaClassify(test,nb);

            %The actual class labels (i.e. indices thereof)
            actual = test.attributeToDoubleArray(classIndex-1); 

            correctRate = sum(actual == predicted)/testSize;
        end
    end

    fprintf ('%f \n\t\t\t\t\t\t',correctRate);
    sumCorrect(classifierNo)=sumCorrect(classifierNo)+correctRate;
    repeatClassifier(classifierNo) = repeatClassifier(classifierNo) + 1;
end 
```

错误如下：

```
使用 weka.classifiers.bayes.BayesNet/setOptions 时出错
发生 Java 异常：
java.lang.Exception：非法选项：-D -Q weka.classifiers.bayes.net.search.local.K2 -- -P 1 -S BAYES -E
weka.classifiers.bayes.net.estimate.SimpleEstimator -- -A 0.5

    在 weka.core.Utils.checkForRemainingOptions(Utils.java:482)

    在 weka.classifiers.bayes.BayesNet.setOptions(BayesNet.java:510)"

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T14:52:57.853

该错误意味着您正在使用变量中的无效参数进行传递`wekaClassifierConfig`。我不熟悉这个包，所以我不知道哪个参数不好，我会先回到文档或一一删除参数，看看哪个参数导致错误。

# r - 如何在 R 中的多个矩阵上应用函数

> ID：13474275
> 
> 赞同：3
> 
> 时间：2012-11-20T13:28:21.007
> 
> 标签：r, function, matrix

我想在几个矩阵上应用一个函数，输出应该是列表或向量，报告每个操作的结果。所以我的尝试是使用 mapply 并且看起来像这样：

```
 myfunction<-function(x){cor(df1,x)
    output.list<-mapply(myfunction(df2,df3)) 
```

但这没有成功。有任何想法吗？？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-20T13:47:31.200

试试这个`lapply(list(df2, df3), myfunction)`。

# android - 如何在 SQLite & Access 中放置非重复值？

> ID：13474276
> 
> 赞同：0
> 
> 时间：2012-11-20T13:28:22.410
> 
> 标签：android, sqlite, cursor

我的创建表查询是：-

```
 String CREATE_LOGIN_TABLE ="CREATE TABLE IF NOT EXIST "+ TABLE_FORWARDMSG +"("+KEY_ID+ " INTEGER PRIMARY KEY AUTOINCREMENT,"+KEY_MSG_BODY+ " TEXT UNIQUE,"+KEY_MSG_ADDRESS+" TEXT UNIQUE,"+KEY_MSG_DATE+" TEXT UNIQUE" +")"; 
```

我是从这个代码访问值：---

```
String selectQuery="SELECT * FROM "+TABLE_FORWARDMSG;
     SQLiteDatabase db=this.getReadableDatabase();
 Cursor cursor=db.rawQuery(selectQuery, null);
  if( cursor.moveToFirst()){

        for(int i=0;i<cursor.getCount();i++){
            map.put("msgBody", cursor.getString(1));
            map.put("msgAddress", cursor.getString(2));
            map.put("msgDate", cursor.getString(3));
            user.add(map);
            cursor.moveToNext();

        }

       }
        cursor.close();
        db.close(); 
```

现在我的问题是：----

如果我从**CREATE TABLE中删除****UNIQUE**然后我得到所有重复值意味着如果我插入相同的值它会创建新行，并且如果我**在 CREATE TABLE 中使用 UNIQUE**，那么每次**cur.getCount()**值都是**1**。我是 SQLite 的新手。请告诉我有什么问题。

 ******* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T13:43:40.333

您的代码看起来不错。也许您不应该将 KEY_MSG_DATE 设为 UNIQUE。尝试获取有关您想要做什么的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T13:43:48.537

您已经实现的是，每列中的每个条目在列中必须是唯一的，但我假设您想要的是包含 msgBody、msgAddress 和 msgDate 列的行在表中必须是唯一的。

您可以通过将所有列放在 UNIQUE 子句中来实现：

```
UNIQUE(msgBody, msgAddress, msgDate) ON CONFLICT REPLACE 
```******

# java - 启动 tomcat 作为服务时出现无效的变音符号

> ID：13474278
> 
> 赞同：1
> 
> 时间：2012-11-20T13:28:24.760
> 
> 标签：java, linux, service, character-encoding, tomcat7

我的问题是，当Tomcat作为服务启动时，应用程序页面（WAR）中的变音符号没有正确呈现，但是当我手动启动服务器时，一切看起来都很好。我检查了系统的编码 (en_US.UTF-8)，它应该在这两种情况下都能正常工作。

/etc/init.d/tomcat7

```
#!/bin/bash  
# description: Tomcat Start Stop Restart  
# processname: tomcat  
# chkconfig: 234 20 80  
JAVA_HOME=/usr/lib/jvm/java-1.6.0-openjdk  
export JAVA_HOME  
PATH=$JAVA_HOME/bin:$PATH  
export PATH  
CATALINA_HOME=/opt/tomcat  

case $1 in  
start)  
sh $CATALINA_HOME/bin/startup.sh  
;;   
stop)     
sh $CATALINA_HOME/bin/shutdown.sh  
;;   
restart)  
sh $CATALINA_HOME/bin/shutdown.sh  
sh $CATALINA_HOME/bin/startup.sh  
;;   
esac      
exit 0 
```

你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T20:31:24.737

解决方案来源：[tomcat中的utf-8](https://stackoverflow.com/questions/1663571/how-to-set-utf8-lang-on-tomcat-java-running-on-mac-os-10-5-8)

将该属性添加`-Dfile.encoding=UTF-8`到 CATALINA_OPTS 变量或在运行时设置它。

# html - 访问子下拉列表并尝试选择其中的元素时如何保持父悬停宽度

> ID：13474280
> 
> 赞同：3
> 
> 时间：2012-11-20T13:28:24.710
> 
> 标签：html, css

这是我在这里的第一篇文章，我真的希望有人可以帮助我。我在互联网上搜索了很多，但我没有找到任何有用的东西。

这是我的代码：

```
<!DOCTYPE html>
<html>
<head>
<script src="jquery.js"></script>
<script>
 $(document).ready(function() {
     $('#box').hover(
         function () {
           $(this).animate({left:"+=180px"}, "fast");
         },
         function () {
           $(this).animate({left:"-=180px"}, "slow");
         }
     );

   });
</script>
</head>
<body>

<div id="box" style="background:#98bf21;height:900px;position: absolute;left:-180px; width:200px;">
<div id="skinDiv">
    <select name="skin">
    <option value="">[ None ]</option>
    <option value="Blue">Blue</option>
    <option value="Red">Red</option>
    <option value="Green">Green</option>
    <option value="White">White</option>
    </select>
</div>
</div>

</body>
</html> 
```

我正在处理一个网页，我想在左侧有一个动画菜单。当用户想从菜单中选择某些东西时，他可以将其悬停，菜单将从显示器左侧到达特定页面，例如向左 +200px。用户将有下拉菜单，他可以从中选择一些东西。

问题是，当用户关注此 html 选择元素时，例如在列表元素父 div 上失去焦点，用户无法从下拉列表中选择任何内容，因为下拉列表也会隐藏。

我希望我很清楚，如果没有，我会尝试解释更多。

我希望您能帮助我解决问题，因为我尝试解决了几天，但没有成功。

问候，米哈

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T14:24:10.737

试试这个：

```
$(document).ready(function() {
    $('#handle').mouseenter(slideIn);
    $("#box").mouseleave(function() {
        $(this).animate({
            left: "-=180px"
        }, "slow");
        $('#handle').mouseenter(slideIn);
    });
    $("[name='skin']").mouseleave(function(e) {
        e.stopPropagation();
    });

});

function slideIn() {
    if ($("#box")) $("#box").animate({
        left: "+=180px"
    }, "fast");
    $(this).unbind("mouseenter");
} 
```

演示：http: [//jsfiddle.net/PRZYN/](http://jsfiddle.net/PRZYN/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T13:38:00.427

问题出在您的 jquery 中。试试这个

```
 $(document).ready(function() {
 $('#box').mouseenter(function () {
       $(this).animate({left:"+=180px"}, "fast");
     }).
     mouseleave(function () {
       $(this).animate({left:"-=180px"}, "slow");
     });

 }); 
```

演示：[小提琴](http://jsfiddle.net/cTXXH/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T13:42:13.327

如果您愿意，您也可以使用 css 来完成，而无需使用 jQuery。

CSS：

```
#box{
background:#98bf21;
height:900px;
position: absolute;
left:-180px; 
width:200px;
    transition: left 2s;
    -moz-transition: left 2s;
    -webkit-transition: left 2s;
    -o-transition: left 2s;
}
#box:hover{
left: 0px;
}

#box:hover div{
left:100px;
display:block;
}
#skinDiv{
position:relative;
} 
```

[在此处](http://jsfiddle.net/Xd9rB/4/)查看演示

# c++ - 带有随机访问的无效迭代器 带有双端队列的迭代器

> ID：13474281
> 
> 赞同：4
> 
> 时间：2012-11-20T13:28:27.327
> 
> 标签：c++, stl

我正在阅读 Scott Meyers 的有效 STL。在第 1 项中，作者提到了如何在各种容器中进行选择，下面是我难以理解的文本片段。

> 拥有一个带有随机访问迭代器的序列容器是否会有所帮助，只要没有任何内容被擦除并且插入仅发生在容器的末端，对数据的指针和引用就不会失效？这是一个非常特殊的情况，但如果是你的情况，deque 就是你梦想的容器。（有趣的是，当只在容器的末端进行插入时，deque 的迭代器可能会失效。deque 是唯一的标准 STL 容器，其迭代器可能会失效，而不会使其指针和引用也失效。）

我对上述文字的问题

1.  作者在上述上下文中的指针和引用是什么意思，它与迭代器有什么不同？

2.  当仅在末尾进行插入并且我们仍然有有效的指针和引用时，如何使双端队列的迭代器失效？

要求用简单的例子回答以上两个问题。

感谢您的时间和帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T13:57:58.640

对于第一部分，意思是这样的：

```
deque<int> foo(10, 1); // a deque with ten elements with value of 1
int& bar = foo.front(); // reference
int* baz = &foo.front(); // pointer
deque<int>::iterator buz = foo.begin(); // iterator
deque.push_front(0); 
// At this point bar and baz are still valid, but buz may have been invalidated 
```

对于第二部分，这里详细介绍了它：

[为什么 push_back 或 push_front 使双端队列的迭代器无效？](https://stackoverflow.com/questions/913070/why-does-push-back-or-push-front-invalidate-a-deques-iterators)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T13:50:02.170

迭代器通常用于“循环”标准库容器的元素，就像您对数组索引所做的那样，例如在`for`循环中。

迭代器可能由于多种原因而无效。发生这种情况的一种常见情况是当您使用`for`如下循环时：

```
std::deque<int> c;

for(std::deque<int>::iterator i = c.begin(); i != c.end(); ++i) {
    // do some stuff to the deque's elements here
} 
```

在上述循环结束时，迭代器`i`将指向双端队列中最后一个实际元素**后一个块的“元素”。**如果你试图做类似的事情

```
*i = 88; 
```

在上述`for`循环结束之后，这将是一个问题，因为容器不“拥有”内存`i`“指向”。

但 Meyers 可能谈论的是标准将 deque 的大部分实现留给设计者。双端队列**通常**实现为包含多个元素的内存块的链表，因此与向量不同，不能保证元素在内存中彼此相邻。此外，迭代器必须包含有关这些“块”的信息，以便它们可以顺利地遍历它们（即迭代器不仅仅是指针）。

例如，如果我`push_back()`有一个新元素，但“最后一个”内存块中没有更多空间，那么 deque 将需要为新元素（以及添加到末尾的未来元素）分配一个新的内存块。由于我之前使用的迭代器可能不“知道”这个新的内存块，它可能是无效的。

另一方面，引用和实际指针将在此上下文中用于引用/指向容器中的各个对象。如果我写

```
int& j = *c.begin(); 
```

那么 j 是对 的第一个元素的引用`c`。如果我这样做

```
c.push_front(74); 
```

`j`仍然引用之前的第一个元素，即使它不再位于双端队列的前面。

**但是**，如果你在双端队列的**中间**插入一些东西，那么你很可能会有效地分割那些连续的内存块之一，并试图将你的新元素挤入其中。为了腾出空间，必须在内存中移动一侧或另一侧的元素（并且可能需要分配新的内存）。这必然会使对插入“一侧”的元素的指针/引用无效。由于如何为插入的元素准确地留出空间取决于实现者，所以对于任何指针/引用，所有赌注都是关闭的，无论它在哪里插入。

# sql - sqlplus 返回相同的行

> ID：13474282
> 
> 赞同：-1
> 
> 时间：2012-11-20T13:28:28.770
> 
> 标签：sql

我需要有关 sqlplus 的帮助。假设我确实有一个名为就业的表，其中包含**Name**和**Job**列。我想返回具有**相同 Job的****Names**。

 **桌子：

```
Name  Job

John  KPMG
Mike  Morgan Stanley
Alan  Delloite
Anna  Ernst and Young
Tom   KPMG
Fran  Delloite 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T13:35:42.313

要确定哪些作业有多个名称，请执行以下操作

```
select count(name), job
from employment
group by job
having count(name) > 1 
```

然后获取每个工作的名称列表，

```
select count(emp_count.name), emp_count.job, emp_names.name
from employment emp_count
  inner join employment emp_names on emp_count.job = emp_names.job
group by emp_count.job
having count(emp_count.name) > 1 
```

你也可以简单地

```
select * from employment order by job 
```

这会将所有重复的作业放在列表中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T13:30:47.257

```
select Name from employment where Job = 'KPMG'; 
```

这将返回

**姓名**

约翰

汤姆

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T13:32:53.453

你可以有这样的查询，

从emp中选择名称，工作，其中工作='德勤'；

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T13:53:34.997

尝试使用这个：

从工作所在的工作中选择名称（按计数（工作）> 1 的工作从工作组中选择工作）；**

# javascript - 选中/取消选中主复选框时触发其他复选框 onclick()

> ID：13474286
> 
> 赞同：0
> 
> 时间：2012-11-20T13:28:59.713
> 
> 标签：javascript, checkbox

我已经阅读了许多关于选择所有复选框的其他问题，但找不到一个说明如何触发其他复选框操作的问题。

I have a main checkbox, when this checkbox is selected all other checkboxes are selected as well. 问题是，其他复选框必须执行自己的操作，例如禁用文本字段等，如果它们被选中/未选中。我通过将 onclick 添加到每个复选框来实现这一点。那么，如果选择了主复选框，如何在单击时调用每个复选框（或使每个复选框执行其操作）？

在阅读了这个之后，我做了以下几点：

```
 // main checkbox functin that checks/unchecks other checkboxes. 

  function toggleAllCheckBoxes(source , operationType) {
                checkboxes = document.getElementsByName("checkBox" + operationType);
                for each(var checkbox in checkboxes)
                checkbox.checked = source.checked;
               // checkbox.addEventListener('click', true); // this is wrong.
            }

  //this will toggle text fields enabled/disabled
 function toggleDisable(oldTable, newTable , checkBox)
    {
        if( document.getElementById(newTable) !=null)// in case to toggle only old table
        {
            document.getElementById(newTable).disabled = checkBox.checked;
        }

        document.getElementById(oldTable).disabled = checkBox.checked;
    } 
```

主复选框：

```
All<input type="checkbox" onClick="toggleAllCheckBoxes(this , '<?=$operationType?>')"/> 
```

其他复选框

```
 X<input name="checkbox" id="checkbox" onclick="toggleDisable('<?= $originalTableId?>' , '<?= $backupTableId?>' , this )" type="checkbox" /> 
```

到目前为止，这工作正常，除了如果选中主复选框，则不会启用/禁用文本字段。尽管单个复选框能够做到这一点。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T13:49:18.910

我看到两个问题：

1.  JavaScript中没有`for each`运算符。您需要在此处使用普通的 for 循环。
2.  您不想`checked`为复选框设置属性，因为如您所见，这将绕过所有事件处理程序。相反，调用`click()`复选框，它将被选中（或取消选中）并且所有事件处理程序都将被调用。

最终看起来像这样`toggleAllCheckBoxes`：

```
for(var i = 0; i < checkboxes.length; i++)
    checkboxes[i].click(); 
```

这是一个尝试此代码的小提琴：http: [//jsfiddle.net/z4Ltc/](http://jsfiddle.net/z4Ltc/)

# javascript - window.opener.location 在 IE 中不起作用

> ID：13474287
> 
> 赞同：3
> 
> 时间：2012-11-20T13:29:00.590
> 
> 标签：javascript, asp.net

我正在尝试使用此 javascript 从子页面重定向到父页面：

```
ScriptManager.RegisterClientScriptBlock(this, this.GetType(), "Close", "ClosePopUp();", true); 

<script language="javascript" type="text/javascript">
    function ClosePopUp() {
        window.opener.location= 'ParentPage.aspx';
        self.close();
    }

</script> 
```

它适用于 Firefox 和 Chrome。但不是 IE 9。我得到的错误是：

`Unable to get value of the property 'location': object is null or undefined`

`alert(window.opener)``null`在 IE 9 中返回。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T15:49:45.677

经过一段时间的搜索，我找到了 Internet Explorer 的解决方案。你需要使用

> window.opener.location.href='';

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T13:32:19.893

[`window.opener`](https://developer.mozilla.org/en-US/docs/DOM/window.opener)是非标准属性，并非在所有浏览器中都可用。它还将评估`null`该窗口是否不是从另一个窗口打开的，因此它看起来非常不可靠。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T13:36:48.930

我认为您可以使用 window.open

```
window.open(URL,name,specs,replace) 
```

更多信息[在这里](http://www.w3schools.com/jsref/met_win_open.asp)

**更新**

我想我现在明白了。在您的父窗口中添加一个事件处理程序到您孩子的卸载事件。

```
var win = window.open("ChildPage.aspx");

function popUpUnLoaded() {
    window.location = "ParentPage.aspx";
}

if (typeof win.attachEvent != "undefined") {
    win.attachEvent("onunload", popUpUnLoaded );
} else if (typeof win.addEventListener != "undefined") {
    win.addEventListener("unload", popUpUnLoaded, false);
} 
```

这意味着当下面的函数执行时，您的父页面会启动它。

```
function ClosePopUp() {
    self.close();
} 
```

# wcf - Castle WCF Facility，对非通用合同使用通用接口

> ID：13474288
> 
> 赞同：4
> 
> 时间：2012-11-20T13:29:05.783
> 
> 标签：wcf, inversion-of-control, castle-windsor, wcffacility

我试图通过使用泛型和城堡 WCF 设施来尽量减少大型项目的 WCF CRUD 部分的代码编写。

我有 WCF 服务合同：

```
[ServiceContract]
public interface IResourceService : ICRUDService<DTOResource>
{
    [OperationContract]
    DTOResource Get(long id);
} 
```

和`generic`界面

```
public interface ICRUDService<T> where T is IDTO
{
    T Get(long id);
} 
```

也是通用`MVC`控制器（*1 个控制器用于 dtos 和服务的所有基本 crud*）

```
public class CRUDController<T> : Controller where T is IDTO
{
    readonly ICRUDService<T> service;
    public CRUDController(ICRUDService<T> service)
    {
        this.service = service;
    }   
} 
```

在客户端，我在`Windsor`容器中注册 WCF 客户端

```
Component
  .For<IResourceService , ICRUDService<DTOResource>>()
  .AsWcfClient(... standard stuff... ) 
```

一切正常，组件和服务注册，控制器创建正确，服务

```
readonly ICRUDService<T> service; 
```

在控制器中是类型

```
Castle.Proxies.IResourceService 
```

但是当我尝试在控制器中使用服务时出现错误

```
Method Get is not supported on this proxy, this can happen if the method is
 not marked with OperationContractAttribute or if the interface type is not 
 marked with ServiceContractAttribute. 
```

当在控制器中时，我硬编码转换

```
((IResourceService)service).Get(id); 
```

一切运行正常，所以我相信这个问题是可以解决的。

我也尝试过使用 Forward （*结果相同*）：

```
Component
  .For<IActionTypeService>
  .Forward<ICRUDService<DTOResource>>().AsWcfClient(... 
```

如何让它发挥作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T12:02:46.880

最后我不得不在客户端使用“通道工厂”。我能够`WCF Facility`在服务器端使用 Windsor 来注册通用合同：

```
[ServiceContract]
public interface ICRUDService<I>
{
    [OperationContract]
    I Get(int id);
} 
```

具有通用实现

```
public class CRUDService<I, IEntity> : ServiceBase, ICRUDService<I>
{
    public I Get(int id)
    {            
        ...
    } 
```

以标准方式（适用于多种类型）

```
private void InstallExample<I, IEntity>(IWindsorContainer container)
{
container.Register(
    Component
        .For<ICRUDService<I>>()
        .ImplementedBy(CRUDService<I, IEntity>)
        .Named("somename")
        .AsWcfService(
            new DefaultServiceModel()
                .Hosted()
                .PublishMetadata(x => x.EnableHttpGet())
                .AddEndpoints(WcfEndpoint
                .BoundTo(new BasicHttpBinding())
                .At("someAddress")
            )
        )
        .LifeStyle.PerWcfOperation();
} 
```

无文件激活`web.config`

```
<add factory="Castle.Facilities.WcfIntegration.DefaultServiceHostFactory, Castle.Facilities.WcfIntegration" service="ClientService" relativeAddress="./ClientService.svc" /> 
```

在服务器端它工作得很好。可悲的是，在客户端我没有找到 WCFFacility 的工作解决方案，我不得不使用`ChannelFactory`（它工作得很好）

```
ChannelFactory<ICRUDService<I>> factory = new ChannelFactory<ICRUDService<I>>(someBinding, someEndpoint); 
```

其余的（我正在使用的标准非通用服务`WCF Facility`没有任何问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T05:58:46.150

我认为您需要将 ServiceContract 属性放在 ICrudService<> 上，将 OperationContract 添加到那里的方法中，并从 IResourceService 中删除 Get() 的重复声明。

# css - 具有设备像素比率/分辨率的媒体查询：语法不正确？

> ID：13474294
> 
> 赞同：0
> 
> 时间：2012-11-20T13:29:28.833
> 
> 标签：css, ios6, media-queries

我正在使用 iOS 模拟器来测试各种 iOS 设备的响应式主题的媒体查询，但以下媒体查询未呈现。我已经参考了 w3.org 媒体查询标准以及[这篇博](http://www.w3.org/blog/CSS/2012/06/14/unprefix-webkit-device-pixel-ratio/)文、 A List Apart[的像素身份危机](http://www.alistapart.com/articles/a-pixel-identity-crisis/)和[Mozilla 的博](https://developer.mozilla.org/en-US/docs/CSS/Media_queries)文以及其他一些内容，但我没有看到是什么破坏了查询，是吗？

```
/*-- iPhone 4, 4S Retina -----------------------*/

@media 
screen and (min-pixel-ratio:2) and (min-width:320px) and (max-width:600px),
screen and (-webkit-min-pixel-ratio:2) and (min-width:320px) and (max-width:600px),
screen and (-o-min-pixel-ratio:2/1) and (min-width:320px) and (max-width:600px), 
screen and (min--moz-pixel-ratio:2) and (min-width:320px) and (max-width:600px),/* Firefox browsers prior to FF 16) */
screen and (min-resolution:2ddpx) and (min-width:320px) and (max-width:600px) {
   /*styles here */
}

/*------- iPhone 2G, 3G, 3GS  -------------*/
@media  
screen and (max-device-pixel-ratio: 1.5) and (min-width: 320px) and (max-width: 600px),
screen and (-webkit-max-device-pixel-ratio: 1.5) and (min-width: 320px) and (max-width: 600px),
screen and (-o-max-device-pixel-ratio: 1/5) and (min-width: 320px) and (max-width: 600px),
screen and (max--moz-device-pixel-ratio: 1.5) and (min-width: 320px) and (max-width: 600px), /* Firefox browsers prior to FF 16) */
screen and (max-resolution: 1.5ddpx) and (min-width: 320px) and (max-width: 600px) {
   /*styles here*/
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T15:45:51.707

如果您只针对 ios（您不必担心 opera/firefox），那么您可以安全地将您的媒体查询缩短为：

```
/*-- iPhone 4, 4S Retina -----------------------*/
@media screen and (-webkit-min-pixel-ratio:2) and (min-width:320px) and (max-width:600px) {
   /*styles here */
}

/*------- iPhone 2G, 3G, 3GS  -------------*/
@media screen and (min-width: 320px) and (max-width: 600px){
   /*styles here*/
} 
```

如果您的网站需要它们，那么在其中也有`(orientation: landscape)`/也是一个好主意。`(orientation: portrait)`

# java - MyBatis Java Boolean to Sql enum

> ID：13474296
> 
> 赞同：3
> 
> 时间：2012-11-20T13:29:29.520
> 
> 标签：java, mybatis

我在我的项目中使用 MyBatis 和 MySql。

我有：

myField 枚举（'是'，'否'）

我想映射到java布尔值：

我知道我可以修改所有 mybatis 模板，例如：

```
<update id="update">
UPDATE
myTable
   <set>
        ...
       <if test="myField != null">myField = <choose>
           <when test="myField == true">'yes'</when>
           <otherwise>'no'</otherwise>
           </choose>,
        </if>
        ...
    </set>
 WHERE
    ...
 </update> 
```

但是我能以更方便的方式做到这一点吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-21T07:00:21.047

似乎解决这个问题的最好方法是实现我自己的布尔类型处理程序：

```
public class YesNoBooleanTypeHandler extends BaseTypeHandler<Boolean> {

    @Override
    public void setNonNullParameter(PreparedStatement ps, int i, Boolean parameter,      JdbcType jdbcType)
            throws SQLException {
        ps.setString(i, convert(parameter));
    }

    @Override
    public Boolean getNullableResult(ResultSet rs, String columnName)
            throws SQLException {
        return convert(rs.getString(columnName));
    }

    @Override
    public Boolean getNullableResult(ResultSet rs, int columnIndex)
            throws SQLException {
        return convert(rs.getString(columnIndex));
    }

    @Override
    public Boolean getNullableResult(CallableStatement cs, int columnIndex)
            throws SQLException {
        return convert(cs.getString(columnIndex));
    }

    private String convert(Boolean b) {
        return b ? "yes" : "no";
    }

    private Boolean convert(String s) {
        return s.equals("yes");
    }

} 
```

然后在映射器模板中使用它：

```
<update id="update">
UPDATE
myTable
   <set>
        ...
       <if test="myField != null">myField = #{myField ,typeHandler=YesNoBooleanTypeHandler}</if>
        ...
    </set>
 WHERE
    ...
 </update> 
```

# xml - 使用 AFNetworking 和 NSXMLParser 解析 xml

> ID：13474299
> 
> 赞同：0
> 
> 时间：2012-11-20T13:29:40.907
> 
> 标签：xml, xcode, nsxmlparser

我需要从远程 URL 解析 xml 字符串，并且我想使用 AFNetworking。这是我的代码：

```
NSURL *url2 = [NSURL URLWithString:@"REMOTEXMLURL"];
NSURLRequest *request2 = [NSURLRequest requestWithURL:url2];

AFXMLRequestOperation *operation2 = [AFXMLRequestOperation XMLParserRequestOperationWithRequest:request2
                                        success:^(NSURLRequest *request2, NSHTTPURLResponse *response2, NSXMLParser *XMLParser) {
                                            NSLog(@"TESTING PARSING");
                                            [XMLParser setDelegate:self];
                                            [XMLParser parse];
                                        } failure:^(NSURLRequest *request2, NSHTTPURLResponse *response2, NSError *error2, NSXMLParser *XMLParser) {
                                        NSLog(@"%@", [error2 userInfo]);
                                        }];
[operation2 start]; 
```

这是对的吗？现在我有了 *XMLParser，我可以避免使用 NSXMLParser 委托方法，例如：

```
-(void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qualifiedName attributes:(NSDictionary *)attributeDict

-(void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName

-(void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string 
```

或者我被限制使用它？换句话说，使用 AFNetworking 和 AFXMLRequestOperation 初始化的 *XMLParser 对象必须传递给委托方法，或者我可以用另一种方式解析它（如 AFJSONRequestOperation，到 AFNetworking 操作中）？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T14:12:31.833

NSXMLParser 需要一个委托。如果你想使用 NSXMLParser，并且想让你的类成为它的委托，你需要实现委托方法来理解你的 XML。

XML 解析器不知道你的 XML 是什么意思，它只是把它读给你听；你必须自己理解。

# https - font-face 不适用于 https 安全服务器页面

> ID：13474305
> 
> 赞同：1
> 
> 时间：2012-11-20T13:30:22.683
> 
> 标签：https, font-face, truetype

h3 {字体系列：'Swiss721CondensedRegular'}

css

```
@font-face {
        font-family: 'Swiss721CondensedRegular';
        src: url('../fonts/swiss721bt-romancondensed-webfont.eot'); src: url('../fonts/swiss721bt-romancondensed-webfont.eot?#iefix') format('embedded-opentype'),
            url('../fonts/swiss721bt-romancondensed-webfont.woff') format('woff'),
            url('../fonts/swiss721bt-romancondensed-webfont.ttf') format('truetype'),
            url('../fonts/swiss721bt-romancondensed-webfont.svg#Swiss721CondensedRegular') format('svg');
    } 
```

# apache - mod_proxy 可以处理带有参数的 GET 响应（使用 tomcat 作为后端）

> ID：13474312
> 
> 赞同：0
> 
> 时间：2012-11-20T13:30:31.860
> 
> 标签：apache, tomcat, mod-proxy

我有 Apache 反向代理，它对使用 mod_jk 连接 tomcat 的后端 Apache 提出请求，应用程序位于 Apache 反向代理中的 java/jsps 中我有这个配置，当 GET 请求中存在不带参数的请求时有效：

```
ProxyRequests     Off
ProxyPreserveHost On
ProxyPass /users/ http://1x2.xxx.4.xx:5xxxx/jsp/app/New/
ProxyPassReverse /users/  http://1x2.xxx.4.xx:5xxxx/jsp/app/New/
CustomLog /home/Apache/logs/proxy_log common 
```

mod_proxy 日志：

```
1xx.1xx.3.xx - - [20/Nov/2012:14:07:54 +0200] "GET /users/ HTTP/1.1" 200 3547
1xx.1xx.3.xx - - [20/Nov/2012:14:07:57 +0200] "GET /users/ HTTP/1.1" 200 3547
1xx.1xx.3.xx - - [20/Nov/2012:14:07:58 +0200] "GET /users/index.jsp?event=pi&id=&p= HTTP/1.1" 200 3615
1xx.1xx.3.xx - - [20/Nov/2012:14:08:02 +0200] "GET /users/ HTTP/1.1" 200 3547
1xx.1xx.3.xx - - [20/Nov/2012:14:08:07 +0200] "GET /users/index.jsp?event=pi&id=test&p=test HTTP/1.1" 200 3615
1xx.1xx.3.xx - - [20/Nov/2012:14:16:48 +0200] "GET /users/ HTTP/1.1" 200 3547
1xx.1xx.3.xx - - [20/Nov/2012:14:27:05 +0200] "GET /users/index.jsp?event=pi&id=test&p=test HTTP/1.1" 302 -
1xx.1xx.3.xx - - [20/Nov/2012:14:27:05 +0200] "GET /jsp/app/New/Home.jsp?event=Validated HTTP/1.1" 404 306
1xx.1xx.3.xx - - [20/Nov/2012:14:29:25 +0200] "GET /users/index.jsp?event=pi&id=test&p=test HTTP/1.1" 302 -
1xx.1xx.3.xx - - [20/Nov/2012:14:29:25 +0200] "GET /jsp/app/New/Home.jsp?event=Validated HTTP/1.1" 404 306
1xx.1xx.3.xx - - [20/Nov/2012:15:11:37 +0200] "GET /users/ HTTP/1.1" 200 3547
1xx.1xx.3.xx - - [20/Nov/2012:15:11:44 +0200] "GET /users/index.jsp?event=pi&id=test&p=test HTTP/1.1" 302 -
1xx.1xx.3.xx - - [20/Nov/2012:15:11:45 +0200] "GET /jsp/app/New/Home.jsp?event=Validated HTTP/1.1" 404 306 
```

如您所见，每次收到以下响应时：

```
"GET /jsp/app/New/Home.jsp?event=Validated HTTP/1.1" 404 306 
```

当我尝试在没有代理服务器的情况下直接使用它时，该页面无法正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T20:58:47.183

您需要使用 Apache Httpd v2.2+ 并在 ProxyPass 配置中指定“nocanon”选项，该选项告诉 Apache 不要规范化请求查询字符串：

```
ProxyPass /users/ http://1x2.xxx.4.xx:5xxxx/jsp/app/New/ nocanon 
```

# gcc - 仅编译 thumb1

> ID：13474322
> 
> 赞同：6
> 
> 时间：2012-11-20T13:31:13.460
> 
> 标签：gcc, compiler-construction, arm, thumb

我如何告诉 gcc 编译成仅限 Thumb1 的指令？

大家都知道helloworld.c：

```
#include <stdio.h>  
main() {  
 printf("Hello world");  
} 
```

这是我的命令行：

user@debian-armel:~$gcc -mcpu=cortex-m3 -mthumb helloworld.c && objdump -d a.out

瞧：大多数指令都是 32 位宽的，而不是我预期的 16 位。

那么，我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T13:56:41.443

Cortex-M3 支持 Thumb-2，因此编译器可以自由生成 32 位版本。以下其中一项应该可以满足您的需求：

```
-march=ARMv5 -mthumb
-march=ARMv4T -mthumb
-march=ARMv6-M
-mcpu=Cortex-M0 
```

# django - 仅在 IE9 上使用 django 表单提交的 HTTP 403

> ID：13474326
> 
> 赞同：4
> 
> 时间：2012-11-20T13:31:15.663
> 
> 标签：django, internet-explorer, nginx

我正在开发 Django 1.4.2 版。我已经实现了这个简单的表单示例（灵感来自 djangobook）：

```
# views.py

from django.shortcuts import render
from django.http import HttpResponseRedirect
from django.core.mail import send_mail
from mysite.contact.forms import ContactForm

def contact(request):
    if request.method == 'POST':
        form = ContactForm(request.POST)
        if form.is_valid():
            cd = form.cleaned_data
            send_mail(
                cd['subject'],
                cd['message'],
                cd.get('email', 'noreply@example.com'),
                ['siteowner@example.com'],
            )
            return HttpResponseRedirect('/contact/thanks/')
    else:
        form = ContactForm()
    return render(request, 'contact_form.html', {'form': form})

# contact_form.html

<html>
<head>
    <title>Contact us</title>
</head>
<body>
    <h1>Contact us</h1>

    {% if form.errors %}
        <p style="color: red;">
            Please correct the error{{ form.errors|pluralize }} below.
        </p>
    {% endif %}

    <form action="" method="post">
        <table>
            {{ form.as_table }}
            {% csrf_token %}
        </table>
        <input type="submit" value="Submit">
    </form>
</body>
</html>

# forms.py

from django import forms

class ContactForm(forms.Form):
    subject = forms.CharField()
    email = forms.EmailField(required=False)
    message = forms.CharField() 
```

对于我尝试过的所有浏览器（chrome、maxthon、firefox），一切正常，但在 IE9 中，我收到 HTTP 403 被拒绝。

关于是什么原因的任何线索？

编辑：经过更深入的调查，我发现问题出在：当询问空表单时，导航器收到 csrf cookie，但由于未知原因，它在发布表单时没有发回这个 cookie。这个问题似乎只有当 cookie 来自 pythonanywhere.com 的 nginx 服务器时才会出现，当我从我自己的 apache 服务器进行测试时，cookie 被发送回去。

以下是从服务器捕获的两个标头：

```
HTTP/1.1 200 OK
Server: nginx/1.2.5
Date: Wed, 21 Nov 2012 13:56:31 GMT
Content-Type: text/html; charset=utf-8
Transfer-Encoding: chunked
Connection: keep-alive
Vary: Cookie
Set-Cookie: csrftoken=1AJjzkbUgJdKAmkbiHicJ3or2Mfi6AbD; expires=Wed, 20-Nov-2013 13:56:31 GMT; Max-Age=31449600; Path=/

HTTP/1.1 200 OK
Date: Wed, 21 Nov 2012 13:56:50 GMT
Server: Apache/2.2.15 (CentOS)
Vary: Cookie
Set-Cookie:  csrftoken=2iMZSH1s0vJnEt4tRRY7FciT1Q7orrVF; expires=Wed, 20-Nov-2013 13:56:50 GMT; Max-Age=31449600; Path=/
Keep-Alive: timeout=180, max=100
Connection: Keep-Alive
Transfer-Encoding: chunked
Content-Type: text/html; charset=utf-8 
```

唯一显着的区别似乎是来自 apache 的 Kee-Alive 标头......

你认为它可以来自那里吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T23:32:55.363

`{% csrf_token %}`输出一个`<input type="hidden" ...>`标签，也许 IE9 会忽略它，因为它是表格的直接子代，而不是在单元格内。

试着移动`{% csrf_token %}`到旁边`<input type="submit" value="Submit">`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-24T12:07:04.153

在 Django 的票[#17157](https://code.djangoproject.com/ticket/17157)中，它指出问题在于 Internet Explorer 默认会阻止第三方 cookie。因此，您可以在浏览器设置中为所有站点或仅为您的站点启用第三方 cookie。以下是在 IE 7 中执行此操作的方法（来自[此链接](http://feedjit.com/static/howToEnableThirdPartyCookies.html)）：

1.  点击“工具”菜单
2.  单击“Internet 选项”
3.  选择“隐私”选项卡

选项 1：为所有网站启用第三方 cookie

1.  点击“高级”
2.  选择“覆盖自动 cookie 处理”
3.  选择“第三方 Cookies”下的“接受”按钮，然后单击“确定”

或者

选项 2：仅为 Feedjit.com 启用第三方 cookie

1.  点击“网站”
2.  添加“ *your-domain.com* ”并单击“允许”
3.  点击“确定”
4.  选择“第三方 Cookies”下的“接受”按钮，然后单击“确定”

# android-layout - 应用力关闭

> ID：13474327
> 
> 赞同：0
> 
> 时间：2012-11-20T13:31:20.973
> 
> 标签：android-layout

> 我无法理解 logcat 中出现的这个错误
> 
> 日志错误：

11-20 18:45:42.125: E/AndroidRuntime(458): 致命异常: main 11-20 18:45:42.125: E/AndroidRuntime(458): java.lang.ClassCastException: android.widget.ImageView 11-20 18:45:42.125: E/AndroidRuntime(458): 在 com.example.orderplacemnet.Product_Details$MyProductAdapter.getView(Product_Details.java:75) 11-20 18:45:42.125: E/AndroidRuntime(458): 在 android .widget.AbsListView.obtainView(AbsListView.java:1315) 11-20 18:45:42.125: E/AndroidRuntime(458): at android.widget.ListView.measureHeightOfChildren(ListView.java:1198) 11-20 18:45 :42.125: E/AndroidRuntime(458): 在 android.widget.ListView.onMeasure(ListView.java:1109) 11-20 18:45:42.125: E/AndroidRuntime(458): 在 android.view.View.measure( View.java:8171) 11-20 18:45:42.125: E/AndroidRuntime(458): 在 android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3132) 11-20 18:45:42.125:E/AndroidRuntime(458): 在 android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1012) 11-20 18:45:42.125: E/AndroidRuntime(458): 在 android.widget.LinearLayout.measureVertical(LinearLayout.java :381) 11-20 18:45:42.125: E/AndroidRuntime(458): 在 android.widget.LinearLayout.onMeasure(LinearLayout.java:304) 11-20 18:45:42.125: E/AndroidRuntime(458):在 android.view.View.measure(View.java:8171) 11-20 18:45:42.125: E/AndroidRuntime(458): 在 android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3132) 11-20 18 :45:42.125: E/AndroidRuntime(458): 在 android.widget.FrameLayout.onMeasure(FrameLayout.java:245) 11-20 18:45:42.125: E/AndroidRuntime(458): 在 android.view.View。测量（View.java:8171）11-20 18:45:42.125：E/AndroidRuntime（458）：在 android.widget.LinearLayout.measureVertical（LinearLayout.java:526）11-20 18:45:42.125：E/AndroidRuntime(458): 在 android.widget.LinearLayout.onMeasure(LinearLayout.java:304) 11-20 18:45:42.125: E/AndroidRuntime(458): 在 android.view.View.measure(View.java :8171) 11-20 18:45:42.125: E/AndroidRuntime(458): 在 android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3132) 11-20 18:45:42.125: E/AndroidRuntime(458):在 android.widget.FrameLayout.onMeasure(FrameLayout.java:245) 11-20 18:45:42.125: E/AndroidRuntime(458): 在 android.view.View.measure(View.java:8171) 11-20 18 :45:42.125: E/AndroidRuntime(458): 在 android.view.ViewRoot.performTraversals(ViewRoot.java:801) 11-20 18:45:42.125: E/AndroidRuntime(458): 在 android.view.ViewRoot。 handleMessage(ViewRoot.java:1727) 11-20 18:45:42.125: E/AndroidRuntime(458): 在 android.os.Handler.dispatchMessage(Handler.java:99) 11-20 18:45:42.125: E/ AndroidRuntime(458)：在 android.os。Looper.loop(Looper.java:123) 11-20 18:45:42.125: E/AndroidRuntime(458): 在 android.app.ActivityThread.main(ActivityThread.java:4627) 11-20 18:45:42.125: E/AndroidRuntime(458): at java.lang.reflect.Method.invokeNative(Native Method) 11-20 18:45:42.125: E/AndroidRuntime(458): at java.lang.reflect.Method.invoke(Method. java:521) 11-20 18:45:42.125: E/AndroidRuntime(458): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868) 11-20 18:45:42.125: E/AndroidRuntime(458): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626) 11-20 18:45:42.125: E/AndroidRuntime(458): 在 dalvik.system.NativeStart.main （本机方法）invokeNative（本机方法）11-20 18:45:42.125：E/AndroidRuntime（458）：在 java.lang.reflect.Method.invoke（Method.java:521）11-20 18:45:42.125：E/AndroidRuntime (458): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868) 11-20 18:45:42.125: E/AndroidRuntime(458): 在 com.android.internal.os。 ZygoteInit.main(ZygoteInit.java:626) 11-20 18:45:42.125: E/AndroidRuntime(458): at dalvik.system.NativeStart.main(Native Method)invokeNative（本机方法）11-20 18:45:42.125：E/AndroidRuntime（458）：在 java.lang.reflect.Method.invoke（Method.java:521）11-20 18:45:42.125：E/AndroidRuntime (458): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868) 11-20 18:45:42.125: E/AndroidRuntime(458): 在 com.android.internal.os。 ZygoteInit.main(ZygoteInit.java:626) 11-20 18:45:42.125: E/AndroidRuntime(458): at dalvik.system.NativeStart.main(Native Method)在 dalvik.system.NativeStart.main（本机方法）在 dalvik.system.NativeStart.main（本机方法）

```
package com.example.orderplacemnet;

import android.app.Activity;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.BaseAdapter;
import android.widget.ImageView;
import android.widget.ListView;
import android.widget.TextView;

public class Product_Details extends Activity
{ 
            String[] text = { "One", "Two", "Three", "Four", "Five"};

                int[] image = { R.drawable.rose_five, R.drawable.rose, R.drawable.rose_two,
                                                R.drawable.rose_three, R.drawable.rose_four};

                public void onCreate(Bundle savedInstanceState)
                {

                                super.onCreate(savedInstanceState);
                                setContentView(R.layout.activity_product__details);

                                ListView l1 = (ListView) findViewById(R.id.ListView01);
                                l1.setAdapter(new MyProductAdapter(text,image));

                }
 class MyProductAdapter extends BaseAdapter
{

                                String[] data_text;
                                int[] data_image;

                                MyProductAdapter()
                                {
                                                data_text = null;
                                                data_image = null;
                                }

                                MyProductAdapter(String[] text, int[] image)
                                {
                                                data_text = text;
                                                data_image = image;
                                }

                                public int getCount()
                                {
                                                return data_text.length;
                                }

                                public String getItem(int position)
                                {
                                                return null;
                                }

                                public long getItemId(int position)
                                {
                                                return position;
                                }

                                public View getView(int position, View convertView, ViewGroup parent)
                                {

                                                LayoutInflater inflater = getLayoutInflater();
                                                View row;

                                                row = inflater.inflate(R.layout.listview, parent, false);

                                                TextView textview = (TextView) row.findViewById(R.id.TextView01);
                                                ImageView imageview = (ImageView) row.findViewById(R.id.ImageView01);

                                                textview.setText(data_text[position]);
                                                imageview.setImageResource(data_image[position]);

                                                return (row);

                                }
    }
} 
```

> 这是我的列表行布局

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="#fff200"
    android:gravity="left|center"
    android:paddingBottom="5dp"
    android:paddingLeft="5dp"
    android:paddingTop="5dp" >

    <TextView
        android:id="@+id/TextView01"
        android:layout_width="30dp"
        android:layout_height="30dp"
        android:layout_marginLeft="10dp"
        android:textSize="20dp"
        android:textStyle="bold" >

    </TextView>

    <ImageView
        android:id="@+id/ImageView01"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="0.76"
        android:contentDescription="@string/productlist" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T13:37:23.040

我在您的代码中发现了 2 个问题。一是ImageView中的layout_weight属性。您也应该指定 TextView layout_weight。我建议您将 imageview 的权重设置为 3，将 textview 设置为 1，这样就不需要十进制数。

第二个问题纯属猜测：在适配器的 getView 方法中，尝试在没有父对象的情况下进行充气：

```
row = inflater.inflate(R.layout.listview, null); 
```

希望能帮助到你

# java - 在 websphere 共享库中添加共享项目 jar

> ID：13474329
> 
> 赞同：0
> 
> 时间：2012-11-20T13:31:25.997
> 
> 标签：java, hibernate, spring-mvc, websphere, shared-libraries

我们可以在共享库中添加项目依赖 jars（如 spring jars、日志记录等），我们可以在共享库中添加共享项目 jars（如与数据库通信的）吗？

**设想：**

我有这些项目

1.  网络应用
2.  WebAppEAR
3.  通用数据库

我在用`IBM Websphere server, hibernate, spring mvc`

我在 Websphere 共享库中添加了所有 spring、hibernate jar，包括 CommonDB.jar。WebApp 应用程序使用 spring 控制器成功运行，但是当我的应用程序尝试访问 DB 时，它会引发异常。

```
Caused by: java.lang.IllegalStateException: 
```

实际上 WebApp 没有加载`<bean>`数据源。DataSource 类位于 CommonDB 项目中。

当我在 EAR WebApp 的部署程序集中包含 CommonDB.jar 时，它将成功运行并从数据库中获取数据。我想从部署程序集中排除 CommonDB.jar，只想将它添加到共享库中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T10:31:08.130

在共享库中添加 jar 将起作用。尝试找出哪些 bean 未初始化并将它们添加到 Spring 文件中进行初始化。还要检查其他 bean 属性的依赖关系。

# html - 带有可放置字段的 Html5 画布拖放

> ID：13474331
> 
> 赞同：0
> 
> 时间：2012-11-20T13:31:31.637
> 
> 标签：html, drag-and-drop, html5-canvas

我想在 html5 画布中创建一个拖放功能。

这是我想要的：http:
[//jqueryui.com/draggable/](http://jqueryui.com/draggable/)

但是在 html5 画布中。

我在网上搜索过，但只找到了没有droppable字段的拖放教程

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T15:43:46.293

要拖动元素，您必须保存正在绘制的形状的坐标。

这是来自 simon sarris [http://simonsarris.com/blog/510-making-html5-canvas-useful的一个不错的教程](http://simonsarris.com/blog/510-making-html5-canvas-useful)

有不同的方法可以做到这一点，但如果你想要更具体的东西，你必须向我们解释你真正想要什么，或者至少发布一些代码。祝你好运 ！

# ssas - SSAS 第一个带有事实表的多维数据集，有点难

> ID：13474333
> 
> 赞同：0
> 
> 时间：2012-11-20T13:31:49.220
> 
> 标签：ssas

DCD 链接：http: [//i48.tinypic.com/29de538.png](http://i48.tinypic.com/29de538.png)

我使用 SQL Server Business Intelligence Development Studio 2008 处理这个 DCD。

我制作了一个事实表，这是一个观点，因为我需要采取一些措施..

现在如何将我的事实表连接到其他表？不知道是否应该链接到自检，仪器或网络。

很高兴听到正确的链接以及如何做！

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T15:07:44.713

看起来您对每个自检都有仪器（第一维度）、执行日期（第二维度）和结果状态（第三维度）。您可以生成仪器类型、组和网络的层次结构，以将 ssas 中的仪器组合在一起。

结果计数（NumOk、NumWarning、NumError）可能是您的度量。通常，您会根据事实的粒度（即每天）将这些组合到一个事实表中。无需为每个度量创建单独的事实，如果度量与一组不同的维度相关，您只会创建单独的事实表

尝试按如下方式设置您的源（根据需要添加其他属性）并按照模型进入 DSV。建议您在掌握 SSAS 中的基础知识之前忽略层次结构。

![自检示例](../Images/bd5eb6e83a56af670b7f4be5b7a43a8a.png)

# eclipse - 以编程方式打开 Eclipse 编辑器

> ID：13474343
> 
> 赞同：2
> 
> 时间：2012-11-20T13:32:21.633
> 
> 标签：eclipse, editor

我正在尝试在“打开方式”菜单中为具有特定扩展名的文件添加 Eclipse 编辑器。我使用 org.eclipse.ui.editors 扩展点中的启动器执行此操作。在启动器中，我使用需要传递编辑器 ID 的“打开编辑器”方法。有没有什么方法可以让我们在不传递编辑器 ID 的情况下以编程方式打开编辑器？我们可以通过传递实现编辑器的类的实例以编程方式打开编辑器吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T16:16:12.473

看一下[IDE 类的函数 openEditor()](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/api/org/eclipse/ui/ide/IDE.html)：

```
IFile fileToOpen = ...
IWorkbenchPage page = PlatformUI.getWorkbench()
                                .getActiveWorkbenchWindow().getActivePage();
IDE.openEditor( page, fileToOpen ); 
```

请注意，这里的一些检查可能很重要（如果文件存在或不存在，可以打开，您可以访问活动页面 - 它不是`null`，等等）

# c# - 通过 C# 将一行从一个数据库表复制到另一台服务器上的孪生

> ID：13474344
> 
> 赞同：-1
> 
> 时间：2012-11-20T13:32:22.530
> 
> 标签：c#, .net, database, tsql, visual-studio-2012

我正在尝试设计一种方法，允许我使用 SELECT 从 SQL 数据库中获取一行。然后，我想将返回的行插入到驻留在不同服务器上的数据库上的相同表中。

我的服务器连接和 SELECT 语句都有效；我可以在控制台窗口中查看我想要复制的行。

我遇到的问题是弄清楚我需要在 C# 中使用什么数据结构，如何使用 SELECT 填充此数据结构，最后如何使用该数据结构插入行。

我想保留多行的选项，但现在如果我能得到单行传输，那就太棒了。

谢谢你。

**编辑：**经过大量研究，我自己已经能够解决这个问题。我已将我的代码包含在下面的 heop 中，它可以帮助其他人，但尽管它有效，但它远非理想。我是业余爱好者，还没有完成。

```
static public void CopyDatabaseRows(string ConnectionStringDEV, string ConnectionStringLOCAL, string queryString)
{
    //Connect to first database table to retreive row/rows and populate dataset + datatable.
    DataSet dataSet = new DataSet();
    SqlConnection conn = new SqlConnection(ConnectionStringDEV);
    conn.Open();

    SqlCommand command = new SqlCommand(queryString, conn);
    DataTable dataTable = new DataTable();
    SqlDataAdapter dataAdapter = new SqlDataAdapter(queryString, conn);

    dataAdapter.FillSchema(dataSet, SchemaType.Mapped);
    dataAdapter.Fill(dataSet, "dbo.FileRegister");
    dataTable = dataSet.Tables["dbo.FileRegister"];
    conn.Close();

    //Connect to second Database and Insert row/rows.
    SqlConnection conn2 = new SqlConnection(ConnectionStringLOCAL);
    conn2.Open();

    SqlBulkCopy bulkCopy = new SqlBulkCopy(conn2);
    bulkCopy.DestinationTableName = "dbo.FileRegister";
    bulkCopy.WriteToServer(dataTable);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T13:39:05.997

我建议您使用 Simple.Data ( [https://github.com/markrendle/Simple.Data](https://github.com/markrendle/Simple.Data) ) 之类的东西来很容易地做到这一点。因为它使用 C# 动态，您可以只加载动态类型，然后将其直接插入到第二个 Simple.Data 连接中，而无需担心类型转换。

就像是：

```
var db = Database.OpenConnection("data source=.;initial catalog=Xyz;etc");

var db2 = Database.OpenConnection("data source=somewhereElse;initial catalog=Xyz;etc");

dynamic user = db.Users.FindById(1);

db2.Users.Insert(user); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-26T10:44:11.310

它工作得很好......我修改了这段代码......使用它......

```
string local = "Server=destinationservername;Database=destinationserverdb;Uid=sa;Pwd=<Password>;

string dev = "Server=sourceservername;Database=sourceserverdb;Uid=sa;Pwd=Password;    

private void btncopy_Click(object sender, EventArgs e)

{            
    CopyDatabaseRows(dev, local, query);            
}

static public void CopyDatabaseRows(string ConnectionStringDEV, string ConnectionStringLOCAL, string queryString)
{
    //Connect to first database table to retreive row/rows and populate dataset + datatable.
    DataSet dataSet = new DataSet();
    SqlConnection conn = new SqlConnection(ConnectionStringDEV);
    conn.Open();

    SqlCommand command = new SqlCommand(queryString, conn);
    DataTable dataTable = new DataTable();
    SqlDataAdapter dataAdapter = new SqlDataAdapter(queryString, conn);

    dataAdapter.FillSchema(dataSet, SchemaType.Mapped);
    dataAdapter.Fill(dataSet, "dbo.DeviceLogs");
    dataTable = dataSet.Tables["dbo.DeviceLogs"];
    conn.Close();

    //Connect to second Database and Insert row/rows.
    SqlConnection conn2 = new SqlConnection(ConnectionStringLOCAL);
    conn2.Open();

    SqlBulkCopy bulkCopy = new SqlBulkCopy(conn2);
    bulkCopy.DestinationTableName = "dbo.DeviceLogs";
    bulkCopy.WriteToServer(dataTable);

    MessageBox.Show(dataTable.Rows.Count.ToString() + "  rows copied successfully", "Info", MessageBoxButtons.OK, MessageBoxIcon.Information);
} 
```

# php - 带有 Yii Query Builder 的 SQL 条件 UNION()

> ID：13474345
> 
> 赞同：0
> 
> 时间：2012-11-20T13:32:26.767
> 
> 标签：php, mysql, yii

我想准备一个 SQL 查询，我想在其中放置 UNION 查询，但 UNION 查询是基于特定条件的，是否可以使用 Yii 查询生成器。

下面是我用简单的 DAO 制作的示例代码，但我想以查询构建器风格制作它

```
 if(isset($first) && $first!="")
       $con .= "SELECT id,first, from user where first LIKE '%".$first."%'";
   if(isset($last) && $last!="")
       $con .= " AND last LIKE '%".$last."%'";
   if((!empty($first) || !empty($last)) && (!empty($flag)) )
       $con .= " UNION SELECT id,first, from user where flag = 1"

   $command    = $connection->createCommand($con)->queryall(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T21:35:23.263

是的，确实如此。假设这是您的测试代码：

```
$command = Yii::app()->db->createCommand();

if(<your if statements here) {
    $command->select('id, username, profile')
}

if(<union if statement>) {
    $command->union()
} 
```

[Query Builder 页面](http://www.yiiframework.com/doc/guide/1.1/en/database.query-builder)中的一些示例其他行

```
->from('tbl_user u')
->join('tbl_profile p', 'u.id=p.user_id')
->where('id=:id', array(':id'=>$id))
->queryRow(); 
```

但是您要查看的主要内容是`union()`

# c++ - 用于解析的 C++ 库

> ID：13474348
> 
> 赞同：2
> 
> 时间：2012-11-20T13:32:30.747
> 
> 标签：c++, parsing, interpreter, bison, boost-spirit

我正在做一个软件来为算法生成动画。这些算法是用解释语言编写的，接近于 C（或多或少是面向 C 的伪代码）。因此，我的程序必须解释用这些语言编写的算法。此外，这种语言将一直增加以支持越来越多的功能。这里的关键问题是搜索一个可以轻松增加语言并轻松将不同解析器集成到同一程序中的库。该应用程序是用 GPL 许可的 C++ 编写的。

面向对象的解析器确实是我的目标解决方案。我需要帮助才能为此目的选择一个好的图书馆。还希望该库是多平台的，并且可以在公共发行版的官方存储库中使用：Ubuntu、Suse 等。

实际上，我或多或少地了解接下来的两个库/工具：

*   Flex/Bison++：两者都是 Flex/Bison 包装器，允许生成 C++ 代码而不是 C 代码，并为您的类选择一个名称。问题：如果安装 Flex/Bison++，Flex/Bison 会被覆盖。如果用户想要编译我的代码，我不想让他们复杂化。此外，CMake 无法搜索库的版本号。这可以手动解决，但并不优雅。
*   Boost.Spirit：它没有以前的问题，并且与我上面描述的所有理想特性相匹配。但是，我读过解析大语言和解决语法歧义并不好。此外，编译时间是巨大的。但是，我喜欢它可以以建设性的方式编写语法。这对于使代码/语言/程序可扩展非常重要。

你的建议是什么？

# c# - 无法关闭由 Task.Factory.StartNew 启动的任务

> ID：13474353
> 
> 赞同：2
> 
> 时间：2012-11-20T13:32:36.903
> 
> 标签：c#, .net, asp.net-mvc, task

您好，我是 C# .net 中的多线程和任务的新手，仅帮助我成功启动了一个新任务，可以使用以下命令继续在后台运行：

```
//if(tsk =NotRunning){
tsk = Task.Factory.StartNew(TheMethod); 
```

它现在工作正常，但现在当它开始时无法停止它，我一直在搜索[msdn](http://msdn.microsoft.com/en-us/library/dd321479.aspx)，发现一些似乎在做这项工作的方法，比如`Dispose`购买他们没有做，所以我想知道两个事物：

*   如何检查此任务是否已在运行？*（这是一个 MVC 项目，任务是通过控制器调用启动的，`…/Task/Start`所以我不想在每次访问此 URL 时都继续启动任务的另一个实例，我只希望在后台运行的整个应用程序中只有一个实例）*

*   其次，我该如何阻止它，我尝试了以下但没有奏效：

    ```
    public void TaskClose()
    {
        tsk.Dispose();
        var st = tsk.Status.ToString();
    } 
    ```

我知道互联网上可能没有关于它的答案，但他们主要使用 Lambda 表达式，我对他们不是很熟悉，所以请以其他方式提供答案，我什至会感激你能指出我可以使用的权利`method` 或`property`名称完成我的结果。

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T13:36:02.397

您无法停止 TPL 任务。处理这个问题的正确方法是实现[取消标记](https://stackoverflow.com/a/4783890/29407)。

# iphone - sqlite3：更新表的 SQL 语句不起作用

> ID：13474354
> 
> 赞同：-1
> 
> 时间：2012-11-20T13:32:37.820
> 
> 标签：iphone, objective-c, ios, ipad, sqlite

为了更新表，我写了::update set =\"%@\" WHERE =\"%@\"",col1Value,col2Value];

但是，这是行不通的。请帮忙。

我的代码如下：

```
 const char *dbpath = [databasePath UTF8String];
    sqlite3_stmt *statement;

    NSString *querySQL = [NSString stringWithFormat:@"UPDATE AssemblyAssessment SET countedunits=\"%@\" WHERE assemblyid=\"%@\"",self.SAcountedunits,self.asmbIdStr];
    const char *query_stmt = [querySQL UTF8String];

    if (sqlite3_prepare_v2(ipadSites,query_stmt, -1, &statement, NULL) == SQLITE_OK)
    {

            if (sqlite3_step(statement) == SQLITE_DONE)
            {
                NSLog(@"done...");

            }
            else
            {
                NSLog(@"not done...");
            }

        sqlite3_finalize(statement);
        sqlite3_close(ipadSites);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T14:05:53.807

1.  您应该`"?"`在准备好的语句中使用并使用[`sqlite3_bind_text`](http://www.sqlite.org/c3ref/bind_blob.html)then 来绑定字符串值，而不是使用`stringWithFormat`and `%@`。这样，您将**防止 SQL 请求中的 SQL 注入**和安全问题（例如，如果您的字符串包含引号或其他内容）。

2.  对于您的问题，请比“它不起作用”更准确。它是否返回错误代码，在这种情况下是哪个？它是否返回正常状态但您的数据库不工作？你的变量的类型是什么？您的临时变量的值是什么，您`querySQL`是否尝试在代码中放置断点以检查发生了什么？等等等等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T13:51:04.507

什么不完全正常。您可以尝试打印如下错误消息：

```
NSLog(@"%s",sqlite3_errmsg(ipadSites)); 
```

此外，对于此类单行请求，您可以使用 sqlite3_exec() 函数：

```
sqlite3_exec(ipadSites, query_stmt, NULL,NULL, NULL); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T15:39:33.433

您发布的代码显示您获取数据库文件的路径，但没有打开数据库的代码。`sqlite3_open_v2`在尝试准备语句或执行查询之前，您需要调用。

使用字符串格式来构建查询也是一个坏主意。您的查询应该是：

```
const char *query_stmt = "UPDATE AssemblyAssessment SET countedunits = ? WHERE assemblyid = ?"; 
```

准备该语句，然后使用适当的`sqlite3_bind_xxx`方法将两个值绑定到查询。这是一种更安全的方法。它负责正确引用和转义值。

# xcode - 目标 C：使用 NSASCIIStringEncoding 在 tableview 中搜索

> ID：13474359
> 
> 赞同：1
> 
> 时间：2012-11-20T13:32:46.810
> 
> 标签：xcode, search

我正在搜索`UITableView`使用这个：

```
titles = [NSArray arrayWithArray:[datamanager titlesForEntriesBetween:(NSInteger)[slider minSelectedValue] and:(NSInteger)[slider maxSelectedValue]containing:searchText]]; 
```

如何`NSASCIIStringEncoding`在搜索过程中对数组值进行编码？

（数组包含`"tête"`例如..当我搜索`"tete"`不匹配时..所以我将为我的搜索编码数组值）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T15:21:17.290

我会将第三个参数添加到您的 datamanager 函数中：

```
- (NSArray*)titlesForEntriesBetween:(NSInteger)startIndex
  and:(NSInteger)stopIndex
  withFunction:(BOOL(^)(NSString*))block {
  NSMutableArray *retVal = [NSMutableArray array];
  for(NSInteger i = startIndex; i <= stopIndex; ++i) {
    NSString *string = [array_ objectAtIndex:i];
    if (block(string)) {
      [retVal insertObject:string];
    }
  }
  return retVal;
} 
```

然后我会这样调用函数：

```
titles = [datamanager titlesForEntriesBetween:(NSInteger)[slider minSelectedValue] and:(NSInteger)[slider maxSelectedValue] withFunction:^(BOOL)(NSString *str) {
  NSData *data = [str dataUsingEncoding:NSASCIIStringEncoding];
  NSString *simpleString = [[[NSString alloc] initWithData:data usingEncoding: NSASCIIStringEncoding] autorelease];
  return [simpleString isEqualToString:str];
}]]; 
```

注意：我只是输入了这个，我没有尝试编译/运行它。

# mysql - Mysql临时数据

> ID：13474364
> 
> 赞同：3
> 
> 时间：2012-11-20T13:32:55.790
> 
> 标签：mysql, temporary

我们有要求，多个用户不断询问一些汇总数据以在相当大的表上进行监控。我正在考虑创建可能是内存/memchached 的临时表，其中将包含来自该表的聚合数据，因此监控应用程序将从该表中读取以避免来自主表的命中，该表将每 30 秒更新一次。那么这样做的最佳选择是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T13:37:25.477

您是否已经遇到性能问题？除非真的有必要，否则我不会考虑优化。数据库用于获取数据，因此大多数时候这足够快，因为算法足以缓存相关数据。特别是如果您使用正确的索引。

# javascript - 如何将脚本添加为代码？

> ID：13474365
> 
> 赞同：1
> 
> 时间：2012-11-20T13:32:58.833
> 
> 标签：javascript, jquery

> **可能重复：**
> [如何获取指定为 <script> 标签的“src”的文件内容？](https://stackoverflow.com/questions/148441/how-can-i-get-the-content-of-the-file-specified-as-the-src-of-a-script-tag)

我想打印我的脚本“定义”，防止它被执行。

试过：

```
var scriptWidget = document.createElement('script');
scriptWidget.type = 'text/javascript';
scriptWidget.src = "http://www.mywebsite.it/file.js";

$('#widget-html-codici').html(escape(scriptWidget)); 
```

但它打印`%5Bobject%20HTMLScriptElement%5D`。如何将代码打印为“代码”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T13:39:53.447

如果您只是使用以下内容怎么办：

```
var script = '<script type="text/javascript" '    // pay attention to
    + 'src="http://www.mywebsite.it/file.js"></'  // splitting of '</'
    + 'script>';                                  // and 'script>'

$('#widget-html-codici').text(script);​ 
```

**演示：http:** [//jsfiddle.net/NPBJm/](http://jsfiddle.net/NPBJm/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T13:41:11.447

你可以做：

```
var scriptWidget = document.createElement('script');
scriptWidget.type = 'text/javascript';
scriptWidget.src = "http://www.mywebsite.it/file.js";

console.log(scriptWidget.outerHTML); 
```

[**JSFiddle 上的演示**](http://jsfiddle.net/qebCy/)

# c++ - 从 .h 和 .cpp 文件定义纯虚函数会产生链接器错误？

> ID：13474367
> 
> 赞同：3
> 
> 时间：2012-11-20T13:33:00.320
> 
> 标签：c++, file, header, linker-errors, pure-virtual

我试图为我所有的实验室工作建立一个“框架”，但后来我遇到了一个令人沮丧的链接器错误，处理纯虚函数的实现。

当我从 .cpp 文件（如 returntype classname::function() {.....} ）定义纯虚函数时，出现链接器错误，告诉我未提供纯虚函数的定义。 .

但是，当我简单地将定义放到头文件中时，它运行良好.. 我知道我听起来很混乱......但是下面的代码肯定会帮助您了解正在发生的事情..

谁能帮我理解为什么会这样？

该项目包含4个文件，（2个头文件和2个cpp文件）

1 > 框架.h：

```
 #ifndef _FRAMEWORK
 #define _FRAMEWORK

 #include<iostream>

 class labTest

 {
   public :
      virtual void execute() = 0;
 };
#endif 
```

=======================================

2 >堆栈数组.h：

```
#include "FrameWork.h"
#include<iostream>
using namespace std;

template <class T>
class Stack_Array : public labTest
  {

       public: 
         virtual void execute();
  }; 
```

=======================================

3 > Stack_Array.cpp：

```
#include "Stack_Array.h"
template<class T>

 virtual void Stack_Array<T>::execute(void) // I beleive i am defining the pure virtual function here, but my compiler ll not agree.
  {
      std::cout << "Test";
  } 
```

=======================================

4 > Main_Run.cpp：

```
#include<istream>
#include"FrameWork.h"
#include"Stack_Array.h"
#include<vector>
using namespace std;

void main()
  {
   vector<labTest*> list(5);
   vector<labTest*>::iterator it;
   it = list.begin();
   Stack_Array<int>* sa = new Stack_Array<int>();

   list.insert(it,sa);
   list[0]->execute();
   getchar();

  } 
```

==========================================

构建输出：

```
1>------ Rebuild All started: Project: Lab FrameWork, Configuration: Debug Win32 ------
1>Build started 11/20/2012 6:16:48 PM.
1>InitializeBuildStatus:
1>  Touching "Debug\Lab FrameWork.unsuccessfulbuild".
1>ClCompile:
1>  Stack_Array.cpp
1>  Main_Run.cpp
1>  Generating Code...
1>Main_Run.obj : error LNK2001: unresolved external symbol "public: virtual void __thiscall Stack_Array<int>::execute(void)" (?execute@?$Stack_Array@H@@UAEXXZ)
1>C:\Users\BSP-4\Documents\Visual Studio 2010\Projects\SFML\Lab FrameWork\Debug\Lab FrameWork.exe : fatal error LNK1120: 1 unresolved externals
1>
1>Build FAILED.
1>
1>Time Elapsed 00:00:01.64

========== Rebuild All: 0 succeeded, 1 failed, 0 skipped ======================= 
```

如果我制作我的 Stack_Array.h 它会起作用：

```
#include "FrameWork.h"
#include<iostream>
using namespace std;

template <class T>
class Stack_Array : public labTest
{

    public: 
    void execute() // give the definition here instead of Stack_Array.cpp and it will work !
       {
           cout << "Test Success !!";
       }
}; 
```

我确信这是一些愚蠢的事情..我是否忽略了什么？..但我仍然需要帮助....

提前致谢...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T13:50:21.873

模板的定义必须在使用它的所有翻译单元中可用（除非涉及明确的专业化/实例化，这里不是这种情况）。换句话说，类模板的成员函数必须在头文件中定义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T13:49:54.433

`void Stack_Array<T>::execute(void)`仅在定义它的编译单元中定义。在 Stack_Array.cpp 之外，您的编译器不知道如何`execute`在`Stack_Array<T>`. 通常，模板实例化请求不会从一个执行单元传递到另一个执行单元。现在，您可以通过将实现`Stack_Array<T>`放入头文件或显式实例化`<T>`您要导出的`Stack_Array.cpp`.

C++ 尝试添加对交叉编译单元导出和请求模板实例化的支持，但这很棘手。

最简单的解决方案是将您的实现移动到头文件中，并确保方法是内联的（或在类的主体中）。

# javascript - removeEventListener 的行为

> ID：13474370
> 
> 赞同：12
> 
> 时间：2012-11-20T13:33:10.417
> 
> 标签：javascript, dom-events

请检查以下代码：

```
var clickfn = function(){
 alert("clicked");                    
}
document.getElementById("div1").addEventListener("click",clickfn,true);
clickfn = function(){  };
document.getElementById("div1").removeEventListener("click"); 
```

[http://jsfiddle.net/qUtzL/4/](http://jsfiddle.net/qUtzL/4/)

为什么不起作用`removeEventListener`？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-20T13:34:51.560

`removeEventListener`接受 2 个参数、事件和要删除的函数。
这应该有效：

```
document.getElementById("div1").removeEventListener("click", clickfn); 
```

* * *

此外，您正在执行的功能是空的。

```
var clickfn = function(){  }; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-20T13:35:48.577

您必须指定您指定的确切函数`addEventListener`作为第二个参数。如果您指定了第三个`useCapture`参数，则您还必须指定相同和等价的参数`removeEventListener`。

例如：

```
function myFunc(event){ alert(event.target.textContent); }

var myElement=document.getElementById('myElement');

//Add EventListener
myElement.addEventListener('click', myFunc, false );

/* ... */

//Remove EventListener
myElement.removeEventListener('click', myFunc, false ); 
```

↪[在 jsFiddle 查看示例](http://jsfiddle.net/zsAXY/)

您可以在[Mozilla Developer wiki](https://developer.mozilla.org/docs/DOM/element.removeEventListener)找到更多信息。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-10-12T14:36:24.507

我最近在 ReactJS 中的 Navbar 代码中遇到了这个问题，在 y 轴上滚动 100px 后为 Navbar 提供背景颜色，如果页面视图在顶部 100px 范围内，则将其删除。

我所要做的就是在 removeEventListener 中引入一个反向函数，为它提供应用程序规则。

```
const [show, handleShow] = useState(false);
  useEffect(() => {
    window.addEventListener('scroll', () => {
      if (window.scrollY > 100) {
        // do this
        handleShow(true);
      } else handleShow(false);
    });
    return () => {
      window.removeEventListener('scroll', () => {
        if (window.scrollY < 100) {
          // do this
          handleShow(false);
        } else handleShow(true);
      });
    };
  }); 
```

# javascript - 如何在不发出 HTTP 请求的情况下在 HTML 中显示“密钥”？

> ID：13474373
> 
> 赞同：0
> 
> 时间：2012-11-20T13:33:13.873
> 
> 标签：javascript, html, unicode

我想在我正在创建的 HTML/JavaScript 应用程序中的某些关键字旁边显示一个“密钥”（来自钥匙串），但我不想发出任何 HTTP 请求来加载图像。我怎样才能在所有主要浏览器中可靠地做到这一点？

是否有一个有效的 UNICODE 值？（我找不到一个）

是否有有效的 Webdings 字体？（它们通常不适用于 Opera 和 Firefox）

有没有办法使用 JavaScript 中的字符串提供的 base64 图像源在 JS 中创建图像？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T13:43:22.000

您可以在图像的 scr属性中使用[base64 数据：](http://en.wikipedia.org/wiki/Data_URI_scheme#HTML)

```
<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg==" alt="Red dot"> 
```

然后，您可以使用 javascript 扫描文本，并在需要的地方添加图像标签。
（或者将文本包装在一个跨度中，并将图像设置为跨度的背景。）

* * *

要在 DOM 中实际创建图像：

```
var img=document.createElement("img");
    img.setAttribute('src', 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38G    IAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg==');
    img.setAttribute('alt', 'Red dot');
    img.setAttribute('height', '10px');
    img.setAttribute('width', '10px');
document.body.appendChild(img); 
```

* * *

**编辑：**
[您可以使用此工具](http://www.greywyvern.com/code/php/binary2base64)将图像编码为 Base64。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T03:28:49.300

⚿ 0x26BF 看起来很匹配。我不知道他们把钥匙放在正方形里，但无论如何......当然问题是用户的字体是否有代码点......

![在此处输入图像描述](../Images/75baf08618fe4cc385ffd0a1c306f359.png)

# django - Djangorestframework Modelresource 从外键添加字段

> ID：13474379
> 
> 赞同：0
> 
> 时间：2012-11-20T13:33:23.897
> 
> 标签：django, django-rest-framework

我在 django-rest 框架中有一个 api，现在返回这个 json 数据：

```
 [
    {
        "id": 1,
        "foreignobject": {
            "id": 3
        },
        "otherfields": "somevalue"
    }
] 
```

但我希望它返回类似这样的内容（仅将 foreigneky 展平为其 ID）：

```
[
    {
        "id": 1,
        "foreignobject_id":3,
        "otherfields": "somevalue"
    }
] 
```

在模型资源中执行此操作，现在我有（简化）：

```
class ForeignKeyInDataResource(ModelResource):
    model = TheOtherModel
    fields = ('id',)

class SomeModelResource(ModelResource):
    model = SomeModel
    fields = ( 'id',('foreignobject','ForeignKeyInDataResource'),'otherfields',) 
```

我已经尝试过类似的东西：

```
class SomeModelResource(ModelResource):
    model = SomeModel
    fields = ( 'id','foreignobject__id','otherfields',) 
```

但这没有用

对于完整的故事，这是视图返回数据的方式，列表是对 SomeModel 查询的结果：

```
data = Serializer(depth=2 ).serialize(list)
return Response(status.HTTP_200_OK, data) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T13:43:19.253

我不再能够支持 REST framework 0.x，但如果您决定升级到 2.0，这很简单——只需在序列化程序上声明该字段，如下所示：`foreignobject = PrimaryKeyRelatedField()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T16:17:36.750

我找到了另一个选择：（通过阅读 ModelResource 文档...）在 Modelresource 中，您可以定义一个函数（self，instance），它可以返回 id。

在字段中您可以添加此功能！

所以，这有效：

```
class SomeModelResource(ModelResource):
    model = SomeModel
    fields = ( 'id','foreignobject_id','otherfields',)

    def foreignobject_id(self, instance):
        return instance['foreignobject']['id'] 
```

# f# - 如何使用带有两个参数的函数从列表中获取最大值？

> ID：13474382
> 
> 赞同：-3
> 
> 时间：2012-11-20T13:33:47.217
> 
> 标签：f#

定义函数 max2，它接受两个整数作为参数并返回其中最大的一个。

我这样做了：`let max2 x y = if x < y then y else x`我相信这是正确的

然后定义函数 max_list，它通过调用 max2 返回非空整数列表中的最大元素。对于空列表，它应该中止并显示错误消息（引发异常）

我这样做了：`let list = [3;4] let max_list = if list.IsEmpty then 0 else max2 list.Item(0) list.Item(1)`但是如果列表多于两个元素，这将不起作用。我不想使用任何面向对象的东西。正确答案是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T13:55:17.023

*正确的答案是您应该阅读有关[列表的递归](http://msdn.microsoft.com/en-us/library/dd233224.aspx)。*

F# 列表是使用空列表`[]`和 cons`(::)`构造函数逐步构建的。例如， `[3; 4]`是 . 的语法糖`3::4::[]`。在编写递归函数时，我们经常在列表上使用模式匹配。

这是一个严格遵循您的要求的递归函数：

```
let rec max_list xs =
   match xs with
   // The function aborts with an error message on empty lists
   | [] -> invalidArg "xs" "Empty list"
   // Return immediately on a singleton list
   | [x] -> x
   // xs has at least two elements, call max_list 
   // on the bigger element of the first two ones and the rest of the list
   | x1::x2::xs' -> max_list((max2 x1 x2)::xs') 
```

附带说明一下，有一个内置的通用[max](http://msdn.microsoft.com/en-us/library/ee353702.aspx)函数也适用于整数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T13:50:21.577

一个简单的递归解决方案：

```
let max2 x y = if x < y then y else x

let max_list list =
  let rec loop hi list = 
     match list with 
     | h::t -> let hi = max2 h hi
               loop hi t
     | []   -> hi
  match list with
  | h::t -> loop h t
  | []   -> invalidArg "list" "Empty list" 
```

在 FSI 中测试：

```
> max_list [3;4;5;1;2;9;0];;
val it : int = 9 
```

对于列表中的每个元素，将其与前一个最高元素 ('hi') 进行比较。将新的最高值和列表的其余部分传递给循环函数，直到输入列表为空。然后只需返回“嗨”。

# ssl - EV-SSL 根 CA 在浏览器上自动安装，无需确认

> ID：13474384
> 
> 赞同：1
> 
> 时间：2012-11-20T13:33:56.490
> 
> 标签：ssl, ca

在浏览[https://www.quovadisglobal.ch/Repository/DownloadRootsAndCRL.aspx](https://www.quovadisglobal.ch/Repository/DownloadRootsAndCRL.aspx)站点时，我注意到，当我浏览我的受信任 CA 证书时，它会自动下载受信任的根 CA，而无需我确认。

要重现该问题，只需执行以下步骤： - 确保您没有 QuaVadis 受信任的根 CA。- 打开网站[https://www.quovadisglobal.ch/Repository/DownloadRootsAndCRL.aspx](https://www.quovadisglobal.ch/Repository/DownloadRootsAndCRL.aspx)。- 关闭浏览器 - 再次打开浏览器并检查根 CA 证书。

您会发现 QuoVadis 受信任的根 CA 已安装且无需用户确认。

我用 IE8 和 FF 都试过了。

# javascript - 右对齐以选择无选项

> ID：13474390
> 
> 赞同：0
> 
> 时间：2012-11-20T13:34:08.467
> 
> 标签：javascript, jquery, html, css

如何更改元素之一的样式（例如：添加：`text-algin`或单个选项）或，这样既不会更改样式，也只会更改其中一个样式。`dir``select``option`

我尝试为和做`align right`单曲，在前一种情况下仍然存在（意思是：）。但不要工作。我该怎么办？`select``option``align left`

**[演示](http://jsfiddle.net/DEwvw/)**

```
select {
    direction: rtl;
    text-align: right;
    width: 300px;
}​

<select>
    <option disabled="disabled" selected="" value="" style="display: none;">Select</option>
    <option>option 1</option>
    <option>option 2</option>
    <option>option 3</option>
</select>​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T15:15:55.333

不幸的是，目前无法实现跨浏览器选择框样式。这就是为什么有这么多选择框插件创建模仿选择框的 DOM 元素，以便用户可以进行自定义样式。

如果您最终使用[SelectBoxIt](http://www.selectboxit.com)并想在 CSS 中执行此操作，您可以这样做：

```
.selectboxit-option:nth-child(1) {
    text-align: right;
} 
```

**注意：**我写了 SelectBoxIt

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T13:53:33.607

并非所有浏览器都支持对齐单个选项。令人惊讶的是，firefox 允许它，而其他任何 IE、Chrome、Opera[都不允许](http://jsfiddle.net/MCLjZ/)。这是尝试`option`在`select`.

```
<select>
    <option disabled="disabled" selected="" value="" style="display: none;">Select</option>
    <option class="lefty">option 1</option>
    <option>option 2</option>
    <option>option 3</option>
</select> 
```

和CSS

```
select {
    width: 300px;
}
.lefty {
    direction: rtl;
    text-align: right;
} 
```

但是，您可以做的是用额外的空格填充选项以给人以正确缩进的印象，但这不是一个很好的解决方案。

另一种选择是使用不依赖于内置浏览器控件的东西，例如[jQuery SelectBox](http://www.bulgaria-web-developers.com/projects/javascript/selectbox/)或[SelectBoxIt](http://gregfranko.com/jquery.selectBoxIt.js/)插件，然后您可以设置渲染内容的样式，因为它们不是内置在浏览器行为中，而是动态创建的 DOM 元素可以用 CSS 设置样式。

对于 SelectBoxIt，您可以使用以下内容：

```
$(document).ready(function() {
  $('.myselect .selectboxit-option-anchor').first().css("text-align", right");
}); 
```

# asp.net-mvc - 如何在 Json 中创建通用函数

> ID：13474392
> 
> 赞同：0
> 
> 时间：2012-11-20T13:34:15.983
> 
> 标签：asp.net-mvc, json

我认为我有这段代码

```
<a href="#SampleEditor" onclick="javaScript:ShowSampleEditor()"
                    id="SampleLink">Add Sample</a>
                <div class="editor-field" id="SampleEditor" style="display: none">
                    <div class="editor-label">
                        @Html.LabelFor(model => model.SampleCollectionInstructions)
                    </div>
                    <div class="editor-field">
                        @Html.TextAreaFor(model => model.SampleCollectionInstructions, new { @class = "adminRichText" })
                        @Html.ValidationMessageFor(model => model.SampleCollectionInstructions)
                    </div>
                </div> 
```

它的作用是向用户提供一个链接以打开富文本编辑器并隐藏链接

这是我使用的代码

```
function ShowSampleEditor() {
        $("#SampleEditor").show();
        $("#SampleLink").hide();
    } 
```

现在我必须为更多的编辑做这件事。由于 Json 不是我真正的东西，我怎样才能为几个编辑器创建一个通用函数来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T13:44:56.680

将代码编辑为如下所示

```
 <a href="#SampleEditor" onclick="javaScript:ShowSampleEditor(this)"
                id="SampleLink">Add Sample</a>
            <div class="editor-field" id="SampleEditor" style="display: none">
                <div class="editor-label">
                    @Html.LabelFor(model => model.SampleCollectionInstructions)
                </div>
                <div class="editor-field">
                    @Html.TextAreaFor(model => model.SampleCollectionInstructions, new { @class = "adminRichText" })
                    @Html.ValidationMessageFor(model => model.SampleCollectionInstructions)
                </div>
            </div> 
```

和 javascript 到

```
function ShowSampleEditor(link) {
   $(link).next().show(); // Next element after the link is the panel
   //$(".editor-field").show(); // Use this if the element to show does not immediately follow the link
   $(link).hide();
} 
```

参见演示小提琴 - [http://jsfiddle.net/27MeG/8/](http://jsfiddle.net/27MeG/8/)

我已经概括了 javascript 函数以将点击的链接作为参数。然后这个链接被隐藏，它的下一个兄弟被显示——它应该是编辑器。

# php - IE 隐私报告，在 iframe 中阻止 cookie

> ID：13474394
> 
> 赞同：0
> 
> 时间：2012-11-20T13:34:25.300
> 
> 标签：php, internet-explorer, iframe, cookies

我在带有登录表单的站点中有一个 iframe。在 IE8 中，我无法登录该页面，因为 IE 阻止了我的 cookie。我找到了一个 php 解决方案：`<?php header(‘P3P:CP=”IDC DSP COR ADM DEVi TAIi PSA PSD IVAi IVDi CONi HIS OUR IND CNT”‘); ?>`但我不知道将这段代码放在哪里，在 iframe 中还是之后/之前？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T13:57:29.830

将其放入您的`iframe`或 .htaccess 文件中。另请参阅：[Cookie 被阻止/未保存在 Internet Explorer 的 IFRAME 中](https://stackoverflow.com/questions/389456/cookie-blocked-not-saved-in-iframe-in-internet-explorer)

# c# - Duplicate groups in ListView designer

> ID：13474398
> 
> 赞同：0
> 
> 时间：2012-11-20T13:34:46.490
> 
> 标签：c#, winforms, listview

I have a custom control derived from `ListView` (say `MyListView`). In the designer mode I define several `ListViewGroup`s in it. Unfortunately, if I later use this control on a form, whenever I open the designer for this form, it **adds** the same set of groups to the `MyListView` control. So after some editing there is a big number of duplicate groups in it.

It seems the form designer (not surprisingly) cannot recognize that the groups were already added in the `MyListView` constructor and not in the form itself, so it should not add the code to generate them in `InitializeComponent()`. Can I prevent this somehow?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T15:39:44.670

This is because you added the groups in the constructor, which also runs at design time, and their values are getting saved in the form's Designer.cs file. The constructor runs too early so you cannot see what groups will be added, later, by InitializeComponent(). And it runs too early to get a reliable indication that the code runs in design mode, the DesignMode property is still false.

The proper fix is to give the control its own designer but that is very painful, especially so for ListView. The cheap workaround is to *postpone* adding the groups and using an event that runs *after* InitializeComponent. The HandleCreated event is good for that. Like this:

```
class MyListView : ListView {
    protected override void OnHandleCreated(EventArgs e) {
        base.OnHandleCreated(e);
        if (this.DesignTime && this.Groups.Count == 0) {
            // Add the groups here
            //...
        }
    }
} 
```

# python - Django 管理员：添加到 *other* 模型中的多对多关系我的应用程序中的工具和任务之间存在多对多关系。现在，在任务模型上定义了多对多关系，因此在管理员的任务编辑页面中，我有一个 <select multiple="">控件，允许您选择 0 个或多个工具与任务关联。我知道 Django 不允许您在两个模型上定义关系，但是是否仍然可以告诉管理员在工具编辑页面上也包含一个</select> ？我希望能够从它的任一侧编辑关系。T

> ID：13474406
> 
> 赞同：1
> 
> 时间：2012-11-20T13:35:04.297
> 
> 标签：python, django, django-admin

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T13:56:22.780

像这样的东西应该可以工作（给定 m2m 在 中指定`Tool`）：

```
# 1st app
from secondapp.models import Tool

class Task(models.Model):
    tools = models.ManyToManyField(Tool, through=Tool.tasks.through)

# 2nd app
class Tool(models.Model):
    tasks = models.ManyToManyField("firstapp.Task") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T15:49:34.540

`Tools`您可以尝试在和之间创建一个`Tasks`充当中介的虚拟模型，这是 Django 通常提供的，用于存储有关特定关系的额外信息。您将`through=`在创建此`ManyToMany`关系时使用关键字来利用它。

您可以在[此处](https://docs.djangoproject.com/en/dev/topics/db/models/#intermediary-manytomany)找到详细信息。

我实际上并没有在管理页面上查看它，但我想一旦你在管理页面上注册模型，因为该模型与*每个*和都有`ForeignKey`关系，你应该能够在两者上编辑关系假人模型的侧面。*`Tools``Tasks`*

 *不过，我不一定会推荐这个，除非你能够访问双方的关系是非常必要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T15:53:50.427

我不会`through`为了让管理员看起来不错而使用或使您的模型复杂化。您也可以尝试[创建一个 admin inline](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.InlineModelAdmin)。使用内联，您可以在管理应用程序中向任何模型的屏幕添加小节。文档中有一些很好的例子。*

# javascript - 在文档加载中运行脚本

> ID：13474407
> 
> 赞同：0
> 
> 时间：2012-11-20T13:35:07.027
> 
> 标签：javascript, html

我在 jQuery 中有一个对话框，我想在文档加载时显示该对话框。但我不想将代码放入`<body onload="showdialog();">`. 我想将 javascript 放在主 div 或页脚 div 中，就像`onload`在 body 事件中一样。有什么办法可以做到这一点？

```
<body onload="$('#dialog').slideDown('slow');">
  <div id="dialog">Dialog</div>
  <footer></footer>
</body> 
```

我要这个：

```
<body>
  <div id="dialog">Dialog</div>
  <script> show dialog code in load page </script>
  <footer>
    // or this place =>
    <script> show dialog code in load page </script>
  </footer>
</body> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T13:38:07.617

你想看看 ready 函数，像这样：

```
$(document).ready(function() {
    $('#dialog').slideDown('slow');
}); 
```

# axapta - 以编程方式检查用户组

> ID：13474409
> 
> 赞同：2
> 
> 时间：2012-11-20T13:35:11.460
> 
> 标签：axapta, dynamics-ax-2009, x++

如何在 x++ 中检查用户组？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T15:03:40.280

在 AX 2009 中，关键类是 UserInfoHelp。这包含诸如 userInUserGroup 和 getUserGroups 等方法

# python - 期望在函数中产生

> ID：13474410
> 
> 赞同：2
> 
> 时间：2012-11-20T13:35:11.773
> 
> 标签：python, pexpect

当我将 pexpect.spawn 放入函数时，它似乎失败了。在下面的示例中，我希望它同时触及“/tmp/no.txt”和“/tmp/yes.txt”。它只涉及/tmp/yes.txt。我已经尝试了“import pexpect”的所有明显位置。它不会抛出错误，只是不会运行。感谢您的任何建议！

```
import pexpect
def fun():
    import pexpect
    fail = pexpect.spawn('touch /tmp/no.txt')

fun()
succeed = pexpect.spawn('touch /tmp/yes.txt')

$ ls /tmp/*.txt
/tmp/yes.txt
$ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T13:45:49.933

您需要等待命令运行：

```
import pexpect
def fun():
    #import pexpect you've already imported pexpect you don't need to import it again 
    fail = pexpect.spawn('touch /tmp/no.txt')
    fail.wait()

fun()
succeed = pexpect.spawn('touch /tmp/yes.txt')
succeed.wait() 
```

# delphi - 重载 TFormatSettings 和不兼容的类型

> ID：13474413
> 
> 赞同：3
> 
> 时间：2012-11-20T13:35:32.180
> 
> 标签：delphi, delphi-xe2

我有这个程序：

```
procedure Initialize(out FormatSettings: TFormatSettings);
const
  LongDayNamesEx : array [1..7] of string = ('Lunedì', 'Martedì', 'Mercoledì', 'Giovedì', 'Venerdì', 'Sabato', 'Domenica');
  LongMonthNamesEx : array [1..12] of string = ('Gennaio', 'Febbraio', 'Marzo', 'Aprile', 'Maggio', 'Giugno', 'Luglio', 'Agosto', 'Settembre', 'Ottobre', 'Novembre', 'Dicembre');
begin
  FormatSettings := TFormatSettings.Create;
  with FormatSettings do
  begin
    LongDayNames := LongDayNamesEx;
    LongMonthNames := LongMonthNamesEx;
  end;
end; 
```

我收到有关不兼容类型的错误（E2008）。我该如何解决这个问题？我不想使用以下内容：

```
LongDayNames[1] := 'Lunedì';
LongDayNames[2] := 'Martedì';
...
LongDayNames[7] := 'Domenica';
LongMonthNames[1] := 'Gennaio';
LongMonthNames[2] := 'Febbraio';
...
LongMonthNames[12] := 'Dicembre'; 
```

如果不是非常必要的话。感谢帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T13:41:59.683

你可以这样做：

```
type
  TDayNameArray = array[1..7] of string;
const
  LongDayNamesEx: TDayNameArray = ('Måndag', 'Tisdag', 'Onsdag', 'Torsdag',
    'Fredag', 'Lördag', 'Söndag');
var
  fs: TFormatSettings;
begin
  TDayNameArray(fs.LongDayNames) := LongDayNamesEx; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-20T14:09:24.853

Andreas 对您提出的直接问题给出了很好的回答。

采用不同的方法，我认为您可以通过在初始化对象时传递语言环境更轻松地解决您的问题。例如：

```
FormatSettings := TFormatSettings.Create('it-IT'); 
```

意大利语。然后系统将填写区域特定设置、日期名称、月份名称等。

或者您可能会使用采用区域设置 ID 的重载更合适。没关系，你肯定明白。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T19:57:15.430

要直接回答您提出的问题，显而易见的解决方案是使用 for 循环。结合记录助手和开放数组参数，使其更容易调用：

```
type
  TTFormatSettingsHelper = record helper for TFormatSettings
    procedure SetLongDayNames(const Values: array of string);
  end;

procedure TTFormatSettingsHelper.SetLongDayNames(const Values: array of string);
var
  Index: Integer;
  Value: string;
begin
  Assert(high(Values)-low(Values)
    = high(Self.LongDayNames)-low(Self.LongDayNames));

  Index := low(Self.LongDayNames);
  for Value in Values do
  begin
    Self.LongDayNames[Index] := Value;
    inc(Index);
  end;
end; 
```

然后要调用它，您只需编写：

```
FormatSettings.SetLongDayNames(['Lunedì', 'Martedì', 'Mercoledì', 'Giovedì', 
  'Venerdì', 'Sabato', 'Domenica']); 
```

# php - IMAP 附件

> ID：13474420
> 
> 赞同：1
> 
> 时间：2012-11-20T13:35:47.797
> 
> 标签：php, mysql, backup, imap

我正在用 PHP 创建一个脚本，它的工作是将 IMAP 服务器备份到 MySQL 数据库。

我现在的问题是：

如果电子邮件有附件，该附件是嵌入在电子邮件本身中还是服务器上的单独文件？

我问的原因是：

我可以将标头信息保存在 MySQL 数据库中，从而提取给定电子邮件中的附件，还是必须将附件下载到备份服务器？

亲切的问候，

弗雷德里克·克罗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T13:46:45.640

任何 attechment 都是邮件正文的一部分。它通常不会存储在与电子邮件不同的文件中。电子邮件客户端使用上述 MIME 类型拆分电子邮件正文。

您可以在[https://www.rfc-editor.org/rfc/rfc2045](https://www.rfc-editor.org/rfc/rfc2045)（以及以下 RFC）中阅读它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T15:14:47.817

IMAP 将让您拥有这两种方式。通过检查正文结构并使用部分获取，您可以单独获取它们，也可以一次获取整个电子邮件（带有嵌入的附件）。

# c# - 在 C# 中解决方法重载的优先级规则是什么？

> ID：13474428
> 
> 赞同：4
> 
> 时间：2012-11-20T13:36:21.237
> 
> 标签：c#, dynamic, overloading, overload-resolution

我正在编写一个序列化程序，我想在其中广泛使用方法重载，序列化派生自 的类型的对象`IEnumerable<T>`等等`IDictionary<K,V>`。

我还打算使用`dynamic`关键字让 CLR 根据要序列化的对象的运行时类型选择正确的重载。

看看这个代码片段：

```
void Serialize<TKey, TValue>(IDictionary<TKey, TValue> dictionary)
{
  Console.WriteLine("IDictionary<TKey, TValue>");
}

void Serialize<TKey, TValue>(IEnumerable<KeyValuePair<TKey, TValue>> items)
{
  Console.WriteLine("IEnumerable<KeyValuePair<TKey, TValue>>");
}

void Serialize<T>(IEnumerable<T> items)
{
  Console.WriteLine("IEnumerable<T>");
} 
```

我想这样做：

```
void CallSerialize(object obj)
{
   Serialize(obj as dynamic); //let the CLR resolve it at runtime.
} 
```

现在基于 的运行时类型`obj`，将调用正确的重载。例如，

```
//Test code
CallSerialize(new List<int>()); //prints IEnumerable<T> 
```

在这种情况下，调用了第三个重载，其基本原理非常简单：这只是可行的选择。

但是，如果我这样做：

```
CallSerialize(new Dictionary<int,int>()); //prints IDictionary<TKey, TValue> 
```

它调用第一个重载。我不完全明白这一点。**当所有三个重载都是可行的选项时**，为什么它会解决第一个重载？

事实上，如果我删除第一个重载，则调用第二个重载，如果我删除第一个和第二个重载，则调用第三个重载。

解决方法重载的优先规则是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-20T14:07:28.953

解决方法重载的规则将尝试选择具有最特定类型匹配的方法头。[在这里](http://msdn.microsoft.com/en-us/library/aa691336(v=vs.71).aspx)您可以阅读有关重载解决方案的更多信息，[我](http://msdn.microsoft.com/en-us/library/aa691338(v=vs.71).aspx)认为这是您的情况。

来自 MSDN：

> 给定一个具有一组参数类型 {A1, A2, ..., AN} 的参数列表 A 和两个具有参数类型 {P1, P2, ..., PN} 和 {Q1, Q2 的适用函数成员 MP 和 MQ， ..., QN}, MP 被定义为比 MQ 更好的函数成员，如果
> 
> *   对于每个参数，从 AX 到 PX 的隐式转换并不比从 AX 到 QX 的隐式转换差，并且
>     
>     
> *   对于至少一个论点，从 AX 到 PX 的转换优于从 >AX 到 QX 的转换。
>     
>     
> 
> 在执行此评估时，如果 MP 或 MQ 以其扩展形式适用，则 PX 或 QX 指的是参数列表的扩展形式中的参数。

# logging - CCNET：我能获得比日志更有意义的日志吗？ ?

> ID：13474433
> 
> 赞同：1
> 
> 时间：2012-11-20T13:36:36.640
> 
> 标签：logging, cruisecontrol.net, nant

**有意义的任务名称**如果我`View the Build Log`为我的 CCNET 项目，我可以看到类似的消息

```
<task name="echo">
  <message level="Info"><![CDATA[Done: clean]]></message>
  <duration>0</duration>
</task> 
```

或者

```
<task name="property">
  <duration>15.6247</duration>
</task> 
```

在某些情况下，我看到这些是`NANT`为我的`target`. 有没有办法配置我的 NANT 文件或我的 CC 配置，以便我从这些任务中获得更有意义、更容易识别的日志消息？

我正在使用版本：1.5.6804.1。

* * *

很高兴有：

**时间戳** 获得这些时间戳的时间戳，或者更好的，*所有事物*的时间戳也是不错的。

**构建日志转换**是否有一种简单的（例如，内置的、非从头开始的）方法可以在 Web 仪表板上获得构建日志的转换/更好的视图？（我想我可以写一个 XSL，但我很奇怪我得到一个纯 xml 视图，我错过了什么吗？）

**输出吸收**我也觉得我从任务或第 3 方可执行文件中回显的某些行在写入日志之前被 CC 解析并以某种方式剥离。CC 是否有一部分通常会做这样的事情？

**最佳实践**或者，我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T06:55:50.493

**自定义构建协议格式**
通常，您不会直接盯着构建协议，只有在调试 xsl 转换时才会将其转换为更人性化的 html。也就是说，您可以编写自己的 nant 记录器，添加`-logger:your.logger.class -logfile:mynantlog.xml`到 nant 构建参数，然后将`mynantlog.xml`文件合并到构建日志中。

**时间**
安排会很好，但目前不可能。您将不得不编写自己的记录器或`<tstamp verbose="true" />`到处撒播。

**构建日志转换**
我想说编写 XSL 比用脚本语言编写自己的转换更容易。仪表板已经在子目录中附带了一些有用的转换`xsl`，您可能会查看和调整这些转换，例如 (dashboard.config)

```
 <xslReportBuildPlugin description="NAnt Output" actionName="BuildReportNAnt"  xslFileName="xsl\NAnt.xsl"/>
  <xslReportBuildPlugin description="NAnt Timings" actionName="BuildReportNAntTimings" xslFileName="xsl\NAntTiming.xsl"/>
  <xslReportBuildPlugin description="Warning and Errors" actionName="BuildReportWE" xslFileName="xsl\compile.xsl"/> 
```

**输出吸收**
不，CC 不会过滤您的构建协议。如果您在调用另一个 NAnt 实例（使用`<exec>`or `<nant>`）时丢失了输出，请尝试更新到较新的版本，那么您的输出已经很旧了。

**最佳实践**
如果您坚持使用 CC.net 和 NAnt，请深入研究 XML、XPath 和 XSL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T20:44:16.047

有一个“内置”nant xsl“插件”。

通过仪表板转到管理，您应该可以将其打开。

至于其余的，没有内置插件可以做你正在寻找的东西（时间戳，整理输出）

我没有注意到 Nant 输出消失，或者没有进入构建日志。

# webgl - three.js 第一人称控制使物体从场景中消失

> ID：13474434
> 
> 赞同：0
> 
> 时间：2012-11-20T13:36:36.213
> 
> 标签：webgl, three.js

请查看以下 Three.js 片段 [http://jsfiddle.net/ahmedadel/GUr6y/3/](http://jsfiddle.net/ahmedadel/GUr6y/3/)，问题是对象在任何导航事件（wasd）后从场景中消失，或者如果相机连接到 FirstPersonControls，请单击

```
controls = new THREE.FirstPersonControls(camera); 
```

有什么帮助解决这个问题吗？谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T20:49:44.620

从我记得第一人称控制沿z轴看..

所以尝试改变它

```
camera.position.z = 1000 
```

到

```
camera.position.y = 1000; 
```

这意味着您将离地面1000。那个 JS fiddle 不会加载，所以我无法测试它。

虽然看起来你的立方体被渲染为 0；尝试：

```
camera.position.z = 100;
camera.position.x = -1000; 
```

然后做

```
camera.lookAt(mesh); 
```

创建多维数据集后。

# android - 修昔底德与安卓

> ID：13474438
> 
> 赞同：0
> 
> 时间：2012-11-20T13:36:47.683
> 
> 标签：android, robotium, thucydides

如果有人已经尝试使用 thucydides 进行 android 应用程序的验收测试，我很感兴趣。

例如，看起来我们可以用 Robotium 替换 WebDriver。

让我知道问题是否过于笼统。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T17:33:33.683

我没有使用修昔底德的经验，但我相信快速浏览一下你会遇到很多问题。

基本上问题是robotium在手机上运行并且需要一个叫做instrumentation的android东西来运行，你只能从扩展某些类中获得。

这不适合 webdriver 在 android 上的工作方式，这是在您的机器上运行的测试，它将命令发送到手机上的服务器。

Robotium 正在开发一个类似于 webdriver 的新版本，这将对您有所帮助，但目前它处于测试阶段并且已经有一段时间了。不过，实际上对您有帮助的是一些人在 eBay 上完成的项目：http: [//calabash-driver.github.com/](http://calabash-driver.github.com/)

这为您提供了一个类似硒的界面供您使用，并且可能会按照您的意愿工作。

# php - 将数据库信息显示到新的 Activity 类、Android、PHP、SQL

> ID：13474440
> 
> 赞同：0
> 
> 时间：2012-11-20T13:36:51.907
> 
> 标签：php, android, sql, database, android-activity

我正在开发一个具有登录和注册功能的 Android 应用程序。我从这个网站的教程和示例中得到了一个很好的开始：[http ://www.androidhive.info/2012/01/android-login-and-registration-with-php-mysql-and-sqlite/](http://www.androidhive.info/2012/01/android-login-and-registration-with-php-mysql-and-sqlite/) 但是，教程只展示了如何将数据插入数据库，例如注册，而没有展示如何在新页面中显示它们。假设我想在新活动中以 TextView 或 Button 格式显示我的登录信息，例如基于本教程的姓名和电子邮件。我应该对 mainActivity 类实现什么编码以从数据库中获取数据。我查看了其他教程，但它们的方法不同，有些将 JSONParser 和 Databasehandler 类结合在一起，有些将它们分成不同的类，比如这个。请帮助我已经尝试了很长时间，非常感谢。

这是我从我的 xml 和活动课程中得到的，请帮助我。

XML 类

```
<!-- Display user info Label -->
        <TextView
            android:id="@+id/displayInfo"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginBottom="10dip"
            android:textColor="#21dbd4"
            android:textSize="20dip" /> 
```

活动课

```
package com.example.trafficmaster;

import org.json.JSONException;
import org.json.JSONObject;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;

import com.example.trafficmaster.library.DatabaseHandler2;
import com.example.trafficmaster.library.UserFunctions;

public class HomeActivity extends Activity {

    //JSON Response node names
    private static String KEY_NAME = "name";
    private static String KEY_EMAIL = "email";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
            //Set View to home.xml
            setContentView(R.layout.home);

            TextView displayInfo = (TextView) findViewById(R.id.displayInfo);

            //connect to database
            UserFunctions userFunction = new UserFunctions();
        JSONObject json = ...................
            displayInfo.setText(............); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T14:15:24.620

请检查：
[http](http://ugirusgiarto.wordpress.com/2011/10/27/json-php-mysql-with-asynctask-progressdialog/)
://ugirusgiarto.wordpress.com/2011/10/27/json-php-mysql-with-asynctask-progressdialog/ 如果您在 AsyncTask 中进行此操作，则查询不会干扰界面。否则，界面会变“慢”。

# sql - 生成更新 SQL 以更改项目的顺序？

> ID：13474441
> 
> 赞同：1
> 
> 时间：2012-11-20T13:37:01.740
> 
> 标签：sql, sql-server, sql-server-2008

假设我有这张桌子，

```
 ID         Name       Order
======== ========  =========
 1           d          1
 2           g          2
 3           b          3
 4           f          4
 5           a          5 
```

现在，从我的 UI 用户可以通过拖放更改顺序。例如，他可以将项目 d 移动到项目 a 位置。然后我的桌子看起来像，

```
 ID         Name       Order
======== ========  =========
 2           g          1
 3           b          2
 4           f          3
 1           d          4
 5           a          5 
```

谁能告诉我SQL？我输入了 ID、OldOrder 和 NewOrder。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-20T13:42:29.693

你甚至不需要`ID`参数。

```
UPDATE
  yourTable
SET
  Order = (CASE WHEN     Order = @oldOrder THEN @newOrder
                WHEN @newOrder > @oldOrder THEN Order - 1
                                           ELSE Order + 1 END)
WHERE
     Order BETWEEN @oldOrder AND @newOrder
  OR Order BETWEEN @newOrder AND @oldOrder 
```

*   不需要更改原始位置和新位置之上或之下的任何内容。
*   其他一切都向上或向下移动一个。
*   除了原始项目，移动到新位置。

# ruby-on-rails - 独角兽服务器重启失败

> ID：13474442
> 
> 赞同：1
> 
> 时间：2012-11-20T13:37:14.463
> 
> 标签：ruby-on-rails, deployment, unicorn

当我将新的 gem 添加到我的应用程序代码中并尝试部署它时，我的独角兽无法重新启动。日志文件显示由于未初始化的常量，工作进程无法启动。例如上次我有这个：

```
I, [2012-11-20T13:01:03.969130 #26750]  INFO -- : executing ["/srv/tutti/shared/bundle/ruby/1.9.1/bin/unicorn", "-D", "-c", "/srv/tutti/shared/config/unicorn.rb", "-E", "production", {10=>#<Kgio::UNIXServer:fd 10>}] (in /srv/tutti/releases/20121120125618)
I, [2012-11-20T13:01:03.969539 #26750]  INFO -- : forked child re-executing...
I, [2012-11-20T13:01:05.056841 #26750]  INFO -- : inherited addr=/tmp/unicorn.tutti.sock fd=10
I, [2012-11-20T13:01:05.057480 #26750]  INFO -- : Refreshing Gem list
/srv/tutti/releases/20121120125618/config/initializers/simple_form.rb:2:in `<top (required)>': uninitialized constant SimpleForm (NameError)
<...>
E, [2012-11-20T13:01:09.947747 #21381] ERROR -- : reaped #<Process::Status: pid 26750 exit 1> exec()-ed 
```

我有`gem "simple_form"`，`/srv/tutti/releases/20121120125618/Gemfile`如果我停止并开始而不是发送 USR2，它可以正常工作。

文件：

*   [配置/独角兽.rb](https://gist.github.com/4117920)
*   [独角兽初始化](https://gist.github.com/4117958)

顺便说一句，删除`preload_app true`和发送 HUP 信号也有一些问题。

# jquery - 使用 Rails 和 JSON 的 Select2

> ID：13474443
> 
> 赞同：4
> 
> 时间：2012-11-20T13:37:14.463
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3, json, jquery-select2

我正在尝试将 select2 与我的 rails 应用程序一起使用，但无法在我的视图中显示结果。我在 chrome 控制台中看到了正确的 json，但无法在下拉列表中显示结果...

请你帮助我好吗 ？

谢谢 ：

控制器：

```
def friends
  if params[:term]
    @users = User.where{ ( (first_name =~ my{"%#{params[:term]}%"}) | (last_name =~ my{"%#{params[:term]}%"}) | ( ((first_name.op('||', ' ')).op('||',last_name)) =~ my{"%#{params[:term]}%"}) | ( ((last_name.op('||', ' ')).op('||',first_name)) =~ my{"%#{params[:term]}%"}) ) & ( adult==false ) }
  end
  respond_to do |format|  
    format.html
    format.json { render :json =>{:results => @users.to_json(only: [:id, :first_name, :last_name]) }}
  end
end 
```

我的 Javascript ：

```
$("#teen_search").select2({
  placeholder: "Search for a teen",
  minimumInputLength: 2,
  ajax: {
    url: "/friends.json",
    dataType:'json',
    data: function (search, page) {
      return {
        term: search, // search term
        page_limit: 10,
      };
    },

    results: function (data, page) {
      return data;
    }
  },
  dropdownCssClass: "bigdrop"
}); 
```

我无法弄清楚出了什么问题，谢谢您的帮助

我刚刚编辑了控制器 render_to json 和 js 中的结果以修复 chrome 控制台中的错误，我知道我很接近但仍然无法让我的用户 first_name 和 last_name 显示在字段中......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T13:29:48.313

所以我最终这样做了：

用户控制器：

```
def friends
if params[:term]
    @users = User.where{ ( (first_name =~ my{"%#{params[:term]}%"}) | (last_name =~ my{"%#{params[:term]}%"}) | ( ((first_name.op('||', ' ')).op('||',last_name)) =~ my{"%#{params[:term]}%"}) | ( ((last_name.op('||', ' ')).op('||',first_name)) =~ my{"%#{params[:term]}%"}) ) & ( adult==false ) }.select("id,first_name,last_name,avatar,uid")
    @user = @users.paginate(:page => params[:page], :per_page => params[:page_limit])
end
respond_to do |format|  
    format.html
    format.json { 
      render :json => {
        :users => @user,
        :total => @users.count,
        :links => { :self => @user.current_page , :next => @user.next_page}
    } 
  }
end
end 
```

在 JS 脚本中：

```
 $(document).ready(function() {
    $("#teens_select2").select2({
        placeholder: "Search for a teen",
        minimumInputLength: 1,
        ajax: {
            url: "/friends.json",
            dataType: 'json',
            quietMillis: 300,
            data: function (search, page) {
                return {
                    term: search,
                    page_limit: 10,
                    page: page,
                };
            },
            results: function (data, page) {
            var more = (page * 10) < data.total;                
              return {results: data.users, more: more};
            }
        },
        formatResult: movieFormatResult,
        formatSelection: movieFormatSelection, 
        dropdownCssClass: "bigdrop" // apply css that makes the dropdown taller
    });
}); 
```

在加载脚本之前， formatResult 和 formatSelection 也是这样配置的：

```
 function movieFormatResult(user) {
    var markup = "<table class='movie-result'><tr>";
    if ( user.uid !== null) {
         markup += "<td class='movie-image'><img src='" + user.avatar + "'/></td>";
    }
    else if (user.uid == null) {
        var gravatar = user.avatar + 40
         markup += "<td class='movie-image'><img src='" + gravatar + "'/></td>";
     }

    markup += "<td class='movie-info'><div class='movie-title'>" + user.first_name +' '+ user.last_name + "</div>";

    markup += "</td></tr></table>"
    return markup;
}

function movieFormatSelection(user) {
    return (user.first_name + ' ' + user.last_name);
} 
```

而在视图中：

```
<input type ="hidden" id="teens_select2"></input> 
```

我真的希望它有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T14:40:46.220

只需在 dataType 属性中将 'jsonp' 更改为 'json' 即可。

# javascript - 文本区域转置

> ID：13474448
> 
> 赞同：2
> 
> 时间：2012-11-20T13:37:46.663
> 
> 标签：javascript, arrays, transpose

我是一个初学者，我找到了一些有用的例子来说明我想做的事情。问题是我发现的示例没有足够的评论让我理解发生了什么。所以，我希望有人可以帮助我将我找到的代码实现到我已经拥有的代码中。我正在制作一个文本操作区域来玩密文。这一切都在一个 HTML 文本区域内完成。我有一个名为 的函数`"function G_Group(size, count)"`，它将文本分成选择的行和列，效果很好。我要添加的下一个工具会将这个矩阵从 (x,y) 转置到 (y,x)。因为我有“功能G-Group”功能，我不相信我需要切片任何东西。[我在http://rosettacode](http://rosettacode.org/wiki/Matrix_transposition#JavaScript)找到了一些 JavaScript 转置代码。 但我不知道如何更改值以将其添加到我已经拥有的值中。

函数 G_Group(size, count) 是这样调用的。

```
<input type= button value="Grouping" onclick = "return G_Group(0, 0)" title="grouping" /> 
```

这是我如何将文本分成行和列：

```
function G_Group(size, count)
{
   if (size <= 0)
   {
      size = document.encoder.group_size.value;
      if (size <= 0)                 
      {
         alert('Invalid group size'); 
     return false;
      }
   }
   if (count <= 0)
   {
      count = document.encoder.group_count.value;
      if (count <= 0)             
      {
         alert('Invalid group count');
     return false;
      }
   }

   var t = document.encoder.text.value;
   var o = '', groups = 0;
   t = Tr(t, " \r\n\t");
   while (t.length > 0)
   {
      if (o.length > 0)
      {
         o += ' ';
      }
      if (groups >= count)
      {
         o += "\n";
     groups = 0;
      }
      groups ++;
      o += t.slice(0, size);
      t = t.slice(size, t.length);
   }
   document.encoder.text.value = o;
   return false;
} 
```

这是我要修改以转置数组的代码。

```
function Matrix(ary) {

    this.mtx = ary
    this.height = ary.length;
    this.width = ary[0].length;
}

Matrix.prototype.toString = function() {
    var s = []
    for (var i = 0; i < this.mtx.length; i++) 
        s.push( this.mtx[i].join(",") );
    return s.join("\n");
}

// returns a new matrix
Matrix.prototype.transpose = function() {
    var transposed = [];
    for (var i = 0; i < this.width; i++) {
        transposed[i] = [];
        for (var j = 0; j < this.height; j++) {
            transposed[i][j] = this.mtx[j][i];
        }
    }
    return new Matrix(transposed);
} 
```

我知道我可能正在接近这一切都是错误的。而且我知道我的问题是非常基本的，我有点不好意思问这些简单的问题。请原谅我。我今年 43 岁，20 年前在大学里学过 c 编程。我很擅长 HTML 和 CSS，但我在很多方面都缺乏。希望有人可以帮助我。谢谢。

# java - 将jsp页面链接到java类

> ID：13474455
> 
> 赞同：0
> 
> 时间：2012-11-20T13:38:04.923
> 
> 标签：java, jsp

我在jsp中编写了一个hello world程序，现在我正在尝试通过JSP处理表单。

我的 jsp 表单（GetName.jsp）看起来像这样

```
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>JSP Page</title>
    </head>
    <body>

<FORM METHOD=POST ACTION="SaveName.jsp">
Name <INPUT TYPE=TEXT NAME=username SIZE=20><BR>
Email <INPUT TYPE=TEXT NAME=email SIZE=20><BR>
Age <INPUT TYPE=TEXT NAME=age SIZE=4>
<P><INPUT TYPE=SUBMIT>
</FORM>
</BODY>
</HTML>
    </body>
</html> 
```

同样，SaveName.jsp 看起来像这样

```
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>JSP Page</title>
    </head>
    <body>

        <jsp:useBean id="userData" class="javabeans.UserData" scope="session"/>
<jsp:setProperty name="userData" property="*"/> 

</BODY>
</HTML>
    </body>
</html> 
```

在名为 javabeans 的包中的同一个项目中，名为 UserData 的类看起来像这样。

```
package javabeans;

public class UserData {

    String username;
    String email;
    int age;

    public void setUsername( String value )
    {
        username = value;
    }

    public void setEmail( String value )
    {
        email = value;
    }

    public void setAge( int value )
    {
        age = value;
    }

    public String getUsername() { return username; }

    public String getEmail() { return email; }

    public int getAge() { return age; }

} 
```

现在当运行 GetName.jsp 我得到以下错误

```
D:\javaworkspace\Netbeans7-2\HelloWeb\build\generated\src\org\apache\jsp\SaveName_jsp.java:56: cannot find symbol
symbol  : class UserData
location: class org.apache.jsp.SaveName_jsp
      UserData user = null;
      ^
D:\javaworkspace\Netbeans7-2\HelloWeb\build\generated\src\org\apache\jsp\SaveName_jsp.java:58: cannot find symbol
symbol  : class UserData
location: class org.apache.jsp.SaveName_jsp
        user = (UserData) _jspx_page_context.getAttribute("user", PageContext.SESSION_SCOPE);
D:\javaworkspace\Netbeans7-2\HelloWeb\build\generated\src\org\apache\jsp\SaveName_jsp.java:60: cannot find symbol
symbol  : class UserData
location: class org.apache.jsp.SaveName_jsp
          user = new UserData();
3 errors
D:\javaworkspace\Netbeans7-2\HelloWeb\nbproject\build-impl.xml:930: The following error occurred while executing this line:
D:\javaworkspace\Netbeans7-2\HelloWeb\nbproject\build-impl.xml:284: Compile failed; see the compiler error output for details.
BUILD FAILED (total time: 2 seconds) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T13:41:21.670

您需要`UserData`在 SaveName.jsp 中导入类

将此添加到 SaveName.jsp 中 jsp 代码的顶部

```
<%@ page import="javabeans.UserData" %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T14:29:49.280

我不确定你想在这里实现什么，但我可以给你关于 jsp servlet 的简单想法

首先你可以创建一个简单的jsp程序。它将询问用户姓名和电子邮件 ID，并在表单操作中将其重定向到 abc servlet。

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"  
pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" 
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
    <title> My first JSP   </title>
</head> 
<body>      
    <form action="abc">         
         Please enter a name <br>
        <input type="text" name="name"size="20px">
                     Please enter an email <br>
        <input type="text" name="email"size="20px">
        <input type="submit"     value="submit">                        
    </form>     
</body> 
</html> 
```

然后创建“abc” servlet 将此代码放在您的 servlet 中。它将从 jsp 页面获取值并显示它。

```
import java.io.IOException;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import java.io.PrintWriter;

public class abc extends HttpServlet { 
protected void doGet(HttpServletRequest request, 
  HttpServletResponse response) throws ServletException, IOException 
  {
// reading the user input
String name= request.getParameter("name");    
String email= request.getParameter("email");    
String msg="I'm"+name+"id is"+email;
PrintWriter out = response.getWriter();
out.println (
  "<!DOCTYPE html PUBLIC \"-//W3C//DTD HTML 4.01 Transitional//EN\" 
      \"http://www.w3.org/TR/html4/loose.dtd\">\n" +
  "<html> \n" +
    "<head> \n" +
      "<meta http-equiv=\"Content-Type\" content=\"text/html; 
        charset=ISO-8859-1\"> \n" +
      "<title> Hi </title> \n" +
    "</head> \n" +
    "<body> \n" +
    msg +
      "</font> \n" +
    "</body> \n" +
  "</html>" 
        );  
   }  
 } 
```

在 "web.xml" 中定义您的 servlet。您需要在 web.xml 文件中进行 servlet 映射。

```
 <servlet>
<servlet-name>abc</servlet-name>
<servlet-class>abc</servlet-class>
   </servlet>
   <servlet-mapping>
<servlet-name>abc</servlet-name>
<url-pattern>/abc</url-pattern>
  </servlet-mapping> 
```

# java - Spring/JPA/Hibernate 持久化实体：什么都没有发生

> ID：13474458
> 
> 赞同：5
> 
> 时间：2012-11-20T13:38:09.937
> 
> 标签：java, spring, hibernate, jpa-2.0

我正在尝试使用 Spring 3、JPA 2 和 Hibernate 3 创建一个应用程序。当你坚持一个实体时我遇到了一个问题：什么也没有发生！数据不插入数据库，不执行查询。但是当我使用像 query.getResultList() 这样的请求时，选择可以正常工作。

所以我认为我的问题只是在持久化/更新和事务管理器上，但我对 spring 不太好。你能帮我吗 ？

这是我的配置文件：

> ## 我的 applicationContext.xml

```
 <jee:jndi-lookup id="soireeentreamis_DS" jndi-name="jdbc/soireeentreamis" />

    <bean id="persistenceUnitManager"
        class="org.springframework.orm.jpa.persistenceunit.DefaultPersistenceUnitManager">
        <property name="persistenceXmlLocations">
            <list>
                <value>classpath*:META-INF/persistence.xml</value>
            </list>
        </property>
        <property name="defaultDataSource" ref="soireeentreamis_DS" />
        <property name="dataSources">
            <map>
                <entry key="soireeentreamisDS" value-ref="soireeentreamis_DS" />
            </map>
        </property>
    </bean>

    <bean id="entityManagerFactory"
        class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
        <property name="persistenceUnitManager" ref="persistenceUnitManager" />
        <property name="persistenceUnitName" value="soireeentreamisPU" />
        <property name="jpaDialect">
            <bean class="org.springframework.orm.jpa.vendor.HibernateJpaDialect" />
        </property>
        <property name="jpaVendorAdapter">
            <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
                <property name="showSql" value="false" />
            </bean>
        </property>
    </bean>

    <bean id="soireeentreamisTransactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
        <property name="entityManagerFactory" ref="entityManagerFactory" />
        <property name="jpaDialect">
            <bean class="org.springframework.orm.jpa.vendor.HibernateJpaDialect" />
        </property>
    </bean>

    <tx:annotation-driven transaction-manager="soireeentreamisTransactionManager" />

    <context:annotation-config />
</beans> 
```

> ## 我的persistence.xml

```
 <persistence-unit name="soireeentreamisPU"
        transaction-type="RESOURCE_LOCAL">
        <provider>org.hibernate.ejb.HibernatePersistence</provider>
        <non-jta-data-source>soireeentreamisDS</non-jta-data-source>
        <properties>
            <property name="hibernate.dialect" value="org.hibernate.dialect.MySQLDialect" />
            <property name="hibernate.hbm2ddl.auto" value="create"/>
        </properties>
    </persistence-unit> 
```

> ## 我的服务
> 
> ```
> @Service
> @Transactional("soireeentreamisTransactionManager")
> public class UserServiceImpl implements UserService ... 
> ```
> 
> ## 我的道
> 
> ```
> @Repository
> public class UserDaoImpl extends GenericDaoImpl<User, String> implements
>         UserDao {  
> @PersistenceContext(unitName = "soireeentreamisPU")
> private EntityManager em;   
> public void persist(final User entity) {
>         em.persist(entity);
>     }
> } 
> ```

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T23:00:32.937

不久前我发现了类似的问题。在我的情况下，我需要在我的 dispacher-servlet.xml 中添加以下行。所以我在 2 个地方需要这个（applicationContex.xml 和 dispacher-servlet.xml）

```
<tx:annotation-driven /> 
```

为了清除一些东西，您没有向您的服务方法显示“存储”对象，但我相信它已用 @Transactional 注释 - 因为没有这个您想要创建新事务。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T14:45:24.423

这最近发生在我身上。问题是正如您所说的事务性问题，将@Transactional 注释添加到更新数据库的所有方法中。然后将[CGLIB](http://cglib.sourceforge.net/)库添加到您的 calsspath 或将其添加到您的 pom.xml，如果您使用的是 Maven，这是 spring make 事务所必需的。即使我以不同的方式做到这一点，我希望它可以帮助你。这是我的 db.xml，其中包含所有与数据库相关的 spring 配置。

```
<!-- Scans within the base package of the application for @Components to configure as beans -->

<context:property-placeholder location="classpath:db.properties"/>

<bean id="entityManagerFactory"
    class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="jpaVendorAdapter">
        <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
            <property name="showSql" value="true" />
            <property name="generateDdl" value="true" />
            <property name="databasePlatform" value="${db.dialect}" />
        </bean>
    </property>
</bean>

<bean id="dataSource" class="com.jolbox.bonecp.BoneCPDataSource"
    destroy-method="close">
    <property name="driverClass" value="${db.driver}" />
    <property name="jdbcUrl" value="${db.url}" />
    <property name="username" value="${db.username}" />
    <property name="password" value="${db.password}" />
    <property name="idleConnectionTestPeriodInMinutes" value="1" />
    <property name="idleMaxAgeInMinutes" value="4" />
    <property name="maxConnectionsPerPartition" value="30" />
    <property name="minConnectionsPerPartition" value="10" />
    <property name="partitionCount" value="3" />
    <property name="acquireIncrement" value="5" />
    <property name="statementsCacheSize" value="100" />
    <property name="releaseHelperThreads" value="3" />
</bean>

<bean id="jpaDialect" class="org.springframework.orm.jpa.vendor.HibernateJpaDialect"/>

<bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
    <property name="entityManagerFactory" ref="entityManagerFactory"/>
    <property name="jpaDialect" ref="jpaDialect"/>
</bean>

<tx:annotation-driven transaction-manager="transactionManager"/>

<bean
    class="org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor" /> 
```

这是我的persistence.xml

```
<persistence version="2.0"
xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">

<persistence-unit name="pu-app" transaction-type="RESOURCE_LOCAL">

</persistence-unit> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T13:54:29.607

您需要将模型对象添加到 persistence.xml 文件中。在提供者元素正下方添加

```
<class>com.your.domain.object.User</class> 
```

# java - 小程序如何成为模态并防止 IE9 窗口关闭？

> ID：13474460
> 
> 赞同：4
> 
> 时间：2012-11-20T13:38:09.880
> 
> 标签：java, swing, dialog, internet-explorer-9, modality

我有一个显示应用程序模式对话框的 JAVA 小程序。我遇到的问题是用户可以关闭浏览器（或选项卡）并且对话框将保持打开状态。如果您单击 IE9 窗口区域或菜单栏，对话框会显示为模态，但是当您单击选项卡或窗口的“x”按钮时，IE9 对对话框不是模态的。我尝试了各种形式的模态，但似乎都没有使整个窗口和对话框成为模态。我尝试在小程序中使用窗口侦听器，但它似乎没有收到关闭消息。如果您以这种方式关闭窗口，java 进程将无法正常关闭，您必须通过任务管理器将其杀死。我不记得 IE8 发生过这种情况。有什么办法可以让整个 IE9 窗口和我的对话框成为模态的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T15:26:49.257

Prior to raising the java modal, could you communicate back out to the page via liveconnect javascript call, setting a function to window.onclose that either sets focus back on the applet or prompts the user via browser confirm or alert?

Upon closing/dismissal of the applet dialog, you could clear the browser window.onclose function pointer.

Hope this helps,

-Scott H

# iphone - Facebook：获取上传照片的网址

> ID：13474462
> 
> 赞同：0
> 
> 时间：2012-11-20T13:38:19.800
> 
> 标签：iphone, ios, facebook-graph-api

我正在开发一个 Iphone 应用程序，我正在使用 facebook sdk 在用户的墙上发帖。我需要创建一个带有文字和图片的帖子。

首先，我使用以下方法将图片上传到用户的个人资料：

```
//image to post is the UIImage I am uploading
NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                               [self imageToPost], @"picture"   

[FBRequestConnection startWithGraphPath:@"me/photos" parameters:params HTTPMethod:@"POST" completionHandler:^(FBRequestConnection *connection, id result, NSError *error) {
} 
```

这是正确的。`result`我得到的格式如下：

```
{
    id = 101586254325716;
    "post_id" = "100004123442691_101551541234190";
} 
```

现在我想在用户墙上发布一个提要，其中包含一个文本和上传的图像。

```
//self.facebookStatus is the text I want to post
//imageURL is the url of the image

NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
              self.facebookStatus, @"message",  
              imageURL, @"picture",
              nil];
[FBRequestConnection startWithGraphPath:@"me/feed" parameters:params HTTPMethod:@"POST" completionHandler:^(FBRequestConnection *connection, id result, NSError *error) {
} 
```

**问题：**

我不知道`imageURL`应该是什么。我尝试使用`id`or`post_id`我得到的结果，但它不起作用。我也试过`www.facebook.com/101586254325716`但也没有用。

如何获取我上传的图片的 url 以便将其添加到墙上的帖子中？

谢谢

PS：如果有人有其他方式或提示在用户墙上发帖，来自 iphone 的文字 + 图片那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T14:36:56.673

在您用于发布图像的 params 字典中，添加另一个对象，如下所示：

```
[params setObject:self.facebookStatus forKey:@"message"]; 
```

这应该足以发布图片和文字

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T14:40:58.130

事实证明，我必须使用`object_attachment`参数并将其设置为照片 ID 而不是`picture`参数。

将它留在这里以防有人遇到同样的问题

# php - 使用 PHP 将 SWF 转换为 PDF

> ID：13474463
> 
> 赞同：0
> 
> 时间：2012-11-20T13:38:20.973
> 
> 标签：php, pdf, flash

> **可能重复：**
> [使用 php 将 swf 转换为 pdf](https://stackoverflow.com/questions/1006291/swf-to-pdf-using-php)

我是一只新蜜蜂，正面临挑战。任何人都可以告诉我是否可以使用 php 将 swf 转换为 pdf。此外，如果某个机构有任何关于此的代码，这对我来说将是一个真正的帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T19:08:12.757

我为此使用 CutyCapt。它采用 HTML 并将其呈现为 PDF/PNG/等。如果安装了 Flash，它还将呈现嵌入在 HTML 中的任何 Flash。你需要：

*   CutyCapt - [http://cutycapt.sourceforge.net/](http://cutycapt.sourceforge.net/)
*   X11 + xvfb/xvfb-run (headless X11) - 如果你的发行版不支持，这里是 xvfb-run：[https ://github.com/revnode/xvfb-run](https://github.com/revnode/xvfb-run)
*   Flash插件

代码：

```
$input = '/home/test/test.swf';
$output = '/home/test/test.pdf';

$html_file = '/tmp/' . uniqid('flash') . '.html';
$fh = fopen($html_file, 'w');

// some basic HTML to embed the flash
$html = <<<EOT
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<style type="text/css">
body, html {
    margin: 0;
    padding: 0;
}
</style>
</head>
<body>
<object width="1000" height="600" type="application/x-shockwave-flash" data="file://{$input}">
<param name="allowscriptaccess" value="always" />
<param name="allownetworking" value="always" />
<param name="wmode" value="transparent" />
</object>
</body>
</html>
EOT;

fwrite($fh, $html);
fclose($fh);

exec("xvfb-run --server-args=\"-screen 0, 1024x768x24\" CutyCapt --plugins=on --out-format=pdf --delay=500 --url=\"{$html_file}\" --out={$output}");

// cleanup
unlink($html_file); 
```

# c# - 在数据网格索引超出范围异常

> ID：13474466
> 
> 赞同：0
> 
> 时间：2012-11-20T13:38:33.313
> 
> 标签：c#, winforms, datagrid

在使用 C# 的数据网格中，从表单应用程序更新 sqlite 时出现索引超出范围异常。

> 找不到表 0

下面是我的代码

```
SQLiteConnection connection4 = new SQLiteConnection
         (@"Data Source = C:\APTRABuilder.sqlite;Version =3");
connection4.Open();

string sql2 = "Update table set language1= '" 
                 + textBoxUpdate1.Text + "' where language2 = '" 
                 + textBox_Search.Text + "'";

SQLiteDataAdapter connect4 = new SQLiteDataAdapter(sql2, connection4);
DataSet ds4 = new DataSet();
connect4.Fill(ds4);
dataGridView.DataSource = ds4.Tables[0]; 
```

我进入的错误`dataGridView.DataSource = ds4.Tables[0];`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T14:05:02.370

`DataSet`因为 SQL 正在执行 UPDATE 而不是 SELECT，所以没有表，因此没有要返回的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T14:11:18.473

您需要查看为您的数据适配器创建一个 UPDATE 命令。

您还需要了解如何使用参数添加值。

在这种情况下，您需要更新 DataAdapter，而不是尝试填充 DataAdapter。当您填充 DataAdapter 时，您正在填充适配器。为此，您使用 SELECT 命令。这两种方法完全不同。

下面的本指南将帮助您更好地了解数据适配器：-

[http://msdn.microsoft.com/en-us/library/33y2221y.aspx](http://msdn.microsoft.com/en-us/library/33y2221y.aspx)

祝你好运。

# javascript - jquery 从父级引用这个

> ID：13474468
> 
> 赞同：3
> 
> 时间：2012-11-20T13:38:38.053
> 
> 标签：javascript, jquery

谷歌在试图找到这个问题的答案时没有帮助！:(

如何`this.colour`在这样的 jQuery 函数中正确地从父对象引用：

```
var obj = {
 colour: 'blue',
 do: function() {
  $.getJSON('getcolour.php', function(resp) {
    if (resp.colour == this.colour) { //<== this.colour doesnt = blue
     //match
    }
  });
 }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T13:41:15.700

您在这里有两个选择：

1）使用临时变量来存储对象的引用：

```
do: function() {
  var self = this;
  $.getJSON('getcolour.php', function(resp) {
    if (resp.colour == self.colour) { ... }
  });
}; 
```

如果您选择这种方式，您可以在处理程序中轻松获得“本地`this`”（作为 getJSON 处理程序上下文对象）和“对象”。`this`但是，当然，您必须定义该临时变量。`self`是通常为此目的选择的最常见的名称之一，但它实际上可以是任何可用的标识符 - 只要它不与其他变量的名称重叠）。

2）使用为此正确的功能：[$.proxy](http://api.jquery.com/jQuery.proxy/)

```
do: function() {
  $.getJSON('getcolour.php', $.proxy(function(resp) {
    if (resp.colour == this.colour) { ... }
  }, this));
}; 
```

使用这种方法，您已经替换了处理程序的上下文对象 - 它现在指向`this`（作为定义`do`函数的对象）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-20T13:40:59.337

您需要获取对调用`this` *外部*`$.getJSON`的引用：

```
do: function() {
    var self = this;
    $.getJSON('getcolour.php', function(resp) {
        if (resp.colour === self.colour) {  // use "self"
            // ...
        }
    });
} 
```

或者，在 ES5 浏览器上，用于`.bind`将内部回调的上下文设置为`this`：

```
do: function() {
    $.getJSON('getcolour.php', function(resp) {
        if (resp.colour === this.colour) {
            // ...
        }
    }).bind(this);  // set the callback's context
} 
```

jQuery的`$.proxy()`功能也可以在早期的浏览器上使用，达到同样的效果。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-20T13:41:23.707

`this`您试图引用的 被引用回调中的上下文的 a所遮蔽`this`。`getJSON`使用不同的变量名。

```
do: function() {
    var self = this;
    $.getJSON('getcolour.php', function(resp) {
        if (resp.colour == self.colour) { //<== this.colour doesnt = blue
         //match
        }
    });
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-20T13:41:32.867

试试下面，我认为在你的代码中**这**指的是 ajax 范围

```
var obj = {
 colour: 'blue',
 do: function() {
  var myObj=this;
  $.getJSON('getcolour.php', function(resp) {
   if (resp.colour == myObj.colour) { //<== this.colour doesnt = blue
 //match
}
 });
}
} 
```

# java - 使用 Selenium WebDriver 进行 PrimeFaces 文件上传测试

> ID：13474471
> 
> 赞同：3
> 
> 时间：2012-11-20T13:38:45.820
> 
> 标签：java, jsf, file-upload, primefaces, selenium-webdriver

我已经 使用 webElement.sendKeys() 方法成功测试了 fileUploadSimple [http://www.primefaces.org/showcase/ui/fileUploadSimple.jsf 。](http://www.primefaces.org/showcase/ui/fileUploadSimple.jsf)它不适用于自动上传

有没有办法用 Selenium WebDriver测试 PrimeFaces fileUploadAuto [http://www.primefaces.org/showcase/ui/fileUploadAuto.jsf ？](http://www.primefaces.org/showcase/ui/fileUploadAuto.jsf)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-03-13T08:40:58.143

我也有喜欢你的发展。我将分享我的知识，但可能有更好的方法。

服务端的jsf代码

```
<h:form id="lifeProposalEntryForm" enctype="multipart/form-data">
    <p:fileUpload fileUploadListener="#{AddNewLifeProposalActionBean.handleProposalAttachment}"  
            mode="advanced" multiple="true" sizeLimit="3000000" update="customerEntryPanel attachmentDataList"
            allowTypes="/(\.|\/)(gif|jpe?g|png)$/" id="proposalAttachment"/>    
</h:form> 
```

客户端的html代码

```
<div id="lifeProposalEntryForm:proposalAttachment" class="ui-fileupload ui-widget">
    <div class="ui-fileupload-buttonbar ui-widget-header ui-corner-top">
        <span class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-left ui-fileupload-choose" role="button">
            <span class="ui-button-icon-left ui-icon ui-c ui-icon-plusthick"></span>
            <span class="ui-button-text ui-c">Choose</span>
            <input id="lifeProposalEntryForm:proposalAttachment_input" type="file" multiple="multiple" name="lifeProposalEntryForm:proposalAttachment_input">
        </span>
        <button class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-left ui-fileupload-upload" type="button" role="button">
            <span class="ui-button-icon-left ui-icon ui-c ui-icon-arrowreturnthick-1-n"></span>
            <span class="ui-button-text ui-c">Upload</span>
        </button>
        <button class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-left ui-fileupload-cancel" type="button" role="button">
            <span class="ui-button-icon-left ui-icon ui-c ui-icon-cancel"></span>
            <span class="ui-button-text ui-c">Cancel</span>
        </button>
    </div>
...... 
```

*   `lifeProposalEntryForm:proposalAttachment_input`检索by的元素`id`。
*   放置/发送密钥文件（一个或多个文件）
*   检索的元素`second button`。`<div id="lifeProposalEntryForm:proposalAttachment"`
*   单击按钮元素。

java中的Selinium测试

```
webElement = driver.findElement(By.id("lifeProposalEntryForm:proposalAttachment_input"));
webElement.sendKeys("C:\\temp\\life\\life_1.jpg");
webElement = driver.findElement(By.xpath("//input[@type='file'and @id='lifeProposalEntryForm:proposalAttachment_input']"));
webElement= driver.findElement(By.xpath(".//*[@id='lifeProposalEntryForm:proposalAttachment']/div[1]/button[1]"));
webElement.click(); 
```

试试我提到的。这对我来说是工作。

# javascript - 如何在不通过 HTTP 加载图像的情况下在 HTML 中显示“重新加载”符号？

> ID：13474472
> 
> 赞同：57
> 
> 时间：2012-11-20T13:38:54.363
> 
> 标签：javascript, html, css, image, unicode

我想在我正在创建的 HTML/JavaScript 应用程序中显示“刷新”符号，但我不想发出任何 HTTP 请求来加载图像。我怎样才能在所有主要浏览器中可靠地做到这一点？

我能找到的最接近的 Unicode 值是：↺ ( `&#8634;`)，但箭头指向错误的方向。

是否有另一个有效的 Unicode 值？

是否有有效的 Webdings 字体？（它们通常不适用于 Opera 和 Firefox。）

有没有办法使用该 JS 中的字符串提供的*base64 图像源*在 JavaScript 中创建图像？

编辑：

原因不是开销。正在创建的应用程序必须自包含在单个 javascript 文件中，没有任何其他依赖项。它是一种开发实用程序，可以添加到任何项目中，无需网络。

* * *

## 回答 #1

> 赞同：120
> 
> 时间：2012-11-20T14:06:19.620

如果您发现字符`&#8635;`(↻)，即 U+21BB CLOCKWISE OPEN CIRCLE ARROW，可以满足您的需要（其箭头的放置方式可能与常见的重新加载图标不同），那么您可以相当安全地使用它：

```
.reload {
  font-family: Lucida Sans Unicode
}
```

```
<span class=reload>&#x21bb;</span>
```

Lucida Sans Unicode 字体包含该符号，并且它几乎可以在您现在可以找到的任何 Windows 系统中使用。根据[MS info](http://www.microsoft.com/typography/fonts/font.aspx?FMID=1263)，它甚至包含在 Windows 98（和 Windows 95 plus）中。

可以合理地期望 Windows 以外的系统具有某种字体的符号，并且具有知道如何从其中*一些字体中获取它的浏览器。*[包含它的字体](http://www.fileformat.info/info/unicode/char/21bb/fontsupport.htm)具有相当相似的形状。（但如果符号需要在风格上与文档文本匹配，则需要更详细地研究情况并尝试确保字体列表或“字体堆栈”中的所有字体都包含它。）

* * *

## 回答 #2

> 赞同：61
> 
> 时间：2013-04-10T00:04:19.560

# Unicode 字符

至少有两个 Unicode 字符可以用作*刷新*或*重新加载*图标：

*   顺时针间隙圆箭头
    U+27F3
    ⟳</li>
*   顺时针开圆箭头
    U+21BB
    ↻</li>

第一个不会出现在 iOS 7 或 8 或 9 的 Safari 或 Chrome 中。因此，鉴于此，并给出[Paul D. White 的答案](https://stackoverflow.com/a/13474585/642706)，我建议使用第二个[CLOCKWISE OPEN CIRCLE ARROW](http://www.fileformat.info/info/unicode/char/21BB/index.htm)。

提示：如果您是 Mac 用户，请获取免费应用程序[UnicodeChecker](http://earthlingsoft.net/UnicodeChecker/)。您可以按名称搜索字符，并且可以看到包含该字符字形的字体列表（在您的特定 Mac 上）。

# 图标字体

一些字体是用可缩放的基于矢量的图标代替常规字符字形创建的。

*   [字体真棒](https://fortawesome.github.io/Font-Awesome/)，请参阅：[fa-repeat](https://fortawesome.github.io/Font-Awesome/icon/repeat)
*   [Vaadin 字体图标](https://vaadin.com/font-icons/about)

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2012-11-20T13:44:39.283

如果浏览器支持从 Base64 字符串加载图像数据，您可以使用`img`并将其设置`src`为以下格式：

```
data:[<mediatype>][;base64],<data> 
```

例子：

```
var img = document.getElementById("yourImage");
img.src = "data:image/gif;base64,R0lGODlhEAAOALMAAOazToeHh0tLS/7LZv/0jvb29t/f3//Ub//ge8WSLf/rhf/3kdbW1mxsbP//mf///yH5BAAAAAAALAAAAAAQAA4AAARe8L1Ekyky67QZ1hLnjM5UUde0ECwLJoExKcppV0aCcGCmTIHEIUEqjgaORCMxIC6e0CcguWw6aFjsVMkkIr7g77ZKPJjPZqIyd7sJAgVGoEGv2xsBxqNgYPj/gAwXEQA7";
```

```
<img id="yourImage" />
```

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2012-11-20T13:45:04.653

与您的 Unicode 字符等效的顺时针方向是`&#8635;`, ↻ （尽管正如[David C. Bishop](https://stackoverflow.com/users/187237/david-c-bishop)在评论中指出的那样，[Chromebook 使用`#27f2`, ⟳</a>）。](http://xahlee.info/comp/unicode_computing_symbols.html)

[](http://xahlee.info/comp/unicode_computing_symbols.html)

[~~使用文本字符是一种选择，但 Windows XP 可能不显示该字符（取决于您使用的字符和显示它的字体）。~~](http://xahlee.info/comp/unicode_computing_symbols.html) [@Jukka K. Korpela 注意到这个字符包含在 Lucida Sans Unicode 字体中，因此即使在 Windows XP 中它也应该可以正常工作。](https://stackoverflow.com/a/13474939/20578)

就 Wingdings 字体而言，为避免 HTTP 请求，您需要确信相关字体将安装在最终用户的计算机上。我认为没有通用的跨平台 Wingdings 字体（不过我可能完全错了）。

您确实可以使用 JavaScript 从包含图像的 base64 编码表示的字符串创建图像。你可以这样做：

```
var image = new Image();
image.src = 'data:image/gif;base64,' + BASE64_ENCODED_STRING; // Replace gif with whatever image format it actually is 
```

不过，data-uri 在 Internet Explorer 8 和更早版本中可能无法很好地工作，Windows XP 用户可能会被卡住。（而且你实际上并不需要 JavaScript：你可以在你的页面中放置一个带有该属性的`<img>`标签。）`src`

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2016-03-07T00:52:25.133

**Unicode 6 字符**

'顺时针向下和向上打开圆形箭头' (U+1F503)

可悲的是，字形的字体支持不是最好的，所以“所有主要浏览器”可能是一个延伸...... :-/

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2019-01-02T13:08:56.143

```
.refresh {
  display: inline-block;
  transform: rotate(90deg);
}
```

```
<span>↻&lt;/span>
<hr>
<span class="refresh">↻&lt;/span>
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-11-20T13:57:36.013

您提到“所有主要浏览器”，所以让我们假设：

1.  不是每个人都有 javascript
2.  不是每个人都可以嵌入字体（黑莓等）
3.  不是每个人都支持所有 UNCODE 表示（Windows XP）
4.  不是每个人都支持内联数据 uri (IE7-)

那么还剩下什么？我建议使用符合 HTML1 的`IMG`元素，它也会在首次加载后被缓存：

```
<img src="/refresh.gif" alt="refresh"> 
```

它可以在我所知道的每一个浏览器中运行，除了 LYNX 和其他纯文本浏览器。但他们会改为显示“刷新”，所以没关系。

如果您真的想避免对“现代”浏览器的额外 2 字节请求，您可以对 IE7 使用条件注释：

```
<!--[if lte IE 7]>
<img src="refresh.gif" alt="refresh">
<![endif]--> 
```

其余的都是这样的：

```
<img src="data:image/gif;base64,..." alt="refresh"> 
```

如果您想要最新的东西，您可以使用 CSS 框阴影（[演示](http://jsfiddle.net/RFyXq/)）：

```
.refresh{
    border-radius: 0;
    display: inline-block;
    width: 1px;
    height: 1px;
    box-shadow: 0px 0px rgba(0,0,0,0),0px 1px rgba(0,0,0,0),0px 2px rgba(0,0,0,0),0px 3px rgba(0,0,0,0),0px 4px rgba(0,0,0,0),0px 5px rgba(0,0,0,0),0px 6px rgba(0,0,0,0),0px 7px rgba(0,0,0,0),0px 8px rgba(0,0,0,0),0px 9px rgba(0,0,0,0),0px 10px rgba(0,0,0,0),0px 11px rgba(0,0,0,0),0px 12px rgba(0,0,0,0),0px 13px rgba(0,0,0,0),0px 14px rgba(0,0,0,0),0px 15px rgba(0,0,0,0),1px 0px rgba(0,0,0,0),1px 1px rgba(0,0,0,0),1px 2px rgba(0,0,0,0),1px 3px rgba(0,0,0,0),1px 4px rgba(0,0,0,0),1px 5px rgba(0,0,0,0),1px 6px rgba(0,0,0,0),1px 7px rgba(0,0,0,0),1px 8px rgba(0,0,0,0),1px 9px rgba(0,0,0,0),1px 10px rgba(0,0,0,0),1px 11px rgba(0,0,0,0),1px 12px rgba(0,0,0,0),1px 13px rgba(0,0,0,0),1px 14px rgba(0,0,0,0),1px 15px rgba(0,0,0,0),2px 0px rgba(0,0,0,0),2px 1px rgba(0,0,0,0),2px 2px rgba(0,0,0,0),2px 3px rgba(0,0,0,0),2px 4px rgba(0,0,0,0),2px 5px rgba(0,0,0,0.06),2px 6px rgba(0,0,0,0.55),2px 7px rgba(0,0,0,0.79),2px 8px rgba(0,0,0,0.86),2px 9px rgba(0,0,0,0.86),2px 10px rgba(0,0,0,0.65),2px 11px rgba(0,0,0,0.31),2px 12px rgba(0,0,0,0),2px 13px rgba(0,0,0,0),2px 14px rgba(0,0,0,0),2px 15px rgba(0,0,0,0),3px 0px rgba(0,0,0,0),3px 1px rgba(0,0,0,0),3px 2px rgba(0,0,0,0),3px 3px rgba(0,0,0,0),3px 4px rgba(0,0,0,0.25),3px 5px rgba(0,0,0,0.83),3px 6px rgba(0,0,0,0.86),3px 7px rgba(0,0,0,0.83),3px 8px rgba(0,0,0,0.69),3px 9px rgba(0,0,0,0.74),3px 10px rgba(0,0,0,0.86),3px 11px rgba(0,0,0,0.86),3px 12px rgba(0,0,0,0.6),3px 13px rgba(0,0,0,0.06),3px 14px rgba(0,0,0,0),3px 15px rgba(0,0,0,0),4px 0px rgba(0,0,0,0),4px 1px rgba(0,0,0,0),4px 2px rgba(0,0,0,0),4px 3px rgba(0,0,0,0.25),4px 4px rgba(0,0,0,0.83),4px 5px rgba(0,0,0,0.83),4px 6px rgba(0,0,0,0.43),4px 7px rgba(0,0,0,0),4px 8px rgba(0,0,0,0),4px 9px rgba(0,0,0,0),4px 10px rgba(0,0,0,0.13),4px 11px rgba(0,0,0,0.69),4px 12px rgba(0,0,0,0.86),4px 13px rgba(0,0,0,0.6),4px 14px rgba(0,0,0,0),4px 15px rgba(0,0,0,0),5px 0px rgba(0,0,0,0),5px 1px rgba(0,0,0,0),5px 2px rgba(0,0,0,0),5px 3px rgba(0,0,0,0.69),5px 4px rgba(0,0,0,0.86),5px 5px rgba(0,0,0,0.25),5px 6px rgba(0,0,0,0),5px 7px rgba(0,0,0,0),5px 8px rgba(0,0,0,0),5px 9px rgba(0,0,0,0),5px 10px rgba(0,0,0,0),5px 11px rgba(0,0,0,0),5px 12px rgba(0,0,0,0.69),5px 13px rgba(0,0,0,0.86),5px 14px rgba(0,0,0,0.25),5px 15px rgba(0,0,0,0),6px 0px rgba(0,0,0,0),6px 1px rgba(0,0,0,0),6px 2px rgba(0,0,0,0.13),6px 3px rgba(0,0,0,0.86),6px 4px rgba(0,0,0,0.6),6px 5px rgba(0,0,0,0),6px 6px rgba(0,0,0,0),6px 7px rgba(0,0,0,0),6px 8px rgba(0,0,0,0),6px 9px rgba(0,0,0,0),6px 10px rgba(0,0,0,0),6px 11px rgba(0,0,0,0),6px 12px rgba(0,0,0,0.13),6px 13px rgba(0,0,0,0.86),6px 14px rgba(0,0,0,0.65),6px 15px rgba(0,0,0,0),7px 0px rgba(0,0,0,0),7px 1px rgba(0,0,0,0),7px 2px rgba(0,0,0,0.43),7px 3px rgba(0,0,0,0.86),7px 4px rgba(0,0,0,0.31),7px 5px rgba(0,0,0,0),7px 6px rgba(0,0,0,0),7px 7px rgba(0,0,0,0),7px 8px rgba(0,0,0,0),7px 9px rgba(0,0,0,0),7px 10px rgba(0,0,0,0),7px 11px rgba(0,0,0,0),7px 12px rgba(0,0,0,0),7px 13px rgba(0,0,0,0.75),7px 14px rgba(0,0,0,0.83),7px 15px rgba(0,0,0,0),8px 0px rgba(0,0,0,0),8px 1px rgba(0,0,0,0.43),8px 2px rgba(0,0,0,0.69),8px 3px rgba(0,0,0,0.86),8px 4px rgba(0,0,0,0.6),8px 5px rgba(0,0,0,0.31),8px 6px rgba(0,0,0,0),8px 7px rgba(0,0,0,0),8px 8px rgba(0,0,0,0),8px 9px rgba(0,0,0,0),8px 10px rgba(0,0,0,0),8px 11px rgba(0,0,0,0),8px 12px rgba(0,0,0,0),8px 13px rgba(0,0,0,0.69),8px 14px rgba(0,0,0,0.86),8px 15px rgba(0,0,0,0),9px 0px rgba(0,0,0,0),9px 1px rgba(0,0,0,0.48),9px 2px rgba(0,0,0,0.86),9px 3px rgba(0,0,0,0.86),9px 4px rgba(0,0,0,0.86),9px 5px rgba(0,0,0,0.13),9px 6px rgba(0,0,0,0),9px 7px rgba(0,0,0,0),9px 8px rgba(0,0,0,0),9px 9px rgba(0,0,0,0),9px 10px rgba(0,0,0,0),9px 11px rgba(0,0,0,0),9px 12px rgba(0,0,0,0),9px 13px rgba(0,0,0,0.75),9px 14px rgba(0,0,0,0.83),9px 15px rgba(0,0,0,0),10px 0px rgba(0,0,0,0),10px 1px rgba(0,0,0,0),10px 2px rgba(0,0,0,0.79),10px 3px rgba(0,0,0,0.86),10px 4px rgba(0,0,0,0.6),10px 5px rgba(0,0,0,0),10px 6px rgba(0,0,0,0),10px 7px rgba(0,0,0,0),10px 8px rgba(0,0,0,0),10px 9px rgba(0,0,0,0),10px 10px rgba(0,0,0,0),10px 11px rgba(0,0,0,0),10px 12px rgba(0,0,0,0.13),10px 13px rgba(0,0,0,0.86),10px 14px rgba(0,0,0,0.65),10px 15px rgba(0,0,0,0),11px 0px rgba(0,0,0,0),11px 1px rgba(0,0,0,0),11px 2px rgba(0,0,0,0.38),11px 3px rgba(0,0,0,0.83),11px 4px rgba(0,0,0,0.06),11px 5px rgba(0,0,0,0),11px 6px rgba(0,0,0,0),11px 7px rgba(0,0,0,0),11px 8px rgba(0,0,0,0),11px 9px rgba(0,0,0,0),11px 10px rgba(0,0,0,0),11px 11px rgba(0,0,0,0),11px 12px rgba(0,0,0,0.69),11px 13px rgba(0,0,0,0.86),11px 14px rgba(0,0,0,0.25),11px 15px rgba(0,0,0,0),12px 0px rgba(0,0,0,0),12px 1px rgba(0,0,0,0),12px 2px rgba(0,0,0,0),12px 3px rgba(0,0,0,0.31),12px 4px rgba(0,0,0,0),12px 5px rgba(0,0,0,0),12px 6px rgba(0,0,0,0.25),12px 7px rgba(0,0,0,0),12px 8px rgba(0,0,0,0),12px 9px rgba(0,0,0,0),12px 10px rgba(0,0,0,0.13),12px 11px rgba(0,0,0,0.69),12px 12px rgba(0,0,0,0.86),12px 13px rgba(0,0,0,0.6),12px 14px rgba(0,0,0,0),12px 15px rgba(0,0,0,0),13px 0px rgba(0,0,0,0),13px 1px rgba(0,0,0,0),13px 2px rgba(0,0,0,0),13px 3px rgba(0,0,0,0),13px 4px rgba(0,0,0,0),13px 5px rgba(0,0,0,0.06),13px 6px rgba(0,0,0,0.83),13px 7px rgba(0,0,0,0.83),13px 8px rgba(0,0,0,0.69),13px 9px rgba(0,0,0,0.75),13px 10px rgba(0,0,0,0.86),13px 11px rgba(0,0,0,0.86),13px 12px rgba(0,0,0,0.6),13px 13px rgba(0,0,0,0.06),13px 14px rgba(0,0,0,0),13px 15px rgba(0,0,0,0),14px 0px rgba(0,0,0,0),14px 1px rgba(0,0,0,0),14px 2px rgba(0,0,0,0),14px 3px rgba(0,0,0,0),14px 4px rgba(0,0,0,0),14px 5px rgba(0,0,0,0.13),14px 6px rgba(0,0,0,0.55),14px 7px rgba(0,0,0,0.79),14px 8px rgba(0,0,0,0.86),14px 9px rgba(0,0,0,0.86),14px 10px rgba(0,0,0,0.65),14px 11px rgba(0,0,0,0.31),14px 12px rgba(0,0,0,0),14px 13px rgba(0,0,0,0),14px 14px rgba(0,0,0,0),14px 15px rgba(0,0,0,0),15px 0px rgba(0,0,0,0),15px 1px rgba(0,0,0,0),15px 2px rgba(0,0,0,0),15px 3px rgba(0,0,0,0),15px 4px rgba(0,0,0,0),15px 5px rgba(0,0,0,0),15px 6px rgba(0,0,0,0),15px 7px rgba(0,0,0,0),15px 8px rgba(0,0,0,0),15px 9px rgba(0,0,0,0),15px 10px rgba(0,0,0,0),15px 11px rgba(0,0,0,0),15px 12px rgba(0,0,0,0),15px 13px rgba(0,0,0,0),15px 14px rgba(0,0,0,0),15px 15px rgba(0,0,0,0);
} 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2020-11-12T06:26:59.310

我认为这个图标会对你有所帮助。

 ****编码**

```
 - HTML Entity (decimal)    &#128472;
 - HTML Entity (hex)    &#x1f5d8; 
```**

# matlab - Matlab NaN 和 Inf 问题

> ID：13474473
> 
> 赞同：2
> 
> 时间：2012-11-20T13:38:58.500
> 
> 标签：matlab, nan, infinity

所以，我在 Matlab 中实现了 EM 算法，但我的矩阵很快就被`NaN`和`Inf`值污染了。我认为这可能是由矩阵求逆引起的，但我不确定这是唯一的原因。

这是代码：

```
function [F, Q, R, x_T, P_T] = em_algo(y, G)
    % y_t = G_t'*x_t + v_t    1*1 = 1*p p*1
    % x_t = F*x_t-1 + w_t     p*1 = p*p p*1
    % G is T*p
    p = size(G,2); % p = nb assets ; G = T*p
    q = size(y,2); % q = nb observations ; y = T*q
    T = size(y,1); % y is T*1
    F = eye(p); % = Transition matrix  p*p 
    Q = eye(p); % innovation (v) covariance matrix p*p
    R = eye(q); % noise (w) covariance matrix q x q
    x_T_old = zeros(p,T);
    mu0 = zeros(p,1);
    Sigma = eye(p); % Initial state covariance matrix p*p
    converged = 0;
    i = 0;
    max_iter = 60; % only for testing purposes
    while ~converged
        if i > max_iter
            break;
        end
        % E step = smoothing
        fprintf('Iteration %d\n',i);
        [x_T,P_T,P_Tm2] = smoother(G,F,Q,R,mu0,Sigma,y);
        %x_T

        % M step 
        A = zeros(p,p);
        B = zeros(p,p);
        C = zeros(p,p);
        R = eye(q);

        for t = 2:T % eq (9) in EM paper
            A = A + (P_T(:,:,t-1) + (x_T(:,t-1)*x_T(:,t-1)'));
        end

        for t = 2:T % eq (10)
            %B = B + (P_Tm2(:,:,t-1) + (x_T(:,t)*x_T(:,t-1)'));
            B = B + (P_Tm2(:,:,t) + (x_T(:,t)*x_T(:,t-1)'));
        end

        for t = 1:T %eq (11)
            C = C + (P_T(:,:,t) + (x_T(:,t)*x_T(:,t)'));
        end    

        F = B*inv(A); %eq (12)
        Q = (1/T)*(C - (B*inv(A)*B')); % eq (13)  pxp 

        for t = 1:T
            bias = y(t) - (G(t,:)*x_T(:,t));
            R = R + ((bias*bias') + (G(t,:)*P_T(:,:,t)*G(t,:)'));
        end
        R = (1/T)*R;

        if i>1            
            err = norm(x_T-x_T_old)/norm(x_T_old);
            if err < 1e-4
                converged = 1;
            end            
        end  
        x_T_old = x_T;
        i = i+1;
    end
    fprintf('EM algorithm iterated %d times\n',i);
end 
```

这会迭代直到收敛（由于我的问题而从未发生过）并`smoother.m`在每次迭代时调用：

```
function [x_T, P_T, P_Tm2] = smoother(G,F,Q,R,mu0,Sigma,y)
    % G is T*p
    p = size(mu0,1); % mu0 is p*1
    T = size(y,1); % y is T*1
    J = zeros(p,p,T);
    K = zeros(p,T); % gain matrix
    x = zeros(p,T);
    x(:,1) = mu0;
    x_m1 = zeros(p,T);
    x_T = zeros(p,T); % x values when we know all the data
    % Notation : x = xt given t ; x_m1 = xt given t-1 (m1 stands for minus
    % one)
    P = zeros(p,p,T);% array of cov(xt|y1...yt), eq (6) in Shumway & Stoffer 1982
    P(:,:,1) = Sigma;
    P_m1 = zeros(p,p,T); % Same notation ; = cov(xt, xt-1|y1...yt) , eq (7)
    P_T = zeros(p,p,T);
    P_Tm2 = zeros(p,p,T); % cov(xT, xT-1|y1...yT)

    for t = 2:T %starts at t = 2 because at each time t we need info about t-1
        x_m1(:,t) = F*x(:,t-1); % eq A3 ; pxp * px1 = px1
        P_m1(:,:,t) = (F*P(:,:,t-1)*F') + Q; % A4 ; pxp * pxp = pxp

        if nnz(isnan(P_m1(:,:,t)))
            error('NaNs in P_m1 at time t = %d',t);
        end
        if nnz(isinf(P_m1(:,:,t)))
            error('Infs in P_m1 at time t = %d',t);
        end

        K(:,t) = P_m1(:,:,t)*G(t,:)'*pinv((G(t,:)*P_m1(:,:,t)*G(t,:)') + R); %A5 ; pxp * px1 * 1*1 = p*1
        %K(:,t) = P_m1(:,:,t)*G(t,:)'/((G(t,:)*P_m1(:,:,t)*G(t,:)') + R); %A5 ; pxp * px1 * 1*1 = p*1

        % The matrix inversion seems to generate NaN values which quickly
        % contaminate all the other matrices. There is no warning about
        % (close to) singular matrices or whatever. The use of pinv()
        % instead of inv() seems to solve the problem... but I don't think
        % it's the appropriate way to deal with it, there must be something
        % wrong elsewhere

        if nnz(isnan(K(:,t)))
            error('NaNs in K at time t = %d',t);
        end

        x(:,t) = x_m1(:,t) + (K(:,t)*(y(t)-(G(t,:)*x_m1(:,t)))); %A6
        P(:,:,t) = P_m1(:,:,t) - (K(:,t)*G(t,:)*P_m1(:,:,t)); %A7
    end

    x_T(:,T) = x(:,T);
    P_T(:,:,T) = P(:,:,T);

    for t = T:-1:2 % we stop at 2 since we need to use t-1
        %P_m1 seem to get really huge (x10^22...), might lead to "Inf"
        %values which in turn might screw pinv()

        %% inv() caused NaN value to appear, pinv seems to solve the issue

        J(:,:,t-1) = P(:,:,t-1)*F'*pinv(P_m1(:,:,t)); % A8 pxp * pxp * pxp  
        %J(:,:,t-1) = P(:,:,t-1)*F'/(P_m1(:,:,t)); % A8 pxp * pxp * pxp  
        x_T(:,t-1) = x(:,t-1) + J(:,:,t-1)*(x_T(:,t)-(F*x(:,t-1))); %A9  % Becomes NaN during 8th iteration!
        P_T(:,:,t-1) = P(:,:,t-1) + J(:,:,t-1)*(P_T(:,:,t)-P_m1(:,:,t))*J(:,:,t-1)'; %A10

        nans = [nnz(isnan(J)) nnz(isnan(P_m1)) nnz(isnan(F)) nnz(isnan(x_T)) nnz(isnan(x_m1))];  
        if nnz(nans)
            error('NaN invasion at time t = %d',t);
        end
    end

    P_Tm2(:,:,T) = (eye(p) - K(:,T)*G(T,:))*F*P(:,:,T-1); % %A12

    for t = T:-1:3 % stop at 3 because use of t-2
       P_Tm2(:,:,t-1) = P_m1(:,:,t-1)*J(:,:,t-2)' + J(:,:,t-1)*(P_Tm2(:,:,t)-F*P(:,:,t-1))*J(:,:,t-2)'; % A11
    end
end 
```

`NaN`s 和s在第 8^次迭代`Inf`左右开始出现。

我想在某个地方我正在用我的矩阵做一些不圣洁的事情，但我真的不知道出了什么问题。我相信你的专业知识。

在此先感谢您的帮助。

* * *

罗迪：这是我生成数据的方式（它还不是“真实世界”数据，只是生成了一些测试数据以检查是否有任何问题）：

```
T = 500;
nbassets = 3;
G = .1 + randn(T,nbassets); % random walk trajectories
y = (1:T).';
y = 1.01.^y; % 1 * T % Exponential 1% returns curve 
```

丹：你说得对。我确实缺乏数学背景来真正理解公式是如何得出的。我知道这没有帮助，但我不确定我是否能暂时解决这个问题。：/

* * *

罗迪：是的，我也得出了同样的结论。但我真的不知道是什么让它出了问题。

这是论文的链接：http: [//www.stat.pitt.edu/stoffer/em.pdf](http://www.stat.pitt.edu/stoffer/em.pdf)

平滑器的公式都在最后，在附录中。感谢您到目前为止的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T11:05:43.240

由于用户似乎已将答案插入到他的问题中，因此我将在此处发布：

正如@Rody 所提到的，问题的原因是使用`inv`创建的`NaN`或`Inf`值。

用户通过使用“解决”了这个问题`pinv`。

# iphone - 如何在 iPhone mapview 中实现行车方向

> ID：13474476
> 
> 赞同：0
> 
> 时间：2012-11-20T13:39:10.543
> 
> 标签：iphone

我想在我的原生 iOS 应用中实现行车路线，如下图所示：

![行车方向](../Images/0cdb2a9e1a3a1b044e2d7c371ca56138.png)

有没有人有示例源代码/示例应用程序的链接，这些链接已经在本机 iPhone 应用程序中实现了驱动方向，或者任何人都可以给我任何想法来轻松实现它？

谢谢。

# ios - iOS 开发者可以获得哪些类型的个人数据？

> ID：13474477
> 
> 赞同：0
> 
> 时间：2012-11-20T13:39:14.840
> 
> 标签：ios, privacy

我将在我的 iPad 和 iPhone（iOS 6.0.1 上的两个设备）上使用一些应用程序。我将在应用程序中操作的数据通过应用程序开发人员拥有的云进行同步。

潜在地，开发人员可以将我的个人数据与他放入云中的数据联系起来。

问：应用程序开发人员可以使用 iOS SDK 的已记录和未记录的功能获取有关设备所有者的哪些个人信息？

例如： - Apple id - 电话号码 - 卡号 - 电子邮件 - 名字/姓氏等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T13:45:55.380

您所能得到的只是设备的标识符。您可以获得电话号码，但您的应用程序将被拒绝。所以简而言之，你所能做的就是向用户询问他的个人数据（或从通讯录中选择他的联系人）——没有自动获取这些数据的方法。

您所能获得的只是较少的个人信息，例如设备的 IP 地址、设备类型等。

# three.js - Three.js, Macintosh Display 3D 模型

> ID：13474479
> 
> 赞同：0
> 
> 时间：2012-11-20T13:39:25.120
> 
> 标签：three.js

我在 Blender 中创建了一个 3D 模型。我使用导出器和 convert_obj_three.py 导出它（两者都导出正常，但没有在浏览器中显示，代码如下）。

我从这里使用了 html/js 下面的代码：

[http://dev.opera.com/articles/view/porting-3d-graphics-to-the-web-webgl-intro-part-2/](http://dev.opera.com/articles/view/porting-3d-graphics-to-the-web-webgl-intro-part-2/)

该站点的原始演示/任何其他 three.js 示例在 Firefox（Mac OS X 10.6.8，AMD Radeon HD 6490M）中运行良好。

所有其他浏览器似乎都有问题。

有趣的是，如果我运行一个简单的：

python -m SimpleHTTPServer 8888

从任何示例目录并想通过 Firefox 查看它，它也不起作用/渲染。

我总是得到背景颜色和文本，但没有渲染。

并且所有需要的三个 .js 都在同一个目录中。

我错过了什么还是这只是随机的？

如何显示一个可以由用户旋转的简单 3D 模型？这段代码正确吗？

谢谢。

```
<!doctype html>
<html lang="en">
    <head>
        <title>WebGL made easy</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
        <style>
            body {
                background:#fff;
                padding:0;
                margin:0;
                overflow:hidden;
                font-family:'trebuchet ms', 'lucida grande', 'lucida sans unicode', arial, helvetica, sans-serif;
                text-align:center;
            }
            canvas { pointer-events:none; z-index:10; }

            p { font-size: small;}

        </style>
    </head>

<body>
    <script src="Three.js"></script>
    <script src="Detector.js"></script>
    <script src="RequestAnimationFrame.js"></script>

            <script>
            if ( ! Detector.webgl ) Detector.addGetWebGLMessage();

            var SCREEN_WIDTH = window.innerWidth;
            var SCREEN_HEIGHT = window.innerHeight;
            var FLOOR = 0;

            var container;

            var camera, scene;
            var webglRenderer;

            var zmesh, geometry;

            var mouseX = 0, mouseY = 0;

            var windowHalfX = window.innerWidth / 2;
            var windowHalfY = window.innerHeight / 2;

            document.addEventListener( 'mousemove', onDocumentMouseMove, false );

            init();
            animate();

            function init() {

                container = document.createElement( 'div' );
                document.body.appendChild( container );

                // camera
                camera = new THREE.PerspectiveCamera( 75, SCREEN_WIDTH / SCREEN_HEIGHT, 1, 100000 );
                camera.position.z = 75;

                //scene
                scene = new THREE.Scene();

                // lights
                var ambient = new THREE.AmbientLight( 0xffffff );
                scene.add( ambient );

                // more lights
                var directionalLight = new THREE.DirectionalLight( 0xffeedd );
                directionalLight.position.set( 0, -70, 100 ).normalize();
                scene.add( directionalLight );

                // renderer
                webglRenderer = new THREE.WebGLRenderer();
                webglRenderer.setSize( SCREEN_WIDTH, SCREEN_HEIGHT );
                webglRenderer.domElement.style.position = "relative";
                container.appendChild( webglRenderer.domElement );

                // loader
                var loader = new THREE.JSONLoader(),
                callbackModel   = function( geometry ) { createScene( geometry,  90, FLOOR, -50, 105 ) };
                loader.load( { model: "mymodel.js", callback: callbackModel } );
            }

            function createScene( geometry, x, y, z, b ) {

                zmesh = new THREE.Mesh( geometry, new THREE.MeshFaceMaterial() );
                zmesh.position.set( 0, 16, 0 );
                zmesh.scale.set( 1, 1, 1 );
                scene.add( zmesh );
            }

            function onDocumentMouseMove(event) {

                mouseX = ( event.clientX - windowHalfX );
                mouseY = ( event.clientY - windowHalfY );
            }

            function animate() {

                requestAnimationFrame( animate );
                render();
            }

            function render() {

                zmesh.rotation.set(-mouseY/500 + 1, -mouseX/200, 0);

                webglRenderer.render( scene, camera );
            }
</script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-29T13:51:23.043

我已经测试了您的代码，问题在于您的加载程序回调功能。试试这个：

```
var loader = new THREE.JSONLoader(),
    callbackModel = function(geometry, materials) { createScene( geometry, materials, 90, FLOOR, -50, 105 ) };
loader.load( "cubeHelper.js", callbackModel ); 
```

注意`materials`参数的添加，当然还有添加`materials`到 createScene 的函数参数，如下所示：

```
function createScene( geometry, materials, x, y, z, b ) {
    zmesh = new THREE.Mesh( geometry, new THREE.MeshBasicMaterial( {color: 0xff0000 } ) );
    zmesh.position.set( 0, 16, 0 );
    zmesh.scale.set( 1, 1, 1 );
    scene.add( zmesh );
} 
```

请注意，我更改`MeshFaceMaterial`为`MeshBasicMaterial`这是因为 MeshFaceMaterial 需要和类似的材料数组进入 createScene，因此当您准备好时，您可以从传入的材料创建`materials`并在该点应用。但这会让你继续前进。

# gwt - 从 JSNI 链接到 GWT 实例方法不会自动绑定“this”

> ID：13474483
> 
> 赞同：1
> 
> 时间：2012-11-20T13:39:33.023
> 
> 标签：gwt, jsni

我将把它作为错误报告提交，但我想检查这里是否有人能看出我正在做的事情有什么问题。

当您通过 JSNI 从 GWT 类公开实例方法时，`this`在 JavaScript 中将按预期工作。由于我们正在交叉编译 Java，因此我希望`this`自动绑定到实例。例如：

```
package com.test;
class Foo {

    public void instanceFunction() {
        this.otherFunction() // will cause an error when called from JSNI!
    }

    public void otherFunction() {
        // does some stuff
    }

    public native JavaScriptObject getInstanceFunction() /*-{
        return this.@com.test.Foo::instanceFunction();
    }-*/;

} 
```

目前的解决方法是自己绑定函数（不是很便携）：

```
 public native JavaScriptObject getInstanceFunction() /*-{
        return this.@com.test.Foo::instanceFunction().bind(this);
    }-*/; 
```

这也可以看作是偏好，有些人可能更喜欢功能保持未绑定。我会说当前的功能是不直观且不必要的。我无法想象`this`在 Java 代码中直接使用 unbound 的用例。此外，一些浏览器没有实现`bind(1)`，所以我的解决方法并不可靠。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T14:01:28.137

如果你想要一个便携式`bind`的，它很简单：

```
var that = this;
return $entry(function() {
   return that.@com.test.Foo::instanceFunction()();
}); 
```

# c++ - 这个字符串的范围是什么？

> ID：13474486
> 
> 赞同：2
> 
> 时间：2012-11-20T13:39:52.383
> 
> 标签：c++, c++builder, c++builder-xe

如果我有以下代码：

```
{
    UnicodeString sFish = L"FISH";
    char *szFish = AnsiString(sFish).c_str();

    CallFunc(szFish);
} 
```

那么临时`AnsiString`创建的范围是什么，`szFish`指向有效数据的时间是多久？它仍然对该`CallFunc`功能有效吗？

它的范围会只持续一行，还是持续整个块？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T13:42:52.833

`szFish`在调用 之前是无效的`CallFunc()`，因为`AnsiString`它是一个临时对象，它立即被破坏并`szFish`指向其刚刚被删除的内部缓冲区。

确保该`AnsiString`实例对 的调用有效`CallFunc()`。例如：

```
CallFunc(AnsiString(sFish).c_str()); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-20T13:43:08.270

我会替换：

```
char *szFish = AnsiString(sFish).c_str(); 
```

和：

```
AnsiString as(sFish);
char *szFish = as.c_str(); 
```

我不知道这个`AnsiString`类，但在你的代码中，它的析构函数会在你调用之前触发`CallFunc()`，并且很可能会释放你指向的字符串`*szFish`。当您用堆栈上的“命名”对象替换临时对象时，它的生命周期将延长到定义它的块的末尾。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-20T13:55:10.653

C++11 标准 $12.2.3 说：

> 当实现引入具有非平凡构造函数（12.1、12.8）的类的临时对象时，它应确保为临时对象调用构造函数。类似地，应该使用非平凡的析构函数（12.4）调用析构函数。**临时对象被销毁作为评估完整表达式（1.9）的最后一步，该完整表达式（在词法上）包含它们被创建的点。**即使评估以抛出异常结束也是如此。销毁临时对象的值计算和副作用仅与完整表达式相关联，与任何特定子表达式无关。

^(（强调我的）)

对此还有其他警告，但它们不适用于这种情况。在您的情况下，完整的表达式是此语句的指示部分：

```
char *szFish = AnsiString(sFish).c_str();
//             ^^^^^^^^^^^^^^^^^^^^^^^^^ 
```

因此，在分配瞬间`szFish`，您的临时对象（即`AnsiString(sFish)`）的析构函数将被调用，并且其内部内存表示（`c_str()`指向的位置）将被释放。因此，`szFish`将立即成为一个悬空指针并且任何访问都将失败。

你可以通过说

```
CallFunc(AnsiString(sFish).c_str()); 
```

相反，就像这里一样，临时将在*完整*表达式之后（即，就在`;`）被销毁（再次），并且`CallFunc`能够读取原始字符串。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-20T13:47:16.873

在这种情况下， 的范围`AnsiString`是“从调用到 之前`c_str()`，直到之后”。

这样想可能会有所帮助：

```
char *szFish; 

{ 
    AnsiString tmpString(sFish); 
    szFish = tmpString.c_str(); 
} 
```

# oauth - Facebook SDK：如何使用旧令牌更正初始化 FBSessionTokenCachingStrategy？

> ID：13474488
> 
> 赞同：0
> 
> 时间：2012-11-20T13:39:59.890
> 
> 标签：oauth, access-token, facebook-ios-sdk

如何正确初始化`FBSessionTokenCachingStrategy`？

我有：（`facebook-ios-sdk`不是新的，而是 3.0）。

另外，我有一个 iOS 项目，必须在 iOS 5 下运行。*

我有一个麻烦：

如果必须重新打开（未打开），如何更正初始化会话？

我有一个来自上次会话的**令牌**，我想用这个令牌登录。

但为此我需要创建一个`FBSessionTokenCachingStrategy`实例。

这个怎么做？

感谢帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T12:04:49.693

正如我之前所说，我需要这个来创建会话并打开它。

让我们看看，我想要什么：

1.  从我的服务器加载**TOKEN 。**（以及有关用户的其他信息）。
2.  创建会话
3.  公开课

笔记：

可能是 FBSessionTokenCachingStrategy 实例未保存在设备上。

我需要创建它。

这是我的算法：（代码稍后发布）

1.  从我的服务器加载**TOKEN**、**expireDate**、**userID 。**
2.  手动创建 FBSessionTokenCachingStrategy 实例，在它的设置字典中输入所有字段，在第一步加载和（！）权限（它在我的应用程序中预定义）。
3.  初始化会话。
4.  开会。

成功！

# php - Magento 缩短模块的 URL / 使用 .htaccess 重写

> ID：13474491
> 
> 赞同：1
> 
> 时间：2012-11-20T13:40:05.710
> 
> 标签：php, apache, .htaccess, magento, url-rewriting

在 Magento 上，模块的 URL 结构如下所示：

```
example.com/[index.php]/:module/:controller/:action/:param1[/:paramN ...] 
```

我创建了一个画廊模块。图库包含多个专辑，每个专辑的 URL 如下所示（遵循 Magento URL 结构）：

```
example.com/[index.php]/gallery/controller/view/name/:album_name 
```

但我希望画廊上每张专辑的网址是这样的：

```
example.com/[index.php]/gallery/:album_name 
```

我怎样才能做到这一点？我已经尝试过 .htaccess 重写规则，但似乎我弄错了，它不起作用。这是我的 Magento .htaccess 重写规则副本

```
<IfModule mod_rewrite.c>
    ## enable rewrites
    Options +FollowSymLinks
    RewriteEngine on

    ## workaround for HTTP authorization
    ## in CGI environment
    RewriteRule .* - [E=HTTP_AUTHORIZATION:%{HTTP:Authorization}]

    ## Rewrite Rule for Gallery Module
    RewriteRule ^/gallery/(.*)?$ /gallery/category/view/name/$1 [L]

    ## always send 404 on missing files in these folders
    RewriteCond %{REQUEST_URI} !^/(media|skin|js)/

    ## never rewrite for existing files, directories and links
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-l

    ## rewrite everything else to index.php
    RewriteRule .* index.php [L]    

</IfModule> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T16:01:55.400

您可以在 confix.xml 中使用 magento url rewrite 来完成此操作（无需使用 apache rewrite）

```
<global>
     <rewrite>
       <fancy_url>
             <from><![CDATA[/customModule\/(.*)/]]></from>
             <to><![CDATA[customModule/controller/view/name/$1/]]></to>
             <complete>1</complete>
        </fancy_url>
     <rewrite>
</global> 
```

阅读更多@[在magento中使用config.xml进行简单的url重写](http://www.excellencemagentoblog.com/simple-url-rewrite-using-magento-xml)

请参阅我的答案@ [Magento Router Url - Need Hyphnated Path Name](https://stackoverflow.com/questions/13238428/magento-router-url-need-hyphnated-path-name)了解如何访问：album_name

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T14:38:09.030

如果您需要自定义路由以对许多路由通用，您可以轻松实现自定义路由器类（参考[`Mage_Cms_Controller_Router`[link]](https://github.com/benmarks/magento-mirror/blob/1.7.0.2/app/code/core/Mage/Cms/Controller/Router.php)及其[配置为观察者 [link]](https://github.com/benmarks/magento-mirror/blob/1.7.0.2/app/code/core/Mage/Cms/etc/config.xml#L177)）。

# sql - 报表的 SQL 查询

> ID：13474494
> 
> 赞同：1
> 
> 时间：2012-11-20T13:40:16.080
> 
> 标签：sql, sql-server, sql-server-2008, tsql, pivot

我正在编写一份汇总报告，到目前为止我已经掌握了数据，但我不确定如何从这里开始。我使用 SQL，但我的技能有限

我在临时表中有以下内容

```
ID   Count  Action
2   23      Installed
2   12      Uninstalled
2   36      Unchanged
3   12      Installed
3   25      Unchanged
4   35      Installed
4   25      Unchanged 
```

我想把它转换成这种格式

```
ID  Installed   Uninstalled Unchanged
2   23          12          36
3   12          0           36
4   35          0           25 
```

我不知道去哪里，甚至不知道如何开始实现这一目标，也找不到任何东西可以指引我正确的方向（我确定它在某个地方）

任何帮助都会得到帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T13:42:09.263

它被称为枢轴

[这是](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)关于它的文档

语法是

```
SELECT <non-pivoted column>,
    [first pivoted column] AS <column name>,
    [second pivoted column] AS <column name>,

    ...

    [last pivoted column] AS <column name>
FROM
    (<SELECT query that produces the data>)
    AS <alias for the source query>
PIVOT
( 
    <aggregation function>(<column being aggregated>)
FOR
[<column that contains the values that will become column headers>]
    IN ( [first pivoted column], [second pivoted column],
    ... [last pivoted column])

) AS <alias for the pivot table>

<optional ORDER BY clause>; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T13:44:25.787

尝试这个：

```
SELECT
  ID, 
  MAX(CASE WHEN "Action" = 'Installed' THEN Count END) AS 'Installed',
  MAX(CASE WHEN "Action" = 'Uninstalled ' THEN Count END) AS 'Uninstalled',
  MAX(CASE WHEN "Action" = 'Unchanged' THEN Count END) AS 'Unchanged'
FROM Table
GROUP BY ID; 
```

或者像这样使用 SQL Server`PIVOT`表运算符：

```
SELECT *
FROM 
(
   SELECT * FROM table
)t
PIVOT
(
   MAX("Count") FOR "Action" IN([Installed], [Uninstalled], [Unchanged])
) p 
```

## [两者的 SQL Fiddle 演示](http://www.sqlfiddle.com/#!3/6f16c/1)

但是，对于未知数量的`Action`s，您必须像这样动态选择它们：

```
DECLARE @cols AS NVARCHAR(MAX);
DECLARE @query AS NVARCHAR(MAX);

select @cols = STUFF((SELECT distinct ',' + QUOTENAME(Action) 
                    from Table1
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'');

SET @query = 'SELECT ID,  ' + @cols + ' from 
             (
                SELECT * FROM Table1
             ) x
             PIVOT 
             (
                MAX(count)
                FOR action IN (' + @cols + ')
             ) p ';

EXECUTE(@query); 
```

## [SQL Fiddle Demo(动态版)](http://www.sqlfiddle.com/#!3/6f16c/4)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T13:45:13.590

枢轴很好，但有时很慢。不试一试。

```
SELECT ID
    , SUM(CASE WHEN [Action] = 'Installed' THEN [Count] ELSE 0 END) AS Installed
    , SUM(CASE WHEN [Action] = 'Uninstalled' THEN [Count] ELSE 0 END) AS Uninstalled
    , SUM(CASE WHEN [Action] = 'Unchanged' THEN [Count] ELSE 0 END) AS Unchanged
FROM <table>
GROUP BY ID 
```

# php - 在 php 中创建动态条形图

> ID：13474497
> 
> 赞同：0
> 
> 时间：2012-11-20T13:40:25.070
> 
> 标签：php

我想要一个脚本在 php 中创建一个条形图，这样 x-scale 和 y-scale 会根据图形的变化动态变化。怎么做？直到现在我还没有研究过 php 图形。帮帮我...回复我..谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T13:46:10.340

您不需要实际使用图表，如果您愿意，可以使用[GD 库](http://php.net/manual/en/book.image.php)。

但最简单的方法是输出一些带有一些 CSS 的 Div，指定它的背景颜色和宽度/高度。例如：

```
<?php
    $height = "30px";

    $a_width = "200px";

    $b_width = "250px";

    echo "<div style='width:$a_width; height:$height; background: red; margin-bottom: 10px;'></div>";

    echo "<div style='width:$b_width; height:$height; background: red;'></div>";

?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T13:48:55.653

试试 Javascript 中的 Highcharts 库：[http](http://www.highcharts.com/)
://www.highcharts.com/简单直观。
在演示库中有很多示例。

# python - python中的分布和p值

> ID：13474498
> 
> 赞同：2
> 
> 时间：2012-11-20T13:40:27.297
> 
> 标签：python, statistics, distribution

我有一个很大的数字列表，我想从这些数据中创建一个分布，绘制它，然后找到我列表中每个数字与分布有关的 p 值。

有可能在python中做到这一点吗？我在 matplotlib 文档中找不到它。我应该使用别的东西吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T13:46:21.187

我建议查看;的[`stats`](http://docs.scipy.org/doc/scipy/reference/stats.html)模块 `scipy`它为这样的事情提供了许多统计功能。对于绘图，我仍然会使用[matplotlib](http://matplotlib.org/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T14:49:37.487

您可以使用 numpy 模块中的 searchsorted 函数，该函数将为您提供有序数组中一组值的顺序。然后，您只需将其重新归一化为原始数组的维度即可将其转换为 pvalue：

```
data = sorted(rand(10))
new_data = rand(5)
pvals = searchsorted(data,new_data)*1./len(data)
print pvals
#array([ 0\. ,  0.1,  0.2,  0.3,  0.4,  0.5,  0.6,  0.7,  0.8,  0.9]) 
```

好吧，事实上，如果你想要原始数字的 pvalues，你根本不需要任何特殊函数：pvalues 只是排序数据集中的顺序除以它的长度。如果您需要相对于原始值的新值的 pvalue，您可以使用我给您的代码片段

# php - Symfony2：路由和参数

> ID：13474499
> 
> 赞同：0
> 
> 时间：2012-11-20T13:40:28.640
> 
> 标签：php, symfony

我在 /app/config/parameters.ini 中有参数：

```
[parameters]
    my_param=123 
```

在我的 routing.yml 文件中，我有下一个：

```
url_name:
    pattern: /test
    defaults:
        _controller: MyBundle:MyController:test
    requirements:
        url_param_1:  %my_param% 
```

我希望 url_param_1 是必需的。如果用户去 /test - 他会得到 404 异常。如果用户到达 /test?url_param_1=%my_param%（在我的示例中是 /test?url_param_1=123） - 一切正常。我可以在控制器中不检查验证的情况下自动执行此操作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T14:01:40.240

你不能只在你的模式中添加一个 slug 吗？

```
url_name:
pattern: /test/{url_param_1}
defaults:
    _controller: MyBundle:MyController:test
requirements:
    url_param_1:  %my_param% 
```

# ruby - heroku python管理py syncdb不工作

> ID：13474505
> 
> 赞同：0
> 
> 时间：2012-11-20T13:40:46.270
> 
> 标签：ruby, django, heroku

我已经完成了开发中心中提到的 heroku 教程。该应用程序显示和工作正常。当我尝试 heroku 日志时，我得到的日志如下所示：

```
2012-11-20T12:40:13+00:00 heroku[run.1]: Awaiting client
2012-11-20T12:40:13+00:00 heroku[run.1]: Starting process with command `python manage.py syncdb`
2012-11-20T12:40:13+00:00 heroku[run.1]: State changed from starting to up
2012-11-20T12:40:43+00:00 heroku[run.1]: Error R13 (Attach error) -> Failed to attach to process
2012-11-20T12:40:44+00:00 heroku[run.1]: Process exited with status 128
2012-11-20T12:40:44+00:00 heroku[run.1]: State changed from up to complete
2012-11-20T13:28:00+00:00 heroku[api]: Starting process with command `python manage.py syncdb` by emailaddress@gmail.com
2012-11-20T13:28:04+00:00 heroku[run.1]: State changed from starting to up
2012-11-20T13:28:04+00:00 heroku[run.1]: Awaiting client
2012-11-20T13:28:04+00:00 heroku[run.1]: Starting process with command `python manage.py syncdb`
2012-11-20T13:28:34+00:00 heroku[run.1]: Error R13 (Attach error) -> Failed to attach to process
2012-11-20T13:28:35+00:00 heroku[run.1]: Process exited with status 128
2012-11-20T13:28:35+00:00 heroku[run.1]: State changed from up to complete 
```

这意味着这是有效的，但是当我尝试时：

```
heroku run python manage.py syncdb 
```

它没有运行，堆栈跟踪在这里：

```
$ heroku run python manage.py syncdb
/Users/myusername/.heroku/client/lib/heroku/helpers.rb:103: warning: Insecure world writable dir /usr/local in PATH, mode 040777
Running `python manage.py syncdb` attached to terminal... up, run.1
 !    Heroku client internal error.
 !    Search for help at: https://help.heroku.com
 !    Or report a bug at: https://github.com/heroku/heroku/issues/new

    Error:       Operation timed out - connect(2) (Errno::ETIMEDOUT)
    Backtrace:   /Users/myusername/.heroku/client/lib/heroku/client/rendezvous.rb:39:in `initialize'
                 /Users/myusername/.heroku/client/lib/heroku/client/rendezvous.rb:39:in `open'
                 /Users/myusername/.heroku/client/lib/heroku/client/rendezvous.rb:39:in `block in start'
                 /usr/local/heroku/ruby/lib/ruby/1.9.1/timeout.rb:68:in `timeout'
                 /Users/myusername/.heroku/client/lib/heroku/client/rendezvous.rb:31:in `start'
                 /Users/myusername/.heroku/client/lib/heroku/command/run.rb:125:in `rendezvous_session'
                 /Users/myusername/.heroku/client/lib/heroku/command/run.rb:112:in `run_attached'
                 /Users/myusername/.heroku/client/lib/heroku/command/run.rb:21:in `index'
                 /Users/myusername/.heroku/client/lib/heroku/command.rb:206:in `run'
                 /Users/myusername/.heroku/client/lib/heroku/cli.rb:28:in `start'
                 /usr/local/heroku/bin/heroku:24:in `<main>'

    Command:     heroku run python manage.py syncdb
    Version:     heroku-toolbelt/2.33.1 (x86_64-darwin10.8.0) ruby/1.9.3 
```

什么可能是错的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T20:51:15.980

我刚刚遇到了这个问题并设法找到了解决方案。我将从使用以下命令检查 heroku 日志开始：

`heroku logs`

这应该提供更多的洞察力。syncdb 不工作的一个常见问题是你没有更新你的 requirements.txt

为此，管道 pip freeze 进入 requirements.txt

`pip freeze > requirements.txt`

这可能不是您遇到的确切问题，但 heroku 日志应该是一个好的开始。

# java - 设置存储过程生成的文件的权限

> ID：13474510
> 
> 赞同：0
> 
> 时间：2012-11-20T13:41:03.193
> 
> 标签：java, database, unix, stored-procedures

我们有一个存储过程，它在我们的 Unix 服务器上的表中生成一个包含一些数据的文件。我希望存储过程还将该文件的读/写权限设置为组和每个人。我怎样才能做到这一点。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T20:52:35.050

看：`http://jenniferlinca.wordpress.com/2008/03/28/using-utl_file-how-file-permissions-are-determined-working-sample/`

简短的回答，用户（通常是 oracle）有一个 umask。这将传递给 utl_file.fopen 过程。如果 java 进程打开文件然后从游标读取数据：

[http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html#setPosixFilePermissions%28java.nio.file.Path,%20java.util.Set%29](http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html#setPosixFilePermissions%28java.nio.file.Path,%20java.util.Set%29)

这是java 7：setPosixFilePermissions

# python - socket.io 连接上的 gevent 超时错误

> ID：13474511
> 
> 赞同：1
> 
> 时间：2012-11-20T13:41:05.827
> 
> 标签：python, socket.io, pyramid, gevent, greenlets

我有一个包含清漆 nginx 和 2 个金字塔后端的设置，其中一个运行 socket.io 应用程序。所有堆栈都在我的本地开发计算机上正常工作，但我无法在生产计算机上使用 websocket 部分。当客户端 socket.io 尝试连接时导致 socketio 应用程序的错误的回溯：

```
[2012-11-20 14:32:00] "GET /socket.io/1/websocket/790777701707 HTTP/1.1" 101 - -
Traceback (most recent call last):
  File "/var/pyramid/maxserver/eggs/gevent-0.13.8-py2.7-linux-i686.egg/gevent/greenlet.py", line 390, in run
    result = self._run(*self.args, **self.kwargs)
  File "/var/pyramid/maxserver/eggs/gevent_socketio-0.3.5_rc2-py2.7.egg/socketio/transports.py", line 226, in send_into_ws
    websocket.send(message)
  File "/var/pyramid/maxserver/eggs/gevent_websocket-0.3.6-py2.7.egg/geventwebsocket/websocket.py", line 350, in send
    return self.send_frame(message, self.OPCODE_TEXT)
  File "/var/pyramid/maxserver/eggs/gevent_websocket-0.3.6-py2.7.egg/geventwebsocket/websocket.py", line 340, in send_frame
    self._write(combined)
  File "/var/pyramid/maxserver/eggs/gevent-0.13.8-py2.7-linux-i686.egg/gevent/socket.py", line 515, in sendall
    data_sent += self.send(_get_memory(data, data_sent), flags, timeout=timeleft)
  File "/var/pyramid/maxserver/eggs/gevent-0.13.8-py2.7-linux-i686.egg/gevent/socket.py", line 483, in send
    return sock.send(data, flags)
error: [Errno 32] Broken pipe
<Greenlet at 0xa449c0c: send_into_ws> failed with error

Traceback (most recent call last):
  File "/var/pyramid/maxserver/eggs/gevent-0.13.8-py2.7-linux-i686.egg/gevent/greenlet.py", line 390, in run
    result = self._run(*self.args, **self.kwargs)
  File "/var/pyramid/maxserver/eggs/gevent_socketio-0.3.5_rc2-py2.7.egg/socketio/transports.py", line 230, in read_from_ws
    message = websocket.receive()
  File "/var/pyramid/maxserver/eggs/gevent_websocket-0.3.6-py2.7.egg/geventwebsocket/websocket.py", line 296, in receive
    result = self._receive()
  File "/var/pyramid/maxserver/eggs/gevent_websocket-0.3.6-py2.7.egg/geventwebsocket/websocket.py", line 244, in _receive
    frame = self.receive_frame()
  File "/var/pyramid/maxserver/eggs/gevent_websocket-0.3.6-py2.7.egg/geventwebsocket/websocket.py", line 177, in receive_frame
    data0 = read(2)
  File "/var/pyramid/maxserver/eggs/gevent_websocket-0.3.6-py2.7.egg/geventwebsocket/python_fixes.py", line 22, in readinto
    return self._sock.recv_into(b)
  File "/var/pyramid/maxserver/eggs/gevent-0.13.8-py2.7-linux-i686.egg/gevent/socket.py", line 472, in recv_into
    wait_read(sock.fileno(), timeout=self.timeout, event=self._read_event)
  File "/var/pyramid/maxserver/eggs/gevent-0.13.8-py2.7-linux-i686.egg/gevent/socket.py", line 169, in wait_read
    switch_result = get_hub().switch()
  File "/var/pyramid/maxserver/eggs/gevent-0.13.8-py2.7-linux-i686.egg/gevent/hub.py", line 164, in switch
    return greenlet.switch(self)
timeout: timed out
<Greenlet at 0xa46157c: read_from_ws> failed with timeout 
```

我检查了所有 python 包版本，两台计算机都相同。还将生产计算机升级到 libevent 1.4.14b 以匹配本地计算机。

我不知道用哪种方法来调试它。帮助表示赞赏！

# slf4j - SLF4J 可变参数与数组的问题

> ID：13474514
> 
> 赞同：0
> 
> 时间：2012-11-20T13:41:13.303
> 
> 标签：slf4j

为什么 org.slf4j.Logger 使用可变参数，例如：

```
public void info(Marker marker, String format, Object... arguments); 
```

但是 org.slf4j.ext.LoggerWrapper 和 org.slf4j.cal10n.LocLogger 都使用如下数组：

```
public void info(Marker marker, String format, Object[] argArray); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-31T03:53:01.673

LoggerWrapper 和 LocLogger 在使用 Java 5+ 时与 varargs 语法兼容，但它们也与 Java < 5 兼容。数组语法可以在 Java 的旧版本下编译和运行，同时在 Java >= 5 时仍然支持 varargs 语法.

SLF4J API < 1.7 使用数组语法。在 API 版本 1.7 中，使用了 varargs 语法，这意味着它不能用于 Java 版本 < 5。

您可能会查看[varargs 和 '...' 参数](https://stackoverflow.com/questions/1656901/varargs-and-the-argument)，以获取更多有关其工作原理以及您可能想要这样做的示例。

# opengl - 统一在着色器中没有被引用

> ID：13474521
> 
> 赞同：2
> 
> 时间：2012-11-20T13:41:25.733
> 
> 标签：opengl, glsl, shader

我正在使用openGL。我的顶点和片段着色器在相互使用时可以正常工作，但是当我添加镶嵌着色器时，据说以前在程序中识别的制服在着色器中没有被引用。

这是我不知道的特殊性吗？

这是在我的 .cpp 中：

```
program = new Shader("tessVshader.glsl", "tessFshader.glsl", "tessGshader.glsl");
// Removed tesselation specific just to try to compile w/ geo shader
...
program->SetUniform("Modelview", model * view);
program->SetUniform("NormalMatrix", normalMatrix); 
```

这是 tessGshader.glsl 的第一行：

```
uniform mat4 Modelview;
uniform mat3 NormalMatrix;
layout(triangles) in;
layout(triangle_strip, max_vertices = 3) out; 
```

这是输出：

```
Uniform Modelview is not referenced in the shaders. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T00:15:36.783

Shader类是你写的吗？如果是的话，它的一些代码会很有帮助。如果正确创建了 GL 着色器对象，请确保在尝试访问制服之前调用了 glUseProgram(...)。否则openGL 将无法找到它们。顺便说一句，确保您可以在 glsl 代码中看到编译/链接时间错误。如果您还没有使用它，请查找函数 glGetInfoLog。

# windows - IoGetDeviceObjectPointer() 失败，没有返回状态

> ID：13474524
> 
> 赞同：0
> 
> 时间：2012-11-20T13:41:38.243
> 
> 标签：windows, winapi, driver

这是我的代码：

```
UNICODE_STRING  symbol;     
WCHAR ntNameBuffer[128];
swprintf(ntNameBuffer, L"\\Device\\Harddisk1\\Partition1");

RtlInitUnicodeString(&symbol, ntNameBuffer);
KdPrint(("OSNVss:symbol is %ws\n",symbol.Buffer));

status = IoGetDeviceObjectPointer(&symbol,                                                  
             FILE_READ_DATA,
             &pDiskFileObject,
             &pDiskDeviceObject); 
```

我的驱动程序是`\\Device\\Harddisk1\\Partition1`.

当我调用`IoGetDeviceObjectPointer`它会失败并且没有状态返回并且它不会继续执行剩余的代码。

当我使用 windbg 调试它时，它会以`intelpm.sys`;

如果我将对象名更改为`"\\Device\\Harddisk1\\Partition2"`（partition2 确实存在），它将成功调用

如果我将 objectname 更改为`"\\Device\\Harddisk1\\Partition3"`, （partition3 不存在），它失败并返回 status = `0xc0000034`，意味着 objectname 不存在。

有谁知道为什么当我使用对象时`"\\Device\\Harddisk1\\Partition1"`它失败并且没有返回状态？非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T03:59:30.530

首先也是最重要的：您要实现什么目标以及您使用的是什么驱动程序模型？什么位数，针对哪些操作系统版本以及它在哪个操作系统版本上失败？此外：您在调用的正确 IRQL 中*并且*在*系统线程*中运行，对吗？您从驱动程序的哪个入口点（`IRP_MJ_*`，`DriverEntry`...）调用此代码？

无论如何，正在重新阅读有关此功能的文档。特别注意以下部分：

> 如果可以授予对对象的请求访问权限，IoGetDeviceObjectPointer 例程将返回指向指定设备对象堆栈中的顶部对象的指针和指向相应文件对象**的**指针*。*

和：

> **IoGetDeviceObjectPointer**在调用者和下一级驱动程序之间建立“连接”。成功的调用者可以使用返回的设备对象指针来初始化自己的设备对象。它也可以用作 IoAttachDeviceToDeviceStack、IoCallDriver 和任何为低级驱动程序创建 IRP 的例程的参数。返回的指针是 IoCallDriver 的必需参数。

您没有说，但是如果您在 32 位系统上执行此操作，那么跟踪[IrpTracker](http://www.osronline.com/article.cfm?article=199)发生的情况可能是值得的。但是，我的猜测是，所谓的“连接”，或者更确切地说，对它的请求会以某种方式被下一个较低级别的驱动程序吞掉。

也很难说你在这里写的是哪种驱动程序（是的，这可能很重要）。

尝试不只是在事前或事后的特定点中断，而是遵循 IRP 将在目标设备对象的堆栈中向下传播的堆栈。

但是考虑一下，您可能根本没有附加到堆栈（无论出于何种原因）。难道你实际上应该使用**IoGetDiskDeviceObject**来获取实际的底层设备对象（在堆栈的底部）而不是对附加的顶级对象的引用？

最后但同样重要的是：不要忘记您也可以在[OSR 邮件列表](http://www.osronline.com/page.cfm?name=listserver)上提出这个问题。那里有很多经验丰富的专业人士可能会遇到完全相同的问题（假设您正在做我所询问的所有正确的事情）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T06:41:48.213

谢谢大家，我解决了这个问题；导致这个问题的原因是它变得同步；当我调用 IoGetDeviceObjectPointer 时，它会生成一个新的 Irp IRP_MJ_WRITER，它从高层传递，当这个 IRP 到达我的驱动程序时，我处理 IRP 的线程是调用 IoGetDeviceObjectPointer 的同一个线程，所以它变成了死机；

# android - Android facebook graph api 添加带有照片上传的地点或位置参数

> ID：13474525
> 
> 赞同：1
> 
> 时间：2012-11-20T13:41:44.780
> 
> 标签：android, facebook

如何在将照片从 android 上传到 facebook 时发送地点参数。

```
Bundle params = new Bundle();

params.putByteArray("photo", byteArray);

params.putString("caption", "FbAPIs Sample App photo upload");

//params.putString("place", "Banglore");

//params.putString("location", "banglore");

Utility.mAsyncRunner.request("me/photos", params, "POST",
    new PhotoUploadListener(), null); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T13:46:15.690

将地点添加到参数中，就像您添加标题一样。

```
params.putString("place","someLocation"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T19:51:44.207

You're almost there. Instead of using "Bangalore" for example, pass in the Facebook place ID.

Ex:

```
params.putString("place", "106377336067638"); 
```

For reference, see: [https://developers.facebook.com/docs/reference/api/user/#photos](https://developers.facebook.com/docs/reference/api/user/#photos)

# string - mongoDb忽略资本

> ID：13474526
> 
> 赞同：0
> 
> 时间：2012-11-20T13:41:46.823
> 
> 标签：string, mongodb, request

我想设置一个忽略大写的mongoDb请求

如果我只有一个具有测试用户名的用户

```
db.users.find(
    { username: "test" }
) 
```

将返回一些我想返回配置文件测试的东西

```
db.users.find(
    { username: "Test" }
) 
```

或者

```
db.users.find(
    { username: "tEsT" }
) 
```

But I don't know I to ignore the capitals 但我不知道我要忽略大写字母

如果我有一个用户名 Toby 我想找到同样的问题

```
db.users.find(
    { username: "toby" }
) 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T13:46:12.727

您可以使用正则表达式来忽略大写，例如：

```
db.users.find({username: /test/i}) 
```

从而`i`选项状态不区分大小写。然而，这对索引不是很友好。

更好的选择是做这个客户端。规范您的大小写，以便所有内容都是小写或大写。这样你就可以正常测试了。

# postgresql - 如何在postgresql中删除多列

> ID：13474537
> 
> 赞同：153
> 
> 时间：2012-11-20T13:42:39.617
> 
> 标签：postgresql

我想在 PostgreSQL 的表中删除 200 列。我试过：

```
ALTER TABLE my_table
DROP COLUMN col1, col2 
```

但我收到这样的错误：

> 错误：“col2”处或附近的语法错误

* * *

## 回答 #1

> 赞同：287
> 
> 时间：2012-11-20T14:05:11.783

检查这个：

```
ALTER TABLE table DROP COLUMN col1, DROP COLUMN col2; 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2017-02-09T06:32:34.823

这对我有用：

```
alter table your_table_name drop column your_column_name; 
```

# websphere-portal - 将布局模板添加到 WebSphere Portal 主题耳朵

> ID：13474543
> 
> 赞同：0
> 
> 时间：2012-11-20T13:42:56.287
> 
> 标签：websphere-portal

**问题**：如果布局模板文件保存在主题耳/耳中，我如何从 changeLayout.json 和 layout.json 文件中引用我的布局文件？

**背景**：我正在 Portal v8 中使用自定义布局开发自定义主题。我正在使用 ear 方法进行主题部署，因此我将所有内容都隔离到 MyThemeDynamic.war 和 MyThemeStatic.war 我已将布局文件添加到 MyThemeStatic.war/themes/MyTheme/layout-templates

当我在 XMLAccess 导入中设置默认布局模板时，我可以成功看到我的自定义布局。但如果我尝试更改布局，它会恢复为 Portal 8.0 主题默认设置。我尝试了几种从 layout.json 引用我的布局文件的方法。

我看到了这个：[http](http://tinyurl.com/ch2nczp) ://tinyurl.com/ch2nczp 但它会阻止默认主题正常工作，我想保留默认主题和这个新的自定义主题。

我还尝试添加对 xml 访问的引用，如下所示：[https ://www.ibm.com/developerworks/forums/thread.jspa?messageID=14909102纮](https://www.ibm.com/developerworks/forums/thread.jspa?messageID=14909102&#14909102)

我觉得我很接近，但我错过了一些东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T22:12:59.167

我按照以下说明将静态和动态主题资产组合成一个单一的战争文件：

[http://www-10.lotus.com/ldd/portalwiki.nsf/dx/Create_a_custom_theme_without_WebDAV_with_8.0](http://www-10.lotus.com/ldd/portalwiki.nsf/dx/Create_a_custom_theme_without_WebDAV_with_8.0)

这最终是奏效的。

# string - 符号在字符串 masm32 中计数

> ID：13474545
> 
> 赞同：0
> 
> 时间：2012-11-20T13:42:58.880
> 
> 标签：string, assembly, count, symbols, masm32

我想编写一个程序，使用 scasb 和 masm32 计算字符串中特定符号的数量，我找到了示例，但我不知道为什么会出错。这是代码的一部分：

```
.data
str  db '. . .'

len_str=$-str

.code                     

start:                      

  mov  ax,@data
  mov  ds,ax
  mov  es,ax
  lea  di,str
  mov  cx, len_str  
  mov  al,' '
  mov  bx,0 
  cld

cycl:
repe scasb
  jcxz exit 
  inc  bx
  jmp  cycl

exit: 
```

得到

A2008 语法错误 db, str

A2006 语法错误 len_str

A2148 表达式中的符号类型无效：退出

A2004：符号类型冲突

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T00:21:30.677

`str`是一条指令，它是 的助记符`Store Task Register`。您不能像尝试那样将其用作标签名称。将其命名为其他名称，这应该可以解决您的错误

# ssis - 而数据插入表是在 ssis 中查看的。如何设置提交值？

> ID：13474548
> 
> 赞同：0
> 
> 时间：2012-11-20T13:43:12.093
> 
> 标签：ssis

如何在将数据从平面文件移动到视图（表或视图）时设置提交大小？

我已经在 SSIS 2005 版本中使用此方法导入了 1200 万条记录。我得到了以下错误。![在此处输入图像描述](../Images/99ec891c8543ba12fd7777a017a05fb1.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T11:42:23.157

使用 OLE DB 目标组件。将数据访问模式设置为表或视图 - 快速加载。十个你可以设置最大插入提交大小。

# actionscript-3 - 五3d local3dtoglobal

> ID：13474553
> 
> 赞同：2
> 
> 时间：2012-11-20T13:43:28.753
> 
> 标签：actionscript-3, flash, 3d

我正在尝试使用 Five3d 包在 3d 中绘制一个精灵并为其设置动画，然后在应用程序的根上创建一个形状，并在移动时将其覆盖在 3d 中的精灵上。我已经尽一切努力让它工作，但似乎无法让它正确排列。看起来透视已经出来了。在检查了 3d x,y 和全局 x,y 之间的关系后，我让它工作了，这导致我编写了下面显示的方法“local3dToGlobalXY”，但这仅在舞台为 1024 / 768 时才有效，奇怪。有人告诉我 Five3d 包中的 Sprite2d 可以做到这一点，但也不能让它工作。它与我的“local3dToGlobalXY”方法具有相同的结果。

我在[这里](http://jamesjordan.co.nz/five3dtest/)放了一个例子，这个例子的项目在[这里](http://jamesjordan.co.nz/five3dtest/Five3DTest.zip)。

红星是 3d 中的精灵，两个十字准线被绘制到不同的范围内。一个被拉入 Sprite2d，这是我被推荐做的，另一个被拉入根。

希望有人遇到过这种情况或可以指出我做错了什么。

谢谢，J

```
/**
 * ...
 * @author James Jordan
 */
public class Main extends Sprite 
{

    private var s3D:Sprite3D;
    private var _scene:Scene3D;
    private var _s:Sprite3D;
    private var star3D:Shape3D;
    private var t:Timer;
    private var crossHairs2D:Sprite;
    private var otherPlane:Sprite2D;
    private var _plane:Sprite3D;
    private var crossHairsRoot:Sprite;
    private var animationPlane:Sprite3D;
    private var crossHairsPlane:Sprite2D;
    private var starsPlane:Sprite3D;

    public function Main():void 
    {
        if (stage) init();
        else addEventListener(Event.ADDED_TO_STAGE, init);
    }

    private function init(e:Event = null):void 
    {
        removeEventListener(Event.ADDED_TO_STAGE, init);
        // entry point
        stage.align = StageAlign.TOP_LEFT;
        stage.scaleMode = StageScaleMode.NO_SCALE;

        animationPlane = new Sprite3D();

        starsPlane = new Sprite3D();
        animationPlane.addChild(starsPlane);

        crossHairsPlane = new Sprite2D();
        animationPlane.addChild(crossHairsPlane);

        _scene = new Scene3D();
        _scene.x = stage.stageWidth / 2;
        _scene.y = stage.stageHeight / 2;

        _scene.addChild(animationPlane);

        addChild(_scene);

        star3D = drawStar(starsPlane);
        crossHairs2D = drawGlobalShape(crossHairsPlane, 0xff000, 10);
        crossHairsRoot = drawGlobalShape(root, 0x0000ff, 5);

        t = new Timer(1000, 0);
        t.addEventListener(TimerEvent.TIMER, onTimer);
        t.start();

    }

    private function onTimer(e:TimerEvent):void 
    {
        TweenLite.to(star3D, 1, { x:(Math.random() * stage.stageWidth) - (stage.stageWidth/2), y:(Math.random() * stage.stageHeight) - (stage.stageHeight / 2), z:(Math.random() * 500), onUpdate:onTweenUpdate } );
    }

    private function onTweenUpdate():void 
    {
        var p:Point = local3dToGlobalXY(starsPlane, new Point3D(star3D.x, star3D.y, star3D.z));
        crossHairs2D.x = p.x - stage.stageWidth / 2;
        crossHairs2D.y = p.y -  stage.stageHeight / 2;

        crossHairsRoot.x = p.x;
        crossHairsRoot.y = p.y;
    }

    private function local3dToGlobalXY(_s:Sprite3D, p3d:Point3D):Point 
    {
        var m:Matrix3D = _s.concatenatedMatrix;
        var newP3d:Point3D = m.transformPoint(p3d);
        var globalPoint:Point = _s.local3DToGlobal(new Vector3D(newP3d.x, newP3d.y, newP3d.z));
        return globalPoint;
    }

    private function drawStar(parent:Sprite3D):Shape3D {

        var starShape:Shape3D = new Shape3D();
        DrawingUtils.star(starShape.graphics3D, 5, 30, 20, (45 / 180) * Math.PI, 0xff0000);

        parent.addChild(starShape);

        return starShape;
    }

    private function drawGlobalShape(p:*, c:uint, lineWeight:Number):Sprite 
    {
        var d:Sprite = new Sprite();
        d.graphics.lineStyle(lineWeight, c);
        d.graphics.moveTo( -20, 0);
        d.graphics.lineTo(20, 0);
        d.graphics.moveTo( 0, -20);
        d.graphics.lineTo(0, 20);
        d.graphics.endFill();

        p.addChild(d);

        return d;

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T14:23:08.907

这是你的视角和 Z 坐标。删除 TweenLite.to 语句中的随机 Z 补间，您会看到它们完美对齐。

你到底想在这里做什么？除了偏移星星之外，Z 参数似乎没有添加任何东西（根据与观察者的距离进行缩放）？

# java - 如何让 JMenuBar 在不弹出菜单的情况下激活菜单？

> ID：13474555
> 
> 赞同：2
> 
> 时间：2012-11-20T13:43:29.347
> 
> 标签：java, swing, jmenuitem, jmenubar

我尝试让我`JMenuBar`首先`JMenu`在 上激活`Alt KeyEvent`，但不打开弹出窗口，以便稍后可以打开带有箭头键击的弹出窗口。就像在 NetBeans、Mozilla 和任何其他程序窗口中完成的一样。

这是不按预期工作的代码。最糟糕的副作用是它对 alt+tab 组合有反应，而且绝对不应该在`alt`+上弹出菜单`tab`。我只需要使菜单进入“武装”状态并能够通过箭头键遍历菜单（左右箭头“武装”菜单和向下箭头打开“武装”菜单弹出窗口）。有什么简单的方法可以做到这一点吗？

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.KeyEvent;

public class Test5 extends JFrame {

    public Test5() {
        super("test");
        setDefaultCloseOperation(EXIT_ON_CLOSE);

        JPanel pan = new JPanel(new BorderLayout());

        final JMenuBar bar = new JMenuBar();
        final JMenu menu = new JMenu("File", false);

        menu.setMnemonic(KeyEvent.VK_ALT);

        JMenuItem item = new JMenuItem("All");
        JMenuItem item2 = new JMenuItem("Exit");
        menu.add(item);
        menu.add(item2);

        JMenu menu1 = new JMenu("Test");
        JMenuItem item1 = new JMenuItem("All");
        menu1.add(item1);

        bar.add(menu);
        bar.add(menu1);

        setJMenuBar(bar);

        setSize(200, 200);
        setVisible(true);
    }

    public static void main(String[] args) {
        new Test5();
    }

} 
```

**感谢 Guillaume Polet 解决**：com.sun.java.swing.plaf.windows.WindowsLookAndFeel 类中有一些代码，可与 Alt 击键一起使用：

```
public void initialize() {
    super.initialize();
    // some more initialization here
    KeyboardFocusManager.getCurrentKeyboardFocusManager()
                        .addKeyEventPostProcessor(WindowsRootPaneUI.altProcessor);
} 
```

AltProcessor 类完成了所有的魔法。

如果您没有任何自定义 LaF，则可以按原样使用 WindowsLookAndFeel，或者有适当的示例如何为您自己的特殊 LaF 处理菜单中的 Alt 事件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T14:00:30.103

在启动您的 GUI 之前，请调用此行：

```
UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName()); 
```

并删除助记词。

这将自动在 Windows 上安装所需的行为。如果您在所有平台上都需要它，那么您将不得不使用 KeyBindings，但由于这种行为仅在 Windows 上观察到，因此我认为仅在 Windows 上重新创建它没有问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T13:55:41.783

不知道为什么，但关于回答这个问题

*   第一步

    1.  必须使用[KeyBindings](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)并输出到[Swing Action（建议）](http://docs.oracle.com/javase/tutorial/uiswing/misc/action.html)或[ActionListener](http://docs.oracle.com/javase/tutorial/uiswing/events/actionlistener.html)

    2.  有两种方法`menu.setArmed(true)`或`menu.setSelected(true)`

*   但在这两种情况下`JMenu`都选择永远然后到所需的第二个。添加[MenuListener](https://stackoverflow.com/a/9862855/714968)并将先前选择或武装到 false 的步骤

# c# - 我如何清空列表框内容c#？

> ID：13474559
> 
> 赞同：2
> 
> 时间：2012-11-20T13:43:33.370
> 
> 标签：c#, silverlight, windows-phone-7

我有这个代码：

```
public void LoadData1(String link)
    {
        string temp="";
        int pos = 0;
        for (int x = 0, y = 0; x < link.Length; x++) //separate various code
            if (link[x] == 'y')
            {
                for (temp = ""; y < x; y++)
                    if(link[y]!='y')
                        temp += link[y];
                list[pos] = temp;
                pos++;
                y = x++;
            }
        string nota=list[0];
        for (int a = 0; a < list.Count() && list[a]!=null ; a++,nota=list[a])
        {
            string tempI = "";
            //immagine
            for (int x = 0; x < nota.Count(); x++)
            {
                if (nota[x] == 'p')
                    tempI += '+';
                else
                    tempI += nota[x];
            }

            //nome della pagina
            string temp1 = "";
            int c = tempI.Count();
            if (tempI.Count() > 2)
                if (tempI.ElementAt(2) == 'l') //sol
                {

                    for (int x = 0; x < c; x++)

                        if (x == 3 && tempI.ElementAt(3) == 'd')
                            temp1 += '#';
                        else
                            temp1 += tempI.ElementAt(x);
                }
                else
                {

                    for (int x = 0; x < c; x++)

                        if (x == 2 && tempI.ElementAt(2) == 'd')
                            temp1 += '#';
                        else
                            temp1 += tempI.ElementAt(x);
                }
            else
                temp1 = tempI;

            this.Temp.Add(new ImageText() { Text = temp1, linkImage = "/Accordi/"+tempI+".png" });
        }
        this.IsDataLoaded1 = true;
        this.Temp = new ObservableCollection<ImageText>();
    } 
```

这填充了一个由文本和图像组成的列表框。但我有这个问题：当我用 3 个元素填充列表框时（例如）它一切正常，但是当我再次调用用 2 个元素填充列表框的函数时，列表框显示调用的两个元素和第三个元素空间显示我之前调用的元素！！我该如何解决这个问题？列表框由 temp 绑定，字符串链接包含一系列代码，如“DoyDodyRey”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T13:51:32.187

每次加载数据时，您都在设置“第 n 个”元素，但您对已经存在的内容不做任何事情，因此，如果您在前一次调用中有第三个元素，而在后续调用中只有两个，则第三个将仍然在那里。

只需先清除它，或者之后删除多余的项目。很难从您的代码中确切地看到发生了什么，但我认为`list.Clear()`在方法顶部调用 right 可能会完成这项工作。

如果您只想删除多余的项目，我认为您应该能够`while (list.Count() >= pos) list.Remove(pos);`在第一个 for 循环之后立即添加。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T13:57:53.150

你不能在开始时声明列表，所以它是空的

```
List<string> yourlist = new List<string>(); 
```

并且您不需要在列表中使用 pos 就可以使用

```
yourlist.add(temp) 
```

列表中的第一个帖子获取 yourlist[0] 等等

希望这有所帮助 ：）

# css - 如何在 CSS 中编写媒体查询？

> ID：13474562
> 
> 赞同：4
> 
> 时间：2012-11-20T13:43:46.727
> 
> 标签：css, media-queries

在以下情况下我需要编写不同的样式

**设备宽度大于设备高度**

```
/* Landscape */
@media screen and (orientation:landscape) {
    .bg img {
        height: auto;
        width: 100%;
    }
} 
```

**设备高度大于设备宽度**

```
/* Portrait */
@media screen and (orientation:portrait) {
    .bg img {
        height: 100%;
        width: auto;
    }
} 
```

**在调整浏览器大小的某些阶段，方向**并不完美。

如何编写正确的 CSS？

可以用 CSS 做到这一点吗？

编辑 ：

我正在附上图像在调整浏览器大小时的外观![在此处输入图像描述](../Images/cfbd460fa722d8dfe80faf5a41413c5c.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T14:02:51.297

您可以使用以下媒体查询功能访问浏览器的[纵横比](http://en.wikipedia.org/wiki/Aspect_ratio_%28image%29)`aspect-ratio | min-aspect-ratio | max-aspect-ratio`： . 有关更多信息，请查看MDN 上的[CSS 媒体查询](https://developer.mozilla.org/en-US/docs/CSS/Media_queries)。

纵向的纵横比大于`1:1`，横向则小于。为了验证，我制作了一个[JSFiddle](http://jsfiddle.net/ansonhoyt/JPpzb/embedded/result/)，当你从“风景”切换到“肖像”时它会改变颜色。

尝试这个：

```
/* Landscape (i.e. wide viewport) */
@media screen and (min-aspect-ratio: 1/1) {
    .bg img {
        height: auto;
        width: 100%;
    }
}

/* Portrait (i.e. narrow viewport) */
@media screen and (max-aspect-ratio: 1/1) {
    .bg img {
        height: 100%;
        width: auto;
    }
} 
```

**更新：**图像是文档流的一部分，除非主体也用 填充视口，否则不会填充视口`body {height: 100%;}`，就像在这个[JSFiddle](http://jsfiddle.net/ansonhoyt/JPpzb/1/)中一样。

尝试`img {position: absolute;}`将图像从流中拉出，使其尺寸不受主体尺寸的限制。请参阅[JSFiddle](http://jsfiddle.net/ansonhoyt/JPpzb/3/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T13:54:43.190

您遇到的问题是您依赖于浏览器无法识别的文本“orientation:landscape”。使用下面的代码检查设备的高度和宽度来计算其方向。感谢 css-tricks.com，他们可以真正帮助处理媒体查询，这里是媒体查询最常见用途的示例。

```
/* Smartphones (portrait and landscape) ----------- */
@media only screen 
and (min-device-width : 320px) 
and (max-device-width : 480px) {
/* Styles */
}

/* Smartphones (landscape) ----------- */
@media only screen 
and (min-width : 321px) {
/* Styles */
}

/* Smartphones (portrait) ----------- */
@media only screen 
and (max-width : 320px) {
/* Styles */
}

/* iPads (portrait and landscape) ----------- */
@media only screen 
and (min-device-width : 768px) 
and (max-device-width : 1024px) {
/* Styles */
}

/* iPads (landscape) ----------- */
@media only screen 
and (min-device-width : 768px) 
and (max-device-width : 1024px) 
and (orientation : landscape) {
/* Styles */
}

/* iPads (portrait) ----------- */
@media only screen 
and (min-device-width : 768px) 
and (max-device-width : 1024px) 
and (orientation : portrait) {
/* Styles */
}

/* Desktops and laptops ----------- */
@media only screen 
and (min-width : 1224px) {
/* Styles */
}

/* Large screens ----------- */
@media only screen 
and (min-width : 1824px) {
/* Styles */
}

/* iPhone 4 ----------- */
@media
only screen and (-webkit-min-device-pixel-ratio : 1.5),
only screen and (min-device-pixel-ratio : 1.5) {
/* Styles */
} 
```

来源[http://css-tricks.com/snippets/css/media-queries-for-standard-devices/](http://css-tricks.com/snippets/css/media-queries-for-standard-devices/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T10:09:52.700

我有类似的需求，但我正在使用：

```
 <link rel='stylesheet' media='screen and (max-aspect-ratio: 4/3)' href='css/tall.css' />
        <link rel='stylesheet' media='screen and (min-aspect-ratio: 4/3)' href='css/wide.css' /> 
```

唯一的问题是，当我达到 768 x 1024 时，它显示正确，但是当我转到 1024 x 768 时，我得到一个空白页。我正在使用一个简单的 css 显示分配，例如：

```
display:none; 
```

打开或关闭 div，这是可行的，但我的问题是如何在没有中断的情况下进行连续流动？1024 x 768

我现在正在使用这个：

```
 <link rel='stylesheet' media='screen and (orientation:portrait)' href='css/tall.css' />
        <link rel='stylesheet' media='screen and (orientation:landscape)' href='css/wide.css' /> 
```

我想使用 max-aspect-ratio 等等，因为这让我可以更好地控制何时发生变化。我的意思是我不能放 1.333 比率和 1.334 无赖...

--新更新

```
 <!-- tall -->
         <link rel='stylesheet' media='screen and (max-aspect-ratio:4/3) and (min-width:0px) and (max-width:1023px)' href='css/tall.css'/>
         <!-- tall -->
         <link rel='stylesheet' media='screen and (max-aspect-ratio:4/3) and (min-width:1025px) and (max-width:9999px)' href='css/tall.css'/>
         <!-- wide -->
         <link rel='stylesheet' media='screen and (min-aspect-ratio:4/3)' href='css/wide.css'/> 
```

我想我通过执行上述代码解决了我的问题，这令人失望。但是到目前为止它仍然有效，我只需要测试几乎每个屏幕，以确保查询“条款”中精确为 4:3 的更高分辨率仍然显示。我尝试了 2048 x 1536 iPad3 Retina 并且出现了，不知道为什么 1024 x 768 失败......但正在使用上面的修复程序。

----UPDATE 2（我讨厌痛苦，但是）这似乎是宽高比：4/3 最干净的解决方案：

```
 <!-- tall 1.33301 -->
 <link rel='stylesheet' media='screen and (max-aspect-ratio:4095/3072)' href='css/tall.css'/>
         <!-- wide 1.33333 -->
 <link rel='stylesheet' media='screen and (min-aspect-ratio:4096/3072)' href='css/wide.css'/> 
```

# c# - 从另一个表单填充 Datagrid

> ID：13474565
> 
> 赞同：0
> 
> 时间：2012-11-20T13:43:52.467
> 
> 标签：c#, winforms, datagrid

我有一个`Form1`，其中包含一个`DataGrid`，和一个按钮`Search`。当我单击搜索按钮时，会`Form2`打开另一个表单 ( )，其中包含 2 个文本框和一个按钮`Select`。当我单击按钮`Select`时，我希望`DataGrid`中`Form1`的 2 个文本框的值填充`Form2`。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T08:44:56.797

在 form2 的构造函数中，您将 Form 作为参数传递。

```
Form1 form;
public Form2(Form f)// Constructor
{
 form = f;
 IntializeComponent();
 } 
```

然后你可以调用Form1的Gridview并添加你要填充的文本框

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T14:12:03.410

我希望您将这两个`TextBox`值存储在`DataSet`or中`DataTable`。如果是这样，那么您可以选择`DataGridView.Tag`财产。此属性保存对象。在你的情况下`DataSet`或`DataTable`.

**在 Form2 中**

```
myDataGridView.Tag = myDataSet; //Storing the DataSet into DataGridView 
```

**在 Form1 中**

```
DataSet ds = new DataSet();  //Creating a new DataSet in Form1
ds = (DataSet)myDataGridView.Tag;  //assigning the Form2 myDataSet values to Form1 ds 
```

*注意：* DataGridView Modifier 属性应设置为**Public**。

# php - 如果单击，突出显示三个段落之一（在它处取消选择其他段落）

> ID：13474567
> 
> 赞同：0
> 
> 时间：2012-11-20T13:44:07.897
> 
> 标签：php, javascript, jquery, tabs, smarty

我有三个段落看起来像三个单独的按钮：

```
<p id="showCloud" class="newRefreshThree" name="tabbed"><span class="ico"></span><a href="">{i18n key="evadmin.title.cloud"}</a></p>

{if $enableCapacityReport=="1"}

<p id="showStats" name="tabbed"><span class="ico"></span><a href="" >{i18n key="evadmin.stats.showstats"}</a></p>

{/if}

<p id="showInfrastructure"  name="tabbed" class="newRefreshFour"><span class="ico"></span><a href="">{i18n key="evadmin.title.infrastructure"}</a></p> 
```

他们都同名，`name = tabbed`

这些段落/按钮中的每一个都将用户发送到一个单独的选项卡，我想突出显示选择的任何选项卡的按钮，同时确保所有其他类型都未突出显示。

刚才我写了我认为是我需要的 JQuery 的第一部分：

```
$('p[name=tabbed]').click(function(){
        $(this).css('background-color','red');
        }); 
```

但显然这并没有取消选择其他 p，而且我不知道最有效/最好的方法..

此外，我希望在页面最初加载时突出显示初始按钮/p，以便它开始为该选项卡突出显示。

谁能向我推荐我可以使用什么事件/方法来完成我刚才所说的一切，甚至举个例子？问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T13:47:00.920

如果您不打算向`<p>`页面动态添加元素，那么您可以缓存选择器，使用它来操作**所有**段落，然后最后将您的样式应用于被单击的元素。

```
var $p = $('p[name="tabbed"]');
$p.click(function(e) {
    $p.css('background-color', '');
    $(this).css('background-color', 'red');
}); 
```

或者，使用 CSS 类声明，并使用`removeClass()`and`addClass()`函数根据需要添加/删除该类：

CSS .red { 背景颜色：红色；}

jQuery：

```
var $p = $('p[name="tabbed"]');
$p.click(function(e) {
    $p.removeClass('red');
    $(this).addClass('red');
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T13:47:12.890

```
$('p[name=tabbed]').click(function(){
    $('p[name=tabbed]').not(this).css({ background: 'none' });
    $(this).css('background-color','red');
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T13:47:54.500

你可以这样做：

```
$('p[name=tabbed]').click(function(){
        $('p[name=tabbed]').css('background-color','transparent');
        $(this).css('background-color','red');
        }); 
```

但更好的是使用 css 类。

# java - 分块输入流无法接收有效的块大小： 我正在使用 Axis 1.4 版本并使用org.apache.axis.tools.ant.wsdl.Wsdl2javaAntTask生成客户端代码。但是，当我尝试拨打电话时出现以下错误，在此先感谢 java.io.IOException: Chunked input stream failed to recei 问问题 问问题 2012-11-20T13:44:10.270 2381 次 This question shows research effort; it is useful and clear 2 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 我正在使用 Axis 1.4 版本并使用org.apache.axis.tools.ant.wsdl.Wsdl2javaAntTask生成客户端代码。但是，当我尝试拨打电话时出现以下错误，在此先感谢 java.io.IOException: Chunked input stream failed to receive valid chunk size: <wsdl2java url="${resources.dir}/2.0/popsp.wsdl" debug="true" printstacktraceonfailure="true" output="src"><mapping namespace="https://www.dhl.au/popweb/gw/ws/schema/2.0/popws" package="com.soap.autogen"></mapping></wsdl2java>为了解决稍后看到此问题的用户，我找到了此异常的根本原因。Axis 1.4 使用 HTTP 1.0 发送“NoN Chunked Streams”中的数据。如果这些消息到达服务器 HTTP 1.1，其中预期的数据位于“分块流”中，则可能会出现此错误。有关此编码的更多信息可以在分块传输编码中找到。 通过添加一个名为 deploy-client.wssd 的文件，我已经解决了（不升级 Axis），该文件由以下几行组成。 <deployment xmlns="http://xml.apache.org/axis/wsdd/" xmlns:java="http://xml.apache.org/axis/wsdd/providers/java"><transport name="http" pivot="java:org.apache.axis.transport.http.CommonsHTTPSender"></transport></deployment>这将告诉 Axis 使用默认情况下使用 HTTP 1.1 的 commonsHTTPSender。希望它对某人有所帮助。 javaweb-servicessoapantaxis 4 2 回答 2 This answer is useful 1 为了解决稍后看到此问题的用户，我找到了此异常的根本原因。Axis 1.4 使用 HTTP 1.0 发送“NoN Chunked Streams”中的数据。如果这些消息到达服务器 HTTP 1.1，其中预期的数据位于“分块流”中，则可能会出现此错误。有关此编码的更多信息可以在分块传输编码中找到。 通过添加一个名为 deploy-client.wssd 的文件，我已经解决了（不升级 Axis），该文件由以下几行组成。 <deployment xmlns="http://xml.apache.org/axis/wsdd/" xmlns:java="http://xml.apache.org/axis/wsdd/providers/java"><transport name="http" pivot="java:org.apache.axis.transport.http.CommonsHTTPSender"></transport></deployment>这将告诉 Axis 使用默认情况下使用 HTTP 1.1 的 commonsHTTPSender。希望它对某人有所帮助。 于 2012-12-14T08:40:23.987 回答 This answer is useful 0 如 Sasi 所说，创建 deploy-client.wsdd 文件。 <deployment xmlns="http://xml.apache.org/axis/wsdd/" xmlns:java="http://xml.apache.org/axis/wsdd/providers/java"><transport name="http" pivot="java:org.apache.axis.transport.http.CommonsHTTPSender"></transport></deployment>将依赖项添加到您的 pom 文件 <dependency><groupid>org.apache.axis2</groupid> <artifactid>axis2-transport-http</artifactid> <version>1.7.7</version></dependency> 然后在您的代码中处理该文件 System.setProperty("axis.ClientConfigFile", path-of-your-file); 于 2021-04-21T11:24:10.610 回答 Related 1 ruby-on-rails - check_auth_continue: 504 5.7.4 无法识别的身份验证类型 (Net::SMTPSyntaxError) 0 file - 通过 http 将 SQLite .db 文件从服务器移动到客户端到客户端位置，而没有下载提示 3 joomla - 如何从 joomla 控制面板添加或删除图标？ 2 jquery - 真实或不使用 jQuery 的电子邮件 ID 验证 3 php - 如何为 Windows 和 Unix 制作 php 自动化后台脚本？ 2 jsf-2 - 重置 Viewscope 的 JSF Backing Bean 1 c# - 使文本框始终具有焦点 1 assembly - 跳转不起作用 3 android - 在我的应用程序中集成 FB Sdk 时，我得到 java.lang.classnotfoundexception 1 binding - 如何使用 KDE 的 Smoke？ Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：13474568
> 
> 赞同：2
> 
> 时间：
> 
> 标签：java, web-services, soap, ant, axis

我正在使用 Axis 1.4 版本并使用**org.apache.axis.tools.ant.wsdl.Wsdl2javaAntTask**生成客户端代码。但是，当我尝试拨打电话时出现以下错误，在此先感谢

```
 java.io.IOException: Chunked input stream failed to receive valid chunk size:<?xmlversion="1.0"
        at org.apache.axis.transport.http.ChunkedInputStream.getChunked(ChunkedInputStream.java:155)
        at org.apache.axis.transport.http.ChunkedInputStream.read(ChunkedInputStream.java:87)
        at java.io.FilterInputStream.read(Unknown Source)
        at org.apache.axis.SOAPPart.getAsBytes(SOAPPart.java:453)
        at org.apache.axis.SOAPPart.getAsString(SOAPPart.java:559)
        at org.apache.axis.Message.getSOAPPartAsString(Message.java:412)
        at org.apache.axis.handlers.LogHandler.logMessages(LogHandler.java:89)
        at org.apache.axis.handlers.LogHandler.invoke(LogHandler.java:68)
        at org.apache.axis.strategies.InvocationStrategy.visit(InvocationStrategy.java:32)
        at org.apache.axis.SimpleChain.doVisiting(SimpleChain.java:118)
        at org.apache.axis.SimpleChain.invoke(SimpleChain.java:83)
        at org.apache.axis.client.AxisClient.invoke(AxisClient.java:190)
        at org.apache.axis.client.Call.invokeEngine(Call.java:2784)
        at org.apache.axis.client.Call.invoke(Call.java:2767)
        at org.apache.axis.client.Call.invoke(Call.java:2443)
        at org.apache.axis.client.Call.invoke(Call.java:2366)
        at org.apache.axis.client.Call.invoke(Call.java:1812) 
```

build.xml 中的目标是，

```
<target name="generate-java">   
            <wsdl2java 
                url="${resources.dir}/2.0/popsp.wsdl" 
                debug="true" 
                printstacktraceonfailure="true" 
                output="src">
                <mapping namespace="https://www.dhl.au/popweb/gw/ws/schema/2.0/popws" 
                         package="com.soap.autogen"/>
            </wsdl2java>  
      </target> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T08:40:23.987

为了解决稍后看到此问题的用户，我找到了此异常的根本原因。Axis 1.4 使用 HTTP 1.0 发送“NoN Chunked Streams”中的数据。如果这些消息到达服务器 HTTP 1.1，其中预期的数据位于“分块流”中，则可能会出现此错误。有关此编码的更多信息可以在[分块传输编码](http://en.wikipedia.org/wiki/Chunked_transfer_encoding)中找到。

通过添加一个名为 deploy-client.wssd 的文件，我已经解决了（不升级 Axis），该文件由以下几行组成。

```
<deployment
xmlns="http://xml.apache.org/axis/wsdd/"
xmlns:java="http://xml.apache.org/axis/wsdd/providers/java">
  <transport name="http" pivot="java:org.apache.axis.transport.http.CommonsHTTPSender"/> 
</deployment> 
```

这将告诉 Axis 使用默认情况下使用 HTTP 1.1 的 commonsHTTPSender。希望它对某人有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-21T11:24:10.610

如 Sasi 所说，创建 deploy-client.wsdd 文件。

```
<deployment
xmlns="http://xml.apache.org/axis/wsdd/"
xmlns:java="http://xml.apache.org/axis/wsdd/providers/java">
<transport name="http" pivot="java:org.apache.axis.transport.http.CommonsHTTPSender"/> 
</deployment> 
```

将依赖项添加到您的 pom 文件

```
<dependency>
        <groupId>org.apache.axis2</groupId>
        <artifactId>axis2-transport-http</artifactId>
        <version>1.7.7</version>
</dependency> 
```

然后在您的代码中处理该文件

```
System.setProperty("axis.ClientConfigFile", path-of-your-file); 
```

# automapper - NopCommerce 网络服务 DTO

> ID：13474572
> 
> 赞同：2
> 
> 时间：2012-11-20T13:44:28.790
> 
> 标签：automapper, dto, nopcommerce

我正在尝试扩展 webservice plygin 以便从 nopcommerce 获取产品列表。

我所做的是以下。我创建了一个类似的类`ProductDto`，并在里面`NopService.cs`创建了一个类似的方法：

```
public List<ProductDto> GetProductCollection(string usernameOrEmail, string userPassword) 
```

`ProductDto`取自`Product`使用 AutoMapper。（如下图）

但它不起作用:(我错过了什么？

有任何想法吗？这一切背后的想法是通过网络服务将 nopcommerce 与我的 ERP 连接起来

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace Nop.Core.Domain.Catalog
{
    public class ProductDto
    {
        public virtual string Name { get; set; }

        // Instance members must be virtual on data table objects like Affiliate.cs
        // Virtual is required by data access frameworks so that these frameworks
        // can implement more complex features like lazy loading.

        public virtual string ProductGID { get; set; }

        /// <summary>
        /// Gets or sets the short description
        /// </summary>

        public virtual string ShortDescription { get; set; }

        /// <summary>
        /// Gets or sets the full description
        /// </summary>

        public virtual string FullDescription { get; set; }

        /// <summary>
        /// Gets or sets the admin comment
        /// </summary>

        public virtual string AdminComment { get; set; }

        /// <summary>
        /// Gets or sets a value of used product template identifier
        /// </summary>

        public virtual int ProductTemplateId { get; set; }

        /// <summary>
        /// Gets or sets a value indicating whether to show the product on home page
        /// </summary>

        public virtual bool ShowOnHomePage { get; set; }

        /// <summary>
        /// Gets or sets the meta keywords
        /// </summary>

        public virtual string MetaKeywords { get; set; }

        /// <summary>
        /// Gets or sets the meta description
        /// </summary>

        public virtual string MetaDescription { get; set; }

        /// <summary>
        /// Gets or sets the meta title
        /// </summary>

        public virtual string MetaTitle { get; set; }

        /// <summary>
        /// Gets or sets the search-engine name
        /// </summary>

        public virtual string SeName { get; set; }

        /// <summary>
        /// Gets or sets a value indicating whether the product allows customer reviews
        /// </summary>

        public virtual bool AllowCustomerReviews { get; set; }

        /// <summary>
        /// Gets or sets the rating sum (approved reviews)
        /// </summary>

        public virtual int ApprovedRatingSum { get; set; }

        /// <summary>
        /// Gets or sets the rating sum (not approved reviews)
        /// </summary>

        public virtual int NotApprovedRatingSum { get; set; }

        /// <summary>
        /// Gets or sets the total rating votes (approved reviews)
        /// </summary>

        public virtual int ApprovedTotalReviews { get; set; }

        /// <summary>
        /// Gets or sets the total rating votes (not approved reviews)
        /// </summary>

        public virtual int NotApprovedTotalReviews { get; set; }

        /// <summary>
        /// Gets or sets a value indicating whether the entity is published
        /// </summary>

        public virtual bool Published { get; set; }

        /// <summary>
        /// Gets or sets a value indicating whether the entity has been deleted
        /// </summary>

        public virtual bool Deleted { get; set; }

        /// <summary>
        /// Gets or sets the date and time of product creation
        /// </summary>

        public virtual DateTime CreatedOnUtc { get; set; }

        /// <summary>
        /// Gets or sets the date and time of product update
        /// </summary>

        public virtual DateTime UpdatedOnUtc { get; set; }
    }
} 
```

在 NopService.cs 我创建了一个这样的方法

```
public List<ProductDto> GetProductCollection(string usernameOrEmail, string userPassword)
    {
        CheckAccess(usernameOrEmail, userPassword);
        if (!_permissionSettings.Authorize(StandardPermissionProvider.ManageCatalog))
            throw new ApplicationException("Not allowed to manage Catalog");

        var productslist = new List<Product>();
        productslist.AddRange(_productService.GetAllProducts(false));
        List<Product> products = productslist;
        List<ProductDto> productsDtos = Mapper.Map<List<Product>, List<ProductDto>>(products);

        return productsDtos;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T02:30:22.547

您的映射只能在启动期间配置一次。因此，尝试将其移至个人资料：

```
namespace MyNamespace
{
    using System.Collections.Generic;

    using AutoMapper;

    public class ProductProfile : Profile
    {
        public override string ProfileName
        {
            get
            {
                return "ProductProfile";
            }
        }

        protected override void Configure()
        {
            Mapper.CreateMap<Product, ProductDto>();
            Mapper.CreateMap<ProductCategory, ProductCategoryDto>();
            // etc
        }
    }
} 
```

然后在启动期间对其进行初始化（`Application_Start`等）：

```
Mapper.Initialize(m => m.AddProfile<ProductProfile>()); 
```

创建一个单元测试来检查您的映射：

```
namespace MyNamespace
{
    using System.Collections.Generic;

    using AutoMapper;

    using NUnit.Framework;

    [TestFixture]
    public class AutoMapperTests
    {
        [Test]
        public void AutoMapper_Configuration_IsValid()
        {
            Mapper.Initialize(m => m.AddProfile<ProductProfile>());
            Mapper.AssertConfigurationIsValid();
        }
    }
} 
```

这将有助于确定您的映射配置中是否存在任何错误，并向您展示要修复的内容。完成此操作后，您就可以专注于使功能正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T12:04:36.903

我设法让它工作，但在映射嵌套类时遇到问题。

产品类别

```
public partial class Product : BaseEntity, ILocalizedEntity
{

    private ICollection<ProductVariant> _productVariants;

    private ICollection<ProductCategory> _productCategories;

    private ICollection<ProductManufacturer> _productManufacturers;

    private ICollection<ProductPicture> _productPictures;

    private ICollection<ProductReview> _productReviews;

    private ICollection<ProductSpecificationAttribute> _productSpecificationAttributes;

    private ICollection<ProductTag> _productTags;

    /// <summary>
    /// Gets or sets the name
    /// </summary>

    public virtual string Name { get; set; }

    // Instance members must be virtual on data table objects like Affiliate.cs
    // Virtual is required by data access frameworks so that these frameworks
    // can implement more complex features like lazy loading.

    public virtual string ProductGID { get; set; }

    /// <summary>
    /// Gets or sets the short description
    /// </summary>

    public virtual string ShortDescription { get; set; }

    /// <summary>
    /// Gets or sets the full description
    /// </summary>

    public virtual string FullDescription { get; set; }

    /// <summary>
    /// Gets or sets the admin comment
    /// </summary>

    public virtual string AdminComment { get; set; }

    /// <summary>
    /// Gets or sets a value of used product template identifier
    /// </summary>

    public virtual int ProductTemplateId { get; set; }

    /// <summary>
    /// Gets or sets a value indicating whether to show the product on home page
    /// </summary>

    public virtual bool ShowOnHomePage { get; set; }

    /// <summary>
    /// Gets or sets the meta keywords
    /// </summary>

    public virtual string MetaKeywords { get; set; }

    /// <summary>
    /// Gets or sets the meta description
    /// </summary>

    public virtual string MetaDescription { get; set; }

    /// <summary>
    /// Gets or sets the meta title
    /// </summary>

    public virtual string MetaTitle { get; set; }

    /// <summary>
    /// Gets or sets the search-engine name
    /// </summary>

    public virtual string SeName { get; set; }

    /// <summary>
    /// Gets or sets a value indicating whether the product allows customer reviews
    /// </summary>

    public virtual bool AllowCustomerReviews { get; set; }

    /// <summary>
    /// Gets or sets the rating sum (approved reviews)
    /// </summary>

    public virtual int ApprovedRatingSum { get; set; }

    /// <summary>
    /// Gets or sets the rating sum (not approved reviews)
    /// </summary>

    public virtual int NotApprovedRatingSum { get; set; }

    /// <summary>
    /// Gets or sets the total rating votes (approved reviews)
    /// </summary>

    public virtual int ApprovedTotalReviews { get; set; }

    /// <summary>
    /// Gets or sets the total rating votes (not approved reviews)
    /// </summary>

    public virtual int NotApprovedTotalReviews { get; set; }

    /// <summary>
    /// Gets or sets a value indicating whether the entity is published
    /// </summary>

    public virtual bool Published { get; set; }

    /// <summary>
    /// Gets or sets a value indicating whether the entity has been deleted
    /// </summary>

    public virtual bool Deleted { get; set; }

    /// <summary>
    /// Gets or sets the date and time of product creation
    /// </summary>

    public virtual DateTime CreatedOnUtc { get; set; }

    /// <summary>
    /// Gets or sets the date and time of product update
    /// </summary>

    public virtual DateTime UpdatedOnUtc { get; set; }

    /// <summary>
    /// Gets or sets the product variants
    /// </summary>

    public virtual ICollection<ProductVariant> ProductVariants
    {
        get { return _productVariants ?? (_productVariants = new List<ProductVariant>()); }
        protected set { _productVariants = value; }
    }
    /// <summary>
    /// Gets or sets the collection of ProductCategory
    /// </summary>
    public virtual ICollection<ProductCategory> ProductCategories
    {
        get { return _productCategories ?? (_productCategories = new List<ProductCategory>()); }
        protected set { _productCategories = value; }
    }

    /// <summary>
    /// Gets or sets the collection of ProductManufacturer
    /// </summary>
    public virtual ICollection<ProductManufacturer> ProductManufacturers
    {
        get { return _productManufacturers ?? (_productManufacturers = new List<ProductManufacturer>()); }
        protected set { _productManufacturers = value; }
    }

    /// <summary>
    /// Gets or sets the collection of ProductPicture
    /// </summary>

    public virtual ICollection<ProductPicture> ProductPictures
    {
        get { return _productPictures ?? (_productPictures = new List<ProductPicture>()); }
        protected set { _productPictures = value; }
    }

    /// <summary>
    /// Gets or sets the collection of product reviews
    /// </summary>

    public virtual ICollection<ProductReview> ProductReviews
    {
        get { return _productReviews ?? (_productReviews = new List<ProductReview>()); }
        protected set { _productReviews = value; }
    }

    /// <summary>
    /// Gets or sets the product specification attribute
    /// </summary>

    public virtual ICollection<ProductSpecificationAttribute> ProductSpecificationAttributes
    {
        get { return _productSpecificationAttributes ?? (_productSpecificationAttributes = new List<ProductSpecificationAttribute>()); }
        protected set { _productSpecificationAttributes = value; }
    }

    /// <summary>
    /// Gets or sets the product specification attribute
    /// </summary>

    public virtual ICollection<ProductTag> ProductTags
    {
        get { return _productTags ?? (_productTags = new List<ProductTag>()); }
        protected set { _productTags = value; }
    }

} 
```

}

ProductDto 类

```
public class ProductDto
{

    private ICollection<ProductCategoryDto> _productCategories;

    public virtual string Name { get; set; }

    // Instance members must be virtual on data table objects like Affiliate.cs
    // Virtual is required by data access frameworks so that these frameworks
    // can implement more complex features like lazy loading.

    public virtual string ProductGID { get; set; }

    /// <summary>
    /// Gets or sets the short description
    /// </summary>

    public virtual string ShortDescription { get; set; }

    /// <summary>
    /// Gets or sets the full description
    /// </summary>

    public virtual string FullDescription { get; set; }

    /// <summary>
    /// Gets or sets the admin comment
    /// </summary>

    public virtual string AdminComment { get; set; }

    /// <summary>
    /// Gets or sets a value of used product template identifier
    /// </summary>

    public virtual int ProductTemplateId { get; set; }

    /// <summary>
    /// Gets or sets a value indicating whether to show the product on home page
    /// </summary>

    public virtual bool ShowOnHomePage { get; set; }

    /// <summary>
    /// Gets or sets the meta keywords
    /// </summary>

    public virtual string MetaKeywords { get; set; }

    /// <summary>
    /// Gets or sets the meta description
    /// </summary>

    public virtual string MetaDescription { get; set; }

    /// <summary>
    /// Gets or sets the meta title
    /// </summary>

    public virtual string MetaTitle { get; set; }

    /// <summary>
    /// Gets or sets the search-engine name
    /// </summary>

    public virtual string SeName { get; set; }

    /// <summary>
    /// Gets or sets a value indicating whether the product allows customer reviews
    /// </summary>

    public virtual bool AllowCustomerReviews { get; set; }

    /// <summary>
    /// Gets or sets the rating sum (approved reviews)
    /// </summary>

    public virtual int ApprovedRatingSum { get; set; }

    /// <summary>
    /// Gets or sets the rating sum (not approved reviews)
    /// </summary>

    public virtual int NotApprovedRatingSum { get; set; }

    /// <summary>
    /// Gets or sets the total rating votes (approved reviews)
    /// </summary>

    public virtual int ApprovedTotalReviews { get; set; }

    /// <summary>
    /// Gets or sets the total rating votes (not approved reviews)
    /// </summary>

    public virtual int NotApprovedTotalReviews { get; set; }

    /// <summary>
    /// Gets or sets a value indicating whether the entity is published
    /// </summary>

    public virtual bool Published { get; set; }

    /// <summary>
    /// Gets or sets a value indicating whether the entity has been deleted
    /// </summary>

    public virtual bool Deleted { get; set; }

    /// <summary>
    /// Gets or sets the date and time of product creation
    /// </summary>

    public virtual DateTime CreatedOnUtc { get; set; }

    /// <summary>
    /// Gets or sets the date and time of product update
    /// </summary>

    public virtual DateTime UpdatedOnUtc { get; set; }

    /// <summary>
    /// Gets or sets the collection of ProductCategory
    /// </summary>
    public virtual ICollection<ProductCategoryDto> ProductCategories
    {
        get { return _productCategories ?? (_productCategories = new List<ProductCategoryDto>()); }
        protected set { _productCategories = value; }
    }

} 
```

}

产品类别类

```
public partial class ProductCategory : BaseEntity
{
     public virtual int ProductId { get; set; }

    /// <summary>
    /// Gets or sets the category identifier
    /// </summary>
    public virtual int CategoryId { get; set; }

    /// <summary>
    /// Gets or sets a value indicating whether the product is featured
    /// </summary>
     public virtual bool IsFeaturedProduct { get; set; }

    /// <summary>
    /// Gets or sets the display order
    /// </summary>
     public virtual int DisplayOrder { get; set; }

    /// <summary>
    /// Gets the category
    /// </summary>
     public virtual Category Category { get; set; }

    /// <summary>
    /// Gets the product
    /// </summary>
     public virtual Product Product { get; set; }

} 
```

和 ProductCategoryDto 类

```
public class ProductCategoryDto

{
    /// <summary>
    /// Gets or sets the product identifier
    /// </summary>
    public virtual int ProductId { get; set; }

    /// <summary>
    /// Gets or sets the category identifier
    /// </summary>
    public virtual int CategoryId { get; set; }

    /// <summary>
    /// Gets or sets a value indicating whether the product is featured
    /// </summary>
    public virtual bool IsFeaturedProduct { get; set; }

    /// <summary>
    /// Gets or sets the display order
    /// </summary>
    public virtual int DisplayOrder { get; set; }

    /// <summary>
    /// Gets the category
    /// </summary>
    public virtual CategoryDto Category { get; set; }

    /// <summary>
    /// Gets the product
    /// </summary>
    public virtual ProductDto Product { get; set; }
} 
```

映射是在这样的方法中完成的

```
public List<ProductDto> GetProductCollection(string usernameOrEmail, string userPassword)

    {
        CheckAccess(usernameOrEmail, userPassword);
        if (!_permissionSettings.Authorize(StandardPermissionProvider.ManageCatalog))
            throw new ApplicationException("Not allowed to manage Catalog");

        List<Product> productslist = new List<Product>();
        productslist.AddRange(_productService.GetAllProducts(false));
        List<ProductCategory> productCategorylist = new List<ProductCategory>();
        foreach (var product in productslist)
        {
            productCategorylist.AddRange(_categoryService.GetProductCategoriesByProductId(product.Id, false));

        }

        Mapper.CreateMap<Product, ProductDto>();

        Mapper.CreateMap<ProductCategory, ProductCategoryDto>();
        List<ProductDto> productsDto = Mapper.Map<List<Product>, List<ProductDto>>(productslist);
        List<ProductCategoryDto> productCategoriesDto = Mapper.Map<List<ProductCategory>, List<ProductCategoryDto>>(productCategorylist);

        return productsDto;

    } 
```

问题是我从来没有得到从 ProductDto 到 ProductCategoriesDto 的 Icollection 的映射。其他一切正常。

# html - 根据您在 html 中的位置选择的默认选项

> ID：13474579
> 
> 赞同：0
> 
> 时间：2012-11-20T13:44:45.350
> 
> 标签：html

我已经为此寻找答案，但事实证明有点棘手......

在我的 html 页面上，我有一个包含所有国家/地区列表的下拉菜单。

```
<option value="AF">Afghanistan</option>
<option value="AX">Åland Islands</option>
<option value="AL">Albania</option>
<option value="DZ">Algeria</option> 
```

我的问题是，有没有办法根据访问网站的位置默认选择的选项？（即如果我从南非访问该站点，它将自动更改为南非

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T14:28:40.273

有一些免费服务可让您从客户端进行基于国家和 IP 的地理定位。

我使用了[wipmania](http://www.wipmania.com/en/)免费的 JSONP 服务，使用起来非常简单：

```
<script type="text/javascript">
  // plain JavaScript example
  function jsonpCallback(data) { 
    alert('Latitude: ' + data.latitude + 
          '\nLongitude: ' + data.longitude + 
          '\nCountry: ' + data.address.country); 
  }
</script>
<script src="http://api.wipmania.com/jsonp?callback=jsonpCallback"
        type="text/javascript"></script> 
```

或者，如果您使用支持 JSONP 的框架，例如 jQuery，您可以：

```
// jQuery example
$.getJSON('http://api.wipmania.com/jsonp?callback=?', function (data) { 
  alert('Latitude: ' + data.latitude + 
        '\nLongitude: ' + data.longitude + 
        '\nCountry: ' + data.address.country); 
}); 
```

[检查在此处](http://jsbin.com/eceme)运行的上述代码段。

# r - 从累加值到 R 中的单个值

> ID：13474584
> 
> 赞同：1
> 
> 时间：2012-11-20T13:45:03.133
> 
> 标签：r, statistics, sample, accumulate

```
sample1 <- c(9,9,24,24,27,27,39,45,54,54,54,57,57,57,57,66,66,69,75,81,90,102,105,108,120,120,123) 
```

我怎样才能做到这一点（9,0,15,0,3,0 ...）等等？这个程序叫什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T13:47:49.907

`diff`会做的。（请注意，您需要`0`在第一步之前添加一个从 0 到 9 的“拾取”。）

```
diff(c(0, sample1))
#  [1]  9  0 15  0  3  0 12  6  9  0  0  3  0  0  0  9  0  3  6
# [20]  6  9 12  3  3 12  0  3 
```

# c - C语言如何将小数点后的双精度位格式化为2位？

> ID：13474586
> 
> 赞同：4
> 
> 时间：2012-11-20T13:45:08.877
> 
> 标签：c, formatting

> **可能重复：**
> [限制浮点精度？](https://stackoverflow.com/questions/3383817/limit-floating-point-precision)

在 C 语言中，我需要将用户输入的数字格式化为小数点后 2 位

例如：

```
 float x ; 
 printf("Enter number"); 
```

假设用户输入`4.54234635`

我需要在整个程序中打印和处理： `4.54`

谢谢提前

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-20T13:47:50.430

```
scanf("%.2f",&x); 
```

我认为这将解决一个问题

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-11-20T13:50:33.867

完整列表

```
Integer   display
%d      print as decimal integer
%6d     print as decimal integer, at least 6 characters wide
%f      print as floating point
%6f     print as floating point, at least 6 characters wide
%.2f    print as floating point, 2 characters after decimal point 
```

通过所需的修改（`scanf("%.2f",&x);`在最后一个条目中）将解决您的问题

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-20T13:49:32.093

采用

```
scanf("%.2f",&number); 
```

或者
`printf("%.2f", number);`

# security - Restfull webservice加解密

> ID：13474589
> 
> 赞同：0
> 
> 时间：2012-11-20T13:45:22.593
> 
> 标签：security, encryption

客户端将以 XML 和 JSON 的形式向我发送数据，我需要构建将这些数据存储到数据库中的服务。出于安全目的，我们希望以加密的形式获取，我们的后端是我们想要解密的 java 脚本JavaScript。客户端请求可以来自 PHP、Java、C# 等。你知道任何标准算法在所有流行语言中都有实现，我们可以用于这个项目。我们已经在我们的系统中实现了 DES 算法。如果将在所有其他语言中实现此算法，则很好。如果你们中的任何人请告诉我。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T13:53:53.957

为什么不使用 https 链接？这将透明地加密整个会话，并且在所有平台上都可用。

# jquery - 尝试通过asp提交访问数据库时，从下拉列表中插入隐藏字段会引发错误

> ID：13474590
> 
> 赞同：0
> 
> 时间：2012-11-20T13:45:22.437
> 
> 标签：jquery, asp-classic

我有一个将完成两个操作的 asp 表单。第一个是将数据提交到数据库，第二个是将数据通过电子邮件发送给表单中选择的人。

我有一个下拉菜单，显示员工姓名并传递员工电子邮件地址的值。

我目前正在使用此 Jquery 代码将员工姓名传递给隐藏字段，并希望使用该隐藏字段提交到数据库。

```
$(document).ready( function (){ 

$("#to").change( function(){

  var selectedValue = $("#to option:selected").val();

  var selectedText = $("#to option:selected").text();

       $("#hiddenText").val( selectedText );

       alert("Hidden field text is: " + $("#hiddenText").val());

 });

 }); 
```

这似乎有效，警报显示正确的值。当我尝试提交表单并插入数据库时​​，我收到此错误：Microsoft OLE DB Provider for ODBC Drivers error '80040e57' [Microsoft][ODBC Microsoft Access Driver]Invalid string or buffer length /intranet/EmployeeInfo/Heroes1/ heropost.asp，第 30 行

下面是插入代码：

```
 <%
If (CStr(Request("MM_insert")) = "heroes") Then
  If (Not MM_abortEdit) Then
' execute the insert
Dim MM_editCmd

Set MM_editCmd = Server.CreateObject ("ADODB.Command")
MM_editCmd.ActiveConnection = MM_PhoneDir_STRING
MM_editCmd.CommandText = "INSERT INTO REACH ([To], Dept, prideSelect, flagpoleSelect, [comment], [from]) VALUES (?, ?, ?, ?, ?, ?)" 
MM_editCmd.Prepared = true
MM_editCmd.Parameters.Append MM_editCmd.CreateParameter("param1", 203, 1, 1073741823, Request.Form("hiddenText")) ' adLongVarWChar
MM_editCmd.Parameters.Append MM_editCmd.CreateParameter("param2", 202, 1, 50, Request.Form("dept")) ' adVarWChar
MM_editCmd.Parameters.Append MM_editCmd.CreateParameter("param3", 202, 1, 50, Request.Form("prideSelect")) ' adVarWChar
MM_editCmd.Parameters.Append MM_editCmd.CreateParameter("param4", 202, 1, 255, Request.Form("flagpoleSelect")) ' adVarWChar
MM_editCmd.Parameters.Append MM_editCmd.CreateParameter("param5", 203, 1, 1073741823, Request.Form("comment")) ' adLongVarWChar
MM_editCmd.Parameters.Append MM_editCmd.CreateParameter("param6", 202, 1, 100, Request.Form("from")) ' adVarWChar
MM_editCmd.Execute
MM_editCmd.ActiveConnection.Close

' append the query string to the redirect URL
Dim MM_editRedirectUrl
MM_editRedirectUrl = "HeroesThanks.asp"
If (Request.QueryString <> "") Then
  If (InStr(1, MM_editRedirectUrl, "?", vbTextCompare) = 0) Then
    MM_editRedirectUrl = MM_editRedirectUrl & "?" & Request.QueryString
  Else
    MM_editRedirectUrl = MM_editRedirectUrl & "&" & Request.QueryString
  End If
End If
Response.Redirect(MM_editRedirectUrl)
  End If
 End If
%> 
```

如果我“忽略”隐藏字段并仅从下拉列表中提交值，则表单提交时不会出错，并且信息将添加到数据库中。

关于我需要更改以使其正常工作的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T15:59:33.190

您尝试插入的数据很可能被截断，如果字符串 250 长并且您的数据库字段仅接受 50 个字符，那么您将收到此错误。

更多信息...查看[为什么我会收到 80040E57 / 80040E07 错误？](http://tutorials.aspfaq.com/8000xxxxx-errors/why-do-i-get-80040e57/80040e07-errors.html)

# visual-studio-2010 - Visual Studio 2010 编译问题

> ID：13474604
> 
> 赞同：1
> 
> 时间：2012-11-20T13:46:13.927
> 
> 标签：visual-studio-2010

我在 Visual Studio 2010 中有一个以框架 3.5 为目标的项目，其中包含如下代码：

```
 public class Test    {
        private object _field;
        private Action defaultAction = null;

        public Test(Action a)
        {
            defaultAction = a;
        }

        public Test()
            : this(() => { _field = new object(); })
        {
        }
    } 
```

*   当我从 VS 编译项目时，在第 11 行报告编译错误。
*   当我使用“C:\Windows\Microsoft.NET\Framework\v3.5\msbuild.exe Test.sln”从命令行编译项目时，编译成功。

事实上，这段代码在 VS2008 中编译，但在 VS2010 中以框架 3.5 为目标，没有。

关于发生了什么的任何想法？

**更新**

为了修复 V2010 中的代码，我进行了如下更改（这相当于原始代码）：

```
public class Test    {
    private object _field;
    private Action defaultAction = null;

    public Test(Action a)
    {
        defaultAction = a;
    }

    public Test()
    {
        defaultAction = () => {_field = new object();}
    }
} 
```

但让我担心的是，Visual Studio 正在使用框架 4.0 编译我的代码，这可能会在客户环境（框架 3.5）中部署我的应用程序时导致其他错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T08:43:39.617

我目前无法访问 VS2008 或 .NET 3.5，所以我无法调查为什么它会为您编译。[What's New in the .NET Framework 4 中](http://msdn.microsoft.com/en-gb/library/dd409230%28VS.100%29.aspx)可能有链接的解释

然而，我可以提供的是在 VS2010 中编译它的修复程序。通过将 _field 声明为静态，它的实例将在 Test 类的构造函数中可用。用这个替换你发布的代码的第二行，代码应该编译：

```
private static object _field; 
```

# c++ - 多态成员变量

> ID：13474607
> 
> 赞同：0
> 
> 时间：2012-11-20T13:46:19.917
> 
> 标签：c++, segmentation-fault, polymorphism

[关于多态对象成员](https://stackoverflow.com/questions/13454756/polymorphic-object-members)的问题，我昨天得到了一个优雅的答案。

但是现在我面临一个问题，即变量的行为并没有像我预期的那样。正在使用以下代码：

```
#include <iostream>
#include <math.h>

using std::cin;
using std::cout;
using std::endl;

class Com
{
    public:
        virtual void setReady()
        {
            cout << "Com" << endl;
        }
};

class DerivedCom : public Com
{
    public:
        void setReady()
        {
            cout << "DCom" << endl;
        }

        void somethingElse()
        {
            cout << "else" << endl;
        }

};

class BaseClass
{
    public:
        Com* com;

    public:
        BaseClass(Com* c = new Com) : com(c)
        {
        }

        virtual void setReady()
        {
            com->setReady();
        }
};

class DerivedClass : public BaseClass
{
    // the call to somethingElse() won't compile if I leave out this declaration
    protected:
        DerivedCom* com;

    public:
        DerivedClass() : BaseClass(new DerivedCom) 
        {
        }

        void setReady()
        {
            // This line causes a segfault if I put in the declaration earlier
            this->com->setReady();

            // This line won't compile if I leave out the declaration earlier
            this->com->somethingElse();
        }
};

int main()
{
    DerivedClass* inst = new DerivedClass();

    inst->setReady();
    return 0;
} 
```

问题是，这`DerivedClass::com`实际上是类型`DerivedCom`，但我无法访问任何`DerivedCom`特定的方法，因为编译器找不到它们。如果我添加额外的重新声明`DerivedCom* com`，编译器会找到方法，但会出现分段错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T13:48:22.663

删除那个额外的声明。

如果你确定 a`Com*`是 a`DerivedCom*`那么你就可以`static_cast`了。

```
static_cast<DerivedCom*>(this->com)->somethingElse(); 
```

但是，如果您错了，这可能会崩溃。因此，如果您不确定，那么您`dynamic_cast`可以

```
DerivedCom* dcom = dynamic_cast<DerivedCom*>(this->com);
if (dcom)
    dcom->somethingElse(); 
```

`dynamic_cast`如果对象不是您要求的类型，将返回 NULL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T14:06:48.107

分段错误的原因是您没有使用不同的类型**再次声明变量**，您实际上是在派生类中**定义了一个新指针**，一个从未初始化的指针。因此`this->com->...`将访问派生类`com`并崩溃，因为它是一个**未初始化的指针**。

但是，您要做的是**更改成员指针的类型**。您可以通过**将成员指针的类型设置为模板变量**来做到这一点，如下所示

```
template <class ComType>
class BaseClassTemplate
{
    ComType* com;
    ...;
};

typedef BaseClassTemplate<Com> BaseClass;

class DerivedClass : public BaseClassTemplate<DerivedCom>
{
    ...;
}; 
```

但是，这使基类成为模板，因此要按您的意愿获取它，您需要进行实例化`BaseClass<Com>`以获取您的基类版本。正如我所展示的，您可以将其设为派生类或仅作为 typedef。

# java - 范围、方法返回

> ID：13474611
> 
> 赞同：0
> 
> 时间：2012-11-20T13:46:27.560
> 
> 标签：java, scope

我一直在尝试编写一个可以显示斐波那契数列的程序。但是，我输入的任何数字都会输出 0。我怀疑它与变量的范围有关，或者我的返回值有问题。有人可以看看我的代码并弄清楚它是否真的是那些问题？我对java有点陌生，所以即使是基本的对我来说也很困难。

```
 public static void main(String args [])
  {
    Scanner in = new Scanner(System.in);

    int number = 0;

    do{
        System.out.print("Which Fibonacci Number would you like? ");
        fib = in.nextInt();
    }while(number < 0 || number > 71);

    System.out.print("Fibonacci #"+number+" is "+fibcalc(fib)+"\n");
}

public static double fibcalc(double number)
{
    double prevNumber1 = 0;
    double prevNumber2 = 1;
    double fib = 0;

    for(int i =0; i < number; i++){
        fib = prevNumber1;
        prevNumber1 = prevNumber2;
        prevNumber2 = fib + prevNumber2;

}
    return fib;
} 
```

做了一些修改，只差一个错误。

```
 error: cannot find symbol
    System.out.print("Fibonacci #"+number+" is "+fibcalc(fib)+"\n");
    symbol:   variable fib 
```

我有一个快速的问题。一个方法可以调用另一个变量的方法吗？变量在花括号内。我的代码中的一种。似乎我的大多数错误都与这个相似。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T13:48:16.123

这与范围无关。看看这段代码：

```
while(i < fib){
    fib = prevNumber1;
    ...
} 
```

您将`fib`变量用作“要执行的迭代次数”和“当前结果”。这是两个独立的概念，应该存储在不同的变量中。

特别是，在第一次迭代中，`fib`将被设置为`0`并将`i`递增到 1...因此您的循环将终止，并返回 0。

我还建议将您的参数类型更改为`int`并使用`long`或`BigInteger`用于斐波那契数变量（取决于您想要支持的范围）。这个问题的任何部分都不需要非整数值，所以你根本不应该使用`double`。

最后，我建议使用`for`循环而不是`while`循环 - 您想要执行给定数量的迭代，而在 Java 中编写它的惯用方式是：

```
for (int i = 0; i < count; i++) {
    // whatever
} 
```

# objective-c - 无法更改 UISearchbar 文本字段的大小

> ID：13474612
> 
> 赞同：0
> 
> 时间：2012-11-20T13:46:30.673
> 
> 标签：objective-c, ios, uitextfield, uisearchbar

我在其中创建`UISearchBar`了一个名为. 现在我想在代码中改变它的宽度和高度却做不到。这是我的代码：`InterfaceBuilder``IBOutlet``userSearchBar`

```
 for (UIView * const subview in userSearchBar.subviews) {

    if ([subview isKindOfClass: NSClassFromString(@"UISearchBarBackground")]) {
        [subview removeFromSuperview];
    }

    if ([subview isKindOfClass: [UITextField class]]) {

        UITextField * const textField = (UITextField *)subview;

        textField.textColor = [UIColor redColor];
        textField.text = @"Enter text";
        textField.frame = CGRectMake(0, 0, 250, 50);
    }
} 
```

所有其他更改（文本、颜色、删除栏）都可以正常工作，但不能更改大小。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-20T13:54:00.807

我自己也遇到过这个问题，我发现最好的方法是从头开始编写自己的搜索栏，子类化`UIView`. 这使我可以合法地访问我可能想要自定义的所有属性（例如考虑设计或品牌时的背景、颜色），而不是像这样尝试破解。这是未来的证明，不是那么难，也不是很耗时。这是一个有趣的练习，将提供你想要的。

# entity-framework - 如何在没有硬编码 nameOrConnectionString 的情况下使用 EF CodeFirst 迁移

> ID：13474619
> 
> 赞同：5
> 
> 时间：2012-11-20T13:46:41.753
> 
> 标签：entity-framework, migration, code-first, dbcontext, dbmigrator

如果不在所需的无参数构造函数的基础上硬编码名称或连接字符串，如何使 EF 迁移工作？

EF 迁移迫使您将默认构造函数添加到自定义 dbcontext。在 dbcontext 的基础上，您必须提供名称或连接字符串。

```
public class CustomDbContext : DbContextBase
    {
        public CustomDbContext ()
            : base("theconnectionstringwedontwanttoset") //hardcoded connection string
        {
        } 
```

我们需要对构造函数进行硬编码这一事实是我们无法使用的，因为在我们的客户端应用程序中，我们在没有配置文件的情况下工作，并且我们动态建立连接，因为我们连接到许多不同的数据库（服务器、本地 sql compact）。

在探索了 DbMigrationsConfiguration 类之后，我发现了一个名为 TargetDatabase 的 DbConnectionsInfo 属性，可以在构造函数中进行设置。但即使这个解决方案也不起作用。这就是我所做的：

```
public sealed class Configuration : DbMigrationsConfiguration<CustomDbContext>
    {
        public Configuration()
        {
            AutomaticMigrationsEnabled = true;
            //Setting the TargetDatabase in the hope it will use it in the migration  
            TargetDatabase = new DbConnectionInfo("Server=xxx;Database=xxx;Trusted_Connection=True", "System.Data.SqlClient");
        }

public class MigrationInitializer : MigrateDatabaseToLatestVersion<CustomDbContext, Configuration>
    {
    } 
```

我可以看到最终在 DbMigrator 中使用了 Activator.CreateInstance，并且我希望从这个类中使用 TargetDatabase.Create...或其他东西。

欢迎任何帮助或反馈。

提前致谢，

威尔科

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-21T07:39:01.440

有可能是[在这里查看答案](https://stackoverflow.com/questions/15504465/entityframework-code-first-custom-connection-string-and-migrations) 我还在这个问题中包含了一个测试程序。

# ios - 从门户中删除配置文件会导致应用程序过期吗？

> ID：13474627
> 
> 赞同：5
> 
> 时间：2012-11-20T13:47:12.590
> 
> 标签：ios, iphone, ipad, itunes

我们有一个使用临时配置文件分发给员工的应用程序。

我们现在有一个业务需求，即从配置门​​户中删除配置文件（尽管它将保留在设备上）。

我的印象是，在使用临时分发时，会定期检查 Apple 的服务器（尽管我相信这是检查存储在设备上的配置文件与存储在服务器上的证书的有效性，并且不应该除非证书被吊销，否则会受到配置文件的任何更改的影响，对吗？）。

我的问题是：-

**从我们的供应门户中删除临时供应配置文件会导致应用程序停止在员工的设备上运行吗？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T13:49:12.687

据我所知，这没有发生。配置文件仅在安装时检查，无法像证书一样“撤销”配置文件。因此，该应用程序仍然可以使用，并且可以使用旧的配置文件进行安装。

# logging - JBoss 7.1.1 不记录

> ID：13474630
> 
> 赞同：1
> 
> 时间：2012-11-20T13:47:27.667
> 
> 标签：logging, jboss7.x

我们有两个使用 SLF4J 进行日志记录的应用程序。

在一个应用程序中一切正常，另一个不记录。这意味着，除了`System.out.println`.

*   不依赖声明的 slf4j 模块
*   没有显示错误（缺少对 slf4j 的依赖）。
*   两个应用程序使用相同的类别。
*   war 文件不包含任何日志库

因为我无法进一步缩小问题的范围，所以我正在寻找日志语句可能不会出现在 server.log 中的原因。

# javascript - 从打字稿/javascript生成的谷歌地图显示为灰色框

> ID：13474632
> 
> 赞同：1
> 
> 时间：2012-11-20T13:47:30.030
> 
> 标签：javascript, google-maps, typescript

我有以下生成谷歌地图实例的打字稿类。我是 javascript / typescript 和 HTML 的新手！

```
/// <reference path="./google.maps.d.ts" />
module Mapping {
    export class GoogleMap implements IMap {

        public name: string;
        private map: any;
        private options: any;

        constructor (mapDiv: Element) {
            this.name = "GoogleMap";
            this.options = {center: new google.maps.LatLng(53.83305, -1.66412), zoom: 3, MapTypeId: 'terrian' };
            this.map = new google.maps.Map(mapDiv, this.options);
        }
    }
} 
```

在我看来，我有以下几点；

```
<!DOCTYPE html>
<html>
    <head><title>TypeScript Mapping</title></head>
    <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=MyKEYGOESHERE&sensor=false"></script>
    <script type="text/javascript" src="~/scripts/require.js"></script>
    <script type="text/javascript" src="~/typings/Mapping.js"></script>
        <script type="text/javascript">
            function initialize() {
                var mapCanvas = document.getElementById("map");
                Mapping.GoogleMap(mapCanvas);
            }
        </script>
    <body onload="initialize()">
    <div id="map" style="height: 512px; width: 512px;"></div>
  </body>
</html> 
```

我在运行时得到的只是一个灰色框，在此框内拖动会将指针更改为手形指针，因此看起来控件已创建好，只是没有显示任何地图详细信息。

有人有什么想法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T16:06:59.653

只是为了回应评论中的发现：

看起来您的地图选项定义不正确。尝试...

```
constructor (mapDiv: Element) {
    this.name = "GoogleMap";
    this.options = {
        center: new google.maps.LatLng(53.83305, -1.66412),
        zoom: 3,
        MapTypeId: google.maps.MapTypeId.TERRAIN
    };
    this.map = new google.maps.Map(mapDiv, this.options);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-30T21:28:02.113

**回答：**

谷歌`MapTypeId`是一个常数，所以你可以直接去这里的属性，比如：

```
google.maps.MapTypeId.CONSTANT 
```

目前它们支持 4 种类型：

```
Constant    - Description
HYBRID      - Displays a photographic map + roads and city names
ROADMAP     - Displays a normal, default 2D map
SATELLITE   - Displays a photographic map
TERRAIN     - Displays a map with mountains, rivers, etc. 
```

* * *

**添加在：**

我在 TypeScript 应用程序/页面中为 Google 地图创建了一个简短的演示应用程序：

[https://github.com/DominikAngerer/typescript-google-maps](https://github.com/DominikAngerer/typescript-google-maps)

目前支持：

*   默认谷歌地图
*   SnazzyMap 支持（只需将您的 SnazzyMap 替换为我在 SnazzyMaps.ts 中配置的那个）
*   默认中心对象
*   免费地理 IP 位置（每小时 10.000 次请求）
*   新的默认图标 /images/icon.png
*   新的默认图标为 .PSD /images/icon.psd
*   不需要 jQuery
*   从 Json-Generator.com 生成的测试数据
*   信息框 JS 插件
*   信息框示例
*   信息框的模板示例
*   全凉亭支持

待办事项上还提供类型支持，因此您到达那里的问题不应该再次发生。

# php - 图像旋转（）不起作用

> ID：13474634
> 
> 赞同：2
> 
> 时间：2012-11-20T13:47:33.893
> 
> 标签：php, apache

我对 imagerotate() PHP 函数有疑问。我运行下面的脚本，它使用 imagejpeg() 成功创建了新图像，但是新图像与原始图像相同，因此它不会旋转它。它在 Apache error.log 中没有显示任何错误消息，所以我不知道。

$file 包含以下形式的文件名：IMG_8841.JPG

我希望你能帮助我，谢谢。

```
$filename='./original/'.$file;
$new='./rotated/'.$file;
$original_photo = imagecreatefromjpeg($filename);
imagerotate ($original_photo , 90 , 0 );
imagejpeg($original_photo, $new);
imagedestroy($original_photo); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-20T13:51:08.733

尝试

```
$original_photo = imagerotate($original_photo, 90, 0); 
```

否则您的对象不会被修改。

或者更好的事件：

```
$new_photo = imagerotate ($original_photo , 90 , 0 );
imagejpeg($new_photo, $new); 
imagedestroy($original_photo);
imagedestroy($new_photo); 
```

# android - Android 应用程序名称被截断

> ID：13474635
> 
> 赞同：5
> 
> 时间：2012-11-20T13:47:39.557
> 
> 标签：android, android-applicationinfo

我的应用程序名称在某些手机中被截断是否有任何解决方案可以在所有手机中显示全名？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T14:03:47.147

您可以拆分名称，如“android\nAppliction”在 String.xml 中定义应用程序名称和用于拆分应用程序名称的 '\n' 分隔符

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T14:04:48.063

您的应用程序名称不会被截断。安装在显示您的应用程序的移动设备上的启动器决定了显示标题的合理长度。每个不同的启动器都有不同的规则（基于屏幕分辨率、用户设置等），因此您永远无法完全控制。

*   显示部分标题没什么大不了的：用户知道他下载了什么
*   如果您想确保每个人都显示全名，请使用较短的名称！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T13:50:28.830

如果它太长，它将被截断以适合启动器。启动器应用程序也控制此行为。除了缩短名称之外，您无能为力。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T13:50:33.620

对不起，答案是否定的。你对此无能为力。也许更短的名字？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-05-20T18:38:33.473

我注意到这发生在我的一部旧手机上，这个名字有点太长了，所以“mylongappname”看起来像：

```
mylongappnam
     e 
```

我唯一的办法似乎是添加一个破折号“mylongapp-name”。我希望可以添加一个人造字符来告诉 android 如果需要的话在哪里拆分名称，否则将其保留为一个词。

# php - 如何在 ZF2 的 ZfcAdmin 模块中关闭加载布局

> ID：13474643
> 
> 赞同：0
> 
> 时间：2012-11-20T13:47:58.230
> 
> 标签：php, zend-framework2

我正在尝试关闭 zfc-admin 中某些控制器的布局。不幸的是，我发现的所有方法都恰恰相反。关闭视图并加载布局。

例如。

```
$viewModel = new ViewModel();
        $viewModel->setTerminal(true);
        return $viewModel; 
```

ZfcAdmin 的配置中是否存在干扰 setTerminal() 方法的常规功能的内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T17:06:25.253

作为另一个*临时*解决方案，您可以编辑`ZfcAdmin\Module.php`以修复此错误。像这样改变：

```
public function selectLayoutBasedOnRoute(MvcEvent $e)
{
    $app    = $e->getParam('application');
    $sm     = $app->getServiceManager();
    $config = $sm->get('config');

    if (false === $config['zfcadmin']['use_admin_layout']) {
        return;
    }

    $match = $e->getRouteMatch();
    if (!$match instanceof RouteMatch || 0 !== strpos($match->getMatchedRouteName(), 'zfcadmin')) {
        return;
    }

    $layout     = $config['zfcadmin']['admin_layout_template'];
    $controller = $e->getTarget();
    if( ! $controller->getEvent()->getResult()->terminate() ) // Add by Vinicius Garcia, to fix ->setTerminal() bug (https://github.com/ZF-Commons/ZfcAdmin/issues/8)
        $controller->layout($layout);
} 
```

只需添加`if( ! $controller->getEvent()->getResult()->terminate() )`之前设置的布局即可解决问题。

当然，更改第三方模块的代码是一种*不好的做法，但我想这比在所有需要这个的视图中包含额外的代码要好...*

当 ZF-Commons 修复错误时，您可以使用他们的解决方案覆盖模块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T14:49:28.673

您在问题中提供的代码会禁用布局渲染并仅输出操作视图。

你能澄清你的问题..？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T10:07:04.933

作为临时解决方案，按照 Jurian Sluiman 的评论，当您想要禁用布局时，您可以在调用所需操作时简单地将 get 参数添加到 (/?disableLayout=true)，并在布局中

```
if (isset($_GET['disableLayout']) && $_GET['disableLayout'] == 'true') die(); 
```

或类似的东西（根据您的需要调整）

# javascript - javascript append方法锚链接在jquery mobile中不起作用

> ID：13474647
> 
> 赞同：1
> 
> 时间：2012-11-20T13:48:10.740
> 
> 标签：javascript, cordova, jquery-mobile

锚链接不适用于附加方法我也使用链接 data-ajax="false" 请告诉我？

```
$('#serviceContainer').append('<li data-role="list-divider" role="heading">'+trimText(events.event_title,30)+'</li>'+
'<li data-theme="d" class="li_list">'+'<div data-role="content"><a  data-ajax="false" data-transition="slide" href="detail.htm?eid='+events.event_id+'">Details</a></div></li>').trigger("create"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T14:15:43.690

如果我是你，我会考虑使用模板来降低代码的复杂性并使其更容易使用。有很多模板解决方案，甚至是[jQuery 的](http://github.com/jquery/jquery-tmpl)。

这是相当直接的。您首先在脚本标签中提供您的模板：

```
<script id="itemTemplate" type="text/x-jquery-tmpl">
    <li data-role="list-divider" role="heading">
        <img src="${img}" />
        <div data-role="content">
            <a data-ajax="false" data-transition="slide" href="${href}">
                Details
            </a>
        </div>
    </li>
</script> 
```

在这里，我已经表明我想在我决定使用它时为我的模板提供一个图像和一个 href 值。

在我的 jQuery 代码中，我可以获取此模板并为其命名：

```
var itemtmpl = $( "#itemTemplate" ).template(); 
```

最后，当我想使用它时，我只需为其提供一个包含所有占位符值的对象文字：

```
$.tmpl( itemtmpl , { img: "mainImage.jpg", href: "main.html" } )
    .appendTo( "#mylist" );​​​​​​​​​​​​​​​​​​​​ 
```

请注意这与您最初的方法相比有多友好。

演示：http: [//jsfiddle.net/2k2HQ/](http://jsfiddle.net/2k2HQ/)

# php - 在尺寸大于大多数桌面分辨率的“灯箱”中裁剪图像的可行解决方案

> ID：13474649
> 
> 赞同：0
> 
> 时间：2012-11-20T13:48:15.690
> 
> 标签：php, jquery, crop, image-resizing

我正在使用 Lightview 3 在 iframe 中显示图像。这有一个表单，允许用户放大和缩小图像并提交表单以在提交表单时基于视图中的图像生成缩略图。

我遇到的问题是我们必须使用大量图像（宽度 1100px+）等。所以在 lightview 中打开它看起来并不好，因为 iframe 中有滚动条。

什么是让图像以一半大小显示并在正确创建全尺寸图像的缩略图时使用某种形式的缩放的最佳方法。谁能建议一些方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T14:47:28.850

这种事情我做过很多次。我的环境是使用 Visual Basic 的 ASP.NET 和我用来实现我想要的结果的技术，其中[FancyBox](http://fancybox.net/)、[JCrop](http://deepliquid.com/content/Jcrop.html)和[Uploadify](http://www.uploadify.com/)。

首先，我设置了 FancyBox（还没有使用过 FancyBox2）来打开一个带有 iframe 的模式弹出窗口，该窗口的页面有一个预览区域（在我的例子中是 344x270）和一个使用 uploadify 上传图像的地方。

上传、验证并创建缩略图后，我将创建一个包含有关此图像的信息的对象。这包括文件名、扩展名、原始宽度和高度，以及用于缩放图像以适合我的 344x270 预览（裁剪框）区域的新宽度和高度。

为了找到这个新的宽度和高度，我使用以下用 VB.NET 编写的代码：

```
Dim objImage As System.Drawing.Image = System.Drawing.Image.FromFile(path)
Dim orig_h = objImage.Height
Dim orig_w = objImage.Width
Dim cropbox_width, cropbox_height As Integer
If objImage.Width > objImage.Height Then
    cropbox_width = 344
    cropbox_height = (344 / objImage.Width) * objImage.Height

    If cropbox_height > 270 Then
        Do Until cropbox_height <= 270
             cropbox_width = cropbox_width - 1
             cropbox_height = (cropbox_width / objImage.Width) * objImage.Height
         Loop
     End If
 Else
    cropbox_height = 270
    cropbox_width = (270 / objImage.Height) * objImage.Width

    If cropbox_width > 344 Then
        Do Until cropbox_width <= 344
               cropbox_height = cropbox_height - 1
               cropbox_width = (cropbox_height / objImage.Height) * objImage.Width
         Loop
     End If
  End If 
```

基本上，我试图确定它是纵向还是横向，然后找到纵横比以缩小它以适合我的预览（裁剪框）区域。

一旦确定，我将它们添加到我的对象中，将其序列化并将其发送回上传页面（FancyBox iframe），设置预览（裁剪框）区域的图像路径，设置返回对象的高度和宽度，存储原始高度和宽度，然后启动JCrop。

从这里他们可以裁剪我有代码的图像，以根据他们裁剪预览图像的方式裁剪原始图像。我不会详细介绍此代码和技术，因为您没有询问有关裁剪的问题。

我知道这并不完全符合您的要求，因为听起来不会进行上传或裁剪，但我认为缩小图像的代码可能会为您指明正确的方向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T13:53:20.300

1.  [Fancybox](http://fancyapps.com/fancybox/) - 我的最爱（支持很多东西，而不仅仅是图像）
2.  [http://www.designyourway.net/blog/resources/30-efficient-jquery-lightbox-plugins/](http://www.designyourway.net/blog/resources/30-efficient-jquery-lightbox-plugins/)这是一个精心编译的替代列表

# c++ - C ++将派生类的属性设置为从同一基类派生的未知类对象？

> ID：13474654
> 
> 赞同：0
> 
> 时间：2012-11-20T13:48:30.940
> 
> 标签：c++, class, inheritance, parent, base

我有 3 个类，一个基类，一个父类和一个子类。Parent 有`m_children`一个可以有多个孩子的向量，但是一个孩子只能有一个父对象作为它的`m_parent`属性。我应该如何实现这个？这是课程的快速预览（为了问题而重写）

基数.h

```
class Base
{
public:
    Base();
    virtual void getClid();
    virtual void setClid();
private:
    int m_clid;
}; 
```

父.h

```
#include <vector>
#include "Base.h"
#include "Child.h"

class Parent : public Base
{
public:
    Parent();
    void addChild(Child* child);
    void removeChild(Child* child);
    Child* getChild(int index);
private:
    std::vector<Child*> m_children;
}; 
```

孩子.h

```
#include "Base.h"

class Child : public Base
{
public:
    Child();
    Base* getParent();
    void setParent(Base* parent);
private:
    Base* m_parent;
}; 
```

如您所见，现在这里的问题是我只能在“Child.h”中包含“Parent.h”，或者反过来，不能同时包含两者。我如何告诉孩子他父母的类型？下面的代码可以正常工作，但是如果我想`m_parent->removeChild(this);`从 Child 对象的析构函数中调用例如，它将不起作用，因为 Child 只知道 Parent 的 getClid 和 setClid 方法，它们都在“Base.h”中定义

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T13:56:44.180

如果我理解你的问题，你可以为 Child.h 做类似的事情：

```
#include "Base.h"

class ParentObject;

class Child : public Base
{
public:
    Child();
    ParentObject* getParent();
    void setParent(ParentObject* parent);
private:
    ParentObject* m_parent;
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T13:59:51.570

您可以在 Parent 标头中进行前向声明`child`，反之亦然，从而打破循环依赖。

```
#include <vector>
#include "Base.h"

class Child;    
class Parent : public Base
{
public:
    Parent();
    void addChild(Child* child);
    void removeChild(Child* child);
    Child* getChild(int index);
private:
    std::vector<Child*> m_children;
}; 
```

和

```
#include "Base.h"
class Parent;    
class Child : public Base
{
public:
    Child();
    Parent* getParent();
    void setParent(Parent* parent);
private:
    Parent* m_parent;
}; 
```

但我得说，这里有太多的原始指针、太多的设置器和非接口。我闻到了一个狡猾的设计。

# php - 如何对多维数组的列求和？

> ID：13474656
> 
> 赞同：1
> 
> 时间：2012-11-20T13:48:34.920
> 
> 标签：php, arrays, multidimensional-array, array-column, array-sum

我有如下数组数据：

```
[
    'A1' => [1, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    'A2' => [1, 1, 0, 0, 0, 0, 0, 0, 0, 0],
    'A3' => [0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
]; 
```

我想添加列值并生成一个平面数组。

我想要这样的答案：

```
[2, 1, 0, 0, 0, 0, 0, 0, 0, 0] 
```

php中是否有任何数组函数可以做到这一点？否则我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T13:56:28.747

总是有自定义代码：

```
function array_sum_rows($arr) {
    $out = array();
    foreach ($arr as $row) {
        foreach ($row as $i => $val) {
            $out[$i] = isset($out[$i]) ? $out[$i] + $val : $val;
        }
    }
    return $out;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T13:53:01.260

```
$multiArray = ... //your array
$sumArray = array();
$i = 1;

foreach ($multiArray as $key => $array) {
    $sumArray[$i] = array_sum($array);
    $i++;
} 
```

这将适用于您的阵列。你会得到一个数组

[http://php.net/manual/en/function.array-sum.php](http://php.net/manual/en/function.array-sum.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T14:00:39.497

不幸的是，在转置中丢失了实际索引：

```
function array_transpose($arr) {
    return call_user_func_array(
        'array_map',
        array_merge(
            array(NULL),
            $arr
        )
    );
}

$transposedArray = array_transpose($myData);
$result = array_map('array_sum', $transposedArray);
var_dump($result); 
```

但是可以通过以下方式恢复索引

```
$result = array_combine(array_keys(end($myData)), $result); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-05T21:26:15.340

“转置”输入数组（将数据旋转 90 度，使列变为行），然后将新的“行”输入到，`array_map()`以便每个都`array_sum()`调用它。

代码：（[演示](https://3v4l.org/SZbEP)）

```
$array = [
    'A1' => [1, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    'A2' => [1, 1, 0, 0, 0, 0, 0, 0, 0, 0],
    'A3' => [0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
];

var_export(array_map('array_sum', array_map(null, ...array_values($array)))); 
```

*在扩展运算符 ( ) 之前调用`array_values()`是必要的，`...`直到使用不会阻塞字符串键的 php 版本。

生成平面输出数组：`[2, 1, 0, 0, 0, 0, 0, 0, 0, 0]`

# wpf - 如何将三步操作更改为 WPF 中的命令？

> ID：13474659
> 
> 赞同：1
> 
> 时间：2012-11-20T13:48:48.357
> 
> 标签：wpf, mvvm, icommand, relaycommand

我正在学习 MVVM 设计模式，所以我试图将一些操作更改为命令。
这里举个例子，MainWindow有一个Canvas作为容器，用户可以通过拖拽来绘制矩形。所以我写代码如下

```
protected override void OnMouseLeftButtonDown(MouseButtonEventArgs e)
{
    base.OnMouseLeftButtonDown(e);
    StartPoint = e.GetPosition(this);      
    shape = new Rectangle();
    shape.Fill = Brushes.Transparent;
    shape.Stroke = Brushes.Black;
    shape.StrokeThickness = 1;
    this.Children.Add(shape);
}

protected override void OnMouseMove(MouseButtonEventArgs e)
{
    Point endpoint = e.GetPosition(this);
    double left = Math.Min(endpoint.X, StartPoint.X);
    double top = Math.Min(endpoint.Y, StartPoint.Y);
    shape.Margin = new Thickness(left, top, 0, 0);
    shape.Width = Math.Abs(endpoint.X - StartPoint.X);
    shape.Height = Math.Abs(endpoint.Y - StartPoint.Y);
    shape.Stroke = Brushes.Black;
    shape.StrokeThickness = 2;
}

protected override void OnMouseLeave(MouseButtonEventArgs e)
{
    //end
} 
```

因为也许我想添加 Undo 功能，以便在 Undo 调用后矩形会消失，所以我想将这 3 个步骤变成一个命令。我该怎么做？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T14:28:21.373

Microsoft 的 Expression Blend Behaviors 就是这样做的。要实现和使用您自己的行为，您不需要 Expression Blend，只需要可下载的 SDK。

它的工作方式是你实现 Behavior where T : DependencyObject。该类有两个可覆盖的方法 OnAttach() 和 OnDetach()，您可以将它们连接和取消连接到您的事件，并将上述逻辑放入行为中。如果你要命名你的类 DrawRectangleBehavior，那么你需要做的就是：

```
....
xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"
....

<Canvas>
    <i:Interaction.Behaviors>
        <myBlend:DrawRectangleBehavior />
    </i:Interaction.Behaviors>
</Canvas> 
```

和行为（我没有测试这个）

```
using System;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Input;
using System.Windows.Interactivity;
using System.Windows.Media;
using System.Windows.Shapes;

namespace MyCompany.Common.Behaviors
{
    public class DrawRectangleBehavior : Behavior<Canvas>
    {
        Point StartPoint;
        Shape shape;

        protected override void OnAttached()
        {
            AssociatedObject.PreviewMouseLeftButtonDown += OnMouseLeftButtonDown;
            AssociatedObject.PreviewMouseMove += OnMouseMove;
            AssociatedObject.MouseLeave += OnMouseLeave;
        }

        protected override void OnDetaching()
        {
            AssociatedObject.PreviewMouseLeftButtonDown -= OnMouseLeftButtonDown;
        AssociatedObject.PreviewMouseMove -= OnMouseMove;
        AssociatedObject.MouseLeave -= OnMouseLeave;
        }

        protected void OnMouseLeftButtonDown(object o, MouseButtonEventArgs e)
        {
            StartPoint = e.GetPosition(AssociatedObject);
            shape = new Rectangle();
            shape.Fill = Brushes.Transparent;
            shape.Stroke = Brushes.Black;
            shape.StrokeThickness = 1;
            AssociatedObject.Children.Add(shape);
        }

        protected void OnMouseMove(object o, MouseEventArgs e)
        {
            Point endpoint = e.GetPosition(AssociatedObject);
            double left = Math.Min(endpoint.X, StartPoint.X);
            double top = Math.Min(endpoint.Y, StartPoint.Y);
            shape.Margin = new Thickness(left, top, 0, 0);
            shape.Width = Math.Abs(endpoint.X - StartPoint.X);
            shape.Height = Math.Abs(endpoint.Y - StartPoint.Y);
            shape.Stroke = Brushes.Black;
            shape.StrokeThickness = 2;
        }

        protected void OnMouseLeave(object o, MouseEventArgs e)
        {
            //end
        }

    }
} 
```

你有一段可重用的代码。

请看以下教程[WPF 教程 | 混合行为](http://wpftutorial.net/Behaviors.html)

以及下面的下载链接[Expression Blend SDK](http://www.microsoft.com/en-us/download/details.aspx?id=10801)

# sql - Oracle：子查询——另一种方式？

> ID：13474660
> 
> 赞同：0
> 
> 时间：2012-11-20T13:48:50.223
> 
> 标签：sql, oracle

这是关于 Oracle 中的查询。

我有一个主表，其中存储项目的 ID、名称和描述以及代码。我使用的表有超过 4 个代码来描述健康、状态等。代码及其描述在同一个表中，比如通用表。

当我在主表上选择查询时，我必须使用子查询从通用表中获取代码的描述。查询变得更大，因为我必须对每个代码进行子查询。

有没有其他方法可以得到输出？

```
Master Table:
-------
Id: 100

Name:

Desc:
Health: H1

Status: S1

code3: c1

.........

........
........

Generic Table:
--------------
Code Description

H1   red

H2   green

..   ......

S1  Critical

..  ........

..  ........

c1  ........
............
............ 
```

对于 id 100，我使用了查询，

```
 SELECT  ID,
    PROJ_NAME,
    PROJ_DESC,
         (SELECT Description FROM generic WHERE id = P.Health) Health,
         (SELECT Description FROM generic WHERE id = P.status) Code2,
         (SELECT Description FROM generic WHERE id = P.Code3) Code3,
    FROM master P
    WHERE ID in (100); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T13:53:59.800

你可以使用`JOIN`而不是`SUBQUERY`

```
SELECT  ID,
        PROJ_NAME,
        PROJ_DESC,
        a.Description AS Health,
        b.Description AS Code2,
        c.Description AS Code3
FROM    master P
        INNER JOIN generic a
            ON a.id = P.Health
        LEFT JOIN generic b
            ON b.id = P.status
        LEFT JOIN generic c
            ON c.id = P.HCode3
WHERE p.id = 100 
```

*   [加入与子查询](https://stackoverflow.com/questions/2577174/join-vs-subquery)

# vba - 为什么这不会自动将下一个条目发布到下一行？

> ID：13474663
> 
> 赞同：0
> 
> 时间：2012-11-20T13:49:07.570
> 
> 标签：vba, excel, excel-2010

我已经生成了这个代码来坐在属于用户窗体的按钮上......

```
 Private Sub CommandButton1_Click()

Dim lngWriteRow As Long

Dim ws As Worksheet
Set ws = Worksheets("Sheet1")

NextRow = Cells(Rows.Count, 2).End(xlUp).Row + 1

lngWriteRow = ws.Cells(Rows.Count, 2).End(xlUp) _
.Offset(12, 0).NextRow

    ws.Range("B" & lngWriteRow) = TextBox1.Value
    ws.Range("C" & lngWriteRow) = TextBox2.Value
    ws.Range("D" & lngWriteRow) = TextBox3.Value
    ws.Range("E" & lngWriteRow) = ComboBox1.Value
    ws.Range("F" & lngWriteRow) = TextBox4.Value
    ws.Range("G" & lngWriteRow) = ComboBox2.Value

End Sub 
```

它不会自动移动到下一行，并且会覆盖第 14 行，当我希望它在 14 中有数据时更新 15，然后当 15 有数据时，更新 16 等等...

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T14:09:43.323

由于您只将数据放在 B 列以后，因此您应该查看这些列，而不是您的代码当前正在执行的 A 列。这应该解决它：

```
lngWriteRow = ws.Cells(Rows.Count, 2).End(xlUp).Offset(12, 0).Row + 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T14:32:40.747

虽然 John 似乎一针见血，但我认为您可以像这样进一步简化您的代码。请参阅我在`lngWriteRow`分配位置下的评论：

```
Private Sub CommandButton1_Click()

Dim lngWriteRow As Long

Dim ws As Worksheet
Set ws = Worksheets("Sheet1")

With ws

    '-> if you are going to offset 12 rows then add 1 more, just offset to 13 and be done!
    lngWriteRow = .Cells(.Rows.Count, 2).End(xlUp).Offset(13, 0).Row

    .Range("B" & lngWriteRow) = TextBox1.Value
    .Range("C" & lngWriteRow) = TextBox2.Value
    .Range("D" & lngWriteRow) = TextBox3.Value
    .Range("E" & lngWriteRow) = ComboBox1.Value
    .Range("F" & lngWriteRow) = TextBox4.Value
    .Range("G" & lngWriteRow) = ComboBox2.Value

End With

End Sub 
```

# javascript - 使用 jQuery 在回调函数中引用父对象

> ID：13474671
> 
> 赞同：0
> 
> 时间：2012-11-20T13:49:18.663
> 
> 标签：javascript, jquery

我有一个动态生成的页面，其中包括一定数量（用户动态定义）的高级散点图。我打算创建一个定义散点图本身的 JavaScript 对象，即它采用一些参数、一些数据和一些容器 ID，并将创建获得可视化所需的各种元素：画布元素、工具栏等。这样做，我从以下（简化的）类开始：

```
(function () {
    if (!this.namespace) { this.namespace = {};}

    this._instances = { index: 0 };

    this.namespace.ScatterPlot = function (containerId, file, options) {
        _instances.index ++;
        this.id          = this.containerId+"-"+_instances.index ;
        this.containerId = containerId ;
        _instances [this.id] = this;

        // ... Do stuffs with file and options ...

        // Initialize elements once the DOM is ready
        $(this.updateDOM);
    }

    namespace.ScatterPlot.prototype = {
        updateDOM: function() {
            $("<canvas>")
                .click(clickCallback)
                .appendTo("#"+this.containerId);
            //(...)
        },

        clickCallback: function() {
            alert("Some click: "+this.id);
        }
    }

})(); 
```

每个对象都可以通过以下方式创建：

```
var v1 = new namespace.ScatterPlot("container1", "foo", "foo");
var v2 = new namespace.ScatterPlot("container2", "foo", "foo"); 
```

这里有两个问题：（1）在 updateDOM 中，'this' 没有引用我的初始 ScatterPlot 对象，这意味着这个示例永远不会工作，以及（2）同样，clickCallback 将无法引用散点图'这' 要么。

我是 javascript 新手，我仍在努力理解 javascript 中 OO 编程的逻辑，所以**问题是**：我在这里走错了方向吗？经过一番挖掘，我可以通过将其传递给 updateDOM 来大致实现我想要的：

```
$(this.updateDOM(this)); // This blows my eyes but does the trick, at least partially

updateDOM: function(that) {
    $("<canvas>")
        .click(that.clickCallback)
        .appendTo("#"+that.containerId);
    //(...)
},

clickCallback: function() {
    // Not working either... Should pass 'that' to the function too
    alert("Some click: "+this.id);
} 
```

但我不觉得这种模式很优雅......关于点击回调的问题也没有解决。

想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T13:59:08.147

看看[MDN 对`this`关键字](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/this)的介绍。

处理该问题的标准方法是使用`that`变量 - 不是作为参数，而是在单独的函数中：

```
var that = this;
$(function() {
    that.updateDOM();
});

// or

$(this.getClickCallback());
...
namespace.ScatterPlot.prototype.getClickCallback =  function() {
    var that = this;
    return function clickCallback(e) {
        alert("Some click: "+that.id);
    };
}; 
```

或者，您始终可以使用[`.bind()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)（或[`$.proxy`](http://api.jquery.com/jQuery.proxy/)用于较旧的浏览器）以更通用的方式完成第二个示例的功能：

```
$(this.clickCallback.bind(this)); 
```

# mongodb - 唯一性的MongoDB模型

> ID：13474674
> 
> 赞同：3
> 
> 时间：2012-11-20T13:49:30.753
> 
> 标签：mongodb, model

设想：

10.000.000 条记录/天

记录：访客、访问日期、集群（我们在哪里看到）、元数据

我们想通过这些信息知道什么：

1.  给定日期范围内一个或多个集群上的唯一访问者。
2.  每日独立访客
3.  对给定范围（平台、浏览器等）的元数据进行分组

为了轻松查询此信息，我坚持使用的模型是：

```
{
   VisitorId:1, 
ClusterVisit: [
                {clusterId:1, dates:[date1, date2]},
                {clusterId:2, dates:[date1, date3]}
              ]
} 
```

指数：

1.  按访客 ID（以确保唯一性）
2.  通过 ClusterVisit.ClusterId-ClusterVisit.dates（用于搜索）
3.  通过 IdUser-ClusterVisit.IdCluster（用于更新）

我还必须将集群组拆分为不同的集合，以便更有效地访问数据。

导入：首先我们搜索 VisitorId - ClusterId 的组合，然后我们 addToSet 日期。

第二：如果 first 不匹配，我们插入：

```
 $addToSet: {VisitorId:1, 
        ClusterVisit: [{clusterId:1, dates:[date1]}]
    } 
```

如果 clusterId 不存在或 VisitorId 不存在，我会介绍第一次和第二次导入。

问题：当集合增长时，更新/插入/更新完全低效（几乎不可能），我猜是因为添加新日期时文档大小变大。难以维护（主要是未确定的日期）

我有一个超过 50.000.000 个的集合，我不能再增长了。它仅更新 100 ~ 记录/秒。

我认为我使用的模型对于这种信息量来说并不是最好的。在我搞乱分片之前，你认为最好获得更多 upsert/sec 并快速查询信息，这将花费更多时间，而我学习并对此充满信心。

我在 AWS RAID 10 上有一个带有 10 个磁盘的 x1.large 实例

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T20:29:18.383

数组在大型集合上很昂贵：mapreduce、聚合......

尝试 .explain()： [MongoDB 'count()' 非常慢。我们如何改进/解决它？](https://stackoverflow.com/questions/7658228/mongodb-count-is-very-slow-how-do-we-refine-work-around-with-it)

为索引添加显式提示： [尽管设置了索引，但简单的 MongoDB 查询非常慢](https://stackoverflow.com/questions/9734962/simple-mongodb-query-very-slow-although-index-is-set)

A full heap?: [node-mongodb-native 的插入性能](https://stackoverflow.com/questions/11111281/insert-performance-of-node-mongodb-native)

收集的内存空间结束： [如何提高 MongoDB 中 update() 和 save() 的性能？](https://stackoverflow.com/questions/6423988/how-to-improve-performance-of-update-and-save-in-mongodb)

特殊读聚类： http: [//www.colinhowe.co.uk/2011/02/23/mongodb-performance-for-data-bigger-than-memor/](http://www.colinhowe.co.uk/2011/02/23/mongodb-performance-for-data-bigger-than-memor/)

全局写锁？： [mongodb性能不佳](https://stackoverflow.com/questions/9062758/mongodb-bad-performance)

慢日志性能跟踪： [跟踪 MongoDB 性能？](https://stackoverflow.com/questions/4400104/track-mongodb-performance)

轮换日志： [将输出记录到输出文件会影响 mongoDB 性能吗？](https://stackoverflow.com/questions/5699152/does-logging-output-to-an-output-file-affect-mongodb-performance)

使用分析器： [http ://www.mongodb.org/display/DOCS/Database+Profiler](http://www.mongodb.org/display/DOCS/Database+Profiler)

将一些集合缓存移动到 RAM： [MongoDB 将文档预加载到 RAM 以获得更好的性能](https://stackoverflow.com/questions/13374342/mongodb-preload-documents-into-ram-for-better-performance)

关于集合分配大小的一些想法： [MongoDB 数据模式性能](https://stackoverflow.com/questions/12236794/mongodb-data-schema-performance)

使用单独的集合： [数据结构不断增长的 MongoDB 性能](https://stackoverflow.com/questions/9306815/mongodb-performance-with-growing-data-structure)

单个查询只能使用一个索引（最好是复合的）： [这个mongodb查询为什么这么慢？](https://stackoverflow.com/questions/12502642/why-is-this-mongodb-query-so-slow)

缺少键？： [MongoDB 查询缓慢：您能解释一下原因吗？](https://stackoverflow.com/questions/8720535/slow-mongodb-query-can-you-explain-why)

Maybe shards： [MongoDB 在聚合查询上的表现](https://stackoverflow.com/questions/2599943/mongodbs-performance-on-aggregation-queries)

提高性能 stackoverflow 链接： [https ://stackoverflow.com/a/7635093/602018](https://stackoverflow.com/a/7635093/602018)

进一步分片副本教育的一个好点是： [https ://education.10gen.com/courses](https://education.10gen.com/courses)

# java - 右键单击以选择文本 JTextPane

> ID：13474678
> 
> 赞同：3
> 
> 时间：2012-11-20T13:49:44.837
> 
> 标签：java, swing

在我的 JTextPane 中，当我选择文本并右键单击时；它提供了复制文本的选项。下面是代码：

```
public LogPane() {
    super();
    JPopupMenu pop = new JPopupMenu();
    final LogPane l = this;
    JMenuItem copy = new JMenuItem("Copy      CTRL+C");
    copy.addActionListener(new ActionListener() {

        @Override
        public void actionPerformed(ActionEvent e) {
            selected = l.getSelectedText();
            if(selected==null)
                return;
            StringSelection clipString = new StringSelection(selected);
            clipbd.setContents(clipString,clipString);
        }

    }); 
    pop.add(copy);
    copy.setEnabled(true);
} 
```

因此，在右键单击时，它提供了复制文本的选项。但我想要的是，当没有选择文本并且用户右键单击时，不应该显示复制选项。应如何纳入更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T14:04:48.613

您显示了错误的代码部分。重要的代码部分是你的`MouseListener`，即当你右键单击时会发生什么。

在那`MouseEvent`，您可以检查您的选择`JTextPane`，使用[JTextComponent.getSelectedText()](http://docs.oracle.com/javase/6/docs/api/javax/swing/text/JTextComponent.html#getSelectedText%28%29)，即

```
public void MouseClicked(MouseEvent me) {
    if(me.getButton() == MouseEvent.BUTTON2) {
         // This is the code you probably don't have yet
         // You may have to check this cast
         JTextComponent myComponent = (JTextComponent) me.getComponent();
         if (myComponent.getSelectedText() != null) {
             JPopupMenu theMenu = myComponent.getComponentPopupMenu();
             // Etc... you wrote this part already and said it works
         }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T14:07:59.490

A`PopupMenuListener`应该做的伎俩。

```
public LogPane() {
    super();
    JPopupMenu pop = new JPopupMenu();
    final LogPane l = this;
    final JMenuItem copy = new JMenuItem("Copy      CTRL+C");
    copy.addActionListener(new ActionListener() {

        @Override
        public void actionPerformed(ActionEvent e) {
            selected = l.getSelectedText();
            if(selected==null)
                return;
            StringSelection clipString = new StringSelection(selected);
            clipbd.setContents(clipString,clipString);
        }

    }); 
    pop.add(copy);
    pop.addPopupMenuListener(new PopupMenuListener() {
        public void popupMenuCanceled(PopupMenuEvent e) {}
        public void popupMenuWillBecomeInvisible(PopupMenuEvent e) {}
        public void popupMenuWillBecomeVisible(PopupMenuEvent e) {
            copy.setEnabled(l.getSelectedText() != null);
        }
    });
} 
```

# hbase - 如何在 ruby on rails 中访问在 Amazon EMR 上运行的 Hbase

> ID：13474679
> 
> 赞同：0
> 
> 时间：2012-11-20T13:49:51.733
> 
> 标签：hbase, ruby-on-rails-2, amazon-emr

任何人都可以帮助我在 ruby​​ 中以编程方式连接到 Hbase（在 Amazon EMR 上运行）吗？

实际上，我想将批量数据导入 Amazon EMR 上的 Hbase 面向列的表中，并以编程方式通过聚合/分组查询来检索相同的数据。

我已经浏览了[https://github.com/aws/aws-sdk-ruby](https://github.com/aws/aws-sdk-ruby)、[https://github.com/CompanyBook/massive_record](https://github.com/CompanyBook/massive_record)和 hbase-stargate gems，但是，它们似乎都没有通过示例进行明确的解释.

提前致谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T17:44:42.227

Thrift 是大多数人在 jvm 之外访问 HBase 的方式。您链接的 mass_record gem 使用节俭绑定。因此，启动一个指向您的 emr 集群的节俭服务器，然后将您的 ruby​​ 客户端指向节俭服务器。

# javascript - Knockout.js 虚拟元素在本地工作，但不能在远程工作

> ID：13474682
> 
> 赞同：0
> 
> 时间：2012-11-20T13:50:04.960
> 
> 标签：javascript, html, knockout.js, knockout-2.0

我有这个问题，虚拟淘汰模板在远程托管时无法正确绑定，但在本地工作得很好。

这是有问题的页面：[http ://www.brandonmartinez.com/presentations/20121109-AdvancedKnockoutJs/index.html#8](http://www.brandonmartinez.com/presentations/20121109-AdvancedKnockoutJs/index.html#8)

这是我的模板：

```
<ul>
    <!-- ko template: {name: 'product-template', foreach: Computers} --><!-- /ko -->
    <!-- ko template: {name: 'product-template', foreach: Phones} --><!-- /ko -->
</ul> 
```

以及javascript的基础：

```
function Slide005And006ViewModel() {
    var vm = this;

    function ProductViewModel(productName, description) {
        var pvm = this;

            pvm.ProductName = ko.observable(productName);
            pvm.Description = ko.observable(description);
    }

    vm.Computers = ko.observableArray([new ProductViewModel('iMac', 'All-in-One Computer'), new ProductViewModel('Latitude', 'Dell Laptop'), new ProductViewModel('Surface', 'Microsoft Tablet')]);
    vm.Phones = ko.observableArray([new ProductViewModel('iPhone', 'Awesome'), new ProductViewModel('Lumia', 'Not Bad'), new ProductViewModel('Anything Android', 'Crap')]);
}

ko.applyBindings(new Slide005And006ViewModel(), document.getElementById('slide006')); 
```

任何想法将不胜感激。

此处提供完整来源：[http ://www.brandonmartinez.com/presentations/20121109-AdvancedKnockoutJs/source.zip](http://www.brandonmartinez.com/presentations/20121109-AdvancedKnockoutJs/source.zip)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T15:19:58.840

我的主持人正在删除 KO 用于模板的评论。感谢@nemesv 抓住了这一点！

# parallel-processing - 修改的并行扫描

> ID：13474687
> 
> 赞同：2
> 
> 时间：2012-11-20T13:50:26.897
> 
> 标签：parallel-processing, gpgpu

这更像是一个算法问题，而不是编程问题。我想知道是否可以修改前缀和（或任何）并行算法以完成以下操作。我想在不到 O(N) 的时间内从 GPU 上的两个输入列表生成结果。

规则是：从数据中取出第一个数字，直到键中的相同索引包含较小的值。

每当我尝试将其映射到并行扫描时，它都不起作用，因为我无法确定要在上行扫描中传播哪些数据值，因为无法知道哪些先前的数据可能已经传播到足以与当前键进行比较. 这个问题让我想起了我们需要考虑当前指数和所有过去指数的涟漪进位。

同样，不需要代码进行并行扫描（尽管那会很好），更希望了解如何完成或为什么不能完成。

```
int data[N] = {5, 6, 5, 5, 3, 1, 5, 5};
int keys[N] = {5, 6, 5, 5, 4, 2, 5, 5};
int result[N];

serial_scan(N, keys, data, result);
// Print result.  should be {5, 5, 5, 5, 3, 1, 1, 1, } 
```

串行扫描的代码如下：

```
void serial_scan(int N, int *k, int *d, int *r)
{
  r[0] = d[0];
  for(int i=1; i<N; i++) 
    {
      if (k[i] >= r[i-1]) {
        r[i] = r[i-1];
      } else if (k[i] >= d[i]) {
        r[i] = d[i];
      } else {
        r[i] = 0;
      }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T19:57:00.463

可以在[此处](http://dl.dropbox.com/u/29304719/Papers/lecture05%20%281%29.pdf)找到并行扫描的一般技术，在功能语言标准 ML 中进行了描述。这可以为任何关联运算符完成，我认为您的符合要求。

一个直觉泵是，您可以通过递归计算数组两半的总和并将它们加在一起来计算 O(log(n)) 跨度（无限处理器的运行时间）中的数组总和。在计算扫描时，您只需要知道当前点之前的数组总和。

我们可以计算一个数组的扫描并行执行两半：使用上述技术计算第一半的总和。然后依次计算两半的扫描；前半部分从 0 开始，后半部分从您之前计算的总和开始。完整的算法有点棘手，但使用了相同的想法。

这是一些用于以不同语言进行并行扫描的伪代码（对于整数和加法的特定情况，但对于任何关联运算符的逻辑都是相同的）：

```
//assume input.length is a power of 2

int[] scanadd( int[] input) {
  if (input.length == 1)
    return input 
  else { 
    //calculate a new collapsed sequence which is the sum of sequential even/odd pairs 
    //assume this for loop is done in parallel

    int[] collapsed = new int[input.length/2]
    for (i <- 0 until collapsed.length) 
      collapsed[i] = input[2 * i] + input[2*i+1]

    //recursively scan collapsed values
    int[] scancollapse = scanadd(collapse)

    //now we can use the scan of the collapsed seq to calculate the full sequence

    //also assume this for loop is in parallel
    int[] output = int[input.length]
    for (i <- 0 until input.length) 
      //if an index is even then we can just look into the collapsed sequence and get the value
      // otherwise we can look just before it and add the value at the current index

      if (i %2 ==0) 
        output[i] = scancollapse[i/2]
      else 
        output[i] = scancollapse[(i-1)/2] + input[i]

    return output
  } 
} 
```

# c# - 将 C 指针语句转换为其 C# 等效项

> ID：13474688
> 
> 赞同：1
> 
> 时间：2012-11-20T13:50:27.660
> 
> 标签：c#, c

我有一些 C 代码我正试图翻译成 C# 代码并且我遇到了我不熟悉的指针，所以我不知道 C# 等价物。让我得到一些帮助？

案例1：给定C中的这三行，我如何在C#中声明p？

```
double snorm[169];
double *p = snorm;
*p = 1.0; 
```

案例 2：我不知道指针实际上在做什么，所以我不知道如何将此行更改为 C#。

```
*(snorm+n) = *(snorm+n-1) * (double)(2*n-1) / (double)n; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T13:53:53.863

第一的：

```
double[] snorm = new double[169];
snorm[0] = 1.0; 
```

不仅仅是使用`snorm`而不是`p`.

第二：

```
snorm[n] = snorm[n-1] * (double)(2*n-1)/(double)n; 
```

基本上`*p`意味着您在内存地址获取值，由`p`. 递增和添加指针正在移动内存中的指针，因此`p++`，以及`(p+1)`仅引用内存中的下一项（它在内存中实际移动的距离取决于指针指向的数据类型）。并且，`*(p+n)`只是数组中第 n 项的值（如果`p`指向数组）

无论如何，您应该熟悉指针。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-20T13:53:19.683

该代码基本上使用指针作为数组访问的替代方法。所以你的第一个片段相当于：

```
double[] snorm = new double[169];
snorm[0] = 1.0; 
```

下一位等价于：

```
snorm[n] = snorm[n-1] * (double)(2*n-1) / (double)n; 
```

（我会使用更多的空间，但显然这是一个品味问题。）

唯一棘手的一点是如果某些东西*增加*了一个指针 - 那时你需要记住你基本上有一个额外的偏移量可以添加到任何未来的数组索引中。

# java - 将桌面 Swing CRUD 客户端迁移到 Web 应用程序 Netbeans 7.2 Glassfish 3.1.2

> ID：13474693
> 
> 赞同：1
> 
> 时间：2012-11-20T13:50:40.227
> 
> 标签：java, swing, netbeans, ejb, glassfish-3

Netbeans 或其他地方有哪些工具可用于将简单的 Java CRUD 客户端应用程序迁移到至少与原始设计相似的 Web 应用程序？

桌面客户端应用程序连接到 Glassfish 提供的 EJB。

使用 Netbeans 新项目向导，我生成了将其连接到为客户端应用程序提供服务的 EJB 服务的 Web 服务，并且 Web 服务测试页面具有我需要调用的大部分方法。大多数方法已经工作了，所缺少的只是布局和一些按钮。

所有代码都在一个大型企业项目下。

基本上，我不想再次从头开始重新创建原始客户端应用程序设计。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T14:23:28.787

您没有提到为什么要转换为网络应用程序。如果唯一的原因是可以从 Web 访问您的应用程序，那么您可以通过[Java Web Start](http://docs.oracle.com/javase/tutorial/deployment/webstart/index.html)轻松部署现有应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-27T13:24:50.087

您可能想查看有关使用 NetBeans 和 Glassfish 创建基于 Web 的应用程序（目的与您的业务摇摆应用程序相同）的网络研讨会： https: [//www.youtube.com/watch?v= 3TompuzySD8](https://www.youtube.com/watch?v=3TompuzySD8)

在本视频中，我们使用开源 Vaadin 框架（免责声明：我是该项目的开发人员）来创建 UI。对您来说最相关的起点可能是[https://vaadin.com/swing](https://vaadin.com/swing)

# java - 阅读 mime 多部分的正文部分

> ID：13474705
> 
> 赞同：15
> 
> 时间：2012-11-20T13:51:42.490
> 
> 标签：java, jakarta-mail, mime, multipart

好的，所以我使用 .getcontent 并接收 javax.mail.internet.MimeMultipart@fd13b5 等。

我知道我的代码中需要这样的东西，但我不知道到底需要什么。

```
if (p.isMimeType("text/plain")) {
    pr("This is plain text");
    pr("---------------------------");
    if (!showStructure && !saveAttachments)
    System.out.println((String)p.getContent());
} else if (p.isMimeType("multipart/*")) {
    pr("This is a Multipart");
    pr("---------------------------");
    Multipart mp = (Multipart)p.getContent();
    level++;
    int count = mp.getCount();
    for (int i = 0; i < count; i++)
    dumpPart(mp.getBodyPart(i));
    level--;
} else if (p.isMimeType("message/rfc822")) {
    pr("This is a Nested Message");
    pr("---------------------------");
    level++;
    dumpPart((Part)p.getContent());
    level--; 
```

目前，我正在尝试将所有信息放入字符串中，然后将其显示在 GUI 上，此时我的所有信息都可以正常工作，就像显示为的正文内容一样。javax.mail.internet.MimeMultipart@fd13b5。任何帮助将不胜感激，因为我非常卡住。

```
package EmailTable;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.IOException;
import java.util.List;
import java.util.Properties;

import javax.activation.DataHandler;
import javax.mail.BodyPart;
import javax.mail.Folder;
import javax.mail.Message;
import javax.mail.MessagingException;
import javax.mail.Multipart;
import javax.mail.Session;
import javax.mail.Store;
import javax.mail.internet.InternetAddress;
import javax.mail.internet.MimeMessage;

public class Email implements ActionListener
{

private mail mail;
private List mails;
private String password;
private String user;
private String getText;
private boolean textIsHtml = false;

public Email(List mails,String password,String user) throws MessagingException,     IOException {

password = "password";
user = "user";
this.mails = mails;
String host = "10..10.10.10";
   Properties properties = System.getProperties(); 
  Session session = Session.getDefaultInstance(properties);
  Store store = session.getStore("pop3");
  store.connect(host, user, password);
  Folder folder = store.getFolder("inbox");
  folder.open(Folder.READ_ONLY);
  Message[] messages = folder.getMessages();

    int length = messages.length-1;
    for (int i = length; i > length-30; i--) {

            mail = new mail();

            mail.setEmail(messages[i].getFrom()[0]);

              String to = InternetAddress.toString(
                                messages[i].getRecipients(Message.RecipientType.TO));
                      if (to != null) {
                          mail.setEmail2(to);
                      }

            mail.setSubject(messages[i].getSubject());

            mail.setDate(messages[i].getSentDate());

            mail.setMessage(messages[i]);

             mail.setContent(((MimeMessage)messages[i]).getContent());

            Email.this.mails.add(mail);
  }

}

public void actionPerformed(ActionEvent e) {
// TODO Auto-generated method stub

}
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-21T08:26:18.023

是的，您必须遍历每个 BodyPart 以了解它的类型，然后相应地获取内容。这是我用来获取消息内容的内容。但是我仍然无法为某些消息获得正确的内容。
**实施比尔建议的代码后，编辑**
效果更好。

```
 Object msgContent = messages[i].getContent();

    String content = "";             

     /* Check if content is pure text/html or in parts */                     
     if (msgContent instanceof Multipart) {

         Multipart multipart = (Multipart) msgContent;

         Log.e("BodyPart", "MultiPartCount: "+multipart.getCount());

         for (int j = 0; j < multipart.getCount(); j++) {

          BodyPart bodyPart = multipart.getBodyPart(j);

          String disposition = bodyPart.getDisposition();

          if (disposition != null && (disposition.equalsIgnoreCase("ATTACHMENT"))) { 
              System.out.println("Mail have some attachment");

              DataHandler handler = bodyPart.getDataHandler();
              System.out.println("file name : " + handler.getName());                                 
            }
          else { 
                  content = getText(bodyPart);  // the changed code         
            }
        }
     }
     else                
         content= messages[i].getContent().toString(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-09-10T22:10:41.323

这个解决方案对我来说效果更好。我只是想记录我的电子邮件以用于开发/测试目的。使用 MimeMessage.writeTo(OutputStream) 方法。

```
void logMimeMessage(MimeMessage msg) throws MessagingException {
    ByteArrayOutputStream out = new ByteArrayOutputStream();
    try {
        msg.writeTo(out);
    } catch (IOException e) {
        logger.catching(new MyException("Cannot log MimeMessage",e));
    }
    logger.error(out.toString());
} 
```

感谢上面@zzzzz 的评论，他链接到这个答案[JavaMail - Parsing email content，似乎无法让它工作！(消息.getContent())](https://stackoverflow.com/questions/5628395/javamail-parsing-email-content-cant-seem-to-get-it-to-work-message-getcont/26142591#26142591)

# opencv - 在 OpenCV 中执行更改原点的剪切

> ID：13474706
> 
> 赞同：2
> 
> 时间：2012-11-20T13:51:43.287
> 
> 标签：opencv, matrix, transformation

我想沿 y 轴剪切图像，但将给定的 x 值保持在相同的高度。如果我使用剪切矩阵：

```
[1, 0, 0] 
[s, 1, 0] 
```

使用 s = 函数“warpAffine”的剪切因子，我确实得到了我的剪切图像，但它的原点始终为 0,0。我需要在另一个 x（甚至可能是 y）有我的起源。

所以我认为我应该组合平移矩阵，将图像平移到左侧，执行剪切并将图像平移回右侧，但我不确定如何组合这些矩阵，因为：

```
[1, 0, dx]   [1, 0, 0]     [1, 0, -dx] 
[0, 1, dy] * [s, 1, 0]  *  [0, 1, -dy] 
```

显然行不通。

如何在 0,0 以外的选定原点上执行剪切操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T18:47:52.397

你是正确的，你应该结合这些转换。要将它们组合起来，通过添加 [0,0,1] 作为第 3 行，将它们全部转换为 3x3 矩阵。然后你可以将所有 3 个矩阵相乘。完成后，底行仍将是 [0,0,1]，然后您可以将其删除并使用生成的 2x3 矩阵作为组合变换。

# django - 使用 Django 生成正确的 HTML 语义

> ID：13474707
> 
> 赞同：5
> 
> 时间：2012-11-20T13:51:42.870
> 
> 标签：django

我通常保持简单，并在我的模板中使用以下表单语法：

```
<div>
       <div>{{form.title.label}}:</div>
       <div>{{form.title}}</div>
</div> 
```

这种方法的问题是 html 输出中的语义不好。

```
<div>
    <div>Title:</div>
    <div><input id="id_form-title" type="text" maxlength="30" name="form-title"></div>
</div> 
```

正确的应该是：

```
<div>
    <label for="id_form-title">Title</label>
    <input id="id_form-title" type="text" maxlength="30" name="form-title">
</div> 
```

是否有 django 内置标签可以自动为我执行此操作，还是我必须像这样自己手动执行此操作？

```
<div>
    <label for="id_form-title">{{form.title.label}}</label>
    {{form.title}}
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T14:00:50.183

逐个输出字段并不能让您自动访问正确构造的`label`元素确实很烦人——这样做`form.as_p`会正确生成字段和标签，但是您放弃了对表单布局的所有控制。

不过，您可以相当容易地使用字段信息构建标签标签：

```
<label for="{{ field.auto_id }}">{{ field.label }}</label>
{{ field }} 
```

您可以将其放在模板标签中以便于重用。

不要忘记还添加`{{ field.errors }}`以显示与每个字段相关的错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T17:57:32.877

using label_tag should give you properly constructed label tag. So instead of just {{form.title.label}} you should use {{form.title.label_tag}} and it will result in the desired html

# android - Android：在activity.java中创建CheckBox

> ID：13474709
> 
> 赞同：2
> 
> 时间：2012-11-20T13:51:45.907
> 
> 标签：android, android-activity, checkbox

嗨，我想在 Android 应用程序中创建动态数量的复选框（这取决于数组“流派”的长度），然后我做了：

```
CheckBox [] checkbox;
String [] genre={"party","sport","music","café","education"};

@Override
protected void onCreate(Bundle savedInstanceState) {
    checkbox=new CheckBox[genre.length];
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_checkbox);
    for(int i=0;i<genre.length;i++){
        CheckBox c=new CheckBox(this);
        c.setText(genre[i]);
        checkbox[i]=c;  
    }
     ArrayAdapter<CheckBox>adapter= new ArrayAdapter<CheckBox>(this, android.R.layout.simple_list_item_1,checkbox);
     ListView lv= (ListView)findViewById(R.id.genre_list);
     lv.setAdapter(adapter);
} 
```

但是在列表视图中它显示了内存中复选框的数量（我猜），为什么？

```
like : Android.wiget.CheckBox@44f03160
       Android.wiget.CheckBox@44f03d60
      ... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T13:56:58.037

您宁愿使用`android.R.simple_list_item_checked`项目布局并在列表中启用多项选择：

```
String [] genre={"party","sport","music","café","education"};

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_checkbox);
    ArrayAdapter<String> adapter= new ArrayAdapter<String>(this, android.R.layout.simple_list_item_checked, genre);
    ListView lv= (ListView)findViewById(R.id.genre_list);
    lv.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);
    lv.setAdapter(adapter);
} 
```

这样您就不必自己手动创建复选框

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T13:57:43.807

因为这条线

```
 c.setText(genre[i]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-05T15:03:53.617

```
String [] genre={"party","sport","music","café","education"};

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_checkbox);
    ArrayAdapter<String> adapter= new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, genre);
    ListView lv= (ListView)findViewById(R.id.genre_list);
    lv.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);
    lv.setAdapter(adapter);
}

This looks like checkboxes. 
```

# javascript - util.inherits - 替代或解决方法

> ID：13474710
> 
> 赞同：19
> 
> 时间：2012-11-20T13:51:53.613
> 
> 标签：javascript, node.js, inheritance

我是一个n00b in node，发现`util.inherits()`非常有用，除了它似乎替换了原始对象的整个原型。例如：

```
var myClass = function(name){
    this._name = name;  
};

myClass.prototype = {
    (...)
};

util.inherits(myClass, require('events').EventEmitter); 
```

似乎抹去了我原来的原型。

这给我带来了两个不便：
1 - 我必须在调用后向我的原型声明添加属性`inherits`，

```
var myClass = function(name){
    this._name = name;  
};

util.inherits(myClass, require('events').EventEmitter);

myClass.prototype.prop1 = function(){...};
myClass.prototype.prop2 = function(){...}; 
```

而且，最重要的是，我认为我不能从两个或更多不同的类继承。

谁能向我解释为什么这是有道理的，以及解决这个问题的好方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-20T14:04:32.653

*必须*在`util.inherits()`. _ 我的猜测`util.inherits`起源于一种仅供内部使用的方法，仅针对最初打算用于的有限内部用例进行定制，在某些时候发布以供一般使用。该`util`模块是用纯 JS 编写的，因此很容易实现您自己的`util.inherit`保留原型的版本。这是原始`util.inherit`来源：

```
exports.inherits = function(ctor, superCtor) {
  ctor.super_ = superCtor;
  ctor.prototype = Object.create(superCtor.prototype, {
    constructor: {
      value: ctor,
      enumerable: false,
      writable: true,
      configurable: true
    }
  });
}; 
```

至于多重继承，这将是一个更难解决的问题，因为 Javascript 的原型继承根本不适合多重继承。每个实例只有一个内部`[[Prototype]]`属性，用于查找在实际实例中找不到的成员。您*可以*将两个单独的“父类”的原型合并为一个原型，但是您将失去对*它们*父类的继承，并且您将失去更改父原型并让所有子类看到更改的能力。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-11T16:30:32.177

您应该首先继承，在函数定义之后，然后实现您的对象。也不要忘记在你的类的构造函数中调用超类构造函数。

```
Function A(y){
  this.y = x;
}

Function B(x,y){
  this.x = x;
  A.call(this,y);
}

util.inherits(B,A);

B.prototype.mythodA = function() {
    //do something
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-02-10T16:37:21.570

从节点版本 5.0.0 开始，[util.inherits](https://github.com/nodejs/node/blob/v5.x/lib/util.js#L782)已更改为支持您使用[setPrototypeOf](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/setPrototypeOf)方法寻找的行为：

FirstBase.js

```
function FirstBase(firstBaseProp){
    this.firstBaseProp = firstBaseProp;
}

FirstBase.prototype.getFirstBaseProp = function(){
    return this.firstBaseProp;
};

module.exports = FirstBase; 
```

SecondBase.js

```
var FirstBase = require('./FirstBase.js'),
    util = require('util');

function SecondBase(firstBaseProp, secondBaseProp){
    this.secondBaseProp = secondBaseProp;
    SecondBase.super_.apply(this, arguments);
}

SecondBase.prototype.getSecondBaseProp = function(){
    return this.secondBaseProp;
};

util.inherits(SecondBase, FirstBase);

module.exports = SecondBase; 
```

ThirdBase.js

```
var SecondBase = require('./SecondBase.js'),
    util = require('util');

function ThirdBase(firstBaseProp, secondBaseProp, thirdBaseProp){
    this.thirdBaseProp = thirdBaseProp;
    ThirdBase.super_.apply(this, arguments);
}

ThirdBase.prototype.getThirdBase = function(){
    return this.thirdBaseProp;
};

util.inherits(ThirdBase, SecondBase);

module.exports = ThirdBase; 
```

实例.js

```
var ThirdBase = require('./ThirdBase.js');

var instance = new ThirdBase('first', 'second', 'third');

// With node < 5.0.0 (Object.create)
console.log(instance.getFirstBaseProp()); // first
console.log(instance.getSecondBaseProp()); // undefined
console.log(instance.getThirdBase()); // undefined

// With node >= 5.0.0 (Object.setPrototypeOf)
console.log(instance.getFirstBaseProp()); // first
console.log(instance.getSecondBaseProp()); // second
console.log(instance.getThirdBase()); // third 
```

如果您正在运行支持`setPrototypeOf`（0.12.x 支持）的旧版本节点，您可以只使用`export` [util.inherits](https://github.com/nodejs/node/blob/v5.x/lib/util.js#L782)并将其用作内部实用程序函数。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-05-21T04:04:42.993

我非常想要同样的东西并且对扩展不满意，所以我为已经有用的`util.inherits`方法创建了这个扩展：

```
var util = require('util');

module.exports = {
    inherits : function(sub, sup, proto) {
        util.inherits(sub, sup);
        if (typeof proto !== 'undefined') {
            Object.keys(proto).forEach(function(key) {
                sub.prototype[key] = proto[key];
            });
        }
    }
}; 
```

我把它放在我的项目中`./util/index.js`，然后这样做来使用它：

```
var EventEmitter = require('events').EventEmitter;
var util = require('./util');

function Foo() {
    EventEmitter.call(this);
}

util.inherits(Foo, EventEmitter, {
    bar : function(){
        console.log(this instanceof EventEmitter); // true
    }
}); 
```

如果我发现它越来越强大和有用，也许我会发布它。我自己几乎没有实现它，所以我正在试运行它。

让我知道你的想法！

注意：这*确实*覆盖了任何一个类上的方法，最后在 proto 哈希中定义了这些方法。请注意这一点。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-04-16T10:22:56.927

[Inherits-ex](https://github.com/snowyu/inherits-ex.js)库是一个浏览器友好的增强继承，与标准 node.js 完全兼容，具有动态继承或创建。

*   静态继承
*   多继承（继承链）支持
*   **随时继承**——这是你想要的
    *   您不能在以标准方式继承之前声明方法/属性，因为它将替换原型对象。
*   重复继承检查
*   Es6 类支持
*   更多辅助功能
    *   `isInheritedFrom(ctor, superCtor|superCtorName)`检查ctor是否继承自superCtor
    *   `mixin(ctor, superCtor|superCtor[])`Mixin SuperCtor 的方法和属性： Clone(Copy) 所有 superCtor 的属性（方法）到 ctor。
    *   `isMixinedFrom`
    *   `createCtor`
    *   `createObject`
    *   `createFunction`

# c++ - 如何使字符串数组存储在向量中

> ID：13474713
> 
> 赞同：0
> 
> 时间：2012-11-20T13:52:03.087
> 
> 标签：c++

我正在尝试这样的事情：

```
#include <iostream>
#include <vector>
#include <cstring>

using namespace std;

int main()
{

    string inputStr;
    vector <string> strVector;
    cin.getline(inputStr,200);
    int i=0;
    while (inputStr!=NULL){ //unless all data is read.
        strVector[i]=getline(inputStr," ");
        i++;
    }//while.

    for (int j=0; j<strVector.size(); j++){
        cout<< strVector[j];
        cout<<endl;
    }
} //main. 
```

任何可以提供帮助的人。我正在尝试将我的输入字符串存储在`vector`字符串中，然后我可以 push_back 我的第 i 个字符串。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T14:04:54.960

您的大部分涉及 inputString 的代码都是无效的。没有 getline 成员`istream`需要 a `std::string`，所以这是无效的：

```
cin.getline(inputStr,200); 
```

你想要的是全局getline：

```
getline(cin, inputStr); 
```

其次，没有直接从 a 读取的全局 getline `std::string`，因此这是无效的：

```
strVector[i]=getline(inputStr," "); 
```

你想在那里使用的是一个`istringstream`. 总而言之，您的代码可能如下所示：

```
std::getline(std::cin, inputStr);
std::istringstream iss(inputStr);
std::string word;
// read from the istringstream until failure
while (std::getline(iss,word,' '))
    strVector.push_back(word); 
```

如果你想用空格（包括制表符）分隔，那么你可以使用`operator>>`getline 来代替。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T13:55:35.433

我想你正在寻找模板的[`push_back`](http://www.cplusplus.com/reference/stl/vector/push_back/)方法`std::vector`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T14:26:16.873

这是另一种方式：

```
#include <iostream>
#include <string>
#include <vector>

using namespace std;

int main(int argc, char *argv[])
{
    vector<string> strVec;
    string str;
    cout<<"Enter # to quit \n\n";
    int i=0;

    while (str!="#")
    {  
        cout<<"Input text No. "<<i+1 <<" here > ";
        cin>>str ;
        strVec.push_back(str);

        i++;
    } 

    cout<<"\nStored text\n----------\n";
    for (int j=0; j<strVec.size()-1; j++)    cout<<j+1<<"  "<< strVec[j]<<"\n";

    cout<<"\n\n";

    return(0);
} 
```

# c - 拆分 char[] 并读取浮点数

> ID：13474714
> 
> 赞同：0
> 
> 时间：2012-11-20T13:52:06.167
> 
> 标签：c, arrays, split, char

我有一个`char buffer[128]`看起来像：

> -0.003662 0.996887 0.012818 1.010438 0.004120 1.025911

在 C 中从这个 char 数组中取出每个浮点数的最简单方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T14:01:56.760

如果你知道你的字符串中有多少个浮点数，你也可以考虑[sscanf](http://linux.die.net/man/3/scanf)

```
char buffer[128] = "-0.003662 0.996887 0.012818 1.010438 0.004120 1.025911";
float nums[6];
int numFloats = sscanf(buffer, "%f %f %f %f %f %f",
                       &nums[0], &nums[1], &nums[2], &nums[3], &nums[4], &nums[5]); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T13:56:43.993

你可以使用 strtok() 或 strtok_r() 来传递它——参见[strtok 手册](http://linux.die.net/man/3/strtok)：

类似于：

```
void parse_numbers(char *buffer) {
    char *number = NULL;

   for (number = strtok(buffer, " "); number != NULL; number = strtok(NULL, " ")) {
       do_something_with_number(conert_string_to_float(number));
   }
}
float convert_string_to_float(char *number) {
    float return_value = 0;
    sscanf(number, "%f", &return_value);
    return return_value;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T13:56:38.533

也许你应该看看：
[Strtok 参考](http://www.cplusplus.com/reference/clibrary/cstring/strtok/)和比这个问题：[字符串到浮点转换？](https://stackoverflow.com/questions/3825392/string-to-float-conversion)

# web-applications - 所有 Web 应用程序都需要浏览器吗？

> ID：13474715
> 
> 赞同：-1
> 
> 时间：2012-11-20T13:52:08.510
> 
> 标签：web-applications, browser, webkit, launching-application, user-interaction

根据定义：

> Web 应用程序是***通过 Web 浏览器***通过网络（例如 Internet 或 Intranet）访问的应用程序。

是否可以开发***不需要浏览器***运行的 Web 应用程序？

**PS**我不是在寻找HTML5 支持的*离线 Web 应用程序。*虽然这个问题看起来更像*是/否*类型，但我非常想要*详细和描述性*的答案。

**编辑 1：**我正在考虑在我的应用程序中包含一个*Web 浏览器引擎 ( **Webkit** )*，以使其与浏览器无关。不确定这是否可能，请指出正确的方向。

**编辑 2：**这几天确实可以使用[ElectronJs](https://electronjs.org/)或[Nw.js](https://nwjs.io/)。像 Slack 这样的应用程序本质上是 Web 应用程序，但可以作为原生应用程序在桌面上运行，而不是在浏览器中运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T14:00:21.400

这真的取决于你所说的“网络应用程序”是什么意思。一般来说，如果您的目标受众由真实的人组成，是的，他们将需要一个网络浏览器。他们当然可以使用诸如此类的命令行工具访问您的站点`curl`，但这并不实际。

另一方面，Web 应用程序的使用者可以是其他应用程序。当您构建 API 或某种 SaaS 平台时，通常会出现这种情况。如果“Web 应用程序”包含这类系统，那么不会——它们通常由不使用 Web 浏览器的程序访问（尽管甚至其他程序也可以使用浏览器与网页交互）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T14:05:48.317

您是否需要 Web 浏览器来访问您的 Web 应用程序取决于您托管的应用程序类型。对于您的第二个问题，是的，我们可以使用 wget 等各种工具/API 访问 Web 应用程序。

如果您托管了一个允许用户下载内容的站点，那么您实际上不需要浏览器，只需要使用任何 API 使用 url。但是，如果您想拥有一个交互式 Web 应用程序，那么您需要一个浏览器。

# cocoalibspotify-2.0 - 加载曲目的期望

> ID：13474717
> 
> 赞同：1
> 
> 时间：2012-11-20T13:52:16.670
> 
> 标签：cocoalibspotify-2.0

当您加载多个曲目（使用`SPAsyncLoading waitUntilLoaded:timeout:then`）时，是否有任何关于加载时间方面的预期指南、基准或类似内容？

我问的原因是我尝试批量加载约 20 首曲目，因为曲目元数据将在我的客户端的整个流程中使用（它被分成多个步骤，在这之间我宁愿没有除了初始延迟之外的任何加载时间，在这种情况下，用户更容易接受）。

**即一次尝试​​加载多少轨道是合理的，“应该”需要多长时间？加载 20 首曲目“很多”吗？加载单个轨道本身是否会触发许多新的请求以提取元数据，这使得尝试一次加载多个轨道是一个非常糟糕的主意？**除了超时之外，还有什么方法可以找出为什么加载轨道失败？

在默认的 20 秒超时后（我尝试过更长的超时，没有太大差异），通常（可能 10 次中的 1 次）加载失败。有时所有 20 首曲目都无法加载，有时只有一首曲目。我敢说，在这些尝试之间（可能是一两分钟），我的互联网连接保持不变（无论如何）。

*我意识到这里有很多关于什么是正常和什么不正常等的模糊输入。这显然取决于许多因素，例如您的互联网连接、Spotify 服务器的状态等，但也许可以给出某种关于预期的提示以及是否有任何行为和不特定于 Spotify API。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T10:30:36.457

通常，规则是：仅加载您现在需要向用户显示其元数据的曲目，并且可能预加载接下来将显示的曲目。

此外，由于 CocoaLibSpotify 使用队列，因此您在库上放置的负载越多，您的开销就越大。例如，如果您将`SPAsyncLoading`一堆东西分开，它们都会单独排队，但它们的计时器会立即启动。如果您将足够多的东西排入队列，它们甚至可能在超时触发时才*开始加载。*

但是，由于在内部会进行大量排队，因此如果您将大量内容放入单个`SPAsyncLoading`调用中，也会发生这种情况。

为了保持快速，保持轻松并尝试遵循第一句话中的指导方针。此外，尽量保持高效：

*   `SPAlbumBrowse`将一次性加载该专辑的曲目元数据，从而减少后端负载和排队时间。

*   对`SPArtistBrowse`.

*   一样`SPPlaylist`，我相信。

# c# - 仅对空指针异常进行调试和中断

> ID：13474718
> 
> 赞同：2
> 
> 时间：2012-11-20T13:52:29.480
> 
> 标签：c#, nullpointerexception

![在此处输入图像描述](../Images/ff1919d17b8acc40a8e5bdd8d5e43e7b.png)

我必须调试一个我没有编写的凌乱的 C# 工具，它以特定格式解析 Excel 文件（包含大量奇异数据）。

该工具的运行持续约 15 分钟并生成错误报告（通常有数千个条目）。麻烦的是，编码器在他的“错误报告”中到处都使用了异常，我需要找到一些大约 2% 的时间发生的空指针异常。我什至不是在谈论所有的捕捉、分组、重新抛出，在我的理解中，这在一致性和执行速度方面都是不好的做法。

有没有办法只打破 Visual Studio (2008) 中的空指针异常，或者至少是过滤大多数异常的技巧？在这里打破所有例外不是一个选择。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-20T13:56:47.130

在 Visual Studio 中，在 Debug -> Exceptions 下，您可以指定应该中断哪个异常。

您可以在以下位置找到 NullReferenceException：

**CommonLanguage 运行时异常**

*   系统
    *   System.NullReferenceException

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-20T13:56:48.240

我想到的最快的事情是找到所有`catch (`字符串并将它们替换为

```
catch (NullReferenceException npe)
        {
        //something your logging here
        }
        catch ( 
```

然后如果您只需要在这些捕获部分中添加断点

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-20T13:59:16.097

在 Visual Studio 中按`CTRL`++或 goto - `ALT`> 。在出现的对话框中，检查 NullReferenceException 的“抛出”框。您可能希望使用“查找”按钮来定位它。`E``Debug``Exceptions`

![在此处输入图像描述](../Images/3fc9342325c6fd05df94ff5a13d23e3d.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-20T13:59:07.390

在此处的“抛出”列中打勾：

```
Debug -> Exceptions -> Common Language Runtime Exceptions -> System -> System.NullReferenceException 
```

# php - SQL Server 数据到 php

> ID：13474720
> 
> 赞同：1
> 
> 时间：2012-11-20T13:52:52.773
> 
> 标签：php, sql-server

我有这个 php 脚本：

```
<?php
$server = 'PCCSAF\SQLEXPRESS';

$link = mssql_connect($server, 'username', 'password');
if (!$link) {
die('wrong');
}
?> 
```

我需要连接到本地 SQL Server Express 服务器，但我总是得到

```
Fatal error: Call to undefined function mssql_connect() in C:\wamp\www\dbgrab\index.php on line 4 
```

我尝试在 php.ini 中安装 ntwdblib.dll，取消注释 extension=php_ming.dll 和 extension=php_mssql.dll，但仍然无法正常工作。

我在 64 位 windows7 上使用 PHP 5.4.3 和 WAMP 服务器 2.2

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T00:53:31.940

WAMP Server x64[与 PHP SQL Server Driver 不兼容](http://forum.wampserver.com/read.php?2,74646)。尝试使用 32 位 WAMP。

# c# - C#枚举默认实现了哪些接口

> ID：13474729
> 
> 赞同：5
> 
> 时间：2012-11-20T13:53:22.927
> 
> 标签：c#, interface, enums, .net-4.5

基本上，如果我在 C# 中声明一个枚举，它默认实现哪些接口？

```
public enum Group
{
    Unknown,
    Children,
    Teens,
    YoungAdults,
    Adults,
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-20T14:00:32.113

为什么不通过一个简单的程序找出答案？

```
foreach(var interfaceType in typeof(Group).GetInterfaces())
{
   Console.WriteLine(interfaceType);
} 
```

输出：

```
System.IComparable
System.IFormattable
System.IConvertible 
```

仅供参考，所有这些都来自枚举基类型[System.Enum](http://msdn.microsoft.com/en-us/library/system.enum.aspx)，根据 MSDN，它具有以下声明：

```
[SerializableAttribute]
[ComVisibleAttribute(true)]
public abstract class Enum : ValueType, 
    IComparable, IFormattable, IConvertible 
```

# symfony - Symfony2 在没有 APC 的共享主机上 - 太慢了

> ID：13474730
> 
> 赞同：3
> 
> 时间：2012-11-20T13:53:29.650
> 
> 标签：symfony, doctrine-orm, apc

我的 symfony2/doctrine2 站点已准备好投入生产，因此我将其上传到我的共享 (TSOHost) 云服务器。他们没有激活 APC，网站速度非常慢。

在我的本地环境中，在启用 APC 的情况下加载页面大约需要 180 毫秒，而当我禁用 APC 时，加载时间会加倍。

在共享主机上，相同的页面加载大约需要 2 秒，并且经常完全挂起。我的产品列表页面有时需要超过 30 秒的 ajax 请求才能加载所有产品！

感觉教义特别挣扎。

我的主机只能建议我转移到专用的虚拟服务器，这显然更昂贵，但我不想这样做，除非我能确定它会解决问题。

这是因为缺少APC吗？我有 APC 的替代品吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T14:11:24.033

我的回答是：

[http://slides.seld.be/?file=2011-10-20+High+Performance+Websites+with+Symfony2.html#21](http://slides.seld.be/?file=2011-10-20+High+Performance+Websites+with+Symfony2.html#21)

Symfony2 快速且轻量级，但属于重型类别。我总是缓存表单，因为表单生成需要几年时间（打开 APC）。查看此演示文稿并找到一些线索。

# ios - 收到远程通知时如何在 WebView 中加载不同的页面？

> ID：13474731
> 
> 赞同：0
> 
> 时间：2012-11-20T13:53:31.073
> 
> 标签：ios, uiwebview, push-notification

这是一个让我失望的问题，因为我无法解决它，尽管它看起来很容易。事实是我有一个iOS应用程序，主要是一个加载网站的webview，我需要在收到通知时加载不同的wen页面。我正在实施推送通知，并且我已经设法让它们正常工作。它们由 App Delegate 中的应用程序接收，然后是问题开始的时候。我想用特定的 URL 启动 webview，但我不知道该怎么做。我试图获取 webview 实例并将 URL 传递给它：

“SomeAppDelegate.h”

```
#import <UIKit/UIKit.h>
@class BrowserViewController;

@interface SomeAppDelegate : UIResponder <UIApplicationDelegate>
@property(nonatomic, retain) IBOutlet BrowserViewController *viewController;
@property (strong, nonatomic) UIWindow *window;
@end 
```

“SomeAppDelegate.m”

```
#import "SomeAppDelegate.h"
#import "BrowserViewController.h"

@implementation SomeAppDelegate
@synthesize window = _window; 
@synthesize viewController;
.........

- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo
{
[viewController.webView loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"http://www.google.com"] cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:20]];
[self.window addSubview:viewController.webView];
[self.window makeKeyAndVisible]; 
```

另一个测试是在 BrowserViewContrller 中创建一个实例方法，尝试从那里重新加载。我还尝试以编程方式加载情节提要，但是当情节提要中未选中“是初始视图控制器”时，应用程序在启动前崩溃。

我做了很多谷歌搜索，但我不太了解这个生命周期是如何运作的。我会感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T14:01:58.880

可能，您应该`window.rootViewController`在应用程序委托的 didFinishLaunching:withOptions: 方法中将您的 viewcontroller 设置为 AppDelegate，而不是将其添加为 webView 作为窗口子视图 - 因为 webView 仅在 UIViewController 的方法`viewDidLoad`被调用后加载 - 这意味着您的 webView 可能不会在您正在尝试使用请求重新加载它。

# c# - 在 C# 中缓存存储过程结果的最佳方法

> ID：13474734
> 
> 赞同：5
> 
> 时间：2012-11-20T13:53:45.780
> 
> 标签：c#, sql-server, caching, stored-procedures

我在 ASP.NET/C#/SQL Server 2012 中运行一个需要缓存一些存储过程查询结果的网站。结果应该有一个绝对过期。有什么选择可以做到这一点？

最好设置 command.ExpirationDateTime = DateTime.Now.AddMinutes(10) 会很棒，但据我所知，这是不可能的。

编辑：数据将从 API 返回，因此无法使用页面或用户控件进行缓存。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T15:06:27.093

我不明白您对实际执行缓存的位置的限制，但我假设您可以访问`HttpRuntime.Cache`? [如果是这种情况，我在博客文章（缓存服务 - 懒惰方式](http://leftyftw.wordpress.com/2012/11/20/caching-service-calls-the-lazy-way/)）中编写了一系列用于缓存服务响应的实用程序。

该实用程序的基础是您可以执行以下操作：

```
 string cacheKey = GenerateCacheKey(myParam); //most likely a derivative of myParam

   if (Cache.IsInCache<MyResultType>(cacheKey))
   {
      return Cache.GetFromCache<MyResultType>(cacheKey);
   }

   var result = GetMyRequestedResult(myParam);
   if (result != null) //or whatever makes sense
   {
      Cache.InsertIntoCacheAbsoluteExpiration(cacheKey, result, DateTime.Now.AddMinutes(0));
   }

   return result; 
```

如果您在两者之间有任何服务，该帖子会显示一个用于与这些服务交互/缓存的可爱类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T13:55:45.807

查看企业库缓存应用程序块。这具有您正在寻找的确切功能

[缓存应用程序块](http://msdn.microsoft.com/en-us/library/ff649093.aspx)

```
 cache.Add(listid.ToString(), list, CacheItemPriority.Normal, null, 
new SlidingTime(TimeSpan.FromMinutes(60))); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T08:02:59.300

我最终通过将命令文本与参数名称和值合并，从 SqlCommand 创建了一个散列。在将内容放入/从 HttpContext.Current.Cache 对象中/从中获取内容时，我用作缓存键的那个哈希值。工作正常。可能不是超级快，但是由于某些查询要慢得多，所以没关系。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-04T13:44:19.553

您还可以从 .Net Framework 4 开始使用 System.Runtime.Caching.ObjectCache，而不仅仅是在 Web 应用程序中。这是一个例子：

```
List<EmailData> result = null;

ObjectCache cache = MemoryCache.Default;
var key = string.Concat(title, ":", language);
var item = cache.GetCacheItem(key);

if (item != null)
  return item.Value as List<EmailData>;

using (var connection = _connectionFactory.OpenConnection())
{
  result = connection.Query<EmailData>(sql, new { title, language }).ToList();
}

var cachingPolicy = new CacheItemPolicy
{
  AbsoluteExpiration = DateTimeOffset.UtcNow.AddMinutes(_cacheExpirationIntervalInMinutes)
};

cache.Set(new CacheItem(key, result), cachingPolicy);

return result; 
```

你可以阅读更多：[https ://msdn.microsoft.com/en-us/library/system.runtime.caching.objectcache(v=vs.110).aspx](https://msdn.microsoft.com/en-us/library/system.runtime.caching.objectcache(v=vs.110).aspx)

# javascript - Knockout,js 中的关系

> ID：13474743
> 
> 赞同：0
> 
> 时间：2012-11-20T13:54:07.427
> 
> 标签：javascript, knockout.js

我只是在淘汰赛中站稳脚跟，在我拼凑一些可憎的代码之前，我想知道是否有人可以提供以下帮助：

我有一个组数组

```
[{
  "id": 1,
  "name" : "tekken characters",
  "members": [1, 3]
}, //etc] 
```

和一个成员数组

```
[{ "id": 1, "name": "nina williams" }, {"id": 2, "name": "super mario"}, {"id": 3, "yoshi mitsu"}] 
```

两者都通过单独的 API 调用返回。存在父子（一对多）关系。使用 Knockout.js 应用于此类数据的最佳模式是什么？

尽管我确实单独使用了每个数组，例如我有一个所有组的列表和一个所有成员的列表，但我还想要一个 groupMembers 列表。请注意，并非所有成员都属于每个组。这是我将 id 相互映射的计算值，还是最好的方法是什么？这些调用都是基于 ajax 的，所以时间很重要。

如果有人这样做了，或者知道处理这些关系/数据结构的好资源，那么分享它们会很有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T12:16:07.670

如果我理解正确，那么 KO 视图模型可能看起来像这样：

```
function viewModel() {
    var self = this;     
    self.groups = ko.observableArray([]);
    self.members = ko.observableArray([]);     

    self.addToGroups = function(data) {
        // Add a new group/groups to view model (e.g. with AJAX)
    };
    self.addToMembers = function(data) {
        // Add a new member/members to view model
    };
    self.membersInGroups = ko.computed(function() {
        // Do some logic like getting members in groups
    }, this);
} 
```

然后我会为组和成员使用视图模型：

```
function groupViewModel(data) {
    var self = this;
    self.id = ko.observable(data.id);
    self.name = ko.observable(data.name);
    self.members = ko.observableArray(data.members);    
}

function memberViewModel(data) {
    var self = this;
    self.id = ko.observable(data.id);
    self.name = ko.observable(data.name);
} 
```

查看小提琴：http: [//jsfiddle.net/DcaP2/](http://jsfiddle.net/DcaP2/)

# qt - Qt 中的管理器应用程序

> ID：13474745
> 
> 赞同：1
> 
> 时间：2012-11-20T13:54:17.663
> 
> 标签：qt

我需要在 Qt 中编写一个项目，该项目将显示一个日历，其中日单元是允许您查看和添加一些您必须执行的任务的按钮。因为我是 Qt 的新手并且没有太多时间来完成这项任务，所以我想知道是否有人可以告诉我应该使用哪些库。QtCalendarWidget 会是一个不错的选择吗？是否有可能使单元格像单独的按钮一样做出反应？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T14:59:06.067

`QtCalendarWidget`是适合您需求的不错选择。这个小部件有信号：

```
void QCalendarWidget::clicked ( const QDate & date ) [signal] 
```

您可以将其链接到您想要的内容，就像您在 Qt 中所做的那样。

阅读更多[官方文档](http://doc.qt.digia.com/qt/qcalendarwidget.html)

# objective-c - 如何检测鼠标悬停在 NSButton 上。Obj-C，可可

> ID：13474750
> 
> 赞同：4
> 
> 时间：2012-11-20T13:54:36.513
> 
> 标签：objective-c, cocoa, mouseevent, mousehover

我有一个 Mac 应用程序，在窗口的每个底角都有两个 NSButton。我已将它们设置`Alpha = .5`在 .xib 中。我想知道如何检测鼠标悬停在按钮上并将 alpha 更改为 0.9。我该怎么做呢？我想你需要从我的代码中知道的只是 .h。

```
@property (unsafe_unretained) IBOutlet NSButton *leftButton;
@property (unsafe_unretained) IBOutlet NSButton *rightButton; 
```

这些是在我的.m中合成的。部署目标是 OS X 10.6+。谢谢。

**编辑**

我真的什么都没试过。我在 NSTrackingArea 上看到了一些东西，但对如何使用它并不积极，更重要的是，我想知道是否还有其他方法可以解决它。比如一个已经被调用的事件什么的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T14:09:04.987

您需要子类化 NSButton 类（甚至更好的 NSButtonCell 类）。

```
- (void)mouseEntered:(NSEvent *)theEvent;
- (void)mouseExited:(NSEvent *)theEvent; 
```

当鼠标进入和退出该区域时，它们应该被调用。您可能还需要重新创建跟踪区域，请看这里：

```
- (void)updateTrackingAreas 
```

对于淡入和淡出效果，我使用了动画师和 alpha 值，例如：

```
[[self animator]setAlphaValue:0.9]; 
```

编辑：这仅供参考，以便您可以采取一些想法

```
@interface MyButton : NSButton {
- (void)mouseEntered:(NSEvent *)theEvent;
- (void)mouseExited:(NSEvent *)theEvent;     
- (void)updateTrackingAreas;
@end 
```

# php - Zend 中缓慢的 postgresql 查询

> ID：13474751
> 
> 赞同：1
> 
> 时间：2012-11-20T13:54:41.840
> 
> 标签：php, postgresql, zend-framework

我正在使用`Zend 1.12`数据库`postgresql`。我也在使用`Zend_Db_Table_Abstract`接口来访问我的数据库。

我的代码（简化）：

```
class Application_Model_DbTable_Images extends Zend_Db_Table_Abstract
{
    protected $_name = 'images';

    public function getImage($id)
    {
        $row = $this->fetchRow("id = $id");
        return $row;
    }
} 
```

然后我像这样使用它：

```
$db = new Application_Model_DbTable_Images();
$img = $db->getImage(10); 
```

问题是这个调用时间太长了。在我的 pgAdmin 中，此查询需要 10-20 毫秒，但在 PHP 中，此查询需要 300-500 毫秒。我使用了 XDebug，跟踪调用堆栈，我了解到占用大部分时间（超过 90%）的函数是`php::PDO->__construct`. 我可以做些什么来减少我的查询持续时间？

# css - 如何以百分比设置边框的粗细？

> ID：13474754
> 
> 赞同：96
> 
> 时间：2012-11-20T13:54:51.247
> 
> 标签：css

如何以百分比设置元素的边框宽度？我尝试了语法

```
border-width:10%; 
```

但它不起作用。

我想设置`border-width`百分比的原因是我有一个带有`width: 80%;`and的元素`height: 80%;`，并且我希望该元素覆盖整个浏览器窗口，所以我想将所有边框设置为 10%。我不是使用两个元素方法来执行此操作的，其中一个元素将位于另一个元素的后面并充当边框，因为元素的背景是透明的，并且将元素放置在它后面会影响它的透明度。

我知道这可以通过 JavaScript 完成，但如果可能的话，我正在寻找一种仅限 CSS 的方法。

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2012-11-20T14:15:18.387

## 边框不支持百分比...但仍然可以...

正如其他人指出的那样[CSS 规范](http://www.w3.org/TR/CSS2/box.html#border-width-properties)，边框不支持百分比：

```
'border-top-width',
'border-right-width',
'border-bottom-width',
'border-left-width'
  Value:          <border-width> | inherit
  Initial:        medium
  Applies to:     all elements
  Inherited:      no
  Percentages:    N/A
  Media:          visual
  Computed value: absolute length; '0' if the border style is 'none' or 'hidden' 
```

如您[所见](http://www.w3.org/TR/CSS2/box.html#border-width-properties)，它显示**Percentages: N/A**。

## 非脚本解决方案

您可以使用包装器元素模拟您的百分比边框，您可以：

1.  将包装元素设置`background-color`为所需的边框颜色
2.  以百分比设置包装器元素`padding`（因为它们受支持）
3.  将您的元素设置`background-color`为白色（或任何需要的）

这会以某种方式模拟您的百分比边界。这是一个使用此技术的具有 25% 宽度侧*边框*的元素[示例。](http://jsfiddle.net/We3MH/)

 *示例中使用的 HTML

```
.faux-borders {
    background-color: #f00;
    padding: 1px 25%; /* set padding to simulate border */
}
.content {
    background-color: #fff;
}
```

```
<div class="faux-borders">
    <div class="content">
        This is the element to have percentage borders.
    </div>
</div>
```

**问题：**您必须意识到，当您的元素应用了一些复杂的背景时，这将变得更加复杂......尤其是如果该背景是从祖先 DOM 层次结构继承的。但是如果你的 UI 足够简单，你可以这样做。

## 脚本解决方案

[@BoltClock 提到了脚本解决方案](https://stackoverflow.com/a/13474782/75642)，您可以在其中根据元素大小以编程方式计算边框宽度。

[这是一个](http://jsfiddle.net/GpfMu/)使用 jQuery 的极其简单的脚本示例。

```
var el = $(".content");
var w = el.width() / 4 | 0; // calculate & trim decimals
el.css("border-width", "1px " + w + "px");
```

```
.content { border: 1px solid #f00; }
```

```
<div class="content">
    This is the element to have percentage borders.
</div>
```

但是您必须注意，每次**容器大小更改**（即浏览器窗口调整大小）时，您都必须**调整边框宽度。**我使用包装器元素的第一个解决方法似乎要简单得多，因为它会在这些情况下自动调整宽度。

 **脚本解决方案的积极方面是它不会受到我之前的非脚本解决方案中提到的背景问题的影响。

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2016-04-14T11:22:20.517

**你也可以使用**

```
border-left: 9vw solid #F5E5D6;
border-right: 9vw solid #F5E5D6; 
```

或者

```
border: 9vw solid #F5E5D6; 
```

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2014-05-27T02:02:50.227

所以这是一个较老的问题，但对于那些仍在寻找答案的人来说，CSS 属性 Box-Sizing 在这里是无价的：

```
-webkit-box-sizing: border-box; /* Safari/Chrome, other WebKit  */
-moz-box-sizing: border-box;    /* Firefox, other Gecko         */
box-sizing: border-box; 
```

这意味着您可以将 div 的宽度设置为百分比，并且您添加到 div 的任何边框都将包含在该百分比内。因此，例如，以下代码会将 1px 边框添加到 div 宽度的内侧：

```
div { box-sizing:border-box; width:50%; border-right:1px solid #000; } 
```

如果您想了解更多信息：[http ://css-tricks.com/box-sizing/](http://css-tricks.com/box-sizing/)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-11-16T18:23:51.617

您可以将 em 用于百分比而不是像素，

例子：

```
border:10PX dotted #c1a9ff; /* In Pixels */
border:0.75em dotted #c1a9ff; /* Exact same as above in Percentage */ 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-11-20T13:56:41.047

百分比值不适用于`border-width`CSS。这在[规范](http://www.w3.org/TR/CSS21/box.html#border-width-properties)中列出。

您将需要使用 JavaScript 来计算元素宽度的百分比或您需要的任何长度数量，并将结果应用到`px`或类似于元素的边框。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2016-03-07T05:53:35.303

[现代浏览器支持 vh 和 vw 单位](http://caniuse.com/#search=vh)，它们是窗口视口的百分比。

因此，您可以将纯 CSS 边框作为窗口大小的百分比：

```
border: 5vw solid red; 
```

试试[这个例子](https://jsbin.com/wekodi/)并改变窗口宽度；边框将随着窗口大小的改变而改变粗细。`box-sizing: border-box;`也可能有用。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-08-11T12:36:48.273

**Box Sizing**
将框大小设置为边框框`box-sizing: border-box;`并将宽度设置为 100% 并为边框设置固定宽度，然后添加最小宽度，以便对于小屏幕边框不会超过整个屏幕

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-02-16T15:49:09.737

您可以使用跨度制作自定义边框。用一个类（指定边界的方向）和一个 id 创建一个跨度：

```
<html>
    <body>
        <div class="mdiv">
            <span class="VerticalBorder" id="Span1"></span>
            <header class="mheader">
                <span class="HorizontalBorder" id="Span2"></span>
            </header>
        </div>
    </body>
</html> 
```

然后，转到您的 CSS 并将类设置为`position:absolute`、`height:100%`（对于垂直边框）、`width:100%`（对于水平边框）`margin:0%`和`background-color:#000000;`。添加其他必要的内容：

```
body{
    margin:0%;
}

div.mdiv{
    position:absolute;
    width:100%;
    height:100%;
    top:0%;
    left:0%;
    margin:0%;
}

header.mheader{
    position:absolute;
    width:100%;
    height:20%; /* You can set this to whatever. I will use 20 for easier calculations. You don't need a header. I'm using it to show you the difference. */
    top:0%;
    left:0%;
    margin:0%;
}

span.HorizontalBorder{
    position:absolute;
    width:100%;
    margin:0%;
    background-color:#000000;
}

span.VerticalBorder{
    position:absolute;
    height:100%;
    margin:0%;
    background-color:#000000;
} 
```

然后设置对应的id `class="VerticalBorder"`，，，`top:0%;`（`left:0%;`由于`width:1%;`mdiv的宽度等于mheader的宽度为100%，所以宽度将是你设置的100%。如果你把宽度设置为1%边框将是窗口宽度的 1%）。`class="HorizontalBorder"`设置与to对应的 id `top:99%`（因为它在标题容器中，所以顶部是指根据标题它所处的位置。如果你希望它到达底部，这个 + 高度应该加起来为 100%），`left:0%;`并且`height:1%`（由于 mdiv 的高度是 mheader 高度的 5 倍 [100% = 100, 20% = 20, 100/20 = 5]，因此高度将是您设置的高度的 20%。如果您设置高度到 1%，边框将是窗口高度的 0.2%）。这是它的外观：

```
span#Span1{
    top:0%;
    left:0%;
    width:.4%;
}
span#Span2{
    top:99%;
    left:0%;
    width:1%;
} 
```

免责声明：如果您将窗口调整到足够小的尺寸，边框将消失。如果窗口被调整到某个点，一个解决方案是限制边框的大小。这是我所做的：

```
window.addEventListener("load", Loaded);

function Loaded() {
  window.addEventListener("resize", Resized);

  function Resized() {
    var WindowWidth = window.innerWidth;
    var WindowHeight = window.innerHeight;
    var Span1 = document.getElementById("Span1");
    var Span2 = document.getElementById("Span2");
    if (WindowWidth <= 800) {
      Span1.style.width = .4;
    }
    if (WindowHeight <= 600) {
      Span2.style.height = 1;
    }
  }
} 
```

如果你做的一切正确，它应该看起来像这个链接中的样子：[https://jsfiddle.net/umhgkvq8/12/](https://jsfiddle.net/umhgkvq8/12/) 出于某种奇怪的原因，边框会在 jsfiddle 中消失，但如果你将它启动到浏览器则不会.

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2018-03-21T13:01:57.550

看看[calc() 规范](https://www.w3schools.com/cssref/func_calc.asp)。这是一个使用示例：

```
border-right:1px solid;
border-left:1px solid;
width:calc(100% - 2px); 
```***

# php - 网站 php、seo 和 mod_rewrite 的结构

> ID：13474755
> 
> 赞同：1
> 
> 时间：2012-11-20T13:55:08.367
> 
> 标签：php, url, mod-rewrite, seo

另一个非常初学者的网站问题。因此，查看一个简单的 php 站点背后的文件结构：

[基于 PHP 的网站的文件结构](https://stackoverflow.com/questions/4574986/file-structure-for-php-based-website)

[文件夹/文件结构约定？](https://stackoverflow.com/questions/4172679/folder-file-structure-conventions)

建议使用类似于以下的结构：

```
htdocs/
    /Assets/
    /CSS
    /JS
    /func/func.php
    _newpost.php
    tags.php
    index.php 
```

对于 SEO，我相信更“合乎逻辑”的 URL 更适合内容子类别。

```
eg. www.example.com/tags.php?t=celebrity 
```

不太可取：

```
www.example.com/tags/celebrity 
```

**就 URL 而言**- 我可以将 tags.php 文件放在 htdocs/tag 中，或者我可以使用 mod_rewrite 来获得所需的效果。这就是说，在“包含”func/func.php 和任何其他“操作”（例如 _newpost.php）时，在子文件夹中移动 .php 文件会导致问题。

**问题**- PHP 文件的存放位置是否有约定？它们都应该在根中吗？对于 _newpost.php - 执行操作和重定向的文件。这些都应该坐在哪里有约定吗？那么 mod_rewrite 应该处理 URL 的“外观”吗？

非常感谢 - 永远感激，马特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T14:01:46.247

**在 URL 方面**- 你不需要将 tags.php 放在任何特定的地方，mod_rewrite 有很多功能，例如你想要的效果。

只要你计划好你的结构，移动到子文件夹也不会给你带来问题，一件重要的事情是在 php.ini 中定义 DOCUMENT_ROOT，这样你就可以通过 $_SERVER['DOCUMENT_ROOT']; 访问你网站的根目录。当在包含内做包含时，这样你就不会搞砸了。

**问题**- 据我所知，实际上并没有约定，您可以按照您认为对您和/或未来的开发人员更方便、更干净/更友好的方式来组织文件。尽管您展示的结构很常见。

所以是的，通常友好的 URL 处理 mod_rewrite，而不是目录，因为您可以根据需要设置重写规则。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T14:03:17.460

您的问题有些复杂，因为大多数重要的 Web 应用程序都使用 MVC 框架，它总是带有某种形式的 URL 路由功能。这些路由器允许您将传入的 URL 与物理文件分离，因此类似的东西`mysite.com/news`不一定与 news.php 匹配。路由器本身是一部分后端代码，一部分是 mod_rewrite（或其 IIS 等效项）

至于 PHP 文件应该放在哪里，这取决于您的代码结构。如果您有大量独立脚本，它们都需要位于最终用户可以访问的某个地方（即，Web 根目录中的某个地方）。如果您有一个读取传入 URL 的索引文件并`include()`基于该请求提供适当的脚本，则只有索引需要位于 Web 根目录中。

敏感数据，如 db 凭据，应放在 Web 根目录和`include()`d 之外，或以其他方式读入。

# android - 按下项目后的 ListSelector 颜色

> ID：13474760
> 
> 赞同：1
> 
> 时间：2012-11-20T13:55:27.400
> 
> 标签：android, android-listview, selection

我阅读了很多关于 ListSelector 和选择器的内容。但我不知道如何让 ListView 的项目在按下**后**具有不同的颜色。

在双片段布局中，用户在左侧 ListView 中单击，数据被加载并显示在右侧片段中。为了让用户了解选择了哪个项目，我希望将其突出显示，直到左 ListView 中的下一个项目被按下。

我需要一个自定义状态吗？GMail 应用程序是如何做到这一点的？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T14:06:31.397

对，你需要额外的状态。我不确定 GMail 应用程序是如何做到的，但默认的 android 设置使用`android:state_activated="true"`其选择器中的状态作为平板电脑上的列表。不要忘记设置列表`android:choiceMode="singleChoice"`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T14:06:33.760

你试过这个选择器吗？

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
<item android:state_window_focused="false" android:state_selected="true"
    android:drawable="@android:color/transparent" />
<item android:state_selected="true"
    android:drawable="@android:color/transparent" />
<item android:state_pressed="true" android:state_selected="false"
    android:drawable="@android:color/transparent" />
<item android:state_selected="false"
    android:drawable="@color/message_item_read" /> 
```

选择器必须应用于项目背景，而不是 listSelector。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-20T14:10:47.827

我对 Android > 1.6 的解决方案是：

在活动中：

```
public static int POS = -1;

...
listView.setOnItemClickListener(new OnItemClickListener() {

public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
...
POS = arg2;
...
} 
```

在适配器中：

```
public View getView(int position, View convertView, ViewGroup parent) {
...
int pos = MyActivity.POS;
if (pos == position){
convertView.setBackgroundResource(R.drawable.lv_yellow);
}else{
convertView.setBackgroundResource(R.drawable.lv_empty);
}
...
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-20T21:40:57.460

我自己也遇到了这个问题……在研究了很长时间之后，我找到了解决方案，它对我有用。首先在你的drawable文件夹下创建list_view_selector.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
<!-- Selector style for listrow -->
<item       
    android:state_selected="false"
    android:drawable="@drawable/gradient_bg_listview" />

<item   android:state_selected="true" 
    android:drawable="@drawable/gradient_bg_hover_listview" />

<item   android:state_activated="true" 
    android:drawable="@drawable/gradient_bg_hover_listview" />

 </selector> 
```

然后是用于获取列表数据的布局，您必须定义 list_view_selector。就我而言，我这样定义：

```
//This is the adapter where I defined my customlistview
SimpleAdapter adapter1 = new SimpleAdapter(
                this,
                list1,
                R.layout.customlistview,
                new String[] {"practice_technique","blank"},
                new int[] {R.id.text1,R.id.text2}
                );

//This is my customlistview where I defined list_view_selector

<?xml version="1.0" encoding="utf-8"?>

<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="50dp"
android:background="@drawable/list_view_selector" >

        <TextView android:id="@+id/text1"         
            style="@style/ListViewItemTextStyle"
            android:layout_width="fill_parent"
            android:paddingTop="5dp"   
            android:paddingLeft="10dp"      
            android:layout_height="fill_parent"
            />

         <TextView android:id="@+id/text2"         
                android:textSize="12sp"         
                android:textStyle="bold" 
                android:textColor="#616162" 
                android:paddingLeft="10dp"       
                android:layout_width="fill_parent"         
                android:layout_height="fill_parent"
                />

      </RelativeLayout> 
```

然后最后 onListItemclick 你必须写这样的东西：

```
 protected void onListItemClick(ListView l, View v, int position, long id)
  {
        super.onListItemClick(l, v, position, id);
        HashMap<String, String> val = list.get(position);           
        selectedTech = val.get("practice_technique");

        //below is the key line  
                v.setSelected(true);        
        startSelectedPage();
  } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-20T14:05:05.893

编写您自己的 ListAdapter 来执行此操作。具体来说，我会扩展 ArrayAdapter，并在此方法中放入一些代码：

```
 View getView(int position, View convertView, ViewGroup parent) 
```

本质上，此代码将检测该值是否已被单击，并更改视图的背景颜色。现在，你怎么知道以前点击过一个视图？我建议您进行`ArrayAdapter`扩展`OnClickListener`，并将 ListView 设置`setOnItemClickListener`为自定义`ArrayAdapter`。您可以通过以下方式确定单击了哪个项目：

```
 public void onItemClick(AdapterView<?> arg0, View arg1, int position, long arg3) {
    //Note that position is the item which was clicked. 
  } 
```

# ios - 动画 UIButton 不愿捕获事件

> ID：13474766
> 
> 赞同：-2
> 
> 时间：2012-11-20T13:55:42.893
> 
> 标签：ios, events, animation

我的程序有 a`UIToolBar`其中包含 a`UITextField`和 a `UIButton`。当软键盘出现时，整个视图 ( `self.view`) 就会出现。当`UIToolBar`移动到新位置时，按钮有时无法正确捕获事件。需要多次单击按钮才能触发单个事件。

下面这组代码在键盘出现时执行

```
[UIView beginAnimations:nil context:NULL];
[UIView setAnimationDuration:0.25];
self.view.frame = CGRectMake(0,-220,320,400);
tableView.frame = CGRectMake(10, 220, 320, 264);
[UIView commitAnimations]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T22:24:12.323

尝试这个

```
[UIView animateWithDuration:0.25 delay:0.0 options:UIViewAnimationOptionAllowUserInteraction animations:^{
    self.view.frame = CGRectMake(0,-220,320,400);
    tableView.frame = CGRectMake(10, 220, 320, 264);
}completion:^(BOOL finished) {}]; 
```

# rotation - 计算沿其局部 Y 轴的两个欧拉角之间的自旋

> ID：13474767
> 
> 赞同：0
> 
> 时间：2012-11-20T13:55:43.303
> 
> 标签：rotation, maya, euler-angles, quaternions

假设我们有两个旋转的物体，欧拉角是：

```
Object | x    |  y   |  z 
1      |  180 |  360 |  180 
2      | -360 | -720 |  360 
```

两者都使用旋转顺序`XYZ`。当旋转为零时，本地`Y-axis`指向上方。

我试图在他们本地的 Spins 中有所不同`Y-axis`。就好像所有方向都是的底部`Object 1`和连接的底部之间会有一根绳子一样。绳子会旋转/扭曲多少次？`Object 2``0,0,0`

一些例子：

```
#1 | 0, 360, 0
#2 | 0, 0,   0 
```

1个全扭

```
#1 | 0, 180, 0
#2 | 0, 0,   0 
```

1/2 扭转

```
#1 | 360, 0, 0
#2 | 0,   0, 0 
```

1个扭转。（想想连接到它的绳子，这也算作绳子的扭曲）

--

我一直在研究方向/旋转，它是使用它们的不同方式，比如四元数、欧拉角和轴角。我觉得我知道每个人的一般工作原理，但却错过了解决这个问题的技能。

关于如何解决这个问题的任何想法？

# mysql - 用于检查授权的 Mysql 函数或过程

> ID：13474771
> 
> 赞同：2
> 
> 时间：2012-11-20T13:55:53.570
> 
> 标签：mysql, privilege

用户应该只执行函数和过程。出于安全原因，我授予`EXECUTE`该用户并撤销同一用户的其他权限。

如何检查该用户是否只有`EXECUTE`存储功能的权限？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T14:17:56.563

```
SHOW GRANTS FOR '<user>'@'<host>' 
```

显示用户的授权。您可以检查用户的授权。

```
SELECT * FROM  mysql.procs_priv WHERE Proc_priv='Execute' AND Routine_type='PROCEDURE' AND Routine_name='<routine_name>' AND User='<user>' Db='<db_name>' AND Host='<host>'; 
```

Db 和 Host 可能不是必需的

# javascript - 在 IE7 的 jquery 中使用 after() 和 before() 不起作用

> ID：13474778
> 
> 赞同：0
> 
> 时间：2012-11-20T13:56:32.187
> 
> 标签：javascript, jquery, internet-explorer-7

在有人说这是另一个问题的副本之前，你知道，我已经环顾了 StackOverflow，但没有一个答案适合我的问题。

我一直在尝试`.after()`在 IE7 的 jquery 中使用，但它根本不起作用。我移动的元素根本没有出现。即使查看源代码，该元素也不存在，再次在 IE7 中。

除了所有其他浏览器，即 FF、chrome 等，它们都可以正常工作。

JS/jQuery：

```
$('.item-title').find('.aside').after($('<a style=\"margin-left:240px; width:103px; height:19px; margin-top:0px;\" href=\"#applyDateBlock\" class=\"blue-button scrollTo\">Select a room</a>')); 
```

HTML：

```
<div class="item-title">
    <div class="excerpt"></div>
    <div class="aside" style="margin-top: -13px;">
        <a class="scrollTo" href="#roomTable">some link 1</a>
        <a class="scrollTo" href="#tripAdvisorAnchor">some link 2</a>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T14:02:35.840

试试这个：

```
$('.item-title').find('.aside').after('<a style="margin-left:240px; width:103px; height:19px; margin-top:0px;" href="#applyDateBlock" class="blue-button scrollTo">Select a room</a>'); 
```

# google-chrome-extension - 回调页面不加载任何 js 或 css 文件

> ID：13474780
> 
> 赞同：0
> 
> 时间：2012-11-20T13:56:36.380
> 
> 标签：google-chrome-extension

我的扩展需要在 options.html 中使用 oauth，一旦成功获取 oauth 令牌，服务器将回调 options.html 并传递令牌。该系统在windows的chrome（版本：22.0.1229.94）下运行良好，但在mac osx（chrome版本：21.0.1180.89）中，回调页面（options.html）没有加载任何js或css文件。非常感谢您帮助我。

我的服务器使用.net。一旦它从evernote获得oauth令牌，应用程序重定向到url：chrome-extension://libhbnapikdkkfhfkmpjnpgcapfnfljd/options.html?oauth=xxxxxxxx，然后它会打开options.html。但在 mac osx 中，页面无法加载任何 js 或 css 文件。在 Windows 中，它运行良好。

我的 options.html 很简单，加载文件如下：

```
<script src="js/lib/jquery.min.js"></script>
<script src="js/tools.js"></script>
<script src="js/options.js" type="text/javascript"></script>
<link href="http://fonts.googleapis.com/css?family=Lora:400,700|Sanchez|Oswald" rel="stylesheet" type="text/css">
<link rel="stylesheet" type="text/css" href="css/options.css" /> 
```

# java - 访问 Java 库 API 的 PHP 代码

> ID：13474786
> 
> 赞同：4
> 
> 时间：2012-11-20T13:56:45.430
> 
> 标签：java, php, opennlp

我需要在我的*PHP*代码中使用基于*Java*的 OpenNLP 库。例如，我需要使用它的 Sentence Detector 组件 (en-sent.bin) 来分析我的 PHP 代码中的文本变量。

 *在其[文档](http://opennlp.apache.org/documentation/1.5.2-incubating/manual/opennlp.html#tools.sentdetect.detection.cmdline)中，可以从*Java*代码访问该 API，如下所示：

```
InputStream modelIn = new FileInputStream("en-sent.bin");

try {
  SentenceModel model = new SentenceModel(modelIn);
}
catch (IOException e) {
  e.printStackTrace();
}
finally {
  if (modelIn != null) {
    try {
      modelIn.close();
    }
    catch (IOException e) {
    }
  }
} 
```

如何在*PHP*中做同样的事情？

换句话说，与上述*Java代码等效的**PHP*是什么？

 ** * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-26T22:30:25.030

The solution I'm about to implement is writing a java based backend (because just the OpenNLP tool's output just won't cut it) and using PHP's execute function to run it. If you want it to be even faster, I suggest making it a daemon, making PHP connect to it and send it data to return (it'd probably be a unix socket). Although it's kinda complex, it seems less error prone than a PHP/Java Bridge.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T13:58:43.933

必须有一个 PHP API 才能访问 OpenNLP。快速搜索不显示任何内容。我能想到的唯一另一件事是使用某种 PHP/Java 桥接器，但这涉及更多。例如，参见[http://php-java-bridge.sourceforge.net/pjb/ 。](http://php-java-bridge.sourceforge.net/pjb/)**

# java - Java 中的泛型（和通配符）

> ID：13474791
> 
> 赞同：5
> 
> 时间：2012-11-20T13:57:00.893
> 
> 标签：java, list, generics, collections, wildcard

我正在阅读的一本关于 Java 的书告诉我，以下两段代码是等价的：

```
public <T extends Animal> void takeThing(ArrayList<T> list)

public void takeThing(ArrayList<? extends Animal> list); 
```

在相反的页面上，我被告知后一段代码使用了“？” 作为通配符，意味着不能将任何内容添加到列表中。

这是否意味着如果我有一个列表（或其他集合类型？）我不能让它们同时接受多态参数并且可以重新调整大小？还是我只是误解了什么？

所有帮助/评论都表示赞赏，即使它们稍微偏离主题。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T14:02:32.080

> 这是否意味着如果我有一个列表（或其他集合类型？）我不能让它们同时接受多态参数并且可以重新调整大小？

不。

两段代码并不*完全*等价。在第一行，该方法`takeThing`有一个类型参数`T`。在第二行中，您使用的是通配符。

当您使用第一个版本时，您将指定要使用的具体类型`T`。因为具体类型是已知的，所以添加到列表中没有问题。

在第二个版本中，您只是说“`list`是一个`ArrayList`包含扩展的某些未知类型的对象`Animal`”。这种类型究竟是什么，尚不得而知。您不能将对象添加到这样的列表中，因为编译器没有足够的信息（它不知道实际类型是什么）来检查您添加到列表中的内容是否应该被允许。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T17:01:05.457

通常，如果添加到列表涉及到一个只接受列表而不接受要添加的东西的方法，那么您将在其他地方拥有一些东西，`Animal`并且您会想要将其添加到列表中。在这种情况下，必须声明您的方法，以便它接受的所有列表类型都允许`Animal`在其中添加一个。这必须是某个**超类型**的一个`List<Animal>`或一个列表。它不可能是 a — 您添加的元素可能是 any 。**`Animal``List<Dog>``Animal`**

 **This is where the concept of the *lower bound*, and the keyword `super`, come in. The type declaration `List<? super Animal>` matches all the acceptable types as described above. On the other hand, you won't be able to **get** elements out of such a list in a typesafe way because they can in general be of **any type at all**. If a method wants to both add and get elements of declared type `Animal`, the only valid type it can accept is a `List<Animal>`.**

# graph - D3.js - Y 轴上 ScatterPlot 上的多个数据系列（列）

> ID：13474793
> 
> 赞同：0
> 
> 时间：2012-11-20T13:57:09.613
> 
> 标签：graph, d3.js, scatter-plot

这个问题的主题可能没有给出真实的场景，请阅读下面的所有内容，谢谢。

我正在开发基于以下数据的散点图（JSON - 在文件 simple.json 中）：

```
{
    "docs":
        [
            {"timestamp":"01","id":"100","quantity":"5","pay":"50","bp":"25","city":"Multan"},
            {"timestamp":"02","id":"200","quantity":"10","pay":"100","bp":"50","city":"Lahore"},
            {"timestamp":"03","id":"300","quantity":"3","pay":"30","bp":"15","city":"Multan"},
            {"timestamp":"04","id":"400","quantity":"5","pay":"50","bp":"25","city":"Multan"},
            {"timestamp":"05","id":"500","quantity":"6","pay":"60","bp":"30","city":"Lahore"},
            {"timestamp":"06","id":"600","quantity":"15","pay":"150","bp":"75","city":"Islamabad"},
            {"timestamp":"07","id":"700","quantity":"14","pay":"140","bp":"70","city":"Islamabad"},
            {"timestamp":"08","id":"800","quantity":"18","pay":"180","bp":"90","city":"Islamabad"},
            {"timestamp":"09","id":"900","quantity":"7","pay":"70","bp":"35","city":"Lahore"},
            {"timestamp":"10","id":"1000","quantity":"20","pay":"200","bp":"100","city":"Islamabad"}
        ]
} 
```

我正在尝试开发一个可重复使用的图表，我可以在其中向用户展示可用的数据列（来自上述数据）。因此，用户可以为 X 轴选择某一列（例如“id”），为 Y 轴选择另一列（例如“数量”）（直到这里一切都完美并符合预期）。稍后用户可以选择另一列并单击按钮在图表上绘制该列（以及先前添加的列）。

问题来了：

当我继续为 Y 轴处理另一列（比如“支付”）时，同时保持先前在图表上，新的被正确绘制（我也在根据新数据重新调整轴）。但旧的不重新排列。这是实际的问题。我正在考虑跟踪添加的每一列（通过将列引用存储在单独的数组中），所以每次有新列时，我都必须重新绘制旧列（我应该吗？）。但这在 D3 的功能或性能方面看起来并不可行。

为此，我还对绘制的每个圆圈应用了一个匿名类“更新”，这样我就可以选择所有“更新”圆圈，但这里出现了另一个问题，我怎么知道这些圆圈的新位置？我是否需要再次遍历该特定系列的数据？并且必须再画一遍？对于每个新系列，跟踪旧系列并重新绘制它们，将依次增加处理开销。是否有任何方便的解决方案或内置（d3's）机制来根据新比例重新调整以前的绘图？

请提出一些建议。我确信我缺少一些关键点。

# java - 获取 JFrame 内容的实际大小

> ID：13474795
> 
> 赞同：10
> 
> 时间：2012-11-20T13:57:20.313
> 
> 标签：java, swing

我得到一个 JFrame，我想显示一个带有边框的 JLabel，其中填充可能为 50px。当我将 JFrame 的大小设置为 750、750 并将 JLabel 的大小设置为 650、650 并将位置设置为 50、50 时，它显示它很奇怪......这是我的代码：

```
public class GUI {

    /**
     * Declarate all 
     */
    public int height = 750;
    public int width = 750;

    Dimension screen = Toolkit.getDefaultToolkit().getScreenSize();
    int x = (screen.width / 2) - (width / 2); // Center horizontally.
    int y = (screen.height / 2) - (height / 2); // Center vertically.

    /**
     * Create the GUI
     */
    JFrame frame = new JFrame();
    Border border = LineBorder.createBlackLineBorder();
    JLabel label = new JLabel();    

    public GUI(){
        label.setBorder(border);
        label.setSize(700, 700);
        label.setLocation(0, 0);

        frame.getContentPane().setLayout(null);
        frame.add(label);
    }

    public void createGUI() {
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setBounds(x,y,width,height);
        frame.setVisible(true);
    }

} 
```

所以我认为顶部的标题栏也包含在大小中。在图形中，您可以使用`getInsets()`. Swing / JFrame 现在有类似的东西吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-20T14:10:13.920

首先得到被框架修剪掉的像素。

```
int reqWidth = reqHeight = 750;

// first set the size
frame.setSize(reqWidth, reqHeight);

// This is not the actual-sized frame. get the actual size
Dimension actualSize = frame.getContentPane().getSize();

int extraW = reqWidth - actualSize.width;
int extraH = reqHeight - actualSize.height;

// Now set the size.
frame.setSize(reqWidth + extraW, reqHeight + extraH); 
```

另一种更简单的方法。以前的作品，但这是推荐的。

```
frame.getContentPane().setPreferredSize(750, 750);
frame.pack(); 
```

希望这可以帮助。

编辑：

在将组件添加到框架之前，将其添加到您的构造函数中。并将其设置在中间，使用

```
frame.setLocationRelativeTo(null); 
```

这将使窗口在屏幕上居中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-20T19:56:56.913

使用`setPreferredSize()`是[有问题](https://stackoverflow.com/q/7229226/230513)的，因为它总是以任意选择推翻组件的计算。相反，`pack()`封装`Window`以容纳组件的首选尺寸，如下所示。

![图片](../Images/81cf9d6433f665745f76754750bc601d.png)

```
import java.awt.Color;
import java.awt.EventQueue;
import javax.swing.BorderFactory;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.border.Border;
import javax.swing.border.CompoundBorder;

/**
 * @see https://stackoverflow.com/a/13481075/230513
 */
public class NewGUI extends JPanel {

    private static final int S1 = 10;
    private static final int S2 = 50;
    private JLabel label = new JLabel("Hello, world!");

    public NewGUI() {
        label.setHorizontalAlignment(JLabel.CENTER);
        Border inner = BorderFactory.createEmptyBorder(S1, S1, S1, S1);
        Border outer = BorderFactory.createLineBorder(Color.black);
        label.setBorder(new CompoundBorder(outer, inner));
        this.setBorder(BorderFactory.createEmptyBorder(S2, S2, S2, S2));
        this.add(label);
    }

    private void display() {
        JFrame f = new JFrame("NewGUI");
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.add(this);
        f.pack();
        f.setLocationRelativeTo(null);
        f.setVisible(true);
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                new NewGUI().display();
            }
        });
    }
} 
```

# windows-phone-7 - Windows Phone 7 模拟器无法连接到 Windows Live ID

> ID：13474803
> 
> 赞同：0
> 
> 时间：2012-11-20T13:57:48.903
> 
> 标签：windows-phone-7

我正在尝试使用来自该站点的 Live SDK 连接到 Windows Live ID：http: [//msdn.microsoft.com/en-us/library/live/hh243641.aspx](http://msdn.microsoft.com/en-us/library/live/hh243641.aspx)

当我在模拟器中运行此代码时，我得到了 Live SignIn 按钮。当我单击它时，它会尝试连接到 Windows Live，但总是以

“我们无法完成您的请求 Windows Live ID 遇到技术问题。请稍后再试。”

这种情况一直在发生——它需要一些许可或类似的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T14:31:56.747

好的，这是因为我在登录按钮的 XAML 代码中提供了错误的 ClientId。

如果您使用登录按钮，则必须提供 ClientId 属性以及您获得的 ID。

# ruby - 初始化 rbenv 并从 shell 脚本运行 ruby 脚本

> ID：13474809
> 
> 赞同：3
> 
> 时间：2012-11-20T13:58:08.047
> 
> 标签：ruby, shell, svn-hooks, rbenv

初始化 rbenv 并从 shell 脚本运行 ruby​​ 脚本

我希望 svnserve 运行预提交挂钩，用 ruby​​ 编写。由于 svnserve 以 root 用户身份运行，它对用户 rbenv 安装一无所知。

我设置了一个软链接 /usr/bin/ruby -> /home/admin/.rbenv/shims/ruby 。结果，当我尝试

```
#!/usr/bin/ruby
puts "Pre-commit hook!" 
```

它显示错误：

```
Transmitting file data .svn: Commit failed (details follow):
svn: Commit blocked by pre-commit hook (exit code 255) with no output. 
```

当我在服务器上手动运行时：

```
admin $ sudo ./pre-commit
/usr/bin/ruby: line 4: exec: rbenv: not found 
```

所以，我想，需要 rbenv 初始化，但是怎么做呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-21T10:07:34.483

在钩子路径中：

预提交：

```
#!/bin/bash
export HOME=/home/user
if [ -d $HOME/.rbenv ]; then
  export PATH="$HOME/.rbenv/shims:$PATH"
  eval "$(rbenv init -)"
fi
$0.rb $* 
```

预提交.rb：

```
#!/usr/bin/env ruby
ARGV.each_with_index { |arg, index| puts "Index #{index}: Argument #{arg}" } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T14:13:43.080

您应该在使用它之前进行初始化`rbenv`。

```
/path/to/user/home/.rbenv/bin/rbenv init 
```

然后全局设置 ruby​​ 版本：

```
rbenv global DESIRED-RUBY-VERSION 
```

或本地：

```
rbenv local DESIRED-RUBY-VERSION 
```

或每个外壳：

```
rbenv shell DESIRED-RUBY-VERSION 
```

虽然不确定 shell 设置是否可以在没有 tty 的情况下工作。

所以你可以创建一个 shell 脚本，`pre-commit.sh`并将其注册为 svn 钩子。

在里面初始化`rbenv`并调用你的`pre-commit.rb`文件

# wpf-controls - Wpf 滚动条样式三角形

> ID：13474810
> 
> 赞同：0
> 
> 时间：2012-11-20T13:58:10.987
> 
> 标签：wpf-controls

在[本文](http://sachabarbs.wordpress.com/2008/01/11/styling-a-scrollviewerscrollbar-in-wpf/)中，滚动条焕然一新。样式中有一条线似乎将三角形放在滚动按钮中。虽然我不知道怎么读。

```
Content="M 0 0 L 4 4 L 8 0 Z"/> 
```

这在控件的上下文中意味着什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T16:25:37.173

这只是[Path Data](http://msdn.microsoft.com/en-us/library/system.windows.shapes.path.data.aspx)的几何形状。如果您想复制它，只需执行类似的操作`<Path Data="YourPath"/>`

希望这可以帮助。

# java - 通过 java 5 以及 java 6 及以上版本的 MAC 地址

> ID：13474813
> 
> 赞同：0
> 
> 时间：2012-11-20T13:58:21.870
> 
> 标签：java

现在我正在使用此代码来检索系统的 MAC 地址。

```
command = "cmd.exe /c ipconfig /all";
Process p = Runtime.getRuntime().exec(command);
BufferedReader br = new BufferedReader(new InputStreamReader(p.getInputStream())); 
```

当用户在环境变量中定义了一个值为“Systemroot/system32”的“路径”时，这可以正常工作，但不是没有这个。
所以我想做的是使用这个

```
command = "cmd.exe %systemroot%/system32/ipconfig /all";
Process p = Runtime.getRuntime().exec(command);
BufferedReader br = new BufferedReader(new InputStreamReader(p.getInputStream())); 
```

但这根本不是在检索 MAC 地址。

谁能让我知道这里出了什么问题或如何检索 MAC 地址，其代码在 java 5 及更高版本中兼容？
有没有替代的解决方案？
getHardwareAddress() 在 java 5 中不起作用。我在很多帖子中都看到了这一点，这不适合我的应用程序。我的应用程序兼容所有 tomcat 和所有 java 版本。
请帮忙...

我参考并遵循了[如何从 Java 设置环境变量？](https://stackoverflow.com/questions/318239/how-do-i-set-environment-variables-from-java)同样，但没有环境变量，MAC 地址不会从系统中读取。请问还有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T15:05:58.203

您可以使用 获取环境变量的值`System.getenv`，因此您可以尝试类似的方法

```
File sysRoot = new File(System.getenv("systemroot"));
File ipconfig = new File(new File(sysRoot, "system32"), "ipconfig");
String[] command = new String[] { ipconfig.getAbsolutePath(), "/all" };
Process p = Runtime.getRuntime().exec(command);
BufferedReader br = new BufferedReader(new InputStreamReader(p.getInputStream()));
// read all output from br, then p.waitFor() 
```

# java - 如何在 Web 服务中使用 Moxy XPath 注释 bean？

> ID：13474816
> 
> 赞同：2
> 
> 时间：2012-11-20T13:58:23.603
> 
> 标签：java, web-services, jakarta-ee, jax-ws, moxy

我有一颗豆子

```
@XmlRootElement(name = "alpha")
public class MyBean {
    private String thetaValue;

    @XmlPath("beta/theta/text()")
    public String getThetaValue() {
        return this.thetaValue;
    }

    public void setThetaValue(String thetaValue) {
        this.thetaValue = thetaValue;
    }
} 
```

这是使用 eclipselink moxy jaxb 注释的。我想使用相同的 bean 和 Xpath 来托管 Web 服务。我该怎么做呢？Web 服务将托管在 Tomcat 6 或 7 上

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T16:01:23.773

[**JAX-WS (JSR-224)**](http://jcp.org/en/jsr/detail?id=224)和[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)实现之间没有基于标准的集成点。这意味着对[**EclipseLink MOXy**](http://www.eclipse.org/eclipselink/moxy.php)作为 JAXB 提供程序的支持取决于 JAX-WS 实现（请参阅下面的注释）。

**JAX-WS 提供者 - 参考实现**

对 MOXy 的支持直接融入了 JAX-WS 参考实现。这意味着任何利用足够新版本的 JAX-WS RI 的环境都应该能够利用 MOXy 作为 JAXB 提供程序。我需要了解更多有关执行此操作的细节。

*   [http://mvnrepository.com/artifact/com.sun.xml.ws/jaxws-eclipselink-plugin](http://mvnrepository.com/artifact/com.sun.xml.ws/jaxws-eclipselink-plugin)

**其他 JAX-WS 提供者**

您可以利用该`javax.xml.ws.Provider`接口而不是传统的服务端点接口。 `Provider`使您可以访问实际的 XML 消息。通过访问 XML 消息，您可以使用 MOXy 直接与其交互。

*   [http://blog.bdoughan.com/2013/02/leveraging-moxy-in-your-web-service-via.html](http://blog.bdoughan.com/2013/02/leveraging-moxy-in-your-web-service-via.html)

**笔记**

您可以在以下环境中创建利用 MOXy 的扩展注释的传统 JAX-WS Web 服务：

*   WebLogic（12.1.1 及更高版本）- [EclipseLink MOXy 是 WebLogic Server 12c 中的 JAXB 提供程序](http://blog.bdoughan.com/2011/12/eclipselink-moxy-is-jaxb-provider-in.html)
*   GlassFish (3.1.2 及以上) - [GlassFish 3.1.2 充满了 MOXy (EclipseLink JAXB)](http://blog.bdoughan.com/2012/02/glassfish-312-is-full-of-moxy.html)

# oracle10g - Oracle：检查变量的数据类型

> ID：13474818
> 
> 赞同：0
> 
> 时间：2012-11-20T13:58:57.920
> 
> 标签：oracle10g

如何在 oracle 10g 过程中检查变量是否为 varchar/date/numeric 数据类型？就像猜想我在一个过程中有一个变量，它将填充各种数据（可能是数字、字符串或日期）。如何在 Oracle 中找到这个变量的数据类型？？？

```
Declare
returnValue varchar2;

Begin
Text:=select col_name from tab_name where ID=:ID1;
EXECUTE IMMEDIATE  Text into returnValue;
End; 
```

这里'ID1'将被动态发送。“col_name”可以有任何数据。我必须检查“returnValue”变量中有什么样的值。？

请提出一些答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T14:39:55.263

你应该声明`column_name`by

```
returnvalue tablename.columnname%TYPE; 
```

因此，通过这种方式，列的数据类型将具有存储在`returnvalue`变量中的值

更新 1

```
returnValue tab_name.col_name%TYPE;

begin
select col_name into returnValue from tab_name where ID=:ID1;
return returnValue;
end; 
```

更新 2

您可以从以下获取数据类型

```
select data_type || '(' || data_length || ')' col from user_tab_columns where
TABLE_NAME = '<YOURTABLE>' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T14:10:06.267

你可以做这样的事情，有点不是特别好：

```
 declare
    v_date DATE;
    v_number NUMBER

    begin
        select to_date(variable_name,<date_format>) into v_date from dual;

    exception when others then 
        //its not a date
        begin
          select to_date(variable_name,<date_format>) into v_number from dual;
        exception when others then 
          //its not a number
          ...
          ...
        end;
    end; 
```

理想情况下，您不应该将多种类型的数据放入单个 VARCHAR2 列 - 那么您首先就不会有这个问题..

# java - 明文连接

> ID：13474820
> 
> 赞同：5
> 
> 时间：2012-11-20T13:59:02.700
> 
> 标签：java, ssl, jetty

我正在创建一个简单的 HTTPS 连接并返回响应

```
URL google = new URL("https://www.google.com/");
HttpsURLConnection connection = (HttpsURLConnection)google.openConnection();
System.out.println( "Response: " + connection.getResponseCode()); 
```

这工作正常，我收到 200 响应（我定义了所有的密钥库和信任库等）

然后我使用 https.proxyPort=8443 和 https.proxyHost-localhost 通过 Jetty 服务器代理请求

服务器具有如下所示的连接器：

```
Server server = new Server();
SelectChannelConnector connector0 = new SelectChannelConnector();
connector0.setPort(8080);
SslSelectChannelConnector sslConnector = new SslSelectChannelConnector();
sslConnector.setPort(8443);
SslContextFactory cf = sslConnector.getSslContextFactory();
cf.setKeyStorePath(keyStoreHome);
cf.setKeyStorePassword(keyStorePassword);
cf.setTrustStore(trustStoreHome);
cf.setTrustStorePassword(trustStorePassword);
cf.setCertAlias("jetty");
server.setConnectors(new Connector[] {connector0, sslConnector});
server.setHandler(new HelloHandler());
server.start();
server.join(); 
```

这给了我以下错误：

```
DEBUG: org.eclipse.jetty.io.nio - created SCEP@33589e56{l(/127.0.0.1:62348)<->r(/127.0.0.1:8443),d=false,open=true,ishut=false,oshut=false,rb=false,wb=false,w=true,i=0}-{SslConnection@7f033a6f SSL NOT_HANDSHAKING i/o/u=-1/-1/-1 ishut=false oshut=false {AsyncHttpConnection@26c623af,g=HttpGenerator{s=0,h=-1,b=-1,c=-1},p=HttpParser{s=-14,l=0,c=0},r=0}}
DEBUG: org.eclipse.jetty.io.nio.ssl - [Session-1, SSL_NULL_WITH_NULL_NULL] SslConnection@7f033a6f SSL NOT_HANDSHAKING i/o/u=180/0/0 ishut=false oshut=false {AsyncHttpConnection@26c623af,g=HttpGenerator{s=0,h=-1,b=-1,c=-1},p=HttpParser{s=-14,l=0,c=0},r=0} NOT_HANDSHAKING filled=180/180 flushed=0/0
DEBUG: org.eclipse.jetty.io.nio.ssl - SCEP@33589e56{l(/127.0.0.1:62348)<->r(/127.0.0.1:8443),d=true,open=true,ishut=false,oshut=false,rb=false,wb=false,w=true,i=0r}-{SslConnection@7f033a6f SSL NEED_WRAP i/o/u=180/0/0 ishut=false oshut=false {AsyncHttpConnection@26c623af,g=HttpGenerator{s=0,h=-1,b=-1,c=-1},p=HttpParser{s=-14,l=0,c=0},r=0}}
javax.net.ssl.SSLException: Unrecognized SSL message, plaintext connection?
at com.sun.net.ssl.internal.ssl.EngineInputRecord.bytesInCompletePacket(EngineInputRecord.java:152)
at com.sun.net.ssl.internal.ssl.SSLEngineImpl.readNetRecord(SSLEngineImpl.java:806)
at com.sun.net.ssl.internal.ssl.SSLEngineImpl.unwrap(SSLEngineImpl.java:721)
at javax.net.ssl.SSLEngine.unwrap(SSLEngine.java:607)
at org.eclipse.jetty.io.nio.SslConnection.unwrap(SslConnection.java:519)
at org.eclipse.jetty.io.nio.SslConnection.process(SslConnection.java:354)
at org.eclipse.jetty.io.nio.SslConnection.access$900(SslConnection.java:43)
at org.eclipse.jetty.io.nio.SslConnection$SslEndPoint.fill(SslConnection.java:661)
at org.eclipse.jetty.http.HttpParser.fill(HttpParser.java:1030)
at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:275)
at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:230)
at org.eclipse.jetty.server.AsyncHttpConnection.handle(AsyncHttpConnection.java:77)
at org.eclipse.jetty.io.nio.SslConnection.handle(SslConnection.java:191)
at org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:620)
at org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:46)
at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:603)
at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:538)
at java.lang.Thread.run(Thread.java:662)
DEBUG: org.eclipse.jetty.io.nio.ChannelEndPoint - close SCEP@33589e56{l(/127.0.0.1:62348)<->r(/127.0.0.1:8443),d=true,open=true,ishut=false,oshut=false,rb=false,wb=false,w=true,i=0!}-{SslConnection@7f033a6f SSL NEED_WRAP i/o/u=180/0/0 ishut=false oshut=false {AsyncHttpConnection@26c623af,g=HttpGenerator{s=0,h=-1,b=-1,c=-1},p=HttpParser{s=-14,l=0,c=0},r=0}}
DEBUG: org.eclipse.jetty.http.HttpParser - 

javax.net.ssl.SSLException: Unrecognized SSL message, plaintext connection? 
```

谁能告诉我这可能有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-23T23:38:22.917

[这与这个问题](https://stackoverflow.com/a/6396178/372643)或多或少是相同的问题。

当您使用`https.proxyPort=8443`and`https.proxyHost=localhost`时，您的客户端和代理主机/端口之间的连接不是使用 SSL/TLS 完成的，而是使用纯文本 HTTP。然后客户端向代理`CONNECT`发送带有目标主机名的请求（这是您获得此“纯文本”异常的方式）。

然后，代理向该目标服务器发出请求，并建立一条来回中继所有原始流量的隧道。`HttpsUrlConnection`从客户端的角度来看（

没有多少客户端也支持使用 HTTPS 在客户端和代理本身之间建立连接。这通常不是很有用，因为攻击者无论如何只能看到主机名和端口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T16:03:10.303

从外观上看，代理连接 HTTP - 8080 和 HTTPS - 8443 时会发生异常。JETTY 是否在这些端口之间进行解密，因为如果不是，则异常是关于 8080 是纯文本。

# android - 如何在android中准备数字加密签名？

> ID：13474824
> 
> 赞同：1
> 
> 时间：2012-11-20T13:59:07.827
> 
> 标签：android, encryption

我正在准备一份申请。我的申请有一份表格。填写表格中的所有字段后需要用户签名。对于签名，我正在计划使用数字加密签名。我不知道数字加密签名。请指导我并提供一些教程.....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T14:09:52.273

您可以使用 Android 上的充气城堡库进行签名。

有关此问题的简要讨论，您可以查看以下内容：

[如何在 Android 上使用 Java BouncyCastle API 使用纯文本密钥对字符串进行 RSA 加密](https://stackoverflow.com/questions/7234529/how-do-i-rsa-encrypt-a-string-with-a-plaintext-key-using-java-bouncycastle-api-o)

但是，更大的问题是安全地进行密钥交换，因为 RSA 密钥对是在客户端或服务器上生成的，然后安全地发送到另一端（私钥保留在设备上，所以它应该生成密钥对）。

但是，这里有一个例子，显示了用充气城堡签名。

[http://www.mobilefish.com/download/bouncycastle/DigitalSignature1Example.java](http://www.mobilefish.com/download/bouncycastle/DigitalSignature1Example.java)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T14:01:35.550

应该看看[Signing your Application](http://developer.android.com/tools/publishing/app-signing.html)文档。将指导您完成生成加密密钥、java 密钥库和签署您的应用程序以供 Google Play 提交的过程

# visual-studio-2010 - 带有 VS 2010 登录提示的 Crystal Reports

> ID：13474827
> 
> 赞同：1
> 
> 时间：2012-11-20T13:59:16.500
> 
> 标签：visual-studio-2010, crystal-reports

我正在使用带有 Visual Studio 2010 的 Crystal Reports 并连接到**不需要登录名或密码**的 Access db 。我正在使用 Report Viewer 显示下拉框，以便从 3 个表中过滤数据。我之前运行它时工作正常，但现在当我运行它时，我会看到一个数据库登录窗口，要求输入用户名和密码。我试图清除字段并继续，但这无济于事。我看到其他用户有这个问题，但是他们的数据库需要用户名和密码，而我的不需要。有任何想法吗？

谢谢！！

# c# - 在 WP7.1 SQL Server CE 数据库上执行 SQL 查询

> ID：13474830
> 
> 赞同：0
> 
> 时间：2012-11-20T13:59:40.433
> 
> 标签：c#, linq, sql-server-ce, windows-phone-7.1, sql-to-linq-conversion

我需要开发一个将 SQL 查询作为输入的函数，并在电话数据库（SQL Server CE）中执行它并返回结果。

据我所知，我们只能通过 LINQ 在 wp7.1 中查询 SQL Server CE。那么有没有可能开发出这样的功能呢？

请帮忙....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T08:23:08.577

您只能通过 LINQ 查询 wp7.1 中的 SQL Server CE。

# c# - 显式（通过字符串列表）指定要读取的对象的哪些字段

> ID：13474834
> 
> 赞同：1
> 
> 时间：2012-11-20T14:00:03.737
> 
> 标签：c#, string, list, reflection, foreach

一类：

```
public class Person
{
    public string Title;
    public string Name;
    public Int32 Age;
} 
```

我有一个字符串列表

```
List<String> fields = new List<String>()
{
    "Title",
    "Age"
}; 
```

我现在想，给定上面的字符串列表，WriteLine 列出的字段，同时遍历 Person 对象列表。

```
var persons = new List<Person>();

//Populate persons

foreach(Person person in persons)
{
    //Print out Title and Age of every person (because Title and Age are listed in fields)
} 
```

**我试过的：**

*   我尝试过的工作，但似乎效率极低。我为每次迭代创建一个`Dictionary<String, object>`并将对象的每个字段分配给字典中的一个条目，然后仅通过将键与`fields`列表中的项目匹配来评估字典条目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T14:10:33.147

奇怪的要求，你需要低效的反射，例如：

```
IEnumerable<PropertyInfo> properties = typeof(Person)
            .GetProperties(BindingFlags.Public | BindingFlags.Instance)
            .Where(p => fields.Contains(p.Name));

foreach (Person person in persons)
{
    foreach (PropertyInfo prop in properties)
        Console.WriteLine("{0}: {1}", prop.Name, prop.GetValue(person, null));
} 
```

[**演示**](http://ideone.com/N1PXFB)

我刚刚看到您可能正在寻找字段而不是属性。然后使用这个类似的代码：

```
IEnumerable<FieldInfo> fields = typeof(Person)
    .GetFields( BindingFlags.Public | BindingFlags.Instance)
    .Where(f => fieldNames.Contains(f.Name)); // fieldNames is your List<string>

foreach (Person person in persons)
{
    foreach (FieldInfo field in fields)
        Console.WriteLine("{0}: {1}", field.Name, field.GetValue(person));
} 
```

# c# - 项目无法编译

> ID：13474835
> 
> 赞同：0
> 
> 时间：2012-11-20T14:00:05.703
> 
> 标签：c#, c, silverlight, xaml, compiler-errors

我正在修改一些图标，之前运行了我的项目，一切都很好，后来我再次尝试，这发生了。

![在此处输入图像描述](../Images/13c23c7046b7676ee789da543e0f5314.png) 我不知道出了什么问题，因为我没有修改任何代码，有人知道如何解决这个问题吗？

谢谢扎罗斯
_

图片链接：http: [//i.stack.imgur.com/a7nNq.png](https://i.stack.imgur.com/a7nNq.png)

> 错误 1 ​​“CreateRiaClientFilesTask”任务意外失败。System.Web.HttpException (0x80004005)：无法加载文件或程序集“Desaware.MachineLicense40，版本=2.0.0.0，Culture=neutral，PublicKeyToken=c8956dcc7a600871”或其依赖项之一。参数不正确。（HRESULT 异常：0x80070057 (E_INVALIDARG)）---> System.Configuration.ConfigurationErrorsException：无法加载文件或程序集“Desaware.MachineLicense40，版本=2.0.0.0，文化=中性，PublicKeyToken=c8956dcc7a600871”或其依赖项之一. 参数不正确。（来自 HRESULT 的异常：0x80070057 (E_INVALIDARG)）---> System.IO.FileLoadException：无法加载文件或程序集“Desaware.MachineLicense40，版本=2.0.0.0，文化=中性，PublicKeyToken=c8956dcc7a600871” 或其依赖项之一。参数不正确。（来自 HRESULT 的异常：0x80070057 (E_INVALIDARG)）---> System.IO.FileLoadException：无法加载文件或程序集“Desaware.MachineLicense40”或其依赖项之一。参数不正确。（来自 HRESULT 的异常：0x80070057 (E_INVALIDARG)）
> 
> --- 内部异常堆栈跟踪结束 --- 在 System.Reflection.RuntimeAssembly._nLoad(AssemblyName fileName, String codeBase, Evidence assemblySecurity, RuntimeAssembly locationHint, StackCrawlMark& stackMark, Boolean throwOnFileNotFound, Boolean forIntrospection, Boolean suppressSecurityChecks) 在 System.Reflection。 System.Reflection.RuntimeAssembly.InternalLoadAssemblyName (AssemblyName assemblyRef, Evidence assemblySecurity, StackCrawlMark & Boolean stackMark, Boolean for Introspection, 布尔 throwOnFileNotFound, Boolean for Introspection, Boolean suppressSecurityChecks) suppressSecurityChecks) 在 System.Reflection.RuntimeAssembly.InternalLoad(String assemblyString,System.Reflection.Assembly.Load(String assemblyString) at System.Web.Configuration.CompilationSection.LoadAssemblyHelper(String assemblyName, Boolean starDirective) 的证据 assemblySecurity, StackCrawlMark& stackMark, Boolean forIntrospection) --- 内部异常堆栈跟踪结束 ---在 System.Web.Configuration.CompilationSection.LoadAssemblyHelper(String assemblyName, Boolean starDirective) 在 System.Web.Configuration.CompilationSection.LoadAllAssembliesFromAppDomainBinDirectory() 在 System.Web.Configuration.CompilationSection.LoadAssembly(AssemblyInfo ai) 在 System.Web.Compilation。在 System.Web.Compilation.BuildManager.GetPreStartInitMethodsFromReferencedAssemblies() 在 System.Web.Compilation.BuildManager 的 BuildManager.GetReferencedAssemblies(CompilationSection compConfig)。CallPreStartInitMethods() 在 System.Web.Hosting.HostingEnvironment.Initialize(ApplicationManager appManager, IApplicationHost appHost, IConfigMapPathFactory configMapPathFactory, HostingEnvironmentParameters hostingParameters, PolicyLevel policyLevel, 异常 appDomainCreationException) 在 System.Web.Compilation.ClientBuildManager.EnsureHostCreated() 在 System.Web.Compilation .ClientBuildManager.CreateObject(Type type, Boolean failIfExists) 在 Microsoft.ServiceModel.DomainServices.Tools.CreateRiaClientFilesTask.ExecuteInternal() 在 Microsoft.ServiceModel.DomainServices.Tools.CreateRiaClientFilesTask.GenerateClientProxies() 在 Microsoft.ServiceModel.DomainServices.Tools.RiaClientFilesTask。 Microsoft 的 Microsoft.Build.BackEnd.TaskExecutionHost.Microsoft.Build.BackEnd.ITaskExecutionHost.Execute() 的 Execute()。Build.BackEnd.TaskBuilder.ExecuteInstantiatedTask(ITaskExecutionHost taskExecutionHost, TaskLoggingContext taskLoggingContext, TaskHost taskHost, ItemBucket bucket, TaskExecutionMode howToExecuteTask, Boolean& taskResult) Fsc.Feenics.MasterControl.Client.Silverlight
> 
> 错误 2 “CreateRiaClientFilesTask”任务意外失败。System.Web.HttpException (0x80004005)：无法加载文件或程序集“Desaware.MachineLicense40，版本=2.0.0.0，Culture=neutral，PublicKeyToken=c8956dcc7a600871”或其依赖项之一。参数不正确。（HRESULT 异常：0x80070057 (E_INVALIDARG)）---> System.Configuration.ConfigurationErrorsException：无法加载文件或程序集“Desaware.MachineLicense40，版本=2.0.0.0，文化=中性，PublicKeyToken=c8956dcc7a600871”或其依赖项之一. 参数不正确。（来自 HRESULT 的异常：0x80070057 (E_INVALIDARG)）---> System.IO.FileLoadException：无法加载文件或程序集“Desaware.MachineLicense40，版本=2.0.0.0，文化=中性，PublicKeyToken=c8956dcc7a600871” 或其依赖项之一。参数不正确。（来自 HRESULT 的异常：0x80070057 (E_INVALIDARG)）---> System.IO.FileLoadException：无法加载文件或程序集“Desaware.MachineLicense40”或其依赖项之一。参数不正确。（来自 HRESULT 的异常：0x80070057 (E_INVALIDARG)）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T14:06:59.763

从外观上看，您缺少 DLL 或引用 DLL 正在使用。您可能清理了 PC 上的一些文件并删除了这些库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T20:15:43.280

就我而言，我没有丢失任何 DLL。我必须清理**Temporary ASP.NET Files 文件**夹才能摆脱它（特别是`C:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files`）。

# actionscript-3 - 宝石风格网页游戏的原生 Flash 渲染与 Starling 框架渲染

> ID：13474837
> 
> 赞同：2
> 
> 时间：2012-11-20T14:00:10.167
> 
> 标签：actionscript-3, flash, flash-builder, starling-framework

我正在使用 web 的 flash builder 创建一个宝石风格的游戏，我想知道是否最好使用 actionscript 3 的本机渲染（显示列表）或Starling 2D 框架的 gpu 渲染？我想要使​​用本机 Flash 渲染的原因是，根据我的研究，我了解到 Flash 将利用重绘区域，并且只重绘需要更新的阶段部分，而 Starling 将在每一帧重新渲染整个阶段。在宝石风格的游戏中，静态对象多而动态对象少，因此通常不需要每帧重绘整个舞台，只需要重新绘制舞台的一小部分。坚持使用 actionscript 3 的本机渲染调用会更好地提高性能，还是使用 starling 框架来利用 gpu 来加速渲染会更明智？任何观点将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T15:56:54.840

Starling will be faster if you are using images, particularly on mobile.

The static regions can either be rendered as a single Sprite, or you can flatten it at runtime to improve the performance.

If you are drawing, in Starling you'll need to draw to a bitmap and then use that as a Sprite. You'll get better performance if everything is in the same sprite sheet, however.

While it's true that Starling draws every frame, it's a different sort of operation. Here's what actually happens:

1) The textures (images) being used by the app are uploaded to the GPU. This is done once.

2) Each frame, Starling tells the GPU "render this texture at this position with this scale and rotation". This is called a "draw call" but it's extremely fast. The slick thing with Starling is that it can batch these draw calls under certain circumstances to get serious speed improvements.

So yes, everything is "redrawn" each frame, but the GPU's hardware acceleration is used.

On mobile, Starling (or similar) is really the only way to do something at 60fps.

# python - video_set_callbacks vlc python 绑定示例

> ID：13474840
> 
> 赞同：5
> 
> 时间：2012-11-20T14:00:16.843
> 
> 标签：python, callback, vlc, libvlc

有人可以分享一个 python 代码片段，展示如何在 libvlc 中使用 video_set_callbacks 吗？

我的中间目标是每次准备好显示时检索一个框架。一个解决方案通常[不仅对我来说](http://forum.videolan.org/viewtopic.php?f=32&t=104613&p=355000&hilit=python%20callback#p355000)很有趣。

谢谢！

# gradle - 如何使用 Gradle 在单个任务中多次执行 JavaExec？

> ID：13474842
> 
> 赞同：20
> 
> 时间：2012-11-20T14:00:19.277
> 
> 标签：gradle

我有一个运行简单 JavaExec 的任务。

我似乎无法工作的是能够在每次迭代 Filetree 对象（包含文件）时多次运行 JavaExec，而我想一个一个地传递给主 JavaExec 类。不幸的是，编译器或代码生成工具不接受目录作为 arg，因此我需要将文件作为每个循环的 arg 传递。这是我所拥有的：

```
task generateClasses(type: JavaExec) {
   description = 'Generates Json Classes...'
   classpath configurations.all
   main = "org.apache.gora.compiler.Compiler"
   FileTree tree = fileTree(dir: 'src/main')
   tree.include '**/*.json'
       tree.each {File file ->
       println file
       args = [ "src/main/json/$file.name", "$buildDir/generated-src/src/main/java" ]
   } 
```

}

编译Java.source generateClasses.outputs.files，sourceSets.main.java

从上面它可以工作，我列出了所有文件，但 JavaExec 在最后一个文件读取时被调用一次。

我该如何解决上述问题？请帮忙。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-11-21T13:34:17.473

使用`project.javaexec`方法怎么样？请参阅[API 文档](http://www.gradle.org/docs/current/dsl/org.gradle.api.tasks.JavaExec.html)或 [DSL 参考](http://www.gradle.org/docs/current/dsl/org.gradle.api.Project.html#org.gradle.api.Project:javaexec(groovy.lang.Closure))。

```
task generateClasses {
  description = 'Generate Json Classes'
  fileTree(dir: 'src/main', include:'**/*.json').each { file ->
    doLast {
      javaexec {
        classpath configurations.all
        main = 'org.apache.gora.compiler.Compiler'
        args = ["src/main/json/$file.name", "$buildDir/generated-src/src/main/java"]
      }
    }
  }
} 
```

# c++ - long long 初始化和 8 字节的平台

> ID：13474843
> 
> 赞同：4
> 
> 时间：2012-11-20T14:00:24.800
> 
> 标签：c++, assembly, types

我惊讶地发现，在以 x64 平台为目标的 MSVS2012 下，在关闭优化的调试模式下，`long long`无法在一条指令中完成初​​始化：

```
; long long l1 = 1;

    mov DWORD PTR _l1$[ebp], 1
    mov DWORD PTR _l1$[ebp+4], 0 
```

由于寄存器是 8 个字节，我希望有一条能够做到这一点的指令……有吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T17:55:04.157

在以 x64 为目标的快速控制台模式项目中尝试此操作并查看反汇编窗口：

```
 long long l1 = 1;
000000013F151035  mov         qword ptr [rsp],1 
```

针对 x86 时的相同代码：

```
 long long l1 = 1;
010213EE  mov         dword ptr [l1],1  
010213F5  mov         dword ptr [ebp-8],0 
```

灌篮高手，您实际上并没有查看程序的 x64 版本。使用 Build + Configuration Manager 来解决这个问题。

# web-applications - 在使用 Lucene 的 webapp 中，何时关闭单例 IndexWriter？

> ID：13474844
> 
> 赞同：0
> 
> 时间：2012-11-20T14:00:26.657
> 
> 标签：web-applications, lucene, singleton

我在 Web 应用程序中使用 Lucene。Lucene 用于在添加文章时创建索引。由于索引目录可能只存在一个 IndexWriter 实例，因此我对应用程序使用**单例 IndexWriter**。

1.  什么时候应该关闭 IndexWriter 以将所有文档提交到索引目录？
2.  如果 web 服务器 (tomcat) 出现故障，我应该如何恢复未提交的文档？Lucene 是否提供了从崩溃中恢复的任何方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T22:15:34.490

您可能想查看[IndexWriter.commit](http://lucene.apache.org/core/old_versioned_docs/versions/2_9_1/api/all/org/apache/lucene/index/IndexWriter.html#commit%28%29)而不是关闭并重新打开 IndexWriter。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T22:12:24.500

> 我什么时候应该关闭 IndexWriter 以将所有文档提交到索引目录？

如果您非常担心数据丢失，请尽可能频繁地提交（即使在每个文档之后也可以这样做）。如果搜索新鲜度不重要，您仍然可以让老读者闲逛并稍后重新打开它们。

> 如果网络服务器（tomcat）出现故障，我应该如何恢复未提交的文档？Lucene 是否提供了从崩溃中恢复的任何方法？

Lucene 是原子的——只要你退出`writer.commit()`或`writer.close()`，更改就会保存到磁盘上，之后可以读取。我认为这应该足够了。

不要忘记：Lucene 只是一个搜索库。您有责任确保应用程序不会崩溃。即使是这样，您也有责任实施恢复策略。Lucene 在原子性方面已经做得相当不错了。

# jquery - 在 Internet Explorer 中从 iframe 获取 XML

> ID：13474848
> 
> 赞同：1
> 
> 时间：2012-11-20T14:00:31.150
> 
> 标签：jquery, xml, internet-explorer, jquery-plugins

我正在使用[ajax_upload](http://code.google.com/p/jquery-plugins-collections/downloads/detail?name=jquery.ajax_upload.0.6.js&can=2&q=)上传文件而无需回发整个页面。服务器将响应作为 XML 返回，然后我在我的 onComplete 函数中解析，这适用于 Chrome、Safari 和 Firefox，但不适用于 Internet Explorer。这在 Internet Explorer 中不起作用的原因（至少我认为是原因）是 IE 解析 iframe 中的 XML 并以语法高亮显示它，即使 iframe 设置为大小 0 也是如此。当 ajax_uploads 然后读取iframe 它得到了一个损坏的 XML 版本，由于 IE 添加到它的语法突出显示，我无法用 $.parseXml() 解析它。

我用谷歌搜索并发现提到使用 iframe.document.XMLDocument 从 iframe 获取原始 XML，但它对我不起作用，而且提到它的帖子真的很旧。

所以问题是，有没有人知道如何从 iframe 中获取 XML 数据而没有 IE 完成的语法突出显示（它通过添加 HTML 和转义我的 XML 中的标签来实现）或者有没有办法告诉 IE 不要解析HTTP标头中的XML或类似的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T22:20:21.650

我认为`Content-Type: text/plain`可以帮助解决此问题，但这仅对其他浏览器有帮助。IE 有自己的方法来检测内容类型，并且这种行为不能轻易禁用。更多信息可在[MSDN](http://msdn.microsoft.com/en-us/library/ms775147%28v=vs.85%29.aspx)上获得，更简单的[在这里](http://lieschke.net/articles/ie-mime-type-shenanagins)。

当然，您可以像这样进行肮脏的破解：

```
<iframe src="test.xml" onload="test()" id="f1"></iframe> 
```

并解析突出显示的代码：

```
function test() {
    var iframe = document.getElementById('f1');
    var frameBody = iframe.contentWindow.document.body;

    // remove unneeded toggle links +/-
    var links = frameBody.getElementsByTagName('a');
    for (var i = links.length - 1; i >= 0; i--) {
        if(links[i].className === 'b') {
            links[i].parentNode.removeChild(links[i]);
        }
    }

    // display parsed XML source
    alert(frameBody.innerText);

    // parse cleaned highlight code source to new XML document
    var xml = $.parseXML(area.value);
    alert(xml);
} 
```

这在 IE6-8 中有效，但这种方式不可靠 :) 所以我建议您尽可能使用 JSON 而不是 XML 来避免这个问题。

# javascript - 弹出后禁用所有文本框

> ID：13474850
> 
> 赞同：2
> 
> 时间：2012-11-20T14:00:45.437
> 
> 标签：javascript, jquery, html, internet-explorer, internet-explorer-8

这个问题只出现在 IE8 上（不是 IE8 兼容模式）。我有一个名为 sample.htm 的文件：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html><head>
    <meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7"/>
    <script src='http://jqueryjs.googlecode.com/files/jquery-1.3.2.js' type='text/javascript'></script>
</head>
<body style='position:relative;z-index:1'>
<input><a href="javascript:Popup('test1.html');">Click</a>
<script>
function Popup(url) {
    overlay = $("<div style='position:fixed; width:100%; height:100%; z-index:10005'><div style='position:absolute; width:100%; height:100%; background:black; -ms-filter:\"progid:DXImageTransform.Microsoft.Alpha(Opacity=50)\"; filter: alpha(opacity=50);'></div>");
    iframe = $("<iframe name='Overlay' style='position:absolute; height:80%; width:80%; top:10%; left:10%;' src='" + url + "'></iframe>");
    closebut = $("<img style='position:absolute; cursor:pointer; right:10%; top:10%;' width='24px' height='24px' src='/images/close.png' onclick='RemovePopup()' >");
    overlay.append(iframe).append(closebut);
    $('body').prepend(overlay);
}
function RemovePopup() {
    overlay.animate({top:'100%'},800,'swing', function() { $(this).remove(); });
}
</script>
</div></body></html> 
```

下面是test1.html的完整内容：`<html><head></head><body><input></body></html>`

所以创建这两个文件，在 IE8 中打开 sample.htm，单击链接打开弹出窗口，在那里的文本框中输入一些内容，关闭弹出窗口，尝试在第一个文本框中输入。如果可以，请重复 2 或 3 次。最终第一个文本框被禁用。

任何人都可以提出解决方法吗？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T15:06:38.590

本质上我认为这是一个`focus`问题。`<input>` *如果您可以让浏览器进入似乎*已禁用的情况，那么您实际上`Tab`可以`<input>`按预期输入并输入一个值。

我相信当`$(this).remove();`iframe 中的元素具有焦点时，在动画结束时删除 iframe 的调用会导致问题。我建议`<input>`在删除 iframe 之前首先关注焦点。

例如，`$('input:first').focus();`如果它是第一个输入，则使用。它似乎在我的测试中起作用。

# javascript - 如何使用 jquery 和 css 创建粘性标题

> ID：13474852
> 
> 赞同：3
> 
> 时间：2012-11-20T14:00:56.310
> 
> 标签：javascript, jquery, html, header, sticky

我一直在尝试创建像我们在[stickysectionheaders](http://polarblau.github.com/stickySectionHeaders/)中看到的那样的粘性标题。但我必须在页面滚动而不是 div 元素滚动上创建它。当滚动条到达页面底部时，我有一些 js 脚本正在运行。

我的是生成页面的 php 脚本，视图中有单独的文件，即 header_view.php

main_view.php

footer_view.php

粘性标题的内容在 main_view.php 中，所以如果我尝试将 css 样式**position:fixed**或**position:absolute**和**top:0**应用于标题，它们不会出现在屏幕顶部，而是出现在 header_view 之后.php 内容结束。它们也不是固定的，当我滚动页面时它们会滚动。如何将它定位到具有固定位置的屏幕顶部。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T14:41:53.440

你试过给它一个z-index吗？

所以

```
position: absolute;
top: 0;
z-index: 15;//for example 
```

所以标题将在文本上方

# php - 如何将子文件夹设置为根并限制某些访问

> ID：13474853
> 
> 赞同：0
> 
> 时间：2012-11-20T14:00:59.647
> 
> 标签：php, apache, .htaccess, mod-rewrite, root

我在主机上阅读了一篇关于如何将子文件夹设置为我的域的根目录的文章，但它误导我相信请求将全部发送到 /subfolder/ 而根本不会发送到根目录，事实并非如此.

我在根目录的 .htaccess 中使用此代码，不幸的是，它没有按预期工作。

```
RewriteEngine on

RewriteCond %{HTTP_HOST} ^(www.)?domain.com$

RewriteCond %{REQUEST_URI} !^/subfolder/

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

RewriteRule ^(.*)$ /subfolder/$1

RewriteCond %{HTTP_HOST} ^(www.)?domain.com$
RewriteRule ^(/)?$ subfolder/index.php [L] 
```

我想要达到的目标如下：

*   根目录/子文件夹/
*   对原始真正根的所有请求都被拒绝，就好像它根本不存在一样。例如 phpinfo.php、php.ini，其中的任何页面或杂项都被 /subfolder/ 中设置的错误处理拒绝访问。对“domain.com/whateverhere”的任何请求绝对总是发送到 /subfolder/。
*   如果可能，请限制任何访问 domain.com/subfolder/ 以显示 404 的能力。我认为重定向同样有效。
*   我目前在位于 domain.com/resources/ 的根目录中使用 /resources/ 文件夹，其中包含脚本、css、图像等，即使重写已将 /subfolder/ 设置为根目录，请求域.com/resources/ 仍然被接受，即使它不在 /subfolder/ 中。正如我之前所说，我想知道如何真正限制对真正根的任何访问，并将所有请求强制到 /subfolder/。

总而言之，我希望将“根”完全设置为/子文件夹/，在实际根中无法访问诸如phpinfo.php和php.ini之类的重要文件，并且仍然像往常一样在真正的根中使用.htaccess .

我知道我在这里问了很多，所以我很抱歉，呵呵。

提前感谢任何可以提供帮助的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T14:09:37.407

您可以将`.htpasswd`文件添加到子文件夹：

**.htpasswd**

```
admin:$apr1$EvV5M50w$9IgAqskEg5r2pIIXUzQyp0 
```

**并在您的子文件夹/.htaccess**文件中定义它，如下所示：

```
AuthUserFile /www/site/.htpasswd
AuthType Basic
AuthName "My secret place"
require valid-user 
```

现在打开您的子文件夹，您将被询问一个密码和一个用户名（在我的示例中为*admin* / *admin*）。

并将其设置为起始文件夹，您可以随时添加

```
<?php header( 'Location: /subfolder/' ); die; ?> 
```

在您的 index.php 文件的最顶部，因此它始终会将您重定向到子文件夹。

# php - 每个部分都有未定义的索引？

> ID：13474854
> 
> 赞同：-1
> 
> 时间：2012-11-20T14:01:02.660
> 
> 标签：php, html

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T14:08:06.400

您不能从没有它们的数组中引用键，这就是您试图从`$_POST`数组中执行的操作，因为请求没有发布这些值。

要摆脱通知，请更改您`$_POST`直接从中提取值的所有声明：

```
$Surname = $_POST['surname']; 
```

到：

```
$Surname = isset( $_POST['surname']) ? $_POST['surname'] : ""; // Some default value 
```

此外，在您的代码中，您插入了两次相同的查询。而且，VDP 提出了一个很好的观点，你不想插入空行，所以要解决这个问题，你可以用 if 语句包装整个插入逻辑，检查是否`$_POST`为空，或者检查每个变量是否都有插入前的有效值。

**编辑：**好的，更彻底的解释。

当您尝试从数组中访问该数组没有的键时，您会收到此通知。因此，您的`$_POST`数组可能是空的，因为当您访问该页面时，您没有向它提交 POST 请求，或者如果您提交了，您也没有发送它所期望的变量。

所以`$_POST`看起来像：

```
$_POST = array( ); 
```

你正在尝试做：

```
$Surname = $_POST['surname']; // DOESN'T EXIST! 
```

显然，你不能那样做。因此，不是直接从 中获取东西`$_POST`，而是检查该键是否确实存在于`$_POST`数组中：

```
$Surname = isset( $_POST['surname']) ? $_POST['surname'] : ""; 
```

但是，这只是以下的简写：

```
if( isset( $_POST['surname'])) { 
    $Surname = $_POST['surname'];
} else { 
    $Surname = "";
} 
```

它被称为三元运算符，您可以在 PHP 文档中查看它以了解更多信息。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-20T14:13:30.423

代替

$姓氏 = $_POST['姓氏'];

做

```
if(isset($_POST['surname']))
{
     $Surname = $_POST['surname'];
} 
```

或者

```
$Surname = (isset($_POST['surname'])) ? $_POST['surname'] : $some_string; /* or something */ 
```

您也可以只使用 extract() 来本地化所有这些后变量。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-11-20T14:13:45.733

如果您完全确定这些通知不会搞砸您的应用程序并希望**快速修复**使用

```
error_reporting(0); 
```

或使用`@$variable;`

我再说一遍，这不是一个真正的解决方案，而是一个临时的快速解决方案。

为了真正修复它，您应该始终检查变量是否存在。

```
echo $myvariable; // will output notice

$myvariable = null;

echo $myvariable; // will output nothing but nor the notice 
```

一个好方法是使用：

```
if(isset($_POST['myvariable'])){
$myvariable = $_POST['myvariable'];
} else {
$myvariable = null;
} 
```

# jira - 如何更改 JIRA 中的用户名？

> ID：13474858
> 
> 赞同：0
> 
> 时间：2012-11-20T14:01:28.337
> 
> 标签：jira

我正在使用 JIRA v4.4，我想更改 JIRA 中的用户名。但似乎我必须安装插件才能更新用户名。在谷歌搜索后，我发现大多数人推荐安装[Script Runner](https://marketplace.atlassian.com/plugins/com.onresolve.jira.groovy.groovyrunner/version/272)插件。到目前为止一切正常，但下一步该怎么做？现在如何使用 Script Runner add on 更改用户名？或者有没有更好的方法来更改用户名？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T14:28:13.293

经过更多研究，我发现有内置脚本，在这些脚本中，您可以使用重命名用户 ID 脚本。因为我有一个错误，那些脚本之前没有出现。通过提供 From User ID 和 To user ID，您可以更新名称。此外，Jira 团队将在未来 12 个月内添加[此功能](https://jira.atlassian.com/browse/JRA-4588)，因此此后无需使用附加组件进行用户名更新操作。

# c# - MVC4 ToList() 显示前几条记录

> ID：13474859
> 
> 赞同：0
> 
> 时间：2012-11-20T14:01:30.103
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4

我只是在学习如何使用 .net 和 mvc4，但我遇到了问题。我不知道如何只显示表中的前 5（或任意数量）行。这就是我目前将信息发送到视图的方式。

```
public ActionResult ActiveCampaigns()
{
    var campaigns = db.ActiveCampaigns.ToList();
    return View(campaigns);
} 
```

谢谢 ：）

更新：感谢您的快速回复！很简单！

```
db.ActiveCampaigns.Take(5).ToList() 
```

我搜索了高和低，找不到这个，我的google-fu必须关闭。再次感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T14:04:04.650

基本方法是

```
 var campaigns = db.ActiveCampaigns.Take(5).ToList(); 
```

但是根据上下文`db`的类型，这可能会失败。`Skip()`并且`Take()`在所有 IEnumrable 派生的接口上并不总是可用或允许的。在这种情况下，请阅读错误。通常你可以通过两种方式修复它：

```
 var campaigns = db.ActiveCampaigns.ToList().Take(5);  // expensive with many Campaigns 
```

或者，当您有一个方便的排序标准时：

```
 var campaigns = db.ActiveCampaigns.OrderByDescending(c => c.Date).Take(5).ToList(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T14:04:04.057

[可枚举.Take](http://msdn.microsoft.com/en-us/library/bb503062.aspx)

```
public ActionResult ActiveCampaigns()
{
    var campaigns = db.ActiveCampaigns.Take(5).ToList();
    return View(campaigns);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T14:12:46.043

我假设您对分页感兴趣，在这种情况下，您还需要使用 Skip() 方法：

```
var campaigns = db.ActiveCampaigns.Skip(5).Take(5).ToList(); 
```

会给你第 2 页。显然，你会想要使用一个公式来处理要显示的页面：

```
var campaigns = db.ActiveCampaigns.Skip((page-1) * 5).Take(5).ToList(); 
```

# asp.net-mvc - 层次结构中的多个 AppSettings.config 文件

> ID：13474872
> 
> 赞同：2
> 
> 时间：2012-11-20T14:02:06.520
> 
> 标签：asp.net-mvc, configuration, asp.net-mvc-4, appsettings

在创建 ASP.Net MVC 应用程序时，我有一个问题让我印象深刻：假设您有一个应用程序要部署给多个客户。应用程序代码是相同的，但是您希望能够为每个客户拥有一个 appSettings.config 文件，这样您就可以通过更改 web.config 中 appSettings 标签的 configSource 来部署到不同的客户（有点简化，但仍然）。

然后你会意识到 appSettings.config 中 50% 的内容对所有客户都是通用的，而只有 50% 是客户依赖的。您最终可能会在所有 appSettings 文件中包含重复的条目，这是一个主要缺陷，因为如果您想对配置进行应用程序范围的更改，您需要记住更新所有这些条目。

在这种情况下，我真的很想拥有某种分层系统，您可以在单独的文件中拥有“基本配置”和“客户配置”。然后我希望 ConfigurationManager 首先检查客户配置中的值，如果没有在那里定义它，它将转到基本配置。

我还没有找到使用 ASP.Net MVC4 中的开箱即用功能解决此问题的直接方法。它会退出，还是我需要以某种方式绕过默认的 ConfigurationManager 类？我可能会创建自己的类并将所有对 ConfigurationManager.AppSettings[key] 的调用替换为对我自己的实现的调用，但如果可以的话，我宁愿避免这种情况。我希望能够使用内置 ConfigurationManager 处理的一些基本功能，例如缓存等。

有谁以前解决过类似的问题吗？我一直认为这似乎是一个常见的场景..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T15:36:18.643

这是一个常见的场景，并且有不同的方法来解决它。一种方法是使用[config transforms](http://go.microsoft.com/fwlink/?LinkId=125889)。你可以有`Web.Customer1.config`,`Web.Customer2.config`等，就像你有`Web.Debug.config`和一样`Web.Release.config`。在客户特定的转换文件中，您只能“覆盖”`appSettings`您的客户想要自定义的文件。

要创建不同的转换，首先要创建不同的项目平台。转到 Visual Studio 配置管理器，在`Configuration`您的 Web 项目（或任何需要自定义配置设置的项目）的列中，单击下拉菜单，然后单击`<New...>`。命名新项目配置`Customer1`或任何您想要的名称，选中 框`Copy settings from`，然后`Release`从该下拉列表中选择。还要选中`Create new solution configurations`复选框。

最后，右键单击您的`web.config`文件并单击`Add config transform`. 这将为您生成一个模板`Web.Customer1.config`文件。使用配置转换属性对其进行编辑以覆盖`appSettings`它需要的内容。`xdt:`然后，您可以使用`Customer1`解决方案构建配置发布项目。作为构建的一部分，`web.config`将进行转换，您最终`web.config`将为每个客户提供不同的文件。您还可以使用它为不同的部署定制项目，即更改数据库连接字符串、smtp 服务器，以及 XML 配置文件中的任何内容。

最后一个想法，确保您右键单击每个`Web.Xyx.config`文件，选择属性，并将其设置`Build Action`为`None`.

例子：

基础 web.config

```
<appSettings>
    <add key="CommonProperty1" value="[for all customers]" />
    <add key="CommonProperty2" value="[for all customers]" />
    <add key="CommonProperty3" value="[for all customers]" />
    <add key="CustomProperty1" value="[for one customer]" />
    <add key="CustomProperty2" value="[for one customer]" />
    <add key="CustomProperty3" value="[for one customer]" />
<appSettings> 
```

web.Customer1.config

```
<appSettings>
    <add key="CustomProperty1" value="The Ohio State University" xdt:Transform="SetAttributes" xdt:Locator="Match(key)" />
    <add key="CustomProperty2" value="Scarlet" xdt:Transform="SetAttributes" xdt:Locator="Match(key)" />
    <add key="CustomProperty3" value="Gray" xdt:Transform="SetAttributes" xdt:Locator="Match(key)" />
<appSettings> 
```

web.Customer2.config

```
<appSettings>
    <add key="CustomProperty1" value="Michigan University" xdt:Transform="SetAttributes" xdt:Locator="Match(key)" />
    <add key="CustomProperty2" value="Blue" xdt:Transform="SetAttributes" xdt:Locator="Match(key)" />
    <add key="CustomProperty3" value="Maize" xdt:Transform="SetAttributes" xdt:Locator="Match(key)" />
<appSettings> 
```

# r - 将字符模式再现为数字模式

> ID：13474873
> 
> 赞同：2
> 
> 时间：2012-11-20T14:02:07.557
> 
> 标签：r, design-patterns

我想扩展以下数据框

```
d <- data.frame(a = c(rep("A",5),rep("B",5),rep("C",3),rep("D",2)))

> d
   a
1  A
2  A
3  A
4  A
5  A
6  B
7  B
8  B
9  B
10 B
11 C
12 C
13 C
14 D
15 D 
```

所以有一列 b 看起来像：

```
> d
   a b
1  A 1
2  A 1
3  A 1
4  A 1
5  A 1
6  B 2 
7  B 2 
8  B 2
9  B 2
10 B 2
11 C 3
12 C 3
13 C 3
14 D 4
15 D 4 
```

不太确定如何实现这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T14:08:33.587

使用匹配：

```
match(d$a, unique(d$a)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T14:05:03.460

```
d$b <- as.integer(factor(d$a, levels=unique(d$a))) 
```

# java - 如何访问线程变量？

> ID：13474882
> 
> 赞同：-1
> 
> 时间：2012-11-20T14:02:46.773
> 
> 标签：java, multithreading

如何从线程外部访问线程变量，我有线程内部的哈希图，我想从我的主程序或服务访问它。

```
public class Sample {

class Thread {

//private synchronized hashmap declared here
}

} 
```

我想访问在其他类的 Thread 中声明的 hashmap 可以说 Class Abc

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T14:13:30.580

多线程访问数据的真正问题是同步。如果您有一个包含数据的地图，请将其[设为 ConcurrentHashMap](http://docs.oracle.com/javase/7/docs/api/index.html?java/util/concurrent/ConcurrentHashMap.html)并将其放置以便您可以访问它。现在您可以访问地图中的数据了。请注意，您的代码中可能存在其他需要更多同步的依赖项，但至少访问映射中的数据是安全的。

**更新**：在你的情况下，我会做类似的事情：

```
public class Sample {
    Map mMyMap = new ConcurrentHashMap();

    void foo() {
        // Access from here
    }

    class Thread {
        // And from here
    }
} 
```

您可以将其设为私有，但是关于内部类和私有的内容有很多话要说，这超出了这个问题的范围。

# asp.net-mvc - MVC - 模型 - 视图和控制器的角色

> ID：13474887
> 
> 赞同：0
> 
> 时间：2012-11-20T14:03:02.183
> 
> 标签：asp.net-mvc

以下是我的应用程序架构。我对我理解 MVC 是否正确感到困惑？我的架构是对还是错？

视图 - 与用户交互，它有 HTML 部分，提交它调用控制器的表单

控制器 - 它检查添加的信息是否有效？（不是数据库的观点。它只会检查天气是否所有必填字段都已填写？）决定调用哪个模型。

模型 - 它包含视图类。还有一些方法，如添加、修改或删除来处理数据库。

这是正确的还是犯了一些错误？以下是我的代码示例

控制器：

```
public ActionResult AddCustomer(CustomerModel 模型)
        {
            如果（模型状态。IsValid）
            {
                模型.AddCustomer();
                return RedirectToAction("Index", "Home");
            }
            return (View("AddCustomer",model));
        }模型：

公共类 AddBookModel
    {
        [Required(ErrorMessage = "ISBN 是必需的。")]
        [显示名称（“ISBN”）]
        公共字符串 ISBN { 获取；放; }

```
 [DisplayName("Title")]
    [Required(ErrorMessage = "The Title is required.")]
    public String Title { get; set; }

    [Required(ErrorMessage = "The Publisher is required.")]
    [DisplayName("Publisher")]
    public String Publisher { get; set; }

    public void AddBook()
    {
        using (BBBDataContext DCBook = new BBBDataContext())
        {
            Book tableBook = new Book()
            {
                ISBN = this.ISBN,
                Title = this.Title,
                Publisher = this.Publisher,
            }
          DCBook.Books.InsertOnSubmit(tableBook);
          DCBook.SubmitChanges(); 
        }
     } 
```

看法：

```
 <% using (Html.BeginForm()) {%>
    <%= Html.ValidationSummary(true) %>

    <fieldset>
        <legend>Insert Book Record</legend>
        <table id="displayform" cellspacing="0" cellpadding="5">
        <colgroup>
            <col span="1" style="text-align:right" />
            <col span="2" style="text-align:left" />
        </colgroup>
        <tr>
            <td class="editor-label">
                <%= Html.LabelFor(model => model.ISBN) %>
            </td>
            <td class="editor-field">
                <%= Html.TextBoxFor(model => model.ISBN) %>
                <%= Html.ValidationMessageFor(model => model.ISBN) %>
            </td>
        </tr>
        <tr>
            <td class="editor-label">
                <%= Html.LabelFor(model => model.Title) %>
            </td>
            <td class="editor-field">
                <%= Html.TextBoxFor(model => model.Title) %>
                <%= Html.ValidationMessageFor(model => model.Title) %>
            </td>
        </tr> 
```

            回答 #1

赞同：0

时间：2012-11-20T14:08:37.943

你对 MVC 的理解很好。该视图仅包含将要显示的可视元素，不包含任何逻辑代码。控制器正在侦听视图的事件（mouseClick、lostfocus ...），与模型交互，进行验证......并且模型包含您的业务类并与数据库和其他外部服务交互。

```

# asp.net - 从 ASP.NET Web 服务 ASMX 文件中获取 JSON

> ID：13474890
> 
> 赞同：0
> 
> 时间：2012-11-20T14:03:21.793
> 
> 标签：asp.net, xml, json, web-services

我正在使用 ASP.NET、C# 创建一个 Web 服务，目前它正在提供 XML，但我将获得 JSON，这就是我创建 webmtheod 的方式：

```
[Webservice(Namespace="http://myurl)]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfiles_1)]
[System.ComponentModel.ToolboxItem(false)]

[WebMehod]
public string myfunction()
{

string r = "......";

return r;
} 
```

这些在一个 ASMX 文件中，我在浏览器中调用它

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T14:16:29.043

如果你想从你的方法返回 JSON，你需要使用 ScriptMethod 属性。

像这样构造你的方法，注意`[ScriptMethod(ResponseFormat = ResponseFormat.Json)]`属性。

```
 [WebMethod()]
    [ScriptMethod(ResponseFormat = ResponseFormat.Json)]
    public string MyMethod()
    {

    } 
```

目前，此方法返回 a `string`，它可以是`JSON`结构化字符串。但是，您最好返回一个对象，该对象可以解析为`JSON`. `List<string>`以及具有标准数据类型的类（如`integers`等）`strings`对此非常有用。然后，您可以只返回该对象。负责`ScriptMethod`将其转换为`JSON`.

例如：

您要返回的班级：

```
 public class MyJson
      {
         public int ID;
         public List<string> SomeList;
         public string SomeText;
     } 
```

以及您返回填充的方法`MyJson`

```
 [WebMethod()]
        [ScriptMethod(ResponseFormat = ResponseFormat.Json)]
        public MyJson MyMethod()
        { 
          MyJson m = new MyJson();
          m.ID = 1;
          m.SomeText = "Hello World!";
          m.SomeList = new List<string>();
          m.SomeList.Add("Foo");
          m.SomeList.Add("Bar");

          return m;
        } 
```

回报的`JSON`结构就像班级一样。属性名称也将被使用，您`List<string>`将成为一个数组

使用 AJAX 调用它。JQuery 在这种情况下：

```
$(document).ready(function(){

      $.ajax({
            type: "POST",
            url: "/YourPage.aspx/MyMethod",
            data: "{}",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (msg) {

             // content will be in here... I.E
             var id = msg.d.ID;
             var st = msg.d.SomeText;
             var sl = msg.d.SomeList;
             var i = sl.length;
            var firstSlItem = sl[0];
            }
        });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-01T02:51:52.327

另一种方法是使用`JavaScriptSerializer`将 JSON 作为字符串返回：

```
[System.Web.Services.WebMethod()]
public string GetItems() {
    List<string> listOfItems = new List<string> {"asdf", "qwerty", "abc", "123"};

    JavaScriptSerializer js = new JavaScriptSerializer();
    string json = js.Serialize(listOfItems);

    return json;
} 
```

...一定要使用这个导入：

```
using System.Web.Script.Serialization; 
```

...然后您必须像这样在 javascript / jQuery 中解析结果：

```
var result = "";

$.ajax({

      // ...other properties defined here...

      success: function (response) {
            result = JSON.parse(response.d);
      }
});

// the List<string> has been parsed into an array:
for (var i = 0, len = result.length; i < len; i++) {
      alert(result[i]);
} 
```

如果您以同样的方式转换一个类的实例，例如这里的@Darren 示例，那么它将被解析为 javascript object-literal。

*另请注意，在`.asmx`文件中，webmethods 被声明为公共实例方法，而不是`public static`在`.aspx`文件中。*

# javascript - 向backbone.js model.save() 添加选项

> ID：13474892
> 
> 赞同：2
> 
> 时间：2012-11-20T14:03:28.517
> 
> 标签：javascript, jquery, ajax, backbone.js

是否可以在“保存”方法的选项中传递 - 请求的不同 url/路径？

模型的默认 urlRot 是 -->`urlRoot: "/users"`

是否可以做这样的事情：

```
this.model.save({
           'userName': $('#userName').val(),
           'password': $('#password').val()},{

            url: "/users/login",

            success: function(model, response, options) {

            }, 
```

所以这次请求将被发送到“/users/login”而不是“/users”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T14:13:35.373

从[文档中](http://backbonejs.org/#Model-url)：

> urlmodel.url()
> 
> 返回模型资源在服务器上的相对 URL。如果您的模型位于其他地方，请使用正确的逻辑覆盖此方法。生成以下形式的 URL：“/[collection.url]/[id]”，如果模型不是集合的一部分，则回退到“/[urlRoot]/id”。

所以看起来你可以在模型上提供自己的`url`功能。

例子：

```
var MyModel = Backbone.Model.extend({
    use_custom_url: false,
    url: function() {
        if (use_custom_url) {
            return "/users/login";
        } else {
            return Backbone.Model.prototype.url.apply(this);
        }
    }
}); 
```

# java - 在 Java Swing 文件对话框中创建“附件视图”

> ID：13474893
> 
> 赞同：2
> 
> 时间：2012-11-20T14:03:28.753
> 
> 标签：java, swing, native

在 Mac OS X 上，本机[NSSavePanel](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSSavePanel_Class/Reference/Reference.html)支持“附件视图”，可用于指定文件类型和其他选项（使用`setAccessoryView:`）。我也想在我的 Swing 应用程序中做类似的事情。

![OS X 上的附件视图](../Images/8e0c482b1cc1d380fd8d047bb1edc912.png)

我知道[JFileChooser](http://docs.oracle.com/javase/7/docs/api/javax/swing/JFileChooser.html)支持这样的东西，但它看起来不是原生的。是否可以直接使用 AWT 的[FileDialog](http://docs.oracle.com/javase/7/docs/api/java/awt/FileDialog.html)来执行此操作（确实使用本机文件对话框）？也许使用[Java Native Access](https://github.com/twall/jna)？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T16:07:03.230

不，FileDialog 不可能。看看[QuaQua](http://www.randelshofer.ch/quaqua/guide/index.html)。它是一种 Mac OS X Java 外观，更接近原生 UI。它的 JFileChooser 版本可能更符合您的喜好。

如果您已经熟悉 OS X API，最好的解决方案可能是直接通过 JNI 打开本机对话框。

# ios - 如何在 iOS 中通过 SMTP 发送电子邮件？

> ID：13474894
> 
> 赞同：0
> 
> 时间：2012-11-20T14:03:33.920
> 
> 标签：ios, smtp

我是 iPhone 和 iPad 编程的新手。如何在不使用 iPhone 邮件界面和 skpsmtp 库的情况下发送 SMTP 消息？我尝试使用 SMTP 服务器名称和用户帐户发送简单的短信，但这不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T14:14:33.433

如果没有您所说的本机“iphone 邮件界面”，您将不得不依赖第三方库。没有本机界面或第三方库（无需自己实现 smtp 客户端）就无法发送电子邮件。

由于 SKPSMTPMessage 不适合您，我可以推荐[mailcore](http://libmailcore.com/)，它易于设置和使用。用过一次，效果很好。您可以在 github 上找到包含示例的[代码](https://github.com/mronge/MailCore)。

# android - 在我的 sql lite 数据库中保存 5000 个对象

> ID：13474895
> 
> 赞同：1
> 
> 时间：2012-11-20T14:03:44.383
> 
> 标签：android, sqlite

我正在下载一个包含 5000 个对象的 json 文件。这在 10 秒内完成，但是当我尝试将所有这些元素保存在我的数据库中时，这需要很长时间，超过 5 分钟。

有人遇到过这个问题吗？任何解释，为什么要花这么长时间？我该如何解决这个问题？

我用这个答案来解决我的问题： [https ://stackoverflow.com/a/3501572/833219](https://stackoverflow.com/a/3501572/833219)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T14:07:12.930

尝试使用事务进行多次插入。您每秒只能执行很少的提交，但每个事务只能执行大量插入。

[http://www.sqlite.org/faq.html#q19](http://www.sqlite.org/faq.html#q19)

# sql - 从具有左连接的两个表中选择具有最小日期的不同记录

> ID：13474897
> 
> 赞同：1
> 
> 时间：2012-11-20T14:03:49.500
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我正在尝试检索所有不同的 AccountId 以及每个的最早 InsertDate。有时 AccountId 是未知的，虽然交易可能不同，但我想将所有的“-1”存储到他们自己的组中。

这是我迄今为止与模式一起尝试过的。

```
 CREATE TABLE #tmpResults (
        Trans Varchar(12),                              
    AccountId Varchar(50),                          
EarlyDate DateTime DEFAULT getdate(),                                                                               CardType Varchar(16))

insert #tmpResults
        select [Trans]                              = convert(varchar(12),'CashSale')
        ,   [AccountId]                             = b.AccountId
        ,   [EarlyDate]                             = min(b.InsertDate)
        ,   case when c.name LIKE '%VISA%'      then 'VISA'
                    when c.name LIKE '%MasterCard%' then 'MasterCard'
                    when c.name LIKE '%AMEX%'       then 'AMEX'
                    else 'Other'
            end as [CardType] 
        from TransBatch b
        left join CardVer_3 c WITH (NOLOCK) ON c.Id = B.BatchId
        left join TransBatch b2
        on (b.accountid = b2.accountid and (b.InsertDate > b2.InsertDate or b.InsertDate = b2.InsertDate))
        and b2.accountid is NULL
        group by b.accountid, b.InsertDate,c.name       
        order by b.accountid DESC

        select * from  #tmpResults 
```

表模式是这样的：

```
**TransBatch**  
RecordId    |BatchId    |InsertDate     | AccountId     | AccNameHolder  
6676    |   11  |   2012-11-01 05:19:04.000 |   12345   |   Account1  
6677    |   11  |   2012-11-01 05:19:04.000 |   12345   |   Account1  
6678    |   11  |   2012-11-01 05:19:04.000 |   55555   |   Account2  
6679    |   11  |   2012-11-01 05:19:04.000 |   -1  |   NULL  
6680    |   12  |   2012-11-02 05:20:04.000 |   12345   |   Account1  
6681    |   12  |   2012-11-02 05:20:04.000 |   55555   |   Account2  
6682    |   13  |   2012-11-04 06:20:04.000 |   44444   |   Account3  
6683    |   14  |   2012-11-05 05:30:04.000 |   44444   |   Account3  
6684    |   14  |   2012-11-05 05:31:04.000 |   -1  |   NULL  

**CardVer_3**  
BatchId     |Name  
11      |MasterCard  
12      |Visa  
13      |AMEX   
14      |GoCard 
```

这将是一个中间表，输出计划看起来像附件。

![按最小年龄分组的每种卡类型的不同帐户数量（从今天开始）](../Images/234faf79ac3d66e00d8b4ff7b8e40e82.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T14:21:40.040

听起来您正在尝试获取最短插入日期时间的完整记录。为此，您要使用 windows 功能：

```
select 'CashSale' as Trans,
       AccountId,
       min(InsertDate),
       (case when name LIKE '%VISA%'      then 'VISA'
             when name LIKE '%MasterCard%' then 'MasterCard'
             when name LIKE '%AMEX%'       then 'AMEX'
             else 'Other'
        end) as [CardType] 
from (select AccountId, InsertDate, c.name,
             row_number() over (partition by AccountId order by insertDate desc) as seqnum
      from TransBatch b left join
           CardVer_3 c WITH (NOLOCK)
           ON c.Id = B.BatchId
     ) t
where seqnum = 1 
```

我猜测“CashSale”意味着信用卡不匹配。TransId 然后是recordId 或“CashSale”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T23:47:34.400

戈登，我对你的建议做了一些非常小的改动，并相信我有正确的输出：[http](http://www.sqlfiddle.com/#!3/cfbc3/7/0) ://www.sqlfiddle.com/#!3/cfbc3/7/0 。非常感谢。我对windows功能一点也不熟悉，所以我要复习一下。

代码在这里：
`select 'CashSale' as [Trans],
AccountId,
min(InsertDateTime),
(case when name LIKE '%VISA%' then 'VISA'
when name LIKE '%MasterCard%' then 'MasterCard'
when name LIKE '%AMEX%' then 'AMEX'
else 'Other'
end) as [CardType]
from (select AccountId, InsertDateTime, c.name,
row_number() over (partition by AccountId order by insertDateTime asc) as seqnum
from TransBatch b left join
CardVer_3 c WITH (NOLOCK) ON c.batchId = B.BatchId
) t
where seqnum = 1
group by t.accountid, t.name`

接下来的步骤是将其转储到临时表中，并尝试使输出看起来像附加的 excel 屏幕。

# oracle - 未通过 SQLPlus 脚本的参数的默认值

> ID：13474899
> 
> 赞同：14
> 
> 时间：2012-11-20T14:03:58.517
> 
> 标签：oracle, sqlplus

有没有办法在没有用户输入的情况下在 sqlplus 脚本中设置参数的默认值？

例如，我有一个 SQL 脚本 session.sql：

```
设置验证关闭
设置 TERMOUT 关闭
定义 uname = '&1'

列 search_uname new_value search_uname
SELECT CASE WHEN '&uname' = '' THEN '%' ELSE UPPER('&uname') END AS search_uname
从双;

设置 TERMOUT ON

SELECT sid, serial, username FROM v$session WHERE username LIKE '&search_uname';

```

我想像这样从 sqlplus 调用它：

```
SQL> @会话
输入 1 的值：

       SID 序列号# 用户名
---------- ---------- ------------------
    56 20577 上下文
......
选择了 236 行。

SQL> @会话“”

       SID 序列号# 用户名
---------- ---------- ------------------
    56 20577 上下文
......
选择了 236 行。

SQL> @sessions SDE

       SID 序列号# 用户名
---------- ---------- ------------------
       113 56675 SDE
       165 64881 SDE
......
选择了 43 行。

SQL>

```

当我被要求输入参数时，我只能为参数传递一个空值，或者我可以通过“”在脚本名称后传递一个空参数。但这种行为非常烦人。某种 IF DEFINED "&1" 将非常有用。

您是否有任何提示或技巧应该如何在没有不必要的用户交互的情况下在 sqlplus 脚本中应用 WHERE 条件，无论是否定义了参数？

**解决方案**

根据 Martin 链接的文章，我修改了以前的脚本以在不要求参数值的情况下工作：

```
设置验证关闭
设置 TERMOUT 关闭

第 1 列新值 1
SELECT '' "1" FROM dual WHERE ROWNUM = 0;
定义 uname = '&1'

设置 TERMOUT ON

从 v$session 中选择 sid、序列号、用户名
WHERE username LIKE UPPER(DECODE('&uname', '', '%', '&uname'));

取消定义 1

```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2017-01-09T16:41:31.840

对于那些不喜欢追逐和细读可能随时消失的链接的人，这里有一个快速剪切粘贴片段。

```
set termout on
set serveroutput on
set feedback off
set verify off

-- start
column 1 new_value 1 noprint
select '' "1" from dual where rownum = 0;
define param = &1 "default"
-- end

begin
    dbms_output.put_line ( 'Param 1 value is &param' );
end;
/

exit 0
/ 
```

执行：

> $ sqlplus -s SCOTT/TIGER@ORCL @a.sql
> 参数 1 值为默认值
> $ sqlplus -s POSF/POSF@ECMDB @a.sql nondef
> 参数 1 值为 nondef

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-20T14:44:48.463

请阅读[“关于 SQL*Plus 定义”](http://vbegun.blogspot.nl/2008/04/on-sqlplus-defines.html)以获得您问题的答案。

引用：

```
SQL> COLUMN 1 NEW_VALUE 1
SQL> COLUMN 2 NEW_VALUE 2
SQL> COLUMN 3 NEW_VALUE 3
SQL> COLUMN 4 NEW_VALUE 4
SQL> SELECT '' "1", '' "2", '' "3", '' "4"
  2    FROM dual
  3   WHERE ROWNUM = 0
  4  /

no rows selected

SQL> DEFINE 1
DEFINE 1               = "1" (CHAR)
SQL> DEFINE 2
DEFINE 2               = "2" (CHAR)
SQL> DEFINE 3
DEFINE 3               = "" (CHAR)
SQL> DEFINE 4
DEFINE 4               = "" (CHAR)
SQL> 
SQL> REM ...but...
SQL> 
SQL> DEFINE 5
SP2-0135: symbol 5 is UNDEFINED 
```

# .net - 如何使用 C++/CLI 向 .Net 公开本机 C++ 类型层次结构

> ID：13474900
> 
> 赞同：0
> 
> 时间：2012-11-20T14:03:58.240
> 
> 标签：.net, dll, c++-cli, class-hierarchy

我有从本机 dll 导出的不同类。导出的类继承自多个纯抽象类（接口）。dll 的不同之处在于它们导出的具体类可能继承自不同的抽象类。本机 dll 使用 C++/CLI 包装器中的 LoadLibrary 动态加载。有没有办法可以在dll中公开具体本机类的类层次结构（继承关系）。这样我就可以将该类用作.NET 中的不同接口。

本机接口

```
class PrimaryAbstractClass
{
  virtual void PrimaryMethod() = 0;
};

class SecondaryAbstractClass1
{
  virtual void Method1() = 0;
};

class SecondaryAbstractClass2
{
  virtual void Method2() = 0;
}; 
```

DLL 1

```
class ConcreteClass1: public PrimaryAbstractClass, public SecondaryAbstractClass1
{
  virtual void PrimaryMethod();
  virtual void Method1();
}; 
```

DLL 2

```
class ConcreteClass2: public PrimaryAbstractClass, public SecondaryAbstractClass2
{
  virtual void PrimaryMethod();
  virtual void Method2();
}; 
```

预期的 C# 用法（伪代码）

```
PrimaryAbstractClassWrapper pacw = new Dll1.PrimaryAbstractClassWrapper();
((SecondaryAbstractClass2)pacw).Method2(); 
```

# entity-framework-4.1 - 实体框架代码优先 - 孤立解决方案？

> ID：13474905
> 
> 赞同：1
> 
> 时间：2012-11-20T14:04:12.153
> 
> 标签：entity-framework-4.1, ef-code-first

我已经搜索了很长时间，试图为 EF 中常见的孤儿问题找到令人满意的解决方案。

最简单的孤立形式之一是清除实体集合。实体之间的关系被删除，但子实体仍保留在数据库中。

我的要求：-

*   集合的清除发生在域中，我希望能够简单地调用 clear 而不是更多。
*   任何判断父子关系是否被破坏导致删除的逻辑都需要封装在存储库/DbContext中。
*   我不想为了解决这个问题而用任何额外的东西“弄脏”域。这包括反向引用。

我怀疑这无法解决，因为我花了相当多的时间寻找解决方案，但我是出于希望而提出的！

我看过的领域是 ChangeTracker 和我可以挂钩的任何可能的事件，类似于在各个地方弹出的 AssociationChanged 事件。DbContext 中的某处必须知道这种关系已被破坏。如何访问它，这是个问题？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-09T17:37:40.553

您可以尝试以下解决方案吗？Mb 它符合您的需求。必须在 DetectChanges 和 SaveChanges 方法之间调用 DeleteOrphans 扩展方法。

`public static class DbContextExtensions { private static readonly ConcurrentDictionary< EntityType, ReadOnlyDictionary< string, NavigationProperty>> s_navPropMappings = new ConcurrentDictionary< EntityType, ReadOnlyDictionary< string, NavigationProperty>>();`

 ````
 public static void DeleteOrphans( this DbContext source )
    {
        var context = ((IObjectContextAdapter)source).ObjectContext;
        foreach (var entry in context.ObjectStateManager.GetObjectStateEntries(EntityState.Modified))
        {
            var entityType = entry.EntitySet.ElementType as EntityType;
            if (entityType == null)
                continue;

            var navPropMap = s_navPropMappings.GetOrAdd(entityType, CreateNavigationPropertyMap);
            var props = entry.GetModifiedProperties().ToArray();
            foreach (var prop in props)
            {
                NavigationProperty navProp;
                if (!navPropMap.TryGetValue(prop, out navProp))
                    continue;

                var related = entry.RelationshipManager.GetRelatedEnd(navProp.RelationshipType.FullName, navProp.ToEndMember.Name);
                var enumerator = related.GetEnumerator();
                if (enumerator.MoveNext() && enumerator.Current != null)
                    continue;

                entry.Delete();
                break;
            }
        }
    }

    private static ReadOnlyDictionary<string, NavigationProperty> CreateNavigationPropertyMap( EntityType type )
    {
        var result = type.NavigationProperties
            .Where(v => v.FromEndMember.RelationshipMultiplicity == RelationshipMultiplicity.Many)
            .Where(v => v.ToEndMember.RelationshipMultiplicity == RelationshipMultiplicity.One || (v.ToEndMember.RelationshipMultiplicity == RelationshipMultiplicity.ZeroOrOne && v.FromEndMember.GetEntityType() == v.ToEndMember.GetEntityType()))
            .Select(v => new { NavigationProperty = v, DependentProperties = v.GetDependentProperties().Take(2).ToArray() })
            .Where(v => v.DependentProperties.Length == 1)
            .ToDictionary(v => v.DependentProperties[0].Name, v => v.NavigationProperty);

        return new ReadOnlyDictionary<string, NavigationProperty>(result);
    }
} 
````

# curl - ElasticSearch没有带有curl的数据节点

> ID：13474911
> 
> 赞同：0
> 
> 时间：2012-11-20T14:04:47.707
> 
> 标签：curl, elasticsearch

如何使用 curl 创建无数据节点？[这里](http://www.elasticsearch.org/guide/reference/modules/node.html)的文档说设置`node.data`为`false`. 这是正确的方法吗？

```
curl -XPUT 'http://localhost:9200/foo' -d '{"node.data" : "false"}' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T14:58:57.573

您不能使用 curl 创建无数据节点。当您可以使用 curl 访问节点时，该节点已经在运行，并且无法将正在运行的数据节点转换为无数据节点。

`node.data: false`您可以通过添加到`config/elasticsearch.yml`文件并重新启动节点来使节点成为无数据节点。

# php - php正则表达式字符编码问题

> ID：13474920
> 
> 赞同：1
> 
> 时间：2012-11-20T14:05:21.883
> 
> 标签：php, regex, preg-match

我的正则表达式不会考虑重音字符，因此在搜索包含 ü、õ、ö 或 ä 字符的单词时找不到任何匹配项。

$data 是使用 strip_tags 从 HTML 标记中剥离的 HTML 数据，其中包含通过 CURL 从具有字符编码 UTF-8 的网站加载的带有 ü、õ、ö 和 ä 字符的单词（如返回的标题告诉我的那样）；

```
$data = strip_tags( curl_exec('my_website_url') );
$match = preg_match( '/ü/' , $data , $matches ); 
```

我尝试使用以下（也使用“ISO-8859-1”）：

```
mb_internal_encoding("UTF-8");
mb_regex_encoding('UTF-8'); 
```

或者：

```
$data = utf8_decode($data) 
```

还没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T14:07:48.103

确保您的 PHP 源文件也是 UTF-8 编码的。

例如，如果是 ISO-8859-1，则preg_match 指令中的 s 将是与 UTF-8 数据中`ü`的 s 不同的字符。`ü`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T18:14:06.137

您应该告诉PRCE您正在使用UTF-8，这是通过添加`u`修饰符来完成的 -> `'/ü/u'`。但如果可能，不要将这些字符直接放入源代码中。如果您更改（或您的编辑器将）文件的编码，您的代码将停止工作，并且跟踪它将是相当 PITA。我建议，不要`'/ü/'`直接用代码替换有问题的字符：`'/\x{c3bc}/u'`- 0xc3bc 是你的信。

# java - 在 Java 代码中找到打开的数据库连接的最佳方法是什么？

> ID：13474921
> 
> 赞同：3
> 
> 时间：2012-11-20T14:05:23.867
> 
> 标签：java, oracle, jdbc, database-connection, prepared-statement

我们有一个企业 Java 项目，该项目大量使用 Oracle DB，支持数百个并发用户，并且在过去 10 年中已被数十名开发人员所接触。每隔一段时间，开发人员就会忘记关闭 Connection、PreparedStatement 或 ResultSet 对象，并且随着用户全天使用系统，打开的连接会累加起来，直到 Oracle 抛出“Max Open Cursors”错误。我们已将数据库中的最大打开游标值增加到我们觉得合适的值。

是否有软件或技术可以扫描数千行 Java 代码并找到这些 DB 对象处于打开状态的所有位置？我们希望运行一次以查找所有当前位置，然后定期查找任何新位置。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T14:13:17.897

您可以尝试在您的源代码上运行[FindBugs](http://findbugs.sourceforge.net/)，它应该会拾取任何未关闭的连接。它在这里找到了一个错误列表：

[http://findbugs.sourceforge.net/bugDescriptions.html](http://findbugs.sourceforge.net/bugDescriptions.html)

寻找以 ODR 开头的那些。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T14:14:21.347

这取决于您是否使用任何 ConnectionPooling 机制。如果是这样，那么连接池将检查所有打开的连接。如果您已经实现了自己的池，那么您需要重新访问代码以合并此检查。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T14:15:55.447

[FindBugs](http://findbugs.sourceforge.net/index.html)有几个“错误模式”：

[http://findbugs.sourceforge.net/bugDescriptions.html#ODR_OPEN_DATABASE_RESOURCE](http://findbugs.sourceforge.net/bugDescriptions.html#ODR_OPEN_DATABASE_RESOURCE) http://findbugs.sourceforge.net/bugDescriptions.html#ODR_OPEN_DATABASE_RESOURCE_EXCEPTION_PATH

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T14:17:57.627

[Findbugs](http://findbugs.sourceforge.net/bugDescriptions.html#ODR_OPEN_DATABASE_RESOURCE)一直擅长检测未正确关闭的连接，以及许多其他问题。

我们将它用作 maven 插件，在“站点”目标期间调用。结合持续集成工具（如 Jenkins），可以自动检测此类潜在问题。

# c - 在 LINUX 上使用 ac 程序读取 /dev/ttyUSB0

> ID：13474923
> 
> 赞同：1
> 
> 时间：2012-11-20T14:05:37.390
> 
> 标签：c, linux, serial-port, xbee

我想读取 GPS XBee 协议发送的数据帧。USB XStick 接收以下数据：

```
CHARS : 15931    SENTENCES = 0    CHECKSUM : 58
Heading : 55    Tilt: -46    Roll:2
CHARS : .... 
```

等等......我可以通过输入终端控件来阅读：

```
$ screen /dev/ttyUSB0 
```

我希望以同样的方式查看这些细节，但是使用 C 编写的程序。这就是我所做的：

```
#include <stdio.h>
#include <stdlib.h>
#include <termios.h>
#include <sys/fcntl.h>
#include <unistd.h>
#include "serial_port.h"

void read_Serial_Port(const char* DEVICE_PORT)
{
    int file;
    struct termios options;
    char message[100];
    unsigned int nCountMax = 60;
    bool b;

    file = open(DEVICE_PORT, O_RDONLY | O_NOCTTY | O_NDELAY);

    if(file == -1){perror("Unable to open the serial port\n");}
    printf("Serial port open successful\n");

    tcgetattr(file, &options);          
    cfsetispeed(&options, B9600);                   
    cfsetospeed(&options, B9600);                   
    options.c_cflag |= (CLOCAL | CREAD);              
    options.c_cflag |= PARENB;                      //No parity                 
    options.c_cflag |= PARODD;                      
    options.c_cflag &= ~CSTOPB;                     
    options.c_cflag &= ~CSIZE;                      
    options.c_cflag |= CS8;                         //8 bits                    
    options.c_iflag |= (INPCK | ISTRIP);            
    tcsetattr(file, TCSANOW, &options);          
    fcntl(file, F_SETFL, FNDELAY);          

    printf("Reading serial port ...\n\n"); 
    b = readMessage(file, message, nCountMax);
    if (b == 0){printf("Error while reading serial port\n");}
    else printf("Serial port read successful\n");
    close(file);
    printf("Serial port closed\n");
};

bool readMessage(int file, char *message, unsigned int nCountMax)
{
    int nbCharToRead;
    char data[100];
    int i;

    if (file != 0)
    {
        i = 0;  
        while (i<nCountMax && data != ".")
        {
            if (read(file,&data,1) == -1)
            {
                printf("reception error\n");
                return false;
            }
            else
            {   
                message[i] = *data;
                printf("%c", message[i]);
                i++;
            }
        }
        message[i] = 0;
        return true;
    }
} 
```

但它不起作用，我得到“接收错误”，对应于：

```
read(file,&data,1) == -1 
```

我哪里错了？

* * *

我的程序如下：

```
bool readMessage(int file, unsigned int nCountMax)
{
    int i;
    size_t nbytes;
    ssize_t bytes_read;

    if (file != -1)
    {
        i = 0;  
        char message[100];
        char data[100];
        while (i<nCountMax && data != ".")
        {
            if (read(file, data, 1) == -1)
            {
                printf("reception error\n");
                printf("code errno = %d\n", errno);
                return false;
            }
            else
            {   
                nbytes = sizeof(data);
                bytes_read = read(file, data, nbytes);
                message[i] = *data;
                printf("%c", message[i]);
                i++;
            }
        }
        message[i] = 0;
        return true;
    }
} 
```

这次没有更多错误了，但是显示的字符是错误的：

```
$$$$QUC
U$C
$$$$JQMJ'   J$Cz(HSQ'Q'y
UKUNiQUMJ 
```

美元符号 $$$$ 代表四人一组的数字...我再说一遍，我想要的是

```
CHARS : 15931    SENTENCES = 0    CHECKSUM : 58
Heading : 55    Tilt: -46    Roll:2
CHARS : ..... 
```

我曾尝试在格式字符串中使用 %c、%d、%x，但显然它们都不能正常工作......

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T06:28:45.520

在我的代码中，我只更改`c_cflag`，如下：

```
// Enable the receiver and set local mode...
options.c_cflag |= (CLOCAL | CREAD);

// Set 8-bit mode
options.c_cflag &= ~CSIZE;
options.c_cflag |= CS8; 
```

明天我会发布更多代码，但试一试（不要修改`c_iflag`）。

# jquery - 如何使用 jquery 将内容和图像移动到另一个 div？

> ID：13474924
> 
> 赞同：0
> 
> 时间：2012-11-20T14:05:36.023
> 
> 标签：jquery, image

大家好，我正在处理 jquery，我在 html 中有一个 html 页面，我在第一个 div 中有两个 div，其中包含图像名称和价格，现在我们必须将图像移动到另一个空 div，这里我已经完成移动图像表单首先要好好工作，我需要搬家，还有名字和价格

这是我的html：

```
<div id="div1"> 
  <span class="span1">
     <img src="~/Images/images.jpeg" />
  </span>  
  <span class="span1">1232</span>

  <span class="span2">Cell Phone</span> 
  <span class="span1">3500</span>  
  <a href="#" class="pull-right"><i class="icon-plus" onclick="AddToCart(this)" ></i></a>

</div>
<div id="div1"> 
  <span class="span1">
    <img src="~/Images/images.jpeg" />
  </span>  
  <span class="span1">1232</span>

  <span class="span2">Cell Phone</span> <span class="span1">3500</span>  
  <a href="#" class="pull-right"><i class="icon-plus" onclick="AddToCart(this)" ></i></a>

</div>
actual price<input type="text" id="text1">
total price<input type="text" id="text1"> 
```

这是我的另一个 div

```
<div class="span7" style="border:1px black" id="separate">
  <ul class="thumbnails bootstrap-examples pre-scrollable">
    <li class="span2"> 
      <a href="#" class="pull-right">
        <i class="icon-remove" onclick="AddToCart(this)" >test
        </i>
      </a>
      <a href="#"></a>

      <h5>Starter template</h5>

      <p>500</p>
    </li>
  </ul>
</div> 
```

在上面我有图标加是图像按钮当我单击按钮时它正在工作图像正在移动到目标文件夹我还需要移动名称和价格同时我有两个文本框ex价格应该在何时添加用户选择两个图像

这是我的jQuery

```
function AddToCart(obj) {

}

function AddToCart(obj) {
    var $this = $(obj).closest('div');
    var img = $this.find('img');
    $('#separate').append(img);
}​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T15:11:02.120

首先，我会为您想要移动的元素添加更多描述性的类名。

```
<div class="item" id="div1">
    <span class="span1">
        <img src="~/Images/images.jpeg" />
    </span>
    <span class="span1">1232</span>
    <span class="span2 name">Cell Phone</span>
    <span class="span1 price">3500</span>
    <a href="#" class="pull-right"><i class="icon-plus">Add</i></a>
</div>

<div class="span7" id="separate">
    <!-- #separate markup -->
</div> 
```

接下来，我会将单击事件处理程序移动到脚本块。在这里，您可以添加要移动的选择器数组，然后您可以遍历、克隆和附加到文档片段（通过 Jon Resig 关于[DOM 文档片段](http://ejohn.org/blog/dom-documentfragments/)的文章）。然后你只需要将文档片段附加到你的#separate div。

```
<script>
    (function($){
        $("body").delegate(".item a", "click", function(event){
            event.preventDefault();
            item = $(this).closest(".item");
            elems = ["img", ".name", ".price"];
            fragment = document.createDocumentFragment();

            for (var i = 0; i < elems.length; i++){
                el = item.find(elems[i]);
                fragment.appendChild(el[0]);
            }

            $("#separate").append(fragment);
        });
    })(jQuery);
</script> 
```

这是一个 jsFiddle 来演示这一点 - [http://jsfiddle.net/9txqc/](http://jsfiddle.net/9txqc/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T14:10:48.047

```
function AddToCart(obj) {
          var $this = $(obj).parents('div');
          $('#separate').append($this);
      }

$(".icon-plus").click(function(){
   AddToCart(this);
}); 
```

HTML：

```
<div id="div1"> 
  <span class="span1">
     <img src="~/Images/images.jpeg" />
  </span>  
  <span class="span1">1232</span>

  <span class="span2">Cell Phone</span> 
  <span class="span1">3500</span>  
  <a href="#" class="pull-right"><i class="icon-plus"></i></a>

</div>
<div id="div2"> 
  <span class="span1">
    <img src="~/Images/images.jpeg" />
  </span>  
  <span class="span1">1232</span>

  <span class="span2">Cell Phone</span> <span class="span1">3500</span>  
  <a href="#" class="pull-right"><i class="icon-plus" onclick="AddToCart(this)" ></i></a>

</div>
actual price<input type="text" id="text1">
total price<input type="text" id="text2"> 
```

# java - Javascript 在 IE9 中找不到 Applet

> ID：13474927
> 
> 赞同：0
> 
> 时间：2012-11-20T14:05:45.947
> 
> 标签：java, javascript, html, internet-explorer, applet

我遇到了 Javascript 问题，它与小程序的通信。在每个浏览器中，Javascript 确实找到了小程序，我可以调用它的方法，但在 IE9 中它找不到对象/小程序。这是代码

```
<div class="speichern" align="center">
  <object type="application/x-java-applet" width="10" height="10" id="jsap" name="jsap">
    <param name="archive" value="ABD_Downloadmanager.jar,ojdbc6.jar"> </param>
    <param name="code" value="Speichern_Applet.class"> </param>
    <param name="mayscript" value="yes">
    <param name="scriptable" value="true">
  </object>
</div> 
```

和 Javascript 调用：

```
var appletObj = document.getElementsByName('jsap')[0];
var path = appletObj.test(); 
```

测试方法只返回一个字符串`return "C:/";`

当我使用 an`alert(appletObj );`

Firefox 确实向我展示了`object HtmlObjectElement`

但 IE 只显示`object`

我已经尝试过这种方法来获取小程序但没有任何成功：

```
var appletObj = document.getElementsByID('jsap')[0]; 
var appletObj = document.getElementsByID('jsap'); 
var appletObj = document.jsap; 
var appletObj = document.applets[0]; 
```

对我来说，看起来 IE 根本无法使用对象标签或类似的东西？有人对此有解决方案，或者知道为什么 IE 找不到对象/小程序？

感谢您到目前为止的阅读

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T12:17:35.843

我刚刚发现了这里出现的问题。我使用的是 style='visible:hidden' 属性。但是一个隐藏的 DOM 对象，在这种情况下，IE 不会加载对象标签/小程序。我只需要将大小设置为 (0,0)。天才...

# visual-studio-2010 - 视觉工作室设置项目在同一位置更新？

> ID：13474930
> 
> 赞同：0
> 
> 时间：2012-11-20T14:05:59.980
> 
> 标签：visual-studio-2010, windows-installer

如何确保 msi 安装程序（使用 Visual Studio 安装程序项目创建）将应用程序安装在其先前版本的安装位置？

例如，场景是这样的。

用户使用 myapp-v1.msi 安装程序在 c:\program files\myapp 安装应用程序

现在我修复了一个错误并创建了一个新版本的安装程序 myapp-v2.msi

当用户安装 myapp-v2.msi 时，它应该安装在 c:\program files\myapp （可能没有给用户位置选择）

我想这样做是因为我在以前的位置存在数据文件，并且我希望新文件位于同一位置，以便它从当前目录中获取数据文件。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T08:48:53.587

这应该自动完成，作为 MSI 包中的默认行为。你测试过吗？

但是，您应该知道，不建议将数据文件放在已安装文件旁边，也不是标准做法。如果这些数据文件应该可供所有用户使用，您应该将它们存储在[CommonAppDataFolder](http://msdn.microsoft.com/en-us/library/windows/desktop/aa367992%28v=vs.85%29.aspx)中。

# built-in - 为什么有些 Prelude 函数是用 foldl 来定义的？

> ID：13474932
> 
> 赞同：8
> 
> 时间：2012-11-20T14:06:05.970
> 
> 标签：built-in, haskell

通常，`foldl`避免使用`foldl'`or `foldr`。引用[真实世界的 Haskell](http://book.realworldhaskell.org/read/functional-programming.html)：

> 由于 foldl 的重击行为，明智的做法是在实际程序中避免使用此功能：即使它没有彻底失败，它也会不必要地低效。相反，导入 Data.List 并使用 foldl'。

然而，一些 Prelude 函数是根据它定义的（例如[`(\\)`](http://hackage.haskell.org/packages/archive/base/4.6.0.0/doc/html/src/Data-List.html#%5C%5C)和[`unionBy`](http://hackage.haskell.org/packages/archive/base/4.6.0.0/doc/html/src/Data-List.html#unionBy)）。为什么是这样？是不是不要对这些功能引入太多的严格性？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-20T14:52:44.780

Prelude 是在`foldl'`存在之前设计的，从那时起就一直存在保持向后兼容性的压力（关于严格性，正如您所提到的）。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-20T15:13:43.690

在 和 的情况下`(\\)`，`unionBy`折叠函数具有类型

```
foo :: [a] -> b -> [a] 
```

并`foo xs y`从 中删除最多一个元素`xs`，因此 using`foldl'`通常不会在那里购买任何东西，thunk 将构建在最顶部的右侧`(:)`而不是其上方。

据我所知，这不会在严格性方面产生影响，只有在需要将结果评估为弱头正常形式时才会评估两个折叠，并且只要`foldl'`会产生 a `_|_`，也会产生`foldl`。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-20T15:12:42.077

在这两种情况下，累加器都是类型`[a]`。我看不出将列表强制为弱头范式会产生巨大的影响，并且引入这种部分严格性似乎有些武断。

# php - PHP - 返回具有更改的同一页面

> ID：13474934
> 
> 赞同：0
> 
> 时间：2012-11-20T14:06:12.803
> 
> 标签：php, html

我有 html 页面，您可以在其中插入一些信息，然后提交此表单，这将更改数据库中的信息。我通常这样做，提交按钮调用服务器中的php文件。但我想要的是，这个 php 文件将返回给我与我发送请求相同的 html 页面，并进行修改。例如：将添加“数据库更新成功”文本等。没有 AJAX 怎么办？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T14:09:47.630

在 PHP 文件中，调用 header() 函数来重定向用户。例如：

```
header('Location: url.php'); 
```

要更改他们被重定向到的那个页面的内容，你可以在你的页面将检查的 URL 中传递一些东西。例如：

```
header('Location: url.php?submitted=1'); 
```

还有其他方法可以实现这一点，但这对我来说似乎是最直接的。请注意，您不想在提交页面结束之前调用 header() 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T14:08:53.560

使用[POST/REDIRECT/GET](http://community.developer.authorize.net/t5/The-Authorize-Net-Developer-Blog/Handling-Online-Payments-Part-6-Preventing-Duplicate-Submissions/ba-p/11168)

摘抄：

> 1.  用户提交表单
>     
>     
>     
>     这很简单。用户完成表单并通过按下提交按钮或在他们的键盘上输入来提交。
>     
>     
> 2.  我们将表单数据存储在会话中
>     
>     
>     
>     在处理完数据后，我们发现了一个错误，因此我们需要重新显示带有错误消息的表单，但我们还希望用他们的数据填充它，这样他们就不必为了修复一个潜在的小错误而重新填写整个表单。所以我们将他们的数据存储在一个会话（$_SESSION）中。只要会话有效或直到它们被删除，会话变量就会从一个页面转移到另一个页面。这是放置他们信息的理想位置，因为重定向会导致他们的信息立即被服务器丢弃。
>     
>     
> 3.  我们使用 303 重定向将用户重定向回同一页面
>     
>     
>     
>     一旦我们在他们的会话中保存了用户的信息，我们需要将他们重定向回同一页面。为了使其正常工作，我们需要使用 303 重定向。这意味着我们需要在重定向中发送一个 303 标头。303 重定向将导致浏览器重新加载页面，而无需重新提交初始 HTTP POST 请求。这包括用户使用后退或刷新按钮的时间。
>     
>     
> 4.  我们使用存储在会话中的数据重新填充表单当页面发送给用户时，我们使用我们保存在会话中的信息重新填充它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T14:09:59.387

只有首先在 CGI 中生成整个页面，除非您通过一些非常复杂的方法来获取要设置为 document.innerHTML 或类似 Javascript 的字段的值。但是你会经历地狱来解决引用问题。使用 AJAX，它正是为此目的而创建的，并且正是为了避免与您的需求相关的彻底地狱。

或者：页面的“修改块”可以是iframe，可以设置`target`form的属性，让PHP只返回iframe内容。

# android - LinearLayout 周围带有标题的边框

> ID：13474935
> 
> 赞同：5
> 
> 时间：2012-11-20T14:06:15.423
> 
> 标签：android, border, android-linearlayout, shape

`LinearLayout`我想在这张图片上制作一个带有标题的边框。

[布局 http://img829.imageshack.us/img829/3461/borderwithtitel.png](http://img829.imageshack.us/img829/3461/borderwithtitel.png)

我已经有边界了。
**如何添加标题？**

`.xml`我通过在可绘制文件夹中创建文件来创建边框。在那里我制作了一个形状，然后我将线性布局的背景设置为这个形状。

我正在使用 API 级别 8。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T07:32:34.803

根据@Radu的回答，你可以看到一个例子：

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent" 
android:color="#000000">
<View
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/rectangle"
    android:layout_margin="20dp"
    />
<RelativeLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <TextView 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:background="#000000"
        android:layout_marginTop="10dp"
        android:text="TITLE!"
        android:textColor="#ffffff"/>
</RelativeLayout>

</FrameLayout> 
```

@drawable/rectangle 位于一个可绘制的 rectangle.xml 文件中，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android" 
    android:shape="rectangle">
<solid android:color="@android:color/transparent"/>
<stroke  android:width="2dip" android:color="#ffffff"/>  
</shape> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T14:37:43.693

您可能想看看 Android Frame Layout。

可以在[这里](http://mobile.tutsplus.com/tutorials/android/android-sdk_frame-layout/)找到一个很好的教程，或者您可能想阅读开发[指南](http://developer.android.com/reference/android/widget/FrameLayout.html)。

# java - onActivityResult 拍照时返回空指针异常？

> ID：13474936
> 
> 赞同：0
> 
> 时间：2012-11-20T14:06:15.877
> 
> 标签：java, android

我正在尝试将此与我的应用程序集成：[Capture Image from Camera and Display in Activity](https://stackoverflow.com/questions/5991319/capture-image-from-camera-and-display-in-activity)

当我打开活动时，我完全使用了作者所写的内容，我得到了一个空指针异常。这是 logcat 的样子：

```
11-20 15:03:13.178: D/AndroidRuntime(15052): Shutting down VM
11-20 15:03:13.178: W/dalvikvm(15052): threadid=1: thread exiting with uncaught exception (group=0x400259f8)
11-20 15:03:13.189: E/AndroidRuntime(15052): FATAL EXCEPTION: main
11-20 15:03:13.189: E/AndroidRuntime(15052): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.dummies.android.taskreminder/com.dummies.android.taskreminder.activity.UsersThoughts}: java.lang.ClassCastException: android.widget.Button
11-20 15:03:13.189: E/AndroidRuntime(15052):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2787)
11-20 15:03:13.189: E/AndroidRuntime(15052):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2803) 
```

因此，我尝试对其进行一些更改，现在每当我从拍照返回活动时，使用此配置时都会出现空指针异常：

```
//in oncreate       
this.imageView = new ImageView(this);
this.imageView = (ImageView) this.imageView.findViewById(R.id.camera_thought);

//method in class file
protected void onActivityResult(int requestCode, int resultCode, Intent data) {  
    if (requestCode == CAMERA_REQUEST && resultCode == RESULT_OK) {  
        Bitmap photo = (Bitmap) data.getExtras().get("data"); 
        imageView.setImageBitmap(photo);
    }  
} 
```

这是错误的样子：

```
11-20 14:53:39.118: D/AndroidRuntime(14931): Shutting down VM
11-20 14:53:39.118: W/dalvikvm(14931): threadid=1: thread exiting with uncaught exception (group=0x400259f8)
11-20 14:53:39.128: E/AndroidRuntime(14931): FATAL EXCEPTION: main
11-20 14:53:39.128: E/AndroidRuntime(14931): java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=1888, result=-1, data=Intent { act=inline-data dat=content://media/external/images/media/89 (has extras) }} to activity {com.dummies.android.taskreminder/com.dummies.android.taskreminder.activity.UsersThoughts}: java.lang.NullPointerException
11-20 14:53:39.128: E/AndroidRuntime(14931):    at android.app.ActivityThread.deliverResults(ActivityThread.java:3734) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T14:12:55.133

问题是这`imageView`将`null`在你的`onCreate()`方法之后。

看起来你在分配它时混合了一些不同的约定。`findViewById()`通常，在您对布局文件进行膨胀时会使用调用。你可能有某种布局，某种形式的东西`R.layout.my_layout`，所以先尝试调用`setContentView()`，然后找到`ImageView`：

```
setContentView(R.layout.my_layout)
this.imageView = (ImageView)findViewById(R.id.camera_thought); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T14:17:49.403

我无法理解这一点：

```
this.imageView = new ImageView(this);
this.imageView = (ImageView) this.imageView.findViewById(R.id.camera_thought); 
```

第一行创建了一个全新的 ImageView，其中不包含任何内容。第二行尝试获取位于第一个 ImageView (?) 内的 ImageView。

如果你想显示一个 xml 声明的 imageView，过程是这样的：

```
//this actually refers to the activity
this.imageView = (ImageView) this.findViewById(R.id.camera_thought); 
```

如果您想以编程方式创建它：

```
this.imageView = new ImageView(this); 
```

但是，要使用该 ImageView，您需要将其设置为 Activity 的内容视图，或者将其添加到作为 Activity 内容视图的 ViewGroup 中。

```
setContentVIew(imageView); 
```

或者

```
viewGroup.addView(imageView);
setContentView(viewGroup); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T14:32:42.913

我正在为您提供完整的课程，请这样做：

```
public class CameraActivity extends Activity { 
```

私有静态最终 int CAMERA_PIC_REQUEST = 2500;

```
 @Override
public void onCreate(Bundle savedInstanceState) {          
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

    Button b = (Button)findViewById(R.id.CamOpen);
        b.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                 Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
                 startActivityForResult(cameraIntent, CAMERA_PIC_REQUEST);
            }
        });
    }

    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        if (requestCode == CAMERA_PIC_REQUEST) {
             Bitmap image = null;
            try{
            image = (Bitmap) data.getExtras().get("data");
          }

          catch(Exception e){}
         ImageView imageview = (ImageView) findViewById(R.id.ImageView);
          imageview.setImageBitmap(image);
    }

    super.onActivityResult(requestCode, resultCode, data);
}
} 
```

其中“main”是应该包含 Button“b”和 ImageView“image”的 xml 文件。

# jquery - 使用 Jquery 进行前进和后退导航

> ID：13474938
> 
> 赞同：2
> 
> 时间：2012-11-20T14:06:17.980
> 
> 标签：jquery, html, css, slideshow

我想要通过 jQuery 控制的简单的前进/后退导航。目前我有以下代码：

```
$("#main-navigation a").bind("click",function(event){
    event.preventDefault();

    var target = $(this).attr("href");
    $("html, body").stop().animate({
        scrollLeft: $(target).offset().left,
        scrollRight: $(target).offset().right
    }, 1200,'easeInOutBack');
}); 
```

和 HTML

```
<nav id="main-navigation">
    <ul>
        <li><a href="#"></a></li>
        <li><a href="#"></a></li>
    </ul>
</nav>  

<div id="home" class="panel">
    <div class="wrapper">
        <img src="images/landing.png" width="1024" height="768" title="landing page" />

    </div>
</div>

<div id="explore" class="panel">
    <div class="wrapper">
        <img src="images/pageTwo.png" width="1024" height="768" title="page" />

    </div>
</div> 
```

最终，DOM 有很多 div，所以我想要一个相对简单的方法让 jQuery 在每个 div 之间移动（前进和后退），希望不求助于插件。

我怎样才能做到这一点？

提前致谢

# doctrine-orm - zf2 模块 (DoctrineModule) 无法初始化

> ID：13474941
> 
> 赞同：6
> 
> 时间：2012-11-20T14:06:20.733
> 
> 标签：doctrine-orm, zend-framework2, composer-php

您好我正在尝试通过作曲家将教义2安装到zf2。我收到错误： `Fatal error: Uncaught exception 'Zend\ModuleManager\Exception\RuntimeException' with message 'Module (DoctrineModule) could not be initialized.'` 我按照以下步骤[操作 https://github.com/doctrine/DoctrineORMModule](https://github.com/doctrine/DoctrineORMModule)

我的 application.config 看起来像这样：

```
return array(
'modules' => array(
    'Application',
    'DoctrineModule',
    'DoctrineORMModule',
    'Album',
    'User'
),
'module_listener_options' => array(
    'config_glob_paths'    => array(
        'config/autoload/{,*.}{global,local}.php',
    ),
    'module_paths' => array(
        './module',
        './vendor',
    ),
),
); 
```

我的作曲家.json：

```
"minimum-stability": "dev",
"require": {
    "php": ">=5.3.3",
    "zendframework/zendframework": "2.*",
    "doctrine/doctrine-orm-module": "dev-master",
    "zendframework/zend-developer-tools": "*",
    "bjyoungblood/bjy-profiler": "*"
}, 
```

所有需要的学说库都在 vendor/doctrine 目录中。我猜是自动加载有问题。
在作曲家更新后，我收到消息： `[ErrorException] proc_open(): CreateProcess failed, error code - 267` 我不知道这意味着什么，但也许这会有所帮助。

第二件事是在[https://github.com/doctrine/DoctrineORMModule](https://github.com/doctrine/DoctrineORMModule)上有 section: `Installation steps (without composer)`和第 3 点。`setup PSR-0 autoloading for namespace DoctrineORMModule`...我在哪里可以设置这个东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-10-05T23:02:36.850

如果某些供应商文件夹是在另一台机器上创建的，这可能会导致您遇到错误。所以执行以下操作。

1.  尝试删除`composer.lock`和`./vendor`文件夹。
2.  然后`php composer.phar self-update`
3.  运行`php composer.phar install`以重新安装依赖项。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-11T04:10:39.413

从[https://github.com/composer/composer/issues/1063](https://github.com/composer/composer/issues/1063)和[https://github.com/composer/composer/issues/1346](https://github.com/composer/composer/issues/1346)开始，这看起来像是在您的环境下设置 PHP 的问题（我假设是窗户）。

模块没有正确安装，并且由于在安装过程中崩溃了，composer 没有正确转储自动加载器。

尝试在不同的路径中重复安装过程，并检查您使用的是最新版本的作曲家`php composer.phar self-update`

# ios - iTunes 符号链接到本地 化应用程序

> ID：13474942
> 
> 赞同：1
> 
> 时间：2012-11-20T14:06:26.063
> 
> 标签：ios, hyperlink, app-store-connect, itunes-store

我使用 i-tunes 应用内链接，例如：

```
NSString *app_link = @"samuraivszombiesdefense";
NSString *link = [@"itms-apps://itunes.com/apps/"stringByAppendingString:app_name];
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:link]]; 
```

有人碰巧知道：这个“应用程序名称”是什么 - 在 iTunes 中创建的应用程序记录的名称（禁止符号除外）（您可以在 iTunesConnect->“管理您的应用程序”屏幕上看到的内容）或“应用程序名称”字段在 iTunesConnect 中编辑版本详细信息时的元数据和上传？

我的意思是如果应用程序的元数据有多种语言，那么每种语言的“应用程序名称”都是不同的。如果 appname 是英文应用程序名称，像“itms-apps://itunes.com/apps/appname”这样的链接会起作用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T20:52:46.750

好的，这是我的解决方案。我决定使用如下 URL： [http://itunes.apple.com/app/idXXXXXXXXX?mt=8](http://itunes.apple.com/app/idXXXXXXXXX?mt=8)，其中 XXXXXXXXX - 我的应用程序 ID。没有国家前缀，所以我想它可以在全球范围内使用，不仅在美国或德国。或不？

这种链接可能会导致多次重定向。因此，为了避免它们，我使用了这样的代码（基于 Apple 文档中的代码并且效果很好）：

```
 @interface iTunesOpener ()
{
    NSURL *iTunesURL;
}

- (void)openAppLinkFromAppId:(NSString *) appid;

- (void)openReferralURL:(NSURL *)referralURL;

- (NSURLRequest *)connection:(NSURLConnection *)connection willSendRequest:(NSURLRequest *)request redirectResponse:(NSURLResponse *)response;

- (void)connectionDidFinishLoading:(NSURLConnection *)connection;

@end

@implementation iTunesOpener

- (void)openAppLinkFromAppId:(NSString *) appid
{
    NSString *iTunesLink = [NSString stringWithFormat:@"http://itunes.apple.com/app/id%@?mt=8", appid];
    NSURL* url = [NSURL URLWithString:iTunesLink];
    [self openReferralURL: url];
}

// Process a LinkShare/TradeDoubler/DGM URL to something iPhone can handle
- (void)openReferralURL:(NSURL *)referralURL
{
    NSURLConnection *con = [[NSURLConnection alloc] initWithRequest:[NSURLRequest requestWithURL:referralURL] delegate:self startImmediately:YES];
    [con release];
}

// Save the most recent URL in case multiple redirects occur
// "iTunesURL" is an NSURL property in your class declaration
- (NSURLRequest *)connection:(NSURLConnection *)connection willSendRequest:(NSURLRequest *)request redirectResponse:(NSURLResponse *)response
{
    iTunesURL = [response URL];
    if( [iTunesURL.host hasSuffix:@"itunes.apple.com"])
    {
        [connection cancel];
        [self connectionDidFinishLoading:connection];
        return nil;
    }
    else
    {
        return request;
    }
}

// No more redirects; use the last URL saved
- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    [[UIApplication sharedApplication] openURL:iTunesURL];
}

@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T14:14:02.860

**编辑：**如果您只对所有国家/地区使用相同的链接，则应用程序的链接将不起作用。因为不同国家的链接不一样。例如，Facebook 在中国的链接在“/com”和“/app”之间有一个“/cn”。看图片：![在此处输入图像描述](../Images/bde187167a631e99f15e4833eeea1b24.png)

* * *

非常简洁：

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"itms://itunes.com/apps/appname"]]; 
```

如果您想为开发人员发送到所有应用程序，请使用

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"itms://itunes.com/apps/developername"]]; 
```

如果您想打开 URL 中包含您的公司名称的特定应用程序：

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"itms://itunes.com/apps/developername/appname"]]; 
```

您可以参考这个问题了解更多信息：[如何链接到应用商店中的应用](https://stackoverflow.com/questions/433907/how-to-link-to-apps-on-the-app-store)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T15:43:28.597

我们找到的最佳解决方案是避免尝试预测 URL，并创建一个自定义 URL 重定向`http://mycompany.com/redirects/my-app-itunes`，您可以在知道它后更新它以重定向到正确的 URL。

你必须使用的确切字符串很难正确，尤其是当你有特殊字符、空格等时。规则甚至可能会改变，或者 Apple 可能会决定改变一些东西。最好将 URL 置于您的控制之下。

如果您真的想走这条路，请参阅[Apple 的此文档](https://developer.apple.com/library/ios/#qa/qa1633/_index.html)。它详细说明了将应用程序名称转换为简短友好的 iTunes URL 所需的操作：

> *   删除所有空格
> *   将所有字符转换为小写
> *   删除所有版权 (©)、商标 (™) 和注册商标 (®) 符号
> *   用“and”替换和号（“&”）
> *   删除大部分标点符号（参见清单 2 的集合）
> *   用它们的基本字符（u、a 等）替换重音字符和其他“装饰”字符（ü、å 等）
> *   保持所有其他字符不变。

应用程序名称应该是出现在 iTunes Connect 应用程序列表中的名称（非本地化）。最好的办法是对此进行测试。

最后，来自苹果：

> 这些 itunes.com URL 是为了方便而提供的，**并不保证链接到特定的应用程序或公司**。在任何营销或其他公共材料中使用它们之前，请务必测试您的 URL。如果存在命名冲突，请继续使用标准 itunes.apple.com URL，其中包含 URL 中的唯一数字标识符。

# c++ - 使用 C/C++ 作为脚本语言

> ID：13474948
> 
> 赞同：9
> 
> 时间：2012-11-20T14:06:53.400
> 
> 标签：c++, c, scripting

我正在尝试创建一个使用 C/C++ 作为“脚本语言”的架构。我已经有一个原型基于：

[http://www.codeproject.com/Articles/29999/Compiling-C-code-at-runtime](http://www.codeproject.com/Articles/29999/Compiling-C-code-at-runtime)

和

[http://runtimecompiledcplusplus.blogspot.com](http://runtimecompiledcplusplus.blogspot.com)

我的原型允许我重新编译动态链接库/共享对象并在运行时重新加载它。我只有一个小问题，让我们以以下代码为例：

[机器人.c]

```
typedef struct
{
    float health;

    float speed;

    bool  alive;

} Bot;

Bot bot = { .health = 100.0f,
        .speed  = 1.0f,
        .alive  = true };

void OnCollision( void )
{
    bot.health -= 10.0f;

    if( bot.health <= 0.0f )
    { bot.alive = false; }
}

void OnUpdate( void )
{
    if( bot.alive )
    {
        /* Update animation */
    }
} 
```

如果将 bot.c 脚本分配给 1 个机器人，则可以，但如果我将回调分配给多个机器人，它们共享相同的数据（1 个被击中，它们都被击中！）。如何为每个机器人“单独”运行机器人脚本？

我已经研究了 C/C++ 中的协程（使用 setjmp/longjmp），但它对 C++ 构造函数和析构函数有风险（并且还迫使你在函数中集成宏，在我的情况下，这不是我的用户的选项）。

我正在考虑运行多个线程，但会出现同样的问题（因为数据来自 dll/所以它是共享的）。我对 fork/co-process 不太熟悉，但它似乎不适用于我的情况。而且我不认为管道也是一种选择......我几乎被卡住了。

有没有办法解决这个问题？

ps：是的，我知道像 Lua 或 Javascript (V8) 这样的脚本语言有内置协程，或者在 Lua lua_thread 的情况下可以解决我的问题，但我想坚持使用 C/C++ 接口供用户编码，因为它对于游戏性能至关重要！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-20T14:44:42.760

你不需要像协程这样的东西。问题是你有一个保存数据的全局变量，你只需要它的多个实例。

现在标准共享库机制不允许您复制模块的静态数据，但您不需要这样做。只是不要静态分配数据，而是创建它的多个实例。

在 C++ 中，它更容易使用，但实现起来有点困难，因为您需要计算损坏的符号名称和正确的咒语来执行新建和删除。该脚本看起来像：

```
class Bot {
    float health;
    float speed;
    bool  alive;
    Bot()
    void OnCollision();
    void OnUpdate();
}
Bot::Bot() : health(100.0f), speed(1.0f), alive(true) {}
... 
```

您需要知道类名，但这可以从模块名或类似名称派生而来。您可以编写一个模板来生成一堆静态函数，以便在某种程度上可移植地处理初始化。像：

```
struct ModuleBase {
    void *(*Init)();
    void (*Done)(void *);
    void (*Collision)(void *);
    void (*Update)(void *);
    ModuleBase(void *(*I)(), void (*D)(void *), void (*C)(void *), void (*U)(void *)) : Init(I), Done(D), Collision(C), Update(U) {}
};
template <typename T>
class Module : public ModuleBase {
    static void *InitFunc() { return static_cast<void *>(new T()); }
    static void DoneFunc(void *x) { delete static_cast<T *>(x); }
    static void CollisionFunc(void *x) { static_cast<T *>(x)->OnCollision(); }
    static void UpdateFunc(void *x) { static_cast<T *>(x)->OnUpdate(); }
public:
    Module() : ModuleBase(&InitFunc, &DoneFunc, &CollisionFunc, &UpdateFunc) {}
}; 
```

像这样使用

```
Module<Bot> bot; 
```

在“脚本”的末尾。比您只需查找该符号并调用其中的函数指针。

在 C 中它会更难使用，因为您需要显式编写 init 和 deinit 函数，但您已经知道如何调用它：

```
struct Bot { ... }
// NO INSTANCES HERE!
void *Init(void) {
    Bot *bot = malloc(sizeof(Bot));
    bot->health = 100.0f;
    bot->speed = 1.0f;
    bot->alive = true;
    return bot;
}
void Done(void *bot) {
    free(bot);
}
void OnCollision(void *void_bot)
{
    Bot *bot = void_bot;
    ...
}
void OnUpdate(void *void_bot)
{
    Bot *bot = void_bot;
    ...
} 
```

在任何一种情况下，您都只需创建任意数量的实例，使用`operator new[]`和`Bot`构造函数或使用`Init`并使用适当的参数调用函数/方法。

# url - 如何使用 mod_rewrite 将查询字符串转换为路径 URL？

> ID：13474950
> 
> 赞同：1
> 
> 时间：2012-11-20T14:07:03.040
> 
> 标签：url, mod-rewrite, url-rewriting, seo, query-string

我正在尝试将具有查询字符串的 URL 重写为其 SEO 友好名称，即考虑

```
mysite.com/models?p1=v1 
```

我想将其重写为

```
mysite.com/models/p1/v1 
```

用户应该在地址栏中看到上述地址。有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T01:40:23.487

`.htaccess`应该是：

```
RewriteEngine On
RewriteRule ^models/(.+)/(.+)$ models.php?$1=$2 [NC,L] 
```

# python - Python 字典键中的空格

> ID：13474957
> 
> 赞同：28
> 
> 时间：2012-11-20T14:07:21.863
> 
> 标签：python, dictionary, key

我知道你可以在 Python 字典键中有空格，但这被认为是糟糕的编程吗？我在 PEP 中找不到任何关于此的内容。

**编辑澄清**：在我正在做的一个项目中，我正在做一些分析来自 Apache 的记分牌输出的东西`mod_status`（参见下面的示例输出。）我只是想找出最佳实践。我是否应该这样结束：

```
workers = {'W': 1,
           '_': 9,
           ...} 
```

或这个：

```
workers = {'Sending Reply': 1,
           'Waiting for Connection': 9,
           ...} 
```

示例`mod_status`输出：

```
_....___W____._.................................................
................................................................
................................................................
................................................................
Scoreboard Key:
"_" Waiting for Connection, "S" Starting up, "R" Reading Request,
"W" Sending Reply, "K" Keepalive (read), "D" DNS Lookup,
"C" Closing connection, "L" Logging, "G" Gracefully finishing,
"I" Idle cleanup of worker, "." Open slot with no current process 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-11-20T14:20:31.587

您可以使用 pylint 之类的工具来检查您的代码是否与 PEP8 兼容[：](http://pypi.python.org/pypi/pylint)

所以我尝试了类似的东西：

```
M_D1 = {" foo bar ":1, " a bc":2, " ":3} 
```

并且 pylint 给了我 10/10 的评分，所以我想它与键中使用的空格没有问题。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-20T14:09:43.927

您可能会想到 Javascript，您可以在其中使用`obj.foo`和键通过对象的键来引用对象`obj['foo']`。在这种情况下，空格可能被认为是错误的形式，因为第一个版本不起作用：Python 首先没有该选项，因此不会出现问题。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-20T14:08:35.243

如果您的键是字符串，它们可能包含任何内容。

他们应该代表什么？举个例子。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-20T14:09:22.203

您的密钥可以是您想要的任何（字符串）。如果您将它们用于内部的东西 - 空间可能不是最好的主意。否则 - 好的。

# ant - 在 Ivy makepom Ant 目标中使用多个文件

> ID：13474960
> 
> 赞同：1
> 
> 时间：2012-11-20T14:07:30.867
> 
> 标签：ant, ivy

我的项目有多个大部分独立的模块，每个模块都有自己的 Ivy 文件。一些模块是“顶级的”，因为它们不依赖于它们，它们只依赖于其他模块。

我想为这些模块生成一个 pom，用于发布依赖项供我的用户使用。

`ivyfile`makepom 任务仅通过属性 afaict接受单个文件。我创建了一个主模块，它声明它依赖于顶级模块并将其提供给 makepom，但它不包含顶级模块的依赖关系，它只列出顶级模块本身。

我意识到我可以只提供几个 pom 文件，但为了我的理智，我宁愿只保留一个。

所以我想知道你是否可以以某种方式将多个 Ivy 文件传递​​给 make pom 任务，或者当我使用主 Ivy 文件时，是否有办法让它列出*所有依赖项？*或者在最坏的情况下，有没有一种简单的方法来合并 pom 文件而无需手动操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T22:08:16.863

如果这是文档问题，请配置每个模块以生成其传递依赖关系的报告，请参阅 ivy[报告](http://ant.apache.org/ivy/history/latest-milestone/use/report.html)任务。

makepom任务只接受一个参数，因为就像 Maven 项目一样，模块只有一个文件来声明其依赖项[。](http://ant.apache.org/ivy/history/latest-milestone/use/makepom.html)

也许您可以做的是创建一个依赖于每个子模块的父 ivy 文件？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T05:22:45.450

正如 Mark O'Connor 所指出的，该`<ivy:report>`任务在记录所有可传递 jar 方面做得非常出色。运行时、编译等需要哪些。

另一种可能性是`<ivy:retrieve>`用于将 Master 模块使用的所有 jar 检索到一个空目录中。即使您的项目本身不需要这样做。所需 jar 列表将是一个简单的目录列表。

# android - getSupportedPreviewSizes() 是有序列表吗？

> ID：13474961
> 
> 赞同：1
> 
> 时间：2012-11-20T14:07:33.587
> 
> 标签：android, android-camera

根据android docs [Camera.Parameters.getSupportedPreviewSizes()](http://developer.android.com/reference/android/hardware/Camera.Parameters.html#getSupportedPreviewSizes%28%29)返回

> “Size 对象的列表。此方法将始终返回包含至少一个元素的列表。”

有谁知道该列表是否总是按大小排序？

据我所知，在我尝试过的所有设备中，列表都是有序的……但不知道这是否总是正确的。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T20:33:35.753

我从来没有见过这个列表是无序的。我说的是来自不同制造商的几十种设备和软件升级。但不能保证。并且顺序可能不明确：什么是“更小”：640×480 还是 720×400？对于某些设备，甚至是来自一线制造商的不错的设备，此列表中可能存在错误。比如**Galaxy Nexus**声称它支持 320×240，你可以设置这个分辨率，但是相机仍然是 640×480。

# php - 根据性别查询返回访问者数量

> ID：13474967
> 
> 赞同：1
> 
> 时间：2012-11-20T14:07:48.540
> 
> 标签：php, mysql, sql, arrays

我有这个查询来返回两个日期之间的访问者数量。

```
$SQLVisit = "SELECT     
            count(score) as counts,
            date FROM persons  
            WHERE date > '".$_SESSION['data1']."' AND date < '".$_SESSION['data2]."' 
            GROUP BY date 
            ORDER BY date asc"; 

$result = mysql_query($SQLVisit);   
$num = mysql_num_rows($result); 
```

这些来访者，有些是男性，有些是女性。

我已经有一个数组，其中包含访问次数和相应的日期。像这样：['2012-1-1', 50]。我的想法是有一个数组来保存日期、访问次数、男性人数和女性人数。像这样：['2012-1-1', 50, 35.15]。

任何的想法？ps：我使用PHP。

编辑：数组代码

```
$data[0] = array('day','counts');       
    for ($i=1; $i<($num+1); $i++)
    {
        $data[$i] = array(substr(mysql_result($result, $i-1, "date"), 0, 20),
            (int) mysql_result($result, $i-1, "counts"),);
    }   
    echo json_encode($data); 
```

编辑2：是的，我有一个性别（int）列，男性为 1，女性为 2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T14:12:18.650

如果您有`gender`专栏，请尝试

```
$SQLVisit = "SELECT  date, gender,   
                     count(score) as counts,
            FROM  persons  
            WHERE date > '".$_SESSION['data1']."' AND date < '".$_SESSION['data2]."' 
            GROUP BY date, gender 
            ORDER BY date asc"; 
```

如果你想格式化性别而不是数字，你想将其显示为`male`或`female`

```
$SQLVisit = "SELECT  date, 
                     IF(gender = 1, 'Male', 'Female') gender,   
                     count(score) as counts,
            FROM  persons  
            WHERE date > '".$_SESSION['data1']."' AND date < '".$_SESSION['data2]."' 
            GROUP BY date, gender 
            ORDER BY date asc"; 
```

如果你也想有这样的格式，

```
date    Male      Female
===========================
'date'     5          6 
```

使用以下查询

```
SELECT  DATE,
        SUM(CASE WHEN gender = 1 then 1 ELSE 0 END) Male,
        SUM(CASE WHEN gender = 2 then 1 ELSE 0 END) Female
FROM    person
-- WHERE clause
GROUP BY DATE
-- ORDER clause 
```

您的查询很容易受到攻击`SQL Injection`，请阅读下面的文章

*   [如何防止 PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T14:12:55.863

您可以使用 SUM(IF())：

```
$SQLVisit = "SELECT     
            count(score) as counts,
            SUM(IF(gender=1,1,0)) as male,
            SUM(IF(gender=2,1,0)) as female,
            date FROM persons  
            WHERE date > '".$_SESSION['data1']."' AND date < '".$_SESSION['data2]."' 
            GROUP BY date 
            ORDER BY date asc"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T14:16:37.473

你可以这样做：

```
SELECT     
  SUM(CASE WHEN Gender = 1 THEN 1 ELSE 0) malescounts,
  SUM(CASE WHEN Gender = 2 THEN 1 ELSE 0) femalescounts,
  count(score) as counts
FROM persons  
WHERE date > ...
GROUP BY date; 
```

# ssl - 带有crl的tomcat6无法加载

> ID：13474968
> 
> 赞同：2
> 
> 时间：2012-11-20T14:07:55.497
> 
> 标签：ssl, openssl, tomcat6, certificate

我在 CentOS 6.3（64 位）上配置了一个新的 tomcat6.0.34 设置。我已经为我正在使用的证书颁发机构下载了一系列 CRL，并使用 openssl 将它们从 DER 转换为 PEM：

```
openssl crl -inform DER -outform PEM -in f1.der -out f1.pem_crl
openssl crl -inform DER -outform PEM -in f2.der -out f2.pem_crl 
```

然后，我构建了一个包含所有内容的 crl 包`pem_crls`（最终得到 283 MB crl）：

```
cat *.pem_crl > CRL-bundle.crl 
```

最后，我将其移至 /etc/ssl/certs

```
mv CRL-bundle.crl /etc/ssl/certs 
```

我配置我的连接器如下：

```
<Connector port="8080" protocol="HTTP/1.1"
           SSLEnabled="true"
           maxHttpHeaderSize="8192"
           maxThreads="150"
           minSpareThreads="25"
           maxSpareThreads="75"
           enableLookups="false"
           acceptCount="100"
           disableUploadTimeout="true"
           compression="on"
           compressableMimeType="text/html,text/xml,text/plain,text/css,text/
           javascript,application/xml,application/x-javascript,application/javascript"
           connectionTimeout="20000"
           secure="true"
           keystorePass="mykeystorepass"
           truststoreFile="/etc/ssl/certs/my.truststore"
           truststorePass="mytruststorepass"
           clientAuth="true"
           sslProtocol="TLS"
           crlFile="/etc/ssl/certs/CRL-bundle.crl"
           redirectPort="8443" /> 
```

当我尝试像那样启动 tomcat6 时，我的 catalina.out 中只出现一个条目

```
Nov 20, 2012 8:58:29 AM org.apache.catalina.core.AprLifecycleListener init
INFO: The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: /usr/java/packages/lib/amd64:/usr/lib64:/lib64:/lib:/usr/lib 
```

如果我删除 中的`crlFile`引用`server.xml`，一切正常（当然 crl 查找除外）。系统启动，应用程序可访问，提示输入证书...

任何关于它为什么会失败的想法都将不胜感激。

# c# - 在多个列表中查找最长字符串长度的更好方法

> ID：13474969
> 
> 赞同：2
> 
> 时间：2012-11-20T14:07:56.090
> 
> 标签：c#, linq, list, max, nested-lists

我目前正在 C# 中进行原型设计，因为这是它唯一有用的东西。现在我正在学习 linq 并遇到了语法 nitpick。

```
private List<string> svar1 = new List<string>();
private List<string> svar2 = new List<string>();
private List<string> svar3 = new List<string>();
private List<string> svar4 = new List<string>();
private List<string> svar5 = new List<string>();
... fill lists with data 
```

为了在所有这些列表中获得最长的字符串长度，我这样做：

```
List<List<string>> lists = new List<List<string>>{svar1, svar2, svar3, svar4, svar5};
int ma = lists.Max(lst => lst.Max(str => str.Length)); 
```

但是好像太长了。你不应该把它写得更短，也许更有效吗？

就像是：

```
int ma = {svar1, svar2, svar3, svar4, svar5}.Max(lst => lst.Max(str => str.Length)); 
```

我看过有关这种 linq 语法的视频，但那是很久以前的事了，我不记得语法了。一些互联网搜索后，我仍然找不到一个好的答案。

更新：所有列表每个都有大约 870 个项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T14:09:27.330

你很亲近；

```
int ma = new[] {svar1, svar2, svar3, svar4, svar5}
             .Max(lst => lst.Max(str => str.Length)); 
```

应该管用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T15:03:29.717

您可以使用 Concat 而不是创建新列表：

```
svar1.Concat(svar2).
   Concat(svar3).
   Concat(svar4).
   Max(str => str.Length); 
```

如果您有许多短名单，此解决方案可能会稍微快一些。

# php - 通过查询同一列获取具有所有输入值的所有行

> ID：13474976
> 
> 赞同：1
> 
> 时间：2012-11-20T14:08:07.243
> 
> 标签：php, mysql, relational-database

我正在尝试搜索具有所有输入标签的所有用户，但它正在通过查看同一列来搜索它们。

```
SELECT u.*, t.* FROM user u
LEFT JOIN user_tags ut ON u.id = ut.user_id
LEFT JOIN tags t ON ut.tag_id = t.id
WHERE t.name = tag1 AND t.name = tag2 
```

我仅按标签搜索，每个用户必须拥有所有输入的标签，而不仅仅是 1 个。我正在使用 PHP 根据输入的值的数量添加另一个 AND 子句，因此如果有 3 个值，它将如下所示：

```
SELECT u.*, t.* FROM user u
LEFT JOIN user_tags ut ON u.id = ut.user_id
LEFT JOIN tags t ON ut.tag_id = t.id
WHERE t.name = tag1 AND t.name = tag2 AND t.name = tag3 
```

t.name 仅包含 1 个标签名称，而不是逗号分隔的值。标签名称通过 user_tags 表链接到每个用户，其中每个用户 ID 可以有多个标签 ID，如下所示：

```
user_id | tag_id
40      | 3
40      | 4
41      | 1
41      | 2
41      | 3 
```

而且我当前的查询没有返回任何内容，因为没有一列具有所有 3 个标签名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T14:37:11.437

最简单的解决方案如下，其中“计数”是您要查询的标签数量，因此您只会获得拥有所有指定标签的用户。

```
SELECT u.*, count(*) as `count`
FROM `user` u 
    JOIN `user_tags` ut ON ut.`user_id`=u.`id`
    JOIN `tags` t ON t.`id`=ut.`tag_id`
WHERE t.`name`='tag1' OR t.`name`='tag2'
GROUP BY u.`id`
HAVING `count` = 2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T14:17:58.763

你可以做这样的事情。它只会返回具有所有 3 个标签的用户 ID。

```
SELECT    u.id
FROM      user u
          LEFT JOIN user_tags ut ON u.id = ut.user_id
          LEFT JOIN tags t ON ut.tag_id = t.id
GROUP BY  u.id
HAVING        SUM(CASE WHEN t.name = tag1 THEN 1 ELSE 0 END) > 0 
          AND SUM(CASE WHEN t.name = tag2 THEN 1 ELSE 0) > 0 
          AND SUM(CASE WHEN t.name = tag3 THEN 1 ELSE 0) > 0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T14:34:40.373

让我们使用 group_concat ...

```
SELECT
    u.*
FROM
    user u
    JOIN user_tags ut ON ut.user_id = y.id
    JOIN tags t ON t.id = ut.tag_id
WHERE
-- limit only the tags you want
    t.name IN ( tag1, tag2, ... )
GROUP BY
    u.id
HAVING
    GROUP_CONCAT( t.name ORDER BY t.name SEPARATOR ',' ) = 'tag1,tag2,...' 
```

请注意，在有部分中，条件两侧的标记顺序应相同

# java - 在另一个 JLabel 之上显示一个 JLabel

> ID：13474980
> 
> 赞同：3
> 
> 时间：2012-11-20T14:08:18.617
> 
> 标签：java, swing, jlabel

我有以下代码：

```
try {
        File file_background = new File(
                "C:\\Users\\xxxx\\Desktop\\background.png");
        ImageIcon icon_background = new ImageIcon(
                ImageIO.read(file_background));
        JLabel background = new JLabel(icon_background);
        window.setContentPane(background);

        File file_car = new File(
                "C:\\Users\\xxxxxx\\Desktop\\car.png");
        ImageIcon icon_car = new ImageIcon(ImageIO.read(file_car));

        JLabel car = new JLabel(icon_car);
        car.setVisible(true);

        background.add(car);
        // TODO Get car showing on top of the background label

    } catch (IOException e) {

        e.printStackTrace();
    } 
```

我试图在背景标签的顶部显示汽车标签。但我只得到背景 JLabel 显示。我是 SWING 的新手，所以任何关于我缺少哪些步骤的建议都会很棒。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T14:30:09.907

> ..我想把它移到稍后阶段。但是现在我希望它首先显示:)

有两种方式，

### 第一个。

*   通过使用, 而不是（优点是具有适当通知的容器）`JLabel car` 来放置`JPanel`, 绘制一个。`Image``paintComponent``JLabel background``JPanel``LayoutManager`

*   放入`JLabel car` ，`JLabel background`但`JLabel`没有实现任何`LayoutManager`，必须设置期望。

    1.  优点是所有图片`JLabel`都是静态的，与`paintComponent`.
    2.  缺点`JLabel`不是容器和适当的通知`LayoutManager`，需要一些代码，而且与`JLabel`放置 相比`JPanel`，移动（AbsoluteLayout）是一个很好的解决方案。

### 第二。

`Images`使用[BufferedImage 和 Graphics](https://stackoverflow.com/a/7940227/714968)进行绘制。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-20T14:20:33.490

将它们都添加到使用[OverlayLayout](http://docs.oracle.com/javase/7/docs/api/javax/swing/OverlayLayout.html)的 JPanel 中。不能将 a 添加`JLabel`到另一个`JLabel`.

这段代码没有经过编译器所以把它当作它是什么:)

```
JPanel panel = new JPanel(new OverlayLayout());
panel.add(background);
panel.add(car); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T14:20:04.287

作品..添加了以下内容以使其显示：

```
car.setBounds(200, 200, 200, 200); 
```

显然这是因为默认情况下使用空布局管理器。因此，设置标签的边界将使其能够显示，因为默认大小为 0。

# java - 如何解决 JSP 中的发送电子邮件操作

> ID：13474981
> 
> 赞同：-2
> 
> 时间：2012-11-20T14:08:19.143
> 
> 标签：java, jsp

下面是我用于预订餐厅餐桌的 JSP 代码。我想在表格保留成功时向用户发送电子邮件，但它无法向用户发送电子邮件。我已经尝试了很多方法来解决它，但它也给我返回了无法发送电子邮件的错误消息。

```
<%@page import="java.util.Date"%>
<%@ page import="java.util.*" %>
<%@ page import="javax.mail.*" %>
<%@ page import="javax.mail.internet.*" %>
<%@ page import="javax.mail.internet.*,javax.activation.*"%>
<%@ page import="javax.servlet.http.*,javax.servlet.*" %>
<%@page import="java.text.SimpleDateFormat"%>
<%@page import="booking.Bean.Login"%>
<%@page import="booking.DB.OrderDB"%>
<%@page import="booking.Bean.Order"%>
<%@page import="booking.Wrapper.Wrapper"%>
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<link href="css/style.css" rel="stylesheet" type="text/css">
<title>Add Order JSP</title>
</head>
<body>
    <div id="container">
        <div id="header">
            <jsp:include page="header.jsp" />
        </div>

        <div id="menu">
    <ul>

                <li class="menuitem"><a href="aboutC.jsp">About</a>
                </li>
                <li class="menuitem"><a href="clientsC.jsp">Menu</a>
                </li>
                <li class="menuitem"><a href="contactC.jsp">Contact Us</a>
                </li>
                <li class="menuitem"><a href="login.jsp">Logout</a>
                </li>
            </ul>

        </div>

        <div id="leftmenu">

            <div id="leftmenu_top"></div>

            <div id="leftmenu_main">
                <jsp:include page="orderMenu.jsp" />
            </div>

            <div id="leftmenu_bottom"></div>
        </div>
        <div id="content">
            <div id="content_top"></div>
            <div id="content_main">
                <h2>Order Status</h2>
                <%

                    String OrderCustId = request.getParameter("OrderCustIDtxt");
                    String OrderDate = request.getParameter("OrderDatetxt");
                    String OrderTime = request.getParameter("OrderTimetxt");
                    String OrderSeat = request.getParameter("OrderSeattxt");
                    //char BStatus = request.getParameter("OrderStatustxt");
                    //String userId = request.getParameter("txtUserId");
                    String custName = request.getParameter("textCustName");
                    String cEmail = request.getParameter("textCustEmail");
                    String cPhoneNo = request.getParameter("textCustContactNo");

                    SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd");
                    Date date = sdf.parse(OrderDate);

                    Order order = new Order();
                    order.getOrderId();
                    order.setCustId(OrderCustId);
                    order.setStaffId("2000");
                    order.setOrderDate(date);
                    order.setOrderTime(OrderTime);
                    order.setOrderSeat(OrderSeat);
                    order.setBStatus('A');
                    order.setOCustName(custName);
                    order.setcOEmail(cEmail);
                    order.setcOPhoneNo(cPhoneNo);

                    OrderDB orderDB = new OrderDB();
                    int seatAvaliable=orderDB.checkSeat(order);
                    if(seatAvaliable<35){                   
                        Wrapper wrapper = new Wrapper();
                        int status = wrapper.addOrder(order);

                        if (status > 0) {
                            out.print("<center><h5><font color='blue'>Successful Place Order</font></h5></center>");
                    %>
                    <br>
                    <table border="0" align="center">
                        <tr>
                            <th colspan="2" bgcolor="lightgrey">Display Details Added New
                                Order</th>
                        </tr>
                        <tr>
                            <td>Order ID:</td>
                            <td><%=order.getOrderId()%></td>
                        </tr>
                        <tr>
                            <td>Customer ID:</td>
                            <td><%=OrderCustId%></td>
                        </tr>
                        <tr>
                            <td>Order Date:</td>
                            <td><%=date%></td>
                        </tr>
                        <tr>
                            <td>Order Time:</td>
                            <td><%=OrderTime%></td>
                        </tr>
                        <tr>
                            <td>Order Seat:</td>
                            <td><%=OrderSeat%></td>
                        </tr>
                        <tr>
                            <td>Customer Name:</td>
                            <td><%=custName%></td>
                        </tr>
                        <tr>
                            <td>Customer Email:</td>
                            <td><%=cEmail%></td>
                        </tr>
                        <tr>
                            <td>Customer Contact No:</td>
                            <td><%=cPhoneNo%></td>
                        </tr>
                        <tr>
                            <td colspan="2">&nbsp;</td>
                        </tr>
                        <tr>
                            <td></td>
                            <td><input type="button" value="Back"
                                onclick="history.go(-1)" /></td>
                        </tr>

                    </table>
                    <%
                        String result;
                        String to = cEmail; //ur client email
                        String from = "dasreg10@gmail.com"; //ur email address

                        String host = "smtp.gmail.com";         //for yahoo smtp.mail.yahoo.com == 465
                        Properties properties = System.getProperties();
                        properties.setProperty("mail.smtp.host", host);
                        properties.setProperty("mail.smtp.port","587");
                        Session mailSession = Session.getDefaultInstance(properties);

                        try{
                            MimeMessage message = new MimeMessage(mailSession);
                            message.setFrom(new InternetAddress(from));
                            message.addRecipient(Message.RecipientType.TO, new InternetAddress(to));

                            //This is your email subject
                            message.setSubject("L'eo Cafe Booking Success");
                            //This is the actual msg
                            message.setText(custName+" "+"Your table has been reserved at "+date+" "+OrderTime);
                            // Send message
                            Transport.send(message);
                            result = "Booking information sent successfully....";
                        }catch (MessagingException mex) {
                            mex.printStackTrace();
                            result = "Error: unable to send message....";
                        }
                        out.println("Result: " + result + "\n");
                    %>
                    <%

                        } else {
                            out.print("<center><h5><font color='red'>Failed to Place Order</font></h5></center>");
                        }
                    %>
                    <br>
                    <%
                        }
                    else{
                        out.print("<center><h5><font color='red'>Booking Full!!!</font></h5></center>");    
                        }
                    %>

            </div>
            <div id="content_bottom"></div>
            <jsp:include page="footer.jsp" />
        </div>
    </div>
</body>
</html> 
```

以下是从系统获取的异常：

```
 javax.mail.SendFailedException: Sending failed;
  nested exception is:
    class javax.mail.MessagingException: 530 5.7.0 Must issue a STARTTLS command first. ay5sm8087291pab.1

    at javax.mail.Transport.send0(Transport.java:218)
    at javax.mail.Transport.send(Transport.java:80)
    at org.apache.jsp.addOrderJSP_jsp._jspService(addOrderJSP_jsp.java:256)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:432)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1002)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source) 
```

这是我最后一年的学术项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T14:10:25.127

在这种情况下，您要连接的邮件服务器未运行或被配置为拒绝连接。您甚至可能没有在 localhost 上安装邮件服务器

您可以通过 telnet-ing 到 localhost 上的端口 25 来确认这一点。

启动邮件服务器或检查配置，或​​者使用另一台主机。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T14:22:18.600

不确定这样做`MimeMessage message = new MimeMessage(mailSession);`是否会在 MimeMessage 中获得适当的 smtp 服务器。你应该手动设置它：

```
message.addHeader("mail.smtp.host", host);
message.addHeader(""mail.smtp.port","587"); 
```

并为每个标题执行此操作。或者，您可以创建一个 Transport 实例，请参见[此处](http://javamail.kenai.com/nonav/javadocs/com/sun/mail/smtp/SMTPTransport.html)

**编辑**

看到你的踪迹，我想你想连接到`gmail smtp`. 这样做，您需要将密码放入您想要避免的代码中。也许尝试安装本地 smtp 服务器？

# android - 如何在线性布局中居中文本视图

> ID：13474982
> 
> 赞同：47
> 
> 时间：2012-11-20T14:08:20.147
> 
> 标签：android, view, android-linearlayout

我有以下布局，我想让 textview 出现在视图的中心和中间。我怎样才能做到这一点？

在图形视图中查看布局时，我尝试调整各种重力属性，但似乎没有任何改变。我想要中心的文本视图，我已经完成但在视图的一半。

谢谢马特。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:background="@drawable/carefreebgscaledalphajpg" >

    <TextView
        android:id="@+id/textviewdatefornocallspage"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:text="You have no calls for "
        android:textSize="25sp" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2012-11-20T14:13:44.110

在您的 linearLayout 标签中将重力设置为中心：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
     android:gravity="center"
    android:background="@drawable/carefreebgscaledalphajpg" > 
```

或使用`RelativeLayout`这样的：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/carefreebgscaledalphajpg" >

    <TextView
        android:id="@+id/textviewdatefornocallspage"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_centerInParent="true"
        android:text="You have no calls for "
        android:textSize="25sp" />

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2017-03-15T07:49:01.267

# 尝试这个

很简单，我尝试了很多答案，但所有答案都不起作用......最后这种方法对我有用

```
 <LinearLayout
                        android:layout_below="@+id/iv_divider"
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:orientation="vertical"
                        android:layout_marginTop="@dimen/_10dp">
                        <TextView
                            android:layout_width="match_parent"
                            android:layout_height="wrap_content"
                            android:text="@string/mycredits"
                            android:textColor="@color/colorGray"
                            android:gravity="center"
                            android:textSize="@dimen/_25dp" />
                    </LinearLayout> 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-06-09T06:47:19.030

在线性布局中为 TextView设置 `android:gravity="center"`属性，并将文本视图的高度和宽度保持为`wrap_content`.

这个解决方案对我有用。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-20T14:15:25.170

```
 <TextView
...
    android:layout_gravity="center"
....
/> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-20T14:10:47.343

添加`android:gravity="center_horizontal"`到您的*LinearLayout并将您的**TextView*的**layout_width**更改为`android:layout_width="wrap_content"`

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:gravity="center_horizontal"
    android:background="@drawable/carefreebgscaledalphajpg" >

    <TextView
        android:id="@+id/textviewdatefornocallspage"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:text="You have no calls for "
        android:textSize="25sp" />

</LinearLayout> 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-11-20T14:13:28.587

将 textview 的宽度设置为`wrap_content`，并将 LinearLayout 设置为

```
android:gravity="center_horizontal" 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-06-19T22:31:55.277

其他答案都不适合我。我不得不使用`android:textAlignment="center"`

我的布局如下

```
<LinearLayout...
    <RelativeLayout...
        <RelativeLayout....
            <TextView
                android:layout_centerInParent="true"
                android:textAlignment="center" 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-11-20T14:17:16.300

如果在线性布局中您的方向垂直，则可以将 textview 放在“水平中心”中`android:layout_gravity="center"`。要使 textview 垂直居中，您需要将 textview 的 layout_height 设置为 match_parent 并将 android:gravity 设置为“center”。如果你想在这个布局中使用多个视图，你应该使用 RelativeLayout 和 set `android:layout_centerInParent="true"`。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-11-20T14:14:07.073

听起来你想要`android:layout_gravity`TextView

请参阅文档：[developer.android.com](http://developer.android.com/reference/android/widget/LinearLayout.LayoutParams.html#attr_android%3alayout_gravity)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2022-01-02T07:09:49.933

将你的 texteView 居中在 RelativeLayout ：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout 
xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".MainActivity">

<TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerVertical="true"
    android:layout_centerHorizontal="true"
    />

</RelativeLayout> 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-07-17T09:48:43.033

`android:gravity="center"`在您的线性布局中设置

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-11-17T12:25:01.230

```
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    tools:context=".view.fragments.FragmentAncRecords">

    <TextView
        android:id="@+id/tvNoDataFound"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:fontFamily="@font/poppins_regular"
        android:visibility="visible"
        android:gravity="center"
        android:text="@string/no_record_available"
        />

    <androidx.recyclerview.widget.RecyclerView
        android:id="@+id/rvAncRecords"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:visibility="gone"
        app:layoutManager="androidx.recyclerview.widget.LinearLayoutManager" />

</LinearLayout> 
```

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2012-11-20T14:22:27.743

使用相对布局，它总是提供更准确和灵活的布局

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<ImageView
    android:id="@+id/imageView"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerInParent="true"
    android:src="@drawable/ic_launcher" />
</RelativeLayout> 
```

# python - Csv 的 Python 打印行删除了双引号

> ID：13474987
> 
> 赞同：0
> 
> 时间：2012-11-20T14:08:36.070
> 
> 标签：python, csv

当我打印该行时，它会删除双引号，例如这个 csv：

a, "b", c

打印像

```
['a', 'b', 'c'] 
```

但我想打印

```
['a', '"b"', 'c'] 
```

Python：

```
import csv

f_in  = csv.reader (open('source.csv', 'rb'), quotechar='"')

fields = []

for line in f_in:
    fields.append(line)

    print line 
```

有任何想法吗？

谢谢

编辑：删除 quotechar='"' 并没有改变任何东西

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T14:18:11.010

要将引用字符视为常规字符，请使用[`quoting=csv.QUOTE_NONE`](http://docs.python.org/2/library/csv.html#csv.QUOTE_NONE)

```
import csv

f_in  = csv.reader (open('source.csv', 'rb'), quoting=csv.QUOTE_NONE)

fields = []

for line in f_in:
    fields.append(line)

    print line 
```

# c++ - cin >> 以较大的数字失败，但适用于较小的数字？

> ID：13474989
> 
> 赞同：3
> 
> 时间：2012-11-20T14:08:39.140
> 
> 标签：c++, cin

为什么会`cin`失败，当我输入如下数字时： 3999999999 但它适用于较小的数字，如： 5 ？

```
#include <iostream>

int main()
{
    int n;
    std::cin >> n;
    if (std::cin.fail())
        std::cout << "Something sucks!";
    else  
        std::cout << n;

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-20T14:13:52.300

尝试：

```
std::cout << std::numeric_limits<int>::max() << std::endl; // requires you to #include <limits> 
```

`int`在您的系统上可能是一个 32 位有符号二进制补码，这意味着它可以表示的最大值是 2,147,483,647。您的数字 3,999,999,999 大于该数字，无法正确表示为`int`。`cin`失败，提醒您问题。

`long`可能是您系统上的 64 位整数，如果是，请尝试。您需要一个 64 位整数来表示 3,999,999,999。或者，您可以使用`unsigned int`，它可以表示大至 4,294,967,295 的数字（同样，在典型系统上）。当然，这意味着你不能代表负数，所以这是一个权衡。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T14:19:50.320

当格式化的输入函数以某种形式失败时，它们会设置`std::ios_base::failbit`并保持参数中的原始值不变。有不同的故障，溢出被认为是一种故障。我记得关于以不同方式指示不同错误的讨论，但我不记得结果。最好的办法是确保`errno`在调用任何输入函数之前清除它并检查`errno`以`ERANGE`区分溢出和格式错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T14:14:01.987

这可能是因为 big 值太大而无法放入`int`系统上的类型变量中。尝试将大值分配给您的变量，看看会发生什么。

要修复它，请将变量的类型更改为更广泛的类型，例如`long`or `long long`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T14:14:08.083

an 可表示的最大数`int`取决于它所表示的位数。通常，它是 32 位的，即。最大数字是`2147483647`，小于您输入的数字。

# ruby-on-rails-3 - 嵌套资源，在与“创建”表单相同的页面上列出同级

> ID：13474994
> 
> 赞同：1
> 
> 时间：2012-11-20T14:08:56.893
> 
> 标签：ruby-on-rails-3, exception, activerecord, nested

我有一个嵌套资源，与您在博客上找到的“帖子”/“评论”关系没有什么不同。

在帖子的#show 事件中，我显示了一个新评论表单，其下方是该帖子的所有先前评论。

我在控制器中的 #show 方法如下所示：

```
def show
    @post = Post.find(params[:id])
    @comment = @post.comments.build 
```

现在，问题在于我的@page.comments 集合中有一个空的、未保存的实体。因此，当我列出评论并做类似的事情时，在我看来。

```
<%= comment.created_at.strftime("%a, %d %b %Y %H:%M:%S") %> 
```

我抛出异常：

```
undefined method `strftime' for nil:NilClass 
```

我试图通过切换我的#show 控制器来纠正这个问题，这样它就不会通过 post 对象限定新评论的范围，但是如果我被重定向回带有验证错误的表单，我仍然会遇到同样的问题。

任何人都可以提供一些建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T20:52:37.420

我也有同样的问题。似乎没有一种合法的方式来通过集合构建子对象而不实际将其添加到集合中。

所以而不是：

```
@post = Post.find(params[:id])
@comment = @post.comments.build 
```

我愿意：

```
@post = Post.find(params[:id])
@comment = Comment.new(:post => @post) 
```

它以相同的方式构建子对象，但不会将其添加到父集合中，因此您的列表构建时不会出错。这不是我想要的方式，但它似乎是通过对工作流程进行最少更改来完成相同事情的最佳方式。

# windows-runtime - 从页面资源访问命名控件

> ID：13474998
> 
> 赞同：0
> 
> 时间：2012-11-20T14:09:07.617
> 
> 标签：windows-runtime, winrt-xaml

我需要访问没有指定宽度的边框的实际宽度。有人告诉我，我不能在 WinRT 上这样做，所以我使用了 Florian-Gl 的代理（来自[这里](https://stackoverflow.com/questions/13077585/how-to-databind-control-height-to-another-controls-height)）。

问题是我需要在页面资源上创建该代理，如下所示：

```
<Page.Resources>
    <utils:ActualSizePropertyProxy Element="{Binding ElementName=noteBorder}" x:Name="proxy" />
</Page.Resources> 
```

问题是我无法从资源中访问该 noteBorder 元素，但我可以访问page 本身的*pageRoot 。*

我想我可以使用 ElementName / Path 来访问 noteBorder。

但是有一些奇怪的东西：

结构类似于：

```
Page (pageRoot) > Grid > ListView > ListView.ItemTemplate > Grid > Border (noteBorder) 
```

因此，如果我在边界的同一级别创建代理，它不会运行，但如果我将 ListView 更改为 ItemsControl，它将按预期运行和工作。

如果将它放在边框的同一级别，我将*ElementName*更改为*pageRoot*它至少会运行。

因此，如果我使用 ListView，如果我放置 noteBorder（即使我可以访问它），它也不会运行，但会在 ItemsControl 上工作，另一方面，如果我有*pageRoot*，它会以所有方式工作。

所以问题是：有没有办法从资源中访问*noteBorder*？或者也许是一种从另一个地方访问它但工作的方法：P

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T13:32:15.723

您应该使用项目模板-当您到达 pageRoot) > Grid > ListView 或 Items Control

在结构中的这一点上，您位于您真正想要获得的元素，它是需要您尝试访问的边框的项目的容器。

您应该定义一个项目模板并通过绑定分配 ListView（或 ItemsControl）的 ItemTemplate 属性。

```
<ListView x:Name="myListView" DataContext="{Binding ToElementIfNotInheritedFromParent}" ItemsSource="{Binding ViewModelListBeingBoundTo}" ItemTemplate="{Binding Source={Static Resource MyCustomItemTemplate}}" /> 
```

MyCustomItemTemplate 类似于

```
 <DataTemplate x:Name="MyCustomItemTemplate">
   <Border x:Name="myBorder" >
     <StackPanel>
       <TextBlock Text="{Binding Path=Title}" />
       <TextBlock Text="{Binding Path=FirstProperty}"/>
       <TextBlock Text="{Binding Path=SecondProperty}"/>
     </StackPanel>
   </Border>
 </DataTemplate> 
```

然后在您的 Codebehind 中（或者如果 ViewModel 使用后面的代码将 ListView 对象传递给 ViewModel）

```
DataTemplate dt = this.myListView.Items[indexOfChoice].ItemTemplate as DataTemplate;
Border b = dt.LoadContent() as Border;
int actualWidth = b.AcutalWidth 

OR

You can create a FindControl() method that runs recursively to extract the actual control within the border, for instance if you wanted to access one of the Textboxes. 
```

代码在这里： [http ://social.msdn.microsoft.com/Forums/en-US/wpf/thread/a612f5a6-e05e-4b68-a813-893eeda159cc](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/a612f5a6-e05e-4b68-a813-893eeda159cc)