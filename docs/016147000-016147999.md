# StackOverflow 问答 16147000-16147999

# html - django 为未选中的复选框保存一个值

> ID：16147009
> 
> 赞同：1
> 
> 时间：2013-04-22T12:22:34.627
> 
> 标签：html, django, python-2.7

**//我的模板//**

```
 <tr>
      <td><input  type="text" name="language1" id="language1" /></td>
      <td><input  type="checkbox" name="read1" id="read1" value="yes" /></td>
      <td><input  type="checkbox" name="write1" id="write1" value="yes" /></td>
      <td><input  type="checkbox" name="speak1" id="speak1" value="yes" /></td>
    </tr>
    <tr>
      <td><input  type="text" name="language1" id="language1" /></td>
      <td><input  type="checkbox" name="read1" id="read1" value="yes" /></td>
      <td><input  type="checkbox" name="write1" id="write1" value="yes" /></td>
      <td><input  type="checkbox" name="speak1" id="speak1" value="yes" /></td>
    </tr> 
```

如果选中该复选框，我想将 yes 保存到我的数据库中，

如果未选中该复选框，我想将 no 保存到数据库中，..

怎么做？

**编辑**

```
def edit_other_info(request):
    if request.method == "POST":

        user = request.POST.get('user_id')

        language1 = request.POST.get('language1')
        read1 = request.POST.get('read1')
        write1 = request.POST.get('write1')
        speak1 = request.POST.get('speak1')

        language2 = request.POST.get('language2')
        read2 = request.POST.get('read2')
        write2 = request.POST.get('write2')
        speak2 = request.POST.get('speak2')
        p=language(user_id=user,language1=language1,read1=read1,write1=write1,
        speak1=speak1,language2=language2,read2=read2,write2=write2,speak2=speak2)
        p.save()

        return HttpResponseRedirect('/accounts/Profile/')
    else:

        details1 = language.objects.filter(user_id=request.user.id)
        return render_to_response('registration/language.html', {"details":details, "details1":details1}, context_instance=RequestContext(request)) 
```

提前致谢..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T12:36:10.100

测试复选框 id 是否在 post 参数中，如下所示：

```
def myview(request):
   if request.method == 'POST':
      read1_val = "read1" in request.POST
      MyModel(read1=read1_val).save() 
```

如果它在那里，那就是“是”。如果它不在那里，那就是“不”。

更多[在这里](https://stackoverflow.com/questions/6223149/django-post-checkbox-data)，[这里](https://stackoverflow.com/questions/4470833/how-to-get-checkbox-value-in-django)和[这里](https://stackoverflow.com/questions/2417127/how-do-i-get-the-values-of-all-selected-checkboxes-in-a-django-request-post)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T12:01:14.947

如果您为所有复选框提供一个通用名称，则可以使用检索该值

```
options = request.POST.getlist('name') 
```

如果未检查任何内容，则返回一个空列表。

# ios - OpenGL内存管理

> ID：16147011
> 
> 赞同：1
> 
> 时间：2013-04-22T12:22:39.353
> 
> 标签：ios, memory-management, buffer, opengl-es-2.0, textures

我创建了一个 iOS 应用程序，在其中使用 GLKViews 来实现 OpenGL 环境。现在一切都按预期工作，我注意到一旦我重新实例化视图大约三倍，我就会收到大量内存分配和内存警告。在初始化时，我加载这样的纹理：

```
 NSDictionary * options = [NSDictionary dictionaryWithObjectsAndKeys:
                              [NSNumber numberWithBool:YES],
                              GLKTextureLoaderOriginBottomLeft,
                              nil];

    NSError *error;
    topTexture = [GLKTextureLoader textureWithCGImage:[self imageWithView:v].CGImage options:options error:&error];
    if (error) {
        NSLog(@"Error loading texture from image: %@",error);
    } 
```

并在 GLKView 像这样消失时删除它们（和缓冲区）：

```
-(void)cleanUp{

    if(vertexArray != 0){
        glDeleteBuffers(1, &vertexArray);
        vertexArray = 0;
    }

    if( texArray != 0){
        glDeleteBuffers(1, &texArray);
        texArray = 0;
    }

    GLuint fT = frontTexture.name;
    glDeleteTextures(1, &fT);

    GLuint lT = leftTexture.name;
    glDeleteTextures(1, &lT);

    GLuint rT = rightTexture.name;
    glDeleteTextures(1, &rT);

    GLuint baT = backTexture.name;
    glDeleteTextures(1, &baT);

    GLuint boT = bottomTexture.name;
    glDeleteTextures(1, &boT);

    GLuint tT = topTexture.name;
    glDeleteTextures(1, &tT);

} 
```

这就是它们的绘制方式：

```
-(void)draw{

    [self.effect prepareToDraw];

    self.effect.texture2d0.enabled = YES;

    for(int i=0;i<6;i++){

        if(i==0)glBindTexture(GL_TEXTURE_2D, frontTexture.name);
        if(i==1)glBindTexture(GL_TEXTURE_2D, rightTexture.name);
        if(i==2)glBindTexture(GL_TEXTURE_2D, backTexture.name);
        if(i==3)glBindTexture(GL_TEXTURE_2D, leftTexture.name);
        if(i==4)glBindTexture(GL_TEXTURE_2D, bottomTexture.name);
        if(i==5)glBindTexture(GL_TEXTURE_2D, topTexture.name);
        glDrawArrays(GL_TRIANGLES, i*6, 6);
    }

} 
```

尽管如此，当我观察分配时，实时字节在实例化时会增加 2 MB。然后，当我删除视图时，实时字节保持不变。因此，似乎创建的 2MB 从未被释放。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-05T19:24:13.790

我假设您正在使用 ObjectAlloc 进行测试，我认为 ObjectAlloc 不会看到与 OpenGLES 相关的内存，内存监视器更适合此测试。

此外，不能保证在调用 glDeleteTextures 时内存会被释放。司机可以稍后推迟。

您应该使用 glFinish 使您的测试更准确。

有关详细信息，请参阅 zoul 的帖子：[了解 iPhone 上的内存消耗](https://stackoverflow.com/questions/363493/understanding-the-memory-consumption-on-iphone)

# php - Defaultscope() 和 Beforefind() 之间的区别？

> ID：16147013
> 
> 赞同：1
> 
> 时间：2013-04-22T12:22:43.363
> 
> 标签：php, yii

我有一个 defaultScope 的代码：

```
public function defaultScope()
{
    $currentdb  = explode('=', Yii::app()->db->connectionString);

    return array(
         'condition'=> "tenant=:tenant",
         'params' => array(":tenant"=>$currentdb[2]));
} 
```

而此代码为 Beforefind：

```
public function beforeFind() {
    $currentdb  = explode('=', Yii::app()->db->connectionString);
    $criteria = new CDbCriteria;
    $criteria->condition = "tenant=:tenant";
    $criteria->params = array(":tenant"=>$currentdb[2]);

    $this->dbCriteria->mergeWith($criteria);
    parent::beforeFind();
} 
```

我在这两个函数中都得到了相同的结果。哪个功能更好，为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T13:14:40.247

我认为两者都可以完成你想要的，但对我来说最好的用法是使用范围。在 yii 指南中，我们可以找到以下范围定义：

> 命名范围表示可以与其他命名范围组合并应用于活动记录查询的命名查询条件。

这就是您想要做的：在执行查询之前应用一些查询条件。既然您希望在每个查询中添加这些条件，那么`defaultScope`就是要走的路！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-03T15:10:56.530

我不同意。我有一个包含多个用户记录的数据库，我试图过滤那些应该只对当前用户可见的记录。我今天在试图解决这个问题时遇到了困难，`defaultScope`我发现这`beforeFind`是在这种情况下要走的路。问题可以归结为`beforeFind`似乎没有用于关系的事实`defaultScope`。这意味着当您在`defaultScope`对象中应用条件时，您会遇到困难，因为在连接中应用条件的顺序会急切地加载类似条件的关系。

[让我试着用Yii 的博客指南](http://www.yiiframework.com/doc/guide/1.1/en/database.ar)来解释一下：当我们只想要当前作者的帖子时，我们可以这样写`defaultScope`：

```
$c = new CDbCriteria();
$c->with('author');
$c->addInCondition('author.author_id', array(1,2,3));
return $c; 
```

使用 时`$post->author`，我们会发现`author.author_id`在 author 定义为 join 之前已应用。这不是最好的例子，但是当你的关系中有两个以上的连接时，你会发现自己遇到了这些问题。

因此，我建议使用`beforeFind`而不是`defaultScope`.

# ios - 如何在iOS中用动画隐藏UITableView的删除按钮？

> ID：16147014
> 
> 赞同：0
> 
> 时间：2013-04-22T12:22:43.567
> 
> 标签：ios, uitableview, hide, swipe

我正在使用这种笔记应用程序，我想添加滑动删除选项（如 iPhone 的默认笔记应用程序）。我实现了以下两种表格视图方法..

```
- (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath
{
    return YES;
}

- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (editingStyle == UITableViewCellEditingStyleDelete)
    {
        //Action to delete value of the cell
    }
} 
```

除了动画，一切都很好。在滑动动作上显示删除按钮会发生在动画中，而隐藏它（通过点击或滚动表格视图）不会发生在动画中。删除按钮立即消失了。

我可以用动画显示删除按钮的隐藏过程吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T12:30:38.800

为了完全控制自定义单元格中的编辑，您应该覆盖 UITableViewCell 子类中的 willTransitionToState 方法并检查状态掩码

```
- (void)willTransitionToState:(UITableViewCellStateMask)state
{
    NSString *logStr = @"Invoked";
    if ((state & UITableViewCellStateShowingEditControlMask)
        != 0) {
        // you need to move the controls in left
        logStr = [NSString stringWithFormat:@"%@
                  %@",logStr,@"UITableViewCellStateShowingEditControlMask"];
    }
    if ((state & UITableViewCellStateShowingDeleteConfirmationMask)
        != 0) {
        // you need to hide the controls for the delete button
        logStr = [NSString stringWithFormat:@"%@
                  %@",logStr,@"UITableViewCellStateShowingDeleteConfirmationMask"];
    }
    NSLog(@"%@",logStr);
    [super willTransitionToState:state];
} 
```

**编辑：**

你试过了吗：

setEditing:animated：切换接收器进入和退出编辑模式。

*   (void)setEditing:(BOOL)editing animated:(BOOL)animated 参数编辑 YES 进入编辑模式，NO 离开。默认值为 NO 。动画 YES 为插入/删除控件和重新排序控件的出现或消失设置动画，NO 使过渡立即进行。讨论 当你在editing的值设置为YES的情况下调用这个方法，并且UITableViewCell对象被配置为有控件时，单元格会在每个单元格的左侧显示一个插入（绿色加号）或删除控件（红色减号）和一个在右侧重新排序控件。当调用 UITableView 的 setEditing:animated: 方法时，每个可见单元格都会调用此方法。在编辑设置为 NO 的情况下调用此方法会从单元格中删除控件。

可用性 适用于 iOS 2.0 及更高版本。另见 @property 编辑在 UITableViewCell.h 中声明

# android - 在android中更改每一行的颜色

> ID：16147017
> 
> 赞同：1
> 
> 时间：2013-04-22T12:23:04.300
> 
> 标签：android, colors, textview

嗨，我使用了以下代码：

```
String displayText = "";
    try {
        InputStream fileStream = getResources().openRawResource(
                            R.raw.t);
        int fileLen = fileStream.available();
        // Read the entire resource into a local byte buffer.
        byte[] fileBuffer = new byte[fileLen];
        fileStream.read(fileBuffer);
        fileStream.close();
        displayText = new String(fileBuffer);
        } catch (IOException e) {
          // exception handling
        }

    TextView tv=(TextView) findViewById(R.id.textView1);
    tv.setText(displayText);

} 
```

它用于显示文本文件。我想改变每条线的颜色（并改变线之间的颜色）我应该怎么做？

我很抱歉说英语不好

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T12:57:35.407

我建议你使用 html 在你的 textview 中设置颜色。一个在两种颜色之间交换的小例子：

```
String textcontent = ""; 
String[] lines;
//something like "lines = displayText.split("\n")" or however you stored line returns
for (int i = 0; i < lines.length; i++) {
    //odd line numbers are red, the even ones green
    textcontent += "<font color=\"" + (i%2==0?"red":"green") + "\">" + lines[i] + "</font><br/>";
}
TextView tv=(TextView) findViewById(R.id.textView1);
tv.setText(Html.fromHtml(textcontent)); 
```

我希望这会有所帮助，否则请随时要求更多...

# list - 在 WRITE 语句中使用颜色变量

> ID：16147019
> 
> 赞同：5
> 
> 时间：2013-04-22T12:23:05.537
> 
> 标签：list, colors, abap

如何使用颜色值变量？例如，这对我有用：

```
write:/10  'test' COLOR COL_HEADING. 
```

我认为颜色是整数，所以我尝试了：

```
data:
gv_mycolor type I.
gv_mycolor = 5.
write:/10  'test' COLOR gv_mycolor. 
```

第二个代码给了我一个错误：“颜色 gv_mycolor 不是预期的；只允许 1 到 7 或相关的颜色 ID。声明

```
FORMAT COLOR = gv_mycolor. 
```

对我有用，我只是写语句有问题。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-24T05:51:34.020

```
DATA colour TYPE i VALUE 2.

WRITE:/10  'test' COLOR = colour . 
```

你必须使用等号，这就是它的全部内容...... ABAP，这是有趣的陈述：P

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T20:58:02.217

Edit: First part of the answer is hidden as it is incorrect - see Vlad's comment & answer

> **Short answer to your question:** The syntax does not allow you to do this as per the compiler message. The best you can do is to combine the FORMAT and WRITE statements in a macro, but this is very old-school, and will probably not teach you too much that is relevant.

Have a look at package SLIS where there are many examples (`BCALV_GRID*`) of how to implement ALV lists and grids. These are used much more frequently, even in Web Dynpro. The `CL_SALV*` classes also provides a nice simplified (and supported) interface to implement ALV grids. (See [this answer](https://stackoverflow.com/a/6575989/25687) for a full example).

# c++ - 读取文件时的编译器优化

> ID：16147022
> 
> 赞同：1
> 
> 时间：2013-04-22T12:23:17.350
> 
> 标签：c++, compiler-optimization, fread

我开始编写一个应该读取大型二进制文件（几千兆字节）的 c++ 程序。作为开始，我的程序只是`fread()`在一个循环内读入一个双精度数组：

```
double *arr = (double*)malloc(sizeof(double) * ARRSIZE);
FILE *fp = fopen(argv[1], "r");
int num_read;
do {
    num_read = fread(arr, sizeof(double), ARRSIZE, fp);
} while (num_read > 0);
free(arr); 
```

我想看看我的程序的吞吐量，但我发现我可以在大约半秒内读取 2 GB。`fread()`如果我没有对数据做任何事情，是否有任何编译器优化可能忽略了调用？

如果有，我如何确定我看到了我的程序的实际最大吞吐量？

谢谢！

# iphone - 如何在返回运行循环之前刷新显示

> ID：16147024
> 
> 赞同：0
> 
> 时间：2013-04-22T12:23:17.950
> 
> 标签：iphone, ios, objective-c

我正在尝试通过调用`drawRect:`或添加出现在前台的视图来在前台显示消息。消息必须在按下按钮后显示。我注意到只有在按下按钮时调用的函数退出时才会显示该消息。

```
- (IBAction)testBtnPress:(id)sender {
    TestView *testView = [[TestView alloc] initWithFrame:self.view.frame];
    [self.view addSubview:testView];
    // processing to be done while the message is displayed
} 
```

在类`drawRect:`中调用`TestView`。待处理完成后显示带有消息的矩形，这对我的应用程序不方便。有没有办法在处理运行时显示消息（消息将是“处理中...请稍候”）。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T12:38:07.227

处理必须在后台线程中完成，或者在运行循环的*下*一次迭代中执行，以便为您的 UI 更改提供处理时间。

您可以使用以下方式在 runloop 的下一次迭代中进行处理：

```
TestView *testView = ... ;

[[NSOperationQueue mainQueue] addOperationWithBlock:^{
    // processing to be done while the message is displayed
}]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T12:27:44.117

这应该有效：

```
dispatch_async(dispatch_get_main_queue(), ^{
    TestView *testView = [[TestView alloc] initWithFrame:self.view.frame];
    [self.view addSubview:testView];
}); 
```

# html - 关键帧动画仅适用于 chrome/chromium

> ID：16147026
> 
> 赞同：1
> 
> 时间：2013-04-22T12:23:19.010
> 
> 标签：html, css, css-animations

我做了一个简单的三图像过渡动画代码。代码可以在这里找到：

`http://jsfiddle.net/harshithjv/AF3Jj/`

此代码仅适用于 chrome 和 chromium 浏览器。它也不适用于 Apple 的 Safari 浏览器。它也不适用于任何其他浏览器（我在 Firefox 和 IE9 上测试过，没有尝试过 Opera）。

我想我在`animation`速记属性上遗漏了一些东西。请帮帮我。

* * *

**编辑：**

为了清楚起见，我正在更新代码，这是我应该首先完成的。

**HTML 代码：**

```
<div class="animated_star"></div> 
```

**CSS3 代码：**

```
@-moz-keyframes shining_star {
    from {
        background-image: url('http://findicons.com/icon/download/162253/star_grey/16/ico');
    }
    50% {
        background-image: url('http://findicons.com/icon/download/181769/star_half/16/ico');
    }
    to {
        background-image: url('http://findicons.com/icon/download/159919/star/16/ico');
    }
}

@-webkit-keyframes shining_star {
    from {
        background-image: url('http://findicons.com/icon/download/162253/star_grey/16/ico');
    }
    50% {
        background-image: url('http://findicons.com/icon/download/181769/star_half/16/ico');
    }
    100% {
        background-image: url('http://findicons.com/icon/download/159919/star/16/ico');
    }
}

@keyframes shining_star {
    from{
        background-image: url('http://findicons.com/icon/download/162253/star_grey/16/ico');
    }
    50% {
        background-image: url('http://findicons.com/icon/download/181769/star_half/16/ico');
    }
    to {
        background-image: url('http://findicons.com/icon/download/159919/star/16/ico');
    }
}
.animated_star{
    height: 16px;
    width: 16px;
    float: left;
    -webkit-animation: shining_star 1s infinite; /* works only for Chrome/Chromium */
    -moz-animation: shining_star 1s infinite;
    animation: shining_star 1s infinite;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T13:08:41.697

背景图像不是可以动画的属性 - 您不能对属性进行补间。

相反，尝试使用 position:absolute 将所有图像叠加在一起，然后将所有图像的不透明度设置为 0，除了你想要重复的那个。

还

它适用于 Chrome 19！

所以在未来的某个时候，关键帧可能真的是……帧！

你生活在未来;)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T05:37:13.663

在对此进行了一些研究之后，我发现大多数浏览器`background-image`不支持 CSS 属性。`keyframes`这一定是因为如果加载较大的图像，动态加载太多图像会导致性能问题。

感谢*@Morpheus*提供另一个**stackoverflow**链接（`http://stackoverflow.com/questions/7318462/changing-background-image-with-css3-animations`），通过它我决定通过**图像精灵**解决问题，并在该精灵中重新定位（使用CSS 属性- `background-position`）来选择我想要的图像。`background-position`CSS 属性的问题在于，当它通过关键帧应用 CSS 动画时，重新定位显示图像精灵内的移动。但我想在三帧中快速显示 3 颗星的过渡而不移动。为了实现这一点，我必须使用 6 个关键帧，其中第一颗星的位置设置为 0% 和 33%，第二颗星的位置设置为 34% 和 66%，第三颗星的位置设置为 67% 和 100% .

我创建了一个`jsFiddle`没有相同星星的图像精灵。我无法在网上找到相同星星的精灵，所以我使用了备用星星。它不是一个完美的例子，因为它有草率的动画，但我`48px x 16px`在我的系统上创建了一个较小的精灵图像（），动画看起来足够好。

**HTML 代码：**

```
<div class="animated_star"></div> 
```

**CSS 代码：**

```
@-moz-keyframes shining_star {
    0% { background-position: -135px 0px; }
    33% { background-position: -135px 0px; }
    34% { background-position: -135px -260px; }
    66% { background-position: -135px -260px; }
    67% { background-position: -270px -260px; }
    100% { background-position: -270px -260px; }
}

@-webkit-keyframes shining_star {
    0% { background-position: -135px 0px; }
    33% { background-position: -135px 0px; }
    34% { background-position: -135px -260px; }
    66% { background-position: -135px -260px; }
    67% { background-position: -270px -260px; }
    100% { background-position: -270px -260px; }
}

@keyframes shining_star {
    0% { background-position: -135px 0px; }
    33% { background-position: -135px 0px; }
    34% { background-position: -135px -260px; }
    66% { background-position: -135px -260px; }
    67% { background-position: -270px -260px; }
    100% { background-position: -270px -260px; }
}

.animated_star{
    height: 130px;
    width: 135px;
    float: left;
    background: transparent url('http://azmind.com/wp-content/uploads/2011/11/social-star-icons.png') no-repeat fixed;
background-position: 0px -390px;
    -webkit-animation: shining_star .5s infinite linear; 
    -moz-animation: shining_star .5s infinite linear;
    animation: shining_star .5s infinite linear;
} 
```

`jsFiddle`链接： http : [//jsfiddle.net/harshithjv/7QvSP/2/](http://jsfiddle.net/harshithjv/7QvSP/2/)

# sphinx - 狮身人面像形态 stem_en 不起作用

> ID：16147029
> 
> 赞同：3
> 
> 时间：2013-04-22T12:23:24.460
> 
> 标签：sphinx, stemming

我有一个单字段 Sphinx 索引，其词干设置如下：

```
index main_sphinxalert
{
            # Options:
            type = rt
            path = /var/lib/sphinxsearch/data/main_sphinxalert
            morphology = stem_en

            # Fields:
            rt_field = query
} 
```

然后我插入：

```
mysql> INSERT INTO main_sphinxalert VALUES(201,'tables');
Query OK, 1 row affected (0.00 sec) 
```

并选择：

```
mysql> SELECT * FROM main_sphinxalert WHERE MATCH('tables');
+------+--------+
|  id  | weight |
+------+--------+
| 201  |  1709  |
+------+--------+
1 row in set (0.00 sec) 
```

但不能在词干上选择：

```
mysql> SELECT * FROM main_sphinxalert WHERE MATCH('table');
Empty set (0.00 sec) 
```

谁能告诉我什么给了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T13:14:52.030

事实证明，Sphinx 在创建实时索引后不会读取对配置文件的修改：[有关信息，请参见此处。](http://www.sphinxconnector.net/Tutorial/IntroductionToRealTimeIndexes)

解决这个问题的方法是：

```
sudo service sphinxsearch stop 
```

然后删除所有索引文件（对我来说`/var/lib/sphinxsearch/data/`）：

```
sudo rm main_sphinxalert.* 
```

然后重启服务：

```
sudo service sphinxsearch start 
```

这意味着您丢失了现有索引，然后必须从数据库手动重建。

# jakarta-mail - 使用 sendgrid XSMTPAPI 标头在邮件中提供取消订阅链接

> ID：16147030
> 
> 赞同：4
> 
> 时间：2013-04-22T12:23:29.513
> 
> 标签：jakarta-mail, sendgrid

谁能告诉我如何在通过修改标头发送的邮件中添加取消订阅链接。我使用的是 Sendgrid 标头 XSMTPAPI，虽然我在过滤器中找到了一个名为订阅跟踪的相关标头，但不知道如何用它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T17:16:15.400

您可能希望有一个在`X-SMTPAPI`拆分时看起来像这样的标题：

```
{ 
  filters: { 
    subscriptiontrack: { 
      settings: { 
        enable: 1,
        "text/html": "Unsubscribe <%Here%>", 
        "text/plain": "Unsubscribe Here: <% %>" 
      } 
    } 
  }
} 
```

发送请求时，请确保对标头的 JSON 进行字符串化：

```
X-SMTPAPI: '{"filters":{"subscriptiontrack":{"settings":{"enable":1,"text/html":"Unsubscribe <%Here%>","text/plain":"Unsubscribe Here: <% %>"}}}}' 
```

* * *

此外，作为旁注，所有这些都可以在`X-SMTPAPI`标题的文档页面上找到：

*   [http://sendgrid.com/docs/API_Reference/SMTP_API/index.html](http://sendgrid.com/docs/API_Reference/SMTP_API/index.html)
*   [http://sendgrid.com/docs/API_Reference/SMTP_API/apps.html](http://sendgrid.com/docs/API_Reference/SMTP_API/apps.html)

# attributes - Hyperjaxb/lombok：如何强制 Hyperjaxb 在属性而不是方法上生成注释映射？

> ID：16147032
> 
> 赞同：0
> 
> 时间：2013-04-22T12:23:41.087
> 
> 标签：attributes, annotations, lombok, hyperjaxb

我想在我的属性上添加 jpa 注释，而不是在 getter 和 setter 上。可以为此配置 hyperjaxb 吗？

我想要这个，因为我使用 lombok 是为了避免 getter 和 setter 代码，并且在属性上方有“@getter”“@setter”。

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T21:26:24.450

目前不支持开箱即用（如果您需要此功能，请提出问题）。

但是，您可以通过编写和覆盖您自己的`org.jvnet.hyperjaxb3.ejb.strategy.annotate.AnnotateOutline`. 有关覆盖策略的示例，请参见[https://svn.java.net/svn/hj3~svn/trunk/ejb/tests/custom-naming/ 。](https://svn.java.net/svn/hj3~svn/trunk/ejb/tests/custom-naming/)

但请注意，Hyperjaxb 必须使用 getter/setter 来解决一些 JAXB/JPA 不兼容问题（例如 JPA 不支持的简单类型）。如果您在字段上添加注释，这将不起作用。

# reporting-services - 报表生成器 3 中的列表报表 - 可以并排显示吗？

> ID：16147035
> 
> 赞同：1
> 
> 时间：2013-04-22T12:23:45.320
> 
> 标签：reporting-services, ssrs-2008

报告生成器 3 中的列表报告可以并排而不是从上到下吗？如果可以，我可以在哪里进行更改。

编辑---根据我在网上找到的内容，我必须按照报纸专栏的方式做一些事情，可以用外行的方式解释如何做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T15:02:41.530

这绝对是可能的，但不是默认提供的。首先，我们需要了解选择 List 时 SSRS 会创建什么，然后在列级别而不是行级别执行类似的操作。

当你创建一个 List 时，这实际上是一个 Tablix，它有一行、一列和一个 TextBox，TextBox 中嵌入了一个 Rectangle。由于它是一个 Rectangle，因此您可以将 Rectangle 中的任何元素嵌入到所需位置以实现自由格式列表：

![在此处输入图像描述](https://i.stack.imgur.com/F27tT.png)

您可以看到自动创建了一个组，称为详细信息。这没有组表达式，这意味着它只会对 DataSet 中的每一行重复：

![在此处输入图像描述](https://i.stack.imgur.com/K24Nd.png)

所以一个简单的 List 看起来像这样：

![在此处输入图像描述](https://i.stack.imgur.com/k51Bb.png)

要实现并排列表，我们需要将底层 Tablix 更改为具有与 Details 类似的组，但在列组中。

去做这个：

1.  删除行组详细信息。
2.  添加一个新的列组（名称无关紧要）。创建组时，您必须从 DataSet 中选择一列 - 只需在此处选择任意行。
3.  从新列组中删除组表达式

![在此处输入图像描述](https://i.stack.imgur.com/SUxAU.png)

现在我们在列级别有一个等效的详细信息组。它应该看起来像这样：

![在此处输入图像描述](https://i.stack.imgur.com/rAGpI.png)

运行时，它现在是一个并列的列表，根据需要：

![在此处输入图像描述](https://i.stack.imgur.com/UdfVk.png)

# javascript - 从函数获得响应后如何渲染html页面

> ID：16147038
> 
> 赞同：0
> 
> 时间：2013-04-22T12:23:57.133
> 
> 标签：javascript, html

我想在我的身体负荷上调用一个函数。我想在从函数获得响应后呈现我的 html 页面。例如：

```
<head>
    <script type="text/javascript">
        function welcome(){
            alert("Welcome");
        }
    </script>
</head>
<body onload="welcome()">
    <p>hai</p>
</body> 
```

我希望在警报框中按确定后显示 hai。谁能帮我这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T12:26:20.923

你可以这样做：

```
<head>
    <script type="text/javascript">
        alert("Welcome");
    </script>
</head>
<body>
    <p>hai</p>
</body> 
```

这会在加载正文之前发出警报，然后当您单击“确定”时它会加载正文。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T12:27:18.933

你可以这样做：

```
<html>
<head></head>
<body onload="render()">
<script>
var content = '<h1>Hello, World!</h1>';
function render() {
    var answer = confirm('Do you want to render the page?');
    if (answer) {
        document.body.innerHTML = content;
    }
}
</script>
</body>
</html> 
```

[和现场演示。](http://jsfiddle.net/mgechev/daWbb/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T12:27:39.910

尝试这个

```
<head>
    <script type="text/javascript">
    function welcome(){
        alert("Welcome");
    }
    welcome();
    </script>
</head>

<body>
    <p>hai</p>
</body> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T12:28:19.510

试试这个代码，

```
 <body onload="welcome()">
  <p id='hi'></p>
 <script type="text/javascript">
  function welcome(){
  alert("Welcome");
  document.getElementById('hi').innerHTML='hi';
 }
 </script>
  </body> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-22T12:28:43.597

您可以在正文中添加一个类以使内容不可见，并在调用函数后将其删除..

```
<html>
    <head>
      <script type="text/javascript">
        function welcome(){
            alert("Welcome");
            document.body.className = '';
        }
      </script>
      <style type="text/css">
         .invisible{visibility:hidden;}
      </style>
    </head>
    <body onload="welcome()" class="invisible">
        <p>hai</p>
    </body>
</html> 
```

# objective-c - 为什么在同一个类中定义的函数会被认为是未声明的？如何正确申报？

> ID：16147041
> 
> 赞同：0
> 
> 时间：2013-04-22T12:24:00.163
> 
> 标签：objective-c

我在注释行收到错误“未声明的标识符”：

```
- (BOOL) isInIntArray:(NSInteger[])array theElem:(int)elem{
    int i = 0;
    NSInteger sizeOfArray = (sizeof array) / (sizeof array[0]);
    while(i < sizeOfArray){
        if(array[i] == elem){
            return TRUE;
        }
        i++;
    }
    return FALSE;
}

- (int)getNextUnusedID{
    int i = rand()%34;
    while ([isInIntArray:idsUsed theElem:i]) { //here: Use of undeclared identifier 'isInIntArray'
        i = rand()%34;
    }
    return i;
} 
```

我真的不明白为什么，它们在同一个`.m`文件中。为什么会这样？

另外，这段代码：

```
NSInteger sizeOfArray = (sizeof array) / (sizeof array[0]); 
```

给我警告：

> 数组函数上的 Sizeof 将返回 Sizeof 'NSInteger *' (aka: 'int *') 而不是 'NSInteger[]'"

我应该如何正确确定数组的大小？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T12:27:11.157

您似乎错过了`self`这条线路

```
while ([isInIntArray:idsUsed theElem:i]) 
```

这应该是：

```
while ([self isInIntArray:idsUsed theElem:i]) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T12:41:09.683

正如@CaptainRedmuff 指出的那样，您在方法调用中缺少目标对象，即`self`.

```
//[object methodParam:x param:y];

[self isInIntArray:idsUsed theElem:i]; 
```

* * *

对于您的第二个问题。在*C 语言中*，您无法确定数组的大小。这就是为什么不使用它们的原因，因为我们有这方面的对象。我建议你使用这些：

```
NSMutableArray *array = [[NSMutableArray alloc] init]; // to create array
array[0] = @42; // to set value at index, `@` creates objects, in this case NSNumber
[array insertObject:@42 atindex:0]; // equivalent to the above
NSInteger integer = array[0].integerValue; // get the value, call integerMethod to get plain int
integer = [[array objectAtIndex:0] integerValue]; // equivalent to the above
[array containsObject:@42]; // test if given object is in the array
[array indexOfObject:@42]; // get index of object from array, NSNotFound if not found
array.count; // to get the number of objects 
```

**重要提示：**这些数组的大小是可变的，并且没有限制！但是您只能在索引*0..(n-1)*处访问元素（其中*n*为对象数），并且您只能为索引*0..n*设置值。
换句话说，你不能`array[3] = @42;`为空数组做，你需要先填充前 3 个位置（索引 0、1 和 2）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T12:37:15.727

将其写入 .h 文件（声明函数）

```
 - (BOOL) isInIntArray:(NSInteger[])array theElem:(int)elem; 
```

并使用以下方式调用该方法

```
 while ([self isInIntArray:idsUsed theElem:i]) { //here: Use of undeclared identifier 'isInIntArray'
            i = rand()%34;
    } 
```

# objective-c - 在 UITextView 中只允许字母数字字符

> ID：16147042
> 
> 赞同：2
> 
> 时间：2013-04-22T12:24:01.253
> 
> 标签：objective-c, xcode, uitextview, nscharacterset

无论如何我可以允许用户在文本视图中只输入字母数字字符而不输入其他字符。

**编辑：**

试过了，

```
if ([_txtView.text rangeOfCharacterFromSet:alphaSet].location != NSNotFound)
    {
        UIAlertView* alert = [[UIAlertView alloc] initWithTitle:@"Hello" message:@"Only alpha numeric characters are allowed" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
        [alert show];
        return;

    } 
```

但这仅适用于某些时候

谢谢！！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-22T12:30:00.173

您可以使用 [[[NSCharacterSet alphanumericCharacterSet] reverseSet] 来实现。此方法将返回一个字符集，该字符集仅包含接收器中不存在的字符。

```
NSCharacterSet *charactersToBlock = [[NSCharacterSet alphanumericCharacterSet] invertedSet]; 
```

//符合 UITextField 委托并实现此方法。

```
 - (BOOL)textField:(UITextField *)field shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)characters
 {
    return ([characters rangeOfCharacterFromSet:charactersToBlock].location == NSNotFound);
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T12:31:53.680

为 textview 设置委托并覆盖/实施测试应该在范围方法中更改

```
- (BOOL)textView:(UITextView *)textView shouldChangeTextInRange:(NSRange)range replacementText:(NSString *)text 
{
     NSCharacterSet *alphaSet = [NSCharacterSet alphanumericCharacterSet];
     BOOL valid = [[text stringByTrimmingCharactersInSet:alphaSet] isEqualToString:@""];
     return valid;    
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T12:28:09.390

尝试这个：

```
 - (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string {
            if (textField == txtWebsite) {
                    NSCharacterSet *set = [NSCharacterSet characterSetWithCharactersInString:@"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890 "];

                    if ([string rangeOfCharacterFromSet:set].location != NSNotFound) {
                        return YES;
                    }
                    else {
                        return NO;
                    }
            }
            else {
                    return YES;
            }
    } 
```

在 uitextfield 的委托方法中编写代码。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-09-06T19:37:08.037

@user1113101 提供的答案的等效 Swift 3 版本

虽然现在回答已经晚了，还有其他简单而伟大的方法，但这个答案可能对某人有用。

这很简单，对我来说就像一个魅力。

```
func textView(_ textView: UITextView, shouldChangeTextIn range: NSRange, replacementText text: String) -> Bool {
    /// 1\. replacementText is NOT empty means we are entering text or pasting text: perform the logic
    /// 2\. replacementText is empty means we are deleting text: return true
    if text.characters.count > 0 {
        var allowedCharacters = CharacterSet.alphanumerics

        let unwantedStr = text.trimmingCharacters(in: allowedCharacters)
        return unwantedStr.characters.count == 0
    }

    return true
} 
```

注意：这也适用于将字符串粘贴到文本字段中。如果粘贴的字符串包含任何不需要的字符，则不会在文本字段中显示粘贴的字符串。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-22T12:32:52.877

* * *

// 在 ViewDidLoad 或任何 init 方法中添加这个 NSCharacterSet *blockedCharacters = [[[NSCharacterSet alphanumericCharacterSet] reverseSet] retain];

然后在 nib 文件中设置您的文本字段的委托。

```
- (BOOL)textField:(UITextField *)field shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)characters
{
    return ([characters rangeOfCharacterFromSet:blockedCharacters].location == NSNotFound);
} 
```

或者在方法上有另一种方式`shouldChangeCharactersInRange`。你可以检查

```
{
    NSString *stringPlace = @"[a-z  A-Z]*";

    NSPredicate *testPlace = [NSPredicate predicateWithFormat:@"SELF MATCHES %@", stringPlace]; 
        BOOL matches = [testPlace evaluateWithObject:string];

        if (!matches && string.length > 5)
        {
            return NO;
        }
    return YES;
} 
```

# java - 如何在 Java 和 Arduino IDE 中将 /* 保存在字符串中？

> ID：16147043
> 
> 赞同：1
> 
> 时间：2013-04-22T12:24:02.807
> 
> 标签：java, arduino

这是我的代码：

```
GPRS.write("Accept: */*"); 
```

但是 Arudino IDE 以`/*`注释的开头并给出了这个错误：

```
java.lang.RuntimeException: Missing the */ from the end of a /* comment */ 
```

`\`我之前试过放，`/*`但没有用。如何摆脱这个？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-22T12:26:19.737

如果那是 Java 代码，您可以将其编写为一种解决方法：

```
GPRS.write("Accept: */" + "*"); 
```

如果您的 IDE 无法识别`/*`是在字符串文字中，我会说这是 IDE 中的一个相当大的错误。

# php - PHP 简单 HTML DOM 解析器调用非对象上的成员函数 children()

> ID：16147044
> 
> 赞同：2
> 
> 时间：2013-04-22T12:24:10.640
> 
> 标签：php, parsing, simple-html-dom, php-parser

我对 PHP 很陌生，所以我尝试使用 Simple HTML DOM Parser 从网站获取我需要的信息。这是示例节点：

```
<div>
    <h1>Hello</h1>
    <figure id="XXX">
        <div class="abc">ABC</div>
        <div class="qwe">QWE</div>
        <div class="zxc">ZXC</div>
    </figure>
</div> 
```

$element 包含上面的节点。我需要得到的是“QWE”，所以我尝试：

```
$name = $element->find('figure[id=XXX]')->children(1)->innertext; 
```

但现在的问题是：**致命错误：在非对象上调用成员函数 children()**，如果我停在 find('figure[id=XXX]') 上没问题，但它返回数组，我可以' t 得到确切的信息。

有什么解决办法吗？请帮助，提前谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T12:29:06.263

你去：

```
 $str = '<div>
            <h1>Hello</h1>
            <figure id="XXX">
            <div class="abc">ABC</div>
            <div class="qwe">QWE</div>
            <div class="zxc">ZXC</div>
            </figure>
        </div>';

$html = str_get_html($str);

$str = $html->find('figure[id=XXX]',0)->children(1)->plaintext;

echo($str); 
```

find 返回**元素**，您需要**单个元素**，因此在 find 的第二个参数处设置索引 0（第一个）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T23:20:54.130

最好这样做：

```
$html->find('figure#XXX > *[2]',0)->plaintext; 
```

# apache - 保护 Web 服务器中的资源

> ID：16147045
> 
> 赞同：-1
> 
> 时间：2013-04-22T12:24:11.773
> 
> 标签：apache

我的 Web 服务器上发布了一个文件（或目录下的一组文件）。每个资源都需要根据用户的凭据和权限进行访问保护。

授权详细信息存储在数据库中，因此我需要调用应用程序服务器中的 Java 代码来确定访问权限。

每次用户在网络服务器中点击此特定路径时，我需要确保他/她可以访问所请求的资源，确保他已登录并具有访问此资源的必要权限。

网络服务器是 apache - 请您指出 apache 中允许我使用上述逻辑保护资源访问的设置吗？

感谢您提出更正标签和问题的建议！：

1.  我的 Web 服务器是 Apache HTTPD
2.  同意这不是 Java 问题：我引入 Java 视角的唯一原因是，我很可能会使用一些 Java POJO 来检查存储在数据库中的特定目录的用户授权 -那是除非在 apache httpd 配置中有一个技巧可以自动检查数据库 - 类似于这里指出的那个......在它的最后，我需要检查一个特定的用户（经过身份验证以前由单点登录服务器（Sun 访问管理器））可以访问特定目录（用户映射到存储在 DB 中的目录）并相应地保护目录下的资源。

请让我知道是否可以澄清。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T12:28:12.410

我不知道为什么这是用 java 标记的 - 除非你的 db 结构非常特殊，否则你可以用 apache authz 和 authn 来完成它：

[http://httpd.apache.org/docs/2.2/mod/mod_authn_dbd.html](http://httpd.apache.org/docs/2.2/mod/mod_authn_dbd.html)

或者，对于概览：

[http://httpd.apache.org/docs/2.2/howto/auth.html](http://httpd.apache.org/docs/2.2/howto/auth.html)

# file - 如果该文件为空，则删除特定文件

> ID：16147049
> 
> 赞同：1
> 
> 时间：2013-04-22T12:24:23.423
> 
> 标签：file, batch-file, delete-file

如果这个文件是空的，我想通过使用 windows .bat 文件删除一个特定的文件。这是我的非工作脚本：

```
if %~z1 == 0
echo %~z1===================
del "%1"
goto :eof 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T12:29:03.740

```
if %~z1==0 (
echo %~z1===================
del "%1"
)
goto :eof 
```

`goto`如果您想在删除文件后转到文件末尾，则应将 放在括号内。正如我所说，在没有进一步信息的情况下，无论如何该批次都会终止。

# asp.net - 如何在表中插入原始数据后调用 Web 服务

> ID：16147061
> 
> 赞同：0
> 
> 时间：2013-04-22T12:24:56.617
> 
> 标签：asp.net, sql, sql-server, web-services, sql-server-2008

我有一个程序，它在某些操作后在表中插入原始数据。我想通过使用插入行中的信息在代码中调用 Web 服务来执行一些特殊任务。

我怎么能这样做？

从存储过程调用此 Web 服务是否是个好主意？还有哪些其他选择？

更多详细信息：实际上，我的 Web 应用程序中有一个操作需要很长时间才能完成，而且是非常耗时的操作。我不希望客户等到这个过程完成。这就是为什么我决定编写一个 Web 服务在后台执行此过程的原因。因此，我认为当收到客户端请求时，我将他的请求插入表中并调用 Web 服务来处理它可能是一个好主意。此外，我不想等到 Web 服务返回结果，所以我会通过报告从其结果中了解客户端。我不知道处理它的最佳解决方案是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T13:13:44.810

从存储过程或其他数据库对象调用 web 服务绝不是一个好主意。您可以在执行插入并提交之后从代码中调用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T12:40:13.027

我通常让自己远离表触发器（听起来你要为表使用插入触发器）。
我不知道你的具体情况，但你可以：

*   在调用存储过程之前或之后调用 web 服务，这样数据层（存储过程）只处理数据，仅此而已。您的逻辑层将处理调用额外 Web 服务的逻辑。
*   编写一个服务，它会定期读取一个表并通知 web 服务最新的修改。更混乱，但它更像你想要达到的效果。

可能有更多解决方案，但我需要更多关于你正在做什么的信息。
现在有点模糊:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T15:01:07.803

听起来的问题是，除非您在提交事务之前调用它，否则您不能保证将调用 Web 服务。但是，听起来 web 服务需要在提交后调用。在这种情况下，听起来您应该使用消息队列。您可以在数据库中构建一个，也可以使用现成的一个（[http://aws.amazon.com/sqs/](http://aws.amazon.com/sqs/)或[http://www.windowsazure.com/en-us/home/features/messaging/](http://www.windowsazure.com/en-us/home/features/messaging/)）。

步骤是：

1.  将消息插入队列（成功后您可以返回呼叫，具体取决于您与呼叫者的合同是什么）
2.  阅读留言
3.  插入表格
4.  调用网络服务
5.  删除消息

缺点是您需要使操作（插入表并调用 Web 服务）具有幂等性。

# java - SVNError：文件已经存在：org.tmatesoft.svn.core.SVNException

> ID：16147063
> 
> 赞同：0
> 
> 时间：2013-04-22T12:25:04.687
> 
> 标签：java, svn

通过代码，我将文件导入到 SVN 存储库，例如：

```
SVNCommitClient client = new SVNCommitClient(authManager,null);       
client.doImport(file,SVNURL.parseURIEncoded(<SVN Path>),  
  "Am ready to commit", new  SVNProperties(), false, false, SVNDepth.INFINITY); 
```

第一次添加文件时，它会自动添加和提交，但是如果我在 destLocation（即，SVN 存储库位置）已经存在文件时运行相同的代码，则会发生以下错误：

```
ERROR : Failed to Download File.SVNException

org.tmatesoft.svn.core.SVNException: svn: E160020: File already exists: .... 
```

请帮助我通过 JAVA 代码覆盖 SVN 中已经存在的文件。

谢谢，

拉吉里塔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T12:34:56.657

为什么要多次导入？理论上，您将导入一次，然后签出本地工作副本，随后的更改将通过该副本提交。

标准模式看起来是这样的：导入文件签出本地工作副本进行更改并从 svn 等提交更新。

如果您希望导入然后从该导入目录进行后续更改，那么我想您可以在导入后尝试签出该目录。这可能会使所有未来的修改提交添加和修改。

彼得

# wordpress - 编译多个具有不同变量值的 LESS 文件

> ID：16147065
> 
> 赞同：0
> 
> 时间：2013-04-22T12:25:10.847
> 
> 标签：wordpress, less

我目前正在创建一个具有多种颜色主题的网站 - 为此使用 LESS 和 @variables 似乎很自然（使用 Wordpress / WP-Less）。我很快意识到我找不到一个真正干净的方法，只有一个单一的样式表，因为当然，编译后的变量不能被覆盖，而且在每个页面渲染上都编译是不可行的。

创建单独的主题样式表（仅包含变量修改的值）似乎是唯一的方法，但将来维护起来会有些麻烦。我只使用了 1-3 个变量，但它们被多次引用。

是否可以利用 WP-Less/Lessphp 从一个 .less 渲染多个 .css 并更改几个不同的变量？

还是有更简单/其他标准的方法来实现上述目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T18:37:04.627

Less 提供了一种在运行时修改变量的方法：

这是在线文档的摘录 - [http://lesscss.org/](http://lesscss.org/)：

* * *

修改变量

modifyVars 允许在运行时修改 LESS 变量。当使用新值调用时，会重新编译 LESS 文件而不重新加载。简单的基本用法：

less.modifyVars({ '@buttonFace': '#5B83AD', '@buttonText': '#D9EEF2' });

# php - 选择了php下拉按钮

> ID：16147066
> 
> 赞同：0
> 
> 时间：2013-04-22T12:25:14.143
> 
> 标签：php, javascript, mysql

在表单中编辑数据希望在表单中显示...但不应选择下拉值...我希望选择下拉值这里是 list_search 函数中的代码 id return cmb_fruit, val return Apple or Orange

```
 <tr>
                <td width="38%" height="28" align="left"><span class="style20"><font color="#DC143C">*</font>Profession</span></td>
                <td width="62%" align="left"><label for="profession"></label>
                  <select name="cmb_fruit" size="1" id="cmb_fruit">
                    <option value="Select">Select</option>
                    <option value="Apple">Apple</option>
                    <option value="Orange">Orange</option>
                  </select>
    <script language="javascript" type="text/javascript">
        list_search('cmb_fruit',<?php echo "'" . @mysql_result($rs_modify,0,'fruit') . "'";?>)
    </script>
                  </td>
              </tr>

function list_search(id,val)
 {
 cnt=document.getElementById(id).length
 for(x=0; x<cnt; x++ )
 {
     if( document.getElementById(id).options(x).value==val)
     {

         document.getElementById(id).options(x).selected=true
         break;
     }
 }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T12:30:40.020

```
var fruit = document.getElementById("fruit");
fruit.options[fruit.options.selectedIndex].selected = true; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T12:33:39.013

您可以设置`value`选择的属性。此外，如果您从正文中运行的脚本调用它，请确保在`list_search`中声明该函数。`head`

```
function list_search(id, val) {
    document.getElementById(id).value = val;
} 
```

请注意，您不需要 javascript，您可以简单地将`selected`属性放在`option`要选择的元素上。

```
<option value="Apple" selected>Apple</option> 
```

# sql - INSERT INTO 存储过程的输出

> ID：16147067
> 
> 赞同：4
> 
> 时间：2013-04-22T12:25:14.187
> 
> 标签：sql, sql-server, stored-procedures

我正在编写一个存储过程，我首先在表中插入一个新行。此查询生成的 ID 随后需要用于另一个查询。是否可以使用 OUTPUT 访问预先生成的 ID？

这是我到目前为止所做的，这几乎是一个没有用的猜测

```
ALTER PROCEDURE [dbo].[addApp]

      @Name varchar(50) 
    , @logoUrl varchar(150)
    , @siteUrl varchar(150)
    , @userId int
    , @canvasWidth int
    , @canvasHeight int

AS
DECLARE @tempId INT
SET @tempid = INSERT INTO AppInfo (name, logoUrl, userId) 
              OUTPUT inserted.id 
              VALUES(@Name, @logoUrl, @userId);
INSERT INTO CanvasApps (id, siteUrl, canvasWidth, canvasHeight)
OUTPUT inserted.id
VALUES(@tempid, @siteUrl, @logoUrl, @userId); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T12:55:29.623

您甚至可以在单个语句中执行此操作：

```
ALTER PROCEDURE [dbo].[addApp] 

      @Name VARCHAR(50)
    , @logoUrl VARCHAR(150)
    , @siteUrl VARCHAR(150)
    , @userId INT
    , @canvasWidth INT
    , @canvasHeight INT

AS BEGIN

    INSERT INTO dbo.AppInfo (name, logoUrl, userId) 
    OUTPUT Inserted.ID, @siteUrl, @canvasWidth , @canvasHeight
       INTO dbo.CanvasApps (id, siteUrl, canvasWidth, canvasHeight)
    VALUES (@Name, @logoUrl, @userId)

END 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-22T12:34:00.673

试试这个——

```
ALTER PROCEDURE [dbo].[addApp] 

      @Name VARCHAR(50)
    , @logoUrl VARCHAR(150)
    , @siteUrl VARCHAR(150)
    , @userId INT
    , @canvasWidth INT
    , @canvasHeight INT

AS BEGIN

    DECLARE @tempId INT

    INSERT INTO dbo.AppInfo (name, logoUrl, userId) 
    SELECT @Name, @logoUrl, @userId

    SELECT @tempId = SCOPE_IDENTITY()

    INSERT INTO dbo.CanvasApps (id, siteUrl, canvasWidth, canvasHeight) 
    SELECT @tempId, @siteUrl, @logoUrl, @userId

END 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-22T12:36:29.490

只需在您的插入语句之后尝试此操作，并将此变量用于第二个插入语句。：-

```
SET @BVar=SCOPE_IDENTITY() 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-22T12:32:15.103

您需要将结果`output`放入表中，而不仅仅是一个标量变量：

```
declare @tempId table (
    id int
)

INSERT INTO AppInfo (name, logoUrl, userId) 
       OUTPUT inserted.id into @tempId 
              VALUES(@Name, @logoUrl, @userId); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-22T12:28:47.477

只需使用以下变量：

```
@@IDENTITY 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-22T12:56:01.653

```
ALTER PROCEDURE [dbo].[addApp] 
  @Name varchar(50),  
  @logoUrl varchar(150), 
  @siteUrl varchar(150), 
  @userId int, 
  @canvasWidth int, 
  @canvasHeight int
AS
BEGIN
  SET NOCOUNT ON;

  INSERT dbo.AppInfo (name, logoUrl, userId) 
    OUTPUT inserted.id, @siteUrl, @canvasWidth, @canvasHeight
      INTO dbo.CanvasApps(id, siteUrl, canvasWidth, canvasHeight)
    SELECT @Name, @logonUrl, @userId;
END
GO 
```

# c# - 不四舍五入转换为小数

> ID：16147070
> 
> 赞同：0
> 
> 时间：2013-04-22T12:25:35.610
> 
> 标签：c#, decimal

我有一个浮点数，比如说`1.2999`，当放入一个`Convert.ToDecimal`返回时`1.3`。我想将数字转换为小数的原因是加减时的精度，而不是四舍五入。我确信十进制类型可以保存该数字，因为它可以保存比浮点数更大的数字。

为什么要把数字四舍五入？有没有办法阻止它四舍五入？

编辑：我不知道为什么我的是四舍五入而你的不是，这是我的确切代码：

```
decNum += Convert.ToDecimal((9 * 0.03F) + 0); 
```

我现在真的很困惑。当我进入调试器并查看`(9 * 0.03F) + 0`部件的输出时，它显示`0.269999981`为浮点数，但随后将其转换为十进制 0.27。但是我知道 9 的 3% 是 0.27。那么这是否意味着原始计算不正确，而转换只是在修复它？

该死的，我非常讨厌数字，哈哈！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-22T12:28:51.043

你所说的正在发生的事情似乎没有发生。

这个程序：

```
using System;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            float f = 1.2999f;
            Console.WriteLine(f);
            Decimal d = Convert.ToDecimal(f);
            Console.WriteLine(d);
        }
    }
} 
```

印刷：

```
1.2999
1.2999 
```

我认为将值转换为字符串时可能会遇到问题。

或者，正如 ByteBlast 在下面指出的那样，也许您给了我们错误的测试数据。

使用`float f = 1.2999999999f;` *确实*打印`1.3`

原因是浮点值不够精确，无法准确表示`1.299999999f`。该特定值最终被四舍五入`1.3`- 但请注意，它是在转换为小数*之前*被四舍五入的*浮点值。*

 *如果您使用 a`double`而不是 a ，除非您达到更高的精度位数（当您达到）`float`，否则不会发生这种情况`1.299999999999999`

[编辑]**根据您修改后的问题，我认为这只是预期的舍入错误，因此请务必阅读以下内容：**

有关详细信息，请参阅[“每位计算机科学家应了解的浮点运算知识”](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)。

[另请参阅此链接](http://csharpindepth.com/Articles/General/FloatingPoint.aspx)（由 Tim Schmelter 在下面的评论中推荐）。

要注意的另一件事是，调试器显示的数字可能与默认`double.ToString()`（或等效）的精度级别不同，因此可能会导致您看到略有不同的数字。

* * *

在旁边：

您可能对“往返”格式说明符有一些运气：

```
 Console.WriteLine(1.299999999999999.ToString());
 Prints 1.3 
```

但：

```
Console.WriteLine(1.299999999999999.ToString("r"));
Prints 1.2999999999999989 
```

（请注意倒数第二位的狡猾的小8！）

为了获得最终精度，您可以使用[type `Decimal`，](http://msdn.microsoft.com/en-us/library/364x0z75%28v=vs.110%29.aspx)就像您已经在做的那样。这针对以 10 为底的数字进行了优化，并提供了更多位数的精度。

`float`但是，请注意，它比or慢数百倍，`double`并且它也可能遭受舍入错误，尽管要少得多。*

# sublimetext2 - 在 Sublime Text 中添加自定义菜单

> ID：16147073
> 
> 赞同：14
> 
> 时间：2013-04-22T12:25:44.780
> 
> 标签：sublimetext2, sublimetext

如何在**SublimeText 2**中添加自定义菜单项。

有任何想法吗 ？？
我看到有一个**Main.sublime-menu**文件，但不知道如何编辑它。

谢谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-22T17:28:15.027

*.sublime-menu 文件就是 JSON。您可以在用户目录中创建 Main.sublime-menu，它将与其他菜单条目合并。查看第三方插件拥有的 Main.sublime-menu 文件可能会有所帮助。这些通常要短得多，因此可能更容易理解您需要在每个条目中定义的一些内容。

**编辑**

您可以使用以下插件作为插件打开带有任意文件的记事本。

```
import sublime
import sublime_plugin
import subprocess
import threading
class OpenNotepadCommand(sublime_plugin.TextCommand):
    def run(self, edit, filename=None):
        th = NotepadThread(filename)
        th.start()

class NotepadThread(threading.Thread):
    def __init__(self, filename=None):
        self.filename = filename
        threading.Thread.__init__(self)

    def run(self):
        if self.filename is not None:
            subprocess.call("notepad.exe %s" % self.filename)
        else:
            subprocess.call("notepad.exe") 
```

当您创建菜单项时，请使用以下命令和参数。

```
{
    "command": "open_notepad",
    "args": { "filename": "<the absolute path here>"}
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-09-13T13:24:27.503

如果您想要的只是运行命令，则更简单的选择。在 Packages/User 目录中创建一个文件 Context.sublime-menu，并添加以下内容：

```
[
    { "caption": "<Your caption here>", "command": "exec", "args": {"cmd": ["<your cmd name>", "<arg1>", "<arg2>", <...>]} }
] 
```

示例：将菜单项添加到刚刚运行 dir 的上下文菜单：

```
[
   { "caption": "List files in current dir", "command": "exec", "args": {"cmd": ["dir"]} }
] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-04-05T08:13:23.087

我知道这种方式太晚了，无法加入派对并添加我的 2 美分。无论如何，Main.sublime-menu 是一个文件，它允许您将菜单项添加到顶部菜单，即 [文件、编辑、选择、查找、查看、转到等]

我最近添加了一个新部分“开发”只是为了弄清楚。我还想要一种方法来触发特定浏览器的浏览器预览。一探究竟。

```
 [
    {
    "caption": "Dev",
    "mnemonic": "Z",
    "id": "dev",
    "children": [
      {
        "caption" : "Previews",
        "children": [
          { "caption": "Markdown Live Preview", "command": "new_markdown_live_preview", "id": "markdown_live_preview" },
          { "caption": "Preview in Default Browser", "command": "view_in_browser", "id": "markdown_live_preview" },
          { "caption": "Preview in Firefox", "command": "view_in_browser", "args": { "browser": "firefox" }, "id": "markdown_live_preview" },
          { "caption": "Preview in Chrome","command": "view_in_browser", "args": { "browser": "chrome" }, "id": "markdown_live_preview" },
          { "caption": "Preview in Safari", "command": "view_in_browser", "args": { "browser": "safari" }, "id": "markdown_live_preview" },
          ]
        },
      ]
    }
  ] 
```

无论如何，这仍然适用于 ST3。以防万一有人在这里绊倒。

# java - 初学者：Springs with Hibernate 4 疑惑

> ID：16147074
> 
> 赞同：0
> 
> 时间：2013-04-22T12:25:50.663
> 
> 标签：java, spring, hibernate

我的 Hibernate.xml

```
<bean id="transactionManager"
    class="org.springframework.orm.hibernate4.HibernateTransactionManager">
    <property name="sessionFactory" ref="sessionFactory" />
</bean>

<tx:annotation-driven transaction-manager="transactionManager" /> 
```

我的控制器

```
 @RequestMapping("/")
public String index() {
    Category category = new Category();
    category.setName("Hello");
    categoryDao.saveCategory(category);
    return "index";
} 
```

我的 DAO

```
@Transactional
public void saveCategory(Category category) {
    Session session = sessionFactory.getCurrentSession();
    session.save(category);
    Category category2 = (Category) session.get(Category.class,
            new Integer(0));

    System.out.println("xxxx" + category2.getName());
} 
```

出于测试目的，我目前跳过了我的 BO。否则我会去某个地方吗？我的输出应该是 xxxxParent，它是 id = 0 处的类别名称，但它显示的是从 Controller 传递的 xxxxHello。否则插入工作正常。尝试通过 Hibernate 访问数据库的方式也有任何错误。我的意思是使用事务注释或打开会话。

**编辑**

当我删除保存新类别的代码时，会显示正确的输出。在检查控制台之前，只有 insert 可以工作，但现在 select 也可以工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T13:04:33.587

我感觉代码

```
Category category = new Category();
category.setName("Hello");` 
```

正在创建一个 id 为 0 的实体（如果未声明，则整数默认为 0），并正在更新数据库中的现有实体。我没有看到您在这里明确设置 ID。请设置id并查看。

# java - 如何将 Spring 与 JavaFX 一起使用？

> ID：16147076
> 
> 赞同：18
> 
> 时间：2013-04-22T12:25:52.743
> 
> 标签：java, spring, dependency-injection, javafx-2, javafx

我在我的项目中使用带有 Scene Builder 的 javaFX，并且我有很多页面。我想避免复杂性，这就是我想使用 Spring 框架的原因。

那么请任何人向我详细解释如何使用spring框架配置JavaFX？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-07-31T18:02:45.363

我搜索了 Spring 和 JavaFX 集成示例，但找不到一个好的。所以我研究了一个例子。您可以查看此示例应用程序。[https://gitlab.com/sunkur/SpringJavaFXController](https://gitlab.com/sunkur/SpringJavaFXController)

我希望它有所帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-09-06T12:48:04.353

有很多方法可以将 Spring 与 JavaFX 集成。您会发现大多数技术都针对使用 FXMLLoader 上的 API ControllerFactory 在 FXML 控制器上注入 bean。更高级的技术可以使用 FXMLLoader 的 API BuilderFactory（我已经对其进行了测试，它工作得很好）将 Spring 原型 bean 作为 JavaFX 自定义组件注入到您的场景中。

最后，您一直在谈论 SceneBuilder。SceneBuilder 仍然存在一些问题，Spring 受到一些关注。看看关于类加载器和 SceneBuilder 的另一篇文章： [在 Scenebuilder 中使用分层自定义 JavaFx 组件的类路径解析](https://stackoverflow.com/questions/12180127/classpath-resolution-with-hierarchical-custom-javafx-components-in-scenebuilder/18587803#18587803)

如果可能的话，SceneBuilder 有必要不知道 Spring 注入。您可以通过使用 Spring Context 的延迟实例化（在应用程序的“启动”期间）来实现这一点：您的自定义 Spring FXMLLoader 将仅在运行时使用，并且您可以在 Spring 未启动时使用 vanilla FXMLLoader。这样，SceneBuilder 将不会使用其 vanilla FXMLLoader 加载 Spring，并且您不会遇到类路径问题。

# java - 在 Google Guice 中使用参数执行函数

> ID：16147081
> 
> 赞同：0
> 
> 时间：2013-04-22T12:26:11.317
> 
> 标签：java, guice

我有以下模块可以转换为 Guice：

```
Serializer serializer = new SerializerBinaryImpl("testdong");
Dong dong = new DongImplementation();
View view = new TextView(dong);
dong.setSerializer(serializer);
view.setDong(dong); 
```

这是我到目前为止所拥有的：

```
bind(String.class).annotatedWith(Name.class).toInstance("testdong"); 
bind(Serializer.class).to(SerializerBinaryImpl.class);
bind(Dong.class).to(DongImplementation.class);
bind(View.class).to(TextView.class);

//dong.setSerializer(serializer); - Not sure how to do      
//view.setDong(dong); - Not sure how to do 
```

简单的解决方案是最好的解决方案。这只是一个简单的项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T14:48:04.477

您必须使用`@Inject`（这称为[方法/属性注入](https://code.google.com/p/google-guice/wiki/Injections)）注释方法：

```
@Inject
public void setSerializer(Serializer serializer) {
    this.serializer = serializer;
} 
```

...

```
@Inject
public void setDong(Dong dong) {
    this.dong = dong;
} 
```

这不再是在您的模块中进行的配置。Guice 会自动注入：

*   `DongImplementation`在你的`TextView`
*   `SerializerBinaryImpl`在里面`DongImplementation`

# c++ - 使用 `stdio.h` 函数查找模板和名称

> ID：16147083
> 
> 赞同：1
> 
> 时间：2013-04-22T12:26:14.000
> 
> 标签：c++, templates, mingw, fseek, name-lookup

我正在尝试`PCL`在 32 位 Windows 7 中使用`MinGW`. 在构建[outofcore](https://github.com/PointCloudLibrary/pcl/tree/master/outofcore)模块时，我收到了几条错误消息`_fseeki64`：

```
error: there are no arguments to '_fseeki64' that depend on a template parameter, so a declaration of '_fseeki64' must be available 
```

在`octree_disk_container.h`文件中，有一个

```
#ifndef WIN32
#define _fseeki64 fseeko
#endif 
```

我已经测试（生成一个`#error`）并`WIN32`在处理文件时定义。`_fseeki64`当这个小测试程序编译时，编译器似乎可以使用：

```
#include "stdio.h"
int main(int argc, char** argv) {
  FILE* f = fopen("C:/a.txt","r");
  if(!f) printf("NOPE");
  int seekret = _fseeki64(f,4,SEEK_SET);
  (void)seekret;
  return 0;
} 
```

如果我定义`_fseeki64`为`fseeko64`错误消失并且模块编译，但我不确定行为是否与`fseeko`预期的行为相同`fseeki`。

那么，我该怎么做才能`_fseeki64`在这种情况下使用呢？也许声明一个新的基类，把它`#define`放在那里然后像这样调用它`Base<T>::_fseeki64`？（从[这里](https://stackoverflow.com/a/3277100/1259884)得到想法）

你觉得呢？你有没有什么想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T12:38:27.003

所以问题似乎是您的 MinGW 系统确实如此`#define WIN32`，但`_fseeki64`它是 Microsoft 主义，而不是 MinGW 所知道的 POSIX 事物。我认为您应该在 MinGW 上使用 POSIX 行为，这意味着使用`fseeko`.

# machine-learning - 学习如何将数值映射到数组中

> ID：16147084
> 
> 赞同：-3
> 
> 时间：2013-04-22T12:26:16.050
> 
> 标签：machine-learning

全部成交，

我正在寻找一种合适的算法，它可以让我了解一些数值如何映射到数组中。

试着想象我有一个这样的训练数据集：

```
1 1 2 4 5 --> [0 1 5 7 8 7 1 2 3 7]
2 3 2 4 1 --> [9 9 5 6 6 6 2 4 3 5]
...
1 2 1 8 9 --> [1 4 5 8 7 4 1 2 3 4] 
```

所以给定一组新的数值，我想预测这个新数组

```
5 8 7 4 2 --> [? ? ? ? ? ? ? ? ? ?] 
```

非常感谢您提前。

此致！

* * *

一些考虑：

*   让我们假设所有数字都是整数并且数组的长度是固定的
*   每个预测阵列的质量可以通过一个距离函数来确定，该函数试图测量理想阵列和预测阵列之间的相似度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T13:08:37.037

总的来说，这是一项具有挑战性的任务。你的数组长度是固定的吗？什么是损失函数（例如，对于单个数字来说“更接近”更好 - 预测 2 而不是 1 比预测 9 更好还是没关系？你是否因数组上的部分匹配而获得信用，例如预测上半场正确吗？等）？

在任何情况下，经典的回归或分类技术可能不会很好地适用于您的场景。我认为最好的选择是尝试[遗传编程](http://en.wikipedia.org/wiki/Genetic_programming)方法。适应度函数将是我前面提到的损失度量。您可以查看这个关于不同语言的遗传编程库的不错[比较](http://www.tc33.org/genetic-programming/genetic-programming-software-comparison/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-11T17:13:45.077

这称为[结构化输出问题](http://en.wikipedia.org/wiki/Structured_prediction)，您尝试预测的目标是复杂结构，而不是简单的类（分类）或数字（回归）。

如上所述，损失函数是您必须考虑的重要事项。可以使用最小编辑距离、RMS 或简单的 0-1 损失。

[结构化支持向量机](http://en.wikipedia.org/wiki/Structured_support_vector_machine)或结构化输出问题的岭回归变体是可以解决此问题的两种已知算法。当然参见维基百科。

我们在拉瓦尔大学（加拿大）有一个由马里奥·马尔尚和弗朗索瓦·拉维奥莱特领导的研究小组。您可能想搜索他们的出版物，例如 Sebastien Giguere 等人的“结构化输出预测回归方法的风险界限和学习算法”。

祝你好运！

# scala - 解释一个 Scala 类和对象？

> ID：16147090
> 
> 赞同：4
> 
> 时间：2013-04-22T12:26:25.820
> 
> 标签：scala

观看 Martin Odersky 的 scala 课程的第 4.2 节课，我无法理解以下课程或其用途：

```
abstract class Boolean {

  def ifThenElse[T](t: => T, e: => T): T

  def && (x: => Boolean): Boolean = ifThenElse(x, False)
  def || (x: => Boolean): Boolean = ifThenElse(True, x)
  def unary_! : Boolean = ifThenElse(False , True)

  def == (x: Boolean): Boolean = ifThenElse(x, x.unary_!)
  def != (x: Boolean): Boolean = ifThenElse(x.unary_! , x)

  object False extends Boolean {
      def ifThenElse[T](t: => T, e: => T) = e
  }

  object True extends Boolean {
    def ifThenElse[T](t: => T, e: => T) = e
  }

} 
```

是否可以提供示例实施/解释，以便我可以更好地提供正在发生的事情和/或其用途？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T12:35:16.757

你对这门课有什么不明白的地方？

它定义了一个抽象类`Boolean`，它有一个抽象方法，`ifThenElse`。两个对象`False`和使用方法的两个实现`True`扩展类。`Boolean``ifThenElse`

您可能犯了复制和粘贴错误，因为这两个实现是相同的；中的版本`True`似乎错误，它应该如下所示：

```
object True extends Boolean {
  def ifThenElse[T](t: => T, e: => T) = t   // t, not e
} 
```

该类`Boolean`包含许多方法：`&&`、`||`、`unary_!`和它们都是根据 定义`==`的。`!=``ifThenElse`

该方法`ifThenElse`采用两个[按名称命名的参数](http://locrianmode.blogspot.nl/2011/07/scala-by-name-parameter.html)，您可以看到它们，因为它们在参数列表中的类型是`=> T`。这意味着如果您在方法的实现中使用该名称，它将在该点进行评估。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-22T14:08:16.643

所有需要的实现都包含在您的示例中。

`Boolean`是具有 2 个具体实现的抽象超类：`True`和`False`

超类定义了对布尔值的通用操作，将不同的行为委托给子类之间唯一不同的特定操作：方法`ifThenElse`

子类被定义为`object`s，因此它们只有一个实例。

为了理解它们是如何工作的，让我们举个例子

```
/* we start with the basic values and call an if/else control
 * implementation that prints "yes"/"no" depending on the target
 */
scala> True.ifThenElse(println("yes"), println("no"))
yes

scala> False.ifThenElse(println("yes"), println("no"))
no

/* we can negate */
scala> (! True).ifThenElse(println("yes"), println("no"))
no

scala> (! False).ifThenElse(println("yes"), println("no"))
yes

/* and do some algebra */
scala> (True && False).ifThenElse(println("yes"), println("no"))
no

scala> (True || False).ifThenElse(println("yes"), println("no"))
yes

/* or some equality tests */
scala> (True && True == True).ifThenElse(println("yes"), println("no"))
yes

scala> (False || True != True).ifThenElse(println("yes"), println("no"))
no 
```

这只是一种使用*名称调用*来实现布尔运算的教育方法。正如您所看到的，每个调用只打印一个值，显示参数是“按需”评估的，而不是在调用站点评估的事实。

当然，这个符号使用起来相当麻烦，但它的目的是为了说明而不是实用，目的不是这样。

# c# - asp.net网站中的url重写

> ID：16147091
> 
> 赞同：1
> 
> 时间：2013-04-22T12:26:29.163
> 
> 标签：c#, asp.net, url-rewriting, web

我有一个 asp.net C# 网站，它的 url 就像 abc.com 所以当网站第一次加载时，它的 url 出现是 abc.com

但是当我访问任何其他页面并返回主页时，其 url 变为 abc.com/home.aspx。

但我希望它是相同的，即 abc.com 意味着我希望第一次加载网站时出现的 url 和访问任何其他页面后出现在主页上的 url 应该相同。

我认为 url 重写将在这里使用，但我不确定我也不知道如何使用它，所以请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T12:40:36.990

您可以使用链接标记在页面标题中标记规范。因此，在 abc.com/home.aspx 中，您可以生成链接标签，告诉爬虫这是重复的`abc.com`并且不要爬取它。

以下是关于同一主题的更多参考： [http ://www.seomoz.org/blog/which-page-is-canonical](http://www.seomoz.org/blog/which-page-is-canonical) [http://guyellisrocks.com/coding/adding-a-canonical-link-element-in- asp网/](http://guyellisrocks.com/coding/adding-a-canonical-link-element-in-asp-net/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T12:31:40.263

默认情况下，这是由于默认文档功能而发生的。您可以从[http://www.iis.net/learn/web-hosting/web-server-for-shared-hosting/default-documents](http://www.iis.net/learn/web-hosting/web-server-for-shared-hosting/default-documents)链接了解更多信息。

但是，一旦您打开我们的网站 abc.com，当您浏览它时，它肯定会向您显示页面名称，例如 www.abc.com/home.aspx

因此，您正在寻找的东西似乎是不可能的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T13:34:45.200

如果您在访问 abc.com 时看到您的主页，则您的默认页面似乎已设置到位。

您可以轻松地将用户重定向到“/”，这可能就足够了

# java - 如何实现onlistitemclick 使其从一个listfragment 切换到另一个listfragment？

> ID：16147100
> 
> 赞同：0
> 
> 时间：2013-04-22T12:26:47.987
> 
> 标签：java, android

我正在尝试为选项卡中的列表实现侦听器，当您单击一个列表项时，我想从显示的 ListFragment 切换到另一个 ListFragment。

现在，第二个 listfragment 打开，但第一个仍然在后台。我该如何解决这个问题？

有人愿意帮助新手吗？

单击第一个列表中的一个项目时应用程序崩溃，LogCat 显示：

```
04-22 18:51:47.359: D/dalvikvm(614): Not late-enabling CheckJNI (already on)
04-22 18:51:47.840: E/Trace(614): error opening trace file: No such file or directory (2)
04-22 18:51:48.510: D/dalvikvm(614): GC_FOR_ALLOC freed 69K, 3% free 8052K/8259K, paused 34ms, total 38ms
04-22 18:51:48.520: I/dalvikvm-heap(614): Grow heap (frag case) to 8.498MB for 614416-byte allocation
04-22 18:51:48.659: D/dalvikvm(614): GC_CONCURRENT freed 1K, 3% free 8651K/8903K, paused 86ms+23ms, total 136ms
04-22 18:51:48.809: D/gralloc_goldfish(614): Emulator without GPU emulation detected.
04-22 18:51:52.110: I/Choreographer(614): Skipped 43 frames!  The application may be doing too much work on its main thread.
04-22 18:52:02.020: D/AndroidRuntime(614): Shutting down VM
04-22 18:52:02.020: W/dalvikvm(614): threadid=1: thread exiting with uncaught exception (group=0x40a13300)
04-22 18:52:02.060: E/AndroidRuntime(614): FATAL EXCEPTION: main
04-22 18:52:02.060: E/AndroidRuntime(614): java.lang.NullPointerException
04-22 18:52:02.060: E/AndroidRuntime(614):  at android.app.BackStackRecord.run(BackStackRecord.java:609)
04-22 18:52:02.060: E/AndroidRuntime(614):  at android.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1397)
04-22 18:52:02.060: E/AndroidRuntime(614):  at android.app.FragmentManagerImpl$1.run(FragmentManager.java:426)
04-22 18:52:02.060: E/AndroidRuntime(614):  at android.os.Handler.handleCallback(Handler.java:615)
04-22 18:52:02.060: E/AndroidRuntime(614):  at android.os.Handler.dispatchMessage(Handler.java:92)
04-22 18:52:02.060: E/AndroidRuntime(614):  at android.os.Looper.loop(Looper.java:137)
04-22 18:52:02.060: E/AndroidRuntime(614):  at android.app.ActivityThread.main(ActivityThread.java:4745)
04-22 18:52:02.060: E/AndroidRuntime(614):  at java.lang.reflect.Method.invokeNative(Native Method)
04-22 18:52:02.060: E/AndroidRuntime(614):  at java.lang.reflect.Method.invoke(Method.java:511)
04-22 18:52:02.060: E/AndroidRuntime(614):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
04-22 18:52:02.060: E/AndroidRuntime(614):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
04-22 18:52:02.060: E/AndroidRuntime(614):  at dalvik.system.NativeStart.main(Native Method)
04-22 18:52:04.049: I/Process(614): Sending signal. PID: 614 SIG: 9 
```

这是我的代码：主要：

```
public class MainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    ActionBar actionBar = getActionBar();
    actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

    actionBar.setDisplayShowTitleEnabled(true);

    Tab tab = actionBar.newTab().setText("Kategorier")
        .setTabListener(new CustomTabListener<KategorierFragment>(this, "kategorier", KategorierFragment.class));
    actionBar.addTab(tab);

    tab = actionBar.newTab().setText("Profil")
        .setTabListener(new CustomTabListener<ProfilFragment>(this, "profil", ProfilFragment.class));
    actionBar.addTab(tab);

    tab = actionBar.newTab().setText("Info")
        .setTabListener(new CustomTabListener<InfoFragment>(this, "info", InfoFragment.class));
    actionBar.addTab(tab);
    }
} 
```

自定义标签监听器

```
public class CustomTabListener<T extends Fragment> implements TabListener {

private Fragment mFragment;
private final Activity mActivity;
private final String mTag;
private final Class<T> mClass;

public CustomTabListener(Activity activity, String tag, Class<T> clz){
    mActivity = activity;
    mTag = tag;
    mClass = clz;
}

@Override
public void onTabReselected(Tab tab, FragmentTransaction ft) {

}

@Override
public void onTabSelected(Tab tab, FragmentTransaction ft) {

    if(mFragment==null){
        mFragment = Fragment.instantiate(mActivity, mClass.getName());
        ft.add(android.R.id.content, mFragment, mTag);
    }else{
        ft.attach(mFragment);
    }
}

@Override
public void onTabUnselected(Tab tab, FragmentTransaction ft) {
    if(mFragment!=null)
        ft.detach(mFragment);
    }
} 
```

第一个选项卡下显示的 listfragment：

```
public class KategorierFragment extends ListFragment {

String kategorier[] = new String[]{
         "Mat","El","Resor","Aktiviteter","Övrigt"};

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

    ArrayAdapter<String> adapter = new ArrayAdapter<String>(getActivity().getBaseContext(), android.R.layout.simple_selectable_list_item, kategorier);
    setListAdapter(adapter);
    return super.onCreateView(inflater, container, savedInstanceState);
}

    @Override
public void onListItemClick(ListView l, View v, int position, long id) {
    // TODO Auto-generated method stub
    super.onListItemClick(l, v, position, id);

    Fragment mFragment = new KategorierFragment();
    switch(position){
    case 0:
        mFragment = new MatFragment();
        break;
    case 1:
        mFragment = new ElFragment();
        break;
    case 2:
        mFragment = new ResorFragment();
        break;
    case 3:
        mFragment = new AktiviteterFragment();
        break;
    case 4:
        mFragment = new AnnatFragment();
        break;

    }

    FragmentManager fm = getFragmentManager();
    FragmentTransaction ft = fm.beginTransaction();
    ListFragment current = (ListFragment) fm.findFragmentById(R.id.Frame);
    ft.add(R.id.Frame, mFragment);
    ft.addToBackStack(null);
    ft.hide(current);
    ft.commit();
    }
}

@Override
public void onStart() {
    super.onStart();
    getListView().setChoiceMode(ListView.CHOICE_MODE_SINGLE);
    }
} 
```

我要切换到的第一个列表片段：

```
public class MatFragment extends ListFragment{

String mat[] = {"Tips1", "Tips2", "Tips3", "Tips4", "Tips5", "Tips6", "Tips7"};

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    // TODO Auto-generated method stub

     ArrayAdapter<String> adapter = new ArrayAdapter<String>(getActivity().getBaseContext(), android.R.layout.simple_selectable_list_item, mat);
     setListAdapter(adapter);

    return super.onCreateView(inflater, container, savedInstanceState);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T15:56:25.703

为了避免您的列表被叠加，您需要在提交事务之前隐藏之前的片段。

```
ListFragment current = (ListFragment) fm.findFragmentById(android.R.id.content);
ft.hide(current); 
```

如果您想使用“返回”导航回最后一个片段，您可以使用

```
ft.add(android.R.id.content, mFragment);
ft.addToBackStack(null);
ft.hide(current);
ft.commit(); 
```

# miranda - mira 的命令历史？

> ID：16147108
> 
> 赞同：2
> 
> 时间：2013-04-22T12:27:20.680
> 
> 标签：miranda

mira 命令对于在终端输入的命令是否具有类似 shell 的历史记录机制？我经常按向上箭头来纠正一个小错字，但它不起作用。我在 Mac OS X 上使用 Miranda 2.044。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-01-22T21:13:49.427

不幸的是，事实并非如此。

但是，您可以使用 $$ 作为最后评估的表达式的简写，并且 !! 对于最后一个 shell 命令。

见：[https ://www.cs.kent.ac.uk/people/staff/dat/miranda/manual/5.html](https://www.cs.kent.ac.uk/people/staff/dat/miranda/manual/5.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-18T23:46:59.590

试试这个 Python 2 oneliner，它通过 shell 将标准输入重定向到 Mira：

```
python -c "import readline,subprocess as s;p=s.Popen('mira',shell=True,stdin=s.PIPE);[p.stdin.write(raw_input()+'\n') for _ in iter(int,1)]" 
```

它还允许您使用退格键来更正拼写错误。

或者，尝试[rlwrap](https://linux.die.net/man/1/rlwrap)实用程序：

```
rlwrap mira 
```

# jquery - 在按钮单击时响应更改触发处理程序

> ID：16147112
> 
> 赞同：0
> 
> 时间：2013-04-22T12:27:25.657
> 
> 标签：jquery

[JSFiddle](http://jsfiddle.net/rockitdev/AS6GB/35/)

在以下示例中，如果您手动更改文本框中的文本，您会在文本框下方看到不同的消息。

如果您单击其中一个按钮（即，如果您单击按钮设置为 4），我想要相同的行为，您应该会看到 Mid-to-Mod 脆弱出现在文本输入下方。

我的 HTML

```
<input type="text" id="total-frailty-score" value="9" />

<div id="frail-category-area">
    <div id="frail-category"></div>
</div>

<input type="button" id="a" value="Set as 4" />
<input type="button" id="b" value="Set as 2" />
<input type="button" id="c" value="Set as 7" /> 
```

JavaScript/JQuery

```
$(function () {

function FrailCategory() {

    if ($('#total-frailty-score').val() ==  9) {
        $('#frail-category').text('Terminally')
    } else if ($('#total-frailty-score').val() >=  1 && $('#total-frailty-score').val() <=  3) {
        $('#frail-category').text('Pre-Frail')
    } else if ($('#total-frailty-score').val() >=  4 && $('#total-frailty-score').val() <=  6) {
        $('#frail-category').text('Mid-to-Mod frail')
    } else if ($('#total-frailty-score').val() >=  7 && $('#total-frailty-score').val() <=  8) {
        $('#frail-category').text('Severely frail')
    }
}

    $('#total-frailty-score').change(FrailCategory).triggerHandler("change");

});

$('#a').click(function() {
    $('#total-frailty-score').val('4');
});

$('#b').click(function() {
    $('#total-frailty-score').val('2');
});

$('#c').click(function() {
    $('#total-frailty-score').val('7');
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T12:29:46.517

您可以在单击处理程序中手动触发更改事件：

```
$('#a').click(function() {
    $('#total-frailty-score').val('4').change();
}); 
```

虽然我建议重写所有内容：[JSFiddle](http://jsfiddle.net/3PWuC/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T13:00:01.133

只需在您的点击功能后调用您的 FrailCategory()。

[jsfiddle](http://jsfiddle.net/AS6GB/40/)

```
$('#a').click(function() {
    $('#total-frailty-score').val('4');
    FrailCategory() ;
});

$('#b').click(function() {
    $('#total-frailty-score').val('2');
    FrailCategory() ;
});

$('#c').click(function() {
    $('#total-frailty-score').val('7');
    FrailCategory() ;
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T12:37:15.987

只需从单击处理程序调用绑定到您的更改处理程序的相同函数：

```
$('#a').click(function() {
    scoreBox.val('4');
    setFrailText();
});

$('#b').click(function() {
    scoreBox.val('2');
    setFrailText();
});

$('#c').click(function() {
    scoreBox.val('7');
    setFrailText();
}); 
```

[http://jsfiddle.net/AS6GB/38/](http://jsfiddle.net/AS6GB/38/)

您还应该[缓存您的 jQuery 对象](http://www.artzstudio.com/2009/04/jquery-performance-rules/#cache-jquery-objects)，而不是一遍又一遍地选择它们。

# linux - Linux dma 驱动程序 dma_cap_set,dma_cap_zero

> ID：16147113
> 
> 赞同：2
> 
> 时间：2013-04-22T12:27:35.607
> 
> 标签：linux, linux-device-driver, dma

我正在为 dma 编写一个 linux 设备驱动程序，在浏览 LXR 中的 dma 驱动程序源时，我遇到了函数 dma_cap_zero 和 dma_cap_set 以及整个家族 dma_cap_* 。这些功能是什么？还有一个名为 dma_transaction_type 的结构

```
enum dma_transaction_type {
         DMA_MEMCPY,
          DMA_XOR,
          DMA_PQ,
          DMA_XOR_VAL,
         DMA_PQ_VAL,
          DMA_MEMSET,
         DMA_INTERRUPT,
          DMA_SG,
          DMA_PRIVATE,
          DMA_ASYNC_TX,
          DMA_SLAVE,
          DMA_CYCLIC,
          DMA_INTERLEAVE,
  /* last transaction type for creation of the capabilities mask */
          DMA_TX_TYPE_END,
  }; 
```

枚举类型代表什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-23T20:19:14.900

这些函数实际上是预处理器宏函数，被从属 DMA 设备用来配置和请求 DMA 通道。

以下是使用它们的示例：

```
dma_cap_mask_t mask;

dma_cap_zero(mask);
dma_cap_set(DMA_MEMCPY,mask);
dma_chan1 = dma_request_channel(mask,0,NULL); 
```

此代码来自[http://ecourse.wikidot.com/dmatest](http://ecourse.wikidot.com/dmatest)。

首先，在[dmaengine.h, ~line 233](http://lxr.free-electrons.com/source/include/linux/dmaengine.h#L233)`dma_cap_mask_t`中定义了数据类型。它是一种位域，其中的位指示 DMA 通道能够进行哪种传输。

在上面的代码片段中，出现在链接代码的`__init`例程中，掩码被声明为特殊`dma_cap_mask_t`数据类型。然后`dma_cap_zero()`调用该函数并将掩码传递给它。

我相信`dma_cap_zero`只是将能力掩码归零。它在[dmaengine.h, ~line 733](http://lxr.free-electrons.com/source/include/linux/dmaengine.h?v=3.1#L733)中定义。该函数返回 void，我认为正在将位域归零。不过，我并不完全确定，因为内核代码是一大堆宏魔法，有时我很难破译。

在掩码归零或以某种方式由 初始化后`dma_cap_zero`，必须设置通道的功能。该`dma_cap_set`函数实现了这一点。它采用请求通道类型并根据执行该类型事务所需的功能设置掩码。如果您对枚举的使用方式感到困惑，请查看[此页面](http://www.cs.utah.edu/~germain/PPS/Topics/C_Language/enumerated_types.html)以简单查看枚举。在这种情况下，枚举中的值似乎用于描述不同类型的 DMA 事务，每个事务都需要一组不同的“功能”。该`dma_set_cap`函数根据指定事务类型所需的功能设置功能掩码。

一旦为您要执行的 DMA 事务类型正确设置了掩码，您就可以请求 DMA 通道。

其他 dma_cap* 宏用于对 DMA 掩码执行其他类型的操作，而无需*真正*了解幕后发生的事情。这些类型的宏在内核代码中无处不在，用于更多仅 DMA 的操作。它们允许设备驱动程序在内核中完成工作，而不必担心内核是如何做到的。

# c# - 存储在 SQL 中的 HttpSessionState 中的通用列表

> ID：16147116
> 
> 赞同：1
> 
> 时间：2013-04-22T12:27:41.217
> 
> 标签：c#, asp.net, .net, session-state

我正在开发一个 aspx 应用程序 (C#)，我在其中使用`HttpSessionState`在视图更改之间的代码中保存不同的对象。其中一些对象包含通用列表 ( `List<T>`)，但当我使用 SQL 数据库存储状态 ( ) 时，这些列表似乎没有保存`sessionState mode = "SQLServer"`。对象中的所有其他属性都被保存，但是当我尝试检索列表时，我得到了空列表。

有趣的是，如果我使用`sessionState mode = "InProc"`.

我的课程有这个`Serializable`属性。我正在运行 C#/.NET 4.0。

任何想法，将不胜感激！

编辑：

只是用一些代码来澄清（不是逐字逐句！）。

我有我想保存（实例）到我的会话状态的类：

```
public class MyClass
{
    public string Property1 { get; set; }
    public string Property2 { get; set; }
    public List<MyOtherClass> Property3 { get; set; }
}

public class MyOtherClass
{
    public string AnotherProperty1 { get; set; }
    public string AnotherProperty2 { get; set; }
} 
```

然后，在我的代码后面 - 一个操作保存以前类的对象：

```
 public void MyMethod()
    {
        MyClass myClass = new MyClass()
        {
            Property1 = "One string",
            Property2 = "One other string",
            Property3 = new List<MyOtherClass>() { new MyOtherClass() { AnotherProperty1 = "One", AnotherProperty2 = "Ohter" } }
        };

        HttpContext.Current.Session["MyKey"] = myClass;
    } 
```

...另一个动作将检索该对象：

```
 public void MyOtherMethod()
    {
        MyClass myClass = (MyClass)HttpContext.Current.Session["MyKey"];

        int c = myClass.Property3.Count; // Will be 0!!
    } 
```

所以`myClass.Property1`and`myClass.Property2`将保存我之前设置的字符串，但是`myClass.Property3`是一个空列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T20:22:25.857

您描述的问题可能会发生，如果您

*   在该通用列表中存储对对象的引用，该引用在您存储时有效，但是
*   该参考在后续请求中不再有效。

一个示例是存储对`Page.Controls`集合中控件的引用 - 如果您尝试在另一个回发中检索它，此引用将无效。事实上，引用可能只是被垃圾收集清理掉了（这就是为什么你的列表看起来是空的）。

如果没有看到您的实际代码，很难确定（尽管您的示例代码在阐明您的意思方面做得很好）。但这对我来说似乎很可能。

# perl - 如何在 Centos 的默认版本之上安装另一个版本的 perl

> ID：16147120
> 
> 赞同：2
> 
> 时间：2013-04-22T12:27:47.670
> 
> 标签：perl, centos

我正在使用 Centos 6.3，我需要安装最新版本的 perl。因为这是使用 rpm 安装软件包的依赖项之一。所以我安装了它，并将它放在一个目录下，但问题是每当我尝试 perl -V 它都会给我旧版本，所以当我再次尝试使用 rpm 命令安装我的另一个包时，它给了我同样的依赖错误！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T12:51:14.747

使用[perlbrew](http://perlbrew.pl/)，它允许您管理 $HOME 目录中的多个 perl 安装，完全隔离它们中的每一个。

例子：

```
%> sudo cpan App::perlbrew
%> perlbrew init

%> perlbrew install perl-5.16.3
%> perlbrew switch perl-5.16.3 
```

现在你的 PATH 中有 perl 5.16.3：

```
%> perl -v
This is perl 5, version 16, subversion 3 (v5.16.3) built for ... 
```

# wpf - 在弹出窗口中单击通知按钮到 wpf 的主窗口

> ID：16147122
> 
> 赞同：2
> 
> 时间：2013-04-22T12:27:48.710
> 
> 标签：wpf, notifications, popup

我在 WPF 上有两个窗口，比如说 window1 和 window2（这个应该是弹出窗口）。

我想要做的是，当单击弹出窗口（window2）中的按钮时，我想在window1中运行方法。我可以通过将 window1 传递给 windows2 来实现这一点，但我认为这不是一种节省内存的方式。

我有关于routedCommand的红色文章，但是很难理解。我正在使用 c# 并感谢任何帮助

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T14:51:58.260

我经常`Current`在我的`MainViewModel`（或任何一个 ViewModel）上有一个静态属性，我在 ViewModel 的构造函数中设置了该属性。然后从应用程序中的任何其他地方，我可以得到对相关 ViewModel 的引用。

## 在视图模型上

```
 public MainViewModel()
    {
        Current = this;
    }

    public static MainViewModel Current { get; set; } 
```

## 应用程序中的其他任何地方：

```
MainViewModel.Current.DoSomething(); 
```

## 路由命令

路由命令通常是数据绑定的，因此命令逻辑取决于它写入的数据上下文。如果 Window1 的 DataContext 是 MainViewModel，而 Window2 的 DataContext 是 SecondViewModel，为了让 Window2 上的按钮在 MainViewModel 上执行命令，您必须引用 MainViewModel 的该实例作为相关按钮的 DataContext。

# r - 减少pairwise.t.test中的比较次数

> ID：16147127
> 
> 赞同：0
> 
> 时间：2013-04-22T12:28:06.953
> 
> 标签：r

这是我之前提出的一个问题所激发的一个问题：[使用tapply/dapply等进行t.tests](https://stackoverflow.com/questions/16142981/using-tapply-dapply-etc-for-t-tests)

我有一个来自 interlab 研究的数据框，如下[http://pastebin.com/AD57AYD1](http://pastebin.com/AD57AYD1)

本质上lab=Laboratory，mat=material，fab=strength，thick=thickness

我想要 t.test 数据来比较每种材料的每个实验室。即，对于 mat=v，我想运行一个 t.test 来比较实验室 B 和实验室 S。同样对于材料 c、n 和 l。

我之前的问题是关于使用 plyr 允许我为这些组合中的每一个运行 t.tests 。然而，有人指出，需要考虑多重比较的问题。

我曾尝试对我的数据使用paired.t.test 函数，但它进行了太多比较（即，它对lab B 腈与lab S 乙烯基进行了t 检验——这无关紧要。我这样称呼它：

```
pairwise.t.test(interlab$fab,interaction(interlab$mat,interlab$lab),paired=FALSE, pool.sd=FALSE) 
```

它给了我

```
> pairwise.t.test(interlab$fab,interaction(interlab$mat,interlab$lab),paired=FALSE, pool.sd=FALSE)

Pairwise comparisons using t tests with non-pooled SD 

    data:  interlab$fab and interaction(interlab$mat, interlab$lab) 

    c.B     l.B     n.B     v.B     c.S     l.S     n.S    
    l.B 0.54484 -       -       -       -       -       -      
    n.B 3.8e-07 1.9e-06 -       -       -       -       -      
    v.B 0.93881 0.22393 3.6e-07 -       -       -       -      
    c.S 0.00576 0.93881 1.2e-05 0.00026 -       -       -      
    l.S 0.00067 0.48601 2.5e-05 4.6e-05 0.89883 -       -      
    n.S 4.3e-12 2.2e-10 0.92366 5.4e-12 6.7e-10 7.7e-10 -      
    v.S 0.93881 0.93881 1.9e-06 0.31885 0.01217 0.00169 1.3e-10

    P value adjustment method: holm 
```

我担心这里调整后的 p 值是错误的，因为我们没有将材料 n 与 l 或 l 与 c 进行比较——在两个实验室进行测试时，我们总是在寻找相同的材料（即材料 'l'实验室“B”和“S”）。

有没有办法对数据进行子集/分组，以便对 pairwise.t.test 的适当调用只给我以下比较？

```
 c.B     l.B     n.B     v.B     c.S     l.S     n.S    
    l.B -       -       -       -       -       -       -      
    n.B -       -       -       -       -       -       -      
    v.B -       -       -       -       -       -       -      
    c.S 0.00576 -       -       -       -       -       -      
    l.S -       0.48601 -       -       -       -       -      
    n.S -       -       0.92366 -       -       -       -      
    v.S -       -       -       0.31885 -       -       - 
```

问候皮特

编辑：@John 发表评论后

虽然似乎无法以这种方式使用 pairwise.t.test 函数，但可以在调用 p.adjust 函数时使用来自@droopy 的先前解决方案：

```
> FUN<- function(x) {
   t.test(x[,"fab"] ~ x[,"lab"])$p.value
}

res<-ddply(interlab, .(mat), FUN)
res$adjpvalue<-p.adjust(res$V1)

res

mat           V1   adjpvalue
1   c 0.0004798071 0.001919228
2   l 0.0607510365 0.121502073
3   n 0.1847312857 0.184731286
4   v 0.0354274420 0.106282326 
```

感谢@John 和@droopy 在这方面的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T13:01:26.750

没有办法按照您的要求进行操作，但您可以做的是分别运行 4 个 t 检验，或者从`pairwise.t.test`调整设置为无时提取您想要检查的 p 值，并使用该函数`p.adjust`来纠正它们。

运行 pairwise.t.test 与单独测试的决定归结为使用所有组的汇总方差估计或单独的方差。你应该事先决定。

顺便说一句，您是否进行了方差分析？从您的 p 值的外观来看，我打赌您不需要运行任何这些测试来简单地从 ANOVA 结果中说明发现的模式。

# svm - 为什么不在感知器或 SVM 中使用 0-1 损失函数？

> ID：16147132
> 
> 赞同：2
> 
> 时间：2013-04-22T12:28:15.480
> 
> 标签：svm, perceptron

为什么在感知器或 SVM 算法中不使用 0-1 损失函数（从概念二元分类模型的角度来看是最明显和信息最丰富的）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T14:41:02.210

在感知器的情况下，大多数时候它们使用梯度下降（或类似的东西）进行训练，并且 0-1 损失函数是平坦的，因此它不能很好地收敛（更不用说它在 0 处不可微）

SVM 是基于解决一个优化问题，使类之间的边距最大化。因此，在这种情况下，凸损失函数更可取，因此我们可以使用几种通用的凸优化方法。0-1 损失函数不是凸函数，因此也不是很有用。请注意，这是由于当前的技术水平，但是如果发现了一种有效优化非凸函数的新方法，那么情况将会改变。

编辑：错字

# text - UIButton 文本没有被换行成几行

> ID：16147136
> 
> 赞同：1
> 
> 时间：2013-04-22T12:28:32.810
> 
> 标签：text, ios6, uibutton, word-wrap

我的问题是，三个 UIButtons 上的文本在 Interface Builder 中被换成了几行，但是当我运行代码时，文本比按钮大，而且只有一行。我尝试设置 NSLineBreakMode 和 NSTextAlignment，但都没有帮助。在 Interface Builder 中，它看起来像这样：http: [//imgur.com/WplkqQV](http://imgur.com/WplkqQV)，而在模拟器上它看起来像这样：http: [//imgur.com/0YPpEfU](http://imgur.com/0YPpEfU)。有任何想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T18:05:20.913

你的例子肯定有一些很奇怪的地方。我无法重现它。您必须对问题提供的信息中未描述的按钮执行某些操作。如果您将*按钮*换行模式设置为自动换行（在笔尖中），并且如果您的约束是合理的，以便按钮可以横向变宽而纵向变窄，那么它将以纵向而不是横向换行，我相信这就是你想要的。这是我机器上模拟器中按钮的屏幕截图（忽略按钮的实际宽度；这只是一个示例；重要的是文本换行）：

![在此处输入图像描述](https://i.stack.imgur.com/EFrAZ.png)

![在此处输入图像描述](https://i.stack.imgur.com/VGm4A.png)

然而，真正的问题是高度。你会注意到这并没有改变。这是因为圆形矩形按钮具有固有的高度值。如果你想改变高度，为被包裹的文本腾出更多的垂直空间，你可能需要在旋转后对布局过程进行子类化或干预。例如，我得到了很好的结果，如下所示：

```
-(void)viewDidLayoutSubviews {
    CGRect f = self.button.bounds;
    if (UIInterfaceOrientationIsLandscape(self.interfaceOrientation))
        f.size.height = 44;
    else
        f.size.height = 60;
    self.button.bounds = f;
} 
```

![在此处输入图像描述](https://i.stack.imgur.com/kVyYH.png)

# android - ImageView 未显示在 TableRow 上

> ID：16147139
> 
> 赞同：1
> 
> 时间：2013-04-22T12:28:44.573
> 
> 标签：android, imageview, tablelayout, tablerow

我有以下代码在我的代码中创建表头。但是，出于某种原因，带有 ImageView 的列不显示任何内容。由于我为列固定了权重，而不是显示图像，因此此代码仅为列保留一个空白空间，但不显示任何内容。我怀疑我的drawable是这个的起源，但是如果我创建一个TextView并将其定义为drawableTop、drawableBottom或其他类型，它就会显示出来。

```
<TableLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginLeft="2dp"
    android:layout_marginRight="2dp" >

    <TableRow>

        <TextView
            android:layout_margin="1dp"
            android:layout_weight="2"
            android:background="#ffcccccc"
            android:gravity="center"
            android:text="@string/date_hour"
            android:textSize="16sp"
            android:textStyle="bold" />

        <ImageView
            android:layout_margin="1dp"
            android:layout_weight=".75"
            android:background="#ffcccccc"
            android:gravity="center"
            android:drawable="@drawable/road" />

        <TextView
            android:layout_margin="1dp"
            android:layout_weight=".75"
            android:background="#ffcccccc"
            android:gravity="center"
            android:text="@string/op"
            android:textSize="16sp"
            android:textStyle="bold" />

        <TextView
            android:layout_margin="1dp"
            android:layout_weight="1"
            android:background="#ffcccccc"
            android:gravity="center"
            android:text="@string/tag"
            android:textSize="16sp"
            android:textStyle="bold" />

        <TextView
            android:layout_margin="1dp"
            android:layout_weight="2"
            android:background="#ffcccccc"
            android:gravity="center"
            android:text="@string/status"
            android:textSize="16sp"
            android:textStyle="bold" />
    </TableRow>
</TableLayout> 
```

有人遇到过同样的问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T12:40:57.433

我猜你的图像视图应该如下

```
<ImageView
        android:layout_margin="1dp"
        android:layout_weight=".75"
        android:background="#ffcccccc"
        android:gravity="center"
        android:src="@drawable/road" /> 
```

尝试在您的代码中替换它。希望它有效

# c# - 如何从 C# 中的 xml 读取特定节点？

> ID：16147142
> 
> 赞同：5
> 
> 时间：2013-04-22T12:28:51.373
> 
> 标签：c#, asp.net, .net

我有以下 XML：

```
<Loop Name="MasterData">
  <Loop Name="SlaveData">
    <Segment Name="AAA">
      <Node1>hello</Node1>
      <Node2>john</Node2>
      <Node3>hi</Node3>
      <Node4>marry</Node4>
    </Segment>
    <Segment Name="BBB">
      <Node1>00</Node1>
      <Node2> </Node2>
      <Node3>00</Node3>
      <Node4> </Node4>
    </Segment> 
   </Loop>
</Loop> 
```

我必须读取每个节点的值，即 Node1、Node2、Node3、Node4，它们位于 Segment 节点下，其属性 ie `Name = "AAA"`。我怎样才能做到这一点。我指的是stackoverflow的以下链接，但这对我不起作用。

[如何在 C# 中从 XmlNode 读取属性值？](https://stackoverflow.com/questions/1600065/how-to-read-attribute-value-from-xmlnode-in-c)

我需要这样的输出

让我有四个 sting 变量`strNode1, strNode2, strNode3, strNode4`。我想将值存储在上述四个变量中，如下所示

```
strNode1 = "hello"
strNode2 = "john"
strNode3 = "hi"
strNode4  = "marry" 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-22T12:35:59.773

您可以使用[XmlDocument](http://msdn.microsoft.com/en-ca/library/system.xml.xmldocument.aspx)将您的 xml 作为对象加载，然后使用[XPath](http://msdn.microsoft.com/en-us/library/ms256086.aspx)查询您想要的特定节点。您的 xpath 查询（我现在无法测试）可能看起来像这样。

```
XmlNodeList xNodes = xmlDocument.SelectNodes("//Segment[@Name = 'AAA']"); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-23T04:59:40.493

我为我的问题找到了一个简单的解决方案

```
XmlNodeList xnList = doc.SelectNodes("/Loop/Loop/Segment[@Name='AAA']");
          foreach (XmlNode xn in xnList)
          {
              if (xn.HasChildNodes)
              {
                  foreach (XmlNode item in xn.ChildNodes)
                  {
                      Console.WriteLine(item.InnerText);
                  }
              }  
          } 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-22T12:30:53.283

我建议使用 XDocument（省略了基于父节点等的 NB 特定过滤）：

```
var document = XDocument.Load(path);
var nodes = document.Descendents().Where(e => e.Name.LocalName.StartsWith("Node")); 
```

**更新以包括父元素的过滤**

```
var nodes = document.Descendents()
                    .Where(e => e.Atrributes().Any(a => a.Name.localName == "Name" && a.Value == "AAA"))
                    .SelectMany(e => e.Descendents().Where(e => e.Name.LocalName.StartsWith("Node"));
var values = nodes.Select(n => n.Value).ToList(); // This will be a list containing "hello", "john, "hi", "marry" 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-22T12:35:05.213

假设您有一个`XmlDocument`您可以使用 XPath，例如：

```
XmlNode node = doc.SelectSingleNode("//Segment[@Name='AAA']"); 
```

获取`Segment`节点，然后在循环中迭代其所有子节点。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-22T12:35:39.557

尝试这个：

```
System.Xml.Linq.XDocument doc = XDocument.Load(your file);

var nodes = 
     doc.Element("Loop").Element("Loop").Elements("Segment")
                .Where(input => (string)input.Attribute("Name") == "AAA")
                .Select(input => input.Elements()).ToList(); 
```

然后：

```
List<string> result = new List<string>();

foreach (List<XElement> item in nodes)
{
    result.AddRange(item.Select(i => i.Value));
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-04-22T12:36:22.163

您可以使用 XmlDocument 和 XPath：

```
XmlDocument doc = new XmlDocument();
doc.Load(xml);
foreach(XmlNode node in doc.SelectNodes("//Segment[@Name='AAA']/node()"))
{
    string name = node.Name;
    string value = node.innerText;
    // ...
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-22T12:36:00.417

你可以试试这个吗？

```
XDocument xmlFile = XDocument.Load("myFile.xml");
foreach (var nodeSegment in xmlFile.Descendants("Loop"))
{
   foreach (var nodes in nodeSegment.Descendants().Where(e => e.Name.LocalName.StartsWith("Node")))
   {

   }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-12-04T11:04:59.577

试试这个。。

```
List<string> nodeDetails = new List<string>();

       var nodes = from n in XDocument.Load(@"D:\pfXml.xml")
                                              .Element("Loop")
                                              .Element("loop")
                                              .Elements("Segment")
                                      where (string)n.Attribute("Name") == "AAAA"
                                      select new
                                      {
                                          n1 = n.Element("Node1").Value,
                                          n2 = n.Element("Node2").Value,
                                          n3 = n.Element("Node3").Value,
                                          n4 = n.Element("Node4").Value
                                      };
        foreach (var node in nodes)
        {
            nodeDetails.Add(node.n1);
            nodeDetails.Add(node.n2);
            nodeDetails.Add(node.n3);
            nodeDetails.Add(node.n4);
        } 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-04-22T12:33:03.637

如果您曾经使用过 linq-to-entities 或 linq-to-sql，那么您可以使用[linq-to-xml 。](http://msdn.microsoft.com/en-us/library/bb387098.aspx)

# android - 如何解码和保存捕获图像并在gridview中显示

> ID：16147143
> 
> 赞同：1
> 
> 时间：2013-04-22T12:28:51.550
> 
> 标签：android

我想将捕获的图像保存在我的应用程序内存中并在 gridview 中查看，但是当我捕获图像时崩溃我该怎么办？我如何解码捕获的图像？我想将捕获的图像保存在我的应用程序内存中（“data/data/com.myexample/files\CameraRoll\”）；我该怎么办？请帮我

```
 Private final int CAMERA_PICTURE=1;
  public final String IMAGE_CAPTURE_NAME=System.currentTimeMillis()+".jpeg";  

  File Cameraroll =new file(getFileDir(),"CameraRoll");
  if(CameraRoll.esixts() && CameraRoll.isDirectory())
 {

}
 else 
{
CameraRoll.mkdir
 }

  Intent intent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
 intent.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(new File  
  (cameraRoll+"/",IMAGE_CAPTURE_NAME))););
      startActivityForResult(intent, Camera_PICTURE);

protected void onActivityResult(int requestCode, int resultCode, Intent data) {  

   super.onActivityResult(requestCode,resultCode,data);
        if (requestCode == Camera_PICTURE) {  
            Bitmap photo = (Bitmap) data.getExtras().get("data"); 
                       }  
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T12:54:52.267

从您的代码中删除，您将能够获得.`intent.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(new File
(cameraRoll+"/",IMAGE_CAPTURE_NAME))););``Bitmap``onActivityResult`

要存储图像，您必须手动进行。您可以`Database`通过将位图转换为数据类型`byte array`并将其存储在或中的任何文件中来保存它。`bool``Database``sdcard``phone's memory`

# java - 如何避免在服务类中重复 DAO 方法？@Transactional 带注释的 DAO 和服务类 - 这是可以接受的做法吗？

> ID：16147144
> 
> 赞同：10
> 
> 时间：2013-04-22T12:28:51.870
> 
> 标签：java, spring, transactions, annotations, dao

我知道最佳实践是同时拥有服务和 dao 层，并在服务级别添加 @Transactional 注释。但就我而言，这意味着我的大多数服务类都是为了重复 DAO 方法而创建的……这很烦人。

例如。

```
public interface FooDAO {
 public List<FooVO> list(int cathegoryId);
 public List<FooVO> list(int cathegoryId, int ownerId);
}

@Service
@Transactional
public class FooService {
   protected @Autowired FooDAO dao;
   public List<FooVO> list(int cathegoryId) { 
      dao.list(cathegoryId); 
   }
   public List<FooVO> list(int cathegoryId, int authorId) { 
      dao.list(cathegoryId, authorId) 
   }
} 
```

这有多蠢？

在大多数情况下，我真的不需要花哨的服务方法，因为通常这是获取例如的问题。分类描述和与分类匹配的实体列表。这就是为什么我正在寻找一个简化的解决方案。像使用泛型来避免重复 DAO 一样出色的东西：D [http://www.javablog.fr/javahibernate-dont-repeat-the-dao-with-a-genericdao.html](http://www.javablog.fr/javahibernate-dont-repeat-the-dao-with-a-genericdao.html)

我一直在寻找答案。其中我读过 [@Transactional 注释属于哪里？](https://stackoverflow.com/questions/1079114/spring-transactional-annotation-best-practice) 但仍然没有找到我的答案。

所以我想知道用@Transactional 注释DAO 方法真的是个坏主意。受[http://www.baeldung.com/2011/12/26/transaction-configuration-with-jpa-and-spring-3-1/#apistrategy](http://www.baeldung.com/2011/12/26/transaction-configuration-with-jpa-and-spring-3-1/#apistrategy)的启发，我想出了一个解决方案。

如果：

*   我只有一个服务类（这是真正需要的）并用 @Transactional 注释它的方法
*   对于所有其他（简单）情况：我用 @Transactional(propagation = Propagation.MANDATORY) 注释 DAO 方法，用 @Transactional(propagation = Propagation.REQUIRES_NEW) 注释我的控制器方法

** 更新 1 **

它看起来像这样：

```
public interface FooDAO {
 @Transactional(propagation = Propagation.MANDATORY, readOnly=true)
 public List<FooVO> list(int cathegoryId);
 ...
}

@Service
public class FooService {
   protected @Autowired FooDAO dao;

   @Transactional // propagation REQUIRED
   public List<FooVO> magic(FooVO fooVO) { 
      //do sth complicated here ;)
   }
   // We do not repeat DAO methods in the Service class. 
   // No wrapping methods here !!!
}

@Controller
public class FooMagicController {
    protected @Autowired  FooService fooService;
    ...
        fooService.magic(fooVO);
    ...
}
@Controller
public class FooController {
    protected @Autowired  FooDAO dao; //DAO wired directly in the Controller class !!!

    @Transactional(propagation = Propagation.REQUIRES_NEW)
    @RequestMapping(".....")
    public String listFoo(Model model,...) throws Exception {
        model.addAttribute("list", dao.list(13) );
        return "xyz";
    }
} 
```

在每种情况下，DAO 都使用“上方”管理的会话。

这是一个非常糟糕的主意吗？有没有更好的方法来实现我所需要的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T12:58:32.103

我不会说这是一个坏主意，因为这取决于您选择设计应用程序的情况。

如果您觉得，您不需要任何服务类（即具有比纯 DAO API 更多功能的 API 的类），那么我认为最好避免使用服务类，而直接使用自动连接到控制器的 DAO 实现。

但是，如果您需要执行一些额外的逻辑并希望将其公开为 API，那么您可以编写服务类，它将实现该自定义逻辑以及这些 DAO 方法的包装函数（就像您在上面给出的那样）。这将使代码更简洁，因为您只需要将服务类连接到控制器中，同时您可以使用服务类中的包装 API 进行 DAO 调用。

如果您仅为自定义 API 保留服务类并且没有任何 DAO 的包装 API，那么如果您需要进行任何数据访问调用，您还需要将 DAO 连接到您的控制器类中。因此，在这种情况下，您将有效地在服务类和控制器类中连接 DAO。

**更新 1**

这是来自示例项目之一的我的 Controller 和 Service 类

控制器

```
public class HomePageController  {

@Autowired
private VideoService videoService;

    //Controller method
@RequestMapping(value = "/tag/mostviewed")
public @ResponseBody
Map<String, List<Video>> showMostViewedVideosForTag (){
            //service api
             videoService.getMostViewedVideo(curatorTagName)
       }

} 
```

服务等级

```
@Service(value = "videoService")
@Transactional(readOnly = true)
public class VideoServiceImpl implements VideoService {

@Autowired
private VideoDAO videoDAO;

@Autowired
private TagDAO tagDAO;

 // WRAPPER API FOR THE DAO

@Override
public List<Video> getMostViewedVideo(String tagName)  {
    return videoDAO.getMostViewedVideo(tagName);
}

 // A non wrapper API which does some business logic
@Override
@Transactional
public void assignTagsToVideo(String videoId, String userId, String... tags)  {

        for (String tag : tags) {
            if (tagHeritageDAO.getTagHeritage(tag, videoId, userId) == null) {
                Tag tagObj = tagDAO.getTag(tag);
                if (tagObj != null) {
                    //some logic here to add tags to video
                }
            }
        }

    videoDAO.update(video);
}
} 
```

如您所见，唯一的服务连接在控制器类中，而 dao 连接到服务类。这就是我所说的混合模式。抱歉，如果我让你感到困惑。

# ruby-on-rails - 活动记录中的多个类似条件

> ID：16147145
> 
> 赞同：2
> 
> 时间：2013-04-22T12:28:52.887
> 
> 标签：ruby-on-rails, activerecord

我需要根据多个类似的语句检查我的记录，最好的方法是什么？IE

```
names = ['alice', 'bob', 'mark'] 
```

我有一个表格，可以说我的数据库中的 People 或（Peoples），所以我想选择所有名字如上述 3 的人。

找到了这个答案：

[https://stackoverflow.com/a/5333281/169277](https://stackoverflow.com/a/5333281/169277)

对于使用 like 但我不知道如何传递值数组而不是单个值。有任何想法吗？

**更新 ：**

我需要喜欢，因为人们有两个名字

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T13:10:32.553

有许多插件可以提供这种查询，但您真正需要的只是[Arel](https://github.com/rails/arel)。

您需要使用类似这样的方法为 LIKE 准备查询参数

```
wildcard_names = names.collect { |name| "%#{name}%" } # => ["%alice%","%bob%","%mark%"] 
```

然后你使用了`#matches_any`Arel的方法。

```
people_table = People.arel_table
People.where(people_table[:name].matches_any(wildcard_names)) 
```

正如 PriteshJ 提到的，添加`to_sql`以确认查询是正确的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-22T12:34:27.527

尝试这个

```
names = ['alice', 'bob', 'mark']
Person.where('name REGEXP ?',names.join('|')) 
```

在与单个列上的多个值匹配时，您可以使用[REGEXP](http://www.mysqltutorial.org/mysql-regular-expression-regexp.aspx)而不是`LIKE` 这将生成带有 in 子句的 sql 语句

检查生成的 sql 只需添加`.to_sql`

```
Person.where('name REGEXP ?',names.join('|')).to_sql 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-10-01T10:31:43.447

这将起作用。
`Person.where('name SIMILAR TO ?',"(alice|bob|mark)")`

也可以进行高级匹配
`Person.where('name SIMILAR TO ?',"%(alice|bob|mark)%")`
如果名称为“jon alice”，即正则表达式匹配，上述行也将起作用。

请参阅 postgresql 文档：[http ://www.postgresql.org/docs/9.0/static/functions-matching.html](http://www.postgresql.org/docs/9.0/static/functions-matching.html)

# asp.net - 在 Web 服务器 (asp.net) 上获取客户端 IP

> ID：16147146
> 
> 赞同：3
> 
> 时间：2013-04-22T12:28:55.980
> 
> 标签：asp.net, iis, ip, client

我正在尝试通过对 iis 上托管的页面的 http 请求获取客户端的 IP。

我调查过：

1) [http://forums.asp.net/t/1780050.aspx/1](http://forums.asp.net/t/1780050.aspx/1)

2）[获取客户端IP地址：REMOTE_ADDR，HTTP_X_FORWARDED_FOR，还有什么有用的？](https://stackoverflow.com/questions/527638/getting-the-client-ip-address-remote-addr-http-x-forwarded-for-what-else-coul)

3)[如何在 ASP.NET 中获取用户的客户端 IP 地址？](https://stackoverflow.com/questions/735350/how-to-get-a-users-client-ip-address-in-asp-net)

4)[使用 C# 的客户端 IP](https://stackoverflow.com/questions/4551660/client-ip-using-c-sharp)

正如每个人所说的那样，没有万无一失的方法来获取客户端 IP，因为客户端可以在 NAT 之后，也可以伪造 IP 地址。

但是，我尝试了 REMOTE_ADDR、HTTP_X_FORWARDED_FOR 和 UserHostAddress。它们都返回服务器的 IP 而不是客户端（服务器与客户端位于不同的机器上），即 127.0.0.1 或服务器的 LAN IP (192.168.xxx.xxx)。我期待 HTTP_X_FORWARDED_FOR 的正确响应，因为它不受代理服务器的影响。

令人费解的是，当我将页面托管在与客户端相同的机器上时，即服务器在本地主机上，我能够获取客户端 ip（这显然等于服务器 ip）

IIS 中是否有任何设置需要配置才能使其正常工作？还是内部网中的其他问题？

# events - 附加事件的优先级

> ID：16147150
> 
> 赞同：0
> 
> 时间：2013-04-22T12:29:13.420
> 
> 标签：events, zend-framework2

事件管理器的[文档](http://framework.zend.com/manual/2.0/en/modules/zend.event-manager.event-manager.html)优先级参数是影响事件执行顺序的方式。在我的模块中，我附上了 postProcess

```
 /** @var \Zend\ModuleManager\ModuleManager $moduleManager */
    $moduleManager = $e->getApplication()->getServiceManager()->get('modulemanager');
    /** @var \Zend\EventManager\SharedEventManager $sharedEvents */
    $sharedEvents = $moduleManager->getEventManager()->getSharedManager();

    $sharedEvents->attach(
        'Zend\Mvc\Controller\AbstractRestfulController',
        MvcEvent::EVENT_DISPATCH, array($this, 'postProcess'),
        1
    ); 
```

它工作正常，即我的控制器中的 getList 操作。但不会在选项操作中触发。任何大于 1 的值都会触发 postProcess。

所以我的问题是：从文档来看 - 优先级应该影响事件的顺序。但在这种特殊情况下 - 它会影响它是否被触发。这是为什么？这是某种错误吗？

# java - 如何使用 SOAP 在 android 中接收 BufferedImage[]？以及如何在 imageview 中显示 BufferedImage[] 图像？

> ID：16147155
> 
> 赞同：1
> 
> 时间：2013-04-22T12:29:36.967
> 
> 标签：java, android, android-imageview

如何`BufferedImage[]`使用 android接收`SOAP`？以及如何在其中显示这些`BufferedImage[]`图像`imageview`？

我的班级文件代码：

```
SoapObject request2 = new SoapObject(NAMESPACE2, METHOD_NAME2);        
SoapSerializationEnvelope envelope2 = new SoapSerializationEnvelope(SoapEnvelope.VER11);
envelope2.setOutputSoapObject(request2);
HttpTransportSE ht2 = new HttpTransportSE(URL2);
request2.addProperty("refDocno", "BDQA - 214");                 
ht2.call(SOAP_ACTION2, envelope2);
final SoapObject response2 = (SoapObject) envelope2.bodyIn; 
```

* * *

现在如何使用`response2 data`以及如何在中显示该响应的图像`imageview`？

# xml - 在 xQuery 中按两个元素排序

> ID：16147163
> 
> 赞同：0
> 
> 时间：2013-04-22T12:30:06.903
> 
> 标签：xml, xquery

我对 xQuery 很陌生，我必须编写查询来执行以下操作；

> 显示按年份排序的书籍和文章。

我尝试了以下方法；

```
for $b in doc("myDB.xml")/myDB
order by $b/book/year, $b/article/year
return $b/book, $b/article 
```

或者

```
for $b in doc("myDB.xml")/myDB
order by $b//year
return $b/book, $b/article 
```

它没有对任何东西进行排序。

XML 是；

```
<myDB>
    <book>
        <title>ebXML : Concepts and Application</title>
        <author>
            <last_name>Gibb</last_name>
            <first_name>Brian</first_name>
        </author>
        <year>2003</year>
        <publisher>Wiley</publisher>
    </book>

    <article>
        <title>test title</title>
        <author>
            <last_name>Gibb</last_name>
            <first_name>Brian</first_name>
        </author>
        <year>2003</year>
        <publisher>test Wiley</publisher>
    </article>

    <book>
        <title>XML: Visual QuickStart Guide</title>
        <author>
            <last_name>Goldberg</last_name>
            <first_name>Kevin</first_name>
        </author>
        <author>
            <last_name>Doe</last_name>
            <first_name>John</first_name>
        </author>

        <year>2008</year>
        <publisher>Peachpit Press</publisher>
    </book>
    <book>
        <title>Beginning XML</title>
        <author>
            <last_name>Hunter</last_name>
            <first_name>David</first_name>
        </author>
        <year>2007</year>
        <publisher>Wrox</publisher>
    </book>
    <book>
        <title>Learning XML </title>
        <author>
            <last_name>Ray</last_name>
            <first_name>Erik</first_name>
        </author>
        <author>
            <last_name>Smith</last_name>
            <first_name>David</first_name>
        </author>
        <year>2003</year>
        <publisher>O'Reilly</publisher>
    </book>
    <book>
        <title>Professional XML</title>
        <author>
            <last_name>Evjen</last_name>
            <first_name>Bill</first_name>
        </author>
        <year>2007</year>
        <publisher>Wrox</publisher>
    </book>
    <article>
        <title>FileNet Integrates a New XML Editor for Non-Techies</title>
        <author>
            <last_name>Roe</last_name>
            <first_name>David</first_name>
        </author>
        <journal>CMS Wire</journal>
        <year>2009</year>
    </article>
    <article>
        <title>The Groundbreaking Potential of Codeless Ajax</title>
        <author>
            <last_name>Dusoe</last_name>
            <first_name>Jim</first_name>
        </author>
        <journal>Tech News World</journal>
        <year>2009</year>
        <pages>4</pages>
    </article>
    <article>
        <title>Windows and .NET Watch: Recognizing DSL opportunities</title>
        <author>
            <last_name>O'Brien</last_name>
            <first_name>Larry</first_name>
        </author>
        <journal>Software Development Times</journal>
        <year>2009</year>
    </article>
    <article>
        <title>An embedded XML Database: Oracle Berkeley DB XML</title>
        <author>
            <last_name>Gibb</last_name>
            <first_name>Brian</first_name>
        </author>
        <journal>The Register</journal>
        <year>2003</year>
        <pages>8</pages>
    </article>
    <article>
        <title>Open Source PostgreSQL 8.3 Better Suited For Web Applications </title>
        <author>
            <last_name>Babcock</last_name>
            <first_name>Charles</first_name>
        </author>
        <journal>Information Week</journal>
        <year>2008</year>
        <pages>1</pages>
    </article>
</myDB> 
```

输出是整个 xml 本身，后跟按原始顺序排列的书籍和文章元素。

我真的需要一个 FOR 吗？有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T13:01:20.233

检查这个：

```
let $doc := doc("Your.xml)/myDB
for $eachBook in $doc/child::*
order by $eachBook/year
return $eachBook 
```

**输出：**

```
<?xml version="1.0" encoding="UTF-8"?>
<book>
    <title>ebXML : Concepts and Application</title>
    <author>
      <last_name>Gibb</last_name>
      <first_name>Brian</first_name>
    </author>
    <year>2003</year>
    <publisher>Wiley</publisher>
  </book>
<article>
    <title>test title</title>
    <author>
      <last_name>Gibb</last_name>
      <first_name>Brian</first_name>
    </author>
    <year>2003</year>
    <publisher>test Wiley</publisher>
  </article>
<book>
    <title>Learning XML </title>
    <author>
      <last_name>Ray</last_name>
      <first_name>Erik</first_name>
    </author>
    <author>
      <last_name>Smith</last_name>
      <first_name>David</first_name>
    </author>
    <year>2003</year>
    <publisher>O'Reilly</publisher>
  </book>
<article>
    <title>An embedded XML Database: Oracle Berkeley DB XML</title>
    <author>
      <last_name>Gibb</last_name>
      <first_name>Brian</first_name>
    </author>
    <journal>The Register</journal>
    <year>2003</year>
    <pages>8</pages>
  </article>
<book>
    <title>Beginning XML</title>
    <author>
      <last_name>Hunter</last_name>
      <first_name>David</first_name>
    </author>
    <year>2007</year>
    <publisher>Wrox</publisher>
  </book>
<book>
    <title>Professional XML</title>
    <author>
      <last_name>Evjen</last_name>
      <first_name>Bill</first_name>
    </author>
    <year>2007</year>
    <publisher>Wrox</publisher>
  </book>
<book>
    <title>XML: Visual QuickStart Guide</title>
    <author>
      <last_name>Goldberg</last_name>
      <first_name>Kevin</first_name>
    </author>
    <author>
      <last_name>Doe</last_name>
      <first_name>John</first_name>
    </author>

    <year>2008</year>
    <publisher>Peachpit Press</publisher>
  </book>
<article>
    <title>Open Source PostgreSQL 8.3 Better Suited For Web Applications </title>
    <author>
      <last_name>Babcock</last_name>
      <first_name>Charles</first_name>
    </author>
    <journal>Information Week</journal>
    <year>2008</year>
    <pages>1</pages>
  </article>
<article>
    <title>FileNet Integrates a New XML Editor for Non-Techies</title>
    <author>
      <last_name>Roe</last_name>
      <first_name>David</first_name>
    </author>
    <journal>CMS Wire</journal>
    <year>2009</year>
  </article>
<article>
    <title>The Groundbreaking Potential of Codeless Ajax</title>
    <author>
      <last_name>Dusoe</last_name>
      <first_name>Jim</first_name>
    </author>
    <journal>Tech News World</journal>
    <year>2009</year>
    <pages>4</pages>
  </article>
<article>
    <title>Windows and .NET Watch: Recognizing DSL opportunities</title>
    <author>
      <last_name>O'Brien</last_name>
      <first_name>Larry</first_name>
    </author>
    <journal>Software Development Times</journal>
    <year>2009</year>
  </article> 
```

# restructuredtext - 将类添加到 reStructured Text 中的 html 链接

> ID：16147167
> 
> 赞同：2
> 
> 时间：2013-04-22T12:30:18.563
> 
> 标签：restructuredtext

我尝试将类添加到特定的链接地址

我想用 html 语言得到这个结果：

```
<a class="g-profile" href="http://plus.google.com/107666944254113159692" target="_blank">Winael</a> 
```

所以我尝试这样做：

```
.. role:: g-profile
   :class: g-profile

:Traduction: :g-profile:`Winael`_

.. _Winael: https://plus.google.com/107666944254113159692 
```

但它仍然不起作用。我不知道该尝试什么。

有人能帮我吗 ？

提前谢谢各位！

最好的问候， Winael

# javascript - 使用剑道 UI 上传上传图片

> ID：16147168
> 
> 赞同：0
> 
> 时间：2013-04-22T12:30:21.870
> 
> 标签：javascript, jquery, kendo-ui

我正在尝试使用 kendo ui upload 上传图像文件，这就是我正在做的

```
<form action="" method="post" enctype="multipart/form-data">  
      <label for="file">Filename:</label>
      <input type="file" name="AVATAAR" id="AVATAAR" />
</form>

var upload = $("#AVATAAR").data("kendoUpload");
if (!upload) {
    $("#AVATAAR").kendoUpload({
        async: {
            saveUrl: "**What do I to put here?**",
            removeUrl: "remove",
            autoUpload: true
        }
    });
} 
```

我有一个控制器，`CodeUserSettingsController.cs`我在其中编写了代码以将图像保存到文件夹中。

谁能告诉我要放`saveUrl`什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T13:13:58.837

我猜你已经编写了将图像保存在某个 Action 中的代码，所以 url 很简单`~/CodeUserSettings/<yourActionName>`......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-08T22:02:43.993

`saveUrl`您需要插入控制器的路径，在您的情况下为 CodeUserSettingsController.cs 。

为了更清楚，请查看以下示例：

*   如果控制器和图像上传文件在同一目录中，您必须编写：`"saveUrl: CodeUserSettingsController.cs"`
*   如果控制器和图像上传文件位于不同的目录中，您必须编写：`saveUrl: "path/to/the/directory/CodeUserSettingsController.cs"`

# .htaccess - 重写不适用于 ssl

> ID：16147169
> 
> 赞同：1
> 
> 时间：2013-04-22T12:30:24.063
> 
> 标签：.htaccess, mod-rewrite, ssl, https, prestashop

我无法弄清楚这一点，似乎 Prestashop url 重写在 url:s 中使用 ssl (https) 时停止工作，基本 url 像[https://www.domain.se](https://www.domain.se)一样工作正常，但例如图像不是在图像 url 上使用 https 时加载。这是 htaccess 文件，也许有人可以看到任何明显的错误？

```
# eTiendas.co Custom .htaccess prefix start
RewriteEngine On
RewriteCond %{HTTP_HOST} ^domain.se$ [NC]
RewriteRule ^(.*)$ http://www.domain.se/$1 [L,R=301]
# eTiendas.co Custom .htaccess prefix end# eTiendas.co Custom .htaccess prefix start
RewriteRule ^sv(.*)?$ http://www.domain.se$1 [R=301,L]
RewriteRule ^en(.*)?$ http://www.domain.se$1 [R=301,L]
# eTiendas.co Custom .htaccess prefix end

# ~~start~~ Do not remove this comment, Prestashop will keep automatically the code    outside this comment when .htaccess will be generated again
# .htaccess automaticaly generated by PrestaShop e-commerce open-source solution

<IfModule mod_rewrite.c>
RewriteEngine on
RewriteCond %{HTTP_HOST} ^www.domain.se$
RewriteRule . - [E=REWRITEBASE:/]
RewriteRule ^api/?(.*)$ %{ENV:REWRITEBASE}webservice/dispatcher.php?url=$1 [QSA,L]

# Images
RewriteCond %{HTTP_HOST} ^www.domain.se$
RewriteRule ^([0-9])(\-[_a-zA-Z0-9-]*)?(-[0-9]+)?/.+\.jpg$ %{ENV:REWRITEBASE}img/p/$1/$1$2$3.jpg [L]
RewriteCond %{HTTP_HOST} ^www.domain.se$
RewriteRule ^([0-9])([0-9])(\-[_a-zA-Z0-9-]*)?(-[0-9]+)?/.+\.jpg$ %{ENV:REWRITEBASE}img/p/$1/$2/$1$2$3$4.jpg [L]
RewriteCond %{HTTP_HOST} ^www.domain.se$
RewriteRule ^([0-9])([0-9])([0-9])(\-[_a-zA-Z0-9-]*)?(-[0-9]+)?/.+\.jpg$ %{ENV:REWRITEBASE}img/p/$1/$2/$3/$1$2$3$4$5.jpg [L]
RewriteCond %{HTTP_HOST} ^www.domain.se$
RewriteRule ^([0-9])([0-9])([0-9])([0-9])(\-[_a-zA-Z0-9-]*)?(-[0-9]+)?/.+\.jpg$ %{ENV:REWRITEBASE}img/p/$1/$2/$3/$4/$1$2$3$4$5$6.jpg [L]
RewriteCond %{HTTP_HOST} ^www.domain.se$
RewriteRule ^([0-9])([0-9])([0-9])([0-9])([0-9])(\-[_a-zA-Z0-9-]*)?(-[0-9]+)?/.+\.jpg$ %{ENV:REWRITEBASE}img/p/$1/$2/$3/$4/$5/$1$2$3$4$5$6$7.jpg [L]
RewriteCond %{HTTP_HOST} ^www.domain.se$
RewriteRule ^([0-9])([0-9])([0-9])([0-9])([0-9])([0-9])(\-[_a-zA-Z0-9-]*)?(-[0-9]+)?/.+\.jpg$ %{ENV:REWRITEBASE}img/p/$1/$2/$3/$4/$5/$6/$1$2$3$4$5$6$7$8.jpg [L]
RewriteCond %{HTTP_HOST} ^www.domain.se$
RewriteRule ^([0-9])([0-9])([0-9])([0-9])([0-9])([0-9])([0-9])(\-[_a-zA-Z0-9-]*)?(-[0-9]+)?/.+\.jpg$ %{ENV:REWRITEBASE}img/p/$1/$2/$3/$4/$5/$6/$7/$1$2$3$4$5$6$7$8$9.jpg [L]
RewriteCond %{HTTP_HOST} ^www.domain.se$
RewriteRule ^([0-9])([0-9])([0-9])([0-9])([0-9])([0-9])([0-9])([0-9])(\-[_a-zA-Z0-9-]*)?(-[0-9]+)?/.+\.jpg$ %{ENV:REWRITEBASE}img/p/$1/$2/$3/$4/$5/$6/$7/$8/$1$2$3$4$5$6$7$8$9$10.jpg [L]
RewriteCond %{HTTP_HOST} ^www.domain.se$
RewriteRule ^c/([0-9]+)(\-[\.*_a-zA-Z0-9-]*)(-[0-9]+)?/.+\.jpg$ %{ENV:REWRITEBASE}img/c/$1$2$3.jpg [L]
RewriteCond %{HTTP_HOST} ^www.domain.se$
RewriteRule ^c/([a-zA-Z_-]+)(-[0-9]+)?/.+\.jpg$ %{ENV:REWRITEBASE}img/c/$1$2.jpg [L]

# Dispatcher
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteCond %{HTTP_HOST} ^www.domain.se$
RewriteRule ^.*$ - [NC,L]
RewriteCond %{HTTP_HOST} ^www.domain.se$
RewriteRule ^.*$ %{ENV:REWRITEBASE}index.php [NC,L]
</IfModule>

<IfModule mod_expires.c>
ExpiresActive On
ExpiresByType image/gif "access plus 1 month"
ExpiresByType image/jpeg "access plus 1 month"
ExpiresByType image/png "access plus 1 month"
ExpiresByType text/css "access plus 1 week"
ExpiresByType text/javascript "access plus 1 week"
ExpiresByType application/javascript "access plus 1 week"
ExpiresByType application/x-javascript "access plus 1 week"
ExpiresByType image/x-icon "access plus 1 year"
</IfModule>

FileETag INode MTime Size
<IfModule mod_deflate.c>
AddOutputFilterByType DEFLATE text/html
AddOutputFilterByType DEFLATE text/css
AddOutputFilterByType DEFLATE text/javascript
AddOutputFilterByType DEFLATE application/javascript
AddOutputFilterByType DEFLATE application/x-javascript
</IfModule>

#If rewrite mod isn't enabled
ErrorDocument 404 /index.php?controller=404 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-03T19:57:51.340

由于作者没有发布解决方案：

更改以下文件（/etc/apache2/sites-available/default-ssl）：

```
 <Directory /var/www/>
            Options Indexes FollowSymLinks MultiViews
            AllowOverride none
            Order allow,deny
            allow from all
    </Directory> 
```

对此：

```
 <Directory /var/www/>
            Options Indexes FollowSymLinks MultiViews
            AllowOverride all
            Order allow,deny
            allow from all
    </Directory> 
```

还要记住指定证书文件（在同一个虚拟主机文件中）以及我们运行：

a2enmod ssl

a2ensite 默认-ssl

服务 apache2 重启

# java - JNI：捕获初始化时间异常

> ID：16147170
> 
> 赞同：1
> 
> 时间：2013-04-22T12:30:25.260
> 
> 标签：java, debugging, exception

好吧，我对这个完全没有想法。有谁知道我如何连接到 Java 的异常管道以捕获（并记录到文本文件）*所有*正在发生的异常？

情况是这样的：我在 JAR 文件 (A) 中有一个库，该库又依赖于第二个 JAR 文件 (B)。A 没有主类，因为它只是一个类库，我通过 JNI 访问和调用它。我遇到的问题是这个。当我尝试在加载 A 的情况下初始化 JNI 时，JNI 返回一个未指定的错误。

我强烈怀疑此错误源于 Log4J 记录器单元的实例化，该实例化发生在 B 中的静态代码（方法之外）中，我认为由于日志文件的权限问题而引发 IOException。但是，我在找出正在发生的事情时遇到问题，因为在链接阶段（当 A 导入 B 时）抛出异常（我怀疑这是问题的原因），因此无法被 try-catch 捕获堵塞。此外，由于没有 main 方法，因此没有明显的地方可以放置 try-catch 块来捕获此异常。

我想要某种方法来捕获任一 JAR 中出现的所有异常并将它们转储到文本文件中。我不能（轻松）修改 B（我没有反编译的 JAR）。有任何想法吗？

以下是使用指定库和选项调用 JNI 的 C 代码：

```
_DLL_EXPORT PyObject *initVM(PyObject *self, PyObject *args, PyObject *kwds)
{
    static char *kwnames[] = {
        "classpath", "initialheap", "maxheap", "maxstack",
        "vmargs", NULL
    };
    char *classpath = NULL;
    char *initialheap = NULL, *maxheap = NULL, *maxstack = NULL;
    char *vmargs = NULL;

    if (!PyArg_ParseTupleAndKeywords(args, kwds, "|zzzzz", kwnames,
                                     &classpath,
                                     &initialheap, &maxheap, &maxstack,
                                     &vmargs))
        return NULL;

    if (env->vm)
    {
        PyObject *module_cp = NULL;

        if (initialheap || maxheap || maxstack || vmargs)
        {
            PyErr_SetString(PyExc_ValueError,
                            "JVM is already running, options are ineffective");
            return NULL;
        }

        if (classpath == NULL && self != NULL)
        {
            module_cp = PyObject_GetAttrString(self, "CLASSPATH");
            if (module_cp != NULL)
                classpath = PyString_AsString(module_cp);
        }

        if (classpath && classpath[0])
            env->setClassPath(classpath);

        Py_XDECREF(module_cp);

        return getVMEnv(self);
    }
    else
    {
        JavaVMInitArgs vm_args;
        JavaVMOption vm_options[32];
        JNIEnv *vm_env;
        JavaVM *vm;
        unsigned int nOptions = 0;
        PyObject *module_cp = NULL;

        vm_args.version = JNI_VERSION_1_4;
        JNI_GetDefaultJavaVMInitArgs(&vm_args);

        if (classpath == NULL && self != NULL)
        {
            module_cp = PyObject_GetAttrString(self, "CLASSPATH");
            if (module_cp != NULL)
                classpath = PyString_AsString(module_cp);
        }

#ifdef _jcc_lib
        PyObject *jcc = PyImport_ImportModule("jcc");
        PyObject *cp = PyObject_GetAttrString(jcc, "CLASSPATH");

        if (classpath)
            add_paths("-Djava.class.path=", PyString_AsString(cp), classpath,
                      &vm_options[nOptions++]);
        else
            add_option("-Djava.class.path=", PyString_AsString(cp),
                       &vm_options[nOptions++]);

        Py_DECREF(cp);
        Py_DECREF(jcc);
#else
        if (classpath)
            add_option("-Djava.class.path=", classpath,
                       &vm_options[nOptions++]);
#endif

        Py_XDECREF(module_cp);

        if (initialheap)
            add_option("-Xms", initialheap, &vm_options[nOptions++]);
        if (maxheap)
            add_option("-Xmx", maxheap, &vm_options[nOptions++]);
        if (maxstack)
            add_option("-Xss", maxstack, &vm_options[nOptions++]);

        if (vmargs)
        {
#ifdef _MSC_VER
            char *buf = _strdup(vmargs);
#else
            char *buf = strdup(vmargs);
#endif
            char *sep = ",";
            char *option;

            for (option = strtok(buf, sep); option; option = strtok(NULL, sep))
            {
                if (nOptions < sizeof(vm_options) / sizeof(JavaVMOption))
                    add_option("", option, &vm_options[nOptions++]);
                else
                {
                    free(buf);
                    for (unsigned int i = 0; i < nOptions; i++)
                        delete vm_options[i].optionString;
                    PyErr_Format(PyExc_ValueError, "Too many options (> %d)",
                                 nOptions);
                    return NULL;
                }
            }
            free(buf);
        }

        //vm_options[nOptions++].optionString = "-verbose:gc";
        //vm_options[nOptions++].optionString = "-Xcheck:jni";

        vm_args.nOptions = nOptions;
        vm_args.ignoreUnrecognized = JNI_FALSE;
        vm_args.options = vm_options;
 if (JNI_CreateJavaVM(&vm, (void **) &vm_env, &vm_args) < 0)
        {
            for (unsigned int i = 0; i < nOptions; i++)
                delete vm_options[i].optionString;

            PyErr_Format(PyExc_ValueError,
                         "An error occurred while creating Java VM");
            return NULL;
        }

        env->set_vm(vm, vm_env);

        for (unsigned int i = 0; i < nOptions; i++)
            delete vm_options[i].optionString;

        t_jccenv *jccenv = (t_jccenv *) PY_TYPE(JCCEnv).tp_alloc(&PY_TYPE(JCCEnv), 0);
        jccenv->env = env;

#ifdef _jcc_lib
        registerNatives(vm_env);
#endif

        return (PyObject *) jccenv;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T16:31:46.350

好的，所以我得到了我想要的解决方案。解决方案是对问题中列出的以下代码段的更新：

```
 if (JNI_CreateJavaVM(&vm, (void **) &vm_env, &vm_args) < 0)
    {
        for (unsigned int i = 0; i < nOptions; i++)
            delete vm_options[i].optionString;

        PyErr_Format(PyExc_ValueError,
                     "An error occurred while creating Java VM");
        return NULL;
    } 
```

该适配支持构建更详细的错误消息，其中添加了两个特定信息：

1.  JNI_CreateJavaVM 方法返回的错误代码（如果有）；
2.  出现此类错误代码时发生的详细 Java 异常。

原始代码中的上述片段已替换为以下内容：

```
 vmInitSuccess = JNI_CreateJavaVM(&vm, (void **) &vm_env, &vm_args);
    if (vmInitSuccess < 0)
    {
        for (unsigned int i = 0; i < nOptions; i++)
            delete vm_options[i].optionString;

        //Set up basic error message
        sprintf(strVMInitSuccess, "%d", vmInitSuccess);
        strcpy(strVMError, "An error occurred while creating Java VM (No Exception): ");
        strcat(strVMError, strVMInitSuccess);

        //Get exception if there is one
        if((exc = vm_env->ExceptionOccurred()))
        {
            //Clear the exception since we have it now
            vm_env->ExceptionClear();
            //Get the getMessage() method
            if ((java_class = vm_env->FindClass ("java/lang/Throwable")))
            {
                if ((method = vm_env->GetMethodID(java_class, "getMessage", "()Ljava/lang/String;")))
                {
                    int size;
                    strExc = static_cast<jstring>(vm_env->CallObjectMethod(exc, method)); 
                    charExc = vm_env->GetStringUTFChars(strExc, NULL);
                    size = sizeof(strVMError) + sizeof(charExc);
                    char strVMException[size];
                    strcpy(strVMException, "An error occurred while creating Java VM (Exception): ");
                    strcat(strVMException, charExc);
                    PyErr_Format(PyExc_ValueError, strVMException);
                    return NULL;
                }
            }
        }
        PyErr_Format(PyExc_ValueError, strVMError);
        return NULL;
    } 
```

感谢@Parsifal 对此解决方案的帮助。

# c# - 通过 Windows AD 集成进行身份验证，无需登录弹出窗口

> ID：16147171
> 
> 赞同：0
> 
> 时间：2013-04-22T12:30:25.370
> 
> 标签：c#, asp.net, iis-7, windows-authentication

我已禁用匿名访问。我的池正在使用“集成 Windows 身份验证”。

问题：当 Windows 中的登录用户（AD 中有登录用户条目）尝试在浏览器中访问我的应用程序时，浏览器中会出现一个 windows 身份验证登录框。

我们能避免吗？由于用户已经登录机器，我们不能进行一些设置以允许浏览器使用相同的凭据而不是提示登录模式。

在研究中，我也去了这个链接[如何在没有登录弹出窗口的情况下自动验证窗口集成？](https://stackoverflow.com/questions/4762700/how-to-automatically-authenticate-windows-integrate-without-login-popup)我只看到了 IE 的解决方案，可以通过以下方式完成：

“转到工具 -> Internet 选项 -> 安全 -> 自定义级别 -> 一直滚动到底部并选择“使用当前用户名和密码自动登录” -> 确定 -> 确定 -> 关闭并重新打开浏览器。”

这意味着我必须前往每台用户机器并在他们的 IE 浏览器中设置该设置。我们不能通过应用程序的 IIS 或 web.config 来做吗？

另外，这个解决方案只适用于 IE，其他的呢？像 Chrome 和 FF。我们如何防止 Chrome 和 FF 中的登录提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T12:37:37.620

Firefox 使用 about:config 中的设置来定义使用 Windows 身份验证的“白名单”。

```
network.automatic-ntlm-auth.trusted-uris 
```

基本上，您只需输入以逗号分隔的服务器名称。

Chrome 只使用 Windows 中定义的“本地 Intranet”站点列表（与 IE 使用的相同）

# git - 命令提示符目录样式

> ID：16147173
> 
> 赞同：0
> 
> 时间：2013-04-22T12:30:36.973
> 
> 标签：git, shell, command, zsh, prompt

我特别需要调整命令提示符。目前我正在使用[Holmans Dotfiles](https://github.com/holman/dotfiles)，我想进一步自定义它，以创建一个更具可读性和清晰的提示。下面使用图像描述了我想要的内容，请注意，这些是经过照片处理的，以便看起来像我想要的那样；）。[这也是github上的一个问题，内联图片！](https://github.com/holman/dotfiles/issues/71)

假设您有如下图所示的文件结构：

![在此处输入图像描述](https://i.stack.imgur.com/1TlXp.png)

目前，当我在让我们说 map3 时，我的提示只显示：

![图片](https://f.cloud.github.com/assets/429659/200069/c28234a6-80b7-11e2-8b71-1adc0aab4bc8.png)

我想扩展它，但使用其他样式。目前我所在的当前地图（map3）以青色突出显示。我希望能够看到它的父母，但那些没有以相同颜色突出显示的。请看下图：

![图片](https://f.cloud.github.com/assets/429659/200059/412b381c-80b7-11e2-920b-30db901a9653.png)

据我所知，%3 给出了最后 3 个目录。但是我不知道如何单独设置每个目录的样式。

--------------------------------------- 另一个可选的想法 ------------------- ---------------------

我有的另一个想法，但与上述问题相比，它的重要性次要是基于目录是否是 git 存储库是或否有一个相对提示。（因此，直到 git repo 的根图，dirtree 始终可见）

也就是说map0是git存储库的根，我在map3中，那么我希望我的提示是这样的：

![图片](https://f.cloud.github.com/assets/429659/200115/c6bce514-80b9-11e2-8ced-198b9af11dff.png)

当我像这样在map5中时：

![图片](https://f.cloud.github.com/assets/429659/200116/cea6b656-80b9-11e2-98f5-61d5bc88f0dc.png)

可选地，能够像这样设置 rootgit 映射的样式会很好，例如：

![图片](https://f.cloud.github.com/assets/429659/200131/deaca95c-80b9-11e2-9584-84a622f7da81.png)

目前我的提示与holmans dotfiles中的相同

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T12:37:08.453

### 提示中的多色路径

```
 directory_name() {
    PROMPT_PATH=""

    CURRENT=`dirname ${PWD}`
    if [[ $CURRENT = / ]]; then
        PROMPT_PATH=""
    elif [[ $PWD = $HOME ]]; then
        PROMPT_PATH=""
    else
        if [[ -d $(git rev-parse --show-toplevel 2>/dev/null) ]]; then
            # We're in a git repo.
            BASE=$(basename $(git rev-parse --show-toplevel))
            if [[ $PWD = $(git rev-parse --show-toplevel) ]]; then
                # We're in the root.
                PROMPT_PATH=""
            else
                # We're not in the root. Display the git repo root.
                GIT_ROOT="%{$fg_bold[magenta]%}${BASE}%{$reset_color%}"

                PATH_TO_CURRENT="${PWD#$(git rev-parse --show-toplevel)}"
                PATH_TO_CURRENT="${PATH_TO_CURRENT%/*}"

                PROMPT_PATH="${GIT_ROOT}${PATH_TO_CURRENT}/"
            fi
        else
            PROMPT_PATH=$(print -P %3~)
            PROMPT_PATH="${PROMPT_PATH%/*}/"
        fi
    fi

    echo "%{$fg_bold[cyan]%}${PROMPT_PATH}%{$reset_color%}%{$fg[red]%}%1~%{$reset_color%}"
} 
```

这将显示 git root 的路径（git root in `magenta`，除非你在 git root 中，在这种情况下它只会显示当前目录 in `red`）：

![修复了一些问题。](https://i.stack.imgur.com/tUfvO.png)

### 可能的改进：

1.  这显示了 git repo 的根目录`magenta`，除非您在根目录中，在这种情况下，它是红色的，就像您所在的所有其他目录一样。始终为 git root 着色（即使它是当前目录）可能是不错（目前可能会令人困惑？）。

2.  如果存在，我会显示相对于 git repo 根目录的路径。另一种选择可能是显示完整路径，为 git repo 的根着色，如下例所示：

    ```
    ~/repositories/config-files/zshrc.d
    ^-------------^
       White
                   ^-----------^
                     Magenta
                                ^------^
                                  Red 
    ```

3.  子模块着色：请注意，在屏幕截图中，路径根被重置为最深的 git repo（所以在子模块中，我们看不到`config-files/oh-my-zsh`，而只有`oh-my-zsh`）。我不确定如何检测子模块，但这可能是进一步的改进。

### 更多详细信息：

有一个相当深入的外观[这是我的笔记]我是如何[在这里](http://radiumblue.net/blog/2013/04/29/zsh-prompt-spicing-up-the-present-working-directory/)做这一切的。它还没有最后的接触（git root 和 PWD 之间的路径），但其他一切都在那里。如果您尝试修改它并希望更好地理解它可能会很有用。

# php - 在php中抓取https json url

> ID：16147174
> 
> 赞同：-2
> 
> 时间：2013-04-22T12:30:38.777
> 
> 标签：php, json, https

在过去的 2-3 个月里，我一直在使用此代码来获取所需的 json 数据变量。当 url 更改为 https:// 时，它会出错并且不会显示。有没有不同的方法从 http 获取 json url 和 php 的 https？我似乎找不到任何好的例子或文档。

```
<?
$btcjsonurl = "http://blockchain.info/stats?format=json";
$btcjson = file_get_contents($btcjsonurl,0,null,null);
$btcdata = json_decode($btcjson, true);
$btcdiff = $btcdata['difficulty'];
echo $btcdiff;
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T12:35:13.370

有什么错误？

看到[这个](https://stackoverflow.com/questions/1975461/file-get-contents-with-https)（可能是骗局）

除非，有什么理由不能使用[curl](http://php.net/manual/en/book.curl.php)或类似的 php 客户端？

Https 需要 SSL 等额外的客户端实现，而所有 file_get_contents，在没有 $opts 的情况下调用，将在功能上执行读取文件流。例如，如果 SSL 证书中的主机名不是您传递给文件获取内容的链接中的主机名，则 https 的实现需要您 - 客户端 - 来验证这一点（通常通过在允许的主机列表中查找，您将需要手动写入）。但是因为你不是直接与客户合作，所以你没有机会处理这个问题。

另一条路线当然是使用[stream_context_create](http://php.net/manual/en/function.stream-context-create.php)，但这已在上面的链接中介绍，所以我不会重复。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T12:35:24.257

最有可能的是，目标 URL 位于其 HTTPS 证书未使用 PHP 知道的提供商签署的服务器上。尝试将浏览器导航到该页面，并查看它是否通过 URL 显示挂锁。如果您收到任何安全警告，那么您肯定发现了阻止 PHP 下载内容的一件事。

# cakephp-2.0 - 如何在不同的控制器中调用模型验证？

> ID：16147183
> 
> 赞同：0
> 
> 时间：2013-04-22T12:31:01.723
> 
> 标签：cakephp-2.0

我有两个不同的表'users'和'users_details'。并制作了两个不同的模型“User”和“UserDetail”。在 user_details 表中，我有 user_id 和 image 字段。但我想使用 cakephp 规则从用户控制器验证 image 字段。所以请尽快给我任何想法来完成这项任务可能的。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T14:04:35.767

因为 UserDetail 有“user_id”，所以应该设置为属于 User，并且 User 应该是 hasMany 或 hasOne UserDetail。[您可以在手册http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html)中了解如何设置关系

然后在您的用户控制器中，您可以像这样访问 UserDetail 模型

```
$this->User->UserDetail->set($this->request->data);
if($this->User->UserDetail->validates()) {
    // ...
} 
```

保存相关模型数据：[http ://book.cakephp.org/2.0/en/models/saving-your-data.html#saving-related-model-data-hasone-hasmany-belongsto](http://book.cakephp.org/2.0/en/models/saving-your-data.html#saving-related-model-data-hasone-hasmany-belongsto)

来自控制器的验证数据：http: [//book.cakephp.org/2.0/en/models/data-validation/validating-data-from-the-controller.html](http://book.cakephp.org/2.0/en/models/data-validation/validating-data-from-the-controller.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T12:33:55.693

如果 UserDetail 是您在控制器中的模型，请尝试以下操作：

```
$this->loadModel('UserDetail');
if ($this->UserDetail->validates()) {
    // it validated logic
} else {
    // didn't validate logic
    $errors = $this->UserDetail->validationErrors;
} 
```

# javascript - 找不到模块子进程

> ID：16147186
> 
> 赞同：11
> 
> 时间：2013-04-22T12:31:13.727
> 
> 标签：javascript, node.js, npm

“子进程”应该是一个内置的节点库。但是，当我在节点外壳中键入“require（'child-process'）”时，我收到错误：“找不到模块'child-process'”。任何想法为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-22T12:32:19.970

使用`require('child_process');`（带下划线，而不是连字符）。

# c# - 来自泛型集合的不同类型

> ID：16147187
> 
> 赞同：0
> 
> 时间：2013-04-22T12:31:14.583
> 
> 标签：c#, linq, list

我有一个对象列表

```
List<Animals> animals 
```

我正在尝试访问`Type`内部的每个不同的动物`animals`（例如`Dog`, `Cat`, `Walrus`）并使用这种想法将其放入另一个通用集合中：

```
List<Type> types 
    = animals.SelectMany<Animal, Type>(a => a.GetType()).Distinct<Type>(); 
```

或者

```
// EqualityComparer<T> is a generic implementation of IEqualityComparer<T>
List<Type> types 
    = animals.Distinct<Animal>(new EqualityComparer<Animal>((a, b) => a.GetType() == b.GetType())); 
```

但是我无法编译其中任何一个。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T12:33:07.857

为什么`SelectMany`？标准`Select`应该做的工作：

```
List<Type> types = animals.Select(x => x.GetType()).Distinct(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T12:56:20.133

`Dictionary<Type, List<Animal>>`列表中的任何列表仅包含键类型的元素怎么样？

```
var typeSpecficGroups = animals.GroupBy(animal => animal.GetType());
var dictOfTypes = typeSpecficGroups.ToDictionary(group => group.Key, group => group.ToList()); 
```

现在您可以询问字典是否有特定的动物并获取相应的动物列表。缺点是您必须将列表中的每个元素强制转换为具体类型：

```
List<Animal> matchingList;

if (dictOfTypes.TryGetValue(typeof(Dog), out matchingList))
{
    var dogs = matchingList.Cast<Dog>();

    foreach (var dog in dogs)
    {
        dog.FindBone();
    }
} 
```

# c - C 字符串被截断的错误

> ID：16147190
> 
> 赞同：-1
> 
> 时间：2013-04-22T12:31:23.663
> 
> 标签：c, string, yacc

我正在研究关于语法分析的学校主题。目标是创建一种小型语言，以便使用 cairo 库创建矢量图形。我们选择在 C 中使用中间状态。

我们使用 Yacc 生成由 gcc 编译的 C 代码。它工作正常，但我对字符串有一些问题。

这是使用的代码：

```
 int sumChar = 0 ;

        char outnb1[20];
        char outnb2[20];

        sprintf(outnb1, "%f;", $4);
        sprintf(outnb2, "%f;", $8);

        sumChar = (6+strlen($2)+1+5+strlen($2)+1+strlen(outnb1)+strlen($6)+strlen($7)+strlen(outnb2)+strlen($10)+strlen($11)+1+1+strlen($14)+1);

// $ 14 is the string returned by another part of the code.

        printf("String = %s\nSIZE = %d\n",$14,strlen($14));

//The printf here is exact and the string is not truncated :
//cairo_line_to ( cr ,prevPoint[0] ,prevPoint[1]);
//cairo_move_to ( cr ,prevPoint[0] ,prevPoint[1]);

        char *result = malloc(sizeof(char)*sumChar);
        sprintf(result, "%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s","\n\nint ",$2,";","\nfor(",$2,"=",outnb1,$6,$7,outnb2,$10,$11,")","{",$14,"}");
        printf("String after sprintf = %s\nSIZE = %d\n",$14,strlen($14));

//The printf print something like :
//cairo_line_to ( cr ,prevPoint[0] ,prevPoint[1]);
//cairo_move_to ( cr ,prevPoint[0]�

        $$ = result; 
```

我真的不明白为什么字符串在 malloc 之后被截断。这显然是一个内存错误，但我不知道为什么。任何想法或解决方案？

编辑 ：

yacc规则：

```
%union
{
    double number;
    char * str;
};

%token DRAW <number>NB <str>COMP <str>VARNAME <str>VARFOR <str>INC;
%type <str>D;
%type <str>BLOCFOR;
%type <str>FOR;

FOR : '(' VARFOR '=' NB ';' VARFOR COMP NB ';' VARFOR INC ')' '{' BLOCFOR '}' 
    {
        int sumChar = 0 ;
        char outnb1[20];
        char outnb2[20];
        sprintf(outnb1, "%f;", $4);
        sprintf(outnb2, "%f;", $8);
        sumChar += (6+strlen($2)+1+5+strlen($2)+1+strlen(outnb1)+strlen($6)+strlen($7)+strlen(outnb2)+strlen($10)+strlen($11)+1+1+strlen($14)+1);
        printf("VALUE OF BLOCFOR = %s\nSIZE = %d\n",$14,strlen($14));

        char *result = malloc(sizeof(char)*(sumChar+1));
        sprintf(result, "%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s","\n\nint ",$2,";","\nfor(",$2,"=",outnb1,$6,$7,outnb2,$10,$11,")","{",$14,"}");
        printf("VALUE OF BLOCFOR AFTER RESULT = %s\nSIZE = %d\n",$14,strlen($14));
        printf("%s\n",result );
        $$ = result;
    }

BLOCFOR : DRAW D '$' {$$ = $2; printf("INSIDE BLOCFOR %s\nSIZE = %d\n",$2,strlen($2));} 
```

我希望它有所帮助。我不能真正给出一个工作代码，因为它需要一个简化的 lex 文件。但是我可以这样说：

```
char result[sumChar]; 
```

`result`是正确的，但`$$ = result`不起作用（我不能使用 FOR 返回的值，它只是随机字符，如 �G�+0��I�F���I�）

这是 lex 源中 str 值的解析和返回：

```
<FOR>[[:alpha:]]+ {yylval.str = strdup(yytext);return VARFOR;} 
```

已解决：问题已解决，这是对 sumChar 和 D 令牌内部分配的错误计算。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T12:37:40.363

该变量`sumChar`不包含`+1`终止`'\0'`字符的额外内容。这很可能最终导致*未定义的行为*，您的问题可能是其中的症状。要么将其添加到通话中，要么添加`sumChar`到`malloc`通话中。

# struts2 - Struts2 Jquery Ajax 表单序列化

> ID：16147192
> 
> 赞同：1
> 
> 时间：2013-04-22T12:31:25.657
> 
> 标签：struts2

我正在学习 Struts2，并且在使用 Jquery 序列化提交表单时有以下问题。我有一个操作类，其中有一个名为 Policy 的对象，并且该策略类具有一组字段，如下所示。使用 jquery ajax 我想在我的 Action 类中设置一个 json 字符串，并想将它反序列化为一个对象。

我尝试了多少次，我无法设置我在动作类中定义的字符串。下面是代码

```
Class CassPolicy{
  String policyNumber;
  String name; 
  //getsets for members

} 
```

行动：

```
Class PolicyAction{
   String cassPolicyString;
   CassPolicy cassPolicy = new CassPolicy();
   //getsets for members

   String save(){
//In save method  I want to convert the policyString to policy object
//policyString always returns null
   } 
} 
```

JSP：

```
$.ajax({
 url:PolicyAction.action,
 type:'post',
 data:$("#policyForm").serialize(),
 async:true,
 success:function(data){
 }

});

<s:form id="policyForm">
    <s:textfield name="cassPolicy.policyNumber" label="policyNumber"></s:textfield>
    <s:textfield name="cassPolicy.name" label="name"></s:textfield> 
</s:form> 
```

我什至在ajax中尝试过类似的东西`data:{cassPolicyString:$("#policyForm).serialize()}`

有人可以帮我指出正确的方向或完成任务的正确方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T14:06:26.623

我终于想通了。问题是表单序列化没有给出 json 格式。我使用下面链接中的代码将我的表单序列化为 json 对象，并在 struts.xml 中的操作中添加了一个拦截器 ref 元素，最终将我的表单值分配给了 cassPolicy 对象。

[使用 jQuery 将表单数据转换为 JavaScript 对象](https://stackoverflow.com/questions/1184624/convert-form-data-to-js-object-with-jquery)

# java - 无法共同创建对象/找不到名字对象 | 雅各布

> ID：16147193
> 
> 赞同：3
> 
> 时间：2013-04-22T12:31:27.297
> 
> 标签：java, com, jacob

创建`ActiveXComponent`使用 JACOB 时出现以下错误。

```
com.jacob.com.ComFailException: Can't co-create object
    at com.jacob.com.Dispatch.createInstanceNative(Native Method)
    at com.jacob.com.Dispatch.<init>(Dispatch.java:99)
    at com.jacob.activeX.ActiveXComponent.<init>(ActiveXComponent.java:58)
    at com.paston.jacobtest.RidderIQ.main(RidderIQ.java:30) 
```

我需要在安装过程中不自行注册其 DLL 的程序中使用的 COM 对象。

为了注册 DLL，我根据[这篇](http://netheadaches.wordpress.com/2012/04/22/jacob-cant-co-create-object/)文章使用了 64 位版本的 RegAsm，这可能会有所帮助。此外，我尝试加载外部程序的每个 DLL，因为我怀疑加载依赖项可能存在“问题”。

这是我当前的代码：

```
public static void main(String[] args) {

    String dllDir = "C:\\Program Files (x86)\\Ridder iQ Client\\Bin\\";
    File folder = new File( dllDir );

    for (final File fileEntry : folder.listFiles()) {
        String str = fileEntry.getName();
        if (str.substring(str.lastIndexOf('.') + 1).equals("dll")) {
            System.out.println(fileEntry.getName());
            System.load(dllDir + str);
        }
    }

    try {
        ActiveXComponent example = new ActiveXComponent("RidderIQSDK");
    } catch (Exception e) {
        System.out.println(e.getMessage());
        e.printStackTrace();
    }

} 
```

将名称更改为 clsid 时，我得到一个不同的异常。

```
com.jacob.com.ComFailException: Can't find moniker
at com.jacob.com.Dispatch.createInstanceNative(Native Method)
at com.jacob.com.Dispatch.<init>(Dispatch.java:99)
at com.jacob.activeX.ActiveXComponent.<init>(ActiveXComponent.java:58)
at com.paston.jacobtest.RidderIQ.main(RidderIQ.java:28) 
```

我让 JACOB 使用系统的 Random 对象在另一个测试中使用我的代码。

```
 ActiveXComponent random = new ActiveXComponent("clsid:4E77EC8F-51D8-386C-85FE-7DC931B7A8E7");
    Object obj = random.getObject();

    Object result = Dispatch.call((Dispatch) obj, "Next");
    System.out.println("Result: "+result); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-30T12:52:59.650

我尝试了所有解决方案，终于成功破解了JACOB相关的代码。根据以下示例代码创建您的代码。

```
public static void main(String[] args) {
        String libFile = System.getProperty("os.arch").equals("amd64") ? "jacob-1.17-x64.dll" :"jacob-1.17-x86.dll";
        try{
            /**
             * Reading jacob.dll file
             */
            InputStream inputStream = certificatemain.class.getResourceAsStream(libFile);
            /**
             *  Step 1: Create temporary file under <%user.home%>\AppData\Local\Temp\jacob.dll 
             *  Step 2: Write contents of `inputStream` to that temporary file.
             */
            File temporaryDll = File.createTempFile("jacob", ".dll");
            FileOutputStream outputStream = new FileOutputStream(temporaryDll);
            byte[] array = new byte[8192];
            for (int i = inputStream.read(array); i != -1; i = inputStream.read(array)){
                outputStream.write(array, 0, i);
            }
            outputStream.close();
            /* Temporary file will be removed after terminating-closing-ending the application-program */
            System.setProperty(LibraryLoader.JACOB_DLL_PATH, temporaryDll.getAbsolutePath());
            LibraryLoader.loadJacobLibrary();

            ActiveXComponent comp=new ActiveXComponent("Com.Calculation");        
            System.out.println("The Library been loaded, and an activeX component been created");

            int arg1=100;
            int arg2=50;
            //using the functions from the library:        
            int summation=Dispatch.call(comp, "sum",arg1,arg2).toInt();
            System.out.println("Summation= "+ summation);
        }catch(Exception e){
            e.printStackTrace();
        }
} 
```

现在让我告诉你如何注册你的DLL。我还关注了您提到的同一篇文章，但在处理小程序时不起作用。

使用命令行转到`x86`框架。

`C:\Windows\Microsoft.NET\Framework\v2.0.50727`

注册做同样的事情

`regasm.exe path_to_your_dll.dll /codebase`

不要传递任何其他标志，除了`/codebase`. 你已经完成了......你仍然发现任何问题让我知道......

# java - 旋转图像，使其面对另一个图像

> ID：16147198
> 
> 赞同：-1
> 
> 时间：2013-04-22T12:31:38.497
> 
> 标签：java, rotation, affinetransform

我正在创建一个游戏，并希望敌人在跟随玩家时面对玩家。我曾尝试以这种方式使用 AffineTransform：

```
at = new AffineTransform();
angle = Math.atan2(player.getY() - y,player.getX() - x) + (Math.PI / 2);
at.setToTranslation(x, y);
at.rotate(angle, width / 2, height / 2); 
```

然后使用`g2D.drawImage(image,at,this);`在屏幕上绘制敌人。问题是敌人只是面对屏幕上的一个随机位置，它确实会旋转以面对那个点，但它并没有像我想要的那样面对玩家。我在播放器类中使用完全相同的代码让播放器面对鼠标光标，然后它工作得很好，那么为什么它不能面对播放器呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T12:55:48.533

您的方法的问题之一是您没有考虑敌人已经面对的角度（他的图像），他可以在相同的 (x,y) 处但具有任何角度 [0,360]。所以你的轮换似乎是随机的，因为当你轮换他时考虑到球员，你轮换他时并没有考虑到他自己的面孔。你必须弄清楚他的图像面对的角度，找出玩家面对的角度，然后根据这个旋转他。

我建议为每个敌人/玩家添加一个字段`Enum facing`（如果角度很少且角度有限），或者`int facing`保持他们图像所面对的角度。

# android - 在两种状态之间动画 ListView 项目

> ID：16147201
> 
> 赞同：1
> 
> 时间：2013-04-22T12:31:42.040
> 
> 标签：android, android-listview, android-animation, android-listfragment

我有一个`ListView`我希望能够在两种状态之间切换的。在第一种状态下，列表中的所有项目除了一些文本之外都是方形的。在第二种状态下，列表中的所有项目都相同，只是方形现在是圆形。我想要的是能够将所有可见项目中的正方形转换为圆形，反之亦然（使用 a`ViewSwitcher`或类似的东西）。任何人都知道这是否可能以及我该如何实施它？（我`ListView`的数据来自一个`ArrayAdapter`。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T08:36:41.937

结果比最初想象的要简单。在`getView(int position, View convertView, ViewGroup parent)`我的适配器的方法中，我膨胀了一个新的`View`if`convertView`为 null，然后我`ViewSwitcher`从 my中找到 my `View`，检查`ViewSwitcher.getDisplayedChild()`方法，并酌情调用`ViewSwitcher.showNext()`or `ViewSwitcher.showNext()`。

# reporting-services - 需要有关 SQL Server 报告的帮助

> ID：16147204
> 
> 赞同：0
> 
> 时间：2013-04-22T12:31:56.550
> 
> 标签：reporting-services, ssrs-2008

我有一个关于 SQL Server Reporting Services 的问题。事实上，我想知道如何使特定的逻辑工作。

我有一份主报告，里面有一个子报告。该报告采用输入参数`test_id`并相应地以表格形式显示数据。

当`test_id`具有匹配的有效值时，它会显示数据。

但是，当`test_id`没有有效值因此它不匹配时，我得到如下的空表。

```
TESTNAME   TESTDETAIL  

Sub-report

TESTPARENTID PARENT DETAILS 
```

我想知道如何显示一条消息“没有找到 test_id 的详细信息”而不是显示任何空表。只应显示标题和副标题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T12:38:24.947

SSRS 中的 Tablix 等对象具有属性`NoRowsMessage`。

![在此处输入图像描述](https://i.stack.imgur.com/87CnB.png)

如果行数为零，您可以将其设置为显示一条消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T16:12:50.413

另一种选择是进入 tablix 属性。在可见性下，选择根据表达式显示或隐藏。您可以在此处编写表达式来隐藏整个 tablix。只需更改字段名称以匹配您的名称：

```
=iif(Count(Field1)=0,True,False) 
```

# charts - 数据集更新时 VB.NET 图表不更新

> ID：16147205
> 
> 赞同：0
> 
> 时间：2013-04-22T12:31:59.460
> 
> 标签：charts, dataset

我有一个名为 addchartPrevious24() 的子

在初始加载和用户要求刷新时调用此子程序。这个sub的工作是去一个access数据库查询信息。填充到数据集中。然后创建图表和图表区域。然后将数据集设置为图表的数据源。我的问题是，如果我重新执行子程序，它不会用新数据更新图表，尽管数据集确实得到了更新。

```
Public Sub addchartPrevious24()
   Dim Connection As OleDb.OleDbConnection = New OleDb.OleDbConnection("Provider=Microsoft.Jet.OLEDB.4.0;Data Source=E:\manage.mdb;Jet OLEDB:Database Password=password")
    Dim da1 As New OleDb.OleDbDataAdapter
    Dim ds1 As New DataSet()
    Dim Command As New OleDb.OleDbCommand

    Connection.Open()
    da1.SelectCommand = New OleDb.OleDbCommand("SELECT General_Counters_Table.product_id, Sum(General_Counters_Table.ulboardcyclecount) AS SumOfulboardcyclecount, ltrim(STR(Month(General_Counters_Table.Date_Time)))+ '/'+Ltrim(STR(Day(General_Counters_Table.Date_Time))) + '/'+ltrim(STR(Year(General_Counters_Table.Date_Time))) + ' hour ' +Ltrim(STR(Hour(General_Counters_Table.Date_Time)))  as DATEConverted FROM General_Counters_Table  where Date_Time >=(NOW()-1) and Date_Time <= (NOW()) GROUP BY General_Counters_Table.product_id, Year(General_Counters_Table.Date_Time), Month(General_Counters_Table.Date_Time), Day(General_Counters_Table.Date_Time), Hour(General_Counters_Table.Date_Time) ORDER BY Year(General_Counters_Table.Date_Time), Month(General_Counters_Table.Date_Time), Day(General_Counters_Table.Date_Time), Hour(General_Counters_Table.Date_Time)", Connection)
    da1.Fill(ds1, "Throughput")
    Connection.Close()

    'Defines Chart and Chart Area
    Dim chart1 = New Chart()
    Dim chartarea1 As ChartArea = New ChartArea()
    TabPage2.Controls.Add(chart1)
    chartarea1.Name = "ChartArea1"
    chart1.ChartAreas.Add(chartarea1)
    Chart1.Location = New System.Drawing.Point(10, 10)
    chart1.Name = "Chart1"
    Chart1.Size = New System.Drawing.Size(800, 400)
    chart1.TabIndex = 0
    chart1.Text = "Chart1"
    chartarea1.AxisX.LabelStyle.Angle = -60
    chartarea1.AxisX.Interval = 1
    chartarea1.AxisY.MajorGrid.Interval = 5
    chartarea1.BackColor = Color.Azure
    chartarea1.ShadowColor = Color.Red
    chartarea1.Area3DStyle.Enable3D = True
    chartarea1.AxisX.MajorGrid.Enabled = False
    chartarea1.AxisX.LabelStyle.Font = New System.Drawing.Font("Times New Roman", 11.0F, System.Drawing.FontStyle.Italic)

    'Legend
    Dim legend1 As Legend = New Legend()
    legend1.Name = "Legend1"
    chart1.Legends.Add(legend1)

    'Series
    Dim series1 As Series = New Series()
    series1.ChartType = SeriesChartType.StackedColumn
    series1.ChartArea = "ChartArea1"
    series1.Legend = "Legend1"
    series1.Name = "Throughput"
    chart1.Series.Add(series1)
    chart1.Series("Throughput").XValueMember = "DateConverted"
    chart1.Series("Throughput").YValueMembers = "sumofulboardcyclecount"
    chart1.Series("Throughput").IsValueShownAsLabel = True 'shows label on datapoint
    chart1.DataSource = ds1.Tables("Throughput")
    chart1.Update()
    chart1.DataBind()
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-01T21:22:29.150

我有同样的问题，为[“这个问题”提出了一个解决方案](https://stackoverflow.com/questions/3317718/vb-net-automatic-chart-update-with-new-data-entry "这个问题")

尝试使用以下方法清除数据点：

```
Chart.Series.Points.Clear() 
```

然后再次添加它们。

# javascript - 如何使用 D3.js 实现 R 内核密度估计图？

> ID：16147207
> 
> 赞同：5
> 
> 时间：2013-04-22T12:32:10.283
> 
> 标签：javascript, r, d3.js, kernel-density

这是我的 R 代码：

```
x <- c(5.89,6.81,6.69,7.61,5.44,6.17)
y <- c(1,0.09392423,0.07090779,0.0687634,0.06819157,0.06261615)

plot(density(x, bw=0.050, adjust=1, kernel="gaussian",weights=(y),n=1000)) 
```

我正在尝试使用 D3.js 或任何其他等效的 JavaScript 库来实现相同的结果..

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-22T15:24:55.943

你看过[核密度估计](http://bl.ocks.org/mbostock/4341954)的例子吗？

[![核密度估计](https://i.stack.imgur.com/dH7hQ.png)](http://bl.ocks.org/mbostock/4341954)

诚然，它使用 Epanechnikov 内核而不是 Gaussian，但可以修改该部分。

# c# - 无法将类型“float”隐式转换为“Microsoft.Xna.Framework.Rectangle”

> ID：16147213
> 
> 赞同：0
> 
> 时间：2013-04-22T12:32:43.590
> 
> 标签：c#, xna

我创建了一个包含 3 个浮点数和 3 个矩形的字典。之后，我创建一个列表来对字典进行排序。最低浮动应该是列表中的第一个条目。最后，我希望该变量`FirstRectInList`与列表中第一个条目的 Rectangle 具有相同的值。但我总是收到此错误消息：

> *无法将类型“float”隐式转换为“Microsoft.Xna.Framework.Rectangle”*

怎么了？变量`FirstRectInList`应该得到字典的值：`(0, 0, random.Next(101), random.Next(101))`。而不是字典的键。

```
Dictionary<float, Rectangle> Users = new Dictionary<float, Rectangle>();

for (int j = 0; j <= 3 - 1; j++)
{
  float Points = random.Next(101);
  Users.Add(Points, new Rectangle(0, 0, random.Next(101), random.Next(101)));
}
var list = Users.Keys.ToList();
list.Sort();

Rectangle FirstRectInList = list[0]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T12:35:31.767

`list`仅包含字典类型的键`float`。`Users`它不包含 type 的值`Rectangle`。
因此，`list[0]`返回最小的键而不是`Rectangle`最小的键。

要实现您想要做的事情，您可以使用 LINQ：

```
Rectangle FirstRectInList = Users.OrderBy(x => x.Key).First().Value; 
```

# c++ - 错误 C2100 - 非法间接

> ID：16147219
> 
> 赞同：14
> 
> 时间：2013-04-22T12:32:55.557
> 
> 标签：c++, arrays, templates, compiler-errors

我编写了一个非常简单的程序，用于在数组模板类中定义 * 运算符。当我尝试编译时，它给了我一个错误“非法间接”。任何有关此事的帮助将不胜感激！

这是运算符定义：

```
template <typename T>                                                                   
NumericArray<T> NumericArray<T>::operator * (const int factor) const
{
NumericArray<T>* TempArray2 = new NumericArray<T>(Size());
for (int i=0; i<Size(); i++)
{
    *TempArray2[i] = ((GetElement(i))*(factor));
}
return *TempArray2;
} 
```

这是测试主函数中的实现：

```
cout<<((*intArray1)*5).GetElement(0);                                   
cout<<((*intArray1)*5).GetElement(1);
cout<<((*intArray1)*5).GetElement(2); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-22T12:34:04.900

不要忘记您的[运算符优先级](http://en.cppreference.com/w/cpp/language/operator_precedence)规则。看来你想要：

```
(*TempArray2)[i] 
```

否则你的表达式`*TempArray2[i]`被认为是`*(TempArray2[i])`，我想你的`NumericArray<T>`类型没有重载*一元运算符。* `*`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T13:06:33.240

在`*TempArray2[i]`中，由于优先规则而`*`被应用于`TempArray[2]`，并且数组元素很可能没有一元运算`*`符。

*但是*您使用动态分配然后取消引用以按值返回意味着您有内存泄漏。
（您不需要`new`在 C++ 中创建对象——您可能也不需要在其中使用它`main`。）

这会更好（并避免整个间接问题）：

```
template <typename T>                                                                   
NumericArray<T> NumericArray<T>::operator * (int factor) const
{
    NumericArray<T> TempArray(Size());
    for (int i = 0; i < Size(); i++)
    {
        TempArray[i] = GetElement(i) * factor;
    }
    return TempArray;
} 
```

# c# - 如何在 C# 中使用 https？

> ID：16147223
> 
> 赞同：5
> 
> 时间：2013-04-22T12:33:14.530
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4, https

我正在开发一个网络应用程序。为了用户信息的安全，我需要一个 https 连接。我目前正在开发这个本地。我已按照以下教程进行操作：[http ://weblogs.asp.net/dwahlin/archive/2009/08/25/requiring-ssl-for-asp-net-mvc-controllers.aspx](http://weblogs.asp.net/dwahlin/archive/2009/08/25/requiring-ssl-for-asp-net-mvc-controllers.aspx)

当我构建我的项目时，页面会加载，但 url 是：http://...

在我的代码中，我放置了：

```
 [RequiresSSL]
    public ActionResult Index()
    {
        //var model = Adapter.EuserRepository.GetAll();

        return View(db.Eusers.ToList());
    } 
```

来自网站的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;

namespace extranet.Helpers
{
    public class RequiresSSL: ActionFilterAttribute
    {
        public override void OnActionExecuting(ActionExecutingContext filterContext)
        {
            HttpRequestBase req = filterContext.HttpContext.Request;
            HttpResponseBase res = filterContext.HttpContext.Response;

            //Check if we're secure or not and if we're on the local box
            if (!req.IsSecureConnection && !req.IsLocal)
            {
                var builder = new UriBuilder(req.Url)
                {
                    Scheme = Uri.UriSchemeHttps,
                    Port = 443
                };
                res.Redirect(builder.Uri.ToString());
            }
            base.OnActionExecuting(filterContext);
        }

    }
} 
```

我错过了什么网址不是基于 https 的？这是因为我在本地工作吗？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T12:35:54.693

您的过滤器使用以下语句检查请求是否是本地的：`&& !req.IsLocal`。如果是，那么它不会重定向。如果您删除该语句，那么无论您是否在本地，都需要通过 HTTPS 访问该操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T12:40:37.157

> 当我删除那段代码时，我得到一个 401 - 无法与服务器 localhost 建立连接，但链接现在是 https

删除这部分代码只是解决问题的一部分。回到**“如何使用 https”**的原始问题，那么您需要[使用本指南启用它](http://weblogs.asp.net/scottgu/archive/2007/04/06/tip-trick-enabling-ssl-on-iis7-using-self-signed-certificates.aspx)。

# android - Android 设备上的 OpenGL 中的正确内存管理

> ID：16147224
> 
> 赞同：5
> 
> 时间：2013-04-22T12:33:16.053
> 
> 标签：android, opengl-es-2.0

我们有一个应用程序，我们在其中使用 OpenGL ES 2.0 绘制了许多东西（主要是 OpenStreetMap Tiles，但也有其他图像）。这工作得很好，但有时应用程序在没有任何信息的情况下崩溃 - 这意味着：应用程序只是关闭，而不是崩溃的消息，logcat 中也没有消息。

从实验中我们发现，应用程序在将太多纹理加载到 OpenGL 后会崩溃 ( `glGenTextures/glBindTexture`) 在三星 Galaxy S3 上的实验中，我们能够加载多达 1800 个 RGB888 标准尺寸为 256x256 的纹理。之后，我们的应用程序崩溃而没有任何错误日志。当我们在加载纹理`GL_OUT_OF_MEMORY`时不断检查 OpenGL 错误（）时，我们不应该收到错误（ ）吗？`GLES20.glGetError`

一般问：有没有办法确定 gpu 内存中可用的最大大小，或者至少，我们如何在内存不足时立即收到警告？（问题是我们不知道什么时候应该开始删除句柄，我们希望尽可能长地保留它们中的大部分......）

提前感谢您的任何回复。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-05-03T06:19:30.447

因此，经过一番研究，我们找到了解决方案。

但首先： [这些方法](https://stackoverflow.com/questions/9266952/how-to-determine-maximum-texture-memory-on-android-opengl-es)无济于事，这些方法也[无济于事](https://stackoverflow.com/questions/6073744/android-how-to-check-how-much-memory-is-remaining)。第一篇文章中提到的方法会让你得到绝对无用的数字，这对你毫无帮助，甚至可能不正确（因为我的 Galaxy S3 的数字比 nexus 7 高得多。但在我们的测试中，nexus 7 可以加载与 S3 相同数量甚至更多的纹理）。

然后让我们继续我们的解决方案 - 我们仍然不确定它是否是最好的，但它会起作用：

看起来您可以在 OpenGL 中保留与可用总 RAM 一样多的纹理。是的，总 RAM，不是堆，也不是与您的应用程序相关的其他东西！这实际上是整个系统的可用 RAM 量，没有任何限制！

因此，一旦您弄清楚了，您只需读出您拥有的可用 RAM 量：

```
ActivityManager actvityManager = (ActivityManager) mapView.getActivity().getSystemService( Activity.ACTIVITY_SERVICE );
ActivityManager.MemoryInfo mInfo = new ActivityManager.MemoryInfo ();
actvityManager.getMemoryInfo( mInfo );
Log.v("neom","mema " + mInfo.availMem/1024/1024); 
```

最好的地方可能是你的`onSurfaceCreated`方法或类似的东西。您在那里获得的内存量是您当前拥有的总可用 RAM。大多数情况下，这个值太低了，几乎在任何情况下，你甚至可以分配比你到达那里更多的内存（在我们的测试中，我们总是可以分配大约 30%-50% 的 RAM 比availMem 给我们的内存，直到应用程序崩溃（在 Nexus 上测试7 (+28%)、Galaxy S3 (+36%)、变形金刚 T1 (+57%)、Nexus S (+57%))。这样做的原因是：Android 将在内存真正耗尽之前从未使用的东西、后台进程等中释放内存。

那么这是什么意思？

您可以（几乎）安全地在 OpenGL 中保留与可用 RAM 一样多的“纹理字节”。例如：假设您有 375 MB 的可用 RAM 和每个大小为 256kb 的纹理，您可以在 OpenGL 中保留大约 1500 个纹理，然后再开始删除其中一些（使用 LRU 缓存或类似的东西）。你甚至可以保留更多，但我认为你有这个数量是相当安全的。

Sureley，您也可以`availmem`更频繁地获得缓存大小，或者您正在对这个新的内存量做什么 - 但我认为如果你这样做一次就足够了`onSurfaceCreated`- 特别是因为如果你切换，这将再次被读出到另一个应用程序并返回。

# c# - 将多个 WCF 服务封装到一个类库中

> ID：16147227
> 
> 赞同：0
> 
> 时间：2013-04-22T12:33:25.260
> 
> 标签：c#, asp.net-mvc, wcf, class-library

我有一个具有多个端点的 WCF 服务。每个端点都有自己的配置。我的问题是我试图弄清楚什么是最好的。

1 - 向我的 MVC 应用程序添加对每个端点的服务引用

2 - 创建将引用每个端点的新 DLL，然后在我的 MVC 应用程序中添加仅对该 DLL 的引用。

我真的可以利用您的帮助来确定每种方法是否有任何缺点？

* * *

*   **更新** 我忘了提到我有多个 MVC 应用程序，每个应用程序只使用一个或两个 WCF 服务。更准确地说，我现在有 6 个 MVC 应用程序和 7 个 WCF 服务。每个 MVC 应用程序仅使用 2 个 WCF。未来 MVC 应用程序和 WCF 的数量将会增长。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T12:37:29.247

我不会使用服务器引用，而只是将 svcutil 同时指向所有三个。它将生成一组代理和一个配置。它还允许您在服务之间共享数据合同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T12:38:43.007

就个人而言，我总是将我的 Web 引用和服务引用放在一个名为 SharedServices 的独立程序集中。那样; 多个程序集可以共享相同的引用，并且可以在程序集之间共享数据类型。将 Web 引用附加到程序集可能会导致许多项目仅依赖于该程序集来实现 Web 服务定义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T12:40:17.977

您可以编写一个负责访问服务的服务代理，为您的 MVC 应用程序抽象出这个逻辑。如果您需要，服务代理也将是实现其他逻辑（如缓存）的地方。请参阅[http://tinyurl.com/cbcepgl](http://tinyurl.com/cbcepgl)，下面的“服务代理”下的一些演示代码。

# jquery - jQuery 在绝对位置上为 css 提供了错误的值

> ID：16147229
> 
> 赞同：1
> 
> 时间：2013-04-22T12:33:38.483
> 
> 标签：jquery, firefox

当一个元素是`position:absolute`and`right:[whatever]`时，试图 get`$("#div").css("left")`返回呈现的`left`值，而不是`auto`像我期望的那样。我在这里设置了一个测试：http: [//jsbin.com/ayesat/1/](http://jsbin.com/ayesat/1/)在 Chrome 中它会提醒“自动”，但 Firefox 会提醒一个`px`值。

有什么方法可以强制 Firefox 返回 css 样式中设置的任何内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T16:26:41.963

如果元素的样式也设置为 display:none: 将始终返回计算样式，则您可以获得所需的内容。

否则，getComputedStyle 会返回一些……复杂的东西。见[http://dev.w3.org/csswg/cssom/#resolved-value](http://dev.w3.org/csswg/cssom/#resolved-value)

# node.js - socket.io - 服务器上的回调 emit() 未执行

> ID：16147237
> 
> 赞同：2
> 
> 时间：2013-04-22T12:34:13.933
> 
> 标签：node.js, socket.io

我刚开始使用 socket.io.js，并试图在向客户端发送消息后立即在服务器上执行一个函数。我的代码如下，

服务器：

```
server.on('connection', onConnect);
var id = 0;
function onConnect(socket) {
    socket.emit('myMsg', {id: ++id}, function () {console.log('id callback on server');});
} 
```

客户：

```
iosocket.on('myMsg', function(data, callback) {
    console.log('id:', data.id, callback);
}); 
```

但是我看到回调函数在客户端显示为“未定义”。根据我在文档上阅读的内容，我认为这应该可以工作（[https://github.com/LearnBoost/Socket.IO/wiki/Migrating-0.6-to-0.7+](https://github.com/LearnBoost/Socket.IO/wiki/Migrating-0.6-to-0.7+)），所以有人可以告诉我我在做什么这里错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T22:54:05.267

我认为`callback`必须是一个函数。尝试这个：

```
iosocket.on('myMsg', function(data, callback) {
    console.log('id:', data.id);
    callback();
}); 
```

有关示例，请参见以下链接的确认部分：http: [//socket.io/#how-to-use](http://socket.io/#how-to-use)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-10T01:47:09.690

如果您将回调作为`callback()`客户端上的函数调用，它将在服务器端激活您的函数，因此它将在您的服务器上 console.log。如果您只想从服务器向客户端发送消息，为什么要进行 2 个回调？你可以把它放在 data:`{id:id,something:else)`中。如果您想在客户端上记录该内容；

```
if(data.something) {
console.log(data.something); //outputs "else"
} 
```

# javascript - 如何使用 JS 加载本地图像？

> ID：16147238
> 
> 赞同：1
> 
> 时间：2013-04-22T12:34:27.027
> 
> 标签：javascript

我想在我的脚本中加载两个单独的图像。我已经使用以下方法完成了它：

```
<img src="iphone4.png" id="img1">
<img src="screenshot.png" id="img2">

<script>
        window.onload = function () {
            var img1 = document.getElementById('img1');
            var img2 = document.getElementById('img2');
</script> 
```

但这里的问题是图像不应该在页面上可见，而是在使用标记加载时。我只是想通过脚本加载它们，而不必先将它们添加到标记中。我意识到这是一个极其微不足道的问题，但寻找解决方案并没有给我任何帮助。

我尝试了这种方法：

```
 window.onload = function () {
            var img1 = "iphone4.png";
            var img2 = "screenshot.png"; 
```

但这没有用。有一些共同的JS意识的人可以给我一些关于这个问题的意见。

**编辑：** 这就是标记/JS现在的样子，图像仍然显示，图像的最终合并不会显示。我得到的错误是：

```
IndexSizeError: Index or size is negative or greater than the allowed amount
[Stanna vid fel]    

var image1 = context.getImageData(0, 0, width, height); 
```

这是语法：

```
<body>
    <img src="" id="img1">
    <img src="" id="img2">
    <p>Blended image<br><canvas id="canvas"></canvas></p>
    <script>
        window.onload = function () {
            var img1 = document.getElementById('img1');
            var img2 = document.getElementById('img2');

            img1.src = "iphone4.png";
            img2.src = "screenshot.png";

            var canvas = document.getElementById("canvas");
            var context = canvas.getContext("2d");
            var width = img1.width;
            var height = img1.height;
            canvas.width = width;
            canvas.height = height;

            var pixels = 4 * width * height;
            context.drawImage(img1, 0, 0);
            var image1 = context.getImageData(0, 0, width, height);
            var imageData1 = image1.data;
            context.drawImage(img2, 73, 265);
            var image2 = context.getImageData(0, 0, width, height);
            var imageData2 = image2.data;
            while (pixels--) {
                imageData1[pixels] = imageData1[pixels] * 0 + imageData2[pixels] * 1;
            }
            image1.data = imageData1;
            context.putImageData(image1, 0, 0);
        };
    </script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T12:39:22.553

```
window.onload = function () {
        var img1 = new Image();
        var img2 = new Image();

        //EDIT2 you can hide img, or simply not add them to the DOM...
        img1.style.display = "none";
        img2.style.display = "none";

        img1.src = "iphone4.png";
        img2.src = "screenshot.png"; 
```

编辑：**不要这样做，您的图像将不会显示**

```
 document.body.append(img1); 
```

或者

```
 document.getElementById("myID").append(img2); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T12:41:51.027

您可以创建一个`Image`没有实际标记的标记：

```
var img = new Image();
img.src = 'iphone4.png';
//use img however you want 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-22T13:15:22.157

> “我正在做的是使用 JS 合并两个图像”

您的问题可能是由于您尝试绘制尚未加载的图像。为了避免这个问题，您可以动态创建图像并设置它们的`src`属性以开始加载图像并监听图像的加载事件以了解它们何时完全加载，以便您可以安全地执行合并。

*我没有测试过代码，但它应该给你的想法。*

```
var images = [
        'iphone4.png',
        'screenshot.png'
    ],
    len = images.length,
    i = 0,
    loadedCount = 0,
    img;

for (; i < len; i++) {
    img = document.createElement('img');

    //listener has to be added before setting the src attribute in case the image is cached
    img.addEventListener('load', imgLoadHandler);

    img.src = images[i];
    images[i] = img;
}

function mergeImages() {
    var img1 = images[0], 
        img2 = images[1];
    //do the merging stuff
}

function imgLoadHandler() {
    if (++loadedCount === len) {
        mergeImages();
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-22T12:39:30.287

HTML5 有一种方法，但它仍然需要用户将文件放入放置目标或使用框。

使用 File API，您可以读取文件，并可能对它们进行解码。

但实际上读取文件 blob 并在本地显示它可能会很棘手。您可以使用**FileReader.readAsDataURL**方法将内容设置为 data: 图像标签的 URL。

**示例**：

```
$('#f').on('change', function(ev) {
    var f = ev.target.files[0];
    var fr = new FileReader();

fr.onload = function(ev2) {
    console.dir(ev2);
    $('#i').attr('src', ev2.target.result);
};

fr.readAsDataURL(f);
});​ 
```

在这里查看工作小提琴：http: [//jsfiddle.net/alnitak/Qszjg/](http://jsfiddle.net/alnitak/Qszjg/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-22T12:41:40.197

使用jQuery：

```
$('#my_image').attr('src','image.jpg'); 
```

使用 javasript：

```
document.getElementById("my_image").src="image.jpg"; 
```

只需检查图像的路径

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-22T12:45:16.883

在头块中编写以下代码

```
<script>
window.onload = function () {
           document.getElementById("img1").src="iphone4.png";
           document.getElementById("img2").src="screenshot.png";
}
</script> 
```

这将起作用

谢谢

# sql - SQL 按 3 列分组，具有特殊功能

> ID：16147240
> 
> 赞同：2
> 
> 时间：2013-04-22T12:34:31.243
> 
> 标签：sql, select, sqlite, group-by

我有一个包含名称、color1、color2、color3 和其他列（SQLite）的表：

```
CREATE TABLE data (name TEXT, lvlavailable INTEGER, lvlExtra TEXT,
color1 TEXT, color2 TEXT, color3 TEXT); 
```

当前数据

```
INSERT INTO "someTable" VALUES ("name","Amarillo","NoColor","NoColor");
INSERT INTO "someTable" VALUES ("name","Amarillo","NoColor","NoColor");
INSERT INTO "someTable" VALUES ("name","Amarillo","Azul","NoColor");
INSERT INTO "someTable" VALUES ("name","Amarillo","Azul","NoColor");
INSERT INTO "someTable" VALUES ("name","Amarillo","Rojo","NoColor");
INSERT INTO "someTable" VALUES ("name","Amarillo","Rojo","NoColor");
INSERT INTO "someTable" VALUES ("name","Amarillo","Rojo","NoColor");
INSERT INTO "someTable" VALUES ("name","Amarillo","Rojo","NoColor");
INSERT INTO "someTable" VALUES ("name","Amarillo","Rojo","Verde");
INSERT INTO "someTable" VALUES ("name","Amarillo","Verde","NoColor");
INSERT INTO "someTable" VALUES ("name","Amarillo","Violeta","NoColor");
INSERT INTO "someTable" VALUES ("name","Azul","NoColor","NoColor");
INSERT INTO "someTable" VALUES ("name","Azul","NoColor","NoColor");
INSERT INTO "someTable" VALUES ("name","Azul","Amarillo","NoColor");
INSERT INTO "someTable" VALUES ("name","Azul","Amarillo","NoColor");
INSERT INTO "someTable" VALUES ("name","Azul","Amarillo","NoColor");
INSERT INTO "someTable" VALUES ("name","Azul","Amarillo","Rojo"); 
```

**在这种情况下，列名是无关紧要**的 **我知道插入不正确，因为列数，但我想你明白了**

当前选择语句：

```
SELECT name, 
       color1, 
       CASE WHEN color2 = 'NoColor' THEN '' ELSE color2 END as color2, 
       CASE WHEN color3 = 'NoColor' THEN '' ELSE color3 END as color3 
 FROM someTable 
 GROUP BY color1,color2,color3,name 
```

**案例用于其他目的**

目前的结果：

```
name    Amarillo        
name    Amarillo        
name    Amarillo    Azul    
name    Amarillo    Azul    
name    Amarillo    Rojo    
name    Amarillo    Rojo    
name    Amarillo    Rojo    
name    Amarillo    Rojo    
name    Amarillo    Rojo            Verde
name    Amarillo    Verde   
name    Amarillo    Violeta 
name    Azul        
name    Azul        
name    Azul            Amarillo    
name    Azul            Amarillo    
name    Azul            Amarillo    
name    Azul            Amarillo    Rojo 
```

**颜色的名称是西班牙语，对此感到抱歉**

期望的结果：

```
name    Amarillo        
name    Amarillo        
name    Amarillo    Azul    
name    Amarillo    Azul
name    Azul            Amarillo    
name    Azul            Amarillo    
name    Azul            Amarillo
name    Azul            Amarillo    Rojo    
name    Amarillo    Rojo    
name    Amarillo    Rojo    
name    Amarillo    Rojo    
name    Amarillo    Rojo    
name    Amarillo    Rojo            Verde
name    Amarillo    Verde   
name    Amarillo    Violeta 
name    Azul        
name    Azul 
```

请注意，当它获得组 Amarillo,Azul,[empty] 时，它将继续使用 Amarillo,Azul 并在每个颜色的列中独立，但我想保持原始颜色列位置，如图所示，我不想要创建另一个列，刚刚订购。

所以，我想要的是把那些颜色相同但顺序不同的组放在一起。

那可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T13:17:22.490

如果我做对了：

```
select * from table1 
where 
 'red' in (color1,color2,color3) 
  and
 'blue' in (color1,color2,color3) 
```

好的，这是对您的数据的组查询：

[SQLFiddle 演示](http://sqlfiddle.com/#!7/c6bb9/2)

```
select *

from someTable
group by 
(select 
  group_concat(c1)
  from
  (
  select c1 from
  (  
  select color1 as c1
  union all
  select color2 as c1
  union all  
  select color3 as c1 
  ) t2
  order by c1  
  ) t1
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T14:30:55.780

尝试：

```
select name, 
       color1, 
       case color2 when 'NoColor' then '' else color2 end as colour2, 
       case color3 when 'NoColor' then '' else color3 end as colour3
from data
order by
       case 
           when color2 = 'NoColor' then color1 
           when color3 = 'NoColor' then min(color1, color2)
           else min(color1,color2,color3)
       end,
       case
           when color2 = 'NoColor' then ''
           when color3 = 'NoColor' then max(color1, color2)
           else max(min(color1,color2),min(color1,color3),min(color2,color3))
       end,
       case color3
           when 'NoColor' then ''
           else max(color1,color2,color3)
       end 
```

SQLFiddle[在这里](http://sqlfiddle.com/#!5/014de/28)。

# python - 对嵌套类实例有用的默认 __repr__

> ID：16147243
> 
> 赞同：5
> 
> 时间：2013-04-22T12:34:46.677
> 
> 标签：python, class

我有一个代表接口的抽象基类。此类的子类将此类的其他子类存储为属性。

例如：

```
class AbstractBase(object):
    pass

class Child(AbstractBase):
    def __init__(self, cls1, cls2):
        assert isinstance(cls1, AbstractBase)
        assert isinstance(cls2, AbstractBase) # just to show they're instances

        self.cls1 = cls1
        self.cls2 = cls2 
```

层次结构的深度和布局无法提前知道，但不会递归。

我可以放什么`__repr__`让`AbstractBase`我以有用的方式查看每个子类的属性？

我目前的做法是：

```
from pprint import pformat

class AbstractBase(object):
    def __repr__(self):
        return self.__class__.__name__ + '\n' \ 
                + pformat({k:v for k,v in self.__dict__.iteritems()
                           if not '__' in k}) 
```

对于基类（没有属于 的子类的属性`AbstractBase`，这会输出一些可读的内容，例如：

```
MyClass
{'var1': 1,
 'var2': 2} 
```

但是，对于具有子类的`AbstractBase`类，它会中断，因为很难判断父类从哪里开始，另一个在哪里结束（鉴于上述嵌套没有进一步缩进`__repr__`）。

我会很高兴像下面这样的东西，想象`cls1`并`cls2`有一个 int 属性`var`：

```
Child
{'cls1': {
          'var': 1,
         },
 'cls2': {
          'var': 0,
         }
} 
```

可悲的是，我不知道如何实现这一点（或者甚至可能）。有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T13:51:35.520

我喜欢我这样做的方式：

```
class AbstractBase(object):
    def __repr__(self, indent=2):
        result = self.__class__.__name__ + '\n'
        for k,v in self.__dict__.iteritems():
            if k.startswith('__'):
                continue
            if isinstance(v, AbstractBase):
                vStr = v.__repr__(indent + 2)
            else:
                vStr = str(v)
            result += ' '*indent + k + ': ' + vStr
        result += '\n'
        return result 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T22:27:55.247

这是 John Zwinck 提议的略微修改的版本。

它考虑如何格式化序列，并稍微改变格式。不过，目前它并不完美 - 我认为特别是它会破坏字典，因为可迭代组件只会打印密钥。

```
 def __repr__(self, indent=2):
        result = self.__class__.__name__ + '\n'
        items = self.__dict__.items()

        for i,(k,v) in enumerate(items):
            if '__' in k:   
                continue    
            if isinstance(v, AbstractBase):
                vStr = '\n' + ' '*(indent + 2) + v.__repr__(indent + 4)
            elif isinstance(v, collections.Iterable):
                s = str(v)
                bstart = s[0]
                bend = s[-1]

                newIndent = indent + 3
                vStr = '\n' + ' '*(newIndent - 1) + bstart
                for j,item in enumerate(v):
                    if isinstance(item, AbstractBase):
                        if j:
                            vStr += ' '*newIndent
                        vStr += item.__repr__(newIndent + 2)
                    else:    
                        vStr += repr(item)
                    vStr += ',\n'
                vStr += ' '*(newIndent - 1) + bend
            else:              
                vStr = str(v)  
            result += ' '*indent + k + ': ' + vStr

            if i != len(items) - 1:
                result += '\n'

        result = re.sub('\n+', '\n', result)
        return result 
```

# .net - 为什么我的 TextBox 数据绑定不起作用？

> ID：16147247
> 
> 赞同：2
> 
> 时间：2013-04-22T12:34:57.023
> 
> 标签：.net, wpf, xaml, data-binding

我试图让 TextBox 控件双向绑定到 INotifyPropertyChanged 对象（Person）中的字符串属性。加载表单时调用 Getter，但未将值输入到 TextBox。同样，TextBox 中的任何更改都不会调用 Person 对象上的 Setter。

**XAML**

```
<Window x:Class="WpfApplication1.MainWindow"
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  Title="MainWindow" Height="350" Width="525">
  <TextBox x:Name="txtPersonName" 
DataContext="{Binding Path=Name, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}" />
</Window> 
```

**视图模型**

```
public class Person : INotifyPropertyChanged
{
    private string _name= "default value";

    public string Name
    {
        get { return _name; }
        set
        {
            if (value != _name)
            {
                _name = value;
                OnPropertyChanged("Name");
            }
        }
    }

    public event PropertyChangedEventHandler PropertyChanged;

    public void OnPropertyChanged(string propertyName)
    {
        if (PropertyChanged != null)
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
    }
} 
```

**代码隐藏**

```
public partial class MainWindow : Window
{
    private Person viewModel = new Person();
    public MainWindow()
    {
        InitializeComponent();
        DataContext = viewModel;
    }
} 
```

为什么在文本框中输入的文本不会传播回 Person 对象？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T12:38:34.023

在`XAML`你需要设置文本框的`Text`属性而不是它的`DataContext`属性

# ios - 合并两个 UITableViewController

> ID：16147250
> 
> 赞同：0
> 
> 时间：2013-04-22T12:35:06.003
> 
> 标签：ios, uitableview, merge

我有以下情况需要找到解决方案 - 我有两个带有客户控制器类的 UITableView：

A) 其中一个具有静态单元格并控制应用程序中的设置列表 - 例如设置名称、电子邮件和电话。B）另一种是使用单元格原型，显示类别列表，用户可以订阅。

现在我必须合并这两个视图，因此类别列表显示在名称、电子邮件和电话设置输入字段下方。这两个控制器具有完全不同的功能，右上角都有保存按钮，如果我尝试将它们合并为一个，那将是一个很好的小混乱。这看起来像是一个挑战，所以如果我能得到一些解决这个问题的技巧，那将是非常酷的。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T12:39:37.030

我猜这些类别属于一些 NSArray。

为什么不创建两个部分并在秒部分中显示这些单元格？

显然，您不需要合并单元格-> 您需要合并它们所基于的数据。

# c++ - 使用 libvlc_video_set_format_callbacks 逐帧转码视频

> ID：16147251
> 
> 赞同：1
> 
> 时间：2013-04-22T12:35:08.613
> 
> 标签：c++, libvlc, transcoding

我正在尝试用 C++ 编写一个小程序，逐帧转码视频，我正在使用函数 libvlc_video_set_callbacks 和 libvlc_video_set_format_callbacks 来实现这一点。

第一个函数工作正常，但我不确定如何实现 libvlc_video_set_format_callbacks。

我以这种方式尝试过，但它给了我一个“设置”的参数错误：

```
int setup(void* pUserData, char *chroma, unsigned int *width, unsigned int *height, unsigned int *pitches, unsigned int *lines)
    {
        (void) pUserData;
        return 1;
    }

libvlc_video_set_format_callbacks(mp, setup, cleanup); 
```

接下来是我真的不知道如何设置正确的视频格式属性。

你能帮我解决这个设置功能吗，或者至少给我一个例子来说明如何实现它，因为我没有找到？你可以想象，我不是一个非常有经验的程序员，所以请耐心等待我;）提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T13:56:25.890

`liblv_video_set_format_callbacks`第二个参数是 type [`libvlc_video_format_cb`](http://www.videolan.org/developers/vlc/doc/doxygen/html/group__libvlc__media__player.html#ga46f687a8bc8a7aad325b58cb8fb37af0)，它是以下 typedef：

```
typedef unsigned(* libvlc_video_format_cb)(void **opaque, char *chroma, unsigned *width, unsigned *height, unsigned *pitches, unsigned *lines); 
```

我们可以看到您的`setup`功能有两个不同之处：

*   第一个参数的类型应该是`void**`。你的是`void*`.
*   返回类型应该是`unsigned`. 你的是`int`.

我也不知道视频格式属性。因此，我将无法为您提供任何指示。

# c# - 带有特定时区的 Javascript 整数到日期时间

> ID：16147253
> 
> 赞同：1
> 
> 时间：2013-04-22T12:35:12.473
> 
> 标签：c#, javascript, asp.net-mvc-3, datetime, serialization

我在 SQL Server 2005 数据库中保存了以下日期时间：`2012-12-06 16:20:11.010`.

我想在客户端使用 javascript 显示这个日期时间，所以我使用它序列化它（作为更大对象的一部分）`System.Web.Helpers.Json.Encode`，它运行以下代码：

```
internal static readonly long DatetimeMinTimeTicks = new DateTime(1970, 1, 1, 0, 0, 0, DateTimeKind.Utc).Ticks;

private static void SerializeDateTime(DateTime datetime, StringBuilder sb, JavaScriptSerializer.SerializationFormat serializationFormat)
{
    if (serializationFormat == JavaScriptSerializer.SerializationFormat.JSON)
    {
        sb.Append("\"\\/Date(");
        sb.Append((datetime.ToUniversalTime().Ticks - JavaScriptSerializer.DatetimeMinTimeTicks) / 10000L);
        sb.Append(")\\/\"");
        return;
    }
    sb.Append("new Date(");
    sb.Append((datetime.ToUniversalTime().Ticks - JavaScriptSerializer.DatetimeMinTimeTicks) / 10000L);
    sb.Append(")");
} 
```

在客户端，我将其转换为日期时间对象，如下所示：（[JSFiddle](http://jsfiddle.net/Mansfield/4SWwj/)）

```
var strDate = "/Date(1354828811010)/"; //value returned by above function
var re = /-?\d+/;
var m = re.exec(strDate);            
var date = new Date(parseInt(m[0])); 
```

在时区设置为东部标准的 PC 上，此时间正确显示为`Thu Dec 06 2012 16:20:11 GMT-0500 (Eastern Standard Time)`. 但是，在时区为 GMT-6 的电脑上，它返回为`Thu Dec 06 2012 15:20:11 GMT-0600 (Central Standard Time)`.

这次是正确的`Thu Dec 06 2012 16:20:11 GMT-0600 (Central Standard Time)`，但我不确定如何最好地正确显示它。我不需要实际显示时区，我只需要它显示为 16:20:11 而不管用户的本地时区设置如何。

javascript中是否有一种机制可以让我将日期强制到特定时区？我对它所做的研究表明没有。

否则，如果我需要更改服务器端，我最好的选择是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T03:16:42.377

我相信您正在寻找的内容与[Moment.js 问题 611](https://github.com/timrwood/moment/issues/611)中描述的内容有关。如果是这样，请您将您的反馈添加到此问题中吗？这对我来说当然是一个很好的选择。

顺便说一句 - 我也查看了 DateJS 和 XDate，据我所知，没有一个具有此功能。JavaScript 似乎锁定在 UTC 或浏览器的本地时区。

此外，Moment.js 已经处理了发出的 Microsoft 日期格式`JavaScriptSerializer`，因此您可以直接使用它。但是，我强烈建议改用[JSON.Net](http://james.newtonking.com/projects/json-net.aspx)。甚至微软现在也在使用它。默认情况下，它将以 ISO 格式返回日期。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T12:40:49.407

看看[Moments.js](http://momentjs.com/)，它是众多可以帮助您满足日期/时间要求的 JavaScript 日期库之一。

其他包括[datejs](http://www.datejs.com/)和[Xdate](http://arshaw.com/xdate/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T12:49:47.357

DateTime.ToUniversalTime() 将在序列化值中包含时区，并且 javascript 将读取它。如果您不希望这种情况发生，请不要使用时区对其进行序列化。只需使用 DateTime.toString() 方法并给它一个简单的格式字符串，例如：

```
datetime.toString("o"); 
```

这将输出类似

```
2008-06-15T21:15:07.0000000 
```

# java - 调度程序作业未按指定时间间隔执行

> ID：16147257
> 
> 赞同：0
> 
> 时间：2013-04-22T12:35:21.940
> 
> 标签：java, cron, jira, quartz-scheduler, scheduler

我创建`jira plugin scheduler job`了执行指定的作业类。

在这里，我无法按照我定义的指定间隔执行调度程序作业。

下面是安排时间间隔的东西：

在这里，将开始日期安排为 -`current date (00: 00:00)`一天的开始和

间隔为`(long) (15 * 3600000))`（其中 15 以小时为单位）。

东西应该在下午 3 点执行，但它没有在那个时间执行，而是在其他时间随机执行。

```
Calendar startDate = Calendar.getInstance();               
startDate.set(startDate.get(Calendar.YEAR), startDate.get(Calendar.MONTH), startDate.get(Calendar.DATE),0,0,0);

pluginScheduler.scheduleJob(schedulerUniqueKey,                       
      // unique name of the job
      DailyReportService.class,     // class of the job
      new HashMap<String,Object>() {{
            put("1", DailyReportImpl.this);
       }},                          // data that needs to be passed to the job
      startDate.getTime(),          // the time the job is to start
      intervalInMilisections); 
```

您能否建议出什么问题以及如何安排。

# debugging - 如何在 LoadRunner 中查看相关值？

> ID：16147262
> 
> 赞同：1
> 
> 时间：2013-04-22T12:35:35.623
> 
> 标签：debugging, loadrunner

对于使用 LoadRunner VuGen 的用户，我想询问在运行脚本期间如何查看相关性和变量值。我尝试将相关性放在“添加到观看”中，但它给了我一个“不正确的表达式”并且无法评估它，我还尝试了“RunTimeData”，但我想要的相关性没有出现在参数列表中。有没有办法在运行期间调试和观察变量和相关值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T16:21:50.900

您可以尝试扩展日志记录以包括参数替换。在 Vugen 中，如果您转到：“运行时设置 > 日志”并启用日志记录，然后单击：“始终发送消息 > 扩展日志 > 参数替换”

在脚本重播期间，随着日志文件写入此设置，您可以看到填充时以蓝色突出显示的每个参数值。当您观看实时回放时，它不是很优雅，但在脚本执行后很容易查看。无论是从参数列表中提取还是在代码中动态构建，您都有每个参数及其值的完整日志。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-08T07:37:31.793

尝试以下一个运行时设置>日志'并启用日志记录，然后单击：'始终发送消息>扩展日志>参数替换'

# objective-c - 在 ViewController 之间传递地图数据

> ID：16147263
> 
> 赞同：0
> 
> 时间：2013-04-22T12:35:36.307
> 
> 标签：objective-c, ios6

我几乎关注了这篇[文章](https://stackoverflow.com/questions/10698576/pass-data-to-detailview-when-annotation-tapped-on-mapview)。视图控制器将通过情节提要推送。这里是相关代码：
ViewController.m：

```
-(void)mapView:(MKMapView *)mapView annotationView:(MKAnnotationView *)view calloutAccessoryControlTapped:(UIControl *)control
{
    NSLog(@"%@", view.annotation.title);
    MapPoint *annView = view.annotation;
    DetailViewController *dvc = [self.storyboard instantiateViewControllerWithIdentifier:@"DetailViewController"];
    dvc.title = @"my own Details";
    dvc.titleTMP = annView.title;
    dvc.subtitleTMP = annView.subtitle;

    [self.navigationController pushViewController:dvc animated:YES];
} 
```

地图点.h：

```
@interface MapPoint : NSObject <MKAnnotation>
{
    NSString *_title;
    NSString *_subtitle;
    CLLocationCoordinate2D _coordinate;
    UIImage *_storeImage;
}

@property (copy) NSString *title;
@property (copy) NSString *subtitle;
@property (nonatomic, readonly) UIImage *storeImage;
@property (nonatomic, readonly) CLLocationCoordinate2D coordinate;

- (id)initWithTitle:(NSString*)title subtitle:(NSString*)subtitle coordinate:(CLLocationCoordinate2D)coordinate storeImage:(UIImage*)storeImage; 
```

和 DetailViewController：

```
@interface DetailViewController : UIViewController
@property (strong, nonatomic) IBOutlet UIImageView *branchImage;
@property (strong, nonatomic) IBOutlet UILabel *titleLabel;
@property (strong, nonatomic) IBOutlet UITextView *textView; 
```

我认为我的错误在于*calloutAccessoryControlTapped*方法，但我不知道这个问题的真正原因是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T21:16:30.630

如果您使用情节提要，可以`prepareForSegue`像您所做的那样在类中使用方法和设置。

我发布了一部分代码

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender{

if([segue.identifier isEqualToString:@"Brs"]){
    NSLog(@"segue %@ ",[segue identifier]);
    [segue.destinationViewController setPath:[ris_xml objectAtIndex:index_post-1] ];
    }
} 
```

在此示例中，仅当他的标识符为“Brs”时，我才设置下一个 UIViewController 的属性“Path”。要使用此方法，需要将 UIviewController 标识符设置到情节提要右侧面板中。如果您在情节提要中有它，则无需实例化新的 UIViewController 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T15:12:06.823

我通过考虑加载顺序来解决它。
所有要做的就是创建临时的@properties

```
@interface DetailViewController : UIViewController
@property (strong, nonatomic) IBOutlet UIImageView *branchImage;
@property (strong, nonatomic) IBOutlet UILabel *titleLabel;
@property (strong, nonatomic) IBOutlet UITextView *textView;
@property (nonatomic) NSString *titleTMP;        //added
@property (nonatomic) NSString *subtitleTMP;     //added 
```

做

```
-(void)mapView:(MKMapView *)mapView annotationView:(MKAnnotationView *)view calloutAccessoryControlTapped:(UIControl *)control
{
    NSLog(@"%@", view.annotation.title);
    MapPoint *annView = view.annotation;
    DetailViewController *dvc = [self.storyboard instantiateViewControllerWithIdentifier:@"DetailViewController"];
    dvc.title = @"my own Details";
    dvc.titleTMP = annView.title;
    dvc.subtitleTMP = annView.subtitle;

    [self.navigationController pushViewController:dvc animated:YES];
} 
```

细节视图控制器：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.
    titleLabel.text = titleTMP;
    textView.text = subtitleTMP;

} 
```

# mysql - 如何通过 Syslog 发送结构化数据？

> ID：16147267
> 
> 赞同：4
> 
> 时间：2013-04-22T12:35:40.350
> 
> 标签：mysql, sql, syslog, rsyslog, structured-data

我有结构化数据，键值对，应该通过系统日志记录。最后，我们希望看到有关这些指标的统计数据。我们应该如何在接收端编码然后解码呢？

我们在 syslog 中解析日志的消息部分并基于该解析将其插入到关系数据库表中的一种选择。

我们的第二个想法是以 JSON 格式发送数据，在接收方，我们将关系数据库表视为作业队列，在插入单独的表之前必须解析记录。

此外，键值对可能会根据我们想要记录的内容而改变。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-04-03T09:32:49.153

[syslog 协议](https://www.rfc-editor.org/rfc/rfc5424#section-6)的RFC 5424定义了一个`STRUCTURED-DATA`字段：

> 系统日志消息具有以下 ABNF [RFC5234] 定义：
> 
> ```
>     SYSLOG-MSG = 标题 SP结构化数据[SP MSG]
>     (...)
>     结构化数据 = NILVALUE / 1*SD-ELEMENT
>     SD-ELEMENT = "[" SD-ID *(SP SD-PARAM) "]"
>     SD-PARAM = PARAM-NAME "=" %d34 PARAM-VALUE %d34
>     SD-ID = SD-名称
>     PARAM-NAME = SD-NAME
>     参数值 = UTF-8-STRING ；字符 '"'、'\' 和
>                                      ; ']' 必须转义。
>     SD-NAME = 1*32PRINTUSASCII
>                       ; 除了 '=', SP, ']', %d34 (")
>     (...)
> 
> ```

（[此处为示例](https://stackoverflow.com/q/9209130/1446005)）

但是，该 RFC 似乎并未得到广泛支持。[您可能需要在旧的RFC 3164](https://www.rfc-editor.org/rfc/rfc3164#section-4.1)之上设计自己的协议。JSON 编码的消息部分听起来是一个非常合理的选择。

如果您可以完全控制整个链，则应评估直接登录到目标数据库的选项。

# php - 如何正确构建 CodeIgniter 站点

> ID：16147268
> 
> 赞同：0
> 
> 时间：2013-04-22T12:35:42.880
> 
> 标签：php, codeigniter, module, codeigniter-routing

我正在使用 CodeIgnitier 构建一个网站。

我的问题是如何**在**网页中使用 MVC 模式。假设我有一个名为“设置”的控制器，在此页面中，我想将设置划分为类别，带有选项卡，如“系统”、“用户”等。

我知道如何以通常的方式执行此操作，例如“settings?tab=system”，然后根据选择的选项卡加载正确的视图。但是我想为这个设置页面做一个单独的MVC模式，可以吗？如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T12:40:14.987

基本上，您正在寻找的东西可以使用 routes.ini 或 Route.php 进行控制。该选项卡可以是您的查询字符串。设置可以是一个控制器，你可以有一个名为 index 的动作来控制它。

# android - Android BluetoothAdapter 禁用功能在设备 2.3.6 上不起作用

> ID：16147269
> 
> 赞同：1
> 
> 时间：2013-04-22T12:35:45.193
> 
> 标签：android, bluetooth

在 4.0 + 版本的 Android 版本较低（检查 2.3.6）的设备上，我无法在我的应用程序中禁用蓝牙，它工作正常。这是我的简单代码：

```
public class MainActivity extends Activity implements View.OnClickListener {
BluetoothAdapter mBluetoothAdapter;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    mBluetoothAdapter = BluetoothAdapter.getDefaultAdapter();
    findViewById(R.id.helloTxt).setOnClickListener(this);
}
@Override
public void onClick(View v) {       
    if (mBluetoothAdapter.isEnabled()) {            
        mBluetoothAdapter.disable();
    }
}
} 
```

在清单中也给予了必要的许可：

```
uses-permission android:name="android.permission.BLUETOOTH"
uses-permission android:name="android.permission.BLUETOOTH_ADMIN" 
```

以及由 aLogCat 应用程序生成的设备上的 logcat 结果。

```
E/AndroidRuntime(28167): FATAL EXCEPTION: main
E/AndroidRuntime(28167): java.lang.SecurityException: Calling uid 10097 gave packageandroid which is owned by uid 1000
E/AndroidRuntime(28167):    at android.os.Parcel.readException(Parcel.java:1322)
E/AndroidRuntime(28167):    at android.os.Parcel.readException(Parcel.java:1276)
E/AndroidRuntime(28167):    at android.bluetooth.IBluetooth$Stub$Proxy.disable(IBluetooth.java:632)
E/AndroidRuntime(28167):    at android.bluetooth.BluetoothAdapter.disable(BluetoothAdapter.java:563)
E/AndroidRuntime(28167):    at com.example.bluetoothtest.MainActivity.onClick(MainActivity.java:25)
E/AndroidRuntime(28167):    at android.view.View.performClick(View.java:2485)
E/AndroidRuntime(28167):    at android.view.View$PerformClick.run(View.java:9080)
E/AndroidRuntime(28167):    at android.os.Handler.handleCallback(Handler.java:587)
E/AndroidRuntime(28167):    at android.os.Handler.dispatchMessage(Handler.java:92)
E/AndroidRuntime(28167):    at android.os.Looper.loop(Looper.java:130)
E/AndroidRuntime(28167):    at android.app.ActivityThread.main(ActivityThread.java:3687)
E/AndroidRuntime(28167):    at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime(28167):    at java.lang.reflect.Method.invoke(Method.java:507)
E/AndroidRuntime(28167):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
E/AndroidRuntime(28167):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
E/AndroidRuntime(28167):    at dalvik.system.NativeStart.main(Native Method) 
```

它在 android 2.3.6 版本的设备中崩溃了应用程序。请帮忙 ！！

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-12T10:31:59.620

获取代表本地蓝牙适配器的BluetoothAdapter，在JELLY_BEAN_MR1及以下运行时，调用静态getDefaultAdapter()方法；在 JELLY_BEAN_MR2 及更高版本上运行时，通过 getSystemService(String) 和 BLUETOOTH_SERVICE 检索它。

# ruby-on-rails - Rails + Mongoid + Devise : 在注册表单中添加生日字段

> ID：16147270
> 
> 赞同：1
> 
> 时间：2013-04-22T12:35:49.567
> 
> 标签：ruby-on-rails, devise, mongoid

我正在使用 Rails 3.2.11、mongoid 3.1.2 并设计 2.2.3，并且我有一个带有生日日期字段的用户模型。

```
class User
    include Mongoid::Document

    field :birthday, type: Date
    field :email, type: String, default: ""
    field :encrypted_password, type: String, default: ""
    field :remember_created_at, type: Time

    attr_accessible :email, :password, :password_confirmation, :remember_me, :birthday

    devise :database_authenticatable, :registerable, :rememberable, :validatable

    validates_presence_of :email, :birthday

    ...
end 
```

我在注册表单中添加了一个**生日**字段，如下所示：

```
f.input :birthday, :as => :date, :start_year => (Date.current - 5.year).year, :end_year => (Date.current - 120.year).year, :include_blank => true 
```

问题是，当我注册时，我总是收到错误消息：生日不能为空。

当我查看日志时，我看到：

```
Started POST "/users" for 127.0.0.1 at 2013-04-22 13:58:27 +0200
Processing by Devise::RegistrationsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"Cmjq47KqHWzEoytGxH+L5s5zbWrHYDZn221Dq6+wVQQ=", "user"=>{"email"=>"lalala@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]",  "birthday(3i)"=>"25", "birthday(2i)"=>"11", "birthday(1i)"=>"1984"} 
```

所以我不明白为什么它不起作用:(我已经在谷歌上搜索了几个小时而没有任何机会。我虽然它可能来自 mongoid 的批量分配或设计 build_ressource 但我没有找到任何解决方案。你已经得到这个问题了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T12:51:00.040

您需要在模型类中包含另一个模块：

```
Mongoid::MultiParameterAttributes 
```

# html - CSS - 显示属性在 IE 中无法按预期工作

> ID：16147271
> 
> 赞同：0
> 
> 时间：2013-04-22T12:35:52.647
> 
> 标签：html, css

我有 2`display`条无法使用的规则我无法使用`display`IE 版本 < 10 的属性，我正在使用以下代码：

```
Comments(<fb:comments-count href="http://mypage"/></fb:comments-count>) 
```

这导致：

```
Comments(<fb:comments-count href="http://mypage" fb-xfbml-state="rendered" class=" fb_comments_count_zero">
    <span class="fb_comments_count">
        10
    </span>
</fb:comments-count>) 
```

有了这个CSS：

```
.fb_comments_count {
    display: inline;
}

.fb_comments_count_zero {
    display: inline;
} 
```

它显示：

```
Comments(
10
) 
```

代替

```
Comments(10) 
```

我也试过改变

```
display:inline 
```

至

```
display:inline-block 
```

但它不起作用。

我遇到的另一个问题是当我使用`display:none`. 事实上，IE<10 并没有隐藏我的样式，但是 IE10、chrome、opera 和 firefox 没有这个问题。

我怎样才能解决这个问题？

PS 我**不喜欢使用 JavaScript**，因为即使禁用了 javascript，我也希望我的网站看起来不错。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T12:49:36.810

我不完全确定 FBML 最终是如何呈现的，但较旧的 IE 无法识别自定义标签并且不会将 css 应用于它们，所以这可能是问题所在。您需要[将标签“注册”到 IE](https://stackoverflow.com/a/15977113/1047823)。

此外，您应该避免跨度中的换行符：

```
<span class="fb_comments_count">10</span> 
```

如果不尝试应用，这已经可以解决您的第一个问题`white-space:nowrap;`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T12:50:08.407

即刹车线一直存在问题，不应尝试将其添加到您的CSS

> 空白：nowrap；

如果这不起作用，请告诉我会发生什么。
我以前也遇到过这些问题，所以不仅仅是你。
还可以尝试将您的 fb 标签包装在 ap 标签中，然后将选择的样式添加到 p 标签。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T12:49:01.640

Internet Explorer 不会为它不知道的任何元素设置样式。这就是为什么有 HTML5 shim javascript 的原因；通知 IE 新的 HTML5 元素（将它们插入 DOM）。其他浏览器不会有这个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T12:40:10.577

您在 CSS 中使用破折号而不是下划线。

```
.fb-comments-count {
    display: inline;
} 
```

尝试将其更改为：

```
.fb_comments_count {
    display: inline;
} 
```

# java - 如何以横向打开所有视频？

> ID：16147278
> 
> 赞同：0
> 
> 时间：2013-04-22T12:36:07.950
> 
> 标签：java, android

如何使用以下代码以横向打开所有视频？我希望所有视频都以横向打开，然后根据设备从最后一个位置的方向旋转来改变方向。

```
Intent intent=new Intent(Intent.ACTION_VIEW); 
intent.setDataAndType(uri, "video/mp4");
startActivity(intent); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T12:58:41.947

使用此代码

setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T12:52:14.000

```
 android:screenOrientation="landscape"
Set This Property In Your Manifest File On your Particular activity.
E.g-
<activity android:name=".MainActivity"
            android:screenOrientation="landscape"></activity> 
```

# iphone - 在 iOS 中加载 HTML 页面之前设置视口

> ID：16147282
> 
> 赞同：1
> 
> 时间：2013-04-22T12:36:13.043
> 
> 标签：iphone, ios, uiwebview, viewport, meta

我是一名 iOS 开发人员，我对 Web 开发一无所知。我正在尝试加载 HTML 页面，`UIWebView`因为网页的内容大小大于 iOS 设备的屏幕大小，webview 显示滚动条必须是在我的情况下避免。我想使页面适合 webview 宽度。

我确实在这里阅读了一些帖子并了解我应该更改 HTML 的**视口**以使事情按我的意愿工作。当我手动更改 HTML 中元标记的**宽度****和**高度**属性**时，它适合我的 webview。什么是最好的方法在加载页面之前更改视口。

 **`stringByEvaluatingJavaScriptFromString:`（我已经看到使用in设置比例的方法`webViewDidFinishLoading:`，我不喜欢这样做，因为 webview 需要时间来加载内容，直到它显示被调用的页面然后刷新。）

有没有更好的方法来更改元属性，然后读取 HTML 文件`NSString`并执行较差的字符串级别操作？HTML 页面始终在设备本地可用。

请帮忙，我需要尽快修复它。**

# javascript - 没有在 ASP.Net 中获取 ClientID

> ID：16147288
> 
> 赞同：5
> 
> 时间：2013-04-22T12:36:28.603
> 
> 标签：javascript, asp.net, clientid

我有 ASP.Net 页面，我在其中调用这样的 JavaScript 函数：

```
 Enter server name: <asp:TextBox ID="txt_name" runat="server"></asp:TextBox>
 <asp:Button ID="btn_view" runat="server" OnClick="View_btn_click" OnClientClick="return  AlertOnGo('View Configuration',document.getElementById('<%= txt_name.ClientID %>').value)" Text ="GO!" /> 
```

但是在单击 GO 按钮时，我收到以下错误：

**JavaScript 运行时错误：无法获取未定义或空引用的属性“值”**

查看按钮的渲染代码时：

```
<input type="submit" name="btn_view" value="GO!" onclick="return AlertOnGo('View Configuration',document.getElementById('<%= txt_name.ClientID %>').value);" id="btn_view" /> 
```

它没有放置适当的 ClientID。我尝试将测试框的 CLientIDMode 设置为静态，但没有帮助。

这个问题类似于这个[未回答的问题](https://stackoverflow.com/questions/7147906/issue-getting-clientid-in-asp-net-c-sharp)。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-22T12:48:02.400

这个问题有几个解决方案。

一种更简单的方法是将名称移动到 JavaScript 变量中，因为该问题仅在尝试评估 ASP.NET 控件的 OnClientClick 属性内的 txt_name.ClientID 时出现在控件中。

```
<script>
var txtName = '<%= txt_name.ClientID %>';
</script>

Enter server name: <asp:TextBox ID="txt_name" runat="server"></asp:TextBox>
 <asp:Button ID="btn_view" runat="server" OnClick="View_btn_click" 
OnClientClick="return  AlertOnGo('View Configuration', 
document.getElementById(txtName).value)" Text ="GO!" /> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-09-25T06:09:27.913

您可以使用`ClientIDMode="Static"`asp:textbox 标记内的属性

像这样

```
<asp:TextBox ClientIDMode="Static" ID="txt_name" runat="server"></asp:TextBox>
<asp:Button ID="btn_view" runat="server" OnClick="View_btn_click" 
 OnClientClick="return  AlertOnGo('View Configuration', 
 document.getElementById(txtName).value)" Text ="GO!" /> 
```

这样，文本框的客户端 ID 将与“ID”相同，您可以使用 `document.getElementById('txt_name').value`

它对我有用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T12:44:49.447

-- 编辑后的答案 -- aspx

```
<asp:Button ID="btn_view" runat="server" OnClick="View_btn_click" OnClientClick="javascript:return AlertOnGo('View Configuration');" 文本="开始！" />

```

脚本

```
功能 AlertOnGo（模式）
{
  var btnId = '<%= txt_name.ClientID %>';
  var value=document.getElementById(btnId).value;

//你的代码

返回假；
}

```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T12:45:04.543

您在 asp.net web 控件的属性中使用 <%= %> - 我不希望它起作用，因为整个控件将被 html 替换。

我会将您的 javascript 移出脚本块并将事件处理程序附加到代码中，而不是将其全部内联。

```
Enter server name: <asp:TextBox ID="txt_name" runat="server"></asp:TextBox>
 <asp:Button ID="btn_view" runat="server" OnClick="View_btn_click" Text ="GO!" />
<script>
document.getElementById('<%= btn_view.ClientID %>').attachEvent('click', function() {
     return AlertOnGo('View Configuration',
                        document.getElementById('<%= txt_name.ClientID %>').value);
});
</script> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-09-19T00:29:30.497

我更喜欢使用 String.Concat。您可以使用 \u0027 代替撇号。

```
OnClientClick='<%#String.Concat("document.getElementById(\u0027", AddToCartBtn.ClientID.ToString(), "\u0027).value = \u0027Adding...\u0027;")%>' 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-10-24T14:29:36.403

另一个解决方案是你可以去浏览器做昆虫元素读取文本框的动态 ID 并在 javascript 中设置它，如：

```
var ddlFunction = document.getElementById('ctl00_SPWebPartManager1_g_ecede3f6_2b87_405a_af1b_70401bb8d4c7_ddlFunction'); 
```

html:

```
<asp:DropDownList ID="ddlFunction" runat="server" CssClass="dropDownClass">
    <asp:ListItem Selected="True">Select One</asp:ListItem>
    <asp:ListItem>Sample 1</asp:ListItem>
    <asp:ListItem>Sample 2</asp:ListItem>
</asp:DropDownList> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-05-07T21:08:22.087

您可以创建一个 css 类并使用它来代替客户端 ID（使用 jQuery $('.txt_name').text()）：

输入服务器名称：

```
 <asp:TextBox ID="txt_name" CssClass="txt_name" runat="server"></asp:TextBox> 
```

# blogger - 我应该对我的 Blogger 浏览器应用程序 API 密钥保密吗？

> ID：16147291
> 
> 赞同：2
> 
> 时间：2013-04-22T12:36:30.433
> 
> 标签：blogger, api-key

参考下图中突出显示的 API 密钥，我想知道用于浏览器应用程序的 Blogger API 密钥是否应该保密。

![在此处输入图像描述](https://i.stack.imgur.com/xcxWB.png)

我问的原因是因为我打算写一篇关于在 JavaScript 中使用 Google Blogger API 的博客文章，并且希望在 jsFiddle 上公开使用 API（以及代码示例中的 API 密钥）提供一个工作示例。

这是我在[文档](https://developers.google.com/console/help/?hl=mt#UsingKeys)中找到的（突出显示的值得注意的部分）：

> [...] 当您的应用程序需要调用在此项目中启用的 API 时，应用程序会将此密钥作为 key=API_key 参数传递给所有 API 请求。**使用此密钥不需要任何用户操作或同意，不授予对任何帐户信息的访问权限，也不用于授权**。

那么我是否可以假设我可以公开共享此 API 密钥而不会冒有人对其进行恶意行为的风险？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T12:46:29.953

虽然无法单独通过密钥获取帐户信息、身份验证和其他内容，但它用于将 API 调用链接到 Google 项目。

如果密钥是公开可用的，人们可以使用它进行请求，Google API 会将请求链接到您的 Google 项目。这可能使恶意用户能够使用此密钥发送垃圾邮件请求，可能使您的帐户达到每日请求配额。

最后由您决定，但建议不要公开您的 API 密钥。

# java - Java：内部类中的内部类

> ID：16147292
> 
> 赞同：4
> 
> 时间：2013-04-22T12:36:35.837
> 
> 标签：java, class, syntax, declaration

如果以前有人问过这个问题，请原谅。我在网上搜索过，这里是 stack **overflow**。

**案子：**

我被困在我的 java 项目中，当我尝试在另一个内部类中使用内部类时，编译器不会编译我的项目。

**代码：**

```
public class outer  {
    public class middle {
        public class inner  {
            public int variable = "8";
        }
    }
} 
```

**宣言：**

我试图声明这样的类：

```
outer outerObject = new outer();
outerObject.middle middleObject = outerObject.new middle();
outerObject.middleObject.inner innerObject = outerObject.middleObject.new inner(); 
```

**编译结果：**

```
source\start.java:8: error: cannot find symbol
                      outerObject.middleObject.inner innerObject = outerObject
.middleObject.new inner();
^ 
```

任何答复将不胜感激！无论我的意图是不可能的，还是我只是做错了什么。

**祝你今天过得愉快！**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T12:39:49.580

线

```
outerObject.middleObject.inner innerObject = outerObject.middleObject.new inner(); 
```

应该

```
outer.middle.inner innerObject = middleObject.new inner(); 
```

`outerObject`没有`middleObject`字段。不幸的是，Java 允许使用变量表达式来限定静态变量，因此实际编译时会得到一些奇怪的代码。

如果您坚持 Java 命名约定，这可能会更清楚。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T12:40:28.473

您的代码永远不会编译为：

```
public int variable = "8"; 
```

这条线应该是

```
public int variable = 8; 
```

首先改变这一行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T12:43:49.857

用这个

```
public class outer  {
    public class middle {
        public class inner  {
            public int variable = 8;
        }
    }
    public static void main(String[] a) {
        outer outerObject = new outer();
        middle middleObject = outerObject.new middle();
        middle.inner innerObject = middleObject.new inner();
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T12:49:10.533

请试试这个：

```
 Outer outerObject = new Outer();
    Outer.middle middleObject = outerObject.new middle();
    Outer.middle.inner innerObject = middleObject.new inner(); 
```

您还需要更改：

```
 public int variable = "8"; 
```

至

```
 public String variable = "8"; 
```

# visual-studio-2010 - 测试设置设置和清理脚本

> ID：16147293
> 
> 赞同：0
> 
> 时间：2013-04-22T12:36:39.150
> 
> 标签：visual-studio-2010, batch-file

我正在尝试使用测试设置从 Microsoft 测试管理器运行批处理文件脚本，但它给出了错误。

```
TestOutcome 'Error'; Message 'The setup batch file exited with error code 1.' 
```

我的批处理文件：

```
setx SERVERTEST "TEST" -m 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T12:57:43.467

运行`setx /?`显示了一些使用该命令的示例，其中之一是`SETX MACHINE "COMPAQ COMPUTER" /M`. 这遵循选项以 . 开头的 Windows 样式`/`。您问题中的代码以`-m`.

尝试将 替换`-m`为`/m`或`/M`。

# objective-c - SQLITE 数据库在事务期间被锁定

> ID：16147298
> 
> 赞同：0
> 
> 时间：2013-04-22T12:37:02.450
> 
> 标签：objective-c, sqlite, transactions, locked

几天来我一直试图弄清楚这一点，但我无法弄清楚发生了什么。在我的应用程序中，我希望能够从 tableView 中删除一个项目和相关项目。因此，当按下 TableView 中的删除按钮时，会调用以下方法。

```
- (BOOL) deleteDuik:(MOODuik *) duik
{
    int diveid = [duik duikId];
    NSLog(@"Begin Delete");
    sqlite3 *db = [self openDatabase];

    sqlite3_stmt * deleteStmt = nil;

    BOOL succes = TRUE;

    @try{
        if (db != NULL) {
            sqlite3_exec(db, "BEGIN TRANSACTION", 0, 0, 0);

            //NSString *sqlString = [NSString stringWithFormat:@"delete from duik where duikid = %d", diveid];

            const char *sql = "delete from duik where duikid = ?";
            if(sqlite3_prepare_v2(db, sql, -1, &deleteStmt, NULL) == SQLITE_OK)
            {

                sqlite3_bind_int(deleteStmt, 1, diveid);

                sqlite3_step(deleteStmt);
                sqlite3_finalize(deleteStmt);

                deleteStmt = nil;

                sql = "delete from waarneming where duikid = ?";

                if(sqlite3_prepare_v2(db, sql, -1, &deleteStmt, NULL) == SQLITE_OK)
                {
                    sqlite3_bind_int(deleteStmt, 1, diveid);

                    sqlite3_step(deleteStmt);
                    sqlite3_finalize(deleteStmt);
                }

            }

        } else
        {
            NSLog(@"Failed to connect to db");
            succes = FALSE;
        }

        if(succes && ( [duik backendid] == 0 ||  [self deleteDuikServerSide:[duik backendid]]))
        {
            NSLog(@"End Delete");
            if(sqlite3_exec(db, "COMMIT TRANSACTION", 0, 0, 0) !=SQLITE_OK) NSLog(@"SQL Error: %s",sqlite3_errmsg(db));
        } else{
            NSLog(@"Failed to delete remote copy");
            sqlite3_exec(db, "ROLLBACK TRANSACTION", 0, 0, 0);
            succes = false;
        }

    } @catch (NSException *e) {
        NSLog(@"Failed to delete: %@", [e description]);
        sqlite3_exec(db, "ROLLBACK TRANSACTION", 0, 0, 0);
    } @finally {

        @try {
            sqlite3_finalize(deleteStmt);
            sqlite3_close(db);

        }
        @catch (NSException *exception) {
            //REally nothing to do here
        }
        sqlite3_close(db);
    }

    return succes;
} 
```

当我尝试运行它时，它一直告诉我数据库已锁定，但我不知道它为什么被锁定。我已检查其他操作是否同时需要数据库，但我找不到任何操作。此外，如果我从同一个 tableView 添加一行，我将使用相同的构造和事务，并且该构造确实有效。我已经尝试了我能想到的所有方法，至少重写了这段代码 10 次，但到目前为止还没有运气。

有没有人可以告诉我我在这里做错了什么？

# php - 通过 PHP 动态生成的 XLS 下拉字段

> ID：16147301
> 
> 赞同：1
> 
> 时间：2013-04-22T12:37:12.480
> 
> 标签：php, excel, xls

我很想知道是否有人找到了一种动态创建 XLS 的方法，并在每一行上预先填充了一个下拉字段？例如，如果我想为客户提供他们所有员工的列表，并且在每个员工姓名旁边是一个下拉列表，其中预先填写了职位列表（开发人员、营销人员、设计师）供客户选择。然后，客户可以重新上传 XLS，为我提供这些新信息。下拉字段的原因是为客户提供简单的选项来选择，而不是强迫他们将它们全部输入或复制并粘贴到列表中。

我已经通过 PHP 类和 Google Docs API 搜索了高低，但我还没有找到实现这一目标的方法。在我放弃这条道路之前，我想我会问社区。

感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T12:55:58.757

感谢 Waygood，这为我提供了一条前进的道路：

[http://phpexcel.codeplex.com/discussions/278878](http://phpexcel.codeplex.com/discussions/278878)

[在 PHP 中生成 excel 输出的最佳方法是什么？](https://stackoverflow.com/questions/10595599/which-is-the-best-way-to-generate-excel-output-in-php)

非常感激！

# wpf - StylusDown 事件发生在 TouchDown 之后

> ID：16147307
> 
> 赞同：0
> 
> 时间：2013-04-22T12:37:21.153
> 
> 标签：wpf, touch, tablet-pc

我正在为装有 Windows 8 的平板电脑开发应用程序。我正在订阅 TouchDown 和 StylusDown 事件。问题是 - 当我用手指触摸时，两个事件都会发生。首先是 TouchDown，然后是 StylusDown。当我用手写笔触摸时，只会出现 StylusDown。

这是所有平板电脑的正常行为吗？还是特定于某些型号？

我找不到任何有关此的文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-25T18:05:44.460

这是 WPF 中所有触摸事件的标准流程。如果 TouchDown 事件未标记为已处理，它将作为 StylusDown 触发，然后作为 MouseDown 触发。您可以通过处理事件来停止此操作，例如以下：

```
protected override void OnTouchDown( TouchEventArgs e )
{
    // your code here
    e.Handled = true;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-22T09:30:47.513

在设计 WPF 时，周围并没有太多支持触控或触控笔的设备。为了使旧应用程序能够响应新的输入设备，例如触摸屏或手写笔，它们的事件被转换如下（如果它没有被标记为已处理）：

*   触控设备：触控笔 > 触控 > 鼠标
*   触控笔设备：触控笔 > 鼠标

当您希望仅在每个输入设备事件来自其对应的真实设备时处理每个输入设备事件时，问题就开始了，例如，仅当它来自真实的手写笔设备而不是来自触摸设备等时才处理手写笔事件。

在触摸事件的情况下，没有什么特别的要求，因为它只由真正的触摸设备触发。

在鼠标事件的情况下，可以使用 StylusDevice 属性：

```
 protected override void OnMouseDown(MouseButtonEventArgs e)
        {
            if (e.StylusDevice != null) return;

            // This is a real mouse event

            base.OnMouseDown(e);
        } 
```

在 Stylus 事件的情况下，可以使用 StylusDevice.TabletDevice.Type 属性：

```
 protected override void OnStylusButtonDown(StylusButtonEventArgs e)
        {
            if (e.StylusDevice.TabletDevice.Type != TabletDeviceType.Stylus) return;

            // This is a real stylus event

            base.OnStylusButtonDown(e);
        } 
```

# ssis - SSIS中的ExcelConnection管理器动态文件路径

> ID：16147308
> 
> 赞同：1
> 
> 时间：2013-04-22T12:37:22.673
> 
> 标签：ssis

当我尝试以变量形式将连接字符串提供给“Excel 连接管理器”时，它给了我以下错误。

连接字符串格式无效。它必须由一个或多个以分号分隔的 x=y 形式的组件组成。当在数据库连接管理器上设置具有零组件的连接字符串时，会发生此错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T14:10:55.413

由于您需要动态文件路径，因此在为 Excel 连接管理器设置表达式时，您可能会在**Property Expressions Editor中选择****ConnectionString**作为属性。这会导致您在问题中指定的错误。

 **您实际需要选择的是**ExcelFilePath**属性。之后像往常一样在表达式字段中添加变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T13:41:59.197

你应该给我们更多的信息。弹出错误时变量的值是多少？您将该变量分配给了哪个属性？无论如何，我怀疑您没有将连接管理器的 [Delay validation] 属性设置为 True - 没有它 ssis 检查您的连接管理器是否正常，甚至在您为变量赋值之前（这是动态的并且在执行期间发生一些循环，我想）。**

# c++ - 在另一个类中使用模板类

> ID：16147316
> 
> 赞同：-1
> 
> 时间：2013-04-22T12:37:58.560
> 
> 标签：c++, templates

我正在尝试创建一个将使用通用项目的队列。我收到以下代码的错误。

如何在另一个类中使用模板类？

这是我到目前为止所尝试的：

```
#include <iostream>
using namespace std;

template<class T>
class Item
{
public:
    Item(const T & item)
        : itemVal(item)
    {
    }

private:
    T itemVal;
};

class MyQueue
{
public:
    // Error #1
    void InsertNode(const Item & item); 

private:
    struct Node {
        // Error #2
        Item item; 

        struct Node * next;
    };
};

int main()
{
    Item<int> * element = new Item<int>(9);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T12:41:33.830

`Item`不是类型，它是类模板。您需要提供模板参数。在这种情况下，`int`：

```
void InsertNode(const Item<int> & item) 
```

和

```
struct Node{
    Item<int> item;
    Node<int> * next;
}; 
```

否则，您可以制作`MyQueue`和`Node`分类模板。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T13:32:17.147

重新设计你的班级会更好。

```
template<class T>
class MyQueue {

    struct Node {
        T item;
        Node * next;
    };

public:
    MyQueue();
    void InsertNode(const T & item);

private:
    Node * _root;
}; 
```

PS对不起我的英语。

# bash - Bash“反转”一个字符串

> ID：16147317
> 
> 赞同：0
> 
> 时间：2013-04-22T12:38:02.443
> 
> 标签：bash, shell, ip, reverse

```
IP 12.34.56.78 
```

我想找到一种方法来回显它并显示以下输出

```
78.56.34.12 
```

与输出相同`host 12.34.56.78`但没有所有其他行话....

也许可以只使用主机并删除所有其他内容。理想情况下会避免主机查找。

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T12:50:29.240

试试这个单行：

```
awk -F. '{s="";for (i=NF;i>1;i--) s=s sprintf("%s.",$i);$0=s $1}1' file 
```

用你的例子：

```
kent$  echo "12.34.56.78"|awk -F. '{s="";for (i=NF;i>1;i--) s=s sprintf("%s.",$i);$0=s $1}1'
78.56.34.12 
```

如果您有前缀`HOST or IP or whatever`：

```
kent$  echo "FOO 12.34.56.78"|awk -F'[. ]' '{s="";for (i=NF;i>2;i--) s=s sprintf("%s.",$i);$0=$1" "s $2}1' 
FOO 78.56.34.12 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T14:33:19.173

我不认为我的回答能解决你的问题，Kent 似乎为你提供了一个很好的方法，但如果其他人想要反转 BASH 字符串并在这里结束，这可能很有用：

```
echo -n $YOUR_STRING | tac -rs [^-\n] 
```

# jquery - 从中心展开背景（CSS / Javascript）

> ID：16147319
> 
> 赞同：1
> 
> 时间：2013-04-22T12:38:08.500
> 
> 标签：jquery, css, css-transitions

请注意，下面的示例会自动播放音乐！如果您希望将扬声器静音，请在访问示例之前执行此操作。

我正在重新创建[这个](http://nordicacondos.com/)最初是在 Flash 中完成的网站。基本上在快闪网站上，有 5 个主要按钮，“发现”、“体验”、“驻留”、“互动”和“连接”。当您悬停这些按钮时，背景会随着底部边框从中心向外扩展而略有变化。

我不介意将背景设置为图像或使用边框来指示颜色。根据我在这里所做的，我想为悬停效果和正常状态设置背景图像是最简单的。我希望背景图像在悬停时过渡到新的图像，但要让它从中心而不是从左到右或从右到左展开。

这是我可以通过 CSS 过渡或 jQuery 完成的吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T13:09:57.670

使用 CSS 过渡，您可以很好地做到这一点。

您可以按如下方式使用 HTML

```
<div class="container">
    <span class="greyline">
        <span class="redline"></span>
    </span>
</div> 
```

当您将鼠标悬停在容器框上时，以下 CSS 将为红线设置动画

```
.container {height:100px;width:200px;background:#eee;position:relative;}
.container span {display:block;}
.greyline {background:#ccc;height:10px;width:200px;position:absolute;bottom:0;}
.redline {background:red;height:10px;width:0;margin:auto;}
.container:hover .redline {
    width:200px;
    -moz-transition: all 0.3s ease-out;
    -o-transition: all 0.3s ease-out;
    -webkit-transition: all 0.3s ease-out;
    transition:all 0.3s ease-out;
} 
```

在这里试试：http: [//jsfiddle.net/SNzgs/1/](http://jsfiddle.net/SNzgs/1/)

浏览器支持如下：Chrome 1.0、Safari 3.2、Firefox 4.0、IE 10、Opera 10.5

# c++ - 添加 const 正确性

> ID：16147321
> 
> 赞同：4
> 
> 时间：2013-04-22T12:38:12.727
> 
> 标签：c++, constants

我有一些代码是在不考虑 const 正确性的情况下编写的。有什么情况可以改变这个

```
class X
{
public:
    X(X& rhs); // does not modify rhs
    ...
}; 
```

对此

```
class X
{
public:
    X(const X& rhs);
    ...
}; 
```

会改变现有程序的行为吗？我知道此更改将允许当前未编译的代码进行编译，但我很感兴趣是否存在已经编译的代码会改变其行为的任何情况。

类似的问题，改为进行此更改是否有任何优点？

```
class X
{
public:
    X(X& rhs); // does not modify rhs
    X(const X& rhs);
    ...
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T12:47:05.433

对于复制构造函数，我不这么认为。但请注意，一般来说，是的，声明`const`会影响调用哪个方法。想到的唯一示例是数组重载 - 参见例如[这个问题](https://stackoverflow.com/questions/5762042/const-overloaded-operator-function-and-its-invocation)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T13:19:29.500

实际上，恕我直言，复制构造函数应该始终将 const 引用作为其参数。

```
X(X& rhs) { } // does not modify rhs 
```

这不允许复制 const 对象，因此以下代码将无法编译。虽然非 const 对象可以用作 const 参数，但反过来是不可能的

```
X const test;
X new_x(test); 
```

我无法想象为什么有人应该排除 const 对象的副本。

关于您要进行的更改：复制构造函数是否依赖于任何定义为非常量的 X 成员函数？

这将像一个魅力，但允许复制 const 对象：

```
class X
{
private:
  int a;
public:
  X(X &rhs) { a = rhs.value(); } 
  int& value (void) { return a; }
}; 
```

下一个示例将无法编译，因为`rhs`它是 const 但`value()`不是 const。

```
class X
{
private:
  int a;
public:
  X(X const &rhs) { a = rhs.value(); } 
  int& value (void) { return a; }
}; 
```

如果你想让你的类 const 正确，你可能需要检查整个类。它只会影响您的课堂实施。因为我不知道外部代码应该依赖类成员函数的“非常量”的情况。除非我的示例中的任何公共成员函数返回非常量引用。

以下代码段将按预期进行。

```
class X
{
private:
  int a;
public:
  X(int const &b) : a(b) { }
  X(X const &rhs) { a = rhs.value(); } 
  int const & value (void) const { return a; }
}; 
```

但请注意，这会干扰任何代码，例如：

```
X test(100);
test.value() = 12; 
```

这可以使用`int& value (void) { return a; }` 但会失败`int const & value (void) const { return a; }`。为了安全起见，您当然可以同时提供两者。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T13:52:27.727

djechlin 在[他的回答](https://stackoverflow.com/a/16147484/160206)中提出了一个重要的观点，虽然有些不清楚，所以我会尝试更好地解释。

对象或引用的常量会影响重载决议。例如，如果您有一个`const`基于成员函数重载的对象，将选择不同的重载：

```
struct foo {
    void do_stuff();
    void do_stuff() const;
};

int main() {
    foo f;
    const foo& fr = f;

    f.do_stuff();   // calls non-const version
    fr.do_stuff();  // calls const version
} 
```

现在，如果其中一个重载具有副作用，另一个则没有，那么在更改签名后您会得到不同的行为，因为（或者更确切地说，*即使*）程序编译得很好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T12:44:28.893

由于您正在更改具有复制构造函数的类，因此我假设您可以检查复制构造函数代码。如果您可以进行此更改并且复制构造函数没有给出编译器错误，那么您可能很好。要考虑的一种情况是复制赋值运算符的作用，因为不能保证在优化代码中会调用它。因此，还要确保您的复制分配将与 const 参数一起使用。

# android - 为什么没有从我的 APK 复制 libgnustl_shared.so？

> ID：16147325
> 
> 赞同：9
> 
> 时间：2013-04-22T12:38:22.360
> 
> 标签：android, android-ndk, java-native-interface

我有一个具有`libs`如下文件夹结构的 android 项目：

```
/libs
  /armeabi
    libfoo.so
    libbar.so
    libmystuff.so
    libgnustl_shared.so
  /armeabi-v7a
    libfoo.so
    libbar.so 
```

`foo`并且`bar`是第三方库，`mystuff`是我自己的库，来自一个单独的 android JNI 项目，它需要`gnustl_shared`来自同一个 JNI 项目。

当我在 Eclipse 中构建我的项目时，我可以使用 查看生成的 APK 的内容`unzip -l`，它确实表明所有这些库文件都已包含在内。

但是，安装 APK 后，该`/data/data/com.myproject/lib`文件夹不包含`libgnustl_shared.so`，即使存在其他库。

这不可避免地会导致以下错误：

```
UnsatisfiedLinkError: Couldn't load gnustl_shared: findLibrary returned null 
```

作为一个健全的检查，我跑了`adb push ./libs/armeabi/libgnustl_shared.so /data/data/com.myproject/lib`，果然，应用程序按预期启动。

我在构建日志或 Eclipse 控制台中没有看到任何表明构建或安装应用程序存在任何问题的信息。

*   什么可能阻止`libgnustl_shared.so`我的应用程序安装？
*   我在哪里可以了解安装 APK 时会发生什么？

* * *

如果我可以提供任何可能有帮助的具体信息，请在评论中告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-24T17:33:24.997

我认为，在您的 JNI 项目的 Android.mk 文件中，最有可能的是，当您构建 libmystuff.so 时，您正在引用 libgnustl_shared.so，例如：

```
LOCAL_LDLIBS += -lgnustl_shared 
```

也许您可以尝试将其添加为模块（NDK 的工作确实专注于模块），例如：

```
include $(CLEAR_VARS) 
LOCAL_MODULE := gnustl_shared 
LOCAL_SRC_FILES := libgnustl_shared.so
include $(PREBUILT_SHARED_LIBRARY) 
```

和（在您正在构建 libmystuff.so 的部分中）：

```
LOCAL_SHARED_LIBRARIES := gnustl_shared 
```

并检查它是否最终被复制

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-01T17:29:20.660

在此处查看答案：[如何在 ndk 应用程序中链接任何库](https://stackoverflow.com/questions/10106965/how-to-link-any-libarary-in-ndk-application) 问题很可能出在您的 Android.mk 文件中。你应该有一条像底部一样的线：

```
include $(BUILD_SHARED_LIBRARY) 
```

如果没有，那么您不包括您的共享库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-30T13:04:49.360

我认为你的**libgnustl_shared.so**需要在*/armeabi-v7a*下而不是*/armeabi*

请尝试将**libgnustl_shared.so**复制到*/armeabi-v7a*

# sql-server - 按磁盘顺序读取 MSSQL 表

> ID：16147332
> 
> 赞同：1
> 
> 时间：2013-04-22T12:38:53.257
> 
> 标签：sql-server, performance, io, disk

[如何利用磁盘 IO 队列](https://stackoverflow.com/questions/1309286/how-to-take-advantage-of-disk-io-queueing)
我需要这样做，但在 Microsoft SQL 服务器表上。
我有一个包含 +100 个表的数据库。我需要读取每个表的每条记录。
有什么建议么？写几秒钟的基准测试和调试代码值得吗？
如果我能知道每个表在磁盘上的位置，那就太好了。
因为有人会问：是的，这是我程序中的一个瓶颈。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T12:47:59.690

其他答案与 SQL Server 无关。SQL Server 以自己的方式执行 IO。

一些指针虽然：

*   确保每个表都有聚集索引
*   您有定期索引维护
*   确保您有良好的磁盘（RAID 等）
*   如果非常关键，请使用企业版进行预读功能
*   确保您有足够的内存

这是什么意思？

*   如果您想在单个工作站磁盘上使用 SQL Server Express，请不要打扰。你不能优化这个
*   拥有聚集索引和索引维护可确保数据在磁盘上大部分是连续的（受后续数据更改的影响）
*   这需要多长时间的代理是在所有表上运行 DBCC CHECKDB。或 ALTER INDEX 重建。两者都需要从磁盘读取所有表的所有数据

# android - ScrollView 内 TableView 中单元格的边框

> ID：16147334
> 
> 赞同：0
> 
> 时间：2013-04-22T12:38:55.227
> 
> 标签：android, border, scrollview, tableview, cells

我有一个很奇怪的问题；我希望有人知道这是什么。我在可滚动视图中构建了一个表格，带有 2px 厚的单元格边框。在平板电脑（三星 Galaxy 10.1）上它是完美的，而在 Galaxy Tab 2 上它“停止”仅在滚动视图的可见部分绘制边框。我附上两张图片以显示差异 ![三星 Galaxy Tab 10.1](https://i.stack.imgur.com/vV4am.jpg)

![三星 Galaxy Tab 2（向右滚动一点）](https://i.stack.imgur.com/vEIL8.jpg)

这是java部分的代码：

```
 @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container,
                Bundle savedInstanceState) {
            super.onCreateView(inflater, container, savedInstanceState);
            scrollView1=(HorizontalScrollView) firstView.findViewById(R.id.horizontalScrollView1);
            //position the scroller to the present time
            scrollView1.post(new Runnable() { 
                public void run() { 
                    if((Calendar.getInstance().get(Calendar.HOUR_OF_DAY)>3))
                     scrollView1.scrollTo(CELL_WIDTH*((Calendar.getInstance().get(Calendar.HOUR_OF_DAY))-3), 0);
                } 
        });

             headerPaint = new Paint();
             headerPaint.setStyle(Paint.Style.STROKE);
             headerPaint.setColor(Color.GRAY);
             headerPaint.setStrokeWidth(2);

             cellPaint = new Paint();
             cellPaint.setStyle(Paint.Style.STROKE);
             cellPaint.setColor(Color.GRAY);
             cellPaint.setStrokeWidth(2);

            textViewData.setText(formatter.format(dateToShow.getTime()));
            imageButtonDateAfter.setOnClickListener(new View.OnClickListener() {
                public void onClick(View v) {
                    Calendar oggi = Calendar.getInstance();
                    oggi.set(Calendar.HOUR_OF_DAY, 23);
                    oggi.set(Calendar.MINUTE, 59);
                    dateToShow.add(Calendar.DAY_OF_MONTH, 1);   
                }
            });
            loadElementiInTable();
            return firstView;
        }

//for space reasons i show you only the first row code (the hours of the day)
 private void loadElementiInTable() {
        tableLayoutElementi.removeAllViews();
        tableLayoutHeader.removeAllViews();
        ArrayList<Integer> orari = new ArrayList<Integer>();
        orari = loadListOrari();
        listPasti = new ArrayList<Pasto>();
        listGlicemie = new ArrayList<Glicemia>();
        listBoli = new ArrayList<Administration>();
        TableRow hoursRow=new TableRow(getActivity().getApplicationContext());
        TableRow hoursHeaderRow=new TableRow(getActivity().getApplicationContext());
        TableRow hoursSepRow = new TableRow(getActivity().getApplicationContext());
        TextView legendanew=new TextView(getActivity().getApplicationContext());

        legendanew.setText("Campo");
        legendanew.setWidth(HEADER_WIDTH);
        legendanew.setGravity(Gravity.CENTER);
        hoursHeaderRow.addView(legendanew);

        for (final Integer j : orari) {
        TextView ora1=new TextView(getActivity().getApplicationContext()){
            @Override
            protected void onDraw(Canvas canvas) {
                super.onDraw(canvas);
                Rect rect = new Rect();
                Paint paint = new Paint();
                paint.setStyle(Paint.Style.STROKE);
                paint.setColor(Color.GRAY);
                paint.setStrokeWidth(2);
                getLocalVisibleRect(rect);
                canvas.drawRect(rect, paint);       
            }

        };
        ora1.setTextColor(Color.DKGRAY);
        ora1.setGravity(Gravity.CENTER);
        TextView sepOra=new TextView(getActivity().getApplicationContext());
        ora1.setText(j+":00");
        if(j==Calendar.getInstance().get(Calendar.HOUR_OF_DAY)){
            ora1.setBackgroundColor(Color.YELLOW);
        }
        ora1.setWidth(CELL_WIDTH);
        hoursRow.addView(ora1);
        //hoursRow.addView(sepOra);
        }

        TableRow glicemiaRow = new TableRow(getActivity().getApplicationContext());
        TableRow glicemiaHeaderRow = new TableRow(getActivity().getApplicationContext());
        TextView glicemiaLabel=new TextView(getActivity().getApplicationContext()){
            @Override
            protected void onDraw(Canvas canvas) {
                super.onDraw(canvas);
                Rect rect = new Rect();
                getLocalVisibleRect(rect);
                canvas.drawRect(rect, headerPaint);       
            }

        };
        glicemiaLabel.setText("Glicemia");
        formatAsHeader(glicemiaLabel);  
        glicemiaHeaderRow.addView(glicemiaLabel);
        TextView glicemiaTuttoIlGiorno=new TextView(getActivity().getApplicationContext()){
            @Override
            protected void onDraw(Canvas canvas) {
                super.onDraw(canvas);
                Rect rect = new Rect();
                getLocalVisibleRect(rect);
                canvas.drawRect(rect, cellPaint);       
            }
        };
        if(showTuttoIlGiorno){
        glicemiaTuttoIlGiorno.setText(EMPTY_CELL);
        formatAsTuttoIlGiorno(glicemiaTuttoIlGiorno);
        glicemiaHeaderRow.addView(glicemiaTuttoIlGiorno);
        }

        tableLayoutElementi.setStretchAllColumns(true);
        legendanew.setWidth(100);
        noteRow.setBaselineAligned(false);
        noteHeaderRow.setBaselineAligned(false);
        tableLayoutElementi.addView(noteRow, 0, new TableLayout.LayoutParams(100, CELL_HEIGHT));
        tableLayoutHeader.addView(noteHeaderRow, 0, new TableLayout.LayoutParams(100, CELL_HEIGHT));
        boloRow.setBaselineAligned(false);
        boloHeaderRow.setBaselineAligned(false);
        tableLayoutElementi.addView(boloRow, 0, new TableLayout.LayoutParams(100, CELL_HEIGHT));
        tableLayoutHeader.addView(boloHeaderRow, 0, new TableLayout.LayoutParams(100, CELL_HEIGHT));
        pastoRow.setBaselineAligned(false);
        pastoHeaderRow.setBaselineAligned(false);
        tableLayoutElementi.addView(pastoRow, 0, new TableLayout.LayoutParams(100, CELL_HEIGHT));
        tableLayoutHeader.addView(pastoHeaderRow, 0, new TableLayout.LayoutParams(100, CELL_HEIGHT));
        glicemiaRow.setBaselineAligned(false);
        glicemiaHeaderRow.setBaselineAligned(false);
        tableLayoutElementi.addView(glicemiaRow, 0, new TableLayout.LayoutParams(100, CELL_HEIGHT));
        tableLayoutHeader.addView(glicemiaHeaderRow, 0, new TableLayout.LayoutParams(100, CELL_HEIGHT));
        tableLayoutHeader.addView(hoursHeaderRow, 0, new TableLayout.LayoutParams(100, heightColonna));
        tableLayoutElementi.addView(hoursRow, 0, new TableLayout.LayoutParams(100, heightColonna));
    }
    } 
```

xml 文件（仅表格部分）：

```
 <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="10" >

        <HorizontalScrollView
            android:id="@+id/horizontalScrollView1"
            android:layout_width="1080dp"
            android:layout_height="match_parent"
            android:layout_alignParentRight="true" >

            <LinearLayout
                android:layout_width="fill_parent"
                android:layout_height="fill_parent" >

            <TableLayout
                android:id="@+id/tableLayoutElementi"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:background="@color/white" >
            </TableLayout>

 </LinearLayout>

            </HorizontalScrollView>

        <LinearLayout
            android:id="@+id/headerleft"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:orientation="vertical" >

            <TableLayout
                android:id="@+id/tableLayoutHeader"
                android:layout_width="match_parent"
                android:layout_height="wrap_content" >

                <TableRow
                    android:id="@+id/tableRow1"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content" >

                    <TextView
                        android:id="@+id/textView1"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="TextView" />

                </TableRow>

                <TableRow
                    android:id="@+id/tableRow2"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content" >

                    <TextView
                        android:id="@+id/textView2"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="TextView" />

                </TableRow>

                <TableRow
                    android:id="@+id/tableRow3"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content" >
                    <TextView
                        android:id="@+id/textView3"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="TextView" />
                </TableRow>
                <TableRow
                    android:id="@+id/tableRow4"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content" >
                </TableRow>
            </TableLayout>
        </LinearLayout>
    </RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T14:33:57.853

我不明白为什么会这样，但我解决了删除这些 textview 声明：

```
TextView cell = new TextView(getActivity().getApplicationContext()) {
                @Override
                protected void onDraw(Canvas canvas) {
                    super.onDraw(canvas);
                    Rect rect = new Rect();
                    getLocalVisibleRect(rect);
                    canvas.drawRect(rect, cellPaint);       
                }
            }; 
```

并把它改为：

```
TextView cell = new TextView(getActivity().getApplicationContext());
v.setBackgroundDrawable(getResources().getDrawable(R.drawable.borded_cell)); 
```

其中 borded_cell 是我放入 res/drawable 的 xml 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android" android:shape="rectangle" >
   <solid android:color="#ffffff" />
   <stroke android:width="1dip" android:color="#4fa5d5"/>
</shape> 
```

# http - Coldfusion linkedin Profile API call

> ID：16147336
> 
> 赞同：0
> 
> 时间：2013-04-22T12:39:06.720
> 
> 标签：http, coldfusion, linkedin

I'm trying to invoke the below URL:

[https://api.linkedin.com/v1/people/~:(id,first-name,last-name,industry,skills)?oauth2_access_token=blabla](https://api.linkedin.com/v1/people/~%3a%28id,first-name,last-name,industry,skills%29?oauth2_access_token=blabla)

When I make the call directly from the browser it works fine, but if I call it using `cfhttp` request I got 404 Not Found error.

The issue is most likely related to url encoding, kindly advise how send the request using cfhttp or another method without being enforced to be urlencoded

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T11:25:15.857

The problem is that the cfhttp enforce encoding of the URL. I found a function on the below blog that can be used to replace the cfhttp

[http://coldfusion9.blogspot.gr/2012/03/custom-cfhttp-tag.html?showComment=1366715001465#c172925816683016138](http://coldfusion9.blogspot.gr/2012/03/custom-cfhttp-tag.html?showComment=1366715001465#c172925816683016138)

# python - 列表连接真的比python中的字符串连接快吗？

> ID：16147344
> 
> 赞同：6
> 
> 时间：2013-04-22T12:39:47.840
> 
> 标签：python, python-2.7, bytecode

我发现字符串连接的 python 字节码似乎比列表连接少。

这是一个例子。

测试.py：

```
a = ''.join(['a', 'b', 'c'])
b = 'a' + 'b' + 'c' 
```

然后我执行`python -m dis test.py`. 我得到了以下 python 字节码（python 2.7）：

```
  1 0 负载常量 0 ('')
              3 LOAD_ATTR 0（加入）
              6 LOAD_CONST 1 ('a')
              9 LOAD_CONST 2 ('b')
             12 LOAD_CONST 3 ('c')
             15 建造清单 3
             18 CALL_FUNCTION 1
             21 STORE_NAME 1（一）

  3 24 LOAD_CONST 6 ('abc')
             27 商店名称 2 (b)
             30 LOAD_CONST 4（无）
             33 返回值  

```

显然，字符串连接的字节码数量较少。它只是`'abc'`直接加载字符串。

谁能解释为什么我们总是说列表连接要好得多？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-22T12:46:26.637

[来自 Python 中的高效字符串连接](http://www.skymind.com/~ocrow/python_string/)

`Method 1`: 'a' + 'b' + 'c'

`Method 6`: a = ''.join(['a', 'b', 'c'])

20,000 个整数被连接成一个 86kb 长的字符串：

![图片](https://i.stack.imgur.com/RRr8j.gif)

> ```
>  Concatenations per second     Process size (kB)
>   Method 1               3770                    2424
>   Method 6               119,800                 3000 
> ```

**结论：是**的，`str.join()`明显**快**于典型的串联 ( `str1+str2`)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-02-23T05:31:51.740

不要相信！永远拿证据！

来源：我盯着python源代码看了一个小时，计算了复杂度！

我的发现。

对于 2 个字符串。（假设 n 是两个字符串的长度）

```
Concat (+) - O(n)
Join - O(n+k) effectively O(n)
Format - O(2n+k) effectively O(n) 
```

超过 2 个字符串。（假设 n 是所有字符串的长度）

```
Concat (+) - O(n^2)
Join - O(n+k) effectively O(n)
Format - O(2n+k) effectively O(n) 
```

结果：

如果您有两个字符串，从技术上讲，连接 (+) 更好，尽管它与连接和格式完全相同。

如果你有两个以上的字符串，concat 会变得很糟糕，并且 join 和 format 实际上是相同的，尽管从技术上来说 join 更好一些。

概括：

如果您不关心效率，请使用上述任何方法。（虽然既然你问了这个问题，我会假设你在乎）

所以 -

如果您有 2 个字符串，请使用 concat （当不在循环中时！）如果您有两个以上的字符串（所有字符串）（或在循环中），请使用 join 如果您没有任何字符串，请使用格式，因为 duh。

希望这可以帮助！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-22T12:41:53.360

因为

```
''.join(my_list) 
```

比

```
my_list[0] + my_list[1] 
```

并且优于

```
my_list[0] + my_list[1] + my_list[2] 
```

并且优于

```
my_list[0] + my_list[1] + my_list[2] + my_list[3] 
```

更好……</p>

简而言之：

```
print 'better than'
print ' + '.join('my_list[{}]'.format(i) for i in xrange(x)) 
```

对于任何`x`.

# php - 为什么 PHP 会破坏我的 CSS？

> ID：16147346
> 
> 赞同：2
> 
> 时间：2013-04-22T12:39:50.533
> 
> 标签：php, forms, message, contact, mailer

![截屏](https://i.stack.imgur.com/8H6O4.jpg)

我最近使用 PHP 邮件程序创建了一个联系表单，该表单终于可以使用了。然而，成功消息打破了我的页面并显示在左上角而不是表单下方。正如你在下面看到的。

这是 HTML：

```
<form method="POST">
       <table border="1">
            <tr>
            <td><label for="name" class="g">Name</label></td>
            <td><input id="name" name="name" type="text" autofocus></td>
            </tr>

            <tr>
            <td><label for="address" class="g">Address</label></td>
            <td><textarea rows="3" id="address" name="address" cols="50"></textarea></td>
            </tr>

            <tr>
            <td><label for="number" class="g">Contact number</label></td>
            <td><input id="number" name="number" type="text" autofocus></td>
            </tr>

            <tr>
            <td><label for="email" class="g">Email</label></td>
            <td><input id="email" name="email" type="text" placeholder="example@domain.com" autofocus></td>
            </tr>

            <tr>
            <td><label for="message" class="g">Enquiry</label></td>
            <td><textarea rows="3" id="message" name="message" cols="50"></textarea></td>
            </tr>
            </table>
            <input type="submit" value="Submit" name="submit">
            <?php
            if ($success) {
                echo $success;
            }
            ?>

            </form> 
```

它还在表单下方的页面中间创建了一个巨大的空白区域。有人知道为什么吗？或者我将如何调试它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T12:41:30.133

你应该把它放在一个 div 或一个 span

```
<div style="text-align:center;"> <?php
        if ($success) {
            echo $success;
        }
        ?>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T12:47:05.967

试试下面的代码：

```
 <form method="POST">
   <table border="1">
        <tr>
        <td><label for="name" class="g">Name</label></td>
        <td><input id="name" name="name" type="text" autofocus></td>
        </tr>

        <tr>
        <td><label for="address" class="g">Address</label></td>
        <td><textarea rows="3" id="address" name="address" cols="50"></textarea></td>
        </tr>

        <tr>
        <td><label for="number" class="g">Contact number</label></td>
        <td><input id="number" name="number" type="text" autofocus></td>
        </tr>

        <tr>
        <td><label for="email" class="g">Email</label></td>
        <td><input id="email" name="email" type="text" placeholder="example@domain.com" autofocus></td>
        </tr>

        <tr>
        <td><label for="message" class="g">Enquiry</label></td>
        <td><textarea rows="3" id="message" name="message" cols="50"></textarea></td>
        </tr>
        <?php
        if ($success) {?>

            <tr><td colspan="2">

            <?php echo $success; ?>
           </td></tr>
        <?php }
        ?>
        </table>
        <input type="submit" value="Submit" name="submit">

        </form> 
```

# ruby-on-rails - 在 Rails 中为多个模型使用一个图像上传器（载波）？

> ID：16147347
> 
> 赞同：3
> 
> 时间：2013-04-22T12:39:50.977
> 
> 标签：ruby-on-rails, carrierwave

这里我有两个模型：用户和图书用户有一个头像要上传，图书有一个封面要上传我已经阅读了关于上传图片的 railscast，但我不知道我应该如何处理不同类型的图片？（在这种情况下，用户的头像和书籍的封面）

我已经检查了一些论坛的开源代码。它使用 AvatarUploader 和 PhotoUploader，用于在帖子中上传照片。

那么，我应该为照片和头像使用一个上传器（以及如何？）还是只为每个创建 2 个上传器？谢谢 ！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-22T14:34:28.420

使用两个单独的上传器绝对没问题，即使它们几乎相同。无论如何，它们都可以扩展`CarrierWave::Uploader::Base`，它只是让您的对象保持美观且命名整齐。

如果您有一些想要在两者中使用并且不想重复的共享功能，您总是可以编写自己的类来扩展`CarrierWave::Uploader::Base`和继承上传者中的那些！

```
class MyImageUploaderBase < CarrierWave::Uploader::Base
  def extension_white_list
    %w(jpg jpeg gif png)
  end
end

class AvatarUploader < MyImageUploaderBase 
  ...
end 
```

# memory - gdb 下的错误消失（与内存有关？）

> ID：16147348
> 
> 赞同：0
> 
> 时间：2013-04-22T12:39:52.703
> 
> 标签：memory, gdb, malloc

我有一个程序无法执行内存分配

```
gsldata=gsl_matrix_calloc(maxdim,maxdim); 
```

这是通常的内存分配。在gdb下，程序运行完美。我google了一下，问题好像是

> 如果您在 gdb 下运行程序时您的错误消失了，那可能是因为 gdb 默认禁用平台上的地址随机化，例如 gnu/Linux，这些平台对独立程序执行此操作。使用 set disable-randomization off 来尝试重现此类难以捉摸的错误。

问题是，我不能禁用随机化，因为它“在这个平台上是不允许的”。那么，解决问题的可能方法是什么？

# windows-phone-7 - 是否可以在 Windows Phone 上获得总/可用内存？

> ID：16147351
> 
> 赞同：1
> 
> 时间：2013-04-22T12:39:53.943
> 
> 标签：windows-phone-7, windows-phone-8

如何在 Windows Phone 上获取总/可用内存？我的意思是整个设备的总/可用内存，而不仅仅是我的应用程序本身，我可以得到它们吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T16:18:08.323

您可以使用7.0 上的 DeviceExtendedProperties 类或[7.1上的](http://msdn.microsoft.com/en-US/library/windowsphone/develop/microsoft.phone.info.deviceextendedproperties%28v=vs.105%29.aspx)[DeviceStatus](http://msdn.microsoft.com/en-US/library/windowsphone/develop/microsoft.phone.info.devicestatus%28v=vs.105%29.aspx)类来获取设备的总内存（可能对检测低内存设备有用）。

您还可以访问您的应用程序当前使用的内存量和已使用的最大内存量，但无法找到设备的可用内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T12:48:33.743

您的应用程序只能访问其隔离存储的内存，而不能与其他应用程序中断。这是一个约束，但必须应对它。

# wcf - 具有多个 webHttpBinding 绑定的 WCF 服务在 Visual Studio 测试客户端中失败

> ID：16147359
> 
> 赞同：1
> 
> 时间：2013-04-22T12:40:16.857
> 
> 标签：wcf, visual-studio-2012, wcf-4

我有一个定义了四个端点的服务，配置如下所示：

```
 <service name="Systembolaget.Services.ButikService" behaviorConfiguration="default">
    <endpoint
        address="xml"
        binding="webHttpBinding"
        behaviorConfiguration="xml"
        contract="Systembolaget.Contracts.Butiker.IButikService" />

    <endpoint
        address="json"
        binding="webHttpBinding"
        behaviorConfiguration="json"
        contract="Systembolaget.Contracts.Butiker.IButikService" />

    <endpoint
        address="soap"
        binding="basicHttpBinding"
        contract="Systembolaget.Contracts.Butiker.IButikService"
        bindingConfiguration="default"/>

    <endpoint
        address="mex"
        binding="mexHttpBinding"
        contract="IMetadataExchange" />
  </service>

<behaviors>
  <endpointBehaviors>
    <behavior name="xml">
      <webHttp defaultOutgoingResponseFormat="Xml" defaultBodyStyle="Bare"></webHttp>
    </behavior>

    <behavior name="json">
      <webHttp defaultOutgoingResponseFormat="Json" defaultBodyStyle="Bare"></webHttp>
    </behavior>
  </endpointBehaviors>
  <serviceBehaviors>
    <behavior name="default">
      <serviceMetadata httpGetEnabled="true" httpsGetEnabled="true" />
      <serviceDebug includeExceptionDetailInFaults="true" />
    </behavior>
  </serviceBehaviors>
</behaviors> 
```

将服务与任何端点一起使用时，一切正常。但是，如果 xml 和 json 端点都存在，我不能在 Visual Studio 2012 中使用测试客户端。如果我注释掉一个或另一个，客户端可以工作，如果我将两者都保存在配置文件中，我会收到以下错误：

> 错误：无法从中获取元数据`http://localhost:52832/VarugruppService.svc`如果这是您有权访问的 Windows (R) Communication Foundation 服务，请检查您是否已在指定地址启用元数据发布。有关启用元数据发布的帮助，请参阅位于`http://go.microsoft.com/fwlink/?LinkId=65455`.WS-Metadata Exchange
> URI 的 MSDN 文档：`http://localhost:52832/VarugruppService.svc`
> 元数据包含无法解析的引用：`http://localhost:52832/VarugruppService.svc`。
> 没有`http://localhost:52832/VarugruppService.svc`可以接受消息的端点监听。这通常是由不正确的地址或 SOAP 操作引起的。有关更多详细信息，请参阅 InnerException（如果存在）。
> 远程服务器返回错误：（404）未找到。HTTP GET 错误
> URI：`http://localhost:52832/VarugruppService.svc`
> 下载“ `http://localhost:52832/VarugruppService.svc`”时出错。
> 请求失败，HTTP 状态为 404：未找到。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-14T12:54:16.480

您可以通过为每个 webHttpBindng 添加单独的绑定配置来实现此目的：

```
<bindings>
  <webHttpBinding>
    <binding name="xmlWebBinding">
    </binding>
    <binding name="jsonWebBinding">
    </binding>
  </webHttpBinding>

</bindings>
<services>
  <service name="Systembolaget.Services.ButikService" behaviorConfiguration="default">
    <endpoint
        address="xml"
        binding="webHttpBinding"
        bindingConfiguration="xmlWebBinding"
        behaviorConfiguration="xml"
        contract="Systembolaget.Contracts.Butiker.IButikService" />

    <endpoint
        address="json"
        binding="webHttpBinding"
        bindingConfiguration="jsonWebBinding"
        behaviorConfiguration="json"
        contract="Systembolaget.Contracts.Butiker.IButikService" />

    <endpoint
        address="soap"
        binding="basicHttpBinding"
        contract="Systembolaget.Contracts.Butiker.IButikService"
        bindingConfiguration="default"/>

    <endpoint
        address="mex"
        binding="mexHttpBinding"
        contract="IMetadataExchange" />
  </service>
</services>
<behaviors>
  <endpointBehaviors>
    <behavior name="xml">
      <webHttp defaultOutgoingResponseFormat="Xml" defaultBodyStyle="Bare"></webHttp>
    </behavior>

    <behavior name="json">
      <webHttp defaultOutgoingResponseFormat="Json" defaultBodyStyle="Bare"></webHttp>
    </behavior>
  </endpointBehaviors>
  <serviceBehaviors>
    <behavior name="default">
      <serviceMetadata httpGetEnabled="true" httpsGetEnabled="true" />
      <serviceDebug includeExceptionDetailInFaults="true" />
    </behavior>
  </serviceBehaviors>
</behaviors> 
```

感谢本论坛底部的回答者：

[http://tiku.io/questions/1554725/how-can-basichttpbinding-webhttpbinding-mexhttpbinding-endpoints-coexist-in-o](http://tiku.io/questions/1554725/how-can-basichttpbinding-webhttpbinding-mexhttpbinding-endpoints-coexist-in-o)

# ejb - EJB - 将上下文数据从 JSF 传递到 EJB

> ID：16147363
> 
> 赞同：0
> 
> 时间：2013-04-22T12:40:24.633
> 
> 标签：ejb, ejb-3.0, ejb-3.1

A 有一个新特性，它迫使我将一些新的数据结构传递给我的 EJB。

这是一个用户会话上下文，其中包含有关当前用户的一些信息。

如何在不重构方法签名和调用的情况下将这些数据传递给我的 EJB？

使用 ThreadLocal？但是如果它不在同一个JVM上呢？

下面有一些代码。你能给我小费吗？

```
/** created at login time, when user put it's credential */
public class UserSessionContext {
    private User current;
    private Company company;
    // getters e setters
}

/** web page controller */
@ManagedBean // at web tier
public class ListCustomersController {

    @EJB
    CustomersRepository customers; // some remote interface

    // getters / setters
    private List<Filters> filters; // from the UI

    /** used in a datatable component */
    public List<Customer> getAll(){
        return customers.getAllWith(filters); // I have no UserSessionContext parameter
    }

}

/** used by web controller */
@Stateless
public CustomersEJB implements CustomersRepository {

    @Inject 
    UserSessionContext currentContext; // injected before call this object

    public List<Customer> getAllWith(List<Filter> filters){

        TypeQuery<Customer> customersQuery = ... //
        customersQuery.setParameter("company",currentContext.getCompany());

        return customersQuery.getResultList();

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T16:52:57.520

没有执行此操作的标准机制 ( [JSR-149](http://jcp.org/en/jsr/detail?id=149) )。WebSphere Application Server 有一个[工作区服务](http://pic.dhe.ibm.com/infocenter/wasinfo/v8r5/topic/com.ibm.websphere.base.iseries.doc/workarea/concepts/cwa_overview.html)编程模型扩展，可用于以这种方式传播上下文。

# python - 探索 Python 中的属性

> ID：16147369
> 
> 赞同：0
> 
> 时间：2013-04-22T12:40:38.053
> 
> 标签：python, html-parsing

我正在从以下网站解析 html：[http](http://www.asusparts.eu/partfinder/Asus/All) ://www.asusparts.eu/partfinder/Asus/All In One/E 系列 我只是想知道是否有任何方法可以探索 python 中的解析属性？例如.. 下面的代码输出以下内容：

```
datas = s.find(id='accordion')

    a = datas.findAll('a')

    for data in a:

            if(data.has_attr('onclick')):
                model_info.append(data['onclick'])
                print data 
```

**[输出]**

```
<a href="#Bracket" onclick="getProductsBasedOnCategoryID('Asus','Bracket','ET10B','7138', this, 'E Series')">Bracket</a> 
```

这些是我想检索的值：

```
nCategoryID = Bracket

nModelID = ET10B

family = E Series 
```

由于页面是从 AJAX 呈现的，因此他们使用脚本源，从而从脚本文件中生成以下 url：

```
url = 'http://json.zandparts.com/api/category/GetCategories/' + country + '/' + currency + '/' + nModelID + '/' + family + '/' + nCategoryID + '/' + brandName + '/' + null 
```

我怎样才能只检索上面列出的 3 个值？

* * *

**[编辑]**

* * *

```
import string, urllib2, urlparse, csv, sys
from urllib import quote
from urlparse import urljoin
from bs4 import BeautifulSoup
from ast import literal_eval

changable_url = 'http://www.asusparts.eu/partfinder/Asus/All%20In%20One/E%20Series'
page = urllib2.urlopen(changable_url)
base_url = 'http://www.asusparts.eu'
soup = BeautifulSoup(page)

#Array to hold all options
redirects = []
#Array to hold all data
model_info = []

print "FETCHING OPTIONS"
select = soup.find(id='myselectListModel')
#print select.get_text()

options = select.findAll('option')

for option in options:
    if(option.has_attr('redirectvalue')):
       redirects.append(option['redirectvalue'])

for r in redirects:
    rpage = urllib2.urlopen(urljoin(base_url, quote(r)))
    s = BeautifulSoup(rpage)
    #print s

    print "FETCHING MAIN TITLE"
    #Finding all the headings for each specific Model
    maintitle = s.find(id='puffBreadCrumbs')
    print maintitle.get_text()

    #Find entire HTML container holding all data, rendered by AJAX
    datas = s.find(id='accordion')

    #Find all 'a' tags inside data container
    a = datas.findAll('a')

    #Find all 'span' tags inside data container
    content = datas.findAll('span')

    print "FETCHING CATEGORY" 

    #Find all 'a' tags which have an attribute of 'onclick' Error:(doesn't display anything, can't seem to find
    #'onclick' attr
    if(hasattr(a, 'onclick')):
        arguments = literal_eval('(' + a['onclick'].replace(', this', '').split('(', 1)[1])
        model_info.append(arguments)
        print arguments #arguments[1] + " " + arguments[3] + " " + arguments[4] 

    print "FETCHING DATA"
    for complete in content:
        #Find all 'class' attributes inside 'span' tags
        if(complete.has_attr('class')):
            model_info.append(complete['class'])

            print complete.get_text()

    #Find all 'table data cells' inside table held in data container       
    print "FETCHING IMAGES"
    img = s.find('td')

    #Find all 'img' tags held inside these 'td' cells and print out
    images = img.findAll('img')
    print images 
```

我在问题所在的地方添加了一个错误行...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T13:01:30.323

类似于 Martijn 的答案，但原始使用`pyparsing`（即，可以对其进行改进以识别函数并仅采用带括号的引用字符串）：

```
from bs4 import BeautifulSoup
from pyparsing import QuotedString
from itertools import chain

s = '''<a href="#Bracket" onclick="getProductsBasedOnCategoryID('Asus','Bracket','ET10B','7138', this, 'E Series')">Bracket</a>'''
soup = BeautifulSoup(s)
for a in soup('a', onclick=True):
    print list(chain.from_iterable(QuotedString("'", unquoteResults=True).searchString(a['onclick'])))
# ['Asus', 'Bracket', 'ET10B', '7138', 'E Series'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T12:49:08.817

如果您从中删除部分，则可以将其解析为 Python 文字，并且[只](http://docs.python.org/2/library/ast.html#ast.literal_eval)`this,`取括号之间的所有内容：

```
from ast import literal_eval

if data.has_attr('onclick'):
    arguments = literal_eval('(' + data['onclick'].replace(', this', '').split('(', 1)[1])
    model_info.append(arguments)
    print arguments 
```

我们删除了该`this`参数，因为它不是有效的 Python 字符串文字，而且您无论如何都不想拥有它。

演示：

```
>>> literal_eval('(' + "getProductsBasedOnCategoryID('Asus','Bracket','ET10B','7138', this, 'E Series')".replace(', this', '').split('(', 1)[1])
('Asus', 'Bracket', 'ET10B', '7138', 'E Series') 
```

现在你有了一个 Python 元组，可以选择你喜欢的任何值。

您需要索引 1、2 和 4 处的值，例如：

```
nCategoryID, nModelID, family = arguments[1], arguments[3], arguments[4] 
```

# telerik - 报告参数始终使用设计时值

> ID：16147372
> 
> 赞同：0
> 
> 时间：2013-04-22T12:40:45.573
> 
> 标签：telerik, telerik-reporting

如何让报告在首次运行时使用设计时设置值，然后使用用户输入的任何内容进行后续“刷新”？

我正在使用 .Net 4 和 Telerik Q1 2013 Reporting 控件。

我创建了一个包含 StartDate 和 EndDate 参数的报告，该参数被传递给 SQL 查询并返回相关数据。

为了让用户更轻松地打开和运行报表，StartDate 和 EndDate 有一个默认值，分别设置为当月的第一天和最后一天。

这很好用。但是，如果用户在加载报告后更改了这些值，并尝试运行报告，例如上个月的第一天到最后一天，则查询不会使用用户输入的值。相反，它总是使用表达式作为默认值。

我设置默认值的方式是打开ReportParameter Collection Editor（在报表中右击，点击Report Parameters），设置参数的Value属性。

开始日期设置为：

```
=StartOfCurrentMonth() 
```

EndDate 设置为

```
=EndOfCurrentMonth() 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T20:37:03.717

斯蒂芬，

您在这里概述的内容对我有用，您可能没有运行服务包吗？我将 ReportParameter Collection 编辑器中的 Value 属性设置为 StartDate 和 EndDate 为：

```
 ='3/1/2013' 
```

报告的预览会立即使用默认值运行。我能够更改值并很好地预览报告。

我创建了一个创建报表实例的 Windows 窗体应用程序。当报表第一次呈现时，它会使用默认值呈现，我还可以作为最终用户更改 ReportViewer 中的值并重新呈现报表而不会出现任何问题。

```
 TopPageViews report = new TopPageViews();

        InstanceReportSource reportSource = new InstanceReportSource();
        reportSource.ReportDocument = report;

        this.reportViewer1.ReportSource = reportSource;
        this.reportViewer1.RefreshReport(); 
```

# c++ - 如何在 Qt 中检查插入的 SD 卡是否被写保护？

> ID：16147376
> 
> 赞同：0
> 
> 时间：2013-04-22T12:40:58.903
> 
> 标签：c++, qt, qt4, read-write

嗨朋友们我正在开发一个应用程序，我应该检查 SD 卡的文件系统，还需要检查插入的 SD 卡是否写保护。我成功获取了文件系统详细信息，如下所示：

```
TCHAR volumeName[MAX_PATH + 1] = { 0 };
TCHAR fileSystemName[MAX_PATH + 1] = { 0 };
DWORD serialNumber = 0;
DWORD maxComponentLen = 0;
DWORD fileSystemFlags = 0;

LPCWSTR path = deviceData->m_strPath.utf16(); // deviceData gives me the path of the SD Card

// Get the file system details
if (GetVolumeInformation(
                         path,
                         volumeName,
                         ARRAYSIZE(volumeName),
                         &serialNumber,
                         &maxComponentLen,
                         &fileSystemFlags,
                         fileSystemName,
                         ARRAYSIZE(fileSystemName)))
            {
                newData.strFileSystem = QString::fromUtf16(fileSystemName);                
            }

 m_SDInfoList.append(newData); // m_SDInfoList is QList 
```

通过这种方法，我可以知道文件系统是 FAT32 还是 NTFS。现在我想实现写保护的细节。他们的 Qt API 是否可以给插入的 SD 卡是否写保护？请帮忙 ：）

**更新：**

这就是我使用 QFileInfo 所做的：

```
QFileInfo fileInfo(deviceData->m_strPath);                    

if(!fileInfo.isWritable())
{                        
       newData.strStatus = "WriteProtect Enabled";
}
else
{
       newData.strStatus = "WriteProtect Disabled";
} 
```

即使我设置了写保护权限，它总是最终给我 WriteProtect Disable 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T06:03:04.023

我怀疑你不能用 Qt 做到这一点。您需要为每个目标平台添加自定义代码。

但是，您可以简单地尝试创建一个空文件，然后立即将其删除。如果创建文件失败，则该卷可能是只读的（或者它已用完可用空间，您需要检查错误代码以确定）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-29T23:12:53.357

不确定如何在 QT 中执行此操作，但 WinAPI 为您提供了 GetVolumeInformation ( [http://pinvoke.net/default.aspx/kernel32/GetVolumeInformation.html](http://pinvoke.net/default.aspx/kernel32/GetVolumeInformation.html) ) 方法（允许您检查天气驱动器是否写保护），返回以下标志：

```
/// <summary>
/// The specified volume is read-only.
/// </summary>
ReadOnlyVolume = 0x80000, 
```

# c - 标准输入上的 Select() 阻塞，不会超时

> ID：16147380
> 
> 赞同：5
> 
> 时间：2013-04-22T12:41:11.003
> 
> 标签：c, networking, nonblocking

我正在编写一个程序，它接收 UDP 消息并从用户那里获取输入，但是我的 STDIN 仍然被 select 阻塞。当我 FD_CLR 选择程序之前的 stdin fd 运行良好时，表明 stdin 套接字始终准备好从中读取数据。我尝试引入 timeval tv 以将其超时，但这似乎也不起作用。我应该在某处关闭套接字还是在我不在的地方调用 FD_CLR？最终结果应该是一个非阻塞的 STDIN，但目前它是阻塞的。谢谢你

```
int
wait_for_input(){
            fd_set fds;
            int maxfd, sd, err, n;
            struct sockaddr_in addr;
            char stdbuf[BUFLEN];
            unsigned char udpbuf[BUFLEN];

            //memset(stdbuf,0x0,sizeof(stdbuf));
            memset(stdbuf,0x0,sizeof(udpbuf));

            sd = socket(AF_INET, SOCK_DGRAM, 0);

            if(sd<0) {
            printf("Failed to Open UDP socket");
            }

            addr.sin_family = AF_INET;
            addr.sin_addr.s_addr = htonl(INADDR_ANY);
            addr.sin_port = htons(host_list[0]->port);
            err = bind(sd,(struct sockaddr *) &addr,sizeof(addr));

            if(err < 0){
                            printf("ERROR: Cant bind port");

            }

                            struct timeval tv;
            while(1){
                            FD_ZERO(&fds);
                            FD_SET(STDIN_FILENO,&fds);
                            FD_SET(sd,&fds);
                            tv.tv_sec = 1;
                            tv.tv_usec = 0;
                            fflush(stdout);
                            select(sd+1,&fds,NULL,NULL,&tv);

                            // If a UDP message arrives
                            if(FD_ISSET(sd,&fds)){
                                            n = recv(sd,udpbuf,sizeof(udpbuf),0);
                                            unpack(udpbuf);
                                            recompute_my_dv();
                                            fflush(stdout);

                             }
                            //If console data is entered.
                                if(FD_ISSET(STDIN_FILENO, &fds)){
                                            fgets(stdbuf,sizeof(stdbuf),stdin);
                                            parse(stdbuf);
                                            printf("server> ");
                                            fflush(stdout);
                                            FD_CLR(STDIN_FILENO,&fds);

                             }

                     }

 return 0;
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-10T14:01:12.153

如果您在该套接字的缓冲区上有消息，FD_ISSET 不会返回 1（或 true），如果给定的文件描述符是文件描述符集的一部分，它会返回 true。这是一个问题。

接下来是您的循环应该开始（即 while 循环）应该在 select 语句之前开始并循环返回。您应该捕获选择返回的值。这是因为 select 返回您在 select 的参数 2 中指定的缓冲区中有多少位（读取、写入或错误）。因此，如果您将 read 指定为缓冲区，您将需要读取 select 返回了多少位。

我认为这是两个主要问题。希望这可以帮助。

# r - 如何使用给定类的方法查找所有函数

> ID：16147382
> 
> 赞同：4
> 
> 时间：2013-04-22T12:41:22.137
> 
> 标签：r

我基本上在寻找相反的`methods(some_function)`，它返回该函数存在的所有类方法。是否有一些简单的方法可以搜索对`method`给定对象类具有显式的所有函数？
例如，`methods(my_func)`返回一堆`myfunc.classname`值。是否有一个方法`functions(my_class)`可以返回所有函数`func.my_class`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-22T13:05:39.513

我认为您想为in提供一个论点`class`而没有提供任何内容。相比`generic.function``methods`

```
methods(as.matrix) 
[1] as.matrix.data.frame              as.matrix.data.table*             as.matrix.default                
[4] as.matrix.dist*                   as.matrix.noquote                 as.matrix.POSIXlt                
[7] as.matrix.raster*                 as.matrix.SpatialGridDataFrame*   as.matrix.SpatialPixelsDataFrame* 
```

有了这个，它返回泛型类的方法

```
methods(class="matrix")
 [1] anyDuplicated.matrix  as.data.frame.matrix  as.data.table.matrix* as.raster.matrix*     boxplot.matrix        corresp.matrix*      
 [7] determinant.matrix    duplicated.matrix     edit.matrix*          head.matrix           isSymmetric.matrix    lda.matrix*          
[13] qda.matrix*           relist.matrix*        subset.matrix         summary.matrix        tail.matrix           unique.matrix        

   Non-visible functions are asterisked 
```

这似乎也适用于 S4 课程，例如

```
methods(class="data.table")
 [1] $<-.data.table*           [.data.table*             [<-.data.table*           all.equal.data.table*     as.data.frame.data.table*
 [6] as.data.table.data.table* as.list.data.table*       as.matrix.data.table*     dim.data.table*           dimnames.data.table*     
[11] dimnames<-.data.table*    duplicated.data.table*    format.data.table*        head.data.table*          is.na.data.table*        
[16] merge.data.table*         na.omit.data.table*       names<-.data.table*       Ops.data.table*           print.data.table*        
[21] subset.data.table*        tail.data.table*          transform.data.table*     unique.data.table*        within.data.table* 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T13:05:25.900

我认为您正在描述自省和反射的概念（在 Java 中众所周知）。

一篇关于 Java 中的自省和反射的帖子，这里有链接：[Java 内省和反射](https://stackoverflow.com/questions/2044446/java-introspection-and-reflection)

我不知道您使用的是哪种技术或语言，但也许您会找到等价的。

希望这可以帮助 ！再见 ！

# actionscript-3 - 上一个函数被调用/事件侦听器“延迟”一个

> ID：16147389
> 
> 赞同：0
> 
> 时间：2013-04-22T12:41:44.790
> 
> 标签：actionscript-3

我已经更改了下载的图像轮播，当我单击添加的两个按钮之一时旋转到下一张图片（左或右）。原始轮播被构建为根据鼠标移动/位置旋转。

出于某种原因，每当我单击“右”或“左”按钮时，每个按钮都会沿各自的方向旋转轮播，**事件侦听器/处理程序就在“后面”。它会做我上次单击按钮时应该做的任何事情。**更清楚地说，第一个按钮单击它什么都不做。第二个按钮单击它响应我上次单击的内容。

例子：

*   我单击左侧按钮，没有任何反应。
*   然后我点击右键，轮播向左旋转（因为我在这次点击之前点击了左键）
*   然后我点击左键，轮播向右旋转（同上）。

请参阅下面的代码。看起来很简单；没有复杂的结构什么的。

我想你可以忽略大多数变量和定位（如`focalLength`, `vanishingPointX`, `radius`, 等）。我猜这个错误要么与 XML 的导入/处理、`for()`循环或 .as 文件的结构有关。

```
package  {
        //here are all the imports 

        public class Imagereel extends Sprite {
            var imgurl:URLRequest = new URLRequest()
            var loadedimgs:uint = 0;
            var images_num = 0;
            var imageHolders:Array = new Array();
            var imageHolder:MovieClip;
            var btnLeft:BtnLeft = new BtnLeft;
            var btnRight:BtnRight = new BtnRight;

        //Set the focal length
        var focalLength:Number = 2000;

        //Set the vanishing point
        var vanishingPointX:Number = stage.stageWidth / 2;
        var vanishingPointY:Number = stage.stageHeight / 2;

        //The 3D floor for the images
        var floor:Number = 40;

        //Radius of the circle
        var radius:Number = 350;

        //We use 70x70 sized images (change this if different for your images)
        const IMAGE_WIDTH:uint = 393;
        const IMAGE_HEIGHT:uint = 249;

        var xmlLoader:URLLoader = new URLLoader();
        var xmlData:XML = new XML();        

        public function Imagereel() {
            //here's the positioning of the buttons
            //here are the button addChilds

            xmlLoader.load(new URLRequest("carousel.xml"));
            xmlLoader.addEventListener(Event.COMPLETE, LoadXML);
            btnLeft.addEventListener(MouseEvent.CLICK, prevImg);
            btnRight.addEventListener(MouseEvent.CLICK, nextImg);

        }
        function LoadXML(e:Event):void {
            xmlData = new XML(e.target.data);
            Parseimage(xmlData);
        }
        function Parseimage(imageinput:XML):void {
            var imageurl:XMLList = imageinput.image.iurl;

            images_num = imageurl.length();
            for (var i:int = 0; i < images_num; i++) {
                var urlElement:XML = imageurl[i];

                imageHolder = new MovieClip();
                var imageLoader = new Loader();
                imageHolder.addChild(imageLoader);
                imageHolder.mouseChildren = false;
                imageLoader.x = - (IMAGE_WIDTH);
                imageLoader.y = - (IMAGE_HEIGHT);
                imageHolders.push(imageHolder);
                imgurl.url = imageurl[i];
                imageLoader.load(imgurl);
                imageLoader.contentLoaderInfo.addEventListener(Event.COMPLETE, imageLoaded);
            }
        }
        function imageLoaded(e:Event) {
            //Update the number of loaded images
            loadedimgs++;

            //Check to see if this is the last image loaded
            if (loadedimgs == images_num) {
                //Set up the carousel
                initializeCarousel();
            }
        }
        function initializeCarousel() {
            //Calculate the angle difference between the images (in radians)
            var angleDifference:Number = Math.PI * (360 / images_num) / 180;

            //Loop through the images
            for (var i:uint = 0; i < imageHolders.length; i++) {
                //Assign the imageHolder to a local variable
                var imageHolder:MovieClip = (MovieClip)(imageHolders[i]);

                //Get the angle for the image (we space the images evenly)
                var startingAngle:Number = angleDifference * i -0.30;

                //Position the imageHolder
                imageHolder.xpos3D = radius * Math.cos(startingAngle);
                imageHolder.zpos3D = radius * Math.sin(startingAngle);
                imageHolder.ypos3D = floor;

                //Set a "currentAngle" attribute for the imageHolder
                imageHolder.currentAngle = startingAngle;
                var scaleRatio = focalLength/(focalLength + imageHolder.zpos3D);

                //Position the imageHolder to the stage (from 3D to 2D coordinates)
                imageHolder.x = vanishingPointX + imageHolder.xpos3D * scaleRatio;
                imageHolder.y = vanishingPointY + imageHolder.ypos3D * scaleRatio;

                //Add the imageHolder to the stage
                addChild(imageHolder);
            }
            sortZ();
        }

        function prevImg(e:MouseEvent) {
            //Loop through the images
            for (var i:uint = 0; i < imageHolders.length; i++) {
                var imageHolder:MovieClip = (MovieClip)(imageHolders[i]);
                //Set a new 3D position for the imageHolder
                imageHolder.xpos3D = radius * Math.cos(imageHolder.currentAngle);
                imageHolder.zpos3D = radius * Math.sin(imageHolder.currentAngle);
                var scaleRatio;

                //Calculate a scale ratio
                scaleRatio = focalLength/(focalLength + imageHolder.zpos3D);

                //Update the imageHolder's coordinates
                imageHolder.x = vanishingPointX+imageHolder.xpos3D * scaleRatio;
                imageHolder.y = vanishingPointY+imageHolder.ypos3D * scaleRatio;

                //spinning the carousel
                imageHolder.currentAngle += 0.6285;
            }   
            //Call the function that sorts the images so they overlap each others correctly
            sortZ();
        }
        function nextImg(e:MouseEvent) {
            //Loop through the images
            for (var i:uint = 0; i < imageHolders.length; i++) {
                var imageHolder:MovieClip = (MovieClip)(imageHolders[i]);
                //Set a new 3D position for the imageHolder
                imageHolder.xpos3D = radius * Math.cos(imageHolder.currentAngle);
                imageHolder.zpos3D = radius * Math.sin(imageHolder.currentAngle);
                var scaleRatio;

                //Update the imageHolder's coordinates
                imageHolder.x = vanishingPointX+imageHolder.xpos3D * scaleRatio;
                imageHolder.y = vanishingPointY+imageHolder.ypos3D * scaleRatio;

                //spinning the carousel
                imageHolder.currentAngle -= 0.6285;
            }
            sortZ();
        }
        //This function sorts the images so they overlap each others correctly
        function sortZ():void {
            imageHolders.sortOn("zpos3D", Array.NUMERIC | Array.DESCENDING);

            //Set new child indexes for the images
            for (var i:uint = 0; i < imageHolders.length; i++) {
                setChildIndex(imageHolders[i], i);
            }
        }
    }
} 
```

那么这段代码做了什么：

1.  `carousel.xml`是进口的
2.  处理 xml，以便将那里的图像路径转换为显示的图像
3.  轮播由图像组成
4.  sortZ() 函数确保图像在 3D 透视图中正确对齐；就像`z-index`在 CSS 中一样。
5.  单击`btnLeft`或`btnRight`时，轮播向左或向右旋转（这是通过更新 的值来完成的`imageHolder.currentAngle`）。

当我将`trace`' 放在 prevImg() 和 nextImg() 函数中时，我确实看到了属于正确函数的跟踪，而不是之前单击的跟踪。所以看起来Flash*确实*调用了正确的事件。

那么我该如何摆脱这个错误呢？非常感谢帮助和提示！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T13:36:29.413

`imageHolder.currentAngle`在更改 imageHolder 的 3D 位置的代码之前移动分配（更改它的行）。

```
for (var i:uint = 0; i < imageHolders.length; i++) {
            var imageHolder:MovieClip = (MovieClip)(imageHolders[i]);
            //Set a new 3D position for the imageHolder
            imageHolder.currentAngle += 0.6285; // <== HERE
            imageHolder.xpos3D = radius * Math.cos(imageHolder.currentAngle);
            imageHolder.zpos3D = radius * Math.sin(imageHolder.currentAngle);
            var scaleRatio;

            //Calculate a scale ratio
            scaleRatio = focalLength/(focalLength + imageHolder.zpos3D);

            //Update the imageHolder's coordinates
            imageHolder.x = vanishingPointX+imageHolder.xpos3D * scaleRatio;
            imageHolder.y = vanishingPointY+imageHolder.ypos3D * scaleRatio;

            //spinning the carousel
        } 
```

其他功能也一样。

# c# - Web 服务仅对某些 url 需要 SSL？

> ID：16147390
> 
> 赞同：0
> 
> 时间：2013-04-22T12:41:45.660
> 
> 标签：c#, asp.net, wcf-rest

是否可以在某些 url 上设置 web 服务需要 ssl 而在其他网址上不需要？该服务作为一个整体提供 1 个功能，但与 2 个不同的客户端对话。如有必要，我可以将其拆分为 2 个不同的服务，但我想知道这是否可能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T13:03:08.830

在 IIS（我使用的是版本 7）中，您的站点有一个名为 SSL 设置的选项，其中确保未选中“要求 SSL”复选框。这不会在服务上强制使用 SSL。

但是，这不会阻止您需要 SSL 的客户端使用非 SSL 链接，它基本上允许您在使用和不使用 SSL 的情况下访问服务。

# java - 如何使用相关子对象创建多个游戏对象

> ID：16147399
> 
> 赞同：1
> 
> 时间：2013-04-22T12:42:08.793
> 
> 标签：java, class, hierarchy

我正在制作一个非常简单的 2d 游戏。我有一个行星类，游戏使用数组创建多个行星。我的问题是我希望每个行星都有多个卫星，并且卫星的位置/行为与其特定母行星中包含的变量有关。

构建类和实例化对象的最佳方法是什么，以便轻松引用哪些卫星与哪些行星相关，并且这些卫星可以在游戏期间轻松引用其行星的变量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T13:16:03.390

您可以将您的卫星设置为母行星的[观察者](http://en.wikipedia.org/wiki/Observer_pattern)，并让母行星发布卫星订阅的事件。这是一个代码草图（警告：不是完全可运行的代码）：

```
import java.util.Observable;          //Observable is here

public class Planet extends Observable implements Runnable {
    public void run() {
        try {
            while (true) {
                //do planet stuff
                setChanged();
                notifyObservers(response);
            }
        }
        catch (IOException e) {
            e.printStackTrace();
        }
    }
}

import java.util.Observable;
import java.util.Observer;  /* this is Event Handler */

public class Moon implements Observer {
    //setup moon instance
    public void update(Observable obj, Object arg) {
       //udate moon params
    }
}

//
public class GameApp {
    public static void main(String[] args) {
        //configure game board...

        final Planet earth = new Planet();
        final Planet saturn = new Planet();

        // create an observer
        final Moon moon = new Moon();

        final Moon tethys = new Moon();
        final Moon titan = new Moon();

        // subscribe the observer to the event source
        earth.addObserver(moon);

        saturn.addObserver(tethys);
        saturn.addObserver(titan);

        // fire up the game ... 
    }
} 
```

# event-handling - 从代码中触发 Maximo 工作流事件

> ID：16147400
> 
> 赞同：1
> 
> 时间：2013-04-22T12:42:09.037
> 
> 标签：event-handling, workflow, wait, maximo

在我们的 Maximo 工作流程中，我们有一些模式，其中工作订单到达条件节点并检查开始日期。如果当前日期小于它的开始日期，则工作订单将转到具有“maximo.workorder.update”条件的等待节点。因此，当 WO 的预定日期到来时，人们需要去 WO 跟踪并手动保存此 WO。只有这样它才能继续通过工作流程。否则，WO 将一直坐在那个等待节点上，直到时间结束。

我想要做的是每天通过 crontask 触发这个更新事件，这样当正确的日期到来时，WO 会自行唤醒。

我检查了 WO 跟踪应用程序中保存按钮的源代码，发现无论有什么 MboRemoteSet.save() 方法调用。我假设您需要完成一些更改，然后在正确的 MboSet 上调用 save()。我还知道在 DB 中有一个名为 EVENTRESPONSE 的表，它跟踪工作流中等待节点上的 WO。我的 crontask 类包含以下代码：

```
MXServer mxServer = MXServer.getMXServer();
UserInfo userInfo = mxServer.getUserInfo("maxadmin");
woSet = mxServer.getMboSet("WORKORDER", userInfo);
...
String query = "select sourceid as WORKORDERID from EVENTRESPONSE"
                + " where eventname = 'maximo.workorder.update'"
                + " and sourcetable = 'WORKORDER'";
SqlFormat sqf = new SqlFormat("workorderid IN (" + query + ")");
woSet.setWhere(sqf.format());
MboRemote wo;
Date currentDate = new Date();
for (int i = 0; (wo = woSet.getMbo(i)) != null; i++) {
    System.err.println(wo.getString("description"));
    wo.setValue("CHANGEDATE", currentDate);
}
woSet.save(); 
```

workorder.changedate 成功刷新，但“maximo.workorder.update”事件没有触发，WO 停留在等待节点上。

**那么，我应该如何触发 maximo.workorder.update 呢？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-23T14:57:03.627

我理解，这个回复晚了一年，但它可能对其他人有所帮助。

可以使用“升级”来识别所有有时间到来的工作订单，并使用升级操作来更新工作订单上的某些内容。这将导致 Maximo 保存更改，从而触发工作流的等待节点，无需任何代码，只需配置。

我过去做过类似的事情，通常我最终会翻转我为此目的创建的 YORN 字段。

# php - 我不能将一些值从 html 复选框数组传递到我的 php 页面？

> ID：16147401
> 
> 赞同：0
> 
> 时间：2013-04-22T12:42:10.580
> 
> 标签：php, javascript, html, mysql

我创建了使用 HTML+PHP+SQL+JS 的产品管理系统。但是它有一个问题，一些值无法传递给 php 页面以进行 SQL 查询。我在我的代码中找不到任何错误，因为有些数据可以做到这一点一般。我的系统使用复选框数组来选择我想用它们做的每个产品

```
echo "<td><input type=\"checkbox\" name=\"ProductKey[]\" value=\"".$Key."\"/></td>"; 
```

并像这样通过javascript将它们传递给任何目标

```
<input type='button' id='edit' onclick="OnButtonEdit();" class = "btn btn-success" value='add'></br></br>
<input type='button' id='delete' onclick="OnButtonDelete();" class = "btn btn-warning" value='subtract'></br></br>
<input type='button' id='delete' onclick="OnButtonRemove();" class = "btn btn-danger" value='remove'></br></br>
<input type='button' id='delete' onclick="OnButtonProductbackquery();" class = "btn btn-info" value='pass back to homestock'></br> 
```

在接收值到 sql 查询的 php 页面中

```
foreach ($_POST['ProductKey'] as $Key){
....
} 
```

可以通过的示例数据

```
ProductKey | Size | Colour | Price | Cost | Quantity | Customer | ProductKey | AccountKey
DK9973 | 42 | Black | 550 | 280 |1 | ram35 | 57872 | 128 
```

无法通过的示例数据

```
ProductKey | Size | Colour | Price | Cost | Quantity | Customer | ProductKey | AccountKey
A056 | 40 | Brown | 350 | 220 |1 | ram35 | 58784 | 133 
```

一些javascript按钮功能

```
 function OnButtonDelete() {
    document.myform.action = "delete.php";
    document.myform.target = "_self";
    document.myform.submit();
    return true;  
  } 
```

感谢所有回答，如果您想要更多代码，请告诉我:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T12:46:20.283

如果您的复选框没有被选中，它将不会存在于接收 post 数据的 php 页面中。

只需测试：

```
if(isset($_POST['ProductKey'])){
  //Checkbox checked
} else {
  //Checkbox not checked
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T02:57:38.977

现在，我解决了！！它应该是一种形式的最大 html 复选框。我试图使从 ProductID 查询的搜索输入使一种形式的复选框数量减少，但现在它适用于所有产品。

我不确定这个解决方案，但它的工作。

# java - 使用 Java 将内部类设为静态有什么好处？

> ID：16147405
> 
> 赞同：32
> 
> 时间：2013-04-22T12:42:29.600
> 
> 标签：java, class, findbugs

我的 Java 类中有一个内部类。

![在此处输入图像描述](https://i.stack.imgur.com/mpSuW.png)

当我运行[find bugs](http://findbugs.sourceforge.net)时，它建议（警告）将其设为静态。

![在此处输入图像描述](https://i.stack.imgur.com/gB3Mx.png)

这个警告有什么意义？将内部类设为静态有什么好处？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-04-22T12:45:11.793

如果嵌套类不访问封闭类的任何变量，则可以将其设为静态。这样做的好处是您不需要外部类的封闭实例来使用嵌套类。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-04-22T12:45:56.407

默认情况下，内部类具有对外部类对象的隐式引用。如果您从外部类的代码中实例化 this 的对象，这一切都为您完成。如果您不这样做，您需要自己提供对象。

静态内部类没有这个。

这意味着它可以在外部类对象的范围之外实例化。这也意味着如果你“导出”内部类的一个实例，它不会阻止当前对象被收集。

作为基本规则，如果内部类没有理由访问外部类，则默认情况下应将其设为静态。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-04-23T16:53:45.230

静态内部类在语义上更简单。它就像一个顶级课程，只是您有更多的可见性选项（例如，您可以将其设为私有）。

避免非静态内部类的一个重要原因是它们更复杂。有对外部类的隐藏引用（甚至可能不止一个）。内部类的方法中的简单名称现在可能是以下三种情况之一：本地、字段或外部类的字段。

这种复杂性的一个产物是对外部类的隐藏引用可能导致内存泄漏。假设内部类是一个侦听器，并且可能是一个静态内部类。只要注册了侦听器，它就会持有对外部类实例的引用，这反过来又会占用大量内存。将侦听器设为静态可能允许对外部实例进行垃圾收集。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-04-22T12:45:34.313

非静态内部类具有对外部类的隐式引用。如果将类设为静态，则可以节省一些内存和代码。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-06-27T12:39:34.990

**静态内部类**的好处：

1.  静态内部类的实例化不依赖于外部类的引导，以及实例化的内存开销。
2.  静态内部类不持有外部类引导，不影响外部类的集合，避免扩展外部类在内存中的存活时间导致内存泄漏。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-12-07T00:13:36.790

我们已经有了很好的答案，这是我的 5 美分：

当我们需要分离逻辑功能但使用外部类的方法和变量时，使用静态和非静态内部类。两个内部类都可以访问外部类的私有变量。

静态内部类的优点：1）静态类可以访问外部类的静态变量 2）静态类可以被视为一个独立的类

非静态内部类：1）不能使用外部类的静态成员 2）不能像独立类一样对待

```
public class NestedClassDemo {
    private int a = 100;
    int b = 200;
    private static int c = 500;

    public NestedClassDemo() {
        TestInnerStatic teststat = new TestInnerStatic();
        System.out.println("const of NestedClassDemo, a is:"+a+", b is:"+b+".."+teststat.teststat_a);
    }

    public String getTask1(){
        return new TestInnerClass().getTask1();
    }

    public String getTask2(){
        return getTask1();
    }

    class TestInnerClass{
        int test_a = 10;

        TestInnerClass() {
            System.out.println("const of testinner private member of outerlcass"+a+"..."+c);
        }
        String getTask1(){
            return "task1 from inner:"+test_a+","+a;
        }
    }

    static class TestInnerStatic{
        int teststat_a = 20;

        public TestInnerStatic() {
            System.out.println("const of testinnerstat:"+teststat_a+" member of outer:"+c);
        }

        String getTask1stat(){
            return "task1 from inner stat:"+teststat_a+","+c;
        }
    }

    public static void main(String[] args){
        TestInnerStatic teststat = new TestInnerStatic();
        System.out.println(teststat.teststat_a);
        NestedClassDemo nestdemo = new NestedClassDemo();
        System.out.println(nestdemo.getTask1()+"...."+nestdemo.getTask2());
    }
} 
```

从外部访问静态内部和非静态内部类：

```
public class TestClass {
    public static void main(String[] args){
        NestedClassDemo.TestInnerClass a = new NestedClassDemo().new TestInnerClass();
        NestedClassDemo.TestInnerStatic b = new NestedClassDemo.TestInnerStatic();
    }
} 
```

静态内部类的官方 java 文档可以在[https://docs.oracle.com/javase/tutorial/java/javaOO/nested.html找到](https://docs.oracle.com/javase/tutorial/java/javaOO/nested.html)

# php - 我应该在这里使用哪个 SQL 连接？

> ID：16147407
> 
> 赞同：3
> 
> 时间：2013-04-22T12:42:49.523
> 
> 标签：php, sql, join

我有 2 个 SQL 表，一个用于用户表，一个用于有关用户的所有信息。（年龄、性别等）

用户表：

```
id, username, mail, etc 
```

第二张桌子

```
id, user_id, type_id, content 
```

用户表内容：

```
1, knife, knife@something.com, etc ... 
```

第二张表：

```
1, 1, 38 (age)
1, 3, Male 
```

我想获取年龄在 20-40 岁之间且为男性的用户。我现在在这里：

```
SELECT 
        *
FROM 
        felhasznalok_kieg_adat
        JOIN felhasznalok
                ON felhasznalok_kieg_adat.user_id = felhasznalok.id
WHERE 
   felhasznalok_kieg_adat.kieg_id = "22" 
   and felhasznalok_kieg_adat.tartalom < 21 
   and felhasznalok_kieg_adat.tartalom < 40 
```

它向我显示了 21 到 40 岁之间的结果，但我该如何添加男性或女性的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T12:48:14.680

您必须为年龄过滤器加入一次，为性别过滤器加入第二次。

```
SELECT User.*
FROM User
    JOIN UserContent ageFilter
        ON ageFilter.user_id = User.id
        AND ageFilter.type_id = 1  -- use type_id for joining
    JOIN UserContent genderFilter
        ON genderFilter.user_id = User.id
        AND genderFilter.type_id = 3
WHERE (ageFilter.content < 21 AND ageFilter.content < 40) -- what type is content? You have to make some sort of conversion here!
AND (genderFilter.content = 'Male') 
```

我已用您在问题中描述的内容替换了表和列的名称。
在连接中添加`type_id`，这样它变得更加可读。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T12:44:30.267

```
SELECT *
  FROM felhasznalok_kieg_adat
  JOIN felhasznalok ON felhasznalok_kieg_adat.user_id = felhasznalok.id
 WHERE ((felhasznalok_kieg_adat.kieg_id = "22" 
        AND felhasznalok_kieg_adat.tartalom < 21 
        AND felhasznalok_kieg_adat.tartalom < 40))
   AND felhasznalok_kieg_adat.gender = 'male' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T12:47:07.540

选择一些值，例如男性的“M”和女性的“F”。然后：

```
ALTER TABLE felhasznalok_kieg_adat ADD COLUMN sex CHAR(1); 
```

您只选择男性将如下所示：

```
SELECT *
FROM felhasznalok_kieg_adat
JOIN felhasznalok
ON felhasznalok_kieg_adat.user_id = felhasznalok.id
WHERE ((felhasznalok_kieg_adat.kieg_id = "22" and felhasznalok_kieg_adat.tartalom < 21 and felhasznalok_kieg_adat.tartalom < 40)) and (sex = 'M') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T12:52:15.093

**如果可能，如果您没有性别列，则必须将其添加到表中**

您可以在连接中使用[BETWEEN](http://www.w3schools.com/sql/sql_between.asp) 而不是 > 和 < 并且您可以将表格连接为

```
SELECT *
FROM table1
JOIN table2
ON table1.user_id = table2.id
WHERE ((table1.kieg_id = "22" and table1.tartalom BETWEEN 21 AND 22))

AND table1.gender = 'male' 
```

# c# - 同时从两个串口读取

> ID：16147409
> 
> 赞同：2
> 
> 时间：2013-04-22T12:42:53.687
> 
> 标签：c#, serial-port

我有一个同时从两个串行端口读取的 C# 程序。串口设备是 Prolific USD 到 4 串口适配器，我将两个硬件插入适配器的不同端口。问题是当我一次从每个端口读取一个时，一切正常，但是当我尝试同时从两个端口读取时，其中一个端口没有响应。为了解决这个问题，我启动了两个应用程序实例，并且能够一次从两个端口读取数据（每个应用程序实例一个）。有谁知道如何在一个应用程序中同时读取两个单独的串行端口？谢谢你。

添加一些代码：

**端口 1：**

// 开始或停止从端口 1 读取的按钮。由于硬件要求我在读取响应之前对其进行写入，因此写入是在计时器中完成的

```
 private void buttonPort1_Click(object sender, EventArgs e)
    {
        if (buttonPort1.Text == "Start Recording")
        {
            if (!port1.IsOpen)
            {
                port1.Open();
            }
            timerPort1.Start();                
            buttonPort1.Text = "Stop Recording";
        }
        else
        {
            timerPort1.Stop();
            buttonPort1.Text = "Start Recording";
        }
    } 
```

// 每次将“D”写入硬件以接收响应

```
 private void timerPort1_Tick(object sender, EventArgs e)
    {               
            port1.Write("D");
    }

void port1_DataReceived(object sender, SerialDataReceivedEventArgs e)
    {
        try
        {
            string result = port1.ReadLine();
            oneParamDelegate dg = PHandCondResult;  // send back the result to the main thread
            this.Invoke(dg, result);
        }
        catch
        {
        }

    } 
```

**端口 2**

第二个端口的代码实际上与上面的代码相似，不同之处在于端口、数据接收事件和计时器不同。

我将尝试 Grant Thomas 建议的多线程选项：我之前没有尝试过，因为我认为串行端口已经在单独的线程上工作：datareceived 事件不会阻塞主线程并且您无法访问创建的控件在主线程上，但我仍然会使用后台工作人员试一试，稍后再恢复。谢谢大家的快速回复。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T12:45:14.467

你需要做一些阅读，特别是关于[Threading](http://msdn.microsoft.com/en-gb/library/ms173178%28v=vs.80%29.aspx)。

如果你有一些看起来像这样的代码：

```
ReadDataFromSomePort();
ReadDataFromSomeOtherPort(); 
```

然后第一个将同步执行（阻塞），*然后*是后者。这发生在同一个线程上，即主应用程序线程。当你想做异步的事情时，包括在保持 UI 交互/响应的同时只做一件事，那么你需要将工作委派给其他线程。

所以，你最终会得到这样的结果：

```
var thread1 = new Thread(ReadDataFromSomePort);
var thread2 = new Thread(ReadDataFromSomeOtherPort);

thread1.Start();
thread2.Start(); 
```

放心，除此之外还有更多内容，所以我建议在继续之前对这个概念进行一些研究。

MSDN 有一个[关于线程的教程/编程参考](http://msdn.microsoft.com/en-gb/library/ms173178%28v=vs.80%29.aspx)，可以帮助您入门。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T12:44:57.493

为两者创建两个不同的对象`SerialPort`和不同的`DataReceived`事件应该可以工作。

# jquery - jQuery img 不透明度/图层悬停？

> ID：16147412
> 
> 赞同：1
> 
> 时间：2013-04-22T12:43:15.363
> 
> 标签：jquery, jquery-animate, opacity, fade

我在一个链接中有一个 img，当你将鼠标悬停在它上面时，它会在顶部显示一个彩色/不透明层。除了我需要图像的名称淡出之外，它工作正常。

因此，图像会自行启动，但是当您将鼠标悬停在不透明颜色上时，会出现图像名称以及图像名称。

除了名称之外的所有内容都已排序，坚持下去。

这是我到目前为止[的jsfiddle](http://jsfiddle.net/jasmE/) ...

```
$(document).ready(function(){
     $('ul.case-thumbs li').hover(function(){
      $('img', this).stop().animate({opacity: 0.6});
     }, function() {
      $('img', this).stop().animate({opacity: 1});
     });
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T12:46:24.887

不确定我是否得到你，但假设这是你想要的......你只是在改变`<img>`这里的不透明度......并且由于图像名称在 img 元素之外......改变整个`<a>`元素的不透明度应该有效.. 因为 img 和图像名称在锚标签内`<a>`

尝试这个

```
$(document).ready(function () {
$('ul.case-thumbs li').hover(function () {
    $('a', this).stop().animate({
        opacity: 0.6
    });
}, function () {
    $('a', this).stop().animate({
        opacity: 1
    });
});
}); 
```

[在这里摆弄](http://jsfiddle.net/bipen/jasmE/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T12:58:52.363

`**[LIVE DEMO](http://jsfiddle.net/jasmE/7/)**`

```
$(function () {
    $('ul.case-thumbs li').on("mouseenter mouseleave",function ( e ) {
        var mEnt = e.type=="mouseenter";
        $('img', this).stop().fadeTo(300, mEnt?0.6:1);
        $('.thumbName', this).stop().fadeTo(300, mEnt?1:0);
    });
}); 
```

HTML：

```
<ul class="case-thumbs clearfix">
    <li>
        <div class="hover">
           <a href="#">
               <span class="thumbName">ImageName</span>
               <img src="http://lorempixel.com/output/food-q-c-1123-900-1.jpg" alt="test" />
           </a>
        </div>
    </li>
</ul> 
```

CSS：

```
span.thumbName{
    position:absolute;
    z-index:2;
    display:none;
}
ul.case-thumbs li {
    height: 165px;
    width: 220px;
    margin-right: 20px;
    margin-bottom: 20px;
    float: left;
    list-style:none;
}
ul.case-thumbs li img {
    vertical-align:middle;
    height: 165px;
    width: 220px
}
ul.case-thumbs li .hover {
    background-color: #560963;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T12:59:24.190

看到这个：http: [//jsfiddle.net/hD7JK/](http://jsfiddle.net/hD7JK/)

```
$(document).ready(function () {
$('ul.case-thumbs li').hover(function () {
    $('img', this).stop().animate({
        opacity: 0.6
    });
    $('span', this).stop().animate({
        opacity: 1
    });
}, function () {
    $('img', this).stop().animate({
        opacity: 1
    });
    $('span', this).stop().animate({
        opacity: 0
    });
});
}); 
```

html:

```
<ul class="case-thumbs clearfix">
  <li>
    <div class="hover"> <a href="#"> 
        <span>Image Name</span>
        <img src="http://lorempixel.com/output/food-q-c-1123-900-1.jpg" alt="test" /></a>
    </div>
  </li>
</ul> 
```

# ios - 输入 NSDate 格式未知且单独的日期和时间时的 NSDate 转换问题

> ID：16147419
> 
> 赞同：-1
> 
> 时间：2013-04-22T12:43:38.990
> 
> 标签：ios, objective-c, nsdate, nsdateformatter

即使我传递的字符串具有如下所示的日期，我也会得到空日期：-

通用输入日期格式为“MM/dd/YYYY hh:mm a”

NSString 输入日期可以是以下之一：“12/1/2012”、“12/1/2012 01:43 am”、“01:43 am”

我正在尝试的预期输出是，如果输入字符串中存在日期，则必须打印日期，如果输入字符串中存在时间，则必须打印时间。

输入：-

```
 [self testDate:@"12/1/2012"] 
```

代码：-

```
-(void) testDate:(NSString*) str{
    NSDateFormatter *formatter=[[NSDateFormatter alloc] init];
    [formatter setDateFormat:@"MM/dd/yyyy hh:mm a"];//My Generic Date Format
    self.dateTest=[formatter dateFromString:str];
    [self printDate:self.dateTest];
}

-(void) printSeparatedDateAndTime:(NSDate*) date{
    NSDateFormatter *dateF=[[NSDateFormatter alloc] init];
    [dateF setDateFormat:@"MM/dd/yyyy"];
    NSString *dateStr=[dateF stringFromDate:date];
    NSLog(@"Date= %@",dateStr);

    [dateF setDateFormat:@"hh:mm a"];
    NSString *timeStr=[dateF stringFromDate:date];
    NSLog(@"Time= %@",timeStr);
} 
```

输出日期：-

日期=（空）

时间=（空）

输入可以是任何格式，例如

**输入**
“12/1/2012”
**输出** 日期=“12/1/2012”时间=空

**输入** "12/1/2012 01:43 am"
**输出** 日期="12/1/2012" 时间=01:43 am

**输入** “01:43 am”
**输出** 日期=空时间=“01:43 am”

[在这里Objective-C String(yyyy-mm-dd) 到 NSDate](https://stackoverflow.com/questions/8985872/objective-c-stringyyyy-mm-dd-to-nsdate)可以得到不同的答案。这是指日期格式设置错误时的回答。

在我的情况下，日期格式是正确的。但它可能只有日期、时间或两者都有。要从字符串中分离日期和时间，可以参考此处[ios4 - 将日期和时间从字符串拆分为两个单独的字符串](https://stackoverflow.com/questions/8883628/ios4-splitting-a-date-and-time-from-a-string-into-two-separate-strings)，但它没有经过检查的答案或有效答案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T12:47:45.257

删除`hh:mm a` ，格式可以是“MM/dd/yyyy”或“dd/MM/yyyy”。

```
-(void) testDate:(NSString*) str{
    NSDateFormatter *formatter=[[NSDateFormatter alloc] init];
    [formatter setDateFormat:@"dd/MM/yyyy"];
    self.dateTest=[formatter dateFromString:str];
    [self printDate:date];
} 
```

您`printeDate:`将无法按预期工作，因为创建的日期没有关于时间的任何信息，并且您正在尝试显示小时和分钟。它将始终显示 12.00 AM。

如果您想显示小时和分钟，您还需要在输入字符串中包含它。

编辑：由于 dateFormats 可以是三种格式，因此您需要反复试验。

```
-(void) testDate:(NSString*) str{

    NSArray *dateFormats = @[@"dd/MM/yyyy",@"hh:mm a",@"dd/MM/yyyy hh:mm a"];

    NSDateFormatter *formatter=[[NSDateFormatter alloc] init];
    NSDate *date = nil;

    for (NSString *dateFormat in dateFormats) {
        [formatter setDateFormat:dateFormat];
        date = [formatter dateFromString:str];
        if (date) {
            break;
        }
    }

    [self printDate:date];
} 
```

或者

```
-(void) testDate:(NSString*) dateString
{
    NSDate *date = nil;
    NSError *error = nil;
    NSDataDetector *detector = [NSDataDetector dataDetectorWithTypes:NSTextCheckingTypeDate
                                                               error:&error];
    NSArray *matches = [detector matchesInString:dateString
                                         options:0
                                           range:NSMakeRange(0, [dateString length])];
    for (NSTextCheckingResult *match in matches) {
        if (match.date) {
            date = match.date;
            break;
        }
    }

    [self printDate:date];
} 
```

编辑 2：因为要求数据/时间为零。请试试

```
typedef enum {
    ValidDateType = 0,
    ValidTimeType = 1,
    ValidDateTimeType =2
}ValidType;

- (void)testDate:(NSString*) dateString
{
    NSArray *dateFormats = @[@"dd/MM/yyyy",@"hh:mm a",@"dd/MM/yyyy hh:mm a"];

    NSDateFormatter *formatter=[[NSDateFormatter alloc] init];

    __block NSDate *date = nil;
    __block ValidType type = ValidDateType;

    [dateFormats enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) {
        NSString *dateFormat = (NSString *)obj;
        [formatter setDateFormat:dateFormat];
        date = [formatter dateFromString:dateString];
        if (date) {
            type = idx;
            *stop = TRUE;
        }

    }];

    [self printDate:date validType:type];
}

- (void)printDate:(NSDate*) date validType:(ValidType)type
{
    NSDateFormatter *dateF=[[NSDateFormatter alloc] init];
    [dateF setDateFormat:@"MM/dd/yyyy"];
    NSString *dateStr=[dateF stringFromDate:date];

    [dateF setDateFormat:@"hh:mm a"];
    NSString *timeStr=[dateF stringFromDate:date];

    dateStr = (type == ValidTimeType)?nil:dateStr;
    timeStr = (type == ValidDateType)?nil:timeStr;

    NSLog(@"Time= %@",timeStr);
    NSLog(@"Date= %@",dateStr);

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T12:46:26.970

您将日期格式设置为包括 time: `MM/dd/yyyy hh:mm a`，但您没有通过 string: 传递任何时间`12/1/2012`。

只需`hh:mm a`从日期格式中删除：

```
-(void) testDate:(NSString*) str{
    NSDateFormatter *formatter=[[NSDateFormatter alloc] init];
    [formatter setDateFormat:@"MM/dd/yyyy"];
    self.dateTest = [formatter dateFromString:str];
   [self printDate:self.dateTest];
} 
```

* * *

另外我建议不要使用静态日期格式，以防您有任何非美国用户。Apple 已添加`NSDateFormatterStyle`使您可以轻松使用用户/系统选择的格式样式。

```
-(void) printDate:(NSDate*) date{ 
    NSDateFormatter *dateF=[[NSDateFormatter alloc] init];
    dateF.dateStyle = NSDateFormatterMediumStyle;
    dateF.timeStyle = NSDateFormatterNoStyle;
    NSString *dateStr=[dateF stringFromDate:date];
    NSLog(@"Date= %@",dateStr);

    dateF.dateStyle = NSDateFormatterNoStyle;
    dateF.timeStyle = NSDateFormatterShortStyle;
    NSString *timeStr=[dateF stringFromDate:date];
    NSLog(@"Time= %@",timeStr);
} 
```

# vbscript - VBScript 中的类型不匹配

> ID：16147422
> 
> 赞同：0
> 
> 时间：2013-04-22T12:43:42.537
> 
> 标签：vbscript

我正在尝试获取 db 中表的行数并使用 VBScript 将其输出到控制台，但是当我执行以下代码时出现类型不匹配错误，我应该在我的代码中更改什么以强制它无错误地执行

```
Dim loop_lim
Const DB_CONNECT_STRING = "Provider=SQLOLEDB.1;Data Source=BUG\SQLSERVER2005;Initial Catalog=test;user id ='sa';password='111111'"
Set myConn = CreateObject("ADODB.Connection")
Set myCommand = CreateObject("ADODB.Command" )
myConn.Open DB_CONNECT_STRING
Set myCommand.ActiveConnection = myConn
myCommand.CommandText = "select count(*) from oferty o inner join rep_oferta ro on o.indeks = ro.srcdoc inner join rep_pozycje rp on o.indeks = rp.srcdoc"
loop_lim = myCommand.Execute
WScript.Echo loop_lim 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T12:51:34.170

改变

```
loop_lim = myCommand.Execute 
```

至

```
Set loop_lim = myCommand.Execute 
```

因为 .Execute 返回一个记录集**对象**。然后考虑如何从记录集 rsp 中获取值。它的领域。

# windows-phone-7 - 如何在 windows phone 8 中的 TextBox/TextBlock 控件中上标一些文本？

> ID：16147423
> 
> 赞同：1
> 
> 时间：2013-04-22T12:43:44.933
> 
> 标签：windows-phone-7, xaml, windows-phone-8, windows-phone

我正在开发 Windows Phone 8 应用程序，我被困在这里，伙计们，我想在 TextBox 或 TextBlock 中尽可能将一些文本显示为上标。建议我如何获得它。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T21:40:51.457

你为什么不使用一个包装几个文本块的堆栈面板呢？然后调整你想要超级和下标的东西的边距。

```
 <StackPanel Orientation="Vertical">
        <TextBlock Text="H2O3" FontSize="40" Margin="0,10"/>
        <StackPanel Orientation="Horizontal">
            <TextBlock Text="H" FontSize="40" />
            <TextBlock Text="2" FontSize="40" Margin="0,-20,0,0"/>
            <TextBlock Text="O" FontSize="40"/>
            <TextBlock Text="3" FontSize="40" Margin="0,10,0,-10"/>
        </StackPanel>
    </StackPanel> 
```

![在此处输入图像描述](https://i.stack.imgur.com/ZrNCy.jpg)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-25T15:39:15.447

还有另一种选择，但它仅在 WP8 中可用：[Typography.Variants](http://msdn.microsoft.com/en-us/library/windowsphone/develop/system.windows.documents.typography.variants%28v=vs.105%29.aspx)。

我个人更喜欢这种方法，因为它更符合 WPF，但在某些情况下您必须进行基线操作，或者在这种情况下，边距争论。如果 WPF 有任何指示，它还需要支持通常仅开放类型/真实类型的变体的字体。请参阅[WPF 中超链接中的上标/下标以](https://stackoverflow.com/questions/1252114/superscript-subscript-in-hyperlink-in-wpf)获得更好的解释。

# magento - Magento 将普通导航与分层导航相结合

> ID：16147426
> 
> 赞同：1
> 
> 时间：2013-04-22T12:43:52.180
> 
> 标签：magento, navigation

是否可以将普通菜单导航与 getChildHtml(left) 中的分层导航结合起来？

我是什么，试图实现看起来像这样：

```
/* normal fixed nav */
Beachwear
    Tops
    Accessories
Tops
Shoes
Bags

/* layered/filter nav */
Colour
    Red
    Blue
    Yellow 
```

我知道我需要以某种方式将 catalog/navigation/left.phtml 与 catalog/layer/view.phtml 合并，但我不确定这有多大可能或如何做到这一点。

非常感谢任何建议。

# arrays - Corona SDK 数组索引超出数组范围，需要建议

> ID：16147428
> 
> 赞同：1
> 
> 时间：2013-04-22T12:44:04.947
> 
> 标签：arrays, lua, coronasdk, lua-table

我会尽量简洁地解决我的问题。

首先，文件是：

```
block.lua
base.lua
main.lua 
```

在 block.lua 中，我创建了一个块，添加了碰撞检测和清理代码。在 base.lua 中，我创建了一个由 4 列和 10 行组成的基础。一共40个街区。在 main.lua 中，我创建了 4 个由 base.class 制成的基础。

游戏开始后一切正常。我移除了基地并在第 2 层再次调用它们。他们自己创造良好但是当敌人再次被摧毁并且基地要重建时，我得到：

```
array index 1 is beyond array bounds:1..1 
```

——一直到——

```
array index 800 is beyond array bounds:1..159 
```

然后它将创建基地并继续直到敌人被摧毁并从以下开始再次执行相同的操作：

```
array index 800 is beyond array bounds:1..159 
```

——一直到——

```
array index 4000 is beyond array bounds:1..159 
```

终端将我指向 block.lua 第 23 行

```
blockGroup:insert(blockNum,self.block) 
```

现在我在课堂上看不到任何问题，我已经查看并搜索了几个小时，但都无济于事。我真的很感激能帮助我在这里指导我。我曾尝试重写“清理”等，但没有任何乐趣。我在那里留下了一些注释掉的部分，并删除了一些不相关的东西。我在相关代码下方发布：

```
--MAIN.LUA--

function gameOver()
  Runtime:removeEventListener("enterFrame", onEnterFrame)
  Runtime:removeEventListener("enterFrame", movePlayer)

  layers:removeSelf()
  layers = nil

  enemyCount = 0

   for i = 1,#allEnemys do
     timer.cancel(allEnemys[i].clock)
     Runtime:removeEventListener( "enterFrame", allEnemys[i] )
     display.remove(allEnemys[i].image)
     allEnemys[i].image=nil
   end
     allEnemys=nil

cleanupBlocks()
   end
----------------------------------------------------------------------
              -- LEVEL UP --
 ----------------------------------------------------------------------
function levelUp(level)
enemyCount = 0

local enemys = require("modules.enemy")
    if allEnemys ~= nil then
      for i = 1,#allEnemys do
           timer.cancel(allEnemys[i].clock)
           Runtime:removeEventListener( "enterFrame", allEnemys[i] )
           display.remove(allEnemys[i].image)
           allEnemys[i].image=nil
      end
    end
           allEnemys=nil
 cleanupBlocks()
 levels()

 end
----------------------------------------------------------------------
              -- LEVELS --
----------------------------------------------------------------------
function levels(level)

function createInvader(x, y, row)
  for j = 1, 2 do
    for i = 1, 2 do
      if allEnemys == nil then
       allEnemys = {}
      else
       enemysCount=#allEnemys
      end
      allEnemys[#allEnemys + 1] = enemys:new()
      allEnemys[#allEnemys ]:init(i * 60, j * 70 + 70,j) 
      allEnemys[#allEnemys ]:start()
    end
  end
end
createInvader()

--[[function createBases1()

local base = require("modules.base")
  for i = 1, 4 do
    base:new()
    base:init(i * 180 - 130, 850)
  end
end  ]]--

createBases()
end 
```

--块.LUA--

```
local block = {}
local block_mt = { __index = block}
local scene = scene
local blockGroup = display.newGroup()
local blockNum = 0

function block:new() -- constructor
local group = {}
return setmetatable( group, block_mt )
end

function block:init(xloc,yloc) --initializer
-- Create attributes

self.block = display.newRect( xloc,yloc,10,10)
self.block:setFillColor ( 2, 255, 14  )

blockNum = blockNum + 1
blockGroup:insert(blockNum,self.block)

local blockCollisionFilter = { categoryBits = 128, maskBits = 387}
physics.addBody( self.block,  "static", {filter = blockCollisionFilter})
self.count = 1

end
function cleanupBlocks()

--[[ print(blockNum, blockGroup.numChildren)
for i=1,blockGroup.numChildren do
blockGroup[1]:removeSelf()
blockGroup[1] = nil
end  ]]--
print(blockNum, blockGroup.numChildren)
while blockGroup.numChildren>0 do

  display.remove(blockGroup[1])
  blockGroup[1]=nil
end

end

function block:start()
---  Create Listeneres
 self.block:addEventListener( "collision", self )
 scene:addEventListener('base_block_event', self)
end

return block 
```

--BASE.LUA--

```
local base = {}
local base_mt = { __index = base}
local scene = scene

local block = require("modules.block")

function base:new() -- constructor
local group = {}
return setmetatable( group, base_mt )
end

function base:init(xloc, yloc) --initializer
-- Create attributes
local base

for j = 1, 4 do
    for i = 1, 10 do
        base = block:new()
        base:init(xloc+i * 10,yloc+j * 10)
        base:start()

    end
end

end

return base 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-05T20:21:57.203

我看你用

```
blockNum = blockNum + 1
blockGroup:insert(blockNum,self.block) 
```

尝试使用

```
blockGroup:insert(self.block) 
```

只是看看你是否仍然得到那个错误。

# java - 如何查看Array中有多少内存位置已满

> ID：16147429
> 
> 赞同：1
> 
> 时间：2013-04-22T12:44:12.587
> 
> 标签：java, arrays

在我正在做的一个程序上需要帮助。所以我分配了我的数组，例如：

```
hand = new PlayingCard[5]; //5 Cards in a hand 
```

`hand[0]`我为and设置了信息`hand[1]`，

```
hand[0] = deck.dealACard(); 
hand[1] = newDeck.dealACard(); 
```

我的问题是，当我试图弄清楚目前有多少张牌[]时，我得到的是“5”而不是“2”。

```
numCards = hand.length; 
```

我现在需要做什么才能让 numCards 等于“2”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T12:46:05.157

那么你可以很容易地使用：

```
public static int countNonNullElements(Object[] array) {
    int count = 0;
    for (int i = 0; i < array.length; i++) {
        if (array[i] != null) {
            count++;
        }
    }
    return count;
} 
```

但是，通常最好使用 a`List<E>`代替（例如`ArrayList<E>`）来表示具有不同大小的集合。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T12:46:14.750

你可以循环遍历：

```
int count = 0
for (PlayingCard c : hand) {
    if (c != null) count ++
}
//count is now how many cards there are 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T12:46:38.737

您可以实现一个方法来迭代整个数组以查看索引中是否有元素，或者您可以保留一个带有数字的局部变量，并通过添加和删除来控制它。

如果可能的话，我更喜欢第二个。它以恒定时间为您提供 1 个局部变量的价格的答案，而不是线性时间，就像第一个解决方案一样

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T12:47:02.050

您正在创建一个**数组**，`PlayingCard`其一旦初始化将具有固定大小，即`5`在您的情况下..

您可以使用`List`

```
List<PlayingCard> playingCardList=new ArrayList();
playingCardList.add(new PlayingCard());
playingCardList.add(new PlayingCard()); 
```

大小为`playingCardList`2

# architecture - 在集群环境中管理计划任务

> ID：16147430
> 
> 赞同：1
> 
> 时间：2013-04-22T12:44:22.977
> 
> 标签：architecture, scheduled-tasks, cluster-computing

我有一个小型服务器集群，用于处理大量的网络流量。这是一个非常标准的设置；3个Web服务器，负载均衡器，数据库服务器，仓库服务器。

困难在于我有许多按计划运行的不同任务，并且这些任务在运行频率方面差异很大。这些项目是：

1.  仓库工作。显然是运行在单仓库服务器上。将来可能会出现问题，但目前我们只有一个仓库。每晚运行。
2.  预定报告。使用 Quartz.NET，在我们的 ASP.NET 环境中触发。每当用户安排它们时运行，通常每天运行。
3.  统计快照。通过应用程序池启动的线程在 ASP.NET 中运行，获取整个系统负载的快照以供将来分析。每 2 分钟运行一次。
4.  系统事件。我们在系统中有很多“东西”需要以相对较高的频率更改它们的状态（在任何给定的检查中，大约 5-10 个项目需要状态更新）并将这些信息广播到连接的 Web 客户端。当前也设置为在应用程序池中的线程中运行。每2秒左右运行一次。

所有这一切都在单服务器设置中完美运行，即使在多服务器设置中，我也可以关闭非主要 Web 服务器（这是我当前的解决方案）上的东西。

真正的问题是，最好的设置方法是什么，以便系统内置更多冗余？将整个内容提取到不同框（框）上的 Windows 服务中？Web 服务器是否相互通信，以便它们可以检测到主服务器上的故障并让辅助服务器接管？

我对任何想法/建议感兴趣！

# xcode - 提交或放弃更改并重试

> ID：16147433
> 
> 赞同：2
> 
> 时间：2013-04-22T12:44:35.267
> 
> 标签：xcode, git, version-control, ignore

当我想将源代码推送到遥控器时遇到问题。但是 xcuserstate 文件总是被更改，并且 Git 宣布“提交或放弃更改并重试”。所以我试图忽略 xcuserstate 文件，但我不能 ![在此处输入图像描述](https://i.stack.imgur.com/B98mm.png)

怎么解决？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T15:30:35.147

错误消息非常具体地说明您应该做什么：*提交*文件（如果您想保留更改）或*丢弃*它（如果您不关心更改）。

cuser 文件通常隐藏在 xcode 项目的深处，因此您可能需要提供它们的完整路径（以下示例用于`find`在子目录中查找这些文件）

## 犯罪

这将提交当前目录中的*所有cuser 文件：*

```
$ git add $(find . -name "*.xcuserstate" -or -name "*.xcuserdata")
$ git commit $(find . -name "*.xcuserstate" -or -name "*.xcuserdata") -m "updated xcuser stuff" 
```

## 丢弃

这将丢弃当前目录中*所有cuser 文件的更改：*

```
$ git checkout $(find . -name "*.xcuserstate" -or -name "*.xcuserdata") 
```

通常你根本不想跟踪 xcuser-stuff，所以你应该从存储库中删除它并确保它不会被意外添加：

```
# remove cuser-stuff from the repository (but not locally)
$ git rm --cached $(find . -name "*.xcuserstate" -or -name "*.xcuserdata")
# commit the file removal
$ git commit $(find . -name "*.xcuserstate" -or -name "*.xcuserdata") -m "don't track cuser stuff"
# prevent the cuser-stuff from accidentally adding it
$ echo "*.cuserdata" > .gitignore
$ echo "*.cuserstate" > .gitignore
$ git add .gitignore
$ git commit .gitignore -m "don't track user-specific data" 
```

# javascript - 如何在 WP 中的这个谷歌地图上用标记覆盖折线？

> ID：16147434
> 
> 赞同：1
> 
> 时间：2013-04-22T12:44:38.793
> 
> 标签：javascript, wordpress, google-maps-api-3, markers, polyline

我已经设置了谷歌地图，它设置为从我的 WP 主题中的列表创建标记，其中包含街道信息或纬度、长信息。这在下面的代码中运行良好。但是，我也不知道如何向该地图添加折线路径。我是 JS 的菜鸟，但据我了解……只要您使用“setMap”方法，这应该可以工作。这是我到目前为止所拥有的，我应该如何/在哪里添加折线，以便我可以在页面中添加类似的内容：[http](http://www.w3schools.com/googleAPI/tryit.asp?filename=tryhtml_map_overlays_polyline) ://www.w3schools.com/googleAPI/tryit.asp?filename=tryhtml_map_overlays_polyline ? 非常感谢任何可以提供帮助的人！

```
var estateMapping = (function () {
    var self = {},
        marker_list = [],
        open_info_window = null,
        x_center_offset = 0, // x,y offset in px when map gets built with marker bounds
        y_center_offset = -100,
        x_info_offset = 0, // x,y offset in px when map pans to marker -- to accomodate infoBubble
        y_info_offset = -100;

    function build_marker(latlng, property) {
        var marker = new MarkerWithLabel({
            map: self.map, 
            draggable: false,
            flat: true,
            labelContent: property.bath,
            labelAnchor: new google.maps.Point(22, 0),
            labelClass: "label", // the CSS class for the label
            labelStyle: {opacity: 1},
            icon: 'http://bedstuybid.org/wp-content/uploads/2013/04/blank.png',   
            position: latlng
            });

            self.bounds.extend(latlng);
            self.map.fitBounds(self.bounds);
            self.map.setCenter(convert_offset(self.bounds.getCenter(), x_center_offset, y_center_offset));

            var infoBubble = new InfoBubble({
                maxWidth: 275,
                content: contentString,
                borderRadius: 3,
                disableAutoPan: true
            });

            var residentialString = '';
            if(property['commercial'] != 'commercial') {
                var residentialString='<p class="details">'+property.bed+' br, '+property.bath+' ba';
            }

            var contentString =
            '<div class="info-content">'+
            '<a href="'+property.permalink+'"><img class="left" src="'+property.thumb+'" /></a>'+
            '<div class="listing-details left">'+
            '<h3><a href="'+property.permalink+'">'+property.street+'</a></h3>'+
            '<p class="location">'+property.city+', '+property.state+'&nbsp;'+property.zip+'</p>'+
            // '<p class="price"><strong>'+property.fullPrice+'</strong></p>'+residentialString+', '+property.size+'</p></div>'+
            '</div>';

            var tabContent =
            '<div class="info-content">'+
            '<img class="left" src="'+property.agentThumb+'" />'+
            '<div class="listing-details left">'+
            '<h3>'+property.agentName+'</h3>'+
            '<p class="tagline">'+property.agentTagline+'</p>'+
            '<p class="phone"><strong>Tel:</strong> '+property.agentPhone+'</p>'+
            '<p class="email"><a href="mailto:'+property.agentEmail+'">'+property.agentEmail+'</a></p>'+
            '</div>'+
            '</div>';

            infoBubble.addTab('Details', contentString);
            infoBubble.addTab('Contact', tabContent);

            google.maps.event.addListener(marker, 'click', function() {
                if(open_info_window) open_info_window.close();

                if (!infoBubble.isOpen()) {
                    infoBubble.open(self.map, marker);
                    self.map.panTo(convert_offset(this.position, x_info_offset, y_info_offset));
                    open_info_window = infoBubble;
                }
            });

    function geocode_and_place_marker(property) {
       var geocoder = new google.maps.Geocoder();
       var address = property.street+', '+property.city+' '+property.state+', '+property.zip;

           //If latlong exists build the marker, otherwise geocode then build the marker
           if (property['latlong']) {
               var lat = parseFloat(property['latlong'].split(',')[0]),
                    lng = parseFloat(property['latlong'].split(',')[1]);
                var latlng = new google.maps.LatLng(lat,lng);
                build_marker(latlng, property);

           } else {
               geocoder.geocode({ address : address }, function( results, status ) {
                   if(status == google.maps.GeocoderStatus.OK) {
                        var latlng = results[0].geometry.location;
                        build_marker(latlng, property);
                    }
                });
            }
    }

    function init_canvas_projection() {
        function CanvasProjectionOverlay() {}
        CanvasProjectionOverlay.prototype = new google.maps.OverlayView();
        CanvasProjectionOverlay.prototype.constructor = CanvasProjectionOverlay;
        CanvasProjectionOverlay.prototype.onAdd = function(){};
        CanvasProjectionOverlay.prototype.draw = function(){};
        CanvasProjectionOverlay.prototype.onRemove = function(){};

        self.canvasProjectionOverlay = new CanvasProjectionOverlay();
        self.canvasProjectionOverlay.setMap(self.map);
    }

    function convert_offset(latlng, x_offset, y_offset) {
        var proj = self.canvasProjectionOverlay.getProjection();
        var point = proj.fromLatLngToContainerPixel(latlng);
        point.x = point.x + x_offset;
        point.y = point.y + y_offset;
        return proj.fromContainerPixelToLatLng(point);
    }

    self.init_property_map = function (properties, defaultmapcenter) {
        var options = {
            zoom: 1,
            center: new google.maps.LatLng(defaultmapcenter.mapcenter),
            mapTypeId: google.maps.MapTypeId.TERRAIN, 
            disableDefaultUI: true,
            streetViewControl: false
        };

        self.map = new google.maps.Map( document.getElementById( 'map' ), options );
        self.bounds = new google.maps.LatLngBounds();
        init_canvas_projection();

        //wait for idle to give time to grab the projection (for calculating offset)
        var idle_listener = google.maps.event.addListener(self.map, 'idle', function() {
            for (i=0;i<properties.length;i++) {
                geocode_and_place_marker(properties[i]);
            }
            google.maps.event.removeListener(idle_listener);
        });

    }

    return self;

}()); 
```

# java - 将 td 元素添加到 rowspan td 的下一个 tr

> ID：16147436
> 
> 赞同：0
> 
> 时间：2013-04-22T12:44:48.173
> 
> 标签：java, html, jsoup

我有以下html，

```
<!DOCTYPE html>
<html>
<body>

<table border="1">
  <tr>
    <th>Month</th>
    <th>Savings</th>
    <th>Savings for holiday!</th>
  </tr>
  <tr>
    <td>January</td>
    <td>$100</td>
    <td rowspan="2">$50</td>
  </tr>
  <tr>
    <td>February</td>
    <td>$80</td>
  </tr>
</table>

</body>
</html> 
```

我想使用jsoup生成下面的html，

```
<tr>
    <th>Month</th>
    <th>Savings</th>
    <th>Savings for holiday!</th>
  </tr>
  <tr>
    <td>January</td>
    <td>$100</td>
    <td rowspan="2">$50</td>
  </tr>
  <tr>
    <td>February</td>
    <td>$80</td>
    <td>$50</td>
  </tr> 
```

我目前已经编写了这段代码，通过它我可以获得行跨单元及其关联的 td 索引

```
final Elements rows = table.select("tr");

      int rowspanCount=0;
      String rowspanString ="";
      for(Element row : rows){
          int rowspanIndex = 0;
          for(Element cell: row.select("td")){
              rowspanIndex++;
              if(cell.hasAttr("rowspan")){
                  rowspanCount = Integer.parseInt(cell.attr("rowspan"));

                  rowspanString = cell.ownText();

                  cell.removeAttr("rowspan");
              }
          }
      } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T13:39:09.320

可能的提示：对于条件，

```
cell.hasAttr("rowspan") 
```

获取行索引，例如；

```
int index = row.getIndex(); 
```

然后通过 index+1 获取下一行，例如；

```
Element eRow = rows.get(index+1); 
```

然后将 td-Element 附加到该行，这将是您的下一行到 rowspan-row。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T18:14:28.823

您可以使用以下代码简单地附加此行：

```
Elements rows = table.select("tr > td[rowspan=2]");

for (Element row : rows) {
    row.parent().nextElementSibling().append("<td>$50</td>");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T09:13:26.210

编写完所有代码后，我找到了解决方案。下面是代码，

```
for (Element row : rows) {
        int cellIndex = -1;
        if(row.select("td").hasAttr("rowspan")){
            for (Element cell : row.select("td")) {
                cellIndex++;
                if (cell.hasAttr("rowspan")) {
                    rowspanCount = Integer.parseInt(cell.attr("rowspan"));
                    cell.removeAttr("rowspan");

                    Element copyRow = row;

                    for (int i = rowspanCount; i > 1; i--) {
                        nextRow = copyRow.nextElementSibling();
                        Element cellCopy = cell.clone();
                        Element childTd = nextRow.child(cellIndex);
                        childTd.after(cellCopy);
                    }
                }
            }
        }
} 
```

它将行跨单元复制到应包含它的所有以下行。同时删除属性 rowspan 以消除任何进一步的差异。

# c# - datagridview 抱怨“索引超出范围。必须是非负数且小于集合的大小。

> ID：16147440
> 
> 赞同：0
> 
> 时间：2013-04-22T12:44:53.793
> 
> 标签：c#, datagridview

```
 private void importFile()
    {
        TextFieldParser parser = new TextFieldParser(@"E:\\test.csv");
        parser.TextFieldType = FieldType.Delimited;
        parser.SetDelimiters(",");
        dataGridView1.Columns[0].Name = "URL";
        dataGridView1.Columns[1].Name = "Valid";

        while (!parser.EndOfData)
        {
            //Processing row
            string[] fields = parser.ReadFields();
            foreach (string field in fields)
            {
                //TODO: Process field
                // Crashes on line below with message
                // Index was out of range. Must be non-negative and less than the size of the collection. Parameter name: index
                DataGridViewRow row = (DataGridViewRow)dataGridView1.Rows[0].Clone();                    

                row.Cells[0].Value = field;
                row.Cells[1].Value = "";
                dataGridView1.Rows.Add(row);
            }
        }
        parser.Close();
    } 
```

以上是我的代码。如上所述，它在线上崩溃。我无法想象它为什么会崩溃。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T13:06:36.983

您的线路：

```
DataGridViewRow row = (DataGridViewRow)dataGridView1.Rows[0].Clone(); 
```

第一次执行会失败，因为此时dataGridView1中没有行，所以index = 0超出范围。

试试这个：

```
DataGridViewRow row = new DataGridViewRow(); 
```

你可以在这里阅读更多：

[http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridviewrow.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridviewrow.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T13:22:51.373

接近你的代码

```
 private void loadBtn_Click(object sender, EventArgs e)
    {
        string buffer = "1,2,3\r\n4,5,6\r\n7,8,9";
        TextFieldParser parser = new TextFieldParser(new MemoryStream(UTF8Encoding.Default.GetBytes(buffer)));
        parser.TextFieldType = FieldType.Delimited;
        parser.SetDelimiters(",");
        dataGridView1.Rows.Clear();

        while (!parser.EndOfData)
        {
            string[] fields = parser.ReadFields();
            dataGridView1.Rows.Add(fields);
        }
    } 
```

我的 dagaGridView1 有 3 列。我使用 MemoryStream 而不是文件解析。

# javascript - 多个按钮输入到同一页面上自己的文本框中，

> ID：16147446
> 
> 赞同：0
> 
> 时间：2013-04-22T12:45:13.507
> 
> 标签：javascript, html

```
<html>
<body>

<script>
function moveNumbers(num) { 
var txt=document.getElementById("result").value; 
txt=txt + num; 
document.getElementById("result").value=txt; 
} 
</script>
Select numbers: <br> <input type="button" value="1" name="no" onclick="moveNumbers(this.value)">  
<input type="button" value="2" name="no" onclick="moveNumbers(this.value)">  
<input type="button" value="3" name="no" onclick="moveNumbers(this.value)">  
<input type="text" id="result" size="20">

<br>
<br>
<br>

<script> function moveNumbers(num) { 
var txt=document.getElementById("result").value; 
txt=txt + num; 
document.getElementById("result").value=txt; 
} 
</script>
Select numbers: <br> <input type="button" value="a" name="no" onclick="moveNumbers(this.value)">  
<input type="button" value="b" name="no" onclick="moveNumbers(this.value)">  
<input type="button" value="c" name="no" onclick="moveNumbers(this.value)"> <input type="text" id="result" size="20">

</html>
</body> 
```

大家好，我有 2 个按钮组，“1、2、3”和“a、b、c”。尝试将输入分开到同一页面上自己的文本框时遇到问题有什么想法吗？在这里和那里尝试了一些事情，例如更改“价值”“名称”等。这方面相当新。谢谢你的帮助....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T12:51:10.137

你必须做这些事情

1）永远不要在同一页面上有相同的ID，它们应该不同。

> 此属性定义了一个唯一标识符 (ID)，该标识符在整个文档中必须是唯一的。其目的是在链接（使用片段标识符）、脚本或样式（使用 CSS）时识别元素

更多[在这里](https://developer.mozilla.org/en/docs/HTML/Global_attributes)。

2）永远不要为两个函数使用相同的名称。

3）您的`<body>`标签应该在`<html>`标签之前关闭。

```
 <html>
    <body>
    Select numbers: <br> <input type="button" value="1" name="no" onclick="moveNumbers1(this.value)">  
    <input type="button" value="2" name="no" onclick="moveNumbers1(this.value)">  
    <input type="button" value="3" name="no" onclick="moveNumbers1(this.value)">  
    <input type="text" id="result" size="20">

    <br>
    <br>
    <br>
    <script> 
    function moveNumbers2(num) { 
       var txt=document.getElementById("result2").value; 
       txt=txt + num; 
       document.getElementById("result2").value=txt; 
    } 
    function moveNumbers1(num) { 
       var txt=document.getElementById("result").value; 
       txt=txt + num; 
       document.getElementById("result").value=txt; 
    } 
    </script>
    Select numbers: <br> <input type="button" value="a" name="no" onclick="moveNumbers2(this.value)">  
    <input type="button" value="b" name="no" onclick="moveNumbers2(this.value)">  
    <input type="button" value="c" name="no" onclick="moveNumbers2(this.value)"> <input type="text" id="result2" size="20">

    </body>
 </html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T12:53:43.373

不要在同一页面中为组件和函数名称使用相同的 id。

第二个函数将被第一个函数覆盖（这意味着第一个函数将被丢弃，它将起作用）。

```
<html>
<body>
<script>

function moveNumbers(num) { 
var txt=document.getElementById("result1").value; 
txt=txt + num; 
document.getElementById("result1").value=txt; 
} 

function moveAlpha(num) { 
var txt=document.getElementById("result").value; 
txt=txt + num; 
document.getElementById("result").value=txt; 
} 

</script>
Select numbers: <br> <input type="button" value="1" name="no" onclick="moveNumbers(this.value)">  
<input type="button" value="2" name="no" onclick="moveNumbers(this.value)">  
<input type="button" value="3" name="no" onclick="moveNumbers(this.value)">  
<input type="text" id="result1" size="20">
<br>
<br>
<br>
Select numbers: <br> <input type="button" value="a" name="no" onclick="moveAlpha(this.value)">  
<input type="button" value="b" name="no" onclick="moveAlpha(this.value)">  
<input type="button" value="c" name="no" onclick="moveAlpha(this.value)"> <input type="text" id="result" size="20">

</html>
</body> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T13:09:53.573

JJPA 强调了您在使用 HTML 和 javascript 时遇到的问题，我唯一要补充的是，您可以通过使它们可重用来创建一个函数来完成这两项工作。这更有效，并减少了您需要的代码量。

像这样的东西

```
moveNumbers(num, element){
  var txt=document.getElementById(element).value; 
  txt=txt + num;
  document.getElementById(element).value=txt; 
} 
```

然后你像这样调用函数

```
Select numbers: <br> <input type="button" value="1" name="no" onclick="moveNumbers1(this.value, "result")">  
<input type="button" value="2" name="no" onclick="moveNumbers1(this.value, "result")">
<input type="button" value="3" name="no" onclick="moveNumbers1(this.value, "result")">  
<input type="text" id="result" size="20"> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-22T12:49:34.490

在你的标签之间使用空格，如下所示：

```
<input type="button" value="a" name="no" onclick="moveNumbers(this.value)"> 
&nbsp;&nbsp; </input>
<input type="button" value="b" name="no" onclick="moveNumbers(this.value)"> 
&nbsp;&nbsp; </input>
<input type="button" value="c" name="no" onclick="moveNumbers(this.value)"> 
```

你也可以有更多的按钮，一旦点击任何一个，它的值就会被发布。

# java - 使用构造函数时获取空指针异常

> ID：16147451
> 
> 赞同：-3
> 
> 时间：2013-04-22T12:45:19.053
> 
> 标签：java, constructor, nullpointerexception

```
public class Author {
private int id;
private String name;
private String university;
private String department;
private String email;
private int article1;
private int article2;
private int article3;
private int article4;
private int article5;
//constructors and getter/setters are generated automatically, not adding to have space
} 
```

这是我的作者课程。这个类只有这些属性。我也有一个`readDaFile`类，它被创建来读取`author.txt`和创建作者对象。

```
import java.util.Scanner;
import java.io.*;

public class readAuthor {

private Scanner reader;
private String temp;
private String[] split;
public Author[] authorList;
private int dummyInt,dummyArticle1=0 ,dummyArticle2=0 ,dummyArticle3=0,dummyArticle4,dummyArticle5;
private int i=0;
private String name , university , department , email ;
public void tryOpeningOrDieTrying(){
 try{
     reader = new Scanner(new File("Author.txt"));
 }
 catch(Exception exo){
 System.out.println("Can not find file.");
 }
}
public void readDaFile(){

    while(reader.hasNext()){
        temp = reader.nextLine();
        split = temp.split(" ");

        name = "NOTGIVEN";
        university = "NOTGIVEN";
        department = "NOTGIVEN";
        email = "NOTGIVEN";
        dummyInt = 0;
        dummyArticle1 = 0;
        dummyArticle2 = 0;
        dummyArticle3 = 0;
        dummyArticle4 = 0;
        dummyArticle5 = 0;

        dummyInt = Integer.parseInt(split[1]);
        if(split.length>2){ name = split[2]; }
        if(split.length>3){ university = split[3]; }
        if(split.length>4){ department = split[4]; }
        if(split.length>5){ email = split[5]; }
        if(split.length>6){ dummyArticle1 = Integer.parseInt(split[6]); }
        if(split.length>7){ dummyArticle2 = Integer.parseInt(split[7]); }
        if(split.length>8){ dummyArticle3 = Integer.parseInt(split[8]); }
        if(split.length>9){ dummyArticle4 = Integer.parseInt(split[9]); }
        if(split.length>10){ dummyArticle5 = Integer.parseInt(split[10]); }

        System.out.println(dummyInt+name+university+department+email+dummyArticle1+dummyArticle2+dummyArticle3+dummyArticle4+dummyArticle5);
        //authorList[i] = new Author(dummyInt,name,university,department,email,dummyArticle1,dummyArticle2,dummyArticle3,dummyArticle4,dummyArticle5);
 i++;
        //System.out.println(split[1]);
    //System.out.println(split.length);
    }
}
public void sealDaGates(){
reader.close();
}
} 
```

只是我先阅读行，然后将它们拆分为子元素以创建作者对象。但 Author.txt 可能不会给出所有作者属性。
例如 ：

```
 AUTHOR 100
 AUTHOR 101 Ruonan_Li MIT Computer_Science ruonan@mit.edu 1002001 1002009 1002004 
```

为了防止向作者构造函数发送空参数，我正在为每个循环初始化每个属性变量。`printf`我还通过-ing检查了初始化的属性变量。它们似乎按预期工作。如果我无法从 txt 成功读取属性，程序将发送`NOTGIVEN`或发送`0`到构造函数。但我仍然`nullpointerexception`在线：

```
 authorList[i] = new Author(dummyInt,name,university,department,email,dummyArticle1,dummyArticle2,dummyArticle3,dummyArticle4,dummyArticle5); 
```

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T12:47:37.303

你永远不会初始化`authorList`，所以它是空的。失败的不是构造函数调用——而是对数组的赋值。你需要：

```
authorList = new Author[...]; 
```

某处。或者 - 几乎可以肯定 - 使用 a `List<Author>`，例如

```
private final List<Author> authorList = new ArrayList<Author>(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T12:56:47.767

看起来你忘记初始化`authorList`数组了。在构造函数中，添加这一行`authorList = new Author[100];`应该可以修复它。更改`100`为您想要的任何数量的元素。

# php - PHP - 在 cron 作业中从 Amazon S3 读取大型 XML 文件会导致进程内存不足

> ID：16147455
> 
> 赞同：0
> 
> 时间：2013-04-22T12:45:34.290
> 
> 标签：php, linux, memory, amazon-s3, cron

我们有一个流程设置为每天凌晨 1 点作为批处理作业运行，以执行我们需要的一些计算，以便向我们的用户发送更新通知。

我们收到这条消息，内核每次都在杀死进程：

4 月 8 日 01:06:51 玛莎内核：[14697876.360797] 内存不足：杀死进程 20803（processDirector）得分 347 或牺牲孩子

操作系统（Ubuntu）似乎正在将内存转储到磁盘。该转储的内容是我们从 S3 读取的大型 XML 文件。

奇怪的是，如果我只是从命令行将脚本作为 ./processDirector 运行，那么它确实会成功执行。

我们抓取的 XML 文件通常在 40-70MB 左右。我们使用的是 Amazon S3 SDK2，这是我们用来获取 XML 文件的代码：

```
$result = $s3->getObject(array(
    'Bucket' => 'updates-uk',
    'Key' => $key,
));

$body = $result->get('Body');
$body->rewind();
return $body->read($result['ContentLength']); 
```

我想知道这是否是 cron 配置的问题，它只允许进程使用一定数量的内存。

我正在使用 PHP SAX XML 解析器来尝试提高速度并防止程序需要构建完整的 SimpleXML 对象或类似对象。

我对如何解决这个问题的两个想法是：

1.  了解如何允许 cron 作业使用更多内存
2.  将 XML 文件分阶段读入文件，并让 SAX 解析器从文件中解析，而不是将完整的 40-670MB XML 字符串保存在内存中。

如果有人对如何解决此问题有任何想法，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T12:51:37.887

可能只是 PHP 限制了脚本允许使用的内存量：

为了增加内存使用，命令[ini_set()](http://php.net/manual/en/function.ini-set.php)应该可以帮助您。这是一篇关于使用它来增加php 脚本的[内存限制的文章。](http://davidwalsh.name/increase-php-memory-limit-ini_set)

# firefox - 未从 Mozilla Firefox 中的文件上传控件获取完整路径

> ID：16147456
> 
> 赞同：2
> 
> 时间：2013-04-22T12:45:35.863
> 
> 标签：firefox, c#-4.0, file-upload

我没有在 Mozilla Firefox 中获得上传文件的完整路径，但我在 IE 中获得了它。下面是我用来获取路径的代码。

```
string strFileName = fileUpload.postedFile.FileName; 
```

我必须阅读该文件并将其显示在`gridview`.

有没有办法获取文件？

# bash - 用 sed 替换被字符包围的句点

> ID：16147458
> 
> 赞同：1
> 
> 时间：2013-04-22T12:45:49.000
> 
> 标签：bash, sed

我正在尝试使用 sed 替换文本文件中的某些句点。我的文件是这样的：

```
a.b
aa.bb
aa. b
a . b 
```

我要做的是用'§'替换在它们之前和之后有字符的句点。在这种情况下，“ab”和“aa.bb”。我已经设法用grep然后sed做到了：

```
egrep '[[:alpha:]]\.[[:alpha:]]' | sed 's/\./§/g' 
```

但这不会让我继续操纵文件。如果我尝试

```
sed 's/[[:alpha:]]\.[[:alpha:]]/§/g' 
```

它将像“ab”这样的字符串替换为“§”而不是“a§b”。

非常感谢帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T12:49:23.657

您需要“捕捉”这些零件，然后再次打印它们。

```
sed 's/\([[:alpha:]]\)\.\([[:alpha:]]\)/\1§\2/g' 
```

格式`\([[:alpha:]]\)\.\([[:alpha:]]\)`表示`XXX.YYY`。然后你打印它们`\1§\2`，作为`\1`第一部分，`\2`第二部分......包裹在中间`\( ... \)`。

如果您想了解更多信息，此参考资料可能会对您有所帮助：[RegExp - 在 sed 中保留部分模式](http://gilmation.com/articles/regexp-keeping-parts-of-a-pattern-in-sed/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T12:51:58.087

出于某种原因`sed`不喜欢我，但这里有同样的事情`perl`：

```
perl -pe 's/(\w)\.(\w)/$1§$2/g' 
```

您正在寻找的正则表达式功能称为“捕获”。

更新：出于某种原因`-E`需要`sed`：

```
sed -E 's/([[:alpha:]])\.([[:alpha:]])/\1§\2/g' 
```

# php - 使用 PHP 删除 text.txt 中的真空/空行

> ID：16147459
> 
> 赞同：0
> 
> 时间：2013-04-22T12:45:52.617
> 
> 标签：php, line, emptydatatext

我尝试删除真空线。我的剧本，搜索一条线，删除她，但它仍然是一条真空线。

```
hello
dude
world 
```

我做了这个脚本：

```
$chaine="dude"; 
$file=$filename; 
$texte = file_get_contents($file); 
$texte = str_replace($chaine ,'',$texte); 
$texte = preg_replace('/\s+/s', "\n", $texte);

try
    {

        if(!$fd = fopen($filename, "w")){
            throw new Exception("Erreur ouverture du fichier");
        }
    else
    {   
        fwrite($fd, $texte); 

        /*On ferme le fichier*/
        fclose($fd);    
    }

    }

    catch (Exception $e) {
        echo "Error de parametre fichier introuvable (File: ".$e->getFile().", line ".
        $e->getLine()."): ".$e->getMessage();
        echo "\n";
    } 
```

我有

```
hello
world 
```

但是如果我删除第一个：你好，我有一个真空线：

```
(vacuum line)
world 
```

我该如何解决这个问题？

我尝试修剪，str_replace，但它不起作用......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T12:50:23.243

替换这个：

```
$texte = str_replace($chaine ,'',$texte); 
$texte = preg_replace('/\s+/s', "\n", $texte); 
```

有了这个：

```
$texte = preg_replace('#' . $chaine . '\s*#', "\r", $texte); 
```

我不知道您的换行符是什么样的，但请尝试使用“\r”、“\n”或“\r\n”作为替换字符串。

# c++ - 四元数基础变换

> ID：16147460
> 
> 赞同：3
> 
> 时间：2013-04-22T12:45:54.950
> 
> 标签：c++, rotation, quaternions

我有一个四元数，基于 Y 轴向上、X 轴向右、Z 轴朝向我的坐标系。

现在我想基于这个四元数在另一个应用程序（C++）中移动一个字符。如果坐标系相同，但此应用程序使用不同的坐标系，这将没有问题。Z 向上，X 向右，Y 穿过显示器（向内）。

我试图简单地旋转四元数来调整坐标系，但我尝试的每一次旋转，看起来都不太正确。

我的想法是我需要某种基本转换，但我不知道如何用四元数做到这一点，有人知道如何对四元数执行基本转换吗？

**编辑**

我将 Eigen C++ 库用于四元数。这是我使用的四元数：

```
Quaternion<float> QX90( Eigen::AngleAxisf( M_PI /2.0, Eigen::Vector3f::UnitX() ) );
Quaternion<float> nQX90( Eigen::AngleAxisf( -M_PI /2.0, Eigen::Vector3f::UnitX() ) );

Quaternion<float> Qrshoulder = .... //the Quaternion in the Y up coordinate system 
```

我尝试旋转 X 轴：

```
Qrshoulder=Qrshoulder*QX90; 
Qrshoulder=QX90*Qrshoulder;
Qrshoulder=Qrshoulder*nQX90;
Qrshoulder=nQX90*Qrshoulder; 
```

这没有用。我还尝试了其他几种乘法，我几乎尝试了每一个看起来合乎逻辑的旋转。我很困惑..似乎这不能用四元数乘法来完成

**编辑 2**

我有绝对和分层四元数。分层四元数提供 3D 空间中从父骨骼到子骨骼的旋转量。绝对四元数是相乘的分层骨骼方向。

另一方面，我想要制作动画的角色背后有一个引擎，它已经使骨骼倍增，所以我肯定需要使用分层旋转。但问题是，当我使用分层旋转时，Y 轴总是位于骨骼的方向上。

我从 Nolnoch 的回答中尝试了什么：

```
Quaternion<float> QNX( Eigen::AngleAxisf( 0, Eigen::Vector3f(1,0,0) ) );

rot=(QNX*QX90*Qrshoulder).toRotationMatrix();
targetNode->setRotation( Eigen::Transform3f( rot ) ); 
```

这既不适用于层次结构，也不适用于绝对方向。这是描述我得到什么四元数的文章：http: [//msdn.microsoft.com/en-us/library/hh973073.aspx](http://msdn.microsoft.com/en-us/library/hh973073.aspx)

我想我想念的是，当使用分层方向时，我得到了我需要的正确旋转量，但是坐标系完全搞砸了，因为 Y 轴沿着骨骼，而在我的 collada 中，坐标系总是Z起来。我不知道如何改变这一点，我什至不确定这是否是我的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T15:10:27.223

你能展示你尝试过的旋转吗？听起来您的次要基础是围绕负 X 轴旋转 90 度后的原始基础。

您可以使用基于角轴矢量 [(PI / 2) 的四元数 [w, x, y, z] = [cos(PI / 4), sin(PI / 4), 0, 0] 1, 0, 0]。您还可以将原始四元数转换为矩阵形式并连接仿射旋转矩阵。我现在忘记了 sin/cos 项的顺序。

还要注意乘以向量和矩阵的顺序。(v' = Rv) != (v' = vR)。

**[编辑 1]**
问题是，四元数没有固有的惯用手或对特定基础的依恋。它们只是关于参考原点定义的方向分量的运动量。此外，它们不存储有关先前旋转的明确信息。

因此，在一个上下文中表示围绕 Z 轴旋转 35 度的最终四元数在另一个上下文中仍将围绕 Z 轴旋转 35 度。由于您的第二个基础是从原始基础绕 X 旋转，所以这应该有效。

其他需要考虑的事项：

你提到了一个肩膀——这是一个层次结构吗？如果是这样，这个特定的四元数是该肢体的真正最终/全局四元数，还是参考另一个本地上下文（并被连接）？

你在什么情况下在你的其他应用程序中实现这个四元数？如果它是相同的层次结构，请在开始递归渲染之前尝试通过此校正四元数转换您的 ModelView，然后在完成后转换回来（或使用矩阵堆栈）。

**[编辑 2]**
什么是 QNX？您定义一个没有关联运动的轴。如果您尝试使用零或“空”四元数，则为 [w, x, y, z] = [1, 0, 0, 0]。

四元数乘法，除非在库的实现中进行了修改，否则是从右（基本旋转）到左（新旋转）。我检查了 Eigen，它没有提到在文档中切换东西。

此外，每次旋转都会随对象一起变换全局轴，所以正如我上面提到的，这个校正四元数 (QX90) 应该在渲染分层模型之前添加到全局绝对旋转中。见下文。

```
Identity Matrix (clean slate)             Rotations in effect: [ ]
  Rotation 1                                                   [1]
    Draw some object                                           [1]

Identity Matrix                                                [ ]
  Rotation Q (QX90)                                            [Q]
    Rotation A (hip)                                           [A*Q]
      Draw hip                                                 [A*Q]
      Rotation B (spine)                                       [B*A*Q]
        Draw spine                                             [B*A*Q]
        Rotation C (shoulder)                                  [C*B*A*Q]
          Draw shoulder                                        [C*B*A*Q] 
```

与您发布的 MSDN 指南的迭代结构相反，我仅以递归方式呈现分层模型。尽管如此，这仍然是全局变换矩阵相对于其旋转分量的*状态*背后的想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-10-31T08:58:42.317

没有 Q 的旋转会给出你想要的，因为新空间 Q' 中的正交基具有不同的旋向性。

获得所需内容的一种方法是提取输入四元数 Q 的 X、Y、Z 向量，如下所示：

```
X = <1-2*qY*qY-2*qZ*qZ, 2*qX*qY+2*qZ*qW, 2*qX*qZ-2*qY*qW>
Y = <2*qX*qY-2*qZ*qW, 1-2*qX*qX-2*qZ*qZ, 2*qZ*qY+2*qX*qW>
Z = <2*qX*qZ+2*qY*qW, 2*qZ*qY-2*qX*qW, 1-2*qX*qX-2*qY*qY> 
```

其中 qX,qY,qZ,qW 是 Q 的元素，X,Y,Z 是基向量。这是从四元数到矩阵 (Quaternion::getMatrix) 的函数中提取的

现在根据需要交换轴。

```
X' = X
Y' = -Z
Z' = Y 
```

最后，使用新的基向量 X',Y',Z' 构造一个新的四元数。我最近在此问题的答案中讨论了如何从正交基础构建四元数： [来自正交基础的四元数](https://stackoverflow.com/questions/1620130/quaternion-from-orthogonal-basis)

# javascript - Rapache brew不输出javascript

> ID：16147473
> 
> 赞同：1
> 
> 时间：2013-04-22T12:46:28.313
> 
> 标签：javascript, r, rapache, googlevis

根据 googleVis 教程，我正在尝试使用 Brew 将图表动态嵌入到我的网页中，如下所示：

html:

```
 <div class="sixteen columns" id="plot">
        <% brew('test.brew') %>
    </div> 
```

测试.brew：

```
 <%
    data <- ...
    linechart <- gvisLineChart(data, xvar="starttime", yvar=y_var, options=list())%>
    <%=linechart$html$chart%> 
```

创建页面时，除了 javascript 之外的所有内容都插入到 html 文件中：

```
 <!-- LineChart generated in R 2.15.3 by googleVis 0.3.3 package -->
    <!-- Mon Apr 22 11:40:32 2013 -->
    <!-- jsHeader -->
    <!-- divChart -->
    <div id="LineChartID50a1300cbfea">
    </div> 
```

有谁知道如何解决这个问题，以便也输出下面的javascript？

（我知道它就在那里，因为我已经在 R 中进行了交互检查，并将输出写入文件并在我的浏览器中成功打开了页面）。

# xml - Flex - 更新 XML 文件后在 Chrome 中显示旧数据

> ID：16147474
> 
> 赞同：1
> 
> 时间：2013-04-22T12:46:28.813
> 
> 标签：xml, apache-flex, flash-builder

我有简单的 flex 应用程序，它读取 XML 文件并显示在 dataGrid 中。我在更改 XML 文件时遇到问题，因此即使我重新启动 Chrome，Chrome 也不会在刷新后刷新此 XML 数据。我认为 XML 数据会留在 Chrome 缓存中吗？
我怎样才能自动刷新这些数据？在 Firefox 功能中一切正确..
我的弹性代码：

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx"
               creationComplete="aktualityService.send()">
    <fx:Script>
        <![CDATA[
            import mx.collections.ArrayCollection;
            import mx.controls.Alert;
            import mx.rpc.events.FaultEvent;
            import mx.rpc.events.ResultEvent;

            [Bindable]
            private var xmlData:ArrayCollection;

            protected function aktualityService_resultHandler(event:ResultEvent):void
            {
                xmlData = new ArrayCollection();

                for each (var aktualita:Object in event.result.aktuality.aktualita)
                {
                    xmlData.addItem(aktualita);
                }
            }

            protected function aktualityService_faultHandler(event:FaultEvent):void
            {
                Alert.show("ERROR read xml: " + event.fault.faultString);               
            }

        ]]>
    </fx:Script>

    <fx:Declarations>
        <s:HTTPService id="aktualityService"
                       url="data/aktuality.xml"
                       result="aktualityService_resultHandler(event)"
                       fault="aktualityService_faultHandler(event)"
                       method="GET"/>

    </fx:Declarations>

    <s:DataGrid id="dataGridId"
                y="100" x="0" dataProvider="{xmlData}" />
</s:Application> 
```

然后我在 flash builder 中导出发布版本并复制到我的服务器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T14:26:25.557

为了防止缓存在文件路径后使用随机数，例如：

```
<s:HTTPService id="aktualityService"
               url="data/aktuality.xml?{UIDUtil.createUID()}"
               result="aktualityService_resultHandler(event)"
               fault="aktualityService_faultHandler(event)"
               method="GET"/> 
```

# network-programming - 从 C++ 应用程序设置和控制 IP 摄像机

> ID：16147479
> 
> 赞同：4
> 
> 时间：2013-04-22T12:46:52.843
> 
> 标签：network-programming, wifi, arduino

我想通过 WIFI 从 PC 上控制一个基于 arduino 和 IP 摄像头的小型机器人，但是我已经浏览了很长一段时间的互联网，但我仍然不知道如何设置它。

我想在机器人上安装一个 WIFI 路由器，比如[这个](http://www.tp-link.com.au/products/details/?model=TL-WR702N)，通过以太网连接到控制电机的 arduino，还通过 WIFI 连接到旁边的[IP 电动摄像头](http://www.lightinthebox.com/ip-camera-wifi-802-11-b-g-m-jpeg-free-ddns-bounded-supprot-16-preset-position-motion-detection-black-white_p209046.html)（我找不到这么小的路由器有几个端口）。我会将我的笔记本电脑连接到这个路由器广播的网络（我不能使用我学校的网络）向相机或 arduino 发送命令，并从相机中检索视频。

现在，我到处寻找，但找不到如何从笔记本电脑上的客户端应用程序（C++/Qt/Windows）与相机交互？OpenCV 听起来很适合直播，但它的电机呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-06T19:00:33.530

IP 摄像机不需要与 Arduino 软件链接。有时最好使用最简单的解决方案来达到良好的效果。我在我的一个机器人上做了同样的事情，我将 IP 摄像头与 Arduino 网络分开运行，这样我就可以使用拥有自己应用程序的摄像头的所有功能。可以从定制的应用程序运行机器人，该应用程序还在同一应用程序的单独窗口中启动相机应用程序。通过这种方式，您可以控制运动电机，并在应用程序的窗口中托管相机软件并统一客户体验。只需处理您的控件和颜色，以协调表单的布局。您可以在[此处](http://www.codeproject.com/Articles/9123/Hosting-EXE-Applications-in-a-WinForm-project)和[此处](https://stackoverflow.com/questions/758494/how-can-i-run-another-application-within-a-panel-of-my-c-sharp-program)找到有关如何对其进行编码的更多参考资料。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-01T14:30:29.793

目前尚不完全清楚您要做什么（具体如范围；重点是构建硬件或使用硬件），您已经拥有什么硬件（例如，您是否已经拥有机器人等），以及什么你的经验水平是。

如果您正在谈论带摄像头的移动机器人，我建议您查看[Scribbler/Fluke](http://wiki.roboteducation.org/Myro_Hardware)组合（该链接适用于两者的早期版本 - 较新的版本功能更全面），无论是解决方案还是想法和示例您可以构建的代码。

Scribbler/Fluke 使用蓝牙与主机通信，Fluke 有一个用于成像的板载摄像头。范围为@ 100 米。Fluke 运行一个 linux 版本，因此它可以处理视频处理和许多其他操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-01T18:34:20.537

知道了！我用 WireShark 嗅探了与我的相机建立的通信端口（使用“HTTP 端口 99”过滤捕获），并注意到 HTTP 请求“/decoder_control.cgi?command=0”、“/decoder_control.cgi?command=2”等。从我的浏览器发送它们后：“192.168.1.99:99/decoder_control.cgi?command=0”等，结果这个IP摄像头的命令和这个地址的命令是一样的[，](http://www.zoneminder.com/wiki/index.php/Foscam)它就像一个魅力！

这太糟糕了，虽然速度无法调整（它在设置中设置，也许我可以通过相同的方式动态更改它的值）但这是一个开始。

无论如何，感谢您的帮助，保持我最喜欢的专业论坛的出色工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-07T17:34:19.493

我会使用一个带有 OpenWrt 的路由器作为你的机器人通讯中心。从这里您可以直接连接 IP 摄像机以及向您的 Arduino 发送串行命令进行控制。

您可以使用 OpenCV 直接连接到 IP 摄像机流。

我还会编写一个小型服务器，作为路由器上的后台服务运行。该服务器将负责向 arduino 发送串行命令以控制机器人的电机。

总而言之，这需要几个软件：arduino 代码将串行命令解释为用于电机控制的 H 桥，服务器（python 很容易）接收 tcp 数据包（或标准 Web 请求）并将信息转换为串行，您的 gui 接口，它从 IP 摄像机加载当前图像（看起来您已经想通了），以及与服务器的 TCP 套接字连接以执行电机的命令和控制。

# qt - QT 共享库未定义引用

> ID：16147481
> 
> 赞同：0
> 
> 时间：2013-04-22T12:46:57.630
> 
> 标签：qt, shared-libraries, qt-creator, qmake, qt5

我正在研究在 QT 中链接共享库，尝试过教程但没有任何效果。有人可以帮我找出错误吗？

编译测试项目时出现错误“未定义的测试引用”。

我试图链接我的库的项目：loadTestLib.pro：

```
#-------------------------------------------------
#
# Project created by QtCreator 2013-04-22T15:32:30
#
#-------------------------------------------------

QT       += core

QT       -= gui

TARGET = loadTestLib
CONFIG   += console
CONFIG   -= app_bundle

TEMPLATE = app

SOURCES += main.cpp
LIBS+=-L../libtest.so.1.0.0

HEADERS += \
    test_global.h \
    test.h 
```

主.cpp：

```
#include <QCoreApplication>
#include "test.h"

int main(int argc, char *argv[])
{
    QCoreApplication a(argc, argv);
    Test test;
    return a.exec();
} 
```

test_global.h：

```
#ifndef TEST_GLOBAL_H
#define TEST_GLOBAL_H

#include <QtCore/qglobal.h>

#if defined(TEST_LIBRARY)
#  define TESTSHARED_EXPORT Q_DECL_EXPORT
#else
#  define TESTSHARED_EXPORT Q_DECL_IMPORT
#endif

#endif // TEST_GLOBAL_H 
```

测试.h：

```
#ifndef TEST_H
#define TEST_H

#include "test_global.h"

class TESTSHARED_EXPORT Test
{
public:
    Test();
};

#endif // TEST_H 
```

图书馆：

test_global.h：

```
#ifndef TEST_GLOBAL_H
#define TEST_GLOBAL_H

#include <QtCore/qglobal.h>

#if defined(TEST_LIBRARY)
#  define TESTSHARED_EXPORT Q_DECL_EXPORT
#else
#  define TESTSHARED_EXPORT Q_DECL_IMPORT
#endif

#endif // TEST_GLOBAL_H 
```

测试.cpp：

```
#include "test.h"

Test::Test()
{
} 
```

测试.h：

```
#ifndef TEST_H
#define TEST_H

#include "test_global.h"

class TESTSHARED_EXPORT Test
{
public:
    Test();
};

#endif // TEST_H 
```

测试.pro：

```
#-------------------------------------------------
#
# Project created by QtCreator 2013-04-22T15:31:04
#
#-------------------------------------------------

QT       -= gui

TARGET = test
TEMPLATE = lib

DEFINES += TEST_LIBRARY

SOURCES += test.cpp

HEADERS += test.h\
        test_global.h

unix:!symbian {
    maemo5 {
        target.path = /opt/usr/lib
    } else {
        target.path = /usr/lib
    }
    INSTALLS += target
} 
```

编译输出：

```
13:49:12: Running steps for project loadTestLib...
13:49:12: Configuration unchanged, skipping qmake step.
13:49:12: Starting: "/usr/bin/make" -w
make: Entering directory `/home/bonart/Workspace/test/loadTestLib-build-Desktop_Qt_5_0_1_GCC_64bit-_______'
/home/bonart/Qt5.0.1/5.0.1/gcc_64/bin/qmake -spec linux-g++-64 CONFIG+=debug CONFIG+=declarative_debug CONFIG+=qml_debug -o Makefile ../loadTestLib/loadTestLib.pro
make: Leaving directory `/home/bonart/Workspace/test/loadTestLib-build-Desktop_Qt_5_0_1_GCC_64bit-_______'
make: Entering directory `/home/bonart/Workspace/test/loadTestLib-build-Desktop_Qt_5_0_1_GCC_64bit-_______'
g++ -m64 -Wl,-rpath,/home/bonart/Qt5.0.1/5.0.1/gcc_64 -Wl,-rpath,/home/bonart/Qt5.0.1/5.0.1/gcc_64/lib -o loadTestLib main.o   -L./libs -L../libs/-ltest -L/home/bonart/Qt5.0.1/5.0.1/gcc_64/lib -lQt5Core -lpthread 
main.o: In function `main':
/home/bonart/Workspace/test/loadTestLib-build-Desktop_Qt_5_0_1_GCC_64bit-_______/../loadTestLib/main.cpp:7: undefined reference to `Test::Test()'
make: Leaving directory `/home/bonart/Workspace/test/loadTestLib-build-Desktop_Qt_5_0_1_GCC_64bit-_______'
collect2: ld returned 1 exit status
make: *** [loadTestLib] Error 1
13:49:12: The process "/usr/bin/make" exited with code 2.
Error while building/deploying project loadTestLib (kit: Desktop Qt 5.0.1 GCC 64bit)
When executing step 'Сборка' 
```

$ nm -D for my library 给了我：

```
w _Jv_RegisterClasses
                 U _Unwind_Resume
                 U _Z17qt_message_output9QtMsgTypeRK18QMessageLogContextRK7QString
                 U _ZN10QArrayData10deallocateEPS_mm
                 U _ZN11QTextStreamD1Ev
                 U _ZN11QTextStreamlsERK7QString
                 U _ZN11QTextStreamlsEc
0000000000000bb0 T _ZN4TestC1Ev
0000000000000bb0 T _ZN4TestC2Ev
0000000000000d90 W _ZN6QDebugD1Ev
0000000000000d90 W _ZN6QDebugD2Ev
                 U _ZN7QString15fromUtf8_helperEPKci
                 U _ZNK14QMessageLogger5debugEv
                 U _ZTISt9bad_alloc
                 U _ZdlPv
0000000000202080 A __bss_start
                 U __cxa_begin_catch
                 U __cxa_end_catch
                 w __cxa_finalize
                 w __gmon_start__
                 U __gxx_personality_v0
0000000000202080 A _edata
0000000000202090 A _end
0000000000000ec8 T _fini
00000000000009e8 T _init 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T19:27:13.797

您`LIBS`在 In loadTestLib.pro 中的行是错误的。它应该是

```
LIBS+=-L.. -ltest 
```

或者，为了清楚起见，您可以将其放在两行（并使用空格）

```
LIBS += -L..
LIBS += -ltest 
```

请注意，这将链接到 ../libtest.so。通常，您在构建时链接不带版本后缀的文件，并在运行时链接带有版本号的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T17:04:25.363

在 Windows 中，库的绝对路径和 .dll 的名称对我有用。在 Ubuntu 中，它也以相同的方式成功编译，但应用程序只有在将其放入 /usr/lib 时才能找到库

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T08:29:04.867

除了 Troubadour 所说的之外，您还应该告诉链接器它在哪里可以找到 lib。您可以在 .pro 文件中设置 QMAKE_LIBDIR，或者将包含您的库的目录添加到`/etc/ld.so.conf`并使用`ldconfig`命令。

# c++ - OpenGL使对象每N秒“跳跃”一次

> ID：16147487
> 
> 赞同：1
> 
> 时间：2013-04-22T12:47:09.890
> 
> 标签：c++, opengl

我正在尝试使我正在绘制的立方体看起来每隔几秒钟就会“跳跃”一次。这是我的代码：

```
 for (int i=0; i<25; i++)
            {
                if(j<rows)
                {

                    //Timer used in vibration calculation when drawing cubes
                    float time = (std::clock() - timer);
                    //Calculate the amount of simulated vibration based on amount of distortion (intensity)
                    float offset = sin(1.0f * 3.14159265359f * time) * shake;

                    //Draw cubes right and left of centre point
                    drawCube((x+xShift), y, (-300 +depth), 1.0f, cubeColour, offset);
                    drawCube((x-xShift), y, (-300 +depth), 1.0f, cubeColour, offset);
                    xShift -= gap;
                }
            } 
```

而drawCube代码是：

```
void drawCube(float x, float y, float z, float opacity, float col[], float offset)
{
    //Draw cube taking into account any offset caused by simulated vibration
    glTranslatef((-x+offset), (-y+offset), -z);
    glColor4f(col[0], col[1], col[2], opacity);
    glutWireCube(20);
    glTranslatef((x-offset), (y-offset), z);

} 
```

我假设我需要使用一个定时器，每 N 秒提高一次 y 值，所以立方体看起来会跳跃，但我不确定如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T16:03:22.457

您需要在调用中调整 y 坐标`drawCube`。这应该是基值 + 跳跃高度。

一次计算跳跃高度的一种简单方法`t`如下：设置一个随时间增加的变量（最好在 1 秒后增加 1）。您应该在 N 秒后重置此变量。所以变量从 0 运行到`N`。

该变量将作为跳跃高度计算的基础。如果定义`jumpDuration`为跳跃的持续时间和`jump_height`最大跳跃高度，则可以使用两个函数计算跳跃偏移：

```
jump_offset = 0 // if t > jump_duration
jump_offset = -4 * jump_height / jump_duration^2 * t^2 + 4 * jump_height / jump_duration * t // else 
```

# javascript - 为什么我得到 [object HTMLParagraphElement]

> ID：16147488
> 
> 赞同：7
> 
> 时间：2013-04-22T12:47:20.667
> 
> 标签：javascript

我是新手。这是我的代码：

```
<html>
  <head>
    <script type="text/javascript">
      function replyOne () {
        document.getElementById("comment_content").value = document.getElementById("username")
      }
    </script>
  </head>
  <body>
    <p id="username">Jack</p>
    <textarea id="comment_content" ></textarea>
    <button onclick="replyOne()">Copy Text</button>
  </body>
</html> 
```

我希望当我单击按钮时，它会将“Jack”复制到文本区域。但它只是写了“[object HTMLParagraphElement]”。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-22T12:47:58.650

它应该是：

```
document.getElementById("comment_content").value =
    document.getElementById("username").innerHTML 
```

如果没有`.innerHTML`，它将尝试复制实际元素，而不是其内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T13:07:40.380

您可以使用 textContent、innertext、innerHTML。但其中两个是特定于浏览器的，innerHTML 可以在三种主要浏览器上运行。

您也可以通过父子组合解析 dom 并获得所需的值。

```
 function replyOne () {
    document.getElementById("comment_content").value=document.getElementById("username").innerHTML;

    //OR 
    document.getElementById("comment_content").value=document.getElementById("username").textContent;

    } 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2021-03-09T07:27:47.463

**这是 [objectHTMLParagraphElement] 的解决方案，带有示例**

```
var sel = document.getElementById('ex').innerHTML; // without innerHTML this will 
comes [objectHTMLParagraphElement]
var txt = sel + "Hello";    
document.write(txt); // output Hello 
```

# linux - ./configure && 使安装失败

> ID：16147491
> 
> 赞同：8
> 
> 时间：2013-04-22T12:47:24.473
> 
> 标签：linux, rabbitmq, configure, autotools, pkg-config

早上好当我安装 RabbitMQ 库时，我发现了一个问题：

```
autoreconf -i && ./configure && make && sudo make install 
```

但是 ./configure 停在这个位置：

```
checking for gcc option to accept ISO C99... -std=gnu99
./configure: line 11104: syntax error near unexpected token `0.17'
./configure: line 11104: `PKG_PROG_PKG_CONFIG(0.17)' 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-22T14:14:14.880

您的 autotools 项目使用`pkg-config`，但似乎您根本没有安装它，或者您缺少`pkg.m4`提供`PKG_PROG_PKG_CONFIG`宏的“pkg-config <-> autotools”胶水（ ）。

如果这是真的，那么`autoreconf -i`应该在重新创建时抱怨`configure`（尽管可能只是作为非致命警告）-> 检查您的构建日志。

你应该可以通过安装来解决这个问题`pkg-config`

**注意**：通常，如果您遇到错误，最好将问题分解为子问题。因为您实际上是在调用四个不同的任务（`autoreconf`、`./configure`和`make`和`sudo make install`），所以您可能希望一个一个地执行它们并查看它实际失败的位置（在您的情况下：第二个任务），以及前面的步骤指示的内容（autoreconf-call ）。

# clojure - 为什么可以重新定义 Var（鉴于 FP 中的值是不可变的）？

> ID：16147493
> 
> 赞同：12
> 
> 时间：2013-04-22T12:47:36.287
> 
> 标签：clojure

我正在使用逆时针运行 REPL，但我也在 Leiningen 上注意到了这一点。

我可以调用 def 来定义一个 var 两次。例如，

```
=> (def a 1)
#'fractal.core/a
=> a
1
=> (def a 2)
#'fractal.core/a
=> a
2 
```

Clojure 是一种函数式编程语言，在 FP 中对象应该是不可变的。如果我能做到这一点，在什么意义上 a 是不可变的？

感谢您的任何评论。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-22T13:00:54.577

vars 的全部意义在于它们可以被反弹，因此得名：var -> variable。

从[文档](http://clojure.org/vars)：

> Clojure 是一种实用的语言，它认识到偶尔需要保持对变化值的持久引用。... Vars 提供了一种机制来引用可变存储位置，该存储位置可以在每个线程的基础上动态反弹（到新的存储位置）。

您不会通过重新绑定 var 来更改任何不可变值。

想想只是给一个不可变的值一个名字，然后给另一个不可变的值这个名字。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-22T13:15:50.557

重新`def`绑定 var（即设置根绑定，而不是临时/线程本地重新绑定）主要是为了成为开发工具。由于标准全局函数和值（用 def/defn 定义的）是基于 var 的，因此您可以重新定义它们而无需重新启动您正在编辑的 clojure 程序。

请注意， var*不是*值，它们明确旨在成为对值/函数的*可变引用。*

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-22T13:15:42.487

> 在 FP 中的对象应该是不可变的。

这是不正确的。

*纯*函数式编程要求变量是不可变的值。但是，Clojure 不是一种纯粹的函数式语言，它允许在任何地方出现无法跟踪的副作用。

在这方面，大多数函数式语言都是不纯的，因为它们不跟踪语言本身中出现的副作用，例如突变。

# asp.net-mvc - 未添加多对多关系

> ID：16147495
> 
> 赞同：0
> 
> 时间：2013-04-22T12:47:39.087
> 
> 标签：asp.net-mvc, entity-framework

我有两个实体，`Alpha`它们`Beta`之间有 M:M 关系。

我正在尝试添加一些`Beta`s 到`Alpha`这样的：

```
public ActionResult Edit(Alpha alpha)
{
  if (ModelState.IsValid)
  {
    var selectedBetaIds = //populated from checkboxes in the view

    var selectedBetas = db.Betas.Where(b => selectedBetaIds.Contains(b.Id));

    alpha.Betas.Clear();

    foreach (var b in selectedBetas)
      alpha.Betas.Add(b);

    db.Entry(alpha).State = EntityState.Modified;
    db.SaveChanges();
    return RedirectToAction("Index");
  }
  return View(alpha);
} 
```

但该表`AlphaBetas`没有添加任何条目和任何`alpha.Betas.Count() == 0`.

奇怪`db.SaveChanges()`的是，在上述方法之后，在调试中，`Betas`按预期填充。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T13:27:42.647

该属性`alpha.Betas`必须启用延迟加载。即它应该是虚拟和延迟加载，并且代理生成一定不能在上下文中关闭。

原因是 EF 必须知道“旧”集合才能检测到它的后续更改。

如果集合是延迟加载，语句`alpha.Betas.Clear();`会先加载集合，然后立即清除。（`alpha`此时必须已附加到上下文中）。

如果您不希望它延迟加载，则必须先手动加载它：

```
context.Entry(alpha).Collection(x => x.Betas).Load(); 
```

在删除/添加项目之前。

设置`EntityState.Modified`不起作用，因为它只影响标量属性（无导航属性）。`alpha`如果对自身没有更改，则可以删除该语句。但是你仍然必须附加`alpha`到上下文中。

# jquery - jquery 事件的调用顺序是什么？

> ID：16147498
> 
> 赞同：3
> 
> 时间：2013-04-22T12:47:42.393
> 
> 标签：jquery, html, ajax

我正在使用这个 HTML：

`<a href="#" class="topHierarchy big-link" data-reveal-id="myModal" >`

“topHierarchy”和“big-link”都用于添加jquery 事件处理程序（onClick）。

`big-link`用于显示弹出框。而`tophierarchy`用于将数据放入弹出窗口中的 div 中。

但是当我点击那个链接时，弹出窗口首先出现，然后数据变为 div。

那么有没有办法对 jQuery 触发的事件进行排序呢？首先`tophiearchy`应该触发事件，然后`big-link`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T12:56:07.313

我认为在 jQuery 中“回调按添加顺序执行”。

也许你可以尝试这样的事情：

```
<a href="#" class="big-link topHierarchy" data-reveal-id="myModal" > 
```

您也可以在此处发布您的 JS 代码，以查看您如何以及以什么顺序定义了相应的方法。

# java - 过滤仅具有相交数据的 ArrayList

> ID：16147505
> 
> 赞同：0
> 
> 时间：2013-04-22T12:47:58.867
> 
> 标签：java, collections, guava

我有以下课程：

```
public class School{
    List<ClassRoom> classRooms;
}

public class ClassRoom{
    List<Student> students;
}

public class Student{
    String name;
    List<Long> typeIdList;
} 
```

我只需要得到`typeId`给定教室中所有学生的共同因素。

为了能够让 typeID=123 的给定教室中的所有学生，我执行以下操作：

```
final long typeIdToSearchFor = ...;
Collection<Student> filtered = Collections2.filter(students,
    new Predicate<Student>() {
        @Override
        public boolean apply(Student s) {
            return s.typeId == typeIdToSearchFor;
        }
    }
); 
```

只是想知道番石榴是否可以处理这样的事情？通过交集，我的意思是它必须在所有实例中出现才能考虑这种类型。

我知道`for`循环会更具可读性，但我只是发现了 Guava 功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T08:37:28.243

您可以使用[`Multiset`](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/index.html?com/google/common/collect/Multiset.html)可以计算出现次数的 a：

```
ClassRoom classRoom = /* comes from somewhere */;
List<Student> students = classRoom.getStudents();

// Aggregate all the typeIds.
Multiset<Long> typeIds = HashMultiset.create();
for (Student student : students) {
    // Assuming a student doesn't have duplicated typeIds:
    typeIds.addAll(student.getTypeIds());
}

// Find which typeIds are present for all the students.
for (Multiset.Entry<Long> entry : typeIds.entrySet()) {
    if (entry.getCount() == students.size()) {
        System.out.println(entry.getElement());
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T13:00:49.667

如果您尝试检查所有`Student`s 是否具有特定的`typeId`，`Iterables.all`请与您现有的谓词一起使用。

您还可以创建一个由它们使用索引的`Multimap`of s ：`Student``typeId``Multimaps.index()`

```
Multimap<Long, Student> studentsByTypeId = Multimaps.index(students, new Function<Student, Long>() {
  public Long apply(Student s) {
    return s.typeId;
  }
}; 
```

然后您可以`typeId`使用`studentsByTypeId.keySet()`.

`typeId`您可以使用.检查它们是否都共享相同的内容`studentsByTypeId.keySet().size() == 1`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T13:04:32.530

如果您想要相交的那些，则不应与特定的进行比较，您至少应该检查它是否包含在另一个集合的 id 中。像这样：

```
new Predicate<Student>() {
    @Override
    public boolean apply(Student s) {
        return otherIds.contains(s.typeId);
    }
} 
```

但是我仍然认为，如果您对两个集合都执行二进制搜索（在订购它们之后），您可以更快地得到答案。像这样的东西

```
Collections.sort(list1);
Collections.sort(list2);

List<E> intersected = new ArrayList<E>();

for(E element : list1){
    if(Collections.binarySearch(list2, element) >= 0){
        intersected.add(element);
    }
} 
```

你甚至可以找到最小的列表。它可以帮助它获得一些性能。

# xml - 如何向此元素添加属性（架构）

> ID：16147506
> 
> 赞同：0
> 
> 时间：2013-04-22T12:47:59.473
> 
> 标签：xml, schema

我有以下架构元素，我想向它添加一个属性。

```
<xsd:ComplexType>
    <xsd:sequence>    
       <xsd:element name="Product" maxOccurs="1" minOccurs="0" >
        <xsd:simpleType>
            <xsd:restriction base="xsd:string">
                <xsd:maxLength value="100" />
            </xsd:restriction>
        </xsd:simpleType>
        </xsd:element>
    </xsd:sequence>
</xsd:ComplexType> 
```

现在生成的 XML 如下所示：

```
<Product>This is the Product Translation for 001</Product> 
```

我希望生成的 XML 看起来像：

```
<Product code="001">This is the Product Translation for 001</Product> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T13:43:57.803

this should do the trick:

```
<xsd:ComplexType>
    <xsd:sequence>    
        <xsd:element name="Product" maxOccurs="1" minOccurs="0" >
            <xsd:complexType>
                <xsd:restriction base="xsd:string">
                    <xsd:maxLength value="100" />
                </xsd:restriction>
                <xsd:attribute name="code" type="xs:string" use="required"/>
            </xsd:complexType>
        </xsd:element>
    </xsd:sequence>
</xsd:ComplexType> 
```

you might wish to specify a different type for the attribute `code`.

# sql - 根据天数返回日期行

> ID：16147509
> 
> 赞同：0
> 
> 时间：2013-04-22T12:48:03.237
> 
> 标签：sql, sql-server-ce

我正在使用`SQL Compact`并且目前正在尝试根据日期时间列返回一组行。我只想返回**5 天或更长时间**的行。

我的第一个想法是这样做： `select * from table where datepart(month, dateCol) < datepart(month, getdate())`

就我的 Sql-Ce 知识而言，上面的陈述是我所能接受的。不幸的是，一旦你到了月初，上面的例子就不能很好地工作了。

关于如何根据特定天数返回行的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T12:49:23.980

```
select * from table where dateCol < dateadd(day, -5, getdate()) 
```

请参阅[SQL Server Compact 的 DATEADDD](http://technet.microsoft.com/en-us/library/ms174470.aspx)

编辑，评论后

```
select * from table where
         dateCol < dateadd(day, -(5+DATEPART(DAY, getdate())), getdate()) 
```

# joomla - 如何在 Joomla 中获取 JMenu 标题

> ID：16147511
> 
> 赞同：0
> 
> 时间：2013-04-22T12:48:24.023
> 
> 标签：joomla, jmenu

我有一个 JMenu 对象（来自 Joomla 2.5 中的标准 mod_menu），但我不知道如何检索它的标题，有人知道该怎么做吗？我以这种方式检索了我的活动菜单：

```
$menu = $app->getMenu(); 
```

获取每个菜单项或模块参数很容易，但似乎无法获取菜单标题。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T13:18:13.333

我没有对此进行测试，但感觉它可能会起作用：

```
jimport( 'joomla.application.module.helper' );
$module = JModuleHelper::getModule( 'mod_menu' );
echo $module->title; 
```

如果模块的实例不止一个，那么您可以通过声明模块的 ID 来更具体：

```
$module = JModuleHelper::getModule( 'mod_menu', '88' ); //change 88 to the ID that applies for you 
```

希望这可以帮助

# dart - 如何在 web 文件夹中组织 dart 代码

> ID：16147520
> 
> 赞同：5
> 
> 时间：2013-04-22T12:49:00.407
> 
> 标签：dart, dart-pub

根据[包布局约定](http://pub.dartlang.org/doc/package-layout.html#web-files)，该`web`文件夹应包含以下内容：

> HTML、CSS、图像，甚至可能还有一些 JavaScript。所有这些都进入你的包的 web 目录。您可以随意组织其中的内容。如果这让你开心的话，就疯狂地使用子目录。

所以我的`web`目录看起来像这样：

```
web/data_access
web/model
web/ui
web/ui/navigation
etc. 
```

现在，我如何管理所有这些导入语句。我得到很多陈述，例如：

```
import '../../model/my_model.dart';
import '../../data_access/mock_dao.dart';
etc. 
```

我不喜欢`../`在我的导入中使用那么多，因为这很脆弱，每当我更改文件夹结构中的任何内容时都会遇到问题。

**有没有更好的方法来组织`web`文件夹内的代码？**

或者

**还有其他方法可以进行导入吗？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T21:57:32.353

我将几乎所有应用程序的代码都放入 lib 中，以避免您遇到的问题。这甚至适用于 Web 组件。

从 widget.dart 查看这个组件：[https ://github.com/kevmoo/widget.dart/tree/master/lib/components](https://github.com/kevmoo/widget.dart/tree/master/lib/components)

我通常只将 app.dart 放入 web/，它只是从 lib 中拉入库并初始化应用程序。

请参阅此应用程序示例，该应用程序拉入具有组件的 pub 包：[https ://github.com/sethladd/catpic-app](https://github.com/sethladd/catpic-app)

这就是我的 HTML 文件的样子。注意路径中包含的包：

```
<!DOCTYPE html>
<html>
<head>
  <title>Your life is complete</title>
  <link rel="components" href="packages/catpic/components/cat_pic.html">
  <link rel="components" href="packages/frame/components/frame.html">
  <link rel="stylesheet" href="styles.css">
</head> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-22T13:13:20.167

很不幸的是，不行。有一个开放的[功能请求](http://code.google.com/p/dart/issues/detail?id=9289)解决了这个问题，但实现它可能需要一段时间。解决此问题的最佳方法是将多个类捆绑到一个文件中，或者将多个文件捆绑到一个库中——有效地减少导入语句的数量。我什至使我的整个应用程序成为一个带有`part of`语句的大型库，这样我就不必处理导入语句。虽然这并不能消除潜在的问题，但它现在有效。

此外，在更改文件夹结构时重构而不是简单地重命名会影响导入语句，从而消除手动调整它们的痛苦。

可以将 Web 组件导入到库中，然后使用语句重新导出`export`，从而将它们捆绑到单个导入中。

# javascript - 单击带有锚点的链接 # 不 会转到页面顶部

> ID：16147522
> 
> 赞同：0
> 
> 时间：2013-04-22T12:49:03.513
> 
> 标签：javascript, html

我有一个链接如下

```
<a href='#'>click to update the page</a> 
```

链接的作用是触发 JavaScript 代码来更新 div 的内容而不发回服务器。问题是，当我单击链接时，由于 `href='#'`. 是否可以避免这种运动？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T12:50:35.133

又快又脏。

```
<a href='javascript:void(0)'> 
```

您也可以使用 CSS 来模拟超链接手，而无需使用`<a>`.

```
cursor: pointer; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T12:50:49.180

尝试 ：

```
<a href='javascript:void(0)'>click to update the page</a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T12:51:08.927

您可以通过以下代码避免发布链接：

```
<a href='javascript:void(0);'>click to update the page</a> 
```

使用它页面不会被刷新。

# javascript - 设置谷歌分析analytics.js以在页面加载时发送事件的问题

> ID：16147524
> 
> 赞同：1
> 
> 时间：2013-04-22T12:49:06.457
> 
> 标签：javascript, events, google-analytics, analytics.js

我正在尝试设置一个在页面加载时发生的分析事件，如果页面上没有其他 js，我将通过 window.onload 触发该事件，如果加载了 jQuery，则通过 $(document).ready() 触发该事件。

分析加载并正常工作，并且正在使用**analytics.js**（不是 ga.js）。当我尝试将事件发送回分析时，我使用此命令

```
ga('send', 'event',    {'hitType': 'event',
                        'page': '/checkout/', 
                        'eventCategory': 'Forms',
                        'eventAction': 'formload',  
                        'eventLabel': 'Loaded checkout form correctly'}); 
```

当我查看分析仪表板时，它告诉我有 2 次访问发送了事件，但是所有其他事件的统计数据都是 0。所以本质上我没有得到任何记录。

请帮忙....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T14:13:06.000

您的代码对我来说工作正常。我假设仪表板您指的是实时仪表板？如果它在那里显示得很好，包括你正在传递的维度，那么你一切都很好。

我会说给它几天，GA Universal 处理速度很慢。

# php - 将随机数分配给保持不变的标题

> ID：16147530
> 
> 赞同：0
> 
> 时间：2013-04-22T12:49:15.763
> 
> 标签：php, xml, random, rss

我目前正在从 RSS Feed ( [http://feeds.bbci.co.uk/news/rss.xml](http://feeds.bbci.co.uk/news/rss.xml) ) 中提取 XML。RSS 提要具有以下标签：

```
//Title of the item
<title><?php echo($item->title); ?></title>

<?php $numbers = rand(100000,999999); ?>
<ID>?php echo $numbers; ?></ID> 
```

生成时的 ID 号工作正常，但是当刷新 php 时它会更改，因此每个项目没有恒定的 ID。有没有一种方法可以使随机生成的数字在刷新时也保持不变？或者有没有一种方法可以将随机数分配给特定的标题？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T12:57:03.163

RSS 提要没有随机 ID。您正在插入一个随机 ID，您希望它不是随机的。（我什至不知道你为什么要身份证。）

如果您只是从他们的 guid 中获取数字，您将拥有一个可以满足您需求的唯一 ID。你现在只有一个假身份证。

补充：在任何明智的项目中，ID 都很少是“随机的”。您想要一个保持不变的 ID。大概，您也不希望两个故事具有相同的 ID。因此，您需要的不是随机数，而是为每个新条目分配一个看起来随机的数字。

没有数据库就无法做到这一点（尽管您可以使用平面文件数据库）。该表需要两列 - “ArticleID”和“RandomID”。

您需要在提要中找到一个唯一且不会更改的项目，以便您可以再次识别它。新闻标题确实会发生变化，因此 BBC 的 GUID 中的数字应该是您最好的选择。

然后您需要做的是获取此 ArticleID 编号和数据库查询以获取匹配的行以获取现有的 RandomID。如果没有，请继续以您当前的方式生成一个随机数并检查 RandomID 是否已被使用，直到找到一个新的未使用的随机数。然后插入一个带有 ArticleID 和 RandomID 的新行，将新的 RandomID 用于任何疯狂的目的。

您还可以提前生成一组未使用的随机数。您可能还希望引入日期戳或自动增量 ID，以便在最终需要时更轻松地删除旧文章/随机 ID 组合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T13:01:05.483

您可以将号码存储在会话中，或者如果您想将其永久存储在每个用户的文件或数据库中。

这样做的问题是，您需要将存储的 ID 与来自 RSS 提要的项目链接起来，因为提要中的所有标签内容都可能发生变化，所以您无法可靠地做到这一点。

在某种程度上，它将项目标题和随机生成的 ID 存储在文件（或数据库）中，然后刷新后，根据项目标题从文件中取出 ID（再次：或数据库）再次。但是如果项目的标题发生变化，脚本就不能再将任何 ID 与其关联。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T12:52:36.360

为什么不把它保存在会话中？

```
session_start();
$_SESSION['numbers'] = rand(100000, 999999); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T12:53:52.780

一次创建一个号码并将其存储在“永久”位置。这可以是 Session、Cookie 或在数据库中。我无法为您选择，因为我没有足够的信息来决定 3 个选择中的哪一个最适合您

# php - Zend Framework 2 - ZFCUser 操作白名单不适用于重新路由

> ID：16147533
> 
> 赞同：1
> 
> 时间：2013-04-22T12:49:22.520
> 
> 标签：php, authentication, zend-framework2, zend-route, zfcuser

我正在使用[此功能](https://stackoverflow.com/a/15897551/1331671)将 ZFCUser 登录中的一些操作列入白名单。

除非我重定向到这些列入白名单的页面之一，否则一切都很好。例如`myFormAction`，如果表单无效，我会将其重新路由到自身或`successAction`.

现在的问题是，在任何这些情况下单击按钮后，我最终都会看到 ZFCUser 登录。当我第一次通过 URL 或链接访问其中一个页面时，它可以工作。

这是我在以下两种情况下的代码`myFormAction`：

*失败：*

```
return array('myVar' => $myVar); 
```

*成功：*

```
return $this->redirect()->toRoute('myModule', array('action' => 'Success')); 
```

有什么想法我可能做错了吗？可能是重新路由没有通过`onBootstrap`函数并且 ZFCUser 在其他地方阻止它？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T07:04:42.813

好吧，那是一个愚蠢的！

我的链接 url 中有一个错误，由于`ZFCUser`' 重定向而没有显示！

登录显示真实路径并显示错误...

# c# - 如何获取 MVC 上单击的 Gridview 行的值

> ID：16147536
> 
> 赞同：-2
> 
> 时间：2013-04-22T12:49:26.760
> 
> 标签：c#, asp.net-mvc, gridview

我正在开发一个 MVC 项目。我需要解决的问题是如何通过单击按钮获取 Gridview 上选定行的值（id 或 somthing）。

可以通过 CheckBox 或单击行来选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T12:59:25.460

试试下面的代码：

```
 string val="";
    for (int i = 0; i < GridView1.SelectedRows.Count; i++)
    {
       val=GridView1.SelectedRows[i].Cells[0].Value;
    } 
```

希望它有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T12:53:56.550

尝试这个 ：

```
txtid .Text  = Gridview1.SelectedRow.Cells[1].Text; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T12:54:16.573

尝试使用该`GridView.SelectedIndex`值指向选定的行。然后使用`GridView1.Rows[SelectedIndex].Cells[1].Text`获取单元格内的值。

# jquery - 带有 PhoneGap 的 Kendo UI 未初始化

> ID：16147537
> 
> 赞同：0
> 
> 时间：2013-04-22T12:49:29.410
> 
> 标签：jquery, html, cordova, mobile, kendo-mobile

我有一个超级基本的 PhoneGap iOS 解决方案，但似乎 Kendo UI 没有初始化。我正在使用带有 PhoneGap 2.6 的 Kendo UI Mobile 2013 Q1 build

我似乎无法发现问题。

这是我的代码

```
 <!DOCTYPE html>
<!--
 Licensed to the Apache Software Foundation (ASF) under one
 or more contributor license agreements.  See the NOTICE file
 distributed with this work for additional information
 regarding copyright ownership.  The ASF licenses this file
 to you under the Apache License, Version 2.0 (the
 "License"); you may not use this file except in compliance
 with the License.  You may obtain a copy of the License at

 http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing,
 software distributed under the License is distributed on an
 "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 KIND, either express or implied.  See the License for the
 specific language governing permissions and limitations
 under the License.
 -->
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="format-detection" content="telephone=no" />
        <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />
        <link rel="stylesheet" type="text/css" href="css/index.css" />
        <title>Hello World</title>

        <script type="text/javascript" src="cordova-2.6.0.js"></script>
        <script type="text/javascript" src="js/index.js"></script>
        <script src="js/jquery.min.js"></script>
        <script src="js/kendo.mobile.min.js"></script>
        <script type="text/javascript" src="js/kendo.all.min.js"></script>
        <script src="js/custom.js"></script>
        <script src="js/datasource.js"></script>
        <script type="text/javascript" src="js/script.js"></script>
        <link href="styles/kendo.common.min.css" rel="stylesheet" />
        <link href="styles/kendo.bootstrap.min.css" rel="stylesheet" />
        <link href="styles/kendo.common.min.css" rel="stylesheet" type="text/css">
        <link href="styles/kendo.mobile.all.min.css" rel="stylesheet" type="text/css">
        <link href="styles/styles.css" rel="stylesheet" type="text/css">

    </head>
    <body>
        <div data-role="view" id="main">
            <a href="#page2" data-role="button">Go to Page 2</a>
        </div>
        <div data-role="view" id="page2">
            My Page 2
        </div>

        <script type="text/javascript">
            //cordovaApp.initialize();
        </script>

        <script>
            document.addEventListener("deviceready", onDeviceReady, false);

            function onDeviceReady() {
                app = new kendo.mobile.Application() {
                    transition: "slide",
                    platform: "ios"
                }

            </script>

     </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T18:20:11.007

好的，想通了：

```
<script type="text/javascript">
            $(function() {
              document.addEventListener("deviceready", onDeviceReady, false);
              function onDeviceReady() {
              // Now safe to use the Cordova API
              var app = new kendo.mobile.Application()
              }

              }); 

            </script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T14:19:10.183

在您的脚本参考中，您使用的是 kendo.mobile.min.js 和 kendo.all.min.js。只有一个必须使用，因为 mobile.min.js 中的所有内容都在 kendo.all.min.js 中，它会弄乱整个应用程序。删除 kendo.mobile.min.js 后，您的应用程序应该可以运行了。

# java - QueryDsl，结合标准 JPA 和 Hibernate 的 - 类级别 @Where 注释？

> ID：16147541
> 
> 赞同：2
> 
> 时间：2013-04-22T12:49:50.540
> 
> 标签：java, hibernate, jpa, annotations, querydsl

我想知道我是否可以将休眠注释，特别是那些类级别的注释与 QueryDsl 中的标准 JPA 注释结合起来。像这样...

```
 @javax.persistence.Entity
 @org.hibernate.annotations.Where(clause="someProperty = (SELECT ....)")
 @javax.persistence.Table(name="anyname")
 public class SomeClass {...
 } 
```

目前我们只使用 JPA 注释，但我们也必须合并一些休眠注释。

在apt插件配置中用“HibernateAnnotationProcessor”替换“JPAAnnotationProcessor”是否安全？*)

```
 <plugin>
            <groupId>com.mysema.maven</groupId>
            <artifactId>apt-maven-plugin</artifactId>
            <version>1.0.8</version>
            <executions>
                <execution>
                    <phase>generate-sources</phase>
                    <goals>
                        <goal>process</goal>
                    </goals>
                    <configuration>
                        <outputDirectory>target/generated-sources/java</outputDirectory>
                          <processor>com.mysema.query.apt.hibernate.HibernateAnnotationProcessor</processor>
                        <sourceDirectory>src/gen/java</sourceDirectory>
                    </configuration>
                </execution>
            </executions>
        </plugin> 
```

*) 但是，在将注释处理器替换为“HibernateAnnotationProcessor”后，我没有注意到生成的 JPA 查询有任何变化。是因为我仍在使用显然不承认任何休眠细节的 JPA？

```
 JPAQuery query = new JPAQuery (this.emf.createEntityManager()); 
```

我是否也需要切换到休眠会话？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T13:05:16.343

Querydsl`HibernateAnnotationProcessor`仅用于确定字段和/或方法中是否存在相关注释。

如果仅对字段进行注释，则将它们用作属性，如果仅对 getter 进行注释，则使用它们。如果两者都使用，getter info 会覆盖字段信息。

对于类级别的注释，如果您的类主要使用 JPA 注释进行注释，则使用一个处理器或另一个处理器没有区别。

使用的注释处理器不会影响您的实体类型在 JPAQuery 中的处理方式。

# iphone - 活体障碍物检测 iPhone 摄像头 - Objective c

> ID：16147542
> 
> 赞同：0
> 
> 时间：2013-04-22T12:49:51.443
> 
> 标签：iphone, ios, objective-c, image-processing, uiimagepickercontroller

我需要在我的相机应用程序中创建一个清晰的区域功能。参考链接[http://www.flickr.com/photos/95148356@N02/8671004387/in/photostream](http://www.flickr.com/photos/95148356@N02/8671004387/in/photostream)中上传的图片，我需要在白色区域没有任何障碍物的情况下拍摄背景图片。在白色区域中，我需要放置另一个来自另一个来源的图像，比如 Kinect 相机图像左右。我的目标是在我的相机应用程序中的相对区域添加实时障碍物检测。如果某些对象出现在相对区域，如岩石或树木或类似的东西，我的应用程序应该向用户发出警报，说检测到障碍物或应该弹出“清除此区域”之类的消息。图片不应该与相对区域内的物体一起拍摄。

谁可以帮我这个事？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T19:36:52.267

这个问题的答案远远超出了问题的范围。使用内置的 iPhone 摄像头实现这一点是一回事，但使用外部实时摄像头源（如 Kinect）需要广泛的知识，即在实时 AVCaptureSession 摄像头视图之上覆盖 UIView，同时处理来自网络源的实时图像。你需要一步一步来解决这个问题。

AVCaptureSession 将处理相机实时馈送。OpenCV 可以处理实时视图的对象识别。联网这将完全取决于您的需求。

祝你好运，我希望这至少能有所帮助！

# javascript - 显示包含来自动态 url 的内容的覆盖 iframe

> ID：16147545
> 
> 赞同：2
> 
> 时间：2013-04-22T12:49:58.067
> 
> 标签：javascript, jquery

我一直在尝试实现与该网站类似的效果：[http://www.dubstep.net](http://www.dubstep.net)
如果您在任何播放器上单击播放或标题，您将看到一个窗口出现，具有叠加效果。这样的窗口是 iframe。通过查看页面源，我可以理解该`data-id=""`属性负责 iframe 中显示的内容。我只是不知道怎么做。当用户点击播放按钮时会发生什么？以及如何使用 data-id 属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T13:01:01.657

这是一个相当简单的过程。他们将 HTML 响应预先构建到对 的请求中`www.dubstep.com/track/trackNumber`，其中`trackNumber`是一个参数。所以在服务器端，有一个`RewriteRule`定义`nginx`（他们`nginx`用作服务器，通过`curl -V`“指纹”判断）。

所以基本上`www.dubstep.com/track/4567`是等价的`www.dubstep.com/track/index.php?trackNumber=4567`。

现在 an`iframe`是一种加载和显示外部页面的方法。他们这样做的方式类似于这个想法：

```
$('.track').click(function(event) {// assuming track divs have class .track.
    var iframe = document.createElement('iframe');
    iframe.src = "//www.dubstep.com/track/" + event.target.getAttribute("data-id");// this uses the data-id attribute of the clicked item.
    iframe.height = // some computed height;
    iframe.width = // some computed width;
    iframe.name = "whatever";
    iframe.style.display = "none;"
    // or
    iframe.style.visibility = "hidden";

    document.getElementsByTagName('body')[0].appendChild(iframe); // element is inserted somewhere in the DOM.
    // Now some form of transition is applied.
    }); 
```

被`iframe`包裹在两个模态`div`元素内，用于显示目的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T20:18:39.823

您可以使用 jquery 颜色框。这很酷！

[http://www.jacklmoore.com/colorbox/](http://www.jacklmoore.com/colorbox/)

之后包括您的脚本位置和 css 文件

```
<script src="colorbox_folder/jquery.colorbox.js"></script>
<link rel="stylesheet" href="colorbox_folder/colorbox.css" />

 <a href="http://www.google.com" onclick="callingIframe()">Go to Google</a> 
```

这是javascript函数

```
function callingIframe()
{
  $(".iframe").colorbox({iframe:true,onClosed:function(){ location.reload(true); },             width:"940", height:"650"});
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T12:54:00.130

iFrame 加载外部页面。所有这些数据都是从 .html（或等效）页面中提取的。使用 data-id 属性不会告诉你太多，因为它肯定是在服务器端处理的，作为收集和显示某些曲目或其他任何东西的一种手段（换句话说，这不会告诉你很多关于列出的网站及其方式作品）。

阅读框架：

[http://www.w3.org/TR/html4/present/frames.html](http://www.w3.org/TR/html4/present/frames.html)

# android - 为什么我在访问电子表格时遇到网络主线程异常？

> ID：16147546
> 
> 赞同：2
> 
> 时间：2013-04-22T12:50:07.733
> 
> 标签：android, networking, spreadsheet

我遇到了很多例外，比如 NetworkMainthread。是的，我已按照[https://developers.google.com/google-apps/spreadsheets/中的步骤进行操作](https://developers.google.com/google-apps/spreadsheets/)

```
public class MainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    String USERNAME = "xyz@gmail.com";
    String PASSWORD = "rrrrrrr";

    URL SPREADSHEET_FEED_URL = null;
    try {
        SPREADSHEET_FEED_URL = new URL("https://spreadsheets.google.com/feeds/spreadsheets/private/full");
        /*https://spreadsheets.google.com/feeds/spreadsheets/public/full");*/
    } catch (MalformedURLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    SpreadsheetService service = new SpreadsheetService("MySpreadsheetIntegration-v1");
    service.setProtocolVersion(SpreadsheetService.Versions.V3);
    try {
        service.setUserCredentials(USERNAME, PASSWORD);
    } catch (AuthenticationException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    SpreadsheetFeed feed = null;
    try {
        feed = service.getFeed(SPREADSHEET_FEED_URL,SpreadsheetFeed.class);
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (ServiceException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    List<SpreadsheetEntry> spreadsheets = feed.getEntries();
    SpreadsheetEntry spreadsheet = spreadsheets.get(0);
    System.out.println(spreadsheet.getTitle().getPlainText());
    WorksheetFeed worksheetFeed = null;
    try {
        worksheetFeed = service.getFeed(
                spreadsheet.getWorksheetFeedUrl(), WorksheetFeed.class);
    } catch (IOException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    } catch (ServiceException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    }
        List<WorksheetEntry> worksheets = worksheetFeed.getEntries();
        WorksheetEntry worksheet = worksheets.get(0);

        URL listFeedUrl = worksheet.getListFeedUrl();
        ListFeed listFeed = null;
        try {
            listFeed = service.getFeed(listFeedUrl, ListFeed.class);
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (ServiceException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

       List<ListEntry> list = listFeed.getEntries();

        for (ListEntry row : list) {
            System.out.println(row.getTitle().getPlainText() + "\t" + row.getPlainTextContent());
        }
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.main, menu);
    return true;
} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T13:01:31.010

NetWorkOnMaiNThread 发生异常是因为您试图在主 UI 线程中进行网络相关操作。这是不可能的。

[http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html](http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html)

如果持续时间很短，您可以使用 asynctask。

[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

来自上述链接的报价

**理想情况下，AsyncTasks 应该用于短操作（最多几秒钟。）**

您可以在 onPreExecute() 中显示进度对话框。在 doInBackground() 中执行网络相关操作。但是不要从 doinBackground() 更新 ui （ doInbackground() 在后台线程上运行）。在 doInBACKground() 中返回结果。doInBackground() 的结果是 onPostExecute() 的参数。在 onPostExecute() 关闭对话框并相应地更新 ui。

您还可以创建一个线程并进行网络相关操作。如果您创建线程，则需要注意不要从线程更新 ui。ui 应该在主 ui 线程上更新。

[http://developer.android.com/reference/java/util/concurrent/Executor.html](http://developer.android.com/reference/java/util/concurrent/Executor.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-22T12:55:08.503

看看这篇文章 - [https://developer.android.com/training/basics/network-ops/connecting.html#AsyncTask](https://developer.android.com/training/basics/network-ops/connecting.html#AsyncTask)。
从 Android 4.0 开始，所有网络请求都应该在单独的线程中执行，否则会发生异常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T13:17:56.873

Android 3.0 以后的主 UI 线程不支持网络调用。您可以使用 Thread 或 AsyncTask 来实现网络调用。

谢谢

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-02T13:22:19.350

不建议这样做，但有帮助..

```
if (android.os.Build.VERSION.SDK_INT > 9) {
                StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
                StrictMode.setThreadPolicy(policy);
            } 
```

# php - 警告：无法修改标头信息 - 标头已由

> ID：16147548
> 
> 赞同：1
> 
> 时间：2013-04-22T12:50:09.930
> 
> 标签：php, header

每当我尝试更改某些内容时，我都会收到标题中提到的错误。我试着查了一下，但我真的不明白我找到的答案。导致此错误的原因以及如何修复它。例如，我尝试更改一个 href 链接，但我得到了这个错误，不知道是什么原因造成的。在我认为它与您的 php 代码标头的顺序有关之前，应该始终位于正文之前，之后您将无法再更改标头。但是，如果像 href 链接这样的小东西会导致它，那么就会发生其他事情。

> 警告：无法修改标头信息 - 标头已由（输出开始于 /home/nieuwsman/domains/cdwp.publiceer.net/public_html/wp-content/themes/wpoupon_mollie/ideal.class.php:1）在 /home/ nieuwsman/domains/cdwp.publiceer.net/public_html/wp-content/themes/wpoupon_mollie/functions.php 在第 28 行

```
function wpoupon_redirect_to_mollie() {

    require_once('ideal.class.php');

    if (!in_array('ssl', stream_get_transports()))
    {
        echo "<h1>Foutmelding</h1>";
        echo "<p>Uw PHP installatie heeft geen SSL ondersteuning. SSL is nodig voor de communicatie met de Mollie iDEAL API.</p>";
        exit;
    }

    $partner_id  = 823997; 
    $amount      = $_POST['amount']; 
    $description = $_POST['item_name'];
    $return_url  = $_POST['return'];
    $report_url  = $_POST['notify_url'];

    $iDEAL = new iDEAL_Payment($partner_id);
    //$iDEAL->setTestMode();

    if (isset($_POST['bank_id']) and !empty($_POST['bank_id'])) 
    {
        if ($iDEAL->createPayment($_POST['bank_id'], $amount, $description, $return_url, $report_url)) 
        {           
            header("Location: " . $iDEAL->getBankURL());
            exit;   
        } else {
            echo $iDEAL->getErrorMessage();
        }
    }

} 
```

例如第 28 行的错误

但我不想只修复一段代码，我想知道它是如何工作的。

理想类.php

```
<?php
/*-----------------------------------------------------------------------
  Start              : 24 februari 2009
  Door               : Mollie B.V. (RDF) © 2009

  Versie             : 1.13 (gebaseerd op de Mollie iDEAL class van
                       Concepto IT Solution - http://www.concepto.nl/)
  Laatste aanpassing : 18-04-2011
  Aard v. aanpassing : Ondersteuning voor het nieuwe 'status' veld
  Door               : MK
    -----------------------------------------------------------------------*/

class iDEAL_Payment
{
protected $bank_id         = null;
protected $amount          = 0;
protected $description     = null;
protected $return_url      = null;
protected $report_url      = null;

protected $bank_url        = null;
protected $payment_url     = null;

protected $transaction_id  = null;
protected $paid_status     = false;
protected $consumer_info   = array();

protected $error_message   = '';
protected $error_code      = 0;

protected $api_host        = 'ssl://secure.mollie.nl';
protected $api_port        = 443;

public function __construct ($partner_id, $api_host = 'ssl://secure.mollie.nl', $api_port = 443)
{
    $this->partner_id = $partner_id;
    $this->api_host   = $api_host;
    $this->api_port   = $api_port;
}

// Haal de lijst van beschikbare banken
public function getBanks()
{
    $query_variables = array (
        'a'          => 'banklist',
        'partner_id' => $this->partner_id,
    );

    if ($this->testmode) {
        $query_variables['testmode'] = 'true';
    }

    $banks_xml = $this->_sendRequest (
        $this->api_host,
        $this->api_port,
        '/xml/ideal/',
        http_build_query($query_variables, '', '&')
    );

    if (empty($banks_xml)) {
        return false;
    }

    $banks_object = $this->_XMLtoObject($banks_xml);

    if (!$banks_object or $this->_XMlisError($banks_object)) {
        return false;
    }

    $banks_array = array();

    foreach ($banks_object->bank as $bank) {
        $banks_array["{$bank->bank_id}"] = "{$bank->bank_name}";
    }

    return $banks_array;
}

// Zet een betaling klaar bij de bank en maak de betalings URL beschikbaar
public function createPayment ($bank_id, $amount, $description, $return_url, $report_url)
{
    if (!$this->setBankId($bank_id) or
        !$this->setDescription($description) or
        !$this->setAmount($amount) or
        !$this->setReturnUrl($return_url) or
        !$this->setReportUrl($report_url))
    {
        if (!$this->setAmount($amount))
            $this->error_message = "Error! Minimal Amount to pay: ". self::MIN_TRANS_AMOUNT;
        else
            $this->error_message = "De opgegeven betalings gegevens zijn onjuist of incompleet.";
        return false;
    }

    $query_variables = array (
        'a'           => 'fetch',
        'partnerid'   => $this->getPartnerId(),
        'bank_id'     => $this->getBankId(),
        'amount'      => $this->getAmount(),
        'description' => $this->getDescription(),
        'reporturl'   => $this->getReportURL(),
        'returnurl'   => $this->getReturnURL(),
    );

    if ($this->profile_key)
        $query_variables['profile_key'] = $this->profile_key;

    $create_xml = $this->_sendRequest(
        $this->api_host,
        $this->api_port,
        '/xml/ideal/',
        http_build_query($query_variables, '', '&')         
    );

    if (empty($create_xml)) {
        return false;
    }

    $create_object = $this->_XMLtoObject($create_xml);

    if (!$create_object or $this->_XMLisError($create_object)) {
        return false;
    }

    $this->transaction_id = (string) $create_object->order->transaction_id;
    $this->bank_url       = (string) $create_object->order->URL;

    return true;
}

// Kijk of er daadwerkelijk betaald is
public function checkPayment ($transaction_id)
{
    if (!$this->setTransactionId($transaction_id)) {
        $this->error_message = "Er is een onjuist transactie ID opgegeven";
        return false;
    }

    $query_variables = array (
        'a'              => 'check',
        'partnerid'      => $this->partner_id,
        'transaction_id' => $this->getTransactionId(),
    );

    if ($this->testmode) {
        $query_variables['testmode'] = 'true';
    }

    $check_xml = $this->_sendRequest(
        $this->api_host,
        $this->api_port,
        '/xml/ideal/',
        http_build_query($query_variables, '', '&')
        );

    if (empty($check_xml))
        return false;

    $check_object = $this->_XMLtoObject($check_xml);

    if (!$check_object or $this->_XMLisError($check_object)) {
        return false;
    }

    $this->paid_status   = (bool) ($check_object->order->payed == 'true');
    $this->status        = (string) $check_object->order->status;
    $this->amount        = (int) $check_object->order->amount;
    $this->consumer_info = (isset($check_object->order->consumer)) ? (array) $check_object->order->consumer : array();

    return true;
}

public function CreatePaymentLink ($description, $amount)
{
    if (!$this->setDescription($description) or !$this->setAmount($amount))
    {
        $this->error_message = "U moet een omschrijving én bedrag (in centen) opgeven voor de iDEAL link. Tevens moet het bedrag minstens " . self::MIN_TRANS_AMOUNT . ' eurocent zijn. U gaf ' . (int) $amount . ' cent op.';
        return false;
    }

    $query_variables = array (
        'a'           => 'create-link',
        'partnerid'   => $this->partner_id,
        'amount'      => $this->getAmount(),
        'description' => $this->getDescription(),
    );

    $create_xml = $this->_sendRequest(
        $this->api_host,
        $this->api_port,
        '/xml/ideal/',
        http_build_query($query_variables, '', '&')
        );

    $create_object = $this->_XMLtoObject($create_xml);

    if (!$create_object or $this->_XMLisError($create_object)) {
        return false;
    }

    $this->payment_url = (string) $create_object->link->URL;
} 
```

/* 受保护的函数 */

```
protected function _sendRequest ($host, $port, $path, $data)
{
    if (function_exists('curl_init')) {
        return $this->_sendRequestCurl($host, $port, $path, $data);
    }
    else {
        return $this->_sendRequestFsock($host, $port, $path, $data);
    }
}

protected function _sendRequestFsock ($host, $port, $path, $data)
{
    $hostname = str_replace('ssl://', '', $host);
    $fp = @fsockopen($host, $port, $errno, $errstr);
    $buf = '';

    if (!$fp)
    {
        $this->error_message = 'Kon geen verbinding maken met server: ' . $errstr;
        $this->error_code       = 0;

        return false;
    }

    @fputs($fp, "POST $path HTTP/1.0\n");
    @fputs($fp, "Host: $hostname\n");
    @fputs($fp, "Content-type: application/x-www-form-urlencoded\n");
    @fputs($fp, "Content-length: " . strlen($data) . "\n");
    @fputs($fp, "Connection: close\n\n");
    @fputs($fp, $data);

    while (!feof($fp)) {
        $buf .= fgets($fp, 128);
    }

    fclose($fp);

    if (empty($buf))
    {
        $this->error_message = 'Zero-sized reply';
        return false;
    }
    else {
        list($headers, $body) = preg_split("/(\r?\n){2}/", $buf, 2);
    }

    return $body;
}

protected function _sendRequestCurl ($host, $port, $path, $data)
{
    $host = str_replace('ssl://', 'https://', $host);

    $ch = curl_init();

    curl_setopt($ch, CURLOPT_URL, $host . $path);
    curl_setopt($ch, CURLOPT_PORT, $port);
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
    curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, false);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_TIMEOUT, 10);
    curl_setopt($ch, CURLOPT_HEADER, false);
    curl_setopt($ch, CURLOPT_POST, true);
    curl_setopt($ch, CURLOPT_POSTFIELDS, $data);        

    $body = curl_exec($ch);

    curl_close($ch);

    return $body;   
}

protected function _XMLtoObject ($xml)
{
    try
    {
        $xml_object = new SimpleXMLElement($xml);
        if ($xml_object == false)
        {
            $this->error_message = "Kon XML resultaat niet verwerken";
            return false;
        }
    }
    catch (Exception $e) {
        return false;
    }

    return $xml_object;
}

protected function _XMLisError($xml)
{
    if (isset($xml->item))
    {
        $attributes = $xml->item->attributes();
        if ($attributes['type'] == 'error')
        {
            $this->error_message = (string) $xml->item->message;
            $this->error_code    = (string) $xml->item->errorcode;

            return true;
        }
    }

    return false;
}

/* Getters en setters */
public function setProfileKey($profile_key)
{       
    if (is_null($profile_key))
        return false;

    return ($this->profile_key = $profile_key);
}

public function getProfileKey()
{
    return $this->profile_key;
}

public function setPartnerId ($partner_id)
{
    if (!is_numeric($partner_id)) {
        return false;
    }

    return ($this->partner_id = $partner_id);
}

public function getPartnerId ()
{
    return $this->partner_id;
}

public function setTestmode ($enable = true)
{
    return ($this->testmode = $enable);
}

public function setBankId ($bank_id)
{
    if (!is_numeric($bank_id))
        return false;

    return ($this->bank_id = $bank_id);
}

public function getBankId ()
{
    return $this->bank_id;
}

public function setAmount ($amount)
{
    if (!preg_match('~^[0-9]+$~', $amount)) {
        return false;
    }

    if (self::MIN_TRANS_AMOUNT > $amount) {
        return false;
    }

    return ($this->amount = $amount);
}

public function getAmount ()
{
    return $this->amount;
}

public function setDescription ($description)
{
    $description = substr($description, 0, 29);

    return ($this->description = $description);
}

public function getDescription ()
{
    return $this->description;
}

public function setReturnURL ($return_url)
{
    if (!preg_match('|(\w+)://([^/:]+)(:\d+)?(.*)|', $return_url))
        return false;

    return ($this->return_url = $return_url);
}

public function getReturnURL ()
{
    return $this->return_url;
}

public function setReportURL ($report_url)
{
    if (!preg_match('|(\w+)://([^/:]+)(:\d+)?(.*)|', $report_url)) {
        return false;
    }

    return ($this->report_url = $report_url);
}

public function getReportURL ()
{
    return $this->report_url;
}

public function setTransactionId ($transaction_id)
{
    if (empty($transaction_id))
        return false;

    return ($this->transaction_id = $transaction_id);
}

public function getTransactionId ()
{
    return $this->transaction_id;
}

public function getBankURL ()
{
    return $this->bank_url;
}

public function getPaymentURL ()
{
    return (string) $this->payment_url;
}

public function getPaidStatus ()
{
    return $this->paid_status;
}

public function getBankStatus()
{
    return $this->status;
}

public function getConsumerInfo ()
{
    return $this->consumer_info;
}

public function getErrorMessage ()
{
    return $this->error_message;
}

public function getErrorCode ()
{
    return $this->error_code;
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T13:30:28.980

写`ob_start();`在你的 php 页面上。希望这对你有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T12:59:21.320

当您已经打印了内容并`header()`稍后调用函数时会发生此错误。

这里 ：

```
echo $iDEAL->getBankURL(); 
```

您正在显示一些文本。`header("Location")` 开始显示某些内容后，您将无法使用。如果您想使用`header("Location")`remove this进行重定向`echo`。

```
if ($iDEAL->createPayment($_POST['bank_id'], $amount, $description, $return_url, $report_url)) 
{           
    // Removed line : this content should never been displayed since you're redirecting just after.
    header("Location: " . $iDEAL->getBankURL());
    exit;   
} else {
    echo $iDEAL->getErrorMessage();
} 
```

# windows-phone-8 - 如何在 windows phone 中创建两种类型的应用程序栏？

> ID：16147549
> 
> 赞同：-2
> 
> 时间：2013-04-22T12:50:11.973
> 
> 标签：windows-phone-8, application-bar

我已经在我的应用程序中创建了应用程序栏。

现在我想创建新的应用程序栏，旧的存在。

有没有可能？

请帮我。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T13:18:56.790

如果您想使用标准[`Application Bar`](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff431813%28v=vs.105%29.aspx)组件 - 答案是**否定**的。

但是您可以创建自己的 UI 元素，该元素将实现应用程序栏行为并将其加倍。

但是在开始之前，你真的需要创建两个 appbars 吗？我认为大多数用户不会了解如何使用它们。

# iphone - CCSprite 相互重叠

> ID：16147550
> 
> 赞同：0
> 
> 时间：2013-04-22T12:50:14.943
> 
> 标签：iphone, ios, cocos2d-iphone

```
-(void) ccTouchEnded:(UITouch *)touch withEvent:(UIEvent *)event
 {

     _nextProjectile = [[CCSprite spriteWithFile:@"arrow.png"]retain];
     _nextProjectile.position = imgArrow.position;

        [imgArrow runAction:[CCSequence actions:
                            [CCRotateTo actionWithDuration:rotateDuration angle:cocosAngle],
                            [CCCallFunc actionWithTarget:self selector:@selector(finishShoot)],
                            nil]];
    //Some code 

    }

- (void)finishShoot {

    // Ok to add now - we've finished rotation!

    [self addChild:_nextProjectile];
    [_projectiles addObject:_nextProjectile];

    // Release
    [_nextProjectile release];
    _nextProjectile = nil;
} 
```

当我点击弓两次时，我的箭头重叠在一起。

有什么帮助吗？！![在此处输入图像描述](https://i.stack.imgur.com/OBdTl.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T19:04:25.727

试试这个代码，在添加之前我们已经删除了箭头，（如果有的话，修复语法错误）

```
-(void) ccTouchEnded:(UITouch *)touch withEvent:(UIEvent *)event
 {
 [self removeChild:[self childWithTag:101]];
 _nextProjectile = [[CCSprite spriteWithFile:@"arrow.png"]retain];
 _nextProjectile.tag = 101;
 _nextProjectile.position = imgArrow.position;

    [imgArrow runAction:[CCSequence actions:
                        [CCRotateTo actionWithDuration:rotateDuration angle:cocosAngle],
                        [CCCallFunc actionWithTarget:self selector:@selector(finishShoot)],
                        nil]];
//Some code 

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T13:06:10.593

您需要先删除上一个箭头，然后才能通过触摸释放下一个箭头。我认为您正在制作一个射击游戏，当触摸屏幕时会释放箭头。我建议在操作完成后删除最后一个箭头

# ms-access - 在 Access 中构建表单可以过滤表中的特定记录

> ID：16147553
> 
> 赞同：1
> 
> 时间：2013-04-22T12:50:22.820
> 
> 标签：ms-access, ms-access-2010

Access 表单是否可以过滤记录源表中的特定字段，以便用户只能处理其余表字段的一部分？

该表包含许多字段，用户需要在表中的不同记录的所有字段中输入数据。为了方便起见，我需要过滤在特定字符中具有相似或共同的记录以输入它们的数据，然后删除过滤器并为另一个字符放置另一个过滤器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-10T20:46:00.983

示例解决方案：

```
Private Sub Form_Open(Cancel As Integer)

   Dim argsString As String, sFil As String

   argsString = Me.OpenArgs
   MsgBox "Incoming OpenArgs = " & argsString

   sFil = "SpecGrpID = " & argsString
   Me.Filter = sFil
   Me.FilterOn = True

End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T18:19:13.157

Access 提供“开箱即用”的记录过滤功能。可以告诉 Access 表单（或数据表视图中的表）以交互方式过滤记录：

如何过滤 Access 数据库中的记录
[http://support.microsoft.com/kb/304259](http://support.microsoft.com/kb/304259)

...或以编程方式：

过滤器属性
[http://office.microsoft.com/en-ca/access-help/filter-property-HA001232736.aspx](http://office.microsoft.com/en-ca/access-help/filter-property-HA001232736.aspx)

# python - 在 Python 的 Fraction 模块中使用 numpy 向量元素

> ID：16147559
> 
> 赞同：5
> 
> 时间：2013-04-22T12:50:44.330
> 
> 标签：python, numpy, fractions

我正在尝试使用 numpy 数组中的元素作为`Fraction`模块的输入，但出现以下错误：*“TypeError：两个参数都应该是 Rational 实例”*

例如，如果我这样做：

```
Y  =  np.array([7,1], dtype='int64')  
X  =  Y[0]*3+Y[1] 
```

进而：

```
a = Fraction(58,X) 
```

我会得到同样的错误。我也试过做 `X=X.astype('int')`，还是`X=X.astype('int32')`没有成功。

我需要做什么才能将 numpy 数组转换为 Fraction 模块所需的“Rational 实例”？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T12:59:41.510

这似乎是 Numpy 整数与 Python 的抽象类交互方式的不幸产物之一（它还取决于您运行的是 32 位还是 64 位 Python，因为`dtype='int'`意思是`np.int32`or `np.int64`，但绝不是 Python `int`）。

显式转换为 Python`int`应该可以：

```
Fraction(58, int(X)) 
```

# git - 为什么 git remote 显示同一个标签的两个提交？

> ID：16147563
> 
> 赞同：1
> 
> 时间：2013-04-22T12:50:58.253
> 
> 标签：git, git-rebase, git-remote, git-tag

当我使用检查远程 git 存储库的标签时，`git ls-remote --tags origin`我看到以下内容：

```
0a8e26c20   refs/tags/v1.0
acd5c5c8e   refs/tags/v1.0^{} 
```

我重新调整了历史早期的一些提交，并怀疑这解释了这里发生的事情。

当我检查提交日志时，我发现它`0a8e26c20`实际上并不存在。但是，我可以成功签出该提交，但最终提交`acd5c5c8e`（好像一个链接到另一个）。

有人可以确认变基导致了这种情况并（如果可能的话）告诉我如何解决它？

谢谢！爱洛

# php - 通过 cURL 发布 HTML 内容

> ID：16147565
> 
> 赞同：0
> 
> 时间：2013-04-22T12:51:04.993
> 
> 标签：php, curl

我有以下代码：

```
$poststr = "param1=<html><head></head><body>test1 & test2</body></html>&param2=abcd&param3=eeee";
$curl = curl_init();
curl_setopt($curl, CURLOPT_URL, "http://www.mytest.com");
curl_setopt($curl, CURLOPT_COOKIEFILE, $cookiefile);
curl_setopt($curl, CURLOPT_COOKIEJAR, $cookiefile);
curl_setopt($curl, CURLOPT_FOLLOWLOCATION, 1);
curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($curl, CURLOPT_POST, 1);
curl_setopt($curl, CURLOPT_POSTFIELDS, $poststr);
curl_setopt($curl, CURLOPT_ENCODING, "");
$curlData = curl_exec($curl); 
```

该帖子不起作用，我猜这与 param1 中包含 HTMl 的事实有关。但如果我使用`htmlentities()`它并没有帮助。我试过使用`urlencode()`但还是不行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T06:51:33.037

不要忘记这`&`是一个特殊的 URL 分隔符。
在您的示例`<body>test1 & test2</body>`中被解释错误。
`$poststr`必须仔细进行urlencoded。这是正确的方法：

```
$poststr = "param1=".rawurlencode('<html><head></head><body>test1 & test2</body></html>')."&param2=abcd&param3=eeee"; 
```

你应该对它的所有部分进行编码：param2 和 param3。
最简单的方法是使用数组和[html_build_query](http://php.net/http-build-query) ()：

```
$params = array();
$params['param1'] = '<html><head></head><body>test1 & test2</body></html>';
$params['param2'] = 'abcd';
$params['param3'] = 'eeee';

//or
//$params = array( 'param1' => '<html><head></head><body>test1 & test2</body></html>',
//                 'param2' => 'abcd',
//                 'param3' => 'eeee'
//               );

$poststr = html_build_query($params);

$curl = curl_init();
curl_setopt($curl, CURLOPT_URL, "http://www.mytest.com");
curl_setopt($curl, CURLOPT_COOKIEFILE, $cookiefile);
curl_setopt($curl, CURLOPT_COOKIEJAR, $cookiefile);
curl_setopt($curl, CURLOPT_FOLLOWLOCATION, 1);
curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($curl, CURLOPT_POST, 1);
curl_setopt($curl, CURLOPT_POSTFIELDS, $poststr);
curl_setopt($curl, CURLOPT_ENCODING, "");
$curlData = curl_exec($curl); 
```

# loops - 更新循环说明

> ID：16147572
> 
> 赞同：0
> 
> 时间：2013-04-22T12:51:37.593
> 
> 标签：loops, updates

最近引起我注意的是，在游戏更新循环中，函数不会在另一个更新循环之前完全运行。例如：

```
void update()
{
function 1;
function 2;
} 
```

在函数 1 或函数 2 完全运行之前，将调用另一个更新循环。是这样吗？因为我一直认为在函数结束之前它不会再次循环。因为我从来没有被教过这个，直到最近也从来没有查过这个，所以我从来没有考虑过这个。我觉得这很奇怪，因为现在看来，如果我想在每一帧上运行一段代码，我必须逐字地将代码放入更新循环中。例如

```
void update()
{
int i = 0;
int j - 0;
etc //the contents of function a
} 
```

我的问题是，这肯定会停止多态性和封装吗？以我将创建一个函数而不是重复一段代码的方式。

我是正确的，如果是这样，为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T13:32:44.287

正如评论的那样，我不确定您使用的编程语言。

1.  但是，您正在处理[re-entrant/non-re-entrant](http://en.wikipedia.org/wiki/Reentrancy_%28computing%29)的情况。当发出信号时，当前流将被“保留”，并且将调用对信号的操作（将其读取为中断）。如果信号的动作是调用同一个函数（在你的情况下是更新函数），那么你可以有 - 保持并在同一个线程中再次调用的效果。

2.  另一种可能性是如果您的系统是多线程的。然后可以保留当前线程执行路径，并且可以调用任何其他线程执行。这又可以再次调用更新函数。

这两个是非常著名的基本计算机科学概念，被称为函数的可重入性和线程安全性。这[本书 (APIU)](http://my.safaribooksonline.com/book/programming/unix/9780321638014)个人而言是一本了不起的书 - 尝试获取它的副本。

# php - 使用 jquery 选项卡重定向到另一个视图（Codeigniter）

> ID：16147578
> 
> 赞同：0
> 
> 时间：2013-04-22T12:51:52.210
> 
> 标签：php, javascript, jquery, codeigniter, tabs

我是路由 web url 的初学者，我试图只重定向正常`html`，但它给了我一些奇怪的问题（`pagination`不工作，`session`不工作等）。

[这个](https://www.facebook.com/photo.php?v=115381745327294&set=vb.219494334779597&type=2&theater)问题向我们展示了如何重定向`jquery` `tabs`到另一个`html`页面。`view`现在，每次用户单击选项卡（`Codeigniter`框架）时，我都想重定向到另一个。

这个怎么做？

通常，我们在以下代码中使用此代码`controller`：

```
$this->load->view('your_view'); 
```

感谢您的帮助：D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T13:17:51.837

有两种方法可以做到这一点。

1）如果你的标签支持ajax加载内容，那么通过点击一个标签，你可以调用一个特定的控制器动作/成员函数。在该功能中，您可以加载所需的视图。这样，所有 CI 功能（如分页、会话）都可以正常工作。

2）您还可以获取控制器中所有选项卡的全部数据（加载选项卡视图的位置），然后使用选项卡视图中的每个选项卡加载所有视图

```
$this->load->view('your-view'); 
```

由于您已经获取了每个选项卡视图所需的所有数据，因此您将能够在每个选项卡视图中处理该数据。

希望这会有所帮助。

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T13:19:04.340

您将使用 Ajax 请求页面，然后通过设置第三个参数 TRUE 来返回 VIEW AS A STRING

```
public function requestPageViaAjax()
{
    if(!$this->input->is_ajax_request())
    {
        return show_error('Method not allowed!');
    }

    $this->load->view('views/page', array(), TRUE);//partially loaded view
} 
```

**注意：**如果您通过 Ajax 调用页面，请确保您也通过 Ajax 调用分页！否则你会遇到路由问题

# vba - Excel VBA：错误处理仅适用于一次通过

> ID：16147579
> 
> 赞同：1
> 
> 时间：2013-04-22T12:51:52.407
> 
> 标签：vba, loops, excel, error-handling

我已经搜索了许多资源来尝试解决我的问题，但是我没有成功。我是 VBA 的初学者，所以我的代码很可能看起来很混乱。为了提出这个问题，我会尽量减少表格中的信息

我有两张纸，“数据”和“原始数字”。
数据包含标题为“属性”和“电话号码”的列，但只有“属性”中有数据。
原始号码包含相同的列，但是它缺少一些“属性”值，因为它只包含与这些属性关联的一定数量的电话号码。

数据表：
财产。. . . 1号
艾达街
2 艾达街
3 艾达街
4 艾达街
5 艾达街
6 艾达街

原始数字表：
财产。. . . 1号
艾达街。. . . 12345678
2 艾达街。. . . 12356322
5 艾达街。. . . 12551122
6 艾达街。. . . 12212112

我有一个自动将数字导入数据表的代码，但是一旦达到 3 Ada St，它就会返回错误（400），因为原始数字上没有 3 Ada St。我包含了一个错误处理程序，但是它在再次返回错误之前只工作一次。
到目前为止，这是我的代码：

```
Sub Button_Click()
Worksheets("Data").Range("B4").Select  'B4 is the Number column in the data sheet
    Do While ActiveCell.Offset(0, -1) <> ""
    On Error GoTo ErrorHandler
                ActiveCell.Value = Application.WorksheetFunction.IfError(WorksheetFunction.VLookup(ActiveCell.Offset(0, -1), ThisWorkbook.Worksheets("Raw Numbers").Range("Numbers"), 2, False), "")

ErrorHandler:
                ActiveCell.Offset(1, 0).Select
   Loop

End Sub 
```

我以这种方式编写代码是因为我最初使用的是函数而不是代码，但这太混乱了。IfError 函数在那里，因为如果地址没有附加数字，我希望单元格为空白。我尝试将其转换为错误处理程序的一部分，但它最终给了我一个错误。

有人请帮助我！如果您需要更多信息，我很乐意提供。我会一直关注这个话题！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T13:17:16.583

功能不应该太杂乱。`IFERROR`和的组合`VLOOKUP`应该起作用。

公式看起来像这样：

```
=IFERROR(VLOOKUP(A2,RawData!A:B,2,FALSE),"") 
```

在 VBA 中，我会编写如下代码：

```
Option Explicit

Sub test()
Dim Result

On Error Resume Next
Result = Application.WorksheetFunction.VLookup([A3], [RawData!A:B], 2, False)
If Err.Number = 1004 Then ' data not found, or some other formula error
    Result = ""
Else
    MsgBox Err.Number & "-" & Err.Description
    Exit Sub
End If

[B3] = Result
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T13:27:02.327

在代码中使用公式并在之后粘贴值。

```
ActiveCell.FormulaR1C1 = "=IFERROR(VLOOKUP(RC[-1],Numbers,2,FALSE),"""")"
ActiveCell.Value = ActiveCell.Value 
```

**未经测试...**

# php - PHP：preg_match 亚马逊愿望清单

> ID：16147581
> 
> 赞同：1
> 
> 时间：2013-04-22T12:51:59.123
> 
> 标签：php, amazon

我已经在 localhost 上尝试了此代码以从亚马逊愿望清单中提取项目：

```
$text = file_get_contents(trim($wishlist_link));

if (preg_match('~<form method="post" name="editItems" style="display: inline; margin: 0;" [^>]*>(.*?)</form>~si', $text, $body)) {} 
```

它工作正常，但是当我为在线域尝试相同的代码时，它仅适用于亚马逊愿望清单的 10 个项目

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-08T02:52:46.510

试试这个来抓取你的亚马逊愿望清单（适用于多页愿望清单）

[https://github.com/doitlikejustin/amazon-wish-lister](https://github.com/doitlikejustin/amazon-wish-lister)

# c# - 如果 itemsource 中不存在值，则组合框分配 null

> ID：16147582
> 
> 赞同：5
> 
> 时间：2013-04-22T12:52:08.803
> 
> 标签：c#, wpf, data-binding, combobox, mvvm-light

我有一个 Datagrid，双击选定的行后，将启动一个编辑屏幕。在此编辑屏幕上，有组合框，其值绑定到网格中的选定行。有时，combobox itemSource 中不存在分配给combobox 的值，所以combobox 上显示为空，但该值不为null。如果 itemsource 集合中不存在该值，如何将所选项目的值更新为 null。

![](https://i.stack.imgur.com/I5S8g.jpg)

在上述场景中，由于第二个屏幕绑定到第一个屏幕上的 Selected 项，因此 City 的 SelectedValue 为“Los Angeles”，Display 为 Empty。但由于集合中不存在“Los Angeles”，因此 SelectedValue 应该为 null。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T13:46:32.520

一种解决方案是将组合框的*ItemsSource*设置为列表（例如：“DeviceNameList”），并将此组合框的*SelectedItem*设置为与列表中元素类型匹配的变量（SelectedDeviceName）。

现在，当您加载编辑屏幕时，它会将列表绑定到组合框并显示您设置的变量。

您必须编写一些代码来检查所选项目是否出现在列表中，如果没有，您可以将值设置为零。

**例子：**

XAML 代码：

```
<ComboBox ItemsSource="{Binding Path=DeviceNameList}" SelectedItem="{Binding Path=SelectedDeviceName}" /> 
```

设置 selectedItem 的代码：

```
 /// <summary>
    /// Gets or sets SelectedDeviceName.
    /// </summary>
    public ObservableCollection<string> DeviceNameList
    {
         get
        {
           return mDeviceNameList;
        }

        set
        {
            mDeviceNameList = value;
        }
    }

    /// <summary>
    /// Gets or sets SelectedDeviceName.
    /// </summary>
    public string SelectedDeviceName
    {
        get
        {
            return mSelectedDeviceName;
        }

        set
        {
            mSelectedDeviceName = value;
            NotifyPropertyChanged("SelectedDeviceName");
        }
    }

    /// <summary>
    /// Event PropertyChanged
    /// </summary>
    public event PropertyChangedEventHandler PropertyChanged;

        /// <summary>
    /// Function NotifyPropertyChanged
    /// </summary>
    /// <param name="property">
    /// The property.
    /// </param>
    private void NotifyPropertyChanged(string property)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(property));
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T13:30:46.653

转换器用于将绑定中的数据转换为所需的结果。（允许在源和目标之间匹配不兼容的类型）。

关于组合框和 itemsource 之间使用的转换器的类似问题在这里：

[在组合框中的绑定项目上使用转换器](https://stackoverflow.com/questions/9448862/use-converter-on-bound-items-in-combobox)

你可以在这里阅读更多关于转换器的信息：

[http://wpftutorial.net/ValueConverters.html](http://wpftutorial.net/ValueConverters.html)

在这种情况下，转换器应放置在组合的 selectedItem 属性上。

**编辑：**

我玩了一些代码示例，并注册了组合框中的选择更改事件。this event is only triggered if the source for the selection item yields a selection which is valid for the combo box. 所以现在我回到我原来的建议应该可行：在转换器中，根据组合框项的所有值的列表检查传入的值。如果它不存在，转换器需要让组合知道它应该将其选定项设置为空。虽然我确信有更简单和优雅的方法可以做到这一点（我不是 WPF 专家），但这应该可以解决问题。

关于如何将转换器与控件挂钩的另一条线索是使用多重绑定：

[WPF 转换器可以访问它所绑定的控件吗？](https://stackoverflow.com/questions/5454726/can-a-wpf-converted-access-the-control-to-which-it-is-bound)

# android - 按一个按钮触发几个

> ID：16147584
> 
> 赞同：-1
> 
> 时间：2013-04-22T12:52:11.437
> 
> 标签：android

我有 15 个带有不同 ID 的按钮：

```
 <Button
         android:id="@+id/button14"
         android:layout_width="150dp"
         android:layout_height="140dp"
         android:layout_alignParentTop="true"
         android:layout_marginLeft="955dp"
         android:layout_marginTop="300dp"
         android:onClick="myClickHandler"
         android:text="test"
         android:textSize="@dimen/NomenklaturaNameLong" 
           android:textStyle="bold|italic"/> 
```

一个适用于所有人的事件处理程序：

```
public void myClickHandler(View target)
    {
        Intent intent1;
        switch (target.getId())
        {
            case R.id.button1:
                ButtonOn (Asortiment.SmenaButName[0],Asortiment.SmenaButPrice[0]);
            break;
            case R.id.button10:
                ButtonOn (Asortiment.SmenaButName[9],Asortiment.SmenaButPrice[9]);
            break;
            case R.id.button11:
                ButtonOn (Asortiment.SmenaButName[10],Asortiment.SmenaButPrice[10]);
            break;
................. 
```

当我按下按钮时，两个字符串添加到列表视图行。有时我按下一个按钮，但看到它添加了几个不同的字符串，就像我同时按下几个按钮一样。会是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T13:04:17.760

不是一个真正的答案，而是调试：在每个按钮上添加一个`System.out.println("button #");`这样的：

```
case R.id.button1:
   ButtonOn (Asortiment.SmenaButName[0],Asortiment.SmenaButPrice[0]);
   System.out.println("button 1");
break;

case R.id.button2:
   ButtonOn (Asortiment.SmenaButName[1],Asortiment.SmenaButPrice[1]);
   System.out.println("button 2");
break; 
```

等等。
然后使用你的按钮，看看它们是否是一个模式。
也许你能找出哪里出了问题？

# html - 经典 ASP：以 VBScript 返回的形式调用 VBscript 函数

> ID：16147589
> 
> 赞同：1
> 
> 时间：2013-04-22T12:52:24.233
> 
> 标签：html, forms, asp-classic

我有点困惑atm。我（必须...）使用经典的 asp 来为更大的网站实现包含。我对编码语言没有影响，所以请不要责怪语言或结构......

所以这是我的功能：

```
function MaintMod2(modcmd)
if CheckUserRights2("M.Write") or CheckUserRights2("M.Read") then

response.write("<div class=""formContainer"">"&_
    "<form action="">"&_
    "<span> CI: <input type=""text"" name=""CI"" value=""byitm6""></span>"&_
    "<span> Start: <input type=""text"" name=""Start"" value=""01.03.2013 - 07:30:17""></span>"&_
    "<span> End: <input type=""text"" name=""End"" value=""15.04.2013 - 11:37:33""></span>"&_
    "<span> Active: <input type=""checkbox"" name=""Active"" value=""Active""></span>"&_
    "<input type=""submit"" class=""button"" id=""formSend"">"&_
    "</form>"&_
"</div>")
end function 
```

主页面（不是我维护的）调用 MaintMod2 函数来呈现新页面。所以我使用“response.write”来生成我的 HTML。

我的问题：如何从表单操作中调用？

```
<form action="myfunction()"> 
```

这是我的第一个想法，但它并没有真正起作用：D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T07:46:27.613

我看不到您的代码如何工作，因为您的示例在“end function”之前缺少“end if”的结束语句。所以最后两行应该是......

```
end if
end function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T13:12:03.390

在我看来，我同意[在 href onclick (classic ASP) 中调用 VBScript Sub](https://stackoverflow.com/questions/9123914/call-vbscript-sub-in-a-href-onclick-classic-asp?rq=1)。

表单动作在客户端启动一个动作。如果可能的话，使用此功能创建指向指向站点的页面的有效链接。向 URL 添加一个参数，以便您可以识别调用方法的操作。在服务器端评估此参数并执行您的目标方法（类似于 MVC 方式）。

# vim - 在 .scss 文件的冒号 zencoding-vim 后添加空格

> ID：16147591
> 
> 赞同：1
> 
> 时间：2013-04-22T12:52:31.633
> 
> 标签：vim, sass, emmet

我正在为 vim 使用 ZenCoding 插件，我希望它通过在每个冒号后添加一个空格来扩展 CSS 缩写，这不是 SCSS 文件的当前默认行为。

我检查了 Emmet 和 zenconding-vim 的文档，但无法应用 Emmet 的自定义属性：

```
css.valueSeparator: ": " 
```

给维姆。我尝试通过在我的`.vimrc`文件中添加。

```
let g:user_zen_settings = {
\  'css' : {
\    'valueSeparator' : ': '
\  }
\} 
```

我不确定我是否在 ZenCoding 的文档中遗漏了某些内容，或者我正在尝试在 ZenCoding 中无法完成的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T13:37:54.323

我终于在 zencoding-vim 的问题中找到了答案：

[https://github.com/mattn/zencoding-vim/issues/94](https://github.com/mattn/zencoding-vim/issues/94)

您必须将此添加到您的`.vimrc`文件中：

```
let g:user_zen_settings = {
\  'scss' : {
\    'filters' : 'fc',
\  }
\} 
```

**重要的！**不要错过前导反斜杠。它们是必需的。

# android - 在 Android 新消息等图标上设置新消息计数

> ID：16147592
> 
> 赞同：-4
> 
> 时间：2013-04-22T12:52:32.463
> 
> 标签：android

我想实现一些功能，例如在 Android 上收到新消息时。详细查看图像，如果可以，请提供帮助。

**更新**

我只想在 xml 中构建 imageview，比如主屏幕上的新消息图标，右上角有红色圆圈。

![在此处输入图像描述](https://i.stack.imgur.com/NeWaS.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T13:29:24.403

欢迎您为此目的实现主屏幕应用程序小部件。或者，欢迎您实现自己的主屏幕，并向第三方提供某种标记 API。

您无法影响主屏幕上的任何其他内容。

# mysql - 使用 JOIN 提高 SQL 查询性能

> ID：16147595
> 
> 赞同：1
> 
> 时间：2013-04-22T12:52:38.353
> 
> 标签：mysql, sql, database, performance

我有以下执行缓慢的 SQL 查询：

```
SELECT *
FROM news_events
WHERE 1 AND (user_id = 2416) OR id IN(SELECT content_id FROM likes WHERE user_id = 2416)
ORDER BY id DESC
LIMIT 0,10 
```

news_events表在 user_id 上有索引*。**likes*表在 user_id 上有一个索引。

为了尝试提高性能，我通过以下方式使用 INNER JOIN 重写了查询：

```
SELECT a.*
FROM news_events a
INNER JOIN likes b ON (a.id = b.content_id)
WHERE (a.user_id = 2416) OR (b.user_id = 2416)
ORDER BY a.id DESC
LIMIT 0,10 
```

但是性能也没有提高。我已经对最后一个查询进行了解释，结果如下：

![mysql解释](https://i.stack.imgur.com/7Y4Fe.png)

我很感激任何关于我可以做些什么来提高这个查询的性能的指针。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T13:00:07.040

```
SELECT *
FROM 
(
    SELECT a.* 
    FROM news_events a 
    WHERE a.user_id = 2416
    UNION
    SELECT ne.* 
    FROM news_events ne 
        INNER JOIN likes l 
            ON ne.id=l.contentid 
    WHERE l.user_id = 2416
)
ORDER BY 1 DESC
LIMIT 0,10 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T13:32:53.083

试试这个查询 -

```
SELECT * FROM news_events ne
LEFT JOIN (SELECT content_id FROM likes WHERE user_id = 2416) l
  ON ne.user_id = 2416 OR ne.id = l.content_id
ORDER BY
  ne.id DESC
LIMIT
  0, 10 
```

这些列应该被索引：`news_events.user_id`, `news_events.id`, `likes.user_id`, `likes.content_id`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T06:53:21.840

您的查询已经足够好了。朋友发帖查询也不错。但是，如果您有大量数据并且从那时起就没有重建索引，则需要在两个表上重建索引。

这是一个标准协议，数据库管理员需要及时重建所有索引以及重新编译数据库中的所有对象+包。

我希望它会有所帮助:) 继续查询！

# jsf - 在 RichFaces 上拖放文件上传

> ID：16147596
> 
> 赞同：1
> 
> 时间：2013-04-22T12:52:40.447
> 
> 标签：jsf, richfaces, jsf-1.2

我正在寻找通过拖放功能上传文件的解决方案。我将 JSF 1.2 与 JBoss 5.0 一起使用。如果任何 RichFaces 版本上都有解决方案，请分享。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-19T10:23:52.037

我想你是新来的`richfaces`。Richfaces 为其 Showcase 提供了如何执行此操作的源代码。
结帐 Richfaces Showcase，[在这里](http://showcase.richfaces.org/richfaces/component-sample.jsf?demo=fileUpload&skin=blueSky)。

**.html 文件：**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:a4j="http://richfaces.org/a4j" xmlns:rich="http://richfaces.org/rich">

<ui:composition>

    <h:outputStylesheet>
        .top {
        vertical-align: top;
        }

        .info {
        height: 202px;
        overflow: auto;
        }
    </h:outputStylesheet>
    <h:form>
        <h:panelGrid columns="2" columnClasses="top,top">
            <rich:fileUpload fileUploadListener="#{fileUploadBean.listener}" id="upload" acceptedTypes="jpg, gif, png, bmp"
                ontyperejected="alert('Only JPG, GIF, PNG and BMP files are accepted');" maxFilesQuantity="5">
                <a4j:ajax event="uploadcomplete" execute="@none" render="info" />
            </rich:fileUpload>
            <h:panelGroup id="info" layout="block">
                <rich:panel bodyClass="info">
                    <f:facet name="header">
                        <h:outputText value="Uploaded Files Info" />
                    </f:facet>
                    <h:outputText value="No files currently uploaded" rendered="#{fileUploadBean.size==0}" />
                    <rich:dataGrid columns="1" value="#{fileUploadBean.files}" var="file" rowKeyVar="row">
                        <rich:panel bodyClass="rich-laguna-panel-no-header">
                            <h:panelGrid columns="2">
                                <a4j:mediaOutput element="img" mimeType="image/jpeg" createContent="#{fileUploadBean.paint}"
                                    value="#{row}" style="width:100px; height:100px;" cacheable="false">
                                    <f:param value="#{fileUploadBean.timeStamp}" name="time" />
                                </a4j:mediaOutput>
                                <h:panelGrid columns="2">
                                    <h:outputText value="File Name:" />
                                    <h:outputText value="#{file.name}" />
                                    <h:outputText value="File Length(bytes):" />
                                    <h:outputText value="#{file.length}" />
                                </h:panelGrid>
                            </h:panelGrid>
                        </rich:panel>
                    </rich:dataGrid>
                </rich:panel>
                <br />
                <a4j:commandButton action="#{fileUploadBean.clearUploadData}" render="info, upload" value="Clear Uploaded Data"
                    rendered="#{fileUploadBean.size>0}" />
            </h:panelGroup>
        </h:panelGrid>
    </h:form>
</ui:composition>

</html> 
```

**Java 文件：**

```
package org.richfaces.demo.fileupload;

import java.io.IOException;
import java.io.OutputStream;
import java.io.Serializable;
import java.util.ArrayList;

import javax.faces.bean.ManagedBean;
import javax.faces.bean.SessionScoped;

import org.richfaces.event.FileUploadEvent;
import org.richfaces.model.UploadedFile;

/**
 * @author Ilya Shaikovsky
 */
@ManagedBean
@SessionScoped
public class FileUploadBean implements Serializable {
    private ArrayList<UploadedImage> files = new ArrayList<UploadedImage>();

    public void paint(OutputStream stream, Object object) throws IOException {
        stream.write(getFiles().get((Integer) object).getData());
        stream.close();
    }

    public void listener(FileUploadEvent event) throws Exception {
        UploadedFile item = event.getUploadedFile();
        UploadedImage file = new UploadedImage();
        file.setLength(item.getData().length);
        file.setName(item.getName());
        file.setData(item.getData());
        files.add(file);
    }

    public String clearUploadData() {
        files.clear();
        return null;
    }

    public int getSize() {
        if (getFiles().size() > 0) {
            return getFiles().size();
        } else {
            return 0;
        }
    }

    public long getTimeStamp() {
        return System.currentTimeMillis();
    }

    public ArrayList<UploadedImage> getFiles() {
        return files;
    }

    public void setFiles(ArrayList<UploadedImage> files) {
        this.files = files;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-26T17:16:38.767

我提供了**UploadedImage**类的代码，它与**FileUploadBean**类在**同一个包**中。 [获取 UploadedImage 类代码的链接](https://github.com/richfaces4/showcase/blob/master/src/main/java/org/richfaces/demo/fileupload/UploadedImage.java)

 **```
package org.richfaces.demo.fileupload;

import java.io.Serializable;

public class UploadedImage implements Serializable {
    private String name;
    private String mime;
    private long length;
    private byte[] data;

    public byte[] getData() {
        return data;
    }

    public void setData(byte[] data) {
        this.data = data;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        int extDot = name.lastIndexOf('.');
        if (extDot > 0) {
            String extension = name.substring(extDot + 1);
            if ("bmp".equals(extension)) {
                mime = "image/bmp";
            } else if ("jpg".equals(extension)) {
                mime = "image/jpeg";
            } else if ("gif".equals(extension)) {
                mime = "image/gif";
            } else if ("png".equals(extension)) {
                mime = "image/png";
            } else {
                mime = "image/unknown";
            }
        }
    }

    public long getLength() {
        return length;
    }

    public void setLength(long length) {
        this.length = length;
    }

    public String getMime() {
        return mime;
    }
} 
```

我希望我能帮助那些想要使用“rich:fileUpload”组件的人**

# jquery - jQuery，如何克隆回保存的元素？

> ID：16147598
> 
> 赞同：2
> 
> 时间：2013-04-22T12:52:52.123
> 
> 标签：jquery

为了演示，请参阅我的 html ：

```
<html>
<head>
<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
</head>
See it:
<pre>
print "Say hello"
</pre>
<p><b>==SEP==</b></p>
<pre>
class Voila {
public:
  // Voila
  static const string VOILA = "Voila";

  // will not interfere with embedded <a href="#voila1">tags</a>.
}
</pre>
</html> 
```

在 Chrome v26 控制台中，我执行：

```
var pres_orig=$('pre').clone()
$('pre').replaceWith('<pre>spam</pre>') 
```

**然后我的问题：如何`<pre>`从保存的 pres_orig 中克隆回内容，以便我的页面显示其原始内容？**

我尝试了以下不起作用的方法：

```
$('pre').replaceWith(pres_orig) 
```

![在此处输入图像描述](https://i.stack.imgur.com/9yYVD.png) ![在此处输入图像描述](https://i.stack.imgur.com/MQuBh.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T14:00:18.670

因为您有多个`pre`没有识别价值的元素。您可以采取的一种方法是循环所有元素并将内部 html 存储在一个数组中。然后当你需要再次加载它们时，你可以循环它们并使用索引拉取数组 html。

像这样的东西：

```
//store all the data on load
var storage = [];
$("pre").each(function(){
   storage.push($(this).html()); 
});

//set the new html to "spam"
$("pre").html("spam");

//reload the original data
$("pre").each(function(index){
    $(this).html(storage[index]);
}); 
```

[这是一个工作示例](http://jsfiddle.net/JfW8R/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T13:03:42.337

不要克隆。保存内部（或外部）HTML。将内部 HTML 插入 pre. 使用 .html() 获取内部 HTML，使用 .html(content) 替换内部 HTML。

```
<html>
  <head>
    <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
    <script>
      $(function() {
        var pres = [];
        // this is how you store it:
        $('pre').each(function(i) {
          pres[i] = $(this).html();
        });
        // this is how you restore it:
        $('pre').each(function(i) {
          $(this).html(pres[i] + "SPAM ;)");
        });
      });
    </script>
  </head>
  <body>
    See it:
    <pre>
      print "Say hello"
    </pre>
    <p><b>==SEP==</b></p>
    <pre>
      class Voila {
      public:
        // Voila
        static const string VOILA = "Voila";

        // will not interfere with embedded <a href="#voila1">tags</a>.
      }
    </pre>
  </body>
</html> 
```

因此，如果您想将此数组保存到文件或 cookie 中，请使用[JSON3 对其](https://github.com/bestiejs/json3)进行序列化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T02:14:57.673

我想我找到了迄今为​​止最好的解决方案，只有一个说法：

```
for(var i=0; i<pres_orig.length; i++) 
    $('pre').eq(i).replaceWith(pres_orig.eq(i).clone()); 
```

或者

```
$('pre').each( function(i){ 
    $(this).replaceWith(pres_orig.eq(i).clone()) 
}); 
```

注意：使用 clone()`pres_orig`保留它的独立副本，这样我们就可以将它克隆回任意次数。

![在此处输入图像描述](https://i.stack.imgur.com/AAwfM.png)

# dataset - 如何在 cURL 中设置记录长度？

> ID：16147600
> 
> 赞同：1
> 
> 时间：2013-04-22T12:52:59.220
> 
> 标签：dataset, file-transfer, mainframe, ftps

我想将测试文件传输到大型机，但测试文件的行数超过 80 个字符，这是 FTP 的默认设置。因为创建的数据集的记录长度为 80，所以我得到

```
451-File transfer failed. File contains records that are longer than the LRECL of the new file. 
```

错误。我试过这个；

```
curl --ftp-ssl -k -v -B -T BBBBB -u USERNAME:PASS ftp://HOST_NAME:PORT/'DATASET_NAME(BBBBB)' 
```

为了解决这个问题，我添加了`-Q "site lrecl=250"`，但这没有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T23:55:03.503

您是在创建数据集还是在 PDS 中创建成员？？？。语法**DATASET_NAME(BBBBB)**意味着您可以在现有 PDS 中创建成员。LRECL 特性在 PDS 定义中定义，不能通过发送命令更改。

如果它是现有的 PDS，您将需要通过发送命令创建一个新的数据集/PDS，或者在大型机上创建一个具有正确特征的新数据集，然后进行发送。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T17:13:23.430

如果这是一次性或很少重复的任务，您可以将文件传输到 Unix 文件系统，然后使用[OGET](https://www.ibm.com/docs/en/zos/2.4.0?topic=tc-oget-copy-zos-unix-files-into-mvs-data-set)创建“经典”z/OS 文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T08:47:17.267

在大型机上预先分配具有您想要的特征的数据集，例如 LRECL（记录长度）和 RECFM（记录格式，所有记录都是“固定”长度，还是它们可以不同？）。

如果你 ftp 到那个数据集，这会给你带来问题吗？

我不认为 80 是 ftp 的“默认”值，它可能只是您尝试将数据填充到的数据集的 LRECL。

大型机支持人员中的某个地方是了解大型机 ftp 使用标准的人。找到他们，解释你有什么和你需要做什么，并问他们正确的方法是值得的。比现在挣扎要好，然后让它作为“非标准”一路“反弹”。

# .htaccess - 如果文件夹存在，如何使 .htaccess 忽略规则？

> ID：16147602
> 
> 赞同：1
> 
> 时间：2013-04-22T12:53:02.287
> 
> 标签：.htaccess, rewrite

如果文件夹存在，我该如何`.htaccess`忽略规则？

规则：

```
 RewriteRule ^([a-zA-Z0-9-z\-]+)/([a-zA-Z0-9-z\-]+)$ index.php?ht=$1&hht=$2
  RewriteRule ^([a-zA-Z0-9-z\-]+)/([a-zA-Z0-9-z\-]+)/$ index.php?ht=$1&hht=$2
  RewriteRule ^([a-zA-Z0-9-z\-]+)$ index.php?ht=$1&hht=$2
  RewriteRule ^([a-zA-Z0-9-z\-]+)/$ index.php?ht=$1&hht=$2 
```

例如：如果我去：`http://my_domain.com/admin`它重定向到`index.php`原始文档根目录，而不是`/admin/index.php`

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T12:55:55.340

尝试将这些行放在您的代码之上：

```
RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule .* - [L] 
```

# actionscript-3 - Flex 4.5 / Apache Flex UI 框架架构

> ID：16147603
> 
> 赞同：0
> 
> 时间：2013-04-22T12:53:04.997
> 
> 标签：actionscript-3, apache-flex, flex4, flex4.5

Flex 4.5 中是否有任何 UI 开发框架？使用 Action 脚本创建 UI 视图层的更好标准。还有如何在 Action 脚本中创建状态和状态转换？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T13:10:27.050

> Flex 4.5 中是否有任何 UI 开发框架？

Flex 是一个 UI 开发框架。您可以阅读[Flex 组件生命周期](http://help.adobe.com/en_US/flex/using/WS460ee381960520ad-2811830c121e9107ecb-7fff.html)以了解有关其工作原理的更多信息。

> 使用 Action 脚本创建 UI 视图层的更好标准。

我不明白你在这里要求什么。你想要一个比什么更好的标准？

> 还有如何在 Action 脚本中创建状态和状态转换？

您可以在 ActionScript 中创建状态和状态转换，类似于在[MXML](http://help.adobe.com/en_US/flex/using/WS2db454920e96a9e51e63e3d11c0bf63611-7ff1.html)中的操作。每个组件都有一个[状态](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/core/UIComponent.html#states)数组；[并且状态数组中的每个条目都将是State 类](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/states/State.html)的一个实例，它将有一堆“命令”来添加或删除子项或更改属性。完整列表在相关 API 元素标题下的状态类 API 文档中。

但是，在 ActionScript 中设置状态很乏味。

# python - django 管理表单。如何跳过验证？

> ID：16147604
> 
> 赞同：1
> 
> 时间：2013-04-22T12:53:05.640
> 
> 标签：python, django, django-admin

我有一些形式：

```
class Node(Object):
    title = CharField(max_length=255)
    body = TextField() 
```

在管理表单中有文件字段（这是一个转储，例如节点的 csv 转储）

以及我想要做什么：如果用户填写“data_file”，我想跳过所有表单验证，并从 data_file 内容创建节点。否则我将根据“标题”和“正文字段”创建节点我需要帮助，因为在 django 文档中找不到关于我的问题的任何信息

有创建 url 视图的方法，但我想通过 django 标准管理工具来完成

# javascript - 在谷歌地图中使用多个标记聚类器

> ID：16147605
> 
> 赞同：2
> 
> 时间：2013-04-22T12:53:28.637
> 
> 标签：javascript, google-maps, markerclusterer

我在地图中有许多标记，我按类别对它们进行聚类。我为标记为每个类别创建了一个数组，因此我的地图上有多个聚类器。我可以创建一个将集群器作为变量传递的事件处理程序吗？例如，这是我的事件处理程序之一：

```
google.maps.event.addListener(mc, 'mouseover', function (cluster) 
```

我可以使用 clusterer 作为变量创建这样的处理程序，以便我可以将它用于我的所有对象（mc1、mc2、mc3 ....）吗？

使用多个集群是一个好习惯还是我应该以另一种方式实现它？

也许我应该更具体。假设我们想在地图上显示美国所有州的城市。在第一层，我们希望看到每个州都有一个集群，并且鼠标悬停在集群上是来自其中所有城市的人口总和。我的想法是为每个州创建一个集群。这是对的还是我从一个错误的决定开始？任何帮助，将不胜感激！

# scope - 在 Fortran 中使用公共/私有语句的首选样式？

> ID：16147606
> 
> 赞同：4
> 
> 时间：2013-04-22T12:53:39.433
> 
> 标签：scope, fortran, private, public

例如：

```
module m_a
  private
  integer :: x, y
  public :: x
end module m_a

module m_b
  public
  integer :: x, y
  private :: y
end module m_b 
```

显然，变量`x`和`y`在模块`m_a`和`m_b`. 我的问题是，从编程风格的角度来看，哪个更受欢迎？

在 Fortran 90/95 的大部分教程中，`m_a`都采用了模块的样式。但是，对于一个包含数百个模块的复杂层次结构的大型项目，我注意到 sytle 的编译时间`m_a`比 style的编译时间要长得多`m_b`。

我还没有找到讨论过的类似主题。也许我`public/private`在模块层次结构中滥用了语句？有什么建议么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T14:10:39.677

样式 m_a 是首选，其中默认设置为私有，并且项目显式声明为公共。使用这种方法，程序员可以很容易地识别模块导出（公共）哪些项目。使用另一种方法，这些信息很难弄清楚。帮助程序员理解模块比编译时间更重要。

# sql - 将多个xml节点数据转换为varchar

> ID：16147613
> 
> 赞同：0
> 
> 时间：2013-04-22T12:54:02.797
> 
> 标签：sql, xml, tsql, nodes

我想像这样转换一个 xml 字符串：

```
'<orga_label>ORG1</orga_label><orga_label>ORG2</orga_label><orga_label>ORG3</orga_label>' 
```

变成这样的varchar：

```
'ORG1, ORG2, ORG3' 
```

在一个查询中的 t-sql 中。

那可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T13:22:16.520

您可以在这里保持非常简单并避免使用 XML 方法...

```
DECLARE @foo xml = '<orga_label>ORG1</orga_label><orga_label>ORG2</orga_label><orga_label>ORG3</orga_label>';

SELECT
    REPLACE(
      REPLACE(
        REPLACE(
          CONVERT(nvarchar(4000), @foo), '</orga_label><orga_label>', ', '
        ), 
        '<orga_label>', ''
      ),
      '</orga_label>', ''
    ); 
```

编辑：这具有不调用 XML 方法和处理器的优点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T13:05:25.887

最好在 ruby​​ 之类的脚本语言中使用 xml 解析器。

```
require 'rexml/document'
xml =REXML::Document.new(File.open"filename/filename.XML")
xml.each_element('//(your element)') do |sdobi|
   puts sdobi.attributes["orga_label"]
end 
```

如果你真的想使用 sql，那就有点复杂了：

```
SELECT SUBSTRING( columnname, LOCATE( '<orga_label',columnname ) +12, LOCATE( '</', tablename) )  from tablename 
```

如果子字符串不正确尝试更改数字

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T13:34:01.823

```
declare @xml xml = '<orga_label>ORG1</orga_label><orga_label>ORG2</orga_label><orga_label>ORG3</orga_label>';

select stuff((select 
    ',' + s from (
    select 
    a.b.value('(.)[1]', 'varchar(50)') s
    from @xml.nodes('/orga_label') a(b)
) t
for xml path('')
),1,1,''); 
```

# javascript - 在 .load() 上获取图像宽度不适用于除 Firefox 之外的所有浏览器

> ID：16147615
> 
> 赞同：1
> 
> 时间：2013-04-22T12:54:13.257
> 
> 标签：javascript, jquery

我在这里发布我的问题，因为我没有找到我的问题的答案。我在 JavaScript 中加载了一些图像。他们每个人都在自己的div中。我想得到 div 的宽度。

```
this.biggerElmts.find('img').each(function(){
var div = $('<div/>', {'class': this.divMinPic}).appendTo(divMinPics);
var img = $('<img/>', {
    'class': this.minPic,
    alt:'Miniature '+$(this).attr("alt"),
    src:this.urlPic($(this).attr("src"), this.minPicFolder)
})  // if image not found, we put de default file
    .error(function(){console.log("error loading image");$(this).attr("src", this.minPicFolder + this.defaultMinPic);})
    .load(function(){
        console.info($(this).width());
    })
    .appendTo(div);}); 
```

我的问题是它在 Firefox 上运行良好，但在所有其他浏览器上却不行。Firefox 向我返回 185，彼此返回 0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T13:10:08.470

如果您有代码的 jsfiddle，我们可能能够更具体地查看正在发生的事情。但据我所知，无论是使用纯 javascript 还是 jquery，onload 事件在我尝试过的所有浏览器中都可以正常工作。

[这是另一个线程，其中 jquery 用于执行您所要求的操作。](https://stackoverflow.com/questions/15881061/insert-object-jquery-delay)

我还有几个关于 jsfiddle 的纯 javascript 演示，如果你有兴趣可以看看。

好的，这里有一些代码与 jsfiddle 的链接一起使用

```
var display = document.getElementById("display"),
    images = {
        "F12berlinetta": "http://www.ferrari.com/Site_Collection_Image_115x55/f12_thumb_home_115x55.png",
            "458 Spider": "http://www.ferrari.com/Site_Collection_Image_115x55/110823_458_spider_menu.png",
            "FF": "http://www.ferrari.com/Site_Collection_Image_115x55/ff_thumb_home_115x55.png",
            "458 Italia": "http://www.ferrari.com/Site_Collection_Image_115x55/458_italia_menu_1_dx_ok.png",
            "Ferrari California": "http://www.ferrari.com/Site_Collection_Image_115x55/california_menu_3_sx.png"
    },
    keys = Object.keys(images),
    loaded = 0,
    menuWidth = 0,
    noWaitWidth = 0;

function clickedIt(evt) {
    alert("You chose the " + evt.target.title);
}

function onLoaded(evt) {
    loaded += 1;
    menuWidth += evt.target.offsetWidth;
    evt.target.addEventListener("click", clickedIt, false);
    if (loaded === keys.length) {
        console.log("Waited load width", menuWidth);
    }
}

keys.forEach(function (key, index) {
    var newDiv = document.createElement("div"),
        newImg = document.createElement("img");

    newImg.id = "thumb" + index;
    newImg.src = images[key];
    noWaitWidth += newImg.offsetWidth;
    newImg.title = key;
    newImg.addEventListener("load", onLoaded, false);

    newDiv.appendChild(newImg);
    display.appendChild(newDiv);
});

console.log("Didn't wait load width", noWaitWidth); 
```

[演示 1](http://jsfiddle.net/Xotic750/8JRwM/)
[演示 2](http://jsfiddle.net/Xotic750/gZysL/)

# javascript - jquery addClass没有正确执行“on”（ex live）jquery方法和数据表初始化

> ID：16147616
> 
> 赞同：0
> 
> 时间：2013-04-22T12:54:14.243
> 
> 标签：javascript, jquery, jquery-datatables

我将数据表插件与 jquery 一起使用。我不明白为什么`addClass`在数据表的销毁、重新初始化和排序之后执行 jquery 代码......

```
$('#added_jobs').on( 'click', '.rem_added', function () {

    $("#gif_loader").addClass("overlay");

    oTabJobs.fnDestroy();       
    loadTabJobs();
    oTabJobs.fnSort( [ [3,'asc'] ] );

    $("#gif_loader").removeClass("overlay");

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T13:01:49.043

很可能是排序方法锁定了页面，直到循环运行后才允许更新 DOM。

在调用销毁/排序代码之前，您需要稍微延迟 DOM 以完全更新。

```
$('#added_jobs').on( 'click', '.rem_added', function () {

    var loaderImg = $("#gif_loader");
    loaderImg.addClass("overlay");

    window.setTimeout( function () {
        oTabJobs.fnDestroy();       
        loadTabJobs();
        oTabJobs.fnSort( [ [3,'asc'] ] );
        loaderImg.removeClass("overlay");
    }, 10);

}); 
```

# php - 如何：Ajax 检查 php/database 中的值

> ID：16147618
> 
> 赞同：-1
> 
> 时间：2013-04-22T12:54:17.023
> 
> 标签：php, ajax, jquery

如何从提交中发布值并检查它们是否存在于mysql中？我必须在我的 .php 文件中输入什么？

```
document.addEventListener("deviceready", onDeviceReady, false);  

function onDeviceReady() {
    $('#login').submit(function(){
        var username = document.getElementById("username").value;
        var password = document.getElementById("password").value;
    });
}

function getData(sendData) {
    $.ajax({ 
        type: 'POST', 
        url: 'http://www.url.php', 
        data: { 'username': username, 'password': password }, 
        success: afhandeling,
    });

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T13:12:15.177

像这样调用ajax：

```
jQuery.ajax({
    type: "POST",
    url: "http://www.url.php",
    data: { username:username,password:password },
    success: function( data )
    {
    }
}); 
```

并在 ajax 文件中：

```
if (isset($_POST['username']) && isset($_Post['password']))
{
    $query = "SELECT * FROM users WHERE username='".$_POST['username']."' AND password=".$_POST['password'];
    $result = mysql_query($query);
    $row = mysql_fetch_assoc($result);

    if($row)
    {
        echo 'login';
    }
    else
    {
        echo "error";
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T14:33:52.667

您提交启动 ajax 脚本的表单，该脚本将数据发送到处理输入并为您提供答案的 PHP 文件。

使用 PDO 或 MySqLi。Mysql 已弃用，不再受支持。我下面的示例使用 PDO 方法。

你的 PHP 应该看起来像这样（这是未经测试的代码，所以可能有错别字）：

```
<?php
$username = $_POST['username'];
$password = $_POST['password'];

if (!empty($username) && !empty($password)) {
  // We create a PDO connection to our database
  $con = new PDO("mysql:host=yourhost;dbname=yourdatabase", "username", "password");
  // We prepare our query, this effectively prevents sql injection
  $query = $con->prepare("SELECT * FROM table WHERE username=:username AND password=:password LIMIT 1");
  // We bind our $_POST values to the placeholders in our query
  $query->bindValue(":username", $username, PDO::PARAM_STR);
  $query->bindValue(":password", $password, PDO::PARAM_STR);
  // We execute our query
  $query->execute();

  $result = $query->fetch();  // Grab the matches our query produced

  // Here we check if we found a match in our DB
  if (!empty($result)) {
    echo "Matches were found";
  } else {
    echo "No matches found";
  }
} else {
  echo "Please fill out all fields";
}
?> 
```

至于从您的 AJAX 脚本中获得回复，您可以简单地提醒回复或随意显示。

```
success: function(data) {
  alert(data);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T12:57:10.890

我认为 URL 必须是本地的，即“/projects/blindchat/login.php”。

在该页面上，您可以编写如下内容：

```
if (isset($_POST['username']) && isset($_POST['password'])) {
   // MYSQL query:

   SELECT 1 FROM users WHERE username = ?  AND password = ?
} 
```

请记住，您必须首先转义变量以防止 SQL 注入。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T13:00:26.723

在 login.php 页面中，您需要执行以下操作：

```
if(isset($_POST['username']) && isset($_Post['password'])) {
    $q = "SELECT * FROM users WHERE username=$_POST['username'] AND password=$_POST['password']"
$r = mysql_query($q);
if(mysql_num_rows($r)==1) //Do Login
else echo "ERROR"; 
```

}

# jasper-reports - JasperReports JRXML JRBeanCollectionDataSource 使用变量/参数作为数据

> ID：16147619
> 
> 赞同：2
> 
> 时间：2013-04-22T12:54:22.833
> 
> 标签：jasper-reports

我正在尝试将 JRBeanJavaCollectionDataSource 嵌入到 jrxml 中。我想显示表格。在 jrxml 我写道：

```
<datasetRun subDataset="Table Dataset 1">
<dataSourceExpression>
<![CDATA[new net.sf.jasperreports.engine.data.JRBeanCollectionDataSource($V{project})]]> `</dataSourceExpression>`
</datasetRun> 
```

$V{project} 必须包含 javaCollection。我不知道如何在 IReport 4.5 的变量表达式中编写多行 java 代码来获取我的 javaCollection。这可能吗？或者还有另一种获取 javaCollection 的方法

# singleton - Pthread Thread-Local-Singleton，何时释放 TLS Key？

> ID：16147621
> 
> 赞同：6
> 
> 时间：2013-04-22T12:54:25.753
> 
> 标签：singleton, pthreads, thread-local-storage

我使用 pthread TLS 实现了一种“线程本地单例”，我想知道在这种情况下我如何（以及何时）可以删除 pthread_key_t，因为就像现在一样，TLS 密钥使用的内存永远不会空闲' d。

其预期用途是让类 A 从 ThreadLocalSingleton<A> 派生，这使 A 成为线程本地单例，假设 A 只有私有构造函数并且 ThreadLocalSingleton<A> 是 A 的朋友。

哦，还有 - 你看到那个实现有什么问题吗？我忽略了什么重要的事情吗？

```
#include <pthread.h>
#include <iostream>

template <class T>
class ThreadLocalSingleton
{
private:
    static pthread_key_t tlsKey;
    static pthread_once_t tlsKey_once;

    static void tls_make_key()
    {
        (void)pthread_key_create(&ThreadLocalSingleton::tlsKey, ThreadLocalSingleton::tls_destructor);
    }

    static void tls_destructor(void* obj)
    {
        delete ((T*)obj);
        pthread_setspecific(tlsKey, NULL); // necessary or it will call the destructor again.
    }

public:

    /*
     * A thread-local singleton getter, the resulted object must never be released,
     * it is auto-released when the thread exits.
     */
    static T* getThreadInstance(void)
    {
        pthread_once(&tlsKey_once, ThreadLocalSingleton::tls_make_key);
        T* instance = (T*)pthread_getspecific(tlsKey);
        if(!instance)
        {
            try
            {
                instance = new T;
                pthread_setspecific(tlsKey, instance);
            }
            catch (const char* ex)
            {
                printf("Exception during thread local singleton init: %s\n",ex);
            }
        }
        return instance;
    }
};
template <class T>
pthread_key_t ThreadLocalSingleton<T>::tlsKey;
template <class T>
pthread_once_t ThreadLocalSingleton<T>::tlsKey_once = PTHREAD_ONCE_INIT; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-13T15:03:34.653

您的实现看起来非常优雅。

根据[pthread_key_create 的开放组规范](http://pubs.opengroup.org/onlinepubs/009696799/functions/pthread_key_create.html)，您不必在析构函数中将引用设置为 NULL：

> 可选的析构函数可以与每个键值相关联。在线程退出时，如果键值具有非 NULL 析构指针，并且线程具有与该键关联的非 NULL 值，则将键的值设置为 NULL，然后调用指向的函数以前关联的值作为其唯一参数。

我认为这也意味着关键对象本身将被 pthread 自动销毁。您只需要处理存储在密钥后面的内容，这正是您`delete ((T*)obj);`所做的。

# caching - ResourceHttpRequestHandler 返回错误（缓存？）资源

> ID：16147627
> 
> 赞同：0
> 
> 时间：2013-04-22T12:55:09.353
> 
> 标签：caching, spring-mvc, resources

我有一个 Spring (3.2.2) 后端为 jQuery Mobile 前端提供静态资源。资源位于地图 /webapp/resources/images 下。此地图中已存在的资源已正确返回，但是当我添加新资源并尝试访问它（使用浏览器）时，我得到 404 not found。当我从地图中删除现有资源时，仍然可以根据请求找到它。我猜这是一些缓存问题？

web.xml

```
<?xml version="1.0"?>
<web-app id="WebApp_ID" version="2.4"
 xmlns="http://java.sun.com/xml/ns/j2ee"
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee   http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd">
 <context-param>
  <param-name>contextConfigLocation</param-name>
  <param-value>/WEB-INF/mvc-dispatcher-servlet.xml</param-value>
 </context-param>
 <listener>
  <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
 </listener>
 <servlet>
  <servlet-name>mvc-dispatcher</servlet-name>
  <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
  <load-on-startup>1</load-on-startup>
 </servlet>
 <servlet-mapping>
  <servlet-name>mvc-dispatcher</servlet-name>
  <url-pattern>/</url-pattern>
 </servlet-mapping>
</web-app> 
```

mvc-调度程序-servlet.xml

```
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:mvc="http://www.springframework.org/schema/mvc" 
    xmlns:aop="http://www.springframework.org/schema/aop"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="
        http://www.springframework.org/schema/beans     
        http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
        http://www.springframework.org/schema/context 
        http://www.springframework.org/schema/context/spring-context-3.1.xsd
        http://www.springframework.org/schema/aop
        http://www.springframework.org/schema/aop/spring-aop-3.1.xsd
        http://www.springframework.org/schema/mvc
        http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd">

    <bean id="messageSource"
        class="org.springframework.context.support.ResourceBundleMessageSource">
        <property name="basenames">
            <list>
                <value>mymessages</value>
            </list>
        </property>
    </bean>

    <context:component-scan base-package="com.bvb.oiga.frontend.page.controller"/>
    <context:component-scan base-package="com.bvb.oiga.dto"/>

    <mvc:annotation-driven />
    <mvc:resources mapping="/resources/**" location="/resources/, classpath:/resources/" cache-period="0"  />

    <bean class="org.springframework.web.servlet.view.ContentNegotiatingViewResolver">
    <property name="mediaTypes">
        <map>
        <entry key="html" value="text/html"/>
        <entry key="json" value="application/json"/>
        <entry key="form" value="application/x-www-form-urlencoded"/>
        </map>
    </property>
    <property name="viewResolvers">
        <list>
        <bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
                    <property name="prefix">
                        <value>/WEB-INF/pages/</value>
                    </property>
                    <property name="suffix">
                        <value>.jsp</value>
                    </property>
            </bean>
        </list>
    </property>
    <property name="defaultViews">
        <list>
        <bean class="org.springframework.web.servlet.view.json.MappingJacksonJsonView" />
        </list>
    </property>
    </bean>
</beans> 
```

记录：

```
.DispatcherServlet - Bound request context to thread: org.apache.catalina.connector.RequestFacade@d15c31
.DispatcherServlet - DispatcherServlet with name 'mvc-dispatcher' processing GET request for [/oiga-frontend/resources/images/new-logo-sm.png]
.DispatcherServlet - Testing handler map [org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping@30562b] in DispatcherServlet with name 'mvc-dispatcher'
.mvc.method.annotation.RequestMappingHandlerMapping - Looking up handler method for path /resources/images/new-logo-sm.png
.mvc.method.annotation.RequestMappingHandlerMapping - Did not find handler method for [/resources/images/new-logo-sm.png]
.DispatcherServlet - Testing handler map [org.springframework.web.servlet.handler.BeanNameUrlHandlerMapping@181ddd] in DispatcherServlet with name 'mvc-dispatcher'
.handler.BeanNameUrlHandlerMapping - No handler mapping found for [/resources/images/new-logo-sm.png]
.DispatcherServlet - Testing handler map [org.springframework.web.servlet.handler.SimpleUrlHandlerMapping@f59bb9] in DispatcherServlet with name 'mvc-dispatcher'
.handler.SimpleUrlHandlerMapping - Matching patterns for request [/resources/images/new-logo-sm.png] are [/resources/**]
.handler.SimpleUrlHandlerMapping - URI Template variables for request [/resources/images/new-logo-sm.png] are {}
.handler.SimpleUrlHandlerMapping - Mapping [/resources/images/new-logo-sm.png] to HandlerExecutionChain with handler [org.springframework.web.servlet.resource.ResourceHttpRequestHandler@1ed7b17] and 1 interceptor
.DispatcherServlet - Testing handler adapter [org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter@2c304d]
.DispatcherServlet - Testing handler adapter [org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter@1172b04]
.DispatcherServlet - Last-Modified value for [/oiga-frontend/resources/images/new-logo-sm.png] is: -1
.resource.ResourceHttpRequestHandler - Trying relative path [images/new-logo-sm.png] against base location: ServletContext resource [/resources/]
.resource.ResourceHttpRequestHandler - Relative resource doesn't exist or isn't readable: ServletContext resource [/resources/images/new-logo-sm.png]
.resource.ResourceHttpRequestHandler - Trying relative path [images/new-logo-sm.png] against base location: class path resource [resources/]
.resource.ResourceHttpRequestHandler - Relative resource doesn't exist or isn't readable: class path resource [resources/images/new-logo-sm.png]
.resource.ResourceHttpRequestHandler - No matching resource found - returning 404
.DispatcherServlet - Null ModelAndView returned to DispatcherServlet with name 'mvc-dispatcher': assuming HandlerAdapter completed request handling
.DispatcherServlet - Cleared thread-bound request context: org.apache.catalina.connector.RequestFacade@d15c31
.DispatcherServlet - Successfully completed request 
```

**更新：**

每次资源更新后，我都会重新加载（停止/启动）在 Eclipse Juno SR2 中运行的 apache-tomcat-7.0.32。还尝试关闭eclipse并重新启动，但没有任何运气。

父 Pom：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>com.bvb.oiga</groupId>
  <artifactId>oiga</artifactId>
  <version>0.0.1-SNAPSHOT</version>
  <packaging>pom</packaging>
  <properties>
    <spring.version>3.2.2.RELEASE</spring.version>
    <java.version>1.7</java.version>
    <log4j.version>1.2.16</log4j.version>
    <spring.ws.version>2.0.0.RELEASE</spring.ws.version>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    <spring.security>3.1.3.RELEASE</spring.security>
  </properties>
  <modules>
    <module>oiga-comtrex</module>
    <module>oiga-backend-webservice</module>
    <module>oiga-dto</module>
    <module>oiga-frontend</module>
  </modules>
  <build>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.3.2</version>
                <configuration>
                    <source>${java.version}</source>
                    <target>${java.version}</target>
                </configuration>
            </plugin>
        </plugins>
  </build>
    <dependencies>
        <dependency>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
            <version>${log4j.version}</version>
        </dependency>
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.8.1</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>commons-collections</groupId>
            <artifactId>commons-collections</artifactId>
            <version>3.1</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-core</artifactId>
            <version>${spring.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context</artifactId>
            <version>${spring.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-beans</artifactId>
            <version>${spring.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-aop</artifactId>
            <version>${spring.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-aspects</artifactId>
            <version>${spring.version}</version>
        </dependency>
        <dependency>
            <groupId>commons-collections</groupId>
            <artifactId>commons-collections</artifactId>
            <version>3.2</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-oxm</artifactId>
            <version>${spring.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework.ws</groupId>
            <artifactId>spring-ws-core</artifactId>
            <version>${spring.ws.version}</version>
        </dependency>
        <dependency>
            <groupId>org.apache.ws.commons.schema</groupId>
            <artifactId>XmlSchema</artifactId>
            <version>1.4.3</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>org.springframework.transaction</artifactId>
            <version>${spring.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>org.springframework.test</artifactId>
            <version>${spring.version}</version>
            <scope>test</scope>
        </dependency>

    </dependencies>

    <repositories>
        <repository>
            <id>com.springsource.repository.bundles.release</id>
            <name>SpringSource Enterprise Bundle Repository - SpringSource Bundle Releases</name>
            <url>http://repository.springsource.com/maven/bundles/release</url>
            <snapshots>
                <enabled>false</enabled>
                <updatePolicy>never</updatePolicy>
            </snapshots>
        </repository>

        <repository>
            <id>com.springsource.repository.bundles.external</id>
            <name>SpringSource Enterprise Bundle Repository - External Bundle Releases</name>
            <url>http://repository.springsource.com/maven/bundles/external</url>
            <snapshots>
                <enabled>false</enabled>
                <updatePolicy>never</updatePolicy>
            </snapshots>
        </repository>

        <repository>
            <id>jboss-maven2-release-repository</id>
            <url>https://repository.jboss.org/nexus/content/groups/public-jboss</url>
            <snapshots>
                <enabled>false</enabled>
                <updatePolicy>never</updatePolicy>
            </snapshots>
        </repository>

    </repositories>
</project> 
```

和项目pom：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <parent>
    <groupId>com.bvb.oiga</groupId>
    <artifactId>oiga</artifactId>
    <version>0.0.1-SNAPSHOT</version>
  </parent>
  <artifactId>oiga-frontend</artifactId>
  <packaging>war</packaging>

     <dependencies>
        <dependency>
            <groupId>com.bvb.oiga</groupId>
            <artifactId>oiga-dto</artifactId>
            <version>0.0.1-SNAPSHOT</version>
        </dependency>
        <dependency>
            <groupId>com.bvb.oiga</groupId>
            <artifactId>oiga-comtrex</artifactId>
            <version>0.0.1-SNAPSHOT</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-webmvc</artifactId>
            <version>${spring.version}</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-web</artifactId>
            <version>${spring.version}</version>
        </dependency>

        <dependency>
            <groupId>jstl</groupId>
            <artifactId>jstl</artifactId>
            <version>1.2</version>
        </dependency>

        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>servlet-api</artifactId>
            <version>2.5</version>
        </dependency>       

    <dependency>
            <groupId>org.codehaus.jackson</groupId>
            <artifactId>jackson-mapper-asl</artifactId>
            <version>1.7.1</version>
        </dependency>
    </dependencies>

</project> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T13:56:43.610

让我猜猜……您是在应用程序启动*后*`src/main/resources/`修改目录的内容吗？源文件夹中的更改对正在运行的应用程序不可见，因为它使用. 文件夹甚至不在类路径上。您可以通过在目录中重复您的步骤来测试这个理论。*`target/classes/``src/``target/`*

 ** * *

如果这不是您的问题的原因，添加有关您的构建工具（Maven？）和 servlet 容器（Tomcat？Jetty？独立？嵌入式？）的信息会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T08:53:05.557

它现在正在工作。@kryger 指出了我的问题（tomcat 发布而不是 resourceHttpRequestHandler）。我打开了服务器选项卡，显示项目已同步。我在 /image 映射中添加了一个资源，仍然是同步的。我注意到对第二个战争项目（用于 web 服务）的引用，该项目目前未使用，因此我删除了此引用。现在，当我添加、修改或删除资源时，它正在重新发布，甚至无需重新启动服务器。*

# linux - 是在某处调用的脚本

> ID：16147631
> 
> 赞同：2
> 
> 时间：2013-04-22T12:55:27.230
> 
> 标签：linux, bash, crontab

在我的一台 linux 服务器上，我有一个执行一些控制的脚本。有没有办法找出这个脚本在哪里被调用？这可以在另一个脚本、cobol 程序、crontab 中……打开它们中的每一个都需要很长时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T13:10:14.263

如果您可以修改脚本，请输入`ps`一行以获取父 pid，`ps`再次使用 grep 获取父 pid 以获取命令，然后登录到文件。

大约一周后回来，您应该拥有触发脚本的命令。如果它是嵌套的，你可能想要递归或类似的。

要在不修改脚本的情况下执行此操作，您需要一个观察程序脚本/程序来检查对脚本文件的访问或`ps`每隔一段时间调用一次。但是，如果您有这种访问权限，那么只修改脚本可能会更容易。

**编辑：**显然，获取父 pid 和命令的命令，无需重复调用`ps`，如下所示：

```
ps -p $$ -o ppid=
cat /proc/<pid>/cmdline 
```

（[来自jweyrich的回答here](https://stackoverflow.com/a/10925479/129032)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T13:26:26.173

为它准备好：

*   grep -lr yourscript /etc /opt/anotherlikleydir

*   失败，搜索整个系统： grep -lr yourscript /

编辑：

*   失败，也搜索二进制文件： grep -lar yourscript /

*   否则，脚本要么由登录用户执行，要么由脚本远程登录执行……如果是这种情况，请尝试 peachykeen 的方法并编辑脚本……为什么不将 a`ps axf`也转储到日志中。

# c# - .net winform 树视图中的内存不足异常

> ID：16147635
> 
> 赞同：6
> 
> 时间：2013-04-22T12:55:35.063
> 
> 标签：c#, visual-studio-2010, listview, treeview, out-of-memory

我有一个树视图，并且基于树视图的项目，我在右侧有列表视图。所以几乎 UI 就是我们的 windows Explorer 那种外观。所以现在我面临的问题是，当我从右侧的列表视图中删除大量对象时，左侧的树视图变成了部分绘制（我可以说是一小部分）。当我从 VS IDE 附加 CLR 异常时，它指向行 sampletree.EndUpdate(); 除了内存不足。当我在列表视图中添加下一个项目时，一切正常，我的意思是树视图已完全绘制我得到的异常是

```
System.OutOfMemoryException occurred
  Message=Out of memory.
  Source=System.Drawing
  StackTrace:
       at System.Drawing.Graphics.FromHdcInternal(IntPtr hdc)
       at System.Drawing.Font.ToLogFont(Object logFont)
       at System.Drawing.Font.ToHfont()
       at System.Windows.Forms.Control.FontHandleWrapper..ctor(Font font)
       at System.Windows.Forms.OwnerDrawPropertyBag.get_FontHandle()
       at System.Windows.Forms.TreeView.CustomDraw(Message& m)
       at System.Windows.Forms.TreeView.WmNotify(Message& m)
       at System.Windows.Forms.TreeView.WndProc(Message& m)
       at System.Windows.Forms.Control.ControlNativeWindow.OnMessage(Message& m)
       at System.Windows.Forms.Control.ControlNativeWindow.WndProc(Message& m)
       at System.Windows.Forms.NativeWindow.DebuggableCallback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam)
       at System.Windows.Forms.UnsafeNativeMethods.SendMessage(HandleRef hWnd, Int32 msg, IntPtr wParam, IntPtr lParam)
       at System.Windows.Forms.Control.SendMessage(Int32 msg, IntPtr wparam, IntPtr lparam)
       at System.Windows.Forms.Control.ReflectMessageInternal(IntPtr hWnd, Message& m)
       at System.Windows.Forms.Control.WmNotify(Message& m)
       at System.Windows.Forms.Control.WndProc(Message& m)
       at System.Windows.Forms.ScrollableControl.WndProc(Message& m)
       at System.Windows.Forms.UserControl.WndProc(Message& m)
       at System.Windows.Forms.Control.ControlNativeWindow.OnMessage(Message& m)
       at System.Windows.Forms.Control.ControlNativeWindow.WndProc(Message& m)
       at System.Windows.Forms.NativeWindow.DebuggableCallback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam)
       at System.Windows.Forms.UnsafeNativeMethods.CallWindowProc(IntPtr wndProc, IntPtr hWnd, Int32 msg, IntPtr wParam, IntPtr lParam)
       at System.Windows.Forms.NativeWindow.DefWndProc(Message& m)
       at System.Windows.Forms.Control.DefWndProc(Message& m)
       at System.Windows.Forms.Control.WndProc(Message& m)
       at System.Windows.Forms.TreeView.WndProc(Message& m)
       at System.Windows.Forms.Control.ControlNativeWindow.OnMessage(Message& m)
       at System.Windows.Forms.Control.ControlNativeWindow.WndProc(Message& m)
       at System.Windows.Forms.NativeWindow.DebuggableCallback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam)
       at System.Windows.Forms.UnsafeNativeMethods.SendMessage(HandleRef hWnd, Int32 msg, Int32 wParam, Int32 lParam)
       at System.Windows.Forms.Control.EndUpdateInternal(Boolean invalidate)
       at System.Windows.Forms.TreeView.EndUpdate() 
```

你知道为什么我的树视图只画了一小部分而连续的修改完全画了吗？代码片段如下所示

```
 if( ( values != null ) &&
       ( values .OverallState != ToBeDeleted ) &&
       ( values .OverallState != .Deleted ) )
    {
       TreeView tree = this.TreeView;
       if( tree != null )
       {
          tree.BeginUpdate();
       }
       TryUpdate();
       TryPopulate();
       if( tree != null )
       {
          tree.EndUpdate();  // here exception coming
       }
    } 
```

**更新** 我正在使用这样的字体

```
case State.Modified:
                     NodeFont = new Font(TreeView.Font, FontStyle.Bold);
break; 
```

这有什么问题吗

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T14:37:17.730

这种崩溃通常是由 GDI 资源泄漏引起的。这通常是由于忘记在任何 System.Drawing 类对象上调用 Dispose() 方法引起的。通常垃圾收集器会在你之后进行清理，但是，尤其是当你使用 ownerdraw 时，它可能不会经常运行，无法让你远离麻烦。当您消耗了 10,000 个 GDI 对象时，Windows 会在您的程序上拔掉插头，结果就是 kaboom。

您可以从任务管理器轻松诊断此问题。查看 + 选择列并勾选句柄、用户对象和 GDI 对象。在您使用过程时，请注意为您的过程添加的那些列。稳步攀升的数字预示着 OOM Kaboom。

首先查看您的 DrawNode 事件处理程序，因为它可能会被频繁调用。但它也可能是由其他绘画代码引起的。*确保您使用 using*语句创建图形、钢笔、画笔、字体等绘图对象，以保证在使用后处理它们。您从任务管理器获得的诊断信息会告诉您何时领先。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-01T09:45:23.063

我刚刚遇到了完全相同的问题。它似乎只发生在比 XP 晚的 Windows 系统中，并且当我删除`BeginUpdate()`and`EndUpdate()`调用时，它不会发生。

因此，作为一种解决方法，我会说尝试删除`BeginUpdate()`and`EndUpdate()`调用。这确实意味着在更新节点时可能会出现一些视觉卡顿，但从好的方面来说，它不会崩溃。这肯定是一场净胜。

我在 MSDN/Connect 上没有找到解决此问题的任何内容，而且我现在没有时间整理一个独立的测试用例，但我确实认为这是处理更高版本中 TreeViews 中的批量更新的错误的窗户。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-03-22T14:17:15.277

`System.GC.Collect()`您可以在更改节点字体或颜色后强制垃圾收集器。

# javascript - 从对象内部的对象获取数据

> ID：16147637
> 
> 赞同：0
> 
> 时间：2013-04-22T12:55:37.880
> 
> 标签：javascript, knockout.js

嗨，我刚刚学习淘汰赛，我面临一个我似乎无法理解的问题。我有这个对象：

```
 var studentPersonalDetails = ko.observable();
    var isInitialized = false;

    var vm = {
        //bindable
        title: ko.observable('Profile'),
        dataLoading: ko.observable(false),
        hasErrors: ko.observable(false),
        errorMessage: ko.observable(''),

        //data
        profileStudentPersonalDetails: studentPersonalDetails,      

        //operations
        activate: activate

    };

    return vm; 
```

profileStudentPersonalDetails 相当于来自服务器的这个 C# 对象：

```
 public int? StudentNumber { get; set; }
    public string Supervisor { get; set; }
    public bool CanEdit { get; set; }
    public string PersonId { get; set; }     
    public string FirstName { get; set; }
    public string MiddleName { get; set; }
    public string LastName { get; set; }
    public string FullName { get; set; } 
```

并且是从服务中填充的。我的问题是我知道如何从这个对象访问数据，所以我可以在 html 视图上显示它。

我试过这个版本：

```
<strong data-bind="text: StudentNumber">
<strong data-bind="text: profileStudentPersonalDetails.StudentNumber"> 
```

但似乎不起作用。我确信数据以正确的方式填充到对象中，并且我能够访问数据中的其他字段，例如标题：

```
<strong data-bind="text: title"> 
```

这有效。

如何访问数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T12:59:23.997

我想你想要

```
profileStudentPersonalDetails().StudentNumber 
```

observables 是函数。要获取它们所代表的对象，您需要调用该函数。然后，您可以从函数的结果中访问该属性。

# drupal-7 - Drupal 7 - 内容类型内的内容类型 - 像字段集合

> ID：16147642
> 
> 赞同：1
> 
> 时间：2013-04-22T12:55:50.370
> 
> 标签：drupal-7, drupal-content-types, drupal-field-collection

我想创建一个名为“联系人”的内容类型，它将在其他内容类型中共享，例如“客户”和“潜在客户”。当我创建一个新客户时，我希望能够以相同的形式为这个客户创建新的联系人，比如一个字段集合。例如：

添加新客户

姓名：

公司：

电子邮件：

联系人（多值）

* * *

姓名：

电子邮件：

* * *

添加新联系人

但是，在“联系人”内容类型中，我有更多字段可以稍后填写：

姓名： 电子邮件： 电话： 地址： 城市： 州....

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T18:21:51.127

您可以使用[规则模块](http://drupal.org/project/rules)设置一个规则，即每当创建新的“客户”实体时，都会根据客户联系人字段（姓名和电子邮件）中的值创建一个新的“联系人”实体。

但是，我不确定如何为表单中的字段组实现“添加另一个项目”（我认为这是“添加新联系人”所需的功能）。

您可能还需要确保在您的联系人实体类型中包含一个[实体引用字段](http://drupal.org/project/entityreference)，以便它可以引用与其相关的客户实体。这将使您可以选择在未来显示与客户相关的联系人视图。

# c# - 使用多个跟踪侦听器

> ID：16147643
> 
> 赞同：7
> 
> 时间：2013-04-22T12:55:54.487
> 
> 标签：c#, asp.net, visual-studio-2010, wcf, logging

我有 2 个 WCF 服务，我从单个 Windows 主机托管。我使用跟踪侦听器将数据记录到应用程序日志中。我在配置文件中添加了以下代码。

```
<system.diagnostics>
<switches>
  <add name="ReaderService.Switch" value="4"/>
  <add name="InfoService.Switch" value="4"/>
</switches>
<trace autoflush="false" indentsize="4">
  <listeners>
    <add name="EventLogTraceListener"
      type="System.Diagnostics.EventLogTraceListener"
      initializeData="ReaderServiceLog" />
  </listeners>
</trace>
</system.diagnostics> 
```

这两个服务的所有日志都显示在源 ReaderServiceLog 名称下。我想要做的是，每个服务的日志应该出现在不同的源名称下。

例如，来自 ReaderService 的日志应该出现在名称 ReaderServiceLog 下，来自 InfoService 的日志应该出现在 InfoServiceLog 下。我修改了我的配置，如下所示。

```
<system.diagnostics>
<switches>
  <add name="ReaderService.Switch" value="4"/>
  <add name="InfoService.Switch" value="4"/>
</switches>
<sources>
  <source name="EventLogTraceListener">
    <listeners>
      <add name="EventLogTraceListener"
      type="System.Diagnostics.EventLogTraceListener"
      initializeData="ReaderServiceLog" />
    </listeners>
  </source>
  <source name="InfoService">
    <listeners>
      <add name="EventLogTraceListener"
      type="System.Diagnostics.EventLogTraceListener"
      initializeData="InfoServiceLog" />
    </listeners>
  </source>
</sources>
</system.diagnostics> 
```

并使用了这段代码：

```
private TraceSource ts = new TraceSource("InfoService");
ts.TraceInformation(outputMessage, aslErrorText);
ts.Flush(); 
```

但它不起作用。它根本不记录任何东西。

我也试过[这个](https://stackoverflow.com/questions/805154/defining-multiple-tracesources-not-running?lq=1)。但它不起作用。

```
<system.diagnostics>
<switches>
  <add name="ReaderService.Switch" value="4"/>
  <add name="InfoService.Switch" value="4"/>
</switches>
<sources>
  <source name="ReaderService"
          switchValue="Information, ActivityTracing">
    <listeners>
      <add name="EventLogTraceListener"/>
    </listeners>
  </source>
  <source name="InfoService"
          switchValue="Information, ActivityTracing">
    <listeners>
      <add name="EventLogTraceListener"/>               
    </listeners>
  </source>
</sources>
<sharedListeners>
  <add name="EventLogTraceListener"
       type="System.Diagnostics.EventLogTraceListener"
       initializeData="ServiceLog" />
</sharedListeners> 
```

我使用了与上面相同的 c# 代码。此代码正确执行日志记录，但同样，这两个服务的名称相同。即服务日志。

我在这里错过了什么吗？或者有没有其他方法。请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-14T08:08:24.723

此配置添加了 2 个不同的跟踪源（带有文件侦听器；如果您愿意，您可能想要更改侦听器和目录路径）：

```
<?xml version="1.0"?>
<configuration>
  ...
  <system.diagnostics>
    <switches>
      <add name="data" value="All" />
      <add name="error" value="All" />
    </switches>
    <sources>
      <source name="DataSource" switchName="data" switchType="System.Diagnostics.SourceSwitch">
        <listeners>
          <clear />
          <add name="dataListener" type="Microsoft.VisualBasic.Logging.FileLogTraceListener, Microsoft.VisualBasic, Version=8.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a, processorArchitecture=MSIL"
             initializeData="FileLogWriter"
             Append="true"
             AutoFlush="true"
             BaseFileName="data"
             CustomLocation="D:\Log\App\Data"
             DiskSpaceExhaustedBehavior="DiscardMessages"
             Encoding="Unicode"
             IncludeHostName="false"
             LogFileCreationSchedule="Daily"
             location="Custom"
             MaxFileSize="900000000000" />
        </listeners>
      </source>
      <source name="ErrorSource" switchName="error" switchType="System.Diagnostics.SourceSwitch">
        <listeners>
          <clear />
          <add name="errorListener" type="Microsoft.VisualBasic.Logging.FileLogTraceListener, Microsoft.VisualBasic, Version=8.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a, processorArchitecture=MSIL"
             initializeData="FileLogWriter"
             Append="true"
             AutoFlush="true"
             BaseFileName="error"
             CustomLocation="D:\Log\App\Error"
             DiskSpaceExhaustedBehavior="DiscardMessages"
             Encoding="Unicode"
             IncludeHostName="false"
             LogFileCreationSchedule="Daily"
             location="Custom"
             MaxFileSize="900000000000" />
        </listeners>
      </source>
    </sources>
    <trace autoflush="true">
      <listeners>
        <clear />
        <add name="defaultListener" type="Microsoft.VisualBasic.Logging.FileLogTraceListener, Microsoft.VisualBasic, Version=8.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a, processorArchitecture=MSIL"
             initializeData="FileLogWriter"
             Append="true"
             AutoFlush="true"
             BaseFileName="program"
             CustomLocation="D:\Log\App\Program"
             DiskSpaceExhaustedBehavior="DiscardMessages"
             Encoding="Unicode"
             IncludeHostName="false"
             LogFileCreationSchedule="Daily"
             location="Custom"
             MaxFileSize="900000000000" />
        <add name="programConsoleListener" type="System.Diagnostics.ConsoleTraceListener" />
      </listeners>
    </trace>
  </system.diagnostics>
  ...
</configuration> 
```

并使用它定义您的 TraceSource：

```
static TraceSource dataSource = new TraceSource("DataSource");
static TraceSource errorSource = new TraceSource("ErrorSource"); 
```

为了使用 TraceSource 更轻松地工作（对于某些场景），我编写了一个扩展方法：

```
public static void WriteLine(this TraceSource source, object o)
{
    var str = (o ?? string.Empty).ToString();

    if (source.Listeners == null || source.Listeners.Count == 0) throw new InvalidOperationException(string.Format("TraceSource named {0} has no listeners", source.Name));

    foreach (TraceListener listener in source.Listeners)
        listener.WriteLine(str);
} 
```

这对我有用。

但是您不能根据调用它的代码块在一个应用程序域中对 TraceSource 进行分类。

# jquery - 检查具有相同 id 的输入文本是否具有相同的值

> ID：16147649
> 
> 赞同：1
> 
> 时间：2013-04-22T12:56:02.467
> 
> 标签：jquery, forms, input

我有一个包含多个输入类型文本且具有相同 ID 的表单。
所以我想在提交时通过 JQuery 检查这些输入中的任何一个是否具有相同的值。
那可能吗？如果是这样，请帮助。
**注意：**忘记相同的ID。假设每个人都有不同的 id。那怎么查呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T13:05:50.467

这是您可以遵循的一般流程

1.  枚举您想要比较的所有字段
2.  为字段的值增加一个计数器
3.  当你到达终点时，检查是否有任何项目的计数 > 1

例如，此代码执行您想要的操作：

```
$('#check').click(function(){
    var idx = {};
    $('.unique').each(function(){
         var val = $(this).val();
        if(val.length)
        {
            if(idx[val]){
                idx[val]++;
            }
            else{
              idx[val] = 1;   
            }
        }
    });
    var gt_one = $.map(idx,function(e,i){return e>1 ? e: null});
    var isUnique = gt_one.length==0
    alert(isUnique); //  Do something useful
}); 
```

现场示例：http: [//jsfiddle.net/6VfET/](http://jsfiddle.net/6VfET/)

# jquery - 使用 jQuery 选择表格行的值

> ID：16147651
> 
> 赞同：0
> 
> 时间：2013-04-22T12:56:15.273
> 
> 标签：jquery, mvccontrib-grid

我有一个表格，每行都包含下拉列表。Rows 没有 id 属性。因此，由于 row 没有 id 属性，我如何获取下拉列表的选定项和相应的 ID 列的值。例如，如果我从第一行中选择一个项目，我想要项目的值和 ID 列的值，即 204。

![要使用 jQuery 操作的表](https://i.stack.imgur.com/KS2Hb.png)

这是上表的html代码

```
 <table class="table-1 gapmb40">
    <thead>
        <tr>
            <th>
                Status
            </th>
            <th>
                <a class="sortable" href="">Featured</a>
            </th>
            <th>
            </th>
            <th>
                <a class="sortable" href="">Date Modified</a>
            </th>
            <th>
            </th>
            <th>
                ID
            </th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>
                <select class="input-2" name="2">
                    <option value="New">New</option>
                    <option selected="selected" value="Live">Live</option>
                    <option value="AccountOnly">AccountOnly</option>
                    <option value="Hide">Hide</option>
                    <option value="Suspended">Suspended</option>
                </select>
            </td>
            <td>
                <a href="">Feature</a>
            </td>
            <td>
                <a href="">View</a>
            </td>
            <td>
                07/03/2013
            </td>
            <td style="display: none">
                <a href="">LogOnAs</a>
            </td>
            <td>
                204
            </td>
        </tr>
    </tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T13:02:09.527

给你所有的选择框一个类...说`selectClass`并使用jquery类选择器。

尝试这个

```
 $('.selectClass').change(function(e){
     alert($(this).val()); //gives you the selected value
     alert($(this).parents('tr').find('td:eq(5)').text()); //gives you the related TD which is 4th column and gets its text

     //or
     alert($(this).closest('tr').find('td:eq(5)').text()); 
}); 
```

[在这里摆弄](http://jsfiddle.net/bipen/7XRZ7/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-02T10:49:42.130

```
<select onchange=sel_change(this.value,'<%=id%>');></select> 
```

所以在 javascript 函数中，您可以获得所选项目的值和该行的 id

```
<script>

    function sel_change(item,id){
        alert("selected item "+item+"from the id "+id);
    }

</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T13:13:23.313

如果你有表ID，那么你可以试试这个..

```
$("#tbltable tr").click(function() {
    var selectedText = $(this).find('select :selected').text();
    var columnID = this.cells[4].innerHTML.toString();
    alert(selectedText + " , " + columnID);
 }); 
```

# zabbix - 可以通过zabbix代理进行zabbix web监控吗？

> ID：16147655
> 
> 赞同：0
> 
> 时间：2013-04-22T12:56:46.047
> 
> 标签：zabbix

我有一个 Zabbix 2.0.5 实例。

如果我在一台主机中配置一个 Web 测试，并配置为通过 Zabbix 代理进行监控，那么测试将永远不会运行。

当我更改主机设置以不使用代理时，测试再次运行。

问题是：我可以从不同于主 Zabbix 服务器的主机运行 Web 检查吗？如何？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T07:59:37.427

您可以从 Zabbix 2.0 开始：[https ://www.zabbix.com/documentation/2.0/manual/introduction/whatsnew200#web_monitoring_by_zabbix_proxies](https://www.zabbix.com/documentation/2.0/manual/introduction/whatsnew200#web_monitoring_by_zabbix_proxies)

确保使用 Web 监控支持编译代理（`--with-libcurl`参数 - 检查日志文件中的代理启动消息）。

请记住，代理默认每小时更新一次配置数据。如果它是活动代理，您可以尝试重新启动它。如果是被动代理，`ProxyConfigFrequency`在服务器配置文件中进行测试设置为300左右并重启服务器。

# php - 如何根据 ID 选择 XML 中的属性？

> ID：16147657
> 
> 赞同：2
> 
> 时间：2013-04-22T12:56:56.903
> 
> 标签：php, xml, xml-attribute

我正在尝试根据 ID 从 XML 文件中获取一组属性。我环顾四周并没有找到可行的解决方案。

这是我的 XML：

```
<data>
<vico>2</vico>
<vis>
<vi>
    <id>1</id>
    <name>Vill1</name>
    <att>2</att>
    <hp>100</hp>
    <xp>10</xp>
</vi>
<vi>
    <id>2</id>
    <name>Vill2</name>
    <att>3</att>
    <hp>120</hp>
    <xp>12</xp>
</vi>
</vis>
</data> 
```

我要做的是创建一个脚本，该脚本采用 vico 的值并执行 mt_rand(0,vico) （已经创建了这部分代码），并根据出现的数字，拉出该节点。

例如，如果数字是 2，我希望它提取 xml 文件中 id 为 2 的所有属性。我想我必须使 ID 成为其他属性的父级，但我不确定. 对于我的生活，我无法弄清楚这一点。在我投入更多时间之前，我还想确保这是可能的。

我确实意识到这可以用 mySQL 很容易地完成，但我选择不这样做是为了便于携带，因为我正在使用拇指驱动器。任何帮助将不胜感激。

基于 ID 拉取的工作代码：

```
 $xml = simplexml_load_file("vi.xml")
       or die("Error: Cannot create object");

     $vc = $xml->vico;
     $select = mt_rand()&$vc;
     if ($select == 0) {
     $select = $select + 1;
     }

     $result = $xml->xpath("/data/vis/vi/id[.='".$select."']/parent::*");
if ($result) {
$node = $result[0];
$name = $node->name;
$att = $node->att;
$hp = $node->hp;
$xp = $node->xp  ;
} else {
// nothing found for this id
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T13:20:42.693

使用 xpath 检索 id=your value 的节点（它基于值）。

```
$result = $xml->xpath("/data/vis/vi/id[.='".$select."']/parent::*");
if ($result) {
   $node = $result[0];
   $name = $node->name;
   $att = $node->att;
   $hp = $node->hp;
   $xp = $node->xp  ;
} else {
   // nothing found for this id
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T12:58:49.490

如果您使用的是 SimpleXML：

```
$name = $xml->vis->vi[$vico]->name;
$att  = $xml->vis->vi[$vico]->att;
$hp   = $xml->vis->vi[$vico]->hp;
$xp   = $xml->vis->vi[$vico]->xp; 
```

# bash - 如何识别linux中屏幕上打印的内容？

> ID：16147658
> 
> 赞同：2
> 
> 时间：2013-04-22T12:57:01.290
> 
> 标签：bash, shell, pipe, stdout, stderr

我在我的 C++ 应用程序中使用了一个库，并试图在一个文件中捕获所有输出。我试图将标准错误重定向到标准输出，然后将标准输出重定向到这样的文件：

```
./a.out 2>&1 > out.txt 
```

这几乎捕获了我的应用程序中的所有内容，但控制台上仍有一些与我正在使用的库相关的输出。我的问题是：

*   除了标准输出/标准错误还有什么？（标准输入除外）
*   如果有，在我的情况下如何识别这些？
*   然后我怎样才能将这些重定向到同一个文件？

**注意：**如果有人熟悉，库称为[SystemC](http://www.accellera.org/downloads/standards/systemc)（它是 C++ 之上的事件驱动仿真库/语言，主要用于系统/硬件设计）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T16:06:55.420

嗯，我认为可能发生的是您的程序正在打印到控制终端。一种可能性是让您的程序作为没有控制终端的守护程序运行。我有一个`C`函数，我调用它来将我的代码变成一个守护进程，这是我从一本名为[《Linux 编程接口》](http://man7.org/tlpi/)的书中得到的，我强烈推荐这本书。

```
#define BD_NO_CHDIR 01 /* Don't chdir("/") */
#define BD_NO_CLOSE_FILES 02 /* Don't close all open files */
#define BD_NO_REOPEN_STD_FDS 04 /* Don't reopen stdin, stdout, and
               stderr to /dev/null */
#define BD_NO_UMASK0 010 /* Don't do a umask(0) */
#define BD_MAX_CLOSE 8192 /* Maximum file descriptors to close if
             sysconf(_SC_OPEN_MAX) is indeterminate */

int becomeDaemon(int flags){

  int maxfd, fd, new_stdout;
  switch (fork()) { /* Become background process */
  case -1: return -1;
  case 0: break; /* Child falls through... */
  default: _exit(EXIT_SUCCESS); /* while parent terminates */
  }
  if (setsid() == -1) /* Become leader of new session */
   return -1;
  switch (fork()) { /* Ensure we are not session leader */
  case -1: return -1;
  case 0: break;
  default: _exit(EXIT_SUCCESS);
  }

  if (!(flags & BD_NO_UMASK0))
    umask(0); /* Clear file mode creation mask */
 if (!(flags & BD_NO_CHDIR))
   chdir("/"); /* Change to root directory */
 if (!(flags & BD_NO_CLOSE_FILES)) { /* Close all open files */
   maxfd = sysconf(_SC_OPEN_MAX);
   if (maxfd == -1) /* Limit is indeterminate... */
     maxfd = BD_MAX_CLOSE; /* so take a guess */
   for (fd = 0; fd < maxfd; fd++)
     close(fd);
 }

 if (!(flags & BD_NO_REOPEN_STD_FDS)) {

   /*
     STDIN = 0
     STDOUT = 1
     STDERR = 2
   */

   close(0); /* Reopen standard fd's to /dev/null */
   fd = open("/dev/null", O_RDWR);
   if (fd != 0) /* 'fd' should be 0 */
     return -1;
   if (dup2(0, 1) != 1)
     return -1;
   if (dup2(0, 2) != 2)
     return -1;
  }

 return 0;
} 
```

现在我想您可以将行更改`open("/dev/null", O_RDWR)`为`open("/home/you/output.txt", O_RDWR)`并将输出重定向到那里。当然，那么您将无法直接从终端输入到您的程序，但是从您收到的错误消息的声音来看，我认为您无论如何都在使用套接字，因此可以编写一个客户端来为您执行此操作如果有必要。

希望有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T13:01:47.440

您必须在任何流到流重定向之前设置输出文件，否则 bash 无法检测到要输出的文件名。在您的情况下，您可以看到 stderr 输出。

请参阅[bash 重定向](http://www.gnu.org/software/bash/manual/html_node/Redirections.html)参考手册。

解决方案：

```
./a.out >out.txt 2>&1 
```

要不就：

```
./a.out &>out.txt 
```

# scala - 改进播放模板中的 scala 算法

> ID：16147659
> 
> 赞同：0
> 
> 时间：2013-04-22T12:57:01.720
> 
> 标签：scala, playframework, playframework-2.0

我想改进播放模板中的算法：

链接列表.scala.html

```
<div class="row">
    <div class="span6">
        <table class="table table-hover">
            @for((l,i) <- linkList.zipWithIndex) {
                @if((i/2)*2==i) { 
                    @* even index *@
                    @components.link(l)
                }
            }
        </table>
    </div>
    <div class="span6">
        <table class="table table-hover">
            @for((l,i) <- linkList.zipWithIndex) {
                @if((i/2)*2!=i) { 
                    @* ood index *@
                    @components.link(l)
                }
            }
        </table>
    </div>
</div> 
```

链接.scala.html

```
@(link: Link) 
<tr>
    <td><a href="@link.uri.toString()" class="btn btn-primary">@link.uri.getHost()@link.uri.getPath()</a>&nbsp;</td>
    <td>@link.description</td>
</tr> 
```

我想`<div class="span6">`在linklist.scala.html 中只有一个。唯一的区别是 if 语句，我将链接列表分为两部分（具有奇数和偶数索引号）。欢迎任何建议。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T14:07:22.560

不确定确切的语法，但我认为这种方法应该为您提供您正在寻找的标记：

```
<div class="row">
  @for(remainder <- List(0,1)) {
    <div class="span6">
      <table class="table table-hover">
        @for((l,i) <- linkList.zipWithIndex) {
          @if(i%2 == remainder) { 
            @components.link(l)
          }
        }
      </table>
    </div>
  }
</div> 
```

# bash - 给定周数的日期，bash

> ID：16147665
> 
> 赞同：-2
> 
> 时间：2013-04-22T12:57:17.060
> 
> 标签：bash, date, week-number

在 Bourne shell 中，我需要知道哪些日期属于同一周。例如，2013 年的第 16 周从 4 月 22 日开始，到 4 月 28 日结束。使用“日期”命令，我可以获得某个日期的周数，但我需要反过来。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T13:04:23.073

一种获取周数的廉价方法 - 使用`ncal`，周数在日历下方输出

例如

```
ncal -w 4 2013 
```

或者

```
ncal -w 2013 
```

# cordova - 从 Apache Cordova 开始

> ID：16147671
> 
> 赞同：7
> 
> 时间：2013-04-22T12:57:38.053
> 
> 标签：cordova

我刚刚下载了 Apache Cordova，似乎有特定于平台的版本。在将其移植到另一个平台之前，我是否必须为特定平台编写代码？是否可以创建一个多平台项目？我是否正确理解我应该开始工作的方式？

这也是 Apache Cordova 主页所说的。

> 由于这些 JavaScript API 在多个设备平台上是一致的，并且基于 Web 标准构建，因此该应用程序应该可以移植到其他设备平台，而只需极少的更改甚至无需更改。

谢谢。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-04-22T15:36:24.367

我认为您对科尔多瓦的理解存在细微差距。Cordova 用于构建*混合移动应用程序。*混合意味着您的应用程序基本上是一个使用 HTML/CSS/JavaScript 构建的标准网站，但它*可以访问本机设备功能。*通常，当您使用 JavaScript 构建常规网站时，如果不直接使用本机代码，您将无法做某些事情，例如拍照或通过手机上的联系人。但是，Cordova 允许您仅从 JavaScript 访问这些本机函数！而且您永远不必接触本机代码！因此，您将使用 HTML/JavaScript/CSS 构建一个应用程序（一个统一的代码库！），并且在您完成构建过程之后，将有多个应用程序文件，一个用于您“构建”它的每个本机平台。

是的，使用 Cordova 的一大好处是您可以轻松创建多平台应用程序。你要做的是首先在 HTML/JavaScript 中创建你的应用程序——当你需要使用原生 API 时，你可以调用适当的[Cordova JavaScript API——](http://cordova.apache.org/docs/en/2.6.0/)这个 API 在所有平台上都是通用的，这意味着调用 say`cordova.someAPI.doCoolDeviceOnlyThingThatBrowsersCantDoYet(parameter)`将期望相同参数，无论用户使用什么设备。然后，您构建的 Cordova 应用程序将调用等效的本机功能，无论该应用程序是为哪个操作系统构建的。

为了为 iOS 和 Android 创建应用程序，您需要[为这两个平台设置适当的构建工具](http://cordova.apache.org/docs/en/2.6.0/guide_getting-started_index.md.html#Getting%20Started%20Guides)。然后您要做的是将构成您的应用程序的 HTML/Javascript 文件导入这些工具并“构建”本机应用程序，它将您的 HTML/JavaScript 包装在本机代码中，添加设备特定的 Cordova 代码（通常以像 Android 上的 cordova.jar 之类的东西）并创建可下载的包，然后您可以将其发布到应用商店。[将您的应用程序“编译”到多个平台的过程可能会很痛苦，但幸运的是，有一项自动化服务可以提供帮助，因此请在仍然免费的](https://build.phonegap.com/)情况下查看PhoneGap 构建。

您应该能够使用您最喜欢的 HTML 编辑器、Ripple 模拟器和 Cordova API 参考指南开始构建应用程序。但是，您可能需要一个真实的设备来测试和构建您的应用程序，因此您可能必须设置至少一个本机环境（例如带有 Android ADT 和适当的 cordova.js 文件的 Eclipse。）（cordova .js 文件在平台之间非常相似，除非平台之间存在差异，例如在处理 JavaScript 和本机代码之间通信的桥中。）

希望我已经回答了你所有的问题——祝你好运！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-22T13:06:28.580

只要您不需要[API](http://docs.phonegap.com/guide_getting-started_index.md.html)，您就可以在浏览器中编写所有代码。但是，当您想要测试 Cordova API 功能时，您必须在平台上运行。

平台特定文件（例如 android 的 eclipse 项目）包含一个 www 文件夹（android 的 assets/www），您必须在其中放置所有代码。在该文件夹中，所有内容都应该是跨平台的，但有一个例外：cordova.js 文件，其中包含到每个平台的本机代码的桥梁。

您也可以尝试[Ripple](https://chrome.google.com/webstore/detail/ripple-emulator-beta/geelfhphabnejjhdalkjhgipohgpdnoc?hl=en)直接在浏览器上运行项目，这具有更好的调试工具的优势。不过，它远非功能完整。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-15T18:38:58.883

@MBillau 的回答完美地描述了这个概念，从源代码的角度来看，有一些特定的 CLI 相关命令：

*   `cordova create com.domain.projectname`- 创建一个项目。

*   `cordova platform add ios`或`cordova platform add android`- 添加目标平台，在创建项目后记住，否则您可能会在终端中`cd com.domain.projectname`看到类似的内容。`Current working directory is not a Cordova-based project.`

*   `cordova plugin add pluginname`- 将特定插件添加到项目中，您将经常需要这样做。在您的终端中，您应该有类似`Installing "pluginname" for ios`and的东西`Adding pluginname to package.json`。

*   最后`cordova build`or `cordova build ios`or`cordova build android`构建它，`cordova emulate android`或者`cordova run android`在您的设备上运行它或在 Android 上模拟。对于 iOS，您将需要 Xcode。

您可以在[https://cordova.apache.org/docs/en/latest/上找到更多信息](https://cordova.apache.org/docs/en/latest/)

# java - 具有部分状态转移的 JGroups ReplicatedHashMap

> ID：16147675
> 
> 赞同：0
> 
> 时间：2013-04-22T12:57:58.890
> 
> 标签：java, replication, jgroups

我希望通过附加功能扩展 JGroups [ReplicatedHashMap 演示](http://www.jgroups.org/demos.html)- 支持在同一集群内的不同实例之间复制命名子图的能力。

基本思想是，并非所有客户端都需要拥有整个 hashmap 的本地副本，但可能需要根据需要请求额外的 hashmap 块。每个客户端都会从一个相对较小的基本数据集开始，例如，与状态 ID“base_data”相关联的状态。由于他们需要更专业的数据，他们将执行部分状态传输，请求他们需要的确切数据；与状态 ID“specialized_data_1”关联的状态。这创建了一种本地化缓存服务，其中对缓存的更新会传播到集群内的适当客户端。

这是对 JGroups 的部分状态转移的适当使用吗？有一个更好的方法吗？我完全误解了部分状态转移吗？既然 JGroups 3.x 不支持部分状态传输，那怎么能在那里实现呢？[除了文档中的这个](http://www.jgroups.org/manual/html/user-channel.html)小部分（滚​​动/搜索“3.6.15\. Partial state transfer”）之外，我还没有找到太多关于部分状态转移的文档，所以我很感激您推荐的任何其他好的参考资料。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T05:51:49.173

Partial state transfer was removed some time ago, as it was broken, see the link below for details. You could probably do this with messages. What you want to do sounds a bit like what Infinispan already provides, so you may want to take a look at their DIST mode.

[http://jgroups.1086181.n5.nabble.com/Partial-state-transfer-removed-in-3-0-td3173.html](http://jgroups.1086181.n5.nabble.com/Partial-state-transfer-removed-in-3-0-td3173.html)

# php - php 中的用户体验 strip_tags 或 htmlentities 哪个更好？

> ID：16147678
> 
> 赞同：-1
> 
> 时间：2013-04-22T12:58:02.083
> 
> 标签：php, html, html-entities, strip-tags

我有一个网络表单，要求用户提供文章名称和文章作者。在 php 后端，为了防止恶意脚本，我有两个选择 - 使用条形标签来防止用户提供的任何标签或通过 htmlentities 转义输入。

考虑安全性和更好的用户体验这两个因素。我应该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T13:01:22.467

这取决于您是否希望显示这些字符。

如果您只是在处理作者姓名和文章标题，您可能可以安全使用`strip_tags()`，但如果您要获取整篇文章，它可能包含像`>`,`<`所以`/`我建议的字符`htmlentities()`。

# java - 当我的应用程序收到通知时打开屏幕背光

> ID：16147680
> 
> 赞同：0
> 
> 时间：2013-04-22T12:58:08.623
> 
> 标签：java, android

当我的应用程序收到通知时，我需要打开屏幕背光。我听到声音、LED 灯亮起和振动，但屏幕保持关闭。

我尝试使用 PowerManager：

```
PowerManager pm = (PowerManager) getSystemService(Context.POWER_SERVICE);
PowerManager.WakeLock wl = pm.newWakeLock(PowerManager.SCREEN_DIM_WAKE_LOCK, "My Tag");
wl.acquire();
..screen will stay on during this section..
wl.release(); 
```

但没有结果。

通知代码如下所示：

```
public void showNotification( String contentTitle, String contentText ) {
   int icon = R.drawable.notification;
   long when = System.currentTimeMillis();

   Notification notification = new Notification(icon, contentTitle, when);

   notification.flags |= Notification.FLAG_AUTO_CANCEL;
   notification.defaults |= Notification.DEFAULT_LIGHTS;

   Intent notificationIntent = new Intent(this, myapp.class);
   Context context = this.getApplicationContext();

   PendingIntent contentIntent = PendingIntent.getActivity(this, 0, notificationIntent, 0);
   notification.setLatestEventInfo(this, contentTitle, contentText, contentIntent);

   NotificationManager nm = (NotificationManager)this.getSystemService(Context.NOTIFICATION_SERVICE);

   Vibrator v = (Vibrator) getSystemService(Context.VIBRATOR_SERVICE);
   v.vibrate(300);

   notification.sound = Uri.parse("android.resource://" + context.getPackageName() + "/" + R.raw.sonar_ping);

   notification.flags |= Notification.FLAG_SHOW_LIGHTS;
   notification.ledARGB = 0x00000000;
   notification.ledOnMS = 0;
   notification.ledOffMS = 0;

   nm.notify(1, notification);

} 
```

当通知出现在状态栏中时如何打开屏幕？我需要在这段代码中添加什么来实现这一点？

感谢您的任何建议和帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T13:00:54.930

试试这个

```
PowerManager pm = (PowerManager) context.getSystemService(Context.POWER_SERVICE);
    PowerManager.WakeLock wakeLock = pm.newWakeLock(PowerManager.FULL_WAKE_LOCK |
            PowerManager.ACQUIRE_CAUSES_WAKEUP |
            PowerManager.ON_AFTER_RELEASE, "WakeLock");
    wakeLock.acquire(); 
```

并且不要忘记释放它。

# c++ - 模板类中的模板方法特化

> ID：16147685
> 
> 赞同：5
> 
> 时间：2013-04-22T12:58:31.187
> 
> 标签：c++, templates, specialization

我需要（想要）在模板类中专门化一个方法，只允许某些原始类型。（这不是这个重复的[问题](https://stackoverflow.com/questions/4994775/c-specialization-of-template-function-inside-template-class)）

好吧，我有这门课：

```
template<typename TYPE, size_t NB>
class X
{
public:
   template<typename arg_type>
   X& get(const arg_type var);
} 
```

我想专门 arg_type 只允许无符号整数，如下所示：

```
template<typename TYPE, size_t NB> template<unsigned long> X& X::get(const unsigned long val); 
```

但可以肯定的是，上面的方法不起作用，无论是在 msvc2011 还是在 gcc 上

更具体地说，我尝试做的是基于上面的模板类型编写代码，并编写专门化，以便使用此类 X 的任何人都不能将此方法用于我专门处理的其他东西。

这甚至可能吗？如果是的话，这样做不好吗？

提前致谢，jav974

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T13:03:11.977

专业不是你想要的。使用特化，您可以提供一种特殊的方式来处理使用无符号整数类型的模板方法的实例化，但没有什么能阻止用户用另一种类型实例化它。

[您可以使用一些SFINAE](http://en.wikipedia.org/wiki/Substitution_failure_is_not_an_error)来实现这一点：

```
#include <type_traits>    

template<typename TYPE, size_t NB> 
class X
{
public:
    template<typename arg_type> 
    typename std::enable_if<std::is_unsigned<arg_type>::value, X&>::type  // arg_type is unsigned
    get(arg_type val) 
    {

    }
}; 
```

您还可以使用`static_assert`，以便用户获得更友好的错误消息：

```
template<typename arg_type> 
X& get(arg_type val) 
{
    static_assert(std::is_unsigned<arg_type>::value, "The argument should be unsigned!");
} 
```

如果您希望`TYPE`模板参数遵循相同的规则，您还可以使用`static_assert`：

```
template<typename TYPE, size_t NB> 
class X
{
public:
    static_assert(std::is_unsigned<TYPE>::value, "TYPE should be unsigned!");
}; 
```

# asp.net - Windows 8 asp 页面正在获取不同的日期格式

> ID：16147688
> 
> 赞同：1
> 
> 时间：2013-04-22T12:58:37.783
> 
> 标签：asp.net, windows-8, asp-classic

最近，在我的应用程序测试后安装提到印度的地区和位置时，我将操作系统更新到 windows 8，我在 asp.net 页面中发现了一些日期时间问题，所以我将地区和位置更改为美国

所以在那个asp页面之后修复了这个问题也给了我同样的问题我在注册表文化信息en-IN到en-US和sDate格式到mm/dd/yyyy但是在asp页面中

当我使用 Cdate(DATE) 将日期时间转换为字符串时，它给了我 dd-mm-yyyy。如何获得 mm/dd/yyyy 格式？

所以请帮我解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T13:02:46.640

您应该能够添加`<globalization />`到您的网络配置中。这将确保该站点忽略服务器上的任何设置（在这种情况下是您的 PC ..）

将以下内容添加到您的 web.config

```
 <system.web>
          <globalization uiCulture="en" culture="en-US" />
      </system.web> 
```

完成此操作后，您可以根据需要将自己的 PC 设置恢复为印度语言。

`ToString`或者，您可以将格式添加到`DateTime`.

IE

```
 myDate.ToString("MM/dd/yyyy") 
```

# html - 如何减少表格单元格中不需要的空间

> ID：16147690
> 
> 赞同：0
> 
> 时间：2013-04-22T12:58:43.577
> 
> 标签：html, css, django, django-templates

在我的 html 中，我使用表格来显示日期选择器。修复日期选择器后，单元格占用了大量空间，因此我无法将该表格保留在我的网页旁边。

这是我的 html ，

```
<table border="1"  cellspacing="0" >
  <tr>
    <td><input id="ir-box" type="checkbox"/></td><td colspan="3">Only show LIVE reports</td>
  </tr>
  <tr>
    <td colspan="3"><input type="text" value="Keyword Search"/></td><td>{% include "buttons/go.html" %}</td>
  </tr>
  <tr>
    <td colspan="4"><input class="incident-type" type="text" value="All Incident types" /></td>
  </tr>
  <tr>
    <td colspan="4"><input class="incident-type" type="text" value="All Location types"/></td>
  </tr>
  <tr>
    <td colspan="2">From</td><td colspan="2">To</td>
  </tr>
  <tr>
    <td colspan="2"><input class="datefield" id="fromdate" type="text" value="dd/mm/yyyy"/></td><td colspan="2"><input class="datefield" id="todate" type="text" value="dd/mm/yyyy"/></td>
  </tr>
  <tr>
    <td>s</td><td>f</td><td>s</td><td>{% include "buttons/go.html" %}</td>
  </tr>
</table> 
```

我正在使用 django web 框架，使用 html 设计网页。

1.如何减少单元格内的空间，以便我可以将表格放在网页旁边。需要帮助

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T13:35:01.550

您只需在 CSS 文件中为表格适当地应用填充。例如（CSS）

```
tr {padding: 5px 5px 5px 5px;} 
```

这是顶部、右侧、底部、左侧和说明填充的简写方式。

更多：[http ://www.w3schools.com/css/css_padding.asp](http://www.w3schools.com/css/css_padding.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T13:01:34.777

您可以使用 HTML 中的单元格填充来减少空间，如下所示：[http ://www.w3schools.com/tags/tryit.asp?filename=tryhtml_table_cellpadding2](http://www.w3schools.com/tags/tryit.asp?filename=tryhtml_table_cellpadding2)

正确的方法是用 CSS 为 td 设置 padding

# r - R中的欧几里得距离使用矩阵中的两个变量

> ID：16147692
> 
> 赞同：3
> 
> 时间：2013-04-22T12:58:45.237
> 
> 标签：r, euclidean-distance

我对 R 很陌生，我正在尝试从我的矩阵中的两个变量和净距离（我的数据的第一个点和最后一个点之间的欧几里得距离）计算总距离（或所有数据点上的欧几里得距离的总和）。所以只是我数据的背景。我的数据通常是一个包含 5 个变量的 csv 文件：单元格轨迹（称为 A）、时间间隔、每个单元格的 X 和 Y 位置、V = 速度。每个数据大约有 90 个轨迹并且每个轨道都应该相互独立地对待。

```
dput(head(t1))
structure(list(A = c(0L, 0L, 0L, 0L, 0L, 0L), T = 0:5, X = c(668L, 
668L, 668L, 668L, 668L, 668L), Y = c(259L, 259L, 259L, 259L, 
259L, 259L), V = c(NA, 0, 0, 0, 0, 0)), .Names = c("A", "T", 
"X", "Y", "V"), row.names = c(NA, 6L), class = "data.frame") 
```

我之前不知道 dist() 函数，所以我做了自己的函数：

```
GD.data <- function (trackdata)
{A= trackdata(, 1); V=trackdata(, 5);
 for (i in min(A):max(A))
   while (A<=i) {GD(i) = (sum (V)*(1/25))
                 return (GD(i))} 
```

这没有用。我使用 A 作为轨道的标识符，并且由于总距离也可以计算为：距离 = 速度（t1-t0），我只是将所有速度乘以我的时间间隔（因为它始终是 1/25 秒。

如何以我的 A 作为标识符使用 dist() 函数？我需要这个，因为每个轨道的计算应该是分开的。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T13:43:31.817

由于您以恒定的时间间隔测量速度，您可以将其相加以获得移动的总欧几里德距离，您实际上可以使用`base`R 函数按每个轨道标识符`aggregate`对数据求和，这就是以下命令的作用：`V``A`

```
aggregate( V ~ A , data = t1 , sum , na.rm = TRUE ) 
```

基本上这就是说，`aggregate`V 代表 A 的每个值。聚合函数是`sum`（您可以想象，通过使用而不是 sum ，这很容易成为`mean`每个轨道的速度）。`mean`我们向它传递了一个额外的参数`sum`is `na.rm`，告诉它忽略数据中的 NA（我假设`t = 0`每个轨道都在）。

**按轨道计算第一个位置和最后一个位置之间的“乌鸦飞”的距离：**

为此，我们可以`split`通过轨道标识符将数据帧转换为子数据帧`A`，然后对数据的每个子集进行操作，使用`lapply`对每个子数据帧的第一行和最后一行应用简单的斜边计算。

```
## Split the data
dfs <- split(t1,t1$A)

## Find hypotenuse between first and last rows for each A
lapply( dfs , function(x){
  j <- nrow(x)
  str <- x[1,c("X","Y")]
  end <- x[j,c("X","Y")]
  dist <- sqrt( sum( (end - str)^2 ) )
  return( dist )
} ) 
```

# c++ - 数学 printf 样式计算

> ID：16147694
> 
> 赞同：7
> 
> 时间：2013-04-22T12:58:45.580
> 
> 标签：c++, math

我正在寻找一种灵活但也相当快速的方法来在描述性计算器字符串的基础上进行简单的值转换和计算。

例如这样的：

```
double r = 1.0;
double d = mathf( "sin(%1)+2*%2", r, M_PI );
double e = mathf( "%1 / 180.0 * %2", r, M_PI ); 
```

重要的想法是可以在运行时评估数学运算并从配置文件中加载。我什至在考虑某种脚本语言集成，但它似乎并不流畅和快速？

如果 C++ 存在诸如 mathf 之类的东西，有什么想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T13:21:34.683

尝试多搜索一下。这是很常见的事情。它正在解析，每个编译器都会这样做。使它有点像parsception。

[从字符串求解方程以得到 C](https://stackoverflow.com/questions/2844947/solve-equation-from-string-to-result-in-c)

[计算一个简单的字符串数学表达式](https://stackoverflow.com/questions/11172217/evaluate-a-simple-string-mathmatical-expression)

[将字符串转换为数学评估](https://stackoverflow.com/questions/9439295/convert-string-to-mathematical-evaluation)

等等等等

有两种方法可以解决，一种是自己编写，第二种是找到一个看起来像你正在寻找的库。我不知道在 C++ 标准库、ruby 和许多其他语言中肯定有类似的东西，你可以评估字符串，但在 C++ 中，你可能不得不从网上借一个库或者其他的东西。试试最后一个链接，它看起来很有希望。

# r - 具有未确定的许多参数的 R 函数

> ID：16147695
> 
> 赞同：0
> 
> 时间：2013-04-22T12:58:46.300
> 
> 标签：r

有谁知道是否可以定义一个自己的函数，将未确定的许多参数作为输入？我的具体问题是我想编写一个自己的`rbind`函数，该函数能够使用类似的行名来绑定 data.frames（并且只分配新的数字行名）。

这种方法显然是错误的，但我希望你能得到我的问题/想法：

```
rbindDF <- function(x){
 N <- length(x)
 # Join x[1] and x[2]
 ...
 # Join x[n-1] and x[n] 
} 
```

我试图找到它是如何完成的，例如 in `rbind`or`sum`但我不记得如何从 .Internal 函数中查看源代码。

使用调用可能是一种折衷方案，但如果存在三个数据帧并且例如在两个这样的情况下，`rbindDF(list(...))`如果可以以这种方式完成，我会很高兴。`rbindDF(data1,data2,data3)``rbindDF(data1,data2)`

非常感谢任何提示！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T13:06:47.580

您可以使用省略号运算符 ( `...`)。例如：

```
rbindDF <- function(...) {

    df_list <- list(...)
    do.call(rbind, df_list)

} 
```

这将允许传入任意数量的数据帧：

```
rbindDF(df1, df2, df3) 
```

我认为这个问题只是需要传递未知数量的参数，而不是函数本身的内容。

# iphone - UIModalPresentationFormSheet 中的 MPMoviePlayerViewController 再次重新加载

> ID：16147697
> 
> 赞同：1
> 
> 时间：2013-04-22T12:58:49.957
> 
> 标签：iphone, ios, xcode, ipad

我正在 UIModalPresentationFormSheet 中使用 presentMoviePlayerViewControllerAnimated 加载视频。当我通过录制完成视图（UIModalPresentationFormSheet）再次制作动画时从视频中恢复过来。如何禁用该动画或禁用重新加载视图？

# android - OpenGL ES：使用 Tegra 特定的扩展 (GL_EXT_texture_array)

> ID：16147700
> 
> 赞同：3
> 
> 时间：2013-04-22T12:58:52.253
> 
> 标签：android, opengl-es-2.0, tegra

我目前正在使用 NDK 为 Android 开发 OpenGL-ES 应用程序。该应用程序将极大地受益于以下 Open-GL 扩展：

GL_EXT_texture_array

（详细信息：[GL_EXT_texture_arary](http://developer.download.nvidia.com/opengl/specs/GL_EXT_texture_array.txt)）
我的 Tegra-3 设备（华硕 EeePad Transformer Prime Tf-201）支持该扩展

我现在面临的问题是，我不知道如何使扩展程序可用于我的应用程序，因为它不包含在 Open-GL ES API 注册表中。
（请参阅“扩展规范”：[http](http://www.khronos.org/registry/gles/) ://www.khronos.org/registry/gles/ ）
但是我注意到一个名为“GL_NV_texture_array”的扩展，它似乎具有相同的用途，但我的 Tegra-3 设备不支持.

我知道使用函数指针包含扩展的可能性。但我认为可能有更舒适的方式。我还找到了一个头文件 (gl2ext_nv.h)，其中包含必要的扩展名。但是当你通过谷歌搜索它时，该文件总是特定项目的一部分，而不是官方的。我还下载了 Tegra Android Development Pack (2.0)，其中既不包含此头文件，也不包含所需的扩展名。

谁能给我解释一下，好吗？
如何使用我的 Tegra-3 设备支持的 Open-GL ES 扩展，而任何官方 Open-GL ES 特定标头（在 NDK 中）似乎都不支持这些扩展？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-26T03:46:13.333

当您说您的 Tegra 3 设备支持`GL_EXT_texture_array`但*不* `GL_NV_texture_array`支持时，我假设您通过调用`glGetString(GL_EXTENSIONS)`.

`GL_NV_texture_array`与 非常相似`GL_EXT_texture_array`，仅限于 2d 纹理数组。毫不奇怪，它使用许多与 GL_EXT_texture_array 相同的常量，只是名称不同。

[GL_NV_texture_array](https://www.khronos.org/registry/gles/extensions/NV/NV_texture_array.txt)：

```
TEXTURE_2D_ARRAY_NV                             0x8C1A
TEXTURE_BINDING_2D_ARRAY_NV                     0x8C1D
MAX_ARRAY_TEXTURE_LAYERS_NV                     0x88FF
FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER_NV         0x8CD4
SAMPLER_2D_ARRAY_NV                             0x8DC1 
```

[GL_EXT_texture_array](https://www.opengl.org/registry/specs/EXT/texture_array.txt)：

```
TEXTURE_2D_ARRAY_EXT                            0x8C1A
TEXTURE_BINDING_2D_ARRAY_EXT                    0x8C1D
MAX_ARRAY_TEXTURE_LAYERS_EXT                    0x88FF
FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER_EXT        0x8CD4
SAMPLER_2D_ARRAY_EXT                            0x8DC1 
```

[这个版本的 gl2ext_nv.h](https://bitbucket.org/evandromillian/ogre3d-for-marmalade/src/5ffc27af858d568b54cff272dd401e72748aceb7/RenderSystems/GLES2/include/EGL/gl2ext_nv.h)定义了常量 for`GL_EXT_texture_array`但*不是*for `GL_NV_texture_array`，所以也许 nVidia 现在使用旧名称。如果您找不到更新版本的标头，只需包含此标头即可。

要访问 GL 扩展提供的函数，请使用`eglGetProcAddress`将函数分配给函数指针。

```
// The function pointer, declared in a header.
// You can put this in a class instance or at global scope.
// If the latter, declare it with "extern", and define the actual function
// pointer without "extern" in a single source file.
PFNGLFRAMEBUFFERTEXTURELAYEREXTPROC glFramebufferTextureLayerEXT; 
```

在检查是否存在 GL_EXT_texture_array 扩展的函数中，如果找到，则获取函数的地址并将其存储在函数指针中。对于 OpenGL-ES，这意味着询问 EGL：

```
glFramebufferTextureEXT = (PFNGLFRAMEBUFFERTEXTURELAYEREXTPROC) eglGetProcAddress("glFramebufferTextureLayerEXT"); 
```

现在您可以像使用常规 OpenGL 的一部分一样使用该函数。

# weblogic - 在 WebLogic 中禁用锁定和编辑模式

> ID：16147705
> 
> 赞同：1
> 
> 时间：2013-04-22T12:59:07.630
> 
> 标签：weblogic

我有一个在 WL 服务器中安装新应用程序的代码。我的问题是，如果我处于“锁定和编辑”模式，它不会通过，直到我通过单击控制台中的“激活更改”按钮来更改模式。有没有办法通过Java以某种方式控制该选项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T01:55:06.010

您可以使用 Weblogic 脚本工具 (WLST) 控制 Weblogic。

WLST 可以使用 weblogic.jar 嵌入到 Java 中，您可以在 Weblogic 安装目录中找到它。

可以使用这些包调用 WLST 命令：

```
import org.python.util.InteractiveInterpreter;
import weblogic.management.scripting.utils.WLSTInterpreter; 
```

可以在此处找到有关如何将 WLST 脚本转换为 java 代码的示例： [https ://forums.oracle.com/forums/thread.jspa?messageID=10757646](https://forums.oracle.com/forums/thread.jspa?messageID=10757646)

# r - 从序列中检索日期不给出值

> ID：16147706
> 
> 赞同：0
> 
> 时间：2013-04-22T12:59:12.157
> 
> 标签：r

我正在尝试在**R中运行以下代码**

```
> mySeq <-  seq(as.Date("2012-1-1",format = "%Y-%m-%d"),
          as.Date("2012-1-3",format = "%Y-%m-%d"),
          by="1 day")

> for (i in mySeq){print(i)} 
```

我得到：

```
[1] 15340
[1] 15341
[1] 15342 
```

但`mySeq[1]`返回`"2012-01-01"`

为什么？我在这里想念什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T13:05:09.323

您的日期值在函数中转换为数字，`for()`以将它们用作索引值。

相反，您可以使用`seq_along()`来获取索引值，然后打印`mySeq[i]`。

```
for(i in seq_along(mySeq)) {print(mySeq[i])} 
```

# c# - 捕获用户控件中的所有鼠标点击和按键

> ID：16147714
> 
> 赞同：5
> 
> 时间：2013-04-22T12:59:26.653
> 
> 标签：c#, winforms

**我想捕获特定用户控件中的**所有按键和鼠标点击。我需要这样做才能创建空闲检测，以便如果用户有一段时间没有在用户控件中执行任何操作，我可以解锁实体。

我的第一次尝试是`PreProcessMessage`检测 Windows 消息，但它似乎没有被调用？我的第二个是使用 DefWndProc，但不会为这些消息调用它。

我怎样才能为用户控件及其所有子控件获取`WM_KEYDOWN`& ？`WM_MOUSEUP`

**更新**

`ProcessKeyPreview`用于检测键

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T13:15:21.280

对于键盘方面，您可以尝试`ProcessCmdKey`在`UserControl`.

`UserControl.cs`：

```
protected override bool ProcessCmdKey(ref Message msg, Keys keyData)
{
    //a key has been pressed within your user control
    //invoke event or some other action
    //...

    return base.ProcessCmdKey(ref msg, keyData);
} 
```

对于鼠标，我想您实现[IMessageFilter](http://msdn.microsoft.com/en-gb/library/system.windows.forms.imessagefilter.aspx)接口的[PreFilterMessage](http://msdn.microsoft.com/en-us/library/system.windows.forms.imessagefilter.prefiltermessage.aspx)方法的 UserControl 可能是前进的方向（尽管我不确定这是否特定于用户控件）。

**编辑**

我快速浏览了一下，`IMessageFilter`我认为我有一些可能有用的东西，尽管它看起来有点令人费解。

创建一个`MessageHandler`实现`IMessageFilter`.

```
class MessageHandler : IMessageFilter
{
     private int WM_LBUTTONUP = 0x0202; //left mouse up
     private int WM_MBUTTONUP = 0x0208; //middle mouse up
     private int WM_RBUTTONUP = 0x0205; //right mouse up

     //stores the handles of the children controls (and actual user control)
     List<IntPtr> windowHandles = new List<IntPtr>();
     public MessageHandler(List<IntPtr> wnds)
     {
         windowHandles = wnds;
     }

     public bool PreFilterMessage(ref Message m)
     {
         //make sure that any click is within the user control's window or 
         //its child controls before considering it a click (required because IMessageFilter works application-wide)
         if (windowHandles.Contains(m.HWnd) && (m.Msg == WM_LBUTTONUP || m.Msg == WM_MBUTTONUP || m.Msg == WM_RBUTTONUP))
         {
              Debug.WriteLine("Clicked");                
         }
         return false;
     }
 } 
```

在您的用户控件（或新类）中，您可以使用 P/Invoke 来获取给定父级的子窗口。来自[pinvoke.net](http://pinvoke.net/default.aspx/user32/EnumChildWindows.html)

```
public delegate bool EnumWindowProc(IntPtr hWnd, IntPtr parameter);

[DllImport("user32")]
[return: MarshalAs(UnmanagedType.Bool)]
public static extern bool EnumChildWindows(IntPtr window, EnumWindowProc callback, IntPtr i);

private static List<IntPtr> GetChildWindows(IntPtr parent, bool addParent = true)
{
    List<IntPtr> result = new List<IntPtr>();
    GCHandle listHandle = GCHandle.Alloc(result);
    try
    {
        EnumWindowProc childProc = new EnumWindowProc(EnumWindow);
        EnumChildWindows(parent, childProc, GCHandle.ToIntPtr(listHandle));
    }
    finally
    {
        if (listHandle.IsAllocated)
           listHandle.Free();
    }

    if (addParent)
      result.Add(parent);

    return result;
}

private static bool EnumWindow(IntPtr handle, IntPtr pointer)
{
    GCHandle gch = GCHandle.FromIntPtr(pointer);
    List<IntPtr> list = gch.Target as List<IntPtr>;
    if (list == null)
    {
        throw new InvalidCastException("GCHandle Target could not be cast as List<IntPtr>");
    }
    list.Add(handle);
    //  You can modify this to check to see if you want to cancel the operation, then return a null here
    return true;
} 
```

将`GetChildWindows`返回我们需要的窗口。我对其进行了一些修改并添加了一个可选的`addParent`布尔值，它将用户控件本身添加到列表中。

在您的`UserControl.cs`构造函数中，我们可以注册`MessageFilter`并传递句柄列表（或者，只要您知道用户控件的句柄，您就可以通过不同的形式添加它）。

```
public MyControl()
{
    InitializeComponent();
    Application.AddMessageFilter(new MessageHandler(GetChildWindows(this.Handle)));
} 
```

您现在应该能够检测到用户控件及其任何子窗口中的三个鼠标按钮向上事件。不要忘记`Application.RemoveMessageFilter`在您的应用程序关闭或您的应用程序`UserControl`关闭/处置时致电。

正如我所说，这不是最直接的方法，但如果标准事件处理程序不适合您，它会捕获点击（我假设您已经尝试订阅标准 mouseclick 事件）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T13:28:24.893

我会捕捉到以下事件：

[http://msdn.microsoft.com/en-us/library/system.windows.forms.control.click.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.click.aspx) [http://msdn.microsoft.com/en-us/library/system.windows.forms.control .textchanged.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.textchanged.aspx)以及子控件 的任何点击/更改事件。让所有事件处理程序调用相同的通用函数来保存最后一个操作的时间戳。

```
Click += ClickHandler;
TextChanged += ChangedHandler;

foreach(var control in Controls)
{
    control.Click += ClickHandler;
    control.TextChanged += ChangedHandler;
} 
```

（不要忘记稍后取消订阅这些控件，如果您有动态添加和删除控件，请适当处理订阅/取消订阅。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T13:03:04.067

**如果无论**哪个应用程序具有焦点都可以捕获它们，那么您始终可以使用[Gobal Keyboard/Mouse hook](http://www.codeproject.com/Articles/7294/Processing-Global-Mouse-and-Keyboard-Hooks-in-C)。在这里详细解释有点太复杂了，但你总是可以参考[我的问题](https://stackoverflow.com/questions/13998131/get-key-from-any-process)，我做了类似的事情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-07-03T22:39:07.887

如前所述，对于键盘，请使用：

```
protected override bool ProcessCmdKey(ref Message msg, Keys keyData)
{
    //invoke event or some other action
    return base.ProcessCmdKey(ref msg, keyData);
} 
```

这应该解决鼠标事件，为您需要的每个现有鼠标事件创建新事件：

```
public new event MouseEventHandler MouseClick
{
    add
    {
        base.MouseClick += value;
        foreach (Control control in Controls)
        {
            control.MouseClick += value;
        }
    }
    remove
    {
        base.MouseClick -= value;
        foreach (Control control in Controls)
        {
            control.MouseClick -= value;
        }
    }
}

public new event MouseEventHandler MouseDoubleClick
{
    add
    {
        base.MouseDoubleClick += value;
        foreach (Control control in Controls)
        {
            control.MouseDoubleClick += value;
        }
    }
    remove
    {
        base.MouseDoubleClick -= value;
        foreach (Control control in Controls)
        {
            control.MouseDoubleClick -= value;
        }
    }
}

public new event EventHandler DoubleClick
{
    add
    {
        base.DoubleClick += value;
        foreach (Control control in Controls)
        {
            control.DoubleClick += value;
        }
    }
    remove
    {
        base.DoubleClick -= value;
        foreach (Control control in Controls)
        {
            control.DoubleClick -= value;
        }
    }
} 
```

# php - 需要从基于子域的 Mysql 数据库中提取图像 url 列表，并将它们存储为列表

> ID：16147716
> 
> 赞同：0
> 
> 时间：2013-04-22T12:59:30.927
> 
> 标签：php, mysql, regex

我有一个 Mysql 论坛数据库，我需要在特定的 url 上查询一组特定图像的所有帖子。

网址是托管在我们无权访问的子域上的图像，例如“ [http://images.website.com/images/randomnumberhere.jpg](http://images.website.com/images/randomnumberhere.jpg) ”。

我需要一个 mysql 查询来将它们拉出来并将它们处理成一个列表，我们稍后可以循环通过它来抓取它们并移动它们。（我处理了这部分）

我是一个 php/mysql 程序员，但这感觉像是一个正则表达式问题，我对此还不是很好。

问题是我们没有图像列表，这是一个很大的随机数（据我所知）。所以我需要的是一个像“images.website.com/images/(randomnumbers).jpg”这样的字符串，然后将它们放入一个列表中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T13:10:56.820

你可以得到所有花哨的裤子，并使用正则表达式，但你也可以尝试一个简单的

```
SELECT * FROM image_table WHERE image_source LIKE '%images.website.com/images/%' 
```

这是你想要的？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T13:45:07.030

如果您希望从数据库中提取所有文本，然后使用 PHP 创建图像列表，请尝试以下操作：

```
$image_list = array();

while($row = $sql->fetch_array())
{
    $text = $row['text'];
    /* Changed to preg_match_all */
    if(preg_match_all("/http:\/\/images.website.com\/images\/[0-9]+\.(jpg|jpeg|png|gif)/i", $text, $matches))
    {
        $image_list[] = $matches[0];
    }
} 
```

没什么特别的，我没有测试它，但它应该可以工作。这是一个硬编码的正则表达式，它与您正在寻找的 URL 相匹配。您可能需要对其进行修改，以便它可以匹配数组中的多个域或其他内容，但它应该可以帮助您入门。

编辑：应该提到你可以循环通过 $image_list 数组来显示图像，或者你要对它们做什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T13:10:03.933

```
$rand = //rand() function or whatever you would like to create the random number, since you didn't give ranges, it might be an array aswell;
$string = "images.website.com/images/$rand.jpg"; 
```

甚至是一个简单的循环：

```
for ($i = 1; $i < 100; $i++) {
echo $string = "images.website.com/images/$i.jpg";
} 
```

由您决定如何将它与您的数据库一起使用

# java - 反转整数字符串，而不反转整数本身

> ID：16147717
> 
> 赞同：0
> 
> 时间：2013-04-22T12:59:33.383
> 
> 标签：java, string, recursion, integer, reverse

我正在尝试使函数反转一串整数，但我只能使用我找到的以下代码完全镜像它。（我想将它从字符串转换为没有数组或列表的字符串，最好是递归的）

```
static String reverseMe(String s) {
if(s.length() == 0)
  return "";
return s.charAt(s.length() - 1) + reverseMe(s.substring(0,s.length()-1)); 
```

}

例如，当我真正想要 (41 2 1) 时， (1 2 41) 返回 (14 2 1)。我希望Java在遇到空格（或任何非整数）时开始反转并保持整数本身不变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T13:20:12.127

它可以像这样简单。

```
String num="1 2 41";
    StringTokenizer sTok=new StringTokenizer(num, " ");
    String revnum="";
    while(sTok.hasMoreTokens())
    {
        revnum=sTok.nextToken()+" "+revnum;
    }
    System.out.println(revnum); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T13:18:31.823

其中的另一种解决方案

```
static String reverseMe(String s) {
        if(s.length() == 0)
          return "";
        String sa[] = s.split(" ");
        List<String> newlist = Arrays.asList(sa);
        Collections.reverse(newlist);
        return newlist.toString();

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T13:21:12.843

另一个使用[Tail 调用 recursion](http://en.wikipedia.org/wiki/Tail_call)的递归变体。

```
public static String reverseMe(String s) {
    StringBuilder sb = new StringBuilder();
    return reverseMe(s.split(" "), sb);
}

public static String reverseMe(String[] s, StringBuilder sb) {
    if (s.length == 0) {
        return sb.toString().trim();
    } else {
        return reverseMe(Arrays.copyOfRange(s, 1, s.length), sb.insert(0, " ").insert(0, s[0]));
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T13:12:26.580

您还可以使用 StringTokenized

```
 StringTokenizer st = new StringTokenizer("1 2 41");
    StringBuilder sb = new StringBuilder();
    while (st.hasMoreTokens()) {
        if (sb.length() > 0) {
            sb.insert(0, ' ');
        }
        sb.insert(0, st.nextToken());
    }
    System.out.println(sb.toString()); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-22T13:25:54.483

非递归，番石榴存在。

```
 String input = "123 456 789 tt 012";
  Iterable<String> tokens = Splitter.on(Pattern.compile("[^\\d]")).omitEmptyStrings().split(input);
  for(String token: tokens){
       StringBuilder builder = new StringBuilder(token);
       System.out.println(builder.reverse().toString());
  } 
```

或者没有番石榴：

```
String input = "123 456 789 tt 012";
    String tokens [] = input.split("[^\\d]+");
    for(String token:tokens){
        StringBuilder builder = new StringBuilder(token);
        System.out.println(builder.reverse().toString());
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-22T13:37:41.650

如果您对递归不特别感兴趣，则以下解决方案将起作用。

```
static String reversMe(String str) {

    StringBuffer strBuf = new StringBuffer();

    String strArray = str.split(" ");

    for(int i = strArray.length();i>=0; i--) {

       strBuf.append(strArray[i]).append(" ");  

     }

     return strBuf.toString().trim();     
    } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-22T13:07:02.663

您的函数的修改版本，使用[`String#lastIndexOf`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#lastIndexOf%28java.lang.String%29)：

```
String reverseMe(String s)
{
  if (s.length() == 0)
     return "";
  int index = s.lastIndexOf(" ");
  if (index == -1) // not found, thus just return the string
     return s;
  else // found, thus concat last part with recursive call
     return s.substring(index + 1) + " " + reverseMe(s.substring(0, index));
} 
```

或者您可以使用[`String#split`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#split%28java.lang.String%29)空格分隔，然后反向循环并连接。

```
String reverse(String s)
{
  String reversed = "";
  String[] split = s.split(" ");
  reversed = split[split.length-1];
  for (int i = split.length-2; i >= 0; i--)
  {
    reversed += " " + split[i];
  }
  return reversed;
} 
```

尽管[StringBuilder](http://docs.oracle.com/javase/7/docs/api/java/lang/StringBuilder.html)会成为一个更有效的选择，因为它不需要所有的字符串复制。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-22T13:11:17.790

如果你想递归地做到这一点，这会做到！

```
public static String reverseIt(final String inp,final int lastIndex,String out)
{
    int i=lastIndex;
    while(inp.charAt(i)!=' ' && i!=-1){i--;if(i==-1)break;}
    out+=(inp.substring(i+1,lastIndex+1));if(i!=-1)out+=" ";
    if(lastIndex!=0)return reverseIt(inp,i-1,out);
    else return out;
} 
```

您现在可以将其称为

```
reverseIt(input,input.length-1,output); 
```

# android - 用不同的方法替换/修改Android中的文本选择方法（长按、手柄）？

> ID：16147718
> 
> 赞同：2
> 
> 时间：2013-04-22T12:59:33.787
> 
> 标签：android, text

我有一个想法，如何在 Android 上为学术项目增强文本选择（长按一个单词选择它，用两个手柄可以更正选择）。我没有看到从这个增强中编码逻辑的问题，但由于我是 Android 世界的新手，我很迷茫如何将它集成到操作系统中。我很确定在我面前有几个小时阅读 API，但我不介意让丛林变亮一点。这就是我在这里问的原因。

简而言之：

我想实现一个自己的文本选择手势，该手势应该替换浏览器和 PDF 阅读器中的当前选择方法（长按一个单词选择它，用两个句柄可以更正选择）。实际上，如果可能的话，可以说是系统范围内的。我的第一个想法是制作一个覆盖当前行为的应用程序。

*   是否可以在整个系统范围内替换当前的测试选择机制？换句话说，有没有办法用自己的应用程序覆盖给定的文本选择行为？就像您可以用不同的键盘（滑动键盘、SwiftKey X 等）更改键盘一样。还是不能用一个App在这么低的水平上修改Android？

*   Android 中的哪些数据包或类负责文本选择？

我非常感谢有关该主题的每一个提示。

# java - 在通过网络传输数据时，java中服务器端加密的用途是什么

> ID：16147719
> 
> 赞同：-1
> 
> 时间：2013-04-22T12:59:34.583
> 
> 标签：java, security, encryption

> java中服务器端密码加密有什么用。如果我们正在做服务器端加密，那么密码已经通过网络发送。因此，我可以为管理员或可以在数据库中查看的密码提供安全性。
> 
> 但我的问题是如何防止在网络中传输数据时发生的攻击。

我需要对此进行一些解释。请帮助我。在此先感谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T13:01:39.827

您可以使用 SSL 之类的套接字级加密方案来保护通过网络的流量。

# wpf - 如何从打印中隐藏 DocumentViewer 页面元素

> ID：16147720
> 
> 赞同：1
> 
> 时间：2013-04-22T12:59:35.193
> 
> 标签：wpf, printing, documentviewer, fixeddocument

所以我一直在构建一个在某些表单上打印的 WPF 应用程序。这些表格预先印有空白，您应该在其中填写一些信息。WPF 应用程序需要精确打印文本，以便 WPF 打印的文本与预打印形式的文本和空白完美对齐。通过使用 DocumentViewer 和 FixedDocument，我能够在很大程度上成功地完成任务。

最大的问题是，由于某种原因，VS WPF 设计器不喜欢将 PageContent 放入 DocumentViewer 中的 FixedDocument 中，即使您可以将 PageContent 放入任何其他容器（如 Scroll Viewer）中并且它会完美呈现。但即使 VS XAML 解析器无法运行，我也可以毫无问题地编译和运行我的应用程序。

另一方面的问题来自于我无法找到一种方法来隐藏 FixedDocument 中的某些元素以防止打印。为了让用户更准确地将信息输入应用程序并知道我将在打印表单中放置该信息的位置，我将表单的扫描图像放在 FixedDocument 的背景中。但我只希望在用户在 DocumentViewer 中查看文档时显示它，我不希望在他按下打印按钮时打印该图像。

现在在 Windows 窗体中，我可以处理 OnPrint 事件并使用 IsPrintPreview 属性可以决定打印什么和不打印什么。另一方面，DocumentViewer 似乎不允许我决定打印什么和不打印什么。

Soooo，长话短说，有没有办法隐藏 FixedDocument 中的某些控件以防止在 DocumentViewer 中打印？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T10:36:47.437

我“解决”了这个问题。好吧，对于解决的某些定义。为了将来参考，我所做的是通过附加我自己的打印命令来覆盖 DocumentViewer 自己的打印代码：

```
<DocumentViewer.CommandBindings>
   <CommandBinding Command="ApplicationCommands.Print" Executed="PrintExecute"/>
</DocumentViewer.CommandBindings> 
```

与在我的代码中相比，我会在文档中隐藏我不想打印的内容，显示对话框，而不是使用 XPSDocumentWriter 将文档“打印”到打印队列中。这里重要的是在同步而不是异步中进行打印，因为您只能在将文档发送到打印后重新显示隐藏的内容。无论如何，此代码基于WPF 中美化页面的[这种解决方法。](https://stackoverflow.com/a/1068719/2307430)

无论如何，代码会隐藏所有图像（使它们透明），然后进行打印，并且仅在打印后重新显示它们。

```
DocumentViewer dv = sender as DocumentViewer;
FixedDocument dokument = dv.Document as FixedDocument;
if (dokument == null) return;
PageContent content = dokument.Pages.First();
foreach (UIElement el in content.Child.Children)
{
     Image image = el as Image;
     if (image != null)
         image.Opacity = 0;
}
PrintDialog dialog = new PrintDialog();
dialog.PrintQueue = LocalPrintServer.GetDefaultPrintQueue();
dialog.PrintTicket = dialog.PrintQueue.DefaultPrintTicket;
dialog.PrintTicket.PageOrientation = PageOrientation.Landscape;

if (dialog.ShowDialog() == true)
{
    XpsDocumentWriter writer = PrintQueue.CreateXpsDocumentWriter(dialog.PrintQueue);
    writer.Write(dokument, dialog.PrintTicket);
}
foreach (UIElement el in content.Child.Children)
{
    Image image= el as Image;
    if (image!= null)
        image.Opacity = 0.75;
} 
```

当然，至少还有一个问题。对于用户来说，对话框打开时背景会消失，我看不到我解决了这个问题，因为文档查看器没有区分用户看到的内容和发送到计算机的内容。

# php - 使用 PHP 获取 wordpress 帖子的所有父类别

> ID：16147723
> 
> 赞同：0
> 
> 时间：2013-04-22T12:59:52.407
> 
> 标签：php, wordpress, categories

给定一个类别名称，我需要获取一个 wordpress 帖子所属的所有类别的数组，包括所有父类别。

wordpress 功能不可用。

下面的代码超时（最大执行时间）。

```
$result = mysql_query("SELECT tax.term_taxonomy_id as taxid, tax.term_id, tax.parent,
            term.name
            FROM wp_term_taxonomy AS tax
            JOIN wp_terms AS term ON (term.term_id = tax.term_id)

            WHERE term.name = '".mysql_real_escape_string($cat)."'

            AND tax.taxonomy = 'category'

            LIMIT 1");

if($result)
{
        $category = mysql_fetch_assoc($result);

        //see if there are more than one parent:

        $categories = array();

        $categories[] = $category['term_id']; //lowest

        if($category['parent'] > 0){ //there are parent categories

            $p = $category['parent'];

            //get all the parent categories of this category
            while($p >= 0){

                $subres = mysql_query("SELECT term_id, parent

                            FROM wp_term_taxonomy

                            WHERE term_id = '".intval($p)."'

                            AND tax.taxonomy = 'category'

                            LIMIT 1");

                if($subres){

                    $c = mysql_fetch_assoc($subres);

                    $categories[] = $c['term_id'];

                    if($c['parent'] >= 0)
                        $p = $c['parent'];
                    else
                        break;
                }

            }//while

        }

        var_dump($categories);
        die();
} //result 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T13:10:43.760

我想我解决了。

$subres 失败了，但循环仍在继续。

因此，在检查成功 $subres 的 if 条件之后，我添加了：

```
 else
                    break; 
```

# macos - Mac OS X 上的免费磁盘空格键

> ID：16147724
> 
> 赞同：2
> 
> 时间：2013-04-22T12:59:56.400
> 
> 标签：macos, cocoa

你们中是否有人知道是否有这样的控件可以在自己的项目中使用。就像 iTunes “已用空间”或 Mac OS X “已用磁盘空间栏”一样？ ![在此处输入图像描述](https://i.stack.imgur.com/VqL4C.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T18:01:13.407

这通常是一个自定义控件。

这类事情通常是通过创建 的子类`NSView`并覆盖该`drawRect:`方法来创建自定义组件来完成的。

然后，您可以创建自己的形状并以您想要的方式填充。
有关更多信息和示例，请参阅[Cocoa 绘图指南](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CocoaDrawingGuide/Introduction/Introduction.html)。

帮助您入门的基本示例：

```
- ( void )drawRect: ( NSRect )rect
{
    NSBezierPath * path;
    NSGradient   * gradient;
    CGFloat        radius;

    path     = [ NSBezierPath bezierPathWithRoundedRect: rect xRadius: 2.0 yRadius: 2.0 ];
    gradient = [ [ NSGradient alloc ] initWithColorsAndLocations:   [ NSColor whiteColor ], 0.0,
                                                                    [ NSColor blackColor ], 1.0,
                                                                    nil
               ];

    [ gradient drawInBezierPath: path angle: -90 ];
    [ gradient release ];
} 
```

# php - 简单的防守进攻策略

> ID：16147726
> 
> 赞同：0
> 
> 时间：2013-04-22T13:00:02.197
> 
> 标签：php, math, probability

我必须制作这个基本的游戏引擎。进攻球员有 5/6 的机会投篮（83%）。防守球员有 4/6 的机会（57.6%）防守。所以当进攻球员投篮时射门，我如何计算两位球员的成功率。感谢您抽出宝贵时间阅读此内容。我是新人。提前谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T13:04:41.913

您可能会像这样描绘这些案例：

```
|                  | Defense succeeds | Defense fails |
| Offense succeeds | miss             | hit           |
| Offense fails    | miss             | miss          | 
```

所以命中的概率是

```
(Offense succeeds)*(1-Defense succeeds) 
```

在你上面的例子中，

```
5/6 * (1 - (4/6)) = 0.278 
```

* * *

注意：您希望如何处理`Offense succeeds`和`Defense succeeds`取决于您的情况。您可能想要考虑命中，而不是未命中......但如果您这样做，那么命中的概率将只是`Offense succeeds`，并且根本不依赖于`Defense succeeds`。这似乎很奇怪，因为这意味着防守对进攻没有任何影响。

# jquery - 我的工具提示被 div 元素的限制切断了

> ID：16147727
> 
> 赞同：0
> 
> 时间：2013-04-22T13:00:02.557
> 
> 标签：jquery, tooltip

当消息框“悬停”时，我需要显示一个工具提示。所有消息框都在一个名为 chatbox 的 div 中。我的问题是当通过聊天框的限制时，工具提示被聊天框 div 截断。这是一个`jsfiddle` [http://jsfiddle.net/Ifalcao/k9Yrc/2](http://jsfiddle.net/Ifalcao/k9Yrc/2)。

聊天框 div 中的溢出规则必须存在，否则如果我有很多消息框，它们将超过聊天框的限制（[http://jsfiddle.net/Ifalcao/URBDE](http://jsfiddle.net/Ifalcao/URBDE)）。

我需要聊天框内的消息框，但需要聊天框外消息框的工具提示。

请帮帮我。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T13:20:44.973

这段代码似乎可以在您的小提琴中使用-我将工具提示设为“body”的子项，并将其放置在框旁边-这是小提琴：http: [//jsfiddle.net/k9Yrc/8/](http://jsfiddle.net/k9Yrc/8/)

```
$('.box').hover(function(){
                var boxLeft = $(this).offset().left;
                var boxTop = $(this).offset().top;
                var htmltooltip = '<div id="info" class="shadow">';
                htmltooltip += '<h4>Label info</h4>';
                htmltooltip += '<img src="images/defaultphoto.gif"/>';
                htmltooltip += '</div>';
                $('body').append(htmltooltip).children('#info').hide().fadeIn(400).css('left', boxLeft - 150).css('top', boxTop + 100);
                }, function() {
                    $('#info').remove();
                    }
            ); 
```

# c++ - 打开串口并读取数据字符串

> ID：16147731
> 
> 赞同：0
> 
> 时间：2013-04-22T13:00:08.693
> 
> 标签：c++

我有一个地磅应用程序，以前从 Klerkscale SASCALE 读取数据，现在它还需要从 LS210 Opticon 地磅读取数据。我添加了代码以将波特率等设置为 OPTI，但我仍然收到“没有来自 comm 端口的响应”的错误，此错误来自 ERR00009（如果您查看 swith 语句的默认部分。任何人都可以请帮我纠正代码。

* * *

```
AnsiString TfrmWeighDetails::GetMass()
{
LONG    lLastError = ERROR_SUCCESS;
bool flag;AnsiString s;
AnsiString port;
bool vTrapErrors, vIgnoreRecvEvent;

DM->vErrLineNo="GCS-21052008-70";
if ( Scale == "INVALID PORT")
{
    return "ERR0011";
}

// Attempt to open the serial port (COM1)
lLastError = serial.Open(_T(Scale.c_str()),0,0,true);

MessageBox(NULL,AnsiString(lLastError).c_str(),"Privesh Test",MB_OK);

if (lLastError != ERROR_SUCCESS)
{
    return "ERR0001";
}

// Setup the serial port (9600,8N1, which is the default setting)

// lLastError = serial.Setup(CSerial::EBaud9600,CSerial::EData8,CSerial::EParNone,CSerial::EStop1);
 lLastError = serial.Setup(CSerial::EBaud19200,CSerial::EData8,CSerial::EParNone,CSerial::EStop1);
if (BridgeSupplier == "OPTO")
        MessageBox(NULL,AnsiString(lLastError).c_str(),"Privesh Test1",MB_OK);
        lLastError = serial.Setup(CSerial::EBaud19200,CSerial::EData8,CSerial::EParNone,CSerial::EStop1);
if (BridgeSupplier == "KLERKSCALE")
    lLastError = serial.Setup(CSerial::EBaud2400,CSerial::EData7,CSerial::EParOdd,CSerial::EStop1);
else
    lLastError = serial.Setup(CSerial::EBaud1200,CSerial::EData7,CSerial::EParEven,CSerial::EStop1);

if (lLastError != ERROR_SUCCESS)
{
    return "ERR0002";
}

// Setup handshaking (default is no handshaking)
lLastError = serial.SetupHandshaking(CSerial::EHandshakeHardware);
MessageBox(NULL,AnsiString(lLastError).c_str(),"Handshake",MB_OK);
if (lLastError != ERROR_SUCCESS)
{
    return "ERR0003";
}

// Register only for the receive event
lLastError = serial.SetMask(CSerial::EEventBreak |
    CSerial::EEventCTS   |
    CSerial::EEventDSR   |
    CSerial::EEventError |
    CSerial::EEventRing  |
    CSerial::EEventRLSD  |
    CSerial::EEventRecv);
MessageBox(NULL,AnsiString(lLastError).c_str(),"Receive Event",MB_OK);
if (lLastError != ERROR_SUCCESS)
{
    return "ERR0004";
}

// Use 'non-blocking' reads, because we don't know how many bytes
// will be received. This is normally the most convenient mode
// (and also the default mode for reading data).
lLastError = serial.SetupReadTimeouts(CSerial::EReadTimeoutNonblocking);
MessageBox(NULL,AnsiString(lLastError).c_str(),"Setup Read Timeouts",MB_OK);
if (lLastError != ERROR_SUCCESS)
{
    return "ERR0005";
}

// Create a handle for the overlapped operations
HANDLE hevtOverlapped = ::CreateEvent(0,TRUE,FALSE,0);;

if (hevtOverlapped == 0)
{
    return "ERR0006";
}

// Setup the overlapped structure
OVERLAPPED ov = {0};
ov.hEvent = hevtOverlapped;
// Open the "STOP" handle
HANDLE hevtStop = ::CreateEvent(0,TRUE,FALSE,_T("Overlapped_Stop_Event"));

if (hevtStop == 0)
    {
    return "ERR0007"  ;
}

// Keep reading data, until an EOF (CTRL-Z) has been received
bool fContinue = true;
do
{
    // Wait for an event
    lLastError = serial.WaitEvent(&ov);
    MessageBox(NULL,AnsiString(lLastError).c_str(),"Serial Wait Event",MB_OK);

    if (lLastError != ERROR_SUCCESS)
    {
        return "ERR0010";
    }
    // Setup array of handles in which we are interested
    HANDLE ahWait[2];
    ahWait[0] = hevtOverlapped;
    ahWait[1] = hevtStop;
    // Wait until something happens
    switch (::WaitForMultipleObjects(sizeof(ahWait)/sizeof(*ahWait),ahWait,FALSE,timeout.ToInt()))
    {
        case WAIT_OBJECT_0:
        {
            // Save event
            const CSerial::EEvent eEvent = serial.GetEventType();
            // Handle break event
            if (eEvent & CSerial::EEventBreak)
            {
                MessageBox(NULL," BREAK received ","Comm Program",MB_OK);
            }
            // Handle CTS event
            if (eEvent & CSerial::EEventCTS)
            {
                flag =   serial.GetCTS();
                if (flag)
                    s = "ON";
                else
                    s = "OFF";
                MessageBox(NULL,(AnsiString("Clear to send ") + s).c_str(),"Comm Prog",MB_OK);
            }
            // Handle DSR event
            if (eEvent & CSerial::EEventDSR)
            {
                flag  = serial.GetDSR();
                if (flag)
                    s = "ON";
                else
                    s = "OFF";
                MessageBox(NULL,(AnsiString("Data set ready ") + s).c_str(),"Comm Prog",MB_OK);
            }
            // Handle error event
            vTrapErrors=false;
            if ((eEvent & CSerial::EEventError)&&
                 (vTrapErrors))  // Although errors encountered, mass still read on XP OS. Therefore, errors suppressed on XP i.e.vTrapErrors=false - MZI12112007
            {
                //MessageBox(NULL,"### ERROR: ");
                switch (serial.GetError())
                {
                    case CSerial::EErrorBreak:        MessageBox(NULL,"Break condition","Com Prog",MB_OK);            break;
                    case CSerial::EErrorFrame:        MessageBox(NULL,"Framing error","Com Prog",MB_OK);            break;
                    case CSerial::EErrorIOE:        MessageBox(NULL,"IO device error","Com Prog",MB_OK);            break;
                    case CSerial::EErrorMode:        MessageBox(NULL,"Unsupported mode","Com Prog",MB_OK);            break;
                    case CSerial::EErrorOverrun:    MessageBox(NULL,"Buffer overrun","Com Prog",MB_OK);            break;
                    case CSerial::EErrorRxOver:        MessageBox(NULL,"Input buffer overflow","Com Prog",MB_OK);    break;
                    case CSerial::EErrorParity:        MessageBox(NULL,"Input parity error","Com Prog",MB_OK);        break;
                    case CSerial::EErrorTxFull:        MessageBox(NULL,"Output buffer full","Com Prog",MB_OK);        break;
//                    default:                  MessageBox(NULL,"Unknown","Com Prog",MB_OK); break; // Error 0 is UNKNOWN but is a Success error therefore no need to handle -- MZI12112007
                }
                //printf(" ###\n");
            }

            // Handle ring event
            if (eEvent & CSerial::EEventRing)
            {
                Sleep(2000);
            }
            // Handle RLSD/CD event
            if (eEvent & CSerial::EEventRLSD)
            {
                flag  = serial.GetRLSD();
                if (flag)
                    s = "ON";
                else
                    s = "OFF";
                MessageBox(NULL,(AnsiString("RLSD/CD ") + s).c_str(),"Comm Prog",MB_OK);
            }
            Timer1->Enabled = false; //switch off the timeout
            // Handle data receive event
            Sleep (1000);    // when no pause, no mass read on XP. Therefore, this ensures system gets in sync with Comm Device - MZI12112007
            vIgnoreRecvEvent=true; // On XP, the Receive event does not seem to be triggered. Therefore this code was included to forcce WBR to work on Xp -- MZI12112007
            if ((eEvent & CSerial::EEventRecv)||vIgnoreRecvEvent)
            {
                // Read data, until the reading from scale is stable
                DWORD dwBytesRead = 0;
                do
                {
                    char szBuffer[101];
                    // Read data from the COM-port
                    lLastError = serial.Read(szBuffer,sizeof(szBuffer)-1,&dwBytesRead);
                    if (lLastError != ERROR_SUCCESS)
                    {
                        ShowError(serial.GetLastError(), _T("Unable to read from COM-port."));
                        return "ERR0008";
                    }
                    if (dwBytesRead > 0)
                    {
                        // Finalize the data, so it is a valid string
                        szBuffer[dwBytesRead] = '\0';
                        AnsiString result = GetStableReading(szBuffer,BridgeSupplier);
                        // Display the data
                        if ( result == "OVERCAPACITY" || result == "BELOWCAPACITY")
                        {
                            serial.Close();
                            return result;
                        }
                        else if ( result != "ERROR" && result != "")
                        {
                            serial.Close();
                            return result;
                        }
                    }
                }
                while ((dwBytesRead > 0 )&&(result == ""));
            }
        }
        break;
    case WAIT_OBJECT_0+1:
    {
        // Set the continue bit to false, so we'll exit
        fContinue = false;
    }
    break;
    default:
    {
        //No response from comm port
        serial.Close();
        return "ERR0009";
    }
}
}
while (fContinue);
// Close the port again
serial.Close();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T16:25:04.880

请在代码中添加更多花括号以分隔不同的选择，如下所示：

```
if (BridgeSupplier == "OPTO") {
    MessageBox(NULL,AnsiString(lLastError).c_str(),"Privesh Test1",MB_OK);
    lLastError = serial.Setup(CSerial::EBaud19200,CSerial::EData8,CSerial::EParNone,CSerial::EStop1);
} else if (BridgeSupplier == "KLERKSCALE") {
    lLastError = serial.Setup(CSerial::EBaud2400,CSerial::EData7,CSerial::EParOdd,CSerial::EStop1);
} else {
    lLastError = serial.Setup(CSerial::EBaud1200,CSerial::EData7,CSerial::EParEven,CSerial::EStop1);
} 
```

因为目前您的代码为 OPTO 设置了端口，然后再次将端口设置为默认的“else”条件，从而覆盖了 OPTO 的设置。

# android - Facebook 空 GraphObject

> ID：16147732
> 
> 赞同：1
> 
> 时间：2013-04-22T13:00:13.150
> 
> 标签：android, facebook, facebook-android-sdk

几天来，我一直坚持使用 facebook 实施。无论我如何尝试发布到墙上，我都会收到此错误：

```
Response: {Response:  responseCode: 200, graphObject: null, error: {HttpStatus: -1, errorCode: -1, errorType: null, errorMessage: null}, isFromCache:false} 
```

所以我在 facebook 上创建了一个新的 android 项目和新项目，遵循了所有 facebook 的 android 教程，当我终于成功地发布到我的墙上时没有问题。然后响应看起来像这样：

```
Response: {Response:  responseCode: 200, graphObject: GraphObject{graphObjectClass=GraphObject, state={"id":"xxxxxxxxxxxxxxx"}}, error: null, isFromCache:false} 
```

在新项目中，我创建了一个类，它封装了运行 facebook 所需的所有功能，没有任何问题。

然后我将该类移至我的旧项目，将 app_id 更改为指向我的新 facebook 应用程序。但又一次：

```
Response: {Response:  responseCode: 200, graphObject: null, error: {HttpStatus: -1, errorCode: -1, errorType: null, errorMessage: null}, isFromCache:false} 
```

我在 facebook 设置中更新了包名称和 mainactivity 类以指向旧项目。但这并没有做任何事情，新项目仍然可以正常工作，而旧项目则无法正常工作。

可能有什么问题？

**[编辑]** PS 登录和有关用户及其朋友的信息检索在这两个程序上都可以正常工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T07:40:39.017

因此，在新项目上一点一点地重新创建我的旧项目后，我找到了一个解决方案。在我的新项目中，我在 onCreate() 中有这一行：

```
if (android.os.Build.VERSION.SDK_INT > 9) {
    StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
    StrictMode.setThreadPolicy(policy);
} 
```

删除后，我的代码停止工作。使用此代码，我的旧项目现在可以正常工作并发布到墙上。虽然我仍然不太明白这是如何工作的。我确实在不同的线程中使用了我的 FB 会话，但是它们一个接一个地执行（一个窗口中，登录时，另一个窗口中，我发布的另一个窗口），因此它们不会同时运行。

它仍然给我留下了一些问题。为什么启用问题检查会导致我无法在我的 FB 墙上发帖？在开发和发布期间可以保留此代码吗？

# python - 一个表达式中的多个格式说明符

> ID：16147739
> 
> 赞同：0
> 
> 时间：2013-04-22T13:00:31.807
> 
> 标签：python

有没有办法在一个表达式中使用多个格式说明符？

```
In [1]: '{:,}'.format(12345)
Out[1]: '12,345'

In [2]: '{:<10}'.format(12345)
Out[2]: '12345     '

# Can i do something like?
In [3]: '{:<somemagic here>}'.format(12345)
Out[3]: '12,345    ' 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T13:01:31.687

```
In [22]: '{:<10,}'.format(12345)
Out[22]: '12,345    ' 
```

# javascript - 窗口较小时调整窗口大小，即使窗口宽度较大也保持不变

> ID：16147742
> 
> 赞同：0
> 
> 时间：2013-04-22T13:00:48.903
> 
> 标签：javascript, jquery

抱歉标题模棱两可，不确定我应该使用什么。我想根据窗口大小调整播放器（Javascript）的大小，以使其具有响应性。标准宽度是`620px`，如果宽度小于我希望组件的宽度应该是`100%`。我使用 jQuery 添加了一个事件侦听器。`100%`但是，问题是当窗口大小小于 620 时播放器的组件宽度变为，并且即使之后窗口大小变得更大，它仍然保持为 100%。这是我的代码。

```
function resizeVideo() {
  var width = $('#slideshow').width();
    if(width < 620) {
      $('#object').width('100%');
      $('#object #background').width('100%');
      $('#object #slide_area').width('100%');
      $('#object #controls').width('100%');
      // alert("here");
    }
    else {

    }
  }
resizeVideo();
window.addEventListener("resize", resizeVideo, false); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T13:05:56.690

只需从窗口宽度调整大小，而不仅仅是`#slideshow`：

```
function resizeVideo() {
    var width = $(window).width();
    if(width < 620) {
        //Resize to 100%
        $('#object, #background, #slide_area, #controls').width('100%');
    } else {
        //Resize back to normal value
        $('#object, #background, #slide_area, #controls').width(620);
    }
} 
```

作为听众，我会用 jQuery 做这样的事情：

```
$(window).on('resize', resizeVideo); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T13:08:50.413

你可以在你的 else 语句中调整回原来的宽度（假设你原来的宽度是 620：

```
function resizeVideo() {
   var width = $('#slideshow').width();
   if(width < 620) {
     $('#object').width('100%');
     $('#object #background').width('100%');
     $('#object #slide_area').width('100%');
     $('#object #controls').width('100%');
   } else {
     $('#object').width(620);
     $('#object #background').width(620);
     $('#object #slide_area').width(620);
     $('#object #controls').width(620);
   }
} 
```

# c# - 基于属性值反序列化 XML

> ID：16147748
> 
> 赞同：0
> 
> 时间：2013-04-22T13:01:01.400
> 
> 标签：c#, .net, xml, xml-serialization

我有一些需要反序列化的 XML

```
<element>
  <childElement key="myKey1">a value</childElement>
  <childElement key="myKey2">another value</childElement>
</element> 
```

进入一个类

```
[XmlRoot(ElementName="element")]
public class Element
{
  public string MyKey1 { get; set; }
  public string MyKey2 { get; set; }
} 
```

我是否可以注释 MyKey1 和 MyKey2 以便如果上面的 xml 被反序列化，那么 MyKey1 将是“一个值”而 MyKey2 将等于“另一个值”？如果不是，那么反序列化此类属性的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T13:08:07.753

您可以使用`XmlAttribute`属性，但您的 xml 似乎更适合`Dictionary<string,string>`

使用 Linq To Xml

```
string xml = @"<element>
    <childElement key=""myKey1"">a value</childElement>
    <childElement key=""myKey2"">another value</childElement>
</element>";

var xDoc = XDocument.Parse(xml);
var dict = xDoc.Descendants("childElement")
               .ToDictionary(x => x.Attribute("key").Value, x => x.Value);

Console.WriteLine(dict["myKey1"]); 
```

# ios - 显示单个字符，因为它是在单独的标签上键入的？

> ID：16147750
> 
> 赞同：0
> 
> 时间：2013-04-22T13:01:05.450
> 
> 标签：ios, objective-c, uilabel

我有一排以编程方式实例化的标签，它们存储在 NSMutableArray 中。它们目前不包含任何数据。我想要做的是让它在用户输入字符时自动显示在标签中。我不知道该怎么做。我知道如何访问我创建的标签 [MyArray ObjectAtIndex:0] 等等，但是我怎样才能做到这一点，以便当用户在键盘上键入时它会格式化文本（我有格式化代码）然后才出现在屏幕上。

我需要帮助将每个字符在输入时显示在屏幕上。

任何帮助将不胜感激 - 我有一个文本字段（它是隐藏的），键盘通过按钮出现。如果这有帮助。:)

先感谢您 ：）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T13:09:07.430

```
 UITextField *tf;
    [tf addTarget:self action:@selector(editingChanged:) forControlEvents:UIControlEventEditingChanged];

- (void)editingChanged:(UITextField *)textField {
  _myHiddenLabel.text = textField.text;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T13:05:09.167

您可以在 UITextField 内的 Text 更改时添加观察者，然后访问您的标签并向其添加文本...

```
- (void)textFieldDidBeginEditing:(UITextField *)textField
{
[[NSNotificationCenter defaultCenter] 
    addObserver:self 
    selector:@selector(changeLabelsMethod:)
               name:UITextFieldTextDidChangeNotification 
    object:myHiddenTextField];
}

-(void)changeLabelsMethod:(UITextField*)txtField
{
    Static int i=0;

    if(i<[MyArray count])
    {
    UILabel *lbl=[MyArray ObjectAtIndex:i];
    lbl.text=txtField.text;
    }
    else
      return
    i++;
} 
```

编辑：请参阅**尤金的****正确方法**的答案

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T13:06:53.160

如果您将 viewController 设置为隐藏 textField 的委托并实现[UITextFieldDelegate 协议，则每次输入字符时都会收到通知](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITextFieldDelegate_Protocol/UITextFieldDelegate/UITextFieldDelegate.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T13:14:04.787

```
 - (IBAction)textFieldValueChanged {
            NSString *strLastChar = [txtSearch.text substringFromIndex:txtSearch.text.length-1];
            UILabel *lblCurrent = [arrSearch objectAtIndex:intCurrentLblNo];
            [lblCurrent setText:strLastChar];
            intCurrentLblNo++;
    } 
```

将 intCurrentLblNo 作为全局变量并设置 intCurrentLblNo = 0; 在 viewdidload 方法中

并设置它...

```
 [txtSearch addTarget:self action:@selector(textFieldValueChanged) forControlEvents:UIControlEventValueChanged]; 
```

在 viewdidload 方法中**

# axapta - 批量 FTPWebRequest

> ID：16147752
> 
> 赞同：3
> 
> 时间：2013-04-22T13:01:07.820
> 
> 标签：axapta, dynamics-ax-2009, ftpwebrequest

我做了一个批处理类来检查 FTP 文件，下载它们并在 FTP 上删除它们。

当我手动运行它（不是批量运行）时，它可以完美运行并下载 FTP 中的所有文件，并在下载完成后将其删除。

当我尝试批量运行它时，问题就开始了，我尝试了服务器端和客户端批处理。

他们都给出了一个超时错误：

System.Reflection.TargetInvocationException：调用的目标已引发异常。---> System.Net.WebException：操作已超时。

在 System.Net.FtpWebRequest.CheckError()

在 System.Net.FtpWebRequest.GetResponse()

--- 内部异常堆栈跟踪结束 ---

有没有人有从 FTP 批量下载文件的经验？

我尝试将超时时间设置得更高。我还测试了执行批处理作业的服务器上的连接，我可以访问 FTP。所以这不是防火墙问题。我认为它一定是 AX 内部的东西，但我真的想不出任何东西。

这是代码（注意：downloadfile 和 deletefile 是用不同的 set_method() 建立连接的相同代码：

```
permissionSet =  new Set(Types::Class);
files = new List(types::String);
permissionset.add(new InteropPermission(InteropKind::DllInterop));
permissionset.add(new InteropPermission(InteropKind::ClrInterop));
CodeAccessPermission::assertMultiple(permissionset);
ftpo = System.Net.WebRequest::Create(<ftp link>);
request = ftpo;
request.set_KeepAlive(false);
request.set_UsePassive(false);
request.set_UseBinary(true);
request.set_Method("NLST");
credential = new System.Net.NetworkCredential(<user>,<pw>);
request.set_Credentials(credential);
try
{
    //first get the filelist from FTP
    response = request.GetResponse();
    reader = new System.IO.StreamReader(response.GetResponseStream());
    while(!reader.get_EndOfStream())
    {
        text = reader.ReadLine();
        files.addStart(text);
    }
    reader.Close();
    response.Close();
    CodeAccessPermission::revertAssert();
    if(files.elements() >0)
    {
        it = New ListIterator(files);
        while(it.more())
        {
            filename = it.value();
            downloadfile(filename);
            deleteFile(filename);
            it.next();
        }
    }
} 
```

这是完整的例外：

```
System.Reflection.TargetInvocationException: Exception has been thrown by the target of an invocation. ---> System.Net.WebException: The operation has timed out.
   at System.Net.FtpWebRequest.CheckError()
   at System.Net.FtpWebRequest.GetResponse()
   --- End of inner exception stack trace ---
   at System.RuntimeMethodHandle._InvokeMethodFast(Object target, Object[] arguments, SignatureStruct& sig, MethodAttributes methodAttributes, RuntimeTypeHandle typeOwner)
   at System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture, Boolean skipVisibilityChecks)
   at System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at ClrBridgeImpl.InvokeClrInstanceMethod(ClrBridgeImpl* , ObjectWrapper* objectWrapper, Char* pszMethodName, Int32 argsLength, ObjectWrapper** arguments, Boolean* argsAreByRef, Boolean* isException) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-23T16:17:47.810

以我的经验，批量运行时文件操作不可靠。如果您尝试在客户端上运行它并且仍然超时，那么您可能会遇到另一个问题。根据我的经验，您可能需要打开 FTP 服务器的属性（很可能在 IIS 中）并增加超时限制。我不得不对我们用来产生销售税的网络服务做类似的事情。如果我们有一个超过 100 行的销售订单，它会产生同样的错误。当我们增加超时时，错误就消失了。

# c++ - 使用 FileMapping 传递 _EXCEPTION_POINTERS * 时遇到问题

> ID：16147753
> 
> 赞同：3
> 
> 时间：2013-04-22T13:01:09.733
> 
> 标签：c++, shared-memory, crash-dumps, file-mapping

我想做一个进程外异常处理程序，并且我创建了一个看门狗进程，它在子进程引发异常时进行专门的异常处理。我已经通过 events 成功调用了 watchdog 进程。我面临的问题是尝试将异常信息指针传递给另一个进程。

我在这里登陆了[传递一个指向由 exec() 生成的进程的指针，](https://stackoverflow.com/questions/624691/passing-a-pointer-to-process-spawned-with-exec)并知道在共享内存中传递指针有这个问题：

“如果你使用共享内存，你不能传递指针。指针将包含虚拟地址，这与一个进程不同。你必须交换偏移值，基于共享内存区域的开始。

如果您不使用共享内存，则无法交换任何类型的指针：其他进程将无法访问您进程的内存。”

现在我该如何克服呢？

过程1：

```
 struct mytest
    {
      _EXCEPTION_POINTERS * except ;
      DWORD ThreadId ;
      DWORD ProcessId ;
    }

    OpenFileMapping ( ) ;

    void * pBuf = MapViewOfFile ( ) ;

    mytest passdata ;

    CopyMemory ( pBuf , &passdata , sizeof ( passdata ) ) ;

    UnMapView ( ) ;

    CloseHandle ( ) ; 
```

（例如）过程 2：

```
 cout << passdata->except->ExceptionRecord->ExceptionCode << endl ; 
```

会崩溃。我理解这是因为虚拟地址是特定于进程的。但是在这种情况下如何将异常信息传递给不同的进程并编写一个小型转储？

PS：我什至尝试单独传递 PEXCEPTION_RECORD 结构，但不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T12:02:13.117

我将把它放在一起作为答案，虽然它确实应该是对[汉斯的回答](https://stackoverflow.com/a/16149572/321013)（以及那里的评论）的评论，但似乎有必要进行一些解释：

问题中发布的代码正确地将结构的值传递`struct mytest`到共享内存中。

第二个代码片段：

> （例如）过程 2：
> 
> ```
> cout << passdata->except->ExceptionRecord->ExceptionCode << endl ; 
> ```

虽然显示了一个误解：虽然您可以读取指针的值，但`passdata.except`在进程 2 中这只是一个任意的 32/64 位值，它不是一个有效的指针。

您**可以**将 this 传递给`MiniDumpWriteDump`，此函数将在目标进程（proc 1）的上下文中评估此指针值。但是你**不能**在过程#2 中取消引用它。

Hans 的示例给出了解决方案，如果您需要`ExeptionCode`进程#2 中的值，那么您需要取消引用 proc#1 中的指针并将该值放入您写入共享内存的数据中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T14:24:15.833

对，你不能在另一个进程中取消引用指针，它只在崩溃的进程中有效。仅传递给 MiniDumpWriteDump()、MINIDUMP_EXCEPTION_INFORMATION.ExceptionPointers 字段就足够了。从技术上讲，您可以使用 ReadProcessMemory() 但对于崩溃的进程这样做是不必要的风险。简单的解决方案是在结构中添加一个额外的字段，用于存储异常代码并由异常过滤器编写。

```
mytest passdata ;
passdata.except = ExceptionInfo;
// Note: added field
passdata.ExceptionCode = ExceptionInfo->ExceptionRecord->ExceptionCode;
passdata.ThreadId = GetCurrentThreadId();
// etc.. 
```

还要避免调用 OpenFileMapping 和 MapViewOfFile 之类的 winapi 函数，风险太大。当程序由于进程堆的堆损坏而崩溃时，它们往往会死锁。崩溃和死锁的常见原因是堆锁仍然被持有。只需在程序初始化时执行此操作。您也不需要费心清理，当您的看门狗进程在进行小型转储后终止崩溃的进程时，Windows 会处理它。

# android - Android - 动态 textViews - setMargins 不适用？

> ID：16147754
> 
> 赞同：0
> 
> 时间：2013-04-22T13:01:09.887
> 
> 标签：android, android-layout, android-relativelayout, textview

我正在尝试制作一个动态网格布局，它是 API 10+ 是让它进展缓慢的部分。我试图让它自动换行..但最后发现尝试使用坐标将其强制为网格模式更容易。当我在创建时进行定位时，这个脚本本身就可以工作，但现在我试图循环遍历每个项目。因此，如果一个项目被删除，它们都会浮回到一个中间没有孔的网格中。

问题是，布局参数似乎只适用于最后一个对象。

这是一些基本变量和 onCreate 设置：

```
int screenWidth;
int screenHeight;
int distStep = 130;
int leftPad = 20;
int numCols;
int baseID = 0;

android.util.DisplayMetrics metrics = this.getResources().getDisplayMetrics();
screenWidth = metrics.widthPixels;
screenHeight = metrics.heightPixels;
numCols = (int) (screenWidth - leftPad) / distStep;
int scrRemain = screenWidth - ((numCols * distStep) + leftPad);
distStep += (int) scrRemain / numCols; 
```

然后进入添加的主要功能：

```
public void addObjToLayout() {
    RelativeLayout relLay = (RelativeLayout) this.findViewById(R.id.mainWindow);
    for(int i = 1; i <= currQuantity; i++){
        TextView tv=new TextView(this);
        tv.setTextSize(40);
        tv.setId(baseID + i);
        tv.setPadding(24, 4, 24, 4);
        tv.setBackgroundColor(0x110000FF);
        tv.setText(String.valueOf(baseID + i));     //Val for debugging
        tv.setTextColor(0xFFFFFFFF);
        relLay.addView(tv);
    }
    baseID += currQuantity;
    sortLayout();
  } 
```

然后排序：

```
public void sortLayout() {
    int leftNum = 20;
    int topNum = 0;
    for(int i = 1; i <= baseID; i++){
        TextView tv= (TextView) this.findViewById(baseID);
        MarginLayoutParams mp = new MarginLayoutParams(tv.getLayoutParams());
        mp.setMargins(leftNum, topNum, 0, 0);
        RelativeLayout.LayoutParams lp = new RelativeLayout.LayoutParams(mp);
        tv.setLayoutParams(lp);
        leftNum += distStep;
        if(leftNum >= distStep * numCols){
            leftNum = leftPad;
            topNum += distStep;
        }
    }
  } 
```

我得到的是所有文本视图都堆积在左上角，除了最后一个准确定位在它应该在的位置。所以在我看来，params 对象直到循环结束或其他东西才会应用......但从逻辑上讲，我不明白为什么。

正如我所说，这在我一开始就设置参数时起作用，问题是一次大规模更新它们。我对android很陌生，所以我希望我不只是在做一些愚蠢的事情。

谢谢你的时间

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T17:11:13.423

开始使用扩展的 baseAdapter 研究 GridView。看起来很有希望：

更多信息（见#2）： [http ://www.mkyong.com/android/android-gridview-example/](http://www.mkyong.com/android/android-gridview-example/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T13:11:53.497

边距意味着它将在前一个视图和当前视图之间设置一个间隙。当您将 view1、view2 和 view3 添加到网格布局时，如果您在某个时间点删除 view2，则 view3 的边距根据 view1 设置。因此，它不会留下空白空间来代替 view2。不要在运行时删除 view2，而是将 view2 的背景设置为 null 并将文本设置为空，如下所示。

```
textView.setBackground(null);
textView.setText(""); 
```

这样视图仍然可用，但看起来已删除。

# ember.js - Ember.js：如何在使用 {{#each}} 帮助器循环遍历集合项时获取索引值？

> ID：16147755
> 
> 赞同：6
> 
> 时间：2013-04-22T13:01:16.780
> 
> 标签：ember.js, handlebars.js

在 Ember.Handlebars 中似乎还没有实现`@index`Handlebars 的 helper 变量。`{{#each}}`有谁知道它何时在 Ember 中可用，在此之前使用的最佳解决方案是什么？

非常感谢您！问候，

大卫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-21T18:17:08.403

这对我有用（在我的子模板中）：

```
<div {{bindAttr index="view._parentView.contentIndex"}}>
</div> 
```

# html - 从三星智能电视中的视频标签获取当前时间

> ID：16147763
> 
> 赞同：0
> 
> 时间：2013-04-22T13:01:31.807
> 
> 标签：html, html5-video, samsung-smart-tv

我已经安装了三星智能电视 SDK，我正在尝试获取视频正在播放的当前帧/时间。

视频已经在运行，一切似乎都很好，但是当我尝试使用 $('#video1')[0].currentTime 获取当前时间时，我只是以秒为单位获取值，没有毫秒。

我正在开发一个需要毫秒的程序，但似乎无法使用 SDK 获得它们。我究竟做错了什么？有小费吗？或者这是一个 SDK 限制，我永远无法获得当前的“真实”时间？

我在网上找到了一些解决方案，阅读了很多关于 HTML 5 中的 video 标签的信息，但是 SDK 文档似乎缺少很多信息，有些甚至是错误的......

我按照这个例子：http://jsfiddle[dot]net/893aM/1/

在任何浏览器中都可以正常工作，但是当我将它应用到智能电视时，我只能以秒为单位获得时间，我宝贵的毫秒没有运气......

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T14:53:08.167

请查看以下链接：

*   [使用 SEF 插件](http://www.samsungdforum.com/Guide/ref00014/sef_plugin_using.html)和[SEF 插件 API](http://www.samsungdforum.com/Guide/ref00014/index.html)
*   [SEF 插件播放器](http://www.samsungdforum.com/Guide/ref00014/sef_plugin_player.html)
*   来自 SEF 插件播放器的“ [OnCurrentPlaybackTime ”事件。](http://www.samsungdforum.com/Guide/ref00014/OnCurrentPlaybackTime.html)

编辑：

```
Player.OnCurrentPlayTime = function (milliseconds) {
  // use 'milliseconds' parameter
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-17T14:32:00.157

或者你可以自己转换

```
Player.OnCurrentPlayTime = function (time) {
  var hms = time.toString().split(":");
  var seconds=(parseInt(hms[0],10)*60*60+parseInt(hms[1],10)*60+parseInt(hms[2],10))*1000;
  alert(seconds);} 
```

# php - 从 PHP 数组中获取特定值

> ID：16147771
> 
> 赞同：0
> 
> 时间：2013-04-22T13:01:51.107
> 
> 标签：php, foreach

我有以下json：

```
{
  "data": [
    {
      "id": "116376655202954/insights/page_impressions_organic/day", 
      "name": "page_impressions_organic", 
      "period": "day", 
      "values": [
        {
          "value": 13059, 
          "end_time": "2013-02-22T08:00:00+0000"
        }, 
        {
          "value": 15223, 
          "end_time": "2013-02-23T08:00:00+0000"
        }, 
```

我使用 PHP 来获取以下 foreach 的`value`值`end_time`：

```
foreach ($page_impressions_organic['data'] as $page_impression_organic) {
    foreach($page_impression_organic['values'] as $key => $page_impression_organic_values) {
        $end_time = strval($page_impression_organic_values['end_time']);
        $ds = substr($end_time, 0, -14);
        $value = intval($page_impression_organic_values['value']);
        echo '[\'' . $ds . '\', ' . $value . ']';
}} 
```

一切正常，我的问题是现在我有一个不同的 json：

```
{
  "data": [
    {
      "id": "116376655202954/insights/page_storytellers_by_story_type/day", 
      "name": "page_storytellers_by_story_type", 
      "period": "day", 
      "values": [
        {
          "value": {
            "fan": 2043, 
            "page post": 293, 
            "user post": 5
          }, 
          "end_time": "2013-02-22T08:00:00+0000"
        }, 
        {
          "value": {
            "fan": 1085, 
            "page post": 398, 
            "user post": 5
          }, 
          "end_time": "2013-02-23T08:00:00+0000"
        }, 
```

而且我无法获得相同的结果，因为`value`它是一个数组，我特别需要`page post`它的值。我需要保留我的回声具有的形式以用于进一步的范围。我为此做了另一个 foreach：

```
foreach ($page_talking_abouts['data'] as $page_talking_about) {
    foreach($page_talking_about['values'] as $key => $page_talking_about_values) {
        foreach($page_talking_about_values['value'] as $page_talking_about_value) {
            $end_time = strval($page_talking_about_values['end_time']);
            $ds = substr($end_time, 0, -14);
            $value = intval($page_talking_about_value['page post']);
            echo '[\'' . $ds . '\', ' . $value . ']';
}}} 
```

但`$value`每次都是 0... 我必须做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T13:17:08.813

它很简单。查看重写的代码：

```
foreach ($page_talking_abouts['data'] as $page_talking_about) {
    foreach($page_talking_about['values'] as $key => $page_talking_about_values) {
        $end_time = strval($page_talking_about_values['end_time']);
        $ds = substr($end_time, 0, -14);
        $value = intval($page_talking_about_values['value']['page post']);
        echo '[\'' . $ds . '\', ' . $value . ']';
    }
} 
```

如果您只需要一个已知索引，您真的不必遍历内部值数组。您的解决方案中发生的情况是，对于嵌套值数组中的每个**值**，您都尝试获取 index `page post`，但由于嵌套数组的值不是数组，因此`page post`返回的索引 a如果输入，则`null`转换为。`0``intval`

除此之外，我真的建议将您的变量重命名为更具可读性的名称。那些带有细微差异的长名称使代码难以阅读。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T13:13:08.543

我认为您不需要第三个 for 循环，因为每个`value`数组只存在一次`end-time`。

尝试像这样更改您的代码：

```
foreach ($page_talking_abouts['data'] as $page_talking_about) {
    foreach($page_talking_about['values'] as $key => $page_talking_about_values) {

        // note: removed third for-loop

        $end_time = strval($page_talking_about_values['end_time']);
        $ds = substr($end_time, 0, -14);

        // note: changed this line to directly read out the page posts
        $value = intval($page_talking_about_values['value']['page post']);

        echo '[\'' . $ds . '\', ' . $value . ']';
}} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T13:03:54.433

您不必直接循环遍历它。使用 json_decode 解码字符串，然后执行 foreach 循环，然后再次对其进行 json_encode

# visual-studio-2012 - WCF 服务发布和无文件激活：仍然创建一个 .svc 文件

> ID：16147777
> 
> 赞同：0
> 
> 时间：2013-04-22T13:02:05.077
> 
> 标签：visual-studio-2012, wcf-4

使用 Visual Studio 2012，我创建了一个 WCF 4.5 服务库。当[服务发布](http://msdn.microsoft.com/en-us/library/vstudio/bb924407%28v=vs.110%29.aspx)到我的本地 IIS 时，尽管配置文件中有[serviceActivations](http://msdn.microsoft.com/library/vstudio/ee816902.aspx)部分，仍会创建一个 .svc 文件。

我还在配置文件中使用了自定义工厂，幸运的是，它没有丢失，因为 serviceActivations 覆盖了 .svc 文件。

配置文件如下所示：

```
<serviceHostingEnvironment aspNetCompatibilityEnabled="false" multipleSiteBindingsEnabled="true">
  <serviceActivations>
    <add factory="My.ServiceHostFactory" relativeAddress="~/BirtProxy.SoapReport.svc" service="BirtProxy.SoapReport" />
  </serviceActivations>
</serviceHostingEnvironment> 
```

创建的 .svc 文件如下所示：

```
<%@ ServiceHost Service="BirtProxy.SoapReport" %> 
```

我还有其他几个没有这种行为的服务，但我不知道出了什么问题。我不希望创建这个附加文件。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T11:58:05.103

.svc 文件已创建，因为该服务未在配置节点中声明。一旦我添加了服务，文件创建就消失了。

# python - 我退出（）一个脚本，但它不退出

> ID：16147779
> 
> 赞同：4
> 
> 时间：2013-04-22T13:02:08.110
> 
> 标签：python

我尝试退出脚本，但它没有退出。

这是我的代码：

```
import sys

try:
    ...
    print "I'm gonna die!"
    sys.exit()
except:
    ...

print 'Still alive!' 
```

结果是：

```
I'm gonna die!
Still alive! 
```

为什么？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-22T13:03:16.317

您正在`SystemExit`通过一揽子`except`条款发现例外情况。不要那样做。始终指定您希望避免这些事情的例外情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T13:04:55.640

`sys.exit()`是通过引发`SystemExit`异常来实现的，因此由 finally 指定的清理操作，try 语句的 except 子句得到尊重，并且可以在外部级别拦截退出尝试。

在您的示例`SystemExit`中，被以下`except`语句捕获。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T19:10:58.413

如果你*确实*需要立即退出，并且想跳过正常的退出处理，那么你可以使用[`os._exit(status)`](http://docs.python.org/2/library/os.html#os._exit). 但是，正如其他人所说，使用正常路径退出通常要好得多，而不是捕获`SystemExit`异常。当我们谈到这个话题时，`KeyboardInterrupt`您可能不想抓住另一个例外。（使用`except Exception`不会捕获`SystemExit`或`KeyboardInterrupt`。）

# java - （如何）我可以将我的程序绑定到不同的 IP 吗？

> ID：16147784
> 
> 赞同：-1
> 
> 时间：2013-04-22T13:02:17.407
> 
> 标签：java, ubuntu, groovy, network-programming

我的 Groovy 应用程序正在发送一些 HTTP 请求并使用`URL.getText()`. 此应用程序部署到具有不同 IPv4 地址的 Ubuntu 服务器。

我现在想在不同的这些 IP 上运行应用程序的不同实例。（如何）我能做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T13:07:29.020

> 具有不同 IPv4 地址的 Ubuntu 服务器

据我了解，在您的机器上配置了多个网络接口（在每个网络接口中，您的机器具有不同的地址）。

要为您指定网络接口，`java.net.Socket`可以使用以下代码：

```
NetworkInterface nif = NetworkInterface.getByName("eth0");
Enumeration<InetAddress> nifAddresses = nif.getInetAddresses();

Socket soc = new java.net.Socket();
soc.bind(new InetSocketAddress(nifAddresses.nextElement(), 0));
soc.connect(new InetSocketAddress(address, port)); 
```

本文中的更多详细信息[http://docs.oracle.com/javase/tutorial/networking/nifs/definition.html](http://docs.oracle.com/javase/tutorial/networking/nifs/definition.html)

# java - 带有显示标签的 struts 1.3 瓦片

> ID：16147786
> 
> 赞同：2
> 
> 时间：2013-04-22T13:02:24.140
> 
> 标签：java, jakarta-ee, struts, struts-1, displaytag

让我以非常简单的方式解释这个问题，在我的应用程序中，我有一个包含 2 个图块的 JSP。

1.  Tile 1 是一个包含搜索表单的 jsp。假设它只有一个在提交操作时设置为 ActionForm 的搜索参数。
2.  Tile 2 包含 DisplayTag，显示存储在 session 属性中的所有结果（在我们按下 Tile 1 的提交表单之后）。

现在显示表的第一页工作正常。但是，当我单击另一个页面链接（即 2,3，Last）时，它会加载空白页面。问题是，无法从此处访问搜索参数，因此无法将其附加到 requestURI 后面。（当然，当 sql 查询上没有附加条件时，我返回零记录。）

所以问题是，我如何访问另一个 JSP 的属性（我的搜索表单 - 另一个图块）？

我提出的解决方案（但我不满意）：

*   我可以将我的 Display Tag 代码放入同一个 Tile 的搜索表单中。工作正常。但我想要分离。
*   我可以在 Tile 2 中使用隐藏的参数。但这可能会导致与 Tile 1 相同的重复参数。

请让我知道一些有效的解决方案，因为我是 Struts Tiles 概念的新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T13:22:24.967

显示标签适用于表单范围会话。

将您用于在会话范围内的表中显示数据的表单。

# java - 不能在 POI 中添加两个合并区域？

> ID：16147787
> 
> 赞同：0
> 
> 时间：2013-04-22T13:02:25.107
> 
> 标签：java, apache-poi

我正在尝试在一行中添加两个合并区域，如下所示：

```
// Cell Range Address
CellRangeAddress cellRangeAddress_1 = new CellRangeAddress(0, 0, 3, 6);
CellRangeAddress cellRangeAddress_2 = new CellRangeAddress(0, 0, 7,9);

// Creating cells
cell = row.createCell(3); // 1
cell.setCellStyle(headingStyle);
cell.setCellValue("CoLUMN 1");

cell = row.createCell(4); // 2
cell.setCellStyle(headingStyle);
cell.setCellValue("COLUMN 2"); 
```

第一列被合并并显示“COLUMN 1”。第二列已合并，但不显示文本！

我做错了还是这是一个错误？我正在使用 Apache POI 3.7。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T17:06:46.783

您没有正确显示“COLUMN 2”。您正在创建两个单元格值并可能调用`addMergedRegion`合并单元格。但是当存在合并区域时，它不会影响它合并的单元格的内容。

您的第一个合并区域 (0, 0, 3, 6) 表示第一行 (D1:G1) 中的单元格 3 到 6，它涵盖了您创建的两个单元格。Excel 将仅显示合并区域中左上角单元格的内容，因此仅显示“COLUMN 1”。“第 2 列”不会被移开。内容在那里，但合并区域在 Excel 中查看时将其隐藏。

您的第二个合并区域 (0, 0, 7, 9) 表示第一行 (H1:J1) 中的单元格 7 到 9，但鉴于您提供的代码，那里没有内容。

我怀疑您希望第一个合并区域中的“COLUMN 1”和第二个合并区域中的“COLUMN 2”。文本“COLUMN 1”已正确位于第一个合并区域中。您可以简单地将第二个单元格的列索引更改为 7。

```
cell = row.createCell(7); // 2 
```

# javascript - 剑道图表中具有系列破折号类型的图例

> ID：16147789
> 
> 赞同：1
> 
> 时间：2013-04-22T13:02:27.940
> 
> 标签：javascript, kendo-ui, kendo-dataviz

我有一个带有六个系列的 Kendo Dataviz 图表，2 个实线系列，2 个虚线系列和 2 个虚线系列，我只使用了两种颜色的系列，现在我想用系列破折号类型显示图例以区分传说中的系列，有没有可能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T06:52:23.143

剑道图表尚不支持此功能，并且没有解决此问题的方法。

# javascript - 如果在 Jquery Grid 中选择了一个项目，如何获取按钮

> ID：16147791
> 
> 赞同：0
> 
> 时间：2013-04-22T13:02:37.270
> 
> 标签：javascript, jquery, jqgrid

我正在尝试在 HTML 表格中使用[jqGrid](http://www.trirand.com/jqgridwiki/doku.php)并且工作正常，但是我想在选择项目时获得一个按钮。

我试过这个：

```
 $(function () {
        tableToGrid(".mytable", {
            autowidth:true,
            pager: '#pager',
            rowNum: 20,
            viewrecords: true,
            loadui: true,
            rowList: [10,20,50],
            multiselect: true,
            caption: "Multi Select Example",

            onSelectAll : function(aSel,selected) {
                if(selected){
                    var value =0;
                    for(var i=0;i<aSel.length;i++){
                        var data = jQuery(".mytable").getRowData(aSel[i]);
                        value += parseFloat(data.total);
                    }
                    jQuery('#gbox_').before( $('<button class="button" type="button" value="Edit">Edit</button>') );
                } else {
                    jQuery(".button").remove();
                }
            },
            onSelectRow: function (id) {
                var selRows = $(this).jqGrid('getGridParam','selarrrow');
                if (selRows.length === 0) {
                    $(".button").remove();
                } else {
                    $('#gbox_').before( $('<button class="button" type="button" value="Edit">Edit</button>') );
                }

            }
        });
    }); 
```

当我单击一个项目时，我得到了按钮，但是对于每个选定的项目：

![对于每个选定的元素，我都得到了按钮](https://i.stack.imgur.com/F58Ic.png)

当我全选时，我没有得到任何按钮。为什么？

任何帮助表示赞赏！谢谢你，对不起我的英语不好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T13:04:55.963

你会想听听这个[`onSelectAll`](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aevents)事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T13:12:20.087

如果我理解你的问题。要将按钮添加到单击的项目，您必须使用以下代码：

```
$(function (e) {
            tableToGrid(".mytable", {
                autowidth:true,
                pager: '#pager',
                rowNum: 20,
                viewrecords: true,
                loadui: true,
                rowList: [10,20,50],
                multiselect: true,
                caption: "Multi Select Example",
                onSelectRow: function (id) {
                    var selRows = $(this).jqGrid('getGridParam','selarrrow');
                    if (selRows.length === 0) {
                        $(".button").remove();
                    } else {
                      $(e.target).before( $('<button class="button" type="button" value="Edit">Edit</button>') );
                    }

                }
            });
        }); 
```

# javascript - .checked 选项不适用于我的 javascript

> ID：16147799
> 
> 赞同：0
> 
> 时间：2013-04-22T13:03:05.113
> 
> 标签：javascript, html

我有：

```
<input type="checkbox" id="showdiv">SHOW ME!

<div id="hello" style="display:none">
  Hello world!
</div>

<script type="text/javascript">
  document.getElementById("showdiv").checked ? document.getElementById("hello").style.display = "inline" : document.getElementById("hello").style.display = "none";
</script> 
```

错误在哪里？div不会在点击时显示...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T13:05:57.187

您应该将脚本包装到复选框的 onclick 函数中。

像这样的东西：

```
document.getElementById("showdiv").onclick = function() {
    document.getElementById("showdiv").checked ? document.getElementById("hello").style.display = "inline" : '';
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T13:07:33.883

您需要将[事件侦听](https://developer.mozilla.org/en-US/docs/DOM/EventTarget.addEventListener)器附加到元素，当单击复选框时触发您的代码。就像现在一样，您的代码会立即执行，此时不会选中复选框。

```
document.getElementById("showdiv").addEventListener("click", callback, false);

function callback() {
    if (document.getElementById("showdiv").checked)
       document.getElementById("hello").style.display = "inline";
} 
```

[**演示**](http://jsfiddle.net/Hjrcg/)

*请注意，`addEventListener`在 IE9 之前，IE 不支持该功能，因此对于旧版浏览器，您需要解决附加事件侦听器的问题。（在上述参考文章中描述）*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T13:05:55.090

添加点击事件的代码在哪里？浏览器不理解应该运行 onclick

```
(function() {
    var cb = document.getElementById("showdiv");
    cb.onclick = function() {  //would be better to add it with addEventListener
        document.getElementById("hello").style.display = cb.checked ? "block" : 'none';
    }
})(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T13:06:45.473

它应该是

```
document.getElementById("showdiv").onclick = function(){
    document.getElementById("hello").style.display = this.checked ? 'inline' : 'none'
} 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/E5rwK/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-22T13:11:27.823

试试这个，用 Fiddler 测试

```
document.getElementById("showdiv").addEventListener("click", callback, false);

function callback() {
document.getElementById("showdiv").checked ? document.getElementById("hello").style.display = "inline" : document.getElementById("hello").style.display = "none";
} 
```

[演示](http://jsfiddle.net/Hjrcg/1/)

# apache - FollowSymLinks 错误“此处不允许”

> ID：16147801
> 
> 赞同：3
> 
> 时间：2013-04-22T13:03:09.547
> 
> 标签：apache, .htaccess, drupal, centos, webmin

我已经搜索了 4 个小时，但似乎找不到解决我们问题的方法。

**我们遇到的问题**
我们有一个*CentOS Linux 6.4*服务器，运行*Virtualmin 3.99.gpl*。我们有一个 Drupal 网站，我们想将其移至该服务器，并且由于它是一个多域站点，我们将不得不使用`FollowSymLinks`. 这已被禁用（正如我被告知的那样），因为发现了一些针对该指令的安全漏洞。从那时起，您将不得不使用`SymLinksIfOwnerMatch`. 现在，Drupal 在这个系统的根部深处隐藏了很多`.htaccess`文件，由于我不确定这种新方法将如何得到支持，所以我想请教一些专家他们对我同事提出的解决方案的意见。

**建议的解决方案**
我的同事告诉我，如果我编写一个简单的 shell 脚本来编辑域根文件夹中的所有 .htaccess 文件，它可能会起作用，这会将所有 .htaccess 文件替换`FollowSymlinks`为`SymLinksIfOwnerMatch`. 由于我不确定这是否会解决此问题，因此我想请教您对此的看法。

**我们尝试过**
的我们尝试从 Apache 修复配置文件以允许 FollowSymLinks，但这没有奏效。我们还尝试更改 Webmin 中的全局配置，但 webmin 忽略了这些编辑（对此进行修复会很棒！）。删除根文件夹中的 .htaccess 行可以解决问题，但这不是我们想要使用的解决方案。

任何其他解决方案、修复或解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-03-23T13:35:55.097

只是回到这一点，在我的情况下，建议的解决方案“有效”。

# r - 如何在R中命名特定的曲线图

> ID：16147805
> 
> 赞同：0
> 
> 时间：2013-04-22T13:03:31.757
> 
> 标签：r, ggplot2

我在同一张图中有不同颜色的线条。我想命名与特定颜色相关的每一行。我希望名称不显示在图表中，而是显示在图表的右侧。做：

```
line(......,xname="This_Is_The_Name_Associated_With_BlueColourLine") 
```

工作？我认为 xname 在行本身上显示名称。请帮忙。谢谢！

# maven - 性能/集成测试是否应该被视为多模块 Maven 项目中的模块？

> ID：16147806
> 
> 赞同：1
> 
> 时间：2013-04-22T13:03:33.237
> 
> 标签：maven, maven-3

在 Maven 多模块项目中，我是否应该将集成/性能测试项目也视为模块？

```
multi-module-project
  ├── module-war
  ├── some-other-module
  └── etc...

Should I include?
  └── performance-tests 
```

添加：

如果这些测试需要几个小时才能完成怎么办？

如果他们需要运行真正的服务器，比如 JBoss 集群，该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T13:06:11.577

我建议在 Web 应用程序的情况下按照您的建议设置一个单独的模块。我将性能测试视为一种集成测试。像这样：

```
multi-module-project
  ├── module-war
  ├── some-other-module
  └── integration-tests
  └── performance-tests
  └── etc... 
```

编辑：

如评论中所述：“您可以通过配置文件控制集成测试的执行”

# jquery - 使用 jQuery Searchable Select 插件时如何提高性能（初始化大量选择时非常慢）

> ID：16147810
> 
> 赞同：1
> 
> 时间：2013-04-22T13:03:44.723
> 
> 标签：jquery, performance, jquery-plugins, drop-down-menu, searchable

我正在使用 jQuery 可搜索选择插件[http://effinroot.eiremedia.netdna-cdn.com/repo/plugins/forms-controls/searchabledropdown/index.html](http://effinroot.eiremedia.netdna-cdn.com/repo/plugins/forms-controls/searchabledropdown/index.html)

如果我在一个页面上有少量选择但是我有很多选择（一页上可以有几个 100），这很好用。当我初始化插件（通过类或循环通过 ID）时，它需要很长时间（约 10 秒）并消耗所有系统资源。

当我运行设置代码时，我遇到了问题，例如：

```
$(document).ready(function() {
   $("select").searchable();
}); 
```

我的选择实际上是相同的两个重复多次。我尝试使用一个选择进行初始化（这要快得多）并复制然后复制它（通过 HTML 和 jQuery clone()），但是复制的实例不可搜索。

有没有办法减少为大数字初始化插件或重复选择所需的时间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T13:37:13.123

调用克隆时是否将 withDataAndEvents 作为 true 传递？我认为 .clone(true) 应该可以工作。确保在您要克隆的选择已可搜索后进行克隆。

```
$(document).ready(function() {
    var clone_src = $('#originalSelectUser');
    $(clone_src).searchable({        });
    $(".dest").each(function(i) {
        $(clone_src).clone(true).attr('id', 'clone'+i).appendTo('#enddiv');
    });  
}); 
```

另一个想法可能是制作您需要的两个，仅隐藏。然后，当一个选择被聚焦时，将它与匹配的隐藏选择的克隆交换。如果克隆不起作用，您可能需要在克隆后使用 .searchable() 调用对其进行初始化，但您不必这样做。

# java - Jasper 报告中无序 HTML 列表前的空行

> ID：16147819
> 
> 赞同：0
> 
> 时间：2013-04-22T13:04:21.770
> 
> 标签：java, html, jasper-reports

我正在尝试删除标记为 HTML 的 textField 中的空白行。我有一个带有标记 =“html”的乐队：

```
<band height="1" splitType="Stretch">
    <textField isStretchWithOverflow="true">
        <reportElement x="0" y="0" width="515" height="0"/>
        <textElement verticalAlignment="Top" markup="html">
            <font fontName="Arial" pdfFontName="jasper/fonts/ARIAL.TTF"/>
        </textElement>
        <textFieldExpression><![CDATA[$F{input}]]></textFieldExpression>
    </textField>
</band> 
```

输入值为：

```
<p>Here is a list</p>
<ul>
    <li>Item 1</li>
    <li>Item 2</li>
</ul> 
```

问题是，当我导出它时，它显示如下：

![从 jasper 文件生成的 pdf 的屏幕截图](https://i.stack.imgur.com/mxsLM.jpg)

如果我将其导出为 word，则“这是一个列表”和实际列表之间有一个空白行。我也试过没有段落标签，但结果是一样的。

我从 java 生成报告

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T12:22:15.260

只需删除`<p>`和`<ul>`标签
然后输入的值将是：

```
Here is a list
<li>Item 1</li>
<li>Item 2</li> 
```

这将删除一个空行

# java - Java - 简单的网络游戏非常滞后

> ID：16147822
> 
> 赞同：2
> 
> 时间：2013-04-22T13:04:27.433
> 
> 标签：java, networking, lag

*一天前我已经在 codereview 上问过这个问题，但我还没有得到任何回复，所以我想在这里问一下。*

**让我告诉你我想要做什么：**

弹出一个窗口，询问用户是否要运行服务器或客户端。选择服务器将在 LAN 上启动服务器。选择客户端将尝试连接到该服务器。一旦服务器正在运行并且客户端已连接，则会弹出一个带有两个正方形的窗口。服务器/客户端都可以使用箭头键移动它们的方块。

**这就是我得到的：**

服务器的方格以想要的速度移动，但他的移动在客户端一侧非常不稳定。另一方面，客户端方块似乎以每秒大约 3 个像素的速度移动（太慢了）。

**这就是我要问的：**

我想我的问题很明显。我所做的只是通过互联网发送 2 个整数。现代网络游戏发送的数据比这**多得多**，而且它们几乎没有滞后，所以很明显我做错了什么，但是什么？

**服务器.java：**

```
// server class
public class Server {
    // networking objects
    private ServerSocket serverSocket;
    private Socket clientSocket;
    private DataOutputStream clientOutputStream;
    private DataInputStream clientInputStream;
    // game objects
    private Vec2D serverPos, clientPos;
    private GameManager gameManager;
    // run method
    public void run() {
        // intialization try-catch block 
        try {
            // setup sockets
            serverSocket = new ServerSocket(1111);
            clientSocket = serverSocket.accept();
            // setup I/O streams
            clientOutputStream = new DataOutputStream(clientSocket.getOutputStream());
            clientInputStream = new DataInputStream(clientSocket.getInputStream());
        } catch(IOException e) { Util.err(e); }
        // declare & intialize data exchange thread
        Thread dataExchange = new Thread( 
            new Runnable() {
                // run method
                @Override
                public void run() {
                    // I/O try-catch block
                    try {
                        // exchange-loop
                        while(true) {
                            // write x & y, flush
                            synchronized(gameManager) {
                                clientOutputStream.writeInt(serverPos.x);
                                clientOutputStream.writeInt(serverPos.y);
                                clientOutputStream.flush();
                            }
                            // read x & y
                            clientPos.x = clientInputStream.readInt();
                            clientPos.y = clientInputStream.readInt();
                        }
                    } catch(IOException e) { Util.err(e); }
                }
            }
        );
        // setup game data
        serverPos = new Vec2D(10, 10);
        clientPos = new Vec2D(300, 300);
        gameManager = new GameManager(serverPos, clientPos, serverPos);
        // start data exchange thread
        dataExchange.start();
        // start main loop
        while(true) {
            // get keyboard input
            synchronized(gameManager) {    
                gameManager.update();
            }
            // repaint, sleep
            gameManager.repaint();
            Util.sleep(15);        
        }
    }
} 
```

**客户端.java：**

```
// client class
public class Client {
    // networking objects
    private Socket serverConnection;
    private DataOutputStream serverOutputStream;
    private DataInputStream serverInputStream;
    // game objects
    private Vec2D serverPos, clientPos;
    private GameManager gameManager;
    // run method
    public void run() {
        // intialization try-catch block 
        try {
            // setup socket
            serverConnection = new Socket(InetAddress.getByName("192.168.0.19"), 1111);
            // setup I/O streams
            serverOutputStream = new DataOutputStream(serverConnection.getOutputStream());
            serverInputStream = new DataInputStream(serverConnection.getInputStream());
        } catch(IOException e) { Util.err(e); }
        // declare & intialize data exchange thread
        Thread dataExchange = new Thread( 
            new Runnable() {
                // run method
                @Override
                public void run() {
                    // I/O try-catch block
                    try {
                        // exchange-loop
                        while(true) {
                            // read x & y
                            synchronized(gameManager) {
                                serverPos.x = serverInputStream.readInt();
                                serverPos.y = serverInputStream.readInt();
                            }
                            // write x & y, flush
                            serverOutputStream.writeInt(clientPos.x);
                            serverOutputStream.writeInt(clientPos.y);
                            serverOutputStream.flush();
                        }
                    } catch(IOException e) { Util.err(e); }
                }
            }
        );
        // setup game data
        serverPos = new Vec2D(10, 10);
        clientPos = new Vec2D(300, 300);
        gameManager = new GameManager(serverPos, clientPos, clientPos);
        // start data exchange thread
        dataExchange.start();
        // start main loop
        while(true) {
            // get keyboard input
            synchronized(gameManager) {    
                gameManager.update();
            }
            // repaint, sleep
            gameManager.repaint();
            Util.sleep(15);  
        }
    }
} 
```

我摆脱了一堆代码 - 我希望它现在不会令人困惑。谢谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T13:12:57.747

您正在使用 Sockets，也许您看到它对于实时对话来说是滞后的，因为它们是通过 TCP 构建的，它必须确认消息并继续 ping 以查看连接是否仍然存在。

也许您应该使用适用于 UDP 协议的 DatagramSocket。不同之处在于 UDP 只是吐出一些东西，而无需费心保持连接活跃，甚至试图知道消息是否到达。

使用示例： http: [//docs.oracle.com/javase/tutorial/networking/datagrams/clientServer.html](http://docs.oracle.com/javase/tutorial/networking/datagrams/clientServer.html)

编辑：为什么不尝试仅在服务器中的位置更改时才发送该 int ？可能服务器正在发送如此多的整数，以至于您的客户端有一个充满相同值的缓冲区，并且当您通过 int 读取 int 而不是清空缓冲区时，您会有一种迟钝的假感觉。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T13:27:01.207

您的代码中的一个问题是`while(true)`循环：

```
 while(true) {
        // get keyboard input
        synchronized(gameManager) {    
            gameManager.update();
        }
        // repaint, sleep
        gameManager.repaint();
        Util.sleep(15);        
    } 
```

这样，您发送的更新要么太多（当没有人按键时），要么更新太少（因为无论发生什么，您总是等待 15 毫秒）。如果您侦听键盘事件并且如果有，将其传播到另一侧会更好 - 然后另一侧可以更新作为对此“更改”事件的反应。您可能会发现[观察者模式](http://en.wikipedia.org/wiki/Observer_pattern)对实现这一点很有用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-22T13:21:58.913

我还没有阅读所有代码，但我确实注意到“客户端”和“服务器”都有在紧密循环中读取和写入更新的线程。

这样做存在三个问题：

*   如果它没有改变，客户端（或服务器）告诉另一端当前位置是没有意义的。

*   因为客户端和服务器都严格地“写然后读然后写然后......”两个线程进入锁步，并且每个写/读周期都需要网络往返。

*   您在持有锁的同时正在做部分工作，并且有另一个线程抓住相同的锁并进行屏幕更新。

所以你需要安排：

*   仅在位置实际发生变化时才发送位置更新，并且
*   读取和写入发生在不同的线程上。

@cyroxx 发现了另一个也会导致延迟的问题。

# php - 如何使用php从mysql表中对同一行中的年份和月份字段进行排序

> ID：16147826
> 
> 赞同：1
> 
> 时间：2013-04-22T13:04:33.433
> 
> 标签：php, mysql, sql-order-by, date-sorting

我有一个带有月份和年份字段的 mysql 表，如下所示。

```
 year        month       filename                    filepath
    2013        Feb         2013Feb_Report.xlsx         ./main_reports/2013Feb_Report.xlsx
    2013        Jan         2013Jan_Report.xlsx         ./main_reports/2013Jan_Report.xlsx
    2012        Jul         2012Jul_Report.xlsx         ./main_reports/2012Jul_Report.xlsx
    2013        Mar         2013Mar_Report.xlsx         ./main_reports/2013Mar_Report.xlsx
    2011        Mar         monthly report180413.xlsx   ./main_reports/monthly report180413.xlsx
    2012        Sep         2012Sep_Report.xlsx         ./main_reports/2012Sep_Report.xlsx
    2012        Oct         2012Oct_Report.xlsx         ./main_reports/2012Oct_Report.xlsx 
```

我正在从该表中检索所有字段并将其打印如下。

```
 2011 Mar  :  monthly report180413.xlsx
    2012 Sep  :  2012Sep_Report.xlsx
    2012 Oct  :  2012Oct_Report.xlsx
    2013 Jan  :  2013Jan_Report.xlsx 
```

我想通过按 DESC 顺序对月份和年份字段进行排序来检索此表，如下所示。我怎样才能做到这一点？我应该更改月份和年份字段的数据类型吗？请帮忙..

```
 2013 Jan  :  2013Jan_Report.xlsx
    2012 Oct  :  2012Oct_Report.xlsx
    2012 Sep  :  2012Sep_Report.xlsx
    2011 Mar  :  monthly report180413.xlsx 
```

我使用的sql查询如下。它按 DESC 顺序检索年份和月份，但月份按字母的 DESC 顺序排序，即“Jan”高于“Feb”。我需要的是'二月'高于'一月'..

```
 "SELECT * FROM main_reports ORDER BY year DESC, month DESC"; 
```

请任何帮助..提前谢谢..

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-22T13:28:36.337

假设您使用的是 MySQL。尝试使用方便的 ORDER BY FIELD 选项：

```
ORDER BY year DESC, FIELD( month, 'Dec', 'Nov', 'Oct', 'Sep', 'Aug', 'Jul', 'Jun', 'May', 'Apr', 'Mar', 'Feb', 'Jan' ) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-22T13:07:15.127

对于按顺序排序月份，我总是发现最好将它们存储为整数值，然后通过 PHP 输出文本版本

如果您目前将月份存储为一月、二月、三月等，则如果不先转换就无法正确订购

例如，将数据库中的所有月份转换为 Jan=1、Feb=2、Mar=3 等，然后您可以使用 SQL 顺序

```
ORDER BY year DESC,month DESC 
```

然后在你的PHP中，你可以输出当月的文本版本

```
$monthName = date("F", mktime(0, 0, 0, $monthNumber));
echo $monthName; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T13:14:23.850

正如完全烘焙所指出的那样，您严重滥用了 MySQL 数据类型。使用日期或日期时间列来处理与日期相关的数据，或者更好地使用 int(11) 来存储 UNIX 时间戳以便于排序/日期范围选择。

您可以轻松编写 PHP/ASP 脚本来将当前表格布局转换为有效格式。

# python - matplotlib中以2为底的对数y标度的直方图？

> ID：16147827
> 
> 赞同：3
> 
> 时间：2013-04-22T13:04:33.637
> 
> 标签：python, matplotlib, histogram

有没有办法做到这一点？当我尝试指定or时，该`hist`命令似乎无法识别它。`base``basey`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-22T13:23:40.363

注意：下面的解决方案适用于 matplotlib 版本 <1.3.1。

* * *

利用

```
ax.set_yscale('log', basey=2) 
```

* * *

```
import numpy as np
import matplotlib.pyplot as plt
mu, sigma = 100, 15
fig, ax = plt.subplots()
x = mu + sigma * np.random.randn(10000)
ax.set_yscale('log', basey=2)
n, bins, histpatches = ax.hist(x, 50, facecolor='green', alpha=0.75)
plt.show() 
```

![在此处输入图像描述](https://i.stack.imgur.com/1OCr5.png)

# asp.net - 如何在运行时在 asp.net 中创建和使用新的 CSS

> ID：16147830
> 
> 赞同：0
> 
> 时间：2013-04-22T13:04:45.203
> 
> 标签：asp.net, css, infragistics, webdatagrid

我正在 web.config 中创建一个配置条目，用于`Infragistics WebDataGrid`在运行时设置单元格的背景颜色。

基础网格仅支持 css 设置颜色，因此我们需要在运行时为该颜色创建新的 CSS 类。

# sql - 如何在sql中编写超类

> ID：16147831
> 
> 赞同：-1
> 
> 时间：2013-04-22T13:04:51.393
> 
> 标签：sql, oracle

是否可以在 sql oracle 中编写超类，还是将其编写为普通类？

这是我的超级类的 er 图表的一部分：

![在此处输入图像描述](https://i.stack.imgur.com/BdwLa.jpg)

*对不起，我是sql初学者

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T15:06:28.823

对此有几种不同的方法：

1.  将所有数据存储在一个表中（该表包含所有父属性和子属性的列）
2.  每个叶子类使用一张表，将所有属性存储在该表中（无公用表）
3.  每个类使用一个表，仅在此表中存储特定于类的属性（使用通用表作为基类数据，并在详细表中添加对该表的 FK 引用）

我建议您获取一份[企业架构模式的](http://www.martinfowler.com/books/eaa.html)副本- 它包含有关如何处理此类情况的详尽信息。

# methods - QueryDsl，使用 Java 或 Groovy 使方法级联 NULL 安全的优雅方式

> ID：16147834
> 
> 赞同：1
> 
> 时间：2013-04-22T13:05:01.493
> 
> 标签：methods, groovy, nullpointerexception, querydsl, cascading

如果在遍历可能为空的级联方法时经常遇到 NPE。例如，我想查询客户的“称呼”属性..

```
 ConstructorExpression giftCE = ConstructorExpression.create(Gift,
            order.a.b.c.salutation
    ) 
```

a、b 或 c 中的任何一个或全部都可能为 NULL，从而导致 NPE。

在 Java 或 Groovy 中防范此类 NPE 的最佳“querydsl”方式是什么？

（我不确定 Groovy 的 Elvis op 是否在 querydsl 语句中涵盖了这种情况）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T13:49:46.577

您可以使用字段访问器而不是最终字段。这样你就不会遇到 NPE [http://www.querydsl.com/static/querydsl/3.1.1/reference/html/ch03s04.html#d0e1713](http://www.querydsl.com/static/querydsl/3.1.1/reference/html/ch03s04.html#d0e1713)

我不确定您是否可以在 Groovy 中使用字段/属性语法使用它们，因为它们不是吸气剂。

在你的情况下，它会变成

```
ConstructorExpression giftCE = ConstructorExpression.create(Gift,
    order.a().b().c().salutation
) 
```

# javascript - SWF 对象库可以在所有浏览器中使用吗？

> ID：16147835
> 
> 赞同：0
> 
> 时间：2013-04-22T13:05:06.117
> 
> 标签：javascript, jquery

```
 if (typeof t.plugins != D && typeof t.plugins[S] == r) {
                ab = t.plugins[S].description;
                if (ab && !(typeof t.mimeTypes != D && t.mimeTypes[q] && !t.mimeTypes[q].enabledPlugin)) {
                    T = true;
                    X = false;
                    ab = ab.replace(/^.*\s+(\S+\s+\S+$)/, "$1");
                    ag[0] = parseInt(ab.replace(/^(.*)\..*$/, "$1"), 10);
                    ag[1] = parseInt(ab.replace(/^.*\.(.*)\s.*$/, "$1"), 10);
                    ag[2] = /[a-zA-Z]/.test(ab) ? parseInt(ab.replace(/^.*[a-zA-Z]+(.*)$/, "$1"), 10) : 0
                }
            } else {
                if (typeof O.ActiveXObject != D) {
                    try {
                        var ad = new ActiveXObject(W);
                        if (ad) {
                            ab = ad.GetVariable("$version");
                            if (ab) {
                                X = true;
                                ab = ab.split(" ")[1].split(",");
                                ag = [parseInt(ab[0], 10), parseInt(ab[1], 10), parseInt(ab[2], 10)]
                            }
                        }
                    } catch (Z) {}
                }
            }
            return {
                w3: aa,
                pv: ag,
                wk: af,
                ie: X,
                win: ae,
                mac: ac
            }
        }() 
```

以上代码用于 swf 对象库。他们检查插件和用 jquery 编写的 ActiveX 对象。Activex 仅适用于 IE。**我的疑问是它是否适用于所有浏览器？如果是，它是如何工作的？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T13:23:24.453

为什么它不应该工作？对 ActiveX 的检查是有条件的，并且在发生错误时对捕获的 ActiveX 对象的访问也是如此。

因此，任何不支持非 IE 行为的浏览器（即除 IE 之外的所有浏览器 ;)），都将由`else`.

顺便说一句：回购中的最新版本的代码结构略有不同

```
.... }
else if (typeof win.ActiveXObject != UNDEF) {
   try {
       var a = new ActiveXObject(SHOCKWAVE_FLASH_AX);
       if (a) { // a will return null when ActiveX is disabled
          d = a.GetVariable("$version");
          if (d) {
             ie = true; // cascaded feature detection for Internet Explorer
             d = d.split(" ")[1].split(",");
             playerVersion = [parseInt(d[0], 10), parseInt(d[1], 10), parseInt(d[2], 10)];
            }
        }

   catch(e) {}
} 
```

它不再是一个`else`，而是一个`else if`（再次尝试捕获）。最常见的情况是事先涵盖的。他们只是检查浏览器加载的所有插件，如`navigator.plugins`. 由于这是这样做的方式，大多数浏览器永远不会进入该`else if`部分。

要获取有关的一些信息`navigator.plugins`，请查看[MDN 文档](https://developer.mozilla.org/en-US/docs/DOM/window.navigator.plugins)。这是一个浏览器的东西，在所有浏览器中都可用（除了通常的 IE，但上面代码中的技术将解决这个问题）。这将始终是“插件”。如果您尝试以不同的方式访问它，例如“插件”，您将收到一个错误，因为它没有定义。

我不太清楚你提到 jQuery 是什么意思。这是 vanilla JS，所以没有使用 jQuery。我们经常使用这个库，我可以向你保证，它稳定且经过良好测试。

# python - Scrapy动态创建对象+json导出

> ID：16147839
> 
> 赞同：2
> 
> 时间：2013-04-22T13:05:09.980
> 
> 标签：python, json, scrapy

我创建了一个新的蜘蛛来抓取一个网站。这个爬虫在网站上获取 liste 的每个视频游戏并为其创建一个对象：

```
class gameInfos(Item):
    title = Field()
    desc = Field()
    kind = Field() 
```

对于每个游戏，网站都包含一个可变的经销商列表。我得到对象中的每个经销商：

```
class buyInfos(Item):
    name = Field()
    address = Field()
    price = Field() 
```

现在，我的问题：

我想将`buyInfos`对象放入`gameInfos`对象中，并且我的 json 文件看起来：

```
[
   {
    "title": "BF3",
    "desc": "a beautiful game",
    "kind" : "FPS",
    "buy" : 
           [
              {name : "cdiscount", "address" : "example", "price" : "45 €"},
              {name : "amazon", "address" : "example amazon", "price" : "40 €"},
               //... other resellers
           ]
   },
   {
    "title": "COD 42",
    "desc": "a game",
    "kind" : "FPS",
    "buy" :
   }, 
   //... other games
] 
```

所以我试图在我的主要对象中创建一个对象。它可以工作，但最后，我只有一个要填充的对象，而我想在我的主要对象中创建一些对象。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T13:24:54.130

Scrapy[`Field`](https://github.com/scrapy/scrapy/blob/master/scrapy/item.py#L18)类是`dict`. 如果您想让其中一个字段能够包含`Item`s 列表，我相信您可以创建一个 List 字段。

```
class ListField(list):
  pass

class GameInfo(Item):
    title = Field()
    desc = Field()
    kind = Field()
    buys = ListField() 
```

现在在您的蜘蛛中，您可以创建`gameInfos`它，它将能够包含所有相关的`buyInfos`

```
game_info = GameInfo()
# create your buy info and append to game info
game_info['buys'].append(new_buy_info) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T16:56:00.453

解决方案很简单。创建一个对象：

```
class GameInfo(Item):
    title = Field()
    desc = Field()
    kind = Field()
    listeBuys = Field() 
```

然后，在您的蜘蛛中，实例 GameInfo：

```
gameInfo = GameInfo() 
```

然后，所需字段的实例 python 列表：

```
gameInfo['listeBuys'] = [] 
```

最后，根据需要添加：

```
gameInfo['listeBuys'].append(asyouwant) 
```

感谢 dm03514 的帮助！

# php - 从 jon 解码数组中检索 lit 的朋友

> ID：16147845
> 
> 赞同：0
> 
> 时间：2013-04-22T13:05:26.213
> 
> 标签：php, facebook, facebook-opengraph

我想要做的是在网页上以 ul li 格式显示朋友列表和他们的图像，
我有 json 解码的字符串数组，其中包含用户信息。我用 PHP 怎么做？

```
object(stdClass)#4 (4){["entries"]=>array(3){[0]=>object(stdClass)#5 (10){["uid"]=>float(1.5555133825854E+14)["photo"]=>string(90) "https://m.ak.fbcdn.net/profile.ak/hprofile-ak-prn1/323887_155551338258538_1152153357_q.jpg"["type"]=>string(4) "user"["text"]=>string(13) "shikhadamodar"["path"]=>string(17) "/shikha.damodar.1"["category"]=>string(6) "Madiun"["names"]=>array(1){[0]=>string(13) "shikhadamodar"}["index_rank"]=>int(-1)["needs_update"]=>bool(true)["non_title_tokens"]=>string(6) "madiun"}[1]=>object(stdClass)#6 (10){["uid"]=>float(1.5555133217343E+14)["photo"]=>string(90) "https://m.ak.fbcdn.net/profile.ak/hprofile-ak-snc3/273318_155551332173428_2131571532_q.jpg"["type"]=>string(4) "user"["text"]=>string(14) "shreya damodar"["path"]=>string(14) "/my.devprofile"["category"]=>string(5) "Nilai"["names"]=>array(1){[0]=>string(13) "shreyadamodar"}["index_rank"]=>int(-1)["needs_update"]=>bool(true)["non_title_tokens"]=>string(5) "nilai"}[2]=>object(stdClass)#7 (10){["uid"]=>float(1.5555558723211E+14)["photo"]=>string(83) "https://m.ak.fbcdn.net/profile.ak/hprofile-ak-prn1/41332_155555587232111_3158_q.jpg"["type"]=>string(4) "user"["text"]=>string(9) "neha neha"["path"]=>string(12) "/neha.neha34"["category"]=>string(18) "New York,New York"["names"]=>array(1){[0]=>string(9) "Neha neha"}["index_rank"]=>int(-1)["needs_update"]=>bool(true)["non_title_tokens"]=>string(18) "new york,new york"}}["token"]=>string(12) "1333551453-7"["display_token"]=>int(5)["display_ttl"]=>int(1333541132)} 
```

这样做的有效方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T13:07:01.920

做这个

让我们考虑您的 json_decoded 代码在 $arr 变量数组中

```
foreach ($arr->entries as $val) {
    echo "<ul><li>".$val['uid']."</li></ul>";
    //put your li code here
} 
```

像这样的东西

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T13:32:04.483

```
foreach ($jarr->entries as $val) {
    echo "<ul><li>".$val->uid."</li></ul>";
} 
```

# ruby - 在 RSpec Rake 任务与 rspec runner 中引用文件位置

> ID：16147846
> 
> 赞同：1
> 
> 时间：2013-04-22T13:05:33.393
> 
> 标签：ruby, rspec2

我有这个目录结构：

```
project_dir
  spec
    person
      person_invalid_address_examples.yaml
      person_spec.rb
  rakefile.rb 
```

person_spec.rb 中有这段代码：

```
describe "Create person tests"
  ...
  context "Person with invalid address" do
    invalid_address_examples = []
    File.open("person_invalid_address_examples.yaml", "r") do |file|
      invalid_address_examples = YAML::load(file)
    end
    invalid_address_examples.each do |example|
      it "Does not allow to create person with #{example[:description]}" do
        person.address = example[:value]
        result = person.create
        result.should_not be_success
      end
    end      
  end
  ...
end 
```

现在，当我从 person 目录运行时，`rspec person_spec.rb`一切都按预期工作。但是，如果我从 rakefile 运行 RSpec rake 任务，我会收到`No such file or directory`错误...问题显然也反过来存在 - 如果我使用相对于 rakefile 位置的路径配置文件名，则 RSpec rake 任务工作正常，但我`No such file or directory`从rspec runner .. 有没有办法用路径配置文件名，以便它同时适用于 RSpec rake 任务和 Rspec runner？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T13:24:00.753

您的`File.open`作品是否取决于加载路径——ruby 在当前加载路径的目录中查找该相对路径。您可以查看特殊`$:`变量中的加载路径。

尝试查看在执行规范的两种方法之间比较的这个变量的值，看看它如何/是否不同。

可能是当前工作目录（基本上，您从哪个目录执行命令，显示在路径列表中`.`）在加载路径上，并且当前工作目录在您运行的两种不同方法中最终不同规格。

你的 yaml 文件在哪里？您的 YAML 文件是否仅用于测试，您可以将它放在任何您想要的地方吗？

您有多种选择，但它们都依赖于提供绝对路径或始终位于加载路径上的相对路径。

1.  将 yml 文件移动到始终位于加载路径上的某个位置。您的`spec`目录可能已经在加载路径上。您可以将 yml 放入`./spec/example.yml`. 或者将您的 yml 放在子目录中，但在`open`--中引用该子目录`spec/support/data/examples.yml`，然后`open "data/examples.yml"`（从加载路径上的目录开始，`data/examples.yml`将解析）。

2.  或者，忽略加载路径，您*可以*使用特殊`__FILE__`变量来构建 yml 文件的完整路径，从它到当前文件的相对位置。`__FILE__`是引用它的代码所在的源文件的文件路径。

3.  或者，可能比 2 更好，您可以*将*示例数据目录添加到您的加载路径中`spec_helper.rb`，方法是使用 构建路径`__FILE__`，然后将其添加到`$:`变量中。例如，一个`example_data`目录。

不过，#1 可能足以满足您的需求。将 yml 放在您的`spec`目录中 - 或将其放在目录的`spec`子目录中，但在`open`参数中包含该子目录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T13:17:14.720

这是因为

```
File.open("person_invalid_address_examples.yaml", "r") 
```

它会打开运行 rspec 的文件。在您的情况下，您应该更明显地定义文件，如下所示：

```
file_path = File.expand_path("person_invalid_address_examples.yaml", File.dirname(__FILE__))
File.open(file_path, "r") 
```

# javascript - Angular.js 更改一项 ng-repeat 导致所有其他项目上的过滤器运行

> ID：16147852
> 
> 赞同：8
> 
> 时间：2013-04-22T13:05:41.443
> 
> 标签：javascript, angularjs, angularjs-scope, angularjs-ng-repeat

我仍然遇到同样的问题，ng-repeat 中的过滤器和函数一直被调用。

此处的示例[http://plnkr.co/edit/G8INkfGZxMgTvPAftJ91?p=preview](http://plnkr.co/edit/G8INkfGZxMgTvPAftJ91?p=preview)，只要您在一行中更改某些内容，`someFilter`就会调用过滤器 1000 次。

显然这是因为子范围的任何更改都会冒泡到其父范围，导致 $digest 运行，导致所有过滤器运行（[https://stackoverflow.com/a/15936362/301596](https://stackoverflow.com/a/15936362/301596)）。那正确吗？在我的特定情况下如何防止它发生？

如何使其仅在已更改的项目上运行？

在我的实际用例中，即使更改甚至不在 ng-repeat 的项目上也会调用过滤器，它是如此毫无意义，它实际上会导致性能问题..

> // 编辑从 plunker 中清除了所有不必要的东西 [http://plnkr.co/edit/G8INkfGZxMgTvPAftJ91?p=preview](http://plnkr.co/edit/G8INkfGZxMgTvPAftJ91?p=preview)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T13:46:02.903

这就是 Angular 的脏检查的工作原理。如果您有一个包含 500 个项目的数组并且数组发生更改，则必须将过滤器重新应用于整个数组。现在你想知道“为什么两次”？

从[另一个答案](https://stackoverflow.com/questions/11676901/is-this-normal-for-angularjs-filtering)：

> 这是正常的，angularjs 使用了 'dirty-check' 方法，所以它需要调用所有的过滤器来查看是否存在任何变化。在此之后，它检测到一个变量（您键入的变量）发生了变化，然后再次执行所有过滤器以检测是否有其他变化。

以及它引用的答案：[数据绑定在 AngularJS 中是如何工作的？](https://stackoverflow.com/questions/9682092/databinding-in-angularjs)

**编辑**：如果您真的注意到迟缓（我不是在较旧的 Core 2 Duo PC 上），可能有许多创造性的方法可以解决它，具体取决于您的 UI 将是什么。

1.  您可以在用户编辑数据时将行置于编辑模式以隔离更改，并在用户退出编辑模式时同步模型备份
2.  您只能更新模型`onblur`而不是`onkeypress`使用指令，如下所示：http: [//jsfiddle.net/langdonx/djtQR/1/](http://jsfiddle.net/langdonx/djtQR/1/)

# asp.net - 从一个构建任务创建多个 SetParameters.xml

> ID：16147860
> 
> 赞同：6
> 
> 时间：2013-04-22T13:06:09.533
> 
> 标签：asp.net, msbuild, msdeploy, webdeploy

我正在寻找允许我生成 Web 部署包和相关的 deploy.cmd 和 SetParameters.xml 的解决方案。

但我需要为每个环境生成一个 deploy.cmd 和 SetParameters.xml

我需要我的输出如下所示

*   项目名称.DevSetParameters.xml
*   项目名称.DevDeploy.cmd
*   项目名称.UATSetParameters.xml
*   项目名称.UATDeploy.cmd
*   项目名称.PRODSetParameters.xml
*   项目名称.PRODDeploy.cmd
*   项目名称.zip

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T14:05:19.490

查看 Sayed Ibrahim Hashimi 的博客和他创建的 web 包 nuget 扩展。NuGet 包扩展了 Visual Studio 中的 Web 打包过程，使您能够创建可以发布到多个环境的单个包

[打包一次在任何地方发布](http://sedodream.com/2011/12/24/PackageOncePublishAnywhere.aspx)- 您将需要查看它创建的 powershell 脚本，并使用适当的值从您的构建任务中调用它。

![从 VS 命令行安装 Nuget](https://i.stack.imgur.com/L8iYy.png) [赛义德·易卜拉欣·哈希米博客](http://sedodream.com/2012/03/14/PackageWebUpdatedAndVideoBelow.aspx)

# php - 扩展类（覆盖）方法的条件声明，基于父方法的默认参数

> ID：16147864
> 
> 赞同：0
> 
> 时间：2013-04-22T13:06:11.877
> 
> 标签：php, inheritance, joomla

我正在为提供一些基类的 CMS 创建一个插件（假设其中一个类被称为`Base`）。这个类有一些必须在扩展类中覆盖的辅助方法。我们应该注意，基本方法提供了默认参数/值。在 LMS 的一个版本中，这些值在下一版本中仅按值通过引用提供。

例如（CMS v1.0）：

```
function prepareTable(&$table){... 
```

内容管理系统 v1.1：

```
function prepareTable($table){... 
```

当您扩展`Base`类并覆盖`prepareTable`方法时，您还必须使用相同的默认参数/值声明它，否则会显示 STRICT PHP 警告（在 PHP 5.4 中默认为开启）。

我的问题是，我如何在知道父 CMS 的版本的情况下，以一种有效的方式有条件地覆盖父类中的方法？

这是我目前拥有的（目前不工作）：

```
class Base{
    function prepareTable(&$table){
    }
}

class Extending extends Base{
    if(CMS_VERSION=='1.0')
      function prepareTable(&$table){
    else
      function prepareTable($table){

       echo $table;
    }
} 
```

显然，我不能`Base`直接编辑及其方法。

编辑：这是确切的错误消息：

```
Strict standards: Declaration of Extending::prepareTable() should be compatible with Base::prepareTable($table) in. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T13:45:24.903

在不复制prepareTable中的代码的情况下，我能想到的唯一方法是创建一个伪函数，在prepareTable中调用，然后在最终的扩展类中声明它

```
if(CMS_VERSION=='1.0') {
    class Base2 extends Base{
        function prepareTable(&$table){
            return $this->prepareTable2($table);
        }
        function prepareTable2(&$table){
        }
    }
} else {
    class Base2 extends Base{
        function prepareTable($table){
            return $this->prepareTable2($table);
        }
        function prepareTable2(&$table){
        }
    }
}
class Extending extends Base2{
    function prepareTable2(&$table){
            echo $table;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-02T10:47:24.507

```
if(CMS_VERSION=='1.0') {
    class Extending extends Base{
        function prepareTable(&$table){

        }
    }
} else {
    class Extending extends Base{
        function prepareTable($table){

        }
    }
} 
```

请注意，`if/else`检查必须在定义类之前完成，而不是在类内部。本质上，您正在构建该类的两个不同版本。

旁注：如果您需要包含共享方法，在两个版本的类之间不会更改，您可以定义一个新类来扩展`Extending`，在那里创建共享方法并使用这个新类。

例如（将其放在上面的代码之后）：

```
class ExtendingFull extends Extending{
    // Here you may include your shared methods
    // e.g:
    public function sharedMethod(){
       echo 'test';
    }
} 
```

# dataset - 如何找到大量特征的相似性

> ID：16147865
> 
> 赞同：1
> 
> 时间：2013-04-22T13:06:17.410
> 
> 标签：dataset, data-mining, flickr

我不确定我是否在正确的地方问这个问题，因为我是stackoverflow的新手，如果需要，请移动。

我正在尝试解决 Flickr 数据集的链接预测问题。我的数据集有 5K 个节点，每个节点有大约 27K 个特征，它是稀疏的。

我想找到节点之间的相似性，以便如果相似性值大于我决定的某个阈值，我可以预测它们之间的链接。问题在于特征的数量。我无法在 Weka 中加载文件（尝试通过一些信息增益或其他东西来减少功能，然后尝试聚类或检查余弦相似度测量）

另一个问题是，如何将其定义为分类问题？我想找到两个节点的重叠标签，因此该表包含节点和它们的一些特征（将有数千个），并且所有这些都将是正类，因为我知道它们之间存在链接。

我想用一些节点创建一个测试数据集，并创建类似的表并将它们标记为正类或负类。但我的问题是我拥有的所有数据都是正面的，所以我认为它永远无法标记为负面。如何正确地将其更改为分类问题？

非常感谢任何指示或帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T13:14:10.680

Weka 可以处理 27K 特征，这不应该是一个问题......但是，我会将这个问题视为一个分类问题，而是一个链接发现问题，在这种情况下可以看作是一个匹配问题。

我的方法是： 1\. 出现新节点 2\. 搜索最相似的元素 3\. 如果相似度大于您的阈值，则假设它们是相关的（有链接）。

主要问题是根据某些质量度量调整阈值。

对于这种方法，Lucene 可能是最好的选择。

我希望这有帮助。

# hadoop - 将数据导入 HVE（使用 Google Books n-gram 数据查找热门话题）

> ID：16147884
> 
> 赞同：0
> 
> 时间：2013-04-22T13:06:57.033
> 
> 标签：hadoop, amazon-web-services, amazon-s3, hive

我正在逐步指导[http://aws.amazon.com/articles/5249664154115844](http://aws.amazon.com/articles/5249664154115844)

步骤：创建输入表

```
hive>
CREATE EXTERNAL TABLE english_1grams (
 gram string,
 year int,
 occurrences bigint,
 pages bigint,
 books bigint
)
ROW FORMAT DELIMITED FIELDS TERMINATED BY '\t'
STORED AS SEQUENCEFILE
LOCATION 's3://datasets.elasticmapreduce/ngrams/books/20090715/eng-all/1gram/'; 
```

我的系统内置：ubuntu +(hadoop +hive) 而不是 AWS(EC2) 所以我改变了`LOCATION -> LOCATION 'home/hduser/googlebook'`

文件夹 googlebook 获得：所有文件，我在[http://storage.googleapis.com/books/ngrams/books/datasetsv2.html](http://storage.googleapis.com/books/ngrams/books/datasetsv2.html) 第 2 版下载

所以我有一个问题是当我查询时

```
hive>SELECT * from ngrams 
```

结果是 0 -> 数据库没有数据？我该怎么办 ？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T03:37:03.640

我不清楚您的问题，但是您创建的表是`english_1grams`但您的 hql 是`select * from ngrams`.

> 这是我的步骤，我确信我可以看到数据。

1.  我从网站[google book](http://storage.googleapis.com/books/ngrams/books/googlebooks-eng-all-1gram-20120701-2.gz)下载数据并解压缩到我的主文件夹。
2.  输入hive从本地复制数据到hadoop`dfs -copyFromLocal ${env:HOME}/googlebooks-eng-all-1gram-20120701-2 /user/hive/warehose/googlebook`
3.  我创建表格

    ```
    create external table english_gram(
        gram string,
        year int,
        page int,
        book int)
        row format delimited
        fields terminated by '\t'
        stored as textfile
        location 'hdfs://ubuntu:9005/user/hive/warehouse/googlebook'; 
    ```

4.  `select * from english_gram;`你会看到数据。

# c# - LINQ - Distinct 被忽略？

> ID：16147886
> 
> 赞同：2
> 
> 时间：2013-04-22T13:07:01.067
> 
> 标签：c#, .net, linq, distinct, gethashcode

所以我的 LINQ 代码有问题，我必须选择一个不同的数据集，我实现了以下内容`IEqualityComparer`：

```
public class ProjectRoleComparer : IEqualityComparer<ProjectUserRoleMap>
{
    public bool Equals(ProjectUserRoleMap x, ProjectUserRoleMap y)
    {
        return x.RoleID.Equals(y.RoleID);
    }
    public int GetHashCode(ProjectUserRoleMap obj)
    {
        return obj.GetHashCode();
    }
} 
```

在这种情况下，我希望检索与给定项目相关的一堆`ProjectUserRoleMap`对象，这些对象由它的 ID 标识，我只想要一个`ProjectUserRoleMap`unique `RoleID`，但我对执行不同选择的严格指令`RoleID`被忽略了。我完全不知道为什么会这样，并且对 LINQ 的了解不足以想到解决方法。这是调用代码：

```
ProjectRoleComparer prCom = new ProjectRoleComparer();

IEnumerable<ProjectUserRoleMap> roleList = ProjectData.AllProjectUserRoleMap.Where(x => x.ProjectID == id).Distinct(prCom); 
```

这段代码给了我 6 个条目，而我**知道**我想要的条目数只有 4。**我对 LINQ 的使用有什么问题吗？**

作为参考，该`ProjectUserRoleMap`对象有一个 RoleID，（int）

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-22T13:08:46.420

你的实现`GetHashCode`是错误的。返回`obj.RoleID.GetHashCode();`

背景：
使用 a 的代码`IEqualityComparer<T>`通常首先比较两个对象的哈希码。只有当这些哈希码相同时`Equals`才会被调用。
它是这样实现的，因为两个*不相等*的对象可以有*相同*的哈希键，但是两个*相等*的对象永远不能有*不同的*哈希键——如果`GetHashCode()`实现正确的话。
这些知识用于提高比较的效率和性能，因为实现`GetHashCode`应该是快速、廉价的操作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-22T13:09:53.043

尝试：

```
public int GetHashCode(ProjectUserRoleMap obj)
{
    return obj.RoleID.GetHashCode();
} 
```

# magento - 将属性添加到 Magento 中的类别。

> ID：16147890
> 
> 赞同：-1
> 
> 时间：2013-04-22T13:07:08.783
> 
> 标签：magento, magento-1.7

我知道，我们可以将属性添加到产品列表中。我也知道，我们可以使用 db 查询将属性添加到类别中。类似于下面的链接。

[http://miragedesign.net/newss/magento-add-custom-attributes-to-category/](http://miragedesign.net/newss/magento-add-custom-attributes-to-category/) 我的问题，不能像我们对产品列表那样通过magento admin 来完成吗？

如果是，该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T13:11:28.300

抱歉，没有用于将属性链接到类别的管理界面您可以为此使用设置脚本

[http://www.atwix.com/magento/add-category-attribute/](http://www.atwix.com/magento/add-category-attribute/)

# javascript - Highcharts.js 组合条形图/折线图与时间跨度条形图

> ID：16147894
> 
> 赞同：0
> 
> 时间：2013-04-22T13:07:15.287
> 
> 标签：javascript, highcharts

我想要实现的是开发一个将线系列与条形相结合的图形。x 轴应该是一个简单的时间线（日期），2 个 y 轴应该是线性或对数值。创建线系列和时间轴没有问题。

我的问题是当我试图实现“时间跨度条”时。我猜它是一种甘特图和折线图。条形表示每个条形具有开始日期和可选结束日期的数据。我希望每个栏从开始日期开始（与 x 轴对齐）并在结束日期（如果可用）结束。如果没有可用的结束日期，则该条应填满整个图表，直到右边缘。我无法弄清楚如何将这些时间跨度条与线系列结合起来。我已经检查了 jsfiddle /8JhXv/1/ 这非常接近我想要实现的目标，除了在那个例子中，它们不是相互重叠的。谁能给我一些关于如何将它们放在一起的提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T18:05:47.430

看看这里的一些选项：

[http://highcharts.uservoice.com/forums/55896-general/suggestions/804783-gantt-chart](http://highcharts.uservoice.com/forums/55896-general/suggestions/804783-gantt-chart)

最好的选择不是使用实际的条形图，而是使用 lineWidth 设置为足够高的值的线条系列以在视觉上模仿条形图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T09:23:21.303

您可以尝试使用 line series 和 columnrange ( [http://www.highcharts.com/demo/columnrange](http://www.highcharts.com/demo/columnrange) )

# angularjs - AngularJS：如何防止/延迟过滤器的应用以避免重新排列 ng-repeat

> ID：16147898
> 
> 赞同：3
> 
> 时间：2013-04-22T13:07:25.707
> 
> 标签：angularjs, angularjs-directive

我已经为简单的边输入编写了一个指令。

小提琴在这里： http: [//plnkr.co/edit/PQXyxfmTbpaQE1ZnkQkq](http://plnkr.co/edit/PQXyxfmTbpaQE1ZnkQkq)

当您更改某人的年龄足以更改订单时，就会出现问题。有没有办法劫持 ng-repeat 元素的父范围以不应用过滤器？

具体来说，我可以在拖动滑块时阻止元素重新排列吗？就像，我会在`mousedown`事件上设置一些标志以停止过滤，并在事件上删除该标志`mouseup`以允许重新排列。

我查看了 Angular 源代码，我很确定目前无法做到这一点，但是我也欢迎对 Angular 进行修改以允许这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T18:06:52.273

`orderBy`创建您自己的自定义过滤器，并在您的视图中使用它。（但是，您的自定义过滤器可以注入`orderByFilter`和使用它——有关更多信息，请参阅[此 SO 答案](https://stackoverflow.com/a/14223178/215945)。）

```
<li ng-repeat="person in persons | myOrderBy:orderProp:doNotFilter"> 
```

在您的自定义过滤器中，检查参数`doNotFilter`，这是您的指令将在鼠标按下时设置的范围属性，并在鼠标向上时清除。如果设置了属性，则不要过滤。

您必须将“不过滤”属性的名称传递给您的指令：

```
<slider min="0" max="100" step="1" ng-model="person.age" do-not-filter="doNotFilter"> 
```

另一种方法是为指令指定一个或两个控制器方法来调用 mousedown 和 mouseup。然后这些方法将影响`doNotFilter`范围属性。

```
<slider min="0" max="100" step="1" ng-model="person.age" 
    filter-stuff="filterStuff(filterState)"> 
```

# sockets - 如何取消订阅 DatagramSocket MessageReceived 事件

> ID：16147904
> 
> 赞同：2
> 
> 时间：2013-04-22T13:07:47.830
> 
> 标签：sockets, windows-runtime, udp, unsubscribe

我正在尝试在绑定的 UDP 套接字（DatagramSocket）上取消订阅 MessageReceived 并获取异常。我就是这样注册的：

```
 EventRegistrationToken myRegToken;
    myRegToken = (mySocket->MessageReceived += ref new TypedEventHandler<DatagramSocket^, 
          DatagramSocketMessageReceivedEventArgs^>(listenerContext, &ListenerContext::OnMessage)); 
```

这就是我取消注册的方式：

```
mySocket->MessageReceived -= myRegToken; 
```

我得到一个异常：**在意外的时间调用了一个方法。**

我做错了什么？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-12T16:08:01.270

不走运，唯一的解决方案似乎是删除 mySocket`mySocket = nullptr;`并在需要时重新创建它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-02T12:58:46.783

只需使用

`Socket.Dispose();`

这是官方方式，描述如下：

[https://msdn.microsoft.com/library/windows/apps/br241358](https://msdn.microsoft.com/library/windows/apps/br241358)

# c++ - 我可以获得 IloNumVarArray 的值吗？关于目标函数的定义

> ID：16147906
> 
> 赞同：1
> 
> 时间：2013-04-22T13:07:54.723
> 
> 标签：c++, linear-programming, cplex

我正在使用 CPLEX 来解决 mip。我的目标是最小化正的决策值的总和。所以我在定义目标函数的时候需要判断决策值的符号。例如：

```
 IloNumVarArray pp(env);
    for (int i=0;i<N;i++)
    {
      pp.add(IloNumVar(env, -50.0, 50.0));
    }
    IloExpr obj(env);
    for (int in=0;in<N;in++)
    {     
       if (pp[in]>0)   ///error:this expression is wrong, how to judge the value? ///
       obj+=pp[in];
    }
    model.add(IloMinimize(env, obj));
    obj.end(); 
```

如何正确表达？定义目标函数时可以得到“pp”的值吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T16:40:29.893

根据定义，决策变量的值在您进行求解之前是未知的，因此 (pp[i] > 0) 返回一个 IloRange 对象而不是布尔值，因此您会收到编译时错误。

要最小化变量 pp[i] 的正数部分，您需要定义第二个非零但大于 pp[i] 的变量。

```
IloNumVarArray pp(env, N, -50, 50, ILOFLOAT);
IloNumVarArray pp_positive(env, N, 0, IloInfinity, ILOFLOAT);
for (int i=0; i<N; ++i)
{
  model.add(pp[i] - pp_positive[i] <= 0);
}
model.add(IloMinimize(env, IloSum(pp_postiive)); 
```

因为 pp_positive 只出现在目标函数中，所以如果 pp[i] 为正，它将取 pp[i] 的值，如果 pp[i] 为负，则取 0 的值。

# android - 套接字在睡眠模式下减慢接收速度

> ID：16147908
> 
> 赞同：1
> 
> 时间：2013-04-22T13:07:59.757
> 
> 标签：android, sockets

我正在使用套接字接收数据，它开始接收数据但随着手机进入睡眠模式，它逐渐变慢并最终减慢到套接字超时。为了防止这种情况，我使用了唤醒锁，但它仍然没有显示出任何好处。有人知道吗？

# sql-server - 更新数据时 SQL Server 2000 中出现域错误

> ID：16147911
> 
> 赞同：0
> 
> 时间：2013-04-22T13:08:02.767
> 
> 标签：sql-server, sql-server-2000

我创建了一个类似下面的函数

```
ALTER  FUNCTION fn_Calc
(@Lat1  Float,
 @Lng1  Float,
 @Lat2  Float,
 @Lng2  Float)
RETURNS Float
AS
BEGIN

Declare @x      as Float
Declare @y      as Float
Declare @Distance   as Float

Select  @x = (SIN(RADIANS(@Lat1)) * SIN(RADIANS(@Lat2)) + COS(RADIANS(@Lat1)) * COS(RADIANS(@Lat2)) * COS(ABS((RADIANS(@Lng2)) - (RADIANS(@Lng1)))))
Select  @y = ATAN((SQRT(1-(POWER(@x,2))) / @x))

Select  @Distance = (1.852 * 60.0 * ((@y / PI()) * 180)) / 1.609344

RETURN  @Distance

END 
```

我正在使用上述函数来更新表中的列，如下所示：

```
Update test 
set calc = dbo.fn_Calc(cast(Lat as float), cast(Long as float), dblLat, dblLong) 
```

在运行上述查询时，我得到了错误。

> “发生域错误。”

什么可能导致此错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T13:21:42.463

试试这个——

```
ALTER FUNCTION dbo.fn_Calc 
(
      @Lat1 FLOAT
    , @Lng1 FLOAT
    , @Lat2 FLOAT
    , @Lng2 FLOAT
)
RETURNS FLOAT
AS BEGIN

    DECLARE 
          @x FLOAT
        , @y FLOAT

    SELECT @x = 
                  SIN(RADIANS(@Lat1))
                * SIN(RADIANS(@Lat2)) + COS(RADIANS(@Lat1))
                * COS(RADIANS(@Lat2))
                * COS(ABS(RADIANS(@Lng2) - RADIANS(@Lng1)))

    SELECT @y = ATAN(SQRT(ABS(1 - POWER(@x, 2))) / @x)

    RETURN (111.12 * ((@y / PI()) * 180)) / 1.609344

END 
```

# r - How to convert continuous variable to discrete in R?

> ID：16147915
> 
> 赞同：5
> 
> 时间：2013-04-22T13:04:05.543
> 
> 标签：r, categorical-data

I have a variable which encodes group ID:

```
d <- data.frame(group = c(0,1,0,2,1,3,2,0,1,2), x=c(1.2,2.3,3.2,2.1,1.3,1.5,2.3,0.4,1.3,1.7)) 
```

When I try to use it in ggplot2 for making boxplots I get an error

> Continuous value supplied to discrete scale

At attempt to render data. Then I manually change at least one group ID in data to text everything works OK.

**So, my question is:** is where some easy way to change continuous variable, containing finite number of variants to discrete?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-22T13:15:58.463

this:

```
ggplot(d) + geom_boxplot(aes(factor(group), x)) 
```

gives the following plot

![enter image description here](https://i.stack.imgur.com/CawNj.jpg)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-22T13:15:01.723

Since you're providing the `group` variable with a numeric vector, this is understood as a continuous variable. You need to convert it to a categorical variable. Try the following:

```
d <- data.frame(group = as.factor(c(0,1,0,2,1,3,2,0,1,2)), x=c(1.2,2.3,3.2,2.1,1.3,1.5,2.3,0.4,1.3,1.7)) 
```

The `as.factor` function will convert the numeric vector you provided for the groups to a discrete variable.

# file - trigger.io 删除使用 forge.file.SaveURL 存储的所有文件？

> ID：16147916
> 
> 赞同：1
> 
> 时间：2013-04-22T13:08:24.570
> 
> 标签：file, save, trigger.io

我广泛使用了 trigger.io 的 file.saveURL 功能，但我想知道它是否可能或可能添加此功能，但运行命令来删除所有存储的项目？

我正在创建的应用程序可由用户自定义，因此他们有能力“离开”该应用程序。

这样做将清除所有本地存储和任何下载的项目。

目前我有一个方法可以将每个引用存储在本地存储中，当我“离开”时，我会遍历 LC 中的项目并删除每个项目。虽然这似乎工作正常，但有时确实有问题。我只是好奇是否可以在文件保存中添加一个简单的删除所有类型功能？

鉴于我们负责清理这些物品，最好简单地删除所有存储的物品

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T15:26:08.363

目前，不 - 我们不会将这些文件保存在单独的文件夹中，这些文件本来可以一次性清除...

这是我们将来可以做出的改变，但如果它证明是对文件模块的流行更新！

# ember.js - emberjs-RC2 渲染助手范围和动作冒泡不允许表单保存

> ID：16147919
> 
> 赞同：0
> 
> 时间：2013-04-22T13:08:34.993
> 
> 标签：ember.js, ember-router

**[jsfiddle](http://jsfiddle.net/GabSY/)**。_

在 posts#index 模板中，我可以使用 #linkTo 助手创建新评论，该助手转到 PostNewComment 路由并呈现 post/newcomment 表单。如果我单击保存，则使用 PostNewComment 路由中的“保存事件”保留新创建的评论。

您可以在 post/comments" 模板中取消注释下面的行，以查看它是否正常工作

{{#linkTo "post.newComment"}} 添加评论{{/linkTo}}

我更改了我的 UI 以使用控制器 isAddingNew 按钮和渲染助手来确定何时显示表单，现在如果我单击保存按钮，我得到：

```
Uncaught TypeError: Cannot call method 'one' of null 
```

这就是我渲染它的方式：

```
<p> {{render "post.newComment" }} </p> 
```

我怀疑这是一个范围问题，因为只有在使用渲染助手后单击“保存”时才会触发错误。

要到达“添加新评论”按钮：

```
 click  -> post -> a post title -> click comments link -> add comment 
```

有没有办法通过帖子/评论模板中的“渲染助手”显示“发布/新评论表单”，以使用 PostNewComment 路由中定义的“保存事件”。现在单击该表单中定义的“保存按钮”会直接转到父路由，即 PostCommentsRou​​te，而不是转到自己的路由，这可能是因为我通过渲染助手显示了表单。

我认为调用“保存”应该转到它自己的控制器，然后冒泡到它自己实际定义的路由，然后再尝试将层次结构冒泡到 PostComments 路由。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T17:17:26.313

可能有一些替代方案，但这很有效并且非常地道：http: [//jsfiddle.net/GabSY/4/](http://jsfiddle.net/GabSY/4/)

尤其：

```
{{#if model}}
     <form {{action save content on='submit'}}> 
    {{view Ember.TextArea valueBinding="content.body" placeholder="body"}}
    <button type="submit"> save comment </button> 
     <button {{action cancel}}> Cancel</button>
    </form>
{{else}}
    <button  {{action open}}> Add comment </button>
{{/if}} 
```

您收到`Uncaught TypeError: Cannot call method 'one' of null`错误的原因是`PostNewCommentController`' 模型从未设置。我最终做的是使用`open`上的操作`PostNewCommentController`来设置`model`控制器的，它可以在 Handlebars 中使用`{{if}}`来确定是否应该显示表单。

我更喜欢这种方法，而不是在's方法中设置`content`/ `model`（它们是彼此的别名），因为如果你沿着这条路线走，很容易开始在不太相关的控制器和路线之间混合关注点。在我的方法中，设置新评论/的所有逻辑都发生在新评论的控制器中，这是有道理的，因为新评论不再有自己的路由来初始化这些数据。`PostNewCommentController``PostCommentsRoute``setupController``content``model`

# jsf - 在 p:accordionPanel 中动态禁用/启用 p:tab

> ID：16147922
> 
> 赞同：1
> 
> 时间：2013-04-22T13:08:38.370
> 
> 标签：jsf, primefaces

我只想动态启用或禁用单个选项卡（而不是整个手风琴面板）。我尝试了以下方法，这是我的代码：

索引.xhtml

```
<p:accordionPanel id="accordionPanelId" widgetVar="accordionPanelWidget">
   <p:tab id="tab1" title="First Tab">
       <h:outputText value="Contents of Tab1"/>
       <h:form>
         <p:commandButton value="Enable Tab2" action="#{tabBean.buttonAction}" update=":accordionPanelId:tab2"/>
       </h:form>
   </p:tab>

   <p:tab id="tab2" title="Second Tab" disabled="#{tableBean.disableTab}">
      <h:outputText value="Contents of Tab2"/> 
   </p:tab>
</p:accordionPanel> 
```

TabBean.java

```
@ManagedBean
@ViewScoped
public class TabBean implements Serializable {

    private boolean disableTab=true;

    public boolean isDisableTab() {
        return disableTab;
    }

    public void setDisableTab(boolean disableTab) {
        this.disableTab = disableTab;
    }

    public void buttonAction()
    {
        disableTab = false;
    }

} 
```

使用上述方法，Tab2 的内容正在显示，但 Tab Header 仍然冻结，可能这不是实现此目的的神方法...请提出任何其他方法或更改此方法。

> **编辑**：如果我按如下方式更新整个 Accordion 面板，上述方法可以正常工作：

```
<p:commandButton value="Enable Tab2" action="#{tabBean.buttonAction}" update=":accordionPanelId"/> 
```

> 但我不想更新所有选项卡。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T00:42:01.643

您需要将`disabled`选项卡的属性绑定到`disableTab`您将在服务器端切换的支持 bean 变量。为了反映您在服务器端所做的更改，您可以`<p:accordionPanel/>`在客户端进行 ajax-update。使用您当前的设置，您需要做的唯一更改是：

1.  将属性绑定`disabled`到您设置的支持 bean 变量

    ```
     <p:tab id="tab2" title="Second Tab" disabled="#{tabBean.disableTab}">
           <h:outputText value="Contents of Tab2"/> 
       </p:tab> 
    ```

2.  使用 javascript API 启用后自动切换到选项卡

    ```
     <p:tab id="tab1" title="First Tab">
          <h:outputText value="Contents of Tab1"/>
             <h:form>
               <p:commandButton value="Enable Tab2" oncomplete="accordionPanelWidget.select(2)" action="#{tabBean.buttonAction}" update=":accordionPanelId:tab2"/>
            </h:form>
       </p:tab> 
    ```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-02-06T08:39:19.290

您必须更新所有手风琴面板才能启用/禁用选项卡。在这种情况下，您必须更新手风琴PanelId。但是，您可以在手风琴面板中使用 dynamic="true" 属性来避免更新未呈现的部分。

# magento - 创建订单时 Magento 更改运费

> ID：16147923
> 
> 赞同：2
> 
> 时间：2013-04-22T13:08:44.513
> 
> 标签：magento, shipping

我正在以编程方式创建订单，一切正常。但我需要更改运费。我试着：

```
$shippingAddress->setCollectShippingRates(true)->collectShippingRates()
->setShippingMethod('flatrate_flatrate')
->setShippingAmount('200')
->setBaseShippingAmount('200')
->setPaymentMethod('checkmo'); 
```

但在管理中它仍然显示运输和处理信息统一费率 - 固定 €12,230.00

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-05T17:48:42.817

如果您需要更改所有订单的运费，最好的方法是更改​​管理面板上的配置：系统->配置->运输方式->统一费率，价格字段。

如果这是您针对不同订单所需要的东西，那么最好的方法是创建自定义运输方式。你可以看到[Magento 的指导方针](http://www.magentocommerce.com/wiki/5_-_modules_and_development/shipping/create-shipping-method-module)，或者[这篇](http://www.smashingmagazine.com/2014/01/15/create-custom-shipping-methods-magento/)也不错的文章。

# php - MySQL Pivot Table 获取分组记录中的第一行和最后一行

> ID：16147924
> 
> 赞同：3
> 
> 时间：2013-04-22T13:08:44.803
> 
> 标签：php, mysql, sql, mysqli

我在 mysql 上编写了银行数据库。我正在使用 MySQL 数据透视表生成组明智的记录/报告。

这是我用于帐户维护的示例表，

```
 ----------------------------------------------------------------------------------
account_number   | description   | Transaction Amount | Balance  | transaction_date
----------------------------------------------------------------------------------
1021212              1             0                    0          2013-04-02
1021213              1             100                 100         2013-04-01
1021212              1             1000                1000        2013-04-02
1021213              1             100                 200         2013-04-01
1021214              1             500                 500         2013-04-02
1021212              2             100                 900         2013-04-09 
```

我需要运行显示每日（每月）交易的完整报告。

这是我要求的报告格式，

```
-----------------------------------------------------------------------------------
account_number   | init_balance   | total_banking | total_withdraw | final_balance
----------------------------------------------------------------------------------
1021212              0               1000            100                900
1021213              100             100             0                  200
1021214              0             500             0                    600 
```

我正在尝试使用数据透视表查询生成此报告，并且我可以获得除初始和最终余额字段之外的所有信息。

这是我的示例查询，

```
SELECT account_number,
**xxxxxxxxxx AS init_balance,**
SUM(CASE WHEN m.description = '1' THEN m.amount END) AS total_banking,
SUM(CASE WHEN m.description = '2' THEN m.amount END) AS total_withdraw,
**xxxxxxxxxx AS final_balance**
FROM account
WHERE transaction_date BETWEEN '2013-04-01' AND '2013-04-30'
GROUP BY account_number
ORDER BY account_number 
```

如果任何人都可以提供帮助，请让我知道编写数据透视表的模式以获取表格的第一行和最后一行以及分组结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T13:45:14.563

You need something like that:

```
 SELECT
    m.account_number,
    SUM(IF(id = t.min_id, balance, 0)) AS init_balance,
    SUM(CASE WHEN m.description = '1' THEN m.amount END) AS total_banking,
    SUM(CASE WHEN m.description = '2' THEN m.amount END) AS total_withdraw,
    SUM(IF(id = t.max_id, balance, 0)) AS final_balance
FROM
    account m
INNER JOIN
    (
        SELECT
            account_number,
            MIN(id) AS min_id,
            MAX(id) AS max_id
        FROM
            account
        GROUP BY account_number
    ) AS t
ON
    m.account_number = t.account_number
WHERE
    transaction_date BETWEEN '2013-04-01' AND '2013-04-30'
GROUP BY
    account_number
ORDER BY
    account_number 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T13:35:07.840

尝试

```
CASE WHEN MIN(record_id_field) THEN Balance   END AS initial_amount 
```

和

```
CASE WHEN MAX(record_id_field) THEN Balance   END AS final_amount 
```

# android - 有没有办法在 Maps API v2 上显示所有信息窗口？

> ID：16147929
> 
> 赞同：2
> 
> 时间：2013-04-22T13:08:54.813
> 
> 标签：android, google-maps

那么，如标题所示：有没有办法在 Maps API v2 上显示所有信息窗口？

我读过它不能同时只显示一个。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-22T13:16:35.770

没有。

根据文档，一次只显示 1 个信息窗口。

但是你可以有一个看起来像信息窗口的自定义标记。

> 信息窗口允许您在用户点击地图上的标记时向他们显示信息。默认情况下，如果标记设置了标题，则当用户点击标记时会显示信息窗口。**一次只显示一个信息窗口。**如果用户点击另一个标记，当前窗口将被隐藏并显示新的信息窗口。

# html - Dart WebUI html 数据值

> ID：16147930
> 
> 赞同：2
> 
> 时间：2013-04-22T13:08:57.870
> 
> 标签：html, dart, dart-webui

我在使用 dart 的 web ui 包时遇到了一些问题。

首先，我看到 web ui 没有解释 html 标签。是否不能使用例如`<br />`标签在 html 中的 div 或 span 元素中注入 html 代码？

编辑：

我的 html 文档中有这个：

```
<span>{{dataValue}}</span> 
```

这在我的飞镖文件中：

```
String dataValue = "This is an example <br /> using line breaks"; 
```

通过“inject” inment 将字符串放入html 文档中`dataValue`的 placeholder( ) 中。`{{dataValue}}`我的问题是我能以某种方式将此字符串解释为 html 吗？现在它将`<br />`标签显示为常规文本，而不是将其解释为 html 换行符。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T15:14:21.823

这是按预期工作的。如果可以以这种方式将任意 HTML 代码作为字符串注入，那将是一个安全问题。

但是，您可以使用 为字符串添加换行符`\n`，这将在您的页面上可见。

或者，您可以使用 Dart HTML 库将元素添加到您想要的位置。

例如：

```
<span id="mySpan"></span> 
```

```
import 'dart:html';

var span = query('#mySpan');
span.append(new Text('first half of my text'));
span.append(new BrElement());
span.append(new Text('second half of my text')); 
```

# php - 仅显示一个子类别的帖子 - Wordpress

> ID：16147935
> 
> 赞同：1
> 
> 时间：2013-04-22T13:09:12.260
> 
> 标签：php, wordpress

假设我有以下类别。

```
Movies

----- Action
----- Science fiction
----- Drama

Music

----- POP
----- Rock 
```

在这里，电影和音乐是父类别，其余是子类别。

**如果我只想显示音乐类别中的 POP 音乐（POP 的帖子），我该怎么做。**

请帮忙！。

我不知道如何显示子类别的帖子。我唯一拥有的是一个示例代码，它可以显示父类别和子类别的帖子。

```
<?
// Get the post ID
        $id = get_the_ID();         

        //get all the categories ( this function will return all categories for a post in an array)
        $category= get_the_category( $id );

        if ($category->category_parent == 0) {

        //extract the first category from the array
        $catID = $category[0]->cat_ID;

        //Assign the category ID into the query
        $verticalNavigationSwitcher = "cat=$catID&orderby=ID&order=ASC";
     }              

        $result = new WP_Query($verticalNavigationSwitcher);

                    //$featuredPosts->query('showposts=5&cat=3');
                    while ($result->have_posts()) : $result->the_post(); 
        ?>

   <li><a href='<?php the_permalink() ?>'><span><?php the_title(); ?></span></a></li>

  <?php 
            endwhile; 
            wp_reset_postdata();
 ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T13:41:09.757

看起来您使用的示例过于复杂。如果您只需要特定类别的帖子，那么您可以使用类别 slug 或 ID 来检索帖子，并使用 WP_Query ，如上例所示。

因此，如果“流行”类别的 id 为 4（您可以通过将鼠标悬停在 Posts -> Categories 中的类别名称上来获取类别 ID ...它显示在编辑链接中），那么您的代码将是；

```
<?php
$result = new WP_Query( 'cat=4' );

while ($result->have_posts()) : $result->the_post(); 
?> 
```

这是法典的相关部分；

[https://codex.wordpress.org/Class_Reference/WP_Query#Category_Parameters](https://codex.wordpress.org/Class_Reference/WP_Query#Category_Parameters)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-07T00:54:27.327

我找到了一种只显示一个子类别帖子的方法。

如果我在查询中使用“category__in”，它会返回一个类别的帖子。

```
$verticalNavigationSwitcher = "category__in=$catID&orderby=ID&order=ASC"; 
```

# python - Python：使用运算符重载操作对象

> ID：16147939
> 
> 赞同：0
> 
> 时间：2013-04-22T13:09:38.090
> 
> 标签：python, oop, overloading

我正在尝试创建一个包含两个浮点数的类；一个数据点和一个与该数据点相关的错误。这是我的类定义：

```
class DataPoint:
def __init__(self, Datum, Error, Operator):
    self.Datum    = Datum
    self.Error    = Error
    self.Operator = Operator
def ReturnDatum(self):
    return self.Datum
def ReturnError(self):
    return self.Error
def ReturnOperator(self):
    return self.Operator 
```

运算符字段只包含一个字符串，对我的问题并不重要。我现在的目标是能够重载“+”运算符，这样一旦我定义了我的类的两个实例，我就可以简单地使用如下表达式：

```
 Object3 = Object1 + Object2 
```

其中 Object3 有 Datum3 = Datum1 + Datum2，以及 Error 的类似简单表达式。我试图通过使用以下函数定义（在我的类定义中）来做到这一点：

```
def __add__(self, other):
    return DataPoint(self, self.Datum + other.Datum, math.sqrt(self.Error * self.Error + other.Error * other.Error), 'NULL') 
```

但我得到的错误基本上意味着我没有正确定义我的重载。提前感谢杰克

编辑：错误是形式的东西

```
Traceback (most recent call last):
  File "DataCombination.py", line 78, in <module>
TempObject = LineData[0] - LineData[1]
  File "DataCombination.py", line 22, in __sub__
return DataPoint(self, self.Datum + other.Datum, math.sqrt(self.Error * self.Error + other.Error * other.Error), '+')
TypeError: unsupported operand type(s) for +: 'str' and 'str' 
```

EDIT2：小型可运行示例使用代码：

```
import math
import sys

# Path to file and filename
FileLocation = 'DataSet.dat'

class DataPoint:
def __init__(self, Datum, Error, Operator):
    self.Datum    = Datum
    self.Error    = Error
    self.Operator = Operator
def __add__(self, other):
    return DataPoint(self.Datum + other.Datum, math.sqrt(self.Error * self.Error + other.Error * other.Error), '+')
def __sub__(self, other):
    return DataPoint(self.Datum - other.Datum, 1.0, 'NULL')
def __mul__(self, other):
    return DataPoint(self.Datum * other.Datum, 1.0, 'NULL')
def __div__(self, other):
    return DataPoint(self.Datum / other.Datum, 1.0, 'NULL')
def ReturnDatum(self):
    return self.Datum
def ReturnError(self):
    return self.Error
def ReturnOperator(self):
    return self.Operator

# Read in the data set from the file
File = open(FileLocation, 'r')
FileSegments = [line.split( ) for line in File.readlines()]

# Clean up the input
for i in xrange(FileSegments.__len__()):
for j in xrange(FileSegments[i].__len__()):
    FileSegments[i][j] = FileSegments[i][j].translate(None, '()')

# Loop over the number lines in the file
for i in xrange(FileSegments.__len__() - 2):

LineData = []

Count = (FileSegments[i].__len__() + 1) / 4

# Import strings into list of objects
for j in xrange((FileSegments[i].__len__() + 1) / 4 - 1):
    x =     j * 4
    y = 2 + j * 4
    z = 3 + j * 4
    LineData.append(DataPoint(FileSegments[i][x], FileSegments[i][y], FileSegments[i][z]))
LineData.append(DataPoint(FileSegments[i][-3], FileSegments[i][-1], 'NULL'))

TempObject = LineData[0] - LineData[1] 
```

示例 DataSet.dat 如下所示：

```
(-5.63150902306 +/- 0.549562002684) * (9.62647766508 +/- 1.00395610402) + (16.9559698529 +/- 0.507466944938) + (1.07686005998 +/- 0.713190458948)
(9.40128537128 +/- 0.673031987441) * (7.65561264405 +/- 0.11828791914)
(3.19433075143 +/- 1.16442961316) / (8.49485815486 +/- 0.936343018664) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T13:16:15.507

### 第一个错误

尝试：

```
def __add__(self, other):
    return DataPoint(
        self.Datum + other.Datum, 
        math.sqrt(self.Error * self.Error + other.Error * other.Error), 
        'NULL') 
```

`DataPoint`请注意，创建新对象时不必传递“self” 。

* * *

### 第二个错误

您用`str`s 初始化数据，但您打算用`float`s 初始化它们。

尝试：

```
def __init__(self, Datum, Error, Operator):
  self.Datum    = float(Datum)
  self.Error    = float(Error)
  self.Operator = Operator 
```

# jquery - JQuery offset() 仅返回 HTML 文档的偏移量

> ID：16147940
> 
> 赞同：1
> 
> 时间：2013-04-22T13:09:38.260
> 
> 标签：jquery, html, dom, offset

我想获得 div 的偏移值，但我只获得 HTML 文档的偏移量，即 0,0

这是测试代码：- HTML：-

```
<div id="result">Click an element.</div>
<div style="margin:auto; height:100px; width:134px; position:absolute; left: 193px; top: 53px;" id="name">JQuery</div> 
```

脚本：-

```
$("*",document.body).mouseover(function (e) {
  var offset = $(this).offset();
    e.stopPropagation();
    $("#result").text(this.tagName + " coords ( " + offset.left + ", " + offset.top + " )");
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T13:13:09.463

`**[LIVE DEMO](http://jsbin.com/isabab/1/edit)**`

```
$(function(){  // DOM IS NOW READY (document.ready shorthand)

    $("*").click(function (e) {
        var offset = $(this).offset();
        e.stopPropagation();
        $("#result").text(this.tagName + " coords ( " + offset.left + ", " + offset.top + " )");
    });

}); 
```

在这里阅读更多：http: [//api.jquery.com/ready/](http://api.jquery.com/ready/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T13:22:13.617

你错过了 jQuery [.ready](http://api.jquery.com/ready/)事件，包括它，你应该很好。

# c# - 布尔函数 c# 上的 BackgroundWorker

> ID：16147941
> 
> 赞同：0
> 
> 时间：2013-04-22T13:09:47.043
> 
> 标签：c#, background, boolean, backgroundworker

我有一个布尔函数。我有一个希望用来运行此功能的 bw。我想从函数中获取返回值，可以吗？

这是一个示例代码：

```
void Main ()
{
     BackgroundWorker backgroundWorker = new BackgroundWorker();
     backgroundWorker.DoWork += (sender1, e1) => testBool();
     bool result = backgroundWorker.RunWorkerAsync;
}

bool testBool()
{
     return true;
} 
```

可能吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T13:13:45.300

您可以订阅[BackgroundWorker.RunWorkerCompleted](http://msdn.microsoft.com/it-it/library/system.componentmodel.backgroundworker.runworkercompleted.aspx)事件以接收有关计算终止的事实的通知。

在其中`testBool(..)`您可以设置全局变量，然后在`RunWorkerCompleted`读取该值的事件处理程序中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-12T12:50:52.607

您可以像这样使用**e.Result**： 第一步：您需要添加事件**RunWorkerCompleted**。

```
 _bw.RunWorkerCompleted += BwRunWorkerCompleted; 
```

并创建函数**BwRunWorkerCompleted**，这将在线程完成后触发。例如：

```
private void BwRunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
        {
            // First, handle the case where an exception was thrown.
            if (e.Error != null)
            {
                MessageBox.Show(e.Error.Message);
            }

           // 
            if (e.Result != null)
            {
                // test if result is true or false <== HERE YOU GO!
                if ((Boolean)e.Result == true)
                {
                    this.Hide();
                    Form fm = new SFGrilla(ref lr, ref binding);
                    fm.ShowDialog();
                    this.Close();
                }
            }
            else
            {
                // hide the progress bar when the long running process finishes
                progressBar.Visible = false;

                // enable button
                btnLogin.Enabled = true;
            }

        } 
```

你的 testbool() 应该有正确的参数：

```
private void testbool(object sender, DoWorkEventArgs doWorkEventArgs) {
      success = true;
      doWorkEventArgs.Result = success;
} 
```

希望能帮助到你。

# c# - 如何自动关闭excel窗口？

> ID：16147942
> 
> 赞同：0
> 
> 时间：2013-04-22T13:09:51.287
> 
> 标签：c#, cell, worksheet, excel

我想使用 C# 打开和更改 excel 中的单元格

它可以工作，但是如果我保存文档，我会从 excel 中获得一个窗口 -.- 并且每次我都必须单击该按钮。看图片。

这是我的代码：

```
foreach (string file in Directory.GetFiles(path))
                         {
                             MSExcel.Workbook book1 = null;
                             MSExcel.Worksheet sheet1;
                             MSExcel.Range range_A1;

                             try
                             {
                                 book1 = app.Workbooks.Open(file);
                                 sheet1 = (MSExcel.Worksheet)book1.Worksheets[1];
                                 range_A1 = sheet1.GetRange(cell);

                                 string content = range_A1.Value2.ToString();

                                 if (content == value || content == value2)
                                 {

                                     range_A1.Value2 = string.Empty;
                                     book1.Save(); // here i save the value
                                     Console.WriteLine(count +" - OPEN AND CHANGE - " + file + " SAVE");
                                 }
                                 else
                                 {

                                     Console.WriteLine(count + " - OPEN - " + file + " NOT SAVE");
                                 }

                                 count++;
                             }
                             catch (Exception)
                             {
                                 count++;
                                 Console.WriteLine(count + " - ERROR FILE " + file);
                                 liste.Add(file); 
                             }
                             finally
                             {
                                 book1.Close(false);

                             }

                         } 
```

![在此处输入图像描述](https://i.stack.imgur.com/MnWZd.jpg)

我怎样才能让它自动化？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T13:14:10.717

你有没有试过这个：

```
app.DisplayAlerts = false; 
```

也许这两个也可以用于额外的隐藏（如果需要）：

```
app.Visible = false;
app.ScreenUpdating = false; 
```

# vb.net - SQL Server 2005：“=”附近的语法错误

> ID：16147956
> 
> 赞同：0
> 
> 时间：2013-04-22T13:10:16.403
> 
> 标签：vb.net, sql-server-2005, vb.net-2010

当我尝试填充我的 datagridview 时，我遇到了这个问题。我定义了一个到 SQL Server 的连接，打开它并定义了一个`SqlCommand`和一个阅读器。

问题是当我尝试使用下面的代码执行阅读器时，它给了我错误

> “=”附近的语法错误

在我试图执行读者的那一行。

```
Dim sqlCommand1 As New SqlCommand("SELECT conItemName, conItemNumber, conClassName " & _
                                       "FROM Constant" & _
                                       "WHERE (Constant.conClassName = 'BoreholeType')", SesConn)
Dim tReader1 As SqlDataReader = sqlCommand1.ExecuteReader 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T13:24:44.640

```
"FROM Constant" & _ 
```

应该

```
"FROM Constant " & _ 
```

否则，您将缺少导致语法错误的空格

```
... FROM ConstantWHERE (Constant.conClassName = 'BoreholeType') 
```

# java - JTable：向 JPanel 添加一个，但它不显示自身

> ID：16147957
> 
> 赞同：1
> 
> 时间：2013-04-22T13:10:24.687
> 
> 标签：java, swing, jscrollpane, grouplayout, preferredsize

我现在是星期一早上，这意味着我是时候在 Java Swing 上失败了！但说真的，我无法弄清楚为什么我的动态创建的 JTable 在添加到 JFrame 上的 JPanel 后拒绝显示自己，并且非常感谢在隔离这个麻烦问题方面提供的任何帮助。正如您从代码中看到的那样，我调用了十几种不同的方法，但似乎无法找到正确的方法来显示它......也许我错过了一个？

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package energizingemerald;

import javax.swing.*;
import java.awt.Dimension;
/**
 *
 * @author Ryan
 */
public class SectionManagerFrame extends javax.swing.JFrame {

    /**
     * Creates new form SectionManagerFrame
     */
    public SectionManagerFrame() {
        initComponents();

    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">                          
    private void initComponents() {

        jButton_Cancel = new javax.swing.JButton();
        jButton_OK = new javax.swing.JButton();
        jLabel_Title = new javax.swing.JLabel();
        jLabel_Description = new javax.swing.JLabel();
        jTextField_Title = new javax.swing.JTextField();
        jScrollPane2 = new javax.swing.JScrollPane();
        jTextArea_Description = new javax.swing.JTextArea();
        jButton_Remove = new javax.swing.JButton();
        jButton_Add = new javax.swing.JButton();
        jButton_Edit = new javax.swing.JButton();
        jPanel_Grid = new javax.swing.JPanel();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
        addWindowListener(new java.awt.event.WindowAdapter() {
            public void windowOpened(java.awt.event.WindowEvent evt) {
                formWindowOpened(evt);
            }
        });

        jButton_Cancel.setText("Cancel");
        jButton_Cancel.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                jButton_CancelMouseClicked(evt);
            }
        });

        jButton_OK.setText("OK");
        jButton_OK.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                jButton_OKMouseClicked(evt);
            }
        });

        jLabel_Title.setText("Review Title:");

        jLabel_Description.setText("Review Description:");

        jTextArea_Description.setColumns(20);
        jTextArea_Description.setRows(5);
        jScrollPane2.setViewportView(jTextArea_Description);

        jButton_Remove.setText("Remove");

        jButton_Add.setText("Add");

        jButton_Edit.setText("Edit");

        javax.swing.GroupLayout jPanel_GridLayout = new javax.swing.GroupLayout(jPanel_Grid);
        jPanel_Grid.setLayout(jPanel_GridLayout);
        jPanel_GridLayout.setHorizontalGroup(
            jPanel_GridLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 0, Short.MAX_VALUE)
        );
        jPanel_GridLayout.setVerticalGroup(
            jPanel_GridLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 268, Short.MAX_VALUE)
        );

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(layout.createSequentialGroup()
                        .addGap(122, 122, 122)
                        .addComponent(jButton_Cancel)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(jButton_OK)
                        .addGap(0, 0, Short.MAX_VALUE))
                    .addGroup(layout.createSequentialGroup()
                        .addContainerGap()
                        .addComponent(jPanel_Grid, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                        .addGap(18, 18, 18)
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                            .addComponent(jButton_Remove, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addComponent(jButton_Add, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addComponent(jButton_Edit, javax.swing.GroupLayout.PREFERRED_SIZE, 71, javax.swing.GroupLayout.PREFERRED_SIZE)))
                    .addGroup(layout.createSequentialGroup()
                        .addContainerGap()
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(jLabel_Description)
                            .addComponent(jLabel_Title))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(jTextField_Title))
                    .addGroup(layout.createSequentialGroup()
                        .addContainerGap()
                        .addComponent(jScrollPane2, javax.swing.GroupLayout.DEFAULT_SIZE, 587, Short.MAX_VALUE)))
                .addContainerGap())
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel_Title)
                    .addComponent(jTextField_Title, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jLabel_Description)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jScrollPane2, javax.swing.GroupLayout.DEFAULT_SIZE, 196, Short.MAX_VALUE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(layout.createSequentialGroup()
                        .addComponent(jButton_Add)
                        .addGap(3, 3, 3)
                        .addComponent(jButton_Edit)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(jButton_Remove))
                    .addComponent(jPanel_Grid, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(18, 18, 18)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jButton_Cancel)
                    .addComponent(jButton_OK))
                .addContainerGap())
        );

        pack();
    }// </editor-fold>                        

    private void jButton_CancelMouseClicked(java.awt.event.MouseEvent evt) {                                            
        // TODO add your handling code here:
        this.setVisible(false);
        this.dispose();
    }                                           

    private void jButton_OKMouseClicked(java.awt.event.MouseEvent evt) {                                        
        // TODO add your handling code here:
    }                                       

    private void formWindowOpened(java.awt.event.WindowEvent evt) {                                  
        // TODO add your handling code here:
        //ManagerDataModel newManagerDataModel = new ManagerDataModel();
        /*
        newManagerDataModel.AddColumn("Section Name");
        newManagerDataModel.AddColumn("Section Type");
        newManagerDataModel.AddColumn("# of Particles");
        newManagerDataModel.AddRow(new String[]{"Test","Test","Test"});
        */
        jTable_Sections = new JTable(5, 5);
        //jTable_Sections.setPreferredScrollableViewportSize(new Dimension(500, 500));
        jTable_Sections.setMinimumSize(new Dimension(200, 200));
        jTable_Sections.setFillsViewportHeight(true);
        jScrollPane_Sections = new JScrollPane(jTable_Sections);
        jScrollPane_Sections.setMinimumSize(new Dimension(200, 200));
        jPanel_Grid.add(jTable_Sections);
        jPanel_Grid.add(jScrollPane_Sections);
        jPanel_Grid.validate();
        jPanel_Grid.repaint();
        this.validate();
        this.pack();
        this.repaint();

    }                                 
    private JTable jTable_Sections;
    private JScrollPane jScrollPane_Sections;
    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        /* Set the Nimbus look and feel */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
         * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(SectionManagerFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(SectionManagerFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(SectionManagerFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(SectionManagerFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>

        /* Create and display the form */
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                new SectionManagerFrame().setVisible(true);
            }
        });
    }
    // Variables declaration - do not modify                     
    private javax.swing.JButton jButton_Add;
    private javax.swing.JButton jButton_Cancel;
    private javax.swing.JButton jButton_Edit;
    private javax.swing.JButton jButton_OK;
    private javax.swing.JButton jButton_Remove;
    private javax.swing.JLabel jLabel_Description;
    private javax.swing.JLabel jLabel_Title;
    private javax.swing.JPanel jPanel_Grid;
    private javax.swing.JScrollPane jScrollPane2;
    private javax.swing.JTextArea jTextArea_Description;
    private javax.swing.JTextField jTextField_Title;
    // End of variables declaration                   
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T13:25:57.310

不是 GroupLayout 的粉丝，但很容易解决这个问题

*   不要`private void formWindowOpened(java.awt.event.WindowEvent evt) {`用于将 JComponents 添加到已经可见的容器中，因为调整大小和使用 Swing GUI 闪烁导致

*   对于 GroupLayout 必须在两个方向上都覆盖 Min、Max 和 PreferredSize，否则会被忽略（默认情况下，请参阅生成的代码）

*   JPanel 在 API 中实现了 FlowLayout，然后包裹在 JScollPane 中的 JTable 在 GroupLayout 中丢失（肯定有解决方案）可能与 setMin、Max 和 PreferredSize 有问题

所需代码（不要用我的下一点解决问题）

```
private void formWindowOpened(java.awt.event.WindowEvent evt) {
    jTable_Sections = new JTable(5, 5);
    jTable_Sections.setFillsViewportHeight(true);
    jScrollPane_Sections = new JScrollPane(jTable_Sections);
    jPanel_Grid.setLayout(new BorderLayout());
    jPanel_Grid.add(jScrollPane_Sections);
    this.validate();
    this.repaint();
    this.pack();
} 
```

*   如果所有代码都由您自己编写，则此代码可能约为 50-70 行代码

# ios - ABRecordRef 检查记录是否仅限 Facebook？

> ID：16147962
> 
> 赞同：2
> 
> 时间：2013-04-22T13:10:31.233
> 
> 标签：ios, abrecord

在遍历所有通讯录联系人时，是否有办法查看记录是否为 Facebook 专用记录？那是在 iOS 设置中添加 Facebook 时插入的地址簿记录。

我试图跳过这些记录，只查看用户输入或从其他来源同步的记录。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-03T09:34:30.103

使用此 snipplet，您可以检测 Facebook 联系人：

```
+ (BOOL)isPersonFacebookContact:(ABRecordRef)person {
    ABMultiValueRef instantMessage = ABRecordCopyValue(person, kABPersonInstantMessageProperty);

    BOOL returnValue = NO;

    if (instantMessage) {
        for (NSInteger i=0 ; i < ABMultiValueGetCount(instantMessage); i++) {
            CFDictionaryRef instantMessageValue = ABMultiValueCopyValueAtIndex(instantMessage, i);
            CFStringRef instantMessageString = CFDictionaryGetValue(instantMessageValue, kABPersonInstantMessageServiceKey);

            if (CFStringCompare(instantMessageString, kABPersonInstantMessageServiceFacebook, 0) == kCFCompareEqualTo) {
                returnValue = YES;
            }

            CFRelease(instantMessageString);
            CFRelease(instantMessageValue);
        }
    }

    CFRelease(instantMessage);

    return returnValue;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T03:07:43.140

每条`ABPerson`记录都属于一个`ABSource`。

当您遍历所有人员记录时，请调用`ABPersonCopySource(person)`每个记录。Facebook 记录都应该与特定的源记录相关联。我不确定如何识别它：`kABSourceNameProperty`该源记录的可能包含“Facebook”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-03T23:28:05.153

这似乎对我有用，它不能直接检测到 facebook，但您可以进一步评估来源，是否有一个链接的社交资料是 facebook，以及一个链接到 facebook 联系人的联系人，那么你会很确定那是它的 facebook。我用它来只获取我可以回信的联系人。用户可以更改他们的默认联系人创建帐户，但根据我的测试 Facebook 只有联系人源永远不会匹配 ABAddressBookCopyDefaultSource。

```
CFArrayRef people = ABAddressBookCopyArrayOfAllPeopleInSource(ab , kABSourceTypeLocal);
AllContacts = CFArrayCreateMutableCopy(kCFAllocatorDefault, CFArrayGetCount(people), people);

// Remove all the contacts that we cant write back to
for (int i = CFArrayGetCount(AllContacts)-1; i >-1  ; i--)
{
    ABRecordRef person = CFArrayGetValueAtIndex(AllContacts, i );
    if((ABPersonCopySource(person) !=ABAddressBookCopyDefaultSource(ab)))
    {
        NSString *fName = (NSString *)CFBridgingRelease(ABRecordCopyValue(person, kABPersonFirstNameProperty));
        NSString *lName = (NSString *)CFBridgingRelease(ABRecordCopyValue(person, kABPersonLastNameProperty));

        DLog(@"Removed a read only contact %@ %@", fName , lName);
        CFArrayRemoveValueAtIndex(AllContacts, i);
    }// else its not something you can write back to, like facebook, twitter.
    CFRelease(person);

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-30T10:43:04.727

> 新版本（没有记忆舔）：

```
+ (BOOL)isPersonFacebookContact:(ABRecordRef)person {
    ABMultiValueRef instantMessage = ABRecordCopyValue(person, kABPersonInstantMessageProperty);

    BOOL returnValue = NO;

    if (instantMessage) {
        for (NSInteger i = 0; i < ABMultiValueGetCount(instantMessage); i++) {
            CFDictionaryRef instantMessageValue = ABMultiValueCopyValueAtIndex(instantMessage, i);
            CFStringRef instantMessageString = CFDictionaryGetValue(instantMessageValue, kABPersonInstantMessageServiceKey);

            if (instantMessageString) {
                if (CFStringCompare(instantMessageString, kABPersonInstantMessageServiceFacebook, 0) == kCFCompareEqualTo) {
                    returnValue = YES;
                }
            }
            CFRelease(instantMessageValue);
        }

        CFRelease(instantMessage);
    }

    return returnValue; } 
```

# c# - 合并单元格的 GridView

> ID：16147963
> 
> 赞同：16
> 
> 时间：2013-04-22T13:10:32.140
> 
> 标签：c#, asp.net, gridview, sqldatasource

我需要在网格视图中显示数据，并为某些列合并行。请帮助我准备以下定义格式的网格视图： ![在此处输入图像描述](https://i.stack.imgur.com/aG2mS.png)

来自数据库的原始数据格式如下： ![在此处输入图像描述](https://i.stack.imgur.com/WknGT.png)

请帮助我找到动态有效地完成这项任务的最佳方法。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-22T13:13:28.227

您将不得不使用`RowSpan`.

**请参考以下代码：**

```
protected void GridView1_DataBound1(object sender, EventArgs e)
{
  for (int rowIndex = GridView1.Rows.Count - 2;
                                     rowIndex >= 0; rowIndex--)
  {
    GridViewRow gvRow = GridView1.Rows[rowIndex];
    GridViewRow gvPreviousRow = GridView1.Rows[rowIndex + 1];
    for (int cellCount = 0; cellCount < gvRow.Cells.Count;
                                                  cellCount++)
    {
     if (gvRow.Cells[cellCount].Text ==
                            gvPreviousRow.Cells[cellCount].Text)
     {
       if (gvPreviousRow.Cells[cellCount].RowSpan < 2)
       {
         gvRow.Cells[cellCount].RowSpan = 2;
       }
       else
       {
        gvRow.Cells[cellCount].RowSpan =
            gvPreviousRow.Cells[cellCount].RowSpan + 1;
       }
       gvPreviousRow.Cells[cellCount].Visible = false;
    }
   }
} 
```

**参考：**

[https://sites.google.com/site/learning6329/asp-net/gridview-merge-cells](https://sites.google.com/site/learning6329/asp-net/gridview-merge-cells)

**有问题的图片示例：**

[http://marss.co.ua/MergingCellsInGridView.aspx](http://marss.co.ua/MergingCellsInGridView.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-30T17:03:08.943

合并第一列的行单元格的最简单方法如下。请注意，For 循环总是要反向迭代。

```
protected void GridView1_DataBound(object sender, EventArgs e)
    {
        int RowSpan = 2;
        for (int i = GridView1.Rows.Count-2; i >=0 ;i-- )
        {
            GridViewRow currRow = GridView1.Rows[i];
            GridViewRow prevRow = GridView1.Rows[i+1];
            if (currRow.Cells[0].Text == prevRow.Cells[0].Text)
            {
                currRow.Cells[0].RowSpan = RowSpan;
                prevRow.Cells[0].Visible = false;
                RowSpan += 1;
            }
            else
                RowSpan = 2;
        }
    } 
```

如果你想类似地合并所有列的行单元格，你可以在上面写的外部forloop中使用另一个“forloop”

# java - 强制调用父类中的特定构造函数

> ID：16147967
> 
> 赞同：1
> 
> 时间：2013-04-22T13:10:35.490
> 
> 标签：java, inheritance, constructor, overloading

我第一次面对以下情况：

我有[以下java类](http://nathanmarz.github.io/storm/doc/backtype/storm/tuple/Values.html)：

```
public class Values extends ArrayList<Object>{
    public Values() {

    }

    public Values(Object... vals) {
        super(vals.length);
        for(Object o: vals) {
            add(o);
        }
    }
} 
```

我想调用[以下父级的构造函数](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html#ArrayList%28int%29)：

```
public ArrayList(int initialCapacity) {
    super();
    if (initialCapacity < 0)
        throw new IllegalArgumentException("Illegal Capacity: "+
                                           initialCapacity);
    this.elementData = new Object[initialCapacity];
} 
```

这可能吗 ？我正在发送一个，`int`但它被 Values 的构造函数捕获。

**编辑**

我最后想做的是：

```
Map<String,Object> document = getDocument();
List<String> indexFields = getIndexFields();
Values values = new Values(indexFields.size());
for (String field : indexFields) {
    values.add(document.get(field));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T13:16:56.460

如果你想调用`new Values(initialCapacity)`where `initialCapacity`is an `int`，那么你应该在`Values`类中有这样一个构造函数：

```
public Values(int initialCapacity) {
    super(initialCapacity);
} 
```

请注意，扩展集合类通常不是一个好主意。使用它们（委托、组合）而不是扩展它们。

# android - 动态地将值添加到 Android 资源（例如 string.xml）？

> ID：16147971
> 
> 赞同：1
> 
> 时间：2013-04-22T13:10:39.400
> 
> 标签：android

是否可以将动态（在运行时）值添加到 android 资源文件？例如向 string.xml 添加新字符串或向现有字符串数组添加新项目。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-22T13:11:28.067

不，不可能动态地将值添加到资源的任何部分。

生成 apk 时，所有资源都会编译成只读二进制文件，您不能向其中添加额外数据。您必须使用内部或外部存储来存储此类数据。

# java - Java-Reflection-Spring如何识别参数是用户定义的对象还是原始类型

> ID：16147977
> 
> 赞同：0
> 
> 时间：2013-04-22T13:10:47.023
> 
> 标签：java, spring, spring-mvc, reflection

我能够使用反射找到该方法采用的所有方法和参数，以下是我的做法：

```
HexgenClassUtils hexgenClassUtils = new HexgenClassUtils();
        Class cls;

        try {
            List classNames = hexgenClassUtils.findMyTypes("com.hexgen.*");
            Iterator<Class> it = classNames.iterator();
            while(it.hasNext())
            {

                Class obj = it.next(); 
                System.out.println("Methods available in : "+obj.getName());
                System.out.println("===================================");
                //if(obj.getName().equals("com.hexgen.api.facade.HexgenWebAPI")){
                    cls = Class.forName(obj.getName());
                    Method[] method = cls.getDeclaredMethods();
                    int i=1;

                    for (Method method2 : method) {
                        PreAuthorize preAuthorizeAnnotation = method2.getAnnotation(PreAuthorize.class);
                        if(preAuthorizeAnnotation !=null){
                            System.out.println(+i+":Method Name : "+method2.getName());
                            RequestMapping methodRequestMappingAnnotation = method2.getAnnotation(RequestMapping.class);
                            //RequestMethod[] methods = methodRequestMappingAnnotation.method(); // to get the request method type
                            mappingValues = methodRequestMappingAnnotation.value(); // to get the url value
                            System.out.println("URL Value : "+mappingValues[0]);
                            Class[] parameterTypes = method2.getParameterTypes();
                            for (Class class1 : parameterTypes) {
                                System.out.println("Parameter Type : "+class1.getName());
                            }
                            i++;
                        }

                    }
                //}

            }

        } catch (Exception ex) {
            ex.printStackTrace();
        } 
```

这是我使用的实用程序类：

```
package com.hexgen.tools;

import java.io.IOException;
import java.util.ArrayList;
import java.util.List;

import org.springframework.core.io.Resource;
import org.springframework.core.io.support.PathMatchingResourcePatternResolver;
import org.springframework.core.io.support.ResourcePatternResolver;
import org.springframework.core.type.classreading.CachingMetadataReaderFactory;
import org.springframework.core.type.classreading.MetadataReader;
import org.springframework.core.type.classreading.MetadataReaderFactory;
import org.springframework.stereotype.Controller;
import org.springframework.util.ClassUtils;
import org.springframework.util.SystemPropertyUtils;

public class HexgenClassUtils {
    @SuppressWarnings({ "rawtypes"})
    public List<Class> findMyTypes(String basePackage) throws IOException, ClassNotFoundException
    {
        ResourcePatternResolver resourcePatternResolver = new PathMatchingResourcePatternResolver();
        MetadataReaderFactory metadataReaderFactory = new CachingMetadataReaderFactory(resourcePatternResolver);

        List<Class> candidates = new ArrayList<Class>();
        String packageSearchPath = ResourcePatternResolver.CLASSPATH_ALL_URL_PREFIX +
                                   resolveBasePackage(basePackage) + "/" + "**/*.class";
        Resource[] resources = resourcePatternResolver.getResources(packageSearchPath);
        for (Resource resource : resources) {
            if (resource.isReadable()) {
                MetadataReader metadataReader = metadataReaderFactory.getMetadataReader(resource);
                if (isCandidate(metadataReader)) {
                    candidates.add(Class.forName(metadataReader.getClassMetadata().getClassName()));
                }
            }
        }
        return candidates;
    }
    public String resolveBasePackage(String basePackage) {
        return ClassUtils.convertClassNameToResourcePath(SystemPropertyUtils.resolvePlaceholders(basePackage));
    }

    @SuppressWarnings({ "rawtypes", "unchecked" })
    public boolean isCandidate(MetadataReader metadataReader) throws ClassNotFoundException
    {
        try {
            Class c = Class.forName(metadataReader.getClassMetadata().getClassName());
            if (!c.isInterface() && c.getAnnotation(Controller.class) != null) {
                return true;
            }
        }
        catch(Throwable e){
        }
        return false;
    }

} 
```

输出是：

```
Methods available in : com.hexgen.api.facade.HexgenWebAPI
===================================
1:Method Name : createRequisition
URL Value : /trade/createrequisition
Parameter Type : [Lcom.hexgen.ro.request.CreateRequisitionRO;
Parameter Type : boolean
2:Method Name : createOrder
URL Value : /trade/createorder
Parameter Type : com.hexgen.ro.request.CreateOrderRO
Parameter Type : boolean
3:Method Name : RetrieveReportFields
URL Value : /reports/fields
Parameter Type : java.math.BigDecimal
4:Method Name : generateURL
URL Value : /reports/generateurl
Parameter Type : com.hexgen.ro.request.GenerateURLRO 
```

例如 ：

参数类型：[Lcom.hexgen.ro.request.CreateRequisitionRO; 参数类型：布尔值

```
first one is user defined array of object and the second one is Primitive type 
```

如何通过反射识别这一点以及如何找到参数是否为对象数组。

请说清楚。

此致

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T13:34:03.710

您可以使用`isArray()`检查参数类型是否为数组。

在您的代码中，它将是`class1.isArray()`

除了原语，一切都是对象。

我不知道直截了当的方法，但您可以检查是否与所有原语`class1.getComponentType()`不匹配，那么您有一个对象。`Integer.TYPE, Double.TYPE, Boolean.TYPE, etc.`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T14:30:14.190

[`Class#isPrimitive()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#isPrimitive%28%29)一定是你要找的。

# javascript - javascript / jquery计算当前行中选中复选框的数量

> ID：16147982
> 
> 赞同：0
> 
> 时间：2013-04-22T13:11:00.220
> 
> 标签：javascript, jquery, checkbox, count, checked

我有下表行：

```
<table class="authors-list">
      <tr>
         <td style="font-size:10px;"><a class="deleteRow"> <img src="delete2.png" /></a></td>
         <td ><input type="text" id="product1" name="product1" class="rounded"/></td>
         <td ><input type="text" size='5' id="qty1" name="qty1" class="rounded"/></td> 
         <td class="tdcheckbox"><input type="checkbox"  id="h09_1" name="h09_1" class="rounded"/></td> 
         <td class="tdcheckbox"><input type="checkbox"  id="h12_1" name="h12_1" class="rounded"/></td> 
         <td class="tdcheckbox"><input type="checkbox"  id="h15_1" name="h15_1" class="rounded"/></td> 
         <td class="tdcheckbox"><input type="checkbox"  id="h18_1" name="h18_1" class="rounded"/></td> 
         <td class="tdcheckbox"><input type="checkbox"  id="h21_1" name="h21_1" class="rounded"/></td> 
         <td class="tdcheckbox"><input type="checkbox"  id="h24_1" name="h24_1" class="rounded"/></td> 
         <td class="tdcheckbox"><input type="checkbox"  id="h27_1" name="h27_1" class="rounded"/></td> 
         <td class="tdcheckbox"><input type="checkbox"  id="h30_1" name="h30_1" class="rounded"/></td> 
         <td><input type="hidden" name="checkedsizes_1" id="checkedsizes_1" value="0"></td>
      </tr>
</table> 
```

我想要做的是计算每行上选中复选框的数量。保持我可以拥有动态行数。这不一定是实时的，在提交之前，隐藏字段`checkedsizes_1`需要设置为该行的选中复选框的数量。

可能有 5 行，因此它需要遍历每个表行（1,2,3...）并计算选中的复选框，然后`checkedsizes_X`用结果填充相应的输入。

所以我的提交是：

```
<INPUT TYPE="button" VALUE="Continue" onClick="submitFunction()"> 
```

调用的函数是：

```
<SCRIPT>
function submitFunction() {
   document.sales_order_details.action="/sales/new_autospread_range";
</SCRIPT> 
```

所以我设想这样的事情：

```
<SCRIPT>

function submitFunction() {
   countcheckboxperrow();
   document.sales_order_details.action="/sales/new_autospread_range";
</SCRIPT>

    <script>
        countcheckboxperrow(){;
        var checkboxes=0;
        //foreach table row in table class="authors-list" count the checkedcheckboxes starting with h. [id^="h"] h being field name first letter      
        //set the corresponsing input in that field row that starts with 
        //repeat for next row id^="checkedsizes"]       
    </script> 
```

提前感谢您的帮助，如果我需要澄清，请告诉我。总之，需要一个脚本来计算该行中选中复选框的数量并使用该值填充隐藏的 ffield。

再次感谢。

**小提琴** [http://jsfiddle.net/emL6x/2/](http://jsfiddle.net/emL6x/2/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T13:22:03.407

我还没有测试过，但是用 jQuery 来做这样的事情应该可以做到

```
countChecks(){
     $('.author-list tr').each(function(){
         var count = 0;
         var hdn = $(this).find('input[name^="checkedsizes"]');
         count = $(this).find(':checkbox:checked').length;
         hdn.val(count);
     });
} 
```

# cordova - Windows Phone phonegap/cordova localstorage 不保存数据

> ID：16147983
> 
> 赞同：0
> 
> 时间：2013-04-22T13:11:02.213
> 
> 标签：cordova, local-storage, windows-phone

我在 phonegap 中的 localStorage 有问题。localStorage 中有两种表示法：

1\. localStorage.setItem["key", "value"]/localStorage.getItem["key"] （不适合我）
2\. localStorage.key（工作正常，但不保存数据，重新启动应用程序后）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T13:42:20.067

你在使用方括号吗？您正在设置一个数组而不是调用一个函数。

尝试这个：

```
localStorage.setItem("key", "value");

//get the value
localStorage.getItem("key"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T13:27:38.940

我**个人的建议**是不要使用本地存储。从长远来看，它不好，因为它几乎已被弃用，并且存储大小有限制。

使用插件并调整 SQLITE 数据库或任何对存储大小没有限制的东西。

# ios - UITextField的leftView移位

> ID：16147984
> 
> 赞同：4
> 
> 时间：2013-04-22T13:11:06.033
> 
> 标签：ios, objective-c, uikit, uitextfield

我尝试自定义我的`UITextField`对象![在此处输入图像描述](https://i.stack.imgur.com/riRI8.png)

但`leftView`它向右移动了一些像素

![在此处输入图像描述](https://i.stack.imgur.com/q76iR.png)

我怎样才能改变我的位置`UITextField.leftView`

这是我的代码

```
NSArray *itemArray = @[@"<", @">"];
UISegmentedControl *segmentedControl = [[UISegmentedControl alloc] initWithItems:itemArray];
segmentedControl.frame = CGRectMake(0, 0, 60, 26);
segmentedControl.segmentedControlStyle = UISegmentedControlStylePlain;

_urlTextField.leftView = segmentedControl;
_urlTextField.leftViewMode = UITextFieldViewModeAlways; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T13:30:25.530

UITextField 不提供类似`frame`for的属性`leftView`；它只有一个像 bounds 这样的属性，使它像导航控制器栏按钮项目的位置；我们不能改变`leftView`立场。[请参阅此处以供参考。](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITextField_Class/Reference/UITextField.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T13:31:10.533

尝试这个 ...

```
NSArray *itemArray = @[@"<", @">"];
    UISegmentedControl *segmentedControl = [[UISegmentedControl alloc] initWithItems:itemArray];
  **segmentedControl.center = CGPointMake(03, 15);**
segmentedControl.segmentedControlStyle = UISegmentedControlStylePlain;

self.textField.leftView = segmentedControl;
self.textField.leftViewMode = UITextFieldViewModeAlways; 
```

还将您的文本字段的边框样式更改为圆形矩形以外的其他样式。

希望这可以帮助

问候， 帕吉 123

# bitmap - 如何使 haxe nme 预加载器渲染具有透明度的位图

> ID：16147987
> 
> 赞同：0
> 
> 时间：2013-04-22T13:11:20.053
> 
> 标签：bitmap, transparency, preloader, haxe, nme

我想在预加载器的背景上显示带有 alpha 通道的图像，用于带有 haxe nme 的闪存目标。当涉及到预加载器时，这种需求似乎很常见。

我找到了几种可能的方法来做到这一点，但其中任何一个都没有运气。由于我创建了一个继承默认 NMEPreloader 的自定义 Preloader 类，因此我所有的跟踪和错误都在这个类中。

**方法 #1 - nme.Assets 方法 - 运行时错误**

我尝试调用`Assets.loadBitmapData("assets/img/miniMoon.png")`Preloader 的构造函数。运行时发生错误：

```
[Fault] exception, information=ArgumentError: Error #2015: Invalid BitmapData. 
```

使用调用堆栈：

```
flash.display::BitmapData/ctor
flash.display::BitmapData
NME_assets_img_minimoon_png1 at H:\MWHx\export\flash\haxe\ApplicationMain.hx:2053
Type$/createInstance at C:\Motion-Tween\haxe\std\flash\_std\Type.hx:136
nme.installer::Assets$/getBitmapData at H:\MWHx\export\flash\haxe\nme\installer\Assets.hx:721
Preloader at H:\MWHx\source\Preloader.hx:55
... 
```

我想知道 nme.Assets 类是否可以在预加载期间使用。

**Method #2 Embed in Flash Way - 不透明渲染**

通过使用嵌入不是 NME 的青睐，我已经尝试过这个：

```
@:bitmap("assets/img/miniMoon.png") class BDmoon extends BitmapData {}
...
var moon:Bitmap;
...
moon = new Bitmap(new BDmoon(32,32,true,0x00000000)); 
```

它只是运行，但显示的图像不透明，所有具有 alpha 0 的像素都在背景下呈现为白色。

作为进一步的测试，我使用`moon.alpha = 0.5;`then I can see through the image。所以这可能是在嵌入 nme 期间丢失 alpha 通道值的问题。

**带有小动画或小游戏的预加载器会很有趣。我希望有一个解决方案。谢谢！**

参考： [NME论坛主题：嵌入透明PNG图像](http://www.nme.io/community/forums/programming-with-haxe/embed-transparent-png-image/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T06:33:54.047

问题是

```
new BDmoon(32,32,true,0x00000000) 
```

最后一个`0x00000000`表示用黑色填充透明区域的颜色。将其更改为

```
new BDmoon(32,32,true) 
```

你可以使用这个`Assets`类。

```
Assets.loadBitmapData("img/miniMoon.png") 
```

`assets`即，从路径中省略文件夹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-06T03:55:27.267

**抱歉，这是我自己的图像文件的问题！**

因为我不知道如何关闭这个愚蠢的问题以获得新的答案。我在这里提出了一个干净的解决方案。

如果你想在预加载器中使用图像，这是我的代码。在 NME 3.5.5 下测试。

```
 @:bitmap("assets/img/miniMoon.png") class BDmoon extends nme.display.BitmapData{}

class MyPreloader extends NMEPreloader 
{
    public var embedBmp:nme.display.Bitmap;
    public var bmpFromAssets:nme.display.Bitmap;

    public function new(){
        super();

        embedBmp = new nme.display.Bitmap(new BDmoon(64, 64, true));
        addChild(embedBmp);

        // Line below cause problem, nme.Assets not ready in preloader
        bmpFromAssets = new nme.display.Bitmap(Assets.getBitmapData("assets/img/miniMoon.png"));
        addChild(bmpFromAssets);
    }

    public override function onLoaded()
    {
        // dispatchEvent (new Event (Event.COMPLETE));
    }
} 
```

*参考：[http ://haxeflixel.com/forum/help/nme-355-preloader-flash-error](http://haxeflixel.com/forum/help/nme-355-preloader-flash-error)*

# java - 如何在服用前检查 BlockingQueue 头元素？

> ID：16147995
> 
> 赞同：1
> 
> 时间：2013-04-22T13:11:43.630
> 
> 标签：java, multithreading, producer-consumer, blockingqueue

我想在拍摄前检查头部元素但
`java.lang.NullPointerException`偷看时抬起，

使用 java BlockingQueue

```
 BlockingQueue sharedQueue = new LinkedBlockingQueue() 
```

这是我的代码，有什么想法吗？

```
while(true){
    try {
        if(!sharedQueue.isEmpty()){
            char  ch = (char)sharedQueue.peek();
            if(Character.isDigit(ch)){
                digitTextField.setText(digitTextField.getText()+sharedQueue.take());
            }
        }
    } catch (InterruptedException ex) {
        Logger.getLogger(Form.class.getName()).log(Level.SEVERE, null, ex);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T13:14:17.997

这是因为您要转换的`char`对象不允许空值。此外，不要`sharedQueue.isEmpty()`紧随其后`peek`- 这就是众所周知的“check-then-act”（检查然后行动）。

您应该定义`sharedQueue`为`BlockingQueue<Character>`然后使用

`if ((Character c = sharedQueue.poll()) != null)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T13:13:26.247

[`peek()`](http://docs.oracle.com/javase/7/docs/api/java/util/Queue.html#peek%28%29)`null`未找到元素时返回：

> 返回：此队列的头部，如果此队列为空，则返回 null

你需要使用：

```
 if(ch != null && Character.isDigit(ch)){ 
```

# java - 使用java程序在hadoop中解析日志文件

> ID：16147999
> 
> 赞同：0
> 
> 时间：2013-04-22T13:11:54.167
> 
> 标签：java, hadoop

我写了一个小地图程序来阅读日志文件并寻找一个叫做“提取”的词。仅当找到该单词时，它才应将该行写入上下文对象。但不知何故，我看到了输出文件中的所有行。这是我的代码

```
 public void map(LongWritable key, Text value, Context context) throws IOException, InterruptedException {
        String line = value.toString();
        StringTokenizer tokenizer = new StringTokenizer(line);
        while (tokenizer.hasMoreTokens()) {
            word.set(tokenizer.nextToken());
            if(word.find("extract") >= -1) {
                context.write(word, null);
            }
        }
    } 
```

你能告诉我我做错了什么吗？谢谢，阿蒂

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T13:28:12.943

如果您想将该行写入上下文；这是代码模板

```
public void map(LongWritable key, Text value, Context context) throws IOException, InterruptedException {

    String line = value.toString();

    if (line.contains("extract")) {
         context.write(value,null);
    }

} 
```