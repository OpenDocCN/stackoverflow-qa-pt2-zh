# StackOverflow 问答 13110000-13110999

# plone - 敏捷中的多值属性

> ID：13110000
> 
> 赞同：2
> 
> 时间：2012-10-28T15:08:42.007
> 
> 标签：plone, dexterity

使用 Dexterity，我可以创建具有电子邮件属性的联系人卡片模型。

```
class IContact(form.Schema):
    email = schema.TextLine(
            title=_(u"Email"),
            description=_(u"Contact email"),
        ) 
```

如何修改此架构以使每个联系人有多个电子邮件？我知道可以将电子邮件添加为嵌套内容类型。因此，我的问题是 Dexterity 是否支持内容类型中的多值属性。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-28T16:20:05.123

当然可以，将电子邮件包装`TextLine`在`schema.List`：

```
schema.List(
        title=u"Email adresses",
        required=False,
        value_type=schema.TextLine(
            title=_(u"Email"),
        )) 
```

# javascript - Web 音频 API：如何播放和停止音频？

> ID：13110007
> 
> 赞同：3
> 
> 时间：2012-10-28T15:09:53.520
> 
> 标签：javascript, html, google-chrome, audio, html5-audio

我在 Chrome 的游戏中使用网络音频 API。为了播放声音，我使用网络音频 API。

我从文章中了解到：http: [//www.html5rocks.com/en/tutorials/webaudio/intro/](http://www.html5rocks.com/en/tutorials/webaudio/intro/)

```
window.onload = init;
var context;
var bufferLoader;

function init() {
context = new webkitAudioContext();

bufferLoader = new BufferLoader(
context,
[
'0.mp3',
'2.mp3',
],
finishedLoading
);

bufferLoader.load();
}

function finishedLoading(bufferList) {

var source1 = context.createBufferSource();
var source2 = context.createBufferSource();
source1.buffer = bufferList[0];
source2.buffer = bufferList[1];

source1.connect(context.destination);
source2.connect(context.destination);
source1.noteOn(0);
source2.noteOn(0);
} 
```

但是，声音没有播放。更不用说我想在以后使用**noteOff(0)**来阻止它们。

然后我发现这篇文章[http://updates.html5rocks.com/2012/02/HTML5-audio-and-the-Web-Audio-API-are-BFFs](http://updates.html5rocks.com/2012/02/HTML5-audio-and-the-Web-Audio-API-are-BFFs)

我将我的代码更改为：

```
 var context = new webkitAudioContext();
    var analyser = context.createAnalyser();
    var source; 
    var audio0 = new Audio();   
    audio0.src = '0.mp3';
    audio0.controls = true;
    audio0.autoplay = true;
    audio0.loop = true;
    source = context.createMediaElementSource(audio0);
    source.connect(analyser);
    analyser.connect(context.destination); 
```

这次玩了！

我的问题来了：我想用一个按钮停止声音。

我试图改变**audio0.autoplay =false;**

```
 var play0 = false;
      $("#0").click(function(){
    if(play0===false){
    audio0.src = '0.mp3';
    audio0.controls = true;
    audio0.autoplay = true;
    audio0.loop = true;
    source = context.createMediaElementSource(audio0);
    source.connect(analyser);
    analyser.connect(context.destination);
    play0=true;}

    if(paly0){
    audio0.autoplay=false;}

    }); 
```

每次单击按钮时都会再次播放，而不是停止。

两个问题：

1.  这两种播放音频的方法有什么区别？

2.  如何手动停止声音？

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-28T15:27:25.363

您可以暂停音频元素并将其时间设置为`0`，以便您有效地拥有“停止”功能：http: [//jsfiddle.net/Z5ZuJ/](http://jsfiddle.net/Z5ZuJ/)。

```
audio0.pause();
audio0.currentTime = 0; 
```

# android-emulator - 无法在从 Corona SDK 构建的 android 模拟器上运行

> ID：13110010
> 
> 赞同：0
> 
> 时间：2012-10-28T15:10:02.070
> 
> 标签：android-emulator, coronasdk

我正在尝试运行一个简单的代码，例如来自 Corona 的 helloworld build。它在 Corona 模拟器和我的手机（HTC Desire HD）上运行良好。但是当我使用 adb 安装到 Android 模拟器并运行它时，无论我使用 SDK 2.3、3.0、4.0、4.1.2，它都会显示错误消息。

屏幕上的消息是

> 不幸的是，HelloWorld 已停止”

我该如何解决这个问题？

有日志：

```
 I/ActivityManager(   79): START {act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10200000 cmp=com.test.hello/com.ansca.corona.CoronaActivity} from pid 512

     W/WindowManager(   79): Failure taking screenshot for (180x300) to layer 21005

     I/WindowManager(   79): createSurface Window{41695d48 Starting com.test.hello paused=false}: DRAW NOW PENDING

     D/dalvikvm(  602): Not late-enabling CheckJNI (already on)

     I/ActivityManager(   79): Start proc com.test.hello for activity com.test.hello/com.ansca.corona.CoronaActivity: pid=602 uid=10040 gids={3003}

     W/NetworkManagementSocketTagger(   79): setKernelCountSet(10040, 1) failed with errno -2

     I/ActivityThread(  602): Pub com.test.hello.files: com.ansca.corona.FileContentProvider

     D/dalvikvm(  602): Trying to load lib /data/data/com.test.hello/lib/liblua.so 0x413436f0

     D/dalvikvm(  602): Added shared lib /data/data/com.test.hello/lib/liblua.so 0x413436f0

     D/dalvikvm(  602): No JNI_OnLoad found in /data/data/com.test.hello/lib/liblua.so 0x413436f0, skipping init

     D/dalvikvm(  602): Trying to load lib /data/data/com.test.hello/lib/libjnlua5.1.so 0x413436f0

     D/dalvikvm(  602): Added shared lib /data/data/com.test.hello/lib/libjnlua5.1.so 0x413436f0

     D/dalvikvm(  602): Trying to load lib /data/data/com.test.hello/lib/libjnlua5.1.so 0x413436f0

     D/dalvikvm(  602): Shared lib '/data/data/com.test.hello/lib/libjnlua5.1.so' already loaded in same CL 0x413436f0

     I/dalvikvm(  602): threadid=1: recursive native library load attempt (/data/data/com.test.hello/lib/libjnlua5.1.so)

     D/dalvikvm(  602): Trying to load lib /data/data/com.test.hello/lib/libopenal.so 0x413436f0

     D/dalvikvm(  602): Added shared lib /data/data/com.test.hello/lib/libopenal.so 0x413436f0

     D/dalvikvm(  602): Trying to load lib /data/data/com.test.hello/lib/libmpg123.so 0x413436f0

     D/dalvikvm(  602): Added shared lib /data/data/com.test.hello/lib/libmpg123.so 0x413436f0

     D/dalvikvm(  602): No JNI_OnLoad found in /data/data/com.test.hello/lib/libmpg123.so 0x413436f0, skipping init

     D/dalvikvm(  602): Trying to load lib /data/data/com.test.hello/lib/libvorbisidec.so 0x413436f0

     D/dalvikvm(  602): Added shared lib /data/data/com.test.hello/lib/libvorbisidec.so 0x413436f0

     D/dalvikvm(  602): No JNI_OnLoad found in /data/data/com.test.hello/lib/libvorbisidec.so 0x413436f0, skipping init

     D/dalvikvm(  602): Trying to load lib /data/data/com.test.hello/lib/libalmixer.so 0x413436f0

     D/dalvikvm(  602): Added shared lib /data/data/com.test.hello/lib/libalmixer.so 0x413436f0

     D/dalvikvm(  602): No JNI_OnLoad found in /data/data/com.test.hello/lib/libalmixer.so 0x413436f0, skipping init

     D/dalvikvm(  602): Trying to load lib /data/data/com.test.hello/lib/libcorona.so 0x413436f0

     D/dalvikvm(  602): Added shared lib /data/data/com.test.hello/lib/libcorona.so 0x413436f0

     I/WindowManager(   79): createSurface Window{41693f10 com.test.hello/com.ansca.corona.CoronaActivity paused=false}: DRAW NOW PENDING

     I/WindowManager(   79): createSurface Window{4150cdb8 SurfaceView paused=false}: DRAW NOW PENDING

     D/libEGL  (  602): Emulator without GPU support detected. Fallback to software renderer.

     D/libEGL  (  602): loaded /system/lib/egl/libGLES_android.so

     W/dalvikvm(  602): threadid=13: thread exiting with uncaught exception (group=0x409961f8)

     E/AndroidRuntime(  602): FATAL EXCEPTION: GLThread 84

     E/AndroidRuntime(  602): java.lang.IllegalArgumentException: No configs match configSpec

     E/AndroidRuntime(  602):   at android.opengl.derived.SwapGLSurfaceView$BaseConfigChooser.chooseConfig(SwapGLSurfaceView.java:500)

     E/AndroidRuntime(  602):   at android.opengl.derived.SwapGLSurfaceView$EglHelper.start(SwapGLSurfaceView.java:658)

     E/AndroidRuntime(  602):   at android.opengl.derived.SwapGLSurfaceView$GLThread.guardedRun(SwapGLSurfaceView.java:884)

     E/AndroidRuntime(  602):   at android.opengl.derived.SwapGLSurfaceView$GLThread.run(SwapGLSurfaceView.java:825)

     D/gralloc_goldfish(  602): Emulator without GPU emulation detected.

     W/ActivityManager(   79):   Force finishing activity com.test.hello/com.ansca.corona.CoronaActivity

     W/WindowManager(   79): Failure taking screenshot for (180x300) to layer 21020

     W/InputManagerService(   79): Starting input on non-focused client com.android.internal.view.IInputMethodClient$Stub$Proxy@415fe078 (uid=10040 pid=602)

     W/InputManagerService(   79): Client not active, ignoring focus gain of: com.android.internal.view.IInputMethodClient$Stub$Proxy@415a8278

     I/WindowManager(   79): createSurface Window{416003c0  paused=false}: DRAW NOW PENDING

     F/libc    (  602): Fatal signal 11 (SIGSEGV) at 0x00000000 (code=1)

     W/NetworkManagementSocketTagger(   79): setKernelCountSet(10040, 0) failed with errno -2

     I/ActivityManager(   79): START {act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10200000 cmp=com.test.hello/com.ansca.corona.CoronaActivity} from pid 512

     W/WindowManager(   79): Failure taking screenshot for (180x300) to layer 21005

     I/WindowManager(   79): createSurface Window{41596490 Starting com.test.hello paused=false}: DRAW NOW PENDING

     W/NetworkManagementSocketTagger(   79): setKernelCountSet(10040, 1) failed with errno -2

     I/DEBUG   (  597): *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** ***

     I/DEBUG   (  597): Build fingerprint: 'generic/sdk/generic:4.0.2/ICS_MR0/229537:eng/test-keys'

     I/DEBUG   (  597): pid: 602, tid: 602  >>> com.test.hello <<<

     I/DEBUG   (  597): signal 11 (SIGSEGV), code 1 (SEGV_MAPERR), fault addr 00000000

     I/DEBUG   (  597):  r0 00000000  r1 47a23e64  r2 00000000  r3 0010d090

     I/DEBUG   (  597):  r4 47a6a498  r5 42a7cca0  r6 47a23e64  r7 42a7cca8

     I/DEBUG   (  597):  r8 beeee638  r9 42a7cca0  10 00012820  fp beeee64c

     I/DEBUG   (  597):  ip 00000000  sp beeee610  lr 4795e718  pc 4795d484  cpsr 80000010

     I/DEBUG   (  597):  d0  0000032044482000  d1  0000000044482000

     I/DEBUG   (  597):  d2  0000000000000000  d3  000000003f000000

     I/DEBUG   (  597):  d4  0000000000000000  d5  0000000000000000

     I/DEBUG   (  597):  d6  7e37e43c8800759c  d7  0000000000000000

     I/DEBUG   (  597):  d8  0000000000000000  d9  0000000000000000

     I/DEBUG   (  597):  d10 0000000000000000  d11 0000000000000000

     I/DEBUG   (  597):  d12 0000000000000000  d13 0000000000000000

     I/DEBUG   (  597):  d14 0000000000000000  d15 0000000000000000

     I/DEBUG   (  597):  scr 60000012

     I/DEBUG   (  597): 

     I/Process (  602): Sending signal. PID: 602 SIG: 9

     I/ActivityManager(   79): Process com.test.hello (pid 602) has died.

     W/ActivityManager(   79): Force removing ActivityRecord{415a79f0 com.test.hello/com.ansca.corona.CoronaActivity}: app died, no saved state

     W/InputDispatcher(   79): channel '41693f10 com.test.hello/com.ansca.corona.CoronaActivity (server)' ~ Consumer closed input channel or an error occurred.  events=0x8

     E/InputDispatcher(   79): channel '41693f10 com.test.hello/com.ansca.corona.CoronaActivity (server)' ~ Channel is unrecoverably broken and will be disposed! 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-23T12:36:57.970

尝试在 android 模拟器上打开 GPU 模拟。我有同样的问题...

# neo4j - 小鬼请求

> ID：13110011
> 
> 赞同：1
> 
> 时间：2012-10-28T15:10:09.600
> 
> 标签：neo4j, gremlin

我如何向 gremlin 请求具有我选择的属性的有限节点列表？

就像是：

```
g.V. 10 nodes with nodeType=="User", return only id, name and email. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T22:18:14.867

为了速度，请执行 filter{it.getProperty('nodeType').equals('User')}...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-05-17T19:25:18.850

使用 TinkerPop 3+，那将是：

```
g.V().hasLabel('user').limit(10).valueMap(true, 'name', 'email') 
```

调用`valueMap(true)`返回遍历的图元素的`id`和`label`。

为了提高性能，现在建议避免使用 lambda 并使用 Gremlin 步骤。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-25T00:10:19.240

如果您使用的是 Tinkerpop 3，并且您正在搜索的“类型”定义为节点标签，那么您可以执行以下操作：

gVhasLabel('User')[0..10].valueMap.select('id','name','e-mail')

另请注意，如果您想要 10 个节点而不是 [0..9]，我认为您需要指定 [0..10]

但是，我完全听从 Marko 对性能的回答，因为他了解内部结构。我只是喜欢 hasLabel() 的干净感觉。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-04T00:03:06.947

```
g.V.filter{it.nodeType=='User'}[0..9].transform(){it.id +  ' ' + it.name + ' ' + it.email} 
```

# http - 当手机屏幕变暗时，Android HTTP POST 无法使用 PARTIAL WAKE LOCK

> ID：13110016
> 
> 赞同：1
> 
> 时间：2012-10-28T15:11:56.113
> 
> 标签：http, android-sensors

我有一个代码，它有一个带有按钮的活动，单击该按钮会启动加速度计服务。
Accelerometer service 用途如图`PARTIAL_WAKE_LOCK`：`onStart()`

```
@Override
public void onStart(Intent intent, int startId) {
 // TODO Auto-generated method stub

 super.onStart(intent, startId);

//Power Manager
PowerManager pm = (PowerManager)getApplicationContext().getSystemService(Context.POWER_SERVICE);

 PowerManager.WakeLock wl = pm.newWakeLock(PowerManager.PARTIAL_WAKE_LOCK, "MY WK");

 wl.acquire();
 //Power Manager

 try{
mInitialized = false;
mSensorManager = (SensorManager) getSystemService(Context.SENSOR_SERVICE);
mAccelerometer = mSensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER);  
mSensorManager.registerListener(this, mAccelerometer,SensorManager.SENSOR_DELAY_NORMAL);
} 
catch(Exception e)
 { 
  Log.e("acc","catch1");
  }
}// end of onStart() 
```

并且在 onSensorChange(Sensor event) 我有使用 HTTP POST 将数据记录到远程服务器的代码，如图所示：

```
synchronized public void onSensorChanged(SensorEvent event) {

          if( event.sensor.getType() == Sensor.TYPE_ACCELEROMETER )
           {

             //-----------------------------sending it to server---------

        ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
                nameValuePairs.add(new BasicNameValuePair("xaxis", xaxis));
                nameValuePairs.add(new BasicNameValuePair("yaxis", yaxis));
                nameValuePairs.add(new BasicNameValuePair("zaxis", zaxis));

           //------------------

    Thread networkThread = new Thread() {
    @Override
       public void run() {

    HttpClient httpclient1 = new DefaultHttpClient();
    HttpPost httppost1 = new HttpPost("http://www.xxxxx.com/filename.php");

       httppost1.setEntity(new UrlEncodedFormEntity(nameValuePairs));
       HttpResponse response1 = httpclient1.execute(httppost1);

    }
    };

    networkThread.start();
    //----------------------------------

  }//and of if

 }//end of onSensorChanged 
```

> 我的问题是：
> 当手机屏幕变暗时，HTTP 停止登录服务器。但是当屏幕
> 亮时，即使键盘被锁定，它也会记录数据。
> 请帮助我，因为我想让该服务在后台运行并将数据记录到服务器，即使
> 屏幕被锁定。
> 因此，它工作正常，直到屏幕变暗之后它不记录任何数据。

```
Does HTTP not work with Partial_WAKE_Lock.

I searched for the answers but could not find any. Hoping to get some help ! 

Thank You 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T10:41:17.177

幸运的是，我在此链接中找到了答案[Android accelerometer not working when screen is closed](https://stackoverflow.com/questions/9982433/android-accelerometer-not-working-when-screen-is-turned-off) 这表示它不是 HTTP 帖子不工作，而是当屏幕关闭时不会生成加速度计值。谢谢

# c# - WebBrowser 对象内容在窗体最小化然后恢复时更改位置

> ID：13110018
> 
> 赞同：1
> 
> 时间：2012-10-28T15:12:15.953
> 
> 标签：c#, winforms, user-interface

我编写了一个 C# 应用程序，它使用 webbrowser 作为其主要内容窗口。该程序将大量文本加载到该浏览器中，效果很好。但是，我在阅读该内容时注意到，如果我最小化应用程序然后将其恢复，则该位置会在文本中向上跳跃，而不是保持在原来的位置。多次执行此操作会将文本置于内容的顶部。

有什么想法可能导致这种情况以及我可以做些什么来阻止这种行为？只有当我最小化/恢复时，如果我 alt-tab 进入另一个应用程序并返回，位置就会被正确保留。

以下是内容截图： 最小化前：http: [//imageshack.us/a/img641/9632/beforeminimize.jpg](http://imageshack.us/a/img641/9632/beforeminimize.jpg) 恢复后：http: [//imageshack.us/a/img827/439/afterrestore.jpg](http://imageshack.us/a/img827/439/afterrestore.jpg)

这是 GitHub 上代码的链接，虽然我没有更改 WebBrowswer 的任何属性，除了它的锚点：[https ://github.com/benroth/FanBook](https://github.com/benroth/FanBook)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T02:53:09.437

我认为您可以尝试以下步骤：

1.  在设计模式下打开 Windows 窗体。
2.  选择 Web 浏览器控制 > 转到 > 属性。
3.  将 [Dock] 属性指定为无。
4.  在后面的代码中，指定 Web 浏览器控件的高度和宽度。

我确实有类似的问题，并按照上述步骤修复。

# android - 使我的应用程序崩溃的android级别列表警告

> ID：13110023
> 
> 赞同：1
> 
> 时间：2012-10-28T15:13:01.933
> 
> 标签：android, android-layout, android-xml

我是 Android 开发新手，我正在阅读“For Dummies Android Application Development. All-in-One For Dummies”一书，我遇到了一个问题。我正在尝试创建一个包含每个级别的图像的级别列表，这是代码：

```
<?xml version="1.0" encoding="utf-8"?>
<level-list xmlns:android="http://schemas.android.com/apk/res/android" >
    <item android:drawable="@drawable/plain" android:maxLevel="0" />
    <item android:drawable="@drawable/pepperoni" android:maxLevel="1" />
    <item android:drawable="@drawable/extracheese" android:maxLevel="2" />
    <item android:drawable="@drawable/pep_extracheese" android:maxLevel="3" />
</level-list> 
```

这是包资源管理器的层次结构：

![在此处输入图像描述](../Images/395604b6b6db3c33c024a429efaa9445.png)

当我尝试添加 imgView 时，activity_main.xml 中没有我收到以下警告：

```
Failed to convert D:\Android\test1\res\drawable\plain.jpg into a drawable
Failed to parse file D:\Android\test1\res\drawable\levels.xml
Exception details are logged in Window > Show View > Error Log 
```

这是activity_main.xml中的代码：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <include
        android:id="@+id/include1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        layout="@layout/new_layout" />

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/include1"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="154dp"
        android:src="@drawable/levels" />

</RelativeLayout> 
```

这是logCat：

```
?:??: W/?(?): --------- beginning of /dev/log/system
10-28 17:14:22.095: D/AlarmManager(427): Added alarm Alarm{428747c8 type 2 com.ebay.mobile} type:ELAPSED_REALTIME_WAKEUP when: After 0h:0m:59.0s repeatInterval: 0h:1m:0.0s
10-28 17:14:22.105: D/AlarmManager(427): Triggered Alarm 428747c8 ELAPSED_REALTIME_WAKEUP IntentSender{428a1278: PendingIntentRecord{42aa6270 com.ebay.mobile broadcastIntent}}
10-28 17:14:22.185: I/ActivityManager(427): No longer want com.asus.keyboard (pid 6303): hidden #16
10-28 17:14:22.195: W/ActivityManager(427): Scheduling restart of crashed service com.asus.keyboard/.KeyboardService in 5000ms
10-28 17:14:27.235: I/ActivityManager(427): Start proc com.asus.keyboard for service com.asus.keyboard/.KeyboardService: pid=6690 uid=1000 gids={3003, 1015, 1028, 3002, 3001, 1006, 3007}
10-28 17:14:27.235: I/ActivityManager(427): --------- beginning of /dev/log/main
10-28 17:14:27.275: E/(6690): fail to touchpad on
10-28 17:15:22.095: D/AlarmManager(427): Added alarm Alarm{428747c8 type 2 com.ebay.mobile} type:ELAPSED_REALTIME_WAKEUP when: After 0h:0m:59.0s repeatInterval: 0h:1m:0.0s
10-28 17:15:22.095: D/AlarmManager(427): Triggered Alarm 428747c8 ELAPSED_REALTIME_WAKEUP IntentSender{429003e0: PendingIntentRecord{42aa6270 com.ebay.mobile broadcastIntent}}
10-28 17:15:47.025: D/PowerSaving(5075): onReceived
10-28 17:15:47.025: D/PowerSaving(5075): power_unplugged
10-28 17:15:47.025: D/PowerSaving(5075): back light = 167
10-28 17:15:47.025: D/PowerSaving(5075): back light = 167 , back light = 108.549995
10-28 17:15:47.055: I/fdhttpd(6378): battery level:96 plugged:0
10-28 17:15:47.055: D/LowBatteryService(6466): onReceive:Intent { act=android.intent.action.BATTERY_CHANGED flg=0x60000010 (has extras) }
10-28 17:15:47.055: D/LowBatteryService(6466): mAcOnline = false, mDeviceBatteryLevel = 96, mDockBatteryLevel = 0, mDockBatteryStatus = 0
10-28 17:15:47.055: D/LowBatteryService(6466): Battery level is higher than threshold, no need to apply
10-28 17:15:47.055: D/LowBatteryService(6466): Battery level is good, no need to apply low battery config.
10-28 17:15:47.065: D/DockManagerService(6466): mLastAcOnline:false mAcOnline:false
10-28 17:16:20.855: W/ThrottleService(427): unable to find stats for iface rmnet0
10-28 17:16:21.785: D/AlarmManager(427): Triggered Alarm 42986988 ELAPSED_REALTIME_WAKEUP IntentSender{4279aca8: PendingIntentRecord{429da220 com.android.email startService}}
10-28 17:16:21.825: I/Email(32306): ReconcilePopImapAccountsSync: start
10-28 17:16:21.835: D/AlarmManager(427): Added alarm Alarm{42c68558 type 2 com.android.email} type:ELAPSED_REALTIME_WAKEUP when: After 0h:9m:59.0s
10-28 17:16:21.855: D/AlarmManager(427): Removed alarm Alarm{42c68558 type 2 com.android.email} type:ELAPSED_REALTIME_WAKEUP
10-28 17:16:21.855: D/AlarmManager(427): Added alarm Alarm{42af10d8 type 2 com.android.email} type:ELAPSED_REALTIME_WAKEUP when: After 0h:14m:59.0s
10-28 17:16:21.875: I/Email(32306): ReconcilePopImapAccountsSync: done
10-28 17:16:22.095: D/AlarmManager(427): Added alarm Alarm{428747c8 type 2 com.ebay.mobile} type:ELAPSED_REALTIME_WAKEUP when: After 0h:0m:59.0s repeatInterval: 0h:1m:0.0s
10-28 17:16:22.095: D/AlarmManager(427): Triggered Alarm 428747c8 ELAPSED_REALTIME_WAKEUP IntentSender{427482a8: PendingIntentRecord{42aa6270 com.ebay.mobile broadcastIntent}}
10-28 17:16:22.185: D/GetUserAlerts(29608): Making GetUserAlertsRequest
10-28 17:16:24.365: D/GetUserAlerts(29608): Parsing JSON=
10-28 17:16:24.365: D/GetUserAlerts(29608): {"Timestamp":"2012-10-28T15:16:22.403Z","Ack":"Success","Build":"E777_CORE_BUNDLED_14927770_R1","Version":"777","SessionData":"AQAAATqVN+gAAA1TSUQ9NTkzMTgxMDl8U1Q9MXwxfExBQ1RWPTEzNTE0MzczODIzODh8RUhXTT02MTg0MTMxNzE3fFRJRFg9MXxMSVVQPTEzNTE0MjE2MDMzMjV8UExIUz1bXUX8bkYc6+LfU4Y3v7F6KKPQssgs"}
10-28 17:16:24.375: D/GetUserAlerts(29608): Call was success but no alerts
10-28 17:16:24.375: D/GetUserAlerts(29608): Got response ackCode=1
10-28 17:16:24.375: D/GetUserAlerts(29608): Ack Success, session data=AQAAATqVN+gAAA1TSUQ9NTkzMTgxMDl8U1Q9MXwxfExBQ1RWPTEzNTE0MzczODIzODh8RUhXTT02MTg0MTMxNzE3fFRJRFg9MXxMSVVQPTEzNTE0MjE2MDMzMjV8UExIUz1bXUX8bkYc6+LfU4Y3v7F6KKPQssgs
10-28 17:17:22.095: D/AlarmManager(427): Added alarm Alarm{428747c8 type 2 com.ebay.mobile} type:ELAPSED_REALTIME_WAKEUP when: After 0h:0m:59.0s repeatInterval: 0h:1m:0.0s
10-28 17:17:22.105: D/AlarmManager(427): Triggered Alarm 428747c8 ELAPSED_REALTIME_WAKEUP IntentSender{428d07b8: PendingIntentRecord{42aa6270 com.ebay.mobile broadcastIntent}}
10-28 17:17:47.295: D/BatteryService(427): level:97 scale:100 status:4 health:2 present:true dock_status:1 dock_level:0 dock_ac_online:false voltage: 8 temperature: 280 technology: Li-ion AC powered:false USB powered:false icon:17302867 invalid charger:0
10-28 17:17:47.365: D/PowerSaving(5075): onReceived
10-28 17:17:47.365: D/PowerSaving(5075): power_unplugged
10-28 17:17:47.365: D/PowerSaving(5075): back light = 167
10-28 17:17:47.365: D/PowerSaving(5075): back light = 167 , back light = 108.549995
10-28 17:17:47.385: I/fdhttpd(6378): battery level:97 plugged:0
10-28 17:17:47.385: D/LowBatteryService(6466): onReceive:Intent { act=android.intent.action.BATTERY_CHANGED flg=0x60000010 (has extras) }
10-28 17:17:47.395: D/LowBatteryService(6466): mAcOnline = false, mDeviceBatteryLevel = 97, mDockBatteryLevel = 0, mDockBatteryStatus = 0
10-28 17:17:47.395: D/LowBatteryService(6466): Battery level is higher than threshold, no need to apply
10-28 17:17:47.395: D/LowBatteryService(6466): Battery level is good, no need to apply low battery config.
10-28 17:17:47.395: D/DockManagerService(6466): mLastAcOnline:false mAcOnline:false
10-28 17:18:21.707: D/PowerManagerService(427): forceUserActivityLocked when usb changes
10-28 17:18:21.707: D/PowerManagerService(427): @PowerManagement: Release UWL 'StayOnWhilePluggedIn Screen Dim' flags [screen_dim]
10-28 17:18:21.707: D/PowerManagerService(427): @PowerManagement: Release UWL 'StayOnWhilePluggedIn Partial' flags [partial]
10-28 17:18:21.707: D/PowerManagerService(427): IntentUserActivityLocked, send wakeup intent to Keyguard
10-28 17:18:21.737: D/PowerSaving(5075): onReceived
10-28 17:18:21.737: D/PowerSaving(5075): power_unplugged
10-28 17:18:21.737: D/PowerSaving(5075): back light = 167
10-28 17:18:21.737: D/PowerSaving(5075): back light = 167 , back light = 108.549995
10-28 17:18:21.747: D/KeyguardViewMediator(427): Receive wakeup source, keyguard show:true
10-28 17:18:21.747: D/PowerManagerService(427): range : 114 140 102 104
10-28 17:18:21.747: D/PowerManagerService(427): result : 140 255 104 255
10-28 17:18:21.747: D/PowerManagerService(427): @PowerManagement: Screen Bright {false -> true}
10-28 17:18:21.747: D/PowerManagerService(427): @PowerManagement: Screen turned on mScreenOffTime=1639932ms Battery<C,V>: <97,8>
10-28 17:18:21.747: D/PowerManagerService(427): @PowerManagement: Acquire UWL 'sleep_broadcast' flags [partial] refcount=1
10-28 17:18:21.747: D/PowerManagerService(427): @PowerManagement: Acquire UWL 'sleep_broadcast' flags [partial] refcount=2
10-28 17:18:21.757: E/Sensors(427): enable - sensor Accelerometer (handle 4) dis -> en
10-28 17:18:21.757: V/Sensors(427): enabled_sensors: 16 dmp_started: 0
10-28 17:18:21.757: V/Sensors(427): Starting DMP
10-28 17:18:21.757: E/(427): /home/mcaramello/Software/MPL/branch-CAN-4.1.0/mlsdk/mltools/batch/mlsdk-rel-android-src-CONFIDENTIAL/mldmp/mlsupervisor_9axis.c|inv_enable_9x_fusion_legacy|299 returning 1
10-28 17:18:21.757: E/Sensors(427): Error while trying to enable 9 axis sensor fusion : 1
10-28 17:18:21.767: I/MPL-mldl_cfg_mpu:(427): inv_mpu_resume(,,,,0070) -> 0070
10-28 17:18:21.767: V/Sensors(427): setDelay - sensor Accelerometer (handle 4), rate 200 ms (5.00 Hz)
10-28 17:18:21.767: V/Sensors(427): set fifo rate - divider : 39, delay : 200 ms (5.00 Hz)
10-28 17:18:21.767: I/MPL-fifo(427): Actual ODR: 25000 mHz
10-28 17:18:21.767: V/Sensors(427): setDelay - sensor Accelerometer (handle 4), rate 66 ms (15.00 Hz)
10-28 17:18:21.767: V/Sensors(427): set fifo rate - divider : 13, delay : 66 ms (15.00 Hz)
10-28 17:18:21.767: I/MPL-fifo(427): Actual ODR: 25000 mHz
10-28 17:18:21.827: D/PowerManagerService(427): @PowerManagement: sending ordered bcast for ACTION_SCREEN_ON
10-28 17:18:21.837: D/Ethernet(427): Connect is not possible because : ETHERNET not ENABLE, sleep can sleep, 
10-28 17:18:21.847: D/AudioFlinger(121): SRS_Processing::ParamsSet
10-28 17:18:21.907: D/PowerManagerService(427): @PowerManagement: Release UWL 'sleep_broadcast' flags [partial] refcount=1
10-28 17:18:21.927: W/TAG(699): onSurfaceCreated
10-28 17:18:21.927: I/TAG(699):  calling onSharedPreferenceChanged from onSurfaceCreated
10-28 17:18:21.927: W/TAG(699): onSharedPreferenceChanged, key: null
10-28 17:18:21.927: W/TAG(699): onSurfaceChanged
10-28 17:18:21.927: I/TAG(699):  onSurfaceChanged - surfaceW: -1
10-28 17:18:21.927: I/TAG(699):  onSurfaceChanged - width: 800
10-28 17:18:21.957: I/fdhttpd(6378): battery level:97 plugged:0
10-28 17:18:21.957: D/LowBatteryService(6466): onReceive:Intent { act=android.intent.action.BATTERY_CHANGED flg=0x60000010 (has extras) }
10-28 17:18:21.957: D/LowBatteryService(6466): mAcOnline = false, mDeviceBatteryLevel = 97, mDockBatteryLevel = 0, mDockBatteryStatus = 0
10-28 17:18:21.957: D/LowBatteryService(6466): Battery level is higher than threshold, no need to apply
10-28 17:18:21.957: D/LowBatteryService(6466): Battery level is good, no need to apply low battery config.
10-28 17:18:21.957: D/DockManagerService(6466): mLastAcOnline:false mAcOnline:false
10-28 17:18:22.047: D/PowerManagerService(427): range : 114 140 102 104
10-28 17:18:22.047: D/PowerManagerService(427): result : 140 255 104 255
10-28 17:18:22.047: I/WindowManager(427): Lock screen displayed!
10-28 17:18:22.047: D/PowerManagerService(427): @PowerManagement: Release UWL 'sleep_broadcast' flags [partial] refcount=0
10-28 17:18:22.057: D/dalvikvm(119): WAIT_FOR_CONCURRENT_GC blocked 0ms
10-28 17:18:22.077: D/dalvikvm(119): GC_EXPLICIT freed 39K, 6% free 6003K/6339K, paused 3ms+2ms, total 22ms
10-28 17:18:22.077: I/ActivityManager(427): Start proc com.asus.pcsynclauncher for broadcast com.asus.pcsynclauncher/.activity.USBReceiver: pid=6722 uid=10054 gids={3003, 1028}
10-28 17:18:22.087: D/dalvikvm(119): WAIT_FOR_CONCURRENT_GC blocked 0ms
10-28 17:18:22.107: D/dalvikvm(119): GC_EXPLICIT freed <1K, 6% free 6003K/6339K, paused 2ms+2ms, total 19ms
10-28 17:18:22.107: D/dalvikvm(119): WAIT_FOR_CONCURRENT_GC blocked 0ms
10-28 17:18:22.117: D/dalvikvm(119): GC_EXPLICIT freed <1K, 6% free 6003K/6339K, paused 2ms+1ms, total 18ms
10-28 17:18:22.117: D/AlarmManager(427): Added alarm Alarm{428747c8 type 2 com.ebay.mobile} type:ELAPSED_REALTIME_WAKEUP when: After 0h:0m:59.0s repeatInterval: 0h:1m:0.0s
10-28 17:18:22.117: D/AlarmManager(427): Triggered Alarm 428747c8 ELAPSED_REALTIME_WAKEUP IntentSender{42ee55a0: PendingIntentRecord{42aa6270 com.ebay.mobile broadcastIntent}}
10-28 17:18:22.147: D/SurfaceFlinger(118): Screen about to return, flinger = 0x40d24bb8
10-28 17:18:22.157: I/LauncherUsbReceiver(6722): USB Receiver : android.hardware.usb.action.USB_STATE
10-28 17:18:22.157: D/LauncherUsbReceiver(6722): usb state is not connected
10-28 17:18:22.277: I/ActivityManager(427): Start proc com.asus.UpdateLauncher for broadcast com.asus.UpdateLauncher/.UpdateLauncherIntentReceiver: pid=6747 uid=10070 gids={1028}
10-28 17:18:22.277: I/ActivityManager(427): No longer want com.google.android.apps.maps:GoogleLocationService (pid 6316): hidden #16
10-28 17:18:22.297: I/LocationManagerService(427): remove passive (pid 427), next minTime = 0
10-28 17:18:22.297: W/ActivityManager(427): Scheduling restart of crashed service com.google.android.apps.maps/com.google.android.location.internal.server.GoogleLocationService in 5000ms
10-28 17:18:22.307: D/PowerManagerService(427): @PowerManagement: Release UWL 'StayOnWhilePluggedIn Screen Dim' flags [screen_dim]
10-28 17:18:22.317: D/PowerManagerService(427): forceUserActivityLocked when usb changes
10-28 17:18:22.317: D/PowerManagerService(427): @PowerManagement: Release UWL 'StayOnWhilePluggedIn Partial' flags [partial]
10-28 17:18:22.317: D/PowerManagerService(427): IntentUserActivityLocked, send wakeup intent to Keyguard
10-28 17:18:22.327: D/PowerSaving(5075): onReceived
10-28 17:18:22.327: D/PowerSaving(5075): power_unplugged
10-28 17:18:22.327: D/PowerSaving(5075): back light = 167
10-28 17:18:22.327: D/PowerSaving(5075): back light = 167 , back light = 108.549995
10-28 17:18:22.327: D/LowBatteryService(6466): onReceive:Intent { act=android.intent.action.BATTERY_CHANGED flg=0x60000010 (has extras) }
10-28 17:18:22.327: D/KeyguardViewMediator(427): Receive wakeup source, keyguard show:true
10-28 17:18:22.327: I/fdhttpd(6378): battery level:97 plugged:0
10-28 17:18:22.327: D/LowBatteryService(6466): mAcOnline = false, mDeviceBatteryLevel = 97, mDockBatteryLevel = 0, mDockBatteryStatus = 0
10-28 17:18:22.327: D/LowBatteryService(6466): Battery level is higher than threshold, no need to apply
10-28 17:18:22.327: D/LowBatteryService(6466): Battery level is good, no need to apply low battery config.
10-28 17:18:22.327: D/DockManagerService(6466): mLastAcOnline:false mAcOnline:false
10-28 17:18:22.397: I/ActivityManager(427): No longer want com.facebook.katana (pid 6235): hidden #16
10-28 17:18:22.537: I/LauncherUsbReceiver(6722): USB Receiver : android.hardware.usb.action.USB_STATE
10-28 17:18:22.537: D/LauncherUsbReceiver(6722): usb connected
10-28 17:18:22.537: D/LauncherUsbReceiver(6722): extras: Bundle[{configured=false, adb=true, connected=true, mtp=true}]
10-28 17:18:22.597: I/LauncherUsbReceiver(6722): USB Receiver : android.hardware.usb.action.USB_STATE
10-28 17:18:22.597: D/LauncherUsbReceiver(6722): usb connected
10-28 17:18:22.597: D/LauncherUsbReceiver(6722): extras: Bundle[{configured=true, adb=true, connected=true, mtp=true}]
10-28 17:18:22.607: D/MtpService(4859): addStorageLocked 65537 /storage/sdcard0
10-28 17:18:22.607: D/MtpService(4859): starting MTP server in MTP mode
10-28 17:18:22.607: D/MtpService(4859): addStorageLocked 65537 /storage/sdcard0
10-28 17:18:22.727: I/FPS(699): FPS 0.02308548268555613
10-28 17:18:24.087: I/FPS(699): FPS 44.11313843658626
10-28 17:18:24.527: D/PowerSaving(5075): onReceived
10-28 17:18:24.527: D/PowerSaving(5075): power_unplugged
10-28 17:18:24.527: D/PowerSaving(5075): back light = 167
10-28 17:18:24.527: D/PowerSaving(5075): back light = 167 , back light = 108.549995
10-28 17:18:24.537: I/fdhttpd(6378): battery level:97 plugged:0
10-28 17:18:24.537: D/LowBatteryService(6466): onReceive:Intent { act=android.intent.action.BATTERY_CHANGED flg=0x60000010 (has extras) }
10-28 17:18:24.537: D/LowBatteryService(6466): mAcOnline = false, mDeviceBatteryLevel = 97, mDockBatteryLevel = 0, mDockBatteryStatus = 0
10-28 17:18:24.537: D/LowBatteryService(6466): Battery level is higher than threshold, no need to apply
10-28 17:18:24.537: D/LowBatteryService(6466): Battery level is good, no need to apply low battery config.
10-28 17:18:24.537: D/DockManagerService(6466): mLastAcOnline:false mAcOnline:false
10-28 17:18:25.347: I/FPS(699): FPS 47.6573247719597
10-28 17:18:26.587: I/FPS(699): FPS 48.46542315160954
10-28 17:18:26.727: D/PowerSaving(5075): onReceived
10-28 17:18:26.727: D/PowerSaving(5075): power_unplugged
10-28 17:18:26.727: D/PowerSaving(5075): back light = 167
10-28 17:18:26.727: D/PowerSaving(5075): back light = 167 , back light = 108.549995
10-28 17:18:26.747: I/fdhttpd(6378): battery level:97 plugged:0
10-28 17:18:26.747: D/LowBatteryService(6466): onReceive:Intent { act=android.intent.action.BATTERY_CHANGED flg=0x60000010 (has extras) }
10-28 17:18:26.747: D/LowBatteryService(6466): mAcOnline = false, mDeviceBatteryLevel = 97, mDockBatteryLevel = 0, mDockBatteryStatus = 0
10-28 17:18:26.747: D/LowBatteryService(6466): Battery level is higher than threshold, no need to apply
10-28 17:18:26.747: D/LowBatteryService(6466): Battery level is good, no need to apply low battery config.
10-28 17:18:26.747: D/DockManagerService(6466): mLastAcOnline:false mAcOnline:false
10-28 17:18:27.317: I/ActivityManager(427): Start proc com.google.android.apps.maps:GoogleLocationService for service com.google.android.apps.maps/com.google.android.location.internal.server.GoogleLocationService: pid=6783 uid=10026 gids={3003, 1015, 1028}
10-28 17:18:27.467: D/dalvikvm(6783): GC_CONCURRENT freed 69K, 3% free 6439K/6599K, paused 20ms+4ms, total 47ms
10-28 17:18:27.467: D/dalvikvm(6783): WAIT_FOR_CONCURRENT_GC blocked 27ms
10-28 17:18:27.897: D/dalvikvm(6783): GC_CONCURRENT freed 74K, 3% free 6870K/7047K, paused 2ms+13ms, total 32ms
10-28 17:18:27.917: I/FPS(699): FPS 45.276253058033596
10-28 17:18:27.987: D/dalvikvm(6783): GC_CONCURRENT freed 58K, 3% free 7345K/7495K, paused 12ms+4ms, total 52ms
10-28 17:18:27.987: D/dalvikvm(6783): WAIT_FOR_CONCURRENT_GC blocked 7ms
10-28 17:18:28.357: D/dalvikvm(6783): GC_CONCURRENT freed 225K, 5% free 7605K/7943K, paused 14ms+12ms, total 59ms
10-28 17:18:28.527: D/dalvikvm(6783): GC_CONCURRENT freed 150K, 4% free 7989K/8263K, paused 13ms+4ms, total 47ms
10-28 17:18:28.647: I/LocationManagerService(427): request passive (pid 6783) 0 0
10-28 17:18:28.767: D/dalvikvm(6783): GC_CONCURRENT freed 769K, 11% free 7878K/8775K, paused 34ms+20ms, total 108ms
10-28 17:18:29.157: I/FPS(699): FPS 48.33112621190299
10-28 17:18:30.387: I/FPS(699): FPS 48.7477515099616
10-28 17:18:31.627: I/FPS(699): FPS 48.44589602703281
10-28 17:18:32.337: D/PowerManagerService(427): range : 114 140 102 104
10-28 17:18:32.337: D/PowerManagerService(427): result : 140 255 104 255
10-28 17:18:32.337: D/PowerManagerService(427): @PowerManagement: 'keyguard' releaseWakeLock when screen locked
10-28 17:18:32.337: D/PowerManagerService(427): @PowerManagement: Screen Bright {true -> false}
10-28 17:18:32.337: D/PowerManagerService(427): @PowerManagement: Screen turned off mScreenOnTime=10585ms Battery<C,V>: <97,8>
10-28 17:18:32.337: D/PowerManagerService(427): @PowerManagement: Acquire UWL 'sleep_broadcast' flags [partial] refcount=1
10-28 17:18:32.347: D/SurfaceFlinger(118): About to give-up screen, flinger = 0x40d24bb8
10-28 17:18:32.357: E/Sensors(427): enable - sensor Accelerometer (handle 4) en -> dis
10-28 17:18:32.357: V/Sensors(427): enabled_sensors: 0 dmp_started: 1
10-28 17:18:32.357: V/Sensors(427): Stopping DMP
10-28 17:18:32.357: W/Sensors(427): Cannot disable 9 axis sensor fusion - already disabled
10-28 17:18:32.357: I/MPL-mldl_cfg_mpu:(427): inv_mpu_suspend(,,,,7fff) -> 0000
10-28 17:18:32.357: V/Sensors(427): setDelay - sensor Accelerometer (handle 4), rate 66 ms (15.00 Hz)
10-28 17:18:32.367: D/PowerManagerService(427): @PowerManagement: sending ordered bcast for ACTION_SCREEN_OFF
10-28 17:18:32.387: D/Ethernet(427): Screen Off connect_policy = 0 ; bTethered = false
10-28 17:18:32.387: D/Ethernet(427): Screen Off
10-28 17:18:32.397: D/AudioFlinger(121): SRS_Processing::ParamsSet
10-28 17:18:32.467: D/PowerManagerService(427): @PowerManagement: Release UWL 'sleep_broadcast' flags [partial] refcount=0
10-28 17:18:32.487: V/TransportControlView(427): Create TCV com.android.internal.widget.TransportControlView@4284b508
10-28 17:18:32.547: V/LockPatternKeyguardView(427): Set visibility on com.android.internal.policy.impl.LockPatternKeyguardView$4@42950e40 to 8388608
10-28 17:18:32.547: V/LockPatternKeyguardView(427): Set visibility on com.android.internal.policy.impl.LockPatternKeyguardView$4@42950e40 to 8388608
10-28 17:19:00.247: D/dalvikvm(427): GC_CONCURRENT freed 1559K, 39% free 15198K/24903K, paused 5ms+13ms, total 176ms
10-28 17:19:00.507: D/dalvikvm(6653): GC_CONCURRENT freed 275K, 7% free 6361K/6791K, paused 16ms+3ms, total 42ms
10-28 17:19:22.077: D/dalvikvm(800): GC_CONCURRENT freed 662K, 19% free 7374K/9031K, paused 27ms+4ms, total 104ms
10-28 17:19:22.097: D/AlarmManager(427): Added alarm Alarm{428747c8 type 2 com.ebay.mobile} type:ELAPSED_REALTIME_WAKEUP when: After 0h:1m:0.0s repeatInterval: 0h:1m:0.0s
10-28 17:19:22.097: D/AlarmManager(427): Triggered Alarm 428747c8 ELAPSED_REALTIME_WAKEUP IntentSender{42e45520: PendingIntentRecord{42aa6270 com.ebay.mobile broadcastIntent}} 
```

当我尝试运行此应用程序时，它崩溃了。你能帮我理解它为什么会崩溃并帮助我修复它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T15:27:56.627

我不知道为什么，但在重新启动 eclipse 后它工作了谢谢

# html - Twitter 引导导航类。数据切换停止菜单工作

> ID：13110025
> 
> 赞同：1
> 
> 时间：2012-10-28T15:13:32.757
> 
> 标签：html, tabs, twitter-bootstrap, navigation, nav

我对 Twitter Bootstrap 的 class="nav" 有疑问。

当我包含“data-toggle='tab'”时，我的菜单项都不起作用。

（顺便说一句：如果我删除数据切换，第一个选项不起作用，但其余选项将，即如果删除数据切换，谷歌不起作用，但 Bing 和 Bing2 会，雅虎不起作用，但 CNN 和天气好）

这是代码：

```
<!DOCTYPE html>
<html>
<head>
<script src="http://code.jquery.com/jquery.js"></script>
<link href="http://twitter.github.com/bootstrap/assets/css/bootstrap.css" rel="stylesheet" type="text/css" />
<script src="http://twitter.github.com/bootstrap/assets/js/bootstrap.js"></script>
<meta charset=utf-8 />
</head>
<body>

        <ul id="myTab" class="nav nav-tabs" data-tabs="tabs">
          <li class="active"><a href="http://www.google.com" data-toggle="tab">Google</a></li>
          <li><a href="http://www.bing.com" data-toggle="tab">Bing</a></li>
          <li><a href="http://www.bing.com" data-toggle="tab">Bing2</a></li>

          <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown">More choices <b class="caret"></b></a>
            <ul class="dropdown-menu">
              <li><a href="http://www.yahoo.com" data-toggle="tab">Yahoo</a></li>
              <li><a href="http://www.cnn.com" data-toggle="tab">CNN</a></li>
              <li><a href="http://www.accuweather.com">Weather</a></li> <!-- NOTE data-toggle removed -->
            </ul>
          </li>

        </ul>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T18:15:07.920

这是一个工作示例：http: [//jsbin.com/ujujub/1/edit](http://jsbin.com/ujujub/1/edit)

三件事：

*   记得包括`bootstrap-tab.js`
*   编写一个脚本负责处理从选项卡到选项卡的导航
*   链接不应直接指向您网站的内容，而应指向包装您网站内容的 div 的 ID。

# android - 如何在我的应用程序（启动器）中托管 AppWidgets？

> ID：13110026
> 
> 赞同：1
> 
> 时间：2012-10-28T15:13:36.633
> 
> 标签：android, android-widget, android-appwidget, android-launcher

我正在为 Android 中的主屏幕制作一个启动器应用程序替换。我想向它添加小部件（本机应用小部件）。我怎样才能 ？我尝试了很多方法，但它们要么都不起作用，要么存在错误（我无法解决）。

有人知道实现 AppWidgets 的方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-28T15:16:17.703

看看这个教程：[http ://coderender.blogspot.ch/2012/01/hosting-android-widgets-my.html](http://coderender.blogspot.ch/2012/01/hosting-android-widgets-my.html)

似乎工作正常.. :)

# django - Django 性能/内存使用

> ID：13110028
> 
> 赞同：5
> 
> 时间：2012-10-28T15:14:06.820
> 
> 标签：django, performance, apache, memory, nginx

我在 EC2 小型实例（1.7 GB RAM）上运行我的应用程序的 alpha 版本，上面带有 postgres 和 apache（wsgi-mod 不是作为守护进程，而是直接作为守护进程）。

性能还可以，但可能会更好。如果有太多测试用户加入，我也担心内存使用情况。

从 Apache 切换到 nginx 服务器是否明智？是否有任何 Django 开发人员这样做并且对结果更满意？也欢迎任何其他提示。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-28T15:21:35.987

我们在[gunicorn](http://gunicorn.org/)服务器中使用 nginx 和 Django 应用程序。到目前为止，性能相当不错，但我没有与 Apache 设置进行任何直接比较。内存使用量很小，nginx 大约需要 10MB 内存，而 gunicorn 大约需要 150MB（但它也服务于多个应用程序）。当然，这可能因应用程序而异。

我建议简单地尝试一下，按照网络和/或 gunicorn 网站上的一些教程进行设置应该很容易。还可以获取一些可比较的测试用例，并使用诸如[munin](http://www.munin-monitoring.org)之类的监控软件来查看随时间的变化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-28T23:34:25.570

为什么不使用 mod_wsgi 的守护进程模式？如果您使用嵌入式模式，如果您不注意如何设置 Apache，那么您正在为内存问题设置自己。

去阅读：

[http://blog.dscpl.com.au/2012/10/why-are-you-using-embedded-mode-of.html](http://blog.dscpl.com.au/2012/10/why-are-you-using-embedded-mode-of.html)

还可以在以下位置观看我的 PyCon 演讲：

[http://lanyrd.com/2012/pycon/spcdg/](http://lanyrd.com/2012/pycon/spcdg/)

还要修改您的问题并指出您正在使用哪个 Apache MPM 以及 MPM 设置是什么。

至于使用诸如 gunicorn 或 uWSGI 之类的替代方案，对于可比较的配置，内存要求并没有太大的不同，因为底层服务器不会决定使用多少内存，而是由您自己决定在其上运行的特定 Python Web 应用程序。一种常见的误解是，gunicorn 或 uWSGI 以某种方式神奇地解决了所有问题，而 Apache 却做不到。为 Python Web 应用程序正确设置 Apache，不要依赖其默认值，它与其他解决方案一样强大，并且可以根据您的要求提供更多的灵活性。

非常建议您进行一些监控，以找出真正的问题和瓶颈。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-28T15:27:53.707

我的结果好坏参半。当应用程序快速、非阻塞时，nginx 以较小的内存占用表现良好。流量越大，收益越大。

我有几个速度较慢的 GIS 应用程序，在这种情况下，nginx 惨遭失败。我的建议是：不要在任何可能阻塞几秒钟的东西上使用 nginx + wsgi。

# delphi - 如何将字形属性添加到我的自定义组件？

> ID：13110038
> 
> 赞同：2
> 
> 时间：2012-10-28T15:15:23.527
> 
> 标签：delphi, custom-controls, delphi-xe2, vcl

如何将字形属性添加到我的自定义组件？

Vcl.Buttons 已声明类`TButtonGlyph`但我不能使用它（Delphi 在使用列表中没有看到它与 Vcl.Buttons 一起使用）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-28T16:35:36.003

`TButtonGlyph`是 VCL 使用的内部帮助器类。这不是你需要的。我怀疑您需要做的就是声明一个已发布的 type 属性`TPicture`。VCL 将自动提供设计时编辑器，并将图像流式传输到 .dfm 文件。您可以使用任何`TGraphic`后代，包括`TPNGImage`.

# apache - Deny access to all files not caught by a mod_rewrite rule

> ID：13110045
> 
> 赞同：0
> 
> 时间：2012-10-28T15:16:32.977
> 
> 标签：apache, .htaccess, mod-rewrite

Id like to deny access to everything, except /json-rpc, which should be redirected to /json-rpc.php. My current configuration is:

```
Options -Indexes

Order Deny,Allow 
Deny from All 

<Files "json-rpc"> 
     Order Deny,Allow 
     Allow from All
</Files>

<Files "json-rpc.php"> 
     Order Deny,Allow 
     Allow from All
</Files>

<IfModule mod_rewrite.c>
RewriteEngine On
RewriteRule ^json-rpc$ json-rpc.php [NC,L]
</IfModule> 
```

The problem with this is that it allows access to /json-rpc.php directly. How do I make it so that /json-rpc is the ONLY resource available?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T20:16:57.943

Include this rule inside your `<IfModule mod_rewrite.c>` block:

```
RewriteCond %{THE_REQUEST} json-rpc\.php
RewriteRule ^ - [L,F] 
```

This forbids requests directly for `json-rpc.php`.

# android - Service v/s AsyncTask

> ID：13110047
> 
> 赞同：4
> 
> 时间：2012-10-28T15:16:35.430
> 
> 标签：android, android-asynctask, android-service

我对我的应用程序的设计感到困惑。我需要不断地轮询服务器以从中获取新数据。我很困惑以固定间隔运行的异步任务或服务运行是后台是更好的选择。线程只会在应用程序运行时运行

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-28T16:37:33.347

你已经对你的问题有了一些答案，但我认为值得总结......

**你需要什么**

当您想要运行一段需要一些时间才能完成的代码时，您应该始终在与 UI 线程不同的线程中运行它。

您可以通过两种方式实现这一目标：

使用`Thread`：

这是最简单的一种，如果您不需要从新线程到 UI 线程的大量通信。如果您需要通信，您可能必须使用 a`Handler`来完成它。

使用`AsyncTask`：

也在一个单独的线程中运行，并且已经实现了一些与 UI 线程的通信通道。因此，如果您需要将此通信返回到 UI，则此选项更为可取。

**你不需要的东西**

`Service`

这主要用于在您退出主应用程序后保持一些代码运行，并且它将在 UI 线程中运行，除非您使用上述选项生成一个新线程。你说你的线程应该在你退出应用程序时终止，所以这不是你需要的。

`IntentService`

这可以通过一个外部事件（即`BroadcastReceiver`）来激活，该事件可以启动您定义的一段代码，即使您的应用程序没有运行。再一次，根据您的要求，这不是您想要的。

问候。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-28T15:20:17.940

[Android 服务](http://developer.android.com/reference/android/app/Service.html)不在后台线程中。

因此，您应该运行一个服务，每次您想轮询时都会启动一个 ASyncTask。

> 请注意，服务与其他应用程序对象一样，在其托管进程的主线程中运行。这意味着，如果您的服务要执行任何 CPU 密集型（例如 MP3 播放）或阻塞（例如网络）操作，它应该生成自己的线程来完成这项工作。更多信息可以在进程和线程中找到。IntentService 类可作为 Service 的标准实现使用，它有自己的线程来安排要完成的工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-28T15:36:03.210

如果你想“不断地轮询”，asyncTask 就不行了。当您的应用程序被 Android 停止时，任务就会停止。正如 Blundell 已经指出的那样，服务本身也不会这样做。Service 在主线程中运行，您不想在主线程中进行轮询。有两种方法可以做到这一点：您创建一个服务，它产生自己的线程来执行您希望它执行的操作，或者您让它安排在 AsyncTask 或单独线程中执行的轮询。我尽量不在我的应用程序中进行轮询，但如果必须，在您的服务中创建一个执行轮询的特殊线程对我来说似乎是最好的。

根据您的应用程序所做的事情和轮询的内容，您可以给单独的线程一个较低的优先级，这样它就不会妨碍其他处理。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-28T15:25:37.383

`Service`不应相提并论`AsyncTask`。我猜你很可能是指这里 -尽管有通用名称，但这与`IntentService`略有不同。`Service`

至于定期提取，我会坚持使用经常性警报（使用`AlarmManager`）和（很可能）使用`IntentService`来进行提取。

这里有[AsyncTask 基础知识](http://developer.android.com/reference/android/os/AsyncTask.html)和一些[教程](http://www.vogella.com/articles/AndroidPerformance/article.html) 这里有[IntentService 基础知识](http://developer.android.com/reference/android/app/IntentService.html)和[教程](http://www.vogella.com/articles/AndroidServices/article.html)

请注意，`IntentService`作业是按设计排队的，而`AsyncTasks`可以完全并行运行。但是请注意[与较新 API 中的 AsyncTask 处理相关的回归](http://commonsware.com/)。没什么大不了的，因为解决方法只是增加了几行代码，但是值得知道这一点。

**编辑**

许多关于 AsyncTask 生命周期与 Activity 生命周期联系在一起的误解浮出水面。这是**错误**的。AsyncTask 独立于 Activity。Finishing Activity 不会对任何 AsyncTask 执行任何操作，除非您通过代码从 onDestroy() 中清除它们。然而，如果一个活动的进程在后台被杀死，那么 AsyncTask 也将被杀死，作为被杀死的整个进程的一部分

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-28T15:42:36.043

> 线程只会在应用程序运行时运行

然后`AsyncTask`将是最简单的解决方案。`publishProgress()`使用后台线程定期向应用线程发送数据。`Thread.sleep()`使用in设置所需的间隔`doInBackground()`。另外，请确保您在 Activity 方法中开始一个*新*任务`onResume()`，并在 Activity 方法中结束此任务`onPause()`。

例子：

```
public class MyActivity extends Activity {
    private AsyncTask<Void,String,Void> mAsyncTask;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
    }

    @Override
    protected void onResume() {
        super.onResume();
        mAsyncTask = new MyTask();
        mAsyncTask.execute();
    }

    @Override
    protected void onPause() {
        super.onPause();
        if(mAsyncTask != null){
            mAsyncTask.cancel(true);
        }
    }

    private void onServerResponse(String response){
        Toast.makeText(this, "Got response !", Toast.LENGTH_SHORT).show();
    }

    private final class MyTask extends AsyncTask<Void,String,Void>{

        @Override
        protected Void doInBackground(Void... voids) {
            while (!isCancelled()){

                String response = "";

                //server query code here

                publishProgress(response);
                Log.i("TEST", "Response received");

                //sleep for 5 sec, exit if interrupted ,likely due to cancel(true) called
                try{
                    Thread.sleep(5000);
                }catch (InterruptedException e){
                    return null;
                }
            }

            return null;
        }

        @Override
        protected void onProgressUpdate(String... values) {
            super.onProgressUpdate(values);
            if(values.length > 0){
                onServerResponse(values[0]);
            }
        }
    }
} 
```

# java - 通过蓝牙 Android 传输文件

> ID：13110048
> 
> 赞同：2
> 
> 时间：2012-10-28T15:16:35.523
> 
> 标签：java, android, android-layout

我正在使用 Sample Bluetooth Chat android，它可以正常聊天。现在我想使用该代码传输文件。

这就是我想要做的：首先，用户向服务器发送一个文件名。然后，服务器使用该代码发回该文件。

```
 ContentValues values = new ContentValues();
       values.put(BluetoothShare.URI, "file:///sdcard/refresh.txt");
       values.put(BluetoothShare.DESTINATION, deviceAddress);
       values.put(BluetoothShare.DIRECTION, BluetoothShare.DIRECTION_OUTBOUND);
       Long ts = System.currentTimeMillis();
       values.put(BluetoothShare.TIMESTAMP, ts);
       getContentResolver().insert(BluetoothShare.CONTENT_URI, values); 
```

但我这样做会收到套接字错误。你能给我推荐一个关于android文件传输的教程或示例代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T06:01:34.070

为了传输文件，您可以使用意图显式调用 ACTION_SEND

使用 ACTION_SEND 意图，将弹出一个菜单，其中包含可以处理您要发送的文件类型的应用程序，用户需要从中选择蓝牙，然后选择设备。

```
File sourceFile = new File("//mnt/sdcard/TviderFB.apk"); 
Intent intent = new Intent();
intent.setAction(Intent.ACTION_SEND);
Intent.setType("image/jpeg"); 
intent.putExtra(Intent.EXTRA_STREAM,Uri.fromFile(sourceFile));
startActivity(intent); 
```

# c++ - Visual Studio 2010 单元测试

> ID：13110049
> 
> 赞同：2
> 
> 时间：2012-10-28T15:16:43.760
> 
> 标签：c++, visual-studio-2010, unit-testing, white-box-testing

我想用单元测试在我的源代码中测试几个函数。现在，如果我运行测试，我不会得到任何测试结果。

这是我尝试做的一个简单的代码片段：

```
#include <iostream>

using namespace std;
namespace UnitTest
{
    [TestClass]
    public ref class UnitTestBlueSmart

        int main(){
        public:
        [TestMethod()]
        hello();
        }
}

void hello(){
 cout<<"Hello World!";
} 
```

有谁知道为什么这不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T15:31:25.550

问题是您没有正确执行单元测试。您应该依靠不获取[Asserts](http://blogs.msdn.com/b/jsocha/archive/2010/11/19/writing-unit-tests-in-visual-studio-for-native-c.aspx)，而不是打印到控制台。

这个概念是检查方法并确保它们返回正确的值。

有关详细信息，请参阅以下链接：

[http://whinery.wordpress.com/2012/07/21/native-c-unit-testing-with-ms-test/](http://whinery.wordpress.com/2012/07/21/native-c-unit-testing-with-ms-test/)

[http://msdn.microsoft.com/en-us/library/ms182532.aspx](http://msdn.microsoft.com/en-us/library/ms182532.aspx)

具体使用您的代码，正确单元测试的示例是：

```
string hello()
{
 return "Hello World!";
} 
```

并创建一个 TestMethod，如果值不正确，它将断言。例如：

```
[TestMethod]
void HelloTest()
{
    string expected = "Hello World";
    string result = hello();
    Microsoft::VisualStudio::TestTools::UnitTesting::Assert::AreEqual(expected, result);
} 
```

# java - 评分栏图像之间的伪影

> ID：13110051
> 
> 赞同：2
> 
> 时间：2012-10-28T15:17:21.063
> 
> 标签：java, android, user-interface, android-resources, ratingbar

我在 android 中创建了我的自定义评级栏，但在具有较低 lvl API 的设备上遇到了一些问题。我在带有 ICS 的 htc one x 上成功实现了它，但是在带有 android 2.2 的 htc 上，我在图像之间有伪影。我为每个屏幕密度创建了 png 资源。

这是带有 hdpi 屏幕的 HTC 渴望的图像： ![HTC 渴望与文物](../Images/2efc38e9fbaa7f78d7fc26d196d4befe.png)

这是带有 xhdpi 屏幕的 htc one x 的图像： ![HTC one x 无伪影](../Images/513c00e2d372c3637f2ab80515e8eb72.png)

我的布局文件中包含以下内容：以下是我的可绘制资源：

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:id="@+android:id/background"
          android:drawable="@drawable/bone_empty" />
    <item android:id="@+android:id/progress"
          android:drawable="@drawable/bone_full" />
</layer-list> 
```

以下是我的 res/values-hdpi/styles.xml （由 htc 欲望使用）

```
<?xml version="1.0" encoding="utf-8"?>
<resources xmlns:android="http://schemas.android.com/apk/res/android">
    <style name="dogBar" parent="@android:style/Widget.RatingBar">
        <item name="android:progressDrawable">@drawable/dog_rating_bar</item>
        <item name="android:minHeight">48dp</item>
        <item name="android:maxHeight">48dp</item>
    </style>
</resources> 
```

以下是我的 res/values-xhdpi/styles.xml （由 htc one x 使用）

```
<?xml version="1.0" encoding="utf-8"?>
<resources xmlns:android="http://schemas.android.com/apk/res/android">
    <style name="dogBar" parent="@android:style/Widget.RatingBar">
        <item name="android:progressDrawable">@drawable/dog_rating_bar</item>
        <item name="android:minHeight">64dp</item>
        <item name="android:maxHeight">64dp</item>
    </style>
</resources> 
```

# ajax - json和换行符

> ID：13110059
> 
> 赞同：0
> 
> 时间：2012-10-28T15:18:08.140
> 
> 标签：ajax, json

我希望，有一个解决我的问题。但我找不到它。问题：ajax 返回带有换行符 (\n) 的数据。数据必须插入 textarea 并从 ajax 更新。

我可以在读取数据时替换 '\n' (myJsonData.replace.() ...等)。主要问题：如何为 textarea 准备数据以使用换行符以正确格式显示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T15:24:00.870

只需将其替换为可恢复的内容，例如`-=br=-`插入到 textarea 时，替换回`\n`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T15:39:21.563

textarea 中的换行没有问题，您可以按原样插入数据。但是，如果您仍然遇到特殊字符的问题 - 您可以对 JSON 数据进行编码并在插入时对其进行解码。

# logging - How to record all errors generated from a model method in a log file in Rails 3.2

> ID：13110062
> 
> 赞同：0
> 
> 时间：2012-10-28T15:18:21.120
> 
> 标签：logging, ruby-on-rails-3.2

I have the following code and I want to write any errors generated when running it to a log file.

How can I do that in rails?

```
def get_score
 if status == "approved" 
       begin 
          metrics = Popularity.get_metrics(url,nil ,:resource)

            update_column(:metrics, metrics.to_yaml)
            update_column(:score,Popularity.score(metrics,:resource ))
            reputation = reputations.build(:metrics => metrics)
            reputation.score = score
            reputation.save

       rescue
       #write the error that was raised to a log file
       end   
    end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T15:53:26.983

How about this

```
 def get_score
  if status == "approved" 
       begin 
          metrics = Popularity.get_metrics(url,nil ,:resource)

            update_column(:metrics, metrics.to_yaml)
            update_column(:score,Popularity.score(metrics,:resource ))
            reputation = reputations.build(:metrics => metrics)
            reputation.score = score
            reputation.save

       rescue => e
          Rails.logger.debug "Opps Error Occurred -- > #{e} "
       end   
    end 
```

The `Rails.logger.debug` will log the error in the `log/[your environment].log`

with a `debug` tag alternatively you can also used

`Rails.logger.info "Opps Error Occurred -- > #{e} "`

# silverlight - 控制模板中的情节提要访问元素

> ID：13110064
> 
> 赞同：1
> 
> 时间：2012-10-28T15:18:38.280
> 
> 标签：silverlight, windows-phone-7

我有一个用户控件，其中包含我希望设置动画的自定义样式按钮。

```
<UserControl>
<!-- omitted namespaces etc -->
<UserControl.Resources>
  <Style x:Key="myButtonStyle">
     <Setter Property="Template">
         <Setter.Value>
               <ControlTemplate TargetType="Button">
                   <Grid>                                                                     
                     <Ellipse x:Name="ellipse" Fill="Orange" />
                     <es:Arc x:Name="arc" EndAngle="360" Fill="Red" StartAngle="360"/>
                    </Grid>
                </ControlTemplate TargetType="Button">
           </Setter.Value>
     </Setter>
  </Style>
</UserControl.Resouces>

<Grid x:Name="LayoutRoot" />
  <Button Tap="Fire_Animation" x:Name="myButton" Style="{StaticResource myButtonStyle}" />
</Grid>
</UserControl> 
```

一旦按钮被点击，Fire_Animation 方法将启动一个故事板，该故事板应该修改按钮模板内的“Arc”元素。

我见过这样的 WPF 示例：

```
// .. previous necessary method calls
StoryBoard.SetTargetName(_myAnimation, "arc");
_storyboard.Begin(myButton, myButton.Template); 
```

但是在 Windows Phone 中没有这样的“开始”重载，因此我的故事板引发了一个异常，即它找不到“弧”元素。还有其他解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T21:34:40.097

我建议当您点击按钮时，它会设置视觉状态。然后，您可以提供一个故事板作为按钮模板的一部分，`arc`当应用给定的视觉状态时，它会为元素设置动画。

# javascript - 将字符串与数组匹配

> ID：13110068
> 
> 赞同：0
> 
> 时间：2012-10-28T15:19:01.730
> 
> 标签：javascript

我对这段代码有疑问：

```
var buyerChoice = prompt("Enter a either apple, orange, or banana:", "");        

var fruits = new Array ("apple", "orange", "banana");

for(i=0; i < fruits.length; i++) {
    if(buyerChoice === fruits[i]) {
        document.write(buyerChoice);
    } else if (buyerChoice !== fruits[i]){
        document.write("Sorry, " +buyerChoice+ " is out of season.");
        break;
    }
} 
```

我认为问题出在`else-if`语句中，因为每次我输入变量中存在的项目时，它都会返回`//appleSorry, apple is out of season`，从而满足这两个条件。

我难住了。我想底线是如何有效地将字符串从提示匹配到数组，测试每个项目以及如果提示字符串不存在如何解析数组。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T15:21:02.307

在第一次迭代中，输入的水果要么是要么不等于“苹果”。但是，如果第一次迭代不是“apple”（但例如“orange”），那么这并不意味着“orange”根本不可用。

您应该跟踪您是否匹配了任何东西（通过使用变量），并且只有*在循环之后*没有匹配任何内容时，输入的水果确实不可用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T15:23:36.783

你的for循环根本不合逻辑。因此`items`，如果它未定义，则不会工作。

这是一个可能的解决方案

```
var outofseason = true;
for(i=0; i < fruits.length; i++) {
    if(buyerChoice === fruits[i]) {
        outofseason = false;
        break;
    }
}

if ( outofseason ) {
    document.write("Sorry, " +buyerChoice+ " is out of season.");
}
else {
    document.write(buyerChoice);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-28T15:26:39.037

```
// let the fruits be a global var instead of recreating it every time you call the function below
var fruits = ["apple", "orange", "banana"];

function askBuyerForFruit() {
  var buyerChoice = prompt("Enter a either apple, orange, or banana:", "");

  for (var i = 0; i < fruits.length; i++) {
    if (fruits[i] === buyerChoice) {
      document.write(buyerChoice);
      // get out of the function if found;
      return;
    }
  }

  // fallback if no matching fruit found
  document.write("Sorry, " +buyerChoice+ " is out of season.");
} 
```

希望这可以帮助 ：）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-28T15:33:26.543

不是 100% 确定 for 循环试图完成什么，但你可以使用`indexOf`

```
var buyerChoice = prompt("Enter a either apple, orange, or banana:", "");
var fruits = new Array ("apple", "orange", "banana");

var matchedIndex = fruits.indexOf(buyerChoice);

if (matchedIndex < 0) { //did not match
    document.write("Sorry, " +buyerChoice+ " is out of season.");
} else {
    document.write(buyerChoice)
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-28T15:26:16.517

将 items[i] 更改为 fruits[i] 这将解决您的问题

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-28T15:57:32.210

```
var buyerChoice = prompt("Enter a either apple, orange, or banana:", "");        

var fruits = ["apple", "orange", "banana"];

var outOfSeason = false;
for(fruit in fruits) {
    if(buyerChoice === fruits[fruit]) {
        matched = true;
        break;
    }
}

if(! outOfSeason){
   document.write(buyerChoice);
}
else{
   document.write("Sorry, " +buyerChoice+ " is out of season.");
} 
```

# delphi - Delphi 2007构建后事件，将exe复制到特定目录？

> ID：13110071
> 
> 赞同：8
> 
> 时间：2012-10-28T15:19:10.263
> 
> 标签：delphi, post-build-event

在 Delphi 2007 中，如何使用构建后事件将新建的 exe 复制到特定目录中？

任何指向构建事件命令列表的链接将不胜感激。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-28T15:21:19.277

`copy`在构建后事件中使用命令：

```
copy "$(OUTPUTPATH)" MyFolder 
```

`$(OUTPUTPATH)`扩展为输出文件的完整路径。

# wpf - 在运行时不附加图像的情况下使用 WPF 图像的方法

> ID：13110074
> 
> 赞同：1
> 
> 时间：2012-10-28T15:19:23.540
> 
> 标签：wpf, vb.net, image

我知道如何`<Image>`通过 VB.net 运行时代码将图像附加到 XAML。我将如何以正常的旧方式做到这一点。（不使用任何代码在 IDE 中附加图像）

在 WPF 浏览图像（在 Visual Studio IDE 中）之前，它会以某种方式将其放置在项目中并且可以正常工作。

现在我做同样的事情，我可以在我的 Visual Studio IDE 中看到图像，但在运行时图像显示为空白。

我将如何使用 VS IDE 正确浏览图像以便在运行时显示？也许我做错了一点帮助或任何指导都会很棒

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T17:07:03.413

我想您的项目中有一个文件夹，其中包含您的图像文件，在这种情况下，类似的东西`<Image Source="/WpfApplication1/component;ImagesFolder/ImageName.png" />`可以解决问题。

如果您正在寻找一种非代码方式，当您点击标签时，您可以浏览从`Source`Property from导入的文件`Properties panel`

# php - 如何在 MacOSX 10.7.4 上不以 root 身份运行 PEAR？

> ID：13110075
> 
> 赞同：0
> 
> 时间：2012-10-28T15:19:27.643
> 
> 标签：php, pear

PEAR 必须`sudo`在我的系统上运行。这很烦人，原因有两个。一，每次我想使用`pear`我都必须做一个`sudo`. 即使只是想看看如何使用“帮助”这样简单的事情。第二个原因是它安装了所有东西，`root`而且我不能使用通过`pear`(like `phpdoc`) 安装的简单程序，而不必每次都使用 sudo （这当然使生成的文档归 root 用户所有。

**如何配置 PEAR 以使其可用？**我知道不强制 PEAR 以 root 身份运行可能存在安全问题（即，如果不是 root，我不应该能够安装到`/usr/lib/php/pear`），但是我不得不使用`sudo`PEAR 安装的模块来使用它是疯狂的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T09:03:35.573

The problem was that my umask was set incorrectly to 007\. This means that whenever I tried to use a package that pear had installed, I couldn't unless I was root. A better umask would be 006\. This would allow everything installed to by root to be readable or executable (depending on the context).

You can set your umask in your .bashrc file in your home directory. Just add this line (or change the line that is incorrect):

```
umask 006 
```

Hope this helps someone searching for an answer to this.

# r - 连接路径的功能？

> ID：13110076
> 
> 赞同：86
> 
> 时间：2012-10-28T15:19:29.657
> 
> 标签：r, path, concatenation

是否有连接路径的现有功能？

我知道实现起来并不难，但仍然......除了处理尾随`/`（或`\`）之外，我还需要处理正确的操作系统路径格式检测（即我们是否编写`C:\dir\file`或`/dir/file`）。

正如我所说，我相信我知道如何实现它；问题是：我应该这样做吗？该功能是否已存在于现有 R 包中？

* * *

## 回答 #1

> 赞同：139
> 
> 时间：2012-10-28T15:21:44.367

是的，`file.path()`

```
R> file.path("usr", "local", "lib")
[1] "usr/local/lib"
R> 
```

包中的文件也同样有用`system.path()`：

```
R> system.file("extdata", "date_time_zonespec.csv", package="RcppBDT")
[1] "/usr/local/lib/R/site-library/RcppBDT/extdata/date_time_zonespec.csv"
R> 
```

`extdata/date_time_zonespec.csv`无论_

1.  安装软件包的位置，以及
2.  操作系统

这非常方便。最后，还有

```
R> .Platform$file.sep
[1] "/"
R> 
```

如果您坚持手动进行。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-01-23T16:00:18.357

如果有人想要，这是我自己的功能`path.cat`。它的功能与 Python 的功能相当，[`os.path.join`](https://docs.python.org/2/library/os.path.html)具有额外的糖分，它解释`..`.

使用此功能，您可以分层构建路径，但与 不同的是`file.path`，您可以通过放置绝对路径来覆盖层次结构。而作为一个加糖，他可以把“..”放在路径上任何他喜欢的地方，意义很明显。

例如

*   `path.cat("/home/user1","project/data","../data2")`产量`/home/user1/project/data2`

*   `path.cat("/home/user1","project/data","/home/user2/data")`产量`/home/user2/data`

该函数仅使用斜杠作为路径分隔符，这很好，因为 R 透明地将它们转换为 Windows 机器上的反斜杠。

```
library("iterators") # After writing this function I've learned, that iterators are very inefficient in R.
library("itertools")

#High-level function that inteligentely concatenates paths given in arguments
#The user interface is the same as for file.path, with the exception that it understands the path ".."
#and it can identify relative and absolute paths.
#Absolute paths starts comply with "^\/" or "^\d:\/" regexp.
#The concatenation starts from the last absolute path in arguments, or the first, if no absolute paths are given.
path.cat<-function(...)
{
  elems<-list(...)
  elems<-as.character(elems)
  elems<-elems[elems!='' && !is.null(elems)]
  relems<-rev(elems)
  starts<-grep('^[/\\]',relems)[1]
  if (!is.na(starts) && !is.null(starts))
  {
    relems<-relems[1:starts]
  }
  starts<-grep(':',relems,fixed=TRUE)
  if (length(starts)==0){
    starts=length(elems)-length(relems)+1
  }else{
    starts=length(elems)-starts[[1]]+1}
  elems<-elems[starts:length(elems)]
  path<-do.call(file.path,as.list(elems))
  elems<-strsplit(path,'[/\\]',FALSE)[[1]]
  it<-ihasNext(iter(elems))
  out<-rep(NA,length(elems))
  i<-1
  while(hasNext(it))
  {
    item<-nextElem(it)
    if(item=='..')
    {
      i<-i-1
    } else if (item=='' & i!=1) {
      #nothing
    } else   {
      out[i]<-item
      i<-i+1
    }
  }
  do.call(file.path,as.list(out[1:i-1]))
} 
```

# php - 从 Google API 403 错误中读取错误

> ID：13110079
> 
> 赞同：1
> 
> 时间：2012-10-28T15:19:50.807
> 
> 标签：php, curl, google-api

我正在构建一个使用 google API 进行翻译的应用程序。

我可以正常连接，一切都很好。我需要能够读取 cURL 中 403 错误的内容：

```
{
 "error": {
  "errors": [
   {
    "domain": "usageLimits",
    "reason": "accessNotConfigured",
    "message": "Access Not Configured"
   }
  ],
  "code": 403,
  "message": "Access Not Configured"
 }
} 
```

如何配置 cURL 以不忽略 google api 与 403 错误标头一起吐出的数据。似乎错误标头导致 cURL 完全忽略 api 显示的 JSON。我已经搜索了所有内容，但我发现的只是有关如何连接的问题的链接 - 这是我遇到的问题，我希望能够使用 cURL 或 file_get_contents 将此错误 jSON 拉入我的 PHP 中。有任何想法吗？

重要的是我将错误拉到 PHP 中，以便脚本可以确定要做什么，目前它给我的所有内容都是“未找到”。当我在浏览器中打开 API 调用 url 时，看到错误很痛苦。

* * *

更新：

var_dump(curl_getinfo($ch)); 给出：

```
array(20) { ["url"]=> string(48) "https://www.googleapis.com/language/translate/v2" ["content_type"]=> string(24) "text/html; charset=UTF-8" ["http_code"]=> int(404) ["header_size"]=> int(360) ["request_size"]=> int(355) ["filetime"]=> int(-1) ["ssl_verify_result"]=> int(0) ["redirect_count"]=> int(0) ["total_time"]=> float(0.044256) ["namelookup_time"]=> float(0.001419) ["connect_time"]=> float(0.009028) ["pretransfer_time"]=> float(0.034619) ["size_upload"]=> float(102) ["size_download"]=> float(9) ["speed_download"]=> float(203) ["speed_upload"]=> float(2304) ["download_content_length"]=> float(-1) ["upload_content_length"]=> float(102) ["starttransfer_time"]=> float(0.044179) ["redirect_time"]=> float(0) } 
```

但这不包含我想要获取的 JSON！

* * *

示例 PHP cURL 例程：

```
$params = http_build_query($params_ar); // params contains all the connection auth and config.... its all good.

$api_url = "https://www.googleapis.com/language/translate/v2";

$ch = curl_init();  
curl_setopt($ch, CURLOPT_URL, $api_url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_REFERER, "Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.13) Gecko/20080311 Firefox/2.0.0.13'");
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, $params);

// find the 403 error JSON!!!!!

var_dump(curl_getinfo($ch));

echo "<hr>the url: ";

echo $api_url."?".$params;

echo "<hr>the body: ";

echo $body;

echo "<hr>";

var_dump(curl_error($ch));

echo "<hr>";

curl_close($ch);

// WHERE IS IT???????

exit; 
```

# ember.js - 初始化应用程序并在 connectOutlet 中使用 Selected 值

> ID：13110084
> 
> 赞同：0
> 
> 时间：2012-10-28T15:20:08.640
> 
> 标签：ember.js, ember-old-router

我在初始化应用程序时遇到问题。我创建了 jsfiddle，它只适用于我的桌面，但不适用于 jsfiddle。

[http://jsfiddle.net/zDSnm/](http://jsfiddle.net/zDSnm/)

我希望你能抓住这个想法。

在我的应用程序开始时，我必须从休息和值中获取一些值到 Ember.Select。取决于选择什么，我的所有 connectOutlets 函数都使用这个值。

在这里，我从 REST 中获取了一些数据

```
$.ajax({
  url: 'https://api.github.com/repos/emberjs/ember.js/contributors',
  dataType: 'jsonp',
  context: this,
  success: function(response){
    [{login: 'a'},{login: 'b'}].forEach(function(c){
        this.allContributors.addObject(App.Contributor.create(c))
    },this);
  }
}) 
```

并将其放入我的选择视图：

```
{{view Ember.Select
contentBinding="App.Contributor.allContributors"
selectionBinding="App.Contributor.selectedContributor"
    optionLabelPath="content.login"
optionValuePath="content.id" }} 
{{outlet}} 
```

在我的每条路线中，我都需要使用这个选择框中选择的值

```
index : Ember.Route.extend({
    route: '/',
    connectOutlets: function(router){
        router.get('applicationController').connectOutlet('oneContributor',App.Contributor.selectedContributor);
    }
}) 
```

我还将观察者添加到调用 currentState 的 connectOutlets 的这个 selectedContributor 值（我知道我不应该这样做，但我不知道为什么以及如何正确地这样做）

```
App.Contributor.reopenClass({
    //...
refresh : function(){
    App.router.currentState.connectOutlets(App.router);
}.observes('selectedContributor'), 
    //... 
```

我希望有一些好的方法来解决这样的问题。如果有不清楚的地方请发表评论。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T16:08:56.920

如果我理解正确，您想显示当前选择的贡献者。`transitionTo`一种方法是监听所选贡献者的变化并向路由器发送操作。

首先是路由器：

```
 index : Ember.Route.extend({
        route: '/',

        showContibutor: Ember.Route.transitionTo('show'),
        showNoneSelected: Ember.Route.transitionTo('noneSelected'),

        connectOutlets: function(router){
          router.applicationController.connectOutlet({ name: 'contributors', context: App.Contributor.find() });
        },

        // if no contributor is selected, the router navigates here
        // for example, when a default option "Make a selection" is selected.
        noneSelected: Ember.Route.extend({
           route: '/'
        }),

        show: Ember.Route.extend({
           route: '/:contributor_id'
             connectOutlets: function(router, context){
             router.applicationController.connectOutlet({name: 'contributor', context: context})
           },

           exit: function(router) {
             // This will remove the App.ContributorView from the template. 
             router.applicationController.disconnectOutlet('view');
           }
        })
    }) 
```

有一个模板`App.ContributorsView`：

```
{{view Ember.Select
  contentBinding="controller"
  selectionBinding="controller.selectedContributor"
  optionLabelPath="content.login"
  optionValuePath="content.id"}} 

{{outlet}} 
```

以及`ArrayController`管理贡献者：

```
App.ContributorsController = Ember.ArrayController.extend({
  onSelectedContributorChange: function() {
     var selectedContributor = this.get('selectedContributor');
     if (selectedContributor) {
       App.router.send('showContributor', selectedContributor);
     } else {
       App.router.send('showNoneSelected');
     }
  }.observes('selectedContributor')
}); 
```

* * *

用户 a 选择一个贡献者，contributorsController 告诉路由器显示贡献者的视图（即显示`App.ContributorView`带有上下文的视图`selectedContributor`）。

```
App.ContributorView = Ember.View.extend({
  templateName: 'contributor'
}); 
```

选定贡献者的控制器：

```
App.ContributorController = Ember.ObjectController.extend({
  // define events and data manipulation methods
  // specific to the currently selected contributor.
}); 
```

希望这可以帮助。

* * *

更新：如果您需要默认显示第一条记录，则`noneSelected`路线应如下所示：

```
 noneSelected: Ember.Route.extend({
           route: '/',
           connectOutlets: function(router){
             var context = router.contributorsController.get('content.firstRecord');
             router.applicationController.connectOutlet({name: 'contributor', context: context})
           }
        }) 
```

并在 ContributorsController 中定义 firstRecord：

```
App.ContributorsController = Ember.ArrayController.extend({
  firstRecord: function() {
    return this.get('content') && this.get('content').objectAt(0)
  }.property('content.[]')
}); 
```

没有测试过，但它应该可以工作。

# jquery - $.AJAX 发布不工作

> ID：13110087
> 
> 赞同：0
> 
> 时间：2012-10-28T15:20:43.613
> 
> 标签：jquery, mysql

我正在为我的网站构建一个简单的类似系统。问题是，jquery 帖子没有按照它应该做的工作。

数据库表上没有插入任何值，并且成功功能也不起作用..

**所有数据库表都已设置好。**

**HTML：**

```
<a href="javascript:like('85','17','product','1','3');" class="button like_click"><span><img src="wp-content/plugins/assets/images/icons/like-icon.png"> Like </span></a> 
```

**这是我的 jQuery。**

```
function like(blog_id,object_id,object_type,user_id,default_count)
{

    jQuery.ajax({
        url: '/wp-content/plugins/assets/like.php',
        type: 'post',
        data: 'object_id=' + object_id + '&user_id=' + user_id + '&type=like&blog_id=' + blog_id + '&object_type=' + object_type,
        dataType: json,
        success: function(data)
        {
             jQuery('#' + object_id + '_count').html(data.total);
             jQuery('.like_click').attr('href','javascript:unlike(\'' + blog_id + '\',\'' + object_id + '\',\'' + user_id + '\',\'' + object_type + '\',\'' + default_count + '\')');
             jQuery('.like_click span').html('<img src="/wp-content/plugins/assets/images/icons/unlike-icon.png"> Unlike');
             jQuery('.likes').html('You and <a href="#">'  + default_count + ' others</a> like this.');
        }
    });

} 
```

**这`like.php`**

```
<?php
// include wordpress functions
include( $_SERVER['DOCUMENT_ROOT'] . '/wp-load.php');
require_once( $_SERVER['DOCUMENT_ROOT'] . '/wp-admin/includes/plugin.php' );
global $wpdb;
$global_likes = $wpdb->base_prefix . "global_likes";
$global_table = $wpdb->base_prefix . "global_products_table";

$object_id = mysql_real_escape_string($_POST['object_id']);
$user_id = mysql_real_escape_string($_POST['user_id']);
$blog_id = mysql_real_escape_string($_POST['blog_id']);
$object_type = mysql_real_escape_string($_POST['object_type']);
$type = mysql_real_escape_string($_POST['type']);

$check_duplicate = $wpdb->get_row("SELECT object_id FROM ".$global_likes." WHERE object_type = '" .$object_type . "' and object_id = '".$object_id."' and blog_id = '" . $blog_id . "' and user_id = '" . $user_id . "' ");
if( empty($check_duplicate->object_id) && isset($_POST['object_id']) && isset($_POST['user_id']) && isset($_POST['blog_id']) && isset($_POST['object_type']) ) {

 if( $type == "like" ) {

    $wpdb->insert( 
    $global_likes, 
    array( 
        'user_id' => $user_id, 
        'blog_id' => $blog_id, 
        'object_id' => $object_id, 
        'object_type' => $object_type
    )
    );

    $add_like = "UPDATE " . $global_table . " SET likes=likes+1 WHERE products_id = '".$object_id."' and blog_id = '" . $blog_id . "'";
    $wpdb->query($add_like);

 } elseif( $type == "unlike" ) {
    $remove_like = "UPDATE " . $global_table . " SET likes=likes-1 WHERE products_id = '".$object_id."' and blog_id = '" . $blog_id . "'";
    $delete_user_like = "DELETE FROM ".$global_likes." WHERE object_type = '" .$object_type . "' and object_id = '".$object_id."' and blog_id = '" . $blog_id . "' and user_id = '" . $user_id . "'";
    $wpdb->query($remove_like);
    $wpdb->query($delete_user_like);
 }

 $sql = mysql_fetch_assoc(mysql_query("SELECT likes FROM ".$global_table." WHERE products_id = '".$object_id."' and blog_id = '" . $blog_id . "'"));

 echo json_encode(array('total' => $sql[0]['likes']));

} else {
  wp_die('Error!');
}

?> 
```

是否也可以只发布而不返回任何值，以便我可以删除以下脚本`like.php`。

```
 $sql = mysql_fetch_assoc(mysql_query("SELECT likes FROM ".$global_table." WHERE products_id = '".$object_id."' and blog_id = '" . $blog_id . "'"));

 echo json_encode(array('total' => $sql[0]['likes'])); 
```

原因是，我已经有了一个自动获取点赞数的功能。

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T15:26:15.393

您的 ajax 方法中的数据不是 json，但您将类型指定为 json。

编辑以下评论： dataType 用于预期的返回数据，但 data: object 应采用键值对表示法，如下例所示...

```
data: { object_id: object_id, user_id: user_id, type: 'like', blog_id: blog_id, object_type: object_type } 
```

好的，正如一位智者曾经说过的 RTM。事实证明，这两种方法都有效。

从 Jquery 文档...

> data 选项可以包含 key1=value1&key2=value2 形式的查询字符串，或 {key1: 'value1', key2: 'value2'} 形式的映射。如果使用后一种形式，则数据在发送之前使用 jQuery.param() 转换为查询字符串。可以通过将 processData 设置为 false 来规避此处理。如果您希望将 XML 对象发送到服务器，则该处理可能是不可取的；在这种情况下，将 contentType 选项从 application/x-www-form-urlencoded 更改为更合适的 MIME 类型。

这意味着，尽管有赞成票，但这个答案根本无助于解决您的问题，它只是一种语法替代方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T17:57:00.793

如果您不需要脚本的任何输出，只需使用`echo "{}";`然后不对 javascript 中的响应执行任何操作。我在您的代码中看到的唯一错误是`dataType: json`，但据说您已经修复了该错误。

如果您的代码不起作用，请在您的 ajax 调用之后添加此代码以提供调试信息：

```
jQuery.ajax({...}).fail(function(){
    console.log(arguments);
}); 
```

注意：您应该使用提供调试控制台的浏览器来执行此操作，例如带有 firebug 的 google chrome 或 firefox。

如果您检查您的请求并且您得到`500`这意味着您的 PHP 失败了，您需要将您的 php 与 Javascript 分开调试。

如果`console.log(arguments)`说`parseError`，您的 php 正在返回额外的字符，您需要查找/删除正在执行此操作的 echo 语句（它可能不是相同的 .php 文件），或者您可以将 dataType 更改为，`"text"`因为您不在乎是什么反正回来了。

# java - java继承和方法

> ID：13110092
> 
> 赞同：-3
> 
> 时间：2012-10-28T15:21:18.607
> 
> 标签：java, inheritance, methods

***我在尝试根据此要求编译以下代码时遇到问题：***

给定一个现有类 BankAccount，其中包含： 一个构造函数，接受对应于帐户持有人姓名的字符串。一个方法，getBalance，它返回对应于帐户余额的双精度值。一种接受双倍的取款方法，并从账户余额中扣除金额。为子类 CheckingAccount 编写一个类定义，其中包含：一个布尔实例变量，透支。（为支票账户透支允许开出大于当前余额的支票）。一个接受字符串和布尔值的构造函数。String 参数用于调用超类（BankAccount）构造函数，而布尔值用于初始化透支实例变量。一个方法，hasOverdraft，它返回一个布尔值。如果帐户支持透支，hasOverdraft 返回 true。一个方法，clearCheck，它接受一个双精度并返回一个布尔值。clearCheck 将确定（支票的）金额是否可以兑现——如果金额小于账户余额，或者账户允许透支，就会出现这种情况。如果支票可以兑现，则clearCheck返回true，同时调用withdraw方法更新账户余额；否则，clearCheck 返回 false。

***代码：***

```
public class CheckingAccount extends BankAccount {
private boolean overdraft; 

public CheckingAccount(String a, boolean overdraft) {
this.name = super.name;
this.overdraft = overdraft;}

boolean hasOverdraft() {if(overdraft); return true;}

boolean clearCheck(double checkAmount) {if(checkAmount < balance || hasOverdraft() == true); return true && withdraw();}
} 
```

***错误：***

```
CheckingAccount.java:4: error: constructor BankAccount in class BankAccount cannot be applied to given types;
public CheckingAccount(String a, boolean overdraft) {
                                                    ^
  required: String
  found: no arguments
  reason: actual and formal argument lists differ in length
CheckingAccount.java:5: error: name has private access in BankAccount
this.name = super.name;
    ^
CheckingAccount.java:5: error: name has private access in BankAccount
this.name = super.name;
                 ^
CheckingAccount.java:10: error: method withdraw in class BankAccount cannot be applied to given types;
boolean clearCheck(double checkAmount) {if(checkAmount < balance || hasOverdraft() == true); return true && withdraw();} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T15:28:12.280

似乎`BankAccount`没有可见的无参数构造函数。从错误消息来看，它似乎有一个带有一个参数的构造函数： a `String`。

因此，您必须在构造函数中显式调用正确的构造函数`CheckingAccount`。通常这看起来像这样：

```
public CheckingAccount(String a, boolean overdraft) {
    super(a);
    this.overdraft = overdraft;
} 
```

但实际上这取决于`String`应该代表什么，以及`a`应该代表什么（这是一个非常非描述性的参数名称）。

其次，似乎`name`in 的字段`BankAccount`不可见。无论如何，您尝试通过将其分配给它`this.name`没有任何意义，因为`name`它不是已在`CheckingAccount`.

第三，`withdraw()`似乎需要参数，但您没有提供任何参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T15:29:12.040

```
public class BankingAccount {
    protected String name;

    public BankingAccount(String n) { this.name = n; }
}

public class CheckingAccount extends BankingAccount {
    protected boolean overdraft;

    public CheckingAccount(String n, boolean overdraft) {
        super(n);
        this.overdraft = overdraft;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T16:04:52.903

```
class CheckingAccount extends BankAccount {                

CheckingAccount(String name, boolean overdraft) {                    
super(name);                    
this.overdraft = overdraft;                }                

boolean hasOverdraft() {return overdraft;}                

boolean clearCheck(double amount) {
if (getBalance() >= amount || overdraft) {withdraw(amount);return true;}return false;} boolean overdraft;} 
```

# java - 如何隐藏当前的 JPanel 并在 Java 中显示一个带有按钮的新 JPanel？

> ID：13110094
> 
> 赞同：3
> 
> 时间：2012-10-28T15:21:21.373
> 
> 标签：java, swing, jframe, jpanel

不幸的是，我不得不在这个程序中使用多个窗口，而且我认为 CardLayout 不会起作用，因为我不能在不同的布局之间有任何恒定的按钮。所以我试图编写一个按钮来隐藏当前的 JPanel (thePanel) 并显示一个新的 (thePlacebo)。

我正在尝试将 thePanel 隐藏在 ActionListener 中，如下所示：

```
frame.getContentPane().remove(thePanel); 
```

我认为这会起作用，但只要我按下按钮，它就会冻结我的程序。

这是上下文的代码块：

```
public class Reflexology1 extends JFrame{
JButton button1, button2;
JButton movingButton;
JTextArea textArea1;
int buttonAClicked, buttonDClicked;
private long _openTime = 0;
private long _closeTime = 0;
JPanel thePanel = new JPanel();
JPanel thePlacebo = new JPanel();
final JFrame frame = new JFrame("Reflexology");

public static void main(String[] args){
    new Reflexology1();
}

public Reflexology1(){

    frame.setSize(600, 475);
    frame.setLocationRelativeTo(null);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setTitle("Reflexology 1.0");
    frame.setResizable(false);

    button1 = new JButton("Accept");
    button2 = new JButton("Decline");
    movingButton = new JButton("Click Me");

    ListenForAcceptButton lForAButton = new ListenForAcceptButton();
    ListenForDeclineButton lForDButton = new ListenForDeclineButton();
    button1.addActionListener(lForAButton);
    button2.addActionListener(lForDButton);
    //movingButton.addActionListener(lForMButton);

    JTextArea textArea1 = new JTextArea(24, 50);

    textArea1.setText("Tracking Events\n");
    textArea1.setLineWrap(true);
    textArea1.setWrapStyleWord(true);
    textArea1.setSize(15, 50);

    FileReader reader = null;
    try {
        reader = new FileReader("EULA.txt");
        textArea1.read(reader, "EULA.txt");
    } catch (IOException exception) {
        System.err.println("Problem loading file");
        exception.printStackTrace();
    } finally {
        if (reader != null) {
            try {
                reader.close();
            } catch (IOException exception) {
                System.err.println("Error closing reader");
                exception.printStackTrace();
            }
        }
    }

    JScrollPane scrollBar1 = new JScrollPane(textArea1, JScrollPane.VERTICAL_SCROLLBAR_AS_NEEDED, JScrollPane.HORIZONTAL_SCROLLBAR_NEVER);
    AdjustmentListener listener = new MyAdjustmentListener();

    thePanel.add(scrollBar1);
    thePanel.add(button1);
    thePanel.add(button2);
    thePlacebo.add(movingButton);

    frame.add(thePanel);

    ListenForWindow lForWindow = new ListenForWindow();
    frame.addWindowListener(lForWindow);
    frame.setVisible(true);

}
// Implement listeners

private class ListenForAcceptButton implements ActionListener{
    public void actionPerformed(ActionEvent e){
        if (e.getSource() == button1){
            Calendar ClCDateTime = Calendar.getInstance();
            System.out.println(ClCDateTime.getTimeInMillis() - _openTime);
            _closeTime = ClCDateTime.getTimeInMillis() - _openTime;
            frame.getContentPane().remove(thePanel);
        }
    }
} 
```

有人知道我可能做错了什么吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-28T15:49:19.197

从容器中移除组件后，它进入`invalidate`状态。要将其恢复到`valid`您必须这样做`revalidate`的状态`repaint`。在您的情况下，您是直接添加/删除组件，`JFrame`因此取决于 Java 版本，您可以这样做：

```
frame.revalidate(); // For Java 1.7 or above
frame.getContentPane().validate(); // For Java 1.6 or below
frame.repaint(); 
```

这是一个可以帮助您的工作示例：

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class Assignment
{
    private JFrame frame;
    private JPanel firstPanel;
    private JPanel secondPanel;

    private JButton forwardButton;
    private JButton backButton;

    private void displayGUI()
    {
        frame = new JFrame("Assignment");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        firstPanel = new JPanel();
        firstPanel.setOpaque(true);
        firstPanel.setBackground(Color.BLUE);

        secondPanel = new JPanel();
        secondPanel.setOpaque(true);
        secondPanel.setBackground(Color.RED);

        forwardButton = new JButton("Forward");
        forwardButton.addActionListener(new ActionListener()
        {
            @Override
            public void actionPerformed(ActionEvent ae)
            {
                frame.remove(firstPanel);
                frame.add(secondPanel);
                frame.revalidate(); // For Java 1.7 or above.
                // frame.getContentPane().validate(); // For Java 1.6 or below.
                frame.repaint();
            }
        });

        backButton = new JButton("Back");
        backButton.addActionListener(new ActionListener()
        {
            @Override
            public void actionPerformed(ActionEvent ae)
            {
                frame.remove(secondPanel);
                frame.add(firstPanel);
                frame.revalidate(); // For Java 1.7 or above.
                // frame.getContentPane().validate(); // For Java 1.6 or below.
                frame.repaint();
            }
        });

        firstPanel.add(forwardButton);
        secondPanel.add(backButton);

        frame.add(firstPanel);
        frame.setSize(300, 300);
        frame.setLocationByPlatform(true);
        frame.setVisible(true);
    }

    public static void main(String... args)
    {
        SwingUtilities.invokeLater(new Runnable()
        {
            @Override
            public void run()
            {
                new Assignment().displayGUI();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-28T15:24:33.353

1.  正确的方法可能是（仅）使用[CardLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html)

2.  否则必须从容器中删除[JPanel](http://docs.oracle.com/javase/tutorial/uiswing/components/panel.html)并调用（作为最后一行代码，在容器的所有更改完成后只调用一次）

.

```
myJPanelsContainer#revalidate(); // in Java6 for JFrame validate()
myJPanelsContainer#repaint(); 
```

# sql-server-2008 - 从 SQL Server 2008 中的存储过程返回 varchar(max)

> ID：13110102
> 
> 赞同：-1
> 
> 时间：2012-10-28T15:23:03.250
> 
> 标签：sql-server-2008, stored-procedures

我想`varchar(max)`从 SQL Server 2008 中的存储过程返回一个。

所以我尝试了：

```
alter proc SpSignup(
    @username varchar(max),
    @email varchar(max),
    @password varchar(max),
    @warning varchar(max) output)
as
   if exists(select email from [login] where email=@email)
      return 'email already exists';

   insert into [login](username, email, password) 
   values(@username, @email, @password) 
```

如果电子邮件存在于表中，我想返回一个`varchar`值 ( `'email already exists'`)，并且不想提供任何`@warning`参数。

但它表明`@warning para is not supplying`在执行这个过程之后

> *消息 201，级别 16，状态 4，过程 SpSignup，第 0 行*
> *过程或函数“SpSignup”需要未提供的参数“@warning”。*

而且它也没有显示输出（`'email already exists'`）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T15:25:29.433

您忘记在`@username`程序中提供参数

```
declare @warning varchar(max)

exec SpSignup
    @username = 'Bill', 
    @email = 'Bill@gmail.com',
    @password = '12345',
    @warning = @warning output

select @warning 
```

**更新**：不可能`varchar`从过程中返回变量，您可以将其作为`output`参数传递，或者您可以只编码`select 'email already exists'`或`print 'email already exists'`

```
alter proc SpSignup
(
    @username varchar(max),
    @email varchar(max),
    @password varchar(max)
)
as
begin
    if exists(select email from [login] where email=@email)
    begin
        select 'email already exists'
        print 'email already exists'
        return
    end

    insert into [login](username, email, password) values(@username, @email, @password)
end 
```

# .net - 编译有错误的 .net 应用程序

> ID：13110106
> 
> 赞同：2
> 
> 时间：2012-10-28T15:23:32.213
> 
> 标签：.net, vb.net, compilation, compiler-errors, decompiling

我用 .NET Reflector 反编译了一个应用程序，并想进行一些更改并再次编译它......但是当我尝试编译它时，我得到了一堆错误，例如：

```
Error   14  'RaiseEvent' definition missing for event 'AsyncReturn'.
Error   55  End of statement expected.
Error   58  Type 'WksStatus' is not defined.
Error   88  Character is not valid.
Error   102 Maximum number of errors has been exceeded. 
```

有没有办法：

1.  反编译它，这样就没有错误，或者
2.  即使有错误也要编译它。

非常感谢您的帮助！并随时提出问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-28T15:50:05.650

反编译代码不是一门精确的科学。反编译器使用一些算法对 MSIL 代码进行逆向工程并将其转换为您可以理解的 .net 语言。
更重要的是，您使用 .net 语言编写了大量代码，这些代码被预处理或编译成不同的代码片段。这些有时被称为“语法糖”（这方面的例子包括：“收益回报”、“锁定”、扩展方法、使用等）

那里有很多反编译器，但它们并不完美！
您甚至可以尝试在两个不同的反编译器中打开相同的 dll/可执行文件，并且通常您会看到对相同 MSIL 的不同解释。

如果您正在查看的代码是开源的，您应该尝试获取**真正的**代码！
如果不是，那么您不应该**破解**它，而是报告某种错误！
如果以上都不是，那么...您只需要自己进行所需的小修复，然后重新编译代码，但我向您保证，一些反编译器可能会导致代码错误，并且不会由于他们的工作方式，他们的工作方式与以前**完全一样。**

# objective-c - 在 NSRunningApplication 中检索有关正在运行的应用程序的单个窗口的信息

> ID：13110110
> 
> 赞同：1
> 
> 时间：2012-10-28T15:24:25.997
> 
> 标签：objective-c, macos, cocoa, window, nsrunningapplication

我正在编写一个 iPad 应用程序，它应该能够操作 Mac 应用程序的单个窗口，例如。关闭它们，最小化它们，等等。我让所有网络工作正常，但我无法从我的 mac 检索信息。

我可以使用 NSWorkspace 和 NSRunningApplication 类获取应用程序信息。但是我如何获得有关应用程序打开的窗口的特定信息。我如何找出我的 finder 或 firefox 打开了多少个窗口，以及如何分别操作它们。我还没有找到从 API 中的应用程序获取有关特定窗口的信息的方法。

如果有人对如何获取这些信息有一些建议，我将非常感激。在此先感谢，达米尔

# iphone - 单击 TableView 会将您带到另一个视图

> ID：13110116
> 
> 赞同：0
> 
> 时间：2012-10-28T15:25:16.713
> 
> 标签：iphone, ios, uitableview

我是 iPhone 开发的新手。我已经创建了一个`UITableView`. 我已经把所有东西都连接起来了，包括`delegate`and `datasource`。`UITableViewCellAccessoryDetailClosureButton`但是，我不想通过使用添加详细视图附件，而是单击`UITableViewCell`，它应该会导致另一个视图，其中包含有关`UITableViewCell`. 我的视图控制器如下所示：

视图控制器.h

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController<UITableViewDataSource,UITableViewDelegate>{
    NSArray *tableItems;
    NSArray *images;
}

@property (nonatomic,retain) NSArray *tableItems;
@property (nonatomic,retain) NSArray *images;

@end 
```

视图控制器.m

```
#import "ViewController.h"
#import <QuartzCore/QuartzCore.h>
@interface ViewController ()

@end

@implementation ViewController
@synthesize tableItems,images;
- (void)viewDidLoad
{
    [super viewDidLoad];
    tableItems = [[NSArray alloc] initWithObjects:@"Item1",@"Item2",@"Item3",nil];
    images = [[NSArray alloc] initWithObjects:[UIImage imageNamed:@"clock.png"],[UIImage imageNamed:@"eye.png"],[UIImage imageNamed:@"target.png"],nil];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{
    return tableItems.count;
}
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{

    //Step 1:Check whether if we can reuse a cell
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"cell"];

    //If there are no new cells to reuse,create a new one
    if(cell ==  nil)
    { 
        cell = [[UITableViewCell alloc] initWithStyle:(UITableViewCellStyleDefault) reuseIdentifier:@"cell"];
        UIView *v = [[UIView alloc] init];
        v.backgroundColor = [UIColor redColor];
        cell.selectedBackgroundView = v;
        //changing the radius of the corners
        //cell.layer.cornerRadius = 10;

    }

    //Set the image in the row
    cell.imageView.image = [images objectAtIndex:indexPath.row];

    //Step 3: Set the cell text content
    cell.textLabel.text = [tableItems objectAtIndex:indexPath.row];

    //Step 4: Return the row
    return cell;

}

- (void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath{
    cell.backgroundColor = [ UIColor greenColor];
}
@end 
```

需要一些指导..谢谢..如果这是一个愚蠢的问题，请原谅我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T15:53:55.157

你应该在你的 UIViewController 中实现以下方法：

```
 - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
```

**[例子]**

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
     ExampleDataItem *dataItem = [_dataSource objectAtIndex:[indexPath row]];

     DetailViewController *detailViewController = [[DetailViewController alloc] initWithNibName:@"DetailViewController" bundle:nil];
     detailViewController.dataSource = dataItem;

    [self.navigationController pushViewController:detailViewController animated:YES];
} 
```

希望能帮助到你 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T17:20:44.523

实施 UITableViewDelegate 方法`- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath` 在方法中，只需将您的详细信息`UIView`（假设您全局有引用并在 viewDidLoad: 方法中分配此视图）到。根据`self.view`所选内容更新详细视图的内容。您`indexPath`可能还希望有一个“完成" 详细视图上的按钮，可用于返回您的表格视图。

如果您的应用程序使用`UINavigationViewController`，请使用 detailViewController （类型`UIViewController`）而不是`UIView`使用以下命令将其推送到导航控制器：

```
[self.navigationController pushViewController:detailedViewController animated:YES]; 
```

# iphone - prepareForSegue 和 popViewController 的兼容性

> ID：13110123
> 
> 赞同：2
> 
> 时间：2012-10-28T15:25:44.837
> 
> 标签：iphone, ios, xcode, uistoryboardsegue

## 问题

我正在开发一个`iOS`应用程序，我有 3 个连续`ViewControllers`：

**`TableViewController`--> `DetailViewController`-->`ImageViewController`**

我用一个按钮（只需控制拖动`Storyboard`）执行 de forward Segue 并返回我有一个自定义的后退按钮

```
[self.navigationController popViewControllerAnimated:YES]; 
```

要转发数据，我使用

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    [segue.destinationViewController someFunction];
} 
```

要将数据发送给`ViewController`我可以在 中使用`prepareForSegue`的父级`DetailViewController`，但它在 中不起作用，`ImageViewController`我必须使用`Notifications`.

**如果我`prepareForSegue`用来发送数据可以`popViewControllerAnimated`吗？**

**我应该在这两种情况下都使用通知吗？**

## 一些代码

我有`DetailViewController`一个按钮，它执行 Segue 到 ImageViewController （只是控制拖动`Storyboard`）和一个后退按钮：

```
- (IBAction)backAction:(id)sender {
     [self.navigationController popViewControllerAnimated:YES];
} 
```

然后是函数：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    if([segue.identifier isEqualToString:@"forwardSegue"]) {
        [segue.destinationViewController someFuntionToImageViewController];
    } else {
        [segue.destinationViewController someFuntionToParentViewController];
    }
} 
```

我注意到我无法为`popViewController`操作分配 segue.identifier。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-28T17:06:13.967

Apple 推荐以下方式在由 segues 导航的视图控制器之间传递数据：

**向前传递数据**：

您在目标 vc 上声明一个属性并在方法中设置其值`prepareForSegue`。（你这样做的方式很好）

```
@interface SomeViewController

@property (strong, nonatomic) VeryImportantData *data;
//...
@end

@implementation SourceVC

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    VeryImportantData *theData = ...;
    segue.destinationViewController.data = theData;
} 
```

**传回数据**

您声明一个委托协议。这可能看起来像这样：

```
@protocol SomeViewControllerDelegate
- (void)someViewController:(SomeViewController *) someVC didFinishWithData:(SomeData *) data;
@end 
```

您的目标 vc 提供了一个委托属性：

```
@property (weak, nonatomic) id<SomeViewControllerDelegate> delegate; 
```

一旦准备好关闭，目标 vc 就会调用它的 delegates 方法：

```
@implementation SomeViewController

- (void) close
{
    [delegate someViewController:self didFinishWithData:self.data];
} 
```

并且您的源控制器实现协议并将自己设置为`prepareForSegue`方法中目标 vc 的委托。

```
@implementation SourceVC

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    segue.destinationViewController.delegate = self;
}

//...
- (void)someViewController:(SomeViewController *) someVC didFinishWithData:(SomeData *) data
{
    self.receivedData = data;
    [self.navigationController popViewControllerAnimated:YES];
} 
```

# c# - 将数据网格中的更改保存到数据集

> ID：13110124
> 
> 赞同：1
> 
> 时间：2012-10-28T15:25:46.127
> 
> 标签：c#

我从这样的数据库中获取数据（数据集 - ShoppingMallDataSet（smds））。

```
private void Clients()
    {
        using (ShoppingMallDataSetTableAdapters.TClientTableAdapter tcta =
               new ShoppingMallDataSetTableAdapters.TClientTableAdapter() { Connection = new SqlConnection(connection_string) })
        {
            tcta.Fill(smds.TClient);
            for (int i = 0; i < smds.TClient.Columns.Count; i++)
                if (smds.TClient.Columns[i].ColumnName.Substring(0, 2).Equals("id"))
                    smds.TClient.Columns[i].ReadOnly = false;
            bs.DataSource = smds.TClient;
        }
    } 
```

其中 bs - BindingSource。对于 datagrid 我将绑定源设置为 datasource `rgv.DataSource = bs;`。当我进行一些更改时，我想将其保存到数据库中。所以我创建了一个按钮和按钮点击事件

```
void rb1_Click(object sender, EventArgs e)
    {
        smds.AcceptChanges();
    } 
```

但它不会保存更改。我需要添加或更改什么？

# node.js - 使用 compass 命令行编译单个 .scss 文件

> ID：13110125
> 
> 赞同：0
> 
> 时间：2012-10-28T15:25:46.923
> 
> 标签：node.js, sass, compass-sass, gruntjs

有没有办法通过 compass 命令行实用程序来编译单独的文件？

我问的原因是我目前有一个为目录运行 compass compile 命令的 grunt 任务，但是当项目变大并且当一个文件更改时它会尝试编译十几个文件时，这可能会成为一个问题，所以我想看看是否有办法做类似 compass compile app/css/style.scss:app/css/style.css 的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T15:45:01.133

我想我需要将 project_path 添加到我的 config.rb 文件中。

# c++ - 将向量初始化为零 C++/C++11

> ID：13110130
> 
> 赞同：152
> 
> 时间：2012-10-28T15:26:18.137
> 
> 标签：c++, c++11

我知道在 C++11 中，他们添加了将变量初始化为零的功能

```
double number = {}; // number = 0
int data{};  // data = 0 
```

是否有类似的方法将`std::vector`固定长度的 a 初始化为全零？

* * *

## 回答 #1

> 赞同：289
> 
> 时间：2012-10-28T15:28:11.510

您不需要初始化列表：

```
std::vector<int> vector1(length, 0);
std::vector<double> vector2(length, 0.0); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2020-05-03T19:08:31.017

可以通过这种方式初始化具有结构、类或联合的向量

```
std::vector<SomeStruct> someStructVect(length);
memset(someStructVect.data(), 0, sizeof(SomeStruct)*length); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-22T06:58:21.930

使用最新版本的 c++，您可以使用`std::fill`.

*我注意到有人提到它作为评论。但应该是一个答案，并鼓励使用专家提到的标准库算法，经过很好的测试和证明。*

```
 std::vector<int> vecOfInts;
    vecOfInts.resize(10);

    std::fill(vecOfInts.begin(), vecOfInts.end(), 0);

    for (auto const& intVal : vecOfInts)
    {
        std::cout << intVal << " ";
    } 
```

# c# - 如何通过其 ID 向 signalR 特定的 PersistentConnection 发送消息？（使用 asp.net mvc4 web-api）

> ID：13110141
> 
> 赞同：3
> 
> 时间：2012-10-28T15:27:31.537
> 
> 标签：c#, javascript, asp.net-mvc-4, asp.net-web-api, signalr

我使用`Echo`派生自 的类`PersistentConnection`，并且我想向某个连接发送消息：

```
var client = GlobalHost.ConnectionManager.GetConnectionContext<Echo>();
client.Connection.Broadcast(msg); 
```

但我想将它发送到特定的连接 ID。我是否必须为每个连接创建一个组或开始使用集线器，或者有一种更简单的方法来按 ID 选择连接，例如：

```
GetConnectionById(id).Send(msg); 
```

?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T16:46:42.343

消息可以发送到特定的连接 ID，但语法与您在问题中指定的不同。以下代码段显示了语法：

```
return Connection.Send(connectionId, Message); 
```

我的答案来源：[Github 上的 SignalR wiki](https://github.com/SignalR/SignalR/wiki/PersistentConnection)

我想，您知道 SignalR 1 Alpha 已发布。如果您使用此版本，则可以通过其 ID 向特定客户端发送消息。以下片段显示了它：

```
var connection = GlobalHost.ConnectionManager.GetConnectionContext<Echo>().Connection;
connection.Send(((Connection)connection).Identity, "Message to be sent"); 
```

在这里，`((Connection)connection).Identity`给出请求客户端的连接 ID。

# html - 在底部的双边框之间添加间距 和 元素

> ID：13110142
> 
> 赞同：5
> 
> 时间：2012-10-28T15:27:32.863
> 
> 标签：html, css

我想在我的`<ul>`列表底部有两条 1px（或 2px）的分隔线。

这就是我到目前为止所拥有的。

# HTML

```
<ul>
    <li>here's one </li>
    <li>here's another one</li>
    <li>here's the last one</li>
</ul>​ 
```

# CSS

```
ul {
    border-bottom: 1px solid black;
}
ul li {
    border-top: 1px solid red;
}
ul li:last-child {
    border-bottom: 1px solid red;
}
​ 
```

# [在 jsfiddle 上看到它。](http://jsfiddle.net/tnevg/2/)

如何在底部边框（红色和黑色）之间获得一些间距？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T15:29:47.407

一个简单的解决方案是在 UL 的底部添加填充：

```
ul {
    border-bottom: 1px solid black;
    padding-bottom: 10px; /* your desired spacing */
} 
```

您在此处更新的演示：http: [//jsfiddle.net/tnevg/4/](http://jsfiddle.net/tnevg/4/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T15:29:49.980

只需添加`padding-bottom`到您的`ul`

```
ul {
    border-bottom: 1px solid black;
    padding-bottom:1px;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-28T15:29:57.123

试试这个代码在最后一个红线后添加 1 px：

[演示](http://jsfiddle.net/tnevg/3/)

```
ul {
    border-bottom: 1px solid black;
    padding-bottom:1px; /*added this line*/
}
ul li {
    border-top: 1px solid red;
}
ul li:last-child {
    border-bottom: 1px solid red;

} 
```

# java - REST 和复杂的搜索查询

> ID：13110147
> 
> 赞同：15
> 
> 时间：2012-10-28T15:28:03.350
> 
> 标签：java, rest, search

我正在寻找一种在 REST api 中为搜索查询建模的强大方法。

在我的 api 中，您可以使用查询参数在资源的 URI 中指定搜索条件。

例如：

`/cars?search=color,blue;AND;doors,4 --> Returns a list of blue cars with 4 doors`

`/cars?search=color,blue;OR;doors,4 --> Returns a list of cars that are blue or have 4 doors`

在服务器端，搜索字符串被映射到所需的底层技术。根据其余资源，这可以是 SQL 查询、Hibernate Criteria api、另一个 Web 服务调用，......

这 2 个示例足够简单，可以支持，但我还需要更复杂的搜索功能，例如子字符串搜索、日期之前/之后搜索、NOT、...

这是我认为的普遍问题。是否有我可以使用的库（或模式）：

*   **将指定为字符串的搜索查询映射到通用 Criteria 模型。**搜索格式不必与我上面列出的相同。
*   允许我**将该 Criteria 模型映射到**我需要使用的任何技术。
*   为 Hibernate/JPA/SQL 提供映射支持，但这是一个奖励；）

亲切的问候，

格伦

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-29T11:26:18.527

每当我遇到这些问题时，我都会问自己“如果我正在创建一个传统的网页，我将如何向用户展示这个”？简单的答案是我不会在一个页面中呈现这些选项。界面过于复杂；但是我可以做的是提供一个界面，允许用户在多个页面上构建越来越复杂的查询，这就是我认为在这种情况下应该采用的解决方案。

[HATEOAS 约束](http://roy.gbiv.com/untangled/2008/rest-apis-must-be-hypertext-driven)规定我们必须在响应中包含超媒体控件（链接和表单）。所以假设我们有一个`/cars`带有搜索选项的分页汽车集合，这样当你得到`/cars`它时会返回类似（顺便说一句，我在这里使用自定义媒体类型，但表单和链接应该非常明显。让我知道是否不是）：

```
<cars href="/cars">
    <car href="/cars/alpha">...</car>
    <car href="/cars/beta">...</car>
    <car href="/cars/gamma">...</car>
    <car href="/cars/delta">...</car>
    ...
    <next href="/cars?page=2"/>
    <search-color href="/cars" method="GET">
        <color type="string" cardinality="required"/>
        <color-match type="enumeration" cardinality="optional" default="substring">
            <option name="exact"/>
            <option name="substring"/>
            <option name="regexp"/>
        </color-match>
        <color-logic type="enumeration" cardinality="optional" default="and">
            <option name="and"/>
            <option name="or"/>
            <option name="not"/>
        </color-logic>
    </search>
    <search-doors href="/cars" method="GET">
        <doors type="integer" cardinality="required"/>
        <door-logic type="enumeration" cardinality="required" default="and">
            <option name="and"/>
            <option name="or"/>
            <option name="not"/>
        </door-logic>
    </search>
</cars> 
```

所以只要说我们搜索白色汽车，我们会得到`/cars?color=white`，我们可能会得到类似的东西：

```
<cars href="/cars?color=white">
    <car href="/cars/beta">...</car>
    <car href="/cars/delta">...</car>
    ...
    <next href="/cars?color=white&page=2"/>
    <search-color href="/cars?color=white" method="GET">
        <color2 type="string" cardinality="required"/>
        <color2-match type="enumeration" cardinality="optional" default="substring">
            <option name="exact"/>
            <option name="substring"/>
            <option name="regexp"/>
        </color2-match>
        <color2-logic type="enumeration" cardinality="optional" default="and">
            <option name="and"/>
            <option name="or"/>
            <option name="not"/>
        </color2-logic>
    </search>
    <search-doors href="/cars?color=white" method="GET">
        <doors type="integer" cardinality="required"/>
        <door-logic type="enumeration" cardinality="required" default="and">
            <option name="and"/>
            <option name="or"/>
            <option name="not"/>
        </door-logic>
    </search>
</cars> 
```

这个结果然后让我们细化我们的查询。所以只要说我们想要白色汽车而不是“灰白色”汽车，我们就可以 GET '/cars?color=white&color2=off-white&color2-logic=not'，它可能会返回

```
<cars href="/cars?color=white&color2=off-white&color2-logic=not">
    <car href="/cars/beta">...</car>
    <car href="/cars/delta">...</car>
    ...
    <next href="/cars?color=white&color2=off-white&color2-logic=not&page=2"/>
    <search-color href="/cars?color=white&color2=off-white&color2-logic=not" method="GET">
        <color3 type="string" cardinality="required"/>
        <color3-match type="enumeration" cardinality="optional" default="substring">
            <option name="exact"/>
            <option name="substring"/>
            <option name="regexp"/>
        </color3-match>
        <color3-logic type="enumeration" cardinality="optional" default="and">
            <option name="and"/>
            <option name="or"/>
            <option name="not"/>
        </color3-logic>
    </search>
    <search-doors href="/cars?color=white&color2=off-white&color2-logic=not" method="GET">
        <doors type="integer" cardinality="required"/>
        <door-logic type="enumeration" cardinality="required" default="and">
            <option name="and"/>
            <option name="or"/>
            <option name="not"/>
        </door-logic>
    </search>
</cars> 
```

然后我们可以进一步细化我们的查询，但重点是，在此过程中的每一步，超媒体控件都会告诉我们什么是可能的。

现在，如果我们考虑汽车的搜索选项，颜色、门、品牌和型号并不是无限的，因此我们可以通过提供枚举使选项更加明确。例如

```
<cars href="/cars">
    ...
    <search-doors href="/cars" method="GET">
        <doors type="enumeration" cardinality="required">
            <option name="2"/>
            <option name="3"/>
            <option name="4"/>
            <option name="5"/>
        </doors>
        <door-logic type="enumeration" cardinality="required" default="and">
            <option name="and"/>
            <option name="or"/>
            <option name="not"/>
        </door-logic>
    </search>
</cars> 
```

然而，我们唯一拥有的白色汽车可能是 2 门和 4 门，在这种情况下，GETing`/cars?color=white`可能会给我们

```
<cars href="/cars?color=white">
    ...
    <search-doors href="/cars?color=white" method="GET">
        <doors type="enumeration" cardinality="required">
            <option name="2"/>
            <option name="4"/>
        </doors>
        <door-logic type="enumeration" cardinality="required" default="and">
            <option name="and"/>
            <option name="or"/>
            <option name="not"/>
        </door-logic>
    </search>
</cars> 
```

同样，当我们细化颜色时，我们可能会发现它们只是几个选项，在这种情况下，我们可以从提供字符串搜索切换到提供枚举搜索。例如，GETing`/cars?color=white`可能会给我们

```
<cars href="/cars?color=white">
    ...
    <search-color href="/cars?color=white" method="GET">
        <color2 type="enumeration" cardinality="required">
            <option name="white"/>
            <option name="off-white"/>
            <option name="blue with white racing stripes"/>
        </color2>
        <color2-logic type="enumeration" cardinality="optional" default="and">
            <option name="and"/>
            <option name="or"/>
            <option name="not"/>
        </color2-logic>
    </search>
    ...
</cars> 
```

您可以对其他搜索类别执行相同操作。例如，最初您不想枚举所有品牌，因此您将提供某种文本搜索。一旦对集合进行了细化，并且只有几个模型可供选择，那么提供枚举是有意义的。相同的逻辑适用于其他集合。例如，您不想枚举世界上所有的城市，但是一旦您将区域细化到 10 个左右的城市，那么枚举它们会很有帮助。

有图书馆可以为你做这件事吗？据我所知没有。我见过的大多数甚至不支持超媒体控件（即，[您必须自己添加链接和表单](http://codebetter.com/glennblock/2012/01/08/hypermedia-and-web-api-design-brain-dump-and-samples/)）。有没有可以使用的模式？是的，我相信以上是解决此类问题的有效模式。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-28T15:53:59.763

嗯...这是一个棘手的领域。没有针对您的问题量身定制的框架。即使@p0wl 提到的 ODATA 对字段映射到域模型的方式也有一定的限制。一点之后就变得奇怪了。

解决此问题的最简单方法是将查询作为字符串接受，然后使用 AST 或您想要的任何内容针对特定领域的语言进行验证。这使您可以灵活地接受查询，同时仍然验证它的正确性。您失去的是通过 URL 以更有意义的方式描述查询的能力。

看看Restful recipes 食谱的[第 8 章。](http://books.google.co.in/books?id=LDuzpQlVuG4C&pg=PA137&source=gbs_toc_r&cad=4#v=onepage&q&f=false)它突出了我提出的解决方案之一，还推荐了其他方法。根据客户所需的灵活性与查询的表达能力选择一种。你可以在某个地方取得平衡。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-28T20:05:13.733

@格伦V

我不确定是否有与此直接相关的模式/规则，如果这是一个常见问题（我的意思是查询字符串中的逻辑运算符），但在设计这样的东西时我会问自己以下问题：

*   客户将如何构建此类查询？

问题是 URI（作为一个整体，包括查询字符串部分）必须完全由服务提供者控制，并且客户端不能直接耦合到特定于您的问题域的 URI 构造逻辑。

客户端使用 URI 和构造它们的方式有多种：

*   客户端可以通过“链接：<...>”标头或实体主体（如原子或 HTML 链接或类似的东西）跟踪包含在 HTTP 标头中的链接
*   客户端可以通过媒体类型或其他规范定义的规则构造 URI。

引导式 URI 构建过程的几种众所周知的方法：

*   HTML GET 表单，其中表单字段根据[RFC3986](https://www.rfc-editor.org/rfc/rfc3986)编码并附加到表单的操作属性值中提供的 URI（媒体类型引导）；
*   URI 模板（相当广泛但值得一读，规范提供了非常有趣的功能）[RFC6570](https://www.rfc-editor.org/rfc/rfc6570)
*   [打开搜索查询（媒体类型引导）](http://www.opensearch.org/Specifications/OpenSearch/1.1#Substitution_rules)

根据以上信息，您可以选择现有方法或设计您自己的方法，但请记住简单的规则，即服务必须协调客户端如何构造查询（即定义您自己的规范、自定义媒体类型或扩展现有的）。

另一件事是如何将 URI 映射到底层实现，就 REST 而言有两件非常重要的事情：

*   **连接器**- 包括 HTTP + URI 规范，实际上只有连接器对客户端很重要。
*   **组件**- 这是底层实现，除了您之外没有人关心。这部分需要对客户端完全隐藏，您可以在此处选择任何绑定方法，没有人可以告诉您确切的方式，这完全取决于特定要求。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-28T15:42:10.110

您是否搜索像 ODATA ( [Link](http://www.odata.org/) ) 这样的库？

这将解决您的查询解析问题，您可以将查询转发到您选择的数据库。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-25T00:15:07.803

如前所述，仍然没有通用的解决方案来做到这一点。可能，最好的选择（至少是我发现的最好的）是 Spring DATA REST（[http://static.springsource.org/spring-data/rest/docs/1.1.0.M1/reference/htmlsingle/](http://static.springsource.org/spring-data/rest/docs/1.1.0.M1/reference/htmlsingle/)）。使用 CrudRepository，您可以获得 findOne、findAll 等方法。如果您扩展它，您可以添加自己的通用映射。例如，我们所做的是将其扩展为具有通用查询选项，例如：customer?country=notArgentina，以获取不属于阿根廷的客户。或者，例如：customer?country=like( *Island* ) 以获取所有具有“Island”之类的国家的客户（以 SQL 方式）。希望能帮助到你。

# button - 从 15 Squares 游戏中的每个动态创建的按钮获取文本（行和列的自定义输入）

> ID：13110154
> 
> 赞同：1
> 
> 时间：2012-10-28T15:28:54.897
> 
> 标签：button, dynamic, text

我想知道如何**从动态创建的按钮**中获取 x 个按钮的文本。我正在尝试创建一个保存文件

x 行 x 列 0 1 3 2 4 5

以**垂直顺序，每行 1 个数字**，所以当我加载文件时，它将打开**相同数量的行、列，然后按该顺序放回游戏。**

我遇到的**问题是每次保存时，行和列都很好，但是按钮编号虽然数量正确，但****始终是最后一个按钮的编号。**

示例：3 3 4 4 4 4 4 4 4 4 4

这是我认为我需要更改某些内容的代码。

```
 private void randomizeButtons(Button btnRandomized, int temporaryNumber)
    {
        if (totalSquares[0] == 0)
        {
            totalSquares[0] = temporaryNumber;
            btnRandomized.Text = temporaryNumber.ToString();
        }
        else
        {
            int k = 0;
            while (k < totalSquares.Length)
            {
                if (buttonCount == 1)
                {
                    break;
                }
                else if (totalSquares[k] == temporaryNumber)
                {
                    temporaryNumber = random.Next(1, totalSquares.Length);
                    k = 0;

                    continue;
                }
                k++;
            }

            if (k == totalSquares.Length)
            {
                for (int m = 0; m < totalSquares.Length; m++)
                {
                    if (totalSquares[m] == 0)
                    {
                        totalSquares[m] = temporaryNumber;
                        btnRandomized.Text = temporaryNumber.ToString();
                        buttonNumber = int.Parse(btnRandomized.Text);
                        buttonText = buttonNumber.ToString();

                        break;
                    }
                }
            } 
```

这是doSave方法

```
private void doSave(string fileName)
    {
        StreamWriter writer = new StreamWriter(fileName);

        writer.WriteLine(numberOfRows);
        writer.WriteLine(numberOfColumns);
        for (int lines = 0; lines < btnArray.Length; lines++)
        {
            writer.WriteLine(buttonText);
        }
        writer.Close();

    } 
```

# objective-c - 背景托管对象上下文交错 UI 动画

> ID：13110155
> 
> 赞同：12
> 
> 时间：2012-10-28T15:28:57.890
> 
> 标签：objective-c, ios, core-data, user-interface, nsmanagedobjectcontext

我已经解决了几个星期的问题。每当我保存我的 Core Data 托管对象上下文时，它都会影响 UI 性能。我已经尽我所能，正在寻求一些帮助。

# 情况

我的应用程序使用两个`NSManagedObjectContext`实例。一个属于应用程序委托，并附加了一个持久存储协调器。另一个是主 MOC 的子对象，属于一个`Class`对象，称为`PhotoFetcher`. 它使用`NSPrivateQueueConcurrencyType`因此在此 MOC 上执行的所有操作都在后台队列中进行。

我们的应用程序从我们的 API 下载代表照片数据的 JSON 数据。为了从我们的 API 中检索数据，需要执行以下一系列步骤：

1.  构造一个`NSURLRequest`对象，使用`NSURLConnectionDataDelegate`协议构造请求返回的数据，或者处理错误。
2.  JSON 数据下载完成后，在辅助 MOC 的队列上执行以下操作：
    1.  `NSJSONSerialization`使用基础类实例解析 JSON 。
    2.  迭代解析的数据，根据需要在我的后台上下文中插入或更新实体。通常，这会产生大约 300 个新的或更新的实体。
    3.  保存背景上下文。这会将我的更改传播到主 MOC。
    4.  在主 MOC 上执行一个块以保存*它的*上下文。这是为了让我们的数据持久化到磁盘，一个`SQLite`存储。最后，对委托进行回调，通知他们响应已完全插入到核心数据存储中。

保存背景 MOC 的代码如下所示：

```
[AppDelegate.managedObjectContext performBlock:^{
    [AppDelegate saveContext]; //A standard save: call to the main MOC
}]; 
```

当主对象上下文保存时，它还保存了自上次保存主对象上下文以来已下载的相当数量的 JPEG。目前，在 iPhone 4 上，我们以 70% 的压缩率下载 15 个 200x200 JPEG，或总共大约 2MB 的数据。

# 问题

这很有效，而且效果很好。我的问题是，一旦后台上下文保存，`NSFetchedResultsController`在我的视图控制器中运行就会获取传播到主 MOC 的更改。`PSTCollectionView`它在我们的 .的开源克隆中插入新的单元格`UICollectionView`。在插入新单元格时，主上下文会保存这些更改并将其写入磁盘。在运行 iOS 5.1 的 iPhone 4 上，这可能需要 250-350 毫秒。

在这三分之一秒的时间里，应用程序完全没有响应。保存之前正在进行的动画将暂停，并且在保存完成之前不会将新的用户事件发送到主运行循环。

我使用 Time Profiler 在 Instruments 中运行我们的应用程序，以确定是什么阻塞了我们的主线程。不幸的是，结果相当不透明。这是我从 Instruments 获得的最重的堆栈跟踪。

![Instruments 最重的堆栈跟踪](../Images/e7beef6f4e9e1e638b44e20523fa02db.png)

它*似乎*正在将更新保存到持久存储，但我不能确定。所以我完全删除了所有调用，`saveContext`这样 MOC 就不会接触磁盘，并且主线程上的阻塞调用仍然存在。

文本形式的跟踪如下所示：

```
Symbol Name
-[NSManagedObjectContext(_NestedContextSupport) _parentObjectsForFetchRequest:inContext:error:]
 -[NSManagedObjectContext executeFetchRequest:error:]
  -[NSManagedObjectContext(_NestedContextSupport) executeRequest:withContext:error:]
   _perform
    _dispatch_barrier_sync_f_invoke
     _dispatch_client_callout
      __82-[NSManagedObjectContext(_NestedContextSupport) executeRequest:withContext:error:]_block_invoke_0
       -[NSManagedObjectContext(_NestedContextSupport) _parentObjectsForFetchRequest:inContext:error:]
        -[NSManagedObjectContext executeFetchRequest:error:]
         -[NSPersistentStoreCoordinator executeRequest:withContext:error:]
          -[NSSQLCore executeRequest:withContext:error:]
           -[NSSQLCore objectsForFetchRequest:inContext:]
            -[NSSQLCore newRowsForFetchPlan:]
             -[NSSQLCore _newRowsForFetchPlan:selectedBy:withArgument:]
              -[NSSQLiteConnection execute] 
```

# 我试过的

在我们接触 Core Data 代码之前，我们做的第一件事就是优化我们的 JPEG。我们切换到更小的 JPEG 并看到了性能提升。然后，我们减少了一次下载的 JPEG 数量（从 90 个减少到 15 个）。这也导致显着的性能提升。但是，我们仍然在主线程上看到 250-350 毫秒长的块。

我尝试的第一件事就是摆脱后台 MOC 以消除它可能导致问题的可能性。事实上，这让事情变得更糟，因为我们的更新或创建代码在主线程上运行并导致整体动画性能下降。

将持久存储更改为`NSInMemoryStoreType`无效。

谁能指出我的“秘诀”，它将为我提供后台托管对象上下文所承诺的 UI 性能？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-29T01:15:07.723

我会做一些假设，但从你的描述来看，我认为这是合理的。

首先，我假设您的主要 MOC 是通过以下方式创建的：

```
[[NSManagedObjectContext alloc] initWithConcurrencyType:NSMainQueueConcurrencyType]; 
```

我做出这个假设是因为...

1.  您将其用作父上下文，因此它必须是`NSMainQueueConcurrencyType`or `NSPrivateQueueConcurrencyType`。

2.  由于您在其他地方使用它，因此只有在保证可以在主队列上访问它的情况下才会这样做。

现在，我还假设您已将主 MOC 直接连接到持久存储协调器，而不是连接到另一个父 MOC。

当后台 MOC 进行保存时，其更改会向上传播到主 MOC（尽管它们尚未保存）。由于您的 FRC 已附加到主 MOC，因此它将立即看到这些更改。

当您在主 MOC 上发出保存时，您的代码将阻塞，因为该保存在保存完成之前不会返回。

所以，你所看到的完全是意料之中的。

有很多选项可以解决您的问题。

我的第一个建议是创建一个私有队列 MOC 并使其成为主队列 MOC 的父级。

这意味着主队列 MOC 的任何保存都**不会**阻塞。相反，它会将数据“保存”到父级，然后父级将在其自己的私有队列中执行实际的数据库保存，结果是在后台的单独线程中。

现在，这将解决您的主线程阻塞问题。这种机制也很适合加载数据库的子背景 MOC。

请注意，iOS 5 中存在一些与嵌套上下文相关的错误，但如果您的目标是 iOS 6，则其中大部分都已修复。

有关详细信息，请参阅[在获取永久 ID 后对象的核心数据无法完成错误](https://stackoverflow.com/questions/11321717/core-data-could-not-fullfil-fault-for-object-after-obtainpermanantids/11996211#11996211)。

**编辑**

> 您的假设是正确的，尽管我担心我的目标是 iOS 5，并且只能在 iOS 6 上拥有一个主 MOC 的父 MOC（这会导致 FRC 陷入僵局）。– 灰沟

如果你看到死锁，首先摆脱你的`dispatch_sync`和`performBlockAndWait`电话。除了最简单的同步（即，从数据结构中同步读取操作）之外，绝不应该在主线程中使用阻塞操作……并且仅在必要时才发生。此外，同步调用可能会导致意外死锁，因此应尽可能避免，尤其是在调用您不直接控制的任何代码时。

如果你不能这样做，还有其他一些选择。我最喜欢的是将 FRC 附加到私有队列 MOC，然后通过主线程“粘合”您对 FRC 的访问/从 FRC 访问。您可以`dispatch_async`到主线程来处理对表视图（或其他）的委托更新。例如...

```
- (void)controllerWillChangeContent:(NSFetchedResultsController *)controller {
    dispatch_async(dispatch_get_main_queue(), ^{
        [tableView beginUpdates];
    });
} 
```

您可以为 FRC 创建一个代理，它只是一个确保访问适当同步的前端。它不必是一个完整的代理......足以满足您使用 FRC 的目的......并确保所有操作都适当同步。

它实际上比听起来容易。

实际上，您将拥有与现在完全相同的设置，除了“main-MOC”将是私有队列 MOC 而不是主队列 MOC。因此，当数据库访问发生时，您的主线程不会阻塞。

但是，您需要采取一些预防措施，以确保在正确的上下文中使用 FRC。

另一种选择是使用您的主 MOC 和 FRC，就像您现在所做的那样来处理对数据库的更改，但使数据库的所有修改都通过一个单独的 MOC，直接连接到持久存储协调器。这使得更改发生在单独的线程中。然后，您使用 MOC 保存通知来更新您的上下文和/或从存储中重新获取数据。

iOS 和 OSX 的更新修复了 Core Data 的嵌套上下文的许多问题，但是在支持以前的版本时，您需要担心一些事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T17:06:49.660

我有一些猜测，按照你应该检查它们的顺序：

1.  它看起来很像在保存数据后发生的任何缓慢的事情（即，它在回调中）。这导致我要么重新加载，要么`PTSCollectionView`重新获取获取的结果控制器。

2.  这个问题`UICollectionView`在 iOS 6.x 上会发生吗？如果不是，那将导致我依靠`PTSCollectionView`.

3.  如果它仍然发生，那么这意味着它可能不是集合视图，而是获取的结果控制器。看起来，从堆栈帧（尽管它们可能是不透明的）来看，获取的结果控制器正在尝试执行通过`dispatch_barrier`. 这些用于确保在达到障碍之前不会执行块。我在这里很困难，但您可能想检查一下，这是因为在内部，Core Data 正在保存在其他地方，因此延迟了任何其他获取请求的执行。再一次，这是一种疯狂且未受过教育的猜测。但我会**尝试**不立即更新获取的结果控制器，看看你的口吃是否仍然发生。

对我来说突出的另一件事是您正在对孩子执行大量工作，`MOC`然后对父母执行保存。似乎大部分保存应该由孩子执行。但也可能是我有一段时间没有使用过 Core Data 的这一部分了 :-)

# java - 在java中读取和存储.bmp文件

> ID：13110159
> 
> 赞同：3
> 
> 时间：2012-10-28T15:29:19.370
> 
> 标签：java, bitmap, file-io

我正在尝试读取一个名为 .bmp 的文件`circle1.bmp`。它位于我已导入以下文件的包中。

到目前为止，我有以下代码，但是当我运行以下代码时，我得到：

javax.imageio.llOException：无法读取输入文件！

```
public void setUp() throws IOException
{
    BufferedImage image = ImageIO.read(new File("circle1.bmp"));
    byte[][] greenInputData = new byte[30][40];

    for (int x = 0; x < inputData.length; x++)
    {
        for (int y = 0; y < inputData[x].length; y++)
        {
            int color = image.getRGB(x, y);
            //alpha[x][y] = (byte)(color>>24);
            //red[x][y] = (byte)(color>>16);
            greenInputData[x][y] = (byte)(color>>8);
            //blue[x][y] = (byte)(color);
        }
    }
    this.inputData = greenInputData;

    System.out.println(this.inputData);
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-28T15:32:46.033

你应该尝试类似的东西

```
image = ImageIO.read(getClass().getResourceAsStream("path/to/your/file.bmp")); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-28T21:38:24.147

相对于用户目录，您的图像文件路径可能不正确。要找出 Java 开始查找的位置，用户目录的位置，请在程序中的某处放置类似这行代码的内容：

```
System.out.println(System.getProperty("user.dir")); 
```

也许您最好将图像作为从资源获取的 InputStream 而不是作为文件获取。例如，

```
image = ImageIO.read(getClass().getResourceAsStream("circle1.bmp")); //prefered 
```

或者

```
image = ImageIO.read(getClass().getResource("circle1.bmp")); 
```

这将在相对于类文件位置给定的路径中查找图像，事实上，如果您的图像位于 jar 文件中，这就是您必须执行的操作。

# c++ - 创建 gnome-shell 小程序/小部件？

> ID：13110163
> 
> 赞同：3
> 
> 时间：2012-10-28T15:29:55.563
> 
> 标签：c++, c, linux, gnome-shell, gnome-shell-extensions

我正在寻找一个简单的工具，它将集成到 gnome-shell 中。我希望该工具集成在“右上角的控制栏”中：

![在此处输入图像描述](../Images/a037a53373e6500aefa7d5c96d71ed37.png)

我想在右上角的面板中有一个条目，我需要自定义“弹出窗口”（在图片中，搜索栏所在的位置）。我的问题是：

1.  那些叫什么？小程序？小部件？
2.  这个酒吧叫什么？短跑？码头？
3.  我如何自己创建一个，**完全**在 C/C++ 中？

我阅读了有关[“GnomeShellExtensions”](https://live.gnome.org/GnomeShell/Extensions)的资源（包括一些第三方文章），也发现了这个[“迁移到](http://www.codeproject.com/Articles/275295/Migrating-Panel-Applets-to-Gnome-Shell-using-DBus)DBus”指南。看看后一个，您似乎需要使用 JavaScript 创建停靠条目，而您可以使用本地语言来完成其余的工作，这对我来说似乎很奇怪。

所以，我正在寻找一种完全用 C/C++ 来实现它的方法。

我认为这应该是可能的，因为 NetworkManager（在 Dock/Bar 的右侧）也没有 gnome-shell 扩展名（至少我找不到任何扩展名）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T05:51:11.223

1.  它们是“扩展”、“Gnome 扩展”。
2.  那就是“面板”
3.  您应该使用 JavaScript 为 Gnome 开发扩展。

要编写库中不存在的具有新功能的扩展，您可以使用 C/C++ 开发它，但最后您应该使用 JavaScript 来呈现它。

有很多以“gir”（“GObject Introspection Repository”或“GIRepository”的缩写）开头的库可能对您有所帮助。

# c# - 如何在 SQL Server 中运行自动日期时间？

> ID：13110170
> 
> 赞同：0
> 
> 时间：2012-10-28T15:30:37.937
> 
> 标签：c#, sql-server, date, datetime, insert

我使用 C# .NET

我需要在我的项目中运行 auto`datetime`并保存在 SQL Server 中

**考试。**

在 SQL Server 中

```
Datetime    | workDate
-------------------------
25-10-2012  | work
26-10-2012  | work
28-10-2012  | work 
```

在我的项目中，我正在搜索 25-28 之间的日期时间

我需要程序输出

```
25-10-2012  work
26-10-2012  work
27-10-2012  null
28-10-2012  work 
```

但现在我得到：

```
25-10-2012  work
26-10-2012  work
28-10-2012  work 
```

因为我的数据保存状态仅在状态不起作用时才起作用，所以它不会保存在数据库中。

如何使用插入值 null、向我的项目显示数据并保存在 SQL Server 中？

谢谢你的时间 ：）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T16:07:26.797

您可以使用递归 CTE 生成天数列表。

```
; with  AllDays as
        (
        select  cast('2012-10-25' as date) as dt -- Start date
        union all
        select  dateadd(day, 1, dt)
        from    AllDays
        where   dt < '2012-10-28' -- End date
        )
select  convert(varchar(10), ad.dt, 105)
,       workDate
from    AllDays ad
left join
        Table1 t1
on      t1.Datetime = convert(varchar(10), ad.dt, 105) 
```

[SQL FiIddle 上的示例。](http://sqlfiddle.com/#!6/a5e2e/11/0) 将`convert`SQL Server 日期更改为105 格式的`varchar(10)`意大利[格式](http://www.w3schools.com/sql/func_convert.asp)。

# objective-c - 如何在用户触摸的地方画一条线？

> ID：13110171
> 
> 赞同：1
> 
> 时间：2012-10-28T15:30:48.780
> 
> 标签：objective-c, xcode

我试图在一个对象和用户触摸的位置之间画一条线。我已经尝试过子类化，但每次用户触摸屏幕时，我都无法让“-(void)drawrect”自行更新。我删除了这些文件并尝试将代码直接放入“-(void)touchesbegan”，但它不起作用：

```
 - (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event

    UITouch *touch = [touches anyObject];
    CGPoint locationOfTouch = [touch locationInView:nil];
    // You can now use locationOfTouch.x and locationOfTouch.y as the user's coordinates

Int xpos = (int)(starShip.center.x);
int ypos = (int)(starShip.center.y);

    CGContextSetLineWidth(UIGraphicsGetCurrentContext(), 5.0);
       CGContextSetRGBStrokeColor(UIGraphicsGetCurrentContext(), 0.0, 0.0, 0.0, 1.0);
    CGContextBeginPath(UIGraphicsGetCurrentContext());
    CGContextMoveToPoint(UIGraphicsGetCurrentContext(), starShip.center.x, starShip.center.y);
    //draws a line to the point where the user has touched the screen
    CGContextAddLineToPoint(UIGraphicsGetCurrentContext(), locationOfTouch.x, locationOfTouch.y);
    CGContextStrokePath(UIGraphicsGetCurrentContext());
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T15:36:53.547

`drawRect:`仅在需要时调用。它在第一次显示视图和每次调整视图大小时自动调用。如果你想在触摸后调用它，你必须调用`[self setNeedsDisplay];`。

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    [self setNeedsDisplay];
} 
```

这将确保`drawRect:`调用该方法。您不直接调用`drawRect:`，因为您在一帧中多次调用它，视图会多次重绘自身。相反，您将其标记为需要使用 重绘`setNeedsDisplay`。这种方式`drawRect:`只会被调用一次，无论你多久调用一次`setNeedsDisplay`。

# java - 带有 GWT 的 RequestFactory：无法存储实体

> ID：13110175
> 
> 赞同：1
> 
> 时间：2012-10-28T15:31:18.250
> 
> 标签：java, google-app-engine, gwt, google-cloud-datastore, requestfactory

我正在创建一个学校项目，我需要部署一个与本机 android 应用程序连接的应用程序，并且它们都在 Google App Engine Datastore 上共享相同的实体。我遵循了谷歌官方教程（[https://developers.google.com/web-toolkit/doc/2.4/DevGuideRequestFactory](https://developers.google.com/web-toolkit/doc/2.4/DevGuideRequestFactory)）描述的所有说明，但不幸的是，我无法在开发模式下将任何实体存储在数据存储区中。我尝试了数周来正确配置 requestfactory，但没有成功。

以下是我的项目中我的请求工厂中最重要的类：（我根据谷歌教程在 xml 文件中添加了所有适当的标签）

这是我的实体之一：

```
import java.util.Calendar;
import java.util.Date;
import java.util.List;

import javax.persistence.Entity;
import javax.persistence.EntityManager;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import javax.persistence.Id;

import unipiWeb.server.EMF;

import com.google.appengine.api.datastore.Blob;
import com.google.appengine.api.datastore.GeoPt;
import com.google.appengine.api.users.User;
import com.google.appengine.api.users.UserService;
import com.google.appengine.api.users.UserServiceFactory;

@Entity
public class Store{

    @Id
    private Long id;
    private Date dueDate;
    private String email;
    private String name;
    private String address;
    private String description;
    private long userId;
    private String country;

    private GeoPt geopt;

    Blob image;

    public Store(){

    }

    public Store(String name, Blob image){
        this.name = name;
        this.image = image;
    }

    public Store(String name, Blob image, String country){
        this.name = name;
        this.image = image;
        this.country = country;
    }

    /*
     * Getters and Setters
     */
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    public Long getId() {
        return this.id;
    }

    public void setId(Long id) {
        this.id = id;
    }

    public String getName() {
        return this.name;
    }

    public void setName(String name) {
        this.name = name;
    }

        public Date getDueDate() {
        return dueDate;
    }

    public void setDueDate(Date dueDate) {
        this.dueDate = dueDate;
    }

    public String getEmail() {
        return this.email;
    }

    public void setEmail(String email) {
        this.email = email;
    }

    public String getDescription() {
        return description;
    }

    public void setDescription(String description) {
        this.description = description;
    }

    public String getAddress() {
        return address;
    }

    public void setAddress(String address) {
        this.address = address;
    }

    public long getUserId() {
        return userId;
    }

    public void setUserId(long userId) {
        this.userId = userId;
    }

    public GeoPt getGeopt() {
        return geopt;
    }

    public void setGeopt(GeoPt geopt) {
        this.geopt = geopt;
    }

    public String getCountry(){
        return country;
    }

    public void setCountry(String country){
        this.country = country;
    }

    public Blob getImage(){
        return image;
    }

    public void setImage(Blob image){
        this.image = image;
    }

    public String toString(){
        StringBuilder builder = new StringBuilder();
        builder.append("Store [dueDate=");
        builder.append(dueDate);
        builder.append(", name=");
        builder.append(name);
        builder.append(", description=");
        builder.append(description);
        builder.append("]");
        return builder.toString();

    }
} 
```

实体代理：

```
import java.util.Date;

import com.google.web.bindery.requestfactory.shared.EntityProxy;
import com.google.web.bindery.requestfactory.shared.ProxyForName;

@ProxyForName(value = "unipiWeb.server.entities.Store", locator = "unipiWeb.server.entities.StoreLocator")
public interface StoreProxy extends EntityProxy {

    Long getId();

    String getName();

    void setName(String name);

    Date getDueDate();

    void setDueDate(Date dueDate);

    String getEmail();

    void setEmail(String email);

    String getDescription();

    void setDescription(String description);

    String getAddress();

    void setAddress(String address);

    long getUserId();

    void setUserId(long userId);

    String getCountry();

    void setCountry(String country);

} 
```

该实体的服务：

```
import java.util.List;

import unipiWeb.server.DataStore;
import unipiWeb.server.entities.Store;
import unipiWeb.annotation.ServiceMethod;

public class AppService {

    DataStore db = new DataStore();
    @ServiceMethod
    public Store createStore() {
        return db.update(new Store());
    }

    @ServiceMethod
    public Store readStore(Long id) {
        return db.find(id);
    }

    @ServiceMethod
    public Store updateStore(Store store) {
        store.setEmail(DataStore.getUserEmail());
        return db.update(store);
    }

    @ServiceMethod
    public void deleteStore(Store store) {
        db.delete(store.getId());
    }

    @ServiceMethod
    public List<Store> queryStores() {
        return db.findAll();
    }

} 
```

实体定位器：

```
import com.google.web.bindery.requestfactory.shared.Locator;

public class StoreLocator extends Locator<Store, Void> {

    @Override
    public Store create(Class<? extends Store> clazz) {
        return new Store();
    }

    @Override
    public Store find(Class<? extends Store> clazz, Void id) {
        return create(clazz);
    }

    @Override
    public Class<Store> getDomainType() {
        return Store.class;
    }

    @Override
    public Void getId(Store domainObject) {
        return null;
    }

    @Override
    public Class<Void> getIdType() {
        return Void.class;
    }

    @Override
    public Object getVersion(Store domainObject) {
        return null;
    }

} 
```

这是 RequestContext 子类：

```
import java.util.List;

import com.google.web.bindery.requestfactory.shared.Request;
import com.google.web.bindery.requestfactory.shared.RequestContext;
import com.google.web.bindery.requestfactory.shared.ServiceName;

@ServiceName(value = "unipiWeb.server.services.AppService", locator = "unipiWeb.server.services.AppServiceLocator")
public interface AppRequest extends RequestContext {

    Request<StoreProxy> createStore();

    Request<StoreProxy> readStore(Long id);

    Request<StoreProxy> updateStore(StoreProxy store);

    Request<Void> deleteStore(StoreProxy store);

    Request<List<StoreProxy>> queryStores();

} 
```

和 requestfactory 子类：

```
import com.google.web.bindery.requestfactory.shared.RequestFactory;

public interface AppRequestFactory extends RequestFactory {

    AppRequest appRequest();

} 
```

这是每次我尝试存储新实体时都会出现的错误。（项目调试完全没有错误）

```
17:23:53.411 [ERROR] [unipiweb] Uncaught exception escaped

com.google.gwt.event.shared.UmbrellaException: One or more exceptions caught, see full set in UmbrellaException#getCauses
    at com.google.gwt.event.shared.HandlerManager.fireEvent(HandlerManager.java:129)
    at com.google.gwt.user.client.ui.Widget.fireEvent(Widget.java:129)
    at com.google.gwt.event.dom.client.DomEvent.fireNativeEvent(DomEvent.java:116)
    at com.google.gwt.user.client.ui.Widget.onBrowserEvent(Widget.java:177)
    at com.google.gwt.user.client.DOM.dispatchEventImpl(DOM.java:1351)
    at com.google.gwt.user.client.DOM.dispatchEvent(DOM.java:1307)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at com.google.gwt.dev.shell.MethodAdaptor.invoke(MethodAdaptor.java:103)
    at com.google.gwt.dev.shell.MethodDispatch.invoke(MethodDispatch.java:71)
    at com.google.gwt.dev.shell.OophmSessionHandler.invoke(OophmSessionHandler.java:172)
    at com.google.gwt.dev.shell.BrowserChannelServer.reactToMessagesWhileWaitingForReturn(BrowserChannelServer.java:337)
    at com.google.gwt.dev.shell.BrowserChannelServer.invokeJavascript(BrowserChannelServer.java:218)
    at com.google.gwt.dev.shell.ModuleSpaceOOPHM.doInvoke(ModuleSpaceOOPHM.java:136)
    at com.google.gwt.dev.shell.ModuleSpace.invokeNative(ModuleSpace.java:561)
    at com.google.gwt.dev.shell.ModuleSpace.invokeNativeObject(ModuleSpace.java:269)
    at com.google.gwt.dev.shell.JavaScriptHost.invokeNativeObject(JavaScriptHost.java:91)
    at com.google.gwt.core.client.impl.Impl.apply(Impl.java)
    at com.google.gwt.core.client.impl.Impl.entry0(Impl.java:213)
    at sun.reflect.GeneratedMethodAccessor31.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at com.google.gwt.dev.shell.MethodAdaptor.invoke(MethodAdaptor.java:103)
    at com.google.gwt.dev.shell.MethodDispatch.invoke(MethodDispatch.java:71)
    at com.google.gwt.dev.shell.OophmSessionHandler.invoke(OophmSessionHandler.java:172)
    at com.google.gwt.dev.shell.BrowserChannelServer.reactToMessages(BrowserChannelServer.java:292)
    at com.google.gwt.dev.shell.BrowserChannelServer.processConnection(BrowserChannelServer.java:546)
    at com.google.gwt.dev.shell.BrowserChannelServer.run(BrowserChannelServer.java:363)
    at java.lang.Thread.run(Unknown Source)
Caused by: java.lang.NoClassDefFoundError: org/json/JSONException
    at com.google.web.bindery.autobean.shared.impl.StringQuoter.createSplittable(StringQuoter.java:58)
    at com.google.web.bindery.autobean.shared.impl.AbstractAutoBean.&lt;init&gt;(AbstractAutoBean.java:71)
    at unipiWeb.client.requestfactory.StoreProxyAutoBean_com_google_web_bindery_requestfactory_shared_impl_EntityProxyCategory_com_google_web_bindery_requestfactory_shared_impl_ValueProxyCategory_com_google_web_bindery_requestfactory_shared_impl_BaseProxyCategory.&lt;init&gt;(StoreProxyAutoBean_com_google_web_bindery_requestfactory_shared_impl_EntityProxyCategory_com_google_web_bindery_requestfactory_shared_impl_ValueProxyCategory_com_google_web_bindery_requestfactory_shared_impl_BaseProxyCategory.java:90)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
    at java.lang.reflect.Constructor.newInstance(Unknown Source)
    at com.google.gwt.dev.shell.MethodAdaptor.invoke(MethodAdaptor.java:105)
    at com.google.gwt.dev.shell.MethodDispatch.invoke(MethodDispatch.java:71)
    at com.google.gwt.dev.shell.OophmSessionHandler.invoke(OophmSessionHandler.java:172)
    at com.google.gwt.dev.shell.BrowserChannelServer.reactToMessagesWhileWaitingForReturn(BrowserChannelServer.java:337)
    at com.google.gwt.dev.shell.BrowserChannelServer.invokeJavascript(BrowserChannelServer.java:218)
    at com.google.gwt.dev.shell.ModuleSpaceOOPHM.doInvoke(ModuleSpaceOOPHM.java:136)
    at com.google.gwt.dev.shell.ModuleSpace.invokeNative(ModuleSpace.java:561)
    at com.google.gwt.dev.shell.ModuleSpace.invokeNativeObject(ModuleSpace.java:269)
    at com.google.gwt.dev.shell.JavaScriptHost.invokeNativeObject(JavaScriptHost.java:91)
    at com.google.web.bindery.autobean.gwt.client.impl.JsniCreatorMap$.invoke$(JsniCreatorMap.java)
    at com.google.web.bindery.autobean.gwt.client.impl.JsniCreatorMap$.create$(JsniCreatorMap.java:46)
    at com.google.web.bindery.autobean.gwt.client.impl.AbstractAutoBeanFactory.create(AbstractAutoBeanFactory.java:38)
    at com.google.web.bindery.requestfactory.shared.impl.AbstractRequestContext.createProxy(AbstractRequestContext.java:688)
    at com.google.web.bindery.requestfactory.shared.impl.AbstractRequestContext.create(AbstractRequestContext.java:497)
    at unipiWeb.client.widgets.StoreWidget$4.onClick(StoreWidget.java:188)
    at com.google.gwt.event.dom.client.ClickEvent.dispatch(ClickEvent.java:54)
    at com.google.gwt.event.dom.client.ClickEvent.dispatch(ClickEvent.java:1)
    at com.google.gwt.event.shared.GwtEvent.dispatch(GwtEvent.java:1)
    at com.google.web.bindery.event.shared.EventBus.dispatchEvent(EventBus.java:40)
    at com.google.web.bindery.event.shared.SimpleEventBus.doFire(SimpleEventBus.java:193)
    at com.google.web.bindery.event.shared.SimpleEventBus.fireEvent(SimpleEventBus.java:88)
    at com.google.gwt.event.shared.HandlerManager.fireEvent(HandlerManager.java:127)
    at com.google.gwt.user.client.ui.Widget.fireEvent(Widget.java:129)
    at com.google.gwt.event.dom.client.DomEvent.fireNativeEvent(DomEvent.java:116)
    at com.google.gwt.user.client.ui.Widget.onBrowserEvent(Widget.java:177)
    at com.google.gwt.user.client.DOM.dispatchEventImpl(DOM.java:1351)
    at com.google.gwt.user.client.DOM.dispatchEvent(DOM.java:1307)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at com.google.gwt.dev.shell.MethodAdaptor.invoke(MethodAdaptor.java:103)
    at com.google.gwt.dev.shell.MethodDispatch.invoke(MethodDispatch.java:71)
    at com.google.gwt.dev.shell.OophmSessionHandler.invoke(OophmSessionHandler.java:172)
    at com.google.gwt.dev.shell.BrowserChannelServer.reactToMessagesWhileWaitingForReturn(BrowserChannelServer.java:337)
    at com.google.gwt.dev.shell.BrowserChannelServer.invokeJavascript(BrowserChannelServer.java:218)
    at com.google.gwt.dev.shell.ModuleSpaceOOPHM.doInvoke(ModuleSpaceOOPHM.java:136)
    at com.google.gwt.dev.shell.ModuleSpace.invokeNative(ModuleSpace.java:561)
    at com.google.gwt.dev.shell.ModuleSpace.invokeNativeObject(ModuleSpace.java:269)
    at com.google.gwt.dev.shell.JavaScriptHost.invokeNativeObject(JavaScriptHost.java:91)
    at com.google.gwt.core.client.impl.Impl.apply(Impl.java)
    at com.google.gwt.core.client.impl.Impl.entry0(Impl.java:213)
    at sun.reflect.GeneratedMethodAccessor31.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at com.google.gwt.dev.shell.MethodAdaptor.invoke(MethodAdaptor.java:103)
    at com.google.gwt.dev.shell.MethodDispatch.invoke(MethodDispatch.java:71)
    at com.google.gwt.dev.shell.OophmSessionHandler.invoke(OophmSessionHandler.java:172)
    at com.google.gwt.dev.shell.BrowserChannelServer.reactToMessages(BrowserChannelServer.java:292)
    at com.google.gwt.dev.shell.BrowserChannelServer.processConnection(BrowserChannelServer.java:546)
    at com.google.gwt.dev.shell.BrowserChannelServer.run(BrowserChannelServer.java:363)
    at java.lang.Thread.run(Unknown Source)
Caused by: java.lang.ClassNotFoundException: null
    at com.google.gwt.dev.shell.CompilingClassLoader$MultiParentClassLoader.findClass(CompilingClassLoader.java:365)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at com.google.web.bindery.autobean.shared.impl.StringQuoter.createSplittable(StringQuoter.java:58)
    at com.google.web.bindery.autobean.shared.impl.AbstractAutoBean.&lt;init&gt;(AbstractAutoBean.java:71)
    at unipiWeb.client.requestfactory.StoreProxyAutoBean_com_google_web_bindery_requestfactory_shared_impl_EntityProxyCategory_com_google_web_bindery_requestfactory_shared_impl_ValueProxyCategory_com_google_web_bindery_requestfactory_shared_impl_BaseProxyCategory.&lt;init&gt;(StoreProxyAutoBean_com_google_web_bindery_requestfactory_shared_impl_EntityProxyCategory_com_google_web_bindery_requestfactory_shared_impl_ValueProxyCategory_com_google_web_bindery_requestfactory_shared_impl_BaseProxyCategory.java:90)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
    at java.lang.reflect.Constructor.newInstance(Unknown Source)
    at com.google.gwt.dev.shell.MethodAdaptor.invoke(MethodAdaptor.java:105)
    at com.google.gwt.dev.shell.MethodDispatch.invoke(MethodDispatch.java:71)
    at com.google.gwt.dev.shell.OophmSessionHandler.invoke(OophmSessionHandler.java:172)
    at com.google.gwt.dev.shell.BrowserChannelServer.reactToMessagesWhileWaitingForReturn(BrowserChannelServer.java:337)
    at com.google.gwt.dev.shell.BrowserChannelServer.invokeJavascript(BrowserChannelServer.java:218)
    at com.google.gwt.dev.shell.ModuleSpaceOOPHM.doInvoke(ModuleSpaceOOPHM.java:136)
    at com.google.gwt.dev.shell.ModuleSpace.invokeNative(ModuleSpace.java:561)
    at com.google.gwt.dev.shell.ModuleSpace.invokeNativeObject(ModuleSpace.java:269)
    at com.google.gwt.dev.shell.JavaScriptHost.invokeNativeObject(JavaScriptHost.java:91)
    at com.google.web.bindery.autobean.gwt.client.impl.JsniCreatorMap$.invoke$(JsniCreatorMap.java)
    at com.google.web.bindery.autobean.gwt.client.impl.JsniCreatorMap$.create$(JsniCreatorMap.java:46)
    at com.google.web.bindery.autobean.gwt.client.impl.AbstractAutoBeanFactory.create(AbstractAutoBeanFactory.java:38)
    at com.google.web.bindery.requestfactory.shared.impl.AbstractRequestContext.createProxy(AbstractRequestContext.java:688)
    at com.google.web.bindery.requestfactory.shared.impl.AbstractRequestContext.create(AbstractRequestContext.java:497)
    at unipiWeb.client.widgets.StoreWidget$4.onClick(StoreWidget.java:188)
    at com.google.gwt.event.dom.client.ClickEvent.dispatch(ClickEvent.java:54)
    at com.google.gwt.event.dom.client.ClickEvent.dispatch(ClickEvent.java:1)
    at com.google.gwt.event.shared.GwtEvent.dispatch(GwtEvent.java:1)
    at com.google.web.bindery.event.shared.EventBus.dispatchEvent(EventBus.java:40)
    at com.google.web.bindery.event.shared.SimpleEventBus.doFire(SimpleEventBus.java:193)
    at com.google.web.bindery.event.shared.SimpleEventBus.fireEvent(SimpleEventBus.java:88)
    at com.google.gwt.event.shared.HandlerManager.fireEvent(HandlerManager.java:127)
    at com.google.gwt.user.client.ui.Widget.fireEvent(Widget.java:129)
    at com.google.gwt.event.dom.client.DomEvent.fireNativeEvent(DomEvent.java:116)
    at com.google.gwt.user.client.ui.Widget.onBrowserEvent(Widget.java:177)
    at com.google.gwt.user.client.DOM.dispatchEventImpl(DOM.java:1351)
    at com.google.gwt.user.client.DOM.dispatchEvent(DOM.java:1307)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at com.google.gwt.dev.shell.MethodAdaptor.invoke(MethodAdaptor.java:103)
    at com.google.gwt.dev.shell.MethodDispatch.invoke(MethodDispatch.java:71)
    at com.google.gwt.dev.shell.OophmSessionHandler.invoke(OophmSessionHandler.java:172)
    at com.google.gwt.dev.shell.BrowserChannelServer.reactToMessagesWhileWaitingForReturn(BrowserChannelServer.java:337)
    at com.google.gwt.dev.shell.BrowserChannelServer.invokeJavascript(BrowserChannelServer.java:218)
    at com.google.gwt.dev.shell.ModuleSpaceOOPHM.doInvoke(ModuleSpaceOOPHM.java:136)
    at com.google.gwt.dev.shell.ModuleSpace.invokeNative(ModuleSpace.java:561)
    at com.google.gwt.dev.shell.ModuleSpace.invokeNativeObject(ModuleSpace.java:269)
    at com.google.gwt.dev.shell.JavaScriptHost.invokeNativeObject(JavaScriptHost.java:91)
    at com.google.gwt.core.client.impl.Impl.apply(Impl.java)
    at com.google.gwt.core.client.impl.Impl.entry0(Impl.java:213)
    at sun.reflect.GeneratedMethodAccessor31.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at com.google.gwt.dev.shell.MethodAdaptor.invoke(MethodAdaptor.java:103)
    at com.google.gwt.dev.shell.MethodDispatch.invoke(MethodDispatch.java:71)
    at com.google.gwt.dev.shell.OophmSessionHandler.invoke(OophmSessionHandler.java:172)
    at com.google.gwt.dev.shell.BrowserChannelServer.reactToMessages(BrowserChannelServer.java:292)
    at com.google.gwt.dev.shell.BrowserChannelServer.processConnection(BrowserChannelServer.java:546)
    at com.google.gwt.dev.shell.BrowserChannelServer.run(BrowserChannelServer.java:363)
    at java.lang.Thread.run(Unknown Source) 
```

**欢迎任何指示或建议！！** 谢谢你！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T16:22:32.460

> 引起：java.lang.NoClassDefFoundError: org/json/JSONException

确保 org.json jar 在您的类路径（通常称为`json.jar`）上。您可以直接添加此 jar，或使用包含这些类的另一个 jar。您可以从 maven 作为 org.json:json:20090211 或从[http://www.json.org/java/index.html](http://www.json.org/java/index.html)获得它。

根据[https://developers.google.com/web-toolkit/doc/2.4/DevGuideRequestFactory](https://developers.google.com/web-toolkit/doc/2.4/DevGuideRequestFactory)，`requestfactory-server.jar`jar 应该包含这些类，尽管其他用户报告了这个问题（参见[https://groups.google.com上的讨论/d/topic/google-web-toolkit/76btyDIat7k/discussion](https://groups.google.com/d/topic/google-web-toolkit/76btyDIat7k/discussion)`gwt-servlet-deps.jar` ）-如果另一个不起作用，他们建议您尝试使用jar。

# ruby-on-rails - ssl_requirement 替代宝石

> ID：13110176
> 
> 赞同：0
> 
> 时间：2012-10-28T15:31:22.493
> 
> 标签：ruby-on-rails, gem

我检查了名为的 gem [`ssl_requirement`](https://github.com/yardstick/ssl_requirement)，它在某些操作上强制执行 SSL 并增强了 url 和路径助手，总体上看起来很有希望，但它太过时了，而且维护得不好。

有谁知道提供这种便利的任何更新的替代方案：

1.  在控制器中需要 SSL，而不是在路由文件中。
2.  自动选择`https://`URL 和路径助手，而不必破坏代码：`:protocol => 'https'`?
3.  能够在开发中禁用整个 SSL 强制执行

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T16:31:02.820

你不需要 gem - 你可以写一个小助手来做这件事。

在应用程序控制器中：

```
def force_ssl(options = {})
  host = options.delete(:host)
  unless request.ssl? or Rails.env.development?
    redirect_options = {:protocol => 'https://', :status => :moved_permanently}
    redirect_options.merge!(:host => host) if host
    flash.keep
    redirect_to redirect_options and return
  else
    true
  end
end 
```

然后在你的控制器中：

```
before_filter :force_ssl, :only => [:login] 
```

这*不能*满足您在路径帮助程序上自动选择 https 协议的第二个要求，但这不能通过控制器指定的 SSL 强制实现，因为路由帮助程序不关心控制器级别上发生的事情。这实际上与控制器强制 SSL 互斥，因为如果您的路由指定 HTTPS，那么它们不会将非 HTTPS URL 解析为控制器操作，这意味着您的`force_ssl`过滤器将永远不会被命中。但是，您可以通过复制您的路由来实现这一点，这样您就同时拥有 HTTPS 范围和无范围的路由，并且在 HTTPS 范围的路由之前定义了无范围的路由，以便 HTTPS 范围的版本采用帮助程序名称。不过，这确实意味着重复。

不过，您也许可以通过一些辅助方法来实现这一点。我没有对此进行测试，但这个概念应该有效：

```
def route_with_https_preference(&block)
  &block.call
  scope :protocol => 'https://', :constraints => { :protocol => 'https://' } do
    instance_eval &block
  end
end

route_with_https_preference do
  resources :gizmos do
    resources :widgets
  end
end 
```

您可以在路由文件中轻松实现 SSL 范围的路由（有关详细信息，请参阅[此答案](https://stackoverflow.com/questions/3993651/rails-3-ssl-routing-redirects-from-https-to-http)），但这确实意味着您必须使用`_url`帮助程序而不是`_path`帮助程序，因为协议切换需要完全限定的 URL。

# objective-c - 从表格中获取单元格的文本

> ID：13110179
> 
> 赞同：1
> 
> 时间：2012-10-28T15:31:51.507
> 
> 标签：objective-c, xcode, uitableview

ViewController 具有表格视图、一个按钮和标签。我的任务：选择任何行，然后按下按钮，所选行中的文本必须出现在标签中。**我应该怎么做？**

我已经做了熟悉的代码：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath

{
    UIAlertView *messageAlert = [[UIAlertView alloc]
                                    initWithTitle:@"Row Selected" message:@"You've selected a row" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];`

    [messageAlert show];

} 
```

在这种情况下，一旦您选择了任何行，您就会收到一条警报消息。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T16:02:53.080

在`- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath`检索返回值`[[[tableView cellForRowAtIndexPath:indexPath] textLabel] text]`并将其存储在属性中。因此，每次用户更改所选单元格时，您的属性都会更新为当前所选单元格的文本。然后，为按钮创建一个方法并将其连接起来。当按钮被按下时，将界面中标签的文本值设置为属性。

* * *

`@interface`在顶部的内部部分（它在 .h 文件中），放这个。

```
@property (nonatomic, copy) NSString* selectedCellText; 
```

在这个`@implementation`部分（它在 .m/.mm 文件中）里面放这个。

```
@synthesize selectedCellText = _selectedCellText; 
```

您现在有一个实例变量`_selectedCellText`，您可以使用两种方法访问它。这称为属性。使用`[self setSelectedCellText]`("setter") 设置它，使用`[self selectedCellText]`("getter") 获取值。或者，使用点符号，这将为您完成（`self.selectedCellText`始终引用它）。当然`self`只能在内部使用；如果另一个对象有一个指向这个实例的指针，你会使用它而不是`self`.

对于`- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath`，这样做。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{
    self.selectedCellText = [[[tableView cellForRowAtIndexPath:indexPath] textLabel] text];
} 
```

现在，在任何给定时间（前提是您已正确设置表格）`self.selectedCellText`将包含当前选定单元格的文本。所以，连接一个UILabel和UIButton，让按钮通过目标动作调用一个方法。如果您使用笔尖/故事板，请将它们拖到您的界面中。ctrl-drag 从标签到助手编辑器中的界面部分，Xcode 将提示您创建一个插座；让我们命名这个新属性`myLabel`。ctrl-drag 从按钮到实现部分，让 Xcode 创建一个在按钮被触摸时调用的方法。让我们命名它`labelTextUpdate`，并设置`arguments`为`none`。Xcode 将创建该方法，因此将此代码插入其中。

```
self.myLabel.text = self.selectedCellText; 
```

你完成了！每当用户触摸表格时，属性都会更新为单元格中包含的标签文本。当用户触摸按钮时，`labeltextUpdate`被调用并且用户界面中的标签被更新为我们属性中的文本，这将是他们之前选择的单元格中包含的任何文本。

当然，前提是我没有忘记任何事情，因为这是凭记忆。我鼓励你阅读任何一本关于 Objective-C 和 iOS/Mac OS 开发的书籍，并通读 Apple 的文档。

* * *

我测试了它，它可以工作。这是结果。

![UITableView 使用示例](../Images/0091943e6e152a18c67859a4133894cd.png)

我还意识到有一种更好的方法可以做到这一点，无需 text 属性或委托方法`didSelectRowAtIndexPath`。在按钮方法中，只需查询您的表格视图以获取当前选定的单元格，询问其标签，然后获取其文本并将其应用于您的标签。它应该只需要一两行代码，并且不会令人困惑。

# php - php $_GET 值在 if(!isset) 中被删除

> ID：13110180
> 
> 赞同：-1
> 
> 时间：2012-10-28T15:32:39.353
> 
> 标签：php, get

这工作正常：

```
$username= $_GET["username"];
$query= "INSERT INTO test (latitude) VALUES ('$username')";
mysql_query($query) or die (mysql_error("error"));
mysql_close(); 
```

这不起作用：

```
if(!isset($_POST['submit']))
{
}
else
{
$username= $_GET["username"];
$query= "INSERT INTO test (latitude) VALUES ('$username')";
mysql_query($query) or die (mysql_error("error"));
mysql_close();
} 
```

如果 $username 设置为 get 以外的值，例如 '7'，它就可以工作。

从目标 c 中检索值的 GET。如果我不把它放在 if 语句中，它只会在我的数据库中输入数百次。如果我把它放在'if'语句中，它只会输入一次，但值将为零。我完全被难住了。任何帮助都会很棒。

编辑：我认为由于我得到的答案我没有很好地解释。澄清一下：我正在使用 POST 发布 user_id、answer_body。我使用 GET 作为从核心位置导入纬度和经度的一种方式（即使我将其命名为用户名，它也是纬度）。我希望他们都进入同一个条目，这就是我将 GET 绑定到 isset_POST 的原因。此外，当 GET(username) 单独使用时，使用 INSERT 查询，它将在我的数据库中产生数百个重复项。这是objective-C脚本：

```
//sends whatever username is set to, to database
float username = location.coordinate.latitude;
NSString *theValue = [NSString stringWithFormat:@"%f", username];
NSString *hostStr =[NSString stringWithFormat:@"http://mysite.com/page.php?username=%@", theValue];
NSData *dataURL =  [NSData dataWithContentsOfURL: [ NSURL URLWithString: hostStr ]];
NSString *serverOutput = [[NSString alloc] initWithData:dataURL encoding: NSUTF8StringEncoding];
NSLog(@"Server output: %@", serverOutput); 
```

表单代码为：

```
<form action="gpstestertwo.php" method="post"><center>
                $<input type="text" name="answer_body" maxlentgh= "5"  style="height:3em;"/>
                <input type="submit" value="submit" name="submit" style="height:2em; width:5em; font-size:19px " 
                 />
                 </center>
            </form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T15:35:18.803

`$_POST['submit']`和`$_GET['username']`...为什么不使用`$_POST['username']`.

你是如何发送`FORM`数据的，`POST`或者`GET`？或使用`$_REQUEST['username']`确定。

**更不用说在查询中使用之前需要转义用户名。**

**编辑**（总是在 上进行处理`POSTs`，而不是`GETs`）：

```
if(!strcasecmp($_SERVER['REQUEST_METHOD'], 'POST')){
    // post operation, do your work HERE only
    if(!empty($_POST['username'])){
        // ... do your worst here ...
    }
} 
```

`GETs`是默认请求，您最终可能会在数据库中被轰炸。`POSTs`是特别的。因此，在进行处理之前确保`REQUEST_METHOD`是。`POST``POST`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T15:36:13.863

```
if(isset($_REQUEST['submit']))
{
$username= mysql_real_escape_string($_REQUEST["username"]);
$query= "INSERT INTO test (latitude) VALUES ('$username')";
mysql_query($query) or die (mysql_error("error"));
mysql_close();
} 
```

编辑：首先，我将 $_GET 和 $_POST 更改为 $_REQUEST，因此它将同时接受 $_GET 和 $_POST。

其次，我添加了一个`mysql_real_escape_string`函数，该函数将转义不需要的字符，例如引号，以防止 SQL 注入。

# ruby - 如何调试 Omniauth 和 Rack 应用程序？

> ID：13110182
> 
> 赞同：0
> 
> 时间：2012-10-28T15:32:54.350
> 
> 标签：ruby, debugging, gem, rack

我正在尝试使用 Rack + omniauth（实际上是omniauth-ebay）在 eBay 上进行身份验证。我有一个正确的配置（而不是“111”，“222”......有真正的价值）：

```
#config.rb
 use OmniAuth::Builder do
     provider :ebay, "111", "222", "333", "4444", "0", "https://api.sandbox.ebay.com/wsapi" 
 end 
```

当我去 l`ocalhost:9292/auth/ebay`时，我收到以下错误：

```
 NoMethodError at /auth/ebay
    undefined method `[]' for nil:NilClass
    file: ebay_api.rb location: generate_session_id line: 21

 #....
omniauth.error  - <NoMethodError: undefined method `[]' for nil:NilClass>
omniauth.error.strategy - #<OmniAuth::Strategies::Ebay>
omniauth.error.type - "Failed to retrieve session id from ebay"
omniauth.strategy - <OmniAuth::Strategies::Ebay> 
```

我想知道的是如何调试它？尤其是路径，`localhost:9292/auth/ebay`因为我没有在我的应用程序中定义它，因为 Omniauth会自动*嵌入*它。

你的意见？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T17:43:07.170

Omniauth ebay 使用纯 XML 版本的 eBay API，而不是 SOAP 版本。您的最后一个配置值应该是

```
https://api.sandbox.ebay.com/ws/api.dll 
```

不是

```
https://api.sandbox.ebay.com/wsapi 
```

作为旁注，根据您的错误[ebay_api.rb](https://github.com/TheGiftsProject/omniauth-ebay/blob/c7fefe7eed86120634e8e9f480b5951e7e36f0d6/lib/ebay_api.rb)，您似乎安装了较早版本的 omniauth-ebay gem。在[最新版本](https://github.com/TheGiftsProject/omniauth-ebay/blob/master/lib/ebay_api.rb)中，有更多的错误检查，应该会给你更多的细节。

# c++ - 菜单中的 C++ 循环

> ID：13110185
> 
> 赞同：3
> 
> 时间：2012-10-28T15:33:52.567
> 
> 标签：c++, loops

在我的代码中存在一个问题，即使我输入“Q”或“q”，程序也会不断循环菜单。这里有什么问题？这是代码：

```
{
    char selection;
    do {
        cout << "Add a county election file         A" << endl;
        cout << "Show election totals on screen     P" << endl;
        cout << "Search for county results          S" << endl;
        cout << "Exit the program                   Q" << endl;
        cout << "Please enter your choice: ";
        cin >> selection;
    } while ((selection != 'Q' || selection != 'q'));
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-28T15:37:23.313

您想`&&`在测试中使用 And ( ) 运算符，而不是 Or ( `||`) 运算符。否则，`selection != 'Q'`and之一`selection != 'q'`将始终为真，并且您的循环将永远不会退出。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-28T15:38:35.407

正如所指出的，`||`不满足您的要求。您需要使用`&&`运算符。

如果你按`q`，那么情况就是这样。

```
(selection != 'Q' || selection != 'q')
|---------------|    |--------------|
    true                  false 
```

如果你按`Q`，那么情况就是这样。

```
(selection != 'Q' || selection != 'q')
|---------------|    |--------------|
    false                  true 
```

循环应该是这样的。

```
while((selection != 'Q' && selection != 'q')); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-28T15:40:15.973

试试这个：

```
} while((selection != 'Q' && selection != 'q')); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-28T16:06:38.043

使用`toupper()`.

如果你这样做， `while ( toupper(selection) != 'Q' )`你将不需要检查大小写。

```
#include <iostream>
#include <stdio.h>
using namespace std;

int main(void)
{

    char selection;
    do {
        cout << "The Menu" << endl;
        cout << "____________________________________" << endl;
        cout << "Add a county election file         A" << endl;
        cout << "Show election totals on screen     P" << endl;
        cout << "Search for county results          S" << endl;
        cout << "Exit the program                   Q" << endl;
        cout << "____________________________________" << endl;
        cout << "Please enter your choice: ";
        cin >> selection;
    } while ( toupper(selection) != 'Q'  );

  cout<<" \nPress any key to continue\n";
  cin.ignore();
  cin.get();

   return 0;
} 
```

# google-chrome - PinguyOS 12.04 上的 google-chrome 在打开窗口选择文件时总是崩溃

> ID：13110186
> 
> 赞同：0
> 
> 时间：2012-10-28T15:34:10.663
> 
> 标签：google-chrome, crash

我正在使用 PinguyOS，并`lsb_release -a`得到了这个：

```
No LSB modules are available.
Distributor ID: Ubuntu
Description:    Ubuntu 12.04 LTS
Release:    12.04
Codename:   precise 
```

打开保存文件窗口或选择文件窗口时它会崩溃。

每次我打开一个窗口来选择我想要上传的文件，或者我打开一个窗口来选择我的书签应该被导出到哪里等等时，google-chrome 都会崩溃。

google-chrome 是使用我从谷歌网站下载的包安装的：https: [//www.google.com/intl/en/chrome/browser/](https://www.google.com/intl/en/chrome/browser/) [1](https://www.google.com/intl/en/chrome/browser/)

有没有人遇到过这样的问题？请告诉我我应该怎么做才能解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T07:29:50.657

是的，我有，我有同样的问题。

保存文件，崩溃，重新启动 chrome，工作.. 又过了一会儿。文件浏览屏幕崩溃也是如此。

你不会相信解决方法是什么。卸载 IE9。上周的工作就像一个魅力。试试看 ：）

# android - 日历中规则的日期格式

> ID：13110188
> 
> 赞同：2
> 
> 时间：2012-10-28T15:34:53.253
> 
> 标签：android, calendar

我读出了一个经常发生的日历事件。在这种情况下，有一个描述重复事件的规则 (CalendarContract.Events.RRULE)。其中可以是“直到”日期，类似于下面的代码片段。一个示例规则可能是： FREQ=WEEKLY;UNTIL=20121115T180000Z;BYDAY=MO,TU,WE,TH,FR 我的问题是关于日期格式。我不知道“T”和“Z”是什么意思。与时区有关吗？

```
String untilDate = "20121115T180000Z"

SimpleDateFormat format = new SimpleDateFormat("yyyyMMdd'T'HHmmss'Z'");         
date = format.parse(untilDate); 
```

编辑：

```
SimpleDateFormat format = new SimpleDateFormat("yyyyMMdd'T'HHmmssZ"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T15:36:48.760

T 和 Z 是文字字母，这意味着在这些相应的位置必须有一个实际的 T 和 Z。

在日期字符串中，T 表示时间之后（与日期相反），Z 表示 Zulu 或 UTC (GMT) 时间。

# ruby - 强制续集将查询记录到与 sinatra 相同的目的地

> ID：13110189
> 
> 赞同：3
> 
> 时间：2012-10-28T15:35:02.350
> 
> 标签：ruby, logging, sinatra, sequel

我想在我的 Sinatra 应用程序中初始化 Sequel

```
DB = Sequel.sqlite '...', :loggers => [SomeLogger] 
```

我希望 Sequel 登录到与 Sinatra 相同的目的地。但似乎 Sinatra 记录器仅在请求处理期间可用（仅在实例方法中通过`request.logger`）。我不想在每个请求上重新打开数据库连接，我只想在我的`configure`部分执行一次。

我怎么能这样做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T15:06:22.723

`DB.logger = request.logger`如果之前过滤器仅在运行时可用而不创建新的数据库连接，则 in a before 过滤器将解决该问题。

我不确定 Rack/Sinatra 记录器是否在请求之外可用。查看 rack/logger.rb，似乎每个请求都创建了一个新的。

# c# - 使用 SimpleITK 0.5.1 C# Windows 打开 MINC 2.0 图像时出错

> ID：13110190
> 
> 赞同：0
> 
> 时间：2012-10-28T15:35:09.043
> 
> 标签：c#, itk, minc

我正在尝试使用 SimpleITK 0.5.1 C# 版本加载 MINC 2.0 图像

我收到以下错误：

```
System.ApplicationException : Exception thrown in SimpleITK ImageFileReader_Execute: ..\..\..\..\..\ITK\Modules\IO\HDF5\src\itkHDF5ImageIO.cxx:883:
itk::ERROR: HDF5ImageIO(000000001DBE7AE0): H5Dopen2 failed 
```

我的代码如下：

```
String fileName = @"d:\Temp\MRI\tst-convert.mnc";

ImageFileReader reader = new ImageFileReader();
reader.SetFileName(fileName);
Image image = reader.Execute(); 
```

你有什么建议会导致这样的错误吗？我应该安装一些额外的库吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-07T15:24:52.420

从 ITK 版本 4.4 开始，提供了一个新的 MINC IO 模块。默认情况下未启用此功能，并且 SimpleITK 版本不包含此功能。但是，通过启用“Module_ITKIOMINC”cmake 选项，可以在启用此模块的情况下构建自定义 ITK。然后可以针对该版本的 ITK 构建自定义 SimpleITK。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T07:28:44.780

我收到了 ITK 用户组的回复：当前版本的 SimpleITK 和 ITK 无法读取 MINC 图像。

# opengl-es - 使用相同的着色器处理 GL_RGBA 和 GL_ALPHA 纹理？

> ID：13110196
> 
> 赞同：2
> 
> 时间：2012-10-28T15:35:49.617
> 
> 标签：opengl-es, opengl-es-2.0, glsl

所以我的应用程序主要使用 rgba 纹理进行渲染，但在少数情况下，我使用 alpha 蒙版来渲染文本。

我希望我的片段着色器的输出是给定坐标处纹理采样器的值乘以我传入的颜色均匀度。问题是我找不到处理这两种情况的简单解决方案。

所以对于 rgba 纹理，这给出了预期的结果：

```
gl_FragColor = texture2D(diffuseTexture, varTexcoord.st, 0.0) * color; 
```

但是对于 alpha 纹理，输出总是黑色的。我假设纹理采样器将 alpha 纹理的每个像素视为：rgba(0, 0, 0, alpha)，并且我希望它被视为 rgba(1, 1, 1, alpha)。我可以通过以下方式在 alpha 纹理上获得所需的结果：

```
gl_FragColor = texture2D(diffuseTexture, varTexcoord.st, 0.0).w * color; 
```

但显然这会破坏 rgba 纹理。

我对 GLSL 还很陌生，我想知道是否有处理这两种情况的好方法，或者我是否必须拥有 2 个不同的着色器，或者将我所有的 aplha 纹理转换为 rgba。

**编辑：**

我想我最终会在加载资产时将我的 alpha 纹理重新打包为 GL_LUMINANCE_ALPHA 纹理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T15:42:55.253

您有两种不同的方式来处理数据。所以你有两个不同的着色器。切换它们。着色器反映将要发生的事情。

如果您对 glTexEnv、照明等的每个设置使用旧的、已弃用的固定功能管道，则会在原位创建特定的着色器。

切换着色器就像调用 glUseProgramm 一样简单

# operator-keyword - 网站目录中的文件未显示在谷歌搜索结果中

> ID：13110200
> 
> 赞同：0
> 
> 时间：2012-10-28T15:36:11.800
> 
> 标签：operator-keyword, file-type

我知道网站（比如**xyz.com**）
有一些**.zip**文件（比如**xyz.com/y0.zip**），但*他们没有在*他们刚刚上传的网站上指定（保存在他们的存储中）。我知道一些文件名（这里**是 y0.zip 或 y1.zip**）
，但我不知道一些文件名（比如**n.zip**）

经过长时间的谷歌搜索，即搜索**文件类型：zip 站点：xyz.com** 以及 **“www.xyz.com/y0.zip”**

我仍然没有从谷歌搜索中得到任何结果

我**想要 google 结果中的 zip 文件列表，** 以便我能够下载未知文件（此处**为 n.zip**）

谷歌搜索中是否有任何运营商或任何其他方式来实现它..

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T18:10:21.497

`Google`和其他搜索引擎通过浏览网站中的所有网页来索引文件。

探索通常从主（索引）页面开始，并传播到从该页面可到达（即链接）的其他网页，对所有发现的页面进行相同的操作。

因此，如果网页中没有链接（在同一网站或任何其他网站上）链接到您询问的 .zip 文件，搜索引擎将无法发现这些文件。

还有一些网站的`robots.txt`文件包含目录列表，告诉搜索引擎正在浏览该网站，**不要**浏览这些目录和任何子目录或文件，这些目录包含管理和私人内容。

# c# - 覆盖datagridview中的列单元格文本

> ID：13110202
> 
> 赞同：0
> 
> 时间：2012-10-28T15:36:19.230
> 
> 标签：c#, winforms, datagridview

通过这种方式，我们可以覆盖 datagridview col 字符串：并以这种格式输入 Config1、Config2 等......！

```
DataSet ds = new DataSet();
 ds.ReadXml(@"D:\test\a.xml");
 for (int i = 1; i <= ds.Tables[0].Rows.Count; i++)
  {
       ds.Tables[0].Rows[i - 1][0] = "Config" + i;
  }
  dataGridView1.DataSource = ds.Tables[0]; 
```

就我而言，我的 datagridview col 已经从 xml 文件中填充了数据，之后我想通过上述方法覆盖（我没有使用任何数据集来读取 xml 文件）

这是我的方法，完全错误……有什么帮助吗？

```
private void writefunction()
{
        for (int i = 1; i <= dataGridView3.Columns["id"].Index; i++)
        {
            dataGridView3.Columns[i - 1][0] = "Config" + i;
        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T15:40:49.947

据我所知，您不能手动修改 GridView 的内容。要进行任何更改，您必须修改数据源中的相应数据并再次绑定 GridView。

要实现您要查找的内容，请修改 DataTable 中的值并将 GridView 的 DataSorce 属性设置为修改后的 DataTable 并调用 DataBind 方法。

# django - 动态相关对象django表单

> ID：13110205
> 
> 赞同：0
> 
> 时间：2012-10-28T15:36:35.603
> 
> 标签：django, django-forms

我目前有看起来像这样的模型

```
class Lg(models.Model):
    name = models.CharField(max_length = 50,choices = LG_CHOICES,unique = True)

class State(models.Model):
    name = models.CharField(max_length = 50,choices = STATE_CHOICES,unique = True)
    lg = models.ManyToManyField(Lg,related_name ='State_Lg',blank= True,null = True)

class AddPlaceForm(forms.Form):
    house_number = forms.IntegerField()
    street_name = forms.CharField()
    area = forms.CharField()
    city  = forms.CharField()
    lg = forms.ChoiceField(choices = Lg.objects.none()) 

    def __init__(self,state_id,*args,**kwargs):
        super(GenericPropertyForm,self).__init__(self,*args,**kwargs)
        self.fields['lg'] = forms.ChoiceField(choices=list(State.objects.get(id = state_id).lg.select_related())) 
```

我希望用户像这样从视图中传递状态ID`form = AddPlaceForm(state_id)`

有人可以帮忙吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T17:05:56.293

在您的视图代码中：

```
form = AddPlaceForm(state_id=state_id} 
```

形式

```
def __init__(self, *args, **kwargs):
     state_id = kwargs.pop('state_id', None)
     super(AddPlaceForm, self).__init__(*args, **kwargs)
     self.fields['lg'] = forms.ChoiceField(choices = ((lg.id, lg.name) for lg in State.lg.filter(id=state_id)) 
```

# php - 如何从字符数组中找到字符串匹配项？前任。给定 a,n,t 在单词列表表中查找字符串匹配 ant,an,tan

> ID：13110206
> 
> 赞同：0
> 
> 时间：2012-10-28T15:36:37.757
> 
> 标签：php, mysql, string, string-matching

到目前为止，我的数据库中有 27 个表。1个单词表（拼字游戏单词表），26个关联表。

```
Table  Fields
================
word   [id,word]
a      [word_id,count]
b      [word_id,count]
...
z      [word_id,count] 
```

我试图找出给定字符串的匹配单词。

例如，如果给定的数组是`a,n,t`我想知道的：`ant, tan, at, ta, an, na`.

我目前的策略是分解字符串中的每个字母并找到与所有字母匹配的相关单词。

例如：

```
SELECT word.word
FROM word, a, n, t
WHERE
    word.id = a.word_id OR
    word.id = n.word_id OR
    word.id = t.word_id 
```

但这最终会打印出所有包含 a`a,n or t`的单词。

如果我将所有运算符切换为 AND，我只会遇到一个匹配项：`ant`.

你能帮我解开这个谜吗？

我还关心如何处理字符串中的重复字母。我认为`count`字母关联表中的字段可以在这里提供帮助。如果单词是，则关联表`app`中的计数将为 2 。`p`

我在关联表的正确轨道上还是有更好的方法？

我试图在 php/mysql 中相当有效地处理这个问题。我知道之前有其他人在 C、perl、java 等语言中解决了这个谜题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T20:02:18.290

If you want a normalised approach, that would be:

```
wordLetters{
  INT wordID,
  CHAR[1] letter,
  INT count,
  PK(wordID, letter)
}

words{
  INT wordID PK,
  VARCHAR(255) word UNIQUE
} 
```

but this approach has a serious problem in terms of performance - namely it needs a full table scan on the word table. I am going to assume that there are not too many letters and suggest this approach:

```
words{
  INT wordID PK,
  VARCHAR(255) word UNIQUE,
  INT cA KEY,
  INT cB KEY,
  ...
  INT cZ KEY,
  KEY (cE, cT, cA, cO, cI, cN),
  ...
} 
```

A lookup query will be long but it will use indexes efficiently and it is generated by the PHP code anyways:

If the user has `[a,n,t]`, fetch the available words as:

```
SELECT word FROM words WHERE
   cA <= 1 AND cB = 0 AND cC = 0 AND ... AND cY = 0 AND cZ = 0 
```

This query will (probably) use the "ETAOIN" index as not many words that don't need an 'E' exist.

At this point, performance depends on the choice of indexes available for the database only and you can always add more indexes as deemed useful (even at runtime).

* * *

On database indexes:

An ordinary index is just a sorted list of items with an appropriate tree built over the list, enabling efficient range lookup (get all elements from x to y).

An ordinary index is defined by its sorting order. The sorting order is: order by some column first, then on another one, then on another one... .

For example, the `[E,T,A,O,I,N]` index will have all words sorted: first all words that don't need an `E`, then all words that need one `E`, then all words that need two `E`... . The words that need the same amount of `E`s will be sorted: first all words that don't need a `T`, then all words that need it once, then all words that need two `T`s ... . Of the words that need the same number of `E`s and `T`s, those that don't need an `A` come first.

If the database is asked to fetch all words that don't need an `E` or a `T` and at most one 'X', it can use this index to fulfill the first two requirements, then check all words within the range `E=0, T=0`.

The particular choice, `ETAOIN` is based on the phrase [ETAOIN SHRDLU](http://en.wikipedia.org/wiki/ETAOIN_SHRDLU) which orders the twelve most frequent letters in the english language by their frequency - this means that if this index is used, it should filter out the largest possible amount of words.

You use the example `RSTLNE`. This index will/may get used when the player has no `R`s, or `S`s. Benchmarking the lookup may tell you how much time was saved by using each particular index.

You can use an [`EXPLAIN EXTENDED`](http://dev.mysql.com/doc/refman/5.0/en/explain.html) query to see which indexes are considered and subsequently used for each particular query and how many rows are expected to be filtered out. Ex.:

```
EXPLAIN EXTENDED
  SELECT word FROM words
  WHERE cA=0 AND cB<=1 AND cC=0 AND ... 
```

# iphone - IOS，uiviewcontroller.h被锁定编辑

> ID：13110211
> 
> 赞同：2
> 
> 时间：2012-10-28T15:37:16.653
> 
> 标签：iphone, ios, uiviewcontroller

我有问题`XCode`。我现在正在寻找解决方案一段时间，也许几个小时，但没有结果。

我必须创建一个`UITextView`. 当我使用 control+drag 到控制器代码并填写它要求的内容时，我得到一个弹出窗口：

> UIViewController.h 被锁定以进行编辑，您可能无法保存更改。你想解锁吗？

当我点击解锁时，会出现另一个弹出窗口，说它无法解锁，因为我似乎没有这样做的权限。

我必须如何更改以及更改哪些内容才能获得该许可？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T15:40:14.563

该文件`UIViewController.h`是一个 iOS SDK 文件，您不应修改它。如果你想对这个类做点什么，就把它子类化。

# java - java继承找不到符号

> ID：13110216
> 
> 赞同：1
> 
> 时间：2012-10-28T15:37:27.827
> 
> 标签：java, inheritance, compilation

我的课上有这行：

`public class Line extends Figure`当我用这个命令编译时：

`$ javac -cp :./stdlib.jar Line.java`，我得到这个错误：

`Line.java:26: cannot find symbol`
`symbol : constructor Figure()`
`location: class Figure`
`public Line(double x0, double y0, double xn, double yn, Color initColor) {`
`-------------------------------------------------------------------------^`
`// the dashes above are supposed to be spaces, but I couldn't figure out how to format it correctly. The caret is actually there in that position`

通常我会理解这个错误，但这次我不知道发生了什么。我的`Figure.java`文件与我的`Line.java`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T15:40:53.403

问题是图中没有空的（默认）构造函数。您的 Line 有一个带有多个参数的构造函数。线延伸图。如果在 Line 的构造函数中没有调用超类中的特定构造函数，Java 将尝试调用默认（无参数）构造函数，但 Figure 没有，因此会出现编译错误。

在 Line 的构造函数中，您需要以下内容：

```
public Line(double x0, double y0, ...) {
    super(x0, y0);
    ...
} 
```

# mvvm - 单独的视图模型

> ID：13110217
> 
> 赞同：0
> 
> 时间：2012-10-28T15:38:08.683
> 
> 标签：mvvm, viewmodel

我正在创建一个允许用户创建、列出和编辑客户的应用程序。

你会创建一个单独的视图模型来列出实体吗？添加更新删除实体或一个视图模型并传递枚举以建立功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T16:08:08.210

我会为每个功能创建一个单独的视图模型。

一般来说，我不喜欢枚举来建立功能；它迫使您在代码中包含许多“如果”，这变得复杂且难以理解。在每个上下文中，我尝试根据上下文使用不同的技术来避免这种情况：WPF 应用程序的应用程序层中的 ViewModels，当不同行为依赖于某种状态时的状态模式，当我必须注入时的策略模式运行时的行为，或者我必须重新利用不同类中的行为，等等......有时您需要混合使用这种技术：例如，您可以拥有一个 ViewModel 来编辑具有由状态机实现的复杂行为的客户。

# vba - Outlook 2010 VBA 在新的 Exchange 同步约会上更改属性

> ID：13110218
> 
> 赞同：0
> 
> 时间：2012-10-28T15:38:12.257
> 
> 标签：vba, outlook, exchange-server, outlook-2010

在 Outlook 2010 中，我想根据主题行中写入的标识符更改约会中的某些属性。只要我在 Outlook 中更改约会并使用 _changeitem 事件，这就会很好。

```
Public WithEvents myOlItems As Outlook.Items
...
Private Sub myOlItems_ItemChange(ByVal Item As Object)
... 
```

但是现在，当在手机上添加约会然后从 Exchange Server 同步到 Outlook 时，我需要做同样的事情，但“_ItemChange”事件不会触发。我对 MS 文档的搜索并没有真正成功。

有谁知道如何从 Exchange 同步项目（约会）中获取新的信息，以便可以通过编程方式调整某些属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T20:19:02.907

好的，事实证明，_ItemAdd 事件被触发了。那会做的。

# java - 将逗号添加到十进制数

> ID：13110219
> 
> 赞同：5
> 
> 时间：2012-10-28T15:38:22.177
> 
> 标签：java, string, decimal, comma

我有一系列 BigDecimal 数字（例如：）`123456.78`。我想添加逗号，使它们看起来像这样`123,456.78`，所以我将它们转换为字符串并使用以下代码：

```
private static String insertCommas(String str) {
    if(str.length() < 4){
        return str;
    }

    return insertCommas(str.substring(0, str.length() - 3)) + 
        "," +         
        str.substring(str.length() - 3, str.length());
} 
```

要做到这一点。问题是当我运行`insertCommas(str)`它时会打印`123,456,.78`. 我想不出一种方法来防止逗号放在小数点之前。

--

还有一件事，它必须适用于大数和小数，这就是为什么我使用上面的代码而不是更简单的代码。

我也尝试过`DecimalFormat("#,##0.00")`类似的类型，但是当数字达到某个点时，它们会被零替换，这使我丢失了有关数字的信息。

帮助？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-28T15:50:40.927

有一种更简单的方法可以做到这一点。你只需要使用`SimpleDecimalFormat`

```
private static String insertCommas(BigDecimal number) {
  // for your case use this pattern -> #,##0.00
  DecimalFormat df = new DecimalFormat("#,##0.00");
  return df.format(number);
}

private static String insertCommas(String number) {
  return insertCommas(new BigDecimal(number));
} 
```

你可以在这里学习新的模式和更多内容：[DecimalFormat API](http://docs.oracle.com/javase/7/docs/api/java/text/DecimalFormat.html)

希望这可以帮助 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-01T13:10:07.680

聚会有点晚了，但是如果您将小数转换为字符串，则可以使用简单的 for 循环相当轻松地插入逗号。

```
for (int i=amount.indexOf('.')-3; i > 0; i -= 3){
String firstPart = amount.substring(0,i);
String lastPart = amount.substring(i);
amount = firstPart + ","+ lastPart;
} 
```

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T16:00:10.460

如果你坚持让你的功能工作，你可以使用这个：

```
private static String insertCommas(String str) {
    if(str.length() < 4){
        return str;
    }

    String[] tokens = str.split("[.]");
    return insertCommas(tokens[0].substring(0, tokens[0].length() - 3)) +
        "," +
        str.substring(tokens[0].length() - 3, tokens[0].length()) +
        ((tokens.length > 1) ? ("." + tokens[1]) : "");
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-28T15:47:17.883

看看 Java 的[格式化数字打印输出](http://docs.oracle.com/javase/tutorial/java/data/numberformat.html)教程。这将教您如何在打印或转换为字符串期间格式化您的号码。

# c# - 序列化 JSON 多维列表的问题

> ID：13110222
> 
> 赞同：4
> 
> 时间：2012-10-28T15:39:01.400
> 
> 标签：c#, .net, json, multidimensional-array, json.net

我正在使用 JSON.Net 序列化多维列表，但在正确序列化它时遇到问题。

这是我期望的结果：

```
 "children": [ {
        "children": [ {
           "children": [ {
              "date_added": "12995911618983970",
              "id": "8",
              "name": "NestedNestedURL",
              "type": "url",
              "url": "http://url.com/"
           } ],
           "date_added": "12995911579845538",
           "date_modified": "12995911618983970",
           "id": "5",
           "name": "NestedNestedFolder",
           "type": "folder"
        }, {
           "date_added": "12995911609609970",
           "id": "7",
           "name": "NestedURL",
           "type": "url",
           "url": "http://url.com/"
        } ],
        "date_added": "12995911570603538",
        "date_modified": "12995911609609970",
        "id": "4",
        "name": "NestedFolder",
        "type": "folder"
     }, {
        "children": [ {
           "date_added": "12995911631570970",
           "id": "9",
           "name": "NestedURL2",
           "type": "url",
           "url": "http://url.com/"
        } ],
        "date_added": "12995911589790970",
        "date_modified": "12995911631570970",
        "id": "6",
        "name": "NestedFolder2",
        "type": "folder"
     } 
```

但是，这与我实际得到的结果大不相同。我认为这里的问题是多个 URL 可以属于一个文件夹，多个文件夹可以属于一个文件夹，但我不确定如何实现这一点。这是我目前使用的代码：

```
public void Sync()
{
    Browser browser = new Chrome();
    SortableBindingList<Bookmark> marks = browser.ReturnBookmarks();
    SortableBindingList<object> newmarks = new SortableBindingList<object>();
    int count = 0;
   newmarks.Add(new json_top());
    json_top top = newmarks[0] as json_top;

    top.roots = new json_root();
    List<object> roots = new List<object>();

    Folder bookmarks_bar = new Folder();
    Folder other = new Folder();
    List<Object> barlist = new List<Object>();
    List<object> otherlist = new List<object>();
    List<object> children = new List<object>();
    List<string> existingFolders = new List<string>();

    bookmarks_bar.date_added = ToChromeTime(marks[0].added);
    bookmarks_bar.name = "Bookmarks bar";
    other.date_added = ToChromeTime(marks[0].added);
    other.name = "Other bookmarks";

    bool isBookmarkBar = true;

    Folder folder = new Folder();
    foreach (Bookmark mark in ordered)
    {
        List<string> fullpathlist = mark.fullPath.Split('\\').ToList();
        int count1 = 0;
        if (currentPath != mark.fullPath)
        {
            folder = (createFolder(fullpathlist, fullpathlist[0], mark));
            folder.children.Add(setChild(fullpathlist, folder, mark, 1));
            count++;
        }
        json_URL u = new json_URL();
        u.date_added = ToChromeTime(mark.added);
        u.id = id;
        u.name = mark.title;
        u.url = mark.url;
        folder.children.Add(u);
        if(isBookmarkBar)
            barlist.Add(folder);
        else
        {
            otherlist.Add(folder);
        }
    }
    bookmarks_bar.children = barlist;
    other.children = otherlist;
    top.roots.bookmark_bar = (bookmarks_bar);
    top.roots.other = other;
    string json = JsonConvert.SerializeObject(newmarks, Formatting.Indented);
    File.WriteAllText(@"c:\person.json", json);
}

    Folder setChild(List<string> fullPathList, Folder parent, Bookmark mark, int count )
    {
        if (count < fullPathList.Count)
        {
            Folder child = new Folder();
            child.date_added = ToChromeTime(mark.added);
            child.id = id;
            child.name = fullPathList[count];
            Folder LIST = setChild(fullPathList, child, mark, count + 1);
            child.children= LIST;
            return child;
        }            
    }

    public class Folder
    {
        public List<folderAndURL> children { get; set; }
        public long date_added { get; set; }
        public long date_modified
        {
            get { return 0; }
        }
        public int id { get; set; }
        public string name { get; set; }
        public string type
        {
            get { return "folder"; }
        }
    } 
```

这是我从该代码中得到的输出：

```
 "children": [
      {
        "children": {
          "date_added": 12995893609609970,
          "id": 0,
          "name": "NestedURL",
          "type": "url",
          "url": "http://url.com/"
        },
        "date_added": 12995893609609970,
        "date_modified": 0,
        "id": 0,
        "name": "NestedFolder",
        "type": "folder"
      },
      {
        "children": {
          "date_added": 12995893618983970,
          "id": 1,
          "name": "NestedNestedURL",
          "type": "url",
          "url": "http://url.com/"
        },
        "date_added": 12995893618983970,
        "date_modified": 0,
        "id": 1,
        "name": "NestedFolder",
        "type": "folder"
      },
      {
        "children": {
          "date_added": 12995893631570970,
          "id": 2,
          "name": "NestedURL2",
          "type": "url",
          "url": "http://url.com/"
        },
        "date_added": 12995893631570970,
        "date_modified": 0,
        "id": 2,
        "name": "NestedFolder2",
        "type": "folder"
      } 
```

那么，如何更改我的代码以匹配输入和输出？就像我说的那样，这似乎是多个文件夹未应用于一个父文件夹的问题。

编辑：我在[这里](http://pastebin.com/sn7YPYPC)上传了完整版本的代码，因为我删掉了一些部分，因为空间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T13:02:37.130

I don't know if this is what you want:

```
/// <summary>
/// Load file from
/// C:\Users\XXXX\AppData\Local\Google\Chrome\User Data\Default\Bookmarks
/// </summary>
[TestFixture]
public class ChromeBookmarks
{
    [Test]
    public void RoundTripBookmarksTest()
    {
        JsonSerializer jsonSerializer = JsonSerializer.Create(
            new JsonSerializerSettings
                {
                    MissingMemberHandling = MissingMemberHandling.Error,
                });
        RootObject rootObject;
        using (JsonTextReader jsonTextReader = new JsonTextReader(new StringReader(Properties.Resources.Bookmarks))) //I added my bookmars as an embedded txt file for convenience
        {
            rootObject = jsonSerializer.Deserialize<RootObject>(jsonTextReader);
        }
        //Here you have the contents of the bookmarks file in rootObject if you need to do manipulations
        StringBuilder stringBuilder = new StringBuilder();
        using (JsonTextWriter jsonTextWriter = new JsonTextWriter(new StringWriter(stringBuilder)))
        {
            jsonTextWriter.Formatting = Formatting.Indented;
            jsonTextWriter.Indentation = 3;
            jsonSerializer.Serialize(jsonTextWriter, rootObject);
        }
        var json = stringBuilder.ToString();
        File.WriteAllText(@"C:\person.json", json);
    }
} 
```

```
public class Child
{
    [JsonProperty(PropertyName = "children")]
    public List<Child> Children { get; set; }
    [JsonProperty(PropertyName = "date_added")]
    public string DateAdded { get; set; }
    [JsonProperty(PropertyName = "id")]
    public string Id { get; set; }
    [JsonProperty(PropertyName = "name")]
    public string Name { get; set; }
    [JsonProperty(PropertyName = "type")]
    public string Type { get; set; }
    [JsonProperty(PropertyName = "url")]
    public string Url { get; set; }
    [JsonProperty(PropertyName = "date_modified")]
    public string DateModified { get; set; }
} 
```

```
public class Roots
{
    [JsonProperty(PropertyName = "bookmark_bar")]
    public Child BookmarkBar { get; set; }
    [JsonProperty(PropertyName = "other")]
    public Child Other { get; set; }
    [JsonProperty(PropertyName = "synced")]
    public Child Synced { get; set; }
} 
```

```
public class RootObject
{
    [JsonProperty(PropertyName = "checksum")]
    public string Checksum { get; set; }
    [JsonProperty(PropertyName = "roots")]
    public Roots Roots { get; set; }
    [JsonProperty(PropertyName = "version")]
    public int Version { get; set; }
} 
```

I used [`this`](http://json2csharp.com/) to generate the classes, did not read the docs just passed my bookmarks so there is a chance some field is missing.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-31T22:19:50.663

首先你分配`folder.children = (setChild(fullpathlist, folder, mark, 1));`，几行之后你用`folder.children=(u);`. 您的文件夹对象中不会有来自递归调用的孩子。

# javascript - 遍历数组时文本变得未定义

> ID：13110223
> 
> 赞同：5
> 
> 时间：2012-10-28T15:39:08.730
> 
> 标签：javascript, arrays, string

现在，我是网络编程的新手，尤其是 javascript。我正在尝试编写一个脚本，该脚本将在用户单击图像时更新网页上的图像及其文本。这是代码：

```
//Images array
imgs = Array("test1.jpg", "test2.jpg", "test3.jpg");

//Names array
names = Array("Test1", "Test2", "Test3");

//Holds how many times our page has been clicked
var click = 0;

//Another click var
var click2 = 0;

//change function 
function change()
{

//Get the ID of 'nam', and start incrementing the elements in our array
document.getElementById("nam").innerHTML = names[++click2];

//Get an element with the ID 'first', and start incrementing the elements in  our      array
document.getElementById("first").src = imgs[++click];

//If the user clicks to the end of the gallery
if(click==2)
{
    click = -1;
}

if(click2==2)
{
    click = -1;
}

} 
```

可能不是最好的方法，但这段代码首先会起作用。但是，当我单击第三张图片返回第一张图片时，图片工作正常，但文本变为“未定义”。我四处搜索，但我似乎找不到任何与这段代码真正“错误”的地方。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T15:42:22.153

var 名称中的错字：

```
//If the user clicks to the end of the gallery
if(click==2)
{
    click = -1;
}

if(click2==2)
{
    click = -1;
} 
```

应该

```
//If the user clicks to the end of the gallery
if(click==2)
{
    click = -1;
}

if(click2==2)
{
    click2 = -1;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T15:42:25.877

你是增加点击和click2然后应用它。你应该用-1初始化click和click2；由于 click 由 0 初始化，names[++click2] 将返回第二个项目而不是第一个项目。

```
var click = -1;

//Another click var
var click2 = -1; 
```

还

```
if(click2==2)
{
    click = -1;
} 
```

应该

```
if(click2==2)
{
    click2 = -1;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-28T15:43:08.683

您应该确保调用您的可用索引`names`和`imgs`. 在第三个之后，您将拨打号码`4`，这没有定义。

你可以这样做：

`document.getElementById("nam").innerHTML = names[(++click2)%names.length];`

`document.getElementById("first").src = imgs[(++click)%imgs.length];`

这将使数字保持在 0 和 2 之间。

发生的事情： in 中的运算符`%`在除以`a % b`时返回其余部分。例如是.`a``b``5 % 2 == 1`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-28T15:43:20.050

您的最后一个 if 语句未将 click2 分配给-1。将其更改为 click2 = -1

# mysql - 使用正则表达式删除表 - MySQL

> ID：13110225
> 
> 赞同：6
> 
> 时间：2012-10-28T15:39:22.673
> 
> 标签：mysql

我在数据库中有一堆表`MySQL`，其中一些以 phpbb_ ***开头，我想将它们全部删除。有人知道这样做而不是这样做吗

```
drop table <tablename>; 
```

每一次？像正则表达式？

```
drop table phpbb* 
```

或类似的东西？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-28T15:49:48.567

你可以使用这个 MySQL 过程：

```
DELIMITER $$
CREATE PROCEDURE drop_tables_like(pattern VARCHAR(255), db VARCHAR(255))
BEGIN
    SELECT @str_sql:=CONCAT('drop table ', GROUP_CONCAT(table_name))
    FROM information_schema.tables
    WHERE table_schema=db AND table_name LIKE pattern;

    PREPARE stmt from @str_sql;
    EXECUTE stmt;
    DROP prepare stmt;
END$$

DELIMITER ; 
```

要删除“test1”数据库中以“a”开头的所有表，您可以运行：

```
CALL drop_tables_like('a%', 'test1'); 
```

参考：[http ://dev.mysql.com/doc/refman/5.5/en/drop-table.html](http://dev.mysql.com/doc/refman/5.5/en/drop-table.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-29T18:58:53.257

`ERROR 1046 (3D000): No database selected`补充一下上面的答案，如果在开始过程之前没有选择数据库，MYSQL 会返回错误。因此，将此声明`use <<db_name>>;`添加到上述答案中。修改后的解决方案是：

```
use <<db_name>>;    
DELIMITER $$
CREATE PROCEDURE drop_tables_like(pattern VARCHAR(255), db VARCHAR(255))
BEGIN
    SELECT @str_sql:=CONCAT('drop table ', GROUP_CONCAT(table_name))
    FROM information_schema.tables
    WHERE table_schema=db AND table_name LIKE pattern;

    PREPARE stmt from @str_sql;
    EXECUTE stmt;
    DROP prepare stmt;
END$$    
DELIMITER ;
CALL drop_tables_like('a%', '<<db_name>>'); 
```

确保将 <> 替换为数据库的实际名称。干杯!

# xcode - UITableView 不会加载 NSMutableArray 中的所有对象

> ID：13110226
> 
> 赞同：1
> 
> 时间：2012-10-28T15:39:31.883
> 
> 标签：xcode, uitableview, nsmutablearray, singleton

我有一个 UITableView，我用 NSMutable 数组中的对象填充。出于某种原因，表格视图总是加载数组 - 1 对象。如果 [array count] == 3 它只加载 2 个对象（单元格）

这是我的代码。谁能告诉我为什么 tableview 总是跳过数组中的第一个或最后一个对象？（我不知道是哪个）

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    // singleton class containing NSMutable array
    sharedEventData = [EventData sharedDataInstance]; 

    self.navigationController.delegate = self;

    // if this returns 10 the tableview always loads 9 objects. count -1
    NSLog(@"eventList count: %u", [sharedEventData.listOfEvents count]);

    [self.tableView reloadData];

}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    // Return the number of sections.
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    // Return the number of rows in the section.
    // sharedEventData.listOfEvents is my NSMutableArray
    return [sharedEventData.listOfEvents count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle
                                      reuseIdentifier:CellIdentifier];
    }

    cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
    EKEvent *currentEvent = [sharedEventData.listOfEvents objectAtIndex:indexPath.row];

    NSDate *date = [currentEvent startDate];
    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    [dateFormatter setDateStyle:NSDateFormatterMediumStyle];
    [dateFormatter setTimeStyle:NSDateFormatterNoStyle];

    NSString *dateString = [dateFormatter stringFromDate:date];
    // Get the event at the row selected and display it's title
    cell.textLabel.text = [[sharedEventData.listOfEvents objectAtIndex:indexPath.row] title];
    cell.detailTextLabel.text = dateString;

    //NSLog(@"date string: %@", dateString);

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T06:08:46.483

首先，您在 didload 方法中的数组中提供一些静态数据，然后检查它是否返回正确答案，然后检查 numberOfRowsInSection 的返回值是什么。我认为这是工作，你发现你的问题和在 didload 中的一件事你删除了 reloadtable 方法，因为 didload 第一次调用然后表也重新加载

# perl - 如何消除perl中子字符串的重复

> ID：13110227
> 
> 赞同：1
> 
> 时间：2012-10-28T15:39:31.393
> 
> 标签：perl, substring

我试图在每次出现“E”时打破一个字符串。但在输出中，我想跳过在前一个破损循环中较早到达的那些子字符串。例如。如果我在字符串`$s='ABCDEABCDEABCDEABCD'`中的第 5、第 10 和第 15 位出现“E”的字符串，则由于位置 10 断裂而出现的子串不应出现在位置 15 断裂导致的子串中。下面给出的脚本在“E”的每个位置都中断。但我无法停止子字符串的重复。请帮忙！

```
my $s = 'ABCDEAXBCDEAYBCDEAZBCD';
my @where; my @array;my @final;
my $result; my $j; 

for ($j = 0; $j <= 2; $j++) {

    $where[j] = index($s,"E",$where[j-1]) + 1;
    push @array, $where[j];
}

for my $array (@array) {

    substr($s, $array-1, 1) = "\0";
    my @a = split(/E(?!P)/, $s);
    substr($s, $array-1, 1) = 'E';

    $_ =~ s/\0/E/g foreach (@a);
    $result = join ("E,", @a).'E'; 
    @final  = split(/,/, $result);
    print "@final\n";
} 
```

我得到的输出是：

```
ABCDEAXBCDE AYBCDE AZBCDE
ABCDE AXBCDEAYBCDE AZBCDE
ABCDE AXBCDE AYBCDEAZBCDE 
```

预期输出：

```
ABCDEAXBCDE AYBCDE AZBCDE
ABCDE AXBCDEAYBCDE
AXBCDE AYBCDEAZBCDE 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T16:04:09.137

我不明白您的问题的目的/描述，但您可以添加一个哈希来跟踪您之前看到的子字符串并删除它们，方法是将最后一个循环更改为：

```
my %seen;
for my $array (@array) {
  substr($s, $array-1, 1) = "\0";
  my @a = split(/E(?!P)/, $s);
  substr($s, $array-1, 1) = 'E';
  $_ =~ s/\0/E/g foreach (@a);
  $result = join ("E,", @a).'E'; 
  @final = grep { !exists $seen{$_} } split(/,/, $result);
  $seen{$_}=1 for @final;
  print "@final\n";
} 
```

这会将输出更改为：

```
ABCDEAXBCDE AYBCDE AZBCDE
ABCDE AXBCDEAYBCDE
AXBCDE AYBCDEAZBCDE 
```

您的代码看起来像是从 C 语言翻译过来的。如果您尝试更清楚地描述您想要做什么，也许有人可以帮助您提供更惯用的 Perl 版本。

# algorithm - 拼写检查重复字母

> ID：13110231
> 
> 赞同：1
> 
> 时间：2012-10-28T15:39:41.983
> 
> 标签：algorithm, spell-checking, trie

我正在写一个拼写检查器。我对 Levenshtein 距离、尝试等都了如指掌……

然而，我的问题是，用重复的字母纠正一个单词，例如：haaaaapppppyyy to happy。解决这个问题的最佳方法是什么？

到目前为止，我正在考虑使用修改过的树，当我到达“a”并看到树中没有另一个跟随“a”时，我会跳过字符串中的所有 a，直到我到达 p 并从那里继续。

我不完全确定这是实现它的最佳方式，或者它是否适用于所有字符串。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T15:44:13.987

您可以创建一个删除所有重复字母的新trie（例如happy -> hapy）。检查单词时，做同样的事情（haaaaapppppyyy -> hapy）并在 trie 中搜索它。

# javascript - Javascript获取变量字符串的最后一部分

> ID：13110238
> 
> 赞同：1
> 
> 时间：2012-10-28T15:40:29.363
> 
> 标签：javascript

我有这样的字符串；

```
a-variable-part[]
another-string[x] 
```

在不知道每个字符串的长度的情况下，我想将字符串的第一部分与里面的内容分开 []

在上面的例子中，我想得到：

*   “一个变量部分”，“”
*   “另一个字符串”，“x”

你知不知道怎么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-28T15:44:17.670

您可以使用正则表达式来查找如下两部分：

```
function getParts(str) {
    var matches = str.match(/(^.*?)\[(.*?)\]/);
    if (matches) {
        return({first: matches[1], second: matches[2]});
    }
    return(null);
} 
```

工作演示：http: [//jsfiddle.net/jfriend00/Nn63v/](http://jsfiddle.net/jfriend00/Nn63v/)

为了解释正则表达式，它匹配从字符串开头到第一个 [ 字符的第一组字符。然后，它匹配 [ 和 ] 之间的第二组字符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-28T15:47:53.817

如果你运行这个：

```
'another-string[x]'.slice(0, -1).split('['); 
```

它会给你一个包含两个元素的数组：`["another-string", "x"]`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T15:46:57.780

在基本层面上，这将起作用：

```
var myString = 'foo[bar]';

var bitInBrackets = myString.split('[')[1].split(']')[0];// will be string 'bar' 
```

如果您要进行大量字符串操作，那么可能值得学习一些关于正则表达式的知识，但如果这就是您想要做的，并且您知道字符串将遵循这种格式，那么上面的内容就可以正常工作。

希望这可以帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-28T15:50:10.493

使用正则表达式执行此操作的最佳方法

```
var result = input.match( /^([^\[]+)\[([^\]]+)\]$/ ); 
```

# c++ - c++ 出现分段错误 - c++ 是否自动释放对象？

> ID：13110244
> 
> 赞同：-4
> 
> 时间：2012-10-28T15:41:20.180
> 
> 标签：c++, segmentation-fault

我想知道我的 C++ 文件中的类。我确实有一个名为“node”的类和一个名为“edge”的类。在此类节点中是这样的方法：

```
Edge calculateEdgeTo(Node&); 
```

然后是具有以下操作的主文件：

```
Node* n1 = new Node(...);
Node* n2 = new Node(...);

delete n1;
delete n2; 
```

这有效..但如果我：

```
Node* n1 = new Node(...);
Node* n2 = new Node(...);

Edge e = n1->calculateEdgeTo(*n2);

delete n1;
delete n2; 
```

我遇到了分段错误（我认为 n1 已经被释放）。如果我尝试在 n1 上执行其他操作，它也不起作用......总是一个分段错误。

编辑：

这是函数的代码：

```
Edge Node::calculateEdgeTo(Node& node){
    return new Edge((*this), (*this));
} 
```

和边缘的构造函数：

```
Edge::Edge(const Node& src, const Node& tar){
    this->src = &src;
    this->tar = &tar;
} 
```

而 src 和 tar 是节点上的指针。

编辑结束。

为什么 n1 从系统中释放出来？我怎么能强迫它不这样做？

亚历克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T15:43:58.813

不，C++ 不会“自动释放”对象。只有当您调用它们时，它们才会被删除`delete`。

您的代码崩溃的一些可能原因可能是：

*   你的`calculateEdgeTo`函数一定是做错了什么，这会产生你的段错误，而不是被释放的对象。

*   当您`n2`通过do 取消引用`*n2`然后将其传递给 时`calculateEdgeTo`，您必须确保将正确的数据从中`n2`复制到函数`Node`中使用的数据中`calculateEdgeTo`。您需要编写复制构造函数以确保其有效。

# javascript - 带有jquery的div内的元素数

> ID：13110245
> 
> 赞同：12
> 
> 时间：2012-10-28T15:41:20.647
> 
> 标签：javascript, jquery, html

> **可能重复：**
> [获取父div jquery中的元素编号](https://stackoverflow.com/questions/9483670/get-the-elements-number-inside-parent-div-jquery)

是否可以获取 div 内的元素数量？

```
<div id=count">
   <span></span>
   <span></span>
   <span></span>
   <span></span>
</div> 
```

结果应该是

```
 4 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-10-28T15:42:15.890

```
$('#count').children().length; // 4 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-28T15:41:57.343

```
var count = $('#count > *').length; 
```

# windows-7 - 在带有 Python 3.2.1 的 win7 上，从命令行读取字符串后的特殊字符是什么？

> ID：13110246
> 
> 赞同：0
> 
> 时间：2012-10-28T15:41:39.333
> 
> 标签：windows-7, input, python-3.x

我在文件中有一个脚本：

```
#../Python32/Test.py
y = input("Please input:")
print("'" + y + "'") 
```

从命令行，我运行脚本，结果在 XP 和 Win7 之间是不同的：

在 XP 上：

```
> Python Text.py
Please input:h
'h' 
```

在 Win7 上，结果是：

```
> Python Text.py
Please input:h
'h 
```

在 Win7 上，结果中缺少第二个单引号。

但如果脚本如下所示：

```
#../Python32/Test2.py
y = input("Please input:")
print("'" + y.rstrip() + "'") 
```

结果在win7和XP上都是一样的。

```
> Python Text.py
Please input:h
'h' 
```

比较结果，win7上从命令行读取的字符串后面应该有特殊字符。我在互联网上搜索并尝试了所有我知道的方法，但无法得到答案。

在win7上通过命令行读取的字符串后面的特殊字符是什么？或者有没有办法可以在我的脚本中打印特殊字符？

提前感谢您的回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T15:50:30.540

您在字符串中有一个回车，从 Windows 结束的 CRLF 行开始。这会将光标移动到行首，覆盖第一个引号。`input()`应该删除它。我认为该错误已[在 3.2.1 中修复](http://bugs.python.org/issue11272)。你确定你没有使用3.2？

# java - JPA - 在@DiscriminatorValue 中使用空值

> ID：13110247
> 
> 赞同：0
> 
> 时间：2012-10-28T15:41:53.733
> 
> 标签：java, jpa

我想知道是否可以使用 DiscriminatorValue 以下列方式区分两个子类型： B extends A

@DiscriminatorValue( **null** ) 一个

@DiscriminatorValue("Some-Value") B 扩展 A

关键是我想检查某个 DiscriminatorType.Char 列中是否**有空值**。我试着写“”（空字符串）作为值，也是空的。尼特工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T05:19:08.480

DiscriminatorValue 通常由实现设置，只有在实现无法正确区分两个类时才需要设置它，例如具有重复的类名或非常长的类名。

例如，在 Hibernate/Postgres 中，默认的鉴别器是简单的类名。我唯一一次必须设置它是在深度嵌套的类中，这些类的运行时间超过了数据库中的名称限制。

所以，长话短说，除非你*必须*，否则不要指定鉴别器值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T14:11:53.797

注释不允许空指示符，规范也不直接支持它。

如果您使用的是 EclipseLink，您应该能够使用 DescriptorCustomizer 将 null classIndicator 映射添加到 A 的 ClassDescriptor 的 inhertiancePolicy。

# php - Zend 框架 2：sql 子查询

> ID：13110257
> 
> 赞同：5
> 
> 时间：2012-10-28T15:42:50.937
> 
> 标签：php, zend-framework2

在 ZF1 中它是这样工作的：

```
 $selectColumns = array(
   '*',
   'orders_total' => "(".$db->select()->from("orders", array("COUNT(*)"))->where("orders.parent_id=mytable.id").")",
 );
 $select = $db->select()->from('mytable', $selectColumns); 
```

如何在 ZF2 中做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-04T09:23:18.747

请试试这个。

```
$sql = new Sql($this->_adapter);
$mainSelect = $sql->select()->from('mytable');
$subQry = $sql->select()
        ->from('orders')
        ->columns(array('orderCount' => new \Zend\Db\Sql\Expression('COUNT(orders.id)')));
$mainSelect->columns(
        array(
            'id', 
            'orders_total' => new \Zend\Db\Sql\Expression('?', array($subQry)),
        )
);

$statement = $sql->prepareStatementForSqlObject($mainSelect);
$comments = $statement->execute();
$resultSet = new ResultSet();
$resultSet->initialize($comments);

return $resultSet->toArray(); 
```

链接：[ZF2 - 子查询](https://stackoverflow.com/questions/15742290/subquery-in-zend-framework2/15743270#15743270)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T16:44:45.983

你可以试试这个：

```
// Make your query here using the builder if you wish, 
// but we will need to convert to string for the Expression
$sub = new Select('orders');
$sub->columns(array(new Expression('COUNT(*) as total')))
    ->where(array('id' => 4))
;
// You could just create an expression..
$subquery = new \Zend\Db\Sql\Expression("({$sub->getSqlString()})");

$select = new \Zend\Db\Sql\select('tablename'); // this is inside a 

$select->columns(array('*', 'orders_total' => $subquery)); 
```

输出将是这样的：

```
SELECT 
    .*, 
    (SELECT COUNT(*) as total FROM "orders" WHERE "id" = '4') AS orders_total 
FROM tablename 
```

我还没有想出一个很好的方法来使用查询生成器来执行这些类型的查询，而不必使用原始查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T16:01:57.413

如果没有更多信息，您可以尝试：

```
 $selectColumns = array(
    '*',
    'orders_total' => "(".$db->select()->from("orders", array("COUNT(*)"))->where("orders.parent_id", "mytable.id").")",
);
 $select = $db->select()->from('mytable', $selectColumns); 
```

您需要在顶部添加 use 语句：

```
use Zend\Db\Sql\Select;
use Zend\Db\Sql\Where; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-13T17:17:40.960

您可以尝试将 SQL 重组为：

```
SELECT
    *,
    SUM(IF(O.parent_id IS NULL, 0, 1)) AS orders_total
FROM mytable
    LEFT JOIN orders O ON mytable.id = O.parent_id 
```

您可以使用 Zend Framework 2 将其表示为：

```
$select = new Select('mytable');
$select->columns(array(
    '*',
    'orders_total' => new Expression("SUM(IF(O.parent_id IS NULL, 0, 1))")
));
$select->join(array('O', 'orders'), 
              "mytable.id = O.parent_id",
              Select::JOIN_LEFT);   
$select->group(array('mytable.id'));

$result = $dbh->selectWith($select); 
```

假设 $dbh 是您的数据库适配器。

# html - 我们应该将 CSS 应用于 vs. 元素吗？

> ID：13110264
> 
> 赞同：0
> 
> 时间：2012-10-28T15:43:43.130
> 
> 标签：html, css, semantic-markup

> **可能重复：**
> [是否应该在 html 元素或 body 元素上设置全局 css 样式？](https://stackoverflow.com/questions/4565942/should-global-css-styles-be-set-on-the-html-element-or-the-body-element)

有[一些](https://stackoverflow.com/questions/10947541/applying-a-background-to-html-and-or-body)关于将 CSS 应用到并获得一些很酷的效果的非常有趣的[讨论——比如两个背景图像，一个透明（但 CSS3 可能](https://stackoverflow.com/questions/7187569/whats-the-difference-in-applying-css-to-html-body-and)[会使它变得无用](http://www.css3.info/preview/multiple-backgrounds/)）。`<html>``<body>`

但是，对于标准情况，**哪个元素最适合将页面范围的 CSS 应用到？**

也许甚至有一些 CSS 属性更适合一个选择器而不是另一个？于是，两人分道扬镳？

（这涉及*跨浏览器兼容性*，以及根据规范的*适当语义。）*

我们也可以将通配符`* { }`选择器带入这个讨论中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T16:43:38.697

按照 Verandaguy 的回答，[http://www.w3.org/Style/Examples/011/firstcss.en.html](http://www.w3.org/Style/Examples/011/firstcss.en.html)将样式应用于正文。它没有说为什么，但是，它就是这么说的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T15:46:38.800

我相信 W3C 建议您将任何页面范围的样式应用于`<body>`元素。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-28T15:48:27.980

要创建具有多个页面的站点，最好使用 CSS 作为外部链接页面。这样每个页面都可以访问它。但是对于单个页面到页面，这在某些浏览器上会是一个“很酷的效果”。但在相同的效果中，其他计算机可能会以不同且渲染较少的方法看到这些效果。坚持使用 CSS 主要作为外部链接，仅在需要时使用样式标签，或者在页面上留下注释，说明他们应该如何以及在什么浏览器上查看它。

# c# - 在 IIS 上运行时我的应用程序设置在哪里

> ID：13110266
> 
> 赞同：1
> 
> 时间：2012-10-28T15:43:51.943
> 
> 标签：c#, iis-7

我有一个在 IIS 7.5 上作为站点运行的已部署 WCF 应用程序。该应用程序的一个业务 dll (ABC.dll) 具有“连接字符串”类型的应用程序设置。我想更改该数据库连接字符串，但找不到合适的位置。部署应用程序 dll 的 Bin 文件夹中的 ABC.dll.config 不包含应用程序在运行时使用的实际连接字符串。如何找到该连接字符串？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T15:50:04.827

如果您在 IIS 中运行 WCF 服务，则将配置放在`web.config`根文件夹中的文件中。这将包含适用于您的服务的所有设置。很可能正在使用此文件中的连接字符串。

从理论上讲，如果这些设置也不在 web.config 中，那么它们可能在`machine.config`您托管 WCF 服务的服务器中。尽管有人将特定于应用程序的连接字符串存储在此文件中的可能性很小，但有时您永远不知道。

# css - 赋能小资本

> ID：13110272
> 
> 赞同：4
> 
> 时间：2012-10-28T15:44:16.063
> 
> 标签：css

在 MS Word 上，我们有一个名为“Small Capitals”的文本功能。它将所有字母变为大写，但小写字母变小然后大写。我需要知道在 CSS 中是否可行。

例子：

**原文**：Hello World
**Small Capitals**：**H** ELLO **W** ORLD

**注意**：所以 Markdown 不支持`font-size`标签下的 CSS 样式`small`，所以我显示为 hack。好吧，**大写**字母比小写字母大。

在CSS中可能吗？我怎么能这样做？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-28T17:21:48.297

在英文中称为“small capitals”或“small caps”。在排版中，小写字母是（由字体作者）单独设计的字母版本。它们具有大写字母的形状，但它们的高度通常只比字体的 x 高度（小写字母“x”的高度）大一点。它们可能以小型大写字体实现，但更常见的是，它们是字体内部的字形变体。

在 MS Word 直到并包括 Word 2007，以及在 CSS 实现中`font-variant: small-caps`，“小写字母”实际上只是缩小大小的大写字母。（Word 2010 允许访问 OpenType 功能和真正的小型大写字母。）这通常意味着它们的笔划宽度太小，为了避免这种影响变得太糟糕，字体大小的减少是相当适度的，所以假的“小型大写字母” ”并不比正常的首都小很多。

由于这些原因，网页上最好避免使用“小型大写字母”。

但是，在 CSS 中提供对 OpenType 功能的访问权限的工作正在进行中。目前，支持以*CSS3 字体*[`font-feature-settings`](https://developer.mozilla.org/en-US/docs/CSS/font-feature-settings)中提议的属性的浏览器前缀版本的形式存在。例子：

 *```
<style>
body { 
  font-family: Calibri, sans-serif;
}
.sc { 
  -moz-font-feature-settings: 'smcp';
  -webkit-font-feature-settings: 'smcp';
  -ms-font-feature-settings: 'smcp';
  font-feature-settings: 'smcp';
}
</style>
<div class=sc>Hello world</div>
<div><span style="font-variant: small-caps">Hello world</span>
  (fake small caps)</div> 
```

这适用于支持的浏览器（Chrome、Firefox、IE 10），前提是字体具有小写字母（例如，Calibri、Cambria、Candara、Constantia、Corbel、Palatino Linotype）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-28T15:54:05.890

是的，你可以用`font-variant`. 我想你的意思是“大写”

```
<span style="font-variant:small-caps;">Hello World</span> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T15:53:37.653

我认为您在谈论小型股，因此请尝试：

**字体变体：小型大写；***

# php - 扩展 DateTime 类时出现致命错误

> ID：13110274
> 
> 赞同：0
> 
> 时间：2012-10-28T15:44:21.493
> 
> 标签：php, class, datetime, runtime-error

同一段代码在我的一台开发机器上失败，但在另一台开发机器和我的实时服务器上运行而没有抱怨，所以我怀疑这是一个 PHP 配置问题，但我不知道如何解决它。

```
class PGHQDate extends DateTime {}

$lastSeen = new PGHQDate();
$lastSeen->setTimestamp($this->_LastSeen); // int(10) unix timestamp 
```

只在这个特定的盒子上生产

```
Fatal error: Call to undefined method PGHQDate::setTimestamp() 
```

只是为了好玩，我在 PGHQDate 课上做了这个......

```
public function setTimestamp($unixtimestamp) {
    parent::setTimestamp($unixtimestamp);
} 
```

现在刷新页面会产生：

```
Fatal error: Call to undefined method DateTime::setTimestamp() 
```

这让我觉得我有点不知所措，因为我很确定如果没有它，你就无法安装 PHP！

我正在运行 PHP 5.2.17 并`phpinfo()`说启用了日期/时间支持。

不知道还能说什么...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T15:46:51.937

> 我正在运行 PHP 5.2.17

那就是你的问题；[`setTimestamp`在 PHP 5.3.0+ 中可用。](http://www.php.net/manual/en/datetime.settimestamp.php)

# java - 每当日期从 DatePicker 更改时显示文本

> ID：13110275
> 
> 赞同：0
> 
> 时间：2012-10-28T15:44:30.463
> 
> 标签：java, android, datepicker

请看下面的代码

**activity_main.xml**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" 
    android:orientation="vertical"
    >

    <Button 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/btnText"
        />

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/heading"
        />

    <TextView 
        android:id="@+id/text"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        />

    <DatePicker
        android:id="@+id/date"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        />

</LinearLayout> 
```

**MainActivity.java**

```
package com.example.datepicker;

import android.os.Bundle;
import android.app.Activity;
import android.app.DatePickerDialog.OnDateSetListener;
import android.view.Menu;
import android.widget.DatePicker;
import android.widget.Toast;

public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        DatePicker dp = (DatePicker)findViewById(R.id.date);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    private class DatePickerMe implements OnDateSetListener
    {

        public void onDateSet(DatePicker arg0, int arg1, int arg2, int arg3) 
        {
            Toast.makeText(MainActivity.this, "Click", Toast.LENGTH_LONG);

        }

    }
} 
```

在这里，我想在日期更改时显示“Toast”消息。我在“DatePickerMe”内部类下尝试过。但是，我不知道如何将这个“OnDateSetListener”注册到日期选择器（我假设 onDateSetListener 是正确的接口）。每当日期更改时，请帮助我显示文本。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T15:52:42.373

在调用 init 方法时注册监听器。

```
dp.init( year, month, day, new DatePickerMe() ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T15:55:02.337

我注意到了几件事：

*   您需要使用[`DatePicker#init()`](http://developer.android.com/reference/android/widget/DatePicker.html#init%28int,%20int,%20int,%20android.widget.DatePicker.OnDateChangedListener%29)来设置您的 OnDateChangedListener。
*   此外，您**必须**调用`show()`您的 Toast，否则它永远不会显示。
*   最后你*不需要*扩展 OnDateChangeListener 类，你可以像下面这样使用它。

尝试这个：

```
OnDateChangedListener listener = new OnDateChangedListener() {
    @Override
    public void onDateChanged(DatePicker view, int year, int monthOfYear, int dayOfMonth) {
        // Show your Toast by calling show()!
        Toast.makeText(MainActivity.this, "Click", Toast.LENGTH_LONG).show();
    }
};
DatePicker dp = (DatePicker)findViewById(R.id.date);

// Use Calendar to set the date to now
Calendar calendar = Calendar.getInstance();
dp.init(calendar.get(Calendar.YEAR), calendar.get(Calendar.MONTH), calendar.get(Calendar.DAY_OF_MONTH), listener); 
```

# java - 正则表达式匹配包含非重复单词的字符串

> ID：13110276
> 
> 赞同：0
> 
> 时间：2012-10-28T15:44:48.833
> 
> 标签：java, regex, groovy

我正在研究一个正则表达式，我需要验证一个包含 4 个用逗号分隔的不同单词的输入文本。

> 输入文字单词： - 一、二、三、四。这些词中的每一个都不应重复一次以上。所以，它可以是：二、三、四、一或三、四、二、一而不是一、一、一、一

这是我写的，并通过单独搜索找到了部分解决方案

```
^\b(one|two|three|four)\b?,\b(one|two|three|four)\b?,\b(one|two|three|four)\b?,\b(one|two|three|four)\b 
```

但是解决方案的问题是单词不断重复，“一，一，一，一”的测试失败了。

你能告诉我如何避免重复，我在哪里做错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T16:06:47.363

```
boolean valid( String input ) {
  input.tokenize( ',' ).with { list ->
    list.unique( false ) == list &&
      list.every { it in ['one','two','three','four'] }
  }
} 
```

应该不使用正则表达式

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T15:51:33.183

不使用单个正则表达式来解决这个特定问题会容易得多。

首先，`\b`是零宽度。所以你不需要跟随它使用 a `?`，你的意图可能是`\s?`。

接下来，在一般情况下，正则表达式几乎是无状态的，这意味着您需要按如下方式构建正则表达式。

```
^\s*(one\s*,(two\s*,(three\s*,four|four\s*,three)|three\s*,(two\s*,four|four\s*,two)... 
```

如您所见，您必须手动处理组合爆炸。这远远不够理想。

相反，您应该拆分`,`并使用 java 进行检查。

> 感谢回复。据我了解，您希望我不使用正则表达式，而是使用 java。您能否详细介绍一下如何签入 java

试试这个（未经测试的代码，将是错误）：

```
public parseList(String input) {
  String[] numbers = { "one", "two", "three", "four" };
  bool foundNumbers = { false, false, false, false };
  String delims = "\s*,";
  String[] tokens = input.split(delims);

  if (tokens.length != 4) {
    //deal with error case as you wish
  }

  for (int i = 0; i < numbers.length; ++i) {
    for (int j = 0; j < tokens.length; ++j) {
      if (numbers[i].equals(tokens[j])) {
        if (!foundNumbers[i]) {
          foundNumbers[i] = true;
        } else {
          //deal with error case as you wish
        }
      }
    }
  }

  for (int i = 0; i < foundNumbers.length; ++i) {
    if (!foundNumbers[i]) {
      //deal with error case as you wish
    }
  }

  //success
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T16:04:49.133

您可以通过这种方式使用负前瞻（参见[Regexr](http://regexr.com?32k60)）：

```
\b(one|two|three|four)\b,             # match one of the allowed words
\b(?!\1)(one|two|three|four)\b,       # match one of them but not first matched one
\b(?!\1|\2)(one|two|three|four)\b,    # match one of them but not first and second matched ones
\b(?!\1|\2|\3)(one|two|three|four)\b  # match one of them but not first, second and third matched ones 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-28T16:27:32.643

你绝对不应该为此使用正则表达式。不过，您可以：

```
boolean foundMatch = subjectString.matches(
    "(?x)                            # Verbose regex                        \n" +
    "(?:                             # Match...                             \n" +
    " (?:one()|two()|three()|four()) #  one of the four words               \n" +
    " (?:\\s*,\\s*|\\s*$)            #  a comma or end-of-string            \n" +
    "){4}                            # four times                           \n" +
    "$                               # End of string                        \n" +
    "\\1\\2\\3\\4                    # Assert that all four words have matched"); 
```

空的捕获组确保（以及`\1\2\3\4`最后）每个单词在匹配中只参与一次:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-28T15:49:18.450

为什么要使用正则表达式？

只需用逗号分割文本并进行通常的数组/列表重复检查

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-28T15:50:28.357

我相信您正在尝试使用正则表达式来解析非正则输入。在这种情况下，输入更像是一种上下文无关的语言。我建议对字符串进行标记并计数。

# javascript - 如何避免闪烁 iframe？

> ID：13110283
> 
> 赞同：1
> 
> 时间：2012-10-28T15:45:14.957
> 
> 标签：javascript, html, iframe

```
<a href="#" id="toggle01">CONTACT</a>

<script>
$('#toggle01').click(function() {
    $('#contact').slideToggle("slow");
    return false;
});
</script>

<div id="contact">
123-456<br />
</div>
<iframe id="player" src="http://www.youtube.com/embed/..."></iframe> 
```

一切正常，但是当我单击链接 CONTACT 并`div#contact`变得可见/不可见时，iframe 会闪烁并闪烁。
我怎样才能避免这种闪烁？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T15:50:09.400

您的脚本看起来正确，我看不出它应该闪烁的任何原因。但是你能试试下面的脚本吗？添加 e.preventDefault();

```
<script>
   $('#toggle01').click(function(e) {
     e.preventDefault();
     $('#contact').slideToggle("slow");
     return false;
   });
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T16:06:01.817

问题似乎是滑动动画。当您的 div 动画时，iframe 会向下移动并导致重新渲染。

您可以将 div 放在 iframe 之后，或者将其封装在另一个具有固定高度的 div 中。

例如：

```
<div style="height:50px;">
    <div id="contact">
        123-456<br />
    </div>
</div> 
```

但这会在您的 iframe 上方留下一个空白区域。

# scala - 我可以在 Scala 中将一个元素生成或映射成多个元素吗？

> ID：13110285
> 
> 赞同：7
> 
> 时间：2012-10-28T15:45:35.277
> 
> 标签：scala

```
val inArray = Array("a", "b", "c", "d")
// ...
val outArray = Array("a1", "a2", "a3", "b1", "b2", "b3", "c1", "c2", "c3", "d1", "d2", "d3") 
```

如何映射`inArray`到`outArray`？

这个想法是从它的每个元素中迭代`inArray`产生 3 个元素（在这个例子中通过连接一个索引）。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-28T15:47:58.977

你可以用`flatMap`.

```
inArray.flatMap(c => (1 to 3).map(c+)) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-28T15:55:45.657

这可以更好地使用理解

```
for {
  s <- inArray
  i <- Array(1, 2, 3) //or other traversable
} 
yield s + i 
```

这使用了 map 和 flatMap 的组合，如 SLS 中详细描述的那样

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-28T15:53:33.183

使用`for`-理解。

```
scala> for {
     |   x <- Array("a", "b", "c", "d")
     |   n <- 1 to 3
     | } yield x + n
res0: Array[java.lang.String] = Array(a1, a2, a3, b1, b2, b3, c1, c2, c3, d1, d2, d3) 
```

# css - 扩展 jQuery-UI 的图标

> ID：13110287
> 
> 赞同：0
> 
> 时间：2012-10-28T15:45:52.350
> 
> 标签：css, jquery-ui

在我的一个项目中，我需要扩展 jQuery-UI 图标的图标调色板。我需要稍大（22x22）和色彩鲜艳的。

所以我看了一下 jQuery-UI 是如何创建图标的，并对我的图标做了同样的事情。我希望我的“扩展”尽可能像 jQuery-UI-ish，所以我也开始覆盖一些 css 类。我的想法是

```
<div class="ui-rw-icon">
    <span class="ui-icon ui-icon-pencil"></span>
</div> 
```

使用一个`ui-rw-icon`（或`ui-rw-icon-color`用于彩色图标）类来包装 jQuery-UI 的图标类，我可以用它来控制 css 行为。我的css文件有以下内容：

```
.ui-rw-icon .ui-icon {
    width: 22px;
    height: 22px;
    background-image: url(images/ui-rw-icons_grayscale_246x246.png);
}
.ui-state-default .ui-rw-icon .ui-icon { background-image: url(images/ui-rw-icons_grayscale_pale_246x246.png); }
.ui-state-hover .ui-rw-icon .ui-icon { background-image: url(images/ui-rw-icons_grayscale_246x246.png); }

.ui-rw-icon-color .ui-icon { width: 22px; height: 22px; background-image: url(images/ui-rw-icons_color_246x246.png); }
.ui-state-default .ui-rw-icon-color .ui-icon { background-image: url(images/ui-rw-icons_color_pale_246x246.png); }
.ui-state-hover .ui-rw-icon-color .ui-icon { background-image: url(images/ui-rw-icons_color_246x246.png); }

/* positioning */
.ui-rw-icon-color .ui-icon-pencil, .ui-rw-icon .ui-icon-pencil { background-position: 0 0; }
.ui-rw-icon-color .ui-icon-remove, .ui-rw-icon .ui-icon-remove { background-position: -32px 0; } 
```

这很好用，我的图标会显示出来。唯一的问题是图标比 jQuery-UI 的图标大 6 像素，有时我想重新定位它们以使其更适合。例如这里

```
<button name="pencil" class="menubar-button ui-rw-icon" id="menubar-meassure">Measures</button>
<button name="script" class="menubar-button" id="menubar-newmeasure">New Measure</button>

<script>
$('.menubar-button').each(function() {
        $(this).button({
            icons: {
                primary: "ui-icon-" + $(this).attr("name")
            }
        })
    });

</script> 
```

这是它的外观：

[![在此处输入图像描述](../Images/dfd7711fcc9a0acc5a7e501865358cff.png)](https://i.stack.imgur.com/ruyD9.png)
[（来源：[sakuranohana.org](http://sakuranohana.org/buttons.png)）]

我希望铅笔高一些。我在 jquery-ui-css 文件中找到了控制按钮内位置的规则：

```
.ui-button-icon-only .ui-icon,
.ui-button-text-icon-primary .ui-icon,
.ui-button-text-icon-secondary .ui-icon,
.ui-button-text-icons .ui-icon,
.ui-button-icons-only .ui-icon { 
     position: absolute; 
     top: 50%; 
     margin-top: -8px;
} 
```

所以我想我可以在这里做与`background-image`属性相同的事情：

```
.ui-rw-icon .ui-button-icon-only .ui-icon,
.ui-rw-icon .ui-button-text-icon-primary .ui-icon,
.ui-rw-icon .ui-button-text-icon-secondary .ui-icon,
.ui-rw-icon .ui-button-text-icons .ui-icon,
.ui-rw-icon .ui-button-icons-only .ui-icon {
     top: 40%;
} 
```

但这不起作用。Opera dragonfly 和 Firebug 都向我展示了定位规则来自`jquery-ui-1.9.0.custom.css`而不是来自我的`rw-ui.css`. 该`button()`函数创建了以下代码：

```
<button name="pencil" class="menubar-button ui-rw-icon ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-primary ui-state-focus" id="menubar-" role="button" aria-disabled="false">
  <span class="ui-button-icon-primary ui-icon ui-icon-pencil"></span>
  <span class="ui-button-text">Measures</span>
</button> 
```

我不明白为什么我的 css 类被忽略了。我尝试使用 css 选择器，但它们也没有帮助。我在尝试扩展对象具有时的行为时遇到了类似的问题`ui-state-hover`，我只是无法覆盖 jQuery-UI 的 css 规则。

我在这里想念什么？

* * *

**编辑**

好吧，在阅读了[类选择器](https://www.w3.org/TR/CSS2/selector.html#class-html)部分后，我意识到我的问题是该类`ui-button-text-icon-primary`位于同一组类中，`ui-rw-icon`因此选择器`.ui-rw-icon .ui-button-text-icon-primary .ui-icon`不起作用。但这有帮助：

```
.ui-rw-icon.ui-button-icon-only .ui-icon,
.ui-rw-icon.ui-button-text-icon-primary .ui-icon,
.ui-rw-icon.ui-button-text-icon-secondary .ui-icon,
.ui-rw-icon.ui-button-text-icons .ui-icon,
.ui-rw-icon.ui-button-icons-only .ui-icon {
     top: 40%;
} 
```

一个很小但很重要的变化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-28T17:34:01.630

*   为了使您的自定义图标生效，您的 css 文件应在 jquery ui css 之后调用。
*   如果您的样式仍未应用，请尝试在定义 CSS 路径时上一层，即如果您的 HTML 是：

    ```
    <div id="menubar">
        <button id="measures">Measures</button>
    </div> 
    ```

那么你的风格应该是：

```
 #menubar .ui-rw-icon.ui-button-icon-only .ui-icon,
    #menubar .ui-rw-icon.ui-button-text-icon-primary .ui-icon,
    #menubar .ui-rw-icon.ui-button-text-icon-secondary .ui-icon,
    #menubar .ui-rw-icon.ui-button-text-icons .ui-icon,
    #menubar .ui-rw-icon.ui-button-icons-only .ui-icon {
         top: 40%;
    } 
```

# ruby-on-rails - 具有可标记行为的自定义验证

> ID：13110291
> 
> 赞同：1
> 
> 时间：2012-10-28T15:46:08.010
> 
> 标签：ruby-on-rails, validation, acts-as-taggable-on

嗨，我正在做一个 Rails 3 项目，我正在使用acts-as-taggable-on，一切都很完美！:)

我只有一个问题。

有谁知道如何将我的“自定义”验证添加到 ActsAsTaggableOn::Tag？我可以挂钩的任何回调（例如 before_tag_save）？或类似的东西？

在我保存模型之前，我需要对我的 tag_list 中的每个“标签”（以确保每个标签不包含任何非法字符）运行一个正则表达式，并想知道是否有标准的方法来做这件事。

我解决问题的方法是在我的 PostController 中添加一个验证方法，它只是遍历标签列表并运行正则表达式，但这对我来说似乎很难看。

有什么建议么？

先感谢您！:)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-05T06:22:48.830

我以前用过两种方法。一个通过自定义验证器，另一个通过 validates 调用。

**自定义验证方法**

在您的模型中，设置以下内容

```
 validate :validate_tag

  def validate_tag
    tag_list.each do |tag|
      # This will only accept two character alphanumeric entry such as A1, B2, C3\. The alpha character has to precede the numeric.
      errors.add(:tag_list, "Please enter the code in the right format") unless tag =~ /^[A-Z][0-9]$/
    end
  end 
```

显然，您需要用更适合您情况的内容替换验证逻辑和错误消息文本。

请记住，在这种情况下，您可以将每个标签评估为字符串。

**标准验证方法**

将此包含在您的模型中

```
validates :tag_list, :format => { :with => /^([A-Z][0-9],?\s?)*$/,
      :message => "Just too awesomezz" } 
```

使用此方法，您必须记住，您正在验证看起来像字符串的整个数组。因此，您需要在标签之间留出逗号和空格。

选择最适合您的方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T15:53:17.643

您可以通过`before_save`回调在模型中执行此操作。在那里，您可以在将 Post 的标签保存到数据库之前对其进行操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-14T01:56:22.963

您还可以在用户模型上重写标记方法：

```
 def tag(taggable, opts = {})
    return unless user.have? taggable.article
    super
  end 
```

如果用户只能标记同一篇文章（文章：has_many users），这可能会很有用

# javascript - jQuery - 悬停时停止自动滚动div

> ID：13110299
> 
> 赞同：1
> 
> 时间：2012-10-28T15:47:22.957
> 
> 标签：javascript, jquery

这是上一个问题的后续帖子：[jQuery - 每 x 秒向下滚动一次，然后滚动到顶部](https://stackoverflow.com/questions/13067190/jquery-scroll-down-every-x-seconds-then-scroll-to-the-top)

我已经进一步完善了脚本，但在最后一步时遇到了一些麻烦。

我有一个 div 一次自动 50px 直到它到达底部，此时它滚动到顶部并重新开始。多亏了上面的问题和一些额外的工作，我才能完美地工作。

当 div 悬停时，我需要停止所有滚动。我已经完成了其中的一部分（悬停时没有向下滚动），但我无法获得完整的画面。即使悬停，div 仍会滚动到顶部。

这是我的 jQuery 和一个与之配套的小提琴：http: [//jsfiddle.net/wR5FY/1/](http://jsfiddle.net/wR5FY/1/)

```
var scrollingUp = 0;
var dontScroll = 0;

window.setInterval(scrollit, 3000);

function scrollit() {
    if(scrollingUp == 0 && dontScroll == 0) {
        $('#scroller').animate({ scrollTop: $("#scroller").scrollTop() + 50 }, 'slow');
    }
}

$('#scroller').bind('scroll', function () {
    if (dontScroll == 0) {
        if ($(this).scrollTop() + $(this).innerHeight() >= $(this)[0].scrollHeight) {
            scrollingUp = 1;      
            $('#scroller').delay(2000).animate({ scrollTop: 0 }, 1000, function() {
                scrollingUp = 0;    
            });
        }
    }
});

$('#scroller').bind('mouseenter', function() {
    dontScroll = 1;
});

$('#scroller').bind('mouseleave', function() {
    dontScroll = 0;
}); 
```

在小提琴中，当黄色方块可见时，尝试将滚动条 div 悬停。您会看到它滚动到顶部。

几点注意事项：

*   你会注意到我使用了 mouseenter 和 mouseleave 而不是 hover 和 mouseout。这是我能找到的确保 div 中的所有子元素不会产生不利影响的最佳方法。
*   一个潜在的问题区域是我已经绑定到滚动到顶部的函数的滚动事件。我认为当用户手动滚动项目时，这可能会导致一些额外的问题，而我的 jQuery 试图滚动用户。
*   我做了一些关于杀死 setInterval 的实验，但我没有发现这很有帮助，因为触发的函数不是问题区域。

我的总体目标是在用户悬停或手动滚动列表时锁定所有自动滚动。这是那里的90％。如果他们碰巧滚动到底部，那么在他们将鼠标移动到别处之前什么都不会发生——这就是问题所在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T17:02:25.683

保持简单；）问题是您首先评估 dontScroll 是否为零，然后启动计时器。当计时器结束时，它不再评估 dontScroll STILL 是否为零。只需将其拉入您的 scrollIt 函数：

```
var scrollingUp = 0;
var dontScroll = 0;

window.setInterval(scrollit, 2000);

function scrollit() {
    if(dontScroll == 0){
        if ($('#scroller').scrollTop() + $('#scroller').innerHeight() >= $('#scroller')[0].scrollHeight) {
                scrollingUp = 1;     
                $('#scroller').animate({ scrollTop: 0 }, 1000, function() {
                    scrollingUp = 0;    
                });
        } else if(scrollingUp == 0) {
            $('#scroller').animate({ scrollTop: $("#scroller").scrollTop() + 50 }, 'slow');
        }
    }
}

$('#scroller').bind('mouseenter', function() {
    dontScroll = 1;
});

$('#scroller').bind('mouseleave', function() {
    dontScroll = 0;
}); 
```

# awk - awk 脚本替换双引号内第二次出现的字符串

> ID：13110304
> 
> 赞同：2
> 
> 时间：2012-10-28T15:47:55.563
> 
> 标签：awk, replace, double-quotes

我无法编写脚本来替换双引号内的字符串。文件部分如下所示：

```
"regA~1"    :   "FF_NODE~94"
"regA~2"    :   "FF_NODE~105"
"regA~3"    :   "FF_NODE~116"
"regA~4"    :   "FF_NODE~127"
"regA~5"    :   "FF_NODE~138"
"regA~6"    :   "FF_NODE~149"
"regA~7"    :   "FF_NODE~154"
"regA~8"    :   "FF_NODE~155"
"regA~9"    :   "FF_NODE~156"
"regA~1"    :   "FF_NODE~95"
"regA~11"   :   "FF_NODE~96" 
```

如果我这样做，它会起作用

```
awk '/"regA~1"/{c++;if(c==2){sub("regA~1","regA~10");}}1' file > file_out 
```

但是当试图使这个脚本成为我传递变量 regA~1 和 c 的值时它不起作用。

```
s="regA~1";
r="regA~10";
n=2;

awk -v search="$s" -v replace="$r" -v count=$n '/search/{c++;if(c==count){sub(search,replace);}}1' file > file_out 
```

我也试过

```
awk -v search=$s -v replace=$r -v count=$n '/search/{c++;if(c==count){sub(search,replace);}}1' file > file_out 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T16:08:09.527

您需要匹配作为字符串存储在变量中的 RE 的语法是

```
$0 ~ var 
```

不是

```
/var/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T19:14:35.713

感谢 Ed Morton 的提示。这是 bash 脚本，以防有人需要这样的东西。不是很复杂，但它对我有用。

```
#!/bin/bash
# Replaces a specific occurrence of a search string with a replace string
if [ $# -lt 4 ] ; then
echo -e "Wrong number of parameters."
echo -e "Usage:"
echo -e "repnthstr file search replace n"
echo -e "repnthstr fileext search replace n"
exit 1
fi

for file in $1
 do
 if [ -f $file -a -r $file ]; then
   awk -v search=$2 -v replace=$3 -v cnt=$4 '$0 ~ search{c++;if(c==cnt){sub(search,replace);}}1' "$file" > temp && mv temp "$file"
 else
  echo "Error: Cannot read $file"
 fi
done 
```

# android - 在 Activity 中显示 HTML 文档

> ID：13110305
> 
> 赞同：1
> 
> 时间：2012-10-28T15:47:56.750
> 
> 标签：android, textview, android-webview

我正在使用 SAX 解析 RSS 提要以显示最新帖子的标题列表。

当我单击标题时，它会打开浏览器并显示该 URL。

但是，我想在新活动中显示文章，包括 HTML 样式和图像。我可以通过解析变量'encoded'来获取文章部分

[关联。](https://developer.yahoo.com/yql/console/?q=SELECT%20*%20FROM%20feed%20WHERE%20url%3D%22http://feeds.feedburner.com/jamesaltucher%3Fformat%3Djson%22)

它是纯 HTML。它还包含`<img src='...'>`标签。在活动中显示此内容的最佳方式是什么？

`TextView`可以显示 HTML，但我不认为它显示图像。 `Webview`可以显示本地 HTML，但在这种情况下，它将是动态的。

有没有办法在 Activity 中显示 HTML 文档，包括样式和图像？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T16:37:25.980

我认为您需要一个[webview](http://developer.android.com/reference/android/webkit/WebView.html)。[这里](http://developer.android.com/guide/webapps/webview.html)也有更多信息。

# ruby-on-rails - 使用 Ruby on Rails ActiveSupport::Concern 功能时如何“嵌 套”包含模块？

> ID：13110306
> 
> 赞同：7
> 
> 时间：2012-10-28T15:47:56.343
> 
> 标签：ruby-on-rails, ruby, module, include, nested

我正在使用 Ruby 1.9.2 和 Ruby on Rails v3.2.2 gem。鉴于我正在使用 RoR [ActiveSupport::Concern](http://api.rubyonrails.org/classes/ActiveSupport/Concern.html)功能，我想“嵌套”包含模块，但我怀疑应该在哪里说明该`include`方法。也就是说，我有以下内容：

```
module MyModuleA
  extend ActiveSupport::Concern

  # include MyModuleB

  included do
    # include MyModuleB
  end
end 
```

*我*应该*`include MyModuleB`在“正文”/“上下文”/“范围”中说明`MyModuleA`还是应该在`included do ... end`块中说明？*有什么区别，我应该从中得到什么？**

 ** * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-28T16:06:49.697

如果您包含`MyModuleB`在 的“正文”中`MyModuleA`，则扩展了 B 的功能的是模块本身。如果您将它包含在`included`块中，那么它将包含在混入的类中`MyModuleA`。

那是：

```
module MyModuleA
  extend ActiveSupport::Concern
  include MyModuleB
end 
```

产生类似的东西：

```
MyModuleA.send :include, MyModuleB
class Foo
  include MyModuleA
end 
```

尽管

```
module MyModuleA
  extend ActiveSupport::Concern
  included do
    include MyModuleB
  end
end 
```

产生类似的东西：

```
class Foo
  include MyModuleA
  include MyModuleB
end 
```

其原因`ActiveSupport::Concern::included`类似于：

```
def MyModuleA
  def self.included(klass, &block)
    klass.instance_eval(&block)
  end
end 
```

块中的代码在`included`包含类的上下文中运行，而不是在模块的上下文中运行。因此，如果 MyModuleB 需要访问它正在混入的类，那么您需要在`included`块中运行它。否则，它实际上是同一件事。

通过演示：

```
module A
  def self.included(other)
    other.send :include, B
  end
end

module B
  def self.included(other)
    puts "B was included on #{other.inspect}"
  end
end

module C
  include B
end

class Foo
  include A
end

# Output:
# B was included on C
# B was included on Foo 
```*

# php - 从第二台计算机删除会话值

> ID：13110309
> 
> 赞同：0
> 
> 时间：2012-10-28T15:48:21.943
> 
> 标签：php, session

我创建了一个登录到我的网站。用户登录后，我将用户 ID 和操作（=登录）存储在数据库中，并且 $_SESSION['loggedin']==TRUE。（如果注销数据库中的操作将注销并且会话将被破坏）如果有人想从第二台计算机使用相同的用户名再次登录，我将不允许它，因为数据库中的最后一行是“登录”并且当然，用户 ID 也将相同。所以我不想允许来自一个用户名的多个连接。现在在这里我想放一个链接：“断开其他连接”。

例如：我在学校登录但忘记注销，然后我尝试在家登录但它会失败，因为我在另一个地方登录（会话处于活动状态）所以如果我点击“断开其他连接”链接我想要删除学校中的会话值（更改数据库中的操作值是不够的，因为如果我将其更改为注销会话仍然存在并且多个连接将可用）

如何防止来自一个用户名的多个连接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T16:23:52.547

听起来你需要做的是保存一些东西来识别个人连接，比如说一个你每次登录帐户时都会增加一个的数字。

例如，假设您使用 ID 为 1 的用户登录，这是您第五次登录，因此您将其保存到 DB： UserID=1, State="Logged In", ConnectionID=5 到您保存的会话： $_SESSION['loggedin']=TRUE 和 $_SESSION['ConnectionID']=5

下次登录时，检查是否存在尚未注销的帐户的连接，如果是这种情况，您可以更新现有行以将状态设置为已注销，或者如果您想记录时间创建状态为已注销的新条目（UserID=1，State="Logged Out"，ConnectionID=5），当然您还为新连接插入一行，连接 6。

之后，您所需要做的就是在您的网站上运行代码，可能每次加载页面时，您都会检查数据库中是否有任何行与您保存在 $_SESSION 中的 ConnectionID 相同，以及它们是否有设置为已注销的操作，如果是这种情况，您会破坏将注销先前连接的会话。

希望这能让您很好地了解如何做到这一点。我敢肯定还有其他选择。

如果您只关心一个帐户仅从一个地方登录，并且您对他们注销时的登录不感兴趣，您可以将 UserID 和 ConnectionID 保存到数据库中，然后检查数据库中的 ConnectionID与Session中的相同，如果不是，则终止该会话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T16:20:40.903

唯一不太可靠的方法是检查 IP 地址，当用户位于 NAT 网关（例如蜂窝数据连接、家庭路由器等）后面时，这种方法会严重失败。如果用户再次通过登录序列并且之前打开的会话正在进行，则最好的选择是简单地删除任何现有会话。类似的东西

登录.php：

```
<?

check_password_stuff();

if (user_is_already_logged_in()) {
   delete_login();
}
do_login_stuff(); 
```

# android - Andengine，使精灵向随机方向移动

> ID：13110312
> 
> 赞同：1
> 
> 时间：2012-10-28T15:48:52.383
> 
> 标签：android, random, sprite, andengine, move

当我点击它时，我想使精灵移动，但我有一个问题......精灵总是去左上角，我试图放置随机值，但它没有给出结果

```
ballITexture = TextureRegionFactory.extractFromTexture(BaseActivity.getSharedInstance().ballTexture);
final Random rand = new Random();
sprite = new Sprite(0, 0, ballITexture, BaseActivity.getSharedInstance().getVertexBufferObjectManager()){
            @Override
            public boolean onAreaTouched(TouchEvent pSceneTouchEvent, float pTouchAreaLocalX, float pTouchAreaLocalY) {
               randomMove(rand.nextInt(4), pTouchAreaLocalX, pTouchAreaLocalY, this);

            };

mCamera = BaseActivity.getSharedInstance().mCamera;
sprite.setPosition(mCamera.getWidth() / 2 - sprite.getWidth() / 2, mCamera.getHeight() / 2 - sprite.getHeight() / 2);
moveable = true; 
```

这是 randomMove 方法：

```
private void randomMove(int direction, float pTouchAreaLocalX, float pTouchAreaLocalY, Sprite sprite){

    switch(direction){
            case 0:
                sprite.registerEntityModifier(new MoveModifier(1, pTouchAreaLocalX, 1, pTouchAreaLocalY, 1));
                break;
            case 1:
                sprite.registerEntityModifier(new MoveModifier(1, pTouchAreaLocalX, 1, pTouchAreaLocalY, -1));
                break;
            case 2:
                sprite.registerEntityModifier(new MoveModifier(1, pTouchAreaLocalX, -1, pTouchAreaLocalY, 1));
                break;
            case 3:
                sprite.registerEntityModifier(new MoveModifier(1, pTouchAreaLocalX, -1, pTouchAreaLocalY, -1));
                break;
        }

} 
```

我的问题是，为什么当我触摸它时，我的精灵总是在左上角，而不是在随机方向移动？如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T15:55:11.307

忘记这一点，我将不正确的参数传递给 MoveModifier，我在其中放置 1 和 -1 值应该是相机的任何像素

```
private void randomMove(int direction, float pTouchAreaLocalX, float pTouchAreaLocalY, Sprite sprite){

        sprite.registerEntityModifier(new MoveModifier(1, pTouchAreaLocalX, rand.nextInt(mCamera.getWidth()), pTouchAreaLocalY, rand.nextInt(mCamera.getHeight()))); 
```

# java - Java-FixedThreadPool 具有已知池大小但未知工作者

> ID：13110313
> 
> 赞同：3
> 
> 时间：2012-10-28T15:48:52.723
> 
> 标签：java, multithreading, threadpool, executor

所以我想我有点理解固定线程池是如何工作的（使用 Java 内置的 Executor.fixedThreadPool），但据我所知，通常有一定数量的工作你想要完成，当你启动时你知道有多少工作程序。例如

```
int numWorkers = Integer.parseInt(args[0]);
int threadPoolSize = Integer.parseInt(args[1]);
ExecutorService tpes =
    Executors.newFixedThreadPool(threadPoolSize);
WorkerThread[] workers = new WorkerThread[numWorkers];
for (int i = 0; i < numWorkers; i++) {
    workers[i] = new WorkerThread(i);
    tpes.execute(workers[i]);
} 
```

每个 workerThread 做一些非常简单的事情，那部分是任意的。我想知道的是，如果你有一个固定的池大小（比如最大 8 个），但你不知道在运行时之前完成任务需要多少工作人员。

具体示例是：如果我的池大小为 8，并且我正在从标准输入读取数据。当我阅读时，我将输入分成设定大小的块。这些块中的每一个都被提供给一个线程（以及一些其他信息），以便它们可以对其进行压缩。因此，我不知道我需要创建多少个线程，因为我需要继续进行，直到我到达输入的末尾。我还必须以某种方式确保数据保持相同的顺序。如果线程 2 在线程 1 之前完成并且只是提交它的工作，我的数据将是乱序的！

那么在这种情况下线程池会是错误的方法吗？看起来会很棒（因为我一次不能使用超过 8 个线程）。

基本上，我想做这样的事情：

```
ExecutorService tpes = Executors.newFixedThreadPool(threadPoolSize);
BufferedInputStream inBytes = new BufferedInputStream(System.in);
byte[] buff = new byte[BLOCK_SIZE];
byte[] dict = new byte[DICT_SIZE];
WorkerThread worker;
int bytesRead = 0;

while((bytesRead = inBytes.read(buff)) != -1) {
   System.arraycopy(buff, BLOCK_SIZE-DICT_SIZE, dict, 0, DICT_SIZE);
   worker = new WorkerThread(buff, dict)   
   tpes.execute(worker);
} 
```

这不是工作代码，我知道，但我只是想说明我想要什么。

我遗漏了一点，但是看看 buff 和 dict 的值是如何变化的，我不知道输入有多长。我认为我实际上不能这样做，因为在第一次通话后，工人已经存在了！我不能只说 worker = new WorkerThread 很多时间，因为它不是已经指向一个现有线程（真的，一个可能已经死的线程）并且显然在这个实现中，如果它确实有效，我就不会运行在平行下。但我的意思是，我想继续创建线程，直到达到最大池大小，等到一个线程完成，然后继续创建线程，直到我达到输入的结尾。

我还需要整理东西，这是真正令人讨厌的部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T16:37:10.910

`WorkerThread`您的解决方案完全没问题（唯一的一点是，如果您的 s 的工作量非常小，则可能不需要并行性）。

使用线程池，提交任务的数量无关紧要。池中的线程数可能少于或多于，线程池负责处理。

但是，这很重要：您依赖于 s 结果的某种顺序`WorkerThread`，但是在使用并行性时，不能保证这种顺序！不管你是否使用线程池，或者你有多少工作线程等等，你的结果总是有可能以任意顺序完成！

要保持顺序正确，请`WorkerThread`在其构造函数中为每个项指定当前项的编号，并让它们在完成后将结果按正确的顺序排列：

```
int noOfWorkItem = 0;
while((bytesRead = inBytes.read(buff)) != -1) {
   System.arraycopy(buff, BLOCK_SIZE-DICT_SIZE, dict, 0, DICT_SIZE);
   worker = new WorkerThread(buff, dict, noOfWorkItem++)   
   tpes.execute(worker);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T16:29:49.987

正如@ignis 指出的那样，并行执行可能不是您情况的最佳答案。但是，要回答更一般的问题，除了 FixedThreadPool 之外，还有其他几个 Executor 实现需要考虑，其中一些可能具有您想要的特性。

至于保持秩序，通常您会将任务提交给执行者，并且对于每次提交，您都会获得一个 Future（这是一个承诺稍后在任务完成时为您提供结果的对象）。因此，您可以按照提交任务的顺序跟踪 Futures，然后当所有任务完成后，按顺序调用每个 Futures 上的 get() 以获取结果。

# simulator - Microchip MPLABX ADC 仿真问题：ADC-W101：所选通道配置为数字 IO

> ID：13110314
> 
> 赞同：1
> 
> 时间：2012-10-28T15:48:59.477
> 
> 标签：simulator, microchip, mplab, adc

我正在尝试使用 MPLAB X 模拟器模拟以下程序，但 ADC 似乎无法正常工作。我已将具有“0303”值的激励文件附加到 ADRESL 寄存器，但我没有读取数据，并且在模拟器控制台中我收到警告“ADC-W101：所选通道配置为数字 IO。所选通道：0。”。此外，一旦置位，即使 ADIF 被触发，ADCON0 GO 位也不会被清除。图片是16f88。是 MPLAB X 模拟器的问题吗？我已经用 16f88 检查了 MPLABX sim 的限制，但没有关于 ADC 的内容。

```
 processor   16f88
    include     <P16F88.INC>

    errorlevel  0, -302     ; suppress messages about bank selection

    __CONFIG    _CONFIG1, _WDT_OFF & _FOSC_INTOSCIO & _MCLR_ON & _LVP_OFF

    udata
LIGHT_SENS  res 2

TEMP_W      res 1
TEMP_STATUS res 1
TEMP_PCLATH res 1

FLAGS       res 1

TIME1       equ h'00000'
ADC         equ h'00001'

reset code 0x00

    pagesel main
    goto    main

isr code 0x04
_isr_entry:
    movwf   TEMP_W
    swapf   STATUS, W
    clrf    STATUS
    movwf   TEMP_STATUS
    movf    PCLATH, W
    movwf   TEMP_PCLATH
    clrf    PCLATH

_isr_test_tmr0:
    banksel INTCON
    btfss   INTCON, TMR0IF
    goto    _isr_test_adc

_tmr0_isr:
_tmr0_isr_entry:
    banksel TMR0
    movlw   d'100'
    movwf   TMR0

    bsf     FLAGS, TIME1

_tmr0_isr_exit:
    banksel INTCON
    bcf INTCON, TMR0IF

_isr_test_adc:
    banksel PIR1
    btfss   PIR1, ADIF
    goto    _isr_exit

_adc_isr:
_adc_isr_entry:
    banksel FLAGS
    bsf     FLAGS, ADC

_adc_isr_exit:
    banksel PIR1
    bcf     PIR1, ADIF

_isr_exit:
    movf    TEMP_PCLATH, W
    movwf   PCLATH
    swapf   TEMP_STATUS, W
    movwf   STATUS
    swapf   TEMP_W, F
    swapf   TEMP_W, W
    retfie

;===============================================================================
main code
main

_setup_oscillator:
    banksel OSCCON
    movlw   b'01100000'     ; 4 MHz Internal Oscillator Clock Speed
    movwf   OSCCON
    clrf    OSCTUNE         ; Center frequency

;===============================================================================
_setup_pin:

banksel PORTA
    clrf    PORTA           ; clears the latch on PORTA before configuring it
    banksel PORTB
    clrf    PORTB           ; clears the latch on PORTB before configuring it

_setup_tmr0:
    banksel TMR0
    movlw   d'100'
    movwf   TMR0
    banksel OPTION_REG
    movlw   b'11010101'     ; Prescaler is assigned to Timer0, rate 1:256, Timer mode
    movwf   OPTION_REG
    bsf     INTCON, TMR0IE  ; enables Timer0 Overflow Interrupt

_setup_adcs:
    banksel TRISA           ; set PORTA pin direction
    movlw   h'01'           ; RA0 is analog input
    movwf   TRISA

    banksel ANSEL           ; select analog pins
    movlw   h'01'           ; AN0 is analog I/O
    movwf   ANSEL

    banksel ADCON0          ; A/D channel selection
    movlw   b'10000000'     ; channel AN0 selected
    movwf   ADCON0

    banksel ADCON1          ; voltage reference, result justification, A/D clock
    movlw   b'10000000'     ; right just, Vdd/Vss ref
    movwf   ADCON1

    banksel ADCON0
    bsf     ADCON0, ADON

    banksel PIE1
    bsf     PIE1, ADIE
    banksel PIR1            ; enables A/DC interrupt
    bcf     PIR1, ADIF

    banksel INTCON
    bsf     INTCON, GIE     ; enables global interrupt
    bsf     INTCON, PEIE    ; enables peripheral interrupt

_setup_application:
    clrf    FLAGS

_main_loop:
    call    CheckAdc

_main_loop_exit:
    clrf    FLAGS
    goto    _main_loop

;===============================================================================
CheckAdc
_CheckAdc_entry:
    banksel FLAGS
    btfss   FLAGS, ADC          ; tests if ADC is ready
    goto    _CheckAdc_restart

    banksel ADRESL
    movf    ADRESL, W

    banksel LIGHT_SENS
    movwf   LIGHT_SENS

    banksel ADRESH
    movf    ADRESH, W

    banksel LIGHT_SENS
    movwf   LIGHT_SENS+1

_CheckAdc_restart:
    banksel FLAGS
    btfss   FLAGS, TIME1        ; tests if 1ms timer run out
    goto    _CheckAdc_exit

    banksel ADCON0
    btfss   ADCON0, GO
    bsf     ADCON0, GO

_CheckAdc_exit:

    return

    end                         ; End Of Program 
```

# java - 嵌入式Tomcat 7.0.32下的Web应用部署

> ID：13110315
> 
> 赞同：0
> 
> 时间：2012-10-28T15:49:00.397
> 
> 标签：java, servlets, tomcat7

我们一直在嵌入式模式下成功使用 tomcat 7.0.19。然而最近由于我们关注领域的一些修复，我们决定迁移到 tomcat 7.0.32。大多数事情都按预期使用相同的代码和更新版本，但是由于某种原因战争部署效果不佳。我在我的 tomcat 上注册了几个 servlet。面临以下2个问题，

1.  嵌入式 tomcat 行为从 7.0.19 更改为 7.0.32。为了详细说明这一点，让我解释一下行为差异，在 7.0.19 中，我可以部署我的应用程序，当我点击“host:port/contextpath”时，它会加载应用程序的起始页面（即欢迎页面，此页面以 UI 为中心，并且不需要服务器干预，所以我的 servlet 都没有被调用）。但是，对于 7.0.32，相同的 url 会导致我的 servlet 被调用。

2.  所以为了调试问题，我注释了我的大部分代码，这样我就有了一个普通的 tomcat 实现，只是非常基本的东西，即设置引擎名称、默认主机、设置主机属性、添加连接器（nio，具有默认属性）并部署战争。没有 servlet 和其他东西，只是为了检查非常基本的东西是否有效。令我惊讶的是，当我运行这段代码时，它仍然在我的 servlet 中出现同样的问题，这是怎么发生的，既然我的代码被注释了，它没有注册任何 servlet，它仍然从哪里找到它？嵌入式 tomcat 是否存储了一些旧引用，这些引用在后续运行中没有被清理？我尝试更改端口，但这也无济于事。

我在这里碰壁，无法理解这种奇怪的行为，如果我弄清楚＃2，只有这样我才能在＃1上取得一些进展。

提前致谢，

维克拉姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T09:33:25.087

弄清楚问题出在哪里。

以相反的顺序，

2 - 这实际上是一个奇怪的行为，香草嵌入式 tomcat 代码也调用了从未注册过的 servlet。这里的问题在于 Eclipse，由于某种原因，它使用了我班级的旧参考资料。当我从 Eclipse 外部运行相同的代码时，即通过命令提示符，事情恢复正常。

1 - 这个问题与 Web 部署有关，在我的代码中，我另外将我的类加载器设置为 WebappLoader 并最终将我的应用程序 jar 添加到其中。无论出于何种原因，这在 7.0.19 中都可以正常工作，但在 7.0.32 中却没有，当我通过类路径将所有要在应用程序启动期间加载的 jar 外部化时，这个问题也得到了解决。

谢谢，

维姬

# javascript - HTML5 渲染

> ID：13110317
> 
> 赞同：1
> 
> 时间：2012-10-28T15:49:05.523
> 
> 标签：javascript, html

我总是阅读 HTML5 游戏之类的东西。但我不相信游戏完全是用 HTML5 编程的，因为它只是一种标记语言。通常，它是通过 JavaScript 控制的，对吧？

我想编写一个非常简单的浏览器游戏，我可以和我的朋友一起玩。但我想用 Scala 编写逻辑。

所以我想出了这个结构。 ![逻辑](../Images/2a657d8d0e3fa3566862f55b40e9011a.png)

客户端能够在他的浏览器中看到 HTML。HTML5 将通过打开与我的网络服务器（AJAX？）的连接的 JavaScript 进行操作。现在我可以在 Scala 中编写所有逻辑并让 JavaScript 执行它（例如将 pawn 从位置 a 移动到位置 b）。

这是可能的，对吧？

作为网络服务器，我会选择 Lift。

但我从来没有用 JS/HTML5 做过任何渲染。您是否建议查看一些框架，例如[LimeJs](http://www.limejs.com/)或[CraftyJs](http://craftyjs.com/)？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T15:55:25.957

*除了*在名称中产生“ML”部分的核心标记语言之外， “HTML5”通常用作对一组客户端脚本语言 API 规范的全面引用。因此，“在 HTML5 中实现这个或那个”通常意味着在客户端 Javascript 中执行此操作，操作 HTML5 指定的 DOM 树以呈现用户界面。

它有点不一致/不合逻辑的命名，但是标准化不一致的不合逻辑的术语是这个行业最擅长的。:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T19:07:25.670

[http://en.wikipedia.org/wiki/HTML5](http://en.wikipedia.org/wiki/HTML5)

> HTML5 是一种用于构建和呈现万维网内容的标记语言，是最初由 Opera Software 提出的互联网核心技术。 [2] 它是 HTML 标准的第五次修订......各种规范引入的功能的混合，......软件产品，如网络浏览器，......常见做法，以及现有网络文档中的许多语法错误。它也是一种尝试定义一种可以用 HTML 或 XHTML 语法编写的单一标记语言
> 
> **HTML5 本身不能用于动画和交互 - 它必须辅以 CSS3 或 Javascript**

坚持使用您的示例开发人员通常会定义一个 API 来通过您的 Web 服务器访问您的数据。

Javascript 将负责操作您的视图（html dom），因此它实际上将包含您的游戏逻辑的一大块

网络服务器将包含您的数据模型（也许它会有机器人玩家及其下一步行动的逻辑）

客户端是浏览器

# assembly - 处理 8051 程序集的十六进制数

> ID：13110321
> 
> 赞同：0
> 
> 时间：2012-10-28T15:49:26.637
> 
> 标签：assembly, 8051

我在循环 8051 程序集中的十六进制数字以进行正确减法时遇到问题，

这是迭代 30 次并显示从 40 到 70 的值（40,41,42,43,....70）的简单代码

```
 MOV A,#40H ;first value of the loop
        MOV R0,#0H

        MOV R1,#30 ;Number of iterations

    LOOP:   

        ADD A,R0
        DA A   ;To Adjust the decimal values after each addition
        INC A

    DJNZ R1,LOOP

    END 
```

这就是它调整每个值的方式，

```
; 40H = 64D --(+0D)--> 64D = 40H
; 41H = 65D --(+0D)--> 65D = 41H
; 42H = 66D --(+0D)--> 66D = 42H
; 43H = 67D --(+0D)--> 67D = 43H
; 44H = 68D --(+0D)--> 68D = 44H
; 45H = 69D --(+0D)--> 69D = 45H
; 46H = 70D --(+0D)--> 70D = 46H
; 47H = 71D --(+0D)--> 71D = 47H
; 48H = 72D --(+0D)--> 72D = 48H
; 49H = 73D --(+0D)--> 73D = 49H 
; 4AH = 74D --(+6D)--> 80D = 50H 
```

但是当我想反转循环时，即如果我想以从 70 到 40 的相反顺序输出（70,69,68,67,66,65,64,.....40）

我该怎么办？

这是第一个数字是 90 时它应该如何工作的示例

```
; 90H = 144D --(+0D)--> 144D = 90H
; 8FH = 143D --(-6D)--> 137D = 89H
; 8EH = 142D --(-6D)--> 136D = 88H
; 8DH = 141D --(-6D)--> 135D = 87H
; 8CH = 140D --(-6D)--> 134D = 86H
; 8BH = 139D --(-6D)--> 133D = 85H
; 8AH = 138D --(-6D)--> 132D = 84H 
```

但是由于减法后没有小数调整，我怎么能达到预期的结果？

所需的输出，

90 89 88 87 86 85....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T16:45:34.573

你不能减 1，但你可以加 99。

```
ADD A, #99H
DA A 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T02:29:42.847

我从您的问题中了解到的是，您希望显示从初始值 99d 开始并以 00d 结束的 2 位小数向下计数。

我同意 NovaDenizen 的观点。这是解释：

您遇到的限制是**DA A 指令在减法后不起作用**。现在，您必须使用替代逻辑，其中减法运算被实现为特殊形式的加法。这个想法的直接含义是利用补码的方法。**在 10s 的补码方法中，加 99 相当于减去 -01**。因此这就是你的代码应该是这样的：

```
ORG 0000H   

MOV  P1,#99H

MOV  A,#99H          ; A=99h

BACK:  ACALL  DELAY  ; Call Delay Routine

       ADD A,#99H    ; Realize count down action by adding 99H 
                       (equivalent to subtracting 01)

       DA  A         ; Decimal Adjust to realize the BCD format representation

       MOV P1,A      ; Display the count on P1

       JNZ BACK      ; Continue till the count ends with 00

       SJMP  $       ; termination of the program

DELAY: MOV R1,#0FFH              ; Delay Routine to generate certain delay.

 DEC1: MOV R2,#0FFH 

 DEC2: MOV R3,#0FFH 

       DJNZ  R3,$

       DJNZ  R2,DEC2   

       DJNZ  R1,DEC1    

       RET  

END 
```

（在 Keil 中运行程序并检查端口 1 上的输出。）

希望这对您有所帮助。问候

# node.js - Mocha 提前退出测试

> ID：13110322
> 
> 赞同：0
> 
> 时间：2012-10-28T15:49:29.393
> 
> 标签：node.js, mocha.js

我正在使用[Mocha](http://visionmedia.github.com/mocha/)从命令行对我的[SnailMailAddressParser](http://brianmhunt.github.com/SnailMailAddressParser/)项目运行一些测试。不幸的是，在 Mocha 退出之前只运行了一些测试。

测试文件非常简单。您可以[在此处查看测试文件：test/test.coffee](https://github.com/brianmhunt/SnailMailAddressParser/blob/master/test/test.coffee)

似乎某处存在竞争条件。当我运行时`npm test`，它会做以下两件事之一：

1.  运行[一项测试](https://github.com/brianmhunt/SnailMailAddressParser/blob/master/test/test.coffee#L13)；或者
2.  [从address_tester](https://github.com/brianmhunt/SnailMailAddressParser/blob/master/test/test.coffee#L55)开始运行 34 个测试。

显然，我正在做一些需要捕获的异步操作，但我不太确定是什么。无论如何，我不知道如何告诉 Mocha 等待任何异步项目被收割（即某种`Mocha.wait_all`，如果这甚至可能的话 - 也许我必须添加'`done()`调用，但我不认为这是必要的用于同步测试 - 我认为这可能是）。

我当然会进行实验并发布我从测试中收集到的任何答案，但我将不胜感激任何见解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T00:13:19.860

答案是

```
 fs.readFile filename, "utf8", -> ... 
```

异步操作。当我尝试使用

```
 fs.readFileSync filename, "utf8", -> ... 
```

它不起作用，因为我仍在传递回调而不是读取返回值。

我通过将回调更改为：

```
data = fs.readFileSync filename, "utf8" 
```

因为现在没有调用异步操作。

# c# - 即使成功构建项目，应用程序也无法与 MDF 文件建立连接 [Visual Studio 2010 C#]

> ID：13110324
> 
> 赞同：0
> 
> 时间：2012-10-28T15:49:44.183
> 
> 标签：c#, visual-studio-2010, database-connection

我刚刚学习了 3 个月的 Visual Studio 2010 C#。我添加了数据源调用“PUBS.MDF”，它是来自 Microsoft 的示例数据库，如“NORTHWIND.MDF”。并编写代码以使用以下代码连接数据源：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Data.SqlClient;

namespace WindowsFormsApplication18
{
 public partial class Form1 : Form
  {
    public Form1()
    {
        InitializeComponent();
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        string constr = @"Data Source=.\SQLEXPRESS;
                        AttachDbFilename=|DataDirectory|\PUBS.mdf;
                        Integrated Security=True;User Instance=True;";
        SqlConnection connection = new SqlConnection(constr);
        connection.Open();
        string sql = "SELECT * FROM authors";
        SqlCommand command = new SqlCommand(sql, connection);
        textBox1.Text = (string)command.ExecuteScalar();
    }

  }
} 
```

这段代码调试成功，如下图： ![](../Images/79246c06a8deccb91a5c56cc3ba4e2ab.png)

但是，在我构建项目后，安装在我的计算机（window7）中，然后单击打开应用程序（我也单击“以管理员身份运行”），它显示错误窗口，如下图所示： ![](../Images/5a69f46d43d20b89a9d788e0c8f6f268.png)

有人请帮助我。

PS。

这就是我在应用程序中添加 PUBS.MDF 文件的方式

1.  单击选项卡“数据”
2.  单击“添加新数据源...”
3.  选择“数据库”
4.  选择“数据集”
5.  浏览“PUBS.MDF”文件

这就是我构建项目的方式

1.  单击选项卡“文件”> 添加 > 新项目 > Visual Studio 安装程序 > 安装项目
2.  右键单击“应用程序文件夹”>“添加”>“项目输出”>“主输出”
3.  右键单击“应用程序文件夹”>“添加”>“文件...”>浏览“PUBS.MDF”文件
4.  在“解决方案资源管理器”窗口中，右键单击项目名称 > 单击“构建”并等待它显示消息“构建 secceed”

我也上传了项目，请通过此链接下载 --> [http://www.4shared.com/zip/-HLqC-b_/WindowsFormsApplication18.html](http://www.4shared.com/zip/-HLqC-b_/WindowsFormsApplication18.html) ?

我曾经发布过与此几乎相同的问题->[使用Access数据库构建项目成功，可以搜索数据但无法删除记录](https://stackoverflow.com/questions/13065885/visual-studio-c-building-project-succeed-with-access-database-can-search-the)，但在这种情况下，数据库是.accdb文件，可以通过单击“运行”来解决作为管理员”，但这种情况是 .MDF 文件，我不知道为什么只是不同类型的数据库文件，但不能用相同的方法解决。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T16:55:28.363

如下更改您的连接字符串。它可能有效：

```
 string constr =@"Data Source=.\SQLEXPRESS;AttachDbFilename=" + System.Windows.Forms.Application.StartupPath + "\\PUBS.mdf;Integrated Security=True;User Instance=True"; 
```

# android - 检查android上是否连接了电源

> ID：13110328
> 
> 赞同：0
> 
> 时间：2012-10-28T15:49:53.787
> 
> 标签：android, broadcastreceiver

我正在开发一个 android 项目，在该项目中我在一个扩展 BroadcastReceiver 的类中注册一个广播接收器，该类接收`ACTION_POWER_CONNECTED`和`ACTION_POWER_DISCONNECTED`的意图`ACTION_SCREEN_OFF`。

当收到这些不同的意图时，它会调用另一个扩展类中的函数`Service`。

当它接收到它时，`ACTION_POWER_CONNECTED`它还会调用一个名为`isPowerConnected`该函数的函数，该函数应该检查电源是否连接，如果没有，则启用 WakeLock。

我遇到的问题是，当我执行该`isPowerConnected`功能时，它似乎第一次工作，但每隔一次收到：

> android.content.ReceiverCallNotAllowedException: IntentReceiver 组件不允许注册接收意图。

我不知道如何解决这个问题。下面是 isPowerConnected 的代码。

```
public boolean isPowerConnected()
{
    int pluggedIn = -1;
    try
    {
        Intent intent = context.registerReceiver(null, new IntentFilter(Intent.ACTION_BATTERY_CHANGED));
        pluggedIn = intent.getIntExtra(BatteryManager.EXTRA_PLUGGED, -1);
    }
    catch (Exception ex)
    {
        Log.e("IsPowerConnected", ex.toString());
    }
    return pluggedIn == BatteryManager.BATTERY_PLUGGED_AC || pluggedIn == BatteryManager.BATTERY_PLUGGED_USB;
} 
```

感谢您的任何帮助，您可以提供。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T15:53:52.623

您不能在现有的 BroadcastReceiver 中注册新的 BroadcastReceiver，而实际上您正在这样做。

# php - onclick 图像不起作用

> ID：13110331
> 
> 赞同：0
> 
> 时间：2012-10-28T15:50:04.630
> 
> 标签：php, javascript, ajax

当用户单击图像时，我试图显示一些信息。这是图像标签

```
<img src="<? echo $list[image]; ?>" onclick="showUser(<?php echo $list['id']; ?>)"> 
```

我直接使用 w3schools 的示例。这是[链接](http://www.w3schools.com/php/php_ajax_database.asp)

我做错了什么吗？当我单击图像时，没有任何反应。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T16:16:09.197

我不建议使用该 GET 方法，最好使用 load 方法，因为您可以使用更少的代码，并且我认为这会使事情变得更容易。现在我将这样做。假设您从那里获得了该代码，您可以执行以下操作：

```
<script type="text/javascript">
ShowUser(str) {$(function) {
  $('#loadhere').load("thepagetoloadfrom.php?q="+str);
}};
</script> 
```

`#loadhere`是您要从 load() 加载输出的位置。我相信这更短更容易理解。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T20:54:47.207

我自己发现了问题。在我调用时的 showUsers 函数中，`xmlHttp.open`我的文件路径错误。不管怎么说，还是要谢谢你

# android - 无法在我的 Android 应用程序中集成 Google Analytics

> ID：13110334
> 
> 赞同：2
> 
> 时间：2012-10-28T15:50:13.563
> 
> 标签：android, google-analytics, google-analytics-api

我想在我的 Android 移动应用程序中使用 Google Analytics 跟踪我的所有用户活动。我在构建路径中添加 libGoogleAnalytics.jar，在 Google 分析中创建一个帐户（所以我有我的 UA-XXXXXXXX-Y 编号）。这是我初始化跟踪器并尝试跟踪当前活动的方法：

```
 tracker = GoogleAnalyticsTracker.getInstance();
    tracker.setDebug(true);
    tracker.setDryRun(false);
    tracker.startNewSession("UA-XXXXXXXX-Y", MyActivity.this);

    tracker.trackPageView("/MainScreen");
    tracker.dispatch(); 
```

我还在我的 AndroidManifest 中添加了所需的许可：

```
<uses-permission android:name="android.permission.INTERNET" />
...
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
... 
```

您如何看到我启用调试以验证我的配置。调试日志中的所有内容对我来说都很好：

```
10-28 17:43:59.233: VERBOSE/GoogleAnalyticsTracker(11024): Called dispatch
10-28 17:43:59.233: VERBOSE/GoogleAnalyticsTracker(11024): Sending 1 hits to dispatcher
10-28 17:43:59.233: INFO/GoogleAnalyticsTracker(11024): Host: www.google-analytics.com
10-28 17:43:59.233: INFO/GoogleAnalyticsTracker(11024): User-Agent: GoogleAnalytics/1.5.1 (Linux; U; Android 4.0.3; en-gb; GT-I9100 Build/IML74K)
10-28 17:43:59.233: INFO/GoogleAnalyticsTracker(11024): GET /__utm.gif?utmwv=4.9.1ma&utmn=155573506&utmcs=UTF-8&utmsr=480x800&utmul=en-GB&utmp=%2FMainScreen&utmac=UA-xxxxxxxx-y&utmcc=__utma%3D1.1239100675.1351436696.1351436696.1351436696.1%3B&utmht=1351439039180&utmqt=59 HTTP/1.1
10-28 17:43:59.348: VERBOSE/GoogleAnalyticsTracker(11024): HTTP Response Code: 200 
```

我的问题是我的分析帐户中没有显示任何内容。所以什么都没有被追踪！实时统计数据还显示 0 和无数据。

有没有人遇到过这种情况？？？？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T09:14:26.273

[解决方案] [https://developers.google.com/analytics/devguides/collection/android/v2/?hl=bg](https://developers.google.com/analytics/devguides/collection/android/v2/?hl=bg)

迁移到基于 Easy Tracker 的 Google Analytics 新测试版，您将可以很好地跟踪用户交互。

这解决了我的问题，现在一切正常！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T17:26:51.027

我建议使用自动调度方法，我从来没有遇到过问题，并且最多在一个小时内得到报告。

默认情况下，分析报告屏幕不显示当日报告，在检查报告时不要忘记选择今天作为 enddata。

（当你给出一个像例子这样的间隔时，你不需要调度方法）

[https://developers.google.com/analytics/devguides/collection/android/devguide#samples](https://developers.google.com/analytics/devguides/collection/android/devguide#samples)

```
// ...alternatively, the tracker can be started with a dispatch interval (in seconds).
tracker.startNewSession("UA-YOUR-ACCOUNT-HERE", 20, this); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T09:15:37.753

数据需要 24 小时才能通过谷歌分析网络界面！

# ruby - Ruby rspec 命令不起作用可能是因为 Ubuntu 12 是 64 位吗？

> ID：13110341
> 
> 赞同：2
> 
> 时间：2012-10-28T15:50:39.397
> 
> 标签：ruby, ubuntu, rspec, 64-bit

在这个问题上我有很多头疼的问题。我目前正在处理一项要求我在 ruby​​ 上使用 rspec 的任务。每当我运行 rspec 命令时，我都会收到类似的错误

home/.rvm/gems/ruby-1.9.3-p286/gems/rspec-core-2.11.1/lib/core/configuration.rb:780:in 'load': 无法从 home/.rvm 加载此类文件/gems/ruby-1.9.3-p286/gems/rspec-core-2.11.1/lib/rspec/core/configuration.rb:780:in 'map'....

它们只是无穷无尽且令人困惑。我认为无论我如何根据测试规则进行调整，我都没有在我的 .rb 文件中做正确的事情。我想我会从一个基本的 rspec 教程示例从头开始，仍然会遇到相同的错误。我觉得这可能是我的 ruby​​ 安装，所以我卸载了，这次我使用 RVM 安装 - 我得到的错误仍然相同。无论我尝试什么 - 简单的测试代码（假设我的作业可能有问题），我都尝试了 rspec、rspec spec、rake spec，结果仍然相同。

我真的很困惑。我是 ruby​​ 新手，几天后我的作业就到期了。我知道如何编写获得所需结果所需的代码，但我被限制使用 rspec，这真的很烦人。然后我记得有一次当我尝试用我的 64 位 Ubunutu 安装 LAMPP 时，我被告知我需要获得 32 位库或其他东西，我这样做了，LAMPP 现在可以工作了（虽然我不能使用 myphp 管理员）。所以我在想，是不是我需要一个 32 位版本的 Ubuntu 12 来代替？它与我的 rspec 问题有什么关系，还是我只是做错了其他事情？

哦，是的，我安装了 ruby​​ gems。您的回答将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T04:27:32.747

1.) 删除您的*Gemfile.lock*文件

2.)`bundle install`如果您想排除任何内容，请使用 --without 标志前运行：`bundle install --without production`

3.) 运行`bundle exec rspec spec/`

这应该使它现在可以工作。让我知道。

# java - DefaultMutableTreeNode 内置树形结构

> ID：13110343
> 
> 赞同：0
> 
> 时间：2012-10-28T15:50:45.747
> 
> 标签：java, swing, jtree, treemodel

如何访问`userObject`如何`DefaultMutableTreeNode` 修改用户对象或提取其中定义的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T15:56:33.613

方法`setUserObject`和方法`getUserObject`呢？

# java - 静态变量搞砸了一切

> ID：13110344
> 
> 赞同：0
> 
> 时间：2012-10-28T15:50:55.107
> 
> 标签：java, java-2d

可能是一个非常基本的 Java 问题，但我在实体类中有两个变量：

```
public class Entity {

int posX;
int posY;

public Entity(int posX, int posY){
    this.posX = posX;
    this.posY = posY;
}

public void update(){

}

public void draw(Graphics2D g2d){

} 
```

}

我的玩家和敌人类扩展了它，然后渲染了这两个变量。像这样：

```
public void draw(Graphics2D g2d) {
    g2d.drawImage(getPlayerImg(), posX, posY, null);
    if (showBounds == true) {
        g2d.draw(getBounds());
    }
} 
```

我需要像这样访问这些变量（这是在我的敌人类中）：

```
public static void moveFemale(){
    if(posX <= Player.posX){
        //do AI code
    }
} 
```

posX 和 Player.posX 抛出一个错误，说我需要将 Entity.java 中 posX 的修饰符更改为 static。但是当我将其更改为静态时，我的敌人类渲染器停止工作，并且敌人不再出现在屏幕上。我怎么能去创建一个允许我这样做的变量：

```
public static void moveFemale(){
    if(posX <= Player.posX){
        //do AI code
    }
} 
```

还渲染我的敌人？对不起，文字墙，任何答案都会有很大帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T15:53:51.990

该`moveFemale`方法是静态的，因此它需要知道要移动*哪个*女性。要么传入对 palyer 的引用，要么找到一个可能以使移动方法成为播放器的非静态成员方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T15:53:48.667

`static`我认为，您应该从方法中删除修饰符`moveFemale`

```
 public void moveFemale(){
    if(posX <= Player.posX){
        //do AI code
    }
  } 
```

# shell - Shell 编程：带有命令替换的嵌套表达式

> ID：13110346
> 
> 赞同：3
> 
> 时间：2012-10-28T15:51:06.837
> 
> 标签：shell, nested, expression, command-substitution

我在处理其他表达式中的表达式时遇到了麻烦。例如，这是我的代码：

```
 #!/bin/sh
 number=0
 read number
 if [ `expr substr $number 1 2` = "0x" ]; 
 then
 echo "Yes that's hex: $number"
 number=`expr substr $number 3 `expr length $number`` 
 echo $number
 else
 echo "No that's not hex"
 fi 
```

我想要的只是让 echo 打印没有'0x'的数字。假设输入为 0x15，则输出应仅为 15。但似乎查找字符串的长度失败了。

现在，如果我像这样创建另一个名为 length 的变量：

```
 #!/bin/sh
 number=0
 read number
 if [ `expr substr $number 1 2` = "0x" ]; 
 then
 echo "Yes that's hex: $number"
 length=`expr length $number`
 number=`expr substr $number 3 $length` 
 echo $number
 else
 echo "No that's not hex"
 fi 
```

有用。

那么如何在不创建另一个变量的情况下获得相同的结果呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-28T16:44:03.720

如果你的 shell 是 POSIX （现在大多数是，除了 Solaris' `/bin/sh`），你可以嵌套所谓的**命令替换**，`$()`例如。

```
number=$(expr substr $number 3 $(expr length $number)) 
```

带有嵌套反引号的命令替换需要丑陋的反斜杠转义层。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T16:29:26.900

您可以使用

```
number=`expr substr $number 3 ${#number}`

${#number} 
```

可用于检索字符串的长度

# php - PHP next($array) 和 Javascript

> ID：13110348
> 
> 赞同：0
> 
> 时间：2012-10-28T15:51:10.343
> 
> 标签：php, javascript, html, next

我最近开始学习网络开发，我目前正在开发一个网页，该网页读取文件夹中的许多音频文件，并让用户写下她/他所听到的内容的成绩单。我几天前开始，我设法通过 php 获取文件列表并通过随机播放数组（让用户实际播放）随机文件（要清楚，每次加载页面时都会准备好随机文件被播放）。这似乎工作正常。

我还想添加让用户收听下一个/上一个文件的按钮，但是无论何时何地我写这`next($array)`行它都不起作用，更糟糕的是该`shuffle`功能也停止工作。我不知道这是否是因为我在标签中使用了 php，但我的直觉告诉我。

我不知道我是否足够清楚，但我会很感激任何帮助。所以这是我的代码：

```
<html>
  <head>
  </head>
  <body>
    <p align="center">
      <button><-</button>
      <audio src="./Sound data/AAA2028C4_0.wav" type="audio/wav" align="center" id="RandomAudio" controls="controls">
      </audio>
      <button name="nextButton" onClick="next()">-></button>
    </p>

    <script language="JavaScript" type="text/javascript">

      <?php
        //Scan the sound data folder for files
        $dir = './Sound data';
        $files = scandir($dir); 
        $random_file = shuffle($files);
      ?>;

      function load(){
        var test = "./Sound data/<?php
        //Select random element from files array    
        echo $files[$random_file];
        ?>";
        //Play a random file
        document.getElementById('RandomAudio').src=test;
      }

      function next(){
        var next = "./Sound data/<?php
        $next_file = next($random_file);
        echo $files[$next_file];
        ?>";
        //Play the next file
        document.getElementById('RandomAudio').src=next;
      }

      window.onload = load;
    </script>

    <form method="post" action="testecho.php" align="center">
      <strong><label>Transcript : </label></strong>
      <br>
      <textarea name ="transcript" rows="2" cols="40"> </textarea>
      <input type="submit" />
    </form>
  </body>   
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T16:18:08.610

对于您使用的每个功能，请查看手册。这有助于习惯它们。

让我们来看看：

```
$random_file = shuffle($files); 
```

该[`shuffle`](http://php.net/shuffle)函数返回`TRUE`或`FALSE`。因此，该`$random_file`变量仅在数组`$files`是否已成功洗牌时才具有信息。

```
echo $files[$random_file]; 
```

因此完全是假的。`$files`已经被洗牌*并且* `$random_file`是`TRUE`或`FALSE`。但是数组键是整数*或*字符串。

我很确定你知道如何解决这个问题。

与以下类似[`next`](http://php.bet/next)：

```
$next_file = next($random_file);
echo $files[$next_file]; 
```

即使`$next_file`下一个文件已经`$random_file`是 shuffled`$files`数组（它不是，见上文），也没有必要在下一行中使用它作为键：

```
echo $files[$next_file]; 
```

这没有任何意义。一步一步地编写你的代码。使用调试功能`var_dump`来显示发生了什么。仔细检查您当前使用的函数的 PHP 手册。然后逐行编写代码，你很快就准备好了，学到了很多东西。

不要盲目飞行。在每个函数调用之前和之后打印出来，并检查你期望函数做的事情是否真的完成了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-28T16:13:19.463

您不能这样做，因为 PHP 部分将在页面加载时运行一次。尝试将 PHP 数组转换为 JSON 并直接从 JS 中使用，无需 PHP。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T16:11:46.153

好吧，您与 PHP 内置函数有冲突[`next`](http://www.php.net/manual/en/function.next.php)。换个名字试试吧。

# javascript - 在 ondrag 事件期间，在 Firefox 中 pageX 和 pageY 始终设置为 0

> ID：13110349
> 
> 赞同：5
> 
> 时间：2012-10-28T15:51:25.727
> 
> 标签：javascript, firefox, events, drag-and-drop

我正在实现一个可视化编辑器，允许用户将图像拖到页面上，并在这些先前拖动的图像中拖动其他图像（类似于“添加另一个图像”）。

我基本上只需要拖动过程中的鼠标坐标：元素hiliting 等......我使用基于这些坐标的自定义函数。

问题是，在 Webkit 上，我可以使用`event.clientX`and来获取它们`event.clientY`，在 Firefox (v.16.0.1 OSX) 下，它们的“对应物”在我的拖动过程中始终为零`pageX`。`pageY`

但是，它们在 期间不为零`mouseMove`。

我很聪明，我做了一个

```
$(document).on("mouseMove",function(e){__PX=e.pageX,__PY=e.pageY}); 
```

总是有最新的`pageX`，`pageY`所以我可以在`onDrag`处理程序中使用它们但是......

在`OnMouseMove`拖放操作期间不会触发 :( :(

有什么方法可以在 DnD 期间获得鼠标 X 和 Y？我不想让我的代码过于混乱，因为它已经可以在不同的平台上运行，但不能在 Firefox 上运行。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-28T16:16:44.903

我在[这里找到了答案](https://stackoverflow.com/questions/887316/how-do-i-get-clientx-and-clienty-to-work-inside-my-drag-event-handler-on-firef?rq=1)。

我已经这样解决了：

```
(___NODRAGEVENT = $.browser.mozilla) && $(document).on("dragover", function(e) {
    e = e.originalEvent;
    ___PAGEX = e.clientX || e.pageX;
    ___PAGEY = e.clientY || e.pageY;
}); 
```

我真的很惊讶和困惑，`onDragOver`确实包括`clientX`and `clientY`。为什么他们不在拖动事件中填充它们？

# wcf - Mono：使用 basichttpBinding 的 WCF 服务超时 (Mono 2.10.8.1)

> ID：13110350
> 
> 赞同：3
> 
> 时间：2012-10-28T15:51:31.307
> 
> 标签：wcf, mono, wcf-client, basichttpbinding

我有带有 basicHTTPBinding 的 WCF 客户端。在 Windows 中运行时运行良好。但是从 Mono（Debian 2.10.8.1-5，Mono JIT 编译器版本 2.10.8.1）运行时，我立即超时。

```
Unhandled Exception: System.TimeoutException: The operation has timed-out.
  at System.ServiceModel.Channels.HttpRequestChannel+HttpChannelRequestAsyncResult.WaitEnd () [0x00000] in <filename unknown>:0
  at System.ServiceModel.Channels.HttpRequestChannel.EndRequest (IAsyncResult result) [0x00000] in <filename unknown>:0
  at System.ServiceModel.Channels.HttpRequestChannel.Request (System.ServiceModel.Channels.Message message, TimeSpan timeout) [0x00000] in <filename unknown>:0
  at System.ServiceModel.MonoInternal.ClientRuntimeChannel.Request (System.ServiceModel.Channels.Message msg, TimeSpan timeout) [0x00000] in <filename unknown>:0
  at System.ServiceModel.MonoInternal.ClientRuntimeChannel.Request (System.ServiceModel.Description.OperationDescription od, System.Object[] parameters) [0x00000] in <filename unknown>:0
  at System.ServiceModel.MonoInternal.ClientRuntimeChannel.DoProcess (System.Reflection.MethodBase method, System.String operationName, System.Object[] parameters) [0x00000] in <filename unknown>:0
  at System.ServiceModel.MonoInternal.ClientRuntimeChannel.Process (System.Reflection.MethodBase method, System.String operationName, System.Object[] parameters) [0x00000] in <filename unknown>:0
[ERROR] FATAL UNHANDLED EXCEPTION: System.TimeoutException: The operation has timed-out.
  at System.ServiceModel.Channels.HttpRequestChannel+HttpChannelRequestAsyncResult.WaitEnd () [0x00000] in <filename unknown>:0
  at System.ServiceModel.Channels.HttpRequestChannel.EndRequest (IAsyncResult result) [0x00000] in <filename unknown>:0
  at System.ServiceModel.Channels.HttpRequestChannel.Request (System.ServiceModel.Channels.Message message, TimeSpan timeout) [0x00000] in <filename unknown>:0
  at System.ServiceModel.MonoInternal.ClientRuntimeChannel.Request (System.ServiceModel.Channels.Message msg, TimeSpan timeout) [0x00000] in <filename unknown>:0
  at System.ServiceModel.MonoInternal.ClientRuntimeChannel.Request (System.ServiceModel.Description.OperationDescription od, System.Object[] parameters) [0x00000] in <filename unknown>:0
  at System.ServiceModel.MonoInternal.ClientRuntimeChannel.DoProcess (System.Reflection.MethodBase method, System.String operationName, System.Object[] parameters) [0x00000] in <filename unknown>:0
  at System.ServiceModel.MonoInternal.ClientRuntimeChannel.Process (System.Reflection.MethodBase method, System.String operationName, System.Object[] parameters) [0x00000] in <filename unknown>:0 
```

我已经检查过它不是网络连接问题，因为它是从其他（基于 Windows 的）客户端运行的。此外，应用程序不会等待设置的 1 分钟超时。

这是我用来调用服务的代码：

```
// Application Authentication
DiscoveryService.LDEDiscoveryServiceClient client = new DiscoveryService.LDEDiscoveryServiceClient();
client.InnerChannel.OperationTimeout = TimeSpan.FromMinutes(1);
Console.WriteLine("Connecting to: " + client.Endpoint.Address.Uri);
string token = client.GetTokenV1();
Console.WriteLine(token); 
```

以及用于绑定配置的 app.config：

```
<configuration>
    <startup> 
        <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.5"/>
    </startup>
    <system.serviceModel>
        <bindings>
            <basicHttpBinding>
                <binding name="BasicHttpBinding_ILDEDiscoveryService" closeTimeout="00:01:00" openTimeout="00:01:00" receiveTimeout="00:01:00" sendTimeout="00:01:00" maxBufferSize="2147483647" maxReceivedMessageSize="2147483647"/>
                <binding name="BasicHttpBinding_ILDEDeviceService" closeTimeout="00:01:00" openTimeout="00:01:00" receiveTimeout="00:01:00" sendTimeout="00:01:00" maxBufferSize="2147483647" maxReceivedMessageSize="2147483647"/>
            </basicHttpBinding>
        </bindings>
        <client>
            <endpoint address="http://hostname/LDE/DiscoveryService/LDEDiscoveryService.svc" binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_ILDEDiscoveryService" contract="DiscoveryService.ILDEDiscoveryService" name="BasicHttpBinding_ILDEDiscoveryService"/>
            <endpoint address="http://hostname/LDE/DeviceService/LDEDeviceService.svc" binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_ILDEDeviceService" contract="DeviceService.ILDEDeviceService" name="BasicHttpBinding_ILDEDeviceService"/>
        </client>
    </system.serviceModel>
</configuration> 
```

# mysql - 存储大量日志数据的最佳方式

> ID：13110356
> 
> 赞同：1
> 
> 时间：2012-10-28T15:51:34.430
> 
> 标签：mysql, database, postgresql, database-design, nosql

我需要关于存储统计数据的最佳方法的建议。在 Django 上有一个项目，它有一个包含 30 000 个在线游戏的数据库（mysql）。

每场比赛都有三个统计参数：

*   观看次数，
*   播放次数，
*   点赞数

现在我需要每天存储这三个参数的历史数据，所以我正在考虑创建一个包含五列的单个数据库：

```
gameid, number of views, plays, likes, date (day-month-year data). 
```

所以最后，每场比赛的每一天都将记录在一行中，所以在一天内该表将有 30000 行，在 10 天后将有 300000 行，在一年内将有 10 950 000 行. 我不是 DBA 方面的专家，但这告诉我，这很快就会成为性能问题。我不是在谈论 5 年后会发生什么。简单图表需要此表中收集的数据

```
(daily, weekly, monthly, custom range). 
```

也许您对如何存储这些数据有更好的想法？也许 noSQL 在这种情况下会更合适？真的需要你对this.d的建议

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T11:32:27.747

postgresql 中的分区非常适合大型日志。首先创建父表：

```
create table  game_history_log (
    gameid integer,
    views integer,
    plays integer,
    likes integer,
    log_date date
); 
```

现在创建分区。在这种情况下，每个月一个，900 k 行，会很好：

```
create table game_history_log_201210 (
    check (log_date between '2012-10-01' and '2012-10-31')
) inherits (game_history_log);

create table game_history_log_201211 (
    check (log_date between '2012-11-01' and '2012-11-30')
) inherits (game_history_log); 
```

注意每个分区中的检查约束。如果您尝试插入错误的分区：

```
insert into game_history_log_201210 (
    gameid, views, plays, likes, log_date
) values (1, 2, 3, 4, '2012-09-30');
ERROR:  new row for relation "game_history_log_201210" violates check constraint "game_history_log_201210_log_date_check"
DETAIL:  Failing row contains (1, 2, 3, 4, 2012-09-30). 
```

分区的优点之一是它只会在正确的分区中搜索，无论有多少年的数据，它都会显着且一致地减少搜索大小。这里解释了搜索某个日期：

```
explain
select *
from game_history_log
where log_date = date '2012-10-02';
                                              QUERY PLAN                                              
------------------------------------------------------------------------------------------------------
 Result  (cost=0.00..30.38 rows=9 width=20)
   ->  Append  (cost=0.00..30.38 rows=9 width=20)
         ->  Seq Scan on game_history_log  (cost=0.00..0.00 rows=1 width=20)
               Filter: (log_date = '2012-10-02'::date)
         ->  Seq Scan on game_history_log_201210 game_history_log  (cost=0.00..30.38 rows=8 width=20)
               Filter: (log_date = '2012-10-02'::date) 
```

请注意，除了父表之外，它只扫描了正确的分区。显然，您可以在分区上建立索引以避免顺序扫描。

[继承](http://www.postgresql.org/docs/current/interactive/ddl-inherit.html) [分区](http://www.postgresql.org/docs/current/interactive/ddl-partitioning.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-28T16:31:44.007

11M 行并不过分，但一般索引和主键的集群将更重要（在 InnoDB 上）。我建议将 (game_id, date) 作为主键，以便对某个游戏的所有数据的查询都在连续的行中。此外，当只需要最新数据时，您可能希望保留一个单独的表格，其中仅包含排名游戏的当前值等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-28T18:49:11.383

我建议根本不要使用关系数据库。静态是一种变化很快的东西，因为新数据不断出现。我相信像 HBase 这样的东西会更适合 - 因为在这里添加新记录的速度更快。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-28T16:01:46.637

10kk 数据的 MySQL 没有性能问题。您可以通过游戏 id 应用分区（至少需要 5.5 版本）。

我有这样的数据的 MySQL DB，目前 980kk 行没有问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-28T15:56:29.593

不要保留每一行，而是以高精度保留最近的数据，以 mdeium 精度保留中间数据，以低精度保留长期数据。这是[rrdtool](http://oss.oetiker.ch/rrdtool/)采用的方法，可能比 mysql 更好。

# svn - Tortoise SVN Diff 未能注意到长线中的相似之处

> ID：13110359
> 
> 赞同：1
> 
> 时间：2012-10-28T15:52:21.363
> 
> 标签：svn, tortoisesvn, diff

我试图使用 TSVN diff 来区分一篇文章的 2 个副本，但是当我进行第二次修订（修订版 3）并尝试将其与修订版 2 进行比较时，diff 只是在左窗格中突出显示所有橙色并在右窗格中突出显示所有黄色如添加。我不知道为什么要这样做，因为它在我的第一个和第二个修订版中似乎工作正常：

在此屏幕截图中，“今夏”不应在左侧突出显示为橙色，也不应在右侧突出显示为黄色。它显示一切都发生了变化，这无济于事。

![破碎的差异](../Images/bf0255fc1bb41a976ad071c88d010fd1.png)

这是我的另一个版本在工作时的样子。注意只有改变的东西在右边是黄色的：

![工作差异](../Images/26bf9d327ed45ea900c088dbad868994.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T06:34:21.803

TortoiseMerge 仅在更改很小的情况下显示行的内联差异。如果一行中有太多更改，它将将该行视为完全不同，并且不显示内联差异。

如果您想覆盖此行为（设置中没有选项），您可以使用注册表编辑器创建一个 DWORD 注册表项 HKCU\Software\TortoiseMerge\InlineDiffMaxLineLength。默认为 3000 个字符。如果您的行更长，您可以设置更高的值，但请注意这会影响性能。

# php - 添加在 Symfony2 中对每个请求调用的函数

> ID：13110360
> 
> 赞同：0
> 
> 时间：2012-10-28T15:52:23.230
> 
> 标签：php, symfony, symfony-2.1

我需要在 Symfony2 中添加一个必须在每个请求上调用的函数。（请求和会话的语言检测）

我想在我的 Controller 类的构造函数中执行此操作，但那里的容器是未知/创建的。

你对此有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T15:58:58.353

您可以定义您的事件监听器

请阅读有关创建[事件侦听](http://symfony.com/doc/current/cookbook/service_container/event_listener.html)器的文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T10:22:07.723

这是一个监听器，它重定向到用户配置中设置的语言的页面。使其适应您的需求。

```
<?php
namespace MyVendor\Listener;

use Symfony\Component\HttpKernel\HttpKernelInterface;
use Symfony\Component\HttpKernel\Event\GetResponseEvent;
use Symfony\Component\HttpFoundation\RedirectResponse;
use Symfony\Component\Security\Core\SecurityContextInterface;
use Symfony\Component\Routing\RouterInterface;
use JMS\DiExtraBundle\Annotation\Service;
use JMS\DiExtraBundle\Annotation\InjectParams;
use JMS\DiExtraBundle\Annotation\Observe;

/**
 * @Service
 */
class LanguageListener
{
    /**
     * @var \Symfony\Component\Security\Core\SecurityContextInterface
     */
    private $securityContext;

    /**
     * @var \Symfony\Component\Routing\RouterInterface
     */
    private $router;

    /**
     * @InjectParams
     *
     * @param \Symfony\Component\Security\Core\SecurityContextInterface $securityContext
     * @param \Symfony\Component\Routing\RouterInterface $router
     */
    public function __construct(
        SecurityContextInterface $securityContext, 
        RouterInterface $router
    ) {
        $this->securityContext = $securityContext;
        $this->router          = $router;
    }

    /**
     * @Observe("kernel.request")
     *
     * @param \Symfony\Component\HttpKernel\Event\GetResponseEvent $event
     */
    public function forceLanguage(GetResponseEvent $event)
    {
        if (HttpKernelInterface::MASTER_REQUEST !== $event->getRequestType()) {
            return;
        }

        $token = $this->securityContext->getToken();

        if (!$token) {
            return;
        }

        if (!$this->securityContext->isGranted('ROLE_USER')) {
            return;
        }

        /** @var $request \Symfony\Component\HttpFoundation\Request */
        $request = $event->getRequest();
        $locale  = $request->getLocale();
        $route   = $request->get('_route');

        if ('_' === $route[0]) {
            return;
        }

        /** @var $user \MyVendor\Model\User */
        $user = $token->getUser();

        if ($user->getConfig()->getLanguage() !== $locale) {
            $parameters = array_merge($request->attributes->get('_route_params'), [
                '_locale' => $user->getConfig()->getLanguage(),
            ]);

            $path = $this->router->generate($route, $parameters);
            $event->setResponse(new RedirectResponse($path));
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T09:58:51.073

或者使用上面建议的事件，或者如果你需要一些快速的东西。

您可以覆盖`setContainer`方法。

```
namespace My\Namespace;

use Symfony\Bundle\FrameworkBundle\Controller\Controller;
use Symfony\Component\DependencyInjection\ContainerInterface;

class MyController extends Controller 
{
    private $foo;

    public function setContainer(ContainerInterface $container = null)
    {
        parent::setContainer($container);
        $this->foo = 'bar';
    }
    // your actions
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-28T16:02:47.273

我相信这取决于你想要做什么。对于语言检测，大部分时间 symfony 及其捆绑软件几乎可以处理所有事情。这意味着如果您想自定义路由，则必须使用`routing.loader`标记扩展路由组件。但是，如果您可以使用[事件侦听](http://symfony.com/doc/current/cookbook/service_container/event_listener.html)器，但我不确定您可以从那里更改多少内容。

# javascript - 加载 AJAX 内容后如何重置 jCarousel？

> ID：13110361
> 
> 赞同：1
> 
> 时间：2012-10-28T15:52:27.050
> 
> 标签：javascript, jquery, jcarousel

我正在使用从模板购买的自定义 jCarousel JavaScript ( [http://pastebin.com/BwsVpNjr )；](http://pastebin.com/BwsVpNjr)但是，当我尝试使用 AJAX 加载内容时，轮播会中断，因为它无法确定宽度或高度。如何在通过 AJAX 插入内容后重新加载 jCarousel？

我花了 4-5 天的时间在谷歌上搜索解决方案，并看到数百人有类似的问题但没有明确的答案。请帮我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-20T23:54:22.063

我设法像那样修复它

```
$("#Services").each(function (index, item) {
        /* Load Content With AJAX */
        var url = site.baseUrl + $(item).data("url");
        if (url && url.length > 0) {
            $(item).load(url,

            /* Check return of load function if success load jcarousel */
            function (responseText, textStatus, XMLHttpRequest) {
                if (textStatus == "success") {
                    if ($('.slidewrap').length && jQuery()) {
                            $('.slidewrap').carousel({
                            speed: 600,
                            slider: '.slider',
                            slide: '.slide',
                            slideHed: '.slidehed',
                            nextSlide: '.next',
                            prevSlide: '.prev',
                            addPagination: false,
                            addNav: false
                            });
                    }
                }
                if (textStatus == "error") {
      // oh noes!
                }
            });
        }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T15:56:14.630

加载图像后，您需要使用重新加载轮播`.jcarousel('reload' [, options])`

# nosql - Cassandra 和数据模型优化中的一对多等价物

> ID：13110363
> 
> 赞同：4
> 
> 时间：2012-10-28T15:52:30.810
> 
> 标签：nosql, cassandra

我在 Cassandra 中对来自 RDBMS 的数据库进行建模。我想知道如何创建嵌入在同一列名中的一对多关系并对我的表进行建模以适应以下查询需求。

例如：

```
Boxes:{
  23442:{
    belongs_to_user: user1,
    box_title: 'the box title',
    items:{
      1: {
         name: 'itemname1',
         size: 44
      },
      2: {
        name: 'itemname2',
        size: 24
      }
    }
  },

 { ... }
} 
```

我读到最好使用复合列而不是超级列，所以我需要一个实现这一点的最佳方法的示例。我的查询是这样的：

*   按 Id 获取框的项目
*   获得前 20 个盒子及其项目（用于在页面上显示一系列盒子及其项目）
*   按项目 id 更新项目大小（按数字增加大小）
*   通过用户 ID 获取所有框（属于特定用户的所有框）

我期待大量的写入来改变盒子中每个项目的大小。我想知道在不需要使用超级列的情况下实现它的最佳方法。此外，我不介意得到一个考虑到 Cassandra 1.2 新特性的解决方案，因为我将在生产中使用它。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T12:34:51.900

由于多种原因，这个特定的模型有些挑战性。

例如，使用框 ID 作为行键，查询框的范围将需要在 Cassandra 中进行范围查询（而不是列切片），这意味着使用有序分区器。有序分区器几乎总是一个*坏主意*。

另一个挑战来自需要增加项目大小，因为这需要使用计数器列族。计数器列族*仅*存储计数器值。

暂时不考虑对一系列框 ID 的需求，您可以使用 CQL3 中的多个表对此进行建模，如下所示：

```
CREATE TABLE boxes (                                                                       
   id int PRIMARY KEY,                                                                 
   belongs_to_user text,                                                               
   box_title text,                                                                     
);
CREATE INDEX useridx on boxes (belongs_to_user);

CREATE TABLE box_items (                                                                   
   id int,                                                                             
   item int,                                                                           
   size counter,                                                                       
   PRIMARY KEY(id, item)                                                               
);

CREATE TABLE box_item_names (
    id int PRIMARY KEY,
    item int,
    name text
);

BEGIN BATCH
  INSERT INTO boxes (id, belongs_to_user, box_title) VALUES (23442, 'user1', 'the box title');
  INSERT INTO box_items (id, item, name) VALUES (23442, 1, 'itemname1');
  INSERT INTO box_items (id, item, name) VALUES (23442, 1, 'itemname2');
  UPDATE box_items SET size = size + 44 WHERE id = 23442 AND item = 1;                       
  UPDATE box_items SET size = size + 24 WHERE id = 23442 AND item = 2;
APPLY BATCH

-- Get items for box by ID                                                               
SELECT size FROM box_items WHERE id = 23442 AND item = 1;

-- Boxes by user ID
SELECT * FROM boxes WHERE belongs_to_user = 'user1'; 
```

需要注意的是，上面的 BATCH 突变既是原子的，又是孤立的。

从技术上讲，您还可以将所有这些非规范化到一个表中。例如：

```
CREATE TABLE boxes (
   id int,
   belongs_to_user text,
   box_title text,
   item int,
   name text,
   size counter,
   PRIMARY KEY(id, item, belongs_to_user, box_title, name)
);

UPDATE boxes set size = item_size + 44 WHERE id = 23442 AND belongs_to_user = 'user1'
    AND box_title = 'the box title' AND name = 'itemname1' AND item = 1;

SELECT item, name, size FROM boxes WHERE id = 23442; 
```

*但是，这不能保证正确性*。例如，这个模型使得同一个盒子的项目可以有不同的用户或标题。而且，由于这构成`boxes`了一个计数器列族，它限制了您将来如何发展模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T11:34:51.600

我认为首先在 PlayOrm 的对象中，然后在下面显示列模型....

```
Box {
   @NoSqlId
   String id;
   @NoSqlEmbedded
   List<Item> items;
}

User {
   @NoSqlId
   TimeUUID uuid;
   @OneToMany
   List<Box> boxes;
} 
```

然后用户是这样的一行

```
rowkey = uuid=<someuuid> boxes.fkToBox35 = null, boxes.fktoBox37=null, boxes.fkToBox38=null 
```

请注意，上面的形式是 columname=value，其中一些列名是复合的，而有些则不是。

盒子更有趣，说 Item 有字段 name 和 idnumber，那么 box row 将是

```
rowkey = id=myid, items.item23.name=playdo, items.item23.idnumber=5634, itesm.item56.name=pencil, items.item56.idnumber=7894 
```

我不确定你在获得前 20 个盒子是什么意思？顶框是指其中的项目数量？

院长

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-01T05:50:07.497

您可以使用**Query-Driven Methodology**进行数据建模。您拥有三种广泛的访问路径：
1）每个查询的
分区 2）每个查询的分区+（一个或多个分区）
3）表或表+每个查询

最有效的选项是“<strong>partition per query”。[在这种](http://www.cs.wayne.edu/andrey/papers/TR-BIGDATA-05-2015-CKL.pdf)情况下，本文可以逐步为您提供帮助。它的样本正是**一对多的关系**。

根据[这个](http://www.datastax.com/dev/blog/basic-rules-of-cassandra-data-modeling)，你将有几个表有一些相似的列。您可以通过**物化视图**或批处理日志（作为替代方法）来管理它。

# c# - 单击按钮时如何使用一段时间？

> ID：13110371
> 
> 赞同：0
> 
> 时间：2012-10-28T15:53:28.207
> 
> 标签：c#, do-while

我有一段代码在我想要的地方，这样在点击必要的按钮之前它不会执行那段代码，在这种情况下是再次播放按钮。这是我的一段代码：

```
private void ShowResultsOfThrow()
{
    TwoUp.SetUpCoins();
    TwoUp.ThrowCoins();
    TwoUp.OutputWinner();

    do
    {
       TwoUp.ThrowCoins();
       TwoUp.OutputWinner();
       TwoUp.HoldPoints();
    } while //when the button is clicked to play again

    TwoUp.ResetGlobals();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T15:55:33.813

只需将该代码放入 button_click 事件中

```
private void  button1_click(object sender, EventArgs e)
{
   TwoUp.ThrowCoins();
   TwoUp.OutputWinner();
   TwoUp.HoldPoints();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T16:43:43.940

如果您有权访问该按钮。您可以执行此操作

让我们假设按钮名称是`btnClick`

让有一个在单击按钮时会被调用的方法。

```
private void  TwoUpMethod(object sender, EventArgs e)
{
     TwoUp.ThrowCoins();
     TwoUp.OutputWinner();
     TwoUp.HoldPoints();
     TwoUp.ResetGlobals(); // Optional - not sure what this does...
} 
```

`Click`现在用按钮的事件注册这个方法。把下面的代码放在`InitializeComponent()`表单的方法中

```
btnClick.Click+=TwoUpMethod; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T16:30:00.813

根据您的评论：

不要使用该`ShowResultsOfThrow()`方法。相反，例如，如果您的按钮名为 Button1，请尝试以下操作：

```
private void Initalize()
{
     TwoUp.SetUpCoins();

}

private void  Button1_click(object sender, EventArgs e)
{

     TwoUp.ThrowCoins();
     TwoUp.OutputWinner();
     TwoUp.HoldPoints();
     TwoUp.ResetGlobals(); // Optional - not sure what this does...
} 
```

Initalize() 应该只被调用一次（或者当你需要设置硬币时）

# python - Python 令人讨厌的持续错误：初学者

> ID：13110375
> 
> 赞同：0
> 
> 时间：2012-10-28T15:53:45.493
> 
> 标签：python

我刚刚开始学习 python 并不断收到一个我无法弄清楚的错误。任何帮助将不胜感激。基本上，我不断收到以下错误：

```
Enter an int: 8

Traceback (most recent call last):
  File "C:\Users\Samuel\Documents\Python Stuff\Find Prime Factors of Number.py", line 16, in <module>
    once_cycle()
  File "C:\Users\Samuel\Documents\Python Stuff\Find Prime Factors of Number.py", line 8, in once_cycle
    while x==0:
UnboundLocalError: local variable 'x' referenced before assignment 
```

我看到很多人都有同样的问题，但是当我看到人们告诉他们做什么时，我无法弄清楚。无论如何，我的代码是这样的。我重新检查了所有的缩进，看不出有什么问题。这个程序的目的是找到一个 int 的主要因素（尽管它只完成了 90%）。它是用 Python 2.7.3 编写的。

```
import math
testedInt = float(raw_input("Enter an int: "))
workingInt = testedInt
x = 0

def once_cycle():
    for dividor in range(1, int(math.floor(math.sqrt(testedInt))+1)):
        while x==0:
            print "Called"
            if (workingInt%dividor == 0):
                workingInt = workingInt/dividor
                x = 1
    if (workingInt > 1):
        once_cycle()
    return

once_cycle()

print workingInt 
```

提前感谢您的帮助，

山姆

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-28T15:56:15.673

在您的`one_cycle()`功能中，您*有时*会分配给`x`：

```
 if (workingInt%dividor == 0):
            workingInt = workingInt/dividor
            x = 1 
```

这会产生`x`一个局部变量。您还通过测试引用它：

```
 while x==0: 
```

但在分配*给*. 这是您的异常的原因。

要么`x = 0`在函数的开头添加，要么将其声明为全局（如果这是你的意思）。从外观上看，您不会`x`在函数之外使用，所以您可能不是故意的。

以下作品；`workingInt`也正在修改，因此需要声明`global`：

```
def once_cycle():
    global workingInt
    x = 0

    for dividor in range(1, int(math.floor(math.sqrt(testedInt))+1)):
        while x==0:
            print "Called"
            if (workingInt%dividor == 0):
                workingInt = workingInt/dividor
                x = 1
    if (workingInt > 1):
        once_cycle()
    return 
```

或者，简化：

```
def once_cycle():
    global workingInt

    for dividor in range(1, int(math.sqrt(testedInt)) + 1):
        while True:
            if workingInt % dividor == 0:
                workingInt = workingInt / dividor
                break
    if workingInt > 1:
        once_cycle() 
```

`int(floating_point_number)`已经占据了浮点参​​数的地板。

`workingInt % dividor`请注意，如果不是，您最终*会* 出现无限循环`0`。第一次`testedInt`是奇数，例如，这会打到你，你的循环永远不会退出。

以`11`为例；您将尝试除数`1`,`2`和`3`. While`1`是一个除数，`workingInt`将保留`11`并且循环中断。下一个`for`循环，除数是`2`，并且`workingInt % 2`永远不会给你`0`，所以循环将永远继续。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-28T15:57:29.387

您需要声明全局变量`x`，`testedInt`并`workingInt`在内部声明`one_cycle()`以便在那里访问它们：

```
def once_cycle():
    global x
    global testedInt
    global workingInt 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-28T15:59:57.200

您需要`globals`在代码中定义 3 `once_cycle()`：

由于函数中的变量是静态定义的，而不是在调用函数时。所以python认为变量`testedInt`,`workingInt`和`x`被函数认为是局部变量，它会引发错误。

```
import math
testedInt = float(raw_input("Enter an int: "))
workingInt = testedInt
x = 0

def once_cycle():
    global x
    global workingInt
    global testedInt
    for dividor in range(1, int(math.floor(math.sqrt(testedInt))+1)):
        while x==0:
            print "Called"
            if (workingInt%dividor == 0):
                workingInt = workingInt/dividor
                x = 1
                if (workingInt > 1):
                    once_cycle()
                return
once_cycle() 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-28T15:56:45.860

`x`从_

```
x = 0 
```

与来自的不一样

```
while x==0: 
```

有关如何[在函数中使用全局变量的信息，请参阅在创建它们的函数之外的函数](https://stackoverflow.com/questions/423379/using-global-variables-in-a-function-other-than-the-one-that-created-them)中使用全局变量。

# webserver - VIP 环回别名如何工作？

> ID：13110378
> 
> 赞同：1
> 
> 时间：2012-10-28T15:53:50.977
> 
> 标签：webserver, load-balancing, loopback-address

我想知道环回别名是如何工作的，可以说我有以下节点：

n[1-10] 在负载均衡器上，都在以下 VIP 下： xx.xx.xx.xx yy.yy.yy.yy 在我们有以下节点的节点上：

lo:0 Link encap:Local Loopback
inet addr:xx.xx.xx.xx Mask:255.255.255.255 UP LOOPBACK RUNNING MTU:16436 Metric:1

lo:1 Link encap:Local Loopback
inet addr:yy.yy.yy.yy Mask:255.255.255.255 UP LOOPBACK RUNNING MTU:16436 Metric:1

有人可以解释一下环回的概念吗，或者给我一个链接来阅读这个概念

抱歉，我对此没有深入的背景，而且我不想只知道如何去做（这是我在寻找时发现的最多的东西），但我想知道为什么我正在做这个环回别名

有人可以向我解释一下客户端请求的生命周期是什么，包括负载均衡器规则，以及这个游戏中的环回服务器如何:)？

谢谢大家

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T10:16:21.693

为了使节点上的服务能够侦听 VIPS 的传入连接，您需要在接口、物理或环回上配置 VIP。

问题是，您不希望节点响应有关 VIP 的 ARP 请求，因为您只希望负载均衡器这样做，以便所有连接都转到负载均衡器。

为此，您需要以一种或另一种方式在节点上进行 ARP 过滤，允许它们响应其真实 IP 的 ARP 请求，但不能响应 VIP。在 Linux 上，一种非常简单的方法是将系统配置为仅响应进入拥有 IP 地址的接口的 ARP 请求，使用 arp_ignore 和 arp_announce sysctls。环回接口在设计上是本地的，不会有 ARP 请求进入环回。

如果您想了解更多信息，可以阅读 LVS Howto 的“ARP​​ 问题”部分： [http ://www.austintek.com/LVS/LVS-HOWTO/HOWTO/LVS-HOWTO.arp_problem.html](http://www.austintek.com/LVS/LVS-HOWTO/HOWTO/LVS-HOWTO.arp_problem.html)

# bgp - IP 到 ASN 映射算法

> ID：13110386
> 
> 赞同：10
> 
> 时间：2012-10-28T15:54:13.957
> 
> 标签：bgp

有没有简单的方法可以将给定的 IP 地址映射到相应的 ASN 号？例如：

ping 找出 IP 地址：

```
$ ping www.switch.ch
PING aslan.switch.ch (130.59.108.36) 56(84) bytes of data. 
```

whois 查找 ASN 号：

```
$ whois -h whois.cymru.com -v 130.59.108.36
Warning: RIPE flags used with a traditional server.
AS      | IP               | BGP Prefix          | CC | Registry | Allocated  | AS Name
559     | 130.59.108.36    | 130.59.0.0/16       | CH | ripencc  | 1993-09-22 | SWITCH SWITCH, Swiss Education and Research Network 
```

所以这种情况下的映射是`130.59.108.36`（IP）-> `559`（ASN）。简单的。但是，如果我想使用来自区域互联网注册机构的公开可用信息创建自己的本地地图服务，该怎么办？所以，对于上面的例子，就是这个列表，对吧？

```
ftp://ftp.ripe.net/pub/stats/ripencc/delegated-ripencc-latest 
```

并且找到匹配的条目也不是问题：

```
ripencc|CH|ipv4|130.59.0.0|65536|19930922|assigned 
```

但是我如何从上面的行中获取 ASN 号？这两个信息是如何联系在一起的？

```
ripencc|EU|asn|559|1|19930901|allocated 
```

提前感谢您的回复！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-21T20:40:20.250

我在这里解释如何做到这一点：[https](https://www.quaxio.com/bgp/) ://www.quaxio.com/bgp/ （以前在[https://alokmenghrajani.github.io/bgp/](https://alokmenghrajani.github.io/bgp/)）

它基本上涉及从路由器下载转储，然后使用有效的数据表示将 IP 地址映射到网络掩码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-21T03:31:40.093

我建议根据从实际 BGP 扬声器收集的 MRT 转储来执行此操作。

有这个 python 库 fe 可以用来轻松解析 MRT 转储：[http ://code.google.com/p/pyasn/](http://code.google.com/p/pyasn/)

如果您无法运行自己的 BGP 扬声器，您可以在[http://archive.routeviews.org/下载转储文件](http://archive.routeviews.org/)

确保你也检查他们的其他东西。它们还提供 DNS 区域文件，使您能够使用标准 DNS 服务器（例如 Bind 或 NSD）进行此类查找：http: [//archive.routeviews.org/dnszones/](http://archive.routeviews.org/dnszones/)

我希望这能让你开始......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-14T22:16:42.870

我制作了一个将 ASN 附加到 HTTP 日志行的工具。我解释了如何从 RIPE 原始数据构建数据库并将其与二进制搜索一起使用。此外，C 代码已准备好使用。在常规虚拟实例上几秒钟内进行 160 万次查找：

[https://github.com/psvz/tirexASN](https://github.com/psvz/tirexASN)

# mysql - 在 MySQL 表中复制行后如何返回行 ID？

> ID：13110390
> 
> 赞同：1
> 
> 时间：2012-10-28T15:55:10.543
> 
> 标签：mysql, pdo, last-insert-id

我需要复制/复制表中的一行，然后返回新行的“id”值。我的“id”列是一个自动增量字段。

```
$sth = $dbh->prepare("DROP TEMPORARY TABLE IF EXISTS tmp_users;
                      CREATE TEMPORARY TABLE tmp_users
                          SELECT * FROM users 
                          WHERE user_id = $user_id
                      UPDATE tmp_users 
                          SET id = NULL;
                      INSERT INTO users 
                          SELECT * FROM tmp_users;
                      DROP TEMPORARY TABLE IF EXISTS tmp_users;");

$sth->execute(); 
```

如果我这样做`$id_new = $dbh->lastInsertId();`返回'0'，但不知道为什么。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T16:27:36.323

您的查询中有语法错误，您在`CREATE TEMPORARY TABLE`语句末尾缺少分号：

```
CREATE TEMPORARY TABLE tmp_users
    SELECT * FROM users 
    WHERE user_id = $user_id
UPDATE tmp_users 
    SET id = NULL; 
```

即使您相信语句“执行得很好”，您也可以清楚地看到上面的摘录末尾*只有一个分号；*即它是*一个*带有语法错误的语句，**而不是**两个单独的`CREATE`和`UPDATE`语句。

PDO 似乎对多语句查询的处理非常糟糕，未能报告其中的错误。我进行了以下测试：

```
$sth = $dbh->prepare("INSERT INTO test VALUES ('test1');
                      INVALID STATEMENT;
                      INSERT INTO test VALUES ('test2');");
$sth->execute(); 
```

如您所见，我在两个有效语句之间包含了一个无效`INSERT`语句。运行上面的代码后，我的测试表只有插入的`'test1'`值，但是`'test2'`没有插入，PDO也没有报错。

您的语法错误`CREATE TEMPORARY TABLE`阻止了表的实际创建，这也阻止了其余语句的正常运行，因此您没有将新行插入`users`表中，也没有最后插入的 ID。

**更新：**这是此 PDO 行为的实际[PHP 错误报告，显然仍未解决。](https://bugs.php.net/bug.php?id=61613)

# assembly - 组装，这条线是做什么的？

> ID：13110391
> 
> 赞同：0
> 
> 时间：2012-10-28T15:55:19.107
> 
> 标签：assembly, x86

这行代码在下面的代码中做了什么？

```
0x0804840c <+3>: mov 0x8(%ebp),%edx 
```

我知道 mov %x, %y 将 reg 值 %x 移动到 %y，但堆栈偏移量 8 从未设置为任何值，所以我不确定将什么移动到 %edx。我对组装真的很陌生，我完全迷路了。

```
(IA32 Assembly)

  0x08048409 <+0>: push %ebp 

  0x0804840a <+1>: mov %esp,%ebp 

  0x0804840c <+3>: mov 0x8(%ebp),%edx 

  0x0804840f <+6>: mov %edx,%eax 

  0x08048411 <+8>: shl $0x4,%eax 

  0x08048414 <+11>: sub %edx,%eax 

  0x08048416 <+13>: pop %ebp 

  0x08048417 <+14>: ret 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T16:03:33.920

这是[32 位 x86 ELF ABI](http://www.sco.com/developers/devspecs/abi386-4.pdf)，看起来像，所以堆栈槽`8(%ebp)`保存这个函数的参数 1，由调用者放在那里。

整体函数计算`(x << 4) - x`。

# mysql - 与 distinct 一起计数以检查帖子被阅读的次数

> ID：13110393
> 
> 赞同：1
> 
> 时间：2012-10-28T15:55:26.957
> 
> 标签：mysql, sql

我在 Mysql 中有这张表，我用它来收集用户查看帖子的次数的数据。reader_id 是阅读帖子的用户的 id，read_pub_id 是发布/撰写帖子的人的 id，read_artc_id 是帖子的 id。

它的创建是这样的：

```
CREATE TABLE `reads_t` (
    `reader_id` INT(10) NOT NULL DEFAULT '0',
    `read_pub_id` INT(10) NOT NULL DEFAULT '0',
    `read_artc_id` INT(10) NOT NULL DEFAULT '0',
    PRIMARY KEY (`reader_id`, `read_pub_id`, `read_artc_id`)
)
COLLATE='utf8_general_ci'
ENGINE=MyISAM; 
```

然后，每次阅读帖子时我都会使用 Insert Ignore 语句，如下所示：

```
insert ignore into reads_t (reader_id, read_pub_id, read_artc_id) values (3,2,1); 
```

所以我最终得到这样的数据：

```
reader_id; read_pub_id; read_artc_id
        1;           1;           1
        1;           1;           2
        1;           1;           3
        2;           1;           1
        2;           1;           2
        2;           1;           3
        2;           2;           2
        2;           2;           3
        3;           1;           1
        3;           2;           1
        3;           2;           2 
```

这里，用户 1 阅读了发布者 1 的文章 1 等等。

我如何执行 sql，以便最终得到如下数据：这是读者阅读出版商的帖子的总次数。稍后我将使用它来更新每个帖子的“阅读”列。

```
read_pub_id ; read_artc_id ; times_read
          1              1            3
          1              2            2
          1              3            2
          2              1            1
          2              2            2
          2              3            1 
```

我可以看到这不能在我习惯的简单选择语句中完成。我尝试了下面的那个，但这给了我奇怪的结果。

```
select read_pub_id, read_artc_id, count(read_artc_id) as times_read from reads_t; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T16:37:41.707

就像@fthiell 建议的那样，你非常接近:)，你应该使用类似的东西：

```
select read_pub_id, read_artc_id, count(read_artc_id) as times_read
from reads_t
group by read_pub_id, read_artc_id; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T17:02:52.230

您只需要添加 GROUP BY 子句，如下所示：

```
SELECT
  read_pub_id,
  read_artc_id,
  count(read_artc_id) as times_read
FROM
  reads_t
GROUP BY
  read_pub_id,
  read_artc_id; 
```

:)

# c - 未发送信号（POSIX 和 C）

> ID：13110394
> 
> 赞同：1
> 
> 时间：2012-10-28T15:55:31.210
> 
> 标签：c, timer, signals, posix, fork

我已经编写了下面的代码，我想要以下内容：

在每 5 秒内，父级获取一个随机整数并放入共享内存中，然后向其子级发送一个信号。

孩子计算需要多少辆电车来承载该数量的乘客（如您所见，有 TRAM_CAP 等的定义），然后孩子将新的电车计数放入共享内存中。

最后，在收到信号通知后，父母会打印乘客和电车的数量。

我的问题是没有信号发送，但我不知道为什么。

我搜索并搜索了数百万次，但什么也没有......计时器正在工作，但没有别的（只是第一个“电车数量计算”）

顺便说一句，这是我一生中编写的第二个 C 代码：S 所以我是新手。

```
#include "stdio.h"
#include "stdlib.h"
#include "string.h"
#include "fcntl.h"
#include "errno.h"

#include "sys/types.h"
#include "sys/stat.h"
#include "unistd.h"
#include <sys/time.h>
#include <signal.h>

#include <sys/ipc.h>
#include <sys/shm.h>

#include <math.h>

#define MEM_KEY 2003
#define INTERVAL 2

#define NEW_STAT SIGUSR1
#define NEW_TRAM_CNT SIGUSR2

#define MAX_PASSENGER 1000

#define TRAM_CAP 60

// "slots" in shared memory
#define PASS_CNT 0
#define TRAM_CNT 1

int get_pass_stat();
void handle_pass_stat_generation (int sig);
void handle_exit_func (int sig);
void set_pass_stat_generation();
void handle_new_tram_cnt_set(int sig);

void handle_new_stat_arrived(int sig);

void set_data(int which, int to);
int get_data(int which);

static pid_t ppid;
static pid_t chpid;

int main() 
{
  int shmid = shmget((key_t) MEM_KEY, sizeof(int) * 2, IPC_CREAT | 0666);
  int* segptr = shmat(shmid, 0, 0);
  segptr[PASS_CNT] = 0;     
  segptr[TRAM_CNT] = 0;
  // seed for rand
  srand((unsigned)time(NULL));
  //
  int pid=fork();
  if(pid == 0) // child
  {
    signal(NEW_STAT, handle_new_stat_arrived);
    while(1) sleep(30);

  }else if(pid > 0) // parent
  { 
    chpid = pid;
    ppid = getpid();

    signal(NEW_TRAM_CNT, handle_new_tram_cnt_set);
    signal(SIGINT,handle_exit_func);      
    set_pass_stat_generation(pid);

    while(1) sleep(30);
  }else
  {
    perror("Fork error."); 
    exit(1);      
  };
  return 0;

}

int get_pass_stat()
{
    return rand() % MAX_PASSENGER + 1;  
}

void handle_pass_stat_generation (int sig)
{
  int st = get_pass_stat();
  set_data(PASS_CNT, st);
  kill( chpid, NEW_STAT );
  printf("%i is the pass. cnt %i is the tram cnt. \n", st, get_data(TRAM_CNT));
 // set_pass_stat_generation();
}

void handle_exit_func (int sig)
{
    printf("\nBye Bye!!!\n");
    exit(0);
}

void set_pass_stat_generation()
{
  struct itimerval tval;
  tval.it_interval.tv_sec = INTERVAL;
  tval.it_interval.tv_usec = 0;
  tval.it_value.tv_sec = INTERVAL; /* 5 seconds timer */
  tval.it_value.tv_usec = 0;
  setitimer(ITIMER_REAL, &tval,0);

  signal(SIGALRM, handle_pass_stat_generation); /* set the Alarm signal capture */
}

void handle_new_stat_arrived(int sig)
{
  int tram_count = get_data(TRAM_CNT);
  int passenger_count = get_data(PASS_CNT);
  if( (TRAM_CAP * tram_count < passenger_count) || 
      (TRAM_CAP * (tram_count-1) > passenger_count) ||
      (passenger_count == 0) )
  {
      int new_cnt = (int) ceil((double)passenger_count / (double)TRAM_CAP);
      set_data(TRAM_CNT, new_cnt);
      kill( ppid, NEW_TRAM_CNT );
  } 
  signal(NEW_STAT, handle_new_stat_arrived);
}

void handle_new_tram_cnt_set(int sig)
{
    signal(NEW_TRAM_CNT,handle_new_tram_cnt_set);
}

void set_data(int which, int to)
{
  int shmid = shmget((key_t) MEM_KEY, 0, 0);
  int* segptr = shmat(shmid, 0, 0);
  segptr[which] = to;  
}

int get_data(int which)
{
  int shmid = shmget((key_t) MEM_KEY, 0, 0);
  int* segptr = shmat(shmid, 0, 0);
  return segptr[which]; 
} 
```

# netbeans - 通过 glassfish 资源（连接池）从现有数据库创建实体 bean

> ID：13110395
> 
> 赞同：2
> 
> 时间：2012-10-28T15:55:32.663
> 
> 标签：netbeans, glassfish, persistence, hsqldb, entity-bean

我想从数据库创建一个实体类。我的数据库是 HSQL，我使用文件来存储数据。

我没有问题配置连接池以连接到该数据库@ glassfish 使用连接池（**HSQL 文件**）的资源的名称是**HSQLJdbcResource**：

![在此处输入图像描述](../Images/02c2f4b2620da9c6283e9767666e6113.png)

从 JSP 文件中访问该资源也没有问题，这段代码运行良好：

![在此处输入图像描述](../Images/7de465b499b81ae597f804c4b3e5ce43.png)

但是我确实有一个问题，当我想使用 netbeans 向导从数据库创建实体类时，因为不知何故，neatbeans 找不到驱动程序：

![在此处输入图像描述](../Images/f6e7a526b9f2dff60393ef26cc0ace8d.png)

我有驱动程序并附加到项目中，并且我可以设法通过 std 数据源创建实体类，但我想要使用 glassfish 资源，因为如果不这样做 --- 由于我的 JPA，文件将被锁定使用 glassfish 资源和连接池......恶性循环，有什么解决方案吗？

![在此处输入图像描述](../Images/41611b26963671d07e26252ffbfee489.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T01:02:10.523

1.  请检查驱动路径是否正确。
2.  **在系统类路径**中添加 hsql 驱动程序。

此外，这可能会有所帮助： http: [//hsqldb.org/doc/guide/ch04.html](http://hsqldb.org/doc/guide/ch04.html)

# c - 开源或免费软件 C 代码度量工具？

> ID：13110400
> 
> 赞同：2
> 
> 时间：2012-10-28T15:55:49.810
> 
> 标签：c, complexity-theory, metrics, cohesion, code-size

我一直在尝试找到一种工具（希望适用于 MAC OS X，但我不介意迁移）——适用于这些尺寸，但我没有运气。[Maultech](http://www.maultech.com/chrislott/resources/cmetrics/)提到了一些，[这个页面](http://www.locmetrics.com/alternatives.html)也是如此，但我无法让它们工作。Meter 和 ccount（在该页面上列出）似乎涵盖了我想要的大部分内容。这些工具似乎也不再是最新的了，这让我不确定输出是否仍然可以信任。

当前是否有任何免费或开源的 C 工具可以做到这一点？我发现的大部分内容都是针对 Java 或 OO 的。

我所说的简单指标是指例如计算数量、字符、空格、函数、方法、语句数量、嵌套深度等。

大小是指代码行和注释。

我所说的复杂性至少是指 mccabe 和 halstead 度量。

耦合和凝聚力是指函数调用等之间的交互（这是已知的 SE 原则）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-22T10:16:23.887

I usually use [Frama-c](http://en.wikipedia.org/wiki/Frama-C).

You may want to take a look at its [metrics plugin](http://frama-c.com/metrics.html) (**McCabe**'s cyclomatic complexity, **Halstead** complexity, Value analysis coverage estimate, etc)

> What is Frama-C ?
> 
> Frama-C is an extensible and collaborative platform dedicated to source-code analysis of C software.

# python - Matplotlib 后端缺少带下划线的模块

> ID：13110403
> 
> 赞同：13
> 
> 时间：2012-10-28T15:56:04.923
> 
> 标签：python, matplotlib

我一直在使用 matplotlib 一段时间没有问题。自从我需要交互式绘图功能（使用了 Tkaag）以来已经有一段时间了。从那以后我更新了 matplotlib 几次。

我今天尝试使用它，但它产生了一个错误。

```
/usr/local/lib/python2.7/dist-packages/matplotlib/backends/tkagg.py in <module>()
----> 1 import _tkagg
      2 import Tkinter as Tk
      3 
      4 def blit(photoimage, aggimage, bbox=None, colormode=1):
      5     tk = photoimage.tk

ImportError: No module named _tkagg 
```

我尝试了一个不同的后端，添加了

```
backend      : GTKAgg 
```

到 matplotlibrc。只是为了获得不同模块的相同错误。

```
ImportError: No module named _backend_gdk 
```

当我在 /usr/local/lib/python2.7/dist-packages/matplotlib/backends/ 中浏览后端时，我注意到所有带下划线的必需模块都丢失了。

```
alan@linux /usr/local/lib/python2.7/dist-packages/matplotlib/backends $ ls
backend_agg.py        backend_macosx.py    backend_template.pyc
backend_agg.pyc       backend_macosx.pyc   backend_tkagg.py
_backend_agg.so       backend_mixed.py     backend_tkagg.pyc
backend_cairo.py      backend_mixed.pyc    backend_wxagg.py
backend_cairo.pyc     backend_pdf.py       backend_wxagg.pyc
backend_cocoaagg.py   backend_pdf.pyc      backend_wx.py
backend_cocoaagg.pyc  backend_ps.py        backend_wx.pyc
backend_emf.py        backend_ps.pyc       __init__.py
backend_emf.pyc       backend_qt4agg.py    __init__.pyc
backend_fltkagg.py    backend_qt4agg.pyc   Matplotlib.nib
backend_fltkagg.pyc   backend_qt4.py       qt4_compat.py
backend_gdk.py        backend_qt4.pyc      qt4_compat.pyc
backend_gdk.pyc       backend_qtagg.py     qt4_editor
backend_gtkagg.py     backend_qtagg.pyc    tkagg.py
backend_gtkagg.pyc    backend_qt.py        tkagg.pyc
backend_gtkcairo.py   backend_qt.pyc       windowing.py
backend_gtkcairo.pyc  backend_svg.py       windowing.pyc
backend_gtk.py        backend_svg.pyc
backend_gtk.pyc       backend_template.py 
```

我当前的 matplotlib 版本：

```
matplotlib      - 1.1.1        - active development (/usr/local/lib/python2.7/dist-packages) 
```

我试过卸载并重新安装matplotlib：

```
pip uninstall matplotlib
pip install matplotlib 
```

一切顺利。

关于设置让交互式绘图再次运行的提示？

```
 BUILDING MATPLOTLIB

                matplotlib: 1.1.1

                    python: 2.7.3rc2 (default, Apr 22 2012, 22:35:38)  [GCC

                            4.6.3]

                  platform: linux2

    REQUIRED DEPENDENCIES

                     numpy: 1.6.2

                 freetype2: 14.1.8

    OPTIONAL BACKEND DEPENDENCIES

                    libpng: 1.2.49

                   Tkinter: no

                            * Using default library and include directories for

                            * Tcl and Tk because a Tk window failed to open.

                            * You may need to define DISPLAY for Tk to work so

                            * that setup can determine where your libraries are

                            * located. Tkinter present, but header files are not

                            * found. You may need to install development

                            * packages.

                pkg-config: looking for pygtk-2.0 gtk+-2.0

                            * Package pygtk-2.0 was not found in the pkg-config

                            * search path. Perhaps you should add the directory

                            * containing `pygtk-2.0.pc' to the PKG_CONFIG_PATH

                            * environment variable No package 'pygtk-2.0' found

                            * Package gtk+-2.0 was not found in the pkg-config

                            * search path. Perhaps you should add the directory

                            * containing `gtk+-2.0.pc' to the PKG_CONFIG_PATH

                            * environment variable No package 'gtk+-2.0' found

                            * You may need to install 'dev' package(s) to

                            * provide header files.

                      Gtk+: no

                            * Could not find Gtk+ headers in any of

                            * '/usr/local/include', '/usr/include', '.'

           Mac OS X native: no

                        Qt: no

                       Qt4: Qt: 4.8.1, PyQt4: 4.9.1

                    PySide: no

                     Cairo: 1.8.8

    OPTIONAL DATE/TIMEZONE DEPENDENCIES

                  datetime: present, version unknown

                  dateutil: matplotlib will provide

                      pytz: matplotlib will provide

    adding pytz

    OPTIONAL USETEX DEPENDENCIES

                    dvipng: 1.14

               ghostscript: 9.05

                     latex: 3.1415926

                   pdftops: 0.18.4 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-28T20:26:02.777

感谢 peison 的评论，我检查了 matplotlib 的安装日志，它显示了很多依赖项。

我之前没有注意到，因为安装的整个过程运行得非常快，使用

`pip install matplotlib`

并以成功安装结束。

回答问题。解决方案是安装包 tk 和 tk-dev，并重建 matplotlib。

# cocoa-touch - UIButton 的 UIImageView 不会改变

> ID：13110404
> 
> 赞同：0
> 
> 时间：2012-10-28T15:56:06.533
> 
> 标签：cocoa-touch, uibutton, uiimage

我有以下 IBOutlet Action

```
.
.
if(!isWishlisted)
        {
            isWishlisted = true;
            plistPath = [[NSBundle mainBundle] pathForResource:@"InYourWishlist" ofType:@"png"];
            addToWishListButton.imageView.image = [UIImage imageWithContentsOfFile:plistPath];
            NSLog(@"Set Image with InYourWishlist");
        }
        else
        {
            isWishlisted = false;
            plistPath = [[NSBundle mainBundle] pathForResource:@"Add to Wishlist" ofType:@"png"];
            addToWishListButton.imageView.image = [UIImage imageWithContentsOfFile:plistPath];
            NSLog(@"Set Image with Add To Wishlist");
        }
.
. 
```

最初，在视图加载时，执行一次

```
isWishlisted = false; 
```

在“mainSoryBoard”上，“addToWishListButton”的图像设置为“Add to Wishlist.png”。

在前两次单击（相隔几秒钟）时，我得到以下日志输出：

```
2012-10-28 21:16:28.420 Movie Rental[92512:c07] Set Image with InYourWishlist
2012-10-28 21:16:31.596 Movie Rental[92512:c07] Set Image with Add To Wishlist 
```

但问题是图像“InYourWishlist.png”出现在按钮上的瞬间，然后又变回上一个图像。

似乎是什么问题？代码中没有其他地方可以访问按钮“addToWishListButton”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T16:26:42.307

让它工作使用

```
[addToWishListButton setImage:[UIImage imageWithContentsOfFile:plistPath] forState:UIControlStateNormal]; 
```

# caching - SOC 嵌入式 SRAM 缓存一致性

> ID：13110407
> 
> 赞同：1
> 
> 时间：2012-10-28T15:56:17.983
> 
> 标签：caching, memory, static, embedded, ram

我正在研究嵌入式系统中的内存层次结构这一主题。在某些嵌入式 SOC 设备上，芯片上提供了专用 SRAM。我的问题是：

为什么 SOC 嵌入式 SRAM 通常缓存与主存系统不一致？

因此，通常 SRAM 被映射到非缓存地址空间。

我知道 SRAM 的内容取决于应用程序，并且通常一个特定的链接器部分将特定的数据结构映射到 SRAM，以减少对这些数据的访问时间。例如，可以将中断向量表放入 SRAM 以减少访问时间并强制执行确定性中断处理。缓存 SRAM 会使 SRAM 访问不确定，因为可能发生缓存未命中。

无论如何，我不明白这是否与 SRAM 不缓存一致的原因有关。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-28T23:29:31.577

On die memory us usually very fast. Depending on how small/embedded you are asking about the cache and the on chip ram are the same speed so it would be silly to slow down the on die sram by adding extra cycles and widening the accesses by putting sram in front of it. Those systems often have on chip flash as well and that does desire a cache or some sort of buffering to speed up execution and in that case you would see the cache in front of the flash. To use the cache in front of sram for data accesses you would need some sort of memmory management, more stuff to take space on die and more stuff to slow things down. A simple solution is to for example in the chip design declare everything with the msbit of the address set uncached and put your peripherals there and everything with the msbit not set cachable if the cache is enabled and put your ram and flash there.

If you have on chip and off chip memory that off chip memory space might want a cache and probably like the upper address bit or bits solution have only the off chip memory being cached (since it is likely slower).

In order to boot the vector table needs to be in flash, in general. Some systems let you after boot switch what memory responds to that address space, branch to another address space for the flash, flip a control bit and now there is ram at the ivt, then you copy or create your new vector table in ram. The flash memory that holds the ivt on boot is not necessarily non-deterministic, I would lean toward it being very deterministic, as deterministic as the on chip ram. Perhaps a few clocks slower per access. Your interrupt and any other execution performance is often more determined by your language and compiler than the system.

Perhaps you should specify the exact system or systems you are confused about.

# sass - 使用指南针将 .scss 文件单独编译到特定路径

> ID：13110408
> 
> 赞同：2
> 
> 时间：2012-10-28T15:56:23.720
> 
> 标签：sass, compass-sass

当我做：

```
compass compile app/css/libraries/bootstrap/bootstrap.scss 
```

它将将该文件编译为：

```
app/css/libraries/bootstrap/bootstrap.css 
```

编译单个文件时有没有办法告诉指南针将文件编译到特定目录？像：

```
compass compile app/css/libraries/bootstrap/bootstrap.scss:app/css/bootstrap.css 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-07T15:11:48.087

您可以通过 CLI 覆盖任何 Compass[配置属性](http://compass-style.org/help/documentation/configuration-reference/#configuration-properties)，因此在这种情况下，您可以执行以下操作：

```
compass compile app/css/libraries/bootstrap/bootstrap.scss --css-dir=app/css 
```

# c++ - 在 C++ 11 中使用来自 lambdas 的值

> ID：13110413
> 
> 赞同：2
> 
> 时间：2012-10-28T15:57:13.290
> 
> 标签：c++, lambda, c++11

> **可能重复：**
> [C++11 lambda 表达式末尾的括号](https://stackoverflow.com/questions/12662688/parentheses-at-the-end-of-a-c11-lambda-expression)

```
#include <iostream>

int main(int argc, char* argv[])
{
    int j;
    [&](){j = 10;}(); // why I need the last rounded parentheses () and what is their purpose ?
    // ...
    return(0);
} 
```

我几乎了解了 lambda 是如何工作的，我的最后一个问题是为什么我需要上面代码中报告的最后几个括号。

lambda 的蓝图是

```
[](){} 
```

另外，我在这里通过引用为我的 lambda 输入一个输入，我直接`j`用这个 lambda 写入，但是我的编译器抱怨这样一个事实，即如果我不把额外的值放在`()`最后，这个 lambda 会生成一个未使用的值的拉姆达。

所以，最后，一个 lambda 是这个

```
[](){} 
```

或这个

```
[](){}() 
```

?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-28T16:00:15.450

`[](){}`定义了一个临时的 lambda 仿函数，最终调用`()`它的`operator()`（即函数调用运算符）=> 您正在定义一个（临时）lambda 并在现场调用它。

您可能会更好地“看到”它

```
([](){})()
 ^^^^^^ ^^ 
   ||    invokes the "function call operator"
 lambda definition 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-28T15:58:35.080

一个 lambda 函数是`[](){}`. 当您在其后添加括号时，它会执行 lambda 函数。

编写`[](){}`，您只需声明函数。这使您能够将其与类似的东西一起存储，以`auto my_lambda = [](){}`供以后调用`my_lambda()`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-28T15:58:12.223

*调用运算符*将​​立即执行 lambda。

```
int x = [] { return 5; }(); // x == 5 
```

# visual-studio - 构建事件 - 带有名称的快捷方式

> ID：13110417
> 
> 赞同：0
> 
> 时间：2012-10-28T15:57:54.007
> 
> 标签：visual-studio, msbuild

想要根据需要将一个项目的文件移动到另一个项目的输出中。

```
xcopy /y "$(SolutionDir)..\db\dbw.sdf" "$(SolutionDir)Shell\$(OutDir)" 
```

而不是第二部分想要使用类似的东西：

但据说`"exited with code 4"`

**他们在哪里：（文件夹结构）**

**顶级目录**：解决方案，DB，Src

**Shell**（主要项目名称）：位于 Src

*dbw 文件位于`ProjectX`想要将其移动到 Shell 项目的输出目录中。*

传递此地址的最短可能形式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T16:25:15.220

根据您更新的问题，这是您想要的吗？

`xcopy "$(SolutionDir)..\db\dbw.sdf" "$(ProjectDir)$(OutDir)dbw.sdf" /Y`

?

这是所有[PostBuild 宏](http://msdn.microsoft.com/en-us/library/42x5kfw4%28v=vs.80%29.aspx)的列表，如果这不是您正在寻找的 - 也许它可以提供帮助。

# java - 从设计密码迁移到 java

> ID：13110418
> 
> 赞同：2
> 
> 时间：2012-10-28T15:58:08.870
> 
> 标签：java, ruby-on-rails, authentication, devise

我用设计在rails中创建了系统。我需要将它的身份验证逻辑重写为java。问题是，我不知道 rails 加密密码是如何生成的。我需要这些知识在 java 中创建类似的方法来验证已经存储在数据库中的加密密码。

谢谢帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T20:21:32.590

经过几个小时的挖掘，我发现使用以下行就足够了：

```
BCrypt.checkpw(plainTextPassword, encryptedPassword) 
```

您不需要了解数据库存储字符串的哪一部分是盐、拉伸等。我仍然不完全了解字符串的哪些部分：`$2a$10$IAB6DfjYD4mbHiGWHB6YAOJqSwie1kLJNTl/bKQasb.ZJ.hj8VdTq`这是设计存储`123456`密码的版本；）

[这篇文章](https://stackoverflow.com/questions/277044/do-i-need-to-store-the-salt-with-bcrypt)帮助我了解我需要做什么。

# sencha-touch - 如何禁用页面转换（适用于 Android 设备）

> ID：13110420
> 
> 赞同：1
> 
> 时间：2012-10-28T15:58:15.457
> 
> 标签：sencha-touch, extjs, sencha-touch-2

我想禁用 Android 设备的页面转换，但不知道如何。

这是我的 app.js 类的代码：

```
Ext.application({
name: 'app',

models: ['PModel', 'TModel'],
stores: ['PStore', 'TStore'],
controllers: ['HController', 'PController', 'TController'],
views: ['Main'],

launch: function() {
    console.log("app launch");
    Ext.Viewport.add({
         xclass: 'app.view.Main'
    });

    if (Ext.os.is.Android) {
        Ext.Msg.alert("Android detected");
        //TODO: DISABLE PAGE TRANSITIONS
    }
    else{
        Ext.Msg.alert("Another OS detected");
    }
}
}); 
```

我已经检查过正在运行的操作系统，但我找不到如何禁用页面转换。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T09:33:23.030

**更新：**

下面的函数应该禁用转换，所以我将此函数添加到我的 if else 语句中，但它没有做任何事情。

```
Ext.Anim.override({
        disableAnimations:true
    }); 
```

现在我的完整启动功能如下所示：

```
 launch: function() {
    if (Ext.os.is.Android) {
        Ext.Msg.alert("Android detected");

        Ext.Anim.override({
            disableAnimations:true
        });
    }
    else{
        Ext.Msg.alert("Another OS detected");
    }

    console.log("app launch");
    Ext.Viewport.add({
         xclass: 'app.view.Main'
    });
} 
```

# c# - 将图像导入图像框

> ID：13110422
> 
> 赞同：2
> 
> 时间：2012-10-28T15:58:33.720
> 
> 标签：c#, image, visual-studio-2012

我正在尝试将图像导入 c# 中的“图像”框。

我发现在 XAML 中做它只是

```
source = "file location" 
```

但是当我在 C# 中尝试以下代码时

```
myimage.source = "image.png" 
```

我的图像是“图像”框的名称，它只返回此错误：

```
Error: Cannot implicitly convert type 'string' to 'System.Windows.Media.ImageSource' 
```

在网上查看时，每个人似乎都只是使用图片框引用，但我无法访问图片框，如果我没有，并且指向程序“myimage”正在显示实时视频流。所以，我认为需要一个图像框。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T16:33:37.890

```
picBox.Image = Image.FromFile("image.png"); 
```

您可能想要创建一个指向实际图像的新 URI

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T16:54:27.960

使用 openFileDialog1 对象尝试此代码：双击您的图片框并写入：

```
private void imagePictureBox_Click(object sender, EventArgs e)
    {
        if (openFileDialog1.ShowDialog() == DialogResult.OK)
        {
            imagePictureBox.ImageLocation = openFileDialog1.FileName;
        }
    } 
```

如果您的图像位于应用程序文件夹的“图像文件夹”中，只需编写：

```
imagePictureBox.ImageLocation = "images/YourImage.png"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T16:01:27.573

检查此[链接](http://msdn.microsoft.com/en-us/library/system.windows.controls.image.source%28v=vs.95%29.aspx)。

在 C# 中它将是：

```
Image myImage = new Image();
myImage.Source = new BitmapImage(new Uri("myPicture.jpg", UriKind.RelativeOrAbsolute)); 
```

# c# - 为数组赋值

> ID：13110423
> 
> 赞同：2
> 
> 时间：2012-10-28T15:58:34.473
> 
> 标签：c#, arrays

我试图将值放入一个数组中，但是当我编译代码时，它告诉我这两个数组从未被分配过并且它们的值都设置为 null。有人可以看看代码并告诉我我做错了什么吗？

```
class SinusoidalWaveform
{
    double[] angleArray;
    double[] resultArray;

    public SinusoidalWaveform(double minAngle, double maxAngle, int size)
    {
        int c = 0;

        for(double temp = minAngle; temp <= maxAngle; temp+=maxAngle/(size - 1d))
        {
          this.angleArray[c] = temp;
          this.resultArray[c] = Math.Sin(temp);
          c++;
        }
    }
} 
```

minAngle 和 maxAngle 的弧度由用户给定，size 是我们希望数组的长度，这也是用户指定的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T16:00:21.333

您需要为两个数组分配内存：

```
double[] angleArray = new double[5];
double[] resultArray = new double[5]; 
```

在构造函数或声明中执行此操作。在这种情况下，5 表示在内存中为该数组分配的元素数量。

```
for(double temp = minAngle; temp <= maxAngle; temp+=maxAngle/(size - 1d))
{
          this.angleArray[c] = temp;
          this.resultArray[c] = Math.Sin(temp);
          c++; 
} 
```

这很糟糕，您没有检查 c++ 是否大于数组的长度。所以你有两个选择。废话选项：

```
for(double temp = minAngle; temp <= maxAngle; temp+=maxAngle/(size - 1d))
{
          this.angleArray[c] = temp;
          this.resultArray[c] = Math.Sin(temp);
          if(c+1 > angleArray.Length) break; //exit or risk out of bound exception
          c++; 
} 
```

更好的选择，使用可调整大小的数组：`List<double>`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-28T16:05:06.927

看起来您在运行循环之前不知道数组大小，所以最简单的解决方案是使用通用列表，然后在循环之后分配数组：

```
List<double> angleList = new List<double>();
List<double> resultList= new List<double>();
for(double temp = minAngle; temp <= maxAngle; temp+=maxAngle/(size - 1d))
{
   angleList.Add(temp);
   resultList.Add(Math.Sin(temp));
}
this.angleArray = angleList.ToArray();
this.resultArray= resultList.ToArray(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T16:01:15.653

两个数组实际上都没有被分配。

尝试这个：

```
class SinusoidalWaveform
{

    double[] angleArray = new double[MAX_SIZE];
    double[] resultArray  = new double[MAX_SIZE];
    ..... 
```

其中 MAX_SIZE 是数组的大小。如果您不确定最大尺寸是多少，请考虑使用 a [`List<double>`](http://www.dotnetperls.com/list)，例如。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-28T16:02:25.843

在开始循环之前，使用用户指定的大小实例化您的数组，如下所示：

```
angleArray = new double[size];
resultArray = new double[size]; 
```

数组是 C# 中的对象。它们必须在使用前进行实例化。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-28T16:16:38.427

它实际上告诉您这一点，因为您未分配数组

```
double[] angleArray;
double[] resultArray; 
```

**如果您想为这两个数组分配值，那么您可以尝试以下方法之一**

**1||** 如果您想在一步中分配值，那么您可以试试这个

```
double[] angleArray = { 1, 2, 3 };
double[] resultArray = { 4, 5, 6 }; 
```

然后，您可以使用以下代码访问其值，例如

```
int n = 1;
angleArray[n] = 1; //Set (2) to (1) 
```

其中**n**是数组中项目的索引。通常，在数组中，第一项采用索引`0`而不是`1`。所以，如果你说它`angleArray[1]`会输出`2`

**2||** 如果您想将数组最大值设置为特定值/分两步分配值

```
double[] angleArray = new double[3];
double[] resultArrau = new double[3]; 
```

尽管这将分配值，但这些值仍然是未知的，因为当您说

```
double[] angleArray = new double[3]; 
```

您正在告诉程序您要分配 3 个值，但您现在不会指示这些值。

在这种情况下，您可以使用以下代码指定值，例如

```
double[] angleArray = new double[3];
int o = 0;
for (int i = 0; i < angleArray.Length; i++)
{
     angleArray[i] = o;
     o++;
} 
```

这将分配一个值，`o`该值将在`1`每个`for`循环中递增。您可能会注意到，我没有说`i < angleArray.Length + 1`是因为数组中的索引以`0`但不是`1`

**重要通知**：如果您有一个最多包含 6 个值的数组集`double[] _Array = new double[6];`，则您可能不会设置 index `7`( `_Array[7] = 1;`) 的值，因为您只有`6`索引。否则，你会得到`IndexOutOfRangeException was unhandled`

谢谢，
我希望你觉得这有帮助:)

# php - 始终在托管服务器中运行 PHP 脚本

> ID：13110425
> 
> 赞同：2
> 
> 时间：2012-10-28T15:58:37.480
> 
> 标签：php, web-services

我创建了一个 PHP 脚本，它将在 10 秒后通过提供的邮件列表连续发送邮件，但如果我在我的网络浏览器中保持打开状态，它就可以工作，但是有没有办法在我的托管服务器上运行这个脚本，所以我不需要总是打开我的浏览器和互联网连接，这个脚本会在我的电脑关闭的情况下在服务器本身中持续运行吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T16:02:32.647

将其作为守护进程或 cron 运行。对于 cron，您可以低至每 1 分钟运行一次。Cron 不支持 bellow 。cron 条目将如下所示，

```
# m h  dom mon dow   command
  * *  *   *   *    /usr/bin/php /path/to/project/file.php 
```

对于守护进程，基本上你从命令行运行这个脚本。在脚本中，您运行一个 10 秒睡眠的 while 循环。

```
while(true){
    // do stuff
    sleep(10);
} 
```

守护程序解决方案更灵活但难以实施。为此，您必须处理[信号处理](http://bd1.php.net/pcntl)以处理`Ctrl`+`C`或`KILL`信号、[分叉 dameon](http://pear.php.net/package/System_Daemon)、日志记录。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T14:20:42.087

假设您遇到命令字段的问题，
在“要运行的命令：”字段中，输入脚本的完整路径（您可能需要与您的主机核实）。如果要运行 php 文件，该命令将以 php 开头。例如，如果您想运行 RSS Import 来更新您的 Pligg 提要，您需要输入 php 和 import_feeds.php 文件的路径。
在 AN Hosting 上，您的路径将如下所示：

```
php /home/[your username]/public_html/rss/import_feeds.php 
```

如果您想运行自动备份脚本，它会备份您的 MySQL 数据库并将副本通过电子邮件发送给您（请参阅 WordPress Bloggers（和其他人）的 8 MySQL 备份策略，策略 #7），您将输入 /bin/sh (因为这是一个 shell 脚本），以及脚本的路径。
在 AN Hosting 上，您的路径将如下所示：

```
/bin/sh /home/[your username]/etc/upstart_cron_backup.sh 
```

希望这会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T15:59:42.393

为此，您需要使用 cron 作业。Cron 作业可以按您设置的定期间隔运行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-28T16:01:27.917

你可以通过cron运行它...

SSH 到您的托管服务提供商并转到您的 crontab，使用`crontab -e`

并在每设定的时间内设置一个将使用 wget 的 cron。

```
wget [options] [url] 
```

在谷歌上搜索如何正确执行此操作的 crons

编辑：如果您无法访问 SSH，并且您使用的是 Windows，则可以设置计划任务，这是 cron 作业的残缺兄弟。您可以运行一个模拟 wget 的 php 脚本。我建议对通过控制台运行 php 的 *.bat 文件运行计划任务

doThis.bat

```
php [script-location] 
```

# javascript - 网络图

> ID：13110430
> 
> 赞同：3
> 
> 时间：2012-10-28T15:59:00.850
> 
> 标签：javascript, graph, d3.js, diagram

我以前从未使用过 D3.js，但喜欢上蝙蝠的例子。我要做一个代表系统/服务器和公司项目的图表。该图将用作系统通信和集成状态的报告。我们希望用户能够轻松直观地了解系统的通信方式、通信内容，并能够单击“通信线路”以获取详细状态。后端是可控的，但我们需要构建一个闪闪发光的前端。

我的第一个想法是强制导向布局非常适合这个，但我不确定。以下[示例将是完美](http://www.yworks.com/products/yfileshtml/demos/GraphViewer/demo.yfiles.graph.viewer/index.html)的，除了它是在我不想使用的框架中制作的（太贵了），并且它不包含任何事件处理。但是这个例子中的演示是我们正在寻找的。

我可以获得任何社区意见吗？我提供的示例是否可以在 D3.js 中制作（如果我在这个问题上得到否定，我会感到惊讶）？我能得到任何可以让我开始参与这个项目的技巧吗？

在此先感谢所有杰出的人。:-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T13:10:10.187

如果您希望使用 d3.js 的强大功能使用一些有利可图的动画来可视化数据，上述示例在强制定向布局中看起来不错。按照这个例子**http://bl.ocks.org/1377729**可以用图像替换节点值并获取它。好吧，另一方面，如果只想呈现静态可视化数据，则可以以各种方式完成。软件甚至闪存。因此，选择完全取决于一个人想要赚多少钱。希望这会有所帮助。干杯。

# php - 考虑 DTS 转换日期和时间

> ID：13110433
> 
> 赞同：1
> 
> 时间：2012-10-28T15:59:25.343
> 
> 标签：php, dst, date-conversion

我需要将日期转换为 GMT，并且我正在考虑依赖这个脚本（源自`date_default_timezone_set`文档评论中的内容（[http://us.php.net/manual/en/function.date-default-timezone-set. php](http://us.php.net/manual/en/function.date-default-timezone-set.php) ):

```
$userDate = "2012-12-05 12:13:41";
$userTimezone = "America/New_York";
$dateResult = convertDate($userDate, $userTimezone);

function convertDate($dateOrigin, $timezoneOrigin) {
    $date = new DateTime($dateOrigin, new DateTimeZone($timezoneOrigin)); 
    date_default_timezone_set('Europe/London'); 
    return date("Y-m-d h:i:s", $date->format('U'));
} 
```

但我想知道，上面的代码会考虑夏令时更改吗？我的意思是，给定用户的时区和日期，在转换到另一个时区时，上面的代码是否考虑了由于 DTS 而可能出现的差异？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T16:32:23.920

经过一些测试，答案是否定的。使用上述代码的转换不考虑 DTS 的变化。所以我猜这个代码几乎没用。

# c# - 二维按钮数组？

> ID：13110436
> 
> 赞同：0
> 
> 时间：2012-10-28T15:59:42.440
> 
> 标签：c#, winforms

我想以 Windows 形式创建二维按钮数组。我必须使用 for 循环来完成，因为我想要一个包含 100 个按钮的数组。但我无法让它工作。我尝试使用 List> 和 Button[,] 但不起作用。当我这样尝试时：

```
private List<List<Button>> LEDarray = new List<List<Button>>();

        for (int y = 0; y < 5; y++)
        {
            this.tempList.Clear();

            for (int x = 0; x < 20; x++)
            {
                this.tempList.Add(new Button());
            }

            this.LEDarray.Add(tempList);
        }
        for (int y = 0; y < 5; y++)
        {
            for (int x = 0; x < 20; x++)
            {
                this.LEDarray[y][x].BackColor = System.Drawing.Color.FromArgb(((int)(((byte)(0)))), ((int)(((byte)(64)))), ((int)(((byte)(0)))));
                this.LEDarray[y][x].FlatStyle = System.Windows.Forms.FlatStyle.Flat;
                this.LEDarray[y][x].ForeColor = System.Drawing.Color.Black;

                xPos = xOffset + LEDsize * x + 20;
                yPos = yOffset + LEDsize * y + 20;

                this.LEDarray[y][x].Location = new System.Drawing.Point(xPos, yPos);
                this.LEDarray[y][x].Name = "button" + y.ToString() + x.ToString(); 
                this.LEDarray[y][x].Size = new System.Drawing.Size(LEDsize, LEDsize);
                this.LEDarray[y][x].TabIndex = 0;
                this.LEDarray[y][x].UseVisualStyleBackColor = false;
            }
        }

        for (int y = 0; y < 5; y++)
        {
            for (int x = 0; x < 20; x++)
            {
                this.Controls.Add(this.LEDarray[y][x]);
            }
        } 
```

它只显示最后一行按钮。所以只是第五行，而不是前一行。当我尝试使用 Button 数组进行类似操作时，它根本不起作用。但数组方式只是 SOS 呼叫。我想用 List 来做，所以你能帮我用上面的代码让它工作吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-28T16:04:01.413

`for (int y = 0; y < 0; y++)`向`for (int y = 0; y < 5; y++)`控件添加按钮时更改条件。

第二个问题是您正在清除您刚刚添加到的 tempList 引用`LEDarray`。为每行按钮创建新列表：

```
for (int y = 0; y < 5; y++)
{
     // tempList.Clear() - this will remove all buttons from previous row
     tempList = new List<Button>();

     for (int x = 0; x < 20; x++)     
          tempList.Add(new Button());     

     LEDarray.Add(tempList);
} 
```

另外我建议您增加`TabIndex`按钮：

```
this.LEDarray[y][x].TabIndex = 10 * y + x; 
```

另一个建议 - 创建您的自定义`LEDButton`类并使用它：

```
public class LEDButton : Button
{
    public const int LEDWidth = 20;
    public const int LEDHeight = 20;

    public LEDButton()
    {
        BackColor = Color.FromArgb(0, 64, 0);
        ForeColor = Color.Black;
        FlatStyle = FlatStyle.Flat;
        Size = new Size(LEDWidth, LEDHeight);
        UseVisualStyleBackColor = false;
    }
} 
```

用法：

```
// initialize array
LEDButton[,] leds = new LEDButton[5, 20];
for (int y = 0; y < leds.GetUpperBound(0); y++)
    for (int x = 0; x < leds.GetUpperBound(1); x++)
        leds[y, x] = new LEDButton()
            {
                Name = String.Format("Button{0}{1}", y, x),
                TabIndex = 10 * y + x,
                Location = new Point(LEDButton.LEDWidth * x + 20,
                                     LEDButton.LEDHeight * y + 20)
            };
// add buttons to controls
for (int y = 0; y < leds.GetUpperBound(0); y++)
    for (int x = 0; x < leds.GetUpperBound(1); x++)
         Controls.Add(leds[y, x]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T16:08:43.627

由于您似乎混淆了边界值，请尝试使用*foreach*代替:-)

```
foreach (var row in this.LEDArray)
{
    foreach (var button in row)
    {
        this.Controls.Add(button);
    }
} 
```

可以说，这传达了代码的意图——添加集合中的所有按钮——也更好。

# php - 访问 PHP 对象中的常量

> ID：13110446
> 
> 赞同：3
> 
> 时间：2012-10-28T16:00:21.023
> 
> 标签：php, class, properties

目前我正在阅读 PHP 5 OOP（[属性部分](http://www.php.net/manual/en/language.oop5.properties.php)），在那里我发现了以下语句：

> 在类方法中，可以使用 $this->property 形式访问属性、*常量和方法*

这很奇怪，但我无法使用该格式访问常量。以下代码将引起注意：

```
class A
{
    const HELLO = 'HELLO WORLD';

    public function __construct()
    {
        echo $this->HELLO;
    }
}

$a = new A(); 
```

我是否误解了某些东西或文档的作者犯了错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T16:01:43.813

访问常量尝试

```
class A
{
    const HELLO = 'HELLO WORLD';

    public function __construct()
    {
        echo self::HELLO;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-28T17:46:52.790

手册中的条目确实有点误导。我现在已经删除了对常量和方法的引用，因为它们无论如何都不属于关于属性的一章。新段落现在听起来像这样：

> 在类方法中，可以使用 ->（对象运算符）访问非静态属性：$this->property（其中 property 是属性的名称）。使用 ::（双冒号）访问静态属性：self::$property。有关静态和非静态属性之间差异的更多信息，请参阅[静态关键字。](http://php.net/manual/en/language.oop5.static.php)

*   [http://svn.php.net/viewvc?view=revision&revision=328166](http://svn.php.net/viewvc?view=revision&revision=328166)和
*   [http://svn.php.net/viewvc?view=revision&revision=328167](http://svn.php.net/viewvc?view=revision&revision=328167)

最多可能需要一周时间，所有镜像上都会出现更改。

感谢您指出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T16:02:03.193

`self`使用或使用类名访问常量。如果你在同一个班级：

```
self::HELLO 
```

如果您在另一个类中使用它：

```
A::HELLO 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-28T16:02:29.710

你必须使用`self::HELLO`！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-28T16:25:11.737

对此最清晰的解释在 PHP 手册的[Class Constants页面上。](http://php.net/manual/en/language.oop5.constants.php)从类内部，您可以使用, 从您用来访问它`self::constant`的类外部访问常量。`Classname::constant`

对于您的示例，您将使用：-

```
class A
{
    const HELLO = 'HELLO WORLD';

    public function __construct()
    {
        echo self::HELLO;
    }
}

$a = new A(); 
```

或者，从课外：-

```
echo A::HELLO; 
```

但是，我链接的手册页中的解释非常好而且非常清楚。

我应该指出，没有必要实例化类来访问其中包含的常量。以下将起作用： -

```
class A
{
    const HELLO = 'HELLO WORLD';
}

echo A::HELLO; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-28T16:27:47.057

在类本身中，您可以像访问 static: 一样访问常量`self::MY_CONSTANT`，在类之外，您可以使用`Class_Name::MY_CONSTANT`. 如有疑问，（例如，或抽象类中的示例），我喜欢使用：

```
$self = get_called_class($this);
$self::MY_CONSTANT;//gets the constant of currently called class 
```

记住这一点的简单方法：想想 PDO 查询：

```
$stmt->fetch(PDO::FETCH_ASSOC);//<-- uses class constant 
```

# c# - 如何在容器放大时放大标签

> ID：13110447
> 
> 赞同：1
> 
> 时间：2012-10-28T16:00:21.363
> 
> 标签：c#, .net, wpf, xaml, mvvm

我在 WPF 中有一个自定义 UserControl，它有一个停靠在顶部的堆栈面板来替换标题栏功能。

堆栈面板的左侧有一个标签，其中包含一个文本块，用于在标签包含长字符串的情况下进行文本换行。

拖动控件时出现我的问题。随着窗口的拖动，我自然希望标签的文本显示得越来越多。

我希望标签随着窗口的扩大而扩大，但我不知道如何解决这个问题。

这是我为实现屏幕截图中的标题栏而编写的代码：

```
<Grid>
        <DockPanel>
            <StackPanel Name="titleBar" DockPanel.Dock="Top" Height="28" FlowDirection="RightToLeft" Orientation="Horizontal" Background="AliceBlue">
                <Button x:Name="btnClose" Margin="0,0,5,0" Click="btnClose_Click">                  
                </Button>
                <Button x:Name="btnRunQuery" ToolTip="Run Query">                   
                </Button>
                <Button x:Name="btnFilter" ToolTip="Toggle Filter" Click="btnFilter_Click">                    
                </Button>
                <Button x:Name="btnAttributes">      
                </Button>
                <Button x:Name="btnAll" Click="btnAll_Click">ALL</Button>
                <Label Name="lblTableName" FontSize="14" MaxWidth="150">
                    <TextBlock Name="tbTableName" TextTrimming="WordEllipsis" TextWrapping="NoWrap" FlowDirection="LeftToRight"/>
                </Label>
            </StackPanel>
        </DockPanel>
    </Grid> 
```

**编辑：**我还想补充一点，当呈现用户控件时，我不希望标签的宽度超过 150。因此`MaxWidth="150"`属性。但是，我希望标签随着窗口的扩大而增长。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T16:31:04.610

使用 Grid 而不是 StackPanel。包含标签的最后一列应具有 Width="Auto"。您可以在此之前添加另一列（我的意思是标签列的右侧），使用 Width="*" 以便在窗口太宽时填充标签和按钮之间的空白区域。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T16:24:51.607

您需要将标签锚定到边缘。单击标签时，您应该会看到 4 个边的锚定符号。锚定后，4 个符号将为黑色。

# ruby-on-rails - 在 Rails 应用程序中跟踪事件时忽略机器人

> ID：13110448
> 
> 赞同：3
> 
> 时间：2012-10-28T16:00:30.350
> 
> 标签：ruby-on-rails, performance

我正在通过我的 Rails 应用程序中的 Mixpanel 跟踪事件。例如，我的控制器看起来像

```
class HomeController < ApplicationController
  def index
    track_event "Visitor: View Landing Page"
  end
end 
```

问题是该应用程序受到了许多机器人的攻击，最引人注目的是 Pingdom（我们使用的性能跟踪服务）。当机器人攻击我的应用程序时，是否有一种干净的方法可以忽略跟踪？

*注意：我对跟踪唯一身份访问者感兴趣，因此我为每个具有唯一 ID 的访问者分配了一个 cookie。机器人显然不存储 cookie。*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-28T16:18:42.513

执行此操作的传统方法是构建机器人用户代理的索引，并在 UA 匹配机器人时简单地忽略您的跟踪事件代码。

```
bots = /Googlebot|Pingdom|.../
unless request.env["HTTP_USER_AGENT"].match(bots)
  track_event(...)
end 
```

这是一个痛苦的维护，但它通常是有效的。这显然对任何谎报他们的 UA 的人都无效，但除了进行启发式检测以确定他们不是机器人之外，你无能为力，但在这种情况下，这可能不值得付出努力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-13T02:34:08.943

在 Rails 3 和 4 中，您可以使用 gem 来使用旧的 Rails 2 会话变量来轻松管理打开/关闭会话。对我来说效果很好：

[https://github.com/kares/session_off](https://github.com/kares/session_off)

# iphone - 如何在不消失的情况下将 modalViewController 覆盖在另一个视图之上？

> ID：13110449
> 
> 赞同：10
> 
> 时间：2012-10-28T16:00:51.957
> 
> 标签：iphone, objective-c, ios, uiviewcontroller

我想在我的应用程序上显示一个自定义的警报面板，但在后台可以看到之前的 UIViewController。我希望将其显示为模态视图控制器。我该如何做到这一点，而不会使之前的 UIViewController 变黑并消失？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-28T16:09:29.343

您需要将其添加为子视图控制器，而不是将新 vc 显示为模态 vc：

```
AlertPanelVC *alertVC = ...
[self addChildViewController: alertVC];
alertVC.view.frame = ...; //or something equivalent if you're using auto layout 
[self.view addSubview: alertVC.view];
[alertVC didMoveToParentViewController: self]; 
```

解雇它：

```
[alertVC willMoveToParentViewController:nil];
[alertVC.view removeFromSuperview];
[alertVC removeFromParentViewController]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T16:30:35.520

这是我用过的：

```
MyCustomAlertViewController *myCustomAlertViewController  = [[MyCustomAlertViewController alloc]initWithNibName:@"MyCustomAlertViewController" bundle:nil];
myCustomAlertViewController.delegate = self;  //optional if you have delegate setup
[myCustomAlertViewController setModalPresentationStyle:UIModalPresentationPageSheet];
[myCustomAlertViewController setModalTransitionStyle:UIModalTransitionStyleFlipHorizontal];
[self presentViewController:myCustomAlertViewController animated:YES completion:^{
    //do stuff after the view is displayed.

}];
myCustomAlertViewController.view.superview.autoresizingMask = UIViewAutoresizingFlexibleTopMargin | UIViewAutoresizingFlexibleBottomMargin;
myCustomAlertViewController.view.superview.frame = CGRectMake(calculatedCenterX, CalculatedCenterY, myCustomAlertViewControllerWidth, myCustomAlertViewControllerHeight);
//calculatedCenterX = (1024 - myCustomAlertViewControllerWidth) / 2;  //for example
//calculatedCenterY = (768 - myCustomAlertViewControllerHeight) / 2; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T16:58:39.723

有一个[很酷的模糊](http://www.cocoacontrols.com/platforms/ios/controls/rnblurmodalview)组件。当然，只是口味问题。:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-20T18:06:19.093

> 当使用 UIModalPresentationFullScreen 样式呈现视图控制器时，UIKit 通常会在过渡动画完成后移除底层视图控制器的视图。您可以通过指定 UIModalPresentationOverFullScreen 样式来阻止删除这些视图。当呈现的视图控制器具有允许底层内容显示的透明区域时，您可能会使用该样式。

[从这里](https://developer.apple.com/library/content/featuredarticles/ViewControllerPGforiPhoneOS/PresentingaViewController.html)

所以基本上实例化你的视图控制器，指定模态呈现样式，然后呈现视图控制器。

如果你想要一个（半）透明的背景，只需调整视图控制器主视图的颜色。

# objective-c - UICollectionView 必须使用非零布局参数初始化

> ID：13110454
> 
> 赞同：23
> 
> 时间：2012-10-28T16:01:23.780
> 
> 标签：objective-c, uicollectionview

我是新手`UICollectionView`，我正在关注我在网上找到的教程，但我遇到了一个我无法弄清楚的错误。这里有一点上下文。

在调试器中，我可以看到正在发生以下情况：

*   `numberOfSectionsInCollectionView`: 被调用，我返回 1
*   `collectionView:numberOfItemsInSection:`被调用，我返回模型的大小 (20)
*   `collectionView:layout:sizeForItemAtIndexPath:`为模型中的每个项目调用一次
*   `collectionView:layout:insetForSectionAtIndex:`叫做
*   `collectionView:cellForItemAtIndexPath:`被调用，它在这条线上崩溃......

    ```
    UICollectionViewCell *cell = [collectionView dequeueReusableCellWithReuseIdentifier:@"MyCell" forIndexPath:indexPath]; 
    ```

有这个错误...

```
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: 'UICollectionView must be initialized with a non-nil layout parameter' 
```

当我在该行暂停执行并检查控制台时，似乎有一个布局......

```
(lldb) po collectionView.collectionViewLayout
(UICollectionViewLayout *) $4 = 0x07180fd0 <UICollectionViewFlowLayout: 0x7180fd0> 
```

这`UICollectionView`是故事板中唯一一个场景的一部分。在 viewController.m 中没有`UICollectionView`以任何方式创建其他 s。

有没有人有任何想法？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-11-04T21:48:47.637

这对我有用：

```
UICollectionViewFlowLayout *aFlowLayout = [[UICollectionViewFlowLayout alloc] init];
    [aFlowLayout setItemSize:CGSizeMake(200, 140)];
    [aFlowLayout setScrollDirection:UICollectionViewScrollDirectionHorizontal];
myCollectionViewController = [[MyCollectionViewController alloc]initWithCollectionViewLayout:flowLayout]; 
```

如果您以编程方式创建 UICollectionView，则需要布局。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-11-05T05:15:19.657

事实证明，问题出在`registerClass:`. 我有这个：

```
[self.collectionView registerClass:[UICollectionView class] 
        forCellWithReuseIdentifier:@"MyCell"]; 
```

但应该是这样的：

```
[self.collectionView registerClass:[UICollectionViewCell class] 
        forCellWithReuseIdentifier:@"MyCell"]; 
```

所以 dequeue 方法是创建 a`UICollectionView`而不是 a `UICollectionViewCell`。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-04-22T15:27:36.947

如果您在 UICollectionViewController 中以编程方式制作集合视图控制器，请确保**UICollectionViewController init**方法使用 [super initWithCollectionViewLayout] 而不是 [super init]，例如：

```
-(id) initWithImages:(NSArray *)pImages {
    UICollectionViewFlowLayout *layout = [[UICollectionViewFlowLayout alloc] init];
    [layout setMinimumInteritemSpacing:0.0f];
    [layout setMinimumLineSpacing:0.0f];
    layout.scrollDirection = UICollectionViewScrollDirectionVertical;
    if (self = [super initWithCollectionViewLayout:layout]) {
        _images= [[NSArray alloc] initWithArray:pImages];
    }
    return self;
} 
```

来自：[UICollectionViewController 类参考：Overview](https://developer.apple.com/library/ios/documentation/uikit/reference/UICollectionViewController_clas/Reference/Reference.html)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-01-05T07:34:02.327

我遇到了同样的问题，我的问题通过使用解决了

```
UICollectionViewFlowLayout *myLayout = [[UICollectionViewFlowLayout alloc]init];
[myLayout setScrollDirection:UICollectionViewScrollDirectionVertical];
[myLayout setMinimumInteritemSpacing:0.0f];
[myLayout setMinimumLineSpacing:0.0f];
UICollectionView *myCollectionView = [[UICollectionView alloc]initWithFrame:viewfame collectionViewLayout:myLayout]; 
```

代替

```
UICollectionView *myCollectionView = [[UICollectionView alloc]initWithFrame:self.view.frame];
[myLayout setScrollDirection:UICollectionViewScrollDirectionVertical];
[myLayout setMinimumInteritemSpacing:0.0f];
[myLayout setMinimumLineSpacing:0.0f];
[myCollectionView setCollectionViewLayout:myLayout]; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-01-30T06:21:09.803

如果您的类是从 UICollectionViewController 继承的，或者您正在以编程方式创建 UICollectionView，那么在推送类时您可以设置 collectionViewLayout，如下所示

```
let homeViewController = HomeViewContoller(collectionViewLayout:UICollectionViewLayout()) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-02-20T18:23:52.657

在视图初始化之前，我在返回一个 itemSize 等于 self.view.bounds 的 UICollectionViewLayout 对象时遇到了这个问题。

# ruby-on-rails - JSF中Flash的作用域和session作用域一样吗？

> ID：13110457
> 
> 赞同：1
> 
> 时间：2012-10-28T16:01:40.897
> 
> 标签：ruby-on-rails, jsf-2

来自[JSF 中 Flash 类的 javadocs](http://javaserverfaces.java.net/nonav/docs/2.0/javadocs/javax/faces/context/Flash.html)：

> Flash 概念取自 Ruby on Rails，它提供了一种在面孔生命周期生成的用户视图之间传递临时对象的方法。就像在 Rails 中一样，任何放在 flash 中的东西都会暴露给同一个用户会话遇到的下一个视图，然后被清除。需要注意的是，“下一个视图”可能与前一个视图具有相同的视图 ID。

上一段不是将范围等同`Flash`于`session`范围吗？如果没有，那我错过了什么？

PS：由于这个概念是从 Ruby On Rails 借来的，所以我在这里添加了这个标签。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T16:28:11.100

> 将暴露给同一用户会话遇到的下一个视图，**然后清除。**

强调的部分是不同之处：如果您将某些内容放入会话范围，除非您将其删除（或会话结束），否则它将保留在那里。如果您将某些内容放入 Flash 范围内，则在呈现下一个视图（或会话结束）后，它将自动删除。

# delphi - Delphi 项目比较 2 个列表框

> ID：13110479
> 
> 赞同：1
> 
> 时间：2012-10-28T16:04:13.770
> 
> 标签：delphi, delphi-5

我想知道如何比较列表框之间的项目。在我的主窗体上有两个列表框。我想通过单击事件将项目从第一个添加到第二个，但是当使用它时，相同的项目将在第二个列表框上成倍增加。任何想法来解决*“文件已经存在”*？

```
procedure TForm1.Button1Click(Sender: TObject);
var
  i: integer;
begin
  for i := ListBox1.Items.Count - 1 downto 0 do
    if ListBox1.Selected[i] then                       
      ListBox2.Items.Add(ListBox1.Items.Strings[i]);
end; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-28T20:04:20.893

如果你有一个单选列表框1：

```
if Listbox2.Items.IndexOf(Listbox1.Items[Listbox1.ItemIndex]) = -1 then
begin
  // Doesn't exist yet. Safe to add
end; 
```

对于多选（您的代码似乎暗示）：

```
for i := 0 to ListBox1.Items.Count - 1 do
  if (ListBox1.Selected[i] and (ListBox2.Items.IndexOf(ListBox1.Items[i]) = -1) then                       
    ListBox2.Items.Add(ListBox1.Items[i]); 
```

我认为后者也适用于单选。

# dart - Dart 中链接的 href 属性：“#”还是“javascript: void(0);”？

> ID：13110481
> 
> 赞同：2
> 
> 时间：2012-10-28T16:04:18.910
> 
> 标签：dart

关于是否使用或在属性中存在[类似的流行问题。](https://stackoverflow.com/questions/134845/href-attribute-for-javascript-links-or-javascriptvoid0)`#``javascript:void(0)``href`

在 Dart 社区中执行此操作的首选方式是什么？如果我使用哈希，浏览器会滚动到顶部，但`javascript:void(0)`它看起来很丑，不仅因为它是，而且因为我们正在使用 Dart 而不是 JavaScript。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-28T16:21:34.223

网络上有一个可怕的神话，我们应该使用`#`或`javascript:void(0)`. 请*不*要这样做。唯一允许使用`#`的情况是当您想要滚动到页面的不同部分时。

如果您不希望链接具有将您带到某个地方的默认行为，请不要使用链接或将整个`href`-attribute 带走：

**测试.html**

```
<!DOCTYPE html>
<html>
  <body>
    <a id="foo">Do something</a>

    <script type="application/dart" src="test.dart"></script>
    <script src="https://dart.googlecode.com/svn/branches/bleeding_edge/dart/client/dart.js"></script>
  </body>
</html> 
```

接下来我们必须覆盖一些默认样式以确保我们获得手形光标和下划线，因为当您没有`href`-attribute 时浏览器倾向于删除它们：

**样式.css**

```
a {
    cursor: pointer;
    text-decoration: underline;
}

a:hover {
    text-decoration: none;
} 
```

最后是我们的 Dart 代码，它可以做任何你想做的事情：

**测试.dart**

```
import 'dart:html';

void main() {
  AnchorElement a = query('#foo');
  a.on.click.add((e) {
    print('Clicked! Do something.');
  });
} 
```

# azure - WADDiagnosticInfrastructureLogsTable 失败 ERROR_WINHTTP_AUTODETECTION_FAILED (12180)

> ID：13110482
> 
> 赞同：2
> 
> 时间：2012-10-28T16:04:25.103
> 
> 标签：azure, azure-diagnostics

我的 Azure **WADDiagnosticInfrastructureLogsTable**严重超载，出现以下错误：

```
WinHttpGetProxyForUrl(http://DDDDDDDDD.blob.core.windows.net) failed ERROR_WINHTTP_AUTODETECTION_FAILED (12180) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T20:45:43.740

[我过去在我的博客](http://blogs.msdn.com/b/avkashchauhan/archive/2011/01/20/winhttpgetproxyforurl-failed-error-winhttp-autodetection-failed-12180-error-message-in-windows-azure-infrastructure-log.aspx)中讨论过完全相同的行为。我刚刚检查并发现即使现在仍然是这种情况。

# python - 如何将 python 2.6.5 更新到 2.7

> ID：13110483
> 
> 赞同：1
> 
> 时间：2012-10-28T16:04:35.640
> 
> 标签：python, ubuntu, python-2.7, updates

我在用python写程序，需要用到`Counter`函数，python 2.6.5不支持。所以我一直在尝试找到一种方法将我的 python 解释器更新到下一个版本，但我没有找到任何适用于 ubuntu 10.04 的东西。谁能告诉我如何将 python 2.6.5 更新到 python 2.7？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T16:10:09.040

[这里](https://askubuntu.com/a/101595/66962)给出的过程对我来说很好，并从[http://www.python.org/download/](http://www.python.org/download/)下载 tarball 。

# facebook - 查看在 Facebook 应用程序上共享的消息？

> ID：13110484
> 
> 赞同：0
> 
> 时间：2012-10-28T16:04:40.460
> 
> 标签：facebook, facebook-graph-api

我想看看人们从我的应用程序中分享了什么。使用 Facebook Insights，我可以看到

[http://cl.ly/image/473J1z2M2L0F](http://cl.ly/image/473J1z2M2L0F)

有什么方法可以查看实际分享的内容吗？IE。该人发布了什么，发布的是谁？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T16:12:23.373

我认为没有办法，因为阅读用户生成的内容是一种隐私问题。看这里：

[https://developers.facebook.com/docs/reference/dialogs/feed/](https://developers.facebook.com/docs/reference/dialogs/feed/)

发布后您唯一得到的是帖子 ID（请参阅“返回数据”），您可以通过图形 api 调用获取内容，但它不会成功，因为您需要访问用户提要。因此，用户必须登录，您必须自己跟踪共享...

# c# - 自定义字体 Monodevelop

> ID：13110487
> 
> 赞同：3
> 
> 时间：2012-10-28T16:05:00.457
> 
> 标签：c#, fonts, gtk, cross-platform, monodevelop

我将如何在 monodevelop 的 gtk2.12 应用程序中使用自定义 ttf？我目前将项目中的字体作为嵌入式资源获得，我不确定如何在不将其安装在主机系统上的情况下将其转换为 Pango.FontDescription。

我也在尝试使用跨平台兼容性进行编码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T12:43:39.887

好问题。我认为不可能像你描述的那样。但是当您第一次运行该程序时，您可以在本地安装它。在 Unix 系统上，您可以将字体安装到`~/.fonts`其中，Pango 可以使用它们，我希望 Pango 在 Windows 上寻找类似的东西。

# c# - Azure 2012 年 10 月 SDK 破坏了 UseDevelopmentStorage=true

> ID：13110488
> 
> 赞同：15
> 
> 时间：2012-10-28T16:05:03.187
> 
> 标签：c#, azure

有没有人尝试过使用 usedevelopmentstorage=true 连接字符串的 2012 年 10 月 Azure sdk？

```
CloudStorageAccount.Parse("UseDevelopmentStorage=true") 
```

抛出“字典中不存在给定键”异常。

```
CloudStorageAccount.DevelopmentStorageAccount 
```

工作正常。

这是 azure sdk 中的错误吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-28T18:43:33.810

这是存储 SDK 的 v2.0.0.0 中的一个错误（如果您正在使用开发存储，它要求您在连接字符串中使用 DevelopmentStorageProxyUri）。这些是解决方法：

*   不要使用模拟器
*   运行提琴手并通过`DevelopmentStorageProxyUri`设置：`CloudStorageAccount.Parse("UseDevelopmentStorage=true;DevelopmentStorageProxyUri=http://ipv4.fiddler");`
*   直接引用存储帐户：`CloudStorageAccount.DevelopmentStorageAccount;`

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-11-19T18:21:52.410

此问题已在可通过[GitHub](https://github.com/WindowsAzure/azure-sdk-for-net)和[NuGet](https://nuget.org/packages/WindowsAzure.Storage/2.0.1.0)获得的最新版本（版本 2.0.1）中得到解决。

对此造成的任何不便，我们深表歉意。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-10-31T15:44:51.500

采用：

```
UseDevelopmentStorage=true;DevelopmentStorageProxyUri=http://127.0.0.1 
```

这是以下的简写：

```
BlobEndpoint=http://127.0.0.1:10000/devstoreaccount1;QueueEndpoint=http://127.0.0.1:10001/devstoreaccount1;TableEndpoint=http://127.0.0.1:10002/devstoreaccount1;AccountName=devstoreaccount1;AccountKey=Eby8vdM02xNOcqFlqUwJPLlmEtlCDXJ1OUzFT50uSRZ6IFsuFq2UVErCz4I6tq/K1SZFPTOtr/KBHBeksoGMGw== 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-12-31T12:02:17.897

对于那些遇到最新 SKD + Nuget 软件包问题的人。如果您使用的是 v3 版本的 nugget 包 (WindowsAzure.Storage)，您将收到 400 错误请求异常。此版本与模拟器不兼容。[http://social.technet.microsoft.com/Forums/windowsazure/en-US/0fb01e56-8a52-4e98-a8bf-dd517d86d879/windows-azure-storage-developmentstorageaccount-cloudtablecreateifnotexists-always-get-400-http?forum= windowsazure开发](http://social.technet.microsoft.com/Forums/windowsazure/en-US/0fb01e56-8a52-4e98-a8bf-dd517d86d879/windows-azure-storage-developmentstorageaccount-cloudtablecreateifnotexists-always-get-400-http?forum=windowsazuredevelopment)。

降级到最新的 v2.1 版本：[https](https://www.nuget.org/packages/WindowsAzure.Storage) ://www.nuget.org/packages/WindowsAzure.Storage ，一切顺利。打开包管理器控制台并执行以下操作：

```
uninstall-package WindowsAzure.Storage    
install-package WindowsAzure.Storage -version 2.1.0.4 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-26T14:48:15.553

@斯蒂沃曼，

这确实有效，谢谢！（并且无需解雇提琴手）

但似乎仍然能够破坏一些代码，因为端点是 `http://127.0.0.1:10000/devstoreaccount1` ，而从真实字符串的正常解析将得到 `https://something.blob.core.windows.net/` 注意最后一个斜杠。如果一个 URI 组合了多个部分，则需要小心。

# asp.net - 如何创建水平中继器？以及如何使按钮被视为图标？

> ID：13110495
> 
> 赞同：1
> 
> 时间：2012-10-28T16:06:03.737
> 
> 标签：asp.net, repeater

我正在使用一个显示某个表的数据的中继器控件。转发器中的每一行包含两列：一个图标（红色/黄色/绿色圆圈）和一个说明。

我必须目标，第一个目标是创建相同的中继器，现在我需要它是水平的。第二个目标是我需要每个图标（红色/绿色/黄色圆圈）成为一个按钮，这样当我按下其中一个图标时，就会发生一个事件（不管怎样，说 Response.Write("Green is按下");

你能帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T16:15:22.017

要使其水平，您可以将`li`列表用作`inline`css 技巧。完整的代码：

```
<head runat="server">
    <style type="text/css">
    #navlist li
    {
        display: inline;
        list-style-type: none;
        padding-right: 20px;
    }   
    </style>
</head>
<body>
    <form id="form1" runat="server">
    <div id="navcontainer">
    <ul id="navlist">
    <asp:Repeater ID="Repeater1" runat="server">
        <ItemTemplate>
            <li>Some text and my id: <%# GetID(Container.DataItem) %></li>
        </ItemTemplate>
    </asp:Repeater>
    </ul>
    </div>
    </form>
</body>
</html> 
```

和后面的代码：

```
public partial class Dokimes_StackOverFlow_HorizontialRepeater : System.Web.UI.Page
{
    List<int> oMainIds = new List<int>();

    protected void Page_Load(object sender, EventArgs e)
    {
        for (int i = 0; i < 10; i++)
        {
            oMainIds.Add(i);
        }

        Repeater1.DataSource = oMainIds;
        Repeater1.DataBind();
    }

    public int GetID(object oItem)
    {
        return (int)oItem;
    }
} 
```

你有一个像这样的渲染：

> 一些文本和我的 ID：0 一些文本和我的 ID：1 一些文本和我的 ID：2 一些文本和我的 ID：3 一些文本和我的 ID：4 一些文本和我的 ID：5 一些文本和我的 ID：6 一些文本和我的 ID：7 一些文本和我的 ID：8 一些文本和我的 ID：9

# c# - Visual Studio 不会运行测试类中的所有单元测试

> ID：13110496
> 
> 赞同：8
> 
> 时间：2012-10-28T16:06:18.067
> 
> 标签：c#, visual-studio-2010, unit-testing, testing

我的单元测试类中有 3 个测试方法，但 Visual Studio 只运行第二个测试，忽略其他测试

以下是 3 种测试方法：

```
[TestClass()]
public class InsertionSortTest
{

    [TestMethod()]
    public void sortTest()
    {
        InsertionSort target = new InsertionSort(); // TODO: Initialize to an appropriate value
        int[] n = new int[] { 2, 1, 4 };
        int[] nExpected = new int[] { 1, 2, 4 };
        target.sort(ref n);
        CollectionAssert.AreEqual(nExpected, n);

    }

    [TestMethod()]
    public void sortTest2()
    {
        InsertionSort target = new InsertionSort(); // TODO: Initialize to an appropriate value
        int[] n = new int[] { 1, 2 };
        int[] nExpected = new int[] { 1, 2 };
        target.sort(ref n);
        CollectionAssert.AreEqual(nExpected, n);

    }

    [TestMethod()]
    public void sortTest3()
    {
        InsertionSort target = new InsertionSort(); // TODO: Initialize to an appropriate value
        int[] n = new int[] { 1, 2 };
        int[] nExpected = new int[] { 1, 2 };
        target.sort(ref n);
        CollectionAssert.AreEqual(nExpected, n);

    }
} 
```

那么当我运行测试时只执行 sortTest2 吗？我期待这有 3 个结果。我得到结果 1/1 通过。测试名称：sortTest2。

我做的另外两个测试发生了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-28T16:25:04.190

gillyb，是的，你在我认为正确的地方。重新启动 Visual Studio 解决了该问题。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-08-20T11:41:08.853

我注意到测试运行完成后测试显示为“未运行”。原来这些测试从未完成，因为 StackOverflowException 在中途被抛出。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-05-24T14:17:43.400

不止一次让我感到困扰的是，没有检查测试项目是否在解决方案配置中构建。

# java - Java 无法完成 zip 文件的下载

> ID：13110497
> 
> 赞同：0
> 
> 时间：2012-10-28T16:06:22.760
> 
> 标签：java, download

我正在用 Java 制作一个从网络服务器下载文件的应用程序。该文件是一个 816kb 的 zip 文件。我已经在 3 台不同的计算机上测试了该应用程序，但它不适用于一台计算机。对于那个它只下载 13kb 的文件然后停止。当我检查 htaccess 日志时，我看到：

a: "GET /cache.zip HTTP/1.1" 200 816938 "-" "Mozilla/4.0 (Windows 7 6.1) Java/1.7.0_07"

b: "GET /cache.zip HTTP/1.1" 200 134320 "-" "Mozilla/4.0 (Windows 7 6.1) Java/1.7.0_09"

（PC a 工作，PC b 不工作）

我已经尝试了很多不同的方法来用 java 下载文件，但是对于所有方法，它在 13kb 之后停止下载。我也试过用 512m 内存运行 te 应用程序，但这不是问题。

这就是我现在所拥有的：

```
DataInputStream in = new DataInputStream(conn.getInputStream());
DataOutputStream out = new DataOutputStream(new FileOutputStream(new File(Config.CACHE_DIR+File.separator+"cache.zip")));
byte[] data = new byte[1024];

while((count = in.read(data,0,1024)) >= 0){
    out.write(data, 0, count);
} 
```

但是这个while循环不会停止，所以它会卡在`in.read`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T16:16:41.610

我通常使用 Apache Commons IO [IOUtils.copy()](http://commons.apache.org/io/api-release/org/apache/commons/io/IOUtils.html#copy%28java.io.InputStream,%20java.io.OutputStream%29)在流之间进行复制。它使用缓冲区将字节从一个流复制到另一个流。

顺便说一句，在您的情况下，无需使用**Data** InputStream 和 DataOutputStream 包装器。您可以直接使用 InputStream 和 FileOutputStream。

使用 IOUtils，代码将变为：

```
InputStream in = conn.getInputStream();
File outputFile = new File(Config.CACHE_DIR + File.separator + "cache.zip");
OutputStream out = new FileOutputStream(outputFile);
try {
    IOUtils.copy(in, out);
} finally {
    output.close();
} 
```

如果你不想使用 IOUtils...

```
int count;
byte[] data = new byte[1024];
while ((count = in.read(data)) > 0) {
     out.write(data, 0, count);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T16:48:47.617

运行一个简单的独立测试，以确保问题出在 PC 而不是您的软件：

```
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.net.URL;

public class Scratch {

public static void main(String[] args) throws IOException {
    URL url = new URL("http://url.to.zip");

    InputStream in = url.openStream();
    FileOutputStream out = new FileOutputStream("test.zip");
    byte[] buffer = new byte[1024];
    int read = 0;
    while ((read = in.read(buffer)) >= 0) {
        out.write(buffer, 0, read);
    }
}

} 
```

# hibernate - 休眠限制条件或使用 DetachedCritera

> ID：13110498
> 
> 赞同：0
> 
> 时间：2012-10-28T16:06:27.997
> 
> 标签：hibernate, criteria, restrictions, detachedcriteria

我正在尝试创建一个具有 OR 限制的分离标准

```
 DetachedCriteria subquery = DetachedCriteria.forClass(Component.class);
    subquery.createCriteria("review").add(Restrictions.eq("owner", user));
    subquery.createCriteria("review").createCriteria("observers").
                                   add(Restrictions.eq("id", user.getId())); 
```

所以基本上我需要将 Restriction.or 放在上面代码的第二行和第三行，但是 Restriction.or 不包括 DetachedCritera。所以我需要做这样的事情

```
 Restrictions.or(
        subquery.createCriteria("review").add(Restrictions.eq("owner", user)),
        subquery.createCriteria("review").createCriteria("observers").
                                   add(Restrictions.eq("id", user.getId())); 
```

但是，这不会编译。那么我该如何实现呢？有什么建议么？

提前致谢。干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T16:28:13.327

```
DetachedCriteria subquery = DetachedCriteria.forClass(Component.class, "component");
subquery.createAlias("component.review", "review");
subquery.createAlias("review.observers", "observer", Criteria.LEFT_JOIN);
subquery.add(Restrictions.or(Restrictions.eq("review.owner", user),
                             Restrictions.eq("observer.id", user.getId()))); 
```

# javascript - 创建 javascript 函数的替代方法

> ID：13110504
> 
> 赞同：0
> 
> 时间：2012-10-28T16:06:38.633
> 
> 标签：javascript

我遇到了以下脚本，但不明白第一行。它显然要么返回 JSON.stringify 要么返回匿名函数。这样做最好还是使用传统的`function printObj(obj)`？另外，JSON 是在哪里定义的？谢谢

```
var printObj = typeof JSON != "undefined" ? JSON.stringify : function(obj) {
  var arr = [];
  $.each(obj, function(key, val) {
    var next = key + ": ";
    next += $.isPlainObject(val) ? printObj(val) : val;
    arr.push( next );
  });
  return "{ " +  arr.join(", ") + " }";
};

$("#log").append( printObj(object1) ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T16:16:03.050

```
var printObj = // setting the variable printObj
               typeof JSON != 'undefined' // if this is true then set printObj to
                    ? JSON.stringify // <- ...this function
               : function( obj ) {
                   // otherwise let's build it ourselves...
               }; 
```

`typeof JSON != 'undefined'``JSON`无论标识符是否已定义，都将返回 true 或 false 。如果尚未定义，`typeof x`则不会导致引用错误。`x`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T16:09:09.633

JSON 已经是一个存在于 javascript 中的函数。（它有`stringify`并且`parse`你最有可能使用）

第一行，只是确保存在用于 stringify 的函数，如果不存在，则将对象传递给尝试解析 JSON 对象并将其作为 JSON 字符串返回的函数函数。

（我*相信*您正在使用的“hack”功能是为了解决[IE8 兼容性问题](http://msdn.microsoft.com/en-us/library/cc288325%28v=VS.85%29.aspx)，其中 IE8 没有 JSON 对象。如果您在页面中设置，则可以完全避免使用它：

`<meta http-equiv="X-UA-Compatible" content="IE=8" />`

此外，第一行赋值的结构使用了一种叫做[三元运算符赋值](https://stackoverflow.com/questions/5080242/javascript-ternary-operator-and-assignment)的东西。

例如：

```
var t = 1 == 1 ? 1 : 0; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-28T16:09:20.180

JSON 是一些 Web 浏览器（如 FireFox 和 Chrome）自动定义的变量。旧版本的 IE 没有定义 JSON，很多烦人的用户还有这些版本，所以在这种情况下是手动定义的。

我认为最好的解决方案是添加对 json 库的引用。可以在这里找到：http: [//www.json.org/js.html](http://www.json.org/js.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-28T16:09:31.927

它定义了一个`printObj`始终可以使用的函数：

*   如果定义了 JSON.stringify，printObj 就是这个函数
*   如果 JSON.stringify 不可用，则使用新函数

注意

*   这只有在你想支持 IE7 时才有意义，因为[现代浏览器都有 JSON.stringify](http://caniuse.com/json)
*   `{...}`如果 obj 是一个数组（它构建一个字符串），则替换函数无法正常工作

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-28T16:10:53.517

> *“我遇到了以下脚本，但不理解第一行。它显然返回 JSON.stringify 或匿名函数。* ”

看来您*确实*了解第一行。

> *“这样最好还是用传统的`function printObj(obj)`？* ”

简单地定义函数将产生不同的结果，因为本机`JSON.stringify`将被忽略，并且应该优先于 shim。

问题中给出的替代方案不是一个完整的垫片，即使是这样，本地人肯定会表现得更好。

> *“另外，JSON 是在哪里定义的？”*

默认情况下，它在 ECMAScript 5 环境中定义。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-28T16:13:29.443

使用这种语法，您可以在创建函数的同时检查是否存在合适的内置方法。JSON 是一些现代浏览器内置到引擎中的对象，很像 Window 或 Location。较旧的浏览器没有 JSON，因此会返回 undefined，并允许使用自定义匿名函数。

# java - JDO 基础知识：列表或数组不会使用 GWT RPC 检索或返回

> ID：13110506
> 
> 赞同：-2
> 
> 时间：2012-10-28T16:06:47.247
> 
> 标签：java, google-app-engine, jdo, gwt-rpc

到目前为止，我一直在使用 Objectify，但现在我必须使用 JDO 处理一些代码。我在使用 Objectify 很容易的基本东西上遇到问题，特别是：如果一个对象有一个 List 或一个数组作为成员，我不能让它持久化。

我有一个包含 FileInfo 列表的类 FileInfoBatch（代码缩进在这里丢失，不知道为什么）：

```
@PersistenceCapable
public class FileInfoBatch implements Serializable{

private static final long serialVersionUID = 1L;        
@PrimaryKey
@Persistent(valueStrategy = IdGeneratorStrategy.IDENTITY)
private Key key;

@Persistent
private List<FileInfo> fileInfoList;    

@Persistent    
private String savedByUserEmail;

public FileInfoBatch(){         
    fileInfoList=new ArrayList<FileInfo>();     
} 
```

然后我向我的 RPC impl 类发送一个仅包含 1 个 FileInfo 的 FileInfoBatch（称为 fib）到我的 RPC impl 类并保存它，然后立即查询它以进行测试（在调试器中）

```
 PersistenceManager pm = PMF.get().getPersistenceManager();
    pm.makePersistent(fib);
    Query query = pm.newQuery(FileInfoBatch.class, "savedByUserEmail == '"+ userEmail + "'");
    List<FileInfoBatch> savedList = (List<FileInfoBatch>) query.execute();
    FileInfoBatch persisted=savedList.get(0); 
```

持久化的 FileInfoBatch 返回一个空的 FileInfo 列表。如果我使用单个 Fileinfo 成员，这仍然存在。

我发现此站点上没有报告此类基本问题，并且我查看了文档： [https ://developers.google.com/appengine/docs/java/datastore/jdo/dataclasses](https://developers.google.com/appengine/docs/java/datastore/jdo/dataclasses)

如此简单的存储任务是否需要巨大的复杂性？如果是这样，我将回到使用 Objectify。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T16:24:44.103

定义“不持久”？您是否查看过[日志](http://www.datanucleus.org/products/accessplatform_3_1/logging.html)（它告诉您实体的 PUT 中包含的内容）或[数据库查看器](https://stackoverflow.com/questions/5335721/google-app-engine-database-viewer-browser)中的持久化内容？“FileInfo”是否标记为 PersistenceCapable？

它很可能是持久的，但是您没有注意定义获取的内容（在 JDO 中，您可以完全控制检索到的对象中的内容）。建议您阅读[http://www.datanucleus.org/products/accessplatform_3_1/jdo/object_lifecycle.html](http://www.datanucleus.org/products/accessplatform_3_1/jdo/object_lifecycle.html) 和[http://www.datanucleus.org/products/accessplatform_3_1/jdo/fetchgroup.html](http://www.datanucleus.org/products/accessplatform_3_1/jdo/fetchgroup.html)

您使用的是最新版本的“datanucleus-appengine”吗？（即**v2.0 或更高版本**）；旧版本不值得努力。

PS，你不需要 @Persistent 字段类型，如字符串，键 - 让事情看起来更干净。

FWIW：JDO 提供了与现有选项一样简单的持久性选择，与其他选项一样透明，并且由规范定义的语义比其他选项更详细。

# android - 如何同时使用天气 API 和位置管理器？

> ID：13110516
> 
> 赞同：0
> 
> 时间：2012-10-28T16:08:08.407
> 
> 标签：android, gps, locationmanager

我有这样的代码。这是在创建

```
 public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main); 
            mgr=(LocationManager)getSystemService(Context.LOCATION_SERVICE);
    LocationListener ll=new mylocatoinlis();
    mgr.requestLocationUpdates(LocationManager.GPS_PROVIDER,3600l,0,ll);
          } 
```

这是位置监听器类

```
protected class mylocatoinlis implements LocationListener {

        public void onLocationChanged(Location location) {
            // TODO Auto-generated method stub
            if(location!=null)
            {
                double plong=location.getLongitude();
                double plate=location.getLatitude();
                //Log.i("MyLocation",Double.toString(plate)+" "+Double.toString(plong));

                ingformation(plate,plong);

            }

        }

        public void onProviderDisabled(String provider) {
            // TODO Auto-generated method stub

        }

        public void onProviderEnabled(String provider) {
            // TODO Auto-generated method stub

        }

        public void onStatusChanged(String provider, int status, Bundle extras) {
            // TODO Auto-generated method stub

        }

    } 
```

这是 json 包装函数

```
public void ingformation(double plate, double plong) {
    // TODO Auto-generated method stub
     try
        {   
            client=new DefaultHttpClient();
             StringBuilder url1=new StringBuilder(URL);
             url1.append(plate+","+plong+".json");           
             HttpGet get=new HttpGet(url1.toString());
             HttpResponse r=client.execute(get);
             int status=r.getStatusLine().getStatusCode();
             if(status==200){
                 HttpEntity e=r.getEntity();
                String data=EntityUtils.toString(e);

                 obj= new JSONObject(data);

                 main=obj.getJSONObject("current_observation");
                 maintemp=main.getJSONObject("display_location");
                 tv1.setText(" "+maintemp.getString("city"));
                 tv3.setText(" "+main.getString("weather"));
                 tv2.setText(" "+main.getString("temp_c")+" C");
                 String imageName=main.getString("icon_url");
                 //String imageName1.append("nt_"+imageName);
                 //im.setImageURI(Uri.parse(url1.toString()+imageName));
                 if(imageName!="")
                 {
                     wv.setVisibility(View.VISIBLE);
                     wv.loadUrl(imageName);
                 }
                 else
                 {
                     wv.setVisibility(View.INVISIBLE);
                 }
                 //wv.loadUrl(imageName);

             }
        }catch(Exception e)
        {
            Log.e("JSON Parser", "Unable to connect" + e.toString());
        }

} 
```

如果我通过 DDMS 传递位置，它会给出**NetworkOnMainThread**异常之类的错误。请帮助我，我卡住了黑白位置和 json。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T16:12:16.450

您需要`HTTPGet`在单独的线程中进行网络操作 ()。使用[异步任务](http://developer.android.com/reference/android/os/AsyncTask.html)效果最好。

**编辑：**

例如，添加这个内部类：

```
class MyTask extends AsyncTask<Double, Void, Void>
{

    MyCallback callback;

    public MyTask(Callback callback)
    {
        this.callback = callback;
    }

    @Override
    public Void doInBackground(Double... coordinates)
    {
        double plong = coordinates[0];
        double plat = coordinates[1];
        //...Complete task

        return null;
    }

    @Override
    public void onPostExecute()
    {
        callback.go();
    }

}

public interface Callback
{
    //override to handle actions after task completes
    public void go();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T16:13:36.353

您需要从蜂窝中使用 AsyncTask 您不能在主线程（进程）中使用网络进程，搜索异步任务

# java - JTable 数据仅在滚动后显示

> ID：13110517
> 
> 赞同：0
> 
> 时间：2012-10-28T16:08:10.700
> 
> 标签：java, swing, jtable, defaulttablemodel

我写了一个方法，它创建了我的 DefaultTableModel，我将在那里添加我的记录。当我将模型设置为我的 JTable 时，数据行是空白的。滚动后数据显示正确。

我怎样才能避免这种情况并从一开始就显示数据？

**编辑**：我导入了 javax.swing.table.DefaultTableModel --> 这是正确的吗？

```
private DefaultTableModel _dtm;

private void loadTable(Vector<Member> members) {
    loadTableModel();

    try {
        lbl_state.setText("Please wait");

        for (Member actMember : members) {
            String gender = "";
            if (actMember.getGender() == MemberView.MEMBER_MALE) {
                gender = "männlich";
            } else {
                gender = "weiblich";
            }

            _dtm.addRow(new Object[]{
                        actMember.getNname(),
                        actMember.getVname(),
                        actMember.getCity(),
                        actMember.getStreet(),
                        actMember.getPlz(),
                        actMember.getMail(),
                        actMember.getPhonenumber(),
                        actMember.getBirthdayString(),
                        actMember.getStartDateString(),
                        gender,
                        actMember.getBankname(),
                        actMember.getAccountnumber(),
                        actMember.getBanknumber(),
                        actMember.getGroup().toString(),
                        (actMember.hasAccess() ? "JA" : "NEIN"),
                        actMember.getWriteDateString(),
                        (actMember.hasDrinkAbo() ? "JA" : "NEIN")
                    });
        }
    } catch (Exception ex) {
        System.err.println(ex.getMessage());
    }

    tbl_results.setModel(_dtm);
}

private void loadTableModel() {
    _dtm = new DefaultTableModel(new Object[]{"Nachname",
                "Vorname",
                "Ort",
                "Straße",
                "PLZ",
                "E-Mail",
                "Telefon",
                "Geburtsdatum",
                "Beitrittsdatum",
                "Geschlecht",
                "Bankname",
                "Kontonummer",
                "Bankleitzahl",
                "Gruppe",
                "hat Zugriff",
                "Einschreibdatum",
                "Getränkeabo"}, 0);

    tbl_results.setAutoResizeMode(JTable.AUTO_RESIZE_ALL_COLUMNS);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T16:19:57.040

简短的回答是它应该可以工作。不应要求您执行任何额外操作。

代码的方式是，我看不出有任何理由让它不起作用。我刚刚用我自己的示例进行了尝试，并且效果很好。

但是，请确保以下几点：

*   被正确`JTable`添加到`JScrollPane`
*   `JScrollPane`正确添加到面板
*   您正在将模型设置在右侧`JTable`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T19:39:33.553

**表不可见**

我检查了代码中的每一行，结果显示我将表格设置为不可见。只有当我添加数据并将其设置为可见时。所以我看不到我的数据并选择行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T16:14:51.740

您可以使用简单的代码“作弊”并模拟滚动，也可以在填充表格后重新绘制框架。也许看看这个：[JTable How to refresh table model after insert delete or update the data。](https://stackoverflow.com/questions/3179136/jtable-how-to-refresh-table-model-after-insert-delete-or-update-the-data)

# javascript - 是否可以将 Visual Basic.NET 转换为 JavaScript 或在 Mac 上运行的语言

> ID：13110521
> 
> 赞同：-3
> 
> 时间：2012-10-28T16:08:23.957
> 
> 标签：javascript, vb.net

我正在尝试将 Visual Basic.NET 转换为 JavaScript。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T16:16:51.940

是的，这是可能的。开发环境将比语言有更多的差异，因此需要的不仅仅是直接翻译。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T17:48:24.880

使用[Mono](http://www.mono-project.com/Main_Page)，VB.NET 可以在 mac 上运行。

至于将其转换为 Javascript——对于一些理论上可能的事情，尽管我不知道有什么工具可以真正做到这一点。更有可能的是，您指的是 Java，而且您的运气会更好一些。您可能必须先通过 C# ..

# c++ - C ++ 11：std ref全局变量和非函数局部thread_local初始化顺序？

> ID：13110522
> 
> 赞同：4
> 
> 时间：2012-10-28T16:08:28.870
> 
> 标签：c++, c++11, language-lawyer

C++11 中具有非平凡构造函数的全局变量是在静态初始化阶段进入 main 之前构造的。

同样，非函数局部 thread_local 变量是在每个线程的“thread_local 初始化阶段”期间构造的。

C++11 标准是否规定了这些变量的构造顺序？在这两种情况下，如果有两个变量：

```
// global scope

A::A() { b.f(); }  // A constructor uses global b

A a;
B b; 
```

C++11 标准是否指定了它们的初始化顺序，或者如果使用未初始化的变量应该产生错误？

同样对于非函数本地线程_本地：

```
// global scope

A::A() { b.f(); }  // A constructor uses global b

thread_local A a;
thread_local B b; 
```

标准是否指定了它们必须构造的顺序，是否定义了如果在初始化之前从另一个的构造函数中使用变量会发生什么？

您能否提供一个**C++11 标准参考**来支持您提出的任何要求以获得答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T17:35:35.630

对于静态存储持续时间，我同意 Alan 的回答。如果初始化在同一个翻译单元中，它们的动态初始化是那些对象定义的顺序。`b`如果编译器可以弄清楚如何（根据 3.6.2/3），则允许编译器将其初始化为静态初始化。所以第一个程序可能会或可能不会调用未定义的行为，这可能是一个坏主意。

对于动态存储期限，注释 3.7.2/2：

> 具有线程存储持续时间的变量应在其第一次使用 odr (3.2) 之前进行初始化，如果已构建，则应在线程退出时销毁。

因此，线程局部变量的行为更像是函数局部静态变量，而不是命名空间范围的静态变量。第二个程序没有未定义的行为。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-28T16:24:21.893

您声明“在静态初始化阶段，在进入 main 之前构造了具有非平凡构造函数的 C++11 中的全局变量。” 似乎并不完全正确——它们可能直到动态初始化阶段才被初始化

对于具有“有序初始化”的变量，您的第一个 a 和 b 是，然后标准说

> 在单个翻译单元中定义的具有有序初始化的变量应按照它们在翻译单元中的定义顺序进行初始化。

3.6.2/2 涵盖了所有这些。

编辑：据我所知，您的第二个 a 和 b 没有有序初始化，可以按任一顺序初始化。但我可能会遗漏一些东西。

# objective-c - 初学者对在 obj-c 中从另一个实例访问一个实例感到困惑

> ID：13110523
> 
> 赞同：0
> 
> 时间：2012-10-28T16:08:32.227
> 
> 标签：objective-c, ios, sparrow-framework

我是 Objective-c/ios 的新手，我对如何从另一个实例访问 var/instance 感到有点困惑。我也在使用麻雀框架的作品，这可能会使事情更加混乱，但无论如何。

情况是我有一个名为 Game 的类的实例。在游戏内部，我有一个名为 scrollContainer 的变量，它本身就是一个指向类类型 SPSprite 的实例的指针。

我可以在 Game 中使用 scrollContainer 显然没有问题，但现在我需要从另一个实例（称为 Market）访问 scrollContainer，这就是我不确定的地方。

我在 Game.m 中声明（我的术语可能全错）scrollContainer，所以我认为我需要做的实际上是在 Game.h 中声明（定义？）它，使用 @property，然后是 @synthasize，然后如果我在 Market.m 中包含 Game.h 然后我将能够从 Market.m 内部访问 scrollContainer var，但这不起作用，因为它在 Market.m 中给了我一个错误（未声明的标识符）

所以我的下一个想法是这些是我的选择......

首次调用时将 scrollContainer 指针传递给 Market.m init 函数并存储它？

我也有一个单例，所以也许我在我的单例中存储了 scrollContainer，或者指向 Game.m 的指针，他们尝试从 Market.m 访问 scrollContainer？

哪个是最好/最简单的方法？

感谢您的任何建议！

**更新**

这是请求的代码片段。

```
@interface Game : SPSprite
{
  @private 
    float mGameWidth;
    float mGameHeight;
}

- (id)initWithWidth:(float)width height:(float)height;

@property (nonatomic, assign) float gameWidth;
@property (nonatomic, assign) float gameHeight;
@property SPSprite *scrollContainer;

@end 
```

还有一点来自 Market.m

```
- (void)onCloseMarketButton:(SPEvent *)event
{
    NSLog(@"Close Market Clicked!!");

    [self removeAllMarketButtons];

    [closeMarketButton removeFromParent];

    scrollContainer.visible = YES;//gives error

    [self removeFromParent];

} 
```

我只是想，我是否必须在 Market.m 中 @synthesize scrollContainer 才能在 Market.m 中使用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T20:08:53.540

**In your code, you wrote:**

```
scrollContainer.visible = YES;//gives error 
```

How is `scrollContainer` initialized or assigned?

**You mentioned:**

> Pass the scrollContainer pointer to the Market.m init function when it's first called and store it?

Yes, this is a feasible approach.

```
//Some where in Game.m
Market *market = [[Market alloc]initWithScrollContainer:self.scrollContainer];

//Then in Market.m
-(id)initWithScrollContainer:(SPSprite*)scrollContainer{
    //Do your initialization
} 
```

# python - 我在使用 matplotlib 时收到此错误

> ID：13110529
> 
> 赞同：3
> 
> 时间：2012-10-28T16:09:05.013
> 
> 标签：python, macos, numpy, matplotlib, scipy

我在 python 命令提示符下输入这个错误：import matplotlib.pyplot as plt

```
Traceback (most recent call last):
  File "<pyshell#1>", line 1, in <module>
    import matplotlib.pyplot as plt
  File "/Library/Python/2.7/site-packages/matplotlib-1.3.x-py2.7-macosx-10.8-intel.egg/matplotlib/pyplot.py", line 97, in <module>
    _backend_mod, new_figure_manager, draw_if_interactive, _show = pylab_setup()
  File "/Library/Python/2.7/site-packages/matplotlib-1.3.x-py2.7-macosx-10.8-intel.egg/matplotlib/backends/__init__.py", line 25, in pylab_setup
    globals(),locals(),[backend_name])
  File "/Library/Python/2.7/site-packages/matplotlib-1.3.x-py2.7-macosx-10.8-intel.egg/matplotlib/backends/backend_macosx.py", line 21, in <module>
    from matplotlib.backends import _macosx
ImportError: dlopen(/Library/Python/2.7/site-packages/matplotlib-1.3.x-py2.7-macosx-10.8-intel.egg/matplotlib/backends/_macosx.so, 2): Library not loaded: /System/Library/Frameworks/CoreText.framework/Versions/A/CoreText
  Referenced from: /Library/Python/2.7/site-packages/matplotlib-1.3.x-py2.7-macosx-10.8-intel.egg/matplotlib/backends/_macosx.so
  Reason: image not found 
```

有人可以建议我，我该如何解决这个问题？我已经用这个 shell 脚本安装了所有的包

[https://github.com/fonnesbeck/ScipySuperpack](https://github.com/fonnesbeck/ScipySuperpack)

有什么我想念的吗？有什么额外的配置吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T02:54:50.290

我支持 OSX 10.7.4 的 andershqst：

转到此目录：

```
cd /System/Library/Frameworks 
```

验证此路径是否存在：

```
ls /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/CoreText.framework/Versions/A/CoreText 
```

创建此软链接：

```
sudo ln -s /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/CoreText.framework Coretext.framework 
```

[然后按照本教程中的说明](http://jakevdp.github.com/mpl_tutorial/tutorial_pages/tut1.html)测试您的修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T16:13:11.547

我在使用 ScipySuperpack 时遇到了同样的问题，并通过以下方式解决了它。

打开终端并找到 CoreText.framework 文件的路径

```
sudo find / -name "CoreText.framework" 
```

从定位路径的 CoreText 文件到 ImportError 中的路径创建一个符号链接

```
sudo ln -s path_located path_where_it_is_missing 
```

此时我遇到了另一个构建错误，因为我运行的是 OSX 10.7.5（10.8 是您当前从 ScipySuperpack 页面获得的那个）在这种情况下，从[这里](https://github.com/fonnesbeck/ScipySuperpack/tags)获取 ScipySuperpack并在提示“你在安装吗”时回答“是”从克隆到这台机器的存储库（如果不确定，请回答否）？（是/否）'

# mysql - MYSQL 查询涉及“不存在”

> ID：13110539
> 
> 赞同：1
> 
> 时间：2012-10-28T16:10:35.967
> 
> 标签：mysql, sql, not-exists

下周我有一个关于数据库的大学实习。我需要围绕一所大学的计划创建 15 个查询，如下所示：

*   学生（学生编号、名字、姓氏、性别、出生日期、地址、级别、学位代码）
*   学位（Degree_Code，Degree_Name，School_Name）
*   模块（Module_Code、Module_Title、School_Name）
*   学校（School_Name，教师，校长）
*   Take_Exam(Student_No, Module_Code, Mark)

我已经完成了 14 个查询，但我被困在这个查询上：

*   检索参加每个模块的学生的姓名。（提示。使用不存在）。

我一直在阅读不存在的查询，但我什至不知道从哪里开始！我创建了这段代码：

```
select students.student_no, fname, lname, count(module_code)
from students left join take_exam using (student_no)
group by student_no
having count(module_code) < 19
order by lname; 
```

这将返回所有未参加所有 19 个模块的学生。但是，我讨厌代码，因为它涉及 < 19，这意味着如果以后模块的数量发生了变化，则该值将需要更改，这是低效的。

谁能指出我正确的方向并给我一些关于使用“不存在”查询的指导？

谢谢，安德鲁

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T16:24:54.920

使用`not exists`：

```
select *
from Student s1 
where not exists 
         (select 1 
          from Module 
          where Module_Code not in
                      (select Module_Code 
                       from Take_Exam 
                       where Student_No = s1.Student_No) 
```

解释 ：

`s`对于表中的每个学生`Student`，我们将添加`s`到结果中，如果：不存在表中的任何模块，`Module`因此该模块未映射到`s`表中的学生`Take_Exam`。

它并不直观，但它与：“所有参加每个模块的学生”完全一样

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T16:15:47.493

在没有完全回答你的作业的情况下，这里有一个提示可能会有所帮助：

试着从另一个角度看它。回答了所有模块问题的学生不会有任何与模块表左连接的空字段，对吗？

此外，您可能不需要左外连接`table_exam`... 因为您只需要参加考试的学生。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T16:16:47.677

我认为，您可以获取`distinct count of modules from module table`然后使用它进行比较，例如：

```
 select students.student_no, fname, lname, count(t.module_code)
     from module m, students join take_exam t using (student_no)
     group by student_no
     having count(t.module_code) = count(distinct(m.module_code)) 
     order by lname; 
```

请注意：我将条件更改为`=`并加入，`inner join`因为**您希望学生学习所有模块。**

编辑：使用 notExit：

```
 select students.student_no, fname, lname 
     from students 
     WHERE  NOT EXISTS (select *
                from module m, students join take_exam t using (student_no)
                group by student_no
                having count(t.module_code) < count(distinct(m.module_code)) 
                group by student_no
             )
     order by lname; 
```

# dart - 如何在 Dart 中获取时间戳？

> ID：13110542
> 
> 赞同：137
> 
> 时间：2012-10-28T16:11:05.593
> 
> 标签：dart, epoch

我一直在学习 Dart，但我不知道如何生成时间戳。我试过这个：

```
void main() {
  print((new Date()).millisecondsSinceEpoch);
} 
```

感谢 IDE，我能够做到这一点，但我遇到了一个令人困惑的错误：

```
Exception: No such method: 'Date' 
```

帮助？

* * *

## 回答 #1

> 赞同：276
> 
> 时间：2012-10-28T16:26:36.587

你几乎是对的。您只是没有使用[命名构造函数](http://www.dartlang.org/docs/dart-up-and-running/ch02.html#ch02-constructors-named)：

```
void main() {
  print(DateTime.now().millisecondsSinceEpoch);
} 
```

给出：

> 1351441456747

有关更多信息，请参阅 API 文档：[https ://api.dart.dev/stable/2.10.1/dart-core/DateTime-class.html](https://api.dart.dev/stable/2.10.1/dart-core/DateTime-class.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2021-02-27T08:56:15.143

这是我的解决方案

```
DateTime _now = DateTime.now();
print('timestamp: ${_now.hour}:${_now.minute}:${_now.second}.${_now.millisecond}'); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-06-06T15:31:17.153

**微秒**也可以从 Dart*本地*获得：（无需导入包）。

```
void main() {
  print(new DateTime.now().microsecondsSinceEpoch);
} 
```

输出：

> 1591457696860000

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-21T15:15:29.700

`void main() { print(DateTime.now().millisecondsSinceEpoch); }`

# sql - 替换动态文本 SQL

> ID：13110543
> 
> 赞同：3
> 
> 时间：2012-10-28T16:11:16.340
> 
> 标签：sql, design-patterns, dynamic, replace

谁能帮我解决一个我无法解决的小问题。我正在尝试更新 php_text 中的 bbcode 标记

```
Exemple [i] => [i:rlj7bc53]
Exemple [u] => [u:rlj7bc53]
Exemple [b] => [/b:rlj7bc53] 
```

并且

```
[quote="Christo"] => [quote=&quot;Christo&quot;:rlj7bc53] 
```

目前我已经使用了这个请求。

```
update phpbb_posts
   set post_text = replace(post_text, '[/quote]' , '[/quote:rlj7bc53]') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T10:15:01.423

在运行更新之前对其进行测试：

```
SELECT post_text as [OldTag]
      ,'[' + SUBSTRING(post_text, 2, (LEN(post_text) - 2)) + ':rlj7bc53]' AS [NewTag]
FROM phpbb_posts 
```

实际更新：

```
UPDATE phpbb_posts
SET post_text = '[' + SUBSTRING(post_text, 2, (LEN(post_text) - 2)) + ':rlj7bc53]' 
```

请注意，他将通过添加 :rlj7bc53 来更新该列上 [ 和 ] 之间的所有文本。如果您只想替换列上的特定标签，您可以执行以下操作：

```
 UPDATE phpbb_posts
  SET post_text = '[' + SUBSTRING(post_text, 2, (LEN(post_text) - 2)) + ':rlj7bc53]'
  WHERE post_text = [i]
     OR post_text = [u]
     OR post_text = [/quote] 
```

# java - 使用 Java 从串口读取（Arduino Duemilanove）

> ID：13110546
> 
> 赞同：1
> 
> 时间：2012-10-28T16:11:35.700
> 
> 标签：java, usb, arduino

任务：在 PC 上的程序中显示数据。

扩展任务：（解决此问题后）我最终会将数据保存到文件并将程序扩展为 GUI。

微控制器：Arduino Duemilanove

操作系统：Windows 7

语言：Java

编译器：Eclipse

Io 方法：USB type 'B'（arduino 端），USB type A（PC 端）

我在这里和其他网站上阅读了至少 30 个不同的教程/问题。我从网站上获取了示例并下载了一些库，并且不断收到红线和错误。我现在已经放弃了这一切，并决定谦虚地来这里看看是否有人愿意帮助我。

我怀疑我在我的头上，但没关系，我很高兴学习，并被称为愚蠢！

我了解其他软件（例如“处理”）已经可以为我执行此操作。我想自己做这个软件。

我看过 RXTX 和 COMM API。老实说，到目前为止，我从中得到的只是我知道它的存在，有些东西显然已经过时了，而且似乎大多数教程都假设了大量不同学科的知识。

在我写这个问题时，我还查看了这里提出的更多问题，其中大部分我以前已经看过。我挥舞着白旗！有人帮我了解我在做什么！

我想做的代码示例。

```
// How would I make this class read from the arduino?

class arduinoData {

    static int t = (int) 72.91; //pull from arduino instead of making it up

    static int temperature(){

        return t;
    }

}

public class example
{
    public static void main(String[] args) 
    {
        System.out.println("temp from the sensor is: "+   arduinoData.temperature()+"F");
    //output:
    //temp from the sensor is: 71F
    }
} 
```

编辑：Arduino 串行监视器工作正常。我将添加 arduino 代码来清除它。

```
#include <OneWire.h>
#include <DallasTemperature.h>

#define ONE_WIRE_BUS 3
OneWire oneWire(ONE_WIRE_BUS);
DallasTemperature sensors(&oneWire);

DeviceAddress Thermometer = { 0x28, 0x56, 0xA0, 0xA5, 0x03, 0x00, 0x00, 0x7D };

void setup(void)
{
  Serial.begin(9600);
  sensors.begin();
  sensors.setResolution(Thermometer, 10);

  pinMode(13, OUTPUT);  

}

    void printTemperature(DeviceAddress deviceAddress)
    {
      float tempC = sensors.getTempC(deviceAddress);
      if (tempC == -127.00) { Serial.print("Error."); }
      else {Serial.print(DallasTemperature::toFahrenheit(tempC));Serial.print("F");}
    }

void loop(void)
{ 
   digitalWrite(13, HIGH);
   delay(1000);
   digitalWrite(13,  LOW);
   sensors.requestTemperatures();
   Serial.print("temp from sensor: ");printTemperature(Thermometer);
   Serial.print("\n\r");
} 
```

Arduino输出：

传感器温度：70.25F

传感器温度：70.70F

传感器温度：70.70F

传感器温度：70.70F

更新：

好的，我**想**我已经通过下面提到的教程正确安装了 rxtx。但是，我在这一点上迷路了：

> 对于 Windows，您可以在与上述示例代码相同的目录中创建一个名为 run.bat 的批处理文件。此批处理文件可以在您的系统上使用，但您可能需要修改路径以匹配系统上 Java 和 Arduino IDE 的安装位置。
> 
> setlocal set PATH=%PATH%;C:\Program Files (x86)\arduino-0017\ "C:\Program Files (x86)\Java\jdk1.6.0_12\bin\javac" -cp "C:\Program Files (x86)\arduino-0017\lib\RXTXcomm.jar" SerialTest.java "C:\Program Files (x86)\Java\jdk1.6.0_12\bin\java" -cp "C:\Program Files (x86)\ arduino-0017\lib\RXTXcomm.jar;。” 串行测试
> 
> 基本上，您需要将 RXTXcomm.jar 添加到您的类路径中，并且您需要将关联的 JNI 接口 DLL (rxtxSerial.dll) 添加到您的 PATH 中。对于其他平台，您需要将相同的 JNI 共享库添加到您的运行时路径。
> 
> 当您运行 run.bat 文件时，您应该会看到与 Arduino IDE 串行监视器相同的结果。您可以使用 Ctrl+Break 停止程序。

我该怎么办？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T16:46:09.330

检查您的固件是否真的将 Arduino 打印到 USB，即虚拟化为串行端口：加载固件并通过“串行监视器”（右侧的镜头按钮）测试串行通信。

完成后，您就知道您的问题与尝试从 COM 接口读取的 java 代码有关。如果您在这里仍有问题，您的问题已转移到“使用 Java 从串行端口读取”。

有关将 Arduino 与 Java 连接的一般参考资料，我建议您阅读本教程以及解释和代码示例：[http ://www.arduino.cc/playground/Interfacing/Java](http://www.arduino.cc/playground/Interfacing/Java)

# asp.net-mvc - ASP.NET MVC 路由 - 看起来都匹配正确的路由模板，但不起作用

> ID：13110552
> 
> 赞同：5
> 
> 时间：2012-10-28T16:12:30.180
> 
> 标签：asp.net-mvc, asp.net-mvc-routing

我有一个具有“一般”路线结构的站点和一个附加的“翻译”区域。所以在顶层，你有类似的东西：

*   /
*   /关于（“通用”）
*   /翻译（区域）

在翻译区域内，我有：

*   /Translate/Word（WordController，索引操作）
*   /Translate/Word/Add（WordController，添加操作）
*   /Translate/Word/Improve（WordController，改进操作）

所有这些工作。

但是，只要我在现有结构中添加另一个控制器，例如。定义 ...

*   /翻译/定义（定义控制器，索引操作）
*   /翻译/定义/添加（定义控制器，添加操作）

或发音...

*   /翻译/发音（PronunciationController，索引操作）
*   /翻译/发音/添加（PronunciationController，添加操作）

我得到的只是一个404。

我所在地区的路由配置如下：

```
public override void RegisterArea(AreaRegistrationContext context)
    {
        context.MapRoute(
            "Translate_direct",
            "Translate/{controller}/{action}",
            new { action = "Index", controller = "Default", }
        );
        context.MapRoute(
            "Translate_default",
            "Translate/{toLanguageCode}/{query}/{fromLanguageCode}/{controller}/{section}/{action}/{id}",
            new { action = "Index", controller="Default", id = UrlParameter.Optional, section=UrlParameter.Optional }
        );
    } 
```

我已经安装了[Phil Haack 的 RouteDebugger](http://haacked.com/archive/2008/03/13/url-routing-debugger.aspx)并得到了以下结果：

![截屏](../Images/360e9466aa520e3daa8e7187cf7a9105.png)

所以它似乎与控制器和动作匹配，但我只得到一个 404。

为了完整性和保证，还显示了我的“MVC”文件结构：

![在此处输入图像描述](../Images/2a736dbedf93bd3a5eda0017e5da096e.png)

我显然遗漏了一些明显的东西，但不确定是什么......？

* * *

更新：

似乎我的名称空间以某种方式涉及。

我的 TranslateAreaRegistration 类有命名空间*Taggloo.Web.Client.Areas.Translate*但我的 PronunciationController 有一个命名空间 *Taggloo.Web.**Mvc.**Client.Areas.Translate.Controllers*

似乎我的命名空间中的一个错误导致两者不同（TranslateAreRegistration 类也应该在*Taggloo.Web.Mvc.Client.Areas.Translate*命名空间中）是问题所在。我试着把它们都*做成 Taggloo.Web.Mvc....*但这没有用。我不情愿地将两者都设置为*Taggloo.Web.Client...*而现在它可以工作了。

所以不是一个解决方案，一个解决方法，尽管环顾四周，我仍然不知道为什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T03:13:50.347

如果您使用 AreaRegistrationContext.MapRoute 重载之一，则 MVC ( System.Web.Mcv.AreaRegistration.RegisterAllAreas ) 中的默认区域注册使用区域的 AreaRegistration 派生类的命名空间将命名空间数据标记添加到路由定义中。

如果定义了此命名空间令牌，则 DefaultControllerFactory 然后在匹配路由时交叉检查控制器的命名空间。

如果控制器的命名空间相同（或者如果命名空间令牌以 .* 结尾，则以 .* 开头）令牌，则工厂将匹配控制器类型并继续实例化控制器。如果不匹配并且 ControllerFactory 从 GetControllerType 方法返回 null，最终您将得到 404。

您提到您将两者都设置为 Taggloo.Web.Mvc.... 如果它们相同，它应该可以工作。

# python - 将数据分组到满足特定条件的指定区间

> ID：13110554
> 
> 赞同：0
> 
> 时间：2012-10-28T16:13:24.563
> 
> 标签：python, group-by, itertools

我想将此列表中的这些项目分类到新列表中...

```
truc = [['12', 'brett', 5548],
       ['22.3', 'troy', 9514],
       ['8.1', 'hings', 12635],
       ['34.2', 'dab', 17666],
       ['4q3', 'sigma', 18065],
       ['4q3', 'delta', 18068]] 
```

...使用最后一个字段将它们分组到大小为 3500 的箱中因此，理想的结果是：

```
firstSort = [['34.2', 'dab', 17666],
            ['4q3', 'sigma', 18065],
            ['4q3', 'delta', 18068]]

secondSort = [['22.3', 'troy', 9514],
             ['8.1', 'hings', 12635]]

lastSort = ['12', 'brett', 5548] 
```

我尝试使用该`itertools.groupby()`功能，但我无法找到指定 bin 大小的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T16:22:56.417

没有 itertools 这很简单

```
truc = [['12', 'brett', 5548],
       ['22.3', 'troy', 9514],
       ['8.1', 'hings', 12635],
       ['34.2', 'dab', 17666],
       ['4q3', 'sigma', 18065],
       ['4q3', 'delta', 18068]]

truc.sort(key=lambda a:a[-1])
groups = [[]]
last_row = None
for row in truc:
    if last_row is not None and row[-1] - last_row[-1] > 3500:
        groups.append([])
    last_row = row
    groups[-1].append(row)

import pprint
pprint.pprint(groups) 
```

输出：

```
[[['12', 'brett', 5548]],
 [['22.3', 'troy', 9514], ['8.1', 'hings', 12635]],
 [['34.2', 'dab', 17666], ['4q3', 'sigma', 18065], ['4q3', 'delta', 18068]]] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T16:34:09.107

一个基本的 binner `groupby`：

```
from itertools import groupby
from math import floor

# data must be sorted

data = [ ['12', 'brett', 5548],
       ['22.3', 'troy', 9514],
       ['8.1', 'hings', 12635],
       ['34.2', 'dab', 17666],
       ['4q3', 'sigma', 18065],
       ['4q3', 'delta', 18068] ]

groups = []
for k, g in groupby(data, lambda x: floor(x[-1]/3500)):
    groups.append(list(g))

print groups 
```

回报：

```
[
    [
        ['12', 'brett', 5548]
    ],
    [
        ['22.3', 'troy', 9514]
    ],
    [
        ['8.1', 'hings', 12635]
    ],
    [
        ['34.2', 'dab', 17666],
        ['4q3', 'sigma', 18065],
        ['4q3', 'delta', 18068]
    ]
] 
```

然后，当一组的最大值减去之前组的最小值小于 3500 时，您可以合并这些组。然后您会得到，

```
[
    [
        ['12', 'brett', 5548]
    ],
    [
        ['22.3', 'troy', 9514],
        ['8.1', 'hings', 12635]
    ],
    [
        ['34.2', 'dab', 17666],
        ['4q3', 'sigma', 18065],
        ['4q3', 'delta', 18068]
    ]
] 
```

即使在 之后合并`groupby`，我认为 Anurag Uniyal 的解决方案在平均情况下仍然可以实现更好的分组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T17:24:19.393

使用`defaultdict()`：

```
lis=[['12', 'brett', 5548],
      ['22.3', 'troy', 9514],
      ['8.1', 'hings', 12635],
      ['34.2', 'dab', 17666],
      ['4q3', 'sigma', 18065],
      ['4q3', 'delta', 18068]]

from collections import defaultdict
d=defaultdict(list)
for i,x in enumerate(lis):
    not_append=True
    for y in d:
        for z in d[y]:
            if abs(z[-1]-x[-1])<=3500:
                d[y].append(x)
                not_append=False
                break
    else:
        if not_append:
            d[i].append(x)
print d.values() 
```

**输出：**

```
[[['12', 'brett', 5548]],
 [['22.3', 'troy', 9514], ['8.1', 'hings', 12635]], 
 [['34.2', 'dab', 17666], ['4q3', 'sigma', 18065], ['4q3', 'delta', 18068]]
] 
```

# pchart - pChart - 添加数据点的 PHP 库

> ID：13110561
> 
> 赞同：0
> 
> 时间：2012-10-28T16:14:30.707
> 
> 标签：pchart

我正在尝试使用 pChart PHP 库来生成图表。我对它的文档感到困惑。

要将数据添加到图表中，文档使用如下代码：

```
 $MyData = new pData();  
 $data = array(1,2,3,4,99);//some data
 $MyData->addPoints($data,"My Label"); 
```

数据在图表上绘制得很好。

我不明白的是如何在 XY 轴上绘制奇异数。数据不应该是 (x,y) 格式吗？

如何在 XY 图上绘制单个数字？

非常感谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T05:23:02.630

pChart 对多个数据集使用系列。有些图表允许您将一个数据集与另一个数据集进行对比，而对于其他图表，您可以叠加来自不同系列的数据。

但是，有些图表对于多个数据集没有意义，或者最好不要这样做。默认情况下，折线图基于 y 轴上的值是“不变的”而 x 轴上的值是可变的假设。如果没有给出 y 的详细信息，它只是使用数组中 x 的值的位置。

散点图将允许您绘制一个系列与另一个系列。如果从 csv 导入，您可以轻松地将列分配给不同的系列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-19T10:54:34.023

**单系列柱形图或条形图**

这些图表为正值和负值预先格式化。在负值的情况下，X 轴位置会自行调整。它们适用于比较数据类别中的值，例如单个产品的月销售额。为此，您可以提供月份或第一个月、第二个月等的名称（将是 Y 轴）。

如果您有上述示例的场景并且您没有为 Y 轴程序提供数据点，则将 X 轴点的相应位置作为 Y 轴点。在这种情况下，X 轴点数组的键。

正如[Pepin the Small](https://stackoverflow.com/users/1890750/pepin-the-small)解释的那样，一些图表只为一个系列得分仍然是有意义的。在下面找到一个示例。

[![在此处输入图像描述](../Images/8497e0306909dec0f96a5504bbdaea5b.png)](https://i.stack.imgur.com/ejx5r.jpg)

# php - 升级我的 php5.4 后从空值创建默认对象

> ID：13110566
> 
> 赞同：0
> 
> 时间：2012-10-28T16:15:19.537
> 
> 标签：php

我有一个与 php 5.4 版有关的问题。我正在使用 php5.4。在 5.2 之前。

现在升级后出现问题。现在我的网站有很多警告

> 从空值创建默认对象

我试图通过检查其他帖子来解决这个问题，但没有成功。

警告在这一行

```
$searchresult[$pluginname][$i]->title = $value->title; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T16:27:27.137

是的，使用旧版本的 PHP，您可以这样做：

```
$a = null;
$a->somevar = 3;` 
```

因为 $a 自动变成了 stdClass 类型。

使用 PHP 5.4 你不能这样做：你必须手动实例化 $a。

```
$a = new stdClass(); 
$a->somevar = 3;` 
```

或者更好的是，如果可以的话，使用数组：

```
$a = array('somevar' => 3); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T05:30:52.657

这是解决此问题的愚蠢方法，但您可以通过设置`error_reporting`为`E_ALL & ~E_NOTICE & ~E_STRICT`.

如果您要以任何方式做错事而不是按照上面@theredled 的建议重写代码，这将特别有用。

# python - 如何获取不同操作系统中的字体目录路径？

> ID：13110570
> 
> 赞同：3
> 
> 时间：2012-10-28T16:15:27.120
> 
> 标签：python, fonts, cross-platform

我正在开发一个生成验证码的模块。该模块需要一个字体文件，但不同操作系统下字体目录路径不同。是否有一种通用的方法来获取可在不同操作系统中使用的字体目录路径？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T16:36:21.017

我不认为有任何这样的库，最多 wxPython 有一个[wxStandarPaths](http://docs.wxwidgets.org/2.8/wx_wxstandardpaths.html)可以提供操作系统特定的路径，也许你可以使用它来获取字体文件夹。

但我认为即使这样你也必须对每个操作系统进行调整，所以最简单的方法是创建你自己的函数`get_font_folder`，并在你测试或发现错误时继续将操作系统添加到字体文件夹映射:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T20:47:37.707

用[pycairo 来做](http://cairographics.org/pycairo_pango/)。您甚至不需要知道系统字体路径。你只是做

```
font_map = pangocairo.cairo_font_map_get_default()
families = font_map.list_families() 
```

你有一个所有字体系列的列表。

您还可以按名称获取字体，例如

```
font = pango.FontDescription("Utopia 22") 
```

如果您在 Unix 生态系统中，那么这是要走的路。

# ruby-on-rails - Rails 属性让人头疼

> ID：13110573
> 
> 赞同：1
> 
> 时间：2012-10-28T16:16:02.113
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

新手rails问题来了。

我有这样的课：

```
class Thing < ActiveRecord::Base
    attr_accessible :name
    attr_accessor :name
    validates_uniqueness_of :name, :case_sensitive => false
end 
```

我已经完成了迁移，表格看起来还不错。然后我启动`rails console`并尝试以下操作：

```
t = Thing.new(:name => "test")
=> #<Thing id: nil, name: nil, description: nil, created_at: nil, updated_at: nil> 
```

已经在这里它说名字是零，为什么？继续，我试试这个：

```
t.name
 => "test" 
```

现在 name 似乎已经设置好了？如果我尝试保存：

```
t.save!
Thing Exists (8.0ms)  SELECT 1 AS one FROM "things" WHERE LOWER("things"."name") = LOWER('test') LIMIT 1
SQL (16.0ms)  INSERT INTO "things" ("created_at", "description", "name", "updated_at") VALUES ('2012-10-28 16:10:12.701000', NULL, NULL, '2012-10-28 16:10:12.701000')
=> true 
```

为什么我指定的名称没有保存？我想要的是能够在调用 new 时将属性指定为哈希，然后保存实例。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-28T16:19:10.960

您应该删除`attr_accessor :name`，这为创建 getter 和 setter `name`，但它们已经由 ActiveRecord 创建

# jquery - 垂直导航子菜单应与 div 容器重叠

> ID：13110578
> 
> 赞同：1
> 
> 时间：2012-10-28T16:16:12.597
> 
> 标签：jquery, html, css

我有这个侧面板垂直导航，当悬停在菜单上时会显示子菜单。我的问题是子菜单和子菜单的子菜单由于 div 容器而没有显示。

由于 div 容器 [side-panel-links] 的宽度为 240 像素，因此将其截断。如果您扩展 div 容器的宽度，您将看到正在显示的子菜单。

我怎么可能让子菜单与 div 容器重叠以显示这些子菜单？

这是演示：http: [//jsfiddle.net/xkBZE/1/](http://jsfiddle.net/xkBZE/1/)

这是一段 HTML 代码：

```
 <div class="side-panel-links left">
    <div class="side-panel-links-scroll">
        <div id="myslidemenu" class="jqueryslidemenu">
            <ul id="side-panel-list">
                <li>
                    <a href="#">Test 1</a>
                    <ul class="side-panel-list-child"></ul>
                </li>
                <li>
                    <a href="#">Test 2</a>
                    <ul class="side-panel-list-child">
                        <li>Test 2-1
                            <ul class="side-panel-list-child">
                                <li>Test 2-1-1
                                    <ul class="side-panel-list-child">
                                        <li>Test 2-1-1-1
                                            <ul class="side-panel-list-child"></ul>
                                        </li>
                                    </ul>
                                </li>
                                <li>Test 2-1-2
                                    <ul class="side-panel-list-child"></ul>
                                </li>
                            </ul>
                        </li>
                        <li>Test 2-2
                            <ul class="side-panel-list-child">
                                <li>Test 2-2-1
                                    <ul class="side-panel-list-child"></ul>
                                </li>
                            </ul>
                        </li>
                        <li>Test 2-3
                            <ul class="side-panel-list-child">
                                <li>Test 2-3-1
                                    <ul class="side-panel-list-child">
                                        <li>Test 2-3-1-1
                                            <ul class="side-panel-list-child"></ul>
                                        </li>
                                    </ul>
                                </li>
                            </ul>
                        </li>
                    </ul>
                </li>
                <li>
                    <a href="#">Test 3</a>
                    <ul class="side-panel-list-child"></ul>
                </li>
                <li>
                    <a href="#">Test 4</a>
                    <ul class="side-panel-list-child"></ul>
                </li>
            </ul>
        </div>
    </div>
</div>​ 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T23:53:28.627

首先，您不应该对所有内容使用相同的 id，这就是类的用途。为了显示框外的内容，我将`position: absolute;z-index:100;`在该元素上使用，在这种情况下，`<ul>`嵌套在`<li>`.

希望这可以帮助

我只是无法围绕你的CSS，所以我把它改成这样：

-->**更新了 CSS**

```
.side-panel-links{
width: 240px;
background-color: #272727;
padding-top: 25px;
font: normal 11px Verdana, Arial, Helvetica, sans-serif ;
}
.jqueryslidemenu ul li ul{
left: 0;
display: block;
visibility: hidden;
}
#side-panel-list{
list-style-type: none;
margin: 0;
padding: 0;
}
#side-panel-list li {
border-top: 1px solid #353535;
border-bottom: 1px solid #191919;
padding: 10px 0 10px 20px;
margin: 0;
}
#side-panel-list li ul{
position: absolute;
left: 300px;
display: list-item;
}
#side-panel-list li a {
color: #EEE;
margin: 0 50px 0 0;
width: 161px;
display: list-item;
color: white;
padding: 8px 8px;
border-right: 1px solid #CCCCCC;
text-decoration: none;
}
#side-panel-list li ul li{
padding: 5px;
display: block;
background-color: red;
}
#side-panel-list li a:link,
#side-panel-list li a:visited {
color: white;
}
#side-panel-list li a:hover{
background: black;
color: #426BA4;
}​​​​​​​​​​​​​​​ 
```

尽管这可行，但它仍然需要更多样式才能获得与以前相同的外观。希望这可以帮助。

# reference - 无法在 VS2012 中构建可移植类库

> ID：13110583
> 
> 赞同：0
> 
> 时间：2012-10-28T16:16:44.497
> 
> 标签：reference, visual-studio-2012, portable-class-library

我有一个项目，它曾经在 VS2010 中构建，现在不会在 VS2012 中构建。它的结构如下：

```
-Lime49 (Portable Class Library)
-Myproject.Shared (Portable Class Library)
--Myproject.Core (.NET4, references the above two libraries) 
```

第一个可以自己构建，但是当我尝试构建第三个时，我得到`The type or namespace 'Lime49' could not be found`了控制台显示：

```
>C:\Windows\Microsoft.NET\Framework\v4.0.30319\Microsoft.Common.targets(1578,5): warning MSB3268: The primary reference "Lime49" could not be resolved because it has an indirect dependency on the framework assembly "mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" which could not be resolved in the currently targeted framework. ".NETPortable,Version=v4.0,Profile=Profile2". To resolve this problem, either remove the reference "Lime49" or retarget your application to a framework version which contains "mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089".
1>C:\<snipped>\MyProject\trunk\MyProject.Shared\Fraction.cs(11,7,11,13): error CS0246: The type or namespace name 'Lime49' could not be found (are you missing a using directive or an assembly reference?)
1>C:\<snipped>\MyProject\trunk\MyProject.Shared\Nutrition\USDA\USDAUtils.cs(5,7,5,13): error CS0246: The type or namespace name 'Lime49' could not be found (are you missing a using directive or an assembly reference?)
1>C:\<snipped>\MyProject\trunk\MyProject.Shared\UrlHelper.cs(6,7,6,13): error CS0246: The type or namespace name 'Lime49' could not be found (are you missing a using directive or an assembly reference?)
======== 
```

我的解决方案中还有两个项目同时引用了可移植库和 .NET 4 库，由于其他人拒绝构建，这两个项目都没有构建。我已经尝试删除并重新创建可移植库，但是当从另一个项目中引用它们时它们仍然不会构建。

这是我在两个可移植类库的框架设置中所拥有的： ![框架配置](../Images/280764bfb62d8dc431be27385fd3d99e.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T20:37:06.103

您说第三个项目未能构建，但看起来它实际上是第二个项目。从警告消息中可以看出，您正在针对 Lime49.dll 版本进行构建，该版本实际上是 .NET 4.x 二进制文件且不可移植。

您能否确保 Lime49*实际上*是一个可移植项目，或者您不是针对曾经是 .NET 4.x 的旧版本的二进制文件构建的？

# c++ - shared_ptr- 如何忽略第一个引用？

> ID：13110588
> 
> 赞同：1
> 
> 时间：2012-10-28T16:17:46.807
> 
> 标签：c++, memory, shared-ptr, smart-pointers

我正在写资源管理器。这就是它的样子：

```
#pragma once

class IObject;
typedef std::shared_ptr<IObject>            resource_ptr;
typedef std::map<std::string, resource_ptr> resources_map;

class ResourceManager
{
public:
    ResourceManager(void);
    ~ResourceManager(void);

    bool            add(resource_ptr &resource);
    resource_ptr    get(const std::string &name);
    void            release(resource_ptr &ptr);

private:
    resources_map resources;
};

bool ResourceManager::add(resource_ptr &resource)
{
    assert(resource != nullptr);
    resources_map::iterator it = resources.begin();

    while(it != resources.end())
    {
        if(it->second == resource)
            return false;
        it++;
    }

    resources[resource->getName()] = move(resource);
    return true;
}

resource_ptr ResourceManager::get(const std::string &name)
{
    resources_map::iterator it = resources.find(name);

    resource_ptr ret = (it != resources.end()) ? it->second : nullptr;
    return ret;
}

void ResourceManager::release(resource_ptr &ptr)
{
    assert(ptr);
    resources_map::iterator it = resources.begin();

    while(it != resources.end())
    {
        if(it->second == ptr) {
            ptr.reset();

            if(!it->second)
                resources.erase(it);
            return;
        }

        it++;
    }
} 
```

现在，当我添加新资源时

```
 resource_ptr t = resource_ptr(new Texture(renderer));
    t->setName("t1");

    resourceManager.add(t); 
```

指针有一个引用。现在，当我想得到这个指针时

```
resource_ptr ptr = resourceManager.get("t1"); 
```

参考计数器增加。所以当我不想再使用这个资源时

```
resourceManager.release(ptr); 
```

我现在想删除这个资源，但引用计数器的值为 1。

我该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T16:23:47.010

首先，要直接回答您的问题，这正是 a`weak_ptr`的用途。

它允许您“观察”一个引用计数的对象，但如果弱指针是唯一剩下的引用，则不会使其保持活动状态。

其次，不要编写管理器类。你需要一个“资源管理器”做什么？“管理”资源意味着什么？您将它们存储为共享指针，因此它们几乎可以自行管理。

任何时候你考虑写一个“经理”类，你应该停下来问问自己“这个类实际上应*该做什么*？” 然后将其重命名为内容丰富且具体的内容。“资源管理器”可以是任何东西，也可以什么都不是。我们知道它确实... 有资源的东西，但这个名字并没有告诉我们那个东西是*什么*。它是一个允许用户*定位*资源的索引吗？它是否管理资源的生命周期？它是否处理资源的加载和卸载？还是完全不同的东西？还是所有这些东西？

决定类应该做的*一*件事，然后重命名它，以便名称反映那一件事。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-28T19:07:33.980

如前所述，`std::shared_ptr`is的吊坠`std::weak_ptr`允许在不实际持有资源的情况下持有资源。因此，一个简单的转换是将 a`weak_ptr<T>`作为值存储在您的地图中，以避免人为地保持对象活着......

**然而**，这个方案有一个问题：空间泄漏。您的地图中的键数量永远不会减少，这意味着如果您加载 1000 个“资源”并释放其中的 999 个，您的地图仍然有 1000 个键，其中 999 个与无用的值相关联！

然而，诀窍相当简单：在销毁时，注册的对象应该通知那些引用它的人！但是，这确实施加了一些限制：

*   对象的名称一旦注册就不应更改
*   一个对象不应该被注册超过一次和/或维护一个它所注册的所有对象的列表

最后，还有一个问题是对象注册到的那些对象可能会在对象之前死掉......变得有点复杂，不是吗？

所以，这是我们的攻击计划：

*   每个实例只运行一次什么？构造*函数*。
*   您如何“被动”地确保活力？使用`std::weak_ptr`

我们走吧！

```
// Object.hpp
class Cache;

class Object: public enable_shared_from_this<Object> {
public:
    // std::shared_ptr<Object> shared_from_this(); -- inherited

    Object(std::string const& name, std::shared_ptr<Cache> const& cache);
    virtual ~Object();

    Object(Object const&) = delete;
    Object& operator=(Object const&) = delete;

    std::string const& name() const { return _name; }

private:
    std::string _name;
    std::weak_ptr<Cache> _cache;
}; // class Object

// Object.cpp
#include <Object.hpp>
#include <Cache.hpp>

Object::Object(std::string const& name, std::shared_ptr<Cache> const& cache):
     _name(name), _cache(cache)
{
     if (cache) { cache->add(this->shared_from_this()); }
}

Object::~Object() {
     std::shared_ptr<Cache> c = _cache.lock();
     if (c) { c->release(*this); }
} 
```

这里发生了一些奇怪的事情：

*   通过在构造函数中传递名称，我们保证它已设置，并且由于我们不提供任何设置器，因此也不能修改它（除非`const_cast`...）
*   继承自`enable_shared_from_this`意味着如果对象的生命周期由 a 管理，`shared_ptr`那么使用`shared_from_this`我们可以获得`shared_ptr`指向它的指针
*   我们必须小心，我们*确实*在析构函数中引用了一个*仍然活动*的缓存，所以我们检查它。
*   让我们使用`virtual`析构函数，只是为了站在同一边。

好的，让我们继续：

```
// Cache.hpp
#include <Object.hpp>

class Cache: public std::enable_shared_from_this<Cache> {
    friend class Object;
public:
    // std::shared_ptr<Cache> shared_from_this(); -- inherited

    std::shared_ptr<Object> get(std::string const& name) const;

    void release(Object const& o);

private:
    typedef std::weak_ptr<Object> WeakPtr;
    typedef std::map<std::string, WeakPtr> Map;

    void add(std::shared_ptr<Object> const& p);

    Map _map;
}; // class Cache

// Cache.cpp
#include <Cache.hpp>

std::shared_ptr<Object> Cache::get(std::string const& name) const {
    auto const it = _map.find(name);
    if (it == _map.end()) { return std::shared_ptr<Object>(); }

    return it->second.lock();
}

void Cache::release(Object const& o) {
    _map.erase(o.name());
}

void Cache::add(std::shared_ptr<Object> const& p) {
    assert(p && "Uh ? Should only be accessed by Object's constuctor!");

    _map[p->name()] = p; // Note: override previous resource of same name, if any
} 
```

现在这似乎很容易。用法：

```
int main() {
    std::shared_ptr<Cache> c{new Cache{}}; // cannot be stack allocated no longer

    {
        std::shared_ptr<Object> o{new Object{"foo", c}};

        assert(c->get("foo"));
    }

    assert(c->get("foo") == nullptr);

    std::shared_ptr<Object> o{new Object{"foo", c}};

    c.reset(); // destroy cache

    // no crash here, we just do not "unregister" the object
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-28T17:36:37.983

这是一个非常简单的资源管理器，它使用了weak_ptr 和shared_ptr。

```
template<typename T, typename Arg=std::string, typename Ordering = std::less<Arg>>
class ResourceManager
{
  typedef std::function<std::shared_ptr<T>(Arg)> factory;
  factory createT;
  std::map< Arg, std::weak_ptr<T>, Ordering > cache;
public:
  ResourceManager( factory creator ):createT(creator) {}
  std::shared_ptr<T> get( Arg a )
  {
    std::shared_ptr<T> retval;
    auto it = cache.find(a);
    if (it != cache.end())
    {
      retval = it->second.lock();
    }
    if (retval)
      return retval;
    retval = createT(a);
    cache[a] = retval;
    return std::move(retval);
  }
}; 
```

现在，这要求您可以根据其名称创建资源，或者更具体地说，名称 (Arg) 完全指定了资源，并且每当您请求资源时，您都可以对其进行构建。

编写一个函数，接受文件名 std::string 并返回加载的图像并将其传递给 ResourceManager<image> 构造函数，并通过调用 manager.get(string) 获取图像，上面应该可以工作。在多线程环境中，事情自然会变得更加棘手。

get() 代码可以通过使用 equal_range （为之后的插入提供提示——无需搜索两次地图）或无序地图（因为您不关心地图排序）等进行优化。代码尚未编译。

样品用途：

```
void DisposeImage( Image* img ); // TODO: write
Image* LoadImage( std::string s ); // TODO: write
shared_ptr<Image> ImageFactory( std::string s )
{
  return shared_ptr<Image>(
    LoadImage(s),
    DisposeImage
  );
}
ResourceManager manager( ImageFactory );
std::shared_ptr<Image> bob1 = manager.get("Bob.png");
std::shared_ptr<Image> doug1 = manager.get("Doug.png");
std::shared_ptr<Image> bob2 = manager.get("Bob.png");

Assert(bob1.get() == bob2.get()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-28T16:22:00.303

智能指针用于自动控制对象的生命周期。在这种情况下，您似乎不想自动控制，而是想明确控制它。所以不要使用智能指针。

# image - 浏览器上的jQuery Masonry流体图像调整大小

> ID：13110589
> 
> 赞同：1
> 
> 时间：2012-10-28T16:18:06.383
> 
> 标签：image, jquery-masonry, fluid-layout

我正在尝试使用 Masonry 构建带有图像的流畅多列布局。在某些浏览器大小下，多列会翻转为一列。有没有办法来解决这个问题？

[代码笔： http](http://codepen.io/anon/pen/dloAe) ://codepen.io/anon/pen/dloAe

```
$(function(){
  var $container = $('#container');

  $container.imagesLoaded( function(){
       $(window).resize(function(){
          $container.masonry({
            itemSelector: '.item',
            isResizable: false,
          });
       }).resize();
    });
});
```

```
img {
  max-width: 100%;
}

#container {
  max-width: 1280px;
  margin: 0 auto;
}

.item {
    float: left;
    width: 46%;
  padding: 2%;
}
```

```
<div id="container">
  <div class="item">
    <img src="http://upload.wikimedia.org/wikipedia/commons/thumb/f/f8/Rho_Ophiuchi.jpg/611px-Rho_Ophiuchi.jpg">
  </div>
  <div class="item">
    <img src="http://upload.wikimedia.org/wikipedia/commons/c/cb/Hess_maloyaroslavets.jpg">
  </div>
    <div class="item">
    <img src="http://upload.wikimedia.org/wikipedia/commons/thumb/f/f8/Rho_Ophiuchi.jpg/611px-Rho_Ophiuchi.jpg">
  </div>
    <div class="item">
    <img src="http://upload.wikimedia.org/wikipedia/commons/c/cb/Hess_maloyaroslavets.jpg">
  </div>
</div>
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T01:20:57.093

对我来说，它分为两列，一直到最小的 chrome 可以去。

但是，我建议为您的容器设置一个最小宽度（320 像素），以便任何小于该值的（我假设是当它进入一列时）将启动窗口滚动而不是将其推入一列。

什么浏览器遇到这种情况？发生此问题时的窗口大小是多少？问题中的更多信息=答案中的更多帮助。

# extjs - Extjs 组成组件

> ID：13110590
> 
> 赞同：0
> 
> 时间：2012-10-28T16:18:08.240
> 
> 标签：extjs, extjs4

我正在使用 ExtJs4.1，我需要创建一个新的 textField，右侧有一个自定义按钮。

我的第一次尝试是创建一个容器，里面有一个 textField 和一个按钮：

```
{
   xtype: 'container',
   layout: 'hbox',
   items:[
     {xtype:'textField', flex:1},
     {xtype:'button', width:17}  
   ]
} 
```

其实我很多地方都会用到这个组件，所以需要创建一个自定义控件。

我该怎么做，记住 textField 是最重要的控件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T18:56:31.800

你需要定义它。您可以给它一个 xtype 别名以方便地引用它。在您尝试调用它之前确保它已加载（通过使用'requires'）。

```
Ext.define('My.namespace.Component', {
  extend: 'Ext.container.Container',  //extend Container
  alias: 'widget.mycomponent',        //this is the xtype (minus 'widget.')

  layout:{
    type:'hbox'
  },

  initComponent:function(){

    Ext.applyIf(this, {
          items: [
                {
                    xtype: 'textfield',
                    fieldLabel: 'Label',
                    flex: 1
                },
                {
                    xtype: 'button',
                    text: 'MyButton',
                    flex: 1
                }
            ]
    });

    this.callParent(arguments); //everything breaks if you forget this
  }
}); 
```

在视图或其他组件中，使用 requires 加载上述组件：

```
...
requires:[
  'My.namespace.Component'
]
... 
```

像这样使用它：

```
{
  xtype:'mycomponent',
  width:666
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T10:30:51.527

制作资源，我找到了“触发字段”的解决方案：

```
Ext.define('App.controls.CoTextField',{
    extend: 'Ext.form.field.Trigger',
    alias: 'widget.cotextfield',
    triggerCls: 'x-form-trigger',
    trigger2Cls: 'x-form-clear-trigger',
    onTriggerClick: function() {
        alert('Down button');
    },
    onTrigger2Click: function() {
        alert('Clear button');
    }

}); 
```

# mysql - 连接表并为 MySql 中的每一行获取各种类别

> ID：13110594
> 
> 赞同：0
> 
> 时间：2012-10-28T16:18:35.557
> 
> 标签：mysql, join

我遇到了一些问题。我有各种要加入的表，但我还需要获取检索到的每一行的类别。我需要从一个表中检索类别 ID，然后在另一个表中查找类别名称。我认为它更容易展示。这是我失败的 sql 查询尝试：

```
SELECT     DISTINCT(t.tour_name), tp.tprecio_precio_adulto, 
           tp.tprecio_precio_menor, category_name 
FROM       tour AS t 
INNER JOIN tour_categories AS cc ON tcategoria_fktour = t.tour_id
INNER JOIN tour_precio AS tp ON tp.tprecio_fktour = t.tour_id
LEFT JOIN  categories AS c ON c.category_id = tc.category_id 
WHERE      tp.tprecio_fecha_inicio <= '2012-10-27' 
       AND tp.tprecio_fecha_final >= '2012-10-27' 
       AND t.tour_activo = '1' 
       AND tp.tprecio_precio_adulto != '0.00' 
```

以下是表格布局：

```
table: tour
tour_id      |    tour_name     
-----------------------------------------
 1                tour name 1
 2                tour name 2
 3                tour name 3

table: tour_categories
  category_id    |    tour_id    
------------------------------------
     1                   3             
     2                   3
     3                   3

 table: categories
      category_id    |    category_name    
    ------------------------------------
          1              category name 1            
          2              category name 2  
          3              category name 3 
```

如您所见，每次旅行可以有多个类别，我需要获取这些类别并将它们组合在一起，然后为每个类别获取相应的类别名称。我不知道如何做到这一点。任何帮助将不胜感激！提前感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T17:04:34.223

我想通了，以防万一这可以帮助其他人。我在巡演名称上做了一个组连接，并添加了一个分隔符。它现在完美运行：

```
SELECT GROUP_CONCAT(c.category_name ORDER BY c.category_name ASC SEPARATOR ', ') AS categories, t.tour_name
FROM tour AS t
INNER JOIN tour_categoria AS cc ON cc.category_id = t.tour_id
LEFT OUTER JOIN categoria AS c ON c.category_name_id = cc.category_id
GROUP BY t.tour_name 
```

# java - 比较图中的字符串

> ID：13110598
> 
> 赞同：0
> 
> 时间：2012-10-28T16:18:51.583
> 
> 标签：java, string, data-structures, graph

我有一个图形表示，每个节点都包含`(int id, String categoryName)`. 它由大约 500,000 个节点组成。现在说我想检查`"computing"`图表中是否存在 categoryName，这是否意味着我必须像使用 BSF 方法一样遍历整个图表？（如果我在这里错了，请纠正我）。现在检查该 categoryName 是否存在非常慢（最多需要 3 分钟），有什么建议可以提高搜索和比较字符串值的速度吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T16:22:13.173

如果您没有其他数据 - 那么是的，将需要搜索图表。

但是，您可以预处理并使用从字符串映射到实际节点的[`Map<String,Node>`](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html)（您的节点类在哪里`Node`），并快速查找某个`String`节点是否具有相关节点。

您可以使用以下方法从字符串中获取节点：[`map.get(string)`](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html#get%28java.lang.Object%29)

您可以使用 a [`TreeMap`](http://docs.oracle.com/javase/6/docs/api/java/util/TreeMap.html)（具有 O(logn) 查找和插入时间并已排序）和 a [`HashMap`](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html)（实现哈希表并具有`O(1)`平均大小写查找和插入时间）

* * *

注意：这假设没有重复，即没有字符串有两个不同的节点代表它。
如果这个假设不正确，你可以使用[Guava Multimap 之类的东西](http://guava-libraries.googlecode.com/svn/tags/release03/javadoc/com/google/common/collect/Multimap.html)

# c - 确定内存中字符数组的大小

> ID：13110599
> 
> 赞同：3
> 
> 时间：2012-10-28T16:18:52.113
> 
> 标签：c

我是 C 语言的初学者，如果我的语言/风格不专业，请原谅。

问题：我正在尝试确定字符数组的大小，以便以后可以知道使用 malloc() 分配的大小。

我的代码：

```
char *dest;

char *src1 = "Test String";
char src2[] = "Testing!";

dest = (char *) malloc( sizeof(src1) ); 
```

问题是我想确定 src1 和 src2 在内存中的大小。即 src1 的大小应该是 11，src2 的大小应该是 8。但是我从 sizeof() 收到的结果是：

*   sizeof(*src1) 是 1，因为 sizeof(char)
*   sizeof(src1) is 4 <--我不知道为什么有人可以解释一下吗？
*   sizeof(src2) is 9 <--我猜这就是我想要的，空终止符也计入大小

但是如何正确确定 src1 的大小呢？以及 sizeof(src2) 为何有效但 sizeof(src1) 无效？

如果我不清楚我要做什么，请回复，我会尽量让它更清楚。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T16:21:04.997

`sizeof`返回您传递给它的类型的大小。因为 src1 是一个指针，所以它返回 4。

如果您只使用字符串，只需使用`strlen(src1)`来获取字符串的大小。您的分配线应该看起来像

```
dest = (char*) malloc(strlen(src1) + 1); // add one for the \0 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-28T16:20:32.070

```
sizeof(src1) 
```

为您提供环境中指针的大小，而不是数组的长度。根据您的结果，环境中指针的大小为 4。如果要确定指针指向的字符串文字的大小，则
需要使用`strlen`的情况`src1`。

```
sizeof(src2) 
```

返回字符数组的大小。

为了了解两者之间的区别，您应该了解：

[char a[] = “string”; 和有什么区别？和 char *p = “字符串”；](https://stackoverflow.com/questions/9460260/what-is-the-difference-between-char-a-string-and-char-p-string/9631091#9631091)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-28T16:21:04.720

如果您想要字符串的长度（从您提供的数字中可以看出），您可以使用该`strlen(char *)`函数。（strlen 函数是 的一部分`<string.h>`）

只需像这样传递您的字符串：

```
int len1 = strlen(src1); // This will give 8 as intended 
```

# numbers - 使用 Dart 计算字符串中字母的数量

> ID：13110602
> 
> 赞同：12
> 
> 时间：2012-10-28T16:19:15.287
> 
> 标签：numbers, dart, contain

我试着计算句子中有多少个字母“a”：“Hello Jordania”。

我发现该功能包含。我这样使用它：

```
 var phrase = "Hello Jordania;
  var comptenbrdea = phrase.contains('a');
  print(comptenbrdea); 
```

我得到“真”作为回应。正常你会说，我知道，但我找不到正确的函数来计算我得到 a 的次数。如果我可以检查每个字符，我也许可以用循环做一些事情？...我迷路了[http://www.dartlang.org/search.html?cx=011220921317074318178%3Ai4mscbaxtru&ie=UTF-8&hl=en&q=string_scanner](http://www.dartlang.org/search.html?cx=011220921317074318178%3Ai4mscbaxtru&ie=UTF-8&hl=en&q=string_scanner) ...有人可以帮我吗？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-10-28T21:59:20.437

这是一个简单的方法：

```
void main() {
  print('a'.allMatches('Hello Jordania').length); // 2
} 
```

编辑：测试的字符串是参数，而不是要计算的字符。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-01T14:16:06.427

```
void main() {
  const regExp = const RegExp("a");
  print(regExp.allMatches("Hello Jordania").length); // 2
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-28T18:05:21.777

您需要对字符进行迭代并对其进行计数，您上面的评论包含用于构建直方图的通用函数，但仅计算 'a' 的版本可能对您编写有好处。我将向您展示如何循环字符：

```
var myString = "hello";
for (var char in myString.splitChars()) {
  // do something
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-12-23T15:15:02.353

```
void main(){
  String str = "yours string";
  Map<String, int> map = {};
  for(int i = 0; i < str.length; i++){
    int count = map[str[i]] ?? 0;
     map[str[i]] = count + 1;
  }
  print(map);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-28T19:05:16.927

```
 // count letters
  Map<int,int> counts = new Map<int,int>();
  for (var c in s.charCodes() ) {
    counts[c] = counts.putIfAbsent(c, p()=>0) + 1;
  }
  // print counts
  for (var c in counts.getKeys())
    print("letter ${new String.fromCharCodes([c])} count=${counts[c]}"); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-05-18T12:50:45.023

可能不是最好的，但你也可以做这样的事情。

```
void main() {
  var a = "ht://adfd//.coma/";

  int count = a.split("t").length - 1;
  print(count);
} 
```

您需要减去 1，因为它首先拆分为一个列表，然后计算该列表的大小。

# html - 奇怪的 html5 / css 行为

> ID：13110609
> 
> 赞同：0
> 
> 时间：2012-10-28T16:20:31.940
> 
> 标签：html, css

请看看这个：http: [//jsfiddle.net/MbrJf/](http://jsfiddle.net/MbrJf/)

当我使用检查元素时，正文从页面顶部开始 100px，即使在 css 中没有边距或类似的东西。如果`<nav>`元素从页面中删除，一切正常（即使`margin-top`规则从 css 中删除，它也可以正常工作 - 但仍有一点差距）。

nav 不应该一直在顶部，但是当添加 margin-top 时，它会将 h1、地址和站点的其余部分推到它下面……这非常令人困惑。我正在努力做到这一点：http: [//imgur.com/zgBFm](http://imgur.com/zgBFm)

有人能理解这个吗？

HTML：

```
<div id="wrapper">
  <header>
    <h1><a href="index.html" title="Ozio Sushi">Ozio Sushi</a></h1>
    <address>
    123.456.7890<br>
    123 Fake Street West, Toronto
    </address>
    <nav>
      <ul>
        <li><a href="about.html" title="About">About</a> </li>
        <li> <a href="menu.html" title="Menu">Menu</a></li>
        <li> <a href="gallery.html" title="Gallery">Gallery</a></li>
        <li> <a href="contact.html" title="Contact">Contact</a></li>
      </ul>
    </nav>
  </header>
</div> 
```

CSS：

```
@charset "UTF-8";
/* CSS Document */

body { 
margin: 0px;
padding: 0px;
background-color: #362f2d;
}
a {
    text-decoration: none;
    color:inherit;
    border: none;
}
#wrapper {
    background-color: #362f2d;
    width: 100%;
    margin: 0px;
    padding: 0px;
    top: 0px;
    left: 0px;
}
header {
    clear: both;
    width: 100%;
    display: block;
}
nav { 
height: 50px;
width: 100%;
background-color: #f7941d;
margin-top: 100px;
}
header h1 {
    font-family: Kaushan script, cursive;
    color: white;
    float:left;
    font-size: 60pt;
    font-weight: 300;
    margin:0px;
}
address {
    font-family: Lato, Arial, sans-serif;
    color: white;
    font-weight:300;
    font-size: 8pt;
    float:left;
    font-style: normal;
}

li {
display: inline;
margin-right: 60px;
font-family: Lato, Arial, sans-serif;
color: white;
font-size: 16pt;
font-weight: 400;
}
#main {
    clear:both;
    margin:0px;
}

​ 
```

​</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T16:24:43.173

将导航中的`margin-top`on`nav`和 the设置为：`ul``0`

[http://jsfiddle.net/MbrJf/3/](http://jsfiddle.net/MbrJf/3/)

边距将主体向下推，并且`ul`具有必须取消的默认边距（您应该使用重置或规范化 CSS 文件）

**编辑**

那么你想要这样的东西：http: [//jsfiddle.net/MbrJf/4/](http://jsfiddle.net/MbrJf/4/)？这种情况下的根本问题是ed`header`没有正确包含徽标。应用其中一种标准解决方案，如 clearfix 或将解决这个问题。`h1``float``overflow:hidden`

# matlab - 在向量内均匀分布指定值的范围

> ID：13110627
> 
> 赞同：5
> 
> 时间：2012-10-28T16:22:14.927
> 
> 标签：matlab, vector, range

我有一个向量 A，我想用尽可能均匀的值填充它。例如，如果 A 是 1x30，并且我想使用三个值，我将使用如下代码：

```
% A = zeros(1,30);
A([1:10])=0;
A([11:20])=1;
A([21:30])=2; 
```

这可行，但对我来说似乎有点麻烦。有没有更优雅的方法来均匀（尽可能）在向量中分布指定范围的值？我打算将每个值保持在“块”中。

预先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T16:56:26.713

假设您想在`[5 2 6]`长度为 8 的向量上尽可能均匀地分配值。那么您可以使用`linspace`以下方式：

```
vals = [5 2 6];
vecLength = 8;

nVals = length(vals);
idx = floor(linspace(1,nVals+1-2*eps(nVals),vecLength));

out = vals(idx)

out =

     5     5     5     2     2     6     6     6 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T17:03:01.603

我会从另一个方向来解决这个问题。定义您想要的值，定义向量大小，根据需要多次复制向量以获得矩阵，并删除“过多”元素：

```
range  = [1 3 5 7 9]';
vsize  = 52;

% number of repetitions
rep    = ceil(vsize/numel(range));

% replicate the range vector;
result = repmat(range, 1, rep);

% cut the the excessive elements
result(vsize+1:end) = NaN;
result = reshape(result', 1, []);
result(isnan(result)) = []; 
```

分布尽可能均匀，即范围内的值出现次数的差异最多为 1。

# python - 在 Python 中解码 UTF-8 字符串

> ID：13110629
> 
> 赞同：24
> 
> 时间：2012-10-28T16:22:21.640
> 
> 标签：python, python-2.7

我正在用 python 编写一个网络爬虫，它涉及从网站上获取头条新闻。

头条新闻之一应该读到：臀部也来了

但相反，它说：Hip 也来了

这里出了什么问题？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-10-28T16:36:30.503

这是一个编码错误 - 所以如果它是一个 unicode 字符串，这应该修复它：

```
text.encode("windows-1252").decode("utf-8") 
```

如果它是纯字符串，则需要一个额外的步骤：

```
text.decode("utf-8").encode("windows-1252").decode("utf-8") 
```

这两个都会给你一个 unicode 字符串。

顺便说一句 - 要发现这样的一段文本是如何由于编码问题而被破坏的，您可以使用[chardet](http://pypi.python.org/pypi/chardet)：

```
>>> import chardet
>>> chardet.detect(u"And the Hipâ€™s coming, too")
{'confidence': 0.5, 'encoding': 'windows-1252'} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-10-28T16:26:34.310

您需要正确解码源文本。源文本很可能是 UTF-8 格式，而不是 ASCII。

因为您没有为您的问题提供任何上下文或代码，所以无法直接给出答案。

我建议你研究一下 Python 中如何完成 unicode 和字符编码：

[http://docs.python.org/2/howto/unicode.html](http://docs.python.org/2/howto/unicode.html)

# javascript - 仅在第一次执行时不调用 f:ajax 的 Ajax 侦听器

> ID：13110630
> 
> 赞同：0
> 
> 时间：2012-10-28T16:22:28.137
> 
> 标签：javascript, jquery, jsf, richfaces, composite-component

我在 JBoss AS 6.1 上使用 Mojarra 2.1.13 和 Richfaces 4.2.3.Final 执行 jsf 页面的 ajax 侦听器有一个奇怪的问题。我已尝试在以下示例中重现该问题，但*此示例中未出现此问题*。

**索引.xhtml**

我插入了`rich:jQuery`强制包含 jQuery 的元素，因为在我的实际应用程序中，表单的命令按钮是隐藏的，并按`jQuery('#one:form:submit').click();`方法执行。

```
<h:body>
    <h:outputScript library="js" name="app.js"/>
    <rich:jQuery selector="document" query="ready(function(){app.init();})" timing="domready"/>
    <h:panelGroup layout="block">
        <c:forEach items="#{testBean.values}" var="value">  
            <c:if test="true">
                <test:component id="#{value}" value="#{value}">
                    <f:ajax event="click" listener="#{testBean.submit}" render=":out" />
                </test:component>
            </c:if>
        </c:forEach>
        <h:outputText value="#{testBean.text}" id="out" />
    </h:panelGroup>
</h:body> 
```

**资源/测试/component.xhtml**

内容中使用的复合组件。

```
<composite:interface>
    <composite:attribute name="value" />
    <composite:clientBehavior name="click" event="click" targets="form:submit" default="true"/>
</composite:interface>

<composite:implementation>
    <h:form id="form" styleClass="objects">
        <h:inputText id="input" value="#{cc.attrs.value}"/>
        <h:commandButton id="submit" type="submit" value="submit"/>
    </h:form>
</composite:implementation> 
```

**com.example.TestBean**

```
@ManagedBean(name = "testBean")
@ViewScoped
public class TestBean {

    private static final Logger LOGGER = Logger.getLogger(TestBean.class);
    private String text;
    private List<String> values;

    // Getters + Setter 

    @PostConstruct
    public void postConstruct() {
        setText("instanziated");
        setValues(new ArrayList<String>());
        getValues().add("one");
        getValues().add("two");
        LOGGER.info("TestBean initialized");
    }

    public void submit(final AjaxBehaviorEvent event) {
        LOGGER.info("executed");
        setText("executed");
    }
} 
```

在实际应用程序中，当单击提交按钮但未调用侦听器方法时会触发 ajax 事件，**但在**第一次执行后一切都按预期工作，发送 ajax 请求并调用侦听器方法。这种现象会在整个页面重新加载之前发生。

* * *

更新：

根据评论中的要求，这是实际应用程序的一部分。该应用程序具有一些可拖动的元素，并且更改已提交到服务器以将更改存储在服务器端。因此，`operation`设置为`drag`隐藏输入字段。此外，这些更改被转换为 JSON，该 JSON 被设置为第二个隐藏输入`value`。设置这些值后，将调用提交按钮来调用 ajax 请求。

```
var app : {
    init : function() {
        jQuery(".objects").draggable({
            // event handling
            stop : function(event, ui) {
                // send changes to server
                app.submitDragOperation(this);
            }
        });
    },
    submitDragOperation : function(form) {
        app.setOperation(form,
            "drag",
            JSON.stringify({
                top: jQuery(form).css("top"),
                left: jQuery(form).css("left")
            })
        );
        app.submitOperation(form);
    },
    setOperation : function(form, operation, value) {

        var inputOpId = helper.fn.escapeColons("#" + jQuery(form).attr("id") + ":operation");
        var inputValId = helper.fn.escapeColons("#" + jQuery(form).attr("id") + ":value")
        jQuery(inputOpId).val(operation);
        jQuery(inputValId).val(value);
    },
    submitOperation : function(form) {
        // evaluate id of submit button
        var submitId = helper.fn.escapeColons("#" + jQuery(form).attr("id") + ":submit");
        jQuery(document).ready(function() {
            jQuery(submitId).click();
        });
    },
    submitDragOperation : function(form) {
        app.setOperation(form,
            "drag",
            JSON.stringify({
                top: jQuery(form).css("top"),
                left: jQuery(form).css("left")
            })
        );
        app.submitOperation(form);
    }
}; 
```

# android - 滚动横幅 - 实现它的最佳方式是什么？

> ID：13110634
> 
> 赞同：1
> 
> 时间：2012-10-28T16:22:48.890
> 
> 标签：android, android-layout, user-interface

我需要在 Android 中实现“横幅”视图。假设横幅有 5 张图片，其中一张在屏幕上可见。用户按下左（或右）按钮后，图像从右向左滑动。当您在第 5 张图像上时，按下“下一步”按钮后，您滚动到图像 5。

问题是：实施此类事情的最佳方法是什么？我已经挖掘了这个[https://github.com/blessenm/SlideshowDemo](https://github.com/blessenm/SlideshowDemo)。它使用滚动视图和带有计时器的 Runnable 来滚动图像。

我也在考虑使用动画类，它看起来很简单而且“干净”。

我没有Animation和ScrollView的经验，所以我想问一下更有经验的人。

如果您有任何教程/模式/解决方案的链接展示这样的横幅，我也很感激发布它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T17:18:13.170

您最好的选择之一可能是来自 v4 兼容性库的[ViewPager 。](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)这只需要一个`PagerAdapter`你可以用来创建一组`ImageView`s 的东西。

`ViewPager`将为您处理动画和适当的滑动效果。

# php - 使用 PHP 从 MYSQL 数据库向多个地址发送电子邮件时出错

> ID：13110635
> 
> 赞同：-3
> 
> 时间：2012-10-28T16:22:53.227
> 
> 标签：php, arrays, email, variables, recordset

我正在尝试将电子邮件发送到数据库中包含的多个电子邮件地址并分类到记录集中......记录集有多个列，但我只需要一个：“电子邮件”。我知道如果我将它们放在一个数组中，我可以将它们内爆并用逗号分隔它们，但我不确定如何使用记录集列来做到这一点。有谁知道怎么做？顺便说一句，我知道我已将邮件功能注释掉了...回声返回空...

**这是我尝试过的代码：**

```
 $colname_rsAllLeads = "-1";
if (isset($_SESSION['MM_Username'])) {
  $colname_rsAllLeads = $_SESSION['MM_Username'];
}
mysql_select_db($database_myBackOfficeConn, $myBackOfficeConn);
$query_rsAllLeads = sprintf("SELECT Email FROM Leads WHERE `User` = %s ORDER BY FullName ASC", GetSQLValueString($colname_rsAllLeads, "text"));
$rsAllLeads = mysql_query($query_rsAllLeads, $myBackOfficeConn) or die(mysql_error());
$row_rsAllLeads = mysql_fetch_assoc($rsAllLeads);
$totalRows_rsAllLeads = mysql_num_rows($rsAllLeads);

$editFormAction = $_SERVER['PHP_SELF'];
if (isset($_SERVER['QUERY_STRING'])) {
  $editFormAction .= "?" . htmlentities($_SERVER['QUERY_STRING']);
} 

if ((isset($_POST["MM_insert"])) && ($_POST["MM_insert"] == "form")) {

    $startcode = $_POST['messagefield'];
    $replaced = preg_replace( '/\\\\(?="|\')/', '', $startcode );
    echo $replaced;
    $collectedleads = implode(',', $row_rsAllLeads['Email']);
    echo $collectedleads;

    /*
 $to = $collectedleads;
 $subject = $_POST['subjectfield'];
 $body = $replaced;
 $headers = "MIME-Version: 1.0\r\n"; 
 $headers .= "Content-type: text/html; charset=iso-8859-1\r\n"; 
 $headers .= "From: " . $row_rs_CurrentUser['FirstName'] . " " . $row_rs_CurrentUser['LastName'] . " <" . $row_rs_CurrentUser['Email'] . ">";
 if (mail($to, $subject, $body, $headers)) {
  } else {
   echo("<p>Message delivery failed...</p>");
  }
  */

  $insertSQL = sprintf("INSERT INTO PendingEmails (`to`, subject, message) VALUES (%s, %s, %s)",
                       GetSQLValueString($row_rsAllLeads['Email'], "text"),
                       GetSQLValueString($_POST['subjectfield'], "text"),
                       GetSQLValueString($_POST['messagefield'], "text"));

  mysql_select_db($database_myBackOfficeConn, $myBackOfficeConn);
  $Result1 = mysql_query($insertSQL, $myBackOfficeConn) or die(mysql_error());

  $insertGoTo = "Email Sent.php";
  if (isset($_SERVER['QUERY_STRING'])) {
    $insertGoTo .= (strpos($insertGoTo, '?')) ? "&" : "?";
    $insertGoTo .= $_SERVER['QUERY_STRING'];
  }
  header(sprintf("Location: %s", $insertGoTo));
} 
```

当我使用`var_dump($row_rsAllLeads['Email'])`它时输出**string(16) "acorso@gmail.com"** 但我知道我的 SQL 查询中没有错误，因为当我将它们放在选择框中时，它们都会显示出来......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T16:30:04.873

首先，您似乎只从结果中获得第一行。所以你必须得到所有这些：

```
$collectedleads = array();

while($row = mysql_fetch_assoc($rsAllLeads)) {
   $collectedleads[] = $row['Email'];
} 
```

之后，您必须用 . 分隔每个电子邮件地址`comma`。尝试使用[内爆](http://php.net/manual/bg/function.implode.php)方法：

```
$collectedleads = implode(',', $collectedleads);
echo $collectedleads; 
```

# javascript - 如何以编程方式在我的 Facebook 时间轴上发帖？

> ID：13110638
> 
> 赞同：0
> 
> 时间：2012-10-28T16:23:06.603
> 
> 标签：javascript, facebook, facebook-timeline

我想在我的时间轴上发布一个故事。

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T16:27:26.370

您需要做的就是阅读以下内容：

[http://developers.facebook.com/docs/reference/javascript/](http://developers.facebook.com/docs/reference/javascript/)

从以上：

以下示例使用 FB.ui() 方法调用 Feed 对话框以允许用户发布指向其时间线的链接：

```
FB.ui(
{
   method: 'feed',
   name: 'The Facebook SDK for Javascript',
   caption: 'Bringing Facebook to the desktop and mobile web',
   description: (
      'A small JavaScript library that allows you to harness ' +
      'the power of Facebook, bringing the user\'s identity, ' +
      'social graph and distribution power to your site.'
   ),
   link: 'https://developers.facebook.com/docs/reference/javascript/',
   picture: 'http://www.fbrell.com/public/f8.jpg'
},

function(response) 
{
    if (response && response.post_id) 
    {
      alert('Post was published.');
    } 
    else 
    {
      alert('Post was not published.');
    }
 } 
```

);

# android - 输出 ListView 中没有项目显示

> ID：13110639
> 
> 赞同：0
> 
> 时间：2012-10-28T16:23:16.230
> 
> 标签：android, sqlite, listview

我做的应用程序可以在 listView 中显示所有数据。但是当我编译我的应用程序时， listView 中没有显示任何内容。程序中没有任何错误，我真的不确定哪个部分是错误的。

有人知道我的程序有什么问题或问题吗？

```
main.java

package com.example.shoppingassistantnew;

import java.util.ArrayList;

import greendroid.app.GDActivity;
import greendroid.app.GDListActivity;
import greendroid.widget.ActionBar;
import greendroid.widget.ActionBarItem;
import greendroid.widget.ActionBarItem.Type;
import greendroid.widget.QuickAction;
import greendroid.widget.QuickActionBar;
import greendroid.widget.QuickActionGrid;
import greendroid.widget.QuickActionWidget;
import greendroid.widget.QuickActionWidget.OnQuickActionClickListener;

import android.os.Bundle;
import android.app.Activity;
import android.app.ListActivity;
import android.content.Context;
import android.content.Intent;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.graphics.Color;
import android.graphics.ColorFilter;
import android.graphics.LightingColorFilter;
import android.graphics.drawable.Drawable;
import android.view.LayoutInflater;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.CursorAdapter;
import android.widget.ListView;
import android.widget.TextView;
import android.widget.Toast;
import android.support.v4.app.NavUtils;

public class main extends GDActivity{

    private static final int HOME = 2;

    private static final int ADD = 1;

    private static final int EXPAND = 3;

    Cursor model = null;
    ProductDatabaseHelper helper = null;
    ShoppingListAdapter adapter=null;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setActionBarContentView(R.layout.shoppinglist);

        initActionBar();

        helper = new ProductDatabaseHelper(this);
        ListView listView = (ListView) findViewById(R.id.shoppingList);

        model = helper.getAll();
        startManagingCursor(model);
        adapter = new ShoppingListAdapter(model);
        listView.setAdapter(adapter);

    }
    public void onDestroy(){
        super.onDestroy();
        helper.close();
    }

    private OnQuickActionClickListener mActionListener = new OnQuickActionClickListener() {
        public void onQuickActionClicked(QuickActionWidget widget, int position) {
            if (position == 0) {
                Intent intent2 = new Intent(main.this, AddShoppingList.class);
                startActivity(intent2);
            }
        }
    };

    private void initActionBar() {
        // TODO Auto-generated method stub
        // this.getActionBar().setType(ActionBar.Type.Empty);
        addActionBarItem(Type.Add, ADD);
        addActionBarItem(Type.Edit, EXPAND);
    }

    @Override
    public boolean onHandleActionBarItemClick(ActionBarItem item, int position) {
        // TODO Auto-generated method stub
        switch (item.getItemId()) {
        case ADD:
            Intent intent = new Intent(main.this, AddShoppingList.class);
            startActivity(intent);
            break;
        case HOME:
            Intent intent1 = new Intent(main.this, main.class);
            startActivity(intent1);
            break;
        case EXPAND:
            onShowGrid(item.getItemView());
            break;

        }
        return super.onHandleActionBarItemClick(item, position);
    }

    class ShoppingListAdapter extends CursorAdapter{

        public ShoppingListAdapter(Cursor c) {
            super(main.this, c);
            // TODO Auto-generated constructor stub
        }

        @Override
        public void bindView(View row, Context ctxt, Cursor c) {
            // TODO Auto-generated method stub
            ShoppingListHolder holder=(ShoppingListHolder)row.getTag();
        }

        @Override
        public View newView(Context ctxt, Cursor cursor, ViewGroup parent) {
            // TODO Auto-generated method stub
            LayoutInflater inflater=getLayoutInflater();
            View row=inflater.inflate(R.layout.row,parent,false);
            ShoppingListHolder holder=new ShoppingListHolder(row);
            row.setTag(holder);
            return(row);

        }
    }
        static class ShoppingListHolder{
            private TextView barcode=null;
            private TextView format=null;

            ShoppingListHolder(View row){
                barcode=(TextView)row.findViewById(R.id.barcode);
                format=(TextView)row.findViewById(R.id.format);

            }
            void populateFrom(Cursor c,ProductDatabaseHelper helper){
                barcode.setText(helper.getBarcode(c));
                format.setText(helper.getFormat(c));

            }

        }

    } 
```

addShoppingList.java

```
package com.example.shoppingassistantnew;

import com.cyrilmottier.android.greendroid.R;

//import com.example.shoppingassistantnew.main.ProductData;

import android.app.ActionBar.LayoutParams;
import android.app.Activity;
import android.app.AlertDialog;
import android.app.Dialog;
import android.content.Context;
import android.content.DialogInterface;
import android.database.Cursor;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.WindowManager;
import android.widget.Button;
import android.widget.DatePicker;
import android.widget.EditText;
import android.widget.ListView;
import greendroid.app.GDActivity;

public class AddShoppingList extends Activity implements OnClickListener{
    //private static final ProductData mProductData = new ProductData();
    ProductData mProductData=new ProductData();
    Button mSaveBttn;
    EditText mBarcodeEdit;
    EditText mFormatEdit;
     ProductDatabaseHelper helper=null;

    //Cursor model=null;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.addshoppinglist);

        mSaveBttn = (Button) findViewById(R.id.saveBttn);
        mSaveBttn.setOnClickListener(this);
         dt=(DatePicker)findViewById(R.id.datePicker1);
        helper=new ProductDatabaseHelper(this);

    }

    public void onClick(View v) {
        // TODO Auto-generated method stub
        switch(v.getId()){
        case R.id.saveBttn:

            mBarcodeEdit = (EditText) findViewById(R.id.shoppingListNameEdit);
            mFormatEdit = (EditText) findViewById(R.id.shoppingDateEdit);
           mProductData.setBarcode(mBarcodeEdit.getText().toString());
           mProductData.setFormat(mFormatEdit.getText().toString());
           helper.insert(mBarcodeEdit.getText().toString(),mFormatEdit.getText().toString());
           showInfoDialog(this, "Success", "Product saved successfully");
           //model.requery();
        break;
        }
    }
       private void showInfoDialog(Context context, String title, String information) {
            new AlertDialog.Builder (context)
            .setMessage(information)
            .setTitle(title)
            .setPositiveButton("OK", new DialogInterface.OnClickListener() {

                public void onClick(DialogInterface dialog, int which) {
                    dialog.dismiss();

                }
            }).show();  
        }

}

ProductDatabase.java

  package com.example.shoppingassistantnew;

    import android.content.ContentValues;
    import android.content.Context;
    import android.database.Cursor;
    import android.database.sqlite.SQLiteDatabase;
    import android.database.sqlite.SQLiteDatabase.CursorFactory;
    import android.database.sqlite.SQLiteOpenHelper;
    import android.util.Log;

     class ProductDatabaseHelper extends SQLiteOpenHelper {
        private static final String PRODUCT_TABLE = "products";
        private static final String DATABASE_NAME = "spot_pay.db";
        private static final int SCHEMA_VERSION = 1;
        private SQLiteDatabase db;

        private static final String TAG = null;

        public ProductDatabaseHelper(Context context) {
            super(context, DATABASE_NAME, null,SCHEMA_VERSION);
            // TODO Auto-generated constructor stub
        }

        @Override
        public void onCreate(SQLiteDatabase db) {
            // TODO Auto-generated method stub
            db.execSQL("CREATE TABLE products (_id INTEGER PRIMARY KEY AUTOINCREMENT,barcode TEXT ,format TEXT);");
        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
            // TODO Auto-generated method stub
            db.execSQL("drop table if exists " + PRODUCT_TABLE);
            onCreate(db);
        }

        /*
         * public ProductDatabase(Context context) { ProductDatabaseHelper helper =
         * new ProductDatabaseHelper(context); db = helper.getWritableDatabase();
         * 
         * }
         */
        public Cursor getAll() {
            // TODO Auto-generated method stub
            return (getReadableDatabase()
                    .rawQuery("SELECT _id, barcode, format FROM products ORDER BY barcode",
                    null));
        }

        public void insert(String barcode, String format) {
            ContentValues vals = new ContentValues();
            vals.put("barcode", barcode);
            vals.put("format", format);
        getWritableDatabase().insert("products", null, vals);

        }

        public String getBarcode(Cursor c) {
            // TODO Auto-generated method stub
            return(c.getString(1));
        }

        public String getFormat(Cursor c) {
            // TODO Auto-generated method stub
            return(c.getString(2));
            }
        }

     row.xml
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="fill_parent"
    android:orientation="horizontal" 
    android:padding="4dip">
     <LinearLayout
         android:layout_width="fill_parent"
         android:layout_height="wrap_content"
         android:orientation="vertical" >
         <TextView 
             android:id="@+id/barcode"
             android:layout_width="fill_parent"
             android:layout_height="wrap_content"
             android:layout_weight="1"
             android:gravity="center_vertical"
             android:textStyle="bold"
             android:singleLine="true"
             android:ellipsize="end"

             />
         <TextView
             android:id="@+id/format"
             android:layout_width="fill_parent"
             android:layout_height="wrap_content"
             android:layout_weight="1"
               android:gravity="center_vertical"
             android:textStyle="bold"
             android:singleLine="true"
             android:ellipsize="end"/>
         </LinearLayout>

</LinearLayout> 
```

购物清单.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

<ListView
    android:id="@+id/shoppingList"

    android:layout_width="fill_parent"
    android:layout_height="wrap_content"

   />

</LinearLayout> 
```

[输出截图](http://www.freeimagehosting.net/e661c)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T16:29:46.863

你没有在你的 CursorAdapter 中做任何事情`bindView()`，所以你永远不会在你的行中看到任何数据。你需要做这样的事情：

```
@Override
public void bindView(View row, Context ctxt, Cursor c) {
    ShoppingListHolder holder=(ShoppingListHolder)row.getTag();
    holder.barcode.setText(c.getString(c.getColumnIndex("barcode"))); 
    holder.format.setText(c.getString(c.getColumnIndex("format")));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T16:30:21.200

调用后光标中有数据吗？`helper.getAll();`如果是，请尝试`model.moveToFirst()`在上一行之后和之前使用

`adapter = new ShoppingListAdapter(model);`

# ruby-on-rails - RoR：将代码从视图移动到助手

> ID：13110642
> 
> 赞同：0
> 
> 时间：2012-10-28T16:23:27.997
> 
> 标签：ruby-on-rails, ruby, view-helpers

我试图最好地了解如何将铁路助手与 haml 视图一起使用。

我有一个最初包含此逻辑的视图

```
=   fund_levels_last(i, @fund_level_count) ? ( link_to "add new level", ad, {class: 'button orange sm'} ) : ( link_to "remove", accounts_ad_fund_level_path(ad, fl.object.id), {:class => 'button orange sm', :method => :delete, :remote => true, :confirm => t('q.are_you_sure')} ) 
```

为了尽可能保持视图的代码简洁，我一直在尝试将此逻辑移至帮助程序。

```
 def fund_levels_last(i, flcount)
     if i ==  flcount
       true
     else
       false
     end
   end

   def fund_levels_btn(i, flcount)
     if self.fund_levels_last(i, flcount)
       link_to "add new level", ad, {class: 'button orange sm'}
     else
       link_to "remove", accounts_ad_fund_level_path(ad, fl.object.id), {:class => 'button orange sm', :method => :delete, :remote => true, :confirm => t('q.are_you_sure')}
     end
   end 
```

但是，在帮助程序中，我无权访问视图中的变量和对象（广告、对象、fl 等）。我想我可以将所有这些都传递给辅助方法，但不知何故，这似乎太复杂了，我觉得我在这里走错了路。我在视图中的单行代码似乎最终成为助手中的 15 行代码......

将此逻辑从视图移动到帮助器的最简单方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T16:31:23.593

顺便说一句，方法

```
def fund_levels_last(i, flcount)
  if i ==  flcount
    true
  else
    false
  end
end 
```

可能只是：

```
def fund_levels_last(i, flcount)
  i ==  flcount
end 
```

而且，返回布尔值的方法通常以 a 结尾，`?`所以它会变成`def fund_levels_last?(i, flcount)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-28T20:00:22.333

如果您的代码足够简单，您可能实际上需要一个部分代码。然后你可以像这样传递代码/变量：

`<%= render :partial => 'funds/partial_view', :locals => { :var => variable } %>`

但如果你需要一个助手，你将不得不作为参数传递：

`def funds_helper(var) //do something interesting end`

但是，没有理由将您的所有逻辑都排除在视图之外，而是将其分解为部分：

在控制器中： `@fund_level = fund_levels_last(i, @fund_level_count)`

鉴于： `<%= @fund_level ? render :partial => 'funds/add_new_level' : render :partial => 'funds/remove_level' %>`

然后让你的部分观点有正确的观点。

# java - 将 .docx 转换为 html，我收到不可读的文本

> ID：13110643
> 
> 赞同：0
> 
> 时间：2012-10-28T16:23:40.537
> 
> 标签：java

> **可能重复：**
> [在 Java 中以编程方式将 Word 文档转换为 HTML](https://stackoverflow.com/questions/227236/convert-word-doc-to-html-programmatically-in-java)

我有一个程序正在获取 .docx 文件并作为 .html 文件打开，但是当转换为 html 时，我得到的只是不可读的字符串。我需要这个文件的 html，因为我需要稍后解析它。当我使用下面的方法打开文件时，我得到不可读的文本，例如：úL]iN?#tBd!?^ý ?e"0©?®??AäúsIp?¸ü?D?ÂÓâ¨\Dâ>½? ?Eâcr&Æl\Fâÿ2qJ?U ??IúK&þIb

```
 FileInputStream fileInput = null;
    BufferedInputStream myBuffer = null;
    DataInputStream dataInput = null;
    fileInput = new FileInputStream(selectedFile);
    myBuffer = new BufferedInputStream(fileInput);
    dataInput = new DataInputStream(myBuffer);
    StringBuilder nHtmlText = new StringBuilder();
    while (dataInput.available() != 0) {
        System.out.println(dataInput.readLine());
        nHtmlText.append(dataInput.readLine());
    }
    htmlText = nHtmlText.toString(); 
```

有没有办法获得一个干净可读的 html 文件来解析和保存它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T17:32:59.547

[Docx4j](http://www.docx4java.org/)是一个 java 库，可让您打开、读取和操作 docx 文件。我过去已经成功地使用它。

它还能够将文件的内容导出为 HTML。您可以在此处阅读更多信息：http: [//www.docx4java.org/svn/docx4j/trunk/docx4j/docs/Docx4j_GettingStarted.html](http://www.docx4java.org/svn/docx4j/trunk/docx4j/docs/Docx4j_GettingStarted.html)（部分`docx to (X)HTML`大约在页面的中间）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T16:31:51.443

不。

您正在阅读 docx 文件的原始内容，这不是 html 而是压缩的 xml - 请参见[此处](http://en.wikipedia.org/wiki/Office_Open_XML)，您需要一些东西来将 docx 转换为 html。两者非常不同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T16:29:23.140

如果要将`.docx`文件转换为，`.html`则无法直接读取该文件，因为它是二进制文件。您可以为此使用[JODConverter](http://www.artofsolving.com/opensource/jodconverter)。我没有亲自使用过这个，但这个问题几乎与[这个问题](https://stackoverflow.com/questions/227236/convert-word-doc-to-html-programmatically-in-java)重复。

# postgresql - 如何从 PostgreSQL 9.0 函数（“存储过程”）获取数据集

> ID：13110649
> 
> 赞同：4
> 
> 时间：2012-10-28T16:24:23.860
> 
> 标签：postgresql, stored-procedures, dataset

我正在尝试从 PostgreSQL 9.0 函数获取数据集，但无法使用存储过程。

这周我是 Postgres 的新手，所以让我解释一下我的术语：

在 pgAdmin III 中，我可以输入命令：

```
SELECT * FROM member; 
```

并接收以下数据输出：

```
memberid   membername
1          Bill Smith
2          Joe Smith 
```

我尝试创建许多函数（表 / SETOF / 等），非常类似于：

```
CREATE OR REPLACE FUNCTION get_all_members()
RETURNS SET OF member AS
'select * from member;' 
```

当我在 pgAdmin 中运行它们（或从程序中调用它们）时，我得到以下信息：

```
SELECT get_all_members() 
```

结果：

```
get_all_members
member
(1, "Bill Smith")
(2, "Joe Smith") 
```

无论如何，我可以通过直接输入 SQL 命令从 FUNCTION（存储过程）中将其作为数据集获取。

非常感谢您的帮助！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T16:33:28.167

您可以通过稍微修改您的 select 语句来获得每列输出，如下所示：

```
SELECT * FROM get_all_members() 
```

这将为您提供逐列输出，就像正常进行查询一样。

请参阅文档中的[设置返回函数](http://www.postgresql.org/docs/current/static/functions-srf.html)。

# osgi - java.lang.ClassFormatError 异常，库打包为 OSGi 包

> ID：13110656
> 
> 赞同：0
> 
> 时间：2012-10-28T16:25:01.860
> 
> 标签：osgi, bundle

我仍然在为将项目中需要的库打包为 OSGi 包而苦苦挣扎。我已经在[这里](https://stackoverflow.com/questions/13077141/how-to-osgify-a-library)问过了。那里的答案肯定足够好，但是我又遇到了另一个我不理解且无法分解的问题:(

我将库最终打包为 OSGi 包，我已经确定了所有需要的依赖项，所有这些现在都在一个完整的 jar 存档中。

现在，如果我尝试使用该库的某些函数，则会引发异常，因为：

```
Caused by: java.lang.ClassFormatError: javax/ws/rs/core/UriBuilder
    at com.atlassian.jira.rest.client.internal.jersey.JerseyJiraRestClient.<init>(JerseyJiraRestClient.java:61)
    at com.atlassian.jira.rest.client.internal.jersey.JerseyJiraRestClientFactory.create(JerseyJiraRestClientFactory.java:34)
    at com.atlassian.jira.rest.client.internal.jersey.JerseyJiraRestClientFactory.createWithBasicHttpAuthentication(JerseyJiraRestClientFactory.java:39)
    at com.tieto.etb.esb.libs.jiraclient.JiraClient.getClient(JiraClient.java:28)[145:jiraclient.bundle:0.1.0.SNAPSHOT]
    at com.tieto.etb.esb.jira.JiraBean.projectInfo(JiraBean.java:38)[142:jira.bundle:0.1.0.SNAPSHOT]
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)[:1.6.0_35]
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)[:1.6.0_35]
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)[:1.6.0_35]
    at java.lang.reflect.Method.invoke(Method.java:597)[:1.6.0_35]
    at org.apache.camel.component.bean.MethodInfo.invoke(MethodInfo.java:341)[70:org.apache.camel.camel-core:2.10.1]
    at org.apache.camel.component.bean.MethodInfo$1.proceed(MethodInfo.java:238)[70:org.apache.camel.camel-core:2.10.1]
    at org.apache.camel.component.bean.BeanProcessor.process(BeanProcessor.java:166)[70:org.apache.camel.camel-core:2.10.1]
    ... 52 more 
```

我想请你提示一下，那里可能有什么问题。我想在构建捆绑包时出了点问题。

例如，我有另一个用于这个包的 pom，我在编译范围内都有。该捆绑包正在运行...

我将比较这两种情况的清单文件，可能仍然缺少一些依赖项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T21:29:41.490

好的，以某种方式解决了。在在这里寻求帮助之前，我应该更深入地搜索问题:) 所以，在 pom 文件中，我已经将 javaee-api 的依赖范围更改为“提供”。（[提示](https://community.jboss.org/wiki/WhatsTheCauseOfThisExceptionJavalangClassFormatErrorAbsentCode)）

然后有一些关于“未解决的依赖”的抱怨，但那些被标记为“;resolution:="optional" :P

到目前为止它有效。但我想这与“干净和漂亮”的解决方案相去甚远。

# java - 转换 ArrayList 时出错

> ID：13110657
> 
> 赞同：0
> 
> 时间：2012-10-28T16:25:02.423
> 
> 标签：java, android

我需要将定义为的对象传递给辅助活动：

```
public class Campionati extends ArrayList<Campionato> implements Serializable { 
```

我能够创建一个包含该对象的额外内容。在辅助活动的 onCreate() 函数中，我通过代码检索数据：

```
 Bundle b = getIntent().getExtras();
 if (b!=null) {
        Serializable s = b.getSerializable("datiSport");
        Campionati m_campionati = (Campionati)s; 
```

b 和 s 对象都很好，并且 s 被键入为 ArrayList。最后一条命令生成异常：

Java.lang.ClassCastException：Java.util.ArrayList

这是什么意思？我不明白为什么演员表是不可能的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-28T16:27:50.443

> 这是什么意思？我不明白为什么演员表是不可能的。

这意味着有问题的对象是`ArrayList`某种类型的，而不是`Campionati`.

您的继承关系意味着 any`Campionati`可以被视为`ArrayList`- 但反之*则不*正确。`Campionati`如果有问题的对象*实际上是*一个实例`Campionati`或子类，您只能转换为。

# process - 退出锁定互斥锁的进程会导致死锁吗？

> ID：13110661
> 
> 赞同：5
> 
> 时间：2012-10-28T16:25:16.527
> 
> 标签：process, mutex, deadlock

我一直认为，就像内存一样，操作系统有责任在进程结束后进行清理。不幸的是，我很难找到很多证据，所以我不能真正保证会发生什么。

我的主要问题是，如果一个进程正在锁定一个互斥锁，并且它会在很少或没有清理的情况下突然退出（即，在 C 中调用 abort，或在 C++ 中终止）会发生什么？

*   是否有任何**保证**操作系统会解锁互斥锁，或者只是**暗示**大多数有信誉的系统会（类似于未释放的内存）？

*   如果**没有保证**，这实际上会在仍在运行的进程和死进程持有的锁之间造成**死锁吗？**

*   如果可以以这种方式创建死锁，是否**可以在进程的线程之间复制**，而不是通过单独进程之间的共享互斥锁？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-28T17:01:44.430

如果互斥对象是退出进程拥有的（通过创建或打开），它的句柄将在进程终止时关闭。

其他进程等待操作将在这种情况下返回：

对于 Windows，即`WaitForSingleObject(...)`返回`WAIT_ABANDONED`，这意味着：

*指定的对象是一个互斥对象，在拥有该互斥对象的线程终止之前，该对象没有被拥有该对象的线程释放。互斥对象的所有权被授予调用线程，并且互斥状态设置为无信号。如果互斥体正在保护持久状态信息，您应该检查它的一致性。*

对于 Linux，即`pthread_mutex_lock(...)`返回`EINVAL`，这意味着：

*由 mutex 指定的值不引用已初始化的 mutex 对象。*

# asp.net - 从表内的给定列表中搜索各种数字

> ID：13110662
> 
> 赞同：-1
> 
> 时间：2012-10-28T16:25:35.543
> 
> 标签：asp.net, sql-server

我有一个简单的问题，我找不到任何参考，我将不胜感激。我有一个从客户端发送到服务器的 user_id 列表 - 例如 - (1,2,3,4)，我想在组表中搜索每个组有多少次将这些用户放入其中。组表的列是：group_id、group_name、user_id

我希望结果显示每个组名和搜索列表数字中出现的次数。

我也想显示它是否不为 0。

例子：

```
groupName     NumOfCustomersFromTheSentListThatAreAttachedToTheGroup
  A                   0
  B                   3 
```

我在想这样的事情： select group_id,COUNT(userID) FROM userByGroup where userID in (1,2,3,4) group by group_id;

但后来我有两个问题：

1.  我看不到那些没有外表的（因为 WHERE）
2.  我得到了每次出场的记录，我想要每个组的记录

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T18:20:01.353

我假设您有一个单独的组表 [Groups] 和一个将用户映射到组 [UserGroups] 的单独表。如果是这种情况，你应该能够摆脱这个：

```
select group_id, (select COUNT(user_id) from [UserGroups] where [UserGroups].group_id = [Groups].group_id and [UserGroups].user_id in (1,2,3,4)) NumberOfUsers from [Groups] 
```

如果没有，那么您必须像这样子查询原始表：

```
select group_id, (select COUNT(user_id) from [Groups] g2 where g2.group_id = [Groups].group_id and g2.user_id in (1,2,3,4)) NumberOfUsers from [Groups] 
```

# security - 通过 HTTP 强制 HTTPS

> ID：13110663
> 
> 赞同：1
> 
> 时间：2012-10-28T16:25:47.587
> 
> 标签：security, .htaccess, http, https, rewrite

所以我想强制用户访问我页面的 https 版本而不是 http。根据[这篇](https://stackoverflow.com/questions/8476324/using-https-instead-of-http)文章，我所要做的就是：

```
RewriteEngine On 
RewriteCond %{SERVER_PORT} 80 
RewriteRule ^(.*)$ https://www.yourdomain.com/$1 [R,L] 
```

但是*我*的站点位于主目录中的一个文件夹中，所以它位于`www.domain.com/Folder`. 那么这个htaccess代码应该放在主目录还是子目录中。因为我不想改变访问主站点的方式，只有文件夹。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T16:29:44.620

这是一种不太好的解决方法，尤其是在您可以访问 httpd.conf 的情况下。更好的方法是创建*两个*虚拟主机。一个用于标准端口 80 的东西，它只是无条件地重定向到 SSL 版本，例如在伪 .conf 谈话中：

```
<VirtualHost example.com:80>
   RedirectPermanent / https://example.com
   DocumentRoot /some/fake/path
</VirtualHost>

<VirtualHost example.com:443>
   normal site stuff here...
</VirtualHost> 
```

即使配置混乱禁用 .htaccess 文件，这也具有使重定向可行的优势，并且如果 SSL 因任何原因而死，则提供虚假/不存在的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T16:32:28.553

您可以将其保留在根目录中，但将其更改为：

```
RewriteRule ^(your-directory/.*)$ https://www.yourdomain.com/$1 [R,L] 
```

但请记住，在重定向发生之前，带有可能敏感数据的 cookie 和查询参数已经以明文形式发送，因此如果您使用 cookie ，请记住使用[安全 cookie 属性。](http://en.wikipedia.org/wiki/HTTP_cookie#Secure_cookie)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-30T02:28:58.913

如果您从 http 重定向到 https，您的网站可能容易受到攻击。看看这个以获得更多信息。

[http://www.thoughtcrime.org/software/sslstrip/](http://www.thoughtcrime.org/software/sslstrip/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-25T04:01:30.637

“强制 ssl”似乎很愚蠢，直到他们以“站点验证”的名义修复它在浏览器中打开的巨大安全漏洞，这没有真正的基础，并且有可能被流氓 CA、流氓状态或腐败滥用。（而且“验证”无论如何都是没有用的，不是基于用户的意愿，也不是任何人真正在查看这些网站——那里有很多带有“有效”证书的网络钓鱼网站！）

关于 SSL 的错误信息太多了

您使用自签名证书获得**相同**的加密，但浏览器告诉用户您的网站是“不受信任的”（当然没有依据 - “未检查”或“不可验证”将是任何警告实际上应该说的 - 警告需要提供信息不是让用户感到害怕的东西，他们中的大多数人甚至在没有阅读其余警告的情况下关闭它们！）

在浏览器中解决此问题之前，我完全不建议在网站上下文中使用 SSL。

同时，我可以建议忘记端口 443 并实现自己的加密层（如果不需要浏览器，也可以使用 ssh 之类的东西）

# php - 如何确定是否设置了传递引用变量？

> ID：13110667
> 
> 赞同：12
> 
> 时间：2012-10-28T16:26:21.003
> 
> 标签：php

对于声明如下的任意函数：

```
function foo($first, &$second = null) {
    // if ($second is assigned) {
    //     Work with $second
    // }
} 
```

如何确定`$second`在调用时是否确实分配给变量，例如：

```
foo('hello', $second); 
```

对比

```
foo('hello'); // Notice &$second is unassigned 
```

试过了`isset()`，`is_null()`但它们似乎不起作用。

### 更新：

在这里创建了一个[测试脚本](http://codepad.org/HHaVoXrc)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T12:09:55.843

我的理解是，您希望实现一个实现类似 的函数，`preg_match`如果通过，第三个参数将填充内存模式。

在内部，PHP 函数使用一个名为`zend_parse_parameters()`;的函数。它接受格式字符串和可变数量的参数，这些参数将填充调用参数的元数据。如果未传递参数（例如，当它是可选的），则元数据不可用，因此很容易检测到。

回到 PHP 本身，不幸的是没有这样的东西`func_arg_used($var)`可以告诉你是否`$var`作为函数参数传递；也许这对语言来说是一个有趣的贡献，但在那之前你必须满足于更古老的东西:)

```
if (func_num_args() > 1) {
    // $second was passed and can be used to populate
} 
```

更改函数的签名时可能需要小心，尤其是在`$second`; 前面添加参数时。但是，这自然不应该经常发生，因为它肯定会破坏依赖函数。最后添加更多参数对上面的代码没有影响。

有两种方法可以使用：

1.  [`ReflectionFunction`](http://au1.php.net/manual/en/class.reflectionfunction.php)- 开发人员的闪亮新玩具，它允许您自省您的功能并确定签名是否从创建时更改。不过，谨慎使用它，内省并不便宜，尤其是考虑到替代方法。

2.  不起眼的代码注释——代码监管的低调形式；一条简单的线说`// IMPORTANT - don't add arguments before $second`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T18:30:31.067

我认为 Jack 使用[func_num_args](http://www.php.net/func_num_args) () 的建议非常好。

```
function foo($first, &$second = null) {
    if (func_num_args() > 1) {
        //$second MUST be assigned
    }
} 
```

这可以正确检测何时`$second`引用了调用范围的符号表中存在的变量，但它的变量值为 null。

```
$second = null;
foo('hello', $second); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-28T18:10:54.210

[为我工作](http://codepad.org/EP9sToyO)：

```
<?php

function bool_str($b)
{
    return ($b ? "true" : "false");
}

function foo($first, &$second = null)
{
    echo bool_str(isset($first)) . " " . bool_str(isset($second)) . " " .
         bool_str(is_null($first)) . " " . bool_str(is_null($second)) . "\n";
}

$a = 1;
$b = 2;

foo($a, $b);
foo($a);

?> 
```

输出：

```
true true false false
true false false true
     ^^^^^       ^^^^ 
```

这正是我所期望的，即你可以同时使用`isset`和`is_null`这里。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-28T17:24:41.990

你不能（据我所知）使用 isset 来区分 NULL 和 Undefined。您可以将 $second 的默认值设置为其他永远不会使用的随机值。

```
define('UNDEFINED', -19181818);

function foo($first, &$second = UNDEFINED) 
{
 if($second==UNDEFINED)
 {
  etc..
 }
} 
```

# visual-studio-2010 - 如何在 Windows 窗体应用程序中对 Visual Studio 中的字体进行抗锯齿处理？

> ID：13110677
> 
> 赞同：2
> 
> 时间：2012-10-28T16:27:41.667
> 
> 标签：visual-studio-2010

[在此处输入链接描述](http://i46.tinypic.com/33x79kk.png)是否有人知道反别名字体的代码，以便项目看起来更专业。告诉我代码以及将其插入项目的位置。截至目前，字体看起来锯齿状编程语言是视觉 C# 4.0 .net 和 IDE 是 VS 2010

例如，这是一个标签1，我需要将什么插入到反别名中

```
this.label1.AutoSize = true;
this.label1.Font = new System.Drawing.Font("Segoe UI", 8.25F, System.Drawing.FontStyle.Regular, System.Drawing.GraphicsUnit.Point, ((byte)(0)));
this.label1.Location = new System.Drawing.Point(189, 187);
this.label1.Name = "label1";
this.label1.Size = new System.Drawing.Size(31, 13);
this.label1.TabIndex = 0;
this.label1.Text = "from"; 
```

[为什么这种字体看起来如此清晰和流畅，而 Windows 形式的字体看起来不那么好](http://www.smashingmagazine.com/2008/11/24/15-beautiful-high-quality-free-fonts/)

# cocos2d-iphone - 如何更新 CCSpriteBatchNode 中所有精灵的位置？

> ID：13110683
> 
> 赞同：0
> 
> 时间：2012-10-28T16:28:28.860
> 
> 标签：cocos2d-iphone, ccsprite, ccspritebatchnode

我有一个`CCSpriteBatchNode`包含 30 个精灵。我想将所有的精灵移动一些 deltaX。我怎样才能做到这一点？

这是我到目前为止所尝试的：

```
for (CCSprite *sprite in myBatchNode.children) 
    sprite.position = ccpAdd(sprite.Position, ccp(deltaX, 0.0)); 
```

虽然这可行，但我想知道是否有更有效的方法可能不涉及显式访问批处理节点中的每个节点。请注意，我不想移动批处理节点本身。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T16:51:12.907

不会

```
myBatchNode.position.x += deltaX; 
```

为你做同样的事吗？

# ios6 - iOS 6 模拟器看起来不像 iPhone

> ID：13110686
> 
> 赞同：1
> 
> 时间：2012-10-28T16:29:15.560
> 
> 标签：ios6

由于某种原因，我的 iOS iPhone 模拟器看起来不像 iPhone。现在它看起来更像是一台 iPad。就在昨天，根据我的设备选择，它看起来像 iPhone4/5。

这是一个奇怪的外观示例：[http ://cl.ly/KUZ2](http://cl.ly/KUZ2) ![在此处输入图像描述](../Images/d32bb11ffb39a7823b5515d3aa8f312c.png)

有谁知道如何让它看起来像一个 iPhone？我想要这个来捕捉演示镜头。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T18:15:01.823

我观察到，如果模拟器在非 Retina 屏幕上启动，它会显示此视图。如果我在视网膜屏幕上运行相同的应用程序和相同的模拟器，它将显示实际的 iPhone 4/5 帧。

如果您没有 Retina MBP，您可以尝试在 Mac 上启用 HiDPI 模式，然后重新启动模拟器。但我不确定这是否会奏效。请参阅：[如何在非视网膜显示器上模拟视网膜显示器（HiDPI 模式）？](https://stackoverflow.com/a/12124577/462264)

# asp.net - 会话变量丢失 mvc

> ID：13110692
> 
> 赞同：2
> 
> 时间：2012-10-28T16:29:48.057
> 
> 标签：asp.net, asp.net-mvc-3, iis-7.5, asp.net-mvc-3-areas

我有一个 MVC 3 应用程序，它在用户登录应用程序时使用 asp 验证，验证成功并在会话变量中保存用户名。

在这里一切正常。

然后在 AccountController 我设置一个 RedirectionToAction，到另一个控制器，这里会话变量丢失。

```
**//HERE THE VARIABLES ARE LOST AND AN ERROR HAPPENS**
return RedirectToAction("menuOtbr", "Menu", new { area = "Configuracion" }); 
```

我试过了

1.  从 InProc 更改为 ServerState 并且问题仍然存在，
2.  停用我的 AV。
3.  添加受保护的**void Session_Start(){}**没有任何反应。会话不会再次启动或重新启动。

4.  其他许多建议几乎所有与此相关主题发表的文章都被我阅读并应用了。

这是我的代码：

```
 [HttpPost]
    public ActionResult LogOn(LogOnModel model, string returnUrl)
    {
        if (ModelState.IsValid)
        {
            //  Se inicializa variables para el gestor de mensajes 
            SessionBag.Current.ErrorMessageAuto = new ArrayList();
            SessionBag.Current.ErrorMessage = null;
            SessionBag.Current.ErrorReturnTo = null;

            //Se verifica si el usuario es válido en el contexto de SQL Server, esto para guardar 
             //compatibilidad con el diseño de Merlin para Escritorio.
            Db_Conexion db = new Db_Conexion(model.UserName,model.Password);
            if (!db.connect())
            {
                model.UserName = null;
                model.Password = null;
                SessionBag.Current.ErrorReturnTo = "link";
                SessionBag.Current.ErrorMessage = db.ExceptionsText();
                return View("Mensajes");
            }
            db.close();

            if (Membership.ValidateUser(model.UserName, model.Password))
            {
                FormsAuthentication.SetAuthCookie(model.UserName, model.RememberMe);
                SessionBag.Current.UserName = model.UserName;

                if (Url.IsLocalUrl(returnUrl) && returnUrl.Length > 1 && returnUrl.StartsWith("/")
                    && !returnUrl.StartsWith("//") && !returnUrl.StartsWith("/\\"))
                {
                    return Redirect(returnUrl);
                }
                else
                {
                    **//HERE THE VARIABLES ARE LOST AND AN ERROR HAPPENS**
                    return RedirectToAction("menuOtbr", "Menu", new { area = "Configuracion" });
                }
            }
            else
            {
                ModelState.AddModelError("", "The user name or password provided is incorrect.");
            }
        }

        // If we got this far, something failed, redisplay form
        return View(model);
    } 
```

我在 root 的项目中有帐户控制器，而另一个控制器则由区域构成。

![项目结构](../Images/04b7dbc7c34c9a2fdf5b12845d732850.png)

花了将近 10 天的时间试图解决这个问题。任何想法，帮助将非常感激。

在部署或生产启动时也会发生同样的错误。

这篇文章[丢失我的会话变量 - 什么异常可能导致会话丢失？](https://stackoverflow.com/questions/3839894/losing-my-session-variables-what-exception-might-cause-sessions-to-be-lost/13027555)

说一些 IIS 配置。但并没有准确解释需要配置哪些东西。

SessionBags 代码

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Dynamic;

namespace ParadigmaNet.Infraestructure
{
public sealed class SessionBag : DynamicObject
{
    private static readonly SessionBag sessionBag;

    static SessionBag()
    {
        sessionBag = new SessionBag();
    }

    private SessionBag()
    {
    }

    private HttpSessionStateBase Session
    {
        get { return new HttpSessionStateWrapper(HttpContext.Current.Session); }
    }

    public override bool TryGetMember(GetMemberBinder binder, out object result)
    {
        result = Session[binder.Name];
        return true;
    }

    public override bool TrySetMember(SetMemberBinder binder, object value)
    {
        Session[binder.Name] = value;
        return true;
    }

    public override bool TryGetIndex(GetIndexBinder
           binder, object[] indexes, out object result)
    {
        int index = (int)indexes[0];
        result = Session[index];
        return result != null;
    }

    public override bool TrySetIndex(SetIndexBinder binder,
           object[] indexes, object value)
    {
        int index = (int)indexes[0];
        Session[index] = value;
        return true;
    }

    public static dynamic Current
    {
        get { return sessionBag; }
    }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T16:54:26.383

与其尝试调试会话包，不如简化它。当用户登录时，只需设置 Session["test"]= DateTime.Now

然后直接从每个控制器写出来。

如果新会话没有开始，我不相信您的会话会丢失并且倾向于认为这是一个实施问题。

当您认为会话 ID 丢失时，是否会在每个请求中发送会话 ID？我猜是这样，因此您没有看到创建新会话的原因。

如果上面的测试有效，那么您就知道这是一个 sessionbag 实现问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T22:24:48.140

经过几天和几个小时的测试，在 web.config 上发现了一些问题。

最近我们将我们的应用程序从 MVC3 更改为 MVC4，并发现启动结构上的 web.config 之间存在一些差异，我们进行了一些更改，删除了一些键并添加了其他键。

之后一切正常。

我们生成一个干净的 MVC4 应用程序，然后将 web.config 与旧的 web.config 进行比较，然后删除一些键并修改其他键。

# c++ - 在 c/c++ 中显示 txt 文件中的单词

> ID：13110693
> 
> 赞同：1
> 
> 时间：2012-10-28T16:29:48.400
> 
> 标签：c++, c

我有一个小问题。我有一个只包含英文单词的文本文件。我只想显示文件中的单词，忽略空格。这是代码：

```
#include<iostream.h>
#include<conio.h>
#include<fstream.h>
#include<stdio.h>
#define max 50
void main()
{
    clrscr();
    char output;
    FILE *p;
    char a[max];
    int i=0;
    p=fopen("thisfile.txt","r");
        while(1)
        {
            char ch=fgetc(p);
            if(ch==EOF)
            {
                break;
            }
            else if(ch==' ')
            {
                cout<<a;
                delete [] a;
                            i=0;
            }
            else
            {
                a[i++]=ch;
            }
        }
    fclose(p);
    getch();
} 
```

现在我在输出中得到了一些意想不到的字符。你能说说问题出在哪里吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T16:32:10.730

这是一个*非常*简单的解决方案：

```
#include <string>
#include <fstream>
#include <iostream>

int main()
{
    std::ifstream infile("thisfile.txt");

    for (std::string word; infile >> word; )
    {
        std::cout << "Got one word: " << word << std::endl;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T16:35:54.823

这是您可以遍历单词的一种方法：

```
#include <fstream>
#include <iostream>
#include <ostream>
#include <iterator>
#include <string>

int main()
{
  std::ifstream file("test.txt");
  std::istream_iterator<std::string> begin(file), end;
  for(; begin!= end; ++ begin)
    std::cout<< *begin<< '\n';
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T16:49:32.983

我喜欢简洁明了：

```
#include <iostream>
#include <iterator>
#include <fstream>
#include <algorithm>

int main() {
   std::copy(std::istream_iterator<std::string>(std::ifstream("test.txt") >> std::ws),
             std::istream_iterator<std::string>(),
             std::ostream_iterator<std::string>(std::cout));
} 
```

当然，您可能想在单词之间打印一些东西......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-28T16:37:57.437

你为什么不试试这个：

```
#include <iostream>
#include <fstream>
#include <string>
#include <conio.h>

using namespace std;

int main() {
   clrscr();
   string s;
   ifstream in("file.txt");

   while(in >> s) {
     cout << s << endl;
   }

   in.close();

   return 0;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-28T16:32:51.520

您的某些变量未初始化。（顺便说一句，`fgetc`返回一个**`int`**，对 进行测试很重要`EOF`）标准C中更简单的解决方案：

```
#include <stdio.h>

int c;

while ((c = getchar()) != EOF) {
     if (c == ' ')
         putchar('\n');
     else
         putchar(c);
} 
```

# cocos2d-iphone - cocos2d/box2d：覆盖/忽略特定对象的 box2d 位置

> ID：13110695
> 
> 赞同：0
> 
> 时间：2012-10-28T16:29:50.770
> 
> 标签：cocos2d-iphone, box2d-iphone

我有一个位于中央的 GameCharacter，它只与棱柱形关节的垂直运动（跳跃）绑定。在初始化时，我将各种 GameObstacles 加载到屏幕外，当“生成”时，它们会从屏幕外移向角色。最好我想用 cocos2d 位置更新而不是 box2d 速度控制来控制 GameObstacle 运动的重新定位。

基本上，我希望我的 GameCharacter 对 GameObstacle 做出反应，但我不希望 GameObstacle 对 GameCharacter 做出反应，并且我希望能够在 box2d 之外更改 GameObstacle 的位置。

我尝试只更新 GameCharacter 身体而不是所有身体，但显然我看到我的障碍精灵在没有身体的情况下移动。我不认为碰撞过滤是要走的路。任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T21:30:13.070

在这里回答我自己的问题....

我认为运动体是这里的诀窍。我认为最好不要以非物理方式（如 settransform）移动身体，而是使用线性速度。我>认为<我可能会使用一些物理学将我计划的运动转换为线性速度......

# osgi - 使用 Gradle 创建带有依赖 Jar 的 Osgi Bundle

> ID：13110696
> 
> 赞同：5
> 
> 时间：2012-10-28T16:29:57.900
> 
> 标签：osgi, gradle, apache-felix

我想创建一些依赖于其他（第 3 方）jar 的包（这是否是一个好习惯是另一个话题）

我可以使用 gradle 生成一个胖 jar（它具有所有依赖的 jar）和 osgi 清单

我的项目布局在 libs/ 文件夹中存储 jar 制作 jar 后，第 3 方 jar（例如 ibm.jar）位于 jar 的根目录中。

我将我的 gradle 任务是使用带有一些基本 osgi 指令的 osgi 插件，我仅手动将导出包指定为我的程序包，而不是其他 3 个 jar

但是，当我尝试安装该捆绑包时，它显示错误

```
Error starting file:****.jar (org.osgi.framework.BundleException: Unresol
ved constraint in bundle ***** [24]: Unable to resolve 24.0: missi
ng requirement [24.0] osgi.wiring.package; (osgi.wiring.package=com.ibm.mq))
org.osgi.framework.BundleException: Unresolved constraint in bundle **** [24]: Unable to resolve 24.0: missing requirement [24.0] osgi.wiring.package; (osgi.wiring.package=com.ibm.mq)
        at org.apache.felix.framework.Felix.resolveBundleRevision(Felix.java:382
6)
        at org.apache.felix.framework.Felix.startBundle(Felix.java:1868)
        at org.apache.felix.framework.Felix.setActiveStartLevel(Felix.java:1191)

        at org.apache.felix.framework.FrameworkStartLevelImpl.run(FrameworkStart
LevelImpl.java:295)
        at java.lang.Thread.run(Unknown Source) 
```

摇篮

```
task makeJar(type: Jar) {

from { 'libs/'}
manifest = osgiManifest {
        classesDir = sourceSets.main.output.classesDir
        classpath = sourceSets.main.runtimeClasspath
        instruction 'Export-Package','abc.def'  
        instruction 'Bundle-Vendor', 'ABC'
        instruction 'Bundle-Activator', 'abc.def.Activator'
        instruction 'Bundle-ClassPath', '.,*.jar'
        instruction 'Include-Resource', '@**/*.jar'
    }
} 
```

我在下面尝试过，但它不起作用，似乎是 gradle [http://issues.gradle.org/browse/GRADLE-1107的问题](http://issues.gradle.org/browse/GRADLE-1107)

```
'Include-Resource', 'libs/' 
```

我试图在类路径中明确设置它们，但问题仍然存在

```
Bundle-ClassPath: '.,*.jar' 
```

我可以看到我需要的包 (com.ibm.mq) 在 Import-Package 中：对吗？

我的问题是：正确的清单应该是什么？gradle（基于 BND）是否可以理解依赖关系并自动创建清单，如果可以，需要什么设置？

*编辑*：有了这样的 gradle 指令，我得到了同样的错误（我检查了清单中出现的捆绑类路径）

```
instruction 'Bundle-ClassPath', """.,felix.jar,org.springframework.aop-3.0.5.RELEASE.jar,org.springframework.asm-3.0.5.RELEASE.jar,c3p0-0.9.1.2.jar,com.springsource.net.sf.cglib-2.2.0.jar,org.springframework.context-3.0.5.RELEASE.jar,org.springframework.transaction-3.0.5.RELEASE.jar,com.ibm.mqjms.jar,org.springframework.beans-3.0.5.RELEASE.jar,org.springframework.core-3.0.5.RELEASE.jar,commons-io-1.4.jar,org.springframework.expression-3.0.5.RELEASE.jar,ojdbc14.jar,org.springframework.jdbc-3.0.5.RELEASE.jar,connector.jar,commons-lang-2.4.jar,commons-logging.jar,com.ibm.mq.jar,log4j-1.2.15.jar,org.springframework.web-3.0.5.RELEASE.jar""" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T08:11:42.903

Bnd 不对目录或文件使用通配符（有充分的理由）。如果您需要对文件进行通配符扩展，请使用 ${lsa;(dir);(match)} 宏。有关详细信息，请参见 www.aqute.biz/Bnd。

# javascript - 如何根据更改的父类获取元素ID

> ID：13110699
> 
> 赞同：0
> 
> 时间：2012-10-28T16:30:07.197
> 
> 标签：javascript, jquery

如何在当前 div 中通过 id 获取第一个元素？意味着当 class="uc-current" 转到其他元素时，它会在新元素中获得第一个 id="c" 的元素。

我想做这样的事情。

```
function fani(){document.getElementById('uc-current c').className ='c-back';} 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T16:35:40.210

您可能想使用类名：`<div class="c">...</div>`.

然后你做：

```
document.querySelector('#uc-current .c').className = 'c-back'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T16:48:50.540

你永远不需要这样做。ID 应该是唯一的，因此只需使用 getElementById 就足够了。但我曾在违反此规则的第 3 方网站上工作过。所以如果你发现自己处于这种情况，你可以试试这个：

```
function firstMatchingID(parentElement, id){
    var nodes = parentElement.children ;
    var ln = nodes.length ;
    for(var i = 0; i<ln ; i++){
        if (nodes[i].id == id){
            return nodes[i] ;
        }
    }
}

var parentElement = document.getElementsByClassName("c-back")[0];  // Example only. getElementsByClassName is not supported by all browsers
firstMatchingID(parentElement, "uc-current") ; 
```

如果你使用 jQuery，你可以这样做：

```
$(".c-back>#uc-current:eq(0)"); 
```

但只是看着那个选择器让我哭了一点。由于不得不多次使用重复使用的 ID，我终生受了伤。有一天，我要抓紧抓捕开发人员。

# image - 是否有可编写脚本的工具来应用类似 instagram 的效果？

> ID：13110700
> 
> 赞同：1
> 
> 时间：2012-10-28T16:30:16.913
> 
> 标签：image, image-processing, instagram

我正在制作一个从互联网下载 CC 图片的脚本。不幸的是，我想对它们应用一些效果。

你知道有什么工具可以提供吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T16:31:52.407

[ImageMagick](http://imagemagick.org)是可编写脚本的。它包括一些内置的过滤器，您可以通过提供叠加和遮罩图像以及自定义像素处理功能来构建更多种类的过滤器。

# wcf - WCF 和多个回调合同可能

> ID：13110707
> 
> 赞同：2
> 
> 时间：2012-10-28T16:31:04.897
> 
> 标签：wcf

我是 WCF 的新手。我正在寻找多个回调合同的出路，可能或不像下面

```
[ServiceContract (
CallbackContract = typeof (CallbackContract_1),
CallbackContract = typeof (CallbackContract_2),
CallbackContract = typeof (CallbackContract_3))
]
public interface SomeWcfContract {} 
```

我正在搜索谷歌并找到了出路，就像

```
interface ICallbackContract1
{...}

interface ICallbackContract2 : ICallbackContract1
{...}

[ServiceContract(CallbackContract = typeof(ICallbackContract1))]
interface IMyBaseContract
{...}

[ServiceContract(CallbackContract = typeof(ICallbackContract2))]
interface IMySubContract : IMyBaseContract
{...}

or

interface ICallbackContract1
{...}
interface ICallbackContract2
{...}
interface ICallbackContract3 : ICallbackContract2,ICallbackContract1
{...}

[ServiceContract(CallbackContract = typeof(ICallbackContract1))]
interface IMyBaseContract1
{...}
[ServiceContract(CallbackContract = typeof(ICallbackContract2))]
interface IMyBaseContract2
{...}
[ServiceContract(CallbackContract = typeof(ICallbackContract3))]
interface IMySubContract : IMyBaseContract1,IMyBaseContract2
{...} 
```

我只需要知道多重回调合同是否有其他出路。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T05:03:02.453

单个服务合同不能有多个回调合同（这是 1:1 关系，回调合同可以为空）。正如您发现的那样，这种替代方案（使用多个“前向”合约，每个合约都有自己的回调合约）应该可以工作，尽管我没有尝试过（您可以编写一个简单的程序来测试它）。

# ruby - 如何阻止 sinatra 重写我的标题名称？

> ID：13110708
> 
> 赞同：6
> 
> 时间：2012-10-28T16:31:21.550
> 
> 标签：ruby, http-headers, sinatra, rack, p3p

Sinatra 是驼峰式所有标题名称，导致“P3P”出现问题。代码：

```
require 'rubygems'
require 'sinatra'

configure :production do
  # Configure stuff here you'll want to
  # only be run at Heroku at boot

  # TIP:  You can get you database information
  #       from ENV['DATABASE_URI'] (see /env route below) 
end

# Quick test
get '/track' do
  #response.headers['Cache-Control'] = 'public, max-age=300'
  response.set_cookie("visited",1)
  response['this-that'] = "CP=\"CAO DSP COR CURa ADMa DEVa OUR IND PHY ONL UNI COM NAV INT DEM PRE\""
  response['P3P'] = "CP=\"CAO DSP COR CURa ADMa DEVa OUR IND PHY ONL UNI COM NAV INT DEM PRE\""
  "SUCCESS"
end 
```

给我吗

```
* About to connect() to localhost port 9393 (#0)
*   Trying 127.0.0.1... connected
> GET /track HTTP/1.1
> User-Agent: curl/7.22.0 (x86_64-pc-linux-gnu) libcurl/7.22.0 OpenSSL/1.0.1 zlib/1.2.3.4 libidn/1.23 librtmp/2.3
> Host: localhost:9393
> Accept: */*
> 
< HTTP/1.1 200 OK 
< X-Frame-Options: sameorigin
< X-Xss-Protection: 1; mode=block
< Content-Type: text/html;charset=utf-8
< This-That: CP="CAO DSP COR CURa ADMa DEVa OUR IND PHY ONL UNI COM NAV INT DEM PRE"
< P3p: CP="CAO DSP COR CURa ADMa DEVa OUR IND PHY ONL UNI COM NAV INT DEM PRE"
< Content-Length: 7
< Server: WEBrick/1.3.1 (Ruby/1.9.2/2012-04-20)
< Date: Sun, 28 Oct 2012 16:26:47 GMT
< Connection: Keep-Alive
< Set-Cookie: visited=1
< 
* Connection #0 to host localhost left intact
* Closing connection #0
SUCCESS 
```

如您所见`this-that`，被重写为`This-That`并被`P3P`重写为`P3p`. 这是我的宝石清单：

***当地宝石***

```
addressable (2.3.2)
bundler (1.2.1)
excon (0.16.7)
heroku (2.32.14)
heroku-api (0.3.5)
launchy (2.1.2)
mime-types (1.19)
netrc (0.7.7)
rack (1.4.1)
rack-protection (1.2.0)
rake (0.9.2.2)
rest-client (1.6.7)
rubygems-bundler (1.1.0)
rubyzip (0.9.9)
rvm (1.11.3.5)
shotgun (0.9)
sinatra (1.3.3)
tilt (1.3.3) 
```

如何阻止 sinatra 重写 cookie 名称。有没有我可以做的猴子补丁？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-28T17:43:00.527

[HTTP 标头名称应该不区分大小写](https://stackoverflow.com/questions/5258977/are-http-headers-case-sensitive)，所以理论上这应该不是问题——`P3p`应该和`P3P`.

在您的情况下，标头正在[由 Webrick 服务器更改](https://github.com/ruby/ruby/blob/v1_9_2_381/lib/webrick/httpresponse.rb#L172)，而不是 Sinatra。更改为另一台服务器，例如 Thin（不会更改标头）将是最简单的解决方法（使用 Thin 而不是 Webrick 还有其他好处）。

如果你真的需要继续使用 Webrick，你可以考虑修补[`WEBrick::HTTPResponse`](https://github.com/ruby/ruby/blob/v1_9_2_381/lib/webrick/httpresponse.rb). 您必须小心，因为 Webrick 将标头名称小写以处理重复项，因此您可能必须考虑这一点。

# go - 在 Go 中升级到 TLS 的连接

> ID：13110713
> 
> 赞同：8
> 
> 时间：2012-10-28T16:31:38.130
> 
> 标签：go, ssl

我有一个打开的 TCP 连接，并使用这样的 for 循环从中读取

```
for {
  // tx.Text is of type textproto.Conn
  // the underlying connection is stored in tx.Conn
  l, err := tx.Text.Reader.ReadLine()

  // do stuff with the text line ...
} 
```

现在我想像这样升级到 TLS 的连接（`TlsConf`包含加载的证书`tls.LoadX509KeyPair`）

```
tx.Conn = tls.Server(tx.Conn, tx.Server.Conf.TlsConf)
tx.Text = textproto.NewConn(tx.Conn) 
```

当我这样做时，当服务器尝试握手时，客户端出现分段错误。我正在实现一个 SMTP 服务器，并正在使用该标志使用[swaks对其进行测试。](http://www.jetmore.org/john/code/swaks/)[swaks](http://www.jetmore.org/john/code/swaks/)`-tls`的终端输出如下

```
-> STARTTLS
<-  220 Start TLS
Segmentation fault: 11 
```

由于 swaks 是一个经过测试的工具，并且与我之前的 nodeJS SMTP 实现一起使用，我不怀疑错误出在客户端。

我做错了什么或缺少什么？

PS：当从现有的不安全连接启动 TLS 连接时，究竟会发生什么？客户端是在不同的端口上建立新连接还是重用连接？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-31T10:44:06.010

**以下是将 net.conn 升级到 tls.con 的方法：**

1) 在您的代码中的某处，您定义了这些变量

```
var TLSconfig *tls.Config
...
// conn is a normal connection of type net.Conn
conn, err := listener.Accept()
... 
```

2）在上面的某个地方初始化TLSConfig，做这样的事情

```
cert, err := tls.LoadX509KeyPair("/path/to/cert", "/path/to/key")
if err != nil {
    // ...
}
TLSconfig = &tls.Config{
Certificates: []tls.Certificate{cert}, 
ClientAuth: tls.VerifyClientCertIfGiven, 
ServerName: "example.com"} 
```

3）此时您正在读取/写入标准连接。

当客户端发出 STARTTLS 命令时，在您的服务器中执行此操作：

```
// Init a new TLS connection. I need a *tls.Conn type 
// so that I can do the Handshake()
var tlsConn *tls.Conn
tlsConn = tls.Server(client.socket, TLSconfig)
// run a handshake
tlsConn.Handshake()
// Here is the trick. Since I do not need to access 
// any of the TLS functions anymore,
// I can convert tlsConn back in to a net.Conn type
conn = net.Conn(tlsConn) 
```

接下来，您可能会使用新连接等更新缓冲区。

像这样测试你的服务器：

```
openssl s_client -starttls smtp -crlf -connect  example.com:25 
```

这允许您通过 tls 连接与服务器进行交互，您可以发出一些命令等。

## 更多关于 Go 中的转换

我猜转换是 Go 如此强大的另一个原因！

[http://golang.org/ref/spec#Conversions](http://golang.org/ref/spec#Conversions)

[http://golang.org/doc/effective_go.html#conversions](http://golang.org/doc/effective_go.html#conversions)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T18:23:52.460

抛弃了 swaks，使用 Go 自己的 smtp.SendMail 构建了一个小工具来测试 TLS：

```
package main

import (
  "fmt"
  "net/smtp"
)

func main() {
  err := smtp.SendMail(
    "127.0.0.1:2525",
    nil,
    "src@test.local",
    []string{"dst@test.local"},
    []byte("Hello! Just testing."),
  )
  if err != nil {
    panic(err)
  }
} 
```

# javascript - 无法通过 Javascript 函数在记事本中打开文本文件

> ID：13110716
> 
> 赞同：0
> 
> 时间：2012-10-28T16:31:51.153
> 
> 标签：javascript

我无法通过下面的 Javascript 函数在记事本中打开文本文件。如果您想提供帮助，请运行此自解释脚本。谢谢。

```
 <script type="text/javascript">

  function RunURL(URL,Name) {
  window.open (URL,Name,
  "Width=1010,\
  Height=800,\
  Top=0,\
  Left=0,\
  Channelmode=0,\
  Titlebar=0,\
  Menubar=0,\
  Toolbar=0,\
  Directories=0,\
  Location=0,\
  Status=0,\
  Scrollbars=1,\
  Resizable=1,\
  Fullscreen=0");
  }

  </script> 
```

不幸的是，我无法将代码一次性发布...

```
 <html><form>

  <h2>Trying to open a text file in notepad for an Intranet app...</h2><br>

  First the easy one...<br>

  <input Type="button"; Value="Open Notepad"; OnClick="RunURL('file:///C:/Windows/system32/notepad.exe')";><br>

  <br>Now to open a text file so let's start with some common sense for the parameters as displayed in the buttons...<br>

  <input Type="button"; Value="?=C:\Test.txt"; OnClick="RunURL('file:///C:/Windows/system32/notepad.exe?=C:\Test.txt')";><br>
  <input Type="button"; Value="?=file:///C:/Test.txt"; OnClick="RunURL('file:///C:/Windows/system32/notepad.exe?=file:///C:/Test.txt')";><br>
  <input Type="button"; Value="?C:\Test.txt"; OnClick="RunURL('file:///C:/Windows/system32/notepad.exe?C:\Test.txt')";><br>

  <br>Desperation takes over!<br>

  <input Type="button"; Value="?open=file:///C:/Test.txt"; OnClick="RunURL('file:///C:/Windows/system32/notepad.exe?open=file:///C:/Test.txt')";><br>
  <input Type="button"; Value="?open=C:\Test.txt"; OnClick="RunURL('file:///C:/Windows/system32/notepad.exe?open=C:\Test.txt')";><br>
  <input Type="button"; Value="?open=C:/Test.txt"; OnClick="RunURL('file:///C:/Windows/system32/notepad.exe?open=C:/Test.txt')";><br>
  <input Type="button"; Value="?C:/Test.txt"; OnClick="RunURL('file:///C:/Windows/system32/notepad.exe?C:/Test.txt')";><br>

  <br>Could the file association alone trigger notepad to open it?<br>

  <input Type="button"; Value="file:///C:/Test.txt"; OnClick="RunURL('file:///C:/Test.txt')";><br>
  <input Type="button"; Value="C:/Test.txt"; OnClick="RunURL('C:/Test.txt')";><br>

  <br>Nope!<br>
  </form></html> 
```

也许我应该回去翻转汉堡...... :(

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-28T16:33:31.580

您不能使用 JavaScript 打开像这样的本地文件——一种确保世界各地的网站无法在您的计算机上执行任何他们想要的程序的安全机制。

如果允许浏览器执行`C:/Windows/system32/notepad.exe`，什么会阻止它调用`format c:`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T16:39:28.463

您可以像这样在记事本中打开文档：

```
RunURL('C:/Windows/system32/notepad.exe C:\Test.txt') 
```

**注意：**您必须使用 Windows 风格的目录分隔符 — **`\`**— 作为第一个`"notepad.exe"`参数。

* * *

**编辑：**正如*奥德*所说：

> 如果允许浏览器执行 C:/Windows/system32/notepad.exe，什么会阻止它调用格式 c:？

您将获得**记事本**本地副本的“下载” ，而不是执行它。

* * *

**编辑2：**也看看这个：

> [如何在客户端运行程序或批处理文件？](https://stackoverflow.com/questions/877774/how-can-i-run-a-program-or-batch-file-on-the-client-side)

# css - IE7 中的 CSS 菜单未显示完整内容

> ID：13110718
> 
> 赞同：1
> 
> 时间：2012-10-28T16:31:54.833
> 
> 标签：css, drop-down-menu, internet-explorer-7

我在 stackoverflow 上花了一个星期来寻找我的问题的解决方案。你能检查一下IE7中的小提琴吗？它在其他和更新的浏览器中运行良好。导航如下：中心生活/运动/“这里有问题”

[http://jsfiddle.net/6m3f3/1/](http://jsfiddle.net/6m3f3/1/)

感谢您提供任何可以帮助我的答案。

这些是公司内部网站，很抱歉，我不得不使用小提琴。

```
.menu-left{
width: 175px;
padding: 0;
margin:0;
float: left;
list-style-type: none;
}

.menu-left ul {
float: left;
width: 100%;
line-height: 1;
color: #FFFFFF;
background: #FF7200;
padding: 0;
margin: 0;
list-style-type: none;

menu-left a, .menu-left a:visited {
display: block;
width: 160px;
font-family: Arial, Helvetica, sans-serif;
font-size: small;
font-weight: bold;
font-style: normal;
text-decoration: none;
color: #FFFFFF;
text-indent: 15px; /* text position from left in first UL*/
margin: 0;
padding: 10px 0px 10px 0px;
list-style-type: none; 
```

只是 jsFiddle 上的一个示例，完整的代码

# php - 使用 Ajax 通过使用单元格单击事件动态创建的表访问数据库中的信息

> ID：13110719
> 
> 赞同：0
> 
> 时间：2012-10-28T16:31:56.227
> 
> 标签：php, ajax

我有一个使用 html PHP 和 Mysql 动态创建的表。我想使用 Ajax 从数据库中检索信息。

我找到的最接近我想做的例子是 [http://www.w3schools.com/PHP/php_ajax_database.asp](http://www.w3schools.com/PHP/php_ajax_database.asp)但这使用了一个下拉列表。

任何人都可以提供有关如何执行上述操作但使用表格的一些信息，因此您可以单击一个单元格，包含名称的单元格将被发送到数据库以检索特定数据。

```
 <?php
$default = "<img src='http://localhost/on.png' width='24' height='24'/>";
$default1 = "<img src='http://localhost/of.png' width='24' height='24'/>";
$con = mysql_connect("*****","*****","****");
if (!$con){
die("Can not connect: " . mysql_error());
}
mysql_select_db ("****",$con);
$sql= "select act.*
from user_activity as act
  inner join (
  select user_id, max(timestamp) as max_ts
  from user_activity
  group by user_id) as a on act.user_id=a.user_id and act.timestamp=a.max_ts";
$mydata = mysql_query($sql,$con);

echo "<table id='tfhover',table border=0>
<tr>
<th>Users</th>
<th>Status<th>
</tr>";
while($record = mysql_fetch_array($mydata)){
echo "<tr>";
echo "<td>" . $record['user_id'] . "</td>";
if (strtolower(trim($record['activity']))!=strtolower('LOGIN')){ 
echo "<td>" . $default1  . "</td>";
}else{

echo "<td>" . $default  . "</td>";

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T16:39:44.763

您可以将 ID 存储在数据属性中并根据请求使用它。

```
<table>
  <tbody>
    <tr>
      <td data-item-id="1">1</td>
      <td data-item-id="2">2</td>
    </tr>
  </tbody>
</table>

<script type="text/javascript">
  $('table').on('click', 'td', function() {
    var id = $(this).data('item-id');
    $.get('url', {id: id}, function() {
      //process
    });
  });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T17:01:59.597

您也可以只`onClick="showUser(str)"`在表格的 tr 内使用。

这是一个经过编辑的示例：

```
<?php   
//Test Data
$result = array(
1=>array('FirstName'=>'Peter','Lastname'=>'Griffin','Age'=>41,'HomeTown'=>'Quahog','Job'=>'Brewery'),
2=>array('FirstName'=>'Lois','Lastname'=>'Griffin','Age'=>40,'HomeTown'=>'Newport','Job'=>'Piano Teacher'),
3=>array('FirstName'=>'Joseph','Lastname'=>'Swanson','Age'=>39,'HomeTown'=>'Quahog','Job'=>'Police Officer'),
4=>array('FirstName'=>'Glenn','Lastname'=>'Quagmire','Age'=>41,'HomeTown'=>'Quahog','Job'=>'Pilot'),
);

//Your AJAX Responce
if(isset($_GET["q"])){

    if(array_key_exists($_GET["q"],$result)){
        echo "<table border='1'><th>Firstname</th><th>Lastname</th><th>Age</th><th>Hometown</th><th>Job</th></tr>";
        echo "<tr>";
        echo "<td>" . $result[$_GET["q"]]['FirstName'] . "</td>";
        echo "<td>" . $result[$_GET["q"]]['Lastname'] . "</td>";
        echo "<td>" . $result[$_GET["q"]]['Age'] . "</td>";
        echo "<td>" . $result[$_GET["q"]]['HomeTown'] . "</td>";
        echo "<td>" . $result[$_GET["q"]]['Job'] . "</td>";
        echo "</tr>";
        echo "</table>";
    }else{
        echo "No Results";
    }
    die;
}
?> 

<html>
<head>
<script>
function showUser(str)
{
    if (str=="")
    {
        document.getElementById("txtHint").innerHTML="";
        return;
    }
    if (window.XMLHttpRequest)
    {// code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp=new XMLHttpRequest();
    }
    else
    {// code for IE6, IE5
        xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }
    xmlhttp.onreadystatechange=function()
    {
        if (xmlhttp.readyState==4 && xmlhttp.status==200)
        {
            document.getElementById("txtHint").innerHTML=xmlhttp.responseText;
        }
    }
    xmlhttp.open("GET","index.php?q="+str,true);
    xmlhttp.send();
}
</script>
</head>
<body>

<table border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" width="100%">
  <?php foreach($result as $key=>$value){?>
    <tr onClick="showUser(<?php echo $key;?>)">
        <td width="50%">Get <?php echo $value['FirstName'];?></td>
    </tr>
 <?php } ?>
</table>

<br />
<div id="txtHint"><b>Person info will be listed here.</b></div>

</body>
</html> 
```

# html - 在新行中强制进行实时验证

> ID：13110720
> 
> 赞同：1
> 
> 时间：2012-10-28T16:31:59.500
> 
> 标签：html, prototypejs, livevalidation

我使用这个脚本来验证我的表单[livevalidation.com](http://livevalidation.com/)。这完美、简单且有效，但现在我遇到了一个问题，对于这个脚本，验证器消息出现在发生错误的对象旁边。我想将其强制到出现在下方的一侧，并且尽我所能，这是不可能的，尝试`\n` `\r`在行消息的开头添加，但没有任何反应，我尝试过`<br/>`但它不起作用。我该如何解决我的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T17:51:38.180

对于[http://livevalidation.com/上的示例](http://livevalidation.com/)

```
.LV_validation_message {
  display: block;
} 
```

足够的。对于您自己的表单样式，它取决于嗯...您的样式（也许您正在使用浮动元素或 clearfixes 或网格等）。

# objective-c - 围绕一个点等距创建一组新对象，但基于 uipinchgesture 触摸位置进行旋转

> ID：13110721
> 
> 赞同：0
> 
> 时间：2012-10-28T16:32:02.627
> 
> 标签：objective-c, cocoa-touch, cocos2d-iphone, box2d, uipinchgesturerecognizer

使用捏合手势，我将 sprite/box2d 主体拆分为 n 个形状。我确定使用方法创建形状的位置`equidistantPointsOnACircleForMidpoint`。我想根据捏合手势的触摸位置 ( `touchPoints`) 给出的（近似）旋转/移动来移动这些对象。

例如，如果将一个对象分成两个对象，我希望第一个新对象靠近一个手指结束触摸手势的位置，而不仅仅是相对于中点的 0° 和 180°。我不能只将它们放在捏合手势的坐标处，因为创建的新对象的数量从 2 到 10 不等。我已经展示了两个对象的问题，因为这是我能想到的最清晰的示例。

**我想对围绕一个圆圈等距放置的点应用旋转，所以起点是第一个捏合手势的位置。这可能就像将第一个点放在圆圈上作为第一个触摸位置一样简单。对于你们中的许多人来说，这可能是基本的数学。这不适合我——我不知所措，这就是我问这个问题的原因。**

我有捏手势触摸位置，并且我有同样布局的点 - 我想将两者结合起来；即布局的起点是pinchgesture中的第一个触摸坐标（如图）。

以下是我列出要点的方式：

```
-(NSArray*)equidistantPointsOnACircleForMidpoint:(CGPoint)midpoint numberOfPoints:(int)points withRadius:(double)radius pinchGestureTouchCoordinates:(NSArray*)touchPoints{

    //We need to prevent objects being placed outside the bounds of the screen.
    CGSize screenSize = [[CCDirector sharedDirector] winSize];

    NSMutableArray *pointsArray = [[[NSMutableArray alloc]init ] autorelease];

    if([touchPoints count]){
        NSLog(@"touchPoint at 0: %@", [touchPoints objectAtIndex:0]);

    }

    double step = ((M_PI * 2) / points);
    double x, y, current = 0;
    for (int i = 0; i < points; i++)
    {
        x = sin(current) * radius;
        y = cos(current) * radius;

        if (x+(midpoint.x*PTM_RATIO) > screenSize.width) {
            NSLog(@"WARNING: Width out of bounds");
        }
        if (y+(midpoint.y*PTM_RATIO) > screenSize.height) {
            NSLog(@"WARNING: Height out of bounds");
        }

        [pointsArray addObject:[NSNumber valueWithCGPoint:CGPointMake(x+(midpoint.x*PTM_RATIO), y+(midpoint.y*PTM_RATIO))]];

        current += step;
    }
    return pointsArray;
} 
```

现在发生了什么事：

![在此处输入图像描述](../Images/9d87818812da910b907718939892c62c.png)

我想要发生的事情： ![在此处输入图像描述](../Images/232f5b3c06747fc90947d067c869c1b3.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T08:23:49.823

您可以创建自己的类别，以便能够获取在 UIPinchGestureRecognizer 接口中声明的触摸数组

```
UITouch          *_touches[2]; 
```

然后，当您创建手势识别器时，您为其设置回调，它将接收识别器作为参数。使用类别方法，您可以获得每次触摸的所有信息（在这种情况下您需要位置）并处理它们以确定所需的旋转角度。

# actionscript-3 - 在as3中预检测抛物线与抛物线的碰撞

> ID：13110723
> 
> 赞同：0
> 
> 时间：2012-10-28T16:32:15.183
> 
> 标签：actionscript-3, collision

我有一个迷你游戏，它以一定的力和角度发射弹丸，并考虑了下拉力（重力）和恒定摩擦力（风摩擦）。这个想法是有一个像“蠕虫”这样的迷你游戏，你可以在其中射击和摧毁东西。

我得到了这个工作正常，但是对于小型快速弹丸，我遇到了它有时会遇到的典型问题。所以我在想也许我可以先用一条线预先绘制抛物线，然后检测它与其中一个对象（矩形）相交的位置。

我不太确定如何做到这一点，此时我实际上可以使用“lineTo”方法绘制一条非常准确的路径，但仅此而已，我不确定它对任何碰撞预计算是否有用。

提前致谢

# wcf - 如何从长期运行的 WCF 服务向 asp.net 页面提供状态更新

> ID：13110727
> 
> 赞同：1
> 
> 时间：2012-10-28T16:32:36.947
> 
> 标签：wcf, windows-services, asp.net-4.0

我有一个 asp.net 4 站点。我的客户想要转到一个页面并运行一个进程，将数据从他们的会计应用程序更新到他的网站。这个过程可能需要几个小时。我想实现从 Windows 服务托管的 WCF 服务。我正在查找有关其工作原理的信息，但我的客户还希望在运行时从该服务更新状态。我的问题是如何使用 WCF 服务实现这一点？是否可以？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T17:18:46.993

asp.net 网站和 wcf 服务可以共享一个数据库（SQL Server 或 no-sql），从 wcf 插入状态更新，从 asp.net 显示它们。

# asp.net-mvc - 使用单视图模型获取详细信息、编辑和列表

> ID：13110728
> 
> 赞同：0
> 
> 时间：2012-10-28T16:32:39.033
> 
> 标签：asp.net-mvc, model-view-controller, model-binding

我的视图模型看起来像这样：

```
public class CarViewModel {
    public CarModel Car { get; set; }
    public List<CarModel> Cars { get; set; }
} 
```

`CarModel`好像：

```
public class Car() {
    public string Make { get; set; }
    public string Model { get; set; }
    . . .
} 
```

我的目标是只有一个视图模型可以用于列表视图和单个视图。对于列表视图，我将合并 Cars 列表并在视图中使用它，同时忽略单个 Car 实体。

对于细节视图，情况正好相反。我的控制器将水合单个 Car 实体，视图将使用它并忽略列表。

这部分工作，但模型绑定很弱。

DRY（不要重复自己）和 SOC/SRP（关注点分离/单一责任主体）似乎在这里发生冲突。处理列表视图和详细信息视图的最佳方法是什么？我感觉答案是创建重复的视图模型，但如果我能提供帮助，我不想重复代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T16:47:34.443

看来你有点想多了。只需有一个名为 CarViewModel 的类，它看起来像这样：

```
public class CarViewModel() {
    public string Make { get; set; }
    public string Model { get; set; }
    . . .
} 
```

对于您的 Detail/Edit/Create 视图，您的视图将是`CarViewModel`. 对于您的列表视图，只需将列表传递`CarViewModel`给视图。在列表视图上制作模型类型`IEnumerable<CarViewModel>()`。这会从您当前建议的前进路径中删除一个类，并保持一个视图模型负责与 Car 相关的所有事情。

**编辑**

问题是 - “如果我的列表视图模型需要更多信息而不仅仅是汽车列表”。在这种情况下，为列表视图创建一个独立的视图模型是有意义的，因为它需要额外的信息。

```
public class ListOfCarsViewModel(){
   public IEnumerable<CarViewModel> Cars {get;set;}
   public string SomeOtherProperty {get;set;}
   public bool SomeFlagProperty {get;set;}
} 
```

请注意，我们不会重复自己，因为我们仍在将汽车列表传递给视图。然而，由于我们需要的不仅仅是汽车列表，因此这个视图模型需要拥有更多的属性而不仅仅是一个列表。如果您的代码/视图需要这些信息，那么拥有多个视图模型并没有错。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T11:45:06.623

您也可以像这样继承您的基类，您的主要模型是

`public class Car() { public string Make { get; set; } public string Model { get; set; } . . . }` 和你的模型课

`public class CarViewModel:Car { public List<CarModel> Cars { get; set; } }`

# haskell - 列出操作

> ID：13110730
> 
> 赞同：0
> 
> 时间：2012-10-28T16:32:48.460
> 
> 标签：haskell

我有一个`cc`声明如下的函数（第一个参数是`a`（列表），第二个参数是 b（也是列表），它应该返回第三个列表：

```
cc :: [(String, String)] -> [(String, String)] -> [(String, String)]
cc a b = do 
```

例子：

```
a = [("aaa", "xxx"), ("bbb", "xxx")]
b = [("xxx", "ccc"), ("xxx", "ddd")]
c should be [("aaa", "ccc"), ("aaa", "ddd"), ("bbb", "ccc"), ("bbb", "ddd")] 
```

`c`是组成，`a`其中`b`每`a`对第二个“索引”是`b`对第一个“索引”。所以`a`("aaa", "xxx") 对的第二个 "index" 是 "xxx" 并且它被定义为`b`("xxx", "ccc") 第一个 "index"。关于这一点，我们创建（添加）这个新对（“aaa”，“ccc”）到返回列表。

问题是如何在 Haskell 中做到这一点？:)

此致！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-28T16:39:37.323

最简单的方法是列表推导，

```
cc a b = [(u,x) | (u,v) <- a, (w,x) <- b, v == w] 
```

`a`我们将所有元素与所有元素配对，`b`并根据条件过滤，将各个部分的结果组合起来。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-28T16:38:57.740

使用列表推导从两个列表中获取所有对的组合，条件是第一对的第二个元素等于第二对的第一个元素：

```
[(x, z) | (x, y1) <- a, (y2, z) <- b, y1 == y2] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T11:01:30.087

```
import Control.Applicative

c = (,) <$> (fst.unzip) a <*> (snd.unzip) b

-- or --

c = liftA2 (,) (fst $ unzip  a) (snd $ unzip b) 
```

# opencv - 计算图像积分

> ID：13110733
> 
> 赞同：9
> 
> 时间：2012-10-28T16:33:07.297
> 
> 标签：opencv

如何从图像积分中找到均值、标准差和梯度？给定如下图像：

![总面积表和普通数字表](../Images/e61e43ca8aec1443cf38855069788084.png)

如上图所示，要找到高亮部分的总和，`sum = C+A-B-D`。
所以我们有`sum = 22`.

我接下来如何才能找到：

*   意思是
*   标准开发
*   坡度

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T19:45:18.460

如果 C+ABC 是区域内所有灰度的总和，则均值不是

```
mean = C+A-B-D/4 
```

但

```
mean = C+A-B-D/K 
```

其中 K 是区域中的灰度级数。

还，

```
dev = sqrt( C'+A'-B'-D'/4 - (mean*mean) ) 
```

不是标准开发，因为

```
dev = sqrt( (1/N)*sum_N ( x_i - u )^2 ) 
```

这里的方程等价于

```
dev = sqrt( (1/N)*sum_N ( (x_i)^2 ) - u^2 ) 
```

这些等式是不等价的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-28T21:35:01.057

`C+A-B-D`为您提供由 A、B、C、D 分隔的区域中的灰度总和，因此，要获得平均值，您只需按该区域的区域进行潜水：

```
mean = (C+A-B-D)/4 
```

要获得开发，您必须计算**平方**面积表的总和（使用`cv::integral`您可以传递额外的参数来获得平方和）。引用[维基百科](http://en.wikipedia.org/wiki/Standard_deviation)，标准偏差等于（平方的平均值减去平均值的平方）的平方根。因此，假设 A',B',C',D'**正方形**面积表中的值：

```
dev = sqrt((C'+A'-B'-D')/4 - (mean*mean)) 
```

因此，使用积分图像计算平均值和偏差使用积分图像**非常**快，特别是如果您想在随机位置和图像块的随机大小上计算这些数量。

关于梯度，它更复杂。您确定不想使用`sobel`运算符吗？

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-01-21T04:09:18.483

jmch 没有说的是，如果`sqrt( C'+A'-B'-D'/K - (mean*mean) )`不是你如何计算积分图像的标准偏差，那么你是怎么做的？

首先，让我切换到[Python](http://python.org/) / [numpy](http://www.numpy.org/)代码，这样我们得到了一点符号一致性，并且表达式更容易检查。给定一个样本数组 X，说：

```
X = array([random() * 10.0 for i in range(0, 9)]) 
```

的[未校正样本标准差](http://en.wikipedia.org/wiki/Standard_deviation#Uncorrected_sample_standard_deviation)可以`X`定义为：

```
std = (sum((X - mean(X)) ** 2) / len(X)) ** 0.5 # 1 
```

应用[二项式定理](http://en.wikipedia.org/wiki/Binomial_theorem)我们得到`(X - mean(X)) ** 2`：

```
std = (sum(X ** 2 - X * 2 * mean(X) + mean(X) ** 2) / len(X)) ** 0.5 # 2 
```

给定求和运算的[恒等式](http://en.wikipedia.org/wiki/Sum_%28mathematics%29#Identities)，我们可以做出：

```
std = ((sum(X ** 2) - 2 * mean(X) * sum(X) + len(X) * mean(X) ** 2) / len(X)) ** 0.5 # 3 
```

如果我们做`S = sum(X)`, `S2 = sum(X ** 2)`，我们`M = mean(X)`得到`N = len(X)`：

```
std = ((S2 - 2 * M * S + N * M ** 2) / N) ** 0.5 # 4 
```

现在对于一个图像`I`和两个积分图像`P`并`P2`从计算`I`（其中`P2`是平方像素值的积分图像），我们知道，给定四个边缘坐标`A = (i0, j0)`、和，`B = (i0, j1)`、和的值可以针对范围计算为：`C = (i1, j0)``D = (i1, j1)``S``S2``M``N``I[A:D]`

```
S = P[A] + P[D] - P[B] - P[C]

S2 = P2[A] + P2[D] - P2[B] - P2[C]

N = (i1 - i0) * (j1 - j0)

M = S / N 
```

然后可以将其应用于上面的等式（4），得出范围的标准偏差`I[A:D]`。

**编辑：**这不是完全必要的，但鉴于`M = S / N`我们可以对等式（4）应用以下替换和简化：

```
std = ((S2 - 2 * M * S + N * M ** 2) / N) ** 0.5

std = ((S2 - 2 * (S / N) * S + N * (S / N) ** 2) / N) ** 0.5

std = ((S2 - 2 * ((S ** 2) / N) + (S ** 2 / N)) / N) ** 0.5

std = ((S2 - ((S ** 2) / N)) / N) ** 0.5

std = (S2 / N - (S / N) ** 2) ** 0.5 # 5 
```

实际上，这与雷米给出的方程式非常接近。

# ruby-on-rails - 分享到 Facebook 墙而不弹出对话框

> ID：13110744
> 
> 赞同：2
> 
> 时间：2012-10-28T16:33:55.700
> 
> 标签：ruby-on-rails, facebook

我正在 Rails 中构建一个 Facebook 应用程序，用户在其中创建一个条目并将其提交到其他用户的条目集合中 - 我想做的是在提交时将该条目的链接自动共享到用户的墙上，但是如果没有弹出对话框窗口，我无法理解 Graph API 文档。任何人都可以帮忙吗？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T17:22:47.030

您可以`POST`向用户`feed`使用 Graph API。文档在[这里](https://developers.facebook.com/docs/reference/api/user/#posts)。您需要在`publish_stream`用户登录时请求他们的许可。

在这种情况下，您的 URL 将是：`https://graph.facebook.com/USERNAME_OR_ID/feed`如果您要在马克扎克伯格的墙上发帖，则`USERNAME_OR_ID`等于`zuck`或`4`。查看[Net:HTTPSession](http://ruby-doc.org/stdlib-1.9.3/libdoc/net/http/rdoc/Net/HTTP.html)到 Ruby 中的 POST。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T18:07:56.813

Facebook 正在取消在朋友墙上发帖的可能性，所以如果你不只是在用户自己的墙上发帖，请记住这一点，因为它很快就会消失。

[https://developers.facebook.com/blog/post/2012/10/10/growth-quality-apps-with-open-graph/](https://developers.facebook.com/blog/post/2012/10/10/growing-quality-apps-with-open-graph/)

> 通过 API 发布到朋友墙会产生大量负面用户反馈，包括“隐藏”和“标记为垃圾邮件”，因此我们将其从 API 中删除。如果您想允许人们从您的朋友的时间线发布信息应用程序，您可以调用提要对话框。通过用户提及标记或动作标记包含朋友的故事将显示在朋友的时间轴上（假设朋友批准标签）。

# c++ - 输出文本文件的位置

> ID：13110747
> 
> 赞同：1
> 
> 时间：2012-10-28T16:34:08.350
> 
> 标签：c++, xcode, file, output

我有一个奇怪的问题需要帮助。我制作了一个 C++ 程序，它从 .txt 文件中获取一些数据并将一些数据写入另一个 .txt 文件。当我通过 Xcode 编译和运行程序时，它会将输出文件与程序文件放在同一目录中——这正是我所需要的。但是当我关闭 Xcode 并通过双击运行程序时，它会在我的用户目录中创建一个输出文件。有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T16:39:16.183

我不确定我是否完全理解了这个问题 - 但我认为您只需要为输出文件提供完整的文件名（包括路径）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T16:48:00.927

当您根据文件名或通过相对路径打开文件时，该文件将相对于您当前的工作目录打开或创建。似乎当您从 XCode 运行时，工作目录设置为创建二进制文件的目录，而 Finder 在启动新进程时将当前工作目录设置为您的主目录。

您可以绝对指定路径（以斜杠开头），也可以通过将 的结果`getcwd()`和`argv[0]`. `argv[0]`包含二进制文件相对于当前工作目录的位置，因此它可用于将二进制文件的位置计算为绝对路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T16:42:38.760

您可以使用它`argv[0]`来检索程序的完整路径。

然后，要么`chdir`到该路径，要么使用从第一个路径构建的完整路径打开目标文件。

例如：

```
char path_buffer[512];

strncpy(path_buffer, argv[0], 512); // This might be /home/user/Desktop/binary.exe

chdir(dirname(path_buffer));    // This is now /home/user/Desktop

fp = fopen("myfile.txt", "w"); 
```

“盲目”`chdir`进入任何`dirname`返回是安全的，因为`dirname`将返回“。” （当前目录）以防出错。

或者还有：

```
char path_buffer[512];
char new_buffer[512];

strncpy(path_buffer, argv[0], 512); // This might be /home/user/Desktop/binary.exe

snprintf(new_buffer, 512, "%s/%s", dirname(path_buffer), "myfile.txt");
fp = fopen(new_buffer, "w"); 
```

以上将设置为在可执行文件的同一目录中`new_buffer`调用的文件的完整路径名。`myfile.txt`我们需要两个缓冲区，因为`dirname`可能会返回一个指向静态存储的指针，并且将“myfile.txt”直接附加到返回的字符串指针是不安全的，因为它相信它是`path_buffer`.

`path_buffer`无需借助.就可以进行编辑`dirname`。这会导致可移植性问题，因为目录分隔符不一定是“/”；它可能是“\”。

```
char path_buffer[512];
char *p, *q;
strncpy(path_buffer, argv[0], 512);
for (p = q = path_buffer; *p; p++)
    if (('/' == *p) || ('\\' == *p))
        q = p+1;
strncpy(q, "myfile.txt", 512 - (q - path_buffer));
// You may now use path_buffer as file name:
fp = fopen(path_buffer, "w"); 
```

# ruby - syck：需要 ssl：不同的 Ruby 版本？

> ID：13110748
> 
> 赞同：0
> 
> 时间：2012-10-28T16:34:12.857
> 
> 标签：ruby, rake, syck

我正在尝试为铁路宝石运行 rake 任务[https://github.com/preston/railroady#readme](https://github.com/preston/railroady#readme)

在下面的错误消息中，我认为它指的是 Ruby 1.9.1 用于 syck，而我使用的是 Ruby 1.9.3（见下文）。这是正常的吗？

该过程因以下原因而失败：

```
/Users/sean/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/syck.rb:135:in `load': syntax error on line 62, col 4: `    require_ssl:false ' (ArgumentError)
from /Users/sean/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/syck.rb:135:in `load' 
```

syck.rb 的相关代码是：

```
124     # Load a document from the current _io_ stream.
125     #
126     #   File.open( 'animals.yaml' ) { |yf| YAML::load( yf ) }
127     #      #=> ['badger', 'elephant', 'tiger']
128     #
129     # Can also load from a string.
130     #
131     #   YAML.load( "--- :locked" )
132     #      #=> :locked
133     #
134     def self.load( io )
135         parser.load( io )
136     end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T19:02:35.200

从错误消息中：

```
syntax error on line 62, col 4: `    require_ssl:false ' 
```

我怀疑这是您的一个 Yaml 配置文件中的错误，而不是 Syck 本身的错误——即这是 Syck 报告的错误*，**而*不是 Syck 中的错误。

# ruby-on-rails - 使用 ActiveSupport::Concern 功能时，如何通过将“嵌套”模块包含为该类的实例方法来将方法添加到类中？

> ID：13110749
> 
> 赞同：2
> 
> 时间：2012-10-28T16:34:16.527
> 
> 标签：ruby-on-rails, ruby, methods, module, nested

我正在使用 Ruby 1.9.2 和 Ruby on Rails v3.2.2 gem。在我之前关于[在使用 Ruby on Rails ActiveSupport::Concern 特性时如何“嵌​​套”包含模块的问题](https://stackoverflow.com/questions/13110306/how-to-nest-the-inclusion-of-modules-when-using-the-ruby-on-rails-activesuppor)之后，我想了解我应该在哪里声明通过包含“嵌套”模块来添加到类中的方法以使该类的这些*实例方法。*也就是说，我有以下内容：

```
class MyClass < ActiveRecord::Base
  include MyModuleA
end

module MyModuleA
  extend ActiveSupport::Concern

  included do
    include MyModuleB
  end
end

module MyModuleB
  extend ActiveSupport::Concern

  included do
    # def my_method
    #   ...
    # end
  end

  # def my_method
  #   ...
  # end
end 
```

*我*应该*`def my_method ... end`在“正文”/“上下文”/“范围”中说明`MyModuleB`还是应该在`included do ... end`块中说明？*有什么区别，我应该从中得到什么？**

 ** * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-28T16:45:33.093

混合到一个类中的模块中的方法成为该类的实例方法。虽然将它们放在`included`块中可能会起作用，但没有必要这样做。通过扩展，这适用于模块，因为您可以包含`ModuleB`in`ModuleA`并且它的所有实例方法都成为实例方法 on `ModuleA`，并且一旦`ModuleA`包含在 class 上`Foo`，它的所有实例方法（包括那些混合 from `B`）都将成为 Foo 上的实例方法。

一个“传统”的混合看起来像这样：

```
module Mixin
  def self.included(klass)
    klass.send :extend, ClassMethods
    klass.some_class_method
  end

  module ClassMethods
    def some_class_method
      puts "I am a class method on #{self.inspect}"
    end
  end

  def some_instance_method
    puts "I am an instance method on #{self.inspect}"
  end
end

class Foo
  include Mixin
end

Foo.new.some_instance_method

# Output:
# I am a class method on Foo
# I am an instance method on #<Foo:0x00000002b337e0> 
```

ActiveSupport::Concern 只是通过自动包含一个名为的模块`ClassMethods`并在包含类的上下文中运行该`included`块来美化这一点，因此等效为：

```
module Mixin
  extend ActiveSupport::Concern

  included do
    some_class_method
  end

  module ClassMethods
    def some_class_method
      puts "I am a class method on #{self.inspect}"
    end
  end

  def some_instance_method
    puts "I am an instance method on #{self.inspect}"
  end
end

class Foo
  include Mixin
end

Foo.new.some_instance_method

# Output:
# I am a class method on Foo
# I am an instance method on #<Foo:0x000000034d7cd8> 
```*

# java - 将 ImageViews 添加到 LinearLayout

> ID：13110751
> 
> 赞同：1
> 
> 时间：2012-10-28T16:35:07.780
> 
> 标签：java, android, textview, imageview

我从网上下载了一堆图片，代码如下：

```
for(int i = 1; i < 12; i++) {
    try {
        URL imageURL = new URL("http://domain/drawimage.php?type=" + i + "&d1=" + this.d1 + "&d2=" + this.d2);
        Bitmap image = BitmapFactory.decodeStream(imageURL.openConnection().getInputStream());

        bitmaps.add(image);
    } catch (Exception e) {
        System.out.println(e);
        e.printStackTrace();
    }
} 
```

稍后当我尝试将它们插入到 LinearLayout ( `ll`) 中时，即使`bitmaps.size() = 11`.

```
for(int i = 0; i < bitmaps.size(); i++) {
    ImageView iv = new ImageView(c); // c = getApplicationContext()
    iv.setImageBitmap(bitmaps.get(i));
    iv.setVisibility(ImageView.VISIBLE);

    ll.addView(iv);
} 
```

如果我尝试使用`TextView`，它可以工作。

```
for(int i = 0; i < bitmaps.size(); i++) {
    TextView tv = new TextView(c); // c = getApplicationContext()
    tv.setText("image ");
    tv.setGravity(Gravity.CENTER_HORIZONTAL);

    ll.addView(tv);
} 
```

是加载问题还是插入失败？怎么修？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T17:53:43.767

I've wrote the code bellow to add an `ImageView` programatically to a `RelativeLayout`. It can be easly changed to work with `LinearLayout`:

```
private ImageView addImageView(RelativeLayout mainLayout, int x, int y, int width, int height, OnClickListener onClickListener){
    ImageView imageView = new ImageView(this);
    imageView.setAdjustViewBounds(false);
    RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
    params.height = height;
    params.width = width;
    imageView.setLayoutParams(params);
    imageView.setScaleType(ImageView.ScaleType.FIT_XY);
    imageView.setImageDrawable(getResources().getDrawable(R.drawable.marker_red));
    //imageView.setBackgroundColor(Color.BLUE);
    params.leftMargin = x - width/2;
    params.topMargin = y - height/2;
    imageView.setOnClickListener(onClickListener);
    mainLayout.addView(imageView);
    return imageView;
} 
```

Regards.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T17:23:03.820

据我了解，您正在尝试在垂直线性布局中添加图像列表？

我建议您使用具有自定义布局的 ListView 和 ArrayAdapter。

这是我为帮助您而制作的示例代码：

```
public class MainActivity extends ListActivity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activitymain);

        StrictMode.ThreadPolicy policy = new StrictMode.
             ThreadPolicy.Builder().permitAll().build();
             StrictMode.setThreadPolicy(policy);

        List<Bitmap> bitmaps= new ArrayList<Bitmap>();

        for(int i = 1; i < 12; i++) {
            try {
                URL imageURL = new URL("http://developer.android.com/assets/images/dac_logo.png");
                Bitmap image = BitmapFactory.decodeStream(imageURL.openConnection().getInputStream());

                bitmaps.add(image);
            } catch (Exception e) {
                System.out.println(e);
                e.printStackTrace();
            }
        }

        setListAdapter(new BitmapAdapter(this,R.layout.listview_item,bitmaps));

    } 
```

自定义位图适配器：

```
public class BitmapAdapter extends ArrayAdapter<Bitmap>{

     Context context; 
      int layoutResourceId;  
      List<Bitmap> bitmaps;

    public BitmapAdapter(Context context, int textViewResourceId,
            List<Bitmap> objects) {
        super(context, textViewResourceId, objects);
        // TODO Auto-generated constructor stub

        this.layoutResourceId = textViewResourceId;
        this.bitmaps = objects;
        this.context = context;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        View rowView = inflater.inflate(this.layoutResourceId, parent, false);
        ImageView iv = (ImageView) rowView.findViewById(R.id.imageView1);

        iv.setImageBitmap(this.bitmaps.get(position));

        return rowView;
    }

} 
```

活动主.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<ListView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" 
     android:id="@android:id/list">

</ListView> 
```

listview_item.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

<ImageView
    android:id="@+id/imageView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/ic_launcher" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T14:13:23.177

我在 PHP 端打印图片时遇到问题。我也应该检查一下。现在它正在工作。

# php - 从多选值中获取所有 $_POST

> ID：13110758
> 
> 赞同：9
> 
> 时间：2012-10-28T16:36:05.330
> 
> 标签：php, html, post

我有这个 HTML 代码：

```
<select name="cars">
  <option value="volvo">Volvo</option>
  <option value="saab">Saab</option>
  <option value="opel">Opel</option>
  <option value="audi">Audi</option>
</select> 
```

为了让用户能够选择多个项目，我正在使用这个 jQuery 插件：[http ://harvesthq.github.com/chosen/](http://harvesthq.github.com/chosen/)

但是，一旦提交...... PHP 脚本只能检索其中一个`$_POST['cars']`值。最后一个。如何使 PHP 能够检索所有这些？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-10-28T16:52:26.060

我找到了答案...

```
<select name="cars[]" multiple="multiple">
  <option value="volvo">Volvo</option>
  <option value="saab">Saab</option>
  <option value="opel">Opel</option>
  <option value="audi">Audi</option>
</select> 
```

在 PHP 部分：

```
$cars = $_POST['cars'];
print_r ($cars); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-14T21:57:26.713

您必须执行以下操作：

//$_POST 或 $_GET 是你的表单请求的方法

```
foreach ($_POST['cars'] as $selected_option) {
    echo $selected_option;
} 
```

就是这样。

# css - 寻找css3动画中的特定关键帧

> ID：13110759
> 
> 赞同：9
> 
> 时间：2012-10-28T16:36:06.713
> 
> 标签：css

我正在做一个很长的关键帧 css3 动画，我希望能够**找到**一个特定的关键帧 - 因此显示它 - 然后从那里播放动画。动画播放/暂停/反向运行很好。

这是我到目前为止所拥有的。我可以开始/暂停，反转，但没有搜索到...

## CSS

```
.myStyle{
    -webkit-animation-name: myStyle-keyframes;
    -webkit-animation-duration: 50000ms;
}
@-webkit-keyframes myStyle-keyframes {
    0% {-webkit-transform:translateX(0px) translateY(0px);}
    0.1% {-webkit-transform:translateX(1.86px) translateY(-0.62px);}
    ...
    100% {-webkit-transform:translateX(182px) translateY(-123px);}
} 
```

## JS

`document.getElementById('ball').style.webkitAnimationPlayState='paused';`

或者

`document.getElementById('ball').style.webkitAnimationPlayState='running';`

## HTML

```
<svg id="ball" class="myStyle">[...]</svg> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-28T23:36:04.103

您可以通过使用负动画延迟值来寻找特定的关键帧。

# java - 为什么在android中创建按钮时会出现“无资源错误”？

> ID：13110760
> 
> 赞同：0
> 
> 时间：2012-10-28T16:36:08.667
> 
> 标签：java, android

我尝试在 android 中创建我的第一个应用程序，我尝试在其中放置一个简单的按钮。[在按照http://developer.android.com/training/basics/firstapp/building-ui.html](http://developer.android.com/training/basics/firstapp/building-ui.html)一步一步的“如何做”过程之后，我发现 activity_main.xml 文件中存在未解决的错误以下行： android:text="@string/scan" />

错误显示错误：错误：未找到与给定名称匹配的资源（在“文本”处，值为“@string/scan”）。谁能告诉我为什么并解释我如何解决这个问题？

我在这里粘贴整个 xml 文件内容：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal">
    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/scan" />
</LinearLayout> 
```

这是 sting.xml 的内容

```
<resources>

    <string name="app_name">Myaxx</string>
    <string name="menu_settings">Settings</string>
    <string name="title_activity_main">MainActivity</string>

</resources> 
```

以下是activity_main 文件的内容。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal">

    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/button_scan" />
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T16:37:38.263

该错误表明您的 strings.xml 文件中没有名称扫描的字符串。您的strings.xml 中有名称扫描的字符串吗？如果没有尝试在 strings.xml 中添加一个字符串

只需这样做

```
<resources>

    <string name="app_name">Myaxx</string>
    <string name="menu_settings">Settings</string>
    <string name="title_activity_main">MainActivity</string>
    <string name="scan">scan</string>
</resources> 
```

这意味着您有一个带有名称扫描和值扫描的字符串（在最后一个场景中），并且您使用 @string/scan 引用它，它返回带有名称扫描的字符串的值（@string/nameOfTheString）

# javascript - Leaflet 是非地图图像的好工具吗？

> ID：13110763
> 
> 赞同：40
> 
> 时间：2012-10-28T16:36:45.527
> 
> 标签：javascript, leaflet

我正在编写一个涉及导航[技术插图](http://en.wikipedia.org/wiki/Technical_illustration)（平移、缩放、单击）的网络应用程序。我认为[Cloudmade Leaflet](http://leafletjs.com/)是一个很好的工具，只是因为[有人用它来制作 XKCD 1110 平移/缩放](http://xkcd-map.rent-a-geek.de)，我真的很喜欢它的结果。

显然，我需要平铺和缩放我的原始技术插图，但假设这是我已经解决的一个微不足道的问题。然而，看看[Leaflet API](http://leafletjs.com/reference.html)，我似乎必须将我的技术插图（.ai、.svg 和 .png 文件）转换为 GeoJSON 等地理标准。这似乎是一个尴尬的提议。

任何人都可以推荐 Leaflet 或任何其他工具来导航非地图图像吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-02T04:46:46.473

你可以用 Leaflet 做到这一点。（我自己就是这样做的。）

您必须将像素大小转换为 latlong（纬度/经度）。`Simple`Leaflet 通过使用“坐标参考系统”为您提供了一种简单的方法，`map.project`并且`map.unproject`.

首先，像这样构建您的地图：

```
var map = L.map('map', {
  maxZoom: 20,
  minZoom: 20,
  crs: L.CRS.Simple
}).setView([0, 0], 20); 
```

…然后设置地图边界（对于 1024x6145 的图像）：

```
var southWest = map.unproject([0, 6145], map.getMaxZoom());
var northEast = map.unproject([1024, 0], map.getMaxZoom());
map.setMaxBounds(new L.LatLngBounds(southWest, northEast)); 
```

这里有[更多关于拆分图像](http://omarriott.com/aux/leaflet-js-non-geographical-imagery/)的详细信息，包括一个可能有用的 Ruby gem。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-05-24T22:33:45.037

这适用于未平铺的图像。

```
function init() {
    var map = L.map('map', {
        maxZoom: 24,
        minZoom: 1,
        crs: L.CRS.Simple
    }).setView([0, 0], 1);

    map.setMaxBounds(new L.LatLngBounds([0,500], [500,0]));

    var imageUrl = 'http://www.lib.utexas.edu/maps/historical/newark_nj_1922.jpg'
    var imageBounds = [[250,0], [0,250]];

    L.imageOverlay(imageUrl, imageBounds).addTo(map);
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-28T17:42:51.997

我正在将 Leaflet 用于带有地理信息的自定义图块的地图，但据我所知，Leaflet 应该能够完成这项任务。有几点需要考虑如何组织图像以能够以可平移和可缩放的方式显示它们：

首先，您必须了解地图导航背后的概念和相应的瓦片文件名。这个概念是[QuadTree](http://en.wikipedia.org/wiki/Quadtree)。可以在[此处](http://www.maptiler.org/google-maps-coordinates-tile-bounds-projection/)找到有关其工作原理的示例。

然后，您必须将原始技术插图切割成不同的瓷砖。如果您只从一个缩放级别开始，这应该非常简单。[然后，您可以在新的Leaflet TileLayer](http://leafletjs.com/reference.html#tilelayer)中使用这些图块。当你想要缩放时，它可能会变得有点困难。您必须为您的切片找出正确的边界并构建正确的文件名（请参阅上面的 QuadTree 参考资料）。

总结一下：传单不应该成为您任务中的问题。您的主要任务是根据原始数据创建合适且正确的图块。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-03-01T12:26:56.760

我在 MapTiller 上运气不错——http: [//www.maptiler.com/](http://www.maptiler.com/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-06-22T17:35:54.123

如果你想要一个非瓷砖选项，你可以在客户端完成整个事情，而无需预先切割瓷砖

见[https://github.com/Murtnowski/GMap-JSlicer](https://github.com/Murtnowski/GMap-JSlicer)

```
slicer = new JSlicer(document.getElementById('map'), 'myImage.png');
slicer.init(); 
```

非常简单。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-06-22T23:47:13.400

使用 Leaflet 的最大问题是弄清楚如何生成、排序图块，然后正确地进行调用，以便一切都按您的预期显示。经过几天绝望地尝试解决方案后，这是唯一对我有用的解决方案，这要感谢 Pedro Sousa 完成的教程：

[https://build-failed.blogspot.pt/2012/11/zoomable-image-with-leaflet.html](https://build-failed.blogspot.pt/2012/11/zoomable-image-with-leaflet.html)

本质上，这使用 GDAL2Tiles 以可预测的方式*正确*分割图块。这是一种在大多数 Linux 发行版上很容易获得的工具（据称它在 Mac OS X 下也可以正常运行，使用端口或类似的东西）。此工具没有水印、大小限制等。就像 Pedro Sousa 在他的文章中解释的那样，将磁贴放在服务器的目录上。

然后，Leaflet 将使用带有“假”地理坐标的图块加载“地图”，并使用光栅文件的大小正确计算“假”经度/纬度。之后，您几乎可以随心所欲地使用它，就像任何其他地图图块服务器一样。在我的例子中，我只需要删除一些标记，所以我不在乎我正在处理的坐标系 - 下面的函数对于提取“假”地理坐标很有用，以便知道放置标记的位置：

```
var popup = L.popup();
function onMapClick(e) {
    popup
        .setLatLng(e.latlng)
        .setContent("You clicked the map at " + e.latlng.toString() + "\nZoom level is " + map.getZoom())
        .openOn(map);
}
map.on('click', onMapClick); 
```

我确实设法使用 Leaflet 成功替换了旧的基于 Flash 的地图导航器，并且基本上复制了几乎所有 Flash 功能（即使使用相同的标记等等！）。当然，Leaflet 可以在 iOS 设备上运行的优势——并且由于平铺，使用 Leaflet 的解决方案运行速度比旧的基于 Flash 的方法快得多……

另一种可能是[OpenLayers](http://openlayers.org/en/latest/examples/static-image.html)，它也可以处理光栅图像，无需平铺——如果你有一个相对较小的图像就足够了。

顺便说一句，这里是不同框架的比较——但并非所有框架都会处理静态图像：[https ://www.toptal.com/web/the-roadmap-to-roadmaps-a-survey-of-the-best-在线测绘工具](https://www.toptal.com/web/the-roadmap-to-roadmaps-a-survey-of-the-best-online-mapping-tools)

# javascript - 丢弃跨域 XHR 的 cookie 不是更简单吗？

> ID：13110764
> 
> 赞同：6
> 
> 时间：2012-10-28T16:36:45.767
> 
> 标签：javascript, html, cookies, xmlhttprequest, same-origin-policy

在为 Web 开发时，我一直在与奇怪的限制作斗争。其中之一是 AJAX 请求的同源限制，我在问自己，如果不是阻止对跨域资源的请求，而是在制作 cookie 时丢弃它们（以避免滥用浏览器会话）。

Cookie 是一种工具，但并非必不可少（例如，如果您需要保留上下文，您可以在请求 URL 中生成带有 cookie 的页面），而跨域阻止则非常烦人。

从逻辑的角度来看，还有一些在我看来非常奇怪的事情，即阻止特定主题访问全世界其他人无需身份验证即可访问的资源。

我想知道是否有一些真正的技术原因表明同源政策确实是最好的解决方案。

请注意，我只是出于好奇...例如，Javascript）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T00:25:21.157

您假设所有身份验证凭据都是基于 cookie 的，但事实并非如此。浏览器可能会使用 PKI 证书对另一个站点进行身份验证，或者该站点可能会信任客户端，因为它在受信任的网络上具有特定的 IP 地址。这不是客户可以针对单个请求关闭的东西。

但是，正在为站点标准化一种方式以允许对其资源[进行跨域请求的方式进行工作。](http://enable-cors.org/)如果一个站点知道它的某些内容是公开的并且没有客户端具有特殊权限，它可以设置一个 HTTP 标头来告诉浏览器允许从其他站点加载的脚本查看该内容。

> 从逻辑的角度来看，还有一些在我看来非常奇怪的事情，即阻止特定主题访问全世界其他人无需身份验证即可访问的资源。

浏览器不知道全世界都可以在没有身份验证的情况下访问资源。它不知道在访问给定 URL 时是否看到与其他客户端相同的内容。它阻止的是访问它自己的、可能是唯一的远程资源*视图*。

# c# - 后台工作人员加载 bing 地图控件

> ID：13110766
> 
> 赞同：1
> 
> 时间：2012-10-28T16:37:12.177
> 
> 标签：c#, backgroundworker, windows-phone, panorama-control

我正在开发一个带有全景页面的 Windows Phone 7 应用程序。

这个页面有两个项目，第一个带有一些文本，第二个带有控制图。第二个加载时间太长，所以我决定以这种方式加载它：

```
namespace Tested
{
    public partial class DemoDetail : PhoneApplicationPage
    {
        private bool isFirstNavigateToMap;
        private BackgroundWorker bgWorker;
        private Map map;

        public DemoDetail()
        {
            InitializeComponent();
            map = null;
            isFirstNavigateToMap = true;
            bgWorker = new BackgroundWorker();

            bgWorker.DoWork += new DoWorkEventHandler(bgWorker_DoWork);
            bgWorker.RunWorkerCompleted += new RunWorkerCompletedEventHandler(bgWorker_RunWorkerCompleted);
        }

        private void bgWorker_DoWork(object sender, DoWorkEventArgs e)
        {
            map = new Map();
        }

        private void bgWorker_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
        {
            if (map != null)
                mapGrid.Children.Add(map);
        }

        private void Panorama_SelectionChanged(object sender, System.Windows.Controls.SelectionChangedEventArgs e)
        {
            Panorama panorama = (Panorama)sender;
            PanoramaItem panoramaItem = (PanoramaItem)(panorama.SelectedItem);

            if ((isFirstNavigateToMap) && (panoramaItem.Name.Equals("mapPanoramaItem")))
            {
                isFirstNavigateToMap = false;
                bgWorker.RunWorkerAsync();
            }
        }
    }
} 
```

但是当我移动到第二个全景项目时，我在线得到了这个异常`map = new Map();`：

```
No se controló System.UnauthorizedAccessException
  Message=Invalid cross-thread access.
  StackTrace:
       at MS.Internal.XcpImports.CheckThread()
       at System.Windows.DependencyObject..ctor(UInt32 nativeTypeIndex, IntPtr constructDO)
       at System.Windows.DependencyObject..ctor(UInt32 nativeTypeIndex)
       at System.Windows.UIElement..ctor(UInt32 nKnownTypeIndex)
       at System.Windows.FrameworkElement..ctor(UInt32 nKnownTypeIndex)
       at System.Windows.Controls.Control..ctor(UInt32 nKnownTypeIndex)
       at System.Windows.Controls.ContentControl..ctor()
       at Microsoft.Phone.Controls.Maps.Core.MapBase..ctor()
       at Microsoft.Phone.Controls.Maps.Core.MapCore..ctor()
       at Microsoft.Phone.Controls.Maps.Map..ctor()
       at Demonstration.DemoDetail.bgWorker_DoWork(Object sender, DoWorkEventArgs e)
       at System.ComponentModel.BackgroundWorker.OnDoWork(DoWorkEventArgs e)
       at System.ComponentModel.BackgroundWorker.OnRun(Object argument)
       at System.Threading.ThreadPool.WorkItem.WaitCallback_Context(Object state)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
       at System.Threading.ThreadPool.WorkItem.doWork(Object o)
       at System.Threading.Timer.ring() 
```

**如何异步创建和加载控制图？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T18:47:42.097

你将不得不做

```
Deployment.Current.Dispatcher.BeginInvoke(()=>
{ 
      map = new Map();   
}); 
```

任何与 UI 有关的事情都必须在启动它的线程中完成，即 UI 线程。当您从后台线程访问 UI 时，您应该通过要求 UI 线程从队列中调用它来让 UI 线程对其进行操作。

PS：SO上有很多类似的帖子，请`cross thread error`搜索一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T16:41:51.330

AFAIK，你不能。Bing地图控件是UI对象，所以必须在UI线程上创建。

# java - java下载的区别

> ID：13110768
> 
> 赞同：0
> 
> 时间：2012-10-28T16:37:16.060
> 
> 标签：java, oracle, jakarta-ee, download

一旦回答了关于这两个版本之间差异的问题

这个stackoverflow问题中**的java_ee_sdk-6u3-jdk7-windows-ml.exe** **java_ee_sdk-6u3-jdk7-windows.exe**
（ml表示多语言） -> [java下载之间的区别](https://stackoverflow.com/questions/6876287/difference-between-java-downloads)

我现在想知道，这两个下载
**java_ee_sdk-6u4-jdk7-windows-ml.exe
java_ee_sdk-6u4-web-jdk7-windows-ml.exe 有什么区别**

顺便问一下，什么是*web-profile*？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T16:47:06.223

Web 配置文件是完整 Java EE 堆栈的轻量级版本。它仅包含完整 Java EE 堆栈的某些部分，专门用于构建 Web 应用程序。

有关介绍，请参见[http://jaxenter.com/introducing-the-java-ee-web-profile-36201.html](http://jaxenter.com/introducing-the-java-ee-web-profile-36201.html)。

# regex - Nginx位置重定向正则表达式不起作用

> ID：13110776
> 
> 赞同：0
> 
> 时间：2012-10-28T16:38:05.700
> 
> 标签：regex, nginx, rewrite

我想将请求重定向到我服务器上的 /images/someimage.png 到[http://some.other.server/images/someimage.png](http://some.other.server/images/someimage.png)。我的 nginx 配置中有以下内容：

```
location ^/images/.*(png|jpg|gif)$ {
    rewrite ^/images/(.*)(png|jpg|gif)$ http://anotherserver.com/images/$1$2 redirect;
    return   302;
} 
```

[但是由于某种原因，当我请求http://test.com/images/test.png](http://test.com/images/test.png)时它没有被击中（我只是得到一个 404，因为该文件在我的服务器上不存在）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T18:31:49.940

如果我理解正确，您希望 302 将一台服务器上的 /image/ url 重定向到另一台服务器上的相同路径。你可以这样做：

```
location /images/ {
  rewrite ^ $scheme://anotherserver.com$request_uri redirect;
} 
```

你不需要已经这样做`return 302` 了`rewrite ... redirect`（如果你想要 301 重定向而不是使用`rewrite .... permanent`）

只要您在另一台服务器上也有相同的 url，您就不需要正则表达式，内置变量就足够了

注意：您的位置没有被击中的原因是您拥有`location ^/images/.*(png|jpg|gif)$`而不是`location ~ ^/images/.*(png|jpg|gif)$`. 换句话说，您忘记发出正则表达式匹配信号（`~`区分大小写或`~*`不区分大小写）

# css - 如何在五个主要浏览器中一致的单独文件上的 CSS 中为同一页面上的链接创建不同的颜色/规则？

> ID：13110777
> 
> 赞同：0
> 
> 时间：2012-10-28T16:38:11.173
> 
> 标签：css, hyperlink

我想在单独的 css 文件中为同一页面上的不同链接创建不同的颜色/规则。该文件已链接到相关页面。我尝试了许多不同的方法来将不同的规则应用于链接，它们要么将一组规则应用于整个页面，要么应用默认设置并取消更改，要么只应用一些规则。

第一组链接是我想要用于页面某些区域的特定链接。

```
a#mainnav, #categories:link { color: grey; text-decoration: none;}

a#mainav, #categories, #header, #bottombar:visited { color: darkcyan; font-weight: normal;}

a#mainnav, #categories:focus { color: lightgrey;}

a#mainnav:hover { color: darkgrey;}

a#categories:hover { color: darkgrey; font-size: 18;}

a#mainnav, #categories:active { color: silver;} 
```

第二组规则是我想应用于页面上其他所有内容的规则。

```
a#header, #bottombar:link { color: deepskyblue; text-decoration: none;}

a#header, #bottombar:focus { color: darkcyan;}

a#header, #bottombar:hover { color: mediumblue;}

a#header, #bottombar:active { color: royalblue;} 
```

我试过.header 和#header。我试过了`#header`，`#bottombar`和`#header` `#bottombar`。如您所见，还在 a: 之前和 a 之后尝试过。似乎没有任何效果，他们似乎从未在指定区域采用单独的规则。

**HTML：**

```
<div id="container"> 
    <div id="header" title="U BLOSH"> 
        <h1>
            <a name="index.html"</a>
            <a href="#index.html" 
            <abbr title="You Buy Low or Sell High"</abbr> 
            <img src="file:///C|/Users/Marcus/Pictures/ubloshlogo.png" alt="logo" width="250" height="50";</h1> 
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T20:29:56.183

我认为任何人都很难说出这句话而不显得居高临下，但是您确实需要学习非常基本的 HTML 和 CSS。您实际上需要正确关闭标签。

这一行：`<a name="index.html"</a>`

**不正确。**您需要像这样关闭开始标签：`<a name="index.html"></a>`. 另外，`name`属性有什么作用？锚标记 ( `a`) 应该链接到某处。您将它与`href`属性链接到某个地方。

这一行：`<a href="#index.html"`

**不正确。**同样，您没有关闭标签。这次你包括了一个`href`，但它应该通向哪里？您在同一页面上是否有一个带有`ID`of的元素`index.html`？我不这么认为。

这一行：`<abbr title="You Buy Low or Sell High"</abbr>`

**不正确。**你想缩写什么？你包括你的标题，但你没有完成开始标签。如果您想缩写“You Buy Low or Sell High”这个短语，它可能看起来像`<abbr title="You Buy Low or Sell High">YBLOSH</abbr>`.

这一行：`<img src="file:///C|/Users/Marcus/Pictures/ubloshlogo.png" alt="logo" width="250" height="50";`

你没有关闭标签。一个有效的图像标签看起来像`<img src="" alt="">`(HTML) 或`<img src="" alt="" />`(XHTML)。分号有什么用？

* * *

当我们继续您关于使用 CSS 定位元素的原始问题时，以以下标记为例：

```
<div id="container">
     <div id="header">
         <a href="http://somewebsite.com">Some link text</a>
     </div>
</div> 
```

为了在这两个`div`元素中定位该锚点，您可以编写如下内容：

```
#container #header a {color:red;}
#container #header a {color:blue;} 
```

我不想再写出任何*Hello World*网络内容。[请花点时间学习。](http://code.google.com/edu/submissions/html-css-javascript/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T16:43:48.193

如果您尝试在其中选择链接*，* `#mainnav`请尝试以下操作：`#mainnav a {...}`等

# python - 在嵌套列表中添加值

> ID：13110778
> 
> 赞同：0
> 
> 时间：2012-10-28T16:38:15.217
> 
> 标签：python

> **可能重复：**
> [在 Python 中合并/添加列表](https://stackoverflow.com/questions/263457/merging-adding-lists-in-python)

```
nested_list= [[1, 3, 5], [3, 4, 5]]
sum_of_items_in_nested_list = [4, 7, 10] 
```

我正在尝试创建一个嵌套的 for 循环，它将在每个相应的索引处添加获取项目并将其添加到同一索引处的另一个嵌套列表中。所以上面添加了 `nested_list[0][0] + nested_list[1][0]`，`nested_list[0][1] + nested_list[1][1]`依此类推。我想在不导入和模块的情况下做到这一点。这可能很容易，但我玩得很开心。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-28T16:41:06.213

使用`zip()`：

```
In [44]: nested_list= [[1, 3, 5], [3, 4, 5]]

In [45]: [sum(x) for x in zip(*nested_list)]
Out[45]: [4, 7, 10] 
```

另一种方式，使用嵌套循环：

```
In [6]: nested_list= [[1, 3, 5], [3, 4, 5]]

In [7]: minn=min(map(len,nested_list))   #fetch the length of shorted list

In [8]: [sum(x[i] for x in nested_list) for i in range(minn)]
Out[8]: [4, 7, 10] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T20:20:52.077

这是您案例的答案，您可以使用它`len()`来更改列表的长度。

```
nested_list= [[1, 3, 5], [3, 4, 5]]

sum_of_items_in_nested_list=[]
for j in range(0,3,1):
    result=0
    for i in range(0,2,1):
         result=result+nested_list[i][j]
         sum_of_items_in_nested_list = sum_of_items_in_nested_list + [result] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T18:39:02.787

你也可以考虑这个解决方案：

```
map(int.__add__,*nested_list) 
```

更好的风格：

```
from operator import add
map(add,*nested_list) 
```

# lucene - 对当前在 Lucene 中合并的索引调用 Commit

> ID：13110780
> 
> 赞同：0
> 
> 时间：2012-10-28T16:38:52.810
> 
> 标签：lucene

我的问题是关于 Lucene .NET 2.9.2

假设我使用 更新了索引`IndexWriter`，这导致调度程序开始在后台合并段。如果我`Commit`在合并完成之前打电话会发生什么？被调用的线程`Commit`会被阻塞并等待合并完成，还是两个线程是独立的？

答案对我的搜索实现非常重要，因为我依赖于`FieldCache`性能问题，如果不`Commit`等待合并完成，我可能会得到错误的 DocIds ...

**更新：**

我想要做的是 DocId 到 Appliciation Id 之间的映射 - 所以在使用`IndexSearcher`Search 方法时我不需要获取我的应用程序 Id 的存储值。所以我试图*在索引期间*构建映射，将该映射保存到二进制文件中 - 并在我的搜索中 - 将该文件加载到数组中（内存中......）。所以文件版本必须与`IndexReader`（希望很清楚......）

例如：（索引过程代码）

```
IndexWriter writer = //initialize writer

//modify index using the writer add\delete\update doc methods...

//get updated reader to the index
IndexReader r1= wrtier.GetReader();

//read all values for all documents for specific field name.

long[] ids = FieldCache_Fields.DEFAULT.GetLongs(r1, "ID");

//serialize the array to a file (code not provided)

Dictionary<string,string> metaData = new Dictionary<string,string>();
metaData.Add("FileName", /*full path to the serialized file*/);
writer.Commit(metaData); 
```

（搜索者进程代码）

```
IndexReader r2 = //IndexRead.Open...
Dictionary<string,string> metaData = r2.GetCommitUserData()

string fullPathToFile = metaData["FileName"];  //get the file name that was serialized

//load the array from the file (=deserialize file)
long[] ids = //load from file

//now I can convert internal DocId to my Application Id, and save time instead of fetching data from the stored field (which takes more time...) 
```

基本上我的问题是：假设没有对索引进行其他修改，是否有可能两个读者 r1 和 r2 的 DocId 不适合？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T17:33:10.293

后台合并不会阻止您的提交。

但我不明白你的`FieldCache`问题：`IndexReader`s 是不可变的，fieldcache 实例永远不会变得无效..

# php - 基于 URL 的加载方法

> ID：13110784
> 
> 赞同：0
> 
> 时间：2012-10-28T16:39:08.287
> 
> 标签：php, model-view-controller, class, methods

我正在尝试构建一个基于 mvc 的小型应用程序。

如何根据查询字符串调用类中的方法？

例如，$_GET 查询字符串被设置为 load_master_form

```
http://www.domain.com/settings/load_master_form 
```

并在设置类中调用该方法，我正在做：

```
function __construct(){
    $this->{$_GET['method']}();
} 
```

但显然这不起作用——不可能加载这样的方法。那么它会怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T16:50:34.163

我认为这可以正常工作，只要您为 $_GET['method'] 创建了方法，并且您使用的是 URI 路由（.htaccess 或其他）

通常我倾向于在 URI 中调用方法名称 -

```
// domain.com/class_name/method_name/params

class class_name{
    function __construct(){
        ...
    }
    function method_name(){
        ...
    }
// etc.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T16:47:09.783

首先，您必须创建 .htaccess 文件，将所有请求重定向到单个文件（通常是 index.php）。然后将用户输入的字符串作为**GET**变量传递给 php。

[此处](http://codular.com/htaccess-introduction)介绍了如何创建 .htaccess 文件。

然后你必须决定 MVC 的结构。假设您希望 url(http://www.someting.com/first/second/third) 中的每个第三个参数都是一个方法。然后你会做这样的事情..

```
// Variables
$args = explode('/',$_GET['method']);

// Get method
$method = rtrim($args[1]); 
```

这只是一个肮脏的解决方案..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T16:56:37.167

我会使用反射，如下所示：

```
public static function doUserMethod($methodName)
{
    $reflectionMethod = new ReflectionMethod('YourUserMethodsClass', $methodName);
    return $reflectionMethod->invokeArgs(new YourUserMethodsClass(), array(/* Method Arguments Here */));
} 
```

然后可以称为：

```
YourClass::doUserMethod($_GET['method']); 
```

这样做的好处是您可以将用户限制为仅使用您指定的特定类中的方法（即`YourUserMethodsClass`在我的示例中）。显然，如果您的方法需要参数（与您给出的示例不同），您将需要一些特殊的额外处理。

# javascript - 当我们专注于垃圾收集时，哪种方式更好？

> ID：13110791
> 
> 赞同：1
> 
> 时间：2012-10-28T16:39:32.097
> 
> 标签：javascript, performance, garbage-collection

简单的问题，什么对垃圾收集器更好：

*   将对象添加到数组并将 null 分配给数组单元格

`this.requests[i] = new NiceClass();`

`this.requests[i] = null;`

*   创建简单变量并将 null 分配给该变量

`var niceClass = new NiceClass();`

`niceClass = null;`

我问是因为我想避免使用数组，因为在创建大量对象期间 - 尽管破坏了对对象的引用，所以垃圾收集器能够抓取不必要的对象 - 数组正在增长，所以我很好奇，这里有必要还是只使用变量会更好吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T16:50:49.470

你忘记了几件事：

JS 的 GC 工作方式取决于实现：V8 对内存的管理非常好，而旧版本的 IE 泄漏的不仅仅是生锈的滤锅。
将变量设置为 null，但*不会对其进行初始化*。`Null`不像`null`其他语言（只需尝试`typeof null`在控制台中输入）。试试`someVar = undefined`吧。即便如此，Js 确实有一个保留`delete`关键字，在我看来，这就是你所追求的。
总而言之：如果对象被一个变量或一个数组引用：这并不重要：数组是稀疏的，所以如果你使用`delete someArray[i];`，那 or 之间真的不应该有任何区别`delete someVar;`。
**注意：**删除全局范围内的变量*总是*返回 true，但如果该变量被显式声明（使用`var`关键字）或者如果它是一个函数，它将不会被删除。只能删除隐含的全局变量，因此：

```
var global1 = 'I cannot be deleted';
function global2()
{
    global3 = 123;//implied global
}
global4 = function()
{
    console.log('implied global function, can be deleted');
};
delete global1;//returns true
console.log(global1);//I cannot be deleted
delete global2;
global2();//shouldn't create global3, because it was deleted but:
console.log(global3);//123
delete global3;//true
console.log(global3);//undefined, was deleted
delete global4;//true
global4();//error <--- was deleted = reference error 
```

但是：在这两种情况下，取消引用仍然在某个闭包中或脚本中某处的另一个变量中引用的任何对象*都不会 GC it*。
一般来说，JS GC 只是循环标记和刷内存：当对任何给定对象的所有引用超出范围时，它们被标记并释放内存。您对此过程没有任何*真正的*控制权，因此您无法真正为此优化代码。

即便如此，如果您仍然想继续，并在 FF 或 Chrome 中使用时间线和分析器工具，那么请成为我的客人。但请记住：当您这样做时，您正在针对特定的 JS 引擎进行优化：V8 优化的代码可能会在 Chrome 和 Safari 中生成更清洁的内存，但就您所知，IE 可能会产生完整的哈希，或者您使用的一些技巧会导致 FF 变慢，这比一个相当大的数组首先要做的要多。
我想我会在这里停止这种咆哮......底线：你无法优化你无法真正控制的东西。

*更新：*

由于我刚刚阅读了您对您当前遇到的内存泄漏的评论：我认为将变量设置为`null`或`undefined`什`delete`至不会对您有多大好处。确保（现代）GC 能够完成其工作的一个更好的方法是巧妙地使用闭包：每当函数返回时，在其范围内声明的变量都会被标记为 GC。如果返回了这些变量，或者该函数的返回值是引用这些变量的对象或另一个函数，则它们不会被 GC'ed，但不再引用的那些变量将被释放。
全局变量*永远不会超出范围*，因此*永远不会被 GC'ed*。这就是为什么全球人是*邪恶的*. 如果你真的有很多 JS 代码需要优化：开始把东西放在 IIFE 中，这可以产生*巨大*的差异，而且只需很少的努力。

# java - 设置位图的旋转和位置

> ID：13110796
> 
> 赞同：2
> 
> 时间：2012-10-28T16:39:52.130
> 
> 标签：java, android, bitmap, surfaceview, android-canvas

我想知道我如何改变位图的位置并同时旋转它。我在画布上画画。

我目前正在使用这行代码：

```
canvas.drawBitmap(bitmap, posX, posY, paint); 
```

我认为使用矩阵进行旋转是最好的选择？问题是上面发布的代码行不采用矩阵而是采用位置。

还有一行类似的代码：

```
canvas.drawBitmap(bitmap, matrix, paint); 
```

这个需要一个矩阵，但不是一个位置。

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-11-24T12:49:55.010

```
Matrix matrix = new Matrix();
matrix.SetRotate(90,pivotX,pivotY);
matrix.PostTranslate(positionX,positionY);
canvas.drawBitmap(bitmap, matrix , null); 
```

用文字 - 设置旋转**后的位置。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T16:48:16.157

将位置转换为 posMatrix 矩阵并将其与旋转矩阵相乘。然后将结果矩阵作为参数传递。

编辑 - -

```
Matrix myTransformedMatrix = new Matrix();
myTransformedMatrix.setRotate(<rotation in dergrees>);
myTransformedMatrix.setTranslate(<translation in points>);

canvas.drawBitmap(bitmap, myTransformedMatrix, paint); 
```

有关矩阵类的更多信息，请访问[http://developer.android.com/reference/android/graphics/Matrix.html](http://developer.android.com/reference/android/graphics/Matrix.html)

# iphone - ADBannerView 触摸已禁用

> ID：13110798
> 
> 赞同：1
> 
> 时间：2012-10-28T16:40:23.263
> 
> 标签：iphone, ios, ios6, iad, adbannerview

我正在尝试解决我的应用程序中的问题 3 天。

我有一个正确显示广告的 ADBannerView（以编程方式添加），但是当我点击它时，什么也没有发生（它似乎被禁用）。

这是结果

```
- (void)bannerViewDidLoadAd:(ADBannerView *)banner{
NSLog(@"%@",banner);
}

<ADBannerView: 0x1f060d00; frame = (0 454; 320 50); clipsToBounds = YES; gestureRecognizers = <NSArray: 0x1f0745f0>; layer = <CALayer: 0x1f0613b0>> 
```

有人能帮我吗？

# c# - 使用 OpenTK 进行异步图像绘制

> ID：13110800
> 
> 赞同：0
> 
> 时间：2012-10-28T16:40:41.440
> 
> 标签：c#, asynchronous, opentk

我有一个场景，我在上面执行一些命令。假设我想做一个模拟，它的每一步，我都可以那样做。

```
private void button4_Click(object sender, EventArgs e)
{
    commands[global++].Execute(ref area.heightMap, ref sim);
    glControl1.Invalidate();  //openTK redrawing
} 
```

单击该按钮将显示场景中的每一步。但现在我想看到一个连续的模拟，我可以这样做。

```
private void button1_Click_1(object sender, EventArgs e)
{
    for (int i = 0; i < commands.Count; i++)
    {
       button4_Click(null, null);
       Thread.Sleep(100);
    }
} 
```

但效果并不像我想象的那样，所有命令都执行完毕，最后显示图像。所以问题是我如何显示这个模拟的每一步（在每个执行命令之后）。额外的问题 - 假设这个 Execute() 包含许多小步骤。如何显示所有这些小步骤？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T16:54:26.570

您必须在另一个线程上执行命令（您可以使用 TPL）并在工作线程中等待，但在 UI 线程中您只能使控制无效。

```
foreach(var command in commands)
{
    Task<int>.Factory.StartNew(ExecuteCommand)
        .ContinueWith(
            t => Invalidate(t.Result),
            CancellationToken.None,
            TaskContinuationOptions.PreferFairness,
            TaskScheduler.FromCurrentSynchronizationContext());
}

private void Invalidate(int heightMap)
{
    area.heightMap = eightMap;
    glControl1.Invalidate();
}

private int ExecuteCommand()
{
    // returns new heightMap, because it's executes in non-UI thread
    // you can't set UI control property
    return Execute(area.heightMap, sim);
} 
```

# javascript - 引导崩溃

> ID：13110802
> 
> 赞同：1
> 
> 时间：2012-10-28T16:40:49.980
> 
> 标签：javascript, css, twitter, twitter-bootstrap

我花了几个小时试图让这个引导崩溃插件工作。很抱歉，如果以前有人问过这个问题，但我已经在这个地方搜寻了一个合适的答案。这是我的html：

```
<html lang="en">
 <head>
   <meta charset="utf-8">
   <title>:(</title>
   <!-- Bootstrap -->
   <link href="bootstrap/css/bootstrap.min.css" rel="stylesheet">
 </head>

 <body>
   <h1>Collapse!</h1>

  <a class="btn btn-danger" data-toggle="collapse" data-target="#demo">
     simple collapsible
  </a>

  <div id="demo" class="collapse in">
        <p>Hopefully this content will be collapsible!</p>
        <p>And this too!</p>
  </div>

<script type="text/javascript">
$(document).ready(function(){
        $(".collapse").collapse()
});
</script>

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script src="bootstrap/js/bootstrap.min.js"></script>

  </body>
</html> 
```

这也是我第一次使用 stackoverflow 来提问，所以请原谅我不知道如何正确格式化我的问题。我刚刚添加了一小段 jquery，希望它能以某种方式初始化页面上的 js 元素。请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T16:49:47.960

这是您的代码[http://jsbin.com/aximay/1/edit的工作版本](http://jsbin.com/aximay/1/edit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-14T14:11:55.967

我看到这个问题有点老了，但只是一个附加说明。

似乎不需要使用 Bootstrap 数据属性和 javascript。[BS 文档（请参阅用法）](http://twitter.github.io/bootstrap/javascript.html#collapse)不清楚这些是不同的替代方案，但它可以与任何一个独立的（数据属性或 JS）一起正常工作。

# javascript - jQuery插件。添加选项和回调函数

> ID：13110803
> 
> 赞同：0
> 
> 时间：2012-10-28T16:40:52.173
> 
> 标签：javascript, jquery

[http://docs.jquery.com/Plugins/Authoring#Defaults_and_Options](http://docs.jquery.com/Plugins/Authoring#Defaults_and_Options)描述了插件如何具有默认选项。

```
var settings = $.extend( {
  'location'         : 'top',
  'background-color' : 'blue'
}, options); 
```

[选择答案jQuery插件](https://stackoverflow.com/questions/2534436/jquery-plugin-adding-callback-functionality)的第二部分：添加回调功能描述了如何在选项对象中添加回调。

```
// extend the options from pre-defined values:
var options = $.extend({
    callback: function() {}
}, arguments[0] || {});

// call the callback and apply the scope:
options.callback.call(this); 
```

如何同时添加默认设置和回调函数？另外，我对为什么要针对 arguments[0] 或空对象扩展默认回调函数感到有些困惑。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T16:44:44.323

只需合并两者，您可以在一个对象中拥有任意数量的项目

```
$.fn.myPlugib = function( user_options ) {  
    var options = $.extend({
        'location'         : 'top',
        'background-color' : 'blue'
        'callback': function() {}
    }, user_options || {});

    //now options object can be used to get callback or any other options when needed
    options.callback.call(this, options.location)
} 
```

`user_options || {}`确保如果用户没有提供任何选项，我们使用空选项对象

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T16:49:24.857

关于你的最后一个问题，扩展`arguments[0]`相当于有一个显式的参数调用`settings`并执行：

```
$.fn.plugin = function(settings) {
    // extend the options from pre-defined values:
    var options = $.extend({
        callback: function() {}
    }, settings || {});

    // call the callback and apply the scope:
    options.callback.call(this);
}​ 
```

# web-services - Weblogic 10.3.6 忽略 @HandlerChain

> ID：13110810
> 
> 赞同：2
> 
> 时间：2012-10-28T16:41:45.110
> 
> 标签：web-services, weblogic, jax-ws

我创建了一个简单的 EJB3 WebService ，它应该被 SOAPHandler 拦截。在构建过程中我没有收到任何错误\警告（我曾经得到类路径错误，它们都已修复），并且我能够部署和调用 WS ，但服务器完全忽略了 HandlerChain 部分，它永远不会受到打击. 我的代码是：
处理程序：

```
public   class SecuritySOAPHandler implements SOAPHandler<SOAPMessageContext> { ... } 
```

豆子：

```
@Stateless
@WebService(
        portName = "ExampleWSPort",
        serviceName="ExampleWS"     
        )
@HandlerChain( file="handlerchain.xml")
public class ExampleWS {

    public ExampleWS()
    {

    }
    @WebMethod
 public String first(String input)
 {
     return input + " Got";
 } 
```

处理程序链.xml：

```
 <?xml version="1.0" encoding="UTF-8"?>

<jws:handler-chains xmlns:jws="http://java.sun.com/xml/ns/javaee">
<!-- Note:  The '*" denotes a wildcard. -->

    <jws:handler-chain name="MyHandlerChain">
        <jws:protocol-bindings>##SOAP11_HTTP ##ANOTHER_BINDING</jws:protocol-bindings>
        <jws:port-name-pattern 
              xmlns:ns1="http://handlersample.samples.ibm.com/">ns1:MySampl*</jws:port-name-pattern>
        <jws:service-name-pattern 
              xmlns:ns1="http://handlersample.samples.ibm.com/">ns1:*</jws:service-name-pattern>
        <jws:handler>
            <jws:handler-class>com.soaphandlers.SecuritySOAPHandler</jws:handler-class>
        </jws:handler>

    </jws:handler-chain>

</jws:handler-chains> 
```

任何帮助表示赞赏。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T16:05:29.397

我遇到了类似的问题，发现了以下问题：

*   显然，绝对路径或类路径不能很好地工作，因此要么将 xml 放在与 ExampleWS 类相同的文件夹中，要么使用 ../，例如，在我的情况下，我是这样的：

    `@HandlerChain(file="../../../../../../../META-INF/ws-handler-config.xml")`

*   来自示例的 jws: 命名空间也带来了问题，所以我把它简单化了：

    `<handler-chains xmlns="http://java.sun.com/xml/ns/javaee">
    <handler-chain>
    <handler>
    <handler-class>util.interceptors.SOAPLoggingHandler</handler-class>
    </handler>
    </handler-chain>
    </handler-chains>`

通过此更改，它可以工作！

# java - 覆盖 Spring Social 中的默认重定向视图

> ID：13110813
> 
> 赞同：4
> 
> 时间：2012-10-28T16:42:08.413
> 
> 标签：java, spring, spring-mvc, twitter, spring-social

我正在尝试覆盖 Spring Social 的默认行为，以便在连接到提供商（Twitter、Facebook 等）后重定向到“connect/{providerId}Connected”。

所以我试图通过覆盖方法**protected java.lang.String connectedView(java.lang.String providerId)来覆盖默认行为**

所以我将 ConnectController 子类化并尝试覆盖：

```
@Controller
public class CustomConnectController extends ConnectController{

    @Inject
    public CustomConnectController(
            ConnectionFactoryLocator connectionFactoryLocator,
            ConnectionRepository connectionRepository) {
        super(connectionFactoryLocator, connectionRepository);
    }

    @Override
    protected String connectedView(String providerId){
        //Do some logic

        return "redirect:/foo/bar;
    }

} 
```

请参阅控制器类的文档： http: [//static.springsource.org/spring-social/docs/1.0.x/api/org/springframework/social/connect/web/ConnectController.html](http://static.springsource.org/spring-social/docs/1.0.x/api/org/springframework/social/connect/web/ConnectController.html)

但我收到以下错误：

> 原因：java.lang.IllegalStateException：发现不明确的映射。无法映射 'org.springframework.social.connect.web.ConnectController#0' bean 方法 public org.springframework.web.servlet.view.RedirectView org.springframework.social.connect.web.ConnectController.connect(java.lang.String ,org.springframework.web.context.request.NativeWebRequest) 到 {[/connect/{providerId}],methods=[POST],params=[],headers=[],consumes=[],produces=[], custom=[]}：已经有 'customConnectController' bean 方法 public org.springframework.web.servlet.view.RedirectView org.springframework.social.connect.web.ConnectController.connect(java.lang.String,org.springframework. web.context.request.NativeWebRequest) 映射。

任何人都可以请指导。我的要求如下： 1\. 用户连接社交帐户（Twitter、Facebook 等）后 2\. 做一些业务逻辑 3\. 重定向到 /foo/bar 页面

请帮忙。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-28T17:08:04.397

好的，我自己找到了解决方案。为每个人发布答案，以便任何在愚蠢的事情上挣扎的人都可能受益：

实际上，我在我的配置中配置了 ConnectController，现在自定义控制器正在踩踏它，因此它说已经映射。从配置中删除配置可以解决问题。

在我的情况下，删除以下代码：

```
<bean class="org.springframework.social.connect.web.ConnectController">
        relies on by-type autowiring for the constructor-args
        <property name="applicationUrl" value="${application.url}" />
    </bean> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-21T11:21:56.133

好吧，您已经做对了所有事情，但忘记了添加

```
 @RequestMapping("/connect") 
```

如果您正在使用 Spring boot 并且没有 spring-config.xml 文件，您可以使用下面的代码。

这段代码对我有用

```
@Controller
@RequestMapping("/connect")
public class ChangeDefaultFlowController extends ConnectController {

    public ChangeDefaultFlowController(ConnectionFactoryLocator connectionFactoryLocator,
            ConnectionRepository connectionRepository) {
        super(connectionFactoryLocator, connectionRepository);
    }

    @Override
    protected String connectedView(String providerId) {
        return "redirect:/"+providerId;
    }

} 
```

[此链接提供了有关将重定向流更改为页面或其他休息控制器的更多说明](http://littlebigextra.com/how-to-change-the-default-spring-social-redirect-flow/)

# actionscript-3 - 如果 ActionScript 是一种垂死的语言，那么使用 ActionScript 技能的拯救语言在哪里？

> ID：13110816
> 
> 赞同：0
> 
> 时间：2012-10-28T16:42:45.467
> 
> 标签：actionscript-3

听说以后不支持 ActionScript。

是否有其他类似于 AS 的语言可以毫无问题地编写代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-28T20:54:03.760

我相信[Haxe(NME)](http://www.haxenme.org/)是最接近 AS 的语言。

语法略有不同：Number->Float, int & uint -> Int 等。包和类结构也有，总体而言，这是一个非常平滑的过渡。

这是[差异列表](http://www.haxenme.org/developers/documentation/actionscript-developers/)，请自行查看:)

HaxeNME 确实交叉编译，因此它可以针对 Flash、JS、C++、iOs、Android... 我想说 70-80% 的代码在目标之间是完全相同的，如果您需要一些特定于语言的方法，您可以告诉编译器类似于：

```
#if js
do something only JS target can do
#else 
for all other targets do this
#end 
```

很多以前的动作英雄加入了这个动作，社区非常活跃，这让我想起了 Flash 的黄金时代。

还有希望 ：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T20:05:22.960

ActionScript is [ECMAScript 262](http://www.ecma-international.org/publications/standards/Ecma-262.htm) or [ISO/IEC 16262](http://www.iso.org/iso/iso_catalogue/catalogue_tc/catalogue_detail.htm?csnumber=55755).

[There are several dialects](http://en.wikipedia.org/wiki/ECMAScript) of ECMA-262 including JavaScript, JScript, and J# as well as universal programming languages such as [Haxe](http://haxe.org/) capable of cross compiling.

[Adobe roadmap for the Flash runtimes](http://www.adobe.com/devnet/flashplatform/whitepapers/roadmap.html) gives insight to future direction of Flash and ActionScript.

# c# - 从文本/数字字符串创建变量只是一个数字 - Razor CSHTML

> ID：13110823
> 
> 赞同：1
> 
> 时间：2012-10-28T16:44:01.520
> 
> 标签：c#, asp.net

我有一个变量`var1`。在当前上下文中，它是从数据库中提取的，并且将是这些值之一：

> 2, 6, 7 6t, 7q, 8q,

这个数字永远只是个位数。

该数字只会是变量中的第一个字符。

我想从我输入的变量中创建一个字符变量（数字）。

例如，这里我的变量`Fac1Raw`的值为*3c*，我尝试使用此代码：

```
var Fac1 = (int)(Fac1Raw.ToString().Substring(0, 1)); 
```

但是我无法让它工作。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T07:29:42.647

您不能直接将 String 转换为整数类型。为此，您有 Parse 方法。如果您确定字符串不会为空并且第一个字符是数字，则可以在不捕获错误的情况下进行解析：

```
var Fac1 = Int32.Parse(Fac1Raw.ToString().Substring(0, 1)); 
```

如果您确实需要一些验证来防止您的代码崩溃：

```
string rawFac1 = Fac1Raw.ToString();
if (rawFac1.Length == 0 || !char.IsDigit(rawFac1[0]))
{
    //handle invalid value
}
else
{
    var Fac1 = Int32.Parse(rawFac1[0].ToString());
    //...rest of code
} 
```

# c - 除以零 - c 编程

> ID：13110825
> 
> 赞同：10
> 
> 时间：2012-10-28T16:44:08.780
> 
> 标签：c, floating-point, nan

我对下一个代码有疑问：

```
int main { 
double x = 0;
double y = 0/x;

if(y==1) {.....}
....
....
return 0;
} 
```

当我在我的计算机上运行代码时，我没有收到运行时错误，我看到了`y = -nan(0x8000000000000)`. 为什么除以零不是运行时错误？

此外，当我将第一行更改为`int x = 0;` 现在时，会出现运行时错误。有什么区别？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-28T16:48:34.793

您根本不能依赖这种“工作”（即始终以可移植的方式做同样的事情），对于第二种情况，它在 C 中是未定义的行为，如果您的实现未定义`__STDC_IEC_559__`（这是，我相信，这些天很少见）。

C99，§6.5.5/5

> / 运算符的结果是第一个操作数除以第二个操作数的商；% 运算符的结果是余数。**在这两种操作中，如果第二个操作数的值为零，则行为未定义。**

你在一种情况下得到一个“不是数字”而不是在另一种情况下得到一个事实是，一个是在浮点算术中完成的，在你的实现中（符合 IEEE 754 除零语义），`0/0`给出了一个南。

在第二种情况下，您使用的是整数运算——未定义的行为，无法预测会发生什么。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-28T16:46:55.653

您没有收到异常或错误的原因是因为对于 double、infinity 和 NaN 已定义（请参阅[IEEE floating point](http://en.wikipedia.org/wiki/IEEE_754-2008#Operations)）但是当您尝试对整数进行相同操作时，您会收到错误，因为 NaN/Infinity 不是定义

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-28T16:49:17.290

这是因为[IEEE 754](http://en.wikipedia.org/wiki/IEEE_754)标准定义了正无穷和负无穷的特殊值以及浮点值的“非数字”。

像这样的非浮点类型`int`没有定义那些特殊值，因此运行时由于未处理的错误而被终止。

这不是 C 特定的，您将在其他语言中看到非常相似（如果不相同）的行为，仅仅是因为此功能取决于硬件。

# python - 你如何在python中绘制相对频率

> ID：13110826
> 
> 赞同：2
> 
> 时间：2012-10-28T16:44:11.853
> 
> 标签：python, matplotlib, histogram, frequency

我正在寻找在 Python 中绘制一堆数字的相对频率。我需要使用这个`hist`功能，我在这个网站的其他地方看过，但我没有找到任何东西。

我正在做以下事情

```
x = array ([6.36,6.34,6.36,6.73,7.36,6.73])
hist (x) 
```

当我这样做时，我得到一个频率图，我如何使它成为相对频率？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T20:36:58.050

```
hist(x, density=True) 
```

关键字`density`将绘制数据，使得积分为 1 ( [doc](http://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.hist) )。对于旧版本的 Matplotlib，您需要`normed`改用。

如果您希望总和（而不是积分）为一

```
x = randn(30)
count,bins = np.histogram(x)
bar(bins[:-1],count,width = np.mean(np.diff(bins))) 
```

# google-maps-api-3 - 融合表过滤/查询

> ID：13110829
> 
> 赞同：1
> 
> 时间：2012-10-28T16:44:22.457
> 
> 标签：google-maps-api-3, google-api, google-fusion-tables

我正在使用由 Derek Eder 提供的带有融合表的问候可搜索地图模板。我可以将脚本连接到我的融合表并成功在地图上显示我的项目，但是当我尝试使用复选框从类型列中过滤时，地图上的数据不会改变。谁能帮我？这是我的网站：[http](http://bu.sixtag.com) : //bu.sixtag.com，如果您查看资源，则有一个 js 文件名 maps_lib.js，这是我的设置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T23:24:52.083

我只是快速查看了您的代码，看看是否可以提供任何帮助，因为我也在研究 Derek Eder 的一些精彩的融合表可搜索模板示例。我确实看到的是您的代码中的错误，特别是

```
Invalid row index 4\. Should be in the range [0-3]. 
```

如果我是你，我会让自己熟悉[console.log()](http://getfirebug.com/logging)，因为在发布帮助等之前先帮助自我诊断代码非常有用。

祝你好运！！

# javascript - 尽管自动播放设置为 false，但仍在播放移动视频

> ID：13110830
> 
> 赞同：0
> 
> 时间：2012-10-28T16:44:26.150
> 
> 标签：javascript, ios, html, mobile-safari, html5-video

我正在尝试将 设置`autoplay`为`false`，以便仅应请求启动视频播放。但是，在某些平台上，视频仍会在页面加载时自动播放。

片段是：

```
<video style="pointer-events: auto; top: 43px; left: 144px; width: 311px; height: 233px; position: absolute; overflow: visible; z-index: 4;" mute="0" controls="" autoplay="false"><source src="http://fcache.veoh.com/file/f/l1890828.mp4?e=1351456564&ri=6000&rs=100&h=652b686b21bf91bb57c13996ef6be62a" type="video/mp4"></video>​​​​​​​​​​​​​​ 
```

JsFiddle 在这里：http: [//jsfiddle.net/breakphreak/N5Dbq/](http://jsfiddle.net/breakphreak/N5Dbq/)

要尝试的 URL 在这里：http: [//jsfiddle.net/breakphreak/N5Dbq/show](http://jsfiddle.net/breakphreak/N5Dbq/show)

例如，在 iPad2 (iOS 6) 上播放视频，而在*新*iPad（或者我应该说 iPad3、iOS 5）上，视频仅在按下“播放”按钮时播放？

请问我做错了什么？我如何要求仅在明确的用户请求时才播放视频。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T16:52:33.550

尝试删除 autoplay="false"

[http://jsfiddle.net/N5Dbq/4/](http://jsfiddle.net/N5Dbq/4/)

```
<video width="320" height="240" controls="controls"> 
```

# css - Firefox 将额外的 1px 添加到带有边框半径的块元素

> ID：13110833
> 
> 赞同：1
> 
> 时间：2012-10-28T16:44:46.543
> 
> 标签：css, firefox, rendering, pixel

奇怪的是，就在最近（也许自从更新？）Firefox（16.0.1）在设置了边框半径的元素中给了我一个额外的白色或空白像素行。

我尝试修改很多属性，例如行高、溢出等，但似乎没有任何效果，并且由于其他奇怪的原因，我无法在渲染这些按钮的框架之外重现问题。但是，我尝试禁用我使用的 CSS 重置，我尝试使用 Firebug 禁用外围 CSS 中的某些其他值，但无济于事。

因为我不知道如何重现它，所以我整理了一张图表来展示这个问题：

![问题演示](../Images/520aa7a548064594ba1f0e09eae1ece4.png)

有没有人遇到过这个问题并且知道可能的解决方法？

编辑：我现在也注意到其他元素也搞砸了。这绝对是一个新的发展。即使输入看起来是错误的，并且为它们设置行高，也不会影响结果。见附加图：

![附加图形](../Images/78ef162d172c495e50f587f6bef9bf63.png)

这是第二张图中输入字段的 CSS 树：

```
.dynamicForm-componentEdit .componentLabel input.long {
    width: 320px;
}

.dynamicForm-componentEdit .componentSettings textarea, .dynamicForm-componentEdit .componentLabel textarea, .dynamicForm-componentEdit .componentSettings input, .dynamicForm-componentEdit .componentLabel input {
    background: -moz-linear-gradient(center top , #FFFFFF 0%, #FAFAFA 100%) repeat scroll 0 0 transparent;
    border: 1px solid #CDCDCD;
    border-radius: 6px 6px 6px 6px;
    color: #666666;
    font-size: 10px;
    height: 12px;
    line-height: 20px;
    margin-bottom: 4px;
    margin-right: 8px;
    margin-top: 4px;
    padding: 2px 6px;
    width: 130px;
}
input {
    font-family: Helvetica,Arial,Verdana;
    outline: 0 none;
}
* {
    margin: 0;
    padding: 0;
}
.dynamicForm-componentEdit {
    color: #AAAAAA;
}
.interfaceBlock-content {
    color: #666666;
    font-family: Verdana;
    font-size: 11px;
}
body {
    color: #333333;
    font-family: Helvetica,Arial,Verdana,Geneva;
    font-size: 13px;
    font-weight: 500;
    line-height: 16px;
    color: #000000;
    font-size: 100.01%;
    text-align: left;
} 
```

编辑#2：问题似乎与 CSS3 渐变有关。我改变了CSS：

```
background: -moz-linear-gradient(center top , #F7F7F7 0%, #E5E5E5 100%) repeat scroll 0 0 transparent; 
```

到：

```
background: none repeat scroll 0 0 #DDDDDD; 
```

看这张图：

![图形编号 3](../Images/f1ca20ca5d7091846299089945a2ed4f.png)

使用普通背景时问题消失！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T17:28:55.507

我能够通过应用来解决这个问题：

```
background-clip: padding-box 
```

到受问题影响的所有元素。

我不确定这是否是最好的方法，但它确实有效。问题是所有渐变定义都会覆盖设置 - 例如，它不能仅应用于所有 DIV。

因此，正确的定义如下所示：

```
background: -moz-linear-gradient(center top , #F7F7F7 0%, #E5E5E5 100%) repeat scroll 0 0 padding-box transparent; 
```

如果有人能想到更优雅和有效的方法，请随时发表评论或回答。

**编辑：**经过进一步研究，我发现填充框确实修复了所描述的渲染问题，但整个问题是由于其他原因而发生的，并且似乎影响了填充，这就是为什么输入字段中的文本（见上图 #2）是不垂直居中（应该是这样）。

最后我找到了罪魁祸首——我不太明白为什么它是一个：**Helvetica**

一旦我切换到 Arial，所有问题都消失了。

那么一定是字体渲染问题，或者字体指标中的某些东西弄乱了 Firefox 的渲染器？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T09:11:03.167

我的最后一个答案已被删除，我认为这是因为我在另一项具有相同问题的任务上给出了相同的答案。因此，如果您想了解我是如何解决此问题的，请在此处查看答案：[https ://stackoverflow.com/a/13273215/1806644](https://stackoverflow.com/a/13273215/1806644)

# php - 在 HTML 缓慢加载页面中嵌入 PHP

> ID：13110835
> 
> 赞同：0
> 
> 时间：2012-10-28T16:45:05.963
> 
> 标签：php, html, twitter

我有一个获取推文并回显它们的 php 脚本。问题是页面需要一些时间来加载。

有没有办法我可以首先加载页面，当推文准备好时，用推文编辑页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T16:55:20.470

document.readyState 属性可用于检查您的页面是否已加载。

```
if(document.readyState === "complete") {
  //Already loaded!
}
else {
      //Add onload or DOMContentLoaded event listeners here: for example,
      window.addEventListener("onload", function () {

          /*   you may use ajax to get the tweet contents like this. */
      xmlhttp.onreadystatechange=function()
              {
              if (xmlhttp.readyState==4 && xmlhttp.status==200)
                {
                document.getElementById("myDiv").innerHTML=xmlhttp.responseText;
                }
              }
            xmlhttp.open("GET","tweetsPage.php",true);
            xmlhttp.send();

    }, false);

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T16:48:32.820

试试 Chirp.js，这是一个非常好的用 Javascript 加载推文的库：http: [//lab.rog.ie/chirp/](http://lab.rog.ie/chirp/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T16:54:04.560

我会使用 AJAX，但另一种方法是创建一个 iframe，它使用您的 twitter 代码并将文件标记为其源

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-28T16:55:52.657

听起来 PHP 并不是真正需要的。我会选择像 Chirp.js 这样的 javascript 选项；正如刚才提到的。

但是，如果您不喜欢使用 PHP（也许您在脚本中内置了其他功能？）我会选择 jQuery/AJAX 路线。

*   有一个占位符 div - 设置 CSS 以确保它不会破坏布局，并有一个加载图像或类似的。
*   对 PHP 脚本运行 $.AJAX() 请求，然后直接将请求的结果输出到占位符 div 中

这应该最大限度地减少任何布局问题，同时在脚本加载时仍提供一致的用户体验。由于 $.AJAX() 是异步的 - 页面上的任何功能都不会被阻止，而不是当前页面甚至不显示的问题！当然，唯一的缺点是推文仍然需要时间来加载。

也许如果您发布了您的 PHP 脚本或告诉我们您的服务器设置，我们也许能够解决真正的问题 -**为什么 PHP 脚本需要这么长时间才能执行？**这可能是问题中最有趣的部分，因为您可能做错了一些事情，这可能会导致稍后在生产中出现问题。

# java - 在Java中如何从客户端获取服务器日期时间

> ID：13110843
> 
> 赞同：0
> 
> 时间：2012-10-28T16:45:36.637
> 
> 标签：java, network-programming

我想获取服务器日期时间并将其设置为使用 Java Socket 编程的客户端。示例当我传递服务器 IP 地址时，它将返回服务器的日期和时间并将其设置给客户端。在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T17:57:52.353

1.  new ServerSocket / accept
2.  new Socket / connect / read
3.  Server get time / write
4.  client set local time

For each point you may find an answer in SO, and a [tutorial at Oracle](http://docs.oracle.com/javase/tutorial/networking/sockets/index.html).

# rdf - OWL 限制 - 定义仅包含具有特定属性值的属性的类

> ID：13110845
> 
> 赞同：8
> 
> 时间：2012-10-28T16:45:56.740
> 
> 标签：rdf, owl, restriction, restrictions

我目前正在玩 OWL，尤其是有限制。我正在尝试创建一个执行以下操作的查询：

假设我有一个类“电影”，它有一个属性“电影”（包含“电影”类型的对象）。“电影”类包含一个名为“流派”的属性。现在我想创建一个类 ActionCinemas，它只包含类型为“动作”的电影。

我真的不知道该怎么做。我正在考虑用交叉点或基数做一些事情，但我不确定。

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-28T21:45:32.030

您需要 allValuesFrom 限制和 hasValue 限制的组合，例如：

乌龟语法：

```
 my:ActionCinema a owl:Class ;
      rdfs:subClassOf my:Cinema,
                      [ a owl:Restriction; 
                        owl:onProperty my:hasMovie ;
                        owl:allValuesFrom [ a owl:Restriction ; 
                                            owl:onProperty my:hasGenre ;
                                            owl:hasValue my:Action ]
                      ] . 
```

曼彻斯特 OWL 语法：

```
Class: ActionCinema
   SubClassOf: Cinema that hasMovie only ( hasGenre value Action ) 
```

# entity-framework - 实体框架查询 - 自动编译已关闭，但第二个查询仍然快得多

> ID：13110849
> 
> 赞同：2
> 
> 时间：2012-10-28T16:46:28.127
> 
> 标签：entity-framework, entity-framework-4

我得到了 .net 4.0 和 Entity Framework 4.0 和 Visual Studio 2012 和 Windows 7，64 位架构，4 核。

我正在使用 AdventureWorks 数据库在控制台应用程序上执行一些测试。困扰我的是我第一次服用一些产品比第二次要花更多的时间，我想知道为什么。

我知道实体框架在第一次查询期间执行了一些任务，所以我提前执行了一些额外的查询。

例如，我的主要功能包含以下内容：

```
using (var context = new Context())
{
   execute context.Clients.ToList();   // <- this takes something like 300 ms
}

using (var context = new Context())
{
   execute context.Products.ToList();   // <- this takes something like 200 ms
}

using (var context = new Context())
{
   execute context.Products.ToList();   // <- this takes something like 10 ms
} 
```

因此，您会看到第一个包含所有“第一次执行”事情的查询需要 300 毫秒。

第二个需要 200s，第三个和第二个一样只需要 10ms。

所以我的问题是：为什么我的第三个查询需要这么短的时间？我不使用自动编译（因为 EF 4.0 中没有此类）或 CompiledQuery 类。

此外，我对 Products 的第一次调用不是对模型的第一次查询，因此视图生成的所有工作都应该已经完成​​。

但是第一次还是要花很多时间，第二次我打电话给产品时又是如此之快。它是否在某处缓存了某些东西？

我注意到的另一件事是，当我将它编译为 64 位时，它需要很长的时间，比如一秒钟。当我将它编译为 32 位时，它需要我给的数量。

你能在这里给我一些提示吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T20:10:02.533

阅读本文：[性能注意事项（实体框架）](http://msdn.microsoft.com/en-us/library/cc853327%28v=vs.100%29.aspx)

除了生成视图之外，EF 还需要做很多工作。

此外，您的第一个查询`Products`可能会导致您的数据库服务器将数据读入其缓存。您应该使用 SQL Server Profiler 来区分数据库性能差异和客户端 (EF) 性能差异。

关于 64 位问题，这让我想起[了之前的 SO question](https://stackoverflow.com/questions/12584628/entity-framework-spinup-much-slower-on-x64-vs-x86)。

# java - 无法在 Eclipse 中正确添加 API

> ID：13110850
> 
> 赞同：1
> 
> 时间：2012-10-28T16:46:37.150
> 
> 标签：java, eclipse, api

我正在尝试在 Eclipse 中向我的 java 项目中添加一个外部 api。从 sourceforge 下载 api 文件夹后，我找到以下文件：jeplite-0.8.7.jar jeplite-0.8.7a-bin.jar jeplite-0.8.7a-src.jar

这就是我一直在做的事情： 1）将 jeplite-0.8.7.jar 复制到我项目中的 libs 文件夹中 2）右键单击项目，转到属性 3）从左侧窗格中选择 Java 构建路径，然后单击库选项卡4) 点击 Add Jars 并导航到 jeplite-0.8.7.jar 5) 点击 ok 并且 jeplite-0.8.7.jar 出现在 Referenced Libraries 文件夹中

但是，这不起作用。我无法使用 API。我可以导入包，但它们在工作区中显示为空（白色包）。

我尝试将 jeplite-0.8.7a-src.jar 作为源附加，但这不起作用。这是 api 顺便说一句：http: [//jeplite.sourceforge.net](http://jeplite.sourceforge.net)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T16:53:59.733

使用 zip 工具打开文件，您会发现它只包含 .java 源文件，而不包含 .class 文件。您需要将 jeplite-0.8.7a-bin.jar 文件添加为库。

# ios - 将 Google Analytics 跟踪集成到 IOS 应用程序中

> ID：13110860
> 
> 赞同：4
> 
> 时间：2012-10-28T16:47:39.673
> 
> 标签：ios, xcode, google-analytics, tracking

我想将 Google Analytics Tracking 集成到我的 IOS APP 中。

我已经集成了谷歌分析库并将其添加到我的应用程序中。

参看。[https://developers.google.com/analytics/devguides/collection/ios/v2/](https://developers.google.com/analytics/devguides/collection/ios/v2/)

进入我的代码以跟踪我的视图联系人

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.
    self.trackPageView = @"Contact Screen";
    //
} 
```

A 出现此错误**“在‘ContactViewController’类型的对象上找不到属性‘TrackPageView’”**

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-09-27T19:37:09.490

今天我遇到了同样的错误，尽管设置文档说明了什么，但该属性被称为`screenName`. 所以只要在你的`viewDidLoad:`

```
self.screenName = @"A name"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T16:53:05.183

您试图在您实际应该设置属性的位置设置错误的属性 ( `trackPageView`) 。代码应如下所示：`viewDidLoad:``trackedViewName`

```
self.trackedViewName = @"Contact Screen"; 
```

同样在您的头`.h`文件 ( ) 中，确保您`@interface`从`GAITrackedViewController`类中继承，如下所示：

```
@interface YourContactScreenController : GAITrackedViewController 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-14T15:59:12.113

如果您使用自动屏幕跟踪，那么您必须这样做：

**@目标C：**

1.  将#import "GAITrackedViewController.h" 添加到 XXX.h 文件中
2.  从 GAITrackedViewController 扩展当前类 [例如。@interface ClockViewController : GAITrackedViewController]
3.  将此行添加到 XXX.m 文件的 viewDidLoad() 方法中 self.screenName = @"Login";

**注意：**希望您在项目中正确初始化和配置 GAI。

# c++ - C++ if 语句中布尔条件值的赋值不起作用？

> ID：13110861
> 
> 赞同：6
> 
> 时间：2012-10-28T16:47:42.700
> 
> 标签：c++, windows, visual-c++

我一直在使用 SDL 库用 C++ 编写游戏。今天在改变我的玩家角色类的工作方式时，我遇到了一个非常令人费解的问题。以下代码构成了我允许玩家发射子弹的逻辑的一部分。控制变量 b_canFire 和 b_shouldFire（我打算重命名它们以使其更有意义）在类中的其他位置设置，以允许该函数在用户按下键时执行。

```
bool PlayerChar::DoFiring()
{
    if(b_canFire && b_shouldFire)
    {
        Fire(box.x + 22, box.y); // This fires a bullet
        b_canFire = false; // Does not work
        b_shouldFire = false; // Does not work

        return true;
    }
} 
```

当我使用调试器单步执行此代码时，很明显 b_canFire 和 b_shouldFire 的值没有被 if 语句中的赋值更改为 false。但是，如果我将代码更改为以下内容：

```
bool PlayerChar::DoFiring()
{
    if((b_canFire) && (b_shouldFire))
    {
        Fire(box.x + 22, box.y); // This fires a bullet
        b_canFire = false; // Works
        b_shouldFire = false; // Works

        return true;
    }
} 
```

或者

```
bool PlayerChar::DoFiring()
{
    if(b_canFire == true && b_shouldFire == true)
    {
        Fire(box.x + 22, box.y); // This fires a bullet
        b_canFire = false; // Works
        b_shouldFire = false; // Works

        return true;
    }
} 
```

突然间，任务奏效了。我也尝试在一个空的测试项目中复制这种情况，如下所示：

```
bool bC = true;
bool bD = true;

if(bC == true && bD == true)
{
    bC = false; // Works
    bD = false; // Works
}

bool bE = true;
bool bF = true;

if(bE && bF)
{
    bE = false; // Works
    bF = false; // Works
} 
```

但是，这两个示例都完全按照应有的方式分配了值。显然我在这里遗漏了一些东西，但对于我的生活，我看不到它是什么。我已经想出了如何解决问题以使我的代码正常工作，但是不知道是什么破坏了第一个示例中的分配真的让我很困扰，因为到目前为止我所学到的关于 C++ 的一切都告诉我它们应该可以正常工作。

这是我第一个使用 C++ 语言的主要项目，我还在学习中，所以任何有经验的程序员的帮助或建议都会很棒。

谢谢！

编辑：

这里要求的是整个班级：

```
#include <list>
#include "SDL_mixer.h"
#include "hiGlobalVars.h"
#include "hiGlobalObjects.h"
#include "hiAssetManager.h"
#include "hiRendering.h"
#include "hiTimer.h"
#include "hiBullet.h"
#include "hiPlayerChar.h"
#include "hiDebugger.h"

using std::list;

PlayerChar::PlayerChar()
{
    moveSpeed = 6;
    moveDir = NONE;
    b_canFire = true;
    b_shouldFire = false;
    box.x = 0;
    box.y = 470;
    box.w = 38;
    box.h = 40;
}

PlayerChar::~PlayerChar()
{

}

void PlayerChar::SetPos(int x)
{
    box.x = x;
}

void PlayerChar::Draw()
{
    BlitSurface(box.x, box.y, assets.ss_playerchar_idle, ss_screen);
}

bool PlayerChar::DoFiring()
{
    if((b_canFire) && (b_shouldFire)) 
    {
        // Fire a bullet
        Fire(box.x + 22, box.y);
        b_canFire = false;
        b_shouldFire = false;

        return true; // fired a bullet
    }
    return false; // did not fire a bullet
}

void PlayerChar::Fire(int x, int y)
{
    // Create a new bullet at the correct location and add it to the global bullet list
    Bullet* bullet = new Bullet();
    bullet->SetPos(x, y);
    bullets.push_back(bullet);

    // Play bullet firing sound
    Mix_PlayChannel(-1, assets.mc_firebullet, 0);
}

void PlayerChar::HandleInput(Uint8* keystates)
{
    if(keystates[SDLK_LEFT] && keystates[SDLK_RIGHT])// Both direction keys
        moveDir = NONE;
    if(keystates[SDLK_LEFT] && !keystates[SDLK_RIGHT]) // Left key and not right key
        moveDir = LEFT; 
    if(!keystates[SDLK_LEFT] && keystates[SDLK_RIGHT]) // Right key and not left key
        moveDir = RIGHT; 
    if(!keystates[SDLK_LEFT] && !keystates[SDLK_RIGHT]) // Neither direction key
        moveDir = NONE;

    if(keystates[SDLK_SPACE]) // Space bar
        b_shouldFire = true;

    if(!keystates[SDLK_SPACE]) // Allow another bullet to be fired after release
        b_canFire = true;
}

void PlayerChar::Move()
{
    if(moveDir == LEFT && box.x > 0) // If not off screen, move
        box.x -= moveSpeed;
    if(moveDir == RIGHT && box.x < (ss_screen->w - box.w)) 
        box.x += moveSpeed;
} 
```

和标题：

```
#ifndef __hiPlayerChar__
#define __hiPlayerChar__

#include "SDL.h"
#include "SDL_mixer.h"
#include "hiGlobalVars.h"

enum MoveDir
{
    LEFT,
    RIGHT,
    NONE
};

class PlayerChar
{
private:
    Sint16 moveSpeed;
    MoveDir moveDir;
    bool b_canFire;
    bool b_shouldFire;

public:
    // Ctr & Dtr
    PlayerChar();
    ~PlayerChar();

    // Functions
    void SetPos(int x);
    bool DoFiring();
    void Fire(int x, int y);
    void Move();
    void Draw();
    void HandleInput(Uint8* keystates);

    // Size and position
    SDL_Rect box;
};

#endif 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T17:12:15.527

它缺少函数中的最后一个返回指令：

```
bool PlayerChar::DoFiring()
{
    if(b_canFire && b_shouldFire)
    {
        Fire(box.x + 22, box.y); // This fires a bullet
        b_canFire = false; // Does not work
        b_shouldFire = false; // Does not work

        return true;
    }
    return false; // WAS MISSING HERE
} 
```

然后，如果您的 b_canFire、b_shouldFire 中的任何一个为 false，则您的函数将返回任何 (UB)。

# android - Android中采样传感器的服务或异步任务？

> ID：13110862
> 
> 赞同：2
> 
> 时间：2012-10-28T16:47:47.540
> 
> 标签：android, android-service, android-sensors

我必须从加速度计、陀螺仪、麦克风和 GPS 等各种传感器获取数据。传感动作不应该是连续的，而是应该根据各种策略（例如省电）定期安排单个短间隔的采样。每个传感器采样动作持续几秒钟，比如 5 秒钟。我会为每个传感器实现一个“客户端”，在必要时负责监听传感器数据，以及一个控制客户端执行的“控制器”，但我不确定如何实现这一点。

为每个客户实现一项服务是否正确？还是一个简单的 AsyncTask 或 Handler 会更好？

如果每个客户端负责一个单一的传感动作，在单个 onStartService() 中执行，或者如果 onStartService() 动作启用一个周期性的采样动作会更好？帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T16:50:54.807

这听起来像是 a 的任务`Service`，由`Alarm`s 在（定期）预定时间间隔触发。

An`AsyncTask`通常是在用户完成一些交互并且系统应该执行“长时间运行”操作（如网络 i/o）之后启动的，否则可能会阻塞 UI。

请注意，也很有可能触发类似 an `AsyncTask`-have a look at的服务`IntentService`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-28T17:43:09.227

我建议您在这里查看我对类似问题的回答：[Service v/s AsyncTask](https://stackoverflow.com/questions/13110047/service-v-s-asynctask/13110770#13110770)。

就个人而言，我会使用一个简单`Handler`的任务来发布一个以特定时间间隔运行的任务。

例子：

```
private Handler mHandler = new Handler();

private void startTimer(Runnable Task, long delay) {  
    mHandler.removeCallbacks(Task);       
    mHandler.postDelayed(Task, delay);    
}

private void stopTimer(Runnable Task) {  
    mHandler.removeCallbacks(Task);       
}

private Runnable registerListeners = new Runnable() {
    public void run() {
        startTimer(registerListeners, 10*60*1000); //register to run again in 10 minutes
        startTimer(unregisterListeners, 5*1000); //to unregister in 5 seconds 
        //here register your listeners
    }
};

private Runnable unregisterListeners = new Runnable() {
    public void run() {
        //here unregister your listeners
    }
}; 
```

当您要开始收听过程时：

```
//To start you listeners
startTimer(registerListeners, 0); 
```

当你想停止一切时：

```
//To stop registering/unregistering listeners
stopTimer(registerListeners); 
```

**注意：**如果您在侦听器中执行长时间运行的代码，那么您应该查看我上面给出的链接中的答案。

问候。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-23T08:45:53.493

来自 android 开发者网站的最佳实践

[访问和使用传感器的最佳实践](http://developer.android.com/guide/topics/sensors/sensors_overview.html#sensors-practices)

[后台作业的最佳实践](http://developer.android.com/training/best-background.html)

# build - Sublime Text 不构建任何东西

> ID：13110863
> 
> 赞同：4
> 
> 时间：2012-10-28T16:47:53.490
> 
> 标签：build, sublimetext2

我在 Ubuntu Linux 中使用了 Sublime Text 2 并且工作得很好。

现在，当我在 Windows 中使用它时，我无法构建任何东西。它在底部的状态栏中出现“建筑”，然后什么也不做。我做了一个简单的测试，比如在 python 构建系统中构建一个打印“hello world”，但没有任何反应。

我错过了什么？顺便说一句：python 在系统路径中

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-28T18:29:18.840

我不确定确切的问题是什么，您可以尝试以下方法。

**0.重新检查**

Sublime text 2 只`python -u $file`在 linux 和 windows 上调用。我将首先仔细检查此命令在新的 cmd 窗口中是否有效。

**1.补丁执行.py**

在 Windows 系统上，由构建过程打开的新窗口是隐藏的。这会阻止 GUI 和 python 终端的出现。

`Packages\Default\exec.py`您可以通过注释掉第 33 行来禁用此修补：

```
startupinfo.dwFlags |= subprocess.STARTF_USESHOWWINDOW 
```

**2.间接调用python**

另一种选择是修改`Packages/Python/Python.sublime-build`，使其调用一个bat文件，然后执行python文件。（这是我目前正在为 .swf 文件做的事情）

**3.硬编码Python路径**

或者，这并不理想，您可以尝试将 python 路径硬编码到构建文件中，例如：

```
{
    "cmd": ["C:\\python27\\python.exe", "-u", "$file"],
    "file_regex": "^[ ]*File \"(...*?)\", line ([0-9]*)",
    "selector": "source.python"
} 
```

希望上述工作之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-24T02:04:40.707

我有同样的问题

```
cmd: ["mongo","<","$file"] 
```

当我改为

```
cmd: ["mongo $file"] 
```

有效。

# c# - Windows 应用商店应用用户控制项目上的“Xaml 解析失败”

> ID：13110867
> 
> 赞同：6
> 
> 时间：2012-10-28T16:48:21.680
> 
> 标签：c#, xaml, microsoft-metro, windows-store-apps

我一定错过了一些简单/基本的东西，我未能在我的 Windows 应用商店应用项目中引用 Windows 应用商店应用类库/Windows 运行时组件。

我把所有东西都剥离到它的准系统状态。这就是我所拥有的：

**用户控制项目 (DummyItem.xaml)：**

```
<UserControl ...>
  <Grid Background="Red">

  </Grid>
</UserControl> 
```

**我的 Windows 应用商店应用程序的 MainPage.xaml：**

```
<Page ...
  xmlns:c="using:Midas.UI.Cards">

  <Canvas Background="{StaticResource ApplicationPageBackgroundThemeBrush}">
      <c:DummyItem Width="150" Height="100"></c:DummyItem>
  </Canvas>
</Page> 
```

我能够构建项目，但在运行时显示“XAML Parsing Failed”。我无法预览 MainPage.xaml 设计器上的控件，它显示“无法创建 DummyItem 的实例”。

自 Visual Studio 11 RC 以来，我一直遇到这个问题，并且必须发布我的应用程序，并将所有用户控件的代码复制到 Windows 应用商店应用程序项目本身中才能正常工作。任何善良的灵魂可以为我指出正确的方向吗？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T08:35:49.447

这是 Visual Studio 2012 中的一个已知问题。如果程序集的名称包含一个点，则会出现问题。请参阅：[http ://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/fa2d8d53-254c-4d4a-b39a-110fde0d6c80](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/fa2d8d53-254c-4d4a-b39a-110fde0d6c80)

# php - 将一个数组拆分为 3 个数组

> ID：13110876
> 
> 赞同：1
> 
> 时间：2012-10-28T16:49:23.160
> 
> 标签：php

> **可能重复：**
> [将一个数组分割成 4 个其他数组](https://stackoverflow.com/questions/12876333/slice-an-array-into-4-other-arrays)

可以使用以下方法将数组拆分为 3 个较小的数组：

```
$things = array('...');    // an array containing 9 things
$things = array_chunk($things, count($things)/3); 
```

**问题：**但是，当`count($things)`数组中的项目数不能除以 时`3`，我最终得到**4 个**较小的数组。例如，如果我在 array 中有 10 个元素`$things`，输入它`array_chunk()`会给我 3 个包含 3 个元素的数组，以及一个包含 1 个元素的第 4 个数组。

如何将一个数组分成 3 个较小的数组，这样如果我遇到上面示例中的情况，我最终会得到

```
count($things[0]) == 4
count($things[1]) == 4
count($things[2]) == 2 
```

基本上我正在做的是取一个大数组并将其尽可能平均地显示为 3 列。它是按字母顺序排序的，所以顺序很重要。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-28T16:51:13.457

试试`ceil(count($things) / 3)`，所以分割点向上取整。对于 11 项数组，这会给你（比如说）4/4/3 而不是 3/3/3/2。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-28T17:24:07.127

检查我在这个[重复问题](https://stackoverflow.com/questions/12876333/slice-an-array-into-4-other-arrays/12876477#12876477)上给出的答案，然后更改`4`为`3`：

```
$groups = array_chunk($all,(int)ceil(count($all)/3)); 
```

# math - 多输入多输出函数的高斯牛顿最小化

> ID：13110880
> 
> 赞同：1
> 
> 时间：2012-10-28T16:49:41.900
> 
> 标签：math, mathematical-optimization, minimization, newtons-method

给定矩阵形式的输入输出函数：

```
|y1|   =  |p1  p2|   |x1|     |p5| 
|y2|    = |p3  p4| * |x2|  +  |p6| 
```

带`p1−p6`参数。我想使用高斯牛顿法最小化最小二乘误差。假设我们有 100 个测量值。我的问题是关于残差向量的计算和大小。

```
|r1|   |y1|  ( |p1  p2|   |x1|   |p5| )
|r2| = |y2| -( |p3  p4| ∗ |x2| + |p6| ) 
```

r [i] = 输出 - f（输入，参数）

错误 = 总和 (r [i] ² )

为了计算误差最小的参数，我们有：

p [i+1] =p [i] + Δ

Δ= (J ^T *J) ^(-1) * J ^T * r [i]

我认为每个的大小如下：

输入向量（x）：100x2

输出向量（y）：100x2

剩余（r）：100x2

雅可比 (J) : 100x6

参数（pi）：6x1（六个参数）

如您所见，Δ 的大小将是 6x2，这似乎与`p_i+1` 现在我的残差向量计算过程是否正确？如果是，我该如何计算参数的向量？如果不是，正确的答案是什么？

另一件事是关于参数矩阵的计算方式`J`（雅可比）。

太感谢了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T17:54:19.873

Delta 向量与参数向量的大小相同。

实际上，在这种情况下，无需进行完整的最小二乘即可求解参数。不幸的是，我无法在网上找到参考资料，因此我试图解释该方法：

我们想找到一个矩阵 M 和一个向量 t，使得给定 N 个点 Y[] 和 N 个点 X[]，误差 S 尽可能小，其中

```
S = Sum{ i | (Y[i]-M*X[i]-t)'*(Y[i]-M*X[i]-t)} 
```

(' 是转置)。

演习是：

a/ 计算 Y[] 的平均 Y^ 并从每个 Y[i] 中减去它，得到 y[i]

b/ 计算 X[] 的平均 X^ 并从每个 X[i] 中减去它，得到 x[i]

c/ 计算矩阵

```
A = Sum{ i | y[i]*x[i]'} 
```

和

```
C = Sum{ i | x[i]*x[i]'} 
```

d/ 如果 C 不可逆（这意味着所有的 X[] 都在一条线上）你有点卡住了，或者至少这个方法失败了；否则计算

```
M = A*inverse(C) 
```

e/ 最后，计算

```
t = Y^-M*X^ 
```

为什么这行得通？

首先，如果我们认为 M 是固定的，那么很容易看出使 S 最小化的 t 只是 Y[i]-M*X[i] 的平均值；所以我们在求 M 时也可以使用这个 t。将 t 代入 S 的公式中，我们得到

```
S = Sum{ i | (y[i]-M*x[i])'*(y[i]-M*x[i])} 
```

现在让 Tr() 表示将矩阵映射到其迹线（对角元素之和）的函数。一个非常有用的技巧是对于向量 v 我们有

```
v'*v = Tr( v'*v) = Tr( v*v') 
```

将此应用于 S，并扩展产品，我们得到

```
S = Sum{ i | y[i]'*y[i]} - Tr( A*M') - Tr( M*A') + Tr( M*C*M') 
```

如果 C 是可逆的，我们可以完成平方并得到 (这里 D = inverse(C))

```
S = Sum{ i | y[i]'*y[i]} - Tr( A*D*A') + Tr( (M-A*D)*C*(M-A*D)'} 
```

前两项不依赖于 M；第三个永远不会是负数，可以通过选择 M=A*D 使其为零。

# java - Java图形界面，如何轻松制作？

> ID：13110881
> 
> 赞同：0
> 
> 时间：2012-10-28T16:49:44.653
> 
> 标签：java, user-interface

我想用gui制作一个java程序。我对德尔福非常熟悉。它有一个内置的表单生成器，这太不可思议了！

我注意到 Eclipse 有一个内置的表单设计器......有什么好处吗？我应该使用别的东西吗？想知道在 java 中设计表单 gui 的最佳方法是什么。任何建议将不胜感激。

如果您熟悉 Delphi，如果可能的话，我会喜欢它的工作原理。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T17:05:45.617

Netbeans 中的 GUI Builder 令人印象深刻。在我看来，Netbeans GUI Builder 是少数几个能够正确完成工作的 GUI 构建工具之一。Netbeans 网站上提供了完整的描述，并提供了很好[的入门](http://netbeans.org/features/java/swing.html)[教程](http://netbeans.org/kb/docs/java/quickstart-gui.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T17:06:48.063

您必须在 NetBeans IDE 中使用 Form Builder。它非常易于使用。它是设计 JAVA UI 的最佳方式之一。您也可以访问这里[http://docs.oracle.com/javase/tutorial/uiswing/learn/](http://docs.oracle.com/javase/tutorial/uiswing/learn/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T17:01:44.603

我建议使用[Adob​​e Flex](http://www.adobe.com/products/flex.html)。我有各种各样的 GUI 组件，并且通过`XML`. 因此，基本上，您的 Java 对象被发送`XML`到您的 GUI 端，并且您从 GUI 端接收作为 XML 的数据，您可以从中非常容易地获取数据并将其转换为您的 Java 对象。因此，这使得与 Java 应用程序的交互如此顺畅。

几个月前我个人开始使用它，我非常喜欢它。现在它已经成为一种`Open Source`产品，你可以很容易地得到它并亲自动手。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-28T17:18:50.440

我认为，您首先要查找要使用的 java gui 框架，然后查看是否有任何 Ide 工具可以帮助您进行设计。

# collections - Backbone 无法从集合中移除项目

> ID：13110885
> 
> 赞同：1
> 
> 时间：2012-10-28T16:50:21.767
> 
> 标签：collections, backbone.js, undefined

我写了以下内容，由于某种原因，当我尝试从集合中删除项目时，它为`removeItem`函数中的项目返回 undefined：

```
Todos = (function(){

//////////////////////////
// 
//  MODEL
// 
//////////////////////////

var TodoModel = Backbone.Model.extend({

    defaults: {
        id: null,
        item: null
    }

});

//////////////////////////
// 
//  COLLECTION
// 
//////////////////////////

var TodoCollection = Backbone.Collection.extend({

    model: TodoModel

});

//////////////////////////
// 
//  VIEW
// 
//////////////////////////

var TodoView = Backbone.View.extend({

    el: $('#todos'),

    itemField: $('#new-item'),

    initialize: function(){
        this.el = $(this.el);
    },

    events: {
        'submit form': 'addItem',
        'click .remove-item': 'removeItem',
        // Debug
        'click #print-collection': 'printCollection'
    },

    template: $('#item-template').html(),

    render: function(item) {
        var templ = _.template(this.template);
        var id = _.uniqueId('todo_');
        this.el.children('ul').append(templ({id: id,item: item}));
    },

    addItem: function(e) {
        e.preventDefault();
        item = this.itemField.val();
        // Call render
        this.render(item);
        // Clear field
        this.itemField
            .val('')
            .focus();
        // Add to collection
        var newItem = new TodoModel({
            item: item
        });
        this.collection.add(newItem);
    },

    removeItem: function(e) {
        var thisid = this.$(e.currentTarget).parent('li').data("id");
        var thisitem = this.collection.get(thisid);
        thisitem.remove();
        // Remove from DOM
        $(e.target).parent('li')
            .fadeOut(300,function() {
                $(this).remove();
            });
    },

    printCollection: function(){
        this.collection.each(function(item) {
            console.log(item.get('item'));
        });
    }

});

//////////////////////////
// 
//  SELF
// 
//////////////////////////

self = {};
self.start = function(){
    new TodoView({collection: new TodoCollection()});
};
return self;

}); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-28T20:25:20.720

模型没有`remove`方法（除非您自己添加了一个），所以这不起作用：

```
var thisitem = this.collection.get(thisid);
thisitem.remove(); // <------ this goes boom! 
```

模型确实有[`destroy`](http://backbonejs.org/#Model-destroy)方法，所以你可以：

```
thisitem.destroy(); 
```

这将告诉服务器模型已经消失，并且`"destroy"`它触发的事件将通知集合模型已经消失。如果您不想与服务器对话，则可以将集合告诉[`remove`](http://backbonejs.org/#Collection-remove)模型：

```
this.collection.remove(thisitem); 
```

这将从集合中删除它而不会打扰服务器。

切换到`this.collection.remove`作品：http: [//jsfiddle.net/ambiguous/8chHf/](http://jsfiddle.net/ambiguous/8chHf/)

* * *

当我在这里时，您在这里有一个隐藏的问题：

```
self = {}; 
```

当您可能想要分配给`self`名为[. `window`](https://developer.mozilla.org/en-US/docs/DOM/window.self)`self`仅此就足够了：

```
return {
    start: function() {
        new TodoView({collection: new TodoCollection()});
    }
}; 
```

或者，如果您愿意，也可以这样做：

```
var self = {};
self.start = function(){
    new TodoView({collection: new TodoCollection()});
};
return self; 
```

我更喜欢使用`_this`or`that`代替，因为如果你忘记了in或者你不小心忘记了声明，可能会导致`self`有趣的错误。是的，我很难学到这一点。`window.self``var``var self;``self`

# matlab - 避免情节/步骤/...输出

> ID：13110886
> 
> 赞同：2
> 
> 时间：2012-10-28T16:50:22.360
> 
> 标签：matlab

是否有任何功能可以避免 m 文件的绘图输出？

我的意思是我在文件的开头放置了一个函数（如 clc），然后所有绘图函数都被阻止。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T09:44:13.057

您可以使用自己的（嵌套在您的函数内或同一目录中）重载内置绘图函数：

```
function myfun(a,b)
    plotting = false;
    plot(a,b);
    plot(b,a);

    function varargout = plot(varargin)
        if plotting
            [varargout{1:nargout}] = builtin('plot',varargin{:});
        end
    end
end 
```

当你打电话时什么都不会发生`myfun`，除非你改变`plotting=false`路线。

有关重载内置函数的额外信息：[http ://www.mathworks.nl/support/solutions/en/data/1-18T0R/index.html?product=ML&solution=1-18T0R](http://www.mathworks.nl/support/solutions/en/data/1-18T0R/index.html?product=ML&solution=1-18T0R)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T11:10:27.697

您可以使用以下命令使*所有*matlab 绘图不可见：

```
set(0, 'DefaultFigureVisible', 'off'); 
```

更改`off`为`on`反转该过程（您可能需要这样做，因为这将关闭您的*所有*情节！）

您可以将该行添加到您的 m 文件的开头，然后添加

```
close all;
set(0, 'DefaultFigureVisible', 'on'); 
```

到最后。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-28T16:56:48.990

我不知道执行此操作的单个命令，但是您可以使用一点额外的代码来完成。

```
% Declare a variable for skipping at the top of your .m file
skip = 1; %example, 1 = skip, 0 = plot

% do things....

% Then nest your plot commands
if (skip == 0) % wants to plot in this case
  % Whatever plot code in here
  plot(x,y);
end 
```

这应该可以解决问题，尽管我意识到它不像您要求的那样干净，单一的功能。我希望它有帮助！:)

另外，我知道如果您不一定要使用自己的 .m 文件，或者脚本很长，这可能不切实际。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T07:36:56.230

您也可以`close all`在情节之后写，它们将被绘制但在之后瞬间关闭。它不干净但有效。

# php - 获取客人 IP 并按位置显示用户

> ID：13110890
> 
> 赞同：-2
> 
> 时间：2012-10-28T16:51:03.997
> 
> 标签：php, ip

> **可能重复：**
> [用于在 php 中检测用户 contry 的包？](https://stackoverflow.com/questions/4457920/package-for-detecting-users-contry-in-php)

我有一个网站，有点像约会网站，用户在其中注册并列出他们的位置，比如伦敦或伯明翰等。我希望能够捕获客人 IP，如果他们位于伦敦，则所有用户都在伦敦秀在他们所在地区成为当地人。

这可能吗？我还没有得到关于如何做到这一点的第一个线索，这真的只是问问看是否可能，看看是否有人可以把我推向正确的方向。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T16:52:24.217

用户 IP 在 $_SERVER 超全局 $_SERVER['REMOTE_ADDR']

其他部分：

[http://php.net/manual/en/book.geoip.php](http://php.net/manual/en/book.geoip.php)

# mysql - PDO：连接到数据库服务器（不是特定的数据库名称）

> ID：13110894
> 
> 赞同：3
> 
> 时间：2012-10-28T16:51:26.167
> 
> 标签：mysql, pdo, database-connection

目前我通过这个连接到数据库服务器

```
@$db_connect = mysql_connect('localhost','user','xxx', true); 
```

由于在同一个查询中查询多个数据库，我必须连接到数据库服务器（不是特定的数据库名称）。

谁能建议我如何用 PDO 做同样的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T17:35:30.713

`$dsn`即使您要跨多个数据库进行查询，您仍然需要在 PDO 中选择一个数据库。这不是真正的问题，因为在您的查询中您将使用模式`dbname.tablename.columnname`。仅查询 中实际指定的数据库时`$dsn`，不需要使用`dbname`.

当然，您将需要在您打算为连接中指定的用户使用的*所有数据库上授予权限。*

```
// Need more than just testdb, but specify it here anyway
// It doesn't matter which one you choose here- pick the one you'll use the most I suppose
$dsn = 'mysql:dbname=testdb;host=127.0.0.1';
$user = 'dbuser';
$password = 'dbpass';
try {
    $dbh = new PDO($dsn, $user, $password);
} catch (PDOException $e) {
    echo 'Connection failed: ' . $e->getMessage();
}

// Query across 2 databases, and specify aliases for the dbname.tablename
$stmt = $dbh->prepare("
  SELECT 
    tdb.col1, 
    other.col2 
  FROM 
    testdb.table1.col1 AS tdb
    JOIN otherdb.table2.col2 AS other 
      ON tdb.col1 = other.col2
"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T17:39:48.720

你可以在 PDO 中做同样的事情。[MySQL DSN 字符串](http://www.php.net/manual/en/ref.pdo-mysql.connection.php)的`dbname`属性是可选的。

```
$db = new PDO('mysql:host=localhost', $user, $pass); 
```

但是，在这种情况下，您需要执行`use databasename`或确保所有查询都使用格式`SELECT * FROM databasename.tablename`。

# objective-c - iOS 6.0 中的 MessageUI 问题

> ID：13110895
> 
> 赞同：3
> 
> 时间：2012-10-28T16:51:32.233
> 
> 标签：objective-c, sms, message, xcode4.5

Xcode 和 obj-c 中的初学者问题。

在我的项目中，我有一个带有 IBAction 的按钮，可以在不使用我的应用程序的情况下发送短信（MessageUI 链接到项目）。在 iOS 5 代码运行良好，但是当我在最新的 Xcode 中打开相同的项目为 iOS 6 重新编译它时，我收到警告：[http](http://uaimage.com/image/10e31752) : //uaimage.com/image/10e31752 在 iOS 6 中使用 MessageUI 有什么改变吗？

感谢您的关注！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T21:24:08.507

看这张图：

[http://uaimage.com/image/e71f051f](http://uaimage.com/image/e71f051f)

您必须使用 MFMessageComposeViewControllerDelegate 而**不是**MFMailComposeViewControllerDelegate

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T20:22:14.520

嗯……刚刚发生了一件非常奇怪的事情。

我的项目结构如下：

```
YourProject (Root of the project with Xcode Project Icon)
    /YourProject (Folder)
        /Group X (Nested Folder)
            /SomeViewController.h
        /Group Y (Nested Folder)
            /Group Y1 (Nested Folder)
                /OtherViewController.h
            /Group Y2 (Another Nested Folder)
                /YetAnotherViewController.h 
```

SomeViewController 类，使用 MFMessageComposeViewControllerDelegate 和 MFMailComposeViewControllerDelegate 工作正常：

```
...
@interface SomeViewController : UIViewController <MFMessageComposeViewControllerDelegate, MFMailComposeViewControllerDelegate> {}
... 
```

OtherViewController 和 YetAnotherViewController 类，使用相同的 MFMessageComposeViewControllerDelegate 和 MFMailComposeViewControllerDelegate 将无法编译！

错误是：

*   找不到“MFMessageComposeViewControllerDelegate”的协议声明

和/或

*   找不到“MFMailComposeViewControllerDelegate”的协议声明。

所以我检查并重新检查导入，声明所有方法和我的 ViewControllers 是相同的，唯一不同的是它们的数据对象名称。

最后解决方案真的很傻！我通过将嵌套文件夹向上移动一级解决了这个烦恼。一切都编译得很好！

显然，库的导入（当您将它们添加到项目中时）不会到达子组中的文件！我猜这是 XCode 和 iOS 6 的错误，但我遇到了同样的错误。

由于组是虚拟文件夹（它们不在文件系统中），只是在项目结构中，这真的很奇怪。

我希望节省时间和头痛的人！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T18:19:29.757

添加`MFMessageComposeViewControllerDelegate`到您的 Header(.h) 文件中。

例子：`UIViewController< MFMessageComposeViewControllerDelegate>`

# c# - 为新帖子投票 Facebook 页面/提要的最佳方式？

> ID：13110896
> 
> 赞同：0
> 
> 时间：2012-10-28T16:51:46.870
> 
> 标签：c#, java, facebook, selenium, feed

我打算使用 selenium webdriver 导航到 facebook 提要，每隔几秒钟刷新一次页面以检查是否有新帖子。然后，我需要接收该帖子并解析它以获取数据。但是，这需要我的 webdriver 浏览器始终处于打开状态。有没有办法通过 Facebook API 或 SDK 抓取帖子？我真的没有这方面的经验，可以用Java或C#来做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T17:02:33.857

您可以订阅页面的实时更新，当对象更改时，该页面会在您的服务器上执行回调。

无论您是否可以为`feed`对象执行此操作，文档都是灰色的，但这是目前正在积极开发的功能之一。

[管理实时更新订阅](https://developers.facebook.com/docs/howtos/managing-realtime-update-subscriptions/)

# .net - 逆正则表达式匹配

> ID：13110897
> 
> 赞同：2
> 
> 时间：2012-10-28T16:51:51.533
> 
> 标签：.net, regex

经过大量研究后，我登陆了[SO 社区 wiki](https://stackoverflow.com/questions/406230/regular-expression-to-match-string-not-containing-a-word)，据说在 regex 中查看某些内容是否不匹配的最佳方法是执行以下操作：

```
^((?!hede).)*$ 
```

因此，以此为例，我试图匹配括号中不以字母 fe 或 Fe 开头的任何内容。我想出了这个：

```
\(((?!fe|Fe).+?)\) 
```

它有效，但它似乎给了我两场比赛，一场包含括号，另一场没有括号。有人可以指出我做错了什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-28T16:54:21.190

它不会给你两场比赛。它只是为您提供第一个捕获组的完整匹配。只需删除外部一对未转义的括号，第二个“匹配”就会消失：

```
\((?!fe|Fe).+?\) 
```

如果您稍后需要这些括号，但仍然不需要它会生成的捕获的子字符串，您也可以使用以下方法使括号不被捕获`?:`：

```
\((?:(?!fe|Fe).+?)\) 
```

这两者是等价的，但后者略显多余。

此外，如果您想匹配一些分隔的内容，通常认为使用否定字符类而不是不贪婪的重复是一种很好的做法：

```
\((?!fe|Fe)[^)]+\) 
```

（这应该是等价的）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T16:55:29.130

您可以通过在第一个括号中添加“？：”来删除捕获组。

# xna - 轮询等价于 AllFramesReady 事件？

> ID：13110902
> 
> 赞同：2
> 
> 时间：2012-10-28T16:52:26.090
> 
> 标签：xna, kinect

我正在使用带有 XNA Game Studio 4.0 的官方 Kinect SDK 1.6。

我想知道是否有人有一个很好的解决方法可以一次轮询所有帧，而不是以下：

```
ColorImageFrame cFrame = _Device.ColorStream.OpenNextFrame(100);
DepthImageFrame dFrame = _Device.DepthStream.OpenNextFrame(100);
SkeletonFrame sFrame = _Device.SkeletonStream.OpenNextFrame(100); 
```

我宁愿不在我的循环中进行三个同步调用。我真的很希望有类似的东西，`_Device.OpenAllFrames(100)`但轮询方法似乎没有等效的 AllFramesReady 事件。

我无法切换到事件驱动方法，因为它并不真正适合 XNA。或者有没有人有更好的方法来访问 XNA 循环内的 Kinect 流？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-25T20:19:24.957

我建议在 SDK 之上制作您自己的简单 Kinect 管理器（这是我在我的一个项目中所做的）。

这个管理器可以是一个单例对象，它监听来自深度、颜色和骨架流的事件，并将最新的可用帧保存到一些局部变量中（如果不需要它们，您还可以优化和禁用一些流）

在您的 XNA 游戏循环中，您可以访问这些变量，您将获得最新的可用帧。需要一些线程同步来防止在管理器写入变量时读取变量。

除了这个功能，这个管理器还帮我处理了 Kinect 传感器断开/重新连接的情况。管理器对象不是总是测试传感器是否连接，而是始终存在，但它不会在本地存储任何新帧。

当然，如果 XNA 游戏想要做一些特别的事情，它仍然可以处理断开/连接事件，但是在游戏循环中我不必总是测试是否连接了有效的 kinect 传感器。

# javascript - jQuery simpledialog 关闭时打开另一个 simpledialog

> ID：13110903
> 
> 赞同：0
> 
> 时间：2012-10-28T16:52:26.947
> 
> 标签：javascript, jquery, jquery-ui, jquery-dialog

我正在尝试让一个 jQuery 对话框关闭打开单击取消，然后打开一个新对话框。单击取消后，我将其设置为打开第一个对话框。不要介意它试图打开的实际simpledialog，我知道它打开那个对话框没有意义......只是在这一点上测试......并且在第一个对话框关闭时没有第二个对话框出现？当我点击取消时没有任何反应，第一个对话框保持不变。使用 SimpleDialog2 请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T17:28:45.353

如果你想保持在每次点击时创建一个对话框的方法，你应该使用插件的 destroy 方法（假设它有一个）而不是仅仅关闭它。否则，您将每次都向 DOM 追加一个新元素，并且它们将始终存在

保持动态创建概念，您只需通过触发单击已授权打开它的按钮/元素来打开其他对话框。

假设您有多行这些按钮，您将需要使用 addClass 之类的方法来跟踪单击了哪一行，以便找到正确的元素来触发单击。

另一种方法是为每个对话框创建一个带有参数的函数，以传递行 ID 或实际单击的元素等内容，以便`key`在对话框中处理您的内容。

```
$(document).delegate('#simplebool', 'click', function() {
        openDialog1( this);

})

function  openDialog1( el){
   var self=el; /* use this to replace "this" in dialog confirm code */
   $('<div>').simpledialog2({......})

} 
```

现在您可以从对话框 2 内部和已在其中打开的处理程序中调用对话框 1

# jquery-ui - Jquery ui Autocomplete 1.9 源码函数访问选项

> ID：13110905
> 
> 赞同：2
> 
> 时间：2012-10-28T16:52:44.580
> 
> 标签：jquery-ui

在我为 jquery ui 自动完成 1.9.1 的源选项定义的函数中，我想访问 jquery ui 自动完成的选项。

通过检查此函数内部的“this”，我发现我可以使用 this.options 访问选项。我想知道这是否是正确的方法，所以我不依赖内部规范？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T08:52:31.777

我让这个工作像这样。应该有更简单的方法，但我没有找到。

```
<script>
    $('#element').autocomplete({
        self: null,
        myOption: 'test',
        source: function (request, response) {
            self = this;
            var matcher = new RegExp($.ui.autocomplete.escapeRegex(request.term), "i");
            response($('#combobox').children("option").map(function () {
                var text = $(this).text();
                if (this.value && (!request.term || matcher.test(text)))
                    return {
                        label: text.replace(
                            new RegExp(
                            "(?![^&;]+;)(?!<[^<>]*)(" +
                            $.ui.autocomplete.escapeRegex(request.term) +
                            ")(?![^<>]*>)(?![^&;]+;)", "gi"
                            ), "<strong>$1</strong>"),
                        value: text
                    };
            }));
        },
        select: function (event, ui) {
            console.log(self.options.myOption);
        }
    });
</script>
<html>
    <input type="text" id="element" />
    <select id="combobox">
        <option value="t1">Python</option>
        <option value="t2">PHP</option>
        <option value="t3">ASP.NET</option>
        <option value="t4">C++</option>
        <option value="t5">Ruby</option>
    </select>   
</html> 
```

提示在[这里找到](https://stackoverflow.com/questions/11498367/i-cant-read-jquery-ui-widget-factory-options-from-a-privat-method)

在小提琴[http://jsfiddle.net/f7qvu/1/上检查它](http://jsfiddle.net/f7qvu/1/)

# mysql - 如何仅使用 SQL 语句设置 MySQL 5.5 复制？

> ID：13110906
> 
> 赞同：0
> 
> 时间：2012-10-28T16:52:50.033
> 
> 标签：mysql, database-replication

我正在尝试仅使用 SQL 语句在 2 个 MySQL 5.5 服务器上设置主-主复制，但它似乎不起作用。

我在 IP 地址 192.168.0.20（服务器 A）和 192.168.0.5（服务器 B）上有 2 个 MySQL 服务器。

在服务器 A 上，我运行以下 SQL 语句。

```
CHANGE MASTER TO MASTER_HOST='192.168.0.5',
MASTER_PORT=3306,
MASTER_USER='root',
MASTER_PASSWORD='password-here',
master_connect_retry=6000;

set global sql_log_bin=1;
set global server_id=1;
set auto_increment_increment=2;
set auto_increment_offset=1; 

start slave; 
```

服务器 A 上的错误日志显示：

```
121029  0:36:01  InnoDB: Waiting for the background threads to start
121029  0:36:02 Percona XtraDB (http://www.percona.com) 1.1.8-28.1 started; log sequence number 1624076
121029  0:36:02 [Note] Plugin 'FEEDBACK' is disabled.
121029  0:36:02 [Note] Event Scheduler: Loaded 0 events
121029  0:36:02 [Note] C:\Program Files (x86)\MariaDB 5.5\bin\mysqld.exe: ready for connections. Version: '5.5.27-MariaDB'  socket: ''  port: 3306  mariadb.org binary distribution
121029  0:39:05 [Warning] Neither --relay-log nor --relay-log-index were used; so replication may break when this MySQL server acts as a slave and has his hostname changed!! Please use '--log-basename=#' or '--relay-log=JoshuaNotebook-relay-bin' to avoid this problem.
121029  0:39:05 [Note] 'CHANGE MASTER TO executed'. Previous state master_host='', master_port='3306', master_log_file='', master_log_pos='4'. New state master_host='192.168.0.5', master_port='3306', master_log_file='', master_log_pos='4'.
121029  0:39:05 [Note] Slave SQL thread initialized, starting replication in log 'FIRST' at position 0, relay log '.\JoshuaNotebook-relay-bin.000001' position: 4
121029  0:39:05 [Note] Slave I/O thread: connected to master 'root@192.168.0.5:3306',replication started in log 'FIRST' at position 4
121029  0:39:05 [ERROR] Error reading packet from server: Binary log is not open ( server_errno=1236)
121029  0:39:05 [ERROR] Slave I/O: Got fatal error 1236 from master when reading data from binary log: 'Binary log is not open', Error_code: 1236
121029  0:39:05 [Note] Slave I/O thread exiting, read up to log 'FIRST', position 4 
```

服务器 B 上的错误日志显示：

```
121029  0:36:08  InnoDB: Waiting for the background threads to start
121029  0:36:09 Percona XtraDB (http://www.percona.com) 1.1.8-28.1 started; log sequence number 1623052
121029  0:36:09 [Note] Plugin 'FEEDBACK' is disabled.
121029  0:36:09 [Note] Event Scheduler: Loaded 0 events
121029  0:36:09 [Note] C:\Program Files\MariaDB 5.5\bin\mysqld.exe: ready for connections. Version: '5.5.27-MariaDB'  socket: ''  port: 3306  mariadb.org binary distribution
121029  0:39:05 [Warning] IP address '192.168.0.20' could not be resolved: The requested name is valid and was found in the database, but it does not have the correct associated data being resolved for. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T19:48:27.263

> 二进制日志未打开 (server_errno=1236)

看来你还没有启动你的主人的二进制日志。我建议您停止从属服务器，然后通过将您设置为您要用于二进制日志的文件来`slave reset`打开您的主服务器的二进制日志。`log-bin`

# python - re.MULTILINE 和 re.DOTALL 一起使用 python

> ID：13110907
> 
> 赞同：9
> 
> 时间：2012-10-28T16:52:57.117
> 
> 标签：python, regex

基本上输入文件是这样的：

> >U51677 人非组蛋白染色质蛋白 HMG1 (HMG1) 基因，完整
> 
> ```
>  cds. #some records don't have this line (see below)
> 
>        Length = 2575 
> ```
> 
> （一些文字）
> 
> >U51677 人非组蛋白染色质蛋白 HMG1 (HMG1) 基因，完整
> 
> ```
>  Length = 2575 
> ```
> 
> （一些文字）
> 
> （ETC...）

现在我写这个来提取以 > 开头的行和长度的数字

```
import re
regex = re.compile("^(>.*)\r\n.*Length\s=\s(\d+)", re.MULTILINE)
match = regex.findall(sample_blast.read())

print match[0] 
```

当 Length 行是 > 行的下一行时，它可以很好地提取记录。

然后我尝试了 re.DOTALL ，它应该使任何记录匹配 (.*Length) 无论是否有额外的行。

```
regex = re.compile("^(>.*)\r\n.*(?:\r\n*.?)Length\s=\s(\d+)", re.MULTILINE|re.DOTALL) 
```

但它不起作用。我尝试了 re.MULTILINE 和 re.DOTALL 而不是管道，但仍然无法正常工作。

所以问题是如何创建一个匹配记录的正则表达式并返回所需的组，而不管记录中是否有额外的行。如果有人也可以在 re.VERBOSE 中展示这一点，那就太好了。对不起，很长的帖子，并提前感谢您的任何帮助。:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-28T16:59:31.690

您的问题可能是您使用`\r\n`. 相反，请尝试仅使用`\n`：

```
>>> x = """
... >U51677 人类非组蛋白染色质蛋白 HMG1 (HMG1) 基因，完整
...
...光盘。#一些记录没有这一行（见下文）
...
... 长度 = 2575
...（一些文字）
...
... >U51677 人类非组蛋白染色质蛋白 HMG1 (HMG1) 基因，完整
...
... 长度 = 2575
...（一些文字）
...
... （ETC...）
……“”“
>>> re.search("^(>.*)\n.*(?:\n*.?)Length\s=\s(\d+)", x, re.MULTILINE|re.DOTALL)
<_sre.SRE_Match 对象位于 0x10c937e00>
>>> _.group(2)
'2575'

```

另外，你的第一个`.*`太贪心了。相反，请尝试使用`^(>.*?)$.*?Length\s=\s(\d+)`：

```
>>> re.findall("^(>.*?)$.*?Length\s=\s(\d+)", x, re.MULTILINE|re.DOTALL)
[('>U51677人非组蛋白染色质蛋白HMG1(HMG1)基因，完整'，'2575')，('>U51677人非组蛋白染色质蛋白HMG1(HMG1)基因，完整'，'2575')]

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T17:01:53.503

试试这个正则表达式：

```
"^(>[^\r\n]*).*?Length\s=\s(\d+)" 
```

设置两个选项（使用管道符号）。

第一个捕获组将匹配所有内容，直到之后的第一个换行符`>`（独立于您的操作系统）。然后`.*?`将匹配任何字符，直到第**一次** `Length`遇到。其余的与您的第一次尝试相同。

您之前尝试的问题似乎是，您使用`.*`的可以匹配任何东西并且同时是贪婪的（因此它会尽可能多地消耗，包括以下`Length = 2575`.

# python - 如何将字典格式转换为文件？

> ID：13110908
> 
> 赞同：0
> 
> 时间：2012-10-28T16:52:56.527
> 
> 标签：python, dictionary, formatting, output

我有一个

```
 d= {'fall':['basketball', 'hockey','football']
           'spring': ['cross country','tennis','baseball']
           'summer':['soccer', 'softball']
            etc.... 
```

我想把它写到一个文件中。像下面这样。

秋季运动：
篮球
曲棍球
足球
春季运动：
越野
网球
棒球..

到目前为止我写的代码：

```
for n in range(len(sp)):
    print("Sports Played in",i)
    print(sp[i,'\n']) 
```

我也想将它反转为所以它按字母顺序读取：

    棒球 <这里应该有差距> 春季
    篮球 <这里应该有差距> 秋季
    越野 <这里应该有差距> 春季

列应对齐。

```
def reverse_dict(dct):
    reverse = {}
    for key, vals in dct.items():
        for val in vals:
            if val not in reverse:
                reverse[val] = []
            reverse[val].append(key)
    return reverse

keys=list(reverse.keys())
keys.sort()
for x in keys:
    f1out.write("".join(
        str([x, reverse[x]]).strip("[]").replace("[" ,'').replace(",", "'\t'")
        + '\n')) 
```

有任何想法吗？仅限 Python 3 或更高版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T17:04:46.120

这应该这样做：

```
 with open("data1.txt","w") as f:
    for season in d:
        f.write("Sports played in {0}\n".format(season))
        for sp in d[season]:
            f.write(sp+'\n') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T18:55:48.587

我相信这可以满足您的要求。如果您删除或注释掉指示的行，它应该可以与 Python 3 一起使用，但是我还没有真正验证这是否属实。如果不是，它应该非常接近。

```
from __future__ import print_function  # remove for Python 3
from collections import defaultdict
import sys

GAP = 4
INDENT = ' ' * 2
TEST = True  # print output rather than write it to files

d = {'fall': ['basketball', 'hockey', 'football'],
     'spring': ['cross country', 'tennis', 'baseball', 'archery'],
     'summer': ['soccer', 'softball', 'archery'] }

def reverse_dict(dct):
    reverse = defaultdict(list)
    for key, vals in list(dct.items()):
        for val in vals:
            reverse[val].append(key)
    return reverse

rev_d = reverse_dict(d)

with open("seasonal_sports.txt", "wt") as output:
    if TEST: output = sys.stdout
    for season in sorted(d):
        print('Sports played in {}:'.format(season), file=output)
        for sport in d[season]:
            print(INDENT+sport, file=output)

with open("sport_seasons.txt", "wt") as output:
    if TEST: output = sys.stdout
    longest = max(list(map(len, rev_d)))
    for sport in sorted(rev_d):
        print('{:<{width}}'.format(sport, width=longest+GAP),
              ', '.join(rev_d[sport]), file=output) 
```

# php - 在检查值中带有 mysql 函数的 codeigniter get_where

> ID：13110913
> 
> 赞同：0
> 
> 时间：2012-10-28T16:53:10.673
> 
> 标签：php, codeigniter

只是一个关于`get_where`codeigniter Active Records功能的问题。我想得到一个应该是这样的查询：

```
Select * from foo 
where date = STR_TO_DATE('$month/$day/$year','%m/%d/%Y') 
  and time = STR_TO_DATE('$hour:$minute$ampm', '%l:%i%p') 
```

现在我在我的模型中创建了一个函数，如下所示：

```
public function validate_if_existing($month,$day,$year,$hour,$minute,$ampm)
{
    $event_date = "STR_TO_DATE('$month/$day/$year','%m/%d/%Y')";
    $event_time = "STR_TO_DATE('$hour:$minute$ampm', '%l:%i%p')";

    $this->db->flush_cache();
    $query = $this->db->get_where('foo',array('event_date' => $event_date,'event_time'=> $event_time));

    return $query->num_rows();
} 
```

但它会返回`0`我期望的行`1`。我试图检查`$event_date`和`$event_time`内容，它完全符合我的预期。像这样：

```
STR_TO_DATE('01/01/2012','%m/%d/%Y') 
```

我做错了吗？无论如何要解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T18:48:21.067

已经知道了！我只是使用这样的手动添加过滤器`$this->db->where()`：

```
$this->db->where('event_date',"STR_TO_DATE('$month/$day/$year','%m/%d/%Y')", FALSE); 
```

就像 in 一样工作`$this->db->select()`。这 `$this->db->get_where()`只是一种快捷形式。在进行非复杂查询时很好用。感谢 air4x 给了我一些建议。:)

# xpages - @FullUrl - 未记录的函数

> ID：13110925
> 
> 赞同：0
> 
> 时间：2012-10-28T16:54:07.737
> 
> 标签：xpages

在浏览扩展库的示例数据库时，我发现了一个函数`@FullUrl`。我无法在帮助文档中找到它，但它的工作原理是这样的。如果我发表这样的声明，`@FullUrl("myXPage.xsp")`那么它会输出`/path/mydatabase.nsf/myXPage.xsp`.

搜索网络[从 XPages 备忘单返回了这个链接，](http://xpagescheatsheet.com/cheatsheet.nsf/url.xsp)其中提到了它的用法与我上面描述的相同。IBM对这个功能的支持是什么？没有帮助文档只是一个错误，还是不打算在生产应用程序中使用？

*注意：我使用的是 Lotus Notes 8.5.3*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T05:08:52.040

有更多未记录的功能

```
 // Document helpers
    addFunction(FCT_TOPPARENTID, "@TopParentID", "(doc:W):T"); // $NON-NLS-1$ $NON-NLS-2$
    addFunction(FCT_TOPPARENTUNID, "@TopParentUNID", "(doc:W):T"); // $NON-NLS-1$ $NON-NLS-2$

    // URL handling
    addFunction(FCT_FULLURL, "@FullUrl", "(str:T):T"); // $NON-NLS-1$ $NON-NLS-2$
    addFunction(FCT_ABSOLUTEURL, "@AbsoluteUrl", "(str:T):T"); // $NON-NLS-1$ $NON-NLS-2$
    addFunction(FCT_ENCODEURL, "@EncodeUrl", "(str:T):T"); // $NON-NLS-1$ $NON-NLS-2$
    addFunction(FCT_ISABSOLUTEURL, "@IsAbsoluteUrl", "(str:T):T"); // $NON-NLS-1$ $NON-NLS-2$

    // XPages helpers
    addFunction(FCT_ERRORMESSAGE, "@ErrorMessage", "(str:Tcomp:W):V"); // $NON-NLS-1$ $NON-NLS-2$
    addFunction(FCT_WARNINGMESSAGE, "@WarningMessage", "(str:Tcomp:W):V"); // $NON-NLS-1$ $NON-NLS-2$
    addFunction(FCT_INFORMATIONMESSAGE, "@InfoMessage", "(str:Tcomp:W):V"); // $NON-NLS-1$ $NON-NLS-2$

    // Domino View
    addFunction(FCT_VIEWICONURL, "@ViewIconUrl", "(icon:I):T"); // $NON-NLS-1$ $NON-NLS-2$

    addFunction(FCT_NORMALIZESUBJECT, "@NormalizeSubject", "(subject:T):T", "(subject:T, maxlength:I):T"); // $NON-NLS-1$ // $NON-NLS-2$ // $NON-NLS-3$ 
```

一年前我在博客上写过这个[http://www.eknori.de/2011-11-22/extension-library-8-5-3-undocumented-functions/](http://www.eknori.de/2011-11-22/extension-library-8-5-3-undocumented-functions/)

您可以在 ExtensionLibraryOpenNTF-853.20121022-1354\srcOpenNTF\eclipse\plugins\com.ibm.xsp.extlib.domino\src\com\ibm\xsp\extlib\javascript 目录中的 NotesFunctionsEx.java 文件中找到它们（解压缩 srcOpenNTF.先压缩）

您可以将代码用作如何构建自己的 SSJS 扩展的参考（[http://www.openntf.org/Internal/home.nsf/project.xsp?databaseName=CN=NotesOSS2/O=NotesOSS!!Projects](http://www.openntf.org/Internal/home.nsf/project.xsp?databaseName=CN=NotesOSS2/O=NotesOSS!!Projects) \ pmt.nsf&documentId=6159D09FC2EA663C862579F30028803E&action=openDocument)

因此，如果这些函数在未来版本中不会成为 extLib 的一部分，那么如果您不安全，您可以将其包含到您自己的扩展中......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T18:27:21.883

我能找到的唯一参考资料是在 XPages Extension Library 书中。所以它有可能是 extlib 的一部分。

文档可能不同步。但是，如果不支持，则通常不支持未记录的功能。这可能是由于几个原因。

*   该功能无法正常工作或尚未经过全面测试。
*   该功能可能会在以后的版本中被删除/更改，这会破坏功能。
*   该功能仅供内部使用。

在生产中使用此类调用需要您自担风险。这是一个长周末，所以我无法验证状态。

# android - context.getContextResolved 应用程序已停止

> ID：13110930
> 
> 赞同：0
> 
> 时间：2012-10-28T16:54:28.317
> 
> 标签：android, android-context

我的应用程序有问题。我正在尝试执行查询，但应用程序每次都停止。尝试执行查询时发生此错误。我正在从 Android Pro 3 书中学习，但本书中提供的代码已被弃用：

```
package com.example.contactsabuout;

import android.net.Uri;
import android.os.Bundle;
import android.provider.Contacts;
import android.provider.ContactsContract;
import android.app.Activity;
import android.database.Cursor;
import android.util.Log;
import android.content.Context;
import android.view.Menu;
import android.view.View;
import android.widget.TextView;

public class MainActivity extends Activity {

    private static Context context;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        MainActivity.context = getApplicationContext();

        Log.v("INFO", "Completed: onCreate.");
    }

    public static Context getAppContext() {
        return MainActivity.context;
    }

    public void doQuery(View view) {

         Uri peopleBaseUri = ContactsContract.Contacts.CONTENT_URI;
         Log.v("II","Button clicked.");
         Log.v("II", "Uri for ContactsContract.Contacts: " + peopleBaseUri);
         Context context = getAppContext();
         Log.v("II", "Got context: " + context);
         Cursor cur;
         Log.v("II", "Created cursor: cur");
         cur = context.getContentResolver().query(peopleBaseUri, null, null, null, null);

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
} 
```

来自 LogCat

```
10-28 17:45:02.513: V/INFO(4677): Completed: onCreate.
10-28 17:45:02.613: D/libEGL(4677): loaded /system/lib/egl/libGLES_android.so
10-28 17:45:02.653: D/libEGL(4677): loaded /system/lib/egl/libEGL_adreno200.so
10-28 17:45:02.723: D/libEGL(4677): loaded /system/lib/egl/libGLESv1_CM_adreno200.so
10-28 17:45:02.723: D/libEGL(4677): loaded /system/lib/egl/libGLESv2_adreno200.so
10-28 17:45:03.014: I/Adreno200-EGLSUB(4677): <ConfigWindowMatch:2078>: Format RGBA_8888.
10-28 17:45:03.054: D/OpenGLRenderer(4677): Enabling debug mode 0
10-28 17:45:03.254: D/OpenGLRenderer(4677): has fontRender patch
10-28 17:45:03.274: D/OpenGLRenderer(4677): has fontRender patch
10-28 17:45:12.873: V/II(4677): Button clicked.
10-28 17:45:12.873: V/II(4677): Uri for ContactsContract.Contacts: content://com.android.contacts/contacts, rest will be null
10-28 17:45:12.873: V/II(4677): Got context: android.app.Application@40d83d90
10-28 17:45:12.873: V/II(4677): Created cursor: cur
10-28 17:45:12.933: D/AndroidRuntime(4677): Shutting down VM
10-28 17:45:12.933: W/dalvikvm(4677): threadid=1: thread exiting with uncaught exception (group=0x40aaf228)
10-28 17:45:12.953: E/AndroidRuntime(4677): FATAL EXCEPTION: main
10-28 17:45:12.953: E/AndroidRuntime(4677): java.lang.IllegalStateException: Could not execute method of the activity
10-28 17:45:12.953: E/AndroidRuntime(4677):     at android.view.View$1.onClick(View.java:3071)
10-28 17:45:12.953: E/AndroidRuntime(4677):     at android.view.View.performClick(View.java:3538)
10-28 17:45:12.953: E/AndroidRuntime(4677):     at android.view.View$PerformClick.run(View.java:14330)
10-28 17:45:12.953: E/AndroidRuntime(4677):     at android.os.Handler.handleCallback(Handler.java:608)
10-28 17:45:12.953: E/AndroidRuntime(4677):     at android.os.Handler.dispatchMessage(Handler.java:92)
10-28 17:45:12.953: E/AndroidRuntime(4677):     at android.os.Looper.loop(Looper.java:156)
10-28 17:45:12.953: E/AndroidRuntime(4677):     at android.app.ActivityThread.main(ActivityThread.java:4977)
10-28 17:45:12.953: E/AndroidRuntime(4677):     at java.lang.reflect.Method.invokeNative(Native Method)
10-28 17:45:12.953: E/AndroidRuntime(4677):     at java.lang.reflect.Method.invoke(Method.java:511)
10-28 17:45:12.953: E/AndroidRuntime(4677):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
10-28 17:45:12.953: E/AndroidRuntime(4677):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
10-28 17:45:12.953: E/AndroidRuntime(4677):     at dalvik.system.NativeStart.main(Native Method)
10-28 17:45:12.953: E/AndroidRuntime(4677): Caused by: java.lang.reflect.InvocationTargetException
10-28 17:45:12.953: E/AndroidRuntime(4677):     at java.lang.reflect.Method.invokeNative(Native Method)
10-28 17:45:12.953: E/AndroidRuntime(4677):     at java.lang.reflect.Method.invoke(Method.java:511)
10-28 17:45:12.953: E/AndroidRuntime(4677):     at android.view.View$1.onClick(View.java:3066)
10-28 17:45:12.953: E/AndroidRuntime(4677):     ... 11 more
10-28 17:45:12.953: E/AndroidRuntime(4677): Caused by: java.lang.SecurityException: Permission Denial: reading com.android.providers.contacts.HtcContactsProvider2 uri content://com.android.contacts/contacts from pid=4677, uid=10155 requires android.permission.READ_CONTACTS
10-28 17:45:12.953: E/AndroidRuntime(4677):     at android.os.Parcel.readException(Parcel.java:1332)
10-28 17:45:12.953: E/AndroidRuntime(4677):     at android.database.DatabaseUtils.readExceptionFromParcel(DatabaseUtils.java:182)
10-28 17:45:12.953: E/AndroidRuntime(4677):     at android.database.DatabaseUtils.readExceptionFromParcel(DatabaseUtils.java:136)
10-28 17:45:12.953: E/AndroidRuntime(4677):     at android.content.ContentProviderProxy.query(ContentProviderNative.java:406)
10-28 17:45:12.953: E/AndroidRuntime(4677):     at android.content.ContentResolver.query(ContentResolver.java:315)
10-28 17:45:12.953: E/AndroidRuntime(4677):     at com.example.contactsabuout.MainActivity.doQuery(MainActivity.java:47)
10-28 17:45:12.953: E/AndroidRuntime(4677):     ... 14 more 
```

我正在努力学习安卓。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T16:57:42.963

在清单文件中添加以下权限。

`android.permission.READ_CONTACTS`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T16:58:52.907

LogCat 中的这一行：

> 引起：java.lang.SecurityException: Permission Denial: 从 pid=4677 读取 com.android.providers.contacts.HtcContactsProvider2 uri content://com.android.contacts/contacts, uid=10155 需要 android.permission.READ_CONTACTS

通知您需要添加：

```
<uses-permission android:name="android.permission.READ_CONTACTS" /> 
```

到您的清单。

* * *

将其添加到`<manifest>`元素中，与`<application>`or相同`<uses-sdk>`：

```
<manifest>

    <uses-sdk />
    <uses-permission android:name="android.permission.READ_CONTACTS" />
    <application />

</manifest> 
```

# java - 既是 JApplet 又是应用程序的 Java prog。不会画JPanel

> ID：13110931
> 
> 赞同：0
> 
> 时间：2012-10-28T16:54:32.980
> 
> 标签：java, swing, applet, japplet

我正在编写一个工程应用程序，我想将它作为桌面上的普通 Java 应用程序和基于 Web 的小程序来执行。该应用程序可以在桌面上完美运行。作为一个 JApplet，它执行时没有错误，但实际上不显示任何内容。我的代码创建了一个名为 sim = new DynamicSimulationPanel() 的新对象，它扩展了 JPanel。这个 sim 对象有一个 setBackground(Color.black) 语句，实际上 Applet 对此作出响应并产生与上面相同颜色的空白屏幕。没有任何 GUI 组件（一些 JButton 等）出现，我无法启动模拟以检查对 jpanel 的绘画是否有效。我在这里做任何明显错误的事情吗？

```
/**
 * 
 */
package reid.dynamicplanes;

import java.awt.BorderLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.net.URL;

import javax.swing.ImageIcon;
import javax.swing.JApplet;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JTabbedPane;
import javax.swing.JToolBar;
import javax.swing.SwingUtilities;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;
import javax.swing.border.BevelBorder;
import javax.swing.border.SoftBevelBorder;

/**
 * @author pmr
 * 
 */
@SuppressWarnings("serial")
public class MainWindow extends JApplet implements ActionListener {
    private JFrame mw;
    private final String TITLETEXT = "Dynamics Solver";
    private JToolBar tb;
    private JTabbedPane tabbedPane;
    private JButton buttons[];
    private URL imageURLs[];
    private ImageIcon buttonImages[];
    private static final int NUM_BUTTONS = 1;
    private DynamicSimulationPanel sim;
    private static boolean isApplet = true;
    private static MainWindow m;

    public MainWindow() {
        m = this;
        if (isApplet == false) {
            mw = new JFrame(TITLETEXT); // generate the JFrame
            mw.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            mw.setExtendedState(JFrame.MAXIMIZED_BOTH); // maximise the window
            mw.setLayout(new BorderLayout());

            try { // this try-catch prevents the nasty Java GUI interface and
                    // makes
                    // the GUI look platform-native.
                UIManager.setLookAndFeel(UIManager
                        .getSystemLookAndFeelClassName());
            } catch (ClassNotFoundException | InstantiationException
                    | IllegalAccessException | UnsupportedLookAndFeelException e) {
                e.printStackTrace();
                System.out
                        .println("Error setting the platform native look and feel: "
                                + e.getLocalizedMessage());
            }

            tb = new JToolBar();
            buttons = new JButton[NUM_BUTTONS];
            buttons[0] = new JButton("Exit");
            buttons[0].setToolTipText("Exits the application");
            imageURLs = new URL[NUM_BUTTONS];
            buttonImages = new ImageIcon[NUM_BUTTONS];
            for (int i = 0; i < NUM_BUTTONS; i++) {
                imageURLs[i] = this.getClass().getResource(
                        "/reid/dynamicplanes/res/exit.png");
                buttons[i].addActionListener(this); // tells the button to send
                                                    // its
                                                    // click signal to this
                                                    // class
                if (imageURLs[i] != null) {
                    // the image resource was found!
                    try {
                        buttonImages[i] = new ImageIcon(imageURLs[i],
                                "JButton " + i);
                        buttons[i].setIcon(buttonImages[i]);
                    } catch (NullPointerException e) {
                        // imageURL probably couldn't be found!
                        System.out.println(e.getLocalizedMessage());
                    }

                }

                tb.add(buttons[i]);
            }

            tabbedPane = new JTabbedPane(JTabbedPane.TOP);
            tabbedPane.setBorder(new SoftBevelBorder(BevelBorder.LOWERED, null,
                    null, null, null));
            tabbedPane.setTabLayoutPolicy(JTabbedPane.SCROLL_TAB_LAYOUT);
            tabbedPane.setToolTipText("Select your control tab");
        } // end (isApplet) tester

        sim = new DynamicSimulationPanel(); // instantiate a new DSP - the
                                            // Jpanel that displays the output
                                            // of the DynamicSimulatin's calcs.
        if (isApplet == true) {
            this.setLayout(new BorderLayout());
            this.getContentPane().add(sim, BorderLayout.CENTER);
        } else {
            tabbedPane.addTab("Simulation", null, sim, null);
            mw.getContentPane().add(tabbedPane, BorderLayout.CENTER);
            mw.add(tb, BorderLayout.PAGE_START);
            mw.setVisible(true);
            // do this stuff if running in a JFrame
        }

    }

    @Override
    public void init() {
        try {
            SwingUtilities.invokeAndWait(new Runnable() {
                @Override
                public void run() {
                    isApplet = true;
                    new MainWindow();
                }
            });
        } catch (Exception e) {
            System.err.println("init() did not complete successfully");
        }
    }

    /**
     * @param args
     */
    public static void main(String[] args) {
        isApplet = false;
        new MainWindow();

    }

    /*
     * (non-Javadoc)
     * 
     * @see
     * java.awt.event.ActionListener#actionPerformed(java.awt.event.ActionEvent)
     */
    @Override
    public void actionPerformed(ActionEvent e) {
        try {
            if (buttons[0] != null && e.getSource().equals(buttons[0])) {
                // exit button was clicked
                System.exit(0);
            }
        } catch (NullPointerException npe) {
            npe.printStackTrace();
        }

    }
} 
```

动态模拟面板.java：

```
/**
 * 
 */
package reid.dynamicplanes;

import java.awt.BasicStroke;
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.FlowLayout;
import java.awt.Font;
import java.awt.GradientPaint;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.GridLayout;
import java.awt.Point;
import java.awt.Polygon;
import java.awt.RenderingHints;
import java.awt.Toolkit;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.ComponentEvent;
import java.awt.event.ComponentListener;
import java.awt.geom.AffineTransform;
import java.awt.geom.Ellipse2D;
import java.awt.geom.Line2D;
import java.text.DecimalFormat;

import javax.swing.JButton;
import javax.swing.JLabel;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.JTextField;
import javax.swing.Timer;

/**
 * @author pmreid
 * 
 */
@SuppressWarnings("serial")
public class DynamicSimulationPanel extends JPanel implements ActionListener,
        ComponentListener {
    private DynamicSimulation dsim;
    private static boolean isRunning = false;
    private static JPanel controls = new JPanel();
    private static JButton startsim = new JButton("Start Simulation");
    private static JButton setValues = new JButton("Set Values");
    private JLabel labels[] = new JLabel[4];
    private static JTextField textboxes[] = new JTextField[4];
    private static Font font = new Font(Font.MONOSPACED, Font.BOLD, 14);
    private static JPanel textoutput = new JPanel();
    private static JLabel outputLabels[] = new JLabel[3];
    private static JLabel totaltime = new JLabel();
    private static JLabel accel = new JLabel();
    private static JLabel distleft = new JLabel();
    private static double cumX = 0; // cumulative dist travelled.
    private static final int EDGE_OFFSET = 200;
    private static int availW;
    private static int availH;
    private static int x;
    private static int y;
    private static boolean drawPlane = false;
    private Timer paintTimer = new Timer(10, this);
    private static Point startPos;
    private static Point currentPos;
    private static double bodyR = 25; // radius of the body when we draw it, in
    public static JPanel panelGroup = new JPanel();
    private static final int ARR_SIZE = 6;
    private static final Color ARR_COL = Color.green;
    private static final int CompSize = 30;
    // px
    private static boolean hasStarted = false;
    private static double hyp; // the hypotenuse of the plane triangle
    private static AffineTransform tx;

    public DynamicSimulationPanel() {
        // super();
        this.setBackground(Color.black);
        this.setDoubleBuffered(true);
        // super.repaint();
        super.addComponentListener(this);
        this.setLayout(new BorderLayout());
        dsim = new DynamicSimulation();
        dsim.setupExternalForces();
        panelGroup.setLayout(new GridLayout(2, 1));
        setupControlPanel();
        setupOutput();
        panelGroup.add(controls);
        panelGroup.add(textoutput);
        this.add(panelGroup, BorderLayout.PAGE_START);
        paintTimer.start();
        startPos = new Point();
        currentPos = new Point();

    }

    private void setupOutput() {
        textoutput.setLayout(new GridLayout(1, 6));
        totaltime.setFont(font);
        distleft.setFont(font);
        totaltime.setForeground(Color.red);
        distleft.setForeground(Color.red);
        accel.setFont(font);
        accel.setForeground(Color.red);
        String lt = "";
        for (int i = 0; i < outputLabels.length; i++) {
            outputLabels[i] = new JLabel();
            outputLabels[i].setFont(font);
            switch (i) {
            case 0:
                lt = "Total time/s: ";
                outputLabels[i].setLabelFor(totaltime);
                outputLabels[i].setText(lt);
                textoutput.add(outputLabels[i]);
                textoutput.add(totaltime);
                break;
            case 1:
                lt = "Dist left/m: ";
                outputLabels[i].setLabelFor(distleft);
                outputLabels[i].setText(lt);
                textoutput.add(outputLabels[i]);
                textoutput.add(distleft);
                break;
            case 2:
                lt = "Accel (ms\u207B\u00B2): ";
                outputLabels[i].setLabelFor(accel);
                outputLabels[i].setText(lt);
                textoutput.add(outputLabels[i]);
                textoutput.add(accel);
                break;
            }

        }

    }

    private static double getRounded(double d) {
        DecimalFormat DForm = new DecimalFormat("#.###");
        return Double.valueOf(DForm.format(d));
    }

    private void setupControlPanel() {
        controls.setLayout(new FlowLayout());
        startsim.addActionListener(this);
        startsim.setEnabled(false);
        startsim.setOpaque(true);
        startsim.setBorderPainted(false);
        setValues.addActionListener(this);
        String lt = "";
        for (int i = 0; i < labels.length; i++) {
            textboxes[i] = new JTextField(15);
            textboxes[i].setFont(font);
            labels[i] = new JLabel();
            labels[i].setFont(font);
            labels[i].setLabelFor(textboxes[i]);
            switch (i) {
            case 0:
                lt = "Mu: ";
                break;
            case 1:
                lt = "Mass (kg): ";
                break;
            case 2:
                lt = "Req'd dist (m): ";
                break;
            case 3:
                lt = "Plane incline (deg): ";
                break;
            }
            labels[i].setText(lt);
            controls.add(labels[i]);
            controls.add(textboxes[i]);
        }
        controls.add(setValues);
        controls.add(startsim);

    }

    public static void moveObject(double x) {
        // a call-back method called by DynamicSimulation at each time step to
        // update the position of the object(s) on the GUI
        if (isRunning) {
            cumX += x;
            distleft.setText(String.valueOf(getRounded(DynamicSimulation.getS()
                    - cumX)));
            x = x * (hyp / DynamicSimulation.getS());
            double dx = x
                    * Math.cos(Math.toRadians(DynamicSimulation.getTheta()));
            double dy = x
                    * Math.sin(Math.toRadians(DynamicSimulation.getTheta()));
            currentPos.setLocation(currentPos.getX() - dx, currentPos.getY()
                    + dy);

        }

    }

    public static void setupValues() {
        boolean proceed = false;
        for (int n = 0; n < textboxes.length; n++) {
            if (textboxes[n].getText().equals("")
                    || Double.valueOf(textboxes[n].getText()) == 0) {
                // input is not usable, so alert user and quit
                JOptionPane.showMessageDialog(null,
                        "Error: your input values are invalid!");
                proceed = false;
            } else {
                proceed = true;
            }
        }

        if (proceed) {
            // all looks ok.

            DynamicSimulation.setS(Double.valueOf(textboxes[2].getText()));
            DynamicSimulation.setMass(Double.valueOf(textboxes[1].getText()));
            DynamicSimulation.setMu(Double.valueOf(textboxes[0].getText()));
            DynamicSimulation.setTheta(Double.valueOf(textboxes[3].getText()));
            DynamicSimulation.calcAccel();
            distleft.setText(String.valueOf(getRounded(DynamicSimulation.getS())));
            accel.setText(String.valueOf(getRounded(DynamicSimulation
                    .getAccel())));
            if (DynamicSimulation.getAccel() < 0) {
                // friction is winning, so stop!
                startsim.setBackground(Color.red);
                startsim.setEnabled(false);
                proceed = false;
                drawPlane = false;
                hasStarted = false;
            } else {
                DynamicSimulation.calcTime();
                totaltime.setText(String.valueOf(getRounded(DynamicSimulation
                        .getTime())));

                drawPlane = true;
                hasStarted = false;

                startsim.setBackground(Color.green);
                startsim.setEnabled(true);
            }

        }
    }

    public static void drawPlane(Graphics2D g2) {
        availW = (int) (x * 0.7);
        availH = (int) (y * 0.7);
        g2.setStroke(new BasicStroke(4.0f));
        g2.setColor(Color.red);
        g2.setRenderingHint(RenderingHints.KEY_ANTIALIASING,
                RenderingHints.VALUE_ANTIALIAS_ON);
        Line2D base = new Line2D.Double(EDGE_OFFSET, y - EDGE_OFFSET,
                EDGE_OFFSET + availW, y - EDGE_OFFSET);
        hyp = Math.sqrt(availW * availW * 0.2 + availH * availH * 0.2);
        startPos.setLocation(
                EDGE_OFFSET
                        + hyp
                        * Math.cos(Math.toRadians(DynamicSimulation.getTheta())),
                y
                        - (EDGE_OFFSET + hyp
                                * Math.sin(Math.toRadians(DynamicSimulation
                                        .getTheta()))));
        if (!hasStarted) {
            currentPos.setLocation(startPos);
        }
        Line2D plane = new Line2D.Double(EDGE_OFFSET, y - EDGE_OFFSET,
                startPos.getX(), startPos.getY());

        g2.draw(base);
        g2.draw(plane);
        g2.drawString("\u03B8=" + DynamicSimulation.getTheta() + "\u00B0",
                (int) (EDGE_OFFSET + 85 * Math.cos(Math
                        .toRadians(DynamicSimulation.getTheta()))), y
                        - EDGE_OFFSET - 10);
    }

    public static void drawBody(Graphics2D g2) {
        // draws the mass and labels arrows etc.
        g2.setStroke(new BasicStroke(4.0f));
        g2.setRenderingHint(RenderingHints.KEY_ANTIALIASING,
                RenderingHints.VALUE_ANTIALIAS_ON);
        GradientPaint gradient = new GradientPaint(0, 0, Color.red,
                (int) (2 * bodyR), (int) (2 * bodyR), Color.yellow, true);
        g2.setPaint(gradient);
        double PosCorrection = 20 * Math.sin(Math.toRadians(DynamicSimulation
                .getTheta()));
        Ellipse2D body = new Ellipse2D.Double(currentPos.getX() - (2 * bodyR),
                currentPos.getY() - (2 * bodyR - PosCorrection), 2 * bodyR,
                2 * bodyR);
        g2.fill(body);
        g2.setColor(Color.yellow);
        g2.setFont(font);
        g2.drawString(
                "W="
                        + String.valueOf(getRounded(9.8 * DynamicSimulation
                                .getMass())),
                (int) (currentPos.getX() - 4.5 * bodyR),
                (int) (currentPos.getY() + bodyR * 1.1)); // weight

        g2.drawString(
                "R="
                        + String.valueOf(getRounded(DynamicSimulation
                                .getReactionJ())),
                (int) (currentPos.getX() - 1.7 * bodyR),
                (int) (currentPos.getY() - bodyR * 3)); // reaction

        g2.drawString(
                "Fr="
                        + String.valueOf(getRounded(DynamicSimulation
                                .getFrictionI())),
                (int) (currentPos.getX() + 1.3 * bodyR),
                (int) (currentPos.getY() - bodyR * 1.3)); // friction

        drawArrow(g2, currentPos.getX() - bodyR - PosCorrection,
                currentPos.getY() - bodyR + PosCorrection, currentPos.getX()
                        - bodyR - PosCorrection,
                currentPos.getY() - bodyR + PosCorrection + CompSize
                        * DynamicSimulation.getWeightRatio()); // weight
        drawArrow(
                g2,
                currentPos.getX() - bodyR - PosCorrection,
                currentPos.getY() - bodyR + PosCorrection,
                currentPos.getX()
                        - bodyR
                        - PosCorrection
                        - CompSize
                        * DynamicSimulation.getReactionRatio()
                        * Math.sin(Math.toRadians(DynamicSimulation.getTheta())),
                currentPos.getY()
                        - bodyR
                        + PosCorrection
                        - DynamicSimulation.getReactionRatio()
                        * CompSize
                        * Math.cos(Math.toRadians(DynamicSimulation.getTheta())));// reaction

        drawArrow(
                g2,
                currentPos.getX() - bodyR - PosCorrection,
                currentPos.getY() - bodyR + PosCorrection,
                currentPos.getX()
                        - bodyR
                        - PosCorrection
                        + CompSize
                        * DynamicSimulation.getFrictionRatio()
                        * Math.cos(Math.toRadians(DynamicSimulation.getTheta())),
                currentPos.getY()
                        - bodyR
                        + PosCorrection
                        - DynamicSimulation.getFrictionRatio()
                        * CompSize
                        * Math.sin(Math.toRadians(DynamicSimulation.getTheta()))); // friction
    }

    static void drawArrow(Graphics2D g2, double x1, double y1, double x2,
            double y2) {
        g2.setColor(ARR_COL);
        tx = new AffineTransform();
        Polygon arrowHead = new Polygon();
        arrowHead.addPoint(0, ARR_SIZE);
        arrowHead.addPoint(-ARR_SIZE, -ARR_SIZE);
        arrowHead.addPoint(ARR_SIZE, -ARR_SIZE);
        Line2D.Double line = new Line2D.Double(x1, y1, x2, y2);
        g2.draw(line);
        tx.setToIdentity();
        double angle = Math.atan2(line.y2 - line.y1, line.x2 - line.x1);
        tx.translate(line.x2, line.y2);
        tx.rotate((angle - Math.PI / 2d));
        // g2.setTransform(tx);
        // g2.fill(arrowHead);

    }

    public static void startSimulation() {
        cumX = 0;
        startsim.setEnabled(false);
        isRunning = true;
        hasStarted = true;
        DynamicSimulation.startSim();

    }

    public static void endSimulation() {
        isRunning = false;
        startsim.setEnabled(true);
    }

    @Override
    public void paintComponent(Graphics g) {
        Graphics2D g2 = (Graphics2D) g;
        super.paintComponent(g);
        if (drawPlane) {
            // it is OK to draw the triangle
            drawPlane(g2);
        }
        if (hasStarted) {
            drawBody(g2);
        }
        Toolkit.getDefaultToolkit().sync();
    }

    /*
     * (non-Javadoc)
     * 
     * @see
     * java.awt.event.ActionListener#actionPerformed(java.awt.event.ActionEvent)
     */
    @Override
    public void actionPerformed(ActionEvent e) {
        if (e.getSource().equals(startsim)) {
            // initiate the simulation.
            startSimulation();
        }
        if (e.getSource().equals(setValues)) {
            // set up the values
            setupValues();
        }
        if (e.getSource().equals(paintTimer)) {
            this.invalidate();
            repaint();
        }

    }

    /*
     * (non-Javadoc)
     * 
     * @see java.awt.event.ComponentListener#componentResized(java.awt.event.
     * ComponentEvent)
     */
    @Override
    public void componentResized(ComponentEvent e) {
        x = this.getWidth();
        y = this.getHeight();
        availW = (int) (x * 0.7);
        availH = (int) (y * 0.7);
    }

    /*
     * (non-Javadoc)
     * 
     * @see
     * java.awt.event.ComponentListener#componentMoved(java.awt.event.ComponentEvent
     * )
     */
    @Override
    public void componentMoved(ComponentEvent e) {

    }

    /*
     * (non-Javadoc)
     * 
     * @see
     * java.awt.event.ComponentListener#componentShown(java.awt.event.ComponentEvent
     * )
     */
    @Override
    public void componentShown(ComponentEvent e) {

    }

    /*
     * (non-Javadoc)
     * 
     * @see java.awt.event.ComponentListener#componentHidden(java.awt.event.
     * ComponentEvent)
     */
    @Override
    public void componentHidden(ComponentEvent e) {

    }

} 
```

未出现的按钮/文本框位于 DynamicSimulationPanel 中的 panelGroup JPanel 上。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T14:17:34.033

所以我找到了一个解决方案，小程序和桌面应用程序都可以完美运行。

我创建了一个扩展 JPanel 并调用所有其他 Jpanel 类的类文件。然后，非常重要的是，当我将这个主面板 (mp) 添加到小程序时，我是在小程序的 init() 方法中完成的，而不是像以前那样调用新的 MainWindow()：

```
@Override
    public void init() {
        try {
            SwingUtilities.invokeAndWait(new Runnable() {
                @Override
                public void run() {
                    isApplet = true;
                    // new MainWindow();
                    mp = new PanelLoader(TITLETEXT, true);
                    getContentPane().add(mp);
                    repaint();
                }
            });
        } catch (Exception e) {
            System.err.println("init() did not complete successfully");
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T17:13:05.363

仅当不满足条件 isApplet 时才创建按钮和选项卡式窗格。当 isApplet 为真时，唯一运行的代码是

```
m = this;
//...
sim = new DynamicSimulationPanel();
//...
if (isApplet == true) {
    this.setLayout(new BorderLayout());
    this.getContentPane().add(sim, BorderLayout.CENTER);
} 
```

# c++ - 读取 unicode 文件

> ID：13110933
> 
> 赞同：0
> 
> 时间：2012-10-28T16:54:40.503
> 
> 标签：c++, c

为什么下一个代码会出错？看代码和图片。如何修复它 ![在此处输入图像描述](../Images/7d28b7647679e09b08fa8c096670efdc.png)

```
wchar_t *GetLine(wchar_t *fileName=L"indexing.xml", wchar_t endSymbol = '\n')
{
    FILE *file = NULL;
    int sz;
    _wfopen_s(&file, fileName, L"r");
    std::wifstream fs (file);
    int size;
    wchar_t wchr[1];
    size = 0;
    do
    {
        sz = fread(&wchr,sizeof(wchar_t),1,file);
        if(!sz)
        {
            break;
        }
        tempGetLine[size] = wchr[0];
        size++;
    }while(wchr[0] != endSymbol);
    tempGetLine[size] = '\0';
    position += (size);
    fs.close();
    return tempGetLine;
} 
```

但这项工作是正确的

```
wchar_t *GetLine(wchar_t *fileName=L"indexing.xml", wchar_t endSymbol = '\n')
{
    hReadFile = CreateFileW(L"indexing.xml",GENERIC_READ | GENERIC_WRITE, FILE_SHARE_READ |FILE_SHARE_WRITE, NULL, OPEN_EXISTING, FILE_ATTRIBUTE_NORMAL, NULL);
    SetFilePointer(hReadFile,sizeof(wchar_t) * position, NULL, FILE_BEGIN);
    int size;
    wchar_t wchr[1];
    DWORD dw;
    size = 0;
    do
    {
        ReadFile(hReadFile, wchr, sizeof(wchar_t), &dw, NULL);
        if(!dw)
        {
            break;
        }
        tempGetLine[size] = wchr[0];
        size++;
    }while(wchr[0] != endSymbol);
    tempGetLine[size] = '\0';
    position += (size);
    return tempGetLine;
} 
```

![在此处输入图像描述](../Images/6f76939a2b658aa82a2bc1b75a1cccc7.png) 完整代码

```
#include "stdafx.h"
#include <fstream>
#include <iostream>
#include <stdio.h>
#include <cstdio>
#include <Windows.h>
int position = 0;
wchar_t tempGetLine[500];
wchar_t *GetLine(wchar_t *fileName=L"indexing.xml", wchar_t endSymbol = '\n')
{
    FILE *file = NULL;
    int sz;
    _wfopen_s(&file, L"C:\\indexing.xml", L"r");
    std::wifstream fs (file);
    int x = GetLastError();
    fseek(file,sizeof(wchar_t) * position,SEEK_SET);
    int size;
    wchar_t wchr[1];
    size = 0;
    do
    {
        sz = fread(&wchr,sizeof(wchar_t),1,file);
        if(!sz)
        {
            break;
        }
        if(wchr[0] >= L'А')continue;            //Only for console application
        tempGetLine[size] = wchr[0];
        size++;
    }while(wchr[0] != endSymbol);
    tempGetLine[size] = '\0';
    position += (size);
    fs.close();
    return tempGetLine;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T16:59:01.533

您的文件由于某种原因无法打开并且`file`为 NULL。**始终**检查文件是否打开。

还想知道你认为你在做什么`fs`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T14:26:40.247

您正在`indexing.xml`当前目录中查找文件。

VC 项目的默认设置是当前目录设置为 exe 文件的目录，`2012\Projects\FindPattern\Debug`. 该文件不存在，它是一个文件夹。

# c# - ASP.NET MVC 4 和 MVCContrib Grid：呈现复杂类型中每个 TR 和 Post 值的复选框

> ID：13110935
> 
> 赞同：0
> 
> 时间：2012-10-28T16:54:57.240
> 
> 标签：c#, asp.net, checkbox, asp.net-mvc-4, mvccontrib-grid

**MVCContrib 网格：**

```
@model ViewModel
@using (Html.BeginForm("SendData", "Home", FormMethod.Post))
{
    @Html.Grid(Model.List).Columns(c =>
    {
        c.For(x => x.Id);
        c.For(x => x.Name);
        c.For(x =>Html.Partial("Partial/CheckBoxTemplate", new CheckBoxViewModel { Id = x.Id })).Named("Options");
    })

    @Html.SubmitButton()
} 
```

**控制器发布操作：**

```
public ActionResult SendData(List<CheckBoxViewModel> list)
{
    return View();
} 
```

**视图模型：**

```
public class CheckBoxViewModel
{
    public int Id { get; set; }
    public bool CheckBox { get; set; }
}

public class ViewModel
{
    public IPagination<Data> List { get; set; }
}

public class Data
{
    public int Id { get; set; }
    public string Name { get; set; } 
} 
```

局部视图：

```
@model MvcApplication1.Models.CheckBoxViewModel

@Html.HiddenFor(x => x.Id)
@Html.CheckBoxFor(x => x.CheckBox) 
```

默认情况下，所有复选框都未选中。

如何在我的`SendData`操作中检索所有选中的复选框值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T17:38:56.880

我建议您使用反映您的视图要求的真实视图模型（显示一个包含每行一个复选框的网格，并显示项目的 id 和名称，并在您的回发操作的列表中检索这些值） ：

```
public class CheckBoxViewModel
{
    public int Id { get; set; }
    public string Name { get; set; }
    public bool CheckBox { get; set; }
}

public class ViewModel
{
    public IPagination<CheckBoxViewModel> List { get; set; }
} 
```

然后将您的视图强类型化到此视图模型：

```
@model ViewModel

@using (Html.BeginForm("SendData", "Home", FormMethod.Post))
{
    @Html.Grid(Model.List).Columns(c =>
    {
        c.For(x => x.Id);
        c.For(x => x.Name);
        c.For(x => Html.Partial("Partial/CheckBoxTemplate", x)).Named("Options");
    })

    <button type="submit">OK</button>
} 
```

最后你的部分可能看起来像这样：

```
@model CheckBoxViewModel

@{
    var index = Guid.NewGuid().ToString();
}

@Html.Hidden("list.Index", index)
@Html.Hidden("list[" + index + "].Id", Model.Id)
@Html.Hidden("list[" + index + "].Name", Model.Name)
@Html.CheckBox("list[" + index + "].CheckBox", Model.CheckBox) 
```

现在，当`SendData`调用该操作时，它将传递您的视图模型列表。

或者，您可以使用中提供的`Html.BeginCollectionItem`帮助器，[`following article`](http://blog.stevensanderson.com/2010/01/28/editing-a-variable-length-list-aspnet-mvc-2-style/)这将允许您使用强类型版本的帮助器：

```
@model CheckBoxViewModel
@using(Html.BeginCollectionItem("list")) 
{
    @Html.HiddenFor(x => x.Id)
    @Html.HiddenFor(x => x.Name)
    @Html.CheckBoxFor(x => x.CheckBox)
} 
```

推荐阅读：[`Model Binding To A List`](http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx)。

# java - 如何在网上找到合适的 pom 条目？

> ID：13110936
> 
> 赞同：0
> 
> 时间：2012-10-28T16:55:01.063
> 
> 标签：java, spring, maven, pom.xml

我正在尝试`pom`为

```
org.springframework.web.servlet-3.1.2.RELEASE.jar 
```

上网了，但没有更多

```
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-web</artifactId>
    <version>3.1.2.RELEASE</version>
</dependency> 
```

最终我需要导入

```
import org.springframework.web.servlet.ModelAndView; 
```

但我无法在[这里](http://mvnrepository.com/artifact/org.springframework/)找到这个罐子。找到了我需要的一切，但 servlet。

请协助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T17:04:23.573

您需要的课程在`spring-webmvc`，请参见[此处](http://search.maven.org/#search%7Cgav%7C1%7Cg%3A%22org.springframework%22%20AND%20a%3A%22spring-webmvc%22)。

网站[www.findjar.com](http://www.findjar.com)对于查找包含特定类的 jar 非常有用。

# python - 程序“python”收到 X Window 系统错误

> ID：13110937
> 
> 赞同：6
> 
> 时间：2012-10-28T16:55:19.567
> 
> 标签：python, user-interface

我一直在为一个将书籍存储在数据库中的小程序创建一个 GUI 界面。通常一切正常，但是当我单击“添加按钮”时，在执行操作后，程序关闭，我可以在终端上阅读：

```
The program 'python' received an X Window System error.

This probably reflects a bug in the program.
The error was 'BadWindow (invalid Window parameter)'.
(Details: serial 4916 error_code 3 request_code 15 minor_code 0)
(Note to programmers: normally, X errors are reported asynchronously;
that is, you will receive the error a while after causing it.
To debug your program, run it with the --sync command line
option to change this behavior. You can then get a meaningful
backtrace from your debugger if you break on the gdk_x_error() function.) 
```

我真的不明白这是什么错误。我正确使用 Tkinter 库来创建 GUI（窗口、按钮、表单、表格......）谢谢大家

# lisp - 语法绑定值必须是关键字：alpha。这是什么意思？

> ID：13110941
> 
> 赞同：1
> 
> 时间：2012-10-28T16:55:34.790
> 
> 标签：lisp, scheme, mit-scheme

这是我的小程序：

```
(let-syntax ((alpha (lambda (x)
                      (list (syntax quote)
                            (list)))))
  (alpha)) 
```

guile 执行它，并返回 ()。但 mit-scheme 输出以下内容：

```
;Syntactic binding value must be a keyword: alpha
;To continue, call RESTART with an option number:
; (RESTART 1) => Return to read-eval-print level 1. 
```

为什么？

（我的版本是：版本 9.1 || 微码 15.3 || 运行时 15.7 || SF 4.41 || LIAR/i386 4.118 || Edwin 3.116）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T06:19:11.333

您链接到的文档明确表明您绝对必须将语法规则与 let-syntax 一起使用。这是确切的语法契约。

```
 <macro block> ==>
          (let-syntax (<syntax spec>*) <body>)
         | (letrec-syntax (<syntax spec>*) <body>)
    <syntax spec> ==> (<keyword> <transformer spec>)
    <transformer spec> ==>
          (syntax-rules (<identifier>*) <syntax rule>*) 
```

根据规范，不能期望使用除语法规则之外的任何内容都不会出错。这会在 MIT Scheme 而不是在 Guile 中产生错误的唯一原因是因为 MIT Scheme 更多地应用异常（即 MIT Scheme 的 let-syntax 专门寻找确保您给它提供了语法规则）。它根本不是有效的 R4RS 代码，并且不应该在任何 R4RS 兼容的方案实现中工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T23:37:33.407

MIT 方案仅提供`syntax-rules`语法闭包和显式重命名来定义语法转换器。对于后两者，您需要其中一个`sc-macro-transformer`或`er-macro-transformer`表单。如果要使用语法对象，则需要使用支持语法对象（通常附带`syntax-case`）的实现，例如[Racket](http://www.racket-lang.org)或[Guile](http://www.gnu.org/software/guile/)。

顺便说一句，即使在具有语法对象的语言中，您的宏定义也可能不起作用，因为您从转换器返回列表而不是语法。此外，您链接到的网页是一个非常古老的标准。您可能想阅读有关宏的更新源，例如[TSPL4](http://www.scheme.com/tspl4/)。

# typescript - 如何使用 Typescript 声明一个具有我将在函数内部传递的属性的对象？

> ID：13110953
> 
> 赞同：0
> 
> 时间：2012-10-28T16:56:39.673
> 
> 标签：typescript

我一直在使用以下内容：

```
var modal = {
    content: '',
    form: '',
    href: ''
} 
```

但是现在我已经开始使用 Typescript 有没有更好的方法可以声明一个对象以及如何声明我的属性的类型。我使用这个对象的原因是它在一个函数内部，并且在该函数内部我有其他函数来设置和使用属性的值。这是我做到这一点的最佳方式，还是有另一种方式我可以用打字稿更好地做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T00:04:42.090

我猜你正在寻找这样的东西：

```
interface Modal {
    content: string;
    form: string;
    href: string;
}

function doIt() {

    var modal = {
        content: '',
        form: '',
        href: ''
    }

    function setStuff(m : Modal) {
        m.content = 'some content';
        m.form = 'form1';
        m.href = '...';
    }

    function clear(m : Modal) {
        m.content = m.form = m.href = '';
    }

    function dump(m : Modal) {
        console.log('content: '+ m.content);
        console.log('form: '+ m.form);
        console.log('href: '+ m.href);
    }

    dump(modal);
    setStuff(modal);
    dump(modal);
    clear(modal);
    dump(modal);
} 
```

请注意，您不需要将变量声明`modal`为 type `Modal`，TypeScript 会自动推断此信息。只需将类型添加到函数中就足够了。

但是，如果您愿意，您也可以为变量明确显示此类型信息：

```
var modal : Modal = {
    content: '',
    form: '',
    href: ''
} 
```

# ruby-on-rails-3.2 - 调整Ruby on Rails Tutorial 3.2中的Title Helper以正确处理&

> ID：13110958
> 
> 赞同：0
> 
> 时间：2012-10-28T16:57:15.197
> 
> 标签：ruby-on-rails-3.2, railstutorial.org

我正在使用 Michael Hartl 编写的 Ruby on Rails 教程 3.2 版中的标题助手，并且刚刚意识到 & 字符在标题中显示为 &Amp; 反而。

相关代码片段在这里[Official Sample App 2nd Edition](https://github.com/railstutorial/sample_app_2nd_ed/blob/master/app/helpers/application_helper.rb)

* * *

**问题。**我有一个 School 模型，并在 Show 视图中使用 School 名称，如下所示：

```
<% provide(:title, @school.name) %> 
```

* * *

**如果我的学校名称中有 &，则将其替换为 &Amp;** 在浏览器标题中。

* * *

Ryan Bates Railscasts 站点有一个类似的标题帮助程序，可以通过[这种方式](https://github.com/ryanb/railscasts/blob/master/app/helpers/layout_helper.rb)解决此问题， 但它使用的是**content_for**而不是**provide**。

* * *

尝试调整 Rails 教程助手，但无法使其正常工作。非常期待这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T17:17:57.163

您可以修改 page_title 帮助器并添加`html_safe`到输出字符串中，这样就不会转换 & 符号并使它们保持原样

```
def full_title(page_title)
  base_title = "Ruby on Rails Tutorial Sample App"
  if page_title.empty?
    base_title.html_safe
  else
    "#{base_title} | #{page_title}".html_safe
  end
end 
```

# c++ - CEIL 对于精确的整数除法来说太高了

> ID：13110959
> 
> 赞同：3
> 
> 时间：2012-10-28T16:57:40.873
> 
> 标签：c++, formula, ceil, off-by-one

今天早上我丢失了一堆文件，但由于它们所在的卷在内部和外部都进行了碎片整理，因此可以获得 100% 恢复所需的所有信息；我只需要在需要的地方填写 FAT。

我编写了一个程序来执行此操作，并在我转储到文件中的 FAT 副本上对其进行了测试，它运行良好，除了一些文件（526 个文件中的 17 个），FAT 链是一个单独的簇太长，并因此与下一个文件交叉链接。

幸运的是，我确切地知道问题出在哪里。我`ceil`在我的 EOF 计算中使用了，因为即使是一个字节，也需要一个额外的集群：

```
//Cluster    is the starting cluster of the file
//Size       is the size (in bytes) of the file
//BPC        is the number of bytes per cluster
//NumClust   is the number of clusters in the file
//EOF        is the last cluster of the file’s FAT chain

DWORD NumClust = ceil( (float)(Size / BPC) )
DWORD EOF      = Cluster + NumClust; 
```

该算法适用于所有文件，除了大小恰好是集群大小的倍数的文件，在这种情况下，它们最终成为一个集群太多了。

我想了一会儿，但不知如何做到这一点。看起来它应该很简单，但不知何故却出奇地棘手。

什么公式适用于任何大小的文件？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-28T17:01:44.050

如果你想要集群的数量，它会是`(size + BPC - 1) / BPC`所有整数数据类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T17:00:03.617

也许`ceil( (float)((Size - 1) / BPC) )`？

如果一切都是整数类型，那就更好了`((Size - 1) / BPC) + 1`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T17:02:09.613

`ceil( (float)(Size / BPC) )`进行整数除法，然后将其转换为浮点数。

你需要`ceil( (float)Size / BPC )`正确地做到这一点。但是首先在这里使用浮点数似乎是一个坏主意......请参阅整数解决方案的其他答案。

# php - 发布包含撇号的 php 变量

> ID：13110963
> 
> 赞同：0
> 
> 时间：2012-10-28T16:58:12.733
> 
> 标签：php, post, escaping, apostrophe

我无法将 php 变量发布到另一个页面。该变量是从用户选择的下拉列表中检索的，如果它包含撇号，我只会在发布撇号之前获得部分。IE 如果我想发布“Cooper's Hawk”，我只会收到“Cooper”。如何正确转义，以便发布整个字符串？

这就是我所拥有的：

```
 echo '<form method="POST" action="advanced_search2.php">';
 $dropdown_english_name = "<select class = 'dropdown' name='english_name'>     <option>ALL</option>";

$query = "SELECT DISTINCT english_name FROM moth_sightings WHERE user_id ='$username'ORDER BY english_name asc";
                $result = mysql_query($query) or die(mysql_error());
                echo "<tr><td>English Name:</td>";
                while($row = mysql_fetch_assoc($result)) 
                    {
                       $dropdown_english_name .= "\r\n<option class = 'dropdown_active' value='{$row['english_name']}'>{$row['english_name']}</option>";
                    }
                $dropdown_english_name .= '\r\n</select>';
                echo '<td>' .  $dropdown_english_name .'</td></tr>'; 
```

在不同的页面上

```
$posted_value = ($_POST['english_name']);
 echo $posted_value;die; 
```

因此，为了从上面的代码中澄清，发布的字符串是“cooper's hawk”，但回显的输出是“Cooper”。提前感谢您的任何提示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T17:21:16.320

您可能已经通过将其生成为

```
 <select ...><option value='cooper's hawk'>...</option></select>
                                  ^--- 
```

使用该构造，您将获得一个提交的值`cooper`，并且选项标签以两个未知属性`s`和结束`hawk`。构建这样的 html 表单时要小心。您**必须**确保数据中嵌入的引号不会从根本上改变 html 的结构，例如使用混合引号或编码引号：

```
values="cooper's hawk"
values="cooper&#39;s hawk" 
```

两者都可以。注意不同的引用风格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-10T20:03:45.533

你可以使用php函数`addslashes($variable)`

# hadoop - 如何在不重新启动集群的情况下更新 hadoop mapred-site.xml 的配置参数

> ID：13110965
> 
> 赞同：3
> 
> 时间：2012-10-28T16:58:37.257
> 
> 标签：hadoop

我想添加/更新以下参数

```
 <property>
    <name>mapred.map.tasks.speculative.execution</name>
    <value>false</value>
  </property> 
```

在 hadoop 中的 mapred-site.xml 中。如何在不重新启动集群的情况下执行此操作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-28T17:18:34.967

您可以在作业配置中设置此每个作业。如果要全局更改此行为，则必须重新启动集群。不重新启动就无法更改它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-29T01:05:58.570

根据[Hadoop - 权威指南](http://shop.oreilly.com/product/0636920021773.do)

> 请注意，某些属性在客户端配置中设置时无效。例如，如果您在作业提交中设置 mapred.tasktracker.map.tasks.maximum 并期望它会更改运行您的作业的 tasktracker 的任务槽数，您会感到失望，因为此属性仅在以下情况下才有效在 tasktracker 的 mapred-site.xml 文件中设置。通常，您可以通过名称告诉组件应在何处设置属性，因此 mapred.tasktracker.map.tasks.maximum 以 mapred.tasktracker 开头的事实为您提供了一个线索，即它只能为 tasktracker 守护进程设置. 然而，这并不是一个硬性规定，因此在某些情况下，您可能需要反复试验，甚至阅读源代码。

在客户端尊重且特定于作业的属性不需要重新启动集群，但另一方面，集群特定配置（如 mapred.tasktracker.map.tasks.maximum）需要重新启动集群。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-09-21T13:42:40.853

如果您使用 MRv2 (YARN for Resource scheduling)，则每次提交作业时都会读取 mapred-site.xml 文件中所做的更改，并且所有配置都将保存为作业配置 xml 文件（提交作业时）集群）。无需重新启动任何服务。

# c++ - 如何将 shared_ptr 用于 COM 接口指针

> ID：13110968
> 
> 赞同：4
> 
> 时间：2012-10-28T00:22:05.087
> 
> 标签：c++

我一直在阅读与新的 c++ 标准智能指针**unique_ptr、shared_ptr**和**weak_ptr**相关的各种使用建议，并且通常在我编写自己的代码来声明和使用它们时“了解”它们的含义。

然而，我读过的所有讨论似乎都局限于这种简单的使用情况，即程序员在他/她自己的代码中使用智能，而没有真正讨论必须使用需要原始指针或其他类型的库时的技术。智能指针，例如 COM 接口指针。

具体来说，我通过尝试启动和运行标准 Win32 实时游戏循环来学习 C++，该循环使用 Direct2D 和 DirectWrite 将文本呈现到显示每秒帧数的显示器上。

我使用 Direct2D 的第一个任务是使用 MSDN 上的 Direct2D 示例中的以下代码创建一个 Direct2D 工厂对象：

```
ID2D1Factory* pD2DFactory = nullptr;
HRESULT hr = D2D1CreateFactory(D2D1_FACTORY_TYPE_SINGLE_THREADED, &pD2DFactory); 
```

**pD2DFactory**显然是一个“输出”参数，在这里我不确定如何在这种情况下使用智能指针，如果确实有可能的话。我缺乏经验的 C++ 头脑告诉我我有两个问题：

1.  pD2DFactory是 COM 接口指针类型， **smart_ptr**如何与 COM 对象实例的 Add() / Release() 成员函数一起工作？
2.  在函数使用“out”指针参数技术的情况下，是否可以将智能指针传递给函数？

我确实尝试了在**comip.h头文件中使用****_com_ptr_t**来帮助管理指针生命周期的替代方法，并使用以下代码声明了**pD2DFactory指针：**

 ****```
_com_ptr_t<_com_IIID<pD2DFactory, &__uuidof(pD2DFactory)>> pD2DFactory = nullptr; 
```

到目前为止它似乎可以工作，但是如您所见，语法很麻烦:)

所以，我想知道这里是否有任何 C++ 专家可以确认智能指针是否能够在这种情况下提供帮助并提供使用示例，或者在需要与其他代码库一起工作时向我指出更深入的智能指针使用讨论对他们一无所知。或者这仅仅是我试图使用错误的工具来完成工作的一个案例？:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T17:37:00.370

您需要使用 typedef 来避免重复这个容易出错的声明。这很常见，以至于 comdef.h 有一个宏：

```
_COM_SMARTPTR_TYPEDEF(ID2D1Factory, __uuid(ID2D1Factory)); 
```

现在您可以使用：

```
ID2D1FactoryPtr pD2DFactory;
// etc.. 
```****

# ios - UITableView - 删除一行会导致崩溃

> ID：13110969
> 
> 赞同：1
> 
> 时间：2012-10-28T16:58:54.030
> 
> 标签：ios, uitableview, uitextfield

我有`UITableView`一个自定义标题，其中包含一个`UITextField`. 我在其中输入文本`textfield`并点击“完成”`keyboard`以关闭键盘 - 工作正常。

我有一个`UIActionSheet`启动以确认要删除表中的一行。点击“确认”并`UIActionSheet`取消该行并删除该行 - 工作正常。

但是，如果我在（并关闭键盘）中输入文本，`textfield`然后尝试删除一行 - 应用程序会冻结一会儿`UIActionSheet`然后崩溃。

这是我得到的崩溃报告。

```
Thread 0 Crashed:

0   CoreFoundation        0x00004260 __CFTypeCollectionRetain + 16
1   CoreFoundation        0x00005e38 __CFDictionaryRetainValue + 20
2   CoreFoundation        0x000054a8 __CFBasicHashAddValue + 100
3   CoreFoundation        0x00005158 CFDictionarySetValue + 68
4   UIKit                 0x000e3472 -[UITableView(_UITableViewPrivate) _updateWithItems:withOldRowData:oldRowRange:newRowRange:context:] + 1730
5   UIKit                 0x000e281e -[UITableView(_UITableViewPrivate) _endCellAnimationsWithContext:] + 4770
6   UIKit                 0x0012a4d6 -[UITableView _updateRowsAtIndexPaths:updateAction:withRowAnimation:] + 198
7   UIKit                 0x0012a3de -[UITableView deleteRowsAtIndexPaths:withRowAnimation:] + 14
8   Tracker8              0x00012502 -[TrackerTableViewController actionSheet:clickedButtonAtIndex:] (PriceTableViewController.m:313)
9   UIKit                 0x00369596 -[UIActionSheet(Private) _buttonClicked:] + 186 
```

为什么这两个元素单独工作而不是按顺序工作的任何建议？谢谢你的帮助。

更新：对我的代码的更多测试表明崩溃只发生在运行 iOS 4.1 的设备上。它不会在运行 iOS 5.1 或 iOS 6.0 的设备上崩溃。这使我认为我正在处理一个可能已知的旧错误。

我通过将表格视图放置在使用标签和文本字段在 IB 中创建的模拟“标题视图”下方来解决它。如果编辑文本字段然后删除一行，则不会再发生崩溃。

对于那些对重新创建/解释崩溃感兴趣的人，这里是实现代码：

```
@synthesize table;
@synthesize array;

#pragma mark View Lifecycle

- (void)viewDidLoad 
{
    [super viewDidLoad];

    NSMutableArray *staticArray = [[NSMutableArray alloc] initWithObjects:@"This is the 1st row.",
                        @"This is the 2nd row.", @"This is the 3rd row.",
                        @"This is the 4th row.", @"This is the 5th row.",
                        @"This is the 6th row.", @"This is the 7th row.",
                        @"This is the 8th row.", @"This is the 9th row.",
                        @"This is the 10th row.", nil];

    self.array = staticArray;
    [staticArray release];
}

#pragma mark TableView Data Source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView 
{
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section 
{
    return [self.array count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
{

    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) 
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
        [cell autorelease];
    }

    cell.textLabel.text = [self.array objectAtIndex:indexPath.row];

    return cell;
}

- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle 
                                        forRowAtIndexPath:(NSIndexPath *)indexPath 
{

    if (editingStyle == UITableViewCellEditingStyleDelete) 
    {
        // remove selected object from the data array
        [self.array removeObjectAtIndex:indexPath.row];

        // Delete the row from the table.
        [self.table deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] 
                          withRowAnimation:UITableViewRowAnimationFade];                
    } 
}

#pragma mark TableView Delegate

- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section
{
    // custom header view containing a label and a textfield
    UIView *headerView = [[[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 50)]autorelease];
    headerView.backgroundColor = [UIColor darkGrayColor];
    headerView.autoresizingMask = UIViewAutoresizingFlexibleWidth;

    UILabel *pLabel = [[[UILabel alloc] initWithFrame:CGRectMake(0, 0, 320, 21)] autorelease];
    pLabel.autoresizingMask = UIViewAutoresizingFlexibleWidth;
    pLabel.backgroundColor = [UIColor clearColor];
    pLabel.textAlignment = UITextAlignmentCenter;
    pLabel.textColor = [UIColor blackColor];
    pLabel.font = [UIFont boldSystemFontOfSize:17.0];
    pLabel.adjustsFontSizeToFitWidth = YES;
    pLabel.minimumFontSize = 10.0;
    pLabel.text = @"Table Header"; 

    UITextField *pField = [[[UITextField alloc] initWithFrame:CGRectMake(20, 18, 280, 31)] autorelease];
    pField.autoresizingMask = UIViewAutoresizingFlexibleWidth;
    pField.contentVerticalAlignment = UIControlContentVerticalAlignmentCenter;
    pField.textAlignment = UITextAlignmentCenter;
    pField.textColor = [UIColor blackColor];
    pField.font = [UIFont systemFontOfSize:17];
    pField.adjustsFontSizeToFitWidth = YES;
    pField.minimumFontSize = 10.0;
    pField.borderStyle = UITextBorderStyleNone;
    pField.clearButtonMode = UITextFieldViewModeWhileEditing;
    pField.autocapitalizationType = UITextAutocapitalizationTypeNone;
    pField.autocorrectionType = UITextAutocorrectionTypeNo;
    pField.keyboardType = UIKeyboardTypeDefault;
    pField.returnKeyType = UIReturnKeyDone;
    pField.delegate = self; 
    pField.placeholder = @"tap to enter text";

    // add label and textField to the header view
    [headerView addSubview:pLabel];
    [headerView addSubview:pField];

    return headerView;  
}

- (CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section
{
    return 50.0;
}

#pragma mark TextField Delegate

- (BOOL)textFieldShouldReturn:(UITextField *)textField
{   
    // dismiss the keyboard
    [textField resignFirstResponder];

    return YES;
}

#pragma mark Memory Management

- (void)didReceiveMemoryWarning 
{
    // Releases the view if it doesn't have a superview.
    [super didReceiveMemoryWarning];
}

- (void)viewDidUnload 
{
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;

    self.table = nil;
}

- (void)dealloc 
{
    [table release];
    [array release];

    [super dealloc];
}

@end 
```

要让它崩溃，请在装有 iOS 4.1 的设备上运行它并按照以下步骤操作：

1.  编辑文本字段
2.  关闭键盘
3.  滑动一行删除
4.  点击删除按钮
5.  碰撞！

感谢您查看此问题。

# database - textarea 文本未显示和页脚错误

> ID：13110970
> 
> 赞同：0
> 
> 时间：2012-10-28T16:58:56.477
> 
> 标签：database

我有一个页面 showPages.php，它显示了带有页面 ID 和页面标题的页面列表。当其中一个被点击时，它会转到editPages.php。在editPages.php 中，两个（输入标签）字段正确显示，但两个textarea 字段的文本没有显示，这很烦人。我在页面 ID 的帮助下连续提取所有数据。

解析的文本显示在“查看源代码”或 crome 的 Web 开发者控制台中。我还检查了背景颜色和文本颜色。但无法解决。即使我在 textarea 中写了一些东西，在单击更新按钮后正在更新，但文本没有显示在 textarea 字段中。

我在这里提供了带有页脚问题详细信息的 editPages.php 代码和快照。 [https://docs.google.com/document/d/1PWvNSF2tiCMx6Os6uXulpTHzBbhd98wW9dtgbUGE-hs/edit](https://docs.google.com/document/d/1PWvNSF2tiCMx6Os6uXulpTHzBbhd98wW9dtgbUGE-hs/edit)

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T17:09:49.373

这就是您设置 textarea 值的方式

```
<textarea rows="3" cols="30" name="page_meta"class="field size1">
     <?php echo $row['page_meta_desc'];?>
</textarea> 
```

不是

```
<textarea rows="3" cols="30" name="page_meta"class="field size1" value="<?php echo $row['page_meta_desc'];?>"></textarea> 
```

# php - 以特定的结构化方式在 PHP 中显示 MySQL 数据

> ID：13110974
> 
> 赞同：-2
> 
> 时间：2012-10-28T16:59:19.967
> 
> 标签：php, mysql

> **可能重复：**
> [在 PHP 中显示包含重复列的表](https://stackoverflow.com/questions/11528436/displaying-a-table-in-php-with-repeated-columns)

我想以特定的结构化方式显示一些 MySQL 数据。假设我在 MySQL 数据库中有这些数据

```
id         sections                 items
1          Section A                Item 1
1          Section A                Item 2
1          Section A                Item 3
1          Section A                Item 4
1          Section B                Item 5
1          Section B                Item 6
1          Section C                Item 7
1          Section C                Item 8
1          Section A                Item 9
1          Section D                Item 10
1          Section D                Item 11 
```

如何让它在 PHP 中显示如下：

```
SECTION A
---------

Item 1
Item 2
Item 3
Item 4
Item 9

SECTION B
---------

Item 5
Item 6

SECTION C
---------

Item 7
Item 8

SECTION D
---------

Item 10
Item 11 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T17:04:38.677

```
$sql = mysql_query("SELECT sections, items 
                    FROM my_table 
                    ORDER BY sections");
$lastSection = '';
while($row = mysql_fetch_array($sql)) {
   if($lastSection != $row['sections'])
       echo $row['sections'] . '<br />';
   echo $row['items'] . '<br />';
   $lastSection = $row['sections'];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T17:04:18.557

尝试从按“部分”排序的数据库中获取所有数据，并从普通数组中显示。

```
<? $currentSection = null; ?>
<? foreach ($data as $row): ?>
  <? if ($row['section'] != $currentSection): ?>
    <? $currentSection = $row['section']; ?>
    <h1><?=$row['section']?></h1>
  <? endif; ?>
  <div><?=$row['item']?></div>
<? endforeach; ?> 
```

# hadoop - 获取导致 MapReduce 作业崩溃的数据

> ID：13110981
> 
> 赞同：1
> 
> 时间：2012-10-28T17:01:11.367
> 
> 标签：hadoop, mapreduce, hadoop-streaming

在很多情况下，我正在编写数据处理程序，并且仅在较大的数据集上才发现新的错误。例如，考虑一个在 1 亿条记录中的 1 条记录上崩溃的脚本（由于意外输入或其他原因）；如果我在一小部分数据样本上开发它，我不会看到那个错误。我所能做的就是盯着 Hadoop 的错误日志，调整脚本，然后重新运行整个作业。这在计算和开发人员时间都非常低效。

我想要的是一种下载脚本崩溃时正在处理的数据段的方法。

有没有一种简单的方法可以将其从 Hadoop 中移除？（理想情况下，Hadoop Streaming？）

几年前，我通过挖掘 Hadoop 本身制作的临时目录学到了一些可怕的技巧……不过，这似乎不是一个好的解决方案，我希望现在有更好的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T01:28:17.327

> 我想要的是一种下载脚本崩溃时正在处理的数据段的方法。

“keep.failed.task.files”描述是“是否应该保留失败任务的文件。这应该只用于失败的作业，因为存储永远不会回收。它还可以防止地图输出从减少目录，因为它们被消耗。”

它默认为假。将此属性更改为 true，如果任务失败，数据应该可用。可以将数据获取到开发人员机器上，并在 Eclipse 中轻松[调试程序。](http://www.thecloudavenue.com/2012/10/debugging-hadoop-mapreduce-program-in.html)

> 我所能做的就是盯着 Hadoop 的错误日志，调整脚本，然后重新运行整个作业。这在计算和开发人员时间都非常低效。

此外，当 Hadoop 作业遇到错误记录并且任务崩溃时，可以忽略该记录并重新运行 map/reduce 任务。无需再次运行完整的作业。查看此[Hadoop 文档](http://hadoop.apache.org/docs/r0.20.2/mapred_tutorial.html#Skipping+Bad+Records)以获取更多详细信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T17:49:29.403

我建议在 setup()、map()、reduce() 和 cleanup() 方法中围绕逻辑放置一个 try-catch 块。在 Exception 的 catch 块中增加一个计数器，其组为“Exception”（或其他），其名称是从异常的 getMessage() 方法返回的字符串。这至少会让你一目了然地知道发生了什么。在那个 catch 块中，您还可以将附加信息写入文件，包括堆栈跟踪、传入的键和值（或 utterable）等。

对于调试，我还喜欢“调试为... -> Java 应用程序” Eclipse 中的 hadoop 流。这帮助我发现并修复了我的代码中的一堆问题。

# html - HTML 共享结构

> ID：13110989
> 
> 赞同：0
> 
> 时间：2012-10-28T17:02:16.190
> 
> 标签：html, share, social

我在我的网站上创建了一些类来分享社交媒体。具有以下内容：

```
<ul class="social_list">
    <li><a href="#" class="social-facebook"><span class="ico">f</span></a></li>
    <li><a href="#" class="social-tweeter"><span class="ico">></span></a></li>
    <li><a href="#" class="social-flickr"><span class="ico">.</span></a></li>
    <li><a href="#" class="social-vimeo"><span class="ico">v</span></a></li>
    <li><a href="#" class="social-pinterest"><span class="ico">b</span></a></li>
    <li><a href="#" class="social-dribbble"><span class="ico">4</span></a></li>
    <li><a href="#" class="social-delicious"><span class="ico">6</span></a></li>
</ul> 
```

并编辑所有 css。现在，我想在此类中使用共享按钮。不想重新编辑我的 CSS。我怎样才能做到这一点？

# java - Java：在 add 方法中创建对象的副本？

> ID：13110992
> 
> 赞同：0
> 
> 时间：2012-10-28T17:02:27.850
> 
> 标签：java, object, copy

使用 add 命令创建要添加的对象的副本时，是否可以在 java 中使用？

我得到了这个对象：

```
JLabel seperator   = new JLabel (EMPTY_LABEL_TEXT); 
```

我补充说：

```
add (seperator,WEST); 
```

如果我想添加几个这种类型的对象，我想我必须复制它们，有没有办法在 add() 方法中做到这一点，如果没有 - 创建对象副本的最简单方法是什么？我只需要其中的 3 个，所以我不想要任何循环

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T17:05:51.440

```
JLabel separator2 = new JLabel(EMPTY_LABEL_TEXT);
JLabel separator3 = new JLabel(EMPTY_LABEL_TEXT); 
```

是你能做的最好的。如果标签在两个副本上都有许多不同的属性，则使用一种方法来创建三个标签，以避免重复相同的代码 3 次：

```
JLabel separator = createLabelWithLotsOfProperties();
JLabel separator2 = createLabelWithLotsOfProperties();
JLabel separator3 = createLabelWithLotsOfProperties(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T17:14:01.047

我认为 Swing 组件通常不实现`Cloneable`接口，因此您将不得不为自己制作一个副本或定义您自己`MySeparator`将使用的类`add(new MySeparator());`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T17:27:06.927

不是直接在 add() 方法中没有任何帮助。Swing 组件是可序列化的，因此编写一个使用 ObjectOutputStream 和 ObjectInputStream 复制组件的辅助方法应该相当容易。

**编辑：一个简单的例子：**

```
 public static JComponent cloneComponent(JComponent component) throws IOException, ClassNotFoundException {

        ByteArrayOutputStream bos = new ByteArrayOutputStream();
        ObjectOutputStream oout = new ObjectOutputStream(bos);

        oout.writeObject(component);
        oout.flush();

        ObjectInputStream oin = new ObjectInputStream(new ByteArrayInputStream(bos.toByteArray()));

        return (JComponent) oin.readObject();
    }

    public static void main(String[] args) throws ClassNotFoundException, IOException {

        JLabel label1 = new JLabel("Label 1");
        JLabel label2 = (JLabel) cloneComponent(label1);
        label2.setText("Label 2");

        System.out.println(label1.getText());
        System.out.println(label2.getText());
    } 
```

# javascript - 根据纬度计算一年中的日照小时数

> ID：13110996
> 
> 赞同：1
> 
> 时间：2012-10-28T17:03:02.937
> 
> 标签：javascript, calculator

我需要根据纬度和经度计算一年中的日照小时数。

我正在创建一个太阳能计算器，它将计算一年中的日照时间以输出年度变量。

我发现了这个计算：[根据地理坐标计算白天时间](https://stackoverflow.com/questions/6372802/calculate-daylight-hours-based-on-gegraphical-coordinates)

澄清一下，上面线程中的计算看起来不错，但可以消除日期/时间位，因为我只需要年度值。

任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T18:48:12.003

当你等待莱克的课时，这里是快速而肮脏的：

```
function sunshine(L){
    var total=0,P,D,I;
    for(var J=0;J<=365;J++){
        P=Math.asin(.39795*Math.cos(.2163108 + 2*Math.atan(.9671396*Math.tan(.00860*(J-186)))));
        I=(Math.sin(0.8333*Math.PI/180) + Math.sin(L*Math.PI/180)*Math.sin(P))/(Math.cos(L*Math.PI/180)*Math.cos(P))
        D= 24-((24/Math.PI)*Math.acos(I));
        total += D;        
    }
    return total;
}

console.log(sunshine(55)); 
```

[http://jsfiddle.net/rrmn8/](http://jsfiddle.net/rrmn8/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T10:29:13.460

花了大约6个小时才把它组装起来。我设法从一些 Java 类中找到了许多必需的算法。我已经将该类创建为 AMD 可加载模块，但我认为您可能不使用 AMD，因此它也可以在没有 AMD 的情况下加载。

所使用的算法均未受版权保护，并且在天文学年鉴等地方公开发表。

我在[GitHub Sundial](https://github.com/Kalyse/Sundial)下创建了存储库，它是在许可的修改后的 BSD 许可证下获得许可的，因此您可以在自己的项目中自由使用它。

它应该精确到 0.0001 分钟，并考虑到地球的[轴向倾斜和](http://en.wikipedia.org/wiki/Axial_tilt)[时间等式](http://en.wikipedia.org/wiki/Equation_of_time)。

## [日晷](https://github.com/Kalyse/Sundial)AMD 可加载日光计算器

```
/*  Credit and References */
// http://lexikon.astronomie.info/zeitgleichung/   EOT 
// http://articles.adsabs.harvard.edu/cgi-bin/nph-iarticle_query?bibcode=1989MNRAS.238.1529H&db_key=AST&page_ind=2&plate_select=NO&data_type=GIF&type=SCREEN_GIF&classic=YES
// http://code.google.com/p/eesim/source/browse/trunk/EnergySim/src/sim/_environment.py?spec=svn6&r=6
// http://mathforum.org/library/drmath/view/56478.html 
// http://www.jgiesen.de/elevaz/basics/meeus.htm
// http://www.ehow.com/how_8495097_calculate-sunrise-latitude.html
// http://www.jgiesen.de/javascript/Beispiele/TN_Applet/DayNight125d.java
// http://astro.unl.edu/classaction/animations/coordsmotion/daylighthoursexplorer.html
// http://www.neoprogrammics.com/nutations/Nutation_In_Longitude_And_RA.php
(function (factory) {
    if (typeof define === 'function' && define.amd ) {
        // AMD. Register as module
        if(typeof dojo === 'object') {
            define(["dojo/_base/declare"], function(declare){
                return declare( "my.calc.Sun", null, factory());
            });
        } else {
            define( 'Sundial', null, factory());
        }
    } else {
        Sun = new factory();
    }
}(function () {   
    return {
        date : new Date(),  
        getDate : function(){
          return this.date;  
        },
        setDate : function(d){
          this.date = d;
          return this;
        },
        getJulianDays: function(){
            this._julianDays = Math.floor(( this.date / 86400000) - ( this.date.getTimezoneOffset() / 1440) + 2440587.5);
            return this._julianDays;
        },
        // Calculate the Equation of Time
        // The equation of time is the difference between apparent solar time and mean solar time. 
        // At any given instant, this difference will be the same for every observer on Earth.
        getEquationOfTime : function (){        
            var K = Math.PI/180.0;
            var T = (this.getJulianDays() - 2451545.0) / 36525.0;   
            var eps = this._getObliquity(T); // Calculate the Obliquity (axial tilt of earth)
            var RA = this._getRightAscension(T);
            var LS = this._getSunsMeanLongitude(T);
            var deltaPsi = this._getDeltaPSI(T);                    
            var E = LS - 0.0057183 - RA + deltaPsi*Math.cos(K*eps);     
            if (E>5) {
                E = E - 360.0;
            }
            E = E*4; // deg. to min     
            E = Math.round(1000*E)/1000;                                
            return E;       
        },
        getTotalDaylightHoursInYear : function(lat){
            // We can just use the current Date Object, and incrementally
            // Add 1 Day 365 times... 
            var totalDaylightHours = 0 ;
            for (var d = new Date(this.date.getFullYear(), 0, 1); d <= new Date(this.date.getFullYear(), 11, 30); d.setDate(d.getDate() + 1)) {
                this.date = d;
                // console.log( this.getDaylightHours(lat) );
                totalDaylightHours += this.getDaylightHours(lat);
            }
            return totalDaylightHours;  
        },
        getDaylightHours : function (lat) {
            var K = Math.PI/180.0;
            var C, Nenner, C2, dlh;
            var T = (this.getJulianDays() - 2451545.0) / 36525.0;   
            this._getRightAscension(T); // Need to get the Suns Declination

            Nenner = Math.cos(K*lat)*Math.cos(K*this._sunDeclination);
            C = -Math.sin(K*this._sunDeclination)*Math.sin(K*lat)/Nenner; 
            C2=C*C;
            // console.log( T, C2, C, Nenner, lat, K,  Math.cos(K*lat) );
            if ((C>-1) && (C<1)) {
                dlh=90.0 - Math.atan(C / Math.sqrt(1 - C2)) / K;
                dlh=2.0*dlh/15.0;
                dlh=Math.round(dlh*100)/100; 
            }
            if (C>1) {
                dlh=0.0;
            }
            if (C<-1) {
                dlh=24.0;
            }
            return dlh;
        },
        _getRightAscension : function(T) {  
            var K = Math.PI/180.0;              
            var L, M, C, lambda, RA, eps, delta, theta;                     
            L = this._getSunsMeanLongitude(T); // Calculate the mean longitude of the Sun       
            M = 357.52910 + 35999.05030*T - 0.0001559*T*T - 0.00000048*T*T*T; // Mean anomoly of the Sun
            M = M % 360;        
            if (M<0) {
                M = M + 360;
            }       
            C = (1.914600 - 0.004817*T - 0.000014*T*T)*Math.sin(K*M);
            C = C + (0.019993 - 0.000101*T)*Math.sin(K*2*M);
            C = C + 0.000290*Math.sin(K*3*M);       
            theta = L + C; // get true longitude of the Sun                     
            eps = this._getObliquity(T);                
            eps = eps + 0.00256*Math.cos(K*(125.04 - 1934.136*T));      
            lambda = theta - 0.00569 - 0.00478*Math.sin(K*(125.04 - 1934.136*T)); // get apparent longitude of the Sun
            RA = Math.atan2(Math.cos(K*eps)*Math.sin(K*lambda), Math.cos(K*lambda));                
            RA = RA/K;
            if (RA<0) {
                RA = RA + 360.0;
            }           
            delta = Math.asin(Math.sin(K*eps)*Math.sin(K*lambda));
            delta = delta/K;        
            this._sunDeclination = delta;               
            return RA;      
        },
        // Calculate the Mean Longitude of the Sun
        _getSunsMeanLongitude : function(T){
            var L = 280.46645 + 36000.76983*T + 0.0003032*T*T;  
            L = L % 360;        
            if (L<0) {
                L = L + 360;
            }
            return L;           
        },
        // Nutation in ecliptical longitude expressed in degrees.
        _getDeltaPSI : function(T){
            var K = Math.PI/180.0;
            var deltaPsi, omega, LS, LM;            
            LS = this._getSunsMeanLongitude(T); 
            LM = 218.3165 + 481267.8813*T;      
            LM = LM % 360;  
            if (LM<0) {
                LM = LM + 360;
            }   
            // Longitude of ascending node of lunar orbit on the ecliptic as measured from the mean equinox of date.
            omega = 125.04452 - 1934.136261*T + 0.0020708*T*T + T*T*T/450000;
            deltaPsi = -17.2*Math.sin(K*omega) - 1.32*Math.sin(K*2*LS) - 0.23*Math.sin(K*2*LM) + 0.21*Math.sin(K*2*omega);
            deltaPsi = deltaPsi/3600.0;     
            return deltaPsi;    
        },
        // T = Time Factor Time factor in Julian centuries reckoned from J2000.0, corresponding to JD
        // Calculate Earths Obliquity Nutation
        _getObliquity : function (T) {
            var K = Math.PI/180.0;
            var LS = this._getSunsMeanLongitude(T);
            var LM = 218.3165 + 481267.8813*T;  
            var eps0 =  23.0 + 26.0/60.0 + 21.448/3600.0 - (46.8150*T + 0.00059*T*T - 0.001813*T*T*T)/3600;
            var omega = 125.04452 - 1934.136261*T + 0.0020708*T*T + T*T*T/450000;       
            var deltaEps = (9.20*Math.cos(K*omega) + 0.57*Math.cos(K*2*LS) + 0.10*Math.cos(K*2*LM) - 0.09*Math.cos(K*2*omega))/3600;
            return eps0 + deltaEps; 
        }
    };
})); 
```

## 演示 jsFiddle

您可以查看如何在 jsfiddle 上使用它的演示。

[http://jsfiddle.net/wjKRw/](http://jsfiddle.net/wjKRw/)

然后，当我开始使用它时，请查看存储库中的示例用例。 [GitHub 日晷](https://github.com/Kalyse/Sundial)

# vb.net - 使用 Filehelpers.dll 在输出中显示字段名

> ID：13110998
> 
> 赞同：1
> 
> 时间：2012-10-28T17:03:06.700
> 
> 标签：vb.net, filehelpers, field-names

想在输出中显示字段名，但我不知道如何解决这个问题。任何人请帮助..

### 测试.aspx.vb

```
Private Sub IFexportData()
    Try
        Dim fileLog, filePath, fileName As String

        fileLog = Year(dtDate.Text) & Month(dtDate.Text) & Day(dtDate.Text) & ".log"
        filePath = configurationAppSettings.GetValue("ExtractPath", GetType(System.String))
        fileName = filePath & "\" & fileLog

        Dim IFStorage As New SqlServerStorage(GetType(IFFormat))

        Dim cipherUsername, cipherPassword As Byte()
        cipherUsername = Encoder.Base64Decode(configurationAppSettings.GetValue("UserID", _
                GetType(System.String)))
        cipherPassword = Encoder.Base64Decode(configurationAppSettings.GetValue("Password", _
                GetType(System.String)))

        With IFStorage
            '.TransactionMode = 3
            .DatabaseName = configurationAppSettings.GetValue("DatabaseName", GetType(System.String))
            .ServerName = configurationAppSettings.GetValue("ServerName", GetType(System.String))
            .UserName = Dpapi.Decrypt(cipherUsername)
            .UserPass = Dpapi.Decrypt(cipherPassword)
        End With

        IFStorage.SelectSql = "SELECT" & vbCrLf & _
                            "m.Key, ISNULL(CONVERT(VARCHAR,m.Date,20),'') AS Date," & vbCrLf & _
                            "ISNULL(m.Loc,'') AS Loc," & vbCrLf & _
                            "ISNULL(CONVERT(VARCHAR,m.Sched,20),'') AS Sched" & vbCrLf & _ 
                            "FROM TAB1 p INNER JOIN" & vbCrLf & _
                            "TAB2 m ON p.Code = m.Code" & vbCrLf & _
                            "ORDER BY m.Date, m.Loc, Sched" & vbCrLf

        IFStorage.FillRecordCallback = New FillRecordHandler(AddressOf FillIFRecord)
        Dim res As IFFormat() = CType(IFStorage.ExtractRecords, IFFormat())

        Dim link As New FileDataLink(IFStorage)
        link.ExtractToFile(fileName)

        Dim file As System.IO.FileInfo = New System.IO.FileInfo(fileName)
        If file.Exists Then  'set appropriate headers  

            Response.Clear()
            Response.AddHeader("Content-Disposition", "attachment; filename=" & file.Name)
            Response.AddHeader("Content-Length", file.Length.ToString())
            Response.ContentType = "application/octet-stream"
            Response.WriteFile(file.FullName)
            Response.End() 'if file does not exist  
        Else
            Response.Write("This file does not exist.")
        End If 'nothing in the URL as HTTP GET  
    Catch ex As Exception
        Response.Write("<script language=javascript>alert('" & ex.Message.Replace("'", """") & "');</script>")
    End Try
End Sub

Protected Sub FillIFRecord(ByVal rec As Object, ByVal fields() As Object)
    Dim record As IFFormat
    record = rec

    record.Key = fields(0)
    record.Date = fields(1)
    record.Loc = fields(2)
    record.Sched = fields(3)
End Sub 
```

### IF格式.vb

```
[DelimitedRecord(",")]
Public Class IFFormat
    Public Key As String
    Public Date As String
    [FieldQuoted()] Public Loc As String
    Public Sched As String
End Class 
```

`xxxxxxxxxxx.log`我得到的示例输出：

```
1896044529,2012-10-01 00:00:00,"ABC",2012-10-01 04:10:00
1896044529,2012-10-01 00:00:00,"DEF",2012-10-01 04:22:00
1896044663,2012-10-01 00:00:00,"GHI",2012-10-01 04:36:00
1896044672,2012-10-01 00:00:00,"JKL",2012-10-01 04:44:00 
```

我想要的输出：

```
"Key","Date","Loc","Sched"
1896044529,2012-10-01 00:00:00,"ABC",2012-10-01 04:10:00
1896044529,2012-10-01 00:00:00,"DEF",2012-10-01 04:22:00
1896044663,2012-10-01 00:00:00,"GHI",2012-10-01 04:36:00
1896044672,2012-10-01 00:00:00,"JKL",2012-10-01 04:44:00 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T16:09:15.180

您可以将`HeaderText`FileHelpersEngine 设置为任何您想要的。

```
Dim link As New FileDataLink(IFStorage)
link.FileHelperEngine.HeaderText = """Key"", ""Date"", ""Loc"", ""Sched"""
link.ExtractToFile(fileName) 
```