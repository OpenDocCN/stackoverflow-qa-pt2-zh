# StackOverflow 问答 14595000-14595999

# php - php mysql获取带有字符问题的名称

> ID：14595003
> 
> 赞同：0
> 
> 时间：2013-01-30T01:02:03.943
> 
> 标签：php, mysql, zend-framework

嗨，我的数据库中有一个餐厅名称列表，其中一些名称带有类似字符 `&, @, and ' (quote)`，查看时名称在浏览器中的显示方式是`http://localhost/my-restaurant-new-york`因为我使用此功能用破折号替换空格`-`

```
$businessDetail = strtr($businessDetail, '-', ' '); 
```

根据企业名称，将找到企业 ID 并检索所有相关信息。如果在我的数据库中我有一个像`My Restaurant New & york`我这样的名字会导致 sql 错误如下

```
Message: SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ')' at line 3. 
```

现在的问题是如何在开头保存名称以及如何将其取回而不会出现特殊字符问题。谢谢

更新：我正在使用 zend 框架，所以这就是我将名称保存到数据库并取回的方式

```
$testMapper = new Application_Model_Mapper_TestMapper();
$testModel = new Application_Model_Test();

$bzname =  str_replace("'", '', $this->_getParam('name'));
$testModel->setId($id)
          ->setName($bzname);
$business_id = $testMapper->save($testModel); 
```

商家名称的所有链接都由此功能翻译

```
$this->view->bzurl = preg_replace("![^a-z0-9]+!i","-", $result['business_name']); 
```

更新2：

```
public function getBusinessId($business_detail)
    {
        $select = $this->getDbTable()->getAdapter()->select();
      $select->from('business',array('business_id'))

               ->where("business_name='".$business_detail."'"); 

        $result = $this->getDbTable()->getAdapter()->fetchRow($select);
        return $result['business_id'];      
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T01:30:50.380

```
->where("business_name='".$business_detail."'") 
```

应该：

```
->where("business_name = ?", $business_detail) 
```

以确保数据正确转义。如果这是生成错误的查询，那应该可以解决您的问题。我建议您阅读一些关于 SQL 注入以及如何避免它的内容。

# node.js - Express (node.js) 似乎正在用 application/json 替换我的内容类型

> ID：14595011
> 
> 赞同：4
> 
> 时间：2013-01-30T01:02:22.143
> 
> 标签：node.js, stream, express, content-type

我编写了一个本质上是代理的快速 Web 应用程序路由 - 它将输入流（一个 zip 文件）的内容通过管道传输到服务器响应的输出流中。

我希望浏览器提示用户下载或最适合 zip 文件的任何内容。但是，当我在浏览器中加载此路由时，输入流的内容（zip 文件的内容）在浏览器窗口中显示为文本，而不是提示下载。l

这是发送响应的代码：

```
 res.statusCode = 200;
    res.setHeader ('Content-Length', size);
    res.setHeader ('Content-Type', 'application/zip');

    console.log ("content-type is " + res.header('Content-Type'));

    inputStream.pipe (res); 
```

上面的 console.log 语句输出“content-type is application/zip”。

但是，当我在 Chrome 的网络选项卡中检查请求时，我看到响应的内容类型是“application/json”。这意味着 express 或其他东西正在覆盖我的内容类型标头，或者可能已经发送了它。

有谁知道是什么改变了我的内容类型，以及我如何确保内容类型是我设置的？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T14:43:09.260

您应该检查中间件的顺序，这真的很棘手，如果它们的顺序正确，可能会搞砸。[您可以在](http://www.senchalabs.org/connect/)Connect 网页中查看正确的顺序

# linux - 优化单行 find + exec 命令

> ID：14595013
> 
> 赞同：2
> 
> 时间：2013-01-30T01:02:25.493
> 
> 标签：linux, performance, shell, unix, find

我需要获取系统上大约 1M+ 个文件的文件信息（名称、大小、修改日期）。我目前使用的命令是：

```
sudo find "$FULFILLMENT" "$ARCH1" "$ARCH2" "$MASTERING" -type f -exec ls -lT {} + 
```

有没有办法改善这一点？唯一的要求是我必须获取上述卷中的所有文件，并为每个文件提取名称、大小和 date_modified。

（有没有办法在这里执行 stat 命令？这会加快速度吗？）

这在光纤连接的机器上大约需要一个小时。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T01:15:02.887

`ls`您可以使用`find`的内置打印，而不是将打印输出到：

```
sudo find ... -type f -printf '%p      %s      %t\n' 
```

我不确定这会快多少，但它可以节省分叉到`ls`，并且不必再次查询磁盘以通过已有的信息检索信息`ls`，`find`因此它至少应该更快*一些。*

（顺便说一句，您可以搜索`man find`有关`-printf`这些格式字符串的更多信息。特别是，您可以自定义上次修改时间的表示，并且可以为其他字段指定显式字段宽度。）

# html - 只影响类的某些元素

> ID：14595014
> 
> 赞同：-2
> 
> 时间：2013-01-30T01:02:32.190
> 
> 标签：html, css

所以我有一个类，在那个类中我有一个表格和一个文本对象（<p>）。我只想设置表格而不是文本对象的样式，但我不想像这样设置所有表格的样式。这可能吗？如果可以，我该怎么做？

```
<html>
<head>
<title>Insert title</title>
<link rel="stylesheet" type="text/css" href="styles.css">
</head>
<body>
<div id=COA>
<img src="IMG/mainImgsmall.jpg"  alt="Coat of Arms">
</div>
<div id=navBar>
        <table>
                <tr>
                        <td><a href="index.html">Home</a></td>
                        <td><a href="away.html">Away</a></td>
                        <td><a href="test0.html">test0</a></td>
                        <td><a href="test1.html">test1</a></td>
                </tr>
        </table>

<p>hfef</p>
</div>
<p>this is home</p>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T01:38:21.580

使用像这样的选择器`#navBar table { ... }`

# plugins - 我应该使用插件还是更改 PHP 需要限制 Jomsocial 中的配置文件功能？

> ID：14595017
> 
> 赞同：-2
> 
> 时间：2013-01-30T01:03:04.420
> 
> 标签：plugins, joomla, core, jomsocial

例如，当我安装 Jomsocial 时，没有隐藏“群组”区域的选项。我的客户希望将其隐藏。是否可以创建一个插件来隐藏某些元素，例如显示，或者这是否需要我直接编辑核心文件？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T08:38:48.273

比这简单得多，jomsocial 中可用的功能及其访问级别是由相应的 jomsocial 菜单项的限制决定的。

只需打开管理员 -> 菜单 -> jomsocial -> 组并将其设置为可能的最高权限（超级用户）然后禁用它，这应该可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T12:01:17.790

我没明白你到底想隐瞒什么。如果您想隐藏群组菜单，请按照 Riccardo Zorn 的回答。如果你想隐藏低于 frnds 的 Groups 模块，那么你可以修改模板文件。请记住，您可以覆盖 Jom Social 模板文件。您可以轻松地做到这一点，而无需修改核心 JS 文件。希望它可以帮助你。

# python - 无法部署到 GAE

> ID：14595019
> 
> 赞同：2
> 
> 时间：2013-01-30T01:03:12.827
> 
> 标签：python, google-app-engine, python-2.7

```
08:38 AM Scanning files on local disk.
2013-01-30 08:38:30,884 ERROR appcfg.py:1856 Invalid character in filename: Icon

Error 409: --- begin server output ---
Another transaction by user SLim is already in progress for app: s~pekkylab, version: 1\. That user can undo the transaction with "appcfg rollback".
--- end server output ---
Password for myemail@email.com: If deploy fails you might need to 'rollback' manually.
The "Make Symlinks..." menu option can help with command-line work.
*** appcfg.py has finished with exit code 1 *** 
```

**当我尝试上传时，我收到了这个错误，然后按照它的指导员执行回滚，然后我在这里收到另一个错误**

```
08:41 AM Application: pekkylab
08:41 AM Host: appengine.google.com
08:41 AM Rolling back the update.
Traceback (most recent call last):
  File "/usr/local/bin/appcfg.py", line 171, in <module>
    run_file(__file__, globals())
  File "/usr/local/bin/appcfg.py", line 167, in run_file
    execfile(script_path, globals_)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/appcfg.py", line 4377, in <module>
    main(sys.argv)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/appcfg.py", line 4368, in main
    result = AppCfgApp(argv).Run()
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/appcfg.py", line 2605, in Run
    self.action(self)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/appcfg.py", line 4103, in __call__
    return method()
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/appcfg.py", line 3553, in Rollback
    self._Rollback()
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/appcfg.py", line 3569, in _Rollback
    appversion.Rollback()
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/appcfg.py", line 2151, in Rollback
    self.Send('/api/appversion/rollback')
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/appcfg.py", line 1842, in Send
    return self.rpcserver.Send(url, payload=payload, **self.params)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/appengine_rpc.py", line 391, in Send
    f = self.opener.open(req)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py", line 391, in open
    response = self._open(req, data)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py", line 409, in _open
    '_open', req)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py", line 369, in _call_chain
    result = func(*args)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py", line 1181, in https_open
    return self.do_open(httplib.HTTPSConnection, req)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/lib/fancy_urllib/fancy_urllib/__init__.py", line 379, in do_open
    url_error.reason.args[1])
fancy_urllib.InvalidCertificateException: Host appengine.google.com returned an invalid certificate (_ssl.c:499: error:14090086:SSL routines:SSL3_GET_SERVER_CERTIFICATE:certificate verify failed): 
To learn more, see http://code.google.com/appengine/kb/general.html#rpcssl 
```

**任何线索为什么会发生这种情况？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T11:21:05.180

我猜你正在使用 MacOS，这个文件是`Icon?`（阅读更多关于[SU answer](https://superuser.com/a/298798/32981)）。如果您列出终端中的所有文件，您可以轻松验证它：`ls`.

为了跳过该文件，将其添加到文件末尾`app.yaml`并重新部署：

```
skip_files:
- ^(.*/)?Icon\r 
```

您可以在文档中阅读有关[跳过文件](https://developers.google.com/appengine/docs/python/config/appconfig#Skipping_Files)的更多信息。

此外，您可能需要在重新部署之前回滚：

```
appcfg.py rollback /path/to/project 
```

如果对您没有任何效果，请尝试部署到新应用程序并改天再试一次 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T12:03:24.333

尝试以这种方式使用参数 no_cookies 进行部署`appcfg.py update . --no_cookies`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T01:26:27.817

如日志所述，图标的文件名中可能有一些奇异的字符。重命名它，并更新您的应用程序以使用重命名的版本。

您应该手动回滚事务（“appcfg 回滚”），然后再次尝试部署。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-28T21:10:22.830

您的应用程序文件夹可能有一个自定义图标...生成一个“隐藏”图标文件，将其删除。

# python - 在 heroku 上提供静态文件

> ID：14595020
> 
> 赞同：7
> 
> 时间：2013-01-30T01:03:41.400
> 
> 标签：python, heroku, flask, gunicorn

我正在为heroku 编写一个Python 应用程序。Flask 用于应用程序的 Web 组件。

我的问题是我找不到提供静态文件的方法。我不想通过烧瓶来做，因为那效率很低。

我也在使用gunicorn。我将如何设置静态文件的服务？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-31T19:08:58.273

尝试使用 Amazon s3 存储静态和媒体文件。可以在[此处](https://stackoverflow.com/questions/11569144/proper-way-to-handle-static-files-and-templates-for-django-on-heroku)找到类似的问题和答案。[这](https://devcenter.heroku.com/articles/s3)是 heroku 使用 s3 的文档。然后，您可能希望在[此处禁用自动 collectstatic 指令，](https://devcenter.heroku.com/articles/django-assets)这样每次推送到 heroku 时都不会运行 collectstatic。希望这可以帮助。

# c# - 如何在 WinRT 的 HttpWebRequest 中禁用“期望：100 继续”标头

> ID：14595021
> 
> 赞同：33
> 
> 时间：2013-01-30T01:03:51.940
> 
> 标签：c#, windows-8, httpwebrequest, windows-runtime

我正在开发一个应用程序，由于遗留代码的原因，我无法升级新的`HttpClient`，所以我正在使用`HttpWebRequests`.

在 .NET 4 中，我们可以使用属性停用 Expect 标头（在发布请求上） [`ServicePoint.Expect100Continue`](http://msdn.microsoft.com/en-us/library/system.net.servicepointmanager.expect100continue.aspx)，但在 WinRT 上它不可用。

这如何在 WinRT 上完成？

编辑：`System.Net.ServicePointManager.Expect100Continue`也不可用。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-02-03T12:36:52.807

```
var c = new HttpClient();
c.DefaultRequestHeaders.ExpectContinue = false; 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-02-03T12:51:06.703

把这是你的webconfig。

```
<system.net>
  <settings> 
    <servicePointManager expect100Continue="false"/>  
  </settings> 
</system.net> 
```

也有效！我在我的网络应用程序中使用它。但是上面的答案同样好！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-03T08:25:18.220

它似乎是您覆盖 BeginGetRequestStream 的唯一选择。HttpWebRequest 有一个私有方法 MakeRequest，其中 Expect100Continue 标头被添加到请求标头集合中。

# paypal - 贝宝结帐显示运费，但不包括在交易中

> ID：14595027
> 
> 赞同：2
> 
> 时间：2013-01-30T01:04:40.493
> 
> 标签：paypal

我不知道问题出在代码还是贝宝帐户设置中。Paypal 正确显示了运费，它显示了正确的总计（商品价格 + 运费），但实际上，交易只包括商品价格，不包括运费。我一直无法找出问题所在。如果 paypal 可以正确显示，为什么不能在交易中正确包含它？

这是发送到贝宝的请求：

```
 $padata =   '&CURRENCYCODE='.urlencode($PayPalCurrencyCode).
            '&PAYMENTACTION=Sale'.
            '&ALLOWNOTE=1'.
            '&PAYMENTREQUEST_0_CURRENCYCODE='.urlencode($PayPalCurrencyCode).
            '&PAYMENTREQUEST_0_AMT='.urlencode($TotalPrice).
            '&PAYMENTREQUEST_0_ITEMAMT='.urlencode($ItemTotalPrice).
            '&L_PAYMENTREQUEST_0_QTY0='. urlencode($ItemQty).
            '&L_PAYMENTREQUEST_0_AMT0='.urlencode($ItemPrice).
            '&PAYMENTREQUEST_0_SHIPPINGAMT='.urlencode($deliveryCost).
            '&L_PAYMENTREQUEST_0_NAME0='.urlencode($ItemName).
            '&L_PAYMENTREQUEST_0_NUMBER0='.urlencode($ItemNumber).
            '&AMT='.urlencode($ItemTotalPrice).
            '&RETURNURL='.urlencode($PayPalReturnURL ).
            '&CANCELURL='.urlencode($PayPalCancelURL); 
```

我使用的运输参数是：

```
PAYMENTREQUEST_0_SHIPPINGAMT 
```

这是正确的吗 ？需要补充吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T16:41:28.823

您是否在 DoExpressCheckoutPayment 调用以及 SetExpressCheckout 调用中提供了所有变量`PAYMENTREQUEST_0_*`和变量？`L_PAYMENTREQUEST_0_*`

SetExpressCheckout 将控制买家在 PayPal 上结账时看到的内容。DoExpressCheckoutPayment 将控制买家实际支付的费用。因此，如果您希望您的运费包含在交易中，您需要确保它包含在两个通话中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T22:16:24.550

对于记录，正确的参数 DoExpressCheckoutPayment ：

```
 $padata =   '&TOKEN='.urlencode($token).
            '&PAYERID='.urlencode($playerid).
            '&PAYMENTACTION='.urlencode("SALE").
            '&PAYMENTREQUEST_0_CURRENCYCODE='.urlencode($PayPalCurrencyCode).
            '&PAYMENTREQUEST_0_SHIPPINGAMT='.urlencode($deliveryCost).
            '&PAYMENTREQUEST_0_AMT='.urlencode($TotalPrice).
            '&PAYMENTREQUEST_0_ITEMAMT='.urlencode($ItemTotalPrice).
            '&CURRENCYCODE='.urlencode($PayPalCurrencyCode); 
```

# php - 致命错误：允许的内存大小为 134217728 字节已用尽（尝试分配 36 字节）

> ID：14595032
> 
> 赞同：1
> 
> 时间：2013-01-30T01:05:43.207
> 
> 标签：php

我做了一个函数将返回序列号的第 N 位，例如：

1234567891011121314151617

*   第 5 个数字是 5
*   第 20 位是 1

我的功能是这样的

```
 <?php
   function getLength($number) {
   $length = 0;
   if ($number == 0){
      $length = 1;
   } else {
      $length = (int) log10($number)+1;
   }
     return $length;
  }
 ?>

<?php
 function getDigitNumber($digit){
   $number = 10000000000;
   $data = array();
   for($i=1;$i<=$number;$i++){  
   if(getLength($i) > 1){
     $array = str_split($i,1);
    for($n=0;$n<=count($array)-1;$n++){
        array_push($data,$array[$n]);
    }   
}else{
    $data[$i] = $i;
}
  } 
return $data[$digit];
}
?> 
```

当我执行时，我遇到了这样的错误消息“致命错误：允许的内存大小为 134217728 字节已用尽（尝试分配 36 字节）”。也许是因为我在 var 中分配了一个很大的数字`$number`

我该如何解决..或者我怎样才能制作可以处理这些大量数字的功能

谢谢..

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-30T01:08:26.710

> 我做了一个函数将返回序列号的第 N 位，例如：
> 
> 1234567891011121314151617
> 
> ```
> The 5-th digit is 5
> The 20-th digit is 1 
> ```

为什么不：

```
$number[5];
$number[20]; 
```

无论如何，数字必须是字符串，因此只需使用数组语法访问字符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T01:29:15.060

关于内存问题，确实是因为数量多：

```
$number = 10000000000;
$data = array();
for($i=1;$i<=$number;$i++){  
    if(getLength($i) > 1){
        $array = str_split($i,1);
        for($n=0;$n<=count($array)-1;$n++){
            array_push($data,$array[$n]);
        }
    } else{
        $data[$i] = $i;
    }
} 
```

`$data`基本上，它分配了一个包含约 500,000,000,000 个项目的数组 ( )，这是*相当*大的......

按照其他答案/评论中的建议将您的数字作为字符串（或字符数组）操作将是：更容易，更易读，更快，更少内存消耗，......

# android - 让 Android MapView V2 快速入门教程工作

> ID：14595036
> 
> 赞同：1
> 
> 时间：2013-01-30T01:06:20.343
> 
> 标签：android, eclipse, maps

我正在尝试按照本指南运行一个简单的地图：[https ://docs.google.com/document/pub?id=19nQzvKP-CVLd7_VrpwnHfl-AE9fjbJySowONZZtNHzw](https://docs.google.com/document/pub?id=19nQzvKP-CVLd7_VrpwnHfl-AE9fjbJySowONZZtNHzw)

我在第 6 步和第 8 步迷路了。我应该在哪里放置“GooglePlayServices.util...”行和“GoogleMap map =”行？

我把它们都放在了最后的 androidmanifest.xml 文件中。

该程序运行但当我尝试在模拟器和我的android设备上打开它时它会崩溃。

这是我的代码。

Activity_Main.xml：

```
<fragment xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/map"
android:layout_width="match_parent"
android:layout_height="match_parent"
class="com.google.android.gms.maps.SupportMapFragment"
/> 
```

AndroidManifest.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.mapexample"
android:versionCode="1"
android:versionName="1.0" >

<permission android:name="your_package_name.permission.MAPS_RECEIVE"
     android:protectionLevel="signature"/>

<uses-permission  android:name="your_package_name.permission.MAPS_RECEIVE"/>

<uses-permission android:name="android.permission.INTERNET"/>

<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>

    <uses-permission    
    android:name="com.google.android.providers.gsf.permission.READ_GSERVICES"/>

<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>

<uses-feature android:glEsVersion="0x00020000" android:required="true"/>

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="17" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.example.mapexample.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <meta-data
        android:name="com.google.android.maps.v2.API_KEY"
         android:value="AIzaSyCamZzoe1qpYwpNyqDNpAVw8wlrG1NBd60"/>
GooglePlayServicesUtil.isGooglePlayServicesAvailable(getApplicationContext());
GoogleMap map = ((SupportMapFragment)  
getSupportFragmentManager().findFragmentById(R.id.map))
.getMap();
    </application>

</manifest> 
```

* * *

这是 LogCat：

```
01-30 18:20:17.863: W/Trace(892): Unexpected value from nativeGetEnabledTags: 0
01-30 18:20:17.884: W/Trace(892): Unexpected value from nativeGetEnabledTags: 0
01-30 18:20:17.884: W/Trace(892): Unexpected value from nativeGetEnabledTags: 0
01-30 18:20:18.213: W/Trace(892): Unexpected value from nativeGetEnabledTags: 0
01-30 18:20:18.213: W/Trace(892): Unexpected value from nativeGetEnabledTags: 0
01-30 18:20:18.733: W/dalvikvm(892): VFY: unable to resolve static field 861   
(MapAttrs) in Lcom/google/android/gms/R$styleable;
01-30 18:20:18.733: D/dalvikvm(892): VFY: replacing opcode 0x62 at 0x000e
01-30 18:20:18.754: D/AndroidRuntime(892): Shutting down VM
01-30 18:20:18.754: W/dalvikvm(892): threadid=1: thread exiting with uncaught  
exception (group=0x40a70930)
01-30 18:20:18.763: E/AndroidRuntime(892): FATAL EXCEPTION: main
01-30 18:20:18.763: E/AndroidRuntime(892): java.lang.NoClassDefFoundError: 
com.google.android.gms.R$styleable
01-30 18:20:18.763: E/AndroidRuntime(892):  at  
com.google.android.gms.maps.GoogleMapOptions.createFromAttributes(Unknown Source)
01-30 18:20:18.763: E/AndroidRuntime(892):  at 
com.google.android.gms.maps.SupportMapFragment.onInflate(Unknown Source)
01-30 18:20:18.763: E/AndroidRuntime(892):  at 
android.support.v4.app.FragmentActivity.onCreateView(FragmentActivity.java:279)
01-30 18:20:18.763: E/AndroidRuntime(892):  at 
android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:676)
01-30 18:20:18.763: E/AndroidRuntime(892):  at    
android.view.LayoutInflater.inflate(LayoutInflater.java:466)
01-30 18:20:18.763: E/AndroidRuntime(892):  at 
android.view.LayoutInflater.inflate(LayoutInflater.java:396)
01-30 18:20:18.763: E/AndroidRuntime(892):  at  
android.view.LayoutInflater.inflate(LayoutInflater.java:352)
01-30 18:20:18.763: E/AndroidRuntime(892):  at 
com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:270)
01-30 18:20:18.763: E/AndroidRuntime(892):  at 
android.app.Activity.setContentView(Activity.java:1881)
01-30 18:20:18.763: E/AndroidRuntime(892):  at 
com.example.mapexample.MainActivity.onCreate(MainActivity.java:15)
01-30 18:20:18.763: E/AndroidRuntime(892):  at 
android.app.Activity.performCreate(Activity.java:5104)
01-30 18:20:18.763: E/AndroidRuntime(892):  at 
android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
01-30 18:20:18.763: E/AndroidRuntime(892):  at 
android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
01-30 18:20:18.763: E/AndroidRuntime(892):  at 
android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
01-30 18:20:18.763: E/AndroidRuntime(892):  at 
android.app.ActivityThread.access$600(ActivityThread.java:141)
01-30 18:20:18.763: E/AndroidRuntime(892):  at 
android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
01-30 18:20:18.763: E/AndroidRuntime(892):  at 
android.os.Handler.dispatchMessage(Handler.java:99)
01-30 18:20:18.763: E/AndroidRuntime(892):  at android.os.Looper.loop(Looper.java:137)
01-30 18:20:18.763: E/AndroidRuntime(892):  at 
android.app.ActivityThread.main(ActivityThread.java:5039)
01-30 18:20:18.763: E/AndroidRuntime(892):  at    
java.lang.reflect.Method.invokeNative(Native Method)
01-30 18:20:18.763: E/AndroidRuntime(892):  at   
java.lang.reflect.Method.invoke(Method.java:511)
01-30 18:20:18.763: E/AndroidRuntime(892):  at 
com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
01-30 18:20:18.763: E/AndroidRuntime(892):  at 
com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
01-30 18:20:18.763: E/AndroidRuntime(892):  at dalvik.system.NativeStart.main(Native 
Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T02:23:11.543

第 6 步和第 8 步中引用的语句来自一种称为 Java 的编程语言。Java 代码位于 Java 源文件中，例如用于您的活动的源文件。Java 源代码不在清单中。

您*不需要*任何这些 Java 源代码。步骤 6 中的一个通常是一个好主意，以确定 Maps V2 是否可用，因此如果用户的设备无法显示 Maps V2 地图，您可以做一些事情。如果您希望配置您的`GoogleMap`对象，例如在其上放置标记，您可以使用第 8 步中的代码。

您可能希望考虑阅读[Maps V2 文档](https://developers.google.com/maps/documentation/android/start)以帮助补充您链接到的文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-12T15:30:54.090

FWIW，当我进入项目设置并将库添加到我的 Java 构建路径中时，我遇到了同样的错误。相反，您必须将库添加到左侧 Android 类别的项目设置中（这是说明中的重要步骤）。

如果您也在 Windows 中，请确保播放服务库也在同一个驱动器/分区上。如果您不这样做，您将能够添加它，但是当您再次查看项目中的库引用时，它会显示为红色 X。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T20:43:04.607

我解决了这个问题，但我不确定如何解决。我认为这是因为我在最终 /application 之前将这一行添加到了我的 androidmanifest 文件中：

```
 <uses-library android:name="com.google.android.maps" /> 
```

我也有几个例子，我复制/粘贴的代码中没有我的包名。当我生成我的 API 代码时，我还确保我的包名称是正确的。

# google-maps - 在谷歌地图中创建多个信息框和标记

> ID：14595037
> 
> 赞同：2
> 
> 时间：2013-01-30T01:06:35.113
> 
> 标签：google-maps, google-maps-markers

嘿伙计们，我正在创建一个使用多个标记的地图，每个标记都有一个不同的信息框。我知道我可以使用数组来创建新标记，但我不知道如何为每个标记创建一个唯一的信息框。

```
<code>
<html>
<head>
<title>Google Maps Test</title>
<style type="text/css">
#map_container{
    width:100%;
    height:350px;
}
#hook {
    color:#0C6;
}
</style>
<script type="text/javascript" 
   src="http://maps.googleapis.com/maps/api/js?sensor=false"></script>

<script type="text/javascript">
  function loadMap() {
    var latlng = new google.maps.LatLng(4.3695030, 101.1224120);
    var myOptions = {
      zoom: 12,
      center: latlng,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    var map = new google.maps.Map(document.getElementById("map_container"),myOptions);

    var marker = new google.maps.Marker({
      position: latlng, 
      map: map, 
      title:"test"
    }); 
     var infoWindowOptions = {
    content: '<p id="hook">Hello World!</p>'
};

var infoWindow = new google.maps.InfoWindow(infoWindowOptions);
google.maps.event.addListener(marker,'click',function(e){

  infoWindow.open(map, marker);

});

  }

</script>
</head>

<body onLoad="loadMap()">
<div id="map_container"></div>
</body>

</html>
</code> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-31T13:27:58.087

您可以将此与信息框示例一起使用：http: [//jsfiddle.net/ccJ9p/7/](http://jsfiddle.net/ccJ9p/7/)

```
<!DOCTYPE html>
<html>
<head>
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
<script type="text/javascript" src="http://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobox/src/infobox.js"></script>
<script type="text/javascript">
function initialize() {
    var secheltLoc = new google.maps.LatLng(49.47216, -123.76307),
         markers,
            myMapOptions = {
             zoom: 13,
            center: secheltLoc,
            mapTypeId: google.maps.MapTypeId.ROADMAP
        },
        map = new google.maps.Map(document.getElementById("map_canvas"), myMapOptions);

    function initMarkers(map, markerData) {
        var newMarkers = [],
            marker;

        for(var i=0; i<markerData.length; i++) {
            marker = new google.maps.Marker({
                map: map,
                draggable: true,
                position: markerData[i].latLng,
                visible: true
            }),
            boxText = document.createElement("div"),
            //these are the options for all infoboxes
            infoboxOptions = {
                 content: boxText,
                disableAutoPan: false,
                maxWidth: 0,
                pixelOffset: new google.maps.Size(-140, 0),
                zIndex: null,
                boxStyle: {
                    background: "url('http://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobox/examples/tipbox.gif') no-repeat",
                    opacity: 0.75,
                    width: "280px"
                },
                closeBoxMargin: "12px 4px 2px 2px",
                closeBoxURL: "http://www.google.com/intl/en_us/mapfiles/close.gif",
                infoBoxClearance: new google.maps.Size(1, 1),
                isHidden: false,
                pane: "floatPane",
                enableEventPropagation: false
            };

            newMarkers.push(marker);
            //define the text and style for all infoboxes
            boxText.style.cssText = "border: 1px solid black; margin-top: 8px; background:#333; color:#FFF; font-family:Arial; font-size:12px; padding: 5px; border-radius:6px; -webkit-border-radius:6px; -moz-border-radius:6px;";
            boxText.innerHTML = markerData[i].address + "<br>" + markerData[i].state;
            //Define the infobox
            newMarkers[i].infobox = new InfoBox(infoboxOptions);
            //Open box when page is loaded
            newMarkers[i].infobox.open(map, marker);
            //Add event listen, so infobox for marker is opened when user clicks on it.  Notice the return inside the anonymous function - this creates
            //a closure, thereby saving the state of the loop variable i for the new marker.  If we did not return the value from the inner function, 
            //the variable i in the anonymous function would always refer to the last i used, i.e., the last infobox. This pattern (or something that
            //serves the same purpose) is often needed when setting function callbacks inside a for-loop.
            google.maps.event.addListener(marker, 'click', (function(marker, i) {
                return function() {
                    newMarkers[i].infobox.open(map, this);
                    map.panTo(markerData[i].latLng);
                }
            })(marker, i));
        }

        return newMarkers;
    }

    //here the call to initMarkers() is made with the necessary data for each marker.  All markers are then returned as an array into the markers variable
    markers = initMarkers(map, [
        { latLng: new google.maps.LatLng(49.47216, -123.76307), address: "Address 1", state: "State 1" },
        { latLng: new google.maps.LatLng(49.47420, -123.75703), address: "Address 2", state: "State 2" },
        { latLng: new google.maps.LatLng(49.47530, -123.78040), address: "Address 3", state: "State 3" }
    ]);
}
</script>
<title>Creating and Using an InfoBox</title>
</head>
<body onload="initialize()" style="padding:1em">
<div id="map_canvas" style="width: 100%;-webkit-border-radius: 5px;-moz-border-radius: 5px;border-radius: 5px; height: 300px;border:1px solid #666;margin-bottom:1em;box-shadow: 0px 0px 10px #333;"></div>
<p> This example shows the use of an InfoBox as a replacement for an InfoWindow.
<script type="text/javascript">
$(function() {
    if($.browser.msie) {
        $("<div/>", {html:"<br>Download Firefox <a href='http://www.mozilla.org/de/firefox/new/'>here</a>.", target:"_blank"}).appendTo("body");
    }
});
</script>
</body>
</html> 
```

# php - 关联数组值中的转义撇号

> ID：14595040
> 
> 赞同：1
> 
> 时间：2013-01-30T01:07:07.390
> 
> 标签：php, arrays, apostrophe

我有一个关联数组，它是从 MySQL 表动态构建的，如下所示：

```
array(['p.id'] => 3, ['p.fname'] => 'Bill', ['p.lname'] => 'O\'Reilly') 
```

这是一个很大的数组，并且以这种方式构建的原因太长而无法进入这里。如您所见，问题是当我们尝试访问 ['p.lname'] 的值时，我们得到“O\”

有人对如何在不修改数组构建方式的情况下解决这个问题有任何想法吗？我目前正在剥离斜线和内部撇号作为解决方法，但更愿意将撇号留在原处并仅剥离斜线。

这很复杂，因为输出进入表单输入，如下所示：

```
$field = "<input type='text' name='$input_unique_id' style='width:$width;' value='$array_value' />"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T01:12:45.527

> 带斜线

到目前为止是对的。

> 这很复杂，因为输出进入表单输入

这是一个不同的问题：您对 HTML 元素属性使用单引号，因此您不能像这样在属性值中使用它们*。属性值总是应该被转义[`htmlspecialchars`](http://php.net/htmlspecialchars)（在这种情况下你必须设置`ENT_QUOTES`标志）

*) 您当前的 HTML（已`stripslashes`应用）如下所示：

```
<input value='O'Reilly'> 
```

该`Reilly'`部分无效，因此被忽略，这就离开了`value='O'`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T01:11:11.987

您需要遍历数组的每个元素并像这样去除斜杠：

```
foreach ($arr as $key => $value) {
    $arr[$key] = stripslashes($value);
} 
```

# asp.net-mvc - 如何使用 Fluent Validation 实现远程验证，如 Asp.Net MVC Data Annotation 远程验证

> ID：14595041
> 
> 赞同：0
> 
> 时间：2013-01-30T01:07:08.420
> 
> 标签：asp.net-mvc, fluentvalidation

Asp.Net MVC 通过将 Remote 属性标记到模型中的相应字段来提供内部远程验证。当我用 Remote 标记任何字段时，它会生成一些额外的属性来支持 Remote validation。

**data-val-remote="EmailID 无效。" data-val-remote-additionalfields="*.EmailID" data-val-remote-url="/Home/TestEmailID"/**

如何使用 Fluent Validation 实现相同的目标？我在谷歌搜索了很多，发现一篇文章说要创建一个自定义远程验证器，如下面的链接中所述，但我有点难以理解，因为我是流利验证的新手。

[http://nripendra-newa.blogspot.com/2011/05/fluent-validation-remote-validation.html](http://nripendra-newa.blogspot.com/2011/05/fluent-validation-remote-validation.html)

如果有人可以指导我如何创建这个自定义远程验证器以及 JQuery 适配器来触发它，我将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-22T13:59:42.853

恐怕 Fluent (v3) 中实际上不支持远程验证。

检查[此](http://fluentvalidation.codeplex.com/discussions/258348)线程以获取来自 FluentValidation 开发人员的更多信息。

[这里](http://nripendra-newa.blogspot.it/2011/05/fluent-validation-remote-validation.html)有一些自定义实现

# c - 第一个 DGRAM 没有 IP

> ID：14595043
> 
> 赞同：0
> 
> 时间：2013-01-30T01:07:20.587
> 
> 标签：c, sockets

我正在使用的 UDP 服务器有一个奇怪的问题。收到的第一个 udp 数据包没有关于数据包来源的信息。随后的 udp 数据包似乎都很好，并正确显示了接收数据包的 ip 地址。我不知道是什么导致了这种行为，可能是一些愚蠢的错误，或者一些晦涩的错误。我在运行 Debian 的 Linux 机器上使用。

```
fd_set master;
fd_set read_fds;
int fdmax;
int i;
int bytes_sent;
int bytes_recv;
socklen_t addr_len;
struct sockaddr_storage their_addr;

// provides users information needed to connect
serv_info *server_info;
server_info = (serv_info*) serv_config;

// Create UDP listener socket
int info_sock = createDGRAMSocket(NULL, server_info->port, 1);
char buffer[1024];
int len;
int send_response;

FD_SET(info_sock, &master);
fdmax = info_sock;
bytes_recv = recvfrom(i, buffer, sizeof(buffer), 0, (struct sockaddr *)&their_addr, &addr_len);
printf("Info started \n");
while (running) {
    read_fds = master;
    select(fdmax+1, &read_fds, NULL, NULL, NULL);
    for (i = 0; i <= fdmax; i++) {
        if (FD_ISSET(i, &read_fds)) {
            bytes_recv = recvfrom(i, buffer, sizeof(buffer), 0, (struct sockaddr *)&their_addr, &addr_len);
            printf("length %u: %s\n", bytes_recv, buffer);
            send_response = 0;

            switch (buffer[0]) {
                // Handle different packet types

            }

            struct sockaddr_in *sin = (struct sockaddr_in *)&their_addr;
            unsigned char *ip = (unsigned char *)&sin->sin_addr.s_addr;
            printf("IP: %d.%d.%d.%d\n", ip[0], ip[1], ip[2], ip[3]);

            if (send_response) {
                bytes_sent = sendto(info_sock, buffer, len, 0, (struct sockaddr *)&their_addr, sizeof(struct sockaddr_storage));
                if (bytes_sent < 0) {
                    printf("[ERROR] Packet Send Failed %d (%s) %d\n", bytes_sent, buffer, len);
                }
            }
        }
    }
};
close(info_sock); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T01:25:33.093

您需要初始化`addr_len`为`sizeof(their_addr)`. 根据手册页：

> 参数**addrlen 是一个 value-result 参数**，**调用者应该在调用与 src_addr 关联的缓冲区大小之前对其进行初始化**，并在返回时修改以指示源地址的实际大小。如果提供的缓冲区太小，返回的地址会被截断；在这种情况下，addrlen 将返回一个大于提供给调用的值。

由于您没有进行初始化`addr_len`，因此它的值似乎为 0（这是高度未定义的行为）。在这种情况下，`recvfrom()`不会填充`their_addr`缓冲区，但正如手册页所示，`addr_len`将返回一个大于提供给调用的值。因此，在第一次调用之后，将`addr_len`采用一个允许下一次调用`recvfrom()`正确填充`their_addr`缓冲区的值。但是，依靠它是不安全的。

# vb.net - Lazy(Of T) 使用/初始化

> ID：14595046
> 
> 赞同：6
> 
> 时间：2013-01-30T01:07:45.517
> 
> 标签：vb.net, lazy-evaluation

我试图弄清楚这两种懒惰的用法有什么区别，哪种更适合使用，还是一样？

```
Dim context As New Lazy(Of DbContext)

Dim context As Lazy(Of DbContext) = New Lazy(Of DbContext)(Function() New DbContext()) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T01:17:01.547

如果 lambda 只使用默认构造函数构造实例，则效果相同，因为`Lazy<T>`没有委托的构造函数只使用类型的默认构造函数。在这种情况下，我会使用您的第一个选项。

然而，第二个选项的原因是您有时需要更多信息来构建您的对象。例如，这将是合法的并且可以正常运行：

```
Dim instance = New Lazy(Of SomeType)(Function() New SomeType("Foo")) 
```

请注意，这里我们为`SomeType`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T02:36:53.143

这个说法

```
Dim context As Lazy(Of DbContext) = New Lazy(Of DbContext)(Function() New DbContext()) 
```

在功能上等同于：

```
Dim context As New Lazy(Of DbContext)(Function() New DbContext()) 
```

所以我们要使用[Lazy 类](http://msdn.microsoft.com/en-us/library/dd642331.aspx)的这两个构造函数：

1.  [Lazy(Of T) 构造函数](http://msdn.microsoft.com/en-us/library/dd642259.aspx)
2.  [Lazy(Of T) 构造函数 (Func(Of T))](http://msdn.microsoft.com/en-us/library/dd642329.aspx)

根据 MSDN，对于（1）：

> 当发生延迟初始化时，使用目标类型的默认构造函数。

对于 (2)：

> 当发生延迟初始化时，使用指定的初始化函数。

因此，如果使用默认构造函数创建对象适合您，请选择 (1)，否则选择 (2)。请注意，您可以使用 T 的非默认构造函数，甚至可以使用父类型的构造函数，因此这也可以使用（`String`继承自`Object`）：

```
Dim obj As New Lazy(Of Object)(Function() "123") 
```

# multithreading - 节点线程是模拟循环的错误位置吗？

> ID：14595048
> 
> 赞同：1
> 
> 时间：2013-01-30T01:07:55.063
> 
> 标签：multithreading, node.js, asynchronous, simulation

假设有一个天气模拟器生成/计算组成的天气，每 0.5 秒触发一次 setInterval 并运行一堆计算以获取读数并处理数据以供人类阅读。

然后它会通过套接字触发相关数据到登录方，也许只有当数据实际发生变化时。

那么在子进程中单独运行天气模拟/生成器并将 I/O 保留在节点的单线程中会更好吗？

或者，这会产生锁定要求吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T01:25:19.080

我认为应该指导您的原则是关注点分离。您的 node.js 服务器是一个通信管道。您的天气模拟器就是这样。对其中一个所做的更改不太可能涉及另一个。如果以后您的天气模拟器变得更重，或者您开始​​获得比预期更多的用户，这也是一个更具可扩展性的选择。

如果 Web 客户端可以，我敢肯定他们会想要直接订阅天气事件源，但不要让这愚弄您认为您应该将 websocket 与模拟器混为一谈。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T01:21:08.370

如果计算量很大，我强烈建议您将它们作为子进程运行并保持 node.js 事件循环响应。如果您收听子标准输出的事件数据并完成，您可以在数据可用时立即发送数据。

确保你使用异步读写，这样你就不会开始阻塞，你不必担心锁。

# reporting-services - 行组的 Reporting Services 聚合函数

> ID：14595051
> 
> 赞同：-2
> 
> 时间：2013-01-30T01:08:13.237
> 
> 标签：reporting-services

我创建了一个报告，其中包含一个使用基于销售数据的数据集的“tablix”。销售数据按日期和UPC分组；附加到该数据集的是产品属性和库存数量，数据示例如下：

```
date     upc           qty_sold  style  color  size  on_hand_inventory
1/1/13   123456789111         5  abc    black  m                    50
1/1/13   123456789112         4  abc    black  l                    40
1/2/13   123456789111         2  abc    black  l                    40
1/2/13   123456789114         5  efg    red    m                    70
1/3/13   123456789115         4  efg    red    l                    20
1/1/13   123456789114         2  efg    red    m                    70 
```

我将产品属性（样式、颜色、尺寸）作为行组，将库存数量作为列。

行库存是正确的，但总数总是显示库存数量的许多倍数。这是因为，例如，abc-black-m 可能只出现一天，但 abc-black-l 可能出现很多天，因此组 abc-black 的库存数量总和所有 abc-black- l 行和单个 abc-black-m 行。

我需要正确的公式来合计行组的库存。如果 UPC 还没有被求和，它基本上只需要对 on_hand_inventory 列求和。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T18:26:02.630

我最终为库存使用了一个单独的数据集，并使用 LookupSet 函数来获取库存总数。

# objective-c - 重新分配全局 NSString 指针 - 使用 ARC

> ID：14595055
> 
> 赞同：1
> 
> 时间：2013-01-30T01:08:31.833
> 
> 标签：objective-c, automatic-ref-counting

```
NSString * str;  ///< Global string.

/// Some class method
-(void) foo:(NSString*) localStr
{
    str = [[NSString alloc] initWithString:localStr];
} 
```

我正在使用 ARC - 所以如果不是 nil，我无法手动释放 NSString* str。

我知道 ARC 在编译时运行，因此如果 foo 被调用两次，它不知道是否在分配 NSString 之前释放 NSString。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T01:14:03.830

使用 ARC，如果它指向一个没有其他引用的字符串并且你将它设置为一个新的字符串对象，**它将**自动解除分配。`str`当您设置新值时，您无需担心管理旧字符串。

ARC 代表 Automatic Reference Counting，它会在适当的时间（例如当您更改 的值时）为您调用`retain`和处理。事实上，您甚至不能再手动调用这些函数，但同样的事情正在“幕后”发生。`release``str`

顺便说一句，您说“如果不是 nil，我无法手动释放 NSString* str。”。使用 ARC 时解除分配对象的通常做法是将对其的所有引用设置为`nil`. 因此，在这种情况下，当您想要解除分配字符串（假设这`str`是您对它的唯一引用）时，您只需设置`str`为`nil`: `str = nil;`。但是请记住，正如我上面所说，您不需要为了设置`str`新值而执行此操作。ARC 足够聪明，可以同时兼顾两者。

另一边：您有以下代码行：

```
str = [[NSString alloc] initWithString:localStr]; 
```

如果您确实打算制作副本，则可以将其替换为：

```
str = [localStr copy]; 
```

它更短一些，更容易理解。更有可能的是，您不需要实际的副本，您可以只保留对现有字符串的引用，因此您可以使用：

```
str = localStr; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T01:23:58.960

如果您尝试仅创建尚未创建的字符串，则可以执行以下操作：

```
NSString * str = nil;  ///< Global string.

/// Some class method
-(void) foo:(NSString*) localStr
{
    if(!str)//only create if it is not already created
    {
        str = [[NSString alloc] initWithString:localStr];
    }
} 
```

如果您在分配新字符串之前尝试删除旧字符串，那么当您分配新字符串并离开函数范围时，它会神奇地发生。无需显式“释放”字符串。

如果您确实想告诉程序您不需要该字符串，则可以这样做：

```
str = nil; 
```

这将删除 str 指向字符串的强指针。除非您处于在范围内创建许多（或非常大）字符串的情况，否则您通常可以接受上述内容。但是，您可以查看 @autoreleasepool 块以强制释放内存。

# javascript - 简单登录脚本的分配左侧无效

> ID：14595062
> 
> 赞同：0
> 
> 时间：2013-01-30T01:09:10.480
> 
> 标签：javascript

我必须为 js 类构建一个简单的登录脚本。

我无法让循​​环工作。每次我输入任何信息时，它都会给我“分配中的左侧无效”

单击登录按钮时，getData 函数获取框的值，然后将它们传递给检查数组的登录函数。这就是脚本停止的地方。如果我将 if 语句中的 = 更改为 == ，它将接受数组的最后一次有效登录，但不接受其他登录。

我究竟做错了什么？

```
<script type="text/javascript">
var userLogins = [{user:"user1", password:"pass1"},{user:"user2", password:"pass2"},{user:"user3", password:"pass3"}]
var success = null;
function logon(user, pass) {
    userok = false;
    for (i = 0; i < userLogins.length; i++)
    { 
        if(pass = userLogins[i].password && user = userLogins[i].user )
        {
            success = true;
        }
        else
        {
            success = false;
        }
    }
    secret(success);
}

function getData() {
    var user = document.getElementById("userid").value;
    var password = document.getElementById("password").value;
    logon(user, password);
}

function secret(auth){
    if(auth)
    {
        show('success');
        hide('login');
    }
    else
    {
        show('error');
        hide('login');
    }
}

function show(show) {
    document.getElementById(show).className = "show";
}
function hide(hide) {
    document.getElementById(hide).className = "hide";
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T01:11:59.453

> 如果我将 if 语句中的 = 更改为 == ，它将接受数组的最后一次有效登录，但不接受其他登录。

`=`是[赋值运算符](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Assignment_Operators)

`==`是[相等运算符](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Comparison_Operators)

你混淆了两者。你想要后者。否则，您分配结果的值会返回值本身（通常是*真*值）。

根据评论，还有*严格的相等运算符*。`==`因为和`===` [这个答案](https://stackoverflow.com/questions/359494/javascript-vs-does-it-matter-which-equal-operator-i-use)之间的区别会让你大吃一惊。

# php - 大型对象的 IIS 7 和 PHP 响应超时

> ID：14595065
> 
> 赞同：0
> 
> 时间：2013-01-30T01:09:50.057
> 
> 标签：php, iis, iis-7, windows-server-2008, fastcgi

我和我的同事已经被这个问题难住了好几个星期。我们在 IIS 7 环境中托管了一个 PHP 5.3 Web 应用程序。应用程序从 SQL Server 2012 数据库后端获取结果集并将其作为 JSON 对象发送回客户端。

当发出的请求导致对象大小超过约 4MB 时，就会出现问题。因此，每次响应超过此大小时，连接都会重置并导致错误。我已经通过使用 Curl 和这个非常有用[的 .JQ JSON command-line parser](http://stedolan.github.com/jq/)在本地服务器上确认了这一点。使用这些工具，当我在托管应用程序的 IIS Web 服务器上运行请求时，它成功完成响应 < 4MB，但无法完成响应 > 4MB 并出现 Curl(56) 错误*"Connection was reset"*。

一些附加说明：

*   直接针对数据库运行的查询只需大约 20 秒即可完成，因此数据库性能不是问题。

*   我们在本地桌面开发环境中的 Apache 之上运行 Zend Framework；但这个问题在其中任何一个中都无法重现。在 Web 服务器上失败的相同 > 4MB 响应对象在向我们的本地 Apache 托管环境发出相同请求时成功完成。

我梳理了 Web 服务器的 IIS 7 配置设置并进行了以下更改

*   我已将允许的最大内容长度和 URL 长度从默认值增加到 30MB。
*   PHP、FastCGI 和 IIS 连接超时设置分别设置为 5 分钟。我已经运行了最多需要一分钟才能完成的较小查询，但只要它小于 4MB，就会始终返回有效响应。

我开始读到 IIS 7 的响应缓冲区缓存机制也可能会影响 PHP 应用程序的性能，但我仍然对这个特性很熟悉。如果有人过去遇到过类似的问题，或者可以提供一些关于问题可能是什么的见解，我是开放的。在这一点上，我不确定还有什么可能导致 IIS 7 Web 服务器上出现此问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T00:00:00.367

你使用[Zend_Json](http://framework.zend.com/manual/1.12/en/zend.json.html)还是 PHP 内置的[json_encode](http://php.net/manual/en/function.json-encode.php)函数进行编码？检查 php.ini 中的 PHP memory_limit 设置。

还要检查 PHP 错误报告和错误日志设置（php.ini 中的 error_reporting 和 error_log 指令）。

我猜 PHP 会输出一些东西或安静地终止脚本执行，而不是重置 HTTP 连接。

查看 Web 服务器上的日志以了解更多详细信息：

*   事件查看器 > Windows 日志 > 应用程序 / 系统 > 查看 PHP FastCGI 工作进程是否崩溃

*   IIS 日志文件 > 确定失败 HTTP 请求的响应代码和状态

*   使用 IIS 中的“失败请求跟踪规则”获取失败请求的更多详细信息

*   最后，使用进程监视器 (ProcMon)，过滤它以仅显示应用程序池 (w3wp.exe) 和 PHP/FastCGI 进程，以检查给定时刻的 PHP 和 IIS 活动

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-06-02T19:11:43.463

我有类似的问题，卷曲请求需要超过 10 分钟，并出现以下错误

**卷曲错误：SSL 读取：错误：00000000:lib(0):func(0):reason(0)，errno 10054**

根本原因是默认情况下，如果请求的服务器没有响应，curl 会在 5 分钟后终止请求。我尝试使用 CURLOPT_TIMEOUT => 3600 增加执行时间，但由于某种原因 curl 忽略了此设置。

解决方案：对我有用的是在 curl 选项中设置保持活动标志以及超时标志**CURLOPT_TCP_KEEPALIVE => 1**。

# macos - 调整所有正在运行的应用程序的所有窗口的大小

> ID：14595066
> 
> 赞同：4
> 
> 时间：2013-01-30T01:09:55.157
> 
> 标签：macos, resize, window, applescript

我正在尝试编写一个 applescript 脚本，它允许我在选择时调整所有正在运行的应用程序的所有窗口的大小（我目前使用[Stay](http://cordlessdog.com/stay/)，但发现它有时会出现故障，所以我想“重新发明”它）
我一直在关注一些applescripting教程，并提出了以下代码来做到这一点，但它有问题：

```
tell application "Finder"
    set rect to bounds of window of desktop
end tell

property excludedApplicationNames : {"Finder"}
tell application "System Events"
    say "a"
    repeat with theProcess in processes
        say "b"
        if background only of theProcess is false then
            say "c"
            set theProcessName to name of theProcess as string
            if theProcessName is not in excludedApplicationNames then
                say theProcessName
                tell application theProcess
                    set bounds of windows of process theProcess to rect
                end tell
            end if
        end if
    end repeat
end tell
say "done" 
```

问题是当这段代码遇到我唯一的终端窗口（有几个打开的选项卡）时，它会出错：`System Events got an error: Can’t set application (item 2 of every process) to {0, 0, 1280, 900}.System Events got an error: Can’t set application (item 2 of every process) to {0, 0, 1280, 900}.`

更改`tell application theProcess`为`tell application theProcessName`没有帮助（同样的错误），也没有将其更改为`tell application "System Events"`（错误`System Events got an error: Can’t make item 2 of every process into type integer.`：）

有趣的是，这按预期工作：

```
tell application "Finder"
    set rect to bounds of window of desktop
end tell

tell application "Terminal"
    repeat with theWindow in windows
        set bounds of theWindow to rect
    end repeat
end tell 
```

所以我很困惑。
我究竟做错了什么？我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T08:12:48.560

```
tell application "Finder"
    set {0, 0, dtw, dth} to bounds of window of desktop
end tell
tell application "System Events"
    repeat with p in (processes where background only is false)
        tell p
            if name is not in {"Finder"} then
                set position of windows to {0, 0}
                set size of windows to {dtw, dth}
            end if
        end tell
    end repeat
end tell 
```

*   在我的 Mac 上花了大约 3 秒
*   最大化终端窗口以填满屏幕（Dock 占用的 4px 区域除外）

```
tell application "Finder"
    set dtb to bounds of window of desktop
end tell
tell application "System Events"
    bundle identifier of processes where background only is false
end tell
repeat with bid in result
    tell application id bid
        try
            if name is not in {"Finder"} then
                set (bounds of windows where visible is true) to dtb
            end if
        end try
    end tell
end repeat 
```

*   在我的 Mac 上花了大约 0.3 秒
*   不适用于 Preview 或 Reeder 等所有应用程序
*   使用捆绑标识符，因为一些应用程序具有不同的进程和应用程序名称
*   调整终端窗口的大小，使其上方和下方有几个像素的空白空间

我使用这个脚本来最大化窗口：

```
try
    tell application "Finder" to set dtb to bounds of window of desktop
    tell application (path to frontmost application as text)
        if name is in {"Terminal"} then
            error
        else
            set bounds of window 1 to dtb
        end if
    end tell
on error
    tell application "System Events" to tell (process 1 where it is frontmost)
        try
            click (button 1 of window 1 where subrole is "AXZoomButton")
        end try
    end tell
end try 
```

在许多没有基本 AppleScript 支持的应用程序中，缩放按钮还可以最大化窗口以填满屏幕。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-24T06:34:04.943

这个考虑了扩展坞的大小。我在显示器的右侧有我的，但它应该很容易修改以适应底部的扩展坞。

```
tell application "Finder"
    set dtb to bounds of window of desktop
end tell

tell application "System Events" to tell process "Dock"
    set dockDimentions to size in list 1
    set dockWidth to item 1 of dockDimentions
end tell

tell application "System Events"
    bundle identifier of processes where background only is false
end tell

repeat with bid in result
    tell application id bid
        try
            if name is not in {"Finder", "System Preferences", "Notepad", "Terminal", "Activity Monitor"} then
                set x to item 1 of dtb
                set y to item 2 of dtb
                set w to (item 3 of dtb) - dockWidth
                set h to item 4 of dtb
                set (bounds of windows) to {x, y, w, h}
            end if
        end try
    end tell
end repeat 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T20:44:05.797

这最终对我有用：

```
property blacklist : {"Finder", "Preview", "Console", "AppleScript Editor", "Spotify", "TaskCoach"}
property buttonApps : {"LyX", "Eclipse"}
property buttonMaps : {{name:"LyX", Button:1, pname:"lyx"}, {name:"Eclipse", Button:2, pname:"eclipse"}}

tell application "Finder" to set theBounds to bounds of window of desktop

tell application "System Events"
    set bids to bundle identifier of processes where background only is false
end tell

repeat with bid in bids
    tell application id bid
        if name is not in blacklist then
            set appName to name as string
            if name is "Terminal" then
                set newBounds to {0, 0, (item 3 of theBounds) - 10, item 4 of theBounds}
                repeat with theWindow in windows
                    if visible of theWindow is true then
                        say appName
                        set bounds of theWindow to newBounds
                    end if
                end repeat
            else if name is not in buttonApps then
                repeat with theWindow in windows
                    if visible of theWindow is true then
                        set bounds of theWindow to theBounds
                    end if
                end repeat
            else if name is in buttonApps then
                -- get the buttonNumber
                repeat with buttonApp in buttonMaps
                    if (name of buttonApp as string) is appName then
                        set theButton to Button of buttonApp
                    end if
                end repeat
                tell application "System Events"
                    repeat with theProcess in (processes where bundle identifier is bid)
                        try
                            tell theProcess to tell window 1 to click button theButton
                        end try
                    end repeat
                end tell
            end if
        end if
    end tell
end repeat 
```

请注意，“Spotify”和“Task Coach”被列入黑名单，因为我无法通过以下方式调整它们的大小：

1.  设置窗口边界
2.  点击绿色按钮
3.  单击菜单栏中的“窗口”>“缩放”
4.  使用`⌘</kbd>`F10` shortcut that I had mapped it to.`

如果有人能够提出更好的解决方案，我会全力以赴

# c++ - 将整数或双精度数相加时的 C++ 奇怪输出

> ID：14595068
> 
> 赞同：0
> 
> 时间：2013-01-30T01:10:05.703
> 
> 标签：c++, variables, integer, double

我在 C++ 中将数字类型相加时遇到问题，无法弄清楚为什么会发生这种情况，我希望当我一起输入 3 个保龄球得分时，我会得到 9 或 9.00，而不是像 3.31748e+258 这样疯狂的东西，我在做什么错误的？任何帮助都会大有帮助，谢谢！

```
#include<iostream>
#include<cmath>
#include <iomanip>
#include <cstdio>   
#include <cstdlib>

using namespace std;

int main()
{
/*Coordinate variables*/
double bowlTotal;
double bowlScore;  
const int FIVE_PLAYERS = 5;

for( int players = 0; players < FIVE_PLAYERS ; players++ )
{
    cout << "Player " << players + 1 << endl << endl;

    for( int games = 0; games < 3; games++ )
    {

     double score;
     score = 0;

     cout << "Please enter score for game #" << games + 1<< ": ";
     cin >> score;
     cout << endl;

     bowlTotal += score;
    } 

     cout << endl << endl <<"The final score for player #"<< players + 1 << " = " << bowlTotal << endl << endl;
     bowlScore += bowlTotal;
}
cout << endl << endl <<"The final team score = " << bowlScore << endl << endl;

system("PAUSE");
return 0;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T01:12:27.630

您需要在使用它们之前将变量初始化为 0，如下所示。

```
double bowlTotal = 0.0;
double bowlScore = 0.0; 
```

通常编译器不会为您执行此操作，并且变量将**填充有效的垃圾值**，您可以将分数添加到这些值中。

正如 GManNickG 简洁地说的那样，[**读取未初始化的变量是未定义的行为**](https://stackoverflow.com/questions/11962457/why-is-using-an-uninitialized-variable-undefined-behavior-in-c)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T01:13:47.197

您没有初始化 bowlTotal 或 bowlScore，所以它们包含垃圾。

# php - 包含类中的所有目录文件

> ID：14595072
> 
> 赞同：0
> 
> 时间：2013-01-30T01:10:31.467
> 
> 标签：php, class, include

我有一个这样的 php 文件

```
class Config {

   public static $__routes = array(

       "Home"                    => "index.php",
       "Support"                 => "support.php",

   );

}

Config::__routes += (include 'config/example1.php');
Config::__routes += (include 'config/example2.php'); 
```

我可以包含一个目录吗

例如：

```
include('include 'config/example1.php');
include('include 'config/example2.php'); 
```

将是这样的：

```
include('config/*'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T01:25:55.663

您可以使用`glob`尝试：

```
foreach (glob('config/*.php') as $file)
    include( $file ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T01:18:36.147

此代码将包含给定文件夹中的所有 .php 文件。

```
<?php

if ($handle = opendir('/path/to/includes/folder')) {
    while (false !== ($entry = readdir($handle))) {
        $path_parts = pathinfo($entry);
    if ($path_parts['extension'] == '.php') include $entry;
    }
    closedir($handle);
}
?> 
```

解释：opendir 将打开给定的文件夹并返回文件夹的句柄。while 循环将遍历该文件夹中的所有文件。

pathinfo 将创建一个包含文件信息的数组，其中之一是文件的扩展名。

然后我们将找到的文件的扩展名与 .php 进行比较，如果是 php 文件，我们将其包含在内。然后我们关闭打开的文件夹的句柄。

# apache - Htaccess 传递整个 URL？

> ID：14595073
> 
> 赞同：0
> 
> 时间：2013-01-30T01:10:39.820
> 
> 标签：apache, .htaccess, mod-rewrite, redirect, url-rewriting

如何将整个传入的任何可能的 URL 作为变量传递到另一个站点？

例如：'www.old.com' --> 'www.new.com?url=www.old.com'

'www.old.com/subdir/sub/welcome.html' --> 'www.new.com?url=www.old.com/subdir/sub/welcome.html'

'subdomain.old.com/sss.php' --> 'www.new.com?url=subdomain.old.com/sss.php'

甚至可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T02:40:49.290

你可以试试这个：

```
RewriteEngine On
RewriteBase /
RewriteCond %{HTTP_HOST}  ^(www\.)?old\.com  [NC]
RewriteRule .*   http://new.com?url=%{HTTP_HOST}%{REQUEST_URI}  [L] 
```

将任何请求静默映射到

`http://old.com/Anything`或者`http://www.old.com/Anything`

至：

`http://new.com?url=RequestedURL``RequestedURL`整个请求的 URL在哪里。

例子：

`http://www.old.com/subdir/sub/welcome.html?this=is&a=query`

将被静默重定向到：

`http://www.new.com?url=www.old.com/subdir/sub/welcome.html?this=is&a=query`

根据问题，没有触发重定向的条件或模式：所有请求都`old.com`将被重定向。

对于永久且可见的重定向，请将 [L] 替换为 [R=301,L]

# javascript - 画布不显示在移动设备上

> ID：14595084
> 
> 赞同：4
> 
> 时间：2013-01-30T01:12:52.630
> 
> 标签：javascript, android, ios, html, canvas

HTML5 画布（仅使用 drawImage 函数）未显示在移动设备上，但在我的笔记本电脑上。

你可以在这里看到：[mmhudson.com/index.html](http://mmhudson.com/index.html)（重新加载一次）

我没有收到任何错误或任何错误，但它不会显示在 iOS 上的 chrome 或 android 上的默认浏览器中。

编辑：

仅当文档中包含以下元标记时才会出现此问题：

```
<meta name="viewport" content="width=device-width, initial-scale=1"></meta> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T15:34:26.773

您的`init()`函数由 调用`imgLoad()`，但仅当窗口宽度大于或等于 480 像素时才加载图像：

```
 window.onload = function(){
            s.dL = true;
            s.width = window.innerWidth;
            s.height = window.innerHeight;

            if(s.width < 320){
                //too small
            }
            else if(s.width >= 320 && s.width < 480){
                s.scWidth = 296;

            }
            else{
                s.scWidth = 456;
                b_border.src = "res/480/b_border.png";
                r_border.src = "res/480/r_border.png";
                l_border.src = "res/480/l_border.png";
                t_border.src = "res/480/t_border.png";
                br_corner.src = "res/480/br_corner.png";
                tr_corner.src = "res/480/tr_corner.png";
                bl_corner.src = "res/480/bl_corner.png";
                tl_corner.src = "res/480/tl_corner.png";
                h_wall.src = "res/480/h_wall.png";
                v_wall.src = "res/480/v_wall.png";
                box.src = "res/480/box.png";
                crosshair.src = "res/480/crosshair.png";
                player1.src = "res/480/player1.png";
                player2.src = "res/480/player2.png";
            }
        } 
```

当您省略元视口标签时，浏览器假定页面/窗口宽度为 980 像素，因此您的代码可以正常运行。

当您使用 包含元视口标签时`width=device-width`，浏览器会将页面/窗口宽度设置为屏幕宽度（例如 iPhone 上的 320 像素），因此`imgLoad()`永远`init()`不会被调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T09:47:50.847

看起来您正在尝试在图像加载之前绘制图像。我不确定为什么移动浏览器会更频繁地失败，可能它们加载它们的速度较慢？

实际上，当我在桌面上打开您的页面时，有时画布不会绘制，但如果我打开控制台并输入`draw()`它就会出现（因为那时图像已经加载）。

如果您只处理单个图像，则简化代码将是：

```
var img = new Image();

img.onload = function(){ 

    // drawing code goes here

}

img.src = 'myfile.png'; 
```

但是由于您在这里拥有大量图像，我会研究某种资源加载库。

# regex - NFA 到 RE Kleene 定理

> ID：14595085
> 
> 赞同：2
> 
> 时间：2013-01-30T01:13:10.840
> 
> 标签：regex, finite-automata, computation-theory, nfa

这是我的 NFA：

![NFA](../Images/4d6a07d5344db9080f84666523cb1ea2.png)

这是我的尝试。

*   创建新的开始和最终节点
*   接下来从左边消除第二个节点，这给了我 ab
*   接下来从右边消除第二个节点，它给了我 ab*a
*   接下来从左边消除第二个节点，它给了我 abb*b
*   接下来从右边消除第二个节点，它给了我 b+ab*a

这导致 abb *b (b+ab* a)*

这是正确的答案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T15:27:48.433

不，你不正确:(

[你不需要创建开始状态。带`-`符号的第一个状态是开始状态。也`a,b`标签意味着`a`或`b`但不是`ab`]

[有一个叫做[Arden's theoram](http://books.google.co.in/books?id=MKeF4o5o5JAC&pg=PA129&lpg=PA129&dq=Arden%27s%20theorem&source=bl&ots=Vw6_elgkxM&sig=_crZR56Yk7R1MGGKI30tp_HfeLA&hl=en&sa=X&ei=49cLUaG1BsforAejoYDgCQ&ved=0CEEQ6AEwAw#v=onepage&q=Arden%27s%20theorem&f=false)的定理，将有助于将 NFA 转换为 RE]

**这个 NFA 的正则表达式是什么？**

在您`NFA`中，DFA 的初始部分：

**步骤1：**

```
(-) --a,b-->(1) 
```

表示 (a+b)

**step-2：**接下来从 stat 1 到 2，*注意*state 2 正在接受 state final（有`+`符号）。

```
(1) --b--->(2+) 
```

所以你需要 `(a+b)b`达到最终状态。

**step-3：**一个你处于最终状态`2`，任意数量的`b`被接受（任意数量表示一个或多个）。这是因为`2`带有标签的状态自循环`b`。

因此，`b*`在状态 2 上接受。

**第4步：**

实际上有两个循环`state-2`。

*   `b`一个是我在**step-3**中描述的带有标签的自循环。它的表达式是`b*`
*   状态 2 上的第二个循环是通过状态 3。
    state-2 上第二个循环的表达式`aa*b`
    **为什么是表达式`aa*b`？**

    因为：

    ```
     a-  
              ||               ====>  aa*b
              ▼|   
    (2+)--a-->(3) --b-->(2+) 
    ```

因此，在第 3 步和第 4 步中，由于状态 2 运行的循环可以通过`b`标记**或**通过`aa*b`===> 循环返回`(b + aa*b)*`

所以你的 NFA 的正则表达式是：

`(a+b)` `b` `(b + aa*b)*`

# iphone - iPhone时间戳（NSDate）相对于全球时钟的准确性？

> ID：14595087
> 
> 赞同：1
> 
> 时间：2013-01-30T01:13:23.687
> 
> 标签：iphone, ios, nsdate

我们使用 NTP 使我们的后端服务器保持同步，但不确定在前端（使用 NSDate）上检索到的时间戳有多同步。如果您有此问题的经验，可以发表评论吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T13:08:05.173

以我的经验，虽然通常它可能相当接近，但有时它可能会出现几秒钟的不准确，并且偏移量甚至会在几个小时内发生变化。

此外，它同步到的塔时间可以关闭，我已经看到了 15 秒、60 秒（几个月）和一次：当不应该应用夏令时时应用了 1 小时。一旦它没有与塔同步，它就会每天漂移 10 秒，并且在“关闭”时更糟。

# ios - 在 UIImageView iOS 后面添加 CAGradient 层

> ID：14595092
> 
> 赞同：0
> 
> 时间：2013-01-30T01:13:50.463
> 
> 标签：ios, core-graphics, mapkit, mkannotationview, cagradientlayer

我正在尝试在透明图像后面添加渐变。我在地图 leftCallOutAccessoryView 上执行此操作，但是无论我尝试什么，渐变层总是显示在 imageView 上方并希望它出现在它后面

这是我的 MKAnnotationView 代码，它是一个名为 pinView 的 ivar

```
pinView.rightCalloutAccessoryView = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];

UIImageView *profileIconView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"Profile.png"]];
pinView.leftCalloutAccessoryView = profileIconView;

CAGradientLayer *backgroundLayer = [CAGradientLayer layer];
backgroundLayer.frame = CGRectMake(0, 0, 30, 30);
backgroundLayer.cornerRadius = 2;
backgroundLayer.borderWidth = 1;
backgroundLayer.borderColor = [UIColor whiteColor].CGColor;
backgroundLayer.colors = [NSArray arrayWithObjects:(id)[[sharedManager cellGradientEnd] CGColor], (id)[[sharedManager cellGradientStart] CGColor], nil];
[profileIconView.layer insertSublayer:backgroundLayer atIndex:0]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T01:38:27.247

我设法使用下面的方法弄清楚了，简而言之，我创建了一个空视图，然后将 imageView 作为子视图添加到视图中，现在一切都很好！：

```
UIView *view = [[UIView alloc]initWithFrame:CGRectMake(0, 0, 30, 30)];
UIImageView *profileIconView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"Profile.png"]];
pinView.leftCalloutAccessoryView = view;

CAGradientLayer *backgroundLayer = [CAGradientLayer layer];
backgroundLayer.frame = view.bounds;
backgroundLayer.cornerRadius = 2;
backgroundLayer.borderWidth = 1;
backgroundLayer.borderColor = [UIColor whiteColor].CGColor;
backgroundLayer.colors = [NSArray arrayWithObjects:(id)[[sharedManager cellGradientEnd] CGColor], (id)[[sharedManager cellGradientStart] CGColor], nil];
[pinView.leftCalloutAccessoryView.layer insertSublayer:backgroundLayer atIndex:0];
[view addSubview:profileIconView]; 
```

# java - 如何将所有包从一个 Web 应用程序迁移到 Eclipse 中的新 Web 应用程序项目？

> ID：14595097
> 
> 赞同：1
> 
> 时间：2013-01-30T01:14:22.563
> 
> 标签：java, eclipse, packages

嗨，我在eclipse的一个项目中有很多包，类和接口，我想将所有这些移动或迁移到另一个项目，然后我需要根据新项目更改包的名称，有什么快捷方式在eclipse中做到这一点？或者只是我需要一个一个地创建所有的包和类（复制粘贴），对此有什么帮助吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T01:33:53.337

用于迁移

1.  右键单击您的包资源管理器并选择`Import`
2.  从弹出选择`File System`（在 下可用`General`）
3.  选择要导入它们的源目录和目标目录。

![在此处输入图像描述](../Images/057d6775f14d2e91bfeb9f9b0945d816.png)

**更新：** 选择包名，然后使用 Refactor -> Rename (Shift+Alt+R) 打开 Rename Package 对话框

[如何在 Eclipse 中更改包名](http://www.ehow.com/how_7836343_change-package-name-eclipse.html)

# ios - 当应用程序在后台时，目标 c cancelAllLocalNotifications 不起作用

> ID：14595098
> 
> 赞同：4
> 
> 时间：2013-01-30T01:14:26.443
> 
> 标签：ios, objective-c, push-notification

[[UIApplication sharedApplication] cancelAllLocalNotifications];

适用于所有情况，除了当应用程序在后台运行然后由用户单击通知启动时，应用程序启动，通知显示，但清除不起作用！

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
NSDictionary *notificationPayload = [launchOptions objectForKey:UIApplicationLaunchOptionsRemoteNotificationKey];
    if(notificationPayload) {
        [self application:application didReceiveRemoteNotification:notificationPayload];
    }
}

- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo
{
    if([[userInfo valueForKey:@"aps"] valueForKey:@"alert"] != nil) {
        NSString *message = [[userInfo valueForKey:@"aps"] valueForKey:@"alert"];
        if(message != nil) {
            UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"Usage Alert"
            message:message  delegate:self cancelButtonTitle:@"Cancel" otherButtonTitles:@"Ok", nil];
            [alertView show];
            [[UIApplication sharedApplication] setApplicationIconBadgeNumber: 0];
            [[UIApplication sharedApplication] cancelAllLocalNotifications];
        }
    }

} 
```

# java - 是否可以从数组中更改变量值

> ID：14595100
> 
> 赞同：2
> 
> 时间：2013-01-30T01:14:44.623
> 
> 标签：java, arrays, gwt, variables, immutability

这对我来说是一个有点令人困惑的问题，但我会尽力而为。

所以：

```
ArrayList<Object> fieldList = new ArrayList<Object>(); 
```

然后我将很多不同的变量转储到这个数组中：

```
fieldList.add(objectsURL);   //string 

 fieldList.add(X);  //int 

 fieldList.add(Y); //int 

 ... 
```

如果我改变变量，数组中的值也会改变——确认数组存储的是对内存的引用，而不是值本身。

但是，如果我然后从数组中检索数据然后设置...

```
Object object = ((String)this.fieldList.get(0)); 
```

然后设置对象

```
object = "meeep!" 
```

objectsURL 未设置为“meep！” 而是保留其原始价值。

我认为这是因为“对象”不再引用原始变量，而是指向内存中新的不可变字符串。

我认为所有预期的 Java 行为....但是，我将如何设置实际的原始变量？这在java中可能吗？

所以，换句话说。如果只能访问“fieldList”，是否可以更改“objectsURL”的值？

因此，如果：

```
String objectsURL = "www.google.com"
fieldList.add(objectsURL); 
```

有没有办法仅使用来自 fieldList 的引用将 objectsURL 设置为“www.stackoverflow.com”？我不想改变 fieldList 包含“objectsURL”的事实，我想改变变量“objectsURL”实际包含的字符串。

* * *

如果没有，是否有替代方法来实现相同的目标？

我希望我的问题能很好地解释这个问题。

我的用例是尝试为我的一堆对象创建一个序列化/反序列化系统。我希望将所有字段放入一个数组列表中，我可以检索以进行读取和写入....从而避免对 field[0]=blah 和 blah=field[0] 的长列表进行硬编码，然后继续每次我在另一个之前添加一个新字段时都需要重新编号。

（我不能使用 Java 的内置序列化，因为我使用的是 GWT，这只是客户端。）

谢谢，

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T01:19:04.203

> 我认为这是因为“对象”不再引用原始变量，而是指向内存中新的不可变字符串。

正确，每次`=`在对象上使用赋值运算符时，**都会更改它所引用的对象，而不是对象本身**。

要更改列表中的值，请使用[ArrayList 的 .set 方法](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html#set%28int,%20E%29)

`this.fieldList.set(0, newValue);`

**由于您的变量是字符串，因此您无法通过列表更改字符串变量**

您的替代方案：

*   使用字符数组

    ```
    List myList = new ArrayList();
    char[] charArray = "My String".toCharArray();
    myList.add(charArray);
    charArray[0] = 'A';
    String theString = new String(myList.get(0)); // "Ay String"
    ```

如果使用 char 数组，请确保数组的长度足以包含您将来想要拥有的字符数，因为要更改数组的长度，您需要创建一个新数组（数组列表可以动态扩展，数组不能）

*   将字符串嵌入到您自己的类中（我在这里忽略了 getter 和 setter）

    ```
    class MyString {
        public String value;
        public MyString(String value) {
            this.value = value;
        }
    }
    MyString myStr = new MyString("some value");
    list.add(myStr);
    ((MyString) list.get(0)).value = "a new value";
    System.out.println(myStr.value); // will print "a new value"
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T00:35:50.490

`String`s 是不可变的，因此不可能更改`String`对象的内容。此外，您不能使用列表来更改引用变量`objectsURL`指向的对象。要实现您想要的，您需要创建一个具有`String`成员的自定义类。然后，您可以将此类的实例存储在 a 中，并通过列表中的引用将引用`List`更改为。`String`然后，这些更改将反映在引用列表中对象的任何其他引用变量中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T01:22:54.900

首先，您声明一个变量“对象”并从 ArrayList 中分配一些对象。稍后您分配一些其他对象“meeep！” 到这个变量。您的“对象”变量没有理由与 ArrayList 相关。

# jquery - jQuery 1.9 向后兼容性问题？

> ID：14595108
> 
> 赞同：2
> 
> 时间：2013-01-30T01:15:42.990
> 
> 标签：jquery, jquery-plugins, backwards-compatibility, jquery-1.6, jquery-1.9

我正在尝试在我的网站上使用一个使用 jQuery 1.6.2 的 jQuery 插件。当我将 jQuery 版本更改为 1.9 时，插件不再工作。我认为 jQuery 中有一个向后兼容的特性。有没有办法知道/修复在 1.9 中不起作用的代码？如果它有帮助，我正在尝试使用一个名为 CropZoom 的插件，[这是链接。](http://www.cropzoom.com.ar/demo/)另外，让我知道是否有类似的插件具有相同的功能。我会很感激的。谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T01:24:04.533

**这是 jQuery 如何告诉你修复它的：**

我们意识到现有的站点和插件可能会受到这些更改的影响，并且正在为过渡升级路径提供 jQuery Migrate 插件。下面的个别描述表明是否可以使用 jQuery Migrate 插件恢复 1.9 中更改的行为。请注意，jQuery 1.9 中的所有更改也将适用于 jQuery 2.0，并且 jQuery Migrate 插件也将在那里可用。

jQuery Migrate 插件的未压缩开发版本包括控制台日志输出，用于在使用特定已弃用和/或删除的功能时发出警告。这使得它作为一种迁移调试工具很有价值，用于查找和修复现有 jQuery 代码和插件中的问题。它可以用于 jQuery 核心版本的诊断，一直到 1.6.4。

该插件的压缩版本不会生成任何日志输出，并且可以在需要 jQuery 1.9 或更高版本但还必须使用旧的不兼容 jQuery 代码或插件时在生产站点上使用。理想情况下，这只会用作短期解决方案，但这是由您做出的决定。

[链接在这里](https://github.com/jquery/jquery-migrate/)

**其他选项**

*   与插件开发人员核实插件是否已升级
*   查找具有相同或相近功能的更新版本的插件
*   通过用相关的替换代码替换折旧的代码，自己更新插件代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-02T08:59:26.007

当您使用 jquery-1.9.1 时，应添加 jquery-migrate-1.1.1.min.js 以兼容以前的版本，如下所示

```
<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
<script src="http://code.jquery.com/jquery-migrate-1.1.1.min.js"></script> 
```

# ios - 解读 iOS 崩溃报告

> ID：14595109
> 
> 赞同：4
> 
> 时间：2013-01-30T01:15:48.090
> 
> 标签：ios, objective-c

我遇到了多次崩溃，似乎原生 iOS 方法正在调用第三方库中的函数。这是一个例子：

```
Thread: Unknown Name (Crashed)
0     libsystem_kernel.dylib                0x33222350 __pthread_kill + 8 + 8
1     libsystem_c.dylib                     0x3500f973 abort + 95 + 94
2     libsystem_c.dylib                     0x34ff04d1 basename + 1
3     FireChat                              0x00036489 -[OTOverlayButton drawRect:] + 1
4     Foundation                            0x37a4a5a9 -[NSDictionary(NSKeyValueCoding) valueForKey:] + 33 + 32
5     FireChat                              0x709d -[NetworkModel getUserForUid:] (NetworkModel.m:150)
6     FireChat                              0x0001c42f -[OpenTokController session:didReceiveStream:] (OpenTokController.m:258)
7     libdispatch.dylib                     0x32da011f _dispatch_call_block_and_release + 11 + 10
8     libdispatch.dylib                     0x32d9f4b7 _dispatch_client_callout + 23 + 22
9     libdispatch.dylib                     0x32da41bd _dispatch_main_queue_callback_4CF$VARIANT$mp + 225 + 224
10   CoreFoundation                         0x37dbbf3b __CFRunLoopRun + 1291 + 1290
11   CoreFoundation                         0x37d2eebd CFRunLoopRunSpecific + 357 + 356
12   CoreFoundation                         0x37d2ed49 CFRunLoopRunInMode + 105 + 104
13   GraphicsServices                       0x358e22eb GSEventRunModal + 75 + 74
14   UIKit                                  0x3a1b42f9 UIApplicationMain + 1121 + 1120
15   FireChat                               0x43b3 main (main.m:8) 
```

对我来说，该`[NSDictionary valueForKey:]`方法似乎正在调用`[OTOverlayButton drawRect:]`来自第三方库的方法。这应该是不可能的——我读错了崩溃报告吗？

`[OTOverlayButton drawRect:]`在我的代码中的任何地方都没有调用。请注意，字典包含（我的）对象，其中包含指向第三方库对象的指针。

图书馆供应商和我都很困惑。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T00:17:17.293

我相信这次崩溃的原因是调用`performSelector:`返回结构的方法导致的内存损坏。有关更多详细信息，请参阅此博客文章：

[为什么 performSelector 比我想象的更危险](http://tomdalling.com/blog/cocoa/why-performselector-is-more-dangerous-than-i-thought/)

# android - Android ListView 突出显示会导致奇怪的行为

> ID：14595111
> 
> 赞同：2
> 
> 时间：2013-01-30T01:16:39.270
> 
> 标签：android, listview, view, highlighting

我试图让 ListView 在选择每个项目后显示多个亮点，但我从视图中得到奇怪的行为。如果单击第一项，它会突出显示（单击弹出窗口上的 OK 按钮后）。但是，如果您单击第二项，则最后一项也会突出显示。这是显示 renderer.setBackgroundResource 仅被调用适当次数的日志。

```
01-30 00:54:07.957: I/HighlightActivity(343): ListView.onItemClick: selected = 0

01-30 00:54:09.757: I/HighlightActivity(343): FINISHED_WORDS[0].equals(set)

01-30 00:54:11.387: I/HighlightActivity(343): ListView.onItemClick: selected = 1

01-30 00:54:12.757: I/HighlightActivity(343): FINISHED_WORDS[0].equals(set)

01-30 00:54:12.776: I/HighlightActivity(343): FINISHED_WORDS[1].equals(set) 
```

如果您尝试不同的选择顺序，就会发生各种奇怪的行为。我不确定这是否是最好的方法，或者问题是什么。（使用 Android 2.3.3 API 10）

谢谢你的帮助，

库尔乔德。

这是活动：

```
public class HighlightActivity extends ListActivity 
{
private static final String DEBUG_TAG = "HighlightActivity";
final Context context = this;
private String[] FINISHED_WORDS = {"","","","","",""};
private String[] WORDS = {"one","two","three","four","five","six"};
int selected;   
@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    this.setListAdapter(new ArrayAdapter<String>(this, R.layout.activity_highlight, 
                    R.id.highlight_layout, WORDS)
    {
        @Override
        public View getView(int position, View convertView, ViewGroup parent)
        {
            final View renderer = super.getView(position, convertView, parent);
            if (FINISHED_WORDS[position].equals("set"))
            {
                renderer.setBackgroundResource(android.R.color.darker_gray);
                Log.i(DEBUG_TAG, "FINISHED_WORDS["+position+"].equals(set)");
            }
            return renderer;
        }
    });
    ListView list_view = getListView();
    list_view.setTextFilterEnabled(true); 
    list_view.setOnItemClickListener(new OnItemClickListener() 
    {
          public void onItemClick(AdapterView<?> parent, View view, int position, long id) 
          {
                selected = position;
                Log.i(DEBUG_TAG, "ListView.onItemClick: selected = "+selected);
                final String selected_word = WORDS[position];
                LayoutInflater layout_inflater = LayoutInflater.from(context);
                View popup_view = layout_inflater.inflate(R.layout.highlight_popup, null);
                final AlertDialog.Builder alert_dialog_builder = new AlertDialog.Builder(context);
                alert_dialog_builder.setView(popup_view);
                final TextView ard_player_words_popup_text = (TextView) popup_view.findViewById(R.id.highlight_popup_text);
                ard_player_words_popup_text.setText(selected_word+" selected");
                alert_dialog_builder.setCancelable(false).setPositiveButton("OK",
                        new DialogInterface.OnClickListener() 
                        {
                            public void onClick(DialogInterface dialog,int id) 
                            {
                                FINISHED_WORDS[selected] = "set";
                                dialog.cancel();
                                ListView list_view = getListView();
                                ArrayAdapter<?> adapter = (ArrayAdapter<?>) list_view.getAdapter();
                                adapter.notifyDataSetChanged();
                            }
                          }).setNegativeButton("Cancel", new DialogInterface.OnClickListener() 
                          {
                              public void onClick(DialogInterface dialog,int id) 
                              {
                                  dialog.cancel();
                              }
                          });
                AlertDialog alert_dialog = alert_dialog_builder.create();
                alert_dialog.show();
        }
    });
}

@Override
public boolean onCreateOptionsMenu(Menu menu) 
{
    getMenuInflater().inflate(R.menu.activity_highlight, menu);
    return true;
}

} 
```

这是 activity_highlight.xml 布局

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >

<TextView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/highlight_layout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:padding="10dp"
    android:textSize="20sp" >
</TextView>

</RelativeLayout> 
```

这是highlight_popup.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<TextView
    android:id="@+id/highlight_popup_text"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center_horizontal"/>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T01:43:43.613

您的 getView 方法可能正在获取已回收的 convertView，并且已经设置了背景。

试试这个：

```
if (FINISHED_WORDS[position].equals("set"))
{
renderer.setBackgroundResource(android.R.color.darker_gray);
Log.i(DEBUG_TAG, "FINISHED_WORDS["+position+"].equals(set)");
}
else
{
renderer.setBackgroundResource(R.color.normal_background);
} 
```

# macos - 如何在组织模式下本地绑定 OSX 键绑定？

> ID：14595112
> 
> 赞同：0
> 
> 时间：2013-01-30T01:16:51.750
> 
> 标签：macos, emacs, org-mode

如何在 org-mode 中本地绑定 OSX 键绑定（但在 Emacs 中不是全局绑定）？

我将此添加到我的 .emacs 中，但它不起作用：

```
 (add-hook 'org-mode-hook 
         (lambda ()
          (local-set-key osx-key-mode-map (kbd "A-L") 'org-insert-link)
    )) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T21:47:40.383

默认情况下 org-insert-link 绑定到“Cc Cl”，如果你想在本地添加另一个键绑定，你的代码很接近，但我认为有两个小问题：

1.  看起来您在调用 local-set-key 时有一个额外的参数“osx-key-mode-map”。
2.  Alt / Meta 键加 Shift 加 l 的组合键将表示为“ML”。如果你想要 Apple / Command plus Shift plus l 那将是“sL”。

所以代码应该是这样的：

```
(add-hook 'org-mode-hook 
      (lambda ()
        (local-set-key (kbd "s-L") 'org-insert-link))) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T17:58:02.810

尝试使用 Command 键扩展 org-mode 特定的键映射`(kbd "A-l")`，如下所示：

```
(add-hook 'org-mode-hook
    (lambda ()
      (local-set-key (kbd "A-l") 'org-insert-link))) 
```

# java - XA/JTA 事务：JMS 消息在 DB 更改可见之前到达

> ID：14595118
> 
> 赞同：7
> 
> 时间：2013-01-30T01:17:25.807
> 
> 标签：java, jms, jta, distributed-transactions, xa

上下文是：

*   生产者（JTA 事务**PT**）正在向 JMS 队列发送消息并进行数据库更新；
*   消费者（JTA 事务**CT**）在同一队列上侦听并在收到消息时读取 DB；
*   应用程序服务器 - WebLogic，DB - Oracle。

我观察到，有时**CT**（还没有？）能够看到**PT**的 DB 更改，如果已经收到相应的 JMS 消息（**PT**已提交？）。

似乎 JTA 不能保证这种一致性（这在 Jurgen Holler 的演示文稿*“Transaction Choices for Performance”*中也得到了证实）。

避免此类问题的最佳方法是什么（除了明显的 - 不使用 JTA）？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T17:42:34.253

因此，似乎没有简单、优雅和防故障的解决方案。在我们的案例中，决定依赖简单的重新传递机制（抛出异常并让 JMS 消息在一定时间后重新传递）。

还考虑了：

*   将 DB 数据源标记为并期望启动最后资源提交优化 (LRCO)（从而部分控制 XA 事务中的提交顺序）。由于依赖于应用程序服务器 (WL) 的内部而被拒绝。

*   将 DeliveryDelay 设置为 JMS 消息，因此只有在（假设）数据库同步结束时，它才能在一段时间后使用。由于缺乏保证而被拒绝，需要针对不同的环境进行微调。

[其他答案中提到的博客文章](http://jbossts.blogspot.co.uk/2011/04/messagingdatabase-race-conditions.html)确实包含所有这些以及涵盖的其他几个选项（但没有确定的选项）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T12:14:17.267

此处概述了一些选项：http: [//jbossts.blogspot.co.uk/2011/04/messagingdatabase-race-conditions.html](http://jbossts.blogspot.co.uk/2011/04/messagingdatabase-race-conditions.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-29T13:45:03.810

关于答案：

> “因此，似乎没有简单、优雅和防故障的解决方案。在我们的案例中，决定依赖简单的重新传递机制（抛出异常并让 JMS 消息在一定时间后重新传递）。”

仅当您在 Transaction1 逻辑结束后开始的第二个事务有一种方法可以检测到 Transaction 1 更改尚不可见并在技术异常时自行爆炸时，这才是失败证明。

当您的事务 2 与事务 1 的进程不同时，这很可能可以检查。很可能事务 1 的输出对于事务 2 的成功是必要的。如果你有土豆，你只能做薯条......如果你没有土豆，你可以炸毁下次再试一次。

但是，如果您的进程因数据库过时而中断，则该进程与在事务 1 本身上运行的进程完全相同。您只是将土豆添加到肠道（例如 db 表）中，并且未能检测到您的肠道溢出并继续运行事务以提高...这样的检查可能不在您的手中。

类似的事情，恰好是我的情况。

对此的理论解决方案很可能是尝试通过创建与 JPA 的 @Version 字段等效的人工实体来在 DB 上引发脏读，从而强制需要串行运行的每个进程对公共实体进行更新。如果事务 2 和事务 1 都更新了公共实体上的公共字段，则该过程将不得不中断——要么您在第二个事务上收到 JPA 乐观锁异常，要么您从数据库中收到脏读更新异常。

我还没有测试过这种方法，但遗憾的是，它很可能是需要的解决方法。

# c# - 如何发送带有身份验证“无”的电子邮件？

> ID：14595119
> 
> 赞同：0
> 
> 时间：2013-01-30T01:17:30.833
> 
> 标签：c#, asp.net, .net, asp.net-mvc-4

我想发送一封身份验证类型为“无”的电子邮件。我已经阅读了有关如何使用基本身份验证的示例，但我不知道如何解决我的问题。

当我尝试连接到 Exchange 邮件服务器时，出现套接字异常：

> 由于目标机器主动拒绝，无法建立连接

我在 Delphi 中编写了一个可以发送电子邮件的非托管 .dll，并且在该项目中我将身份验证类型配置为*none*。所以，我想在.net中写基本相同的东西，但我不知道怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T23:56:53.687

我的程序是正确的。如果您不指定任何凭据，.Net 默认使用身份验证类型“无”。

我的电脑上安装的 McAffee Enterprise 防病毒软件阻止了我。最后，当我停用防病毒软件时，我可以使该程序正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T01:19:01.687

您是否有不需要身份验证的可以连接的 SMTP 服务器？

如果您使用的是 Gmail 的 SMTP 服务器，那么您必须使用您的 Gmail 帐户的用户名和密码对它们进行身份验证。

否则，我们需要更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T01:21:46.293

在[文档](http://msdn.microsoft.com/en-us/library/system.net.mail.smtpclient.credentials.aspx)中它说：

> 如果 UseDefaultCredentials 属性设置为 false 并且尚未设置 Credentials 属性，则邮件将匿名发送到服务器。

# magento - Authorize.net for Magento 抛出“无法读取响应或响应为空”

> ID：14595120
> 
> 赞同：1
> 
> 时间：2013-01-30T01:17:38.613
> 
> 标签：magento, magento-1.6, authorize.net

我们有一个 1.6 Magento 网站正在发送“付款交易失败”电子邮件。服务器抛出错误“无法读取响应或响应为空”。我们正在使用 Authorize.net 支付网关。它工作得很好，网站没有任何变化。什么可能导致此错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T11:01:22.117

这个错误信息，异常，在**Zend_Http_Client的第****993**行附近抛出 如果你看一下代码，这意味着无法读取响应，可能是因为超时、网络故障或类似的原因。

这是代码片段

```
$response = $this->adapter->read();
if (! $response) {
    /** @see Zend_Http_Client_Exception */
    #require_once 'Zend/Http/Client/Exception.php';
    throw new Zend_Http_Client_Exception('Unable to read response, or response is empty');
} 
```

# wordpress - Vagrant 开发环境中 WP 的尾随斜线问题

> ID：14595125
> 
> 赞同：1
> 
> 时间：2013-01-30T01:18:21.790
> 
> 标签：wordpress, nginx, vagrant

我有一个在 Vagrant 开发环境中运行的 Wordpress 站点。当我加载时`http://localhost:8080`，该站点正常运行，但是一旦我尝试通过转到 访问管理员`http://localhost:8080/wp-admin`，我就会被重定向到`http://localhost/wp-admin/`。

这里有两件事：

1.  有些东西（Wordpress？）正在强制使用斜杠（这很好，除了......）。
2.  在尾部斜杠重定向中，端口丢失（这非常不好）。

我已经尝试添加`port_in_redirect`我在其他类似问题的答案中看到的指令（老实说，使用两个值），但它没有任何改变。这似乎是一个 Wordpress，咳咳，功能，但我找不到任何东西来解释它的目的或帮助我防止它破坏东西。我希望有人能帮忙。

我的 Nginx`server`块：

```
server {
  listen      80;
  server_name localhost;
  root        /vagrant/www;
  index       index.php;

  access_log /var/log/nginx/project.vm.access.log;
  error_log  /var/log/nginx/project.vm.error.log;

  location / {
    try_files $uri $uri/ /index.php?$args;
  }

  # Add trailing slash to */wp-admin requests so the admin interface
  # works correctly. I've tried with and without this. No difference.
  rewrite /wp-admin$ $scheme://$host$uri/ permanent;

  location ~ \.php$ {
    fastcgi_split_path_info ^(.+\.php)(/.+)$;
    fastcgi_pass 127.0.0.1:9000;
    fastcgi_index index.php;
    include fastcgi_params;
  }

  # Cache static files
  location ~* \.(js|css|png|jpg|jpeg|gif|ico)$ {
    expires max;
    log_not_found off;
  }

  location = /favicon.ico {
    access_log off;
    log_not_found off;
  }
  location = /robots.txt {
    access_log off;
    log_not_found off;
    allow all;
  }

  location ~ /\. {
    access_log off;
    log_not_found off;
    deny all;
  }

  location ~ ~$ {
    access_log off;
    log_not_found off;
    deny all;
  }
} 
```

在我的`wp-config.php`文件中，我设置了`WP_HOME`和`WP_SITEURL`常量。

```
define('WP_HOME','http://localhost:8080');
define('WP_SITEURL','http://localhost:8080'); 
```

知道我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T17:08:29.550

我最近在将 WordPress 安装从服务器移动到本地 Vagrant 实例后遇到了同样的问题并解决了它添加：

```
define('RELOCATE',true); 
```

到 wp-config.php 文件并转到`http://localhost:8080/wp-login.php`

我在[http://codex.wordpress.org/Changing_The_Site_URL#Relocate_method](http://codex.wordpress.org/Changing_The_Site_URL#Relocate_method)找到了解决方案，我认为您可以找到其他一些方法来处理将 WP 安装从一台服务器移动到另一台服务器的问题。

# c# - 使用 VALUE AS 单元格颜色

> ID：14595131
> 
> 赞同：3
> 
> 时间：2013-01-30T01:20:16.313
> 
> 标签：c#, asp.net, vb.net, gridview, colors

好的，我在发布之前尽可能多地研究了这个，所以我希望这不是一个转发，但是这里有......

我做了一个数据表，假设它有一个名为 "cartype" 的列，然后我添加了一个名为 "color" 的列

好吧，我绑定了一个gridview，我想要做的是使用一个标签，并让它的FORECOLOR 成为“颜色”列中的值。

我试过这个：

```
<asp:BoundField DataField="cartype" HeaderText="Cars"  ItemStyle-Width="130" ItemStyle-ForeColor='<% Eval("Color") %>' /> 
```

但我有一个错误

“无法从 'ForeColor' 属性的字符串表示 '<%Eval("color")%>' 创建 System.drawing.color 类型的对象。

我也尝试添加一个模板字段并得到相同的结果。

我试图不使用 rowdatabound 事件并使用 .Cells[3] ，因为当我添加列时，它将更改单元格编号，并切换所有内容！我希望我可以通过将颜色与数据绑定来使其更清晰。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T16:48:25.307

好吧，我最终这样做了。伤心:(

在我的网格的 VERY END 我添加了一个 ASP:Hidden 模板字段

```
<asp:TemplateField>
  <ItemTemplate>
   <asp:HiddenField ID="hColor" runat="server" Value='<%# Eval("Color") %>'/>
  </ItemTemplate>
</asp:TemplateField> 
```

然后在 RowDataBoundEvent 我这样做了

```
Dim hid As HiddenField
hid = e.Row.FindControl("hColor")
If (hid.Value <> Nothing) Then
   e.Row.Cells(1).ForeColor = System.Drawing.ColorTranslator.FromHtml("#" + hid.Value)
End If 
```

PS。我喜欢 C#。不喜欢 VB.NET。哈哈 ：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T02:07:57.727

你有没有尝试过：

```
 ForeColor='<%# System.Drawing.Color.FromName(Eval("Color")) %>' 
```

?

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T01:50:38.017

错误的原因是运行时期望 ForeColor 的值是颜色，而不是字符串。运行时无法从字符串“Red”创建“Red”。

您可以使用以下示例在代码后面创建一个函数来解决您的问题.. 函数将接受字符串颜色值并返回系统颜色。同样在填充gridview之前，您可以将颜色列存储在arraylist中并使用该arraylist返回系统颜色。不是最好的方法，但想不出别的。

```
 ForeColor='<%# Convert.ToString(Eval("Color")) == "Blue" ? System.Drawing.Blue> 
```

# haskell - Haskell List Comprehension 创建函数

> ID：14595135
> 
> 赞同：3
> 
> 时间：2013-01-30T01:20:50.117
> 
> 标签：haskell

我是 Haskell 的新手，正在努力学习基础知识。我很难理解如何操作列表的内容。

假设我有以下列表，我想创建一个函数从列表中的每个元素中减去 1，我可以简单地将 x 传递给函数，这将如何完成？

```
Prelude>let x = 1:2:3:4:5:[] 
```

就像是：

```
Prelude>subtractOne(x) 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-30T01:44:05.417

（你可以`1:2:3:4:5:[]`更简单地写成`[1,2,3,4,5]`甚至`[1..5]`。）

## 领悟

你想使用列表推导，所以这里是：

```
subtractOne xs = [ x-1 | x <- xs ] 
```

在这里，我`xs`用来代表我从中减去一个的列表。

首先要注意的是`x <- xs`，您可以将其解读为“`x`取自`xs`”。这意味着我们将`xs`依次获取每个数字，并且每次我们都会调用该数字`x`。

`x-1`是我们为 each 计算和返回的值`x`。

更多示例，这里有一个给每个元素加一`[x+1|x<-xs]`或对每个元素求平方的例子`[x*x|x<-xs]`。

## 不止一个列表

让我们更深入地了解列表理解，编写一个函数，先找到平方数，然后再找到我们给它的数字的立方数，所以

```
> squaresAndCubes [1..5]
[1,4,9,16,25,1,8,27,64,125] 
```

我们需要

```
squaresAndCubes xs = [x^p | p <- [2,3], x <- xs] 
```

这意味着我们取`p`2 然后 3 的幂，对于每个幂，我们`x`从 中取所有 s `xs`，并计算`x`到幂`p`( `x^p`)。

如果我们反过来做会发生什么？

```
squaresAndCubesTogether xs = = [x^p | x <- xs, p <- [2,3]] 
```

我们得到

```
> squaresAndCubesTogether [1..5]
[1,1,4,8,9,27,16,64,25,125] 
```

它取了每一个`x`，然后给你它的两种力量。

结论 -`<-`位的顺序告诉您输出的顺序。

## 过滤

如果我们只想允许一些答案怎么办？

2 到 100 之间的哪些数可以写成`x^y`?

```
> [x^y|x<-[2..100],y<-[2..100],x^y<100]
[4,8,16,32,64,9,27,81,16,64,25,36,49,64,81] 
```

在这里，我们允许所有`x`，`y`只要`x^y<100`.

* * *

由于我们对每个元素都做同样的事情，我会在实践中使用`map`：

```
takeOne xs = map (subtract 1) xs 
```

或更短为

```
takeOne = map (subtract 1) 
```

（我必须调用它，`subtract 1`因为它`- 1`会被解析为负 1。）

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-30T01:28:47.553

您可以使用以下`map`功能执行此操作：

```
subtractOne = map (subtract 1) 
```

List Comprehensions 的替代解决方案更加冗长：

```
subtractOne xs = [ x - 1 | x <- xs ] 
```

为了清楚起见，您可能还想添加类型注释。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-30T01:32:55.180

您可以使用该`map`功能很容易地做到这一点，但我怀疑您想自己滚动一些东西作为学习练习。在 Haskell 中执行此操作的一种方法是使用递归。这意味着您需要将函数分为两种情况。第一种情况通常是最简单类型输入的基本情况。对于列表，这是一个空列表`[]`。从空列表的所有元素中减一的结果显然是一个空列表。在哈斯克尔：

```
subtractOne [] = [] 
```

现在我们需要考虑稍微复杂的递归情况。对于空列表*以外*的任何列表，我们可以查看输入列表的头部和尾部。我们将从头部减去一个，然后应用于`subtractOne`列表的其余部分。然后我们需要将结果连接在一起形成一个新列表。在代码中，这看起来像这样：

```
subtractOne (x:xs) = (x - 1) : subtractOne xs 
```

正如我之前提到的，您也可以使用`map`. 实际上，它只是一条线，并且是首选的 Haskellism。另一方面，我认为编写自己的函数使用显式递归以了解其工作原理是一个非常好的主意。最终，您甚至可能想编写自己的`map`函数以供进一步练习。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-30T01:24:11.377

`map (subtract 1) x`将工作。

```
subtractOne = map (subtract 1) 
```

该`map`函数允许您将函数应用于列表的每个元素。

# ruby - Ruby 动态命名数组

> ID：14595136
> 
> 赞同：2
> 
> 时间：2013-01-30T01:21:07.660
> 
> 标签：ruby, arrays, dynamic

我想遍历多个数组，并希望从名称数组中动态命名它们。像这样的东西，用...`name`中的元素替换`names array`

```
names=[a, b, c]
names.each{|name|
name_array1=[]
name_array2=[]
name_array[0][0].each{|i|                           
    if i>0
        name_array1.push([i])
    end
    if i<0
        name_array2.push([i])
    end
  }
} 
```

基本上创建数组`a_array1`, `a_array2`, `a_array[0][0]`, `b_array1`, `b_array2`, `b_array[0][0]`, `c_array1`, `c_array2`,`c_array[0][0]`

这甚至可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T01:55:41.673

Ruby 不支持动态局部变量名¹。

但是，这可以使用[Hash](http://www.tutorialspoint.com/ruby/ruby_hashes.htm)轻松表示。哈希将键映射到值，在这种情况下，键表示“名称”，值是数组：

```
# use Symbols for names, although Strings would work too
names = [:a, :b, :c]

# create a new hash
my_arrays = {}

# add some arrays to our hash
names.each_with_index { |name, index|
   array = [index] * (index + 1)
   my_arrays[name] = array
}

# see what we have
puts my_arrays

# access "by name"
puts my_arrays[:b] 
```

（有一些方法可以编写上述内容而不会产生副作用，但这应该是一个开始。）

* * *

¹动态实例/类变量名称是另一回事，但最好暂时保留为“高级主题”，*不适*用于当前任务。在过去（Ruby 1.8.x），`eval`可以用来改变局部变量绑定，但这从来都不是一个“好”的方法，并且在较新的版本[中不起作用。](http://www.ruby-forum.com/topic/155673)

# php - fgetcsv 不删除引号

> ID：14595146
> 
> 赞同：0
> 
> 时间：2013-01-30T01:22:09.493
> 
> 标签：php, csv, double-quotes, fgetcsv

所以我有这个：

```
$handle = fopen($filepath, 'r');
$row = fgetcsv($handle, null, "\t", '"'); 
```

其中 $filepath 包含具有以下文本的文件：

```
"\A some text with space." 
```

但是当我回显 $row 的内容时，它并没有删除封闭的引号，并且变量仍将包含包括引号在内的整个字符串，尽管它们中有空格......

我做错什么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T01:29:35.950

`fgetcsv`返回一个数组，如果文件内容如你所说，那么结果`var_dump($row);`应该是：

```
array(1) {
  [0]=>
  string(24) "\A some text with space."
} 
```

然后`echo $row[0];`是结果，不会有报价单。

# c++ - 如何使用广度优先搜索在地图中找到最短路径？

> ID：14595148
> 
> 赞同：2
> 
> 时间：2013-01-30T01:22:38.557
> 
> 标签：c++, algorithm, search

为简单起见，假设我有图表：

```
O O P O |
O O O O O
O | O | O
O O O O O
A O O O O 
```

我想使用广度优先搜索从 A 到 P 的最短路径，其中由 | 指定的位置 是禁区。我怎样才能达到这个结果？我一直看到用于查找某个位置的广度优先搜索（在这种情况下为 P），但我还没有看到任何用于存储路径距离和计算最短路径距离的实现（也没有有效的方法来存储以前访问过的位置和将他们排除在进一步审查之外）。此外，对于必须很大并且需要大量推送和弹出的图形，通常建议使用什么队列？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T01:29:37.123

广度优先搜索的美妙之处在于它会自动找到最短路径（您只需要在访问节点时跟踪您来自哪里）。使用广度优先搜索，您总是在队列的开头找到最便宜的路径，而在最后找到昂贵的路径。一旦你达到你的目标`P`，你就可以保证路径长度是最小的。

An`std::queue`是实现它的绝对好选择。

回应您的评论：您有一个*节点*/*顶点*队列（在您的情况下，这些是您的单元格）。当您访问一个节点时，您会将之前未访问过的所有邻居添加到队列中。要跟踪您访问过哪些节点以及路径来自何处，请在周围保留一个`std::array`/ `std::vector wherefrom;`，每个节点都有一个元素。然后（伪代码！）

```
take element v from queue
 for each neighbour x of v
    if wherefrom[x] != NULL
     wherefrom[x] = v
     add x to end of queue 
```

一旦你击中你的目标节点`P`，你就可以回溯`wherefrom`找到路径。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T01:49:02.140

我建议您阅读 Dijkstra 的算法，然后进行 A* 搜索。

这是在 C++ 中解决此问题的简单方法：

1.  创建一个初始化为 -1 的整数 std::vector（我们称之为“trail”），地图中的每个节点都有一个元素（在您的示例中大小为 25）。这将用于指示已经搜索了哪些节点，以及从哪里搜索了它们。'trail' 值为 -1 的节点尚未被搜索到，而 'trail' 值为 8 的节点已从节点 8 中搜索到。

2.  创建一个整数的 std::queue（我们称之为“search_queue”）。然后推送包含'A'的节点的ID，并将其'trail'值标记为自身。例如，如果“A”是节点 20，则将 trail[20] 设置为 20；这记录了路径从那个点开始。

3.  从'search_queue'中弹出最前面的节点，依次查看它的每个邻居，如果他们的trail值为-1，则将他们的id添加到队列中，并且他们不受限制（不包含'|'）。

4.  重复第 3 步，直到找到“P”（您已达到目标！），或者队列为空（没有有效路径）。

5.  如果找到“P”，则使用“轨迹”向量将路径追溯到起点——每个节点将指向路径中的前一个节点，直到到达指向自身的节点。那是你开始的地方，所以你现在有一个完整的路径！

您不必计算任何距离，因为呼吸优先搜索的性质保证算法找到的第一个有效路径将是可能的最短路径。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-30T01:44:31.160

我假设你有一个带有 APO | 的二维数组。价值观。如果未知，您将需要使用蛮力搜索找到 A。

对于路径，从 A 出发的最短路径可以通过创建一组 1-move 位置（即上方、右侧以及如果允许对角线移动，则可能位于右上方）来找到。当你这样做时，你想跟踪哪些位置已经被访问以避免返回到同一个方块，所以你需要对原始数组做一些事情（例如将访问的位置从“O”更改为“o”）或者有另一个数组只是为了这个。从 1 步位置，您可以创建一组尚未访问过的合法 2 步位置。继续前进，直到找到“P”。

关于容器的选择：使用上面的算法，你不会弹出任何东西——可以只使用一个向量。

作为优化，您可能也想要本地 P 并尝试深度优先遍历两者之间最明显的路径 - 在您的插图案例中 [diagonally-up-right-]-else-up-else-right 与“up " 允许直到您到达目标行，并且 "right" 直到您到达列。也可以做 right-else-up 或代替。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T01:33:53.730

获得地图后：

```
O O P O |
O O O O O
O | O | O
O O O O O
A O O O O 
```

定义图，`1`指示是否存在边：

```
1 1 P 1 0
1 1 1 1 1
1 0 1 0 1
1 1 1 1 1
A 1 1 1 1 
```

在哪里`a_ij = 0 iff m_ij = | and elsewhere a_ij = 1`

然后运行[​​Dijkstra 算法](http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm)或[Bellman-ford 算法](http://en.wikipedia.org/wiki/Bellman%E2%80%93Ford_algorithm)。

如果您坚持使用`BFS`，这里有一个解释为什么它也有效：

[寻找最短路径时，广度优先搜索如何工作？](https://stackoverflow.com/questions/8379785/how-does-a-breadth-first-search-work-when-looking-for-shortest-path-java)

# webdriver - cssSelector 中包含的替代方案？Selenium 网络驱动程序

> ID：14595149
> 
> 赞同：7
> 
> 时间：2013-01-30T01:22:39.683
> 
> 标签：webdriver, css-selectors, selenium-webdriver

我正在使用 selenium 2 (WebDriver)。

我正在找到一个按钮并单击脚本：

```
driver.findElement(By.cssSelector("button:contains('Run Query')")); 
```

或者

```
driver.findElement(By.cssSelector("css=.gwt-Button:contains('Run Query')")) 
```

谁的 html 是这样的：

```
<button type="button" class="gwt-Button" id="ext-gen362">Run Query</ 
button> 
```

由于 id 是动态生成的，因此我无法使用该 ID。

有没有办法将 cssSelector 与 contains 之类的东西一起使用？这可能吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-30T02:00:45.687

你不能用 CSS 选择器来做到这一点，因为`:contains()`在 CSS 中没有这样的东西。这是一个多年前被放弃的提议。

如果您想通过元素文本进行选择，您将使用 XPath 选择器。就像是

> driver.findelement(By.xpath("//button[contains(., 'Run Query']"))

或者

> driver.findelement(By.xpath("//[contains(concat('', @class, ''), '.gwt-Button') and contains(., 'Run Query']"))

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T09:40:44.420

另一种选择是使用 jQuery，如果它出现在页面上，例如：

```
var webElement = ((JavascriptExecutor)driver).executeScript("return jQuery('button:contains(Run Query)')"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-16T08:35:16.633

您不能使用包含，而是使用通配符。

```
driver.findElement(By.cssSelector("button:(*'Run Query'*)")); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-30T15:44:53.300

我在同一条船上，目前使用带有“包含”的 XPath 选择器来查找具有特定文本内容的元素。有些在大表中`<td>`，有些`<td><a>`在大表的深处（特定的列，但事先未知的行）。它非常慢（使用 Firefox 20 找到这样的表条目需要 4 到 5 秒），所以我希望使用 CSS 更快。文本通常是单独的（完整的），有时它是我想忽略的路径末尾的文件名。鉴于它是已知列但未知行，并且可能是`<td>`或`<td><a>`（有时在同一张表中）。对于我要查找的文本是完整的（而不是在其他文本的末尾）的大多数情况，相等比较会比 contains() 快得多吗？我认为有一个“开始于”查找，但是否有一个“结束于”查找？我知道使用“id”会更快，但不幸的是，此 HTML 此处没有任何 ID，并且无法添加它们。我正在寻找`<tr>`包含此文本的内容，以便可以在同一行中找到另一个元素并获取其文本或单击链接。找到一小部分行并检查它们的文本并没有什么坏处，但我想避免单独搜索`<td>`，`<td><a>`如果可能的话。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-30T01:36:27.780

单靠 CSS 无法满足您的需求；您[无法](https://stackoverflow.com/questions/5441680/css-selector-based-on-element-text)按文本过滤。您可以使用 js 获取元素的 id，也可以遍历代码中的所有按钮，直到找到具有正确文本的按钮。如果这是在 python 中：

```
[btn for btn in browser.find_elements_by_css_selector('button')
 if 'Run Query' in btn.text] 
```

您也可以轻松地概括这一点并制作一个辅助函数。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2018-04-09T12:00:39.747

```
driver.findElement("#ext-gen362").Where(webElement => webElement.Text.Contains("Run Query")) 
```

# php - 带有解析错误的 php 函数：语法错误，意外 '('，需要 T_STRING 或 T_VARIABLE 或 '$'

> ID：14595157
> 
> 赞同：-5
> 
> 时间：2013-01-30T01:23:53.927
> 
> 标签：php

下面的 PHP 函数产生了这个错误： Parse error: syntax error, unexpected '(', expecting T_STRING or T_VARIABLE or '$', on this line that content this code:`$obj = new ( );`

有谁知道出了什么问题？

```
function createContextAwareObjectOfClass($className) {
    $className;
    $obj = new (  );
    IApplicationContextAware;

    if (!( $obj instanceof null )) {
        Exception;
        throw new ( '' . 'Non-context aware class "' . $className . '" passed to createContextAwareObjectOfClass' );
    }

    $obj->setAppContext( $this );
    return $obj;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T01:24:39.627

我*认为*

```
$obj = new (  );
IApplicationContextAware; 
```

应该

```
$obj = new IApplicationContextAware(); 
```

# iphone - 在第三方应用程序中显示存折中的现有通行证？

> ID：14595158
> 
> 赞同：0
> 
> 时间：2013-01-30T01:23:58.070
> 
> 标签：iphone, ios, xcode, passbook

我正在开发一个应用程序，并且有一个问题。我的应用程序即时创建通行证，可以选择将它们添加到您自己的存折中，或者通过电子邮件将它们发送给其他用户，以便他们可以将其添加到他们的存折中。我想添加一个选项，用户可以单击按钮，查看他们的存折中是否存在具有应用程序 PassID 的任何通行证，并显示它。应用程序是否可以检查存折中的现有通行证？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T17:46:11.947

只要您的应用程序具有特定 passTypeIdentifier 的权利，那么：

> 使用[PKPassLibrary 类的 pass 方法](https://developer.apple.com/library/ios/#documentation/PassKit/Reference/PKPassLibrary_Ref/PKPassLibrary.html#//apple_ref/occ/instm/PKPassLibrary/passes)来获取您的应用有权访问的所有通行证。通行证以任意顺序返回。如果您的应用程序显示通行证列表，它应该以某种有意义的方式对它们进行排序，例如按日期。

取自[Passbook Programming Guide。](https://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/PassKit_PG/Chapters/Apps.html#//apple_ref/doc/uid/TP40012195-CH6-SW1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T05:25:08.507

请浏览以下网址以更好地了解存折：

[存折常见问题](http://www.raywenderlich.com/25227/passbook-faq)

[iOS 6 中的存折入门：第 1/2 部分](http://www.raywenderlich.com/20734/beginning-passbook-part-1)

[iOS 6 中的存折入门：第 2/2 部分](http://www.raywenderlich.com/20785/beginning-passbook-in-ios-6-part-22)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-08T10:52:52.687

我要做的是检查通行证是否存在，`passWithPassTypeIdentifier:serialNumber:`然后如果用户愿意，您可以使用 openURL 打开它。

我通过循环编写了一个快速调试示例：

```
//get all passes
let passes = PKPassLibrary.init().passes();

//loop is not the best prefer passWithPassTypeIdentifier:serialNumber:
//but it is usefull for debuging
for pass in passes {
  //1) test the pass you want to
  //2) if found, prompt user if they want to open this pass
  //3) if yes, open PassBook with the following command :
  UIApplication.sharedApplication().openURL(pass.passURL)
} 
```

# php - 在 mySQL 上将 byteArray 保存到 BLOB 会出现错误“您的 SQL 语法有错误”

> ID：14595160
> 
> 赞同：2
> 
> 时间：2013-01-30T01:24:03.547
> 
> 标签：php, mysql, actionscript-3, bytearray, amfphp

我正在尝试通过 amfphp 从 as3 项目中保存 jpg 的 byteArray，然后使用 php/mySQL 将其保存到我数据库上的 BLOB 中。这是我的php函数

```
function saveImage($uid, $name, $tag1, $tag2, $tag3, $ba) {
        $result = mysql_query("INSERT INTO images (uid,name,tag1,tag2,tag3,thumb) VALUES ('$uid','$name','$tag1','$tag2','$tag3','$ba->data');");

        $error = mysql_error();
        if ($error) {
            return $error;
        }
        else {
            return $result;
        }
    } 
```

但我不断收到此错误：

```
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '()*456789:CDEFGHIJSTUVWXYZcdefghijstuvwxyz¢£¤¥¦§¨©ª²³´µ¶·¸¹ºÂÃÄ' at line 1 
```

关于如何解决这个问题的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T01:42:49.467

为了将来参考，如果要将二进制文件保存到 mysql 中的 blob 单元格，可以`addslashes`对数据使用函数，例如：

```
addslashes($blob_data); 
```

工作代码示例位于此处：尝试在二进制数据变量上添加斜杠。添加斜杠（$变量）

# python - Appengine - 从标准 DB 升级到 NDB - ReferenceProperties

> ID：14595163
> 
> 赞同：7
> 
> 时间：2013-01-30T01:24:07.943
> 
> 标签：python, database, google-app-engine, datastore

我有一个 AppEngine 应用程序，我正在考虑升级以使用 NDB 数据库。

在我的应用程序中，我有数百万个具有旧式数据库引用的对象。我想知道将这些 ReferenceProperty 值转换为 KeyProperty 值的最佳迁移路径是什么，或者任何其他允许我升级到 NDB 的解决方案。

（我希望不涉及数据库中所有元素的大规模批处理和基于 ReferenceProperty 计算 KeyProperty 的东西——优雅的东西会很好）

我想从 db.Model 升级到 ndb.Model 的模型示例如下：

```
class UserModel(db.Model):
    ....

class MailMessageModel(db.Model):
    m_text = db.TextProperty()   
    m_from = db.ReferenceProperty(reference_class = UserModel)
    m_to = db.ReferenceProperty(reference_class = UserModel) 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-30T01:50:13.893

好消息是，您不必对持久化数据进行任何更改，因为读取`ext.db`和`ndb`写入完全相同的数据。

[这是NDB 备忘单](https://cloud.google.com/appengine/docs/python/ndb/db_to_ndb)的引述：

> ### 无需更改数据存储！
> 
> 如果您想知道，尽管 API 不同，NDB 和旧的 ext.db 包将完全相同的数据写入 Datastore。这意味着您不必对数据存储进行任何转换，并且您可以愉快地混合和匹配 NDB 和 ext.db 代码，只要您使用的模式是等效的。您甚至可以使用[ndb.Key.from_old_key()](https://cloud.google.com/appengine/docs/python/ndb/keyclass#Key_from_old_key)和[key.to_old_key()](https://cloud.google.com/appengine/docs/python/ndb/keyclass#Key_to_old_key)在 ext.db 和 NDB 密钥之间进行转换。

备忘单是转换模型定义的绝佳指南。例如，改变你的`MailMessageModel`应该很容易：

前：

```
class MailMessage(db.Model):
    m_text = db.TextProperty()
    m_from = db.ReferenceProperty(reference_class=UserModel)
    m_to = db.ReferenceProperty(reference_class=UserModel) 
```

后：

```
class MailMessage(ndb.Model):
    m_text = ndb.TextProperty()
    m_from = ndb.KeyProperty(kind=UserModel)
    m_to = ndb.KeyProperty(kind=UserModel) 
```

我强烈建议您使用备忘单来帮助您进行迁移。

# mysql - 如果一个 Column 递增，然后在同一个 UPDATE 查询中用于设置另一个 Column 的值，它将保持哪个值？

> ID：14595167
> 
> 赞同：1
> 
> 时间：2013-01-30T01:24:34.203
> 
> 标签：mysql, sql-update

鉴于查询...

```
UPDATE
   Table1
SET
   col1 = col1 + 1,
   col2 = col1 * 2
WHERE
   colID = 1 
```

...如果在查询执行**之前**`col1`等于，将设置为还是**在**查询执行之后？`1` **`col2``2``4`**

 ***** * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T01:27:39.653

试一试。但是给你：

[http://sqlfiddle.com/#!2/7b6de/1](http://sqlfiddle.com/#!2/7b6de/1)

Col2 更新为 4。

祝你好运。****

# ruby - 使用 `Hash#fetch` 优于 `Hash#[]` 的好处

> ID：14595169
> 
> 赞同：22
> 
> 时间：2013-01-30T01:24:43.560
> 
> 标签：ruby, hash

我不确定我想在什么情况下使用`Hash#fetch`over `Hash#[]`。是否有一个常见的场景可以很好地使用它？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-30T01:43:49.887

三个主要用途：

1.  当该值是强制性的，即没有默认值时：

    ```
    options.fetch(:repeat).times{...} 
    ```

    您也会收到一条很好的错误消息：

    ```
    key not found: :repeat 
    ```

2.  当值可以是`nil`or`false`并且默认值是其他值时：

    ```
    if (doit = options.fetch(:repeat, 1))
      doit.times{...}
    else
      # options[:repeat] is set to nil or false, do something else maybe
    end 
    ```

3.  当您不想使用哈希的`default`/时：`default_proc`

    ```
    options = Hash.new(42)
    options[:foo] || :default # => 42
    options.fetch(:foo, :default) # => :default 
    ```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-30T01:27:48.703

当您想获取默认值或在键不存在时引发错误时，`fetch`很有用。仍然可以`fetch`通过将默认值设置为哈希`fetch`来做到这一点，但是使用 ，您可以在现场完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-04T23:26:02.283

但是，您可以这样做：

```
arr = [1,2,3]
arr[1..-2] #=> [1,2] 
```

但不是这个：

```
arr.fetch(1..-2) #=> TypeError: no implicit conversion of Range into Integer 
```

同样，您可以使用`Hash#[]`

```
arr[0] = "A"
arr #=> ["A",2,3] 
```

但不是 fetch：

```
arr.fetch(0) = "A" #=> unexpected '=', expecting end-of-input 
```

# php - MongoConnectionException - 未找到候选服务器

> ID：14595172
> 
> 赞同：8
> 
> 时间：2013-01-30T01:25:08.740
> 
> 标签：php, mongodb, mongodb-php

我正在开发一个使用 MongoDB 副本集来存储我的数据的 PHP Web 应用程序。我偶尔会收到以下错误：

> 致命错误：未捕获的异常“MongoConnectionException”，消息“未找到候选服务器”

我有一个 3 成员 Mongo 副本集和 1 个仲裁器

```
rs0:PRIMARY> rs.status()
{
    "set" : "rs0",
    "date" : ISODate("2013-01-30T01:04:04Z"),
    "myState" : 1,
    "members" : [
        {
            "_id" : 0,
            "name" : "JenEricsMacPro.local:27017",
            "health" : 1,
            "state" : 1,
            "stateStr" : "PRIMARY",
            "uptime" : 844478,
            "optime" : Timestamp(1359507378000, 1),
            "optimeDate" : ISODate("2013-01-30T00:56:18Z"),
            "self" : true
        },
        {
            "_id" : 1,
            "name" : "ericsmacbookpro.local:27017",
            "health" : 1,
            "state" : 2,
            "stateStr" : "SECONDARY",
            "uptime" : 10720,
            "optime" : Timestamp(1359507378000, 1),
            "optimeDate" : ISODate("2013-01-30T00:56:18Z"),
            "lastHeartbeat" : ISODate("2013-01-30T01:04:04Z"),
            "pingMs" : 3
        },
        {
            "_id" : 2,
            "name" : "ericsmacbookair.local:27017",
            "health" : 1,
            "state" : 7,
            "stateStr" : "ARBITER",
            "uptime" : 1206,
            "lastHeartbeat" : ISODate("2013-01-30T01:04:03Z"),
            "pingMs" : 4
        },
        {
            "_id" : 3,
            "name" : "ericsmacxps.local:27017",
            "health" : 1,
            "state" : 2,
            "stateStr" : "SECONDARY",
            "uptime" : 75204,
            "optime" : Timestamp(1359507378000, 1),
            "optimeDate" : ISODate("2013-01-30T00:56:18Z"),
            "lastHeartbeat" : ISODate("2013-01-30T01:04:03Z"),
            "pingMs" : 1
        }
    ],
    "ok" : 1
} 
```

下面是我偶尔收到此错误的代码示例。

```
$mongoConfig = array (
    'uri' => 'mongodb://JenEricsMacPro.local:27017,ericsmacbookpro.local:27017,ericsmacxps.local:27017/',
    'database' => 'myDatabase',
    'replicaSetArray' => array('replicaSet' => 'rs0'));

$connection = new MongoClient(
    $mongoConfig['uri'],
    $mongoConfig['replicaSetArray']);

$connection->setReadPreference(MongoClient::RP_SECONDARY_PREFERRED);

$db = $connection->selectDB($mongoConfig['database']); 
```

任何人都知道可能导致“未找到候选服务器”消息的原因或有关如何确定问题根源的任何建议？

我所有的 mongo.conf 文件都使用每台服务器的静态 IP，没有防火墙和 DNS 似乎正确解析到我网络上的 .local 域。

编辑：在实例化 MongoClient 之前，我添加了 Derick 建议的日志记录。

```
error_reporting (E_NOTICE);

MongoLog::setModule( MongoLog::ALL );
MongoLog::setLevel( MongoLog::ALL ); 
```

启用日志记录后，我收到以下通知。

```
Notice: PARSE INFO: Parsing mongodb://JenEricsMacPro.local:27017,ericsmacbookpro.local:27017,ericsmacxps.local:27017/ in MongoLogic.php on line 27
Notice: PARSE INFO: - Found node: JenEricsMacPro.local:27017 in MongoLogic.php on line 27
Notice: PARSE INFO: - Found node: ericsmacbookpro.local:27017 in MongoLogic.php on line 27
Notice: PARSE INFO: - Found node: ericsmacxps.local:27017 in MongoLogic.php on line 27
Notice: PARSE INFO: - Connection type: MULTIPLE in MongoLogic.php on line 27
Notice: PARSE INFO: - Found option 'replicaSet': 'rs0' in MongoLogic.php on line 27
Notice: PARSE INFO: - Switching connection type: REPLSET in MongoLogic.php on line 27
Notice: CON INFO: mongo_get_read_write_connection: finding a REPLSET connection (read) in MongoLogic.php on line 27
Notice: CON FINE: found connection JenEricsMacPro.local:27017;rs0;X;297 (looking for JenEricsMacPro.local:27017;rs0;X;297) in MongoLogic.php on line 27
Notice: CON INFO: is_ping: pinging JenEricsMacPro.local:27017;rs0;X;297 in MongoLogic.php on line 27
Notice: CON FINE: mongo_connection_destroy: Closing socket for JenEricsMacPro.local:27017;rs0;X;297\. in MongoLogic.php on line 27
Notice: CON INFO: freeing connection JenEricsMacPro.local:27017;rs0;X;297 in MongoLogic.php on line 27
Notice: CON WARN: Couldn't connect to 'JenEricsMacPro.local:27017': send_package: error reading from socket: Operation timed out in MongoLogic.php on line 27
Notice: CON FINE: found connection ericsmacbookpro.local:27017;rs0;X;297 (looking for ericsmacbookpro.local:27017;rs0;X;297) in MongoLogic.php on line 27
Notice: CON INFO: is_ping: pinging ericsmacbookpro.local:27017;rs0;X;297 in MongoLogic.php on line 27
Notice: CON FINE: mongo_connection_destroy: Closing socket for ericsmacbookpro.local:27017;rs0;X;297\. in MongoLogic.php on line 27
Notice: CON INFO: freeing connection ericsmacbookpro.local:27017;rs0;X;297 in MongoLogic.php on line 27
Notice: CON WARN: Couldn't connect to 'ericsmacbookpro.local:27017': send_package: error reading from socket: Operation timed out in MongoLogic.php on line 27
Notice: CON FINE: found connection ericsmacxps.local:27017;rs0;X;297 (looking for ericsmacxps.local:27017;rs0;X;297) in MongoLogic.php on line 27
Notice: CON INFO: is_ping: pinging ericsmacxps.local:27017;rs0;X;297 in MongoLogic.php on line 27
Notice: CON FINE: mongo_connection_destroy: Closing socket for ericsmacxps.local:27017;rs0;X;297\. in MongoLogic.php on line 27
Notice: CON INFO: freeing connection ericsmacxps.local:27017;rs0;X;297 in MongoLogic.php on line 27
Notice: CON WARN: Couldn't connect to 'ericsmacxps.local:27017': send_package: error reading from socket: Operation timed out in MongoLogic.php on line 27
Notice: CON FINE: discover_topology: checking ismaster for JenEricsMacPro.local:27017;rs0;X;297 in MongoLogic.php on line 27
Notice: CON WARN: discover_topology: couldn't create a connection for JenEricsMacPro.local:27017;rs0;X;297 in MongoLogic.php on line 27
Notice: CON FINE: discover_topology: checking ismaster for ericsmacbookpro.local:27017;rs0;X;297 in MongoLogic.php on line 27
Notice: CON WARN: discover_topology: couldn't create a connection for ericsmacbookpro.local:27017;rs0;X;297 in MongoLogic.php on line 27
Notice: CON FINE: discover_topology: checking ismaster for ericsmacxps.local:27017;rs0;X;297 in MongoLogic.php on line 27
Notice: CON WARN: discover_topology: couldn't create a connection for ericsmacxps.local:27017;rs0;X;297 in MongoLogic.php on line 27
Notice: REPLSET FINE: finding candidate servers in MongoLogic.php on line 27
Notice: REPLSET FINE: - all servers in MongoLogic.php on line 27
Notice: REPLSET FINE: filter_connections: adding connections: in MongoLogic.php on line 27
Notice: REPLSET FINE: filter_connections: done in MongoLogic.php on line 27
Notice: REPLSET FINE: limiting to servers with same replicaset name in MongoLogic.php on line 27
Notice: REPLSET FINE: limiting to servers with same replicaset name: done in MongoLogic.php on line 27
Notice: REPLSET FINE: limiting by credentials in MongoLogic.php on line 27
Notice: REPLSET FINE: limiting by credentials: done in MongoLogic.php on line 27 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T11:57:03.040

我建议您添加日志记录以了解发生了什么。Mongo 驱动程序（从 1.3 版开始）提供了*广泛的*日志记录来调试连接问题。在[http://derickrethans.nl/mongodb-debugging.html](http://derickrethans.nl/mongodb-debugging.html)有一篇文章解释了如何开启它。如果从日志信息中不清楚会发生什么，请使用日志更新您的问题，以便我可以更新我的答案。

从发布的日志中，我可以看到您的客户端无法从您的连接字符串连接到*任何种子。*如果您的机器/客户端无法连接，您当然无法与 MongoDB 对话。在这种情况下，可能有几种可能性：

*   驱动程序无法将名称转换为 IP 地址。在这种情况下，您需要修复 DNS 设置，或将所有主机添加到 /etc/hosts
*   您真的无法连接到它们，这可能是防火墙。
*   1.2系列的驱动存在一些问题，所以如果你还没有使用1.3.4或更高版本，我建议你升级。这应该是一个更流畅的体验。
*   请记住，您需要大多数节点才能进行写入。如果您没有，那么您将收到“无候选服务器”错误。

# html - 最大宽度：100% 的图像下的左对齐文本

> ID：14595177
> 
> 赞同：0
> 
> 时间：2013-01-30T01:25:47.270
> 
> 标签：html, css

我希望此图像下的文本在图像下左对齐（“我的标题”与图像的左侧对齐），无论它的高度是多少，*没有*Javascript。

HTML

```
<div class="container">
    <div class="img-container">
        <img src="http://img.thesun.co.uk/multimedia/archive/01572/empire-state-build_1572000a.jpg"/>

        <div class="info">
            <h1>my title</h1>
            <p> my description</p>
        </div>

    </div>
</div> 
```

CSS

```
.container{
    width:900px;
    position:relative;
}

.img-container{
    text-align:center;
}

img{
    max-width:100%;
}

.info{
    text-align:left;
} 
```

[http://jsfiddle.net/NGwdc/](http://jsfiddle.net/NGwdc/)

如果您调整 .container 宽度，它应该始终与该图像的左侧对齐。

这可能只使用CSS吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T01:32:32.920

答案是制作图像容器`display:inline-block`，以及最外层的容器`text-align:center`

[http://jsfiddle.net/NGwdc/1/](http://jsfiddle.net/NGwdc/1/)

# php - php/mysql/ajax：带有建议的谷歌风格搜索

> ID：14595181
> 
> 赞同：1
> 
> 时间：2013-01-30T01:26:05.910
> 
> 标签：php, mysql, ajax

我有一个 ajax 脚本，可以在数据库表中搜索类似于 google 搜索的表达式。SELECT 语句只使用 LIKE 并在相关字段中查找匹配项。起初它运行良好，但随着内容的增长，它为大多数搜索字符串提供了太多匹配项。

例如，如果你搜索 att，你会得到 att，但也会得到 attention、attaboy、buratta 等。

像谷歌这样的优秀搜索引擎似乎有一个经过其他人审查的中间建议表。他们似乎不是直接搜索数据，而是搜索批准的短语，例如 AT&T，并成功地缩小了结果的数量。有没有人编写过这样的代码并建议正确的 dbase 模式和查询以获得相关结果。

现在我正在直接搜索名称表，例如

```
$sql = "SELECT lastname from people WHERE lastname LIKE '%$searchstring%'"; 
```

我想除了人之外，我应该按照以下方式创建一些中间表

人们

```
id|firstname|lastname|description 
```

好词

```
id|niceterm|peopleid 
```

那么查询可能是：

```
$sql = "SELECT p.lastname,p.peopleid, n.niceterm, n.peopleid,
FROM `people` p
LEFT JOIN `niceterms` n
on p.id = n.peopleid
WHERE niceterm LIKE '%$searchterm%'"; 
```

..因此，当您在搜索框中键入内容时，您会得到很好的搜索词，从而产生更好的结果。

但是我如何填充 niceterms 表。这是正确的方法吗？我不是想创建一个完整的 backweb 或 pagerank。只想缩小搜索结果的范围，使其具有相关性。

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T01:42:47.320

您可能想看看 Mysql 中的 FULLTEXT 搜索。它允许您根据相关性创建强大的查询。例如，您可以创建一个布尔搜索，它允许您在结果中创建一个记分行。分数将基于规则，例如文本是否以 karakter 组合开头（是？+2，否，但它确实包含组合：+1）

下面的代码只是另一列，其中包含 3 条规则：

*   是否`p1`. `name`字段包含 Bl 还是岩石？如果是 -> 添加分数
*   是否 `p1`. `name`字段以 Bl 或 rock 开头？如果是 -> 添加分数
*   是`p1`. `name`等于BL摇滚？如果是 -> 添加分数

    匹配`p1`。`name`反对('>Bl* >rock* >((+Bl*) (+rock*)) >("Bl rock")' 在布尔模式中) AS`match`

现在只需订购`match`，它就会向您显示最相关的搜索。您还可以将 order by 与多个语句组合并添加如下限制：

按最近日期、最高匹配排序，然后按字符长度排序具有相同分数的匹配

```
ORDER BY `date` DESC, `match` DESC, LENGTH(`p1`.`name`) ASC 
```

请记住，上面的代码以某种方式根据常见情况创建了相关结果。复制谷歌将是不可能的，因为他们的最佳结果/速度算法令人难以置信。

如果 FULLTEXT 搜索是一个步骤太多，尝试制作一个标签系统。使用独特的标签组合标记内容也会产生更可靠的搜索结果

# c++ - 在 MSVC 2012 中禁用剪贴板环

> ID：14595186
> 
> 赞同：0
> 
> 时间：2013-01-30T01:26:30.673
> 
> 标签：c++, visual-c++

我在我的电脑上使用 ClipX 来保存剪贴板历史，它工作得很好。然而，在我升级到 MSVC2012 后，它不再拾取我在 Visual Studio 中所做的*任何副本。*似乎 Visual Studio 在 ClipX 之前以某种方式捕获了 CTRL+C，还是什么？无论如何，我更喜欢 ClipX 而不是 MS 的实现，所以我希望有某种方法可以完全禁用该功能

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-19T21:07:51.070

您正在运行最新版本的 ClipX 吗？尽管它被标记为“Beta”，但 1.0.3.9 版本运行良好，如果您使用的是 Win7 x64，则可以使用 64 位版本，这就是我运行的版本。我还没有运行 Windows 8 或 8.1，所以无法评论它是否适用于这些。

我正在运行 VS2013，我无法准确重现您的问题，但是......我确实有类似的问题（和解决方案）：

我以管理员身份运行 VS（我将 devenv.exe 的属性更改为始终以管理员身份运行）以与 IIS 互操作，以及其他原因。ClipX 仍然从副本/剪切中获取值，但是当我尝试使用 ClipX 弹出列表粘贴当前剪贴板条目以外的值时，它实际上并没有粘贴到 Visual Studio 中。ClipX 确实将项目移动到列表的顶部，然后第二个 Ctrl+V 确实将值粘贴到 VS 中，但这很烦人。

解决方案是以管理员身份运行 ClipX。由于只能通过任务计划程序在启动/登录时以管理员身份运行程序，因此设置起来有点麻烦，但是一旦我设置了它，ClipX 与 VS（或我的任何其他程序）交互就没有问题了以管理员身份运行）。

如果您以管理员身份运行 VS，您可以尝试以管理员身份运行 ClipX（只需在“开始”菜单中右键单击它），看看它是否能解决您的问题。如果是这样，那么请担心任务计划程序部分。如果它不能解决您的问题，那么，值得一试。

# php - 检查 Ajax 响应的会话变量

> ID：14595187
> 
> 赞同：0
> 
> 时间：2013-01-30T01:26:36.430
> 
> 标签：php, jquery, ajax

我有一个页面，它定期（每 3 秒左右）通过 Ajax 检查内容更新，通过 .js 文件接收它们，该文件作为脚本运行以替换页面的特定区域。.js 文件如下所示：

```
$('div#content').html('<p>New content.</p>'); 
```

问题是我想根据几个 PHP 会话变量检查 .js 文件以在显示之前修改内容，特别是查看用户是否登录。简而言之，我必须在 .js 文件中执行 PHP 代码，以便在使用 Ajax 调用时为最终用户修改它。

我无法将 .js 文件的扩展名重命名为 .php，因为 .js 文件是通过使用 PHP 代码创建的，并且不允许在我的服务器上创建 .php 文件。

我无法运行单独的 PHP 脚本来输出 .js 文件的内容，因为只要对内容进行更改，而不是在 Ajax 调用期间（会话变量部分除外），就会创建和更新 .js 文件。还有一个问题是，当前用户的会话变量被用来创建和更新本应适用于其他所有人的内容。

目前，我找到的最佳解决方案来自[这里](http://www.kavoir.com/2010/07/how-to-execute-run-php-code-inside-javascript-files.html)。它涉及创建一个 .htaccess 文件以将所有 .js 文件解析为 PHP。

有没有其他人有更好的解决方案（或者甚至可以防止这个问题发生的解决方法）？

# java - Java：在创建 ConcurrentHashMap 对象时使用 synchronized(this) 是一种可取的做法吗？

> ID：14595188
> 
> 赞同：1
> 
> 时间：2013-01-30T01:27:02.367
> 
> 标签：java, multithreading, web-services, synchronized, concurrenthashmap

我刚刚为我正在参加的分布式编程课程开发了一个 Java Web 服务服务器。要求之一是保证我们项目的多线程安全，因此我决定使用 ConcurrentHashMap 对象来存储我的数据。最后，我留下了一个关于这段代码的问题：

```
 public List<THost> getHList() throws ClusterUnavailable_Exception{

    logger.entering(logger.getName(), "getHList");
    if(hMap==null){
        synchronized(this){
            if(hMap==null){
                hMap=createHMap();
            }
        }
    }
    if(hMap==null){
        ClusterUnavailable cu = new ClusterUnavailable();
        cu.setMessage("Data unavailable.");
        ClusterUnavailable_Exception exc = new ClusterUnavailable_Exception("Data unavailable.", new ClusterUnavailable());
        throw exc;
    }
    else{
        List<THost> hList = new ArrayList<THost>(hMap.values());
        logger.info("Returning list of hosts. Number of hosts returned = "+hList.size());
        logger.exiting(logger.getName(), "getHList");
        return hList;
    }
} 
```

是否必须在创建concurrenthashmap对象本身时使用同步语句，以保证服务在多线程环境中不会出现任何不可预知的行为？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T02:26:16.323

不要打扰。急切地初始化`Map`，使字段最终，并删除同步，直到您证明它确实是必要的。成本微乎其微，“显然安全且正确”的解决方案几乎永远不会太慢。

你提到这是一个课堂项目——专注于让代码工作。并发性已经够难了，而无需发明额外的障碍，然后您必须克服这些障碍。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-30T02:48:31.737

简单的解决方案是通过热切初始化来避免该问题。除非您有明确的证据（即分析）表明急切初始化是一个性能问题，否则这也是最好的解决方案。

至于您的问题，答案是该`synchronized`块是*正确性所必需的*。没有它，您可以获得以下事件序列。

*   线程 1 调用`getHList()`
*   线程 1 看到它`hMap`并`null`开始创建地图。
*   线程 2 调用`getHList()`
*   线程 2 看到它`hMap`并`null`开始创建地图。
*   线程 1 完成创建，并将新映射分配给`hMap`，并返回该映射。
*   线程 2 完成创建，并将*第二个*新映射分配给`hMap`，并返回该映射。

简而言之，线程 1 和线程 2如果同时调用while有其初始值，则可以得到*不同的映射。*`getHList()``hMap``null`

* * *

（在上面，我假设这`getHList()`是一个 getter `hMap`。但是，所写的方法不会编译，并且其声明的返回类型与 ... 的类型不匹配，`hMap`因此不清楚它的真正意图是*什么*去做。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T01:37:04.937

下面的行与 ConcurrentHashMap 无关。它只是创建一个 ConcurrentHashMap 对象的实例。就像在 JAVA 中同步任何对象创建一样。

`hMap=new ConcurrentHashMap<BigInteger, THost>();`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T01:46:56.567

双重检查锁定模式在 Java 1.5 之前被破坏（在 Java 1.6 及更高版本中效率低下）。见：[http ://www.cs.umd.edu/~pugh/java/memoryModel/DoubleCheckedLocking.html](http://www.cs.umd.edu/~pugh/java/memoryModel/DoubleCheckedLocking.html)

考虑使用按需初始化持有者或单元素枚举类型。

# javascript - 如何过滤数据库中的行

> ID：14595192
> 
> 赞同：0
> 
> 时间：2013-01-30T01:27:23.570
> 
> 标签：javascript, database, date, gettime

我这里有一小行代码......

```
 if(todaysDate!==date_encoded_time){
            str +='<div id='div_label'>'+recipe_arr[x].recipe_name+''+'</div>';
        }else {
        str +='<div id='div_label'>'+recipe_arr[x].recipe_name+'NEW ITEM'+'</div>';
        } 
```

对于 todaysDate，我得到当前日期或今天日期的值，对于 date_encoded_time，它是存储在数据库中的日期。我在这里尝试做的是当 todaysDate 匹配 date_encoded_time 时，它​​将显示在应用程序“NEW ITEM”上；但是每个项目都说“新项目”，那么我如何选择一个特定的行或显示一个特定的项目来告诉用户它是新的，使用 JS 而不是 PHP..？顺便说一句，它已经连接到我使用 AJAX 的数据库，但我只需要获取添加到数据库中的最新记录。

有什么想法吗？任何人？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T01:44:57.447

尝试在每个元素上嵌入一个特定的类并使用 jQuery 赶上它们。

我假设下面的代码是 PHP 代码。

```
if (todaysDate!==date_encoded_time){
    str +='<div id='div_label'>'+recipe_arr[x].recipe_name+''+'</div>';
}else {
    str +='<div id='div_label' class="theClass">'+recipe_arr[x].recipe_name'</div>';
} 
```

然后像这样通过 jQuery 拾取和操作它们。

```
<script type="javascript">
    $(".theClass").ready(function(){
        // Manipulation as you would like.
        $(this).html("NEW ITEM");
    });
</script> 
```

我没有检查该代码，但希望这会对您有所帮助。

# c# - 使用 C# [透明反射] 的流量隧道

> ID：14595196
> 
> 赞同：2
> 
> 时间：2013-01-30T01:27:51.883
> 
> 标签：c#, proxy, tunneling

[在此处](http://i.stack.imgur.com/jTYEF.png "Tnx 很多 :X")或[此处](http://ckhost.ir/images/92507656218417369092.png "Tnx 很多 :X")查看图片！

正如您在图片中看到的，EsetNOD 防病毒软件 (ekren.exe) 透明地将 IDM 流量重定向到 ekren.exe 正在侦听的端口 30606 并将其转发到远程主机。

[IDM.exe:{Local-30606}] <==>[{Local-30606}:ekren.exe:{Remote-XX}] <==>[{listen-XX}:R-App]

**首先**，EsetNOD 如何将 IDM 流量重定向到该端口，有什么技巧或者应该是系统挂钩或 ring0 权限？

ProxyFire 做同样的事情，您可以通过代理重定向所有应用程序流量。有没有办法处理所有网络（包括应用程序和服务）流量，比如使用应用程序作为网关？

**第二**，如何处理任何请求（https、dns、ssh、p2p等），是否可以检测一个app.exe请求并直接发送一些请求，一些通过隧道发送？

**第三**，任何帮助加密/压缩 TClinet 和 TServer 之间的流量以及反映本地应用程序（请求/响应）到/来自远程机器。

抱歉问了很多问题，非常感谢：x

# xml - 用 XSL-FO 样式表链接 XML 文档

> ID：14595198
> 
> 赞同：1
> 
> 时间：2013-01-30T01:28:18.670
> 
> 标签：xml, xslt, transformation, xsl-fo

XML 文档与 XSLT 样式表的链接可以通过以下方式完成：

```
<?xml-stylesheet type="text/xsl" href="foobar.xsl"?> 
```

放置在 XML 文档中。

如何将我的 XML 文档绑定到 XSL-FO 样式表？有没有类似的东西

```
<?xml-stylesheet type="text/xsl" href="foobar.fo"?> 
```

用于 XSL-FO 转换？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T08:34:34.177

就像您可以使用输出 HTML 的样式表在浏览器中进行转换一样，您也可以使用输出 XSL-FO 的样式表进行转换。但这不会是一件有意义的事情，因为 Web 浏览器不理解 XSL-FO 标记。

要从 XSL-FO 获得渲染输出（例如 PDF），您需要一个 FO 处理器。常规 Web 浏览器不附带 FO 处理器（对于可能的例外，请查看[X-Smiles](http://www.xsmiles.org/xsmiles_features.html#xslfo)；未经我测试）。

# php - 回声“ “.$值。” ";

> ID：14595199
> 
> 赞同：1
> 
> 时间：2013-01-30T01:28:21.207
> 
> 标签：php, html

好的，我第一次在这里提问。这在过去非常有帮助，但现在我迷路了。我试图通过一本书来了解 php 是如何工作的。所以我按照书中的说明进行了练习，结果如果不是应该的结果。

这是代码：

```
<div id="content">
    <p>Here's a record of everything in the REQUEST array:</p>
    <?php
    foreach($_REQUEST as $value) {
        echo "<p>" . $value . "</p>";
        }
        ?>
    </div>
    <div id="footer"></div>
</body> 
```

结果如下：

> 这是 REQUEST 数组中所有内容的记录：
> 
> ```
> " . $value . "
> "; } ?> 
> ```

为什么不显示它应该显示的信息？谢谢。

* * *

好的，这是所有代码：

显示请求信息.php

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
> "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> <html
> xmlns="http://www.w3.org/1999/xhtml"> <head> <meta
> http-equiv="Content-Type" content="text/html; charset=utf-8" /> <link
> href="/wamp/www/livrephp/css/phpMM.css" type="text/css"
> rel="stylesheet" />
> 
> <title>Untitled Document</title> </head>
> 
> <body>    <div id="header"><h1>PHP & MySQL: The Missing
> manual</h1></div>
>     <div id="example">Example 3-2</div>
>     
>     <div id="content">
>       <p>Here's a record of everything in the REQUEST array:</p>
>         <?php         foreach($_REQUEST as $value) {          echo "<p>" . $value . "</p>";           }           ?>
>             
>           
>         </div>
>         <div id="footer"></div> </body> </html> 
```

这与名为“socialEntryForm.php”的文件一起使用

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link href="/wamp/www/livrephp/css/phpMM.css" rel="stylesheet" type="text/css" />
<title>Untitled Document</title>
</head>

<body>
    <div id="header"><h1>PHP & MySQL: The misiing manual</h1></div>
    <div id="example">Example -1</div>

    <div id="content">
        <h1>Join the missing manual (Digital) Social Club</h1>
        <p>Please enter your online connections below:</p>
        <form action="../showRequestInfo.php" method="post">
            <fieldset>
            <label for="first_name">First Name:</label>
            <input type="text" name="first_name" size="20" /><br />
            <label for="last_name">Last Name:</label>
            <input type="text" name="last_name" size="20" /><br />
            <label for="email">Email Address:</label>
            <input type="text" name="email" size="50" /><br />
            <label for="facebook_url">Facebook URL:</label>
            <input type="text" name="facebook_url" size="50" /><br />
            <label for="twitter_handle">Twitter Handle:</label>
            <input type="text" name="twitter_handle" size="50" /><br />
            </fieldset>
            <br />
            <fieldset class="center">
                <input type="submit" value="Join The Club" />
                <input type="reset" value="Clear and Restart" />
            </fieldset>
          </form>
     </div>

     <div id="footer"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-30T01:40:02.013

您确定您的文件是 PHP 文件并且它正在启用 PHP 的服务器上运行吗？浏览器似乎正在接收未解析的代码，认为有一个标签从第一个标签开始`<?php`并结束`<p>`。如果您查看源代码，您可能会看到您的 PHP 代码，没有被服务器修改。

换句话说：您的代码是正确的，问题出在您的文件类型或服务器配置上。如果您*确实*在您的机器上使用服务器，请确保您运行的文件是正确的，例如，如果它在根目录中，则 open`http://localhost/your_file.php`和 not `C:\xampp\htdocs\your_file.php`。

**编辑：**只是为了它，我用[fiddle](http://jsfiddle.net/9j8c8/)复制了你的问题。我得到了和你完全相同的输出，这意味着它没有被服务器解析。谁说 JSFiddle 只对 JavaScript 有用？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T01:44:42.073

`$_REQUEST`包含从 cookie 收集的数据，`$_POST`并且`$_GET`.. 您确定您的数据已正确分配吗？

举这个例子。

`print_r($_REQUEST);` 只是在没有 no 的情况下这样做`<form method="get/post">`会产生一个空白数组，这可能就是你什么都得不到的原因

你的片段是正确的..你缺少一个 html 表单来配合它..

例子：

```
<form method="POST">
<input type="submit" name="test" value="ThisIsCorrect">
</form> 
```

使用您的代码，您已经显示了您的问题..您的`$_REQUEST`数组将返回按钮的值。在这种情况下“ThisIsCorrect”

* * *

道德这个？

确保在调用 $_REQUEST 之前使用 post/get/cookies，并且为了将来参考，仅使用 $_POST 和 $_GET 会更干净。但这取决于我的个人喜好。

* * *

$_REQUEST 数组是如何构造的？

考虑一下：

该数组将包含`name`作为数组键和值作为值..

所以考虑到这一点：

```
<form method="POST">
<input type="text" name="username">
<input type="submit" name="test" value="ThisIsCorrect">
</form> 
```

对于您的文本框和提交按钮，数组将是：

`array ("username" => "UserInputData", "test" => "ThisIsCorrect");`

# javascript - 从同一个表单提交访问 Python 和 JavaScript 代码

> ID：14595203
> 
> 赞同：0
> 
> 时间：2013-01-30T01:28:52.320
> 
> 标签：javascript, python, html, get

我正在用 Python 编写一个 Web 应用程序。我有一个表单，输入两个用户指定的条目，一个是文本字段，另一个是选择。提交后，我获取这些条目并将它们存储到数据库中，稍后会对其进行查询和发布。无论如何，它需要 JavaScript 来获取我需要的用户坐标，并且我已经将 JavaScript 嵌入到我的模板中，并且应该将坐标输入到“隐藏”输入字段中。我似乎无法使用标准调用（使用 GAE 和 Python）调用并成功检索这些元素的内容

```
latitude = self.request.get("latitude")
longitude = self.request.get("longitude") 
```

这是嵌入的 JavaScript 和表单输入元素：

```
 <script>
   function get_location()      {
                            if (navigator.geolocation)      {
                            navigator.geolocation.getCurrentPositon(showPosition);
                            } else {
                                    alert('It appears geolocation isnt enabled.');
                            }
                    }
                    function showPosition(position)
                            {
                            $("#latitude").val(position.coords.latitude);
                            $("#longitude").val(position.coords.longitude);
                    }
    </script>

    <input type="hidden" name="latitude" id="latitude" />
    <input type="hidden" name="longitude" id="longitude" />
    <br>
    <input type="submit" onclick="get_location()" value="Update"> 
```

仅供参考，这都在同一个表格中。因此，理论上，这应该是生成用户的纬度和经度，然后将这些值传递给他们各自的输入字段。有什么明显的原因这不起作用吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T01:31:02.737

`getCurrentPosition()`是异步的。在您提交表单之前它可能尚未完成，因此未填写字段值。

解决该问题的一种方法是在`getCurrentPosition()`完成并调用`showPosition()`. 为此，您需要通过在 onclick 处理程序中返回并返回该返回值来阻止默认表单提交，然后在设置隐藏位置字段后以编程方式提交`false`表单。`get_location()``showPosition()`

解决该问题的另一种方法是在最初显示表单时填写当前位置，而不是等到您尝试提交它。

仅供参考，请参阅[Uncaught ReferenceError: lat is not defined](https://stackoverflow.com/questions/14594157/uncaught-referenceerror-lat-is-not-defined/14594292#14594292) for others have a similar problem today with the asynchronous nature of `getCurrentPosition()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T05:51:24.707

从提交按钮中消除函数调用并利用以下方法效果很好。

```
 <script>
    window.onload=get_location ;
    </script>
</body> 
```

# qt - OpenGL，QT的纹理坐标问题

> ID：14595204
> 
> 赞同：0
> 
> 时间：2013-01-30T01:28:54.797
> 
> 标签：qt, opengl, textures, texture-mapping

无论我使用什么纹理坐标，都只会显示左下角的像素（矩形是纯色的）。

这里我设置了纹理坐标：

```
glMatrixMode(GL_TEXTURE);
glPushMatrix();
glLoadIdentity();
glTranslatef(0.5,0.0,0.0); //Have no effect

glMatrixMode(GL_MODELVIEW);
glPushMatrix();

...

glEnable(GL_TEXTURE_2D);
glBindTexture(GL_TEXTURE_2D, texture);

glBegin(GL_QUADS);

glTexCoord2f(0, 1);
glVertex2f(0, 0);

glTexCoord2f(0, 0);
glVertex2f(0, 1);

glTexCoord2f(1, 0);
glVertex2f(1, 1);

glTexCoord2f(1, 1);
glVertex2f(1, 0);

glEnd(); 
```

这是非常严重的。它在两个不同的 QGLWidget 中呈现。在一个小部件中，纹理看起来很好，而在另一个小部件中，我只得到左下角的像素。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T02:35:40.737

我发现了错误。我认为在两个小部件的两个渲染过程之间的任何地方，都设置了 GL_TEXTURE_RECTANGLE_NV 标志。我以为 glEnable(GL_TEXTURE_2D); 自动禁用 GL_TEXTURE_RECTANGLE_NV 标志。但似乎不是。

所以以下解决了我的问题：

```
glDisable(GL_TEXTURE_RECTANGLE_NV); 
```

# asp.net-mvc-3 - 多对多关系的剃刀视图

> ID：14595211
> 
> 赞同：2
> 
> 时间：2013-01-30T01:30:01.383
> 
> 标签：asp.net-mvc-3, entity-framework, razor

我对 Razor 的观点有一个非常基本的问题。

我想为此模型创建一个视图以进行创建和删除。

型号如下

```
public class RolePriviledgeModel
{
    [Key]
    public int RolePriviledgeId { get; set; }
    public RoleModel Role { get; set; }
    public PriviledgeModel Priviledge { get; set; }
    public ICollection<PriviledgeModel> Priviledges { get; set; }

} 
```

我希望有两个下拉列表框用于在视图上选择用户 ID 和角色 ID。

如何从 DB Context 中获取角色 ID 和权限 ID，以及在哪里使用该功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T04:33:02.557

创建一个 ViewModel，它将以用户和特权作为其属性。在您的控制器中，从数据库中获取数据，填充视图模型，最后将其发送到视图。您的视图可以使用 '@Html.DropDownListFor()' 方法显示下拉列表框。例如：

## 你的视图模型

```
 public class UserRoleViewModel
   {
    int userId {get;set;}
    SelectList Users{get;set;};
    int RoldeId {get;set;}
    SelectList Roles{get;set;}    
   } 
```

## 在您的控制器中：

```
UserRoleViewModel urvm=new UserRoleViewModel();
urvm.users= new SelectList(db.Users.ToList(), "UserId","UserName");
urvm.Roles= new SelectList(db.Roles.ToList(),"RoleId","RoleName");
return View(urvm); 
```

## 在你看来

```
@Html.DropDownListFor(model => model.UserId, Model.Users);
@Html.DropDownListFor(model => model.RoleId, Model.Roles); 
```

希望这可以帮助。祝你好运

# java - Java Android Rectangle.intersects 在循环中无法正常工作

> ID：14595213
> 
> 赞同：1
> 
> 时间：2013-01-30T01:30:18.563
> 
> 标签：java, android, intersection, rectangles

我正在制造爆炸。爆炸应该击中其矩形（x，y，x + w，y + h）内的所有敌人。爆炸和敌人都继承自 Sprite 类，该类具有返回其矩形的 getBounds() 方法。当我创建爆炸项目时，我在构造函数中循环遍历敌人以检查矩形是否与 rectangle.intersects(rectangle2) 相交。但似乎当有多个目标应该相交时，有时检查会忽略其中一些......

下面是一些代码：在类Explosion的构造函数中，继承类Sprite

```
 List<Zombie> zombies = mGamePlay.getZombieHandeler().getZombies();
    Rect r = getBounds();

    for(int i = 0; i < zombies.size(); i++)
    {
        Rect zR = zombies.get(i).getAnimation().getBounds();

        if(!zombies.get(i).isDead() && r.intersect(zR))
            zombies.get(i).doDamage(new int[]{damage, 0, 0});
    } 
```

内部类 Sprite：

```
public Rect getBounds()
{
    return new Rect(mPosX, mPosY, mPosX + mWidth, mPosY + mHeight);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T01:53:31.660

`Rect.intersect()`将修改源矩形并将其设置为两个矩形的交点（如果它们相交）。这在 javadoc 中有所提及。这意味着在第一次成功的相交测试之后，后续的相交测试可能会失败（它们只会通过与原始相交矩形相交的僵尸。）

相反，您应该使用`Rect.intersects()`（末尾带有“s”。）

# ios - 使用 ASIHTTPRequest 获得收据验证的问题

> ID：14595218
> 
> 赞同：0
> 
> 时间：2013-01-30T01:30:59.583
> 
> 标签：ios, in-app-purchase, asihttprequest, storekit

我正在尝试使用 Apple 的沙盒服务器验证不可更新的订阅，但不断返回`verify response: { "status":21002 }`，这意味着请求格式不正确。这是我正在使用的相关代码：

```
 NSString *receiptString = [[NSString alloc] initWithData:transactionReceipt
                                                    encoding:NSUTF8StringEncoding];
    NSString *encodedString = [receiptString base64Encoding];
    NSString *jsonString = [NSString stringWithFormat:@"{ 'receipt-data' : '%@' }", encodedString];

    NSURL *verificationURL = [NSURL URLWithString:@"https://sandbox.itunes.apple.com/verifyReceipt"];
    __block ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:verificationURL];
    [request appendPostData:[jsonString dataUsingEncoding:NSUTF8StringEncoding]];
    [request setRequestMethod:@"POST"];
    [request setCompletionBlock:^{
        NSString *responseString = [request responseString];
        NSLog(@"verify response: %@", responseString);
    }];
    [request setFailedBlock:^{
        NSError *error = [request error];
        NSLog(@"verify error: %@", [error description]);
    }];
    [request startAsynchronous]; 
```

显然问题是我通过 ASIHTTPRequest 库向 Apple 发送数据的方式。对此的任何见解表示赞赏。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T05:11:13.373

尝试使用其他代码。例子，

[IAP_Validation](https://github.com/evands/iap_validation)

# django - 一天，一周，所有时间的顶级用户 - 最佳实施方式？

> ID：14595220
> 
> 赞同：1
> 
> 时间：2013-01-30T01:31:06.230
> 
> 标签：django, database-design, web-applications

假设我网站上的每个用户的分数随着他们使用该网站（如 Stackoverflow）而增加，并且我`score`在每个用户的用户配置文件表中存储了一个字段。

获得有史以来排名前 10 的用户很容易，只需按`score`列排序即可。

我想要“今天前 10 名”、“本周前 10 名”、“有史以来前 10 名”。

实现这一点的最佳方法是什么？我需要用时间戳存储每一个分数变化吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T08:47:38.893

You would have to have a table that stored the increments and use a timestamp. I.E.

```
CREATE TABLE ScoreIncreases (
             PrimaryKey UNIQUEIDENTIFIER, 
             UserId UNIQUEIDENTIFIER, 
             ScoreIncrease INT,
             CreatedDate DATETIME) 
```

Your query would then be something like

```
SELECT TOP 1 u.PrimaryKey, SUM(ScoreIncrease)
FROM Users u
INNER JOIN ScoreIncreases si ON si.Userid=u.PrimaryKey
WHERE DATEDIFF(day,si.CreatedDate,GETDATE()) = 0
GROUP BY u.PrimaryKey
ORDER BY SUM(ScoreIncrease) DESC 
```

# jquery - 在 JQuery 中淡化动态加载的内容

> ID：14595221
> 
> 赞同：1
> 
> 时间：2013-01-30T01:31:09.537
> 
> 标签：jquery

我目前正在开发一个简单的网站，并且正在尝试设置一个简单的幻灯片放映，该幻灯片从一个图像淡入到另一个图像。我目前设置它的方式将使用 JQuery 将文件夹中的所有图像（动态）加载到 html 中。

我有它，以便它获取图像名称列表（通过 php），然后为每个图像添加 html（图像只是每个图像名称的数组）：

```
for(var i = 0; i < images.length; i++) {
    $('#slideshow').append('<img id="\"slide' + i + '\"" src="animations/' + images[i] + '" style=\"display: none;\"/>');
} 
```

然后它调用这个方法，该方法应该开始（并继续）循环它们。我让它在没有动态加载的图像的情况下工作，但是看到你不能使用动态内容的 .css 或 .fadeIn 我被卡住了

```
function countDown() {
    setTimeout(countDown, 4000);
    lastSlideNum = count;
    count++;
    if(count > images.length)
        count = 0;
    currentSlideNum = count;

    //This next part never gets called  because it can't access the dynamically created img
    $("#slide" + lastSlideNum).fadeOut('slow', function() { 
        $(this).css("display", "none");
        $("#slide" + currentSlideNum).fadeIn('slow');
    });
} 
```

我意识到这可能不是漂亮或最简单的做事方式，但任何关于此的建议都会有很大帮助。请记住，我对 JQuery 还是很陌生，所以如果有更简单的方法，请告诉我。

TL;DR：淡入淡出动态加载的内容有什么解决方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T01:50:38.173

在这里试试我的演示：http: [//jsfiddle.net/QAa7a/](http://jsfiddle.net/QAa7a/)

这个想法是使用 $("#slideshow img:nth-child(" + lastSlideNum + ")") 进行查询：

```
function countDown() {
    setTimeout(countDown, 4000);
    lastSlideNum = count + 1;
    count++;
    if(count >= images.length)
        count = 0;
    currentSlideNum = count + 1;

    //This next part never gets called  because it can't access the dynamically created img
    console.log(lastSlideNum + "?" + $("#slide" + lastSlideNum).length);
    $("#slideshow img:nth-child(" + lastSlideNum + ")").fadeOut('slow', function() { 
        $(this).css("display", "none");
        $("#slideshow img:nth-child(" + currentSlideNum + ")").fadeIn('slow');
    });
} 
```

如果您不熟悉 nth-child 选择器，请查看此链接：http: [//api.jquery.com/nth-child-selector/](http://api.jquery.com/nth-child-selector/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T01:50:31.810

您并没有以非常 jQuery 的方式处理所有索引号等。你可以在这里大大简化。没有理由不能访问使用 jQuery 动态添加到 DOM 的元素。

```
for(var i = 0; i < images.length; i++) {
    $('#slideshow').append('<img class="rotating_image" src="animations/' + images[i] + '" style="display: none;"/>');
}

var slide_interval = 4000;
continue = true;
while (continue === true) {
    $('.rotating_image').each( function() {
        $(this).fadeIn('slow').delay(slide_interval).fadeOut('slow');
    });
} 
```

# objective-c - 无法将图像加载到 UIImage

> ID：14595224
> 
> 赞同：0
> 
> 时间：2013-01-30T01:31:57.113
> 
> 标签：objective-c, xcode, ios6, uiimage

我在 Amazon S3 服务上有两张图片。一个加载正常，另一个不加载。没有错误消息。它只是不加载。

```
[doodleImageView setImageWithURL:@"https://s3.amazonaws.com/doodlestash/doodles/20/thumb.jpg"];

 //This one does not load.
[doodleImageView setImageWithURL:@"https://s3.amazonaws.com/doodlestash/doodles/20/original.jpg"]; 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T01:44:33.723

图像确实看起来都是“有效的”。您可能需要仔细检查您正在使用的库并检查拼写错误。在一个快速演示应用程序中，我执行了以下操作：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    UIImageView* image1 = [[UIImageView alloc]initWithFrame:CGRectMake(0, 0, 320, 200)];
    image1.image = [UIImage imageWithData: [NSData dataWithContentsOfURL:[NSURL URLWithString:@"https://s3.amazonaws.com/doodlestash/doodles/20/original.jpg"]]];

    UIImageView* image2 = [[UIImageView alloc]initWithFrame:CGRectMake(0, 200, 320, 200)];
    image2.image = [UIImage imageWithData: [NSData dataWithContentsOfURL:[NSURL URLWithString:@"https://s3.amazonaws.com/doodlestash/doodles/20/thumb.jpg"]]];

    [self.view addSubview:image1];
    [self.view addSubview:image2];
} 
```

我最终得到了这个：

![在此处输入图像描述](../Images/1c7fe678f12af8bcd05aa0b4a24d8662.png)

# java - Java Scanner No Line Found，不等待用户输入

> ID：14595227
> 
> 赞同：1
> 
> 时间：2013-01-30T01:32:32.940
> 
> 标签：java, loops, input, char

我在让我的 Scanner 对象读取用户输入时遇到问题。我希望扫描仪读取用户输入并将输入保存到字节数组中。

如果我使用以下代码：

```
import java.util.Scanner;

public class ExamTaker {
    public static void main(String[] args) {
        // Variable Declaration
        char[] studentTest = new char[20];

        // Input Setup
        Scanner keyboard = new Scanner(System.in);

        // Take the test
        for (int i = 0; i < studentTest.length; i++) {
            System.out.print("\nAnswer " + (i+1) + " : ");
            studentTest[i] = keyboard.nextLine().charAt(0); // The troubled line
        }
    }
} 
```

我得到如下异常错误：

```
Answer 1 : Exception in thread "main" java.util.NoSuchElementException: No line found
    at java.util.Scanner.nextLine(Unknown Source)
    at ExamTaker.main(ExamTaker.java:14) 
```

通过 Stack Overflow 和 Google 进行研究后，我接受了将我的问题行放入 try-catch 的建议，如下所示：

```
// Take the test
        for (int i = 0; i < studentTest.length; i++) {
            System.out.print("\nAnswer " + (i+1) + " : ");
            try {
                studentTest[i] = keyboard.nextLine().charAt(0);
            }
            catch (Exception e) {
                System.out.print("Exception found");
            }
        } 
```

但是，对于我认为使用 nextLine() 方法的方式存在问题，这仍然不会产生所需的输出。它只是在每个编号的答案前面抛出“发现异常”文字。

我还尝试将 for 循环更改为 do-while 循环，并在 keyboard.getChar() 中折腾以防它没有到达行尾，但无济于事。

在这种情况下，如何让用户输入一个字符串，在该字符串中取第一个字符并将其分配给我的 char 数组？在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T01:36:46.547

**[Scanner#nextLine()](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html#nextLine%28%29)**在找不到行时抛出`NoSuchElementException`，您可能应该在调用 之前调用**[Scanner#hasNextLine()](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html#nextLine%28%29)**`nextLine()`以确保扫描仪中存在下一行。

```
 for (int i = 0; i < studentTest.length; i++) {
            System.out.print("\nAnswer " + (i+1) + " : ");
            if(keyboard.hasNextLine()){
                studentTest[i] = keyboard.nextLine().charAt(0); // The troubled line
             }
        } 
```

另外，我看到您只想从扫描仪中获取用户输入，为什么不直接使用**[Scanner#next()](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html#next%28%29)**

```
for (int i = 0; i < studentTest.length; i++) {
            System.out.print("\nAnswer " + (i+1) + " : ");
            studentTest[i] = keyboard.next().charAt(0); // The troubled line
        } 
```

# assembly - 汇编语言 st 和 ld

> ID：14595229
> 
> 赞同：1
> 
> 时间：2013-01-30T01:32:53.277
> 
> 标签：assembly, memory, sparc, risc

我已将 ac 程序转换为汇编程序，并试图简化代码：

```
.global Func1
Func1: save %sp, -112, %sp
!st %i0, [%fp+68]
!st %i1, [%fp+72]
!ld [%fp+68], %o0
!ld [%fp+72], %o1
call    Func2, 0
nop
mov %o0, %g1
mov %g1, %i0
ret
restore

.global Func2
Func2: save %sp, -112, %sp
!st %i0, [%fp+68]
!st %i1, [%fp+72]
!ld [%fp+68], %g2
!ld [%fp+72], %g1
add %g2, %g1, %g1
umul    %g1, 2, %g1
mov %g1, %i0
ret
restore 
```

我已经将它简化到当我尝试更改某些内容时，它会更改程序的返回值。我的问题是，st 和 ld 是做什么的？我知道他们的意思，但这里到底发生了什么？仅使用 mov 或其他方法是否有其他方法可以做到这一点？很难在网上找到这类事情的资源，因此我们将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T14:23:36.127

Sparc 具有不同于 x86 的加载存储架构，并且类似于大多数 RISC cpu 架构，例如 PPC、MIPS 和 ARM。

`ld`并且`st`是唯一将数据移入和移出主存储器的真实（如在硬件中实现的）指令。它们还用于访问将自身呈现为内存接口的硬件。

他们的语法是

`ld register_name , memory_location`相同的语法适用于`st`.

请记住，您只能在内存中的值上使用 ld 和 st ……其余的都适用于寄存器文件。如果你还没有加载它，它就不能使用，如果你从来没有存储它，它就不会在内存中（除非你在寄存器文件中覆盖它，它仍然在那里）。

如果您需要有关 Sparc ASM 的书籍，请参阅“计算机组织和设计基础”，您可以在 google 书籍上查看其中的部分内容。另请注意，x86 (CISC) asm 与类似 RISC 的 asm 非常不同。也就是说，与您相关的内容取决于您是否更喜欢纯软件人员 Sparc 很好（它将类似于许多类型的编译器中间表示），但如果您对微调高性能应用程序感兴趣，您可能更愿意学习 x86 asm .

# drupal - 将 Symfony2 集成到 Drupal 5 系统

> ID：14595232
> 
> 赞同：1
> 
> 时间：2013-01-30T01:33:04.557
> 
> 标签：drupal, symfony

我们有一个由 Drupal 5 构建的 5 年历史的系统。它不是一个小系统（大约 50K 行代码），并且大部分功能与“内容管理”无关。

出于这个原因，我们正在考虑将 Symfony2 集成到我们当前的系统中。理想的做法是在使用 Symfony2 开发新功能的同时继续使用当前代码来实现当前功能。慢慢地，我们会将越来越多的代码从 Drupal 转移到 Symfony。

我的问题是你如何建议实施这个？我虽然关于以下方法：

1.  在 Drupal 中创建一个模块。该模块将包含 Symfony 文件并将加载 Symfony 的类加载器。以前有人这样做过吗？我应该注意一些重要的事情吗？

2.  创建一个单独的 Symfony 安装，并希望创建一个指向网站中某些页面的不同虚拟主机记录。据我所知，我可以将 vhost 配置为当前主机的子主机（例如 mysymfony.mydrupal.com）。但我无法将其配置为指向同一域中的特定路径（mydrupal.com/mysymfony.php）。这是真的？在这种方法中，那些使用 Symfony 的页面的性能会更好，因为它不需要 Drupal 引导程序。

3.  还有其他建议吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T01:51:15.100

请注意，如果您想在同一台机器上运行 Symfony2，您可能必须在运行 Drupal 的机器上升级您的 PHP 版本（任何低于 5.3.8 的机器都会反对）。如果您想坚持使用 Drupal，您可能还想坚持一下[——Drupal 8 正在集成 Symfony2 组件](http://symfony.com/blog/symfony2-meets-drupal-8)。此外，还有一个Symfony2的[内容管理框架（无论如何都是 beta 形式）。](http://cmf.symfony.com/)

关于虚拟主机，您是正确的 - 您将虚拟主机指向目录，而不是文件。但是，如果需要，您可以创建一个重写规则来重定向到特定页面（查看 Symfony 发行版中 web/ 目录中包含的 .htaccess 文件 - 默认情况下，它将请求重定向到 app.php）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T01:54:46.787

因为我是新来的，所以帖子中的链接不能超过两个。我也想说：

[如果现有的捆绑](http://sonata-project.org/bundles/page/master/doc/index.html)软件都不能满足您的需求，我将开始重写核心功能（用户、权限等） 。除了搜索 github，您还可以尝试[knpbundles.com](http://www.knpbundles.com)来查找解决类似问题的捆绑包。

# networking - 在 vbscript 中显示另一台计算机上的消息框？

> ID：14595233
> 
> 赞同：1
> 
> 时间：2013-01-30T01:33:10.377
> 
> 标签：networking, vbscript

如何在 vbscript 中在网络中正在运行的计算机上显示消息框？我到处搜索，但没有得到任何答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T21:29:04.463

也许这对于 VBScript 来说是一个有点高级的问题，但是由于 WSH 允许远程脚本，因此它可能是[WSHController](http://msdn.microsoft.com/en-us/library/xk7bxb0d%28v=vs.84%29.aspx)的任务。当然，它需要适当的配置，[本文](http://www.windowsitpro.com/article/windows-script-host-wsh/rem-getting-the-wshcontroller-object-to-work-23607)展示了设置此对象的一些步骤，[Microsoft 的 Windows Script 5.6 文档](http://www.microsoft.com/en-us/download/details.aspx?id=2764)提供了更多详细信息。

有一些限制不允许在远程脚本中进行 UI 交互（如 MsgBox、InputBox 等），但这可以*通过*使用`FileSystemObject`.

您将需要 2 个脚本，一个从您的控制器计算机上运行（我将其命名为*RemoteScript.vbs*），另一个您将复制到目标计算机（*Messenger.wsf*）。我将在这里的一个块中发布整个代码，但是您需要将每个部分复制到单独的文件中。

```
REM ----------- RemoteScript.vbs code start here -------------

Const WshFinished = 2

Dim Controller, RemoteScript, RemoteServer
RemoteServer = "\\server_name"

Set Controller = WScript.CreateObject("WSHController")
Set RemoteScript = Controller.CreateScript("Messenger.wsf", RemoteServer)

WScript.ConnectObject RemoteScript, "WSH_"
RemoteScript.Execute

Do While RemoteScript.Status <> WshFinished 
    WScript.Sleep 200
Loop

WScript.DisconnectObject RemoteScript

Sub WSH_Error
    With RemoteScript.Error
        WScript.Echo "Error " & _
        CStr(Hex(.Number)) & " - Line: " & .Line & _
        ", Char: " & .Character & vbCrLf & _
        "Description: " & .Description
    End With
    WScript.Quit -1
End Sub

Function WSH_End()
    MsgBox "wshRemote End Event fired"
End Function

Function WSH_Start()
    MsgBox "wshRemote Start Event fired"
End Function

REM ----------- RemoteScript.vbs code end here ---------------

REM ----------- Messenger.wsf code start here ----------------

<package>
  <job>
    <script language="VBScript">
      tmpFile = "c:\_tmp711a.vbs"
      Set fso = CreateObject("Scripting.FileSystemObject")
      Set fout = fso.CreateTextFile(tmpFile, true)
      fout.WriteLine "MsgBox ""Remote Hello"", 0, ""Example"" "
      fout.Close
      WScript.Sleep 100
      Set shell = CreateObject("WScript.Shell")
      shell.Run "wscript " & tmpFile, 1, True
      If fso.FileExists(tmpFile) Then fso.DeleteFile(tmpFile)
    </script>
  </job>
</package>

REM ----------- Messenger.wsf code end here ---------------- 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T08:32:55.993

您可以使用以下 Windows 命令：

*   [`net send`](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/net_send.mspx?mfr=true)（Windows Vista 及更高版本不支持；需要运行 Messenger 服务）
*   [`msg`](http://technet.microsoft.com/en-us/library/cc771903%28v=ws.10%29.aspx)（仅限终端服务器用户）

您可以使用 VBScript 执行这些命令[`WshShell.Run`](http://msdn.microsoft.com/en-us/library/d5fk67ky%28v=vs.84%29.aspx)，例如：

```
CreateObject("WScript.Shell").Run("net send computername Hello, world!") 
```

# objective-c - Objective-C 快速枚举搜索不会中断

> ID：14595234
> 
> 赞同：0
> 
> 时间：2013-01-30T01:33:14.557
> 
> 标签：objective-c, cocoa, fast-enumeration

我试图在树中找到匹配的对象，所以我使用的是 ObjC 快速枚举。问题是我的方法找到匹配的值，点击返回线，然后将值设置为 nil 并继续迭代。这是我的方法：

```
+ (INONode *)findByUUID:(NSString*)uuid fromRootNode:(INONode*)node
{    
    for (INONode * childNode in [node children]) {
        if ([[node uniqueID] isEqualToString:uuid]) {
            break;
        }
        else {
            [INONode findByUUID:uuid fromRootNode:childNode];
        }
    }

    return node;
} 
```

当我通过设置断点来跟踪代码执行时，中断被击中，然后转到返回行，然后返回到继续迭代的语句。我在这里想念什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T01:38:59.007

由于您的方法是递归的，因此`return`将您返回到循环中的`else`分支`if`并继续搜索。

它当前的实现方式，你的方法只会返回传递给它的节点。唯一的`return`语句是`return node`, 并且`node`永远不会被修改。

这是您可以做到的一种方法：

```
+ (INONode *)findByUUID:(NSString*)uuid fromRootNode:(INONode*)node
{   
    // Check the root node
    if ([[node uniqueID] isEqualToString:uuid]) {
        return node;
    }

    // Check each child
    for (INONode * childNode in [node children]) {
        node = [INONode findByUUID:uuid fromRootNode:childNode];
        if (node) {
            return node;
        }
    }

    return nil;
} 
```

# c - 输入重定向不起作用？

> ID：14595235
> 
> 赞同：2
> 
> 时间：2013-01-30T01:33:15.933
> 
> 标签：c

我的指示：编写一个重复（直到文件结束）从输入流中读取字符的程序。如果字符为大写，则将其更改为小写并将其写入输出流。对于所有其他字符，将字符原封不动地写入输出流。使用 getchar() 进行输入，使用 putchar() 进行输出，使用输入重定向将输入文件连接到程序

我的项目名称是 Input，我的文本文件是 input.txt。当我运行它时，我输入“Input < input.txt”该程序只是在命令窗口上模仿它，那么我如何让它从文本文件中读取呢？

```
#include <stdio.h>
#include <stdlib.h>
#include <ctype.h>

int main()
{
  char c, x;

   c=getchar();

  while (c != EOF)
 {

    c=getchar();
     x = tolower(c);
     if (isupper(c))
    {
        putchar(x);

    }
    else 
    {
        putchar(c);

    }

 }
    system("Pause");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T03:04:27.227

*仅对 ASCII 文本*执行此操作的惯用方式是：

```
#include <stdio.h>
#include <stdlib.h>
#include <ctype.h>

int main()
{
    int c;

    while((c = getchar()) != EOF)
        putchar(tolower(c));

    exit(EXIT_SUCCESS);
} 
```

正如教科书喜欢说的那样，*UTF-8 留给读者作为一个简单的练习*；-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T01:40:08.427

我相信问题是你不想去程序并输入`Input < input.txt`. 相反，您想打开一个终端程序，将目录更改为包含项目的目录，然后在命令行中通过编写`Input < input.txt`. 这会启动程序并将 的内容`input.txt`用作标准输入流，而不是从控制台读取文本。

也就是说，您的代码中有两个错误。首先，请注意你有这条线

```
c = getchar(); 
```

在执行输入读取的循环之外。然后您立即致电

```
c = getchar(); 
```

再次在循环内。这意味着您正在丢弃您读入的第一个字符。

其次，您的循环运行的次数比它需要的多一次。如果第二次调用`getchar()`返回`EOF`，则在当前循环迭代完成之前不会检测到这一点。这是因为您的检查`EOF`位于循环的顶部，直到您打印出`EOF`字符后才能到达。要解决此问题，请考虑使用循环和半成语并在中间中断循环：

```
for (;;) {
    /* Read data. */
    if (/* no data left */) break;

    /* Process data. */
} 
```

从风格上讲，您确定这里需要`if`和`else`分支吗？回想一下，`tolower`不会更改非大写字符的值，因此为大写字母设置一种情况，为小写字母设置一种情况是多余的。您可以在`tolower`没有特殊情况的情况下输出生成的字符。

希望这可以帮助！

# javascript - JavaScript - 无法获取表单输入值

> ID：14595236
> 
> 赞同：1
> 
> 时间：2013-01-30T01:33:21.530
> 
> 标签：javascript

当用户在文本字段中输入文本并单击提交按钮时，他们的文本应该出现在屏幕上。现在什么都没有显示。

JS 斌：http: [//jsbin.com/itotub/1/edit](http://jsbin.com/itotub/1/edit)

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Untitled Document</title>
<script>
function myOnloadFunc() {
    var inputAnswer = document.getElementById("inputAnswer");
    var userAnswer = inputAnswer.innerHTML;

    var submitButton = document.getElementById("submitButton");

    submitButton.onclick = function() {
        document.write(userAnswer);
    };
}

window.onload = myOnloadFunc;
</script>
</head>

<body>
<input type="text" id="inputAnswer" placeholder="Enter your answer">
<input type="button" id="submitButton" value=">">
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T01:37:10.537

一个`input`元素没有任何后代，因此`.innerHTML`返回一个空字符串。如果您想获取该值，则必须访问该`.value`属性（有关更多信息，请参阅[`HTMLInputElement`MDN 上的文档](https://developer.mozilla.org/en-US/docs/DOM/HTMLInputElement)）。

另一个问题是您试图在用户实际输入任何内容*之前获取值。*您不想在*页面加载*时获取值，但是当用户*单击按钮*时：

```
submitButton.onclick = function() {
    console.log(inputAnswer.value);
    // or alert(inputAnswer.value);
}; 
```

* * *

我会避免使用`document.write`，即使它仅用于测试目的。至少[了解在加载 DOM 后调用它会发生什么](https://developer.mozilla.org/en-US/docs/DOM/document.write#Notes)。

# c++ - 当使用矢量数学将某物移动到某个点时，敌人到达那里然后消失

> ID：14595237
> 
> 赞同：1
> 
> 时间：2013-01-30T01:33:28.447
> 
> 标签：c++, sdl

我一直在尝试使用向量以一定角度移动对象，并且确实可以正常工作，但是，当我尝试将对象移动到特定点时，它会到达那里然后消失。在我的代码中，我测试它是否会在下一步中到达目的地，如果会，我将其捕捉到目的地。

```
void Dot::moveToVector(Vector& vec)
{
    float dx;
    float dy;

    dx = vec.X - position.X;
    dy = vec.Y - position.Y;

    Vector distanceVec(dx, dy);

    float distance = distanceVec.Length();

    float scale;

    scale = speed / distance;

    velocity.X = dx * scale;
    velocity.Y = dy * scale;

    if(velocity.X < scale || velocity.Y < scale)
    {
        velocity.X = 0;
        velocity.Y = 0;

        position.X = vec.X;
        position.Y = vec.Y;
    }

    move();
} 
```

当我调试它时，它卡入位置后的一帧，位置的 x 和 y 值 = -nan(0x400000)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T01:56:32.543

```
scale = speed / distance; 
```

如果`distance == 0`你认为会发生什么？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T01:57:46.333

当您的对象到达目标位置时，距离变为零。然后你除以距离。我怀疑这就是你的对象消失的原因！

这是一种更直接的设置方法：

```
void Dot::moveToVector(Vector& vec)
{
    Vector distanceVec = vec - position;
    float distance = distanceVec.Length();

    if(distance <= speed)
    {
        velocity.X = 0;
        velocity.Y = 0;

        position.X = vec.X;
        position.Y = vec.Y;
    }
    else
    {
        Vector direction = (distanceVec / distance);
        velocity = direction * speed;        
    }

    move();
} 
```

# mysql - SELECT * 但也使用 CAST()

> ID：14595241
> 
> 赞同：4
> 
> 时间：2013-01-30T01:33:53.667
> 
> 标签：mysql, sql, casting

我正在尝试从我的 MySQL 表中选择多行的所有字段。我的一个字段被调用`publication_date`，它存储了一个字符串，表示将在我们的网站上发布特定行的日期。它以`mm/dd/yyyy`格式存储。

我知道我可以`DATE`使用 CAST 将该字段转换为数据类型，但我不确定如何获取其他字段的数据。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T01:36:36.220

只需将该列添加到您的`SELECT`子句中即可`*`。确保给它一个别名，以便您可以将它与常规日期时间字段区分开来。

```
SELECT *
     , CAST(datefield AS date) AS aliasname
  FROM tablename 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T01:39:45.480

你可以做 ：

```
Select *,cast(publication_date as char) as newPublicationdate from tableName 
```

或者，如果您的表格没有很多列，最好全部输入

```
 Select column1,column2,cast(publication_date as char) as publication_date from tableName 
```

问候

# javascript - github中的构建状态在js repos上意味着什么

> ID：14595243
> 
> 赞同：0
> 
> 时间：2013-01-30T01:34:02.717
> 
> 标签：javascript, build, github

我经常看到带有构建状态通知的 github js repos（[比如这里](https://github.com/kriskowal/q)）。`java`如果它是一个编译的项目，例如或者但它是 javascript，那将是有意义`c++`的，可能发生的更糟糕的事情是抛出异常。

在解释语言上下文中构建状态意味着什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T02:27:00.293

JavaScript 可以在服务器（*nodejs*）或浏览器上使用。无论哪种方式，一般来说，构建状态表明您的软件（在本例中为 javascript）是否已通过所需的构建测试，以便您的软件按预期工作。

TravisCI 是用于运行开发人员预先设置的测试的软件：http: [//about.travis-ci.org/docs/user/getting-started/](http://about.travis-ci.org/docs/user/getting-started/)。TravisCI 已免费集成到 GitHub 中……它是一项免费服务。

它的工作方式是您在存储`.travis.yml`库的根目录中设置一个名为的配置文件，然后 TravisCI 将“构建”您的项目 - 这意味着它将运行您预先设置的测试......例如单元测试，检查您的代码适用于最新的 NodeJS 版本、jQuery 版本、检查依赖项以及对您的项目很重要的其他任务。

这些测试/检查可以并且将在每次新推送到您的存储库时运行，确保对代码的新更改没有破坏您项目的功能。当多个开发人员为一个项目编写代码时，这种自动化测试会非常有用。将 TravisCI 视为一个项目警察，当您的代码没有通过所需的测试并且没有所需的依赖项时，它会显式地使您的项目失败。尽管也可能有其他原因。

TravisCI 似乎（至少在我看来）在 JS 社区的大型项目中使用，但这并不意味着它也不能用于较小的项目。就我个人而言，我从未使用过这项服务——我只是知道它并睁大眼睛以防万一我需要它。希望这可以为您澄清一点。

**更新：** 当然，这也是一个测试。它使用提供的两个 NodeJS 版本（0.8 和 0.6）测试项目。

```
language: node_js
node_js:
  - 0.8
  - 0.6 
```

TravisCI 文档直接引用：

> “Node.js 项目指定需要使用 node_js 密钥对其进行测试的版本”。

您可以在此处找到特定的 NodeJS 详细信息：http: [//about.travis-ci.org/docs/user/languages/javascript-with-nodejs/](http://about.travis-ci.org/docs/user/languages/javascript-with-nodejs/)

一般配置细节在这里：[http ://about.travis-ci.org/docs/user/build-configuration/#.travis.yml-file%3A-what-it-is-and-how-it-is -用过的](http://about.travis-ci.org/docs/user/build-configuration/#.travis.yml-file%3A-what-it-is-and-how-it-is-used)

如果开发人员想要，他们可以添加更多测试或发生的事情会影响构建状态。这里有很多例子：http: [//about.travis-ci.org/docs/user/build-configuration/](http://about.travis-ci.org/docs/user/build-configuration/)。

例如，可以运行 Shell 脚本，这些脚本可能通过 JSLint、JSHint、Google Closure Compiler 或其他任何方式运行您的 JS 文件。您还可以向此`.travis.yml`文件添加配置属性，该属性将在每次构建时向您发送一封电子邮件，或连接到他们的一个数据库 - mysql、mongodb 等。

我认为了解更多信息的好方法是阅读文档。也许谷歌也可以找到其他人关于这个主题的著作。不过，最好的学习方法是卷起袖子试一试。

不过老实说，这些事情中有一半也在我的脑海中，而且我从未将它用于我的任何小项目。希望它现在更有意义。

**更新 2：**

> 项目不需要测试才能进行测试吗？

是的，它确实如此，这就是重点。如果您按照他们在文档中的指示并创建一个帐户，我相信您会找到所有问题的答案。

注册 TravisCI 时，将有一个可用的 VM 并与您的 github 存储库连接/同步。如果在您的`.yml`文件中选择 NodeJS 作为语言，那么 VM 将安装 NodeJS。

如果您添加了`script:`一个值为 a 的键`shell script (.sh)`，则此脚本将执行。如果你知道如何在 shell 中开发，那么你可以做各种各样的测试和令人惊奇的事情。正如我所说，您可以通过 Linter、验证器运行文件，也可以在无头浏览器 (PhantomJS) 中运行其他一些 JS 文件。在幻像中运行的 JS 文件本身可以是单元测试。这是如何完成的： http: [//about.travis-ci.org/docs/user/gui-and-headless-browsers/](http://about.travis-ci.org/docs/user/gui-and-headless-browsers/)

有关单元测试的更多信息：http: [//about.travis-ci.org/docs/user/languages/javascript-with-nodejs/#Default-Test-Script](http://about.travis-ci.org/docs/user/languages/javascript-with-nodejs/#Default-Test-Script) - 只需阅读有关使用`Using Vows`.

如果你想确切地了解 TravisCI 是如何做所有这些事情的，那么学习 Ruby 将是一个很好的第一步。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T01:48:44.243

任何项目都可以有一个构建阶段，即使这只是意味着您将 JavaScript 压缩为缩小版本或构建文档或类似的任务。大多数情况下，对于“无构建”项目，这意味着会自动针对最新版本运行一套测试。

# spring - 休息服务通过弹簧传递

> ID：14595245
> 
> 赞同：8
> 
> 时间：2013-01-30T01:34:09.820
> 
> 标签：spring, model-view-controller, rest

我已经构建了 Spring 应用程序，由于某些安全性，我有一个要求使用休息服务并通过我的 Spring 应用程序公开相同的服务

即，对于我使用的其余服务，我提供了只有我的应用程序应该知道的安全凭据，并通过我的 spring 应用程序公开相同的服务。

我可以使用相应的身份验证为我使用的每个休息服务编写包装休息服务，并公开这些包装服务，这些服务可以使用我的 spring 应用程序身份验证凭据进行身份验证

但这是很多工作，我本质上是在使用 web 服务并通过一些身份验证映射公开相同的服务。春季是否可以选择通过其余服务

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T17:10:17.510

为什么不为每个 HTTP 请求类型公开一个 REST 服务，并根据路径中的信息对其进行路由？例如（未经测试，可能无法按原样工作，但您了解基本概念）：

```
@Autowired
RestTemplate restTemplate;

@Value("${rest.proxy.target.base.url}")
String targetBaseUrl;

@RequestMapping(value = "/restProxy/{restUrlPath}", method = RequestMethod.GET)
public @ResponseBody String restProxyGet(@PathVariable("restUrlPath") String restUrlPath) {
    return restTemplate.getForObject(targetBaseUrl+ "/" + restUrlPath, String.class);
}

@RequestMapping(value = "/restProxy/{restUrlPath}", method = RequestMethod.POST)
public @ResponseBody String restProxyPost(@PathVariable("restUrlPath") String restUrlPath, @RequestBody String body) {
    return restTemplate.postForObject(targetBaseUrl + "/" + restUrlPath, body, String.class);
}

//Can also add additional methods for PUT, DELETE, etc. if desired 
```

如果您需要与不同的主机通信，您只需添加另一个路径变量，该变量充当存储不同目标基本 URL 的映射的键。您可以从控制器添加您想要的任何身份验证，或者通过 Spring Security 中的自定义身份验证。

您的问题对细节有些轻描淡写，因此您的具体情况可能会使事情复杂化，但基本方法应该可行。

# grails - 将请求/事务 ID 注入 Grails 中的日志消息的“透明”方式

> ID：14595246
> 
> 赞同：1
> 
> 时间：2013-01-30T01:34:26.247
> 
> 标签：grails, grails-2.0

我正在寻找一种方法来在我的日志消息中包含某些信息，而不必总是将此信息显式添加到消息本身中。

我的梦想场景是任何日志消息，无论它发生在控制器、服务还是域类中，都将包含一些已定义的信息集（例如登录用户的用户名）。这将在程序员完全不必担心的情况下发生，只需执行 log.debug("some message") 即可自动执行此操作。

这个想法是以 JSON 格式输出日志，因此上面消息的结构可能看起来像这样：

```
{ timestamp: "20130130T12:32", message: "some message", user: "steve", request-id: "245692"... } 
```

我可以创建一个 log4j 布局，它可以为我很好地格式化所有这些，但问题是我首先如何将数据放在那里。

所以我的第一个问题是：Grails 中有什么东西可以用作“request-id”吗？其背后的想法是为用户发起的任何“事务”提供一个请求 ID。因此，控制器中的日志消息将具有与作为结果被调用的域或服务类中的日志消息相同的请求 ID。

第二个问题：在用户发起的事务中，有没有办法在层（控制器/服务/域）之间“透明地”移动诸如此类的信息？如果需要，我可以在控制器中生成我自己的请求 ID，然后我可以获得用户名并将这两个放在地图中。但是我如何将该映射传输到任何服务/域类并传输到它们的记录器中，而不是将它作为参数传递（我不想这样做，因为这会乱扔代码）？

任何想法都将不胜感激，我应该注意我对 Grails 很陌生，所以请保持温柔;-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T23:19:48.187

我在#grails IRC 频道上获得了正确的推动。

Log4J（或实际上是 SLF4J）有一个叫做 MDC（映射诊断上下文 - [http://www.slf4j.org/manual.html#mdc](http://www.slf4j.org/manual.html#mdc)）的东西，它本质上是一个线程本地映射。通过创建过滤器并将我需要的信息添加到 MDC，我可以将这些信息包含在该线程中执行的所有日志消息中。

问题仍然存在，是否存在“请求 uuid”之类的东西，或者我是否应该使用 UUID.randomUUID().toString() 生成一个。

例子：

添加过滤器以生成和存储`requestId`：

```
def filters = {
   all(controller:'*', action:'*') {
      before = {
         MDC.put 'requestId', UUID.randomUUID().toString()
      }
   }
} 
```

在 Config 中，添加`%X{requestId}`模式

```
log4j = {
  appenders {
      console name:'stdout', layout:pattern(conversionPattern: '%d{DATE} %X{requestId} %5p %c{1}:%L - %m%n') 
```

# php - vb.net regex.matches 不返回所有匹配项

> ID：14595251
> 
> 赞同：0
> 
> 时间：2013-01-30T01:35:24.077
> 
> 标签：php, regex, vb.net, preg-match-all

```
Dim pattern As String = "^[ \t]*(\d+)[ \t]*(#[^#]*#)?[ \t]*(\w+)[ \t]?(.*)$"
Dim sentence As String = "9 #Left# Itema Desc"

For Each match As Match In Regex.Matches(sentence, pattern)
  Console.WriteLine("Found '{0}' at position {1}", match.Value, match.Index)
Next 
```

只返回：

在位置 0 找到“9 #Left# Itema Desc”

使用 Expresso 测试上面的 vb 模式返回：

1：9

2：#左#

3：意达

4：描述

此外，这个 PHP 正则表达式还返回四项：

```
preg_match_all('/^[ \t]*(\d+)[ \t]*(#[^#]*#)?[ \t]*(\w+)[ \t]?(.*)$/m', $in, $matches, PREG_SET_ORDER); 
```

我究竟做错了什么？？

提前致谢！

多亏了 Ark-kun，我的问题确实是组 - 这是有效的代码：

```
Dim pattern As String = "^[ \t]*(\d+)[ \t]*(#[^#]*#)?[ \t]*(\w+)[ \t]?(.*)$"
Dim sentence As String = "9 #Left# Itema Desc"

Dim match As Match = Regex.Match(sentence, pattern)
If match.Success Then
  Console.WriteLine("Matched text: {0}", match.Value)
    For ctr As Integer = 1 To match.Groups.Count - 1
      Console.WriteLine("   Group {0}:  {1}", ctr, match.Groups(ctr).Value)
    Next
 End If 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T02:35:34.620

结果在逻辑上是正确的。您已经编写了“整行”正则表达式，并且该`Regex.Matches`方法找到了一个匹配项 - 整行。您可能想要的是`match.Captures`属性：http: [//msdn.microsoft.com/en-us/library/system.text.regularexpressions.group.captures.aspx](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.group.captures.aspx)

# extjs - Ext.Ajax 调用获取 CSV，但我的浏览器没有下载它 - 可能是带有标题的东西

> ID：14595252
> 
> 赞同：1
> 
> 时间：2013-01-30T01:35:46.497
> 
> 标签：extjs, extjs4

我的服务器上有一个 CSV，但是当我执行 Ajax 时，它只会在我“检查元素”时显示在 Google Chrome 的“网络”中。

代码在这里：

```
Ext.Ajax.request({
            method: 'POST',
            headers: {
                "Content-type": "text/csv",
                'Content-Disposition': 'attachment'
            },
            url: 'php/files/' + tabid + '.csv'
}); 
```

我需要添加什么才能让我的浏览器在本地计算机上下载文件？谢谢！:)

*Ext-JS 4，CakePHP 2.2.5*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T08:06:52.627

您无法使用 XHR 请求开始下载。但是至少有两种方法可以做到：

*   如果文件路径是固定的，您知道它`top.location.href = "YourPath";`是在 ajax 调用的成功处理程序中设置的。**[top.location.href](https://stackoverflow.com/questions/3332756/difference-between-window-location-href-and-top-location-href)**
*   如果您创建文件并想要返回它，您应该创建一个隐藏的 iframe 并向其中注入一个表单，然后执行请求。

# tomcat - aws 自动缩放 mod_jk

> ID：14595255
> 
> 赞同：1
> 
> 时间：2013-01-30T01:35:56.640
> 
> 标签：tomcat, jboss, amazon-web-services, mod-jk

我们有一个带有 mod_jk 的 Apache，它充当 Jboss 5.1 应用服务器的负载平衡器。

mod_jk 不支持 httpd worker 的动态配置。有没有办法在不重新启动 apache 的情况下使用 AWS 自动缩放来处理 JBoss 实例的动态扩展/缩减？

谢谢

# c# - 防止关闭表单然后stackoverflow

> ID：14595267
> 
> 赞同：2
> 
> 时间：2013-01-30T01:37:22.637
> 
> 标签：c#

我试图通过处理 FormClosing 来防止表单关闭。

```
if(e.CloseReason == CloseReason.UserClosing)
{
    e.Cancel = true;
    SomeFunction();
} 
```

但是，当它进入 SomeFunction() 时，会引发 stackoverflow 异常。这可能是什么原因？谢谢。

* * *

编辑：

哎呀，我不调试不好。SomeFunction() 中有一些字段验证，当字段有效时，我调用表单的 Close() 函数。由于我对 FormClosing() 进行了处理，因此它将在 SomeFunction() 中再次处理。不知道调用Close()函数也在CloseReason.UserClosing下。感谢您的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T01:48:28.567

堆栈溢出的常见原因是无限递归。

您应该检查`SomeFunction()`不会导致`SomeFunction()`再次调用（可能通过触发您正在处理的事件。

您可以检查调试器中的调用堆栈以查看是否是这种情况（根据上面的注释）。

# c++ - OpenCV创建矩阵，每行包含多个图像

> ID：14595268
> 
> 赞同：0
> 
> 时间：2013-01-30T01:37:31.223
> 
> 标签：c++, opencv, vector

我需要在 OpenCV 中创建图像数据矩阵。基本上，矩阵的每一行都将包含同一个人的多个图像。我发现了 @ bytefish 编写的[asRowMatrix 教程](http://www.bytefish.de/blog/pca_in_opencv)，但是我目前不明白如何将多个图像复制到矩阵的一行中。我有一个图像路径的文本文件，用“;”分隔 当路径引用新主题时，例如：

```
Subject1/Image1.png
Subject1/Image2.png
;
Subject2/Image1.png 
```

我最初的想法是有一个二维向量：

```
Vector<Vector<Mat>> intra;
    while(file.good()) {
    getline(file, path);
    if((path.compare(";"))!=0){
        try{
 //Add images to person-index
            intra[curRow].push_back(imread(path,0));
        } catch (Exception const & e){
            cerr<<"OpenCV exception: "<<e.what()<<std::endl;
        }
    } else{
//";" found --> increment person-index
        curRow++;
    }
}
imshow("Intra[0,0]",intra[0][0]); 
```

但是，我收到一个错误，我认为这是由于向量的大小不合适（curRow+1）

```
OpenCV Error: Assertion failed (i < size()) in unknown function, file c:\opencv\
include\opencv2\core\operations.hpp, line 2357
OpenCV exception: c:\opencv\include\opencv2\core\operations.hpp:2357: error: (-2
15) i < size() 
```

在 else 中调整向量的大小并没有解决问题！任何有关解决此问题或使用不同 OpenCV 数据结构的指针将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T00:30:54.280

我决定在每次添加图像时动态调整矢量大小，而不是使用 push_back。这可能效率低下，但它解决了不正确引用的问题。我通过[@jrok](https://stackoverflow.com/questions/10122293/insert-at-specific-location-of-a-2d-vector)对 2D 矢量元素访问[问题](https://stackoverflow.com/questions/10122293/insert-at-specific-location-of-a-2d-vector)的回答得到了这个想法。编辑解决方案：

```
int curRow=0;
int numImages=0;

string line, path, temp;
while(file.good()) {
    getline(file, path);
    if((path.compare(";"))!=0){
        try{
            faces[curRow].resize(numImages+1);
            faces[curRow][numImages] = imread(path,0);
            numImages++;
        } catch (Exception const & e){
            cerr<<"OpenCV exception: "<<e.what()<<std::endl;
        }
    } else{
        numImages=0;
        curRow++;
    }
} 
```

希望这可以帮助其他面临同样问题的人！

# c - 在 recv 调用上返回 Errno 35 (EAGAIN)

> ID：14595269
> 
> 赞同：7
> 
> 时间：2013-01-30T01:37:36.147
> 
> 标签：c, macos, sockets

我有一个等待recv的套接字，然后在接收到数据后，向前发送数据进行处理。但是，然后它再次用于 recv，这一次它什么也没收到，返回 -1，当打印 errno 时，它打印 35（即`EAGAIN`）。

这只发生在 MAC OS Lion 操作系统上，对于其他操作系统，它运行得非常好

```
do{
 rc = recv(i, buffer, sizeof(buffer), 0);
 if (rc < 0){
      printf("err code %d", errno); 
 }
 if(rc == 0){ 
      //Code for processing the data in buffer 
      break; 
 } 
      ....
}while(1); 
```

编辑：更正缩进和 errno

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T02:39:33.393

您可以将套接字设置为非阻塞模式或启用接收超时。这是来自[`recv(2)`](https://developer.apple.com/library/ios/#documentation/system/conceptual/manpages_iphoneos/man2/recv.2.html)Mac的：

> 如果出现以下情况，调用将失败：
> 
> **[EAGAIN]**套接字被标记为非阻塞，接收操作会阻塞，或者设置了接收超时，在接收到数据之前超时。

### 编辑0：

嗯，抱歉再次引用。这次来自[`intro(2)`](https://developer.apple.com/library/ios/#documentation/system/conceptual/manpages_iphoneos/man2/intro.2.html)：

> 11 **EDEADLK**避免了资源死锁。试图锁定可能导致死锁情况的系统资源。
> 
> ...
> 
> 35 **EAGAIN**资源暂时不可用。这是一种临时情况，以后对同一例程的调用可能会正常完成。

只是[`strerror(3)`](https://developer.apple.com/library/archive/documentation/System/Conceptual/ManPages_iPhoneOS/man3/strerror.3.html)用来找出实际问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T02:36:08.707

您的套接字处于非阻塞模式。是没有数据可供读取时（和其他系统调用）`EAGAIN`的正常返回。`recv()`从这个意义上说，这并不是一个真正的错误。

如果您*打算*让您的套接字是非阻塞的，那么您需要监视它以找出它何时有数据可用，并且只有`recv()`在有数据可用时才调用。使用`poll()`（或 kqueue，这是特定于 FreeBSD 和 MacOS）来监控的。通常这是在应用程序的主事件循环中完成的。

如果您的*意思不是*让您的套接字是非阻塞的，那么您应该将其设置为阻塞更多`fcntl()`：

```
flags = fcntl(i, F_GETFL, 0); /* add error checking here, please */
flags &= ~O_NONBLOCK;
fcntl(i, F_SETFL, flags); /* add more error checking here! */ 
```

但是您应该知道套接字（以及所有文件描述符）的默认阻塞状态是*阻塞*的，所以如果您的套接字处于非阻塞模式，那么这意味着有人或某事手动使其成为非阻塞。

在阻塞模式下，`recv`调用将阻塞并等待更多数据而不是返回`EAGAIN`（或`EWOULDBLOCK`与 相同`EAGAIN`）。

# c# - 设计动态面板

> ID：14595271
> 
> 赞同：0
> 
> 时间：2013-01-30T01:37:43.563
> 
> 标签：c#, winforms, user-interface

我是 C# 新手，我想为 C# 中的图像处理应用程序设计一个 GUI。我有一个非常基本的基本布局，设计如下所示![在此处输入图像描述](../Images/c3f54847ba5b36528b7b2a2ce7973f90.png)

在这里，图像平面是固定的，它将显示实时流视频。我设计了所有的按钮框架和侧面板。但我不知道如何为我单击的每个按钮动态更改侧面板。例如，如果我单击 button1_1，我希望在侧面板中添加一些内容，而对于 button1_2，我希望在其中添加一些其他内容。我该怎么做。

编辑：

感谢您的回答。我看到选项卡控件是一个选项。但我想要一个新面板每次点击一个按钮。这可以进一步打开表格。是否可以？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T01:44:36.533

好吧，让我们来看看。使用“TabControl”或“Panel”数组很容易。

1.用 TabControl 来做。您可以在多个子选项卡中的 TabControl 中设计 GUI（如果您不知道如何请询问。）。然后你在按钮单击事件中更改它，以制作你想要显示的子标签（这意味着让它对其他子标签可见而不可见。）

2.用面板阵列做。您可以使用 panel[] 面板。在按钮单击事件中，您隐藏其他面板并显示您想要的面板。

希望回答对你有帮助！

```
 private void button1_Click(object sender, EventArgs e)
    {
        tabControl1.SelectedIndex = 0;
        tabControl1.TabPages[0].Text = "First";
    }

    private void button2_Click(object sender, EventArgs e)
    {
        tabControl1.SelectedIndex = 1;
    }

    private void button3_Click(object sender, EventArgs e)
    {
        tabControl1.SelectedIndex = 2;
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T02:17:35.360

您可能想在表单中添加拆分容器。

为每个按钮创建 UserControl。

按钮单击事件的代码

```
//Button1Click Event
    private void button1_Click(object sender, EventArgs e)
    {
        UserControl1 m_UserControl = new UserControl1();
        splitContainer1.Panel2.Controls.Clear();
        splitContainer1.Panel2.Controls.Add(m_UserControl);
    }
    //Button2Click Event
    private void button2_Click(object sender, EventArgs e)
    {
        UserControl2 m_Usercontrol2 = new UserControl2();
        splitContainer1.Panel2.Controls.Clear();
        splitContainer1.Panel2.Controls.Add(m_Usercontrol2);
    } 
```

如果您想在运行时更改面板中显示的用户控件，则可以执行此操作。如果我误解了你的问题，请纠正我。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T02:21:02.157

在 WinForms 中，您可以使用选项卡控件并在按下按钮时更改选定的选项卡索引。更具体地说，当它的点击事件被触发时。[这](http://www.c-sharpcorner.com/UploadFile/mahesh/TabControlTutorial11302005235835PM/TabControlTutorial.aspx)是一个关于使用 TabControl 的好教程，[这](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.click.aspx)是一个关于连接点击事件的教程。

**编辑：**

[这](http://www.c-sharpcorner.com/uploadfile/mahesh/c-sharp-tabcontrol/)是一个更好的教程。

由于您无法在不使用 WPF 的情况下隐藏选项卡控件的选项卡，因此如果您不喜欢它们的外观，您可能需要使用其他东西。如果您只有几个按钮和视图，一个很好的解决方法是使用面板。单击按钮一时，显示面板一并隐藏面板二等。下面是代码：

```
private void button1_Click(object sender, EventArgs e)
    {
        pane2.visible = false;
        pane1.visible = true;
    }

private void button2_Click(object sender, EventArgs e)
    {
        pane1.visible = false;
        pane2.visible = true;
    } 
```

希望这对你有帮助！

# html - 常规 html 在 JSFiddle 中不起作用

> ID：14595272
> 
> 赞同：0
> 
> 时间：2013-01-30T01:38:01.303
> 
> 标签：html, css, wrapper, jsfiddle

当我在特定的包装器中时，例如[http://jsfiddle.net/jspence29/UpHEU/html](http://jsfiddle.net/jspence29/UpHEU/the)标签不起作用。和更多的`<ol>, <ul>, <li>, <p>`标签在这个包装器中不起作用。您可以看到该列表在该 jsfiddle 中不起作用

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T02:17:35.033

发生的事情是 JSFiddle 正在应用它自己的*重置样式表*。您可以通过取消选中左侧列中的*规范化 CSS来禁用它。*

# java - While循环和步骤

> ID：14595274
> 
> 赞同：2
> 
> 时间：2013-01-30T01:38:06.777
> 
> 标签：java, loops

```
init; 
while (test) {
  statements;
  step;
    } 
```

我对上述 while 循环中步骤的位置有疑问。步骤写在哪里重要吗？换句话说，如果将步骤写为第一个语句或中间或末尾的某个位置，它是否会更改 while 循环中的任何值？如果确实如此，您能否提供一个简短的示例来说明这种效果。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T01:41:53.930

步骤的位置肯定会影响循环的主体。想象一下，如果下面的代码正在访问一个数组，第一个示例可能会丢失数组中的第一个元素。

**这输出 0-9**

```
int x = 0;

while(x < 10){
  System.out.println(x);
  x++; 
} 
```

**这输出 1-10**

```
int x = 0;

while(x < 10){
  x++; 
  System.out.println(x);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T01:42:01.760

步骤只是另一个变量。如果循环中的语句引用它，那么是的，这很重要。如果不是，它的位置无关紧要（只要它在循环中的某个地方）。

# javascript - 在页面刷新时以正确的数字开始字符计数器

> ID：14595276
> 
> 赞同：0
> 
> 时间：2013-01-30T01:38:10.267
> 
> 标签：javascript, ruby-on-rails, counter

现在我的计数器显然总是从 350 开始。我希望它使用正确的数字，但我不确定如何在 ruby​​ 语法中调用“左”js var。

```
<%= form_for [@status], :url => user_status_path(current_user) do |f| %>
  <%= render 'shared/error_messages', object: f.object %>
  <div class="field">
    <%= f.text_area :content, id:"status_box", maxlength:350, placeholder: "Status?" %>
  </div>
  <%= f.submit "Update", id:"status_btn", class: "btn btn-small btn-primary" %>

  <span id="counter">Characters left: 350</span>

  <script type="text/javascript">
    $('#status_box').keyup(function () {
        var left = 350 - $(this).val().length;
        if (left < 0) {
            left = 0;
        }
        $('#counter').text('Characters left: ' + left);
    });
  </script>
<% end %> 
```

另外，当人们按住键时，我该怎么做才能使计数器发生变化？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T01:49:16.567

您可以在页面加载时触发 javascript，以便计算此时剩余的字符：

```
 <span id="counter">Characters left: 350</span>

  <script type="text/javascript">
    $('#status_box').keyup(function () {
        calculateCharactersLeft();
    });
    $(document).ready(function () {
        calculateCharactersLeft();
    });
    var calculateCharactersLeft = function(){
        var left = 350 - $("#status_box").val().length;
        if (left < 0) {
            left = 0;
        }
        $('#counter').text('Characters left: ' + left);
    }
  </script> 
```

我个人更喜欢这样做，而不是向 erb 中注入东西，但选择权在你。

实际上，如果您从 textarea 属性中提取最大长度，而不是在 JavaScript 中对其进行硬编码，那么您只会在一个地方拥有最大长度值，从而使您的代码保持良好和干燥。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T01:44:44.467

您需要像这样动态更改 ERB 中剩余的字符数：

```
<span id="counter">Characters left: <%= 350 - @status.content.length %></span> 
```

要在有人按住键时触发它，请尝试绑定到`keypress`事件而不是`keyup`事件。

# python - AttributeError：“模块”对象没有属性“ZipFile”

> ID：14595280
> 
> 赞同：6
> 
> 时间：2013-01-30T01:38:49.740
> 
> 标签：python

就像我说的，这是一个非常奇怪的问题。我希望你们能帮我解决这个问题谢谢

**以下是我的代码：**

```
import os
import zipfile

filename = "E:\\test.zip"
currdir = "E:\\vpn\\"

os.chdir(currdir)

tfile = zipfile.ZipFile(filename, 'w')
files = os.listdir(currdir)
for f in files:
    tfile.write(f)

for f in tfile.namelist():
    print "added %s"%f

tfile.close() 
```

**错误信息：**

```
Traceback (most recent call last):
  File "C:\pydemo\src\gzip\zipfile.py", line 7, in <module>
    import zipfile
  File "C:\pydemo\src\gzip\zipfile.py", line 14, in <module>
tfile = zipfile.ZipFile.(filename, 'w')
AttributeError: 'module' object has no attribute 'ZipFile' 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-30T01:41:45.253

您调用了您的 script `zipfile.py`，这意味着它正在尝试导入自己。将文件的名称更改为基本上其他任何名称。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-30T01:43:31.453

您的模块将自身作为 zipfile 导入。将其称为 zipfile.py 以外的其他名称

# css - 用css将图像扭曲成圆形/弧形

> ID：14595282
> 
> 赞同：4
> 
> 时间：2013-01-30T01:39:02.610
> 
> 标签：css

是否有可靠的 CSS 方法将矩形*图像*扭曲/变形为圆形或弧形？

我知道如何拉伸等等，但应用形状变形似乎是不可能的。这是正确的吗..？也许是 SVG 转换..？理想情况下，这将是一个可转换的转换。

*   不是在谈论使用边界半径来模拟平面形状，而是在谈论图像的实际变形。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-10-12T21:41:57.350

**不**，这还不可能，因为 CSS 只支持线性变换。

但是，这个类似问题的答案有一个使用 Adob​​e 的实验性过滤器创建吸吮效果的示例：[如何使用 CSS 3d 矩阵创建弯曲变形效果](https://stackoverflow.com/questions/17870192/how-to-use-3d-matrix-to-create-suck-effect-in-css)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T02:44:26.503

矩形何时以及如何转换？如果它是一个`:hover`状态，那么你所需要的就是：

**HTML**

```
<img src="#" class="img-circle" /> 
```

**CSS**

```
.img-circle:hover {
    border-radius: 50%;
    -webkit-transition: all 0.5s ease;
    -moz-transition: all 0.5s ease;
    -ms-transition: all 0.5s ease;
    -o-transition: all 0.5s ease;
    transition: all 0.5s ease;
} 
```

这是一个例子：http: [//jsfiddle.net/YcacT/](http://jsfiddle.net/YcacT/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T01:51:54.820

你需要这个吗？

```
.circle {
  border-radius: 50%;
} 
```

[http://jsfiddle.net/6AHTb/](http://jsfiddle.net/6AHTb/)

IE9+、Firefox 4+、Chrome、Safari 5+ 和 Opera 支持border-radius 属性。

# python - 箭头键输入代码在 tkinter 中不起作用

> ID：14595284
> 
> 赞同：4
> 
> 时间：2013-01-30T01:39:06.417
> 
> 标签：python, tkinter

以下是我的简短脚本。它的目的是在按住这些箭头键时打印左右，但我不知道为什么它不起作用。

```
import Tkinter as tk

right = False
left = False
up = False

def keyPressed(event):
    if event.keysym == 'Escape':
        root.destroy()
    if event.keysym == 'Right':
        right = True
    if event.keysym == 'Left':
        left = True
    if event.keysym == 'Up':
        up = True

def keyReleased(event):
    if event.keysym == 'Right':
        right = False
    if event.keysym == 'Left':
        left = False
    if event.keysym == 'Up':
        up = False

def task():
    if right:
        print 'Right'
    if left:
        print 'Left'
    if up:
        print 'Forward'
    root.after(20,task)

root = tk.Tk()
print( "Press arrow key (Escape key to exit):" )

root.bind_all('<Key>', keyPressed)
root.bind_all('<KeyRelease>', keyReleased)
root.after(20,task)

root.withdraw()
root.mainloop() 
```

当我开始使用`root.after()`.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T01:41:57.550

在 python 中，函数创建了一个新的作用域。如果在函数范围内找不到变量，python 会在外部（模块/文件）范围内查找该变量。您可以通过赋值将变量添加到当前范围。这一切都意味着：

```
right = False
def func():
    right = True
func()
print (right)  #right is still False in the outer scope. 
```

为了在外部范围内实际修改变量，您需要告诉 python 您想要*明确地*执行类似的操作：

```
right = False
def func():
    global right
    right = True
func()
print (right) 
```

这行得通，但它不被认为是好的做法，因为您正在更改程序的状态。现在的值`right`取决于你是否调用了一个有点令人不安的函数。

在函数调用之间共享数据的更好方法是使用**类**。然后方法（绑定到类实例的函数）可以更改该单个实例的状态，但程序的其余部分可以继续进行，就好像什么都没发生一样。

```
class Foo(object):
    def __init__(self):
        self.right = False
    def func(self):
        self.right = True

a = Foo() #calls __init__ implicitly
print(a.right)  #should be False -- We set this in __init__
a.func()  #change state of `a`
print(a.right)  #Now it's True! 
```

这是您的代码的稍微“优雅”的版本：

```
import Tkinter as tk

class App(object):
    def __init__(self):
        self.right = False
        self.left = False
        self.up = False

    def keyPressed(self,event):
        print "HERE"
        if event.keysym == 'Escape':
            root.destroy()
        elif event.keysym == 'Right':
            self.right = True
        elif event.keysym == 'Left':
            self.left = True
        elif event.keysym == 'Up':
            self.up = True

    def keyReleased(self,event):
        if event.keysym == 'Right':
            self.right = False
        elif event.keysym == 'Left':
            self.left = False
        elif event.keysym == 'Up':
            self.up = False

    def task(self):
        if self.right:
            print 'Right'
        elif self.left:
            print 'Left'
        elif self.up:
            print 'Forward'
        root.after(20,self.task)

application = App()
root = tk.Tk()
print( "Press arrow key (Escape key to exit):" )

root.bind_all('<Key>', application.keyPressed)
root.bind_all('<KeyRelease>', application.keyReleased)
root.after(20,application.task)

root.mainloop() 
```

# c++ - 不能在数组上使用 .begin() 或 .end()

> ID：14595285
> 
> 赞同：33
> 
> 时间：2013-01-30T01:39:08.067
> 
> 标签：c++, arrays, pointers, c++11, iterator

错误内容如下：

> 对非类类型 int[5] 的“arr”中的成员“begin”、“end”的请求，无法从表达式错误中推断出来。

我的代码：

```
#include <iostream>
using namespace std;

int main()
{
    int * mypointer;

    int arr[5] = {1,3,5,7,9};

    mypointer = arr;

    for(auto it = arr.begin(); it != arr.end(); ++it) {
        cout<<*mypointer<<endl;

        mypointer++;
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-01-30T01:42:46.427

数组没有成员函数，因为它们不是类类型。这就是错误所说的。

您可以改用标头中的`std::begin(arr)`and 。这也适用于具有和成员的类型，*通过*重载：`std::end(arr)``<iterator>`*`.begin()``.end()`*

 *```
#include <array>
#include <vector>

#include <iterator>

int main()
{
    int c_array[5] = {};
    std::array<int, 5> cpp_array = {};
    std::vector<int> cpp_dynarray(5);

    auto c_array_begin = std::begin(c_array); // = c_array + 0
    auto c_array_end = std::end(c_array);     // = c_array + 5

    auto cpp_array_begin = std::begin(cpp_array); // = cpp_array.begin()
    auto cpp_array_end = std::end(cpp_array);     // = cpp_array.end()

    auto cpp_dynarray_begin = std::begin(cpp_dynarray); // = cpp_dynarray.begin()
    auto cpp_dynarray_end = std::end(cpp_dynarray);     // = cpp_dynarray.end()
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-07-13T19:35:29.493

对于标准的固定长度 C 数组，您可以只写

```
int c_array[] = {1,3,5,7,9}, acc = 0;

for (auto it : c_array) {
    acc += it;
} 
```

编译器执行幕后工作，无需创建所有这些开始和结束迭代器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T10:49:09.633

我想为您指出的一件事是，除了其他人已经指出的整个成员之外，您实际上不必维护单独的 int* 来取消引用数组元素。

使用更现代的方法，代码更具可读性和安全性：

```
#include <iostream>
#include <algorithm>
#include <array>
#include <iterator>
using namespace std;

int main()
{
    std::array<int, 5> cpp_array{1,3,5,7,9};

    // Simple walk the container elements.
    for( auto elem : cpp_array )
        cout << elem << endl;

    // Arbitrary element processing on the container.
    std::for_each( begin(cpp_array), end(cpp_array), [](int& elem) {
        elem *= 2;      // double the element.
        cout << elem << endl;
    });
} 
```

如果需要，使用第二个示例中的 lambda 可以方便地对元素执行任意处理。在这个例子中，我只是展示了将每个元素加倍，但是你可以在 lambda 主体中做一些更有意义的事情。

希望这有意义并有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T01:50:09.157

在 C++ 中，数组*不是*类，因此没有*任何*成员方法。在某些情况下，它们确实表现得像指针。您可以通过修改代码来利用这一点：

```
#include <iostream>
using namespace std;

int main()
{
    int * mypointer;

    const int SIZE = 5;
    int arr[SIZE] = {1,3,5,7,9};

    mypointer = arr;

    for(auto it = arr; it != arr + SIZE; ++it) {
        cout<<*mypointer<<endl;

        mypointer++;
    }

    return 0;
} 
```

当然，这意味着`mypointer`和`it`都包含相同的地址，所以你不需要它们。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-02-28T15:11:06.077

很晚了，但我认为值得一提的是：

```
void findavgTime(int n)
{
    int wt1[n];
    fill_wt(wt1,n); //Any method that puts the elements into wt1
    int wt2[3];
    int sum  = accumulate(begin(wt1), end(wt1), 0); // Fails but wt2[3] will pass. Reason: variable-sized array type ‘int [n]’ is not a valid template argument)
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-01-25T15:37:56.090

也许这是使用 c++14 中的模板和 lambda 的更简洁的方法：

**定义：**

```
template<typename Iterator, typename Funct>
void my_assign_to_each(Iterator start, Iterator stop, Funct f) {
    while (start != stop) {
        *start = f();
        ++start;
    }
}

template<typename Iterator, typename Funct>
void my_read_from_each(Iterator start, Iterator stop, Funct f) {
    while (start != stop) {
        f(*start);
        ++start;
    }
} 
```

**然后主要是：**

```
int x[10];
srand(time(0));
my_assign_to_each(x, x+10, [] () -> int { int rn{}; rn = rand(); return rn; });
my_read_from_each(x, x+10, [] (int value) { std::cout << value << std::endl; });

int common_value{18};
my_assign_to_each(x, x+10, [&common_value] () -> int { return common_value; });
my_read_from_each(x, x+10, [] (int value) { std::cout << value << std::endl; }); 
```*

# javascript - requirejs 没有在 IE 中加载其他脚本

> ID：14595287
> 
> 赞同：4
> 
> 时间：2013-01-30T01:39:28.473
> 
> 标签：javascript, internet-explorer, requirejs

我有一个使用 require.js (www.easyzag.com) 的网站。它在 chrome/FF 上运行良好，但在 IE 中它没有加载我的任何脚本文件。

我尝试使用 IE9 开发工具，但似乎找不到太多东西。它进入 require 文件，但是一旦运行完成，开发工具中就没有其他脚本文件链接了。

没有错误或任何内容被打印到控制台。

关于我应该检查什么或我可能做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T01:46:46.427

IE 9 无法*设置*非标准属性。您可以在页面标题中执行此操作：

```
...
script.setAttribute("data-main", "js/main");
... 
```

您应该将标签以纯 HTML 格式放在标题中，并`data-main`指定属性。

# c - 在省略重复节点的有序链表中插入

> ID：14595291
> 
> 赞同：-1
> 
> 时间：2013-01-30T01:40:08.957
> 
> 标签：c, linked-list

我正在尝试构建一个有序链表，而不会在新的有序列表中找到重复数据。说`f_total`有这个值： `f_total: 48 42 45 50 42 48 48 43` 新的链表应该是这样的： `42 43 45 48 50`

*代码更新：*

```
 typedef struct _sigma {
            int algo;
            int f;
            int c;
            node_p list;
            struct _sigma *next;
        } sigma, *sigma_p;

        sigma_p sigma_tmp = NULL;
        sigma_p sigma_new = NULL;
        sigma_p sigma_optimal = NULL;
        int f_total = 0;

        f_total = exectasks(m, nod_tmp, &c_max, &cmin); // f_total will be updated after each time exectasks function return.
        ...
        if(sigma_optimal == NULL)
        {
            sigma_optimal = (sigma *)malloc(sizeof(sigma));
            sigma_optimal->algo = 0;
            sigma_optimal->f = f_optimal;
            sigma_optimal->c = cmin;
            sigma_optimal->list = nod_tmp;
            sigma_optimal->next = NULL;
        }
        else
        {
            sigma_new = (sigma *)malloc(sizeof(sigma));
            sigma_new->algo = 0;
            sigma_new->f = f_optimal;
            sigma_new->c = cmin;
            sigma_new->list = nod_tmp;
            sigma_tmp = sigma_optimal;
            while(sigma_tmp != NULL && f_optimal > sigma_tmp->f)
            {
                sigma_prev = sigma_tmp;
                sigma_tmp = sigma_tmp->next;
            }  

            if(sigma_tmp != NULL)
            {
                if(sigma_tmp->f != f_optimal)
                {
                    if(sigma_tmp == sigma_optimal)
                    {
                        sigma_new->next = sigma_optimal;
                        sigma_optimal = sigma_new;
                    }
                    else if(sigma_tmp->next == NULL)
                    {
                        sigma_prev->next = sigma_new;
                        sigma_new->next = sigma_tmp;
                    }
                    else if(sigma_tmp == NULL)
                    {
                        sigma_tmp->next = sigma_new;
                        sigma_new->next = NULL;
                    }
                }
            }
        } 
```

但是在这里我有两个问题：

1.  它没有正确排序列表。
2.  它不会删除所有重复项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T16:36:03.807

最后我修复它：

```
 f_total = exectasks(m, nod_tmp, &c_max, &cmin); // f_total will be updated after each time exectasks function return.
    ...
    if(sigma_optimal == NULL) // the start of the list
    {
        sigma_optimal = (sigma *)malloc(sizeof(sigma));
        sigma_optimal->algo = 0;
        sigma_optimal->f = f_optimal;
        sigma_optimal->c = cmin;
        sigma_optimal->list = nod_tmp;
        sigma_optimal->next = NULL;
    }
    else
    {
        sigma_new = (sigma *)malloc(sizeof(sigma));
        sigma_new->algo = 0;
        sigma_new->f = f_optimal;
        sigma_new->c = cmin;
        sigma_new->list = nod_tmp;
        sigma_tmp = sigma_optimal;
        while(sigma_tmp != NULL && f_optimal > sigma_tmp->f)
        {
            sigma_prev = sigma_tmp;
            sigma_tmp = sigma_tmp->next;
        }  

        if(f_optimal != sigma_tmp->f && sigma_tmp != NULL)
        {
            if(sigma_tmp == sigma_optimal) // we are in the head
            {
                sigma_new->next = sigma_tmp;
                sigma_optimal = sigma_tmp; // update the new head list
            }
            else // we are some where in the middle
            {
                sigma_prev->next = sigma_new;
                sigma_new->next = sigma_tmp;
            }
        }

        if(sigma_tmp == NULL) // we are in the end
        {
            sigma_prev->next = sigma_new;
            sigma_new->next = NULL;
        }
    } 
```

# c++ - 如何在 C++ 中实现指向指针数组的多个指针

> ID：14595293
> 
> 赞同：0
> 
> 时间：2013-01-30T01:40:45.253
> 
> 标签：c++

我一直在使用带有指针偏移表示法的指针和数组（我认为）进行类项目程序。下面是用于项目的图表

# 项目提示

*阴影框代表指针。无阴影框表示动态分配的二维 int 数组。您的程序无法为任何未命名的项目创建命名标识符。行数和列数将由用户输入。图中的椭圆表示行和列的大小是可变的。垂直数组是一个指针数组。每个垂直数组元素都指向一个一维整数数组。

![图表](../Images/11d7a26b2b4e23745cf23e353ddef4e3.png)

在您的程序中，仅通过 s、t、u 和 v 表示的指针引用整数数组。传递给函数时，您必须始终传递这些指针。您不能取消引用函数调用中的实际参数。您也不能为了使用它们而取消引用指针并将它们分配给变量。*

```
#include <iostream>
using namespace std;

void fillArray(int **pArray, int rows, int columns)
{
    for(int row = 0; row < rows; row++)
    {
        *(pArray + row) = new int;
        cout << "Enter " <<  " row " << row + 1<< endl;

        for(int col = 0; col < columns; col++)
        {
            cin >> *(*(pArray + row) + col);
        }
    }
}

void printArray(int **pArray, int rows, int columns)
{
    for(int row = 0; row < rows; row++)
    {
        cout << "Row " << row + 1 << endl;
        for(int col = 0; col < columns; col++)
        {
            int num = *(*(pArray + row) + col);
            cout << num << " ";
        }
        cout << endl;

    }
}

void reverseArray(int **pArray, int rows, int columns)
{
    for(int row = 0; row < rows; row++)
    {
        cout << "Reversed Row " << row + 1 << endl;
        for(int col = columns - 1; col >= 0; col--)
        {
            int num = *(*(pArray + row) + col);
            cout << num << " ";
        }
        cout << endl;
    }
}

int main()
{
    int rows;
    int columns;
    cout << ("Input number of rows: ");
    cin >> rows;
    cout << ("Input number of columns: ");
    cin >> columns;

    int **pArray;                   //Initialize array

    int ****s;                      //Initialize pointers s, t, u, v
    **s = pArray;
    int ****t;
    *t = *s;
    int ****u;
    **u = pArray;
    int ****v;
    *v = *u;

    pArray = new int*[rows];        //create pointer to rows. 1st level of indirection
    *pArray = new int[columns];     //create pointer to columns. 2nd level of indirection

    fillArray(pArray, rows, columns);
    printArray(pArray, rows, columns);
    reverseArray(pArray, rows, columns);

    //Loop to terminate program
    while (true)
    {
        cout << "\nEnter letter \'q\' to terminate program\n";
        char c;
        cin >> c;

        if(c == 'q')
            break;
    }
} 
```

抱歉，代码格式不佳。我不明白如何在代码块中复制和粘贴。

所以我的问题是，如何用我的程序实现图表。我从使用指针偏移量创建数组并用它自己的名称标记它的基础开始。

我相信我必须更改所有引用以使用指针变量's、t、u、v。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T04:07:40.230

为了至少有所帮助，请注意，关于数组是*固定*的还是*变体*的问题并不十分清楚。您有两种尺寸；列数（宽度）和行数（高度）。还要注意这个声明：

> “在你的程序中只引用整数数组......”

是胡说八道。有“cols”整数数组，没有一个。

```
int rows, cols; // acquire rows and cols from wherever.

// create the row vector that will hold the column pointers.
//  this constitutes the first grey box above the main array.

int **rowsp = new int*[rows];

// for each slot we just allocated, set the value an allocation
//  of 'int' values. the list will be `cols` wide

for (int i=0;i<rows;)
    rowsp[i++] = new int[cols];

// thats both white boxes and the first grey box. rowsp points
//  to the allocated pointer array holding 'rows' pointers, each 
//  pointing to an int array hold 'cols' ints.

// now we make the two pointers that point at rowsp
int ***p1 = &rowsp;
int ***p2 = p1;

// and finally, setup s,t,u,v
int ****s = &p1;
int ****t = s;
int ****u = &p2;
int ****v = u; 
```

* * *

太棒了，但是阅读您的问题的上下文，**这根本不对**。根据问题，**您只有*四个*指针可以使用：`{s,t,u,v}`**必须声明一个适当的类型，以允许我们一直构建到最后的 int 数组。看看上面的代码（此时是一次性代码），我们知道我们需要四级间接。所以这一次，我们从`s`, `t`, `u`, and开始`v`，*往下*走。

```
int ****s = new int***; // p1 in the prior code
int ****t = s;          // points to the same p1

int ****u = new int***; // p2 in the prior code
int ****v = u;          // points to the same p2 
```

现在我们需要让我们的 p1 和 p2 也指向一个公共指针。这个指针将是`rowsp`上面代码中的指针（这意味着当我们完成 s、t、u 和 v 时，最终都应该有一个指向它的路径）

```
*s = new int**;         // s-->p1-->rowsp, t-->p1-->rows
*u = *s;                // u-->p2-->rowsp, v-->p2-->rowsp 
```

现在我们需要分配实际的行向量，它将包含指向整数的指针：

```
**s = new int*[rows];   // the integer pointer array. 
```

最后，用 'cols' 长度的 int 数组填充这个数组。

```
for (int i=0;i<cols;++i)
{
    *(**s+i) = new int[ cols ]();
    for (int j=0;j<cols;++j)
        *(*(**s+i)+j) = i+j; // <== beautiful dereference chain =P
} 
```

如果我们做对了，以下内容应该都指向同一件事：

```
cout << "**s = " << **s << endl;
cout << "**t = " << **t << endl;
cout << "**u = " << **u << endl;
cout << "**v = " << **v << endl; 
```

我把这种疯狂转移到你自己的一角钱上。上面的整个代码库出现在下面的一个连续列表中。您还可以[在 ideone.com 上看到它](https://ideone.com/ViwvYY)：

```
#include <iostream>

using namespace std;

int main()
{
    static const int rows = 8; // yours would come from user input
    static const int cols = 9;

    int ****s = new int***; // s --> p1
    int ****t = s;          // t --> p1

    int ****u = new int***; // u --> p2
    int ****v = u;          // v --> p2

    *s = new int**;         // s-->p1-->rowsp, t-->p1-->rows
    *u = *s;                // u-->p2-->rowsp, v-->p2-->rowsp

    **s = new int*[rows];   // s --> p1 --> rowsp --> int*[rows]

    for (int i=0;i<rows;++i)
    {
        *(**s+i) = new int[ cols ];
        for (int j=0;j<cols;++j)
            *(*(**s+i)+j) = (i+j) % cols; // <== beautiful dereference chain =P
    }

    cout << "**s = " << **s << endl;
    cout << "**t = " << **t << endl;
    cout << "**u = " << **u << endl;
    cout << "**v = " << **v << endl << endl;;

    cout << "======= S =======" << endl;
    for (int i=0;i<rows;++i)
    {
        for (int j=0;j<cols;++j)
            cout << *(*(**s+i)+j) << ' ';
        cout << endl;
    }
    cout << endl;

    cout << "======= T =======" << endl;
    for (int i=0;i<rows;++i)
    {
        for (int j=0;j<cols;++j)
            cout << *(*(**t+i)+j) << ' ';
        cout << endl;
    }
    cout << endl;

    cout << "======= U =======" << endl;
    for (int i=0;i<rows;++i)
    {
        for (int j=0;j<cols;++j)
            cout << *(*(**u+i)+j) << ' ';
        cout << endl;
    }
    cout << endl;

    cout << "======= V =======" << endl;
    for (int i=0;i<rows;++i)
    {
        for (int j=0;j<cols;++j)
            cout << *(*(**v+i)+j) << ' ';
        cout << endl;
    }
    cout << endl;

    // delete rows.
    for (int i=0;i<rows;++i)
        delete [] *(**s+i);

    // delete row pointer array
    delete [] **s;

    // delete rowsp pointer
    delete *s;

    // and finally, delete s and u (or t and v)
    delete s;
    delete u;

    return 0;
} 
```

**输出**（指针会有所不同）

```
**s = 0x100103b60
**t = 0x100103b60
**u = 0x100103b60
**v = 0x100103b60

======= S =======
0 1 2 3 4 5 6 7 8 
1 2 3 4 5 6 7 8 0 
2 3 4 5 6 7 8 0 1 
3 4 5 6 7 8 0 1 2 
4 5 6 7 8 0 1 2 3 
5 6 7 8 0 1 2 3 4 
6 7 8 0 1 2 3 4 5 
7 8 0 1 2 3 4 5 6 

======= T =======
0 1 2 3 4 5 6 7 8 
1 2 3 4 5 6 7 8 0 
2 3 4 5 6 7 8 0 1 
3 4 5 6 7 8 0 1 2 
4 5 6 7 8 0 1 2 3 
5 6 7 8 0 1 2 3 4 
6 7 8 0 1 2 3 4 5 
7 8 0 1 2 3 4 5 6 

======= U =======
0 1 2 3 4 5 6 7 8 
1 2 3 4 5 6 7 8 0 
2 3 4 5 6 7 8 0 1 
3 4 5 6 7 8 0 1 2 
4 5 6 7 8 0 1 2 3 
5 6 7 8 0 1 2 3 4 
6 7 8 0 1 2 3 4 5 
7 8 0 1 2 3 4 5 6 

======= V =======
0 1 2 3 4 5 6 7 8 
1 2 3 4 5 6 7 8 0 
2 3 4 5 6 7 8 0 1 
3 4 5 6 7 8 0 1 2 
4 5 6 7 8 0 1 2 3 
5 6 7 8 0 1 2 3 4 
6 7 8 0 1 2 3 4 5 
7 8 0 1 2 3 4 5 6 
```

# android - 第二个 TextView 未在 LinearLayout 中显示

> ID：14595296
> 
> 赞同：-2
> 
> 时间：2013-01-30T01:41:05.930
> 
> 标签：android, textview

我的应用程序中有两个 TextView，但第二个没有显示。我该如何解决？

```
<TextView
    android:id="@+id/logo"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:gravity="center"
    android:layout_gravity="center"
    android:text="Medieval 2" 
    android:textSize="30sp"
    android:background="#FF0000"
    android:textColor="#FFFFFF"/>
<TextView
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_below="@id/logo"
    android:text="The Video Game"/> 
```

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-01-30T02:03:12.530

你可以试试这个：

代替

```
android:layout_below="@id/logo" 
```

和

```
android:layout_below="@+id/logo" 
```

如果这不起作用，图形布局可能会有警告。

# c - 从子级到父级和 sigaction() 的异步信号

> ID：14595297
> 
> 赞同：0
> 
> 时间：2013-01-30T01:41:12.263
> 
> 标签：c, unix, signals, posix

**重要的前置知识：**我有两个孩子是由原始过程分叉的。子节点只需将两个用户定义的信号（SIGUSR1 或 SIGUSR2）之一发送给父节点。

代码构造如下：

```
if (pid == 0 || second_child == 0) {
    /* Just some pseudocode for basic logic */
    while (1) {
        sleep(2);
        kill(parent_pid, SIGUSR1) or kill(parent_pid, SIGUSR2);
    }
} else {
    while (1) {
        struct sigaction psa;
        psa.sa_handler = sigHandler;
        /* three signals that need to be handled */
        sigaction(SIGUSR1, &psa, NULL);
        sigaction(SIGUSR2, &psa, NULL);
        sigaction(SIGINT, &psa, NULL);
        pause();
    }
} 
```

sigHandler 方法：

```
void sigHandler (int sigNum) {
    switch(sigNum) {
        case SIGUSR1:
            //print something using write()
            break;
        case SIGUSR2:
            //print something using write()
            break;
        default:
            exit(0);
    }
} 
```

对 sigHandler() 的调用没有按应有的方式发生。sigHandler() 中发生的打印语句最终只是停止并且没有输出。我相信问题涉及在执行 sigHandler 时向父级发送信号，但我不确定。

# vim - VimL：正确使用`call()`？我不断收到错误

> ID：14595298
> 
> 赞同：0
> 
> 时间：2013-01-30T01:41:16.743
> 
> 标签：vim

任何帮助，将不胜感激。我正在使用以下内容：

```
let g:usefulstatusline_normal=call(exe, ['hi StatusLine'], {}) 
```

我得到：

```
E15: Invalid expression: call(exe, ['hi StatusLine'], {}) 
```

我究竟做错了什么？这可能是显而易见的，我知道。

我想要实现的是获取当前颜色方案的状态线的颜色和内容并将其包含在变量中。以便我以后可以重新使用它。

任何帮助表示赞赏，也将不胜感激有关如何以更好的方式实现这一目标的任何提示。

如果您想要完整代码，请访问此文件：[https ://github.com/Greduan/vim-usefulstatusline/blob/master/autoload/usefulstatusline_colorize.vim](https://github.com/Greduan/vim-usefulstatusline/blob/master/autoload/usefulstatusline_colorize.vim)

现在忽略顶部，它只是为了测试目的。:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T03:57:07.060

这里的问题是你想要`:highlight command`. 与 vim 中的函数不同，它返回一个可以分配给表达式左侧的值的值，此命令回显其输出。在这种情况下，您需要暂时将输出重定向到变量中，然后恢复正常输出，如下所示：

```
redir => g:usefulstatusline_normal
silent! exec 'hi StatusLine'
redir END 
```

请注意，该`:highlight`命令可能输出的值可能是单行上不存在的突出显示组的错误，或者是换行符然后是输出，因此您需要做的工作比上面的示例多一点：

```
" Returns: hl group value or '' on nonexistent highlight group
" Usage: let foo = GetHL('StatusLine')
function! GetHL(grp)
  redir => hlOutput
  silent! exec 'hi '.a:grp
  redir END
  let hlVal = matchstr(hlOutput, '\v%(\nStatusLine\s+xxx\s+)@<=.*')
  return hlVal
endfunction 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-30T07:50:31.957

请注意，为了查询高亮组的属性，您不需要解析`:hi`命令的输出（无论如何，这只能作为最后的手段）。您可以使用`hlID()`和`synIDattr()`功能的组合来做到这一点：

```
:echo synIDattr(synIDtrans(hlID('StatusLine')), 'bg') 
```

# c++ - C++中的$符号

> ID：14595300
> 
> 赞同：8
> 
> 时间：2013-01-30T01:41:25.410
> 
> 标签：c++, multithreading, syntax, locking

我从一个开源库中阅读了以下代码。令我困惑的是美元符号的使用。任何人都可以澄清代码中 $ 的含义。非常感谢您的帮助！

```
 __forceinline MutexActive( void ) : $lock(LOCK_IS_FREE) {}
    void lock  ( void );
    __forceinline void unlock( void ) { 
      __memory_barrier();     // compiler must not schedule loads and stores around this point
      $lock = LOCK_IS_FREE; 
    }
  protected:
    enum ${ LOCK_IS_FREE = 0, LOCK_IS_TAKEN = 1 };
    Atomic $lock; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-30T01:50:12.357

它被用作*标识符*的一部分。

`[C++11: 2.11/1]`将*标识符*定义为“任意长的字母和数字序列”。它在上面给出的语法中定义了“字母和数字”，它只明确命名数字、小写和大写罗马字母以及下划线字符，但也允许“其他实现定义的字符”，其中大概是一个。

在这种情况下，`$`除了作为标识符的一部分之外没有特殊含义——在这种情况下，是变量的名称。它位于变量名的*开头没有特殊意义。*

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-30T01:59:57.203

有一个 gcc 开关，`-fdollars-in-identifiers`它明确允许在标识符中使用 $。

也许他们启用了它并将 $ 用作不太可能与正常名称发生冲突的东西。

> **-fdollars-in-identifiers**
> 
> 在标识符中接受 $。您还可以通过选项 -fno-dollars-in-identifiers 明确禁止使用 $。（GNU C 在大多数目标系统上默认允许 $，但也有一些例外。）传统 C 允许字符 $ 构成标识符的一部分。但是，ISO C 和 C++ 禁止在标识符中使用 $。

请参阅[gcc 文档](http://gcc.gnu.org/onlinedocs/gcc-3.3.5/gcc/C_002b_002b-Dialect-Options.html)。希望链接保持良好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T01:49:20.640

即使美元符号根据标准不是有效的标识符，也可以被接受。例如visual studio（我也认为ggc，但我不确定）似乎接受它。

检查此文档： http: [//msdn.microsoft.com/en-us/library/565w213d](http://msdn.microsoft.com/en-us/library/565w213d(v=vs.80).aspx) (v=vs.80).aspx 和这个：[C++ 03 中的标识符中是否允许使用美元符号？](https://stackoverflow.com/questions/936744/are-dollar-signs-allowed-in-identifiers-in-c)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-30T01:48:30.577

C++ 标准说：

> 基本源字符集由 96 个字符组成：空格字符、表示水平制表符、垂直制表符、换页符和换行符的控制字符，以及以下 91 个图形字符：abcdefghijklmnopqrstu vwxyz ABC DEFGHIJKLMNOPQRSTUVWX YZ 0 1 2 3 4 5 6 7 8 9 _ { } [ ] # ( ) < > % : ; . ? * + - / ^ & | ！= , \" '</p>

上面描述的基本源字符集中没有$；代码中的 $ 字符是基本源字符集的扩展，这不是必需的。考虑在英国，使用英镑符号（£ 或 ₤）代替美元符号 ($)。

# python - 如何防止特定类在 SQLAlchemy 中被更新/删除？

> ID：14595302
> 
> 赞同：4
> 
> 时间：2013-01-30T01:41:43.663
> 
> 标签：python, session, event-handling, sqlalchemy

假设我有类 Dog()、Walrus()、Boot()。我想让它这样你就不能更新 Walrus 对象，尽管你可以删除它们并且你永远不能删除 Boot 对象。所以如果这样做：

```
dog1 = Dog("DogName")
walrus1 = Walrus("WalrusName")
boot1 = Boot("BootName")
session.add(dog1)
session.add(walrus1)
session.add(boot1)
session.flush()
transaction.commit()
dog1.name = "Fluffy"
walrus1.name = "Josh"
boot1.name = "Pogo"
session.flush()
transaction.commit() 
```

它会在更改海象名称时引发异常，但允许更改其他名称。如果我试图删除 boot1 它会抛出异常。

我对事件监听器进行了几次尝试，但我接触的两种方式都没有让我一路走好：

```
#One possibility
#I don't know how to tell that it's just an update though
#The is_modified seems to take inserts as well

@event.listens_for(Session, 'before_flush')
def listener(thissession, flush_context, instances):
    for obj in thissession:
        if isinstance(obj, Walrus):
            if thissession.is_modified(obj, include_collections=False):
                thissession.expunge(obj)

#Possiblity two
#It says before_update but it seems to take in inserts as well
#Also documentation says it's not completely reliable to capture all statements
#where an update will occur
@event.listens_for(Walrus, 'before_update', raw=True)
def pleasework(mapper, connection, target):
    print "\n\nInstance %s being updated\n\n" % target
    object_session(target).expunge(target) 
```

编辑1：

```
@event.listens_for(Walrus, 'before_update', raw=True)
def prevent_walrus_update(mapper, connection, target):
    print "\n\nInstance %s being updated\n\n" % target
    if target not None:
        raise

@event.listens_for(Boot, 'before_delete', raw=True)
def prevent_boot_delete(mapper, connection, target):
    print "\n\nInstance %s being deleted\n\n" % target
    if target not None:
        raise 
```

我已经让这个工作，它不允许我更新 Walrus 或删除 Boot，但是任何试图尝试都会崩溃的 AttributeError 的提示，我似乎没有任何能力捕捉到。例如，如果我运行 Walrus1.name = "Josh" 然后任何查询，即使是 get，AttributeError 都会使应用程序崩溃。我比以前走得更远，但仍然相当不便。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T09:04:56.703

您发布的第一个解决方案看起来应该可以工作，如果您只是将循环更改为：

```
for obj in thissession.dirty: 
```

`before_flush`您可以通过循环使用相同的事件来防止删除 Boot 对象`thissession.deleted`。

# javascript - 在 iframe 中加载的页面能否找到其父级的 url？

> ID：14595303
> 
> 赞同：0
> 
> 时间：2013-01-30T01:41:44.820
> 
> 标签：javascript, iframe, browser

> **可能重复：**
> [获取 parent.location.url - iframe - 从孩子到父母](https://stackoverflow.com/questions/4413414/get-parent-location-url-iframe-from-child-to-parent)

在标签中加载到另一个页面内的页面是否有可能找到有关其父级的更多信息，而不仅仅是存在的事实？

我知道JS可以检查当前页面是否是顶部窗口。如果不是，则很可能它被加载到 iframe 中。但它能发现更多吗？例如，它可以执行一些代码来查找顶部框架的 URL 吗？

# c# - 带有显示 html 的对话框部分视图的 mvc PartialView

> ID：14595310
> 
> 赞同：4
> 
> 时间：2013-01-30T01:42:21.963
> 
> 标签：c#, json, asp.net-mvc-3, jquery

我想要做的是打开一个 jquery 对话框。发生的事情是，当它尝试打开 PartialView 时，我看到了以下 html 文本与表单的呈现：

```
 <form action="/Plt/FileUpload" method="post"><input data-val="true" data-val-number="The field PlNum must be a number." data-val-required="The PlNum field is required." id="PlNum" name="PlNum" type="hidden" value="36028" />     <div id="errMsg" >

     </div>
     <p>File upload for Pl# 36028</p>
     <input type="file" name="file" />
     <input type="submit" value="OK" />
     </form> 
```

这是控制器动作：

```
 public ActionResult FileUpload(int id)
       {
         var model = new FileUpload { PlNum = id };
         return PartialView(model);
       } 
```

这是 PartialView 的视图：

```
 @model Ph.Domain.Lb.Models.FileUpload

    <script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script> 
```

```
 @using (Html.BeginForm("FileUpload", "Plts", FormMethod.Post, null))
    {

      @Html.HiddenFor(a => a.PlNum)

     <div id="errMsg" >
     @if (TempData["ErrMessage"] != null)
     {
       @TempData["ErrMessage"]
     }
     </div>

    <p>File upload for Pl# @Model.PlNum</p>
    <input type="file" name="file" />
    <input type="submit" value="OK" />
   } 
```

这就是我的 ajax 调用的样子：

```
 var url = '@Url.Action("FileUpload", "Plt")' + '?id=' +  encodeURIComponent(rowid);

                 $.ajax({
                           url: url,
                           type: 'GET',
                           success: function(result) {                                    

                if (result.success) {
                  $('#dialog').dialog('close');
                } else {

             // refresh the dialog
                $('#dialog').html(result);
             }
         } 
```

回顾一下，ajax 调用确实到达了 ActionResult 但不确定它何时尝试显示部分视图，它显示的是 HTML 与呈现的 html。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T01:58:00.430

这里的问题是您正在尝试加载尚未呈现到对话框的 innerHTML 中的剃刀视图。相反，您应该做的是在创建对话框时将对话框的 href 属性设置为 URL.Action 链接。有关示例，请参见下面的链接。

[http://www.matthidinger.com/archive/2011/02/22/Progressive-enhancement-tutorial-with-ASP-NET-MVC-3-and-jQuery.aspx](http://www.matthidinger.com/archive/2011/02/22/Progressive-enhancement-tutorial-with-ASP-NET-MVC-3-and-jQuery.aspx)

另一个选项，不是很容易维护 IMO，但可以按照您当前的方式工作，是从 action 方法返回原始 HTML。

我认为第一个解决方案更好，因为控制器没有被 HTML 字符串连接污染。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T01:58:42.587

jQuery 不会让你在`.html()`. 您可以通过两种方式做到这一点：

代替原生 DOM HTML 注入：

```
$('#dialog')[0].innerHTML = result; 
```

.

或者，将其设置为数据属性并手动加载：

鉴于：

```
 <form action="/Plt/FileUpload" ...
         data-script="@Url.Content("~/Scripts/jquery.validate.min.js")"
           ... /> 
```

在 JS 中：

```
$('#dialog').html(result);
var dialogScript = $('#dialog').children().first().data("script");
if(!!dialogScript) { $.getScript(dialogScript); }; 
```

参考：[http ://api.jquery.com/jQuery.getScript/](http://api.jquery.com/jQuery.getScript/)

.

另一种方法是使用`load`方法，如：

```
$("#dialog").load(url, null, function() {
    // on a side note, put $("#dialog") in a variable and reuse it
   $("#dialog").dialog();
}); 
```

参考：[http ://api.jquery.com/load/](http://api.jquery.com/load/)

.

在 jQuery 验证的情况下，我会考虑将其添加到父页面本身。您希望它可以在相当多的情况下使用。

# javascript - 你如何按类找到所有 div 并将它们全部删除？

> ID：14595326
> 
> 赞同：-2
> 
> 时间：2013-01-30T01:44:22.240
> 
> 标签：javascript, jquery

我有许多具有特定类的 div，我想删除所有这些 div。你如何使用 jQuery 或 javascript 做到这一点？但是，如何删除具有特定类的**所有 div ？**谢谢！

代码：

```
<div>
  <div class='testa'>test a</div>
  <div class='testb'>test b</div>
  <div class='testc'>test c</div>
  <div class='testa'>test a</div>
  <div class='testb'>test b</div>
  <div class='testc'>test c</div>
  <div class='testa'>test a</div>
</div> 
```

您将如何删除`testa`班级中的所有 div？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T01:45:18.653

如果您尝试过[`remove`](http://api.jquery.com/remove)，那么您就会知道它适用于匹配选择中的每个元素：

```
$('.testa').remove() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T01:45:10.367

使用 jQuery：

```
$(".testa").remove(); 
```

[阅读jQuery 文档](http://api.jquery.com/)和一些教程可能是个好主意。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T01:51:44.690

它与 jquery 一起删除节点。

```
$(".testa").remove();
$(".testb").remove();
$(".testc").remove(); 
```

# php - UTF8_encode 之后的奇怪字符

> ID：14595337
> 
> 赞同：0
> 
> 时间：2013-01-30T01:45:31.410
> 
> 标签：php, utf-8, encode, arabic

当我尝试从更改`windows-1256`为`utf8`文本时

```
ÇáÑßä ÇáÚÇã ááãæÇÖíÚ ÇáÚÇãÉ 
```

我正在尝试更改使用`file_get_contents`.

```
header('Content-Type: text/html; charset=utf-8'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T01:54:13.903

这听起来像是[iconv的工作](http://www.php.net/manual/en/function.iconv.php)

```
$output = iconv("ISO-8859-1", "UTF-8", file_get_contents($url)); 
```

由于我不知道您的内容是什么，您可能需要尝试 UTF-8//TRANSLIT 和 UTF-8//IGNORE

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T01:55:30.387

虽然我不懂阿拉伯语，但这可能会为您指明正确的方向：

```
$str = 'ÇáÑßä ÇáÚÇã ááãæÇÖíÚ ÇáÚÇãÉ';
$str = iconv("windows-1256", "utf-8//TRANSLIT//IGNORE", $str);
echo $str; 
```

# svn - SVN - 无法撤消还原

> ID：14595339
> 
> 赞同：0
> 
> 时间：2013-01-30T01:45:46.357
> 
> 标签：svn, version-control, ankhsvn, revision-history

好的，我只是还原了几百行好的代码。我知道我知道。这都是我的错，与 SVN 或任何版本控制系统无关。我只是很累，很分心，所以按下了 Revert 按钮而不是 Commit 按钮。

SVN（可能是 Ankh 客户端）可以做很多事情来保护用户免于意外采取破坏性操作。但我不会责怪工具，我会承担责任，我会用自己的时间来支付。

现在，我谦虚地征求你的意见。

我应该经常提交吗？即使代码不完整？即使代码不会运行？

沙盒呢？它们是否用于提交*开发内*代码？

另一方面，有没有简单的本地版本控制软件？任何监视文件系统并记录所有更改的东西？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T02:07:25.127

就个人而言，我喜欢创建 SVN 分支并经常提交到我的分支。这样可以保持干净的主干，但允许自由编写许多代码迭代，并根据需要自由恢复。我已经学会了在主干发生变化时不要让我的 SVN 分支运行太久，因为合并可能会让人头疼——尤其是在树结构发生变化的情况下。

综上所述，我工作的组织将转向 Git。

Apache 在此处发布他们认为是一些 SVN 最佳实践的内容：http: [//svn.apache.org/repos/asf/subversion/trunk/doc/user/svn-best-practices.html](http://svn.apache.org/repos/asf/subversion/trunk/doc/user/svn-best-practices.html)

这篇文章中也有很好的信息： [Subversion 分支/主干最佳实践 - 保持分支最新？](https://stackoverflow.com/questions/570071/subversion-branch-trunk-best-practice-keeping-branch-up-to-date)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T01:52:07.327

“本地更改”就是 git 的亮点。由于 git 在本地为您提供了完整的 repo，您​​可以尽可能频繁地提交来构建日志。

就个人而言，在使用 svn 时，我总是根据需要经常分支和提交。然后我完成后合并回主干。当然，与 git 不同，它要求您连接到远程 svn 存储库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-04T14:45:21.343

您也可以尝试使用化石作为本地存储库来保存本地历史。即使它可以用作 git，我也喜欢用它来保存本地文件的历史记录，并在需要时将 repo 移动到另一台机器上。

[http://fossil-scm.org/](http://fossil-scm.org/)

它非常小，不需要安装任何东西（只需 1 个文件）它有一个小型 Web 服务器，包括 wiki 等。试试看。

# c# - 在流上生成 XOR 校验和的简单方法？

> ID：14595341
> 
> 赞同：3
> 
> 时间：2013-01-30T01:45:58.883
> 
> 标签：c#, design-patterns, checksum, xor

在 C# 中，是否有一种简单的方法可以在 MemoryStream（二进制）上生成 XOR 校验和，不包括第一个和最后两个字节？

此外，扩展 BinaryWriter 并在编写 Stream 时更容易吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T01:52:40.990

您可以使用 LINQ 来获得答案：

```
var checksum = memStream
    .GetBuffer() // Get the underlying byte array
    .Skip(1)     // Skip the first byte
    .Take(memStream.Length-3) // One for the beginning, two more for the end
    .Aggregate(0, (p,v) => p ^ v); // XOR the accumulated value and the next byte 
```

# mysql - 在 iOS 应用中使用 Mysql

> ID：14595343
> 
> 赞同：0
> 
> 时间：2013-01-30T01:46:38.693
> 
> 标签：mysql, ios, web

我的朋友已经有他自己的工作网站（卖一些东西）。我们有一个想法为网站创建**iOs 应用程序**以吸引更多人（对我来说 - 获得一些急需的经验）。

**UI**会很简单，不会像使用网站数据那样有很多问题。我们需要该应用程序在本地拥有一些数据，以便没有互联网访问权限的人能够使用该应用程序。

但是，当然，我们希望应用程序中的信息是最新的，所以我需要以某种方式使用**MySQL**数据（我的意思是，如果这个人可以访问互联网，应用程序可以使用它并下载一些数据, 如果不是 - 应用程序必须包含一些要显示的数据）。老实说，我希望应用程序真的很好，所以我有一个问题：**什么组合更好用？？？**

1.  要使用核心数据，请创建一个数据模型（它很大，很难复制，要创建很多类）。我可以做到，但是如何更新数据呢？=) 不知道。
2.  要创建一个**sqlite数据库，然后使用****php**代码之类的东西插入 get 并将数据编码为**json**，然后解析它。
3.  也许我应该直接从应用程序连接到**MySQL**并使用它的数据，因为本地不可能有相同的数据？
4.  或者只是解析它，使用**json**或**xml**？

请帮帮我，我需要我的应用程序既酷又健壮，但我不知道该怎么做。也许您能说出解决此类问题的更好方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T01:54:31.233

通常，您必须使用 SQLite 在您的应用程序中构建一个类似的数据库，并通过某种 API 桥从 MySQL 导入数据。进行这种数据交换的一种简单方法是通过对记录属性进行编码的 JSON。XML 也是一种可能的传输机制，但往往会产生更多开销并且最终使用起来更加棘手。您将来回发送的通常是键值对集，而不是整个文档。

坚持使用 Core Data，除非你有非常好的理由使用其他东西。发现它令人讨厌或与众不同并不是一个好的理由。一开始可能有点棘手，但在实践中，如果使用得当，它往往不会引人注目。

除非您正在编写明确的 MySQL 客户端，否则**永远不要**在 iOS 应用程序中直接连接到 MySQL。时期。甚至不要考虑这样做。不仅不可能有效保护，而且预计 iOS 网络非常不可靠、速度慢，而且经常完全不可用。您的应用程序必须能够利用有限的带宽，处理非常高的延迟，并将操作分解为可能成功的小事务，而不是一个注定会失败的长时间运行的操作。

您如何在数据库和客户端之间同步数据？这取决于您要使用的网络堆栈。这里有很多选择，但至少你应该使用 Ruby on Rails、Django 或 NodeJS 之类的东西进行原型设计。PHP 是可行的，但是没有数据库框架会很快变得很乱。

# scala - sys.process 将进程包装为函数

> ID：14595349
> 
> 赞同：8
> 
> 时间：2013-01-30T01:47:15.090
> 
> 标签：scala

我有一个外部进程，我想将其视为`String=>String`. 给定一行输入，它将以单行输出响应。看来我应该使用 scala.sys.process，这显然是一个优雅的库，可以让许多 shell 操作在 scala 中轻松访问。但是，我不知道如何执行这个简单的用例。

如果我在进程的标准输入中写入一行，它会将结果打印在一行中。如何使用`sys.process`来创建包装器，以便可以交互地使用该过程？例如，如果我有一个实现`ProcessWrapper`，这是一个程序，它的输出：

```
// abstract definition
class ProcessWrapper(executable: String) {
  def apply(line: String): String
}

// program using an implementation
val process = new ProcessWrapper("cat -b")
println(process("foo"))
println(process("bar"))
println(process("baz")) 
```

输出：

```
 1  foo
 2  bar
 3  baz 
```

重要的是不要为每次调用重新加载进程，`process`因为有一个重要的初始化步骤。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T20:18:00.377

所以 - 在我发表评论之后 - 这将是我的解决方案

```
import java.io.BufferedReader
import java.io.File
import java.io.InputStream
import java.io.InputStreamReader

import scala.annotation.tailrec

class ProcessWrapper(cmdLine: String, lineListenerOut: String => Unit, lineListenerErr: String => Unit,
                     finishHandler: => Unit,
                     lineMode: Boolean = true, envp: Array[String] = null, dir: File = null) {

  class StreamRunnable(val stream: InputStream, listener: String => Unit) extends Runnable {
    def run() {
      try {
        val in = new BufferedReader(new InputStreamReader(this.stream));
        @tailrec
        def readLines {
          val line = in.readLine
          if (line != null) {
            listener(line)
            readLines
          }
        }
        readLines
      }
      finally {
        this.stream.close
        finishHandler
      }
    }
  }
  val process = Runtime.getRuntime().exec(cmdLine, envp, dir);
  val outThread = new Thread(new StreamRunnable(process.getInputStream, lineListenerOut), "StreamHandlerOut")
  val errThread = new Thread(new StreamRunnable(process.getErrorStream, lineListenerErr), "StreamHandlerErr")
  val sendToProcess = process.getOutputStream
  outThread.start
  errThread.start

  def apply(txt: String) {
    sendToProcess.write(txt.getBytes)
    if (lineMode)
      sendToProcess.write('\n')
    sendToProcess.flush
  }

}

object ProcessWrapper {
  def main(args: Array[String]) {
    val process = new ProcessWrapper("python -i", txt => println("py> " + txt),
      err => System.err.println("py err> " + err), System.exit(0))
    while (true) {
      process(readLine)
    }
  }
} 
```

主要部分是 StreamRunnable，其中进程在线程中读取，接收到的行被传递给“LineListener”（一个简单的 String => Unit - 函数）。主要只是一个示例实现 - 调用 python ;)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T18:12:10.550

我不确定，但你想要这样的东西吗？

```
 case class ProcessWrapper(executable: String) {
    import java.io.ByteArrayOutputStream
    import scala.concurrent.duration.Duration
    import java.util.concurrent.TimeUnit

    lazy val process = sys.runtime.exec(executable)

    def apply(line: String, blockedRead: Boolean = true): String = {
      process.getOutputStream().write(line.getBytes())
      process.getOutputStream().flush()
      val r = new ByteArrayOutputStream
      if (blockedRead) {
        r.write(process.getInputStream().read())
      }
      while (process.getInputStream().available() > 0) {
        r.write(process.getInputStream().read())
      }
      r.toString()
    }

    def close() = process.destroy()
  }

  val process = ProcessWrapper("cat -b")

  println(process("foo\n"))
  println(process("bar\n"))
  println(process("baz\n"))
  println(process("buz\n"))
  println(process("puz\n"))

  process.close 
```

结果 ：

> ```
>  1    foo
> 
>  2    bar
> 
>  3    baz
> 
>  4    buz
> 
>  5    puz 
> ```

我认为[PlayCLI](https://github.com/gre/playCLI)是一种更好的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T18:09:20.883

[http://blog.greweb.fr/2013/01/playcli-play-iteratees-unix-pipe/](http://blog.greweb.fr/2013/01/playcli-play-iteratees-unix-pipe/)今天遇到了这个，看起来和你想要的完全一样

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-08T07:32:24.650

使用 Akka 演员怎么样。参与者可以有状态，因此可以引用一个打开的程序（在一个线程中）。您可以向该参与者发送消息。

ProcessWrapper 本身可能是一个类型化的 Actor，或者只是将函数调用转换为 Actor 调用的东西。如果您只有“流程”作为方法名称，那就`wrapper ! "message"`足够了。

让程序打开并准备好接收命令听起来像是一个接收消息的参与者。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-30T07:37:24.027

编辑：可能我的要求错了。您想将多行发送到同一进程。以下解决方案无法做到这一点。

一种可能性是向`ProcessBuilder`允许从字符串获取输入的扩展方法添加：

```
implicit class ProcessBuilderWithStringInput(val builder: ProcessBuilder) extends AnyVal {
  // TODO: could use an implicit for the character set
  def #<<(s: String) = builder.#<(new ByteArrayInputStream(s.getBytes))
} 
```

您现在可以使用如下方法：

```
scala> ("bc":ProcessBuilder).#<<("3 + 4\n").!!
res9: String = 
"7
" 
```

请注意，类型注释是必要的，因为我们需要两次转换（`String`-> `ProcessBuilder`-> `ProcessBuilderWithStringInput`，而 Scala 只会自动应用一次转换。

# javascript - 从 div 标签中查找数字并计算总数

> ID：14595357
> 
> 赞同：-6
> 
> 时间：2013-01-30T01:47:40.597
> 
> 标签：javascript, jquery, html

我有一个html文本如下

```
<div class="co"><b>op</b> (11:32:20): here some string</div>
<div class="cv"><b>cl</b> (11:32:42): here some another string</div>
<div class="co"><b>op</b> (11:33:15): another...</div>
<div class="co"><b>cl</b> (11:33:36): another...</div>
<div class="cv"><b>op</b> (11:33:45): another...</div>
<div class="co"><b>cl</b> (11:34:46): another...</div>
<div class="cv"><b>op</b> (11:35:00): another...</div>
<div class="co"><b>cl</b> (11:37:19): another...</div> 
```

如何从上面的示例中获取第一个 div 编号和最后一个 div 编号。在这种情况下，第一个 div 编号`is 11:32:20`和最后一个 div 编号`11:37:19`，我想计算差异，例如 `11:37:19`减去`11:32:20`

希望很清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T02:00:27.003

```
function getSeconds(time){
    var tokens = time.split(":");
    var seconds = parseInt(tokens[2]);
    seconds += parseInt(tokens[1]) * 60;
    seconds += parseInt(tokens[0]) * 60 *60;
    return seconds;
}

var divs = $(".co,.cv");
var firstHtml = $(divs.eq(0)).html();
var lastHtml = $(divs.eq(divs.length-1)).html();
var firstValue = firstHtml.substring(firstHtml.indexOf("(") +1, firstHtml.indexOf(")"));
var lastValue = lastHtml.substring(firstHtml.indexOf("(") +1, firstHtml.indexOf(")"));

var diff = getSeconds(lastValue) - getSeconds(firstValue);

console.log(diff); 
```

示例：http: [//jsfiddle.net/CRQFk/](http://jsfiddle.net/CRQFk/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T02:14:40.683

[另一种选择](http://jsfiddle.net/bradchristie/w459w/)：

```
// parses the hh:mm:ss out of the div's text
function timeStrToDate(str){
    // look for hh:mm:ss and extract it
    var m = str.match(/(\d{1,2}:\d{1,2}:\d{1,2})/);
    if(m){
        // we were able to locate it, so convert it to a Date
        // (we only care about time, so use epoc as a ref. point)
        return new Date('Thu, 01 Jan 1970 ' + m[1]);
    }
    // return an empty time by default
    return new Date('Thu, 01 Jan 1970');
}
// converts straight seconds in to hh:mm:ss
function secondsToTime(sec){
    var r = [], d
    // go through by hours, minutes then seconds
    // and divide then subtract each time
    var exp = [3600,60,1];
    for (e = 0; e < exp.length; e++){
        if (sec >= exp[e]){
            d = Math.floor(sec / exp[e]);
            sec -= d * exp[e];
            r.push(d < 10 ? '0'+d : d); // pad it so 9 becomes 09
        }
    }
    return r.join(':');
}

// the actual jQuery code

// grab all divs
var $divs = $('div.co,div.cv');
// Grab first element, get text, and parse the time out
var $first = timeStrToDate($divs.first().text()),
    // do the same with the last
    $last = timeStrToDate($divs.last().text()),
    // get the difference (returned in seconds elapsed)
    $delta = Math.abs($last - $first) / 1e3; // `/1e3` -> milliseconds to seconds

 // here's the end result, 4:59 in this case
console.log(secondsToTime($delta)); 
```

# ember.js - 如何使用 Ember js 和 Handlebars js 将文本包装在块中？

> ID：14595364
> 
> 赞同：2
> 
> 时间：2013-01-30T01:48:30.077
> 
> 标签：ember.js, wrapper, handlebars.js, helper

我想在块中包装一些文本。无法弄清楚如何做到这一点。

JS：

```
 Handlebars.registerHelper('mywrap', function (options) {
      return '<p class="TEST" >' + options.fn(this) + '</p>';
    }); 
```

模板：

```
 {{#mywrap}}
        This text must be wrapped
    {{/mywrap}} 
```

最终的 html 应该是这样的：

```
<p class="TEST">This text must be wrapped</p> 
```

Ember v1.0.0-pre4，Handlebars 1.0.rc.2，Jquery 1.9.0

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T03:13:24.710

有很多方法可以将文本包装在一个块中，这实际上取决于您的用例。我假设出于某种原因，从字面上写 HTML 不是你要找的。

首先，您可以只返回一个 Handlebars SafeString，但是如果您包装用户提供的内容，这会带来安全问题。

```
Ember.Handlebars.registerHelper('mywrap', function (options) {
  return new Handlebars.SafeString('<p class="TEST" >' + options.fn(this) + '</p>';)
}); 
```

其次，您可以将其包装在视图中

```
{{#view classNames="TEST" tagName="p"}}
  This text must be wrapped
{{/view}} 
```

第三，您可以创建一个创建视图的把手助手。

```
Ember.Handlebars.registerHelper('mywrap', function (options) {
  var view = Ember.View.extend({tagName:"p",classNames:"TEST"})
  return Ember.Handlebars.helper.view.call(this, view, options)
}); 
```

警告，我实际上没有检查代码，所以可能有错别字

# php - 正则表达式在文本中查找包含特殊字符的字符串

> ID：14595386
> 
> 赞同：2
> 
> 时间：2013-01-30T01:50:45.397
> 
> 标签：php, regex

我正在尝试制定一个正则表达式，它允许我在一段文本中找到一个字符串，如果该字符串单独存在，即不在另一个单词中（但被特殊字符包围是可以的）。

```
/\bword\b/i 
```

上面的正则表达式工作正常，并在文本中找到“单词”。当我想找到的词是“c++”之类的词时，问题就来了。在这种情况下，它匹配任何出现的“c”字符。我试过转义“+”字符，但没有任何区别。我假设因为“+”是一个非单词字符，我可能走错了路，使用单词边界不是我应该做的。

所以我想问题是，我怎样才能使用正则表达式在一段文本中找到一个字符串，它自己，不管字符串是字母数字还是包含特殊字符。因此，在以下文本中，它应该匹配“c++”的 3 次出现：

```
c++
(c++)
perl/c++/assembly 
```

但它不应该匹配以下内容：

```
maniac++
c++abc 
```

这是为了让我的脚本可以判断用户的简历/简历中是否存在特定技能。我将它与 PHP 的 preg_match_all() 函数一起使用。

我已经做了很多搜索，但无法提出解决方案，希望具有良好正则表达式知识的人可以提供帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T01:55:10.457

试试这个：

```
/(?<!\w)(c\+\+)(?!\w)/ 
```

这`(?<!\w)`是一个否定的lookbehind子句，这意味着单词字符不应该紧接在您的模式之前。该`(?!\w)`部分是负前瞻，这意味着单词字符不应立即跟随。

希望这可以帮助！

# django - 如何使用暴发户？

> ID：14595390
> 
> 赞同：0
> 
> 时间：2013-01-30T01:50:58.820
> 
> 标签：django, linux, upstart

我有一个要部署的 django 应用程序。我想使用 upstart 来运行应用程序。

到目前为止，我已将 upstart.conf 文件添加到 /etc/init

并尝试使用

```
start upstart 
```

但我得到的只是

```
start: Rejected send message, 1 matched rules; type="method_call", sender=":1.90" (uid=1000 pid=5873 comm="start upstart ") interface="com.ubuntu.Upstart0_6.Job" member="Start" error name="(unset)" requested_reply="0" destination="com.ubuntu.Upstart" (uid=0 pid=1 comm="/sbin/init") 
```

.conf 文件的内容是：

```
# my upstart django script
# this script will start/stop my django development server
# optional stuff
description "start and stop the django development server"
version "1.0"
author "Calum"

# configuration variables.
# You'll want to change thse as needed
env DJANGO_HOME=/home/django/django-nexus7/nexus7
env DJANGO_PORT=8000
env DJANGO_HOST=0.0.0.0 # bind to all interfaces

# tell upstart we're creating a daemon
# upstart manages PID creation for you.
#expect fork

pre-start script
chdir $DJANGO_HOME
exec /usr/bin/python rm sqlite3.db
exec /usr/bin/python manage.py syncdb
exec /usr/bin/python manage.py loaddata fixtures/data.json
emit django_starting
end script

script
# My startup script, plain old shell scripting here.
chdir $DJANGO_HOME
exec /usr/bin/python manage.py run_gunicorn -c config/gunicorn
#exec /usr/bin/python manage.py runserver $DJANGO_HOST:$DJANGO_PORT &
# create a custom event in case we want to chain later
emit django_running
end script 
```

我也尝试过使用更简单的 .conf 文件，但或多或​​少出现了相同的错误。如果有人能告诉我我做错了什么，我将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T18:46:06.597

Upstart 作业只能由 root 启动，如果您尝试以普通用户身份启动，则会出现该错误。尝试这个：

```
sudo start upstart 
```

# javascript - 正则表达式匹配相似的字符串

> ID：14595392
> 
> 赞同：0
> 
> 时间：2013-01-30T01:51:05.477
> 
> 标签：javascript, regex

我正在尝试通过 jquery 更改模块的类名，现在我有这个 RegEx

/模块-\w+/gi

以这种方式使用

```
//// Removes all module-xxxx classes
var classes = $target[0].className.replace(/module-\w+/gi, ''); 
```

到目前为止，这一直很好，但是我必须更改模块类的结构，使其类似于

```
<div class="module">
    <div class="module-header">
         <div class="module-header-content module-blue ..."></div>
    </div>
    <div class="module-content"></div>
</div> 
```

... 只是意味着可能有其他类名。

我需要更改正则表达式，使其仅匹配**module-blue**（可以是 module-default、module-green、module-whatever，但始终采用**module-COLORNAME**的格式）而不匹配**module-header-content**也是。

jquery选择类名：module-header-content module-blue

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T01:58:32.930

```
var classes = $target[0].className.replace(/\bmodule-\w+(?!-)\b/gi, ''); 
```

对于单词边界，表达式必须匹配整个组，`module-`后跟至少一个*不*跟破折号的字母。

[http://jsfiddle.net/ExplosionPIlls/WqbKJ/](http://jsfiddle.net/ExplosionPIlls/WqbKJ/)

# ruby-on-rails - 删除 has_many :through 关联不会改变模型的 updated_at 属性

> ID：14595393
> 
> 赞同：8
> 
> 时间：2013-01-30T01:51:12.463
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, rails-activerecord

我很难让 updated_at 列更新具有通过 CasinoAmenity 提供的多种便利设施的赌场模型。赌场的 updated_at 列在添加设施时会正确更新，但在删除它们时不会。

这是我的（简化的）模型：

赌场.rb

```
class Casino < ActiveRecord::Base
  has_many :amenity_casino, :dependent => :destroy
  has_many :amenities, :through => :amenity_casino
end 
```

amenity_casino.rb

```
class AmenityCasino < ActiveRecord::Base
  belongs_to :casino, :touch => true
  belongs_to :amenity, :touch => true
end 
```

舒适度.rb

```
class Amenity < ActiveRecord::Base
  has_many :amenity_casinos, :dependent => :destroy
  has_many :casinos, :through => :amenity_casinos
end 
```

现在到控制台。检查初始 updated_at 时间。

```
> Casino.find(5).updated_at
=> Wed, 30 Jan 2013 00:30:04 UTC +00:00 
```

为赌场增添便利设施。

```
> Casino.find(5).amenities << Amenity.first
=> [#<Amenity id: 1, name: "asdf", weight: "", created_at: "2012-11-10 02:29:14", updated_at: "2013-01-30 01:29:14", description: "asdf">] 
```

确认关联已保存到数据库

```
> Casino.find(5).amenities
=> [#<Amenity id: 1, name: "asdf", weight: "", created_at: "2012-11-10 02:29:14", updated_at: "2013-01-30 01:29:14", description: "asdf">] 
```

正如预期的那样，我们可以看到该赌场的 updated_at 时间发生了变化。

```
> Casino.find(5).updated_at
=> Wed, 30 Jan 2013 01:29:14 UTC +00:00 
```

现在让我们从赌场中移除该设施。

```
> Casino.find(5).amenities = []
=> [] 
```

现在确保它可以很好地访问数据库

```
> Casino.find(5).amenities
=> [] 
```

现在让我们检查一下赌场的 updated_at 列...

```
> Casino.find(5).updated_at
=> Wed, 30 Jan 2013 01:29:14 UTC +00:00 
```

如您所见，这与我们从赌场中移除便利设施之前相同。我还尝试在 AmenityCasino 上使用 before_destroy 过滤器来触摸赌场，但这似乎没有奏效。

我很想听听这里是否有人有任何解决方案。如果重要的话，我会使用 ActiveAdmin 来管理一切。

Rails 版本是 3.2.11

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-30T02:51:51.167

`amenity_casino`首先，您在模型的两个位置的末尾缺少一个“s” `Casino`。

应该是这样的：

```
class Casino < ActiveRecord::Base
  has_many :amenity_casinos, :dependent => :destroy
  has_many :amenities, :through => :amenity_casinos
end 
```

不过，这并不能解决这里的问题。参考[this (some old) SO answer](https://stackoverflow.com/questions/3531795/issues-with-has-many-through-cache-touch-and-counter-cache)，看起来问题是连接表条目被删除，而不是被破坏，并且删除不会触发该`touch`方法，因此`updated_at`不会更新。

为了解决这个问题，您可以`:after_remove`向关联添加一个选项并传递一个`proc`调用`touch`模型本身的方法：

```
has_many :amenity_casinos, :dependent => :destroy
has_many :amenities, :through => :amenity_casinos,\
         :after_remove => proc { |a| a.touch } 
```

我已经对此进行了测试，它似乎有效：

```
Casino.find(5).updated_at
#=> Wed, 30 Jan 2013 03:21:29 UTC +00:00
Casino.find(5).amenities << Amenity.first
#=> [#<Amenity id: 1, name: nil, created_at: "2013-01-30 02:48:49", updated_at: "2013-01-30 03:25:23">]
Casino.find(5).amenities
#=> [#<Amenity id: 1, name: nil, created_at: "2013-01-30 02:48:49", updated_at: "2013-01-30 03:25:23">]
Casino.find(5).updated_at
#=> Wed, 30 Jan 2013 03:25:23 UTC +00:00
Casino.find(5).amenities = []
#=> []
Casino.find(5).updated_at
#=> Wed, 30 Jan 2013 03:27:33 UTC +00:00 
```

您可以看到时间戳已更改。`Amenity`如果您还想`updated_at`更新该模型的属性，则必须对模型执行相同的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-14T10:21:47.907

**在我说这个之前，我必须注意我不确定这在 Rails 3.2 中是否有效，但我确信它在 Rails 4+ 中有效**

现在我知道这已得到解答，但仅供将来参考，而不是

```
> Casino.find(5).amenities = [] 
```

您可以使用`destroy_all`将销毁所有`join_model`记录和`touch`关联的方法（如果您在示例中列出了该选项）并`destroy`在`join_model`（在示例中）执行适当的回调（用于`AmenityCasino`）

```
> Casino.find(5).amenities.destroy_all 
```

# python - Python dateutil.parser 抛出“ValueError: day is out of range for month”

> ID：14595401
> 
> 赞同：9
> 
> 时间：2013-01-30T01:52:09.183
> 
> 标签：python, python-dateutil

我有以下代码可以正常运行输入格式`{Year}/{Month}`，例如`1994/02`

这是示例代码

```
>>> import dateutil.parser as dtp
>>> dtp.parse('1994/01')
datetime.datetime(1994, 1, 29, 0, 0)
>>> dtp.parse('1994/03')
datetime.datetime(1994, 3, 29, 0, 0)
>>> dtp.parse('1994/02')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/Users/antony/.virtualenvs/comp-invest/lib/python2.7/site-packages/dateutil/parser.py", line 720, in parse
    return DEFAULTPARSER.parse(timestr, **kwargs)
  File "/Users/antony/.virtualenvs/comp-invest/lib/python2.7/site-packages/dateutil/parser.py", line 317, in parse
    ret = default.replace(**repl)
ValueError: day is out of range for month 
```

如您所见，代码在 and 下运行良好`1994/01`，但在 这与闰年有什么关系时`1994/03`失败了？`1994/02`但更重要的是，我如何解决这个问题并让我的代码再次工作？

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-30T01:56:06.170

`dtp.parse`正在用当前日期的日期填充缺失的日期。您在 2013 年 1 月 29 日运行代码，而 2 月不存在第 29 天（即 1994 年 2 月 29 日）。

改用这个：

```
dtp.parse('1994/01'+'/01') 
```

无论何时执行代码，它都会给出一致的结果（每月的第一天）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-03-25T19:28:34.803

这是[dateutil](https://github.com/dateutil/dateutil/issues/25)中的一个错误，现已修复。2.5.0 及更高版本将不再有此问题。

如果必须使用早期版本，我认为“正确”的处理方式是指定`default`参数：

```
from dateutil.parser import parse
from datetime import datetime, date

# First of the current month, at midnight.
default_date = datetime.combine(date.today(), datetime.min.time()).replace(day=1)
dt = parse('1994/01', default=default_date) 
```

这将默认为当月的 1 日，而不是当天。

# javascript - jQuery.fn.slideToggle 与 jQuery.fn.slideDown 和 jQuery.fn.slideUp

> ID：14595402
> 
> 赞同：0
> 
> 时间：2013-01-30T01:52:17.723
> 
> 标签：javascript, jquery, jquery-animate

使用 jQuery 的 slideToggle 可以在您重复单击切换按钮时平滑地反转动画，而不会跳到末尾或错误地计算高度：

[http://jsfiddle.net/kGt4Y/4/](http://jsfiddle.net/kGt4Y/4/)

```
$('.toggle').click(function () {
    $('.panel').stop().slideToggle();
}); 
```

一起使用 jQuery 的 slideUp 和 slideDown 方法但是这样做时会错误地计算高度：

[http://jsfiddle.net/kGt4Y/3/](http://jsfiddle.net/kGt4Y/3/)

```
var isOpen = true;

$('.toggle').click(function () {
    if (!isOpen) {
        $('.panel').stop().slideDown();
        isOpen = true;
    }
    else {
        $('.panel').stop().slideUp();
        isOpen = false;
    } 
}); 
```

有谁知道 slideToggle 如何维护状态以及为什么 slideDown 和 slideUp 不知道？

# ios - 加速框架ios：最快的pythagoren计算

> ID：14595404
> 
> 赞同：1
> 
> 时间：2013-01-30T01:52:23.287
> 
> 标签：ios, matrix, accelerate-framework, pythagorean

所以我有 2 个矩阵：每个都是 100x100。

我正在寻找计算第三个矩阵，这样：M3[i]=sqrt(M1[i]^2 + M2[i]^2)。

我显然可以做 ForLoops，但我确信有更快的东西。

我深入研究了加速框架并迷失在 Linpack 世界中

任何帮助让我走上正轨......

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T02:09:47.310

Accelerate 框架是个好主意。

您可以使用[vDSP_vsq 之](http://developer.apple.com/library/mac/documentation/Accelerate/Reference/vDSPRef/Reference/reference.html#//apple_ref/c/func/vDSP_vsq)类的函数一次对矩阵的一列进行操作，将结果放在 M3 的相应列中。您可能必须制作两个结果矩阵（一个是 M1^2，另一个是 M2^2），然后通过添加调用[vDSP_vadd](http://developer.apple.com/library/mac/documentation/Accelerate/Reference/vDSPRef/Reference/reference.html#//apple_ref/c/func/vDSP_vadd)的列来添加它们以形成正确的 M3 结果矩阵，这又是能够一次操作一列。

[Apple 开发者页面上](http://developer.apple.com/library/mac/#documentation/Performance/Conceptual/vDSP_Programming_Guide/SampleCode/SampleCode.html#//apple_ref/doc/uid/TP40005147-CH205-44988)有示例代码（显示如何添加两个向量等）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T17:55:07.363

我认为最快的方法是使用

vDSP_vpythg 向量毕达哥拉斯；单精度。

从 A 中减去向量 C 并平方差，从 B 中减去向量 D 并平方差，将两组差平方相加，然后将和的平方根写入向量 E。

显然为 C 和 D 传递零向量。

# css - 捆绑 jquery css 时出现 404 错误，VS2012 发布到 Azure

> ID：14595405
> 
> 赞同：8
> 
> 时间：2013-01-30T01:52:26.233
> 
> 标签：css, azure, visual-studio-2012, jquery-ui-datepicker, bundling-and-minification

我有一个使用 jquery datepicker 的网站（在常规 VS2012 MVC4 模板中实现）。在 localhost 上运行时，它看起来和工作正常。但是当我发布（到 Azure）时，缺少一些 css。Chrome 开发工具在两个 css 文件上显示 404 错误：

[http://cyclelog.azurewebsites.net/Content/jquery.ui.base.css](http://cyclelog.azurewebsites.net/Content/jquery.ui.base.css) [http://cyclelog.azurewebsites.net/Content/jquery.ui.theme.css](http://cyclelog.azurewebsites.net/Content/jquery.ui.theme.css)

我注意到我的源代码树中没有这样的文件——这两个文件在 ~/Content/themes/base 下（不是直接在 Content/ 下）。我不知道该怎么做，因为——就像我说的——css 在 localhost 上运行良好。

我没有修改默认模板中创建的捆绑配置。或者，更确切地说，我这样做了，但只是为了解决问题——这没有用。我在捆绑初始化中恢复了原始代码：

```
bundles.Add(new StyleBundle("~/Content/css").Include(
            "~/Content/site.css",                
            "~/Content/themes/base/jquery.ui.all.css"));

bundles.Add(new StyleBundle("~/Content/themes/base/css").Include(
    "~/Content/themes/base/jquery.ui.core.css",                        
    "~/Content/themes/base/jquery.ui.resizable.css",
    "~/Content/themes/base/jquery.ui.selectable.css",
    "~/Content/themes/base/jquery.ui.accordion.css",
    "~/Content/themes/base/jquery.ui.autocomplete.css",                        
    "~/Content/themes/base/jquery.ui.button.css",
    "~/Content/themes/base/jquery.ui.dialog.css",
    "~/Content/themes/base/jquery.ui.slider.css",
    "~/Content/themes/base/jquery.ui.tabs.css",
    "~/Content/themes/base/jquery.ui.datepicker.css",
    "~/Content/themes/base/jquery.ui.progressbar.css",
    "~/Content/themes/base/jquery.ui.theme.css")); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-30T02:08:04.830

问题是包含`"~/Content/themes/base/jquery.ui.all.css"`在您的第一个捆绑包中。将该文件移动到第二个捆绑包中，它将起作用。

它在本地工作，因为在本地不会发生捆绑（假设您处于调试模式）。该文件中的 @import 有效，因为它正在查找正确的目录 ( `"/Content/themes/base/"`)，因为链接呈现为：

```
<link href="/Content/themes/base/jquery.ui.all.css" rel="stylesheet"/> 
```

部署此文件时，该文件将捆绑到`~/Content/css`. 样式表已捆绑，现在呈现为：

```
<link href="/Content/css?v=IqLBj6MTQkC-CU1" rel="stylesheet"/> 
```

所以现在两个 @import 语句失败了，因为该目录中不存在这两个文件。

但是，它们确实存在，`"~/Content/themes/base/"`这就是为什么它将在第二个捆绑包中工作，当所有东西都以发布模式捆绑时。

更多阅读有关如何在本地复制此问题的信息：[Scripts.Render using outdated javascript file](https://stackoverflow.com/questions/14570171/scripts-render-using-outdated-javascript-file/14570455#14570455)

# python - Cpython 和 fortran 链表之间的互操作性

> ID：14595406
> 
> 赞同：2
> 
> 时间：2013-01-30T01:52:40.297
> 
> 标签：python, fortran, fortran-iso-c-binding

我有一个大致类似于的 fortran 链表

```
type :: node
    type(node), pointer :: next => null()
    integer :: value
end type node 
```

理想情况下，我想使用 Cpython 与之交互。我使用 f2py 程序在 python 中使用了 fortran 子例程来创建共享对象。但是，f2py 不能与派生类型一起使用。

我的问题很简单，是否可以使用 cpython 在 Fortran 中访问类似链表之类的东西。我想我需要遵循 fortran 到 c 到 cpython 的路线。但是，我已经读到，对于与 c 互操作的 fortran 派生类型，“每个组件都必须具有可互操作的类型和类型参数，不能是指针，也不能是可分配的。” 同样，后[c-fortran 互操作性 - 带有指针的派生类型](https://stackoverflow.com/questions/13748276/c-fortran-interoperability-derived-types-with-pointers)似乎证实了这一点。

我想知道是否有人知道是否绝对不可能从 cpython 访问 fortran 中的链表。如果可能的话，即使是间接的或迂回的，我也会很感激听到更多。

谢谢你，马克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T00:15:50.123

正如 Bálint Aradi 在评论中已经提到的那样，该节点不能与当前形式的 C 互操作。为此，您需要将 fortran 指针更改为 C 指针，但这使得在 fortran 本身内部使用非常痛苦。我能想到的最优雅的解决方案是将 C 可互操作类型放入 fortran 类型中，并保存不同版本的 C 和 fortran 指针。

实现如下所示，我还定义了用于在 fortran 中分配、解除分配和初始化节点的便利函数。

```
module node_mod

    use, intrinsic :: iso_c_binding
    implicit none

    ! the C interoperable type
    type, bind(c) :: cnode
        type(c_ptr) :: self = c_null_ptr
        type(c_ptr) :: next = c_null_ptr
        integer(c_int) :: value
    end type cnode

    ! the type used for work in fortran
    type :: fnode
        type(cnode) :: c
        type(fnode), pointer :: next => null()
    end type fnode

contains

recursive function allocate_nodes(n, v) result(node)

    integer, intent(in) :: n
    integer, optional, intent(in) :: v
    type(fnode), pointer :: node
    integer :: val

    allocate(node)
    if (present(v)) then
        val = v
    else
        val = 1
    end if
    node%c%value = val
    if (n > 1) then
        node%next => allocate_nodes(n-1, val+1)
    end if

end function allocate_nodes

recursive subroutine deallocate_nodes(node)

    type(fnode), pointer, intent(inout) :: node
    if (associated(node%next)) then
        call deallocate_nodes(node%next)
    end if
    deallocate(node)

end subroutine deallocate_nodes

end module node_mod 
```

如您所见，访问“value”元素需要额外的“%c”，这有点麻烦。要在 python 中使用先前定义的例程来检索链表，必须定义 C 互操作包装器并且必须链接 C 指针。

```
module node_mod_cinter

    use, intrinsic :: iso_c_binding
    use, non_intrinsic :: node_mod

    implicit none

contains

recursive subroutine set_cptr(node)

    type(fnode), pointer, intent(in) :: node

    node%c%self = c_loc(node)
    if (associated(node%next)) then
        node%c%next = c_loc(node%next%c)
        call set_cptr(node%next)
    end if

end subroutine set_cptr

function allocate_nodes_citer(n) bind(c, name="allocate_nodes") result(cptr)

    integer(c_int), value, intent(in) :: n
    type(c_ptr) :: cptr
    type(fnode), pointer :: node

    node => allocate_nodes(n)
    call set_cptr(node)
    cptr = c_loc(node%c)

end function allocate_nodes_citer

subroutine deallocate_nodes_citer(cptr) bind(c, name="deallocate_nodes")

    type(c_ptr), value, intent(in) :: cptr
    type(cnode), pointer :: subnode
    type(fnode), pointer :: node

    call c_f_pointer(cptr, subnode)
    call c_f_pointer(subnode%self, node)
    call deallocate_nodes(node)

end subroutine deallocate_nodes_citer

end module node_mod_cinter 
```

“*_nodes_citer”例程只处理不同的指针类型，set_cptr 子例程根据 fortran 指针链接 C 可互操作类型内部的 C 指针。我已经添加了 node%c%self 元素，以便可以恢复 fortran 指针并将其用于正确的释放，但如果您不太关心这一点，那么它并不是严格需要的。

此代码需要编译为共享库以供其他程序使用。我在我的 linux 机器上使用了以下带有 gfortran 的命令。

```
gfortran -fPIC -shared -o libnode.so node.f90 
```

最后，python 代码分配 10 个节点的列表，打印出每个节点的 node%c%value，然后再次释放所有内容。此外，还显示了 fortran 和 C 节点的内存位置。

```
#!/usr/bin/env python
import ctypes
from ctypes import POINTER, c_int, c_void_p
class Node(ctypes.Structure):
    pass
Node._fields_ = (
        ("self", c_void_p),
        ("next", POINTER(Node)),
        ("value", c_int),
        )

def define_function(res, args, paramflags, name, lib):

    prot = ctypes.CFUNCTYPE(res, *args)
    return prot((name, lib), paramflags)

def main():

    import os.path

    libpath = os.path.abspath("libnode.so")
    lib = ctypes.cdll.LoadLibrary(libpath)

    allocate_nodes = define_function(
            res=POINTER(Node),
            args=(
                c_int,
                ),
            paramflags=(
                (1, "n"),
                ),
            name="allocate_nodes",
            lib=lib,
            )

    deallocate_nodes = define_function(
            res=None,
            args=(
                POINTER(Node),
                ),
            paramflags=(
                (1, "cptr"),
                ),
            name="deallocate_nodes",
            lib=lib,
            )

    node_ptr = allocate_nodes(10)

    n = node_ptr[0]
    print "value", "f_ptr", "c_ptr"
    while True:
        print n.value, n.self, ctypes.addressof(n)
        if n.next:
            n = n.next[0]
        else:
            break

    deallocate_nodes(node_ptr)

if __name__ == "__main__":
    main() 
```

执行这个会给我以下输出：

```
value f_ptr c_ptr
1 15356144 15356144
2 15220144 15220144
3 15320384 15320384
4 14700384 14700384
5 15661152 15661152
6 15661200 15661200
7 15661248 15661248
8 14886672 14886672
9 14886720 14886720
10 14886768 14886768 
```

有趣的是，两种节点类型都从相同的内存位置开始，所以 node%c%self 并不是真正需要的，但这只是因为我对类型定义很小心，这真的不应该指望。

你有它。即使不必处理链表也很麻烦，但是 ctypes 比 f2py 更强大和健壮得多。希望这会带来一些好处。

# asp.net-mvc - MVC Razor 表单提交不起作用

> ID：14595409
> 
> 赞同：3
> 
> 时间：2013-01-30T01:53:20.057
> 
> 标签：asp.net-mvc, razor

我正在尝试使用一个简单的表单来允许授权用户修改我正在构建的 MVC3 Razor 站点上的选定页面上的内容。我无法让编辑表单正确发布。

我的模型如下：

```
public class WebContent
{
    public virtual UInt32 id { get; set; }
    public virtual String page { get; set; }
    public virtual String section { get; set; }

    [UIHint("tinymce_jquery_full"), AllowHtml]
    public virtual String content { get; set; }
} 
```

我的控制器：

```
 [Authorize]
    public ActionResult Edit(String page, String section)
    {
        WebContent content = _WebContent.GetSection(page,section);
        return View(content);
    }

    [Authorize]
    [HttpPost]
    public ActionResult Edit(WebContent content)
    {
        if (ModelState.IsValid)
        {
            _WebContent.Update(content);
            return View("Index");
        }
        else return View("Index");
    } 
```

我的观点：

```
@model SongbirdsStudios.Models.WebContent
@{
  ViewBag.Title = "Edit '"+Model.page+"'Page Content";
}

<div>
<h2>Edit</h2>
@using (Html.BeginForm())
{

    <fieldset>
        <legend>Page Content</legend>
        @Html.HiddenFor(m => m.id)
        @Html.HiddenFor(m => m.page)
        @Html.HiddenFor(m => m.section)
        <div class="editor-label">
            Content
        </div>
        <div class="editor-field">
            @Html.EditorFor(m => m.content)
        </div>
        <p>
            <input type="submit" value="Update" />
        </p>
    </fieldset>
}
</div> 
```

视图正确呈现并显示预期的元素。UIHint("tinymce_jquery_full") 被正确拾取，TinyMCE 编辑器出现在页面上。但是，当表单提交时，我得到了一个例外。

```
System.Web.HttpRequestValidationException: A potentially dangerous Request.Form value was detected from the client (content=...) 
```

我读过的所有内容都表明 AllowHTML 属性应该允许发布，但这不是出于某种原因。

我可以通过将 [ValidateInput(false)] 属性添加到 HttpPost 控制器方法来解决此问题。如果我这样做，则不会发生此异常，但模型仍然不会传递给控制器​​。它只是通过 null 代替。检查调试器中的 HttpContext 表明它传递了 4 个单独的值 - 我的模型中的每个属性一个，而不是将模型类传递回控制器。我不知道我需要更改什么才能使其正常工作。

我希望我错过了一些简单的东西，并且有更好眼睛的人可以看到它是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T03:30:50.917

因此，在进一步调查 ASP MVC 如何将表单字段映射到模型类并检查发送到浏览器的 HTML 之后，我发现这是我的 WebContent 类中的属性名称的问题。

```
public virtual String content { get; set; } 
```

TinyMCE 编辑器使用内容变量来定义与编辑器界面相关的某些特征。这显然导致编辑器中用户输入生成的 HTML“内容”没有映射回 Model 属性。

只需更改模型类中的属性名称（当然还要修复相应的数据库映射和视图引用）即可立即解决问题。

```
public virtual String web_data_content { get; set; } 
```

其他一切都相同，这与 UIHint 和 AllowHTML 属性完美配合。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T06:49:09.220

在您的操作中添加此属性

```
[ValidateInput(false)] 
```

这应该可以解决您的问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T06:14:14.740

如果你使用 ie7 这可能会出错

```
<input type="submit" value="Update" /> 
```

给按钮一个名字

# java - 为什么会出现文件权限错误？

> ID：14595414
> 
> 赞同：-2
> 
> 时间：2013-01-30T01:54:06.480
> 
> 标签：java, swing, jpanel, java-io, japplet

当我在我的网站上使用我的 Java 小程序时，我收到一个文件权限错误。错误是：

```
access denied ("java.io.FilePermision""image.png""read") 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T01:57:47.723

小程序在受限环境（称为安全沙箱）中运行，除非已签名，否则只能从加载它的同一位置加载资源。图像可以包含在小程序 jar 文件中。要访问这些，您可以使用

```
Image image = ImageIO.read(MyApplet.class.getResourceAsStream("/images/image.png")); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-30T01:57:12.277

默认情况下，Applet 被拒绝访问客户端的文件 I/O。您需要签署您的小程序或编辑策略文件。

您可以检查[小程序如何读取本地文件系统上的文件](http://www.coderanch.com/how-to/java/HowCanAnAppletReadFilesOnTheLocalFileSystem)

# knockout-validation - 使用敲除验证进行验证

> ID：14595420
> 
> 赞同：1
> 
> 时间：2013-01-30T01:55:21.613
> 
> 标签：knockout-validation

使用knockout.js（和knockout-validation）我有这个：

```
self.nickname = ko.observable("").extend({
    required: true,
    minLength: 3
}); 
```

和

```
<input type="text" data-bind="value: nickname" class="short" maxlength="30" />
<div class="formRow rowErrorMsg" data-bind="visible: nickname.isValid() == false"><span class="staticImages staticImagesError"></span> <?php text("Enter a valid username") ?></div> 
```

但问题是，当“昵称”无效时，会在输入控件旁边显示一个文本。带有错误消息的 DIV 开始可见，然后工作正常。

我需要这样做：

1.  当“昵称”无效时，只需使用我的自定义消息和格式显示 DIV。
2.  加载页面时，DIV 必须保持隐藏状态。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-30T06:28:05.063

您需要配置敲除验证以不显示错误消息。有两种方法。

第一种是通过绑定：

```
<div data-bind='validationOptions: { insertMessages: false }'>
    <input type="text" data-bind="value: nickname" class="short" maxlength="30" />
    <div class="formRow rowErrorMsg" data-bind="visible: nickname.isValid() == false">
</div> 
```

第二个是通过代码：

*   使用`ko.validation.init({ insertMessages: false });`功能
*   使用`ko.applyBindingsWithValidation(viewModel, rootNode, { insertMessages: false });`函数**contextual

可以在以下位置找到所有配置选项的描述：[https ://github.com/ericmbarnard/Knockout-Validation/wiki/Configuration](https://github.com/ericmbarnard/Knockout-Validation/wiki/Configuration)

如果您有许多必须验证的字段，则可以使用 messageTemplate 模板，而不是手动创建所有 errorMessage div。

# c# - 获取现代 UI 文本框中的行数

> ID：14595422
> 
> 赞同：0
> 
> 时间：2013-01-30T01:55:26.663
> 
> 标签：c#, .net, xaml, windows-8, microsoft-metro

我有一个现代 UI (Metro) 应用程序，想显示 TextBox 控件内的行数。

通过文档和 Intellisense 以及所选 TextBox 控件的属性窗格，我发现似乎不再有 Lines 属性。我们应该怎么做？他们为什么要删除它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T04:19:53.367

虽然 WinForms 具有 TextBox.Lines，而 WPF 具有 TextBox.LineCount，但 Windows 8 Metro 更接近 Silverlight，后者没有此功能。如果您查看文档，您还会注意到缺少类似的属性，如 WPF 的 TextBox.MaxLines。

如果 TextWrapping 关闭，因此你有换行符，你可以手动计算这些，但如果你有换行，那么你可能有麻烦了。您可能可以使用 ActualHeight 和字体大小进行一些数学运算。

# python - 从 python 写入 json 文件

> ID：14595425
> 
> 赞同：1
> 
> 时间：2013-01-30T01:55:53.560
> 
> 标签：python, json, editing

如何使用 python 代码编辑/更改 json 文件中的特定字段：

```
{
   "EZMessage":{
      "action":"account.cash",
      "data":{
         "authToken":"123456",
         "account":"#ACCOUNTID#",
         "portfolio":"true",
         "historical":"true"
      }
   }
} 
```

在这个 json 代码中，我想用 789123 替换 123456

字符串替换仅在我知道那里写什么的情况下才有效。在我的代码中，我只知道要写什么，以及标识符“authToken”。有没有办法通过识别它是 "authToken" 的值来覆盖 123456 ？

谢谢，

RS

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T01:59:43.167

使用[json](http://docs.python.org/2/library/json.html)模块将字符串转换为一组嵌套`dict`对象，进行更改，然后将字典转储回 json 字符串。

```
import json
jstr = '''{
   "EZMessage":{
      "action":"account.cash",
      "data":{
         "authToken":"123456",
         "account":"#ACCOUNTID#",
         "portfolio":"true",
         "historical":"true"
      }
   }
}'''

j = json.loads(jstr)
j['EZMessage']['data']['authToken'] = 654321
jstr = json.dumps(j) 
```

有关如何读取/写入文件的信息，请参阅[精美教程](http://docs.python.org/2/tutorial/inputoutput.html#reading-and-writing-files)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T01:57:41.840

将 JSON 对象转换为 Python 对象，然后像任何其他 Python 对象一样更改值。

# firebase - Firebase 安全规则：允许读取除一个字段之外的任何内容

> ID：14595429
> 
> 赞同：5
> 
> 时间：2013-01-30T01:56:20.423
> 
> 标签：firebase

在我的 Firebase 安全规则中，我希望匿名用户能够读取除一个字段 ( `secret_field`) 之外的任何内容：

```
{
  "rules": {
    ".read": true,
    ".write": "auth != null",
    "stuff" : {
      "$stuffID" : {
        "secret_field" : {
           ".read" : "auth != null"
        }
      }
    }
  }
} 
```

但是，在 Firebase 中，如果任何读取规则`secret_field`评估为真，则授予读取访问`secret field`权限。

有没有办法扭转这种行为？（如果任何读取规则`secret_field`评估为假，则禁止读取访问）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-30T03:19:04.473

您无法逆转该行为，但您可以通过为公共字段引入“容器”并将 .read 设置为 true 来解决此问题。例如：

```
{
  "rules": {
    "stuff" : {
      "$stuffID" : {
        "public" : {
          ".read": true
        },
        "secret_field" : {
          ".read" : "auth != null"
        }
      }
    }
  }
} 
```

然后每个人都可以访问 .../public/ 下的所有内容，但 .../secret_field 只有经过身份验证的用户才能访问。

# actionscript-3 - 如何让我的 Flash AS3 游戏保存进度

> ID：14595431
> 
> 赞同：0
> 
> 时间：2013-01-30T01:56:27.177
> 
> 标签：actionscript-3, flash, apache-flex, flex3, mxml

我有这个我一直在开发的 Flash 游戏，它可以在浏览器之外运行，我正在寻找它来保存它的进度。

我见过多个实现这一点的 Flash 游戏，看起来他们已经完成了这个客户端，我也想做同样的事情。

我的游戏由 1 个`mxml`文件和一些`.as`文件组成，我使用 flex sdk 从命令行编译它。

我必须做什么才能保存我的游戏数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T02:34:02.567

正如其他人所提到的，[`SharedObject`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/SharedObject.html)是您将用于此的工具。

`SharedObject`其基础是首先使用其静态方法初始化对 a 的引用`.getLocal()`：

```
var mySaveData:SharedObject = SharedObject.getLocal("SomeSaveName"); 
```

提供给此方法的字符串不应包含空格。

完成此操作后，您将能够使用[`mySaveData.data`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/SharedObject.html#data)，它基本上是一个简单的对象，您可以动态附加属性（它是动态的）：

```
mySaveData.data.levelsComplete = 2; 
```

完成此操作后，您将能够稍后使用相同的过程引用该值：

```
trace( mySaveData.data.levelsComplete ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T02:24:17.200

对于简单的东西，您可以使用[SharedObject](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/SharedObject.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T02:24:42.597

一种方法是使用 flash 的 SharedObject 将值保存到客户端上的“flash cookie”中。示例可以在这里找到：[Actionscript 3 Saving currentframe location to local hard drive?](https://stackoverflow.com/questions/13413027/actionscript-3-saving-currentframe-location-to-local-hard-drive)

# html - 仅在网站可见部分的作品上的 box-shadow 插图

> ID：14595435
> 
> 赞同：1
> 
> 时间：2013-01-30T01:57:05.647
> 
> 标签：html, browser, css

我使用`box-shadow`该`html`元素为网站的背景提供浅色晕影效果。但是，如果站点的内容比窗口长，`box-shadow`则只会显示在站点的第一眼可见的部分。如果向下滚动，则`box-shadow`停止工作。

这是我的 CSS 代码：

```
html {
    box-shadow: 0 0 200px rgba(0,0,0,0.9) inset;
    height: 100%;
}

body {
    font-family: "Source Sans Pro", sans-serif;    
    margin: 0;
    background: url('../img/subtle_grunge.png');
} 
```

我试图将 应用于`box-shadow`元素`body`，但这也不起作用。令人惊讶的是，为作品设置的背景图像`body`很好。该问题出现在所有浏览器中（Safari 6、Firefox 18、Chrome 24 – 都在 Mac 上）。有解决办法吗？

这是一个例子：[http ://dreamapp.de/sites/portfolio/boxshadowproblem.html](http://dreamapp.de/sites/portfolio/boxshadowproblem.html)

![在此处输入图像描述](../Images/062234c076ca931d468a3686feb2af46.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T02:06:30.567

您可以`<div>`在标签之后放置一个右侧`<body>`并将 CSS 属性移至它。如：

**HTML**

```
<body>
  <div class="vignette"></div>
  <!-- rest of your code --> 
```

**CSS**

```
.vignette {
  position: fixed;
  /* to prevent empty space around the vignette */
  top: 0;
  left: 0;
  /* extends to the whole visible area */
  width: 100%;
  height: 100%;
  box-shadow: 0 0 200px rgba(0,0,0,0.9) inset;
} 
```

这样，该元素将保留在所有其他元素之下，您可以滚动内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T02:05:53.850

去掉“高度：100%；” 来自您的 html 标记的样式。或者，您可以将其更改为“最小高度：100%；”

# ruby-on-rails - 在 Rails 中动态包含/排除参数

> ID：14595438
> 
> 赞同：-1
> 
> 时间：2013-01-30T01:57:14.410
> 
> 标签：ruby-on-rails, ruby, methods

我有一个带有可变数量参数的操作方法，如下所示：

```
action!(:message => message, :photo => photo, :status => status) 
```

如果包含一个参数，它必须是有效的（基于某些标准），所以这样的事情不会起作用：

```
action!(:message => nil, :photo => nil, :status => nil) 
```

考虑到这一点，我希望能够只包含一个有效的参数。我天真地知道我可以这样做：

```
 if message.valid? && photo.valid? && status.valid?
     action!(:message => message, :photo => photo, :status => status)
 elsif message.valid? && photo.valid?
     action!(:message => message, :photo => photo)
 ...
 end 
```

虽然这确实很丑陋且效率低下。有没有更好的方法来为此调用构建正确的参数集？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T02:27:39.447

参数只是一个哈希，所以为什么不创建一个哈希对象并添加你需要的东西：

```
args = {}
args[:message] = message if condition
args[:photo] = photo if condition
...

action!(args) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T02:36:40.627

您可以使用元编程：

```
arguments = [:message, :photo, :status].inject({}) do |result, argument|
  object = __send__ argument
  result[argument] = object if object
  result
end

action! argument 
```

if`message`和是局部变量（但不是方法） `photo`，`status`您应该使用`#eval`而不是`#__send__`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T02:20:15.983

你为什么不在你的方法中验证它们`action!`？并返回 true 或 false 以告知当前操作是否所有记录都有效。

```
 if action!(:message=>message .......)
     //do something
  else
     //other things
  end 
```

# c++ - 链接器错误：未解决的外部符号问题

> ID：14595439
> 
> 赞同：1
> 
> 时间：2013-01-30T01:57:21.060
> 
> 标签：c++

> **可能重复：**
> [对静态成员的未定义引用是什么意思？](https://stackoverflow.com/questions/7092765/what-does-it-mean-to-have-an-undefined-reference-to-a-static-member)

目前我有以下代码文件：TestClass.h

```
class TestClass
{

private:
    int i;
    static TestClass* TClass;

public:

    static TestClass* GetClass()
    {
        if(TClass==NULL)
        {
            TClass = new TestClass();
            return TClass;
        }
        else
        {
            return TClass;
        }
    }//end method

    int Geti()
    {
        return i;
    }

    void Seti(int a)
    {
        i = a;
    }
}; 
```

现在我在我的 cpp 文件中有一个方法，包括标题为

```
declspec(dllexport) int __stdcall GetVar()
{

    TestClass *TClass = TestClass::GetClass();
    return TClass->Geti();
} 
```

我得到的错误是：

```
Error   8   error LNK2001: unresolved external symbol "private: static class TestClass * TestClass::TClass" (?TClass@TestClass@@0PEAV1@EA) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T02:01:04.043

你声明但没有定义你的静态成员

```
TestClass* TClass; 
```

在 .cpp 文件中初始化：

```
TestClass* TestClass::TClass=NULL; 
```

# php - 登录系统不工作 PHP 哈希

> ID：14595440
> 
> 赞同：1
> 
> 时间：2013-01-30T01:57:28.677
> 
> 标签：php, hash, login

我正在创建一个登录系统。但无论出于何种原因，我都无法获得正确验证的密码。当我知道密码正确时，它一直告诉我密码错误。这是表单代码：

```
<form id="login" action="login_processing.php" method="post">
    <label2>Email</label2>
    <input type="text" name="email">
    <label2>Password</label2>
    <input type="password" name="password">
    <a class="forgot_password" href="forgot.php">Forgot password?</a>
    <input type="submit" class="custom_submit" name="sign_in" value="Sign In">
    <br />
    <br />
    <br />
    <a href="#sliderName" class="next">Create Account</a>
</form> 
```

这里是login_processing.php上处理登录信息的代码：

```
require_once 'database_connect.php';
session_start();

$email = $_POST['email'];
$password = $_POST['password'];

$email = mysql_real_escape_string($email);
$findLogin = "SELECT password, salt FROM client_login WHERE email = '$email';";
$loginResult = mysql_query($findLogin);
if (mysql_num_rows($loginResult) < 1){
    $_SESSION['errNo_account'] = 'No account with that email exists';
    header('Location: login.php');
}
$userData = mysql_fetch_array($loginResult, MYSQL_ASSOC);
$hash = hash('sha256', $userData['salt'] . hash('sha256', $password));
if ($hash != $userData['password']){
    $_SESSION['errPassword_incorrect'] = 'Incorrect Password';
    header('Location: myaccount.php');
}
else{
    $idSelect = "SELECT client_id FROM client_login WHERE email = '$email' ";
    $idResult = mysql_query($idSelect);
    while($idData = mysql_fetch_assoc($idResult)){
        $_SESSION['client_id'] = $idData['client_id'];
    }

} 
```

这是对密码进行哈希处理并添加盐的原始注册页面：

```
function createSalt(){
        $string = md5(uniqid(rand(), true));
        return substr($string, 0, 3);
    }
        $salt = createSalt();
        $hash = hash('sha256', $salt . $hash);  

    $insertLogin = "INSERT INTO client_login(email, password, salt, created) VALUES('$email','$hash', '$salt', '$today')";
    mysql_query($insertLogin); 
```

它一直告诉我我的密码不正确......当我知道它不正确时。我似乎无法弄清楚错误是什么，它让我发疯！！！

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T02:14:14.943

在您的注册脚本中，您使用的是连接盐和 pw 的单个哈希，但在您的登录脚本中，您使用的是嵌套的 hash() 调用。

登记：

`$hash = hash('sha256', $salt . $hash);`

登录：

`$hash = hash('sha256', $userData['salt'] . hash('sha256', $password));`

注意区别？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T02:33:57.497

这是我搞砸的地方..在我匆忙中，我从未真正在创建新帐户时对密码进行哈希处理。所以它没有散列任何东西....只是它本身。因此，我在“新帐户”页面中添加了一行（以散列原始密码）并解决了整个问题：

```
function createSalt(){
        $string = md5(uniqid(rand(), true));
        return substr($string, 0, 3);
    }
        $hash = hash('sha256', $password); //this was forgotten originally :(
        $salt = createSalt();
        $hash = hash('sha256', $salt . $hash); 
```

现在添加了上面的代码可以正常工作。谢谢！

# google-maps-api-3 - 在同一点偏移多个图标

> ID：14595443
> 
> 赞同：0
> 
> 时间：2013-01-30T01:57:45.780
> 
> 标签：google-maps-api-3, google-maps-markers

有一张显示公园评论的地图。一些成员在一个公园有多个评论，因此有 2 个或更多图标堆叠在一起。

Google Maps v3 中是否有一种方法可以将同一物理位置上的图标偏移很小的距离？这样，当地图放大时，读者可以看到多个评论图标并阅读每个图标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T04:04:57.527

[Marker Spiderfier](http://googlemapsmania.blogspot.com/2012/05/mappiness-marker-spiderfier-library.html)是一种选择（但它不是 Google Maps API v3的一部分，它是第三方扩展）。

# jquery - 有什么方法可以根据用户的浏览器窗口自动缩放浏览器？

> ID：14595446
> 
> 赞同：1
> 
> 时间：2013-01-30T01:57:55.833
> 
> 标签：jquery, css, plugins, cross-browser, zooming

有没有办法（跨浏览器）使我的网站根据用户的浏览器窗口自动缩放。

我有一个固定纵横比的网络应用程序。它需要这样，因为中心功能（视频）旨在始终保持在屏幕上。我将使用带有内部 div 的侧边栏来显示可滚动的内容。在下面查看我的代码或以下小提琴以查看基本结构：http: [//jsfiddle.net/hkdeA/6/](http://jsfiddle.net/hkdeA/6/)

我目前以一种尺寸开发了它，并首先考虑将所有像素数据转换为百分比，即响应式设计，甚至包含基于浏览器窗口的 div 重新计算（以适合 100% 高度或 100% 宽度）。然而，与大多数响应式设计不同，我页面上的每个元素都需要同等缩放。对我来说，这创造了一个独特的机会。大多数响应式设计永远无法利用浏览器缩放来完成这项工作，因为他们只希望某些元素放大或缩小。对我来说，一切都应该协调一致。遍历 CSS 的每一行以将像素值转换为百分比是一个耗时的头痛，我希望如果可能的话，我可以利用浏览器缩放。

但是，我是否可以访问浏览器缩放功能并缩放适合浏览器窗口所需的确切距离（高度或宽度，取决于浏览器窗口的纵横比）？我认为需要两个步骤。

1.  能够在没有用户的情况下实际访问缩放功能。

2.  能够计算必要的缩放（似乎很容易，因为我的设计是固定宽度，因此可以计算任何浏览器窗口大小并与我的设计和必要的缩放百分比进行比较）并将其推送到用户的浏览器（仅适用于我的网站！）

但有可能吗？第一个回复者说不，目前没有脚本可以做到这一点，但我希望看看其他人是否有一些见识。任何和所有的帮助表示赞赏。谢谢！

```
 <div id="container">
    <div id="vid">

    </div>
    <div id="sidebar">

    </div>
    <div id="footer">

    </div>    
</div>

#container{
    background:grey;
    width:480px;
    height:270px;
    float:left;
}

#vid{
    background:black;
    width:320px;
    height:180px;
    float:left;
}

#sidebar{
    background:blue;
    width:160px;
    height:180px;
    float:right;
}

#foot{
    background:yellow;
    width:480px;
    height:90px;
    float:left;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T02:54:02.943

您可以根据窗口尺寸和视频的纵横比调整任何元素的大小

```
var videoAspect= 600/400;/* normalWidth/normalHeight*/

var $window = $(window), windowW= $window.width(), windowH= $window.height();
var windowAspect= windowW/windowH;
var sizes={ }
if( windowAspect > videoAspect){
   /* wider so set height 100% and adjust width*/
    sizes.height=windowH;
    sizes.width = windowH * videoAspect;
}else{
    sizes.width=windowW;
    sizes.height = windowW / videoAspect; 
}

$('#container').css( sizes); 
```

演示：http: [//jsfiddle.net/hkdeA/](http://jsfiddle.net/hkdeA/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T17:45:36.697

也许这个脚本适合你。如果需要，该脚本还会[计算滚动条的大小。](https://stackoverflow.com/questions/986937/how-can-i-get-the-browsers-scrollbar-sizes/986977#986977)您将需要一个带有*包装器*ID的块（ `div`、`span`等...） 。

 *这是一个**跨浏览器**脚本，它支持所有现代浏览器。

我希望你喜欢它。随意使用！

```
// DONT FORGET TO ADD THIS TO YOUR WRAPPER'S CSS BLOCK
// THIS WILL KEEP YOUR SITE CENTERED
// IF YOU USE margin-left:auto; margin-right:auto;

// transform-origin: 50% 0%;
// -ms-transform-origin: 50% 0%;
// -moz-transform-origin: 50% 0%;
// -webkit-transform-origin: 50% 0%;
// -o-transform-origin: 50% 0%;

function FitToScreen(FitType)
{
    var Wrapper = document.getElementById('wrapper');

    var ScreenWidth = window.innerWidth;
    var ScreenHeight = window.innerHeight;

    var WrapperWidth = Wrapper.offsetWidth;
    var WrapperHeight = Wrapper.offsetHeight + 200;

    var WidthRatio = parseFloat(ScreenWidth/WrapperWidth);
    var HeightRatio = parseFloat(ScreenHeight/WrapperHeight);

    var ScaleRatio = 1.0;

    if (FitType == 'width')
    {
        ScaleRatio = WidthRatio;
        if(ScaleRatio * WrapperHeight > ScreenHeight)
        {
            ScaleRatio = parseFloat(ScreenWidth/(WrapperWidth + GetScrollBarWidth () -1));
        }
    }
    else if (FitType == 'height')
    {
        ScaleRatio = HeightRatio;
        if(ScaleRatio * WrapperWidth > ScreenWidth)
        {
            ScaleRatio = parseFloat(ScreenHeight/(WrapperHeight + GetScrollBarWidth () -1));
        }
    }

    var ScaleText = 'scale(' + ScaleRatio.toString().replace(',','.') + ')';

    //Chrome and Safari
        Wrapper.style.webkitTransform = ScaleText;
    //Firefox
        Wrapper.style.MozTransform = ScaleText;
    //Internet Explorer
        Wrapper.style.msTransform = ScaleText;
    //Opera
        Wrapper.style.OTransform = ScaleText;
    //Standard
        Wrapper.style.transform = ScaleText;
}

function GetScrollBarWidth ()
{
    var inner = document.createElement('p');
    inner.style.width = '100%';
    inner.style.height = '200px';

    var outer = document.createElement('div');
    outer.style.position = 'absolute';
    outer.style.top = '0px';
    outer.style.left = '0px';
    outer.style.visibility = 'hidden';
    outer.style.width = '200px';
    outer.style.height = '150px';
    outer.style.overflow = 'hidden';
    outer.appendChild (inner);

    document.body.appendChild (outer);
    var w1 = inner.offsetWidth;
    outer.style.overflow = 'scroll';
    var w2 = inner.offsetWidth;
    if (w1 == w2) w2 = outer.clientWidth;

    document.body.removeChild (outer);
    return (w1 - w2);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-05T02:11:32.767

您可以使用视口来控制缩放。试试[这个](http://html5hacks.com/blog/2012/11/28/elegantly-resize-your-page-with-the-at-viewport-css-declaration/)*

# ruby-on-rails - attr_accessible 中的属性时出现 MassAssignment 错误

> ID：14595450
> 
> 赞同：0
> 
> 时间：2013-01-30T01:58:37.323
> 
> 标签：ruby-on-rails, mass-assignment, attr-accessible

`ActiveModel::MassAssignmentSecurity::Error: Can't mass-assign protected attributes: title`当我`attr_accessible :title`在模型中时，我得到了一个。请参阅下面的控制台调用的代码和输出：

**用户模型**

```
# == Schema Information
#
# Table name: users
#
#  id              :integer          not null, primary key
#  name            :string(255)
#  email           :string(255)
#  created_at      :datetime         not null
#  updated_at      :datetime         not null
#  password_digest :string(255)
#  remember_token  :string(255)
#  admin           :boolean          default(FALSE)
#

class User < ActiveRecord::Base
  attr_accessible :name, :email, :password, :password_confirmation
  has_secure_password

  has_many :cycles, foreign_key: "manager_id"
  has_many :reverse_cycles, foreign_key: "employee_id", class_name: "Cycle"
  has_many :employees, through: :cycles
  has_many :managers, through: :reverse_cycles
  has_many :templates, foreign_key: "creator_id"

  before_save { self.email.downcase! }
  before_save :create_remember_token

  validates :name, presence: true, length: { maximum: 50 }
  VALID_EMAIL_REGEX = /\A[\w+\-.]+@[a-z\d\-.]+\.[a-z]+\z/i
  validates :email, presence:   true,
                    format:     { with: VALID_EMAIL_REGEX },
                    uniqueness: { case_sensitive: false }
  validates :password, length: { minimum: 6 }
  validates :password_confirmation, presence: true

  #####  Functions  #####

  def create_cycle_as_employee!(other_user, date = 1.year.from_now)
    rcycle = reverse_cycles.create!(manager_id: other_user.id, ends_on: date)
    # self.reload
    rcycle
  end

  def create_cycle_as_manager!(other_user, date = 1.year.from_now)
    cycle = cycles.create!(employee_id: other_user.id, ends_on: date)
    # self.reload
    cycle
  end

  def create_template!(title)
    puts "made it here"
    templates.create!(title: title)
  end

  def is_employee_of?(other_user)
    cycles.find_by_manager_id(other_user.id)
  end

  def is_manager_of?(other_user)
    cycles.find_by_employee_id(other_user.id)
  end

  private

    def create_remember_token
      self.remember_token = SecureRandom.urlsafe_base64
    end
end 
```

**模板模型**

```
class Template < ActiveRecord::Base
  include PublicID

  attr_accessible :title #:creator_id, :deleted, :parent_id, :public_id, :title

  belongs_to :creator, class_name: "User"
  has_many :questions, class_name: "TemplateQuestion"

  validates :title, presence: true
  validates :creator_id, presence: true

  def create_question!(content, type = 0) 
    questions.create!(content: content, type: type)
  end

end 
```

**堆栈跟踪**

```
1.9.3-p362 :004 > user.create_template!("test")
   (0.1ms)  begin transaction
   (0.1ms)  rollback transaction
ActiveModel::MassAssignmentSecurity::Error: Can't mass-assign protected attributes: title
  from /Users/r/.rvm/gems/ruby-1.9.3-p362@rails3tutorial2ndEd/gems/activemodel-3.2\.    11/lib/active_model/mass_assignment_security/sanitizer.rb:48:in `process_removed_attributes'
  from /Users/r/.rvm/gems/ruby-1.9.3-p362@rails3tutorial2ndEd/gems/activemodel-3.2\.    11/lib/active_model/mass_assignment_security/sanitizer.rb:20:in `debug_protected_attribute_removal'
  from /Users/r/.rvm/gems/ruby-1.9.3-p362@rails3tutorial2ndEd/gems/activemodel-3.2\.    11/lib/active_model/mass_assignment_security/sanitizer.rb:12:in `sanitize'
  from /Users/r/.rvm/gems/ruby-1.9.3-p362@rails3tutorial2ndEd/gems/activemodel-3.2.11/lib/active_model/mass_assignment_security.    rb:230:in `sanitize_for_mass_assignment'
  from /Users/r/.rvm/gems/ruby-1.9.3-p362@rails3tutorial2ndEd/gems/activerecord-3.2.11/lib/active_record/attribute_assignment.    rb:75:in `assign_attributes'
  from /Users/r/.rvm/gems/ruby-1.9.3-p362@rails3tutorial2ndEd/gems/activerecord-3.2.11/lib/active_record/base.rb:497:in `initialize'
  from /Users/r/.rvm/gems/ruby-1.9.3-p362@rails3tutorial2ndEd/gems/activerecord-3.2.11/lib/active_record/reflection.rb:183:in `new'
  from /Users/r/.rvm/gems/ruby-1.9.3-p362@rails3tutorial2ndEd/gems/activerecord-3.2.11/lib/active_record/reflection.rb:183:in     `build_association'
  from /Users/r/.rvm/gems/ruby-1.9.3-p362@rails3tutorial2ndEd/gems/activerecord-3.2.11/lib/active_record/associations/association.    rb:233:in `build_record'
  from /Users/r/.rvm/gems/ruby-1.9.3-p362@rails3tutorial2ndEd/gems/activerecord-3.2\.    11/lib/active_record/associations/collection_association.rb:434:in `block in create_record'
  from /Users/r/.rvm/gems/ruby-1.9.3-p362@rails3tutorial2ndEd/gems/activerecord-3.2\.    11/lib/active_record/associations/collection_association.rb:149:in `block in transaction'
  from /Users/r/.rvm/gems/ruby-1.9.3-p362@rails3tutorial2ndEd/gems/activerecord-3.2\.    11/lib/active_record/connection_adapters/abstract/database_statements.rb:192:in `transaction'
  from /Users/r/.rvm/gems/ruby-1.9.3-p362@rails3tutorial2ndEd/gems/activerecord-3.2.11/lib/active_record/transactions.rb:208:in     `transaction'
  from /Users/r/.rvm/gems/ruby-1.9.3-p362@rails3tutorial2ndEd/gems/activerecord-3.2\.    11/lib/active_record/associations/collection_association.rb:148:in `transaction'
  from /Users/r/.rvm/gems/ruby-1.9.3-p362@rails3tutorial2ndEd/gems/activerecord-3.2\.    11/lib/active_record/associations/collection_association.rb:433:in `create_record'
  from /Users/r/.rvm/gems/ruby-1.9.3-p362@rails3tutorial2ndEd/gems/activerecord-3.2\.    11/lib/active_record/associations/collection_association.rb:123:in `create!'
  from /Users/r/.rvm/gems/ruby-1.9.3-p362@rails3tutorial2ndEd/gems/activerecord-3.2\.    11/lib/active_record/associations/collection_proxy.rb:46:in `create!'
  from /Users/r/Sites/MicroEval/ror/app/models/user.rb:51:in `create_template!'
  from (irb):4
  from /Users/r/.rvm/gems/ruby-1.9.3-p362@rails3tutorial2ndEd/gems/railties-3.2.11/lib/rails/commands/console.rb:47:in `start'
  from /Users/r/.rvm/gems/ruby-1.9.3-p362@rails3tutorial2ndEd/gems/railties-3.2.11/lib/rails/commands/console.rb:8:in `start'
  from /Users/r/.rvm/gems/ruby-1.9.3-p362@rails3tutorial2ndEd/gems/railties-3.2.11/lib/rails/commands.rb:41:in `<top (required)>'
  from script/rails:6:in `require'
  from script/rails:6:in `<main>'1.9.3-p362 :005 > user.create_template!("test") 
```

这么大的问题是，为什么？我错过了什么吗？我检查了拼写错误，但我假设我要么忽略了某些东西，要么不理解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T07:09:15.057

这里的问题是该`attr_accessible ...`声明从未被达成。原因是因为那个错误`include PublicID`的，原因如下：

考虑以下控制台语句：

`Template.create(:title => "omg")`

它将输出以下堆栈跟踪：

```
1.9.3-p362 :001 > Template.create(:title => "omg")
TypeError: wrong argument type String (expected Module)
    from /Users/r/Sites/MicroEval/ror/app/models/template.rb:2:in `include'
    from /Users/r/Sites/MicroEval/ror/app/models/template.rb:2:in `<class:Template>'
    from /Users/r/Sites/MicroEval/ror/app/models/template.rb:1:in `<top (required)>'
    from /Users/r/.rvm/gems/ruby-1.9.3-p362@rails3tutorial2ndEd/gems/activesupport-3.2.11/lib/active_support/dependencies.    rb:469:in `load'
    from /Users/r/.rvm/gems/ruby-1.9.3-p362@rails3tutorial2ndEd/gems/activesupport-3.2.11/lib/active_support/dependencies.    rb:469:in `block in load_file'
    from /Users/r/.rvm/gems/ruby-1.9.3-p362@rails3tutorial2ndEd/gems/activesupport-3.2.11/lib/active_support/dependencies.    rb:639:in `new_constants_in'
    from /Users/r/.rvm/gems/ruby-1.9.3-p362@rails3tutorial2ndEd/gems/activesupport-3.2.11/lib/active_support/dependencies.    rb:468:in `load_file'
    from /Users/r/.rvm/gems/ruby-1.9.3-p362@rails3tutorial2ndEd/gems/activesupport-3.2.11/lib/active_support/dependencies.    rb:353:in `require_or_load'
    from /Users/r/.rvm/gems/ruby-1.9.3-p362@rails3tutorial2ndEd/gems/activesupport-3.2.11/lib/active_support/dependencies.    rb:502:in `load_missing_constant'
    from /Users/r/.rvm/gems/ruby-1.9.3-p362@rails3tutorial2ndEd/gems/activesupport-3.2.11/lib/active_support/dependencies.    rb:192:in `block in const_missing'
    from /Users/r/.rvm/gems/ruby-1.9.3-p362@rails3tutorial2ndEd/gems/activesupport-3.2.11/lib/active_support/dependencies.    rb:190:in `each'
    from /Users/r/.rvm/gems/ruby-1.9.3-p362@rails3tutorial2ndEd/gems/activesupport-3.2.11/lib/active_support/dependencies.    rb:190:in `const_missing'
    from (irb):1
    from /Users/r/.rvm/gems/ruby-1.9.3-p362@rails3tutorial2ndEd/gems/railties-3.2.11/lib/rails/commands/console.rb:47:in     `start'
    from /Users/r/.rvm/gems/ruby-1.9.3-p362@rails3tutorial2ndEd/gems/railties-3.2.11/lib/rails/commands/console.rb:8:in     `start'
    from /Users/r/.rvm/gems/ruby-1.9.3-p362@rails3tutorial2ndEd/gems/railties-3.2.11/lib/rails/commands.rb:41:in `<top (    required)>'
    from script/rails:6:in `require' 
```

如您所见， 有一个错误`include`，那是因为没有首先需要正确的模块。

`require "publicid"`在模型顶部添加一个 simple`Template`将确保该模块确实可以包含在内。

另请注意，该模块位于`/lib`哪里`/`是指您的应用程序的根目录。

**感谢#rubyonrails IRC 频道上的@radar 提供答案。**

# jquery - JQplot 具有相同数据的两种不同比例（米和英尺）

> ID：14595455
> 
> 赞同：0
> 
> 时间：2013-01-30T01:59:26.783
> 
> 标签：jquery, jqplot

我需要在具有两种不同比例（米和英尺）的**jqPlot线上显示数据。**我在同一个图上有多个行/数据集，并且还有一个**jQuery 切换开关**，它将切换**jqPlot**中显示的数据集。

我想一侧有脚，右侧有米；但是，我能看到的唯一方法是`min, max, and numTicks`为每个**y 轴**设置并让数据与一个比例（英尺）相关联。

有没有更好的方法让一组数据显示两个独立的比例？

`data1 = [[0,1],[1,2],[2,3]];`——英尺

需要左轴以英尺为单位显示数据1 需要右轴以米为单位显示每个**gridMark**。

我一直将左**y 轴**标记为`min: 0, max: 9, numTicks: 9`.
而右**y2axis**为`min:0, max: 2.74, numTicks: 9`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T02:46:00.257

如果我理解..你可以这样做：（诀窍是隐藏米..）

```
$(document).ready(function(){
var feet=[2052, 2205, 1910, 2085, 2261,  1714,  3123];
//transform values to meters...(I put some examples values..)
var meters=[2121, 32323, 65656, 21212, 32323,  54544,  31230];

var plot1 = $.jqplot('chart1', [meters, feet], {
  title:'Meters and Feet',
 axes:{

      yaxis:{  
        autoscale:true,
        label: "feet"
      },  
      y2axis:{
        autoscale:true, 
        tickOptions:{showGridline:false},
        label: "meters"
      }

  },
    series:[{lineWidth:4, showLine: false, showMarker:false}, {yaxis:'y2axis'}]
});
}); 
```

[http://jsfiddle.net/pabloker/aJnE3/1/](http://jsfiddle.net/pabloker/aJnE3/1/)

# c++ - 使用 &argument 为调用编写函数头

> ID：14595456
> 
> 赞同：0
> 
> 时间：2013-01-30T01:59:27.390
> 
> 标签：c++

我有以下代码。

```
int quotient, remainder, numerator, denominator;
numerator = 128;
denominator = 5;
divide(numerator, denominator, &quotient, &remainder); 
```

我想问一下用“&”争论是什么意思。以及如何编写“除法”函数头？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T02:01:04.110

`&`是“地址”运算符并创建一个指向变量的指针。的函数头`divide`应该是

```
void divide(int num, int denom, int* quot, int* rem); 
```

# ruby - RSpec：使用线程进行测试

> ID：14595458
> 
> 赞同：9
> 
> 时间：2013-01-30T01:59:52.207
> 
> 标签：ruby, multithreading, unit-testing, rspec

在 RSpec 中，我有创建一个新线程的函数，并在该线程内执行一些操作——在我的例子中，调用`TCPSocket#readline`. 这是现在的功能：

```
def read
  Thread.new do
    while line = @socket.readline
      #TODO: stuff
    end
  end
end 
```

由于线程调度，如果这样写，我的测试将失败：

```
it "reads from socket" do
  subject.socket.should_receive(:readline)
  subject.read
end 
```

目前我知道解决这个问题的唯一方法是使用`sleep 0.1`. 有没有办法正确延迟测试直到该线程运行？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-30T18:04:48.687

如果您的目标是通过执行第二个线程来断言系统状态发生变化，您应该加入主测试线程中的第二个线程：

```
it "reads from socket" do
  subject.socket.should_receive(:readline)
  socket_thread = subject.read
  socket_thread.join
end 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-09-03T00:01:28.890

这有点小技巧，但是`before`如果您希望线程`yield`能够`join`在线程结束时调用，您可以使用这里的块。

```
before do
  allow(Thread).to receive(:new).and_yield.and_return(Class.new { def join; end }.new)
end 
```

# email - Magento 在结帐页面获取客人并登录客户姓名、电子邮件和订单号/参考号

> ID：14595460
> 
> 赞同：0
> 
> 时间：2013-01-30T01:59:56.937
> 
> 标签：email, magento, checkout, mage

一旦客户点击下订单按钮，我试图让客户的姓名、电子邮件和订单号传递到支付网关。到目前为止，我已经设法使用

```
$total = Mage::getModel('checkout/cart')->getQuote()->getGrandTotal(); 
```

我尝试使用

```
Mage::getSingleton('customer/session')->getCustomer();

$email = $customer->getEmail();  

$firstname = $customer->getFirstname(); 

$lastname= $customer->getLastname(); 
```

但它们似乎没有返回值。我知道这一点是因为我在之后回显了变量，除了 $total 之外，它们都不起作用。帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T12:40:37.597

最好的方法是创建一个自定义支付网关模块。

看

[http://www.excellencemagentoblog.com/magento-create-custom-payment-method](http://www.excellencemagentoblog.com/magento-create-custom-payment-method)

[Magento 自定义支付网关](https://stackoverflow.com/questions/6237317/magento-custom-payment-gateway)

[http://roysimkes.net/blog/2009/11/creating-your-own-payment-gateway-for-magento-part-1/](http://roysimkes.net/blog/2009/11/creating-your-own-payment-gateway-for-magento-part-1/)

[http://roysimkes.net/blog/2009/11/creating-your-own-payment-gateway-for-magento-%E2%80%93-part-2/](http://roysimkes.net/blog/2009/11/creating-your-own-payment-gateway-for-magento-%E2%80%93-part-2/)

# c - 努力在 xmega256a3 上实现对 FreeRTOS 的无滴答支持

> ID：14595462
> 
> 赞同：2
> 
> 时间：2013-01-30T02:00:09.320
> 
> 标签：c, embedded, avr, freertos

我正在努力获得为我们的 xmega256a3 端口的 FreeRTOS 工作的无滴答支持。环顾四周，试图更好地理解幕后，我惊讶地看到以下行`vTaskStepTick()`：

```
configASSERT( xTicksToJump <= xNextTaskUnblockTime ); 
```

我没有`configASSERT`打开，但我认为如果我打开了，那会经常引发问题。`xTicksToJump`是增量时间，但是`xNextTaskUnblockTime`，如果我正确阅读代码，是绝对滴答时间吗？我弄错了吗？

我的睡眠功能，按照文档示例的模式如下所示：

```
static uint16_t TickPeriod; 

void sleepXmega(portTickType expectedIdleTime) 
{ 
  TickPeriod = RTC.PER; // note the period being used for ticking on the RTC so we can restore it when we wake up 
  cli(); // no interrupts while we put ourselves to bed 
  SLEEP_CTRL = SLEEP_SMODE_PSAVE_gc | SLEEP_SEN_bm; // enable sleepability 
  setRTCforSleep(); // reconfigure the RTC for sleeping 
  while (RTC.STATUS & RTC_SYNCBUSY_bm); 
  RTC.COMP = expectedIdleTime - 4; // set the RTC.COMP to be a little shorter than our idle time, seems to be about a 4 tick overhead 
  while (RTC.STATUS & RTC_SYNCBUSY_bm); 
  sei(); // need the interrupt to wake us 
  cpu_sleep(); // lights out 
  cli(); // disable interrupts while we rub the sleep out of our eyes 
  while (RTC.STATUS & RTC_SYNCBUSY_bm); 
  SLEEP.CTRL &= (~SLEEP_SEN_bm);    // Disable Sleep 
  vTaskStepTick(RTC.CNT);  // note how long we were really asleep for 
  setRTCforTick(TickPeriod); // repurpose RTC back to its original use for ISR tick generation 
  sei(); // back to our normal interruptable self 
} 
```

如果有人在那里看到明显的问题，我很想听听。它展示的行为有点有趣。为了测试，我正在运行一个延迟 2000 毫秒的简单任务循环，然后简单地切换一个我可以在我的示波器上观看的引脚。在我的函数中添加一些 printf，它会正确执行第一个，但是在我退出它之后，它会立即重新进入，但值接近 65535。它尽职尽责地等待，然后让下一个再次正确，然后再次错误（长），来回交替。

# jquery - 表单发布时jQuery触发事件

> ID：14595464
> 
> 赞同：0
> 
> 时间：2013-01-30T02:00:25.763
> 
> 标签：jquery, forms, events

只是想知道一旦表单动作开始（表单开始发布）直到动作完成（然后微调器消失），是否有一种简单的方法来触发事件（例如显示加载微调器）。类似于在 ajaxStart 时显示微调器并在 ajaxStop 发布时隐藏它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T02:02:37.013

如果表单是通过 ajax 发布的，这很容易做到：

```
$("#throbber").show();
$("form").ajaxSubmit().done(function () {
   $("#throbber").hide();
}); 
```

只需将 throbber 放在`<img>`html 中合理的位置并将其设置为`display: none`初始值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T02:04:07.370

假设您的意思是常规的 HTML 表单提交，那么是的，您可以使用处理程序拦截提交`form.onsubmit = function(){...}`。

返回`false`以禁止提交，或`true`（或除 之外的任何内容`false`）以允许提交。

在 jQuery 中：

```
$("#myForm").on('submit', function(){
    ...
    return true;//or false
}); 
```

但是，根据服务器响应的速度，微调器可能永远不会显示或仅显示很短的时间，然后页面会被更新。

# php - 表单未保存到数据库

> ID：14595474
> 
> 赞同：2
> 
> 时间：2013-01-30T02:01:00.233
> 
> 标签：php, mysql, forms

我为 5K 跑步制作了一个表格，用户在其中输入有关他/她的基本信息（名字、姓氏、电子邮件、组织、他们是否参加活动，以及在查看豁免表格后选中复选框。

我在最后放置了一个提交按钮。我在将表单连接到数据库时遇到问题。我已经尝试连接并在 mySql 中创建了一个名为“basicInfo”的表我是编码新手，所以我很感激我能得到的所有帮助，我一直坚持下去。

到目前为止，这是我的代码

index.php（已编辑）

```
<?php

// Event name
$event = "2013 VIA-1 5K Run Fundraiser";

// Orgs  See table organisations
// $orgs = array('', 'Northeastern Illinois','Illinois Institute of Technology', 'Loyola', 'Oberlin', 'Northwestern', 'Purdue', 'IVSU', 'UW-Madison', 'UIllinois','Iowa State University', 'Michigan-Ann Arbor','Marquette University', 'Michigan State', 'UIC', 'Notre Dame', 'VSAM', 'Ohio State', 'UCincinnati', 'Northern Illinois', 'Indiana-Bloomington', 'University of Iowa', 'St. Cloud');
// asort($orgs);

// Registration fees for attendees and non-attendees
$fee_attendee = 10;
$fee_nonAttendee = 15;

$paypal_email = 'payment@example.com ';

// Registration closing date (will go until 11:59 PM Central Standard Time of this day)
$close_month = 03;
$close_day = 08;
$close_year = 2013;

// $time = time(); Easier to use the build in now function of MySQL. 

function clean($in)
{
    $out = trim(strip_tags($in));
    $out = addslashes($out);
    return $out;
}

function listform(){
$host = "local";
$user = "user";
$password = "password";
$database = "database";

// open connection to databse
$link = mysqli_connect($host, $user, $password, $database);
        IF (!$link){
            echo ("Unable to connect to database!");
        }
        ELSE {
           //Get organisations from table organisations
           $query = "SELECT * FROM  organisations ORDER BY name ASC"; 
           $result = mysqli_query($link, $query);
                while($row = mysqli_fetch_array($result, MYSQLI_BOTH)){
                    echo "<option value=".$row['id_organisations'].">".$row['name']."</option>\n";
                }
        }
        mysqli_close($link);
}

//Check if variables are post if so filter the input if not initiating variables for form
IF (isset($_POST['firstname'])){  
     $firstname  = filter_var($_POST['firstname'], FILTER_SANITIZE_STRING);    
}
ELSE {
    $firstname  = "";
}

IF (isset($_POST['lastname'])){
            $lastname   = filter_var($_POST['lastname'],FILTER_SANITIZE_STRING); 
}
ELSE {
    $lastname   = "";
}

IF (isset($_POST['org'])){
   $org = $_POST['org'];
}
ELSE {
    $org    = "";
}

IF (isset($_POST['email'])){
    $email  = filter_var(filter_var($_POST['email'],FILTER_SANITIZE_EMAIL),FILTER_VALIDATE_EMAIL);
}
ELSE {
    $email  = "";
}

IF (isset($_POST['attendant'])){
    $attendant  = filter_var(filter_var($_POST['attendant'],FILTER_SANITIZE_STRING));
}
ELSE {
    $attendant  = "";
}
IF (isset($_POST['waiver'])){
    $waiver = filter_var(filter_var($_POST['waiver'],FILTER_SANITIZE_STRING));
}
ELSE {
    $waiver  = "";
}

function submit_form(){
    $host  = "host";
$user = "user";
$password = "password";
$database = "database";

    $firstname  = filter_var($_POST['firstname'], FILTER_SANITIZE_STRING); 
    $lastname   = filter_var($_POST['lastname'], FILTER_SANITIZE_STRING); 
    $org    = $_POST['org'];
    $email  = filter_var(filter_var($_POST['email'],FILTER_SANITIZE_EMAIL),FILTER_VALIDATE_EMAIL);
    $attendant  = $_POST['attendant'];

    // open connection to database
    $link = mysqli_connect($host,$user, $password, $database);
        IF (!$link){
            echo ("Unable to connect to database!");
        }
        ELSE {
           //INSERT VALUES INTO DATABASE
           $query = "INSERT INTO basicinfo (firstname,lastname,email,attendant,org,time) VALUES('".$firstname."', '".$lastname."', '".$email."', ".$attendant.", ".$org.", NOW())";
           return mysqli_query($link,$query);

        }
//close connection to database
        mysqli_close($link);

    }

//Warning messages initiation
$warning_firstname  = "*Required";
$warning_lastname   = "*Required";
$warning_org  = "*Required";
$warning_email   = "*Required";
$warning_attendant   = "*Required";
$warning_waiver      = "*Required";

$formfirstpart = <<<EODformfirspart
<HTML>
    <head><title>Form 5K RUN </title></head>
     <body style="background-color:gold">
     <tbody>
            <p>We're excited to introduce the 5K Run to VIA-1! During this year's conference, Individuals can register to participate in the fun across University of Iowa's campus in order to raise money for this year's CPP</p>
    <div class='row'>
        <form action="{$_SERVER['PHP_SELF']}" method="POST" name="registration">
           <div class='column grid_5'>
            <label for='first'>First Name:</label><br />
            <input type="text" name="firstname" id="first" maxlength="25" tabindex='1' VALUE="$firstname"><span class="warning">$warning_firstname</span><br><br>
            <label for='first'>Last Name:</label><br />
            <input type="text" name="lastname" id='lastname' maxlength="25" tabindex='1' VALUE="$lastname" /><span class="warning">$warning_lastname</span><br /><br />
            <label for='email'>E-mail:</label><br />
            <input type="text" name="email" id='email' maxlength="100" tabindex='3' VALUE="$email" /><span class="warning">$warning_email</span><br /><br />

           <label for="org">Organization:</label><br />
            <select id="org" name="org" tabindex="5" form="registration">

EODformfirspart;

$formlastpart = <<<EODlastpart
            </SELECT>
                <span class="warning">$warning_org</span><br /><br />

                    <label for='attendant'>Are you attending VIA-1?</label><br />

                <input type='radio' class='radio' name='attendant' id='attendant-yes' value='1' /> <label for='attendant-yes'>Yes</label><br />
            <input type='radio' class='radio' name='attendant' id='attendant-no' value='0' /> <label for='attendant-no'>No </label>$warning_attendant<br /><br />

            <input type='checkbox' class='radio' name='waiver' id='waiver' value=1  /> <label for='waiver'>I understand and agree to the terms of <a href='waiver.php' target="_blank">the waiver</a>.$warning_waiver</label>
        </div>      
    </div>
    <br></br>
    <div class='column grid_10 right'>
            <input type="submit" class='button' name="submit" value="submit" tabindex='7' /></form>
        </div>

            </tbody>
        </div>
    </div>

    </body>
    </html>

EODlastpart;

IF(!IsSet($_POST['submit'])){ // Check if form is not send, if not display empty form.

echo $formfirstpart;
echo listform();
echo $formlastpart; 
}

ELSEIF (IsSet($_POST['submit']) AND (isset($firstname) OR isset($lastname) OR isset($email) OR  isset($org) OR isset($attendant))) {
$warning_counter = 0;
if ($firstname == "") {      
        $warning_firstname = 'Please provide your first name and / or a valid name';
                $warning_counter = + 1 ;
        }
if ($firstname == "") {      
        $warning_lastname = 'Please provide your last name and / or a valid name';
                $warning_counter = + 1;
        }
if ($email == "") {      
        $warning_email = 'Please provide your email adress and / or a valid email adress';
                $warning_counter = +1;
        }

if ($org == " ") {      
        $warning_org = 'Please select your organisation';
                $warning_counter = +1;
        }

if ($waiver == "") {      
        $warning_waiver = 'You have to accept the waiver agreement the otherwise you cannot attend'; 
                $warning_counter = +1;
        }
if ($attendant == "") {      
        $warning_attendant = 'Do you attend VIA-1?';
                $warning_counter =+1;
        } 
 if ($warning_counter>0){               
$formfirstpart1 = <<<EODformfirspart1
<HTML>
    <head><title>Form 5K RUN </title></head>
     <body style="background-color:gold">
     <tbody>
            <p>We're excited to introduce the 5K Run to VIA-1! During this year's conference, Individuals can register to participate in the fun across University of Iowa's campus in order to raise money for this year's CPP</p>
    <div class='row'>
        <form action="{$_SERVER['PHP_SELF']}" method="POST" name="registration">
           <div class='column grid_5'>
            <label for='first'>First Name:</label><br />
            <input type="text" name="firstname" id="first" maxlength="25" tabindex='1' VALUE="$firstname"><span class="warning">$warning_firstname</span><br><br>
            <label for='first'>Last Name:</label><br />
            <input type="text" name="lastname" id='lastname' maxlength="25" tabindex='1' VALUE="$lastname" /><span class="warning">$warning_lastname</span><br /><br />
            <label for='email'>E-mail:</label><br />
            <input type="text" name="email" id='email' maxlength="100" tabindex='3' VALUE="$email" /><span class="warning">$warning_email</span><br /><br />

        <label for="org">Organization:</label><br />
            <select id="org" name="org" tabindex="5" form="registration">

EODformfirspart1;

$formlastpart1 = <<<EODlastpart1
            </select>
                <span class="warning">$warning_org</span><br /><br />

                    <label for='attendant'>Are you attending VIA-1?</label><br />

                <input type='radio' class='radio' name='attendant' id='attendant-yes' value='1' /> <label for='attendant-yes'>Yes</label><br />
            <input type='radio' class='radio' name='attendant' id='attendant-no' value='0' /> <label for='attendant-no'>No </label><br />$warning_attendant<br />

            <input type='checkbox' class='radio' name='waiver' id='waiver' value=1  /> <label for='waiver'>I understand and agree to the terms of <a href='waiver.php' target="_blank">the waiver</a>.$warning_waiver</label>
        </div>      
    </div>
    <br></br>
    <div class='column grid_10 right'>
            <input type="submit" class='button' name="submit" value="submit" tabindex='7' />
        </div>
        </form>
            </tbody>
            </table>
        </div>
    </div>

    </font>
    </body>
    </html>

EODlastpart1;

    echo $formfirstpart1;
    echo listform();
    echo $formlastpart1;
 }
 IF ($warning_counter == 0){
submit_form();
header('Location: submitted.php');    
 }
}

?> 
```

这是提交的.php（下一页）

```
<html>
    <head><title>Your form has been submitted</title></head>
    <body>
    <h1>See you at the 5K Run/walk for Memo.</h1>
    <p class="content">Your form has been submitted.</p>

    <p class="content">Click <a href="index.php">here</a> to go back to the main page.</p>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T03:03:00.523

首先，虽然我通常讨厌这些建议，但您是否考虑过使用带有表单前端的谷歌文档？对于非开发人员来说，它们是一种超级简单的方法，可以从人们那里获取数据，并将其放入电子表格中。

尽管如此，我假设您使用的是自动增量主键，我是否建议您将查询更改为：

```
if(mysql_query("INSERT INTO basicInfo VALUES(null, '{$_POST['first]}', '{$_POST['last']}', '{$_POST['email']}', '{$_POST['attendant']}', '$org', $time, 0, '', 1)"))
    { 
```

我已将您的 '' 更改为 null，因为您希望数据库在那里插入它想要的内容。我还将您在字符串中包含关联数组的方式更改为通常使 PHP 更快乐的方式。

为了清理 $_POST 数组，类似于

```
$expected = array('first', 'last', 'expected', 'attendant');
foreach($expected as $k)
{
  $p[$k] = clean($_POST[$k]);
}
//then changing the query to use $p rather than $_POST, clearly. 
```

过去，正如其他人所建议的那样，我强烈建议您使用`mysql_real_escape_string()`而不是某种 addlashes() 组合。

发布结果`SHOW CREATE TABLE basicInfo;`或任何错误将有助于解决 MySQL 问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T04:05:45.783

基本上有两种方法可以使用表单将数据发送到数据库。第一种方法是让人们填写表格并将数据发送到下一页。您可以添加 Java 脚本来检查填写的数据是否符合您的要求，并及时响应。例如，所有必填字段均已填写。下一页处理数据并将数据发送到 MySQL 服务器。您可以使用的表单方法是 POST / GET。第二种方法是在一个页面上显示表单并在同一页面上进行数据处理（PHP_SELF 或通过在表单操作中引用同一页面）。第二种方法要求代码非常结构化。如果需要检查数据是否已经提交。接下来需要验证是否有效。如果表单已提交且输入有效，则数据已提交到数据库，并且访问者会显示类似“感谢您提交表单。我们会尽快与您联系。”的文本。如果表单已提交且数据无效，则访问者应停留在同一页面上并收到错误消息，例如“需要填写以下字段：....”，并且应显示表单。如果表单未提交（在第一次访问时），访问者应该会显示该表单。

最简单的设置方法是第一种方法，第二种方法是我认为最好的方法，但我建议您从第一种方法开始。一旦第一种方法起作用，您可以添加诸如 Javascript 之类的内容和/或将其更改为方法二。

试试这个：

```
<?php

// Event name
$event = "2013 VIA-1 5K Run Fundraiser";

// Orgs  See table organisations
// $orgs = array('', 'Northeastern Illinois','Illinois Institute of Technology', 'Loyola', 'Oberlin', 'Northwestern', 'Purdue', 'IVSU', 'UW-Madison', 'UIllinois','Iowa State University', 'Michigan-Ann Arbor','Marquette University', 'Michigan State', 'UIC', 'Notre Dame', 'VSAM', 'Ohio State', 'UCincinnati', 'Northern Illinois', 'Indiana-Bloomington', 'University of Iowa', 'St. Cloud');
// asort($orgs);

// Registration fees for attendees and non-attendees
$fee_attendee = 10;
$fee_nonAttendee = 15;

$paypal_email = 'payment@example.com ';

// Registration closing date (will go until 11:59 PM Central Standard Time of this day)
$close_month = 03;
$close_day = 08;
$close_year = 2013;

// $time = time(); Easier to use the build in now function of MySQL. 

function clean($in)
{
    $out = trim(strip_tags($in));
    $out = addslashes($out);
    return $out;
}

function listform(){
$host = "localhost";
$user = "user";
$password = "password";
$database = "database";

// open connection to databse
$link = mysqli_connect($host, $user, $password, $database);
        IF (!$link){
            echo ("Unable to connect to database!");
        }
        ELSE {
           //Get organisations from table organisations
           $query = "SELECT * FROM  organisations ORDER BY name ASC"; 
           $result = mysqli_query($link, $query);
                while($row = mysqli_fetch_array($result, MYSQLI_BOTH)){
                    echo "<option value=".$row['id_organisations'].">".$row['name']."</option>\n";
                }
        }
        mysqli_close($link);
}

//Check if variables are post if so filter the input if not initiating variables for form
IF (isset($_POST['firstname'])){  
     $firstname  = filter_var($_POST['firstname'], FILTER_SANITIZE_STRING);    
}
ELSE {
    $firstname  = "";
}

IF (isset($_POST['lastname'])){
            $lastname   = filter_var($_POST['lastname'],FILTER_SANITIZE_STRING); 
}
ELSE {
    $lastname   = "";
}

IF (isset($_POST['org'])){
   $org = $_POST['org'];
}
ELSE {
    $org    = "";
}

IF (isset($_POST['email'])){
    $email  = filter_var(filter_var($_POST['email'],FILTER_SANITIZE_EMAIL),FILTER_VALIDATE_EMAIL);
}
ELSE {
    $email  = "";
}

IF (isset($_POST['attendant'])){
    $attendant  = filter_var(filter_var($_POST['attendant'],FILTER_SANITIZE_STRING));
}
ELSE {
    $attendant  = "";
}
IF (isset($_POST['waiver'])){
    $waiver = filter_var(filter_var($_POST['waiver'],FILTER_SANITIZE_STRING));
}
ELSE {
    $waiver  = "";
}

function submit_form(){
    $host = "localhost";
    $user = "user";
    $password = "password";
    $database = "database";   

    $firstname  = filter_var($_POST['firstname'], FILTER_SANITIZE_STRING); 
    $lastname   = filter_var($_POST['lastname'], FILTER_SANITIZE_STRING); 
    $org    = $_POST['org'];
    $email  = filter_var(filter_var($_POST['email'],FILTER_SANITIZE_EMAIL),FILTER_VALIDATE_EMAIL);
    $attendant  = $_POST['attendant'];

    // open connection to database
    $link = mysqli_connect($host, $user, $password, $database);
        IF (!$link){
            echo ("Unable to connect to database!");
        }
        ELSE {
           //INSERT VALUES INTO DATABASE
           $query = "INSERT INTO basicInfo (firstname,lastname,email,attendant,org,time) VALUES('".$firstname."', '".$lastname."', '".$email."', ".$attendant.", ".$org.", NOW())";
           return mysqli_query($link,$query);

        }
//close connection to database
        mysqli_close($link);

    }

//Warning messages initiation
$warning_firstname  = "*Required";
$warning_lastname   = "*Required";
$warning_org  = "*Required";
$warning_email   = "*Required";
$warning_attendant   = "*Required";
$warning_waiver      = "*Required";

$formfirstpart = <<<EODformfirspart
<HTML>
    <head><title>Form 5K RUN </title></head>
     <body style="background-color:gold">
     <tbody>
            <p>We're excited to introduce the 5K Run to VIA-1! During this year's conference, Individuals can register to participate in the fun across University of Iowa's campus in order to raise money for this year's CPP</p>
    <div class='row'>
        <form action="{$_SERVER['PHP_SELF']}" method="POST" name="registration">
           <div class='column grid_5'>
            <label for='first'>First Name:</label><br />
            <input type="text" name="firstname" id="first" maxlength="25" tabindex='1' VALUE="$firstname"><span class="warning">$warning_firstname</span><br><br>
            <label for='first'>Last Name:</label><br />
            <input type="text" name="lastname" id='lastname' maxlength="25" tabindex='1' VALUE="$lastname" /><span class="warning">$warning_lastname</span><br /><br />
            <label for='email'>E-mail:</label><br />
            <input type="text" name="email" id='email' maxlength="100" tabindex='3' VALUE="$email" /><span class="warning">$warning_email</span><br /><br />

            <label for='org'>Organization:</label><br />
            <SELECT id="org" name="org">

EODformfirspart;

$formlastpart = <<<EODlastpart
            </SELECT>
                <span class="warning">$warning_org</span><br /><br />

                    <label for='attendant'>Are you attending VIA-1?</label><br />

                <input type='radio' class='radio' name='attendant' id='attendant-yes' value='1' /> <label for='attendant-yes'>Yes</label><br />
            <input type='radio' class='radio' name='attendant' id='attendant-no' value='0' /> <label for='attendant-no'>No </label>$warning_attendant<br /><br />

            <input type='checkbox' class='radio' name='waiver' id='waiver' value=1  /> <label for='waiver'>I understand and agree to the terms of <a href='waiver.php' target="_blank">the waiver</a>.$warning_waiver</label>
        </div>      
    </div>
    <br></br>
    <div class='column grid_10 right'>
            <input type="submit" class='button' name="submit" value="submit" tabindex='7' /></form>
        </div>

            </tbody>
        </div>
    </div>

    </body>
    </html>

EODlastpart;

IF(!IsSet($_POST['submit'])){ // Check if form is not send, if not display empty form.

echo $formfirstpart;
echo listform();
echo $formlastpart; 
}

ELSEIF (IsSet($_POST['submit']) AND (isset($firstname) OR isset($lastname) OR isset($email) OR  isset($org) OR isset($attendant))) {
$warning_counter = 0;
if ($firstname == "") {      
        $warning_firstname = 'Please provide your first name and / or a valid name';
                $warning_counter = + 1 ;
        }
if ($firstname == "") {      
        $warning_lastname = 'Please provide your last name and / or a valid name';
                $warning_counter = + 1;
        }
if ($email == "") {      
        $warning_email = 'Please provide your email adress and / or a valid email adress';
                $warning_counter = +1;
        }

if ($org == " ") {      
        $warning_org = 'Please select your organisation';
                $warning_counter = +1;
        }

if ($waiver == "") {      
        $warning_waiver = 'You have to accept the waiver agreement the otherwise you cannot attend'; 
                $warning_counter = +1;
        }
if ($attendant == "") {      
        $warning_attendant = 'Do you attend VIA-1?';
                $warning_counter =+1;
        } 
 if ($warning_counter>0){               
$formfirstpart1 = <<<EODformfirspart1
<HTML>
    <head><title>Form 5K RUN </title></head>
     <body style="background-color:gold">
     <tbody>
            <p>We're excited to introduce the 5K Run to VIA-1! During this year's conference, Individuals can register to participate in the fun across University of Iowa's campus in order to raise money for this year's CPP</p>
    <div class='row'>
        <form action="{$_SERVER['PHP_SELF']}" method="POST" name="registration">
           <div class='column grid_5'>
            <label for='first'>First Name:</label><br />
            <input type="text" name="firstname" id="first" maxlength="25" tabindex='1' VALUE="$firstname"><span class="warning">$warning_firstname</span><br><br>
            <label for='first'>Last Name:</label><br />
            <input type="text" name="lastname" id='lastname' maxlength="25" tabindex='1' VALUE="$lastname" /><span class="warning">$warning_lastname</span><br /><br />
            <label for='email'>E-mail:</label><br />
            <input type="text" name="email" id='email' maxlength="100" tabindex='3' VALUE="$email" /><span class="warning">$warning_email</span><br /><br />

            <label for="org">Organization:</label><br />
            <select id="org" name="org" tabindex='5' form="registration">

EODformfirspart1;

$formlastpart1 = <<<EODlastpart1
            </select>
                <span class="warning">$warning_org</span><br /><br />

                    <label for='attendant'>Are you attending VIA-1?</label><br />

                <input type='radio' class='radio' name='attendant' id='attendant-yes' value='1' /> <label for='attendant-yes'>Yes</label><br />
            <input type='radio' class='radio' name='attendant' id='attendant-no' value='0' /> <label for='attendant-no'>No </label><br />$warning_attendant<br />

            <input type='checkbox' class='radio' name='waiver' id='waiver' value=1  /> <label for='waiver'>I understand and agree to the terms of <a href='waiver.php' target="_blank">the waiver</a>.$warning_waiver</label>
        </div>      
    </div>
    <br></br>
    <div class='column grid_10 right'>
            <input type="submit" class='button' name="submit" value="submit" tabindex='7' />
        </div>
        </form>
            </tbody>
            </table>
        </div>
    </div>

    </font>
    </body>
    </html>

EODlastpart1;

    echo $formfirstpart1;
    echo listform();
    echo $formlastpart1;
 }
 IF ($warning_counter == 0){
submit_form();
header('Location: submitted.php');    
 }
}

?> 
```

完成表格后，您将被重定向到此页面 submit.php

```
<html>
    <head><title>Your form has been submitted</title></head>
    <body>
    <h1>See you at the 5K run.</h1>
    <p class="content">Your form has been submitted. Good luck with your training workouts</p>

    <p class="content">Click <a href="index.php">here</a> to go back to the main page.</p>
    </body>
</html> 
```

表结构：

```
CREATE TABLE IF NOT EXISTS organisations (
  id_organisations int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(100) DEFAULT NULL,
  PRIMARY KEY (id_organisations)
) ENGINE=InnoDB;

CREATE TABLE IF NOT EXISTS basicinfo (
  id int(11) NOT NULL AUTO_INCREMENT,
  firstname varchar(30) NOT NULL,
  lastname varchar(50) NOT NULL,
  org int(11) NOT NULL,
  email varchar(100) NOT NULL,
  attendant int(11) NOT NULL,
  `time` datetime NOT NULL,
  PRIMARY KEY (id)
) ENGINE=InnoDB; 
```

[SQL 小提琴](http://www.sqlfiddle.com/#!2/23f3b/4)

重要的是要注意这只是一个开始。我没有测试过，所以请记住这一点。我不明白你的代码的某些部分，所以我不得不做一些猜测工作。

编辑：删除旧数据库并导入结构和数据：

```
DROP TABLE IF EXISTS basicinfo;
DROP TABLE IF EXISTS organisations;

CREATE TABLE organisations (
      id_organisations int(11) NOT NULL AUTO_INCREMENT,
      `name` varchar(100) DEFAULT NULL,
      PRIMARY KEY (id_organisations)
    ) ENGINE=MyISAM DEFAULT CHARSET=latin1;

CREATE TABLE basicinfo (
  id int(11) NOT NULL AUTO_INCREMENT,
  firstname varchar(30) NOT NULL,
  lastname varchar(50) NOT NULL,
  org int(11) NOT NULL,
  email varchar(100) NOT NULL,
  attendant int(11) NOT NULL,
  `time` datetime NOT NULL,
  PRIMARY KEY (id)
) ENGINE=MyISAM DEFAULT CHARSET=latin1;

INSERT INTO `organisations` (`id_organisations`, `name`) VALUES
(1, 'Northeastern Illinois'),
(2, 'Illinois Institute of Technology'),
(3, 'Loyola'),
(4, 'Oberlin'),
(5, 'Northwestern'),
(6, 'Purdue'),
(7, 'IVSU'),
(8, 'UW-Madison'),
(9, 'UIllinois'),
(10, 'Iowa State University'),
(11, 'Michigan-Ann Arbor'),
(12, 'Marquette University'),
(13, 'Michigan State'),
(14, 'UIC'),
(15, 'Notre Dame'),
(16, 'VSAM'),
(17, 'Ohio State'),
(18, 'UCincinnati'),
(19, 'Northern Illinois'),
(20, 'Indiana-Bloomington'),
(21, 'University of Iowa'),
(22, 'St. Cloud'); 
```

如果您之前更改过 UID，请在 PHP 代码中将其更改为 ID。上述查询将删除您的表 (basicinfo)，然后重新创建两个新表 (basicinfo 和组织)。这就是您将其应用于您自己的数据库的方式。将上面的 SQL 代码复制到 phpmyadmin。登录到 phpmyadmin -> 选择您的数据库 -> SQL -> 删除默认文本并将上面的代码复制到窗口中 -> 运行查询（开始）。

如果只想更改您的数据库，您可以使用以下查询：

```
ALTER TABLE `basicinfo` 
CHANGE `uid` `id` INT auto_increment,
CHANGE `firstname` `firstname` varchar(30),
CHANGE `lastname` `lastname` varchar(50),
CHANGE `org` `org` INT,
CHANGE `email` `email` VARCHAR(100), 
ADD `time` datetime NOT NULL; 
```

但是您仍然需要创建和填充组织数据库。

```
CREATE TABLE organisations (
      id_organisations int(11) NOT NULL AUTO_INCREMENT,
      `name` varchar(100) DEFAULT NULL,
      PRIMARY KEY (id_organisations)
    ) ENGINE=MyISAM DEFAULT CHARSET=latin1;

INSERT INTO `organisations` (`id_organisations`, `name`) VALUES
(1, 'Northeastern Illinois'),
(2, 'Illinois Institute of Technology'),
(3, 'Loyola'),
(4, 'Oberlin'),
(5, 'Northwestern'),
(6, 'Purdue'),
(7, 'IVSU'),
(8, 'UW-Madison'),
(9, 'UIllinois'),
(10, 'Iowa State University'),
(11, 'Michigan-Ann Arbor'),
(12, 'Marquette University'),
(13, 'Michigan State'),
(14, 'UIC'),
(15, 'Notre Dame'),
(16, 'VSAM'),
(17, 'Ohio State'),
(18, 'UCincinnati'),
(19, 'Northern Illinois'),
(20, 'Indiana-Bloomington'),
(21, 'University of Iowa'),
(22, 'St. Cloud'); 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!2/e616c/1)

**最后编辑**：

```
<?php

// Event name
$event = "2013 VIA-1 5K Run Fundraiser";

// Registration fees for attendees and non-attendees
$fee_attendee = 10;
$fee_nonAttendee = 15;

$paypal_email = 'payment@example.com ';

// Registration closing date (will go until 11:59 PM Central Standard Time of this day)
$close_month = 03;
$close_day = 08;
$close_year = 2013;

// $time = time(); Easier to use the build in now function of MySQL. 

function clean($in)
{
    $out = trim(strip_tags($in));
    $out = addslashes($out);
    return $out;
}

function listform(){
$host = "host";
$user = "username";
$password = "password";
$database = "databasename";

// open connection to databse
$link = mysqli_connect($host, $user, $password, $database);
        IF (!$link){
            echo ("Unable to connect to database!");
        }
        ELSE {
           //Get organisations from table organisations
           $query = "SELECT * FROM  organisations ORDER BY name ASC"; 
           $result = mysqli_query($link, $query);
                while($row = mysqli_fetch_array($result, MYSQLI_BOTH)){
                    echo "<option value=".$row['id_organisations'].">".$row['name']."</option>\n";
                }
        }
        mysqli_close($link);
}

//Check if variables are post if so filter the input if not initiating variables for form
IF (isset($_POST['firstname'])){  
     $firstname  = filter_var($_POST['firstname'], FILTER_SANITIZE_STRING);    
}
ELSE {
    $firstname  = "";
}

IF (isset($_POST['lastname'])){
            $lastname   = filter_var($_POST['lastname'],FILTER_SANITIZE_STRING); 
}
ELSE {
    $lastname   = "";
}

IF (isset($_POST['org'])){
   $org = $_POST['org'];
}
ELSE {
    $org    = "";
}

IF (isset($_POST['email'])){
    $email  = filter_var(filter_var($_POST['email'],FILTER_SANITIZE_EMAIL),FILTER_VALIDATE_EMAIL);
}
ELSE {
    $email  = "";
}

IF (isset($_POST['attendant'])){
    $attendant  = filter_var(filter_var($_POST['attendant'],FILTER_SANITIZE_STRING));
}
ELSE {
    $attendant  = "";
}
IF (isset($_POST['waiver'])){
    $waiver = filter_var(filter_var($_POST['waiver'],FILTER_SANITIZE_STRING));
}
ELSE {
    $waiver  = "";
}

function submit_form(){
    $host  = "host";
$user = "username";
$password = "password";
$database = "databasename";

    $firstname  = filter_var($_POST['firstname'], FILTER_SANITIZE_STRING); 
    $lastname   = filter_var($_POST['lastname'], FILTER_SANITIZE_STRING); 
    $org    = $_POST['org'];
    $email  = filter_var(filter_var($_POST['email'],FILTER_SANITIZE_EMAIL),FILTER_VALIDATE_EMAIL);
    $attendant  = $_POST['attendant'];

    // open connection to database
    $link = mysqli_connect($host,$user, $password, $database);
        IF (!$link){
            echo ("Unable to connect to database!");
        }
        ELSE {
           //INSERT VALUES INTO DATABASE
           $query = "INSERT INTO basicinfo (firstname,lastname,email,attendant,org,time) VALUES('".$firstname."', '".$lastname."', '".$email."', ".$attendant.", ".$org.", NOW())";
           return mysqli_query($link,$query);

        }
//close connection to database
        mysqli_close($link);

    }

//Warning messages initiation
$warning_firstname  = "*Required";
$warning_lastname   = "*Required";
$warning_org  = "*Required";
$warning_email   = "*Required";
$warning_attendant   = "*Required";
$warning_waiver      = "*Required";

$formfirstpart = <<<EODformfirspart
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
    <head>
        <title>Form 5K RUN </title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
        <link href="style.css" type="text/css" rel="stylesheet" media="screen"/>

    </head>
    <body style="background-color:gold">

            <div>We're excited to introduce the 5K Run to VIA-1! During this year's conference, Individuals can register to participate in the fun across University of Iowa's campus in order to raise money for this year's CPP</div>
    <div class="row">
        <form action="{$_SERVER['PHP_SELF']}" method="POST" name="registration">
           <div class="column grid_5">
               <label for='first'>First Name:</label></br>
            <input type="text" name="firstname" id="first" maxlength="25" tabindex='1' VALUE="$firstname" /><span class="warning">$warning_firstname</span></br></br>
            <label for='first'>Last Name:</label></br>
            <input type="text" name="lastname" id='lastname' maxlength="25" tabindex='1' VALUE="$lastname" /><span class="warning">$warning_lastname</span></br></br>
            <label for='email'>E-mail:</label></br>
            <input type="text" name="email" id='email' maxlength="100" tabindex='3' VALUE="$email" /><span class="warning">$warning_email</span></br></br>

           <label for="org">Organization:</label><br />
            <select id="org" name="org" tabindex="5">

EODformfirspart;

$formlastpart = <<<EODlastpart
                            </select>
                <span class="warning">$warning_org</span><br /><br />

                    <label for='attendant'>Are you attending VIA-1?</label><br />

                <input type='radio' class='radio' name='attendant' id='attendant-yes' value='1' /> <label for='attendant-yes'>Yes</label><br />
            <input type='radio' class='radio' name='attendant' id='attendant-no' value='0' /> <label for='attendant-no'>No </label><br />$warning_attendant<br />

            <input type='checkbox' class="radio" name="waiver" id="waiver" value="1"  /> <label for='waiver'>I understand and agree to the terms of <a href='waiver.php' target="_blank">the waiver</a>.$warning_waiver</label>
        </div>

    <div class='column grid_10 right'>
            <input type="submit" class='button' name="submit" value="submit" tabindex='7' />
            </form>
</div>
    </body>
</html>
EODlastpart;

IF(!IsSet($_POST['submit'])){ // Check if form is not send, if not display empty form.

echo $formfirstpart;
echo listform();
echo $formlastpart; 
}

ELSEIF (IsSet($_POST['submit']) AND (isset($firstname) OR isset($lastname) OR isset($email) OR  isset($org) OR isset($attendant))) {
$warning_counter = 0;
if ($firstname == "") {      
        $warning_firstname = 'Please provide your first name and / or a valid name';
                $warning_counter = + 1 ;
        }
if ($firstname == "") {      
        $warning_lastname = 'Please provide your last name and / or a valid name';
                $warning_counter = + 1;
        }
if ($email == "") {      
        $warning_email = 'Please provide your email adress and / or a valid email adress';
                $warning_counter = +1;
        }

if ($org == " ") {      
        $warning_org = 'Please select your organisation';
                $warning_counter = +1;
        }

if ($waiver == "") {      
        $warning_waiver = 'You have to accept the waiver agreement the otherwise you cannot attend'; 
                $warning_counter = +1;
        }
if ($attendant == "") {      
        $warning_attendant = 'Do you attend VIA-1?';
                $warning_counter =+1;
        } 
 if ($warning_counter>0){               
$formfirstpart1 = <<<EODformfirspart1
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
    <head>
        <title>Form 5K RUN </title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
        <link href="style.css" type="text/css" rel="stylesheet" media="screen"/>

    </head>
    <body style="background-color:gold">

            <div>We're excited to introduce the 5K Run to VIA-1! During this year's conference, Individuals can register to participate in the fun across University of Iowa's campus in order to raise money for this year's CPP</div>
    <div class="row">
        <form action="{$_SERVER['PHP_SELF']}" method="POST" name="registration">
           <div class="column grid_5">
               <label for='first'>First Name:</label></br>
            <input type="text" name="firstname" id="first" maxlength="25" tabindex='1' VALUE="$firstname" /><span class="warning">$warning_firstname</span></br></br>
            <label for='first'>Last Name:</label></br>
            <input type="text" name="lastname" id='lastname' maxlength="25" tabindex='1' VALUE="$lastname" /><span class="warning">$warning_lastname</span></br></br>
            <label for='email'>E-mail:</label></br>
            <input type="text" name="email" id='email' maxlength="100" tabindex='3' VALUE="$email" /><span class="warning">$warning_email</span></br></br>

           <label for="org">Organization:</label><br />
            <select id="org" name="org" tabindex="5">

EODformfirspart1;

$formlastpart1 = <<<EODlastpart1

                            </select>
                <span class="warning">$warning_org</span><br /><br />

                    <label for='attendant'>Are you attending VIA-1?</label><br />

                <input type='radio' class='radio' name='attendant' id='attendant-yes' value='1' /> <label for='attendant-yes'>Yes</label><br />
            <input type='radio' class='radio' name='attendant' id='attendant-no' value='0' /> <label for='attendant-no'>No </label><br />$warning_attendant<br />

            <input type='checkbox' class="radio" name="waiver" id="waiver" value="1"  /> <label for='waiver'>I understand and agree to the terms of <a href='waiver.php' target="_blank">the waiver</a>.$warning_waiver</label>
        </div>

    <div class='column grid_10 right'>
            <input type="submit" class='button' name="submit" value="submit" tabindex='7' />
            </form>
</div>
    </body>
</html>

EODlastpart1;

    echo $formfirstpart1;
    echo listform();
    echo $formlastpart1;
 }
 IF ($warning_counter == 0){
submit_form();
header('Location: submitted.php');    
 }
}

?> 
```

# r - 存储 R 模型以供将来评分的好方法是什么

> ID：14595478
> 
> 赞同：1
> 
> 时间：2013-01-30T02:01:41.670
> 
> 标签：r, data-mining

假设我运行随机森林或 kmeans。我得到一个 R 对象。现在我想保存该模型以备将来使用。我认为 PMML 是一种很好的格式，但后来意识到 R 无法读取 PMML 并将其转换回可用于评分的对象。它只能写它。有没有其他方法可以使用 save 命令将其保存为 R 对象？这似乎是一个臃肿的解决方案，因为用于训练的数据附加到它上面。

# apache - 在 .htpasswd 上添加用户

> ID：14595479
> 
> 赞同：108
> 
> 时间：2013-01-30T02:01:43.970
> 
> 标签：apache, .htpasswd

我正在使用`.htpasswd`密码保护我服务器上的某些目录。但是，我注意到每次执行此操作时，`sudo htpasswd -c /etc/apache2/.htpasswd newuser`我当前的内容`.htpasswd`都会被覆盖。我网站的每个目录在 .htpasswd 上都有自己的用户。

我怎样才能不覆盖而是在我的 上添加新用户`.htpasswd`？

* * *

## 回答 #1

> 赞同：177
> 
> 时间：2013-01-30T02:03:49.087

完全相同，只是省略`-c`选项。Apache 的文档在[这里](http://httpd.apache.org/docs/current/programs/htpasswd.html)。

`htpasswd /etc/apache2/.htpasswd newuser`

此外，`htpasswd`通常不以 root 身份运行。它通常由 Web 服务器或所服务文件的所有者拥有。如果您使用 root 来编辑它而不是作为这些用户之一登录，这是可以接受的（我想），但您需要小心确保您不会意外地以 root 身份创建文件（因此让root拥有它，其他人无法编辑它）。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2015-02-19T19:53:10.320

FWIW，`htpasswd -n username`将结果直接输出到标准输出，完全避免接触文件。

# android - 使用引用恢复片段实例

> ID：14595481
> 
> 赞同：2
> 
> 时间：2013-01-30T02:01:55.373
> 
> 标签：android, android-fragments, restore

**简短版本：**我想知道当该片段包含对无法序列化或复制且需要保留在内存中的对象的引用时，我如何重新创建片段状态（例如，在屏幕旋转之后）。

**长版：** 在我的应用程序中，我使用连接到自定义*FragmentPagerAdapter的**ViewPager* ，该自定义 FragmentPagerAdapter实例化了许多显示包含在 ListView 中的数据（计划）的片段。所有这些都包含在父片段中。当由适配器实例化时，每个页面片段都被传递一个对一个对象（“ *ScheduleManager* ”）的引用，该对象执行以下几项操作：

 ***   包含要显示的数据
*   持有对*Context*对象的引用（为了访问*SharedPreferences*）
*   持有对父片段*LoaderManager*的引用，以便它可以重新加载数据
*   实现*OnClick* - 和*ActionMode*回调侦听器（能够创建和处理适用于所有页面的操作模式；页面片段将对象作为侦听器添加到其 ListViews）
*   定义一个回调接口来通知监听器状态变化或数据何时重新加载（页面片段将自己注册为监听器）。

本质上，*ScheduleManager*将所有东西放在一起，并实现了我的应用程序的这个（“调度”）部分的主要逻辑，即加载和提供数据，以及通过*ActionMode*修改和重新加载它的方法。不知道这个设计好不好...

**我的问题是**在这些情况下我应该如何恢复 Fragments 实例状态？我无法将*ScheduleManager*序列化为一个包，因为它会丢失对 Context 和*LoaderManager*的引用（当然，我会使用*setArguments* / *getArguments*）。此外，所有页面片段都**必须**引用同一个*ScheduleManager*实例，否则共享操作模式将不起作用。除此之外，我不想在每次恢复片段时都复制整个计划数据。我想将此对象保留在内存中，并让页面片段在恢复时回收对它的引用。

我想我可以让包含的活动持有*ScheduleManager*并让*PageFragment*查询它以获取参考。但如果可能的话，我更愿意将父片段中的所有内容保持为独立和模块化（不同的项目可以有不同的时间表）。在写这篇文章的时候，虽然我觉得没有办法解决这个问题。

当然，在重新创建父片段时，它也可以重新创建*ScheduleManager*并向其提供所需的引用（*Context* + *LoaderManager*）。问题是每个父fragment的实例不能有超过一个*ScheduleManager*的实例，那么如何让嵌套的页面fragment重新连接到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T00:59:19.763

这是我最终做的事情：

```
public void onCreate(Bundle savedInstanceState)
{
    Fragment fragment = this.getActivity().getFragmentManager().findFragmentByTag("SCHEDULE");
    if (fragment instanceof ScheduleMasterFragment)
    {
        ScheduleMasterFragment master = (ScheduleMasterFragment) fragment;
        this.scheduleManager = master.getScheduleManager();
    }
    else
    {
        throw new RuntimeException("SchedulePageFragment must be " +
                "the child of a ScheduleMasterFragment with Tag set to 'schedule'");
    }
    super.onCreate(savedInstanceState);
} 
```

ScheduleManager 是我想保留的参考。至少通过这种方式，我将所有代码都保留在片段本身中，除了`getScheduleManager`这`ScheduleMasterFragment`有意义，因为`ScheduleMasterFragment`不知何故是 ScheduleManager 实例的所有者。

仍然欢迎任何更好的解决方案...**

# mysql - SQL查询在密码列中选择一个字符串值？

> ID：14595482
> 
> 赞同：0
> 
> 时间：2013-01-30T02:02:02.140
> 
> 标签：mysql, sql, jdbc

我在**USERS**表中有两列**用户名**和**密码。**如何获取**用户名**和**密码**中的值并将其与程序中的另一个值进行比较。

 ******这就是我得到的。但是，eclipse给了我一个错误：

```
String sql = "SELECT username, password FROM USERS WHERE username = ?"; 
```

**错误**：

> com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以了解在“？”附近使用的正确语法 在第 1 行

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T02:06:28.747

您应该在执行查询之前准备好 sql 语句并绑定参数`?`或使用实际值构造 sql 。`username`

前者是避免sql注入的方法。******

# java - 使用 Java 发送组合键

> ID：14595483
> 
> 赞同：12
> 
> 时间：2013-01-30T02:02:17.697
> 
> 标签：java, awt, keypress, awtrobot

根据上一个链接（[如何发送键盘输出](https://stackoverflow.com/questions/10770205/how-to-send-keyboard-outputs)），Java 可以模拟使用 Robot 类按下的键。但是，如何模拟按键组合呢？如果我想发送组合“alt-123”，这可以使用机器人吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-30T02:07:47.960

简单的答案是肯定的。基本上，您需要将 s 包裹`keyPress/Release`在`Alt`其他`keyPress/Release`s周围

```
public class TestRobotKeys {

    private Robot robot;

    public static void main(String[] args) {
        new TestRobotKeys();
    }

    public TestRobotKeys() {
        try {
            robot = new Robot();
            robot.setAutoDelay(250);
            robot.keyPress(KeyEvent.VK_ALT);
            robot.keyPress(KeyEvent.VK_1);
            robot.keyRelease(KeyEvent.VK_1);
            robot.keyPress(KeyEvent.VK_2);
            robot.keyRelease(KeyEvent.VK_2);
            robot.keyPress(KeyEvent.VK_3);
            robot.keyRelease(KeyEvent.VK_4);
            robot.keyRelease(KeyEvent.VK_ALT);
        } catch (AWTException ex) {
            ex.printStackTrace();
        }
    }

} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-01-24T10:55:47.493

对于使用 java.awt.Robot 发送组合键，以下代码对我来说很好用

```
import java.awt.AWTException;
import java.awt.Robot;
import java.awt.event.KeyEvent;

public class VirtualKeyBoard extends Robot
{

    public VirtualKeyBoard() throws AWTException
    {
        super();
    }

    public void pressKeys(String keysCombination) throws IllegalArgumentException
    {
            for (String key : keysCombination.split("\\+"))
            {
                try
                {   System.out.println(key);
                    this.keyPress((int) KeyEvent.class.getField("VK_" + key.toUpperCase()).getInt(null));

                } catch (IllegalAccessException e)
                {
                    e.printStackTrace();

                }catch(NoSuchFieldException e )
                {
                    throw new IllegalArgumentException(key.toUpperCase()+" is invalid key\n"+"VK_"+key.toUpperCase() + " is not defined in java.awt.event.KeyEvent");
                }

            }

    }

    public void releaseKeys(String keysConbination) throws IllegalArgumentException
    {

            for (String key : keysConbination.split("\\+"))
            {
                try
                { // KeyRelease method inherited from java.awt.Robot
                    this.keyRelease((int) KeyEvent.class.getField("VK_" + key.toUpperCase()).getInt(null));
                } catch (IllegalAccessException e)
                {
                    e.printStackTrace();
                }catch(NoSuchFieldException e )
                {
                    throw new IllegalArgumentException(key.toUpperCase()+" is invalid key\n"+"VK_"+key.toUpperCase() + " is not defined in java.awt.event.KeyEvent");
                }
            }

    }

    public static void main(String[] args) throws AWTException
    {

         VirtualKeyBoard kb = new VirtualKeyBoard();

         String keyCombination = "control+a"; // select all text on screen
         //String keyCombination = "shift+a+1+c"; // types A!C on screen

         // For your case 
         //String keyCombination = "alt+1+2+3";

         kb.pressKeys(keyCombination);
         kb.releaseKeys(keyCombination); 

    }

} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-30T02:07:22.267

这是一个例子

```
Robot r = new Robot();
Thread.sleep(1000);

r.keyPress(KeyEvent.VK_ALT);
r.keyPress(KeyEvent.VK_NUMPAD1);
r.keyPress(KeyEvent.VK_NUMPAD2);
r.keyPress(KeyEvent.VK_NUMPAD3);            
r.keyRelease(KeyEvent.VK_ALT); 
```

不要忘记释放一些特殊的键，它会在你的机器上做一些疯狂的事情

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-05T17:03:45.687

此代码太接近本机 Windows 键盘。甚至 Api 键盘“按下”也将进入 Eclipse ide，因为它们通常会从 ide 按下。密钥是从当前调试的应用程序生成的！！（jdk 1.8，win 7，hp）

# jquery - 在 JQUERY 中使用嵌套 each() 计算累积内容高度

> ID：14595484
> 
> 赞同：0
> 
> 时间：2013-01-30T02:02:28.197
> 
> 标签：jquery, html, height, each, cumulative-sum

我正在尝试制定一个调整大小的函数来增加 div 容器的高度（在每种情况下，这里都是“div.cell”），如果屏幕被挤压得太多以至于内容溢出。每个 div.cell 都有一堆不同的 p。这里只有2个。

```
 <div class="cell panel">
        <img src="stills/press/press-logo-c2e2.png" class="general"><p class="one">Panelist - Chicago Comic & Entertainment Expo</p>
        <p class="two">[Panel Name Here]</p>
        <p class="three"><b>Panel Date/Location:</b> [Time]PM on April 26-28, 2013 at C2E2 (Chicago, Illinois)</p>
        <p class="three"><b>Panelists:</b> [Panelists]</p>
        <p class="three"><b>Panel Blurb:</b> "[Blurb]"</p>
    </div>

    <div class="cell panel">
        <img src="stills/press/press-logo-wondercon-anaheim.png" class="general"><p class="one">Panelist - WonderCon</p>
        <p class="two">[Panel Name Here]</p>
        <p class="three"><b>Panel Date/Location:</b> [Time]PM on March 29-31, 2013 at WonderCon (Anaheim, California)</p>
        <p class="three"><b>Panelists:</b> [Panelists]</p>
        <p class="three"><b>Panel Blurb:</b> "[Blurb]"</p>
    </div> 
```

在超级初级且非常错误的jquery中，我希望嵌套来做到这一点，例如：

```
var pheight = 0;
var divheight = 0;
var biggest = 0;
$("div.cell").each(function (){
    divheight=$(this).height();
    pheight = 0;
    $("p").each(function (){
        pheight += $(this).height();
    });
    biggest = divheight;
    if (pheight > biggest) { biggest = pheight };
    $(this).css("height",biggest);
}) 
```

这不起作用:)任何人都知道我如何将每个 div.cell 更改为其 p 的累积高度（加上缓冲区）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T02:35:44.517

我不确定你到底想要什么。但是你可以试试这段代码：

```
var pheight = 0;
var divheight = 0;
var biggest = 0;
$(window).resize(function () {
    $("div.cell").each(function () {
        //divheight=$(this).height();
        pheight = 0;
        $(this).find("p,img").each(function () {
            pheight += $(this).height();
        });
        biggest = pheight;
        //if (pheight > biggest) { biggest = pheight };
        $(this).css("height", biggest);
    });
}); 
```

这是jsfiddle。[http://jsfiddle.net/agAm8/](http://jsfiddle.net/agAm8/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T02:22:10.937

试试这个：

```
$(window).resize(function(){
    //your script here
}); 
```

它会将你的函数绑定到窗口调整大小事件，但我认为你的函数不能正常工作，它只会增加高度，而不会降低它。ps：对不起，我不能发表评论。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T02:47:08.747

根据您的要求，也许这会有所帮助：

```
var pheight = 0;
var divheight = 0;
var biggest = 0;
$("div.cell").each(function () {
    divheight = $(this).height();
    pheight = 0;
    $(this).children("p").each(function () {
        pheight += $(this).height();
    });
    biggest = divheight;
    if (pheight > biggest) {
        biggest = pheight;
    }
    $(this).css("height", biggest);
}); 
```

在这里检查：http: [//jsfiddle.net/RLWqV/](http://jsfiddle.net/RLWqV/)

# .net - 如何在 Azure 表存储中存储任意键值对？

> ID：14595486
> 
> 赞同：6
> 
> 时间：2013-01-30T02:02:32.853
> 
> 标签：.net, azure, azure-table-storage

**背景**

我从客户端接收 CSV 数据文件，其中包含大量我不需要的数据和少量我需要的数据。将来我可能需要访问该数据，虽然我正在归档原始数据文件，但我希望查询更容易一些。我希望有一个解决方案，这并不意味着数据文件保持相同的格式 - 即客户端可以添加/删除列，我不希望我的实现因丢失数据而保释或无法存档其他数据。

当我在 Azure 中构建应用程序时，Azure 表存储对我来说是正确的——我可以读取数据文件，然后将读取的任何键/值对存储到数据存储中。

**结果**

我想知道如何在 Azure 中存储一个`Dictionary<K, V>`或`Hashtable`其他一些键/值对。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-30T02:02:32.853

通过覆盖从 TableEntity 派生的类的 ReadEntity 和 WriteEntity 方法，可以存储其他属性。

这是我天真的实现

```
public class TestEntity : TableEntity {

    public TestEntity(string a, string b) {
        PartitionKey = a;
        RowKey = b;
        DataItems = new Dictionary<string, string>();
    }

    public Dictionary<string, string> DataItems { get; set; }

    public override IDictionary<string, EntityProperty> WriteEntity(OperationContext operationContext) {
        var results = base.WriteEntity(operationContext);
        foreach (var item in DataItems) {
            results.Add("D_" + item.Key, new EntityProperty(item.Value));
        }
        return results;
    }

    public override void ReadEntity(IDictionary<string, EntityProperty> properties, OperationContext operationContext) {
        base.ReadEntity(properties, operationContext);

        DataItems = new Dictionary<string, string>();

        foreach (var item in properties) {
            if (item.Key.StartsWith("D_")) {
                string realKey = item.Key.Substring(2);
                ItemData[realKey] = item.Value.StringValue;
            }
        }
    }
} 
```

我注意到 Azure 表存储总共只能存储 255 个键/值对，或者考虑到 PartitionKey 等后，只能存储 252 个自定义键/值对，因此这也必须在某个地方进行处理。

# tomcat - intellij tomcat 配置端口号

> ID：14595490
> 
> 赞同：2
> 
> 时间：2013-01-30T02:03:07.227
> 
> 标签：tomcat, intellij-idea

当我在 intellij 中配置本地 tomcat 服务器配置时，会显示以下对话框。您配置启动脚本和端口号。如果 tomcat 的 server.xml 指定了端口号，为什么 intellij 需要端口号？我知道 intellij 读取服务器配置，因为它正在获取我的证书文件位置。

![在此处输入图像描述](../Images/c7d5eed843da4777275b5c2c7fdc855b.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T06:57:11.170

eclipse 和 Intellij 之类的应用程序会启动自己的 tomcat 实例。如果您在端口 8080 中运行已安装的 tomcat，您可以告诉这些 ide 在其他端口号中启动另一个 tomcat 实例。希望这可以帮助..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-12-02T05:23:04.820

在 application.properties 文件中，添加 server.port=8085（或您选择的任何自定义端口）。`server.port`属性是预定义的[弹簧属性](https://docs.spring.io/spring-boot/docs/current/reference/html/howto-properties-and-configuration.html)。

# php - 创建动态 where 子句时出错

> ID：14595495
> 
> 赞同：4
> 
> 时间：2013-01-30T02:03:53.870
> 
> 标签：php, mysqli

尝试使用 mysqli 创建动态 where 子句时遇到很多错误：

> 警告：mysqli_stmt::bind_param()：类型定义字符串中的元素数与第 318 行中的绑定变量数不匹配
> 
> 警告：mysqli_stmt::execute(): (HY000/2031): 没有为第 327 行的准备好的语句中的参数提供数据
> 
> 警告：mysqli_stmt::bind_result(): (HY000/2031): No data provided for parameters in Prepared statement in ... on line 330
> 
> 警告：mysqli_stmt::store_result(): (HY000/2014): 命令不同步；您现在无法在 ... 第 331 行运行此命令

我猜想解决这些问题需要进行一些更改，但是如果两个下拉菜单中的一个不相等`All`或两者不相等`All`，则会出现错误。

下面是显示下拉菜单和查询（带有动态 where 子句）的代码，具体取决于所选的 n 个选项：

```
 function ShowAssessment()
{   

$studentactive = 1;

$currentstudentqry = "
SELECT
st.StudentId, st.StudentAlias, st.StudentForename, st.StudentSurname
FROM
Student_Session ss 
INNER JOIN
Student st ON ss.StudentId = st.StudentId
WHERE
(ss.SessionId = ? and st.Active = ?)
ORDER BY st.StudentAlias
";

global $mysqli;
$currentstudentstmt=$mysqli->prepare($currentstudentqry);
// You only need to call bind_param once
$currentstudentstmt->bind_param("ii",$_POST["session"], $studentactive);
// get result and assign variables (prefix with db)
$currentstudentstmt->execute(); 
$currentstudentstmt->bind_result($dbStudentId,$dbStudentAlias,$dbStudentForename,$dbStudentSurname);
$currentstudentstmt->store_result();
$studentnum = $currentstudentstmt->num_rows();       

if($studentnum == 0){ ?>

<div class="red">
There are no Students who have currently taken this Assessment
</div>
<?php } else { 

$questionsqry = "
SELECT
QuestionId, QuestionNo
FROM
Question
WHERE
(SessionId = ?)
ORDER BY QuestionNo
";

global $mysqli;
$questionsstmt=$mysqli->prepare($questionsqry);
// You only need to call bind_param once
$questionsstmt->bind_param("i",$_POST["session"]);
// get result and assign variables (prefix with db)
$questionsstmt->execute(); 
$questionsstmt->bind_result($dbQuestionId,$dbQuestionNo);
$questionsstmt->store_result();
$studentnum = $questionsstmt->num_rows();      

        ?>

<form action="<?php echo htmlentities($_SERVER['PHP_SELF']); ?>" method="post">         
<p>
 <input type="hidden" name="module" value="<?php echo $_POST['module']; ?>">
<input type="hidden" name="session" value="<?php echo $_POST['session']; ?>">
<strong>Student:</strong>
<select name="student" id="studentsDrop">
<option value="All">All</option>
<?php
while ( $currentstudentstmt->fetch() ) {
$stu = $dbStudentId;
if(isset($_POST["student"]) && $stu == $_POST["student"]) 
    echo "<option selected='selected' value='$stu'>" . $dbStudentAlias . " - " . $dbStudentForename . " " . $dbStudentSurname . "</option>" . PHP_EOL;
else
    echo "<option value='$stu'>" . $dbStudentAlias . " - " . $dbStudentForename . " " . $dbStudentSurname . "</option>" . PHP_EOL;
}
?>
</select>
</p>

<p>
<strong>Question:</strong>
<select name="question" id="questionsDrop">
<option value="All">All</option>
<?php
while ( $questionsstmt->fetch() ) {
$ques = $dbQuestionId;
if(isset($_POST["question"]) && $ques == $_POST["question"]) 
    echo "<option selected='selected' value='$ques'>" . $dbQuestionNo . "</option>" . PHP_EOL;
else
    echo "<option value='$ques'>" . $dbQuestionNo . "</option>" . PHP_EOL;
}
?>
</select>
</p>

<input id="answerSubmit" type="submit" value="Get Student's Answers" name="answerSubmit" />
</form>

<?php
}
}

function StudentAnswersIsSubmitted()
{

if(!isset($_POST["answerSubmit"]))
    {
        return false;
    }
    else // All is ok
    {
        return true;
    }
    return false;

}

function StudentAnswers()
{

$selectedstudentanswerqry = "
SELECT
StudentAlias, StudentForename, StudentSurname, q.SessionId, QuestionNo, QuestionContent, o.OptionType, q.NoofAnswers, GROUP_CONCAT( DISTINCT Answer
ORDER BY Answer SEPARATOR ',' ) AS Answer, r.ReplyType, QuestionMarks, 
GROUP_CONCAT(DISTINCT StudentAnswer ORDER BY StudentAnswer SEPARATOR ',') AS StudentAnswer, ResponseTime, MouseClick, StudentMark
FROM Student s
INNER JOIN Student_Answer sa ON (s.StudentId = sa.StudentId)
INNER JOIN Student_Response sr ON (sa.StudentId = sr.StudentId)
INNER JOIN Question q ON (sa.QuestionId = q.QuestionId)
INNER JOIN Answer an ON q.QuestionId = an.QuestionId
LEFT JOIN Reply r ON q.ReplyId = r.ReplyId
LEFT JOIN Option_Table o ON q.OptionId = o.OptionId
";

// Initially empty
$where = array('q.SessionId = ?');
$parameters = array($_POST["session"]);
$parameterTypes = 'i';

// Check whether a specific student was selected
if($_POST["student"] !== 'All') {
    $where[] = 'sa.StudentId = ?';
    $parameters[] = $_POST["student"];
    $parameterTypes .= 'i';
}

// Check whether a specific question was selected
// NB: This is not an else if!
if($_POST["question"] !== 'All') {
    $where[] = 'q.QuestionId = ?';
    $parameters[] = $_POST["question"];
    $parameterTypes .= 'i';
}

// If we added to $where in any of the conditionals, we need a WHERE clause in
// our query
if(!empty($where)) {
    $selectedstudentanswerqry .= ' WHERE ' . implode(' AND ', $where);
    global $mysqli;
    $selectedstudentanswerstmt=$mysqli->prepare($selectedstudentanswerqry);
    // You only need to call bind_param once
    $selectedstudentanswerstmt->bind_param($parameterTypes,implode($parameters));  //LINE 318
}

$selectedstudentanswerqry .= "
  GROUP BY sa.StudentId, q.QuestionId
  ORDER BY StudentAlias, q.SessionId, QuestionNo
";

// get result and assign variables (prefix with db)
$selectedstudentanswerstmt->execute(); //LINE 327
$selectedstudentanswerstmt->bind_result($detailsStudentAlias,$detailsStudentForename,$detailsStudentSurname,$detailsSessionId,$detailsQuestionNo, 
$detailsQuestonContent,$detailsOptionType,$detailsNoofAnswers,$detailsAnswer,$detailsReplyType,$detailsQuestionMarks,$detailsStudentAnswer,$detailsResponseTime,
$detailsMouseClick,$detailsStudentMark); //LINE 330
$selectedstudentanswerstmt->store_result(); //LINE 331
$selectedstudentanswernum = $selectedstudentanswerstmt->num_rows();     

echo "$selectedstudentanswerqry";

}

?> 
```

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-01-30T02:08:55.923

看看[fluentPDO](http://fluentpdo.com/documentation.html#gettingStarted)、 Dibi fluent 或一些类似的查询生成器。它将使您免于许多痛苦，并且他们已经解决了您正在尝试做的事情。

无论如何，而不是：

```
$selectedstudentanswerstmt->bind_param($parameterTypes,implode($parameters)); 
```

利用：

```
call_user_func_array(array($selectedstudentanswerstmt, 'bind_param'),
    array_merge(array($parameterTypes), $parameters)) 
```

# ruby-on-rails - 如何保护 RoR Web 应用程序的生产数据库中的内容

> ID：14595499
> 
> 赞同：0
> 
> 时间：2013-01-30T02:04:23.190
> 
> 标签：ruby-on-rails, database-design, database-security

我已经外包了一个基于 RoR 并托管在 heruko 上的 Web 应用程序的开发。我有这个应用程序的三种类型的用户，开发人员、内容生成者和客户。我希望开发人员能够创建表和/或仅更改数据库架构。我希望内容生成器能够访问数据库的内容（直接访问数据库或通过网站）。

我的问题：如何阻止开发人员在数据库引擎级别访问数据库内容？我可以将开发人员添加为网站的客户，他们可以访问有限的内容，这很好。但是我怎样才能保护我的数据库内容不被别人复制呢？

因为我外包了开发，并且因为我和开发者之间没有合同，所以我想确保我的 IP 受到保护。做这个的最好方式是什么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T02:49:45.260

请尝试将您的问题定位到一个特定的问题。

话虽如此，我的答案是：

**问）**如何阻止开发人员在数据库引擎级别访问数据库内容？
**A)**只是不必让他们访问 heroku 上的生产服务器。这就是铁路和迁移的美妙之处。您不需要访问数据库服务器，您可以通过迁移进行更改，但数据是分开的。

* * *

**问）**我如何保护我的数据库内容不被人复制？
**A）**不要放弃访问权限，备份您的数据库，考虑 heroku 是否是正确的选择。

* * *

**Q)**我想确保我的 IP 受到保护。做这个的最好方式是什么 ？
**A)**拥有非常好的安全政策和实践，例如强密码并经常更改密码，确保所有员工在他们工作的任何时期都签署明确的合同，聘请优秀的律师审查合同。

# java - 如何转义 StringTemplate 模板？

> ID：14595500
> 
> 赞同：4
> 
> 时间：2013-01-30T02:05:03.663
> 
> 标签：java, antlr, stringtemplate-4

我正在尝试处理模板（见下文），并且在 Eclipse 控制台中收到各种消息。

我已经搜索了网络，但无法真正找到我正在寻找的东西。我记得在这里看到过有关此主题的内容，但当时我没有将其添加为书签，并且无法再次找到它！：/

你能帮忙吗？谢谢

附言。我正在尝试使用 StringTemplate 构建电子邮件。并使用 HTML 标签为我们的客户“更容易阅读”。

**用于加载我的模板的 java 代码**

```
STGroup stGroup = new STGroupDir("/resources/emailTemplates", '$', '$');
ST emailBody = stGroup.getInstanceOf("Fab"); 
```

**我的模板**

```
<h3>Thank you for submitting your details.</h3>
Student ID: $studentId$<br />
Family Name: $familyName$<br />
Given Name: $givenName$<br />
Gender: $gender$<br />Course: $course$<br />
<h3>This is the final confirmation for MyApps Arrival Briefing (FAB).</h3>
$first$
</p><p>
$previous$
<p></p>
<p>If you have to cancel a booking please notify us by email: <a href="mailto:issu@">issu@myapps.com</a>. <br>For booking an additional event please revisit the <a href="http://www.myapps.com/international-students/services/">ISSU website</a> and submit another booking. <br>If you have difficulties finding the venues please ask for help at ISSU. <br><br>The ISSU is located in the basement (B 10)</a> of the Union building (building 25 on the <a href="http://www.myapps.com/MyApps/app_templates/behaviours/popup.cfm?file_uuid=90DE8CF7-C571-D75A-CB7A-37DA9D470AB4&amp;method=popup&amp;alt=%27MyApps%20Map%20showing%20ISSU%20location_thumb.png">campus map</a>).</p> 
```

**这是我收到的关于模板的错误消息**

```
Fab.st 1:1: invalid character '<'
Fab.st 1:3: invalid character '>'
Fab.st 1:1: no viable alternative at input 'h3'
Fab.st 1:43: invalid character '<'
Fab.st 1:44: invalid character '/'
Fab.st 1:46: invalid character '>'
Fab.st 2:12: invalid character '$'
Fab.st 2:22: invalid character '$'
Fab.st 2:24: invalid character '<'
Fab.st 2:28: invalid character '/'
Fab.st 2:28: invalid character '>'
Fab.st 3:13: invalid character '$'
Fab.st 3:24: invalid character '$'
Fab.st 3:26: invalid character '<'
Fab.st 3:30: invalid character '/'
Fab.st 3:30: invalid character '>'
Fab.st 4:12: invalid character '$'
Fab.st 4:22: invalid character '$'
Fab.st 4:24: invalid character '<'
Fab.st 4:28: invalid character '/'
Fab.st 4:28: invalid character '>'
Fab.st 5:8: invalid character '$'
Fab.st 5:15: invalid character '$'
Fab.st 5:17: invalid character '<'
Fab.st 5:21: invalid character '/'
Fab.st 5:21: invalid character '>'
Fab.st 5:30: invalid character '$'
Fab.st 5:37: invalid character '$'
Fab.st 5:39: invalid character '<'
Fab.st 5:43: invalid character '/'
Fab.st 5:43: invalid character '>'
Fab.st 6:1: invalid character '<'
Fab.st 6:3: invalid character '>'
Fab.st 6:72: invalid character '<'
Fab.st 6:73: invalid character '/'
Fab.st 6:75: invalid character '>'
Fab.st 7:0: invalid character '$'
Fab.st 7:6: invalid character '$'
Fab.st 8:1: invalid character '<'
Fab.st 8:2: invalid character '/'
Fab.st 8:3: invalid character '>'
Fab.st 8:5: invalid character '<'
Fab.st 8:6: invalid character '>'
Fab.st 9:0: invalid character '$'
Fab.st 9:9: invalid character '$'
Fab.st 10:1: invalid character '<'
Fab.st 10:2: invalid character '>'
Fab.st 10:4: invalid character '<'
Fab.st 10:5: invalid character '/'
Fab.st 10:6: invalid character '>'
Fab.st 11:1: invalid character '<'
Fab.st 11:2: invalid character '>'
Fab.st 11:63: invalid character '<'
Fab.st 11:99: invalid character '>'
Fab.st 11:121: invalid character '<'
Fab.st 11:122: invalid character '/'
Fab.st 11:123: invalid character '>'
Fab.st 11:127: invalid character '<'
Fab.st 11:129: invalid character '>'
Fab.st 11:182: invalid character '<'
Fab.st 11:250: invalid character '>'
Fab.st 11:264: invalid character '<'
Fab.st 11:265: invalid character '/'
Fab.st 11:266: invalid character '>'
Fab.st 11:297: invalid character '<'
Fab.st 11:299: invalid character '>'
Fab.st 11:374: invalid character '<'
Fab.st 11:376: invalid character '>'
Fab.st 11:378: invalid character '<'
Fab.st 11:380: invalid character '>'
Fab.st 11:420: invalid character '1'
Fab.st 11:421: invalid character '0'
Fab.st 11:424: invalid character '<'
Fab.st 11:425: invalid character '/'
Fab.st 11:426: invalid character '>'
Fab.st 11:460: invalid character '2'
Fab.st 11:461: invalid character '5'
Fab.st 11:471: invalid character '<'
Fab.st 11:678: invalid character '>'
Fab.st 11:690: invalid character '<'
Fab.st 11:691: invalid character '/'
Fab.st 11:692: invalid character '>'
Fab.st 11:696: invalid character '<'
Fab.st 11:697: invalid character '/'
Fab.st 11:698: invalid character '>' 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-30T03:27:59.630

StringTemplate 4 为松散模板（`*.st`文件）使用了一种新格式，因此它们在内部字节码表示中使用的新参数传递方案可以更好地执行。以前看起来像这样的模板文件：

**example.st**（版本 3）

```
Student ID: $studentId$<br />
Family Name: $familyName$<br />
Given Name: $givenName$<br /> 
```

现在看起来像这样：

**example.st**（版本 4）

```
example(studentId, familyName, givenName) ::= <<
Student ID: $studentId$<br />
Family Name: $familyName$<br />
Given Name: $givenName$<br />
>> 
```

如果您不想更改模板以包含原型，您可以使用[在 ST 4.0.5](http://www.antlr.org/wiki/display/ST4/4.0.5+Release+Notes)中添加的[`STRawGroupDir`](http://www.stringtemplate.org/api/org/stringtemplate/v4/STRawGroupDir.html)代替。[`STGroupDir`](http://www.stringtemplate.org/api/org/stringtemplate/v4/STGroupDir.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T02:23:53.930

这是告诉如何确保 html 实体在字符串模板中转义的链接， [什么是确保 HTML 实体在 StringTemplate 中转义的最佳方法](https://stackoverflow.com/questions/14331081/what-is-the-best-way-to-ensure-html-entities-are-escaped-in-stringtemplate)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T02:23:17.577

看到这篇文章，我认为它回答了你的问题：[如何在 Eclipse 中从验证中排除特定文件夹或文件？](https://stackoverflow.com/questions/2272237/how-to-exclude-specific-folders-or-files-from-validation-in-eclipse)

您只需将 *.st 文件排除在验证之外。

# javascript - JavaScript：如何确定变量的范围？

> ID：14595501
> 
> 赞同：1
> 
> 时间：2013-01-30T02:05:10.620
> 
> 标签：javascript, scope, local-variables

如果我做：

```
var i = j = 0; 
```

1.  是`j`局部变量吗？
2.  证明给我看。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T02:11:04.363

提升后，您的代码如下所示：

```
var i;
j = 0;
i = j; 
```

因此`i`是一个局部变量，但`j`不是。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T02:10:03.077

`j`将是一个全局变量，或者被分配给一个 out 范围内的变量：

```
(function() { var i = j = 0;  })()

// i is undefined
// j is 0

var i = 42;
var j = 1;

(function() { var i = j = 0;  })()

// i remains 42
// j is 0 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-30T02:14:51.507

为了好玩，这是另一个“证明”：

```
(function() {"use strict"; var i = j = 0;}());
// throws "ReferenceError: assignment to undeclared variable j" 
```

[*（阅读有关严格模式的更多信息）*](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/Strict_mode)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-30T02:06:56.883

由于 的声明 与`j`不在同一个声明表达式中`i`，因此变量要么在外部范围内创建，要么如果存在，它将覆盖外部范围内的值。

之所以`i`现在是全局的，是因为**变量提升**。你可以这样分解：

1)`var i`

2) `j`，它现在`j`在当前范围内声明，这是包含范围，因为表达式没有绑定到当前上下文，因为它没有使用`var`.

3) `= 0`，现在分配`j`给`0`，随后分配`j`给`i`。

证明？

![在此处输入图像描述](../Images/aadeae9d3fcd15048f9e89597fde8cb3.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-30T02:26:42.140

检查它是否在`window`对象上，如果它警告它的值，那么它是全局的，如果它不是本地的（如果它在使用关键字`alert(window.j)`时不在函数中，那么它是全局的，如果没有，那么它是全局的，无论你定义它。所以 j 和 i 都是全球的）。例子：`var``var`

```
var i = j = 0;

 function x(){
   var r = 100;
    alert(r); 
 }
  alert(window.i); //will alert 0.
  alert(window.j); //will alert 0.
  x(); // will alert 100.
  alert(window.r); //will alert undefined. 
```

或者您可以使用`hasOwnProperty`这样`alert(window.hasOwnProperty("i"))`的方法返回一个布尔值。

顺便说一句，尝试使用 jsfiddle 测试它会`i`返回`undefined`（可能与 jsfiddle 保护它自己的全局命名空间的方式有关）所以你需要一个空白的 html 页面来测试它

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-30T02:12:26.490

```
(function(){
    var i = j = 0;
})();

try{
    alert(i);   
}catch(e){
    alert(e);  
}

alert(j); 
```

[http://jsfiddle.net/kDGM3/1/](http://jsfiddle.net/kDGM3/1/)

不是特别证明......我也不会在正常程序流程中使用异常，除非它确实是一个例外情况。但它确实展示了这种行为。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-30T02:13:06.037

```
function test(a){
    var i=j=0;
    return i;
};
test(100);
alert(j);
alert(i); 
```

# .net - 我如何知道我的项目使用的是哪个版本的 WSE？

> ID：14595503
> 
> 赞同：0
> 
> 时间：2013-01-30T02:05:38.533
> 
> 标签：.net, asmx

我继承了一个 asmx Web 服务。我最熟悉 WCF。我如何知道这个较旧的 Web 服务正在使用哪个 WSE 版本？1.0、2.0 还是 3.0？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T00:08:49.240

它可能根本不使用 WSE（如果幸运的话）。

查看您正在使用的 Microsoft.Web.Services 版本。如果它是 Microsoft.Web.Services2.dll，那么您使用的是 WSE 2.0（甚至比 WSE 3.0 更过时）。

# android - 在 JellyBean 中使用 WebView 和 HTTPClient 进行线程处理

> ID：14595504
> 
> 赞同：1
> 
> 时间：2013-01-30T02:05:43.580
> 
> 标签：android, webview, httpclient

我正在尝试使用 HTTPClient 调用 URL，修改内容，然后使用 webview.loadDataWithBaseURL() 设置数据，但是我遇到了线程问题。

如果我在主 UI 线程上进行 HTTPGet 调用，我会收到一个带有 android.os.NetworkOnMainThreadException 的致命错误。

如果我在新线程中进行调用，并将值设置为该线程中的 webView，我会在日志中收到警告：“必须在 UI 线程上调用所有 WebView 方法。WebView 的未来版本可能不支持使用在其他线程上。”

如果我在一个单独的线程中进行调用并将其设置在一个类变量中并发布到主线程上的 webView，那么 loadDataWithBaseURL() 永远不会得到我在一个单独的线程中调用的数据，因为它似乎在另一个线程完成调用之前发生。

所以问题是：如何在单独的线程中获取内容，并将它们加载到主线程的 webView 中？

```
public class Browser extends Activity {
public final String CLASS_TAG = "ScoutBrowser";
public WebView webView;
final Activity activity = this;
public String webContent;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    this.getWindow().requestFeature(Window.FEATURE_PROGRESS);
    setContentView(R.layout.activity_browser);

    webView = getWebView();

    Log.i(CLASS_TAG, "Loaded App...");
}

private WebView getWebView() {
    WebView view = (WebView) findViewById(R.id.webView);

    view.setWebChromeClient(new WebChromeClient() {

        public void onProgressChanged(WebView view, int progress) {
            activity.setTitle("Loading...");
            activity.setProgress(progress * 100);
            if (progress == 100)
                activity.setTitle(R.string.app_name);
        }
    });

    view.setWebViewClient(new MyViewerClient());
    view.getSettings().setJavaScriptEnabled(true);
    webContent = "<html><body>initialized...</body></html>";
    new Thread(new Runnable() {
           public void run() {
               webContent = callURL();
               WebView view = (WebView) findViewById(R.id.webView);
               view.loadDataWithBaseURL("http://www.somewebsite.com", webContent, "text/html", null, null);

           }
    }).start(); 

    //view.loadDataWithBaseURL("http://www.somewebsite.com", webContent, "text/html", null, null);

    return view;
}

public String callURL(){
    String content = "<html><body>loading...</body></html>";

    //Creates web clientclient
    DefaultHttpClient httpclient = new DefaultHttpClient();

    // Create a local instance of cookie store
    CookieStore cookieStore = new BasicCookieStore();

    // Create local HTTP context
    HttpContext localContext = new BasicHttpContext();
    // Bind custom cookie store to the local context
    localContext.setAttribute(ClientContext.COOKIE_STORE, cookieStore);

    HttpGet httpget = new HttpGet("http://www.somewebsite.com/"); 

    //System.out.println("executing request " + httpget.getURI());
    Log.d(CLASS_TAG,"executing request " + httpget.getURI());

    // Pass local context as a parameter
    try {
        HttpResponse response = httpclient.execute(httpget, localContext);

        int code = response.getStatusLine().getStatusCode();
        String reason = response.getStatusLine().getReasonPhrase();
        HttpEntity entity = response.getEntity();
        if (entity != null) {
            InputStream instream = entity.getContent();

            content = convertInputStream(instream);
            //tv.setText(content);

        }

        Log.d(CLASS_TAG,"Response Code: "+code+" - "+reason);

    } catch (ClientProtocolException e) {
        Log.e(CLASS_TAG,"ProtocolException",e);
    } catch (IOException e) {
        Log.e(CLASS_TAG,"IOException",e);
    }
    Log.d(CLASS_TAG, webContent);
    return content;
}

public String convertInputStream(InputStream is) throws IOException{
        BufferedReader reader = new BufferedReader(new InputStreamReader(is));
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
          sb.append(line);
        }
        is.close();
        return sb.toString();
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T01:01:06.773

从新线程中的 run 方法，使用以下方法之一将其发布回 UI 线程：http: [//developer.android.com/guide/components/processes-and-threads.html](http://developer.android.com/guide/components/processes-and-threads.html)

其他选项是保留一个指向您的线程的变量并在其上调用 join()，或者使用 FutureTask。

# php - 如何在Python中将数组简化为唯一值

> ID：14595508
> 
> 赞同：0
> 
> 时间：2013-01-30T02:06:26.207
> 
> 标签：php, python, arrays, numpy

由于 PHP 中的数组深度问题，从 Python 接收这个数组会被省略号（“...”）截断。我想在返回 php 之前用 Python 处理数组。

澄清：我需要维护内部集合 [135, 121, 81]。这些是 R、G、B 值，我将绑定到多次出现的组集。集合中的值需要保持 [1, 2, 3] 序列，而不是 [1,2,3,4,5,6,7,8]，正如下面一些答案所建议的那样。

**您如何将这个 3D 简化`numpy.ndarray`为一组独特的 RGB 三元组？**

以下是 Python 打印数组的方式：

```
[[[135 121  81]
  [135 121  81]
  [135 121  81]
  ..., 
  [135 121  81]
  [135 121  81]
  [135 121  81]]

 [[135 121  81]
  [135 121  81]
  [135 121  81]
  ..., 
  [135 121  81]
  [135 121  81]
  [135 121  81]]

 [[ 67  68  29]
  [135 121  81]
  [ 67  68  29]
  ..., 
  [135 121  81]
  [135 121  81]
  [135 121  81]]

 ..., 
 [[200 170  19]
  [200 170  19]
  [200 170  19]
  ..., 
  [ 67  68  29]
  [ 67  68  29]
  [ 67  68  29]]

 [[200 170  19]
  [200 170  19]
  [200 170  19]
  ..., 
  [116 146  15]
  [116 146  15]
  [116 146  15]]

 [[200 170  19]
  [200 170  19]
  [200 170  19]
  ..., 
  [116 146  15]
  [116 146  15]
  [116 146  15]]] 
```

这是我尝试过的代码：

```
def uniquify(arr)
    keys = []

    for c in arr:
        if not c in keys:
            keys[c] = 1
        else:
            keys[c] += 1

    return keys

result = uniquify(items) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T02:15:15.063

根据您的“数组”的表示，看起来您正在使用`numpy.ndarray`. `.flat`如果是这种情况，这将成为一个非常简单的问题——您可以通过使用属性转换为一维可迭代简单。为了使其独一无二，您可以使用`set`：

```
set(array.flat) 
```

这会给你一个集合，但你可以很容易地从中得到一个列表：

```
list(set(array.flat)) 
```

以下是它的工作原理：

```
>>> array = np.zeros((10,12,42,53))
>>> list(set(array.flat))
[0.0] 
```

作为旁注，还有`np.unique`它也会为您提供数组的独特元素。

```
>>> array = np.zeros((10,12),dtype=int)
>>> print array
[[0 0 0 0 0 0 0 0 0 0 0 0]
 [0 0 0 0 0 0 0 0 0 0 0 0]
 [0 0 0 0 0 0 0 0 0 0 0 0]
 [0 0 0 0 0 0 0 0 0 0 0 0]
 [0 0 0 0 0 0 0 0 0 0 0 0]
 [0 0 0 0 0 0 0 0 0 0 0 0]
 [0 0 0 0 0 0 0 0 0 0 0 0]
 [0 0 0 0 0 0 0 0 0 0 0 0]
 [0 0 0 0 0 0 0 0 0 0 0 0]
 [0 0 0 0 0 0 0 0 0 0 0 0]]
>>> np.unique(array)
array([0])
>>> array[0,5] = 1
>>> array[4,10] = 42
>>> np.unique(array)
array([ 0,  1, 42]) 
```

* * *

我想我终于弄明白了：

```
from itertools import product

items = set(tuple(a[itr+(slice(None),)]) for itr in product(*[range(x) for x in a.shape[:-1]]))
print items 
```

似乎工作。呸！

这是如何工作的——你想保留为三元组的片段可以通过以下方式访问：

```
array[X,Y,:] 
```

所以，我们只需要遍历 和 的所有`X`组合`Y`。这正是`itertools.product`它的好处。我们可以得到有效的`X`和`Y`任意数量的维度：

```
[range(x) for x in array.shape[:-1]] 
```

所以我们将它传递给产品：

```
indices_generator = product(*[range(x) for x in array.shape[:-1]]) 
```

现在我们有了一些可以生成第一个索引的东西——我们只需要构造一个元组来传递给`__getitem__`那个 numpy 将解释为`(X,Y,:)`——这很容易，我们已经`(X,Y)`从 indices_generator 获取——我们只需要添加一个 emtpy片：

```
all_items = ( array[idx+(slice(None),)] for idx in indices_generator ) 
```

现在我们可以遍历 all_items 以查找具有集合的唯一项：

```
unique_items = set(tuple(item) for item in all_items) 
```

现在把它变成一个列表，或者一个 numpy 数组或者你想要的任何东西，以便将它传递回 PHP。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T02:21:21.597

查看[`itertools`](http://docs.python.org/2/library/itertools.html#recipes)文档中的食谱。有一些功能可以完全满足您的需求`flatten`。`unique_everseen`

因此，您可以复制和粘贴它们。或者你也可以[`pip install more-itertools`](http://pypi.python.org/pypi/more-itertools)只导入它们。`unique_everseen`现在，您可以将 3D 阵列展平为 2D，并使用……使 2D 阵列唯一化。

除了一个问题。二维数组的元素是`list`s，它们不可散列，因此您必须将它们转换为可散列的元素。但这很容易：

```
def uniquify(arr3d):
    return unique_everseen(flatten(arr3d), tuple) 
```

而已。

如果您在粘贴这些函数时查看它们的实现，它们非常简单。这里唯一真正的技巧是使用 a`set`来保存目前看到的值：集合只保存每个唯一元素的一个副本（并且可以非常快速地确定一个元素是否已经在集合中）。

事实上，如果您不需要保留顺序，它甚至更简单：

```
def uniquify(arr3d):
    return set(tuple(x) for x in flatten(arr3d)) 
```

作为测试，我复制了您的字符串并将其转换为实际的 Python 列表显示，然后执行以下操作：

```
inarray = [[[135, 121, 81],
            [135, 121, 81],
            [135, 121, 81],
            [135, 121, 81],
            [135, 121, 81],
            [135, 121, 81]],
           [[135, 121, 81],
            [135, 121, 81],
            [135, 121, 81],
            [135, 121, 81],
            [135, 121, 81],
            [135, 121, 81]],
           [[67, 68, 29],
            [135, 121, 81],
            [67, 68, 29],
            [135, 121, 81],
            [135, 121, 81],
            [135, 121, 81]],
           [[200, 170, 19],
            [200, 170, 19],
            [200, 170, 19],
            [67, 68, 29],
            [67, 68, 29],
            [67, 68, 29]],
           [[200, 170, 19],
            [200, 170, 19],
            [200, 170, 19],
            [116, 146, 15],
            [116, 146, 15],
            [116, 146, 15]],
           [[200, 170, 19],
            [200, 170, 19],
            [200, 170, 19],
            [116, 146, 15],
            [116, 146, 15],
            [116, 146, 15]]]
for val in uniquify(inarray):
    print(val) 
```

输出是：

```
[135, 121, 81]
[67, 68, 29]
[200, 170, 19]
[116, 146, 15] 
```

那是你想要的吗？

如果你想要它作为s 的一个`list`，`list`那就是：

```
array2d = list(uniquify(array3d)) 
```

如果您使用简单的`set`而不是 s `unique_everseen`，这些将是`tuple`s 而不是`list`s，因此如果您需要 a `list`of `list`s：

```
array2d = [list(val) for val in uniquify(array3d)] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T02:10:36.257

`itertools`你的朋友在这里吗：

```
>>> import itertools
>>> array = [1,1,1,2,2,2,3,3,3,4,5,6,6,6]
>>> [x[0] for x in itertools.groupby(array)]
[1, 2, 3, 4, 5, 6] 
```

例如：

```
array = [[[135,121,81],
          [135,121,81],
          [135,121,81],
          [135,121,81],
          [135,121,81],
          [135,121,81]],
         [[135,121,81],
          [135,121,81],
          [135,121,81],
          [135,121,81],
          [135,121,81],
          [135,121,81]],
         [[67,68,29],
          [135,121,81],
          [67,68,29],
          [135,121,81],
          [135,121,81],
          [135,121,81]]]

import itertools

new_array = list()
for inner in array:
    new_inner = [x[0] for x in itertools.groupby(inner)]
    new_array.append(new_inner) 
```

产生：

```
[ [ [135, 121, 81] ], 
  [ [135, 121, 81] ],
  [ [67, 68, 29],
    [135, 121, 81],
    [67, 68, 29],
    [135, 121, 81] ] ] 
```

不是很独特，但您可以排序`inner`以获得唯一的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T02:14:59.297

假设python`list`看起来像`[[[1,2,3], [4,5,6]], [[7,8,9]]]`（即a `list`of `list`s`integers`

```
mylist = [[[1,2,3], [4,5,6]], [[7,8,9]]]
items = set()
for sublist in mylist:
    for subsublist in sublist:
        for item in subsublist:
            items.add(item) 
```

如果您随后特别需要 a `list`，则可以将其转换为：`items = list(items)`

A`set`是类似于 a 的数据类型`list`，但不包含重复项。数据类型的副作用`set`是不保留插入顺序 - 如果这对您很重要，您将需要以下内容：

```
mylist = [[[1,2,3], [4,5,6]], [[7,8,9]]]
items = []
for sublist in mylist:
    for subsublist in sublist:
        for item in subsublist:
            if not item in items:
                items.add(item) 
```

编辑：根据您的编辑，您可能想要这个：

```
mylist = [[[1,2,3], [4,5,6]], [[7,8,9], [1,2,3]]]
items = []
for sublist in mylist:
    for item in sublist:
        if not item in items:
            items.append(item)
# items = [[1, 2, 3], [4, 5, 6], [7, 8, 9]] 
```

# image - 使用 Matlab 进行奇怪/神奇的图像可视化

> ID：14595511
> 
> 赞同：3
> 
> 时间：2013-01-30T02:06:31.893
> 
> 标签：image, matlab, image-processing, png

我有一个双倍的图像，我想用 unsigned int 16 位显示它，所以我这样做：

```
I = im2uint16(I);
figure;imshow(I);title('Image being saved') 
```

这表明了这一点（带有正常的噪音）：

![](../Images/aa5141a6c71ec2965b57e19f98d3878b.png)

现在我想用位深度为 16 位的 .png 来写这个图像。我愿意：

```
imwrite(I,'image.png','BitDepth',16); 
```

现在用 Photoshop CS5 或 Windows Photo Viwer 打开的图像看起来像这样：（噪音神奇地消失了）：

![](../Images/4024a4a1e02ede1ae2aea0bb90e138dc.png)

有人可以解释这种奇怪的行为吗？

## 如何重现此错误

`C:\test\`在我在这里使用的[图像](https://p7o1zg.bay.livefilestore.com/y1pcQVsmssygbS4BLW24_X1E09BKt_Im-2yAxXBqWesC47gpv5bdFZf962T4it1roSaJkz5ChLBS0cxzQe6JfjDNrF7x-Cc12x8/test_matlab.tif?psid=1)中下载：

现在运行这个脚本：

```
I = im2double(imread('C:\test\test_matlab.tif'));

% Add gaussian noise with variance = 0.0012
I = imnoise(I,'gaussian',0,0.0012);
figure,imshow(I);

imwrite(I,'C:\test\withNoise.tif'); 
```

并将matlab中的数字与保存的文件进行比较

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T13:20:49.177

很难说，因为你没有提供足够的数据来重现，但我猜这个问题与显示问题有关：图像比你的物理显示窗口大，因此必须应用一些下采样来显示它。根据重新采样的完成方式，在这种情况下，结果可能会在视觉上非常不同。假设 matlab 对其显示应用最近邻重采样，这可以解释为什么图像看起来很嘈杂；相反，如果另一个图像查看器应用双线性插值或类似的东西，那将相当于一个实际上过滤掉白噪声的局部平均值。

要对此进行测试，请尝试使用小图像进行相同操作。或者尝试缩放明显干净的图像，以实际尺寸查看它（100%：一个图像像素 = 一个显示像素）

*更新*：另见[这里](http://www.mathworks.com/matlabcentral/newsreader/view_thread/323870)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T13:22:57.530

这是我所做的：

```
%# read the image (why is it so big?)
I = im2double(imread('https://p7o1zg.bay.livefilestore.com/y1pcQVsmssygbS4BLW24_X1E09BKt_Im-2yAxXBqWesC47gpv5bdFZf962T4it1roSaJkz5ChLBS0cxzQe6JfjDNrF7x-Cc12x8/test_matlab.tif?psid=1'));

%# add noise
I = imnoise(I,'gaussian',0,0.0012);

%# write tiff
imwrite(I,'withNoise.tif');

%# read the tiff again
I2 = imread('withNoise.tif');

class(I2) %# -- oopsie, it's uint8 now! 

%# convert to uint16 as in original post
I = im2uint16(I);

%# writ again
imwrite(I,'withNoise16.png','bitDepth',16);

%# read it
I2 = imread('withNoise16.png');

%# compare
all(all(I==I2)) %# everything is equal 
```

因此，在写入/读取图像时不会发生任何奇怪的事情（尽管您在位转换中丢失了一些信息 - 您的原始图像只占用了大约三分之一的动态范围，所以如果您拉伸，您将丢失更多信息转换前的对比度）。

但是，图像是 2k×2k。当我只看图像的右上角（500×500 像素）时，它在 Matlab 和其他图形程序中的显示方式相同。因此，我敢打赌，Matlab 与其他程序的不同之处在于重新采样您的图像。正如@leonbloy 建议的那样，Matlab 可能会进行最近邻重采样，而其他程序会进行插值。

# java - iPad 开发是否可以通过 Java 代码与 Spring Framework 进行交互，使用 TomCat 在服务器上托管 Web 服务？如何？

> ID：14595512
> 
> 赞同：0
> 
> 时间：2013-01-30T02:06:39.997
> 
> 标签：java, ipad, spring, tomcat

这是我的情况的背景：

我想创建一个与 oracle SQL 数据库交互的 iPad 应用程序。我的 Flex 应用程序中有现有的 Java 代码，用于处理所有数据库请求，并使用 Spring Framework 进行修改。Flex 应用程序通过 TomCat 作为 Web 服务运行。现在我想把那个 flex 应用程序变成一个移动 iPad 版本。我无法弄清楚使用现有 Java 代码并将其用于 iPad 的最简单方法是什么，因为 iPad 使用 URL 请求而不是直接与 Java 进行交互。

我的问题是，我可以将现有的 Java 代码与 Spring 框架一起使用，以节省编写所有后端处理的时间吗？基本上我想通过从 iPad 发出请求来访问我的 Java 代码中的所有类。这可能吗？我需要 JSON 或 XML 在 iPad 和 Java 代码之间进行交互吗？

概括：

我可以用吗

iPad Objective-C <-----> Java (with spring framework) on TomCat Web Service 来处理oracle SQL 数据处理？如果是这样，我需要如何以及需要哪些技术？我需要 JSON 或 XML 吗？ iPad 和 Java 之间的因素是什么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T02:19:34.527

好的，我正在做以下假设。

1.  您的 flex 应用程序在与 Tomcat 服务器不同的机器上运行
2.  您的 flex 应用程序对 Tomcat 服务器进行 Web 服务调用

因此，flex 应用程序不知道提供 Web 服务的底层技术。它只是看到/消费输出

iPad应用程序没有理由不能做同样的事情。它没有理由不能使用与 Flex 应用程序相同的 Web 服务。它可以使用相同的消息（假设它可以处理 Flex 应用程序当前使用的请求/响应格式）。

如果您想更改客户端之间的请求/响应的结构，您可以根据需要进行更改。但是客户不知道（也不关心）Web 服务是如何实现的。他们只是在请求和消费信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T02:16:27.827

一个好的方法是设计您的应用程序以与返回 JSON 的 RESTful 服务进行通信。完成此操作后，您的 iPad 应用程序甚至不必知道服务器代码是用 Java 编写的。它只是通过 HTTP 进行交互。

这是一个关于设置 tomcat 以托管 RESTful 服务的好教程：[http](http://www.vogella.com/articles/REST/article.html) ://www.vogella.com/articles/REST/article.html - 我已经将它用于我正在开发的应用程序。甚至不需要春天。

您可以使用 XML，但我认为 JSON 更容易。这是一个很好的博客，概述了双方的好坏。[http://digitalbazaar.com/2010/11/22/json-vs-xml/](http://digitalbazaar.com/2010/11/22/json-vs-xml/)

# firebase - 为什么身份验证和登录功能不是 Firebase 中同一类的一部分？

> ID：14595516
> 
> 赞同：1
> 
> 时间：2013-01-30T02:07:15.007
> 
> 标签：firebase

在 Firebase 中，身份验证发生在`new Firebase`引用上。但是登录发生在`new FirebaseAuthClient`参考上。

验证用户：

```
var dataRef = new Firebase('some_firebase_url');
dataRef.auth(auth_token, callback_function); 
```

登录用户：

```
var authClient = new FirebaseAuthClient(dataRef, callback_function);
authClient.login('password', some_email, some_password, function(error, token, user) {...}); 
```

为什么是这样？让所有身份验证/登录/注册功能成为同一类的一部分不是更有意义吗？特别是因为被调用的类`FirebaseAuthClient`（注意中间的*Auth*）甚至实际上没有分配给它的身份验证方法？

这让我有点困惑，我希望一些见解可以帮助我更好地理解。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T03:44:03.347

这是两者之间的区别以及它们存在于不同类中的原因：

*   Firebase.auth() 是必须调用的“低级”API，以便通过 Firebase 服务器对 Firebase 客户端进行身份验证。您为它提供了一个有效的身份验证令牌，该令牌可能来自多种来源（您可能从后端服务器代码生成它，您可能从像 Singly 之类的第 3 方身份验证提供程序获取它）。

*   FirebaseAuthClient 是[Firebase Simple Login](https://www.firebase.com/docs/security/simple-login-overview.html)的 API ，它是一个与 Firebase 捆绑在一起的简单身份验证服务。到目前为止，这是获得基本身份验证工作的最简单方法（使用 Facebook、Twitter、电子邮件/密码等）。它已经过优化，可以与 Firebase 客户端无缝集成，因此它隐藏了获取身份验证令牌和调用 Firebase.auth() 的详细信息。但这就是它在幕后所做的。您可以将其视为 Firebase.auth() 的包装器。

所以如果你使用简单登录，你只需要使用 FirebaseAuthClient 并且可以忽略 Firebase.auth()。但是对于生成自己的令牌的人（例如，他们可以与现有的用户数据库集成），他们将直接处理 Firebase.auth() 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T03:00:00.627

经过进一步阅读和思考，我意识到虽然它仍然在文档中，`dataRef.auth`但不再需要。创建一个`new FirebaseAuthClient`基本上取代了它。

最近改动之前，`new FirebaseAuthClient`没有带回调函数。要进行身份验证，您必须调用`dataRef.auth`.

现在，当您实例化 a 时`new FirebaseAuthClient`，就会尝试进行身份验证。以前可用于`dataRef.auth`回调的信息现在可用于您提供给的新回调`new FirebaseAuthClient`。

然而，它略有不同。`dataRef.auth`版本是这样的：

```
dataRef.auth(authtoken, function(success) { ... }); 
```

`FirebaseAuthClient`版本是这样的：

```
var authClient = new FirebaseAuthClient(dataRef, function(error, user) { ... }); 
```

所以在新的做事方法中，你不只是得到一个`success`布尔值（它被一个对象代替），如果身份验证成功`error`，你也会得到一个对象。`user`

在此更改之前，如果用户已成功通过身份验证并且您想获取他们的信息，则必须将其从 localStorage 或其他内容中提取出来。现在它只是在回调中为您提供，这是一个很好的变化。

此外，`token`过去传递给`authClient.login`函数的参数现在是用户数据的一部分，如`user.firebaseAuthToken`.

与此更新密切相关的是对`authClient.login`工作方式的更改。它不再需要回调，而是触发传递给`new FirebaseAuthClient`.

实际上，该回调似乎是您需要为任何`FirebaseAuthClient`更改身份验证状态的函数设置的唯一回调。登录和注销等特定`FirebaseAuthClient`功能只会更改身份验证状态，并将依赖于原始回调。

此外，您似乎不再需要跟踪用户的 authToken 来对其进行身份验证。过去的情况是`authClient.login`使用参数调用其回调`token`，然后您将存储该令牌并将其用于`dataRef.auth(token, some_callback)`，但这不再是必需的，因为`dataRef.auth`它本身不再是必需的。

所以总而言之，为了回答最初的问题，现在所有的身份验证方法实际上*都是*同一个类的一部分 - FirebaseAuthClient。`dataRef.auth`不再需要，尽管它仍在文档中，这令人困惑。

替换`dataRef.auth`为`new FirebaseAuthClient`，替换`dataRef.auth`为`authClient.logout`and 你应该被设置。

非常感谢 Firebase 工作人员就这些声明的有效性提供任何反馈。

# facebook - 自动将文章发布到 twitter 和 facebook

> ID：14595517
> 
> 赞同：1
> 
> 时间：2013-01-30T02:07:17.570
> 
> 标签：facebook, forms, twitter

我可以创建一个表单，如果我单击提交按钮，表单内容将自动发布到我的 Facebook 和 Twitter 帐户？

# emacs - 如何让 org-mode 在 HTML 导出中使用智能引号？

> ID：14595519
> 
> 赞同：0
> 
> 时间：2013-01-30T02:07:22.477
> 
> 标签：emacs, org-mode, smartypants

让 org-mode 在 HTML 导出中使用智能引号的最佳方法是什么？

有没有办法使用[Smartypants](http://daringfireball.net/projects/smartypants/)？

我将此添加到我的 .emacs 中，但它不起作用。

```
 (setq org-export-html-special-string-regexps
        (cons
         '(" \"\\([^\"]+\\)\"" . " &ldquo;\\1&rdquo;")
         org-export-html-special-string-regexps)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-27T18:17:25.583

将此添加到您的 Emacs 配置文件中：

```
(setq org-export-with-smart-quotes t) 
```

# pdf - 如何使用 Ghostscript 设置 PDF 页面的物理大小？

> ID：14595521
> 
> 赞同：3
> 
> 时间：2013-01-30T02:07:47.860
> 
> 标签：pdf, ghostscript, eps

我想使用 Ghostscript 将一堆 .eps 图像转换为单个 PDF。

但是当我在 PDF 查看器中查看 PDF 文件并将视图设置为 100% 时，文件的物理大小是巨大的！

我想强制 gs 创建字母大小的 PDF，但我尝试的一切都失败了。这是我正在使用的命令：

```
gs -dBATCH -dNOPAUSE -dEPSFitPage -dEPSCrop \
   -q -sDEVICE=pdfwrite -sOutputFile=out.pdf \
    file1.eps file2.eps 
```

我所有的尝试`-sPAPERSIZE=legal`都`-dDEVICEWIDTHPOINTS=w -dDEVICEHEIGHTPOINTS=h`没有效果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T02:20:44.497

`-dEPSFitPage`并且`-dEPSCrop`是互斥的。尝试摆脱`-dEPSCrop`并放回`-sPAPERSIZE=legal`。如果这不起作用，可能是因为 .eps 文件覆盖了媒体，因此请尝试添加 .eps 文件`-dFIXEDMEDIA`。

顺便说一句，这个答案来自： [Fit to page size in ghostscript（输入可能损坏）](https://stackoverflow.com/questions/8141412/fit-to-page-size-in-ghostscript-with-a-possibly-corrupt-input)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T02:56:18.887

问题是`-dEPSFitPage`它使页面大小适合 .eps 文件大小......使用`-dPDFFitPage`（并跳过互斥`-dEPSCrop`）解决了我的问题。

```
gs -dBATCH -dNOPAUSE -sPAPERSIZE=letter \
   -dPDFFitPage -q -sDEVICE=pdfwrite \
   -sOutputFile=out.pdf \
    file1.eps file2.eps 
```

# outlook - 如何取消Outlook中的约会？

> ID：14595524
> 
> 赞同：1
> 
> 时间：2013-01-30T02:07:59.027
> 
> 标签：outlook, appointment

我想在通过 Delphi 中的代码（否则为程序代码）删除约会时显示 Outlook 取消表单。我可以删除一个项目，该项目将从 Outlook 中删除该项目（请注意该项目也有收件人）。但我想显示当用户单击约会项目的**取消会议按钮时 Outlook 使用的取消表单。**

这可能吗？

其次，如果这是不可能的，那么当通过代码（即约会。删除）删除约会时，我想向每个收件人发送 Outlook 生成的相同的取消会议电子邮件。目前，当约会被删除时，即使有收件人也不会发送电子邮件。

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T04:38:03.530

将 MeetingStatus 属性设置为 olMeetingCanceled 并调用 Send。然后，您可以删除约会。

# python-3.3 - python 3.3基本错误

> ID：14595526
> 
> 赞同：0
> 
> 时间：2013-01-30T02:08:15.737
> 
> 标签：python-3.3

我安装了 python 3.3。我使用他们在其网站上使用的示例：

```
import urllib.request
response = urllib.request.urlopen('http://python.org/')
html = response.read() 
```

当我运行它时唯一发生的事情就是我得到了这个：

```
======RESTART========= 
```

我知道我是一个菜鸟，但我认为 python 自己网站上的示例应该能够工作。它没有。我做错了什么？最终我想从下面的网站运行这个脚本。但我认为 urllib 不会像在那个网站上那样工作。有人能告诉我代码是否适用于 python3.3 吗？？？ [http://flowingdata.com/2007/07/09/grabbing-weather-underground-data-with-beautifulsoup/](http://flowingdata.com/2007/07/09/grabbing-weather-underground-data-with-beautifulsoup/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T02:35:23.657

我想我知道可能发生了什么。您可能正在使用 IDLE，当它开始新的程序运行时，它会打印

```
======RESTART========= 
```

行告诉你一个新的程序正在开始。这意味着当前定义的所有变量都被重置和/或删除，视情况而定。

由于您的程序没有打印任何输出，因此您什么也看不到。

我建议添加的两行只是为了弄清楚发生了什么而进行的测试，通常不需要它们。[除非窗口本身会自动关闭，否则它不应该关闭。] 但通常，如果您想查看输出，则必须查看`print`您感兴趣的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T02:31:35.457

你的例子对我有用。但是，我建议使用 requests 而不是 urllib2。

为了简化您链接到的示例，它看起来像：

```
from bs4 import BeautifulSoup
import requests

resp = requests.get("http://www.wunderground.com/history/airport/KBUF/2007/12/16/DailyHistory.html")
soup = BeautifulSoup(resp.text) 
```

# jquery - 在悬停时放大图像然后启动 jquery 循环

> ID：14595531
> 
> 赞同：0
> 
> 时间：2013-01-30T02:09:09.667
> 
> 标签：jquery, hover, slideshow, jquery-cycle

我正在使用带有随机播放效果的 jQuery Cycle 插件。我希望能够在悬停时放大图像，**然后**用更大的图像开始幻灯片放映。我尝试了几种不同的 CSS 样式，但还没有运气。看来我可以让它放大，或者我可以让它洗牌，但不能两者兼而有之。

这是我到目前为止所得到的：

[jsFiddle](http://jsfiddle.net/bMQfR/6/)

```
<script type="text/javascript">
$(document).ready(function(){ 
    $('#s6').cycle({
        fx: 'shuffle',
        shuffle: {
            top:  -50,
            left:  145
        },
        easing: 'easeOutBack',
        delay: -1000,
        speed: 700,
        timeout: 3000,
    }).cycle("pause").hover(function() {
        $(this).cycle('resume');
    },function(){
        $(this).cycle('pause');
    });
});
</script>
<div id="s6">
    <img border="0" src="http://s3.amazonaws.com/dfc_attachments/images/3216165 /pool_house_fireplace_web.JPG" alt="Poolhouse Fireplace" width="150" height="100"/> 
    <img border="0" src="http://s3.amazonaws.com/dfc_attachments/images/3216093/pool_house_kitchen_web.JPG" alt="Poolhouse Kitchen" width="150" height="100"/> 
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T03:05:35.993

你可以尝试这样的事情：

```
$('#s6').one('mousenter', function() {
    $(this).animate({ width: xxxx, height: yyy }, function() { 
        /* resize complete, call cycle*/

        $(this).cycle({
            fx: 'shuffle',
            shuffle: {
                top: -50,
                left: 145
            },
            easing: 'easeOutBack',
            delay: -1000,
            speed: 700,
            timeout: 3000,
        }).hover(function() {
            $(this).cycle('resume');
        }, function() {
            $(this).cycle('pause');
        });
    });
}); 
```

`one()`方法只会触发一次

API 参考[http://api.jquery.com/one/](http://api.jquery.com/one/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T05:04:30.707

我使用了一个容器 div 并将其设置为在悬停时放大，并将幻灯片设置为仅在悬停时播放。

[**工作示例**](http://jsfiddle.net/cTFmp/5/)

CSS

```
.ImageContainer:hover{
       transition:all .3s;
       transform:scale(2);
  } 
```

JS

```
$(document).ready(function () {
    $('#s6').cycle({
        fx: 'shuffle',
        shuffle: {
            top: -50,
            left: 395
        },
        easing: 'easeOutBack',
        delay: -1000,
        speed: 700,
        timeout: 1000,
        next: '#forward',
        prev: '#rewind',
        pause: 0
    }).cycle('pause').hover(function () {
        $(this).cycle('resume');
    }, function () {
        $(this).cycle('pause');
    });
}); 
```

# php - 使用codeigniter分页计算每页显示的项目范围

> ID：14595532
> 
> 赞同：1
> 
> 时间：2013-01-30T02:09:10.293
> 
> 标签：php, codeigniter, pagination

我正在建立一个网站，上面有很多分页页面，上面有成百上千的项目。我想显示当前页面上显示的项目范围，如下所示：

| 115-130 出 300 |

我已经尝试过了，但它不能正常工作

```
echo "Showing ".( $page == 1 ? 1 : ($page -1) * $config["per_page"] +1 )." to ".($page *  $config["per_page"])." item of ".$config["total_rows"]; 
```

我控制器中的当前代码是：

```
class Home extends CI_Controller {

function __construct()
{
    parent::__construct();
    $this->load->library("pagination");
}

public function index()
{
    $this->load->model('status_model');//load the status model

    //pagination config
    $config = array();
    $config["base_url"] = site_url() . "/home/index";
    $config["total_rows"] = $this->status_model->count_active_entries();//Get the total number of rows
    $config["per_page"] = 1;
    $config["uri_segment"] = 3;
    $config["anchor_class"] = 'class="normal" ';
    $config['full_tag_open'] = '<ul>';
    $config['full_tag_close'] = '</ul>';
    $config['first_tag_open'] = '<li>';
    $config['first_tag_close'] = '</li>';
    $config['next_link'] = 'Next';
    $config['next_tag_open'] = '<li>';
    $config['next_tag_close'] = '</li>';
    $config['last_tag_open'] = '<li>';
    $config['last_tag_close'] = '</li>';
    $config['prev_link'] = 'Prev';
    $config['prev_tag_open'] = '<li>';
    $config['prev_tag_close'] = '</li>';
    $config['cur_tag_open'] = '<li class="num_active">';
    $config['cur_tag_close'] = '</li>';
    $config['num_tag_open'] = '<li>';
    $config['num_tag_close'] = '</li>';

    $this->pagination->initialize($config);

    $page = ($this->uri->segment(3)) ? $this->uri->segment(3) : 0;

    $statuses = $this->status_model->get_entries($config["per_page"], $page); //call the method to get all the active statuses

    if($statuses !== false) { 

        $content_data['results'] = $statuses;
    }
    else { // If no results are returned display the following error message

        $content_data['error'] = 'Error no status updates are being returned from the database. Please contact an administrator.';
    }

    echo "Showing ".( $page == 1 ? 1 : ($page -1) * $config["per_page"] +1 )." to ".($page * $config["per_page"])." item of ".$config["total_rows"];

    $content_data["links"] = $this->pagination->create_links();
    $data['title'] = ' Status';                           //Browser page title
    $data['page_title'] = 'The Latest Status Updates';//The page H1 tag
    $data['content'] = $this->load->view('results', $content_data, TRUE);//the page content

    $this->load->view('home', $data);                  

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-24T05:21:27.173

首先在删除以下行后尝试

```
echo "Showing ".( $page == 1 ? 1 : ($page -1) * $config["per_page"] +1 )." to ".($page * $config["per_page"])." item of ".$config["total_rows"]; 
```

并检查您的页面。如果您的页面没有错误地呈现并且分页工作正常，那么您应该通过计算获取的行数来计算范围并将计算的范围传递给查看。

```
 $count = count($statuses);
 $r_from = $page <= 1 ? 1 : ($page -1) * $config["per_page"]+1; //RANGE STARTS FROM 
 $r_to   = $r_from + $count - 1;    //RANGE ENDS TO
 $content_data["range"] = $count? "Showing ".$r_from." to ".$r_to." item of ".$config["total_rows"]:''; 
```

在您打印 $content_data["links"]; 时在您的视图上打印它 可能是这样的

```
echo $range; 
```

完整的控制器代码-

```
class Home extends CI_Controller {

function __construct()
{
    parent::__construct();
    $this->load->library("pagination");
}

public function index()
{
    $this->load->model('status_model');//load the status model

    //pagination config
    $config = array();
    $config["base_url"] = site_url() . "/home/index";
    $config["total_rows"] = $this->status_model->count_active_entries();//Get the total number of rows
    $config["per_page"] = 1;
    $config["uri_segment"] = 3;
    $config["anchor_class"] = 'class="normal" ';
    $config['full_tag_open'] = '<ul>';
    $config['full_tag_close'] = '</ul>';
    $config['first_tag_open'] = '<li>';
    $config['first_tag_close'] = '</li>';
    $config['next_link'] = 'Next';
    $config['next_tag_open'] = '<li>';
    $config['next_tag_close'] = '</li>';
    $config['last_tag_open'] = '<li>';
    $config['last_tag_close'] = '</li>';
    $config['prev_link'] = 'Prev';
    $config['prev_tag_open'] = '<li>';
    $config['prev_tag_close'] = '</li>';
    $config['cur_tag_open'] = '<li class="num_active">';
    $config['cur_tag_close'] = '</li>';
    $config['num_tag_open'] = '<li>';
    $config['num_tag_close'] = '</li>';

    $this->pagination->initialize($config);

    $page = ($this->uri->segment(3)) ? $this->uri->segment(3) : 0;

    $statuses = $this->status_model->get_entries($config["per_page"], $page); //call the method to get all the active statuses
    $count = '';
    if($statuses !== false) { 

        $content_data['results'] = $statuses;
        $count = count($statuses);
        $r_from = $page <= 1 ? 1 : ($page -1) * $config["per_page"]+1;
        $r_to   = $r_from + $count - 1;
        // YOU CAN DO IT WITHOUT COUNT. FOR THAT YOU NEED TO CALCULATE $r_to 
        // $r_to = $page * $config["per_page"];
        // AND NEED TO CHECK THIS WITH Total record
        // $r_to = $r_to>$config["total_rows"] ? $config["total_rows"]:$r_to;
    }
    else { // If no results are returned display the following error message

        $content_data['error'] = 'Error no status updates are being returned from the database. Please contact an administrator.';
    }

    $content_data["range"] = $count? "Showing ".$r_from." to ".$r_to." item of ".$config["total_rows"]:'';

    $content_data["links"] = $this->pagination->create_links();
    $data['title'] = ' Status';                           //Browser page title
    $data['page_title'] = 'The Latest Status Updates';//The page H1 tag
    $data['content'] = $this->load->view('results', $content_data, TRUE);//the page content

    $this->load->view('home', $data);                  

} 
```

# android - 关于android中ImageView Matix的问题

> ID：14595533
> 
> 赞同：0
> 
> 时间：2013-01-30T02:09:18.953
> 
> 标签：android, imageview

我有一个关于 ImageView 转换矩阵的问题，当我尝试获取 ImageMatrix 的缩放比例时，我得到结果包含`0`或`negative number`，为什么？

```
float[] values = new float[9];
mImageView.getImageMatrix().getValues(values);
float scaleX = values[Matrix.MSCALE_X];
float scaleY = values[Matrix.MSCALE_Y]; 
```

如果我以其他方式设置图像，我会得到正确的 ImageView 结果，但是**如果图像直接来自相机，并且图像没有旋转**，当设置 imageView 然后使用 Matix 旋转恢复它时，缩放比例结果将有 0 和负数，

每次我得到 Matrix 我使用：

```
Matrix matrix = new Matrix(mPhotoView.getImageMatrix()) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T01:57:32.270

我使用它有问题，它不应该这样使用`Matrix.MSCALE_X`，，，并且有不同的用途。现在我用另一种方式解决了它。`Matrix.MSCALE_Y``Matrix.MSKEW_X``Matrix.MSKEW_Y`

# php - Virtuemart 2 - 我如何将商品添加到购物车会话中？

> ID：14595536
> 
> 赞同：1
> 
> 时间：2013-01-30T02:09:50.183
> 
> 标签：php, function, joomla, virtuemart, cart

我要尝试的示例代码，使用产品 ID 自动添加到购物车。我知道我也需要数量，但我不知道确切的代码。使用此代码它不起作用。

```
$array = unserialize($_SESSION['__vm']['vmcart']);   //read the cart session
$products = $array->products;                        //list the products 

if (array_key_exists('53', $products)) {             //if productID 53 then
  $cart = VirtueMartCart::getCart();
  $quantityPost= 1;                                  //set quantity on 1
  $virtuemart_product_id = 1;                        //set product id on 1
  $cart->add(array(1));                              //add into cart product with id 1
  //$tmpProduct = $this->getProduct((int) $virtuemart_product_id,$quantityPost); //?
  echo "Article added!"; }                           //echo Message
else { 
  echo "Nothing added!"; }                           //echo Message 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T05:59:36.533

将项目添加到购物车的确切方法就像遵循它的 ajax 调用函数。

```
var data = "quantity[]="+qty+"&virtuemart_product_id[]="+pid
    //data      =   encodeURIComponent(data);
    jQuery.ajax({               

                    type: "GET",
                                    dataType: 'json',
                    url: "index.php?option=com_virtuemart&nosef=1&view=cart&task=addJS",
                    data: data,
                    success: function(data) {
                        alert(data);
                    }
         }); 
```

如果您想从 php 部分执行此操作，请转到购物车控制器文件并检查函数 addJS，然后将相应的参数传递给该函数。

希望这可以帮助你..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-25T13:09:10.057

请使用 VirtueMart API 正确处理购物车。[http://forum.virtuemart.net/index.php?topic=125870.msg431290#msg431290](http://forum.virtuemart.net/index.php?topic=125870.msg431290#msg431290)

简而言之，VirtueMart 默认使用通过 jQuery.getJSON 完成的调用，它是 Ajax 函数的简写。因此，以上所有这些都是不必要的。毫无疑问，它也是不安全的。您应该使用 VM API 来检索和存储购物车对象。

# excel - Excel字符串到时间格式

> ID：14595537
> 
> 赞同：8
> 
> 时间：2013-01-30T02:09:50.757
> 
> 标签：excel, time

在 Excel 中，我将使用什么函数将单元格 A1 中的字符串“2012-12-19 12:08 PM PST”转换为显示为“13:08”的时间格式（不使用 VBA）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T02:46:05.963

没有一个 Excel 函数可以满足您的需求，因为您的时间字符串是日期和时间的组合。正如 ASmith 所建议的，可以组合函数以获得所需的结果。

以下公式计算一个时间值，然后您可以使用“13:30”格式将其格式化为时间。

```
=TIMEVALUE(MID(A1,SEARCH(" ",A1)+1,SEARCH("M",A1)-SEARCH(" ",A1))) 
```

公式的 MID(...) 部分通过“AM”或“PM”中的“M”提取时间，该时间由输入字符串中第一个空格后面的字符组成。TIMEVALUE 函数返回提取的时间字符串的 Excel 值，然后可以对其进行格式化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T14:29:55.913

假设您最后总是有 PST 或其他 3 个字母的时区，那么您可以通过简单地删除最后 4 个字符来获取时间和日期，即

`=LEFT(A1,LEN(A1)-4)+0`

如果你想要单独的时间或日期，你可以分别使用 MOD 和 INT ，即时间

`=MOD(LEFT(A1,LEN(A1)-4),1)`

和日期

`=INT(LEFT(A1,LEN(A1)-4))`

在所有情况下，将结果单元格格式化为适当的时间/日期

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-02T21:52:01.550

您可以使用时间`TIME`，然后选择您的时间格式。

```
TIME(HOUR(A1), MINUTE(A1), SECOND(A1)) 
```

# javascript - 使用 html2canvas 将 div 捕获到图像中

> ID：14595541
> 
> 赞同：41
> 
> 时间：2013-01-30T02:10:31.860
> 
> 标签：javascript, html, html2canvas

我正在尝试使用将 div 捕获到图像中`html2canvas`

我在这里读过一些类似的问题

[如何使用 html2canvas 上传屏幕截图？](https://stackoverflow.com/q/9250505/926460)

[使用 html2canvas 创建网页截图（无法正确初始化）](https://stackoverflow.com/q/10457608/926460)

* * *

我试过代码

```
canvasRecord = $('#div').html2canvas(); 
dataURL = canvasRecord.toDataURL("image/png"); 
```

并且`canvasRecord`将在被调用`undefined`后`.html2canvas()`

* * *

还有这个

```
$('#div').html2canvas({
      onrendered: function (canvas) {
           var img = canvas.toDataURL()
           window.open(img);
      } 
}); 
```

浏览器给出了一些（确切地说是 48 个）类似的错误，例如：

```
GET http://html2canvas.appspot.com/?url=https%3A%2F%2Fmts1.googleapis.com%2Fvt%…%26z%3D12%26s%3DGalileo%26style%3Dapi%257Csmartmaps&callback=html2canvas_1 404 (Not Found) 
```

* * *

顺便说一句，我使用的是 v0.34 并且我已经添加了参考文件`html2canvas.min.js`和`jquery.plugin.html2canvas.js`

如何将其`div`转换`canvas`为以捕获图像。

**2013 年 3 月 26 日编辑**

我发现[Joel 的例子很](https://stackoverflow.com/a/14763225/926460)有效。

但不幸的是，当我的应用程序中嵌入谷歌地图时，会出现错误。

```
<html>
<head>
<style type="text/css">
div#testdiv
{
    height:200px;
    width:200px;
    background:#222;
}
div#map_canvas
{
    height: 500px;
    width: 800px;
    position: absolute !important;
    left: 500px;
    top: 0;
}
</style>
 <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?v=3&sensor=false"></script>
<script type="text/javascript" src="html2canvas.min.js"></script>
<script type="text/javascript" src="jquery-1.7.2.min.js"></script>
<script language="javascript">
$(window).load(function(){
     var mapOptions = {
        backgroundColor: '#fff',
        center: new google.maps.LatLng(1.355, 103.815),
        overviewMapControl: true,
        overviewMapControlOptions: { opened: false },
        mapTypeControl: true,
        mapTypeControlOptions: { position: google.maps.ControlPosition.TOP_LEFT, style: google.maps.MapTypeControlStyle.DROPDOWN_MENU },
        panControlOptions: { position: google.maps.ControlPosition.RIGHT_CENTER },
        zoomControlOptions: { position: google.maps.ControlPosition.RIGHT_CENTER },
        streetViewControlOptions: { position: google.maps.ControlPosition.RIGHT_CENTER },
        disableDoubleClickZoom: true,
        mapTypeId: google.maps.MapTypeId.ROADMAP,
        minZoom: 1,
        zoom: 12
    };
    map = new google.maps.Map(document.getElementById('map_canvas'), mapOptions);

    $('#load').click(function(){

            html2canvas($('#testdiv'), {
                onrendered: function (canvas) {
                    var img = canvas.toDataURL("image/png")
                    window.open(img);
                }
            });

    });
});
</script>
</head>
<body>
<div id="testdiv">
</div>
<div id="map_canvas"></div>
<input type="button" value="Save" id="load"/>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-07T23:39:10.803

I ran into the same type of error you described, but mine was due to the dom not being completely ready to go. I tested with both jQuery pulling the div and also getElementById just to make sure there wasn't something strange with the jQuery selector. Below is an example that works in Chrome:

```
<html>
<head>
<style type="text/css">
div {
    height: 50px;
    width: 50px;
    background-color: #2C7CC3;
}
</style>
<script type="text/javascript" src="html2canvas.js"></script>
<script type="text/javascript" src="jquery-1.9.1.js"></script>
<script language="javascript">
$(document).ready(function() {
//var testdiv = document.getElementById("testdiv");
    html2canvas($("#testdiv"), {
        onrendered: function(canvas) {
            // canvas is the final rendered <canvas> element
            var myImage = canvas.toDataURL("image/png");
            window.open(myImage);
        }
    });
});
</script>
</head>
<body>
<div id="testdiv">
</div>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-02-06T07:40:32.170

如果您只想获得 div 的屏幕截图，您可以这样做

```
html2canvas($('#div'), {
  onrendered: function(canvas) {
    var img = canvas.toDataURL()
    window.open(img);
  }
}); 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2017-05-15T08:32:14.263

您可以尝试使用此代码捕获 div 当 div 非常宽或相对于屏幕偏移时

```
var div = $("#div")[0];
var rect = div.getBoundingClientRect();

var canvas = document.createElement("canvas");
canvas.width = rect.width;
canvas.height = rect.height;

var ctx = canvas.getContext("2d");
ctx.translate(-rect.left,-rect.top);

html2canvas(div, {
    canvas:canvas,
    height:rect.height,
    width:rect.width,
    onrendered: function(canvas) {
        var image = canvas.toDataURL("image/png");
        var pHtml = "<img src="+image+" />";
        $("#parent").append(pHtml);
    }
}); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-11-03T09:11:29.240

我不知道答案会不会迟到，但我用过这个表格。

JS：

```
function getPDF()  {
       html2canvas(document.getElementById("toPDF"),{
        onrendered:function(canvas){

        var img=canvas.toDataURL("image/png");
        var doc = new jsPDF('l', 'cm'); 
        doc.addImage(img,'PNG',2,2); 
        doc.save('reporte.pdf'); 
       }
    }); 
} 
```

HTML：

```
<div id="toPDF"> 
    #your content...
</div>

<button  id="getPDF" type="button" class="btn btn-info" onclick="getPDF()">
    Download PDF
</button> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-05-22T17:47:25.683

**window.open**对我不起作用......只是呈现了一个空白页面......但我能够通过替换作为目标创建的预先存在的**img**元素的**src属性来使 png 出现在页面上。**

 **```
$("#btn_screenshot").click(function(){
     element_to_png("container", "testhtmltocanvasimg");
});

function element_to_png(srcElementID, targetIMGid){
    console.log("element_to_png called for element id " + srcElementID);
    html2canvas($("#"+srcElementID)[0]).then( function (canvas) {
        var myImage = canvas.toDataURL("image/png");
        $("#"+targetIMGid).attr("src", myImage);
		console.log("html2canvas completed.  png rendered to " + targetIMGid);
    });
}
```

```
<div id="testhtmltocanvasdiv" class="mt-3">
   <img src="" id="testhtmltocanvasimg">
</div>
```

然后我可以右键单击渲染的 png 并“另存为”。使用“截图工具”来捕获元素可能同样容易，但 html2canvas 无疑是一段有趣的代码！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-04-04T06:45:50.263

使用 html2canvas 可以轻松完成，尝试以下，

尝试在 html 模式中添加 div 并使用 jquery 函数调用模型 ID。在该函数中，您可以指定要显示的图像的大小（高度、宽度）。使用 modal 是一种在单击按钮时将 html div 捕获到图像中的简单方法。

例如看一下代码示例，

`

```
 <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">

            <div class="modal-body">
                <p>Some text in the modal.</p> 
```

`

将要显示的 div 粘贴到模型中。希望它会有所帮助。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-11-09T07:50:10.700

您可以使用以下代码段获取部门的**屏幕截图**并**轻松保存。**这里我使用了整个 body，你可以通过输入 id/class 名称来选择特定的 image/div 元素。

```
 html2canvas(document.getElementsByClassName("image-div")[0], {
  useCORS: true,
}).then(function (canvas) {
  var imageURL = canvas.toDataURL("image/png");
  let a = document.createElement("a");
  a.href = imageURL;
  a.download = imageURL;
  a.click();
}); 
```

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2013-02-07T22:22:19.490

你应该试试这个（测试，至少在 Firefox 中有效）：

```
html2canvas(document.body,{
   onrendered:function(canvas){
      document.body.appendChild(canvas);
   }
}); 
```

我运行这些代码行以获得完整的浏览器屏幕（只有可见屏幕，而不是漏洞站点）：

```
var w=window, d=document, e=d.documentElement, g=d.getElementsByTagName('body')[0];
var y=w.innerHeight||e.clientHeight||g.clientHeight;

html2canvas(document.body,{
   height:y,
   onrendered:function(canvas){
      var img = canvas.toDataURL();
   }
}); 
```

更多解释和选项在这里：[http ://html2canvas.hertzen.com/#/documentation.html](http://html2canvas.hertzen.com/#/documentation.html)**

# xcode - libPd XCode 声音问题

> ID：14595543
> 
> 赞同：0
> 
> 时间：2013-01-30T02:10:39.693
> 
> 标签：xcode, audio, puredata

大家好，我用纯数据制作了一个补丁来加载和播放样本，然后使用 libpd 将这些样本加载到 xcode 中。这一切都很好，但是当我运行 xcode 项目时，我只能从耳机的右声道获得声音。

我会附上一张图片来展示我的补丁，你可以看到 dac 在每个入口都有一根电缆，这就是为什么我不明白它为什么不能在两个通道中播放声音。

请注意，出于测试目的，我仅将其附加到左上角的示例中。

提前致谢！

[http://i46.tinypic.com/3531gmb.png](http://i46.tinypic.com/3531gmb.png)

@andyvn22：这就是你所追求的吗？抱歉，我是 XCode 的新手，所以我不太确定！

```
-(void)viewDidLoad {
[super viewDidLoad];
dispatcher = [[PdDispatcher alloc] init];
[PdBase setDelegate:dispatcher];
patch = [PdBase openFile:@"Patch.pd"
                    path:[[NSBundle mainBundle] resourcePath]];
if (!patch) {
    NSLog(@"Failed to open patch!");
}
}

-(void)viewDidUnload {
    [super viewDidUnload];
    [PdBase closeFile:patch];
    [PdBase setDelegate:nil];
}
// Omitting the remaining view controller methods...

#pragma mark - button callbacks

-(IBAction)playc1:(id)sender {
    [PdBase sendBangToReceiver: @"c1"]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T02:30:04.263

尝试使用`PdAudioController`'s`-configurePlaybackWithSampleRate:numberChannels:inputEnabled:`方法将通道设置为 2。

# c# - EntityFramework with WCF - 如何返回 EF 实体

> ID：14595544
> 
> 赞同：1
> 
> 时间：2013-01-30T02:10:47.363
> 
> 标签：c#, .net, wcf, entity-framework, entity-framework-5

我有一个可以工作的 WCF 服务，但它使用标准 ADO.net 来调用一些存储过程。

维护起来有点混乱和烦人，因为我调用的任何存储过程，我必须映射到我必须手动创建的 DataContracts，然后以 JSON 形式返回。

我想将 WCF 服务转换为返回 EntityFramework 实体（因此我不必手动保持映射和创建数据合同）。

我的方法中有这样的东西，例如：

```
public List<GetStuff_Result> GetStuff(string param1)
{
            ...

            StuffEntities ctx = new DataContracts.StuffEntities();

            List<GetStuff_Result> list = ctx.GetStuff(5463, "test").ToList();

            return list;
} 
```

我已经在 edmx 模型中设置了存储过程以返回 GetStuff_Result（我导入了存储过程并使用了“创建复杂函数”）

我已经对此进行了调试，并且在列表中得到了 2 个结果，但是当通过浏览器调用我的 WCF 方法时，我在浏览器（chrome）上收到一条消息：

```
No data received
Unable to load the web page because the server sent no data.
Here are some suggestions:
Reload this web page later.
Error 324 (net::ERR_EMPTY_RESPONSE): The server closed the connection without sending any data. 
```

谁能告诉我如何解决这个问题，或者至少为什么会这样？

注意（1）：我还右键单击了 edmx 文件并禁用了延迟加载。

注意（2）：我已经设置了一个 DbContext 生成器

注意（3）：我使用 WebMessageFormat.Json 的响应格式

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T16:56:11.120

这个问题实际上非常适合 WCF 数据服务（与 WCF SOAP 无关）。

[http://msdn.microsoft.com/en-us/library/dd744841.aspx](http://msdn.microsoft.com/en-us/library/dd744841.aspx)

默认情况下，WCF 数据服务将返回 XML 格式的数据，但是有一个请求参数告诉它返回 JSON

[http://blogs.msdn.com/b/writingdata_services/archive/2011/02/25/getting-json-out-of-wcf-data-services.aspx](http://blogs.msdn.com/b/writingdata_services/archive/2011/02/25/getting-json-out-of-wcf-data-services.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T02:42:58.257

1) 在部署之前在 WCF 测试客户端中测试您的应用程序总是一个好主意，这样您就可以查看服务调用是否有效

2) 发生这种情况的原因是，如果您运行直接存储过程或使用 EF GetStuff_Result 执行它并不重要，您仍然必须分配 `[DataMember]`给 GetStuff_Result 类中的每个变量，因此它将被序列化 EF 存储过程确实不会自动为您序列化结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-05T00:22:11.233

实际上我找到了更好的方法

我可以设置 edmx 代码生成器来使用这个：http: [//visualstudiogallery.msdn.microsoft.com/32c4660d-7e66-4c3a-b516-584f4f72b838](http://visualstudiogallery.msdn.microsoft.com/32c4660d-7e66-4c3a-b516-584f4f72b838)

它的 DbContext 具有 WCF 支持（因此它生成的对象已经具有 DataMember 和 DataContract 属性）

这允许在服务中返回对象，而无需像 COLD TOLD 所建议的那样将 EF 对象映射到 WCF 对象。

# javascript - Javascript表单计算多行和按比例

> ID：14595552
> 
> 赞同：-1
> 
> 时间：2013-01-30T02:11:35.483
> 
> 标签：javascript, forms

提前致谢：我的会员表格需要加上几行费用：所以启动费+管理费+（1周的费用+购买周剩余的费用天数）取决于会员类型被选中。我想在不同的行中显示字段中的金额以供用户查看。

启动费和管理费已知分别为 99 美元和 49 美元。1 周费用 = 10.99 美元。所以括号中的数学公式将是（如果在周六购买）$10.99+(10.99*6)/7 任何帮助将不胜感激 - 我正在学习 javascript - 但我只是不能解决这种类型的复杂计算。- 为了获得今天的日期，我认为我需要一个 onload 获取日期，所以我已经这样做了，但我真的只需要在代码中将它作为一个整数用于按比例计算。到目前为止，这里是 html 文件的链接：http: [//dl.dropbox.com/u/10839148/Weds.html](http://dl.dropbox.com/u/10839148/Weds.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T02:20:57.727

星期从星期日开始，所以使用数组重新定义您的值

```
function myDateFunction()
{
  var date = new Date();
  var today = date.getDay();
  var daily = 10.99/7;
  var days = [1, 7, 6, 5, 4, 3, 2];

  // select the tag with the the id Amount
  var x = document.getElementById('Amount');

  // insert the value into the input
  x.value = parseFloat(99 + 49 + (daily * days[today])+10.99).toFixed(2)

} 
```

[演示](http://jsbin.com/ezuqos/1/edit)

# wget - 带有用户名和密码的 HTTPS 的正确 wget 命令语法是什么？

> ID：14595554
> 
> 赞同：47
> 
> 时间：2013-01-30T02:12:05.190
> 
> 标签：wget

我想使用 wget 通过此 URL 远程下载文件：

```
https://test.mydomain.com/files/myfile.zip 
```

站点 test.mydomain.com 需要登录。我想使用此命令在我的另一台服务器上下载该文件，但它不起作用（不完全下载文件）：

```
wget --user=myusername --password=mypassword https://test.mydomain.com/files/myfile.zip 
```

如果我的用户名是 myusername，密码是 mypassword，那么正确的 wget 语法是什么？

以下是我输入上述命令后的返回信息：

```
Resolving test.mydomain.com (test.mydomain.com)... 123.456.789
Connecting to test.mydomain.com (test.mydomain.com)|123.456.789|:443... connected.
HTTP request sent, awaiting response... 302 Found
Location: https://test.mydomain.com/login/unauthorized [following]
--2013-01-30 02:01:32--  https://test.mydomain.com/login/unauthorized
Reusing existing connection to test.mydomain.com:443.
HTTP request sent, awaiting response... 302 Found
Location: https://test.mydomain.com/login [following]
--2013-01-30 02:01:32--  https://test.mydomain.com/login
Reusing existing connection to test.mydomain.com:443.
HTTP request sent, awaiting response... 200 OK
Length: unspecified [text/html]
Saving to: `myfile.zip' 
```

我错过了什么吗？请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2013-01-30T02:19:46.703

通过指定选项 --user 和 --ask-password wget 将要求提供凭据。下面是一个例子。根据您的需要更改用户名和下载链接。

```
wget --user=username --ask-password https://xyz.com/changelog-6.40.txt 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-06-11T18:26:32.507

我发现 wget 不能正确地通过某些服务器进行身份验证，可能是因为它仅符合 HTTP 1.0。在这种情况下，curl（符合 HTTP 1.1）通常可以解决问题：

`curl -o <filename-to-save-as> -u <username>:<password> <url>`

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2016-01-18T13:30:02.810

并不是您的文件已部分下载。它无法通过身份验证，因此会下载例如“index.html”，但它会将其命名为 myfile.zip（因为这是您要下载的内容）。

我按照@thomasbabuj 建议的链接，最终弄明白了。

您应该尝试添加`--auth-no-challenge`并按照@thomasbabuj 的建议替换您的密码输入

IE

```
wget --auth-no-challenge --user=myusername --ask-password https://test.mydomain.com/files/myfile.zip 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-03-31T05:34:28.920

您可以使用 HTTP 而不是 HTTPS 尝试相同的地址。请注意，这确实使用 HTTP 而不是 HTTPS，并且只有某些站点可能支持此方法。

示例地址：[https ://cdimage.debian.org/debian-cd/current/amd64/iso-cd/debian-10.3.0-amd64-netinst.iso](https://cdimage.debian.org/debian-cd/current/amd64/iso-cd/debian-10.3.0-amd64-netinst.iso)

`wget http://cdimage.debian.org/debian-cd/current/amd64/iso-cd/debian-10.3.0-amd64-netinst.iso`

*注意`http://`代替`https://`.

虽然这可能不推荐:)

如果可以，请尝试使用 curl。

* * *

编辑：

仅供参考，带有用户名（并提示输入密码）的示例是：

`curl --user $USERNAME -O http://cdimage.debian.org/debian-cd/current/amd64/iso-cd/debian-10.3.0-amd64-netinst.iso`

`-O`在哪里

```
 -O, --remote-name
              Write output to a local file named like the remote file we get. (Only the file part of the remote file is used, the path is cut off.) 
```

# c++ - 为什么这些基于范围的 for 循环不能正常工作？

> ID：14595558
> 
> 赞同：1
> 
> 时间：2013-01-30T02:12:32.583
> 
> 标签：c++, for-loop, c++11

输出为 2 3 4 5 2293456 6 10 1355995651 12980632 0

看来我没有正确增加

```
#include <iostream>
#include <vector>
using namespace std;
int main()
{
    int x[5] = {1,2,3,4,5};

    vector<int> vec = {2, 4, 6, 8, 10};

    for(int i : x) {
        cout<<x[i]<<endl;
    }

    cout<<endl;

    for(int i : vec) {
        cout<<vec[i]<<endl;
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T02:14:07.473

当您使用基于范围的 for 循环时，您将获取容器中的*值*，而不是容器中的索引。`i`数组/向量内部的值也是如此，而不是索引。

请记住：基于范围的 for 循环适用于没有索引的容器，例如`std::list`,`std::map`等等。它们适用于任意迭代器的值范围。

# ios - 容器视图控制器中 childViewController 的大小和位置

> ID：14595559
> 
> 赞同：0
> 
> 时间：2013-01-30T02:12:35.340
> 
> 标签：ios, uiviewcontroller

第一次使用容器视图控制器。我想创建以下内容：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    FirstViewController *vc=[[FirstViewController alloc] init];
    self.fVC=vc;

    CGRect myFrame=CGRectMake(10.0f, 10.0f, 50.0f, 100.0f);  // <- how do I assign this frame to either my View Controller or the space to which that view will be assigned? 
    self.fVC.view.backgroundColor=[UIColor orangeColor];
    [self addChildViewController:self.fVC];

    [self.view addSubview:self.fVC.view];
    [self.fVC didMoveToParentViewController:self];
    // Do any additional setup after loading the view, typically from a nib.
} 
```

目前，这使得子视图占据了整个屏幕。我想将 fVC 分配给 myFrame。我该怎么做？

****更新#1**

将 childVC 设置为类似于上面的内容：

```
self.fVC.view.frame=myFrame; 
```

将其设置为空格，但它并不真正尊重文本的结尾等...？我该如何处理？

提前谢谢

**更新2**

对不起，大图，只是为了展示正在发生的一切。我认为这可能与评论中提到的剪辑视图有关。

与 CGRect myFrame=CGRectMake(10.0f, 10.0f, 250.0f, 300.0f);

![在此处输入图像描述](../Images/756cd62311ecaeda4b4263107e9748f6.png)

并带有： CGRect myFrame=CGRectMake(10.0f, 10.0f, 250.0f, 100.0f);

![在此处输入图像描述](../Images/5dd64dc43b60878c35b03adffefbdd5e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T02:58:55.993

我不确定你是否还有问题。为了解决标签不在视图中的问题，最好在您的 xib 中使用自由格式控制器，并将其调整为您在将其添加到其他控制器的视图时要使用的大小。通过这种方式，您可以直观地布置事物。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T06:54:01.450

基本上，我需要设置我的布局值：

```
self.fVC.view.autoresizingMask = UIViewAutoresizingFlexibleLeftMargin | UIViewAutoresizingFlexibleRightMargin | UIViewAutoresizingFlexibleTopMargin | UIViewAutoresizingFlexibleBottomMargin; 
```

活到老，学到老

# c - 每当我使用互斥锁同时运行该程序时，结果都会有所不同

> ID：14595563
> 
> 赞同：0
> 
> 时间：2013-01-30T02:13:13.893
> 
> 标签：c, mutex

我正在编写一个程序，它使用 bailey-borwein-plouffe 公式计算 pi 的值。我的问题是，每当我使用互斥锁运行此代码时，我都会得到不同的结果。我不确定互斥锁是否锁定在 pie 函数定义中应该只用于一个资源 pi 。

```
enter code here
#include <stdio.h>
#include <stdlib.h>
#include <pthread.h>
#include <time.h>
#define NUM_THREADS     1000

void *pie_function(void * p);//returns the value of pie
pthread_mutex_t mutex1 = PTHREAD_MUTEX_INITIALIZER; //creates a mutex variable
double pi=0,p16=1;
 main()
{
pthread_t threads[NUM_THREADS];  //creates the number of threads using NUM_THREADS
int iret1;   //used to ensure that threads are created properly
         //pthread_create(thread,attr,start_routine,arg)

int i;
   pthread_mutex_init(&mutex1, NULL);

for(i=0;i<NUM_THREADS;i++){
      iret1= pthread_create(&threads[i],NULL,pie_function,(void *) i);
   if(iret1){
        printf("ERROR; return code from pthread_create() is %d\n", iret1);
        exit(-1);
   }

}

for(i=0;i<NUM_THREADS;i++){
  iret1=pthread_join(threads[i],NULL);

 if(iret1){
        printf("ERROR; return code from pthread_create() is %d\n", iret1);
        exit(-1);
   } 
```

}

```
pthread_mutex_destroy(&mutex1);
  printf("Main: program completed. Exiting.\n");
  printf("The value of pi is  : %f\n",pi);

  exit(0);

   }

 void *pie_function(void *s){
 int rc;
 int k=(int) s;
  pthread_mutex_lock( &mutex1 ); //locks the share variable pi and p16
   pi += 1.0/p16 * (4.0/(8*k + 1) - 2.0/(8*k + 4) - 1.0/(8*k + 5) - 1.0/(8*k+6));
 p16 *=16;

 rc=pthread_mutex_unlock( &mutex1 );
 if(rc){
    printf("ERROR; return code from pthread_create() is %d\n", rc);
    exit(-1);
  }

  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T02:26:49.117

在这种情况下，你最好完全放弃线程。

当一组线程可以主要在他们自己的小世界中执行而不相互影响（偶尔的资源争用是可以的）时，线程很方便。

但是，由于您的线程的生命周期非常短暂，并且在其整个生命周期中都很好地锁定了互斥锁，因此您无法从线程中获得任何优势。您所做的只是增加额外的开销而几乎没有好处。

通过一系列顺序步骤可以更好地处理此特定任务。

* * *

但是，如果您觉得*必须*执行此操作，则可以通过查看以下公式来解决问题：

```
pi += 1.0/p16 * (4.0/(8*k + 1) - 2.0/(8*k + 4) - 1.0/(8*k + 5) - 1.0/(8*k+6)); 
```

显然，添加的内容`pi`取决于`k`和`p16`。现在你`p16`的控制很好（在互斥锁内），但你`k`不是，因为它是作为参数传入的。

您遇到的问题是，即使您可以在线程`k == 7`之前启动线程`k == 8`，也不能保证前者会首先获得互斥锁。如果后者首先获得互斥锁，则您的`k`and`p16`将没有“兼容”值。这就是线程的变幻莫测。

您可以通过将`k`其置于互斥锁的控制之下来解决此问题。

换句话说，不要将它作为参数传递，而要像使用`p16`. 初始化它们：

```
double pi=0, p16=1;
int k = 0; 
```

然后让你的线程函数包含：

```
// Should actually check all mutex calls.

pthread_mutex_lock (&mutex1);
pi += 1.0/p16 * (4.0/(8*k + 1) - 2.0/(8*k + 4) - 1.0/(8*k + 5) - 1.0/(8*k+6));
p16 *=16;
k++;
pthread_mutex_unlock (&mutex1); 
```

这样，无论线程执行的顺序如何，`k`和的值都会保持同步。`p16`

但是，我仍然认为在这种情况下线程是一个坏主意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T02:20:19.690

您的使用`s`不正确。施加的功率`p16`应该匹配`k`，但您使用的`p16`是随机选择的顺序功率`k`。这是根据我找到[的公式。](http://en.wikipedia.org/wiki/Bailey%E2%80%93Borwein%E2%80%93Plouffe_formula)

之所以`k`随机选择，是因为一旦启动线程，您就无法控制线程的顺序。

所以这一行：

```
int k = (int)s; 
```

设置`k`为传递给线程的值。但是`k`设置哪个值取决于线程执行的顺序。

`s == 0`只有带有 的线程先走，并且带有 的线程`s == n+1`总是在带有 的线程之后，您才会得到正确的答案`s == n`。

*这是我的最后一次编辑：*除了完全放弃线程之外，修复程序的一种方法是将总和分开，以便每个线程计算部分答案，并且通过将每个线程的部分总和相加获得正确答案。例如，您可能有 4 个线程，其中每个线程从 开始`i = { 0, 1, 2, 3 }`，并且每个线程计算从其初始项偏移的每第四项的总和。求和的停止条件是当计算项低于某个阈值时。所以，`pie_function`可以这样实现：

```
const double THRESH = 0.0000001;
int k = (int)s;
double p16 = pow(16, k);
double p16_4 = pow(16, 4);
double subpi = 0;
for (;;) {
    double k8 = 8*k;
    double term = 1/p16 * (4/(k8+1) - 2/(k8+4) - 1/(k8+5) - 1/(k8+6));
    if (term < THRESH) break;
    subpi += term;
    k += 4;
    p16 *= p16_4;
} 
pthread_mutex_lock(&mutex1);
pi += subpi;
pthread_mutex_unlock(&mutex1);
return 0; 
```

# file - 如何将文件合并为一个文件？

> ID：14595564
> 
> 赞同：0
> 
> 时间：2013-01-30T02:13:17.670
> 
> 标签：file, shell

我有 3 个文件。

```
cat file1 
A
B
C

cat file2
2
3
4

cat file3
a
b
c 
```

我需要像这样将它们合并到文件中。

输出：

```
 file1  file2  file3
  A      2      a 
  B      3      b
  C      4      c 
```

我怎么能在shell脚本中做。

问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T02:18:26.587

`paste`是你的朋友

```
{ echo "file1\tfile2\tfile3" 
   paste file1 file2 file3 ; } > newOutFile 
```

`\t`它们是制表符，如果您想要不同的字段分隔符，只需更改它即可。（如果您想要间隔良好的列与文件中最宽值的宽度相同，那么您将需要一个更复杂的解决方案。对于这种情况，请发布一个新问题）。

请注意，这`{ ... }`称为进程组，并且进程组中的最后一个命令必须与结束`}`字符分开，并用`;`.

查看手册页以获取一些选项。

IHTH

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T02:18:23.267

```
paste file1 file2 file3 
```

默认情况下，它们将由制表符分隔；`-d`您可以使用选项更改分隔符。使用重定向保存到另一个文件而不是打印到标准输出。

# windows-phone-7.1 - 绑定键盘输入到按钮单击windows phone

> ID：14595568
> 
> 赞同：1
> 
> 时间：2013-01-30T02:14:01.230
> 
> 标签：windows-phone-7.1

有人可以重定向我或向我展示一个关于如何绑定我的 xaml 按钮单击以在 Windows 手机键盘上输入键的示例吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T12:56:12.917

您不能直接使用绑定来执行此操作。您必须在代码中询问指定的键，然后触发您在单击按钮时触发的相同操作。

XAML：

```
<TextBox KeyUp="CheckForEnterPressed" /> 
```

CS：

```
 private void CheckForEnterPressed(object sender, KeyEventArgs e)
    {
        if (e.Key == Key.Enter)
        {
            // Do something appropriate here
        }
    } 
```

如果您不想在页面中包含此代码，可以将其封装到控件中。

# asp.net - 如何知道我是否需要更多云实例

> ID：14595570
> 
> 赞同：1
> 
> 时间：2013-01-30T02:14:06.037
> 
> 标签：asp.net, asp.net-mvc, amazon-ec2

初学者问题：我正在开发网络应用程序，我将很快向世界发布。现在，我正在使用 AWS 免费套餐来测试我用 Asp.Net Mvc 4 编写的应用程序。

我关注 HN 和 Reddit。我已经看到许多网站在提交内容出现在该网站的首页时崩溃或无响应，并且无法处理用户在网站上倾倒的巨大负载。

现在，如果将我的应用程序的链接提交到这些网站并获得同样巨大的负载，我想为这种情况做好准备。但是这个负载可能会有所不同。所以我想知道我怎么知道什么时候增加/减少实例的数量。Asp.net mvc 是否有任何基准/阈值让我知道我目前可以处理这么多请求，并且您将在接下来的几分钟内需要另一个实例或请求？还是 EC2 会根据负载自动创建新实例而我只需要在某处启用设置？或者有一些第三方工具可以为我做这一切？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T05:01:16.167

您可能想查看[RightScale](http://rightscale.com)提供的一些选项。他们是较大的供应商之一，拥有一套非常强大的功能。

如果您想卷起袖子更多地参与进来，这也不是很难通过 AWS 控制台使用[Auto Scaling 组](http://aws.amazon.com/autoscaling/)直接完成，只是需要更多的前期时间。

还有一个名为[Asgard](https://github.com/Netflix/asgard/wiki/Quick-Start-Guide)的工具，它是 Netflix 的开源工具，您可能会发现它很有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T03:26:08.473

我对 EC2 的扩展也很陌生（大多数经验都是使用专用服务器），这实际上取决于您的应用程序及其构建方式。对于我的一个项目，该应用程序相对简单，我创建了服务器和应用程序的映像，然后根据需要启动新服务器。所有数据都存储在具有复制功能的 rds 中，因此没有数据存储在 Web 服务器上。我使用 ylastic.com，这是管理亚马逊账户的绝佳方式。每月 50 美元，它可以让您根据一天中的时间或 CPU 利用率设置自动缩放非常容易。Amazon 确实提供了一个用于扩展的 GUI，您将需要使用难以理解的命令行工具（至少对我而言）。使用 ylastic，我在 20 分钟内设置了一个自动缩放组，而如果 cpu 利用率达到 40%，则使用纯构建的映像启动一个新的 ec2。然后为 Auto Scaling 组设置最小和最大服务器。当利用率下降时，它会终止 ec2s。因此，它还可以帮助您在需要时拥有计算能力，而无需 24/7 运行服务器。

# ios - Apple 推送通知数据包被忽略

> ID：14595572
> 
> 赞同：0
> 
> 时间：2013-01-30T02:14:12.163
> 
> 标签：ios, apple-push-notifications

我正在向 Apple 发送一个数据包以获得推送通知，但它从未出现在我的设备上，反馈服务也没有报告任何错误。数据包看起来像这样。有人看到这里有什么问题吗？如果我很喜欢这个数据包，我会收到一个错误，所以我知道我正在成功地与沙箱对话。如果我给了一个无效的令牌，它也会告诉我。

```
# php send.php | xxd<br/>
0000000: 0100 0000 0151 09d1 af00 2070 d7d9 0472  .....Q.... p...r
0000010: 443b f4c5 cd59 d581 dc3c 3da9 ee68 413e  D;...Y...<=..hA>
0000020: 8a9f 2566 285e 354e 9b26 ae00 367b 2261  ..%f(^5N.&..6{"a
0000030: 7073 222c 7b22 616c 6572 7422 3a22 5365  ps",{"alert":"Se
0000040: 6e74 2030 363a 3036 3a33 3920 504d 222c  nt 06:06:39 PM",
0000050: 2273 6f75 6e64 223a 2264 6566 6175 6c74  "sound":"default
0000060: 227d 7d                                  "}}<br/> 
```

我正在从 PHP 中创建这样的数据包：

```
pack('CNNnH*', 1, $id++, $expiration, 32, $token) . pack('n', $messageLength) . $message; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T14:08:09.967

通常，如果 Apple 发现错误，它将关闭与您的服务器的套接字连接。如果您使用的是*fwrite*，请确保您已经捕获了 fwrite 失败或 fwrite 的长度小于您的 apns 消息的长度。将数据发送到 Apple 后，您的连接是否失败？如果是，那么有效载荷格式肯定是错误的。

有两种发送推送通知的方式。由于我看到了*$expiration*属性，我假设您使用的是二进制方法，它的有效负载略有不同。确保根据您使用的方法使用正确的有效负载格式。我建议您首先尝试使用非二进制方法（因为它更简单），然后继续使用二进制方法。

# assembly - 在 Mach-O 文件中双重导入相似的函数名

> ID：14595573
> 
> 赞同：0
> 
> 时间：2013-01-30T02:14:14.400
> 
> 标签：assembly, ios6, mach-o

我正在查看 Mach-O 文件的导入部分，并意识到 libSystem.B.dylib 有 2 个不同的退出系统调用（在不同的地址）？我想挂钩被调用的退出方法。虽然我知道反复试验是有效的。我想了解为什么 libSystem 会重新导出 2 个退出调用。有谁知道为什么这个 mach-O 文件使用来自同一个 libSystem 共享库的 2 个不同的 __exit 调用？谢谢。

```
**0003e6dc: __exit (ord#0)**
0003e6f8: _abort (ord#0)
0003e6fc: _access (ord#0)
0003e700: _atexit (ord#0)
.
.
.
.
**0003e760: _exit (ord#0)** 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T02:44:49.647

第一个函数是[`_exit`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/_Exit.html)，第二个函数是[`exit`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/exit.html)。 `_exit`不会调用用`atexit()`、信号处理程序注册的函数或刷新打开的流。如链接中所述，它还具有不同的进程终止后果。

# java - 暂停线程执行，并根据用户输入恢复

> ID：14595583
> 
> 赞同：0
> 
> 时间：2013-01-30T02:15:06.530
> 
> 标签：java, multithreading

我有一个执行 JNativeHook.jar 的线程，它创建了一个全局键盘和鼠标侦听器。根据用户输入，线程可以这样做。

当用户（假设）按下 VK_SPACE 时，我想停止所有线程执行。我想生成另一个也监视键盘的线程，当它再次获得 VK_SPACE 时，它会告诉主线程恢复。

这种操作在 Java 中是否可行，它看起来如何？

这是一些可以使用的代码和[JNativeHook](http://code.google.com/p/jnativehook/downloads/list) .jar

代码：

```
import org.jnativehook.GlobalScreen;
import org.jnativehook.NativeHookException;
import org.jnativehook.keyboard.NativeKeyEvent;
import org.jnativehook.keyboard.NativeKeyListener;

public class GlobalKeyListenerExample implements NativeKeyListener 
{
public void nativeKeyPressed(NativeKeyEvent e) 
{
    System.out.println("Key Pressed: " + NativeKeyEvent.getKeyText(e.getKeyCode()));

    if (e.getKeyCode() == NativeKeyEvent.VK_ESCAPE) 
    {
        GlobalScreen.unregisterNativeHook();
    }
    if (e.getKeyCode() == NativeKeyEvent.VK_SPACE) 
    {
            WatchForMe w = new WatchForMe(this);
            w.start();
            this.wait();
    }
}

public void nativeKeyReleased(NativeKeyEvent e){}
public void nativeKeyTyped(NativeKeyEvent e){}

public static void main(String[] args) 
{
    try 
    {
        GlobalScreen.registerNativeHook();
    }
    catch (NativeHookException ex) 
    {
        System.err.println("There was a problem registering the native hook.");
        System.exit(1);
    }

    //Construct the example object and initialze native hook.
    GlobalScreen.getInstance().addNativeKeyListener(new GlobalKeyListenerExample());
}
}

public class WatchForMe implements NativeKeyListener 
{
boolean alive = true;
Thread me = null;
public WatchForMe(Thread me)
{
    if(me == null) return;
    this.me = me;
    GlobalScreen.getInstance().addNativeKeyListener(this);
}
public void nativeKeyPressed(NativeKeyEvent e) 
{
        System.out.println("Key Pressed: " + NativeKeyEvent.getKeyText(e.getKeyCode()));
        if (e.getKeyCode() == NativeKeyEvent.VK_SPACE) 
        {
                me.notify(); 
                alive = false;
        }
}
 public void run()
 {
     while(alive){}
 }

public void nativeKeyReleased(NativeKeyEvent e){}
public void nativeKeyTyped(NativeKeyEvent e){}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T02:32:08.973

在方法运行中：

```
public void run(){
 while(me!=null) //execute forever
   try{
      Thread.sleep(5);
      if(!alive) continue; //define pause

      ... do somthing   
   catch(Exception e){} 
```

我们需要“线程”一直在检查这个是否“暂停”。

重要的！建议使用`public synchronized void setAlive (boolean value)`避免“线程”冲突的方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T02:25:53.143

与其跑来跑去试图锁定不同的显示器和其他东西，我个人`GlobalKeyListenerExample`会在其中放置一个标志，当检测到某个组合键时，开始忽略任何更多传入的键，直到某个组合键出现。

您目前面临的问题是知道 1-您所在的线程以及它可能具有的“暂停”效果以及 2-知道何时引发“取消暂停”组合......因为您不再收听关键事件（因为您可能无意中停止了本机接口用来引发事件的线程......）

```
public void nativeKeyPressed(NativeKeyEvent e) 
{
    System.out.println("Key Pressed: " + NativeKeyEvent.getKeyText(e.getKeyCode()));

    if (isPaused) {
        if (e.getKeyCode == UNPAUSE_KEY_CODE) { 
            isPaused = false;
        }
    } else {
        if (e.getKeyCode == PAUSE_KEY_CODE) { 
            isPaused = true;
        } else {
            // Handle other key strokes...
        }
    }
} 
```

**更新**

就像一个旁注......这个

```
public void run()
{
    while(alive){}
} 
```

不是个好主意。基本上，它使线程处于“运行”状态，不必要地消耗 CPU 周期。就您而言，我不确定您实际上如何能够纠正它...

# vb.net - 对象内的循环变量（VB.NET）

> ID：14595584
> 
> 赞同：0
> 
> 时间：2013-01-30T02:15:11.937
> 
> 标签：vb.net

我如何在对象内使用变量 for 循环？

例如：

使用 for 启用所有复选框

```
 Private Function AllEnabled(ByVal b As Boolean)
    Dim i As Integer
    For i = 0 To 15
        CheckBox(i).enabled = b
    Next
End Function 
```

对不起，少说话，并在此先感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T02:39:18.377

语法是经典的`CheckBox(i)`VB6。VB6 允许您直接在表单设计器中轻松创建控件数组。VB.NET 不共享相同的功能。您可以在代码中手动创建自己的复选框控件数组，但是在使用设计器时，必须为每个控件分配其自己的唯一名称。如果您按顺序命名它们，例如`CheckBox1`,`CheckBox2`等，那么您可以通过`Form.Controls`集合按名称在循环中访问它们：

```
For i As Integer = 0 to 15
    Dim c As CheckBox = CType(Me.Controls("CheckBox" & i.ToString), CheckBox)
    c.Enabled = b
Next 
```

# iphone - 选择文本时，如何用我自己的视图替换 UIMenuController？

> ID：14595587
> 
> 赞同：22
> 
> 时间：2013-01-30T02:16:02.240
> 
> 标签：iphone, ios, objective-c, ipad, uimenucontroller

选择文本时，默认情况下，uimenucontroller会弹出剪切/复制/粘贴等。

![在此处输入图像描述](../Images/ebbcdeafaed24ce2545f3372465398eb.png)

我想用我自己的自定义视图替换它（外观相似，但高一倍，以便我可以有两行按钮/自定义视图）。我怎样才能做到这一点？

我知道没有简单的方法。我期待如果有一个简单的解决方案，它不会很优雅。该代码也不能使用任何私有 API。

我真的，真的宁愿不必实现我自己的文本视图，重新实现文本选择和输入，并重新实现放大视图，这样我就可以编写自己的 UIMenuController 克隆，如果有任何方法可以避免的话。我可以替换 UIMenuController 对应用程序的界面非常重要，所以如果没有其他答案，那么我可能最终会这样做。如果有人可以为我节省大量时间并提出另一种更简单的方法，我将不胜感激！

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-02-05T16:18:57.633

在开始之前，您必须了解三件重要的事情：

**1）**您必须编写自定义菜单控制器视图，但我猜您有点期待。我只知道自定义菜单控制器的[商业](http://www.cocoanetics.com/parts/dtmenucontroller/)实现，但这应该不会太难。

**2）**`UIResponder`被调用有一个有用的方法`-canPerformAction:withSender:`。[在UIResponder 类参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIResponder_Class/Reference/Reference.html)中阅读更多关于它的信息。您可以使用该方法来确定您的文本视图是否支持特定的标准操作（在[UIResponderStandardEditActions](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIResponderStandardEditActions_Protocol/UIResponderStandardEditActions.html)协议中定义）。
这在决定在自定义菜单控制器中显示哪些项目时很有用。例如，仅当用户的粘贴板包含要粘贴的字符串时，才会显示粘贴菜单项。

**3）**`UIMenuController`您可以通过收听`UIMenuControllerWillShowMenuNotification`通知来检测何时显示。

现在你知道了所有这些，这就是我开始解决这个问题的方法：

**1)**`UIMenuControllerWillShowMenuNotification`当文本视图是第一响应者时监听s

```
- (void)textViewDidBeginEditing:(UITextView *)textView {
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(menuWillBeShown:) name:UIMenuControllerWillShowMenuNotification object:nil];
}

- (void)textViewDidEndEditing:(UITextView *)textView {
    [[NSNotificationCenter defaultCenter] removeObserver:self name:UIMenuControllerWillShowMenuNotification object:nil];
} 
```

**2）**显示您的自定义菜单控制器而不是默认的`UIMenuController`

```
- (void)menuWillBeShown:(NSNotification *)notification {
    CGRect menuFrame = [[UIMenuController sharedMenuController] menuFrame];
    [[UIMenuController sharedMenuController] setMenuVisible:NO animated:NO]; // Don't show the default menu controller

    CustomMenuController *controller = ...;
    controller.menuItems = ...;
    // additional stuff goes here

    [controller setTargetRectWithMenuFrame:menuFrame]; // menuFrame is in screen coordinates, so you might have to convert it to your menu's presenting view/window/whatever

    [controller setMenuVisible:YES animated:YES];
} 
```

**杂项。1）**您可以使用全屏`UIWindow`显示自定义菜单，以便它可以与状态栏重叠。

```
UIWindow *presentingWindow = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
presentingWindow.windowLevel = UIWindowLevelStatusBar + 1;
presentingWindow.backgroundColor = [UIColor clearColor];

[presentingWindow addSubview:controller];
[presentingWindow makeKeyAndVisible]; 
```

**杂项。2）**为了确定要显示的菜单项，您可以使用提到的`-canPerformAction:withSender:`

```
BOOL canPaste = [textView canPerformAction:@selector(paste:) withSender:nil];
BOOL canSelectAll = [textView canPerformAction:@selector(selectAll:) withSender:nil]; 
```

**杂项。3）**您必须通过`UITapGestureRecognizer`在呈现窗口上使用 a 或类似的东西自己处理关闭菜单。

这并不容易，但它是可行的，我希望它对你很有效。祝你好运！

**更新：**
今天 cocoacontrols.com 上弹出了一个新的菜单实现，您可能想查看：[https ://github.com/questbeat/QBPopupMenu](https://github.com/questbeat/QBPopupMenu)

**更新 2：**
如[本答案](https://stackoverflow.com/questions/8683848/how-can-i-get-the-selected-text-frame-from-a-uitextview/8684006#8684006)中所述，您可以使用`-caretRectForPosition:`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T02:46:01.500

我认为这可能会对您有所帮助[https://github.com/cxa/UIMenuItem-CXAImageSupport](https://github.com/cxa/UIMenuItem-CXAImageSupport)

UIMenuItem 使用 UILabel 来显示它的标题，这意味着我们可以调配 -drawTextInRect: 来支持图像。

UIMenuItem+CXAImageSupport 是一个肮脏的黑客，但在大多数情况下应该是安全的。不包含任何私有 API。

为 UIMenuItem 创建一个类别而不是子类化可以获得更大的灵活性。是的，这个类别也可以应用于很棒的 PSMenuItem！

![在此处输入图像描述](../Images/8a7cdf90ee3c68e3fb6535af12aa20f8.png)

# flash - 使用鼠标悬停显示信息使用 flash actionscript 2.0

> ID：14595594
> 
> 赞同：0
> 
> 时间：2013-01-30T02:16:35.420
> 
> 标签：flash

我有一个使用鼠标控制旋转的地球仪。但我想在鼠标悬停期间显示对象信息以单击对象。

下面的代码：鼠标旋转

```
onEnterFrame = function(){

hero._rotation=getmouse(hero);

}

getmouse = function (mc:MovieClip):Number{

dy=_ymouse-mc._y;
dx=_xmouse-mc._x;
rad =Math.atan2(dy, dx);

rotate= rad*180/Math.PI;
return rotate;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T02:55:43.290

只需将您的信息放在图像上 :) 以更具风格。然后你可以像这样设置动作脚本。 `image1_1_mc.onRollOver = function () { image1.alpha = 0; rolloverimage1.alpha = 100;`

有 20 个您希望能够翻转的图像。

```
for (i=1; i<=20; i++) {
 ["image"+i+"_"+i+"_mc"].onRollOver = function () {
 ["image"+i].alpha = 0;
 ["rolloverimage"+i].alpha = 100;
 } 
```

}

# python - 为什么我必须在可调用的金字塔视图中包含返回语句？

> ID：14595595
> 
> 赞同：0
> 
> 时间：2013-01-30T02:16:37.193
> 
> 标签：python, pyramid

我正在尝试为我的金字塔应用程序的主页形成可调用的视图，并在此处阅读有关可调用视图的信息：http: [//docs.pylonsproject.org/projects/pyramid/en/1.0-branch/narr/views.html](http://docs.pylonsproject.org/projects/pyramid/en/1.0-branch/narr/views.html)

但似乎你总是必须在最后有一个退货声明。我不明白这一点。我不希望可调用的视图返回任何内容。如果我要用英文（不是 python 代码）写它，我会写

```
@view_config(route_name='home_page', renderer='templates/edit.pt')
def home_page(request):
    if 'form.submitted' in request.params:
        name= request.params['name']
        body = request.params['body']
        page=Page(name,body)
        DBSession.add(page)
        return HTTPFound(Location=request.route_url('view_page',pagename=name))
    return {the edit.pt template i mentioned in the first line} 
```

但似乎没有任何方法可以做到这一点。我必须返回一个字符串、字典或其他东西。我怎么能告诉python。因此，如果人们提交该表单，则返回该 HTTPFound 语句，但如果他们不只是呈现编辑模板。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T04:40:27.767

首先，使用最新的 Pyramid 文档版本（对于 Pyramid 版本 1.4）[http://docs.pylonsproject.org/projects/pyramid/en/latest/narr/views.html](http://docs.pylonsproject.org/projects/pyramid/en/latest/narr/views.html)（因为我假设您使用的是最新的 Pyramid 版本）。

至于`return`语句，您**通常是`return`一个 dictionary**，即使它是空的，因为您的 Chameleon 模板文件 ( *edit.pt* ) 正在期待它。`@view_config(renderer='templates/edit.pt')`告诉下一行的函数将字典传递给*edit.pt*，因此模板引擎可以替换模板中的变量。

**`HTTPFound()`**，另一方面，**绕过模板**（`renderer`参数 of`@view_config()`被忽略，*即* **没有使用模板**）并执行内部**重定向**到您`__init__.py`将指定的另一条路线。现在，新路由是否在其中使用模板/渲染器`@view_config`与之前跳过渲染器的函数无关。

如果模板中没有要填充的变量，则最后一行的`return`语句应该是。**`return {}`**

如果需要，请告诉我如何让您更清楚地了解这一点。

# jquery - 在jquery中追加数据

> ID：14595599
> 
> 赞同：0
> 
> 时间：2013-01-30T02:17:11.160
> 
> 标签：jquery

```
var data = {
    formData : {
        vendor:    'test',
        extension: 'test2'
    }

} 
```

我正在尝试将序列化数组附加到 fromData。

我将如何去做这件事。

我会推吗？

```
data.formData({ inputs.serializeArray() }); 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T02:21:03.317

[`.serializeArray` *^([docs])*](http://api.jquery.com/serializeArray/)返回形式为 的对象数组`{name: '...', value: '...'}`。

因此，您必须遍历数组并将每个对象添加到您的`formData`对象中：

```
$.each(inputs.serializeArray(), function(i, obj) {
    data.formData[obj.name] = obj.value;
}); 
```

# c++ - OpenCV 无法识别 BeagleBone 中的相机

> ID：14595602
> 
> 赞同：0
> 
> 时间：2013-01-30T02:17:18.293
> 
> 标签：c++, opencv, beagleboard

我编写了以下代码以通过[BeagleBone使用相机](https://en.wikipedia.org/wiki/BeagleBoard#BeagleBone_Black)[PlayStation Eye](http://en.wikipedia.org/wiki/EyeToy)：

```
#include <unistd.h>
#include <stdlib.h>
#include <stdio.h>
#include <string.h>
#include <errno.h>
#include <fcntl.h>
#include <termios.h>
#include <sys/types.h>
#include <sys/stat.h>
#include <netinet/in.h>
#include "opencv/cv.h"
#include "opencv/highgui.h"

using namespace cv;
using namespace std;

void inputSetup(int setup);

int main(int argc, char *argv[])
{
    CvCapture *capture;
    Mat img;

    capture = cvCaptureFromCAM(-1);
    if (capture){
        printf("mmm...\n");
        inputSetup(1);
        img = cvQueryFrame(capture);
    }

    while (1);

    return 0;
}

void inputSetup(int setup)
{
    static struct termios oldt, newt;
    if (setup) {
        tcgetattr(STDIN_FILENO, &oldt);
        newt = oldt;
        newt.c_lflag &= ~(ICANON);
        tcsetattr( STDIN_FILENO, TCSANOW, &newt);
    }
    else {
        tcsetattr( STDIN_FILENO, TCSANOW, &oldt);
    }
} 
```

问题是它无法识别相机，因为代码没有进入第一个“if”（打印“mmm ...”的那个）。我已经尝试过“capture = cvCaptureFromCAM(0);”，但它也不起作用。

我正在使用以下命令编译代码：

```
g++ -Wall -g -o CamaraTest CamaraTest.cpp `pkg-config --cflags --libs opencv` 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T03:13:39.290

使用最新的 OpenCV [Git](http://en.wikipedia.org/wiki/Git_%28software%29)存储库。相机驱动程序存在问题，但其中大部分已经修复。

# gradle - 无法在 gradle 初始化脚本中应用外部插件（包括 github 项目）

> ID：14595606
> 
> 赞同：1
> 
> 时间：2013-01-30T02:17:56.530
> 
> 标签：gradle

首先，我创建了一个项目来说明我遇到的问题：

`GitHub project removed, see edit for effective file contents. If you want the sample project PM me`

尝试使用以下命令运行项目：

```
$./gradlew -I deploy.gradle tasks 
```

我收到这样的错误：

```
Failed to notify action.
> Plugin with id 'artifactory' not found. 
```

但是当我包含其中的内容时`deploy.gradle`，`build.gradle`它就很好了。作为记录，它是`artifactory`插件，它似乎只在 jfrog 存储库中。我确定我一定错过了如何在初始化脚本中指定类路径。

任何帮助表示赞赏。提前致谢！

**编辑**

感谢@erdi的回答，我能够让它工作。下面是这两个文件的有效内容：

*部署.gradle*

```
initscript {
    repositories {
        maven { url 'http://repo.jfrog.org/artifactory/gradle-plugins' }
    }

    dependencies {
        classpath 'org.jfrog.buildinfo:build-info-extractor-gradle:2.0.16'
    }
}

allprojects {
    apply plugin: org.jfrog.gradle.plugin.artifactory.ArtifactoryPlugin
}

// vim:ft=groovy:tw=0 
```

*构建.gradle*

```
println 'Hello, world!'
// wrapper task omitted 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T09:07:48.247

根据[此线程](http://forums.gradle.org/gradle/topics/how_do_i_include_buildscript_block_from_external_gradle_script)，您不能在插件脚本中使用插件 ID。相反，必须使用完全限定的类名。

# php - 用 ? 捕获正则表达式值 文字

> ID：14595613
> 
> 赞同：0
> 
> 时间：2013-01-30T02:18:33.487
> 
> 标签：php, regex, preg-match

所以我有这个正则表达式：

```
$text = '"sadfsafsafsafsaf"';
$text2 = '"sadfsafsafsafsaf';
$matches = array();

preg_match('/"(.+)"?/', $text, $matches); 
```

在这种情况下，我打算只捕获不带引号的sadfsafsafsafsaf，因此在我使用`$text`和`$text2`进入的两种情况下，`preg_match()`我都希望匹配的输出`$matches[1]`只是sadfsafsafsafsaf

但是，当我使用 时`$text`，匹配的值将改为 sadfsafsafsafsaf （即最后会有另一个引号）

有没有办法改变我的正则表达式，以便在这两种情况下都是sadfsafsafsafsaf？

注意：在有人问为什么不直接使用`trim()`... 这是因为我只想去掉第一个外部引号。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T02:20:40.640

`[^"]+`将捕获任意数量的相邻非引号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T02:20:54.693

尝试更改`.+`为`.*`，并将 a 添加`$`到模式的末尾。您遇到的问题是`.+`匹配所有可能的内容，包括尾随引号。随后的子句 ,`"?`将被忽略，因为它是可选的，由于问号。

使用`[^"]+`也可以，因为这意味着“任何不是双引号的非空字符串”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T02:21:35.567

如果要查找文字问号（或任何其他正则表达式引擎特殊的符号），则必须转义该字符：`\?`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T02:24:50.367

使用`OR`：

```
/"(.*)"|(.*)/ 
```

如果未找到 cotes，将在 cotes 内部或外部获取文本。

# c++ - 如何在 boost::uint8_t 中存储零值

> ID：14595614
> 
> 赞同：0
> 
> 时间：2013-01-30T02:18:42.957
> 
> 标签：c++, boost

我有以下程序。奇怪的是，我期望为零，但程序认为它是 48。如果我调试这个程序，我可以看到分配为 48 的值，但是如果我打印“someVar”的值，它会正确显示为 0。但是如果我转换"someVar" 到 uint16_t，然后一切正常。你能解释一下这个问题吗

```
#include "boost/cstdint.hpp"
#include <iostream>
#include "boost/lexical_cast.hpp"

using namespace boost;
int main(int argc, char ** args)
{
  uint8_t someVar = lexical_cast<uint8_t> (args[1]);
  if (someVar > 0)
    cout << "greater than zero" << endl;

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T02:23:46.957

字符零（`'0'`实际上是 48，其中数字零作为整数，显然确实是零）。如果您制作 a `lexical_cast<int>`，它将执行您想要的操作，并将 args[1] 转换为字符串中的整数。由于`uint8_t`是一个字符，我怀疑词法转换会满足您的要求，并为您提供字符串的第一个字符。

# perl - 如何解析没有 id 或 class 信息的 HTML？

> ID：14595616
> 
> 赞同：0
> 
> 时间：2013-01-30T02:19:08.193
> 
> 标签：perl, html-parsing

如果我有表单的 HTML

```
<ol>
    <li>Cheeses
        <ol>
            <li>Red Leicester</li>
            <li>Cheddar</li>
        </ol>
    <li>Wines
        <ol>
            <li>Burgundy</li>
            <li>Beaujolais</li>
        </ol>
</ol> 
```

我想把它解析成一个类似的结构

```
{"Cheeses":["Red Leicester", "Cheddar"], "Wines":["Burgundy", "Beaujolais"]} 
```

有很多关于如何使用 HTML::TreeBuilder 或 Mojo::DOM 等模块来解析 HTML 的“教程”，但它们似乎总是依赖于使用“id=”或“class=”标签。我要解析的 HTML 没有任何 ID 标签或其他属性。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T04:36:05.327

我只有 Mojo::DOM 方面的经验，诚然，您可能会找到一个更好的模块来将您的 XML 转换为数据结构。如果您使用的是 Mojo::DOM，您可能需要查看 Mojo::DOM 对象下的树结构：

```
#!/usr/bin/env perl

use strict;
use warnings;

use Mojo::DOM;
use Data::Dumper;

my $dom = Mojo::DOM->new(<<'END');
<ol>
    <li>Cheeses
        <ol>
            <li>Red Leicester</li>
            <li>Cheddar</li>
        </ol>
    <li>Wines
        <ol>
            <li>Burgundy</li>
            <li>Beaujolais</li>
        </ol>
</ol>
END

print Dumper $dom->tree; 
```

稍微按摩一下，你就可以把它变成你想要的形式。也许有人有一个更直接地从 HTML（可能实际上是 XML）到结构的模块。

# c# - 检查之前，还是管理异常？

> ID：14595617
> 
> 赞同：1
> 
> 时间：2013-01-30T02:19:21.227
> 
> 标签：c#, sql, performance, optimization, database-performance

这是一个直接的需求，但我想知道您在性能和设计方面有什么建议。

当你需要做某事时，什么会更快更好？检查你是否可以，如果你能做到。或者直接试一试，万一失败，你就明白了。

这是我的特殊情况：我有一个将使用 foreach 填充的数据库表。该表有一个不能在表中重复的主键。

所以..

```
foreach(object in Objects)
{
   bool exists = //SQL SELECT to check if exists.
   if (exists == false)
   {
      //SQL INSERT
      return INSERTED
    }
   else 
    {
     return failed
    }
} 
```

或者

```
 foreach(object in Objects)
    {
       try 
          {
          //SQL INSERT
          return INSERTED
           }
       catch
         {
        return FAILED
         }

    } 
```

我想知道这在其他方面的最佳实践，比如在没有覆盖属性的情况下创建文件并管理 execpiton 或在尝试之前检查文件是否存在。

**更新：** 根据答案，我知道我不应该为每个插入进行交易，因为性能。我应该做一个批量插入。在我的代码中，我有这样的东西

```
//SQL Start Transaction
foreach
{
//SQL INSERT
}
//SQL Commit transaction 
```

我的问题是关于事务内部的，如果我应该在插入之前检查还是只是尝试。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T04:43:07.623

异常的构造成本比布尔值高得多。

一些一般准则是仅对实际异常的行为使用异常（您不希望它是正常事件），并避免将异常用于程序控制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T02:30:11.867

通过 C# 进行的大量数据库操作非常低效且耗时。当我处理这个问题时，我通常不是检查，而是将插入构建到一个查询中；例如：

```
"INSERT INTO sitemaps (link, site) 
 (SELECT ('" + NAME2 + "') as link, '" + SITE + "' as site 
   WHERE NOT EXISTS 
 (SELECT link FROM sitemaps 
    WHERE link = '" + NAME2 + "' and site='" + SITE + "')" 
```

这减轻了数据库的负担并减少了编码。

另一种选择，提高插入性能（字面意思是数百倍）的非常好的方法是使用`BULK INSERT`（仅限 MS SQL）到临时数据库表中（一次非常快地处理数千条记录）；然后，在数据库端，使用`MERGE`命令并编写 if-else 场景如何处理更新、插入、删除等。将前后部分移到数据库程序端始终是一个好习惯。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T03:03:10.980

如果您想在 C# 中执行此操作，我建议您制作一个`HashSet`主键，然后在尝试添加它们之前检查对象。

注意：您应该确保不会在每次插入时都向数据库发送查询，因为这将比和之间的任何差异**慢**得多。`try/catch``if`

进行插入的最快方法是将它们批处理到单个数据库调用中。

# perl - Perl 的 IO::File 并使用 open qw(:utf8)

> ID：14595624
> 
> 赞同：1
> 
> 时间：2013-01-30T02:20:15.213
> 
> 标签：perl, unicode, perl-io

IO::File->open() 似乎不尊重在以下程序中使用 open() ，这对我来说很奇怪，并且似乎违反了文档。或者也许我做错了。重写我的代码以不使用 IO::File 应该不难。

我希望输出是

```
$VAR1 = \"Hello \x{213} (r-caret)";

Hello ȓ (r-caret)
Hello ȓ (r-caret)
Hello ȓ (r-caret) 
```

但我收到此错误：“糟糕：./run.pl 第 33 行的打印中格式错误的 UTF-8 字符（字符串的意外结尾）。”

这对我来说似乎根本不对。

```
#!/usr/local/bin/perl

use utf8;
use v5.16;
use strict;
use warnings;
use warnings qw(FATAL utf8);
use diagnostics;
use open qw(:std :utf8);
use charnames qw(:full :short);

use File::Basename;
my $application = basename $0;

use Data::Dumper;
$Data::Dumper::Indent = 1;

use Try::Tiny;

my $str = "Hello &#531; (r-caret)";

say Dumper(\$str);

open(my $fh, '<', \$str);
print while ($_ = $fh->getc());
close($fh);
print "\n";

try {
  use IO::File;
  my $fh = IO::File->new();
  $fh->open(\$str, '<');
  print while ($_ = $fh->getc());
  $fh->close();
  print "\n";
}
catch {
  say "\nOops: $_";
};

try {
  use IO::File;
  my $fh = IO::File->new();
  $fh->open(\$str, '<:encoding(UTF-8)');
  print while ($_ = $fh->getc());
  $fh->close();
  print "\n";
}
catch {
  say "\nOops: $_";
}; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T02:28:08.830

我相信这里发生的`use open`是一个*词法编译指示*，这意味着它只影响`open()`对同一词法范围内的调用。词法范围是当代码在同一个块中时。 `IO::File->open`是一个包装器`open()`，因此`open()`在其词法范围之外调用。

```
{
    use open;

    ...same lexical scope...

    {
        ...inner lexical scope...
        ...inherits from the outer...
    }

    ...still the same lexical scope...
    foo();
}

sub foo {
    ...outside "use open"'s lexical scope...
} 
```

在上面的例子中，即使`foo()`调用 inside`use open`的词法范围，里面的代码在`foo()`外面，因此不受它的影响。

如果 IO::File 继承了 open.pm 会很礼貌。这不是微不足道的，而是可能的。一个类似的问题困扰着[autodie](https://metacpan.org/module/autodie)。 [它已修复](https://rt.cpan.org/Ticket/Display.html?id=54777)，修复可能在 IO::File 中起作用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T02:29:50.647

[这不是一个答案，而是一个不适合评论的错误通知。]

文件只能包含字节。`$str`包含不是字节的值。所以，

```
open(my $fh, '<', \$str) 
```

没有意义。它应该是

```
open(my $fh, '<', \encode_utf8($str)) 
```

* * *

```
use utf8;
use v5.16;
use strict;
use warnings;
use warnings qw(FATAL utf8);
use open qw( :std :utf8 );
use Encode qw( encode_utf8 );
use Data::Dumper qw( Dumper );

sub dump_str {
   local $Data::Dumper::Useqq = 1;
   local $Data::Dumper::Terse = 1;
   local $Data::Dumper::Indent = 0;
   return Dumper($_[0]);
}

for my $encode (0..1) {
   for my $orig ("\x{213}", "\x{C9}", substr("\x{C9}\x{213}", 0, 1)) {
      my $file_ref = $encode ? \encode_utf8($orig) : \$orig;
      my $got = eval { open(my $fh, '<', $file_ref); <$fh> };
      printf("%-10s  %-6s  %-9s => %-10s => %s\n",
         $encode ? "bytes" : "codepoints",
         defined($got) && $orig eq $got ? "ok" : "not ok",
         dump_str($orig),
         dump_str($$file_ref),
         defined($got) ? dump_str($got) : 'DIED',
      );
   }
} 
```

输出：

```
codepoints  ok      "\x{213}" => "\x{213}"  => "\x{213}"
codepoints  not ok  "\311"    => "\311"     => DIED
codepoints  not ok  "\x{c9}"  => "\x{c9}"   => DIED
bytes       ok      "\x{213}" => "\310\223" => "\x{213}"
bytes       ok      "\311"    => "\303\211" => "\x{c9}"
bytes       ok      "\x{c9}"  => "\303\211" => "\x{c9}" 
```

# list - 使用 metaClass 将 product() 方法添加到 Collection

> ID：14595636
> 
> 赞同：1
> 
> 时间：2013-01-30T02:20:55.500
> 
> 标签：list, groovy, product, metaclass

我想`product()`为所有集合添加一个方法并像我可以使用的那样使用它`sum()`。我已经可以通过 go 获得列表的产品`x.inject { a, b -> a * b }`，但我希望能够 go `x.product()`。

到目前为止我已经尝试过

```
Collection.metaClass.product = {-> delegate.inject { a, b -> a * b } }

x = [1,2,3,4]
println(x.product()) 
```

但这导致

```
Caught: groovy.lang.MissingMethodException: No signature of method: java.util.ArrayList.inject() is applicable for argument types: (Util$_run_closure1_closure2) values: [Util$_run_closure1_closure2@161bb7fe]
Possible solutions: inject(java.lang.Object, groovy.lang.Closure), inject(java.lang.Object, groovy.lang.Closure), inspect(), toSet(), collect(), collect()
groovy.lang.MissingMethodException: No signature of method: java.util.ArrayList.inject() is applicable for argument types: (Util$_run_closure1_closure2) values: [Util$_run_closure1_closure2@161bb7fe]
Possible solutions: inject(java.lang.Object, groovy.lang.Closure), inject(java.lang.Object, groovy.lang.Closure), inspect(), toSet(), collect(), collect()
    at Util$_run_closure1.doCall(Util.groovy:1)
    at Util.run(Util.groovy:4) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T23:41:10.397

弄清楚了。

无论出于什么完全奇怪的原因，groovysh 都允许`x.inject { a, b -> a * b }`，但是当我在 groovysh 之外实际编译它时，它就爆炸了。一旦更改为`x.inject(1) { a, b -> a * b }`，一切都按预期工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T09:16:25.850

这是一个可以通过在 Groovy 控制台中运行代码来测试的解决方案

```
// implement method
Collection.metaClass.product = {

  if (!delegate) {
    return null
  }

  delegate.inject {a, b ->  a * b}
}

// test it
assert [1,2,3].product() == 6
assert [].product() == null 
```

稍长但更具可读性（IMO）的解决方案是：

```
Collection.metaClass.product = {

  if (!delegate) {
    return null
  }

  def result = 1

  delegate.each {
    result *= it
  }
  result
} 
```

# perl - 使用两个元素在 perl 中创建哈希

> ID：14595641
> 
> 赞同：0
> 
> 时间：2013-01-30T02:21:08.220
> 
> 标签：perl

您如何在 Perl 中编写以下内容（提供精确的 Perl 语法）： a) 创建包含两个元素的哈希“days_in_month”（哈希变量名称为“days_in_month”）。第一个元素的键为“July”，值为 31，第二个元素的键为“September”，值为 30。通过键“September”获取哈希元素并打印其值（提供精确的 Perl 语法）。你应该得到什么价值？

会是这样吗？

```
 my %days_in_month = (
          'July' => '31',
          'September' => '30',
           );

       my $dayvalue = $days_in_month{September};
       print $dayvalue; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T02:22:24.997

是的，但是您不需要引用密钥，并且您真的不应该引用用作数字的数字。

```
my %days_in_month = (
          July => 31,
          September => 30,
           ); 
```

这[等效](http://www.cs.mcgill.ca/~abatko/computers/programming/perl/howto/hash/#add_several_key_value_pairs_to_a_hash)于以下代码：

```
my %days_in_month = ('July' => 31,'September' => 30); 
```

# javascript - 新对象（）未定义？

> ID：14595651
> 
> 赞同：0
> 
> 时间：2013-01-30T02:22:54.180
> 
> 标签：javascript, html, html5-canvas

在我尝试学习 JavaScript 的过程中，我想出了这个画布绘图的想法。基本上，我将坐标存储在一个数组中，脚本将自动在画布上绘制按钮。每个按钮需要 8 个坐标，`x1`, `y1`, `x2`, `y2`, 等等...（我什至可以让这些按钮在以后用作链接；p）。我遇到的问题是，这根本不运行，chrome 检查器控制台`object is undefined`在这一行显示“”：“ `button = new object();`”

任何帮助表示赞赏。狮子座

```
function loadMenu() {
    //Initialize Canvas
    var canvas = document.getElementById("menu_canvas");
    var context = canvas.getContext("2d");

    //Button Data
    var buttonData = [59, 0, 19, 40, 128, 40, 168, 0];
    //Create Buttons
    var i = 1;
    while (i < buttonData.length) {
        button = new object();
        for (var j = i; j != i + 8; j++) {
            if (j % 2 == 0) {
                button.X[j] = buttonData[j - 1];
            } else {
                button.Y[j] = buttonData[j - 1];
            }
        }
        drawButton(button);
        i = i + 8;
    }
    //Begin drawing buttons
    function drawButton(button) {
        context.beginPath();
        context.moveTo(button.X1, buttonX2);
        for (k = 2; k != 4; k++) {
            context.lineTo(buttonX[k], buttonY[k]);
        }
        context.closePath();
        context.fillStyle = "red";
        context.fill();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T02:24:41.013

您必须将其大写：

```
button = new Object(); 
```

Javascript 区分大小写。

或者，您可以使用对象文字（如 Nile 所述）：

```
button = {}; 
```

# highcharts - 不正确的highcharts导出服务器js脚本错误代码

> ID：14595654
> 
> 赞同：1
> 
> 时间：2013-01-30T02:23:13.923
> 
> 标签：highcharts

当调用[这里](http://www.highcharts.com/component/content/article/2-news/52-serverside-generated-charts)提到的 highcharts-convert.js 时，我注意到即使输入的 json 无效，它也会返回成功代码 0。例如：

```
karl$ phantomjs ./app/javascript/highcharts-convert.js -infile ./spec/fixtures/invalid_input.json -outfile /var/folders/q2/m5hn1wq54zg33s7jv31d1p280000gq/T/hello.82829.54862.png -width 300
SyntaxError: Parse error

ReferenceError: Can't find variable: options

  phantomjs://webpage.evaluate():57
    phantomjs://webpage.evaluate():99
      phantomjs://webpage.evaluate():99
      loading images...
      loading images...
      loading images...
      loading images...
      loading images...
      loading images...
      loading images...
      loading images...
      loading images...
      loading images...
      loading images...
      loading images...
      loading images...
      loading images...
      loading images...
      loading images...
      loading images...
      loading images...
      loading images...
      loading images...
      loading images...
      loading images...
      loading images...
      loading images...
      loading images...
      loading images...
      loading images...
      loading images...
      loading images...
      karl$ echo $?
      0 
```

如果没有正确的错误代码，在我看来，我的工作无法知道命令失败。我错过了什么吗？

谢谢。

-卡尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T09:20:27.490

在方法 page.evaluate() 中，脚本尝试设置选项变量，请参见[highcharts-convert.jsline#166](https://github.com/highslide-software/highcharts.com/blob/master/exporting-server/phantomjs/highcharts-convert.js#L166)。很可能您的 Json 文件没有从文件系统中正确读取。尝试在此处设置 console.log() 语句 [highcharts-convert.jsL#148](https://github.com/highslide-software/highcharts.com/blob/master/exporting-server/phantomjs/highcharts-convert.js#L148)以验证文件已被读取。

你是对的，此时应该提供一条错误消息。

**更新** 似乎在输入文件中有语法错误时引发了错误。这是在 PhantomsJS page.evaluate() 函数期间检测到的。出于安全原因，此执行被沙盒化。

（据我所知）从这个沙箱中获取信息的唯一方法是使用 console.log() 并为 page.onConsoleMessage 设置回调函数。

你可以这样做：

```
HC.optionsParsed = 'Highcharts.options.parsed';

window.optionsParsed = false;

page.onConsoleMessage = function (msg) {
    console.log(msg);
    /*
    * Ugly hacks, but only way to get messages out of the 'page.evaluate()'
    * sandbox. If any, please contribute with improvements on this!
    */
    if (msg === HC.optionsParsed) {
        window.optionsParsed = true;
    }
};

// later on in page evaluate
svg = page.evaluate(function (width, constr, optionsStr, callbackStr, pdfOutput) {
    var imagesLoadedMsg = 'Highcharts.images.loaded', $container, chart,
                nodes, nodeIter, elem, opacity;

    // dynamic script insertion
    function loadScript(varStr, codeStr) {
        var $script = $('<script>').attr('type', 'text/javascript');
        $script.html('var ' + varStr + ' = ' + codeStr);
        document.getElementsByTagName("head")[0].appendChild($script[0]);

        // HERE IT HAPPENS, run console.log with a specific message to set window.Optionsparsed to true
        if (window[varStr] !== undefined) {
            console.log('Highcharts.' + varStr + '.parsed');
        }
 }
// ... SCRIPT CONTINUES ... 
```

当 page.evaluate 方法结束时。我们可以检查 window.optionsParsed 是否设置为 true。如果没有发出警告并退出。

```
if (!window.optionsParsed) {
    console.log('ERROR - the options variable was not available, contains the infile an syntax error? see' + input);
    phantom.exit();
} 
```

我还更新了 Github 上的[highcharts-convert.js](https://github.com/highslide-software/highcharts.com/blob/master/exporting-server/phantomjs/highcharts-convert.js)脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-09T10:57:34.147

我遇到了类似的问题 100% 同样的问题 请检查您的 highstock.js 文件类型如果它是二进制文件请按照以下步骤解决您的问题

curl [http://code.highcharts.com/stock/highstock.js](http://code.highcharts.com/stock/highstock.js) -o exporting-server/phantomjs/highstock.js.gz

gzip -d 导出服务器/phantomjs/highstock.js.gz

# jquery - jquery按键问题

> ID：14595656
> 
> 赞同：0
> 
> 时间：2013-01-30T02:23:28.793
> 
> 标签：jquery, keypress

我有这个代码用于在按下一个键时重定向：

```
$('body').bind('keyup', function(event) {
    if(event.keyCode==66){ window.location = "page.php"; }
    }); 
```

好的，但是，如果用户在页面上有一个焦点输入字段，我怎么能使它不适用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T02:28:47.417

```
$('input').bind('keyup', function(event) {
   if(event.keyCode==66 && !($(event.currentTarget).attr('id') ==='inputElement')){ window.location = "page.php"; }
}); 
```

或者

```
$('input').bind('keyup', function(event) {
   if(event.keyCode==66 && !($(event.currentTarget).is(":focus"))){ window.location = "page.php"; }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T02:36:07.397

您可以使用 jQuery 的[`:focus`](http://api.jquery.com/focus-selector/)选择器。

```
$("input").is(":focus") 
```

这里的一个例子：http: [//jsfiddle.net/n1ck/CegR7/2/](http://jsfiddle.net/n1ck/CegR7/2/)

```
$('body').bind('keyup', function (event) {
    // If 'b' is pressed & no input is focused
    if (event.keyCode == 66 && !$("input").is(":focus")) {
        alert('Redirecting');
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T02:25:57.830

您可以测试`event.target`并查看它是什么类型的元素。如果是`input`, 不做任何事情就返回。具体来说，

```
if (-1 != ['INPUT', 'TEXTAREA'].indexOf(event.target.nodeName)) return; 
```

编辑：嗯，你们确定`event.currentTarget`吗？我看到有几个人提到`currentTarget`而不是`target`，但并不`event.currentTarget`总是是`body`监听器绑定的元素？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T02:27:01.037

试试这个可能。

```
if ( $("*:focus").is("textarea, input") ) return; 
```

# tastypie - 我可以有业务逻辑来检查资源是否已过期并在我返回美味派之前生成新资源吗？

> ID：14595660
> 
> 赞同：0
> 
> 时间：2013-01-30T02:24:12.303
> 
> 标签：tastypie

我的模型上有“创建”时间戳。它们会在一天后过期，应该重新创建。

`GET`当客户端尝试从 TastyPie API 获取资源时，我如何获得代码，我检查资源是否已过期并执行业务逻辑。我知道可以使用 filter 过滤掉过期的资源，但是我可以删除过期的资源并创建新的资源，然后在结果中返回它们吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T12:43:51.287

更好的方法是重写该`get_object_list`方法。这记录在这里：[http ://django-tastypie.readthedocs.org/en/latest/cookbook.html#per-request-alterations-to-the-queryset](http://django-tastypie.readthedocs.org/en/latest/cookbook.html#per-request-alterations-to-the-queryset)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T02:50:07.980

是的你可以。例如，您可以覆盖资源的`obj_get()`方法。

它的源代码在这里：[https](https://github.com/toastdriven/django-tastypie/blob/master/tastypie/resources.py#L1895) ://github.com/toastdriven/django-tastypie/blob/master/tastypie/resources.py#L1895 ，看起来像这样：

```
def obj_get(self, request=None, **kwargs):
    """
    A ORM-specific implementation of ``obj_get``.

    Takes optional ``kwargs``, which are used to narrow the query to find
    the instance.
    """
    try:
        base_object_list = self.get_object_list(request).filter(**kwargs)
        object_list = self.apply_authorization_limits(request, base_object_list)
        stringified_kwargs = ', '.join(
            ["%s=%s" % (k, v) for k, v in kwargs.items()]
        )

        if len(object_list) <= 0:
            raise self._meta.object_class.DoesNotExist(
                "Couldn't find an instance of '%s' which matched '%s'." %
                (self._meta.object_class.__name__, stringified_kwargs)
            )
        elif len(object_list) > 1:
            raise MultipleObjectsReturned(
                "More than '%s' matched '%s'." % (
                    self._meta.object_class.__name__,
                    stringified_kwargs
                )
            )

        return object_list[0]
    except ValueError:
        raise NotFound(
            "Invalid resource lookup data provided (mismatched type)."
        ) 
```

您可以检查`object_list`该代码中获得的内容，然后应用适当的操作。

或者，您可以通过使用on the way覆盖专门处理对单个资源的请求的[`get_detail()`方法。](https://github.com/toastdriven/django-tastypie/blob/master/tastypie/resources.py#L1139)`GET``obj_get()`

# c++ - 错误：“<<”标记之前的预期主表达式

> ID：14595666
> 
> 赞同：3
> 
> 时间：2013-01-30T02:24:51.363
> 
> 标签：c++, file, class, ofstream

好的，所以我正在构建一个 Date 类

```
class Date
{
    private:
    int d;
    int m;
    int y;

 public:
    Date();
    Date(int&, int&, int&);
    Date(const Date&);
    bool isLeap();
    void setDay(int& day)
    {d = day;}
    void setMonth(int& month)
    {m = month;}
    void setYear(int& year)
    {y = year;}
    int getDay() const
    {return d;}
    int getMonth() const
    {return m;}
    int getYear() const
    {return y;}
    void print(ofstream& outfile)
    {
        outfile << "The date in this class is: " <<  << m << "/" << d << "/" << y;
    }

    Date operator= (const Date&);
}; 
```

我在 main 中创建了一个 ofstream 并打开了文件。我也确保通过引用传递它！每次我尝试编译时都会收到错误消息：expected primary-expression before '<<' token message... 这是我的主要功能。让我知道我是否需要其他任何东西。

```
 int main()
{
    int day;
    int month;
    int year;
    Date d1;
    ofstream outfile("Print.txt");
    int maxDays;

    Date d2 = d1;

    cout << "Please enter the 4 digit year: ";
    cin >> year;
    if (year > 0)
    {
        d1.setYear(year);
        cout << "Please enter the 2 digit month: ";
        cin >> month;
        if (month==1||month==3||month==5||month==7||month==8||month==10||month==12)
            maxDays = 31;
        else if (month==4||month==6||month==9||month==11)
            maxDays = 30;
        else if (month==2&&d1.isLeap()==false)
            maxDays = 28;
        else if (month==2&&d1.isLeap()==true)
            maxDays = 29;
        if (month < 12)
        {
            d1.setMonth(month);
            cout << "Please enter the 2 digit day: ";
            cin >> day;
            if (day <= maxDays)
                d1.setDay(day);
            else
            {
                cout << "Invalid input, will set to default." << endl;
                d1 = d2;
            }

        }
        else
        {
            cout << "Invalid input, will set to default." << endl;
            d1 = d2;
        }
    }

    else
    {
        cout << "Invalid input, will set to default." << endl;
        d1 = d2;
    }

    d1.print(outfile);

    if(d1.isLeap()==true)
        cout << "This is a leap year\n";
    if(d1.isLeap()==false)
        cout << "This is not a leap year\n";

    cout << "The date is " << d1.getDay() << "/" << d1.getMonth() << "/" << d1.getYear() << endl;

    outfile.close();

    return 0;
} 
```

任何帮助将不胜感激...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T02:26:07.867

这一行：

```
outfile << "The date in this class is: " <<  << m << "/" << d << "/" << y; 
```

有两个`<<`，他们之间什么都没有。

编辑说明：根据您提到的错误消息，我猜您正在使用 GCC。您可能有兴趣尝试[clang](http://clang.llvm.org)，在这种情况下会产生更好的错误消息：

```
example.cpp:30:54: error: expected expression
    outfile << "The date in this class is: " <<  << m << "/" << d << "/" << y;
                                                     ^
1 error generated. 
```

如果你是一个初学者，它可能会为你节省大量时间，而不是追查可能由轻微语法错误产生的 bizarro GCC 错误消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T02:35:05.827

不是您要求的，但是，如果您将其旋转一点：

```
 if (month==1||month==3||month==5||month==7||month==8||month==10||month==12)
        maxDays = 31;
    else if (month==4||month==6||month==9||month==11)
        maxDays = 30;
    else if (month==2&&d1.isLeap()==false)
        maxDays = 28;
    else if (month==2&&d1.isLeap()==true)
        maxDays = 29; 
```

像这样：

```
 if (month==2)
    {  
       if (d1.isLeap())
         maxDays = 29;
       else
         maxDays = 28; 
    }
    else if (month==4||month==6||month==9||month==11)
        maxDays = 30;
    else
        maxDays = 31; 
```

在我看来，您的代码更容易阅读。

# php - find('count') find('all') 组合

> ID：14595667
> 
> 赞同：0
> 
> 时间：2013-01-30T02:24:59.727
> 
> 标签：php, cakephp

我在下面有一个代码来查找所有学生列表

```
$fub = $this->Customer->find('all', array('conditions' => array('Customer.customers_types' => 'student'))); 
```

我在下面有一个代码来计算尝试测试的学生人数。

```
$totalTests = $this->Customer->Test->find('count', array('conditions' => array('Test.customer_id' => $fub['Customer']['id'])));

$this->set('totalTests', $totalTests); 
```

但是，我有不止一位学生客户。如何使用 $fub 的结果并将其放入 $totalTests 条件以获取尝试测试的学生总数。

调试器::dump($fub);

```
array(
    array(),
    array(),
    array(),
    array(),
    array(),
    array()
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T04:41:36.377

在您的计数查询中，您尝试的条件可能不匹配并返回空数组

```
$fub['Customer']['id'] 
```

是空的。在您的计数查询之前首先调试 $fub 。我遵循的方式是设置

```
$fub['customer']['id'] 
```

变成一个变量，就像这样

```
$f = $fub['customer']['id'] 
```

在您的计数查询之前并将此变量放在您的条件中

```
$totalTests = $this->Customer->Test->find('count', array('conditions' => array('Test.customer_id' => $f))); 
```

试试这个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T03:12:04.427

您可能应该使用 [ [CakePHPs counterCache](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html#belongsto) ]。它会为您跟踪相关项目的数量。

# jquery - 嵌套ul的jQuery选择器

> ID：14595669
> 
> 赞同：0
> 
> 时间：2013-01-30T02:25:16.183
> 
> 标签：jquery, html, nested, html-lists

我在找出嵌套无序列表的特定选择器时遇到问题。

如何选择最终没有包含单词“test1”的孩子的父李。

所以在这个例子中->它会给我Parent Cat 1、Parent Cat 2和Parent Cat 4。因为Parent Cat 3最终有一个包含“test1”的li

```
<ul>
<li>Parent Cat 1</li>
<li>Parent Cat 2</li>
<li>Parent Cat 3
    <ul>
        <li >SubCat1</a>
            <ul>
                <li>test1</li>
            </ul>
        </li>
        <li >SubCat2
            <ul>
                <li >test2</li>
            </ul>
        </li>
    </ul>
</li>
<li>Parent Cat 4</li></ul> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T02:29:46.980

在我看来这应该有效：

```
$('li:not(li li):not(:has(:contains("test1")))') 
```

如果您可以以某种方式直接定位根`ul`并且不在乎`test1`是在子元素内部还是元素本身，则可以将选择器简化为：

```
$('#root > li:not(:contains("test1"))') 
```

# php - 在 PHP 中检索复选框的选中状态

> ID：14595673
> 
> 赞同：0
> 
> 时间：2013-01-30T02:25:34.020
> 
> 标签：php

我有这行代码将复选框的值发送到数据库（1 或 0）。

```
$premiere = (bool)$_POST['premiere'] == true ? 1 : 0; 
```

当我选中复选框并单击保存时，它可以工作。但是，当我做相反的事情（不选中）时，我遇到了一个问题：复选框似乎没有将“未选中”值发送到数据库。该代码`$premiere`始终视为“真实”。我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T02:28:01.950

首先，这不是 JavaScript，您的问题出在 HTML 和 PHP 之间。

未选中的复选框不会向服务器发送值。您应该使用`isset`来检查它是否被选中：

```
$premiere = isset($_POST['premiere']); 
```

此外，在检查布尔值时，您不需要`== true`.

# clojure - 如何在 Clojure 中链接承诺

> ID：14595674
> 
> 赞同：2
> 
> 时间：2013-01-30T02:25:44.053
> 
> 标签：clojure

在 Scala 中，您可以使用`map`和`flatMap`在未来的成功结果上运行函数。

```
val x: Future[Int] = ...
val y: Future[String] = x.map(_.toString) 
```

有没有比这更好的 Clojure 类似物：

```
(def x (promise))
(def y (future (str @x))) 
```

上面的线程在等待交付时不会阻塞`x`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T10:41:03.750

在您尝试 dref y 的值之前，您的 clojure 代码不会阻塞

```
(def x (promise)) ;wont block
(def y (future (str @x)))  ;wont block
(print @y) ;will block 
```

就类比而言，代码看起来不错。但是，如果您想要某种更具声明性的链接期货的方式，即概念上的简化，那么您可以使用`reduce`如下所示：

```
(def x (promise))
(def final (reduce #(future (%2 @%1)) 
                   x 
                   [inc dec (partial + 10) str]))

(deliver x 10)
@final => "20" 
```

你甚至可以想出一个类似于线程`->, ->>`宏但为每个线程表达式创建期货的宏，但我认为如果你可以使用普通函数来做到这一点，那将是一种矫枉过正。

# jquery - 过滤器：模糊 Mozilla Firefox not working

> ID：14595675
> 
> 赞同：0
> 
> 时间：2013-01-30T02:25:47.730
> 
> 标签：jquery, firefox, css, svg, blur

我正在开发一个页面，该页面将为图像设置动画，并以模糊样式淡入。它适用于谷歌浏览器，但在 Mozilla Firefox 中没有。

我为 Mozilla firefox 尝试了这种方法。[http://css-plus.com/2010/05/how-to-add-a-gaussian-blur-effect-to-elements-within-firefox/](http://css-plus.com/2010/05/how-to-add-a-gaussian-blur-effect-to-elements-within-firefox/)但图像不可见。

这是我的代码：

js：

```
<script type="text/javascript">
$(document).ready(function() {
    $("img").css({
        "filter": "blur(4px)", 
        "-webkit-filter": "blur(4px)", 
        "-moz-filter": "blur(4px)",
        "-o-filter": "blur(4px)",
        "-ms-filter": "blur(4px)",
        "filter":"url('#blur1')"
    });
    window.setTimeout(function() {
        $("img").css({
            "filter": "blur(3px)", 
            "-webkit-filter": "blur(3px)", 
            "-moz-filter": "blur(3px)",
            "-o-filter": "blur(3px)",
            "-ms-filter": "blur(3px)",
            "filter":"url('#blur1')"
        });
    }, 3000);
    window.setTimeout(function() {
        $("img").css({
            "filter": "blur(2px)", 
            "-webkit-filter": "blur(2px)", 
            "-moz-filter": "blur(2px)",
            "-o-filter": "blur(2px)",
            "-ms-filter": "blur(2px)",
            "filter":"url('#blur1')"
        });
    }, 3100);
    window.setTimeout(function() {
        $("img").css({
            "filter": "blur(1.5px)", 
            "-webkit-filter": "blur(1.5px)", 
            "-moz-filter": "blur(1.5px)",
            "-o-filter": "blur(1.5px)",
            "-ms-filter": "blur(1.5px)",
            "filter":"url('#blur1')"
        });
    }, 3200);
    window.setTimeout(function() {
        $("img").css({
            "filter": "blur(1px)", 
            "-webkit-filter": "blur(1px)", 
            "-moz-filter": "blur(1px)",
            "-o-filter": "blur(1px)",
            "-ms-filter": "blur(1px)",
            "filter":"url('#blur1')"

        });
    }, 3300);
    window.setTimeout(function() {
        $("img").css({
            "filter": "", 
            "-webkit-filter": "", 
            "-moz-filter": "",
            "-o-filter": "",
            "-ms-filter": "",
            "filter":"url('#blur1')"
        });
    }, 3400);
    $("#promoIMG").fadeIn(5000);
});
</script> 
```

html:

```
<div id="promoIMG">
    <a href="main.php"><img src="images/akb1.png" alt="" onMouseOver="this.src='images/akb2a.png'" onMouseOut="this.src='images/akb1.png'"/></a><br/>
    <img src="images/akb2.png" alt="AKB" />
</div>
</div>
<svg>
    <filter id="blur1">
        <svg:feGaussianBlur stdDeviation="1"/>
     </filter>
</svg> 
```

我哪里做错了？以及如何使其正确，以便 Mozilla Firefox 的页面动画在 chrome 中相同。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T10:46:26.697

我知道了，我添加这个

```
<svg height="0" xmlns="http://www.w3.org/2000/svg">
<filter id="blur1">
        <svg:feGaussianBlur stdDeviation="1"/>
     </filter>
</svg> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-16T13:17:55.090

有同样的问题；图片未显示（类似于@kidwon 的 jsbin）。通过将 svg 片段位于外部文件中并通过加载它来解决它

```
filter: url("/blur.svg#blur"); 
```

在 CSS 中。***引用***，没有没有。

# java - 如何使用 nostra13 的 UniversalImageLoader 重新加载图像数组？

> ID：14595677
> 
> 赞同：1
> 
> 时间：2013-01-30T02:25:52.800
> 
> 标签：java, android

我正在使用 nostra13 UniversalImageLoader 将一堆图像加载到 gridview 中并且它工作得很好，但是当用户单击菜单上的一个项目时，我需要更改图像（不是打开一个新页面，而是重新加载/刷新同一页上的图像）

我这样调用图像加载器：

```
protected ImageLoader imageLoader;

imageLoader = ImageLoader.getInstance();
imageLoader.init(ImageLoaderConfiguration.createDefault(this));

Bundle bundle = getIntent().getExtras();

imageUrls = bundle.getStringArray(Extra.IMAGES);

options = new DisplayImageOptions.Builder()
    .showStubImage(R.drawable.stub_image)
    .showImageForEmptyUri(R.drawable.image_for_empty_url)
    .cacheInMemory()
    .cacheOnDisc()
    .bitmapConfig(Bitmap.Config.RGB_565)
    .build();

final GridView main_gridview = (GridView)findViewById(R.id.main_gridview);
main_gridview.setAdapter(new ImageAdapter());

public class ImageAdapter extends BaseAdapter {

        @Override
        public int getCount() {
            return imageUrls.length;
        }

        @Override
        public Object getItem(int position) {
            return null;
        }

        @Override
        public long getItemId(int position) {
            return position;
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            final ImageView imageView;
            if (convertView == null) {
                imageView = (ImageView) getLayoutInflater().inflate(R.layout.item_grid_image, parent, false);
            } else {
                imageView = (ImageView) convertView;
            }

            imageLoader.displayImage(imageUrls[position], imageView, options);

            return imageView;
        }
    } 
```

如您所见，Extras.IMAGES 是包含各种 URL 的字符串数组，因此当用户单击菜单上的所述按钮时，我有包含新 URLS 的数组，但不确定如何“刷新”图像适配器?

我知道您可以即时将图片“添加”到 gridview，但是如果您可以完全刷新整个数组，我没有在 nostra 的文档中看到。

任何帮助是极大的赞赏。:)

PS。抱歉，如果这个问题的答案很明显，我只进入 android dev 一周左右。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T14:39:49.870

我解决了。只需将 ImageUrls 设置为更新图像的字符串数组，然后我在顶部声明 ImageAdapter 对象并在该对象上调用 notifyDataSetChanged() ，如下所示：

```
ImageAdapter imgAdapter;

main_gridview.setAdapter(imgAdapter);

imgAdapter.notifyDataSetChanged(); 
```

# magento - 前端和后端的 Magento 站点 404

> ID：14595678
> 
> 赞同：0
> 
> 时间：2013-01-30T02:25:54.843
> 
> 标签：magento, http-status-code-404

我尝试从 Magento 管理员导出数据库，在导出过程中我收到一条错误消息……刷新页面后，我网站的前端和后端都显示 404 错误。站点文件和数据库似乎完好无损，但无法访问任何内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T05:42:09.273

打开 phpinfo(); 在 magento 站点中并检查 mod_rewrite 是否已加载。之后将您的 Web 服务器重写更改为否。这将解决它

# javascript - KineticJS drawImage 函数

> ID：14595686
> 
> 赞同：-1
> 
> 时间：2013-01-30T02:26:36.667
> 
> 标签：javascript, html5-canvas, kineticjs

我在我的网站上使用 KineticJS 库，为我正在制作的 HTML5 画布游戏添加一些功能。

我正在使用库在画布上绘制一些图像，但它并没有像我希望的那样绘制图像。

我正在绘制的图像都存储在一个数组中，并且当前都被绘制到画布上。但是，它们都被绘制在彼此之上，在同一个位置。这在理论上很好，因为用户可以在画布周围拖放图像，所以他们可以通过这样做来查看它们。但是，它对用户不是特别友好，因为我在画布上绘制了大约 30 张图像，因此用户必须单独移动它们才能同时看到它们并不是特别有用。

我正在使用我在本地保存的 KineticJS 库的一个版本，因为我想对其提供的功能进行一两个更改。

我用来绘制图像的库中的函数如下所示：

```
drawImage: function() {
        var context = arguments[0];
        context.save();
        var a = Array.prototype.slice.call(arguments);

        if(a.length === 6 || a.length === 10) {
            if(a.length === 6) {
                context.drawImage(a[1], a[2], a[3], a[4], a[5]);
            }
            else {
                context.drawImage(a[1], a[2], a[3], a[4], a[5], a[6], a[7], a[8], a[9]);
            }
        }

        context.restore();

    } 
```

并且此函数将所有图像绘制在彼此的顶部，所有图像都位于同一位置（画布的左上角）。

我想编辑此函数，以创建将绘制数组中图像的位置的“网格”。是否将多个图像绘制到同一个网格单元无关紧要，但至少在多个位置会有图像。

我曾尝试使用我编写的函数来执行此操作 - 我的函数在单独使用时可以工作，但是当我尝试将它与库一起使用时，它就不起作用了。所以，我想知道是否可以在库中编辑 drawImage 函数，以包含我编写的用于创建“网格”布局以绘制图像的代码。

我为在网格布局中绘制图像而编写的函数如下所示：

```
function drawImage(imageObj) {
    /* Create variables to select the array position randomly*/
    var randomXPosition = function getRandomXPosition(minX, maxX){
        return Math.floor(Math.random()*(maxX - minX +1)) +minX;
    }
    var randomYPosition = function getRandomYPosition(minY, maxY){
        return Math.floor(Math.random()*(maxY - minY +1)) +minY;
    }

    /* Create arrays of X & Y coordinates, and select the array elements randomly for use as
        coordinates at which to draw the images*/
    var xPos = new Array();
    xPos[0] = 10;
    xPos[1] = 70;
    xPos[2] = 130;
    xPos[3] = 190;
    xPos[4] = 250;
    xPos[5] = 310;
    xPos[6] = 370;
    xPos[7] = 430;
    xPos[8] = 490;
    xPos[9] = 550;
    xPos[10] = 610;
    xPos[11] = 670;
    xPos[12] = 730;
    xPos[13] = 790;
    xPos[14] = 850;
    xPos[15] = 910;

    var yPos = new Array();
    yPos[0] = 40;
    yPos[1] = 100;
    yPos[2] = 160;
    yPos[3] = 220;
    yPos[4] = 280;
    yPos[5] = 340;
    yPos[6] = 400;
    yPos[7] = 460;

    var canvasImage = new Kinetic.Image({
      image: imageObj,
      width: 50,
      height: 50,

      /* Now select a random X & Y position from the arrays to draw the images to */
      x: xPos[randomXPosition()],
      y: yPos[randomYPosition()],
      draggable: true

      /* puts the images in random locations on the canvas
      x: stage.getWidth() / 20*Math.floor(Math.random()*20),
      y: stage.getHeight() / 15*Math.floor(Math.random()*8+2),
      draggable: true */
    });

    // add cursor styling
    canvasImage.on('mouseover', function() {
      document.body.style.cursor = 'pointer';
    });
    canvasImage.on('mouseout', function() {
      document.body.style.cursor = 'default';
    });

    imagesLayer.add(canvasImage);
} 
```

此函数使用 X 和 Y 位置创建画布坐标的网格布局，然后在将每个图像绘制到画布时将 X 和 Y 坐标数组中的随机元素分配给每个图像的 X 和 Y 值 - 确保绘制每个图像在我已确定的可能位置列表中的随机位置的画布上。

我想知道的是如何将我编写的函数提供的功能添加到`drawImage`库中的函数中？

我尝试将我的代码复制并粘贴到库中的函数中，例如：

```
drawImage: function() {
        var context = arguments[0];
        context.save();
        var a = Array.prototype.slice.call(arguments);

        if(a.length === 6 || a.length === 10) {
            if(a.length === 6) {
                context.drawImage(a[1], a[2], a[3], a[4], a[5]);
            }
            else {
                context.drawImage(a[1], a[2], a[3], a[4], a[5], a[6], a[7], a[8], a[9]);
            }
        }

        /* Create variables to select the array position randomly*/
    var randomXPosition = function getRandomXPosition(minX, maxX){
        return Math.floor(Math.random()*(maxX - minX +1)) +minX;
    }
    var randomYPosition = function getRandomYPosition(minY, maxY){
        return Math.floor(Math.random()*(maxY - minY +1)) +minY;
    }

    /* Create arrays of X & Y coordinates, and select the array elements randomly for use as
        coordinates at which to draw the images*/
    var xPos = new Array();
    xPos[0] = 10;
    xPos[1] = 70;
    xPos[2] = 130;
    xPos[3] = 190;
    xPos[4] = 250;
    xPos[5] = 310;
    xPos[6] = 370;
    xPos[7] = 430;
    xPos[8] = 490;
    xPos[9] = 550;
    xPos[10] = 610;
    xPos[11] = 670;
    xPos[12] = 730;
    xPos[13] = 790;
    xPos[14] = 850;
    xPos[15] = 910;

    var yPos = new Array();
    yPos[0] = 40;
    yPos[1] = 100;
    yPos[2] = 160;
    yPos[3] = 220;
    yPos[4] = 280;
    yPos[5] = 340;
    yPos[6] = 400;
    yPos[7] = 460;

    var canvasImage = new Kinetic.Image({
      image: imageObj,
      width: 50,
      height: 50,

      /* Now select a random X & Y position from the arrays to draw the images to */
      x: xPos[randomXPosition()],
      y: yPos[randomYPosition()],
      draggable: true

      /* puts the images in random locations on the canvas
      x: stage.getWidth() / 20*Math.floor(Math.random()*20),
      y: stage.getHeight() / 15*Math.floor(Math.random()*8+2),
      draggable: true */
    });

    // add cursor styling
    canvasImage.on('mouseover', function() {
      document.body.style.cursor = 'pointer';
    });
    canvasImage.on('mouseout', function() {
      document.body.style.cursor = 'default';
    });

    imagesLayer.add(canvasImage);

        context.restore();

    } 
```

但是在执行此操作后在浏览器中查看页面时，画布不再出现在页面上，并且出现控制台错误：“ReferenceError: imageObj is not defined”就行了`image: imageObj,`。

我不知道为什么会这样，或者如何解决它。有没有人有什么建议？

**编辑 30/01/2013 @ 16:10**

我已经尝试按照建议编辑代码，drawImage 函数现在看起来像这样：

```
drawImage: function() {
        var context = arguments[0];
        context.save();
        var a = Array.prototype.slice.call(arguments);

        /*Create the arrays to hold the grid coordinates I want to use */
        /* Create variables to select the array position randomly*/
        var randomXPosition = function getRandomXPosition(minX, maxX){
            return Math.floor(Math.random()*(maxX - minX +1)) +minX;
        }
        var randomYPosition = function getRandomYPosition(minY, maxY){
            return Math.floor(Math.random()*(maxY - minY +1)) +minY;
        }

        /* Create arrays of X & Y coordinates, and select the array elements randomly for use as
            coordinates at which to draw the images*/
        var xPos = new Array();
        xPos[0] = 10;
        xPos[1] = 70;
        xPos[2] = 130;
        xPos[3] = 190;
        xPos[4] = 250;
        xPos[5] = 310;
        xPos[6] = 370;
        xPos[7] = 430;
        xPos[8] = 490;
        xPos[9] = 550;
        xPos[10] = 610;
        xPos[11] = 670;
        xPos[12] = 730;
        xPos[13] = 790;
        xPos[14] = 850;
        xPos[15] = 910;

        var yPos = new Array();
        yPos[0] = 40;
        yPos[1] = 100;
        yPos[2] = 160;
        yPos[3] = 220;
        yPos[4] = 280;
        yPos[5] = 340;
        yPos[6] = 400;
        yPos[7] = 460;

        var canvasImage = new Kinetic.Image({
            image: a[1],
            width: 50,
            height: 50,
            x: xPos[randomXPosition()],
            y: yPos[randomYPosition()],
            draggable: true
        });
        canvasImage.on('mouseover', function(){/*Define any handlers I want*/});
        imagesLayer.add(canvasImage);
    } 
```

但是，尽管现在显示了画布，但图像却没有——图像之前出现的地方有一个方形的“轮廓”（当它们都被绘制到一个位置时），所以我认为那是图像，但它们不显示为图像 - 只是一个正方形，它们仍然都在同一个位置。

当我尝试在画布周围拖放正方形时（假设它是一个图像），画布上的所有其他内容都随着图像移动，并且变得非常缓慢且无响应。

例如，这是我的页面的屏幕截图：

![在此处输入图像描述](../Images/fcd6730da738f26ac3aa075b41db05c0.png)

我在编辑代码的方式上做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T05:27:49.840

您的错误是由于您引用的 javascript 对象 imageObj 未在代码中的任何位置定义（您已显示）。

笔记：

```
var canvasImage = new Kinetic.Image({
  image: imageObj,   // <--- imageObj needs to be created somewhere, it is expecting something like:  var imageObj = new Image();
  width: 50,
  height: 50,
  x: xPos[randomXPosition()],
  y: yPos[randomYPosition()],
  draggable: true

}); 
```

现在，为了修复：您需要参考存储图像的位置；数组？

```
var canvasImage = new Kinetic.Image({
  image: a[0],   
  width: 50,
  height: 50,
  x: xPos[randomXPosition()],
  y: yPos[randomYPosition()],
  draggable: true

}); 
```

**新东西：** 这是你的功能：

```
 drawImage: function() {
    var context = arguments[0];
    context.save();
    var a = Array.prototype.slice.call(arguments);

    if(a.length === 6 || a.length === 10) {
        if(a.length === 6) {
            context.drawImage(a[1], a[2], a[3], a[4], a[5]);  //a[1] contains the image object reference
        }
        else {
            context.drawImage(a[1], a[2], a[3], a[4], a[5], a[6], a[7], a[8], a[9]);
        }
    }

    context.restore();
  } 
```

尝试：

```
 drawImage: function() {
    var context = arguments[0];
    context.save();
    var a = Array.prototype.slice.call(arguments);
    var randomSpot = randomGridPosition();
    var canvasImage = new Kinetic.Image({
        image: a[1],   
        width: 50,
        height: 50,
        x: randomSpot.x,
        y: randomSpot.y,
        draggable: true
    });
    canvasImage.on('mouseover', function(){/*define any handlers you want*/};
    layer.add(canvasImage); //or whatever your layer is called
  } 
```

随机网格位置：

```
 function randomGridPosition(){  //10x10 grid
      var width= .9*stage.getWidth()/10;
      var height= .9*stage.getHeight()/10;
      var randomX = Math.floor(10*Math.random()*width); //select random x position dependent on width
      var randomY = Math.floor(10*Math.random()*height); //select random y position dependent on height
      return {x: randomX, y: randomY};
  } 
```

# android - Android：重新审视垃圾收集：在 onDestroy 之后查看分配仍然存在

> ID：14595689
> 
> 赞同：0
> 
> 时间：2013-01-30T02:26:48.160
> 
> 标签：android, garbage-collection

我发现这篇非常老的帖子基本上总结了我的问题：

[https://groups.google.com/forum/?fromgroups=#!topic/android-developers/QsSjuB62Kow](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/QsSjuB62Kow)

考虑到 OP 指出在 1.5 版之前没有发生这种情况，该线程的结果（hackbod/mark/romain 答案）对我来说似乎有些不满意。

长与短：

```
Activity starts service.
finish is called on Activity.
Application's memory allocation remains constant
(despite views being garbage collected either eventually or manually) 
```

我提出这个的原因。

我有一个通过广播接收器在启动时启动的服务，使用大约 5 MB。

当我的活动开始时，内存分配会跳转到 40MB（我有很多视图正在进行，所以这是意料之中的）。活动结束，服务仍在运行（按设计）。内存分配仍然很高，我认为这是一个问题。

在这个活动中，清空所有内容`onDestroy`，遍历所有视图和数组并清空，`System.gc()`（是的，我知道这只是建议），强制 GC，也不打开尽可能多的应用程序以使总设备可用内存低于 20% 对此分配没有任何作用. 即使没有剩余的活动痕迹（在 MAT 中花费了大量时间），它仍保持在 40MB 不变。

我怎样才能让这个分配从 40MB 降到 5MB？或者这不是Android的做事方式吗？

我采取了极端措施来确保上下文或对象不会从活动泄漏到服务/等（事实上，除了通过共享首选项之外，两者之间没有任何引用）。如果您在原始帖子中看到极其基本的示例，我想这将有助于阐明这种情况。

如果我将服务与活动分离，或者只运行服务或只运行活动，但从不同时运行两者，那么内存分配是可预测的。服务从不消耗超过 5MB，活动从不超过 35MB。并且当调用任何一个 onDestroy 时，内存不再显示为为每个分配的。

我在 Android 2.3 和 4.x 中都注意到了相同的行为。

也许我在这里遗漏了一些基本的东西，或者这只是一个愚蠢的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T17:05:35.410

我在 MAT 中倾注了几个小时，正如 Andrew 所建议的那样，只要服务还在运行，Activity 的一些资源就会一直存在。

对于任何为此苦苦挣扎的人，我找到了一个便宜的简单解决方案。

只需在单独的进程中生成您的服务。

这个“排序”成功了，现在当我的 Activity`onDestroy`被调用时，Activity 使用的内存（在我的情况下为 35MB）被移动到“缓存进程”并且活动运行的服务返回到以前的状态（在我的情况下5MB）。

在您的清单中：

`android:process`属性是这里的关键。更多关于这里：

[http://developer.android.com/guide/topics/manifest/service-element.html](http://developer.android.com/guide/topics/manifest/service-element.html)

# google-tv - 使用方向键使 MediaController 可导航

> ID：14595694
> 
> 赞同：1
> 
> 时间：2013-01-30T02:27:24.047
> 
> 标签：google-tv

我正在开发自定义媒体控制器。我有它，以便 Surface View 正确显示和隐藏视图。该视图填充了 SeekerBar 和关于 ImageButtons 的信息。但是，我不知道如何让方向键导航到这些项目。

如果我使用遥控器上的突触触摸板，我可以选择按钮和搜索栏，但不能使用 D-PAD 来访问这些项目。显示视图时是否需要捕获事件。谷歌电视在自定义媒体控制器实现上有一个很好的例子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T16:54:06.290

是的，您需要捕获关键代码事件并相应地管理重点项目以使其正常工作。

# c# - 数据上下文进入 ListView --- Windows Store 应用

> ID：14595695
> 
> 赞同：0
> 
> 时间：2013-01-30T02:27:30.060
> 
> 标签：c#, windows-8, windows-store-apps

在我的应用程序中，我在页面中有一个数据上下文，但是，我想将此数据上下文移动到 ListView，因为我需要创建更多数据上下文。

我试图分配一个名称来调用 DataContext 网格，但不起作用......

```
<Page
x:Class="Food_UsuarioWin8.Pages.HUB"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:local="using:Food_UsuarioWin8.Pages"
xmlns:vmSegments="using:Food_UsuarioWin8.ViewModels"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
mc:Ignorable="d">

 </Page.Resources>
<Page.DataContext>
    <vmSegments:ViewModelSegments x:Name="DataContextSegments"/>
</Page.DataContext>

 <ListView x:Name="ListViewSegments" Grid.Row="1" Margin="0" DataContext="{StaticResource DataContextSegments}" ItemContainerStyle="{StaticResource ListViewSItemtyleECFood}" >
  <Viewbox>
  </Viewbox>
 </ListView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T06:11:54.920

There are two ways you can create a "composite" data context.

My preference is a single `ViewModel` class with properties for each data context you need:

```
public class ViewModel
{
    public ViewModel()
    {
        Segments = new ViewModelSegments();
        SomethingElse = new ViewModelSomethingElse();
    }

    public ViewModelSegments Segments { get; set; }
    public ViewModelSomethingElse SomethingElse { get; set; }
} 
```

In XAML you set your main `ViewModel` as `DataContext` for the page and then bind individual controls to its properties:

```
<ListView ItemsSource="{Binding Segments}" /> 
```

Alternatively you can put individual data context classes into resources and use them from there:

```
<Page.Resources>
    <vm:ViewModelSegments x:Key="DataContextSegments" />
    <vm:ViewModelSomethingElse x:Key="DataContextSomethingElse" />
</Page.Resources>

<ListView DataContext="{StaticResource DataContextSegments}" ItemsSource="{Binding}" /> 
```

# java - soundPool 后清理（应用程序被杀死后循环声音仍然播放）

> ID：14595696
> 
> 赞同：0
> 
> 时间：2013-01-30T02:27:33.827
> 
> 标签：java, android, soundpool

soundPool 后如何清理？应用程序被杀死后，我的循环声音仍在播放

// 我的 onStop() onPause() 是相同的声音一直持续到重新启动。

```
public void onStop(){
    soundPool.stop(curs);   
    }

  public int playSound(int sound, int loop) {
   if (curs != sound)
   {

       curs = sound;   
       AudioManager mgr = (AudioManager)getSystemService(Context.AUDIO_SERVICE);
       float streamVolumeCurrent = mgr.getStreamVolume(AudioManager.STREAM_MUSIC);
       float streamVolumeMax = mgr.getStreamMaxVolume(AudioManager.STREAM_MUSIC);
       float volume = streamVolumeCurrent / streamVolumeMax;  
       return soundPool.play(soundsMap.get(sound), volume, volume, 1, loop, 1);

       }
       return curs;
 }     
 // is how I call it in a runnable class

   curs=playSound(cur,-1); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T02:35:25.150

当你打电话时，你永远不会停止你的旧声音`playSound`。如果`playSound`被多次调用，您将播放两种声音，退出时，您只会取消其中一种。一种解决方案是保留您启动的所有声音 ID。或者，如果您一次只需要一个声音，请在开始下一个声音之前更改您的代码以取消当前声音。

```
if (curs != sound)
{
  soundPool.stop(curs); 
  curs = sound;   
  // ... 
} 
```

# perl - wkhtmltopdf 在 Perl 中使用 STDIN 和 STDOUT 和 Email::Mime

> ID：14595698
> 
> 赞同：1
> 
> 时间：2013-01-30T02:27:45.933
> 
> 标签：perl, stdout, stdin, wkhtmltopdf, filehandle

我正在尝试从也即时生成的 HTML 即时生成订单收据的 PDF，然后通过电子邮件将其发送给某人。

我真的不想创建文件，将其附加到电子邮件，然后删除文件，所以我试图通过 STDIN（来自 Perl）将 html 发送到 wkhtmltopdf，然后在电子邮件中捕获来自 wkhtmltopdf 的 PDF 输出附件使用~~MIME::Lite~~ Email::Mime。

这*绝对适用*于使用 Perl 允许人们从我的网站下载动态生成的 PDF 文件，但尝试将其与~~MIME::Lite~~ Email::Mime 一起使用是行不通的。（它可能会奏效，但由于它已经过时，我们使用 Email::Mime 代替）

我绝对确定这是由于我对使用文件句柄、管道、反引号和其他不常用的东西缺乏基本的理解，我很想更好地掌握这些东西。

这是有效的：

```
#!/usr/bin/perl
#### takes string containing HTML and outputs PDF to browser to download
#### (otherwise would output to STDOUT)

print "Content-Disposition: attachment; filename='testPDF.pdf'\n";
print "Content-type: application/octet-stream\n\n";

my $htmlToPrint = "<html>a bunch of html</html>";

### open a filehandle and pipe it to wkhtmltopdf
### *the arguments "- -" tell wkhtmltopdf to get 
###  input from STDIN and send output to STDOUT*
open(my $makePDF, "|-", "wkhtmltopdf", "-", "-") || die("$!");
print $makePDF $htmlToPrint;  ## sends my HTML to wkhtmltopdf which streams immediately to STDOUT

exit 1; 
```

您可以从 Apache 运行它，它会向用户显示一个下载对话框，并下载一个名为“testPDF.pdf”的可读、正确的 pdf。

编辑：解决方案是[Capture::Tiny](http://search.cpan.org/dist/Capture-Tiny/)模块（和[Email::Mime](http://search.cpan.org/~rjbs/Email-MIME-1.911/lib/Email/MIME.pm)）：

```
#!/usr/bin/perl
use Capture::Tiny qw( capture );
use Email::Sender::Simple;
use Email::MIME::Creator;

my $htmlToPrint = "<html>a bunch of html</html>";

### it's important to capture STDERR as well, since wkhtmltopdf outputs
### its console messages on STDERR instead of STDOUT, so it can output
### the PDF to STDOUT; otherwise it will spam your error log    
(my $pdfstream, my $consoleOutput, my @retvals) = capture {
    open(my $makePDF, "|-", "wkhtmltopdf", "-", "-") || die("$!");
    print $makePDF $htmlToPrint;
};

my @parts = (
Email::MIME->create(
    attributes => {
        content_type => "text/plain",
        disposition  => "inline",
        charset      => "US-ASCII",
        encoding     => "quoted-printable",
    },
    body_str => "Your order receipt is attached as a PDF.",
),
Email::MIME->create(
    attributes => {
        filename     => "YourOrderReceipt.pdf",
        content_type => "application/pdf",
        disposition  => "attachment",
        encoding     => "base64",  ## base64 is ESSENTIAL, binary and quoted-printable do not work!
        name         => "YourOrderReceipt.pdf",
    },
    body => $pdfstream,
),
);

my $email = Email::MIME->create(
  header_str => [
      From => 'Some Person <me@mydomain.com>',
      To   => 'customer@theirdomain.com',
      Subject => "Your order receipt is attached...",
  ],
  parts => [ @parts ],
);

Email::Sender::Simple->send($email);
exit 1; 
```

这一切现在都很完美。

大多数问题似乎是 wkhtmltopdf 没有缓冲 PDF 输出并逐行发送；一旦从 STDIN 获得 HTML 输入，它就会立即将所有 PDF 输出流式传输到 STDOUT。

我认为这就是我无法让 open2 或 open3 工作的原因。

我也试过`open (my $pdfOutput, "echo \"$htmlToPrint\"| wkhtmltopdf - -|")`，但这在 shell 中运行，所以即使用`$htmlToPrint`引号括起来，命令也会阻塞 HTML 中使用的符号。

希望有人觉得这有帮助...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T09:22:04.720

您需要使用 open2 或[open3](http://perldoc.perl.org/IPC/Open3.html)将输入发送到 cmd，然后在不使用反引号的情况下收集其输出。

```
local(*HIS_IN, *HIS_OUT, *HIS_ERR);
my $pid = open3(*HIS_IN, *HIS_OUT, *HIS_ERR,'wkhtmltopdf', '-', '-');
waitpid( $pid, 0 );
my $child_exit_status = $? >> 8; 
```

您可以使用更多新鲜的替代方案来发送电子邮件：

```
 use Email::MIME::Creator;
  use IO::All;

  # multipart message
  my @parts = (
      Email::MIME->create(
          attributes => {
              filename     => "report.pdf",
              content_type => "application/pdf",
              encoding     => "quoted-printable",
              name         => "2004-financials.pdf",
          },
          #body => io( *HIS_OUT )->all, it may work
          body => *HIS_OUT,

      ),
      Email::MIME->create(
          attributes => {
              content_type => "text/plain",
              disposition  => "attachment",
              charset      => "US-ASCII",
          },
          body_str => "Hello there!",
      ),
  );

  my $email = Email::MIME->create(
      header_str => [ From => 'casey@geeknest.com' ],
      parts      => [ @parts ],
  );
  # standard modifications
  $email->header_str_set( To            => rcpts()        );

  use Email::Sender::Simple;
  Email::Sender::Simple->send($email); 
```

# ajax - MVC / Knockout - 将模型发布到 MVC 控制器

> ID：14595700
> 
> 赞同：2
> 
> 时间：2013-01-30T02:27:59.723
> 
> 标签：ajax, model-view-controller, knockout.js

编码..

我正在尝试将以下 json 数据发布到我的词曲作者控制器：

```
id:1
photofilepath:http://songistry.blob.core.windows.net/profileimages/639585169.png
firstname:Mike
lastname:Cottingham
website:http://mikecottingham.ca
minibio:I am the web developer building this website!
publisherid:2
proid:2
contacts:[{"Id":1,"Name":"Mike Cottingham","Phone":"403.919.2706","Email":"mike@mikecottingham.ca"},{"Id":2,"Name":"Bob Thebuilder","Phone":"403.919.2706","Email":"bob@mikecottingham.ca"}] 
```

这是我的歌曲作者模型 public class SongWriter ： IEntity { public virtual Int32 Id { get; 放; }

```
 [Required(ErrorMessage = "First Name is required")]
    [Display(Name = "First Name")]
    [StringLength(64, ErrorMessage = "First Name cannot exceed 64 characters.")]
    public virtual String FirstName { get; set; }

    [Required(ErrorMessage = "Last Name is required")]
    [Display(Name = "Last Name")]
    [StringLength(64, ErrorMessage = "Last Name cannot exceed 64 characters.")]
    public virtual String LastName { get; set; }

    [Display(Name = "Website")]
    [StringLength(128, ErrorMessage = "Website cannot exceed 128 characters.")]
    public virtual String Website { get; set; }

    [Display(Name = "Mini Bio")]
    [StringLength(128, ErrorMessage = "Mini Bio cannot exceed 128 characters.")]
    public virtual String MiniBio { get; set; }

    [Display(Name = "Bio")]
    [StringLength(4096, ErrorMessage = "Bio cannot exceed 4096 characters.")]
    public virtual String Bio { get; set; }

    [Display(Name = "Photo")]
    [StringLength(256, ErrorMessage = "File Path cannot exceed 256 characters.")]
    public virtual String PhotoFilePath { get; set; }

    [Column("DefaultPublisherId")]
    public virtual Int32? PublisherId { get; set; }

    [Column("DefaultProId")]
    public virtual Int32? ProId { get; set; }

    [Display(Name = "Invitation Email")]
    [StringLength(128, ErrorMessage = "Invitation Email cannot exceed 128 characters.")]
    public virtual String InvitationEmail { get; set; }

    [StringLength(128, ErrorMessage = "Invitation Code cannot exceed 128 characters.")]
    public virtual String InvitationSecretKey { get; set; }

    public virtual Int32? LoginId { get; set; }

    public virtual Login Login { get; set; }
    public virtual ICollection<SongWriterSong> SongWriterSongs { get; set; }

    public virtual Pro Pro { get; set; }
    public virtual Publisher Publisher { get; set; }

    public virtual ICollection<Contact> Contacts { get; set; }
} 
```

这是我的联系人模型 public class Contact : IEntity { public virtual Int32 Id { get; 放; }

```
 [DisplayName("Name")]
    [Required(ErrorMessage = "Contact name is required.")]
    [StringLength(128, ErrorMessage="Contact name can not exceed 128 characters")]
    public virtual String Name { get; set; }

    [DisplayName("Phone Number")]
    [Required(ErrorMessage = "Contact phone number is required.")]
    [StringLength(32, ErrorMessage = "Contact phone number can not exceed 32 characters")]
    public virtual String Phone { get; set; }

    [DisplayName("Email Address")]
    [Required(ErrorMessage = "Contact email address is required.")]
    [StringLength(128, ErrorMessage = "Contact email address can not exceed 128 characters")]
    public virtual String Email { get; set; }

    public virtual SongWriter SongWriter { get; set; }
} 
```

我使用以下代码将数据发布到控制器

self.savechanges = function () { var model = { id: self.songwriter.id(), photofilepath: self.songwriter.photofilepath(), firstname: self.songwriter.firstname(), lastname: self.songwriter.lastname( ), 网站: self.songwriter.website(), minibio: self.songwriter.minibio(), bio: self.songwriter.bio(), publisherid: self.songwriter.publisherid(), proid: self.songwriter.proid( ) };

```
return $.post("/songwriter/edit", model, function (response) {
    self.isvalid(response.Success);
    if (!self.isvalid()) {
        helpers.errordialog(response.Errors);
    }
    else {
        self.songwriter.id(response.Data.Id);
    }
}, "json"); 
```

};

我收到验证错误，说需要联系人姓名，需要联系人电子邮件......等等。 MVC 引擎不应该查看 JSON 对象并解析数据并将其映射到我的模型吗？

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T03:09:19.143

弄清楚了！

我需要使用 JQuery.ajax，而不是 JQuery.post 函数。JQuery.post 函数未正确标记请求的 contentType 和 dataType。

工作代码：

```
return $.ajax("/songwriter/edit", {
                data: JSON.stringify(model),
                type: "POST",
                contentType: "application/json",
                dataType: "json",
                success: function (response) {
                    self.isvalid(response.Success);
                    if (!self.isvalid()) {
                        helpers.errordialog(response.Errors);
                    }
                    else {
                        self.songwriter.id(response.Data.Id);
                    }
                }
            }); 
```

# web-applications - GitHub post-receive 钩子流

> ID：14595702
> 
> 赞同：3
> 
> 时间：2013-01-30T02:28:01.980
> 
> 标签：web-applications, web-deployment, githooks

我在我的应用程序中使用的 GitHub（企业，物有所值）上有一个存储库。我还将这个应用程序部署在同一网络上的开发服务器上。我已经阅读了一些关于 Git 钩子的内容，并且我已经在 GitHub 上的存储库的 WebHooks 部分中注册了我的开发服务器的 URL。但是，我不知道如何设置接收触发器，每次将提交推送到存储库时，我希望服务器从 POST 接收 JSON 数据，更新网络应用程序存储库（网络应用程序也在 Git控制）与数据，并重新启动一些服务。

我怎样才能以最简单和最简单的方式完成上述操作？

谢谢。

# php - 可以检查 .submit() 是否完成。我不能使用 .put()

> ID：14595703
> 
> 赞同：1
> 
> 时间：2013-01-30T02:28:06.947
> 
> 标签：php, jquery, amazon-s3, amazon

我通过直接提交到存储桶 URL 直接上传到 Amazon S3。

页面模拟如下：

```
<div id="one">
    <upload image form>
</div>

<div id="two>
    <information form>
</div> 
```

div "two" 默认是隐藏的。当用户以上传图片的形式推送提交时，会调用 .submit() 钩子并隐藏 div 一。显示第二部分，用户输入有关正在上传的图像的附加信息。

但是我的问题是，如果要上传的图像很大并且取决于连接，上传可能需要一分钟或更长时间，所以如果用户在上传完成并提交之前完成第二个表单，那么上传就会被切断。

亚马逊允许你重定向到一个页面，所以我重定向到 PHP_SELF，所以当上传完成时，用户不知道有什么区别。

所以我的问题是是否可以检测上传进度或禁用 div 2 中的提交按钮，直到上传完成。

我想支持大多数浏览器，所以 CORS/.put() 对我来说并不是一个真正的选择。

我也喜欢我直接推向亚马逊并跳过中间人的事实。

我试过了：

```
isset($_POST) 
```

检测上传何时完成重定向，但它从未被调用，我不知道为什么。

浏览器显示上传百分比（状态栏）有没有办法挂钩？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T06:55:11.553

为了可用性，如果

*   用户可以立即输入图像信息
*   看到上传进度指示器
*   不需要为一个信息单元提交两份表格

如果您使用 jquery 上传图像，您可以配置一个回调函数，然后自动提交数据表单。

删除其中一个提交按钮，添加单击事件处理程序而不是真正提交表单。

这个事件处理程序将

*   评估表单输入
*   上传文件
*   显示进度（可以只是一个“上传等待...”）
*   为上传完成定义回调。

然后回调只需要提交第二个表单

# javascript - 是否可以使用网站上的链接来更改浏览器选项卡？

> ID：14595705
> 
> 赞同：0
> 
> 时间：2013-01-30T02:28:11.653
> 
> 标签：javascript, html

基本上我想要一个按钮/链接，可以在新标签中打开谷歌，但如果该标签已经打开，那么只需关注该标签。这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T02:53:39.193

**有点儿。**我能想到的最接近的事情是这样的：

```
<a href="http://www.example.com/" target="example">Link</a> 
```

当您第一次单击它时，它将在新选项卡中打开该链接。随后单击该链接将导航它第一次打开的选项卡（即使该选项卡已导航到不同的页面）。它不会更改在不使用链接的情况下打开的选项卡的页面。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T02:38:25.803

没有。

有时，您可以聚焦使用 window.open 打开的窗口并使用`window.focus`( [MDN](https://developer.mozilla.org/en-US/docs/DOM/window.focus) ) 进行引用。

您可能可以使用浏览器插件来执行此操作，具体取决于浏览器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T02:48:45.370

**是的，您可以，而且这是一项非常简单的任务**——但请记住，现在一些浏览器（带有插件）会阻止您创建的新窗口，或者不会将其识别为可以在某些内部 JavaScript 中控制的“弹出窗口”。

正确的方法是：

```
<script>
var myTab;

function openIt()
{
myTab=window.open('','','width=200,height=100');
myTab.document.write("<p>Some kind of inner text</p>");
myTab.blur(); // this will un-activate opened window/tab
}

function activateIt()
{
myTab.focus();
}
</script>

<input type="button" value="Open" onclick="openIt()">
<input type="button" value="Activate" onclick="activateIt()" /> 
```

要控制它，请参阅 window.open() 方法的文档。

# javascript - 一键打开多个网址

> ID：14595707
> 
> 赞同：0
> 
> 时间：2013-01-30T02:28:15.703
> 
> 标签：javascript, html

看看我的代码，它只打开第一个链接并忽略其余的，

```
<a href="#" onclick="window.open('http://whitepages.co.nz/white-residential/T%20Vu/new-zealand/'); window.open('http://whitepages.co.nz/white-residential/T%20Vu/Auckland Central/'); window.open('http://whitepages.co.nz/white-residential/T%20H%20Vu/new-zealand/'); window.open('http://whitepages.co.nz/white-residential/T%20H%20Vu/Auckland Central/'); window.open('http://whitepages.co.nz/white-residential/H%20Vu/new-zealand/'); window.open('http://whitepages.co.nz/white-residential/H%20Vu/Auckland Central/'); window.open('http://whitepages.co.nz/white-residential/Vu/new-zealand/'); window.open('http://whitepages.co.nz/white-residential/Vu/Auckland Central/'); " class="btn btn-primary">Open All</a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T03:47:10.157

你可以这样使用

```
<a href="http://www.gmail.com" target="_blank" onclick="window.open('http://www.google.com'); window.open('http://www.yahoo.com');">Link text</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T04:15:39.140

感谢您的评论和回答伙计们。它像**索达森**所说的那样工作。它阻止了我浏览器中的弹出窗口。当我启用弹出窗口时，它会`URL`在不同的窗口中打开。

# wordpress - 自定义帖子 wp_query 上的分页

> ID：14595709
> 
> 赞同：12
> 
> 时间：2013-01-30T02:28:30.840
> 
> 标签：wordpress, pagination, wordpress-theming, custom-post-type

```
<?php
        $paged = (get_query_var('paged')) ? get_query_var('paged') : 1;
        $loop = new WP_Query(
            array(
                'post_type' => 'html5-blank',
                'posts_per_page' => 5,
                'paged'=>$paged
            )
        );
?>
<?php if ($loop->have_posts()): while ($loop->have_posts()) : $loop->the_post(); ?>      
 //Loop Code Here..
 <?php wp_reset_query(); ?> 
   <nav>
        <?php previous_posts_link( 'Newer posts &raquo;' ); ?>
        <?php next_posts_link('Older &raquo;') ?>
    </nav>
<?php endwhile; ?>
<?php else: ?> 
```

当我输入结果时，下一页上的网址是：www.mywebsite.com/blog/page/2 is WORKING。但我无法显示分页链接。

哪里出错了？

编辑：分页链接显示在`page/2/`但不在主博客页面中。为什么？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-08-20T00:13:18.143

我建议使用自定义帖子 wp_query 进行分页的 3 种方法。不幸的是，直到今天还没有很多关于这方面的好信息，或者至少在某些情况下还不清楚。希望这会有所帮助！

请注意，您也确实将 wp_reset_postdata() 放在了错误的位置，但还需要更多才能使其正常工作。

## 选项 1 - 使用 max_num_pages 变量

```
<?php
    $paged = (get_query_var('paged')) ? get_query_var('paged') : 1;
    $args = array( 
        'posts_per_page' => 1, 
        'paged' => $paged, 
        'post_type' => 'cpt_type'
    );
    $cpt_query = new WP_Query($args);
?>

<?php if ($cpt_query->have_posts()) : while ($cpt_query->have_posts()) : $cpt_query->the_post(); ?>

    //Loop Code Here...

<?php endwhile; endif; ?>

<nav>
    <ul>
        <li><?php previous_posts_link( '&laquo; PREV', $cpt_query->max_num_pages) ?></li> 
        <li><?php next_posts_link( 'NEXT &raquo;', $cpt_query->max_num_pages) ?></li>
    </ul>
</nav> 
```

您将在上面看到，现在访问变量的格式`previous_posts_link`略有`next_posts_link`不同`max_num_pages`。访问时请务必使用您自己的查询变量名称`max_num_pages`。请注意，我使用 $cpt_query 因为这是我的查询示例的变量。

## 选项 2 - 暂时将 $wp_query 变量用于循环查询

这是很多人推荐的，但要小心将 $wp_query 变量分配给临时变量并重新分配它，否则您会遇到各种麻烦。这就是为什么我推荐选项#1。如[CSS Tricks](http://css-tricks.com/snippets/wordpress/paginate-custom-post-types/)中所述，您可以执行以下操作：

```
<?php 
  $temp = $wp_query; 
  $wp_query = null; 
  $wp_query = new WP_Query(); 
  $wp_query->query('showposts=6&post_type=news'.'&paged='.$paged); 

  while ($wp_query->have_posts()) : $wp_query->the_post(); 
?>

  <!-- LOOP: Usual Post Template Stuff Here-->

<?php endwhile; ?>

<nav>
    <?php previous_posts_link('&laquo; Newer') ?>
    <?php next_posts_link('Older &raquo;') ?>
</nav>

<?php 
  $wp_query = null; 
  $wp_query = $temp;  // Reset
?> 
```

## 选项 3 - 使用 WP-pagenavi 插件

就像另一个选项一样，您可以做的是使用[WP-pagenavi](http://wordpress.org/plugins/wp-pagenavi/)插件，并按照选项 #1 设置您的查询。但是，在安装插件后，对代码进行一次更改，删除元素中的所有内容并替换为此功能。所以你会结束：

```
<nav>
    <?php wp_pagenavi( array( 'query' => $cpt_query ) ); ?>
</nav> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T03:12:26.690

我认为您放`<?php wp_reset_query(); ?>`错了位置..不应该是下一个还是分页代码之后？

像这样的东西

```
<?php endwhile; ?>
<?php else: ?>
<?php wp_reset_query(); ?> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-07-09T13:07:44.370

@Trevor 非常充分地回答了这个问题，但我需要实现编号分页，还有更多的研究要做。我希望我的代码可以帮助其他人实现编号分页。

```
 <div class="frontpage-posts">
        <?php
        if (get_query_var('paged')) {
          $paged = get_query_var('paged');
        } elseif (get_query_var('page')) {
          $paged = get_query_var('page');
        } else {
          $paged = 1;
        }
        $temp = $wp_query;
        $wp_query = null;
        $wp_query = new WP_Query('posts_per_page=12&paged=' . $paged);
        if ($wp_query->have_posts()) :
          while ($wp_query->have_posts()) : $wp_query->the_post();
            echo the_title();
          endwhile; ?>
          <nav>
            <?php
            the_posts_pagination(array(
              'mid_size'  => 2,
              'prev_text' => __('Back', 'textdomain'),
              'next_text' => __('Onward', 'textdomain'),
            ));
            ?>
          </nav>
        <?php
          $wp_query = null;
          $wp_query = $temp;
          wp_reset_postdata();
        endif;
        ?>
      </div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-14T15:45:30.130

```
$paged = ( get_query_var( 'paged' ) ) ? get_query_var( 'paged' ) : 1;
$args = array(
    'post_type'     => 'wp-rest-api-log',
    'posts_per_page' => 5,
    'paged'         => $paged,
    'orderby'       => 'date',
);

$loop = new WP_Query( $args );

if ($loop->have_posts()) :
    while ($loop->have_posts()) : $loop->the_post();
      echo the_title();
    endwhile;

    echo "<nav class=\"sw-pagination\">";
    $big = 999999999; // need an unlikely integer
    echo paginate_links( array(
        'base' => str_replace( $big, '%#%', esc_url( get_pagenum_link( $big ) ) ),
        'format' => '?paged=%#%',
        'current' => max( 1, get_query_var('paged') ),
        'total' => $loop->max_num_pages
    ) );
    echo "</nav>";
endif;

wp_reset_query(); 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2016-02-29T07:38:44.073

```
<?php    
add_shortcode('show_all_news', 'show_all_news');
    function show_all_news($atts) {
        $paged = (get_query_var('paged')) ? get_query_var('paged') : 1;
        $limit = 4;
        $offset = ( $limit * $paged ) - $limit;
        $atts['pages'] = $paged; 
        $atts['post-type'] = 'your_custom_post_type'; 
        $atts['orderby'] = 'date'; 
        $atts['order'] = 'DESC';
        $atts['offset'] = $offset; 
        $atts['posts_per_page'] = $limit; 
        $atts['caller_get_posts'] = 1; 

        $result = new WP_Query($atts);
        echo '<div class="news-cont">';  
        if($result->have_posts())
        {
            while ($result->have_posts()) : $result->the_post(); 
                echo '<div class="bg-white news-block">'; 
                echo '<em class="date">'. get_the_date().'</em>' ?>

                <h2><a href="<?php the_permalink(); ?>"><?php the_title(); ?></a></h2>
                <?php 
                echo "<p>";
                the_excerpt(); 
                echo "</p>";
                echo '</div>';
            endwhile;

            ?>
                <ul class="pagination" style="width:100%;">
                    <li id="previous-posts" style="float:left">
                        <?php previous_posts_link( '<< Vorige Pagina', $result->max_num_pages ); ?>
                    </li>
                    <li id="next-posts" style="float:right">
                        <?php next_posts_link( 'Volgende Pagina >>', $result->max_num_pages ); ?>
                    </li>
                </ul>
            <?php 

        }
        echo '</div>'; 
        wp_reset_query();
    } 
```

# iphone - -（IBAction）不工作

> ID：14595712
> 
> 赞同：0
> 
> 时间：2013-01-30T02:28:58.860
> 
> 标签：iphone, xcode, button, ibaction

我正在尝试制作，当按下按钮时，它将转到下一页这里是代码，但没有发生任何事情。我放了断点以查看它是否到达那里并且确实到达了那里。在某些时候它正在工作，然后神奇地发生了一些事情，现在它不再工作了。任何帮助都感激不尽。

```
 //
//  MainViewController.m
//  SimpleApp
//
//  Created by Ruslan on 1/28/13.
//  Copyright (c) 2013 Company. All rights reserved.
//

#import "MainViewController.h"
#import "AppDelegate.h"
#import "EditViewController.h"

@interface MainViewController ()

@end

@implementation MainViewController

// Call this when take photo button is pressed

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.

    // Show Camera

}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.

}

// Call this when ipmport button is pressed

-(IBAction)importButton:(id)sender
{
    EditViewController *editPage = [[EditViewController alloc] initWithNibName:@"EditViewController" bundle:nil];
    [self.navigationController pushViewController:editPage animated:(YES)];
//    EditViewController *editPage = [[EditViewController alloc] initWithNibName:@"EditViewController" bundle:nil];
//    [self.navigationController pushViewController:editPage animated:(YES)];

}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T03:25:06.197

快速解决：

```
[self presentViewController:editPage animated:YES completion:nil]; 
```

或者，您需要考虑如何将您的观点结合在一起。编辑页面是否应该使用按钮从视图中“推送”（所以它会得到一个“返回”箭头）？如果是，那么持有按钮的视图需要位于导航控制器内，这意味着呈现*该*视图的人会将其包装为导航等...

# html - Z 索引/溢出问题？

> ID：14595713
> 
> 赞同：0
> 
> 时间：2013-01-30T02:29:03.117
> 
> 标签：html, css, xhtml

请参考此处链接的上一个问题：[IE7 Subnav，两个定位问题](https://stackoverflow.com/questions/14533096/ie7-subnav-two-positioning-issues)

第二条评论显示了我最初的问题的解决方案，我已经实施了。

现在，我不仅在 IE7 上而且在每个浏览器上都遇到 z-index/overflow 问题。

有问题的网站：http: [//khill.mhostiuckproductions.com/siteLSSBoilerPlate/](http://khill.mhostiuckproductions.com/siteLSSBoilerPlate/)

当悬停在家或附近时，您会发现一个位于正文内容后面的子导航。我似乎尝试过，我能想到的每一个 z-index 和/或溢出组合都无济于事。

这应该很容易，但我只是没有看到解决方案。

**编辑：** 添加`position:absolute and z-index:10`到`.main-nav`. 这解决了除 IE7 之外的所有问题。现在，在 IE7 中，子导航落后于文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T02:45:13.373

您需要将 z-index 赋予父元素。在这种情况下，类“main-nav”。只需添加 position:absolute 和 z-index:10。

我认为这将解决您的问题。

# android - 我能否扩展 InputMethodService 但在 Android 中使用默认键盘？

> ID：14595714
> 
> 赞同：0
> 
> 时间：2013-01-30T02:29:09.837
> 
> 标签：android, android-intent

我正在尝试创建一个仅扩展默认 InputMethodService 的应用程序。如果我这样做，我是否可以使用默认键盘之一，这样我就不需要抓住整个包装并制作自己的键盘？我只想覆盖 InputMethodService 中的一个方法，以便所有键盘都使用这个覆盖的方法。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T02:32:13.550

> 我只想覆盖 InputMethodService 中的一个方法，以便所有键盘都使用这个覆盖的方法。

这是不可能的。

# internet-explorer - 在命令 VBscript 中使用变量

> ID：14595716
> 
> 赞同：0
> 
> 时间：2013-01-30T02:29:22.887
> 
> 标签：internet-explorer, variables, vbscript, concatenation

*我有以下代码：*

```
objIE.Document.All.a_l_1.click 
```

*但我想做这样的事情：*

```
objIE.Document.All. & some_var & .click 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T06:24:39.723

您可以`document.all`按名称访问集合的元素，例如：

```
document.all("a_l_1").click 
```

所以不需要`Execute`or `Eval()`。

**更新：**

这个.HTA：

```
<html>
 <!-- !! http://stackoverflow.com/questions/14595716/using-variables-in-commands-vbscript
 -->
 <head>
  <title>VariableDemo</title>
  <HTA:APPLICATION
    APPLICATIONNAME="VariableDemo"
  >
  <SCRIPT Language="VBScript">
   Sub AClick()
     Report document.all.bttA
     Dim sBtt
     For Each sBtt In Array("bttB", "bttC")
         document.all(sBtt).click
     Next
   End Sub
   Sub XClick(bttX)
     Report bttX
   End Sub
   Sub Report(bttX)
     document.all("txtA").innerText = bttX.innerText & ": " & Now() & vbCrLf & document.all("txtA").innerText
   End Sub
  </SCRIPT>
 </head>
  <body>
   <form>
    <button id="bttA" onclick="AClick">A</button>
    <button id="bttB" onclick="XClick Me">B</button>
    <button id="bttC" onclick="XClick Me">C</button>
    <br />
    <textarea id="txtA" rows="15" cols="40"></textarea>
   </form>
 </body>
</html> 
```

!['输出'](../Images/a243a25f08d59c32aa4090a72cebffab.png)

证明了

```
Report document.all.bttA                - access via named property

document.all("txtA").innerText = ...    - access via string literal

For Each sBtt In Array("bttB", "bttC")  - access via variable
    document.all(sBtt).click 
```

如果月相不干扰，所有“工作”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T02:54:33.287

[评估](http://www.devguru.com/technologies/vbscript/quickref/eval.html)是你想要的。它允许您以字符串形式评估 VBScript，然后当然可以根据需要创建该字符串。例如：

```
Dim myElement, evalResult
myElement = "a_l_1"
evalResult = Eval("objIE.Document.All." & myElement & ".click") 
```

# android - Android：更新文本时 TableRow 中的数字移动

> ID：14595717
> 
> 赞同：0
> 
> 时间：2013-01-30T02:29:23.697
> 
> 标签：android, android-layout, android-tablelayout

我有一个 TableLayout，里面有几个 TableRows。在每一行中，我有两个 TextView：第一个显示一些描述性文本，第二个显示一个数字。例如：

```
| Text |.0.|
| Text2|.0.|
| ...  |.0.| 
```

我有相同权重的 TextViews，重力以行本身和 each 为中心`TextView`，但是，当在应用程序执行期间更改文本时，元素会移动并且不再排列。所以它变成了这样：

```
| Text |..0|
| Text2|..0|
| ...  |..0| 
```

值不再是它们最初的位置。我希望在文本更改时值保持原样（最长的文本不够长以至于接近数字）。我还想保持格式整洁和尽可能低的 SDK 级别（目前为 8）。

示例 xml 代码：

```
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/TableLayout1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal"
    android:weightSum="8"
    tools:context=".Name" >

    <TableRow
        android:id="@+id/tableRow1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:gravity="right" >

        <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="right" />
    </TableRow>

    // This is the start of where the descriptive text and their values are

    <TableRow
        android:id="@+id/tableRow2"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:gravity="center" >

        <TextView
            android:id="@+id/textView2-1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:gravity="center" />

        <TextView
            android:id="@+id/textView2-2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:gravity="center" />
     </TableRow>
... // etc 
```

我尝试过改变权重（分配第一个`TextView`权重 9 和第二个权重 1），但这没有用。无论文本是什么（包括空字符串“”），我都希望所有数字都排成一行，并且在文本更改时不移位。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T03:32:57.193

[我认为您正在文档](http://developer.android.com/reference/android/widget/TableLayout.html#setShrinkAllColumns%28boolean%29)中寻找这个

```
TableLayout.setShrinkAllColumns(boolean shrinkAllColumns)

TableLayout.setStretchAllColumns(boolean stretchAllColumns) 
```

# c# - 估计 GUID 内的数字出现概率

> ID：14595718
> 
> 赞同：9
> 
> 时间：2013-01-30T02:29:30.683
> 
> 标签：c#, algorithm, testing, random, guid

最近我决定研究使用该[`Guid.NewGuid`方法](http://msdn.microsoft.com/en-us/library/system.guid.newguid.aspx)生成的全局唯一标识符的随机性程度（这也是这个问题的范围）。我记录了自己关于[伪随机数](http://en.wikipedia.org/wiki/Pseudorandom_number_generator)、[伪随机性](http://en.wikipedia.org/wiki/Pseudorandomness)的信息，我惊讶地发现甚至还有[放射性衰变产生的随机数](http://www.fourmilab.ch/hotbits)。无论如何，我会让你自己发现更多关于这些有趣讲座的细节。

继续我的问题，关于[GUID](http://en.wikipedia.org/wiki/Globally_unique_identifier)的另一件重要的事情是：

> 包含 MAC 地址和时间的 V1 GUID 可以通过第三组数字的第一个位置的数字“1”来标识，例如 {2F1E4FC0-81FD-11DA-9156-00036A0F876A}。
> 
> V4 GUID 使用后一种算法，它是一个伪随机数。它们在相同的位置有一个“4”，例如 {38A52BE4-9352-453E-AF97-5C3B448652F0}。

用一句话来说，a`Guid`将始终将数字 4（或 1，但超出我们的范围）作为其组成部分之一。

对于我的 GUID 随机性测试，我决定计算一些越来越大的 GUID 集合中的数字数量，并将其与数字出现的统计概率进行比较，`expectedOccurrence`. 或者至少我希望我做到了（请原谅任何统计公式错误，我只是尝试了我最好的猜测来计算值）。我使用了`C#`下面列出的小型控制台应用程序。

```
class Program
{
    static char[] digitsChar = "0123456789".ToCharArray();
    static decimal expectedOccurrence = (10M * 100 / 16) * 31 / 32 + (100M / 32);
    static void Main(string[] args)
    {
        for (int i = 1; i <= 10; i++)
        {
            CalculateOccurrence(i);
        }
    }

    private static void CalculateOccurrence(int counter)
    {
        decimal sum = 0;
        var sBuilder = new StringBuilder();
        int localCounter = counter * 20000;
        for (int i = 0; i < localCounter; i++)
        {
            sBuilder.Append(Guid.NewGuid());
        }

        sum = (sBuilder.ToString()).ToCharArray()
                  .Count(j => digitsChar.Contains(j));

        decimal actualLocalOccurrence = sum * 100 / (localCounter * 32);

        Console.WriteLine(String.Format("{0}\t{1}",
            expectedOccurrence,
            Math.Round(actualLocalOccurrence,3)
            ));
    }
} 
```

上述程序的输出是：

```
63.671875       63.273
63.671875       63.300
63.671875       63.331
63.671875       63.242
63.671875       63.292
63.671875       63.269
63.671875       63.292
63.671875       63.266
63.671875       63.254
63.671875       63.279 
```

因此，即使预计理论发生率是`63.671875%`，实际值也在 附近`~63.2%`。

如何解释这种差异？我的公式有错误吗？算法中还有其他*“晦涩”*的规则`Guid`吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-30T03:42:09.783

在版本 4 GUID 中，第三组中的第一个字符是`4`. 第四组中的第一个字符是`8`、`9`、`a`或中的一个`b`。该规范没有说明如何生成第四组中的第一个字符。这可能会影响你的结果。

如果您想进一步调查，您需要跟踪每个十六进制数字在每个位置出现的频率。我怀疑这会揭示差异，并帮助您确定您的理论估计是否存在偏差，或者伪随机算法是否略有偏差。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-30T04:07:21.173

Jim 明白了（我刚刚发现这个[问题](https://stackoverflow.com/questions/2757910/how-are-net-4-guids-generated)的答案对 v4 guid 的生成产生了同样的影响）。

因此，通过使用这些新知识改变预期方程，您会得到：`((10/16)*30+1+0.5)/32`或`(10M * 100 / 16) * 30 / 32 + (150M / 32)`，大约为 63.28%，与您获得的实验数据非常接近。

# iphone - 导入 IOkit 框架后出现永久错误

> ID：14595722
> 
> 赞同：1
> 
> 时间：2013-01-30T02:29:56.767
> 
> 标签：iphone, objective-c, xcode4, import, iokit

我是这个论坛的新手。我正在尝试在 iphone 中使用光传感器，但唯一允许它的框架是 IOKit。我尝试按照本指南添加框架：

[http://ios-blog.co.uk/tutorials/iokit-an-introduction/](http://ios-blog.co.uk/tutorials/iokit-an-introduction/)

但是 xcode 给我返回了一些错误。

错误列表： http: [//pastebin.com/TMimhsXF](http://pastebin.com/TMimhsXF)

我在 Build Phases 中链接了框架，之后我下载了头文件并放入了搜索路径（/Developer/SDKs/MacOSX10.6.sdk/System/Library/Frameworks/IOKit.framework）路径。

现在，我将框架（框架路径）放在框架文件夹中。但是当我编译它时，xcode 返回了这个错误，如果我尝试删除该框架，问题仍然存在。如何解决这个问题？

# macos - 如果 original 不存在，将创建目录的别名

> ID：14595723
> 
> 赞同：2
> 
> 时间：2013-01-30T02:29:57.633
> 
> 标签：macos, alias, osx-mountain-lion, quartz-composer

我正在制作一个内置在 Quartz Composer 中的软件，我想分发它以进行测试，同时保持安装 - 即使从头开始没有安装 Quartz Composer - 非常容易和简单。

我希望人们能够轻松地将正确的插件和文件拖到正确的目录中（类似于[Tryplex Toolkit](http://code.google.com/p/tryplex/)）：所以我选择了 Mac OSX 中的别名方法。如果别名指向的目录位于正确的位置或至少存在，则此方法可以正常工作。

但是，如果文件夹或目录不存在（例如“Quartz Composer Plugin”文件夹），则别名将被破坏。然后，用户可以手动删除或修复别名以进行补救。但是，如果找不到目录，我希望别名在指定位置创建目录，而不是这个。

如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T02:53:05.693

别名无法做到这一点。

您最好的选择可能是使用 PackageMaker 制作安装程序`.pkg`（它在 Mac Dev Center 中作为“辅助工具”下载的一部分提供）。

# tdd - 少于 3 个朋友的创业软件开发方法论

> ID：14595727
> 
> 赞同：3
> 
> 时间：2013-01-30T02:30:13.300
> 
> 标签：tdd, development-environment, agile, lifecycle

我正在和 2 个朋友开始一个项目，我们都是软件开发人员，我们希望以**安全和正确的方式做事**。这就是为什么我们决定使用一些适合我们需求的软件开发方法。我想知道哪个对我们来说是一个好的起点，这些是变量：

*   我们是一个3人团队。
*   我们是朋友。
*   这是一家新公司。
*   我们希望以**正确**的方式做事。
*   我们正在寻找生成*干净的代码*。

我也想知道可以帮助这些方法的软件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T02:38:54.780

一对夫妇必须以*正确的方式*开始：

1.  持续集成 - 使用持续集成服务器来构建您的代码并运行自动化测试。Jenkins 是一个很棒的开源示例
2.  版本控制——Git 是新潮的（更好的）选择，但 SVN 也可以。FWIW，我工作的组织正在从 SVN 迁移到 Git
3.  编写大量测试 - 从长远来看，它将节省您的时间和头痛
4.  做你感兴趣的事情。

# swi-prolog - swi-prolog：如何打开 readline 交互

> ID：14595728
> 
> 赞同：1
> 
> 时间：2013-01-30T02:30:44.943
> 
> 标签：swi-prolog

**环境：**

*   视窗 7 32 位
*   swi-prolog 6.2.6

swi-prolog 是否支持 readline 交互？
[[手册]](http://www.swi-prolog.org/pldoc/doc_for?object=section%282,%27B.8%27,swi%28%27/doc/Manual/readline.html%27%29%29)说它支持 GNU readline，如何在 windows 7 上打开？
谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T19:19:30.383

您可能需要使用 readlin重新编译[SWI-Prolog 。](http://www.swi-prolog.org)可从其站点获得的适用于 Windows 的 SWI-Prolog 发行版未与其链接。

您可以检查发出此查询的环境：

```
?- current_prolog_flag(readline, X). 
```

在我的情况下（Windows 7 上的 SWI）产生`X = false`.

# sql - 选择一个范围内只出现一个值的记录

> ID：14595737
> 
> 赞同：2
> 
> 时间：2013-01-30T02:32:22.957
> 
> 标签：sql

每周我都会从我的茄子农场向我的各种客户发送大量茄子。客户通常每周购买相同数量的茄子，但偶尔数量会有所不同。由于我有超过 25,000,000 名客户（大农场），因此我想将他们的购买信息压缩到一个更易于管理的表格中，以用于我正在处理的报告。这是我的源数据的样子 -

CustAcct -------------- PurchaseWeekEndDate ----- EggplantsPurchased

```
 123                  1/1/2012                    50

 123                  1/8/2012                    50

 123                  1/15/2012                   50

 123                  1/22/2012                   60

 123                  1/29/2012                   50

 123                  2/5/2012                    50 
```

我希望我的新表中的数据看起来像这样 -

CustAcct------- StartRangePWEnd Date----- EndRangePWEndDate ------EggplantsPurchased

```
 123            1/1/2012           1/15/2012                50

 123            1/22/2012          1/22/2012                60

 123            1/29/2012          2/5/2012                 50 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T02:41:04.547

这是一个比较难的问题。要解决它，您需要识别相同的订单组。您可以使用相关子查询来执行此操作，以查找每个拥有不同数量茄子的客户的下一个日期。这用作组标识符。

一旦你有了它，剩下的就是聚合：

```
select CustAcct, min(PurchaseWeekEndDate), max(PurchaseWeekEndDate), EggplantsPurchased
from (select t.*,
             (select min(PurchaseWeekEndDate)
              from t t2
              where t.CustAcct = t2.CustAcct and t.EggplantsPurchased <> t2.EggplantsPurchased and t2.PurchaseWeekEndDate > t.PurchaseWeekEndDate
             ) as nextDate
      from t
     ) t
group by CustAcct, nextDate, EggplantsPurchased 
```

而且，既然世界上没有茄子农场拥有 25,000,000 名顾客，那么这个问题的真正本质是什么？

# c# - .Net 多个客户端和中央服务器之间的数据同步

> ID：14595738
> 
> 赞同：3
> 
> 时间：2013-01-30T02:32:30.330
> 
> 标签：c#, .net, sql-server, multi-tenant

我的客户是一家金融服务提供商，他们的软件部署在 500 多个客户上。

他们的应用程序是用 C# 编写的，并使用 SQL Server 作为数据库后端。他们希望从所有客户数据库中收集数据，并将少量数据发回给客户。有几个要求：

1.  数据同步针对 500 多个客户端，在其软件的 7 个不同版本中具有 7 个略有不同的数据库模式

2.  随着时间的推移，他们的软件可能会有不同模式的新版本，不能因为等待更新此数据同步机制而延迟。基本上，数据同步需要灵活以支持任何模式并从中央位置控制，而不是对其应用程序的发布进行更改

3.  需要用 .Net 编写，因为他们所有的软件都在 Windows 上运行

4.  可以有一个特殊的数据同步客户端部署在一起，它可以访问每个客户端的 SQL Server 数据库 - 但不能保证经常更新客户端。

是否已经有一个框架（Microsoft Sync Framework 除外，它在数据库上使用触发器）可以帮助开发这个数据同步系统？

是否有任何关于多租户系统或数据同步的好书/文章可供阅读，它们为如何创建这样的系统提供了一些要点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T05:16:40.017

不确定是否存在除同步之外的现有框架，我有类似的要求，但由于我没有使用 mssql，所以无法使用 MS Sync。

这就是我所做的，一些自定义代码，

对架构更改做出一些假设意味着

*   可以添加新字段/属性
*   现有字段不会被删除（即您不必迁移现有数据）
*   客户端和服务器上的时钟使用 UTC 并同步。

您可以创建具有以下属性的模式历史表，

*   表名
*   版本
*   上次同步日期

然后所有需要同步的表都有一个日期更改和最后更改的用户属性，例如

*   项目 1，2013 年 1 月 1 日，服务器
*   项目 2，2013 年 2 月 2 日，客户 1

同步时，

1.  检查架构表，如果客户端的版本 < 服务器版本 ==> 更新架构（运行更新架构脚本）
2.  获取服务器更新，将新数据推送到客户端，其中所有者 = 服务器和 datechanged > clientchangedate
3.  将每个表的同步的最后更改日期与每个表的架构表的最后同步日期进行比较

    如果更改日期 > 同步日期并且用户 = 客户端 => 同步到服务器（更新或插入）

如果您想复制它，还可以查看 ms 同步概念[http://msdn.microsoft.com/en-us/sync/bb821992.aspx 。](http://msdn.microsoft.com/en-us/sync/bb821992.aspx)

# ruby-on-rails - 有什么方法可以让 Ember.js 路由器中的路由有多个 url？

> ID：14595740
> 
> 赞同：-2
> 
> 时间：2013-01-30T02:32:53.567
> 
> 标签：ruby-on-rails, ember.js

就像 Rails 路线中的“匹配”。

```
 match '/signup',  :to => 'users#new' 
```

我喜欢清理我的网址。

当我的用户必须注册时，我不喜欢公开#/users/new URL，而只公开/#/signup

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T09:38:05.700

您可以指定路由的`Users/New`路径：

```
this.route('new', { path: '/signup' }); 
```

# c++ - C++ StackOverflowException 初始化结构超过 63992

> ID：14595741
> 
> 赞同：1
> 
> 时间：2013-01-30T02:33:21.020
> 
> 标签：c++, struct, stack-overflow

“由于 StackOverflowException 而终止进程”是我在运行下面的代码时收到的错误。如果我将 63993 更改为 63992 或更小，则没有错误。我想将结构初始化为 100,000 或更大。

```
#include <Windows.h>
#include <vector>

using namespace std;

struct Point
{
    double x;
    double y;
};

int main()
{
Point dxF4struct[63993]; // if < 63992, runs fine, over, stack overflow
Point dxF4point;
vector<Point> dxF4storage;

for (int i = 0; i < 1000; i++) {
dxF4point.x = i;    // arbitrary values             
dxF4point.y = i;
dxF4storage.push_back(dxF4point);
}

for (int i = 0; i < dxF4storage.size(); i++) {
    dxF4struct[i].x = dxF4storage.at(i).x;
    dxF4struct[i].y = dxF4storage.at(i).y;
}

Sleep(2000);
return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T02:44:16.713

您只是用完了堆栈空间-它不是无限的，因此您必须注意不要用完。

三个明显的选择：

1.  利用`std::vector<Point>`
2.  使用全局变量。
3.  使用动态分配 - 例如`Point *dxF4struct = new Point[64000]`。最后别忘了打电话`delete [] dxF4struct;`。

我按照我认为更可取的顺序列出了上述内容。

[从技术上讲，在其他人指出之前，是的，您可以增加堆栈，但这实际上只是将问题提升到其他地方，如果您继续这样做并将大型结构放在堆栈上，您将用完堆栈最终无论你做多大的堆栈]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T02:41:23.823

```
Point dxF4struct[63993]; // if < 63992, runs fine, over, stack overflow 
```

那条线，你在堆栈上分配你所有的 Point 结构。我不确定堆栈的确切内存大小，但默认值约为 1Mb。由于您的结构是 16 字节，并且您正在分配 63393，因此您有 16 字节 * 63393 > 1Mb，这会导致堆栈溢出（有趣的是在堆栈溢出时发布堆栈溢出...）。

所以你可以告诉你的环境分配更多的堆栈空间，或者在堆上分配对象。

如果您在堆上分配 Point 数组，您应该能够轻松分配 100,000 个（假设这不是在一些内存小于 1Mb 的嵌入式 proc 上运行）

```
Point *dxF4struct = new Point[63993]; 
```

正如评论者所写，重要的是要知道，如果您在堆上“新建”内存，则“删除”内存是您的责任。由于这使用了数组`new[]`，因此您需要使用相应的数组`delete[]`运算符。现代 C++ 有一个智能指针，它有助于管理数组的生命周期。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T02:42:39.670

增加堆栈大小。在 Linux 上，您可以使用[ulimit](http://www.manpagez.com/man/1/ulimit/)来查询和设置堆栈大小。在 Windows 上，堆栈大小是可执行文件的一部分，可以在编译期间设置。

如果您不想更改堆栈大小，请使用`new`运算符在堆上分配数组。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-30T02:43:10.143

好吧，您遇到了堆栈溢出，因此分配的堆栈对于这么多数据来说太小了。您可能会告诉您的编译器为您的可执行文件分配更多空间，尽管我建议只在堆上分配它（std::vector，您已经在使用它）。

# c++ - 如何让标签调度与字符串一起使用？

> ID：14595745
> 
> 赞同：1
> 
> 时间：2013-01-30T02:33:54.800
> 
> 标签：c++, templates, c++11

我需要帮助让这段代码的*损坏*部分正常工作。

**如何根据字符串标记调度两个函数（返回不同的值类型）？**

如果可以简化整体代码以使用字符串进行调度，请提出建议。泰。

要求：

1.  基于字符串的调度
2.  矩形重载需要返回int，而Circle重载需要返回std::string
3.  从 Rectangle_Type 到 int 和 Circle_Type 到 std::string 的映射是固定的并且在编译时是已知的。我的部分问题是 std::map 是一个运行时构造：我不知道如何使 std::string 到标记映射一个编译时构造。
4.  如有必要，运行时解析是可以的：但是，调度必须允许基于解析到的枚举/类型的不同返回类型。

**代码**

```
#include <map>
#include <string>
#include <iostream>

struct Shape    { };
struct Rectangle_Type : public Shape { using value_type=int;         };
struct Circle_Type    : public Shape { using value_type=std::string; };

Rectangle_Type Rectangle;
Circle_Type    Circle;

static std::map<std::string,Shape*> g_mapping =
{
    { "Rectangle", &Rectangle },
    { "Circle",    &Circle    }
};

int tag_dispatch( Rectangle_Type )
{
    return 42;
}

std::string tag_dispatch( Circle_Type )
{
    return "foo";
}

int
main()
{
    std::cerr << tag_dispatch( Circle    ) << std::endl;   // OK
    std::cerr << tag_dispatch( Rectangle ) << std::endl;   // OK

#define BROKEN
#ifdef BROKEN
    std::cerr << tag_dispatch( (*g_mapping["Rectangle"]) ) << std::endl;
    std::cerr << tag_dispatch( (*g_mapping["Circle"])    ) << std::endl;
#endif
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T02:38:02.520

除非 C++11 对此进行了更改。问题是您正在取消引用一个`Shape*`指针，这意味着生成的数据类型 ( `Shape&`) 没有有效的`tag_dispatch`.

你可以做类似的事情`g_mapping["Rectangle"]->tag_dispatch()`。或者更干净地重写如下。

```
std::string tag_dispatch( Shape& shape)
{
    return shape->tag_dispatch();
} 
```

这样您就可以支持`Shape`具有相同接口的非对象。两者都需要您将`tag_dispatch`其作为虚拟功能`Shape`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T02:39:34.127

C++ 没有动态调度。这可能是您期望发生的事情。您可以使用 dynamic_cast 模拟它，但这很慢且不推荐。不过，您可以使用为该类型返回枚举的虚函数。

```
class base
{
public:
    virtual ~base() // Don't forget the virtual destructor if you want to inherit from it!
    {}

    enum type
    {
        a, 
        b, 
    };

    virtual type get_type() const = 0;
};

class a : public base
{
public:
    virtual type get_type()
    {
        return base::type::a;
    }
};

class b : public base
{
public:
    virtual type get_type()
    {
        return base::type::b;
    }
}; 
```

# opengl - OpenGL水反射

> ID：14595748
> 
> 赞同：1
> 
> 时间：2013-01-30T02:34:15.390
> 
> 标签：opengl, stencil-buffer

我正在尝试将森林中的一堆树木反射到附近的湖中。我按照所有标准步骤使用模板缓冲区绘制反射。但是“水”似乎不允许看到下面的物体。这是我的功能：`draw_sea()`- 绘制反映的计划`drawFigTree(fig_tree)`- 绘制下面的树木。问题出在哪里？

```
void draw_mirror() 
{
    glEnable(GL_STENCIL_TEST);
    //glColorMask(0, 0, 0, 0);
    glDisable(GL_DEPTH_TEST);
    glStencilFunc(GL_ALWAYS, 1, 0xFFFFFFFF);
    glStencilOp(GL_REPLACE, GL_REPLACE, GL_REPLACE);
    glDisable(GL_LIGHTING);
    glEnable(GL_BLEND);
    glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);

    draw_sea();
    glDisable(GL_BLEND);
    glEnable(GL_LIGHTING);
    glColorMask(GL_TRUE, GL_TRUE, GL_TRUE, GL_TRUE);
    glEnable(GL_DEPTH_TEST);
    glStencilFunc(GL_EQUAL, 1, 0xFFFFFFFF);
    glStencilOp(GL_KEEP, GL_KEEP, GL_KEEP);
    glPushMatrix();
    glTranslatef(0.0, SEA_LEVEL, 0.0);
    glEnable(GL_CLIP_PLANE0);
    glClipPlane(GL_CLIP_PLANE0, clip_plane0 );
    glPopMatrix();
    glPushMatrix();
    glTranslatef(-25.0, 2*(-1), 0.0);
    glScalef(1.0, -1.0, 1.0);

    drawFigTree(fig_tree);
    glPopMatrix();
    glDisable(GL_CLIP_PLANE0);
    glDisable(GL_STENCIL_TEST);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T02:43:56.740

混合不能与深度测试一起使用。为了使混合工作，您必须对可见表面进行远近分类。在水的情况下，您必须先绘制反射（这就像在反射场景中“穿过”水面）然后是水。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T03:31:10.877

```
 glDisable(GL_DEPTH_TEST); 
```

您关闭深度测试是正确的。但是您*还必须* [关闭深度*写入*](http://www.opengl.org/wiki/GLAPI/glDepthMask)；否则，在渲染反射几何体时，您将污染深度缓冲区。

```
glDepthMask(GL_FALSE); 
```

**注意：**不要忘记在渲染湖后重新打开深度写入。

# cuda - 在 cuBLAS howto 中转置矩阵乘法

> ID：14595750
> 
> 赞同：4
> 
> 时间：2013-01-30T02:34:50.053
> 
> 标签：cuda, matrix-multiplication, transpose, blas, cublas

问题很简单：我有两个矩阵 A 和 B，它们是 M 乘 N，其中 M >> N。我想先对 A 进行转置，然后将其乘以 B (A^T * B) 到将其放入 C，即 N 乘 N。我已经为 A 和 B 设置了所有内容，但是如何正确调用 cublasSgemm 而不会返回错误的答案？

我知道 cuBlas 有一个 cublasOperation_t 枚举用于预先转置事物，但不知何故我并没有正确使用它。我的矩阵 A 和 B 以行优先顺序排列，即 [ row1 ][ row2 ][ row3 ]..... 在设备内存中。这意味着要将 A 解释为 A 转置，BLAS 需要知道我的 A 是按列优先顺序排列的。我当前的代码如下所示：

```
float *A, *B, *C;
// initialize A, B, C as device arrays, fill them with values
// initialize m = num_row_A, n = num_row_B, and k = num_col_A;
// set lda = m, ldb = k, ldc = m;
// alpha = 1, beta = 0;
// set up cuBlas handle ...

cublasSgemm(handle, CUBLAS_OP_T, CUBLAS_OP_N, m, n, k, &alpha, A, lda, B, ldb, &beta, C, ldc); 
```

我的问题：

我是否正确设置了 m、k、n？

lda、ldb、ldc 呢？

谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-30T03:51:47.793

由于 cuBLAS 总是假设矩阵以列为主。您可以先使用[cublas_geam()](http://docs.nvidia.com/cuda/cublas/index.html#topic_9_1)将矩阵转置为 colum-major ，或者

您可以将存储在行优先的矩阵 A 视为存储在列优先的新矩阵 AT。矩阵 AT 实际上是 A 的转置。对于 B 做同样的事情。然后你可以计算存储在主要列中的矩阵 C`C=AT * BT^T`

```
float* AT = A;
float* BT = B; 
```

前导维度是与存储相关的参数，无论您是否使用转置标志，它都不会改变`CUBLAS_OP_T`。

```
lda = num_col_A = num_row_AT = N;
ldb = num_col_B = num_row_BT = N;
ldc = num_row_C = N; 
```

`m`在 cuBLAS GEMM 例程中`n`是结果矩阵 C 的 #rows 和 #cols，

```
m = num_row_C = num_row_AT = num_col_A = N;
n = num_col_C = num_row_BT = num_col_B = N; 
```

`k`是 A^T 和 B 的共同维度，

```
k = num_col_AT = num_row_B = M; 
```

然后你可以调用 GEMM 例程

```
cublasSgemm(handle, CUBLAS_OP_N, CUBLAS_OP_T, m, n, k, &alpha, AT, lda, BT, ldb, &beta, C, ldc); 
```

`CT = BT * AT^T`如果您希望矩阵 C 以行为主存储，您可以使用以下公式计算以列为主存储的 CT

```
cublasSgemm(handle, CUBLAS_OP_N, CUBLAS_OP_T, n, m, k, &alpha, BT, ldb, AT, lda, &beta, CT, ldc); 
```

请注意，您不必交换`m`，`n`因为在这种情况下 C 是方阵。

# xpages - xpages 文档永远不会切换到编辑模式

> ID：14595760
> 
> 赞同：1
> 
> 时间：2013-01-30T02:35:42.903
> 
> 标签：xpages

我尝试使用简单操作来切换模式，简单操作来更改模式以进行编辑，让视图链接在编辑模式下打开文档。实际上没有任何东西将文档字段置于可编辑状态。文档上没有任何作者字段，我拥有数据库的管理员访问权限。这是经典笔记客户端应用程序到 xpages UI 的应用程序更新。所以我正在处理现有的文件。我完全不知道该看什么。浏览器或服务器控制台中的错误为零。我可以在笔记客户端中很好地编辑文档。

如果我创建一个测试应用程序并使用相同的方法使用上述方法将文档置于编辑模式，它就可以正常工作。但不能用现有的xpage文件使用。您可以就寻找的内容提供任何指导，我们将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T13:24:29.507

按照 Sven 的建议检查 ACL 和您的作者字段以及 Internet 访问

# c# - 在 windows8 中更改为捕捉视图时如何将 GridView 转换为 ListView

> ID：14595762
> 
> 赞同：0
> 
> 时间：2013-01-30T02:35:59.503
> 
> 标签：c#, xaml, listview, gridview, windows-8

在全屏横向视图中，我有一个Gridview控件来显示数据，我想在将视图更改为捕捉时将Gridview转换为Listview，研究了半天，仍然没有找到文章或线程来介绍这。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T03:13:03.890

您在 vs2012 (GroupedItemsPage.xaml) 中看到了 Windows 8 应用商店示例吗？

```
<VisualStateManager.VisualStateGroups>

            <!-- Visual states reflect the application's view state -->
            <VisualStateGroup x:Name="ApplicationViewStates">
                <VisualState x:Name="FullScreenLandscape"/>
                <VisualState x:Name="Filled"/>

                <!-- The entire page respects the narrower 100-pixel margin convention for portrait -->
                <VisualState x:Name="FullScreenPortrait">
                    <Storyboard>
                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="backButton" Storyboard.TargetProperty="Style">
                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource PortraitBackButtonStyle}"/>
                        </ObjectAnimationUsingKeyFrames>

                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="itemGridView" Storyboard.TargetProperty="Padding">
                            <DiscreteObjectKeyFrame KeyTime="0" Value="96,137,10,56"/>
                        </ObjectAnimationUsingKeyFrames>
                    </Storyboard>
                </VisualState>

                <!--
                    The back button and title have different styles when snapped, and the list representation is substituted
                    for the grid displayed in all other view states
                -->
                <VisualState x:Name="Snapped">
                    <Storyboard>
                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="backButton" Storyboard.TargetProperty="Style">
                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource SnappedBackButtonStyle}"/>
                        </ObjectAnimationUsingKeyFrames>
                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="pageTitle" Storyboard.TargetProperty="Style">
                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource SnappedPageHeaderTextStyle}"/>
                        </ObjectAnimationUsingKeyFrames>

                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="itemListView" Storyboard.TargetProperty="Visibility">
                            <DiscreteObjectKeyFrame KeyTime="0" Value="Visible"/>
                        </ObjectAnimationUsingKeyFrames>
                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="itemGridView" Storyboard.TargetProperty="Visibility">
                            <DiscreteObjectKeyFrame KeyTime="0" Value="Collapsed"/>
                        </ObjectAnimationUsingKeyFrames>
                    </Storyboard>
                </VisualState>
            </VisualStateGroup>
        </VisualStateManager.VisualStateGroups> 
```

# iphone - 为什么 MPMoviePlayerController 只在 iPhone 中显示这些消息？

> ID：14595763
> 
> 赞同：1
> 
> 时间：2013-01-30T02:36:02.510
> 
> 标签：iphone, ios, ipad, mpmovieplayercontroller

> **可能重复：**
> [MPMoviePlayerViewController 生成大量错误](https://stackoverflow.com/questions/14224476/mpmovieplayerviewcontroller-generating-lots-of-errors)

我`MPMoviePlayerController`用来播放本地视频。该应用程序在 iPad 上运行良好，但它只会在 iPhone 中注销一些消息，尽管它也运行良好。这些消息是什么意思？我想知道如果我发布它是否会被苹果商店拒绝？

日志是这样的：

```
2013-01-30 10:25:49.586 XX[1744:907] [MPAVController] Autoplay: Disabling autoplay for pause
2013-01-30 10:25:49.587 XX[1744:907] [MPAVController] Autoplay: Disabling autoplay
2013-01-30 10:25:49.590 XX[1744:907] [MPAVController] Autoplay: Disabling autoplay for pause
2013-01-30 10:25:49.591 XX[1744:907] [MPAVController] Autoplay: Disabling autoplay
2013-01-30 10:25:49.615 XX[1744:907] [MPAVController] Autoplay: Enabling autoplay
2013-01-30 10:25:49.623 XX[1744:907] [MPAVController] Autoplay: Likely to keep up or full buffer: 0
2013-01-30 10:25:49.624 XX[1744:907] [MPAVController] Autoplay: Skipping autoplay, not enough buffered to keep up.
2013-01-30 10:25:49.625 XX[1744:907] [MPAVController] Autoplay: Likely to keep up or full buffer: 0
2013-01-30 10:25:49.626 XX[1744:907] [MPAVController] Autoplay: Skipping autoplay, not enough buffered to keep up.
2013-01-30 10:25:49.628 XX[1744:907] [MPAVController] Autoplay: Enabling autoplay
2013-01-30 10:25:49.649 XX[1744:907] [MPCloudAssetDownloadController] Prioritization requested for media item ID: 0
2013-01-30 10:25:50.193 XX[1744:907] [MPAVController] Autoplay: Likely to keep up or full buffer: 1
2013-01-30 10:25:50.195 XX[1744:907] [MPAVController] Autoplay: Enabling autoplay
2013-01-30 10:25:50.198 XX[1744:907] [MPAVController] Autoplay: _streamLikelyToKeepUp: 0 -> 1
2013-01-30 10:25:59.513 XX[1744:907] [MPAVController] Autoplay: Disabling autoplay for pause
2013-01-30 10:25:59.514 XX[1744:907] [MPAVController] Autoplay: Disabling autoplay
2013-01-30 10:25:59.516 XX[1744:907] [MPAVController] Autoplay: Disabling autoplay
2013-01-30 10:25:59.628 XX[1744:907] [MPAVController] Autoplay: _streamLikelyToKeepUp: 1 -> 1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T02:56:52.743

我也收到了这些错误，但除了这些错误之外，我的视频播放正常

播放器。我认为没有解决方案。如果您的视频运行良好，请忽略这些

警告或错误。在此链接中查看我的答案：[MPMoviePlayerViewController 生成大量错误](https://stackoverflow.com/questions/14224476/mpmovieplayerviewcontroller-generating-lots-of-errors/14228396#14228396)

# asp.net-web-api - Web API 嵌套路由未按预期工作

> ID：14595764
> 
> 赞同：4
> 
> 时间：2013-01-30T02:36:06.833
> 
> 标签：asp.net-web-api, asp.net-web-api-routing

我在嵌套 Web API 路由设置方面遇到了困难。

给定一个路由配置：

```
config.Routes.MapHttpRoute(
    name: "UsersGroups",
    routeTemplate: "api/users/{userID}/groups/{groupID}",
    defaults: new { controller = "UsersGroups", groupID = UrlParameter.Optional }
); 
```

和控制器动作如下：

```
public AuthGroup Get(long userID, int groupID)
{
     //Get specific group here
}

public IEnumerable<AuthGroup> Get(long userID)
{
    //get all groups for user here
} 
```

调用此路由`/api/users/1528/groups`会出现此错误：

> 参数字典包含用于方法in`groupID`的不可为空类型的参数的空条目。可选参数必须是引用类型、可空类型或声明为可选参数。`System.Int32``AuthGroup Get(Int64, Int32)``UsersGroupsController`

我期待它使用单个 long 参数来获取动作，但显然出于某种原因，它忽略了这一点并直接针对具有最多参数的那个。

根据 MS 提供的关于 Web API 如何解释路由的信息：[http](http://www.asp.net/web-api/overview/web-api-routing-and-actions/routing-and-action-selection) ://www.asp.net/web-api/overview/web-api-routing-and-actions/routing-and-action-selection我认为我是什么have 应该是正确的，但显然它并没有像它应该的那样工作。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T02:58:40.957

您应该使用`RouteParameter.Optional`（来自 Web API），而不是`UrlParameter.Optional`（来自 ASP.NET MVC）。

那时一切都会如你所愿。

更多信息：

*   `UrlParameter.Optional`- [http://msdn.microsoft.com/en-us/library/system.web.mvc.urlparameter.optional(v=vs.108).aspx](http://msdn.microsoft.com/en-us/library/system.web.mvc.urlparameter.optional(v=vs.108).aspx)

*   `RouteParameter.Optional`- [http://msdn.microsoft.com/en-us/library/system.web.http.routeparameter.optional(v=vs.108).aspx](http://msdn.microsoft.com/en-us/library/system.web.http.routeparameter.optional(v=vs.108).aspx)

# solr - 如何通过查询字符串在 solr 中选择多个值？

> ID：14595767
> 
> 赞同：12
> 
> 时间：2013-01-30T02:36:21.647
> 
> 标签：solr

比方说，例如我需要搜索一些 id，并通过查看 solr/admin 页面，在“Make a Query”输入表单中，有一个

```
*:* 
```

如果每当我触发搜索按钮时它只适用于一个查询，我将如何搜索多个值？

我试过

```
id:123,413,2232,2323 
```

它没有用..但是这个单个查询有效

```
id:123 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2016-08-30T12:59:04.143

Solr 自动使用 OR 作为运算符，因此最短的版本是：

```
id:(123 413 2232 2323) 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-01-30T02:56:05.710

请查看 Solr wiki 上的[SolrQuerySyntax](https://lucene.apache.org/solr/guide/6_6/the-standard-query-parser.html#the-standard-query-parser)页面，了解 Solr 查询语法的一些示例。

鉴于您的示例，您可以通过以下几种方式查询：

1.  `id:[1 TO 4]`
2.  `(id:1 OR id:2 OR id:3 OR id:4)`

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-12-30T15:57:01.470

我会稍微修改第二个选项：

```
id:(ONE OR TWO OR THREE) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-08-06T06:47:18.850

只有两种方法可以实现它：

1.  `id: 123 OR id:413 OR id:2232 OR id:2323`

2.  `id:(123 413 2232 2323)`

两者都相同，第二个是速记。

# javascript - 动态绑定带有标签的复选框

> ID：14595769
> 
> 赞同：0
> 
> 时间：2013-01-30T02:36:42.690
> 
> 标签：javascript, checkboxlist

我想使用其 id 动态绑定复选框及其各自的标签。下面，正在动态创建输入框。我想使用 id 将它们与它们各自的标签绑定，如代码中所示。

```
 <span wicket:id="tagList" style="width: 30%;"> <input
                wicket:id="check" type="checkbox" id="check1" class="checker"
                style="float: left; margin-right: 15pt;"><em> <label
                    for="check1" wicket:id="tag" style="float: left;" />
            </em><br></br>
            </span> 
```

我怎样才能使用javascript来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T02:58:15.333

我为你创建了简单的 JS，[http://jsfiddle.net/7V8Gd/3/](http://jsfiddle.net/7V8Gd/3/)

希望这足以让你开始

```
<input onclick="onCheckbox(this, '1');" type="checkbox" id="check_1" class="checker">
<label id="label_1"></label>
<input onclick="onCheckbox(this, 2);" type="checkbox" id="check_2" class="checker">
<label id="label_2"></label>
<script>
    function onCheckbox(chkbox, cid){
        if (chkbox.checked) {
    document.getElementById("label_" + cid).innerHTML='yay';
            }            
            else{
    document.getElementById("label_" + cid).innerHTML='no yay';
            }            
    }
    </script> 
```

# gdb - gdb.lookup_type 使用 boost::multi_index_container 返回无效类型

> ID：14595770
> 
> 赞同：2
> 
> 时间：2013-01-30T02:36:52.683
> 
> 标签：gdb, boost-multi-index, pretty-print

我在 RHEL 6 上使用 gdb-7.5，用 gcc-4.7.2 编译。我正在尝试编写一个漂亮的打印机，但`boost::multi_index`遇到了`gdb.lookup_type`.

下面给定的代码具有以下声明。

```
TestSet ts; 
```

现在，在 gdb 命令提示符下，我正在执行以下操作（在 python 中）

```
gdb >> python

set_value = gdb.parse_and_eval('ts')
set_type = set_value.type.strip_typedefs()
t1 = set_type.template_argument(0) # Test
t2 = set_type.template_argument(1) # boost::mult_index::indexed_by ....
t3 = set_type.template_argument(2) # std::allocator<Test>
node_type = gdb.lookup_type('boost::multi_index::detail::multi_index_node_type < %s, %s, %s >::type' % (t1, t2, t3))
base = gdb.lookup_type ('boost::multi_index::detail::multi_index_base_type < %s, %s, %s >::type' % (t1, t2, t3))
allocator = gdb.lookup_type('boost::detail::allocator::rebind_to<%s, %s>::type' % (t3, node_type))
end 
```

我得到了正确的 node_type 。但是 gdb 无法获取 'base' 和 'allocator' 的类型。

基数错误

```
Traceback (most recent call last):
  File "<string>", line 1, in <module>
gdb.error: No type named boost::detail::multi_index_base_type < Test,
boost::multi_index::indexed_by<boost::multi_index::ordered_unique<boost::multi_index::member<Test,
std::basic_string<char, std::char_traits<char>, std::allocator<char>
>, &Test::s>, mpl_::na, mpl_::na>
, boost::multi_index::ordered_unique<boost::multi_index::tag<int,
mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na,
mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na,
mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na>, boost::multi_i
ndex::member<Test, int, &Test::i>, mpl_::na>,
boost::multi_index::ordered_unique<boost::multi_index::member<Test,
float, &Test::f>, mpl_::na, mpl_::na>, mpl_::na, mpl_::na, mpl_::na,
mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na,
mpl_::na, mpl_::na
, mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na>,
std::allocator<Test> >::type.
Error while executing Python code. 
```

以及“分配器”的类似错误。
由于`boost::multi_index_container`派生自 `boost::detail::multi_index_base_type`，我期望 gdb 会返回相同的有效类型。

我在这里错过了什么吗。?
我在 gdb 邮件列表中发布了相同的问题，但没有答案。

编码：

```
#include <string>
using namespace std;

#include <boost/multi_index_container.hpp>
#include <boost/multi_index/member.hpp>
#include <boost/multi_index/key_extractors.hpp>
#include <boost/multi_index/ordered_index.hpp>
#include <boost/multi_index/hashed_index.hpp>
#include <boost/multi_index/sequenced_index.hpp>
#include <boost/multi_index/random_access_index.hpp>

using namespace boost::multi_index;
using namespace boost;

struct Test
{ 
  Test (const string& ps, int pi, float pf)
    : s(ps), i(pi), f(pf)
  {
  }

  string s;
  int i;
  float f;
};

typedef multi_index_container <
  Test,
  indexed_by <
    ordered_unique < member <Test, string, &Test::s> >,
    ordered_unique < tag<int>,  member <Test, int, &Test::i> >,
    ordered_unique < member <Test, float, &Test::f> >
    >
  > TestSet;

int main(void)
{ 
  TestSet ts;
  ts.insert(Test("ABCDEF", 10, 1.0f));
  ts.insert(Test("Some String", 5, 2.0f));
  ts.insert(Test("PQRXYZ", 7, 0.3f));

  return 0;
} 
```

苏里亚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-23T17:46:45.967

我会首先尝试找出这种类型是否确实存在。一种方法是挖掘“readelf -wi”输出。这将为您的程序转储 DWARF 信息。但是，它可能非常大，因此可能需要一段时间。

如果它存在于 DWARF 中，那么我将调试 gdb 以查看出现了什么问题。

如果它不在 DWARF 中，则可能是编译器错误，或者只是错误的编译参数。

# php - 让作曲家更新从 git repo 获取最新版本

> ID：14595772
> 
> 赞同：20
> 
> 时间：2013-01-30T02:37:02.073
> 
> 标签：php, git, composer-php

我正在尝试摆脱 git 子模块以在我的团队中进行开发。最重要的原因是当团队成员在子模块中提交更改，但忘记推送到源，但确实在“根”项目中推送了对这个新提交的引用时，源被破坏，其他开发人员得到`reference is not a tree`错误。如果有问题的开发人员在回家之前推送，并且不是树的引用指向开发人员笔记本电脑上的提交，这可能是有问题的，笔记本电脑在他的包里，在某处的火车上。

我正在尝试用 composer 替换 git 子模块。我的理由是，如果 git 不知道我的依赖项，这些依赖项就不能破坏 repo。我知道如何从 packagist 添加包，并且我还设法将我们自己的 git 存储库添加到 composer，主要是在[这篇博](http://www.craftitonline.com/2012/03/how-to-use-composer-without-packagist-like-a-newbie/)文的帮助下。

问题，也是难题的最后一块，是我们的依赖项是我们正在积极处理的 git 存储库。如果我将更新推送到我们的一个依赖项，我希望开发人员的本地副本在他们执行`composer update`. 我得到的最接近的是为对依赖项的每次更改创建一个标签，然后用这个新标签的 id 更新我的 composer.json。

我想知道的是，是否有办法让作曲家总是检查某个分支的最新提交，或者，如果这不可能，当我执行`composer update`. 我真的不介意标记，我只是不想在开发过程中不断更新 composer.json。

我用于测试的作曲家文件：

```
{
    "config": {
        "vendor-dir": "app/vendor"
    },
    "repositories":
    [
        {
            "type": "package",
            "package": {
                "name": "wkjagt/seagull",
                "version": "1.0",
                "source": {
                    "url": "git@github.com:wkjagt/Seagull.git",
                    "type": "git",
                    "reference": "master"
                }
            }
        }
    ],
    "require": {
        "wkjagt/seagull": "1.0.*"
    }
} 
```

我期待`1.0.*`从 1.0 开始采用最新的标签，但是一旦作曲家已经有了 1.0.1，如果我创建它就不会得到 1.0.2。对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-30T09:17:21.543

如果您不必在存储库部分中单独指定每个版本，则需要将`composer.json`文件添加到**wkjagt/Seagull**并包含这样的包：

```
{
   "type": "vcs",
   "url": "https://github.com/wkjagt/Seagull"
}, 
```

然后 Composer 可以阅读您的标签并将它们视为版本。如果您总是想要获取最新版本，则需要您的包带有 dev 标志：

```
"require": {
    "wkjagt/seagull": "@dev"
} 
```

# asp.net - 当我选中或取消选中 ASP.Net 中的复选框时，页面回发后向上滚动

> ID：14595773
> 
> 赞同：0
> 
> 时间：2013-01-30T02:37:10.330
> 
> 标签：asp.net, checkbox, updatepanel, autopostback

我的页面底部有一个**复选框**`Autopostback`，其属性设置为**`true`**

当我选中或取消选中该**复选框**时，滚动条会向上而不是停留在当前位置，如何防止 ASP.Net 中出现此类问题？

我搜索并尝试了一些解决方案，但它对我不起作用..这是我做的一些解决方案..

**我试试这个javascript ..但它没有效果..**

```
<script type="text/javascript">
        var xPos, yPos;
        var prm = Sys.WebForms.PageRequestManager.getInstance();

        function BeginRequestHandler(sender, args) {
            if ($get('<%= Panel1.ClientID %>') != null) {
                xPos = $get('<%=Panel1.ClientID %>').scrollLeft;
                yPos = $get('<%=Panel1.ClientID %>').scrollTop;
            }
        }

        function EndRequestHandler(sender, args) {
            if ($get('<%= Panel1.ClientID %>') != null) {
                $get('<%=Panel1.ClientID %>').scrollLeft = xPos;
                $get('<%=Panel1.ClientID %>').scrollTop = yPos;
            }

        }
            prm.add_beginRequest(BeginRequestHandler);
            prm.add_endRequest(EndRequestHandler);
</script> 
```

**甚至这个......我把`MaintainScrollPositionOnPostback`**

```
<%@ Page Title="Sample" Language="C#" MasterPageFile="~/MasterPage.master"
    AutoEventWireup="true" CodeFile="sample.aspx.cs" Inherits="sample_Default" MaintainScrollPositionOnPostback="true" EnableViewState="true"%> 
```

**和这个..**

```
protected void Page_Load(object sender, EventArgs e)
{
        MaintainScrollPositionOnPostBack = true;
        //some codes that is not important to my question...
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T04:47:44.210

在 Panel1 之前使用 DIV 作为前任：-

```
<div id="ItmeTypeDiv" style="width: 100%; height: 347px; overflow: auto" onscroll="javascript:document.getElementById('ItmeTypeDivScroll').value = this.scrollTop">

  YOUR PANEL
</div>
<asp:HiddenField ID="ItmeTypeDivScroll" runat="server" ClientIDMode="Static"/> 
```

在代码隐藏的页面加载中

```
ScriptManager.RegisterStartupScript(this, GetType(), "LoadItemTypeScroll", "LoadItemTypeScroll();", true); 
```

这是你需要添加的 javascript

```
function LoadItemTypeScroll() {
try {
    document.getElementById('ItmeTypeDiv').scrollTop = document.getElementById('ItmeTypeDivScroll').value;
}
catch (e) { }
} 
```

# php - 用于在 Windows 7 中的收据打印机中打印收据的 PHP 代码

> ID：14595774
> 
> 赞同：3
> 
> 时间：2013-01-30T02:37:38.217
> 
> 标签：php, printing

诸如 etc 之类的打印机功能`printer_open()`在我的 Windows 7 中不起作用。我使用 php 5.0，它说调用未定义的函数。任何人都可以帮助我如何打印收据或首先将打印作业发送到打印机。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T02:38:46.827

错误消息表示`undefined function`未安装打印机扩展。

该文档包含安装说明：

[http://www.php.net/manual/en/printer.installation.php](http://www.php.net/manual/en/printer.installation.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T09:18:38.677

PHP > 5.3.x 不再支持 php_printer.dll。所以确保你有 PHP 5.3.x，而不是 5.4.x，然后去这里下载相关的 dll [http://likepie.net/2012/php_printer-dll-and-php-5-3-9/](http://likepie.net/2012/php_printer-dll-and-php-5-3-9/)

# python - Tk 基本标签放置

> ID：14595775
> 
> 赞同：0
> 
> 时间：2013-01-30T02:37:45.780
> 
> 标签：python, tkinter, tk, ttk

为什么在这个非常基本的代码片段中，数据标签 (lb_data) 没有出现在其父窗口小部件 (fr_body) 中，而是出现在 fr_header 中？

（高度、宽度和浮雕只是用来显示框架小部件的位置）

```
fr_header=ttk.Frame(root,width=100,height=100,relief=GROOVE).grid(row=0,column=0)
lb_title=ttk.Label(fr_header,text="Title Title Title").grid(row=0,column=0)

fr_body=ttk.Frame(root,width=150,height=150,relief=SUNKEN).grid(row=1,column=0)
lb_data=ttk.Label(fr_body,text="Data").grid(row=0,column=0) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T02:44:01.730

该`.grid`方法返回`None`。所以，`fr_header`实际上是被赋予了 value `None`。当你将它传递给你的标签时，你会`Tkinter`看到`None`并假设你想让主小部件成为根小部件 ( `Tk()`)。

我从不创建小部件，`grid`与此同时，您对刚刚创建的小部件失去了轻松处理。改为这样做：

```
fr_header=ttk.Frame(root,width=100,height=100,relief=GROOVE)
fr_header.grid(row=0,column=0) 
```

# javascript - 计算 html / Javascript 表单

> ID：14595780
> 
> 赞同：0
> 
> 时间：2013-01-30T02:38:18.030
> 
> 标签：javascript, html, forms

我正在尝试使用数量和添加来计算此表格，某些字段具有必需的数量，而其他字段是用于输入的数量和数量。我正在尝试将所有这些加在一起并征税。任何帮助将非常感激。这是我正在使用的 Excel 电子表格的链接：[Estimator Form](https://www.dropbox.com/s/t4a1j4hizbv9b85/Estimator.xlsx)

这是我到目前为止的代码：

```
function bizAmt(amount) {
  string = "" + amount;
  dec = string.length - string.indexOf('.');
  if (string.indexOf('.') == -1)
    return string + '.00';
  if (dec == 1)
    return string + '00';
  if (dec == 2)
    return string + '0';
  if (dec > 3)
    return string.substring(0, string.length - dec + 3);
  return string;
}

function calculate() {
  QtyA = 0;
  QtyB = 0;
  QtyC = 0;
  TotA = 0;
  TotB = 0;
  TotC = 0;

  PrcA = 65;
  PrcB = 88;
  PrcC = 132;

  if (document.getElementById("qtyA").value > "") {
    QtyA = document.getElementById("qtyA").value
  };
  document.getElementById("qtyA").value = eval(QtyA);

  if (document.getElementById("qtyB").value > "") {
    QtyB = document.getElementById("qtyB").value
  };
  document.getElementById("qtyB").value = eval(QtyB);

  if (document.getElementById("qtyC").value > "") {
    QtyC = document.getElementById("qtyC").value
  };
  document.getElementById("qtyC").value = eval(QtyC);

  TotA = QtyA * PrcA;
  document.getElementById("totalA").value = bizAmt(eval(TotA));

  TotB = QtyB * PrcB;
  document.getElementById("totalB").value = bizAmt(eval(TotB));

  TotC = QtyC * PrcC;
  document.getElementById("totalC").value = bizAmt(eval(TotC));

  Totamt =
    eval(TotA) +
    eval(TotB) +
    eval(TotC);

  document.getElementById("GrandTotal").value = bizAmt(eval(Totamt));
}

function validNum(theForm) {
  var checkOK = "0123456789.,";
  var checkStr = theForm.qtyA.value;
  var allValid = true;
  var validGroups = true;
  var decPoints = 0;
  var allNum = "";
  for (i = 0; i < checkStr.length; i++) {
    ch = checkStr.charAt(i);
    for (j = 0; j < checkOK.length; j++)
      if (ch == checkOK.charAt(j))
        break;
    if (j == checkOK.length) {
      allValid = false;
      break;
    }
    if (ch == ".") {
      allNum += ".";
      decPoints++;
    } else if (ch == "," && decPoints != 0) {
      validGroups = false;
      break;
    } else if (ch != ",")
      allNum += ch;
  }
  if (!allValid) {
    alert("Please enter only digit characters in the \"Truck Fuel Charge quantity\" field.");
    theForm.qtyA.focus();
    return (false);
  }

  if (decPoints > 1 || !validGroups) {
    alert("Please enter a valid number in the \"Truck Fuel Charge quantity\" field.");
    theForm.qtyA.focus();
    return (false);
  }

  var checkOK = "0123456789.,";
  var checkStr = theForm.qtyB.value;
  var allValid = true;
  var validGroups = true;
  var decPoints = 0;
  var allNum = "";

  for (i = 0; i < checkStr.length; i++) {
    ch = checkStr.charAt(i);
    for (j = 0; j < checkOK.length; j++)
      if (ch == checkOK.charAt(j))
        break;
    if (j == checkOK.length) {
      allValid = false;
      break;
    }
    if (ch == ".") {
      allNum += ".";
      decPoints++;
    } else if (ch == "," && decPoints != 0) {
      validGroups = false;
      break;
    } else if (ch != ",")
      allNum += ch;
  }
  if (!allValid) {
    alert("Please enter only digit characters in the \"contract Labor quantity\" field.");
    theForm.qtyB.focus();
    return (false);
  }

  if (decPoints > 1 || !validGroups) {
    alert("Please enter a valid number in the \"contract Labor quantity\" field.");
    theForm.qtyA.focus();
    return (false);
  }

  var checkOK = "0123456789.,";
  var checkStr = theForm.qtyC.value;
  var allValid = true;
  var validGroups = true;
  var decPoints = 0;
  var allNum = "";

  for (i = 0; i < checkStr.length; i++) {
    ch = checkStr.charAt(i);
    for (j = 0; j < checkOK.length; j++)
      if (ch == checkOK.charAt(j))
        break;
    if (j == checkOK.length) {
      allValid = false;
      break;
    }
    if (ch == ".") {
      allNum += ".";
      decPoints++;
    } else if (ch == "," && decPoints != 0) {
      validGroups = false;
      break;
    } else if (ch != ",")
      allNum += ch;
  }

  if (!allValid) {
    alert("Please enter only digit characters in the \"contract Labor OT quantity\" field.");
    theForm.qtyC.focus();
    return (false);
  }

  if (decPoints > 1 || !validGroups) {
    alert("Please enter a valid number in the \"contract Labor OT quantity\" field.");
    theForm.qtyC.focus();
    return (false);
  }

  calculate();
  return (true);
}
```

```
body {
  background: #FFFFFF;
}
```

```
<h2>Estimator</h2>
<br />
<table border="0" cellpadding="0" width="550" id="table2">
  <tr>
    <td width="250" height="31"><b>Item Description</b>
    </td>
    <td align="center" width="100" height="31"><b>Quantity</b>
    </td>
    <td align="right" height="31" width="60"><b></b>
    </td>
    <td align="right" height="31" width="140"><b>Total</b>
    </td>
  </tr>
  <tr>
    <td width="250">Truck & Fuel Surcharge</td>
    <td align="center" width="100">
      <input type="text" value="" name="qtyA" id="qtyA" size="5" tabindex="5">
    </td>
    <td align="right" type="hidden" width="60">$65</td>
    <td align="right" width="140">
      <input readonly style="border:0px;" tabindex="99" name="totalA" id="totalA" size="12" tabindex="99">
    </td>
  </tr>
  <tr>
    <td width="250">Contract Labor</td>
    <td align="center" width="100">
      <input type="text" name="qtyB" id="qtyB" size="5" tabindex="5">
    </td>
    <td align="right" type="hidden" width="60">$88</td>
    <td align="right" width="140">
      <input type="hidden" name="totalB" id="totalB" size="12" tabindex="99">
    </td>
  </tr>
  <tr>
    <td width="250">Contract Labor OT</td>
    <td align="center" width="100">
      <input type="text" name="qtyC" id="qtyC" size="5" tabindex="5">
    </td>
    <td align="right" type="hidden" width="60">$132</td>
    <td align="right" width="140">
      <input type="hidden" name="totalC" id="totalC" size="12" tabindex="99">
    </td>
  </tr>
  <tr>
    <td width="250">Non Contract Labor</td>
    <td align="center" width="100">
      <input type="text" name="qtyC" size="5" tabindex="5">
    </td>
    <td align="right" type="hidden" width="60">$98</td>
    <td align="right" width="140">
      <input type="hidden" name="totalC" size="12" tabindex="99">
    </td>
  </tr>
  <tr>
    <td width="250">Non Contract Labor OT</td>
    <td align="center" width="100">
      <input type="text" name="qtyC" size="5" tabindex="5">
    </td>
    <td align="right" type="hidden" width="60">$147</td>
    <td align="right" width="140">
      <input type="hidden" name="totalC" size="12" tabindex="99">
    </td>
  </tr>
  <tr>
    <td width="250"><b>Parts Description</b>
    </td>
    <td align="center" width="100">
      <td align="right" width="140">
      </td>
  </tr>
  <tr>
    <td width="250">Compressor</td>
    <td align="center" width="100">
      <input type="text" name="qtyC" size="5" tabindex="5">
    </td>
    <td align="right" width="60"></td>
    <td align="right" width="140">$
      <input type="text" name="totalC" size="12" tabindex="99">
    </td>
  </tr>
  <tr>
    <td width="250">Contactors</td>
    <td align="center" width="100">
      <input type="text" name="qtyC" size="5" tabindex="5">
    </td>
    <td align="right" width="60"></td>
    <td align="right" width="140">$
      <input type="text" name="totalC" size="12" tabindex="99">
    </td>
  </tr>
  <tr>
    <td width="250">Oil Pressure Switch</td>
    <td align="center" width="100">
      <input type="text" name="qtyC" size="5" tabindex="5">
    </td>
    <td align="right" width="60"></td>
    <td align="right" width="140">$
      <input type="text" name="totalC" size="12" tabindex="99">
    </td>
  </tr>
  <tr>
    <td width="250">Core Driers</td>
    <td align="center" width="100">
      <input type="text" name="qtyC" size="5" tabindex="5">
    </td>
    <td align="right" width="60"></td>
    <td align="right" width="140">$
      <input type="text" name="totalC" size="12" tabindex="99">
    </td>
  </tr>
  <tr>
    <td>
      <input type="text" name="input1" size="25">
    </td>
    </td>
    <td align="center" width="100">
      <input type="text" name="qtyC" size="5" tabindex="5">
    </td>
    <td align="right" width="60"></td>
    <td align="right" width="140">$
      <input type="text" name="totalC" size="12" tabindex="99">
    </td>
  </tr>
  <tr>
    <td>
      <input type="text" name="input1" size="25">
    </td>
    </td>
    <td align="center" width="100">
      <input type="text" name="qtyC" size="5" tabindex="5">
    </td>
    <td align="right" width="60"></td>
    <td align="right" width="140">$
      <input type="text" name="totalC" size="12" tabindex="99">
    </td>
  </tr>
  <tr>
    <td>
      <input type="text" name="input1" size="25">
    </td>
    </td>
    <td align="center" width="100">
      <input type="text" name="qtyC" size="5" tabindex="5">
    </td>
    <td align="right" width="60"></td>
    <td align="right" width="140">$
      <input type="text" name="totalC" size="12" tabindex="99">
    </td>
  </tr>
  <tr>
    <td>
      <input type="text" name="input1" size="25">
    </td>
    </td>
    <td align="center" width="100">
      <input type="text" name="qtyC" size="5" tabindex="5">
    </td>
    <td align="right" width="60"></td>
    <td align="right" width="140">$
      <input type="text" name="totalC" size="12" tabindex="99">
    </td>
  </tr>
  <tr>
    <td>
      <input type="text" name="input1" size="25">
    </td>
    </td>
    <td align="center" width="100">
      <input type="text" name="qtyC" size="5" tabindex="5">
    </td>
    <td align="right" width="60"></td>
    <td align="right" width="140">$
      <input type="text" name="totalC" size="12" tabindex="99">
    </td>
  </tr>
  <tr>
    <td>
      <input type="text" name="input1" size="25">
    </td>
    </td>
    <td align="center" width="100">
      <input type="text" name="qtyC" size="5" tabindex="5">
    </td>
    <td align="right" width="60"></td>
    <td align="right" width="140">$
      <input type="text" name="totalC" size="12" tabindex="99">
    </td>
  </tr>
  <tr>
    <td>
      <input type="text" name="input1" size="25">
    </td>
    </td>
    <td align="center" width="100">
      <input type="text" name="qtyC" size="5" tabindex="5">
    </td>
    <td align="right" width="60"></td>
    <td align="right" width="140">$
      <input type="text" name="totalC" size="12" tabindex="99">
    </td>
  </tr>
  <tr>
    <td>
      <input type="text" name="input1" size="25">
    </td>
    </td>
    <td align="center" width="100">
      <input type="text" name="qtyC" size="5" tabindex="5">
    </td>
    <td align="right" width="60"></td>
    <td align="right" width="140">$
      <input type="text" name="totalC" size="12" tabindex="99">
    </td>
  </tr>
  <tr>
    <td>
      <input type="text" name="input1" size="25">
    </td>
    </td>
    <td align="center" width="100">
      <input type="text" name="qtyC" size="5" tabindex="5">
    </td>
    <td align="right" width="60"></td>
    <td align="right" width="140">$
      <input type="text" name="totalC" size="12" tabindex="99">
    </td>
  </tr>

  <tr>
    <td width="250">Leak Check</td>
    <td align="center" width="100">
      <input type="text" name="qtyC" size="5" tabindex="5">
    </td>
    <td align="right" width="60"></td>
    <td align="right" width="140">
      <input type="hidden" name="totalC" size="12" tabindex="99">
    </td>
  </tr>
  <tr>
    <td width="250">Recovery #</td>
    <td align="center" width="100">
      <input type="text" name="qtyC" size="5" tabindex="5">
    </td>
    <td align="right" width="60"></td>
    <td align="right" width="140">&nbsp;</td>
  </tr>
  <tr>
    <td width="250">&nbsp;</td>
    <td align="center" width="100">&nbsp;</td>
    <td align="right" width="60">&nbsp;</td>
    <td align="right" width="140">&nbsp;</td>
  </tr>
  <tr>
    <td align="center" width="40">&nbsp;</td>
    <td align="right" width="60">&nbsp;</td>
    <td width="250">
      <p align="right"><b>Tax:</b>
    </td>
    <td align="right" width="250">$
      <input name="Tax" id="Tax" size="15" readonly style="border:0px;" tabindex="99">
    </td>
  </tr>
  <tr>
    <td align="center" width="40">&nbsp;</td>
    <td align="right" width="60">&nbsp;</td>
    <td width="250">
      <p align="right"><b>GRAND TOTAL:</b>
    </td>
    <td align="right" width="250">$
      <input name="GrandTotal" id="GrandTotal" size="15" readonly style="border:0px;" tabindex="99">
    </td>
  </tr>
  <tr>
    <td align="center" width="40">&nbsp;</td>
    <td align="right" width="60">&nbsp;</td>
    <td width="250">
      <p align="right"><b>COMMISSION:</b>
    </td>
    <td align="right" width="250">$
      <input type="text" name="Commission" id="Commission" size="15" tabindex="99" readonly style="border:0px;" tabindex="99">
    </td>
  </tr>
  <tr>
    <td width="250">&nbsp;</td>
    <td align="center" width="100">&nbsp;</td>
    <td align="right" width="60">&nbsp;</td>
    <td align="right" width="140">&nbsp;</td>
  </tr>
</table>
```

我有使用表单标签的工作代码，但我不知道如何使用 getElementId。

见下文：

```
<html>
    <head>
    <meta http-equiv="Content-Language" content="en-us">
    <meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
    <title>HVAC Estimator</title>
    <style type="text/css">
    .totals
            {
                font-size: .9em;

            }
    </style>

    <script language=javascript>
    <!--//

    function leeAmt(amount) 
    {
      string = "" + amount;
      dec = string.length - string.indexOf('.');
      if (string.indexOf('.') == -1)
      return string + '.00';
      if (dec == 1)
      return string + '00';
      if (dec == 2)
      return string + '0';
      if (dec > 3)
      return string.substring(0,string.length-dec+3);
      return string;
    }

    function calculate()
    {

      QtyA = 0;  QtyB = 0;  QtyC = 0; 
      TotA = 0;  TotB = 0;  TotC = 0;

      PrcA = 65; PrcB = 88; PrcC = 132;

      if (document.ofrm.qtyA.value > "")
         { QtyA = document.ofrm.qtyA.value };
      document.ofrm.qtyA.value = eval(QtyA);  

      if (document.ofrm.qtyB.value > "")
         { QtyB = document.ofrm.qtyB.value };
      document.ofrm.qtyB.value = eval(QtyB);  

      if (document.ofrm.qtyC.value > "")
         { QtyC = document.ofrm.qtyC.value };
      document.ofrm.qtyC.value = eval(QtyC);

      TotA = QtyA * PrcA;
      document.ofrm.totalA.value = leeAmt(eval(TotA));

      TotB = QtyB * PrcB;
      document.ofrm.totalB.value = leeAmt(eval(TotB));

      TotC = QtyC * PrcC;
      document.ofrm.totalC.value = leeAmt(eval(TotC));

      Totamt = 
         eval(TotA) +
         eval(TotB) +
         eval(TotC) ;

      document.ofrm.GrandTotal.value = leeAmt(eval(Totamt));

    } 

    function validNum(theForm)
    {
      var checkOK = "0123456789.,";
      var checkStr = theForm.qtyA.value;
      var allValid = true;
      var validGroups = true;
      var decPoints = 0;
      var allNum = "";
      for (i = 0;  i < checkStr.length;  i++)
      {
        ch = checkStr.charAt(i);
        for (j = 0;  j < checkOK.length;  j++)
          if (ch == checkOK.charAt(j))
            break;
        if (j == checkOK.length)
        {
          allValid = false;
          break;
        }
        if (ch == ".")
        {
          allNum += ".";
          decPoints++;
        }
        else if (ch == "," && decPoints != 0)
        {
          validGroups = false;
          break;
        }
        else if (ch != ",")
          allNum += ch;
      }
      if (!allValid)
      {
        alert("Please enter only digit characters in the \"Truck Fuel Charge quantity\" field.");
        theForm.qtyA.focus();
        return (false);
      }

      if (decPoints > 1 || !validGroups)
      {
        alert("Please enter a valid number in the \"Truck Fuel Charge quantity\" field.");
        theForm.qtyA.focus();
        return (false);
      }

      var checkOK = "0123456789.,";
      var checkStr = theForm.qtyB.value;
      var allValid = true;
      var validGroups = true;
      var decPoints = 0;
      var allNum = "";
      for (i = 0;  i < checkStr.length;  i++)
      {
        ch = checkStr.charAt(i);
        for (j = 0;  j < checkOK.length;  j++)
          if (ch == checkOK.charAt(j))
            break;
        if (j == checkOK.length)
        {
          allValid = false;
          break;
        }
        if (ch == ".")
        {
          allNum += ".";
          decPoints++;
        }
        else if (ch == "," && decPoints != 0)
        {
          validGroups = false;
          break;
        }
        else if (ch != ",")
          allNum += ch;
      }
      if (!allValid)
      {
        alert("Please enter only digit characters in the \"contract Labor quantity\" field.");
        theForm.qtyB.focus();
        return (false);
      }

      if (decPoints > 1 || !validGroups)
      {
        alert("Please enter a valid number in the \"contract Labor quantity\" field.");
        theForm.qtyA.focus();
        return (false);
      }

      var checkOK = "0123456789.,";
      var checkStr = theForm.qtyC.value;
      var allValid = true;
      var validGroups = true;
      var decPoints = 0;
      var allNum = "";
      for (i = 0;  i < checkStr.length;  i++)
      {
        ch = checkStr.charAt(i);
        for (j = 0;  j < checkOK.length;  j++)
          if (ch == checkOK.charAt(j))
            break;
        if (j == checkOK.length)
        {
          allValid = false;
          break;
        }
        if (ch == ".")
        {
          allNum += ".";
          decPoints++;
        }
        else if (ch == "," && decPoints != 0)
        {
          validGroups = false;
          break;
        }
        else if (ch != ",")
          allNum += ch;
      }
      if (!allValid)
      {
        alert("Please enter only digit characters in the \"contract Labor OT quantity\" field.");
        theForm.qtyC.focus();
        return (false);
      }

      if (decPoints > 1 || !validGroups)
      {
        alert("Please enter a valid number in the \"contract Labor OT quantity\" field.");
        theForm.qtyC.focus();
        return (false);
      }

      calculate();
      return (true);
    } 

    //-->
    </script>

    </head>

    <body bgcolor="#FFFFFF">

    <h2>HVAC Estimator</h2>

    <br />

    <form method="POST" action="submitted.html" name="ofrm">
        <table border="0" cellpadding="0" width="550" id="table2" name="ofrm">
            <tr>
                <td width="250" height="31"><b>Item Description</b></td>
                <td align="center" width="100" height="31"><b>Quantity</b></td>
                <td align="right" height="31" width="60"><b>Price </b></td>
                <td align="right" height="31" width="140"><b>Total</b></td>
            </tr>
            <tr>
                <td width="250">Truck & Fuel Surcharge</td>
                <td align="center" width="100">
                <input type="text" name="qtyA" size="5" tabindex="5" onchange="return validNum(document.ofrm)"></td>
                <td align="right" width="60"></td>
                <td align="right" width="140">
                <input type="hidden" name="totalA" size="12" tabindex="99" onchange="calculate()"></td>
            </tr>
            <tr>
                <td width="250">Contract Labor</td>
                <td align="center" width="100">
                <input type="text" name="qtyB" size="5" tabindex="5" onchange="return validNum(document.ofrm)"></td>
                <td align="right" width="60"></td>
                <td align="right" width="140">
                <input type="hidden" name="totalB" size="12" tabindex="99" onchange="calculate()"></td>
            </tr>
            <tr>
                <td width="250">Contract Labor OT</td>
                <td align="center" width="100">
                <input type="text" name="qtyC" size="5" tabindex="5" onchange="return validNum(document.ofrm)"></td>
                <td align="right" width="60"></td>
                <td align="right" width="140">
                <input type="hidden" name="totalC" size="12" tabindex="99" onchange="calculate()"></td>
            </tr>

            <tr>
                <td width="250">&nbsp;</td>
                <td align="center" width="100">&nbsp;</td>
                <td align="right" width="60">&nbsp;</td>
                <td align="right" width="140">&nbsp;</td>
            </tr>
            <tr>
                <td width="250">
                <p align="right"><b>SUB TOTAL:</b></td>
                <td align="center" width="100">&nbsp;</td>
                <td align="right" width="60">&nbsp;</td>
                <td align="right" width="140">$
                <input readonly style="border:0px;" class="totals" name="GrandTotal" size="15" tabindex="99" onchange="calculate()"></td>
            </tr>
            <tr>
                <td width="250">&nbsp;</td>
                <td align="center" width="100">&nbsp;</td>
                <td align="right" width="60">&nbsp;</td>
                <td align="right" width="140">&nbsp;</td>
            </tr>
        </table>
        </form>
    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T03:19:52.453

为什么不像`<form>`以前那样使用 a 呢？

如果你想用`id`s 来做，正确的符号是：

```
QtyA = document.getElementById("qtyA").getAttribute("value"); 
```

和

```
document.getElementById("GrandTotal").setAttribute("value", bizAmt(eval(Totamt)) ); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-30T03:42:05.590

我已在您的要求中转换此代码使用它

```
<html>

    <head>

    <meta http-equiv="Content-Language" content="en-us">
    <meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
    <title>HVAC Estimator</title>
    <style type="text/css">
    .totals
            {
                font-size: .9em;

            }
    </style>

    <script language=javascript>
    <!--//

    function leeAmt(amount) 
    {
      string = "" + amount;
      dec = string.length - string.indexOf('.');
      if (string.indexOf('.') == -1)
      return string + '.00';
      if (dec == 1)
      return string + '00';
      if (dec == 2)
      return string + '0';
      if (dec > 3)
      return string.substring(0,string.length-dec+3);
      return string;
    }

    function calculate()
    {

      QtyA = 0;  QtyB = 0;  QtyC = 0; 
      TotA = 0;  TotB = 0;  TotC = 0;

      PrcA = 65; PrcB = 88; PrcC = 132;

      if (document.getElementById("qtyA").value > "")
         { QtyA = document.getElementById("qtyA").value };
      document.getElementById("qtyA").value = eval(QtyA);  

      if (document.getElementById("qtyB").value > "")
         { QtyB =document.getElementById("qtyB").value };
      document.getElementById("qtyB").value = eval(QtyB);  

      if (document.getElementById("qtyC").value > "")
         { QtyC = document.getElementById("qtyC").value };
      document.getElementById("qtyC").value = eval(QtyC);

      TotA = QtyA * PrcA;
      document.getElementById("totalA").value = leeAmt(eval(TotA));

      TotB = QtyB * PrcB;
      document.getElementById("totalB").value = leeAmt(eval(TotB));

      TotC = QtyC * PrcC;
      document.getElementById("totalC").value = leeAmt(eval(TotC));

      Totamt = 
         eval(TotA) +
         eval(TotB) +
         eval(TotC) ;

      document.getElementById("GrandTotal").value = leeAmt(eval(Totamt));

    } 

    function validNum(theForm)
    {
      var checkOK = "0123456789.,";
      var checkStr = document.getElementById("qtyA").value;
      var allValid = true;
      var validGroups = true;
      var decPoints = 0;
      var allNum = "";
      for (i = 0;  i < checkStr.length;  i++)
      {
        ch = checkStr.charAt(i);
        for (j = 0;  j < checkOK.length;  j++)
          if (ch == checkOK.charAt(j))
            break;
        if (j == checkOK.length)
        {
          allValid = false;
          break;
        }
        if (ch == ".")
        {
          allNum += ".";
          decPoints++;
        }
        else if (ch == "," && decPoints != 0)
        {
          validGroups = false;
          break;
        }
        else if (ch != ",")
          allNum += ch;
      }
      if (!allValid)
      {
        alert("Please enter only digit characters in the \"Truck Fuel Charge quantity\" field.");
        document.getElementById("qtyA").focus();
        return (false);
      }

      if (decPoints > 1 || !validGroups)
      {
        alert("Please enter a valid number in the \"Truck Fuel Charge quantity\" field.");
        document.getElementById("qtyA").focus();
        return (false);
      }

      var checkOK = "0123456789.,";
      var checkStr =document.getElementById("qtyB").value;
      var allValid = true;
      var validGroups = true;
      var decPoints = 0;
      var allNum = "";
      for (i = 0;  i < checkStr.length;  i++)
      {
        ch = checkStr.charAt(i);
        for (j = 0;  j < checkOK.length;  j++)
          if (ch == checkOK.charAt(j))
            break;
        if (j == checkOK.length)
        {
          allValid = false;
          break;
        }
        if (ch == ".")
        {
          allNum += ".";
          decPoints++;
        }
        else if (ch == "," && decPoints != 0)
        {
          validGroups = false;
          break;
        }
        else if (ch != ",")
          allNum += ch;
      }
      if (!allValid)
      {
        alert("Please enter only digit characters in the \"contract Labor quantity\" field.");
        document.getElementById("qtyB").focus();
        return (false);
      }

      if (decPoints > 1 || !validGroups)
      {
        alert("Please enter a valid number in the \"contract Labor quantity\" field.");
        theForm.qtyA.focus();
        return (false);
      }

      var checkOK = "0123456789.,";
      var checkStr = document.getElementById("qtyC").value;
      var allValid = true;
      var validGroups = true;
      var decPoints = 0;
      var allNum = "";
      for (i = 0;  i < checkStr.length;  i++)
      {
        ch = checkStr.charAt(i);
        for (j = 0;  j < checkOK.length;  j++)
          if (ch == checkOK.charAt(j))
            break;
        if (j == checkOK.length)
        {
          allValid = false;
          break;
        }
        if (ch == ".")
        {
          allNum += ".";
          decPoints++;
        }
        else if (ch == "," && decPoints != 0)
        {
          validGroups = false;
          break;
        }
        else if (ch != ",")
          allNum += ch;
      }
      if (!allValid)
      {
        alert("Please enter only digit characters in the \"contract Labor OT quantity\" field.");
        document.getElementById("qtyC").focus();
        return (false);
      }

      if (decPoints > 1 || !validGroups)
      {
        alert("Please enter a valid number in the \"contract Labor OT quantity\" field.");
        document.getElementById("qtyC").focus();
        return (false);
      }

      calculate();
      return (true);
    } 

    //-->
    </script>

    </head>

    <body bgcolor="#FFFFFF">

    <h2>HVAC Estimator</h2>

    <br />

    <form method="POST" action="submitted.html" name="ofrm">
        <table border="0" cellpadding="0" width="550" id="table2" name="ofrm">
            <tr>
                <td width="250" height="31"><b>Item Description</b></td>
                <td align="center" width="100" height="31"><b>Quantity</b></td>
                <td align="right" height="31" width="60"><b>Price </b></td>
                <td align="right" height="31" width="140"><b>Total</b></td>
            </tr>
            <tr>
                <td width="250">Truck & Fuel Surcharge</td>
                <td align="center" width="100">
                <input type="text" name="qtyA" size="5" tabindex="5" onchange="return validNum(document.ofrm)"></td>
                <td align="right" width="60"></td>
                <td align="right" width="140">
                <input type="hidden" name="totalA" size="12" tabindex="99" onchange="calculate()"></td>
            </tr>
            <tr>
                <td width="250">Contract Labor</td>
                <td align="center" width="100">
                <input type="text" name="qtyB" size="5" tabindex="5" onchange="return validNum(document.ofrm)"></td>
                <td align="right" width="60"></td>
                <td align="right" width="140">
                <input type="hidden" name="totalB" size="12" tabindex="99" onchange="calculate()"></td>
            </tr>
            <tr>
                <td width="250">Contract Labor OT</td>
                <td align="center" width="100">
                <input type="text" name="qtyC" size="5" tabindex="5" onchange="return validNum(document.ofrm)"></td>
                <td align="right" width="60"></td>
                <td align="right" width="140">
                <input type="hidden" name="totalC" size="12" tabindex="99" onchange="calculate()"></td>
            </tr>

            <tr>
                <td width="250">&nbsp;</td>
                <td align="center" width="100">&nbsp;</td>
                <td align="right" width="60">&nbsp;</td>
                <td align="right" width="140">&nbsp;</td>
            </tr>
            <tr>
                <td width="250">
                <p align="right"><b>SUB TOTAL:</b></td>
                <td align="center" width="100">&nbsp;</td>
                <td align="right" width="60">&nbsp;</td>
                <td align="right" width="140">$
                <input readonly style="border:0px;" class="totals" name="GrandTotal" size="15" tabindex="99" onchange="calculate()"></td>
            </tr>
            <tr>
                <td width="250">&nbsp;</td>
                <td align="center" width="100">&nbsp;</td>
                <td align="right" width="60">&nbsp;</td>
                <td align="right" width="140">&nbsp;</td>
            </tr>
        </table>
        </form>
    </body>
    </html> 
```

# javascript - 导致 Jquery 退出的 Javascript 颜色生成器代码

> ID：14595781
> 
> 赞同：0
> 
> 时间：2013-01-30T02:38:21.060
> 
> 标签：javascript, jquery, string

我编写了一个小脚本来生成随机颜色的十六进制代码。它是这样的：

```
function genHex() {
    colors = new Array(14)
    colors[0] = '0'
    colors[1] = '1'
    colors[2] = '2'
    colors[3] = '3'
    colors[4] = '4'
    colors[5] = '5'
    colors[6] = '6'
    colors[7] = '7'
    colors[8] = '8'
    colors[9] = '9'
    colors[10] = 'a'
    colors[11] = 'b'
    colors[12] = 'c'
    colors[13] = 'd'
    colors[14] = 'e'
    colors[15] = 'f'

    digit = new Array(5)
    color = ""
    for (i = 0; i < 6; i++) {
        digit[i] = colors[Math.round(Math.random() * 14)]
        color = color + digit[i]
    }
    return color;
} 
```

我知道这不是完成我正在做的事情的最漂亮的方法，但这种方法最终将为更复杂的项目服务于不同的目的。无论如何，当我将此`genhex.js`文件与最新的 Jquery 一起包含时，没有任何效果！

例如，

```
$().ready(function() {
    alert(genhex());
}); 
```

什么也没做。我在这里想念什么？在这种情况下是否有某种原因`color`不是字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T02:40:57.977

尝试：

```
$(function() {
    alert(genHex());
}); 
```

要求`genHex()`准备好文件。

该函数也定义为，`genHex()`但您试图将其称为`genhex()`. JavaScript 中的函数名区分大小写。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T02:42:32.793

```
$().ready(function() {
   alert(genhex());
}); 
```

应该是

```
$(document).ready(function() {
    alert(genHex());
}); 
```

# assembly - 汇编 TEST 指令如何与这些跳转指令一起工作？

> ID：14595784
> 
> 赞同：6
> 
> 时间：2013-01-30T02:38:26.367
> 
> 标签：assembly, x86, conditional-statements

使用 AT&T 汇编语法，我试图了解如何`testl`在汇编代码中使用。具体来说：

```
testl  %edx, %edx
jle    .L3 
```

我知道`testl`按位`and`对相同的值设置条件标志，但是如果不比较两个值，我如何解释“小于或等于时跳转”？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-30T03:00:03.667

以下是英特尔在测试中官方文档的摘录：

```
Operation
TEMP ← SRC1 AND SRC2;
SF ← MSB(TEMP);
IF TEMP = 0
    THEN ZF ← 1;
    ELSE ZF ← 0;
FI:
PF ← BitwiseXNOR(TEMP[0:7]);
CF ← 0;
OF ← 0; 
```

在 jle 上也是如此：

```
Jump if less or equal (ZF=1 or SF≠OF) 
```

So, the jump will be performed if `edx` is 0 (because `edx AND edx = edx` and that's 0 only when `edx` is 0, and because `ZF` is set to 1 when the result of `AND` is 0) or if the most significant bit of `edx` is 1 (because `SF = most significant bit` of `edx AND edx` (or, equivalently, of `edx` itself) and `OF` is always 0, which means `SF ≠ OF` is only true when `SF ≠ 0`).

IOW, the jump will be performed only if `edx` is ≤ 0 when interpreted as a signed integer or, equivalently, when `edx` is either 0 or greater or equal than 0x80000000 when interpreted as an unsigned integer.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-30T03:03:36.250

`TESTL` with identical arguments (like `edx` and `edx`) sets the flags based on the value of that argument itself (since x AND x is identical to x). So we can forget about the `AND` altogether here since it's discarded - all we need to concern ourselves with is the value in `edx`.

With `TESTL`, the zero flag `ZF` is set to 1 only if the value is zero. `TESTL` also forces the overflow flag `OF` to 0 and sets the sign flag `SF` only if the high bit is set.

`JLE` will then jump if either `ZF` is set to 1, or `SF <> OF`.

So, the jump will execute if either:

*   `edx` was zero; or
*   `edx` had its high bit set.

Hence it will jump for `edx` values of `0` or `0x80000000 - 0xffffffff`.

Most likely this is a check to ensure that the number is a natural number `0x00000001 - 0x7fffffff`, the jump would be to an error handling routine of some sort and a valid natural number would continue without the jump, something like:

```
loop_for_number:
    call   get_number_into_edx
    testl  %edx, %edx
    jle    loop_for_number

    ; carry on here knowing that edx >= 1 
```

* * *

For a description of the various jumps and the flags they use, see [here](https://stackoverflow.com/questions/9617877/assembly-jg-jnle-jl-jnge-after-cmp/9617990#9617990).

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-30T02:57:17.023

在 x86 汇编中，几乎所有条件跳转都基于标志（除了`jcxz`、`jecxz`和`loop`/ `loopne`）`loopnz`。这意味着所有重要的是标志的值。

`jle`是 的同义词`jng`。跳转条件为`ZF = 1 or SF <> OF`。您可能需要查看[Intel x86 JUMP 快速参考](http://unixwiz.net/techtips/x86-jumps.html)。

`test``AF` [确实设置了除link](http://web.itu.edu.tr/kesgin/mul06/intel/instr/test.html)之外的所有标志，所以到目前为止一切看起来都很好。

根据[此链接](http://www.csee.umbc.edu/~cpatel2/links/310/slides/lab_slides/lab_lect03_arith_control.pdf)，逻辑运算始终为零`OF`。这意味着您的跳转实际上会是`ZF = 1 or SF = 1`，因此在您的代码`jle`中如果`edx`是`0`或在范围之间会跳转`0x80000000`...。`0xffffffff`

# matlab - Matlab绘制褪色方块

> ID：14595785
> 
> 赞同：3
> 
> 时间：2013-01-30T02:38:30.493
> 
> 标签：matlab, draw, shapes

我需要在 MATLAB 中创建一个类似于此的脚本：

![我必须做出的形状](../Images/8a4cbd20543de44e153cb65db560d480.png)

但是我拥有的代码不起作用，它给了我相反的结果，因为正方形的大小增加而不是缩小。

```
x = [0 0 2 2];
y = [0 2 2 0];
fill(x,y,'r');
hold on
for i = 1:10
x = [(x(3)) (x(3)) (x(3)/2) (x(3)/2)];
y = [(y(3)) (y(2)/2) (y(2)/2) (y(3))];
fill(x,y,'r');
end 
```

请提供解释和答案，因为我想了解我做错了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T03:03:18.463

查看`x`单独的两个值以简化此调查。在您的第一次迭代之后，`x`将是`2`and `1`，在第二次迭代中`1`and `0.5`。这意味着您正在接近零，正方形越来越小，这与您打算做的相反。

您如何从靠近原点的地方开始大一点，然后随着距离的增加而缩小呢？您可以初始化`x = [0, 2];`和`y = [0, 2];`. 我们在这里只使用两个元素，因为对于与您的轴对齐的正方形，这就是我们所需要的。第一次迭代可以从前一个正方形的边长移位开始，如`x = x + x(2) - x(1);`. 正方形也必须缩小，因此您可以将左角移动边长的一小部分，例如`x(1) = x(1) + (x(2) - x(1)) * 0.1;`。总而言之，您的循环看起来像

```
close all, clear all;
x = [0, 2];
y = [0, 2];
hold on;
for k = 0 : 9
    edge_len = x(2) - x(1);
    x = x + edge_len;  % shift
    x(1) = x(1) + 0.2 * edge_len;  % slightly shift right to shrink
    y = y + edge_len;
    y(1) = y(1) + 0.2 * edge_len;
    fill([x(1), x(1), x(2), x(2)], [y(1), y(2), y(2), y(1)], 'r');
end 
```

请注意，我们替换`x(2) - x(1)`为`edge_len`. 然后我们设置颜色的另一个问题。您可以使用颜色矢量`c = [1, k / 10, k / 10]`来创建从红色到几乎白色的渐变。然后，而不是`fill(..., 'r');`你会使用`fill(..., c);`

`fill`有了这个，循环之外就不会有任何东西了。这曾经涵盖了您在问题中显示的代码块中所有有趣的图形。

# emacs - cedet 自动打开头文件进行解析，但不关闭

> ID：14595787
> 
> 赞同：0
> 
> 时间：2013-01-30T02:38:47.340
> 
> 标签：emacs, cedet

当我编译 cedet 并使用它浏览 c++ 文件时，我发现很多错误，如下所示，并且自动打开了很多头文件：

```
 Idle Work Including Error: "#<buffer rtsp.cpp> - Wrong type argument: stringp, (lambda (f) t)"
Idle Work Including Error: "#<buffer QTSServer.cpp> - Wrong type argument: stringp, (lambda (f) t)"
Idle Work Including Error: "#<buffer main-handler.cpp> - Wrong type argument: stringp, (lambda (f) t)"
Idle Work Including Error: "#<buffer common.cpp> - Wrong type argument: stringp, (lambda (f) t)"
Idle Work Including Error: "#<buffer QTSSRollingLog.cpp> - Wrong type argument: stringp, (lambda (f) t)"
Idle Work Including Error: "#<buffer byteorder.h> - Wrong type argument: stringp, (lambda (f) t)"
Idle Work Including Error: "#<buffer c++locale.h> - Wrong type argument: stringp, (lambda (f) t)"
Idle Work Including Error: "#<buffer postypes.h> - Wrong type argument: stringp, (lambda (f) t)"
Idle Work Including Error: "#<buffer cwchar> - Wrong type argument: stringp, (lambda (f) t)"
Mark set [12 times]
Idle Work Including Error: "#<buffer QTSServer.cpp> - Wrong type argument: stringp, (lambda (f) t)"
Idle Work Including Error: "#<buffer main-handler.cpp> - Wrong type argument: stringp, (lambda (f) t)"
Idle Work Including Error: "#<buffer common.cpp> - Wrong type argument: stringp, (lambda (f) t)"
Idle Work Including Error: "#<buffer QTSSRollingLog.cpp> - Wrong type argument: stringp, (lambda (f) t)"
Idle Work Including Error: "#<buffer byteorder.h> - Wrong type argument: stringp, (lambda (f) t)"
Idle Work Including Error: "#<buffer c++locale.h> - Wrong type argument: stringp, (lambda (f) t)"
Idle Work Including Error: "#<buffer dirent.h> - Wrong type argument: stringp, (lambda (f) t)"
Idle Work Including Error: "#<buffer cache.h> - Wrong type argument: stringp, (lambda (f) t)"
Idle Work Including Error: "#<buffer little_endian.h> - Wrong type argument: stringp, (lambda (f) t)"
Idle Work Including Error: "#<buffer clocale> - Wrong type argument: stringp, (lambda (f) t)"
Mark set [6 t 
```

我从 GNU ftp 23.4 版下载 emacs 并编译并使用它。但是我的系统中有一个旧的emacs由于某种原因我无法删除它，我希望这个旧版本不会受到影响。更重要的是，我使用选项“make EMACS=”来完成 cedet-1.1。请帮我解决这个问题，它让我困惑了很长时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T12:41:55.347

当您从空闲工作处理程序中收到错误时，请从以下内容开始：

```
M-x semantic-debug-idle-work-function RET 
```

了解正在发生的事情的完整堆栈。这将指向你的问题。

# alignment - 如何在 vi 编辑器中使用 4 个空格作为标准对齐 tcl 代码？

> ID：14595788
> 
> 赞同：0
> 
> 时间：2013-01-30T02:38:52.117
> 
> 标签：alignment, vi

我想知道 4 个空格的自定义选项卡是否适用于 vi 编辑器中存在的对齐方式。当我尝试通过选择使用 v 并使用 ">>" 进行对齐时，我得到一个默认的 8 个空格的对齐方式，这对我来说是不可接受的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T07:29:29.110

可能您需要重新配置 .vimrc 文件中的制表位。

请参阅此处的描述：[使用制表符缩进，与空格对齐](http://vim.wikia.com/wiki/Indent_with_tabs,_align_with_spaces)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T20:40:32.500

我在 vim 中为 Tcl 使用这些设置：

```
set autoindent
set shiftwidth=4
set shiftround
set comments=:#
set cindent
set cinkeys-=0#
set smarttab
set expandtab   " I like spaces not tabs 
```

您可以将它们放入`~/.vimfiles/ftplugin/tcl.vim`为 *.tcl 文件自动设置。

所有人都可以使用帮助，例如`:help 'cindent'`在命令模式下。

# c++ - 如何通过以特定字符结尾来控制子字符串长度？

> ID：14595790
> 
> 赞同：0
> 
> 时间：2013-01-30T02:39:06.363
> 
> 标签：c++, substring

我有一个字符串“s”，我想通过开始一个乞求（位置 0）来获得一个子字符串，并以一个空格结尾 - 这样如果有人要输入他们的全名，我可以确定他们的名字。

我可以发誓他们是一个子字符串函数，可以“搜索”直到找到某个字符。提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T02:46:52.707

像这样的东西会起作用：

```
#include <string>
#include <iostream>

int main() {
    std::string str = "Person Name";
    size_t pos = str.find(" ");
    std::cout << str.substr(0,pos);
} 
```

# asp.net - iframe 和页面加载问题

> ID：14595794
> 
> 赞同：0
> 
> 时间：2013-01-30T02:39:33.657
> 
> 标签：asp.net, html, css, iframe, pageload

我的页面在这里有一个 iFrame：

![在此处输入图像描述](../Images/9afdcbd54e6807155502d0a1c7b80dd5.png)

这是放置 iframe 的代码：

```
<iframe src="" name="iframe_a" scrolling="no" width="100%" frameborder="0" style="margin-top: 200px; background-color: White;" 
    id="I1"></iframe> 
```

当我单击任何触发页面加载的按钮时，页面会在 iFrame 下方不断添加更多空白：

![在此处输入图像描述](../Images/ba4a9a94445c0989612a559fa3d27e42.png)

我怎样才能防止这种问题？注意：（我正在使用 ASP.NET）我将感谢所有答案、建议和建议 :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T11:08:45.557

“iFrame”没有错。检查“iFrame”的来源。

# php - php中的条件正则表达式

> ID：14595798
> 
> 赞同：-2
> 
> 时间：2013-01-30T02:39:58.797
> 
> 标签：php, regex

我需要创建一个 IF 子句来捕获以下格式的所有字符串：

`Pharm`后跟任意字母，后跟任意三位数字。

例如，`Pharmf750`或`Pharmc648`

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T02:42:12.310

您需要的正则表达式是`/^Pharm[A-Za-z][0-9]{3}$/`.

尝试类似的东西

```
if (preg_match('/^Pharm[A-Za-z][0-9]{3}$/', $stringToMatch) {
    // Do something
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T02:42:57.290

这很简单

```
/^Pharm[a-zA-Z][0-9]{3}$/ 
```

# javascript - jquery 关闭没有按预期工作

> ID：14595799
> 
> 赞同：1
> 
> 时间：2013-01-30T02:39:58.843
> 
> 标签：javascript, jquery

```
<!DOCTYPE html>
<html>
    <head>
        <style>
            p { margin: 4px; font-size:16px; font-weight:bolder;cursor:pointer; }
            .blue { color:blue; }
            .highlight { background:red; }
        </style>
        <script src="http://code.jquery.com/jquery-latest.js"></script>
    </head>
    <body>
        <p class="blue">Click to toggle (<span>clicks: 0</span>)</p>
        <p class="blue highlight">highlight (<span>clicks: 0</span>)</p>
        <p class="blue">on these (<span>clicks: 0</span>)</p>
        <p class="blue">paragraphs (<span>clicks: 0</span>)</p>

        <script>
            var count = 0;
            $("p").each(function() {
                var $thisParagraph = $(this);
                var count = 0;
                $thisParagraph.click(function() {
                    count++;
                    $thisParagraph.find("span").text('clicks: ' + count);
                    $thisParagraph.toggleClass("highlight", count % 3 == 0);
                });
            });
        </script>
    </body>
</html> 
```

我的问题是分配给所有段落元素的单击事件的函数都是关闭的。因此，单击第一个段落元素时，var 计数器会增加。当用户单击第二段时，计数器变量应该显示 2，不是吗？但它显示 1.im 对为什么会发生这种情况感兴趣

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T02:42:15.243

你已经定义`var count`了两次。省略 INSIDE 中的那个`$("p").each(function(){...})`。`var`里面的那个使变量成为该函数的局部变量。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T02:46:41.583

您描述的问题的原因是 mrunion 所说的：您正在重新定义`count`为局部变量。但是，您也可以大大简化代码并摆脱`.each`循环：

```
<script>
var count = 0;
$("p").click(function() {
    count++;
    var $thisParagraph = $(this);
    $thisParagraph.find("span").text('clicks: ' + count);
    $thisParagraph.toggleClass("highlight", count % 3 == 0);
});
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T02:57:03.890

```
$("p").each(function () {
    var count = 0;
    $(this).click(function () {
        count++;
        $(this).find("span").text('clicks: ' + count);
        $(this).toggleClass("highlight", count % 3 == 0);
    });
}); 
```

# mysql - 授予和撤销权限 - MySQL

> ID：14595800
> 
> 赞同：0
> 
> 时间：2013-01-30T02:40:43.687
> 
> 标签：mysql, database, privileges, grant

假设我将我所有的权限授予朋友，他拥有我所有的权限来编辑、选择、删除、更新等我的所有数据。

我的朋友可以从我自己的数据库中撤销我吗？

我相信他可以将我的特权授予另一个人，或许多人。有没有办法可以只授予他我所有的特权，但限制他将特权分配给其他人？或者至少当他试图授予某人特权时它会通知我？

另一个问题，如果我授予我的朋友 Bobby 我所有的权限，而他授予另一个名叫 Joey 的人他（我）的所有权限。之后我撤销了我朋友 (Bobby) 的权限，我朋友的朋友 (Joey) 是否保留他的权限？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T14:39:02.630

GRANT 特权是一个单独的特权。正如 MySQL 文档所说，GRANT 权限“允许授予或删除其他帐户的权限”。

如果您不给您的朋友 GRANT 权限，他将无法更改您的权限。只是因为您拥有 GRANT 权限，您才可以更改他的权限。

有关特权如何在 MySQL 中工作的详细信息，请参阅[http://dev.mysql.com/doc/refman/5.1/en/grant.html#grant-privileges 。](http://dev.mysql.com/doc/refman/5.1/en/grant.html#grant-privileges)

# php - Kohana 验证 _external 消息

> ID：14595804
> 
> 赞同：0
> 
> 时间：2013-01-30T02:41:13.123
> 
> 标签：php, validation, kohana

我有 3 个使用验证消息的模型。其中 2 个适用于所有消息，包括 _external 消息。第三个从不返回自定义 _external 消息。对于每个模型，我得到错误的文件夹结构和方式都是相同的。

## 文件夹结构

`messages\models\verify`

## 捕捉错误

```
catch (ORM_Validation_Exception $e) 
{   
    return $e->errors('models/verify');
} 
```

## 传递给视图的错误

`array(1) { ["_external"]=> array(1) { ["activation_hash"]=> string(33) "activation hash must not be empty" } }`

## 输出外部错误

`<?= Arr::path($errors, '_external.activation_hash'); ?>`

## 消息\模型\verify_external.php

```
return array(
   'activation_hash' => array(
        'not_empty' => 'The email fields did not match'
    ),
); 
```

## 验证

```
$extra_rules = Validation::factory($values)
  ->rule('activation_hash', 'not_empty');
$email->check($extra_rules); 
```

那里应该有一切。同样，3 个模型中的一切都完全相同，所以我认为它是一个错字或错误。无论哪种方式，我都从代码中粘贴了所有内容，你看到我错过了什么吗？在调试尝试中，我将 _external.php 文件放在验证文件夹路径的每个目录中，但没有找到，所以我认为它不是我的文件夹结构。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T01:52:02.083

My solution was to include the validation messages in an existing message file. The purpose of the verify action in my example above was to verify a users email address. I added the external verify messages to the external email array and it worked as intended.

# servlets - Tomcat 7.x 是否需要我设置任何环境变量？

> ID：14595806
> 
> 赞同：0
> 
> 时间：2013-01-30T02:41:24.367
> 
> 标签：servlets, tomcat7

我目前正在阅读`Head First: Servlet and JSP`。他们希望我使用 Tomcat 5.5（几乎已经过时了）。相反，我下载了`Tomcat 7.x`.

现在，我按照他们的指示编写第一个 servlet，但我想我必须设置一些路径。我已经设置了`path`for`jdk`的 bin 目录，所以如果我愿意的话，我可以从命令行编译 Java 程序。

**Tomcat 是否需要我设置任何环境变量？
如果是这样，是哪个？如何 ？**

我的 Tomcat 家的路径如下所示：`D:\Program Files\apache-tomcat-7.0.35-windows-x86\apache-tomcat-7.0.35`

**操作系统：** Windows 7 家庭高级版 32 位

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T03:14:00.473

你需要为你的servlet-api、jsp-api、el-api、commons-beanutils设置类路径，然后你需要设置ant_home、设置tomcat_home和catalina_home

例如：

**c:/apache-tomcat-7.0.27/run.bat:**

设置 JAVA_HOME=c:\Program Files\Java\jdk1.7.0_07

设置 PATH="c:\Program Files\Java\jdk1.7.0_07";%PATH%

设置 CLASSPATH=.;C:\apache-tomcat-7.0.27\lib\servlet-api.jar;C:\apache-tomcat-7.0.27\lib\jsp-api.jar;C:\apache-tomcat- 7.0.27\lib\el-api.jar;C:\apache-tomcat-7.0.27\lib\commons-beanutils-1.8.0-BETA

设置 ANT_HOME=c:\apache-tomcat-7.0.27

设置 TOMCAT_HOME=C:\apache-tomcat-7.0.27

设置 CATALINA_HOME=C:\apache-tomcat-7.0.27

C:\apache-tomcat-7.0.27\bin\startup.bat

`Another`方法是安装 NetBeans IDE，它会为您完成所有工作 - 您只需单击 RUN 即可运行您的项目

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T02:51:22.547

鉴于您在 Windows 上，您需要查看的文件是`catalina.bat`，而不是`catalina.sh`特定于 Unix 和类 Unix 系统的文件。如果您使用的是 cygwin，请忽略我在这里的建议并使用 catalina.sh。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T02:47:23.170

您应该只需要设置 JAVA_HOME。查看 catalina.bat。

# apache - 如何使用 Apache mod_rewrite 将文件名中的破折号转换为新目录？

> ID：14595807
> 
> 赞同：0
> 
> 时间：2013-01-30T02:41:23.607
> 
> 标签：apache, mod-rewrite

我想使用 Apache 的 mod_rewrite 来将文件名中的所有破折号视为从顶部开始的单独文件夹，反之亦然。

例如，如果有人要访问`/events/booking/?id=1`该文件，则`events-booking.php?id=1`实际上会被请求。

我拥有的当前脚本取自下面的 StackOverflow 帖子，它只是删除了文件的扩展名，但我也想添加上面的内容。

[https://stackoverflow.com/a/1698807/2023781](https://stackoverflow.com/a/1698807/2023781)

任何有关如何修改我现有的 mod_rewrite 脚本块的帮助将不胜感激（不幸的是，我对正则表达式并不是很擅长）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T03:48:09.463

在我的脑海中，应该这样做：

`RewriteRule ^([^/]*)/([^/]*)/$ /$1-$2.php [L]`

`^`= 路径的开始

`([^/]*)`= 匹配除斜线以外的所有字符

`$`= 路径结束

`$1`并且`$2`是路径中的两个匹配字符串。

查询字符串应按原样保留。

# ruby-on-rails - Rails 3.2 和 will_paginate，自定义生成的分页链接

> ID：14595808
> 
> 赞同：0
> 
> 时间：2013-01-30T02:41:39.127
> 
> 标签：ruby-on-rails, ruby-on-rails-3, will-paginate

我有一个单页网站，在轮播中有不同的控制器操作。以我现在喜欢的方式工作。我想对结果进行分页。默认情况下 will_paginate 正在生成如下所示的链接：

**/links/new?page=3#make-links**

我需要这条路径看起来像：

**/?page=3#show-links**

我的控制器中有这个方法，我在任何需要分页的操作中调用它：

```
@links = Link.paginate(:page => params[:page], :per_page => 5) 
```

在我看来，我称之为，用一个助手以性感的 twitter bootsrap 风格呈现分页：

```
<%= will_paginate @collection, :renderer => BootstrapPagination::Rails %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T00:04:55.643

我通过执行以下操作在我的路由文件中处理了这个：

```
 resources :links
    get "(?page=:page)#show-links" => "links#index", :as => :links 
```

啵啵！

# logging - 使用 Arduino 访问 Google Drive

> ID：14595809
> 
> 赞同：5
> 
> 时间：2013-01-30T02:41:45.967
> 
> 标签：logging, arduino, google-drive-api

我正在使用 Arduino 板进行数据记录。我的 Arduino 通过 WiFi shield 连接到 Internet。Arduino 使用一种 C++ 编程语言。

有人知道我如何使用 Arduino 从 Google Drive 访问文件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T13:09:12.193

如果您使用 Arduino 进行数据记录，您可能希望记录传感器接收到的数据并将其上传到您的谷歌驱动器帐户。

访问 google 驱动器并非易事，您需要与 OAuth 协议交互，因此您可能希望将其上传到 google 文档电子表格。

一个简单的教程可以在[这里找到](http://myinternetofthings.wordpress.com/2011/06/11/arduino-to-google-docs/)

希望能帮助到你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-29T00:12:53.057

使用新的 google 电子表格，您可以访问 API 并从 Temboo 等服务直接写入工作表。

[https://temboo.com/arduino/others/update-google-spreadsheet](https://temboo.com/arduino/others/update-google-spreadsheet)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T23:13:24.393

如果您的 arduino 可以进行 HTTP 发布，您可以这样做：http: [//leftbraintinkering.blogspot.com/2011/07/datalogging-with-google-spreadsheets.html](http://leftbraintinkering.blogspot.com/2011/07/datalogging-with-google-spreadsheets.html)

我仍在努力弄清楚我自己的应用程序的细节，所以现在我能提供的只是链接，但它应该让你感动。

# php - 使用 $_POST 在同一页面上获取输入值

> ID：14595810
> 
> 赞同：5
> 
> 时间：2013-01-30T02:41:49.087
> 
> 标签：php

对不起，如果这是一个相当基本的问题。

我有一个带有 HTML 表单的页面。代码如下所示：

```
<form action="submit.php" method="post">
  Example value: <input name="example" type="text" />
  Example value 2: <input name="example2" type="text" />
  <input type="submit" />
</form> 
```

然后在我的文件`submit.php`中，我有以下内容：

```
<?php
  $example = $_POST['example'];
  $example2 = $_POST['example2'];
  echo $example . " " . $example2;
?> 
```

但是，我想消除对外部文件的使用。我想要同一页面上的 $_POST 变量。我该怎么做？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-30T02:44:07.287

把它放在一个 php 文件中：

```
<?php
  if (isset($_POST['submit'])) {
    $example = $_POST['example'];
    $example2 = $_POST['example2'];
    echo $example . " " . $example2;
  }
?>
<form action="" method="post">
  Example value: <input name="example" type="text" />
  Example value 2: <input name="example2" type="text" />
  <input name="submit" type="submit" />
</form> 
```

它将整个文件作为 PHP 执行。第一次打开时，`$_POST['submit']`不会设置，因为表单还没有发送。单击提交按钮后，它将打印信息。

# facebook - 无法传达已批准的重新提交操作的说明

> ID：14595811
> 
> 赞同：1
> 
> 时间：2013-01-30T02:42:10.257
> 
> 标签：facebook, submit, facebook-opengraph

我的操作已通过操作标记获得批准。但是过了一段时间，我收到一条消息，指出操作标记对我的应用程序无效，并考虑使用提及标记。目前状态是：

> 批准状态：可供用户使用（需要更改） 此操作类型可供所有用户使用，但您最近的提交需要更改。
> 
> 能力状态：
> 
> *   用户消息（实时）- 允许用户编写附加到此操作的个性化消息。
> *   标签（需要更改） - 允许我的应用程序的用户标记其他用户执行此操作。
> *   显式共享（实时） - 此操作可以指定用户显式共享一个操作。

所以我实现了提及标记，但每次我重新提交时，我都会收到以下响应：

> 我们无法确定您要求哪些附加属性。请指定您是否计划实施动作标记、提及标记或两者兼而有之。如果您请求提及标记，则必须在提交操作时同时选择用户消息和标记操作属性。如果您同时请求动作标记和提及标记，我们将需要能够重现这两个动作属性。有关详细信息，请参阅此处： [https ://developers.facebook.com/docs/opengraph/submission_criteria/action_properties/#mentiontagging](https://developers.facebook.com/docs/opengraph/submission_criteria/action_properties/#mentiontagging)

当然，在重新提交时，我非常清楚地解释了我想提及标记，并展示了重现的步骤。我还选择了用户消息和标签操作属性。似乎测试人员只是忽略了我在重新提交对话框中写的消息。

我还让我感到困惑的是，重新提交对话框只有您输入如何重现操作的第一步。它缺少普通提交对话框第一次解释附加属性时的额外编辑框。

也许已经批准的操作（需要更改附加属性）的重新提交对话框中的某种错误不允许我编写我需要的消息？

# c# - 自定义 Windows 窗体

> ID：14595814
> 
> 赞同：0
> 
> 时间：2013-01-30T02:42:16.327
> 
> 标签：c#, windows-forms-designer

我想自定义表单的外观，例如删除所有按钮（最大化、最小化、退出）。我还想自定义我的标题栏。有没有办法做到这一点？

我知道FormBorderStyle，但我想要的是至少在这个表单的顶部添加一个自定义标题栏，使用我自己的颜色和样式，就像表单周围的边框一样。有可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T02:49:03.287

有两种方法可以做到这一点。

1.  挂钩 Windows API 以重绘表单边框（有点困难。）

2.  使用“none”然后绘制一个标题栏（GDI+），看起来就像你拥有它一样！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T08:00:59.233

您可以在表单属性中删除最小化和最大化按钮并将其设置为 false，或者简单地通过代码：

```
this.MaximizeBox = false;
this.MinimizeBox = false; 
```

您还可以通过代码隐藏按钮

```
button1.Hide(); 
```

或者干脆禁用它

```
button1.Enabled = false; 
```

希望这可以帮助 ：）

# ios - 尽管有主键，MagicalRecord 关系映射仍会复制对象

> ID：14595815
> 
> 赞同：5
> 
> 时间：2013-01-30T02:42:22.560
> 
> 标签：ios, core-data, nsmanagedobject, magicalrecord

我需要一些帮助来解决我在导入 MagicalRecord 数据时遇到的问题。我的印象是 MagicalRecord 能够通过查看主键 ( `relatedByAttribute`) 来处理关系映射，而无需复制对象。

这是一个简单的 JSON：

```
[
  { 
    parentId: "<unique id>",
    parentName : "<name>",
    children : [
                  {
                     childId: "<unique id>",
                     childName: "<name>"
                  },
                  {
                     childId: "<unique id>",
                     childName: "<name>"
                  }
               ]
  },
  { <another parent with children> }
] 
```

我有一个与 NSManagedObject`Parent`有一对多关系的`Child`NSManagedObject。关系名称是`children`，我已经分别设置`relatedByAttribute`了`Child`和`Parent`到`childId`和`parentId`。

当我解析 JSON 时，`Parent`它不会重复，它会正确检查主键并使用现有对象（如果存在）。但是，`Children`每次我解析 JSON 时，它都会复制对象。如果我单独解析`Children`（所以 JSON 只包含一个带有子字典的数组），正确映射数据并使用`Children`数据库中已经存在的现有对象没有问题。

我对 MagicalRecord 如何映射关系有误解和错误的期望吗？目前，我已经使用“importChildren:”设置了一个扩展类，我可以在其中手动处理所有查找并相应地创建/导入对象。

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-26T13:02:55.247

我设法解决了这个问题。

我所做的是在关系和实体`relatedByAttribute`的用户信息字典中添加。`children``Child`

因此，单击关系并设置`relatedByAttribute`为`childId`（在我上面的示例中）并单击左侧的子实体，为此也在实体本身的用户信息字典中设置`relatedByAttribute`为`childId`。

这允许 Magical Record 使用现有对象正确映射或在需要时创建新对象 - 假设 ID 属性是 100% 唯一的！

![在此处输入图像描述](../Images/ea1cc0ad28f77015befc17bb400ae2d6.png)

# jquery - jQuery $.ajax multipart/form-data 没有完全上传图片

> ID：14595816
> 
> 赞同：1
> 
> 时间：2013-01-30T02:42:31.420
> 
> 标签：jquery, image, upload, multipartform-data

我有一个移动网站，允许用户上传他们在设备上拍摄的图像以及他们输入的一些文本。目前它将图像编码为base64，但不幸的是它膨胀了大约30%。`multipart/form-data`我想通过 POST实现方法来优化这个特性。

以下是我如何实现它。在服务器端，我有一个正在测试的 php 脚本。它将二进制数据保存到文件中**，但它只捕获 9 个字节**，因为服务器认为数据是**text/plain**类型，因此只**捕获前 9 个可打印字符**。在这种情况下，我正在使用 PNG 文件进行测试，这就是我得到的。

![PNG上传的文件是十六进制的。 仅捕获 9 个字节](../Images/70b03e83472ba0231e77d51f3c78438f.png)

有人看到这里有什么不寻常的地方要添加或删除吗？它快把我逼疯了。

```
 var boundary = 'boundary' + Math.floor(Math.random() * (new Date().getMilliseconds()) );

        var data = "--" + boundary + '\r\n';
            data+= "content-disposition: form-data; name=\"txt\"" + '\r\n';
            data+= "content-type: text/plain" + '\r\n\r\n';
            data+= "Text+data\r\n" + '--' + boundary + '\r\n' ;
            data+= "content-disposition: form-data; name=\"img\"" + '\r\n';
            data+= "content-length: " + (image_length) + '\r\n';
            data+= "content-type: application/octet-stream" + '\r\n\r\n';
        var body_length = image_length + ('\r\n--' + boundary).length + data.length;
            data+= binary_data + '\r\n--' + boundary;

        $.ajax({ type : 'POST', url : 'post.test.php?len=' + image_length,
            data : data, contentType: 'multipart/form-data, boundary=' + boundary, contentLength: body_length
        }); 
```

# php - 将 jquery 代码联机时出现错误行

> ID：14595819
> 
> 赞同：2
> 
> 时间：2013-01-30T02:42:42.910
> 
> 标签：php, jquery

计划用**lightbox**将一个可滚动的画廊放到网上。我遇到了一个错误，我的代码之一有**意外的“：”，预期之一：“}”，“”，** ATTR

使用 CMS 变得简单。对于 cmsms 错误，它显示

> 在文件 /xxx/xxx/public_html/lib/smarty/sysplugins/smarty_internal_templatecompilerbase.php 中的第 702 行

这是我打算放在我的网站上的代码。 [http://sorgalla.com/jcarousel/](http://sorgalla.com/jcarousel/)

我将在这里发布我的错误以及之后的完整脚本。

**错误代码。**

```
jQuery("#gallery-prev").click(function(){
            if(jQuery("#gallery").position().left < 0 && !jQuery("#gallery").is(":animated")){
                jQuery("#gallery").animate({left : "+=" + imageWidth + "px"});
            }
            return false;
        }); 
```

**完整的代码。**

```
<script type="text/javascript">
$(window).load(function(){ 

    // Gallery
    if(jQuery("#gallery").length){

        // Fancybox
        jQuery("#gallery li a").fancybox({
            'titleShow'     : false,
            'transitionIn'  : 'elastic',
            'transitionOut' : 'elastic'
        });

        // Variables aren't use properly due to Webkit
        var totalImages = jQuery("#gallery > li").length, 
            imageWidth = jQuery("#gallery > li:first").outerWidth(true),
            totalWidth = imageWidth * totalImages,
            visibleImages = Math.round(jQuery("#gallery-wrap").width() / imageWidth),
            visibleWidth = visibleImages * imageWidth,
            stopPosition = (visibleWidth - totalWidth);

        jQuery("#gallery").width(totalWidth);

        jQuery("#gallery-prev").click(function(){
            if(jQuery("#gallery").position().left < 0 && !jQuery("#gallery").is(":animated")){
                jQuery("#gallery").animate({left : "+=" + imageWidth + "px"});
            }
            return false;
        });

        jQuery("#gallery-next").click(function(){
            if(jQuery("#gallery").position().left > stopPosition && !jQuery("#gallery").is(":animated")){
                jQuery("#gallery").animate({left : "-=" + imageWidth + "px"});
            }
            return false;
        });
    }

});
</script> 
```

感谢所有帮助。谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-30T12:46:27.907

您似乎在使用 smarty，问题是 smarty 与左/右括号 {} 混淆了。尝试用 smarty 的 {literal} 标签包围脚本，即：

```
{literal}
<script.....

</script>
{/literal} 
```

此外，如果您使用 smarty 3，它可能会在没有文字标签的情况下工作，只需在每个“{”之后和每个“}”之前添加一个空格

```
jQuery("#gallery").animate({ left : "+=" + imageWidth + "px" }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T03:08:34.387

看来您的错误在这里：

> jQuery("#gallery").animate({left : "+=" + imageWidth + "px"});

从[这里](http://api.jquery.com/animate/)看来，正确的合成器是 .animate({left: imageWidth + "px"});

您是否对原始示例进行了任何更改？您可以将大量免费的封面流/内容流库用于您的动画画廊。我只熟悉 javascript，这是我最近使用的一个，非常好[http://jacksasylum.eu/ContentFlow/](http://jacksasylum.eu/ContentFlow/)

# php - 使用 Authorize.net AIM API 退款

> ID：14595824
> 
> 赞同：1
> 
> 时间：2013-01-30T02:43:15.523
> 
> 标签：php, api, payment-gateway, authorize.net, authorize.net-aim

我正在尝试找到一种使用 Authorize.net 的 AIM API 退款的方法。我在这里找到了示例代码：[https](https://github.com/stymiee/Authorize.Net-XML) ://github.com/stymiee/Authorize.Net-XML 。这是我在示例中使用的代码：

```
require('../../config.inc.php');
require('../../AuthnetXML.class.php');

$xml = new AuthnetXML(AUTHNET_LOGIN, AUTHNET_TRANSKEY, AuthnetXML::USE_DEVELOPMENT_SERVER);
$xml->createTransactionRequest(array(
    'refId' => rand(1000000, 100000000),
    'transactionRequest' => array(
        'transactionType' => 'refundTransaction',
        'amount' => 5,
        'payment' => array(
            'creditCard' => array(
                'cardNumber' => 'XXXX1111',
                'expirationDate' => '122016'
            )
        ),
        'authCode' => '2165668159'
    ),
)); 
```

我不断收到一条错误消息，提示卡代码丢失。有什么想法可以让退款通过吗？

**新代码：**

```
 $xml = new AuthnetXML(AUTHNET_LOGIN, AUTHNET_TRANSKEY);
 $xml->createTransactionRequest(array(
    'refId' => rand(1000000, 100000000),
    'transactionRequest' => array(
        'transactionType' => 'refundTransaction',
        'amount' => 1.00,
        'payment' => array(
            'creditCard' => array(
                'cardNumber' => 'XXXX1014',
                'expirationDate' => '122025',
            )
        ),
        'refTransId' => '4928163616',
    ),
)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T02:44:49.093

```
$xml = new AuthnetXML(AUTHNET_LOGIN, AUTHNET_TRANSKEY);
$xml->createTransactionRequest(array(
    'refId' => rand(1000000, 100000000),
    'transactionRequest' => array(
        'transactionType' => 'refundTransaction',
        'amount' => 1.00,
        'payment' => array(
            'creditCard' => array(
                'cardNumber' => 'XXXX1014',
                'expirationDate' => '122025',
            )
        ),
        'refTransId' => '4928163616',
        'transactionSettings' => array(
            'setting' => array(
                0 => array(
                    'settingName' => 'emailCustomer',
                    'settingValue' => 'true'
                ),
            )
        ),
    ),
)); 
```

# codeigniter - 检查 CodeIgniter session_id 是否未设置

> ID：14595834
> 
> 赞同：0
> 
> 时间：2013-01-30T02:44:33.623
> 
> 标签：codeigniter, session, variables, set

我正在尝试检查它是否在我的 codeigniter 应用程序中设置，例如：

```
elseif(!isset($this->session->userdata('session_id'))){ ## SESSION data is NOT set
            // load a generic 'issue' occurred view.
        } 
```

但我不断收到此错误，`!isset`在 Codeigniter 中无效？我该如何轻松检查呢？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T03:00:40.740

您必须使用如下代码：

```
$id = $this->session->userdata('session_id');
// your other code
elseif(!isset($id)){ 
        // load a generic 'issue' occurred view.
} 
```

你可以[在这里看到的原因](https://stackoverflow.com/questions/1075534/cant-use-method-return-value-in-write-context)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T03:14:42.423

你也可以这样做，

```
elseif($this->session->userdata('session_id') !== false)
{
      // SESSION data is NOT set
      // load a generic 'issue' occurred view.
} 
```

***注意：如果您尝试访问的项目不存在，该函数将返回 FALSE（布尔值）。***

# primefaces - PrimeFaces 对话框在对话框外单击时关闭

> ID：14595835
> 
> 赞同：10
> 
> 时间：2013-01-30T02:44:35.613
> 
> 标签：primefaces

我有一个典型的 primefaces 对话框，效果很好，但是当有人在对话框外单击时，我找不到任何关闭它的选项。我已经看过一些 jquery 示例，我猜我可以将它们调整为 primefaces 对话框，但首先要确保没有解决方案？

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2017-02-06T18:06:52.467

只是分享我在全球范围内适用于任何模式对话框的解决方案。代码改编自[http://blog.hatemalimam.com/get-widgetvar-by-id/](http://blog.hatemalimam.com/get-widgetvar-by-id/)。

当您显示一个对话框时，会创建一个掩码（具有 .ui-dialog-mask 类），它具有打开的对话框的 id，并附加一个“_modal”关键字。

该脚本在单击该掩码时获取该 ID，删除该附加文本，并找到要关闭的相应小部件。

要使用它，只需将代码保存在 .js 文件中，导入页面即可。

在 Primefaces 6.0 上测试。

```
 /**
     * Listener to trigger modal close, when clicked on dialog mask.
     */
    $(document).ready(function(){
    $("body").on("click",'.ui-dialog-mask',function () {
        idModal = this.id;
        idModal = idModal.replace("_modal","");
        getWidgetVarById(idModal).hide();
    })
});

    /**
     * Returns the PrimefacesWidget from ID
     * @param id
     * @returns {*}
     */
    function getWidgetVarById(id) {
        for (var propertyName in PrimeFaces.widgets) {
            var widget = PrimeFaces.widgets[propertyName];
            if (widget && widget.id === id) {
                return widget;
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-30T06:53:49.143

您可以为 onClick 事件编写一个 javascript 函数并关闭对话框。

```
<h:body onclick="closeDialog();">

function closeDialog(){
   widgetWarDialog.hide();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-26T09:41:16.760

对于“模态”primefaces 对话框，我还有另一个解决方案。

当我的按钮被点击打开对话框时，我只想添加点击事件。当我单击 body 元素上的任何内容时，并非总是如此。

将 styleClass 添加到您的按钮。例如 styleClass="mybutton-class"。然后将 widgetVar 添加到您的`<p:dialog widgetVar="widgetVarName" ...>`

```
 jQuery(".mybutton-class").on("click", function() {
            jQuery('.ui-widget-overlay').click(function(){
                PF('widgetVarName').hide();
            })
        }); 
```

Ajax 更新事件的附加信息：

我构建了 3 个 JS 函数。

```
//for the first time the page is loaded
jQuery(document).ready(function() {
    onLoadFunction();
});

//to load the script after you reload your page with ajax
jQuery(document).on("pfAjaxComplete", function(){
    onLoadFunction();
});

//your code you handle with
function onLoadFunction(){
   jQuery(".mybutton-class").on("click", function() {
       jQuery('.ui-widget-overlay').click(function(){
           PF('widgetVarName').hide();
       })
   });
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-08T15:47:46.717

这是一个 8 年前的问题，但最近我遇到了同样的问题，这是我的模态 primefaces 对话框的解决方案。

我写了一个js函数，它在对话周围的覆盖面板中添加了一个监听器

```
function addListenerOnDialogueOverlay() {
    document.getElementById('test-dialog_modal')
        .addEventListener('click', function (event) {
            PF('test-dialog-widget').hide();
        });
} 
```

并在对话的“onShow”标签中调用函数

```
<p:dialog id="test-dialog"
          widgetVar="test-dialog-widget"          
          modal="true"          
          onShow="addListenerOnDialogueOverlay()"> 
```

# php - 在 OSX Mountain Lion 上为 PHP 安装 mcrypt 扩展

> ID：14595841
> 
> 赞同：40
> 
> 时间：2013-01-30T02:45:01.720
> 
> 标签：php, macos, apache, mcrypt

提前为潜在的 n00b 问题道歉，我正在尝试在我的 OSX Mountain Lion 机器上安装 PHP 的 mcrypt 扩展。

终端中的以下步骤是我迄今为止为实现 PHP 安装所做的工作

```
cd /path/to/downloaded/php-5.3.21/ext/mcrypt/
/usr/bin/phpize
./configure
cd /path/to/downloaded/php-5.3.21
./configure --with-config-file-path=/private/etc/php.ini --with-apxs2=/usr/sbin/apxs
make
sudo make install 
```

这似乎运行良好并且可以很好地安装 PHP 5.3.21。然后我做了

```
sudo nano /private/etc/php.ini 
```

并包括

```
extension=mcrypt.so 
```

随着 Apache 重新启动， phpinfo() 不会显示已加载 mcrypt 扩展。

然后我尝试在 php.ini 中指定 extension_dir，但还是没有成功。

我已经做好了

```
locate mcrypt.so
/opt/local/lib/php/extensions/no-debug-non-zts-20090626/mcrypt.so
/usr/local/Cellar/php53-mcrypt/5.3.18/mcrypt.so 
```

并尝试将两个目录都作为 extension_dir，但没有成功。

经过大量谷歌搜索后，我也尝试了以下方法

```
./configure --with-config-file-path=/private/etc/php.ini --with-apxs2=/usr/sbin/apxs --with-mcrypt 
```

这似乎工作正常，但是在“make”之后，它返回

```
ext/mcrypt/mcrypt.o: No such file or directory
ext/mcrypt/mcrypt_filter.o: No such file or directory 
```

再次，没有成功。

我究竟做错了什么？似乎 mcrypt.so 的物理编译没有发生，或者编译不正确，因为我怀疑在定位下找到了另一个 mcrypt.so？

有人请帮忙吗？我已经浏览了谷歌搜索的页面，但没有运气！

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2013-01-30T09:07:21.060

我倾向于在 Mac 上使用 Homebrew。它将为您安装和配置所有东西。
[http://mxcl.github.com/homebrew/](http://mxcl.github.com/homebrew/)

然后你应该能够安装它`brew install mcrypt php53-mcrypt`并且它会正常工作（tm）。

您可以将 替换为`53`您正在使用的任何 PHP 版本，例如`php56-mcrypt`或`php70-mcrypt`。如果您不确定，请使用`brew search php`.

还请记住，如果您使用的是内置的 Mac PHP，它已安装到`/usr/bin`您可以在终端上看到您正在使用的 php `which php`，它会返回路径。

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2013-07-16T00:12:44.020

我刚刚在山狮上经历了这个。Homebrew 阻止了它认为丢失但实际上是最新的 libiconv。在尝试让它识别 libiconv 一个小时后，我放弃了并以老式方式安装它，总共花了五分钟......

```
(download your php version)
$ wget http://www.php.net/get/php-5.3.21.tar.gz/from/a/mirror
$ tar -xvzf php-5.3.21.tar.gz
$ cd php-5.3.21/ext/mcrypt
$ phpize
$ ./configure
$ make
$ make test
$ sudo make install 
```

mcrypt.so 现在在您的 PHP ext 目录中（`/usr/lib/php/extensions/no-debug-non-zts-20090626/`在我的情况下），现在您需要作为模块添加到 php.ini

```
$ vi /etc/php.ini
$ (insert) extension=mcrypt.so
$ sudo apachectl restart 
```

完成 - 无需冲泡。某人。

* * *

## 回答 #3

> 赞同：38
> 
> 时间：2014-02-15T20:32:52.770

# 安装 php-`mcrypt`不使用`port`or`brew`

> *注意：这些说明很长，因为它们打算彻底。这个过程实际上相当简单。如果你是一个乐观主义者，你可以跳到**构建 mcrypt 扩展** 部分，但你很可能会看到我所做的错误，告诉我先安装`autoconf`和安装`libmcrypt`。*

我刚刚在全新安装的 OSX 10.9 上完成了此操作。对我有用的解决方案与**ckm的解决方案***非常*接近——为了完整起见，我将他们的步骤以及我自己的步骤都包括在内。我的主要目标（除了“拥有”）是以对整个系统影响最小的方式执行安装。这意味着手动做事（不，不）**`mcrypt``port``brew`**

 **要手动执行操作，您首先需要几个依赖项：一个用于构建 PHP 模块，另一个用于`mcrypt`专门的。这些是`autoconf`and `libmcrypt`，您可能已经拥有其中任何一个，但在全新安装的 OSX 10.9 中您将不会拥有这两个。

## 自动配置

Autoconf（由于缺乏更好的描述）用于告诉不完全不同但仍然非常不同的系统如何编译东西。它允许您使用与在 OSX 上相同的一组基本命令在 Linux 上构建模块，例如，尽管它们具有不同的文件系统层次结构等。我使用[了 Ares 在 StackOverflow 上描述的方法](https://stackoverflow.com/questions/9322742/php-autoconf-errors-on-mac-os-x-10-7-3-when-trying-to-install-pecl-extensions)，我将在此处重现为了完整性。这个非常简单：

```
$ mkdir -p ~/mcrypt/dependencies/autoconf
$ cd ~/mcrypt/dependencies/autoconf
$ curl -OL http://ftpmirror.gnu.org/autoconf/autoconf-latest.tar.gz
$ tar xzf autoconf-latest.tar.gz
$ cd autoconf-*/
$ ./configure --prefix=/usr/local
$ make
$ sudo make install 
```

接下来，通过运行验证安装：

```
$ which autoconf 
```

应该返回`/usr/local/bin/autoconf`

## libmcrypt

接下来，您将需要`libmcrypt`, 用于提供`mcrypt`扩展的内容（扩展本身就是为这个库提供的 PHP 接口）。我使用的方法基于[此处](http://michaelgracie.com/2011/07/21/plugging-mcrypt-into-php-on-mac-os-x-lion-10-7/)描述的方法，但我已尽力简化事情：

首先，下载`libmcrypt`源代码，可从[SourceForge](http://sourceforge.net/projects/mcrypt/files/Libmcrypt/)获得，并且在撰写本文时可用，具体而言，位于：

[http://sourceforge.net/projects/mcrypt/files/Libmcrypt/2.5.8/libmcrypt-2.5.8.tar.bz2/download](http://sourceforge.net/projects/mcrypt/files/Libmcrypt/2.5.8/libmcrypt-2.5.8.tar.bz2/download)

你需要跳过标准的 SourceForge 箍来获得真正的下载链接，但是一旦你有了它，你可以把它传递给这样的东西：

```
$ mkdir -p ~/mcrypt/dependencies/libmcrypt
$ cd ~/mcrypt/dependencies/libmcrypt
$ curl -L -o libmcrypt.tar.bz2 '<SourceForge direct link URL>'
$ tar xjf libmcrypt.tar.bz2
$ cd libmcrypt-*/
$ ./configure
$ make
$ sudo make install 
```

我知道验证这是否有效的唯一方法是通过扩展本身的`./configure`步骤（如下）`mcrypt`

## 构建 mcrypt 扩展

这是我们的实际目标。希望短暂的依赖地狱现在已经结束。

首先，我们需要获取`mcrypt`扩展的源代码。这是所有 PHP 源代码中最容易获得的。所以：确定你需要什么版本的 PHP 源代码。

```
$ php --version # to get your PHP version 
```

现在，如果你幸运的话，你的当前版本将可以从主镜像下载。如果是，您可以键入以下内容：

```
$ mkdir -p ~/mcrypt/php
$ cd ~/mcrypt/php
$ curl -L -o php-5.4.17.tar.bz2 http://www.php.net/get/php-5.4.17.tar.bz2/from/a/mirror 
```

不幸的是，我当前的版本（在本例中为 5.4.17）不可用，所以我需要使用[http://downloads.php.net/stas/](http://downloads.php.net/stas/)（也是官方 PHP 下载站点）上的替代/历史链接。对于这些，您可以使用以下内容：

```
$ mkdir -p ~/mcrypt/php
$ cd ~/mcrypt/php
$ curl -LO http://downloads.php.net/stas/php-5.4.17.tar.bz2 
```

同样，基于您当前的版本。

一旦你有了它，（以及上面的所有依赖项），你就可以进入实际构建/安装模块的主要过程。

```
$ cd ~/mcrypt/php
$ tar xjf php-*.tar.bz2
$ cd php-*/ext/mcrypt
$ phpize
$ ./configure # this is the step which fails without the above dependencies
$ make
$ make test
$ sudo make install 
```

理论上，`mcrypt.so`现在在您的 PHP 扩展目录中。接下来，我们需要告诉 PHP 这件事。

## 配置 mcrypt 扩展

您的`php.ini`文件需要被告知加载`mcrypt`. 默认情况下，在 OSX 10.9 中，它实际上具有特定的配置信息，但除非您告诉它，否则`mcrypt`它实际上不会激活。`mcrypt`

默认情况下，该`php.ini`文件不存在。相反，该文件`/private/etc/php.ini.default`列出了默认配置，并且可以用作创建 "true" 的良好模板`php.ini`（如果它尚不存在）。

要确定是否`php.ini`已经存在，请运行：

```
$ ls /private/etc/php.ini 
```

如果有结果，它已经存在，你应该跳过下一个命令。

要创建`php.ini`文件，请运行：

```
$ sudo cp /private/etc/php.ini.default /private/etc/php.ini 
```

接下来，您需要添加以下行：

```
extension=mcrypt.so 
```

文件中的某处。我建议在文件中搜索`;extension=`，并在第一次出现之前立即添加它。

一旦完成，安装和配置就完成了。您可以通过运行来验证这是否有效：

```
php -m | grep mcrypt 
```

哪个应该输出“ `mcrypt`”，没有别的。

如果您使用的 PHP 依赖于 Apache 的`httpd`，您将需要重新启动它，然后才能注意到 Web 上的更改。您可以通过以下方式进行：

```
$ sudo apachectl restart 
```

你完成了。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2013-11-21T01:11:17.833

## 为什么会出现此错误

`mcrypt.so`如果使用语法包含其中一个文件`extension="mcrypt.so"`但该文件不在`extension_dir`路径中（使用`<?php phpinfo(); ?>`或`php -i`检查），PHP 会抱怨。

它还会告诉您`php.ini`正在加载哪个配置文件，以便您知道设置的来源。`/usr/local/etc/php/5.4/php.ini`如果您使用的是自制版本，很可能会出现这种情况。

请注意它下面的部分，例如“扫描此目录以获取其他 .ini 文件”，因为这意味着它为您提供了放置自己文件的位置，就像`tweaks.ini`在主配置文件之后加载的那样，您可以进行更改并轻松跟上它们。还要记住，这个目录中的所有文件都是按字母顺序加载的，所以如果你有一个`adjustments.ini`包含`mcrypt`指令的调用文件，并且有一个`mcrypt.ini`，你的设置很可能会被覆盖。

指定的一种替代方法`extension="mcrypt.so"`是指定文件的完整路径`mcrypt.so`。另一个选项是编辑`extension_dir`设置。

## 什么对我有用

在小牛队我也不必这样做。我进行了全新安装，`homebrew`然后使用以下方法添加了 josegonzalez 水龙头：

```
brew tap josegonzalez/homebrew-php 
```

（我的另一台笔记本电脑正在运行 Mountain Lion，并且在此设置中也使用自制软件。）

在你点击了**[那个很棒的 repo](https://github.com/josegonzalez/homebrew-php)**之后，你可以安装`php`和`mcrypt`使用类似的东西：

```
brew install php54 php54-mcrypt 
```

## 如果这不起作用怎么办（我为什么要使用自制软件？）

我强烈建议在从源代码下载和构建它之前尝试这条路线。从源代码构建并不难 - 但我不想维护它。这是首先使用的原因之一`homebrew`——它是一个包管理器（拥有一个庞大的社区）。

该项目有很多开发，`homebrew`如果您有问题，我建议您查看他们的[问题页面](https://github.com/josegonzalez/homebrew-php/issues)

**所以是的，你可以从源代码构建它，如果你只想让 mcrypt 工作，这现在似乎是一个不错的选择，但你可能会讨厌自己以后这样做......**

如果您不想使用`php54`还有`php53`分支。他们在回购中有一些关于如何使用它们/在它们之间切换的说明。

如果您是 homebrew 的新手，您应该知道您使用 来检查还有什么可用的`brew search php54`，它会给出类似的内容：

```
php54                php54-lzf          php54-snappy        
php54-amqp           php54-mailparse    php54-solr          
php54-apc            php54-mcrypt       php54-ssh2          
php54-apcu           php54-memcache     php54-stats         
php54-boxwood        php54-memcached    php54-svm           
php54-chdb           php54-midgard2     php54-tidy          
php54-couchbase      php54-mongo        php54-timezonedb    
php54-dbase          php54-msgpack      php54-tokyotyrant   
php54-ev             php54-mysqlnd_ms   php54-twig          
php54-gearman        php54-oauth        php54-uploadprogress
php54-geoip          php54-opcache      php54-uuid          
php54-gmagick        php54-parsekit     php54-varnish       
php54-graphdat       php54-pcntl        php54-wbxml         
php54-http           php54-pdflib       php54-xcache        
php54-igbinary       php54-phalcon      php54-xdebug        
php54-imagick        php54-proctitle    php54-xhgui         
php54-inclued        php54-pspell       php54-xhp           
php54-intl           php54-pthreads     php54-xhprof        
php54-ioncubeloader  php54-raphf        php54-xmldiff       
php54-jsmin          php54-redis        php54-yac           
php54-judy           php54-riak         php54-yaf           
php54-leveldb        php54-runkit       php54-yaml          
php54-libevent       php54-scrypt       php54-yaz           
php54-libvirt 
```

# TLDR

*   如果可能的话，您应该使用`homebrew`安装`mcrypt`
*   如果您遇到错误，可能是因为您的配置文件搞砸了。检查`extension_dir`路径并找出`mcrypt.so`文件的位置并查看是否存在差异（或指定完整路径）

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2014-12-12T12:04:38.563

对我来说，在优胜美地

```
$ brew install mcrypt php56-mcrypt 
```

重新启动计算机

成功了。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2013-09-08T15:19:17.440

brew 的解决方案仅在以下情况下才有效：在您的 php.ini 中

```
nano /private/etc/php.ini 
```

添加这一行：

```
extension="/usr/local/Cellar/php53-mcrypt/5.3.26/mcrypt.so" 
```

警告！设置正确的 PHP 版本。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2013-05-23T15:21:32.697

如果您可以选择，我建议您通过自制软件安装所有内容。我转了一圈，但通过 brew 安装 php 5.x，然后安装必要的模块就可以了。我正在使用 php 5.4 并使用它来开始：

[https://github.com/josgonzalez/homebrew-php](https://github.com/josegonzalez/homebrew-php)

然后安装附加模块：

```
brew install php54-redis
brew install php54-xdebug
brew install php54-mcrypt 
```

...

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2013-07-23T09:27:54.450

对于那些想要保持 OS X 尽可能干净的人来说，另一种可能性是使用 vagrant [1] 来定义一个 php 开发环境。Vagrant 可以在无头模式下使用 VirtualBox [2]（在我的 13 英寸 2009 年中 MacBook Pro 上占 CPU 的大约 3%）来运行带有 web 服务器和 php 的虚拟机。

要轻松创建 vagrant 环境，您可以使用这个很棒的工具[https://puphpet.com/](https://puphpet.com/)

1.  [http://www.vagrantup.com/](http://www.vagrantup.com/)
2.  [https://www.virtualbox.org/](https://www.virtualbox.org/)

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2014-01-31T12:56:41.453

我将创建一个 shell 脚本来为 PHP 5.3 安装 mcrypt 模块，无需自制软件。

如果需要，脚本会安装 php autoconf 并为您的 php 版本编译模块。

链接在这里：[https ://gist.github.com/lucasgameiro/8730619](https://gist.github.com/lucasgameiro/8730619)

谢谢

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2014-08-29T07:59:42.247

**Brew 基础解决方案对我有用**

1.  安装这些包

    $brew install brew install mcrypt php54-mcrypt

2.  将默认的 php.ini.default 复制到 php.ini

    $sudo cp /private/etc/php.ini.default /private/etc/php.ini

3.  将此行添加到 php.ini 文件扩展部分 - 请使用您机器中的安装位置验证扩展路径

    扩展="/usr/local/Cellar/php54-mcrypt/5.3.26/mcrypt.so"

4.  重启你的 apache 服务器

    $apache 重启

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2013-11-16T07:15:08.510

没有任何效果，最后使用资源 @Here[和 Here](http://www.glenscott.co.uk/blog/install-mcrypt-php-extension-on-mac-os-x-lion/)使其[正常](http://www.coolestguidesontheplanet.com/how-to-install-mcrypt-for-php-on-mac-osx-lion-10-7-development-server/)工作；请记住对于 OSX Mavericks (10.9) 应该使用 PHP 5.4.17 或稳定的 PHP 5.4.22 源来编译 mcrypt。[PHP 源 5.4.22 在这里](http://us3.php.net/get/php-5.4.22.tar.gz/from/a/mirror)

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2014-12-29T23:12:11.550

这就是我所做的：

```
$ wget http://sourceforge.net/projects/mcrypt/files/Libmcrypt/2.5.8/libmcrypt-2.5.8.tar.gz/download
$ tar xzvf libmcrypt-2.5.8.tar.gz
$ ./configure
$ make
$ sudo make install

$ brew install autoconf

$ wget file:///Users/rmatikolai/Downloads/php-5.4.24.tar.bz2
$ tar xjvf php-5.4.24.tar.bz2
$ cd php-5.4.24/ext/mcrypt
$ phpize
$ ./configure # this is the step which fails without the above dependencies
$ make
$ make test
$ sudo make install

$ sudo cp /private/etc/php.ini.default /private/etc/php.ini
$ sudo vi /private/etc/php.ini 
```

接下来，您需要添加以下行：

```
extension=mcrypt.so

$ sudo apachectl restart 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2013-09-07T06:49:18.010

mycrypt.o 和 mcrypt_filter.o 位于 php 下载目录的 ext/.libs 中。只需将文件复制到 ext/mcrypt，然后再次运行 make && make install。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2018-07-05T19:17:28.603

所以运行后`brew install mcrypt php`，我必须通过 pecl 安装 php-mcrypt：

`pecl install mcrypt-1.0.1`

在撰写本文时，mcrypt 没有稳定的 pecl 版本，1.0.1 是 php 7.2 和 7.3 的当前版本，`brew install php`并将安装 php 7.2。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2018-04-26T15:52:31.127

随着最近 brew 的变化（不推荐使用 homebrew/php），您现在使用 mcrypt 安装 php，如下所示。

```
brew install php@5.6 -with-mcrypt=mcrypt 
```

您可能必须卸载以前安装的 php

* * *

## 回答 #16

> 赞同：-4
> 
> 时间：2014-10-07T09:28:00.960

> sudo apt-get install php5-mcrypt
> 
> ln -s /etc/php5/mods-available/mcrypt.ini /etc/php5/fpm/conf.d/mcrypt.ini
> 
> 服务 php5-fpm 重启
> 
> 服务 nginx 重启**

# oracle-adf - ADF：值列表更新多个字段

> ID：14595844
> 
> 赞同：0
> 
> 时间：2013-01-30T02:45:22.523
> 
> 标签：oracle-adf, jdeveloper, lov

我在视图对象中添加了一个 LOV，它更新了 6 个字段 - 全部通过 JDeveloper 中的 LOV 向导完成。在测试运行应用程序模块时它工作得非常好——在从 LOV 中选择一个值后，所有字段都会更新为正确的值。但是，在我的 JSPX 表单中，唯一更新的字段是 LOV 附加或启动的字段。

在我的表单上，我只显示 6 个字段中的 2 个 - 启动 LOV 的字段和 LOV 应该更新的另一个可编辑字段。这变得有趣的部分是我的视图对象中的 4 个其他字段，我没有放在我的表单中，由 LOV 成功更新！但是我在表单中留下的一个额外的可编辑字段没有更新。

这是为什么？

我可以在我的视图对象行实现类中编写一个方法来手动更新该可编辑字段，但我觉得通过声明性方法有更直接的方法。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T18:10:16.643

固定的！

我需要在表单的第二个字段上更新两个设置。

1.  删除了“必需”属性的默认绑定并将其设置为“假”。
2.  将“ShowRequired”设置为 true

之后，我保存了我的更改并重新运行了我的应用程序，并且该字段已正确更新！

我希望其他人觉得这有帮助！

# c++ - Gtkmm 获取标签颜色

> ID：14595845
> 
> 赞同：0
> 
> 时间：2013-01-30T02:45:27.073
> 
> 标签：c++, user-interface, gtk, gtkmm

我没有代码错误，我只是到处看了看，不知道该怎么做。我想获得 Gtk::widget 的颜色，即 Gtk::label。我可以像这样覆盖标签的颜色： l.override_color( c, l.get_state_flags() ); ，但我不知道如何从标签中恢复该颜色，谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T06:03:00.603

这是一种设置和获取标签颜色的方法：

```
// Set Color
Gtk::Label label("some label");
label.override_color (Gdk::RGBA("red"), Gtk::STATE_FLAG_NORMAL);

// Get Color
Glib::RefPtr<Gtk::StyleContext> stylecontext = label.get_style_context();
Gdk::RGBA color = stylecontext->get_color(Gtk::STATE_FLAG_NORMAL);
std::cout << color.to_string(); // Display color as "rgb(x, x, x)" 
```

# mysql - 如何避免查询时的笛卡尔积？

> ID：14595848
> 
> 赞同：1
> 
> 时间：2013-01-30T02:45:57.483
> 
> 标签：mysql, sql, cartesian

我正在构建一个分类广告的网络应用程序（这是我的第一个专业 PHP 应用程序）。我有一张带有广告的表格，还有一张带有每个广告图片的表格。每个广告最多可以有 4 张图片。当我每个广告只添加一张图片时，一切都很好。现在，当我为每个广告投放超过一张图片时，该广告会在列表中重复（每张图片一次）。这是我正在使用的 SQL：

```
SELECT 
sun_classified_ads.ad_id, 
sun_classified_ads.insertion_datetime, 
sun_classified_ads.title,                
sun_classified_ads.description, 
sun_classified_ads.maker, 
sun_classified_ads.model, 
sun_classified_ads.location, 
sun_classified_ads.price, 
sun_classified_ads_images.filename_mini, 
sun_classified_ads_images.size_attr_mini, 
sun_classified_ads_images.description AS image_description
FROM sun_classified_ads
INNER JOIN sun_classified_ads_images ON sun_classified_ads.ad_id =       sun_classified_ads_images.ad_id 
```

我该怎么做才能只使用 sun_classified_ads_images 表中该广告的第一张图片？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T02:52:56.023

MySQL 有一个称为隐藏列的“功能”。您可以使用以下方法为每个广告获取一张图片：

```
SELECT 
sun_classified_ads.ad_id, 
sun_classified_ads.insertion_datetime, 
sun_classified_ads.title,                
sun_classified_ads.description, 
sun_classified_ads.maker, 
sun_classified_ads.model, 
sun_classified_ads.location, 
sun_classified_ads.price, 
sun_classified_ads_images.filename_mini, 
sun_classified_ads_images.size_attr_mini, 
sun_classified_ads_images.description AS image_description
FROM sun_classified_ads
INNER JOIN sun_classified_ads_images ON sun_classified_ads.ad_id =       sun_classified_ads_images.ad_id
group by sun_classified_ads.ad_id 
```

只是一个警告。不能保证这将返回第*一个*广告。不能保证图像中的三个字段实际上来自同一记录（尽管实际上它们确实如此）。但是，这可能是获得所需内容的最简单方法。

以下查询确实可以满足您的要求，但需要做更多工作：

```
SELECT 
sun_classified_ads.ad_id, 
sun_classified_ads.insertion_datetime, 
sun_classified_ads.title,                
sun_classified_ads.description, 
sun_classified_ads.maker, 
sun_classified_ads.model, 
sun_classified_ads.location, 
sun_classified_ads.price, 
substring_index(group_concat(sun_classified_ads_images.filename_mini order by ad_image_id), ',', 1), 
substring_index(group_concat(sun_classified_ads_images.size_attr_mini order by ad_image_id), ',', 1), 
substring_index(group_concat(sun_classified_ads_images.description order by ad_image_id), ',', 1) AS image_description
FROM sun_classified_ads
INNER JOIN sun_classified_ads_images ON sun_classified_ads.ad_id =       sun_classified_ads_images.ad_id
group by sun_classified_ads.ad_id 
```

这假定这`ad_image_id`是一个可用于定义图像顺序的字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T02:51:25.813

您没有说明您的表格是否有`datetime`关于何时`image`添加的信息。如果是这样，那么您可以更改以下查询以返回`min()`每个广告的日期。

如果没有，那么您可能仍然可以使用以下内容：

```
SELECT 
  a.ad_id, 
  a.insertion_datetime, 
  a.title,                
  a.description, 
  a.maker, 
  a.model, 
  a.location, 
  a.price, 
  i.filename_mini, 
  i.size_attr_mini, 
  i.description AS image_description
FROM sun_classified_ads a
INNER JOIN
(
  select min(ad_id) Min_Ad_id, ad_id
  from sun_classified_ads_images i
  group by ad_id
) i
  ON a.ad_id = i.ad_id
INNER JOIN sun_classified_ads_images i2
  ON a.ad_id = i2.ad_id
  and i.Min_Ad_id = i2.ad_id 
```

如果您`datetime`在 images 表中有一个，那么您可以使用：

```
INNER JOIN
(
  select min(ad_date) Min_Ad_Date, ad_id
  from sun_classified_ads_images i
  group by ad_id
) i
  ON a.ad_id = i.ad_id
INNER JOIN sun_classified_ads_images i2
  ON a.ad_id = i2.ad_id
  and i.Min_Ad_Date = i2.ad_date 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T02:48:30.380

简短的回答是“你不能”。您编写的查询将返回所有匹配数据的所有行。每个图像的数据匹配一次。您需要执行两项查询——一项获取所有广告，然后一项在页面内查询所有图像。这是最直接的方法。

# tomcat6 - 滚动 catalina.YYYY-MM-DD.log 文件

> ID：14595849
> 
> 赞同：0
> 
> 时间：2013-01-30T02:45:58.730
> 
> 标签：tomcat6

出于某种特定原因，我需要保留我的应用程序特定日志和 catalina.log。我已将 log4j 配置为将 RollingFileAppender 用于我的应用程序特定日志，并且工作正常。有没有办法为 catalina.logs 使用类似的日志记录机制。

我可以通过某种方式调整 conf 下的 logging.properties 来做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T03:06:02.483

您可以使用 logrotate。如果你运行 ubuntu。创建这个文件

```
/etc/logrotate.d/tomcat 
```

将以下内容复制到上述文件中

```
/var/log/tomcat/catalina.out {  
 copytruncate  
 daily  
 rotate 7  
 compress  
 missingok  
 size 5M 
```

}

确保将上面的路径 /var/log/tomcat/catalina.out 调整为指向你的 tomcat 的 catalina.out

每天 - 每天旋转 catalina.out

rotate - 最多保留 7 个日志文件

compress – 压缩旋转的文件

size – 如果 catalina.out 的大小大于 5M，则旋转

而已。

# scala - 使用 SbtOneJar 时使用 sbt 重命名 jar 文件

> ID：14595852
> 
> 赞同：4
> 
> 时间：2013-01-30T02:46:02.337
> 
> 标签：scala, sbt, onejar

当 sbt 使用 SbtOneJar 插件构建 OneJar 文件时，它为构建的 jar 提供名称 [name]_[scala-version]-[version]-one-jar.jar 其中 name 是项目的名称，scala-version 是scalaVersion 和 version 是项目的版本，所有变量都在 build.sbt 文件中。

如何设置 build.sbt 文件以使 jar 的名称为 [name]-one-jar_[scala-version]-[version].jar

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T01:50:33.813

将以下行添加到 build.sbt：

```
// This gets rid of the trailing "-one-jar"

artifact in oneJar <<= moduleName(Artifact(_))

// rename the jar

artifact in oneJar ~= { (art: Artifact) =>
  art.copy(`type` = "jar", extension = "jar", name = art.name + "-one-jar")
} 
```

# python - 与 re.sub 混淆

> ID：14595855
> 
> 赞同：1
> 
> 时间：2013-01-30T02:46:20.557
> 
> 标签：python, regex

我有`aa{{{a {{ {aaa{`我想翻译成的字符串`aa { { {a { { {aaa {`。基本上每个都`{`必须在它之前有一个空格字符。

我目前正在使用的正则表达式替换函数是：`re.sub(r'[^\ ]{', lambda x:x.group(0)[0]+' {', test_case)` 函数的结果是：（`aa {{ {a { { {aaa {`关闭，但`{{`字符串中有a）

我的方法在像`a{a{a`. 但是，如果两个`{`字符在一起，`a{{a`它似乎只对第一个进行操作`{`而完全忽略了以下`{`。

一个更明显的例子是大量的`{{{{{{{{{{{{`. 我的正则表达式替换返回：`{ {{ {{ {{ {{ {{ {`. 这显然跳过了紧密嵌套的所有其他字符`{`。

他们为什么要跳过？任何有助于解开这种混乱的帮助将不胜感激！

PS我很抱歉所有强烈希望关闭所有打开的花括号的人。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T02:50:55.383

我会使用负面的回顾：

```
re.sub(r'(?<!\s)(\{)',r' \1','{{{{{{') 
```

基本上我们会解析字符串，直到遇到`{`. 如果它前面的字符不是空格（`(?<!\s)`即位），则`{`匹配，我们将其替换为前面的空格。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T02:50:30.733

他们正在跳过，因为您的正则表达式正在使用两个字符：`[^\ ]`和`{`. 您需要对前面的空间使用 0 宽度的负向后查看，以免消耗它：`(?!<\s){`. 然后你可以用 替换它`" {"`，没有 lambda 的麻烦。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T02:49:31.863

我希望这能解决问题：

```
re.sub (' *{', ' {', test_case) 
```

# jquery - 使用 jQuery 动画行内块移动

> ID：14595856
> 
> 赞同：0
> 
> 时间：2013-01-30T02:46:21.190
> 
> 标签：jquery, css, animated

我有三个具有以下属性的 div：

```
div.main-box {
    width: 100px;
    height: 100px;
    display: inline-block;
    padding: 20px;
    margin: 20px;
    border: 1px solid black;
} 
```

它们在页面上并排：

```
 __  __  __
|__||__||__| 
```

我根据用户交互一次删除其中两个（例如，用户单击第三个，前两个消失）。移除它们后，剩余的框会移动到中心。

就像现在一样，盒子只是出现在中心。我想为这个动作制作动画。

这是我现在拥有的 jsFiddle：

[http://jsfiddle.net/4s4v9/](http://jsfiddle.net/4s4v9/)

我要问的可能吗？谢谢你的帮助！

## 更新：

我要问的似乎是不可能的。我可以在移除其他盒子后将剩余的盒子固定在适当的位置，*然后*为其运动设置动画吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T03:24:29.387

你的意思是这样的吗？

```
$('a#change-boxes').click(function () {
    var i = 1;
    $('div.main-box').each(function () {
        if (i <= 2) {
            $(this).hide(500, function(){
            $(this).remove();
            });
        }
        i++;
    });
}); 
```

在这里检查：http: [//jsfiddle.net/GmaPE/](http://jsfiddle.net/GmaPE/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T03:07:49.010

要制作动画，您需要一个可以操作的属性，例如“left”或“margin-left”。您可以在不定位的情况下为内联或内联块元素设置动画。

尝试相对定位。设置父容器元素（如果还没有，请添加一个）：

```
position: relative; 
```

设置所有子元素：

```
position: absolute;
top: 0;
left: 0px; // 200px, 400px, etc. respectively 
```

然后对元素执行淡出或隐藏：

```
$('#selector-for-box-1-and-2')
.fadeOut('slow', function() {

}) 
```

然后在动画完成函数中添加动画：

```
$('#selector-for-box-1-and-2')
.fadeOut('slow', function() {
    $('#selector-for-box-3').animate({
        left: 0px
    }, 1000);
}) 
```

您也可以**应用** [**jQuery.masonry**](http://masonry.desandro.com) **插件**，当您删除任何元素时，动画将自动处理。

# javascript - 为什么地址栏可以解析javascript:？

> ID：14595861
> 
> 赞同：-3
> 
> 时间：2013-01-30T02:46:56.747
> 
> 标签：javascript, browser

为什么地址栏、锚点和 iframe.src 可以解析`javascript:`，有没有关于这个的 w3c 规范？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T03:30:06.950

令人惊讶的是，W3C 与 JavaScript（正确称为 ECMAScript）没有任何关系。HTML 规范是脚本语言中立的，您实际上会看到它们在 Tcl 中给出示例。在 IE 的鼎盛时期，使用 VBScript 而不是 JavaScript 的页面并不少见。

在流行之后，浏览器需要能够评估 URI 中的脚本：

```
<a href="javascript: alert('foo');">click me</a> 
```

...作为 DOM 事件的替代方案，例如`onclick`. 我*推测*这种方法是在 DOM 事件标准化之前出现的，或者它可能是作为供应商扩展引入的，以促进锁定到特定浏览器（*a la* `<marquee>` and `<blink>`）。但这只是猜测。

无论如何，如果浏览器在处理属性时支持对脚本的评估，`href=""`那么将支持扩展到地址栏是一个短暂的延伸。我认为，书签的创建完全是偶然和无意的，但仍然是一个积极的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T02:52:32.557

它不能完全“解决”它，输入“javascript:alert('here');” 您可以在某些浏览器中显示警告框。我不知道没有规范，只是某些浏览器会在加载页面后在客户端运行 javascript。

通常，如果您在冒号 (:) 左侧键入内容，则它是一种协议，例如 chrome://、http://、sftp://

此外，在 chrome 中，您可以打开一个 javascript 控制台并直接在其中输入 javascript 而不是地址栏。

# oracle - 当我们在 oracle 中删除表和包时会发生什么？

> ID：14595862
> 
> 赞同：0
> 
> 时间：2013-01-30T02:46:56.840
> 
> 标签：oracle

我创建了一个新表，编写了包并为该包的一个用户提供了执行访问权限。是否有必要为这些任务创建回滚脚本？

*   当表被删除时，触发器将被删除。我对吗？

*   当包被删除时，执行权限将自动被删除。我对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T05:42:43.297

1.  是的，触发器必须始终用于表或视图 - 因此，如果您删除表（或视图，视情况而定），该对象上的所有触发器也将自动删除。*

2.  是的，权限总是在一个对象上——如果你删除了这个对象（例如一个包），那个对象上的所有权限也将丢失。

如果您随后`CREATE`使用相同名称的新对象，旧的触发器和权限将不会神奇地重新出现 - 您必须手动添加它们。

或者，如果您`CREATE OR REPLACE`是一个包，则原始包的权限将保留。同样，如果你`ALTER`一个表，触发器不会受到影响。

** 在 Oracle 11g 中，默认情况下，已删除的表会移至回收站。如果表有任何触发器，它们也会被移动到回收站。*

# google-maps - 对于 MVC Array - Polygons - 这是最好的方法？

> ID：14595867
> 
> 赞同：1
> 
> 时间：2013-01-30T02:48:06.387
> 
> 标签：google-maps, google-fusion-tables

我需要为谷歌地图（v3）构建 2,800 个多边形（使用 MVC 数组）并显示一些属性信息。在我看来，有两种方法可以做到这一点：

1) 只需从 MySQL 数据库文件中加载一个包含 15,000 多个点的数组。我计划在 GIS 平台中使用顶点命令生成这些点。作为公共建筑物多边形顶点的所有顶点将共享相同的标识符（即建筑物ID）。[我将在 WGS84 坐标系（即 EPSG 4326） http://spatialreference.org/ref/epsg/4326](http://spatialreference.org/ref/epsg/4326)中生成每个点的纬度/经度。

或者

2) 将 MySQL 几何文件（采用 Blob 格式）解析为一组可读的坐标，供谷歌地图读取。我仍然不清楚如何做到这一点......（尤其是处理 Blob）......但我怀疑我需要在 WGS84 坐标系中加载文件并从那里开始。此外，需要加载 dbf 文件（以调用属性）并将其与建筑物 ID 对应。

我的问题是：

*   在选项 1 和 2 中，对于经验不足的程序员和数据量（即 2000 个多边形，分解为 15000 个点）来说，最好的做法是什么？

*   是 WGS 84 (EPSG 4326) 我需要我的多边形坐标吗？？？我对此感到很困惑（一些网站建议使用 WGS 84 - Mercator，EPSG 3857）。这是一个相当关键的处理步骤……所以如果可能的话，我真的希望得到一些指导。

谢谢！！！

# objective-c - NSUndoManager + endUndoGrouping 调用没有匹配的开始

> ID：14595868
> 
> 赞同：2
> 
> 时间：2013-01-30T02:48:21.957
> 
> 标签：objective-c, cocoa, core-data, nsundomanager

我有一个基于 Cocoa 文档的应用程序，并且在使用 NSUndoManager 时遇到了一些问题，即使我让 Core Data 处理了所有这些问题。

因此，每次创建新的持久文档时，我都会创建一个根上下文和一个子上下文。根上下文负责写入持久文档，子上下文是我通过创建/编辑/删除 NSManagedObjects 修改的上下文。我将根上下文设置为父上下文。我还将子上下文的撤消管理器设置为使用 NSPersistentDocument 创建的原始上下文。这里有一些代码，希望能使它更清楚一点：

```
// create root context
NSManagedObjectContext *rootContext = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSPrivateQueueConcurrencyType];

// startContext is the context created with the document
[rootContext setPersistentStoreCoordinator:[startContext persistentStoreCoordinator]];
NSManagedObjectContext *childContext = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSMainQueueConcurrencyType];

// set root as parent
[childContext setParentContext:rootContext];

// set undo
[childContext setUndoManager:[startContext undoManager]]; 
```

我这样做的原因是因为我遇到了与此处描述的类似问题： [立即启用文档 NSManagedObjectContext 的保存？](https://stackoverflow.com/questions/9104802/enable-saving-of-document-nsmanagedobjectcontext-immediately)

所以我提出这个是因为这是我的应用程序中唯一一个我什至接触到 NSUndoManager 的代码。我通过简单地插入 NSManagedObjects 然后撤消插入来测试我的应用程序。有时在两次撤消，或者五次，甚至十次撤消之后，我会收到以下错误：

```
_endUndoGroupRemovingIfEmpty:: NSUndoManager 0x100159f30 is in invalid state,   endUndoGrouping called with no matching begin
2013-01-29 21:31:23.375 TestApplication[30125:303] (
0   CoreFoundation                      0x00007fff8a54f0a6 __exceptionPreprocess + 198
1   libobjc.A.dylib                     0x00007fff8215f3f0 objc_exception_throw + 43
2   CoreFoundation                      0x00007fff8a54ee7c +[NSException raise:format:] + 204
3   Foundation                          0x00007fff80ea021f -[NSUndoManager _endUndoGroupRemovingIfEmpty:] + 195
4   Foundation                          0x00007fff80ea0154 -[NSUndoManager endUndoGrouping] + 42
5   Foundation                          0x00007fff80ed79da +[NSUndoManager(NSPrivate) _endTopLevelGroupings] + 447
6   AppKit                              0x00007fff8253632d -[NSApplication run] + 687
7   AppKit                              0x00007fff824dacb6 NSApplicationMain + 869
8   TestApplication                     0x0000000100001512 main + 34
9   TestApplication                     0x00000001000014e4 start + 52 
```

因此，如果我正确地读取了调试信息，那么我需要调用`[[context undoManager] beginUndoGrouping]`，但问题是我的程序中没有任何地方使用“[[context undoManager] endUndoGrouping]”。有没有人经历过这个？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T03:04:41.940

默认情况下，OSX 中的每个上下文都会创建一个 undoManager（iOS 中为 nil）。分组错误的原因是您的子上下文 undoManager 试图将更改嵌套在 rootContext 的 undoManager 中，该 undoManager 嵌套在 startContext undoManager 中（与子上下文的 undoManager 相同）。

```
// create root context
NSManagedObjectContext *rootContext = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSPrivateQueueConcurrencyType];

// startContext is the context created with the document
[rootContext setPersistentStoreCoordinator:[startContext persistentStoreCoordinator]];
[rootContext setUndoManager:startContext.undoManager];
NSManagedObjectContext *childContext = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSMainQueueConcurrencyType];

// set root as parent
[childContext setParentContext:rootContext]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-15T03:29:05.887

对我来说，这似乎是由于在撤消/重做处理期间发送 begin/endGrouping 消息引起的。我暂时禁用撤消注册以删除此错误消息。

```
 [[NSNotificationCenter defaultCenter] addObserverForName:NSUndoManagerDidUndoChangeNotification object:undoManager queue:[NSOperationQueue mainQueue] usingBlock:^(NSNotification *note) {

            [undoManager disableUndoRegistration];

            // Some code for undo containing undo grouping

            [undoManager enableUndoRegistration];

    } 
```

我做了更多的挖掘，发现了这个。在我的项目中，一些排序操作是在后台线程上运行的子托管对象上下文中完成的，我试图撤消整个过程，包括主线程中的排序（顶级上下文）。我可以通过在撤消/重做期间将排序操作移至后台线程来解决此问题。

# java - Java 错误：找不到符号但已声明变量？

> ID：14595878
> 
> 赞同：1
> 
> 时间：2013-01-30T02:49:25.763
> 
> 标签：java, variables, symbols

```
import java.util.Scanner;
public class Assignment1Q3
{
    public static void main(String[] args) 
    { 
    Scanner in = new Scanner(System.in);
    System.out.print("Please enter the first time: ");
    int fTime = in.nextInt();
    System.out.print("Please enter second time: ");
    int lTime = in.nextInt();
    int tDifference = Math.abs(fTime - lTime);
    String strTDiff = String.valueOf(tDifference);
    int length = strTDiff.length();
    if (length == 4)
    {
        String hours = strTDiff.substring(0, 2);
        String minutes = strTDiff.substring(3, 5);
    }
    else if (length == 3)
    {
        String hours = strTDiff.substring(0);
        String minutes = strTDiff.substring(2, 4);
    }
    else
    {
        String hours = ("0");
        String minutes = strTDiff.substring(0, 1);
    }
    System.out.println(hours + " hours " + minutes + " minutes");
    }
} 
```

大家好，我正在尝试使用 Java 制作一个简单的程序，以找出军事时间给出的 2 次之间的差异，并以小时数和分钟数给出输出。每当我在命令提示符下编译它时，最后打印行中的变量小时和分钟变量都会出现错误，提示“找不到符号”。我想尝试在 if 语句之前声明它们，但这也不起作用。我很抱歉，但我对编程很陌生，并感谢提供的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T02:51:49.607

当您在块（或任何此类块）内定义对象引用或任何原始变量`if`时，它只能在该块内访问。

更改如下

```
final String hours, minutes;
if (length == 4)
{
    hours = strTDiff.substring(0, 2);
    minutes = strTDiff.substring(3, 5);
}
else if (length == 3)
{
    hours = strTDiff.substring(0);
    minutes = strTDiff.substring(2, 4);
}
else
{
    hours = ("0");
    minutes = strTDiff.substring(0, 1);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T02:54:44.507

通过在 if 语句中调用 String，它们只存在于 if 语句中，您需要在 if 之外对它们进行 decalre，并在 if 中关联一个值。

```
import java.util.Scanner;
public class Assignment1Q3
{
    public static void main(String[] args) 
    { 
    Scanner in = new Scanner(System.in);
    System.out.print("Please enter the first time: ");
    int fTime = in.nextInt();
    System.out.print("Please enter second time: ");
    int lTime = in.nextInt();
    int tDifference = Math.abs(fTime - lTime);
    String strTDiff = String.valueOf(tDifference);
    int length = strTDiff.length();
    String hours = "";
    String minutes = "";

    if (length == 4)
    {
        hours = strTDiff.substring(0, 2);
        minutes = strTDiff.substring(3, 5);
    }
    else if (length == 3)
    {
        hours = strTDiff.substring(0);
        minutes = strTDiff.substring(2, 4);
    }
    else
    {
        hours = ("0");
        minutes = strTDiff.substring(0, 1);
    }
    System.out.println(hours + " hours " + minutes + " minutes");
    }
} 
```

因此您可以将它们初始化为“”或删除不必要的 else 语句将它们初始化为 else 值

```
 String hours = "0";
    String minutes = strTDiff.substring(0, 1);

    if (length == 4)
    {
        hours = strTDiff.substring(0, 2);
        minutes = strTDiff.substring(3, 5);
    }
    else if (length == 3)
    {
        hours = strTDiff.substring(0);
        minutes = strTDiff.substring(2, 4);
    }
System.out.println(hours + " hours " + minutes + " minutes"); 
```

# javascript - 小排序 基于类的项目

> ID：14595880
> 
> 赞同：1
> 
> 时间：2013-01-30T02:49:33.943
> 
> 标签：javascript, jquery, html-lists

我正在尝试`<li>`使用 TinySort 将所有项目置于列表顶部：

```
<ul class="team">
    <li><strong>Name 1</strong></li>
    <li><strong>Name 2</strong></li>
    <li class="sticky"><strong>Name 3</strong></li>
    <li><strong>Name 4</strong></li>
    <li class="sticky"><strong>Name 5</strong></li>
</ul> 
```

我需要覆盖使用 PHP 创建的列表的顺序。页面加载时执行此操作的正确 jQuery 脚本是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T02:56:49.863

您可以通过多种方式做到这一点；一种方法是将它们添加回自己的列表中：

```
$(".sticky").prependTo(".team"); 
```

小提琴：http: [//jsfiddle.net/jonathansampson/kUq4p/](http://jsfiddle.net/jonathansampson/kUq4p/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T03:10:47.687

你也可以这样做 [http://jsfiddle.net/DUZkp/1/](http://jsfiddle.net/DUZkp/1/)

```
$(document).ready(function(){

    var $tempDiv = $('<div><div/>');

    $('.team li').each(function(){
        if(!$(this).hasClass('sticky')){
            $tempDiv.append($(this));
        }
    });

    $('.team li').each(function(){
        if($(this).hasClass('sticky')){
             $tempDiv.append($(this));
        }
    });

    $('.team').html($tempDiv.html());

}); 
```

# java - 在 .war 文件中为 HTML 页面创建搜索框

> ID：14595881
> 
> 赞同：-1
> 
> 时间：2013-01-30T02:49:42.547
> 
> 标签：java, html, jsp, jakarta-ee

我有一个在 HTML 页面中包含 JSP 页面的 Web 项目。它基本上是一个产品订购网站。当我`.war`在本地机器上运行它的文件时，它在每个页面上都有一个搜索框，您可以在网站上进行本地搜索。我无法让搜索框为我的`.war`. 我在网上查找了这样做的代码，它说要在搜索值中输入网站的 URL，但我没有 URL，它基本上是一个项目！我用来运行项目的 URL 是 [http://localhost:8080/myProjectWar/]。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T03:51:29.587

您想在自己的应用程序上应用搜索。非常简单且合适的解决方案就是在您的应用程序上应用谷歌自定义搜索。

将您的搜索框转换为谷歌自定义搜索框。整个搜索和显示结果和链接将由谷歌负责。

使用谷歌自定义搜索引擎注册您的应用程序并获取您的凭据。试试下面的链接注册。 [谷歌自定义搜索](http://www.google.com/cse/)

# jquery - 在表单中动态添加表单输入

> ID：14595886
> 
> 赞同：0
> 
> 时间：2013-01-30T02:50:07.620
> 
> 标签：jquery, forms, input

我已经开始通过表单中的按钮动态添加元素的指南。

指南在这里[添加表单元素](http://charlie.griefer.com/blog/2009/09/17/jquery-dynamically-adding-form-elements/)

现在，我可以遵循其中的大部分内容（我几乎没有 jQuery 经验），但在我的例子中，我希望添加文件字段，但命名约定有点不同，这让我很困惑。

就我而言，我的第一个输入有名称`name="matrix_field[row_new_0][col_id_1]"`，这是`row_new_0`我需要增加的。我不确定如何让它工作，因为数字不在名称的末尾。希望这是有道理的！

**根据要求进行快速编辑。**

这是这个的标记。它直接取自我链接到的教程。

```
<form id="myForm">
    <input type="hidden" name="matrix_field[row_order][]" value="row_new_0" />

    <div id="input1" class="clonedInput">
       <input type="file" name="matrix_field[row_new_0][col_id_1]" />
    </div>

    <div>
       <input type="button" id="btnAdd" value="add another name" />
       <input type="button" id="btnDel" value="remove name" />
    </div>
</form> 
```

继承人的 Javascript，以及 jramby 的建议，但我得到了一些奇怪的结果....

```
<script type="text/javascript">
        $(document).ready(function() {
            $('#btnAdd').click(function() {
                var num     = $('.clonedInput').length;
                var newNum  = new Number(num + 1);

                var newElem = $('#input' + num).clone().attr('id', 'input' + newNum);

                newElem.children(':first').attr('id', 'name' + newNum).attr('name', 'matrix_field[row_new_' + newNum + '][col_id_1]');
                $('#input' + num).after(newElem);
                $('#btnDel').attr('disabled','');

                if (newNum == 5)
                    $('#btnAdd').attr('disabled','disabled');
            });

            $('#btnDel').click(function() {
                var num = $('.clonedInput').length;

                $('#input' + num).remove();
                $('#btnAdd').attr('disabled','');

                if (num-1 == 1)
                    $('#btnDel').attr('disabled','disabled');
            });

            $('#btnDel').attr('disabled','disabled');
        });
    </script> 
```

这是添加额外的字段，但似乎得到了一些奇怪的标记，所以我猜测它与我的 js 中的其他内容冲突。

无论如何，这是一个[http://jsfiddle.net/DdrfA/](http://jsfiddle.net/DdrfA/)

然而，这似乎跳过了 row_new_1 因为它从`row_new_0`直接到`row_new_2`并且删除按钮似乎也不起作用。

希望这可以帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T04:13:21.620

而不是添加这一行：

```
newElem.children(':first').attr('id', 'name' + newNum).attr('name', 'name' + newNum); 
```

你只需要输入这一行：

```
newElem.children(':first').attr('id', 'name' + newNum).attr('name', 'matrix_field[row_new_' + newNum + '][col_id_1]'); 
```

如果我能获得更多详细信息，可能会有所帮助...我认为您可以在我的答案中看到缺少的问题详细信息（如果存在）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T03:54:10.610

`row_new_0`你可以很容易地解析出来。这是基于链接的示例：

```
var newElem = $("#input").clone().attr('name', function (_, name) {
   return name.replace('row_new_0', 'row_new_' + num);
}); 
```

[http://jsfiddle.net/Mdhn2/](http://jsfiddle.net/Mdhn2/)

# ejb - 如何在 ejbql 中添加日期

> ID：14595890
> 
> 赞同：0
> 
> 时间：2013-01-30T02:50:39.210
> 
> 标签：ejb, ejb-3.0, dateadd, ejbql

我正在尝试在我的 EJB 查询中实现 dateadd。我尝试了这样的事情，但它不起作用：

```
select t.date + 1 from Table t 
```

一旦我尝试执行该代码，就会出现此异常：

```
org.hibernate.exception.SQLGrammarException: ERROR: operator does not exist: timestamp without time zone + integer Hint: No operator matches the given name and argument type(s). You might need to add explicit type casts. Position: 93 
```

我还尝试将 1 转换为日期和间隔，但查询结果仅为空。我只是想知道，是否真的可以在 EJB 查询中的给定日期添加天数

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T18:14:51.993

EJBQL 不支持日期算术，也不可能从日期中提取日期，JPQL 也不支持。

根据 JPA 提供者（Hibernate、EclipseLink 等），可能会有有用的供应商特定扩展和调用数据库函数的可能性。例如可以使用EclipseLink [FUNC 。](http://wiki.eclipse.org/EclipseLink/Release/2.1.0/JPAQueryEnhancements)

# java - 为什么调用 JFrame.pack() 会增加额外的空间？

> ID：14595897
> 
> 赞同：3
> 
> 时间：2013-01-30T02:51:29.263
> 
> 标签：java, swing, user-interface, jframe

最初，我使用的代码运行良好，但有点复杂。将方法的某些部分移入 JFrame 的构造函数后，一切正常。

除了使用 pack() 使框架具有适当的大小之外的所有内容。

这是原始代码：

```
public class BaseGameFrame extends JFrame {

public static final int WINDOWED = 0;
public static final int UFS = 1;

protected BaseGamePanel gamePanel;

public BaseGameFrame(String title, int pWidth, int pHeight, long period, int windowType){
    super(title);

    switch(windowType){
        case UFS:
                    this.setUndecorated(true);

                    Rectangle screenSize = this.getGraphicsConfiguration().getBounds();
                    pWidth = screenSize.width;
                    pHeight = screenSize.height;

                    break;

        default:    break;
    }

    this.setVisible(true);
    this.setResizable(false);
    this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    this.createPanel(pWidth, pHeight, period);

}

protected void createPanel(final int pWidth, final int pHeight, long period){
    this.gamePanel = new BaseGamePanel(pWidth, pHeight, period);

    this.add(this.gamePanel);
    this.pack();
}

public static void main(String[] args){
    new BaseGameFrame("Test", 800, 600, 20L * 1000000L, UFS);
}

} 
```

这是修改后的：

```
public class BaseGameFrame extends JFrame {

protected BaseGamePanel gamePanel;

public BaseGameFrame(String title, VideoType vType, BaseGamePanel gp){
    super(title);

    switch(vType){
        case UFS:   
                    this.setUndecorated(true);

                    Rectangle screenSize = this.getGraphicsConfiguration().getBounds();
                    gp.setPDimensions(new Dimension(screenSize.width, screenSize.height));

                    break;

        default:    break;
    }

    this.add(gp);
    this.pack();

    this.setVisible(true);

    this.setResizable(false);
    this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

}

public static void main(String[] args){
    BaseGamePanel gp = new BaseGamePanel(800, 600, 20L * 1000000L);
    new BaseGameFrame("Test", VideoType.UFS, gp);
}

} 
```

我不太确定问题是什么..但最终发生的是：![这是一个问题](../Images/b2466d825762a22c46349a82e33eaea4.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-30T03:13:02.033

`setResizable(false)` *打电话前*一定要先打电话`pack()`或`setVisible(true)`

# jqgrid - JQGrid 与 IE9 不一致

> ID：14595898
> 
> 赞同：1
> 
> 时间：2013-01-30T02:51:32.403
> 
> 标签：jqgrid

我难住了。我在 IE9 中使用 JQGrid，它的行为不像在其他浏览器中那样。这很容易证明。如果您查看[http://www.trirand.com/blog/jqgrid/jqgrid.html上的加载数据演示](http://www.trirand.com/blog/jqgrid/jqgrid.html)并选择“Array Data”并查看网格，在 IE9 中它看起来与在 Chrome、Safari 或 Fox 中不同。首先，它有一个水平滚动条？并且注释列延伸到网格的末端。如果您尝试使用 IE9 中 Total 和 Notes 列之间的列调整大小栏，则列行中有很大的偏移量。这在其他浏览器中不会发生。如果您将复选框列移动到网格的末尾，并且当出现垂直滚动条时，它会隐藏复选框列。这再次只发生在 IE9 中。我使用的是 4.4.3 版本的 JQGrid。如果有人可以在我做错了什么或解决方法时有所了解，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T09:24:41.437

首先，我看不出IE9[中官方 jqGrid 演示](http://www.trirand.com/blog/jqgrid/jqgrid.html)的“加载数据”/“数组数据”页面的外观与我拥有的其他网络浏览器（Chrome 24、Firefox 18、Opera 12.13）有任何区别。

演示“加载数据”/“数组数据”的页面是为非常非常旧的 jqGrid 版本制作的，目前 jqGrid 的使用方式会非常糟糕。`mydata`与其在代码开头移动定义和初始化的行，不如`data: mydata, gridview: true,` 向网格中添加选项并另外添加一个寻呼机（`pager`选项或`toppager: true`选项），或者`rowNum`如果不希望添加足够大的值使用任何本地数据分页。例如，可以添加`rowNum: 10000`选项。

要删除网格中不需要的空白空间，我建议您使用`height: "auto"`(或`height: "100%"`) 或使用替代`scrollOffset: 0`选项。

# sql - 卡在 SQL 查询中

> ID：14595902
> 
> 赞同：-1
> 
> 时间：2013-01-30T02:52:07.440
> 
> 标签：sql, sqlite

问题说明和数据库条件：数据库中有 3 个表（**Highschooler**、**Friend**和**Likes**），这是数据库：

```
Highschooler
ID  name    grade
1510    Jordan  9
1689    Gabriel 9
1381    Tiffany 9
1709    Cassandra   9
1101    Haley   10
1782    Andrew  10
1468    Kris    10
1641    Brittany    10
1247    Alexis  11
1316    Austin  11
1911    Gabriel 11
1501    Jessica 11
1304    Jordan  12
1025    John    12
1934    Kyle    12
1661    Logan   12

Likes
ID1 ID2
1689    1709
1709    1689
1782    1709
1911    1247
1247    1468
1641    1468
1316    1304
1501    1934
1934    1501
1025    1101 
```

问题是：**对于每对都喜欢对方的学生，返回两个学生的姓名和年级。每对仅包含一次，两个名称按字母顺序排列。**

我的查询是：

```
select  H1.name,H1.grade,H2.name,H2.grade from 
(select ID1,ID2 from Likes 
where ID1 in (select ID2 from Likes) and
ID2 in (select ID1 from Likes)) as G JOIN Highschooler H1 JOIN Highschooler H2
where H1.ID=G.ID1 and H2.ID=G.ID2 order by H1.name,H2.name 
```

我的查询输出是：

```
Cassandra 9   Gabriel  9
Gabriel   9  Cassandra 9
Jessica  11  Kyle   12
Kyle     12  Jessica 11 
```

预期输出为：

```
Cassandra 9   Gabriel  9
Jessica  11   Kyle  12 
```

我无法移除一对。我怎样才能在 SQlite 中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T02:59:11.603

最简单的做法是扩展您的最后`where`条款以包括：

```
where h1.name < h2.name 
```

这将防止输出中的每对加倍。

# elasticsearch - 已分析 v not_analyzed 或 ...？

> ID：14595905
> 
> 赞同：10
> 
> 时间：2013-01-30T02:52:15.973
> 
> 标签：elasticsearch, wildcard

ES 新手，所以可能是一个愚蠢的问题，但我正在尝试使用通配符进行搜索，例如： `"SOMECODE*"`和`"*SOMECODE"`

它工作正常，但文档中的值可能具有`"SOMECODE/FRED"`.
问题是`*`会匹配任何东西（不包括任何东西）。
`*SOMECODE`会受到打击`SOMECODE/FRED`。

我尝试搜索，`*/SOMECODE`但这没有返回。
我认为该领域的标记化是根本问题。
即，`/`导致值为 2 个字。

我尝试将字段上的地图设置为`not_analyzed`，但是我根本无法搜索它。

我做错了吗？

谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-30T20:56:16.157

通过设置`not_analyzed`，您只允许完全匹配（例如`"SOMECODE/FRED"`，仅包括大小写和特殊字符）。

我的猜测是您使用的是标准分析器（如果您不指定，它是默认分析器）。如果是这种情况，标准会将斜杠视为标记分隔符，并生成两个标记`[somecode]`和`[fred]`：

```
$ curl -XGET 'localhost:9200/_analyze?analyzer=standard&pretty' -d 'SOMECODE/FRED'
{
    "tokens" : [ {
    "token" : "somecode",
    "start_offset" : 0,
    "end_offset" : 8,
    "type" : "<ALPHANUM>",
    "position" : 1
  }, {
    "token" : "fred",
    "start_offset" : 9,
    "end_offset" : 13,
    "type" : "<ALPHANUM>",
    "position" : 2
  } ]
} 
```

如果您不想要这种行为，则需要更改为不会在特殊字符上拆分的分词器。但是，我会质疑这个用例。通常，您需要拆分这些类型的字符。

# llvm - 如何用clang替换llvm-ld？

> ID：14595906
> 
> 赞同：10
> 
> 时间：2013-01-30T02:52:20.443
> 
> 标签：llvm, clang, ld

**摘要：** `llvm-ld`已从[LLVM 3.2 版本](http://llvm.org/releases/3.2/docs/ReleaseNotes.html)中删除。我试图弄清楚如何在我的构建系统中使用 clang。

*请注意，我在编写它时找到了我自己问题的答案，但我仍在发布它以防它对其他人有用。也欢迎其他答案。*

**详情**：

我有一个构建过程，它首先使用`clang++ -emit-llvm`. 然后我获取位码文件并将它们与`llvm-link`. 然后我应用了一些标准的优化通道`opt`。然后我应用另一个自定义编译器通过`opt`. 然后我第三次再次应用标准优化通道`opt`。最后，我从上次运行的输出中获取`opt`并使用`llvm-link`与适当的库链接以生成我的可执行文件。当我尝试在此过程中替换为时`llvm-link`，`clang++`我收到错误消息：`file not recognized: File format not recognized`

为了使这个问题更具体，我创建了一个简化的示例来说明我正在尝试做的事情。首先有两个文件我要编译并链接在一起

**测试1.cpp：**

```
#include <stdio.h>

int getNum();

int main()
{
  int value = getNum();
  printf("value is %d\n", value);
  return 0;
} 
```

**测试2.cpp**

```
int getNum()
{
  return 5;
} 
```

我执行了以下命令序列：

```
clang++ -emit-llvm -c test1.cpp test2.cpp
llvm-link -o test.bc1 test1.o test2.o 
opt test.bc1 -o test.bc2 -std-compile-opts 
```

*（请注意，我目前正在运行 llvm 3.1，但我正在尝试找出适用于 llvm 3.2 的步骤。我假设我应该能够使用 clang 而不是 llvm-ld 使 LLVM 3.1 版本正常工作）*

然后，如果我运行：

```
llvm-ld test.bc2 -o a.out -native 
```

一切都很好，`a.out`打印出来 5。

但是，如果我运行：

```
clang++ test.bc2 -o a.out 
```

然后我收到错误消息：

```
test.bc2: file not recognized: File format not recognized clang-3:
error: linker command failed with exit code 1 (use -v to see invocation) 
```

显然我知道我可以通过直接在 .cpp 文件上运行 clang 来生成一个可执行文件。但我想知道与之集成的最佳方式`clang`是什么`opt`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T02:52:20.443

可以使用以下步骤编译问题中描述的测试用例：

```
clang++ -emit-llvm -c test1.cpp test2.cpp
llvm-link -o test.bc1 test1.o test2.o 
opt test.bc1 -o test.bc2 -std-compile-opts

llc -filetype=obj test.bc2 -o test.o
clang++ test.o 
```

这会产生一个工作`a.out`文件。

似乎`llc`需要将位码转换为机器码，然后可以`clang`正常处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-14T05:30:05.837

一般来说，我发现

```
llvm-ld x.bc y.bc 
```

可以替换为

```
llc x.bc
llc y.bc
clang x.s y.s 
```

# javascript - 有没有比创建闭包从内部访问外部功能更清洁/优雅的方式？

> ID：14595913
> 
> 赞同：1
> 
> 时间：2013-01-30T02:53:11.593
> 
> 标签：javascript, jquery

我有一些代码.. ala

```
$.fn.someObj= function(){
    this.opt = {
       whatever : 'somevalue',
       whateve2 : 'more values'
    }
    this.someMethod = function(){
       //do something
       $(someElem).bind('click',function(){
          this.someOTHERMethod();  <----- ISSUE HERE
       })
    }
    this.someOTHERMethod = function(){
       // do more stuff

    }
   this.init = function(data){
       $.extend(this.opt, data);
       this.someMethod();
 };

}; 
```

我可以创建一个闭包并解决问题；

```
var that = this;
    //code
    that.someOTHERMethod(); <--- works 
```

或者如果我从方法中删除“this”：

```
someOTHERMethod = function(){}

and just call it: someOTHERMethod(); < ---- works 
```

但我想知道是否有一种更优雅的方法可以在没有闭包的情况下获取外部函数？有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T02:54:11.413

当你使用 jQuery 时，你应该使用[`$.proxy`](http://api.jquery.com/jquery.proxy)

```
$(someElem).on('click', $.proxy(this, 'someOTHERMethod')); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T03:12:34.497

您不需要闭包，只需传递对函数的引用，并消除包装匿名函数：

```
$(someElem).on('click', this.someOTHERMethod); 
```

如果您希望`this`里面的值`someOTHERMethod`是`someObj`，那么`$.proxy`也可以根据 zzzzBov 的回答使用。

# asterisk - 重新配置 Asterisk 服务器以添加错误消息

> ID：14595914
> 
> 赞同：0
> 
> 时间：2013-01-30T02:53:15.030
> 
> 标签：asterisk, ivr

我有一个需要重新配置的 Asterisk 服务器。它是由外部承包商建造的，我需要对其进行一些更改。现在，它所做的只是接听电话，接受 7 位数代码，然后挂断。在后端，它记录了呼叫的时间戳、呼叫者 ID 和 7 位代码。

我们遇到的是有些人没有输入 7 位密码，或者输入时间过长。然后系统重新启动，并继续无限循环，直到输入 7 位数字。来电者最近认为系统已损坏，因为他们没有输入 7 位代码。

我想弄清楚如何做的是，当系统必须返回到开头时，它可能会说“您只输入了 6 位数字。请再试一次”。或者类似的东西。我不是 100% 确定如何将其添加到当前配置中。以下是我们目前拥有的：

```
[inbound]
exten => 1234567890,1,Answer
exten => 1234567890,2,Set(COUNTER=4)
exten => 1234567890,3,Set(COUNTER=$[${COUNTER} -1 ])
exten => 1234567890,4,NoOp(${COUNTER})
exten => 1234567890,5,GotoIf($[${COUNTER} > 0 ]?10:122)

exten => 1234567890,10,Wait(1)
exten => 1234567890,11,read(SCODE,EnterCode,7,)
exten => 1234567890,12,GotoIf($[${LEN(${SCODE})}=7]?13:3)
exten => 1234567890,13,Playback(YouEntered)
exten => 1234567890,n,SayDigits(${SCODE})
exten => 1234567890,n,read(SCHOICE,correctpressone,1,)
exten => 1234567890,n,Gotoif($[ ${SCHOICE} = 1 ]?20:1)

exten => 1234567890,20,NoOp(${STRFTIME(${EPOCH},,%Y%m%d-%H%M%S)} ${SCODE} ${CALLERID(num)})
exten => 1234567890,n,TrySystem(/bin/echo ${STRFTIME(${EPOCH},,%Y%m%d-%H%M%S)}, ${SCODE}, ${CALLERID(num)} >> /opt/codes.log)

exten => 1234567890,n,Playback(SuccessfullyActivate)
exten => 1234567890,n,Hangup()

exten => 1234567890,122,Playback(tt-somethingwrong)
exten => 1234567890,n,Hangup() 
```

感谢您对此问题的任何帮助...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T09:23:09.070

像这样的东西：

```
exten => 1234567890,12,GotoIf($[${LEN(${SCODE})}=7]?13:200)

exten => 1234567890,200,Playback(your_inpout_too_short)
exten => 1234567890,201,Goto(3) 
```

顺便说一句，你的拨号方案质量很差，看起来做它的人也没有经验。

# ruby-on-rails-3 - 在 Heroku 中使用载波和雾设置 S3 的问题

> ID：14595915
> 
> 赞同：0
> 
> 时间：2013-01-30T02:53:22.477
> 
> 标签：ruby-on-rails-3, amazon-s3, carrierwave, fog

我一直在尝试通过表单将文件上传到 Amazon S3，但我遇到了一些我不知道如何修复的错误。

有人遇到过这种类型的错误吗？

```
Heroku log errors:

response => #<Excon::Response:0x00000007294a30 @body="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<Error><Code>SignatureDoesNotMatch</Code><Message>The request signature we calculated does not match the signature you provided. Check your key and signing method.</Message>

Excon::Errors::Forbidden (Expected(200) <=> Actual(403 Forbidden) 
```

配置/初始化程序/carrierwage.rb

```
CarrierWave.configure do |config|
  config.fog_credentials = {
    :provider               => "AWS",
    :aws_access_key_id      => ENV['AWS_ACCESS_KEY_ID'],
    :aws_secret_access_key  => ENV['AWS_SECRET_ACCESS_KEY']
  }
  config.fog_directory  = ENV['AWS_S3_BUCKET']
end 
```

应用程序/上传程序/file_uploader.rb

```
 storage :fog

  include CarrierWave::MimeTypes
  process :set_content_type

  def extension_white_list
     %w(jpg jpeg gif png pdf)
  end

  # Override the directory where uploaded files will be stored.
  # This is a sensible default for uploaders that are meant to be mounted:
  def store_dir
    "uploads/#{model.class.to_s.underscore}/#{mounted_as}/#{model.id}"
  end 
```

我已经设定

环境。Heroku 上的变量。

我使用美国标准的桶。

# drupal - 哪个工具可用于生成带有执行时间注释的执行功能图？

> ID：14595916
> 
> 赞同：1
> 
> 时间：2013-01-30T02:53:22.523
> 
> 标签：drupal

我正在使用 Drupal，并希望获得一个函数图，其中包含函数执行时间的注释。我发现这张图片展示了我正在寻找的东西：

[![http://drupal.org/files/purge.png](../Images/36eb2e63572d9b82f8a0b3cbd89a8120.png)](https://i.stack.imgur.com/wsQI3.png)

但是，我找不到可以产生类似图像的工具。我在寻找什么样的工具？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T03:03:55.967

[XHProf](https://github.com/facebook/xhprof "XH教授")可以生成与此类似的调用图图像，但不完全相同。我相信使用关键字**PHP 调用图**或**drupal 调用图**的 Google 搜索将为您提供更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T14:59:21.543

您可以使用[XDebug](http://www.xdebug.org/docs/profiler)和[KCachegrind](http://kcachegrind.sourceforge.net/html/Home.html)。

# jquery - 如何使用 jQuery 从 FileUpload 中删除文本

> ID：14595917
> 
> 赞同：0
> 
> 时间：2013-01-30T02:53:33.150
> 
> 标签：jquery, asp.net

我有这个 FileUpload 控件。

```
<asp:FileUpload ID="FileUp1" runat="server"/> 
```

下面的代码是我使用但不起作用的代码。当我尝试`.val("")`使用文本框时，它很好。

```
$('#<%=FileUp1.ClientID %>').val(""); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T03:03:39.380

试试这个可能。

```
//For IE
$("#control").replaceWith($("#control").clone(true));
//For other browsers
$("#control").val(""); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T03:12:42.377

试试这个 ：

```
<script type="text/javascript">
    $(document).ready(function () {
        $("#btn").click(function () {
            $('#FileUp1').val("");
        });
    });
</script>

<asp:FileUpload ID="FileUp1" runat="server"/>
<asp:Button ID="btn" runat="server" Text="Click Me" /> 
```

# php - 需要指导。输出上的 TCPDF 错误

> ID：14595919
> 
> 赞同：1
> 
> 时间：2013-01-30T02:53:58.280
> 
> 标签：php, tcpdf, output

我的 TCPDF 输出错误有问题，不知道如何解决。它说

> “警告：无法修改标头信息 - 标头已由（输出开始于 C:\xampp\htdocs\Printing\listing_p.php:14）在 C:\xampp\htdocs\tcpdf\tcpdf.php 第 9043 行 TCPDF 错误：部分数据已经输出到浏览器，无法发送PDF文件”

我对 TCPDF 很陌生，它没有适当的教程来指导我。示例并没有太大帮助...

这是我的代码：

```
<?php

error_reporting(E_ALL);
ini_set('display_errors', '1');
?>
<!DOCTYPE html PUBLIC"-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<title>insert page</title></head>
<body>

<?php 

ob_start();

require_once("../tcpdf/tcpdf.php");
require_once("../tcpdf/config/lang/eng.php");
$pdf = & new TCPDF("P","mm","A4",true,"UTF-8",false);

$pdf->setPrintHeader(false);
$pdf->setPrintFooter(false);
$pdf->SetAutoPageBreak(false);

$link = mysql_connect("localhost","root");
if(!$link){
    die('Could not connect: '.mysql_error());
}

if(mysql_select_db("New_People",$link)){
mysql_query("SET NAMES utf8");

$result = mysql_query("SELECT * FROM People1");

$pdf->SetMargins(15,20,15);

$pdf->AddPage();
$pdf->SetFont('FreeSerif','B',12);
$pdf->SetFillColor(255,255,255);

$i = 0;
$max = 30;
$row_height = 5;
$backup_group = "";

$pdf->Cell(60,$row_height,'Id',1,0,'C',1);
$pdf->Cell(60,$row_height,'Code',1,0,'C',1);
$pdf->Cell(60,$row_height,'Name',1,0,'C',1);

while($row = mysql_fetch_array($result))
{
    $Id = $row['P_Id'];
    $Code = $row['P_Code'];
    $Name = $row['P_Name'];

    if($backup_group != $Id)
    {
        $pdf->SetFont('FreeSerif','B',12);
        $pdf->Cell(120,$row_height,$Id,1,1,'C',1);
    }

    if($i >$max){

        $pdf->AddPage();
        $pdf->SetFont('FreeSerif','B',12);
        $pdf->SetFillColor(255,255,255);

        $pdf->Cell(60,$row_height,'Id',1,0,'C',1);
        $pdf->Cell(60,$row_height,'Code',1,0,'C',1);
        $pdf->Cell(60,$row_height,'Name',1,0,'C',1);

    }

    if(!empty($group)){
        $pdf->SetFont('FreeSerif','',12);
        $pdf->Cell(60,$row_height,$Id,1,0,'C',1);
        $pdf->Cell(60,$row_height,$Code,1,0,'C',1);
        $pdf->Cell(60,$row_height,$Name,1,0,'C',1);
    }

    $backup_group = $Id;
    $i++;

}

mysql_close($link);
ob_end_clean();
$pdf->Output('mypdf.pdf','I');

}
else{
die("Error: ".mysql_error());
}

?>
</body>
</html> 
```

任何建议或帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T01:07:19.350

问题已解决，刚刚删除

> require_once("../tcpdf/config/lang/eng.php");

从代码顶部开始，一切顺利。

# python - python关键字列表

> ID：14595922
> 
> 赞同：34
> 
> 时间：2013-01-30T02:54:24.910
> 
> 标签：python

我正在编写一个程序，它对 python 进行一些代码生成，如果它是 python 关键字，则需要以不同的方式处理字符串。`help(keywords)`打印python关键字和一些额外的东西，但我想知道是否有一种pythonic方法来获取一个包含这些字符串的实际可迭代对象？

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2013-01-30T02:58:14.280

你最好使用[关键字](http://docs.python.org/2/library/keyword.html)模块

```
>>> import keyword
>>> keyword.kwlist
['and', 'as', 'assert', 'break', 'class', 'continue', 'def', 'del', 'elif', 'else', 'except', 'exec', 'finally', 'for', 'from', 'global', 'if', 'import', 'in', 'is', 'lambda', 'not', 'or', 'pass', 'print', 'raise', 'return', 'try', 'while', 'with', 'yield'] 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-01-30T03:00:30.177

您也可以检查特定的关键字

```
import keyword
keyword.iskeyword("print") # TRUE 
```

# xcode - Xcode 启动但不运行程序

> ID：14595924
> 
> 赞同：1
> 
> 时间：2013-01-30T02:54:38.573
> 
> 标签：xcode, debugging, gdb, launching-application

我在 XCode 中启动和运行 C 程序时遇到了一个奇怪的问题。我创建了一个命令行 C 程序（该程序只打印“Hello, World!\n”）。该程序没有问题。当我运行它（使用运行菜单中的运行项）时，它如何在调试器控制台窗口中不打印任何输出。

我在我的管理员帐户下运行 XCode，因此在非管理员帐户下运行 XCode Debugger 所需的管理员权限应该没有问题。奇怪的是，如果我登录到另一个管理员帐户（为测试而创建），那么我在 XCode 中运行程序就没有问题：我看到了“Hello, World”这一行。以及 GDB 的输出。

我怀疑我的帐户（不是为测试而创建的帐户）有问题，因为我之前更改了帐户的简称。如果这里有人可以瞥见问题和/或可能的解决方法，我将不胜感激。

我尝试过的解决方案：使用磁盘工具修复权限；使用 dscl 将我添加到 _developer 组（但我认为它实际上没有帮助，因为我的帐户是管理员）；并重新安装 XCode。

我的笔记本电脑运行的是 OS X 10.6.8，我的 XCode 版本是 3.2.6。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T00:31:52.553

XCode Debugger 挂在我的机器上的原因是我的主目录中有 .gdbinit 指向与 XCode 中不同的 GDB 版本。我删除 .gdbinit 并且调试器再次工作。

# x86 - Intel 的 Last Branch Record 功能是 Intel 处理器独有的吗？

> ID：14595931
> 
> 赞同：4
> 
> 时间：2013-01-30T02:56:17.073
> 
> 标签：x86, arm, intel, cpu-architecture, cpu-registers

Last Branch Record 是指寄存器对 (MSR) 的集合，这些寄存器对 (MSR) 存储与最近执行的分支相关的源地址和目标地址。它们在 Intel Core 2、Intel Xeon 和 Intel Atom 处理器系列中均受支持。[http://css.csail.mit.edu/6.858/2012/readings/ia32/ia32-3b.pdf](http://css.csail.mit.edu/6.858/2012/readings/ia32/ia32-3b.pdf)文档有更多信息，以防您感兴趣。

类似 LBR 的功能是否仅在 Intel 微处理器中可用，或者在 ARM 等中存在类似的功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T14:37:41.433

综上所述，正如 Carl 提到的，ARM 在某些处理器上还具有程序跟踪功能。这个网站有关于这个功能的有趣细节：http: [//infocenter.arm.com/help/index.jsp ?topic=/com.arm.doc.set.coresight/index.html](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.set.coresight/index.html)

# html - TextArea框在单击时会删除文本？如何阻止这种情况？

> ID：14595933
> 
> 赞同：0
> 
> 时间：2013-01-30T02:56:39.740
> 
> 标签：html

示例 URL： http: [//moviepostersdb.com/the-host/poster-1](http://moviepostersdb.com/the-host/poster-1)

在上面页面右侧的“海报嵌入代码”下，我有一个支持图像嵌入代码的文本区域。

我的问题是，每当有人单击该框进行复制/粘贴时，当前输入的所有文本都会被删除。当他们点击离开时，它会重新出现。

通过查看下面的代码；有谁知道为什么会这样？

```
<form action="#">
<fieldset>
<textarea cols="37" rows="2"><a href="www.link.com" target="_blank">
<img src="http://www.moviepostersdb.com/<?php echo $poster['image_large']; ?>" width="600"    height="890" border="0" alt="<?php echo $movie['movie_name']; ?> 
<?php echo $poster['poster_name']; ?>" />
 </a></textarea>

</fieldset>

</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T03:17:37.003

您的“main.js”文件有一个功能可以在焦点时清除所有文本区域，

```
function initInputs() {
PlaceholderInput.replaceByOptions({
    // filter options
    clearInputs: true,
    **clearTextareas: true**,
    clearPasswords: true,
    skipClass: 'default',

    // input options
    wrapWithElement: false,
    showUntilTyping: false,
    getParentByClass: false,
    placeholderAttr: 'value'
});
} 
```

这导致了这个问题。您可能想要删除该行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T03:12:26.830

main.js 中的占位符类导致了这种情况。

# haskell - 将 Haskell GHCi 命令结果输出到 txt 文件

> ID：14595934
> 
> 赞同：8
> 
> 时间：2013-01-30T02:56:41.527
> 
> 标签：haskell

我是 Haskell 的新手。

我很难将 GHCi 的命令结果输出到文件中。我想知道是否有人可以给我一个简单的解释如何做到这一点？到目前为止，我在网上找到的示例似乎过于复杂。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T03:00:34.177

假设你有一个函数`mungeData`并且你做了

```
 ghci> mungeData [1..5]
 [5,2,5,2,4,6,7,4,6,78,4,7,5,3,57,7,4,67,4,6,7,4,67,4] 
```

## 写文件

您可以像这样将其写入文件：

```
ghci> writeFile "myoutput.txt" (show (mungeData [1..5]) 
```

我会倾向于写

```
ghci> writeFile "myoutput.txt" $ show $ mungeData [1..5] 
```

摆脱几个括号。

## 读回来

你可以用

```
ghci> fmap (read::String -> [Int]) $ readFile "myoutput.txt" 
```

## 每行一个数字

您可以像这样为每个数字输出一行：

```
ghci> writeFile "myoutput'.txt" $ unlines.map show $ mungeData [1..5] 
```

读回为

```
ghci> fmap (map read.lines::String -> [Int]) $ readFile "myoutput'.txt" 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-30T18:17:16.957

[Reddit 上的这篇文章](http://www.reddit.com/r/haskell/comments/144biy/pretty_output_in_ghci_howto_in_comments/)描述了如何为 GHCi 输出着色（GHC >= 7.6）。您可以指定一个日志功能，而不是漂亮的打印机。例如，将以下内容添加到您的`.ghci.conf`:

```
:{
let logFile = "/home/david/.ghc/ghci.log"
    maxLogLength = 1024 -- max length of a single write
    logPrint x = appendFile logFile (take maxLogLength (show x) ++ "\n") >> print x
:}
:set -interactive-print=logPrint 
```

这会将 GHCi 的输出记录到`ghci.log`.

*   日志文件必须已经存在，否则`appendFile`会报错。您必须手动创建它。

*   它必须适合`let`声明，否则 GHCi 将拒绝它。用于`:{ :}`在 GHCi 中添加多行支持。

*   显然， using`:l`摆脱了您在 中所做的所有导入`ghci.conf`，因此您仅限于 Prelude 功能。Reddit 帖子提到您可以以某种方式重新定义`:l`，但我对此一无所知。（如果您知道如何执行此操作，当然可以在日志文件不存在时自动生成它。）

# android - 使用 Android 比较图片 - OpenCV

> ID：14595935
> 
> 赞同：2
> 
> 时间：2013-01-30T02:56:44.430
> 
> 标签：android, opencv, compare, histogram

我想比较两张图片的相似度代码：

```
Mat mat1=Highgui.imread("/mnt/sdcard/91.png");
Mat mat2=Highgui.imread("/mnt/sdcard/92.png");
double distance = Imgproc.compareHist(mat1, mat2, Imgproc.CV_COMP_CORREL); //(this line throws an exception) 
```

异常信息：

> 01-30 10:48:20.203: E/AndroidRuntime(3540): 由: CvException [org.opencv.core.CvException: /home/andreyk/OpenCV2/trunk/opencv/modules/imgproc/src/histogram.cpp: 1387: 错误: (-215) H1.type() == H2.type() && H1.type() == CV_32F in function double cv::compareHist(const cv::_InputArray&, const cv::_InputArray&, int )

有谁能够帮我？我应该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T05:58:47.210

首先确保两个图像都有 1 个通道（如果没有，则使用 cvtColor 将它们转换为灰度或使用 cvSplit 选择一个通道）并具有一种类型，例如 CV_8UC1。

然后计算这些图像的直方图。代码示例：

```
int histSize = 180;
float range[] = {0, 180};
const float* histRange = {range};
bool uniform = true;
bool accumulate = false;
cv::Mat hist1, hist2;
cv::calcHist(&mat1, 1, 0, cv::Mat(), hist1, 1, &histSize, &histRange, uniform, accumulate );
cv::calcHist(&mat2, 1, 0, cv::Mat(), hist2, 1, &histSize, &histRange, uniform, accumulate );

double result = cv::compareHist( hist1, hist2, CV_COMP_CORREL); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-20T16:41:03.083

在 Android 上，代码类似于：

```
Mat image0 = ...; // 
Mat image1 = ...;

Mat hist0 = new Mat();
Mat hist1 = new Mat();

int hist_bins = 30;           //number of histogram bins
int hist_range[]= {0,180};//histogram range
MatOfFloat ranges = new MatOfFloat(0f, 256f);
MatOfInt histSize = new MatOfInt(25);

Imgproc.calcHist(Arrays.asList(image0), new MatOfInt(0), new Mat(), hist0, histSize, ranges);
Imgproc.calcHist(Arrays.asList(image1), new MatOfInt(0), new Mat(), hist1, histSize, ranges);

double res = Imgproc.compareHist(image0, image01, Imgproc.CV_COMP_CORREL); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-16T11:03:23.947

@skornos 你的代码是错误的。它应该是

```
Mat image0 = ...; // 
Mat image1 = ...;

Mat hist0 = new Mat();
Mat hist1 = new Mat();

int hist_bins = 30;           //number of histogram bins
int hist_range[]= {0,180};//histogram range
MatOfFloat ranges = new MatOfFloat(0f, 256f);
MatOfInt histSize = new MatOfInt(25);

Imgproc.calcHist(Arrays.asList(image0), new MatOfInt(0), new Mat(), hist0, histSize, ranges);
Imgproc.calcHist(Arrays.asList(image1), new MatOfInt(0), new Mat(), hist1, histSize, ranges);

double res = Imgproc.compareHist(hist0, hist1, Imgproc.CV_COMP_CORREL); 
```

注意最后一行，应该是 hist0 与 hist1 比较，而不是比较图像

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-13T10:35:26.987

```
 Mat hsvRef = new Mat();
      Mat hsvCard = new Mat();

      Mat srcRef = new Mat(refImage.getHeight(), refImage.getWidth(), CvType.CV_8UC2);
      Utils.bitmapToMat(refImage, srcRef);

      Mat srcCard = new Mat(cardImage.getHeight(), cardImage.getWidth(), CvType.CV_8UC2);
      Utils.bitmapToMat(cardImage, srcCard);

      /// Convert to HSV
      Imgproc.cvtColor(srcRef, hsvRef, Imgproc.COLOR_BGR2HSV);
      Imgproc.cvtColor(srcCard, hsvCard, Imgproc.COLOR_BGR2HSV);

      /// Using 50 bins for hue and 60 for saturation
      int hBins = 50;
      int sBins = 60;
      MatOfInt histSize = new MatOfInt( hBins,  sBins);

      // hue varies from 0 to 179, saturation from 0 to 255
      MatOfFloat ranges =  new MatOfFloat( 0f,180f,0f,256f );

      // we compute the histogram from the 0-th and 1-st channels
      MatOfInt channels = new MatOfInt(0, 1);

      Mat histRef = new Mat();
      Mat histCard = new Mat();

      ArrayList<Mat> histImages=new ArrayList<Mat>();
      histImages.add(hsvRef);
      Imgproc.calcHist(histImages,
              channels,
              new Mat(),
              histRef,
              histSize,
              ranges,
              false);
      Core.normalize(histRef,
              histRef,
              0,
              1,
              Core.NORM_MINMAX,
              -1,
              new Mat());

      histImages=new ArrayList<Mat>();
      histImages.add(hsvCard);
      Imgproc.calcHist(histImages,
              channels,
              new Mat(),
              histCard,
              histSize,
              ranges,
              false);

      Core.normalize(histCard,
              histCard,
              0,
              1,
              Core.NORM_MINMAX,
              -1,
              new Mat());

      double resp1 = Imgproc.compareHist(histRef, histCard, 0);
      Log.d(TAG, "HIST COMPARE 0" + resp1);
      double resp2 = Imgproc.compareHist(histRef, histCard, 1);
      Log.d(TAG, "HIST COMPARE 1" + resp2);
      double resp3 = Imgproc.compareHist(histRef, histCard, 2);
      Log.d(TAG, "HIST COMPARE 2" + resp3);
      double resp4 = Imgproc.compareHist(histRef, histCard, 3);
      Log.d(TAG, "HIST COMPARE 3" + resp4); 
```

# android - Android：为什么开始新活动需要这么长时间？

> ID：14595936
> 
> 赞同：3
> 
> 时间：2013-01-30T02:56:48.273
> 
> 标签：android, performance, android-activity

我有一个 Android 活动`BrowseActivity`，它将大约 3000 条记录（@ 大约 100 字节）从数据库加载到内存中，并以`ListView`. 在 AVD 中加载大约需要 3 到 6 秒，这很好。

当我想从这里开始一个新活动时，问题就出现了`BrowseActivity`。即使只是打开最琐碎的活动，也需要大约 30 秒。Dalvik VM 似乎做了很多垃圾收集，原因不明。请检查`logcat`下面的输出。

```
01-30 02:06:27.025: D/dalvikvm(553): GC_FOR_MALLOC freed 3889 objects / 221200 bytes in 45ms
01-30 02:06:28.234: D/dalvikvm(553): GC_FOR_MALLOC freed 2784 objects / 76864 bytes in 48ms
01-30 02:06:29.614: D/dalvikvm(553): GC_FOR_MALLOC freed 2665 objects / 70088 bytes in 64ms
01-30 02:06:30.915: D/BrowseActivity(553): Low memory status: false
01-30 02:06:30.915: D/BrowseActivity(553): Low memory threshold (KB): 16384
01-30 02:06:30.915: D/BrowseActivity(553): Memory available (KB): 451348
01-30 02:06:31.095: D/dalvikvm(553): GC_EXTERNAL_ALLOC freed 2711 objects / 85904 bytes in 62ms
01-30 02:06:49.705: D/dalvikvm(553): GC_FOR_MALLOC freed 8894 objects / 600272 bytes in 89ms
01-30 02:06:50.414: D/dalvikvm(553): GC_FOR_MALLOC freed 10757 objects / 730720 bytes in 68ms
01-30 02:06:51.105: D/dalvikvm(553): GC_FOR_MALLOC freed 10251 objects / 694864 bytes in 67ms
... and about 30 more garbage collection messages 
```

我已经尝试过使用较少的记录数：1 和 300。它导致垃圾收集消息（分别为 1 和 7）和更快的活动负载（分别为 1 和 6 秒），但内存可用性差异是很简单：

```
01-30 02:03:35.295: D/BrowseActivity(491): Low memory status: false
01-30 02:03:35.295: D/BrowseActivity(491): Low memory threshold (KB): 16384
01-30 02:03:35.295: D/BrowseActivity(491): Memory available (KB): 453184

01-30 02:04:53.494: D/BrowseActivity(522): Low memory status: false
01-30 02:04:53.494: D/BrowseActivity(522): Low memory threshold (KB): 16384
01-30 02:04:53.494: D/BrowseActivity(522): Memory available (KB): 453152 
```

似乎缓慢的活动加载时间是由 GC 开销引起的。我的问题是：为什么 Dalvik VM 会做很多 GC？即使有 3000 条记录，我相信它也只需要 500 KB 的内存。如果不是关于 GC 开销，那么这种缓慢的活动负载的其他可能原因是什么？

作为记录，我使用内置类[ActivityManager.MemoryInfo](http://developer.android.com/reference/android/app/ActivityManager.MemoryInfo.html)提供的信息记录了内存可用性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T03:24:29.873

我认为您没有引用包含 3000 条记录的 Activity，这会导致在您更改 Activity 时激活 GC。

如果您使用 MVC 类型模式并且有一个引用每个 Activity 的控制器，我认为 GC 不会清理这些记录。当内存部分存在但没有已知的引用时，GC 就会启动，一旦切换活动，对活动的引用及其所有函数和成员变量都不再使用，因此应该清理。

GC 的行为方式也可能取决于硬件，即如果系统有大量可用内存，它的工作方式可能与没有时不同。

我有一个加载了超过 3000 条记录的应用程序，控制器对每个活动都有一个引用，因此列表视图的适配器中的数据没有被清理。

至于开销，这不一定是 GC - 但看起来它会导致开销。唯一的其他影响因素是在屏幕上渲染组件所花费的时间等。

希望有帮助！

~ 丹

# ruby - 找出键中是否存在子键

> ID：14595945
> 
> 赞同：0
> 
> 时间：2013-01-30T02:57:28.430
> 
> 标签：ruby, hashtable, yaml

我有一个这样的 YAML 文件：

```
options:
    some_option: 'foo' 
```

我将其作为 hash 加载`yaml`，我希望能够使用它`include?`来获取一个布尔值，告诉它是否存在密钥。

要获取 的子键`options`，我通常会使用`yaml["options"]["some_option"]`，但是如何确定 YAML 哈希是否包含`["options"]["some_option"]`？你不能做这样的事情：

```
if yaml.include? "options"["some_option"] # or
if yaml.include? ["options"]["some_option"] # or even
if yaml.include? yaml["options"]["some_option"] 
```

有没有办法检索`options`YAML 哈希中的子键？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T05:25:06.950

根据 yaml 文件中的预期值，您可以只使用 Ruby 的类型转换：

```
if yaml["options"] && yaml["options"]["some_option"] 
```

如果`yaml["options"]`不存在，它将返回，这将使语句`nil`短路并返回。`if``false`

显然，如果“some_option”的有效值是假的，这将不能作为存在性检查。您需要明确使用`has_key?`：

```
if yaml.has_key?("options") && yaml["options"].has_key?("some_option") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T04:25:19.613

```
yaml["options"].include? "some_option" 
```

如果可以`"options"`不设置：

```
(yaml["options"] || {}).include? "some_option" 
```

# android - Activity 和 Fragment 生命周期和方向变化

> ID：14595946
> 
> 赞同：13
> 
> 时间：2013-01-30T02:57:32.317
> 
> 标签：android, android-fragments, android-activity, android-lifecycle

我一直遇到非常奇怪的问题`Fragments`和方向变化，这些问题导致强制关闭并且不遵循逻辑模式。

我创建了一个简单的`Activity`生命周期调试应用程序，它通过向 logcat 报告调用来`Fragment`简单地实现[Activity 生命周期](http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle)和[Fragment 生命周期的每一步。](http://developer.android.com/guide/components/fragments.html#Creating)

这是`TestActivity`和`TestFragment`类：

**测试活动**

```
public class TestActivity extends Activity {
    Context ct = null;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        Log.e("ACT", "onCreate called");

        ct = getApplicationContext();

        FrameLayout fl = new FrameLayout(ct);
        fl.setId(1000);

        TestFragment tf = new TestFragment();
        getFragmentManager().beginTransaction().add(fl.getId(), tf, "").commit();

        setContentView(fl);
    }

    @Override
    protected void onStart() {
        Log.e("ACT", "onStart called");
        super.onStart();
    }

    @Override
    protected void onResume() {
        Log.e("ACT", "onResume called");
        super.onResume();
    }

    @Override
    protected void onPause() {
        Log.e("ACT", "onPause called");
        super.onPause();
    }

    @Override
    protected void onStop() {
        Log.e("ACT", "onStop called");
        super.onStop();
    }

    @Override
    protected void onDestroy() {
        Log.e("ACT", "onDestroy called");
        super.onDestroy();
    }

    @Override
    protected void onRestart() {
        Log.e("ACT", "onRestart called");
        super.onRestart();
    }
} 
```

**测试片段**

```
public class TestFragment extends Fragment {
    Context ctFrag = null;

    @Override
    public void onAttach(Activity activity) {
        Log.e("FRAG", "onAttach called");
        super.onAttach(activity);
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        Log.e("FRAG", "onCreate called");

    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        Log.e("FRAG", "onCreateView called");

        ctFrag = ((TestActivity) getActivity()).ct;

        TextView tv = new TextView(ctFrag);
        tv.setText("My test TextView");

        return tv;
    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        Log.e("FRAG", "onActivityCreated called");
        super.onActivityCreated(savedInstanceState);
    }

    @Override
    public void onStart() {
        Log.e("FRAG", "onStart called");
        super.onStart();
    }

    @Override
    public void onResume() {
        Log.e("FRAG", "onResume called");
        super.onResume();
    }

    @Override
    public void onPause() {
        Log.e("FRAG", "onPause called");
        super.onPause();
    }

    @Override
    public void onStop() {
        Log.e("FRAG", "onStop called");
        super.onStop();
    }

    @Override
    public void onDestroyView() {
        Log.e("FRAG", "onDestroyView called");
        super.onDestroyView();
    }

    @Override
    public void onDestroy() {
        Log.e("FRAG", "onDestroy called");
        super.onDestroy();
    }

    @Override
    public void onDetach() {
        Log.e("FRAG", "onDetach called");
        super.onDetach();
    }
} 
```

初始化时，Logcat 输出遵循预期的顺序（开始`Activity`、`Fragment`连接时、其生命周期调用发生等）：

```
01-29 10:12:50.270: E/ACT(3321): onCreate called
01-29 10:12:50.760: E/FRAG(3321): onAttach called
01-29 10:12:50.760: E/FRAG(3321): onCreate called
01-29 10:12:50.760: E/FRAG(3321): onCreateView called
01-29 10:12:50.770: E/FRAG(3321): onActivityCreated called
01-29 10:12:50.770: E/ACT(3321): onStart called
01-29 10:12:50.770: E/FRAG(3321): onStart called
01-29 10:12:50.770: E/ACT(3321): onResume called
01-29 10:12:50.770: E/FRAG(3321): onResume called 
```

但问题是，当方向发生变化时，[Android 文档](http://developer.android.com/guide/topics/resources/runtime-changes.html)说：

> 当发生这样的变化时，Android会重启正在运行的Activity（onDestroy()被调用，然后是onCreate()）

这表明它应该像生命周期所建议的那样关闭`Activity`其及其内容（并且确实如此），但然后通过相同的有序过程`Activity`以新的方向重新创建。这**不会**发生，似乎`Fragment`试图重新创建，**然后**在活动重新创建中创建一个新的。

```
01-29 10:17:52.249: E/FRAG(3321): onPause called
01-29 10:17:52.259: E/ACT(3321): onPause called
01-29 10:17:52.269: E/FRAG(3321): onStop called
01-29 10:17:52.269: E/ACT(3321): onStop called
01-29 10:17:52.279: E/FRAG(3321): onDestroyView called
01-29 10:17:52.299: E/FRAG(3321): onDestroy called
01-29 10:17:52.299: E/FRAG(3321): onDetach called
01-29 10:17:52.299: E/ACT(3321): onDestroy called
01-29 10:17:52.650: E/FRAG(3321): onAttach called
01-29 10:17:52.650: E/FRAG(3321): onCreate called
01-29 10:17:52.650: E/ACT(3321): onCreate called
01-29 10:17:53.020: E/FRAG(3321): onCreateView called
01-29 10:17:53.020: E/FRAG(3321): onActivityCreated called
01-29 10:17:53.030: E/FRAG(3321): onAttach called
01-29 10:17:53.030: E/FRAG(3321): onCreate called
01-29 10:17:53.030: E/FRAG(3321): onCreateView called
01-29 10:17:53.030: E/FRAG(3321): onActivityCreated called
01-29 10:17:53.060: E/ACT(3321): onStart called
01-29 10:17:53.060: E/FRAG(3321): onStart called
01-29 10:17:53.060: E/FRAG(3321): onStart called
01-29 10:17:53.060: E/ACT(3321): onResume called
01-29 10:17:53.060: E/FRAG(3321): onResume called
01-29 10:17:53.060: E/FRAG(3321): onResume called 
```

显然有很多解决方案可以解决这个问题，但我的问题是**为什么**会发生这种情况？当引用应该是应该**完全**销毁和重新创建的引用的一部分时，为什么要`Fragment`维护和重新创建引用？我可以通过故意与活动分开来证明这一点。但是导致问题的原因是，**为什么**要在原件**之前**附加并重新创建原件？它似乎没有遵循 Android 进程的其余部分所做的逻辑生命周期。`Activity`**`Fragment`**`Fragment`**`Activity`******

 ******* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-30T10:04:41.823

`onSaveInstanceState(Bundle)`发生这种情况是因为活动在被销毁之前调用。默认情况下，活动在此方法中保存其片段的状态。

稍后，当重新创建活动时，在活动方法中重新创建旧片段`onCreate(Bundle savedInstanceState)`。

您可能需要在[此处](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.1_r1/android/support/v4/app/FragmentActivity.java#FragmentActivity.onSaveInstanceState%28android.os.Bundle%29)和[此处](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.1_r1/android/support/v4/app/FragmentActivity.java#FragmentActivity.onCreate%28android.os.Bundle%29)查看源代码以更好地理解此行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-01T09:26:32.723

这是因为您在重新创建活动时一次又一次地添加片段。您可以在活动的 onCreate 方法中使用以下代码来避免重新创建片段：

```
if(savedInstanceState == null) 
{
    mFragmentManager = getSupportFragmentManager();
    FragmentTransaction fragmentTransaction = mFragmentManager.beginTransaction();

    FragmentOne fragment = new FragmentOne();

    fragmentTransaction.add(R.id.fragment_container, fragment);
    fragmentTransaction.commit();
} 
```

当配置更改发生时，旧的 Fragment 不会被销毁——它会在重新创建时将自身添加回 Activity。******

# ruby-on-rails - 像这样的“状态”代码在 Rails/MVC 中属于哪里？

> ID：14595953
> 
> 赞同：1
> 
> 时间：2013-01-30T02:58:35.700
> 
> 标签：ruby-on-rails, rails-activerecord

我有一个模型：

```
class Reservation < ActiveRecord::Base
  #  amount_received :integer
  #  event_id        :integer
  #  confirmed_at    :datetime
  belongs_to :event 
```

我想做类似的事情：

```
`self.confirmed_at = Time.zone.now if amount_received >= event.price` 
```

在模型中无论何时`amount_received`更改*（或者我想何时保存模型？）*。但不确定在 Rails 应用程序中的哪个位置？

它有点想加入模型，因为它正在改变模型的状态，但它取决于相关模型中的值，`event.price`并且`event`在模型中没有任何意义。我真的想`Event.find(event_id)`在另一个对象的模型中查询数据库吗？

让我直截了当，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T03:07:45.417

有两个简单的选择...

就我个人而言，由于该模型具有已定义的关系并且需要了解它，因此我会将其放入预保存回调中并完成它。但是，如果您关心保持一个模型独立于另一个模型，您也可以将其放置在观察者中。这样，您可以拥有一个单独的对象，它仅观察保留并处理其他关系。但是，我个人不会选择走这条路，因为您要更新的是预订模型的属性，我认为您的预订模型了解事件并知道如何响应事件属性是完全合理的。

# ssl - 从编程的角度来看，实现 http 和 https 之间有什么真正的区别吗？

> ID：14595955
> 
> 赞同：1
> 
> 时间：2013-01-30T02:58:51.713
> 
> 标签：ssl, https, client-server, communication

我了解 SSL 和 http 的基础知识，但在握手和加密方面，一旦为 SSL 设置服务器，它是否完全处理？或者是否有一般的代码需要在客户端和服务器端触发这些事件？

对于这种情况的描述：我有一个将在服务器上运行的主应用程序，该服务器将跟踪在具有 Internet 访问权限的不同机器上实现的多个应用程序。有时我希望多个应用程序以字符串的形式向主应用程序报告。我要求一个非常笼统的答案的原因是因为我正在使用的平台（Servoy）没有任何简单的例子来说明这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T09:21:14.457

HTTPS 基本上是一个使用加密密钥保护的通道。如果您要传输机密数据，那么您需要使用 HTTPS，因为 HTTP 是 Hacky。

我相信你一定知道 HTTPS 是如何工作的，如果配置正确，那么它就是一种魅力。

你提到的情况是我工作的大部分项目，如果你玩机密数据，SSL是必须的，如果没有，那就去HTTP。

HTTPS 和 HTTP 相比有点慢，所以是按需调用。

# networking - 如何在matlab中绘制以集线器为中心的网络图？

> ID：14595957
> 
> 赞同：1
> 
> 时间：2013-01-30T02:59:00.687
> 
> 标签：networking, graph, drawing, matlab

我想知道matlab是否具有工具箱的一些功能，可以像这样以集线器为中心的方式绘制网络：

![以中心为中心的网络图](../Images/5770c1a87c2ddc75479e4529df121639.png)

我有一个节点的连接矩阵。边缘和颜色的方向并不那么重要。只需要以集线器为中心的样式。我检查了传记工具箱，但它似乎以随机方式绘制网络。我在网上找到了一些工具，它们要么以其他语言实现，要么作为商业软件实现。还是matlab根本做不到？有人对此有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T04:53:54.573

图形可视化的最佳工具可能是 GraphViz：[http ://www.graphviz.org/](http://www.graphviz.org/)

它基本上可以做任何你想做的事情（在合理范围内）。我们在工具箱中使用它来进行图形布局。当人们不想重新发明轮子来进行图形布局（这*不是*微不足道的，尤其是对于大型图形）时，人们会使用它来制作漂亮的图形。

有一个谷歌项目可以让 GraphViz 进入 MATLAB：[http ://code.google.com/p/graphviz4matlab/](http://code.google.com/p/graphviz4matlab/)

我没用过，但是看起来很甜。它是在 GPL 下发布的，所以如果这是一个问题，我一直在研究的工具箱：http: [//www.newfolderconsulting.com/prt/](http://www.newfolderconsulting.com/prt/)对图形可视化工具的支持非常有限。例如

```
prtPath('alpha');
connMat = [0 1 1 1 1 0; 1 0 1 0 1 0; 1 1 0 0 0 0; 1 0 0 0 0 0; 1 1 0 0 0 0; 0 0 1 0 0 0];
nodeNames = {'pete','kenny','sam','wiki','samantha','elena'};

graph = prtDataTypeGraph(connMat,nodeNames);
graph.plot; 
title('People (and dogs) Who Worked or Lived Together'); 
```

在内部，它也使用 GraphViz 工具，但不是通过 google 代码项目。

PRT 中的图形可视化代码有多“alpha”，我怎么强调都不过分。如果 GPL 不是问题，那么 google 代码项目看起来是一个不错的解决方案。

# java - Derby 数据库 - 确定层次结构中的级别以转换 DB -> DefaultMutableTreeNode Java 对象

> ID：14595958
> 
> 赞同：2
> 
> 时间：2013-01-30T02:59:02.603
> 
> 标签：java, sql, hierarchy, derby, jtree

我在德比有一张桌子：

```
CREATE TABLE IMPORT_RULES (
   RULEID    INTEGER NOT NULL,
   PARENTID  INTEGER,
   NAME      VARCHAR(25) NOT NULL,
   PRIMARY KEY (RULEID)
) 
```

PARENTID是父级的RULEID，但是父子关系的深度是未知的。

我的目标是创建一个`DefaultMutableTreeNode`代表分层数据的。

我的想法是，最好的方法是使用 SQL 查询返回数据库中每个项目的“级别”，然后从最低级别向后循环到最高级别。

我的问题是我似乎无法为 Derby 提出上述查询。

关于如何生成此查询或以其他方式实现目标的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T08:52:40.647

如果[H2 数据库](http://www.h2database.com/html/main.html)是可接受的替代方案，它支持[*Recursive Queries*](http://www.h2database.com/html/advanced.html#recursive_queries)。另请参阅有关自定义树模型的此[答案。](https://stackoverflow.com/a/14599682/230513)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T03:08:50.637

我认为不会有一个单一的查询可以实现您的目标。如果有，它一定在我头上。就性能而言，最有效的方法是将“深度”保存在单独的表中不是很好。简单地说，您将树节点数据保存在 IMPORT_RULES 表中，并将每个节点的深度保存在单独的表中，例如 IMPORT_RULE_LEVEL，它保存节点 ID 和与全局根节点相关的深度。

但显然，如果您在分支中间插入一个新节点，有时您可能需要进行批量更新。如果您需要做的所有逻辑只是附加子节点，那么单独的表将是一个不错的选择。

# html - 在 div / MVC3 中显示子网页

> ID：14595959
> 
> 赞同：2
> 
> 时间：2013-01-30T02:59:06.910
> 
> 标签：html, asp.net-mvc-3, iframe

我不确定这是否是一种常见情况，但我在 Google 上找不到任何关于如何执行此操作的信息。

在我的模型中，我有一个字符串属性，其中包含外部网站的整个 html。我想在我的页面上显示这个 html 以显示整个网页，以及页面顶部的一些其他控件。

例如，考虑我在页面顶部有一个带有搜索框的 div。我想在该框中输入一个 url 并将其显示在下面的 div 中。我后面的代码将网页标记检索为字符串。

注意：似乎有使用 iFrame 的解决方案，但我不想传递 URL。我想将 html 作为字符串检索并以这种方式显示。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T03:04:29.287

获取字符串（通过 jquery 的 $.get 之类的东西）。将其设置为要在其中显示页面的 div 的 innerHTML，类似于

```
$("#divFoo")[0].innerHTML = "<div>Your <strong>HTML</strong> string</div>"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T04:44:18.743

我认为您将不得不使用 iFrame - 但这并不全是坏事！你仍然可以显示你的字符串。

控制器将如下所示：

```
public class HomeController : Controller
{
    //
    // GET: /Home/
    //Initial landing page
    public ActionResult Index()
    {
        return View("");
    }
    //for full postbacks, sets the iframes src on the index view
    public ActionResult Page(String url)
    {
        String myurl = "/Home/Search?url=" + url;
        return View("Index", model: myurl);
    }
    //for the iframes src attribute
    public ActionResult Search(String url)
    {
        //replace pageContent with your html string
        String pageContent = "<html><head><title>this is the title</title></head><body>this is the body</body></html>";
        return Content(pageContent);
    }
} 
```

索引将是您的登录或“搜索”页面，如果不支持 javascript，页面将是您的表单发布到的位置，搜索将是您将 iFrame 指向的位置。

行动：

```
@model String
@{
    ViewBag.Title = "URLer";
}
<script type="text/javascript">
    $(document).ready(function () {
        $('#searchForm').submit(function (e) {
            e.preventDefault();
            $('#page').attr('src', '/Home/Search?url=' + $('#url').val());
            return false;
        });
    });
</script>
<div>
@using (Html.BeginForm("Page", "Home", FormMethod.Get, new { id = "searchForm" }))
{
    <input id="url" name="url" type="text" />
    <input id="Search" type="submit" value="Search" />
}
</div>
<iframe id="page" src="@Model" width="100%" height="500">
</iframe> 
```

这显示了一个搜索框和提交按钮，使用 jQuery 表单提交将 iframe 的 src 属性设置为搜索操作，即“/Home/Search”并将 url 文本框的值添加为查询字符串的一部分，这将然后触发 iFrame 导航到正在设置的 url（以 /Home/Search?url= [http://google.com](http://google.com)为例），您返回自己的原始 html 页面/字符串而不是实际网站。

该表单是一个安全网，可能不需要，但是如果出于某种原因禁用了 javascript，该表单将发布到 /Home/Page?url= [http://google.com](http://google.com)，其中返回的视图将设置 iframe，因此将从我们的 Search 操作中获取 url。

# php - PHP将具有单个海量元素的数组转换为多维数组

> ID：14595961
> 
> 赞同：0
> 
> 时间：2013-01-30T02:59:25.467
> 
> 标签：php, arrays, multidimensional-array

我在返回一个包含需要拆分的单个大量元素的数组的 API 时遇到了很多麻烦。事实证明，这是一个难以破解的难题。

```
 $CrappyArray = array([TheSingleElement]=>header1-header2-header3-value1.1-value1.2-value1.3-value2.1-value2.2-value2.3); 
```

我试过只使用常规爆炸。

```
$BetterArray= explode('-', $CrappyArray['TheSingleElement']);
print_r($BetterArray); 
```

不幸的是，这只是返回：

```
Array ([0]=>header1 [1]=>header2 [2]=>header3 [3]value1.1 [4]value1.2 [5]value1.3 [6]value2.1 [7]value2.2 [8]value2.3) 
```

这再好不过了。我需要的是：

```
Array (
[0]=>Array ([0]=>header1 [1]=>header2 [2]=>header3) 
[1]=>Array ([0]=>value1.1 [1]value2.2 [2]value2.3) 
[2]=>Array ([0]=>value2.1 [1]=>value2.2 [2]=>value2.3)
) 
```

我该如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T03:09:15.430

基本上，您想先将那个丑陋的字符串解析为标记，然后遍历标记并构建一个新数组。

如果explode 还不够（但现在看起来还不错），请尝试preg_match_all。它使用起来有点困难，但功能更强大。

当您有丑陋的字符串作为标记数组时，只需使用 foreach 或任何适合您的方式遍历它并构建您正在寻找的结构。

我认为没有比这更简单的解决方案了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T03:13:37.570

我想到了！

```
$BetterArray = array_chunk($BetterArray, 3); 
```

# css - 在表单页面中插入图像

> ID：14595967
> 
> 赞同：1
> 
> 时间：2013-01-30T03:00:24.397
> 
> 标签：css, image, forms, web

我正在尝试将图像插入此页面右侧的大空白区域。 [http://www.jobspark.ca/post-a-job/](http://www.jobspark.ca/post-a-job/)

我正在尝试使用 CSS 来实现这一点。这就是我到目前为止所拥有的。

```
#modulePage19099472 
{ background-image: url (http://www.jobspark.ca/storage/postjobimage.jpg);
background-position: right;
background-repeat: no-repeat;
padding: 0 0 0 0; 
margin: 0 0 0 0; } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T03:26:28.143

看起来您想将样式应用于“.form-b​​ody”类，而不是“#modulePage19099472”。试试下面的 CSS：

```
.form-body{
    background-image: url("http://www.jobspark.ca/storage/postjobimage.jpg");
    background-position: right top;
    background-repeat: no-repeat;
    background-size: 54% auto; 
 } 
```

确保“url”和左括号之间没有空格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T03:10:54.050

看起来选择器是假的。在您页面的源代码中，我可以看到`id="formOuterContainer19099472"`，而不是`id="modulePage19099472"`。

# c# - Dispatcher.Invoke 不捕获异常

> ID：14595969
> 
> 赞同：4
> 
> 时间：2013-01-30T03:00:31.733
> 
> 标签：c#, windows-phone-8

我在下面有一个代码可以得到回复`HTTP GET`：

```
private void ResponseReady(IAsyncResult aResult)
{
    HttpWebRequest request = aResult.AsyncState as HttpWebRequest;

    try
    {
        this.Dispatcher.BeginInvoke(delegate()
        {
            HttpWebResponse response = (HttpWebResponse)request.EndGetResponse(aResult); 
```

没有连接时的问题，它会停在该`response`行。它没有捕捉到异常。`Dispatcher.Invoke`是不是因为

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T03:08:41.510

您的异常没有被捕获，因为对 BeginInvoke 的调用不会执行您的委托中的代码，它会将其排入队列以在 ThreadPool 线程上执行。当您的异常确实发生时，没有异常处理到位。您的意思是在这里使用 Invoke 或 BeginInvoke 吗？无论哪种方式，将异常处理放在委托中都应该可以解决您的问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T03:06:23.780

BeginInvoke 委托中的代码在不同的线程中执行，您需要在那里创建单独的 try/catch。

# php - PHP Magento - 通过没有表单的帖子重定向和发送数据

> ID：14595972
> 
> 赞同：0
> 
> 时间：2013-01-30T03:00:57.283
> 
> 标签：php, magento, redirect, post

我有 2 个 php 页面。我想将第 1 页（包含数据（例如用户名））重定向到仅接收帖子数据的第 2 页。

这是第 2 页中收到的代码（由于开发原因无法编辑）：

```
if (!$_POST["username"]||$_POST["username"]=="Studio") $username="Studio".rand(100,999);
else $username=$_POST["username"]; 
```

我试图在我的案例中使用 curl，但没有得到我需要的数据。

这是我在第 1 页中的代码：

```
$src = "http://test.com/test.php"
//open connection
$ch = curl_init();

//set the url, number of POST vars, POST data
curl_setopt($ch,CURLOPT_URL,$src);
curl_setopt($ch,CURLOPT_POST,1);
curl_setopt($ch,CURLOPT_POSTFIELDS,"username=".$title);

//execute post
$result = curl_exec($ch);

//close connection
curl_close($ch);

$this->_redirectUrl($src); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T03:05:32.110

您是否尝试过将 CURL 与 POST 一起使用？

```
$ch = curl_init();

curl_setopt($ch,CURLOPT_URL, $url); //set URL
curl_setopt($ch,CURLOPT_POST, 1); // make a POST request
curl_setopt($ch,CURLOPT_POSTFIELDS, $post_vars);

//execute post
$result = curl_exec($ch);

//close connection
curl_close($ch); 
```

`$post_vars`可以是类似的东西`'lastname=smith&firstname=bill'`

# c# - 为什么在 Console.WriteLine (ref1) 之后对象 ref1 已准备好进行 GC？

> ID：14595973
> 
> 赞同：0
> 
> 时间：2013-01-30T03:01:32.393
> 
> 标签：c#, heap-memory, stack-memory

我开始阅读 C# 5.0 in a Nutshell，现在我在 Stack and Heap 一章有一个 GC 如何处理堆对象的示例：

```
StringBuilder ref1 = new StringBuilder ("object1");
Console.WriteLine (ref1);
// The StringBuilder referenced by ref1 is now eligible for GC. 
```

所以作者说 ref1 对象在 Console.WriteLine 之后已经准备好进行 GC，但是如果我想稍后在我的程序中使用 ref1 对象怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T03:06:28.927

只要您使用对对象的引用，它就没有资格被收集。该示例的重点是表明，由于`ref1`代码不再访问该对象，因此可以在此之后的任何时候收集该对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T03:05:03.310

编译器知道没有指向 ref1 的链接，因此将其标记为未使用。如果您对 ref1 有其他用途，编译器就会知道这一点并使其保持活动状态。J. Richter 有一本好书：“.NET CLR via C#”。他确实在书中解释了很多

# ios - ld: 找不到 -lobjc 的库

> ID：14595974
> 
> 赞同：0
> 
> 时间：2013-01-30T03:01:37.557
> 
> 标签：ios

我在我的项目中添加了 FacebookSDK.framework。之后，当我尝试在模拟器上运行它时，它工作正常，但在存档时我收到错误

```
 ld: library not found for -lobjc
 clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

不知道如何解决。任何帮助将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T03:11:56.700

如果没有更多信息，我只能猜测 FacebookSDK.framework 建议您将`-Objc`目标的**Other Linker Flags**放入**Build Settings**中，而您将其拼写为`-lobjc`.

# razor - 果园：特定用户的菜单链接

> ID：14595975
> 
> 赞同：2
> 
> 时间：2013-01-30T03:01:44.857
> 
> 标签：razor, orchardcms

使用 Orchard CMS 开发我自己的网站已经有几天了。

我正在制作一个所有用户都可以浏览并且管理员可以编辑的个人资料。只需安装配置文件包，但是，我不知道如何构造一个链接到我自己配置​​文件的字符串。

本地主机：80/配置文件/“用户名”

如何链接特定的用户名导航自定义链接url？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T12:15:14.580

访问您自己的个人资料的唯一 URL 包括您的用户名。

所以，如果你想链接到当前用户的个人资料，你需要解决这个问题，如下所示：

```
@if (WorkContext.CurrentUser != null) {
    @Html.ActionLink("your profile", "Index", "Home",
        new { area="Contrib.Profile",
            username = WorkContext.CurrentUser.UserName }, null)
} 
```

# php - 使用 foreach 为 PHP 数组赋值时遇到问题

> ID：14595976
> 
> 赞同：0
> 
> 时间：2013-01-30T03:01:45.440
> 
> 标签：php, arrays, simplexml

我在使用 PHP 数组时遇到了一些问题，据我所知，它应该可以工作。我正在使用 simpleXML 并循环一个 simpleXML 输出。然后，我尝试从相关的 XML 节点中删除“id”属性，将其指定为数组中新项目的键，并将值指定为国家/地区名称。这是我的 simpleXML 输出示例（`$cxml`在下面的代码中）：

```
SimpleXMLElement Object ( 
  [country] => Array ( 
    [0] => SimpleXMLElement Object ( 
      [@attributes] => Array ( [id] => AD ) 
      [name] => ANDORRA 
      [ssc] => EUR 
    ) 
    [1] => SimpleXMLElement Object ( 
      [@attributes] => Array ( [id] => AE ) 
      [name] => UNITED ARAB EMIRATES 
      [ssc] => EUR 
    ) 
    [2] => SimpleXMLElement Object ( 
      [@attributes] => Array ( [id] => AF ) 
      [name] => AFGHANISTAN 
      [ssc] => ASI 
    ) ...
  ) 
```

等等。这是我的代码：

```
function generateCountryList() {
  global $server_path;
  // the following line generates - correctly - the object I gave above
  $cxml = simplexml_load_file($server_path . 'countries/');  
  $c = array();
  foreach ($cxml->country as $cntry => $rec) {
    $rid = $rec['id'];
    $rname = ucwords(strtolower($rec->name));
    //the following echo statements are for debugging only
    echo $rid;  //returns the country ID; for example, AD on the 0th element in the object
    echo $rname;  //returns the country name; for example, Andorra on the 0th element in the object
    $c[$rid] = $rname;  //the goal here is to have an array of the form    
                        //['AD'=>'Andorra','AE'=>'United Arab Emirates',...]
 }
return $c;
} 
```

如果我返回`$c`并将其分配给一个变量，那么`print_r`该变量，我得到一个空数组。如果我`print_r($c);`在这个函数中运行，我会得到同样的结果。

我很感激有人可以提供任何帮助，说明为什么我无法构建这个阵列！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T18:56:15.897

当您使用 导航到 SimpleXML 对象的子节点时`$element->elementName`，您会得到另一个 SimpleXML 对象，以便您可以从那里继续导航。要获取子节点的字符串内容，请使用 PHP 字符串转换运算符：`(string)$element->elementName`。

不太明显的是，当您使用 导航到一个**属性**时`$element['attribName']`，它**还会**为您提供另一个 SimpleXML 对象。除了字符串内容之外，您对该对象没有太多想要的东西，但`$attrib->getName()`例如，您可能希望在循环内调用。同样，要获取字符串内容，您必须使用`(string)$element['attribName']`，正如您所发现的那样。

现在，PHP 中的一些函数和构造，例如`echo` **隐式转换为 string**，因为根本没有其他数据类型可以与它们一起使用。但是，与其确切了解它们是什么，并在更改代码时增加混乱，我的建议是**始终将任何 SimpleXML 结果显式地转换为字符串`(string)`**。

最后一点：您还可以使用 . 从内容中获取整数值`(int)`，使用`(float)`. 但是，在总和中使用对象，例如`$element['attribName'] * 1.0`将始终将其转换为整数，无论​​涉及什么值。同样，显式转换将导致更少的意外。

# silverlight - Silverlight 的 Azure 存储（REST？）

> ID：14595977
> 
> 赞同：1
> 
> 时间：2013-01-30T03:02:34.843
> 
> 标签：silverlight, rest, azure, azure-storage, azure-blob-storage

我正在尝试从 Silverlight 查询一个 azure Blob Storage 容器。

我看到 Windows.Azure.Storage.dll 无法与 Silverlight 一起使用，因此我认为与我的存储容器通信的最佳方式是使用 REST 服务。我看到了 Azure Storage REST API，但找不到简单的方法：

*   列出容器中的所有 blob
*   从容器中检索 blob
*   在容器中添加新 blob

任何人都有一个明确的例子来说明如何做到这一点（对于一个完整的 REST 假人）？

顺便说一句，它必须是一个私人容器。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T03:13:53.103

由于您无权访问`Microsoft.WindowsAzure.Storage`程序集，因此您需要直接调用 REST 服务。

API 在这里定义：

[http://msdn.microsoft.com/en-us/library/windowsazure/dd135733.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/dd135733.aspx)

这个 CodePlex 项目有一些很好的代码示例，可以帮助您开始使用 REST 调用：

[http://azurestoragesamples.codeplex.com/](http://azurestoragesamples.codeplex.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T04:50:46.973

添加更多选项：由于您提到 blob 容器是私有的，因此另一种选择可能是使用共享访问签名 (SAS) ( [https://azure.microsoft.com/en-us/documentation/articles/storage-dotnet-shared -access-signature-part-1/](https://azure.microsoft.com/en-us/documentation/articles/storage-dotnet-shared-access-signature-part-1/)）。请查看 Steve Marx 的此博客文章系列，其中他演示了使用 Silverlight 和共享访问签名上传 blob：http: [//blog.smarx.com/posts/uploading-windows-azure-blobs-from-silverlight-part- 1-共享访问签名](http://blog.smarx.com/posts/uploading-windows-azure-blobs-from-silverlight-part-1-shared-access-signatures)。一旦有了 SAS URI，就可以简单地使用 HttpWebRequest/HttpWebResponse 对 blob 存储执行操作，而无需通过实现 REST API。

要列出 blob，您需要 SAS 中的“列表”权限。要获取 blob，您需要 SAS 中的“读取”权限，而要上传 blob，您需要 SAS 中的“创建”权限。

# javascript - yeoman 构建失败 - rjs mainConfigFile 位置

> ID：14595979
> 
> 赞同：2
> 
> 时间：2013-01-30T03:02:50.490
> 
> 标签：javascript, requirejs, rjs, yeoman, gruntjs

`yeoman server`工作正常，但`yeoman build`在一个奇怪的地方查找我的主要 requirejs 文件并失败：

```
<WARN> Unable to read "scripts/scripts/main.js" file (Error code: ENOENT). Use --force to continue. </WARN> 
```

似乎添加了额外的脚本/目录，因为我的 baseUrl 是 ./scripts，但`yeoman server`在正确的位置发现它很好。这是我的设置，它主要是默认的东西：

在 index.html 中：

```
<!-- build:js scripts/scripts.js -->
<script src="scripts/vendor/require.js" data-main="scripts/main"></script>
<!-- endbuild --> 
```

在 Gruntfile.js 中：

```
rjs: {
  // no minification, is done by the min task
  optimize: 'none',
  baseUrl: './scripts',
  wrap: true
}, 
```

应用树的相关部分：

```
.
├── Gruntfile.js
├── app
│   ├── index.html
│   └── scripts
│       ├── main.coffee
│       ├── vendor
│       │   ├── require.js
|       |   └── all other js library scripts
│       └── all my other scripts
└── package.json 
```

如果我像这样从 data-main 属性中删除 scripts/ 目录`data-main="main"`，它实际上确实没有错误地构建。尝试在浏览器中打开构建的应用程序会导致空白页面和控制台错误，并且`yeoman server`在没有找到 main.js 的情况下失败。我尝试过的对这些参数的其他修改都没有给我一个成功的`yeoman build`.

我希望我只是缺少一个小的配置怪癖。谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T02:06:06.613

我想我`name: 'main'`在 Gruntfile 的 rjs 配置中遗漏了一个简单的内容，所以它应该如下所示：

```
rjs: {
  // no minification, is done by the min task
  optimize: 'none',
  baseUrl: './scripts',
  wrap: true,
  name: 'main'
}, 
```

这可以正确地与`yeoman server`and一起使用`yeoman build`。

# actionscript-3 - actionscript 3：如何通过引用函数传递数组，并让该函数更新它？

> ID：14595987
> 
> 赞同：3
> 
> 时间：2013-01-30T03:03:46.283
> 
> 标签：actionscript-3, apache-flex

默认情况下，ActionScript 3 通过引用传递数组。我一定是犯了一个菜鸟的错误。这是我的代码的快照：

```
private function testFunc():void {
    var testArray:Array=new Array();
    myFunction(testArray);
    trace(testArray); // []; length=0
}

private function myFunction(tArray:Array):void {
    tArray = myOtherFunction();
    trace(tArray); // 0, 1, 2; length=3
}

private function myOtherFunction():Array {
    var x:Array=new Array;
    for (var i:int=0; i<3; i++)
       x[i]=i;
    return x;
} 
```

我可以看到这`tArray`是正确的，但`testArray`总是空的。知道如何使`testArray`平等`tArray`吗？提前致谢。

[http://help.adobe.com/en_US/AS2LCR/Flash_10.0/help.html?content=00000049.html](http://help.adobe.com/en_US/AS2LCR/Flash_10.0/help.html?content=00000049.html)

更新：

对于它的价值，我发现以下更改（hack）有效：

```
private function myFunction(tArray:Array):void {
    var Z:Array=new Array;
    Z = myOtherFunction();
    for (var i:int=0; i<Z.length; i++)
        tArray[i]=Z[i];
} 
```

Georgii 的解决方案是更好的设计。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T03:45:34.437

当您将 testArray 作为参数传递给 myFunction 时，它的引用被复制并分配给本地引用 tArray，这样 myFunction 内部的 tArray 指向与 testArray 相同的对象，但实际上是不同的引用。这就是为什么当您更改 tArray 引用时， testArray 本身不会更改。

```
private function testFunc():void {
    var testArray:Array=new Array(); 
    // testArray is a local variable, 
    // its value is a reference to an Array object
    myFunction(testArray);
    trace(testArray); // []; length=0
}

private function myFunction(tArray:Array):void {
    // tArray is a local variable, which value equals to testArray
    tArray = myOtherFunction(); 
    // now you changed it and tArray no longer points to the old array
    // however testArray inside of testFunc stays the same
    trace(tArray); // 0, 1, 2; length=3
} 
```

你可能想要的是：

```
private function testFunc():void {
    var testArray:Array=new Array();
    testArray = myFunction(testArray);
    trace(testArray); // 0, 1, 2; length=3
}

private function myFunction(tArray:Array):Array {
    // do what you want with tArray
    tArray = myOtherFunction();
    trace(tArray); // 0, 1, 2; length=3
    // return new value of the tArray
    return tArray;
}

private function myOtherFunction():Array {
    var x:Array=new Array;
    for (var i:int=0; i<3; i++)
       x[i]=i;
    return x;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T03:51:13.550

基本上发生的事情是您已将 Array 传递给函数，该函数又创建了对它的本地引用（在函数内）。

这意味着，如果您决定继续并将新创建的 Array 分配给局部变量（`tArray`在您的情况下），它将被使用，而原始实例将保留其原始实例。

这对于任何对象都是一样的，例如对于 Sprite：

```
var sprite:Sprite = new Sprite();

// We set the original Sprite's x to 10.
sprite.x = 10;

function mutilate(subject:Sprite):void
{
    // Notice here how we are making a new instance. This won't assign a new
    // instance to the "sprite" property that we've passed here, but rather
    // a new instance to the local variable "subject".
    subject = new Sprite();

    // And here we set the x of the new instance to 20.
    subject.x = 20;
}

mutilate(sprite);
trace(sprite.x); // Outputs 10, though you may have expected 20. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T04:01:48.750

返回 myOtherFunction() 遍历它，然后为每个元素调用 tArray.push() 。目前，您所做的只是更改对新创建对象的本地引用。

您需要将元素添加到原始数组中，您在分配时也会丢失引用。

# elasticsearch - 查询与过滤器

> ID：14595988
> 
> 赞同：226
> 
> 时间：2013-01-30T03:03:48.710
> 
> 标签：elasticsearch

我看不到关于何时应该使用查询或过滤器或两者的某种组合的任何描述。它们之间有什么区别？谁能解释一下？

* * *

## 回答 #1

> 赞同：221
> 
> 时间：2013-01-30T09:37:07.903

区别很简单：过滤器被缓存并且不影响分数，因此比查询更快。也看看[这里](http://www.elasticsearch.org/guide/reference/query-dsl/)。假设查询通常是用户键入的并且几乎不可预测的内容，而过滤器帮助用户缩小搜索结果的范围，例如使用方面。

* * *

## 回答 #2

> 赞同：110
> 
> 时间：2014-08-10T13:48:24.863

这是官方文档所说的：

> 作为一般规则，应该使用过滤器而不是查询：
> 
> *   对于二进制是/否搜索
> *   用于查询确切值

* * *

> 作为一般规则，应该使用查询而不是过滤器：
> 
> *   用于全文搜索
> *   结果取决于相关性分数

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2017-12-20T03:58:02.067

# 一个例子（自己试试）

说索引`myindex`包含三个文档：

```
curl -XPOST localhost:9200/myindex/mytype  -d '{ "msg": "Hello world!" }'
curl -XPOST localhost:9200/myindex/mytype  -d '{ "msg": "Hello world! I am Sam." }'
curl -XPOST localhost:9200/myindex/mytype  -d '{ "msg": "Hi Stack Overflow!" }' 
```

> # 查询：文档与查询的匹配程度

## 查询`hello sam`（使用关键字`must`）

```
curl localhost:9200/myindex/_search?pretty  -d '
{
  "query": { "bool": { "must": { "match": { "msg": "hello sam" }}}}
}' 
```

文档`"Hello world! I am Sam."`的得分高于`"Hello world!"`，因为前者匹配查询中的两个单词。**文件被评分。**

```
"hits" : [
   ...
     "_score" : 0.74487394,
     "_source" : {
       "name" : "Hello world! I am Sam."
     }
   ...
     "_score" : 0.22108285,
     "_source" : {
       "name" : "Hello world!"
     }
   ... 
```

> # 过滤器：文档是否匹配查询

## 过滤器`hello sam`（使用关键字`filter`）

```
curl localhost:9200/myindex/_search?pretty  -d '
{
  "query": { "bool": { "filter": { "match": { "msg": "hello sam" }}}}
}' 
```

包含`hello`或`sam`返回的文档。**文件不计分**。

```
"hits" : [
   ...
     "_score" : 0.0,
     "_source" : {
       "name" : "Hello world!"
     }
   ...
     "_score" : 0.0,
     "_source" : {
       "name" : "Hello world! I am Sam."
     }
   ... 
```

* * *

## 除非您需要全文搜索或评分，否则首选过滤器，因为 Elasticsearch 会自动缓存常用的过滤器，以提高性能。请参阅[Elasticsearch：查询和过滤上下文。](https://www.elastic.co/guide/en/elasticsearch/reference/current/query-filter-context.html)

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2018-02-09T09:20:45.247

`Filters`-> 这个文件匹配吗？二进制**是或否**答案

`Queries`-> 这个文件匹配吗？匹配程度如何？使用**评分**

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2015-02-24T02:40:37.103

几乎没有更多的相同。首先应用过滤器，然后根据其结果处理查询。为了存储每个文档的二进制真/假匹配，使用了一个叫做 bitSet Array 的东西。这个 BitSet 数组在内存中，它将在第二次查询过滤器时使用。这样，使用 bitset 数组数据结构，我们就可以利用缓存的结果。

这里还要注意一点，过滤器缓存仅在请求执行时创建，因此仅从第二次命中开始，我们实际上获得了缓存的优势。

但是你可以使用[更温暖的 API](http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/indices-warmers.html)来超越它。当您使用过滤器针对更温暖的 API 注册查询时，它将确保在新段上线时执行此操作。因此，我们将从第一次执行本身获得一致的速度。

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2014-11-23T05:50:34.023

基本上，当您想对带有评分的文档执行搜索时，会使用查询。过滤器用于缩小使用查询获得的结果集。过滤器是布尔值。

例如，假设您有一个餐厅索引，例如 zomato。现在您要搜索提供**'pizza'**的餐厅，这基本上是您的搜索关键字。

因此，您将使用查询来查找所有包含**“pizza”**的文档，并会获得一些结果。

现在说您想要提供比萨饼且评分至少为 4.0 的餐厅列表。

因此，您需要做的是在查询中使用关键字**“pizza”**并应用过滤器以将评级设为 4.0。

发生的情况是过滤器通常应用于通过查询索引获得的结果。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-08-15T04:56:05.343

查询：计算分数；因此他们能够返回按相关性排序的结果。过滤器：不计算分数，使它们更快更容易缓存。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-05-07T07:20:22.960

从 Elasticsearch 的第 2 版开始，过滤器和查询已经合并，任何查询子句都可以用作过滤器或查询（取决于上下文）。与版本 1 一样，过滤器被缓存，如果评分无关紧要，应该使用它。

来源：[https ://logz.io/blog/elasticsearch-queries/](https://logz.io/blog/elasticsearch-queries/)

# c++ - 是否可以从 WinAPI 保护内存区域？

> ID：14595989
> 
> 赞同：5
> 
> 时间：2013-01-30T03:03:54.230
> 
> 标签：c++, winapi, memory-management, heap-corruption

阅读[了这篇](http://www.rt-embedded.com/blog/archives/resolving-memory-corruption/)概述了调试堆损坏技术的有趣文章后，我开始想知道如何根据自己的需要对其进行调整。基本思想是提供一个自定义的 malloc() 来分配整个内存页面，然后为这些页面启用一些内存保护位，以便程序在被写入时崩溃，并且可以在该行为中捕获有问题的写入指令. 示例代码是 Linux 下的 C（mprotect() 用于启用保护），我很好奇如何将其应用于本机 C++ 和 Windows。VirtualAlloc() 和/或 VirtualProtect() 看起来很有希望，但我不确定使用场景会是什么样子。

```
Fred *p = new Fred[100];
ProtectBuffer(p);
p[10] = Fred(); // like this to crash please 
```

我知道在 Windows 中存在用于调试内存损坏的专用工具，但我仍然很好奇是否可以使用这种方法“手动”执行此操作。

**编辑：**另外，这在 Windows 下是一个好主意，还是只是一个有趣的智力练习？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T03:28:43.180

是的，您可以使用 VirtualAlloc 和 VirtualProtect 来设置受保护免于读/写操作的内存部分。

您必须重新实现`operator new`and `operator delete` （及其 [] 亲戚），以便您的内存分配由您的代码控制。

请记住，它只会以每页为基础，并且每次分配您将使用（至少）三页的虚拟内存 - 在 64 位系统上不是一个大问题，但可能会导致问题，如果您在 32 位系统中有许多分配。

大致你需要做的（你实际上应该找到构建 Windows 的页面大小 - 我太懒了，所以我将使用 4096 和 4095 来表示 pagesize 和 pagesize-1 - 你还需要做更多错误检查比此代码所做的检查！！！）：

```
void *operator new(size_t size)
{
    Round size up to size in pages + 2 pages extra.
    size_t bigsize = (size + 2*4096 + 4095) & ~4095; 

    // Make a reservation of "size" bytes. 
    void *addr = VirtualAlloc(NULL, bigsize, PAGE_NOACCESS, MEM_RESERVE);

    addr = reinterpret_cast<void *>(reinterpret_cast<char *>(addr) + 4096);

    void *new_addr = VirtualAlloc(addr, size, PAGE_READWRITE, MEM_COMMIT); 

    return new_addr;
}

void operator delete(void *ptr)
{
    char *tmp = reinterpret_cast<char *>(ptr) - 4096;

    VirtualFree(reinterpret_cast<void*>(tmp)); 
} 
```

正如我所说的那样，我没有尝试编译此代码，因为我只有一个 Windows VM，而且我懒得下载编译器并查看它是否真的编译。[我知道这个原则是有效的，因为我们在几年前工作的地方做过类似的事情]。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T14:39:04.800

这就是 Gaurd Pages 的用途（请参阅此[MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366549%28v=vs.85%29.aspx)教程），它们在第一次访问页面时引发特殊异常，允许您做的不仅仅是在第一次访问无效页面时崩溃（并捕获错误的读/写操作）到 NULL 指针等）。

# c++ - 为什么 std::sort 不接受在函数中声明的比较类

> ID：14595992
> 
> 赞同：5
> 
> 时间：2013-01-30T03:04:18.153
> 
> 标签：c++

我在工作，在一个函数中编写比较器（稍后移动，当我决定哪里最好时），并注意到了这个特殊性。我想了一会儿，意识到我不明白为什么如果我使用内部比较器，代码将无法编译，但外部比较器很好。

有什么解释吗？

快速测试工具：

```
#include <iostream>
#include <vector>
#include <algorithm>

class CompareMe
{
 public:
    CompareMe(int in) : toCompare(in){}
    int toCompare;
};

class Comparators
{
public:
    bool operator()(CompareMe * first, CompareMe * second)
    {
        return first->toCompare < second->toCompare;
    }
};

class ComparatorsOuter : public Comparators{};

int main()
{
    class ComparatorsInner : public Comparators{};

    std::vector<CompareMe *> compares;
    compares.push_back(new CompareMe(0));
    compares.push_back(new CompareMe(1234));
    compares.push_back(new CompareMe(163));
    compares.push_back(new CompareMe(6));
    compares.push_back(new CompareMe(12));

    //This works, and properly sorts the array
    ComparatorsOuter comparator;
    std::sort(compares.begin(), compares.end(), comparator);

    //Uncomment out the sort below and it will not compile.
    ComparatorsInner comparatorInner;
    //std::sort(compares.begin(), compares.end(), comparatorInner);

    std::vector<CompareMe *>::iterator it;
    for(it = compares.begin(); it != compares.end(); ++it)
    {
        std::cout << (*it)->toCompare << std::endl;
    }
} 
```

> 错误：没有匹配的函数调用“ `sort(__gnu_cxx::__normal_iterator<CompareMe**, std::vector<CompareMe*, std::allocator<CompareMe*> > >, __gnu_cxx::__normal_iterator<CompareMe**, std::vector<CompareMe*, std::allocator<CompareMe*> > >, main()::ComparitorInner&)`”

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-30T03:12:52.867

在 C++03 中，模板参数不能有内部链接：

> `[C++03: 14.6.4.2/1]:`对于依赖于模板参数的函数调用，如果函数名称是*unqualified-id*但不是*template-id*，则使用通常的查找规则（3.4.1、3.4.2）找到候选函数，但以下情况除外：
> 
> *   **对于使用非限定名称查找**(3.4.1) 的查找部分，**只能找到具有来自模板定义上下文的外部链接的函数声明**。
> *   对于使用关联命名空间 (3.4.2) 的查找部分，仅找到在模板定义上下文或模板实例化上下文中找到的具有外部链接的函数声明。
> 
> *[..]*

这在 C++11 中已更改（问题[#561：“依赖名称查找中的内部链接函数” ）：](http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_defects.html#561)

> `[C++11: C.2.6]:`14.6.4.2
> **更改**：允许具有内部链接的函数的依赖调用
> **理由：**过度约束，简化重载决议规则。

导致：

> `[C++11: 14.6.4.2/1]:`对于依赖于模板参数的函数调用，使用通常的查找规则（3.4.1、3.4.2、3.4.3）找到候选函数，除了：
> 
> *   **对于使用非限定名称查找**(3.4.1) 或限定名称查找 (3.4.3) 的查找部分，**只能找到来自模板定义上下文的函数声明。**
> *   对于使用关联命名空间 (3.4.2) 的查找部分，仅找到在模板定义上下文或模板实例化上下文中找到的函数声明。
> 
> *[..]*

（发现缺少的*“与外部联系”*资格。）

由于您`main()::ComparitorInner&`具有内部链接，并且实例化`std::sort`要求此类型是模板参数（尽管是推导的），因此您的代码仅在 C++11 中有效。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T03:10:57.840

您的代码在 C++11 中很好；在 C++03 中使用局部类型作为模板参数有一个限制。

# jquery - jQuery检查具有某些类的兄弟姐妹

> ID：14595993
> 
> 赞同：0
> 
> 时间：2013-01-30T03:04:21.457
> 
> 标签：jquery, checkbox

我正在一个具有奇怪 html 格式的网站上工作。请参阅下面的 html。基本上，当一个复选框`.group`被点击时，后面的所有`.item`复选框都应该被选中，直到它击中下一个`.groupparent`div。将如何处理这个问题。注意：标签内还有一个数字`<b>`，我们也可以用它来计算下一个`.items`需要检查的数字。感谢您的意见。我正在使用 jQuery。

```
<div class="groupparent"><input type="checkbox" class="group" /><b>3</b></div>
    <input type="checkbox" class="item" />
    <input type="checkbox" class="item" />
    <input type="checkbox" class="item" />
<div class="groupparent"><input type="checkbox" class="group" /><b>2</b></div>
    <input type="checkbox" class="item" />
    <input type="checkbox" class="item" />
<div class="groupparent"><input type="checkbox" class="group" /><b>4</b></div>
    <input type="checkbox" class="item" />
    <input type="checkbox" class="item" />
    <input type="checkbox" class="item" />
    <input type="checkbox" class="item" />
<div class="groupparent"><input type="checkbox" class="group" /><b>6</b></div>
    <input type="checkbox" class="item" />
    <input type="checkbox" class="item" />
    <input type="checkbox" class="item" />
    <input type="checkbox" class="item" />
    <input type="checkbox" class="item" />
    <input type="checkbox" class="item" /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T03:06:43.993

我假设类名，`groupparent`然后我认为这会做

```
$(this).parent().nextUntil('.groupparent').filter('.item') 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/pEZWC/1/)

您可以在此处使用[jQuery.nextUntil](http://api.jquery.com/nextUntil/)选择器。

# android - 使用网络应用程序中的智能手机摄像头扫描 QR 码

> ID：14595995
> 
> 赞同：18
> 
> 时间：2013-01-30T03:04:26.527
> 
> 标签：android, jquery, html, android-camera, qr-code

我想构建一个网络应用程序（Html5 + Javascript，无闪存），而不是使用智能手机相机扫描二维码，然后将结果发送到服务器。那可能吗？

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-30T03:06:56.287

是的，是的，有可能：

[如何在 HTML5 网站中创建二维码阅读器？](https://stackoverflow.com/questions/11625415/how-to-create-qr-code-reader-in-html5-website)

希望有帮助。

互联网上有很多图书馆和示例。我建议用谷歌搜索它并查看一些开源项目。