# StackOverflow 问答 15861000-15861999

# asp.net - 带有 ObjectDataSource 的 GridView 在空数据上显示页脚

> ID：15861001
> 
> 赞同：3
> 
> 时间：2013-04-07T09:40:02.697
> 
> 标签：asp.net, gridview, objectdatasource

GridView中没有`ShowFooterWhenEmpty`属性；(

当我不使用 ObjectDataSource 进行数据绑定时，它很简单：

```
...
    SqlDataAdapter adapter = new SqlDataAdapter(cmd);
    DataTable data = new DataTable();
    conn.Open();
    adapter.Fill(data);
    conn.Close();

    if (data.Rows.Count > 0)
    {
        grid.DataSource = data;
        grid.DataBind();
    }
    else
    {
        data.Rows.Add(data.NewRow());
        grid.DataSource = data;
        grid.DataBind();

        int TotalColumns = grid.Rows[0].Cells.Count;
        grid.Rows[0].Cells.Clear();
        grid.Rows[0].Cells.Add(new TableCell());
        grid.Rows[0].Cells[0].ColumnSpan = TotalColumns;
        grid.Rows[0].Cells[0].Text = "No Records Found";
    }
... 
```

由`Page_Load() if (!IsPostBack) {...}`

现在`ObjectDataSource`代表自动绑定和分页。

我应该如何呈现插入按钮所在的页脚？

尝试过`OnSelected`的事件，`ObjectDataSource`但我不知道如何在其中添加一行。

```
protected void ODS_Selected(object sender, ObjectDataSourceStatusEventArgs e)
{
    DataSet ds = e.ReturnValue as DataSet;
    // Add empty row here or 'No Records Found' string to force Footer show
} 
```

请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T22:43:57.463

如您所知，当 GridView 为空（无行）时，页脚不会显示。解决方法是确保在不存在真实数据时从 ObjectDataSource 返回一个虚拟行。

我建议检查GridView DataBound事件中的行数，如果没有，则修改ObjectDataSource的SelectMethod以返回一个虚拟数据的虚拟行，然后重新绑定gridview。虚拟数据的一个示例可能是：

```
ID : null
Name : 'No data, please add using form below' ...etc...
Description : null
...
etc
... 
```

GridView 将在重新绑定后显示页脚。

# jquery - 将 jGestures 与 jQuery "on" 事件一起使用

> ID：15861003
> 
> 赞同：2
> 
> 时间：2013-04-07T09:40:13.717
> 
> 标签：jquery, mobile, gesture, jgestures

我有许多需要点击的动态生成的 div。对于面向鼠标的设备，我通常这样做：

```
$("#wrap").on("click", 'div', function() { console.log("clicked!"); }); 
```

我注意到在使用 jGestures 自定义事件时，手机的灵敏度会大大提高，以这种方式使用时效果很好：

```
$("#wrap").bind('tapone', function() { console.log("tapped!"); }); 
```

但是，我不能像这样使用`tapone`jQuery`.on`事件：

```
$("#wrap").on("tapone", 'div', function() { console.log("tapped!"); }); 
```

有谁知道解决这个问题的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T10:28:43.617

建立你自己的代表团，如果你有这个：

```
$("#wrap").on('click', '#myID', function() { console.log("clicked!"); }); 
```

它真正做的是：

```
$("#wrap").on('click', function(e) { 
    if ( e.target.id == 'myID' )
        console.log("clicked!"); 
}); 
```

因此，对于您的自定义事件，您可以执行以下操作：

```
$("#wrap").on("tapone", function(e) {
    if ( e.target.tagName.toLowerCase() == 'div' )
        console.log("tapped!"); 
}); 
```

[**小提琴**](http://jsfiddle.net/Jv52C/)

# ruby-on-rails - Ruby on rails 下拉框

> ID：15861004
> 
> 赞同：0
> 
> 时间：2013-04-07T09:40:17.670
> 
> 标签：ruby-on-rails, html-select

我刚刚写了我的第一个 ruby​​ on rails 应用程序，我有点卡住了。我有一个包含作者、书籍和类别的图书馆数据库。一本书属于作者和类别。所以现在在创建一本书时，我想从列表中选择作者和类别。我该怎么做。我是红宝石的新手，所以任何帮助将不胜感激。目前这本书只有名称列。

这是书籍类或模型：

```
class Book < ActiveRecord::Base
  belongs_to :author
  belongs_to :category
  attr_accessible :name
  validates :name, :presence => true
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T09:48:36.967

在您的书籍表格中，使用以下选择字段：

```
<%= f.select :author_id, Author.all.collect {|p| [ p.name, p.id ] } %>
<%= f.select :category_id, Category.all.collect {|p| [ p.name, p.id ] } %> 
```

有关关联的更多详细信息，请参见[http://guides.rubyonrails.org/association_basics.html](http://guides.rubyonrails.org/association_basics.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T09:50:05.520

在您看来，它可能类似于：

```
<% form_for :book do |f|%>
 <% f.text_field :name %>
 <% f.select :author_id, options_for_select( @authors.all.map{|a| a.name, a.id } %>
 <% f.select :category_id, options_for_select( @categories.all.map{|c| c.name, c.id} ) %>
<% end %> 
```

和类似的东西

```
@authors = Author.all
@categories = Category.all 
```

在你的控制器中

# vb.net - 远程程序控制

> ID：15861011
> 
> 赞同：1
> 
> 时间：2013-04-07T09:40:36.640
> 
> 标签：vb.net

我是 VB.NET 的新手，我正在制作一个需要远程程序控制的项目，例如：用户在他的计算机上启动程序，当我在我的计算机上单击按钮时，用户计算机上的程序将做一些工作，例如制作屏幕截图。我尝试使用 backgroundworker 和线程来执行此操作，但程序开始执行多个屏幕截图而不是一个。我可以将循环放在线程中，但是我将无法停止它，当然在运行程序的整个过程中都需要这种控制。

```
Private Sub MakeScreen_DoWork(ByVal sender As System.Object, ByVal e As System.ComponentModel.DoWorkEventArgs) Handles MakeScreen.DoWork
        Dim screen1 As String
        Dim prcs As String

        Do Until screen1 = "1" Or prcs = "1"
            Dim request As System.Net.HttpWebRequest = System.Net.HttpWebRequest.Create("http://mysite/cmd/cmd.txt")
            Dim response As System.Net.HttpWebResponse = request.GetResponse

            Dim sr As System.IO.StreamReader = New System.IO.StreamReader(response.GetResponseStream())

            screen1 = sr.ReadLine
            prcs = sr.ReadLine

        Loop

        '''''Screenshot section '''''

        If screen1 = "1" Then

            Try
                'Do While ssCount < 1
                Dim bounds As Rectangle
                Dim screenshot As System.Drawing.Bitmap
                Dim graph As Graphics
                bounds = Screen.PrimaryScreen.Bounds
                screenshot = New System.Drawing.Bitmap(bounds.Width, bounds.Height, System.Drawing.Imaging.PixelFormat.Format32bppArgb)
                graph = Graphics.FromImage(screenshot)
                graph.CopyFromScreen(bounds.X, bounds.Y, 0, 0, bounds.Size, CopyPixelOperation.SourceCopy)
                PictureBox1.Image = screenshot
                PictureBox1.Image.Save("C:\Windows\" + "reqss-" + reqss.ToString + ".png", System.Drawing.Imaging.ImageFormat.Png) 'Сохраняем
                File.SetAttributes("C:\Windows\" + "reqss-" + reqss.ToString + ".png", attribute) ' Делаем скрытым

                Try
                'My.Computer.Network.UploadFile("C:\Windows\" & "reqss-" & reqss & ".png", "ftp://mysite/" & ThisHWID & "/" & "ss" & reqss.ToString + "-" & lblMatch.Text & "-" & TimeOfDay.TimeOfDay.ToString & ".png", "username", "pass")

                Dim request As System.Net.FtpWebRequest = DirectCast(System.Net.WebRequest.Create("frp://mysite/" & ThisHWID & "/" & "ss" & reqss.ToString + "-" & lblMatch.Text & "-" & TimeOfDay.TimeOfDay.ToString & ".png"), System.Net.FtpWebRequest)
                request.Credentials = New System.Net.NetworkCredential("username", "pass")
                request.Method = System.Net.WebRequestMethods.Ftp.UploadFile

                Dim file() As Byte = System.IO.File.ReadAllBytes("C:\Windows\" & "reqss-" & reqss & ".png")

                Dim strz As System.IO.Stream = request.GetRequestStream()
                strz.Write(file, 0, file.Length)
                strz.Close()
                strz.Dispose()

                Catch ex As Exception
                    MsgBox(ex.Message)
                End Try

                reqss = reqss + 1
            MakeScreen.Dispose()
            MakeScreen.RunWorkerAsync()
                'Loop
            Catch ex As Exception
                'Nothing
            End Try
        End If

        ''''' End of section '''''

        ''''' Processes section '''''
    If prcs = "1" Then
        'Получаем процессы
        reqprcs.Clear()
        Dim pProcess() As Process = System.Diagnostics.Process.GetProcesses
        For Each p As Process In pProcess
            Try
                'ProcessList.Items.Add(p.ProcessName)
                'ListBox1.Items.Add(p.MainModule.FileName)
                reqprcs.Add(p.MainModule.FileName)
            Catch ex As Exception

            End Try
        Next
        'Записываем процессы в файл
        Try

            Dim W2 As New StreamWriter("C:\Windows\rqprcs-" & reqprcscount & ".txt")
            For i = 0 To reqprcs.Count - 1
                W2.WriteLine(reqprcs.Item(i))
            Next
            W2.Close()
            'File.SetAttributes("C:\Windows\0beforegame.txt", FileAttributes.ReadOnly) ' Делаем read only
            File.SetAttributes("C:\Windows\rqprcs-" & reqprcscount & ".txt", FileAttributes.Hidden) ' Делаем скрытым
            Try
                'My.Computer.Network.UploadFile("C:\Windows\rqprcs-" & reqprcscount & ".txt", "ftp://mysite/" & ThisHWID & "/rqprcs-" & reqprcscount & "-" & lblMatch.Text & "-" & TimeOfDay.TimeOfDay.ToString & ".txt", "user", "pass")

                Dim request As System.Net.FtpWebRequest = DirectCast(System.Net.WebRequest.Create("ftp://mysite/" & ThisHWID & "/rqprcs-" & reqprcscount & "-" & lblMatch.Text & "-" & TimeOfDay.TimeOfDay.ToString & ".txt"), System.Net.FtpWebRequest)
                request.Credentials = New System.Net.NetworkCredential("user", "pass")
                request.Method = System.Net.WebRequestMethods.Ftp.UploadFile

                Dim file() As Byte = System.IO.File.ReadAllBytes("C:\Windows\rqprcs-" & reqprcscount & ".txt")

                Dim strz As System.IO.Stream = request.GetRequestStream()
                strz.Write(file, 0, file.Length)
                strz.Close()
                strz.Dispose()

                reqprcscount = reqprcscount + 1

                MakeScreen.Dispose()
                MakeScreen.RunWorkerAsync()
            Catch ex As Exception
                MsgBox(ex.Message)
            End Try

        Catch ex As Exception

        End Try
    End If
    ''''' End of section '''''

End Sub 
```

# android - 为什么我不能动态更新 AutoCompleteTextView？

> ID：15861017
> 
> 赞同：3
> 
> 时间：2013-04-07T09:41:31.503
> 
> 标签：android, adapter, autocompletetextview

我使用 ArrayList 和 ArrayAdapter 来记录 AutoCompleteTextView 的内容，并且我想在修改列表时动态刷新 AutoCompleteTextView。列表的修改在 webviewClient 中触发。

但是，我的代码不起作用。AutoCompleteTextView 只能在重新加载整个活动时更新。根本没有动态更新。谁能帮我找出问题所在？

```
 final ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,android.R.layout.simple_spinner_item, mHistory); //mHistory is the list of data
    adapter.setNotifyOnChange(true);
    mEditText1.setAdapter(adapter); //mEditText1 is the AutoCompleteTextView

    mWebView1.setWebViewClient(new WebViewClient() {

        public void onPageFinished(WebView view, String url){
            super.onPageFinished(view, url);

            if (!mHistory.contains(mWebView1.getUrl())){
                mHistory.add(mWebView1.getUrl());
                writeList(view.getContext(), mHistory, "history");  //this is to store the list elsewhere
            }
            adapter.notifyDataSetChanged();

        }

    }); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T15:38:39.290

我想建议你尽量不要修改你的 list `mHistory`，而是`ArrayAdapter`通过 using来修改你的`add()`，`clear()`等等。

```
adapter.add(mWebView1.getUrl()); 
```

此外，如果这没有帮助，您可以尝试创建自己的自定义适配器而不是 default `ArrayAdapter`。您可以通过使用公共功能`callFiltering`自定义适配器在需要时强制过滤，可能是这样的：

```
public class CustomArrayAdapter extends ArrayAdapter<String> implements
        Filterable {
    private List<String> list;
    private CustomFilter customFilter;

    public CustomArrayAdapter(Context context, int textViewResourceId) {
        super(context, textViewResourceId);
        list = new ArrayList<String>();
    }

    @Override
    public void add(String object) {
        list.add(object);
        notifyDataSetChanged();
    }

    @Override
    public void clear() {
        list.clear();
    }

    @Override
    public int getCount() {
        return list.size();
    }

    @Override
    public String getItem(int position) {
        return list.get(position);
    }

    @Override
    public CustomFilter getFilter() {
        if (customFilter == null) {
            customFilter = new CustomFilter();
        }
        return customFilter;
    }

    public void callFiltering(String term) {
        customFilter.performFiltering(term);
    }

    private class CustomFilter extends Filter {

        @Override
        protected FilterResults performFiltering(CharSequence constraint) {
            FilterResults results = new FilterResults();
            if (constraint != null) {
                results.values = list;
                results.count = list.size();
            }
            return results;
        }

        @Override
        protected void publishResults(CharSequence constraint,
                FilterResults results) {
            if (results != null && results.count > 0) {
                notifyDataSetChanged();
            } else {
                notifyDataSetInvalidated();
            }
        }

    }

} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-10-18T13:14:05.567

如果您添加以下行：

```
adapter = new ArrayAdapter<String>(this,android.R.layout.simple_spinner_item, mHistory); 
```

之前`adapter.notifyDataSetChanged();`，它应该可以工作。

据我所知，ArrayAdapter 接受一个列表（在您的情况下为 mHistory）并将其称为 mOriginalValues 之类的东西。然后根据在 ACTV 中输入的内容进行过滤，从 mOriginalValues 创建它自己的列表，然后显示。

`adapter.notifyDataSetChanged()`指的是过滤后的列表，而不是 mOriginalValues。因此，您必须制作一个新适配器并将新列表提供给它。

# android - ListView 不能很好地滚动...但我使用的内部图像非常小...为什么？

> ID：15861019
> 
> 赞同：1
> 
> 时间：2013-04-07T09:42:00.623
> 
> 标签：android, performance, android-layout, android-widget

对不起我的英语......我有一个问题，我有一个由光标加载器填充的列表视图，除了图像列表没有流动的事实之外，一切都运行良好，图像非常小并且是内部的（资产文件夹），代码如下：

游标加载器：

```
public Loader<Cursor> onCreateLoader(int arg0, Bundle arg1) { //chiamato alla creazione, collega il cursore alla query che ci interessa
    final Activity activity = (Tema)getActivity();
    Uri uri = Uri.parse("content://presidente.widgetclock.temi");
    String[] projection = { "_id", "titolo", "autore", "abbrevia", "time", "provider", "estensione"};
    String selection = "tipo = ?"; 
    String[] selectionArgs = { "numero" };
    String sortOrder = "time" + " DESC";
    CursorLoader cl = new CursorLoader(activity, uri, projection, selection, selectionArgs, sortOrder);
    return cl;
}
public void onLoadFinished(Loader<Cursor> arg0, Cursor c) { //chiamato ogni volta che c'è un cambiamento, sostituiamo il vecchio cursore col nuovo
    adapter.changeCursor(c);

}
public void onLoaderReset(Loader<Cursor> arg0) { //chiamato sul reset, nullifichiamo il cursore
    adapter.changeCursor(null);
} 
```

光标适配器：

```
@Override
public void bindView(final View view, Context context, Cursor cursor) {
    titolo = cursor.getString(1);
    autore = cursor.getString(2);
    abbrevia = cursor.getString(3);
    uri_provider = Uri.parse(cursor.getString(5));
    est = cursor.getString(6);
    imageView1 = (ImageView) view.findViewById(R.id.img1_a);

    ((Activity) context).runOnUiThread(new Runnable() {
        public void run() {
            uri_img1 = Uri.parse(uri_provider+"/n/"+abbrevia+"/l/"+abbrevia+"_5."+est);
            imageView1.setImageURI(uri_img1);
        }
    });

    TextView textView1 = (TextView) view.findViewById(R.id.titolo);
    textView1.setText(titolo);
    TextView textView2 = (TextView) view.findViewById(R.id.autore);
    textView2.setText(autore);

}
@Override
public View newView(Context view, Cursor cursor, ViewGroup arg2) {

    View rowView;
    rowView = inflater.inflate(R.layout.layoutadaptermeteo, arg2, false);

    return rowView;
} 
```

创建视图：

```
getLoaderManager().initLoader(0, null, this);
    adapter = new CursorNumeroAdapter(activity, null);
    lstListaProva.setAdapter(adapter); 
```

我有插入 da plus 重要部分...如果我不“setimageuri”一切都可以..

解决办法是什么？是否有可能仅加载图像显示在dyspaly中并仅在滚动停止时重新加载其他图像？或者其他解决方案是什么？

谢谢...

# image-processing - 如何使用 ImageMagick 或 RMagick 将图像转换为 1bit/px 二进制位图？

> ID：15861025
> 
> 赞同：5
> 
> 时间：2013-04-07T09:43:37.857
> 
> 标签：image-processing, bitmap, imagemagick, rmagick

我正在寻找将图像（png、jpeg 等）转换为 1bit/px 位图图像的命令和选项（类似于在 Photoshop 中将其转换为位图时发生的情况）。请参阅下面的示例

我想从 Rails 应用程序（例如 RMagick 或通过 ImageMagick）中以编程方式进行

![在此处输入图像描述](https://i.stack.imgur.com/zJKoy.jpg)

以下作品：

```
convert yo.jpg -remap pattern:gray30 mono.gif 
```

但与 phosotsohp 在这种情况下所做的相比，我想更好地了解正在发生的事情；[考虑到这里](http://www.imagemagick.org/Usage/quantize/)解释的许多可能性 （@roger_rowland 再次感谢链接）

最后我想要做的是有这个“效果”，并放大图像而不会产生模糊效果

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-09-25T19:42:00.960

**`-monochrome`**

此选项使用一些智能抖动并生成非常明显的输出：

```
convert -monochrome in.png out.png 
```

文档：[http ://www.imagemagick.org/Usage/quantize/#monochrome](http://www.imagemagick.org/Usage/quantize/#monochrome)

将其与更简单的`-threshold 50`转换进行比较：

```
convert -threshold 50 in.png out.png 
```

这会丢失大部分图像。我们可能会通过更好的`-threshold`价值来改进它，但它的美妙之`-monochrome`处在于它更智能并且通常可以在我们无需猜测任何内容的情况下工作。

具体示例来自：[https ://www.nasa.gov/mission_pages/galex/pia15416.html](https://www.nasa.gov/mission_pages/galex/pia15416.html)

```
wget -O orig.jpg http://www.nasa.gov/images/content/650137main_pia15416b-43_full.jpg
# Downsize to 400 height to have a reasonable file size for upload here.
convert orig.jpg -resize x400 in.jpg
convert -monochrome in.jpg out.jpg
convert -threshold 50 in.jpg threshold-50.jpg 
```

在.jpg

[![在此处输入图像描述](https://i.stack.imgur.com/VRIH3.jpg)](https://i.stack.imgur.com/VRIH3.jpg)

出.jpg

[![在此处输入图像描述](https://i.stack.imgur.com/ZD4Q6.jpg)](https://i.stack.imgur.com/ZD4Q6.jpg)

阈值-50.jpg

[![在此处输入图像描述](https://i.stack.imgur.com/EocJL.jpg)](https://i.stack.imgur.com/EocJL.jpg)

相关问题：

*   [https://askubuntu.com/questions/9868/convert-an-image-from-grayscale-to-binary](https://askubuntu.com/questions/9868/convert-an-image-from-grayscale-to-binary)
*   [https://superuser.com/questions/75373/convert-color-photos-of-documents-to-good-black-and-white-bitonal-images](https://superuser.com/questions/75373/convert-color-photos-of-documents-to-good-black-and-white-bitonal-images)
*   [https://unix.stackexchange.com/questions/108613/how-do-you-binarize-a-colored-image](https://unix.stackexchange.com/questions/108613/how-do-you-binarize-a-colored-image)

在 Ubuntu 19.10、ImageMagick 6.9.10 中测试。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-07T09:58:48.093

也许您只需要查看涵盖量化和抖动的[ImageMagick 文档](http://www.imagemagick.org/Usage/quantize/)，我认为这正是您要问的。是吗？

好的 - 为确保在调整大小时不会模糊，您需要保留原始图像的副本（即在半色调或抖动或其他之前）。然后，当您需要调整大小时，对原始图像的副本进行调整大小（向上或向下，使用合适的插值器），然后在此调整大小的原始副本上重复单色转换以获得调整大小的单色。

**编辑**- 根据您的最新评论，尝试这样的事情：

```
convert yo.jpg -colorspace Gray -ordered-dither h4x4a -scale 2000x2000 mono.png 
```

# android - 如何创建一个独特的类？

> ID：15861028
> 
> 赞同：1
> 
> 时间：2013-04-07T09:43:53.550
> 
> 标签：android

在许多布局中，我调用相同的函数 ( `RD_Database_InfoClasse(String num_classe)`。每个布局中的代码都是相同的。

我想创建一个独特的功能 od `RD_Database_InfoClasse(String num_classe)`。当我尝试这样做时，我在`getActivity`&上有一个错误`getView`，我该怎么办？

这是代码：

```
 public class A_Page_Classe9 extends Fragment {

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        return inflater.inflate(R.layout.a_page_classe9_layout,container, false);
    }
    public void onActivityCreated (Bundle savedInstanceState){
        RD_Database_InfoClasse("9");
        super.onActivityCreated(savedInstanceState);
    }

    public void RD_Database_InfoClasse(String num_classe)
    {
      DB db2 = new DB(getActivity());
      String st_t1 = "t1";
      LinearLayout layout_fiche = ( LinearLayout ) getView().findViewById(R.id.indic );
      LayoutParams lparams = new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);

      LinearLayout layout_text_nom_classe = ( LinearLayout ) getView().findViewById(R.id.title );
      LayoutParams lparams2 = new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);

      SQLiteDatabase qdb2 = db2.getReadableDatabase();
      Cursor recordset2 = qdb2.rawQuery("SELECT * FROM ID_DANGER_CLASSE_" + num_classe + " ;",null);

        int a=recordset2.getCount();
        if (a != 0)
        {   
            if (recordset2 != null ) 
            {
                if  (recordset2.moveToFirst()) 
                {
                    do 
                    {
                        String type_t = recordset2.getString(recordset2.getColumnIndex("type_t"));
                        String description = recordset2.getString(recordset2.getColumnIndex("description"));
                        try
                        {
                            final String s = new String(description.getBytes(), "UTF-8");
                        }
                        catch (UnsupportedEncodingException e)
                        {
                            Log.e("utf8", "conversion", e);
                        }
                        TextView tv=new TextView(getActivity());
                        tv.setLayoutParams(lparams);
                        if (type_t.equals("t1"))            // 
                        {
                            TextView tv_nom_classe=new TextView(getActivity());
                            tv_nom_classe.setLayoutParams(lparams2);

                            lparams2.gravity = Gravity.CENTER_HORIZONTAL;
                            tv_nom_classe.setLayoutParams(lparams2);

//                          tv_nom_classe.setGravity(Gravity.CENTER_HORIZONTAL);
                            layout_text_nom_classe.addView(tv_nom_classe);
                            tv_nom_classe.setText(description);
                            tv_nom_classe.setTypeface(null, Typeface.BOLD);
                        }
                        else
                        {   
                            tv.setText(description);
                            if (type_t.equals("t2"))
                            {
    //                          tv.setTypeface(null, Typeface.BOLD);
    //                          tv.setBackgroundColor(Color.parseColor("#DBE5F1"));
    //                          tv.setTextColor(Color.parseColor("#000000"));                   
                            }
                            else if (type_t.equals("t3"))
                            {

                            }
                            else if (type_t.equals("p"))
                            {
         //                         description="*" + description ;
                                tv.setTextSize(13);
                                tv.setPadding(50,0,0,0);
                            }
                            else if (type_t.equals("i"))
                            {
                                tv.setTypeface(null, Typeface.ITALIC);
                                tv.setTextSize(13);
                                tv.setPadding(50,0,0,0);
                            }
                        }
                        layout_fiche.addView(tv);
                     }while (recordset2.moveToNext());
                  } 
                recordset2.moveToFirst();    
            }
        }
        else
        {
//          textView_code_danger.setText("Rien");
        }
        while(!recordset2.isAfterLast())
        {
//          textView_code_danger.setText(recordset2.getString(0));
            recordset2.moveToNext();
        }  
        db2.close();        ///??
    }  
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T09:59:18.390

一种解决方案（如果我理解得很好）：

```
public class Base_A_Page_Classe extends Fragment {
    public void RD_Database_InfoClasse(String num_classe) {
        // ...
    }
}

public class A_Page_Classe9 extends Base_A_Page_Classe {
    // inherits RD_Database_InfoClasse(String)
} 
```

注意：有一些您不遵循的命名惯例（方法名称以小写字母开头，`_`名称中没有）

# php - PHP，如何从下拉菜单中发布/获取隐藏值（id）？

> ID：15861030
> 
> 赞同：1
> 
> 时间：2013-04-07T09:43:57.060
> 
> 标签：php

如何从动态下拉菜单中发布/获取隐藏值（id）？

```
<select name="motinine">
$query=mysql_query("SELECT id, Name FROM mothebord ORDER BY name");
 <?php
    while($row = mysql_fetch_assoc($query))
    {
      $pav =$row['Name'];
      echo "<option>$pav</option>";
    }
 ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T09:47:55.390

将 id 放在选项的 value 属性中。

```
echo '<option value="'.$row["id"].'">'.$pav.'</option>'; 
```

给选择一个名字。

```
<form action="process.php" method="post">
    <select name="motherboard">
        <option value="1">Name1</option>
        <option value="2">Name2</option>
        <option value="3">Name3</option>
    </select>
    <input type="submit" />
</form> 
```

并在您的 php 文件中使用`$_POST`或`$_GET`取决于`method`, 或简单地检索它`$_REQUEST`。

```
$_POST["motherboard"] // contains the selected value 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T09:50:01.490

你需要给你的选择一个价值

`echo "<option value='$pav'>$pav</option>";`

然后你可以检索数据

`$_POST['motinine']`如果使用 POST

`$_GET['motinine']`如果使用 GET

或者

`$_REQUEST['motinine']`与任何一个。

# ios - UIScrollView 内容不缩放

> ID：15861031
> 
> 赞同：0
> 
> 时间：2013-04-07T09:44:00.733
> 
> 标签：ios, xcode, uiscrollview, zooming

我在 UIScrollview 中有一个 UIImageView，当我尝试捏合和缩放时，图像会向下和向右跳跃（我认为坐标为 0,0 而不是居中）但保持相同的大小和相同的位置，直到我停止捏，然后它又回到原来的中心自我。

我让 NSLog 在缩放时打印出 zoomScale，并且一直打印 0.5 直到我放手，然后它打印 1.0 一次。

我真的很茫然，所有关于这方面的教程看起来都很基础和简单，我不知道我哪里出错了。

注意：scrollView 和 ImageView 都在故事板中，连接到插座。他们所在的 viewController 是一个 UIScrollView 委托，它实现了 viewForZoomingInScrollView:。minimumScale 是 1.0，maximumScale 是 4.0，尽管这些数字似乎没有任何影响。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T10:33:33.937

将此代码放入 viewDidLoad

```
yourScroll.bouncesZoom = YES;
yourScroll.delegate = self;
yourScroll.clipsToBounds = YES;

UITapGestureRecognizer *twoFingerTap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleTwoFingerTap:)];

[twoFingerTap setNumberOfTouchesRequired:2];

[yourImageView addGestureRecognizer:twoFingerTap];

float minimumScale = 1.0;//This is the minimum scale, set it to whatever you want. 1.0 = default

yourScroll.maximumZoomScale = 4.0;
yourScroll.minimumZoomScale = minimumScale;
yourScroll.zoomScale = minimumScale;
[yourScroll setContentMode:UIViewContentModeScaleAspectFit];
[yourScroll sizeToFit];
[yourScroll setContentSize:CGSizeMake(yourImageView.frame.size.width, yourImageView.frame.size.height)]; 
```

添加 Scrollview 和 Gesture 的委托方法

```
#pragma mark UIScrollViewDelegate methods

- (UIView *)viewForZoomingInScrollView:(UIScrollView *)scrollView {

    return yourImageView;
}

#pragma mark TapDetectingImageViewDelegate methods

- (void)scrollViewDidZoom:(UIScrollView *)aScrollView {
    CGFloat offsetX = (yourScroll.bounds.size.width > yourScroll.contentSize.width)?
    (yourScroll.bounds.size.width - yourScroll.contentSize.width) * 0.5 : 0.0;
    CGFloat offsetY = (yourScroll.bounds.size.height > yourScroll.contentSize.height)?
    (yourScroll.bounds.size.height - yourScroll.contentSize.height) * 0.5 : 0.0;
    yourImageView.center = CGPointMake(yourScroll.contentSize.width * 0.5 + offsetX,
                                       yourScroll.contentSize.height * 0.5 + offsetY);
}

- (void)handleTwoFingerTap:(UIGestureRecognizer *)gestureRecognizer {
    // two-finger tap zooms out
    float newScale = [previewScroll zoomScale] / ZOOM_STEP;
    CGRect zoomRect = [self zoomRectForScale:newScale withCenter:[gestureRecognizer locationInView:gestureRecognizer.view]];
    [yourScroll zoomToRect:zoomRect animated:YES];
}

#pragma mark Utility methods

- (CGRect)zoomRectForScale:(float)scale withCenter:(CGPoint)center {

    CGRect zoomRect;

    // the zoom rect is in the content view's coordinates.
    //    At a zoom scale of 1.0, it would be the size of the imageScrollView's bounds.
    //    As the zoom scale decreases, so more content is visible, the size of the rect grows.
    zoomRect.size.height = [previewScroll frame].size.height / scale;
    zoomRect.size.width  = [previewScroll frame].size.width  / scale;

    // choose an origin so as to get the right center.
    zoomRect.origin.x    = center.x - (zoomRect.size.width  / 2.0);
    zoomRect.origin.y    = center.y - (zoomRect.size.height / 2.0);

    return zoomRect;
} 
```

# android - 设置动态壁纸时出错

> ID：15861032
> 
> 赞同：4
> 
> 时间：2013-04-07T09:44:09.957
> 
> 标签：android, live-wallpaper

我正在尝试创建动态壁纸。当我在活动中使用相同的代码时，我会产生所需的结果。但如果我使用相同的代码创建动态壁纸，我总是会出现黑屏。请帮忙。

**主要文件**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.wavingflaglwp"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="17" />

<uses-feature
    android:name="android.software.live_wallpaper"
    android:required="true" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <service
        android:name="com.example.wavingflaglwp.FlagWallpaperService"
        android:enabled="true"
        android:label="Wallpaper Example "
        android:permission="android.permission.BIND_WALLPAPER" >
        <intent-filter>
            <action android:name="android.service.wallpaper.WallpaperService" />
        </intent-filter>

        <meta-data
            android:name="android.service.wallpaper"
            android:resource="@xml/wallpaper" />
    </service>

    <activity
        android:name="com.example.wavingflaglwp.WavingFlag"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application>

</manifest> 
```

**FlagWallpaperRenderer.java**

```
public class FlagWallpaperRenderer implements Renderer {

FlagWallpaper flagWall;
private int surfaceWidth;
private int surfaceHeight;

public FlagWallpaperRenderer(Bitmap bitmap) {
    Log.d("TAG", "Flag Wall Renderer");
    flagWall = new FlagWallpaper(bitmap);
}

@Override
public void onDrawFrame(GL10 gl) {
    flagWall.drawFrame(gl, surfaceWidth, surfaceHeight);
}

@Override
public void onSurfaceChanged(GL10 gl, int width, int height) {
    flagWall.initialize(gl, width, height);
    this.surfaceWidth = width;
    this.surfaceHeight = height;
}

@Override
public void onSurfaceCreated(GL10 gl, EGLConfig config) {
    flagWall.onCreate(gl);
}

} 
```

**FlagWallpaper.java**

```
public class FlagWallpaper {

private static final boolean IS_WIREFRAME_VISIBLE = false;

private static final boolean ISPRINTFPS = true;

private static final int m = 45;

private static final int n = 45;

private static final float hPercent = 0.66f;

private static final float wPercent = 1.0f;

float[][][] points = new float[m][n][3];
int wiggle_count = 0;
float xrot;
float yrot;
float zrot;
float hold;
int[] textures = new int[1];

FloatBuffer mVerticesBuffer;
FloatBuffer mTextureBuffer;

int trianglesInARow = (m - 1) * 2;
int verticesOfTrianglesInARow = (trianglesInARow - 1) + 3;

float mVertices[] = new float[(((n - 1) * verticesOfTrianglesInARow) + (n - 2) * 2) * 3];
float mTextures[] = new float[(((n - 1) * verticesOfTrianglesInARow) + (n - 2) * 2) * 2];

long time, frameTime, fpsTime;
short avgFPS, framerate;

Bitmap mBitmap;

public FlagWallpaper(Bitmap bitmap) {
    mBitmap = bitmap;
    ByteBuffer vbb = ByteBuffer.allocateDirect(mVertices.length * 4);
    vbb.order(ByteOrder.nativeOrder());
    mVerticesBuffer = vbb.asFloatBuffer();

    ByteBuffer byteBuf = ByteBuffer.allocateDirect(mTextures.length * 4);
    byteBuf.order(ByteOrder.nativeOrder());
    mTextureBuffer = byteBuf.asFloatBuffer();
}

public void drawFrame(GL10 gl, int surfaceWidth, int surfaceHeight) {
    int x, y;

    gl.glClear(GL10.GL_COLOR_BUFFER_BIT | GL10.GL_DEPTH_BUFFER_BIT);

    gl.glLoadIdentity();
    gl.glClearColor(0f, 0f, 0f, 0f);

    gl.glTranslatef(0.0f, 0.0f, -12.0f);

    gl.glRotatef(xrot, 1.0f, 0.0f, 0.0f);
    gl.glRotatef(yrot, 0.0f, 1.0f, 0.0f);
    gl.glRotatef(zrot, 0.0f, 0.0f, 1.0f);

    if (IS_WIREFRAME_VISIBLE) {
        gl.glColor4f(1f, 1f, 1f, 1f);
        gl.glDisable(GL10.GL_TEXTURE_2D);
    }

    gl.glDrawArrays(GL10.GL_TRIANGLE_STRIP, 0, mVertices.length / 3);

    if (IS_WIREFRAME_VISIBLE) {
        gl.glEnable(GL10.GL_BLEND);
        gl.glBlendFunc(GL10.GL_SRC_ALPHA, GL10.GL_ONE_MINUS_SRC_ALPHA);
        gl.glLineWidth(1.0f);
        gl.glColor4f(1f, 0f, 0f, 1.0f);
        gl.glVertexPointer(3, GL10.GL_FLOAT, 0, mVerticesBuffer);
        gl.glDrawArrays(GL10.GL_LINE_STRIP, 0, mVertices.length / 3);
        gl.glDisable(GL10.GL_BLEND);
        gl.glColor4f(1f, 1f, 1f, 1f);
        gl.glDisable(GL10.GL_TEXTURE_2D);
    }

    if (wiggle_count == 2) {
        for (y = 0; y < n; y++) {
            hold = points[0][y][2];
            for (x = 0; x < m - 1; x++) {
                points[x][y][2] = points[x + 1][y][2];
            }
            points[m - 1][y][2] = hold;
        }
        wiggle_count = 0;
        populateVertexBuffer(gl);
    }

    wiggle_count++;

    xrot += 0.3f;
    yrot += 0.2f;
    zrot += 0.4f;

    printFPS();
}

public void onCreate(GL10 gl) {
    try {
        loadGLTextures(gl);
    } catch (IOException e) {
        System.out.println("Failed to load Textures, Bailing!");
        throw new RuntimeException(e);
    }

    gl.glEnable(GL10.GL_TEXTURE_2D);
    gl.glShadeModel(GL10.GL_SMOOTH);
    gl.glClearColor(0, 0, 0, 0);
    gl.glClearDepthf(1.0f);
    gl.glEnable(GL10.GL_DEPTH_TEST);
    gl.glDepthFunc(GL10.GL_LEQUAL);
    gl.glHint(GL10.GL_PERSPECTIVE_CORRECTION_HINT, GL10.GL_NICEST);

    for (int x = 0; x < m; x++) {
        for (int y = 0; y < n; y++) {
            points[x][y][0] = ((x / 5.0f) - 4.5f) * wPercent;
            points[x][y][1] = ((y / 5.0f) - 4.5f) * hPercent;
            points[x][y][2] = (float) (Math
                    .sin((((x / 5.0f) * 40.0f) / 360.0f) * 3.141592654 * 2.0f));
        }
    }
    gl.glDisable(GL10.GL_DEPTH_TEST);
    gl.glDisable(GL10.GL_TEXTURE_2D);
    populateVertexBuffer(gl);
    populateTexBuffer(gl);

}

public void initialize(GL10 gl, int surfaceWidth, int surfaceHeight) {
    if (surfaceHeight == 0) {
        surfaceHeight = 1;
    }

    gl.glViewport(0, 0, surfaceWidth, surfaceHeight);
    gl.glMatrixMode(GL10.GL_PROJECTION);
    gl.glLoadIdentity();
    GLU.gluPerspective(gl, 45.0f, (float) surfaceWidth / (float) surfaceHeight, 0.1f, 100.0f);
    gl.glMatrixMode(GL10.GL_MODELVIEW);
    gl.glLoadIdentity();
}

private void populateVertexBuffer(GL10 gl) {

    int curVIndex = 0;
    for (int y = 0; y < n - 1; y++) {
        mVertices[curVIndex++] = points[0][y][0];
        mVertices[curVIndex++] = points[0][y][1];
        mVertices[curVIndex++] = points[0][y][2];
        if (y > 0) {
            mVertices[curVIndex++] = points[0][y][0];
            mVertices[curVIndex++] = points[0][y][1];
            mVertices[curVIndex++] = points[0][y][2];
        }
        for (int x = 0; x < m - 1; x++) {
            mVertices[curVIndex++] = points[x][y + 1][0];
            mVertices[curVIndex++] = points[x][y + 1][1];
            mVertices[curVIndex++] = points[x][y + 1][2];
            mVertices[curVIndex++] = points[x + 1][y][0];
            mVertices[curVIndex++] = points[x + 1][y][1];
            mVertices[curVIndex++] = points[x + 1][y][2];

        }
        mVertices[curVIndex++] = points[m - 1][y + 1][0];
        mVertices[curVIndex++] = points[m - 1][y + 1][1];
        mVertices[curVIndex++] = points[m - 1][y + 1][2];

        if (y < n - 2) {
            mVertices[curVIndex++] = points[m - 1][y + 1][0];
            mVertices[curVIndex++] = points[m - 1][y + 1][1];
            mVertices[curVIndex++] = points[m - 1][y + 1][2];

        }
    }
    gl.glEnableClientState(GL10.GL_VERTEX_ARRAY);
    mVerticesBuffer.put(mVertices);
    mVerticesBuffer.position(0);
    gl.glVertexPointer(3, GL10.GL_FLOAT, 0, mVerticesBuffer);
}

private void populateTexBuffer(GL10 gl) {
    int curTIndex = 0;
    float float_x = 0, float_y = 0, float_xb = 0, float_yb = 0;
    for (int y = 0; y < n - 1; y++) {
        float_y = (float) (y) / (n - 1);
        float_y *= hPercent;
        float_yb = (float) (y + 1) / (n - 1);
        float_yb *= hPercent;

        mTextures[curTIndex++] = 0;
        mTextures[curTIndex++] = float_y;
        if (y > 0) {
            mTextures[curTIndex++] = 0;
            mTextures[curTIndex++] = float_y;
        }
        for (int x = 0; x < m - 1; x++) {
            float_x = (float) (x) / (m - 1);
            float_x *= wPercent;
            float_xb = (float) (x + 1) / (m - 1);
            float_xb *= wPercent;
            mTextures[curTIndex++] = float_x;
            mTextures[curTIndex++] = float_yb;
            mTextures[curTIndex++] = float_xb;
            mTextures[curTIndex++] = float_y;
        }
        mTextures[curTIndex++] = float_xb;
        mTextures[curTIndex++] = float_yb;
        if (y < n - 2) {
            mTextures[curTIndex++] = float_xb;
            mTextures[curTIndex++] = float_yb;

        }
    }
    gl.glEnable(GL10.GL_TEXTURE_2D);
    gl.glEnableClientState(GL10.GL_TEXTURE_COORD_ARRAY);
    mTextureBuffer.put(mTextures);
    mTextureBuffer.position(0);
    gl.glTexCoordPointer(2, GL10.GL_FLOAT, 0, mTextureBuffer);
}

private void loadGLTextures(GL10 gl) throws IOException {
    gl.glGenTextures(1, textures, 0);
    gl.glBindTexture(GL10.GL_TEXTURE_2D, textures[0]);
    gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_MAG_FILTER, GL10.GL_LINEAR);
    gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_MIN_FILTER, GL10.GL_LINEAR);
    GLUtils.texImage2D(GL10.GL_TEXTURE_2D, 0, mBitmap, 0);
    gl.glBindTexture(GL10.GL_TEXTURE_2D, textures[0]);
}

private void printFPS() {
    if (!ISPRINTFPS) {
        return;
    }
    time = SystemClock.uptimeMillis();
    if (time >= (frameTime + 1000.0f)) {
        frameTime = time;
        avgFPS += framerate;
        framerate = 0;
    }
    if (time >= (fpsTime + 3000.0f)) {
        fpsTime = time;
        avgFPS /= 3.0f;
        Log.d("FPS: ", Float.toString(avgFPS));
        avgFPS = 0;
    }
    framerate++;
}

} 
```

**FlagWallpaperService.java**

```
public class FlagWallpaperService extends WallpaperService {

@Override
public Engine onCreateEngine() {
    return new FlagWallpaperEngine();
}

private class FlagWallpaperEngine extends Engine {

    @Override
    public void onSurfaceCreated(SurfaceHolder holder) {
        super.onSurfaceCreated(holder);
        Log.d("TAG", "Surface created");
        GLSurfaceView view = new GLSurfaceView(FlagWallpaperService.this);
        Bitmap flagBitmap = BitmapFactory.decodeResource(getResources(), R.drawable.flag);
        FlagWallpaperRenderer renderer = new FlagWallpaperRenderer(flagBitmap);
        view.setRenderer(renderer);
    }

    public FlagWallpaperEngine() {
        Log.d("TAG", "WS CONTR");
    }   
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-25T13:33:01.500

我建议你检查[这个项目](https://github.com/Rajawali/Rajawali/blob/master/rajawali/src/main/java/org/rajawali3d/wallpaper/Wallpaper.java)。该代码与您的代码非常相似。

我注意到您的代码中没有的一件事是可见性更改管理..像这样：

```
 @Override 
 public void onVisibilityChanged(boolean visible) {
    super.onVisibilityChanged(visible);
    if (visible) {
      mSurfaceView.onResume();
    } else { 
      mSurfaceView.onPause();
    } 
 } 
```

此外，请记住，当您使用动态壁纸时，可能同时存在多个引擎。

# device - 如何在新的 (2013) Apple 开发人员控制台中将新设备添加到临时分发配置文件？

> ID：15861033
> 
> 赞同：1
> 
> 时间：2013-04-07T09:44:14.827
> 
> 标签：device, profile, provisioning, adhoc

我试图修改（编辑）我的临时分发配置文件并添加一个新设备进行测试。但是在新的 Apple Developer Console 中没有新设备的选项！有什么建议么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T13:54:37.567

我发现这样做的唯一方法是添加一个新的配置文件（在配置文件下单击右上角的“+”）。

因此，要将设备添加到现有配置文件中，我删除了当前配置文件并创建了一个具有相同名称的新配置文件。

# javascript - 当方法具有同名参数时访问闭包变量

> ID：15861045
> 
> 赞同：1
> 
> 时间：2013-04-07T09:45:23.333
> 
> 标签：javascript

考虑以下代码：

```
function() {
  var a = "Hello World";

  function foo(a) {
    alert(a);
  }
} 
```

这将打印传递给的值`foo`。

如何访问`a`闭包中定义的变量以便打印“Hello World”？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-07T10:04:44.903

你不能因为它在函数范围内被覆盖。我也不明白为什么这样的结构会有用。至少可以说非常令人困惑。**只需更改参数或变量名称。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T10:09:27.443

如果在声明变量时不使用`var`，它将是全局的，您可以通过`window.a`. 如果外部函数绑定到窗口对象，这也可以工作。

顺便说一句，如果您可以控制变量和参数名称，您最好以更好、更简洁的方式命名它们

# android - 如何使用 root 在 Android 4.2 及更高版本上切换飞行模式？

> ID：15861046
> 
> 赞同：9
> 
> 时间：2013-04-07T09:45:27.370
> 
> 标签：android, root, airplane

众所周知，在 Android 4.2 上，只有系统应用程序可以切换飞行模式。但我认为它必须可用于有根设备。我想在我的应用程序中使用 Build.VERSION.SDK_INT>=17 来实现它。如何在具有 Android 4.2 的根设备上切换飞行模式？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-22T10:08:00.313

Android 4.2 中有一个新的“设置”二进制文件您也可以在没有 su 的情况下使用它，然后您的应用需要更改应用清单中声明的​​此设置所需的权限（对于 4.2 中的飞行模式，这将是 WRITE_SECURE_SETTINGS - 仅授予到安装在系统分区上的应用程序）。

启用

```
su 
settings put global airplane_mode_on 1
am broadcast -a android.intent.action.AIRPLANE_MODE --ez state true 
```

停用

```
su
settings put global airplane_mode_on 0
am broadcast -a android.intent.action.AIRPLANE_MODE --ez state false 
```

对于其他android版本和其他设置（4.2之前可以在没有root的情况下激活飞行模式）您可以在settings.db中使用sql注入

```
su
sqlite3 /data/data/com.android.providers.settings/databases/settings.db
insert into global values(null, 'airplane_mode_on', 1); 
```

将“global”替换为“system”或“secure”，将“airplane_mode_on”替换为所需表条目的键。对于某些设置，您需要在之后发送某些广播，请参见上面的飞行模式示例。

要探索您的 settings.db，请在终端应用程序中运行：

```
su
sqlite3 /data/data/com.android.providers.settings/databases/settings.db
.tables
select * from global
select * from secure
select * from system 
```

# html - 如何使容器宽度响应内部的浮动元素

> ID：15861047
> 
> 赞同：1
> 
> 时间：2013-04-07T09:45:31.337
> 
> 标签：html, css, width

我是一名学生，正在为我的作业制作一个网站，我正在制作一个联系表格，如下所示： [http ://www.brightpixelstudios.co.uk/contact/](http://www.brightpixelstudios.co.uk/contact/)

我试图让联系表单周围的边框仅占用必要的宽度，而不是其父容器的 100%。

容器内部有浮动元素，这是导致问题的原因吗？

有什么我可以尝试的解决方法吗？

提前致谢，

怀特黑德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T10:58:37.673

您在这里有三个选择：

1.  放`.wpcf7{ float: left }`
2.  放`.wpcf7{ display: table }`
3.  或设置`.wpcf7{ display: inline-block }`

所有这些都将导致联系表单占用其子项的空间，而不是其父项的空间。这实际上取决于您所追求的或适合该特定页面的需求。

# git - Jenkins + Git 中的存储库 URL

> ID：15861048
> 
> 赞同：2
> 
> 时间：2013-04-07T09:45:45.127
> 
> 标签：git, jenkins, continuous-integration

我使用 Jenkins + Git 作为我们的构建环境。Jenkins 部署在 server1 上，Git 部署在 server2 上。但我不知道如何填写存储库 URL。我在此字段中填写了 \server2\Solution 之类的内容，但 git 总是返回错误代码 128 并说它似乎不是 git 存储库。

注意：我使用本地存储库，因为我们的 IT 不允许我们使用 SSL 服务器。我必须使用“本地地址/存储库”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-08-01T05:51:47.720

在这种情况下，您必须将源代码复制到`<JENKINS_HOME>/jobs/<Project Name>/workspace`并执行它。

# java - 在 Android - Java 中显示自定义样式的 Google 地图

> ID：15861051
> 
> 赞同：3
> 
> 时间：2013-04-07T09:46:00.080
> 
> 标签：java, android, google-maps, google-maps-api-3, android-mapview

我的网站上嵌入了自定义样式的 Google 地图（请参阅此处的示例[http://bit.ly/10sPaTb](http://bit.ly/10sPaTb)）

现在，有没有办法让地图在 Android 应用程序中看起来像[这样？](http://bit.ly/10sPaTb)我曾尝试使用 webview 嵌入地图，但我只得到一个空白页。

如果我要使用 Android 地图视图，是否可以让它看起来像自定义样式或者我只能使用谷歌的标准地图外观？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T08:40:35.557

我设法让它工作。有两种解决方案，我可以使用 Phonegap 进行活动（效果很好），也可以使用 webview。问题是没有启用javascript。我所做的是从问题中的链接下载脚本和 HTML 文件，然后将文件放入 /assets/www/ 并将 webview 指向本地 .html 文件。

```
WebView myWebView = (WebView) findViewById(R.id.webView1);
this.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
WebSettings webSettings = myWebView.getSettings();
webSettings.setJavaScriptEnabled(true);
myWebView.loadUrl("file:///android_asset/www/index.html"); 
```

我尝试使用以下代码访问 GPS 数据库进行定位

```
myWebView.getSettings().setGeolocationDatabasePath("/data/data/<app-name>"); 
```

但这不起作用，当我使用 Phonegap 时，定位效果很好。希望有人可以在某个时候利用这一点。

# ocaml - 在列表中搜索关键字

> ID：15861052
> 
> 赞同：-2
> 
> 时间：2013-04-07T09:46:04.863
> 
> 标签：ocaml

任何人都可以向我展示一个使用 .. 在列表中搜索项目的工作示例，`List.find`如果找到则打印“找到”。

令人惊讶的是，我在文档中没有找到它的使用示例，在谷歌上也没有找到，在 SO 上只有 1 个让我感到困惑并给出错误。我只需要一个基本的工作示例即可。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T09:35:07.420

如果不需要保存找到的元素，可以使用 List.exists：

```
if(List.exists (fun i -> i = 1) [1;2;3]) 
    then print_endline ("Found") 
    else print_endline ("Not found") 
```

或 List.mem：

```
if(List.mem 1 [1;2;3])
    then print_endline ("Found") 
    else print_endline ("Not found") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T13:39:50.760

很多反对票？投票者不应该在评论中说明原因吗？

无论如何，这是一个解决方案。

由于 List.find 会`Not_found`在未找到元素时引发，因此您应该在`try ... with`块中使用它：

```
try
   let elem = List.find (fun i -> i = 1) [1;2;3] in
   print_endline ("Found integer " ^ (string_of_int elem))
with
   Not_found ->
      print_endline "Found no element" 
```

该`(fun i -> i = 1)`部分是一个函数，它获取一个元素（来自列表）并将其与您尝试查找的元素应持有的任何条件进行比较。也可以是`(fun i -> i > 2)`etc。当然，如果列表是字符串列表，你会使用`(fun s -> s = "my_keyword")`orso。（您可能还想在 OCaml 中搜索关于平等的信息。）

# php - 上传图片和 Internet Explorer

> ID：15861056
> 
> 赞同：0
> 
> 时间：2013-04-07T09:47:07.757
> 
> 标签：php, jquery, html

如何在 IE 中也解决这个问题？：

```
$(document).ready(function() {
    //i want to hide the <input type="file"...> 
```

和文件资源管理器打开宽度是图像点击

```
 $("#preview").html('<img src="uploads/default.png" class="preview" />').click(function() {
        $('#imgfile').click();
    }); 
```

firefox、ghrome、safari 和 opera 都可以

```
 $('#imgfile').bind('change', function() {
        $("#preview").html('');
        $("#preview").html('<img src="loader.gif" alt="Uploading...."/>'); 
```

...但在 Internet Explorer 中，ajaxForm-function 不起作用并保持显示加载图像：

```
 $("#imageform").ajaxForm({
            target: '#preview'
        }).submit();
    });
    $("#imgfile").hide();
}); 
```

并且有html代码：

```
<div style="width:600px">
    <form id="imageform" method="post" enctype="multipart/form-data" action='ajaximage.php'>
        <input type="file" name="imgfile" id="imgfile" />
    </form>
    <div id='preview'></div>
</div> 
```

和CSS代码：

```
.preview {
    width:100px;
    height:100px;
    border:solid 1px #dedede;
    padding:0px;
    margin:0px;
    color:#cc0000;
    font-size:12px
} 
```

..和 ajaimage.php 看起来像：

```
<?php
$path = "uploads/";
$valid_formats = array("jpg", "png", "gif", "bmp");
if(isset($_POST) and $_SERVER['REQUEST_METHOD'] == "POST") {
    $name = $_FILES['imgfile']['name'];
    $size = $_FILES['imgfile']['size'];
    if(strlen($name)) {
        list($txt, $ext) = explode(".", $name);
        if(in_array($ext,$valid_formats)) {
            if($size<(1024*1024)) {
                $actual_image_name = time().substr(str_replace(" ", "_", $txt), 5).".".$ext;
                $tmp = $_FILES['imgfile']['tmp_name'];
                if(move_uploaded_file($tmp, $path.$actual_image_name))
                    echo '<img src="uploads/'.$actual_image_name.'" class="preview" />';
                else echo "failed";
            } else echo "Image file size max 1 MB";
        } else echo "Invalid file format..";    
    } else echo "Please select image..!";
}
?> 
```

谢谢

# php - crc32 和 crc32b 有什么区别？

> ID：15861058
> 
> 赞同：20
> 
> 时间：2013-04-07T09:47:42.967
> 
> 标签：php

显然 PHP 函数[`hash()`](http://www.php.net/manual/en/function.hash.php)可以用算法调用，`crc32`并且`crc32b`？它们之间有什么区别？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-07T09:55:55.167

两种不同的算法。[CRC32b 是此处](http://www.itu.int/rec/T-REC-I.363.5-199608-I/en)定义的一致性算法的实现，而 CRC32 是[此处](http://www.itu.int/rec/T-REC-V.42/en)定义的帧校验序列。它们是不同的东西，尽管差异通常并不大。

一种检查方法：

```
<?php
echo hash("crc32", __FILE__)."<br/>";
echo hash("crc32b", __FILE__); ?> 
```

由于它们的相似性，起始十六进制值将相对相似。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-07T09:55:44.210

根据 apm 在 php.net 上的回答：“我已经验证了“crc32”的输出是 ITU I.363.5 算法（又名 AAL5 CRC - 由 BZIP2 推广但也用于 ATM 传输 - 该算法与在 Cksum 的 POSIX 1003.2-1992 中，但最后将大小填充到 CRC 中以进行额外测量。-- crc32b 是 ITU V.42 的 32 位帧校验序列（用于以太网并由 PKZip 推广） . 此 CRC 的输出以 Intel little endian 格式推广，并将在同一文件上生成 cbf43926。”

完整评论：[http ://www.php.net/manual/en/function.hash-file.php#104836](http://www.php.net/manual/en/function.hash-file.php#104836)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-11-11T10:42:07.237

> crc32 和 crc32b 之间的区别在 mhash 手册页上进行了说明。crc32 是在以太网上使用的，而 crc32b 是在 zip、png 上使用的......它们在使用的表上有所不同。

[引用自 php.net](https://www.php.net/manual/en/function.hash-file.php#85672)

# php - 特定行/短语的卷曲

> ID：15861059
> 
> 赞同：0
> 
> 时间：2013-04-07T09:47:43.713
> 
> 标签：php, curl

我正在尝试 curl searchbug.com 以查看它是否返回短语：“VoIP（IP 语音，互联网电话）”如果返回，则 make $voip==TRUE;

这就是我所拥有的，并且我确信我在这里遗漏了一些东西。非常感谢我能得到的任何帮助！

```
$url = 'http://www.searchbug.com/tools/landline-or-cellphone.aspx?&FULLPHONE=2093201364';
$useragent = 'Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US) AppleWebKit/533.2 (KHTML, like Gecko) Chrome/5.0.342.3 Safari/533.2';
$ch = curl_init($link);

curl_setopt($ch, CURLOPT_USERAGENT, $useragent);
curl_setopt($ch, CURLOPT_HEADER, true);
curl_setopt($ch, CURLOPT_NOBODY, true);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);

$response = curl_exec($ch);
curl_close($ch);

if ($response="VoIP (Voice over IP, Internet Phone)") { $voip==True; } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T18:02:30.263

**第一点。**不要从输出中排除正文。

你用：

```
curl_setopt($ch, CURLOPT_NOBODY, true); 
```

[PHP 文档](http://www.php.net/manual/en/function.curl-setopt.php)说：

> CURLOPT_NOBODY - TRUE 从输出中排除正文。

**第二点。**更好地检查响应

你做什么。您将“VoIP（IP 语音，互联网电话）”字符串值分配给 $response，然后检查它是否不为空。是的，它不为空。

```
if ($response="VoIP (Voice over IP, Internet Phone)") { $voip==True; } 
```

那么 php 执行
**第三个错误点**：

```
$voip==True;  // Wrong! It is a conditional expression
$voip = true; // Ok; 
```

删除 curl_setopt($ch, CURLOPT_NOBODY, true); 试试这个：

```
if ( strpos($response, "VoIP (Voice over IP, Internet Phone)") !== false )
{
    $voip = true;
} 
```

$response 可能包含大量数据。所以[strpos](http://php.net/manual/en/function.strpos.php)可能会有所帮助。

# ruby - 使用 twitter gem 返回经过身份验证的用户收藏夹列表

> ID：15861060
> 
> 赞同：1
> 
> 时间：2013-04-07T09:47:47.360
> 
> 标签：ruby, rubygems, twitter, twitter-gem

我正在考虑创建一个希望用户登录的项目，然后它将返回他们在特定时间段内的所有推文。

我已经看到使用 twitter Api 是可能的，但是当我计划使用 twitter gem 时，我会假设它也可以做到这一点。然而，当我查看最喜欢的文档时，他们似乎只是在编写动作而不是阅读。

我注意到有一个方法被调用`Twitter.mentions_timeline`，但在文档中的任何地方都找不到。我想知道是否会有类似的`Twitter.favorites_timeline`但在文档中找不到任何内容。

任何指导都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T09:56:50.260

有电话`Twitter.favorites`。这不是一个时间线，但它应该包含您需要的数据。

看看[twitter gem 是如何做](https://github.com/sferik/twitter/blob/master/lib/twitter/api/favorites.rb)的以及[Twitter API 文档](https://dev.twitter.com/docs/api/1.1/get/favorites/list)。

# templates - 在 Symfony2 中，如何直接在 smarty 模板中渲染控制器？

> ID：15861061
> 
> 赞同：1
> 
> 时间：2013-04-07T09:47:47.620
> 
> 标签：templates, symfony, smarty, render

我对 Symfony 还很陌生，到目前为止一切正常，除了以下内容：我安装了 SmartyBundle 以使用 Smarty 模板引擎而不是默认的 Twig。它运作良好。但是在[Symfony 的书](http://symfony.com/pdf/Symfony_book_2.2.pdf?v=3)第 79 页，他们解释了一个非常简洁的 Twig 功能：直接从模板嵌入控制器结果的能力。

我没有设法与 Smarty 一起完成这项工作，所以你知道是否可以做到，以及如何做到吗？

我想我可以使用 forward 方法从我当前的控制器中调用另一个控制器来获得相同的结果，但在我看来，它提供了更多的分解功能来使用这个渲染函数。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-07T10:00:10.273

要么使用 Twig，要么习惯于缺少很多有用的功能，并且很少支持 Smarty，因为很少有人将它与 Symfony 一起使用。哎呀，即使使用 Symfony 的内置 PHP 模板，从社区获得帮助也是有问题的，因为大多数人都使用 Twig。

你走得越远，如果你不使用 Twig，你遇到的问题就越多。例如，几乎所有第 3 方捆绑包都提供 Twig 模板，让您可以轻松自定义它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-22T17:08:36.330

smartyBundle 确实支持 {render} 标签中的类似功能。查看[操作扩展](https://smartybundle.readthedocs.org/en/v1.0.0/#actions-extension)。虽然目前 smarty 的 master 与 symfony 2.3 捆绑在一起，但在渲染标签中使用 URI 似乎存在问题。

# python - Python Unicode 错误信息

> ID：15861069
> 
> 赞同：0
> 
> 时间：2013-04-07T09:48:59.200
> 
> 标签：python, character-encoding, ascii

我不明白这个错误代码。有人可以帮我吗？

```
UnicodeEncodeError: 'ascii' codec can't encode character u'\xe4' in position 2: 
ordinal not in range(128) 
```

这是代码：

```
import urllib2, os, zipfile
from lxml import etree

def xmlSplitter(data,separator=lambda x: x.startswith('<?xml')):
  buff = []
  for line in data:
    if separator(line):
      if buff:
        yield ''.join(buff)
        buff[:] = []
    buff.append(line)
  yield ''.join(buff)

def first(seq,default=None):
  """Return the first item from sequence, seq or the default(None) value"""
  for item in seq:
    return item
  return default

datasrc = "http://commondatastorage.googleapis.com/patents/grantbib/2011/ipgb20110104_wk01.zip"
filename = datasrc.split('/')[-1]

if not os.path.exists(filename):
  with open(filename,'wb') as file_write:
    r = urllib2.urlopen(datasrc)
    file_write.write(r.read())

zf = zipfile.ZipFile(filename)
xml_file = first([ x for x in zf.namelist() if x.endswith('.xml')])
assert xml_file is not None

count = 0
for item in xmlSplitter(zf.open(xml_file)):
  count += 1
  if count > 10: break
  doc = etree.XML(item)
  docID = first(doc.xpath('//publication-reference/document-id/doc-number/text()'))
  title = first(doc.xpath('//invention-title/text()'))
  lastName = first(doc.xpath('//addressbook/last-name/text()'))
  firstName = first(doc.xpath('//addressbook/first-name/text()'))
  street = first(doc.xpath('//addressbook/address/street/text()'))
  city = first(doc.xpath('//addressbook/address/city/text()'))
  state = first(doc.xpath('//addressbook/address/state/text()'))
  postcode = first(doc.xpath('//addressbook/address/postcode/text()'))
  country = first(doc.xpath('//addressbook/address/country/text()'))
  print "DocID:    {0}\nTitle:    {1}\nLast Name: {2}\nFirst Name: {3}\nStreet: {4}\ncity: {5}\nstate: {6}\npostcode: {7}\ncountry: {8}\n".format(docID,title,lastName,firstName,street,city,state,postcode,country) 
```

我在互联网上的某个地方获得了代码，我只更改了一小部分，即添加了街道、城市、州、邮政编码和国家。

XML 文件大约包含 200 万行代码，您认为是这个原因吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T10:03:13.240

没有纯文本这样的东西。文本始终具有编码，这是您用一系列字节表示给定符号（字母、逗号、日文汉字）的方式。符号“代码”到字节之间的映射称为编码。

在 python 2.7 中，编码文本（str）和通用的未编码文本（unicode()）之间的区别充其量是令人困惑的。python 3 抛弃了整个事情，默认情况下你总是使用 unicode 类型。

无论如何，发生的事情是您试图读取一些文本并将其放入字符串中，但该文本包含无法强制转换为 ASCII 编码的内容。ASCII 只能理解 0-127 范围内的字符，这是标准的字符集（用于编程的字母、数字、符号）。ASCII 的一种可能扩展是 latin-1（也称为 iso-8859-1），其中 128-255 范围映射到拉丁字符，例如带重音的 a。这种编码的优点是您仍然可以获得一个字节 == 一个字符。UTF-8 是 ASCII 的另一种扩展，您可以在其中释放一个字节 == 一个字符的约束，并允许一些字符用一个字节表示，一些字符用两个字节表示，依此类推。

要解决您的问题，这取决于。这取决于问题出在哪里。我猜您正在解析一个以您不知道的某种编码编码的文本文件，我猜它可能是 latin-1 或 UTF-8。如果这样做，则必须在 open() 中打开指定 encoding='utf-8' 的文件，但这取决于。从你提供的东西很难说。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-07T10:30:20.397

您正在解析 XML，并且该库已经知道如何为您处理解码。API 返回*`unicode`*对象，但您试图将它们视为字节字符串。

在您调用的地方`''.format()`，您使用的是 python 字节串而不是`unicode`对象，因此 Python 必须对 Unicode 值进行*编码*以适应字节串。为此，它只能使用默认值，即 ASCII。

简单的解决方案是在那里使用 unicode 字符串，注意`u''`字符串文字：

```
print u"DocID:    {0}\nTitle:    {1}\nLast Name: {2}\nFirst Name: {3}\nStreet: {4}\ncity: {5}\nstate: {6}\npostcode: {7}\ncountry: {8}\n".format(docID,title,lastName,firstName,street,city,state,postcode,country) 
```

Python 在打印时仍然需要对其进行编码，但至少现在 Python 可以对您的终端进行一些自动检测并确定它需要使用什么编码。

你可能想阅读 Python 和 Unicode：

*   [每个软件开发人员绝对、绝对必须了解 Unicode 和字符集（没有任何借口！）](http://joelonsoftware.com/articles/Unicode.html)作者：Joel Spolsky

*   Python [Unicode HOWTO](http://docs.python.org/2/howto/unicode.html)

*   Ned Batchelder 的[实用 Unicode](http://nedbatchelder.com/text/unipain.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-07T09:51:18.560

[ASCII 字符](http://en.wikipedia.org/wiki/Ascii)范围从0 (\x00) 到 127 (\x7F)。您的角色 (\xE4=228) 大于可能的最高值。因此，您必须更改编解码器（例如更改为 UTF-8）才能对该值进行编码。

# java - 在根目录中映射 servlet

> ID：15861072
> 
> 赞同：3
> 
> 时间：2013-04-07T09:49:32.800
> 
> 标签：java, gwt, servlets, guice, resteasy

这两者“共存”的正确配置是什么：

```
http://localhost:8888/index.html

http://localhost:8888/{some_path_value} 
```

第一项将返回一个 html 页面，并且还将包含将访问资源`/public/images/bg.png`等的 href。

现在第二个项目是一个 Restful api，它映射在同一个根上下文广告中，服务于页面（index.html、png、jpg、css、js 等）

所以我现在面临的问题是，当我像这样配置 Rest API servlet 映射时：

```
<servlet>
    <servlet-name>Resteasy</servlet-name>
    <servlet-class>
        org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher
    </servlet-class>
</servlet>

<servlet-mapping>
    <servlet-name>Resteasy</servlet-name>
    <url-pattern>/*</url-pattern>
</servlet-mapping> 
```

Rest API 有效，但它有效地删除了对 index.html、css、js 等静态资源的访问，以呈现“主页”。

但是，如果我将映射更改为现在可以访问 GWT 应用程序之类的东西`/api/*`，但 Rest API 的 PATH 不再是根。

那么我的应用程序可能有什么问题？我真的需要让两者在同一条路上共存。我最初的想法是做某种过滤器，但可能有更简单、更合适的解决方案。

**更新：**

我的应用程序的 guice**模块**：

```
public class MyModule implements Module
{
   public void configure(final Binder binder)
   {
      binder.bind(MyResource.class);
   }
} 
```

**web.xml**

```
<context-param>
    <param-name>resteasy.guice.modules</param-name>
    <param-value>org.jboss.errai.ui.demo.server.MyModule</param-value>
</context-param>

<listener>
    <listener-class>
        org.jboss.resteasy.plugins.guice.GuiceResteasyBootstrapServletContextListener
    </listener-class>
</listener>

<context-param>  
    <param-name>resteasy.servlet.mapping.prefix</param-name>  
    <param-value>/api</param-value>  
</context-param>

<servlet>
    <servlet-name>Resteasy</servlet-name>
    <servlet-class>
        org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher
    </servlet-class>
</servlet>

<servlet-mapping>
    <servlet-name>Resteasy</servlet-name>
    <url-pattern>/*</url-pattern>
</servlet-mapping> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-07T11:01:44.813

所以您的问题是您将所有根请求映射到其余 servlet，因为否则它不起作用。

1.  如果有办法了解您的 REST servlet 的某些模式，您可以在 web.xml 中配置所有这些特定模式。但是`url-pattern`只使用非常简单的语法`whatever/*`并且`*.extension`是被允许的，而且你的 rest-servlet 似乎不符合这个要求。

2.  另一种选择可能是使用像`GuiceServletContextListener`（由[guice](http://code.google.com/p/google-guice/wiki/ServletModule)提供）这样的高级 servlet 调度程序，并配置一个`WebModule`丰富的正则表达式。修改您`web.xml`以添加`WebModule`并配置该模块以处理 url 并使用适当的 servlet 进行调度（从您的 web.xml 中删除这些 servlet）

```
 <context-param>
    <param-name>resteasy.guice.modules&lt;/param-name>
    <param-value>org.jboss.errai.ui.demo.server.MyModule</param-value>
    <param-value>org.jboss.errai.ui.demo.server.MyWebModule</param-value>
  </context-param> 
```

```
 public class MyWebModule extends ServletModule {
    @Override
    protected void configureServlets() {
      // Note: all servlets and filters must be singletons
      bind(FactoryServlet.class).in(Singleton.class);
      // Pass to the HttpServletDispatcher everything but urls ending with static extensions
      serveRegex(".+(?<!\\.(html|css|png|jpg))")
           .with(HttpServletDispatcher.class);
    }
  } 
```

1.  最后一个选项是编写自己的过滤器，在其中检测路径是否与静态文件匹配并分派它。

```
 private FilterConfig config;
  public void init(FilterConfig filterConfig) throws ServletException {
    config = filterConfig;
  }

  public void doFilter(ServletRequest servletRequest,
      ServletResponse servletResponse, FilterChain filterChain)
      throws IOException, ServletException {

    HttpServletRequest req = (HttpServletRequest) servletRequest;
    HttpServletResponse resp = (HttpServletResponse) servletResponse;

    File file = new File(config.getServletContext().getRealPath(req.getServletPath()));
    if (file.canRead()) {
      // NOTE: you have to set the most appropriate type per file
      resp.setContentType("text/html");

      // This depends on apache commons-io
      IOUtils.copy(new FileInputStream(file), resp.getOutputStream());
    } else {
      filterChain.doFilter(req, resp);
    }
  } 
```

# networking - 两个在 Proxmox 上桥接。两个网桥的默认路由

> ID：15861074
> 
> 赞同：1
> 
> 时间：2013-04-07T09:49:43.820
> 
> 标签：networking, routing, debian, routed

OVH over VRACK LAN 上的场景 Proxmox 2.2

两个 VLAN 的两个桥接接口：

*   5.135.XXX.XXX/26 网关 5.135.XXX.126 网络掩码 255.255.255.192 这是 Vrack 上的第一个网络
*   176.31.XXX.XXX/26 网关 176.31.XXX.254 网络掩码 255.255.255.192

手动配置的接口（不使用 Proxmox 的 Web 界面）

为两个 VLAN 工作，但有任何问题。

从主机 ping 到： - 5.135.XXX.126 不工作 - 176.31.XXX.254 不工作

使用两个 VLAN 中的任何一个将主机上的所有 VPS 都正常工作

```
 cat /etc/network/interfaces
auto lo
iface lo inet loopback

# for Routing
    auto vmbr1
    iface vmbr1 inet manual
post-up /etc/pve/kvm-networking.sh
bridge_ports dummy0
bridge_stp off
bridge_fd 0

# vmbr0: Bridging. Make sure to use only MAC adresses that were assigned to you.
auto vmbr0
iface vmbr0 inet static
address 5.39.XXX.XXX
netmask 255.255.255.0
network 5.39.XXX.0
broadcast 5.39.XXX.255
gateway 5.39.XXX.254
bridge_ports eth0
bridge_stp off
bridge_fd 0

 iface vmbr0 inet6 static
address XXXX:XXXX:8:8D23::1
netmask 64
post-up /sbin/ip -f inet6 route add XXXX:XXXX:8:8Dff:ff:ff:ff:ff dev vmbr0
post-up /sbin/ip -f inet6 route add default via XXXX:XXXX:8:8Dff:ff:ff:ff:ff
pre-down /sbin/ip -f inet6 route del default via XXXX:XXXX:8:8Dff:ff:ff:ff:ff
pre-down /sbin/ip -f inet6 route del XXXX:XXXX:8:8Dff:ff:ff:ff:ff dev vmbr0

# vmbr11: Bridging vRack
auto vmbr10
iface vmbr10 inet static
    address 5.135.XXX.XXX
    netmask 255.255.255.240  # With 255.255.255.192 Don't work any.
    network 5.135.XXX.64
broadcast 5.135.XXX.127
    gateway 5.135.XXX.126
    bridge_ports auto eth0.2674
    bridge_stp off
    bridge_fd 0

# vrack 2674
auto eth0.2674
iface eth0.2674 inet static
address 5.135.XXX.XXX
network 5.135.XXX.64
broadcast 5.135.XXX.127
gateway 5.135.XXX.126
netmask 255.255.255.240 # With 255.255.255.192 Don't work any.

# vmbr11: Bridging vRack
auto vmbr11
iface vmbr11 inet static
    address 176.XXX.XXX.250
    netmask 255.255.255.240 # With 255.255.255.192 Don't work any.
    network 176.XXX.XXX.192
    broadcast 176.XXX.XXX.255
    gateway 176.XXX.XXX.254
    bridge_ports auto eth0.2673
    bridge_stp off
    bridge_fd 0

# vrack 2673
  auto eth0.2673
  iface eth0.2673 inet static
  address 176.XXX.XXX.193
  network 176.XXX.XXX.192
  broadcast 176.XXX.XXX.255
  gateway 176.XXX.XXX.254
  netmask 255.255.255.240 # With 255.255.255.192 Don't work any.

post-up /sbin/ip route add default via 176.XXX.XXX.254 dev eth0.2673 table 125
post-up /sbin/ip rule add from 176.XXX.XXX.192/26 table 125
post-up /sbin/ip route add default via 5.XXX.XXX.126 dev eth0.2674 table 125
post-up /sbin/ip rule add from 5.XXX.XXX.64/26 table 125

post-down /sbin/ip route del default 176.XXX.XXX.254 dev eth0.2673 table 125
post-down /sbin/ip rule del from 176.XXX.XXX.192/26 table 125
post-down /sbin/ip route del default 5.XXX.XXX.126 dev eth0.2674 table 125
post-down /sbin/ip rule del from 5.XXX.XXX.64/26 table 125 
```

也在 /etc/sysctl.conf

```
net.ipv4.conf.default.proxy_arp = 1
net.ipv4.conf.eth0/2673.proxy_arp = 1
net.ipv4.conf.eth0/2674.proxy_arp = 1 
```

也在 etc/network/if-up.d/static-routes 上用于到 NAS 的静态路由

```
 #!/bin/sh
/sbin/route add -net 10.0.0.0 netmask 255.0.0.0 gw 5.XXX.XXX.254 #eth0 OR vmbr0

    Kernel IP routing table
Destination     Gateway         Genmask         Flags Metric Ref    Use Iface
5.135.XXX.112    0.0.0.0         255.255.255.240 U     0      0        0 vmbr10
5.135.XXX.80     0.0.0.0         255.255.255.240 U     0      0        0 eth0.2674
176.31.XXX.192   0.0.0.0         255.255.255.240 U     0      0        0 eth0.2673
176.31.XXX.240   0.0.0.0         255.255.255.240 U     0      0        0 vmbr11
5.39.XXX.0       0.0.0.0         255.255.255.0   U     0      0        0 vmbr0
10.0.0.0        5.39.XXX.254     255.0.0.0       UG    0      0        0 vmbr0
0.0.0.0         176.31.XXX.254   0.0.0.0         UG    0      0        0 vmbr11
0.0.0.0         5.135.XXX.126    0.0.0.0         UG    0      0        0 vmbr10
0.0.0.0         5.39.XXX.254     0.0.0.0         UG    0      0        0 vmbr0 
```

这个问题的精确帮助。我在这个问题上花了很多时间却没有找到正确的输出。它有效，但不如预期。

# c - Scanf 语句

> ID：15861077
> 
> 赞同：0
> 
> 时间：2013-04-07T09:50:12.567
> 
> 标签：c, scanf

```
#include <stdio.h>
#include <stdlib.h> 
```

你好，我想知道为什么这个程序不执行。似乎我一直无法正确执行 scanf 功能。我得到以下错误：

错误：忽略使用属性 warn_unused_result 声明的 scanf 的返回值

注意：我知道有一种更有效的方法来编写我当前的程序，但这不是重点。我想知道这个错误是什么意思，为什么我不断得到它，可能还有一个解决方案。感谢你们。这是代码：

```
int main (int argc, char *argv[]){

    int x;
    int y;
    int z;
    int temp;

    scanf("%d", &x);
    scanf("%d", &y);
    scanf("%d", &z);

        if (x > y) {
           temp = x;
           x = y;
           y = temp;
        }

        if (y > z) {
            temp = y;
            y = z;
            z = temp;
        }

        if (x > z) {
            temp = x;
            x = z;
            z = temp;
        }

        printf("%d", x);
        printf("%d", y);
        printf("%d", z);

  return EXIT_SUCCESS; } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T09:51:56.470

你从编译器得到的错误就是它所说的。为了使您的应用程序正确，您必须检查 scanf 的返回值。[手册页](http://linux.die.net/man/3/scanf)中描述了可能的返回值。

有关导致错误的原因的说明，请参阅[gcc 手册](http://gcc.gnu.org/onlinedocs/gcc/Function-Attributes.html)的“warn_unused_result”部分（引用于 Peter Rs 回复）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T09:56:05.670

从 GCC 文档：

> 如果具有此属性的函数的调用者不使用其返回值，则该`warn_unused_result`属性会发出警告。这对于不检查结果是安全问题或始终是错误的函数很有用，例如 `realloc`.
> 
> ```
>  int fn () __attribute__ ((warn_unused_result));
>       int foo ()
>       {
>         if (fn () < 0) return -1;
>         fn ();
>         return 0;
>       } 
> ```
> 
> 导致第 5 行出现警告。

# json - 使用 perl 从文本中提取一部分

> ID：15861079
> 
> 赞同：-1
> 
> 时间：2013-04-07T09:50:41.897
> 
> 标签：json, perl

我怎么能用 perl 从这个文本中提取一些部分......我认为它的解码 json......现在我需要以这个为例：

星期日

阴天，下午有可能下雨。高18C。轻快的。来自东北的风速为 10 至 20 公里/小时。下雨的几率为 50%。”

```
{
    "response": {
        "version": "0.1"
        ,"termsofService": "http://www.wunderground.com/weather/api/d/terms.html"
        ,"features": {
        "forecast10day": 1
        }
    }
        ,
    "forecast":{
        "txt_forecast": {
        "date":"2:00 PM CEST",
        "forecastday": [
        {
        "period":0,
        "icon":"chancerain",
        "icon_url":"http://icons-ak.wxug.com/i/c/k/chancerain.gif",
        "title":"Sunday",
        "fcttext":"Overcast with a chance of rain in the afternoon. High of 64F. Winds from the NE at 5 to 15 mph. Chance of rain 50%.",
        "fcttext_metric":"Overcast with a chance of rain in the afternoon. High of 18C. Breezy. Winds from the NE at 10 to 20 km/h. Chance of rain 50%.",
        "pop":"50"
        }
        ,
        {
        "period":1,
        "icon":"chancerain",
        "icon_url":"http://icons-ak.wxug.com/i/c/k/chancerain.gif",
        "title":"Sunday Night",
        "fcttext":"Overcast with a chance of rain. Low of 50F. Winds from the NNE at 5 to 10 mph. Chance of rain 50%.",
        "fcttext_metric":"Overcast with a chance of rain. Low of 10C. Winds from the NNE at 10 to 15 km/h. Chance of rain 50%.",
        "pop":"50"
        }
        ,
        {
        "period":2,
        "icon":"partlycloudy",
        "icon_url":"http://icons-ak.wxug.com/i/c/k/partlycloudy.gif",
        "title":"Monday",
        "fcttext":"Partly cloudy with a chance of rain. High of 64F. Winds from the SE at 5 to 10 mph. Chance of rain 20%.",
        "fcttext_metric":"Partly cloudy with a chance of rain. High of 18C. Winds from the SE at 10 to 15 km/h.",
        "pop":"20"
        }
        ,
        {
        "period":3,
        "icon":"partlycloudy",
        "icon_url":"http://icons-ak.wxug.com/i/c/k/partlycloudy.gif",
        "title":"Monday Night",
        "fcttext":"Partly cloudy with a chance of rain after midnight. Low of 48F. Winds less than 5 mph.",
        "fcttext_metric":"Partly cloudy with a chance of rain after midnight. Low of 9C. Winds less than 5 km/h.",
        "pop":"20"
        }
        ,
        {
        "period":4,
        "icon":"chancerain",
        "icon_url":"http://icons-ak.wxug.com/i/c/k/chancerain.gif",
        "title":"Tuesday",
        "fcttext":"Overcast with a chance of rain. High of 59F. Winds from the SSE at 5 to 10 mph. Chance of rain 70%.",
        "fcttext_metric":"Overcast with a chance of rain. High of 15C. Winds from the SSE at 10 to 15 km/h. Chance of rain 70%.",
        "pop":"70"
        }
        ,
        {
        "period":5,
        "icon":"partlycloudy",
        "icon_url":"http://icons-ak.wxug.com/i/c/k/partlycloudy.gif",
        "title":"Tuesday Night",
        "fcttext":"Partly cloudy. Low of 48F. Winds less than 5 mph.",
        "fcttext_metric":"Partly cloudy. Low of 9C. Winds less than 5 km/h.",
        "pop":"0"
        }
        ,
        {
        "period":6,
        "icon":"partlycloudy",
        "icon_url":"http://icons-ak.wxug.com/i/c/k/partlycloudy.gif",
        "title":"Wednesday",
        "fcttext":"Partly cloudy. High of 63F. Winds from the South at 5 to 10 mph.",
        "fcttext_metric":"Partly cloudy. High of 17C. Winds from the South at 5 to 15 km/h.",
        "pop":"0"
        }
        ,
        {
        "period":7,
        "icon":"partlycloudy",
        "icon_url":"http://icons-ak.wxug.com/i/c/k/partlycloudy.gif",
        "title":"Wednesday Night",
        "fcttext":"Partly cloudy. Low of 46F. Winds less than 5 mph.",
        "fcttext_metric":"Partly cloudy. Low of 8C. Winds less than 5 km/h.",
        "pop":"0"
        }
        ,
        {
        "period":8,
        "icon":"partlycloudy",
        "icon_url":"http://icons-ak.wxug.com/i/c/k/partlycloudy.gif",
        "title":"Thursday",
        "fcttext":"Partly cloudy. High of 66F. Winds from the SSE at 5 to 10 mph.",
        "fcttext_metric":"Partly cloudy. High of 19C. Winds from the SSE at 10 to 15 km/h.",
        "pop":"0"
        }
        ,
        {
        "period":9,
        "icon":"partlycloudy",
        "icon_url":"http://icons-ak.wxug.com/i/c/k/partlycloudy.gif",
        "title":"Thursday Night",
        "fcttext":"Partly cloudy. Low of 52F. Winds less than 5 mph.",
        "fcttext_metric":"Partly cloudy. Low of 11C. Winds less than 5 km/h.",
        "pop":"0"
        }
        ,
        {
        "period":10,
        "icon":"partlycloudy",
        "icon_url":"http://icons-ak.wxug.com/i/c/k/partlycloudy.gif",
        "title":"Friday",
        "fcttext":"Partly cloudy. High of 66F. Winds from the SSE at 5 to 10 mph.",
        "fcttext_metric":"Partly cloudy. High of 19C. Winds from the SSE at 10 to 15 km/h.",
        "pop":"0"
        }
        ,
        {
        "period":11,
        "icon":"partlycloudy",
        "icon_url":"http://icons-ak.wxug.com/i/c/k/partlycloudy.gif",
        "title":"Friday Night",
        "fcttext":"Partly cloudy. Low of 48F. Winds less than 5 mph.",
        "fcttext_metric":"Partly cloudy. Low of 9C. Winds less than 5 km/h.",
        "pop":"0"
        }
        ,
        {
        "period":12,
        "icon":"partlycloudy",
        "icon_url":"http://icons-ak.wxug.com/i/c/k/partlycloudy.gif",
        "title":"Saturday",
        "fcttext":"Clear. High of 66F. Winds from the South at 5 to 10 mph.",
        "fcttext_metric":"Clear. High of 19C. Winds from the South at 10 to 15 km/h.",
        "pop":"0"
        }
        ,
        {
        "period":13,
        "icon":"clear",
        "icon_url":"http://icons-ak.wxug.com/i/c/k/clear.gif",
        "title":"Saturday Night",
        "fcttext":"Clear. Low of 50F. Winds less than 5 mph.",
        "fcttext_metric":"Clear. Low of 10C. Winds less than 5 km/h.",
        "pop":"0"
        }
        ,
        {
        "period":14,
        "icon":"partlycloudy",
        "icon_url":"http://icons-ak.wxug.com/i/c/k/partlycloudy.gif",
        "title":"Sunday",
        "fcttext":"Clear. High of 66F. Winds less than 5 mph.",
        "fcttext_metric":"Clear. High of 19C. Winds less than 5 km/h.",
        "pop":"0"
        }
        ,
        {
        "period":15,
        "icon":"partlycloudy",
        "icon_url":"http://icons-ak.wxug.com/i/c/k/partlycloudy.gif",
        "title":"Sunday Night",
        "fcttext":"Partly cloudy. Low of 52F. Winds less than 5 mph.",
        "fcttext_metric":"Partly cloudy. Low of 11C. Winds less than 5 km/h.",
        "pop":"0"
        }
        ,
        {
        "period":16,
        "icon":"clear",
        "icon_url":"http://icons-ak.wxug.com/i/c/k/clear.gif",
        "title":"Monday",
        "fcttext":"Clear. High of 68F. Winds less than 5 mph.",
        "fcttext_metric":"Clear. High of 20C. Winds less than 5 km/h.",
        "pop":"0"
        }
        ,
        {
        "period":17,
        "icon":"clear",
        "icon_url":"http://icons-ak.wxug.com/i/c/k/clear.gif",
        "title":"Monday Night",
        "fcttext":"Clear. Low of 52F. Winds less than 5 mph.",
        "fcttext_metric":"Clear. Low of 11C. Winds less than 5 km/h.",
        "pop":"0"
        }
        ,
        {
        "period":18,
        "icon":"mostlycloudy",
        "icon_url":"http://icons-ak.wxug.com/i/c/k/mostlycloudy.gif",
        "title":"Tuesday",
        "fcttext":"Mostly cloudy. High of 68F. Winds less than 5 mph.",
        "fcttext_metric":"Mostly cloudy. High of 20C. Winds less than 5 km/h.",
        "pop":"0"
        }
        ,
        {
        "period":19,
        "icon":"chancerain",
        "icon_url":"http://icons-ak.wxug.com/i/c/k/chancerain.gif",
        "title":"Tuesday Night",
        "fcttext":"Mostly cloudy with a chance of rain. Low of 52F. Winds less than 5 mph. Chance of rain 30%.",
        "fcttext_metric":"Mostly cloudy with a chance of rain. Low of 11C. Winds less than 5 km/h. Chance of rain 30%.",
        "pop":"30"
        }
        ]
        },
        "simpleforecast": {
        "forecastday": [
        {"date":{
    "epoch":"1365368400",
    "pretty":"11:00 PM CEST on April 07, 2013",
    "day":7,
    "month":4,
    "year":2013,
    "yday":96,
    "hour":23,
    "min":"00",
    "sec":0,
    "isdst":"1",
    "monthname":"April",
    "weekday_short":"Sun",
    "weekday":"Sunday",
    "ampm":"PM",
    "tz_short":"CEST",
    "tz_long":"Europe/Belgrade"
},
        "period":1,
        "high": {
        "fahrenheit":"64",
        "celsius":"18"
        },
        "low": {
        "fahrenheit":"50",
        "celsius":"10"
        },
        "conditions":"Chance of Rain",
        "icon":"chancerain",
        "icon_url":"http://icons-ak.wxug.com/i/c/k/chancerain.gif",
        "skyicon":"cloudy",
        "pop":50,
        "qpf_allday": {
        "in": 0.08,
        "mm": 2.0
        },
        "qpf_day": {
        "in": 0.04,
        "mm": 1.0
        },
        "qpf_night": {
        "in": 0.06,
        "mm": 1.5
        },
        "snow_allday": {
        "in": 0,
        "cm": 0
        },
        "snow_day": {
        "in": 0,
        "cm": 0
        },
        "snow_night": {
        "in": 0,
        "cm": 0
        },
        "maxwind": {
        "mph": 11,
        "kph": 18,
        "dir": "NE",
        "degrees": 38
        },
        "avewind": {
        "mph": 8,
        "kph": 13,
        "dir": "NE",
        "degrees": 44
        },
        "avehumidity": 55,
        "maxhumidity": 67,
        "minhumidity": 46
        }
        ,
        {"date":{
    "epoch":"1365454800",
    "pretty":"11:00 PM CEST on April 08, 2013",
    "day":8,
    "month":4,
    "year":2013,
    "yday":97,
    "hour":23,
    "min":"00",
    "sec":0,
    "isdst":"1",
    "monthname":"April",
    "weekday_short":"Mon",
    "weekday":"Monday",
    "ampm":"PM",
    "tz_short":"CEST",
    "tz_long":"Europe/Belgrade"
},
        "period":2,
        "high": {
        "fahrenheit":"64",
        "celsius":"18"
        },
        "low": {
        "fahrenheit":"48",
        "celsius":"9"
        },
        "conditions":"Chance of Rain",
        "icon":"partlycloudy",
        "icon_url":"http://icons-ak.wxug.com/i/c/k/partlycloudy.gif",
        "skyicon":"partlycloudy",
        "pop":20,
        "qpf_allday": {
        "in": 0.04,
        "mm": 1.0
        },
        "qpf_day": {
        "in": 0.01,
        "mm": 0.3
        },
        "qpf_night": {
        "in": 0.04,
        "mm": 1.0
        },
        "snow_allday": {
        "in": 0,
        "cm": 0
        },
        "snow_day": {
        "in": 0,
        "cm": 0
        },
        "snow_night": {
        "in": 0,
        "cm": 0
        },
        "maxwind": {
        "mph": 8,
        "kph": 13,
        "dir": "NNE",
        "degrees": 32
        },
        "avewind": {
        "mph": 5,
        "kph": 8,
        "dir": "South",
        "degrees": 182
        },
        "avehumidity": 60,
        "maxhumidity": 69,
        "minhumidity": 42
        }
        ,
        {"date":{
    "epoch":"1365541200",
    "pretty":"11:00 PM CEST on April 09, 2013",
    "day":9,
    "month":4,
    "year":2013,
    "yday":98,
    "hour":23,
    "min":"00",
    "sec":0,
    "isdst":"1",
    "monthname":"April",
    "weekday_short":"Tue",
    "weekday":"Tuesday",
    "ampm":"PM",
    "tz_short":"CEST",
    "tz_long":"Europe/Belgrade"
},
        "period":3,
        "high": {
        "fahrenheit":"59",
        "celsius":"15"
        },
        "low": {
        "fahrenheit":"48",
        "celsius":"9"
        },
        "conditions":"Chance of Rain",
        "icon":"chancerain",
        "icon_url":"http://icons-ak.wxug.com/i/c/k/chancerain.gif",
        "skyicon":"cloudy",
        "pop":70,
        "qpf_allday": {
        "in": 0.20,
        "mm": 5.1
        },
        "qpf_day": {
        "in": 0.17,
        "mm": 4.3
        },
        "qpf_night": {
        "in": 0.00,
        "mm": 0.0
        },
        "snow_allday": {
        "in": 0,
        "cm": 0
        },
        "snow_day": {
        "in": 0,
        "cm": 0
        },
        "snow_night": {
        "in": 0,
        "cm": 0
        },
        "maxwind": {
        "mph": 7,
        "kph": 11,
        "dir": "South",
        "degrees": 171
        },
        "avewind": {
        "mph": 4,
        "kph": 6,
        "dir": "South",
        "degrees": 172
        },
        "avehumidity": 60,
        "maxhumidity": 67,
        "minhumidity": 56
        }
        ,
        {"date":{
    "epoch":"1365627600",
    "pretty":"11:00 PM CEST on April 10, 2013",
    "day":10,
    "month":4,
    "year":2013,
    "yday":99,
    "hour":23,
    "min":"00",
    "sec":0,
    "isdst":"1",
    "monthname":"April",
    "weekday_short":"Wed",
    "weekday":"Wednesday",
    "ampm":"PM",
    "tz_short":"CEST",
    "tz_long":"Europe/Belgrade"
},
        "period":4,
        "high": {
        "fahrenheit":"63",
        "celsius":"17"
        },
        "low": {
        "fahrenheit":"46",
        "celsius":"8"
        },
        "conditions":"Partly Cloudy",
        "icon":"partlycloudy",
        "icon_url":"http://icons-ak.wxug.com/i/c/k/partlycloudy.gif",
        "skyicon":"partlycloudy",
        "pop":0,
        "qpf_allday": {
        "in": 0.00,
        "mm": 0.0
        },
        "qpf_day": {
        "in": 0.00,
        "mm": 0.0
        },
        "qpf_night": {
        "in": 0.00,
        "mm": 0.0
        },
        "snow_allday": {
        "in": 0,
        "cm": 0
        },
        "snow_day": {
        "in": 0,
        "cm": 0
        },
        "snow_night": {
        "in": 0,
        "cm": 0
        },
        "maxwind": {
        "mph": 7,
        "kph": 11,
        "dir": "SW",
        "degrees": 219
        },
        "avewind": {
        "mph": 5,
        "kph": 8,
        "dir": "SSW",
        "degrees": 195
        },
        "avehumidity": 60,
        "maxhumidity": 66,
        "minhumidity": 51
        }
        ,
        {"date":{
    "epoch":"1365714000",
    "pretty":"11:00 PM CEST on April 11, 2013",
    "day":11,
    "month":4,
    "year":2013,
    "yday":100,
    "hour":23,
    "min":"00",
    "sec":0,
    "isdst":"1",
    "monthname":"April",
    "weekday_short":"Thu",
    "weekday":"Thursday",
    "ampm":"PM",
    "tz_short":"CEST",
    "tz_long":"Europe/Belgrade"
},
        "period":5,
        "high": {
        "fahrenheit":"66",
        "celsius":"19"
        },
        "low": {
        "fahrenheit":"52",
        "celsius":"11"
        },
        "conditions":"Partly Cloudy",
        "icon":"partlycloudy",
        "icon_url":"http://icons-ak.wxug.com/i/c/k/partlycloudy.gif",
        "skyicon":"partlycloudy",
        "pop":0,
        "qpf_allday": {
        "in": 0.00,
        "mm": 0.0
        },
        "qpf_day": {
        "in": 0.00,
        "mm": 0.0
        },
        "qpf_night": {
        "in": 0.00,
        "mm": 0.0
        },
        "snow_allday": {
        "in": 0,
        "cm": 0
        },
        "snow_day": {
        "in": 0,
        "cm": 0
        },
        "snow_night": {
        "in": 0,
        "cm": 0
        },
        "maxwind": {
        "mph": 8,
        "kph": 13,
        "dir": "South",
        "degrees": 187
        },
        "avewind": {
        "mph": 6,
        "kph": 10,
        "dir": "South",
        "degrees": 175
        },
        "avehumidity": 61,
        "maxhumidity": 66,
        "minhumidity": 47
        }
        ,
        {"date":{
    "epoch":"1365800400",
    "pretty":"11:00 PM CEST on April 12, 2013",
    "day":12,
    "month":4,
    "year":2013,
    "yday":101,
    "hour":23,
    "min":"00",
    "sec":0,
    "isdst":"1",
    "monthname":"April",
    "weekday_short":"Fri",
    "weekday":"Friday",
    "ampm":"PM",
    "tz_short":"CEST",
    "tz_long":"Europe/Belgrade"
},
        "period":6,
        "high": {
        "fahrenheit":"66",
        "celsius":"19"
        },
        "low": {
        "fahrenheit":"48",
        "celsius":"9"
        },
        "conditions":"Partly Cloudy",
        "icon":"partlycloudy",
        "icon_url":"http://icons-ak.wxug.com/i/c/k/partlycloudy.gif",
        "skyicon":"partlycloudy",
        "pop":0,
        "qpf_allday": {
        "in": 0.01,
        "mm": 0.3
        },
        "qpf_day": {
        "in": 0.00,
        "mm": 0.0
        },
        "qpf_night": {
        "in": 0.01,
        "mm": 0.3
        },
        "snow_allday": {
        "in": 0,
        "cm": 0
        },
        "snow_day": {
        "in": 0,
        "cm": 0
        },
        "snow_night": {
        "in": 0,
        "cm": 0
        },
        "maxwind": {
        "mph": 8,
        "kph": 13,
        "dir": "South",
        "degrees": 182
        },
        "avewind": {
        "mph": 6,
        "kph": 10,
        "dir": "South",
        "degrees": 172
        },
        "avehumidity": 72,
        "maxhumidity": 85,
        "minhumidity": 50
        }
        ,
        {"date":{
    "epoch":"1365886800",
    "pretty":"11:00 PM CEST on April 13, 2013",
    "day":13,
    "month":4,
    "year":2013,
    "yday":102,
    "hour":23,
    "min":"00",
    "sec":0,
    "isdst":"1",
    "monthname":"April",
    "weekday_short":"Sat",
    "weekday":"Saturday",
    "ampm":"PM",
    "tz_short":"CEST",
    "tz_long":"Europe/Belgrade"
},
        "period":7,
        "high": {
        "fahrenheit":"66",
        "celsius":"19"
        },
        "low": {
        "fahrenheit":"50",
        "celsius":"10"
        },
        "conditions":"Partly Cloudy",
        "icon":"partlycloudy",
        "icon_url":"http://icons-ak.wxug.com/i/c/k/partlycloudy.gif",
        "skyicon":"mostlysunny",
        "pop":0,
        "qpf_allday": {
        "in": 0.01,
        "mm": 0.3
        },
        "qpf_day": {
        "in": 0.01,
        "mm": 0.3
        },
        "qpf_night": {
        "in": 0.00,
        "mm": 0.0
        },
        "snow_allday": {
        "in": 0,
        "cm": 0
        },
        "snow_day": {
        "in": 0,
        "cm": 0
        },
        "snow_night": {
        "in": 0,
        "cm": 0
        },
        "maxwind": {
        "mph": 8,
        "kph": 13,
        "dir": "South",
        "degrees": 181
        },
        "avewind": {
        "mph": 6,
        "kph": 10,
        "dir": "South",
        "degrees": 188
        },
        "avehumidity": 66,
        "maxhumidity": 82,
        "minhumidity": 61
        }
        ,
        {"date":{
    "epoch":"1365973200",
    "pretty":"11:00 PM CEST on April 14, 2013",
    "day":14,
    "month":4,
    "year":2013,
    "yday":103,
    "hour":23,
    "min":"00",
    "sec":0,
    "isdst":"1",
    "monthname":"April",
    "weekday_short":"Sun",
    "weekday":"Sunday",
    "ampm":"PM",
    "tz_short":"CEST",
    "tz_long":"Europe/Belgrade"
},
        "period":8,
        "high": {
        "fahrenheit":"66",
        "celsius":"19"
        },
        "low": {
        "fahrenheit":"52",
        "celsius":"11"
        },
        "conditions":"Partly Cloudy",
        "icon":"partlycloudy",
        "icon_url":"http://icons-ak.wxug.com/i/c/k/partlycloudy.gif",
        "skyicon":"sunny",
        "pop":0,
        "qpf_allday": {
        "in": 0.00,
        "mm": 0.0
        },
        "qpf_day": {
        "in": 0.00,
        "mm": 0.0
        },
        "qpf_night": {
        "in": 0.00,
        "mm": 0.0
        },
        "snow_allday": {
        "in": 0,
        "cm": 0
        },
        "snow_day": {
        "in": 0,
        "cm": 0
        },
        "snow_night": {
        "in": 0,
        "cm": 0
        },
        "maxwind": {
        "mph": 6,
        "kph": 10,
        "dir": "SW",
        "degrees": 232
        },
        "avewind": {
        "mph": 2,
        "kph": 3,
        "dir": "SW",
        "degrees": 236
        },
        "avehumidity": 61,
        "maxhumidity": 69,
        "minhumidity": 44
        }
        ,
        {"date":{
    "epoch":"1366059600",
    "pretty":"11:00 PM CEST on April 15, 2013",
    "day":15,
    "month":4,
    "year":2013,
    "yday":104,
    "hour":23,
    "min":"00",
    "sec":0,
    "isdst":"1",
    "monthname":"April",
    "weekday_short":"Mon",
    "weekday":"Monday",
    "ampm":"PM",
    "tz_short":"CEST",
    "tz_long":"Europe/Belgrade"
},
        "period":9,
        "high": {
        "fahrenheit":"68",
        "celsius":"20"
        },
        "low": {
        "fahrenheit":"52",
        "celsius":"11"
        },
        "conditions":"Clear",
        "icon":"clear",
        "icon_url":"http://icons-ak.wxug.com/i/c/k/clear.gif",
        "skyicon":"sunny",
        "pop":0,
        "qpf_allday": {
        "in": 0.00,
        "mm": 0.0
        },
        "qpf_day": {
        "in": 0.00,
        "mm": 0.0
        },
        "qpf_night": {
        "in": 0.00,
        "mm": 0.0
        },
        "snow_allday": {
        "in": 0,
        "cm": 0
        },
        "snow_day": {
        "in": 0,
        "cm": 0
        },
        "snow_night": {
        "in": 0,
        "cm": 0
        },
        "maxwind": {
        "mph": 4,
        "kph": 6,
        "dir": "East",
        "degrees": 81
        },
        "avewind": {
        "mph": 2,
        "kph": 3,
        "dir": "South",
        "degrees": 172
        },
        "avehumidity": 65,
        "maxhumidity": 75,
        "minhumidity": 53
        }
        ,
        {"date":{
    "epoch":"1366146000",
    "pretty":"11:00 PM CEST on April 16, 2013",
    "day":16,
    "month":4,
    "year":2013,
    "yday":105,
    "hour":23,
    "min":"00",
    "sec":0,
    "isdst":"1",
    "monthname":"April",
    "weekday_short":"Tue",
    "weekday":"Tuesday",
    "ampm":"PM",
    "tz_short":"CEST",
    "tz_long":"Europe/Belgrade"
},
        "period":10,
        "high": {
        "fahrenheit":"68",
        "celsius":"20"
        },
        "low": {
        "fahrenheit":"52",
        "celsius":"11"
        },
        "conditions":"Mostly Cloudy",
        "icon":"mostlycloudy",
        "icon_url":"http://icons-ak.wxug.com/i/c/k/mostlycloudy.gif",
        "skyicon":"mostlycloudy",
        "pop":0,
        "qpf_allday": {
        "in": 0.09,
        "mm": 2.3
        },
        "qpf_day": {
        "in": 0.01,
        "mm": 0.3
        },
        "qpf_night": {
        "in": 0.15,
        "mm": 3.8
        },
        "snow_allday": {
        "in": 0,
        "cm": 0
        },
        "snow_day": {
        "in": 0,
        "cm": 0
        },
        "snow_night": {
        "in": 0,
        "cm": 0
        },
        "maxwind": {
        "mph": 5,
        "kph": 8,
        "dir": "SSW",
        "degrees": 193
        },
        "avewind": {
        "mph": 4,
        "kph": 6,
        "dir": "South",
        "degrees": 174
        },
        "avehumidity": 69,
        "maxhumidity": 77,
        "minhumidity": 56
        }
        ]
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T10:04:32.490

您可以轻松地使用该`JSON`模块将此字符串加载到 perl 哈希引用中：

```
use JSON qw( decode_json );

my $jsonString = "{ ... }"; #Your JSON string
my $decoded = decode_json($jsonString); 
```

现在 $decoded 变量包含散列和数组形式的数据。您可以轻松访问“星期日”，例如：

```
say $decoded->{forecast}{txt_forecast}{forecastday}[0]{title};  #will print'sunday'

say $decoded->{forecast}{txt_forecast}{forecastday}[0]{"fcttext"}; #will return sunday's weather text 
```

# c - 复数 - 寻找 theta - C 编程

> ID：15861085
> 
> 赞同：1
> 
> 时间：2013-04-07T09:52:17.060
> 
> 标签：c, if-statement, numbers, degrees

我是一个完全的编程初学者，我有一个任务要做，它几乎只是从一个复数中找到 R 和 theta，并根据它所在的象限使用 if 语句采取适当的行动。

*IE; 在象限 1 和 2 中使用计算的 theta，当在象限 3 中从计算的 theta 中减去 180 度时，当在象限 4 中时，在计算的 theta 中添加 180 度*

我真的很难找到 theta，当我输入 1+1j 时，我得到了正确的 R，但不正确的 theta。我正在使用 theta = atan(b/a);

```
#include <stdio.h>

int main()   
{   
float a, b, r, j, theta, thetaquadrant3, thetaquadrant4, convert ;   

j = -1;   
b = b*-1;   
thetaquadrant3 = theta - 180;   
thetaquadrant4 = theta + 180;   

printf ("Please enter intput A and B in the form of a+bj\n");

printf ("Input A:");   
scanf ("%f" , &a);   

printf ("Input B:");   
scanf ("%f" , &b);   

if ((a>=0.0) && (b >= 0.0))   
{   
//take no action as the calculated angle is in quadrant 1      
r = sqrt (pow(a, 2) + pow(b , 2));      
printf ("R=%f\n\n" , r);     

theta = atan(b/a);   
printf ("Theta=%f\n\n", theta );   
}

if ((a<=-0.0) && (b >= 0.0))   
{   
//take no action as the calculated angle is in quadrant 2   
r = sqrt (pow(a, 2) + pow(b , 2));    
printf ("R=%f\n\n" , r);    

theta = atan(b/a);    
printf ("Theta=%f\n\n", theta );    
}

if ((a<=-0.0) && (b <= -0.0))    
{
//Quadant 3   
r = sqrt (pow(a, 2) + pow(b , 2));    
printf ("R=%f\n\n" , r);    

theta = atan(b/a);    
printf ("Theta=%f\n\n", thetaquadrant3 );    

}

if ((a>=0.0) && (b <= -0.0))    
{      
//Quadrant 4    
r = sqrt (pow(a, 2) + pow(b , 2));   
printf ("R=%f\n\n" , r);    

theta = atan(b/a);    
printf ("Theta=%f\n\n", thetaquadrant4 );    
}    

// Converting back to rectangular Co-ordinates    
convert = r*cos(theta) + j*r*sin (theta);    
printf ("Corresponds to%f\n\n" , convert);     

return 0;   
} 
```

任何帮助是极大的赞赏

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T10:03:37.413

第一个问题：

```
float a, b, r, j, theta, thetaquadrant3, thetaquadrant4, convert ; 
```

这些变量是`declared`但它们的值是`undefined`。

```
thetaquadrant3 = theta - 180;   
thetaquadrant4 = theta + 180; 
```

`thetaquadrant3`现在`thetaquadrant4`是`undefined`+ 或 - 180 的值，即仍然`undefined`.

```
theta = atan(b/a);    
printf ("Theta=%f\n\n", thetaquadrant3 ); 
```

您需要根据 重新`thetaquadrant3`计算`theta`。

但主要问题是`atan`返回弧度而不是度数的结果（正如您的 +/- 180 所暗示的那样）。

正如 dialer 在他的评论中提到的那样，有一个函数也可以处理象限[atan2](http://www.cplusplus.com/reference/cmath/atan2/)。在链接中，您还将看到如何在输出中以度数显示结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T10:20:39.680

与您已经采用的方法略有不同，但如果您使用的是 C99 或更高版本，则可以使用`<complex.h>`头文件。

使用此文件，您可以创建一个复数并使用`cabs`和`carg`方法来计算绝对值 (R) 和参数 (theta)。

```
float _Complex num = real + (imag * _Complex_I);

float r = cabs(num);
float theta = carg(num); 
```

我创建了一个完整的示例[作为要点](https://gist.github.com/iwillspeak/5329918#file-complex-c)。

# taskbar - 如何将 Spring Tool Suite 固定到 Windows 7 任务栏

> ID：15861086
> 
> 赞同：5
> 
> 时间：2013-04-07T09:52:42.763
> 
> 标签：taskbar, spring-tool-suite

当 Spring Tool Suite 启动时，右键单击任务栏中的图标不会显示 pin-to-taskbar 选项（只有新任务...、激活任务...和关闭窗口可用）。没有将 STS 固定到任务栏的选项。

有没有办法将 STS 固定到任务栏？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-13T17:15:37.703

我在 Windows 7 上使用 x64 版本的 STS 3.2.0-RELEASE 时遇到了这个问题。以下内容对我有用，[此处](https://bugs.eclipse.org/bugs/show_bug.cgi?id=314805)也有记录：

*   检查`eclipse.ini` 并确保 VM 路径指向 JDK 或 JRE 的 bin 目录，*而不是 javaw.exe*。对我来说，论点是`D:/Development/Languages/Java/Development Kit/bin/`
*   从任务栏中取消固定 Eclipse 或删除快捷方式
*   `eclipse.exe`从 Windows 资源管理器运行并选择您的工作区
*   加载初始屏幕并显示主窗口后，将 Eclipse 固定到任务栏

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-07T09:55:09.637

`click on start->all programs->Spring Source`然后`right click on STS release`，你会看到`Pin to taskbar`

# javascript - 正则表达式仅匹配语言字符（所有语言）？

> ID：15861088
> 
> 赞同：19
> 
> 时间：2013-04-07T09:52:46.637
> 
> 标签：javascript, regex, unicode

我需要将用户输入仅限于字母~~数字~~字符。

要是只有英文就好了`$[a-z]^/i`

但我需要在全球范围内进行，例如针对每种语言。是否有包含所有“字符”的连续 Unicode 范围？如果没有，我该怎么做？

*ps 我看到了[这个](https://stackoverflow.com/questions/7206499/match-letter-in-any-language)答案，但答案是针对 python 的。*

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-04-07T11:33:13.773

如果你使用[Steve Levithan 的 XRegExp 包和 Unicode 插件](http://xregexp.com/plugins/)，那么很容易：

```
var regex = XRegExp('^\\p{L}*$'); 
```

（请注意，这`^`是字符串的开始锚点，`$`是字符串结束的锚点，反之亦然）

在纯 JavaScript 中，您需要自己构建范围。我冒昧地从史蒂夫的源代码中构建了一个纯 JavaScript 正则表达式：

```
/^[\u0041-\u005A\u0061-\u007A\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]*$/ 
```

因此，如果您只需要该功能而不是整个 XREgExp 包，则可以使用它。

*   [**工作 jsbin**](http://jsbin.com/epukan/5/edit)。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2019-02-26T06:40:30.423

使用[Unicode Property Escapes](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions/Unicode_Property_Escapes)，您可以使用以下简单的正则表达式匹配来自任何语言的字母：

```
/\p{Letter}/u 
```

或者用简写

```
/\p{L}/u 
```

Unicode 属性转义可以使用一个名为 regexpu 的工具转换为 ES5。

所有语言字符的转换代码，带有空格：

```
/(?:[^A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC\s]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE83\uDE86-\uDE89\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D])/gi 
```

所有语言字符和数字的转换代码：

```
/(?:[^A-Za-z0-9\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC\s]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE83\uDE86-\uDE89\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D])/gi 
```

[（ Loilo](https://stackoverflow.com/users/2048874/loilo) ）在这里回答了这个问题我已经添加了一些修改空间和数字

[正则表达式匹配非ASCII字符？](https://stackoverflow.com/questions/150033/regular-expression-to-match-non-english-characters/873600#873600)

# load - Three.js 用于加载模型的进度条？WEBGL

> ID：15861089
> 
> 赞同：0
> 
> 时间：2013-04-07T09:53:27.110
> 
> 标签：load, progress-bar, three.js, webgl

知道在加载到 webgl 渲染器画布中的大型模型之间显示进度条的可能性吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-04-24T08:37:44.477

创建加载程序并在进度时显示/隐藏：

```
THREE.DefaultLoadingManager.onProgress = function (itemPath, itemIndex, totalItems) {
    console.log(itemPath, itemIndex, totalItems);
}; 
```

# android - -webkit-text-size-adjust 有什么作用？

> ID：15861093
> 
> 赞同：27
> 
> 时间：2013-04-07T09:54:03.963
> 
> 标签：android, ios, css, webkit

我试图了解`-webkit-text-size-adjust:none;`.

添加/删除不影响我在 android (chrome) 或 iOS (safari 和 chrome) 上的字体大小。那么有什么用呢？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-07T10:08:25.143

```
-webkit-text-size-adjust 
```

它指定如果您（作者）想要在缩放浏览器页面时调整文本大小。大多数情况下，最好将其设置为`auto`或`100%`Web 浏览器将负责调整文本大小的方式。

注意：Mozilla 开发者页面说它是[非标准的](https://developer.mozilla.org/en-US/docs/CSS/text-size-adjust)

本文[将为](http://blog.55minutes.com/2012/04/iphone-text-resizing/)您提供更多帮助。

有趣的注释：使用[Twitter Bootstrap](http://twitter.github.io/bootstrap/)的开发人员可能有兴趣知道 Bootstrap`‑webkit‑text‑size‑adjust: 100%`开箱即用：[Source Link](http://blog.55minutes.com/2012/04/iphone-text-resizing/#fnref:bootstrap)

**编辑**

Android 手机上的 Chrome 使用[字体增强](https://lists.webkit.org/pipermail/webkit-dev/2012-May/020819.html)，因此无论您设置什么值`-webkit-text-size-adjust`都会***被忽略。***您可以通过设置`max-height`大的东西（`100000px`或左右）来禁用字体增强，请参阅此[错误](https://bugs.webkit.org/show_bug.cgi?id=FontBoosting)。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-07T10:07:54.687

这`-webkit-text-size-adjust`是一项[实验性技术](https://developer.mozilla.org/en-US/docs/CSS/text-size-adjust)，用于指定在 iPhone 上的 Safari 中显示文本内容的大小调整。它需要 3 种类型的值：

*   none：不调整文字大小。

*   自动（默认）：文字大小会自动为 iPhone 上的 Safari 调整。

*   在 iPhone 上的 Safari 中显示文本的百分比大小。

除了 iOS，只有一些移动浏览器支持这个 CSS 属性。[您可以在此处](https://developer.mozilla.org/en-US/docs/CSS/text-size-adjust#Browser_compatibility)检查兼容性

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-07T10:06:33.510

似乎没有任何发布的规范`-webkit-text-size-adjust`，但有一个非正式的[描述](http://css-infos.net/property/-webkit-text-size-adjust)，它说它可以在 iPhone 上的 Safari 中工作。

根据[CSS Mobile Text Size Adjustment Module Level](http://dev.w3.org/csswg/css-size-adjust/#text-size-adjust) (Editor's Draft)，`auto`是初始值，因此`-webkit-text-size-adjust:none`只有当它覆盖将属性设置为不同值的设置时才会生效。据推测 ，其工作方式与计划中的财产`-webkit-text-size-adjust`大致相同。`text-size-adjust`

# java - 在 Android 应用程序中引用 Facebook SDK

> ID：15861095
> 
> 赞同：1
> 
> 时间：2013-04-07T09:54:09.463
> 
> 标签：java, android, facebook, sdk

我正在关注[Android 版 Facebook SDK 入门](https://developers.facebook.com/docs/getting-started/facebook-sdk-for-android/3.0/)，在第 6 步中，需要将 FacebookSDK 链接到我的 Android 项目。但是，我收到了一些未知错误，我无法获得有关为什么或如何修复它的详细信息。

我引用 Facebook SDK 如下：

![在此处输入图像描述](https://i.stack.imgur.com/TXR0W.jpg)

但是，当我运行应用程序时，控制台会显示一条消息，指出找不到 FacebookSDK.apk。我的应用程序抛出了一个找不到类的异常。

在检查项目设置后，我发现：

![在此处输入图像描述](https://i.stack.imgur.com/DhTtN.jpg)

我在链接项目方面没有太多经验。我不知道红色错误是什么意思，项目也标有问号。

我没有运气完成并检查了以下内容： - FacebookSDK 是我工作区的一部分。（我可以编译示例项目）

*   清理并重建工作区。

*   重新创建工作区并重复整个过程。

*   在我的项目的 bin 目录中包含 FacebookSDK.jar。

*   FacebookSDK 文件没有复制到我的工作区，我只是按照入门指南引用了它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-16T20:32:00.447

所以我仍然不确定是什么导致了这个问题，但我在尝试了几个步骤但没有任何运气后找到了一种解决方法：

*   创建了新的工作区
*   将构建的目标更改为 Android 2.2 (Froyo)，与为 Facebook SDK 构建的目标相同
*   重建项目
*   清洁项目

我继续教程并添加了导入，例如

```
import com.facebook.*;
import com.facebook.model.*; 
```

然后 Eclipse 建议进行自动修复，将 FacebookSDK 添加到我的应用程序的构建路径中。FacebookSDK 项目是同一工作区的一部分。

**编辑：** 这确实解决了 IDE 无法识别 FacebookSDK 中的类的问题，但是当我尝试运行时，找不到 FacebookSDK.apk。这是因为当 SDK 应该是一个库时，我将它作为一个项目来引用。我不确定如何解决。

**修复：** 将 FacebookSDK 项目文件复制到工作区并构建所有项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-11T21:06:11.383

几天后我遇到了同样的问题，但我找不到答案，所以在尝试了很多事情后，我通过下载另一个 Eclipse、安装“ADT 插件”、更改工作区并再次导入它来解决我的问题

您可以[在此处](http://developer.android.com/sdk/installing/installing-adt.html#Configure)查看如何下载另一个 Eclipse 并安装 ADT

毕竟，打开 Eclipse 并选择另一个工作区（我只是工作空间 2）并导入 FaceBook SDK 和其他项目

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-27T07:03:36.303

首先在您当前的 Eclipse 项目资源管理器中导入您的 FacebookSDK 项目，然后按照以下步骤操作

1.  在您的工作区中复制您的 facebook-android-sdk-3.0.1

2.  文件 >> 导入 >> 常规 >> 现有项目到工作区

3.  选择 rood 目录到您的工作区并选择 facebook-android-sdk-3.0.1

4.  单击您的 FacebookSDK，然后单击确定

5.  右键单击项目和属性>> android>>添加>> FacebookSDK单击应用并确定

你已经做到了。。

# android - (Android) 向 EditText 发送“ENTER”键事件

> ID：15861096
> 
> 赞同：0
> 
> 时间：2013-04-07T09:54:15.113
> 
> 标签：android, android-edittext

我对Android开发很陌生。我试图在将空格输入`EditText`元素时检测空格，然后立即向`EditText`元素添加换行符。基本上，尝试用“输入”键替换空格键。我已经很接近了，因为我在输入到 EditText 元素时设法检测到“空格”，但是在检测到空格后，我正忙于将“输入”键事件分派到`EditText`元素中。任何帮助将不胜感激。我觉得我正处于答案的风口浪尖，我只需要在正确的方向上稍微推动一下。

```
public void addInputWordListener(){
    inputWord.addTextChangedListener(new TextWatcher() {

        public void afterTextChanged(Editable s) {
            sStr = s.toString();
            if(sStr.equals("")){
                topView.setTextColor(Color.WHITE);
                return;
            }
            if (sStr.endsWith(" ")){    //space found!
                token = s.toString().trim();
                if (token.equalsIgnoreCase(topView.getText().toString())){
                    inputWord.dispatchKeyEvent(KeyEvent.KEYCODE_ENTER); //doesnt work??
                    topView.setText(midView.getText());
                    midView.setText(botView.getText());
                    botView.setText(MainMenu.we.nextWord());
                    MainMenu.user.totalWords++;
                }else{
                    topView.setTextColor(Color.RED);
                    MainMenu.user.totalWords++;
                    MainMenu.user.numErrors++;
                }
            }
        }

        public void beforeTextChanged(CharSequence s, int start, int count, int after) {}

        public void onTextChanged(CharSequence s, int start, int before, int count) {}

    });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T10:03:54.137

哇，在迷失在 Android 的 API 海洋之前，我绝对应该先尝试一些基本的 Java 东西。所需要的只是：

```
inputWord.append("\n"); 
```

# asp.net - 在验证中使用 DataBinder.Eval

> ID：15861103
> 
> 赞同：0
> 
> 时间：2013-04-07T09:55:16.177
> 
> 标签：asp.net, validation, user-controls

我正在使用 umbraco 创建一个多语言站点，并且我想将字典项与我的验证错误消息一起使用。

我将以下代码放在 ErrorMessage 字段中，但它似乎不起作用

```
<asp:RequiredFieldValidator ID="NameRequiredFieldValidator" runat="server" 
  ErrorMessage='<%#(string)DataBinder.Eval(Container, library.GetDictionaryItem("NameValid")) %>'
    ControlToValidate="NameTextBox" ForeColor="Red" ValidationGroup="ContactUs" 
      Display="Dynamic"></asp:RequiredFieldValidator> 
```

有没有办法做到这一点？

# javascript - 在 TypeScript 中获取用户的 IP 地址

> ID：15861104
> 
> 赞同：1
> 
> 时间：2013-04-07T09:55:24.280
> 
> 标签：javascript, typescript

如何在 TypeScript 中获取用户计算机的 IP 地址？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T10:13:08.673

*假设这个 JavaScript/TypeScript 在浏览器中运行：*

JavaScript 和 TypeScript 都不会直接允许这样做：就你所知，用户可能已经离线，他在 NAT 后面，等等。

向您的服务器发出 AJAX 请求并让后端确定 IP。

# php - 如何使用 drupal 7 在 page.tpl.php 中显示图像

> ID：15861107
> 
> 赞同：1
> 
> 时间：2013-04-07T09:55:55.903
> 
> 标签：php, drupal, drupal-7, drupal-theming

我有主题，它是名称（汽车），并且在 page.tpl.php 中有图像链接，我想用简短的方式显示这个图像，任何人都可以帮助我..大多数这种方式到 node.tpl.php 但我需要使用 page.tpl.php 显示图像

```
<img src="rightgallery/img/img1_thumb.jpg" alt="motherly" /> 
```

我尝试在 template.php 文件中添加此代码

```
 // helper variable path to theme
function car_preprocess_page(&$vars) {
$vars['thefullpath'] = $GLOBALS['base_url'] . "/" . $GLOBALS['theme_path'];
} 
```

然后像这样打印路径但仍然没有工作

```
<img src="<?php print $thefullpath; ?>rightgallery/img/img1_thumb.jpg"  alt="motherly" 
```

>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T13:00:34.127

实际上有两种方法可以直接从主题的 page.tpl.php 中执行此操作（无需创建模板预处理函数）：

1-使用`<img>`标签：

```
global $base_path;
print "<img src='" . $base_path . path_to_theme() . "/img/img5.jpg' width='240' height='300' />"; 
```

2- 使用 Drupal 的`theme()`：

```
print theme("image", array(
    'path'  => path_to_theme() . "'/img/img5.jpg",
    'width' => "240",
    'height' => "300",
)); 
```

参考：

*   [$base_path](http://api.drupal.org/api/drupal/developer!globals.php/global/base_path/7)
*   [主题（）函数。](http://api.drupal.org/api/drupal/includes!theme.inc/function/theme/7)
*   [主题图像（）](http://api.drupal.org/api/drupal/includes!theme.inc/function/theme_image/7)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T11:37:20.160

像这样的正确道路

```
<li>
  <img src="<?php print  $thefullpath; ?>/rightgallery/img/img5.jpg" 
     alt="nature sent packing" width="240" height="300" />
</li> 
```

# java - zxing : 无法读取作为较大图像一部分的条形码

> ID：15861110
> 
> 赞同：2
> 
> 时间：2013-04-07T09:56:17.633
> 
> 标签：java, zxing

我正在使用 zxing 的 javase 包。在我的图像中，条形码实际上是较大图像的一部分。当我按原样提供这些图像时，zxing 无法读取条形码，但如果我将图像裁剪为条形码，则 zxing 运行良好。是否有一些可能的方法可以让 zxing 识别大图像中的条形码，而无需我提供条形码坐标。

谢谢你

例如，考虑这两张图片 - [https://www.dropbox.com/sh/heyid7mwkljrhdb/A4aFanT7Vg](https://www.dropbox.com/sh/heyid7mwkljrhdb/A4aFanT7Vg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T10:23:16.180

我能够阅读这张图片。有些只是不会偶然解码。`TRY_HARDER`如果您在台式计算机上解码，您应该尝试使用模式提示。也尝试换出不同的`Binarizer`.

# mysql - 海量sql删除查询

> ID：15861113
> 
> 赞同：2
> 
> 时间：2013-04-07T09:56:36.733
> 
> 标签：mysql, sql, optimization, sql-delete

我必须根据 id 值删除很多数据。哪个最快：

```
DELETE FROM myTable WHERE id = '10' OR id = '20' OR id = '43' OR id = '54' ....... 
```

或者

```
DELETE FROM myTable WHERE id = '10'; DELETE FROM myTable WHERE id = '20'; ........ 
```

如果您有其他解决方案，请随时告诉我。

（这里的 id 不是主键或索引，是外键，因为它引用了一个单词，我可以在这个数据库中为一个单词输入多个条目）

我使用 MySQL，但我希望我的查询可以应用于其他 RDBMS

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-07T09:58:28.480

第一个更快，但我想使用`IN`像这样的运算符更多`readability`虽然具有相同的性能

```
DELETE FROM myTable WHERE id in ('10','20','30',...) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T10:03:14.380

**第**一个应该**更快**，

**就查询优化器**的输出而言，拥有一条语句比拥有一组语句要好。

# c++ - 如何找出数组的长度？

> ID：15861115
> 
> 赞同：1
> 
> 时间：2013-04-07T09:56:46.753
> 
> 标签：c++, arrays, size

```
std::string array[] = { "one", "two", "three" }; 
```

如何找出`array`in 代码的长度？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-07T09:58:13.310

如果你有 C++11 支持，你可以使用`std::begin`and `std::end`：

```
int len = std::end(array)-std::begin(array); 
// or std::distance(std::begin(array, std::end(array)); 
```

或者，您编写自己的模板函数：

```
template< class T, size_t N >
size_t size( const T (&)[N] )
{
  return N;
}

size_t len = size(array); 
```

这将在 C++03 中工作。如果您要在 C++11 中使用它，则值得将其设为`constexpr`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-07T10:00:31.530

使用`sizeof()`- 运算符，如

```
int size = sizeof(array) / sizeof(array[0]); 
```

或者更好的是，使用它，`std::vector`因为它提供`std::vector::size()`.

```
int myints[] = {16,2,77,29};
std::vector<int> fifth (myints, myints + sizeof(myints) / sizeof(int) ); 
```

[这](http://www.cplusplus.com/reference/vector/vector/vector/)是文档。考虑基于范围的示例。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-07T10:06:29.473

C++11 提供[`std::extent`](http://en.cppreference.com/w/cpp/types/extent)了沿`N`数组第 th 维的元素数量。默认情况下，`N`为 0，因此它为您提供数组的长度：

```
std::extent<decltype(array)>::value 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-07T10:00:59.360

像这样：

```
int size = sizeof(array)/sizeof(array[0]) 
```

# file-io - 使用 ColdFusion (openBD Engine) 复制文件夹中的文件

> ID：15861116
> 
> 赞同：0
> 
> 时间：2013-04-07T09:56:47.323
> 
> 标签：file-io, coldfusion, cfml, openbd

我被要求解决以下问题：在新创建的文件夹中分批复制 3 个文件。示例：在文件夹中假设“D:/TEST_CF/”有 20 个 txt 文件。将它们除以 3（批次给我们 6 余数 2），创建 7 个文件夹（以便将 3 的批次放在 6 个文件夹中，其余 2 个文件放在第 7 个文件夹中）。到目前为止，我所做的是创建所需的文件夹。但是，我无法将文件复制到新创建的文件夹中的 3 批中。我应该如何解决上述问题？

**代码块**

```
<html>
<body>

<cfprocessingdirective pageencoding="UTF-8">

<cfset directory = "D:/TEST_CF/">
<cfdirectory directory="#directory#" name="files" action="list" type="file">
<cfset filecount = #files.RecordCount#>
<cfset divisor = 3>
<cfset division = #filecount# / #divisor#>
<cfset remainder = #filecount# MOD #divisor#>
<cfset folders_to_create = Ceiling(#division#)>

<cfoutput>

    <cfif directoryExists(directory)>
        <cfdirectory action="list" directory="#directory#" name="directories" recurse="true" type="dir" />
        <cfloop query="directories">
            <cfdirectory action="delete" directory="#directory#/#directories.name#" recurse="yes">
        </cfloop>
    </cfif>

    <cfloop from="1" to="#folders_to_create#" index="i">
        <cfdirectory
          action="create"
          directory="#directory#newfolder#i#">
    </cfloop>

    <cfif folders_to_create EQ 1>
        #folders_to_create#&nbsp;folder created
    <cfelse>
        #folders_to_create#&nbsp;folders created
    </cfif>

</cfoutput>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T04:49:52.923

正如史蒂夫所说，您需要一个循环两个或更好的函数来执行 fileMove 操作。

**笔记**

*   逻辑只是一个 POC。您可以将其改进为更好的。
*   我在CF10上试过这个代码。它也必须在 Open DB 上正常工作。

    ```
    <cfprocessingdirective pageencoding="UTF-8">

    <cfscript>
        oDirectoryPath      = "D:/test_cf/"; //original Directory path
        files               = DirectoryList(oDirectoryPath, false, 'name', '*.*');
        filecount           = Arraylen(files);
        filePerFolder       = 3;
        numfoldersToCreate  = Ceiling(filecount/filePerFolder);

        function moveFilesToThisDirectory(dir,index){
            var beginAt = 1;
            var endAt   = begin + 2;
            var newDir  = ARGUMENTS.dir;

            beginAt = ARGUMENTS.index;

            if(beginAt neq 1){
                endAt = index * VARIABLES.filePerFolder;
                beginAt = endAt - (VARIABLES.filePerFolder - 1);
                if(endAt GT VARIABLES.fileCount){
                    endAt = VARIABLES.fileCount;
                }
            }

            while(beginAt LTE endAt){
                FileMove(oDirectoryPath & '\' & files[beginAt], newDir & '\' & files[beginAt]);
                beginAt = beginAt + 1;
            }

        }
    </cfscript>

    <cfif directoryExists(oDirectoryPath)>        
            <cfdirectory action="list" directory="#oDirectoryPath#" name="directories" recurse="true" type="dir" />
            <cfloop query="directories">
                    <cfdirectory action="delete" directory="#oDirectoryPath#/#directories.name#" recurse="yes">
            </cfloop>
    </cfif>

    <cfscript>

        i = 1;
        while(i LTE numfoldersToCreate){
            newDirectoryName = "#oDirectoryPath#newfolder#i#";
            DirectoryCreate(newDirectoryName);
            moveFilesToThisDirectory(dir:newDirectoryName,index:i );
            i = i + 1;
        }

        switch(numfoldersToCreate){
            case 0:
                WriteOutput(' No folder created');
                break;
            case 1:
                WriteOutput(' 1 folder created');
                break;
            default:
                WriteOutput(numfoldersToCreate & ' folders created');
        }
    </cfscript> 
    ```

# symfony - Symfony 2 的 NelmioSolariumBundle 和 Monolog 的问题

> ID：15861118
> 
> 赞同：0
> 
> 时间：2013-04-07T09:56:54.140
> 
> 标签：symfony, solr, composer-php, monolog

我正在尝试按照[read me将](https://github.com/nelmio/NelmioSolariumBundle/blob/master/README.md)[NelmioSolariumBundle](https://github.com/nelmio/NelmioSolariumBundle)与我的 Symfony 2 应用程序一起安装，但是在我收到以下错误中注册捆绑包后：`AppKernal.php`

`ErrorException: Catchable Fatal Error: Argument 1 passed to Nelmio\SolariumBundle\Logger::setLogger() must be an instance of Psr\Log\LoggerInterface, instance of Symfony\Bridge\Monolog\Logger given, called in /var/www/vhosts/symfony.example.com/app/cache/dev/appDevDebugProjectContainer.php on line 2096 and defined in /var/www/vhosts/symfony.example.com/vendor/nelmio/solarium-bundle/Nelmio/SolariumBundle/Logger.php line 44`

经过一番挖掘，我发现[这篇文章](http://net.tutsplus.com/tutorials/php/psr-huh/)指出：

> Monolog 最近实施了 PSR-3。因此，已知要实现 PSR-3 文档中的 Psr\Log\LoggerInterface 及其相关指南。

所以现在我正在尝试更新我的 MonoLog 版本并在作曲家中收到以下错误，并且不确定从这里去哪里：

您的要求无法解决为一组可安装的软件包。

```
Problem 1
- Installation request for symfony/monolog-bundle 2.2.* -> satisfiable by symfony/monolog-bundle v2.2.0.
- Conclusion: remove symfony/symfony v2.1.9
- symfony/monolog-bundle v2.2.0 requires symfony/monolog-bridge >=2.2-beta2,<3.0 -> satisfiable by symfony/symfony v2.2.0, symfony/symfony v2.2.1, symfony/monolog-bridge v2.2.0, symfony/monolog-bridge v2.2.1.
- Can only install one of: symfony/symfony v2.2.0, symfony/symfony v2.1.9.
- Can only install one of: symfony/symfony v2.2.1, symfony/symfony v2.1.9.
- don't install symfony/monolog-bridge v2.2.0|don't install symfony/symfony v2.1.9
- don't install symfony/monolog-bridge v2.2.1|don't install symfony/symfony v2.1.9
- Installation request for symfony/symfony == 2.1.9.0 -> satisfiable by symfony/symfony v2.1.9. 
```

我需要完全更新我的 Symfony 2 版本才能让它工作吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T10:24:01.637

不幸的是，由于新的界面等原因，这两种情况都无法正常工作。所以使用 Monolog 1.4+ 需要 Symfony 2.2+ 和 MonologBu​​ndle 2.2+。

也就是说，它需要 PSR LoggerInterface 似乎是捆绑包中的一个错误，因为 Symfony 的旧接口也是兼容的。我刚刚推送了捆绑包的 v2.0.1，如果您想更新并查看它是否有效（您可以回滚对独白要求的更改）。

# c++ - 如何在矢量中打印内容

> ID：15861133
> 
> 赞同：0
> 
> 时间：2013-04-07T09:58:57.610
> 
> 标签：c++

我是 C++ 新手。我想在“向量”中打印一些值。

```
vector<GLubyte> m_coneIndices;
m_coneIndices.resize(m_bodyIndexCount + m_diskIndexCount);
vector<GLubyte>::iterator index = m_coneIndices.begin();

// Body triangles
for (int i = 0; i < coneSlices * 2; i += 2) {
    *index++ = i;
    *index++ = (i + 1) % (2 * coneSlices);
    *index++ = (i + 3) % (2 * coneSlices);
}

// Disk triangles
for (int i = 1; i < coneSlices * 2 + 1; i += 2) {
    *index++ = diskCenterIndex;
    *index++ = i;
    *index++ = (i + 2) % (2 * coneSlices);
} 
```

这就是将值存储在“向量”中的方式。我试过了

```
cout << "indices"<< "\n";

for (int i=0; i<(coneSlices * 2 ); i+=2) {

    cout << m_coneIndices[i] << ' ' << m_coneIndices[i+1] << ' ' << m_coneIndices[i+2] << ' ' << "\n";
} 
```

并打印了一些垃圾值。让我知道这段代码有什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T11:23:37.983

我做得对。我改变了代码

```
for (int i=0; i<(coneSlices * 2 ); i+=2) {

     printf("%d ",(int)m_coneIndices[i]);
} 
```

那行得通。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T10:12:12.287

用于`push_back`添加到向量中

```
vector<GLubyte> m_coneIndices;

// Body triangles
for (int i = 0; i < coneSlices * 3; i += 3) {
    m_coneIndices.push_back(i);
    m_coneIndices.push_back((i + 1) % (2 * coneSlices));
    m_coneIndices.push_back((i + 3) % (2 * coneSlices));
}

// Disk triangles
for (int i = 1; i < coneSlices * 2 + 1; i += 2) {
    m_coneIndices.push_back(diskCenterIndex);
    m_coneIndices.push_back(i);
    m_coneIndices.push_back((i + 2) % (2 * coneSlices));
} 
```

打印：

```
cout << "indices"<< "\n";

for (size_t i = 0; i< m_coneIndices.size(); i+=3) {
    cout << m_coneIndices[i*3] << ' ' << m_coneIndices[i*3+1] << ' ' <<
            m_coneIndices[i*3+2] << ' ' << "\n";
} 
```

# mysql - 防止在 IF 语句中调用函数两次

> ID：15861135
> 
> 赞同：1
> 
> 时间：2013-04-07T09:59:08.143
> 
> 标签：mysql, sql, database

我怎样才能防止这个函数执行两次，它会执行两次还是mysql对此进行优化？

```
IF(CheckTest(node.id, 1) == 0, NULL, CheckTest(node.id, 1)) as val 
```

问题我不能从函数本身返回NULL，因为返回值是一个VARCHAR，所以即使它是一个空集，也会被转换回0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T10:02:51.647

```
set @myvar := CheckTest(node.id, 1);
select if(@myvar == 0, NULL, @myvar) as val; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T10:06:44.810

虽然我认为 MySQL 会对此进行优化，但您应该使用分析器来查看发生了什么。通过 SQLyog 或类似工具运行您的查询。

还有另一种方法可以解决这种双重执行。

首先，创建一个临时表并用满足 CheckTest 条件的记录填充它。

然后，在主查询中，与该表进行连接。这样，每条记录将只执行一次测试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-07T10:08:29.100

正如@joachim-isaksson 所指出的，MySql 似乎没有对其进行优化。所以你可以使用这个：

```
SELECT
  CASE WHEN (@check:=CheckTest(node.id, 1)) = 0 THEN NULL ELSE @check END as val 
```

# mpi - 如果主机文件中的一个节点出现故障，如何在 MPI 程序中使用集群的其余节点

> ID：15861139
> 
> 赞同：1
> 
> 时间：2013-04-07T09:59:30.040
> 
> 标签：mpi, fault-tolerance

如果主机文件中的一个节点出现故障，如何使用 MPI 处理其余节点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T14:47:38.243

MPI 3 标准包括“容错”提案草案。该提案未获通过，但工作组继续取得进展。期望该提案将被采用到该标准的某些未来版本中。

我不知道有任何开源 MPI 实现为提案草案提供支持。我知道一个商业 MPI 确实完全实施了关于容错的提案草案（作为免责声明……MPI 恰好是我工作的那个）。

即使有了提案草案，“节点级”故障仍然很难恢复。当前针对节点级故障的“食谱”方法是使用检查点/重新启动和作业调度程序来自动重新启动作业。如果一个节点发生故障，该作业将自动重新安排在与上一个成功检查点不同的节点集上运行。

这种食谱方法需要强大的检查点/重启基础设施、容错共享文件系统，以及应用程序和 MPI 实现在检查点/重启过程中的积极参与。此外，并非每个 MPI 和应用程序都能够在不同的节点集上重新启动......因此这种方法可能需要在重新启动作业之前恢复故障节点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-14T14:00:36.213

正如之前的发帖者所说，没有任何“标准”的方式来处理这个问题，但是来自 MPI 论坛的容错工作组的草案已经变得相当成熟。如果您想尝试一下，目前有一个基于 Open MPI 分支的参考实现可用。很快就会有其他实现包括草案，但目前，您唯一的开源选项可在[http://www.fault-tolerance.org](http://www.fault-tolerance.org)获得。您可以在那里下载实现以及标准草案的版本和一些示例以开始使用。如果您有问题，那里也有一个邮件列表。

# ruby-on-rails - emberjs 和 Foundation4

> ID：15861140
> 
> 赞同：4
> 
> 时间：2013-04-07T09:59:38.650
> 
> 标签：ruby-on-rails, ember.js, zurb-foundation, zepto

我正在尝试使用现在正在使用 zepto 框架的 emberjs 和 Foundation 4，尽管一旦我将 emberjs 包含到我的 application.js 中，基础代码就会停止工作。包含的顺序有问题吗？

```
//= require jquery
//= require jquery-ui
//= require jquery_ujs
//= require events
//= require foundation
//= require rails.validations
//= require rails
//= require gmaps4rails/gmaps4rails.base
//= require gmaps4rails/gmaps4rails.googlemaps

//= require handlebars
//= require ember
//= require ember-data
//= require teammngt

//= require_self
TeamMngt = Ember.Application.create();
$(document).foundation(); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-06-19T01:08:43.927

## TL;博士

```
TeamMngt = Ember.Application.create({
  ready: function() {
    Ember.run.next(this, function(){ 
      $(document).foundation(); 
    });
  }
}); 
```

# 或者

创建应用程序后添加：

```
TeamMngt.ApplicationView = Ember.View.extend({
  didInsertElement: function() {    
    Ember.run.next(this, function(){ 
      $(document).foundation(); 
    })
  }
}); 
```

**注意：**将 TeamMngt 更改为您设置的任何内容`= Ember.Application.create();`

* * *

## 一些解释：

加载应用程序模板后，`didInsertElement`将触发事件。但是单独放置在`$(document).foundation()`那里是行不通的（我猜是加载/绑定的方式或其他方式）。所以我做了：

```
didInsertElement: function() {
  setTimeout(function() {
    $(document).foundation();
  }, 0);
} 
```

有一个`setTimeout()`0ms 似乎很奇怪，所以我想有一个更好的方法。因此，导致放入`$(document).foundation()`里面`Ember.run.next()`。

* * *

**致谢：** Zaxnyd
**参考：** [Ember.js Ember.View didRender 事件](https://stackoverflow.com/questions/11724350/ember-js-ember-view-didrender-event)

# c++ - 仅当行填充等于 3 个字节时，C++ 读取 BMP 文件才有效

> ID：15861142
> 
> 赞同：0
> 
> 时间：2013-04-07T10:00:05.690
> 
> 标签：c++, arrays, bmp

我在用 C++ 读取位图文件时遇到了麻烦。我的代码仅在行填充等于 3 个字节时才有效。任何其他填充都会产生奇怪的事情 - 有时我无法读取输出文件，有时我可以打开它，但它看起来像垃圾并且具有不同的宽度和高度。

这是我从位图文件中读取数据的函数：

```
void read_bmp(ImageFile* Image, const char* filename){
FILE* pFile;
unsigned char* buffer;
unsigned int bufferSize, offset_bitmapData, counter_PixelCounter=0, offset_paddingSum=0;

pFile = fopen(filename, "rb"); 
if(pFile==NULL) throw ERR_FILE_DOES_NOT_EXIST;

fseek(pFile, 0, SEEK_SET);
bufferSize = 54;
buffer = new unsigned char[bufferSize];
if(fread(buffer, sizeof(char), bufferSize, pFile)!=bufferSize) throw ERR_FILE_READING_ERROR;
if(readBytes_int(0, 2, buffer)!=0x4D42) throw ERR_NO_BMP_HEADER;

offset_bitmapData = readBytes_int(0x0A, 4, buffer);
Image->ImageWidth = readBytes_int(0x12, 4, buffer);
Image->ImageHeight = readBytes_int(0x16, 4, buffer);
Image->FileSize = readBytes_int(0x02, 4, buffer);
Image->bbpInfo = readBytes_int(0x1C, 2,buffer);
Image->Padding = (4 - (Image->ImageWidth*3)%4)%4;
cout<<"width "<<Image->ImageWidth<<endl;
cout<<"padding "<<(int)Image->Padding<<endl;

if(readBytes_int(0x0E, 4, buffer)!=40) throw ERR_NO_BITMAPINFOHEADER;

delete[] buffer;
bufferSize = Image->ImageWidth * Image->ImageHeight * 3 + Image->ImageHeight * Image->Padding;
buffer = new unsigned char[bufferSize];
if(buffer==NULL) throw ERR_BAD_ALLOC;
fseek(pFile, offset_bitmapData, SEEK_SET);

if(fread(buffer, sizeof(char), bufferSize, pFile)!=bufferSize) throw ERR_FILE_READING_ERROR;
fclose(pFile);

Image->PixelArray = new unsigned char**[Image->ImageHeight];
counter_PixelCounter = 0;

for(int height = Image->ImageHeight-1; height >= 0; height--)
{
    Image->PixelArray[height] = new unsigned char*[Image->ImageWidth];

    for(int width = 0; width < Image->ImageWidth; width++)
    {
        Image->PixelArray[height][width] = new unsigned char[3];

        Image->PixelArray[height][width][0] = (unsigned char)readBytes_int((counter_PixelCounter ) * 3  + offset_paddingSum + 2, 1, buffer);
        Image->PixelArray[height][width][1] = (unsigned char)readBytes_int((counter_PixelCounter ) * 3 + offset_paddingSum + 1, 1, buffer);
        Image->PixelArray[height][width][2] = (unsigned char)readBytes_int((counter_PixelCounter ) * 3 + offset_paddingSum, 1, buffer);

        counter_PixelCounter++;

    } 
    offset_paddingSum += Image->Padding;
}
cout<<counter_PixelCounter<<endl;
cout<<"File loaded successfully\n";
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T14:05:54.577

[文件说](http://msdn.microsoft.com/en-us/library/windows/desktop/dd183375%28v=vs.85%29.aspx)

> DIB 由两个不同的部分组成：描述位图尺寸和颜色的 BITMAPINFO 结构，以及定义位图像素的字节数组。数组中的位被打包在一起，但**每条扫描线必须用零填充以在 LONG 数据类型边界上结束**。

您的代码错误地实现了粗体子句。您正在四舍五入像素数，而不是字节数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-25T07:59:31.647

.BMP 文件中有四个字节用于描述文件地址 0x22 中填充的大小。

您可以阅读它并跳过填充。另请参阅此问题和回复： *[C++: .bmp to byte array in a file](https://stackoverflow.com/questions/10124517/c-bmp-to-byte-array-in-a-file/15637399#15637399)*

# javascript - 脚本在 Safari 中不起作用

> ID：15861147
> 
> 赞同：0
> 
> 时间：2013-04-07T10:00:52.983
> 
> 标签：javascript, jquery, safari

我在我的网页中使用了一个内容滑块，它适用于所有最新版本的 Google Chrome、Firefox 和 Internet Explorer，但由于某种原因它在 Safari 中不起作用。这是适合 Safari 的一段代码：

```
<script type="text/javascript">
$(document).ready(function(){
    $("#featured").tabs({fx:{opacity: "toggle"}}).tabs("rotate", 5000, true);
});
</script> 
```

# java - Google ocr api for android（图像到文本的转换）

> ID：15861150
> 
> 赞同：3
> 
> 时间：2013-04-07T10:01:07.913
> 
> 标签：java, android, tesseract

我尝试通过 tesseract 执行此操作，但生成的 apk 文件为 8 mb。我在 Play 中看到过 Goggles 应用程序，它非常高效。我想知道如何整合该技术。我还没有在任何教程中看到过。如果有人知道该怎么做，请回复。

另外，如何提高我正在使用的 Tesseract 的质量。转换很顺利，但我想知道如果我将图像分成几个部分然后分别解析，那会有用吗？

要求是它应该阅读账单或收据，所以我想提高文本转换的质量。请建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T11:52:51.660

我相信你编译这个项目：[tess-two](https://github.com/rmtheis/tess-two%20Tess-Two)。我对么？

如果是这样，您可以通过为特定的 CPU 架构编译不同的 APK 来大大减小 APK 的大小。此外，您可以删除 Leptonica 的大部分功能，因为您不需要它们。

为了获得更好的准确性：

*   如果您使用手机的摄像头作为输入，则应更改二值化算法。Leptonica 有一些二值化算法，试试 Sauvola。
*   调整 tesseract 的参数以获得更好的性能与速度。
*   确保您在所有手机上都有一致的分辨率。大约300dpi左右。

如果您想要在大多数手机上快速运行的小型应用程序，请考虑在服务器上而不是手机上运行 OCR。

据我所知，Tesseract 是迄今为止可以为 Android 编译的最好的 OCR 引擎。它必须正确调整并提供良好的图像。

# c# - 保存有关联合 cookie 问题的自定义信息

> ID：15861152
> 
> 赞同：2
> 
> 时间：2013-04-07T10:01:12.823
> 
> 标签：c#, asp.net-mvc-4, acs

嗨，我在 MVC4 应用程序中使用带有表单身份验证的 acs 联合。在登录期间，我的应用程序可以完美地通过 gmail 等进行 SSO 后进行身份验证并重定向到主页。我想保存其电子邮件 ID 与数据库记录的电子邮件匹配的用户的代理 ID。但问题是一段时间后代理 ID 会自动删除并声明当我尝试通过此代码从其他页面访问代理 ID 时，我添加了删除代理 ID 并显示为 null 的位置。

```
((ClaimsIdentity)HttpContext.Current.User.Identity).Claims.Where(c => c.Type.Equals(ClaimTypes.Role)).FirstOrDefault(); 
```

当用户在输入 gmail 凭据后重定向时，登录方法如下。

```
 [HttpPost]
    [ValidateInput(false)]
    [AllowAnonymous]
    public ActionResult SignIn()
    {
        UserRoles userObj=null;
        Customer customerObj=null;
        ClaimsIdentity identity = User.Identity as ClaimsIdentity;

        var claimCollection = identity.Claims;
        Dictionary<string, string> tempClaims = new Dictionary<string, string>();

        foreach (Claim claim in claimCollection)
        {
            tempClaims.Add(claim.Type, claim.Value);
        }

        if (tempClaims["http://schemas.microsoft.com/accesscontrolservice/2010/07/claims/identityprovider"] != null)
        {
            string strIdentifier = string.Empty;

            if (tempClaims["http://schemas.microsoft.com/accesscontrolservice/2010/07/claims/identityprovider"] == "uri:WindowsLiveID")
                strIdentifier = tempClaims["http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier"];
            else
                strIdentifier = tempClaims["http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress"];

            userObj = repository.Filter(f => f.EmailId.Equals(strIdentifier)).FirstOrDefault();

            if (userObj != null)
            {
                identity.AddClaim(new Claim(ClaimTypes.Role, userObj.Role));

                identity.AddClaim(new Claim(ClaimTypes.SerialNumber, userObj.AgentID.ToString()));

            }                

        }           

        return User.Identity.IsAuthenticated ? RedirectToAction("Index", "Home") : RedirectToAction("Login");

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T10:07:19.963

您似乎已将其添加`AgentID`为`ClaimTypes.SerialNumber`声明，但尚未将新主体持久保存到联合 cookie 中：

```
var principal = new ClaimsPrincipal(identity);
var token = new SessionSecurityToken(principal);
FederatedAuthentication.SessionAuthenticationModule.WriteSessionTokenToCookie(token); 
```

这`WriteSessionTokenToCookie`将使用您添加的自定义声明更新联合 cookie，以便在后续请求中您将能够检索它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T10:09:40.857

似乎您正在增加内存中的声明集，但您不会再次保留在 cookie 中。

有两种选择 - 要么您手动保留您的新声明身份，但您只是忘记显示代码，要么您不保存对联合 cookie 的更改（这解释了您的更改丢失的原因）。

看看我的一个教程，我在其中展示了如何从头开始创建声明身份并将其持久化。我希望这能给你一些关于如何处理你的增强身份的想法：

[http://netpl.blogspot.com/2012/09/forms-authentication-revisited.html](http://netpl.blogspot.com/2012/09/forms-authentication-revisited.html)

# php - 如果太大，压缩上传的图像

> ID：15861155
> 
> 赞同：0
> 
> 时间：2013-04-07T10:01:21.917
> 
> 标签：php, compression

所以我正在尝试调整我的图像上传器，以便如果图像超过 35kb 压缩它，但它似乎不起作用，不要认为我做对了，因为它总是给我错误“文件大小太大！最大为 35kb，尝试对其进行更多压缩，或者找到另一个图像。”

这是我的代码：

```
function article_top_image($article_id)
{
    global $db, $config;

    if (isset($_FILES['new_image']) && $_FILES['new_image']['error'] == 0)
    {
        if (!@fopen($_FILES['new_image']['tmp_name'], 'r'))
        {
            $this->error_message = "Could not find image, did you select one to upload?";
            return false;
        }

        else
        {
            // check the dimensions
            list($width, $height, $type, $attr) = getimagesize($_FILES['new_image']['tmp_name']);

            // check if its too big
            if ($_FILES['new_image']['size'] > 35900)
            {
                // compress it to see if we can make it smaller
                imagejpeg($_FILES['new_image']['tmp_name'], $_FILES['new_image']['tmp_name'], 50);

                // check again
                if ($_FILES['new_image']['size'] > 35900)
                {
                    $this->error_message = 'File size too big! The max is 35kb, try to use some more compression on it, or find another image.';
                    return false;
                }
            }

            else if ($width > $config['article_image_max_width'] || $height > $config['article_image_max_height'])
            {
                $this->error_message = 'Too big!';
                return false;
            }

            // this will make sure it is an image file, if it cant get an image size then its not an image
            else if (!getimagesize($_FILES['new_image']['tmp_name']))
            {
                $this->error_message = 'Not an image!';
                return false;
            }   
        }

        // see if they currently have an avatar set
        $db->sqlquery("SELECT `article_top_image` FROM `articles` WHERE `article_id` = ?", array($article_id));
        $image = $db->fetch();

        // give the image a random file name
        $imagename = rand() . 'id' . $article_id . '.jpg';

        // the actual image
        $source = $_FILES['new_image']['tmp_name'];

        // where to upload to
        $target = $_SERVER['DOCUMENT_ROOT'] . "/uploads/articles/topimages/" . $imagename;  

        if (move_uploaded_file($source, $target))
        {           
            // remove old avatar
            if ($image['article_top_image'] == 1)
            {
                unlink($_SERVER['DOCUMENT_ROOT'] . '/uploads/articles/topimages/' . $image['article_top_image_filename']);
            }

            $db->sqlquery("UPDATE `articles` SET `article_top_image` = 1, `article_top_image_filename` = ? WHERE `article_id` = ?", array($imagename, $article_id));
            return true;
        }

        else
        {
            $this->error_message = 'Could not upload file!';
            return false;
        }

        return true;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T10:12:42.930

你必须重用`filesize`. 可能需要先调用`clearstatcache`。

```
filesize($_FILES['new_image']['tmp_name']) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-08T06:49:37.163

我也在研究压缩大的图像。我正在使用以下代码。

```
function image_quality()
{
    $name = ''; $type = ''; $size = ''; $error = '';
    function compress_image($source_url, $destination_url, $quality)
    {
        $info = getimagesize($source_url);

            if ($info['mime'] == 'image/jpeg')
                    $image = imagecreatefromjpeg($source_url);

            elseif ($info['mime'] == 'image/gif')
                    $image = imagecreatefromgif($source_url);

            elseif ($info['mime'] == 'image/png')
                    $image = imagecreatefrompng($source_url);

            imagejpeg($image, $destination_url, $quality);
        return $destination_url;
    }

    $dir   = 'images_high';
    $files = scandir($dir);
    foreach($files as $image)
    {   
        $size=filesize("images_high/$image");
        if ($size <=50000)
                rename("images_high/$image","user_images/$image");

        $url = "user_images/$image";
        $filename = compress_image("images_high/$image", $url, 20);
        $buffer = file_get_contents($url);

        unlink("images_high/$image");
    }
} 
```

我希望它会帮助你。

# macos - Mac 10.7.5 上的 Homebrew OpenCV 32 位

> ID：15861156
> 
> 赞同：1
> 
> 时间：2013-04-07T10:01:26.860
> 
> 标签：macos, opencv, homebrew, 32-bit

我正在尝试使用 Homebrew 在 Mac 10.7.5 上构建 32 位 OpenCV。我试图这样做，以便我可以通过 OpenCV 中的 32 位 Macam 驱动程序访问 USB 网络摄像头。

酿酒医生：

```
$ brew doctor
Your system is raring to brew. 
```

冲泡配置：

```
$ brew --config
HOMEBREW_VERSION: 0.9.4
ORIGIN: https://github.com/mxcl/homebrew.git
HEAD: 56d86e070a60b9deac092a844993332945855027
HOMEBREW_PREFIX: /usr/local
HOMEBREW_CELLAR: /usr/local/Cellar
CPU: quad-core 64-bit sandybridge
OS X: 10.7.5-x86_64
Xcode: 4.6.1
CLT: 1.0.0.9000000000.1.1249367152
LLVM-GCC: build 2336
Clang: 4.2 build 425
X11: 2.6.5 => /usr/X11
System Ruby: 1.8.7-358
Perl: /usr/bin/perl
Python: /usr/local/bin/python => /usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/bin/python2.7
Ruby: /Users/aaron/.rvm/rubies/ruby-1.9.3-p327/bin/ruby 
```

当我尝试安装 32 位 OpenCV 时的完整控制台输出（警告，非常大的转储）： http: [//pastebin.com/hwKzKLQX](http://pastebin.com/hwKzKLQX)

brew 提到的[问题](https://github.com/mxcl/homebrew/issues/18139)没有帮助。

有人能够解释这一点并告诉我构建过程的哪一部分出了问题吗？我怎样才能得到这个工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T07:13:25.187

这看起来像是在尝试链接 32 位版本的 FFMPEG 或类似库，但没有找到它们。32 位程序需要链接到其所有库的 32 位版本。这些库可能仅构建为 64 位。关键错误如下所示。

```
ignoring file /usr/local/lib/libavcodec.dylib, file was built for unsupported file format ( 0xcf 0xfa 0xed 0xfe 0x 7 0x 0 0x 0 0x 1 0x 3 0x 0 0x 0 0x 0 0x 6 0x 0 0x 0 0x 0 ) which is not the architecture being linked (i386) 
```

您的错误消息输出有点不可靠，并且看起来像并行使作业交错输出而出现乱码。[使用Homebrew Troubleshooting Guide](https://github.com/mxcl/homebrew/wiki/Troubleshooting)中描述的单作业版本使调试更容易。

这看起来像是公式和依赖项定义的问题，与您链接的定义不同（这是关于`--32-bit`交换机一开始没有尝试构建 32 位二进制文​​件）。修复方法可能是遍历 OpenCV 所依赖的所有库（连同它们的依赖关系，传递性地）并使用`--universal`开关重新安装它们。默认情况下可能只构建它们的 64 位版本。Homebrew 没有一种机制来表达对`--universal`间接依赖的包的位数或其他构建选项（例如 ）的依赖关系。

在 OS X 10.8.3 上运行`brew install opencv --universal`时，我能够重现类似的链接错误，抱怨 libjpeg 中的符号，当我用 重建 jpeg 时`--universal`，它们清除了，只是被其他链接错误替换，这些错误通过`--universal`重建其他库，最终生成 32 位 opencv 构建。这个东西链接到很多库。

这是过程：

*   以单作业模式构建 opencv。
*   识别它未能链接到的库文件。它可能是“忽略”消息中的那个。
*   确定该文件来自哪个包。检查它及其父目录以查看它们符号链接到的位置`Cellar`
*   重建该软件包及其依赖项（如有必要），使用`--universal`
*   重复直到所有链接错误最终消失

可能有更简单的方法。当`brew`自动安装依赖项时，它将传播`--universal`开关。因此，您可以尝试删除*所有*自制软件包（首先列出它们），然后仅安装 opencv`brew install opencv --universal`并让它获取所有传递依赖项并使它们也通用，然后再安装其余的软件包。（如果您将列表保存在文本文件中，您将能够`brew`非常轻松地将其通过管道传输。）

[这可能值得在 GitHub](https://github.com/mxcl/homebrew/wiki/Troubleshooting)上的 Homebrew 问题跟踪器上报告为新问题。他们可以帮助您解决问题，并可能改进`--universal`对间接依赖项的检查，如果这就是这里发生的事情的话。或者可能是依赖检查被 opencv 本身构建`--32-bit`而不是更常见的事实所击败`--universal`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T01:55:43.353

安装时尝试`--universal`选项

# sql - SQLite 案例，如果来自子查询的结果

> ID：15861159
> 
> 赞同：1
> 
> 时间：2013-04-07T10:02:48.007
> 
> 标签：sql, sqlite, subquery, case

我在 SQLite 3 数据库中有以下 SQL 查询

```
 UPDATE Events 
  SET location = CASE 
        WHEN identifier = (SELECT id FROM users_db.exerciseLists WHERE patientId = ? AND complete = 1) 
        THEN 'yellow' 
        WHEN identifier = ? 
        THEN 'green' 
        WHEN date_start < datetime('now') 
        THEN 'red' 
        WHEN date_start > datetime('now') 
        THEN 'blue' 
        ELSE 'green' 
        END, 
  type = CASE 
        WHEN identifier = ? 
        THEN 'yes' 
        ELSE 'no' 
        END 
```

子查询

```
 (SELECT id FROM users_db.exerciseLists WHERE patientId = ? AND complete = 1) 
```

返回多个结果，但上述案例查询仅使用第一个返回的结果。

我究竟做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T10:34:07.800

如果子查询返回多个结果，并且您想更新所有返回的结果，那么最好使用 IN 语句，如下所示：

```
WHEN identifier IN (SELECT id FROM users_db.exerciseLists WHERE patientId = ? AND complete = 1) 
```

# python - 用于检查字典字典中是否存在值并采取相应操作的 Pythonic 方法

> ID：15861161
> 
> 赞同：1
> 
> 时间：2013-04-07T10:03:12.383
> 
> 标签：python

我创建了一个字典字典：

```
from collections import defaultdict
d = defaultdict(dict) 
```

现在我有一些字符串（让我们称之为 set `A`），它们有一个字符串字典（作为键）和整数（作为值）与之对应。所以上面的数据结构完全建模了这个数据。

现在我想检查`A`字典中是否存在与 key in 对应的字符串。如果它不存在，我想添加它并制作它的计数器`1`。如果它已经存在，我想增加计数器。

有没有pythonic方法可以做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T10:22:56.887

如果你有嵌套的密钥`dict`，你可以使用一个简单的`in`测试：

```
if somestring in d[key]:
    d[key][somestring] += 1
else:
    d[key][somestring] = 1 
```

但你可以使用 a[`Counter`](http://docs.python.org/2/library/collections.html#collections.Counter)代替：

```
from collections import defaultdict, Counter
d = defaultdict(Counter)

d[key][somestring] += 1 
```

与 a 一样`defaultdict`，a`Counter`为缺少的键提供默认值，默认为`0`.

柜台还有其他好处；与其循环遍历一组字符串并手动增加这些字符串的计数器，不如将整个序列传递给`.update()`适当计数器的方法：

```
d[key].update(sequence_of_strings) 
```

并且`Counter`将为您计算所有这些。

该类`Counter`是其他语言可能称为 Multi-Set 或 Bag 类型的东西。它们也支持有趣的比较和算术运算，请确保您阅读了该类型的文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T10:30:14.990

正如 Lev Levitsky 指出的那样，您想要的是使用[`Counter`](http://docs.python.org/2/library/collections.html#collections.Counter). 例如，假设您有以下字符串：

```
>>> the_strings = [
...     ('a', ('the', 'strings', 'in', 'the', 'dict')),
...     ('b', ('other', 'strings', 'in', 'the', 'dict', 'in', 'your', 'question'))
... ] 
```

你想将`'a'`一个字典与那个单词的计数相关联，你可以这样做：

```
>>> my_dict = defaultdict(Counter)
>>> for key, strings in the_strings:
...     my_dict[key].update(strings)
... 
>>> my_dict['a']['the']
2
>>> my_dict['b']['in']
2
>>> my_dict['b']['question']
1 
```

如果你想增加一个值，你可以简单地做：

```
>>> my_dict[the_string][the_word] += 1 
```

或者您可以使用以下方法自动增加迭代中每个元素的计数[`update`](http://docs.python.org/2/library/collections.html#collections.Counter.update)：

```
>>> my_dict[the_string].update(iterable_of_elements) 
```

# java - 字符串比较不成功，计算总数为 0

> ID：15861164
> 
> 赞同：-1
> 
> 时间：2013-04-07T10:03:35.317
> 
> 标签：java, inheritance

如果用户从（BIO，CIS ...）中列出的类中选择一个类，`LabCourse`它应该给出总加实验室费用（50），但我的代码总是执行总为 0 并打印`"This class don't have lab"`消息

问题可能是什么？

学院课程.java

```
public class CollegeCourse
{
String name;
int num;
int crd;
double fee;
double total;

public CollegeCourse(String n)
  {
  name =n;
  }

public double computetotal(double fee, int crd)

    {
          fee = fee * crd;
          System.out.println("Total is $" + fee);
          this.fee=fee;
          return fee;
    }

public String getname()
  {
       return name;
  }

public int getnum()
  {
       return num;
  }

public int getcrd()
  {
       return crd;
  }
    // public double getfee()
  // {
  //       return fee;
  // }
} 
```

实验室课程.java

```
public class LabCourse extends CollegeCourse
{
 double total=0;

public LabCourse(String name, double fee)
{
  super(name);
}

public void computetotal(String name)
{
   super.computetotal(fee, crd);
   if((name == "BIO") || (name == "CHM") || (name == "CIS") || (name =="PHY"))
   {
      total = fee+ 50;
      System.out.println("Total with lab is: " + total);
   }
   else 
      System.out.println("This class don't have Lab");
}
} 
```

使用课程.java

```
import javax.swing.*;
import java.util.*;
import java.util.Scanner;
public class UseCourse
{
  public static void main(String args[]) throws Exception
  {
   String name;
   int num;
   int crd;
   double fee;

   Scanner inputDevice = new Scanner(System.in);

   System.out.print("Enter Department name: ");
   name = inputDevice.next();
   System.out.print("Enter Course number: ");
   num= inputDevice.nextInt();
   System.out.print("Enter Credit hours: ");
   crd = inputDevice.nextInt();
   System.out.print("Enter fee: ");
   fee = inputDevice.nextDouble();
   System.out.print("\n\n"); 

   CollegeCourse course = new CollegeCourse(name);
   course.computetotal(fee, crd);

   LabCourse full = new LabCourse(name, fee);
   full.computetotal(name);
   }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T10:09:39.637

字符串是类。您不应该使用`==`来比较类（除非您想检查它们是否是完全相同的对象（在这种情况下，不仅仅是相同的文本））

当您尝试对字符串使用时，某些 IDE（例如[NetBeans](https://netbeans.org/)）会给您一个警告。`==`

试试`System.out.println(new String("ABC") == "ABC");`- 这将打印`false`。

改用`equals`：

```
if (name.equals("BIO") || name.equals("CHM") ||
    name.equals("CIS") || name.equals("PHY")) 
```

一个更简单的正则表达式选项：

```
if (name.matches("BIO|CHM|CIS|PHY")) 
```

[参考](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#matches%28java.lang.String%29)。

**编辑：**

另一个问题是你从来没有设置`LabCourse.fee`，但你在这里使用它：

```
super.computetotal(fee, crd); 
```

所以在构造函数中设置它：

```
public LabCourse(String name, double fee)
{
  super(name);
  this.fee = fee; // or add this as a parameter to CollegeCourse's constructor
} 
```

但是，由于`computetotal`覆盖了费用，对它的多次调用可能无法如您所愿，因此您可能希望将其作为参数传递给`computetotal`：

```
public class LabCourse extends CollegeCourse
{
  ...
  public void computetotal(String name, double fee)
  ...
} 
```

`fee`这就引出了一个问题——成为一个类变量有意义吗？或者，将代码`computetotal`放在构造函数中并摆脱`computetotal`或类似的东西可能更有意义。对于`name`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T10:09:29.377

我不确定，但是你们到底在哪里设置实验课程的费用？是的，比较字符串必须使用 String.equals() 而不是 ==。

[Java与两个字符串的==比较是假的？](https://stackoverflow.com/questions/995918/java-string-comparison)

# php - Joomla 2.5 - 按类别管理器中的顺序检索类别列表

> ID：15861166
> 
> 赞同：0
> 
> 时间：2013-04-07T10:03:52.810
> 
> 标签：php, joomla, categories

在谷歌搜索和搞砸了 2 天后，我走到了死胡同，寻找救援人员。:-) 我想获得类别，就像它们在 Joomla 后端的类别管理器中出现的顺序一样。

```
$db =& JFactory::getDBO();
$query = "select * from #__categories where extension='com_content' and title!='Uncategorised' order by parent_id,title,lft";
$db->setQuery($query);
$db->query();
$hm = $db->getNumRows();
$rows = $db->loadRowList(); 
```

我将值插入到 DDL 中，但它们的顺序有些混乱。请问有什么建议吗？非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T11:04:18.250

只需订购`lft`。这就是它在后端的类别管理器中完成的方式:-)。请参阅 /administrator/components/com_categories/models/categories.php

# c++ - 函数指针的 C++ lua 桥接问题

> ID：15861168
> 
> 赞同：1
> 
> 时间：2013-04-07T10:04:08.780
> 
> 标签：c++, lua, function-pointers

我正在尝试在 *lua_CFunction* 上创建一个简单的 c++ 包装器，它的定义如下：

```
// header
typedef int (*lua_CFunction) (lua_State* lua);
...
lua_CFunction wrap (std::function <int (Game* game)> function);
// implementation
lua_CFunction ScriptingInterface::wrap (std::function <int (Game* game)> function) 
{
    return [this, function] (lua_State* unused) -> int {
        int n_args = function (this->game);
        return n_args;
    };
}
void ScriptingInterface::registerFunction (std::string name, std::function <int (Game* game)> function) 
{
    lua_register (lua, name.c_str (), wrap (function));
} 
```

这个想法是创建这样的公共功能：

```
int setTitle (Game* interface) 
{
    const char* title = lua_tostring (interface->getScripts ()->getLuaState (), 1);

    SDL_WM_SetCaption (title, NULL);

    return 0;
} 
```

并与 lua 分享它们，例如：

`scripts->registerFunction ("setTitle", setTitle);`

*scripts*是**ScriptingInterface的一个实例**

尝试编译游戏时会出现此问题。

```
./scripting/scripting_interface.cc: In member function ‘int (* ScriptingInterface::wrap(std::function<int(Game*)>))(lua_State*)’:
./scripting/scripting_interface.cc:40:2: error: cannot convert ‘ScriptingInterface::wrap(std::function<int(Game*)>)::<lambda(lua_State*)>’ to ‘int (*)(lua_State*)’ in return
./scripting/scripting_interface.cc:41:1: warning: control reaches end of non-void function [-Wreturn-type] 
```

谁能告诉我我在这里做错了什么，因为AFAIK代码应该可以毫无问题地编译？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T10:06:50.660

问题在这里：

```
lua_CFunction ScriptingInterface::wrap(std::function<int(Game*)> function) 
{
    return [this, function] (lua_State* unused) -> int {
        int n_args = function (this->game);
        return n_args;
    };
} 
```

您正在尝试返回一个需要函数指针的 lambda，但*捕获*的lambda 无法转换为函数指针 - 并且您的 lambda 正在同时捕获`this`和`function`。根据 C++11 标准的第 5.1.2/6 段：

> **没有 lambda-capture**的 lambda 表达式的闭包类型具有一个公共的非虚拟非显式 const 转换函数，该函数指向具有与闭包类型的函数调用运算符相同的参数和返回类型的函数的指针。这个转换函数的返回值应该是一个函数的地址，当被调用时，它与调用闭包类型的函数调用运算符具有相同的效果。

不幸的是，除非您可以返回 ，否则您`std::function<int(lua_State*)>`将不得不更改您的设计。

# ios - 前台应用程序和收到推送通知时刷新当前视图？

> ID：15861170
> 
> 赞同：0
> 
> 时间：2013-04-07T10:04:13.807
> 
> 标签：ios, push-notification

我正在制作一款游戏。它是一款实时回合制游戏。用户轮到他将在游戏屏幕中等待，他的对手轮到他，然后用户将收到一个推送通知。

现在我的问题是应用程序在前台，我们有视图控制器，现在我们将如何在收到推送通知时刷新游戏板。

我的问题是我在 appdelegate 中收到回电，但是如何刷新游戏板视图控制器，该控制器是在从根视图控制器的窗口推送 2 步之后出现的。我的根视图控制器是导航控制器。

导航：窗口--> NavigationController--> OnelistViewController--> GameBoardViewController

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T10:16:11.127

你有两个选择。第一个是安排您的应用程序委托直接引用您的 GameBoardViewController 实例。这是一个可以通过[依赖注入](http://en.wikipedia.org/wiki/Dependency_injection)解决的典型问题。因此，不是从您的 OnelistViewController 创建 GameBoardController，而是在您的应用程序委托中创建它（或者理想情况下，甚至在一些除了实例化其他对象之外什么都不做的类中）并将该实例提供给您的 OnelistViewController。

另一种选择是使用 GameBoardViewController 发送通知`NSNotificationCenter`并监听该通知。如果有多个对象对推送通知感兴趣并且应用程序委托不需要知道它们，这将是分发这些推送通知的首选方式。

# android - 更新 ListView 中图像的 alpha

> ID：15861173
> 
> 赞同：0
> 
> 时间：2013-04-07T10:04:37.180
> 
> 标签：android

我正在使用带有 BaseAdapter 的 ListView。ListView 中的每一行都有一个 LinealLayout 和 2 个 ImageView。

我的问题是我需要从我的活动中更改图像的 alpha，但我没有设法做到这一点。

我试图这样做：

```
View v = listAdapter.getView(2, null, null);
ImageView img = (ImageView)v.findViewById(R.id.secondImage);
img.setAlpha(1000);
listAdapter.notifyDataSetChanged(); 
```

但在那之后，我看不到新的变化。我认为的另一种方法是使用**listView.getChildAt()**但它总是返回一个 Null 对象。什么是正确的方法？

谢谢

# c# - 检索存储过程的输出参数值时出错

> ID：15861176
> 
> 赞同：0
> 
> 时间：2013-04-07T10:05:16.330
> 
> 标签：c#, sql-server

我有一个定义如下的存储过程来检查重复电子邮件的存在：

```
 USE [SQL2008_850994_onebizness]
 GO
 /****** Object:  StoredProcedure [dbo].[EmailExists]    Script Date: 04/07/2013 15:14:22 ******/
 SET ANSI_NULLS ON
 GO
 SET QUOTED_IDENTIFIER ON
 GO

 ALTER PROCEDURE [dbo].[EmailExists]
 @EmailID Nvarchar(50),
 @Success int output, 
 @msg varchar(50) output  

 AS
 BEGIN
 IF EXISTS(SELECT 1 FROM dbo.Membership WHERE EmailId = @emailID) 
     OR EXISTS(SELECT 1 FROM dbo.Allocation where ResourceEmail=@emailID)
 begin
 set @Success=6
 set @msg='Duplicate Email found. Please try again.'      
 --Insert the records in the database
 end
 END 
```

* * *

我在 C# 代码中检索成功的值，如下所示：

```
 int returnVal = int.Parse(myCOmmand.Parameters["@Success"].ToString()); 
```

我收到错误消息“输入值的格式不正确”。

有人可以让我知道导致错误的原因吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T10:10:40.950

您是否将参数设置如下

```
myCommand.Parameters.Add(new SqlParameter("@Success", SqlDbType.Int));
myCommand.Parameters["@Success"].Direction = ParameterDirection.Output; 
```

然后检索为

```
int returnVal = (int)myCommand.Parameters["@Success"].Value; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T10:16:16.120

您需要在编写之前添加以下代码`int returnVal`

```
myCOmmand.Parameters.Add("@Success", SqlDbType.Int).Direction = ParameterDirection.Output; 
```

接着：

```
int returnVal = Convert.ToInt32(myCOmmand.Parameters["@Success"].Value); 
```

# c# - C#：如何在手动编译之前以编程方式确定缺少哪些引用？

> ID：15861177
> 
> 赞同：0
> 
> 时间：2013-04-07T10:05:43.497
> 
> 标签：c#, visual-studio, reflection

这是要求：我想创建一个自定义的 Visual Studio C# 项目模板，通过该模板创建的项目正确添加了所有引用以通过编译。

我遇到了在这种情况下会丢失一些引用的问题：如果生成的项目包含名为 DLL`MethodA`中类型的代码调用方法，但's 参数之一定义在.`AClass``A.dll``AClass.MethodA``B.dll`

**简而言之，类中方法的`A.dll`引用，编译会因为缺失而失败。`B.dll``MethodA``AClass``B.dll`**

`B.dll`任何人都知道如何找到编译目的的依赖关系的完美解决方案？

我试过`Assembly.GetReferencedAssemblies`了，但它会得到所有引用的程序集，其中大多数是不必要的。

我也尝试使用`ReflectionResolve`事件，但它也无济于事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T10:59:05.627

[Resharper](http://www.jetbrains.com/resharper/)处理这种光滑如丝绸。缺少引用会导致它在源代码窗口中显示错误，甚至会建议要引用的正确 dll。

Resharper 也有一个[API](https://stackoverflow.com/questions/3304753/resharper-api-uh-where-is-it)，如果你想自己编码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T10:11:57.143

使用[Redgate .Net Reflector](http://www.red-gate.com/products/dotnet-development/reflector/)可能是一个不错的选择。虽然它不是免费的，但您可以试用几天。

单击**分析**工具栏按钮，它将为您提供所有 dll/程序集依赖项。

# c++ - 我如何使用 NPAPI 从 JavaScript 调用 C++ 代码

> ID：15861180
> 
> 赞同：0
> 
> 时间：2013-04-07T10:06:22.320
> 
> 标签：c++, firefox, npapi, browser-plugin

我看到可以像这样从 JavaScript 调用 c++ 代码：[Calling C++ Code from DHTML](http://msdn.microsoft.com/zh-cn/library/dx3d2ftc%28v=vs.80%29.aspx)

但它是针对 IE 的，我使用 NPAPI 为 firefox 实现插件，我想通过 html 文件调用在 c++ 代码中定义的方法，我怎样才能得到它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T16:28:29.943

您可能想看看[FireBreath](http://www.firebreath.org)。这是迄今为止构建插件来做你想做的最简单的工具。除此之外，[您](http://npapi.com/tutorial2)[可以](http://npapi.com/tutorial3)[阅读一些](http://npapi.com/tutorial4)[教程](http://npapi.com/tutorial1) 来了解如何从头开始构建 NPAPI 插件，尽管这有点痛苦。

还有[nixysa](https://code.google.com/p/nixysa/)，虽然我自己从未使用过它。

不管你怎么做（我强烈推荐 FireBreath，因为一旦你有了使用它所需的工具，你就可以在 30 分钟或更短的时间内获得一个新插件）你需要向页面公开一个可编写脚本的对象。如果您直接使用 NPAPI，则意味着提供页面可以访问的 NPObject（在[教程第 3 部分中讨论）。](http://npapi.com/tutorial3)

# c# - 使用排序算法对字符串列表进行排序

> ID：15861185
> 
> 赞同：-1
> 
> 时间：2013-04-07T10:06:52.840
> 
> 标签：c#, string, algorithm, list, sorting

我想知道是否有人可以告诉我如何使用排序算法按字母顺序对字符串列表进行排序？

我知道我可以简单地使用`List<string>.Sort()`，但是了解如何将其编写为字符串排序算法会很棒。

目前，我已经了解如何实现带有整数值的排序算法，但是在处理列表中的字符串时我很挣扎。

```
 // sort a vector of type int using exchange sort
    public void ExchangeSort(int[] array)
    {
        int pass, i, n = array.Length;
        int temp;
        // make n-1 passes through the data 
        for (pass = 0; pass < n - 1; pass++)
        {
            // locate least of array[pass] ... array[n - 1]  
            // at array[pass] 
            for (i = pass + 1; i < n; i++)
            {
                if (array[i] < array[pass])
                {
                    temp = array[pass];
                    array[pass] = array[i];
                    array[i] = temp;
                }
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T10:14:01.587

您可以像您的 int 分拣机一样执行此操作，但不是

```
if (array[i] < array[pass]) 
```

你会用

```
var comp = StringComparer.InvariantCultureIgnoreCase;
....
if (comp.Compare(array[i],array[pass]) < 0) 
```

微软提供了几种[标准的字符串比较器](http://msdn.microsoft.com/en-us/library/system.stringcomparer.aspx)，例如使用当前文化、不变文化、忽略大小写等。

如果要编写自己的比较函数，最简单的方法是在 for 循环中遍历两个字符串，然后将每个字符相互比较。但是，除非严格用于学习目的，否则我不建议这样做，因为要让您自己的比较在 unicode 和不同语言的所有极端情况下正常工作是非常困难的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T10:19:22.733

字符串的比较可以通过 string.Compare 函数来完成。要手动执行此操作，可能会变得相当复杂，因为有许多不同的选项。

一种可能性是只比较 ascii 值，像这样

```
bool isLarger(string s1, string s2)
{ 
return Enumerable.Range(0, Math.Min(s1.Length, s2.Length)).SkipWhile(i => s1[i] == s2[i]).Select(i => s1[i] > s2[i]).FirstOrDefault();
} 
```

为了进行良好的比较，这里有许多选项，例如：http: [//msdn.microsoft.com/en-us/library/system.globalization.compareinfo (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/system.globalization.compareinfo(v=vs.80).aspx)

# php - 在 PHP 脚本中设置超时和文件大小值的位置

> ID：15861189
> 
> 赞同：2
> 
> 时间：2013-04-07T10:07:28.540
> 
> 标签：php, file-upload, installation

为了在 PHP 中上传大文件，我需要增加文件大小/超时值。我不是在谈论更改`php.ini`，而是在运行时进行。

对应的值为

```
ini_set('upload_max_filesize', '20M');
ini_set('post_max_size', '20M');
ini_set('max_input_time', 300);
ini_set('max_execution_time', 300); 
```

或者`void set_time_limit ( int $seconds )`

但我想知道**我需要在哪里设置这个**，或者我是否可以这样做？因为在发送上传数据时，只有在收到数据**后**才会执行脚本。所以超时开始了，在我可以增加它之前，还是我错了？

那么我需要在哪里应用设置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T10:45:44.183

并非所有 php.ini 指令都可以在运行时更改。即使他们这样做，一些指令也没有意义。

请参阅[php.ini 指令](http://www.php.net/manual/en/ini.list.php)列表。在**Changeable**列下，任何`PHP_INI_ALL`可以在运行时更改的配置（通过您的 PHP 脚本）。

如果您有权访问 php.ini 文件，请继续编辑它 - 不要为运行时更改而烦恼。但是，在某些情况下，您将需要在运行时增加特定的 PHP 配置。

`set_time_limit`将计数器重置为 0，因此您的脚本可以多次调用它。`max_execution_time`这对于在`foreach`循环中设置可能很有用。

例如，如果您必须处理一个大文件或其他东西，您可能希望增加`max_execution_time`just for the instance。

来自 php 手册`ini_set`：

> 设置给定配置选项的值。配置选项将在脚本执行期间保留此新值，并将在脚本结束时恢复。

即使您的 PHP 脚本不能有效地更改值，您的 .htaccess 文件也可以。（对于`PHP_INI_PERDIR`指令）。

请参阅[文档](http://php.net/manual/en/configuration.changes.php)。

例子：

```
<IfModule mod_php5.c>
   php_value  upload_max_filesize  2M
   php_flag magic_quotes_sybase              off
   php_flag register_globals                 off
</IfModule> 
```

同样，如果可能，请优先考虑 php.ini 文件。

# iphone - iOS 动态调整样式的 UILabel

> ID：15861190
> 
> 赞同：2
> 
> 时间：2013-04-07T10:07:33.953
> 
> 标签：iphone, ios, xcode, uilabel

`UILabel`我已经通过情节提要在我的滚动视图底部添加了一个固定的初始高度。通过`UIViewContoller`我给了`UILabel`一个白色的背景和圆角，并动态地将文本加载到标签中。

我想要做的是根据文本调整标签高度。我已经阅读了大量关于如何执行此操作的 stackoverflow 帖子，并尝试了所有这些帖子，但似乎没有一个有效。

为了解决这个问题，我使用以下代码：

```
descriptionLabel.numberOfLines = 0;
descriptionLabel.text = @"Nam nisi arcu, sodales vitae scelerisque sit amet. Nam nisi arcu, sodales vitae scelerisque sit amet. Nam nisi arcu, sodales vitae scelerisque sit amet.";
[descriptionLabel sizeToFit]; 
```

这样做的结果是标签将像这样剪切文本： ![在此处输入图像描述](https://i.stack.imgur.com/Oy5if.png)

我想到的是 sizeToFit 使用 UILabel 的初始高度来确定最大高度，所以在情节提要中我将其更改为 250。结果很奇怪，文本在标签中垂直对齐，如下所示：

![在此处输入图像描述](https://i.stack.imgur.com/ezIpM.png)

*（我无法显示标签的整个高度，因为 scrollView 将其切断）*

如果我是after`NSLog`的高度，我可以正确地看到标签的高度是 105 像素，但标签绝对没有以该高度显示。`UILabel``sizeToFit`

我非常感谢一些帮助，因为这个问题现在让我忙了一个星期。

* * *

**更新：**根据要求提供一些附加信息。

`UILabel`在通过 RESTkit 从服务器接收到一些 JSON 后调用调整大小的代码。`viewDidLoad`执行通过 加载数据的函数`dispatch_async()`。

标签的属性是：

换行：自动换
行 Autoshrink：最小字体大小 (10)
关闭字母间距并打开**Autoresize 子视图**。

容纳 的容器`UILabel`是`UIScrollView`. 我在调用**后**自动调整滚动视图的高度`sizeToFit`。

滚动视图的视图模式设置为**Scale to Fill**并打开**Autoresize subviews**。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-07T21:40:35.363

这里可能存在一些问题。

*   首先，当你这样说时：

> 我在调用 sizeToFit 后自动调整滚动视图的高度。滚动视图的视图模式设置为 Scall to Fill 并打开 Autoresize subviews。

这可能是个问题。呼叫`sizeToFit`正在尝试调整您的标签大小。但是，如果您**稍后**调整滚动视图的大小，**并且**您的滚动视图设置为**Autoresize Subviews**，那么它可能会再次调整标签的大小。 `sizeToFit`应该是您在标签上进行的*最后一次调整大小。*

*   此外，当您说*“自动调整滚动视图的高度”*时，我不是 100% 确定您的意思。我认为您应该做的是在获得 JSON 响应后，确定所有标签的大小，然后设置滚动视图的*内容大小*。滚动视图的`frame`大小（高度）不应改变。

*   如果您阅读[UILabel 文档](http://developer.apple.com/library/ios/documentation/uikit/reference/UILabel_Class/Reference/UILabel.html#//apple_ref/occ/instp/UILabel/adjustsFontSizeToFitWidth)，它会说：

> **调整FontSizeToFitWidth**
> 
> **重要提示**：如果此属性设置为 YES，则将 lineBreakMode 属性设置为导致文本换行到另一行的值是程序员错误。

因此，如果标签也设置为自动换行，您可能不应该设置该属性 ( *Autoshrink* )。

## 解决方案

无论如何，我知道您正在使用情节提要，但希望下面的代码示例可以向您展示它应该如何工作：

```
- (void)viewDidLoad
{
   [super viewDidLoad];
   // Do any additional setup after loading the view from its nib.
   self.scrollView.autoresizesSubviews = YES;
   self.scrollView.contentMode = UIViewContentModeScaleToFill;

   // simulate a network delay of 4 seconds to fetch JSON
   double delayInSeconds = 4.0;
   dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, (int64_t)(delayInSeconds * NSEC_PER_SEC));
   dispatch_after(popTime, dispatch_get_main_queue(), ^(void){
      // we have the "JSON" data
      int dfltLabelHeight = 250;  // will be resized!
      int yPadding = 10;
      int y = yPadding;
      int numLabels = 8;

      for (int i = 0; i < numLabels; i++) {
         UILabel* label = [[UILabel alloc] initWithFrame: CGRectMake(0, y,
                                                                     self.scrollView.frame.size.width, dfltLabelHeight)];
         label.lineBreakMode = NSLineBreakByWordWrapping;
         label.minimumFontSize = 10;
         label.autoresizesSubviews = YES;  // doesn't matter here
         //label.adjustsFontSizeToFitWidth = YES;
         //label.adjustsLetterSpacingToFitWidth = NO;  // this crashes on iOS 6.1
         label.numberOfLines = 0;
         label.text = @"Nam nisi arcu, sodales vitae scelerisque sit amet. Nam nisi arcu, sodales vitae scelerisque sit amet. Nam nisi arcu, sodales vitae scelerisque sit amet.";
         [self.scrollView addSubview: label];
         [label sizeToFit];

         // re-center the label horizontally
         CGRect frame = label.frame;
         frame.origin.x = (self.scrollView.frame.size.width - frame.size.width) / 2;
         label.frame = frame;

         y += yPadding + label.frame.size.height;
      }

      // adjust scroll view's virtual (content) size to fit the labels
      self.scrollView.contentSize = CGSizeMake(self.scrollView.frame.size.width, y);
   });
} 
```

## 结果

![在此处输入图像描述](https://i.stack.imgur.com/n0sT4.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T16:42:05.203

```
 UIFont *myFont = [UIFont systemFontOfSize:12];
  NSString *myText= @"Nam nisi arcu, sodales vitae scelerisque sit amet. Nam nisi arcu, sodales vitae scelerisque sit amet. Nam nisi arcu, sodales vitae scelerisque sit amet.";
  CGSize textSize = [myText sizeWithFont: myFont constrainedToSize:CGSizeMake(280, CGFLOAT_MAX) lineBreakMode:UILineBreakModeWordWrap];
  descriptionLabel.frame = CGRectMake(20, 200, 280, textSize.height);
  descriptionLabel.text = myText; 
```

# nlp - 为 SMS 文本规范化注释语料库

> ID：15861191
> 
> 赞同：1
> 
> 时间：2013-04-07T10:07:40.373
> 
> 标签：nlp, corpus

我想使用监督学习技术构建一个 SMS 文本规范器。SMS 文本规范化是将 SMS 术语转换为正确英语的任务。

例如）'重量？嗯？会变成‘怎么了？你在家吗？'。

理想情况下，我想要一个现成的语料库，其中包含 SMS 文本和随后的英文文本作为训练数据。但是，我在网上找不到任何此类公开可用的数据集。（SMS 文本语料库可用，但没有语法正确英语的相应文本）以前处理过类似问题的人似乎已经手动注释了文本。

1.  哪种方法是注释此文本的最快方法？可能，人们可以从标准短信转换网站/城市词典中为每个单词标记抓取数据，以获得等效的英语单词。但这仅适用于标准 SMS 文本，并且只会略微减少手动工作。

2.  对语料库进行分区并要求个人手动对其进行注释，但这会非常慢，尤其是对于大量文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-24T11:59:54.100

[构建带注释的语料库需要付出很多努力（请参阅本文](http://www.academia.edu/11455663/QUICK_PAD_TAGGER_AN_EFFICIENT_GRAPHICAL_USER_INTERFACE_FOR_BUILDING_ANNOTATED_CORPORA_WITH_MULTIPLE_ANNOTATION_LAYERS)中的相关工作）。你现在有选择：

*   您可以从头开始进行所有注释。（耗时长且容易出错）
*   您可以使用生成注释的工具（例如，lemmatizer），您可以更正它们。（更快的方式）

对我们来说，使用自定义注释工具很有效（见论文链接）。该工具结合了两种解决方案并加快了注释过程。

# javascript - Array.pop() 会弄乱数组的长度吗？

> ID：15861193
> 
> 赞同：6
> 
> 时间：2013-04-07T10:07:48.743
> 
> 标签：javascript

我正在ideone中尝试以下代码：

```
var a = [];
a[0] = 0;
a[5] = 5;
a[6] = undefined;
print("contents before popping:");
for(var e in a) print("\ta[", e, "] =", a[e]);
print("a.length =", a.length);
for (var i = 0; i < a.length; i++) 
    print("\ta.hasOwnProperty(", i, ") =", a.hasOwnProperty(i));

print("popping -->", a.pop());
print("popping -->", a.pop());
print("contents after popping:");
for(var e in a) print("\ta[", e, "] =", a[e]);
print("a.length =", a.length);
for (var i = 0; i < a.length; i++) 
    print("\ta.hasOwnProperty(", i, ") =", a.hasOwnProperty(i)); 
```

输出如下：

```
contents before popping:
    a[ 0 ] = 0
    a[ 5 ] = 5
    a[ 6 ] = undefined
a.length = 7
    a.hasOwnProperty( 0 ) = true
    a.hasOwnProperty( 1 ) = false
    a.hasOwnProperty( 2 ) = false
    a.hasOwnProperty( 3 ) = false
    a.hasOwnProperty( 4 ) = false
    a.hasOwnProperty( 5 ) = true
    a.hasOwnProperty( 6 ) = true
popping --> undefined
popping --> 5
contents after popping:
    a[ 0 ] = 0
a.length = 5
    a.hasOwnProperty( 0 ) = true
    a.hasOwnProperty( 1 ) = false
    a.hasOwnProperty( 2 ) = false
    a.hasOwnProperty( 3 ) = false
    a.hasOwnProperty( 4 ) = false 
```

在我的 JavaScript 书（好吧，Crockford 的）中，我读到数组的长度被计算为所有属性的最大数值。那么，当它拥有的最大数值属性是 0 时，为什么它说长度是 5？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-07T10:54:59.963

Javascript 的一个好处是它的语义在标准中得到了正式的和尽可能明确的定义。具体而言，[第 15.4 节](http://es5.github.io/#x15.4)指出：

> length 属性的值在数值上大于名称为数组索引的每个属性的名称；每当创建或更改 Array 对象的属性时，都会根据需要调整其他属性以保持此不变性。

换句话说，每次更改数组时，都会对其`length`进行调整，但是，它只保证大于`max(indexes)`，不一定等于`max(indexes)+1`。例如，无论数组实际包含多少元素， [pop 方法](http://es5.github.io/#x15.4.4.6)总是删除第`length-1`' 个元素并减一。`length`

另请注意，大多数数组方法都是通用的，并且不具体“了解”有关数组的任何内容。他们可以操作任意对象，如果这样的对象恰好有一个名为 的属性`length`，它将根据上述规则进行调整。考虑：

```
foo = {
    length: 100,
    99: 'hi'
}

alert([].pop.apply(foo)) // hi
alert(foo.length)        // 99

alert([].pop.apply(foo)) // undefined
alert(foo.length)        // 98 
```

也就是说，在您的问题的上下文中，数组的精确表示方式无关紧要 -`pop`朋友们不会使用这些信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T10:15:40.990

“*问题*”*是*`5`. _

你这样做的第二个，*Javascript 数组*被填满了用`undefined`值初始化的槽。

所以打电话

```
a[5] = 5; 
```

原因

```
[0, undefined, undefined, undefined, undefined, 5] 
```

然后你也创建`a[6]`并初始化它，`undefined`我们得到

```
[0, undefined, undefined, undefined, undefined, 5, undefined] 
```

`.length`的`7`。

现在我们调用一个*double* `.pop()`（喜欢doublepop这个词），我们得到

```
[0, undefined, undefined, undefined, undefined] 
```

`.length`**5**个

 *** * *

实际上，正如评论中指出的那样，这似乎仍然是非常奇怪的行为。初始化任何索引时，之前的插槽实际上并没有被任何东西分配。它创建一个*稀疏数组*。但是话又说回来，如果我们删除最后两个条目，则只`0`剩下*一个**值*`undefined`（**`6`**

 **我想我们需要一个实施大师:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-07T10:29:26.330

> “数组的长度计算为所有属性的最大数值”

对于数组的所有用途，这并不准确。如果您将值分配给数组中的索引，它会以这种方式工作，但如果您`length`专门设置或使用`pop`.

例子：

```
var a = [];
a.length = 5;

console.log("length =", a.length);

for (var i = 0; i < a.length; i++) 
  console.log("a.hasOwnProperty(", i, ") =", a.hasOwnProperty(i)); 
```

输出：

```
length = 5
a.hasOwnProperty(0) = false
a.hasOwnProperty(1) = false
a.hasOwnProperty(2) = false
a.hasOwnProperty(3) = false
a.hasOwnProperty(4) = false 
```

现在你有一个没有任何项目的数组，但长度是 5。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-07T10:23:15.920

这个问题实际上与您没有使用顺序索引的事实有关，而不是与您使用 pop 函数的事实有关。您会注意到，在第一次打印长度时，数组的长度为 7，尽管数组中只有 3 个项目。这与长度返回最大索引/属性 (+1) 的事实有关，因为其余值设置为未定义值。

你真的必须使用非顺序索引吗？如果是这样，您可能想尝试使用：

```
var counter = 0;
for (var i in a) {
    counter++;
  print("Property: "+i);
}
print("Total items: "+counter); 
```

但这远不是最佳的，性能方面的。****

# php - PHP标头（）不起作用

> ID：15861195
> 
> 赞同：-2
> 
> 时间：2013-04-07T10:07:55.607
> 
> 标签：php

所以最奇怪的事情正在发生，我真的很难过。我认为我不需要发布代码示例，我会告诉你原因。

我`header("location:blah.php")`在我的本地主机上运行 PHP，它工作正常。当我将所有内容迁移到我的`1and1`托管帐户时，标题标签根本不起作用。这显然与来源无关。

任何想法为什么当我把它放在我的其他主机上时它不会工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T10:20:38.250

尝试使用绝对 URI，而不是相对 URI：

```
header("Location: http://yourhost.com/blah.php"); 
```

你可以参考[http://php.net/manual/en/function.header.php](http://php.net/manual/en/function.header.php) 它说：

> HTTP/1.1 需要绝对 URI 作为 » Location 的参数：包括方案、主机名和绝对路径，但有些客户端接受相对 URI。您通常可以使用 $_SERVER['HTTP_HOST']、$_SERVER['PHP_SELF'] 和 dirname() 自己从相对的 URI 中创建绝对 URI

顺便说一句，请确保您在`header()`通话之前没有发送任何输出。甚至没有空行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T10:23:41.323

```
error_reporting(E_ALL);
if(!headers_sent()){
    header("location:blah.php");
    exit("Headers aren't set");
} else{
    exit("Headers already sent");
} 
```

试试看.. 如果标头已发送，您将收到第二条消息。如果未发送标头，则必须重定向，否则将收到第一条消息。

如果它们被发送，您必须找到它的确切位置。通常 php 错误报告会告诉您。

# wix - 将参数保存到状态

> ID：15861202
> 
> 赞同：0
> 
> 时间：2013-04-07T10:09:32.923
> 
> 标签：wix, wix3.5

在 Visual Studio 2010 中，当您使用自定义操作时，有一个字典，您可以在其中保存稍后可以在卸载期间加载的参数，例如：

```
public override void Install(IDictionary stateSaver)
{
    stateSaver.Add("ConnectionString", "Data Source=190.190.200.100,1433;Network Library=DBMSSOCN;Initial Catalog=myDataBase;
User ID=myUsername;Password=myPassword;");
}

public override void Uninstall(IDictionary savedState)
{
    string connectionString = Convert.ToString(savedState["ConnectionString"]);
} 
```

我可以在自定义操作中使用 WiX 中有什么类似的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T13:32:06.147

通常，[Remember Property Pattern](http://robmensching.com/blog/posts/2010/5/2/the-wix-toolsets-remember-property-pattern)用于跨安装记住状态。

# javascript - 如何使用 `Backbone.View.events` 定义来监听自定义子视图事件？

> ID：15861203
> 
> 赞同：5
> 
> 时间：2013-04-07T10:09:38.483
> 
> 标签：javascript, events, backbone.js

是否可以使用`Backbone.View.events`定义来监听自定义子视图事件？

**子定义**

所有`click`事件都被缓存并触发我的`clicked`功能：

```
var Child = Backbone.View.extend({
    events : {
        'click' : 'clicked'
    },
    clicked: function() {
       alert('View was clicked');
       this.trigger("customEvent");  
    },
    render: function() {
      this.$el.html("<span>Click me</span>");
    }
}); 
```

**父定义**

为什么`customEvent`事件不调用我的`action`函数？

```
var Parent = Backbone.View.extend({
    events : {
        'customEvent' : 'action'
    },
    action : function() {
       alert('My sub view triggered a custom event');  
    },
    render : function() {
      var child = new Child();
      this.$el.append(child.el);
      child.render();
    }
}); 
```

创建和渲染父级

```
var parent = new Parent();
parent.$el.appendTo(document.body);
parent.render(); 
```

[**jsfiddle 示例**](http://jsfiddle.net/YLzUJ/)

我知道可以`listenTo`改用，但使用事件定义似乎更干净。

我的意图是构建一个子视图（例如颜色选择器），它在完成后触发一个事件。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-07T10:22:32.340

快速笔记：-

*   在视图的事件对象中，我们不应该定义自定义事件。对于自定义事件，我们应该进行绑定。使用 bind() 方法或使用 on() 监听某个事件。
*   如果您的子视图的 el 元素在您的父视图的 el 中，您也可以直接监听子视图的事件，前提是您没有从子视图的事件处理程序返回 false。看看这个：[父视图在子视图上的元素上监听事件的代码](http://jsbin.com/arafeh/1/edit)

如果您只想使用自定义事件，您可以在此处查看[Your Updated Fiddle](http://jsfiddle.net/YLzUJ/1/)

```
var Child = Backbone.View.extend({
    initialize: function(options) {
        this.parent = options.parent;
    },
    events : {
        'click' : 'clicked'
    },
    clicked: function() {
       alert('View was clicked');
       this.parent.trigger("customEvent");  
    },
    render: function() {
      this.$el.html("<span>Click me</span>");
    }
});

var Parent = Backbone.View.extend({
    initialize: function() {
        this.on('customEvent', this.action);
    },
    action : function() {
       alert('My sub view triggered a custom event');  
    },
    render : function() {
      var child = new Child({parent: this});
      this.$el.append(child.el);
      child.render();
    }
});

var parent = new Parent();
parent.$el.appendTo(document.body);
parent.render(); 
```

# jsf-2 - JSF 中的 Quartz 调度程序与 TimerTask

> ID：15861206
> 
> 赞同：1
> 
> 时间：2013-04-07T10:10:04.373
> 
> 标签：jsf-2, scheduled-tasks, quartz-scheduler, timertask

我的 JSF2.0 web 中有两种类型的任务。

1.  在定义的时间仅调用第三方 Java 应用程序一次
2.  在某个指定的时间间隔内重复调用并从某个第三方应用程序获取数据，比如说 2 分钟

AFAIK JSF 支持`Quartz Scheduler`，但我们`TimerTask`在 JavaSE 中有。有人能解释一下在上述两种情况下我应该使用哪个 API 以及如何使用吗？任何示例代码？谢谢你。

# jquery - 使用 jQuery 将类添加到 li

> ID：15861207
> 
> 赞同：2
> 
> 时间：2013-04-07T10:10:30.017
> 
> 标签：jquery, class, addclass

我正在尝试`<input type="radio" />`使用 jQuery 在标签的单击事件上将类添加到标签的标签中。

```
$(".gallery ul li input").each(function () {
    $(this).click(function () {
        var lblid = ".gallery ul li";
        var inplb = ".gallery ul li input";

        if ($(inplb).is(":checked")) {
            $(lblid).addClass('active');
        }
        else {
            $(lblid).removeClass('active');
        }
    });
}); 
```

和 html

```
<div class="gallery">
  <ul>
   <li><span></span><label for="slim1"><img  src="../boo/img/banks_03.png" alt="" /></label><input type="radio" id="slim1" name="slim1" /></li>
   <li><span></span><label for="slim2"><img src="../boo/img/banks_05.png" alt="" /></label><input type="radio" id="slim2" name="slim2" /></li>
  </ul>
</div> 
```

有谁知道为什么该课程不适用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T10:14:19.937

单击标签时将触发收音机的更改事件：

```
$(".gallery ul li input").on('change', function () {
    $(".gallery ul li").removeClass('active');
    $(this).closest('li').toggleClass('active', this.checked);
}); 
```

[**小提琴**](http://jsfiddle.net/Ttjgp/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T10:19:40.457

你可以这样做：

```
$(".gallery ul li input").on('click', function () {
    $(this).parents('li').toggleClass('active').siblings().removeClass("active");
}); 
```

[演示](http://jsfiddle.net/GdjUa/1/)

# vb.net - 占位符对齐 - 获取 CallbackOnCollectedDelegate 错误

> ID：15861211
> 
> 赞同：1
> 
> 时间：2013-04-07T10:10:44.703
> 
> 标签：vb.net, delegates, callback, garbage-collection

在我在 VB.NET 中创建的 Windows 窗体中，对于其中一个文本框，我使用的代码模拟文本框中的占位符，即默认情况下在文本框中的文本，并且当用户点击文本框时，文本会消失以允许用户编写他的文本。如果用户没有写任何东西并点击了文本框，文本会重新出现。

![在此处输入图像描述](https://i.stack.imgur.com/nGTWR.png)

如您所见，占位符向右对齐。但是，根据我的代码，当用户单击文本框（文本框获得焦点）时，要输入的文本现在应该向左对齐。这是我的代码：

```
Private Sub TextBox_ProjectName_GotFocus(ByVal sender As Object, ByVal e As System.EventArgs) Handles TextBox_ProjectName.GotFocus
    If TextBox_ProjectName.Text = "(required)" Then
        TextBox_ProjectName.Text = ""
    End If
    TextBox_ProjectName.ForeColor = Color.Black
    TextBox_ProjectName.Font = New System.Drawing.Font("Microsoft Sans Serif", 8.25!, System.Drawing.FontStyle.Regular)
    TextBox_ProjectName.TextAlign = HorizontalAlignment.Left
End Sub 
```

当文本框失去焦点（用户点击文本框外）时，如果用户没有在文本框中输入任何内容，占位符会重新出现。

代码：

```
Private Sub TextBox_ProjectName_LostFocus(ByVal sender As Object, ByVal e As System.EventArgs) Handles TextBox_ProjectName.LostFocus
    If TextBox_ProjectName.Text = "" Then
        TextBox_ProjectName.Text = "(required)"
        TextBox_ProjectName.ForeColor = Color.Gray
        TextBox_ProjectName.Font = New System.Drawing.Font("Microsoft Sans Serif", 8.25!, System.Drawing.FontStyle.Italic)
        TextBox_ProjectName.TextAlign = HorizontalAlignment.Right
    End If
End Sub 
```

但是，我在`TextBox_ProjectName.TextAlign = HorizontalAlignment.Right`代码上遇到以下错误。这是在 Visual Basic 2008 中。

![在此处输入图像描述](https://i.stack.imgur.com/05q1T.png)

在 Visual Basic 2010 中，我遇到 CallbackOnCollectedDelegate 错误。

![在此处输入图像描述](https://i.stack.imgur.com/FIthA.png)

我相信这两个版本都在投射相同的错误。

任何人都可以帮助我吗？如果是这样，请包含有关什么是委托、什么是回调以及什么是垃圾收集器的信息。

## 修改了代码，删除了问题，但又出现了另一个问题。

现在，在我处理文本框的 GotFocus 的子例程中，我尝试将`If`语句之外的代码放在...里面，如下所示：

```
Private Sub TextBox_ProjectName_GotFocus(ByVal sender As Object, ByVal e As System.EventArgs) Handles TextBox_ProjectName.GotFocus
    If TextBox_ProjectName.Text = "(required)" Then
        TextBox_ProjectName.Text = ""
        TextBox_ProjectName.ForeColor = Color.Black
        TextBox_ProjectName.Font = New System.Drawing.Font("Microsoft Sans Serif", 8.25!, System.Drawing.FontStyle.Regular)
        TextBox_ProjectName.TextAlign = HorizontalAlignment.Left
    End If
End Sub 
```

处理文本框的 LostFocus 的子程序保持不变。

```
Private Sub TextBox_ProjectName_LostFocus(ByVal sender As Object, ByVal e As System.EventArgs) Handles TextBox_ProjectName.LostFocus
    If TextBox_ProjectName.Text = "" Then
        TextBox_ProjectName.Text = "(required)"
        TextBox_ProjectName.ForeColor = Color.Gray
        TextBox_ProjectName.Font = New System.Drawing.Font("Microsoft Sans Serif", 8.25!, System.Drawing.FontStyle.Italic)
        TextBox_ProjectName.TextAlign = HorizontalAlignment.Right
    End If
End Sub 
```

我现在遇到的问题是在获得焦点的文本框上，文本没有向左对齐并且没有获得“常规”字体样式。

![在此处输入图像描述](https://i.stack.imgur.com/fYKxJ.png)

但是，如果我`TextBox_ProjectName.TextAlign = HorizontalAlignment.Right`在子例程中注释代码`LostFocus`，则文本成功地向左对齐并变为“常规”样式，但随后，在文本框失去焦点且用户未输入任何内容时，占位符现在显然已对齐到左边，这使得它很难看，因为以前它是向右对齐的。

![在此处输入图像描述](https://i.stack.imgur.com/zWb9Y.png)

![在此处输入图像描述](https://i.stack.imgur.com/tb4iu.png)

![在此处输入图像描述](https://i.stack.imgur.com/BlRYH.png)

这里有什么问题？为什么没有评论时文本不左对齐？

我知道我在这里发布了一个很长的问题。对不起。但是，如果只解决问题的第一部分，我会很高兴。第二部分可以作为补充。

任何帮助将不胜感激。谢谢你。

# mysql - Mysql：将记录从源表更新到目标表

> ID：15861214
> 
> 赞同：1
> 
> 时间：2013-04-07T10:11:22.940
> 
> 标签：mysql

我有两张相同的桌子。'Number' 和 'Productcode' 字段构成唯一键。这个唯一的组合键是两个表相同的。

我想将表 2 中的记录插入表 1。可能是记录唯一键已经存在。在这种情况下，需要为所有字段更新记录。但是...仅当表 2 记录中的日期字段比表 1 中的日期字段更新时才需要更新记录。

我尝试了以下方法：

```
INSERT INTO Table_dest (Number, Productcode, TransactionDate,
                        TransactionTime, Price)
SELECT
  Number, Productcode, TransactionDate, TransactionTime, Price
FROM
  Table_source
WHERE
  Table_source.TransactionDate >= Table_dest.TransactionDate
  AND Table_source.TransactionTime > Table_dest.TransactionTime; 
```

但它给了我关于 WHERE 子句的错误。它还会在重复项上给出错误，但我不知道如何解决。有人有什么建议吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T10:19:25.193

连接两个表时应遵循此格式：

```
INSERT INTO tableA (a1, a2, a3)

SELECT b1, b2, b3
FROM tableB b
JOIN tableA a ON a.a1 = b.b1
WHERE (CONDITION) 
```

看看它是否适合你。

# php - 为什么这种使用 PDO 计算 Mysql 行数的方法不起作用？

> ID：15861219
> 
> 赞同：2
> 
> 时间：2013-04-07T10:12:07.553
> 
> 标签：php, mysql, select, pdo, count

我正在尝试`SELECT`使用 PDO 计算从语句返回的行数。

```
$stmt = $dbh->prepare("SELECT * FROM posts WHERE cat_id= ?");
$stmt->bindParam(1,$cat_id);
$stmt->execute();

$rows = $stmt->fetchAll();
$count_posts = count($rows);
return $count_posts; 
```

我使用`fetchAll()`然后`count()`计数，但它不起作用。当我回显它时，它会回显`0`。我以为数组是`$rows`，那`$count_posts`将是该数组的计数？

`echo $count_posts = count_cat_posts($cat_id);`

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T10:23:04.670

1.  **永远**不应使用此方法来计算数据库中的行数。如果您以后需要使用所有这些行，并且只想先计算它们，那也没关系。但永远不要只用它来计数。
2.  人们必须选择**他们需要的数据，**而不是别的。如果您需要行数 - 然后选择行数，

    ```
    SELECT  count(1) FROM posts WHERE cat_id= ? 
    ```

    然后使用`fetchColumn()`

3.  至于代码中的特定错误 - 它似乎只是一个愚蠢的错字。很可能您不是在回显 $count_posts 而是 $rows （根据`Array`您提到的词判断）。
4.  好吧，在您写完答案后看到问题的基本部分被编辑总是令人惊奇。
    如果您的计数为 0 - 所选类别下没有行，或者其他**类似**错字的错误
5.  无论如何，您不应该选择所有表数据来仅获取计数

# objective-c - 如何正确处理程序开头创建、结尾删除的CF对象

> ID：15861222
> 
> 赞同：2
> 
> 时间：2013-04-07T10:12:24.137
> 
> 标签：objective-c, xcode4.5

我放

我声明 `@property (nonatomic) ABAddressBookRef addressBook;`为类扩展的属性

```
-(void)dealloc
{
    [[NSNotificationCenter defaultCenter]removeObserver:self];

    CFRelease(self.addressBook);
} 
```

然后在仅由 viewDidLoad 调用的函数中，我添加：-(void) vCreateAddressBookAndPopulateContact

```
{
    self.addressBook = ABAddressBookCreate(); //will be released at dealloc
    [self vPopulateContact];
} 
```

它给了我警告：在分配时：

```
Object leaked: allocated object is not referenced later in this execution path and has a retain count of +1 
```

解除分配时：

```
Incorrect decrement of the reference count of an object that is not owned at this point by the caller 
```

所以我该怎么做？如何告诉编译器该对象稍后将在 dealloc 时被取消引用？

我希望我可以将那个 ABAddressBookRef 移到 ARC/NS 土地上。但是没有办法这样做。

self.addressBook 无法在函数中释放。那是因为如果我想添加或删除

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T10:50:24.513

*（这更像是一种解决方法，也许其他人有更好的答案。）*

`addressBook`如果您不将 at 定义为属性而是定义为实例变量（可能在类扩展中），则不会出现问题：

```
@interface YourClass () {
    ABAddressBookRef addressBook;
} 
```

财产的问题在于

```
self.addressBook = ABAddressBookCreate();
// ...
CFRelease(self.addressBook); 
```

被翻译成

```
[self setAddressBook:ABAddressBookCreate()];
// ...
CFRelease([self addressBook]); 
```

因此静态分析器此时不会“看到”地址簿引用保存在某个实例变量中。

*备注：*在`dealloc`中，您应该检查`addressBook`不是`NULL`

```
if (addressBook != NULL)
    CFRelease(addressBook); 
```

以避免在变量尚未初始化的情况下崩溃`viewDidLoad`。

*更新：（*受@11684 评论的启发！）您还可以保留您的财产，并使用关联的实例变量仅用于创建和发布：

```
_addressBook = ABAddressBookCreate();
// ...
if (_addressBook != nil)
    CFRelease(_addressBook); 
```

在这种情况下，将属性定义为“只读”是有意义的。

# ruby-on-rails - 覆盖 _path rails 辅助方法

> ID：15861223
> 
> 赞同：0
> 
> 时间：2013-04-07T10:12:38.807
> 
> 标签：ruby-on-rails

在 post 表和我的视图文件中，数据库中有一个名为 photo_path 的列，我在其中显示了我拥有的所有帖子：

```
<% if post.photo_path != 0 %> 
```

也就是说，如果该特定帖子没有照片。但问题是，我与 rails helper 方法发生冲突。它将我的代码转换为

```
<%= if /uploads/post/photo_path/1/0 != 0 %> 
```

我如何使它使用数据库列 photo_path 而不是 photo_path 辅助方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T10:18:07.070

!= 0 是非常糟糕的语法，请改用“.blank?” 或“.present？” 方法。

您的帖子模型与照片模型相关联吗？如果是，为什么在 db 中需要此列？从数据库中删除此列或将其重命名为人名。也许它更简单的用户？：

```
<% if post.photos.present? %>
....... 
```

# java - IdentityHashMap 和 expectedmaxsize

> ID：15861227
> 
> 赞同：3
> 
> 时间：2013-04-07T10:13:18.330
> 
> 标签：java, collections

我一直在浏览[`IdentityHashMap`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/IdentityHashMap.html). 该类有一个[构造函数](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/IdentityHashMap.html#%3Cinit%3E(int))，它采用`expectedmaxsize`.

```
public IdentityHashMap(int expectedMaxSize); 
```

在内部，Java 用于`expectedmaxsize`计算容量，如下所示：

```
// Compute min capacity for expectedMaxSize given a load factor of 2/3
int minCapacity = (3 * expectedMaxSize)/2; 
```

在进一步探索中，我发现用户应该传递一个很好的值，`expectedmaxsize` 因此`IdentityHashMap`不会随着更多元素的添加而调整大小。

将此与[`HashMap`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/HashMap.html), 其[构造函数](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/HashMap.html#%3Cinit%3E(int))接受`initialCapacity`：

```
 public HashMap(int initialCapacity) 
```

…以及另一个接受and的[构造函数](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/HashMap.html#%3Cinit%3E(int,float))：`loadfactor``initialcapacity`

```
 public HashMap(int initialCapacity, float loadFactor) 
```

......这里`HashMap`没有关于`initialcapacity`.

`HashMap`很明显，内部数组的大小在和中管理的方式有所不同`IdentityHashMap`。我不明白为什么我们会有这种差异？为什么不能`IdentityHashMap`提供与 相同的构造函数`HashMap`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T10:45:20.430

[`IdentityHashMap`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/IdentityHashMap.html)从 JDK 1.4 开始，而[`HashMap`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/HashMap.html)从 JDK 1.2 开始。与此同时，[Java Collections Framework](https://en.wikipedia.org/wiki/Java_collections_framework)的作者可能意识到传递预期的最大大小比传递容量更自然、更频繁且对开发人员友好得多。

但是传递容量或最大大小基本上是一样的：

```
max size = capacity * load factor. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T11:02:56.473

正如 JB Nizet 所说，各个构造函数 API 的差异是由于设计人员对程序员最容易理解的内容进行了“重新思考”。（旧方法不必要地暴露了内部设计的各个方面。）

> 很明显，HashMap 和 IdentityHashMap 管理内部数组大小的方式有所不同。

这是一个错误的推论，事实上它是不正确的。如果你仔细看各自的代码，[`HashMap`](http://www.docjar.com/html/api/java/util/HashMap.java.html)初始[`IdentityHashMap`](http://www.docjar.com/html/api/java/util/IdentityHashMap.java.html)大小和调整大小的代码是不同的，但逻辑基本相同。根据参数确定初始数组大小，然后在达到阈值时将数组大小加倍。（这是我对代码的阅读......但您可以使用上面的链接自己检查。）

javadoc 中没有包含这些内容的原因`IdentityHashMap`是不再需要它。在这种`HashMap`情况下，材料必须在那里，以便程序员知道构造函数参数的含义。简化构造函数参数意味着他们*不需要*解释这一点。所以（我想）他们决定将实际的大小调整机制视为“实施细节”，而不是使其成为“合同”的一部分。

# android - 从 Service 访问 findViewById

> ID：15861229
> 
> 赞同：2
> 
> 时间：2013-04-07T10:13:50.657
> 
> 标签：android, service

我想`findViewById()`从服务访问而不将其作为参数或意图传递给服务的构造函数，这可能吗？

她我的代码：

```
public class ManageDataService extends Service implements LocationListener {
    public void onCreate() {
        TextView longitudeField = (TextView) findViewById(R.id.overview_position_longitude);
    }
} 
```

我必须以某种方式获取 Activity 的上下文，对吗？

我在互联网上没有找到任何匹配的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T10:29:35.317

更新 UI 表单服务真是个坏主意。我认为解决这个问题的好方法是使用 BroadcastReceivers 数据观察者。只需为您的活动注册一个并传递值以更新 UI。

# c# - 放大和缩小画布的所有子项？

> ID：15861233
> 
> 赞同：0
> 
> 时间：2013-04-07T10:14:28.800
> 
> 标签：c#, windows-phone-7, xaml

我在使用 Canvas 事件 ManipulationDelta 时遇到了一些问题，它似乎是用于操作整个画布本身的函数。

我正在寻找一个我用两根手指捏屏幕的事件。在捏它应该放大或缩小该画布元素的孩子。

有没有办法用 xaml/c# 开箱即用地做到这一点，或者我最好用一个 lib，在这种情况下是哪个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T10:55:04.637

由于您的目标是 Windows Phone 7，因此您可以通过 Toolkit.GestureService 检测手势。在本文中了解更多信息：[深入了解 WP7 GestureService | 关键概念和 API](http://www.geekchamp.com/articles/wp7-gestureservice-in-depth--key-concepts-and-api)。

不幸的是，对于 Windows Phone 8，您必须自己进行手势检测，目前还没有手势 API。

# java - 使用 LTI-CIVIL 库从网络摄像头捕获图像

> ID：15861234
> 
> 赞同：1
> 
> 时间：2013-04-07T10:14:36.220
> 
> 标签：java, lti

我正在运行 code eto 使用 LTI-CIVIL 库捕获图像..

这是代码...

```
public class TestWebCam implements CaptureObserver {

    JButton start = null;
    JButton shot = null;
    JButton stop = null;
    CaptureStream captureStream = null;
    boolean takeShot = false;

    public TestWebCam() {
        CaptureSystemFactory factory = DefaultCaptureSystemFactorySingleton.instance();
        CaptureSystem system;
        try {
            system = factory.createCaptureSystem();
            system.init();
            List list = system.getCaptureDeviceInfoList();
            int i = 0;
            if (i < list.size()) {
                CaptureDeviceInfo info = (CaptureDeviceInfo) list.get(i);
                System.out.println((new StringBuilder()).append("Device ID ").append(i).append(": ").append(info.getDeviceID()).toString());
                System.out.println((new StringBuilder()).append("Description ").append(i).append(": ").append(info.getDescription()).toString());
                captureStream = system.openCaptureDeviceStream(info.getDeviceID());
                captureStream.setObserver(TestWebCam.this);
            }
        } catch (CaptureException ex) {
            ex.printStackTrace();
        }
//UI work of the program
        JFrame frame = new JFrame();
        frame.setSize(7000, 800);
        JPanel panel = new JPanel();
        frame.setContentPane(panel);
        frame.setVisible(true);
        frame.setDefaultCloseOperation(WindowConstants.DISPOSE_ON_CLOSE);
        start = new JButton("Start");
        stop = new JButton("Stop");
        shot = new JButton("Shot");
        panel.add(start);
        panel.add(stop);
        panel.add(shot);
        panel.revalidate();
        start.addActionListener(new ActionListener() {

            public void actionPerformed(ActionEvent e) {
                try {
                    captureStream.start();
                } catch (CaptureException ex) {
                    ex.printStackTrace();

                }
            }
        });
        stop.addActionListener(new ActionListener() {

            public void actionPerformed(ActionEvent e) {
                try {
                    captureStream.stop();
                } catch (CaptureException ex) {
                    ex.printStackTrace();
                }
            }
        });
        shot.addActionListener(new ActionListener() {

            public void actionPerformed(ActionEvent e) {
                takeShot = true;
            }
        });
    }

    public void onNewImage(CaptureStream stream, Image image) {

        if (!takeShot) {
            return;
        }
        takeShot = false;
        System.out.println("New Image Captured");
        byte bytes[] = null;
        try {
            if (image == null) {
                bytes = null;
                return;
            }
            try {
                ByteArrayOutputStream os = new ByteArrayOutputStream();
                JPEGImageEncoder jpeg = JPEGCodec.createJPEGEncoder(os);
                jpeg.encode(AWTImageConverter.toBufferedImage(image));
                os.close();
                bytes = os.toByteArray();
            } catch (IOException e) {
                e.printStackTrace();
                bytes = null;
            } catch (Throwable t) {
                t.printStackTrace();
                bytes = null;
            }
            if (bytes == null) {
                return;
            }
            ByteArrayInputStream is = new ByteArrayInputStream(bytes);
            File file = new File("/img" + Calendar.getInstance().getTimeInMillis() + ".jpg");
            FileOutputStream fos = new FileOutputStream(file);
            fos.write(bytes);
            fos.close();
            BufferedImage myImage = ImageIO.read(file);
            shot.setText("");
            shot.setIcon(new ImageIcon(myImage));
            shot.revalidate();
        } catch (IOException ex) {
            ex.printStackTrace();
        }
    }

    public void onError(CaptureStream arg0, CaptureException arg1) {
        throw new UnsupportedOperationException("Error is coming ");

    }

    public static void main(String args[])
            throws Exception {
        TestWebCam test = new TestWebCam();

    }
} 
```

我收到一个错误...

```
com.lti.civil.CaptureException: java.lang.UnsatisfiedLinkError: no civil in java.library.path
        at com.lti.civil.impl.jni.NativeCaptureSystemFactory.createCaptureSystem(NativeCaptureSystemFactory.java:24)
        at attendance.TestWebCam.<init>(TestWebCam.java:51)
        at attendance.TestWebCam.main(TestWebCam.java:160)
Caused by: java.lang.UnsatisfiedLinkError: no civil in java.library.path
        at java.lang.ClassLoader.loadLibrary(ClassLoader.java:1860)
        at java.lang.Runtime.loadLibrary0(Runtime.java:845)
        at java.lang.System.loadLibrary(System.java:1084)
        at com.lti.civil.impl.jni.NativeCaptureSystemFactory.createCaptureSystem(NativeCaptureSystemFactory.java:21)
        ... 2 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T10:28:51.570

得到了解决方案..我的是一台 64 位机器，为此我们需要将 Civil.dll 粘贴到 syswow64 文件夹而不是 system32 中。

# java - JTabbedPane 将不同的类构造函数添加到选项卡

> ID：15861237
> 
> 赞同：1
> 
> 时间：2013-04-07T10:15:01.033
> 
> 标签：java, swing, constructor, jtabbedpane

我正在尝试创建一个带有选项卡和菜单栏的框架，每个选项卡将包含一个不同的`JTable`，我想知道是否可以将不同类的构造函数添加到选项卡？我是说：

```
public class Administrator() {
JFrame frame;
JTabbedPanel tabPan;
JPanel firstTab, secondTab;
JMenuBar menuBar;
JMenu menu;
JMenuItem mi1;
Administrator() {
  frame = new JFrame("Test");
  frame.setDefaultClopseOperation(JFrame.EXIT_ON_CLOSE);
  tabPan = new JTabbedPane();
  firstTab = new JPanel();
  secondTab = new JPanel();
  menuBar = new JMenuBar();
  menu = new JMenu("Menu");
  mi1 = new JMenuItem("1");
  menu.add(mi1);
  menuBar.add(menu);
  frame.addJMenuBar(menuBar);
  tabPan.addTab("First",firstTab);
  tabPan.addTab("Second",secondTab);
  frame.setVisible(true);
 }
 public static void main(String[] args) {
  new Administrator();
 } 
```

然后是第二（第一）类：

```
public class First() {
  JTable firstTable = new JTable();
  //....
  First() {
  //...
  firstTab.add(firstTable);
  //...
}
} 
```

**编辑**

好的，我找到了一种方法，[使用多个类的 Jtabbedpane](https://stackoverflow.com/questions/13575456/jtabbedpane-using-multiple-classes)，但现在我有一个不同的问题，我如何`JMenuBar`从主类中使用？我扩展了 JPanel，而不是类，我可以在其他类中以某种方式使用它们吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T11:26:09.700

使用 JMenuBar 是什么意思？我建议研究 OOP 和封装。YouTube 上有一个人，我认为他在涵盖此类内容以及几种设计模式方面做得非常出色，我相信频道名称是 DerekBanas。如果你用谷歌搜索，他会出现。

对您的问题的快速回答是，您将想要将某些内容传递给 JPanel 类的构造函数，或者将 main 方法放在 JPanel 类中，这是一种方法的快速示例......

JMenuItem 是 - 添加新记录，在第一个选项卡中，当我选择这个 JMenuItem 时，他会打开一个框架，其中是 JLabel 和 JTextField。然后是第二个选项卡，我单击同一个 JMenuItem，它会召唤新的 JFrame，它有自己的 JLabel 和 JTextField。

```
public class TestFrame extends JFrame {

    private ActionManager actionManager

    private JMenuBar mb;
    private JMenu file;
    private JMenuItem openDialog1;
    private JMenuItem openDialog2;

    public TestFrame() {

        this.actionManager = new ActionManager();

        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setContentPanel(panel);
        setJMenuBar(createMenuBar());
        pack();
    }

    private JMenuBar createMenuBar() {
        mb = new JMenuBar();
        file = new JMenu("File");
        openDialog2 = new JMenuItem("Open Dialog 2");
        openDialog1 = new JMenuItem("Open Dialog 1");
        openDialog2.addActionListener(actionManager.openDialog2Action);
        openDialog1.addActionListener(actionManager.openDialog1Action);

        //here i would add conditional code that added the correct
        //menus to the menubar and menuitems to the correct menus and call
        //this method from a `ChangeListener` that listens for tab changes so
        //it recreates a new menu with the correct components for the selected
        //tab but i added them to the same menu to demonstrate using specific actions
        //for each menu item, it doesn't matter which menu they're attached to their
        //action wont be called unless that JMenuItem is clicked. 
        //this method can be used for any type of button as well, commonly with
        //toolbars, so you can reuse actions like copy, paste, new, open, save, etc

        file.add(openDialog1);
        file.add(openDialog1);
        mb.add(file);

        return mb;
    }

    public static void main(String[] args) {
        TestFrame frame = new TestFrame();
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);
    }
} 
```

和面板类...

```
public class ActionManager {

    public ActionManager() {

    }

    Action openDialog1Action = new AbstractAction("Open Dialog 1") {
        JOptionPane.showMessageDialog(null, "Dialog 1");
    }

    Action openDialog2Action = new AbstractAction("Open Dialog 2") {
        JOptionPane.showMessageDialog(null, "Dialog 2");
    }

} 
```

这段代码所做的只是使用公共方法访问类中的私有字段（封装），并将 TestFrame 对象传递给 TestPanel 构造函数，因此我们可以使用 TestPanel 类的 TestFrame 中的 getter 方法。我还将 ActionListener 添加为 TestPanel 类的一部分，因为这是在面板类中使用菜单栏组件的另一种方式。你能具体告诉我你想要完成什么，或者可能发布你当前代码的一小部分吗？这是执行您所要求的几种方法之一，但它可能不是首选方式，具体取决于您首先要从面板访问它们的原因，您的问题越具体，我能得到的帮助就越多。祝你好运。

# perl - 为什么我的 Perl 脚本在 EOF 之前的任何位置都给出错误“无法找到字符串终止符”_HTML_”？

> ID：15861240
> 
> 赞同：-1
> 
> 时间：2013-04-07T10:15:21.207
> 
> 标签：perl, cgi, heredoc

嗨，我刚刚`IF`在我的源代码中添加了一个条件，从那以后我收到了错误

> `_HTML_`“在 EOF 之前的任何地方都找不到字符串终止符”

但如果我删除它，它会起作用`IF`

我是 Perl 和 CGI​​ 的新手，我不知道如何解决这个错误。

这是我的代码：

```
#!"\xampp\perl\bin\perl.exe"

use CGI qw/:standard/;
use CGI::Cookie;

%cookies = CGI::Cookie->fetch;
$Cookie = $cookies{'USER'}->value;

if ($Cookie)
{

    print "Content-type: text/html\n\n";
    print<<_HTML_;

    <!DOCTYPE html>
    <!--[if lt IE 7 ]> <html lang="en" class="no-js ie6 lt8"> <![endif]-->
    <!--[if IE 7 ]>    <html lang="en" class="no-js ie7 lt8"> <![endif]-->
    <!--[if IE 8 ]>    <html lang="en" class="no-js ie8 lt8"> <![endif]-->
    <!--[if IE 9 ]>    <html lang="en" class="no-js ie9"> <![endif]-->
    <!--[if (gt IE 9)|!(IE)]><!--> <html lang="en" class="no-js"> <!--<![endif]-->
        <head>
            <meta charset="UTF-8" />
            <!-- <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">  -->
            <title>Login and Registration Form with HTML5 and CSS3</title>
            <meta name="viewport" content="width=device-width, initial-scale=1.0"> 

            <link rel="shortcut icon" href="../favicon.ico"> 
            <link rel="stylesheet" type="text/css" href="css/loginpage.css" />
            <link rel="stylesheet" type="text/css" href="css/style.css" />
            <link rel="stylesheet" type="text/css" href="css/animate-custom.css" />
        </head>
        <body>
            <div class="container">
                <header>
                    <h1>User's Login Panel</h1>

                    <span>Enter your details below</span>
                </header>
                <section>               
                    <div id="container_demo" >

                        <a class="hiddenanchor" id="toregister"></a>
                        <a class="hiddenanchor" id="tologin"></a>
                        <div id="wrapper">
                            <div id="login" class="animate form">
                                <form  action="/cgi-bin/Project/logincheck.pl" method="post" autocomplete="on"> 
                                    <h1>Log in</h1> 
                                    <p> 
                                        <label for="username" class="uname" data-icon="u" > Your email or username </label>
                                        <input id="username" name="username" required type="text" placeholder="myusername or mymail@mail.com"/>
                                    </p>
                                    <p> 
                                        <label for="password" class="youpasswd" data-icon="p"> Your password </label>
                                        <input id="password" name="password" required type="password" placeholder="eg. X8df!90EO" /> 
                                    </p>
                                    <p class="keeplogin"> 
                                        <input type="checkbox" name="loginkeeping" id="loginkeeping" value="loginkeeping" /> 
                                        <label for="loginkeeping">Keep me logged in</label>
                                    </p>
                                    <p class="login button"> 
                                        <input type="submit" value="Login" /> 
                                    </p>
                                    <p class="change_link">
                                        Trouble Logging in?
                                        <a href="#toregister" class="to_register">Reset Your Password </a>
                                    </p>
                                </form>
                            </div>

                            <div id="register" class="animate form">
                                <form  action="mysuperscript.php" autocomplete="on"> 
                                    <h1>Trouble Logging In?</h1> 

                                    <p> 
                                        <label for="emailsignup" class="youmail" data-icon="e" > Your email</label>
                                        <input id="emailsignup" name="emailsignup" required type="email" placeholder="mysupermail@mail.com"/> 
                                    </p>

                                    <p class="forgotpass "> 
                                        <input class="buttonpass" type="submit" value="Send Password Reset Instructions"/> 
                                    </p>
                                    <p class="change_link">  
                                        Oh Wait My Brain Cells Started Tickling!
                                        <a href="#tologin" class="to_register"> Go and log in </a>
                                    </p>
                                </form>
                            </div>

                        </div>
                    </div>  
                </section>
            </div>
        </body>
    </html>

    _HTML_
}
exit; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-07T10:22:11.677

```
 _HTML_
}
exit; 
```

应该

```
_HTML_
}
exit; 
```

但是，请不要在`if`.

作为更好的选择，请执行以下操作：

```
use constant _HTML_ => <<_HTML_;
   <!DOCTYPE html>
    <!--[if lt IE 7 ]> <html lang="en" class="no-js ie6 lt8"> <![endif]-->
...
_HTML_ 
```

作为更好的选择，将代码与内容完全分开。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-07T10:19:50.980

HEREDOC 在整行上查找匹配项。它不会忽略前导空格。你需要：

```
 print<<_HTML_;
        bla
_HTML_ 
```

您还可以使制表符/空格成为 HEREDOC 字符串的一部分：

```
 print<<"    _HTML_";
        bla
    _HTML_ 
```

# maple - 如何用 maple 12 绘制和求解这个微分方程？

> ID：15861248
> 
> 赞同：1
> 
> 时间：2013-04-07T10:16:20.320
> 
> 标签：maple, differential-equations

`$y^{\prime}=y-2$`考虑初始条件为 的微分方程`$y\left(0\right)=1$`。

a) 使用欧拉法进行 4 步大小为 0.2 的估计`$y\left(0.8\right)$`

我知道如何手动做到这一点；但是，我安装了 Maple 12，并试图弄清楚如何使用 Maple 执行此操作，然后制作一个图表来显示该功能的每个步骤。有什么建议么。我曾尝试查看 mapleprimes，但它一直指向我没有的新版本 maplesoft 的功能。

我发布了这个问题作为模型使用，因为我已经手动解决了这个问题，它将帮助我为其他微分方程编辑它。

附言。我希望这是问这个问题的合适地方，如果不是，请告诉我哪里会更好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T23:07:22.473

```
restart:

sys := diff(y(x),x) = y(x) - 2;
IC := y(0) = 1;

sol := dsolve({sys,IC}, numeric,
          output = listprocedure,
          method = classical[foreuler], stepsize = 0.2):
yest := eval(y(x),sol):

for i from 1 to 4 do
  yest(0.2*i);
end do;

Peul:=plots:-odeplot(sol,x=0..1):
Peul;

exactsol:=dsolve({sys,IC});
yexact:=eval(y(x),exactsol);

for i from 1 to 4 do
  eval(yexact,x=0.2*i);
end do;

Pexact:=DEtools[DEplot](sys,y(x),x=0..1,[[y(0)=1]]):

plots:-display([Pexact,Peul],color=[green,red]); 
```

# php - 如何验证文本框的值

> ID：15861252
> 
> 赞同：0
> 
> 时间：2013-04-07T10:17:20.920
> 
> 标签：php, javascript, jquery, ajax, validation

这是代码。有两个不同的文件

**1 元数据.php**

```
<script>
      $(document).ready(function(){

        $("#addAuthor").click(function(e){
         e.preventDefault();
         $.ajax({url:"n.php",type: "POST",data: ({id: '1'}),success:function(result){
         $("#div1").append(result);
            }});
        });

        $("#removeAuthor").click(function(e){
               e.preventDefault();
               var lastNode = $("#div1").children().last();
               lastNode.prev().remove();
               lastNode.remove();
         });
      });
 </script>

  <div id="div1" >

  </div>
       <button id="addAuthor" >Add Author</button>
      <button id="removeAuthor">Remove Author</button>
<input type="submit" name="save" value="Save & Continue"> 
```

**2 n.php**

```
Name:<input type="text" name="txtname[]">
age:<input type="text" name="txtage[]"> 
```

现在点击“addAuthor”按钮 ajax 加载 n.php 的所有内容的次数与点击按钮的次数一样多。

并且 txtname[] 和 txtage[] 将存储所有文本框的值。但是这些数组会在表单上给出值。

那么如何在表单发布之前验证文本框的值呢？因为如果我验证表单帖子上的值，并且如果验证失败，则 metadata.php 将不会保留 n.php 的加载内容。

那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T10:47:29.300

如果您的意思是在提交表单之前验证 txtname 和 txtage，您可以这样做：

```
<script>
    $(document).ready(function(){
        $("#div1 input[name='txtname']").each(function() {
            // make test on the current txtname
        });

        $("#div1 input[name='txtage']").each(function() {
            // make test on the current txtage
        });

        // uncomment this to prevent form submition
        //return false;
    });
</script> 
```

# mysql - 如何自动填充mysql数据库？

> ID：15861253
> 
> 赞同：0
> 
> 时间：2013-04-07T10:17:26.450
> 
> 标签：mysql

运行代码时出现以下错误，

> INSERT INTO `widgets`( `id`, `page`, `location`, `title`, `content`, `global`) VALUES right(1, '/', '', 'Welcome to Animal Rights Pakistan', '
> 
> Animal Rights Pakistan 是一个协作编辑的 问答**网站，****旨在**满足您的需求。
> 
> \r\n\r\n
> 
> 它易于使用，无需注册！
> 
> \r\n\r\n
> 
> co/questions/ask">问一个问题
> 
> ', 1);

错误：

```
#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'right(1, '/', '', 'Welcome to Animal Rights Pakistan', '<p>Animal Rights Pakista' at line 1 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T10:26:13.083

尝试不带“正确”的值：

```
INSERT INTO widgets (id, page, location, title, content, global) 
VALUES(1, '/', '', 'Welcome to Animal Rights Pakistan', 
'Animal Rights Pakistan is a collaboratively edited question and answer site built to suit your needs.\r\n\r\n. It''s easy to use, with no registration required!', 1); 
```

对于链接，您最好在表中添加另一个名为“reference”的文件，并在“a href='' ..”元素中回显它！

# java - 使用分隔符将字符串数组转换为 int

> ID：15861257
> 
> 赞同：1
> 
> 时间：2013-04-07T10:17:56.503
> 
> 标签：java, regex

我不知道为什么会出现空指针异常。我正在尝试转换用户在提示后输入的行号，并且我想将其分隔为空格“”逗号“”或逗号和空格“，”。

这是我的代码，我在 nums[i]=Integer.parseInt(holder[i]); 上得到一个空指针异常；线。我只是想不通为什么。

```
String again="n";
    int[] nums = null;

    do {
        Scanner scan = new Scanner (System.in);

        System.out.println("Enter a sequence of integers separated by a combination of commas or spaces: ");
        String in=scan.nextLine();
        String[] holder=in.split(",| |, ");

            for (int i=0; i<holder.length; i++) {

                nums[i]=Integer.parseInt(holder[i]);
                System.out.print(nums[i]);
            }

    }
    while (again=="y"); 
```

好的，谢谢大家，我通过按照接受的答案中的建议将 nums 数组的长度初始化为 holder 数组的长度来使其工作。像这样：

```
int[] nums = new int[holder.length]; 
```

不过，我还有第二个问题，因为我的正则表达式似乎失败了，如果用“，”或“”而不是“，”来描述，我可以阅读它有什么想法吗？

这是我的错误：

```
Enter a sequence of integers separated by a combination of commas or spaces: 
    1, 2, 3
    Exception in thread "main" 1java.lang.NumberFormatException: For input string: ""
    at java.lang.NumberFormatException.forInputString(Unknown Source)
    at java.lang.Integer.parseInt(Unknown Source)
    at java.lang.Integer.parseInt(Unknown Source)
    at SortComparison.main(SortComparison.java:20) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T10:23:35.883

您的空指针异常是由于您已将 nums 数组初始化为空，然后尝试在 for 循环中“指向”它。您可以丢失`int[] nums = null`并添加：

```
int[] nums = new int[holder.length]; 
```

在 for 循环之前（显然，在您创建了持有者数组之后）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T10:23:37.197

你已经设置

```
int[] nums = null; 
```

然后尝试访问

```
num[i] 
```

这给了你 NullPointerException。您首先需要构造数组以保存所需数量的元素：

```
int[] nums = new int[holder.length] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T10:21:23.267

您最好`holder[i]`在将其解析为整数之前打印您的，以查看其中的内容。我猜这`holder[i]`不是整数的有效值。

# css - 是否有根据 css 生成图像精灵的繁重任务？

> ID：15861264
> 
> 赞同：7
> 
> 时间：2013-04-07T10:18:42.910
> 
> 标签：css, sprite, gruntjs

假设我有以下 style.css 文件：

```
h1 {
  padding: 10px;
  background: url('/img/header.png');
}
p {
   background: url('/img/p.png');
} 
```

我需要自动为这个 css 制作图像精灵。我需要得到这样的东西：

```
h1 {
  padding: 10px;
  background: url('/img/sprite.png') -47px 0;
}
p {
   background: url('/img/sprite.png') -130px 0;
} 
```

是否可以通过使用 grunt 任务自动制作？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-11-11T11:10:09.720

看起来您正在寻找这个[grunt-sprite-generator](https://npmjs.org/package/grunt-sprite-generator)。从文档中：

> Grunt 任务从样式表中引用的图像生成精灵，然后使用新的精灵图像和位置更新引用

另一个看起来符合要求的工具是[grunt-spritesmith](https://npmjs.org/package/grunt-spritesmith)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-07T15:53:39.727

使用[Grunt Imagine](https://npmjs.org/package/grunt-imagine)怎么样？

# macos - 在 Macbook 上开始使用 OpenCV

> ID：15861265
> 
> 赞同：0
> 
> 时间：2013-04-07T10:19:06.083
> 
> 标签：macos, opencv

我用自制软件在雪豹上安装了openCV。我尝试运行的任何 opencv 程序都找不到所需的头文件。

我知道必须定义头文件的路径。我需要帮助我如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T01:50:58.033

使用**pkg-config**让您的工作更轻松：

```
g++ test.cpp -o test `pkg-config --cflags --libs opencv` 
```

# asp.net - 控制器需要 SessionState，但没有观察到连续请求的顺序执行

> ID：15861269
> 
> 赞同：1
> 
> 时间：2013-04-07T10:19:29.823
> 
> 标签：asp.net, asp.net-mvc-3, c#-4.0

我有一个控制器

```
[Authorize]
[SessionState(SessionStateBehavior.Required)]
public class TestsController: Controller
{

    public JsonResult Wait(int time = 10000)
    {
           var start = DateTime.Now;
           Thread.Sleep(time);
           var end = DateTime.Now;
           var diff = (end - start);
           return Json(new
           {
               start = start.ToString("yyyy-MM-dd HH:mm:ss.fff"),
               end = end.ToString("yyyy-MM-dd HH:mm:ss.fff"),
               milliseconds = diff.TotalMilliseconds.ToString("#,###")
           }
    }
} 
```

当我连续执行两个请求时：

```
A-> action = Wait, Controller = Tests, time = 10000
B-> action = Wait, Controller = Tests, time = 100 
```

B 请求在 A 请求之前完成。这不是我所期望的，因为我已经用

> [会话状态（会话状态行为。必需）]

我希望这两个请求按照发出的顺序完成。

我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T10:33:16.453

仅仅用属性装饰控制器`[SessionState(SessionStateBehavior.Required)]`是不够的。您实际上应该在此操作中写入会话。此外，如果您只是阅读也不够，因为您可以从同一个会话中进行并发读取。还要确保在发送这些 AJAX 请求之前在客户端上创建会话 cookie，例如通过在为视图提供服务的控制器操作中向会话写入一些值。

# cocoa - NSSearchField 动画

> ID：15861273
> 
> 赞同：0
> 
> 时间：2013-04-07T10:19:37.420
> 
> 标签：cocoa, core-animation, nstextfield, nssearchfield

如何为 Mac 版 Reeder 中的 NSSearchField 设置动画：http: [//juliensagot.fr/upload/reederSearchAnimation.mp4](http://juliensagot.fr/upload/reederSearchAnimation.mp4)

谢谢你的想法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T09:00:38.017

组合使用怎么样

*   an`NSViewAnimation`从右向左移动图标，
*   一秒钟`NSViewAnimation`在搜索字段中消失？

# wolfram-mathematica - Mathematica 中参数评估的差异：Plot 与 PlotLog

> ID：15861274
> 
> 赞同：1
> 
> 时间：2013-04-07T10:19:37.353
> 
> 标签：wolfram-mathematica

我似乎无法理解 Mathematica 中`Plot`和`PlotLog`（以及其他对数刻度绘图函数）的行为之间的区别。假设我有这个简单的功能：

```
f [a_] := Length[Range[0, a]] 
```

现在运行`Plot[f[x], {x, 1, 10}]`会产生正确的图表，但是当我尝试时

```
PlotLog[f[x], {x, 1, 10}] 
```

我没有输出保存以下错误：

Range::range: "Range[1,x] 中的范围规范没有适当的界限。"

看起来对 的评估`x`被推迟了，这使得从 中创建列表是不可能的`Range`，但是为什么它只会发生在对数比例绘图功能上，我该如何处理这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T14:11:00.447

`PlotLog`不存在。如果您使用`LogPlot`它将正常工作。

无论如何，您可能对该定义有疑问。我建议定义`f`类似`f2[a_Real] := Length[Range[0, a]]`或`f3[a_?NumericQ] := Length[Range[0, a]]`所以只有数字将传递给范围。

例如，根据您的定义，这将失败：

```
NIntegrate[f[x], {x, 1, 10}]
During evaluation of In[43]:= Range::range: Range specification in Range[0,x] does not have appropriate bounds. >>
18. 
```

但是将 a 定义为 NumericQ 或 Real，它会起作用。

```
NIntegrate[f2[x],{x,1,10}]
54. 
```

问候。

# c# - 数据库到实体命名转换

> ID：15861278
> 
> 赞同：1
> 
> 时间：2013-04-07T10:19:56.613
> 
> 标签：c#, entity-framework, naming-conventions, reverse-engineering, ef-power-tools

目前我正在使用 EF 5.0.0 和 EF Power Tools 3。我正在尝试首先使用逆向工程代码（Power Tools 3）从现有数据库进行逆向工程。可以在此[MSDN 链接](http://msdn.microsoft.com/en-us/data/jj200620)上找到执行此操作的示例。

这样做的唯一问题是我的数据库对象的名称。我的数据库对象使用小字和下划线作为空格，例如：item_cart。但是，我不希望将这种命名标准传递给我的 C# 应用程序。

然后我尝试调整模板以转换每个表/字段名称以遵循应用程序命名标准。这是我到目前为止所做的当前转换工具。

```
 public static string SqlNameToEntityName(string name)
    {
        StringBuilder entityName = new StringBuilder();

        if(string.IsNullOrEmpty(name)) return name;
        else if (!name.Contains('_'))
        {
            return name[0].ToString().ToUpper() + name.Substring(1);
        }

        string rippedName = name;

        while(rippedName[0] == '_')
        {
            rippedName = rippedName.Substring(1);
        }

        do{
            entityName.Append( CustomConvention.UpperFirstChar( rippedName.Substring(0, rippedName.IndexOf('_')) ) );
            rippedName = rippedName.Substring(rippedName.IndexOf('_')+1);
        }while(rippedName.Contains('_'));

        entityName.Append( CustomConvention.UpperFirstChar(rippedName) );

        return entityName.ToString();
    }

    public static string UpperFirstChar(string name)
    {
        if(string.IsNullOrEmpty(name)) return "";

        return name[0].ToString().ToUpper() + name.Substring(1, name.Length-1).ToLower();
    } 
```

然后在 Entity.tt 中，我使用这个静态方法修改了模板。`columnName = CustomConvention.SqlNameToEntityName(columnName);`. 使用这种方法，我可以将表名从 转换`item_cart`为`ItemCart`足够好（虽然尚未测试）。

最后，这是我的问题：

*   目前我无法将 .cs 文件名更改为遵循命名约定。所以它仍然保留为 item_cart.cs
*   我的方法将来会出问题吗？
*   有没有更好（标准/更清洁）的方法来做到这一点？
*   除了这种逆向工程之外，将表（可能是视图和过程）映射到实体的最佳（最快和最干净）方法是什么？

可能的相关问题：[解决 EF4 中的实体与我们的数据库标准之间的命名约定冲突？](https://stackoverflow.com/questions/6680957/resolving-naming-convention-conflict-between-entities-in-ef4-and-our-database-st)

# java-me - 使用 Java ME 获取电话音量

> ID：15861283
> 
> 赞同：0
> 
> 时间：2013-04-07T10:20:35.387
> 
> 标签：java-me

是否可以从 java me midlet 获取 phobe 通话量的值？无需更改音量。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T20:42:04.923

AFAIK，无法访问电话音量。但是您可以设置您的应用程序量或获取应用程序。

控制应用程序音量的示例代码：

```
import javax.microedition.midlet.*;
import javax.microedition.lcdui.*;
import javax.microedition.lcdui.Ticker;
import javax.microedition.media.*;

public class VolumeControlDemo extends MIDlet implements CommandListener {

    private Display display;
    private Command exit,incr,decr;
    Form frm;

    VolumeControl vc;
    int vol;
    Player player;

    public VolumeControlDemo() {
        display = Display.getDisplay(this);

    }

    public void startApp() {

        frm=new Form("VolumeControlDemo  Demo");

        exit= new Command("Exit",Command.EXIT,1);
        decr= new Command("Decrease",Command.EXIT,1);
        incr= new Command("Increase",Command.EXIT,1);
        frm.addCommand(exit);
        frm.addCommand(decr);
        frm.addCommand(incr);

        frm.setCommandListener(this);

        display.setCurrent(frm);

        try {

            // Creating player object
            player = Manager.createPlayer("/demo.wav");

            // Setting loop count
            player.setLoopCount(-1);

            // Start sound
            player.start();
            Control cs[];

            // Getting Controls object
            cs = player.getControls();

            for (int i = 0; i < cs.length; i++) {
                if (cs[i] instanceof VolumeControl)
                    // Getting volume control
                    vc=(VolumeControl)cs[i];
            }

        } catch (Exception e) {}

    }

    public void pauseApp() {

    }

    public void destroyApp(boolean un) {

    }

    public void commandAction(Command cmd,Displayable d) {
        try {
            if(decr) {
                if(vol>0) vol--;
                vc.setLevel(vol);
            } else if() {
                if(vol<99) vol--;
                vc.setLevel(vol);
            }

            frm.appent("vol="+vc.getLevel());
        }catch(Exception e){}

    }
} 
```

# wxpython - 将图片设置为背景

> ID：15861288
> 
> 赞同：1
> 
> 时间：2013-04-07T10:20:42.827
> 
> 标签：wxpython

我想在上面画一张背景图片和一些较小的图片（在前景中）。据我了解，首先绘制的图片是前景，如果我在同一位置绘制第二张图片，那么它将在背景中。我的问题是，背景图片必须在开始时绘制，然后（在某个事件中）前景图片应绘制在该背景图片的顶部。我不好的解决方案：销毁第一张（背景）图片并重新绘制它。问题：图片闪烁。那么有没有更好的解决方案呢？这是一些代码：

```
def drawBG(self):    
    self.picBG = wx.StaticBitmap(self,size=(1020,252),pos=(0,160))
    self.picBG.SetBitmap(wx.Bitmap(path))

def drawFG(self,event):
    self.picFG = wx.StaticBitmap(self,size=(80,80),pos=(500,180))
    self.picFG.SetBitmap(wx.Bitmap(path))
    self.picBG.Destroy()
    self.drawBG() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T21:49:22.660

您可以在面板上设置背景图像，然后使用 wx.StaticBitmap 小部件将其他图像放在它上面。我写了一篇关于如何在 wx.Panel 上放置背景图片的教程：http: [//www.blog.pythonlibrary.org/2010/03/18/wxpython-putting-a-background-image-on-a-panel /](http://www.blog.pythonlibrary.org/2010/03/18/wxpython-putting-a-background-image-on-a-panel/)

这是我教程中的代码：

```
import wx

########################################################################
class MainPanel(wx.Panel):
    """"""

    #----------------------------------------------------------------------
    def __init__(self, parent):
        """Constructor"""
        wx.Panel.__init__(self, parent=parent)
        self.SetBackgroundStyle(wx.BG_STYLE_CUSTOM)
        self.frame = parent

        sizer = wx.BoxSizer(wx.VERTICAL)
        hSizer = wx.BoxSizer(wx.HORIZONTAL)

        for num in range(4):
            label = "Button %s" % num
            btn = wx.Button(self, label=label)
            sizer.Add(btn, 0, wx.ALL, 5)
        hSizer.Add((1,1), 1, wx.EXPAND)
        hSizer.Add(sizer, 0, wx.TOP, 100)
        hSizer.Add((1,1), 0, wx.ALL, 75)
        self.SetSizer(hSizer)
        self.Bind(wx.EVT_ERASE_BACKGROUND, self.OnEraseBackground)

    #----------------------------------------------------------------------
    def OnEraseBackground(self, evt):
        """
        Add a picture to the background
        """
        # yanked from ColourDB.py
        dc = evt.GetDC()

        if not dc:
            dc = wx.ClientDC(self)
            rect = self.GetUpdateRegion().GetBox()
            dc.SetClippingRect(rect)
        dc.Clear()
        bmp = wx.Bitmap("butterfly.jpg")
        dc.DrawBitmap(bmp, 0, 0)

########################################################################
class MainFrame(wx.Frame):
    """"""

    #----------------------------------------------------------------------
    def __init__(self):
        """Constructor"""
        wx.Frame.__init__(self, None, size=(600,450))
        panel = MainPanel(self)        
        self.Center()

########################################################################
class Main(wx.App):
    """"""

    #----------------------------------------------------------------------
    def __init__(self, redirect=False, filename=None):
        """Constructor"""
        wx.App.__init__(self, redirect, filename)
        dlg = MainFrame()
        dlg.Show()

#----------------------------------------------------------------------
if __name__ == "__main__":
    app = Main()
    app.MainLoop() 
```

现在您只需将按钮换成 StaticBitmap 小部件。

# c# - 有Point3D吗？

> ID：15861292
> 
> 赞同：14
> 
> 时间：2013-04-07T10:21:37.050
> 
> 标签：c#, .net, point

.Net 中是否有内置类型 Point3？某种这种

```
public class Point3D
{
    public double X { get; set; }
    public double Y { get; set; }
    public double Z { get; set; }
} 
```

但内置。自己实现并不难，但是..

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-07T10:24:25.127

`System.Windows.Forms.DataVisualization.Charting`有[`Point3D`](http://msdn.microsoft.com/en-us/library/system.web.ui.datavisualization.charting.point3d.aspx)课。

> 表示三维 (3D) 数据点的坐标。使用 3D 图表执行自定义绘图时使用此类。
> 
> *   **X**     获取或设置 3D 点的 X 坐标。
> *   **Y**     获取或设置 3D 点的 Y 坐标。
> *   **Z**     获取或设置 3D 点的 Z 坐标。

也有[`Point3D`](http://msdn.microsoft.com/en-us/library/system.windows.media.media3d.point3d.aspx)结构。

> 表示 3-D 空间中的 x、y 和 z 坐标点。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2020-07-09T09:29:15.763

`System.Windows.Forms.DataVisualization.Charting`有一个`class` [Point3D](https://docs.microsoft.com/en-us/dotnet/api/system.windows.forms.datavisualization.charting.point3d?view=netframework-4.0)

*   `float X, Y, Z`
*   System.Windows.Forms.DataVisualization.dll (WinForms)
*   .NET 框架 >= 4.0

`System.Windows.Media.Media3D`有一个`struct` [Point3D](https://docs.microsoft.com/en-us/dotnet/api/system.windows.media.media3d.point3d?view=netframework-3.0)

*   `double X, Y, Z`
*   PresentationCore.dll (WPF)
*   .NET 框架 >= 3.0
*   .NET 核心 >= 3.0

我知道 Vector3D 不是 Point3D，但如果你只想要一个`struct`带有 X、Y、Z 的：

`System.Windows.Media.Media3D`有一个`struct` [Vector3D](https://docs.microsoft.com/en-us/dotnet/api/system.windows.media.media3d.vector3d?view=netframework-3.0)

*   `double X, Y, Z`
*   PresentationCore.dll (WPF)
*   .NET 框架 >= 3.0
*   .NET 核心 >= 3.0

`System.Numerics`有一个`struct` [Vector3](https://docs.microsoft.com/en-us/dotnet/api/system.numerics.vector3?view=netframework-4.6)

*   `float X, Y, Z`
*   System.Numerics.dll
*   .NET 框架 >= 4.6
*   .NET 核心 >= 1.0

仅`System.Numerics.Vector3` *不依赖*于 WinForms 或 WPF！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-07T10:24:28.770

*   [DirectX](http://msdn.microsoft.com/en-us/library/windows/desktop/ee780367%28v=vs.85%29.aspx)有一个 Microsoft.DirectX.Vector3 结构，但它对您的应用程序来说会不会过大？
*   [XNA](http://en.wikipedia.org/wiki/Microsoft_XNA)有类[Microsoft.XNA.Framework.Vector3](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.vector3.aspx)
*   [Unity3D](http://unity3d.com/%E2%80%8E)有一个[Vector3](http://docs.unity3d.com/Documentation/ScriptReference/Vector3.html)类，用于表示 3D 向量和点。
*   [OpenTK](http://www.opentk.com/files/doc/struct_open_t_k_1_1_vector3.html)还使用三个单精度浮点数表示 3D 矢量。

# javascript - Jquery - 如何包含文件？

> ID：15861293
> 
> 赞同：-2
> 
> 时间：2013-04-07T10:21:42.037
> 
> 标签：javascript, jquery, html, jquery-ui

这是html标签的一部分。

```
<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
        <script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.9.2/jquery-ui.min.js"></script>
        <script type="text/javascript" src="custom.js"></script> 
```

在 custom.js 里面我有一部分

```
$(document).ready(function (){
    //$('#mask').hide();    
    //$('#game').hide();
    $('.game-button').hover(
        function() {$(this).fadeTo('fast','1');},
        function() {$(this).fadeTo('slow','0');}
    );
    $('#progressbar').progressbar({
      value: 37
     });
    $('#acces a').click(function(){
        $('#mask').fadeIn('fast');
        $('#game').fadeIn('fast');
    });
}); 
```

但它没有响应。为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T11:40:26.647

您需要`http://`在脚本源之前添加：

```
//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js 
```

成为：

```
http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js 
```

jquery-ui 库也是如此。

# string - SLR 语法可以有空产生式吗？

> ID：15861294
> 
> 赞同：0
> 
> 时间：2013-04-07T10:21:47.080
> 
> 标签：string, lr

我写了以下语法：

```
S->S ( S ) S
S->e 
```

e 代表“空字符串”

所以这个文法识别的语言包括所有左右括号匹配的字符串，比如()、(())、(()())等。

而且这个语法不是 SLR，这是我构造 SLR 解析表的方式：

1.  扩充这个语法：

    S1->S S->S(S)S S->e

2.  然后为它构造LR(0)自动机：

    I0：S1->.S S->.S(S)S S->.e

    I1：S1->S。S->S.(S)S

...

请注意，对于 I0，输入符号 '(' 没有移位或归约操作，这是该语法生成​​的任何字符串的第一个标记。

所以 SLR 解析表会产生错误，因为在状态 I0，它不知道解析字符串时要做什么：(())。

我的问题是：

使这个语法不是 SLR 的罪魁祸首是什么？它是空字符串生产吗？即：S->e。?

而在一般意义上，单反语法可以有空产生式吗？例如，在本例中为 S->e。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T08:35:03.773

答案是可以的，如果当前输入没有可用的移位/减少操作并且空产品有移位，我们选择在这个空终端上移位。

# java - 复制文件给它 url

> ID：15861295
> 
> 赞同：1
> 
> 时间：2013-04-07T10:21:50.503
> 
> 标签：java, file, copy

我有包含图像文件网址的文本文件。

我想从其他目录复制这些文件。

此代码不起作用

```
 File source =//
    File target = //
    File urls = //
     Scanner scanner = new Scanner(urls);
    for (File child :source.listFiles())
     {
         if (child.isDirectory()) 

            while (scanner.hasNextLine()) {

            String line = scanner.nextLine();

            for (File childOfchild:child.listFiles())
             {
                 if (childOfchild.getAbsolutePath().contains(line))

                               FileUtils.copyFileToDirectory(childOfchild,target);

             }

            }
    } 
```

问题是什么？

第一个文件包含我要复制的图像的 url

```
 \actor\0211_2233188435.jpg
    \actor\0405_52447453.jpg 
```

源位置包含 704 个子目录和 250000 个文件，例如

```
 /media/B68E392F8E38E98F/Flickr1/Flickr/actor/0001_2124494179.jpg 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T10:34:22.920

使用递归，在网上你可以找到例子。[这是其中之一：](http://www.mkyong.com/java/how-to-copy-directory-in-java/)

```
public void copyDirectory(File sourceLocation , File targetLocation) throws IOException {
    if (sourceLocation.isDirectory()) {
        if (!targetLocation.exists()) {
            targetLocation.mkdir();
        }

        String[] children = sourceLocation.list();
        for (int i=0; i<children.length; i++) {
            copyDirectory(new File(sourceLocation, children[i]),
                    new File(targetLocation, children[i]));
        }
    } else {

        InputStream in = new FileInputStream(sourceLocation);
        OutputStream out = new FileOutputStream(targetLocation);

        // Copy the bits from instream to outstream
        byte[] buf = new byte[1024];
        int len;
        while ((len = in.read(buf)) > 0) {
            out.write(buf, 0, len);
        }
        in.close();
        out.close();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T11:59:37.643

下面的代码使用顺序方法将 sourceDir 的整个文件结构复制到 destDir。我对`apache-commons`lib 不熟悉，因此可能有更优雅的解决方案。

```
public static String getNewPath(File file,File source,File dest) throws IOException {
    String filePath = file.getCanonicalPath().replaceAll(source.getCanonicalPath(), "");        
    return dest.getCanonicalPath()+filePath;
}

public static void main(String[] args) throws IOException {
    File sourceDir = new File("./f_src");
    File destDir = new File("./f_dest");
    Collection<File> fs = FileUtils.listFilesAndDirs(sourceDir, TrueFileFilter.TRUE, TrueFileFilter.TRUE);
    for (File f : fs) {
        if (f.exists() && f.canRead()) {
            if (f.isFile()) {
                FileUtils.copyFile(f, new File(getNewPath(f,sourceDir,destDir)));                    
            }
            else {
                FileUtils.copyDirectory(f, new File(getNewPath(f,sourceDir,destDir)));
            }
        }
    }
} 
```

该代码假定在您的项目根目录中存在两个目录，即`f_src`和`f_dest`。这是我的测试文件结构`f_src`，数字是目录，字母是文件：

```
f_src
   |\-1
   | |\-2
   | | | \-3
   | | |   \-a
   | |  \-b
   |  \-c
   |\-4 
   |  |\-5
   |  |   \-d
   |   \-e
   |\-6
   |\-7
   |  \-f
   \-g 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T19:44:51.113

错误是while指令的位置

```
File source =//
File target = //
File urls = //
 Scanner scanner = new Scanner(urls);
 while (scanner.hasNextLine()) {
 for (File child :source.listFiles())
 {
     if (child.isDirectory()) 

        String line = scanner.nextLine();

        for (File childOfchild:child.listFiles())
         {
             if (childOfchild.getAbsolutePath().contains(line))

                           FileUtils.copyFileToDirectory(childOfchild,target);

         }

        }
} 
```

# php - stripslashes 安全测试

> ID：15861296
> 
> 赞同：3
> 
> 时间：2013-04-07T10:21:50.800
> 
> 标签：php, stripslashes

我正在测试使用的安全性`stripslashes()`

我尝试了以下方法：

```
 $str = chr(0xbf) . chr(0x27);

  var_dump(stripslashes($str)); // string(2) " �' " 
```

然后我把它改成这样：

```
 $str = $_POST['input']; // %bf%27;

  var_dump(stripslashes($str)); // string(3) " �'' " 
```

然后我用**curl**发送`input`数据：

```
 curl_setopt($ch, CURLOPT_POSTFIELDS, 'input=' . chr(0xbf) . chr(0x27)); 
```

但结果又是：`string(3) " �'' "`

**从另一台服务器接收数据时，是否可以像第一个示例中那样获得结果？使用起来安全`stripslashes()`吗？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T17:01:50.440

你在这里问两个问题：

## 关于 stripslashes 的安全性

`stripslashes()`并不是一种真正安全的输入处理方式（我假设它进入数据库）。涉及的变量太多，例如

*   目标数据库系统
*   数据库连接的编码
*   容易错过的程序员错误

## 在接收 POST 数据时

试试下面的文件。它应该作为您正在调查的内容的基本测试用例。到目前为止，我无法重现您描述的问题。

`test.php`

```
<html>
<head></head>
<body>
<form method="POST" action="test.php">
<input type="text" name="input"></input>
<input type="submit" value="Submit"></input>
</form>

<?php 

$string = chr(0xbf) . chr(0x27); // yields string '¿'' (length=2)
$input = $_POST['input'];

foreach (array($string, $input) as $s) {
  var_dump(stripslashes($s));
  var_dump($s);
}

?>
</html> 
```

您得到的结果强烈指向编码问题。

# java - Swing MVC - 模型中的数据

> ID：15861297
> 
> 赞同：2
> 
> 时间：2013-04-07T10:22:04.087
> 
> 标签：java, swing, model-view-controller, jtable, jtextfield

我开始学习如何在 Swing 中实现 MVC 模式。我对模型中的数据感到困惑。

在我正在做的应用程序中，我有几个 JTextField。字段中的数据集来自 JTable。我的控制器中有一个`ListSelectionListener`添加到该JTable（在视图中），以便在选择更改后，所选行的数据将被反射到相应的Textfields

```
 public void transferTableDataToFields(){
        if(tblProduct.getSelectedRows().length != 0){
            int selRow = tblProduct.getSelectedRow();
            txtID.setText(tblProduct.getValueAt(selRow, 0).toString());
            txtName.setText(tblProduct.getValueAt(selRow, 1).toString());
            txtDescIn.setText(tblProduct.getValueAt(selRow, 2).toString());
            txtSupplier.setText(tblProduct.getValueAt(selRow, 4).toString());
            txtPrice.setText(tblProduct.getValueAt(selRow, 5).toString());
        }
    } 
```

我的问题是，我做对了吗？我是否应该在模型中定义与视图中的文本字段相对应的字段，然后将代码更改为控制器，将模型的字段设置为视图 jtable 中的值，然后让模型向其侦听器触发属性更改通知，然后让侦听器调用基于属性更改事件的视图中的更新方法？

我对这种方法的问题是，视图应该有一个方法可以返回从 jtable 中选择的行，我觉得这有点难看。

**编辑**

@trashgod 这就是我要说的。

在我的 TableModel 实现中，在这里填充数据更好吗？

```
public MyTableModel extends AbstractTableModel{
   List<Row> data;
   Row header;

   public MyTableModel(){
      initializeData();
   }   

   public void initializeData{
      //query database here then put it in the list
   }
   //other methods to implement e.g. getvalueAt(int x, inty){data.get(x).get(y);}
} 
```

如果我这样做会更好吗？因为目前我在我的主模型中存储并填充了我的表的数据（还包含`SelectedRow`视图中具有相应文本字段的字段）然后我在我`JTable`的模型中传递数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T20:34:04.497

在这种情况下，当前选择是视图的属性，是 的实例`JTable`，*而不是*模型，是 的实现`TableModel`。

如果您选择取代[编辑](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#editrender)`JTable`本身， a`ListSelectionListener`是更新您的（匿名）依赖视图的正确方法，例如`SelectedRow`. 你的控制器应该没什么可做的，除了添加`SelectedRow`一个监听器到你的`JTable`. 由于`SelectedRow`包含（可能）可编辑字段，您需要负责几件事：

*   将任何更改传播回原始表的`TableModel`，通常通过`setValueAt()`。

*   [在这里](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#sorting)提到的视图和模型坐标之间的转换。

*   排除（或通过 同步`ListSelectionListener`）源中的编辑`JTable`。

附录：*在我的* `TableModel` *实现中，在这里填充数据更好吗？*

答案取决于应用程序。您的`TableModel`实现应该公开一个公共 API，该 API 提供尽可能多（或尽可能少）的 API，以支持应用程序对并发和延迟的要求。作为参考，[`DefaultTableModel`](http://docs.oracle.com/javase/7/docs/api/javax/swing/table/DefaultTableModel.html)这是一个通用示例，尽管您可能希望使用比`Vector`内部更新的东西。

# c - Visual Studio 2012 - 调试

> ID：15861299
> 
> 赞同：-2
> 
> 时间：2013-04-07T10:22:31.117
> 
> 标签：c, debugging, visual-studio-2012

我经常听到我应该在提问之前调试我的代码。在我看来，这是一些有用的功能。

我试图用谷歌搜索一些东西，但我发现的只是一些奇怪的控制台命令或其他类似的东西。我不是 C/C++ 方面的专家，我想尝试调试短程序，主要是 < 200 行。

我可以用调试器做什么？什么是断点？

如何在 Visual Studio 2012 中使用调试器执行简单任务？如何使用断点？（设置它们不会改变任何东西）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T10:27:47.993

如果您用断点标记的代码一开始没有任何机会运行，设置它们可能不会改变任何东西，请确保执行到达那段代码，您可以通过在外范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T10:28:38.703

使用`VS2012`，在代码中设置断点并使用-key`F5`或按`Play`顶部栏中的绿色小图标开始调试。
然后，您可以单步执行断点甚至单行。关于这个话题有很多东西。请参阅[此处](http://msdn.microsoft.com/en-us/library/vstudio/sc65sadd.aspx)进行调试`VS2012`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T10:32:35.980

在 Visual Studio 中运行程序时，按 F5 或选择“使用调试器运行程序”选项。

调试器使您能够使用断点在特定点（代码行）暂停代码。您在希望程序暂停的代码行上放置一个断点。当程序到达带有断点的代码行时，它会暂停。然后，您可以使用“观察”变量来查看当前分配给每个变量的值。例如，如果您有一个大型程序并且程序的实际输出与程序的预期输出不同，这很有用。您可以使用断点通过检查代码各个点的数据结构的值来测试代码，并确定您的程序可能出错的地方。

您还可以设置“异常”断点。如果您的程序导致异常（崩溃），这些很有用。异常断点将识别发生崩溃的代码行，这意味着您可以检查代码行并尝试确定程序崩溃的原因。

使用断点，您还可以“单步执行”代码行。这意味着您可以通过告诉调试器单步执行下一行代码来一次手动运行程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-07T10:50:43.917

当您尝试编译程序并因为标点符号问题（例如忘记分号或大括号）而出现错误时，这称为语法错误。有时，一个程序可能有一行代码在*技术上*是正确的，但并没有按照你的意愿去做。因此，您使用调试器来观察您的程序执行，并确保它正在执行您真正想要的操作。

如果要调试特定的代码部分，请设置断点。当您在调试模式下运行代码时，断点会告诉编译器在该点停止执行代码。从那里，您可以使用 step out、step into 或 step over 命令（Debug -> Step Into 等）逐行检查代码。

# c# - 在 C#.Net 的浏览器控件中渲染 ChartJS 图形

> ID：15861301
> 
> 赞同：1
> 
> 时间：2013-04-07T10:22:39.267
> 
> 标签：c#, visual-studio-2012, charts, webbrowser-control, internet-explorer-10

我在表单中有一个 Web 浏览器控件，并且我正在打开 HTML 文档，其中包含带有虚拟数据的[ChartJS](http://www.chartjs.org/)示例图。我在 Windows 8 上，因此使用的浏览器控件是 IE10。此外，ChartJS 使用 Canvas 呈现图表，因此这里的 IE 应该不是问题。

现在，如果我在 Chrome 或 IE 中打开文档，它可以正常工作。但是在表单的浏览器控制中打开它不会呈现图表，并且我收到脚本错误说`Object doesn't support property or method 'getContext'`. 以下是我拥有的实际标记以及渲染图表所需的 JS。

```
<canvas id="chart" width="800" height="400" style="margin: auto;"></canvas>
<script type="text/javascript" src="chart.min.js"></script>
<script type="text/javascript">
    var canvasObj = document.getElementById("chart").getContext("2d");
    var data = {
        labels : ["January","February","March","April","May","June","July"],
        datasets : [
            {
                strokeColor : "#5A90B3",
                pointColor : "#175177",
                pointStrokeColor : "#fff",
                data : [65,59,90,81,56,55,40]
            },
            {
                strokeColor : "#B55B5B",
                pointColor : "#7C2929",
                pointStrokeColor : "#fff",
                data : [28,48,40,19,96,27,100]
            },
            {
                strokeColor : "#529F54",
                pointColor : "#285F2A",
                pointStrokeColor : "#fff",
                data : [6,75,87,67,44,30,23]
            }
        ]
    };
    var lineChart = new Chart(canvasObj).Line(data, {
        datasetFill: false,
        bezierCurve : true
    });
</script> 
```

我需要在这里添加任何 polyfills 吗？（我怀疑 IE10 是 C# 应该使用的浏览器框架）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T09:46:00.327

你可以看到：[Web Browser Control – Specifying the IE Version](http://www.west-wind.com/weblog/posts/2011/May/21/Web-Browser-Control-Specifying-the-IE-Version) or in MSDN page [MSDN Library – Internet Feature Controls](http://msdn.microsoft.com/en-us/library/ee330730%28VS.85%29.aspx#browser_emulation)

# sql - 从当前 sysdate 检索过去两年的数据

> ID：15861302
> 
> 赞同：2
> 
> 时间：2013-04-07T10:22:56.007
> 
> 标签：sql, oracle

嗨，我被困在一个 oracle 查询中，其中我想根据当前年份检索前两年的数据，比如 2013 年，所以我想检索 2011 年和 2012 年的所有记录，我已经完成了以下查询，但我陷入困境日期格式我对 oracle 很陌生这是查询

```
Select 
to_date(stage_end_date,'yy') Years,SUBPRODUCT Product,sum(OFFER_COUNT) SumCount
    ,sum(offer_amount)SumAmount
from stage_amt  
and 
Offer_amount !=0 
and 
to_date(stage_end_date,'yy')
between to_char( sysdate, -2 ) and to_char( sysdate)
group by to_date(stage_end_date,'yy'),SUBPRODUCT
order by Years asc; 
```

我收到此错误 ORA-00932：不一致的数据类型：预期的 DATE 得到了 NUMBER 00932。00000 -“不一致的数据类型：预期的 %s 得到了 %s”谁能帮我做什么

问候

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-07T10:35:34.000

这个怎么样？

```
where stage_end_date >= trunc(sysdate, 'yyyy') - interval '2' year
  and stage_end_date <  trunc(sysdate, 'yyyy'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T10:36:26.947

使用 sysdate 您正在应用 to_char 函数，但给出的日期格式不正确 -

我相信 stage_end_date 是一个日期列，如果是这样，我认为您需要在选择查询中使用 to_char 函数代替 to_date ...尝试以下查询-

```
Select To_Char(stage_end_date,'yy') Years,
       SUBPRODUCT Product,
       sum(OFFER_COUNT) SumCount,
       sum(offer_amount)SumAmount
from stage_amt  
where Offer_amount !=0 
  and to_number(To_char(stage_end_date,'YYYY')) between 
      to_number(to_char( sysdate,'YYYY'))-2 and to_number(to_char(sysdate,'YYYY'))
group by to_char(stage_end_date,'yy'),
         SUBPRODUCT
order by Years asc; 
```

虽然 Oracle 在比较时会注意或将数据从字符串转换为数字，但为了更安全，我`TO_NUMBER`还在比较日期时编写了函数。

# php - 更改图像颜色

> ID：15861304
> 
> 赞同：0
> 
> 时间：2013-04-07T10:23:04.590
> 
> 标签：php, html, css, html5-canvas, gd

我已经了解`img_filter_colorize()`了一点 php。我想给用户一个选择图像颜色的选项。例子在[这里](http://www.dezignwithaz.com/fairy-tree-wall-decals-p-1251.html)

我的代码是：

```
<?php
header('Content-type: image/png');
$im = imagecreatefrompng('flower.png');
imagefilter($im, IMG_FILTER_GRAYSCALE);
imagefilter($im, IMG_FILTER_CONTRAST, 255);
imagefilter($im, IMG_FILTER_NEGATE);
imagefilter($im, IMG_FILTER_NEGATE);
imagefilter($im, IMG_FILTER_COLORIZE, 255, 0, 0);
imagepng($im, 'flower1.png');
?> 
```

这段代码正在创建一个红色的新图像，但在这里我不想创建图像，只显示在屏幕上。

例如，如果用户选择红色按钮图像更改为红色等等。

这是可以实现的吗？还有其他方法吗（javascript、canvas 或任何其他方法）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T10:39:36.133

`imagepng`如果您不使用`filename`以下参数，将直接输出 png 文件内容：

```
imagepng($im); 
```

然后，您可以请求图像

```
<img src="http://your-shost/yourimagescript.php" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T10:41:38.477

如果您省略`imagepng()`调用的第二个文件名参数，它只会输出图像的字节并且不会保存到文件中，因此您可以在 an 中使用此脚本的 url `<img src="">`，它应该可以很好地呈现。

**但是**，这对您的服务器资源来说真的很浪费，因为每次下载图像时都必须再次运行计算，如果您有一个修复调色板，最好预先生成图像或至少缓存生成的版本。

对于面向用户的部分，您可能希望在用户单击“红色”按钮时使用 javascript 来更改浏览器内的 DOM。类似这样的东西：

```
<img src="the_default_color.png" id="image">
<button id="make_it_red">Make it red</button>
<script>
document.getElementById('make_it_red').onclick = function(){
    document.getElementById('image').src = 'path_to_your_image_generator_php_script.php';
};
</script> 
```

您可能希望使用 rgb 值参数化 php 脚本，这样您就可以将它用于每种颜色。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T10:42:34.157

仅创建照片的视图（不创建新的flower1.jpg）

```
<?php
echo '<img src="photo.php" height="42" width="42">';
?> 
```

并在一个新文件中：photo.php

```
<?php
header('Content-type: image/png');
$im = imagecreatefrompng('flower.png');
imagefilter($im, IMG_FILTER_GRAYSCALE);
imagefilter($im, IMG_FILTER_CONTRAST, 255);
imagefilter($im, IMG_FILTER_NEGATE);
imagefilter($im, IMG_FILTER_NEGATE);
imagefilter($im, IMG_FILTER_COLORIZE, 255,0, 0);
imagejpeg($im);
imagedestroy($im);
?> 
```

# javascript - 我们如何为 d3 数据映射创建 onclick 事件？

> ID：15861306
> 
> 赞同：4
> 
> 时间：2013-04-07T10:23:10.280
> 
> 标签：javascript, d3.js

我正在构建一个 d3 数据映射： [http ://datamaps.github.io/](http://datamaps.github.io/)

当我点击一个国家时，我希望边框改变颜色。如何使用数据映射将 onclick 事件分配给 d3 路径？svg 路径似乎缺少 CSS ID 以及任何标识挂钩。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-05T18:32:29.517

您可以使用 JQuery "done:function" 并指定 on("click") 如下：

```
 done: function(datamap) {
        datamap.svg.selectAll('.datamaps-subunit').on('click', function(geography) {
            alert(geography.properties.name);
        });
    } 
```

有关详细信息，请参阅[https://github.com/markmarkoh/datamaps](https://github.com/markmarkoh/datamaps)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-16T02:24:50.057

您将需要`done`回调和`updateChoropleth`函数。例如，要将每个国家/地区变为黑色，您将执行以下操作：

```
done: function(datamap) {
  datamap.svg.selectAll('.datamaps-subunit').on('click', function(geography) {
      var m = {};
      m[geography.id] = '#000000';
      datamap.updateChoropleth(m);
  });
} 
```

# java - 从 DataBufferByte.getData 中为每种颜色获取 0-255 个值

> ID：15861314
> 
> 赞同：3
> 
> 时间：2013-04-07T10:23:38.103
> 
> 标签：java, image-processing, bytearray

我正在尝试使用以下代码分析像素

```
 BufferedImage image;
    try {
        image = ImageIO.read(new File(fileName));
    } catch (IOException e) {
        e.printStackTrace();
        return null;
    }

    final byte[] pixels = ((DataBufferByte)         
    image.getRaster().getDataBuffer()).getData();final int pixelLength = 4;
        for (int pixel = 0, row = 0, col = 0; pixel < pixels.length; pixel += pixelLength) {
            byte alpha = pixels[pixel];
            byte blue = pixels[pixel + 1];
            byte green = pixels[pixel + 2];
            byte red = pixels[pixel + 3];
            //analyze colors
            col++;
            if (col == width) {
                col = 0;
                row++;
            }
        } 
```

我是最简单的例子，我有一个有两个像素的图像，一个有透明度，一个没有。

像素 1：透明的红色

```
HEX: FF0000, Alpha 140, (RGB: 255, 0, 0) 
```

像素 2：没有透明度的绿松石色

```
HEX: 7FFFD8, Aplha  255, (RGB: 127, 255, 216) 
```

上面的像素数组具有以下值：`[-116, 0, 0, -1, -1, -40, -1, 127]` 其中每个像素有四个字节，顺序为 a、b、g、r（我认为）。

所以我的问题是，我如何从上面的结果中得到我使用的 0-255 值:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T10:38:25.217

我不确定我是否理解了这个问题……但根据我的理解，这是一个简单的答案。

无需讨论[二进制补码](http://en.wikipedia.org/wiki/Two%27s_complement)，您可以遍历整个数组并使用以下规则对其进行转换：

*   如果值小于零，则加 256
*   如果该值为零或更大，则保持原样

这有帮助吗？

# ruby - 使用 ruby 中兼容的 bash 转义 unescape 字符串

> ID：15861317
> 
> 赞同：2
> 
> 时间：2013-04-07T10:24:13.943
> 
> 标签：ruby, bash

有一行是从文件中读取得到的。如何转义这条线以保持与 bash 的兼容性？我使用 shellestsape 找到了一个合适的解决方案，但我如何才能取消这条线？当我在 RoR 应用程序中使用它时，我得到一个错误无效字节序列 utf-8。

```
line = File.open(path,'rb').read.shellescape

passline = \`./my_app 1 #{line}\` - all right, it`s return filename

out = \`./my_app 2 #{passline}\` 

out = "\\▒\;aQ\▒\;aQux\\\\▒\\\▒\                                                                                    J,R\▒bg8\?\▒\▒\▒\▒\▒\\▒f\▒\(L\▒e\`dc\▒\▒\#\▒lNljs\▒5\▒`P\▒\\▒" - 
```

它是二进制文件，但已转义 - 我如何取消转义并另存为文件？

# javascript - 使用 requirejs 加载 LayoutManager 的问题

> ID：15861318
> 
> 赞同：0
> 
> 时间：2013-04-07T10:24:16.780
> 
> 标签：javascript, backbone.js, requirejs, backbone-layout-manager

我是新手，需要 js，我正在使用带有布局管理器的骨干。我在下面粘贴了我的代码，但我无法让布局管理器工作，我收到了这个错误：

```
 "Uncaught TypeError: Cannot call method 'extend' of undefined" 
```

在使用 layoutmanager 的行中 (Backbone.LayoutView.extend)

```
Main.js

require.config({
paths: {
    jquery: 'lib/jquery-1.9.1.min',
    underscore: 'lib/underscore-min',
    backbone: 'lib/backbone-min',
    handlebars: 'lib/handlebars',
    layoutManager : 'lib/backbone.layoutmanager'
    mousewheel : 'lib/jquery.mousewheel.min'
},
shim : {
    'backbone' : {
        deps: ['jquery', 'underscore' ],
        exports: 'Backbone'
    },
    'layoutManager' : {
        deps: ['jquery', 'underscore', 'backbone'],
        exports: 'LayoutManager'
    },
    'mousewheel' : ['jquery']
} 
```

});

```
require(["jquery", "underscore", "backbone", "layoutManager", "handlebars","mousewheel", "common"],function($, _, Backbone, LayoutManager, Handlebars,mousewheel, App) {

App.Views.HelloView = Backbone.LayoutView.extend({
    template : '#hello_tmpl1',
});

App.Layouts.AppLayout = new BackBone.Layout({

    template : '#layout',
    views : {
        ".helloView" : new App.Views.HelloView()
    }
});

$('body').empty().append(App.Layouts.AppLayout.el.render());

});  

Common.js
  define(function(){
    var App = null;
    App = { Models:{}, Views:{}, Collections:{}, Templates:{}, Router:{}, Layouts:{}};

   return App;
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T12:06:47.853

```
function($, _, Backbone, LayoutManager 
```

在这里，您将其命名为 LayoutManager。

```
App.Views.HelloView = Backbone.LayoutView.extend({ 
```

在这里，您尝试将其用作不存在的 Backbone.LayoutView...（因此未定义）。尝试

```
App.Views.HelloView = LayoutView.extend({ 
```

您在这里拥有的 Backbone var 与全局变量不同，想想 requirejs :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-17T07:22:14.040

新版本的 layoutmanager 不使用 'LayoutView' 来创建视图。使用 Backbone.Layout.extend({ ...}) 创建您的视图...玩得开心.. ;)

# c - 如何使用 recvfrom 监听来自某个主机的 UDP 数据报？

> ID：15861321
> 
> 赞同：2
> 
> 时间：2013-04-07T10:24:28.033
> 
> 标签：c, udp

我有一个 C 代码片段，它在 UDP 套接字上侦听传入消息（它工作正常）：

```
uint32_t udp_port = 101010; // example port
int sock_udp = socket(AF_INET, SOCK_DGRAM, 0);
server_address.sin_family = AF_INET;
server_address.sin_addr.s_addr = htonl(INADDR_ANY);
server_address.sin_port = htons(udp_port);
bind(sock_udp, (struct sockaddr*) &server_address, (socklen_t) sizeof(server_address));

char buffer[20];
struct sockaddr_in sender_address;
socklen_t sender_len = (socklen_t) sizeof(struct sockaddr_in);
ssize_t rcv_len = recvfrom(sock_udp, buffer, sizeof(buffer), 0, (struct sockaddr * ) &sender_address, &sender_len); 
```

之后，我在 sender_address 结构中获得了有关发件人的信息，并且可以检查地址、端口等。我的问题是：我可以使用`recv`,`recvfrom`或其他类似功能来侦听来自某个主机的数据报吗？换句话说，是否有可能从其他来源删除数据报而不读取它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T10:27:46.213

如果您[`connect(2)`](http://man7.org/linux/man-pages/man2/connect.2.html)使用数据报套接字，则可以“过滤”并从指定的单一来源接收数据报。

> 如果套接字 sockfd 是类型，`SOCK_DGRAM`那么 addr 是默认发送数据报的**地址，也是接收数据报的唯一地址**。

[标准](http://pubs.opengroup.org/onlinepubs/9699919799/)用语略有不同：

> 对于`SOCK_DGRAM`套接字，对等地址标识所有数据报在后续`send()`功能上发送到哪里，并限制远程发送方用于后续`recv()`功能

# android - Android：保持 UI 大小不变

> ID：15861327
> 
> 赞同：0
> 
> 时间：2013-04-07T10:25:48.070
> 
> 标签：android, user-interface

在我的 android 应用程序中，我必须设计一个 UI。我必须在线性布局（100%）内分配滚动视图（70%）和相对布局（30%）的区域。但是在我的代码中，它会随着滚动视图中按钮的变化而改变其区域并消耗相对布局的区域。这是我的代码

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical"
android:weightSum="100"     
>
<ScrollView 
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_above="@+id/lastLayout"
    android:layout_weight="70"        
    >        
    <LinearLayout   
        android:orientation="vertical"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:id="@+id/linear_layout_add"
        android:background="@drawable/albumbackground"
        android:padding="10dp"
    >         
    </LinearLayout>
</ScrollView>
<RelativeLayout 
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@android:color/white"
    android:layout_weight="30"
    >

    <ImageButton
        android:id="@+id/albumAdd"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_marginRight="24dp"
        android:layout_marginTop="10dp"
        android:layout_toLeftOf="@+id/albumremove"
        android:src="@drawable/add" />

    <ImageButton
        android:id="@+id/albumremove"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginTop="10dp"
        android:layout_alignParentRight="true"
        android:layout_marginRight="58dp"
        android:src="@drawable/delete" />

     </RelativeLayout> 
```

当按钮很少时，UI 显示如下 ![在此处输入图像描述](https://i.stack.imgur.com/OnEp1.png)

但是当按钮的数量增加时，用户界面显示如下 ![在此处输入图像描述](https://i.stack.imgur.com/70yR1.png)

如何保持滚动视图和相对布局大小不变？谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T10:28:23.547

设置`android:layout_height="0dp"`在 的两个孩子上`LinearLayout`。

权重用于填充未使用的空间。如果您的孩子的大小为 0，则未使用的空间将按照您的意愿进行划分。

# javascript - 在上传表单中显示所选文件的数量

> ID：15861328
> 
> 赞同：-1
> 
> 时间：2013-04-07T10:25:53.527
> 
> 标签：javascript, jquery, html

我在用

```
<input type="file" name="upload_attachment[]" class="buttonupload" multiple/> 
```

在一个 HTML 表单上上传和处理文件。

当有人从浏览按钮中选择文件时，js/jquery 是否有一种简单的方法来显示所选文件的数量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T10:31:22.787

您可以使用`this.files.length`：

```
$(':file').change(function () {
    $('#numberOfFiles').text(this.files.length + " files selected");
}); 
```

**[演示](http://jsfiddle.net/B8ahH/)**

# extjs - 即使在过滤时重新加载商店后网格也不会改变

> ID：15861329
> 
> 赞同：2
> 
> 时间：2013-04-07T10:26:02.873
> 
> 标签：extjs, extjs4.1

我想要一个在删除任何行并检索具有相同成员 ID 的行后将更改或重新加载的网格。为此，我添加了过滤器。在删除任何行后，我再次使用过滤器回调存储。我的商店过滤得很好，但网格无法显示它......它保留了以前的显示......

```
Ext.define('${pkgName}.v02x001001.SV02X00100101' , {
extend    : 'Ext.grid.Panel',
alias     : 'widget.sv02x00100101',
id        : 'sv02x00100101',
border    : true,
modal     : true,
height    : 300,
width     : 455,
viewConfig: {
    stripeRows    : true,
    forceFit      : true,
    emptyText     : 'No Records to display',
    listeners     : {
        viewready : function(v) {                    
            var store = Ext.data.StoreManager.get('S02X001001');               
            store = !store ? Ext.create("S02X001001") : store;
            var value = Ext.getCmp('member-sv02x00100104').getValue(),
            filters   = new Array();
            store.clearFilter();
            store.filter('member', value);
            filters.push({
                property : 'member', 
                value    : value
              });
            store.loadPage(1, {
                filters  : filters
             }); 
        }
    }
},
initComponent: function() {
    this.store  = 'S02X001001';     

    this.tbar= Ext.create('Ext.ux.StatusBar', {            
        topBorder       : false,
        statusAlign     : 'right',
        items    : [{
            xtype       :'button',
            text        : 'ADD',
            icon        : "${resource(dir: 'images', file: 'ADD01003.png')}",
            listeners   : {
                click   : this.onNewAddress
                }
        },'-']
    });

    this.columns = [
    {
        text            : 'Address Line 1',
        dataIndex       : 'addressline1', 
        sortable        : false,
        flex            : 1
    },{
        text            : 'Address Line 2',
        dataIndex       : 'addressline2',
        sortable        : false,
        width           : 170
    },{
        menuDisabled    : true,
        sortable        : false,
        id              : 'deletee',
        xtype           : 'actioncolumn',            
        width           : 22,            
        items           : [{
            icon        : "${resource(dir: 'images', file: 'DEL01005.png')}",
            tooltip     : 'Delete This?',
            scope       : this,
            handler     : function(grid, rowIdx, colIdx) {
                var record = grid.getStore().getAt(rowIdx);
                var conId  = record.data.id
                this.onDeleteClick(conId);
            }
        }]
    }]; 
    this.callParent(arguments);
},

onNewAddress: function(btn, e, eOpts){
    var view=Ext.widget('sv02x00100102');
    view.show();
    var a = Ext.getCmp('member-sv02x00100104').getValue();
            Ext.getCmp('member-sv02x00100102').setValue(a);
},
onDeleteClick:function(conId){
       Ext.MessageBox.show({
        title       : 'Delete',
        msg         : 'Really want to delete ?',
        icon        : Ext.Msg.WARNING,
        buttons     : Ext.MessageBox.YESNO,
        buttonText  :{ 
            yes: "Delete", 
            no : "No" 
        },
        scope         : this,
        animateTarget : 'deletee',
        fn: function(btn, dbQty){
            if(btn == 'yes'){
                var registration = Ext.create('${appName}.model.M02X001001',{
                    id : conId
                });
                var store = this.getStore();
                registration.destroy({
                    scope   : this,
                    success : function(model, operation) { 
                        if(model != null){
                        var store = Ext.data.StoreManager.get('S02X001001');               
                        store = !store ? Ext.create("S02X001001") : store;
                        var value = Ext.getCmp('member-sv02x00100104').getValue(),
                        filters   = new Array();
                        store.clearFilter();
                        store.filter('member', value);
                        filters.push({
                            property : 'member', 
                            value    : value
                          });
                        store.loadPage(1, {
                            filters  : filters
                        }); 
                       }
                    },
                    failure: function(){
                        console.log('Unable to delete');
                    }
                });           
            }                         
        }         
    });                    
 } 
```

});

如何检索其余的相关行........

这是我的商店............

```
Ext.define('${pkgName}.S02X001001', {
extend    : 'Ext.data.Store',
model     : '${appName}.model.M02X001001',
idProperty: 'id',
autoLoad  : true,
autoSync  : true,
filterParam: 'query',
remoteSort: true,
proxy     : {
    type    : 'ajax',
    noCache : false,
    limitParam: 'limit',
    startParam: 'start',
    url : '${createLink(controller:'C02x001001', action: 'store')}',
    reader:{
        type            : 'json',
        root            : 'data',
        totalProperty   : 'total',
        successProperty : 'success',
        messageProperty : 'message',
        implicitIncludes: true
    },
    simpleSortMode  : true
},
sorters: [{
    property: 'id', 
    direction: 'asc'
}] 
```

});

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T01:36:47.567

它应该自动刷新网格视图，但您可以通过手动方式刷新视图：

使用方法 getView().refresh(); 尝试：

```
Ext.getCmp('sv02x00100101').getView().refresh(); 
```

# javascript - Android 上类似 Firebug 的调试

> ID：15861331
> 
> 赞同：9
> 
> 时间：2013-04-07T10:26:12.277
> 
> 标签：javascript, android, debugging

我看过几篇关于在 Android 上远程调试 javascript 代码的帖子，但它们都忽略了我想要做的事情。

我有一个 Nexus 7，当我离开桌面时，我想将它用作远程开发环境。我创建了一个 chrooted debian 发行版来运行 apache、php 和 git（通过 ssh）。这个 chroot 环境从 chroot 环境外部挂载 /sdcard 目录的子目录。虚拟主机的 Apache 文档根目录是指向其中的一个目录。在离开桌面之前，我可以将最新版本 git push 到平板电脑上。当我返回时， git pull 可以再次获得我所做的事情。

然后我（当离家且未连接到任何网络时）可以使用 Android 编辑器（使用 920 文本编辑器）编辑代码，然后运行浏览器查看我使用 localhost 开发的内容，apache 虚拟主机选择这个起来并显示它。

我正在开发的应用程序不适用于 ANDROID - 它最终适用于桌面。但我希望能够像在桌面上一样调试它。断点和单步执行是最重要的，但我也倾向于在编辑之前使用 firebug 中的 html 部分来调整我的 CSS。

有没有办法让 chrome 开发人员工具或 firebug 插件加载到将在 android 中运行的浏览器中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T06:39:00.293

我在 iPhone 和 iPad 上使用 Firebug lite 小书签，从未在 Android 上尝试过，请查看[http://martinkool.com/post/13629963755/firebug-on-ipad-and-iphone](http://martinkool.com/post/13629963755/firebug-on-ipad-and-iphone)它在 Android 上必须类似。

要激活它，请使用以下步骤：

1.  创建新书签或为页面添加书签
2.  将书签重命名为“Firebug”</li>
3.  复制文本区域链接：

    > javascript:(函数(F,i,r,e,b,u,g,L,I,T,E){if(F.getElementById(b))return;E=F[i+'NS']&&F. documentElement.namespaceURI;E=E?Fi+'NS':Fi;Er;Er;Er;(Fe[0]||Fe[0]).appendChild(E);E=new%20Image;Er;})(文档,'createElement','setAttribute','getElementsByTagName','FirebugLite','4','firebug-lite.js','releases/lite/latest/skin/xp/sprite.png','[https://getfirebug.com/](https://getfirebug.com/) ','#startOpened');

4.  编辑 Firebug 小书签，删除 URL 并粘贴小书签
5.  选择“完成”（在虚拟键盘上），一切就绪

点击该书签应该会在您的移动设备底部为您提供一个功能齐全的 Firebug。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T11:14:28.330

至少对于 Firefox Mobile 来说不是，因为所有的开发工具仍然部分基于[XUL](https://developer.mozilla.org/en-US/docs/XUL)，而 Firefox Mobile 使用的是 Native UI。

我认为在不久的将来不会有任何改变这种情况的计划；这不是一个常见的情况。

但是，您应该能够使用[Debugger API](https://developer.mozilla.org/en-US/docs/SpiderMonkey/JS_Debugger_API_Guide)做一些事情，为 Firefox Mobile 创建一个附加组件。但是不知道值不值得。

# debugging - 调试插件 DLL

> ID：15861340
> 
> 赞同：2
> 
> 时间：2013-04-07T10:27:47.143
> 
> 标签：debugging, dll, windows-7-x64

我正在为应用程序开发插件。我有有问题的旧开发工具。我的开发工具都来自旧的 32 位版本。CodeWarrior 6.7.and 8\. 我正在运行 64 位的 windows 7 pro 并且在使用旧工具时遇到问题。CodeWarrior 调试器只能工作一次，我必须重新启动才能再次工作。使用它也有一些问题。断点停止工作。

我从 IDM 切换到 UeStudio，但无法让调试器工作。我创建了一个项目来使用 Microsoft Visual Studio 10.0 中的编译器。UeStudio 应该使用集成调试器。它会下载 WinDbg.exe，但不会启动。我在 Microsoft 上找到的唯一 WinDbg 来自 Windows (x86) 和 (x64) 的调试工具。它不与 UeStudio 集成。它在一个单独的窗口中启动。我已经玩了一点，但无法让它加载我的 DLL。我不断收到错误，它无法加载我的符号（符号文件不匹配）。我已将其设置为查看我的插件的“.pdb”是否位于双重检查它是否正确。这是我的 DLL 的消息名称。我没有应用程序的符号。他们不提供一个。我可以加载我的源文件并设置断点。但不能检查数据。

有人让 UeStudio 调试在 Windows 7 上工作吗？或者对在 Windows 7 上廉价地调试 DLL 有任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T16:30:59.047

我使用 OllyDebug。 [OllyDbg](http://www.ollydbg.de)

IDA也很好（付费）

# javascript - node.js - 如何进行简单的实时页面更新？

> ID：15861344
> 
> 赞同：18
> 
> 时间：2013-04-07T10:28:16.810
> 
> 标签：javascript, node.js

我对 node.js 非常陌生，但实际上我只想通过学习这门语言来实现一件简单的事情。

我想创建一个网页，通过特定“div”中的代码可以即时将其热交换给当前正在查看该页面的用户。（即 div 包含一些文本，但随后图像替换它。）理想情况下，交换将由网页管理员通过单击按钮手动执行，或者在服务器上触发一些代码或其他东西。网页的普通浏览者无法做到这一点——他们只能看到页面上的实时变化。

现实生活中的例子：

互联网直播已停播，因此“div”包含“off-air”文本。直播时会发生代码的实时热交换，网页的查看者现在会在“div”中看到 html5 广播播放器。

对于 node.js 新手来说，最简单的方法是什么？

非常感谢 ：）

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-07T10:34:11.503

看看 Socket.IO [http://socket.io/#how-to-use](http://socket.io/#how-to-use)

当服务器决定广播更改使用时：

`io.sockets.emit('update-msg', { data: 'this is the data'});`

在客户端首先连接 socket.io，然后等待“update-msg”事件并更新你的 dom：

```
var socket = io.connect('http://localhost');
socket.on('update-msg', function (msg) {
    console.log(msg);
    $('#mydiv').html(msg.data)
}); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-09-21T02:02:34.310

我创建了一个系统/方法来使用 RequireJS 和 Node.js 实时更新（热重载）前端代码。我确保它适用于 React 和 Backbone。你可以在这里读到它：

[https://medium.com/@the1mills/hot-reloading-with-react-requirejs-7b2aa6cb06e1](https://medium.com/@the1mills/hot-reloading-with-react-requirejs-7b2aa6cb06e1)

自己做这件事的基本步骤：

1.  gulp.js 观察者监听文件系统的变化
2.  gulpfile 中的 socket.io 服务器向所有浏览器客户端发送一条消息，其中包含已更改文件的路径
3.  客户端删除代表该文件/模块的缓存，并重新需要它（使用 AJAX 从服务器文件系统中提取它）
4.  前端应用程序被配置/设计为重新评估对它希望热重载的模块的所有引用，在这种情况下，只有 JS 视图、模板和 CSS 可用于热重载 - 路由器、控制器、数据存储（Backbone集合和模型）尚未配置。我确实怀疑所有文件都可以热重新加载，唯一的例外是数据存储。

# objective-c - 检索 NSDictionary 对象的类

> ID：15861346
> 
> 赞同：-2
> 
> 时间：2013-04-07T10:28:28.543
> 
> 标签：objective-c, class, nsdictionary

为什么下面的代码返回的不是 a`NSDictionary`而是 a `__NSDictionaryI`？

```
NSDictionary* dict = [NSDictionary dictionary];
Class c = [dict class];
NSLog(@"%@", c); 
```

我有哪些选项可以检查对象是否是 的实例`NSDictionary`？正如我发现的那样，我无法打电话`[__NSDictionaryI class]`，因为它不可见。

`[dict classForCoder]`返回`NSDictionary`并且似乎是一个很好的解决方案，但是在调用某个自定义类的对象时它不会失败吗？检查对象是否是给定类的实例的最通用方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T10:43:03.457

根据可以在[此处](https://github.com/Musixmatchdev/ObjectiveHeaders/blob/master/Headers/iPhoneOS6.0.sdk/CoreFoundation/__NSDictionaryI.h)找到的标头__NSDictionaryI 是 NSDictionary 的后代，所以我想您可以使用此检查：

```
NSDictionary* dict = [NSDictionary dictionary];
if ([dict isKindOfClass:[NSDictionary class]])
{
//your code here
} 
```

它应该适用于 NSDictionary 和 __NSDictionaryI 实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T10:34:26.520

[如何检查 NSDictionary 中的类](https://stackoverflow.com/questions/8879129/how-to-check-a-class-in-a-nsdictionary)

```
if([object isKindOfClass:[AObjectClass class])
{
    NSLog(@"object is of type AObjectClass");
} 
```

# ios - 1个按钮，播放10个声音？

> ID：15861350
> 
> 赞同：0
> 
> 时间：2013-04-07T10:28:46.220
> 
> 标签：ios, objective-c, cocoa-touch, button, audio

1个按钮，播放10个声音？我怎样才能得到一个按钮来按顺序播放一些声音？

如何为这个动作添加额外的声音？

```
-(IBAction)sound1 
{
    CFBundleRef mainBundle = CFBundleGetMainBundle();
    CFURLRef soundFileURLRef;
    soundFileURLRef = CFBundleCopyResourceURL(mainBundle, (CFStringRef) @"sound1", CFSTR("wav"), NULL);
    UInt32 soundID;
    AudioServicesCreateSystemSoundID(soundFileURLRef, &soundID);
    AudioServicesPlaySystemSound(soundID);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-08T00:02:17.523

如果声音名称为 sound0 ... soundN，您可以只介绍 ivars — 一个跟踪当前索引，一个定义声音的数量。

```
@implementation MyClass {
    NSUInteger soundIdx; 
    NSUInteger soundCount;
}    

-(instancetype) init //or any other entry point method like viewDidLoad,....
{
    self = [super init];
    if (self) {
        soundCount = 10;
    }
    return self;
}

-(IBAction)sound 
{
    CFBundleRef mainBundle = CFBundleGetMainBundle();
    CFURLRef soundFileURLRef;
    soundFileURLRef = CFBundleCopyResourceURL(mainBundle, (CFStringRef) [NSString stringWithFormat:@"sound%lu", soundIdx], CFSTR("wav"), NULL);
    UInt32 soundID;
    AudioServicesCreateSystemSoundID(soundFileURLRef, &soundID);
    AudioServicesPlaySystemSound(soundID);

    soundIdx = (++soundIdx) % soundCount;

}
@end 
```

* * *

如果声音名称不遵循任何特定的命名约定，您可以将它们放在一个数组中

```
@implementation MyClass {
    NSUInteger soundIdx; 
    NSArray *soundNames;
}    

-(instancetype) init //or any other entry point method like viewDidLoad,....
{
    self = [super init];
    if (self) {
        soundNames = @[@"sound1",@"hello", @"ping"];
    }
    return self;
}

-(IBAction)sound
{
    CFBundleRef mainBundle = CFBundleGetMainBundle();
    CFURLRef soundFileURLRef;
    soundFileURLRef = CFBundleCopyResourceURL(mainBundle, (CFStringRef) soundNames[soundIdx], CFSTR("wav"), NULL);
    UInt32 soundID;
    AudioServicesCreateSystemSoundID(soundFileURLRef, &soundID);
    AudioServicesPlaySystemSound(soundID);

    soundIdx = (++soundIdx) % [soundNames count];

}    
@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-07T23:20:32.440

我在 AVAudioPlayer 上遇到了最好的运气——它是一个名为 AVFoundation 的库，您可以通过“Build Phases”（首先单击左上角的蓝色 xcode 项目名称）然后“Link Binary with Libraries”导入

然后尝试这个非常简单的 YouTube 教程来制作按钮播放声音：

[http://youtu.be/kCpw6iP90cY](http://youtu.be/kCpw6iP90cY)

那是我两年前用来创建我的第一个音板的相同视频。Xcode 5 有点不同，但代码都可以工作。

好的，现在您需要创建一个循环播放这些声音的数组。从 TreeHouse 查看此链接：

[https://teamtreehouse.com/forum/creating-an-array-with-mp3-sound-files](https://teamtreehouse.com/forum/creating-an-array-with-mp3-sound-files)

# php - PHP：在重定向失败之前删除 cookie

> ID：15861353
> 
> 赞同：1
> 
> 时间：2013-04-07T10:29:06.847
> 
> 标签：php, session, redirect, cookies

有很多关于这个问题的帖子，但我无法解决它。我尝试删除 cookie 以便在 PHP 中注销用户并在之后进行重定向：

```
 $currentCookieParams = session_get_cookie_params(); 
    session_set_cookie_params($currentCookieParams['lifetime'], '/', $currentCookieParams['domain'], $currentCookieParams['secure'], true);
    session_name("PHPAUTH");
    session_start();

    $_SESSION = array();

    if (ini_get("session.use_cookies"))
    {
        $params = session_get_cookie_params();
        setcookie(session_name(), '', time() - 42000, $params["path"], $params["domain"], $params["secure"], $params["httponly"]);
    }
    session_destroy();          

    header("Location: http://localhost/Home/Index");
    exit; 
```

但是饼干还在。当我禁用重定向时，cookie 被成功删除。但是通过重定向，cookie 无论如何都不会被删除。

之后如何确保通过重定向删除 cookie？

**编辑：**

看来我自己的代码在下一个请求中重新创建了 cookie。我想检查用户是否仍然登录，如果没有重定向到登录页面：

```
 $currentCookieParams = session_get_cookie_params(); 
        session_set_cookie_params($currentCookieParams['lifetime'], '/', $currentCookieParams['domain'], $currentCookieParams['secure'], true);
        session_name("PHPAUTH");
        session_start();     

        if (!array_key_exists('angemeldet', $_SESSION) || !$_SESSION['angemeldet'])
        {
            header("Location: http://localhost/Account/LogOn");
            exit;
        } 
```

如何在不重新创建 cookie 的情况下检查这一点？也许是一个愚蠢的问题，但我现在很困惑......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T10:48:46.440

我认为一个`header()`函数必须高于任何其他类型的函数。如果我是对的并且您仍然想要这样的编程格式，您可以尝试此代码是否有效：

```
if (ini_get("session.use_cookies"))
{
    $params = session_get_cookie_params();
    setcookie(session_name(), '', time() - 42000, $params["path"], $params["domain"], $params["secure"], $params["httponly"]);
}
session_destroy();          

echo '<meta http-equiv="REFRESH" content="0;url=http://localhost/Home/Index">';
exit; 
```

但是，当然，前提是您愿意这样做。我只是给你一个例子，我不确定结合`<meta http-equiv="REFRESH" content="0;url=http://localhost/Home/Index">`你的语法是否会起作用。

# javascript - 为什么我的 MinArray 实现不回收未使用的 id？

> ID：15861358
> 
> 赞同：0
> 
> 时间：2013-04-07T10:29:38.957
> 
> 标签：javascript, arrays

我正在构建一个基本的 MinArray，即一个数组包装器，它将已删除的 id 推送到队列中，并在增加长度之前重用回收的 id；

但是，我的 MinArray 不会回收 id，它只是不断增加。

完整的代码和测试可以在这个[fiddle](http://jsfiddle.net/mkY2r/)找到。

此代码插入一个新值并返回分配的 id：

```
MinArray.prototype.insert = function(val){
    var id;
    var recycledId = this._recycledIds.shift();
    if(recycledId){
        id = recycledId;
    }else{
        id = this._nextId++;
    }
    this._vals[id] = val;
    this._executeCallbacks(this.oninsert, this._vals[id]);
    this.length++;
    return id;
}; 
```

这段代码从数组中删除一个项目：

```
MinArray.prototype.remove = function(id){
    if(this._vals[id]){
        this._executeCallbacks(this.onremove, this._vals[id]);
        delete this._vals[id];
        this._recycledIds.push(id);
        this.length--;
        return true;
    }else{
        return false;
    }
}; 
```

或者，您知道我可以自由使用的任何好的现有实现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T10:48:12.897

解决方案非常简单：

```
MinArray.prototype.insert = function(val){
    var id;
    var recycledId = this._recycledIds.shift();
    if(typeof recycledId === 'number'){ // <<<<<
        id = recycledId;
    }else{
        id = this._nextId++;
    }
    this._vals[id] = val;
    this._executeCallbacks(this.oninsert, this._vals[id]);
    this.length++;
    return id;
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T10:48:45.933

更改`if(recycledId){` 为，`if(recycledId !== undefined){` 因为你写零的方式也是错误的 - 虽然它应该是正确的工作

编辑：函数中也存在相同的错误`remove`- 如果您的 _vals[id] 包含零（或假或空字符串），它将不会被删除。更好地更改`if(this._vals[id]){`并`if(this._vals[id] !== undefined){` 提醒开发人员 MinArray 不能包含“未定义”值作为数据。

# jquery - jquery将数据从表行传递到函数

> ID：15861360
> 
> 赞同：1
> 
> 时间：2013-04-07T10:30:12.877
> 
> 标签：jquery

我多年来一直使用这种方法，但我不知道这是否是个好主意。如果要将数据传递给函数，您将如何进行？

例如，将字符串数据传递给 jquery .hover 事件：

```
<table>...

<tr class='my_row' id='uniqueid_param1_param2_param3'>
   <td>Some value #1</td>
   <td>Some value #2</td>
   ...
   <td>Some value #n</td>
</tr> 
```

在 jQuery 中：

```
$('.my_row').hover(function(){
   var param = $(this).attr('id').split('_');

   param[1]; // param1
   param[2]; // param2
   param[3]; // param3
}); 
```

有优点也有缺点，我就不一一列举了，但是我再写一个例子，普通人是怎么用的，或者我觉得别人是怎么用的：

```
<table>...

<tr class='my_row'
      onmouseover="handle_param('param1', 'param2', 'param2');"
      onmouseout="handle_param('param1', 'param2', 'param2');">
   <td>Some value #1</td>
   <td>Some value #2</td>
   ...
   <td>Some value #n</td>
</tr> 
```

在js中：

```
function handle_param(param1, param2, param3){
  //...
} 
```

我不喜欢这种方法，如果你有很多行，这不是一个好主意。

那么，您将如何进行？如果必须将数据传递给函数，你会怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T10:36:39.720

我自己会使用完全有效的数据属性：

```
<tr class='my_row' id='uniqueid' data-param1='param1' data-param2='param2'> 
```

js

```
$('.my_row').on('mouseenter mouseleave', function() {
   var param1 = $(this).data('param1'),
       param2 = $(this).data('param2');

   .....
}); 
```

# ruby-on-rails - 在 Rails 中安装引导程序 - 删除当前资产

> ID：15861362
> 
> 赞同：0
> 
> 时间：2013-04-07T10:30:17.393
> 
> 标签：ruby-on-rails, ruby-on-rails-3, twitter-bootstrap, stylesheet

我看到[https://github.com/seyhunak/twitter-bootstrap-rails](https://github.com/seyhunak/twitter-bootstrap-rails)如何使用`rails generate scaffold Product name price:decimal --skip-stylesheets`.

我的问题是：如何从现有应用程序中删除当前资产（例如样式表），以便我可以安装引导程序并且不会有任何冲突？

PS这个命令似乎是一个脚手架 - 它是否为整个应用程序创建了一个布局？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T11:09:16.617

您的样式表存储在`app/assets/stylesheets`清单文件中并单独列出，默认情况下为`app/assets/stylesheets/application.css`.

不要删除清单文件。打开它，浏览列出的每一项，然后将它们一一删除——包括清单条目和实际文件。请注意`require_tree`and`require_directory`指令，因为它们包含整个目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T10:38:21.707

如果您使用 SASS，那么您可以使用一个 gem [https://github.com/thomas-mcdonald/bootstrap-sass](https://github.com/thomas-mcdonald/bootstrap-sass)来代替您现在正在尝试的操作。只要你有

```
@import "bootstrap"; 
```

在 app/assets/stylesheets 中以扩展名 .css.scss 结尾的样式表中（例如 example.css.scss）

# c# - 关于将 Office 转换为 PDF

> ID：15861366
> 
> 赞同：1
> 
> 时间：2013-04-07T10:30:26.553
> 
> 标签：c#, excel, pdf

我使用“Microsoft.Office.Interop.Excel”将 Excel 转换为 PDF，但是当我的源文件大小很大（例如 10MB）时，需要很长时间...

```
 public static bool XLSConvertToPDF(string sourcePath, string targetPath)
    {
        bool result = false;
        XlFixedFormatType targetType = XlFixedFormatType.xlTypePDF;
        object missing = Type.Missing;
        Microsoft.Office.Interop.Excel.ApplicationClass application = null;
        Workbook workBook = null;
        try
        {
            application = new Microsoft.Office.Interop.Excel.ApplicationClass();
            object target = targetPath;
            object type = targetType;
            workBook = application.Workbooks.Open(sourcePath, missing, missing, missing, missing, missing,
                    missing, missing, missing, missing, missing, missing, missing, missing, missing);
            workBook.ExportAsFixedFormat(targetType, target, XlFixedFormatQuality.xlQualityStandard, true, false, missing, missing, missing, missing);
            result = true;
        }
        catch
        {
            result = false;
        }
        finally
        {
            if (workBook != null)
            {
                workBook.Close(false, missing, missing);
                workBook = null;
            }
            if (application != null)
            {
                application.Quit();
                application = null;
            }
            GC.Collect();
            GC.WaitForPendingFinalizers();
            GC.Collect();
            GC.WaitForPendingFinalizers();
        }
        return result;
    } 
```

1.有没有好的建议或替代组件可以使用？

2.我知道有Adobe API，但效率如何？

顺便说一句，我也想将docx或pptx转换为pdf。非常感谢！！

# mysql - 从 MySQL 表中删除一行并修改特定字段

> ID：15861367
> 
> 赞同：-1
> 
> 时间：2013-04-07T10:30:32.290
> 
> 标签：mysql

在这个表中

```
mysql> select * from classics;
+--------------------------+------------------------------+-----------------+------+-------+---------------+
| author                   | title                        | category        | year | pages | isbn          |
+--------------------------+------------------------------+-----------------+------+-------+---------------+
| Mark Twain (S.L.Clemens) | the adventures of tom sawyer | Classic Fiction | 1876 | 65535 |               |
| Charles Dickens          | A Christmas Carol            | Classic Fiction | 1849 |    50 | 23423664      |
| NULL                     | NULL                         | NULL            | NULL |  NULL | 23242362346   |
+--------------------------+------------------------------+-----------------+------+-------+---------------+ 
```

如何删除最后一行并设置第一行的isbn编号？我正在尝试这样的事情：

```
alter table classics drop ?? where author=NULL;
insert into classics(isbn) values('234525246') where title like "%adventures%"; 
```

如何正确执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T10:32:42.610

为此，您需要 2 个语句。要删除行使用`delete`

```
delete from classics 
where author IS NULL; 
```

要更新现有行中的值，请使用`update`

```
update classics 
set isbn = '234525246'
where title like '%adventures%'; 
```

`alter`用于更改表的结构而不是其内容。
`insert`用于向表中插入新数据，而不是修改现有数据。

# java - indexOf() 字符串类 Java

> ID：15861368
> 
> 赞同：0
> 
> 时间：2013-04-07T10:30:35.287
> 
> 标签：java

我需要帮助将`indexOf`字符串与字符串数组进行比较并显示正确的匹配项。

```
public static void printvehicleMAKE(ServiceAppointment[] services, Scanner input){

    System.out.print("Enter vehicle make: ");

    String make = input.next();
    String model = make.substring(0,3);

    System.out.println(model);

    boolean flag = false;

    System.out.println("Details of all vehicles manufactured by " +make+" : ");
    for (int i=0;i<6;i++) {
        if(model.equalsIgnoreCase(services[i].getvehicleMAKEMODEL())){
            System.out.printf("\n%10s%15s%20s", services[i].getregoNUMBER(),
                    services[i].getbuildYEAR(), services[i].getvehicleMAKEMODEL());
            flag = true;
            }

    }

    if(flag==false)
        System.out.print("No service appointments were found for vehicles " 
                + "made by " + make);   
} 
```

例子。如果我输入“toyota”或“aston”，我希望它比较字符串的第一个/第二个字符并从字符串数组中返回匹配项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T11:23:08.230

假如说

```
services[i].getvehicleMAKEMODEL()) 
```

给出完整的字符串，如“Toyota Camry”，你必须调整你的过滤条件。目前您`"to"`与`"Toyota Camry"`. 这不匹配。所以你应该改用这个

```
model.equalsIgnoreCase(services[i].getvehicleMAKEMODEL().substring(0,3)) 
```

# sql-server - Visual Studio 2012 中的密码验证 - 使用 BindingSource 和 SQL 数据库

> ID：15861372
> 
> 赞同：0
> 
> 时间：2013-04-07T10:30:57.187
> 
> 标签：sql-server, vb.net, visual-studio-2010, data-binding, passwords

我需要帮助。需要进行密码验证并且不知道为什么它不起作用。有人可以告诉我我的代码缺少什么或者我的思维方式实际上有什么问题吗？我将它连接到 dataset2，其中名为 Users2 的表。表由两列组成：“用户名”和“密码”。Users2BiningSource.Find 应该返回当前查询所在索引的值。返回的值总是-1，我猜的意思是没有找到（假）。我在 Windows 7 上使用 Microsoft Visual Studio 2012 和 SQL Server 2008 SP3。感谢您的时间和帮助！

```
Imports Hotel_Booking_System.DataSet2TableAdapters

Public Class Logging

Public Sub check_Click(sender As Object, e As EventArgs) Handles Button1.Click
    Me.Check_Details()
End Sub

Private Sub Quit_Click(sender As Object, e As EventArgs) Handles Button2.Click
    Me.Close()
End Sub

Public Sub Logging_Load(sender As Object, e As EventArgs) Handles MyBase.Load
    Me.Users2TableAdapter.Fill(Me.DataSet2.Users2)
    'TODO: This line of code loads data into the 'DataSet2.Users2' table. You can move,     or remove it, as needed.

End Sub

Public Sub Check_Details()

Me.Users2BindingSource.AddNew()

    Dim Usrnm As String = ""
    Usrnm = txtUsername.Text
    Dim Pswrd As String = ""
    Pswrd = txtPassword.Text
    Dim Found As Integer
    Found = Users2BindingSource.Find("Username", Usrnm)
    Dim Found2 As Integer
    Found2 = Users2BindingSource.Find("Password", Pswrd)

    If Found >= 0 And Found2 >= 0 And Usrnm = "Admin" Then
        Me.Hide()
        Booking.Show()
    ElseIf Found >= 0 And Found2 >= 0 Then
        Me.Hide()
        Rooms.Show()
    Else
        MsgBox("Wrong username or password. Please try again", MsgBoxStyle.DefaultButton1,     "SOMETHING WENT WRONG")
    End If
    Label1.Text = Found 'checking the value of found
    Label2.Text = Found2 ' checking the value of found2
End Sub

End Class 
```

# ios - iOS Unwind Segue 在嵌入导航控制器时停止工作

> ID：15861373
> 
> 赞同：7
> 
> 时间：2013-04-07T10:31:02.367
> 
> 标签：ios, storyboard, segue

我有一个 UIViewController，它有一个按钮，可以将 UIViewController 作为表单执行模态 segue。在那个表单上是一个取消按钮，它带有一个展开到原始 UIViewController 的转场。这似乎非常愉快地工作并且取消了表单。

一旦我选择原始 UIViewController 并选择 XCode 中的选项以嵌入导航控制器，展开 segue 似乎不再起作用，并且模式表单将不再取消。

我敢肯定有一个简单的解释，但它目前正在逃避我，所以欢迎任何想法。

谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-07T15:54:43.570

我不知道为什么你会看到你所看到的行为，我也看到了。它发生在页面表和表单演示文稿中，但不适用于全屏。但是，展开转场仍在调用您放入原始控制器（您将展开转场连接到的那个）中的方法。因此，您需要做的就是在该方法中添加一行：

```
[self dismissViewControllerAnimated:YES completion:nil]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-26T11:33:35.793

这已经回答了，但上面并没有给我完整的解决方案，所以我想我会分享我的。

对我来说，从未调用过 unwind 方法，因此我无法执行上述操作。相反，我用 IBAction 制作了一个简单的按钮并调用它。下面的快速示例：

```
@IBAction func cancelToRecipeController() {
    self.dismissViewControllerAnimated(true, completion: nil)
    print("cancel to recipe controller ran")
} 
```

感谢上面的@rdelmar 方法调用！

（这是为 ios 9 添加的）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-12T09:07:18.807

```
 self.dismissViewControllerAnimated(true, completion: nil) 
```

“解雇”对我不起作用，但 popToRoot 效果很好。

```
 [self.navigationController popToRootViewControllerAnimated:YES]; 
```

# c# - 如何自定义 TreeNode 在 TreeView 中显示的顺序/位置？

> ID：15861374
> 
> 赞同：4
> 
> 时间：2013-04-07T10:31:03.243
> 
> 标签：c#, asp.net, webforms, treeview, position

我有： 具有 4 个层次结构级别的父子数据：1 个系统、2 个子系统、3 个单元、4 个组件
我的问题（见图）：TreeView 显示一个组件，它像 Comp2 一样附加到根节点。我的目标：在其对应的“列”中显示所有节点（例如 Comp3）。
我尝试了所有缩进、间距、填充，但没有任何效果。
![在此处输入图像描述](https://i.stack.imgur.com/HcIKi.png)

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T10:42:30.763

您可以为节点使用 itemtemplate，给它们一个宽度，它们将准确地显示在您想要的位置。

此代码适用于 WPF，但我认为应该没有太大区别：

首先，为您的 NodeViewModels 提供一个 ItemTemplate，包括一个 HierachicalDataTemplate

```
<TreeView.ItemTemplate>
    <HierarchicalDataTemplate DataType="{x:Type local:NodeViewModel}" ItemsSource="{Binding Children}">
        <ContentPresenter x:Name="item" ContentTemplate="{StaticResource notSelectedItemTemplate}" />
        <HierarchicalDataTemplate.Triggers>
            <DataTrigger Binding="{Binding IsSelected}" Value="True">
                <Setter TargetName="item" Property="ContentTemplate" Value="{StaticResource selectedItemTemplate}" />
            </DataTrigger>
        </HierarchicalDataTemplate.Triggers>
    </HierarchicalDataTemplate>
</TreeView.ItemTemplate> 
```

其次，为您的节点提供一个 DataTemplate：

```
<DataTemplate x:Key="selectedItemTemplate" DataType="{x:Type local:NodeViewModel}">
    <Grid Height="Auto" TextElement.Foreground="Black">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"></RowDefinition>
            <RowDefinition Height="Auto"></RowDefinition>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="100"></ColumnDefinition>
            <ColumnDefinition Width="50"></ColumnDefinition>
            <ColumnDefinition Width="100"></ColumnDefinition>
        </Grid.ColumnDefinitions>

        <TextBlock Grid.Column="0" Text="{Binding Id}" HorizontalAlignment="Left"></TextBlock>
        <TextBlock Grid.Column="1" Text="----" HorizontalAlignment="Left"></TextBlock>
        <TextBlock Grid.Column="2" Text="{Binding Name}" HorizontalAlignment="Left"></TextBlock>
    </Grid>
</DataTemplate> 
```

如您所见，我有两个 DataTemplate，因为我有一个不同的用于选定节点。对于您不需要的情况，因此只需忽略“notSelectedItemTemplate”并将其删除。

# objective-c - 暂停一个 CCMove来自 Cocos2d 2.0 ios

> ID：15861377
> 
> 赞同：1
> 
> 时间：2013-04-07T10:31:30.980
> 
> 标签：objective-c, cocos2d-iphone

我正在开发一个游戏，我有时间完成关卡，在此期间我有一个填充条动画，在那个特定的动画上我使用 CCMoveBy：

```
 self.animatedBar = [CCMoveBy actionWithDuration:time position: ccp(12, -20)];
  CCNode* animatedContainer = [self getChildByTag:1];
  [animatedContainer runAction:self.animatedBar]; 
```

有什么办法可以说 [animatedBar pause] 和 [animatedBar resume] 吗？或者最好的办法是把它放到我的游戏循环中并在那里暂停？（如果 BOOL paused 设置为 true，我会返回）。我将来会有更多的动画（与游戏核心无关，只是为了让它更“闪亮”）所以我想避免使用：

```
 [animatedContainer pauseSchedulerAndActions]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T13:18:25.720

cocos2d 中没有用于操作的暂停/恢复方法，所以第一种方法 - 您可以实现自己的 CCAction 子类，这将允许这样做，或者只是停止当前操作并重新创建它而不是取消暂停。

# r - 按列连接两个矩阵并提取子矩阵

> ID：15861380
> 
> 赞同：0
> 
> 时间：2013-04-07T10:32:15.603
> 
> 标签：r, perl, matrix, subset

我有两个矩阵（例如，A 和 B）。我想根据 A 的第一列的顺序提取 B 的列：

例如

矩阵A

```
name score
a 0.1
b 0.2
c 0.1
d 0.6 
```

矩阵 B

```
a    d   b   c   g   h
0.1 0.2 0.3 0.4 0.6 0.2
0.2 0.1 0.4 0.7 0.1 0.1
... 
```

我希望矩阵 B 最后看起来像这样

矩阵 B_modified

```
a    b   c   d
0.1 0.3 0.4 0.2
0.2 0.4 0.7 0.1 
```

这可以在 perl 或 R 中完成吗？非常感谢提前

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T15:40:38.170

如果您的数据源自 R 数据结构，那么将其导出并使用 Perl 解决此问题是不恰当的。但是，如果您的文本文件看起来像您所显示的数据，那么这里有一个适合您的 Perl 解决方案。

我已将输出拆分为空格。如有必要，可以非常简单地进行更改。

```
use strict;
use warnings;
use autodie;

sub read_file {
  my ($name) = @_;
  open my $fh, '<', $name;
  my @data = map [ split ], <$fh>;
  \@data;
}

my $matrix_a = read_file('MatrixA.txt');
my @fields = map $matrix_a->[$_][0], 1 .. $#$matrix_a;

my $matrix_b = read_file('MatrixB.txt');
my @headers = @{$matrix_b->[0]};
my @indices = map {
  my $label = $_;
  grep $headers[$_] eq $label, 0..$#headers
} @fields;

for my $row (0 .. $#$matrix_b) {
  print join('  ', map $matrix_b->[$row][$_], @indices), "\n";
} 
```

**输出**

```
a  b  c  d
0.1  0.3  0.4  0.2
0.2  0.4  0.7  0.1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T11:45:00.577

我不知道你面临什么问题。这就是我的做法。

```
## get data as matrix
a <- read.table(header=TRUE, text="name score
a 0.1
b 0.2
c 0.1
d 0.6", stringsAsFactors=FALSE) # load directly as characters

b <- read.table(header=TRUE, text="a    d   b   c   g   h
0.1 0.2 0.3 0.4 0.6 0.2
0.2 0.1 0.4 0.7 0.1 0.1", stringsAsFactors=FALSE)

a <- as.matrix(a)
b <- as.matrix(b) 
```

* * *

现在子集得到你的最终结果：

```
b[, a[, "name"]]
#        a   b   c   d
# [1,] 0.1 0.3 0.4 0.2
# [2,] 0.2 0.4 0.7 0.1 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-07T11:56:40.837

错误 ：

```
[.data.frame(b, , a[, "name"]) : undefined columns selected 
```

意味着您尝试获取未定义`b`但存在于中的列`a$name`。一种解决方案是使用`intersect`with `colnames(b)`。这也会将因子转换为字符串，并且您会得到正确的顺序。

```
b[, intersect(a[, "name"],colnames(b))] ## the order is important here 
```

例如，我用这个数据测试这个：

```
b <- read.table(text='
a    d   b   c
0.1 0.2 0.3 0.4
0.2 0.1 0.4 0.7',header=TRUE)

a <- read.table(text='name score
a 0.1
z 0.5
c 0.1
d 0.6',header=TRUE)

b[, intersect(a[, "name"],colnames(b))]

    a   c   d
1 0.1 0.4 0.2
2 0.2 0.7 0.1 
```

# python - 如果我将 python-qt 与 pycharm 一起使用，我会得到什么好处吗？

> ID：15861383
> 
> 赞同：0
> 
> 时间：2013-04-07T10:32:40.593
> 
> 标签：python, pyside, pycharm

我可以将 python-qt 与 pycharm 一起使用，还是它已经发货或内置到 pycharm 中？

如果我在pycharm中开发时使用python-qt和pyside，我会得到什么好处吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T10:48:22.680

PyCharm 本身既不使用 Qt 也不使用 python-qt，也不附带其中任何一个。在 PyCharm 中使用 python-qt 开发自己的项目是可能的；但是，python-qt 旨在嵌入到 C++ 应用程序中，而 PyCharm 不包含任何 C++ 支持。

# c# - 异步，等待不能隐式转换任务

> ID：15861384
> 
> 赞同：0
> 
> 时间：2013-04-07T10:32:42.413
> 
> 标签：c#, wpf, image, asynchronous, webcam

`async`我在编写检索`Image`表单的方法时遇到问题`WebCam`。

我这样称呼这个方法：

```
void webcam_ImageCaptured(object source, WebcamEventArgs e)
{
    _FrameImage.Source = Helper.LoadBitmap((System.Drawing.Bitmap)e.WebCamImage);
} 
```

和：

```
public static BitmapSource LoadBitmap(System.Drawing.Bitmap source)
{
    ip = source.GetHbitmap();

    bs = System.Windows.Interop.Imaging.CreateBitmapSourceFromHBitmap(ip, IntPtr.Zero, System.Windows.Int32Rect.Empty,
    System.Windows.Media.Imaging.BitmapSizeOptions.FromEmptyOptions());
    DeleteObject(ip);

    return bs;
 } 
```

上面的代码有效（它来自库），我试着写这个：

```
public async static Task<BitmapSource> LoadBitmap(System.Drawing.Bitmap source) 
{
    return await Task.Run(() =>
    {
        ip = source.GetHbitmap();

        bs = System.Windows.Interop.Imaging.CreateBitmapSourceFromHBitmap(ip, IntPtr.Zero, System.Windows.Int32Rect.Empty,
        System.Windows.Media.Imaging.BitmapSizeOptions.FromEmptyOptions());
        DeleteObject(ip);

        return bs;
    });
} 
```

我得到错误：

> 错误 3 无法将类型“System.Threading.Tasks.Task”隐式转换为“System.Windows.Media.ImageSource”

而且不知道为什么，因为我返回了同样的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T10:50:58.307

在我看来，您的错误在第一个代码片段中，应该是：

```
_FrameImage.Source = await Helper.LoadBitmapAsync((System.Drawing.Bitmap)e.WebCamImage); 
```

我添加了 await 关键字和 Async 后缀（根据 Filip 的建议）。

函数的结果`LoadBitmapAsync`是一个任务，您需要在将其分配给`Source`属性之前等待其结果。

# android - 在片段中实现 mapview 版本 1？

> ID：15861390
> 
> 赞同：0
> 
> 时间：2013-04-07T10:33:18.190
> 
> 标签：android, android-mapview, fragment

有没有办法在片段中实现 mapview 版本 1？我试过这样的：

主要活动：

```
public class MainActivity extends FragmentActivity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);                

    } 
```

然后，我想要 2 个片段。一个有地图视图，第二个将有一个文本视图，其中将显示位置。

我无法实现第一个片段。我不知道如何实现地图。我的意思是，要让地图视图工作，它需要“扩展 MapActivity”，但我需要“扩展片段”。

另外，在 main.xml 中怎么做？我试过：

```
 <fragment 
        class="com.google.android.maps.MapView"
        android:name="com.example.....MapClass"  //is this right?but it is necessary for fragment?
        android:id="@+id/fragment1"
        android:layout_weight="1"
        android:layout_width="0px"
        android:layout_height="match_parent"
        android:apiKey="mykey" />
    <fragment 
        class="com.example...getloclass"
        android:id="@+id/fragment2"
        android:layout_weight="1"
        android:layout_width="0px"
        android:layout_height="match_parent" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T11:28:08.207

从这里[https://developers.google.com/maps/documentation/android/v1/hello-mapview](https://developers.google.com/maps/documentation/android/v1/hello-mapview)，您可以看到

> 自 2012 年 12 月 3 日起正式弃用 Google Maps Android API 版本 1

所以你不应该再使用`MapView`了。我建议你改用 a `MapFragment`。在此处查看优秀的文档：[https ://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/MapFragment](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/MapFragment)

# gwt - 用于 Web 应用程序开发的 Vaadin - 几乎没有疑问

> ID：15861391
> 
> 赞同：6
> 
> 时间：2013-04-07T10:33:18.433
> 
> 标签：gwt, client, cloud, vaadin

我们正在尝试为 Web 应用程序的客户端开发选择一个框架。这些是我们应用程序的关键点。

1) 用户在客户端执行许多活动的富文本应用程序。

2) 我们正在寻求使用 Java 技术进行开发

3) 服务将在云端提供。

4) 需要移动支持。

5) 可扩展性也是一个主要问题。

我在网上浏览了很多文档和信息以及这段视频[http://twit.tv/show/floss-weekly/187](http://twit.tv/show/floss-weekly/187)，现在已经离开了**Vaadin**和**普通的 GWT**。我在 GWT 开发方面有一点经验，但在 Vaadin 中没有（我只在 Vaadin 中编写了几个示例程序）。请帮助我理解一些事情。

1) 如果我必须在 Vaadin 中编写一个新的小部件，完成它的难易程度如何？

2) Vaadin 小部件或概念是否有任何明显的问题，可能会阻碍任何应用程序？

3) 如果明天我们决定切换回 GWT，考虑到 Vaadin 与所有服务器代码逻辑一起工作，这是否可行？

4) Vaadin 每次都访问服务器的方法是否会影响部署在云上的应用程序？

5）最后但最重要的是，论坛支持和未来的开发如何？

非常感谢。请注意，我已经浏览了许多关于这些讨论的文章和链接，但我很高兴能从一个至少在一段时间内对这些东西有实际经验的人那里知道。再次感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-30T07:40:36.990

我认为你应该根据每个架构做出这个决定，因为这是它们最大的不同点。

Vaadin 遵循[半对象模式](http://c2.com/cgi/wiki?HalfObjectPlusProtocol)，因此更类似于 Eclipse RAP（和 ZK）而不是 GWT。你基本上有一个服务器应用程序，你可以从浏览器控制它。想想一个简单的 Button，它的状态是在服务器上保持，在浏览器中你会看到它的表示。每次 Button 的状态发生变化时，它都必须与服务器通信以更新其状态。因此，对于您拥有的每个小部件都是如此。

我必须说我对 Vaadin 或 RAP 没有太多经验，但想象一下，当您有许多小部件和许多同时使用它们的用户时，您的服务器将不得不处理多少种状态。这在云中可能不是一个大问题，但可能在资源有限的传统服务器上。

也就是说，您可以想象这种方法也不是很适合移动设备。每次状态更改都会导致服务器往返，但在移动设备上，您的连接可能很差，甚至根本没有连接。在这里，我显然更喜欢普通的 GWT，因为它可以完全在浏览器中运行并且也可以“离线”使用。

你的另一个问题是关于小部件的。的确，GWT 没有提供像 Vaadin 那么多的小部件，但是有很好的小部件库可以补充现有的 GWT 小部件。问题是，您不能从 Vaadin 开始，然后决定切换回 GWT，因为用 Vaadin 编写的小部件不能在普通 GWT 中使用。但反过来说，GWT 小部件和自写小部件可在 Vaadin 中使用。

我建议从普通的 GWT 开始，用 UiBinder 编写自己的小部件，这非常容易。如果您想使用一些更复杂的小部件，请查看像[GWT-Bootstrap](http://gwtbootstrap.github.io/)或[Sencha GXT](http://www.sencha.com/products/gxt)这样的小部件库，它们与普通 GWT 配合得非常好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-07-06T20:41:04.473

# GWT

> 现在留下了 Vaadin 和普通的 GWT。

Vaadin 7 和 Vaadin 8，现在称为[Vaadin Framework](https://vaadin.com/framework)，都是基于 Java 的[Google Web Toolkit (GWT)](https://en.wikipedia.org/wiki/Google_Web_Toolkit)包装器。

您为业务逻辑和 UI 创建编写纯 Java 代码。此 Java 代码在[Java Servlet](https://en.wikipedia.org/wiki/Java_servlet) [Web 容器](https://en.wikipedia.org/wiki/Web_container)中的服务器端 JVM 中运行。当 Vaadin 使用 GWT 自动生成必要的 HTML、CSS、JavaScript、DOM、AJAX、XML 和 JSON、WebSocket 以及在用户的客户端 Web 浏览器中呈现 Web 应用程序的用户界面所需的推送代码时，奇迹就会发生.

因此，服务器端是纯 Java，客户端是纯 Web 标准技术（客户端没有 Java）。

# 网页组件

Vaadin 10，现在称为[Vaadin Flow ，用新兴的](https://vaadin.com/flow)[Web 组件](https://en.wikipedia.org/wiki/Web_Components)标准技术取代了 GWT 的内部使用。新一代是对 Vaadin 的重大改写，尽管它的目的和它的许多概念（如[数据绑定）](https://vaadin.com/docs/v10/flow/binding-data/tutorial-flow-components-binder.html)保持不变。

通过利用 Web Components 技术，应该更容易构建 Vaadin 小部件。并且使现有的基于 JavaScript 的组件（不是为 Vaadin 明确设计的）可用于您的服务器端 Java 代码应该相对容易。这就是 Web Components 的重点：制作可跨各种 Web 框架工具工作的基于 Web 的小部件。

虽然 Vaadin Ltd 对发布 Vaadin 10 Flow 感到非常兴奋和自豪，但他们仍然致力于 Vaadin 8 框架。Vaadin 8 正在积极开发中，并制定了至少到 2022 年继续提供支持的路线图计划。

*   如果您真的想使用 GWT，可以在 Vaadin 8 框架中进行。
*   如果您想押注 Web Components 而不是 GWT，请选择 Vaadin 10 Flow。

# 丰富的应用

> 用户在客户端执行许多活动的富文本应用程序。

如果您指的是字体、颜色等中的“富文本”，您应该研究[与 Vaadin 8 捆绑](https://vaadin.com/docs/v8/framework/components/components-richtextarea.html)`RichTextArea`的小部件，并查看[Vaadin 目录](https://vaadin.com/directory)以获取其他附加组件。该小部件不会被引入 Vaadin 10 Flow，但如上所述，Web 组件的使用可能会使其他现有的此类工具可用于基于 Java 的 Vaadin 应用程序。我看到[一个已经在 beta 中了](https://vaadin.com/directory/component/wysiwyg-e-rich-text-editor-component-for-java)。

如果您指的是具有企业级可靠性的专业外观、面向业务、桌面风格的 Web 应用程序的“丰富”，这正是 Vaadin 的目的。

# 爪哇

> 我们正在寻求使用 Java 技术进行开发

这就是 Vaadin 存在的*理由*：编写纯 Java 以利用 Java 工具和库的庞大生态系统，以及其在安全性、性能和可靠性方面的所有优势——同时使用 Web 标准技术进行自动渲染您的应用程序在网络浏览器中。

# 移动的

> 需要移动支持。

Vaadin 小部件集合已经发展为支持触摸表面手势。

Vaadin Ltd 公司以前提供了一个特殊的移动支持包，称为*Vaadin Touch*。常规 Vaadin 小部件中对触摸手势的内置支持使该包过时且不必要。

# 云和扩展

> 这些服务将在云中提供。
> 
> 可扩展性也是一个主要问题。

您基于 Java 的 Vaadin 应用程序确实存在于服务器端的 JVM 中。每个当前用户都由会话对象表示。出现在浏览器中的所有用户界面小部件在服务器上的 Java 对象中都有对应物。您可能会在服务器上的其他 Java 对象中保留更多数据和功能。您也可能从该服务器端调用 JDBC 或 Web 服务等。

所以所有这些都会占用服务器上的内存和 CPU 周期。您确实需要意识到您的编程会进行缓存并将其他负担放在服务器上。用户之间共享的任何资源都必须是线程安全的，因为 Java Servlet 环境在设计上是多线程的。

根据您的应用程序的具体情况，可能需要强大的服务器硬件（内存、内核）。或者，如果你真的有一个非常大的应用程序和非常多的用户，你可能需要多个具有粘性会话负载平衡的服务器。

Vaadin Ltd 公司模拟了支持数千个同时用户会话的 Vaadin 应用程序的使用。您可以联系他们就您的具体情况进行咨询。

虽然可扩展性是一个需要考虑的问题，但不要妄下结论。想清楚，做一些实验。

# 创建自定义小部件

> 如果我必须在 Vaadin 中编写一个新的小部件，实现起来有多容易或多难？

在 Vaadin 8 中，您确实可以创建自己的小部件。但这样做需要学习 GWT 的使用。可行，正如您从[*Vaadin Directory*](https://vaadin.com/directory)中数百个已发布的附加组件中看到的那样。但仍有一些严肃的工作。Vaadin Ltd. 提供了这方面的培训。

在 Vaadin 10 Flow 中，使用 Web 组件应该可以更轻松地创建您自己的小部件。查看[这个免费提供的入门项目](https://vaadin.com/start/v10-component)，让您继续前进。请参阅教程，[*使用 Element API 创建一个简单的组件*](https://vaadin.com/docs/v10/flow/creating-components/tutorial-component-basic.html)。在 Vaadin 10 Flow 中创建小部件的关键概念：

*   每个 Vaadin 10 组件始终映射到服务器端[DOM](https://en.wikipedia.org/wiki/Document_Object_Model)表示中的一个根元素。
*   该`Element`API 使从服务器端轻松修改[DOM成为可能。](https://en.wikipedia.org/wiki/Document_Object_Model)

# 还有其他问题吗？

> Vaadin 小部件或概念是否有任何明显的问题，可能会阻碍任何应用程序？

不知道你在这里的意思。我建议通读优秀的 Vaadin 教程和手册。它会引导您使用 Vaadin 中的各种功能。

在为桌面应用程序使用过其他快速应用程序开发环境之后，Vaadin 对我来说总是有意义的，适合我的思维方式和做事方式。

## 出血边缘

对于 Vaadin Flow，要知道 Web 组件仍然是新事物，而且有些前沿。Web 组件实际上是技术的集合。并非所有浏览器制造商都完全支持所有这些。所以一些polyfills仍然是必要的。

Vaadin Flow 还利用了最终出现在 CSS 中的一对现代页面布局功能*：* Flexbox*和*Grid *Layout*。

只有最新版本的浏览器才能对所有这些功能提供良好的支持。有关详细信息，请参阅[CanIUse.com](http://www.CanIUse.com/)。

Vaadin 的部分目的是掩盖各种浏览器的不同版本之间的差距，以隔离我们使用 Vaadin 的开发人员。因此，您可能不会在某些浏览器中遇到问题，但您可能会再次遇到问题。

此外，Vaadin Flow 并不完全具备 Vaadin 8 的所有功能。有些正在开发中，有些正在计划中。

结果：如果您渴望尽快发布并且不能坚持让用户更新到最新的浏览器，请使用 Vaadin 8 而不是 Flow。

# 离开 Vaadin 前往 GWT

> 如果明天我们决定只切换回 GWT，考虑到 Vaadin 与所有服务器代码逻辑一起工作，这是否可行？

如果您想使用 GWT，并且想用 Java 编写服务器端逻辑，那么 Vaadin 8 Framework 是您的完美工具。我看不出你会怎么想离开 Vaadin。

但是，如果您确实离开了 Vaadin，您将不再拥有将浏览器中的 GWT 与服务器上的 Java 代码连接起来的粘合剂。这种胶水就是 Vaadin 为您提供的。当然，您可以编写您的 Java 后端业务逻辑以直接不了解 Vaadin。事实上，Vaadin Ltd 正是为此目的提供了一个基于 Maven 的多模块原型。该模块包含您的业务逻辑和数据库访问（等）代码，与包含您的面向 Vaadin 的代码`backend`的模块分开。`ui`

# 网络流量

> 每次都访问服务器的 Vaadin 方法是否会影响部署在云上的应用程序？

您将需要进行一些试验和分析，以查看特定应用程序所需的内存和内核。如上所述，Vaadin 对服务器资源的要求可能很高。

但从技术上讲，云部署没有技巧或技术限制。只是在[JVM](https://en.wikipedia.org/wiki/Java_virtual_machine)中运行的普通 Java 代码。任何可以运行[Java Servlet Web 容器](https://en.wikipedia.org/wiki/Web_container#List_of_Servlet_containers)的东西，例如[Tomcat](https://en.wikipedia.org/wiki/Apache_Tomcat)、[Jetty](https://en.wikipedia.org/wiki/Jetty_(web_server))、[Glassfish](https://en.wikipedia.org/wiki/GlassFish) / [Payara](https://en.wikipedia.org/wiki/Payara_Server)、WildFly/JBoss 等都可以运行您的 Vaadin 应用程序。

如果您担心网络流量，是的，有流量。当用户使用小部件（例如单击按钮或在字段中输入数据）时，会通知您的服务器端 Java 应用程序，以便您的应用程序可以响应业务逻辑。所以这意味着频繁的网络遍历。

您确实可以选择在不需要时不立即通知服务器端。这样做，您正在控制一些流量。例如，您可以选择是否希望在在字段中输入文本时通知服务器端（并做出反应），或者偶尔在[击键之间](https://vaadin.com/download/release/8.4/8.4.5/docs/api/com/vaadin/shared/ui/ValueChangeMode.html#EAGER)[暂停](https://vaadin.com/download/release/8.4/8.4.5/docs/api/com/vaadin/shared/ui/ValueChangeMode.html#LAZY)，或者仅在[用户完成输入](https://vaadin.com/download/release/8.4/8.4.5/docs/api/com/vaadin/shared/ui/ValueChangeMode.html#BLUR)之后场地。请参阅手册中的 [*配置值更改事件的粒度*]( [https://vaadin.com/docs/v8/framework/components/components-textfield.html](https://vaadin.com/docs/v8/framework/components/components-textfield.html)部分。

当我开始使用 Vaadin 时，我确实担心 Internet 性能出现问题。但我可以说，以我自己的经验，我很惊喜，真的很震惊，发现这对我来说不是问题。例如，在美国，在威斯康星州的科罗拉多州，只有一台 Mac mini 在非常快速的互联网连接上运行 Vaadin 7 或 8 应用程序，几乎可以立即对访问西雅图、佛罗里达州和加拿大的家庭 DSL 和有线电视连接的客户做出反应. 从香港访问时，只有最轻微的延迟，在数据输入应用程序中通常是难以察觉的。

当然，您的里程可能会有所不同。我上面的例子是一台专用计算机。相比之下，云提供商因 CPU 可用性和网络延迟或延迟的波动而臭名昭著。

# 支持

> 最后但最重要的是，论坛支持和未来的开发如何？

[Vaadin Ltd](https://vaadin.com/company)似乎是一家非常健康的开源公司。他们销售附加产品、支持、咨询和培训。该公司一直在发展，雇佣更多员工，并在海外设立办事处（美国、德国），而他们的总部仍在[芬兰](https://en.wikipedia.org/wiki/Finland)（图尔库、赫尔辛基）。

各种 Vaadin 产品正处于非常繁重的开发阶段，其中包含许多增量版本、预发布版本以及即将推出[的长期支持版本](https://vaadin.com/blog/the-revaadin-platform)。定期发布其发展计划的路线图。他们还在[博客](https://vaadin.com/blog)中定期更新业务和技术问题。

Vaadin Ltd 公司拥有一个非常活跃的[论坛站点](https://vaadin.com/forum)。他们的员工和其他用户也都积极使用 Stack Overflow。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T12:12:30.630

如果您想要未来的开发人员，请诚实地选择 jsf。这不是最好的选择，但你至少会容易受到垂死的框架的影响。

在我们的项目中，我必须使用 Vaadin，我不会这样决定。我更喜欢 ZK ( [http://www.zkoss.org/](http://www.zkoss.org/) ) 或 GWT。

关于你的问题，尽我所能回答。

1.  比较容易，比如Swing。你扩展 CustomComponent 就可以了。
2.  表现。我们在编程时遇到性能问题和问题。由于 VAADIN 规范，该架构不得不多次重新考虑。与 JPA 结合，对我来说，与之合作并不愉快。
3.  很难说。当然，您到处阅读有关 MVC、松散耦合等的信息。但我个人认为，您的 GUI 框架总是有一些根源影响下面的一些代码。您不能简单地将框架更改为即插即用。我不知道细节，但可能生命周期已经与其他框架不同。因此，与数据库通信的 Vaadin 的实现，例如，当使用 FormFactory 时，将影响您的持久层，在使用另一个框架时您必须调整它。仅仅因为实施了战略。
4.  我在这里没有经验。
5.  Vaadin 在社区中很重要，而且似乎有很多人使用它。我体验到 Vaadin 团队在传播框架方面付出了巨大的努力，并且会回答问题并尽其所能帮助您。我很感激。文档真的很好。

我个人认为你必须深入思考这个框架，以及它是否符合你的需求。在选择大型框架之前，请考虑一下，如果您想 - 服务器端编程（ZK，Vaadin，） - 服务器和客户端（GWT） - 使用标记语言和逻辑（JSF）

您的环境设置是什么，例如应用程序服务器、数据库等？

即使 Vaadin 是一个很好的产品，如果我可以自由选择，我也不会使用它。

再见

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-08-23T18:06:14.200

最好选择 HTML、Javascript 等客户端技术或 ReactJS、Angular 等更高级的 UI 框架，而不是服务器端技术。服务器端框架的性能很慢，并且很难针对浏览器问题进行调试。

# c# - 以字符串数组形式获取 CustomAttributeValue 属性值

> ID：15861396
> 
> 赞同：1
> 
> 时间：2013-04-07T10:33:42.393
> 
> 标签：c#, .net, wpf, mef, caliburn.micro

我想从所有类中获取 CustomAtrribute 的 PropertyValue 作为字符串

这是我从 ExportAttribute 继承的自定义属性

```
[JIMSExport("StockGroup","Stock")] 
```

此属性附加在许多类上，但具有不同的参数。第一个参数表示 ContractName，第二个参数表示它属于哪个模块。

现在我想要一本字典

```
Dictionary<string, List<string>> moduleDict 
```

具有所有模块名称（第二个参数）和合同名称（第一个参数），可以有具有相同模块名称的类，所以我需要一个具有该模块名称的合同名称列表

我能够使用反射获取所有 JIMSExport 属性，但无法生成字典

```
var exported = GetTypesWith<JIMSExportAttribute>(false).Select(x => x.GetCustomAttributes(true).First()); 
```

使用 Caliburn Micro 有没有更好的方法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T11:46:58.023

也许你正在寻找这样的东西：

```
namespace AttributePlayground
{
    class Program
    {
        static void Main(string[] args)
        {
            var moduleDict = makeModuleDict();
        }

        public static Dictionary<string, List<string>> makeModuleDict()
        {
            var attribs = AppDomain.CurrentDomain
                .GetAssemblies()
                .SelectMany(
                    x => x.GetTypes()
                        .SelectMany(
                            y => y.GetCustomAttributes(typeof(JIMSExport), false)
                        )
                )
                .OfType<JIMSExport>();

            return attribs
                .GroupBy(x => x.Module)
                .ToDictionary(
                    x => x.Key,
                    x => new List<String>(
                        x.Select(y => y.ContractName)
                        )
                    );

        }

    }

    [JIMSExport("Module1", "Contract1")]
    public class TestClass1
    {

    }

    [JIMSExport("Module1", "Contract2")]
    public class TestClass2
    {

    }

    [JIMSExport("Module2", "Contract3")]
    public class TestClass3
    {

    }

    [JIMSExport("Module2", "Contract4")]
    public class TestClass4
    {

    }

    [AttributeUsage(AttributeTargets.Class, Inherited = false, AllowMultiple = true)]
    sealed class JIMSExport : Attribute
    {
        public readonly string ContractName;
        public readonly string Module;
        public JIMSExport(string Module,string ContractName)
        {
            this.Module = Module;
            this.ContractName = ContractName;
        }

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T12:30:50.913

需要使用`SelectMany`和`GroupBy`

```
// allTypesWithReqdAttributes should contain list of types with JIMSExportAttribute
IEnumerable<object> attributeList = allTypesWithReqdAttribute.SelectMany(x => x.GetCustomAttributes(true));
var myAttributeList = attributeList.OfType<JIMSExportAttribute>();
// assumes JIMSExportAttribute has ModuleName and ContractName properties
var groups = myAttributeList.GroupBy(x => x.ModuleName, x => x.ContractName);
var result = groups.ToDictionary(x => x.Key, x => new List<string>(x));
foreach (var group in groups)
{
    Console.WriteLine("module name: " + group.Key);
    foreach (var item in group)
    {
        Console.WriteLine("contract name: " + item);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T15:09:33.273

首先让我说我不熟悉 Caliburn Micro。因此，正常使用 MEF 的可能性很小。

您想要的可以通过 MEF 的[导出元数据](http://mef.codeplex.com/wikipage?title=Exports%20and%20Metadata)来实现。将您的自定义 ExportAttribute (JIMSExport) 与导出元数据结合起来，并修改您的导入以包含元数据。研究上一个链接中的“使用自定义导出属性”部分。

请注意，您不应回退到对加载的程序集使用反射。这可能会导致错误，因为反射会找到具有指定属性的所有类型，而您真正想要的是可以正确导出的类型。您需要组合容器可以使用的类型。

# django - Django 管理页面：类型对象“CommonMiddleware”没有属性“is_usable”

> ID：15861402
> 
> 赞同：0
> 
> 时间：2013-04-07T10:34:20.007
> 
> 标签：django, django-admin

我正在研究 Django 的数据库密集型 Web 应用程序。我从基础教程开始，然后添加了一个 MySQL 数据库并为模型、视图和测试创建了一个文件夹。（我删除了旧的 models.py、tests.py、views.py。）我可以创建新模型并将它们与我的数据库同步。

在我决定尝试 Django 管理界面之前，一切似乎都正常。我收到一个不能很好解释的错误：

```
AttributeError at /admin/
type object 'CommonMiddleware' has no attribute 'is_usable' 
```

我不知道是什么原因造成的。这是我的`urls.py`：

```
urlpatterns = patterns(
'',
url(r'^admin/doc/', include('django.contrib.admindocs.urls')),
# Uncomment the next line to enable the admin:
url(r'^admin/', include(admin.site.urls)), 
```

这是我`settings.py`的，没有评论：

```
DEBUG = True
TEMPLATE_DEBUG = DEBUG

ADMINS = (
    ('admin', 'admin@example.com'),
)

MANAGERS = ADMINS

DATABASES = dict(
    default=dict(
        ENGINE='django.db.backends.mysql',     
        NAME='mydbname',                   
        USER='root',
        PASSWORD='******',
        HOST='',        
        PORT='8000',    
    )
)

# This is redirected to localhost by C:Windows/System32/drivers/etc/hosts
ALLOWED_HOSTS = ['mysite.com']
TIME_ZONE = 'Europe/Amsterdam'
LANGUAGE_CODE = 'en-us'
SITE_ID = 1
USE_I18N = True
USE_L10N = True
USE_TZ = True
MEDIA_ROOT = ''
MEDIA_URL = ''
STATIC_ROOT = ''
STATIC_URL = '/static/'
STATICFILES_DIRS = (    )
STATICFILES_FINDERS = (
    'django.contrib.staticfiles.finders.FileSystemFinder',
    'django.contrib.staticfiles.finders.AppDirectoriesFinder',
)

SECRET_KEY = '****************************************'

TEMPLATE_LOADERS = (
    'django.template.loaders.filesystem.Loader',
    'django.template.loaders.app_directories.Loader',
    'django.middleware.common.CommonMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
)

ROOT_URLCONF = 'bandage.urls'

WSGI_APPLICATION = 'bandage.wsgi.application'

import os
TEMPLATE_DIRS = (os.path.join(os.path.dirname(__file__), '..', 'templates').replace('\\', '/'),)

INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    # Uncomment the next line to enable the admin:
    'django.contrib.admin',
    # Uncomment the next line to enable admin documentation:
    # 'django.contrib.admindocs',
    'application',
) 
```

如您所见，我已经启用了管理站点并找到了 URL，但是在作为 Django 库的一部分的模块中出现了一些错误。这是完整的跟踪：

```
Environment:

Request Method: GET
Request URL: http://mysite.com/admin/

Django Version: 1.5.1
Python Version: 2.7.0
Installed Applications:
('django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.sites',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'django.contrib.admin')
Installed Middleware:
('django.middleware.common.CommonMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware')

Traceback:
File "D:\Python27\lib\site-packages\django-1.5.1-py2.7.egg\django\core\handlers\base.py" in get_response
  140\.                     response = response.render()
File "D:\Python27\lib\site-packages\django-1.5.1-py2.7.egg\django\template\response.py" in render
  105\.             self.content = self.rendered_content
File "D:\Python27\lib\site-packages\django-1.5.1-py2.7.egg\django\template\response.py" in rendered_content
  80\.         template = self.resolve_template(self.template_name)
File "D:\Python27\lib\site-packages\django-1.5.1-py2.7.egg\django\template\response.py" in resolve_template
  58\.             return loader.get_template(template)
File "D:\Python27\lib\site-packages\django-1.5.1-py2.7.egg\django\template\loader.py" in get_template
  146\.     template, origin = find_template(template_name)
File "D:\Python27\lib\site-packages\django-1.5.1-py2.7.egg\django\template\loader.py" in find_template
  129\.             loader = find_template_loader(loader_name)
File "D:\Python27\lib\site-packages\django-1.5.1-py2.7.egg\django\template\loader.py" in find_template_loader
  112\.         if not func.is_usable:

Exception Type: AttributeError at /admin/
Exception Value: type object 'CommonMiddleware' has no attribute 'is_usable' 
```

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T10:35:38.803

您的`TEMPLATE_LOADERS`. 删除它们。

```
TEMPLATE_LOADERS = (
    'django.template.loaders.filesystem.Loader',
    'django.template.loaders.app_directories.Loader',
)                              #\
                               # | it seems that at some point
                               # | you accidentally removed these
MIDDLEWARE_CLASSES = (         #/
    'django.middleware.common.CommonMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
) 
```

# knockout.js - 如何在 knockout.js 中进行分页？

> ID：15861403
> 
> 赞同：0
> 
> 时间：2013-04-07T10:34:21.433
> 
> 标签：knockout.js

例如，我需要分成 4 个条目的页面。

请参阅代码[http://pastebin.com/Et1Z9hHG](http://pastebin.com/Et1Z9hHG)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T14:33:50.747

我认为该`simpleGrid` [插件](http://knockoutjs.com/examples/grid.html)应该适用于此。

# javascript - 将事件附加到子元素

> ID：15861407
> 
> 赞同：1
> 
> 时间：2013-04-07T10:34:33.453
> 
> 标签：javascript, tabs, onclick

```
<div class="tabContainer">
  <ul class="Tabs" id="tabset">
    <li id="tab1" class="selected" onclick="tabs(this)">Home</li>
    <li id="tab2" onclick="tabs(this)">Tab 2</li>
    <li id="tab3"  onclick="tabs(this)">Tab 3</li>
  </ul>
</div> 
```

我想删除`onclick="tabs(this)"`并将其变成一个事件。我怎样才能做到这一点？目前下面的代码是我的解决方案，它不起作用。

```
var h=$("tabset").children;
for (i=0;i<h.length;i++) h[i].onclick=tabs(this); 
```

哦，请不要使用 jquery，但请`var $ = function(x){return document.getElementById(x)};` 注意：我需要这`(this)`部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T10:37:17.207

您似乎`$`在代码中使用了一些不标准的功能。例如，如果您使用 jQuery，您的代码可能如下所示：

```
$('#tabset li').on('click', tabs); 
```

如果您不想使用 jQuery，那么您将不得不调整您的选择器：

```
var h = document.getElementById('tabset').getElementsByTagName('li');
for (var i = 0; i < h.length; i++) {
    h[i].onclick = tabs;
} 
```

或者因为您声明：

```
var $ = function(x){
    return document.getElementById(x)
}; 
```

你也可以使用：

```
var h = $('tabset').getElementsByTagName('li');
for (var i = 0; i < h.length; i++) {
    h[i].onclick = tabs;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T10:37:35.107

我建议：

```
var lis = document.getElementById('tabset').getElementsByTagName('li');
for (var i = 0, len = lis.length; i < len; i++){
    lis[i].onclick = tabs; // inside the function 'this' will refer to the node.
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/XYbCJ/3/)。

尽管您可以将点击处理程序分配给包含`ul`元素：

```
var list = document.getElementById('tabset');
tabset.onclick = list.addEventListener('click', function(e){
    tabs(e.target);
}, false); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/XYbCJ/1/)。

你可以，现在我看到你用你的函数做了什么，避免使用`getElementById()`并简单地链接：

```
$('tabset').addEventListener('click', function(e){
    tabs(e.target);
}, false); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/XYbCJ/2/)。

使用 jQuery，正如您出现（在编辑之前）试图使用的那样：

```
$('#tabset li').click(function(){
    tabs(this);
}); 
```

# c# - 如何重新加载/刷新 app.config？

> ID：15861413
> 
> 赞同：14
> 
> 时间：2013-04-07T10:35:05.480
> 
> 标签：c#, .net, app-config, config

我想读取`app.config`值，在消息框中显示它，使用外部文本编辑器更改值，最后显示更新后的值。

我尝试使用以下代码：

```
private void button2_Click(object sender, EventArgs e)
{
    Configuration config = ConfigurationManager.OpenExeConfiguration(ConfigurationUserLevel.None);
    ConfigurationManager.RefreshSection("appSettings");
    ConfigurationManager.RefreshSection(config.AppSettings.SectionInformation.Name);
    MessageBox.Show(ConfigurationManager.AppSettings["TheValue"]);
} 
```

但它不起作用。它显示旧值（在外部文本编辑器中更改之前）。有什么建议么？

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
<appSettings>
  <add key="TheValue" value="abc"/>
</appSettings>
</configuration> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-07T10:44:43.050

它可以帮助你

尝试保存这样的配置

```
System.Configuration.Configuration config = ConfigurationManager.OpenExeConfiguration(ConfigurationUserLevel.None);
config.AppSettings.Settings["KeyName"].Value = "NewValue";
config.AppSettings.SectionInformation.ForceSave = true;
config.Save(ConfigurationSaveMode.Modified); 
```

然后像这样获取它

```
ConfigurationManager.RefreshSection("appSettings");
System.Configuration.Configuration config = ConfigurationManager.OpenExeConfiguration(ConfigurationUserLevel.None); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-07T10:41:10.810

您可以尝试使用以下代码：

```
Configuration config = ConfigurationManager.OpenExeConfiguration(ConfigurationUserLevel.None);
KeyValueConfigurationCollection settings = config.AppSettings.Settings;            
// update SaveBeforeExit
settings["TheValue"].Value = "WXYZ";
config.Save(ConfigurationSaveMode.Modified);

MessageBox.Show(ConfigurationManager.AppSettings["TheValue"]); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-12-28T22:44:57.197

这应该从磁盘重新加载 app.config 文件：

```
var appSettings = System.Configuration.ConfigurationManager.OpenExeConfiguration(System.Reflection.Assembly.GetEntryAssembly().Location).AppSettings;
MessageBox.Show(appSettings.Settings["TheValue"].Value); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-07-12T22:23:43.897

这就是你真正需要的。

```
System.Configuration.ConfigurationManager.RefreshSection("appSettings");
MessageBox.Show(System.Configuration.ConfigurationManager.AppSettings["TheValue"]); 
```

您遇到的问题可能是您修改了错误的 App.config 文件。我自己做了这个，感觉很傻。如果您使用 IDE 测试代码，请改为更改 bin 目录中的 YourAppName.vshost.exe.config 文件。希望这可以帮助！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-09-24T12:25:49.360

如果您正在使用应用程序的属性设置 (Properties.Settings.Default.Xxxx)，您可以使用

Properties.Settings.Default.Reload(); var x = Properties.Settings.Default.Xxxx; // x 将从配置中获取新值

# ruby-on-rails-3 - Squeel 查询语法检索共享同一组的用户元素

> ID：15861414
> 
> 赞同：1
> 
> 时间：2013-04-07T10:35:30.877
> 
> 标签：ruby-on-rails-3, activerecord, arel, squeel

使用 Ruby on Rails 3.2.13 和 Squeel 我有以下模型：

```
class Group < ActiveRecord::Base
  has_and_belongs_to_many :users
end

class User < ActiveRecord::Base
  has_and_belongs_to_many :groups
  has_many :characters, :dependent => :destroy
end

class Character < ActiveRecord::Base
  belongs_to :user
end 
```

字符有一个布尔属性`:public`。

在 Character 模型中，我想检索当前用户可见的所有字符，由以下条件确定：

1.  该角色属于当前用户或
2.  角色是公开的或
3.  当前用户与角色的用户共享一个群组

结果必须是`ActiveRecord::Relation`.

匹配前两个条件很简单：

```
def self.own_or_public user_to_check
  where{
    (user_id == user_to_check.id) |
    (public)
  }
end 
```

对于第三个条件，以下查询会产生正确的结果，但可能不是最好的方法：

```
def self.shares_group_with user_to_check
  user_groups = Group.joins{users}.where{users.id == user_to_check.id}
  joins{user.groups}.
    where{
      user.groups.id.in(user_groups.select(id))
    }.uniq
end 
```

此外，我找不到连接两个结果的方法，从而产生`ActiveRecord::Relation`包含两个查询的结果（`merge`产生匹配两个查询的元素，并`+`返回 an`Array`而不是 an `ActiveRecord::Relation`）。

非常感谢有关如何在单个 Squeel 查询中处理此问题的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-13T15:39:00.513

让我们尝试对您的问题进行一些重构，并用关联替换`has_and_belongs_to_many`关联`has_many, through`，我们将在模型上添加另一个`has_many, through`关联，`Character`如下所示：

```
class Membership < ActiveRecord::Base
    belongs_to :user
    belongs_to :group
end

class Group < ActiveRecord::Base
    has_many :memberships
    has_many :users, through: :memberships
end

class User < ActiveRecord::Base
    has_many :memberships
    has_many :groups, through: :memberships
    has_many :characters
end

class Character < ActiveRecord::Base
    belongs_to :user
    has_many :groups, through: :user
end 
```

模型是 a和 a`Membership`之间关系的表示-本质上是使用时隐藏的连接表。我更喜欢看到这种关系（特别是如果它很重要）。`User``Group``has_and_belongs_to_many`

我们还在`Character`模型上`Group`与与用户关联的 s 建立了关联。当我们尝试加入我们的范围时，这很有帮助。

充实`Character`模型，让我们添加以下内容：

```
sifter :by_user do |user|
  user_id == user.id
end

sifter :public do
  public
end 
```

使用筛选器作为我们的构建块，我们可以添加以下内容以获取*可见*字符（如您定义的那样）：

```
def self.get_visible(user)
    Character.uniq.joins{groups.outer}.where{(sift :public)|(sift :by_user, user)|(groups.id.in(user.groups))}
end 
```

此方法接受一个实例`User`并找到以下`Character`s：

*   所有公共角色。
*   用户的所有角色。
*   属于用户组的所有字符。

然后我们只从这些集合中获取不同的字符列表。

从 Rails 控制台：

```
irb(main):053:0> Character.get_visible(User.find(4))
  User Load (0.6ms)  SELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 4]]
  Group Load (0.7ms)  SELECT "groups".* FROM "groups" INNER JOIN "memberships" ON "groups"."id" = "memberships"."group_id" WHERE "memberships"."user_id" = 4
  Character Load (0.9ms)  SELECT DISTINCT "characters".* FROM "characters" LEFT OUTER JOIN "users" ON "users"."id" = "characters"."user_id" LEFT OUTER JOIN "memberships" ON "memberships"."user_id" = "users"."id" LEFT OUTER JOIN "groups" ON "groups"."id" = "memberships"."group_id" WHERE ((("characters"."public" OR "characters"."user_id" = 4) OR "groups"."id" IN (2)))
[
    [0] #<Character:0x00000005a16b48> {
                :id => 4,
           :user_id => 4,
              :name => "Testiculies",
        :created_at => Tue, 13 Aug 2013 14:35:50 UTC +00:00,
        :updated_at => Tue, 13 Aug 2013 14:35:50 UTC +00:00,
            :public => nil
    },
    [1] #<Character:0x00000005d9db40> {
                :id => 1,
           :user_id => 1,
              :name => "conan",
        :created_at => Mon, 12 Aug 2013 20:18:52 UTC +00:00,
        :updated_at => Tue, 13 Aug 2013 12:53:42 UTC +00:00,
            :public => true
    }
] 
```

要查找特定字符的所有字符`User`，请向模型添加实例方法`User`：

```
def get_visible_characters
  Character.get_visible(self)
end 
```

我认为这会让你到达你想去的地方。

# javascript - 如何获取用户的地理位置（城市名称，而不是坐标）并将其发送到文本框

> ID：15861418
> 
> 赞同：0
> 
> 时间：2013-04-07T10:35:53.400
> 
> 标签：javascript, geolocation

我怎样才能获得用户的地理位置，他所在的地方的名称，而不是坐标，然后将它们发布在文本框中，比如雅虎天气。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T11:57:39.293

您可以使用 HTML5 地理位置来获取用户的位置。结果将是纬度和经度。

接下来，构造 URL 以传递给 Yahoo 的 Placefinder API，如下所示：

```
var geoAPI = 'http://where.yahooapis.com/geocode?location='+lat+','+lon+'&flags=J&gflags=R&appid='+APPID; 
```

我希望这有帮助。

# geometry - 弧变换起点终点到起点角度终点角度

> ID：15861421
> 
> 赞同：3
> 
> 时间：2013-04-07T10:36:30.383
> 
> 标签：geometry, transformation, dxf

给定具有起点和终点（都在笛卡尔 x,y 坐标中）、半径和方向（顺时针或逆时针）的弧的描述，我需要将弧转换为具有起始角度、结束角度的弧、中心和半径。

是否有已知的算法或伪代码允许我这样做？此外，是否有任何特定术语来描述这些类型的转换？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-07T15:50:25.407

您可以找到求解此方程组的中心：

```
(sx-cx)^2 + (sy-cy)^2=R^2
(ex-cx)^2 + (ey-cy)^2=R^2 
```

其中 (sx,sy) 是起点坐标， (ex,ey) 是终点坐标，未知数 cx，cy 是中心坐标。该系统有两种解决方案。然后可以找到角度为

```
StartAngle = ArcTan2(sy-cy, sx-cx)
EndAngle = ArcTan2(ey-cy, ex-cx) 
```

请注意，已知方向不允许在没有额外限制的情况下从两种可能的解决方案中选择一种。例如，start=(0,1), end=(1,0), R=1 和 Dir = 顺时针为我们提供中心为 (0,0) 的 Pi/2 弧和中心为 (0,0) 的 3*Pi/2 弧1,1)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-07T16:08:58.563

我会提出一种与 MBo 不同的方法来获得两个圆的中心，它们具有给定的半径并传递到起点和终点。

如果 P 和 Q 是圆弧的起点和终点，则两个圆的中心都位于与 PQ 正交的直线 L 上，直线 L 是从 P 到 Q 的直线，并且平分 PQ。从中心到 L 的距离 d 很容易通过毕达哥拉斯定理得到。如果e是PQ的长度，那么d^2 + (e/2)^2 = r^2。这样，您就可以避免求解从 MBo 方法中获得的方程组。

请注意，如果你有一个半圆，任何方法都会在数值上变得不稳定，因为只有一个给定半径的圆，上面有 P 和 Q。（我想我记得在这种情况下正确的术语是“问题不成立”。它发生在 P 和 Q 正好相距 2r 时，要弄清楚这是否真的是真的，你需要检查两个双打的相等性，这总是有点问题。如果由于某种原因，你知道你有一个半圆，你最好只计算 PQ 的中心）。

# node.js - 节点 Redis - 使用 EX 和 NX 设置？

> ID：15861424
> 
> 赞同：19
> 
> 时间：2013-04-07T10:37:01.383
> 
> 标签：node.js, locking, redis

Redis 推荐一种使用`SET`可选参数作为锁定机制的方法。即`SET lock 1 EX 10 NX`只有当它不存在并且它会在 10 秒后过期时才会设置一个锁。

我正在使用 Node Redis，它有一个`set()`方法，但我不确定如何将附加参数传递给它，以使密钥过期并且如果它已经存在，或者即使它是可能的，也不会被创建。

也许我必须使用`setnx()`和`expire()`作为单独的电话？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-04-30T09:52:57.733

阅读 Node Redis 源代码后，我发现所有方法都接受任意数量的参数。当生成有关参数数量不正确的错误时，这是​​由 Redis 而不是节点模块生成的。

我早期尝试提供多个参数是因为我只安装了 Redis 2.2.x，其中 SET 只接受 2.6.12 的 NX 和 EX 参数。

因此，安装 Redis 2.6.12 后，以下方法调用将与 node redis 一起使用，以设置一个变量（如果它不存在）并将其设置为 5 分钟后过期：

```
$client->set('hello', 'world', 'NX', 'EX', 300, function(err, reply) {...});
$client->set(['hello', 'world', 'NX', 'EX', 300], function(err, reply) {...}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-17T16:54:39.877

您可以使用 Lua 脚本来制作自己的`setnex`命令。所有 Lua 脚本都以原子方式运行，因此您不必担心其他客户端会更改您已在脚本中读取的数据。

```
-- setnex.lua
local key = ARGV[1]
local expiry = ARGV[2]
local value = ARGV[3]
local reply = redis.call("SETNX", key, value)
if 1 == reply then 
  redis.call("EXPIRE", key, expiry) 
end
return reply 
```

您可以像这样从 node_redis 调用它：

```
client.eval(setnex_lua, 0, "mykey", 10, "myvalue", function (err, res) {
    console.dir(err);
    console.dir(res);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-17T11:51:54.913

## Node-Redis v4+ 更改

值得注意的是，`node-redis` `v4`从那时起，包发生了重大变化，其中之一是函数默认返回 Promise，并且可以使用 JavaScript 对象作为可选参数来指定命令的修饰符：

```
await client.set('key', 'value', {
  EX: 300,
  NX: true
}); 
```

此外，您可以使用以下命令运行您想要的任何命令`sendCommand`：

```
await client.sendCommand(['SET', 'key', 'value', 'NX', 'EX', 300]); 
```

# git - Git Post-Receive 的权限

> ID：15861427
> 
> 赞同：3
> 
> 时间：2013-04-07T10:37:31.670
> 
> 标签：git, permissions, vps

我已经在本地和我的服务器上设置了 git，并创建了一个“post-receive”，这样当我推送到实时服务器时，它应该检查到网站的虚拟主机目录。

```
#!/bin/sh
GIT_WORK_TREE=/var/www/domainname/public_html/ git checkout -f 
```

但是，当我尝试进行推送时，它会成功退出主服务器，但尝试在服务器 Web 根目录上创建这些文件时出现权限被拒绝错误。

例如`remote: error: unable to create file index.php (Permission denied)`

由于我设置服务器的方式，这些错误对我来说实际上是有意义的。我禁用了 root 访问并创建了一个通过 visudo 添加到 sudoers 的新用户——然后我为这个用户设置了 SSH 密钥。我使用此用户将我的 git 更改推送到服务器。

我认为，问题是我连接到 push 的这个用户没有写入虚拟主机目录的权限。我在这些文件夹中的所有文件都归同一个组的 www-data（我的 nginx 用户）所有。

解决办法是什么？使用 SSH 密钥创建另一个用户以仅用于具有更高权限的 git 连接，或者有没有办法授予 post-receive sudo 之类的能力？

为这个冗长的问题道歉，但我想完全清楚我做了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T11:04:02.747

如果您的存储库是使用`--shared`选项创建的（请参阅“[将 GIT 存储库更改为共享](https://stackoverflow.com/questions/7268560/change-git-repository-to-shared)”），这将允许来自*同一组*的用户访问和写入。

有什么方法可以将这些不同的用户分组到同一个组中？
有点像“ [Git 无法创建文件权限被拒绝](https://stackoverflow.com/a/12077758/6309)”同一组中提到的内容。
或 sudo 访问，如[本问题](https://stackoverflow.com/q/11211950/6309)的评论中所述，更改 sudoers：

```
 git ALL = (root) NOPASSWD: /usr/local/sbin/prgetsimpleappscom 
```

# php - PHP中的数组不起作用

> ID：15861429
> 
> 赞同：0
> 
> 时间：2013-04-07T10:37:49.813
> 
> 标签：php

我正在尝试从 mysql 添加数组数据。但只添加了最后一行的详细信息。我也尝试了array_push，但没有奏效。任何人都可以帮助

```
$sql="SELECT * FROM server_details";
$result=mysqli_query($dbC,  $sql);
while ($row = mysqli_fetch_array($result))
{
$services=array( 
    $row['server_name'] => array($row['server_add'] => $row['port'])
); 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T10:39:51.843

通过不在循环的每次迭代中创建新数组：

```
$sql      = "SELECT * FROM server_details";
$result   = mysqli_query($dbC,  $sql);
$services = array();

while ($row = mysqli_fetch_array($result)) {
    $services[$row['server_name']] = array($row['server_add'] => $row['port']); 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T10:39:45.433

也许你正在寻找这个：

```
$services[ $row['server_name'] ] = array($row['server_add'] => $row['port']); 
```

最后，您将在`$services`变量中获得一个关联数组，由`server_name`列值索引。

如果它们不是唯一的，你应该这样做......

```
$services[ $row['server_name'] ][] = array($row['server_add'] => $row['port']); 
```

这样你仍然会得到相同的关联数组，但它的值将是索引数组；因此，您不会丢失具有相同记录的任何信息`server_name`。

# android - 使用谷歌位置服务

> ID：15861430
> 
> 赞同：1
> 
> 时间：2013-04-07T10:37:59.657
> 
> 标签：android, google-maps, geolocation, location, google-api

阿罗哈，

我正在开发一个使用位置数据的应用程序，该位置数据应该存储在本地数据库中。如果我的定位服务可以一直在后台运行就好了，但这[似乎](https://stackoverflow.com/questions/2566350/how-to-always-run-a-service-in-the-background)是不可能的。我注意到谷歌有自己的位置服务，可以将匿名位置数据发送到谷歌服务器（如果启用）。由于这项服务肯定深深植根于操作系统，我想知道我是否可以要求用户启用这项服务并通过 Google API 访问位置数据。我已经搜索过了，但我只找到了“标准位置”库。

否则，我无法确定是否注意到每个位置更改都存储在数据库中。目前，我将实现一个 BroadcastReceiver，它会在系统完成启动时引起注意，并且只是启动我自己的自定义位置服务。但是如果需要内存，这个服务可能会被操作系统杀死。

干杯

深蓝

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T11:05:16.110

您可以设置一个简单的网页，将位置存储在服务器的数据库中。例如，当有人在您的应用程序中标记位置时，应回调您网页的链接（带有 4 个参数：`user_ID`、`longitue`、`latitude`、`sequrity_key`），然后将用户的位置存储在您的数据库中。您可以使用 Google 项目托管来创建网页和访问 MySQL。

# c++ - 带 wget、子进程、unix 的 execl - 为什么它不起作用

> ID：15861432
> 
> 赞同：0
> 
> 时间：2013-04-07T10:38:15.173
> 
> 标签：c++, unix, exec, fork, wget

所以我试图在一个单独的子进程中执行 wget，我用 fork 复制如下：

```
 int child;
  pid_t child = fork();
if ( child == 0 ) { // no errors
  bool done = false;  // set to false
  while (!done) { // while not true do
  execl("wget", "someurl", NULL);
  done = true;  // since dl finished
 }
 cout << "DL Finished\n";  // to see if child was successful
}
else if ( child != 0 ) { // errors 
```

您可以在此代码中指出任何明显的错误吗？如果重要的话，这是我在 main 中调用的 void 函数内部发生的事情是它没有下载并且它显示“DL Finished”，但不**执行**wget -*然后*终端接管。

这是在 Ubuntu 12.04.2 LTS 上执行的。我以前在同一个 void 函数中使用**child**执行正常工作的“ls”，即我告诉它 ls 的整个路径（/bin/ls）。我读到不提供完整路径会使其搜索命令，这就是我想要的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T10:44:15.787

> 我读到不提供完整路径会使其搜索命令

这发生在`execlp`. 此外，按照惯例，第一个参数应该是可执行文件的名称。所以你可以尝试：

```
execlp("wget", "wget", "someurl", NULL);
     ^          ^^^^^ 
```

* * *

作为旁注，你`while (!done)`错了。这不是您等待程序完成的方式。事实上，一旦你调用它就消失了：另一个进程“替换”你自己的进程`exec`。`while`所以你可以认为它“`exec`是一个不返回的函数”。标准的方法是`wait(2)`在父母中直到孩子死去。

* * *

作为第二个旁注，如果您想要的只是`wget`某事并等到`wget`完成，`system(3)`则可能更合适：

```
system("wget someurl"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T10:44:36.073

您传递给的参数是新流程函数`execl`的数组。如您所知，第一个条目是程序名称本身。`argv``main``argv`

所以你需要做的是：

```
execlp("wget", "wget", "someurl", NULL); 
```

此外，如果一切顺利`exec`，函数族不会返回，因此`exec`调用后的任何代码都不会运行。

# java - 在 jsp 页面上显示 blob

> ID：15861435
> 
> 赞同：2
> 
> 时间：2013-04-07T10:38:31.240
> 
> 标签：java, jsp, servlets

好的，所以我试图在 jsp 页面上显示图像以及用户的名字和姓氏，但我只得到图像而不是名字和姓氏......那么这里有什么问题？...您的帮助将不胜感激:)

```
<%@ page language="java" contentType="text/html; charset=windows-1256"
        pageEncoding="windows-1256"%>
        <%@ page import="java.sql.*" %>
         <%@ page import="java.io.*" %>
    <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
    <html>
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=windows-1256">
    <title>Insert title here</title>
    </head>
    <body>
     <H1>Fetching Data From a Database</H1>
    <%

    Blob image = null;  
    byte[] imgData = null;  
    Connection con;
    String url="jdbc:mysql://localhost:3306/image";
    String uName="root";
    String pwd="root";
    Class.forName("com.mysql.jdbc.Driver").newInstance();
        con=DriverManager.getConnection(url,uName,pwd);
        String sql="Select * from image ";
        PreparedStatement stmt=con.prepareStatement(sql);

        ResultSet resultset=stmt.executeQuery();
    while(resultset.next())
    {

        Blob bl = resultset.getBlob("image");
        byte[] pict = bl.getBytes(1,(int)bl.length());
        response.setContentType("image/jpg");
        OutputStream o = response.getOutputStream();

    %>
    <TABLE BORDER="1">
    <TR>

    <TH>First Name</TH>
    <TH>Last Name</TH>
    <TH>picture</TH>
    </TR>
    <TR>

    <td>Image</td><td><%o.write(pict);%></td>
        <%o.flush();
        o.close();%>

    <TD> <%= resultset.getString(2) %> </TD>
    <TD><%= resultset.getString(3) %></TD>
    </TR>
    </TABLE>
    <BR>
    <%
    o.flush();
    o.close();
    }
    %>
    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T11:17:59.577

`o.close()`您的代码包括在写出图片之后以及稍后的调用。这将关闭响应输出流，不再发送任何内容。不要那样做 - 让 Web 容器负责关闭输出流。

这应该可以解释为什么不应该显示名字和姓氏：响应流已关闭。

另外，我认为响应内容类型不应该是“image/jpg”，尤其是考虑到 HTML 元标记如何表示内容是“text/html”。我认为它们应该是相同的——“text/html”。

最后——也许是最重要的？- JSP 已经很老了。您可能需要考虑使用 Facelets（JavaServer Faces 技术）。

# ruby-on-rails - 是否有一种无需查询数据库即可获取当前用户 ID 的设计方法？

> ID：15861437
> 
> 赞同：2
> 
> 时间：2013-04-07T10:39:00.273
> 
> 标签：ruby-on-rails, devise

有没有办法`id`在不访问数据库的情况下获取当前登录用户的身份？

如果您`id`通过调用获取用户的`current_user.id`，它会创建一个数据库查询并从那里获取它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T11:49:38.253

You can use `session["warden.user.user.key"][1][0]` to get current user id from session

# android - Android : 通过应用将数据发布到网站并在应用中查看结果

> ID：15861439
> 
> 赞同：1
> 
> 时间：2013-04-07T10:39:14.367
> 
> 标签：android, android-webview

我有一个将网站转换为移动格式的应用程序。应用程序中有一个微调器。所以我的疑问是，我如何将这些选定的值从我的微调器传递到网站以获得结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T10:49:34.713

您需要发出 http post 请求。

[http://developer.android.com/reference/org/apache/http/client/HttpClient.html](http://developer.android.com/reference/org/apache/http/client/HttpClient.html)。

注意：**如果您正在进行与网络相关的操作，您应该使用 AsyncTask 否则您将获得 NetworkOnMainThreadException（Honeycomb 及更高版本）。**

```
public void postData() {
// Create a new HttpClient and Post Header
HttpClient httpclient = new DefaultHttpClient();
HttpPost httppost = new HttpPost("http://www.yoursite.com/script.php");

try {
    // Add your data
    List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
    nameValuePairs.add(new BasicNameValuePair("id", "12345"));
    nameValuePairs.add(new BasicNameValuePair("stringdata", "AndDev is Cool!"));
    httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

    // Execute HTTP Post Request
    HttpResponse response = httpclient.execute(httppost);

} catch (ClientProtocolException e) {
    // TODO Auto-generated catch block
} catch (IOException e) {
    // TODO Auto-generated catch block
}
} 
```

下面的链接中提供了一些带有源代码的链接

[http://www.androidhive.info/2011/10/android-making-http-requests/](http://www.androidhive.info/2011/10/android-making-http-requests/)

[http://android-er.blogspot.in/2011/09/example-of-httppost-on-android.html](http://android-er.blogspot.in/2011/09/example-of-httppost-on-android.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T10:45:40.473

由于您在 WebView 容器内运行移动 Web 应用程序，因此您可以使用众所周知的库，如 jQuery 及其 ajax 内容。

# scala - 在 Scala 中从类型参数创建对象

> ID：15861441
> 
> 赞同：1
> 
> 时间：2013-04-07T10:39:23.407
> 
> 标签：scala, factory

我想创建一个带有类型参数的方法，显然它的构造函数上没有参数，并返回一个用该构造函数构造的虚拟对象。基本上是某种工厂模式。

*   这在 Scala 中是否可行？
*   这是一个好主意吗？如果不是，还有更好的模式吗？
*   有没有办法仅在编译时实现这一点（即没有反射）？

代码示例：

```
trait Model
class A extends Model
class B extends Model

def dummy[T <: Model] = new T   // Fails compilation with "class type required but T found"

dummy[A]  // Returns an instance of A
dummy[B]  // Returns an instance of B 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T10:55:45.740

这可以使用`ClassManifest`s 来完成，它旨在克服擦除：

```
def dummy[T <: Model : ClassManifest] = classManifest[T].erasure.newInstance 
```

至于在编译时进行而不进行反射，我想可以使用 scala 2.10 宏来完成。

# php - 反sql注入功能

> ID：15861451
> 
> 赞同：-3
> 
> 时间：2013-04-07T10:41:27.880
> 
> 标签：php, sql-server, sql-injection

我正在使用此功能来防止 sql 注入：

```
function filter($input)
{
  if(strpos(str_replace("''","","$input"),"'") != false)
  {
    return str_replace("'", "''", $input);
  }
  return $input;
} 
```

**使用它安全吗？有人可以绕过它吗？如果可以绕过它，请给我一个关于如何保护这个功能的提示或一个关于你如何看到绕过它的例子**

更新：它用于 SQL Server

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T10:47:41.770

如果您不是问题领域的专家，请不要发明自己的安全解决方案。看看这里[http://php.net/manual/en/security.database.sql-injection.php](http://php.net/manual/en/security.database.sql-injection.php)了解更多关于 SQL 注入的信息。

[还可以通过http://www.php.net/manual/en/book.pdo.php](http://www.php.net/manual/en/book.pdo.php)和[http://www.php.net/manual/en/pdo.prepare.php](http://www.php.net/manual/en/pdo.prepare.php)进行适当的预防

如果工具已经存在，您不需要自己发明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T10:43:20.490

> 使用它安全吗？

### 不

> 有人可以绕过它吗？

### 是的

1.  无论如何，它都不应该是**输入**过滤器。但是用于 SQL 查询的数据格式化程序。
2.  至少它必须是

    ```
    function SQLstrFormat($str)
    {
        return "'".str_replace("'", "''", $str)."'";
    } 
    ```

这种方式在适用时是安全的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-03T08:00:46.113

```
 function mysql_pre($value) {

            $magic_quotes_active = get_magic_quotes_gpc();
            $new_enough_php =      function_exists("mysql_real_escape_string(unescaped_string)"); //i.e. PHP >= v4.3.0

            if($new_enough_php) { //PHP v4.3.0 or higher
                //undo any magic quote effect so mysql_real_escape_string can do the work

                if($magic_quotes_active) {$value = stripslashes($value);}

                $value = mysql_real_escape_string($value);

            } else { //before PHP v4.3.0

                if(!$magic_quotes_active) {
                    $value = addslashes($value);
                }
            }
            return $value;
        } 
```

# objective-c - 指定填充以在 OSX 上创建数字签名

> ID：15861452
> 
> 赞同：0
> 
> 时间：2013-04-07T10:41:33.327
> 
> 标签：objective-c, macos, cocoa, encryption, cryptography

在 iOS 中有`SecKeyRawSign()`生成签名的方法，可以让你指定填充类型。

```
OSStatus SecKeyRawSign (
   SecKeyRef key,
   SecPadding padding,
   const uint8_t *dataToSign,
   size_t dataToSignLen,
   uint8_t *sig,
   size_t *sigLen
); 
```

在 OSX 上它不会以这种方式工作，我正在使用安全转换来做到这一点，如此处所述[https://developer.apple.com/library/mac/#documentation/Security/Conceptual/SecTransformPG/SigningandVerifying/SigningandVerifying。 html#//apple_ref/doc/uid/TP40010801-CH4-SW3](https://developer.apple.com/library/mac/#documentation/Security/Conceptual/SecTransformPG/SigningandVerifying/SigningandVerifying.html#//apple_ref/doc/uid/TP40010801-CH4-SW3)。

```
 /* Create the transform objects */
    signer = SecSignTransformCreate(privatekey, &error);
    if (error) { CFShow(error); exit(-1); }

    SecTransformSetAttribute(
                             signer,
                             kSecTransformInputAttributeName,
                             sourceData,
                             &error);
    if (error) { CFShow(error); exit(-1); }

  signature = SecTransformExecute(signer, &error);
    if (error) { CFShow(error); exit(-1); }

    if (!signature) {
        fprintf(stderr, "Signature is NULL!\n");
        exit(-1);
    } 
```

1.  有没有办法在这里设置填充？如果可能，请提供示例。

2.  在 iOS 的 Security Framework 中，定义`kSecPaddingPKCS1SHA256`了**SHA256**来设置填充。在 OSX 上没有，那么应该等同于使用什么？我需要为 SHA256 设置填充。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T14:26:18.617

这是未经测试的实验性代码，但您需要指定`PKCS1`填充，您使用的是`SHA-2`Digest 类型，并且大小为`256`：

```
SecTransformSetAttribute(
                     signer,
                     kSecPaddingKey,
                     kSecPaddingPKCS1Key,
                     &error);
if (error) { CFShow(error); exit(-1); }

SecTransformSetAttribute(
                     signer,
                     kSecDigestTypeAttribute,
                     kSecDigestSHA2,
                     &error);
if (error) { CFShow(error); exit(-1); }

int digestLength = 256;
CFNumberRef dLen = CFNumberCreate(kCFAllocatorDefault, kCFNumberIntType, &digestLength);
Boolean set = SecTransformSetAttribute(
                     signer,
                     kSecDigestLengthAttribute,
                     dLen,
                     &error);
CFRelease(dLen);
if (!set || error) { CFShow(error); exit(-1); } 
```

# php - 错误：键“r_id”的重复条目“1”

> ID：15861454
> 
> 赞同：1
> 
> 时间：2013-04-07T10:41:40.190
> 
> 标签：php, mysql, duplicates

这是表结构

```
CREATE TABLE IF NOT EXISTS `result` (
`res_id` int(11) NOT NULL AUTO_INCREMENT,
`s_id` int(10) NOT NULL,
`i_id` int(6) NOT NULL,
`r_status` text NOT NULL,
`r_score` decimal(6,0) NOT NULL,
PRIMARY KEY (`res_id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=2 ; 
```

我已经搜索了一个解决方案，并在不同的场合尝试过，从头开始构建表，删除并导入它，检查索引。如您所见，我已将 id 重命名为 res_id，但是当我在浏览器上运行它时，错误仍然显示 r_id。

如果有区别，当 id 未设置为自动递增时，会弹出相同的错误。

这是我要插入数据库的页面的代码片段。

```
//retrieve existing r_id
$sql_res = "SELECT res_id FROM result ORDER BY res_id DESC LIMIT 1";
$query_res = mysql_query($sql_res) or die("MySQL Error: " . mysql_error());
$data_res = mysql_fetch_assoc($query_res);
$resid_count = $data_res['res_id']+1;
//echo "<br>Result: " . $resid_count;

// insert result to table
$sql_result = "INSERT INTO result (res_id, r_score, s_id, i_id) VALUES ('" . $resid_count . "', '" . $correct . "',  '" . $id . "',  '" . $ins_id . "')";
mysql_query($sql_result) or die ("Error: " . mysql_error()); 
```

编辑：我按照你们的建议更改了代码。从 INSERT 中取出 res_id。它仍然说**r_id**的重复条目。我继续进行试验和错误，并创建了另一个具有相同结构的表'score'来替换'result'。想知道相同的表名是否给它带来了问题（多次运行页面会导致这种情况吗？）。与分数表相同的结果。

任何帮助将不胜感激。我被困在这里，无法继续我的项目。谢谢。

阿提卡

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T10:46:33.973

因为我建议你用这个替换你的插入查询`res_id`：`AUTO_INCREMENT`

```
$sql_result = "INSERT INTO result (r_score, s_id, i_id) VALUES ('". $correct . "',  '" . $id . "',  '" . $ins_id . "')"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T10:44:44.047

试试这个

```
 $sql_result = "INSERT INTO result ( r_score, s_id, i_id) VALUES ( '" . $correct . "',  '" . $id . "',  '" . $ins_id . "')"; 
```

`res_id`将自动插入，无需您插入

编辑。

如果您只想插入，那么您不需要这些行，只需删除它们，因为您正在使用它们来了解最后一个 res_id 。因为 res_id 正如我在它的 auto_increment 之前所说的那样。它会自动增加

```
 $sql_res = "SELECT res_id FROM result ORDER BY res_id DESC LIMIT 1";
   $query_res = mysql_query($sql_res) or die("MySQL Error: " . mysql_error());
   $data_res = mysql_fetch_assoc($query_res);
   $resid_count = $data_res['res_id']+1; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T11:11:33.143

确保不要在使用数字 (int) 的 SQL 中使用撇号。这可能会引起麻烦。并且 res_id 根本不应该参与，因为这就是具有自动增量列的关键（您没有使用 PHP 代码在数据库中搜索下一个 id，DB 会处理这个问题）

您的代码可以翻译成两行：

```
$sql_result = "INSERT INTO result (r_score, s_id, i_id) VALUES (" . $correct . ",  " . $id . ",  " . $ins_id . ")";
mysql_query($sql_result) or die ("Error: " . mysql_error()); 
```

**或**（引号内的变量给出实际值）

```
$sql_result = "INSERT INTO result (r_score, s_id, i_id) VALUES ($correct, $id, $ins_id)";
mysql_query($sql_result) or die ("Error: " . mysql_error()); 
```

当然 - 不要使用 mysql_* - 函数，因为它们已被弃用。使用 PDO 或 Mysqli 代替参数，这样您就可以安全地避免 SQL 注入。您拥有的代码容易受到 SQL 注入的攻击。

# winapi - 枚举所有可用的变更日志记录

> ID：15861456
> 
> 赞同：1
> 
> 时间：2013-04-07T10:41:49.550
> 
> 标签：winapi, file-io, ntfs, watch, deviceiocontrol

我在枚举更改日志记录时遇到问题。

```
//my params    
READ_USN_JOURNAL_DATA read_journal_data;
read_journal_data.StartUsn = ... //next USN
read_journal_data.ReasonMask = 0xFFFFFFFF;
read_journal_data.ReturnOnlyOnClose = FALSE;
read_journal_data.UsnJournalID = ... //ID of current journal
read_journal_data.BytesToWaitFor = 9000;
read_journal_data.Timeout = 5; //5 seconds

BOOL result = DeviceIoControl(this->volume_handle_, FSCTL_READ_USN_JOURNAL,
         &read_journal_data, sizeof(read_journal_data), this->change_journal_data_buffer_,
         this->change_journal_data_buffer_, &this->valid_bytes_in_buffer_, NULL); 
```

如您所见，`Timeout`是非零的，`BytesToWaitFor`也是非零的。我知道当`FSCTL_READ_USN_JOURNAL`调用到达更改日志的末尾时，它必须等待`Timeout`几秒钟，然后返回`BytesToWaitFor`. 但是，由于某种原因，我正在观察完全不同的行为：`DeviceIoControl`with`FSCTL_READ_USN_JOURNAL`和其他列出的参数可能需要几分钟 - 直到文件系统中发生了一些新的更改。为什么`READ_USN_JOURNAL_DATA.Timeout`不限制`FSCTL_READ_USN_JOURNAL`请求的持续时间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T12:50:41.863

具体而言，它的行为与预期的行为完全相同：

> 在任何一种情况下，在超时期限之后，都会处理附加到更改日志的任何新数据。如果仍然没有从指定集合返回的记录，则重复超时期限。在这种模式下，FSCTL_READ_USN_JOURNAL 保持未完成状态，直到至少返回一条记录或取消 I/O。

请参阅[MSDN，超时部分](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365481%28v=vs.85%29.aspx)

# zend-framework2 - 后重定向获取的好处

> ID：15861458
> 
> 赞同：3
> 
> 时间：2013-04-07T10:41:55.537
> 
> 标签：zend-framework2

当我开始使用 ZF2 时，我使用的第一个模块是 ZfcUser。当我调试它的控制器代码时，我发现了一种奇怪的方式（至少对我来说）来管理操作。我找到了类似的代码

```
 $prg = $this->prg('zfcuser/changepassword');

    if ($prg instanceof Response) {
        return $prg;
    } elseif ($prg === false) {
        return array(
            'status' => $status,
            'changePasswordForm' => $form,
        );
    }

    //VALIDATE FORM AND DATABASE STUFF
    (...) 
```

行为如下：

1.  第一次加载 $prg 是假的，所以它返回表单。
2.  当您提交页面时，$prg 是 Response 的一个实例，因此它返回 $prg。
3.  当返回 $prg 时，再次调用相同的函数并且 $prg 变成一个包含所有已发布数据的数组，因此它跳转到表单和数据库内容的验证。

我认为这是一种奇怪的方法，所以我用简单的 request->isPost() 覆盖了所有需要的函数。我发现处理发布的第一个负载/数据更容易。

直到现在我才更加重视它。当我尝试上传文件时，我再次面临 Post-Redirect-Get 方法：似乎需要防止用户在表单上出现验证错误时重新选择文件并重新上传。

Post-Redirect-Get 的意义何在？你什么时候推荐使用它（除了评论文件上传）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T21:51:39.890

正如文档所述：

> 当用户发送 POST 请求时（例如，在提交表单后），他们的浏览器会尝试保护他们免于再次发送 POST，破坏后退按钮，导致浏览器警告和弹出窗口，有时还会重新发布表单。相反，当接收到 POST 时，我们应该将数据存储在会话容器中，并将用户重定向到 GET 请求。

所以这个插件的目的是改善用户体验。当您提交表单并尝试刷新页面时，您一定遇到过这个问题，您会收到一条弹出消息，例如（来自 google chrome 的示例）：

> 确认重新提交表单：您正在查找的页面使用了您输入的信息。返回该页面可能会导致您重复执行的任何操作。你要继续吗？

如果您的表单处理文件上传，您可以在[Post/Redirect/Get Plugin](http://zf2.readthedocs.org/en/latest/modules/zend.mvc.plugins.html#post-redirect-get-plugin)或[File Post/Redirect/Get Plugin](http://zf2.readthedocs.org/en/latest/modules/zend.mvc.plugins.html#file-post-redirect-get-plugin)的文档中获得更多详细信息。

**注意：对于*File Post/Redirect/Get Plugin - Example Usage*，第 16 行有一个错字，您应该使用`$this->filePrg()`而不是`$this->prg()`. 它应该像下面的行。**

```
$prg = $this->filePrg($myForm, '/user/profile-pic', true); 
```

# java - 让我的游戏循环播放？

> ID：15861459
> 
> 赞同：-2
> 
> 时间：2013-04-07T10:42:11.403
> 
> 标签：java

我做了一个刽子手，它基本上是完整的，但是我似乎无法让一个循环工作，所以当用户获胜时，他们会被问到如果他们说是，他们是否想要另一个游戏，然后它会重新开始？谁能帮帮我？

刽子手类：

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package hangman;

import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;
import java.util.Random;
import java.util.Scanner;

/**
 *
 * @author Adam2_000
 */
public class Hangman {

     /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {

        String selection;
        Scanner scan = new Scanner(System.in);

        /*
         *  I moved the variables found here to the Game class 
         */

        //New instances of class and arrays
        Words words = new Words();

        System.out.println("Welcome to Hangman version 1");
        System.out.println("Please choose a difficulty");
        System.out.println("A: Easy");
        System.out.println("B: Medium");
        System.out.println("C: Hard");
        System.out.println("X: Exit");      // Just for user friendlyness

        System.out.println(" _________     ");
        System.out.println("|         |    ");
        System.out.println("|         0    ");
        System.out.println("|        /|\\  ");
        System.out.println("|        / \\  ");
        System.out.println("|              ");
        System.out.println("|              ");

        char iChoice;

        do {
            selection = scan.nextLine().toUpperCase();
        } while (selection.isEmpty());

        iChoice = selection.charAt(0);
        if (iChoice != 'X') {
            switch (iChoice) {
                case 'A':
                    System.out.println("You have choosen easy:");
                    new Game(words.easyWords, scan);                //All three levels can be called from the same class with the same code.
                    break;                                          //This will help reduce amount of code, and help when you need to change all three at once.

                case 'B':
                    System.out.println("You have choosen Medium");
                    new Game(words.mediumWords, scan);              //Called with the String[] of words you want to use and the scanner to save memory.
                    break;

                case 'C':
                    System.out.println("You have choosen Hard");
                    new Game(words.hardWords, scan);
                    break;

            }
        }
    }
} 
```

游戏类：

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package hangman;

import java.util.ArrayList;
import java.util.List;
import java.util.Random;
import java.util.Scanner;

/**
 *
 * @author Adam2_000
 */
public class Game {

    String player = "";
    int turn = 12;
    List<String> wordBox = new ArrayList<String>();
    boolean hangman = false;
    boolean win = false;
    String loop;
    Scanner scan;
    Random random = new Random();
    String letters;     // For displaying letters
    String mask;        // For character Mask

    public Game(String[] words, Scanner scanner) {
        scan = scanner;

        int selectA = random.nextInt(words.length);

        letters = words[selectA];               //Load word into String for display. This just makes the code more readable.        
        mask = letters.replaceAll("\\S", "*");  // Mask the words

        System.out.println("Random String selected: " + "\n" + mask);
        System.out.println("This word contains " + letters.length() + " letters");

        while (hangman == false) {
            System.out.println("Turns remaining: " + turn);
            System.out.println("Please choose a letter A-Z :");
            String ChosenLetter = scan.next();

            if (wordBox.contains(ChosenLetter)) {
                System.out.println("Letter alreay choosen please choose another letter");
                turn++;
            } else {
                wordBox.add(ChosenLetter);
            }

            if (letters.contains(ChosenLetter)) {
                char[] cLetters = letters.toCharArray();    //Load letters and mask to char array for editing
                char[] cMask = mask.toCharArray();

                for (int i = 0; i < cMask.length; i++) {
                    if (cLetters[i] == ChosenLetter.charAt(0)) {
                        cMask[i] = cLetters[i];
                    }
                }

                mask = new String(cMask);   //Load new mask into String

                System.out.println("Wordbox letters are: " + wordBox);
                System.out.println("Yes!" + "\n" + mask);                      // Prints mask after Yes!

                turn--;

                if (mask.contains(words[selectA])) {
                    System.out.println("You win!");

                    System.out.println("would you like another game?");
                    loop = scan.next();

                    while ("Yes".equals(loop) ||"yes".equals(loop));

                }

            } else {
                System.out.println("Wordbox letters are: " + wordBox);
                System.out.println("No!" + "\n" + mask);                               //Prints mask after No!
                turn--;
            }

            if (turn == 0) {
                hangman = true;
            }

            while (hangman == true) {
                System.out.println("You lose!");
                System.exit(0);

            }
        }
    }
} 
```

词类：

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package hangman;

import java.lang.reflect.Array;
import java.util.Random;

/**
 *
 * @author Adam2_000
 */
public class Words extends Hangman {

    String[] easyWords = {"bee", "car", "fish", "shed"};
    String[] mediumWords = {"house", "sheep", "castle", "phone"};
    String[] hardWords = {"octagon", "crocodile", "chocolate", "motorbike"};

    public String[] getEasyWords() {
        return easyWords;
    }

    public void setEasyWords(String[] easyWords) {
        this.easyWords = easyWords;
    }

    public String[] getMediumWords() {
        return mediumWords;
    }

    public void setMediumWords(String[] mediumWords) {
        this.mediumWords = mediumWords;
    }

    public String[] getHardWords() {
        return hardWords;
    }

    public void setHardWords(String[] hardWords) {
        this.hardWords = hardWords;
    }

    @Override
    public String toString() {
        return "words{" + "easyWords=" + easyWords + ", mediumWords=" + mediumWords + ", hardWords=" + hardWords + '}';
    }
} 
```

我试过这个？

```
 if (mask.contains(words[selectA])) {
                    System.out.println("You win!");

                    System.out.println("would you like another game?");
                    loop = scan.next();

                    while ("Yes".equals(loop) ||"yes".equals(loop));

                } 
```

没啥事儿。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T11:02:17.987

最简单的方法是这样的：

```
if("Yes".equals(loop) || "yes".equals(loop)) {
    new Game(words, scanner);
} 
```

或者如果玩家再次选择关卡更好，你应该在 Hangman 类中放置一个真正的循环（你只需要改变这个：

```
if(hangman == true) {    <- why there was while ??
    System.out.println("You lose!");
    //System.exit(0);    <- remove this
} 
```

并允许 Game 类完成，返回 Hangman 类，所有代码都应该在一个循环中（仅当用户想要退出时才结束）。试试这个并询问是否有任何问题。

# c# - 没有行被删除/更新，C#（Winforms）中的 SQL Server 出错

> ID：15861460
> 
> 赞同：3
> 
> 时间：2013-04-07T10:42:14.047
> 
> 标签：c#, sql, sql-server, winforms

我有一个`Users`用这些列调用的表

```
Username - Nvarchar(50).
Password - Nvarchar(50). 
```

现在我有这个数据

```
UserName    Password
----------  ----------
adimin       123456
test         1234
abc           123 
abc           123 
```

现在我正在尝试（**手动**）删除`abc`用户，我收到了这个错误：

![错误](https://i.stack.imgur.com/C2ggF.jpg)

我可以添加更多用户并更新和删除它们，但我无法对`abc`用户做任何事情。为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T10:50:33.200

您可以使用删除语句删除记录，而不是在 IDE 中手动删除：

```
delete from users
where username = 'abc' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T11:22:11.593

Visual Studio 抱怨，因为您没有定义*Primary Key*。例如，添加一个标识列，它就不会再抱怨了（因为它会确切地知道要删除哪一行）。

前任。：`ALTER TABLE users ADD id INT IDENTITY PRIMARY KEY`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-25T20:47:52.567

如果要删除表中的所有数据。您可以使用以下 SQL 语句

**从表名中删除**

ex :- 从 tblReOrderLevel 删除

# java - 文本文件错误扫描仪

> ID：15861461
> 
> 赞同：0
> 
> 时间：2013-04-07T10:42:22.793
> 
> 标签：java, text

我正在编写代码，当用户输入它时从文本文件中删除一个单词，但我似乎无法让扫描仪部分工作

```
public static void Option2Method() throws IOException 
{

File inputFile = new File("wordlist.txt");
File tempFile = new File("TempWordlist.txt");
String lineToRemove = JOptionPane.showInputDialog(null, "Enter a word to remove");
Scanner reader =  new Scanner(inputFile); 
Scanner writer =new Scanner(tempFile);
String currentLine;

while((currentLine = reader.nextLine()) != null)
{
String trimmedLine = currentLine.trim();
if(trimmedLine.equals(lineToRemove)) continue;
writer.print(currentLine + "\n");
}
reader.close();
writer.close();
inputFile.delete();
tempFile.renameTo(inputFile);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T11:02:48.613

`Scanner`不打算写文件，因此没有`write()`方法。你可以`BufferedWriter`改用。

例子：

```
public static void Option2Method() throws IOException {

    File inputFile = new File("wordlist.txt");
    FileWriter fstream = new FileWriter("TempWordlist.txt", true);
    BufferedWriter writer = new BufferedWriter(fstream);

    File tempFile = new File("TempWordlist.txt");
    String lineToRemove = JOptionPane.showInputDialog(null, "Enter a word to remove");
    Scanner reader = new Scanner(inputFile);

    while (reader.hasNextLine()) {
        String trimmedLine = reader.nextLine().trim();
        if (trimmedLine.equals(lineToRemove))
            continue;

        writer.write(trimmedLine + "\n");
    }

    reader.close();
    writer.close();
    inputFile.delete();
    tempFile.renameTo(inputFile);
} 
```

使用`PrintWriter`：

```
 File inputFile = new File("wordlist.txt");
    PrintWriter writer = new PrintWriter(new BufferedWriter(new FileWriter("TempWordlist.txt", true)));

    File tempFile = new File("TempWordlist.txt");
    String lineToRemove = JOptionPane.showInputDialog(null, "Enter a word to remove");
    Scanner reader = new Scanner(inputFile);

    while (reader.hasNextLine()) {
        String trimmedLine = reader.nextLine().trim();
        if (trimmedLine.equals(lineToRemove))
            continue;

        writer.print(trimmedLine + "\n");
    }

    reader.close();
    writer.close();
    inputFile.delete();
    tempFile.renameTo(inputFile); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T10:53:00.503

`Scanner`没有`print`方法。它用于**扫描**文件并从中**读取**数据。

如果你想写入文件，使用[这个](https://stackoverflow.com/a/4576234/1651233)或[那个](https://stackoverflow.com/a/10667865/1651233)或者只是谷歌“ [java write to file](https://www.google.co.il/search?q=java%20write%20to%20file&rlz=1C1CHEU_iwIL474IL474&aq=f&oq=java%20write%20to%20file&aqs=chrome.0.59j60l2j0l3.4604j0&sourceid=chrome&ie=UTF-8) ”

# macos - 在 Mac OS X lion 中安装 Rmagick 问题

> ID：15861467
> 
> 赞同：0
> 
> 时间：2013-04-07T10:43:05.170
> 
> 标签：macos, operating-system, gem, osx-mountain-lion, rmagick

问题：获取：rmagick-2.13.2.gem (100%) 构建原生扩展。这可能需要一段时间... 错误：安装 rmagick 时出错：错误：无法构建 gem 原生扩展。/Users/officemachine1/.rvm/rubies/ruby-1.9.2-p180/bin/ruby extconf.rb 检查 Ruby 版本 >= 1.8.5... 是检查 /usr/bin/gcc-4.2...是检查 Magick-config... 是检查 ImageMagick 版本 >= 6.4.9... 是检查 ImageMagick 的 HDRI 禁用版本... 是 /usr/local/bin/Magick-config: line 41: pkg-配置：找不到命令 /usr/local/bin/Magick-config：第 47 行：pkg-config：找不到命令 /usr/local/bin/Magick-config：第 50 行：pkg-config：找不到命令 /usr/ local/bin/Magick-config: 第 53 行: pkg-config: command not found 检查 stdint.h ... 是检查 sys/types.h... 是检查 wand/MagickWand.h... 否 无法安装 RMagick 2.13.2。找不到 MagickWand.h。 *** extconf.rb 失败 *** 由于某种原因无法创建 Makefile，可能缺少必要的库和/或头文件。检查 mkmf.log 文件以获取更多详细信息。您可能需要配置选项。提供的配置选项： --with-opt-dir --with-opt-include --without-opt-include=${opt-dir}/include --with-opt-lib --without-opt-lib=$ {opt-dir}/lib --with-make-prog --without-make-prog --srcdir=。--curdir --ruby=/Users/officemachine1/.rvm/rubies/ruby-1.9.2-p180/bin/ruby Gem 文件将继续安装在 /Users/officemachine1/.rvm/gems/ruby-1.9.2- p180/gems/rmagick-2.13.2 进行检查。结果记录到 /Users/officemachine1/.rvm/gems/ruby-1.9.2-p180/gems/rmagick-2.13.2/ext/RMagick/gem_make.out

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T10:43:05.170

解决方案： $ brew install pkg-config 错误：权限被拒绝 - /Users/officemachine1/Library/Caches/Homebrew/Formula/pkg-config.brewing office-machine-1s-macbook:nationestateagents officemachine1$ sudo brew install pkg-config == > 下载[https://downloads.sf.net/project/machomebrew/Bottles/pkg-config-0.28.lion.bottle.tar.gz](https://downloads.sf.net/project/machomebrew/Bottles/pkg-config-0.28.lion.bottle.tar.gz)

################################################# ################ 100.0%

==> 倒入 pkg-config-0.28.lion.bottle.tar.gz /usr/local/Cellar/pkg-config/0.28：10 个文件，636K

$ rvmsudo 捆绑安装

我希望这可能会帮助您摆脱上述问题。

# ruby-on-rails - Rails 4 中的资产和第三方库

> ID：15861469
> 
> 赞同：2
> 
> 时间：2013-04-07T10:43:12.650
> 
> 标签：ruby-on-rails, plugins, asset-pipeline

我现在正在使用第三方库，它是 jquery plagins，并且没有适合他们的宝石。例如，其中一个具有以下结构：

```
-plugin
 |- css
  |- plugin.css
 |- js
  |-plugin.js
 |-image1.jpg
 |-image2.jpg 
```

`plugin.css`文件包含如下代码：`background-image: url('../metro/add.png')`

我必须把它的插件放在哪里以及将它包含在资产中的正确程度如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T11:53:57.653

我建议使用[索引文件技术](http://guides.rubyonrails.org/asset_pipeline.html#asset-organization)（查看 2.1.2）来处理资产管道和插件。另一种选择是将您的`plugin`目录包含在资产管道中，如下所示（在您的`config/application.rb`）：

```
config.assets.paths << Rails.root.join("app", "plugin") 
```

之后，您应该：

*   重命名`plugin`的目录
    *   `css`到`stylesheets`;
    *   `js`到`javascripts`;
*   创建名为的目录`images`并将`.jpg`文件放在那里；

# java - 没有得到 ArrayList 元素的所需输出，有人可以澄清一下吗？

> ID：15861470
> 
> 赞同：0
> 
> 时间：2013-04-07T10:43:19.113
> 
> 标签：java

我已经将arraylist定义如下：

```
ArrayList<Node> nodes = new ArrayList<Node>(); 
```

其中 Node 是一个类，它具有一种用于存储单个字符的字符数据类型。

输出显示一些垃圾值而不是打印字符：

这是一个代码片段。谁能解释为什么？

```
for(Node d : nodes){
    System.out.println(d);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T10:45:07.673

您的`Node`类不会覆盖该`toString`方法。这就是为什么调用默认实现，产生看起来像“垃圾”的原因。

在您的`Node`类中添加一个`toString`不带参数的方法，并返回一个`String`以特定于应用程序的方式描述节点内容的方法。这将修复输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T10:44:20.690

除非您继承 ArrayList 并覆盖 toString 方法，否则只需在 ArrayList 上调用 println 将打印对象引用的地址（这是您看到的垃圾），而不是 arraylist 的实际内容。要获得您想要的结果，请使用：

```
System.out.println(Arrays.toString(nodes.toArray()); 
```

顺便说一句-其他人是正确的，您还需要覆盖节点类的 toString() 方法（通常，覆盖您设计的任何类的 toString() 方法始终是最佳实践）。

为了解决您在下面的评论中提到的问题：

```
public String toString(){
   return Character.toString(label);
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T10:48:42.070

`System.out.println(d)`相当于`System.out.println(d.toString())`

如果你没有`toString()`在你的类中重新定义方法`Node`，java 会使用`toString()`你的对象继承的类的方法。

默认情况下，所有类都继承了`Object`方法`toString()`定义为的超类：

```
public String toString() {
      return getClass().getName() + "@" + Integer.toHexString(hashCode());
   } 
```

这就是为什么它看起来像“垃圾”

# javascript - 每当在Javascript中添加对象属性时引发事件？

> ID：15861473
> 
> 赞同：2
> 
> 时间：2013-04-07T10:43:35.637
> 
> 标签：javascript

我有一个 Javascript 对象：

`var obj={...};`

*   每当添加/更改新属性时，如何执行函数：

    例如：`obj["newItem"]=3;`

*   数组有什么办法吗？（原型中的例外覆盖`push`）

*   有没有办法将不同的对象分配给同一个变量？

    例子 ：

    ```
    var obj={...};
        obj={...}; //redifine 
    ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T11:00:48.443

有一个名为[Object.observe](http://wiki.ecmascript.org/doku.php?id=harmony%3aobserve)的提议正是为此目的。它类似于 Firefox 中的[Object.watch](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/watch)。

还有为您提供更多灵活性的[代理](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Proxy)对象。

但是，它们都没有广泛实施——例如，如果您正在开发 Firefox 插件，您可以使用代理。

还请注意，对于您问题的第一点来说，这是正确的，但不是最后一点。基本上，如果你正在做：

```
var obj = {a: 1};

obj = {b: 1}; 
```

你没有“重新定义”一个对象，对象本身没有被触及，你只是将不同的对象分配给同一个变量。如果要监视更改，该变量需要是对象的属性——例如，在浏览器中，任何全局变量都会自动成为全局对象的属性，在这种情况下`window`，您可以这样做。

# mysql - mySQL 多重连接，结果行为空

> ID：15861474
> 
> 赞同：0
> 
> 时间：2013-04-07T10:43:38.003
> 
> 标签：mysql, join, group-by, exists

我有两张桌子`CLIENSTS`，`PRICES`我想加入它们，以便每年计算每种物品类型的总***价格***。
我的查询必须对每个项目的值求和，按类型对它们进行分组，然后将它们与客户表中相应项目的类型数量相乘；如果所选年份没有项目，则还显示空值。

这是我的桌子：

```
CLIENTS
| name | item_A | item_B | item_C |
|  X   |   10   |   10   |   10   |
|  Y   |    5   |   15   |    0   |
|  Z   |    0   |    0   |   20   |

PRICES
| item | item_type | year | value |
|  a1  |     A     | 2010 |   1   |
|  a2  |     A     | 2010 |   2   |
|  b1  |     B     | 2010 |   2   | 
|  b2  |     B     | 2010 |   3   |
|  c1  |     C     | 2010 |   3   |
|  a1  |     A     | 2011 |   4   |
|  b1  |     B     | 2011 |   5   | 
```

我正在寻找一个能够为所选的每一年执行后续结果的查询：

```
2010
| name | price_A | price_B | price_C |
|  X   |    30   |    60   |    30   |
|  Y   |    15   |    90   |     0   |
|  Z   |     0   |     0   |    60   |

2011
| name | price_A | price_B | price_C        |
|  X   |    40   |    50   | none/null/zero |
|  Y   |    20   |    75   | none/null/zero |
|  Z   |     0   |     0   | none/null/zero | 
```

这是我的尝试，但不幸的是它在第一年（2010 年）正确执行，第二年（2011 年）没有返回任何行。
我想这是由于第二年没有`total_C`结果的第三次加入。
哪个是要求 mySQL 加入表格“*如果结果存在*”或将值设置为“*无/空/零*”的正确方法？

```
SELECT 
`name`, 
`item_A` * `total_A`.`total_value` AS  `price_A`,
`item_B` * `total_B`.`total_value` AS  `price_B`, 
`item_C` * `total_C`.`total_value` AS  `price_C`
FROM `CLIENTS`
JOIN
 (
SELECT 
`item_type`,
SUM(`value`) AS `total_value`
FROM `PRICES` 
WHERE `item_type`='A' AND `year` LIKE '2010'
GROUP BY `item_type`
) AS `total_A`
JOIN
 (
SELECT 
`item_type`,
SUM(`value`) AS `total_value`
FROM `PRICES` 
WHERE `item_type`='B' AND `year` LIKE '2010'
GROUP BY `item_type`
) AS `total_B`
JOIN
 (
SELECT 
`item_type`,
SUM(`value`) AS `total_value`
FROM `PRICES` 
WHERE `item_type`='C' AND `year` LIKE '2010'
GROUP BY `item_type`
) AS `total_C` 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T11:44:58.930

如果我正确理解您的问题，我认为您应该使用以下内容：

```
SELECT
  s.year,
  clients.name,
  clients.item_A*s.sum_A,
  clients.item_B*s.sum_B,
  clients.item_C*s.sum_C
FROM
  clients INNER JOIN (
  SELECT
    year,
    SUM(CASE WHEN item_type='A' THEN value END) sum_A,
    SUM(CASE WHEN item_type='B' THEN value END) sum_B,
    SUM(CASE WHEN item_type='C' THEN value END) sum_C
  FROM
    prices
  GROUP BY
    year) s
ORDER BY
  s.year 
```

请[在此处](http://sqlfiddle.com/#!2/ca5ae/1)查看小提琴。

在子查询中，我对 item_type 每年的总值求和。然后我正在与客户表进行笛卡尔连接。

# c# - 键+初始化向量到一个新键？

> ID：15861475
> 
> 赞同：0
> 
> 时间：2013-04-07T10:43:42.540
> 
> 标签：c#, java, security, encryption, aes

我有一个解密数据的 API。此 API 仅接收密钥（AES 密钥的字节）。此 API 不接收初始化向量（它使用零向量作为初始化向量）。

我从第 3 方收到加密数据。使用特定密钥和初始化向量将此数据加密为 AES 256。

我有密钥和初始化向量。有没有办法使用 API 解密这些数据？或者，换句话说，如果密钥和初始化向量都是常量并且我都有它们，我是否可以创建一个密钥，允许我使用 {0, 0, 0, ...} 初始化向量解密这些数据？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T15:13:31.167

是的，可以解密...不，不是您描述的方式

AES 是一种分组密码

大多数情况下，密码并没有按原样使用，而是被置于一种特殊的操作模式中（这可能是您的 API 无法做到的）

您将不得不围绕密码实现解密例程，并将您的 AES-API 用作加密原语

例如，使用通用 AES 实现解密 AES-CBC

将密文拆分为 128 位块并从索引 1 开始编号

将 IV 添加为 cypher_block 0

现在要获取明文，我们可以围绕您的 API 函数定义一个函数

plaintext_block[i] = cypher_block[i-1] XOR aes_decrypt(cypher_block[i],key)

如您所见，您可以从索引 1 开始获取所有明文块...

一旦你获得了所有的明文块，你可能会想要去除填充，但那是另一回事了......

# javascript - jQuery悬停功能滑动跨度

> ID：15861476
> 
> 赞同：0
> 
> 时间：2013-04-07T10:43:48.710
> 
> 标签：javascript, jquery, html, css, hover

我创建了一些共享按钮，试图让标准的推文、pin 等看起来更好一些。我创建了一个[jsfiddle](http://jsfiddle.net/bgxZB/)来演示我遇到的问题。它们几乎可以按预期工作，但是在悬停时，我需要跨度不碍事，以允许用户单击下面的按钮而无法弄清楚。如果你玩小提琴，你就会明白我的意思。

**我的html：**

```
<div class="sharebuttons">
    <ul>
        <li id="tweet"><span></span><a href="">tweet</a></li>
        <li id="like"><span></span><a href="">like</a></li>
        <li id="pin"><span></span><a href="">pin</a></li>
        <li id="plusone"><span></span><a href="">plusone</a></li>
    </ul>
</div> 
```

**JS：**

```
$(document).ready(function(){
    $('.sharebuttons ul li span').hover(function(){
        $(this).slideUp();
    }, function(){
        $(this).slideDown();
    });
}); 
```

工作小提琴在这里

[http://jsfiddle.net/bgxZB/](http://jsfiddle.net/bgxZB/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T10:45:55.180

您需要将悬停定位在`li`而不是`span`：

```
$(document).ready(function(){

    $('.sharebuttons ul li').hover(function(){
        $(this).find('span').slideUp();
    }, function(){
        $(this).find('span').slideDown();
    });

}); 
```

**[演示](http://jsfiddle.net/bgxZB/1/)**

# c++ - 为什么这个程序用'a'替换所有字符

> ID：15861484
> 
> 赞同：0
> 
> 时间：2013-04-07T10:44:37.040
> 
> 标签：c++, arrays, char

在程序中，我有一个 char 数组。它从输入字符的用户那里获取输入，当输入字母 b 时，它应该用字母 a 替换它。相反，它用字母 a 替换所有元素，而不是仅仅用 a 替换字母 b。为什么要这样做？

```
#include <iostream>
#include <string>

using namespace std;

int main()
{
const int buff_len = 10;
char buffer [buff_len];

for(int i = 0; i < buff_len; i++){
        cin >> buffer[i];

}

for(int j = 0; j < buff_len; j++){
    if(buffer[j] = 'b'){
        buffer[j] = 'a';
    }

}

for(int i = 0; i < buff_len; i++){
    cout << buffer[i];
}

system("Pause");
return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T10:46:12.037

用来`==`比较。

是`=`分配运算符。

你所做的总是分配`'a'`给`buffer[j]`since`if(buffer[j] = 'b')`总是被评估为*true*。

**为什么？**

*赋值表达式返回赋值，在这种情况下`if(buffer[j] = 'b')`总是为真，这就是为什么 if 语句下面的代码总是被执行的原因。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T10:47:12.610

尝试更新：

```
if(buffer[j] = 'b'){ 
```

到：

```
if(buffer[j] == 'b')
             ^^^ 
```

因为`if(buffer[j] = 'b')`总是会被评估为真，这就是为什么总是执行下面的语句。

```
buffer[j] = 'a'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T10:47:01.563

为了比较 == 是必需的。`buffer[j] = 'b'`（作业）将永远为真。

```
if(buffer[j] == 'b') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-07T10:54:28.403

因为`buffer[j] = 'b'`返回值总是等于真。

# css - 在 html5 中的画布上放置一个 div

> ID：15861485
> 
> 赞同：9
> 
> 时间：2013-04-07T10:44:42.887
> 
> 标签：css, html, canvas, center

我正在尝试在页面中心的画布（用于游戏）上放置一个 div 元素。这是关于我想在开始游戏之前在画布上显示的开始屏幕（这个开始屏幕有“玩游戏”、“设置”等选项）。问题是我无法完成这项工作，我在谷歌上搜索了很多，我看过很多例子，但似乎没有一个对我有用。这是我的代码：

```
<div id="gamecontainer">
            <canvas id="myCanvas" width="800" height="600">
                Sorry, <strong>CANVAS</strong> is not supported by your browser. Get a more recent one to play my game!
            </canvas>

            <div id="gamestartscreen" class="gamelayer">
                <img src="images/icons/play.png" alt="Play Game" onclick="alert('ceve');"><br>
                <img src="images/icons/settings.png" alt="Settings">
            </div>
</div> 
```

这是CSS：

```
#gamecontainer {
    width: 800px;
    height: 600px;
    background-color: beige;
    border: 1px solid black;
    position: relative;
    margin: 0 auto;
}

.gamelayer {
    width: 800px;
    height: 600px;
    position: absolute;
    display: none;
    z-index: 0;
}

/* Screen for the main menu (Like Play, Settings, etc.) */
#gamestartscreen {
    position: relative;
    margin: 0 auto;
}

#gamestartscreen img {
    margin: 10px;
    cursor: pointer;
} 
```

有人可以告诉我我在哪里做错了吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-07T10:54:19.803

问题是画布层处于其原生静态定位，而游戏开始 div 处于相对定位，没有正 z-index 值。本质上，您只需将 canvas 元素设置为`position: absolute`或 甚至`position: relative`，同时为startstreen div设置> 1的z-index。这个[JSFiddle](http://jsfiddle.net/n992V/)应该说明一切。干杯!

# android - Listview 上一个项目在按钮单击时添加新项目时消失

> ID：15861490
> 
> 赞同：0
> 
> 时间：2013-04-07T10:45:08.127
> 
> 标签：android, listview, button, android-arrayadapter

当我将新项目添加到列表视图时，我以前的项目消失了。它只显示最新的项目。

我有两个编辑视图，名称和电子邮件。还有一个按钮创建播放器。单击按钮时，名称和电子邮件应在列表视图中添加为一项（2 行）。

请帮忙。

问候

创建团队活动.java

```
package com.recscores.android;

import java.util.ArrayList;

import android.app.Activity;
import android.app.ListActivity;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.LinearLayout;
import android.widget.ListView;
import android.widget.TableLayout;
import android.widget.Toast;

public class CreateTeamActivity extends Activity implements OnClickListener  {

    Button addPlayer;
    Button createPlayer;
    LinearLayout view_createPlayer;
    TableLayout numberPad;
    EditText Email;
    EditText Name;
    EditText teamname;
    ListView Roster;

       private CustomAdapter adapter;

    private ArrayList<PlayerInfo> fetch = new ArrayList<PlayerInfo>();

         private  PlayerInfo info = new PlayerInfo();
    private ListView lv;

    protected void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.create_team);

    addPlayer = (Button)findViewById(R.id.addplayer);
    createPlayer = (Button)findViewById(R.id.createplayer);

    Email = (EditText)findViewById(R.id.email);
    Name = (EditText)findViewById(R.id.name);

    lv = (ListView)findViewById(android.R.id.list);
    adapter = new CustomAdapter(CreateTeamActivity.this,
            android.R.id.list,
            fetch);
    lv.setAdapter(adapter);

    createPlayer.setOnClickListener(this);

    }
    public void onClick(View v) {

          switch(v.getId()){

          case R.id.createplayer: /** Create Player */

              info.SetName(Name.getText().toString());
              info.SetEmail(Email.getText().toString());

            fetch.add(info);

            counter++;
         // lv.invalidateViews();
          adapter.notifyDataSetChanged();
            //Thread.sleep(2000);

               break;
          }

}

} 
```

CustomAdapter.java

```
package com.recscores.android;

import java.util.ArrayList;

import android.app.Activity;
import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.TextView;

public class CustomAdapter extends ArrayAdapter<PlayerInfo>{
    private ArrayList<PlayerInfo> entries;
    private Activity activity;

    public CustomAdapter(Activity a, int textViewResourceId, ArrayList<PlayerInfo> entries) {
        super(a, textViewResourceId, entries);
        this.entries = entries;
        this.activity = a;
    }

    public static class ViewHolder{
        public TextView item1;
        public TextView item2;
    }

    public int getCount()
    {

        return entries.size();

    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View v = convertView;
        ViewHolder holder;
        if (v == null) {
            LayoutInflater vi =
                (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            v = vi.inflate(R.layout.add_player_listview, null);
            holder = new ViewHolder();
            holder.item1 = (TextView) v.findViewById(R.id.name);
            holder.item2 = (TextView) v.findViewById(R.id.email);
            v.setTag(holder);
        }
        else
            holder=(ViewHolder)v.getTag();

        final PlayerInfo custom = entries.get(position);
        if (custom != null) {
            holder.item1.setText(custom.GetName());
            holder.item2.setText(custom.GetEmail());
        }
        return v;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T10:50:48.423

尝试添加

`PlayerInfo info = new PlayerInfo();`

前

`info.SetName(Name.getText().toString());`

# php - 如何在 PHP 中实现 JSON 结构

> ID：15861491
> 
> 赞同：0
> 
> 时间：2013-04-07T10:45:11.833
> 
> 标签：php, json, pdo

对于自动完成插件，我需要生成这样的 JSON 结构：

> {"tags":[{"tag":"比萨"},{"tag":"罗马"},{"tag":"米兰"},{"tag":"佛罗伦萨"},{"tag" :"纽约"},{"tag":"巴黎"},{"tag":"柏林"},{"tag":"伦敦"},{"tag":"马德里"}]}

我尝试使用以下 PHP 代码：

```
$tags = array();
while (($row = $statement -> fetch(PDO::FETCH_ASSOC)) !== false) {
    $tags[] = array('tag' => $row['text']);
}
echo json_encode($tags); 
```

但这只会产生

> [{"tag":"比萨"},{"tag":"罗马"},{"tag":"米兰"},{"tag":"佛罗伦萨"},{"tag":"纽约" },{"tag":"巴黎"},{"tag":"柏林"},{"tag":"伦敦"},{"tag":"马德里"}]

所以缺少包装“标签” - 我该如何正确实现？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T10:46:29.580

```
$tags = array();
while (($row = $statement -> fetch(PDO::FETCH_ASSOC)) !== false) {
    $tags[] = array('tag' => $row['text']);
}
echo json_encode(array('tags'=> $tags)); 
```

您必须将您的标签数组设置在具有关键“标签”的其他数组中..

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T10:52:36.647

```
return json_encode(array('tags' => $statement->fetchAll())); 
```

（当然，您需要`select text as tag`在查询中。并设置`PDO::FETCH_ASSOC`为默认提取选项，以使您的代码有意义且干燥）

# ios - iOS 将数据库更新关闭主线程 - 插入启动视图

> ID：15861494
> 
> 赞同：1
> 
> 时间：2013-04-07T10:45:35.270
> 
> 标签：ios, objective-c, xcode, multithreading

我是objective-c的新手，所以请耐心等待这个冗长的解释，我希望它对其他初学者有所帮助。我已经成功地对现有的 iPad 应用程序进行了一些更改。但是，最初的安装/更新例程遇到了*未能及时启动的*障碍。这里的帖子极大地帮助了我理解问题以及研究的方向。

我已经从这里和其他地方的不同帖子中编译了一个解决方案，因为我没有*为初学者找到一个全局的逐行*解决方案。

我知道我需要从 didFinishLaunchingWithOptions 中提取数据库初始化/更新，并尽快从这里返回一个实例化的 UIViewController，该 UIViewController 将在主线程之外执行数据库内容（感谢有关该主题的所有海报）。

请注意，如果数据未准备好且完整，则通常在此处调用的 rootVC 无法初始化。因此，仅在 DB 例程上进行异步对我没有帮助，因为 rootVC 会先到达那里，然后在找不到所需的数据时就崩溃了。

即我需要延迟rootVC，而我们需要做**任何**我们需要做的事情，并且很平静。我选择无缝加载 UILaunchImage 并添加一个微调器。

问题是：

1) 我是否做得正确，这样我就不会再被咬和 8badf00d 了，尤其是在没有增加其他副作用的情况下？或者我应该以其他方式完成它，也许在现有 rootVC 的包装器 init 方法中？

2）dealloc、rootViewController或splashViewController呢？我认为在这个阶段它是相当 rootViewController 。使困惑。

3）它可以工作，但这真的用rootViewController替换（和删除）splashViewController作为rootVC吗？还是我把它们堆起来...

**前**

RAppDelegate.h

```
#import <UIKit/UIKit.h>
#import "RDataManager.h"
#import "RRootViewController.h"
#import "RScreenViewController.h"

@interface RAppDelegate : NSObject <UIApplicationDelegate>
{
    UIWindow *window;
    RRootViewController *rootViewController;
}

@property (nonatomic, retain) IBOutlet UIWindow *window;
@property (nonatomic, readonly) RRootViewController *rootViewController;

@end 
```

RAppDelegate.m

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{    
    [[RDataManager sharedManager] updateDatabase];  // This is what takes time...
    rootViewController = [[RRootViewController alloc] initAtScreen:kScreenTypeIndex withCar:carId];
    rootViewController.wantsFullScreenLayout = YES;
    self.window.rootViewController = rootViewController;    
    [self.window makeKeyAndVisible];

    return YES;
}
...
- (void)dealloc
{
   [rootViewController.view removeFromSuperview];
   [rootViewController release];
   [window release];
   [super dealloc];
} 
```

**后**

RAppDelegate.h

```
#import <UIKit/UIKit.h>
#import "RDataManager.h"
#import "RScreenViewController.h"
#import "RSplashViewController.h"

@interface RAppDelegate : NSObject <UIApplicationDelegate>
{
    UIWindow *window;
    RSplashViewController *splashViewController;
}

@property (nonatomic, retain) IBOutlet UIWindow *window;
@property (nonatomic, readonly) RSplashViewController *splashViewController;

@end 
```

RAppDelegate.m

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{    
    splashViewController = [[RSplashViewController alloc] init];
    splashViewController.wantsFullScreenLayout = YES;
    self.window.rootViewController = splashViewController;  
    [self.window makeKeyAndVisible];

    return YES;
}
...
- (void)dealloc
{
   [splashViewController.view removeFromSuperview];
   [splashViewController release];
   [window release];
   [super dealloc];
} 
```

RSplashViewController.h

```
#import <UIKit/UIKit.h>
#import "RRootViewController.h"

@interface RSplashViewController : UIViewController
{
    UIImageView *splashImageView;
    RRootViewController *rootViewController;
    UIActivityIndicatorView *spinner;
}

@property (nonatomic, retain) UIImageView *splashImageView;
@property (nonatomic, readonly) RRootViewController *rootViewController;

@end 
```

RSplashViewController.m

```
#import "RSplashViewController.h"
#import "RDataManager.h"

@interface RSplashViewController ()

@end

@implementation RSplashViewController

@synthesize splashImageView;
@synthesize rootViewController;

- (void) loadView
{
    CGRect appFrame = [UIInterface frame];
    UIView *view = [[UIView alloc] initWithFrame:appFrame];
    self.view = view;
    [view release];

    NSString *splashFile = [[NSBundle mainBundle] pathForResource:@"LaunchImage-jaguar-Landscape~ipad" ofType:@"png"];
    UIImage *splashImage = [[UIImage alloc] initWithContentsOfFile:splashFile];
    splashImageView = [[UIImageView alloc] initWithImage:splashImage];
    [self.view addSubview:splashImageView];
    [splashImage release];

    spinner = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhiteLarge];
    CGRect frame = spinner.frame;
    frame.origin.x = CGRectGetMidX(self.view.frame) - CGRectGetWidth(spinner.frame) / 2;
    frame.origin.y = 650;
    spinner.frame = frame;
    spinner.hidesWhenStopped = YES;
    [self.view addSubview:spinner];
    [spinner startAnimating];
}

- (void) viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.

    // how we stop DB refresh from freezing the main UI thread
    dispatch_queue_t updateQueue = dispatch_queue_create("updateDB", NULL);
    dispatch_async(updateQueue, ^{

        // do our long running process here
        [[RDataManager sharedManager] updateDatabase];

        // do any UI stuff on the main UI thread
        dispatch_async(dispatch_get_main_queue(), ^{
            [spinner stopAnimating];
            [splashImageView removeFromSuperview];
            rootViewController = [[RRootViewController alloc] initAtScreen:kScreenTypeGarage withCar:nil needSplashScreen:YES];
            [self.view addSubview:rootViewController.view];
        });

    });
    dispatch_release(updateQueue);
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (void) dealloc
{
    [super dealloc];
}

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T10:20:37.327

回答我的问题。

1) 是的，使用 SplashViewController 或 rootVC init 包装器都是安全的。将它作为临时运行 2 分钟没有问题。仔细检查更新确实在单独的线程中运行（Xcode 调试窗口窗格）。

2) 没有问题，因为我移至 rootVC 初始化包装器解决方案并恢复为解除分配 rootViewController。

3) 问题由 2) 解决。

我还设法将更新时间减少了 90%，这无论如何都是理想的解决方案，但很高兴知道我也安全地避开了看门狗定时器。

# ember.js - 使用 EmberData 延迟加载从依赖控制器中填充 Ember.Select

> ID：15861497
> 
> 赞同：0
> 
> 时间：2013-04-07T10:45:42.370
> 
> 标签：ember.js, ember-data

我花了大约 10 天的时间来解决一个使用 Dojo 可以在大约 10 分钟内解决的简单问题。我希望我错过了一些简单的东西——我是一个想使用 Ember 的菜鸟。

我只是尝试使用 EmberData 使用来自另一个控制器的数据填充 Ember.Select 的内容。考虑这种情况：能够为原料选择一个食品组。

在 RawIngredientController 和 FoodGroupsController 之间使用“需要”依赖项并绑定内容似乎很清楚。

这是我最接近成功的一次，但对我来说还不够——我会解释的。

```
<script type="text/x-handlebars" data-template-name="rawIngredients">

     {{#each item in controller itemController="rawIngredient" }}

            {{! view Ember.Select
                    contentBinding="controllers.foodGroups.content"
                    optionValuePath="content.id"
                    optionLabelPath="content.name"
                    prompt="select Food Group" }}

     {{/each}}
</script>

Cook.RawIngredientController = Ember.ObjectController.extend({
    isEditing: false,
    needs: ['foodGroups'],
    ...
});

Cook.RawIngredient = DS.Model.extend({
    name: DS.attr('string'),
    nameKey: DS.attr('string'),
    foodGroup: DS.belongsTo('Cook.FoodGroup')
});

Cook.FoodGroupsRoute = Ember.Route.extend({
  setupController: function(controller) {
     controller.set('content', Cook.FoodGroup.all());  // have also tried find()
  }
});

Cook.FoodGroup = DS.Model.extend({
    name: DS.attr('string'),
    nameKey: DS.attr('string')
}); 
```

这实际上呈现所有 RawIngredients 没有错误，但 Selects 是空的，因为 FoodGroups 存储是空的。我可以导航到加载商店的 FoodGroups 屏幕，然后返回 RawIngredients，然后选择会填充 FoodGroups。

我已经看过很多关于这个问题的帖子，但是当涉及到 EmberData 时，没有一个能充分解决这个问题。有很多后加载示例，例如 pangratz [http://jsfiddle.net/pangratz/hcxrJ/](http://jsfiddle.net/pangratz/hcxrJ/)中的这个聪明示例 - 但我还没有发现任何使用 EmberData 来延迟加载内容的示例。

这篇文章非常接近 [Ember.js：Ember.Select valueBinding 和延迟加载](https://stackoverflow.com/questions/14093558/ember-js-ember-select-valuebinding-and-lazy-loading)

并包含使用观察者的解决方法，我无法开始工作。我最终绑定到一个从未调用 FoodGroup 数据的实际加载的绑定。这是一个这样的尝试（可能是 20 多次）的示例，可能不是最好的示例：

```
Cook.FoodGroupsController = Ember.ArrayController.extend({
    ...
       // NOTE: This seems redundant
    values: function() {
        return this.get('content');
    }.property(),
    ...
});

Cook.RawIngredientController = Ember.ObjectController.extend({
    ...
    // this should be the instance; also tried the object name FoodGroupsController....also tried using needs + 'controllers.foodGroups.values' in the binding
    allFoodGroups: Ember.Binding.oneWay('Cook.foodGroupsController.values'),  '

    /*
    //  ... or rather ....??

    allFoodGroups: function() {
        this.get('foodGroupsBinding');
    },
    foodGroupsBinding: "Cook.foodGroupsController.values",
    */

    ...
});

        {{view Ember.Select
                contentBinding="allFoodGroups"
                optionValuePath="content.id"
                optionLabelPath="content.name"
                prompt="select Food Group" }} 
```

但它错误地说“allFoodGroups”提供的是绑定而不是 Ember.Array。我想我迷失在纷繁复杂的命名约定的海洋中。我可以展示我的其他尝试，但都有未定义内容的错误。

啊。所以备份一下......至少使用我的原始解决方案并预加载 FoodGroups 商店应该提供一种解决方法，但是我似乎无法让 EmberData 以编程方式出去并加载数据。我在 RawIngredientController 中尝试了一个 init() 函数，例如

```
init: function() {
    var item = this.get('controllers.foodGroups.content.firstObject');
}, 
```

但我也没有找到合适的组合。即使我这样做了，这似乎也是错误的方法，因为这将为每个 RawIngredient 设置一个参考，而不是使用 RawIngredients（或 FoodGroups？）的单个参考 - 但这似乎是一个不同的话题。

这是我尝试用小提琴描述问题[http://jsfiddle.net/jockor/Xphhg/13/](http://jsfiddle.net/jockor/Xphhg/13/)

有没有人想出一种有效的方法来加载和使用在其他控制器中定义的存储，使用 EmberData 来延迟加载相关的内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T13:00:18.647

您的基本问题似乎是您没有访问 foodGroups 路由，因此它的 setupController() 永远不会被执行，因此选择控制器的内容永远不会被设置。

在您的示例中，当添加指向相关路由的链接并单击它时，路由将被初始化并且绑定工作。

我试图更新你的 JSFiddle，但它链接到来自 Github 的“最新”版本的 ember-data，该版本有一段时间没有更新（你应该自己构建它，直到他们发布正式版本），它是还使用旧版本的 Ember，所以我遇到了一些奇怪的错误。

所以这里有一个带有最新 Ember 和 Ember-data 的版本：http: [//jsfiddle.net/tPsp5/](http://jsfiddle.net/tPsp5/)

请注意单击“国家/地区”链接时会发生什么。我留下了一些`debugger;`可以帮助你理解什么时候被调用的语句。

* * *

作为设计说明，您的“父”控制器可能不应该依赖于“子”控制器。

# php - 使用正则表达式获取数据 - PHP

> ID：15861499
> 
> 赞同：0
> 
> 时间：2013-04-07T10:45:44.870
> 
> 标签：php, regex, preg-match, preg-match-all

我将 html 文本存储在数据库的一列中。列名是 mailbody，表名是 inbox_master。

列的某些单元格`mailbody`具有如下所示的 div

```
<div id="uid-g-uid" style="">2802</div> 
```

或者

```
<div id="uid-g-uid">
<p class="MsoNormal">6894</p>
</div> 
```

或者

```
<div id="uid-g-uid" style="display:none;">
6894</div> 
```

这里常见的是一个 id 为“uid-g-uid”的 div。我希望能够阅读这个 div 的 html。我知道这可以使用正则表达式来完成，但是不知道该怎么做。

以下是我尝试过但一直不起作用的正则表达式

```
/(?<=\<div\ id\=\"uid\-g\-uid\").*?(?=\<\/div\>)/gim 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T11:08:32.653

感谢@sikfire 和@dave，我得到了使用 DOM 的解决方案。以下是我的工作，对我有帮助

```
$doc = new DOMDocument();
@$doc->loadHTML('The HTML Content Goes here');
$d = $doc->getElementById('uid-g-uid');
echo 'Value is ' . $d['textContent']; 
```

没想到会这么简单！多谢你们！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-24T10:17:13.537

你也可以在这里查看项目。[PHP DomParser](http://simplehtmldom.sourceforge.net/)

这可能会有所帮助！

# qt4 - 如何从 QTreeWidget 中删除选中的项目？

> ID：15861501
> 
> 赞同：0
> 
> 时间：2013-04-07T10:45:51.200
> 
> 标签：qt4, qtreewidget, qtreewidgetitem

我有带有复选框的 QTreeWidget 项目列表，这些项目是具有很少顶级项目的子项目。我想删除处于选中状态的项目，如何迭代 qtreewidget 并删除这些项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T04:20:50.003

简单的。没有编译，但希望你能明白。

```
for(int topnum = 0; topnum < treeWidget->topLevelItemCount(); ++topnum)
{
    if(Qt::Checked == treeWidget->topLevelItem(topnum)->checkState(0))  //assume one column
    {
        delete treeWidget->takeTopLevelItem(topnum);
        --topnum;                       //decrement because you just removed it
    } else
    {
        QTreeWidgetItem* topitem = treeWidget->topLevelItem(topnum);
        for(int childnum = 0; childnum < topitem->childCount(); ++childnum)
        {
            if(Qt::Checked == topitem->child(childnum)->checkState())
            {
                delete topitem->takeChild(childnum);
                --childnum;
            }
        }
    }
} 
```

不确定我是否了解是否检查了顶级项目或是否检查了子项，所以我检查了（哈哈）两者。

# android - Android 编程如何使用 if 和 else 语句来检查应用程序是否存在

> ID：15861503
> 
> 赞同：1
> 
> 时间：2013-04-07T10:45:59.670
> 
> 标签：android

亲爱的溢出成员我刚刚获得了使用意图从不同应用程序启动类的帮助，我现在想知道我是否会使用“If”和“Else”来检查包是否存在以及它是否继续启动它但是如果它没有显示通知用户不存在的祝酒词，并且我尝试启动意图的方式是单击按钮。谢谢帮助

这是我要添加 if 和 else 的代码块。

```
Button button91 = (Button) findViewById(R.id.dlc);
        button91.setOnClickListener(new OnClickListener() {         
            public void onClick(View v) {

                Intent i=new Intent("com.dlc.MainActivity.class"); startActivity(i);
            }
        }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T10:50:09.800

不，如果失败，if/else 将不会作为`startActivity()`throws 异常工作，因此您需要使用`try/catch`：

```
Intent i=new Intent("com.dlc.MainActivity.class"); 

try {
  startActivity(i);
} catch ( Exception e ) {
    // start activiy failed - show toast etc...
} 
```

您应该使用`PackageManager`'s`getPackageInfo()`来确定是否存在某个包。

文档： http: [//developer.android.com/reference/android/content/pm/PackageManager.html](http://developer.android.com/reference/android/content/pm/PackageManager.html)和[http://developer.android.com/reference/android/content/pm/PackageManager.html#getPackageInfo%28java。 lang.String,%20int%29](http://developer.android.com/reference/android/content/pm/PackageManager.html#getPackageInfo%28java.lang.String,%20int%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T11:43:56.383

您也许可以玩弄这个并让它在您的应用程序中工作。这是我的示例，因为谷歌没有将他们最近的日历应用程序提供给早期版本，我不得不在我的应用程序中使用它。它检查用户是否拥有应用程序，如果没有，则在应用程序描述页面上启动 Google Play 商店，以便他们可以下载它以使用应用程序中的功能。希望这可以帮助！

```
boolean installed = appInstalledOrNot("com.google.android.calendar");  
    if(installed)
    {               
        Intent launchCalendar = new Intent();
        String deviceVersion = Build.VERSION.RELEASE;
        String[] versions = deviceVersion.split("\\.");
        ComponentName googleCalendar = new ComponentName("com.google.android.calendar", "com.android.calendar.LaunchActivity");

        if (Integer.valueOf(versions[0]) > 2) {
            if (Integer.valueOf(versions[1]) > 2) {
                //Froyo or greater (mind you I just tested this on CM7 and the less than froyo one worked so it depends on the phone...)
                googleCalendar = new ComponentName("com.google.android.calendar", "com.android.calendar.LaunchActivity");               
            }

        } else {
            //less than Froyo
            googleCalendar = new ComponentName("com.android.calendar", "com.android.calendar.LaunchActivity");
        }

        launchCalendar.setComponent(googleCalendar);
        startActivity(launchCalendar);

    } else {
            Intent googleCalendarInstall = new Intent(Intent.ACTION_VIEW, Uri.parse("market://details?id=com.google.android.calendar"));
            startActivity(googleCalendarInstall);
        Toast.makeText(DatesActivity.this, "Please install the Google Calendar app in order to use the calendar functionality.", Toast.LENGTH_LONG).show();
    }
    finish();
}

private boolean appInstalledOrNot(String uri) {
    PackageManager pm = getPackageManager();
    boolean app_installed = false;
    try {
           pm.getPackageInfo(uri, PackageManager.GET_ACTIVITIES);
           app_installed = true;
    } catch (PackageManager.NameNotFoundException e) {
           app_installed = false;
    }
    return app_installed;
} 
```

# php - PHP 参数顺序问题：错误还是勘误？

> ID：15861517
> 
> 赞同：0
> 
> 时间：2013-04-07T10:48:00.473
> 
> 标签：php

我是 PHP 新手，遇到了一些奇怪的行为，这些行为可能是我的 PHP 版本（5.4.13）中的错误，也可能不是。我发现了一个例子，函数参数的顺序在函数声明中很重要。在以下示例中：

```
class Book {
  function __construct() { }

  public static function withDescriptors($isNotOrmObject, $isArray, $isScalar) {
    $instance = new self();
    // initialization here
    return $instance;
  }
} 
```

调用 withDescriptors 会导致**“数组到字符串转换”**异常。调用 withDescriptors 时抛出错误，即。withDescriptors 从未真正执行过。但是，用数组参数切换对象参数解决了这个问题。IE

```
public static function withDescriptors($isArray, $isNotOrmObject, $isScalar){ .... 
```

这是 PHP 的一个已知特性还是一个错误？

**更明确地说：**

```
class Book {
  function __construct() { }

  public static function withDescriptors($isNotOrmObject, $isArray, $isScalar) {
    $instance = new self();
    // initialization here
    return $instance;
  }
}

$book = Book::withDescriptors($isNotORMobject, $isArray, $isScalar); 
```

**失败**和

```
class Book {
  function __construct() { }

  public static function withDescriptors($isArray, $isNotORMobject, $isScalar) {
    $instance = new self();
    // initialization here 
    return $instance;
  }
}

$book = Book::withDescriptors($isArray, $isNotORMobject, $isScalar); 
```

**很好用**。**唯一**的区别是**参数序列**，“这里的初始化”代码是相同的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T11:47:19.897

您在第二个示例中没有收到*警告*`Object`的原因是您作为第二个参数传递的参数正在实现一个魔术`__toString()`方法。PHP 不是一种*强类型*语言，但最新版本的*类型提示*功能*有限*。

 *说明警告；

```
function saySomething($shouldBeAString)
{
    echo $shouldBeAString
}

saySomething(array('hello')); 
```

输出“数组”

和警告`array to string conversion`

```
class Foo {
   public function __toString() {
       return 'Hi I am Foo';
   }
}

$bar = new Foo();

 saySomething($bar); 
```

将输出

```
'Hi I am Foo' 
```

*没有警告*

如前所述，PHP 提供*有限的*类型提示。您可以指定所需的“类/对象类型”和“数组”作为接受的参数，但*不能*指定标量类型，如“字符串”、“整数”、“布尔”等。

```
function (array $myarray) {
    // will only accept arrays
    // or something that implements array-access
}

function (Foo $var) {
    // Will only accept 'Foo' objects
} 
```

### 多态/函数重载

其他一些语言允许多次定义相同的方法/函数，但具有不同的签名（其他参数类型）。PHP 没有明确支持这一点。

例如，在其他语言中，这是允许的：

```
function doSomething(string $arg1) { ......}

function doSomething(array $arg1) { .... }

function doSomething(string $arg1, string $arg2) { ... } 
```

在这些语言中，根据参数的类型和数量，将执行变体 1、2 或 3。PHP 不支持这一点，因为它要求函数/方法具有*唯一的*名称。因此 PHP 会抱怨函数`doSomething()`已经定义。

但是，您可以通过多种方式在 PHP 中创建类似的东西；

```
 // rename the functions/methods so that they have a unique name

function _doSomething1(string $arg1) { ......}

function _doSomething2(array $arg1) { .... }

function _doSomething3(string $arg1, string $arg2) { ... }

// create the 'wrapper' function *without arguments specified*
function doSomething() {

    // determin which variant should be executed
    $numargs = func_num_args();
    $args = func_get_args();

    if ($numargs == 2) {
        // 2 arguments -> variant 3
        return call_user_func_array('_doSomething3', $args);
    } else if {$numargs == 1) {
        if (is_array($args[0]) {
            // first argument is an array
            return call_user_func_array('_doSomething2', $args);
        } else {
            return call_user_func_array('_doSomething1', $args);
        }
    }
} 
```

**注意：**上面的代码是***'假'代码***，只是为了说明这个想法！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T10:53:30.703

一般来说，顺序在函数参数中很重要。唯一不是这样的情况是，当参数类型相同或者你的函数实现了 get opt long 之类的东西时。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-05-25T15:33:46.637

这里有一些很好的答案，但这种特殊情况是由 PHP 解释器中的错误引起的。*

# meteor - 流星 - 网页的实时代码更新？

> ID：15861521
> 
> 赞同：0
> 
> 时间：2013-04-07T10:48:24.647
> 
> 标签：meteor

我很想知道 Meteor 是否适合跟随，以及我将如何编写代码。

我想创建一个网页，通过特定“div”中的代码可以即时将其热交换给当前正在查看该页面的用户。（例如，div 包含一些文本，但随后用图像替换它。）理想情况下，交换将由网页管理员通过单击按钮手动执行，或者在服务器上触发一些代码或其他东西。网页的普通浏览者无法做到这一点——他们只能看到页面上的实时变化。

现实生活中的例子：

互联网直播已停播，因此“div”包含“off-air”文本。直播时会发生代码的实时热交换，网页的查看者现在会在“div”中看到 html5 广播播放器。稍后，一旦广播停播，它就会被交换回来。

我对 Meteor 平台完全陌生，所以我认为自己是新手 :) 任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T12:12:18.417

您可能会更好地使用使用来自集合的数据的反应式 div（我将使用原始 HTML 的示例，但您最好使用要显示的内容来实现自己的功能：即

基本上利用热代码交换的[反应性](http://docs.meteor.com/#reactivity)

**客户端html代码**

```
<template name="home">
    <div>
        {{{content}}}
    </div>
</template> 
```

**js代码**

```
if(Meteor.isClient) {
    MyCollection = new Meteor.Collection("MyCollection")

    Template.home.content = function() {
        if(MyCollection.findOne()) {        
            return MyCollection.findOne().content
        } 
    }
}

if(Meteor.isServer) {
    MyCollection = new Meteor.Collection("MyCollection")

    //Set an initial content if there is nothing in the database
    Meteor.startup(function() {
         if(!MyCollection.findOne()) {
             MyCollection.insert({content:"<h1>Test content</h1><p>Test Data</p>"
         }
    }

    //A method to update the content when you want to
    Meteor.methods({
        'updatecontent':function(newcontent) {
            id = MyCollection.findOne()._id
            MyCollection.update(id, {$set:{content:newcontent}});
            return "Done"
        }
} 
```

您可以在 mongo 集合中或使用类似（在您的 Web 控制台、客户端或服务器端 javascript 中）更新您的内容：

```
Meteor.call("updatecontent","New content",function(err,result) {
    if(!err) {
         console.log(result)
    }
}); 
```

当您使用它时，它将实时更新代码。

对不起，它很长，但大部分是设置/更新 html。它实际上比刷新用户页面的热代码交换要好得多

# c++ - C++ 中的类成员名称别名

> ID：15861522
> 
> 赞同：0
> 
> 时间：2013-04-07T10:48:24.517
> 
> 标签：c++, alias

我想知道我们是否可以让一个类成员用 2 个名称命名，例如我的类有变量`_width`，`_height`并且我希望我的代码`_width`通过 using`_width`或`_rows`. 我虽然可以使用宏，但是在 C++ 中是否有另一种方法可以做到这一点。这样做也是一个好习惯吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T10:55:26.483

匿名工会？

```
class two_names
{
  union
  {
    int width;
    int columns;
  };
}; 
```

在 C++11 中，您甚至可以在其中放置非 POD。只要确保你知道你在做什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T10:53:29.983

尝试这个：

```
class StrangeOne {
  int _width, _height;
  int &_rows;
public:
  StrangeOne(int width,int height):
    _width(width),
    _height(height),
    _rows(_width)
  {
  };
}; 
```

# c++ - 从文件中逐个字符地读取字符并将结果连接到一个字符数组中

> ID：15861525
> 
> 赞同：0
> 
> 时间：2013-04-07T10:48:39.557
> 
> 标签：c++

我有一个文本文件并逐个字符地读取它。但我想连接这些字符并有一个字符数组。

据我所知，我应该使用 strcat。但是我无法将从文件中读取的字符转换为 const char*，以便我可以使用 strcat：

**char * strcat ( char * 目标, const char * 源);**

在调试器中，我可以看到 chr 有“Bad Ptr”。你会好心帮助我吗？

```
ifstream infile;
infile.open( "Gmv.txt", ifstream::in);

char result[1000]; 

while (infile.good())
{       
    character = infile.get();
    const char * chr = reinterpret_cast<const char *>(character);
    strcat(result, chr);
}   
infile.close(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T10:51:28.053

假设您的文件是 999 个字符或更少，这应该可以工作（没有添加错误检查）。没有必要使用 strcat。事实上，在这里使用 strcat 是愚蠢的。

```
ifstream infile;
infile.open( "Gmv.txt", ifstream::in);

char result[1000]; 
int i = 0;
while (infile.good())
{       
    result[i] = infile.get();
    ++i;
}

result[i] = 0; // Add the '\0' at the end of the char array read.

infile.close(); 
```

strcat 以 0 ('\0') 结尾的 char 数组作为第二个参数。你的 char 没有被 0 终止。因此你得到了错误的指针错误。

顺便说一句，你可以缩短这个时间

```
while (infile)
    result[i++] = infile.get(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T10:53:40.180

为什么使用数组作为字符串，当 C++ 有`std::string`：

```
std::string result;
char ch;

while (infile >> ch)
    result += ch; 
```

# python - 如何在 Python 中对列表进行排序？

> ID：15861530
> 
> 赞同：1
> 
> 时间：2013-04-07T10:48:46.433
> 
> 标签：python, sorting, python-2.7

我有一个嵌套列表

```
a=[[x1,y1],[x2,y2],[x1,y2],[x2,y1],[x7,y7],[x1,y3]] 
```

我想将其排序为：

```
a=[[x1,y1],[x1,y2],[x1,y3],[x2,y1],[x2,y2],[x7,y7]] 
```

我尝试使用 lambda 函数，但它无法编译：

```
a=sorted(a,lambda x,y:x==y?x[0]+x[1],x[0]) 
```

我如何使用`sorted`来获得我想要的输出？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T11:13:21.437

我相信`sorted(a)`会提供你想要的，开箱即用：

```
>>> a = [[1,1], [2,2], [1,2], [2,1], [7,7], [1,3]]
>>> sorted(a)
[[1, 1], [1, 2], [1, 3], [2, 1], [2, 2], [7, 7]] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T10:50:53.203

您可以使用实际的 Python 语法，例如[条件表达式](http://docs.python.org/2/reference/expressions.html#conditional-expressions)：

```
sorted(a, key=lambda x: x[0] + x[1] if x == y else x[0]) 
```

这是基于将您的`?`语法解释为 Javascript 条件表达式语法。

这当然假设在`y`某处定义了一个单独的变量：

```
>>> a = [[1,1], [2,2], [1,2], [2,1], [7,7], [1,3]]
>>> y = [1, 1]
>>> sorted(a, key=lambda x: x[0] + x[1] if x == y else x[0])
[[1, 2], [1, 3], [1, 1], [2, 2], [2, 1], [7, 7]] 
```

# ios - 什么会导致 arc4random_uniform 重新生成相同的序列？

> ID：15861534
> 
> 赞同：1
> 
> 时间：2013-04-07T10:49:34.960
> 
> 标签：ios, random, shuffle, arc4random

我正在使用 arc4random_uniform() 改组数组，如下所示：

```
int count = [arr count];
for (int i = 0; i < count; i++) {
   int n = arc4random_uniform(count - i) + i;
   [arr exchangeObjectAtIndex:i withObjectAtIndex:n];
} 
```

该阵列包含 32 张扑克牌，许多用户报告说他们反复看到相同的牌序列。创建数组的过程如下：

1.  将所有卡片按特定顺序添加到数组中；
2.  使用上述循环对数组进行洗牌。

我从文档中了解到 arc4random_uniform 不需要播种。所以我的问题是：

1.  什么会导致 arc4random_uniform 生成的序列重复？
2.  除了保存最后生成的序列之外，我能做些什么来最小化它重复的可能性吗？根据随机数多次洗牌是个好主意吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T23:32:39.383

我将您的代码粘贴到我正在开发的应用程序中。

例程被调用 x 次：

```
for (int i = 0; i < 5; i++) {
    [self trySort];
} 
```

例程加载一个数组，对其进行排序，然后打印它：

```
- (void)trySort {
    NSMutableArray *arr = [NSMutableArray arrayWithObjects:@"A", @"B", @"C", @"D", @"E", @"F", @"G", @"H", @"I", @"J", @"K", @"L", nil];
    //code pasted from question
    int count = [arr count];
    for (int i = 0; i < count; i++) {
        int n = arc4random_uniform(count - i) + i;
        [arr exchangeObjectAtIndex:i withObjectAtIndex:n];
    }
    //
    NSLog(@"%@%@%@%@%@%@%@%@%@%@%@%@", [arr objectAtIndex:0], [arr objectAtIndex:1], [arr objectAtIndex:2], [arr objectAtIndex:3], [arr objectAtIndex:4], [arr objectAtIndex:5], [arr objectAtIndex:6], [arr objectAtIndex:7], [arr objectAtIndex:8], [arr objectAtIndex:9], [arr objectAtIndex:10], [arr objectAtIndex:11]);
} 
```

结果被合理排序：

```
2013-04-07 16:24:50.923 xxx[2122:c07] BIAKHFDEGCLJ
2013-04-07 16:24:50.927 xxx[2122:c07] DGICJHLBAKFE
2013-04-07 16:24:50.928 xxx[2122:c07] HIGEFADJLCKB
2013-04-07 16:24:50.928 xxx[2122:c07] IHFDBJEALCKG
2013-04-07 16:24:50.928 xxx[2122:c07] GBEHIFCKAJDL 
```

是否有可能在您的数组加载和排序之间发生阻止排序的事情？

# javascript - 使用纯 JavaScript 激活下拉菜单

> ID：15861535
> 
> 赞同：1
> 
> 时间：2013-04-07T10:49:52.157
> 
> 标签：javascript, html

现在我有一个带有一些下拉菜单的纯 HTML CSS 导航栏。但是在 ipad 上，悬停显然不起作用。

我想向相关菜单项添加一个单击事件，以便下拉菜单也将通过一个 onclick 事件激活。

我已经查看了其他答案，但我无法很好地阅读 javascript，因此我可以为我的特定站点修改它们。

这是我现在所在位置的链接：http: [//2ftrade.nl/kareem/eindopdracht/](http://2ftrade.nl/kareem/eindopdracht/)

这是相关的html。在我的 css 中，下拉菜单的默认值为 display:none，当鼠标悬停在包含它的 li 上时，它更改为 display:block。

```
 <ul>
            <li><a href=" " title="">Home</a></li>
            <li><a title="">Opleiding</a> 

                <!-- the dropdown -->
                <ul>
                    <li><a href="#" title="">Visie &amp; Beleid</a></li>
                    <li><a href="#" title="">Opbouw Studieprogramma</a></li>
                    <li><a href="#" title="">Competenties</a></li>
                    <li><a href="#" title="">Diploma</a></li>
                    <li><a href="#" title="">Beroepen</a></li>
                </ul>

            </li>
            <li><a href="#" title="">Onderwijsprogramma</a></li>
            <li><a href="#" title="">Organisatie</a></li>
            <li><a title="">Stages en Projecten</a>

                <!-- another dropdown -->
                <ul>
                    <li><a href="#" title="">Stages</a></li>
                    <li><a href="#" title="">Projecten</a></li>
                </ul>

            </li>
            <li><a href="#home">Top</a></li>
        </ul> 
```

这是隐藏下拉部分的 css

```
nav > ul > li > ul {
            display: none;
            position: absolute;
        } 
```

这就是悬停时将显示的内容

```
 nav > ul > li:hover ul {
            display: block;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T11:08:32.277

您可以将事件侦听器附加到您的元素：

```
var dropdown_button = document.getElementById('#your-button-that-activates-dropdown');

dropdown_button.addEventListener('click', function() {
  //here do what you want to do when the button is clicked.
}, false); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T11:16:24.587

你应该使用 javascript 事件，像这样：

```
var btn = document.getElementById('btn') // this button is a key to run what you want
var drp = document.getElementById('drp') // this is your dropdown list
btn.onclick = function()
{
    drp.style.display = 'block'
    // other codes . . .
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T12:16:39.420

您可以在不使用 javascript 的情况下实现此目的。

使用[`:target`](http://www.w3schools.com/cssref/sel_target.asp)选择器

[例子](http://jsfiddle.net/axrwkr/5TrJt)

为 html 中的每个目标添加一个`id`and`href`

```
<ul>
    <li><a href=" " title="">Home</a></li>
    <li id="Opleiding">
    <a title="" href="#Opleiding">Opleiding</a> 

            <!-- the dropdown -->
            <ul>
                <li><a href="#" title="">Visie &amp; Beleid</a></li>
                <li><a href="#" title="">Opbouw Studieprogramma</a></li>
                <li><a href="#" title="">Competenties</a></li>
                <li><a href="#" title="">Diploma</a></li>
                <li><a href="#" title="">Beroepen</a></li>
            </ul>

        </li>
        <li><a href="#" title="">Onderwijsprogramma</a></li>
        <li><a href="#" title="">Organisatie</a></li>
        <li id="StagesenProjecten">
        <a href="#StagesenProjecten" title="">Stages en Projecten</a>

            <!-- another dropdown -->
            <ul>
                <li><a href="#" title="">Stages</a></li>
                <li><a href="#" title="">Projecten</a></li>
            </ul>

        </li>
        <li><a href="#home">Top</a></li>
    </ul> 
```

在css中指定样式`:target`

```
nav > ul > li:target ul {
            display: block;
        }

nav > ul > li:hover ul {
            display: block;
        }
nav > ul > li > ul {
            display: none;
            position: absolute;
        } 
```

# c++ - 并行化后简单程序不起作用

> ID：15861536
> 
> 赞同：0
> 
> 时间：2013-04-07T10:50:01.477
> 
> 标签：c++, openmp

我有一个简单的程序，它生成（使用`Boost`）一些初始速度和位置，并计算传播一定距离所需的时间。根据横向距离`(x, y)`，将最终的轴向 ( `z`) 速度添加到向量中。这是一个简单的程序：

```
#include <iostream>
#include <boost/random.hpp>
#include <boost/random/normal_distribution.hpp>

using namespace std;

int main()
{

    boost::mt19937 engine(static_cast<unsigned int>(time(0)));

    boost::normal_distribution<double> nd(0.0, 1.0);
    boost::variate_generator< boost::mt19937, boost::normal_distribution<double> > normal_std_one(engine, nd);

    double coordX, coordY, coordZ, time;
    double velX, velY, velZ;

    const double factor = 0.01;
    const double distance = 15.0;

    vector<double> cont;

    int i;
    for(i=0; i<1000000000; i++)
    {
        coordX = factor*normal_std_one();
        coordY = factor*normal_std_one();
        coordZ = 0.0;

        velX = normal_std_one();
        velY = normal_std_one();
        velZ = 20.0*normal_std_one()+300;

        time = distance/velZ;

        coordX += velX*time;
        coordY += velY*time;

        if(sqrt(coordX*coordX + coordY*coordY) < 0.02)
        {
            cont.push_back(velZ);
        }
    }
    cout << cont.size() << endl;

    return 0;
} 
```

我认为一个很好的补充是`for`使用`OpenMP`. 我通过在循环启动之前添加以下行来做到这一点：

```
#pragma omp parallel for 
```

此外，我已将`-fopenmp`编译器选项和 `-fopenmp* 添加到链接器设置中。我的程序编译和链接没有错误，但是当我执行文件时，我收到消息：

```
Process terminated with status -1073741819 (0 minutes, 2 seconds) 
```

我不清楚我在这里做错了什么。我正在使用 Windows 和 g++（通过 Code::Blocks IDE）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T15:22:57.787

我将其发布为答案，但不发表评论只是为了积累结果并避免长长的评论列表。如果您正确处理 's 的大小以避免异常，它适用`parallel_for`于 Microsoft 的 PPL 。但问题是当超过 ~20000 时，无法处理多个请求，导致程序崩溃产生错误。`std:vector``out-of-range``i``boost::variate_generator``APPLICATION_FAULT_INVALID_POINTER_READ`

**更新：**当`boost::variate_generator`在双核笔记本上不使用（简单地为向量的索引分配一个值）时，它运行没有错误，但显示的结果与预期相反 - 顺序代码比多线程运行更快`parallel_for`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T10:56:11.860

您不能`cont.push_back`跨多个线程使用非同步。它不是线程安全的。您将需要使用不同的容器，或者在访问时使用某种互斥锁。如果这很重要，您可能还需要做一些事情来保持它们进入容器的顺序。

# sql - 如何使用这种不寻常的匹配条件编写连接？

> ID：15861543
> 
> 赞同：8
> 
> 时间：2013-04-07T10:50:33.623
> 
> 标签：sql, postgresql, join, greatest-n-per-group

我想“左连接”一个表，以便一个值不仅连接到匹配的行，而且连接到任何后续的非匹配行，直到下一个匹配行。换句话说，我想用之前的非空值填充空值。

样本数据和预期结果：

表`x`：

```
 id 
----
  1
  2
  3
  4
  5 
```

表`y`：

```
 id | val 
----+-----
  1 | a
  4 | b 
```

结果`select x.id, y.val from x left join y on x.id=y.id order by x.id;`：

```
 id | val 
----+-----
  1 | a
  2 | 
  3 | 
  4 | b
  5 | 
```

期望的结果：

```
 id | val 
----+-----
  1 | a
  2 | a
  3 | a
  4 | b
  5 | b 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-07T12:53:27.370

## 指数

`x.id`在和上创建索引`y.id`- 如果它们是您的主键，您可能已经拥有这些索引。
多列索引也可能有所帮助，尤其是在 pg 9.2+ 中[仅扫描索引时：](https://wiki.postgresql.org/wiki/Index-only_scans)

```
CREATE INDEX y_mult_idx ON y (id DESC, val) 
```

但是，在我的测试中，最初并没有使用这个索引。必须添加（否则毫无意义）`val`以`ORDER BY`使查询计划者相信排序顺序匹配。见查询**3**。

该指数在这种合成设置中几乎没有什么区别。但是对于具有更多列的表，从表中检索`val`变得越来越昂贵，使得“覆盖”索引更具吸引力。

## 查询

### 1) 简单

```
SELECT DISTINCT ON (x.id)
       x.id, y.val
FROM   x
JOIN   y ON y.id <= x.id
ORDER  BY x.id, y.id DESC; 
```

[SQL小提琴。](http://sqlfiddle.com/#!12/38903/7)

`DISTINCT`在这个相关答案中对该技术的更多解释：

*   [在每个 GROUP BY 组中选择第一行？](https://stackoverflow.com/questions/3800551/select-first-row-in-each-group-by-group/7630564#7630564)

我进行了一些测试，因为我怀疑第一个查询不能很好地扩展。小桌子很快，但大桌子不好。Postgres 没有优化计划，而是从（有限的）交叉连接开始，成本为`O(N²)`.

### 2) 快速

这个查询仍然相当简单并且可以很好地扩展：

```
SELECT x.id, y.val
FROM   x
JOIN  (SELECT *, lead(id, 1, 2147483647) OVER (ORDER BY id) AS next_id FROM y) y
       ON  x.id >= y.id
       AND x.id <  y.next_id
ORDER  BY 1; 
```

窗口函数[`lead()`](http://www.postgresql.org/docs/current/interactive/functions-window.html)是有帮助的。我使用该选项提供一个默认值来覆盖最后一行的极端情况：`2147483647`是[最大可能的整数](http://www.postgresql.org/docs/current/interactive/datatype-numeric.html)。适应您的数据类型。

### 3）非常简单，几乎一样快

```
SELECT x.id
     ,(SELECT val FROM y WHERE id <= x.id ORDER BY id DESC, **val** LIMIT 1) AS val
FROM   x;
```

通常，*相关子查询*往往很慢。但是这个可以只从（覆盖）索引中选择一个值，否则它是如此简单以至于它可以竞争。

附加`ORDER BY`项目`val`（粗体强调）似乎毫无意义。但是添加它可以让查询规划器相信可以使用`y_mult_idx`上面的多列索引，因为排序顺序匹配。注意

> 仅索引扫描使用 y_mult_idx ..

在`EXPLAIN`输出中。

## 测试用例

经过热烈的辩论和多次更新，我收集了迄今为止发布的所有查询，并制作了一个测试用例以进行快速概述。我只使用 1000 行，因此 SQLfiddle 不会因较慢的查询而超时。但是前 4 名（Erwin 2、Clodoaldo、a_horse、Erwin 3）在我所有的本地测试中都是线性扩展的。再次更新以包括我的最新添加，现在按性能改进格式和排序：

[**Big SQL Fiddle**比较性能。](http://sqlfiddle.com/#!12/6d7e1/4)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-07T11:05:17.177

```
select id,
       first_value(t.val) over (partition by group_flag order by t.id) as val
from (
  select x.id, 
         y.val, 
         sum(case
            when y.val is null then 0
            else 1
          end) over (order by x.id) as group_flag
  from x 
    left join y on x.id=y.id
) t    
order by id; 
```

SQLFiddle 示例：[http ://sqlfiddle.com/#!12/38903/1](http://sqlfiddle.com/#!12/38903/1)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-07T11:08:15.780

[SQL小提琴](http://sqlfiddle.com/#!12/38903/4)

```
select
    id, 
    first_value(val) over(partition by g order by id) val
from (
    select
        x.id, val, count(val) over(order by x.id) g
    from
        x
        left join
        y on x.id=y.id
) s
order by id 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-07T11:12:34.210

```
SELECT
  m.id,
  y.val
FROM (
  SELECT
    x.id,
    MAX(y.id) id_y
  FROM
    x INNER JOIN y ON x.id >= y.id
  GROUP BY
    x.id
  ) m INNER JOIN y ON m.id_y = y.id
ORDER BY
  m.id 
```

请[在此处](http://sqlfiddle.com/#!12/1cc91/1)查看小提琴。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-07T14:27:23.197

`closer_to()`我喜欢用 (NOT) EXISTS来表达聚合函数 MIN()、MAX() 。

```
SELECT x.id, y.val
FROM   x
JOIN   y ON y.id <= x.id
WHERE NOT EXISTS (SELECT *
        FROM y y2
        WHERE y2.id <= x.id -- same condition AS main query
        AND y2.id > y.id    -- but closer to x.id
        )
        ; 
```

我的直觉是，这将生成与 Erwin 的答案完全相同的查询计划。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-07T11:03:30.490

使用[COALESCE](http://www.postgresql.org/docs/8.1/static/functions-conditional.html)和 Subquery 作为逻辑。

子查询将检索最后一个 val 值。

试试这个：

```
SELECT x1.id,
       coalesce(y1.val, (SELECT val
                       FROM   y
                       WHERE  id = (SELECT Max(x2.id)
                                    FROM   x AS x2
                                           JOIN y AS y2
                                             ON x2.id = y2.id
                                    WHERE  x2.id < x1.id)))
FROM   x AS x1
       LEFT JOIN y AS y1
              ON x1.id = y1.id
ORDER  BY x1.id; 
```

sqlfiddle：[http ://www.sqlfiddle.com/#!12/42526/1](http://www.sqlfiddle.com/#!12/42526/1)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-07T11:44:06.070

我不确定如何使用单个存储过程来实现这一点。类似于以下的逻辑将为您返回所需的结果

```
create PROCEDURE GetData
AS
BEGIN
    Declare @resultTable TABLE(
    id int,
    value varchar(10))

    Declare @id int
    Declare @previousValue varchar(10)
    Declare @currentValue varchar(10)

    DECLARE x_cursor CURSOR
    FOR SELECT id FROM x order by id  

    OPEN x_cursor
    FETCH NEXT FROM x_cursor into @id;
    WHILE (@@FETCH_STATUS = 0)
    BEGIN
        select @currentValue = isnull(val,@previousValue)  from Y where id = @id
        insert into @resultTable values(@id,@currentValue)
        set @previousValue = @currentValue 
        FETCH NEXT FROM x_cursor into @id;
    END

    Close x_cursor
    Deallocate x_cursor

    select * from @resultTable
END
GO 
```

# hashmap - HashMap 和 ConcurrentHashMap 内部工作

> ID：15861548
> 
> 赞同：0
> 
> 时间：2013-04-07T10:51:16.713
> 
> 标签：hashmap, concurrenthashmap

当我在测验中问到以下问题时，我对自己的理解有些困惑：

1）`ConcurrentHashMap`：据我了解，没有锁可以从此映射中获取值（对应于键）。问题是：如果这是真的，假设 t1 正在写入（通过锁定段/桶）并且 t2 尝试读取相同的内容，t2 将不会获得正确的值，因此与 t2 的值不一致

2）`HashMap`：据我了解，在将元素添加到hashbucket之前，将hashvalue **H**计算为键（key.hashcode（））的hashcode％16（给出从0到15的值），然后添加到bucket中其哈希值为 **H** 注意：有 16 个桶（默认实现），代表`ArrayList`一个`LinkedList`

* * *

|0 |1 |2 |3 |4 |5 |6 |7 |8 |9 |10 | 11 |12 |13 |14 |15 |

* * *

ArrayList at 2000(内存地址)

您可以说这是[ConcurrentHashMap 中的 Segmentation 的](https://stackoverflow.com/questions/15858681/segmentation-in-concurrenthashmap)重复，关于[Java 控制器](https://stackoverflow.com/questions/11981743/hashmap-or-concurrenthashmap-at-java-controllers)[中并发 hashmap](https://stackoverflow.com/questions/15118333/regarding-internal-working-of-concurrent-hashmap)、 HashMap 或 ConcurrentHashMap 的内部工作？等。但我需要了解疑虑。几个链接/博客可以很好地解释对我有用。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-08T06:40:34.707

使用此链接学习[ConcurrentHashMap](http://javaopensourcecode.blogspot.in/2012/06/concurrenthashmap.html)和[HashMap](http://javarevisited.blogspot.in/2011/02/how-hashmap-works-in-java.html)

第一部分。你说的是对的。如果在 ConcurrentHashMap 中找到键，get() 不会对该段进行锁定。如果你有另一个线程正在修改 Map 的结构（例如 put()）并且它还没有完成，那么你肯定会得到陈旧的值。但它不会抛出 ConcurrentModificationException。如果修改操作在检索操作之前完成，则将反映更新的值。

我希望这有帮助。

# winforms - 更改 gridview 列标题的 BackColor

> ID：15861557
> 
> 赞同：0
> 
> 时间：2013-04-07T10:52:19.613
> 
> 标签：winforms, gridview

成功地，在我的gridview的一个列标题上放置了一个图像。但是它的背景色现在全是白色，不像其他灰色的列标题，默认背景色。如何将白色更改/绘制为灰色。

```
private void GridViewSale_CellPainting(object sender, DataGridViewCellPaintingEventArgs e)
  {
      if (e.RowIndex < 0 && e.ColumnIndex == 1)
      {
          Rectangle rec = new Rectangle(4, 5, 14, 14);              
          e.Graphics.DrawImage(Properties.Resources.DelOn, rec);
          e.Handled = true;
          e.CellStyle.BackColor = Color.DeepPink; (//Not working)
      }
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T11:02:14.097

首先设置`EnableHeadersVisualStyles="false"`在你的`DataGridView`. 然后，

```
 DataGridViewColumn gridviewColumnName = yourGridviewName.Columns[0]; // will set the first column
    gridviewColumnName .HeaderCell.Style.BackColor = Color.DeepPink; 
```

# jquery - jQuery 延迟与非 jQuery ajax

> ID：15861567
> 
> 赞同：3
> 
> 时间：2013-04-07T10:54:03.510
> 
> 标签：jquery, ajax, jquery-deferred, promise

我有一个应用程序，我从多个来源提取数据，并且只有当所有数据都被拉入时，我才想继续。我希望数据尽可能快，所以使用并行请求。

为了弄清楚所有请求何时完成，我这样做：

```
function getData(cb) {

    var count, data;

    count = 0;
    data = {};

    function getDataDone() {
        count++;
        //only call callback when all async requests are done
        if (count === 3 && cb) {
            cb(data);
        }
    }

    foo.doAsync({
        success: function (d) {
            data.foo = d;
            getDataDone();
        }
    });

    bar.doAsync({
        success: function (d) {
            data.bar = d;
            getDataDone();
        }
    });

    $.getJSON("/api/", function (d) {
        data.user = d;
        getDataDone();
    });

} //end getData

getData(function (data) {

    //application data loaded, do stuff
    data.foo;
    data.bar;
    data.user;

}); 
```

`foo.doAsync`，`bar.doAsync`并且`$.getJSON`请求发生是并行的，当完成时，它们会调用`getDataDone()`，这会增加一个计数器。如果计数器等于预期的请求数，则运行回调。

在这种情况下如何应用 jQuery.deferred ？编码可以正常工作。使用 deferred 比我所拥有的有什么好处吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T11:22:55.460

```
var d1 = $.Deferred();
foo.doAsync({
    success: function (d) {
        data.foo = d;
        d1.resolve();
    }
});

var d2 = $.Deferred();
bar.doAsync({
    success: function (d) {
        data.bar = d;
        d2.resolve();
    }
});

var json_deferred = $.getJSON("/api/", function (d) {
    data.user = d;
    getDataDone();
});

$.when(d1, d2, json_deferred).then(function() {
    alert('all requests finished');
}); 
```

> 使用 deferred 比我所拥有的有什么好处吗？

是的，延迟允许对应用程序流程进行更多控制，并且通常（这种情况也不例外）提供更清晰的解决方案。

**提示**：如果您只需要回调中的异步请求的结果而不需要其他任何东西 - 您可以将结果传递给`resolve`调用`d1.resolve(d);`，然后将其作为`then()`回调的参数获取，而不是使用共享对象作为临时存储。

如果`getJSON()`您甚至可以省略回调：

```
var json_deferred = $.getJSON('/api/'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T11:36:03.397

使用 jQuery.when：[http](http://api.jquery.com/jQuery.when/) ://api.jquery.com/jQuery.when/你可以等待几个 Promise 完成。

你可以将你的`doAsync()`方法包装在 Promise 中。

[例如](http://jsfiddle.net/cR7pR/1)：

```
function doAsync (opts) {
    var msg = this.msg;
    var data = { json: JSON.stringify({ msg: msg }) };
    $.ajax("/echo/json/", {
        type: "post",
        data: data
    }).then(opts.success);
}

var foo = { msg: "foo", doAsync: doAsync };
var bar = { msg: "bar", doAsync: doAsync };

function createPromise (doAsyncAble) {
    var dfd = $.Deferred();
    doAsyncAble.doAsync({
        success: function (d) {
            dfd.resolve(d);
        }
    });
    return dfd.promise();
}

function getData(cb) {
    var fooPromise = createPromise(foo);
    var barPromise = createPromise(bar);
    var apiPromise = $.ajax("/echo/json/", {
        type: "post",
        data: { json: JSON.stringify({ data: "api" }) }
    });
    $.when(fooPromise, barPromise, apiPromise).done(function (fooResponse, barResponse, apiResponse) {
        var data = {};
        data.foo = fooResponse;
        data.bar = barResponse;
        data.user = apiResponse[0];
        cb(data);
    });

} //end getData

getData(function (data) {
    console.log(data);
}); 
```

产生：

![在此处输入图像描述](https://i.stack.imgur.com/KDxmk.png)

您还可以从 getData 返回一个承诺，而不是传入回调。

# jquery - Jquery Cycle 插件出现全宽问题

> ID：15861572
> 
> 赞同：1
> 
> 时间：2013-04-07T10:54:41.000
> 
> 标签：jquery, html, css, slideshow, web-site-project

嗨，我的 Jquery Cycle 插件有问题。我的目标是让幻灯片显示在浏览器的全宽上，并带有一个容器 div，容器 div 会相应地调整，但它有一个最大高度，然后设置为溢出。

到目前为止，我设法通过在浏览器上调整大小来解决宽度问题，并且我的幻灯片按比例调整，但它包含设置为 auto 的 div 高度不会随着里面的孩子而改变，而是设置为最小高度。如果设置为自动，它就会消失，大概是设置为 0。

生病粘贴代码anythoughts会很棒。我确实尝试使用 Java（但我对它有点新手）来调整窗口 resixe 函数上的 div 高度，但我无法让它工作。

这是允许调整图像的java snipet：

```
$(document).ready(function() {
$('#slideshow-wrap').cycle({
    slideResize: true,
    containerResize: true,
    fit: 1,
    fx: 'fade' // choose your transition type, ex: fade, scrollUp, shuffle, etc...
});
}); 
```

继承人下面的内容的 html 片段

```
 <div class="wrapper" id="slideshow-wrap">

        <img src="images/slide/mountainbear1.jpg"/>
        <img src="images/slide/mountainbear1.jpg"/>

   </div>

   <div class="wrapper" id="content"></div> 
```

这是本节的CSS：

```
 #slideshow-wrap {
    position: relative;
    margin: 0;
    min-width: 960px;
    min-height: 442px;
    max-height: 750px;
    height:auto !important;
    max-width:100%;
    overflow: hidden;
  }

 #slideshow-wrap img{
   margin: auto;
   width: 100% !important;
   min-width: 960px;

   } 
```

我还尝试将 height: auto 添加到 javascript 但是当我这样做时，它会在幻灯片中显示两个图像，但确实会调整高度！

# jsf - 在节目中使用 ajax 加载 p:graphicImage

> ID：15861574
> 
> 赞同：2
> 
> 时间：2013-04-07T10:54:54.463
> 
> 标签：jsf, jsf-2, primefaces

我想为使用`<p:galleryImage/>`. 问题是当画廊包含大量图像时，它会下载所有图像，然后显示它们。这真的很烦人，它必须以不同的方式工作。现在画廊看起来像这样：

```
<p:lightBox>
    <h:commandButton class="button  button-1-3 graphics-portfolio-plakaty" onclick="plakaty.show();" />
    <f:facet name="inline">
        <p:galleria value="#{galleryBean.imageNames}" var="imageName" panelWidth="800" panelHeight="500">  
            <p:graphicImage value="/gallery?img=#{imageName}" cache="false" />
        </p:galleria>
    </f:facet>
</p:lightBox> 
```

我想使用 ajax 加载图像，所以它应该看起来像这样。

```
<p:lightBox>
    <h:commandButton class="button  button-1-3 graphics-portfolio-plakaty" onclick="plakaty.show();" />
    <f:facet name="inline">
        <p:galleria value="#{galleryBean.imageNames}" var="imageName" panelWidth="800" panelHeight="500">  
            <p:graphicImage value="/gallery?img=#{imageName}" cache="false">
                <p:ajax event="ready" />
            </p:graphicImage>
        </p:galleria>
    </f:facet>
</p:lightBox> 
```

我是 JSF 的新手，所以可能有更好的方法来做到这一点，或者如何使用 ajax 加载图像？

# ruby - 检查收藏的推文是否在正文中包含 URL

> ID：15861579
> 
> 赞同：0
> 
> 时间：2013-04-07T10:55:08.233
> 
> 标签：ruby, json, twitter

构建一个小应用程序并希望返回所有用户喜欢的推文。使用 twitter gem 很容易做到这一点。然后，我想通过仅显示在正文中包含 URL 的收藏推文来进一步过滤返回的结果。

现在据我了解，使用运行的 twitter gem`Twitter.favorites`将返回所有收藏推文的 json。现在，在每个单独的推文中，它返回一个包含 URL 哈希的实体属性，如果推文中不存在 URL，则该属性将为空，如果存在则返回 URL。

我将如何实施检查以说明 URL 是否存在然后显示推文。我是 json 和 Apis 的菜鸟。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T13:50:19.717

我从未使用过`twitter`宝石，但由于这个问题在几个小时内仍未得到解答，我会尽力做到最好。

首先，gem 似乎返回[`Array<Twitter::Tweet>`](http://rdoc.info/gems/twitter/Twitter/API/Favorites#favorites-instance_method)而不是原始 json。所以你只需要过滤数组：

```
favs_with_urls = Twitter.favorites.reject { |r| r.urls.empty } 
```

后者应该可以解决问题。

顺便说一句，如果您出于某种原因需要[解析`json`](https://stackoverflow.com/questions/9055096/from-json-to-a-ruby-hash)为哈希：

```
require 'json'
c = JSON.load(raw_json) 
```

# android - Android boot start app on boot from BroadcastReceiver with multiple services

> ID：15861585
> 
> 赞同：1
> 
> 时间：2013-04-07T10:56:00.907
> 
> 标签：android, broadcastreceiver, android-service, android-broadcast, bootcompleted

我需要在启动完成时启动 2 个服务。第一个服务正确启动，但第二个服务似乎没有启动。我不知道我是否必须创建两个 BroadcastReceiver 或者一个就足够了。这是我的代码。我已将这两个服务放在一个 BroadcastReceiver 中。拜托，你能告诉我我做错了什么吗？

先感谢您

AndroidManifest.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.pruebas.appservicelocator"
    android:versionCode="1"
    android:versionName="1.0"
    android:installLocation="internalOnly"  >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="16" />

    <!-- Startup service -->
    <uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED"/>
    <!-- GPS -->
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <!-- UUID -->
    <uses-permission android:name="android.permission.READ_PHONE_STATE"/>
    <!-- Acceso a web service -->
    <uses-permission android:name="android.permission.INTERNET"></uses-permission>

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.pruebas.appservicelocator.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <service android:name=".Servicio">
            <intent-filter>
                <action android:name="com.pruebas.appservicelocator.Servicio"/>
            </intent-filter>
        </service> 

        <service android:name=".ServicioBD">
            <intent-filter>
                <action android:name="com.pruebas.appservicelocator.ServicioBD"/>
            </intent-filter>
        </service> 

        <receiver android:name=".Recibidor" android:enabled="true" android:exported="true">
            <intent-filter>
                <action android:name="android.intent.action.BOOT_COMPLETED"/>
                <category android:name="android.intent.category.DEFAULT"/>
            </intent-filter>
        </receiver>
    </application>

</manifest> 
```

Recibidor.java：

```
package com.pruebas.appservicelocator;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.util.Log;
import android.widget.Toast;

public class Recibidor extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {
        android.os.Debug.waitForDebugger(); 
        Toast.makeText(context, "Iniciando Recibidor", Toast.LENGTH_LONG).show();
        final String TAG = "Recibidor";
        Log.i(TAG, "Iniciando Recibidor");

        if (intent.getAction().equalsIgnoreCase("android.intent.action.BOOT_COMPLETED")) {
            Toast.makeText(context, "Iniciando Intent", Toast.LENGTH_LONG).show();
            Log.i(TAG, "Iniciando Intent");

            Intent servicio = new Intent();
            servicio.setAction("com.pruebas.appservicelocator.Servicio");
            context.startService(servicio);

            Intent servicioBD = new Intent();
            servicio.setAction("com.pruebas.appservicelocator.ServicioBD");
            context.startService(servicioBD);

            Log.i(TAG, "Iniciando Servicios");
            Toast.makeText(context, "Iniciando Servicio", Toast.LENGTH_LONG).show();
         } 
    }

} 
```

“Servicio”服务工作正常，所以我不写代码。如果你需要，请告诉我，我会写的。

ServicioBD.java：

```
package com.pruebas.appservicelocator;

import com.pruebas.utils.UsersLocationsDBHelper;

import android.app.Service;
import android.content.Intent;
import android.os.IBinder;
import android.widget.Toast;

public class ServicioBD extends Service{

    private UsersLocationsDBHelper locDBHelper = null;
    private static String TAG = "ServicioBD";

    @Override
    public IBinder onBind(Intent intent) {
        return null;
    }

    @Override
    public void onCreate() {
        super.onCreate();
        Toast.makeText(this, "SERVICIOBD ON CREATE", Toast.LENGTH_LONG).show();

    }

    @Override
    public void onDestroy() {
        super.onDestroy();
    }

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {
        startForeground(0, null);

        Toast.makeText(this, "SERVICIOBD ON START COMMAND", Toast.LENGTH_LONG).show();

        return START_STICKY;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T11:27:21.483

我发现了错误。

```
 Intent servicio = new Intent();
  servicio.setAction("com.pruebas.appservicelocator.Servicio");
  context.startService(servicio);

  Intent servicioBD = new Intent();
  servicio.setAction("com.pruebas.appservicelocator.ServicioBD");
  context.startService(servicioBD); 
```

必须

```
 Intent servicio = new Intent();
  servicio.setAction("com.pruebas.appservicelocator.Servicio");
  context.startService(servicio);

  Intent servicioBD = new Intent();
  servicioBD.setAction("com.pruebas.appservicelocator.ServicioBD");
  context.startService(servicioBD); 
```

# c++ - 如何将 t[i][j] 转换为指针样式引用

> ID：15861590
> 
> 赞同：0
> 
> 时间：2013-04-07T10:57:25.790
> 
> 标签：c++, arrays, pointers

例如 `t[i]`是`*(t+i)`

它将如何 `t[i][j]`？

在我看来 `*(*(t+i)+j)`，但不确定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T11:07:14.780

是的，你所拥有的是正确的。`t[i][j]`可以写成`(t[i])[j]`，因此您可以递归地应用“一维”规则。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T11:11:24.017

您必须知道数据是如何存储在内存中的，因为您想对指针进行操作。对于二维数组，没有显着差异——“行”只是告诉应用程序应该跳过多少个“单元”。

让我们假设一段时间，这`t`是一个整数，所以当你有一个数组时，它看起来像这样：

> |3|4|5|
> 
> |6|5|4|

它看起来，实际上就像

> |3|4|5|6|5|4|

存储在内存中。数组意味着程序必须在数组中的第三个值之后“跳过” `x[3][2]`，然后`t[i][j]`看起来像`*(*(t+i)+j)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T11:25:04.137

你是对的。`t[i][j]`相当于`*(*(t + i) + j)`。

# javascript - ngview添加部分保留现有

> ID：15861593
> 
> 赞同：1
> 
> 时间：2013-04-07T10:57:54.000
> 
> 标签：javascript, angularjs

我有一个`div`which is `ng-view`。

```
<div ng-view>Loading...</div> 
```

我也有一部分。像这样的东西：

```
<div ng-controller="p1">
  <div ng-controller="frm"></div>
  <div ng-controller="lst"></div>
</div> 
```

我也有一些控制器的代码。

有没有办法将另一个类似的结构与单独的控制器和部分注入我的`ng-view`. 所以图片应该看起来像

路线： /

```
<div ng-view>
p1:
+-----+
| frm |
|     |
| lst |
+-----+
</div> 
```

路线：/abc

```
<div ng-view>
p1:     p2:
+-----+ +-----+
| frm | | abc |
|     | |     |
| lst | | def |
+-----+ +-----+
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T18:41:21.570

好的，所以我决定用 . 在您的 p1 控制器中，您只需为某个 url 设置一个标记（例如，/js/app/views/partials/bla.html）。新包含的部分功能所需的所有控制器都已包含在内。所以一切都很好！

# android - 安卓二维码/条码阅读器

> ID：15861595
> 
> 赞同：0
> 
> 时间：2013-04-07T10:58:05.597
> 
> 标签：android, zxing

我正在使用[zxing IntentIntegrator](https://code.google.com/p/zxing/wiki/ScanningViaIntent)从我的 Android 应用程序中扫描条形码或二维码。扫描代码后，我需要识别代码是二维码还是条形码。我正在使用以下代码：

```
public void onActivityResult(int request, int result, Intent i) {
    IntentResult scan = IntentIntegrator.parseActivityResult(request, result, i);
    if (scan != null) {
        format.setText(scan.getFormatName());
        contents.setText(scan.getContents());
    }
} 
```

但是`scan.getFormatName()`被返回为`null`. 请问我做错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T15:16:17.857

我无法使用 Google Play 上最新的 Barcode Scanner 和 ZXingTest 应用程序重现这一点。例如，从扫描 QR 码返回时，`formatName`是“QR_CODE”并相应地打印。

我仍然怀疑您以某种方式触发了正在拦截我们`Intent`的 s 的其他应用程序。您确定正在处理此问题的设备上没有其他任何内容并且可能无法正确返回？

你确定不是那样`scan`，`null`只是从不设置文本？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-13T07:35:31.393

看到这个代码

```
 static final String ACTION_SCAN = "com.google.zxing.client.android.SCAN";

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    Toolbar toolbar = (Toolbar) findViewById(R.id.toolbar);
    setSupportActionBar(toolbar);

    FloatingActionButton fab = (FloatingActionButton) findViewById(R.id.fab);
    fab.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View view) {
            Snackbar.make(view, "Replace with your own action", Snackbar.LENGTH_LONG)
                    .setAction("Action", null).show();
        }
    });

    Button scan=(Button)findViewById(R.id.btn);
    scan.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {

      try {

Intent intent = new Intent(ACTION_SCAN);
intent.putExtra("SCAN_MODE", "PRODUCT_MODE");
startActivityForResult(intent, 0);
    }
catch (ActivityNotFoundException anfe)
 {
    Toast.makeText(MainActivity.this,"No scanner found",Toast.LENGTH_SHORT).show();

    }

        }
    });

}

public void onActivityResult(int requestCode, int resultCode, Intent intent) {
    if (requestCode == 0) {
        if (resultCode == RESULT_OK) {
            String contents = intent.getStringExtra("SCAN_RESULT");
            String format = intent.getStringExtra("SCAN_RESULT_FORMAT");
            Toast toast = Toast.makeText(this, "Content:" + contents + " Format:" + format, Toast.LENGTH_LONG);
            toast.show();
            TextView tv=(TextView)findViewById(R.id.tv);
            tv.setText("Content:" + contents + " Format:" + format);
        }
    }
} 
```

在此您将 intent.putExtra 更改为 QR 码和条形码。

# spring - 如何将 JSON 对象发布到弹簧控制器？

> ID：15861597
> 
> 赞同：1
> 
> 时间：2013-04-07T10:58:12.360
> 
> 标签：spring, post, spring-mvc, apache-httpclient-4.x

我有弹簧控制器：

```
@RequestMapping(value = "/add", method = RequestMethod.POST, 
     consumes = "application/json")
public @ResponseBody ResponseDto<Job> add(User user) {
    ...
} 
```

我可以使用 APACHE HTTP CLIENT 像这样发布对象：

```
HttpPost post = new HttpPost(url);
List nameValuePairs = new ArrayList();
nameValuePairs.add(new BasicNameValuePair("name", "xxx"));
post.setEntity(new UrlEncodedFormEntity(nameValuePairs));
HttpResponse response = client.execute(post); 
```

在控制器中，我得到名为“xxx”的用户

现在我想创建 User 对象并将其发布到服务器，我尝试像这样使用 GSON 对象：

```
User user = new User();
user.setName("yyy");

Gson gson = new Gson();
String json = gson.toJson(user);

HttpClient client = new DefaultHttpClient();
HttpPost httpPost = new HttpPost(url);
StringEntity entity = new StringEntity(json.toString(), HTTP.UTF_8);
entity.setContentType("application/json");
httpPost.setEntity(entity);
HttpResponse response = client.execute(httpPost); 
```

但是通过这种方式，我进入了带有空字段的服务器用户对象......

我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T12:38:53.207

好的，您缺少一些东西：

1.  确保您`User`在客户端和服务器上以相同的方式序列化和反序列化为 json。
2.  如果您想使用 spring 内置的杰克逊支持（并且最好在客户端也使用它）或`HttpMessageConverter`为 Gson 包含适当的支持，请确保在类路径上有杰克逊库。为此，您可以使用spring-android 的[GsonHttpMessageConverter](https://github.com/SpringSource/spring-android/blob/master/spring-android-rest-template/src/main/java/org/springframework/http/converter/json/GsonHttpMessageConverter.java)。
3.  使用 注释您的请求处理程序方法参数`@RequestBody`。
4.  在使用杰克逊的情况下，正如@ararog 所提到的，请确保您明确排除可以输入或注释整个`User`类的字段`@JsonIgnoreProperties(ignoreUnknown = true)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T11:34:48.613

据我所知，Spring MVC 使用 Jackson 进行 JSON 解析和序列化/反序列化，jackson 通常期望 JSON 内容具有所有类属性的数据，但标有 JSON 忽略的除外，如下所示：

```
public class User {

   private String login;
   private String name;
   @JsonIgnoreProperty
   private String password;

   ... getters/setters...
} 
```

因此，如果您创建一个 User 实例，仅设置用户名并将此数据发送到服务器，Jackson 将尝试将内容反序列化到服务器端的另一个 User 对象，在反序列化过程中，他将考虑两个强制属性 login 和name，因为只有 name 被填充，所以反序列化完成并且一个空引用返回给控制器。

你有两个选择：

1.  作为测试，在所有其他属性中设置一个假值并再次发送用户数据
2.  创建一个 Jackson 混音并为忽略的属性添加注释。

# c++ - mp3 文件长度显示不正确

> ID：15861601
> 
> 赞同：1
> 
> 时间：2013-04-07T10:58:37.300
> 
> 标签：c++, audio, mp3, wav, lame

我正在尝试使用 LAME (win7,vs2010,c++) 将 WAV 文件转换为 MP3 文件。

我找到了这段代码：

[使用lame将wav转换为mp3](https://stackoverflow.com/questions/2495420/is-there-any-lame-c-wraper-simplifier-working-on-linux-mac-and-win-from-pure)

转换工作正常，但是当我尝试使用 windows 媒体播放器打开文件时，文件的长度是错误的。

有没有办法使用蹩脚的lib来解决这个问题？（不是用另一个程序或另一个lib或命令行，只能用c++代码......）

已编辑：经过一番阅读后，我尝试按照 sellibitze 的建议使用 lame_get_lametag_frame 函数。这是我的代码：

```
#include <stdio.h>
#include <lame/lame.h>

int main(void)
{
  int read, write;

  FILE *pcm = fopen("in.pcm", "rb");
  FILE *mp3 = fopen("out.mp3", "wb");

  const int PCM_SIZE = 8192;
  const int MP3_SIZE = 8192;

  short int pcm_buffer[PCM_SIZE*2];
  unsigned char mp3_buffer[MP3_SIZE];

  lame_t lame = lame_init();
  lame_set_in_samplerate(lame, 44100);
  lame_set_VBR(lame, vbr_default);
  lame_set_write_id3tag_automatic(lame, 0);
  lame_init_params(lame);

  char buffer[256];
  int imp3=lame_get_id3v2_tag(gfp, buffer, sizeof(buffer));
  fwrite(buffer, 1, imp3, outf);
  long audio_pos=ftell(outf); // store beginning of audio data

  do {
    read = fread(pcm_buffer, 2*sizeof(short int), PCM_SIZE, pcm);
    if (read == 0)
        write = lame_encode_flush(lame, mp3_buffer, MP3_SIZE);
    else
        write = lame_encode_buffer_interleaved(lame, pcm_buffer, read, mp3_buffer, MP3_SIZE);
    fwrite(mp3_buffer, write, 1, mp3);
  } while (read != 0);

  imp3=lame_get_id3v1_tag(gfp, buffer, sizeof(buffer));
  fwrite(buffer, 1, imp3, outf);

  imp3=lame_get_lametag_frame(gfp, buffer, sizeof(buffer));
  fseek(outf,audio_pos,SEEK_SET); // remember beginning of audio data
  fwrite(buffer, 1, imp3, outf);

  lame_close(lame);
  fclose(mp3);
  fclose(pcm);

  return 0;
} 
```

**固定**：

我设法解决了这个问题，但我真的不明白它是如何解决的。我将 mp3 文件的名称从“out.mp3”更改为任何其他名称，并且 wmp 显示正确的长度。我还尝试将已经创建的文件的名称从 out 更改为其他名称，并且它起作用了。任何人都可以向我解释它的发生方式吗？名称 out.mp3 是否保存？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T18:17:34.440

您喜欢的示例代码使用 VBR 模式。这种情况下的长度信息通常作为元数据放入第一帧。这称为 Xing/VBR 标头。它还包括一个低精度搜索表。但是这个信息显然只有在你将所有的音频数据传递给 LAME 之后才可用。我建议您在 LAME API 中寻找能够更新 Xing/VBR 标头以反映正确长度和查找表的函数，并在关闭文件之前调用它。

lame_encode_flush 不会占用您的 FILE* 东西，因此它无法返回文件的开头并使用 Xing/VBR 标头更新第一个 mp3 帧。

# mysql - Wamp 服务器。Aestan 托盘菜单错误

> ID：15861606
> 
> 赞同：0
> 
> 时间：2013-04-07T10:59:08.320
> 
> 标签：mysql, phpmyadmin, wamp, wampserver

我单击 wamp 服务器中的 mysql 控制台选项。我收到以下错误-

```
Aestan Tray Menu
Could not execute menu item(internal error)
[EAccessViolation] Access violation at address 7EFA664B. Read of address FFFFFFFF. 
```

控制台无法启动。一些链接建议安装 ms visual c++ 可再发行版本以解决类似错误。我这样做了，但没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-12T14:13:47.173

安装 Visual C++ 和 .NET 框架。

# c# - BackgroundAgent WP 7.5 中的 GeoCoordinateWatcher

> ID：15861613
> 
> 赞同：1
> 
> 时间：2013-04-07T10:59:46.687
> 
> 标签：c#, windows-phone-7, background-agents

我想问你，如果我明白的话。当我在 BackgroundAgent 的 OnInvoke 方法中创建 GeoCoordinateWathcer 时，如下所示：

```
protected override void OnInvoke(ScheduledTask task)
{
    _watcher = new GeoCoordinateWatcher(GeoPositionAccuracy.High)
                   {
                       MovementThreshold = 100
                   };
    _watcher.PositionChanged += PositionChanged;
    _watcher.Start();
} 
```

我移动超过 100m 并且将调用 Task，所以 PositionChanged 不记得我以前的位置。是真的吗？那么PositionChanged事件在BackgroundAgent中没有意义，还是？如果我想每 100m 升级一次我的位置，我必须保存以前的位置并使用例如从以前和当前位置的 Haversine 公式计算距离？谢啦。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T12:55:50.703

我认为你提到的情况是你应该担心的不太重要的事情。

`GeoCoordinateWatcher`对后台代理的使用有更严重的限制。

[Windows Phone 后台代理不支持的 API](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202962%28v=vs.105%29.aspx)

> ***地理坐标观察器***
> 
> 此 API 用于获取设备的地理坐标，支持在后台代理中使用，但**它使用缓存的位置值而不是实时数据**。缓存的位置值由设备每 15 分钟更新一次。

在 Windows Phone 8 中，您可以在后台运行位置跟踪应用程序以绕过该限制：[在 Windows Phone 8 的后台运行位置跟踪应用程序](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj681691%28v=vs.105%29.aspx)，但是，它不适用于 Windows Phone 7.5。

# c - 如何只从C中带有空格的文件中获取数字

> ID：15861614
> 
> 赞同：2
> 
> 时间：2013-04-07T10:59:47.360
> 
> 标签：c

如何从包含数字、空格和字符的文件中仅获取前 100 个数字（负数、整数和浮点数）。

我当时正在使用它，但我认为 fgets 不是最好的命令。

```
int readFile (FILE* fp)
{

char number[101] = "test";
//printf ("%s\n", number);
fgets(number, 101, fp);
//fscanf(fp, "%s", number);
printf ("%s", number);

return 0;
} 
```

我想如果空格和不需要的字符被删除，可以使用这个当前的方法，但目前这甚至不起作用，除非文件中没有空格。

这是一个文件的例子

```
44.5 -55 93942 11 text     text text 333.55 999999999999 1111 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T11:22:34.940

您可以使用`fgets`获取该行，然后使用`sscanf`提取所需的数据：

```
double d1, d6;
int i2, i3, i4, i8;
long long ll7;

sscanf(input, "%lf %d %d %d %*s %*s %*s %lf %lld %d", &d1, &i2, &i3, &i4, &d6, &ll7, &i8); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T11:47:10.473

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int readFile (FILE* fp){
    char buff[4096];

    while(NULL!=fgets(buff, sizeof(buff), fp)){
        char *number, *check;
        for(number=buff;NULL!=(number=strtok(number," \t\n"));number=NULL){
            //separate string by strtok, isNumber check by strtod 
            strtod(number, &check);
            if(*check=='\0'){
                printf("%s\n",number);
            }
        }
    }

    return 0;
}

int main(){
    readFile(stdin);

    return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T11:13:59.547

使用 fgets 解析单个字符数组中的文件内容，然后解析`strtok()`每个数字。
您使用对应功能将每个数字存储在双精度数中。看看[这个](https://stackoverflow.com/questions/10075294/converting-string-to-a-double-variable-in-c)看看你怎么能做到这一点。

# objective-c - 从生成的密钥对中获取 OSX 中的公钥位

> ID：15861616
> 
> 赞同：1
> 
> 时间：2013-04-07T11:00:21.830
> 
> 标签：objective-c, macos, cocoa, encryption, cryptography

此方法用于获取 iOS 中的公钥位。

```
- (NSData *)getPublicKeyBits {
    OSStatus sanityCheck = noErr;
    NSData * publicKeyBits = nil;

    NSMutableDictionary * queryPublicKey = [[NSMutableDictionary alloc] init];

    // Set the public key query dictionary.
    [queryPublicKey setObject:(id)kSecClassKey forKey:(id)kSecClass];
    [queryPublicKey setObject:publicTag forKey:(id)kSecAttrApplicationTag];
    [queryPublicKey setObject:(id)kSecAttrKeyTypeRSA forKey:(id)kSecAttrKeyType];
    [queryPublicKey setObject:[NSNumber numberWithBool:YES] forKey:(id)kSecReturnData];

    // Get the key bits.
    sanityCheck = SecItemCopyMatching((CFDictionaryRef)queryPublicKey, (CFTypeRef *)&publicKeyBits);

    if (sanityCheck != noErr)
    {
        publicKeyBits = nil;
    }

    [queryPublicKey release];

    return publicKeyBits;
} 
```

但它仅适用于 iOS，不适用于 OSX，对于 OSX，我需要使用安全转换。[https://developer.apple.com/library/mac/#documentation/Security/Conceptual/SecTransformPG/Introduction/Introduction.html#//apple_ref/doc/uid/TP40010801-CH1-SW1](https://developer.apple.com/library/mac/#documentation/Security/Conceptual/SecTransformPG/Introduction/Introduction.html#//apple_ref/doc/uid/TP40010801-CH1-SW1)

我知道如何生成一对公钥/私钥，并为 iOS 做。

我需要在 OSX 中使用什么样的转换来从公钥中获取公钥位？为了获得与提供的 iOS 示例相同的效果。

# c++ - std::move - std::string - 内部指针

> ID：15861620
> 
> 赞同：3
> 
> 时间：2013-04-07T11:01:24.390
> 
> 标签：c++, string, move

我很惊讶 s 和 s2 指向“sample”的内部指针不相等，这是什么解释？

```
#include <string>
#include <cassert>

int main()
{
    std::string s("sample"); 

    std::string s2(std::move(s)); 

    assert(
        reinterpret_cast<int*>(const_cast<char*>(s.data())) ==
        reinterpret_cast<int*>(const_cast<char*>(s2.data()))
        ); // assertion failure here    

    return 1;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T11:03:54.977

为什么你认为它们应该是一样的？您正在使用其移动构造函数进行构建`s2`。`s`这会将数据所有权从`s`over 转移到`s2`并`s`处于“空”状态。该标准没有详细说明这意味着什么，但是在此`s`之后访问 's 的数据（没有先重新分配它）是未定义的。

一个非常简化（和不完整）的版本`string`可能如下所示：

```
class string {
    char* buffer;

public:

    string(char const* from)
        : buffer(new char[std::strlen(from) + 1])
    {
        std::strcpy(buffer, from);
    }

    string(string&& other)
        : buffer(other.buffer)
    {
        other.buffer = nullptr; // (*)
    }

    ~string() {
        delete[] buffer;
    }

    char const* data() const { return buffer; }
}; 
```

我希望这能说明为什么`data()`成员不平等。如果我们省略了标记的行，`(*)`我们将在末尾删除内部缓冲区两次`main`：一次 for`s`和一次 for `s2`。重置`buffer`指针可确保不会发生这种情况。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-07T11:04:22.937

每个`std::string`都有自己指向的缓冲区。您将一个从另一个移开这一事实并不能使它共享一个缓冲区。当您初始化`s2`时，它会接管缓冲区`s`并成为该缓冲区的所有者。为了避免`s`“拥有”同一个缓冲区，它只是将`s`'s 缓冲区设置为一个新的空缓冲区（`s`现在负责）。

从技术上讲，还涉及一些优化，很可能没有为空字符串或非常小的字符串显式分配真正的缓冲区，而是 的实现`std::string`将使用`std::string`'s 本身的一部分内存。这通常称为 STL 中的小字符串优化。

另请注意，它`s`已被移走，因此您的代码对其数据的访问是非法的，这意味着它*可以*返回任何内容。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-07T11:05:04.187

`string`在将其值替换为某个已知值之前，您不应使用 move-from ：

> 库代码需要在参数中保留有效值，但除非类型或函数另有说明，否则对结果参数值没有其他约束。这意味着通常最明智的做法是避免再次使用 move from 参数。如果您必须再次使用它，请务必在这样做之前使用已知值重新初始化它。

该库可以将它想要的任何内容粘贴到字符串中，但很可能您最终会得到一个空字符串。这就是[从 cppreference 运行示例](http://en.cppreference.com/w/cpp/utility/move)产生的结果。然而，人们不应该期望在移出的对象中找到任何特别的东西。

# android - 单击按钮时如何添加音效

> ID：15861621
> 
> 赞同：-2
> 
> 时间：2013-04-07T11:01:25.670
> 
> 标签：android

我有点麻烦，这里是gen。想法，我创建了一个简单的类似游戏的应用程序.. 但是问题是当我尝试单击标题屏幕中的按钮时，它不会播放单击声音.. 任何人都可以帮助我.. 这是我的声音代码

```
 public class Effects extends Activity implements MediaPlayer.OnCompletionListener {

        Button mPlay;
        MediaPlayer mPlayer;

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);

            mPlay = (Button)findViewById(R.id.btnStart);
            mPlay.setOnClickListener(playListener);

            setContentView(R.layout.activity_main);
        }

        @Override
        public void onDestroy() {
            super.onDestroy();
            if(mPlayer != null) {
                mPlayer.release();
            }
        }

        private View.OnClickListener playListener = new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                if(mPlayer == null) {
                    try {
                        mPlayer = MediaPlayer.create(Effects.this, R.raw.button11);
                        mPlayer.start();
                    } catch (Exception e) {
                        e.printStackTrace();
                    }
                } else {
                    mPlayer.stop();
                    mPlayer.release();
                    mPlayer = null;
                }
            }
        };
        @Override
        public void onCompletion(MediaPlayer arg0) {
            // TODO Auto-generated method stub

        }
    } 
```

这是我希望在单击此按钮时播放声音的主 java 代码

```
public class Main extends Activity implements OnClickListener
{
Button about;
Button Quit;
Button start;
protected void onCreate(Bundle onSavedInstanceState) {
    super.onCreate(onSavedInstanceState);
    setContentView(R.layout.activity_main);
    about = (Button)findViewById(R.id.btnAbout);
    about.setOnClickListener(this);
    Quit = (Button)findViewById(R.id.btnQuit);
    Quit.setOnClickListener(this);
    start = (Button)findViewById(R.id.btnStart);
    start.setOnClickListener(this);

}
public void onClick(View argo)
{
    if(argo.getId()==R.id.btnAbout)
    {
        Intent i = new Intent(this,About.class);
        this.startActivity(i);
    }
    if(argo.getId()==R.id.btnQuit)
    {
        Intent intent = new Intent(Intent.ACTION_MAIN);
        intent.addCategory(Intent.CATEGORY_HOME);
        intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        startActivity(intent);
    }
    if(argo.getId()==R.id.btnStart)
    {
        Intent start = new Intent(this,Howto.class);
        this.startActivity(start);
        Intent svc=new Intent(this,Effects.class);
        startService(svc);
    }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T11:10:19.077

用于`SoundPool`播放您的声音： http: [//developer.android.com/reference/android/media/SoundPool.html](http://developer.android.com/reference/android/media/SoundPool.html)您应该在您的声音中初始化声音`onCreate()`，然后在其中播放它们`onClick()`

而不是做成千上万毫无意义的事情`if(argo.getId()==R.id.btnQuit)`（你至少应该使用`else`）熟悉`switch/case`语法）

# vb.net - 在 Word 文档中强调每个单词的更好方法？

> ID：15861626
> 
> 赞同：2
> 
> 时间：2013-04-07T11:01:33.990
> 
> 标签：vb.net, ms-word, office-interop

我是编程新手，但我正在尝试将现有脚本改编为 MS Word 2010/2013 插件，以便为打开文档中的每个拉丁词添加正确的重音强调。

脚本“DoAccentuate”为我将其作为字符串发送的任何非重音拉丁词返回一个重音词。我只需要帮助更好地循环遍历所有单词，然后在到达最后一个单词时停止循环。我目前的方法有点傻...我在文档末尾插入一个无意义的单词，然后循环直到它被选中并重音。

也许有更好或更有效的方法来处理整个事情。

```
 Public Sub Button5_Click(sender As Object, e As EventArgs) Handles Button5.Click
    Dim document As Word.Document
    document = Globals.ThisAddIn.Application.ActiveDocument
    Dim mySelection = document.Application.Selection
 'make sure cursor is at start of document
      document.Application.Selection.HomeKey(Unit:=Microsoft.Office.Interop.Word.WdUnits.wdStory)

    'insert fake word at end to stop the loop
    Dim range As Word.Range
    range = document.Range()
    range.InsertAfter(" documentendatoris")

    Do
        'use MS Word's wildcard to select the first individual word as trimmed string
        mySelection.Find.Text = "<*>"
        mySelection.Find.MatchWildcards = True
        mySelection.Find.Execute()
        'replace the selected word that has been found with its accented counterpart
        mySelection.Text = Accentuate.Accentuate.DoAccentuate(mySelection.Text)
    Loop Until mySelection.Text = "documentendatóris"

End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T12:56:30.207

好吧，我真的不知道它是否更有效，但您可以使用***document.Content***和***range.Words***集合来检查主要故事范围内的所有单词

```
 document = Globals.ThisAddIn.Application.ActiveDocument

    Dim range As Word.Range
    range = document.Content

    Dim current As Integer
    current = 0

    Dim words As Word.Words
    words = range.Words

    Dim word As Word.Range

    Do
        current = current + 1
        If current < words.Count Then
            word = words(current)
            If word.Text.EndsWith(" ") Then
                word.Text = word.Text.Trim() + "'s "
                'replace the selected word that has been found with its accented counterpart
                'mySelection.Text = Accentuate.Accentuate.DoAccentuate(mySelection.Text)
            Else
                word.Text = word.Text.Trim() + "'s"
            End If
        End If
    Loop Until current = words.Count 
```

# sql - 如何在 DateTime 的 DATEADD 函数中添加浮点（十进制）小时？

> ID：15861627
> 
> 赞同：2
> 
> 时间：2013-04-07T11:01:36.467
> 
> 标签：sql, sql-server-2008

我正在尝试使用 DATEADD 函数在 SQL SERVER 中添加几个小时。但是当我尝试这个时，

```
SELECT DATEADD(Hour, 0.5, GETDATE()) 
```

它没有增加 0.5 小时。如何解决这个问题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-07T11:05:22.733

你不能。它在文档中很好地描述了：[DATEADD (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms186819.aspx)

> ***数字***
> 
> 是一个表达式，可以解析为添加到日期的日期部分的 int。用户定义的变量是有效的。
> 
> **如果您指定带有小数的值，则该小数将被截断而不是四舍五入。**

***更新***

你可以试试：

```
SELECT DATEADD(Second, 0.5 * 60 * 60, GETDATE()) 
```

当然 - 您可以更改`DATEPART`和乘数以获得所需的精度。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-07T11:04:45.673

您不能添加部分小时数，只能添加完整小时数。使用`minute`半小时

```
SELECT DATEADD(minute, 30, GETDATE()) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-01T14:59:46.767

我找到了另一种方法，在日期中添加一个数字而不是使用该函数适用于分数。例如：

```
GETDATE() + n 
```

其中**n 是天数**。在 1 个半小时内，您可以使用：

```
GETDATE() + 0.5/24 
```

# javascript - 如何从 JavaScript 中删除整个 IndexedDB 数据库？

> ID：15861630
> 
> 赞同：50
> 
> 时间：2013-04-07T11:01:51.803
> 
> 标签：javascript, html, phantomjs, indexeddb

如何从 JavaScript 中删除整个 IndexedDB 数据库，而不仅仅是一个对象存储？我正在使用[IndexedDB shim](http://nparashuram.com/IndexedDBShim/)，它可能使用 WebSQL 作为其后端。

我主要想知道如何为 PhantomJS（无头）浏览器执行此操作，尽管 Chrome、Safari（iPad 上）和 IE10 是其他重要的浏览器。

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2013-04-07T11:17:46.200

据我所知，应该使用[indexedDB.deleteDatabase](https://developer.mozilla.org/en-US/docs/IndexedDB/IDBFactory#deleteDatabase)：

```
var req = indexedDB.deleteDatabase(databaseName);
req.onsuccess = function () {
    console.log("Deleted database successfully");
};
req.onerror = function () {
    console.log("Couldn't delete database");
};
req.onblocked = function () {
    console.log("Couldn't delete database due to the operation being blocked");
}; 
```

我可以确认它适用于 PhantomJS 1.9.0 和 Chrome 26.0.1410.43。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-13T03:43:43.040

我发现以下代码可以正常工作，但要在 Chrome 资源选项卡中看到删除的数据库，我必须刷新页面。我还发现我在进行交易时运行的 Chrome 调试工具有问题。使调试变得更加困难，但是如果您在运行代码时关闭它，代码似乎可以正常工作。重要的还有在打开页面时设置对对象存储的引用。很明显delete部分的代码在deleteTheDB方法中。

代码源自 Craig Shoemaker 在 Pluralsight 上提供的示例。

```
var IndDb = {
    name: 'SiteVisitInsp',
    version: 1000,
    instance: {},
    storenames: {
        inspRecords: 'inspRecords',
        images: 'images'
    },
    defaultErrorHandler: function (e) {
        WriteOutText("Error found : " + e);
    },
    setDefaultErrorHandler: function (request) {
        if ('onerror' in request) {
            request.onerror = db.defaultErrorHandler;
        }
        if ('onblocked' in request) {
            request.onblocked = db.defaultErrorHandler;
        }
    }

};

var dt = new Date();
var oneInspRecord =
        {            
            recordId: 0,
            dateCreated: dt,
            dateOfInsp: dt,
            weatherId: 0,
            timeArrived: '',
            timeDeparted: '',
            projectId: 0,
            contractorName: '',
            DIWConsultant: '',
            SiteForeman: '',
            NoOfStaffOnSite: 0,
            FileME: '',
            ObservationNotes: '',
            DiscussionNotes: '',
            MachineryEquipment: '',
            Materials: ''
        };

var oneImage =
{
    recordId: '',
    imgSequence: 0,
    imageStr: '',
    dateCreated: dt
}

var SVInsp = {
    nameOfDBStore: function () { alert("Indexed DB Store name : " + IndDb.name); },
    createDB: function () {
        openRequest = window.indexedDB.open(IndDb.name, IndDb.version);

        openRequest.onupgradeneeded = function (e) {
            var newVersion = e.target.result;
            if (!newVersion.objectStoreNames.contains(IndDb.storenames.inspRecords)) {
                newVersion.createObjectStore(IndDb.storenames.inspRecords,
                    {
                        autoIncrement: true

                    });
            }

            if (!newVersion.objectStoreNames.contains(IndDb.storenames.images)) {
                newVersion.createObjectStore(IndDb.storenames.images,
                    {
                        autoIncrement: true
                    });
            }
        };

        openRequest.onerror = openRequest.onblocked = 'Error'; //resultText;

        openRequest.onsuccess = function (e) {
            //WriteOutText("Database open");
            IndDb.instance = e.target.result;
        };

    },

    deleteTheDB: function () {
        if (typeof IndDb.instance !== 'undefined') {
            //WriteOutText("Closing the DB");

            IndDb.instance.close();
            var deleteRequest = indexedDB.deleteDatabase(IndDb.name)

            deleteRequest.onblocked = function () {
                console.log("Delete blocked.");
            }

            deleteRequest.onerror =
                function () {
                    console.log("Error deleting the DB");
                    //alert("Error deleting the DB");
                };
                //"Error deleting the DB";

            deleteRequest.onsuccess = function () {

                console.log("Deleted OK.");
                alert("*** NOTE : Requires page refresh to see the DB removed from the Resources IndexedDB tab in Chrome.");
                //WriteOutText("Database deleted.");

            };

        };

    }
} 
```

# php - 在一个目录中循环数千个文件的最佳方法

> ID：15861637
> 
> 赞同：0
> 
> 时间：2013-04-07T11:02:34.057
> 
> 标签：php, filesystems, odbc

我在一个目录（身份证照片）中存储了多达 40 000 张图像。我需要定期将它们与数据库同步。我目前正在使用 PHP 脚本循环遍历目录并通过 ODBC 添加新文件并删除丢失的文件。显然，这不是很好。

在 PHP 中有没有一种健壮的方法？或者，最好的选择是什么？

谢谢

# android - 识别自定义视图上的三次点击

> ID：15861638
> 
> 赞同：4
> 
> 时间：2013-04-07T11:02:39.987
> 
> 标签：android, canvas, android-widget, touch-event

每当用户点击自定义视图时，我想绘制圆形，并根据点击计数圆形颜色变化。

```
Single Tap : YELLOW CIRCLE
Double Tap : GREEN CIRCLE
Triple Tap : RED COLOR 
```

问题是，我制作了一个自定义视图，该视图将根据时间计算点击事件，但有时它会错过第一次点击。这导致了问题。

以下代码显示了我在自定义视图上所做的所有努力。

**TripleTapView**

```
package com.slk.car_rating_app;

import java.util.ArrayList;
import java.util.Date;

import android.annotation.SuppressLint;
import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.graphics.PointF;
import android.graphics.RectF;
import android.os.CountDownTimer;
import android.view.MotionEvent;
import android.view.View;

public class TripleTapView extends View {
    // Set the tap delay in milliseconds
    protected static final long TAP_MAX_DELAY = 500L;
    // Radius to capture tap within bound
    final static int RADIUS = 30;
    // Store all points with tap count
    public ArrayList<CustomPoint> point = new ArrayList<CustomPoint>();
    // Context to access view
    Context context;
    Paint paint;
    private long thisTime = 0, prevTime = 0;
    private boolean firstTap = true, doubleTap = false;;
    float stopX, stopY, startX, startY;
    RectF area_rect;
    TapCounter tapCounter = new TapCounter(TAP_MAX_DELAY, TAP_MAX_DELAY);

    public TripleTapView(Context context) {
        super(context);
        this.context = context;
        paint = new Paint();
        paint.setColor(Color.GREEN);
        paint.setAntiAlias(true);
        paint.setDither(true);
        paint.setStyle(Paint.Style.FILL);
        paint.setStrokeJoin(Paint.Join.ROUND);
        paint.setStrokeCap(Paint.Cap.ROUND);
        paint.setStrokeWidth(2);
    }

    @SuppressLint("DrawAllocation")
    @Override
    protected void onDraw(final Canvas canvas) {
        super.onDraw(canvas);
        for (CustomPoint point_temp : point) {
            // For changing tap circle color based on tap count
            switch (point_temp.count) {
            case 1:
                paint.setColor(Color.YELLOW);
                break;
            case 2:
                paint.setColor(Color.GREEN);
                break;
            case 3:
                paint.setColor(Color.RED);
                break;
            }
            canvas.drawCircle(point_temp.point.x, point_temp.point.y, 10, paint);
        }
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        switch (event.getAction()) {
        case MotionEvent.ACTION_DOWN:
            stopX = event.getX();
            stopY = event.getY();
            if (firstTap) {
                addFirstTap();
            } else if (doubleTap) {
                prevTime = thisTime;
                thisTime = new Date().getTime();
                if (thisTime > prevTime) {
                    if ((thisTime - prevTime) <= TAP_MAX_DELAY) {
                        if (area_rect.contains(stopX, stopY))
                            doubleTap = false;
                        else {
                            addPoint(1);
                            addFirstTap();
                        }
                    } else {
                        addPoint(1);
                        firstTap = true;
                    }
                } else {
                    firstTap = true;
                }
            } else {
                prevTime = thisTime;
                thisTime = new Date().getTime();
                if (thisTime > prevTime) {
                    if ((thisTime - prevTime) <= TAP_MAX_DELAY) {
                        if (area_rect.contains(stopX, stopY)) {
                            addPoint(3);
                            firstTap = true;
                        } else {
                            addPoint(2);
                            addFirstTap();
                        }
                    } else {
                        addPoint(2);
                        firstTap = true;
                    }
                } else {
                    firstTap = true;
                }
            }
        }
        return true;
    }

    void addPoint(int tapCount) {
        point.add(new CustomPoint(new PointF(startX, startY), tapCount));
        invalidate();
    }

    void addFirstTap() {
        thisTime = new Date().getTime();
        firstTap = false;
        doubleTap = true;
        startX = stopX;
        startY = stopY;
        area_rect = new RectF(stopX - RADIUS, stopY - RADIUS, stopX + RADIUS,
                stopY + RADIUS);
        tapCounter.resetCounter();
    }

    class TapCounter extends CountDownTimer {
        public TapCounter(long millisInFuture, long countDownInterval) {
            super(millisInFuture, countDownInterval);
        }

        @Override
        public void onFinish() {
            if (doubleTap) {
                prevTime = thisTime;
                thisTime = new Date().getTime();
                if (thisTime > prevTime) {
                    if ((thisTime - prevTime) <= TAP_MAX_DELAY) {
                        doubleTap = false;
                    } else {
                        addPoint(1);
                        firstTap = true;
                    }
                } else {
                    firstTap = true;
                }
            } else if (!firstTap && !doubleTap) {
                prevTime = thisTime;
                thisTime =  new Date().getTime();
                if (thisTime > prevTime) {
                    if ((thisTime - prevTime) <= TAP_MAX_DELAY) {
                        addPoint(2);
                        firstTap = true;
                    }
                } else {
                    firstTap = true;
                }
            }
        }

        @Override
        public void onTick(long millisUntilFinished) {
        }

        public void resetCounter() {
            start();
        }
    }
} 
```

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-11T09:43:59.483

此代码将满足您的需求。我简化了你的课程。

```
import java.util.ArrayList;

import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.graphics.PointF;
import android.graphics.RectF;
import android.os.CountDownTimer;
import android.view.MotionEvent;
import android.view.View;

public class TripleTapView extends View {

    // Set the tap delay in milliseconds
    protected static final long TAP_MAX_DELAY = 500L;
    // Radius to capture tap within bound
    private final static int RADIUS = 30;
    // Store all points with tap count
    public ArrayList<CustomPoint> _points = new ArrayList<CustomPoint>();

    Context _context;
    Paint _paint;

    TapCounter _tapCounter = new TapCounter(TAP_MAX_DELAY, TAP_MAX_DELAY);

    public TripleTapView(Context context) {
        super(context);
        _context = context;

        _paint = new Paint();
        _paint.setAntiAlias(true);
        _paint.setDither(true);
        _paint.setStyle(Paint.Style.FILL);
        _paint.setStrokeJoin(Paint.Join.ROUND);
        _paint.setStrokeCap(Paint.Cap.ROUND);
        _paint.setStrokeWidth(2);
    }

    @Override
    protected void onDraw(final Canvas canvas) {
        super.onDraw(canvas);
        for (CustomPoint point_temp : _points) {
            // For changing tap circle color based on tap count
            switch (point_temp.count) {
            case 1:
                _paint.setColor(Color.YELLOW);
                break;
            case 2:
                _paint.setColor(Color.GREEN);
                break;
            case 3:
                _paint.setColor(Color.RED);
                break;
            }
            canvas.drawCircle(point_temp.point.x, point_temp.point.y, 10,
                    _paint);
        }
    }

    private RectF _lastTapArea;
    private int _lastTapCount = 0;

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        switch (event.getAction()) {
        case MotionEvent.ACTION_DOWN:
            _tapCounter.resetCounter();
            float x = event.getX();
            float y = event.getY();

            if (_lastTapArea != null) {
                if (_lastTapArea.contains(x, y)) {
                    if (_lastTapCount < 3) {
                        _lastTapCount++;
                    } else {
                        addPoint(_lastTapArea.centerX(),
                                _lastTapArea.centerY(), _lastTapCount);
                        _lastTapCount = 1;
                    }
                } else {
                    addPoint(_lastTapArea.centerX(), _lastTapArea.centerY(),
                            _lastTapCount);
                    _lastTapCount = 1;
                    _lastTapArea = new RectF(x - RADIUS, y - RADIUS,
                            x + RADIUS, y + RADIUS);
                }
            } else {
                _lastTapCount = 1;
                _lastTapArea = new RectF(x - RADIUS, y - RADIUS, x + RADIUS, y
                        + RADIUS);
            }

            return true;
        }

        return false;
    }

    void addPoint(float x, float y, int tapCount) {
        _points.add(new CustomPoint(new PointF(x, y), tapCount));
        invalidate();
    }

    class TapCounter extends CountDownTimer {

        public TapCounter(long millisInFuture, long countDownInterval) {
            super(millisInFuture, countDownInterval);
        }

        @Override
        public void onFinish() {
            if (_lastTapArea != null) {
                if (_lastTapCount > 0)
                    addPoint(_lastTapArea.centerX(), _lastTapArea.centerY(),
                            _lastTapCount);

                _lastTapCount = 0;
                _lastTapArea = null;
            }
        }

        @Override
        public void onTick(long millisUntilFinished) {
        }

        public void resetCounter() {
            start();
        }
    }
} 
```

# c# - c# 列表中的最后一项

> ID：15861639
> 
> 赞同：0
> 
> 时间：2013-04-07T11:02:47.083
> 
> 标签：c#, arrays, list

我需要突出显示文章中的关键字或标签并将变量传递给 jQuery Array 我正在使用属性将值从 C# 传递到 java-script 我还需要格式化存储在数据库中的关键字`one, two, three, four, five,six,seven`

为了使它起作用，我必须将每个关键字用单`'` 引号或双引号括起来`"`。

**jQuery**

```
 function HighlightKeywords(keywords) {
        var el = $("body");
        $(keywords).each(function () {
            var pattern = new RegExp("(" + this + ")", ["gi"]);
            var rs = "<a href='search.aspx?search=$1'<span style='background-color:#FFFF00;font-weight: bold;background-color:#FFFF00;'>$1</span></a>";
            el.html(el.html().replace(pattern, rs));
        });
    }

HighlightKeywords(["<%= MyProperty %>]"); 
```

C# 代码

```
string _sFinalList = null;

protected string MyProperty { get { return _sFinalList; } }
string sKewords = "one, two, three, four, five,six,seven";

List<string> lstKewords = sKewords.Split(',').ToList();
foreach (string list in lstKewords) // Loop through List with foreach
{
   _sFinalList += "'" + list + "',"; 
```

}

这段代码的问题是它`,`在最后一句话之后做广告我想知道避免`,`在最后一句话之后添加的最佳方法是什么

**当前输出**：“‘一’，‘二’，‘三’，‘四’，‘五’，‘六’，‘七’，”

**期望的输出**：“‘一’、‘二’、‘三’、‘四’、‘五’、‘六’、‘七’”

感谢您提供这方面的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T11:07:00.777

在 C# 中，使用[`String.Join()`](http://msdn.microsoft.com/en-us/library/dd783876.aspx)：

```
List<string> lstKeywords = sKeywords.Split(',').ToList();

var quotedKeywords = lstKeywords.Select(s => "'" + s + "'");

string _sFinalList = string.Join(",", quotedKeywords); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T11:05:11.483

你可以使用`String.Join()`

```
string sKewords = "one, two, three, four, five,six,seven";
List<string> lstKewords = sKewords.Split(',').ToList();
var _partial = lstKewords.Select(x => "'" + x + "'");
Var _result = String.Join(",", _partial); 
```

*   [String.Join()](http://msdn.microsoft.com/en-us/library/0h8wc12c.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-07T11:06:59.993

你可以使用[String.Join](http://msdn.microsoft.com/en-gb/library/tk0xe5h0.aspx)

```
var result = string.Format("'{0}'", string.Join("','", yourList)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-07T11:13:03.243

完成 for 循环后，您可以简单地使用字符串类的子字符串函数删除 lastIndexOf(",") 。

或者

您可以在 for 循环中添加 if 语句，如果循环不在其最后一次迭代中，则会添加“，”。

# jquery - jquery $(multi selector).each() 不是函数 firefox

> ID：15861643
> 
> 赞同：0
> 
> 时间：2013-04-07T11:02:59.880
> 
> 标签：jquery, google-chrome, firefox

我在页面中有以下代码；

```
$(document).ready(function() {
    window.setInterval(function(){
        $("#customers, td, #span").each(function(){
            if($(this).children("span").attr("alt")!=null)
                var dt=new Date($(this).children("span").attr("alt").split(",")[3]).getTime();
                    if(dt>$.now()-10*1000){ //am i right here??
                        console.log("animating");
                        $(this).parent().fadeOut("slow");
                        $(this).parent().fadeIn("slow");
                    }        
       });
    },1000);
}); 
```

此代码在 chrome 上运行良好，但在 firefox 上不起作用；火狐说`TypeError: $(...).each is not a function`。

谁能帮我？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T13:56:01.697

看起来`new Date()`在 Firefox 中不起作用。

日期是；

```
new Date("2013-04-07 15:39:17"); 
```

我将其更新为；

```
new Date("2013/04/07 15:39:17"); 
```

# javascript - 在滚动时更改图像

> ID：15861645
> 
> 赞同：1
> 
> 时间：2013-04-07T11:03:05.520
> 
> 标签：javascript, css, javascript-events

在我的网站上是一个固定的图像。这个图像应该是“动画的”，这意味着动画的单帧应该被迭代。所以想法是有一个图像数组，每次用户滚动时，数组都会迭代，显示的图像会发生变化，从而创建动画。我不太习惯使用 JS，因此我真的不知道从哪里开始。我唯一拥有的是CSS：

```
#animation { 
background-repeat: no-repeat;
position : fixed; 
width: 980px;
margin: 0 auto;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-07T14:07:20.830

好的，我已经为将在“电影/动画”中使用的固定数量的图像创建了示例。在这种情况下，数字为 5。脚本将获取站点高度的图像，整个动画（5 帧）将具有站点长度的长度。我已经预加载并隐藏了将在动画中使用的图像，以确保动画能够顺利运行。

**HTML**

```
<img class="hidden" src="http://coverjunction.s3.amazonaws.com/manual/low/colorful1.jpg"/>
<img class="hidden" src="http://coverjunction.s3.amazonaws.com/manual/low/colorful2.jpg"/>
<img class="hidden" src="http://coverjunction.s3.amazonaws.com/manual/low/colorful3.jpg"/>
<img class="hidden" src="http://coverjunction.s3.amazonaws.com/manual/low/colorful4.jpg"/>
<img class="hidden" src="http://coverjunction.s3.amazonaws.com/manual/low/colorful5.jpg"/>

<!-- Next image is used for first frame, before scroll -->
<img src="http://coverjunction.s3.amazonaws.com/manual/low/colorful1.jpg" id="animation" />

<div id="bottommark"></div> 
```

**CSS**

```
.hidden {
    position: absolute;
    top: -9999999px;
}

#bottommark {
    position: absolute;
    bottom: 0;
}

#animation { 
    background-repeat: no-repeat;
    position : fixed; 
    top: 0;
    width: 980px;
    margin: 0 auto;
}

body, html {
    height: 1000px; /* just for DEMO */
    margin: 0;
} 
```

**jQuery**

```
$(document).ready(function(){
    var offset2 = $(document).height();
   var lineHF = offset2 - $("#bottommark").position().top;
    $(window).scroll(function(){
        var offset1 = $(document).height();
        var offset = $(window).scrollTop();
        var lineH = offset1 - $("#bottommark").position().top - offset;
        var lineHpart = lineHF/5; //just in case animation have 5 frames/images

        //below is code in case that animation have 5 frames.
        //If number of frames is different, edit code (add/remove if loops) 

        $("span").html(lineH);
            if (lineH > lineHpart*4) {
                $("#animation").attr("src", "http://coverjunction.s3.amazonaws.com/manual/low/colorful1.jpg");
            }
            if ((lineH < lineHpart*4) && (lineH > lineHpart*3)) {
                $("#animation").attr("src", "http://coverjunction.s3.amazonaws.com/manual/low/colorful2.jpg");
            }
            if ((lineH < lineHpart*3) && (lineH > lineHpart*2)) {
                $("#animation").attr("src", "http://coverjunction.s3.amazonaws.com/manual/low/colorful3.jpg");
            }
            if (lineH < lineHpart*2 && lineH > lineHpart*1) {
                $("#animation").attr("src", "http://coverjunction.s3.amazonaws.com/manual/low/colorful4.jpg");
            }
            if (lineH < lineHpart) {
                $("#animation").attr("src", "http://coverjunction.s3.amazonaws.com/manual/low/colorful5.jpg");
            }
        });
    }); 
```

**[演示](http://jsfiddle.net/WTkqn/)**

# javascript - 隐藏/显示菜单 Javascript

> ID：15861647
> 
> 赞同：0
> 
> 时间：2013-04-07T11:03:16.070
> 
> 标签：javascript

我想制作一个菜单，您可以在其中单击标题以显示内容。我想让它与下面的谷歌 Inspect 元素中的完全一样： ![在此处输入图像描述](https://i.stack.imgur.com/3g7Lp.png)

我设法编写了这段代码：

```
<script>
$("label").click(function () {
  $("p").slideToggle("fast");

if ($((this).html).find('&#9654;'));
{   
    document.getElementById("lbl_name").innerHTML = '&#9660;' + document.getElementById("lbl_name").innerHTML.substring(1);

}   

else if ($((this).html).find('&#9660;'));
{   
    document.getElementById("lbl_name").innerHTML = '&#9654;' + document.getElementById("lbl_name").innerHTML.substring(1);
} 

}); 
```

&96... 是向右和向下箭头

但是我对这段代码有问题： 1-它不起作用，在它第一次更改箭头后它不会再次更改它。

2-我不希望该函数与元素 ID 一起使用，因为我希望它与许多文本一起使用而不仅仅是一个，所以我希望它与函数的调用者一起使用，而不是更改所有段落标签。

的HTML：

```
 <label id="lbl_name">&#9654;Toggle</label>
  <p>
    This is the paragraph.
  </p> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T11:12:41.790

html:

```
<label><span>&#9654;</span>Click Me</label>
<p class="p">this is a sample text..</p> 
```

CSS：

```
 <style>
            .p {
              display: none; 
            }                
        </style> 
```

javascript: // 如果你有 jquery 早于 1.9 ，你可以使用`toggle`

```
 <script>
            $(function(){
                $("label").toggle(function(){
                    $(this).find("span").html('&#9660;');
                    $(this).next("p").slideDown(500);
                },function(){                    
                    $(this).find("span").html('&#9654;');
                    $(this).next("p").slideUp(500);
                });
            });            
        </script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T11:27:40.080

我做了类似的事情......尝试捕捉事件中的内容。要不使用 id，请尝试使用 class intead 或`.next()`像我一样只使用 jquery 函数：

```
$('p > .arrow').on('click', function(e) {
  var $el = $(e.target);
  if($el.hasClass('arrow-right')) { // so this is hide! show it
    $el.next('p').slideDown('fast');
    $el.removeClass('arrow-right');
    $el.addClass('arrow-down');
  }
  else { // is visible, hide it
    $el.next('p').slideUp('fast');
    $el.addClass('arrow-right');
    $el.removeClass('arrow-down');
  }
}); 
```

您的 HTML 必须类似于：

```
<p>
  <span class="arrow arrow-right"></span>
  Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod temp
  <p><span class="arrow arrow-right"></span>Lorem ipsum dolor sit amet, consect</p>
</p> 
```

# c# - TPL 数据流是否适用于这种设计类型？

> ID：15861657
> 
> 赞同：5
> 
> 时间：2013-04-07T11:04:28.563
> 
> 标签：c#, .net, task-parallel-library, dataflow

我目前正在研究模拟连接对象之间的资源和消息传输的方法，例如设备的电源或网络系统上的控制消息：

![在此处输入图像描述](https://i.stack.imgur.com/oHKcJ.png) [**点击查看大图。**](http://snag.gy/WV5tl.jpg)

我最近一直在研究 TPL 数据流，不是因为它的线程和并行性，而是因为它可以在不处理大量杂乱代码的边缘情况下实现数据流水线的效果。模拟可能每 500 毫秒左右只运行一次，并且实际上不是时间关键的。

我一直在玩图书馆，并且已经阅读了文档，现在已经阅读了几次，但我正在努力实现它的解决方案。在上图中的节点概念中，我不确定什么适合 Dataflow 节点。

我很想就 TPL Dataflow 是否适合这里得到一些建议，如果适合的话，是 Dataflow Block 对应部分中每个图示节点的基本实现。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-07T16:22:29.557

我认为 TPL Dataflow 不太适合这一点。有几个原因：

1.  TDF 没有双工（双向）通信，您需要以某种方式将其固定。
2.  在 TDF 中，块通常接收消息，然后生成更多消息以沿管道发送。这似乎不是您需要的（集线器节点除外），至少在逻辑上不是。

但我认为您的要求不需要像 TDF 这样重量级的东西。我认为你应该做的是：

1.  创建一个简单的消息发送库，可能使用类似客户端-服务器的架构：客户端（例如消费者节点或分发节点）向服务器（例如分发节点或电源节点）发送消息，服务器回复，可能带有一些延迟。如果客户端连接到多个服务器，它会向所有服务器发送相同的消息并决定如何处理多个响应（可能只接受第一个响应；这也意味着客户端必须能够拒绝响应）。
2.  创建一个`PowerStore`存储能量并可以用来获取能量的类。它将返回 a `Task`，因此消费者可以等到电源可用。
3.  使用以上两点，构建节点应该相对简单。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T12:30:03.277

经过深思熟虑、原型设计和研究，我终于使用事件和代表实现了该解决方案，并且运行良好！

唯一的主要设计问题是，例如，如果 3 个分发节点连接成三角形，则消息将进入无限循环的情况。或者如果一个节点连接到自身或两个节点多次相互连接。我在事件侦听器连接中用一些简单的逻辑覆盖了这些边缘案例中的每一个：

```
public bool ConnectTo(Node peerNode)
        {
            EthernetPort peerPort   = peerNode.GetFreePort();
            EthernetPort myPort     = this.GetFreePort();

            // Perform a check for free ports for both peers:
            if (peerPort == null || myPort == null)
                return false; // Either myself or my peer do not have a spare port.

            // Perform a check to make sure these nodes aren't already connected:
            if (this.HasConnectedNode(peerNode))
                return false;

            // Connect the two ports:
            myPort.Connect(peerNode, peerPort);
            peerPort.Connect(this, myPort);
            return true;
        }
public bool HasConnectedNode(Node node) {
            foreach (var port in ethernetSwitch.ethernetPorts)
            {
                if (port.peerNode == node)
                    return true; // Found a port already connected to this node.
            }

            return false; // No port has this node connected to it.
        } 
```

最后，以防万一我错过了什么或者只是为了安全起见，我实现了一个`EventArgs`带有`int timeToLive`变量的自定义类型。每次节点处理消息时，此变量都会递减，如果达到 0，则丢弃该消息。

# ios - 是否可以向 UIDatepicker 添加组件？

> ID：15861659
> 
> 赞同：1
> 
> 时间：2013-04-07T11:04:36.190
> 
> 标签：ios, objective-c, uipickerview, uidatepicker

我在时间模式下有一个 uidatepicker 我想在其中添加一个带有字符串值的组件我想我有两种方法：

1.使用自定义pickerview

2.将组件添加到我的模式时间的uidatepicker（我不知道这种可能性）

如果可以将组件添加到 TimeMode 的内置 uidatepicker 中，我认为这很棒，因为它比构建 customepickerview 更容易

这是时间模式：

```
TimePicker.datePickerMode=UIDatePickerModeTime;
NSDateFormatter *outputFormatter = [[NSDateFormatter alloc] init];
[outputFormatter setDateFormat:@"HH:mm"]; 
```

是否可以在这里添加一个组件？或者我应该从头开始构建一个选择器视图？我知道如何从头开始构建我只想知道是否可以将组件添加到 datepicker

![在此处输入图像描述](https://i.stack.imgur.com/oQ64M.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T11:13:24.703

不，您不能这样做，UIDatePickerView 不允许访问其底层 UIPickerView，为此您必须在 UIPickerView 上创建自定义版本。

# c# - 如何从 C# 获取动态添加的 UI 元素

> ID：15861665
> 
> 赞同：1
> 
> 时间：2013-04-07T11:05:11.317
> 
> 标签：c#, xaml

我在获取动态添加字段的属性时遇到问题。

如果我做这样的事情

```
<Rectangle Name="field_0_0" Width="10" Height="10" /> 
```

然后在 C# 代码中我可以通过

```
field_0_0.Width = 20; 
```

但在我的应用程序中，我做了这样的事情

```
for(i = 0; i < 5; i++) {
    for(j = 0; j < 5; j++) {
        String fieldName = "field_" + i + "_" + j;
        Rectangle rec = new Rectangle();
        rec.Name = fieldName;
        Container.Children.Add(rec);
    }
 } 
```

现在的问题是，当我在屏幕上显示这些字段时，我不知道如何在代码中调用它们？例如我想改变填充颜色`field_1_1`

我怎样才能从 name 得到这个矩形？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T11:14:39.177

您可以使用[FindName](http://msdn.microsoft.com/en-gb/library/system.windows.frameworkelement.findname.aspx)方法。

```
object findRect = Container.FindName("field_1_1");
if (findRect is Rectangle)
{        
    Rectangle rect = findRect as Rectangle;
    //change rect properties
} 
```

# c++ - 使用“constexpr”将字符串文字用于模板参数

> ID：15861669
> 
> 赞同：27
> 
> 时间：2013-04-07T11:05:24.067
> 
> 标签：c++, templates, c++11, string-literals, constexpr

我已经编写了一些代码来`const char*`使用`int`，`constexpr`因此我可以使用 a`const char*`作为模板参数。这是代码：

```
#include <iostream>

class conststr
{
    public:
        template<std::size_t N>
        constexpr conststr(const char(&STR)[N])
        :string(STR), size(N-1)
        {}

        constexpr conststr(const char* STR, std::size_t N)
        :string(STR), size(N)
        {}

        constexpr char operator[](std::size_t n)
        {
            return n < size ? string[n] : 0;
        }

        constexpr std::size_t get_size()
        {
            return size;
        }

        constexpr const char* get_string()
        {
            return string;
        }

        //This method is related with Fowler–Noll–Vo hash function
        constexpr unsigned hash(int n=0, unsigned h=2166136261)
        {
            return n == size ? h : hash(n+1,(h * 16777619) ^ (string[n]));
        }

    private:
        const char* string;
        std::size_t size;
};

// output function that requires a compile-time constant, for testing
template<int N> struct OUT
{
    OUT() { std::cout << N << '\n'; }
};

int constexpr operator "" _const(const char* str, size_t sz)
{
    return conststr(str,sz).hash();
}

int main()
{
    OUT<"A dummy string"_const> out;
    OUT<"A very long template parameter as a const char*"_const> out2;
} 
```

在此示例代码中， type of `out`is`OUT<1494474505>`和 type of `out2`is `OUT<106227495>`。这段代码背后的神奇之处在于`conststr::hash()`它是一个`constexpr`使用[FNV Hash 函数](http://isthe.com/chongo/tech/comp/fnv/)的递归。因此它为 const char* 创建了一个完整的散列，希望它是唯一的散列。

我对这种方法有一些疑问：

1.  这是一种安全的使用方法吗？或者这种方法在特定用途中可能是邪恶的？
2.  你能写一个更好的散列函数，为每个字符串创建不同的整数，而不受字符数量的限制吗？（在我的方法中，长度足够长）
3.  您能否编写一个隐式转换`const char*`为`int constexpr`via的代码，`conststr`这样我们就不需要美观的丑陋（以及时间消耗）`_const`用户定义的字符串文字？例如`OUT<"String">`将是合法的（并将“字符串”转换为整数）。

任何帮助将不胜感激，非常感谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-07T12:53:43.527

尽管您的方法非常有趣，但它并不是真正将字符串文字作为模板参数传递的方法。事实上，它是一个基于字符串文字的模板参数生成器，这是不一样的：你不能`string`从`hashed_string`……中检索它有点破坏了字符串文字在模板中的全部兴趣。

**编辑**：当使用的哈希是字母的加权总和时，以下是正确的，而在编辑 OP 后情况并非如此。

> 如 mitchnull 的回答所述，您的[哈希函数也可能存在问题。](https://stackoverflow.com/questions/34595/what-is-a-good-hash-function)这可能是您的方法的另一个大问题，即碰撞。例如：
> 
> ```
> // Both outputs 3721
> OUT<"0 silent"_const> out;
> OUT<"7 listen"_const> out2; 
> ```

据我所知，在当前标准中，您不能直接在模板参数中传递字符串文字。但是，您可以“伪造”它。这是我一般使用的：

```
struct string_holder              //
{                                 // All of this can be heavily optimized by
    static const char* asString() // the compiler. It is also easy to generate
    {                             // with a macro.
        return "Hello world!";    //
    }                             //
};                                // 
```

然后，我通过类型参数传递“假字符串文字”：

```
template<typename str>
struct out
{
    out()
    {
        std::cout << str::asString() << "\n";
    }
}; 
```

**EDIT2**：您在评论中说您使用它来区分类模板的几个专业化。您展示的方法对此有效，但您也可以使用标签：

```
// tags
struct myTag {};
struct Long {};
struct Float {};

// class template
template<typename tag>
struct Integer
{
    // ...
};
template<> struct Integer<Long> { /* ... */ };

// use
Integer<Long> ...;  // those are 2
Integer<Float> ...; // different types 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-08-02T14:03:15.370

这是我用于模板 const 字符串参数的模式。 `class F { static constexpr const char conststr[]= "some const string"; TemplateObject<conststr> instance; };`

见： [https ://stackoverflow.com/a/18031951/782168](https://stackoverflow.com/a/18031951/782168)

# java - 如何在android中获取经度和纬度并将其传递给画布类，以便我可以在位图上绘制

> ID：15861673
> 
> 赞同：0
> 
> 时间：2013-04-07T11:05:46.470
> 
> 标签：java, android, geolocation

在过去的 3 个月里，我一直在做 android 编程，但我在这个问题上遇到了困难。

我的任务：我希望我的设备能够获取其当前位置（纬度和经度）并将其传递给另一个我有位图的类。位图是我自己画的地图。那么有人知道将纬度和经度坐标传递给另一个类的简单方法吗？

注意：一旦我得到坐标并将它们传递给另一个类，我就知道如何在我的位图上绘制。我正在使用 eclipse 和 java 顺便说一句。我希望在不使用 phonegap 的情况下做到这一点。

编辑：我使用了以下代码（我在教程中找到了它），当我使用它时，我可以查看位置。问题是我不知道他是如何获得确切位置的。那么任何人都可以向我解释如何使用此代码将位置传递给另一个类吗？

提前谢谢了！

```
package org.mh00217.SilineSnap;

public class LocationActivity extends MapActivity implements LocationListener { //<1>

      private static final String TAG = "LocationActivity";

      LocationManager locationManager; //<2>
      Geocoder geocoder; //<3>
      TextView locationText;
      MapView map;  
      MapController mapController; //<4>

    @Override
      public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.location);

        locationText = (TextView)this.findViewById(R.id.lblLocationInfo);
        map = (MapView)this.findViewById(R.id.mapview);
        map.setBuiltInZoomControls(true);

        mapController = map.getController(); //<4>
        mapController.setZoom(16);

        locationManager = (LocationManager)this.getSystemService(LOCATION_SERVICE); //<2>

        geocoder = new Geocoder(this); //<3>

        Location location = locationManager.getLastKnownLocation(LocationManager.GPS_PROVIDER); //<5>
        if (location != null) {
          Log.d(TAG, location.toString());
          this.onLocationChanged(location); //<6>

        }
      }

      @Override
      protected void onResume() {
        super.onResume();
        locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 1000, 10, this); //<7>
      }

      @Override
      protected void onPause() {
        super.onPause();
        locationManager.removeUpdates(this); //<8>
      }

      @Override
      public void onLocationChanged(Location location) { //<9>

        Log.d(TAG, "onLocationChanged with location " + location.toString());
        String text = String.format("Lat:\t %f\nLong:\t %f\nAlt:\t %f\nBearing:\t %f", location.getLatitude(), 
                      location.getLongitude(), location.getAltitude(), location.getBearing());
        this.locationText.setText(text);

        try {
          List<Address> addresses = geocoder.getFromLocation(location.getLatitude(), location.getLongitude(), 10); //<10>
          for (Address address : addresses) {
            this.locationText.append("\n" + address.getAddressLine(0));
          }

          int latitude = (int)(location.getLatitude() * 1000000);
          int longitude = (int)(location.getLongitude() * 1000000);

          GeoPoint point = new GeoPoint(latitude,longitude);
          mapController.animateTo(point); //<11>

        } catch (IOException e) {
          Log.e("LocateMe", "Could not get Geocoder data", e);
        }
      }

    @Override
    protected boolean isRouteDisplayed() {
        // TODO Auto-generated method stub
        return false;
    }

    @Override
    public void onProviderDisabled(String provider) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onProviderEnabled(String provider) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {
        // TODO Auto-generated method stub

    }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T11:29:21.647

从 GPS 接收器，你得到一个[`Location`-object](http://developer.android.com/reference/android/location/Location.html)。它实现了`Parcelable`-interface。

如果要将此对象传递给另一个 Activity，可以将其添加到`Bundle`：

```
Intent i = new Intent(...);
i.putExtra("Location", location); // The object.
startActivity(i); 
```

# java - eclipse链接重复键奇怪的错误

> ID：15861687
> 
> 赞同：0
> 
> 时间：2013-04-07T11:07:29.477
> 
> 标签：java, database, jpa, eclipselink

当我为第一个实体（customer1）创建数据时，数据已成功创建，但是当我想为第二个实体创建数据时，出现以下错误。我们在两个具有不同表注释名称的**不同包**中生成这两个实体，所以我不明白为什么我会收到此错误。我们还为每个实体创建**不同的持久性单元**名称......这个错误的原因可能是什么？

错误在提交中

```
entityManager.getTransaction().commit();
        entityManager.close(); 
```

> 异常 [EclipseLink-4002] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): org.eclipse.persistence.exceptions.DatabaseException 内部异常: java.sql.SQLIntegrityConstraintViolationException: 该语句被中止，因为它会导致重复键在“customer02”上定义的“SQL130407132754180”标识的唯一或主键约束或唯一索引中的值。错误代码：20000 调用：INSERT INTO customer02(CUSTOMER, NOTE, BUYERID) VALUES (?, ?, ?) bind => [3 个参数绑定] 查询：InsertObjectQuery(prod2.customer02@7fe4bdcc)

实体 1 客户在包中 ... **customer01**

```
package prod1;

import java.util.List;
import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.Id;
import javax.persistence.Table;

@Entity
@Table(name="customer01")
public class Customer
{

  @Id
  @Column(name="customer_number")
  private String customer;
  private String Note;
  private String BuyerId; 
```

实体 2 客户在包中 ... **customer02**

```
package prod2;

import java.util.List;
import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.Id;
import javax.persistence.Table;

@Entity
@Table(name="customer02")
public class Customer
{

  @Id
  @Column(name="customer_number")
  private String customer;
  private String Note;
  private String BuyerId; 
```

持久性单位是

```
-<persistence-unit name="prod1">
<class>prod1.customer01</class>-
<properties><property name="eclipselink.ddl-generation" 
value="drop-and-create-tables"/>
<property name="eclipselink.logging.level" value="SEVERE"/>
</properties></persistence-unit>-

-<persistence-unit name="prod2">
<class>prod2.customer02</class>-
<properties><property name="eclipselink.ddl-generation" 
value="drop-and-create-tables"/>
<property name="eclipselink.logging.level" value="SEVERE"/>
</properties></persistence-unit>- 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T13:25:37.533

显示的注释没有为 ID 定义排序。尝试添加 @GeneratedValue 让提供商为您分配它们。

[http://wiki.eclipse.org/EclipseLink/Examples/JPA/PrimaryKey](http://wiki.eclipse.org/EclipseLink/Examples/JPA/PrimaryKey)

# php - 在评论中查找图片链接并添加html标签

> ID：15861689
> 
> 赞同：0
> 
> 时间：2013-04-07T11:08:22.220
> 
> 标签：php

我有 Web 应用程序，我需要向它添加新功能。

我允许用户发表评论。现在我想要的是，如果任何用户只是发布图像 url，它应该变成正确的 html 标签。我正在使用 php。

例如，如果用户发布只是计划图像链接，现在我希望它自己添加 html 标记。

```
Hi how are you? http://www.example.com/image/user/1.jpg have a good day! 
```

应该是这样的：

```
Hi how are you? <img src="http://www.example.com/image/user/1.jpg"> have a good day! 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T11:10:41.427

您可以为此使用正则表达式。

1.  通过正则表达式解析 URL 上的发布内容。
2.  使用某些功能验证正确图像格式扩展（jpeg、jpg、png...）上的 URL。
3.  如果在 URL 中是图像文件位置 - 将其替换为`<img>`标记。

# scala - 如何在scala中反转地图？

> ID：15861692
> 
> 赞同：3
> 
> 时间：2013-04-07T11:08:40.277
> 
> 标签：scala, scala-collections

在 Scala 中从`Map[K, V]`to反转的最短/惯用方法是什么？`Map[V, Iterable[K]]`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-07T12:53:13.510

Marius 的解决方案可以使用 mapValues 进行简化，

```
m.groupBy(_._2).mapValues(_.map(_._1)) 
```

示例 REPL 会话，

```
scala> val m = Map(1 -> "foo", 2 -> "foo", 3 -> "bar", 4 -> "bar", 5 -> "baz")
m: Map[Int,String] = Map(5 -> baz, 1 -> foo, 2 -> foo, 3 -> bar, 4 -> bar)

scala> m.groupBy(_._2).mapValues(_.map(_._1))
res0: Map[String, Iterable[Int]] = Map(baz -> List(5), foo -> List(1, 2), bar -> List(3, 4)) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-07T11:19:56.010

这应该可以解决问题：

```
def invert[A, B](m: Map[A, B]): Map[B, Iterable[A]] = {
  m.groupBy(_._2).map {
    case (v, kvPairs) => (v, kvPairs.map(_._1))
  }
} 
```

这将遍历映射中的键值对并使用值对这些对进行分组（`_._2`是元组第二个元素的 getter）。

这为我们提供了一个对列表，其中第一个元素是值，第二个元素是一个序列，其中包含原始映射中第二个元素具有该值的所有对。

最后，对于后面的每一对，我们只从序列中提取第一个元素——从而获得在原始映射中映射到它的所有键的值。

# java - 我不断收到一个关于 connectNode 方法的错误

> ID：15861694
> 
> 赞同：-1
> 
> 时间：2013-04-07T11:08:51.327
> 
> 标签：java

我有一个定义如下的节点类，但我不断在 Eclipse 中收到错误

> void 是变量 connectNode 的无效类型

请解释为什么？

```
 class Node{

    char label;

    boolean visited = false;

    public Node (char l){
        this.label=l;
    }
    public String toString() {
        return Character.toString(label);
    }
 } 
```

我已将 ArrayList 定义如下：

```
ArrayList<Node> nodes = new ArrayList<Node>(); 
```

我正在尝试使用以下方法打印开始和结束索引的值

```
public void connectNode(Node start,Node end){
   int startIndex=nodes.indexOf(start);
   int endIndex=nodes.indexOf(end);

   System.out.println(startIndex);
   System.out.println(endIndex);

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T11:14:30.467

当您尝试在另一个方法中声明一个方法时，通常会出现您的错误。重新检查您的代码和文件结构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T11:13:52.270

有没有可能你正在做类似的事情：

```
nodes.add(connectNode(start, end)); 
```

如果是这种情况，则意味着您正在尝试插入不适合此数组列表的内容。更具体地说，您尝试将 void 放入 Node 类型的列表中。

# java - java.net.SocketException：软件导致连接中止：recv 失败 java 邮件

> ID：15861695
> 
> 赞同：2
> 
> 时间：2013-04-07T11:09:10.110
> 
> 标签：java, email, exception, gmail

**UPD*** 问题似乎在 Windows 防火墙和/或防病毒问题之后，阻止了 cport 连接，因为在 Ubuntu 上我可以毫无问题地连接到该端口。我会调查原因并让你知道是什么阻止了它。特别感谢用户**Perception**帮助我！

尝试使用 gmail 测试帐户发送电子邮件时出现此异常。这是邮寄代码

```
package Controller;

import java.io.File;
import java.util.Properties;

import javax.mail.Message;
import javax.mail.MessagingException;
import javax.mail.PasswordAuthentication;
import javax.mail.Session;
import javax.mail.Transport;
import javax.mail.internet.InternetAddress;
import javax.mail.internet.MimeBodyPart;
import javax.mail.internet.MimeMessage;
import javax.swing.JFileChooser;

public class C_New_Email {

    static int status;
    static File selectedFile;
    static String email = "coffeebrakeproject@gmail.com";
    static String password = "mypass"; // obviously I am using another one

    public static void sendMail (String toEmail, String subjectEmail, String textEmail) 
   {    

       Properties props = new Properties();
                  props.put("mail.smtp.user", email);
                  props.put("mail.smtp.host", "smtp.gmail.com");
                  props.put("mail.smtp.port", 465);
                  props.put("mail.smtp.starttls.enable","true");
                  props.put("mail.smtp.debug", "true");
                  props.put("mail.smtp.auth", "true");
                  props.put("mail.smtp.socketFactory.port", 465);
                  props.put("mail.smtp.socketFactory.class", "javax.net.ssl.SSLSocketFactory");
                  props.put("mail.smtp.socketFactory.fallback", "false");

       Session session = Session.getDefaultInstance(props,
            new javax.mail.Authenticator() {
                                @Override
                public PasswordAuthentication getPasswordAuthentication() {
                    return new PasswordAuthentication(email, password);
                }
            });         
      try{
         session.setDebug(true);
         // Create a default MimeMessage object.
         MimeMessage message = new MimeMessage(session);

         // Set From: header field of the header.
         message.setFrom(new InternetAddress(email));

         // Set To: header field of the header.
         message.addRecipient(Message.RecipientType.TO,
                                  new InternetAddress(toEmail));

         // Set Subject: header field
         message.setSubject(subjectEmail);

         // Now set the actual message
         message.setText(textEmail);

         MimeBodyPart textBodyPart = new MimeBodyPart();
         textBodyPart.setContent(message, "text/plain");
         // Send message
         Transport transport = session.getTransport("smtps");
         transport.connect ("smtp.gmail.com", 465, email, password);
         transport.sendMessage(message, message.getAllRecipients());
         transport.close();  
         System.out.println("Sent message successfully....");
      }catch (MessagingException mex) {
         mex.printStackTrace();
      }
   }

    public static int returnStatus () {
        return status;
    }

    public static File returnFile () {
        return selectedFile;
    }

    public static void openFileChooser () {
        JFileChooser Attachments = new JFileChooser(".");
        status = Attachments.showDialog(Attachments, null);

        if (status == JFileChooser.APPROVE_OPTION) {
            selectedFile = Attachments.getSelectedFile();
        }
        else if (status == JFileChooser.CANCEL_OPTION) {
            Attachments.setVisible(false);
            selectedFile = null;
        }

    }
} 
```

这是完整的错误输出

```
run:
Email clicked
DEBUG: setDebug: JavaMail version 1.4.7
DEBUG: getProvider() returning javax.mail.Provider[TRANSPORT,smtps,com.sun.mail.smtp.SMTPSSLTransport,Oracle]
DEBUG SMTP: useEhlo true, useAuth true
DEBUG SMTP: trying to connect to host "smtp.gmail.com", port 465, isSSL true
javax.mail.MessagingException: Could not connect to SMTP host: smtp.gmail.com, port: 465;
  nested exception is:
    java.net.SocketException: Software caused connection abort: recv failed
    at com.sun.mail.smtp.SMTPTransport.openServer(SMTPTransport.java:1961)
    at com.sun.mail.smtp.SMTPTransport.protocolConnect(SMTPTransport.java:654)
    at javax.mail.Service.connect(Service.java:295)
    at Controller.C_New_Email.sendMail(C_New_Email.java:72)
    at View.V_New_Email.send_buttonActionPerformed(V_New_Email.java:158)
    at View.V_New_Email.access$000(V_New_Email.java:16)
    at View.V_New_Email$1.actionPerformed(V_New_Email.java:62)
    at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2018)
    at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2341)
    at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:402)
    at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:252)
    at java.awt.Component.processMouseEvent(Component.java:6505)
    at javax.swing.JComponent.processMouseEvent(JComponent.java:3321)
    at java.awt.Component.processEvent(Component.java:6270)
    at java.awt.Container.processEvent(Container.java:2229)
    at java.awt.Component.dispatchEventImpl(Component.java:4861)
    at java.awt.Container.dispatchEventImpl(Container.java:2287)
    at java.awt.Component.dispatchEvent(Component.java:4687)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4832)
    at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4492)
    at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4422)
    at java.awt.Container.dispatchEventImpl(Container.java:2273)
    at java.awt.Window.dispatchEventImpl(Window.java:2719)
    at java.awt.Component.dispatchEvent(Component.java:4687)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:729)
    at java.awt.EventQueue.access$200(EventQueue.java:103)
    at java.awt.EventQueue$3.run(EventQueue.java:688)
    at java.awt.EventQueue$3.run(EventQueue.java:686)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:87)
    at java.awt.EventQueue$4.run(EventQueue.java:702)
    at java.awt.EventQueue$4.run(EventQueue.java:700)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:699)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:242)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:161)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:150)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:146)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:138)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:91)
Caused by: java.net.SocketException: Software caused connection abort: recv failed
    at java.net.SocketInputStream.socketRead0(Native Method)
    at java.net.SocketInputStream.read(SocketInputStream.java:150)
    at java.net.SocketInputStream.read(SocketInputStream.java:121)
    at sun.security.ssl.InputRecord.readFully(InputRecord.java:442)
    at sun.security.ssl.InputRecord.read(InputRecord.java:480)
    at sun.security.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:927)
    at sun.security.ssl.SSLSocketImpl.performInitialHandshake(SSLSocketImpl.java:1312)
    at sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1339)
    at sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1323)
    at com.sun.mail.util.SocketFetcher.configureSSLSocket(SocketFetcher.java:549)
    at com.sun.mail.util.SocketFetcher.createSocket(SocketFetcher.java:354)
    at com.sun.mail.util.SocketFetcher.getSocket(SocketFetcher.java:211)
    at com.sun.mail.smtp.SMTPTransport.openServer(SMTPTransport.java:1927)
    ... 42 more 
```

我试图用谷歌搜索类似问题的问题 [java.net.SocketException：软件导致连接中止：套接字写入错误](https://stackoverflow.com/questions/8247119/java-net-socketexception-software-caused-connection-abort-socket-write-error)

但无论如何都不知道如何解决我的问题。有小费吗？

更新

如果我将端口更改为 587，它将无法进行身份验证并给我一个纯文本错误

```
Email clicked
DEBUG: setDebug: JavaMail version 1.4.7
DEBUG: getProvider() returning javax.mail.Provider[TRANSPORT,smtps,com.sun.mail.smtp.SMTPSSLTransport,Oracle]
DEBUG SMTP: useEhlo true, useAuth false
DEBUG SMTP: trying to connect to host "smtp.gmail.com", port 587, isSSL true
javax.mail.MessagingException: Could not connect to SMTP host: smtp.gmail.com, port: 587;
  nested exception is:
    javax.net.ssl.SSLException: Unrecognized SSL message, plaintext connection?
    at com.sun.mail.smtp.SMTPTransport.openServer(SMTPTransport.java:1961)
    at com.sun.mail.smtp.SMTPTransport.protocolConnect(SMTPTransport.java:654)
    at javax.mail.Service.connect(Service.java:295)
    at Controller.C_New_Email.sendMail(C_New_Email.java:72)
    at View.V_New_Email.send_buttonActionPerformed(V_New_Email.java:158)
    at View.V_New_Email.access$000(V_New_Email.java:16)
    at View.V_New_Email$1.actionPerformed(V_New_Email.java:62)
    at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2018)
    at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2341)
    at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:402)
    at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:252)
    at java.awt.Component.processMouseEvent(Component.java:6505)
    at javax.swing.JComponent.processMouseEvent(JComponent.java:3321)
    at java.awt.Component.processEvent(Component.java:6270)
    at java.awt.Container.processEvent(Container.java:2229)
    at java.awt.Component.dispatchEventImpl(Component.java:4861)
    at java.awt.Container.dispatchEventImpl(Container.java:2287)
    at java.awt.Component.dispatchEvent(Component.java:4687)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4832)
    at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4492)
    at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4422)
    at java.awt.Container.dispatchEventImpl(Container.java:2273)
    at java.awt.Window.dispatchEventImpl(Window.java:2719)
    at java.awt.Component.dispatchEvent(Component.java:4687)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:729)
    at java.awt.EventQueue.access$200(EventQueue.java:103)
    at java.awt.EventQueue$3.run(EventQueue.java:688)
    at java.awt.EventQueue$3.run(EventQueue.java:686)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:87)
    at java.awt.EventQueue$4.run(EventQueue.java:702)
    at java.awt.EventQueue$4.run(EventQueue.java:700)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:699)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:242)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:161)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:150)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:146)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:138)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:91)
Caused by: javax.net.ssl.SSLException: Unrecognized SSL message, plaintext connection?
    at sun.security.ssl.InputRecord.handleUnknownRecord(InputRecord.java:671)
    at sun.security.ssl.InputRecord.read(InputRecord.java:504)
    at sun.security.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:927)
    at sun.security.ssl.SSLSocketImpl.performInitialHandshake(SSLSocketImpl.java:1312)
    at sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1339)
    at sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1323)
    at com.sun.mail.util.SocketFetcher.configureSSLSocket(SocketFetcher.java:549)
    at com.sun.mail.util.SocketFetcher.createSocket(SocketFetcher.java:354)
    at com.sun.mail.util.SocketFetcher.getSocket(SocketFetcher.java:237)
    at com.sun.mail.smtp.SMTPTransport.openServer(SMTPTransport.java:1927)
    ... 42 more 
```

# nhibernate - NHibernate，通过父级添加子级与在子级上设置对父级的引用

> ID：15861698
> 
> 赞同：2
> 
> 时间：2013-04-07T11:09:29.437
> 
> 标签：nhibernate, fluent-nhibernate, nhibernate-mapping

我目前正在做我的第一个 NHibernate 项目。

为了测试它，我正在构建一个实体图，我尝试将该图持久化到数据库中。当我通过 IList 上的 add 将子级添加到父级时，插入在数据库中不起作用，因为我在数据库上得到空列异常（代码片段 1）

1.  当我将孩子的引用设置为它正在工作的父母时（尽管这对我来说感觉不自然，请参阅代码片段
2.  这是正常行为还是我做错了什么？

**片段1：**

```
var country = new Country();
var countryLocale = new CountryLocale { LangCode = "nl-nl", Name = "Nederland" };
country.CountryLocales.Add(countryLocale);

var city = new City();
var cityLocale = new CityLocale { LangCode = "nl-nl", Name = "Amsterdam" };
city.CityLocales.Add(cityLocale);
country.Cities.Add(city); 
```

**片段 1 错误：**

> 无法将值 NULL 插入列“CountryId”、表“ArtWorld.dbo.City”；列不允许空值。INSERT 失败。\r\n语句已终止。

**片段2：**

```
var country = new Country();

var countryLocale = new CountryLocale { Country = country,LangCode = "nl-nl", 
                                        Name = "Nederland" };
var city = new City{Country = country};

var cityLocale = new CityLocale { City = city, LangCode = "nl-nl", 
                                        Name = "Amsterdam" };

session.SaveOrUpdate(country); 
```

城市和 CityLocale 地图：

```
public class CityMap : ClassMap<City>
{
    public CityMap()
    {
        Table("City");
        Id(x => x.Id);
        References(x => x.Country).Column("CountryId").Cascade.SaveUpdate();
        HasMany(x => x.CityLocales).KeyColumn("CityId").Cascade.SaveUpdate();
    }
}

public class CityLocaleMap : ClassMap<CityLocale>
{
    public CityLocaleMap()
    {
        Table("City_Locale");
        Id(x => x.Id);
        Map(x => x.LangCode).Not.Nullable();
        Map(x => x.Name).Not.Nullable();
        References(x => x.City).Column("CityId").Cascade.SaveUpdate();
    }
} 
```

这是我的国家/地区地图：

```
public class CountryMap : ClassMap<Country>
{
    public CountryMap()
    {
        Table("Country");
        Id(x => x.Id);
        HasMany(x => x.Cities).KeyColumn("CountryId").Cascade.SaveUpdate();
        HasMany(x => x.CountryLocales).KeyColumn("CountryId").Cascade.SaveUpdate();
    }

}

public class CountryLocaleMap :ClassMap<CountryLocale>
{
    public CountryLocaleMap()
    {
        Table("Country_Locale");
        Id(x => x.Id);
        Map(x => x.LangCode).Not.Nullable();
        Map(x => x.Name).Not.Nullable();
        References(x => x.Country).Column("CountryId").Cascade.SaveUpdate();
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T13:23:51.650

NHibernate 映射更改：

在`Country`你身边

```
 HasMany(x => x.CountryLocales).KeyColumn("CountryId").Cascade.SaveUpdate() 
```

在 CountryLocale 方面，您有

```
References(x => x.Country).Column("CountryId").Cascade.SaveUpdate(); 
```

应使用 将其中一种关系标记为逆关系`.Inverse()`。

`.Cascase.SaveUpdate()`确保 NHibernate 在将临时子实体添加到父级列表时管理子实体的`CountryLocale`生命`Country`周期`CountryLocales`。如果您不想自己明确处理 CountryLocale 的生命周期，我建议您将多对一方从`CountryLocale`->标记`Country`为`Inverse`。

有两种方法可以使您的参考`Country`变得`CountryLocale`不那么*酸眼*和***更***直观

**如果 Country 管理区域设置**

添加一个方法`Country`来管理正在添加的语言环境。一个客户（用户`Country`并且`CountryLocale`不需要明确地使用引用）

```
public virtual bool AddCountryLocales(CountryLocale locale)
{
        if(!this.CountryLocales.Contains(locale))
        {
              locale.Country =this;
              this.CountryLocales.Add(locale);
              return true;  
        }
        return false;
} 
```

**CountryLocale 更受域驱动**

通过重新定义它，你不能`CountryLocale`没有 a`Country`

```
public class CountryLocale
{
    public CountryLocale(Country country)
    {
         this.Country = country;
    }

    //you need a no-agrument constructor for NHibernate
    protected CountryLocale()
    {
    }
} 
```

# c++ - 比使用流保存提升随机生成器状态更快的替代方案

> ID：15861699
> 
> 赞同：6
> 
> 时间：2013-04-07T11:09:41.953
> 
> 标签：c++, boost, random, stream, state

我需要能够保存/加载这个提升随机发生器的状态：

```
boost::variate_generator<boost::mt19937, boost::random::uniform_real_distribution<> > generator; 
```

我这样做：

```
std::ostringstream content;
content << this->generator.engine(); 
```

问题是，这非常慢，难道没有其他的存储方式吗？（或以本机格式访问随机生成器数据）。这段代码封装在我们的`RandomGenerator`类中，所以它可能有点讨厌。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-30T23:07:47.837

有几种方法，都很老套：

1.  只需使用以下内容获取原始字节：

    ```
    typedef typename std::aligned_storage<sizeof(boost::mt19937)>::type mt19937_storage;
    mt19937_storage storage;
    std::memcpy(&storage, &generator, sizeof(generator));
    //...
    generator.engine() = *reinterpret_cast<boost::mt19937*>(storage); 
    ```

    这适用于内存中的保存和加载，但确切的格式显然取决于编译器和架构，因此如果您需要可移植的持久性，它将无法工作。对于额外的注意点，您可以添加一个`static_assert`类似的东西`is_trivially_copyable`来防止（不太可能）未来对`mt19937`.

2.  假设 Boost 许可证的条款是可接受的（可能是），制作您自己的 Boost`mersenne_twister`模板副本并对其进行调整以接受指向状态数组的指针和对数组索引的引用。然后状态完全在引擎之外，你可以用任何你喜欢的方式管理它。

顺便说一句，如果这是一个非常频繁的操作，并且您不需要 MT19937 的超高维均匀性，您可以考虑使用具有较小状态要求的[不同引擎](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_random/reference.html#boost_random.reference.generators)，例如`taus88`.

# php - 特定 Facebook 元标记的 PHP 方法可以自行工作，但在 Facebook 平台上不起作用

> ID：15861700
> 
> 赞同：0
> 
> 时间：2013-04-07T11:09:46.400
> 
> 标签：php, facebook, dynamic, path, meta-tags

我需要为我网站的某些页面添加特定的 facebook 开放图形元标记。

我的网站基于 PHP“包含”结构。为了为每个页面制作特定的标签，我编写了一个 PHP 代码来读取将要包含的文件并提取特定的标签。像这样，作者可以很容易地在他们的页面中设置特定的标签，我没有必要只为 fb 元标签创建一个数据库。

```
<?php

// DEFAULT TAGS
$fbtitle = 'GB';
$fbimage = 'http://www.mywebsite.com/logo.jpg';
$fbdesc = 'bla bla.';

// READ THE FILE TO BE INCLUDED
$lines = file($sezioni[$controllo1]);
foreach ($lines as $line_num => $line)
{
if(strstr($line, '$fb') && strstr($line, '='))
{               
eval($line);                
}
}
?>

<meta property="og:title" content="<?php print $fbtitle ?>" />
<meta property="og:image" content="<?php print $fbimage ?>" />
<meta property="og:description" content="<?php print $fbdesc ?>" /> 
```

它适用于网站本身。它不在 Facebook 和 Facebook 开发人员上。由于某种原因，Facebook 会在此 php 脚本开始之前自动终止该部分。而且，更重要的是，它通过“file()”给出了这个错误。

```
Warning: file(): Filename cannot be empty in /web/htdocs/www.grandisperanze.com/home/testa.php on line 21 
```

路径/dir_root 问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T19:55:50.280

Facebook 自动正确重定向 $_GET，我的网站就是基于它的。

无论如何，我没有注意到这一点，我将 og:url Facebook 元标记设置为默认值（例如“ [http://www.mywebsite.it](http://www.mywebsite.it) ”）。这就是错误。

解决方案是在 og:url 元标记中使用。

# python - Pylab ImportError - 未加载库 - Mountain Lion 的目录结构令人困惑？

> ID：15861702
> 
> 赞同：3
> 
> 时间：2013-04-07T11:10:02.670
> 
> 标签：python, macos

我在使用我以前的计算机（我以前工作的计算机）时编写了一个小程序，它是一台 Windows 机器。现在，根据一位朋友的建议，我得到了一台 Mac，但我花了很多时间来处理它。

特别是，我的程序使用 pylab（matplotlib 的一部分），并且我在之后出现 ImportError `import pylab`：

```
Error: ~/Documents/New folder/Programowanie/Projekt/SimAccents_v2d.py:2: 
/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/pylab.py:1: 
/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/matplotlib/pylab.py:222: 
/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/matplotlib/mpl.py:2: 
/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/matplotlib/axis.py:14: 
/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/matplotlib/text.py:29: 
/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/matplotlib/backend_bases.py:47: 
/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/matplotlib/textpath.py:11: 
/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/matplotlib/mathtext.py:61: ImportError: dlopen(/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/matplotlib/_png.so, 2): Library not loaded: /opt/X11/lib/libpng15.15.dylib 
```

我在 Python IDLE 中尝试过`import matplotlib`，它有效，所以显然问题出在 pylab，而不是 matplotlib。但是，我尝试`import matplotlib.pyplot`并得到了几乎相同的错误，我猜这是因为它们是 matplotlib 的非常相似的模块/片段。

我在互联网上进行了大量挖掘，发现了一些可能有用的东西，但结果却更加混乱。[这篇文章](https://stackoverflow.com/questions/13292396/error-importing-matplotlib-pyplot)似乎与我的问题相似，作者通过“删除（备份后）我系统的站点包文件夹（/Library/Python/2.7/site-packages）中的matplotlib文件夹”解决了这个问题。我希望这可能起作用的原因是 Python 可能在错误的位置查找文件。

为了检查这一点，我使用了找出 matplotlib 安装位置的方法：

```
>>> import matplotlib
>>> matplotlib.__file__
'/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/matplotlib/__init__.pyc' 
```

...和 ​​matplotlib 的目录位置：

```
>>> matplotlib.get_configdir()
'/Uses/stanislawpstrokonski/.matplotlib' 
```

调查这些路径，我发现第二个是一个隐藏文件夹，它只包含两个文件 - .DS_Store（隐藏）和 fontList.cache。然而，第一个目录更令人毛骨悚然，因为 Python 表示该目录存在，包括上面错误消息的最终“问题”文件：

```
>>> os.path.isfile('/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/matplotlib/_png.so')
True 
```

...但我一直无法在我的 Mac 上找到 ~/Library/Frameworks，因为它都没有出现在 Finder 中，而且 Mac OS 终端似乎也找不到它：

```
Stanislaws-MacBook-Pro:~ stanislawpstrokonski$ cd ~/Library/Frameworks
-bash: cd: /Users/stanislawpstrokonski/Library/Frameworks: No such file or directory 
```

/Library/Python 的情况完全相同——Python 确认了它的存在，但终端否认了它。但是，当我在终端中输入此代码时，它会确定路径确实存在：

```
Stanislaws-MacBook-Pro:~ stanislawpstrokonski$ cd /usr/bin; ls -l python2.7
lrwxr-xr-x  1 root  wheel  75 16 Nov 16:30 python2.7 ->  ../../System/Library/Frameworks/Python.framework/Versions/2.7/bin/python2.7 
```

我检查的另一件事是`Library not loaded:`原始 ImportError 的路径：

```
>>> os.path.isfile('/opt/X11/lib/libpng15.15.dylib')
False 
```

所以也许问题是我错过了这条路？我该怎么办？matplotlib 不是要在安装时对这类东西进行分类吗？

我不知道为什么 pylab 行为不端，当 wxPython 和 numpy（显然，除了 pylab 和 pyplot 之外的 matplotlib）似乎工作正常时。我也对 Mac OS X 的目录结构感到困惑，尽管我仍然觉得这可能是问题的根源。另一个原因可能是我在我的机器上安装了 Python，但我听说 Mac OS 已经安装了 Python，所以这两者可能会以某种方式相互混淆。

很抱歉这篇文章这么长，但是当我不知道确切的问题出在哪里时，我觉得我必须把所有东西都写下来。任何人都可以帮助我让 pylab 工作，并可能在此过程中启发我有关 Mac 的信息吗？我将不胜感激。

ps 我正在使用 Mountain Lion，大约两周前我买了我的 Mac。

pps[这个人](https://stackoverflow.com/questions/14126876/fixing-import-error-when-importing-pylab-on-mountain-lion)似乎也有类似的问题，虽然它是一个不同的位，没有导入......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T06:59:42.910

我在 OS X 上遇到了 matplotlib 类似的问题。你只需要安装 libpng。我用过[brew](http://mxcl.github.io/homebrew/) : `brew install libpng`。

# android - 自定义列表活动分隔线

> ID：15861703
> 
> 赞同：0
> 
> 时间：2013-04-07T11:10:03.637
> 
> 标签：android

我有 ListActivity 由许多行组成，我试图自定义行之间的分隔线，所以我可以给分隔线：角半径，更改它的颜色并应用边框等等，

我试图将它引用到可绘制的形状布局，但它不起作用，强制关闭。

列表活动代码：

```
 public class Rows extends ListActivity {
      String classes[] = { "row1", "row2", "row3",  "row4", "row5"};                    
  @Override
      protected void onCreate(Bundle savedInstanceState) {
        this.requestWindowFeature(Window.FEATURE_NO_TITLE); 
       // TODO Auto-generated method stub
         super.onCreate(savedInstanceState);

  ListView lv = getListView();   
  lv.setCacheColorHint(0);  
  lv.setSelector(android.R.color.transparent); 
  lv.setDivider(new ColorDrawable(this.getResources().getColor(R.drawable.divider)));  
  lv.setPadding(20, 0, 20, 0);
  lv.setVerticalScrollBarEnabled(false);
  lv.setBackgroundResource(R.drawable.list_background);

setListAdapter(new MyArrayAdapter(this, classes));  } 
```

divider.xml 代码：

```
 <?xml version="1.0" encoding="utf-8" ?> 
   <shape xmlns:android="http://schemas.android.com/apk/res/android"
       android:shape="rectangle">
    <stroke android:width="5dp" android:height="5dp" android:color="#B22222" /> 
    <solid android:color="#FFFFFF" /> 
    <padding android:left="10dp"  android:right="10dp"  /> 
    <corners android:radius="10dp" android:bottomRightRadius="5dp"
       android:bottomLeftRadius="5dp" android:topLeftRadius="10dp"
         android:topRightRadius="10dp" /> 
   </shape> 
```

任何帮助将不胜感激，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T11:14:57.567

你不应该`ColorDrawable`首先使用。如果您的列表参数是非条件的，为什么不直接在 XML 中设置它：

```
android:divider="@drawable/divider" 
```

# orchardcms - Orchard MultiTenancy - 租户在哪里？

> ID：15861705
> 
> 赞同：0
> 
> 时间：2013-04-07T11:10:07.073
> 
> 标签：orchardcms, orchardcms-1.6

我是一名开发商，希望拥有一个通过 Orchard 管理租户的房东网站。我启用了 Orchard.MultiTenancy 模块，开始使用它并为我的目的创建了多个站点。但是，我仍然有点赞成编码东西，而不仅仅是通过高级 Orchard 用户对其进行编辑。

试图找到每个租户的 MVC 站点并不成功。有什么建议么 ？

如果一个租户崩溃，是否会导致所有其他租户都崩溃（因为我似乎无法为每个租户找到一个应用程序域）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T01:09:33.697

多租户的全部意义在于通过让多个 Orchard 站点存在于单个 IIS 应用程序中来增加站点密度。每个租户没有一个站点。租户仅在数据库中分开，但都共享相同的文件。

如果租户崩溃，那么，这取决于崩溃。大多数例外甚至不会带走租户。

# java - 比较两个字符串 - 布尔值

> ID：15861707
> 
> 赞同：-7
> 
> 时间：2013-04-07T11:10:31.090
> 
> 标签：java

您将如何完成名为 c 的方法，该方法`ompareTwoStrings()`以二`Strings`加一`boolean`为输入。如果布尔值为真，则此方法比较前两个字符串，忽略大小写考虑（大写/小写）。如果两个字符串的长度相同，则认为它们相等而忽略大小写，并且两个字符串中的相应字符是相等的忽略大小写。

如果布尔值为 false，则此方法应比较两个字符串，如果第一个字符串表示与第二个字符串相同的字符序列，则返回 true，否则返回 false。

注意：`compareTwoStrings("HELLO", "", false)`应该返回false

我尝试使用`a.equals(b)`但无法忽略大写/小写

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-07T11:18:08.220

```
private static boolean compareTwoStrings(String string, String string2, boolean ignoreCase) {
    return ignoreCase ? string.equalsIgnoreCase(string2) : string.equals(string2);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T11:11:07.820

尝试`a.equalsIgnoreCase(b)`在您的方法中应用`a.equals(b)`失败。

`equalsIgnoreCase`将匹配两个字符串，忽略它们的大小写。例如，“Ben Barkay”将匹配“ben barkay”或“beN barkaY”，但不匹配“ben_barkay”或“b3n barkay”

# javascript - 未捕获的类型错误：无法调用未定义的方法“removeClass”，剑道小部件不起作用

> ID：15861708
> 
> 赞同：2
> 
> 时间：2013-04-07T11:10:41.693
> 
> 标签：javascript, jquery, kendo-ui

我正在尝试在我的页面上实现一些 KendoUI Web 小部件，但这些小部件没有按预期工作并且存在以下问题：

1.  `Editor`初始化正常，但是很少有问题，例如当您将鼠标悬停在突出显示的选项上时，但是当您移开时，它应该恢复正常，而事实并非如此
2.  如果我刷新页面几次而不是某些时间`Editor`初始化很好但有时它不会
3.  其他小部件`kendoDatePicker();`，`kendoDropDownList();`甚至没有初始化
4.  我的 JQ 表单验证在此页面上也不起作用

此外，在 chrome 控制台中，我 `Uncaught TypeError: Cannot call method 'removeClass' of undefined`在第 23679 行出现以下错误，`kendo.web.js`其中指出：

```
if (value !== DropDownList.fn.value.call(that)) {
            that.text(that.options.title);
            that._current.removeClass("k-state-selected");//This is line # 23679
            that.current(null);
            that._oldIndex = that.selectedIndex = -1;
        } 
```

我在页面上包含以下脚本：

```
<script src="/Scripts/jquery-1.7.1.js"></script>
<script src="/Scripts/jquery.unobtrusive-ajax.min.js"></script>
<script src="/Scripts/jquery.validate.min.js"></script>
<script src="/Scripts/modernizr-2.5.3.js"></script>
<script src="/Scripts/kndu/kendo.web.js"></script>
…
….

<script>
    $(document).ready(function () {
        $("#editor").kendoEditor({
            tools: [
                "bold",
                "italic",
                "underline",
                "strikethrough",
                "justifyLeft",
                "justifyCenter",
                "justifyRight",
                "justifyFull", "insertUnorderedList",
                "insertOrderedList",
                "formatBlock",
                "createLink",
                "unlink",
                "insertImage",
                "insertHtml",
                "viewHtml",
                {
                    name: "customTool",
                    tooltip: "Format as Code",
                    exec: function (e) {
                        var editor = $(this).data("kendoEditor");
                        editor.exec("inserthtml", { value: "<pre>" });
                    }
                }],

        });
        $("#date").kendoDatePicker();
        $("#categry").kendoDropDownList();

        $("#newpost").validate({
            rules: {
                ttle: {
                    maxlength: 150,
                    required: true,
                    onlyChars: true
                },
                smmry: {
                    maxlength: 250,
                    required: true
                },
                editor: {
                    maxlength: 35,
                    required: true
                },
                categry: {
                    required: true
                }
            }
        });
    });
    $.validator.addMethod('onlyChars', function (value) {
        return /^[a-zA-Z ]+$/.test(value);
    }, 'Please enter a valid name with only alphabets');
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T20:42:14.143

关于`insertHTML`文档在[这里](http://docs.kendoui.com/api/web/editor#configuration-tools)说：

> insertHtml 工具需要一组文本值对。一个分隔符可以包含多次。

所以你应该有类似的东西：

```
$("#editor").kendoEditor({
    tools: [
        ...
        "insertHtml",
        ...
    ],
    insertHtml: [
        { text: "label 1", value: "<p>snippet 1</p>" },
        { text: "label 2", value: "<p>snippet 2</p>" }
    ]
}); 
```

# opengl - OpenGL分离程序阶段

> ID：15861712
> 
> 赞同：1
> 
> 时间：2013-04-07T11:10:53.663
> 
> 标签：opengl, graphics, opengl-4

我正在探索相对较新的功能 GL_ARB_separate_program_object。我理解的是我必须创建一个管道对象，该对象应该包含来自阶段的着色器，这些着色器通过 glUseProgramStages 映射到那里

这让我想到了使用多个着色器的两种可能性：

1.使用来自一次映射到每个管道的变体顶点/片段着色器对（暂时不使用其他着色器类型）创建多个管道。

2.创建单个管道并在运行时将映射切换到不同的着色器使用

```
glUseProgramStages 
```

我最关心的是性能。哪个选项更适合性能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T13:06:09.413

您的问题无法真正得到回答，因为它会因驱动程序实现等而异。但是，功能的事实和历史应该是有用的。

EXT_separate_shader_objects 是这个功能的第一个化身。它们之间最大的区别在于：您不能在 EXT 版本中使用用户定义的变量。您必须使用旧的兼容性输入/输出，例如`gl_TexCoord`.

[EXT_separate_shader_objects 规范中的问题 #2](http://www.opengl.org/registry/specs/EXT/separate_shader_objects.txt) ~~试图证明这种难以理解的疏忽是合理~~的，解释了以下原因：

> 从性能的角度来看，尝试支持任意单独着色器的“按名称会合”是不可取的，因为在没有特殊链接步骤的情况下，单独的着色器不会自然地编译以匹配它们不同的同名输入和输出。这种特殊的链接会引入额外的验证开销来绑定单独的着色器。链接本身必须推迟到 glBegin 时间，因为从一组一致的着色器过渡到另一组时，单独的着色器将不匹配。当输入和输出变量的名称匹配但它们的类型不匹配时，此特殊链接仍会产生错误或未定义的行为。

这表明不依赖名称匹配的原因~~，除了无能之外，~~还与性能有关（如果你看不出来，我对 EXT_SSO 的评价不高）。“按名称会合”的性能来自于必须在每次绘制调用时执行，而不是能够执行一次。

ARB_separate_shader_objects 将程序集合封装在一个对象中。因此，该对象可以存储所有“集合点”数据。第一次绘制调用可能会较慢，但随后使用同一 PPO 会很快，只要您不将新程序附加到它。

所以我会以此为证据，证明 PPO 应该在其上设置程序，然后不理会。通常，应尽可能避免修改附件对象。这就是为什么我们鼓励您不要在 FBO 中添加或删除纹理/渲染缓冲区。

# android - Android：调用 textview.setBackgroundResource 两次更改 textview 大小

> ID：15861713
> 
> 赞同：4
> 
> 时间：2013-04-07T11:10:54.430
> 
> 标签：android, resize, textview, background-image

我有一个九补丁图像，我在activity.onCreate() 期间为我的textview 设置了背景。Textview 具有高度+宽度的 WRAP_CONTENT 布局。它是从代码创建的，而不是从 XML 创建的。

```
_btnCurrent.setBackgroundResource(R.drawable.button_menu_off); 
```

这工作正常。我有另一个九补丁图像，大小相同，唯一不同的是它的颜色。现在，如果我稍后用另一张图片调用 setBackgroundResource，它将增加 textview 的高度，几乎加倍。另一个调用发生在 textview.onClick()

```
_btnCurrent.setBackgroundResource(R.drawable.button_menu_on); 
```

如果我再次调用它（在文本视图中再次单击），则没有效果。这很好，我想它也会发生在第一次点击时。所以：

```
Activity.onCreate()
{
    btnCurrent= new TextView(this);
    LinearLayout.LayoutParams lp = new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);

    btnCurrent.setBackgroundResource(R.drawable.button_menu_hs_off);

    btnCurrent.setPadding(15, 5, 15, 5);
    btnCurrent.setGravity(Gravity.CENTER);

    btnCurrent.setText( GetString(id) );        
    btnCurrent.setOnClickListener(this);

}

onClick()
{
    _btnCurrent.setBackgroundResource(R.drawable.button_menu_on);
}

onCreate();  // -> called by Android during startup -> OK
....
onClick();   // called when user clicks on it -> btnCurrent has double height
....
onClick();   // called when user clicks again -> btnCurrent has same double height, no change in size
....
onClick();   // called when user clicks again -> btnCurrent has same double height, no change in size 
```

我试图设置 _btnHSCurrent.setBackgroundResource(0); 在设置新图像之前，但没有帮助。

为什么会这样？

@编辑

我做了：_btnCurrent.setBackgroundResource(R.drawable.button_menu_off); 在 Activity.onCreate() 期间。

然后在 textview.onClick() 中，我调用：

_btnCurrent.setBackgroundResource(R.drawable.button_menu_on);

这将使高度加倍。再次单击，不再更改大小，仅在第一次单击时。

![在此处输入图像描述](https://i.stack.imgur.com/r4c5Y.png) ![在此处输入图像描述](https://i.stack.imgur.com/bGa9w.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-07T12:01:25.607

这看起来像我在填充时遇到的类似问题。调用`setBackgroundResource`填充后似乎发生了变化，而不是使用我在`styles.xml`. 效果看起来好像大小改变了一样，但实际上是填充。

我的解决方法是在更改背景后调用`setPadding`按钮，例如：

```
button.setBackgroundResource(R.drawable.btn_add);
button.setPadding(10, 15, 10, 15); 
```

这不是很好，但它有效。

我希望这有帮助！

# c# - RestSharp 和 Twitter API 1.1：如何正确 URLEncode 状态更新文本？

> ID：15861722
> 
> 赞同：8
> 
> 时间：2013-04-07T11:11:34.860
> 
> 标签：c#, oauth, twitter, twitter-oauth, restsharp

我正在尝试使用[RestSharp](http://restsharp.org/)从我的网络应用程序发布 Twitter 状态。以下代码完美运行：

```
var status = "I am fine with posting this status.";

var client = new RestClient("https://api.twitter.com");

// The OAuth keys/tokens/secrets are retrieved elsewhere
client.Authenticator = OAuth1Authenticator.ForProtectedResource(
    _consumerKey, _consumerSecret, _accessToken, _accessTokenSecret
);

var request = new RestRequest("/1.1/statuses/update.json", Method.POST);
request.AddParameter("status", status, ParameterType.GetOrPost);

var response = client.Execute(request); 
```

但是，如果我在状态文本中包含以下任何字符，此代码将失败并出现身份验证错误：`! * ' ( )`

通过*大量*的论坛拖网，我推断这与 OAuth 签名编码与 POST 参数的编码不匹配有关。我[在 SO 上找到了这个问题](https://stackoverflow.com/questions/10394799/restsharp-urlencode-in-signature-base-generation-returns-invalid-string)，但是在 GitHub 上搜索 RestSharp 问题并没有发现任何帮助。

我可以[在 RestSharp 源](https://github.com/restsharp/RestSharp/blob/master/RestSharp/Authenticators/OAuth/OAuthTools.cs)`UrlEncodeRelaxed`代码(来自 RestSharp）在传递之前，例如：

```
var status = "I'm NOT fine with posting this status.";

string[] UriRfc3986CharsToEscape = new[] { "!", "*", "'", "(", ")" };
string[] UriRfc3968EscapedHex = new[] { "%21", "%2A", "%27", "%28", "%29" };

for (var i = 0; i < UriRfc3986CharsToEscape.Length; i++)
    status = status.Replace(UriRfc3986CharsToEscape[i], UriRfc3968EscapedHex[i]); 
```

但这也不起作用（我仍然收到身份验证错误）。

这里实际上是什么问题，我应该怎么做才能正确编码状态？或者这是一个 RestSharp 错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-09-26T02:05:03.543

您是否尝试过使用 .NET Framework 中内置的 HttpUtility 类？您可以在 System.Web 命名空间中找到它。

```
string urlEncodedText = HttpUtility.UrlEncode("Your text goes here"); 
```

[MSDN](http://msdn.microsoft.com/en-us/library/system.web.httputility(v=vs.110).aspx)

* * *

这绝对是一个 RestSharp 问题......我玩了一段时间，问题是无论如何都没有禁用标准百分比编码......

```
void Main()
{
    var ProtectedChars = "0x30, 0x31, 0x32, 0x33, 0x34, 0x35, 0x36, 0x37, 0x38, 0x39, 0x41, 0x42, 0x43, 0x44, 0x45, 0x46, 0x47, 0x48, 0x49, 0x4A, 0x4B, 0x4C, 0x4D, 0x4E, 0x4F, 0x50, 0x51, 0x52, 0x53, 0x54, 0x55, 0x56, 0x57, 0x58, 0x59, 0x5A, 0x61, 0x62, 0x63, 0x64, 0x65, 0x66, 0x67, 0x68, 0x69, 0x6A, 0x6B, 0x6C, 0x6D, 0x6E, 0x6F, 0x70, 0x71, 0x72, 0x73, 0x74, 0x75, 0x76, 0x77, 0x78, 0x79, 0x7A".Replace(" 0x", "%").Split(',');
    var client = new RestClient("https://api.twitter.com");

    client.Authenticator = OAuth1Authenticator.ForProtectedResource(
        "_consumerKey", "_consumerSecret", "_accessToken", "_accessTokenSecret"
    );

    var status = "Dogs, Cats & Mice";

    string newStatus = string.Empty;

    foreach (char c in status)
    {
        var charBytes = Encoding.UTF8.GetBytes(c.ToString());
        var tempText = string.Empty;

        for (int i = 0; i < charBytes.Count(); i++)
        {
            byte b = charBytes[i];
            string hex = "%" + b.ToString("X2");
            tempText += hex;
        }

        if (ProtectedChars.Any(x => x == tempText))
        {
            newStatus += c;
        }
        else
        {
            newStatus += string.Format("{0:X2}", tempText);
        }
    }

    var request = new RestRequest("/1.1/statuses/update.json", Method.POST);
    request.AddParameter(new Parameter{ Name = "status", Type = ParameterType.GetOrPost, Value = newStatus } );

    var response = client.Execute(request);

} 
```

在 Fiddler 中，我一直在监视发往 Twitter 的请求……这就是我发现的……

```
POST https://api.twitter.com/1.1/statuses/update.json HTTP/1.1
Authorization: /* auth data */
Accept: application/json, application/xml, text/json, text/x-json, text/javascript, text/xml
User-Agent: RestSharp/104.4.0.0
Content-Type: application/x-www-form-urlencoded
Host: api.twitter.com
Content-Length: 44
Accept-Encoding: gzip, deflate

status=Dogs%252C%2520Cats%2520%2526%2520Mice 
```

Http 请求的问题在于我们请求的主体……如果我提供的值没有被触及……那么 Twitter 就会识别出该消息并为我们更新我们的状态……

```
status=Dogs%252C%2520Cats%2520%2526%2520Mice  <--- Altered by RestSharp
status=Dogs%2C%20Cats%20%26%20Mice            <--- What I initially sent 
```

# html - 从页面顶部删除白条

> ID：15861723
> 
> 赞同：1
> 
> 时间：2013-04-07T11:11:43.267
> 
> 标签：html, css

我有以下代码，将 html 和正文边距和填充设置为零，但它们仍然是顶部的差距，为什么？：

![在此处输入图像描述](https://i.stack.imgur.com/1Ri2Y.png)

**CSS**

```
html, body {
    margin: 0;
    padding: 0;
}

.mobile body {
    overflow: hidden;
}

.mobile #wrapper {
    position: absolute;
    top: 0;
    bottom: 0;
    left: 0;
    width: 100%;
}

.mobile #scroller {
    height: 3000px;
}

.header {
    background: url(../img/dark_exa.png) repeat;
    height: 300px;
    margin: 0 auto;
    text-align: center;
}

.header h1 {
    color: white;
} 
```

**HTML**

```
<!doctype html>
<html>
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />
        <title>Mobile Parallax with Stellar.js - Demo</title>
        <link rel="stylesheet" type="text/css" href="css/normalize.css" />
        <link rel="stylesheet" type="text/css" href="css/style.css" />
    </head>
    <body>

        <div id="wrapper">
            <div id="scroller">

                <div class="header">
                    <h1>Product Title</h1>
                </div>

            </div>
        </div>

        <script src="lib/jquery.min.js" ></script>
        <script src="lib/jquery.stellar.min.js"></script>
        <script src="lib/iscroll.js"></script>
        <script src="script.js"></script>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T11:15:21.927

添加`margin: 0;`到`.header h1`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T11:17:01.817

您的 .mobile 是用 CSS 编写的，但不是用 HTML 编写的。这可能是问题，因为没有应用任何 CSS

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-07T12:05:01.820

在 css 中添加它以使所有元素的边距 = 0

```
* { margin: 0; } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-07T11:16:37.340

您的`<h1>`标签自动分配了一个边距属性，并且该边距正在创建白色“条”。如果你删除上边距，用这样的 CSS 说......

```
.header h1 {
    margin-top:0;
} 
```

...空白应该消失。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-07T11:20:21.423

这是因为 h1 边距。在 .heading h1 中添加以下 2 行即可解决问题。

```
.header h1 {
    margin: 0;
    padding: 21px 0;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-02-21T18:50:50.590

我用这种方式。这个对我有用。

```
.ui-bar-inherit{border:0px !important;} 
```

# entity-framework - Entity Framework中POCO类之间的关系，代码优先

> ID：15861725
> 
> 赞同：0
> 
> 时间：2013-04-07T11:12:09.170
> 
> 标签：entity-framework, entity-framework-4.1, entity-relationship

我重新实现了由 SimpleMembershipProvider 自动创建的数据库。实际上我有一个关于 2 个表链接的问题：

```
create table user_profiles
(
  id       int not null identity, /* PK */
  username varchar(128) not null,
  .........
);

create table membership
(
  userid int not null,   /* FK to user_profile. */
  ..............
); 
```

我想在初始 POCO 类之间创建关系：

```
public class UserProfile : BaseType
{
    public virtual Membership Membership { get; set; }
    ......
    public string UserName { get; set; }
    ......
}

public class Membership
{
    public virtual int UserId { get; set; }
    public virtual UserProfile User { get; set; }
    ......
} 
```

在用作 PK 的`Membership`属性中，与数据库中的 FK 同时使用。`UserId`我尝试了以下配置：

```
public class UserProfileConfiguration : EntityTypeConfiguration<UserProfile> {
    public UserProfileConfiguration() {
        HasKey(k => k.Id);
        Map(m => m.ToTable("user_profiles"));

        HasRequired(t => t.Membership)
            .WithRequiredPrincipal(t1 => t1.User)
            .Map(m => m.MapKey("userid"));
        ....
    }
}

public class MembershipConfiguration : EntityTypeConfiguration<Membership> {
    public MembershipConfiguration() {
        HasKey(k => k.UserId);
        Map(m => m.ToTable("webpages_Membership"));

        //Property(x => x.UserId).HasColumnName("userid");
    }
} 
```

当`MembershipConfiguration`注释掉的行（如示例中）命令`Add-Migration`在迁移命令中创建 2 条记录：

```
c => new {
  UserId = c.Int(nullable: false, identity: true),
  .............
  userid = c.Int(nullable: false), 
```

如果我取消注释命令失败并显示错误消息`Each property name in a type must be unique. Property name 'userid' was already defined.`

我如何声明所需的结果，同时使用列“userid”作为 PK 和 FK？

# php - PHP 和 SQL 返回重复结果

> ID：15861730
> 
> 赞同：0
> 
> 时间：2013-04-07T11:12:51.850
> 
> 标签：php, sql, phpmyadmin, duplicates

我正在尝试创建一个订单历史页面。根据 orderdetails_tbl 中的 order_ID 查找所有应用程序的 SQL 语句。这是SQL。

```
SELECT * FROM applications_tbl INNER JOIN orderdetails_tbl ON orderdetails_tbl.app_ID = applications_tbl.app_ID WHERE orderdetails_tbl.order_ID = $orderID 
```

使用此 PHP 显示结果。

```
$result = mysql_query("SELECT * 
FROM applications_tbl
INNER JOIN orderdetails_tbl ON orderdetails_tbl.app_ID = applications_tbl.app_ID WHERE orderdetails_tbl.order_ID = ".$order_ID."");
$row = mysql_fetch_assoc($result);
echo "<table>";
do { ?>

    <tr style="background-color:#fff">
    <td> <img src="getimage.php?ID=<?php echo $row['app_ID']; ?>" width="100" height="100" alt="IMAGE" /></td>
           <td width="20%"><?php echo $row['app_name']; ?></td>
           <td><?php echo $row['app_desc']; ?></td>
           <td width="15%"><?php echo $row['app_cost']; ?></td>
     </tr>    
     <?php  
 } while ($row = mysql_fetch_assoc($result)); 
```

SQL 返回正确的值，PHP 正确显示它们。我的问题是它在网页上返回许多重复的结果。它似乎是随机的，但我注意到顺序中的应用程序/项目越多，重复的结果就越多。在 phpMyAdmin 中，当我运行 SQL 时，它不会显示重复项。

为你的时间喝彩。任何建议都将受到极大的欢迎！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T11:20:44.413

使用 GROUP BY

```
$result = mysql_query("SELECT * FROM applications_tbl
INNER JOIN orderdetails_tbl ON orderdetails_tbl.app_ID = applications_tbl.app_ID 
WHERE orderdetails_tbl.order_ID = ".$order_ID." GROUP BY app_ID"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T11:29:53.143

一个技巧是使用别名来使 sql-statements 更具可读性，如下所示：

```
$result = mysql_query("SELECT * FROM applications_tbl at INNER JOIN orderdetails_tbl od ON od.app_ID = at.app_ID WHERE od.order_ID = ".$order_ID); 
```

但是要回答您的问题，您可以在一个字段上使用 DISTINCT 并列出您希望包含在记录集中的字段，或者在 SQL 语句的末尾添加 GROUP BY 语句。

**不同：（**示例）

```
$result = mysql_query("SELECT DISTINCT at.id, od.app_ID FROM applications_tbl at INNER JOIN orderdetails_tbl od ON od.app_ID = at.app_ID WHERE od.order_ID = ".$order_ID); 
```

或者

**分组依据**（示例）

```
$result = mysql_query("SELECT * FROM applications_tbl at INNER JOIN orderdetails_tbl od ON od.app_ID = at.app_ID WHERE od.order_ID = ".$order_ID . " GROUP BY at.id"); 
```

$order_ID 的实际价值是多少？（我问是因为您说您有相同的查询，并且在浏览器中查看时只会得到重复。看起来很奇怪）

# linux - 在 Gentoo Linux 发行版上构建和安装 NodeJ

> ID：15861732
> 
> 赞同：0
> 
> 时间：2013-04-07T11:13:08.210
> 
> 标签：linux, node.js, gentoo

我正在尝试从我的 Gentoo Linux 发行版构建 Nodejs，但出现以下错误：

```
Build failed:  -> task failed (err #1): {task... etc.} 
```

我尝试了许多教程或命令，但我不是服务器管理专家。有人在 Gentoo 上成功安装了 nodejs 吗？如果是，通过的命令是什么？

先感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-10T06:08:27.417

有时，如果稳定版没有构建，您可能想尝试一个包的“测试”版本。避免使用不稳定的软件包更安全，但在紧要关头，您可以尝试：

```
emerge flaggie
flaggie net-libs/nodejs -- +~amd64 # or ~x86
emerge =net-libs/nodejs-0.10.26 # works for me^tm 
```

# enums - 从一组值中检索枚举

> ID：15861735
> 
> 赞同：1
> 
> 时间：2013-04-07T11:13:15.103
> 
> 标签：enums, mapping

我有一个这样的枚举：

```
public enum Operation {
   ACK(1, false, false), NACK(255, false, false);
   ...
} 
```

现在我有松散的值说`255`, `false`, `false`，我想从中检索一个`NACK`枚举。

我需要一个函数`f`，以便：

```
f(255, false, false) returns NACK
f(1, false, false) returns ACK 
```

我该怎么做呢？

# jquery - 将 3 个 div 居中以制作幻灯片

> ID：15861736
> 
> 赞同：0
> 
> 时间：2013-04-07T11:13:18.860
> 
> 标签：jquery, html, css, twitter-bootstrap

我正在使用 twitter bootstrap，我想制作几张图片的幻灯片：

我已经设法使用以下代码在模态 div 中显示我需要的图像：

```
<div id="imgContainer" class="modal hide fade in" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="false" style="display: block;">
  <div id="stanga" style="height:100%;">
    <img src="./img/stanga.png" style="padding-top:50%;position:absolute;">
  </div>
  <div id="pozica">
    <img src="./lucrari/BRD1.png">
  </div>
  <div id="dreapta" style="float:right;">
    <img src="./img/dreapta.png">
  </div>
</div> 
```

我得到的结果是这样的：

![坏 div](https://i.stack.imgur.com/v4B2E.png)

我怎样才能实现这样的目标？我的意思是主照片和左右按钮居中？

![在此处输入图像描述](https://i.stack.imgur.com/UC7kR.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T11:14:56.830

尝试每次更改背景的 CSS3 动画（CSS 关键帧）。JQuery 也有为此创建幻灯片的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T11:24:31.390

CSS代码：

```
.modal hide fade in{
position:relative;
}
#stanga , #pozica , #dreapta{
position:absolute;
left:50%;
right:50%;
top:50%;
bottom:50%;
} 
```

对于下一个和上一个按钮，您可以使用：

```
#nxt{
float:right;
z-index:100
}
#prv{
float:left;
z-index:100
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-07T11:36:18.063

**在上一个**和**下一个**箭头上使用绝对位置应该可以解决问题

[**这是一个例子**](http://jsfiddle.net/yPQPx/1/)

**CSS：**

```
#stanga img{
margin : 30px;
}

#pozica,#dreapta{
  position: absolute;
  top: 110px
}

#dreapta{
    right: 5px;
}
#pozica{
    left: 5px;
} 
```

# python - 删除计数器中计数小于阈值的对象。

> ID：15861739
> 
> 赞同：30
> 
> 时间：2013-04-07T11:13:43.313
> 
> 标签：python

我有一个计数器声明为：`main_dict = Counter()`并且值添加为`main_dict[word] += 1`. 最后，我想删除频率小于 15 的所有元素。是否有任何功能`Counters`可以做到这一点。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-07T11:52:13.327

```
>>> from collections import Counter
>>> counter = Counter({'baz': 20, 'bar': 15, 'foo': 10})
>>> Counter({k: c for k, c in counter.items() if c >= 15})
Counter({'baz': 20, 'bar': 15}) 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-04-07T11:18:37.657

不，您需要手动删除它们。使用`itertools.dropwhile()`可能会使这更容易一些：

```
from itertools import dropwhile

for key, count in dropwhile(lambda key_count: key_count[1] >= 15, main_dict.most_common()):
    del main_dict[key] 
```

示范：

```
>>> main_dict
Counter({'baz': 20, 'bar': 15, 'foo': 10})
>>> for key, count in dropwhile(lambda key_count: key_count[1] >= 15, main_dict.most_common()):
...     del main_dict[key]
... 
>>> main_dict
Counter({'baz': 20, 'bar': 15}) 
```

通过使用`dropwhile`，您只需测试计数为 15 或以上的键；之后它将放弃测试并通过所有内容。这适用于排序`most_common()`列表。如果有很多值低于 15，则可以节省所有这些测试的执行时间。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2013-04-07T11:50:05.713

Another method:

```
c = Counter({'baz': 20, 'bar': 15, 'foo': 10})
print Counter(el for el in c.elements() if c[el] >= 15)
# Counter({'baz': 20, 'bar': 15}) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-04-23T15:16:57.453

**阈值为零时**的优雅解决方案：

```
main_dict += Counter() 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-02-05T16:18:26.143

我可以建议另一种解决方案吗

```
from collections import Counter
main_dict = Counter({'baz': 20, 'bar': 15, 'foo': 10})  
trsh = 15

main_dict = Counter(dict(filter(lambda x: x[1] >= trsh, main_dict.items())))
print(main_dict)

>>> Counter({'baz': 20, 'bar': 15}) 
```

我也有同样的问题，但我需要从 Counter 中返回所有键的列表，其值超过某个阈值。去做这个

```
keys_list = map(lambda x: x[0], filter(lambda x: x[1] >= trsh, main_dict.items()))
print(keys_list) 

>>> ['baz', 'bar'] 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-04-23T19:33:33.600

如何过滤计数器中计数大于或小于阈值的项目的示例

```
from collections import Counter
from itertools import takewhile, dropwhile

data = (
    "Here's a little song about Roy G. Biv. "
    "He makes up all the colors that you see where you live. "
    "If you know all the colors, sing them with me: "
    "red, orange, yellow, green, blue, indigo, violet all that you see."
)

c = Counter(data)

more_than_10 = dict(takewhile(lambda i: i[1] > 10, c.most_common()))
less_than_2 = dict(dropwhile(lambda i: i[1] >= 2, c.most_common()))

print(f"> 10 {more_than_10} \n2 < {less_than_2}") 
```

输出：

```
> 10 {' ': 40, 'e': 23, 'o': 16, 'l': 15, 't': 12} 
2 < {"'": 1, 'R': 1, 'G': 1, 'B': 1, 'p': 1, 'I': 1, 'f': 1, ':': 1} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-12-03T05:29:30.273

只需对字典项目进行列表理解：

```
[el for el in c.items() if el[1] >= 15] 
```

# javascript - 如何使用 HTML 5、JavaScript 和 CSS 为 epub 制作控件？

> ID：15861748
> 
> 赞同：0
> 
> 时间：2013-04-07T11:14:56.107
> 
> 标签：javascript, css, html, epub

好的，所以我们必须使用 HTML5、JS 和 CSS 实现一个在线电子阅读器。到目前为止，我对这 3 种技术有很好的了解。基本上需要发生的是用户从链接库中选择一本书，该链接将他带到一个页面来阅读该书。

显然，epub 文件应该加载到客户端计算机上的内存中，解压缩然后显示在网页上。到目前为止，我没有太多问题，真正让我绞尽脑汁的是接下来会发生什么。

因此，所有章节都分为单独的 xhtml 页面以及封面、标题页、目录，这使得创建指向它们的可导航动态链接并不难。但是，我们还必须提供控件来更改字体、颜色和在页面之间导航。我该如何实施？

执行此操作的 JS 是否出现在加载 epub 文件的页面中，如果是这样，我如何编写 JS 来更改在 JS 所在页面中加载的页面的属性？

我想不出另一种方法来做到这一点，除了在每一章上放一个小的 JS 小部件，但是“翻页”的问题仍然存在，因为我不知道一页从哪里开始，另一页在哪里结束，因为这是'未在 xhtml 文件中指定。

如果我不清楚或没有提供足够的信息，我很抱歉，虽然我已经使用过很多 JS、HTML5 和 CSS，但整个 epub 对我来说还是很新的。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-06T23:52:04.957

我会查看为数不多的致力于网络上 epub 的开源项目之一，以帮助您入门。你似乎问了很多问题，所以我建议你看看其他人是如何解决这些问题的，而不是具体回答。

首先，您应该查看 Readium：[http](http://readium.org/) ://readium.org/它们具有您描述的许多功能（更改字体、从图书馆挑选一本书等）

接下来我会看看我的个人项目[https://github.com/fchasen/epub.js](https://github.com/fchasen/epub.js)

我们做的事情略有不同，但它再次成为了解我们如何处理一些挑战的好地方，这样您就可以带着更具体的问题回来。

# javascript - 使用字符串或日期作为对象键进行记忆。

> ID：15861751
> 
> 赞同：6
> 
> 时间：2013-04-07T11:15:06.583
> 
> 标签：javascript, performance

我有一个日期数组，我需要多次为这些日期执行一些计算。所以我决定使用 memoization 来缓存结果。

但是，我不确定是否可以使用`Date`object 作为键。我希望比较日期可能比比较字符串慢，因此使用日期的字符串表示形式作为键可能是有意义的。

所以我的问题是，哪个更好地用作键、字符串或日期来访问 JavaScript 对象中的值。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-07T11:18:17.067

我认为您可以改用[getTime](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/getTime)方法来比较 Date 对象的数字版本。应该更快，加上跨浏览器和 SO 的字符串表示的 IMVHO 更可靠，以及它们的语言环境，并且也更容易操作。

如果您不使用[Map](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Map)或[WeakMap](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/WeakMap)而只是使用普通对象，请注意将`Date`对象作为对象的键传递将自动获取它的字符串版本（`toString`将被调用）：

```
var now = {}; 
now[new Date()] = true;

console.log(Object.keys(now)); // ["Sun Apr 07 2013 13:21:17 GMT+0200 (CEST)"] 
```

# c - -fPIC 标志可以增加多少开销？

> ID：15861759
> 
> 赞同：36
> 
> 时间：2013-04-07T11:16:45.260
> 
> 标签：c, performance, gcc

## 问题

我正在测试一个计算 Mandelbrot 分形的简单代码。我一直在检查它的性能，具体取决于检查点是否属于 Mandelbrot 集的函数中的迭代次数。`-fPIC`令人惊讶的是，添加标志后我的时间有了很大的不同。从我读到的开销通常可以忽略不计，我遇到的最高开销约为 6%。我测量了大约 30% 的开销。任何建议将被认真考虑！

## 我的项目详情

我使用`-O3`标志，gcc 4.7.2，Ubuntu 12.04.2，x86_64。结果如下所示

```
    #it​​er C (fPIC) CC/C(fPIC)
    1 0.01 0.01 1.00
    100 0.04 0.03 0.75
    200 0.06 0.04 0.67
    500 0.15 0.1 0.67
    1000 0.28 0.19 0.68
    2000 0.56 0.37 0.66
    4000 1.11 0.72 0.65
    8000 2.21 1.47 0.67
   16000 4.42 2.88 0.65
   32000 8.8 5.77 0.66
   64000 17.6 11.53 0.66

```

我使用的命令：

```
gcc -O3 -fPIC fractalMain.c fractal.c -o ffpic
gcc -O3 fractalMain.c fractal.c -o f 
```

## 代码：fractalMain.c

```
#include <time.h>
#include <stdio.h>
#include <stdbool.h>
#include "fractal.h"

int main()
{
    int iterNumber[] = {1, 100, 200, 500, 1000, 2000, 4000, 8000, 16000, 32000, 64000};
    int it;
    for(it = 0; it < 11; ++it)
    {
        clock_t start = clock();
        fractal(iterNumber[it]);
        clock_t end = clock();
        double millis = (end - start)*1000 / CLOCKS_PER_SEC/(double)1000;
        printf("Iter: %d, time: %lf \n", iterNumber[it], millis);
    }
    return 0;
} 
```

## 代码：分形.h

```
#ifndef FRACTAL_H
#define FRACTAL_H
    void fractal(int iter);
#endif 
```

## 代码：分形.c

```
#include <stdio.h>
#include <stdbool.h>
#include "fractal.h"

void multiplyComplex(double a_re, double a_im, double b_re, double b_im, double* res_re, double* res_im)
{
    *res_re = a_re*b_re - a_im*b_im;
    *res_im = a_re*b_im + a_im*b_re;
}

void sqComplex(double a_re, double a_im, double* res_re, double* res_im)
{
    multiplyComplex(a_re, a_im, a_re, a_im, res_re, res_im);
} 

bool isInSet(double P_re, double P_im, double C_re, double C_im, int iter)
{
    double zPrev_re = P_re;
    double zPrev_im = P_im;
    double zNext_re = 0;
    double zNext_im = 0;
    double* p_zNext_re = &zNext_re;
    double* p_zNext_im = &zNext_im;
    int i;  
    for(i = 1; i <= iter; ++i)
    {
        sqComplex(zPrev_re, zPrev_im, p_zNext_re, p_zNext_im);
        zNext_re = zNext_re + C_re;
        zNext_im = zNext_im + C_im;
        if(zNext_re*zNext_re+zNext_im*zNext_im > 4)
        {
            return false;
        }
        zPrev_re = zNext_re;
        zPrev_im = zNext_im;
    }
    return true;
}

bool isMandelbrot(double P_re, double P_im, int iter)
{
    return isInSet(0, 0, P_re, P_im, iter);
}
void fractal(int iter)
{
    int noIterations = iter;
    double xMin = -1.8;
    double xMax = 1.6;
    double yMin = -1.3;
    double yMax = 0.8;
    int xDim = 512;
    int yDim = 384;
    double P_re, P_im;
    int nop;
    int x, y;

    for(x = 0; x < xDim; ++x)
        for(y = 0; y < yDim; ++y)
        {
            P_re = (double)x*(xMax-xMin)/(double)xDim+xMin;
            P_im = (double)y*(yMax-yMin)/(double)yDim+yMin;
            if(isMandelbrot(P_re, P_im, noIterations))
                nop = x+y;
        }
        printf("%d", nop);
} 
```

## 比较背后的故事

在构建可执行文件时添加标志可能看起来有点人为`-fPIC`（根据评论之一）。所以解释一下：首先我只将程序编译为可执行文件，并想与我的 Lua 代码进行比较，该代码从 C 调用 isMandelbrot 函数。所以我创建了一个共享对象来从 lua 调用它 - 并且有很大的时间差异。但无法理解为什么它们随着迭代次数的增加而增长。最后发现是因为`-fPIC`. 当我创建一个调用我的 lua 脚本的小 c 程序时（有效地我做同样的事情，只是不需要 .so） - 时间与 C 非常相似（没有 .so `-fPIC`）。所以我在过去几天里检查了它的一些配置，它始终显示两组非常相似的结果：更快没有`-fPIC`并且慢一点。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-04-08T22:46:51.573

事实证明，当您在没有`-fPIC`选项`multiplyComplex`,的情况下编译时`sqComplex`，编译器会自动内联。如果将这些函数定义为静态函数，则在编译时可能会获得相同的性能，因为编译器可以自由地执行内联。`isInSet``isMandelbrot``-fPIC`

编译器无法自动内联辅助函数的原因与符号插入有关。位置无关代码需要间接访问所有全局数据，即通过全局偏移表。同样的约束也适用于必须通过过程链接表的函数调用。由于一个符号可能在运行时被另一个符号插入（请参阅 参考资料[`LD_PRELOAD`](https://stackoverflow.com/questions/426230/what-is-the-ld-preload-trick)），编译器不能简单地假设内联具有全局可见性的函数是安全的。

如果您在没有 的情况下进行编译，则可以做出相同的假设`-fPIC`，即编译器可以安全地假设无法插入可执行文件中定义的全局符号，因为查找范围从可执行文件本身开始，然后是所有其他库，包括预加载的那些。

如需更深入的了解，请查看以下[论文](http://www.akkadia.org/drepper/dsohowto.pdf)。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2018-07-31T10:21:00.983

正如其他人已经指出的那样，`-fPIC`迫使 GCC 禁用许多优化，例如内联和克隆。我想指出几种克服这个问题的方法：

*   如果您正在编译主要可执行文件（而不是库），请替换`-fPIC`为，`-fPIE`因为这允许编译器假定不可能进行插入；
*   使用`-fvisibility=hidden`和`__attribute__((visibility("default")))`从库中仅导出必要的功能并隐藏其余功能；这将允许 GCC 更积极地优化隐藏函数；
*   使用私有符号别名 ( `__attribute__((alias ("__f")));`) 从库中引用库函数；这将再次解开 GCC 的手
*   可以使用`-fno-semantic-interposition`最近 GCC 版本中添加的标志自动执行先前的建议

有趣的是，Clang 与 GCC 不同，因为它默认允许所有优化，而不管`-fPIC`（可以被覆盖`-fsemantic-interposition`以获得类似 GCC 的行为）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-03-30T23:01:59.927

正如其他人在您的开篇文章的评论部分所讨论的那样，编译`-flto`应该有助于减少您在这种特殊情况下看到的运行时间差异，因为 gcc 的链接时间优化可能会发现实际上可以内联几个功能；）

一般来说，链接时间优化可能会导致代码大小（~6%）的大量减少，[链接到黄金链接时间优化的论文](https://static.googleusercontent.com/media/research.google.com/en//pubs/archive/36912.pdf "链接时间选择上的论文链接")，因此也可以运行时间（更多的程序适合缓存）。另请注意，这`-fPIC`主要被视为一项可实现更严格安全性的功能，并且[始终在 android 中启用](https://gcc.gnu.org/ml/gcc/2012-11/msg00205.html "gcc邮件列表上的android消息")。[SO上的这个问题](https://stackoverflow.com/questions/14990461/why-does-arm-linux-androideabi-gcc-enforce-fpic "SO上的链接")也简要讨论了。另外，只是为了让您知道，`-fpic`是更快的版本`-fPIC`，所以如果您必须使用`-fPIC`try`-fpic`代替 -[链接到 gcc 文档](https://gcc.gnu.org/onlinedocs/gcc/Code-Gen-Options.html)。对于 x86，它可能没有什么不同，但您需要自己检查/在 gcc-help 上询问。

# css - 允许表格在 Google Chrome 中扩展超过最大宽度

> ID：15861762
> 
> 赞同：0
> 
> 时间：2013-04-07T11:17:23.577
> 
> 标签：css, html-table

我有一张桌子`max-width: 300px;`。在 Mozilla Firefox、IE 和 Opera 中，如果表格的内容宽于 300 像素，它会尝试破坏它。如果它不能被破坏，它允许表格调整超过 300 像素。如何在 Google Chrome 中实现这种行为？

编辑：

```
<table style="max-width: 300px; background-color: yellow;">
  <tr><td>Lorem ipsum dolor sit amet consectetuer euismod nibh amet Vestibulum ornare. Natoque convallis auctor arcu ac.</td></tr>
  <tr><td>LoremipsumdolorsitametconsectetuereuismodnibhametVestibulumornareNatoqueconvallisauctorarcuac.</td></tr>
</table> 
```

在 Firefox 中，表格的宽度为 625 像素。文本是动态生成的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T12:06:47.597

只需将以下样式添加到表格或单元格中

```
word-break: break-all; 
```

这将迫使工作中断，即使它没有空格并且不会破坏表格宽度，也不会强迫您在表格上设置最小宽度/宽度。

编辑：

这应该为您提供所需的行为：

```
<html>
<head>
    <style type="text/css">
            table {
                width: auto;
            }
    </style>
    </head>
    <body>
    <div style= "max-width: 300px">
        <table style="background-color: yellow;">
            <tr class="text"><td><div>Lorem ipsum dolor sit amet consectetuer euismod nibh amet Vestibulum ornare. Natoque convallis auctor arcu ac.</div></td></tr>
            <tr class="text"><td>  
                 LoremipsumdolorsitametconsectetuereuismodnibhametVestibulumornareNatoqueconvallisauctorarcuac.
            </td></tr>
        </table>
    </div>
    </body>
</html> 
```

# sql - 主键示例的 Oracle SQL 错误！？

> ID：15861763
> 
> 赞同：1
> 
> 时间：2013-04-07T11:17:33.407
> 
> 标签：sql, oracle

我正在学习 SQL，并且正在使用 oracle SQL Dev。我有一个 PRIMAR Y KEY 概念的例子：这里是代码

```
 drop table Dept;
  drop table Emp;
  -- creating a  Dept Table
  create Table Dept(
 Deptno  INTEGER NOT NULL,
  Dname VARCHAR(14),
  Loc varchar(13)
  );
  -- creating Emp Table
   create table Emp(
   Empno INTEGER NOT NULL,
   Ename VARCHAR(10),
   jobb VARCHAR(9),
   Mgr INTEGER,
   Hiredate DATE,
   Sal DECIMAL, 
   Comm DECIMAL,
   Deptno INTEGER NOT NULL,
   CONSTRAINT F_Emp FOREIGN KEY(Deptno) REFERENCES DEPT(Deptno),
   CONSTRAINT P_Emp PRIMARY KEY(Empno)
); 
```

在这里得到的错误消息，我不明白错误到底是什么？

```
Error at Command Line:19 Column:56
 Error report:
 SQL Error: ORA-02270: no matching unique or primary key for this column-list
02270\. 00000 -  "no matching unique or primary key for this column-list"
 *Cause:    A REFERENCES clause in a CREATE/ALTER TABLE statement
       gives a column-list for which there is no matching unique or primary
       key constraint in the referenced table.
*Action:   Find the correct column names using the ALL_CONS_COLUMNS
       catalog view 
```

在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T11:33:59.080

这是因为外键必须链接到可以由主键或唯一约束属性组成的唯一数据集。您可以链接外键中的多个列，但引用数据必须是唯一的。

在您的情况下，最简单的方法是`Deptno`通过`Dept`将表创建更改为：

```
create Table Dept(
  Deptno  INTEGER NOT NULL,
  Dname VARCHAR(14),
  Loc varchar(13),
  CONSTRAINT P_Dept PRIMARY KEY(Deptno)
); 
```

对于您不希望 FK 引用 PK 的情况，您可以在引用表中所需的字段上创建唯一约束。首先必须做的第一件事是它必须`NOT NULL`在引用表中的引用列上指定约束。然后是添加`CONSTRAINT const_name UNIQUE (col_name)`到引用表以强制唯一值的情况。

举个例子。假设您想链接到电话号码。所以我们可以改变你的例子如下：

```
drop table Dept;
drop table Emp;
-- creating a  Dept Table
create Table Dept(
  Deptno  INTEGER NOT NULL,
  Dname VARCHAR(14),
  Loc varchar(13),
  TelNo INTEGER NOT NULL,
  CONSTRAINT tel_no_uq UNIQUE (TelNo)
);
-- creating Emp Table
create table Emp(
  Empno INTEGER NOT NULL,
  Ename VARCHAR(10),
  jobb VARCHAR(9),
  Mgr INTEGER,
  Hiredate DATE,
  Sal DECIMAL, 
  Comm DECIMAL,
  Deptno INTEGER NOT NULL,
  TelNo INTEGER NOT NULL,
  CONSTRAINT F_Emp_Tel FOREIGN KEY(TelNo) REFERENCES DEPT(TelNo),
  CONSTRAINT P_Emp PRIMARY KEY(Empno)
); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T11:21:06.753

部门表在 DeptNo 列上需要一个主键，以将其作为 Emp 表上的 FK 约束引用。

（是的，至少可以说，Oracle 在错误消息上可能更有用）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-07T11:23:51.467

谷歌搜索出现了这个[Oracle/PLSQL：ORA-02270 错误](http://www.techonthenet.com/oracle/errors/ora02270.php)，这让我相信不存在具有名为 Depto 的主键列的表调用 DEPT，这就是导致错误的原因。我希望这是有帮助的。

编辑：我不相信您可以在创建表之前设置 oracle 递归外键，此时您需要更改表以添加递归键。

# jquery - jQuery TypeError：在 Firefox 20.0 中加载 svg 文件时未定义 a.style

> ID：15861770
> 
> 赞同：2
> 
> 时间：2013-04-07T11:18:24.837
> 
> 标签：jquery, firefox, svg

我使用 SVG 文件。SVG 文件具有 xlink-ed jQuery。

在 Firefox 20.0 中打开 svg 文件时出现错误

> 类型错误：a.style 未定义

如果我在 Firefox 19 和更早版本中打开 svg 文件，则不会出现错误。

任何想法为什么带有 svg 的 jQuery 在 FF20.0 中不起作用？

我的 SVG 演示文件

```
<?xml version="1.0"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
  "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">

<svg xmlns="http://www.w3.org/2000/svg"
    xmlns:xlink="http://www.w3.org/1999/xlink"
     width="467" height="462">

  <rect x="80" y="60" width="250" height="250" rx="20"
      style="fill:#ff0000; stroke:#000000;stroke-width:2px;" />

  <rect x="140" y="120" width="250" height="250" rx="40"
      style="fill:#0000ff; stroke:#000000; stroke-width:2px;
      fill-opacity:0.7;" />

  <script
     xlink:href="http://code.jquery.com/jquery-1.9.1.js"
     id="script10"
     type="text/javascript" />
</svg> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T07:34:19.570

这是由于 jQuery 假设它基本上在 HTML 文档中运行。见[http://bugs.jquery.com/ticket/13754](http://bugs.jquery.com/ticket/13754)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-14T14:10:05.757

正如@Boris 在另一个答案中所说，这是由于 jquery 错误造成的。

在[此链接](https://support.mozilla.org/questions/955772)中，您可以看到有关它的更多信息。

其中一条评论建议如下（在 jquery-1.9.1 中）：

在 jquery-1.9.1 的第 1321 行中，**更改**如下：

```
if ( !all || !a || !all.length ) { 
```

**对此**：

```
if (!all || !a || !all.length || !a.style) { 
```

他的解释：

> 这应该会导致 jQuery.support 函数返回 {}（一个空对象），就像它在其他浏览器上所做的那样。在 FF19 中，“!a”的计算结果为真。在 FF20 中，“！a”的计算结果为 false，但 a.style 未定义。所以检查 !a.style 应该避免这里的错误。

这解决了我的问题！

**注意**：更改第三方代码不是一个好习惯，但我现在没有找到更好的解决方案。

# ruby - 与红宝石“元帅”概念混淆

> ID：15861771
> 
> 赞同：1
> 
> 时间：2013-04-07T11:18:25.097
> 
> 标签：ruby, marshalling

[元帅#dump](http://www.ruby-doc.org/core-2.0/Marshal.html#method-c-dump)说：

> 序列化 obj 和所有后代对象。如果指定了 IO，则将序列化的数据写入其中，否则数据将作为 String 返回。***如果指定了限制，则子对象的遍历将被限制在该深度***。如果 limit 为负数，则不会执行深度检查。

现在我的问题是：

> *   什么是深度？
>     
>     
> *   你能给我一个反对粗线的例子吗？
>     
>     
> *   如果两者都被定义，为什么`marshal_dump`会优先？`_dump`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T12:30:03.847

> *   什么是深度？
> *   你能给我一个反对粗线的例子吗？

编组一个对象时，它可以引用另一个对象，该对象可以引用另一个对象。this的深度级别：`[1, 2, {"12" => [:foo]}]`为4：

*   1级：`[1, 2, {"12" => [:foo]}]`
*   级别 2 `1`：`2`和`{"12" => [:foo]}`
*   3级：`"12"`和`[:foo]`
*   4级：`:foo`

因此，您可以限制 Marshal#dump 递归查找的级别：

```
Marshal.dump([1, 2, {"12" => [:foo]}], 4)
=> "\x04\b[\bi\x06i\a{\x06I\"\a12\x06:\x06ET[\x06:\bfoo"

Marshal.dump([1, 2, {"12" => [:foo]}], 3)
ArgumentError: exceed depth limit 
```

> *   如果两者都被定义，为什么`marshal_dump`会优先？`_dump`

原因是你永远不应该在你的类中同时定义它们，只定义其中一个。无论如何，必须先检查其中一个。检查是在函数中完成`wobject`的[`marshal.c`](https://github.com/ruby/ruby/blob/trunk/marshal.c#L595)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T11:51:25.147

关于深度

鉴于：

```
h={'one'=>{'two'=>{'three'=>0}}}; p Marshal.dump(h,3) 
```

将发出：

```
ArgumentError: exceed depth limit 
```

这意味着编组必须超出给定的深度限制才能编组对象（3 个散列 + 最后一个散列的“键值”级别）

然而：

```
h={'one'=>{'two'=>{'three'=>0}}}; p Marshal.dump(h,4) 
```

将工作：

```
"\x04\b{\x06I\"\bone\x06:\x06ET{\x06I\"\btwo\x06;\x00T{\x06I\"\nthree\x06;\x00Ti\x00" 
```

# javascript - 如何使用 Yahoo API 获取用户的位置并将其发布到我网站中的 div

> ID：15861775
> 
> 赞同：0
> 
> 时间：2013-04-07T11:19:21.283
> 
> 标签：javascript, api, yahoo

我是一个新的 javascript 编码器，所以我想知道如何使用 Yahoo API 获取用户的地理位置并将其发布到我网站上的另一个现有 div。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T11:54:04.653

You can use HTML5 Geolocation to get the latitudes and longitudes of the user and then pass this to Yahoo Placefinder API.

For e.g, the URL to query is:

```
var geoAPI='http://where.yahooapis.com/geocodelocation='+lat+','+lon+'&flags=J&gflags=R&appid='+APPID; 
```

Notice we are passing the R flag for reverse geocoding.

I hope this helps.

# c# - 从 C# 中的另一个标签页打开标签页（WinForms）

> ID：15861778
> 
> 赞同：-1
> 
> 时间：2013-04-07T11:19:53.683
> 
> 标签：c#, winforms, tabpage

嘿，当我单击 tabpage1 中的按钮时，我想打开 tabpage2。

我该怎么做 ？谢谢。

图片 ：

![在此处输入图像描述](https://i.stack.imgur.com/HM8bz.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T12:37:04.170

你的问题和你的形象是两个不同的要求。

对于图像，您可以在 Form2 上使用自己的事件：

```
public event EventHandler OpenSecondTabPage;

public Form2() {
  InitializeComponent();
  button1.Click += button1_Click;
}

private void button1_Click(object sender, EventArgs e) {
  OnOpenSecondTabPage();
}

protected void OnOpenSecondTabPage() {
  if (OpenSecondTabPage != null) {
    OpenSecondTabPage(this, EventArgs.Empty);
  }
} 
```

然后在你的主要形式：

```
protected override void OnShown(EventArgs e) {
  base.OnShown(e);
  Form2 f2 = new Form2();
  f2.OpenSecondTabPage += f2_OpenSecondTabPage;
  f2.ShowDialog(this);
}

void f2_OpenSecondTabPage(object sender, EventArgs e) {
  tabControl1.SelectedTab = tabPage2;
} 
```

# typescript - 尾随逗号禁用类型检查？

> ID：15861781
> 
> 赞同：0
> 
> 时间：2013-04-07T11:20:08.727
> 
> 标签：typescript

以下 TypeScript 代码会产生运行时错误：

```
var ns: number[] = ['1',];
alert('' + ns[0].toFixed()); 
```

我知道分配很好，因为数组文字被键入`any[]`。但为什么`any[]`首先呢？

语言规范中的任何地方都描述了这种尾随逗号行为吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T11:35:31.383

数组文字可以包含未定义的项目，例如：

```
var a = [,"1",,"3",,,"6"]; 
```

`string`由于这会创建一个具有和类型值的数组`undefined`，因此 TypeScript 中的类型将同时`any`处理这两者。

在数组中包含一个尾随逗号实际上不会在末尾创建未定义的值，这是 Javascript 的怪癖之一。所以，在你的情况下，实际的数组中只有一个字符串，TypeScript 可以使用`string[]`数组的类型，但我猜 TypeScript 不能处理这个特殊的怪癖。

# python - Python Scrapy 自定义爬取项xml格式

> ID：15861784
> 
> 赞同：2
> 
> 时间：2013-04-07T11:20:41.910
> 
> 标签：python, xml, scrapy

我使用scrapy抓取网页，我希望以某种格式输出到xml文件，下面是我的代码。

物品类别

```
class Item(Item):
# define the fields for your item here like:
    id = Field()
    name = Field()
    address = Field()
    birthdate = Field()
    review = Field() 
```

蜘蛛类

```
class FriendSpider(BaseSpider):
# identifies of the Spider
name = "friend"
count = 0 
allowed_domains = ["example.com.us"]
start_urls = [
    "http://example.com.us/biz/friendlist/"
]
def start_requests(self):
    for i in range(0,1722,40):
        yield self.make_requests_from_url("http://example.com.us/biz/friendlist/?start=%d" % i)

def parse(self, response):

    response = response.replace(body=response.body.replace('<br />', '\n')) 
    hxs = HtmlXPathSelector(response)
    sites = hxs.select('//ul/li')
    items = []

    for site in sites:
        item = Item()
        self.count += 1
        item['id'] = str(self.count)
        item['name'] = site.select('.//div/div/h4/text()').extract()
        item['address'] = site.select('h4/span/text()').extract()
        item['review'] = ''.join(site.select('.//div[@class="review"]/p/text()').extract())
        item['birthdate'] = site.select('.//div/div/h5/text()').extract()

        items.append(item)
    return items 
```

输出格式如下：

```
<?xml version="1.0" encoding="utf-8"?>
<items>
  <item>
     <id>1</id>
     <name><value>Keith</value></name>
     <review>txt............</review>
     <address><value>United States</value></address>
     <birthdate><value>1988-04-03</value></birthdate>
  </item>
  .....
<items> 
```

如何将 xml 格式自定义为以下：删除值标签并将 id 移动到项目根目录。

```
<?xml version="1.0" encoding="utf-8"?>
<items>
  <friend id = "1">
     <name>Keith</name>
     <review>txt............</review>
     <address>United States</address>
     <birthdate>1988-04-03</birthdate>
  </friend>
  .....
<items> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T03:20:41.590

例如，对于您的问题，您可以获得此[页面上](https://stackoverflow.com/questions/1019895/serialize-python-dictionary-to-xml)提供的列表之一，或者根据`OrderedDict`类型编写您自己的 XML 序列化器。爬取结束后，您可以简单地`serialize()`使用所需的参数调用并获取 XML 文档。

# c++ - 关于 C++ 中的结构体和指针

> ID：15861786
> 
> 赞同：-7
> 
> 时间：2013-04-07T11:20:57.297
> 
> 标签：c++, pointers, struct, linked-list, heap-memory

我想创建一个链接列表。

对于以下代码：

```
struct sampleStruct
{
    int a;
    sampleStruct *next = NULL;
};
sampleStruct *sample = new sampleStruct; 
```

`sample.next`和 和有什么不一样`sample->next`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T11:50:57.927

好的，以更完整的方式解释它。大多数其他人已经写过，当你有一个指针时，你必须使用'->'。但是您也可以使用“.”来执行此操作，为此您必须尊重运算符的优先级。我们需要 '*' 来获取指针的内容，但是它的优先级比 '.' 低，所以你必须把它写在括号里给它更高的优先级，所以当你想用 ' 。你必须写：

```
(*sample).next 
```

你会看到这是一个复杂的语法，为了更简单地做到这一点，引入了'->'。有了它，您可以以更舒适的方式编写代码。

所以这与示例相同，并且看起来要好得多。

```
sample->next 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T11:29:32.483

由于`sample`是指针，因此无法通过`.`间接操作符访问数据成员`->`。例如，这不会编译：

```
sample.next; // error: member reference type 'sampleStruct *' is a pointer;
             //        maybe you meant to use '->'? 
```

错误实际上不言自明。

# android - 线性布局不适合屏幕尺寸

> ID：15861790
> 
> 赞同：2
> 
> 时间：2013-04-07T11:21:24.733
> 
> 标签：android, android-linearlayout

为什么滚动视图内的线性布局不适合屏幕尺寸？我试图用“Layout_Height”做一些改变，但没有成功。

这是我的 XML 代码：

感谢帮助！

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/scrollViewPhysicalExam"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:background="@drawable/background"
        android:orientation="vertical" >
        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            style="@style/HeaderText"
            android:orientation="vertical" >
    <!-- ++++++++++++++++++ Row18 ++++++++++++++++++ -->
            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="match_parent" >                  
                <Button
                    android:id="@+id/btnBack"
                    android:text="@string/Back"
                    android:layout_width="0dp"
                    android:layout_height="match_parent"
                    android:layout_weight="1.00"
                    android:textSize="15dip" />
                <Button
                    android:id="@+id/btnSave"
                    android:text="Save"
                    android:layout_width="0dp"
                    android:layout_height="match_parent"
                    android:layout_weight="1.00"
                    android:textSize="15dip" />
            </LinearLayout>

    <!-- +++++++++++++++++++++++++++++++++++++++++++ -->
        </LinearLayout>
    </LinearLayout>
</ScrollView> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-10-27T12:07:58.270

我无法发表评论，所以我会尝试回答：您是否尝试设置`android:fillViewport="true"`您的`ScrollView`?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T11:35:42.460

1）你为什么要`LinearLayout`在一个`LinearLayout`里面嵌套另一个`LinearLayout`？我只能假设这只是您的 xml 文件的摘录，否则这没有任何意义。

2）您遇到的具体问题是什么？`LinearLayout`太长以至于它会在底部留下可见屏幕？如果是这样，这是由于`ScrollView`作为父元素。A`ScrollView`将通过设置填满屏幕`android:layout_height="match_parent"`。A`ScrollView`本身为其子视图提供了无限的高度空间，因此设置`android:layout_height="match_parent"`在子视图 ( `LinearLayout`) 中也会使其占用无限空间。您应该将其设置为`android:layout_height="wrap_content"`，看看是否适合您！

# permissions - 根据试图访问内核模块的程序设置权限

> ID：15861792
> 
> 赞同：0
> 
> 时间：2013-04-07T11:21:47.540
> 
> 标签：permissions, linux-kernel, kernel

我编写了一个内核模块，它创建一个 /proc 文件并从用户程序读取写入其中的值，比如 user.c

现在我想限制这个 /proc 文件的权限。我通过检查 current->euid 使用“当前”内核变量基于用户 ID 限制了权限。

我的问题：有没有办法根据程序来限制这个？即只有 user.c 应该能够写入这个 proc 文件而不是任何其他程序。我在 task_struct 中找不到任何可以帮助我做到这一点的参数。你能建议一种方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T12:56:22.307

在您的 proc writer 实现（即内核模块内部）中，您能做的最好的事情是检查 current（一个结构任务 *）的值，它包含（除其他外）有价值的字段，例如 comm（16 个字符的 argv[ 0])、pid、uid 等（基本上，您在 /proc//status 中看到的所有内容。您还可以检查原始 exe 名称（就像您在 /proc//exe 中看到的那样），看看它是否是众所周知的路径. 然后你可以返回一个错误。

警告：如果您使用“comm”，任何人都可以将他们的打开过程重命名为您的“允许”程序之一，并且有办法击败“exe”保护。这只会使它稍微难一些，但对某人来说并非不可能。更全面和更强大的解决方案需要您查看程序的用户模式内存，这是可能的，但是对于简短的答案来说太复杂了。

注意：权限参数不起作用，甚至不要打扰。它们使用经典的 UNIX ACL，即 u/g/o - 因此您不能按 PID 进行过滤。

# c++ - C++中的非阻塞套接字

> ID：15861793
> 
> 赞同：2
> 
> 时间：2013-04-07T11:21:51.190
> 
> 标签：c++, sockets, pthreads, posix

我正在用 C++ 编写客户端，客户端在两个不同的端口上获得响应。我正在侦听主线程中的一个端口，同时我创建了其他线程（基于 posix），如下所示：

```
void *receiveFunc(void *ptr)
{
    try {
        while ( true ) {
            svr_sock << svr_data;
            cout<<svr_data<<endl;
        }
    } catch ( SocketException& ) {}
} 
```

但是当它进入这个线程时，它永远不会出现，直到我在套接字上收到一些东西。

我该如何克服这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T11:26:53.243

您的套接字处于阻塞模式。

这取决于您使用的操作系统如何将套接字设置为非阻塞模式。

*Linux*：您需要将套接字设置为非阻塞模式，如[Beej 指南](https://beej.us/guide/bgnet/html/#blocking)中所述。

*Windows*：您必须使用[winsock](http://msdn.microsoft.com/en-us/library/windows/desktop/ms740673%28v=vs.85%29.aspx) WinAPI 函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T22:23:47.263

为什么需要它“出来”？

无论如何，说服这样一个阻塞的线程退出的通常方法是设置一些“终止”布尔值，以便 while 循环检查然后关闭套接字。这会导致套接字读取提前返回并出现错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-18T14:03:46.670

除了上面的答案，beej 指南的新链接是： [https ://beej.us/guide/bgnet/html/#blocking](https://beej.us/guide/bgnet/html/#blocking)

# sql - SQL 索引和更新时机

> ID：15861794
> 
> 赞同：0
> 
> 时间：2013-04-07T11:22:03.960
> 
> 标签：sql, sql-server, tsql, indexing

我有一个包含 50 列和大约 10 列 (FK) 的非聚集索引的表。该表包含大约 1000 万条记录。

我的问题是：在更新表中的 10k 行期间索引何时更新（更新包括索引列）？是在每行更新后还是在整个更新完成后发生？

问题是更新时间很长，我们收到数据库连接超时。如何提高更新时间？我无法在更新之前删除索引并在以后重建它们，因为该表在更新期间也被大量使用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T11:24:15.510

您应该对表进行分区并尝试使用本地索引。通过分区，您正在划分表数据，以便您可以对相关数据进行操作。

本地索引也意味着索引也是分区的，因此速度将显着提高。

看看这个链接：http: [//msdn.microsoft.com/en-in/library/ms190787.aspx](http://msdn.microsoft.com/en-in/library/ms190787.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T11:25:57.103

我们有一个庞大的系统，主表也有几百万条记录……至少以前是这样。我们将超过 6 个月的数据移到存档表中。通常，旧数据仅用于报告目的。通过这样做，我们能够极大地提高实时系统的性能。话虽如此，这对您来说可能不是一个可行的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T13:39:14.700

索引是否碎片化（更新表和 FK 表）？
列的类型，它是否为空？
你能忍受脏读（nolock）吗？
你能忍受不检查 FK 约束吗？

请发布更新声明？
我相信您正在检查是否不使用相同的值进行更新。

```
update tt 
set col1 = 'newVal' 
where col1 <> 'newVal' 
```

如果这些索引状况良好，更新 10 K 行应该会非常快。
填充因子可能会有所帮助。

# database - 如何连接到在 VM 上运行的数据库？

> ID：15861796
> 
> 赞同：5
> 
> 时间：2013-04-07T11:22:14.630
> 
> 标签：database, vmware, virtual-machine

我这里有个问题。心里好像有点复杂。希望我能说清楚。:)

1.  我有一个 Win7 系统（系统 A），上面运行着一个 Win7 VM（系统 B）。
2.  系统 B 通过 VPN 连接到内网，将一些实时数据记录到本地 sql server 数据库中。管理员禁用了 Internet 连接，因此系统 B 与外部隔离。
3.  现在系统 A 想要连接到这个数据库并读取这些实时数据。

可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T12:05:59.453

**我对vmware**没有任何经验，但假设您可以使用任何虚拟机，这里有一个[VirtualBox](https://www.virtualbox.org/)的解决方案：

*   在您的 VM 上设置一个网络接口，该接口仅对主机系统可见（[参考](http://www.virtualbox.org/manual/ch06.html#network_hostonly)）：

> 仅主机网络是 VirtualBox 2.2 版中添加的另一种网络模式。它可以被认为是桥接和内部网络模式之间的混合：与桥接网络一样，虚拟机可以相互通信并与主机通信，就好像它们通过物理以太网交换机连接一样。类似地，与内部网络一样，不需要存在物理网络接口，并且虚拟机无法与主机外部的世界通信，因为它们没有连接到物理网络接口。

*   在系统 B 上配置**端口转发**([external_port] -> [host_over_vpn]:[service_port])

连接到 [system_B_ip_over_provided_interface]:[external_port]，就像您直接连接到数据库一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T11:23:24.993

对的，这是可能的。只需提供正确的 IP。

# android - 如何检测“无运营商”SIM卡模式？

> ID：15861799
> 
> 赞同：0
> 
> 时间：2013-04-07T11:22:30.350
> 
> 标签：android, sim-card

如何检测 GSM 信号强度低且蜂窝网络何时丢失？双 SIM 卡设备呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T13:14:06.827

> Android：如何检测“无运营商”SIM 卡模式？

该[`PhoneStateListener`](http://developer.android.com/reference/android/telephony/PhoneStateListener.html)课程旨在服务于这一目的。使用时，当绑定到当前提供商的 GSM 信号发生变化时，您可以得到回调。

确保您`android.intent.action.PHONE_STATE`在清单文件中设置了以下内容。

接下来，您需要调用[`TelephonyManager`](http://developer.android.com/reference/android/telephony/TelephonyManager.html)并将您的绑定`PhoneStateListener`到它：

```
TelephonyManager telManager = (TelephonyManager) getSystemService(TELEPHONY_SERVICE); 
telManager.listen(this.phoneListener, PhoneStateListener.LISTEN_SIGNAL_STRENGTHS); 
```

您可以`PhoneStateListener`这样实现：

```
private final PhoneStateListener phoneListener = new PhoneStateListener() {

    @Override
    public void onSignalStrengthsChanged(SignalStrength signalStrength) {
        Log.d("onSignalStrengthsChanged", "The new singal strength is " 
                + signalStrength.getGsmSignalStrength());
    }

}; 
```

GSM 信号强度值在 中定义`TS 27.007 8.5`。基本上 0 的值是*低*的，31 的值是*好的*，而 99 的值意味着*未知或不可检测*。[如Android Developers manual](http://developer.android.com/reference/android/telephony/SignalStrength.html#getGsmSignalStrength%28%29)中所述，有效值为 (0-31, 99) 。

以上涵盖了 GSM 信号，所以如果您只对 GSM 信号感兴趣，请坚持我之前的示例。如果您可能有兴趣说明由于信号强度不足而导致*数据网络*是否可用，您还可以获取所有可用数据网络的其他信号值：

*   [SignalStrength.getCdmaDbm()](http://developer.android.com/reference/android/telephony/SignalStrength.html#getCdmaDbm%28%29)以 dBm 为单位返回 CDMA 网络的 RSSI 值。
*   [SignalStrength.getEvdoDbm()](http://developer.android.com/reference/android/telephony/SignalStrength.html#getEvdoDbm%28%29)以 dBm 为单位返回 Evdo 网络的 RSSI 值。

[`TelephonyManager.getNetworkType()`](http://developer.android.com/reference/android/telephony/TelephonyManager.html#getNetworkType%28%29)通过调用该方法可以知道当前数据网络的类型。

> 双 SIM 卡设备呢？

我不知道，从来没有为他们工作过。但是我不明白为什么上述内容可能不适用于多 SIM 卡设备。它应该是这样工作的。

# java - paintComponent 生成的矩形太多

> ID：15861806
> 
> 赞同：-1
> 
> 时间：2013-04-07T11:23:13.057
> 
> 标签：java, swing, graphics2d, paintcomponent

我有一个问题`paintComponent`。我使用“while”循环来绘制矩形。每个下一个矩形都应该更小并旋转。它有效。但是paintComponent 执行两次，而不是我期望的一次。我应该怎么办？

在那里你可以找到完整的代码：

主.java：

```
 import java.awt.*;

    public class Main {

        public static void main(String[] args) {
            new Kalejdoskop(600, 600,    
                    5,         
                    Color.YELLOW,
                    Color.GREEN,  
                    1, 5);      
        }
    } 
```

MyPanel.java：

```
import javax.swing.*;
import java.awt.*;
import java.awt.geom.Rectangle2D;

/**
 * Created with IntelliJ IDEA.
 * User: Hans92
 * Date: 07.04.13
 * Time: 01:34
 * To change this template use File | Settings | File Templates.
 */
public class MyPanel extends JPanel {
    int szerokoscOkna = Kalejdoskop.szerokoscOkna;
    int wysokoscOkna = Kalejdoskop.wysokoscOkna;
    double kat = 90;
    double wspolczynnik = kat * Kalejdoskop.stosunekWspolczynnika1 / Kalejdoskop.stosunekWspolczynnika2;

    public MyPanel() {
        setPreferredSize(new Dimension(szerokoscOkna, wysokoscOkna));
    }

    protected void paintComponent(Graphics g) {
        System.out.println(Kalejdoskop.kwadraty);

        super.paintComponent(g);
        Graphics2D g2d = (Graphics2D) g;

        int verticalCenter = this.getHeight() / 2;

        double rogKwadratu = verticalCenter - (szerokoscOkna / 2);
        double bok = szerokoscOkna;
        int i = 0;
        int jakiKolor = 0;

        Rectangle2D kwad = new Rectangle2D.Double(rogKwadratu, rogKwadratu, szerokoscOkna, szerokoscOkna);
        g2d.setPaint(Kalejdoskop.pierwszyKolor);
        g2d.fill(kwad);

        while (i < Kalejdoskop.kwadraty) {
            if (jakiKolor == 0) {
                bok = (bok * Math.tan(Math.toRadians(wspolczynnik))) / ((Math.sin(Math.toRadians(wspolczynnik))) * (1 + Math.tan(Math.toRadians(wspolczynnik))));
                rogKwadratu = verticalCenter - (bok / 2);

                g2d.rotate(Math.toRadians(wspolczynnik), szerokoscOkna / 2, szerokoscOkna / 2);
                kwad = new Rectangle2D.Double(rogKwadratu, rogKwadratu, bok, bok);

                g2d.setPaint(Kalejdoskop.drugiKolor);

                g2d.fill(kwad);

                jakiKolor = 1;
            }

            if (jakiKolor == 1) {
                bok = (bok * Math.tan(Math.toRadians(wspolczynnik))) / ((Math.sin(Math.toRadians(wspolczynnik))) * (1 + Math.tan(Math.toRadians(wspolczynnik))));
                rogKwadratu = verticalCenter - (bok / 2);

                g2d.rotate(Math.toRadians(wspolczynnik), szerokoscOkna / 2, szerokoscOkna / 2);
                kwad = new Rectangle2D.Double(rogKwadratu, rogKwadratu, bok, bok);

                g2d.setPaint(Kalejdoskop.pierwszyKolor);

                g2d.fill(kwad);

                jakiKolor = 0;
            }

            i++;
        }

    }

} 
```

MyFrame.java：

```
import javax.swing.*;

/**
 * Created with IntelliJ IDEA.
 * User: Hans92
 * Date: 07.04.13
 * Time: 01:33
 * To change this template use File | Settings | File Templates.
 */
public class MyFrame extends JFrame {
    public MyFrame() {
        super("Kalejdoskop");
        JPanel panel = new MyPanel();

        add(panel);

        pack();

        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setVisible(true);
    }
} 
```

Kalejdoskop.java：

```
import javax.swing.*;
import java.awt.*;
import java.awt.EventQueue;
import java.awt.geom.Rectangle2D;

/**
 * Created with IntelliJ IDEA.
 * User: Hans92
 * Date: 06.04.13
 * Time: 20:52
 * To change this template use File | Settings | File Templates.
 */

class Kalejdoskop extends JPanel {
    static int szerokoscOkna = 0;
    static int wysokoscOkna = 0;
    static int kwadraty = 0;
    static Color pierwszyKolor = Color.RED;
    static Color drugiKolor = Color.YELLOW;
    static int stosunekWspolczynnika1 = 0;
    static int stosunekWspolczynnika2 = 0;

    public Kalejdoskop(int szerokosc, int wysokosc, int liczbaKwadratow, Color a, Color b, int stosunek1, int stosunek2) {

        szerokoscOkna = szerokosc;
        wysokoscOkna = wysokosc;
        kwadraty = liczbaKwadratow;
        pierwszyKolor = a;
        drugiKolor = b;
        stosunekWspolczynnika1 = stosunek1;
        stosunekWspolczynnika2 = stosunek2;

           jedziesz();

    }

    public static void jedziesz(){

        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                new MyFrame();
            }
        });

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T12:10:36.987

你说：

> 我遇到了paintComponent 的问题。我使用“while”循环来绘制矩形。每个下一个矩形都应该更小并旋转。它有效。但是 paintComponent 执行了 2 次，而不是我期望的一次。我应该怎么办？

你不应该做任何事，因为

1.  您无法直接控制何时、是否或多久`paintComponent(...)`调用一次。您的代码可以假定它在 GUI 组件呈现时至少被调用一次，然后如果您通过 建议它*可能*`repaint()`会调用它，但是根据 Java API，这并不能保证它会被调用，特别是如果重绘是“堆积”。
2.  您的`paintComponent(...)`方法中应该没有程序逻辑。
3.  如果遵守这一点，您的代码不应该真正关心是否`paintComponent(...)`被调用两次或更多。

换句话说，如果你的代码构造正确，这真的不是问题。

# excel - 使用 ssis 包导入 excel 到 sql server 失败

> ID：15861808
> 
> 赞同：0
> 
> 时间：2013-04-07T11:23:18.947
> 
> 标签：excel, ssis, sql-server-2008-r2

嗨，我正在开发一个 ssis 包，该包将 excel 文件 (.xlsx) 从 ftp 服务器导入到本地文件夹，然后将它们导入到 sql server 表中。我正在使用`foreach`文件名的映射。从 ftp 服务器导入到本地工作正常，但是从本地文件夹导入到 sql 表失败​​。

看来我的excel源代码有问题。这些是错误：

```
Start SSIS package "Package.dtsx."
Information: 0x1 at Script Task, C # My Message: System.Collections.ArrayList
Information: 0x4004300A at Data Flow Task, SSIS.Pipeline: Validation phase begins.
Error: 0xC0202009 at Data Flow Task, Excel Source [1]: SSIS Error Code DTS_E_OLEDBERROR. An OLE DB error has occurred. Error code: 0x80040E37.
Error: 0xC02020E8 to Flow Task data, Excel Source [1]: Failed to open a rowset for "Sheet1 $". Verify that the object exists in the database.
Error: 0xC004706B to Flow Task data SSIS.Pipeline: validation failed "component" Excel Source "(1)". Returned validation status "VS_ISBROKEN."
Error: 0xC004700C to Flow Task data SSIS.Pipeline: Failed to validate one or more components.
Error: 0xC0024107 at Data Flow Task: There were errors during task validation.
Warning: 0x80019002 at Foreach Loop Container: SSIS Warning Code DTS_W_MAXIMUMERRORCOUNTREACHED. The Execution method succeeded, but the number of errors (6) reached the maximum allowed (1); leading to a failure. This occurs when the number of errors reaches the number specified in MaximumErrorCount. Change the value of MaximumErrorCount or fix the errors.
SSIS package "Package.dtsx" finished: Success.
The program '[5504] Package.dtsx: DTS' has exited with code 0 (0x0). 
```

作为配置，我有：

对于 excel 管理器连接，我为 connectionString =`@[User::variable1] + @[User::DOWNLOAD_DIRECTORY_LOCAL] + @[User::FTP_FILE_URL] + @[User::variable2]`

`variable 1 =Provider=Microsoft.ACE.OLEDB.12.0;Data Source=`

`variable 2 = ;Extended Properties="EXCEL 12.0;HDR=YES";`

我还将数据流任务、ftp 任务、foreach 任务和 excel 连接的延迟验证属性设置为 true。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T06:10:49.757

我刚刚写了一个包来自己做同样的事情。按此顺序检查的事项：

1.  在您的 Excel 数据连接中，您是否浏览到本地文件夹中的 excel 文件（一旦它们在那里）并选择了一个（您需要在开发时复制一个）？因此，当您转到数据流任务（在 For Each 内）中的 excel 源对象时，您可以选择 Excel 数据连接，然后在“excel 表的名称”下查看 Sheet$1？

2.  一旦您确定您已完成上述操作，您是否右键单击 Excel 数据连接并在表达式属性中添加 ExcelFilePath = @[User::FTP_FILE_URL]？（请注意，您需要在 For Each 容器的 Collection 选项卡上的 Retrieve File Name 下选择“Fully Qualified”）

3.  在您的 Excel 数据连接中，您是否为 .xlsx 文件选择了正确的版本 (Excel 2007) 或为 .xls 选择了 Excel 2003？我注意到一个小错误，当我将默认文件名更改回 2007 时，我不得不手动将其（再次）更改回 2003。

4.  在步骤运行之前检查文件夹中至少存在一个工作簿。这里有一些关于如何添加脚本任务来验证 User::DOWNLOAD_DIRECTORY_LOCAL 中的至少一个文件的代码。

5.  我收到了大量有关 Microsoft.ACE.OLEDB.12.0 驱动程序的错误，另外还有 64 位服务器的问题，必须将包包装在作业中并检查执行选项下的“使用 32 位运行时”选项在工作属性中。检查驱动程序是否正常工作（尽管如果您没有正确设置它通常会给出特定的驱动程序错误）。

嗯，在我回家之前很快就这样了。让我知道它是否有效或仍然失败..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-14T07:48:43.090

遇到此问题时您应该问自己的问题是：
我从哪里运行我的 dstx 文件？
它来自 Microsoft Visual Studio 吗？
它来自 SQL 代理吗？
它来自集成服务包执行实用程序吗？
然后细化您的问题以在论坛上找到答案。

# jquery - jQuery 验证问题 - 不工作 - 表单只是提交

> ID：15861812
> 
> 赞同：1
> 
> 时间：2013-04-07T11:23:33.910
> 
> 标签：jquery, jquery-plugins, jquery-validate

我已经阅读了我可以在这里找到的关于这个主题的所有内容。我认为这个问题很简单，但我找不到。我会很高兴让一些休息的眼睛快速浏览一下。我在这里做错了什么？这个简单的表单只是提交而不验证。我的问题形式更大，但我发现我应该先简单测试一下。我什至在 jsfiddle 上进行了测试并且不理解那里的响应[http://jsfiddle.net/asle/fmYLP/](http://jsfiddle.net/asle/fmYLP/)

```
<!doctype html>
<html lang="us">
<head>
    <meta charset="utf-8">
    <title>jQuery Validate Example Page</title>
    <script type='text/javascript' src='http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js'></script>
    <script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.11.0/jquery.validate.min.js"></script>
    <script type="text/javascript">
    jQuery().ready(function(){
        $("#testform").validate();
    })
    </script>
</head>
<body>
<form id="testform" name="testform" method="post">Name:
    <input name="testname" type="text" />
    <br />Adress:
    <input name="testadress" type="text" />
    <br />
    <input type="submit" value="submit">
    <br />
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T14:00:28.807

[根据文档](http://api.jquery.com/ready/)，您的方式“不推荐”：`jQuery().ready(function(){...})`。

而是使用`jQuery(document).ready(function(){...})`

或者`jQuery(function(){...})`

* * *

**引用操作：**

> 这个简单的表单只是提交而不验证。

因为你没有声明任何验证规则，所以无论你输入什么样的数据，或者根本没有数据，表单总是有效的。

**引用 OP 的评论：**

> 我试图在输入中添加“必需”并且它有效。我是否总是必须在每个字段中添加“必需”？演示中并非如此。 `<input required name="testname" type="text" />`

我不确定您在谈论哪些演示，但是您必须在***某个地方*****声明验证规则***，否则，您如何期望插件知道哪些字段是`required`或应用另一种规则？*

 *这里有三个有效的例子......

通过内联`attribute`（HTML 5）：

```
<input required="required" name="testname" type="text" /> 
```

或通过`class`：

```
<input class="required" name="testname" type="text" /> 
```

或[通过`.validate()`jQuery](http://docs.jquery.com/Plugins/Validation/validate#toptions)：

```
$(document).ready(function(){

    $("#testform").validate({
        rules: {
            testname: {
                required: true,
                // another rule
            },
            testaddress: {
                required: true,
                digits: true
            }
        }
    });

}); 
```

**工作演示：http: [//jsfiddle.net/4HSYz/](http://jsfiddle.net/4HSYz/)**

* * *

还有一些方法可用于动态操作规则。

见[方法](http://docs.jquery.com/Plugins/Validation/rules#.22add.22rules)。[_`rules('add')`](http://docs.jquery.com/Plugins/Validation/rules#.22add.22rules)

* * *

阅读完整文档： [http ://docs.jquery.com/Plugins/Validation](http://docs.jquery.com/Plugins/Validation)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T11:28:58.727

尝试

```
jQuery(document).ready(function() {
   $('#testform').validate();
}); 
```*

# mysql - 更新mysql电子邮件字段而不影响

> ID：15861819
> 
> 赞同：0
> 
> 时间：2013-04-07T11:24:09.823
> 
> 标签：mysql, sql-update

最近我大量添加了客户详细信息。但是，我的客户刚刚通知我电子邮件地址格式错误。

例如：之前给定的电子邮件是`abc@mail.com`. 但是，我必须将其编辑为`abc@me.mail.com`.

有什么办法可以检查`@mail.com`并将其更改为`@me.mail.com`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T11:26:22.043

```
update your_table
set email = replace(email, '@mail.com', '@me.mail.com')
where email like '%@mail.com' 
```

# android - 如何将值从 BroadcastReceiver 传递给另一个 Activity

> ID：15861820
> 
> 赞同：0
> 
> 时间：2013-04-07T11:24:10.153
> 
> 标签：android, sms, broadcastreceiver

经过几个小时的思考，我几乎放弃了如何将值从 BroadcastReceiver 传递到另一个 Activity。

这是我目前在 BroadcastReceiver 类中的代码：

```
package com.example.smsTest;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.telephony.SmsMessage;
import android.widget.Toast;

public class SmsReceiver extends BroadcastReceiver {
@Override
public void onReceive(Context context, Intent intent) {

       Bundle extras = intent.getExtras();
       if (extras == null)
       return;

       Object[] pdus = (Object[]) extras.get("pdus");
       for (int i = 0; i < pdus.length; i++) {
          SmsMessage SMessage = SmsMessage.createFromPdu((byte[]) pdus[i]);
          String sender = SMessage.getOriginatingAddress();
          String body = SMessage.getMessageBody().toString();

         // A custom Intent that will used as another Broadcast
         Intent in = new Intent("SmsMessage.intent.MAIN").
         putExtra("get_msg", sender+":"+body);

         // To display a Toast whenever there is an SMS.
         Toast.makeText(context,body,Toast.LENGTH_LONG).show();

         //You can place your check conditions here(on the SMS or the sender)            
         //and then send another broadcast 
         context.sendBroadcast(in);

        // This is used to abort the broadcast and can be used to silently
        // process incoming message and prevent it from further being 
        // broadcasted. Avoid this, as this is not the way to program an app.
        this.abortBroadcast();
        }
     }
 } 
```

这是 SMSReceiverActivity 类的代码：

```
package com.example.smsTest;

import android.app.ListActivity;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.os.Bundle;
import android.widget.TextView;

public class SMSReceiverActivity extends ListActivity {
    private BroadcastReceiver mIntentReceiver;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_smsreceiver);
    }

    @Override
    protected void onResume() {
        super.onResume();

        IntentFilter intentFilter = new IntentFilter("SmsMessage.intent.MAIN");
        mIntentReceiver = new BroadcastReceiver() {
        @Override
        public void onReceive(Context context, Intent intent) {
            String msg = intent.getStringExtra("get_msg");

            //Process the sms format and extract body &amp; phoneNumber
            msg = msg.replace("\n", "");
            String body = msg.substring(msg.lastIndexOf(":")+1, msg.length());
            String pNumber = msg.substring(0,msg.lastIndexOf(":"));

            //Add it to the list or do whatever you wish to
            TextView text = (TextView) findViewById(R.id.editText1);
            text.setText(body);
        }
    };

    this.registerReceiver(mIntentReceiver, intentFilter);
    }

    @Override
    protected void onPause() {
        super.onPause();
        this.unregisterReceiver(this.mIntentReceiver);
    }

} 
```

我还在 AndroidManifest.xml 中定义了活动，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
      package="com.example.smsTest"
      android:versionCode="1"
      android:versionName="1.0">

    <uses-sdk android:minSdkVersion="4" />
    <application android:icon="@drawable/icon" android:label="@string/app_name">
        <activity android:name=".SMSTest"
                  android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity android:name=".SMSReceiverActivity"></activity>
        <receiver android:name=".SmsReceiver">
            <intent-filter android:priority="2147483647">
                <action android:name="android.provider.Telephony.SMS_RECEIVED"/>
            </intent-filter>
        </receiver>
    </application>
    <uses-permission android:name="android.permission.SEND_SMS">
    </uses-permission>
    <uses-permission android:name="android.permission.RECEIVE_SMS">
    </uses-permission>

</manifest> 
```

我已密切关注在[此链接](http://shreymalhotra.me/blog/tutorial/receive-sms-using-android-broadcastreceiver-inside-an-activity/)上找到的教程。

它在那里说“我们在类本身中声明了一个 BroadcastReciever，而不是在 onResume() 方法中的清单，以便当应用程序返回前台时，它应该接收 SMS。”

我假设如果“SMSReceiverActivity”处于活动状态，它将接收来自 SmsReceiver（即 BroadcastReceiver）的消息。我尝试创建一个按钮来从我的 SMSTest.java 打开 SMSReceiverActivity，如下所示：

```
btnMsgRec.setOnClickListener(new View.OnClickListener() {
    public void onClick(View view) {
        Intent myIntent = new Intent(view.getContext(), SMSReceiverActivity.class);
        startActivityForResult(myIntent, 0);
    }

}); 
```

但是当我单击按钮时，应用程序崩溃了。

如果有人可以帮助我，我将非常感激。如何将 BroadcastReceiver 中的值作为新 Activity 传递给 SMSReceiverActivity.java。

谢谢

更新：

这是我单击“打开短信接收器”按钮后的 logcat：

```
04-07 11:38:16.878: D/AndroidRuntime(5269): Shutting down VM
04-07 11:38:16.878: W/dalvikvm(5269): threadid=1: thread exiting with uncaught exception (group=0x40a71930)
04-07 11:38:16.908: E/AndroidRuntime(5269): FATAL EXCEPTION: main
04-07 11:38:16.908: E/AndroidRuntime(5269): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.smsTest/com.example.smsTest.SMSReceiverActivity}: java.lang.RuntimeException: Your content must have a ListView whose id attribute is 'android.R.id.list'
04-07 11:38:16.908: E/AndroidRuntime(5269):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
04-07 11:38:16.908: E/AndroidRuntime(5269):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
04-07 11:38:16.908: E/AndroidRuntime(5269):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
04-07 11:38:16.908: E/AndroidRuntime(5269):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
04-07 11:38:16.908: E/AndroidRuntime(5269):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-07 11:38:16.908: E/AndroidRuntime(5269):     at android.os.Looper.loop(Looper.java:137)
04-07 11:38:16.908: E/AndroidRuntime(5269):     at android.app.ActivityThread.main(ActivityThread.java:5041)
04-07 11:38:16.908: E/AndroidRuntime(5269):     at java.lang.reflect.Method.invokeNative(Native Method)
04-07 11:38:16.908: E/AndroidRuntime(5269):     at java.lang.reflect.Method.invoke(Method.java:511)
04-07 11:38:16.908: E/AndroidRuntime(5269):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
04-07 11:38:16.908: E/AndroidRuntime(5269):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
04-07 11:38:16.908: E/AndroidRuntime(5269):     at dalvik.system.NativeStart.main(Native Method)
04-07 11:38:16.908: E/AndroidRuntime(5269): Caused by: java.lang.RuntimeException: Your content must have a ListView whose id attribute is 'android.R.id.list'
04-07 11:38:16.908: E/AndroidRuntime(5269):     at android.app.ListActivity.onContentChanged(ListActivity.java:243)
04-07 11:38:16.908: E/AndroidRuntime(5269):     at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:273)
04-07 11:38:16.908: E/AndroidRuntime(5269):     at android.app.Activity.setContentView(Activity.java:1881)
04-07 11:38:16.908: E/AndroidRuntime(5269):     at com.example.smsTest.SMSReceiverActivity.onCreate(SMSReceiverActivity.java:17)
04-07 11:38:16.908: E/AndroidRuntime(5269):     at android.app.Activity.performCreate(Activity.java:5104)
04-07 11:38:16.908: E/AndroidRuntime(5269):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
04-07 11:38:16.908: E/AndroidRuntime(5269):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
04-07 11:38:16.908: E/AndroidRuntime(5269):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T11:45:38.500

如日志：

> 您的内容必须有一个 ID 属性为“android.R.id.list”的 ListView

意味着如果要扩展，则需要将`ListView`id 更改为`android:id="@android:id/list"`in layout`activity_smsreceiver``ListActivity`

# c# - 套接字接受方法 id 像 while true

> ID：15861826
> 
> 赞同：0
> 
> 时间：2013-04-07T11:24:50.020
> 
> 标签：c#, .net, sockets, networking

```
TcpListener tcpserver;
Socket serverSocket = tcpserver.AcceptSocket(); 
```

这里的第二行就像`while(true)`我的意思是，在任何客户端连接到 tcp 服务器之前，它不会执行它下面的任何行。

我的问题是：我想通过这个 tcpserver 接受多个客户端，但是基于一个标志，`if admin_flag is TRUE`然后接受连接，否则不会。这个标志将随时由不同的线程切换。

我写了这段代码：

```
while (true)
{
    if(admin_flag==true)
    {
        Socket serverSocket = tcpserver.AcceptSocket(); 
    }
    else
    // do something...
} 
```

当我运行一次时，客户端已连接。但是当`admin_flag`被切换即设置为假时，它不会进入其他部分，这是因为控件保持在套接字的接受状态并且即使它在（真）时也不执行其他部分。

请指导？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T12:08:33.770

`AcceptSocket`是一个阻塞方法调用，这意味着它将阻塞执行线程，直到它可以接受传入的连接。如果没有与您的侦听器建立连接，则呼叫将继续无限期阻塞。

例如，您必须停止侦听器或切换到使用非阻塞`BeginAcceptSocket`或`AcceptSocketAsync`方法异步接受连接。

# c++ - 渲染时 3D 立方体出现拉伸

> ID：15861829
> 
> 赞同：0
> 
> 时间：2013-04-07T11:25:21.643
> 
> 标签：c++, opengl, 3d

我有一个将 3D 立方体绘制到屏幕上的基本 opengl 项目。我的分辨率是 1600 x 900。无论相机离立方体多远或近，立方体总是水平拉伸，看起来像一个三角形。我已经将同一个多维数据集加载到一个 java 项目中，并且它绘制得很完美。但是在 C++ 中使用相同的代码，我得到了拉伸效果。关于可能导致这种情况的任何建议？

```
GLvoid RenderSettings::init()
{
    const GLfloat FOV = 60.0F; 
    const GLfloat ASPECT_RATIO = getScreenWidth() / getScreenHeight();
    const GLfloat NEAREST_VIEW = 1.0F;
    const GLfloat FARTHEST_VIEW = 1000.0F;

    glViewport(0, 0, getScreenWidth(), getScreenHeight());

    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    gluPerspective(FOV, ASPECT_RATIO, NEAREST_VIEW, FARTHEST_VIEW);

    glClearColor(0.0, 0.0, 0.0, 1.0);
    glEnable(GL_DEPTH_TEST);
    glEnable(GL_CULL_FACE);
    glDepthFunc(GL_LEQUAL);
    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T11:47:15.087

这

```
const GLfloat ASPECT_RATIO = getScreenWidth() / getScreenHeight(); 
```

有你的问题。我假设`getScreenWidth`并`getScreenHeight`返回整数。在 C/C++ 中，当除以整数时，这发生在整数运算中，这意味着结果将（总是）向下舍入到下一个较小的整数。您将结果分配给的类型无关紧要。C/C++ 分别查看 L 值和 R 值的类型。您可以通过将除法的一侧类型转换为浮点数来修复它（通常您只需将两者都转换），即

```
GLfloat const ASPECT_RATIO = (float)getScreenWidth() / (float)getScreenHeight(); 
```

* * *

另请注意，`const`限定符是左关联的，即它作用于它的剩余部分。只有当它是变量定义语句中的*第一个*标记时，它才会向右移动。但是许多语言纯粹主义者（包括我）认为这看起来很难看。在类型之后也写 const 更适合自然语言。

# python - python中的数组语法

> ID：15861831
> 
> 赞同：0
> 
> 时间：2013-04-07T11:25:25.190
> 
> 标签：python, arrays, matlab, numpy, scipy

如何在python中说“从数组的开头”和“所有的数组”。例如，如果我在 Matlab 中的代码是：

```
images(:, n) = img(:) 
```

它在 python 中的等价物是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T14:06:11.163

这是 `images[:,n] = img.ravel()`

# jquery - 动画 jquery 和 css 滑块按钮

> ID：15861834
> 
> 赞同：0
> 
> 时间：2013-04-07T11:26:14.137
> 
> 标签：jquery, button, css-transitions

我试图找出一种方法来制作这个动画[http://tympanus.net/Tutorials/AnimatedButtons/index4.html](http://tympanus.net/Tutorials/AnimatedButtons/index4.html) 但在单击箭头之前不要展开。我在这里搜索并找到了一些接近此的方法，但是当我向它们添加样式时，它似乎变得一团糟。任何指针都会很好，或者很好地分解它是如何实现的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T11:54:20.983

如果您尝试在 css中将事件从 on 更改`mouseover/mouseenter`为 on ，您可以，根据演示 css 文件 - [Demo css](http://tympanus.net/Tutorials/AnimatedButtons/css/style4.css)您所要做的就是更改为`click`

`.a-btn:hover``.a-btn:active`

# javascript - 是否可以使用 Javascript 键入数字在页面之间导航？

> ID：15861837
> 
> 赞同：0
> 
> 时间：2013-04-07T11:26:36.840
> 
> 标签：javascript, jquery, html, wordpress

我试图找出是否可以使用 javascript 或 jQuery 使用数字键盘导航 Wordpress 网站。

有关 Flash 示例，请参见此处：[http](http://elevenfilm.com/) ://elevenfilm.com/ - 输入 3 位数字之一以转到该页面。

任何人都可以帮忙吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T11:32:28.457

这是一个简单的例子

HTML

```
<input type="text" />
<div class="page page120">You're on page 120</div>
<div class="page page240">You're on page 240</div>
<div class="page page360">You're on page 360</div> 
```

JS

```
$('input').keyup(function() {
   $('.page').hide();
   $('.page'+$(this).val()).show(); 
}); 
```

小提琴：http: [//jsfiddle.net/5G8m9/](http://jsfiddle.net/5G8m9/)

**编辑**

ajax 调用可能看起来像这样，具体取决于您的 dom 结构。您也可以设置主题标签以在 URL 中显示页面。

```
$('input').keyup(function () {
    $.ajax({
        url: "http://yourblog.com/page/"+$(this).val()
    }).done(function (data) {
        location.hash = $(this).val();
        $('.content').html(data);
    });
}); 
```

在这里阅读：http: [//api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T12:22:58.360

Sven 的编辑会起作用，但是更简单（无 AJAX）的方法是：

```
$(document).keyup(function (e) {
    var charCode = (96 <= e.which && e.which <= 105) 
        ? e.which - 48 
        : e.which;
    var keyVal = String.fromCharCode(charCode);
    if (!isNaN(parseInt(keyVal)))
        window.location.href = '/?pageId=' + keyVal
}); 
```

这只会将浏览器重定向到`www.domain.com/?pageId=<NumberPressed>`. 没有更多信息，很难改进这个答案。

编辑：这是一个基本的[JSFiddle](http://jsfiddle.net/8kJZ9/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T12:48:29.113

这是@DerFlatulator 答案的扩展，允许您在导航到页面之前输入一个 3 位数字

```
// keys and loc should be outside the scope of your event handler
// a list of valid keys and their values (0-9 and 0-9 on numberpad)
var keys = { "48": 0, "49": 1, "50": 2, "51": 3, "52": 4, "53": 5, "54": 6, "55": 7, "56": 8, "57": 9, "96": 0, "97": 1, "98": 2, "99": 3, "100": 4, "101": 5, "102": 6, "103": 7, "104": 8, "105": 9 };
// used to hold the page being typed
var loc = []; 

$(document).keyup(function(e) {
    if (keys[e.keyCode]) {
        if (keys.push(keys[e.keyCode]) == 3) {
            document.location.href = "/?pageId=" & loc.join("");
        }
    }
}); 
```

# qt - 应用程序关闭时出错：QGLContext::makeCurrent: 无法使无效的上下文成为当前的

> ID：15861839
> 
> 赞同：2
> 
> 时间：2013-04-07T11:26:55.610
> 
> 标签：qt, pyqt, vtk

我的应用程序使用 PyQt 并实例化一个`QVTKOpenGLWidget`. 当我的应用程序关闭时，我看到此错误出现在`stderr`：

```
QGLContext::makeCurrent: Cannot make invalid context current 
```

它似乎是无害的，但它看起来对我的用户来说很重要。我该如何预防？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T11:26:55.610

我不确定错误的含义或导致错误的原因，但消除它的最简单方法是确保`QVTKOpenGLWidget`在关闭应用程序的其余部分之前将其销毁：

```
self.qvtk = QVTKOpenGLWidget()
def delete_gl_widget():
    self.qvtk.setParent(None)
    del self.qvtk
QApplication.instance().aboutToQuit.connect( delete_gl_widget ) 
```

# c# - 有没有办法在不将 db4o 库引用到模型中的情况下实现透明激活？

> ID：15861844
> 
> 赞同：1
> 
> 时间：2013-04-07T11:27:12.510
> 
> 标签：c#, db4o

直截了当地说：我想拥有独立的对象模型，我不会引用任何数据库引擎库，这样我就可以在多个对象或文档数据库（例如 RavenDB、db4o、eloquera 等）中使用该模型.)

另一方面，我将首先设计 db4o，所以让我们想象以下对象模型类：

```
public class User : IActivatable
{
    [Indexed]
    private string name;

    [Transient]
    private string securityinfo;

    ....
} 
```

我已经拥有的一些解决方案（索引，级联）：

*   `[Indexed]`我可以在 dbconfig 端配置的属性，例如：`config.Common.ObjectClass(typeof(User)).ObjectField("name").Indexed(true);`
*   删除`[Transient]`属性 - ??
*   删除`IActivatable`- ?? （我正在考虑使用 Postsharp 的仪器，它可以在编译后注入接口的实现，但它仍然需要引用 Db4objects.Db4o.dll。Db4oTool 仪器可以做到吗？）

所以问题：

**如何从对象模型项目中删除对 Db4objects.Db4o.dll 的引用，并且仍然能够应用透明激活和瞬态（我已经介绍过的索引）等功能？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T15:40:33.217

关于*IActivatable*接口，db4o 确实需要可激活类型来实现该接口；如果您可以在模型程序集中使用 db4o 引用，那么 db4otool 可以为您添加此接口的实现（选项[-ta 可能还有 -collections](http://community.versant.com/documentation/reference/db4o-8.0/net35/reference/Content/advanced_topics/enhancement_tools/enhancement_for_.net/db4otool/db4otool_usage.htm?SearchType=Stem&Highlight=Db4oTool%7Cdb4otool%7CDb4oTools%7Cdb4oTool%7Cdb4otools)）（因此在源代码级别的模型类中没有对 db4o 的引用，也不需要做任何额外的工作）。

关于 TransientAttribute，您有一些选择：

*   改用 NonSerialized 属性
*   指定您自己的属性作为[瞬态](http://community.versant.com/documentation/reference/db4o-8.0/net35/reference/Content/configuration/common/mark_transient.htm?SearchType=Stem&Highlight=transient%7CTransient)处理。

希望这可以帮助！

# github - 在降价中突出显示特定行

> ID：15861848
> 
> 赞同：14
> 
> 时间：2013-04-07T11:27:26.363
> 
> 标签：github, markdown

我是 Markdown 的新手，我想知道是否可以突出显示源代码块的特定行，如本页所述

[http://en.support.wordpress.com/code/posting-source-code/](http://en.support.wordpress.com/code/posting-source-code/)

提前感谢您的回答，

编辑：为了更清楚，使用 wordpress 插件，您可以编写如下内容：

```
[code highlight="2,3"]
This line won't be highlighted.
This line will be highlighted.
This line will be highlighted.
This line won't be highlighted.
[/code] 
```

但显然，这不是降价语法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T11:34:24.127

在 SO 上，可以按照[高级帮助](https://stackoverflow.com/editing-help#syntax-highlighting)中的说明进行语言突出显示，但不能在代码块中进行格式化。

```
This is a code block
Markdown is **not** processed 
```

您可以使用引号来模仿您想要的内容：

> 此行不会突出显示。
> **该行将突出显示。**
> **该行将突出显示。**
> 此行不会突出显示。

您还可以通过在每行末尾使用两个空格来模仿您想要的内容：

此行不会突出显示。
**该行将突出显示。**
此行不会突出显示。

但当然，这些不会以等宽字体呈现，也不会得到语法高亮显示。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-07-03T19:25:18.687

可以做到，但没有 Markdown 语法，至少在最常见的风格上没有。幸运的是，您还可以在最常见的风格上嵌入**HTML**。

我的解决方案：

## 例子

```
 function main() {
    __config_bash
    **__config_xdg_dirs**
} 
```

## 代码

```
<pre><code>
    function main() {
        __config_bash
        <strong>__config_xdg_dirs</strong>
    }
</code></pre> 
```

# css - CSS边框不会出现

> ID：15861850
> 
> 赞同：0
> 
> 时间：2013-04-07T11:27:40.487
> 
> 标签：css, border

我的 CSS 边框不会出现在我尝试过的所有浏览器（firefox、safari、chrome）上

```
#content_right {
background-color: #FFF;
float: right;
height: 150px;
width: 400px;
margin-right: 20px;
border: 2px solid ##F89B29;

<div id="content_right">
  <div id="phone"><img src="images/phone.jpg" width="60" height="60" alt="Phone" /></div>
  <div id="phonenumber"><h1>8342 4526</h1></div>
  <div id="phonequote">free non obligation quote</div>
</div> 
```

我想它可能是我页面上的另一个元素。我正在使用dreamweaver，在设计视图中我的边框是可见的。

有什么线索吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T11:29:16.287

在边框颜色规范前面有第二个 #。你应该摆脱那个。

# ruby-on-rails - 复制资产文件

> ID：15861855
> 
> 赞同：0
> 
> 时间：2013-04-07T11:28:13.293
> 
> 标签：ruby-on-rails, assets

在我的 rails 应用程序中，我使用两个接口（for`user`和`admin`）。资产目录也分开（`assets`和`admin/assets`）今天我需要为两个接口实现相同的资产。

我怎样才能做到这一点并避免文件重复？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T13:59:56.837

我建议将应用程序资产的通用放在默认文件夹`app/assets`中，并将特定于管理员的资产放在`app/admin/assets`. 这样，您将拥有默认资产，这些资产将被管理资产覆盖。例如：如果您放置`background-color: blue`在您的`app/assets/stylesheets/mystyles.scss`中，它将被管理员命名空间中的 in`background-color: red`覆盖。`app/assets/stylesheets/myadminstyles.scss`

# inorder - 绘制前序、后序和有序树

> ID：15861862
> 
> 赞同：0
> 
> 时间：2013-04-07T11:29:17.643
> 
> 标签：inorder, preorder, postorder

绘制前序、后序和中序的规则是：

1.  前序遍历：根、左、右
2.  后序遍历：左、右、根
3.  中序遍历：左根，右

例如，如果我们有这样的表达式：

**ABCDEFGHIJKL,**

我怎样才能为这个表达式分别绘制（预购、后购和有序）。有可能我们对每个都有不同形式的树（预购、后购和有序）。（即两种形式的预购）。如果我们同时拥有 (pre-order and and in-order) 或 (post-order and in-order)，我们就可以拥有唯一的树。在预购中，第一个节点是根节点（即“A”是根节点）。在后序中，最后一个节点是根节点（即“L”是根节点）。

绘制这些树是否有任何总体公式或“规则”？我画不出来

编辑：我的意思是如何从以下遍历的每个前序、后序和中序构造树：

ABCDEFGHIJKL,

# javascript - 单击其他元素时添加 SVG 元素

> ID：15861863
> 
> 赞同：1
> 
> 时间：2013-04-07T11:29:18.163
> 
> 标签：javascript, svg, d3.js

我在 d3 中制作了一些圆圈。单击这些圆圈时，我需要添加更多圆圈并使现有圆圈消失（它们不应该被删除，因为我将再次使用它们）。

我现在这样做的方式是通过一个监听器来监听原始圆圈上的点击事件。（这些是用`.selectAll('circle.nodes')`

```
.on("click",function(d){
  //do stuff}).duration(1000);
   populateSubCircles); 
```

我希望子圆圈出现在一个中心周围（我查看了我的计算，它们似乎是正确的）。

```
 var populateSubCircles = function(){
    var subCircles = nodesG.selectAll("circles.subNodes").data(.... 
```

这正确地添加了辅助圆，并且 cx 和 cy 似乎是正确的（离中心圆不太远）。但是，它们似乎没有出现在页面上（它们出现在左上角的 0,0 处）。为什么会这样？我该如何解决？

谢谢。

编辑-一两张图片可能会有所帮助。

![我在检查元素下看到的](https://i.stack.imgur.com/VNSLo.png)

![我在浏览器中看到的](https://i.stack.imgur.com/5lbvS.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T15:16:08.207

很可能您没有在圆上设置半径（必须在圆元素上显式设置，并且不能通过 CSS 设置，因为只能设置填充、描边等样式属性）。

如您所见，一个 svg 圆在设置半径 ( `r`)时正常显示`25`，而另一个不正常显示，并且其大小正确报告为`0px x 0px`。（工具提示报告大小，而不是位置）。这是我使用的 SVG：

```
<svg>
    <circle cx="100" cy="100" fill="#ffdf00" 
         stroke="#222222" stroke-width="2px" />
    <circle cx="50" cy="50" fill="#ffdf00" r="25" 
         stroke="#222222" stroke-width="2px" />
</svg> 
```

此图像显示了两个圆圈中的第二个，使用 Chrome 网络工具中的检查器，它正确报告了大小：

![52 像素 x 52 像素](https://i.stack.imgur.com/nrjRc.png)

同样，在 Chrome 中使用检查器，突出显示第一个未设置半径的 SVG 元素：

![0 像素 x 0 像素](https://i.stack.imgur.com/X3Qb7.png)

它显示大小`0px x 0px`并显示圆圈，就好像它位于 SVG 文档的左上角一样。

[http://jsfiddle.net/wiredprairie/gNrZ3/](http://jsfiddle.net/wiredprairie/gNrZ3/)

# php - PHP处理会话和cookies不同的文件夹

> ID：15861873
> 
> 赞同：0
> 
> 时间：2013-04-07T11:30:52.933
> 
> 标签：php, session, session-variables, directory

我有问题。我创建了一个网络应用程序，该人登录并设置了许多 $_SESSION[...]。我发现奇怪的一点是，如果我登录文件夹[http://demo.site.com/](http://demo.site.com/)并登录[http://webapp2.site.com](http://webapp2.site.com)，我会在两个 Web 应用程序中混淆会话数据...

这是 checkentry.php 中的代码（在将其发送到主页之前检查人员是否已登录：

```
<?php
session_start();
    if(isset($_SESSION['autenticated']) && $_SESSION['autenticated'] == TRUE && isset($_COOKIE["login"]) && $_COOKIE["login"] == $_SESSION['ssnid']){
        if (!isset($_SERVER['HTTPS']) ){
            //header('Location: https://'.$_SERVER["HTTP_HOST"].$_SERVER["REQUEST_URI"].'');
        }   
        return true;
    }else{
        require_once("config.php");
        $logout_connect = mysql_connect($db_host, $db_user, $db_pass);
        if (!$logout_connect){
            die('Impossibile connettersi: ' . mysql_error());
        }else{
            mysql_select_db($db_name, $logout_connect);
            mysql_query("DELETE FROM sessions WHERE ssnid = '".$_SESSION['ssnid']."' AND userid = '".$_SESSION['userid']."'");
            setcookie("login", "", time()-3600);
        }
        session_destroy();
        header("location: login.php?requested");
    }
?> 
```

所以问题是，如果我在两个 Web 应用程序中都登录（并且在同一个域中在不同的文件夹中有许多 Web 应用程序），我会得到混合的 $_Session 数据。

**[编辑]** 当我从 app1.site.com 注销时，我也会从 app2.site.com 注销......

我做错了什么以及如何解决？

Tku

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T12:33:26.727

您可以为所有会话变量使用前置标题，并在每个 Web 应用程序中更改前置标题。

APP1

```
$pre = "app1";
if(isset($_SESSION[$pre.'autenticated']) && $_SESSION[$pre.'autenticated'] == TRUE) {} 
```

* * *

APP2

```
$pre = "app2";
if(isset($_SESSION[$pre.'autenticated']) && $_SESSION[$pre.'autenticated'] == TRUE) {} 
```

$pre 可以在 config.php 中定义

# matplotlib - matplotlib 图形的自定义背景部分

> ID：15861875
> 
> 赞同：2
> 
> 时间：2013-04-07T11:31:51.580
> 
> 标签：matplotlib

我想定义应该用于 y 值的颜色部分（蓝色：[0-15000]，绿色：[15000-23000]，红色[23000，]）。在matplotlib中是否有可能？

![图形](https://i.stack.imgur.com/cih5M.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T12:15:33.743

[您可以使用collections.BrokenBarHCollection](http://matplotlib.org/api/collections_api.html?highlight=brokenbarhcollection#matplotlib.collections.BrokenBarHCollection)为 matplotlib 图上的区域着色：

```
import matplotlib.pyplot as plt
import matplotlib.collections as collections

fig = plt.figure()
ax = fig.add_subplot(111)

# Plot your own data here
x = range(0, 30000)
y = range(0, 30000)
ax.plot(x, y)

xrange = [(0, 30000)]
yrange1 = (0, 15000)
yrange2 = (15000, 23000)
yrange3 = (23000, 30000)

c1 = collections.BrokenBarHCollection(xrange, yrange1, facecolor='blue', alpha=0.5)
c2 = collections.BrokenBarHCollection(xrange, yrange2, facecolor='green', alpha=0.5)
c3 = collections.BrokenBarHCollection(xrange, yrange3, facecolor='red', alpha=0.5)

ax.add_collection(c1)
ax.add_collection(c2)
ax.add_collection(c3)

plt.show() 
```

# java - 如何检查数组的所有元素是否相同

> ID：15861878
> 
> 赞同：3
> 
> 时间：2013-04-07T11:32:16.403
> 
> 标签：java, arrays

你怎么知道数组中的所有元素都是相同的？例如，a[] = {0, 0, 0, 0, 0, 0, 0}

你怎么知道 a[] 中的所有元素都是一样的？我是菜鸟，请简单回答。谢谢！:)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-07T11:35:26.550

将数组中每个单元格的值与其中一个单元格进行比较，例如。第一个单元格。如果所有比较显示值相同，则整个数组中的所有值都相同。

这是它的外观示例：

```
public static boolean allElementsTheSame(int[] array) {
    if (array.length == 0) {
        return true;
    } else {
        int first = array[0];
        for (int element : array) {
            if (element != first) {
                return false;
            }
        }
        return true;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T11:36:00.487

我会在c 做它好吗？a[] 是数组 allEquals 是布尔值 ArrayLenght 数组的维度

```
BOOL allEquals = true;

for (int i=1; i<ArrayLenght; i++) {
    if (a[i-1] != a[i])
        allEquals = false;
} 
```

现在在 allEquals 中，如果所有元素都相等，则为 true，否则为 false。

# mysql - 在 rpc 操作中对 mysql 的 socketstream 异步调用

> ID：15861879
> 
> 赞同：1
> 
> 时间：2013-04-07T11:32:25.590
> 
> 标签：mysql, node.js, asynchronous, socketstream

首先，我需要告诉你，我对 nodejs、socketstream、angularjs 和 JavaScript 的奇迹非常陌生。我来自 Java 背景，这可能解释了我对异步做事的正确方式的无知。

为了玩弄我从Americanyak安装了[ss-angular-demo](https://github.com/americanyak/ss-angular-demo)的东西。我现在的问题是 Rpc 似乎是一个同步接口，而我调用 mysql 数据库有一个异步接口。如何在调用 Rpc 时返回数据库结果？

这是我到目前为止使用 socketstream 0.3 所做的：

`ss.api.add('coolStore',mysqlConn);`在 app.js 中，我成功地告诉 ss 允许通过在正确的位置放置我的 mysql 数据库连接来访问（[如 socketstream 文档中所述](https://github.com/socketstream/socketstream/blob/master/doc/guide/en/rpc_responder.md#how-can-i-call-a-mongooseredisdbrest-api-from-my-rpc-actions)）。我使用 mysql npm，所以我可以在 Rpc 中调用 mysql

服务器/rpc/coolRpc.js

```
exports.actions = function (req, res, ss) {

  // use session middleware
  req.use('session');

  return {
    get: function(threshold){
      var sql = "SELECT cool.id, cool.score, cool.data FROM cool WHERE cool.score > " + threshold;
      if (!ss.arbStore) {
            console.log("connecting to mysql arb data store");
            ss.coolStore = ss.coolStore.connect();
      }

      ss.coolStore.query(sql, function(err, rows, fields) {
            if(err) {
                    console.log("error fetching stuff", err);
            } else {
                    console.log("first row = "+rows[0].id);
            }
      });
      var db_rows = ???
      return res(null, db_rows || []);
    }
  } 
```

控制台按预期记录了我的数据库条目的 ID。但是，我不知道如何使 Rpc 的 return 语句返回我的查询行。解决此类问题的正确方法是什么？

谢谢你的帮助。请对我友好，因为这也是我在stackoverflow上的第一个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T12:12:38.437

它不是同步的。当您的结果准备好后，您可以将它们发回：

```
exports.actions = function (req, res, ss) {

  // use session middleware
  req.use('session');

  return {
    get: function(threshold){
      ...
      ss.coolStore.query(sql, function(err, rows, fields) {
        res(err, rows || []);
      });
    }
  }
}; 
```

您需要确保始终`res(...)`从 RPC 函数调用，即使发生错误也是如此，否则您可能会收到悬空请求（客户端代码一直在等待从未生成的响应）。在上面的代码中，错误被转发给客户端，以便在那里进行处理。

# sql-server - SQL Server 在运行查询之前更改了我的字符串

> ID：15861882
> 
> 赞同：5
> 
> 时间：2013-04-07T11:32:57.350
> 
> 标签：sql-server, sql-server-2008-r2, collation

我尝试选择一些包含特殊字符的特殊记录，但 SQL Server 在运行查询之前更改了我的字符串字符。

例如：

```
 DECLARE @param NVARCHAR(30)

    SET @param=N'¤÷þ'--this is my special string that i want to be searched exactly.

    DECLARE @TSQL varchar(8000)
    SET @TSQL = 'SELECT * FROM MyTable WHERE MyFieldName LIKE %' + @param + '% '

    PRINT @TSQL

    --EXECUTE (@TSQL) 
```

但在结果（打印）中我看到：

```
SELECT * FROM MyTable WHERE MyFieldName LIKE '%¤÷þ?%' 
```

如您所见，字符串的某些部分转换为 (?) 字符，此问题导致我的`SELECT`命令返回空值。

我尝试将运行查询的数据库的排序规则更改为：

```
SQL_Latin1_General_CP1_CI_AS 
```

它适用于一些特殊的字符串，但它也不支持我的所有字符串。所以，问题来了：我怎样才能告诉 SQL Server，请不要更改我的字符串 ascii 代码？有没有办法（或任何排序规则）说 SQL Server 看到的字符串与现实中的字符串完全一样？

PS：我使用的是 SQL Server 2008 R2。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T11:45:20.543

> ```
> DECLARE @TSQL varchar(8000) 
> ```

`varchar(8000)`不能代表`¤÷þ`。继续做你正在做的事情`@param`；使用`NVARCHAR`基于的东西。

正如[usr](https://stackoverflow.com/users/122718/usr)正确指出的那样，您应该真正使用[`sp_executesql`](http://msdn.microsoft.com/en-au/library/ms188001.aspx)它以及它指定参数的能力。从文档中：

```
DECLARE @IntVariable int;
DECLARE @SQLString nvarchar(500);
DECLARE @ParmDefinition nvarchar(500);

/* Build the SQL string one time.*/
SET @SQLString =
     N'SELECT BusinessEntityID, NationalIDNumber, JobTitle, LoginID
       FROM AdventureWorks2012.HumanResources.Employee 
       WHERE BusinessEntityID = @BusinessEntityID';
SET @ParmDefinition = N'@BusinessEntityID tinyint';
/* Execute the string with the first parameter value. */
SET @IntVariable = 197;
EXECUTE sp_executesql @SQLString, @ParmDefinition,
                      @BusinessEntityID = @IntVariable; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T11:49:35.967

如果您有需要保留的特殊字符，请使用**Unicode**字符串类型`NVARCHAR`而不是`VARCHAR`- 就这么简单.....

```
DECLARE @param NVARCHAR(30)
SET @param = N'¤÷þ'--this is my special string that i want to be searched exactly.

DECLARE @TSQL NVARCHAR(4000)    -- <=== use NVARCHAR here
SET @TSQL = N'SELECT * FROM MyTable WHERE MyFieldName LIKE %' + @param + N'% '

PRINT @TSQL 
```

然后您的特殊字符**将保留**为输入....

正如其他人所指出的那样：像这样将您的 SQL 语句连接在一起绝不是一个好主意 - 它会使您的代码面临潜在的 SQL 注入攻击。您应该使用参数化查询，`sp_executesql`它允许您为查询定义和提供参数。

# haskell - 简单的柯里化解释

> ID：15861885
> 
> 赞同：0
> 
> 时间：2013-04-07T11:33:48.707
> 
> 标签：haskell, currying

我目前正在学习 Haskell，并且遇到了一种叫做*柯里化*和柯里化值的东西。

我还发现 (+) 是 + 的咖喱版本

```
+ :: (Integer, Integer) -> Integer
(+) :: Integer -> Integer -> Integer 
```

据我所知，非咖喱版你必须同时输入 2 个数字，而我完全迷失了咖喱版。

任何解释和例子都会非常感谢！

# twitter-bootstrap - Bootstrap 居中（和固定）导航栏

> ID：15861886
> 
> 赞同：0
> 
> 时间：2013-04-07T11:33:55.387
> 
> 标签：twitter-bootstrap, navigationbar

我有一个简单的问题。我想在这里修改模板[http://bootswatch.com/cosmo/](http://bootswatch.com/cosmo/)以使导航栏居中。正如您在示例中看到的，导航从容器的左侧开始。我想和谐地分布在容器的整个宽度上......并且在我向下滚动页面时被固定......

你有什么主意吗 ？我应该在 css 中修改什么？非常感谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T12:03:56.870

这是你要找的吗：http: [//jsfiddle.net/3eG7J/1/](http://jsfiddle.net/3eG7J/1/)

**CSS**

```
.navbar {
    position: fixed;
    width: 100%;
}

.navbar .nav {
   float: none;
}

.navbar .nav>li {
    width: 20%;
} 
```

`.navbar .nav>li`宽度取决于您有多少菜单项。

希望有帮助！

# bash - 在 28 个内核上运行查询的 Bash 脚本

> ID：15861888
> 
> 赞同：3
> 
> 时间：2013-04-07T11:34:10.177
> 
> 标签：bash, shell, sh

我试图让一个 outfile 查询在数组中的每个值运行一个进程，以加快从 mysql 导出数据的过程，我喜欢在多个内核上运行脚本。我的 bash 脚本是：

```
dbquery=$(mysql -u user -p -e "SELECT distinct(ticker) FROM db.table")
array=( $( for i in $dbquery ; do echo $i ; done ) )
csv ()
{
dbquery=$(mysql -u user --password=password -e "SELECT * FROM db2.table2 WHERE symbol = '$i' INTO OUTFILE '/tmp/$i.csv' FIELDS TERMINATED BY ',' LINES TERMINATED BY '\n'")
}

set -m

for i in 'seq 28'; do    #trying to run on 28 cores
  for j in ${array[@]}; do
    csv $j &
  done
  sleep 5 &
done

while [ 1 ]; 
do
  fg 2> /dev/null; [ $? == 1 ] && break;
done 
```

现在我运行了它，它也没有像我希望的那样导出文件，我不知道如何杀死进程。你能帮我理解如何解决这个问题，以便它会在每个股票代码上运行 outfile 查询吗？另外，如何在不杀死正在运行的其他脚本和程序的情况下终止当前正在运行的脚本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T17:47:45.233

您可以使用 xargs 自动处理作业调度：

```
dbquery=$(mysql -u user -p -e "SELECT distinct(ticker) FROM db.table")
array=( $( for i in $dbquery ; do echo $i ; done ) )
csv ()
{
dbquery=$(mysql -u user --password=password -e "SELECT * FROM db2.table2 WHERE symbol = '$i' INTO OUTFILE '/tmp/$i.csv' FIELDS TERMINATED BY ',' LINES TERMINATED BY '\n'")
}

export -f csv
echo "${array[@]}" | xargs -P 28 -n 1 bash -c 'csv "$1"' -- 
```

您的方法的问题在于，由于循环是嵌套的，因此您每次启动所有进程 28 次，而不是一次运行一次和 28 次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T12:02:40.570

`wait`将等到所有子进程完成。

```
for i in 'seq 28'; do    #trying to run on 28 cores
  for j in ${array[@]}; do
    csv $j &
  done
done    
wait 
```

# ios - 直接在代码中获取/设置属性时，Core Data 不会自动调用值转换器

> ID：15861892
> 
> 赞同：2
> 
> 时间：2013-04-07T11:34:42.060
> 
> 标签：ios, cocoa-touch, core-data, nsvaluetransformer

如果我理解正确，Core Data 可转换属性背后的想法是：

1.  实现一个`NSValueTransformer`带有返回的子类`[NSData class]`及其`+transformedValueClass`转换实现
2.  注册变压器`+load`或`+initialize`
3.  将实体的属性设置为可变形
4.  在 xcode 模型编辑器中为属性设置名称（用于注册它的名称）。

在这一点上，我希望访问或设置适当实体类型的 managedObject 中的属性会触发值转换器。但是，我正在使用的应用程序中对此进行测试，`AFIncrementalStore`并得到以下行为：

*   A - 注册变压器`+load`或`+initialize`似乎没有必要; 无论如何，Core Data 都会找到它（尽管请提前阅读）。
*   `AFIncrementalStore`B - 通过触发转换器获取请求。例如，我从获取请求中获取 JSON，当将响应字典映射到 managedObject 时，会触发转换器并将适当的字典键转换`NSData`为对象中的。
*   C - 但是，如果我尝试通过代码设置或获取属性，则不会调用转换器。这样做 `myManagedObject.myAttribute = @"hello"`不会触发从`NSString`to的转换`NSData`，也不会`NSString *myString = myManagedObject.myAttribute`触发从`NSData`to的转换`NSString`。

那么我错过了什么？我认为这个想法是 CoreData 会自动调用转换器。我错了吗？

根据这个问题：[为什么我的可转换核心数据属性不使用我的自定义 NSValueTransformer？](https://stackoverflow.com/questions/1598600/why-is-my-transformable-core-data-attribute-not-using-my-custom-nsvaluetransform) 这似乎是 Apple 框架中的一个错误。但是让我失望的是，通过 AFIncrementalStore 确实调用了值转换器。也许关键是通过代码设置一个属性，我并没有真正触发 AFIncrementalStore ，所以改变只是在内存中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T05:53:54.413

*（来自上面的评论：）在**保存*上下文时调用逆变器，而不是在设置属性时调用。

# jquery - 从 HTML5 拖放和 jquery 获取完整文件路径

> ID：15861895
> 
> 赞同：2
> 
> 时间：2013-04-07T11:35:12.500
> 
> 标签：jquery, html, drag-and-drop

有什么方法可以在 HTML5 中获取已删除文件的完整路径。我正在做的是，

```
$('.drop_target').on(
            {
                'dragover': function(e) {
                console.log('dragover');
                e.preventDefault();
            },
                'drop': function(e) {
                var file = e.originalEvent.dataTransfer.files;          
                console.log(file);
                e.preventDefault();
            }
        }); 
```

我想在 localhost 应用程序中使用此代码，因此我可以在浏览器或计算机中进行所需的任何类型的更改。

**编辑**

互联网上到处都有帖子说，由于安全原因，浏览器禁用了完整路径。有什么办法可以解除我自己的电脑的安全并让完整路径正常工作！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T12:03:08.143

好的，回答我自己的问题很奇怪，但我有一个解决方法是 100% 解决我的问题。答案是 mozilla 的 file.mozFullPath 属性。

```
console.log(file.mozFullPath) 
```

它只适用于火狐浏览器。我希望这个问题可能有一个通用的解决方案。

**编辑**

抱歉，是我的错。在最新版本的 Firefox（Firefox 17 等）中，file.mozFullPath 给出了完整路径，但在控制台中它返回空字符串。所以它不适用于最新的 Firefox 版本。

# javascript - 优化 Sencha Touch 2 中的搜索功能

> ID：15861898
> 
> 赞同：1
> 
> 时间：2013-04-07T11:35:29.973
> 
> 标签：javascript, performance, optimization, sencha-touch, sencha-touch-2

我希望我没有违反任何准则或任何内容，因为这主要是我的搜索设置的展示。底部有几个问题。我保证。

我制作了一个 Sencha Touch 2 PhoneGap 应用程序（现在[在 iOS 的 AppStore](https://itunes.apple.com/se/app/labblistan/id624197547?mt=8&uo=4)中上线，Android 很快就会准备好）。该应用程序的基本前提是一个（有点大的）可搜索列表（带有几个额外的过滤器）。因此，搜索性能至关重要。

我的搜索控制器的概要：在查看示例时，我发现人们使用提交按钮或在 keyup 上搜索，因为后者对我最感兴趣，这就是我开始的地方。

在我找到的示例中，仅激活了 keyup 侦听器，这是一个快速修复：

```
'searchfield[itemId=searchBox]' : {
       clearicontap : 'onClearSearch',
       keyup: 'onSearchKeyUp',
       submit: 'onSubmit',
       action: 'onSubmit',
       paste: 'onSubmit',
       blur: 'onSubmit'
    } 
```

现在，您可能会问，为什么 keyup 和 submit 不同？好吧，onSubmit 函数只是运行搜索函数（稍后会详细介绍）。onClearSearch 只是清除在商店中设置的过滤器，然后将非基于搜索的过滤器添加回来。

onSearchKeyUp 函数是有趣的地方。由于列表很大，搜索每一个字母都意味着性能不佳。搜索字段在搜索时停止（尤其是在旧设备上），因此当用户继续在键盘上敲击字母时，什么都没有显示，同时排队 javascript 并且（在某些情况下）导致用户再次敲击字母，这样当所有搜索功能都实际完成时，输入甚至可能不是用户想要的。

我通过尝试推断用户何时完成输入来解决此问题。我通过让 keyup 触发一个计时器来做到这一点，在这种情况下为 650 毫秒，如果在此期间触发另一个 keyup 事件，则计时器被取消，如果它运行它的过程，它会触发搜索功能。这个计时器当然可以设置得更高或更低。较低意味着用户打字速度更快，因为它不会在打字时搜索。较高意味着用户将不得不从他们的最后一个 keyup 事件开始等待更长时间才能开始实际搜索（被认为是滞后）。

当然，也有一个例外，如果keyup事件来自回车键，则立即搜索。代码：

```
 onSearchKeyUp: function(searchField,e) {
    if (e.event.keyCode == 13){
       window.clearTimeout(t);
       window.timer_is_on=0;
       searchFunction();
       } else {
       doTimer();
       }
       function timedCount()
       {
       t=setTimeout(function(){timedSearch();},650);
       }
       function timedSearch()
       {
       console.log('b4 search');
       searchFunction();
       window.timer_is_on=0;
       }

       function doTimer()
       {
       if (window.timer_is_on === 0)
       {
       window.timer_is_on=1;
       timedCount();
       } else {
       window.clearTimeout(t);
       window.timer_is_on=0;
       console.log('cleared timeout');
       doTimer();
       }
       }
       }

onSubmit: function(searchField,e) {
   if (window.timer_is_on === 0)
   {
   console.log('timer was not on when done was pressed');
   } else {
   console.log('timer was on when done was pressed');
   window.clearTimeout(t);
   window.timer_is_on=0;
   searchFunction();
   }
   } else {
   searchFunction();
   }, 
```

所以对于搜索功能。我想我在这里可能还有一些改进的空间。首先，我注意到当我向下滚动列表并搜索时，我可能最终会低于实际列表内容，无法向上滚动。所以搜索功能做的第一件事就是滚动到顶部。

正如我在文章开头提到的，我有一些额外的过滤器。这些是工具栏按钮，基本上设置变量然后触发搜索功能。在搜索功能中，过滤是基于变量完成的。我结合了搜索和过滤功能，因为它们都需要清除过滤器并将它们重新添加。

您还会注意到加载掩码和延迟。延迟完全是经验性的，结果表明加载掩码需要 25 毫秒的延迟才能实际显示。

我的搜索功能代码：

```
 function searchFunction() {
        Ext.Viewport.setMasked({
                               xtype: 'loadmask',
                               message: 'Searching'
                               });
        setTimeout(function() {
        Ext.getCmp('lablist').getScrollable().getScroller().scrollTo(0,0);
        var searchField = Ext.getCmp('searchBox');
        queryString = searchField.getValue();
        console.log('Please search by: ' + queryString);
        var store = Ext.getStore('LabListStore');
        store.clearFilter();
        genderFilterFuncForSearch();
        ageFilterFuncForSearch();
        if(queryString){
            var thisRegEx = new RegExp(queryString, "i");
            store.filterBy(function(record) {
                           if (thisRegEx.test(record.get('Analysis'))||thisRegEx.test(record.get('Groupname'))) {
                           return true;
                           }
                           return false;
                           });
        }},25);
    }
function ageFilterFuncForSearch() {
if (ageFilter === 'A') {
    Ext.getStore('LabListStore').filter('adult', '1');
} else if (ageFilter === 'C') {
    Ext.getStore('LabListStore').filter('child', '1');
}
    Ext.Viewport.setMasked(false);
}

function genderFilterFuncForSearch() {
if (genderFilter === 'M') {
    Ext.getStore('LabListStore').filter('Male', '1');
} else if (genderFilter === 'F') {
    Ext.getStore('LabListStore').filter('Female', '1');
}
} 
```

这基本上是我的搜索设置。因为这是我的第一个 Sencha Touch 项目，所以它是一种基于反复试验的工作流程，但现在看起来相当不错。希望有人能分享一些建议（希望我有一些你们中的一些人没有想到的）。

其中很大一部分是从大量不同的 SO 帖子中收集的，谢谢！

我保证我会问一些问题：

1.  您可以清除单个过滤器吗？
2.  如果是这样，检查设置了哪些过滤器然后只清除那些调用 store.clearFilter 的过滤器会更好吗？
3.  如您所见，我的搜索功能使用正则表达式，有没有办法在不将其转换为正则表达式对象的情况下实现相同类型的搜索，这对性能会更好吗？

PS。关于 1)- 我找到了一种方法， store.filter('field', '', true); 实际上会清除以相同方式设置的过滤器。我无法以同样的方式清除搜索过滤器。

# java - 在java中调用grep时，它不适用于法语字符

> ID：15861900
> 
> 赞同：1
> 
> 时间：2013-04-07T11:35:35.683
> 
> 标签：java, character-encoding, grep, text-processing

我在java中调用grep来分别计算语料库中单词列表的数量。

```
BufferedReader fb = new BufferedReader(
 new InputStreamReader(   
  new FileInputStream("french.txt"), "UTF8"));

while ((l = fb.readLine()) != null){
String lpt = "\\b"+l+"\\b";
String[] args = new String[]{"grep","-ic",lpt,corpus};
Process grepCommand = Runtime.getRuntime().exec(args);
grep.waitFor()
}
BufferedReader grepInput = new BufferedReader(new InputStreamReader(grep.getInputStream()));
int tmp = Integer.parseInt(grepInput.readLine());
System.out.println(l+"\t"+tmp); 
```

这适用于我的英语单词列表和语料库。但我也有一个法语单词表和语料库。它不适用于法语，java 控制台上的示例输出如下所示：

```
� bord      0
� c�t�      0 
```

正确形式：“à bord”和“à côté”。

现在我的问题是：问题出在哪里？我应该修复我的 java 代码，还是 grep 问题？如果是这样，我该如何解决。（即使我将编码更改为 UTF-8，我也无法在终端上正确看到法语字符）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T11:43:04.270

问题出在您的设计中。不要从 java 调用 grep。改用纯 java 实现：逐行读取文件并使用纯 java API 实现您自己的“grep”。

但说真的，我相信问题出在你的外壳上。您是否尝试手动运行 grep 并过滤法语字符？我相信它对你不起作用。它取决于您的 shell 配置，因此取决于*平台*。Java 可以提供*独立于平台*的解决方案。为了实现这一点，您应该尽可能避免使用非纯 java 技术，包括执行命令行实用程序。

顺便说一句，逐行读取文件并使用`String.contains()`或模式匹配进行行过滤的代码甚至比运行的代码更短`grep`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T16:41:39.380

我建议您逐行阅读文件，然后`split`在单词边界上调用以获取单词数。

```
public static void main(String[] args) throws IOException {
    final File file = new File("myFile");
    try (final BufferedReader bufferedReader =
            new BufferedReader(new InputStreamReader(new FileInputStream(file), "UTF-8"))) {
        String line;
        while ((line = bufferedReader.readLine()) != null) {
            final String[] words = line.split("\\b");
            System.out.println(words.length + " words in line \"" + line + "\".");
        }
    }
} 
```

这样可以避免从您的程序中调用 grep。

您得到的奇怪字符很可能与使用错误的编码有关。你确定你的文件是“UTF-8”吗？

**编辑**

OP 希望逐行读取一个文件，然后在另一个文件中搜索读取行的出现。

这仍然可以使用 java 更轻松地完成。根据您的其他文件有多大，您可以先将其读入内存并进行搜索，也可以逐行搜索

将文件读入内存的简单示例：

```
public static void main(String[] args) throws UnsupportedEncodingException, IOException {
    final File corpusFile = new File("corpus");
    final String corpusFileContent = readFileToString(corpusFile);
    final File file = new File("myEngramFile");
    try (final BufferedReader bufferedReader =
            new BufferedReader(new InputStreamReader(new FileInputStream(file), "UTF-8"))) {
        String line;
        while ((line = bufferedReader.readLine()) != null) {
            final int matches = countOccurencesOf(line, corpusFileContent);
        };
    }
}

private static String readFileToString(final File file) throws IOException {
    final StringBuilder stringBuilder = new StringBuilder();
    try (final FileChannel fc = new RandomAccessFile(file, "r").getChannel()) {
        final ByteBuffer byteBuffer = ByteBuffer.allocate(4096);
        final CharsetDecoder charsetDecoder = Charset.forName("UTF-8").newDecoder();
        while (fc.read(byteBuffer) > 0) {
            byteBuffer.flip();
            stringBuilder.append(charsetDecoder.decode(byteBuffer));
            byteBuffer.reset();
        }
    }
    return stringBuilder.toString();
}

private static int countOccurencesOf(final String countMatchesOf, final String inString) {
    final Matcher matcher = Pattern.compile("\\b" + countMatchesOf + "\\b").matcher(inString);
    int count = 0;
    while (matcher.find()) {
        ++count;
    }
    return count;
} 
```

如果您的“语料库”文件小于一百兆字节左右，这应该可以正常工作。任何更大的，你会想要改变“countOccurencesOf”方法像这样

```
private static int countOccurencesOf(final String countMatchesOf, final File inFile) throws IOException {
    final Pattern pattern = Pattern.compile("\\b" + countMatchesOf + "\\b");
    int count = 0;
    try (final BufferedReader bufferedReader =
            new BufferedReader(new InputStreamReader(new FileInputStream(inFile), "UTF-8"))) {
        String line;
        while ((line = bufferedReader.readLine()) != null) {
            final Matcher matcher = pattern.matcher(line);
            while (matcher.find()) {
                ++count;
            }
        };
    }
    return count;
} 
```

现在您只需将“文件”对象传递给方法而不是字符串化文件。

请注意，流式传输方法逐行读取文件并因此删除换行符，`String`如果您`Pattern`依赖它们存在，则需要在解析之前将它们添加回来。

# android - 向上滚动时在 ListView 中显示底部按钮栏，向下滚动时隐藏

> ID：15861903
> 
> 赞同：4
> 
> 时间：2013-04-07T11:35:58.557
> 
> 标签：android, listview, android-listview

我有一个巨大的列表视图，底部栏有三个按钮。现在，我的问题是，有没有办法在向下滚动时隐藏底栏（带按钮），并在向上滚动列表视图时显示它们？

就像 Google+ 在 iOS 应用程序中的处理方式一样。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-29T14:17:13.727

我找到了另一个带有 facebook 模式的链接，[Android Listview Floating First Row](https://stackoverflow.com/questions/15464649/android-listview-floating-first-row)

它有一个答案，它被称为快速返回模式，Roman 在这里详细解释了它以及一个示例：https: [//plus.google.com/u/0/+RomanNurik/posts/1Sb549FvpJt](https://plus.google.com/u/0/+RomanNurik/posts/1Sb549FvpJt)

# asp.net - .NET Lucene：为什么 BooleanQuery 中的 MultiFieldQueryParser 和 WhitespaceAnalyzer 查询不会产生正确的结果，如何解决？

> ID：15861904
> 
> 赞同：1
> 
> 时间：2013-04-07T11:35:59.060
> 
> 标签：asp.net, lucene, lucene.net

所以，我有一个要构建的简短查询。我使用布尔查询来指定从索引匹配的文档的“类型”字段必须是“想法”，然后我有一个用户给出的搜索字符串，可能是一个或多个单词。我希望能够以编程方式将结果限制为客户端仅包含索引中字段“类型”等于“索引”的文档，但我也希望他们的搜索词能够匹配搜索中的任何单词结果中带有单词的短语。我想我下面的代码解释了我到底想要什么。

```
WhitespaceAnalyzer analyzer = new WhitespaceAnalyzer();

MultiFieldQueryParser parser = new MultiFieldQueryParser(
    Version.LUCENE_30, new string[] { "company", "description", 
    "name", "posterName"},
    analyzer);

parser.AllowLeadingWildcard = true;

Lucene.Net.Search.Query query = parser.Parse(searchParam); 

BooleanQuery bq = new BooleanQuery(); 

TermQuery tQuery = new TermQuery(new Lucene.Net.Index.Term("type", "Idea"));

bq.Add(tQuery, Lucene.Net.Search.Occur.MUST);

bq.Add(query, Lucene.Net.Search.Occur.MUST); 
```

我在下面的相关代码中描述了我索引数据的方式：

```
Document doc = new Document();
doc.Add(new Field("type",
    "Idea",
    Field.Store.YES,
    Field.Index.ANALYZED));
doc.Add(new Field("company",
    (_idea.Company==null ?
      "Company Not Set for Idea" 
      : _idea.Company.Name),
    Field.Store.YES,
    Field.Index.ANALYZED));
doc.Add(new Field("description",
    _idea.Description,
    Field.Store.YES,
    Field.Index.ANALYZED));
doc.Add(new Field("name",
    _idea.Name,
    Field.Store.YES,Field.Index.ANALYZED));
if (_idea.Poster != null)
{
    doc.Add(new Field("posterName",
      _idea.Poster.FirstName + " " + _idea.Poster.LastName,
      Field.Store.YES, Field.Index.ANALYZED));
}
doc.Add(new Field("ID",
    _idea.ID.ToString(), Field.Store.YES,
    Field.Index.NOT_ANALYZED));
iWriter.AddDocument(doc); 
```

我不明白的是，当我搜索我知道索引中存在的给定单词时，它不会返回任何结果。只有当我使用诸如“*”之类的通配符或我得到任何结果的东西进行搜索时。我想的是，如果代码完全按照它对 MultiFieldQueryParser 上的文档所说的那样做，如果在文档中找到公司、描述、名称等参数中的任何字段，它将返回匹配项. 但事实并非如此。例如，在其中一个文档中，我知道我有一个“另一个想法”的名称字段。当我搜索“另一个”/“另一个”/“想法”/ 等时，它应该返回那个特定的文档。但它没有......但是，它确实按类型正确过滤了结果。

我需要做什么才能让这个简短的代码片段返回我想要的匹配项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T18:59:49.537

我想出了如何解决这个问题，结果证明这很简单（取决于您对 lucene 和使用 Visual Studio asp 项目的了解程度，我不太熟悉）。这是我的第一次。

事实证明，您可以使用 BooleanQuery 对象将不同的查询添加在一起，并指定您希望它们如何一起操作。然后，您可以将所有查询的最终总和传递给搜索者。

事实证明，我只是没有拆分对象并从中创建查询：我在下面附上了适用于我的示例解决方案：

```
 StandardAnalyzer analyzer =
        new StandardAnalyzer(Version.LUCENE_30);
    MultiFieldQueryParser mfqp = new MultiFieldQueryParser(
         Version.LUCENE_30, new string[] {"company", "description", 
         "name", "posterName"},
         analyzer);
    mfqp.DefaultOperator = MultiFieldQueryParser.OR_OPERATOR;
         mfqp.AllowLeadingWildcard = true;
         BooleanQuery innerExpr = new BooleanQuery();
         foreach (string s in searchParam.Split(new char[] {' '})) {
             innerExpr.Add(mfqp.Parse(s), Occur.SHOULD);
         }
   innerExpr.Add(new WildcardQuery(new Term("company", searchParam)), Occur.SHOULD);
   innerExpr.Add(new WildcardQuery(new Term("description", searchParam)), Occur.SHOULD);
   innerExpr.Add(new WildcardQuery(new Term("name", searchParam)), Occur.SHOULD);
   innerExpr.Add(new WildcardQuery(new Term("posterName", searchParam)), Occur.SHOULD);

   TermQuery tQuery = new TermQuery(new Term("type", "Idea"));

   //bq.Add(mfqp.Parse(searchParam), Lucene.Net.Search.Occur.MUST);
   TopDocs hits = sharedIndex.Search(innerExpr,
       new QueryWrapperFilter(tQuery), 1000, 
       new Sort(SortField.FIELD_DOC)); 
```

当我开始这样做时，我并不清楚整条路线。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-03T20:08:58.967

为了适应将来对索引的更改，您可以对该解决方案进行的一项改进是创建一个字符串数组变量来保存您的字段名称，例如：

```
string[] allFields = new string[] {"company", "description", 
     "name", "posterName"}; 
```

这反过来会给你一个价值放入你的解析器：

```
MultiFieldQueryParser mfqp = new MultiFieldQueryParser(
     Version.LUCENE_30, allFields, analyzer); 
```

以及遍历字段并使用单行添加通配符查询的能力：

```
foreach (string searchField in allFields) {
    innerExpr.Add(new WildcardQuery(new Term(searchField, searchParam)), Occur.SHOULD);
} 
```

然后，将来，您只需要向数组添加/更改/删除字段名称，而不必管理您的查询列表。

# android - 移动和平板电脑中的 ASP.NET cookie

> ID：15861911
> 
> 赞同：0
> 
> 时间：2013-04-07T11:36:26.100
> 
> 标签：android, asp.net, ipad, mobile, session-cookies

发生了有趣的问题...我正在开发 ASP.NET 网站，但有一个问题，我无法解释。我试过用谷歌搜索它，但没有成功。

主要问题是：我为用户定义了一个按钮退出，并且我正在使用会话，它使用 cookie（我正在使用这种会话机制，因为无 cookie 会话不允许来自一个外部 IP 地址的用户在我的服务器，这就是为什么我使用它来允许用户从一个外部 IP 使用我的网站，但如果他们有不同的内部 IP）机制。

所以在 PC 上我可以退出网站并且 cookie 值正在清理。但是我的朋友试图在他的智能手机和 iPad 上从 Android 访问网站。

除退出功能外，一切正常。他说，从 PC 上一切正常，但从 iPad 或 Android 手机上他无法退出。他在网站上授权，可以做所有事情，他可以在PC上，但不能退出。

我想知道，可能会出现什么，正是从 iPad/Android 智能手机中无法退出。

有什么建议么？

PS，一段代码：

```
void btnQuit_Click(object sender, ImageClickEventArgs e)
{
    string[] myCookies = Request.Cookies.AllKeys;

    foreach (string cookie in myCookies)
    {
        Response.Cookies[cookie].Expires = DateTime.Now.AddDays(-1);
    }

    Response.Redirect("Default.aspx");
} 
```

# c++ - 为什么我的 C++ 应用程序没有产生我期望的输出？

> ID：15861913
> 
> 赞同：-3
> 
> 时间：2013-04-07T11:36:52.303
> 
> 标签：c++

所以我得到了这个代码：

```
#include "stdafx.h"
#include "iostream"
using namespace std;

    int main()

    {

        int counter=1;
            char letter='i';
            while ( letter <= 'g')
        {       cout << letter << " ";
            if (counter % 10 == 0)
                cout << endl;

            }
            letter++;
                counter++;
            system("pause");

            return 0;

    } 
```

一旦我运行它，它就会给我这个：

![](https://i.stack.imgur.com/TX42Q.png)

它应该给我一个字母循环，但它什么也没给我。我不知道为什么。你们能帮忙吗？提前非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T11:39:31.490

你认为的预期输出是什么？你有几个系统消息，没有别的。这是因为`i`大于`g`并且您的`while`循环条件永远不会为真。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T11:48:56.107

除了 boris strandjev 发布的内容之外，`letter++`应该`counter++`在`while`循环内。

# mongodb - mongodb相当于map reduce

> ID：15861914
> 
> 赞同：0
> 
> 时间：2013-04-07T11:36:58.720
> 
> 标签：mongodb, mongoose

您好我想查询 mongodb 聚合的加减法

这就是我现在所做的，

```
//schema for image
{
votes : {type:Number},
comments : {type :Array},
name : {type:String}
}

var o = {};
o.map = function () { emit(this._id, (4*(parseInt(this.votes)))+(3*(parseInt(this.comments.length)))+(0*(parseInt(this.views)))) }(parseInt(this.comments.length)))))/(parseInt(currentDate-this.created_at.getDate())+1) }
o.reduce = function (k,v) { return parseInt(v); }
o.out = { replace: 'trending_images' }
o.verbose = true;
Image.mapReduce(o, function (err, model, stats) {
    console.log('map reduce took %d ms', stats.processtime)
model.find({created_at:{
            $gte : weekBack,
            $lt:today
            }}).sort('-value').limit(limit).skip(skip).exec(function (err, docs) {
    async.mapSeries(docs,function (doc,cb){
        cb(null,doc._id);
    },function (err,ids) {
        console.log("Trending mapreduce",JSON.stringify(ids),ids);
        return cb({_id:{$in:ids}})
    })
});
}); 
```

我如何在聚合框架中做类似的事情？

更新：这是我尝试过的。

```
Image.aggregate(
    {$project : {
        _id : 1,
        trending : {
            total_votes : {$multiply:["$votes", 4]},
            total_comments : {$multiply:["$comments.length", 3]},
            rank : {$sum:["$total_comments","$total_votes"]}
        }
    } },
    {$match:{created_at:{
                    $gte : weekBack,
                    $lt:today
                    }}
                },
        {$sort : {rank:-1} }
        ,
        function (err,images) {
    console.log(err,images);
}
) 
```

不确定这是否有效，因为它会引发错误，**[MongoError: no such cmd: aggregate]**

我检查了 mongodb 和 mongoosejs 的版本，mongodb 是版本**MongoDB shell 版本：2.4.1** **mongoosejs 是版本 3.6.4**

但是还是那个错误！我还能尝试什么？

# c# - 在运行时动态创建回退委托

> ID：15861915
> 
> 赞同：1
> 
> 时间：2013-04-07T11:37:01.713
> 
> 标签：c#, reflection, expression, ironpython

我正在尝试设置 C# 代码以自动为 IronPython 脚本调用的方法创建虚拟或后备委托，但尚未明确实现。

假设有一个脚本调用了非静态 C# 类方法“MoveTo”，该方法尚未在相应的类中实现。通常，如果它存在，则通过创建相应的委托实例将其添加到脚本的范围，该委托实例通过调用具有方法名称和委托实例的“SetVariable”赋予范围。这适用于已经实现的方法。

如果该方法尚未实现，则调用不会失败，而是被重定向到一个虚拟方法，该方法可以优雅地处理调用并*假装*成功执行（在我的特定情况下被认为是不重要的）。

问题是：IronPython 脚本调用的方法具有广泛的签名（实际上它们可以具有任何可能的签名）。因此，我想动态创建一个后备委托，它获得被调用方法的相同签名，因此“捕获”对尚未实现的方法的每次调用。

你们对我如何实现这个目标有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T19:55:01.640

您应该能够创建一个采用任意数量/类型的参数的包罗万象的方法：

```
object Fallback([ParamDictionary]IDictionary<object, object> kwargs, params object[] args) {
  return null; // or whatever
} 
```

（可悲的是，这与编写类似函数的普通 Python 方式相反：`def foo(*args, **kwargs):`。）

如果您不使用关键字 args，则可以删除它并使用`params`：

```
object Fallback(params object[] args) {
  return null; // or whatever
} 
```

然后使用`.SetVariable("whatever", Fallback)`使其成为后备方法。

# linux-kernel - Linux内核编程

> ID：15861916
> 
> 赞同：0
> 
> 时间：2013-04-07T11:37:07.513
> 
> 标签：linux-kernel

我想捕获 pipe() 系统调用，所以我更改了 pipe.c 中的源代码

```
static pipe_hook_t pipe_hook;
pipe_hook_t set_pipe_hook(pipe_hook_t hook)
{
    pipe_hook_t old_hook = pipe_hook;
    pipe_hook = hook;
    printk(KERN_INFO, "pipe hook: %p", hook);
    return old_hook;
}

EXPORT_SYMBOL_GPL(set_pipe_hook); 
```

然后我尝试在文件 syscalls.h 中定义 pipe_hook_t（包含在 pipe.c 中）

```
typedef void (*pipe_hook_t)(int *filedes);
pipe_hook_t set_pipe_hook(pipe_hook_t hook); 
```

我有错误：

```
fs/pipe.c:1130: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘pipe_hook’
fs/pipe.c:1131: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘set_pipe_hook’
fs/pipe.c:1138: error: ‘set_pipe_hook’ undeclared here (not in a function)
fs/pipe.c:1138: warning: type defaults to ‘int’ in declaration of ‘set_pipe_hook’
fs/pipe.c: In function ‘sys_pipe2’:
fs/pipe.c:1153: error: ‘pipe_hook’ undeclared (first use in this function)
fs/pipe.c:1153: error: (Each undeclared identifier is reported only once
fs/pipe.c:1153: error: for each function it appears in.)
fs/pipe.c:1154: error: implicit declaration of function ‘pipe_hook’ 
```

我试图创建自己的 .h 文件并在那里定义 pipe_hook_t 但错误是一样的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T14:57:36.930

Problem has been solved. I've just confused directory where header files are.

# input - Fortran 90：如何正确读取整数以及其他实数

> ID：15861918
> 
> 赞同：1
> 
> 时间：2013-04-07T11:37:16.160
> 
> 标签：input, format, fortran, fortran90

我创建了一个 Fortran 90 代码来过滤和转换另一个程序的文本输出为 csv 格式。该文件包含一个包含各种类型（字符、实数、整数）列的表。有一列通常包含十进制值（概率值）。**BUΤ，在某些行中，值应该是十进制“1.000”，该值实际上是整数“1”。**

我使用“F5.3”说明符来读取这一列，并且我对表格的每一行都有相同的格式语句。因此，当代码找到“1”时，它会读取“.001”，因为它没有找到小数点。

**我可以使用哪些方法来正确（并且通常）读取其他小数中的整数？** 我可以只为一些“空格”指定“未格式化”输入吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T13:52:18.310

您可以尝试使用列表导向输入：使用 * 而不是格式说明符。这将是整个阅读，而不是选定的项目。或者您可以将这些行读入字符串测试它们的内容以决定如何读取它们。如果子字符串有小数点：`read (string(M:N), '(F5.3)') value`. 如果不是，请使用不同的格式，例如，可能读为 as `F5.0`。

PS“未格式化”是在没有转换的情况下读取二进制数据......它是将数据从文件直接复制到数据项。“listed-directed”是 Fortran 术语，用于在不使用格式规范的情况下读取和转换数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T08:01:45.177

`fw.d`浮点格式规范 的数据编辑描述符用于通常与零一起使用*的输入*`d`（不能省略）。`d`当浮点数据存储为缩放整数，或者您从整数值进行一些单位转换时，在极少数情况下使用非零。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T18:20:57.827

好吧，这对我来说有些新意：f90 允许混合使用逗号和空格分隔符来进行简单的列表定向读取：

```
read(unit,*)v1,v2,v3,v4 
```

带输入

```
1.222  2 , 3.14 , 4 
```

产量

```
1.222000  2.000000 3.140000 4.000000 
```

# jquery - 使用 jQuery 检测屏幕大小并应用 CSS 样式

> ID：15861920
> 
> 赞同：2
> 
> 时间：2013-04-07T11:37:21.333
> 
> 标签：jquery, css

我在网上搜索并找到了许多示例，甚至在 stackoverflow 中也找到了许多示例，但没有一个是 100% 解释的。对于那些想用 CSS 媒体屏幕放置答案的人，请不要这样做我知道。但是这个问题更多是针对 IE7+ 的。因为它不支持“CSS 媒体屏幕”。

这是我找到的示例：

```
$(document).ready(function() {

if (screen.width>=800) {
    $("link[rel=stylesheet]:not(:first)").attr({href : "style1.css"});
    } else {
    $("link[rel=stylesheet]:not(:first)").attr({href : "style.css"});
    }
}); 
```

我是 jquery 的新手，所以如果我有 4 种不同的样式用于 4 种不同的屏幕分辨率，如何更改此脚本。

所以我会喜欢这样的东西：

1.  如果屏幕 > 1 && 屏幕 < 600
2.  如果屏幕 > 601 && 屏幕 < 1280
3.  如果屏幕 > 1281 && 屏幕 < 1600
4.  如果屏幕 > 1 1601

请帮我！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-07T11:40:34.133

您不需要 jQuery，而是使用 CSS3[媒体查询](https://developer.mozilla.org/en-US/docs/CSS/Media_queries)：

```
@media only screen and (max-width : 600px) {
   /* Styles for 1*/
}

@media only screen and (min-width : 601px) and (max-width : 1280px) {
   /* Styles for 2 */
}

@media only screen and (min-width : 1281px) and (max-width : 1600px) {
   /* Styles for 3 */
}

@media only screen and (min-width : 1601px) {
   /* Styles for 4 */
} 
```

好的，正如@RaduCelariu 提到的，要支持像 IE7 这样的旧浏览器，您可以使用自定义[插件](https://code.google.com/p/css3-mediaqueries-js/)来使 CSS3 媒体查询兼容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T11:47:23.713

实际上，媒体查询就是答案。只需使用[这个 shiv](https://code.google.com/p/css3-mediaqueries-js/)将媒体查询支持添加到 IE7 和 8 就可以了。不需要凌乱的javascript。

# c - N 命令管道“进程间”

> ID：15861924
> 
> 赞同：0
> 
> 时间：2013-04-07T11:38:05.140
> 
> 标签：c, operating-system, fork, pipe

我已经使用一个管道成功地通过管道传输了一个命令的输出。

我想用 N 个连续的命令来做到这一点，其中每个命令代表一个进程。

这是我对一个命令进行流水线化的尝试，所以要制作 N 个命令序列，我需要 n-1 个管道吗？以及所有进程之父如何收集输出并打印出来。

谢谢。

```
#include <stdio.h>
#include <unistd.h>
#include <sys/wait.h>
#include <string.h>

int main(int argc ,char *argv[])
{
    int i,pid;
    int fd[2];//crea i descriptor 
    char phrase[30][30];//crea il buffer
    pipe(fd); /* crea la pipe */

    for(i=0;i<argc;i++)
    {
        if((pid=fork())==0)
        {               
            strcpy(phrase[i], argv[i+1]);  
            printf("ho scritoo :'%s'\n",phrase);
            close(fd[0]);                         /* chiude in lettura */
            write(fd[1],phrase[i],strlen(phrase[i])+1); /* invia anche 0x00 */
            close (fd[1]);                   // chiude in scrittura
            // pid=0 -> figlio
            usleep(50000*(1+i));      // Ritardo iniziale
            printf("Figlio: %d\n",i+1);   // Stampa messaggio del figlio
            usleep(500000*(1+i));     // Ritardo finale
            return(101+i);            // Termina con codice di ritorno
        } else { 
            printf("Ho generato il figlio %d con pid %d\n",i+1,pid);
            char message[100];    //creare il buffer 
            memset(message,0,100);
            int bytesread;  

            bytesread = read(fd[0],message,sizeof(message));
            printf("ho letto dalla pipe %d bytes: '%s' \n",bytesread,message);
            // close(fd[0]);
        }
    }
    close(fd[0]);                         /* chiude in scrittura */
    close(fd[1]);                         /* chiude in scrittura */
    // Attende che dieci processi terminino
    for(i=0;i<argc-1;i++)
    {
        int status;
        wait(&status);      // Attende termine di un figlio (uno qualunque)
        printf("Terminato processo %d\n",WEXITSTATUS(status));
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T11:47:17.037

是的，您将有 N-1 个管道用于 N 个进程。您可以将所有进程打印到标准输出。由于每个子进程都将继承父进程的标准输出，因此它们都将打印到父进程的标准输出设置为任何内容。如果您通过将标准输出重定向到文件来启动链，那么它们都将打印到该文件。该问题将同步他们的写入，以便他们不会在另一个写入的中间写入。

如果要将所有子输出通过管道传输回原始父级，则可以让每个子级仅将其从自己子级管道中读取的所有内容写入其父级管道。每个孩子都以这种方式将它向上传递。

# javascript - javascript 无效量词在 asp.net 中破坏了我的 jQuery

> ID：15861925
> 
> 赞同：0
> 
> 时间：2013-04-07T11:38:22.547
> 
> 标签：javascript, jquery, asp.net

我想选择、突出显示并将匹配的字符串转换为链接。到目前为止，它可以在 jsFiddle 中找到。

但是当我尝试在 asp.net 网络表单中使用它时，相同的脚本会中断，我收到以下错误

```
SyntaxError: invalid quantifier
[Break On This Error]   

var pattern = new RegExp("("+this+")", ["gi"]); 
```

**实际代码**

```
function HighlightKeywords(keywords)
{        
var el = $("#article-detail-desc");
$(keywords).each(function()
{
    var pattern = new RegExp("("+this+")", ["gi"]);
    var rs = "<a href='search.aspx?search=$1'<span style='background-color:#FFFF00;font-weight: bold;background-color:#FFFF00;'>$1</span></a>";
    el.html(el.html().replace(pattern, rs));
});
}       

HighlightKeywords(["got", "the","keywords", " tags " ]); 
```

[http://jsfiddle.net/LE3sg/6/](http://jsfiddle.net/LE3sg/6/)

我不知道为什么我在 asp.net 网页表单页面中不断收到此错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T11:53:10.923

When looping an array with jQuery `each` should always use the arguments in callback to access the array element and use `$.each` method as opposed to `$(selector).each`

```
$.each(keyowrds, function(index, item)
{
    var pattern = new RegExp("("+item+")", ["gi"]); 
```

In code you are using if you log `typeof this` to console will find it is not actually a string

API reference: [http://api.jquery.com/jQuery.each/](http://api.jquery.com/jQuery.each/)

# bison - 此 Bison 代码中的移位/减少冲突在哪里？

> ID：15861926
> 
> 赞同：0
> 
> 时间：2013-04-07T11:38:33.517
> 
> 标签：bison, shift-reduce-conflict

我的野牛代码中有一个 Shit/reduce 冲突：

```
expression : LBRACKET expression RBRACKET  {$$ = $2;}
       | fct_call                          {}
       | operand                           {}    
       | expression operator_arith expression   {$$ = new NBinaryOperation(*$1, $2, *$3);}
       ; 
```

我可以解决它写作：

```
expression : LBRACKET expression RBRACKET compexp  // {$$ = $2;}
       | fct_call_in_exp compexp               {}
       | operand compexp                       {}
       ;
compexp : /* empty */     {/* Do smthg */}
    | operator_arith expression   {/* Do smthg */} 
```

但它需要对我的节点结构进行大量修改。因此，我正在寻找一种新的方法来解决它。你能帮助我吗 ？

祝你有美好的一天 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T19:05:30.177

这是模棱两可的：

```
expression : expression operator_arith expression 
```

问题是，如果您有多个中缀运算符（例如`A + B * C`），则可以先使用左运算符（远离解析树的根）或先使用右运算符对其进行解析。

您需要决定如何解决这种歧义，并将其添加到您的解析器中。通常的方法是定义优先级，表示某些运算符的优先级高于其他运算符（因此它们应该总是首先被解析），对于相同级别的运算符，左边的或右边的应该是第一个（经常提到到左递归和右递归）。

有两种方法可以进行这种消歧。您可以引入更多非终结符（每个优先级一个）并用它们编写语法（有许多示例语法使用这些额外级别的`term`和`factor`其他相关内容）。或者，您可以使用 bison 的内置`%left`和`%right`声明来设置各种运算符标记的优先级，并为每个产生式提供匹配的优先级（直接使用标记或使用`%prec`）。您需要为每个优先级（至少）单独制作，以便为它们提供不同的优先级。

Bison 的手册包含后一种风格的示例。

# regex - 在php中获取所有带有类的标签的内容

> ID：15861930
> 
> 赞同：-3
> 
> 时间：2013-04-07T11:39:01.283
> 
> 标签：regex, match

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T11:45:29.503

正则表达式是一个可怕的想法。但仍然 - 试试这个：`@<a href="members/.+/" class="username bigs" title="">(.+)</a>@U`

```
$subject = '..some code here..
<a href=\"members/username1.12345/\" class=\"username bigs\" title=\"\">Username 1</a>
..some code here..
..some code here..
<a href=\"members/username2.55334/\" class=\"username bigs\" title=\"\">Username 2</a>
..some code here..
..some code here..
<a href=\"members/username3.23455/\" class=\"username bigs\" title=\"\">Username 3</a>
..some code here..
..some code here..
<a href=\"members/username4.45545/\" class=\"username bigs\" title=\"\">Username 4</a>
..some code here..';

$pattern = '@<a href="members/.+/" class="username bigs" title="">(.+)</a>@U';

$result = preg_match_all($pattern, $subject, $subpattern);

echo '<pre>'.print_r($subpattern, TRUE).'</pre>'; 
```

# jsf - 如何从 h:outputlink 调用 Java 方法并传递值

> ID：15861933
> 
> 赞同：1
> 
> 时间：2013-04-07T11:39:18.910
> 
> 标签：jsf, jsf-2

我有这个输出'h：outputLink'来打开一个新页面并传递一个值：

```
<h:outputLink id="link" value="newpage.jsf"  style="text-decoration:none; color:white;">
    <f:param name="id" value="#{item.value}" />
</h:outputLink> 
```

我需要添加单击链接后调用的 Java 方法。我看到`h:outputLink`没有可用于调用 Java 方法的动作侦听器。我测试使用 `h:commandButton' 但表逻辑已更改并且无法正常工作。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T12:29:34.623

尝试使用“h:commandLink”而不是“h:outputLink”：

```
<h:commandLink id="lnkHidden" style="text-decoration:none; color:white;" actionListener="#{bean.pageRedirect}">
    <f:setPropertyActionListener target="#{bean.sessionValue}" value="#{item.value}" />
</h:commandLink> 
```

# html - 多个UL不同等级

> ID：15861941
> 
> 赞同：1
> 
> 时间：2013-04-07T11:40:35.383
> 
> 标签：html, list, css, html-lists

我对两个 UL 的位置有疑问。我希望两个 UL 处于同一水平。如下图所示，第一个 UL 列表在下方，而第二个在顶部。我能够在 jsfiddle 上重新创建它。

链接：http: [//jsfiddle.net/5krJU/](http://jsfiddle.net/5krJU/)

我能够弄清楚问题是因为第二个列表比第一个列表有更多的 li，但我无法修复它。

我当前的 css 如下所示：

```
#container {text-align: center; display:block;}
#container > ul { color:#776; display:inline-block; width:360px; list-style-type: none;} 
```

我的html是这样的：

```
<div id="container">
 <ul>
    <li>item</li>
    <li>item</li>
 </ul>
 <ul>
    <li>item</li>
    <li>item</li>
    <li>item</li>
    <li>item</li>
    <li>item</li>
    <li>item</li>
    <li>item</li>
    <li>item</li>
 </ul>
</div> 
```

这是它的图片： ![我的问题](https://i.stack.imgur.com/MmDe7.png)

## 更新

我找到了答案。

解决方案是添加 'vertical-align: top;' 到 ul 的。

请关闭这个问题。

很抱歉给您带来不便。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T12:01:18.493

由于它们是内联块，因此您需要调整垂直对齐方式。

[http://jsfiddle.net/5krJU/1/](http://jsfiddle.net/5krJU/1/)

**CSS**

```
#container > ul {
  color:#776;
  display:inline-block;
  width:60px;
  list-style-type: none;
  vertical-align: top
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T11:43:13.680

基本上，你只需要`float: left`列表。这个[JSFiddle](http://jsfiddle.net/NAA6Y/2/)应该让一切都清楚。干杯!

# php - 让我的 wordpress the_post_thumbnail 链接到永久链接

> ID：15861943
> 
> 赞同：0
> 
> 时间：2013-04-07T11:40:57.153
> 
> 标签：php, wordpress, permalinks

我正在尝试合并两行代码，作为一个代码菜鸟，不可避免地会遇到麻烦。我想使用提供的 lightwindow 类将我的帖子缩略图链接到永久链接。我还必须保留回声。

这是原始代码：

```
echo '<li>'; the_post_thumbnail('blog-post-thumb'); echo '</li>'; 
```

这就是我想要整合的内容。

```
<h3><a href="<?php the_permalink();?>" class="lightwindow"><?php the_title(); ?></a></h3> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T13:27:19.767

为什么不使用`php`这样的连接：

`echo "<a class='lightwindow' href='".the_permalink()."'><li>".the_post_thumbnail('blog-post-thumb')."</li></a>";`

这样你只需要使用`echo`一次而不是一堆时间。

这是不必要的。

# java - 表生成器创建的 ID 不会持久化到对象

> ID：15861944
> 
> 赞同：0
> 
> 时间：2013-04-07T11:41:12.370
> 
> 标签：java, spring, hibernate, jpa, spring-data-jpa

我创建了以下实体类，其中主键由表生成器计算。

```
@SuppressWarnings("serial")
@Entity
public class Article implements Serializable {

    @Id
    @TableGenerator(name = "ARTICLE_TABLE_GEN", table = "sequences", pkColumnName = "seq_name", valueColumnName = "seq_count", pkColumnValue = "ART_SEQ")
    @GeneratedValue(strategy = GenerationType.TABLE, generator = "ARTICLE_TABLE_GEN")
    private long id; 
```

在调试日志中，我读到生成工作。

> [DEBUG] 生成标识符：200，使用策略：org.hibernate.id.MultipleHiLoPerTableGenerator

实体由 JpaRepository 管理。

```
@Repository
public interface IArticleRepository extends JpaRepository<Article, Long> {

    List<Article> findByShortTextLike(String shortText);
} 
```

在 Java 代码中，我通过服务访问此存储库。

```
@Service
public class ArticleService implements IArticleService {

    @Autowired
    private IArticleRepository articleRepository;

    @Override
    @Transactional(readOnly = true)
    public Article getArticleByID(long id) {
        return this.articleRepository.findOne(id);
    }

    @Override
    @Transactional
    public Article createArticle(String shortText, String longText,
            String packageUnit, double weight, String group, char abcClass) {

        if (getArticleByShortText(shortText).size() == 0) {
            Article article = new Article();
            article.setShortText(shortText);
            article.setDescription(longText);
            article.setPackageUnit(packageUnit);
            article.setWeight(weight);
            article.setMaterialGroup(group);
            article.setClassABC(abcClass);
            this.articleRepository.saveAndFlush(article);
            return article;
        } else
            return null;
    }

    @Override
    @Transactional(readOnly = true)
    public List<Article> getArticleByShortText(String short_text) {
        return this.articleRepository.findByShortTextLike(short_text);
    }
} 
```

在服务方法“createArticle”调用存储库以将新实例保存并刷新到数据库之后，这完美地完成了。但是，生成的 ID 不会写入该方法返回的对象。

我记得这是在我对数据库列使用 AUTO_INCREMENT 规范时完成的。为什么在新案例中不会发生这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T16:59:53.787

我没有使用 Spring-data-JPA 的经验，但是 saveAndFlush() 的 javadoc 显示它返回一个实体。所以它可能在`EntityManager.merge()`内部使用。尝试将您的代码更改为

```
article = this.articleRepository.saveAndFlush(article);
return article; 
```

# java - Netbeans 抛出 NumberFormatException

> ID：15861945
> 
> 赞同：0
> 
> 时间：2013-04-07T11:41:12.823
> 
> 标签：java, numberformatexception

> 线程“AWT-EventQueue-0”java.lang.NumberFormatException 中的异常：对于输入字符串：java.lang.NumberFormatException.forInputString(NumberFormatException.java:48) 处 java.lang.Integer.parseInt(Integer.java) 处的“1.0” :458) 在 java.lang.Integer.parseInt(Integer.java:499) 在 newform.fivth.(fivth.java:150) 在 newform.fivth$3.run(fivth.java:623) 在 java.awt.event .InvocationEvent.dispatch(InvocationEvent.java:209) 在 java.awt.EventQueue.dispatchEvent(EventQueue.java:597) 在 java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:269) 在 java.awt.EventDispatchThread.pumpEventsForFilter( EventDispatchThread.java:184) 在 java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:174) 在 java.awt.EventDispatchThread。pumpEvents(EventDispatchThread.java:169) 在 java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:161) 在 java.awt.EventDispatchThread.run(EventDispatchThread.java:122)

这是错误所指的代码部分：

```
while (results4.next())
{
for(int i=1;i<=12;i++)
            {
         x.add(Integer.parseInt(results4.getString(i))+0.5);       

            }  

}
}
catch(SQLException sqlEx){
System.out.println(
"* Error retrieving data! *");
sqlEx.printStackTrace();
System.exit(1);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-10T19:15:14.120

根据 Java，字符串`"1.0"`不能表示为`int`，但可以表示为`double`。的解析逻辑`Integer.parseInt`期望*没有*小数点，即使小数点后只有一个零。

引用[Javadoc`Integer.parseInt`](http://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html#parseInt(java.lang.String))

> 将字符串参数解析为有符号十进制整数。字符串中的字符必须都是十进制数字，除了第一个字符可以是ASCII减号'-'（'\u002D'）表示负值或ASCII加号'+'（'\u002B'）表示正值。

它不需要小数点。

如果您必须接受`String`诸如`"1.0"`并存储结果`int`，那么我会将其解析为`Double`then call `intValue`。而不是以下内容：

```
Integer.parseInt(results4.getString(i)) 
```

我会用这个：

```
Double.valueOf(results4.getString(i)).intValue() 
```

当然，您必须使该值确实是整数。有关这些详细信息，请参阅[此 SO question](https://stackoverflow.com/questions/9898512/how-to-test-if-a-double-is-an-integer)。

# java - 在 Java 中为大字符串添加前导零

> ID：15861947
> 
> 赞同：0
> 
> 时间：2013-04-07T11:41:25.747
> 
> 标签：java, eclipse

我目前正在用 Java 制作拍卖程序，我正在尝试制定截止日期，但是我的日期一直显示为 (7/04/2013 11:22)，有没有办法使用 String.format 添加前导零到这个日期，当它是一个数字的日子？

```
String timeOne = Server.getDateTime(itemArray.get(1).time).toString() 
```

稍后当我尝试对其进行子字符串化时，它会导致我出现问题，并且它的长度小于 17 个字符。

提前感谢，詹姆斯。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-07T12:02:51.307

@Leonard Brünings 的回答是正确的。这就是为什么您的原始代码是错误的方式......即使它有效。

javadoc for`Calendar.toString()`是这样说的：

> "*返回此日历的字符串表示形式。此方法仅用于调试目的，返回字符串的格式可能因实现而异。* "

基本上，您正在使用`toString()`javadoc 说您不应该使用的目的。即使您调整了 的输出`toString()`，您的代码也可能很脆弱。JVM 中的更改可能会破坏它。更改语言环境可能会破坏它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-07T11:48:56.653

只需使用 SimpleDateFormat

```
import java.text.SimpleDateFormat;

Calendar timeOne = Server.getDateTime(itemArray.get(1).time)

SimpleDateFormat sdf = new SimpleDateFormat("MM/dd/yyyy HH:mm")

System.out.println(sdf.format(timeOne.getTime())) 
```

# php - 上传图片，不行

> ID：15861950
> 
> 赞同：0
> 
> 时间：2013-04-07T11:41:32.700
> 
> 标签：php, html, mysql

我正在尝试在数据库中上传图片，但是当我检查它是否已上传时，该字段为空。我还想限制上传文件类型格式 jpeg、png 和 gif。请帮忙

HTML

```
<form enctype="multipart/form-data" action="subePic.php" method="post" name="changer">
   <input name="MAX_FILE_SIZE" value="102400" type="hidden">
   <input name="image" accept="image/jpeg" type="file">
   <input value="Submit" type="submit">
</form> 
```

PHP

```
<?php
require('conecta.php');
if (isset($_FILES['image']) && $_FILES['image']['size'] > 0) { 
    $tmpName  = $_FILES['image']['tmp_name'];  
    $fp      = fopen($tmpName, 'r');
    $data = fread($fp, filesize($tmpName));
    $data = addslashes($data);
    fclose($fp);

    $xSQL = "INSERT INTO FOTOS (PIC) VALUES(?)";
    $stmt = $oConni->prepare($xSQL);
    $stmt->bind_param('s', $data);
    $stmt->execute() or die($oConni->error);
    $stmt->close();

    if(!$xSQL){
        die("Database query failed: ". mysql_error());
    }

    print "Su foto fue subida con éxito";
}
else{
    print "Error: no se subió ninguna imagen a la BD";
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T11:56:12.833

如果超过最大文件大小（100kb 不大），$_FILES 包含错误消息 2，文件大小显示为 0。

您可以检查以下内容：

```
if($_FILES['image']['error'] !== 0) { ... error handling } 
```

错误代码在这里找到：http: [//php.net/manual/en/features.file-upload.errors.php](http://php.net/manual/en/features.file-upload.errors.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T11:57:15.040

对于类型检查和大小，你应该有这样的东西：

```
if ((($_FILES["file"]["type"] == "image/gif")
|| ($_FILES["file"]["type"] == "image/jpeg")
|| ($_FILES["file"]["type"] == "image/pjpeg"))
&& ($_FILES["file"]["size"] < 90000))
  {
  if ($_FILES["file"]["error"] > 0)
    {
    echo "Error: " . $_FILES["file"]["error"] . "<br />";
    }
  else
    {
    echo "Upload: " . $_FILES["file"]["name"] . "<br />";
    echo "Type: " . $_FILES["file"]["type"] . "<br />";
    echo "Size: " . ($_FILES["file"]["size"] / 1024) . " Kb<br />";
    echo "Stored in: " . $_FILES["file"]["tmp_name"];
    }
  }
else
  {
  echo "Invalid file";
  } 
```

插入图像你应该有这个：

```
if(isset($_FILES['image']) && $_FILES['image']['size'] > 0) {
$tmpName  = $_FILES['image']['tmp_name'];

      $fp   = fopen($tmpName, 'r');
      $data = fread($fp, filesize($tmpName));
      $data = addslashes($data);
      fclose($fp);
      // Create the query and insert
      // into our database.
      $query ="INSERT INTO tbl_images(image)VALUES('".$data."')";
      $results=mysql_query($query) or die(mysql_error());
          // Print results
      print "Thank you, your file has been uploaded.";
        }
else {
   print "No image selected/uploaded";
} 
```

}

您可以使用 prepare 而不是 mysql_query 它基于您的 conecta.php

# html - 垂直居中图像html

> ID：15861952
> 
> 赞同：0
> 
> 时间：2013-04-07T11:41:56.503
> 
> 标签：html, css, image

```
<div class="store_module" id="@store.ID" style="
    margin-left: 0px;
    overflow: hidden;
    display: block;
    background-color: #343233;
    cursor: pointer
  ">
<div class="store_image" style="
    float: left;
    overflow: hidden;
    width: 100px
">
<img src="@store.ImageLogo" style="
  display: block; 
  margin: auto;
"/>
</div>
</div> 
```

为什么我不能垂直居中徽标图片？这一定很容易，但我真的找不到答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T11:44:58.323

给它的父级`display: table;`和图像`display: table-cell;`和`vertical-align: middle;`：

```
.store_image {
    display: table;
}
.store_image img {
    display: table-cell;
    vertical-align: middle;
} 
```

顺便说一句，有很多网站，甚至关于 SO 的问题，都描述了这个问题。（[证明](https://www.google.nl/search?q=css+vertically+center+image&aq=1&oq=css+vertically+center+i&aqs=chrome.2.57j0l3j60l2.9718j0&sourceid=chrome&ie=UTF-8)）

编辑：

据此，[您](http://css-tricks.com/snippets/css/absolute-center-vertical-horizontal-an-image/)可以省略`display:`规则。

# java - 在模拟器上启动 Android 应用程序？

> ID：15861961
> 
> 赞同：-1
> 
> 时间：2013-04-07T11:43:37.713
> 
> 标签：java, android, android-emulator

我是开发 Android 应用程序和开发 HelloWorld 应用程序的新手。

```
@Override
    protected void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);

        TextView text = new TextView(this);
        text.setText("Hello World");
        setContentView(text);

    } 
```

但是当我在 AVD 上运行我的应用程序时，我的控制台中会出现以下情况。

```
[2013-04-07 17:01:31 - Myapp] R.java was modified manually! Reverting to generated version!
[2013-04-07 17:01:48 - Myapp] ------------------------------
[2013-04-07 17:01:48 - Myapp] Android Launch!
[2013-04-07 17:01:48 - Myapp] adb is running normally.
[2013-04-07 17:01:50 - Myapp] Performing com.example.myapp.MainActivity activity launch
[2013-04-07 17:01:53 - Myapp] Automatic Target Mode: using existing emulator 'emulator-5554' running compatible AVD 'dv'
[2013-04-07 17:01:53 - Myapp] Uploading Myapp.apk onto device 'emulator-5554'
[2013-04-07 17:01:54 - Myapp] Installing Myapp.apk...
[2013-04-07 17:02:05 - Myapp] Success!
[2013-04-07 17:02:05 - Myapp] Starting activity com.example.myapp.MainActivity on device emulator-5554 
```

模拟器也启动。但它不打印 HelloWorld。

![在此处输入图像描述](https://i.stack.imgur.com/PGM08.png)

我怎样才能让我的应用程序运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T11:44:45.633

给模拟器一些时间（大约 10 分钟）。他需要很长时间才能启动。如果您等待很长时间，那么 android 徽标将消失，您将收到主屏幕。

你可以看看我写的这篇关于如何加速模拟器的博客文章：

[加速模拟器](https://blog-emildesign.rhcloud.com/?p=527)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T11:46:25.633

android 模拟器可能需要一段时间才能加载。有时我可能需要三四分钟才能看到 android 主屏幕

# php - 注册页面 - PHP 错误

> ID：15861965
> 
> 赞同：0
> 
> 时间：2013-04-07T11:43:59.717
> 
> 标签：php, mysql, registration

我已经使用 PHP 创建了一个注册页面。控件总是进入其他部分（'错误'）。我已经定义了数据库，使用了表单字段中使用的相同 ID，但仍然相同。我无法弄清楚这一点。我真的很感激任何帮助。

这是我的代码：

```
<?php
require_once 'connectdb.php';

$dbc = mysqli_connect($mysql_host, $mysql_user , $mysql_pass , $mysql_db ) or die('Error Connecting to database');
if ( isset($_POST['submit'] ) )
{

$first_name =  mysqli_real_escape_string($dbc, trim($_POST['first_name']));
$last_name =  mysqli_real_escape_string($dbc, trim($_POST['last_name']));
$password1 =  mysqli_real_escape_string($dbc, trim($_POST['password1']));
$password2 =  mysqli_real_escape_string($dbc, trim($_POST['password2']));
$email = mysqli_real_escape_string($dbc, trim($_POST['email']));

if (!empty($first_name) &&  !empty($last_name) && !empty($password1) && !empty($password2) && ($password1==$password2) )
{
    $query = "SELECT * FROM user_db WHERE email='$email'";
    $data = mysqli_query($dbc, $query);
    if(mysqli_num_rows($data) == 0) 
    {
        $password2 = md5($password1);
        $query = "INSERT INTO user_db(fname, lname, email, password) VALUES('$first_name','$last_name','$email','$password2')";
        $data = mysqli_query($dbc, $query) or die('Error Querying database-Adding info');
        echo '<strong>Registration Successful</strong>';

        mysqli_close($dbc);
        exit();
    }
    else
    {
        echo 'An account already exists for with this email id. Kindly use a different one<br /> ';
        $email = "";
    }
}

else
{
    echo 'Please enter all the fields correctly, including the desired password correctly <br/>';
}

}
 // The control goes everytime into this else part
 else
{
    echo 'Error';
}

mysqli_close($dbc);

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T11:49:30.273

`$_POST['submit']`未设置。这就是您的代码进入“错误”部分的原因。

您必须设置 html 元素的名称，以便 PHP 知道要查找的内容。

像这样的东西：

```
<form action="index.php" method="POST" > 
First Name :    <input type="text" id="first_name" name="first_name" /><br/> 
Last Name : <input type="text" id="last_name" name="last_name" /><br/> 
Email    : <input type="text" id="email" name="email" /><br/> 
Password : <input type="password" id="password1" name="password1" /><br/> 
Repeat Password:<input type="password" id="password2" name="password2" /><br/> 
<input type="submit" id="submit" value="submit" name="submit" /> </form> 
```

还要考虑不要混合 html 元素的类型和它们的 id/name。submit 不是 html 元素的最终名称，因为它可能会带来很多混乱。而是将提交按钮命名为：

```
<input type="submit" id="submit-registration" value="submit" name="submit-registration" /> </form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T11:48:54.433

请显示 HTML。我的猜测是您的表单中没有带有and a的`<input>`标签:-)`name="submit"``value="something"`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T11:51:54.587

这告诉你一件事..`submit`没有在你的论坛中通过。这是一个简单的测试。在您的表单中添加这样的输入`<input type="text" name="submit" />`，然后重试

# python - 使用 st_mode 识别文件或目录

> ID：15861967
> 
> 赞同：4
> 
> 时间：2013-04-07T11:44:20.507
> 
> 标签：python, paramiko, stat

有什么方法可以使用 st_mode 值来识别对象是文件还是目录？我正在使用 paramiko lstat() 从 sftp 文件中检索 st_mode 信息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T11:46:12.813

是的，[统计结构](http://docs.python.org/2/library/os.html#os.stat) `st_mode`确实包含该信息。

使用[`stat`模块](http://docs.python.org/2/library/stat.html)判断是否为目录：

```
import stat

if stat.S_ISDIR(lstat_result.st_mode): 
```

# android - 如何防止用户关闭我的应用程序？

> ID：15861970
> 
> 赞同：13
> 
> 时间：2013-04-07T11:44:25.733
> 
> 标签：android, locking, exit

我有一个将在餐厅使用的 android 应用程序，所以我希望用户不能退出该应用程序。用户唯一能做的就是使用应用程序。

（如果可能，只有管理员可以退出应用程序，通过登录或重新启动设备，我不知道哪个是最好的方法）。

有没有解决方案或其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T12:22:04.203

你可以`override`的`onBackPressed`方法

```
@Override 
public void onBackPressed(){  
  Toast.MakeText(getApplicationContext(),"You Are Not Allowed to Exit the App", Toast.LENGTH_SHORT).show();
} 
```

这将防止后退按钮退出应用程序。

然后你 需要`override`像`home button`

```
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_HOME) {
        Log.i("TEST", "Home Button");  // here you'll have to do something to prevent the button to go to the home screen 
        return true;
    }
    return super.onKeyDown(keyCode, event);
} 
```

编辑：对于具有 android 版本 4.0.xx 的新设备，您也必须希望`override`对您有所`recent apps button`帮助。

# python - 如何处理 lxml 中的编码以正确解析 html 字符串？

> ID：15861982
> 
> 赞同：7
> 
> 时间：2013-04-07T11:45:53.530
> 
> 标签：python, lxml

我有一个[xml 文件](http://s.yunio.com/bmCS5h)。请下载并保存为`blog.xml`. 这是我在 Google-blogger 中的文件列表，我写了一些代码来解析它，lxml 有问题。

代码1：

```
from stripogram import html2text
import feedparser
d = feedparser.parse('blog.xml')
for num,entry in enumerate(d.entries):
    string=entry.content[0]['value'].encode("utf-8")
    print   html2text(string) 
```

它使用 code1 得到正确的结果。

代码2：

```
import lxml.html
import feedparser
d = feedparser.parse('blog.xml')
for num,entry in enumerate(d.entries):
    string=entry.content[0]['value'] 
    myhtml=lxml.html.document_fromstring(string)
    print  myhtml.text_content() 
```

它使用 code2 得到错误的输出。

```
Traceback (most recent call last):
  File "<stdin>", line 3, in <module>
  File "/usr/lib/python2.7/dist-packages/lxml/html/__init__.py", line 532, in document_fromstring
    value = etree.fromstring(html, parser, **kw)
  File "lxml.etree.pyx", line 2754, in lxml.etree.fromstring (src/lxml/lxml.etree.c:54631)
  File "parser.pxi", line 1569, in lxml.etree._parseMemoryDocument (src/lxml/lxml.etree.c:82659)
 ValueError: Unicode strings with encoding declaration are not supported. 
```

代码3：

```
import lxml.html
import feedparser
d = feedparser.parse('blog.xml')
for num,entry in enumerate(d.entries):
    string=entry.content[0]['value'].encode("utf-8") 
    myhtml=lxml.html.document_fromstring(string)
    print  myhtml.text_content() 
```

它使用 code3 得到错误的输出。

```
 Traceback (most recent call last):
  File "<stdin>", line 3, in <module>
  File "/usr/lib/python2.7/dist-packages/lxml/html/__init__.py", line 532, in document_fromstring
    value = etree.fromstring(html, parser, **kw)
  File "lxml.etree.pyx", line 2754, in lxml.etree.fromstring (src/lxml/lxml.etree.c:54631)
  File "parser.pxi", line 1578, in lxml.etree._parseMemoryDocument (src/lxml/lxml.etree.c:82748)
  File "parser.pxi", line 1457, in lxml.etree._parseDoc (src/lxml/lxml.etree.c:81546)
  File "parser.pxi", line 965, in lxml.etree._BaseParser._parseDoc (src/lxml/lxml.etree.c:78216)
  File "parser.pxi", line 569, in lxml.etree._ParserContext._handleParseResultDoc (src/lxml/lxml.etree.c:74472)
  File "parser.pxi", line 650, in lxml.etree._handleParseResult (src/lxml/lxml.etree.c:75363)
  File "parser.pxi", line 599, in lxml.etree._raiseParseError (src/lxml/lxml.etree.c:74827)
 lxml.etree.XMLSyntaxError: line 1395: Tag b:include invalid 
```

如何处理 lxml 中的编码以正确解析 html 字符串？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T12:39:40.140

[lxml 中有一个错误](https://bugs.launchpad.net/lxml/+bug/761215)。检查此代码的输出：

```
import lxml.html
import feedparser

def test():
    try:
        lxml.html.document_fromstring('')
    except Exception as e:
        print e

d = feedparser.parse('blog.xml')
e = d.entries[0].content[0]['value'].encode('utf-8')

test() # XMLSyntaxError: None

lxml.html.document_fromstring(e)
test() # XMLSyntaxError: line 1407: Tag b:include invalid 
```

所以这个错误令人困惑，你解析失败的真正原因是你将空字符串传递给document_fromstring。

试试这个代码：

```
import lxml.html
import feedparser
d = feedparser.parse('blog.xml')
for num,entry in enumerate(d.entries):
    string=entry.content[0]['value'].encode("utf-8") 
    if not string:
        continue
    myhtml=lxml.html.document_fromstring(string)
    print  myhtml.text_content() 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-07T11:50:32.220

您可以自己创建一个解析器，而不是使用`document_fromstring`：

```
from cStringIO import StringIO
from lxml import etree

for num, entry in enumerate(d.entries):
    text = entry.content[0]['value'].encode('utf8')
    parser = etree.HTMLParser()
    tree   = etree.parse(StringIO(text), parser)
    print  ''.join(tree.xpath('.//text()')) 
```

对于 Blogger.com Atom 提要导出，这可以打印`.content[0].value`条目的文本内容。

# facebook - 无法为我们的应用获取用户生日的权限

> ID：15861986
> 
> 赞同：0
> 
> 时间：2013-04-07T11:46:13.877
> 
> 标签：facebook, permissions, date

我们有一个应用程序。当我们配置应用所需的权限时，我们选择 user_birthday。 ![在此处输入图像描述](https://i.stack.imgur.com/1sWcN.jpg)

在我们按下“Preview Login Dialog”之后——我们可以在这里看到这个![在此处输入图像描述](https://i.stack.imgur.com/ARw04.jpg) 红色的选择是用户生日

但是，当用户尝试连接到我们的应用程序时，他会看到这里 ![在此处输入图像描述](https://i.stack.imgur.com/LDstz.jpg) 没有生日权限。

因此，我们无法获得 user_birthday 参数。我们做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T14:08:39.470

您在 facebook 应用程序设置中指定的权限仅适用于用户从 Facebook 应用程序中心安装您的应用程序时。

要在用户登录您的应用时获得用户权限，您需要在身份验证过程中请求他们。

您可以在这里找到您需要的所有信息：[https ://developers.facebook.com/docs/tutorials/canvas-games/authenticate/](https://developers.facebook.com/docs/tutorials/canvas-games/authenticate/)

# c - 如何从C中的第n个位置扫描数字

> ID：15861987
> 
> 赞同：1
> 
> 时间：2013-04-07T11:46:15.707
> 
> 标签：c

您好，我可能需要一些有关从文件扫描的帮助。每行包含 8 个长数字，但我只需要扫描最后四个。

我的想法是扫描整个数字，而不是从第 4 位复制数字到新数组。有什么更聪明的想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T12:21:17.430

一个简单的方法是`fgets`在循环中读取一行，然后运行如下代码：

```
sscanf(buf, "%*4d%4d", &a); 
```

这将忽略前四位数字，并将后四位数字复制到 integer`a`中。

那里显然没有错误检查（它只有在每行有 8 位数字时才有效），但它又快又容易。您可以检查 的返回值`scanf`是否为 1，这将是成功读取 4 位数字的情况。

**编辑**（@Grijesh Chauhan）

示例代码：

```
int main(){
    FILE* fp = fopen("file","r");
    char buf[128];
    int a;
    while(!feof(fp)){             // while end of file comes
      fgets(buf, 127, fp);         //read complete line in a buffer 
      sscanf(buf, "%*4d%4d", &a);  //scanf from buffer, last 4 digits
      printf("%d\n",a);         
    }
    return EXIT_SUCCESS;
} 
```

它执行：

```
$ gcc y.c -Wall -o y
$ ./y
5678
5432
8324
3223 
```

对于一个文件：

```
$ cat file
12345678
98765432
45678324
98653223 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T12:18:02.150

C 中的以下技术对于读取如下所示的文件很有用，这是您想要的吗？

而 EOF 未达到：

*   首先在第一个缓冲区中读取 4 个字符，并且未使用
*   读取一行中的数字，使用`fscanf()`,`%d`
*   读`\n`
*   打印号码

该文件是这样的：

```
$ cat file
12345678
98765432
45678324
98653223 
```

代码是（阅读评论）：

```
#include<stdio.h>
#include<stdlib.h>
int main(){
    FILE* fp = fopen("file","r");
    char first[5];
    int second;
    while(!feof(fp)){          //  While EOF loop runs   
     fgets(first, 5, fp);      //  read first 4 chars in a line
     fscanf(fp,"%d",&second);  //  Read next 4 digits in 
     fgetc(fp);                //  read \n
     printf("%d\n",second);
    }
    return EXIT_SUCCESS;
} 
```

它运行如下：

```
:~$ ./a.out 
5678
5432
8324
3223 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T11:52:21.170

在每一行上，用 读取（并丢弃）四个字符`getc`，然后用`fscanf`读取一个 4 位数字。

我会先简单地传递文件`sed`：

```
sed 's/^[0-9]{4}\([0-9]{4}\)$/\1/' <file | your_c_program.out 
```

作为奖励，`sed`以这种方式使用可以验证每行确实有 8 位数字。

编辑：使用`fseek`而不是`getc`确实是一个更好的主意

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-07T12:00:43.960

该程序读取每行的最后四个数字（假设每行有 8 个）并将其放入变量 nr 中：

```
int main(void) {
char buff[8];
int nr;
FILE *theFile=fopen("/home/mppl/Desktop/file","r");

 while(fscanf(theFile,"%s\n",buff)!=EOF){
    nr= atoi(&buff[4]);
    printf("nr=%d\n",nr);

 }

} 
```

这可能不是最安全或最有效的方法，但确实很简单。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-07T12:26:15.870

这是一个有趣的问题，我不是 C 专家。我只是留下我的解决方案。
虽然我在下面的代码中使用了“getline”功能，但我会投票给“sscanf”。但是“sscanf”通常用于从字符串中取出特定元素（例如数字除以斜杠，反斜杠或点），@Toesmash 的问题是从特定位置读取，这与内容无关。你必须考虑这样一个简单的任务是否值得。
所以也许“getline”很简单而且足够好。这是我的想法。

```
int main()
{
    FILE * fp;
    char * line = NULL;
    size_t len = 0;
    ssize_t read;

    if ((fp = fopen("sample.txt", "r")) == NULL )
    {
        /* do your error process */
    }

    while((read = getline(&line, &len, fp)) != -1)
    {
        /* you see here offset is 5, if you want the last 4 characters */
        printf("%s", (line + (read - 5)));
    }

    return 0;
} 
```

好消息是，你得到了你需要的一切，指向头部的指针、长度等
。坏的是，我读了整行，这可能是不必要的 :)

# java - 未创建 JMS 资源

> ID：15861989
> 
> 赞同：0
> 
> 时间：2013-04-07T11:46:25.150
> 
> 标签：java, jakarta-ee, jms, ejb-3.0, glassfish-3

我正在 Glassfish appserver 上的“EJB3 in Action”（第 2 章示例）中尝试​​一个示例，它有一个 MDB 无法部署并出现错误

```
JMS resource not created : OrderBillingQueue 
```

我已经按照其他帖子中的建议创建了连接资源和目标资源，但错误仍然存​​在。请帮我解决这个问题。

这是在 glassfish 中创建的 JMS 资源的快照 ![在此处输入图像描述](https://i.stack.imgur.com/TWJia.png)

* * *

![在此处输入图像描述](https://i.stack.imgur.com/dpuFg.png)

源代码的相关部分：MDB

```
@MessageDriven(activationConfig = {
        @ActivationConfigProperty(propertyName="destinationName", propertyValue="OrderBillingQueue"),
        @ActivationConfigProperty(propertyName="destinationType", propertyValue="javax.jms.Queue")
        },mappedName = "OrderBillingQueue"
)
public class OrderBillingMDB implements MessageListener { 
```

源码相关部分：资源注入部分

```
@Resource(name = "jms/QueueConnectionFactory")
private ConnectionFactory connectionFactory;

@Resource(name = "jms/OrderBillingQueue", mappedName="OrderBillingQueue")
private Destination billingQueue; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T12:33:56.387

添加具有以下内容的 glassfish-ejb-jar.xml 文件似乎可以解决问题。

```
<glassfish-ejb-jar>
  <enterprise-beans>
      <ejb>
          <ejb-name>OrderBillingMDB</ejb-name>
          <jndi-name>jms/OrderBillingQueue</jndi-name>
      </ejb></enterprise-beans>
</glassfish-ejb-jar> 
```

但不确定为什么 glassfish 需要这个。

# asp.net - 单选按钮列表 selectedindexchanged 事件触发意外

> ID：15861993
> 
> 赞同：0
> 
> 时间：2013-04-07T11:47:04.307
> 
> 标签：asp.net, events, viewstate, init, radiobuttonlist

我有一个`radiobuttonlist`我更改了所选项目`codebehid`

```
private void DisplayPrivacyTerms(long ImageId)
{
    if (ImageryDataAccess.GetImagePrivacyTerm(ImageId).ToLower() == "me only")
    {
        RadioButtonListPrivacy.Items[0].Selected = true;
    }
    if (ImageryDataAccess.GetImagePrivacyTerm(ImageId).ToLower() == "friends")
    {
        RadioButtonListPrivacy.Items[1].Selected = true;
    }
    if (ImageryDataAccess.GetImagePrivacyTerm(ImageId).ToLower() == "public")
    {
        RadioButtonListPrivacy.Items[2].Selected = true;
    }
} 
```

当所选项目以上方式更改时，然后稍后`postback`到达服务器会触发`selectedindexchanged`事件。
特别是我有`listview`哪些显示器`imagebuttons`。当我单击中的图像按钮时`listview`，如果更改了所选项目，则稍后单击图像按钮会触发.. 为什么会发生这种情况，我不希望这会触发此事件`selectedinexchanged`..`radiobuttonlist`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T12:37:58.377

我不完全确定您要达到的目标。但似乎你需要处理一些关于`OnSelectedIndexChanged`你的事件的逻辑`RadioButtonList`

首先将`AutoPostBack="true"`属性设置在您的`RadioButtonList`

然后在`OnSelectedIndexChanged`事件中，写下你的逻辑。

```
protected void RadioButtonListPrivacy_SelectedIndexChanged(object sender, System.EventArgs e)  
{  
   // your logic here
   // so basically when you click on any of the items in your radiobuttonlist,
   // this event will fire and you can write your logic based on it  
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T14:09:45.807

实际上问题是我已经在 aspx 页面中以声明方式初始化了这些项目。我将有问题的函数更改为如下代码

```
 private void DisplayPrivacyTerms(long ImageId)
      {
    RadioButtonListPrivacy.Items.Clear();
    ListItem itemMe= new ListItem("Me Only", "1");
    RadioButtonListPrivacy.Items.Add(itemMe);
    ListItem itemMates = new ListItem("Subject Mates", "2");
    RadioButtonListPrivacy.Items.Add(itemMates);
    ListItem itemPublic = new ListItem("Public", "3");
    RadioButtonListPrivacy.Items.Add(itemPublic);

    if (ImageryDataAccess.GetImagePrivacyTerm(ImageId).ToLower() == "me only")
    {
        RadioButtonListPrivacy.Items[0].Selected = true;
    }
    if (ImageryDataAccess.GetImagePrivacyTerm(ImageId).ToLower() == "subject mates")
    {
        RadioButtonListPrivacy.Items[1].Selected = true;
    }
    if (ImageryDataAccess.GetImagePrivacyTerm(ImageId).ToLower() == "public")
    {
        RadioButtonListPrivacy.Items[2].Selected = true;
    }

} 
```

我清除了列表，然后添加了新条目，这样它清除了仅更改 Select=true 属性时出现的视图状态问题.. :)

# c# - 附加了 tcp 数据包是否有任何情况下只会读取数据包的一部分？C＃

> ID：15861996
> 
> 赞同：-1
> 
> 时间：2013-04-07T11:47:11.127
> 
> 标签：c#, networking, tcp

我编写了一个解析器来解析我在 TCP 读取中获得的数据，因为即使发送多个数据包它们可能会在一次读取中获得，我的问题是是否可以在 2 个读取命令中读取一次数据包，或者我是否读取了数据包的一些数据这意味着所有数据包数据都可用并且将在同一个调用中读取？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T11:59:48.377

一段代码肯定会很好，但我认为你是在谈论通过 tcp 套接字接收的数据......在这种情况下，答案是：不，你不会看到数据包的内容被网络设备读取...一旦它通过检查数据包校验和的 TCP 堆栈，您就会得到它...在校验和被验证之前您不会获得数据，因此您可以获得最小的数据是一个完整数据包的内容

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T13:44:38.117

TCP 是一个流——只有下面的 IP 层将它分成单独的数据包。您调用`Send()`或类似的 API，然后 IP 层以任何它认为合适的方式将流分成数据包。因此，您不能依赖一次调用到达的整个缓冲区。

或者，用一个极端的例子来解释：想象你打电话给`Send(huge_1GB_buffer)`. 您希望读取的行为如何？

# c - 从日期获取Unix时间

> ID：15861997
> 
> 赞同：0
> 
> 时间：2013-04-07T11:47:11.583
> 
> 标签：c, date, time

我有以下变量：

```
int year = 2013;
int month = 04;
int day = 07;
int hour = 13;
int min = 42;
int sec = 00; 
```

...我需要从中提取“纪元”时间或 unix 时间。

这如何在标准 C 中完成？在这种情况下，unix 时间应该是：[1365342120](http://www.epochconverter.com/)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T11:51:38.290

怎么样：

```
struct tm tm = {
    .tm_sec = sec,
    .tm_min = min,
    ...
};

time_t t = mktime(&tm);
printf("%ju\n", (uintmax_t) t); 
```

正如 Mppl 指出的那样，在使用它之前，您应该注意以下问题`struct tm`：

*   `tm_mon`定义为*自一月以来的月份*，因此您需要从月份中减去 1
*   `tm_year`定义为*自 1900 年以来*的年份，因此您需要从年份中减去 1900

* * *

在一个更迂腐的旁注中，没有什么可以保证将 t 转换为整数会自动为您提供自 1970 年以来的秒数。它适用于许多系统，但标准对此没有任何规定。

如果你想疯狂标准，你可以做另一个`time_t`表示`1970`，然后在`difftime`两者之间做一个：你会得到一个普通诚实的区别`double`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-07T12:11:29.720

如果您从未使用过此结构，上面的答案会遗漏一些您可能不会注意到的事情：

```
struct tm myTm = {
.tm_sec = sec,
.tm_min = min,
...
.tm_mon= mon-1,
.tm_year= year-1900,

};

time_t t = mktime(&myTm);
printf("%ju\n", (uintmax_t) t); 
```

您应该将月份减去 1，将年份减去 1900，否则您会得到错误的答案。