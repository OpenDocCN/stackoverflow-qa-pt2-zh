# StackOverflow 问答 13720000-13720999

# php - 2date 之间的 PHP_comparison 天数

> ID：13720000
> 
> 赞同：0
> 
> 时间：2012-12-05T09:32:43.347
> 
> 标签：php

我用 php 编写代码，我得到了 2date 之间的所有日子

```
function getDatesBetween2Dates($startTime, $endTime){    
    $day = 86400;  
    $format = 'Y-m-d';  
    $startTime = strtotime($startTime);  
    $endTime = strtotime($endTime);  
    $numDays = round(($endTime - $startTime) / $day) + 1;  
    $days = array();  
    for ($i = 0; $i < $numDays; $i++) {  
        $days[] = date($format, ($startTime + ($i * $day)));  
    }  
    return $days;  
}  
$days = getDatesBetween2Dates($_POST['periodfrom'], $_POST['periodto']);  
foreach($days as $key => $value){  
    echo $daydatey = date('Y-m-d', strtotime($value));    
    //contain days between 2date from my form
}   
$days2 = getDatesBetween2Dates($ppfr, $ppto);  
foreach($days2 as $key2 => $value2){  
    echo $daydatey2 = date('Y-m-d', strtotime($value2));  
} 
```

包含来自我的数据库的 2date 之间的天数我只需要在 $days 和 $days2 之间进行比较，以检查 ( `$days`) 中的任何天数是否存在或等于或类似 ( `$days2`) 中的天数。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T09:39:13.627

我建议你看看 DateTime::diff / date_diff..

[http://php.net/manual/en/datetime.diff.php](http://php.net/manual/en/datetime.diff.php) (OOP) [http://php.net/manual/en/function.date-diff.php](http://php.net/manual/en/function.date-diff.php) (程序)

但是，这确实需要 php 5.3+，因此如果您低于此答案，请忽略此答案。

例子：

```
<?php
$datetime1 = new DateTime('2009-10-11');
$datetime2 = new DateTime('2009-10-13');
$interval = $datetime1->diff($datetime2);
echo $interval->format('%R%a days');
?> 
```

# ios - 无法在项目导航器中打开 xib

> ID：13720005
> 
> 赞同：5
> 
> 时间：2012-12-05T09:33:11.680
> 
> 标签：ios, xcode, xib

我遇到了问题，需要你的帮助。
我刚刚使用 svn 更新了我的项目并发生了冲突；现在我收到这个警告：

```
The document ....xib could not be opened.  
This archive contains a reference to an object with the identifier "150009670"  
but does not contain an object with a matching identifier. 
```

在此之后，我使用文本编辑器打开`.pbxproj`并更改了对 object 的引用`150009670`。现在项目按预期构建和工作，但是当我尝试从项目导航器打开我的 xib 时，我仍然收到警告。
我是第一次使用svn，怎么了？为什么我首先会发生冲突？我可以在不重建 xib 的情况下解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-04T17:37:06.343

如果您使用的是 svc，如果您执行了任何合并并且存在冲突，则文件中的某处可能会附加一个头。

使用文本编辑器查看您的项目文件，您将能够在其中看到生成的 XML 代码。（使用类似 text wrangler、sublime text 2 的东西）。搜索词“头”。这将有望找到具有以下格式的实例：

```
<<<< HEAD
         code1
=======
        code2
>>>>>>>>>>> 
```

删除这些东西和你不想要的代码，然后保存文件。Code1 将引用较新的代码，code2 将引用较旧的代码。看看它并决定你需要保留什么。如果您不确定保留两者或删除 code1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-24T14:46:43.377

xCode 似乎保留了项目中添加 svn 的一些更改。右键单击 xib 文件并选择放弃更改。这应该重置与文件相关的错误信息并允许您运行项目。

# asp.net - 创建到占位符 OnClientClick 中的按钮不起作用

> ID：13720007
> 
> 赞同：0
> 
> 时间：2012-12-05T09:33:13.003
> 
> 标签：asp.net, vb.net, visual-web-developer-2010, contentplaceholder

嗨，我正在尝试为我的网页创建一个更新按钮以获取控件数组创建的信息，它很好地添加了 CmdUpdate 按钮，但是当我单击该按钮时没有任何反应。

```
'code to add in Update form
 CmdUpdate.Text = "Update"
    CmdUpdate.OnClientClick = "CmdUpdate_click()"
    CmdUpdate.ID = "CmdUpdate"
 PlaceHolder1.Controls.Add(CmdUpdate)

'Sub that should be called by the CmdUpdate
Private Sub CmdUpdate_click(sender As Object, e As EventArgs)
    lblPatient.Text = Globalvar.TitleNames(5)
    lblPatientName.Text = Globalvar.TitleNames(6)
    Call SQLSuff()
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T09:40:40.697

将客户端单击事件更改`CmdUpdate.OnClientClick = "CmdUpdate_click()"` 为服务器端 Onclick 事件。

```
CmdUpdate.OnClick = "CmdUpdate_click() 
```

它会起作用的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T09:41:20.610

您应该分配服务器端处理程序而不是客户端处理程序：

```
AddHandler CmdUpdate.Click, AddressOf CmdUpdate_click 
```

# delphi - 随机文件名

> ID：13720011
> 
> 赞同：2
> 
> 时间：2012-12-05T09:33:20.103
> 
> 标签：delphi, delphi-xe2

我有一个名为 MAPS 的文件夹。我想在选择菜单项时，在本例中为 Maps->Random。它将随机选择文件夹映射中的文件名之一。我怎样才能让它随机？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T09:39:03.437

获取文件夹中的文件名列表：

```
uses
  System.Types, System.IOUtils;

var
  FileNames: TStringDynArray;
....
FileNames := TDirectory.GetFiles(DirectoryName); 
```

然后随机选择一个索引。

```
var
  Index: Integer;
.....
Index := Random(Length(FileNames)); 
```

因此，您的随机文件名由下式给出

```
FileNames[Index]; 
```

在启动时调用`Randomize`以确保用户在每次运行程序时不会得到相同的*随机数序列。*

这不是最有效的方法，因为它为目录中的每个文件分配字符串，然后您只使用一个。但是，这可能是最方便和最简单的方法。

# jquery - 将值推送到数组中的特定元素

> ID：13720013
> 
> 赞同：0
> 
> 时间：2012-12-05T09:33:31.660
> 
> 标签：jquery

我试图通过创建一个多维数组将值推送到特定元素中：

```
var rate_info = [];
rate_info[0].push($("#title-textarea"+id).val());
rate_info[0].push($("select[name=category"+id+"]").val());
rate_info[0].push($("select[name=subcategory"+id+"]").val());
...
data: {
    "rate_info" : rate_info,
},
... 
```

但这破坏了我的脚本，我不确定我做错了什么

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T09:35:38.243

无需索引，只需[推](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/push)送到数组：

```
rate_info.push($("#title-textarea"+id).val());
rate_info.push($("select[name=category"+id+"]").val());
rate_info.push($("select[name=subcategory"+id+"]").val()); 
```

否则，您需要先创建一个新数组才能将元素推送到其中：

```
var rate_info = [ [] ];
rate_info[0].push($("#title-textarea"+id).val()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T09:37:34.683

当您使用多维数组时，您需要确保它`rate_info[0]`是一个数组，以便可以`push`使用它，即

```
rate_info[0] = []; 
```

在尝试`push`拨打电话之前。目前您正在`push`尝试 `undefined`.

# git - 在 Git 中签出远程服务器时出错

> ID：13720015
> 
> 赞同：0
> 
> 时间：2012-12-05T09:33:37.513
> 
> 标签：git, git-checkout, remote-branch

我已经克隆了一个远程 Git 服务器。但是当我想用下面的代码检查它时，它给了我错误：

```
$ git checkout master origin/master
  error: pathspec 'origin/master' did not match any file(s) known to git. 
```

这是 git 分支的输出：

```
$ git branch -r
  origin/HEAD -> origin/master
  origin/master

$ git branch
  * master 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T09:37:06.043

如果您只是想签出 master 分支，只需运行：

`git checkout master`

克隆后，您的本地主分支立即完全反映远程（即源/主），因此您无需在签出时尝试引用远程

# mysql - 如何在客户下创建一个引用雇主表中“id”的列

> ID：13720021
> 
> 赞同：1
> 
> 时间：2012-12-05T09:33:55.107
> 
> 标签：mysql, sql, database

```
CREATE TABLE College (
    CollegeID INTEGER AUTO_INCREMENT NOT NULL,
    Collegename varchar(50),
    PRIMARY KEY(CollegeID));

INSERT INTO `College` (`CollegeID`, `Collegename`) VALUES
(1, 'Harvard'),
(2, 'Princeton'),
(3, 'Columbia'),
(4, 'Georgetown'),
(5, 'Yale');

 CREATE TABLE Customer (
    CustomerID INTEGER PRIMARY KEY AUTO_INCREMENT NOT NULL,
    FirstName varchar(20),
    LastName varchar(20),
    DateHired DATE,
    CollegeID INTEGER REFERENCES College(CollegeID));

INSERT INTO `Customer` (`CustomerID`, `FirstName`, `LastName`, `DateHired`, `CollegeID`) VALUES
(111, 'Johnny', 'Silvia', '20100301', 1),
(222, 'Billy', 'Blank', '20070111', 2),
(333, 'Susan', 'Anderson', '20021222', 3),
(444, 'Samantha', 'Love', '19990521', 3),
(555, 'Bill', 'Gray', '20010913', 5);

CREATE TABLE `employer` (
  `id` INTEGER NOT NULL,
  `EmployerName` varchar(60) NOT NULL,
  PRIMARY KEY(id));

INSERT INTO `employer` (`id`, `EmployerName`) VALUES
(1111, 'McDonalds'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T10:41:59.490

你在谈论`FOREIGN KEYs`

在您的桌子上创建`FOREIGN KEYs`：

```
/* Create the Parent Table */
CREATE TABLE College (
    ID INTEGER AUTO_INCREMENT NOT NULL,
    CollegeName VARCHAR(50),
    PRIMARY KEY(ID)
);

/* Create the Child Table and Referece the Column CollegeId of this table to the Id Column of College Table */
CREATE TABLE Customer (
    ID INT(11) AUTO_INCREMENT NOT NULL,
    Name VARCHAR(40),
    CollegeID INT(11),
    PRIMARY KEY(ID),
    CONSTRAINT FK_Customer_College FOREIGN KEY (CollegeID) REFERENCES College (ID)
); 
```

遵循以下语法： `CONSTRAINT ForeignKeyName FOREIGN KEY (ColumnName) REFERENCES TableName (ColumnName)`

另一方面，如果您已经创建了表，则可以`FOREIGN KEY`通过更改表来创建：

`ALTER ChildTable ADD CONSTRAINT ForeignKeyName FOREIGN KEY (ChildColumn) REFERENCES ParentTable (ParentColumn);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T09:38:46.793

如果客户可以有一个但只有一个雇主，那么可以，将雇主 ID 引用添加到您的客户表中。

如果一个客户可以有多个雇主，那么您必须创建另一个包含客户 ID 和雇主 ID 的表。

```
 CREATE TABLE Customer (
    CustomerID INTEGER PRIMARY KEY AUTO_INCREMENT NOT NULL,
    EmployerID INTEGER REFERENCES employer(id),
    FirstName varchar(20),
    LastName varchar(20),
    DateHired DATE,
    CollegeID INTEGER REFERENCES College(CollegeID)); 
```

我不太了解mysql，我只是采用了您使用的语法，但是如果您想创建外键引用，请查看此链接[http://dev.mysql.com/doc/refman/5.0/en/innodb-foreign -key-constraints.html](http://dev.mysql.com/doc/refman/5.0/en/innodb-foreign-key-constraints.html)

# c++ - typedef 用于合格的依赖类型

> ID：13720025
> 
> 赞同：1
> 
> 时间：2012-12-05T09:34:08.227
> 
> 标签：c++, templates, types, typename

我读了这篇关于如何使用 C++ 中的 typename 关键字的精彩摘要：http: [//pages.cs.wisc.edu/~driscoll/typename.html](http://pages.cs.wisc.edu/~driscoll/typename.html)

我仍然想知道一个特定的例子：

```
template<typename T> class Outer{
  public:
    class Inner1{
       T t; 
    };
    class Inner2{
      int t; 
    };
};

template<typename T> void foobar(void)
{
  std::list<Outer<T>::Inner1> l;
} 
```

从上面链接的文字中，我了解到我需要

```
std::list<typename Outer<T>::Inner1> l; 
```

因为 Inner1 既是合格的又是从属的。

但是：Inner2 还需要一个让我感到困惑的类型名：首先，似乎很清楚 Inner2 是一种类型（嗯，这对于 Inner1 来说已经很清楚了）。其次，Inner2 完全不依赖于 T。对于所有可能的 T，Inner2 将是相同的（类型）！

使用模板内部的限定类型后是否需要 typedef？是否取决于模板参数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T09:41:27.467

你的第二个假设是错误的。Inner2*确实*依赖于 T，因为每个 Outer 都有另一个 Inner2。如果您专门研究 Outer，那就清楚了：

```
template<> class Outer<char>{
public:
  class Inner1{
     T t; 
  };
  typedef int Inner2; 
}; 
```

而且即使你不专业，`Outer<float>::Inner2`可能`Outer<long>::Inner2`有相同的布局、成员、名称等，但它们不是同一类型！考虑访问 -`Outer<long>::Inner2`可以访问`Outer<long>`的私人成员，`Outer<float>::Inner2`但没有。

在以下特化中，Inner2 甚至不是类型：

```
template<> class Outer<long double>{
public:
  char Inner2(int); 
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T09:37:31.070

`Outer<T>::Inner2`确实取决于类型`T`，因为编译器不知道是什么类型的东西`Inner2`——无论是类型还是静态数据成员。所以是的，你需要在这里告诉编译器它是什么类型的东西`typename`，因为默认是假设它是一个非类型成员（例如一个静态数据成员、一个方法名、一个`enum`值）。

（这对于 C++03 来说是正确的——我假设这方面的规则在 C++11 中没有改变。）

# iphone - 在 iphone sdk 中混合五首歌曲

> ID：13720028
> 
> 赞同：0
> 
> 时间：2012-12-05T09:34:24.450
> 
> 标签：iphone, ios, ios4, cocos2d-iphone

在我的应用程序中，我有五个按钮，每个按钮都有五首歌曲。在主视图中，视图中有一个星形（包含五个端点）。当用户将按钮拖到星号的末尾时，它应该播放歌曲。链接这同样有四个，我们想将这些歌曲混合到一个文件中，就像一个铃声将它保存到一个 tmp 目录中。我为此做了很多尝试，但我无法得到问题的答案。

我正在使用的代码是：

```
- (void) doAudioCallback: (NSTimer *)timer {
    NSString *resName1 = @"drum1.aif"; 
    NSString *resName2 = @"drum2.aif"; 
    NSString *resPath1 = [[NSBundle mainBundle] pathForResource:resName1 ofType:nil];
    NSString *resPath2 = [[NSBundle mainBundle] pathForResource:resName2 ofType:nil];
    NSString *tmpDir = NSTemporaryDirectory(); 
    NSString *tmpFilename = @"MixedoftwoSongs.aif"; 
    NSString *tmpPath = [tmpDir stringByAppendingPathComponent:tmpFilename]; 

    OSStatus status;
    if (status == OSSTATUS_MIX_WOULD_CLIP) { 
    } else {
        NSURL *url = [NSURL fileURLWithPath:tmpPath]; 

        NSData *urlData = [NSData dataWithContentsOfURL:url]; 
        NSLog(@"wrote mix file of size %d : %@", [urlData length], tmpPath); 

        AVAudioPlayer *avAudioObj = [[AVAudioPlayer alloc] initWithContentsOfURL:url error:nil]; 
        self.avAudio = avAudioObj; 
        [avAudioObj prepareToPlay]; 
        [avAudioObj play]; 
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T10:26:34.257

我认为您必须使用 Perform Selector 来延迟每个音频 [self performSelector:@selector(yourmethod) withObject:nil afterDelay:0.5];

# sharepoint-2010 - 事件处理程序的 SharePoint 问题

> ID：13720030
> 
> 赞同：1
> 
> 时间：2012-12-05T09:34:34.720
> 
> 标签：sharepoint-2010

问题：我有一个列表，如果我创建一个新项目，我想执行以下操作：

1.  在 [AutoGeneratedID] 列中创建一个新的自动增量数
2.  使用 [Titel] 和 [AutoGeneratedID] 在 List 中创建一个 HyperLink 和一个新的子站点

问题是我无法让 [AutogeneratedID] 填充一个值，因为它是一个 itemadd 事件，但是如果我尝试将代码放在一个 ItemAdding 事件中，我会遇到以下链接中描述的问题：

[http://www.sharepoint-tips.com/2006/09/synchronous-add-list-event-itemadding.html](http://www.sharepoint-tips.com/2006/09/synchronous-add-list-event-itemadding.html)

```
 using System;
   using System.Security.Permissions;
   using Microsoft.SharePoint;
   using Microsoft.SharePoint.Security;
   using Microsoft.SharePoint.Utilities;
   using Microsoft.SharePoint.Workflow;
   using System.Diagnostics;

namespace KuC_Solution.EventReceiver1
{
/// <summary>
/// List Item Events
/// </summary>
public class EventReceiver1 : SPItemEventReceiver
{

   /// <summary>
   /// An item was added.
   /// </summary>
    public override void ItemAdded(SPItemEventProperties properties)
    {
        base.ItemAdded(properties);

        // -----------------------------------------------------------

        try
        {
            this.EventFiringEnabled = false;
            // Column name AutoGeneratedID
            string columnName = "AutoGeneratedID";
            SPSecurity.RunWithElevatedPrivileges(delegate()
            {
                using (SPWeb web = properties.OpenWeb())
                {
                    web.AllowUnsafeUpdates = true;
                    //get the current list
                    SPList list = web.Lists[properties.ListId];
                    int highestValue = 0;
                    foreach (SPListItem item in list.Items)
                    {
                        if (item[columnName] != null && item[columnName].ToString().Trim() != "")
                        {
                            string value = item[columnName].ToString();
                            try
                            {
                                int currValue = int.Parse(value);
                                if (currValue > highestValue)
                                    highestValue = currValue;
                            }
                            catch (Exception ex)
                            {
                                Trace.WriteLine(ex.Message);
                            }
                        }
                    }
                    SPListItem currItem = list.Items.GetItemById(properties.ListItem.ID);
                    currItem[columnName] = (highestValue + 1).ToString();
                    currItem.SystemUpdate(false);
                    web.AllowUnsafeUpdates = false;
                }
            });
            this.EventFiringEnabled = true;
        }
        catch (Exception ex)
        {
            Trace.WriteLine(ex.Message);
        }

        // -----------------------------------------------------------

    }
   /// <summary>
   /// An item is being added.
   /// </summary>
   public override void ItemAdding(SPItemEventProperties properties)
   {
       base.ItemAdding(properties);

       //-------------------------------------------------------------

       // Get the web where the event was raised
       SPWeb spCurrentSite = properties.OpenWeb();

       //Get the name of the list where the event was raised         
       String curListName = properties.ListTitle;

       //If the list is our list named SubSites the create a new subsite directly below the current site
       if (curListName == "TESTautoNumber")
       {
           //Get the SPListItem object that raised the event
           SPListItem curItem = properties.ListItem;
           //Get the Title field from this item. This will be the name of our new subsite
           String curItemSiteName2 = properties.AfterProperties["Title"].ToString();
           //String curItemSiteName3 = properties.AfterProperties["ID"].ToString();
           String mia = properties.AfterProperties["AutoGeneratedID"].ToString();
           String curItemSiteName = curItemSiteName2 + mia;
           //Get the Description field from this item. This will be the description for our new subsite
           //String curItemDescription = properties.AfterProperties["Projekt-ID"].ToString();
           string curItemDescription = "CREWPOINT";
           //String testme = "1";

           //Update the SiteUrl field of the item, this is the URL of our new subsite
           properties.AfterProperties["tLINK"] = spCurrentSite.Url + "/" + curItemSiteName;

           //Create the subsite based on the template from the Solution Gallery
           SPWeb newSite = spCurrentSite.Webs.Add(curItemSiteName, curItemSiteName, curItemDescription, Convert.ToUInt16(1033), "{4ADAD620-701D-401E-8DBA-B4772818E270}#myTemplate2012", false, false);
           //Set the new subsite to inherit it's top navigation from the parent site, Usefalse if you do not want this.
           newSite.Navigation.UseShared = true;
           newSite.Close();

       }
//---------------------------------------------------------------
   }
  }
} 
```

# windows-phone-7 - Windows Phone 的捏合和缩放行为

> ID：13720032
> 
> 赞同：2
> 
> 时间：2012-12-05T09:34:41.207
> 
> 标签：windows-phone-7, silverlight-4.0, windows-phone-8

是否可以在 windows phone 8 中创建捏合和缩放到图像控件的行为。我正在尝试在我的应用程序中应用捏合和缩放以及旋转到图像。在一个论坛中，我发现 Gesture 监听器已被弃用，并且他们没有通过手势促进实施。所以任何人都可以为我建议一种替代方法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-06T02:08:15.783

如果您仅针对 Windows Phone 8，则可以使用 ManipulationDelta 事件中的新[ManipulationDeltaEventArgs.PinchManipulation](http://msdn.microsoft.com/en-us/library/windowsphone/develop/system.windows.input.manipulationdeltaeventargs.pinchmanipulation%28v=vs.105%29.aspx)属性。而不是使用 GestureListener/TouchPanel 进行捏合和缩放，您应该依赖这个新属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T10:09:34.957

也许这可以帮助你[https://multitouch.codeplex.com/](https://multitouch.codeplex.com/)

```
Windows Phone / Silverlight Behaviors and WPF samples implementing Multi-Touch Manipulation (Gestures) and Inertia. 
```

# opengl - Opengl/glsl 着色器动画和光照问题

> ID：13720036
> 
> 赞同：0
> 
> 时间：2012-12-05T09:35:04.110
> 
> 标签：opengl, 3d, glsl, shader, lighting

所以最近我开始了我的第一个严肃步骤（或者至少我是这么认为的）进入 opengl/glsl 和一般的着色器。我设法构建和渲染 VBO，创建和编译着色器，并以某种方式处理它们。我正在使用顶点着色器来修复我的 opengl 视图（更正纵横比）并执行动画。这是通过各种矩阵操作来实现的。

有人会问我为什么要使用顶点着色器来制作动画，但是阅读全球各地的文章后，我的印象是最好保持静态 VBO，而不是不断更新它们。某种 GPU > CPU 之战。现在我可能错了，这就是为什么我要在这里寻求帮助。我对此的看法是，将来我可能会制作一款游戏，其中（例如）会有很多硬币供玩家抓取，我希望它们静态存储在 GPU 端。然后使用着色器旋转它们。

**继续……“要有光”。**

我还设法在顶点着色器中使用我的法线来重现光照。除了光随着我的立方体旋转（目前我使用立方体作为测试假人）之外，一切都很好。现在，我知道这里出了什么问题。这是我的顶点着色器绝对转换一切（我猜甚至是我的光源）。我可以想出一两种方法来解决这个问题。一种方法是在我的光源上施加反向负变换力，这样我就可以在其他一切旋转时保持它的静止。

这就是一切都变得模糊的地方。我到达 stackoverflow 以获取有关如何前进的指导。我试图从某种意义上思考更大的问题：如果将来我会有很多我想要执行基本动画的对象（例如旋转、缩放、平移）。这是否需要我拥有不同的着色器，甚至是一个包含每个功能的打包着色器。我什至会如何使用它。我会在每个对象在同一个着色器中渲染之前传递不同的值吗？

现在，老实说，我想处理照明问题。但我有一种感觉，我即将解决这个问题的方式将设置我在一般着色动画中的一般方法。有人建议（在另一个问题的stackoverflow中）应该真正使用不同的着色器并在每次VBO渲染之前交换它们。我担心这是否足够有效，但我绝对喜欢这个想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T10:16:35.870

> 有人建议（在另一个问题的stackoverflow中）应该真正使用不同的着色器并在每次VBO渲染之前交换它们。

这是哪个问题/答案？因为您通常应该尽可能避免切换着色器。也许这个人的意思是制服，这是着色器的参数，但可以便宜地改变。

此外，您的问题过于宽泛，也不是很简洁（所有背景故事都隐藏了实际问题）。我强烈建议您将您的疑问分解为一些可以单独回答的小问题。

# objective-c - MKStorekit isFeaturePurchased 在调用 restorePreviousTransactionsOnComplete 后返回 NO

> ID：13720037
> 
> 赞同：2
> 
> 时间：2012-12-05T09:35:05.983
> 
> 标签：objective-c, ios, xcode, mkstorekit

我正在尝试使用出色的 MKStoreKit 为非消耗品实现恢复购买按钮。

我在恢复按钮上有以下代码：

```
[[MKStoreManager sharedManager] restorePreviousTransactionsOnComplete:^{
    [_priceLabel completeWithText:NSLocalizedString(@"App restored :)", @"")];

} onError:^(NSError *error) {
    [_priceLabel completeWithText:NSLocalizedString(@"Unable to restore", @"")];
}]; 
```

完成块被正确调用，但是当我调用时

```
[MKStoreManager isFeaturePurchased:@"com.myapp.pro"] 
```

我得到一个不。感觉我错过了一些明显的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T23:01:13.720

如果这是在沙盒中，我认为它是 - Apple 实际上会在大约 30 秒内过期订阅，即使它们应该持续一个月。

所以最初你可能会得到一个订阅是活跃的，但后来（我的意思是不久之后），答案会从 Apple 改变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T05:19:54.907

如果您的产品是订阅产品，则应使用 isSubscriptionActive

# ms-word - 从模板化的 Word 文档生成 PDF

> ID：13720038
> 
> 赞同：1
> 
> 时间：2012-12-05T09:35:06.590
> 
> 标签：ms-word, pdf-generation

我有一个 Word 文档（某种模板格式），其中包含一些用于填充数据的占位符，并且有几个这样的 Word 文档位于某个目录中。当数据到来时，我将选择不同的模板（基于某些标准）并填写数据，并且必须将文档转换为 PDF 格式。

为此，我一直在调查 Apache POI。如果有人有好的建议，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T02:01:20.303

正如 mbeckish 提到的，您应该指出您将如何运行/自动化它。例如，它是一次性的、手动运行的还是其他程序的一部分（如果是的话，您使用什么编程语言）？

如果您尝试将其自动化，[JODReports](http://jodreports.sourceforge.net/)和[Docmosis](http://www.docmosis.com)是可以使用您需要的模板并且可以生成 PDF 的工具。JODReports 是免费的。Docmosis 不是但有几个 API。请注意，我为开发 Docmosis 的公司工作。

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T21:27:00.013

我刚刚上传[了这个演示文稿](http://www.slideshare.net/plutext/document-generation-2012osdcsydney)，其中介绍了三种方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T15:45:46.590

为什么不使用任何现有的 PDF 虚拟打印机？

# c# - 转换字典 上课

> ID：13720039
> 
> 赞同：-1
> 
> 时间：2012-12-05T09:35:07.890
> 
> 标签：c#, .net, asp.net-mvc

我有个问题。如何转换`IDictionary<string, object>`为班级？以及创建用户帐户。

```
WebSecurity.CreateUserAndAccount(UserName, Password, new { eny = 0 , eny2 = "sas"}); 
```

我有

```
void Create(String name, IDictionary<string, object> values)) {...} 
```

和班级

```
 class test {
    String name,
    int eny,
    int eny2
  } 
```

我想对字典中的数据进行对象测试。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-12-05T10:25:06.953

我来猜一猜

```
Dictionary<string, object> values = new Dictionary<string, object>()
{
    {"Name","Joe"},{"Id",123}
};

var test = GetObject<TestClass>(values); 
```

* * *

```
class TestClass
{
    public string Name { get; set; }
    public int Id { get; set; }
} 
```

* * *

```
T GetObject<T>(Dictionary<string,object> dict)
{
    Type type = typeof(T);
    var obj = Activator.CreateInstance(type);

    foreach (var kv in dict)
    {
        type.GetProperty(kv.Key).SetValue(obj, kv.Value);
    }
    return (T)obj;
} 
```

# kinect - RoutedEventArgs 和 AllFramesEventArgs

> ID：13720040
> 
> 赞同：0
> 
> 时间：2012-12-05T09:35:15.893
> 
> 标签：kinect, eventargs, routedeventargs

我正在尝试调用一个函数，其参数是 object sender 和 RoutedEventsArg e。我需要这些参数，因为我在主窗口上创建了一个与此功能相关的按钮，当我单击该按钮时，它链接到我的功能。

```
 protected void StartRecord(object sender,RoutedEventsArg e)
{
  // some stuff that creates a button and then does stuff
} 
```

在另一个函数中，我需要调用上述函数，但是第二个函数的参数是 AllFramesReadyArg e，而不是 RoutedEventsArg e。那么我如何调用第一个函数

```
 void sensor_AllFramesReady(object sender, AllFramesReadyEventArgs e)
    {
            this.StartRecord(sender, e);
        // does not work since parameter calls for RoutedEventArgs
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T15:53:41.807

你`StartRecord`不是 Kinect 工具箱的一部分。您似乎已经编写了它并给出了这两个论点。它不需要它们，您也不一定需要该功能。

你也**不想**被打`StartRecord`进来`AllFramesReady`。*每次*`AllFramesReady`所有帧准备好处理时都会触发回调（因此是函数名称），大约每秒发生 30 次。你只需要告诉它记录一次。

 *根据您的另一个问题，`StartRecord`是对按钮的回调——不应在代码中调用它。当用户点击相关按钮时调用它。

只需查看 Kinect 工具箱代码和回调，您的代码应如下所示：

```
KinectRecorder _recorder;
File _outStream;
bool _isRecording = false;

private void KinectSetup()
{
    // set up the Kinect here

    _recorder = new KinectRecorder(KinectRecordOptions.Skeleton, _outStream);

    // some other stuff to setup
}

private void sensor_AllFramesReady(object sender, AllFramesReadyEventArgs e)
{
    SkeletonFrame skeleton;

    if (_isRecording && skeleton != null)
    {
        _recorder.Record(skeleton);
    }
}

public void StartRecord(object sender, RoutedEventsArg e)
{
    _isRecording = !_isRecording;
} 
```*

# function - Yii 随机数生成器函数

> ID：13720045
> 
> 赞同：4
> 
> 时间：2012-12-05T09:35:29.210
> 
> 标签：function, random, yii

在 yii 我正在创建随机数生成函数。我正在使用函数作为-

```
public function randomNumber()
{
    //for generating random number
    $length =3;
    $chars = array_merge(range(0,9));
    shuffle($chars);
    $password = implode(array_slice($chars, 0,$length));
    echo $password;

} 
```

但在上面的函数中，它根据指定的长度创建随机数。即如果长度定义为2，那么它将创建2位数字，如果为3则创建3位数字，依此类推。现在我的条件是我想生成 1 到 1000 之间的随机数。它可以是 1 位、2 位或 3 位。那么如何修改这个功能呢？或者还有其他方法吗？请帮我...

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-03-21T10:53:01.060

你可以使用这个功能：

```
Yii::app()->getSecurityManager()->generateRandomString($length); 
```

这个函数的文档可以在[这里](https://www.yiiframework.com/doc/api/2.0/yii-base-security#generateRandomString()-detail)找到。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T09:41:14.530

像这样的东西？

```
<?php
$length = rand(1,3);
$chars = array_merge(range(0,9));
shuffle($chars);
$password = implode(array_slice($chars, 0,$length));
echo $password;
?> 
```

但是，实际上，我认为您必须像这样使用它:)

```
<?php
$password = rand(1,1000);
echo $password;
?> 
```

# perl - 将字符串及其值存储到数组中：Perl

> ID：13720046
> 
> 赞同：0
> 
> 时间：2012-12-05T09:35:34.780
> 
> 标签：perl

我有一个名为的 Perl 文件`grabPet.pl`和一个名为的文本文件`Pets.txt`

每只宠物都有许多与之相连的玩具。所以一个：`cat=5`

猫会有 5 个玩具。它们用逗号分隔，所以：

`mouse=3, cat=5, dog=9,`

我想将这些输出到格式化的表格中。

我不是在寻找答案，只是关于如何处理它的指导？

我在想可能是一个二维数组，但我认为 perl 不支持它。

```
open(FILE, "<pet.txt") || die"could not read);

while (<FILE>) {
      push (@lines, $line);
  }

close FILE; 
```

[http://i.stack.imgur.com/F2Ej6.png](http://i.stack.imgur.com/F2Ej6.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T09:48:25.463

> 我不是在寻找答案，只是关于如何处理它的指导？

所以这里有一些提示：

1.  确保您的输入行不以换行符结尾
    `chomp (my $line = <FILE>);`

2.  [`split`](http://p3rl.org/split)你的输入字符串：
    `my @parts = split /, */ => $line; # split on commas and whitespace`

3.  准备一个**哈希**来存储您的数据，因为它包含键值对：
    `my %data;`

4.  循环你的部分：
    `foreach my $part (@parts) { ... }`

5.  在您的循环中，将部分拆分为键和值：
    `my ($key, $value) = split /=/ => $part`

6.  在您的循环中，将其存储在`%data`：
    `$data{$key} = $value;`

**笔记**

我把它留给你作为一个简单的练习，用多个输入行来完成。另请注意，您在`open`这里使用错误：

```
open(FILE, "<pet.txt" || die "could not read"); 
```

因为错误检查不会按照您的预期进行。将其替换为

```
open(FILE, '<pet.txt') || die "could not read"; 
```

或者，更好的可读性：

```
open FILE, '<pet.txt' or die "could not read"; 
```

并更好地使用词法文件句柄、三个参数并包含真正的错误消息：

```
open my $file, '<', 'pet.txt' or die "could not read: $!";
...
chomp (my $line = <$file>); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T09:52:02.743

### 解析

如果数据很有序，可以`split`放在每一行。如果我们用逗号分隔前面的空格，我们将得到动物-toynum 对，然后我们可以在等号上进行分割。我会这样写：

```
my %toys = map {split /=/, $_, 2} split /,\s*/, $line; 
```

有趣的位是`map`在一种情况下要拆分的函数和第三个参数，但在另一种情况下则不然。这些原因是 documentet in `perldoc -f`，并且源于此处发生的 list-to-hash 强制。

然后，您可以引用哈希并将其填充到数组中，例如`push @array, \%toys`. 然后，您可以访问类似 的元素，如果我们只解析第六行`$array[5]{mouse}`就会给出。`3`

如果数据更复杂，则必须使用正则表达式，例如

```
my %toys;
while (my $line = <>) {
  while ($line =~ m{ \G \s* ([\w-]+) =\s* (\d+) (?:,|\s*$) }xgc) {
    $toys{$1} += $2;
  }
} 
```

这不会存储每一行​​，而是自动总结每只动物的玩具。

### 数据结构

Perl 不支持多维数组，而是 arrayrefs 的数组，归结为同一件事。

```
my @AoA = (
   [1, 2, 3],
   [4, 5, 6],
   [7, 8, 9]
); 
```

方括号表示匿名数组引用，而花括号表示匿名哈希引用。`perldoc perldata`, `perldoc perllol`,`perldoc perlreftut`和朋友有更多关于这些的信息。

# excel - 错误 -2147417848 自动化错误 调用的对象已与其客户端断开连接

> ID：13720053
> 
> 赞同：4
> 
> 时间：2012-12-05T09:35:50.943
> 
> 标签：excel, runtime-error, excel-2010, vba

我正在清理 3 张 excel 表中的一些表格。

我的代码在 Excel 2007 上运行良好，当我切换到 excel 2010 时，我开始收到此运行时错误**自动化错误调用的对象已与其客户端断开连接**，错误号为**-2147417848**，然后 excel 冻结。

在线运行此功能2次后显示错误

```
 Sheets("Risk Details").Range("A3" & ":BV" & (count + 1)).Delete Shift:=xlUp 
```

谁能帮我找出为什么会发生这种情况以及如何解决它？

下面是函数的完整代码

```
Function clearData(Optional refresh As Boolean) As Boolean
Application.ScreenUpdating = False

Sheets("Single Risk Register").Unprotect myPass
Sheets("Single Risk Register").Activate
Cells.FormatConditions.Delete

Sheets("Risk Details").Unprotect myPass
Sheets("Risks").Unprotect myPass
Dim currentrange As Range

Sheets("Risks").Activate
Set currentrange = Sheets("Risks").Range("RisksTable")
currentrange.ClearContents

Dim count As Integer
count = Sheets("Risks").ListObjects("RisksTable").ListRows.count
If count > 1 Then
    Sheets("Risks").Range("A3" & ":C" & (count + 1)).Delete Shift:=xlUp
End If

Sheets("Risk Details").Activate
Set currentrange = Sheets("Risk Details").Range("RiskDetails")
currentrange.ClearContents
count = Sheets("Risk Details").ListObjects("RiskDetails").ListRows.count
If count > 1 Then
    Sheets("Risk Details").Range("A3" & ":BV" & (count + 1)).Delete Shift:=xlUp
End If
Sheets("Single Risk Register").Activate
count = CInt(Range("ActionsCount"))
Range("ActionsCount") = 1

Dim tableLastRow As Integer
tableLastRow = getLastTableRow()
If (tableLastRow >= 48) Then
    Sheets("Single Risk Register").Range("B48" & ":K" & tableLastRow).Delete Shift:=xlUp
End If
Range("ActionsTable[[Action Description]:[Action Commentary]]").Select
Application.CutCopyMode = False
Selection.ClearContents

Application.ScreenUpdating = False
Dim DataRange As Range

Dim o As Shape
Dim tC As Variant
Dim propertiesCount As Integer
Dim i As Integer

tC = Sheets("TableColumns").ListObjects("TableColumns").DataBodyRange

propertiesCount = GetTemplatePropertiesCount(templates(0)) - 1
ReDim properties(0 To propertiesCount - 1, 0 To 4)
If (properitesColl.Item(i + 1)(propertiesCount, 2) = templates(0)) Then
    properties = properitesColl.Item(i + 1)
End If

For count = 0 To propertiesCount - 1
    If ((properties(count, 4) <> "C25") And (properties(count, 4) <> "C26") And (properties(count, 4) <> "C27") And (properties(count, 4) <> "C28") And (properties(count, 4) <> "C38") And (properties(count, 4) <> "C39") And (properties(count, 4) <> "C40") And (properties(count, 4) <> "C41"))

    Then
        Sheets("Single Risk Register").Range(properties(count, 4)) = ""
    End If
Next

Dim columnCount As Integer
columnCount = GetColumnCount()
count = 0
For i = 1 To columnCount
    If tC(i, 4) <> "Action" Then
        Set currentrange = Range(tC(i, 4))
    Else
        Set currentrange = Range("ActionsTable[" & tC(i, 1) & "]")
    End If
    If ((tC(i, 4) = "C25") Or (tC(i, 4) = "C26") Or (tC(i, 4) = "C27") Or (tC(i, 4) = "C28") Or (tC(i, 4) = "C38") Or (tC(i, 4) = "C39") Or (tC(i, 4) = "C40") Or (tC(i, 4) = "C41")) 

     Then
        With currentrange.Interior
            .Pattern = xlSolid
            .PatternColorIndex = xlAutomatic
            .Color = 15654866
            .TintAndShade = 0
            .PatternTintAndShade = 0
        End With

    Else
        With currentrange.Interior
            .Pattern = xlSolid
            .PatternColorIndex = xlAutomatic
            .ThemeColor = xlThemeColorAccent1
            .TintAndShade = 0.799981688894314
            .PatternTintAndShade = 0
        End With
    End If
Next

Sheets("Single Risk Register").Unprotect myPass
If (Range("C3").Value = "") Then
    Range("ActionsTable[[Action Description]:[" & addTitle & "]]").Select
    Selection.Locked = True
    Rows("45:47").Select
    Selection.EntireRow.Hidden = True
End If

Sheets("Single Risk Register").Range(Range("TitleCell")).Value = Range("OldTitle") + " (" + Range("Project_Title") + ")"

Sheets("Single Risk Register").Protect myPass, AllowFiltering:=True
Sheets("Risk Details").Protect myPass, AllowFiltering:=True
Sheets("Risks").Protect myPass, AllowFiltering:=True

doNotRun = False
Range("C3").Select
Application.ScreenUpdating = True

Exit Function

err:  

Sheets("Risk Details").Protect myPass
Sheets("Risks").Protect myPass
MsgBox err.Description, vbCritical, "Error" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T11:29:08.413

[微软提供了一个高级别的答案](http://support.microsoft.com/kb/319832)：

如果代码在第一次运行时似乎总是可以工作，并且如果错误或意外行为仅在随后调用相同代码期间发生，则原因是不合格的方法调用。

# javascript - IE9上的JQUERY水平菜单

> ID：13720055
> 
> 赞同：0
> 
> 时间：2012-12-05T09:35:52.597
> 
> 标签：javascript, jquery, css, jquery-ui

我使用了以下 JQUERY UI 水平菜单示例： [如何使 jQuery UI 导航菜单水平？](https://stackoverflow.com/questions/12944364/how-to-make-jquery-ui-nav-menu-horizontal) 这在 Chrome 上效果很好，但在 IE 9 中它看起来很糟糕而且它不是水平的你知道我错过了什么吗？

我的 JQUERY 来源：

```
<link rel="stylesheet" href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css" />
<script src="http://code.jquery.com/jquery-1.8.3.js"></script>
<script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script> 
```

我的CSS：

```
#menu li 
{ 
    width: auto;
    clear: none;
    background:blue;
    margin-right:3px;
    margin-left:3px;
    margin-top:2px;
    float: left;
}

.menuIconItem 
{
    cursor:hand;
}

.liMenuItem
{
    background-color:transparent;
}

.menu
{
    border: 0px !important;
    background:D0E1F7 !important;
} 
```

我的代码：

```
<ul id="menu" class="menu">
    <li class="liMenuItem" title="1">
    <a onclick="menuItemClicked('1');" class="menuIconItem">
    <img src="1.png" id="img1">
    </a></li>
    <li class="liMenuItem" title="2">
    <a onclick="menuItemClicked('2');" class="menuIconItem">
    <img src="2.png" id="img2">
    </a></li></ul> 
```

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T09:50:54.507

![IE演示](../Images/bd6f9ab90e9014b49603864964de2974.png)请参阅以下链接了解更多详情，

[跨浏览器菜单](http://www.newthinktank.com/2011/11/cross-browser-horizontal-menu/)

它告诉您对于 IE，您必须对 css 文件进行更改，因为某些东西可能无法在 IE 中正常工作，

```
ul.dropdown ul li { 
    display: inline; 
    width: 100%; /* Width depends on the size of containing block */
} 
```

试试这个希望它有帮助..

# c# - 更新数据表中包含多行的行中的单个单元格

> ID：13720057
> 
> 赞同：1
> 
> 时间：2012-12-05T09:36:02.847
> 
> 标签：c#, asp.net, datatable

我将如何更新一行中的单个单元格，例如 Row[0] 我想用其当前值 +1 更新列“Value”。这是我拥有的代码，它选择单行，但值更新为所有列“值”数据，然后 +1

```
public void MetricChange()
    {
        DataTable dt = ds.Tables["MetricTable"];
        int value = dt.AsEnumerable().Sum(r1 => r1.Field<int>("Value"));
        if (Access.Checked)
        {
            ds.Tables["MetricTable"].Rows[0]["Value"] = value +1;
            //ds.Tables["MetricTable"].Rows[1]["Value"] = value - 1;
            Chart2.DataSource = ds.Tables["MetricTable"];
            GridView1.DataSource = dt;
            GridView1.DataBind();
        }

    } 
```

我将如何更新单行中的“值”列？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T09:37:52.267

目前您只修改一行，您需要对数据表中的每一行执行此操作。

```
for(int i = 0; i < ds.Tables["MetricTable"].Rows.Count;i++)
    ds.Tables["MetricTable"].Rows[i]["Value"] = value +1; 
```

检查数据集是否存在空值和表总是更好。就像是。

```
if(ds != null && ds.Tables.Count > 0 && ds.Tables["MetricTable"] != null) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T12:18:28.647

这就是你的做法：P

```
int val = Convert.ToInt32(ds.Tables["MetricTable"].Rows[0]["Value"]) + 1; 
```

然后以此更新行`ds.Tables["MetricTable"].Rows[0][1] = val`

# python - “__requires__”在python中是什么意思？

> ID：13720065
> 
> 赞同：21
> 
> 时间：2012-12-05T09:36:23.050
> 
> 标签：python, setuptools

我是python的新手。

有人可以回答`__requires__`以下代码中的含义吗？他们为什么要放在`__requires__ = 'flower==0.4.0'`文件的开头？

```
#!/srv/virtualenvs/zeusenv/bin/python

__requires__ = 'flower==0.4.0'
import sys
from pkg_resources import load_entry_point

sys.exit(
   load_entry_point('flower==0.4.0', 'console_scripts', 'flower')()
) 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-12-05T09:50:58.330

该`__requires__`行是生成的控制台脚本的一部分。它对 Python 本身没有任何意义，只有`setuptools`库使用这些信息。

控制台脚本是在 python 包元数据中定义的 python 脚本，并`setuptools`安装包装脚本文件以让您将它们作为命令行脚本运行。安装在你的 virtualenv 中的`flower`文件就是这样一个脚本，由`flower`包`setup.py`文件定义。

`pkg_resources`包装脚本中导入的模块检查`__requires__` 主脚本中的值，以确保在`load_entry_point`函数（或任何其他`pkg_resources`函数）运行之前，库的正确版本可用并加载。它不会安装指定的版本，假定该版本*已*安装在您的系统上。其目的是避免在脚本运行和加载依赖项时加载不正确的、不兼容的资源。

# assembly - 装配测试说明

> ID：13720068
> 
> 赞同：1
> 
> 时间：2012-12-05T09:36:33.843
> 
> 标签：assembly, x86

我想知道这个操作是什么意思？

```
Test EDX, 200 
```

我有这样的`DWORD`价值`EDX`：

```
1A1B1C00 
```

当我这样做`test EDX, 200` 然后 a`JE`时，将进行跳转。为什么？`EDX`不等于`200`。

我想更多地了解`Test EDX, 200`意义。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T09:40:05.470

A`test`执行 an`AND`而不修改操作数（它只修改一些标志，如`ZF`et al）。A`je`简单地测试`ZF`（零标志）并在设置时跳转。

`Test EDX, 200`如果结果是. _ `AND`_ `EDX`_ `0x200`_ `ZF`_ 在您的情况下，这将给我们：`1``AND``0`

```
0x1A1B1C00 AND 0x00000200 -> 0x00000000 
```

由于`0x0200`是`0000 0010 0000 0000`二进制的，该指令的目的`Test EDX, 200`是测试 in 的值`EDX`并查看第 9 位（从 0 开始向右数的 9 位）是否为 a`0`或`1`，如果为 0 则跳转。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T21:50:11.590

要了解汇编指令的作用，我建议使用 Google。在谷歌中，你可以只写指令的名称，在这种情况下`test`，和类似的东西`intel instruction`（对于英特尔指令）：

[谷歌：测试英特尔指令](https://www.google.com/#q=test+intel+instruction)

从上面链接的 Google 搜索结果中，您还会发现一些服务器具有不同的页面，用于根据指令名称命名的不同 x86 汇编指令：

[http://web.itu.edu.tr/kesgin/mul06/intel/instr/test.html](http://web.itu.edu.tr/kesgin/mul06/intel/instr/test.html)

正如上面链接的网页上所说：

```
TEST - Test For Bit Pattern

    Usage:  TEST    dest,src
    Modifies flags: CF OF PF SF ZF (AF undefined)

    Performs a logical AND of the two operands updating the flags
    register without saving the result. 
```

例如，要找出其他指令的作用，`cmpxchg`您只需将地址中的指令名称替换为：

[http://web.itu.edu.tr/kesgin/mul06/intel/instr/cmpxchg.html](http://web.itu.edu.tr/kesgin/mul06/intel/instr/cmpxchg.html)

最后，有关英特尔组装的最终信息来源是英特尔软件开发人员手册，它们非常有用，并且可以免费获得 pdf 格式：

[英特尔® 64 和 IA-32 架构软件开发人员手册](http://www.intel.com/content/www/us/en/processors/architectures-software-developer-manuals.html)

[英特尔® 64 和 IA-32 架构软件开发人员手册组合卷集](http://download.intel.com/products/processor/manual/325462.pdf)

# jquery - Flotgraph 系列开/关、悬停、缩放/平移和跟踪

> ID：13720070
> 
> 赞同：8
> 
> 时间：2012-12-05T09:36:38.323
> 
> 标签：jquery, flot

我正在尝试结合浮动示例：

*   [http://people.iola.dk/olau/flot/examples/turning-series.html](http://people.iola.dk/olau/flot/examples/turning-series.html)
*   [http://people.iola.dk/olau/flot/examples/navigate.html](http://people.iola.dk/olau/flot/examples/navigate.html)
*   [http://people.iola.dk/olau/flot/examples/tracking.html](http://people.iola.dk/olau/flot/examples/tracking.html)

成一张图。感谢这个论坛的许多答案，我能够结合转动系列和导航；预览：[http](http://www.tryit.sg/flotmaster/example/ajax.php) ://www.tryit.sg/flotmaster/example/ajax.php ，但是我似乎无法添加跟踪...

看起来，如果我编辑“标签”，浮动图不会显示任何内容，因为标签不匹配。有没有技巧/黑客，所以我将能够有一个 x 轴显示图例中这些图的值？

我实际上设法添加了跟踪，但是现在我无法添加多个轴，任何人都可以给我一个想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T05:30:03.407

[教程：Flot – 如何创建多轴图表](http://www.pikemere.co.uk/blog/flot-tutorial-how-to-create-charts-with-multiple-axes/)分解所有其他组件；它非常详细，应该可以帮助您解决问题。这是示例中有关如何完成多个轴的相关代码片段。

```
 yaxes: [
        {
            tickFormatter: function (val, axis) {
                return val + "mm";
            },
            max: 65,
            axisLabel: "Rainfall",
            axisLabelUseCanvas: true,
            axisLabelFontSizePixels: 12,
            axisLabelFontFamily: "Verdana, Arial, Helvetica, Tahoma, sans-serif",
            axisLabelPadding: 5
        },
        {
            position: 0,
            tickFormatter: function (val, axis) {
                return val + "\u00B0C";
            },
            max: 40,
            axisLabel: "Temperature",
            axisLabelUseCanvas: true,
            axisLabelFontSizePixels: 12,
            axisLabelFontFamily: "Verdana, Arial, Helvetica, Tahoma, sans-serif",
            axisLabelPadding: 5
        }
    ], 
```

这是另一个例子： http: [//people.iola.dk/olau/flot/examples/multiple-axes.html](http://people.iola.dk/olau/flot/examples/multiple-axes.html)

您可以通过使用优秀的 Google 搜索找到更多示例：[https ://www.google.com/search?q=flot+multiple+axes](https://www.google.com/search?q=flot+multiple+axes)

# android - Cordova 本地通知 Android Plugin 2.2 升级

> ID：13720071
> 
> 赞同：3
> 
> 时间：2012-12-05T09:36:39.840
> 
> 标签：android, cordova, phonegap-plugins, cordova-2.0.0, localnotification

我正在使用 Phonegap [Cordova 2.2] 在 Android 上开发“提醒”应用程序。

用户为他的提醒输入了一个特定的日期，我应该准时通知他。

我使用 Android 的通知插件，但它支持早期版本的电话间隙。我按照本教程解决了cordova 2.2和以前的冲突，现在已经修复了很多问题，但我仍然无法修复一些：

```
 public PluginResult execute(String action, JSONArray optionsArr, String callBackId) {
    alarm = new AlarmHelper(cordova.getActivity());
    Log.d(PLUGIN_NAME, "Plugin execute called with action: " + action);

    PluginResult result = null;

    final AlarmOptions alarmOptions = new AlarmOptions();
    alarmOptions.parseOptions(optionsArr); 
```

此函数的这一行有问题：

```
 public PluginResult execute(String action, JSONArray optionsArr, String callBackId) 
```

当我用这一行替换它时：

```
public boolean execute(String action, JSONArray optionsArr, CallbackContext callbackContext) { 
```

错误已修复，但此函数显示另一个错误：

```
persistAlarm(alarmId, optionsArr);
        return this.add(daily, title, subTitle, ticker, alarmId, alarmOptions.getCal());
    } else if (action.equalsIgnoreCase("cancel")) {
        unpersistAlarm(alarmId);
        return this.cancelNotification(alarmId);
    } else if (action.equalsIgnoreCase("cancelall")) {
        unpersistAlarmAll();
        return this.cancelAllNotifications();
    }

    return result;
} 
```

返回类型无法转换为布尔值，那么我该如何解决呢？

**更新：**

我将返回类型替换为布尔值，现在就是这样：

```
 @Override
public boolean execute(String action, JSONArray optionsArr, CallbackContext callBackId) 
{
    Log.d(PLUGIN_NAME, "optionsArr: " + optionsArr.toString());
    alarm = new AlarmHelper(cordova.getActivity());
    Log.d(PLUGIN_NAME, "Plugin execute called with action: " + action);

//PluginResult result = null;
boolean result = true;

final AlarmOptions alarmOptions = new AlarmOptions();
alarmOptions.parseOptions(optionsArr);

/*
 * Determine which action of the plugin needs to be invoked
 */
String alarmId = alarmOptions.getNotificationId();
if (action.equalsIgnoreCase("add")) {
    final boolean daily = alarmOptions.isRepeatDaily();
    final String title = alarmOptions.getAlarmTitle();
    final String subTitle = alarmOptions.getAlarmSubTitle();
    final String ticker = alarmOptions.getAlarmTicker();
    persistAlarm(alarmId, optionsArr);
    this.add(daily, title, subTitle, ticker, alarmId, alarmOptions.getCal());
    callBackId.success();
    return true;
} 
else if (action.equalsIgnoreCase("cancel")) {
    unpersistAlarm(alarmId);
    this.cancelNotification(alarmId);
    callBackId.success();
    return true;
}
else if (action.equalsIgnoreCase("cancelall")) {
    unpersistAlarmAll();
    this.cancelAllNotifications();
    callBackId.success();
    return true;        
}
return result;
} 
```

现在，它正在工作，但是当我单击通知时，应用程序没有打开并且通知没有消失......我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-09T11:57:52.537

好的，本地通知插件终于可以使用cordova 2.2 :) 现在这里是需要的修改：

1) 更换

```
import com.phonegap.api.Plugin;
import com.phonegap.api.PluginResult; 
```

和

```
import org.apache.cordova.api.CordovaPlugin;
import org.apache.cordova.api.PluginResult; 
```

2) 更换

```
public PluginResult execute(String action, JSONArray optionsArr, String callBackId) 
```

和

```
public pluginresult execute(String action, JSONArray args, CallbackContext callbackContext) 
```

3) 添加

```
callbackContext.success();
return true; 
```

或者

```
return false; 
```

作为函数的返回类型。

4) 更换

```
this.ctx 
```

和

```
cordova.getActivity() 
```

5)添加

```
import yourapplication.name.R; 
```

到**AlarmReciever.Java**

就是这样:) 希望它有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T17:12:50.247

将其替换为“公共布尔执行”功能并成功添加

```
callbackContext.success();
return true; 
```

失败时：

```
return false; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-10T02:54:14.510

包括 Sana Joseph 的评论在内的整个文件可以在这里找到：

[https://github.com/Philzen/phonegap-plugins/tree/master/Android/LocalNotification](https://github.com/Philzen/phonegap-plugins/tree/master/Android/LocalNotification)

在我创建了这个之后，我还找到了[https://github.com/olore/LocalNotifications](https://github.com/olore/LocalNotifications)，它也允许使用 cordova 插件安装。

使用这些解决方案中的任何一个都可以创建通知并正常显示，但是 - 当我单击它时没有任何反应:( 它既不会消失也不会打开应用程序。

任何线索我可能会错过什么？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-05T23:18:38.150

您必须使用您`callbackContext`的才能将其他数据返回给您的成功/错误处理程序。返回值必须是布尔值。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-07-23T16:21:18.770

仅供参考

改变

```
LocalNotification extends Plugin 
```

为了

```
LocalNotification extends CordovaPlugin 
```

这个对我有用

# apache - 无法使 PHP Mail() 函数工作

> ID：13720074
> 
> 赞同：-1
> 
> 时间：2012-12-05T09:36:43.593
> 
> 标签：apache, ubuntu-12.04, php

我使用的是 Ubuntu 12.04 并安装了 PHP5、Apache2。然后我使用以下 php 代码发送邮件。

```
 <?php
$to = "mymail@gmail.com";
$subject = "Test mail";
$message = "Hello! This is a simple email message.";
$from = "mymail@gmail.com";
$headers = "From:" . $from;
if(mail($to,$subject,$message,$headers)){
    echo "Mail Sent.";
}  else {
    echo 'failed';
}

?> 
```

我使用 apt-get install sendmail 安装了 sendmail 并运行了上面的代码。它显示“已发送邮件”，但我的收件箱中没有任何邮件。我努力想弄清楚这个问题，但我做不到。请帮助我使用 PHP mail() 函数发送邮件。

**编辑：**我尝试使用'sudo apt-get install postfix'的后缀。然后它也显示“已发送邮件”，但我的收件箱中没有邮件。

谢谢..！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T09:39:33.067

我认为您需要运行 SMTP 服务器来发送电子邮件。

在 php.ini 中，尝试更改这些行：

```
[mail function]
; For Win32 only.
SMTP = localhost
smtp_port = 25 
; For Win32 only.
sendmail_from = me@localhost.com 
```

或启动 SMTP 服务器`localhost`

# django - django queryset 惰性和模板上下文

> ID：13720075
> 
> 赞同：0
> 
> 时间：2012-12-05T09:36:46.263
> 
> 标签：django, django-queryset

假设我有 3 个模型，它们是`A` `B`和`C`view.py，如下所示：

```
def blahblah(request):
    a = A.objects.all(),
    b = B.objects.all(),
    c = C.objects.all(),
    context = {
      a = a,
      b = b,
      c = c,
    }
    return render(request, template, context) 
```

我听说查询集是惰性的，所以在我们使用它之前它不会访问数据库。问题是，如果我有一个只`a`像这样使用`{{ a }}`而不使用`b`or的模板，`c`我们访问数据库多少次？将查询集放在上下文中而不在模板上使用它会触发查询集吗？谢谢，对不起我的英语不好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T09:39:05.127

就一次。如果您实际上没有从`b`or检索任何结果`c`，则不会命中数据库。

通常，在模板中，当您使用 for 循环从查询集中提取单个项目时，或者如果您运行其他方法（如`count`. 但是假设您的模板只说 {{ a }}，那么`a`实际上只会从数据库中查询，尽管如果您使用的是`all`，而不是`get`.

我还应该补充一点，您可以使用[调试工具栏](https://github.com/django-debug-toolbar/django-debug-toolbar)来实际查看执行了哪些查询。

# asp.net - 比引用程序集更高的版本

> ID：13720077
> 
> 赞同：0
> 
> 时间：2012-12-05T09:36:56.793
> 
> 标签：asp.net, .net, web-config, assemblies

我收到此错误：

```
Error   101 Assembly 'EPiServer.Web.WebControls, Version=6.1.379.0, Culture=neutral, PublicKeyToken=8fe83dea738b45b7' uses 'EPiServer, Version=6.1.379.0, Culture=neutral, PublicKeyToken=8fe83dea738b45b7' which has a higher version than referenced assembly 'EPiServer, Version=5.2.375.236, Culture=neutral, PublicKeyToken=8fe83dea738b45b7'  c:\EPiServer\Sites\suntliv 6.2\bin\EPiServer.Web.WebControls.dll    SuntLiv.Web 
```

这是否意味着程序集 EPiServer.Web.WebControls 调用 EPiServer DLL 版本 6.1.379.0 但只找到 EpiServer DLL 版本 5.2.375.236？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T11:21:02.287

第一条评论说明了一切。它没有被正确引用。

# java - CAS部署在glassfish上，奇怪的异常

> ID：13720080
> 
> 赞同：0
> 
> 时间：2012-12-05T09:36:58.870
> 
> 标签：java, deployment, glassfish, cas

我能够在一台 glassfish 服务器上部署我的 cas 服务器 .war。现在我也想将它部署在一个 virtualbox 实例中，但它似乎不起作用。在两台服务器上，我都使用 ubuntu。

当我尝试在虚拟机中部署 cas 服务器时，出现以下异常：

```
[#|2012-12-05T10:24:49.001+0100|SEVERE|glassfish3.1.2|javax.enterprise.system.tools.admin.org.glassfish.deployment.admin|_ThreadID=17;_ThreadName=Thread-2;|Exception while invoking class com.sun.enterprise.web.WebApplication start method
java.lang.Exception: java.lang.IllegalStateException: ContainerBase.addChild: start: org.apache.catalina.LifecycleException: org.apache.catalina.LifecycleException: java.lang.NoSuchMethodError: org.apache.commons.collections.SetUtils.orderedSet(Ljava/util/Set;)Ljava/util/Set;
    at com.sun.enterprise.web.WebApplication.start(WebApplication.java:138)
    at org.glassfish.internal.data.EngineRef.start(EngineRef.java:130)
    at org.glassfish.internal.data.ModuleInfo.start(ModuleInfo.java:269)
    at org.glassfish.internal.data.ApplicationInfo.start(ApplicationInfo.java:301)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:461)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:240)
    at org.glassfish.deployment.admin.DeployCommand.execute(DeployCommand.java:389)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$1.execute(CommandRunnerImpl.java:348)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:363)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:1085)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.access$1200(CommandRunnerImpl.java:95)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1291)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1259)
    at com.sun.enterprise.v3.admin.AdminAdapter.doCommand(AdminAdapter.java:461)
    at com.sun.enterprise.v3.admin.AdminAdapter.service(AdminAdapter.java:212)
    at com.sun.grizzly.tcp.http11.GrizzlyAdapter.service(GrizzlyAdapter.java:179)
    at com.sun.enterprise.v3.server.HK2Dispatcher.dispath(HK2Dispatcher.java:117)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$Hk2DispatcherCallable.call(ContainerMapper.java:354)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:228)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:662)
|#] 
```

有谁知道，为什么会抛出这个异常？我在互联网上找不到任何关于它的信息......

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T06:23:12.133

这是与java版本问题有关的事情，如果您的开发是使用更高版本的java完成的并且部署环境是更低版本的java，这可能会发生检查版本。

您可以通过在命令提示符下键入 java -version 来检查

# netbeans-platform - 已执行 netbeans 平台 NotificationDisplayer 关闭按钮操作

> ID：13720082
> 
> 赞同：0
> 
> 时间：2012-12-05T09:36:59.200
> 
> 标签：netbeans-platform

我正在使用 netbeans RCP，当我第一次使用 NotificationDisplayer 登录时，我在状态栏上使用了一个气球对话框来显示。链接按钮动作执行工作正常。但是当我单击 NotificationDisplayer 的关闭按钮（即十字按钮）时，我想显示警告对话框。

谢谢， 加达姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T08:31:44.843

我也在尝试使用 DialogDIsplayer 和 DIAlogDescriptor 创建登录对话框。但现在我知道，这种方式在通过 Jemmy 或 Jelly 测试工具测试此对话框时存在一些愚蠢的问题。

所以我换个方式。1）我创建了TopComponent，它在启动时打开，不可拖动，不可关闭等，所有不必要的我的模块都更改为“自动加载”类型。当用户登录时，然后以编程方式打开所需的模块。

吉尔卡

# wpf - 如何将 DataTemplate 中的按钮绑定到窗口的 Viewmodel 命令？

> ID：13720088
> 
> 赞同：0
> 
> 时间：2012-12-05T09:37:23.940
> 
> 标签：wpf, binding, datatemplate

我有一个有趣的问题`Binding`，我有一个`DataTemplate`包含一个`Button`，并且`DataTemplate`已经放置在一个窗口（specView）中，我需要将它绑定`Button.Command`到一个`Commnad`内部窗口的视图模型，所以我这样做：

```
Command="{Binding DataContext.NewOfferNoCommand,ElementName=specView}"/> 
```

但直到我创建一个返回值的转换器之前它不会被绑定：

```
public class ReturnValueConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        return value;
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        return value;
    }
} 
```

我真的不明白问题是什么？任何idia？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T09:34:10.420

You need to set the relative source in order for the binding to work.

```
{Binding DataContext.NewOfferNoCommand, RelativeSource={RelativeSource TemplatedParent}} 
```

# java - Google Drives SDK 和 powerpoint

> ID：13720090
> 
> 赞同：2
> 
> 时间：2012-12-05T09:37:30.100
> 
> 标签：java, android, metadata, powerpoint, google-drive-api

我目前正在使用 google drive SDK/google doc 的嵌入式播放器开发一个小型 android 应用程序，它将以幻灯片的方式播放 power point 文件。由于我无法直接判断一个 powerpoint 何时结束，而另一个 powerpoint 何时开始使用 SDK，所以我想知道是否有任何方法可以让我从 powerpoint 中检索幻灯片的数量。随着幻灯片的数量，我将尝试使用幻灯片更改之间的间隔来计算每个 powerpoint 播放所需的时间，然后使用它可以切换文件。我知道 .pptx 文件在其元数据中包含大量幻灯片（对 .ppt 不太确定），但我不知道如何继续阅读它。我查看了 google drive SDK 读取元数据的部分，但它似乎仅限于您实际可以读取的内容。我' 我看过 ApachePOI，但它似乎与 android 不兼容。谁能指出我正确的方向？

谢谢 ：）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T23:00:10.497

抱歉，使用 Google Drive SDK 无法做到这一点。您可以轻松下载 pptx，解压缩它（它只是压缩的 XML）并提取所需的元数据。

# datatable - 添加数据表时，数据区域“DataSetName”中缺少数据集名称

> ID：13720091
> 
> 赞同：0
> 
> 时间：2012-12-05T09:37:31.990
> 
> 标签：datatable, dataset, reportviewer, rdlc

使用 MS ReportViewer 构建 rdlc 报告时出现以下错误：数据区域“DataSetName”中缺少数据集名称。

基本上在我的数据集中，我有一个链接到存储过程的表适配器和一个不链接到数据库的数据表。数据表的目的是允许我保存报表中使用的用户参数，以便它们可以显示在报表中。RDLC 在没有数据表的情况下工作，但添加时出现此错误。

我已经通过数据源将数据表添加到报告中，并且能够将字段添加到 RDLC 中。

我遵循的过程是根据我找到的链接：

[http://www.ramto.com/blog/post/Using-RDLC-files-and-Microsoft-Report-Viewer-in-ASPNET.aspx](http://www.ramto.com/blog/post/Using-RDLC-files-and-Microsoft-Report-Viewer-in-ASPNET.aspx)

那么，我在这里错过了什么，还是其他什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T11:32:03.490

如果您是新手，则在所附链接上的解释方式有点模糊，请按照此代码项目链接详细解释所有内容，并附上代码以进行本地测试。

[将 RDLC 绑定到报表查看器](http://www.codeproject.com/Articles/31862/Dynamic-Binding-Of-RDLC-To-ReportViewer)

# java - 为什么以及在哪里调用 setLocale

> ID：13720092
> 
> 赞同：2
> 
> 时间：2012-12-05T09:37:34.540
> 
> 标签：java, android, sqlite, locale

我需要为我的应用程序创建一个 SQLite 数据库。我需要存储几种欧洲语言的文本，所以会有很多重音字符和其他奇怪的标记。我在扩展`SQLiteOpenHelper`。

检查 .db 文件时，我注意到有一个名为 .db 的额外表`android_metadata`。有一个名为 的列`locale`，在我的模拟器中默认设置为“en_US”。

我已经阅读了开发人员指南中的 SQLite 部分，以及在 SO 和 Google 中搜索的和的 javadocs `SQLiteOpenHelper`，`SQLiteDatabase`但我找不到将语言环境设置为 DB 的正确位置，或者它是否真的需要. 猜测应该在创建数据库时完成，我尝试调用`db.setLocale`助手的`onCreate`方法，但我得到了这个异常：

```
BEGIN TRANSACTION failed setting locale
FATAL EXCEPTION: Thread-9
android.database.sqlite.SQLiteException: cannot start a transaction within a transaction
at android.database.sqlite.SQLiteDatabase.native_setLocale(Native Method)
at android.database.sqlite.SQLiteDatabase.setLocale(SQLiteDatabase.java:1950) 
```

这就是我的方法的外观：

```
public class MyOpenHelper extends SQLiteOpenHelper {

    @Override
    public void onCreate(SQLiteDatabase db) {   
        db.setLocale(new Locale("en","EN"));
        ...
    }

    ...
} 
```

这是我的问题：

1.  我真的需要将语言环境设置为数据库吗？我真的不需要开箱即用地对查询进行排序，因为我以后总是可以自己对结果进行排序。
2.  我应该在哪里打电话`setLocale`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T10:50:54.430

1.  仅当您打算使用`LOCALIZED`排序算法时才需要设置语言环境，这取决于系统语言环境，
2.  如您的回答中所述，请致电`setLocale()`。[`onConfigure()`](http://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html#onConfigure%28android.database.sqlite.SQLiteDatabase%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T10:27:48.203

好的，我在`SQLiteOpenHelper`文档中找到了以下方法：

[无效 onConfigure（SQLiteDatabase 数据库）](http://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html#onConfigure%28android.database.sqlite.SQLiteDatabase%29)

从方法描述中复制：

> *在配置数据库连接时调用，以启用预写日志记录或外键支持等功能。在调用 onCreate(SQLiteDatabase)、onUpgrade(SQLiteDatabase, int, int)、onDowngrade(SQLiteDatabase, int, int) 或 onOpen(SQLiteDatabase) 之前调用此方法。除了根据需要配置数据库连接外，它不应修改数据库。该方法只应调用配置数据库连接参数的方法，如 enableWriteAheadLogging() setForeignKeyConstraintsEnabled(boolean)、setLocale(Locale)、setMaximumSize(long) 或执行 PRAGMA 语句。*

当助手第一次创建数据库时，会调用此方法。我检查了 db 文件，`android_metadata`现在包含正确的语言环境。我已经运行了一些测试来存储重音字符，即使没有设置正确的语言环境，它们也会正确写入数据库。

# android - eCLIPSE 问题中的 getExternalStorageState

> ID：13720095
> 
> 赞同：0
> 
> 时间：2012-12-05T09:37:45.920
> 
> 标签：android, eclipse, android-emulator

在 Eclipse 上，模拟器返回`Environment.getExternalStorageState()`为已删除，路径为 /mnt/sdcard...如何重新安装内存？早些时候，同样是只读的，即 /mnt/sdcard 具有`d---------`我使用更改的权限`chmod 777 /mnt/sdcard`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T09:44:27.443

尝试在 AVD 管理器中编辑您的 AVD..删除 SD 卡支持并再次添加并分配内存..检查它是否有效？

# sql-server-2005 - CASE 语句中的语法不正确

> ID：13720100
> 
> 赞同：0
> 
> 时间：2012-12-05T09:38:02.077
> 
> 标签：sql-server-2005

我收到一个错误

> *= 附近的语法不正确*

执行此过程时：

```
DECLARE @I_BRANCH_ID VARCHAR(MAX) 

EXEC GETBALANCE CASE WHEN @I_BRANCH_ID ='' THEN 0 ELSE @I_BRANCH_ID END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T09:40:17.497

您不能将条件语法放入这样的 EXECUTE 语句中。

相反，请尝试：

```
IF (@I_BRANCH_ID = '')
    SET @I_BRANCH_ID = '0'

EXECUTE GetBalance @I_BRANCH_ID 
```

编辑：

使用更多参数，您可以简化为：

```
SELECT @param1 = CASE WHEN @param1 = '' THEN '0' ELSE @param1 END,
       @param2 = CASE WHEN @param2 = '' THEN '0' ELSE @param2 END,
       @param3 = CASE WHEN @param3 = '' THEN '0' ELSE @param3 END
       ... etc etc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T09:45:51.667

尝试将变量的值与 EXECUTE 语句分开设置：

```
DECLARE @I_BRANCH_ID VARCHAR(MAX) 

SET @I_BRANCH_ID = CASE WHEN @I_BRANCH_ID = '' THEN 0 ELSE @I_BRANCH_ID END

EXEC GETBALANCE @I_BRANCH_ID 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T09:46:22.177

```
DECLARE @I_BRANCH_ID VARCHAR(MAX)
SET @I_BRANCH_ID = CASE WHEN @I_BRANCH_ID = '' THEN '0' ELSE @I_BRANCH_ID END
EXEC GETBALANCE @I_BRANCH_ID 
```

# wpf - WPF：从 XAML 加载窗口

> ID：13720101
> 
> 赞同：1
> 
> 时间：2012-12-05T09:38:03.940
> 
> 标签：wpf, xaml, window

如何`Window`从 XAML 文件创建实例？目录中有不同的 XAML 文件（自定义窗口）。我需要加载必要的 XAML 并显示它。存在方法为`Window.LoadFromXAML`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T10:00:14.997

您可以使用[XamlReader.Load](http://msdn.microsoft.com/en-us/library/system.windows.markup.xamlreader.load%28v=vs.100%29.aspx)来完成。它返回相应对象树的根。在您的情况下，是 Window 类的实例。

# linux - 修改hadoop作业中的LD_LIBRARY_PATH JAVA_LIBRARY和CLASSPATH

> ID：13720104
> 
> 赞同：3
> 
> 时间：2012-12-05T09:38:28.663
> 
> 标签：linux, apache, hadoop, classpath, hdfs

在集群上运行 hadoop 作业之前，我需要修改 LD_LIBRARY_PATH JAVA_LIBRARY_PATH 和 CLASSPATH。在 LD_LIBRARY_PATH 和 JAVA_LIBRARY_PATH 中，我需要添加一些运行作业时所需的 jar 的位置，因为这些 jar 在我的集群中可用，类似于 CLASSPATH。

我有一个 3 NODE 集群，我需要修改所有 3 个数据节点的 LD_LIBRARY_PATH 和 CLASSPATH，以便将集群节点上可用的 jar 添加到类路径中，以便在运行作业时可以使用以下 jar在运行作业以使用集群节点上所有可用的 jar 时避免 jar 分发。我已经尝试了以下选项

1.我试过修改hadoop-env.sh来修改CLASSPATH

```
export HADOOP_TASKTRACKER_OPTS="-classpath:/opt/oracle/oraloader-2.0.0-2/jlib/ 
```

但是上面的东西修改了 HADOOP_CLASSPATH 而不是 CLASSPATH

1.  对于 LD_LIBRARY_PATH 和 JAVA_LIBRARY_PATH，我已经厌倦了在 mapred-site.xml 中添加以下属性作为建议的我的位置，但这没有用。

    <属性>

    <名称>mapred.child.env</名称>

    <value>JAVA_LIBRARY_PATH=/opt/oracle/oraloader-2.0.0-2/lib/</value>

    <value>LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/opt/oracle/oraloader-2.0.0-2/lib/</value>

    <描述>用户为任务跟踪器子进程添加了环境变量。示例： 1) A=foo 这会将环境变量 A 设置为 foo 2) B=$B:c 这是继承 tasktracker 的 B 环境变量。</说明>

    </属性>

我还重新启动了所有 3 个数据节点、所有 tasktraker 和 2 个 NAMENOdes。仍然没有设置这些变量，我的 hadoop 作业无法找到运行测试所需的所有 jar 文件。

错误日志::

> 错误：java.lang.ClassNotFoundException: oracle.i18n.text.OraDateFormat at java.net.URLClassLoader$1.run(URLClassLoader.java:202)

当我在集群节点上回显 HADOOP_CLASSPATH 时，运行 hadoop 作业所需的所有内容都即将到来。但我认为需要在 JAVA_LIBRARY_PATH 中添加以下罐子，但它不会出现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T09:49:54.367

不要重新发明轮子。

如果您的实现使用`ToolRunner`（如果您在 Java 中实现 map-reduce，您确实应该使用它），那么您可以使用`-libjars jar1,jar2`将您的 jar 发送到集群。

查看 Tom White 的“Hadoop：权威指南”中的“Side Data Distribution”部分。

# neo4j - 如何在密码查询中获取具有组名的最大用户组？

> ID：13720107
> 
> 赞同：1
> 
> 时间：2012-12-05T09:38:35.000
> 
> 标签：neo4j, cypher

这是我的密码查询：

```
params.put("query", "name:*");
ExecutionResult result = engine.execute( "start n=node:groups({query}) 
match n<-[:Members_In]-x 
with n,count(distinct x) as numberOfUsers 
return  max(numberOfUsers)", params ); 
```

`n`是组名，x 是每个组的用户。如何获取具有最大用户数的组及其名称？谢谢。

# sql - 如何更改列以使用 1 到 999 瞬间 id 之类的范围，1 在 SQL 中向下

> ID：13720110
> 
> 赞同：0
> 
> 时间：2012-12-05T09:38:45.280
> 
> 标签：sql, sql-server

我有一个表节点。我希望该特定节点类型的相同 id 编号在相同的范围内，例如 1 到 9999，另一个节点类型在 1000 到 1999 的另一个范围内。你能给我一个如何做到这一点的例子吗？这是一个 SQL 查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T11:13:03.747

```
DECLARE @T TABLE (NODEDE_ID BIGINT)

INSERT INTO @T VALUES
(170999000),
(172677777),
(177333335)

;WITH CTE AS
(
    SELECT NODEDE_ID,ROW_NUMBER() OVER (ORDER BY NODEDE_ID) [ROW_NUM]
    FROM @T
)
SELECT NODEDE_ID,
CAST(CASE WHEN (ROW_NUM > 1)
          THEN (ROW_NUM - 1) * 1000
          ELSE 1 
      END AS VARCHAR) + ' to ' +
CAST(CASE WHEN (ROW_NUM > 1)
          THEN ((ROW_NUM - 1) * 1000) + 999
          ELSE 999 
      END AS VARCHAR) [RANGE]
FROM CTE 
```

# sharepoint - 如何让该图像显示在主页而不是视频文件中

> ID：13720111
> 
> 赞同：0
> 
> 时间：2012-12-05T09:38:49.720
> 
> 标签：sharepoint

实际上我怀疑在下面的情况下继续。

我在 sharepoint 2010 中创建了 1 个视频库，为相应的视频文件上传了 1.wmv 文件，添加了缩略图图像如何让该缩略图图像显示在主页而不是视频文件中。

单击缩略图时，我需要播放相应的视频文件（URL）。每当上传新的视频文件时，缩略图图像都会发生变化，因此该应用程序仅获取最新上传的缩略图以及附加到特定缩略图图像的相应视频文件如何执行此任务。请指导我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T09:56:03.787

SP2010 中没有内置视频库，所以我猜你的意思是资产库。如果是这种情况，只需在主站点上添加一个 Web 部件并显示您的项目，并将其配置为返回**一条**记录并按**创建时间**排序。

# java - Android线程有时无法启动

> ID：13720112
> 
> 赞同：2
> 
> 时间：2012-12-05T09:38:50.300
> 
> 标签：java, android, multithreading

所以我在一个Android项目中遇到了我的线程问题。我有一个带有 BuildScreen() 函数的 ThreadStarter 类，它实际上为每个活动创建了布局。唯一的问题是，有时线程无法启动，我不知道为什么。虽然它们 98% 的时间都在工作，但如果不工作，当前的活动将永远不会被初始化，并且用户必须重新启动应用程序，这很不方便。

这是我的代码片段：

```
 public class ThreadStarter
{
    public static void BuildScreen()
    {
        try
        {
            GlobalVariables.screenDrawer.onStart();
            GlobalVariables.listInitaliser.onStart();
            Logger.log("ThreadStarter.BuildScreen", "Threads started");
        }
        catch(IllegalThreadStateException e)
        {
            GlobalVariables.screenDrawer.StopThread();
            GlobalVariables.listInitaliser.StopThread();
            Logger.log("ThreadStarter.BuildScreen", "Threads stopped");

            GlobalVariables.screenDrawer.onStart();
            GlobalVariables.listInitaliser.onStart();
        }
        catch(Exception e)
        {
            Logger.Error("Couldn't stop or start the threads!");
            Logger.Error("Exception () Message: " + e.getMessage());
        }
    }
} 
```

线程：

```
 public class ListInitialiser extends Thread
{
    private static ListInitialiser _thread;
    public synchronized void run()
    {
        GlobalVariables.CurrentActivity.UpdateLists();

    }

    public  void onStart()
    {
        _thread = new ListInitialiser();
        _thread.start();
    }

    public void StopThread()
    {
        if (_thread != null)
        {
            _thread.interrupt();
            _thread = null;
        }
    }

} 
```

我不会在这里插入 ScreenDrawer 线程，因为它几乎相同，只是它调用了另一个函数。

这就是创建每个活动的方式（当然每个文件中的 contentView 都不同）：

```
@Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        getWindow().getAttributes().windowAnimations = R.style.Fade;
        setContentView(R.layout.activity_fine_data_3);
        GlobalVariables.CurrentActivity = this;
        ThreadStarter.BuildScreen();
        Logger.log("INFORMATION", "Person3DataActivity (Information 3/5)");
    } 
```

在 GlobalVariables 部分我有这些变量：

```
public static ScreenDrawer screenDrawer = new ScreenDrawer();
public static ListInitialiser listInitaliser = new ListInitialiser(); 
```

如果有人有解决方案或想法，请与我分享。提前致谢。

* * *

编辑：好的，所以我接受了 onof（相当苛刻但有用:)）的建议，并重构了我的代码以改用 AsyncTask。它似乎工作得很好。我设法将它实现到我的 AbstractActivity 类中，它是我使用的每个 Activity 的父类，现在我所要做的就是在每个 onCreate 方法中调用 BuildScreen() 方法。

谢谢大家的回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T09:57:33.473

尝试将此添加到您声明全局变量的类中

```
private static ListInitialiser instance;
public static synchronized ListInitialiser getInstance() {
    if (instance == null)
        instance = new ListInitialiser();
    return instance;
} 
```

每次您在使用静态时不必创建新的。我不知道，但这可能会有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T10:08:18.183

您不能依赖静态变量，因为 Android 中的所有静态（非最终）都可以在系统需要内存时被清除。所以不要认为静态=存储。

您应该在需要时实例化对象，如下所示：

```
public static ScreenDrawer getScreenDrawer() {
    return new ScreenDrawer();
}

public static ListInitialiser getListInitialiser () {
    return new ListInitialiser ();
} 
```

# asp.net - 检查VB.Net中多个下拉列表的连接值的值

> ID：13720115
> 
> 赞同：0
> 
> 时间：2012-12-05T09:38:56.600
> 
> 标签：asp.net, vb.net, datetime, drop-down-menu

我有4个字段：

```
 •   calStartDate = Control for the start Date Calendar (drop downs for Day, Month and Year) 
    •   ddlTime = Start time drop down
    •   calEndDate = Control for the End Date Calendar (drop downs for Day, Month and Year) 
    •   ddlTime2 = End time drop down 
```

现在我设法将以下值保存在 DB 中；

```
•   STARTDATETIME = “2/24/2012 6:30:00 AM” 
•   ENDDATETIME = “2/24/2013 6:30:00 AM” 
```

如在以下代码中；

```
 Dim EndDateTime As DateTime
    Dim StartDateTime As DateTime
    If chkbxAccAppBasedOnTimeInterval.Checked = True Then
       Dim StartDate As System.DateTime? = calStartDate.CurrentDate
       If StartDate.HasValue Then
          StartDateTime = StartDate.Value.AddMinutes(CType(ddlTime.SelectedValue, Double))
          EditRelTbl.STARTDATETIME = StartDateTime
       End If

       Dim EndDate As System.DateTime? = calEndDate.CurrentDate
       If EndDate.HasValue Then
          EndDateTime = EndDate.Value.AddMinutes(CType(ddlTime2.SelectedValue, Double))
          EditRelTbl.ENDDATETIME = EndDateTime
       End If

       If EndDateTime > StartDateTime Then
          DisplayAlert("End date time, must be less than Start Date and time", "Warning")
          EndDateTime = StartDateTime
       End If
Else
    EditRelTbl.STARTDATETIME = Nothing
    EditRelTbl.ENDDATETIME = Nothing
End If 
```

**问题是我必须检查 STARTDATETIME 必须大于 ENDDATETIME 并且如果 End dateTime 大于 Start DateTime 则将 End datetime 填充为 Start DateTime**，就像我在代码中尝试完成的那样

```
If EndDateTime > StartDateTime Then
   DisplayAlert("End time must be greater than Start time", "Warning")
   EndDateTime = StartDateTime
End If 
```

但这并没有检查我想要的支票。谁能指导我如何进行检查，或者我错在哪里。

**注意**：“EditRelTbl”是表格，我在其中保存结束/开始日期时间的值。

# java - 用球衣休息 POST 请求

> ID：13720119
> 
> 赞同：0
> 
> 时间：2012-12-05T09:38:59.783
> 
> 标签：java, json, rest, curl

我尝试在 linux 中从 curl 调用 REST Web 服务，也使用 jersey
然后它返回

```
A message body reader for Java type, class mypackage.UserGroupsData, and MIME media type, application/json, was not found 
```

Mappign 类是

```
public class UserGroupsData {
private int id;
private String name;    
public int getId() {
    return id;
} public void setId(int id) {
   this.id = id;
}public String getName() {
    return name;
}public void setName(String name) {
    this.name = name;
} public int getId() {
    return id;
}} 
```

我的 POST 方法 ID

```
@POST
@Path("/getQualifiedNumbers")
@Produces("application/json")
@Consumes("application/json")
public Response getQualifiedNumbers(UserGroupsData userGroup){            
    return Response.status(201).entity(userGroup).build();        
} 
```

我曾经调用的卷曲命令是

```
curl -v -H "Accept: application/json" -H "Content-type: application/json" -X POST -d '{"id":"1","name":"e"}' http://localhost:8080/url/getQualifiedNumbers 
```

服务器是码头

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T10:38:34.480

尝试在您的课程中添加注释“@XmlRootElement”。它应该变成这样：

```
import javax.xml.bind.annotation.XmlRootElement;

@XmlRootElement
public class UserGroupsData {
private int id;
private String name;    
public int getId() {
    return id;
} public void setId(int id) {
   this.id = id;
}public String getName() {
    return name;
}public void setName(String name) {
    this.name = name;
} public int getId() {
    return id;
}} 
```

# php - PHP Imagick：保存一个组合保存矢量图

> ID：13720120
> 
> 赞同：1
> 
> 时间：2012-12-05T09:39:00.237
> 
> 标签：php, vector-graphics, imagick

我有一个脚本，它采用光栅图像 (jpg) 和矢量 (svg)，组合它（缩放、位置、旋转等），然后我需要将最终输出保存为 PDF。

问题是使用imagick，所有的矢量图像都会被光栅化。

是否可以创建一个将 svg 图形保持为矢量的 pdf？

# file - 打开加密图片

> ID：13720123
> 
> 赞同：2
> 
> 时间：2012-12-05T09:39:09.300
> 
> 标签：file, encryption, image

我已经创建了一个算法来加密和解密文件，我已经用 .bmp 进行了测试，我想打开一张加密的图片来检测模式。有没有linux程序可以打开损坏的图片？我真的很想看看我生成的垃圾。

谢谢 ;-) 恩里克·罗查

# excel - 从 MS Office 功能区隐藏加载项选项卡（尤其是 PowerPivot 选项卡）

> ID：13720126
> 
> 赞同：3
> 
> 时间：2012-12-05T09:39:17.413
> 
> 标签：excel, ms-word, ms-office, powerpoint, ribbonx

我正在修改 Excel 文件的功能区，隐藏所有默认和上下文选项卡，但只显示我自己的选项卡。但是，一旦安装了带有自己选项卡的任何加载项，这些选项卡仍会显示，因为我不知道如何解决它们。

我知道您可以使用 删除所有选项卡`<ribbon startFromScratch="true">`，但我需要将它们保留在原处（我实际上使用 getVisible 回调对用户隐藏它们，但将它们显示给管理员）。

因此，以下问题：

1.  有没有办法为所有未知的标签应用“默认”getVisible回调（我想答案是否定的）
2.  如何找出其他加载项选项卡的 tabID
3.  鉴于 PowerPivot 越来越普遍（尤其是在 Excel 2013 中） - 此选项卡的 tabID 是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T23:37:50.753

这是一个很棒的问题，几乎没有关于使用第三方功能区的文档或示例。我已经做了很多挖掘工作，可以帮助你完成大部分你想要的事情。我会回答你的问题有点乱，但这里有。

3) PowerPivot 插件的选项卡 ID 是限定符 ID（因此必须与 idQ 一起使用）并且是`tabGemini`. 您必须在名称空间中使用它：`Microsoft.AnalysisServices.Modeler.FieldList`. 您可以通过向架构添加命名空间来检查这一点：

`xmlns:x1="Microsoft.AnalysisServices.Modeler.FieldList"`

然后在声明选项卡的 id 时，使用以下命令在 PowerPivot 选项卡之前插入选项卡：

`insertBeforeQ="x1:tabGemini"`

2) 我很难找到 PowerPivot 的选项卡 ID，因为它是 VSTO COM 插件，因此您无法像使用 .xlam 文件那样访问 XML。答案很简单，但您需要 Office 2010 或更高版本。打开 Excel 并打开您感兴趣的插件，转到文件菜单，然后转到选项。选择自定义功能区，然后在顶部窗口的右侧选择自定义功能区：主选项卡。现在取消选中您感兴趣的插件，然后点击底部的 Import/Export 以导出 XML 模式。在文本编辑器中打开这个文件，你可以看到他们是如何声明他们的标签 ID 的。

1) 我认为您在 getVisible 回调中遇到的问题是，如果有人在您之后加载加载项，无论您如何标记 XML，它都会覆盖您所做的任何事情。以下内容来自 Fluent Ribbon for Developers FAQ (http://msdn.microsoft.com/en-us/library/office/aa722523%28v=office.12%29.aspx#a16c7df5-93f3-4920-baa8-7b7290794c15_FAQ )

> 当两个加载项尝试重新利用相同的内置控件时会发生什么？尝试重新调整控件用途的最后一个加载项将成为活动加载项。

现在我没有比这更进一步，但是如果您可以将此板架构导入/导出到 Office，那么如果您可以找到此 get 的导入位置，也许您可​​以使用文件脚本对象在 VBA 中手动覆盖它。显然，只有当它存储为文本时。有点远射，但值得进一步研究？祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-13T04:41:05.840

PowerPivot 选项卡是一个 COM 加载项。要查看它的 progID 和其他 COM 加载项，请使用：

```
Sub ListCOMAddins()
Dim lngRow As Long, objCOMAddin As COMAddIn
lngRow = 1
With ActiveSheet
      For Each objCOMAddin In Application.COMAddIns
         .Cells(lngRow, "A").Value = objCOMAddin.Description
         .Cells(lngRow, "B").Value = objCOMAddin.Connect
         .Cells(lngRow, "C").Value = objCOMAddin.progID
         lngRow = lngRow + 1
      Next objCOMAddin
End With
End Sub` 
```

在我的例子中，PowerPivot 选项卡的 progID 是“Microsoft.AnalysisServices.Modeler.FieldList”。因此，要关闭选项卡，请使用：

```
Private Sub Workbook_Open()

   Application.COMAddIns("Microsoft.AnalysisServices.Modeler.FieldList").Connect = False

End Sub 
```

# qt4 - 立即验证和编辑完成的信号

> ID：13720127
> 
> 赞同：1
> 
> 时间：2012-12-05T09:39:18.557
> 
> 标签：qt4

我想立即验证我的编辑行。我想在他离开编辑行字段后立即告诉用户他输入的值可能不正确。

所以我将行编辑与editingFinished() 信号连接起来。但是问题是当我在行编辑之外单击时不会发出信号，例如当我只是单击对话框时。当我单击对话框上的其他行编辑时会发出它。所以我正在寻找每次在编辑线外单击时发出的信号。我怎样才能做到这一点？

```
connect(mLineEdit, SIGNAL(editingFinished()), this, SLOT(Validate()))

MyDlg::Validate()
{
     QString text = mLineEdit->text();
     bool isValid = check_if_valid(text);
     if(!isValid)
         // set the color of edit line to be red        
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T17:52:46.740

首先，考虑使用[`QValidator`](http://qt-project.org/doc/qt-4.8/qvalidator.html)带有行编辑的实现来执行验证（[`QIntValidator`](http://qt-project.org/doc/qt-4.8/qintvalidator.html)、[`QDoubleValidator`](http://qt-project.org/doc/qt-4.8/qdoublevalidator.html)或[`QRegExpValidator`](http://qt-project.org/doc/qt-4.8/qregexpvalidator.html)）。您可以使用[`QLineEdit::setValidator(QValidator*)`](http://qt-project.org/doc/qt-4.8/qlineedit.html#setValidator). 如果其中一个验证器不适合您，最好考虑通过子类`QValidator`化并提供 的实现来编写您自己的验证器`validate`，然后在行编辑中安装您自己的自定义验证器。

如果所有这些都失败，您可以像上面那样继续，但是您需要收听`textChanged(const QString&)`信号或`textEdited(const QString&)`信号（即使以编程方式更改行编辑文本也会发出前者，而后者则不会）。

# sql - int值的T-SQL格式输出

> ID：13720128
> 
> 赞同：0
> 
> 时间：2012-12-05T09:39:18.523
> 
> 标签：sql, sql-server, tsql

我需要以自定义格式打印 int 值：例如 int 9888222 应打印为 '> 9.888.222'。

所以，输出规则是：

1.  插入 '。' 每 3 位数字后。从起因数结束。
2.  在输出字符串的开头添加“>”字符串。

更多示例：

*   7000 -> '> 7.000'
*   722333 -> '> 722.333'
*   8223344 -> '> 8.223.344'
*   120200300 -> '> 120.200.300'

没有大于 int 最大值的值。

有可能吗？可以使用哪些功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T10:00:18.020

```
 DECLARE @INT INT = 120200300 
 SELECT '> ' + REPLACE(REPLACE(CONVERT(VARCHAR,CAST(@INT AS MONEY),1),'.00',''),',','.') 
```

# javascript - 矩阵迭代 - 哪种方法更有效？

> ID：13720129
> 
> 赞同：3
> 
> 时间：2012-12-05T09:39:21.207
> 
> 标签：javascript, arrays, canvas, pixel

我想知道以下哪种方法可以被认为更有效。第一个非常简单，它使用两个 for 循环。最后一个是我个人最喜欢的，因为它只用了一个。不过，我不太确定每种方法的优缺点，因为它们都非常快。

它们旨在与[CanvasPixelArray](https://developer.mozilla.org/en-US/docs/HTML/Canvas/Pixel_manipulation_with_canvas)或以类似方式构造的那些一起使用。代表二维矩阵的宽度和高度
`w`。`h`

```
for (var y = 0; y < h; y++) {
    for (var x = 0; x < w; x++) {

        // ...
    }
}

for (var i = 0, l = w*h; i < l; i++) {

    var x = i%w;
    var y = Math.floor(i/w);

    // ...
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T09:48:06.823

第一个会更有效率。想想您在第一种方法中执行的操作数量：每像素一次增量加上每行的额外增量。另一种方法节省了每行的额外增量，但用更复杂的东西代替了它。除了四舍五入和`%`代价高昂之外，`y`每次都会重新计算该值，而方法1中每行仅计算一次。总之，每行的额外增量将远远快于添加所有这些补充操作每个像素。这并不是说您不应该使用第二种方法，但是鉴于您发布的代码，第一种方法的性能会更好。

# android - Android：如何像这样自定义特定的Seekbar？

> ID：13720133
> 
> 赞同：0
> 
> 时间：2012-12-05T09:39:28.700
> 
> 标签：android

图片：

![在此处输入图像描述](../Images/b0fbd3648e1804301acaae7037752234.png)

我应该如何自定义特定的搜索栏，如图片？

我认为重点是：

1.  当手指在搜索栏上移动时，如何呈现一个显示进度的悬浮视图。

2.  有一些视图与seekbar的父视图同层，这些视图在seekbar附近，这些视图会与悬浮视图重叠吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T20:11:33.667

看看这个答案：[13887556](https://stackoverflow.com/a/13919258/1636584)

这可能是一个很好的起点。尝试扩展 SeekBar 并覆盖 onMeasure() 和 onDraw 方法()：

```
@Override
protected synchronized void onMeasure(int widthMeasureSpec, int heightMeasureSpec)
 {
    super.onMeasure(widthMeasureSpec, heightMeasureSpec);

    if (labelBackground != null)
    {

        viewWidth = getMeasuredWidth();
        barHeight = getMeasuredHeight();// returns only the bar height (without the label);
        setMeasuredDimension(viewWidth, barHeight + labelBackground.getHeight());
    }

}

@Override
protected synchronized void onDraw(Canvas canvas)
{
    if (labelBackground != null)
    {
        barBounds.left = getPaddingLeft();
        barBounds.top = labelBackground.getHeight() + getPaddingTop();
        barBounds.right = barBounds.left + viewWidth - getPaddingRight() - getPaddingLeft();
        barBounds.bottom = barBounds.top + barHeight - getPaddingBottom() - getPaddingTop();

        progressPosX = barBounds.left + ((float) this.getProgress() / (float) this.getMax()) * barBounds.width();

        labelPos.x = (int) progressPosX - labelOffset;
        labelPos.y = getPaddingTop();

        progressDrawable = getProgressDrawable();
        progressDrawable.setBounds(barBounds.left, barBounds.top, barBounds.right, barBounds.bottom);
        progressDrawable.draw(canvas);

        labelTextPaint.getTextBounds(labelText, 0, labelText.length(), labelTextRect);

        canvas.drawBitmap(labelBackground, labelPos.x, labelPos.y, labelBackgroundPaint);
        canvas.drawText(labelText, labelPos.x + labelBackground.getWidth() / 2 - labelTextRect.width() / 2, labelPos.y + labelBackground.getHeight() / 2 + labelTextRect.height() / 2, labelTextPaint);

        thumbX = (int) progressPosX - getThumbOffset();
        thumbDrawable.setBounds(thumbX, barBounds.top, thumbX + thumbDrawable.getIntrinsicWidth(), barBounds.top + thumbDrawable.getIntrinsicHeight());
        thumbDrawable.draw(canvas);
    } else
    {
        super.onDraw(canvas);
    } 
```

# iphone - 我怎样才能停止 SKPaymentTransaction？

> ID：13720136
> 
> 赞同：1
> 
> 时间：2012-12-05T09:39:34.200
> 
> 标签：iphone, ios, in-app-purchase

我正在编写一个使用 inApp 购买系统的应用程序，但我找不到通过事务观察器方法停止事务的方法。我需要这种行为，因为在连接性较低的情况下，我想让用户能够停止与苹果服务器的连接。我不希望在 2 或 3 分钟后同时出现一个或多个默认购买提醒...所以最好的解决方案是通过 uibutton 和 Action 完全停止付款过程。我已经尝试过这样的事情，但它不起作用。

* * *

```
 -(IBAction)ClosePayment{

       for (SKPaymentTransaction *transaction in  [[SKPaymentQueue defaultQueue]transactions])  {
          [[SKPaymentQueue defaultQueue] finishTransaction:transaction];
       }

    } 
```

此操作使应用程序崩溃，我也尝试过；

```
 [[SKPaymentQueue defaultQueue]removeTransactionObserver:self]; 
```

这不会产生任何错误，但根本不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T12:00:13.890

在“购买”状态下停止 SKPaymentTransaction 似乎是不可能的......我还尝试在没有 TransactionObserver 的情况下初始化相关的 SKPayment 对象（仅用于测试目的......）。如果没有 TransactionObserver，购买将无法正常工作，但应用内购买系统的第一个警报仍将显示给用户。文档中没有任何内容支持“停止”，所以我认为这可能只有使用一些私有 API 才有可能。

# android - 我可以使用变量而不是 mp3 资源 id 在 android 中播放声音吗

> ID：13720142
> 
> 赞同：1
> 
> 时间：2012-12-05T09:39:59.323
> 
> 标签：android, variables, audio, media-player

我想知道如何`mp3name`用与原始文件中的 MP3 名称匹配的变量替换参数。我有许多 mp3 文件要在不同时间调用，但我真的只想拥有一个 MediaPlayer 方法。使用字符串变量似乎不起作用，因为我收到字符串变量名称与原始文件不匹配的错误。

`audiofile.mp3`例如，当原始文件中有一个时，这不起作用。

```
String playsound

playsound = audiofile

MediaPlayer mp = MediaPlayer.create(this, R.playsound); 
```

我如何利用变量来使其工作？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T10:10:09.627

它是一个整数。参考这样的文件。

```
int song1 = R.raw.testsound;
MediaPlayer testPlayer = MediaPlayer.create(this, song1); 
```

但是使用 URI 更可行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T10:06:06.200

与其使用变量名，不如使用指向原始资源的 URI。查看[MediaPlayer 文档](http://developer.android.com/reference/android/media/MediaPlayer.html)（或 google）以获得一些提示。

# serialization - OGRE 场景的序列化

> ID：13720143
> 
> 赞同：0
> 
> 时间：2012-12-05T09:40:01.910
> 
> 标签：serialization, ogre, scene

目前最流行的将 OGRE 场景保存在文件中的解决方案是什么？我找到了 DotScene，但最后一次提交是在 4 年前，所以它可能已经过时了。是否有其他插件或模组可以保存和加载 OGRE 场景？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T19:23:34.963

没有专门的官方场景序列化的原因是，这是一个高度特定于应用程序的任务，与 Ogre3D 本身几乎没有关系。对于基本原型，DotScene 是可行的方法，但许多项目稍后会扩展该 XML 结构以适应他们自己的需求，这并不难。

您可能还想看看[Ogitor](http://www.ogitor.org/)，它是一个基于 Ogre 的不断增长的所见即所得编辑器，具有 DotScene 支持以及它自己的格式（确保获取开发版本或自己构建它，因为我们最后一个官方稳定版本 0.4 相当过时了，但我们还没有时间发布 0.5 版本）。

# google-places-api - 来自 Google Places Api 的 Photo_reference

> ID：13720147
> 
> 赞同：2
> 
> 时间：2012-12-05T09:40:11.517
> 
> 标签：google-places-api, google-places

我看到来自 google 地方的 json 响应返回了一个字段 photo_reference。有谁知道如何关联图像？

```
 "icon" : "http://maps.gstatic.com/mapfiles/place_api/icons/restaurant-71.png",
         "id" : "320d77fa60610f618058bd58b8ba46e340c615b8",
         "name" : "The Meat & Wine Co",
         "opening_hours" : {
            "open_now" : true
         },
         "photos" : [
            {
               "height" : 968,
               "html_attributions" : [],
               "photo_reference" : "CoQBeQAAAAgOdveT3dRtzoJ42BTBZfCdZptWsqLN3bROkP4FVHNNX-qjxBiw0vdGpDaX_lVb3rcaQf5hBVvrEdMUMDKB2gcsIOaVNII_zLvY-5Kf4rOuTXElOgSHb5vxJoB-o70Oh0Bs-zxxUpHM0Ji_BPk2RpXoKdf8jG_QLPaulXWoC7TcEhDSLjj-4_l3hJpD0W_qBtoMGhT1MK1GRVFH1dnJolimMP7Z8a2tZA",
               "width" : 1296
            }
         ],
         "rating" : 3.90, 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-09-15T09:14:42.360

谷歌还提供地点照片 api 来使用**photo_reference从谷歌地图中检索照片**

```
https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=photo_reference&key=AddYourOwnKeyHere 
```

key :- 在此处传递您的应用程序 api 密钥。

maxwidth & maxheight :- api 返回时所需的最大高度或宽度

照片参考：- 在此处传递您的照片参考。

向此 api 发送请求。它会返回你的形象。

图像类型将取决于最初提交的照片的类型。

有关更多信息，请转到：- [https://developers.google.com/places/documentation/photos](https://developers.google.com/places/documentation/photos)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T16:36:48.477

我一直在想同样的事情。我读到了 Picasa API，这似乎是这些图像的逻辑存储位置。

**2013 年 3 月 13 日更新**

此功能已作为 Places API 的一部分发布。有关文档，请参阅链接。[https://developers.google.com/places/documentation/photos](https://developers.google.com/places/documentation/photos)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-29T20:44:44.433

在 HTML img 标记中插入 photo_reference 值

`var photo_reference_goes_here = ['icon']['photos'][0]['photo_reference']`

`<img class="rig-img" src="https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=photo_reference_goes_here&key=GOOGLE_KEY" alt="Pic From Google">`

# android - Android PlusOneButton

> ID：13720150
> 
> 赞同：0
> 
> 时间：2012-12-05T09:40:18.193
> 
> 标签：android, google-plus-one

我正在尝试使 plusone 按钮在我的 android 应用程序中工作。

我这样做了：

```
m_plusClient = new PlusClient(this, this, this); 
```

然后：

```
m_plusOneButton = (PlusOneButton) m_view.findViewById(R.id.plus_one_button);
m_plusOneButton.initialize(((SinglePlace)getActivity()).m_plusClient, url, 0); 
```

按钮在那里，但是如果我单击它，它会显示一个不确定的进度条并且什么也不做。加客户端没有调用回调...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T16:31:13.023

在跳转到 +1 按钮部分之前，您需要先执行以下步骤： [https ://developers.google.com/+/mobile/android/getting-started。](https://developers.google.com/+/mobile/android/getting-started)

# iphone - 在 iOS 中从 topViewController 向 rootViewController 发送消息

> ID：13720153
> 
> 赞同：1
> 
> 时间：2012-12-05T09:40:33.720
> 
> 标签：iphone, ios

我正在为 iPhone 开发一个应用程序，我需要在其中发送消息`topViewController`到`rootViewController`.

一种解决方案可能是在导航堆栈中的每个 VC 中创建委托方法并相应地调用，以便消息到达`rootViewController`. 但在这种情况下，消息必须通过整个导航堆栈。

任何机构都可以用最好的方法帮助我吗

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T09:44:05.770

一种选择是访问`rootViewcontroller`，

```
RootViewController *rootViewController = (RootViewController *)[self.navigationController.viewControllers objectAtIndex:0]; 
```

然后对这个对象做必要的操作。`navigationController.viewControllers`返回导航堆栈中的所有视图控制器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T09:46:10.663

在任何 topViewController 方法中，您都可以通过以下方式提取导航堆栈的 rootViewController

```
 [self.navigationController.viewControllers objectAtIndex:0]; 
```

# ruby-on-rails - 如何使用 daemon-controller 自动启动 faye？

> ID：13720154
> 
> 赞同：3
> 
> 时间：2012-12-05T09:40:37.837
> 
> 标签：ruby-on-rails, daemon, faye

我正在尝试使用 gem daemon_controller 自动运行 faye。
**我的课**

```
require "daemon_controller" 
class FayeDaemon
def initialize
  @controller = DaemonController.new(
      :identifier    => 'Faye server',
      :start_command => "rackup faye.ru -s thin -E production",
      :ping_command  => [:tcp , 'localhost', 9292],
      :log_file      => 'log/faye.log',
      :pid_file      => 'tmp/pids/faye.pid',
      :start_timeout => 5
   )
end    

  def start
  @controller.start
  end
end 
```

**我在 ApplicationController 中用作 before_filter 的**函数****

 **```
 def start_faye
 fayes = FayeDaemon.new
 fayes.start
 end 
```

结果 faye 没有运行并出现错误
DaemonController::StartTimeout（守护进程 'Faye server' 没有及时守护进程。）

当 fayes.start 被调用时。

我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T21:18:21.510

我强烈推荐你使用 foreman 而不是 deamon_controller，你可以[在这里](http://blog.daviddollar.org/2011/05/06/introducing-foreman.html)找到很好的介绍。只需安装 gem，在您的 rails 根目录中创建“Procfile”。并创建两个工作，一个用于服务器，另一个用于 Faye，它可能如下所示：

```
web:    bundle exec rails server webrick -b 127.0.0.1 -p 3000 -e development
faye:   bundle exec rackup faye.ru -s thin -E production 
```

并从工头开始

```
foreman start 
```**

# php - 除非再次重新加载页面，否则不会应用 Cookie 值

> ID：13720158
> 
> 赞同：0
> 
> 时间：2012-12-05T09:40:47.100
> 
> 标签：php, html, cookies

在我正在处理的网站上，当用户通过更改样式表选择颜色时，我可以选择自定义网站。

说，我有5种颜色。如果我单击一种颜色，样式表名称将存储在隐藏的输入标签中。单击“Enter”按钮后，隐藏标签中的值将存储在 cookie 中。因此，样式表文件的标记发生了变化。它的代码如下：

```
<link rel="stylesheet" href="<?php if(isset($_COOKIE['style'])){
echo $_COOKIE['style'];}
else{
echo 'style.css';}?>"/> 
```

但是该样式只有在重新加载每个页面后才会应用，尽管已经设置了 cookie。

加载页面后，如何在 cookie 中应用样式？我的意思是不需要重新加载它来应用样式。

**注意：** cookies 是在 javascript 函数中创建的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T09:43:16.373

服务器端和客户端之间存在差异.... php 执行服务器端，因此您需要重新刷新页面以便获取 cookie。您正在通过 JavaScript 进行操作，这是客户端

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T09:44:13.293

您正在使用 js 设置 cookie，但使用 php 读取它，因此您需要刷新，因为 php 是服务器端。当您设置 cookie 重新加载页面时，您应该会看到更改

# database - Java Web - 在页面加载时将数据从数据库加载到文本框中

> ID：13720159
> 
> 赞同：0
> 
> 时间：2012-12-05T09:40:47.850
> 
> 标签：database, jsp, servlets, web, textbox

假设我有一个名为 ChangeEmail.jsp 的 jsp 页面**和一个名为 ChangeEmailServlet.java****的**servlet 。在 jsp 页面中，我有一个包含用户当前电子邮件地址的文本框。这是从数据库中获取的。我想让用户更改文本框中的值。

 **如何在页面加载时从文本框中的数据库中加载电子邮件地址？最好，我想在 servlet 中而不是在 jsp 页面中执行此操作。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T09:54:31.573

我正在解释基本流程您应该如何设计 Web 应用程序流程。

不要直接访问“ChangeEmail.jsp”。创建一个 Servlet，它充当`Controller`并基于参数 e、g、“ `pageName=ChangeEmail`”。

从 Servlet 转发到 JSP，在您转发之前，根据您的需要使用和存储值再次执行业务`Model`逻辑。（这是您从数据库中获取电子邮件地址的案例）。`request``session`

访问 JSP 中的属性，这是您的`View`.

这也完成了您的`MVC`架构。**

# vb.net - 附加数据表

> ID：13720161
> 
> 赞同：0
> 
> 时间：2012-12-05T09:40:50.220
> 
> 标签：vb.net, combobox, datatable, datarow

请在下面查看我的编码 -

> ```
>  Dim dtProductName As New DataTable()
>     dtProductName.Columns.Add(VP_Product) 
> ```

```
 'add new row
    Dim dr As DataRow
    dr = dtProductName.NewRow()
    dr.Item(0) = "All"
    dtProductName.Rows.Add(dr)

    dr = dtProductName.NewRow()
    dr.Item(0) = "None"
    dtProductName.Rows.Add(dr)

    Dim dt As New DataTable()

    dt = cReport.getAllProduct

    For Each drp As DataRow In dt.Rows
        dr = dtProductName.NewRow()
        dr.Item(0) = drp.Item(0)
        dtProductName.Rows.Add(dr)
    Next

    cboProductLine.DataSource = dtProductName
    cboProductLine.ValueMember = VP_Product
    cboProductLine.DisplayMember = VP_Product 
```

“全部”和“无”是附加数据。我想将这两个添加到另一个从数据库返回的数据表中。有没有比我的编码更好的方法？（无需循环添加行）谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T09:48:24.863

您不需要创建 2 个数据表。只需`cReport.getAllProduct`使用

`Public Sub InsertAt(row as System.Data.Datarow, pos as Integer)`

添加额外的“All”和“None”值的方法。

```
 Dim dt As New DataTable()

    dt = cReport.getAllProduct

    Dim dr As DataRow

    dr = dt.NewRow()
    dr.Item(0) = "All"
    dt.Rows.InsertAt(dr, 0)

    dr = dt.NewRow()
    dr.Item(0) = "None"
    dt.Rows.InsertAt(dr, 1)

    cboProductLine.DataSource = dt
    'make sure your dt datatable contains the VP_Product column
    cboProductLine.ValueMember = VP_Product
    cboProductLine.DisplayMember = VP_Product 
```

# wcf - 如何控制 wcf 安全套接字层版本

> ID：13720162
> 
> 赞同：1
> 
> 时间：2012-12-05T09:40:50.957
> 
> 标签：wcf, ssl, versioning

**鬼鬼祟祟**

如何强制任何 wcf 客户端使用特定版本的 ssl。
可能吗 ？

这个问题也适用于自托管的 wcf 服务，以及 iis 托管。

或者，一种了解当前正在使用的版本的方法..

**或至少阻止 2.0 版**

提前致谢 。

# wcf - WCF：随机不响应

> ID：13720163
> 
> 赞同：1
> 
> 时间：2012-12-05T09:40:54.157
> 
> 标签：wcf, silverlight, response, basichttpbinding, pollingduplexhttpbinding

我有一个特殊的问题，客户端请求随机没有得到对 WCF 服务调用的响应。

设置是一个 Silverlight 5 应用程序调用 WCF 服务，使用 HTTP 和 PollingDuplex 绑定。SL 在加载时发出许多请求（20 秒内 20+），并且时不时地没有收到对其中一个或两个的响应。需要明确的是，完全相同的请求在 90% 的时间内都有效，如果我刷新页面，所有请求都可以得到响应。

错误不能是实际发送的请求。我也使用 Fiddler 来验证这一点，因为我看到了正在发出的请求（确保内容与之前成功的请求相同），但对请求没有响应。最终客户端超时请求。WCF 服务托管在 IIS7 中，并且我在两者上都启用了诊断和日志记录。在 WCF 服务器跟踪日志中，我只看到客户端请求超时时记录的消息。在客户端超时时，它在“处理消息”活动下记录了以下异常操作：“可用字节数与 HTTP Content-Length 标头不一致。可能存在网络错误或客户端可能正在发送无效请求。” 这就好像 HTTP 的主体没有通过 WCF（我不知道是否可以在传递给 WCF 处理程序之前记录 IIS 接收到的完整请求？）。正如我所说，使用 Fiddler 我可以看到完整的消息是有效的（请注意，当 Fiddler 没有嗅探流量时也会发生这种行为，所以我已经排除了 Fiddler 的问题）。

通常，“处理消息”活动具有“收件人：处理操作*xxx* ”

就像我说的，这发生在 Http 和 PollingDuplex 服务上，在我的开发盒以及生产 Web 服务器上。也发生在不同的端点上，我认为它与 WCF 节流行为无关，因为它发生了

任何信息或帮助将不胜感激，无论是我可以收集以帮助诊断的其他信息还是任何提示。

# php - PHP中的时间日期比较

> ID：13720167
> 
> 赞同：0
> 
> 时间：2012-12-05T09:41:01.037
> 
> 标签：php, datetime

我的数据库中有一个表，将用户输入存储为开始日期和结束日期，之后我的用户必须选择一个时间范围，并且我必须在表中显示该时间范围内的那些记录？

尝试`stritotime();`了许多其他的功能，但不知何故我无法得到正确的结果..

任何可能的解决方案将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T09:47:00.433

可能与：

```
 SELECT count(*) FROM `table` 
 where 
 created_at>='2011-03-17 06:42:10' and created_at<='2011-03-17 06:42:50'; 
```

或在以下之间使用：

```
 SELECT count(*) FROM `table` 
  where 
  created_at between '2011-03-17 06:42:10' and '2011-03-17 06:42:50'; 
```

这取决于您要显示的记录，因为我没有看到您的表格和您真正要做的示例，只需更改计数（*）并获取您想要的记录。

编辑：如果用户将选择一个时间范围，那么他们将是变量

那么它会是这样的

```
 SELECT records FROM `table` 
   where 
  created_at >= '".$var_start_time."' and ended_at <= '".$var_end_time."'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T09:51:07.597

You can simply do this in your SQL, which is the recommended approach. If you have these start and end times stored in your database table as native DateTime types, for example, you can use your DBMS' Date functions to select the range as a UNIX timestamp (if that's what what you want).

```
SELECT UNIX_TIMESTAMP(`start_time`), UNIX_TIMESTAMP(`end_time`) FROM `table` WHERE `start_time` > INTERVAL -1 DAY AND `end_time` < NOW(); 
```

That's one example (assuming you're using MySQL) where you select all rows in the table where the column `start_time` is within the past 24 hours and the `end_time` column is up to the current server time.

To get the formatted date and then do the conversion to a UNIX time-stamp in PHP use:

```
SELECT `start_time`, `end_time` FROM `table` WHERE `start_time` > INTERVAL -1 DAY AND `end_time` < NOW(); 
```

and then in PHP you can do:

```
$result['start_time'] = strtotime($result['start_time']);
$result['end_time'] = strtotime($result['end_time']); 
```

Keep in mind that strtotime expects the formatted date to comply with [PHP's date parsing rules found here](http://php.net/manual/en/datetime.formats.date.php).

P.S: The function in PHP you're looking for is [strtotime](http://php.net/strtotime) not stritotime.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T09:44:39.870

您可以在 mysql 查询中使用 BETWEEN ... AND ... 比较运算符 [http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#operator_between](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#operator_between)

# c++ - C++ 简化版链表，当我加载数据以创建链表，并输入更多数据时，似乎有一个差距

> ID：13720173
> 
> 赞同：0
> 
> 时间：2012-12-05T09:41:09.800
> 
> 标签：c++

我有一个读取函数，它读取外部文件并使每个名称成为一个新节点，我想在我创建的列表上构建，但不知何故，列表中存在一个空白

```
example:
I enter in dave, jack, dog, cat. 

result:
name: dave
name: jack
name: dog
name: cat 
```

它打印出来，这就是现在的列表。但是如果我关闭程序并再次运行它，读取函数会读回这些名称并再次创建链接列表。但是如果我选择添加另一个名字“bob”。它把它放在下一个节点

```
example:
I enter in bob

result:
name: dave
name: jack
name: dog
name: cat
name: [BLANK LINE]
name: bob 
```

6.cpp

```
#include "6.h"

int main()
{
    petAdoption adopt;
    char response;
    adopt.read();
    do {

    adopt.enroll();
    adopt.display();
    cout << "Another? (y/n): ";
    cin >> response;
    cin.ignore(100,'\n');
    } while (toupper(response) == 'Y');

}

petAdoption::petAdoption()
{
head = NULL;
}

void petAdoption::enroll()
{
    char temp[TEMP_SIZE];
    cout << "Name: ";
    cin.getline(temp, TEMP_SIZE);
    pet.name = new char[strlen(temp)+1];
    strcpy(pet.name, temp);

    newNode = new animal;
    newNode->name = pet.name;
    newNode->next = NULL;

    if (NULL == head)
    {
        head = newNode;
        current = newNode;
    }
    else 
    {               
        current = head;
        while (current->next != NULL){
        current = current->next;
        }
        cout << "adding node to the end of the list" << endl;
        current->next = newNode;
        current = current->next;
    }
        ofstream write;
    write.open("pets.txt", ios::app);
        write << current->name << '\n'; 
    write.close();
}

void petAdoption::display()
{
    current = head;
    while (NULL != current)
    {
        cout << "Pet's name: " << current->name << endl;
        current = current->next;
    }
}

void petAdoption::read()
{
    ifstream read;  
    char temp[TEMP_SIZE];
    read.open("pets.txt");
        if(!read)
        {
            cout << "/#S/ There are no pets" << endl;
        }
        else{
            while(!read.eof())
            {
                read.getline(temp, TEMP_SIZE);
                pet.name = new char[strlen(temp)+1];
                strcpy(pet.name, temp);

                newNode = new animal;
                newNode->name = pet.name;
                newNode->next = NULL;

                if (NULL == head)
                {
                    head = newNode;
                    current = newNode;
                }
                else 
                {               
                    current = head;
                    while (current->next != NULL){
                        current = current->next;
                    }
                    current->next = newNode;
                    current = current->next;
                }
            }
        }
    read.close();
} 
```

6.h

```
#include <iostream>
#include <cctype>
#include <cstring>
#include <fstream>
using namespace std;

const int TEMP_SIZE = 250;

struct animal
{
    char *name;
    animal *next;   
};

class petAdoption
{
    public:
    petAdoption();
    //~petAdoption();
    void enroll();
    void read();
    void display();
    private:
    animal *head, *current, *newNode;
    animal pet;
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T10:00:18.647

```
while(!read.eof())
{
    read.getline(temp, TEMP_SIZE);
    ...
} 
```

不是在 C++ 中编写读取文件循环的方法。**仅在尝试读取文件末尾后才**`eof()`返回 true ，因此您执行循环体的次数过多。

 **编写循环的正确方法如下：

```
for (;;)
{
    read.getline(temp, TEMP_SIZE);
    if (read.failed())
        break;
    ...
} 
```

或更惯用的说法：

```
while (read.getline(temp, TEMP_SIZE))
{
    ...
} 
```

这意味着完全相同的事情。

另请注意，我使用`failed()`而不是`eof()`- 文件结尾不是读取可能失败的唯一原因。**

# git - 拉动“错误：无法找到.....”时出现Git错误

> ID：13720175
> 
> 赞同：0
> 
> 时间：2012-12-05T09:41:18.223
> 
> 标签：git, version-control

我一直坚持收到以下错误。

```
error: unable to find c52abdb1a42b8ed7b026d87e4a5881a396d96fc7
fatal: object c52abdb1a42b8ed7b026d87e4a5881a396d96fc7 not found 
```

它是通过从我的本地存储库推送发生的

```
git push origin master 
```

并且在拉取后在远程存储库上提示错误

```
git pull 
```

如何解决此类错误？

注意：本地和远程存储库。在 Linux 上。

干杯!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T10:27:48.063

我不确定这个错误是如何产生的。然而，我通过在导致错误的客户端执行以下命令来解决它。

```
git revert HEAD 
```

之后由同一客户端推送到远程存储库的新提交。

干杯!

# android - 索尼 Xperia T (ST26) 日历账号问题

> ID：13720178
> 
> 赞同：4
> 
> 时间：2012-12-05T09:41:20.447
> 
> 标签：android, calendar, sony

设备恢复出厂设置后。我正在尝试检索日历显示名称（通过下面的代码），它返回没有日历。但至少打开一次设备日历应用程序时，将正确检索默认手机日历。

有没有办法在不打开设备日历应用程序的情况下检索日历（尤其是默认的）？

提前致谢。

以下是设备上存在的用于检索日历的代码：

```
private Uri getCalendarUri() {
      return  Uri.parse(Integer.parseInt(Build.VERSION.SDK) > 7 ? "content://com.android.calendar/calendars" : "content://calendar/calendars");
   }

   private String[] getCalendars(Context context) {
      String[] res = null;
      ContentResolver contentResolver = context.getContentResolver();
      Cursor cursor = null;
      try {
         cursor = contentResolver.query( getCalendarUri(),
                 Integer.parseInt(Build.VERSION.SDK) > 13 ? new String[]{"_id", "calendar_displayName"} : new String[]{"_id", "displayName"}, null, null, "_id ASC");

         if (cursor.getCount() > 0) {
            res = new String[cursor.getCount()];
            int i = 0;
            while (cursor.moveToNext()) {
               res[i] = cursor.getString(0) + ": " + cursor.getString(1);
               i++;
            }
         }
      }
      catch (Exception e) {
         e.printStackTrace();
      }
      finally {
         if (cursor != null)
            cursor.close();
      }
      return res;
   } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T16:39:28.777

我解决了这个问题。

在我的活动中使用此代码：

```
private static boolean calendar_opened = false;

private void openCalendar() {
  String[] calendars = getCalendars(this);
  if (!calendar_opened && calendars != null && calendars.length <= 0) {
     new Timer().schedule(new TimerTask() {
        @Override
        public void run() {
           runOnUiThread(new Runnable() {
              public void run() {
                 try {
                    //bring back my activity to foreground
                    final Intent tmpIntent = (Intent) MainScreen.this.getIntent().clone();
                    tmpIntent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_SINGLE_TOP);
                    tmpIntent.setClass(MyExams.getInstance(), MainScreen.class);
                    PendingIntent.getActivity(MyExams.getInstance(), 0, tmpIntent, PendingIntent.FLAG_UPDATE_CURRENT).send();
                 }
                 catch (Exception e) {
                 }
              }
           });
        }
     }, 100 );//time is your dissection

     Intent i = new Intent();
     i.setClassName("com.android.calendar", "com.android.calendar.LaunchActivity");
     i.addFlags(Intent.FLAG_ACTIVITY_NO_HISTORY);
     startActivity(i);
     calendar_opened = true;
  }

}
//After my activity is on foreground I killed the calendar using this code, even there's no need because of FLAG_ACTIVITY_NO_HISTORY:
ActivityManager activityManager = (ActivityManager) MainScreen.this.getSystemService(Context.ACTIVITY_SERVICE);
activityManager.killBackgroundProcesses("com.android.calendar"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T15:23:12.783

我认为设备日历应用程序必须在您打开它时安装一个日历，在恢复出厂设置后打开它之前可能不可用。

我认为您不希望用户必须打开日历应用程序。如果您不介意在后台打开日历应用程序，您可以考虑通过 a`Service`将其打开，然后尽快将其关闭，这样用户就不会注意到并且设备日历可用。

android-codes-examples.blogspot.in/2011/11/... 看看这个链接，有用吗？

# jquery - 通过 POST 发送的动态多值查询创建

> ID：13720181
> 
> 赞同：0
> 
> 时间：2012-12-05T09:41:33.923
> 
> 标签：jquery, html, forms, post

我有产品和产品有不止一种颜色！并且同一产品可以有多个多色套装。

示例：产品是“衬衫”。“衬衫”有蓝色、绿色、红色。然后我需要将其他颜色的黑色、白色、黄色、橙色添加到同一个“模型”“衬衫”中。然后将另一个颜色集添加到相同的模型......等等。

我的想法应该如何工作：我有一个包含所有可用颜色的颜色表。所以我将“衬衫”添加到市场并单击“添加颜色集”，然后打开所有颜色的表格。我选择了产品所需的颜色（第一个颜色集），按“保存”并创建颜色查询“name=color_set_1”。然后我再次按“添加颜色集”....等。

问题：我不知道如何创建那些动态的“name=color_set_？” 包含我可以通过 POST 正确发送的多色。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T09:54:24.290

你试试 name[]=color_set 吗？

你可以发送

名称[]="粉红色"; 名称[]="黄色";...

然后得到数组。

像这样的东西：

```
?model=Shirt&name[1][]=red&name[1][]=black&name[1][]=white&name[2][]=blue&name[2][]=green 
```

有了这个，您将在多维数组中拥有 2 个颜色集：颜色集 1 = 红色、黑色和白色，颜色集 2 = 蓝色和绿色

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T09:51:42.997

I would use PHP to do this for example:

```
<?php
    $colour = $_POST['colour'];
    $model = $_POST['model']
    $set = $_POST['set']

    $name = $colour+"_"+$set+"_"+$model;

   etc....
?> 
```

# maven - maven中继承和子模块概念有什么区别？

> ID：13720183
> 
> 赞同：3
> 
> 时间：2012-12-05T09:41:49.107
> 
> 标签：maven, maven-2

maven中继承和子模块概念有什么区别？假设我有一个项目`A`，其父项目是 project `B`？在那种情况下是`A`一个子模块`B`还是完全不同的东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T10:10:45.307

maven 中的继承概念与 OOP 中的继承非常相似。通常，`<parent>`当您想重用其他项目的设置（如依赖项、存储库、构建插件等）时，您会继承（在 pom.xml 中包含部分）。

子模块概念不同。当您的项目由一些较小的项目组成时，它解决了软件开发中非常常见的情况，每个项目都服务于自己的目标。在 Maven 术语中，它是通过`<modules>`pom.xml 中的部分完成的。当您在主项目的根目录中执行 maven 目标时，该目标会传播到所有子项目并在那里执行。

但是，在大多数情况下，这两个概念是一起使用的。您有定义常见依赖项、构建生命周期、设置、属性、存储库等的主要 pom.xml 文件和一组模块。每个模块都从主 pom.xml 继承配置，并可能添加一些特定的内容。

# android-framework - 如何将 AAC 解析器集成到 Android 源代码中？

> ID：13720189
> 
> 赞同：0
> 
> 时间：2012-12-05T09:42:05.773
> 
> 标签：android-framework

请向我解释一下 AACExtractor.cpp 是关于代码方面的全部内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-23T10:10:44.137

虽然答案不会帮助提问者，但它会帮助其他寻求答案的人。

AAC extractor.cpp 是 libstagefright.so 的一部分，libstagefright.so 是一个 stagefright 媒体框架，用于处理从 . Awesome player.cpp 正在使用 AAC 提取器，它控制音频/视频播放。它来自 AACextractor 类，以帮助识别文件是否为“aacfile”（SniffAAC 函数）

它需要实现的方法

提取与元数据有关的信息（专辑封面、艺术家等）

从要提供给编解码器的文件中提取必要的信息（采样率通道，初始化解码器，）

提取帧并将其提供给解码器。（支持实现对特定帧的搜索等功能，）

这些函数被其他函数用来完成它们的工作。这是一个概述。最好的理解方法是打印日志。希望这可以帮助

有关更多详细信息，请查看 [https://groups.google.com/forum/#!forum/android-porting](https://groups.google.com/forum/#!forum/android-porting) [https://groups.google.com/forum/#!forum/android-framework](https://groups.google.com/forum/#!forum/android-framework)

# azure - 回滚部署/发布？

> ID：13720190
> 
> 赞同：1
> 
> 时间：2012-12-05T09:42:12.207
> 
> 标签：azure, azure-sql-database, web-deployment, rollback, azure-web-app-service

有没有办法回滚 Windows Azure 网站和 SQL 部署/发布？

我发布了一个网站，现在它导致了很多错误，我想回到以前的状态并更多地处理代码。

这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T10:10:55.167

如果您使用 Git 或 TFS，您可以通过选择以前的部署来利用部署回滚（如[Nathan Totten](https://ntotten.com/2012/06/07/10-things-about-windows-azure-web-sites/)所述）：

![在此处输入图像描述](../Images/9fa86c6dfaebac38c4de16ab3e305c45.png)

要回滚数据库，您可以做几件事。最简单的可能是使用 EF 迁移：

*   从 Application_Start 运行 EF 迁移（不确定这是否是您想要做的事情
*   （手动）调用[migrations.exe](http://msdn.microsoft.com/en-us/data/jj618307)：

    Migrate.exe MyApp.exe /startupConfigurationFile=”MyApp.exe.config” /targetMigration=”MyPreviousVersion”</p>

# c# - 在数据库中搜索数据

> ID：13720193
> 
> 赞同：1
> 
> 时间：2012-12-05T09:42:13.003
> 
> 标签：c#, asp.net, database, sql-server-2005, search

我基本上是在使用 VS2008 和 SQL Server 2005 创建一个网站，它以登录页面启动。现在我要验证用户输入的`LoginID`和`Password`。一旦系统从数据库表中找到 ID 和密码，就会进行此身份验证。一旦找到，我想检查它是什么类型的用户 ie`Admin`或`Customer`. 如果用户是管理员，那么页面应该被重定向到`abc.aspx`else `cde.aspx`。

我的 LoginPage 前端是：

```
<tr>
<td class="style11"> Login </td>
<td>
<asp:TextBox ID="txtUserName" runat="server" Width="300px" CssClass="Textbox1"></asp:TextBox>
</td>
</tr>
<tr>
<td class="style11"> Password </td>
<td>
<asp:TextBox ID="txtPassword" runat="server" TextMode="Password" Width="300px" CssClass="Textbox1"></asp:TextBox>
</td>
</tr>
<tr>
<td colspan="2">
<asp:Button ID="btnSubmit" runat="server" OnClick="btnSubmit_Click" CssClass="btn1"
                    Text="Submit" />
<asp:Button ID="btnCancel" runat="server" OnClick="btnCancel_Click" CssClass="btn1"
                    Text="Cancel" />
</td>
</tr> 
```

我的后端代码是：

```
//CODE 1
SqlDataSource sds = new SqlDataSource();
sds.ConnectionString = ConfigurationManager.ConnectionStrings["Gen_LicConnectionString3"].ToString();
sds.SelectParameters.Add("LoginID", TypeCode.String, this.txtUserName.Text);
sds.SelectParameters.Add("Password", TypeCode.String, this.txtPassword.Text);
sds.SelectCommand = "SELECT User_Type FROM [User_Details] WHERE [LoginID]=@LoginID AND [Password]=@Password";

    if (//Some Condition) //<-- Here I want to check the condition whether the User_Type is 'Admin' or 'Customer'
    {
        Response.Redirect("Lic_Gen.aspx"); //<-- If Admin
    }
    else
    {
        Response.Redirect("Cust_Page.aspx"); //<-- If Customer
    }

//CODE 2
//string connectionString = WebConfigurationManager.ConnectionStrings["Gen_LicConnectionString3"].ConnectionString;
    //string selectSQL = "SELECT User_Type FROM User_Details WHERE [LoginID]=@LoginID AND [Password] = @Password";
    //SqlConnection con = new SqlConnection(connectionString);
    //SqlCommand cmd = new SqlCommand(selectSQL, con);
    //SqlDataAdapter adapter = new SqlDataAdapter(cmd);
    //DataSet ds = new DataSet();

    //if (cmd.Equals(1))
    //{
    //    Response.Redirect("Lic_Gen.aspx");
    //}
    //else
    //{
    //    Response.Redirect("Cust_Page.aspx");
    //} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T10:51:19.973

这是不使用成员模型的最简单方法。这是一个使用数据读取器的简单方法。

```
 SqlDataReader sdrDatanew = null;
    string strnew;
    string connectionString = WebConfigurationManager.ConnectionStrings["Gen_LicConnectionString"].ConnectionString;
    SqlConnection connew = new SqlConnection(connectionString);
    connew.Open();
    strnew = "select User_Type from User_Details where User_Type='" + ddlUserSel.SelectedItem.Value + "' AND LoginID = '" + txtUserName.Text + "' AND Password = '" + txtPassword.Text + "'";
    SqlCommand sqlCommnew = new SqlCommand(strnew, connew);
    sdrDatanew = sqlCommnew.ExecuteReader();

    int userType = 0;

    if (sdrDatanew.HasRows)
    {
        if (sdrDatanew.Read())
        {
            userType = Convert.ToInt32(sdrDatanew["User_Type"].ToString());
        }
    }

    switch (userType)
    {
        case 0:
            Response.Redirect("Lic_Gen.aspx");
            break;
        case 1:
            Response.Redirect("Cust_Page.aspx");
            break;
        default:
            Console.WriteLine("Invalid User/Password");
            Console.ReadLine();
            break;
    }

    connew.Close(); 
```

# amazon-s3 - 我可以从 S3 存储桶运行我的静态网站并添加密码保护吗？

> ID：13720196
> 
> 赞同：28
> 
> 时间：2012-12-05T09:42:27.637
> 
> 标签：amazon-s3, password-protection

我完全从 Amazon S3 存储桶运行静态网站，但我想用密码保护我的内容。这可能吗？身份验证的类型不会打扰我，它只需要在那里，这样人们就不能只是“发现”我的网站。

目前，我没有设置域名，我认为这排除了[http://www.s3auth.com/](http://www.s3auth.com/)作为可能的解决方案。还有其他人吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-08T10:23:31.153

AWS 目前不提供直接执行此操作的方法。您提到的 S3auth 解决方案很好，因为您的存储桶/对象保持私有，因此直接访问存储桶不允许在没有您的私有凭证的情况下读取对象。s3auth 方法的缺点是它依赖于您信任 s3auth 和您的私人凭据。如果您的凭据在任何阶段都被泄露，则可能会付出高昂的代价，具体取决于某人如何滥用您的访问权限。

如果您使您的对象公开可读（就像您在创建网站时所做的那样），任何学习/猜测/知道您的对象名称等的人都可以访问它们。或者实际上，如果存储桶是可读的，那么他们所需要的只是存储桶名称。除了收紧 S3 访问权限外，没有真正的解决方法。

如果您只从某些 IP 地址访问您的网站，那么查看[存储桶策略](http://docs.aws.amazon.com/AmazonS3/latest/dev/AccessPolicyLanguage_UseCases_s3_a.html)可能会有所帮助。向下滚动到*限制对特定 IP 地址的访问*。这不是密码，但它确实允许您至少限制访问的来源。

提供对对象的临时访问的另一种常用技术是[查询字符串请求身份验证](http://docs.aws.amazon.com/AmazonS3/latest/dev/RESTAuthentication.html#RESTAuthenticationQueryStringAuth)。但是，这不符合您对密码保护 S3 存储桶网站的原始要求。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-08-30T23:45:12.837

这可以使用 CloudFront 和 Lambda@Edge 来实现。在此处查看答案：[https ://stackoverflow.com/a/45971193/4550880](https://stackoverflow.com/a/45971193/4550880)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-12-07T23:09:52.400

我认为[适用于 Javascript 的 AWS 开发工具包](http://aws.amazon.com/developers/getting-started/browser/)正是您正在寻找的。公平地说，当您 2 年前发布此问题时，它不可用。它允许您使用 Facebook、Google 或 Amazon 登录。这是使用 AWS 登录 的[另一个资源。](https://medium.com/aws-activate-startup-blog/dynamic-websites-using-the-aws-sdk-for-javascript-in-the-browser-b3dd90c25b1e#.w9c1341es)

# iphone - 应用程序本身的轮流导航

> ID：13720197
> 
> 赞同：2
> 
> 时间：2012-12-05T09:42:27.983
> 
> 标签：iphone, objective-c, ios, mkmapview

我想知道是否可以在应用程序本身中实现转弯导航。目前我正在使用这段代码。

```
-(void)viewWillAppear:(BOOL)animated{
    //home location
    CLLocationCoordinate2D coords =
    CLLocationCoordinate2DMake(51.044242,5.621653);
    MKPlacemark *place = [[MKPlacemark alloc]
                          initWithCoordinate:coords addressDictionary:nil];
    MKMapItem *mapItem = [[MKMapItem alloc]initWithPlacemark:place];

    //current location
    MKMapItem *mapItem2 = [MKMapItem mapItemForCurrentLocation];

    NSArray *mapItems = @[mapItem, mapItem2];

        NSDictionary *options = @{
        MKLaunchOptionsDirectionsModeKey:MKLaunchOptionsDirectionsModeDriving,
        MKLaunchOptionsMapTypeKey:
        [NSNumber numberWithInteger:MKMapTypeStandard],
        MKLaunchOptionsShowsTrafficKey:@YES
    };

    [MKMapItem openMapsWithItems:mapItems launchOptions:options];
} 
```

这很好用，但它会打开本机应用程序。是否可以在不离开应用程序的情况下在应用程序本身中显示这一点？

亲切的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T04:48:11.550

用于在应用程序中显示地图视图功能。使用 MKMapView 而不是使用 MKMapItem 将您重定向到设备的本机应用程序，

要在地图视图上绘制路线，请遵循以下链接，

1) [MKMapView](http://developer.apple.com/library/ios/#documentation/MapKit/Reference/MKMapView_Class/MKMapView/MKMapView.html)

2)[在 Mapview 上绘制折线或路线](http://spitzkoff.com/craig/?p=65)

*   您可以在 mapview 的叠加层上使用绘制线绘制路径，您可以在上面的链接中简要了解这一点，对于**MapView**上的叠加层，请参阅[此](http://developer.apple.com/library/ios/#documentation/MapKit/Reference/MKOverlayView_class/Reference/Reference.html)。

*   根据您的问题，您可以使用地图上的两个转折点逐个绘制路径。

你可以在上面找到所有与 mapView 相关的类参考的官方链接[**`here`**。](http://developer.apple.com/library/ios/#documentation/MapKit/Reference/MapKit_Framework_Reference/_index.html)

# mysql - 将网站从 joomla 1.5.20 升级到 1.5.26

> ID：13720198
> 
> 赞同：-1
> 
> 时间：2012-12-05T09:42:27.903
> 
> 标签：mysql, phpmyadmin, joomla1.5

我想将我的网站从 1.5.20 升级到 1.5.26。请指导我如何升级它。我的网站是 [http://xaydungla.com](http://xaydunglala.com) 谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T10:42:59.680

要更新这样的次要修订，您通常只需解压缩计算机上的文件并通过 FTP 将它们上传到顶部

# ruby-on-rails - 跟踪从哪个视图调用局部视图

> ID：13720199
> 
> 赞同：1
> 
> 时间：2012-12-05T09:42:33.493
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我从 Rails 中的多个视图、显示页面和编辑页面调用相同的部分。如何跟踪从哪个视图调用局部视图？更具体地说，我想根据渲染的页面稍微调整部分。我曾尝试使用`url_for(:only_path => true)`和 if-else 语句请求 uri，以确定部分是否呈现在显示或编辑页面上，但这有点麻烦。有更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T10:14:05.567

你可以尝试使用`current_page?`助手，即`if current_page?(root_path)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T10:20:33.540

我们将它放在 application.html.erb 模板中，该模板显示当前控制器、视图和更多调试信息：

```
 <%= debug(params) if Rails.env.development? %> 
```

我想我们是从 Rails 网站得到的：

[http://guides.rubyonrails.org/debugging_rails_applications.html](http://guides.rubyonrails.org/debugging_rails_applications.html)

# git - 从 GIT 本地仓库获取第 n 个提交/版本

> ID：13720205
> 
> 赞同：1
> 
> 时间：2012-12-05T09:42:49.963
> 
> 标签：git, version

这是场景

我在 GIT 中有 5 个版本的代码。

```
Commit 1
Commit 2
Commit 3
Commit 4
Commit 5 
```

现在我在代码中有很多未提交的更改。我想`say commit 3`在不同的物理位置获取早期版本 ( ) 之一，而不会丢失未提交的更改。

换句话说，在开发最新版本的同时，我想给一些人提供更早的工作版本，而不需要对 GIT 存储库进行任何更改。

*请不要问我，为什么我不想提交更改。*

**我的问题的简化版**

我可以在 GIT 中做这样的事情吗？

```
svn export -r123 https://svnrepo C:/temp 
```

其中 123 是版本，C:/Temp 是目标位置。我相信这不会对存储库进行更改！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T09:54:39.267

如果您真的只想让其他人分支并在您的存储库上工作，那么您可能正在寻找一个简单的`git clone`. 这不会强迫您提交任何工作更改。

```
git clone /path/to/local/git-repo /path/to/local/new-git-repo 
```

这将克隆您的存储库，而无需您进行挂起的更改。这将在本地和远程工作。然后，想要从特定提交开始的人将获得该新克隆并使用`checkout -b`, `reset`or `rebase`（以最适合您的流程的为准）。

例如，以下是其他人在获得您的克隆后可能会做的事情：

```
cd /path/to/new-git-repo
checkout -b new-feature commit-1
# work work work
# commit 
```

然后你会`git pull /path/to/his/new-git/repo new-feature`，或者也许`fetch`，`cherry-pick`谁知道呢。

总之，您似乎需要一个共享的远程来源以避免被上述内容混淆并执行上述操作，这将是解决您的问题的最佳方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T09:48:04.987

你想要的是把你的工作*藏起来*，然后再回来（不提交当前的更改）。

一般来说：

```
git stash
git checkout <commit>
- Do Something -
git stash apply 
```

阅读[此](http://git-scm.com/book/en/Git-Tools-Stashing)内容以获取更多信息。

**编辑：**
正如@soulseekah 指出的那样，您可以将**本地**存储库克隆到其他位置，并且未提交的代码不会克隆。
至于获得第 n 次提交（例如 3 次之前的提交）：

```
git checkout HEAD~3 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-23T11:32:04.197

似乎是 GIT 中缺少的功能。就像 SVN 中的“导出”一样。唯一的办法就是先检查`nTh`版本再拿，再检查一下大师！

# c# - 应用程序中的 SQLite 文件版本兼容性

> ID：13720206
> 
> 赞同：2
> 
> 时间：2012-12-05T09:42:50.777
> 
> 标签：c#, json, entity-framework, sqlite, serialization

我有一个 C# .NET 应用程序（一种复杂的计算应用程序），用户在其中输入数据，处理后的信息使用 JSON 序列化和 EF 保存到 SQLite 文件中。需要时可以将其加载到我们的应用程序中。

应用程序在开发过程中经历了很多变化，并且类也被修改了。所以之前保存在 SQLite 文件中的序列化对象与新的不同。

我想为旧文件提供兼容性，以便可以在新应用程序中打开它。

简单来说，一个以 bool 为成员的 .NET 类“class XYZ”使用 JSON 序列化并保存为 SQLite 文件中的 BLOB。后来在较新版本的应用程序中，“xyz 类”的 bool 成员被修改为 int。如何将之前保存的布尔类型文件反序列化到新应用程序中？

SQLite 表结构在整个版本中也有变化。如何在.NET 中实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T10:08:18.320

这是一个很常见的问题，我认为不受 C# 语言的限制。它已经看到了两种实现这种版本控制的方法：

1.  创建一个只有一`INTEGER`列的表，该表只包含一行（从而模拟数据库变量），其中包含数据库和结构模式的版本。随着每次架构更改，您都会增加与之关联的版本。对于每个新版本，您编写升级语句和函数来获取原始 JSON 对象（未转换为类实例，因为它们不兼容）、更新、删除和创建更改的结构字段。然后将转换后的结构写入升级后的模式。我已经做过很多次了，当然，这很乏味，你必须一丝不苟，但这几乎是唯一可靠的方法（我知道）。
2.  使用诸如[Protocol Buffer](http://code.google.com/p/protobuf/)之类的库，它支持结构更改（当然是有限的）。这样的库可以帮助您进行结构更改，但不能帮助您更改数据库架构 - 无论哪种方式，您都可能必须维护提到的带有架构版本的单单元表，并在看到较低数字时对其进行升级。

# jakarta-ee - 忽略 Jetty 中的 web.xml 安全约束

> ID：13720208
> 
> 赞同：3
> 
> 时间：2012-12-05T09:43:14.923
> 
> 标签：jakarta-ee, spring-security, jetty, jboss7.x, web.xml

在我们的 web.xml 中，我们有类似的东西

```
 <security-constraint>
    <auth-constraint>
        <role-name>ROLE_USER</role-name>
    </auth-constraint>
    <web-resource-collection>
        <url-pattern>/app/*</url-pattern>
    </web-resource-collection>
</security-constraint> 
```

这仅适用于我们的生产 Websphere 环境。
现在我们不使用 Websphere 进行测试，我们使用 Jetty 和 JBoss。所以我们有特定的 Spring 配置文件来处理这些环境的不同安全配置。但是 Spring 配置文件范围没有到达 web.xml 并且我们被这些安全约束指令所困扰，这些指令与我们的测试环境中的 Spring Security 冲突。

现在我们可以使用 Maven 配置文件来处理[这个问题](https://stackoverflow.com/questions/3298763/maven-customize-web-xml-of-web-app-project)，但这将涉及超过 1 个构建，我们希望避免这种极端情况。

总而言之，有没有办法不考虑 Jetty 的 web.xml 安全性？（如果您有 JBoss 7 的答案，那就太好了！）

编辑：执行 Jetty 6 时的错误是带有短消息的 http 500 `"No Realm"`。另一种解决方案可能是自动记录一个默认的虚拟用户，但我不知道这是否可能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T11:44:49.967

方法终于做到了（Jetty 6）：

我们在 WEB-INF 中添加了一个 jetty-web.xml：

```
<?xml version="1.0"  encoding="ISO-8859-1"?>
<!DOCTYPE Configure PUBLIC "-//Mort Bay Consulting//DTD Configure//EN" "http://jetty.mortbay.org/configure.dtd">
<Configure class="org.mortbay.jetty.webapp.WebAppContext">
  <Set name="securityHandler">
      <New class="mypackage.util.JettySecurityHandler" />
  </Set>
</Configure> 
```

被覆盖的 SecurityHandler：

```
package mypackage.util;

import org.mortbay.jetty.Request;
import org.mortbay.jetty.Response;
import org.mortbay.jetty.security.SecurityHandler;
import java.io.IOException;

public class JettySecurityHandler extends SecurityHandler {

    @Override
    public boolean checkSecurityConstraints(String pathInContext, Request request, Response response)
            throws IOException {
        return true;
    }
} 
```

这不是很好，因为：
- 自定义代码
- 特定版本（不适用于 Jetty 7 和 8）
但它可以工作。

# c++ - 防止在堆栈上创建类的层次结构

> ID：13720212
> 
> 赞同：0
> 
> 时间：2012-12-05T09:43:23.847
> 
> 标签：c++, inheritance, constructor, destructor

我不确定这是否可能。

我需要防止从 X 派生的所有类被实例化为本地堆栈或成员变量。我使他们所有的析构函数都受到保护，就外部范围而言，这起到了作用。但是，我也需要防止它们被自己实例化。我的意思是，如果 Y 具有 Z 类型的成员变量或在其方法中实例化 Z 类型的局部变量，则不会削减它。

现在我可以在层次结构树的所有叶子中创建私有析构函数，但问题是每个 not 都应该被允许成为（堆）变量。在 X <- Y <- Z 的情况下，所有三个都应该被实例化，但 X 和 Y 不能有私有析构函数。此外，即使这样也不能阻止我在 Z 的方法中使用 Z 类型的局部变量。

我想通过将它们的构造函数设为私有并将 operator new 添加为所有它们的朋友就可以了，但这是很多额外的工作（因为我们使用了 operator new 的多个版本）并且层次结构很大。

那么，有没有办法让这些对象的堆栈实例化（最好）编译时或运行时错误，而不诉诸私有构造函数朋友新方式？

<edit> 问题是这个项目的以前的程序员写了大量的代码，这个层次结构中的所有类都有非常复杂的析构函数。而且，作者在这些 destructros 中不加选择地调用了虚拟方法，这导致了许多（对他们而言）无法解释的崩溃和内存损坏。现在将所有析构函数转换为`obj->Release()`模式，并且在我拥有的最顶层 Release 中`delete this`。显然这不适用于堆栈对象，现在我介绍了一些我自己的崩溃。另外我的时间有点短，*运行/等待崩溃/修复这个特定的崩溃*方法非常慢</edit>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T09:46:17.297

在他的书“更有效的 C++”第 27 项中，Scott Meyers（顺便说一句，我最喜欢的 C++ 作家）描述了为什么在一般意义上和在可移植或半可移植 C++ 的范围内不可能明确区分一个对象是否已经分配在堆栈、堆上或静态分配。它还讨论了确保对象只能在堆栈或堆上分配的各种选项。其中一个或多或少是可行的，另一个没有真正便携的万无一失的工作方式；我忘了哪个是哪个。（书在工作，我在家。）

# ruby - ruby中函数定义中的问号是什么意思？

> ID：13720214
> 
> 赞同：2
> 
> 时间：2012-12-05T09:43:26.063
> 
> 标签：ruby

我有这样的功能——

函数的名称是 seld.is_dl，它接受路径参数。我的问题是`?`函数定义中的这个符号表示什么。

```
def self.is_dl?(path)

  path = File.basename(path)

  if path =~ /setup.exe/i

    return false

  else

    return true

  end

end 
```

我是 Java 开发人员，我见过“？” 如果主要是 If-ELSE 块，这就是为什么我无法弄清楚这是什么意思？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-05T09:44:55.783

`?`是方法名称中的有效字符。

它通常用于表示返回`true`或`false`

例如：

*   [文件已存在？](http://www.ruby-doc.org/core-1.9.3/File.html#method-c-exist-3F)
*   [文件可读？](http://www.ruby-doc.org/core-1.9.3/File.html#method-c-readable-3F)
*   [字符串#ascii_only？](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-ascii_only-3F)
*   ETC

注意：`!`也是一个有效字符。它通常用于表示“破坏性”方法

*   [字符串#大写！](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-capitalize-21)
*   [字符串#downcase！](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-downcase-21)
*   [字符串#rstrip！](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-rstrip-21)
*   ETC

* * *

如果您想加倍努力，Ruby 在技术上允许任何字符串作为方法名称。奇数需要`define_method()`和`send()`调用，但形式上没有限制。

```
module Hello

  class << self
    define_method "this is my method :)" do |foo|
      puts "you gave my method #{foo}"
    end

    define_method "this isn't your method :(, sorry" do
      puts "sorry, not your method, bro"
    end
  end

end

Hello.send("this is my method :)", "candy")
#=> you gave my method candy

Hello.send("this isn't your method :(, sorry")
#=> sorry, not your method, bro 
```

# android - Android：Shakelistener 错误

> ID：13720215
> 
> 赞同：0
> 
> 时间：2012-12-05T09:43:26.640
> 
> 标签：android, android-sensors

我有一个摇动听众如下

```
public class ShakeListener implements SensorEventListener {
    private String TAG = ShakeListener.class.getSimpleName();
    private static final int FORCE_THRESHOLD = 800;
    private static final int TIME_THRESHOLD = 100;
    private static final int SHAKE_TIMEOUT = 500;
    private static final int SHAKE_DURATION = 1000;
    private static final int SHAKE_COUNT = 5;

    private SensorManager mSensorMgr;
    private float mLastX = -1.0f, mLastY = -1.0f, mLastZ = -1.0f;
    private long mLastTime;
    private OnShakeListener mShakeListener;
    private Context mContext;
    private int mShakeCount = 0;
    private long mLastShake;
    private long mLastForce;

    public interface OnShakeListener {
        public void onShake();
    }

    public ShakeListener(Context context) {

        Log.d(TAG,"ShakeListener invoked---->");
        mContext = context;
        resume();
    }

    public void setOnShakeListener(OnShakeListener listener) {

        mShakeListener = listener;
    }

    public void resume() {
        mSensorMgr = (SensorManager) mContext
                .getSystemService(Context.SENSOR_SERVICE);
        if (mSensorMgr == null) {
            throw new UnsupportedOperationException("Sensors not supported");
        }
        boolean supported = false;
        try {
            supported = mSensorMgr.registerListener(this,
                    mSensorMgr.getDefaultSensor(Sensor.TYPE_ACCELEROMETER),
                    SensorManager.SENSOR_DELAY_GAME);
        } catch (Exception e) {
            Toast.makeText(mContext, "Shaking not supported", Toast.LENGTH_LONG)
                    .show();
        }

        if ((!supported) && (mSensorMgr != null))
            mSensorMgr.unregisterListener(this);
    }

    public void pause() {
        if (mSensorMgr != null) {

            mSensorMgr.unregisterListener(this);
            mSensorMgr = null;
        }
    }

    public void onAccuracyChanged(Sensor sensor, int accuracy) {

    }

    public void onSensorChanged(SensorEvent event) {
        if (event.sensor.getType() != Sensor.TYPE_ACCELEROMETER)
            return;
        long now = System.currentTimeMillis();

        if ((now - mLastForce) > SHAKE_TIMEOUT) {
            mShakeCount = 0;
        }

        if ((now - mLastTime) > TIME_THRESHOLD) {
            long diff = now - mLastTime;
            float speed = Math.abs(event.values[SensorManager.DATA_X]
                    + event.values[SensorManager.DATA_Y]
                    + event.values[SensorManager.DATA_Z] - mLastX - mLastY
                    - mLastZ)
                    / diff * 10000;
            if (speed > FORCE_THRESHOLD) {
                if ((++mShakeCount >= SHAKE_COUNT)
                        && (now - mLastShake > SHAKE_DURATION)) {
                    mLastShake = now;
                    mShakeCount = 0;
                     Log.d(TAG,"ShakeListener mShakeListener---->"+mShakeListener);
                    if (mShakeListener != null) {
                        mShakeListener.onShake();
                    }
                }
                mLastForce = now;
            }
            mLastTime = now;
            mLastX = event.values[SensorManager.DATA_X];
            mLastY = event.values[SensorManager.DATA_Y];
            mLastZ = event.values[SensorManager.DATA_Z];
        }}} 
```

我在我的一项活动中使用此侦听器，如下所示

```
mShaker = new ShakeListener(this);
        mShaker.setOnShakeListener(new ShakeListener.OnShakeListener () {
         public void onShake()
          {

              Intent myIntent = new Intent(myActivity.this, loginActivity.class);
              startActivity(myIntent);
          }

        }); 
```

仅当我在该特定活动上时才会触发此震动。但它会在所有活动中触发，更糟糕的是，即使我在震动时关闭应用程序，事件也会触发并使应用程序打开。感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T09:49:01.777

在您的活动中添加此方法：

```
 @Override
    protected void finalize() throws Throwable {
        try {
            stop();
        } catch (Exception e){
            e.printStackTrace();
        }
        super.finalize();
    }

    public void stop(){
        try {
            sensorMgr.unregisterListener(this, mAccelerometer);
        } catch (Exception e){
            e.printStackTrace();
        }
    } 
```

# deployment - Rails，使用 Capistrano 部署到 Unicorn 上的 VPS

> ID：13720217
> 
> 赞同：1
> 
> 时间：2012-12-05T09:43:33.887
> 
> 标签：deployment, capistrano, unicorn

我需要帮助调试以下问题。这是我第一次部署，我还没有想出解决方案。

```
 * 2012-12-05 18:37:44 executing `deploy:start'
  * executing "/etc/init.d/unicorn_blog start"
executing command
/etc/init.d/unicorn_blog: 24: kill: No such process
master failed to start, check stderr log for details 
```

这是标准错误

```
/.../unicorn/socket_helper.rb:140:in `initialize': Address already in use - /tmp/unicorn.my_app.sock (Errno::EADDRINUSE) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T00:04:33.343

看起来您有一个僵尸 Unicorn 进程，其 PID 与 init.d 记录的 PID 不同。我会尝试运行`$ ps aux | grep unicorn`找到僵尸进程，然后`kill`它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T00:05:49.240

不确定它是如何工作的，但以下解决方案确实有效。

```
lsof /tmp/unicorn.my_app.socket 
```

列出 pid

```
kill -9 pid 
```

（将“pid”替换为列出的其中之一）

```
Then cap deploy:start from the local terminal. 
```

来源：[Unicorn/Nginx 进程丢失，套接字打开](https://stackoverflow.com/questions/10150245/unicorn-nginx-process-missing-socket-open)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-01T23:09:52.180

我不得不

```
sudo rm /tmp/unicorn.my_app.sock 
```

和

```
sudo /etc/init.d/unicorn_myapp start 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-29T04:33:08.200

我得到了同样的错误，我修复如下：

1.  SSH 到您的项目部署到的服务器，并运行这些命令
    `ps -ef | grep unicorn`=> list pid of unicorn。找到你的 unocorn master 进程 ID。
    用上面的 pid 替换“unicorn.my_app.sock”上的 pid。

2.  尝试使用 capistrano 再次部署。

# button - 刷新值 HTML 元素

> ID：13720221
> 
> 赞同：0
> 
> 时间：2012-12-05T09:43:55.140
> 
> 标签：button, sencha-touch-2, listitem

我需要 sencha touch 中的“ASP.net 的更新面板”的一些技术。可以这样解释需要，我的页面中有喜欢的按钮和喜欢的计数器。当其他客户也喜欢该项目时，我希望像 Facebook 那样自动增加计数。

我怎样才能满足这种需求？有人有想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T11:14:07.837

干得好。显示点赞数的点赞按钮：

[http://www.senchafiddle.com/#Cc891](http://www.senchafiddle.com/#Cc891)

它基本上使用`data`和`tpl`配置`Ext.Button`

希望这可以帮助

# entity - E/R 图：实体一词是否经常被误用？

> ID：13720222
> 
> 赞同：0
> 
> 时间：2012-12-05T09:43:55.907
> 
> 标签：entity, entity-relationship, ambiguity

人们是否经常使用“实体”一词来指代后来将成为表格的东西？如果是，这在技术上是不是不正确，因为实体集通常会变成表？

在我看来，人们经常说实体时指的是实体集。当我在图表上看到一个正方形时，它实际上代表了一个实体集，对吗？例如，如果有一个方块表示电影不是一部特定的电影（如实体），而是电影的集合（实体集），对吗？

例如，当我输入 E/R 图教程时，[这](http://creately.com/blog/diagrams/er-diagrams-tutorial/)是 Google 上出现的第一个网站，它声称正方形代表实体，这在技术上是错误的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T09:47:18.707

E/R 图的措辞是单数的——例如“老师教一堂课”。

所以会有一个矩形代表“老师”，一个矩形代表“班级”，一个菱形代表“老师”。

但是严格来说，是的，建模是集合的，并且被转换为表格，使得“老师”是“教师”的表格（集合），“班级”是“班级”的表格（集合）并且取决于基数，“教”可能是“教师级”表

# java - 如何在地图中拥有具有多个值的键？

> ID：13720225
> 
> 赞同：6
> 
> 时间：2012-12-05T09:44:02.697
> 
> 标签：java, map

我有这样的地图

```
Map map=new HashMap();//HashMap key random order.
map.put("a",10);
map.put("a",20);
map.put("a",30);
map.put("b",10);

System.out.println("There are "+map.size()+" elements in the map.");
System.out.println("Content of Map are...");
Set s=map.entrySet();
Iterator itr=s.iterator();
while(itr.hasNext())
{
    Map.Entry m=(Map.Entry)itr.next();
    System.out.println(m.getKey()+"\t"+m.getValue()+"\t"+ m.hashCode());
} 
```

上述程序的输出是

```
There are 2 elements in the map.
Content of Map are...
b   10  104
a   30  127 
```

现在我希望那个键 a 应该有多个值，比如

```
a 10
a 20
a 30 
```

这样我就应该得到与 a 关联的所有值。请告知我怎样才能实现同样的目标。通过嵌套集合，我希望键 'a' 具有所有三个值。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-05T09:45:12.630

你检查过[Guava Multimaps](http://guava-libraries.googlecode.com/svn/tags/release03/javadoc/com/google/common/collect/Multimap.html)吗？

> 类似于 Map 的集合，但可以将多个值与单个键相关联。如果您使用相同的键但值不同的两次调用 put(K, V)，则多重映射包含从键到两个值的映射。

如果您真的想使用标准集合（如下所示），则必须为每个键存储一个集合，例如

```
map = new HashMap<String, Collection<Integer>>(); 
```

请注意，第一次输入新键时，您必须在添加第一个值之前创建新集合（等）`List`。`Set`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-05T09:53:30.093

要使用 Java 标准库实现您想要的，我会使用这样的映射：

```
Map<String, Collection<Integer>> multiValueMap = new HashMap<String, Collection<Integer>>(); 
```

然后你可以添加值：

```
multiValueMap.put("a", new ArrayList<Integer>());
multiValueMap.get("a").add(new Integer(10));
multiValueMap.get("a").add(new Integer(20));
multiValueMap.get("a").add(new Integer(30)); 
```

如果这让您感到不舒服，请考虑将此行为包装在专用类中，或使用第三方解决方案，正如其他人在此处建议的那样 ( [Guava Multimap](http://guava-libraries.googlecode.com/svn/tags/release03/javadoc/com/google/common/collect/Multimap.html) )。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-05T09:46:28.123

在值部分放置一个`ArrayList`实例。

```
void addValue(Map map, Object key, Object value) {
    Object obj = map.get(key);
    List list;
    if (obj == null) {  
        list = new ArrayList<Object>();  
    } else {
        list = ((ArrayList) obj);
    }
    list.add(value);
    map.put(key, list);
} 
```

有关更多信息，请检查[此](http://www.coderanch.com/t/385085/java/java/Implementing-HashMap-multiple-values-key)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-05T09:47:29.013

您不应该忽略泛型参数。你所拥有的是

```
Map<String, Integer> map = new HashMap<>(); 
```

如果你想自己编写解决方案，你需要

```
Map<String, List<Integer>> map = new HashMap<>(); 
```

无论如何，首选方法是使用[Guava Multimap](http://guava-libraries.googlecode.com/svn/tags/release03/javadoc/com/google/common/collect/Multimap.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-05T09:46:34.633

使用具有值类型的 Map 作为值列表。例如，在您的地图中，在添加条目时，您会将键作为“a”，并且您必须将其值添加为 Integer 列表，具有所有必需的值，如 1,2,3,4。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-07-18T14:21:02.397

对于具有相同键条目的地图，使用没有意义`get()`。但只要您使用`iterator()`或`entrySet()`这应该工作：

```
class HashMap<String, String> {

  Set<Entry<String, String>> entries;
  @Override
  public Set<Entry<String, String>> entrySet() {
    return entries;
  }

  @Override
  public int size() {
    return entries.size();
  }

  public String put(String key, String value) {
    if (entries == null) {
      entries = new AbstractSet<Entry<String, String>>() {

        ArrayList<Entry<String, String>> list = new ArrayList<>();
        @Override
        public Iterator<Entry<String, String>> iterator() {
          return list.iterator();
        }

        @Override
        public int size() {
          return list.size();
        }

        @Override
        public boolean add(Entry<String, String> stringStringEntry) {
          return list.add(stringStringEntry);
        }
      };
    }
    StatusHandler.MyEntry entry = new StatusHandler.MyEntry();
    entry.setKey(key);
    entry.setValue(value);
    entries.add(entry);
    return value;
  }
}; 
```

TL;DR 那么，它有什么用？这来自对 redmine-java-api 的破解，以接受基于表单参数的复杂查询：

[https://stackoverflow.com/a/18358659/848072](https://stackoverflow.com/a/18358659/848072)

[https://github.com/albfan/RedmineJavaCLI/commit/2bc51901f2f8252525a2d2258593082979ba7122](https://github.com/albfan/RedmineJavaCLI/commit/2bc51901f2f8252525a2d2258593082979ba7122)

# if-statement - 在 IF 语句（批处理）中设置变量？

> ID：13720228
> 
> 赞同：1
> 
> 时间：2012-12-05T09:44:09.883
> 
> 标签：if-statement, batch-file, set

好的，我得到了这个基本的 IF 语句。我想根据用户名设置用户角色。不过看起来确实 set 语句永远不会被执行，因此我得到了一个空的回声。

```
if "%username%" == "admin" (
    set role = "admin"
) else (
    set role = "user"
)

echo %role% 
```

我错过了什么，或者可能是 Windows 不支持它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T09:56:51.557

删除空格。您现在正在为环境变量设置一个值`role`（带有 Stack Overflow 不会显示的尾随空格）。此外，角色变为`"admin"`（包括引号和前导空格，也就是说，这里再次不可见）。

`set`您可以通过从命令行不带参数运行来验证这一点。它将为您提供所有变量的列表，您可以在其中清楚地看到不需要的空间。

```
if "%username%" == "admin" (
    set role=admin
) else (
    set role=user
)

echo %role% 
```

`%username%`您仍然需要在 if 语句中使用引号的唯一原因是，如果该语句不存在/为空，则该语句将变为无效。在这种情况下，该行将变为：

```
if == admin ( 
```

...这当然是无效的。它甚至不需要引号，你也可以写：

```
if %username%XYZ == adminXYZ ( 
```

# plone - 使用wrap_form显示表单时如何隐藏edit_bar？

> ID：13720232
> 
> 赞同：2
> 
> 时间：2012-12-05T09:44:18.980
> 
> 标签：plone

我有一个基于 z3c.form 的表单。

当我显示它时，我得到了edit_bar（内容/视图/规则/共享）。

我该如何隐藏这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T10:30:49.373

这是之前使用的技巧：

[http://developer.plone.org/templates_css_and_javascripts/template_basics.html#edit-frame](http://developer.plone.org/templates_css_and_javascripts/template_basics.html#edit-frame)

但是您首先需要有自己的表单集主模板。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T17:10:22.330

您可以将 self.request.set('disable_border',1) 放在表单的 init 或 update 方法中

请参阅大卫格里克​​的评论

# c++ - Xcode 4.5 和 OpenMP with Clang (Apple LLVM) 仅使用一个内核

> ID：13720234
> 
> 赞同：7
> 
> 时间：2012-12-05T09:44:29.700
> 
> 标签：c++, xcode, clang, openmp

我们在一个 C++11 项目中使用 Xcode 4.5，我们使用 OpenMP 来加速我们的计算：

```
#pragma omp parallel for
for (uint x=1; x<grid.width()-1; ++x) {
    for (uint y=1; y<grid.height()-1; ++y) {
         // code
    }
} 
```

尽管活动监视器显示程序正在使用多个线程，但我们观察到只使用了一个内核：

![运行我的代码的活动监视器的屏幕截图](../Images/8b20d834eb4d43cb042f1dd9a3375c54.png)

我们还在使用 GCC 4.7 的 Ubuntu 上运行相同的代码，并观察到所有内核上的争用。会不会是 Apple LLVM 中删除了 OpenMP 支持？有没有 OpenMP 的替代品？由于我们使用 C++11 特性，我们无法切换到 GCC。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-05T09:46:36.860

*编辑：这个答案现在已经部分过时了。Modern Clang 确实[支持 OpenMP](https://clang.llvm.org/docs/OpenMPSupport.html)，只是不支持 Apple 的随 Xcode 分发的构建。可以从 Homebrew 或其他预打包的存储库中获取支持 OpenMP 的编译器。*

Clang**还不**支持 OpenMP（它还没有被删除 - 它从一开始就不存在）。您可以使用 Apple 的 Grand Central Dispatch (GCD) 任务系统，也可以使用 Intel 的[线程构建模块](http://threadingbuildingblocks.org/)(TBB)。

# android - 如何在安卓设备中手动安装多种字体

> ID：13720235
> 
> 赞同：1
> 
> 时间：2012-12-05T09:44:28.577
> 
> 标签：android, fonts

**问：我想在我的 root android 设备上安装多种字体，可以吗？**

**我到目前为止所做的如下：**

1.  我植根了我的设备
2.  我能够将我的字体复制到 /system/fonts 目录
    *   使用 adb shell 命令
3.  我重新启动了设备，以便在我的 IME keboard 应用程序中获得字体的效果

**结果：**我无法让字体正常工作。

**使用的字体是：**

1.  古吉拉特语的 Shruti
2.  印度语的梵文

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T09:52:08.840

Copy the .ttf file to the sd card and click on the file in file manager to install it. It should work.

# php - PHP 尝试使用计算机名而不是登录名登录 MSSQL（Windows 身份验证）

> ID：13720237
> 
> 赞同：3
> 
> 时间：2012-12-05T09:44:32.320
> 
> 标签：php, sql-server-2005

我正在尝试使用 windows 身份验证与我公司的 MSSQL 服务器建立连接，但它失败了，因为它试图使用我的计算机名而不是我的登录 ID 作为登录名。使用 MS SQL Server Management 登录时，Windows 身份验证工作正常，但不能使用以下 PHP 代码：

```
<?php
// Server in the this format: <computer>\<instance name> or 
// <server>,<port> when using a non default port number
$serverName = "xxx";
$connectionInfo = array( "Database"=>"xxx");

/* Connect using Windows Authentication. */
$conn = sqlsrv_connect( $serverName, $connectionInfo);

if( $conn ) {
     echo "Connection established.<br />";
}else{
     echo "Connection could not be established.<br />";
     die( print_r( sqlsrv_errors(), true));
}

// 
?> 
```

我得到的打印输出如下：

> [Microsoft][SQL Server Native Client 11.0][SQL Server]用户 'xxx\T2002197$' 登录失败。) )

T2002197 是我的计算机名，而不是我的登录 ID，所以它当然会失败。我该如何解决这个问题？我正在使用 WAMP。编辑了一些信息，替换为“xxx”

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-05T10:06:03.780

啊啊问题解决了！我更改了我的 WAMP 服务的设置（在 Windows 中打开 service.msc）并确保该服务登录了正确的帐户。现在可以了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T09:53:14.490

该手册说，默认情况下，连接使用的是 Windows 身份验证，而不是 SQL Server 身份验证。

要绕过这一点，您需要在`$connectionInfo`数据中提供 uid 和 pwd 选项。

查看手册；

[http://php.net/sqlsrv_connect](http://php.net/sqlsrv_connect)

[http://msdn.microsoft.com/en-us/library/ff628167.aspx](http://msdn.microsoft.com/en-us/library/ff628167.aspx)

# string - 将路径转换为字符串 bash

> ID：13720241
> 
> 赞同：0
> 
> 时间：2012-12-05T09:44:49.113
> 
> 标签：string, bash, path

我想将多个文件路径作为字符串放在 bash 脚本中，这样我就可以将此字符串传递给另一个程序。当我连接这些文件路径时，我收到错误：没有这样的文件或目录。Bash 必须将此文件路径作为字符串而不是文件...

我以这种方式连接：

```
all=""
for path in $dir/*; do
    filePath="$path/file.txt"
    $all="$all I=$filePath"
done

echo $all 
```

我怎样才能得到这个输出？

```
I=first/file.txt I=second/file.txt etc. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T09:59:57.997

只是您的语法错误：

```
all=""
for path in $dir/*; do
    filePath="$dir/file.txt"
    all="$all I=$filePath"    #without $
done
echo $all 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T10:04:26.763

也许你打算使用`path`？并且不要在作业中使用 $ 作为前缀。

```
all=""
for path in $dir/*; do
    filePath="$path/file.txt"
    all="$all I=$filePath"
done
echo $all 
```

# io-redirection - 在 C shell 中将标准错误重定向到标准输出

> ID：13720246
> 
> 赞同：69
> 
> 时间：2012-12-05T09:45:01.680
> 
> 标签：io-redirection, csh

当我在 中运行以下命令时`csh`，我什么也没得到，但它在`bash`. 是否有任何等效`csh`项可以将标准错误重定向到标准输出？

```
somecommand 2>&1 
```

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2012-12-05T09:49:09.117

`csh`Shell 从未因其在重定向过程中操纵文件句柄的广泛能力而闻名。

您可以使用以下命令将标准输出和错误重定向到文件：

```
xxx >& filename 
```

但这并不是您所追求的，将标准错误重定向到*当前*标准输出。

* * *

但是，如果您的底层操作系统在文件系统中公开了进程的标准输出（就像 Linux 对`/dev/stdout`.

```
xxx >& /dev/stdout 
```

这将强制标准输出*和*标准错误都到与当前标准输出相同的位置，有效地与`bash`重定向一样，`2>&1`.

请记住，这不是一项`csh`功能。*如果您在不*将标准输出公开为文件的操作系统上运行，则不能使用此方法。

* * *

但是，还有另一种方法。如果使用 将两个流发送到*管道*，则可以将其合并为一个`|&`，然后您需要做的就是找到一个将其标准输入写入其标准输出的管道组件。万一你不知道这样的事情，`cat`如果你不给它任何论据，那正是这样做的。*因此，在这种特定*情况下，您可以通过以下方式实现您的目标：

```
xxx |& cat 
```

* * *

当然，也没有什么可以阻止您*在*脚本中运行`bash`（假设它在系统上的某个地方）以提供附加功能。然后，您可以使用该 shell 的丰富重定向来处理可能难以解决的更复杂的情况。*`csh``csh`*

 *让我们更详细地探讨一下。首先，创建一个可执行文件`echo_err`，将字符串写入`stderr`：

```
#include <stdio.h>
int main (int argc, char *argv[]) {
    fprintf (stderr, "stderr (%s)\n", (argc > 1) ? argv[1] : "?");
    return 0;
} 
```

然后是一个控制脚本`test.csh`，它将在行动中显示它：

```
#!/usr/bin/csh

ps -ef ; echo ; echo $$ ; echo

echo 'stdout (csh)'
./echo_err csh

bash -c "( echo 'stdout (bash)' ; ./echo_err bash ) 2>&1" 
```

`echo`PID 的 和很`ps`简单，因此您可以确保它`csh`正在运行此脚本。当您使用以下命令运行此脚本时：

```
./test.csh >test.out 2>test.err 
```

（初始重定向是在开始运行脚本`bash` *之前* 设置的），然后检查文件，您会看到：`csh``out/err`

```
test.out:
    UID     PID    PPID  TTY        STIME     COMMAND
    pax    5708    5364  cons0      11:31:14  /usr/bin/ps
    pax    5364    7364  cons0      11:31:13  /usr/bin/tcsh
    pax    7364       1  cons0      10:44:30  /usr/bin/bash

    5364

    stdout (csh)
    stdout (bash)
    stderr (bash)

test.err:
    stderr (csh) 
```

您可以在那里看到该`test.csh`进程*正在*`bash`C shell 中运行，并且从那里调用为您提供`bash`了重定向的全部功能。

`2>&1`命令中的很`bash`容易让您将标准错误重定向到*当前*标准输出（根据需要），而无需事先知道标准输出当前的去向。

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2014-01-25T01:04:31.783

我反对上述答案并提供我自己的答案。`csh`确实有这种能力，它是如何完成的：

```
xxx |& some_exec # will pipe merged output to your some_exec 
```

或者

```
xxx |& cat > filename 
```

或者，如果您只是希望它合并流（到标准输出）而不是重定向到文件或 some_exec：

```
xxx |& tee /dev/null 
```

* * *

## 回答 #3

> 赞同：39
> 
> 时间：2014-01-23T16:05:39.417

正如paxdiablo所说，您可以使用`>&`重定向stdout和stderr。但是，如果您希望它们分开，您可以使用以下内容：

```
(command > stdoutfile) >& stderrfile 
```

...如上所示，将 stdout 重定向到 stdoutfile 并将 stderr 重定向到 stderrfile。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-02-27T18:58:52.450

```
 xxx >& filename 
```

或者这样做以查看屏幕上的所有内容并将其转到您的文件中：

```
 xxx | & tee ./logfile 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-11-07T13:24:29.637

刚刚呢

```
xxx >& /dev/stdout 
```

？？？

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2014-02-13T16:42:33.730

我认为这是 csh 的正确答案。

```
xxx >/dev/stderr 
```

请注意，大多数 csh 在现代环境中实际上是 tcsh：

摇滚乐>`ls -latr /usr/bin/csh`

lrwxrwxrwx 1 root root 9 2011-05-03 13:40 /usr/bin/csh -> /bin/tcsh

使用反引号嵌入语句将其描述如下：

```
echo "`echo 'standard out1'` `echo 'error out1' >/dev/stderr` `echo 'standard out2'`" | tee -a /tmp/test.txt ; cat /tmp/test.txt 
```

如果这对您有用，请提高到 1。其他建议不适用于我的 csh 环境。*

# javascript - IE7 - 防止无响应的脚本错误

> ID：13720248
> 
> 赞同：0
> 
> 时间：2012-12-05T09:45:04.850
> 
> 标签：javascript, jquery

以下代码用作我正在构建的应用程序的可视过滤器。基本上，当用户在 id 为“过滤器”的文本框中输入内容时，下面的代码会运行以隐藏匹配的内容。

```
$('#filter').keyup(function() {
        delay(function(){
            $(".patient:not(:contains('" + $('#filter').val() + "'))").fadeOut();
            $(".patient:contains('" + $('#filter').val() + "')").fadeIn();
        }, 300 );
        }); 
```

该代码在 Firefox 和 Chrome 中运行良好，但在 IE7 中发生了我不喜欢的两件事：-

1) 选定的 div 不会淡出/淡入 - 它们只是出现.. 2) 有时，我从 IE 收到一个错误，即脚本花费的时间过长并且可能变得无响应。

关于问题 2，我读过将控制权返回给浏览器（再次可能使用超时）可能会阻止该问题，但我不确定是否可以使用我的代码或如何做到这一点。

你们能帮忙吗？

（PS - 作为记录，我必须在我的组织中使用 IE7。不好，我知道，但我对此无能为力，以防你的解决方案涉及更改浏览器 :)）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T10:26:32.477

我设法修复它并防止错误。也许我只是对浏览器要求太多，所以我将代码更改如下：-

```
$('#filter').keyup(function() {
        delay(function(){
            $(".patient").hide();
            $(".patient:contains('" + $('#filter').val() + "')").fadeIn();
        }, 300 );
        }); 
```

这现在非常完美。

# jsf - 带有 ajax 的 Commandlink 仅在第二次单击时有效

> ID：13720249
> 
> 赞同：4
> 
> 时间：2012-12-05T09:45:08.907
> 
> 标签：jsf

我想做的只是一个简单的注销功能。主页面会调用模板页面；由标题和内容组成。标题包含注销按钮。页面中有两种形式，一种在标题中（注销按钮），一种在内容中（几个按钮、链接等）。

我的问题是第一次单击注销链接时页面刷新，并且只有在第二次单击后才能继续。当我在内容表单中包含 primefaces 或 ajax 代码时，问题开始出现。当我删除该特定代码时，注销会按预期工作。

主模板中的注销表单`templateUser.xhtml`：

```
<h:form id="logout">
    <h:commandLink action="#{tenantController.customLogout(e)}"
        id="logoutBtn" immediate="true" value="Logout" />
</h:form> 
```

支持bean：

```
public String customLogout(ActionEvent e) {
    return "login.xhtml";
} 
```

仅供参考：customLogout 方法也包含会话销毁，但我只是将页面重定向放在这里。

在模板客户端中，模板被指定为：

```
<ui:composition template="/templateUser.xhtml"> 
```

至于JSF库，目前使用jsf 2.0

我尝试过的解决方案：

*   `immediate="true"`
*   `id`为表单和commandLink（模板表单和内容表单）放置
*   使用 primefaces ( `<p:commandLink>`with ajax false ==> this returb to the previous page; backed bean中的方法没有运行。

以下是我在这里尝试的几个链接：

*   [未调用 commandButton/commandLink/ajax 操作/侦听器方法或未更新输入值](https://stackoverflow.com/questions/2118656/hcommandlink-hcommandbutton-is-not-being-invoked)
*   [如何防止在单击 <h:commandLInk> 时刷新页面](https://stackoverflow.com/questions/12624159/how-can-i-prevent-page-refresh-on-click-of-hcommandlink)
*   [JSF PrimeFaces p:commandLink 不会重定向到新页面？](https://stackoverflow.com/questions/4900531/jsf-primefaces-pcommandlink-wont-redirect-to-new-page)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T11:56:29.090

> *当我在内容表单中包含 primefaces 或 ajax 代码时，问题开始出现。当我删除该特定代码时，注销会按预期工作。*

您的问题是由第 7 点引起的，如[commandButton/commandLink/ajax action/listener method not invoked or input value not updated](https://stackoverflow.com/questions/2118656/hcommandlink-hcommandbutton-is-not-being-invoked)中所述。`<f:ajax>`当您使用并执行包含所有其他表单的更新来触发 ajax 请求时，所有其他表单都将失去其视图状态。这导致第一次提交将始终“什么都不做”，但下一次提交将起作用，这与您的问题症状完全匹配。

您可以通过以下方式之一解决此问题：

1.  在`<f:ajax render>`. 您可以指定多个客户端 ID 以空格分隔。例如

    ```
    <f:ajax ... render="someComponent otherComponent :loginForm" /> 
    ```

2.  使用此答案中提出的基于 JavaScript 的修复：[h:commandButton/h:commandLink 在第一次单击时不起作用，仅在第二次单击时起作用](https://stackoverflow.com/questions/11408130/jsf-commandbutton-works-on-second-click/11412138#11412138)。

# php - 解析错误：语法错误，/ultimate.twitter.feed.php 中的意外 T_FUNCTION

> ID：13720252
> 
> 赞同：1
> 
> 时间：2012-12-05T09:45:25.190
> 
> 标签：php, twitter, twitter-oauth

我在服务器上收到此错误，但同样的事情在我的本地机器上运行良好。

这是导致服​​务器错误的代码行

```
private function formattedTweet($tweet) {
        return preg_replace_callback('/{tweet:([a-z-:0-9_]+)}/i', function($match) use($tweet) {

        $dimensions = explode(':', $match[1]);

        if(!isset($tweet[$dimensions[0]]))
            return $match[0];

        $replacement = $tweet[$dimensions[0]];

        for($i = 1; $i < count($dimensions); $i++) {
            if(!isset($replacement[$dimensions[$i]]))
                return $match[0];
            else
                $replacement = $replacement[$dimensions[$i]];
        }

        return is_array($replacement) ? $match[0] : $replacement;

    }, self::option('format' . ($tweet['is_retweet'] ? '_retweet' : '')));
} 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T09:50:44.663

您很可能正试图在 5.3 之前的 PHP 版本上运行它，该版本不支持`preg_replace_callback`.

# google-maps - 自定义图标从我的谷歌地图上消失了？

> ID：13720254
> 
> 赞同：1
> 
> 时间：2012-12-05T09:45:29.857
> 
> 标签：google-maps, google-maps-api-3

谷歌地图对我来说很新，所以任何帮助都将不胜感激。

我创建了一个自定义地图宽度自定义引脚和阴影，并在单击标记时弹出一个信息窗口。

直到 2-3 天前标记消失时，这一切正常，阴影仍然显示在正确的位置？

地图标记和阴影与地图位于同一个文件夹中，因此两者都应显示，任何帮助都会得到很大帮助。

```
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>  

function initialize() {
                var latlng = new google.maps.LatLng(51.51921,-0.07828);
                var settings = {
                    zoom: 13,
                    center: latlng,
                    mapTypeControl: true,
                    mapTypeControlOptions: {style: google.maps.MapTypeControlStyle.DROPDOWN_MENU},
                    navigationControl: true,
                    navigationControlOptions: {style: google.maps.NavigationControlStyle.SMALL},
                    mapTypeId: google.maps.MapTypeId.TERRAIN};
                var map = new google.maps.Map(document.getElementById("map_canvas"), settings);

var westendImage = new google.maps.MarkerImage('images/WC1.png',
     new google.maps.Size(50, 55),
     new google.maps.Point(0,0),
     new google.maps.Point(23, 75));

                var westendShadow = new google.maps.MarkerImage('images/shadow.png',
                    new google.maps.Size(70,50),
                    new google.maps.Point(0,0),
                    new google.maps.Point(60, 48)
                );

                var westendPos = new google.maps.LatLng(51.52012, -0.13081);

                var westend = new google.maps.Marker({
                    position: westendPos,
                    map: map,
                    icon: westendImage,
                    shadow: westendShadow,
                    title:"Westend Lettings Office",
                    zIndex: 2
                });

            google.maps.event.addListener(westend, 'click', function() {
                infowindow1.open(map,westend);
            }); 
```

然后显示地图：

```
<body onload="initialize()">
<div id="map_canvas" style="width:855px; height:390px;"></div>
</body> 
```

好的，所以我已经回答了我自己的问题，谷歌已经更新了地图 api，这当然有一些错误。所以为了解决我的地图图标问题，我恢复到以前的 3.9 版。

将对 api 的调用更改为：

```
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false&v=3.9"></script> 
```

太棒了！:)

现在可以在这里找到更新的地图[https://developers.google.com/maps/documentation/javascript/](https://developers.google.com/maps/documentation/javascript/)

# javascript - JavaScript：正则表达式 CamelCase 到句子

> ID：13720256
> 
> 赞同：4
> 
> 时间：2012-12-05T09:45:39.267
> 
> 标签：javascript, regex, camelcasing

我发现[此示例](http://www.devcurry.com/2011/07/javascript-convert-camelcase-to-dashes.html)将 CamelCase 更改为破折号。我已修改代码以将 CamelCase 更改为 Sentencecase，其中包含空格而不是破折号。它工作正常，但不适用于一个单词字母，如“i”和“a”。任何想法如何合并它？

*   thisIsAPain --> 这是一个痛苦

    ```
    var str = "thisIsAPain"; 
    str = camelCaseToSpacedSentenceCase(str);
    alert(str)

    function camelCaseToSpacedSentenceCase(str)
    {
        var spacedCamel = str.replace(/\W+/g, " ").replace(/([a-z\d])([A-Z])/g, "$1 $2");
        spacedCamel = spacedCamel.toLowerCase();
        spacedCamel = spacedCamel.substring(0,1).toUpperCase() + spacedCamel.substring(1,spacedCamel.length)
        return spacedCamel;
    } 
    ```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-05T09:55:40.370

## 最后一个版本：

```
"thisIsNotAPain"
    .replace(/^[a-z]|[A-Z]/g, function(v, i) {
        return i === 0 ? v.toUpperCase() : " " + v.toLowerCase();
    });  // "This is not a pain" 
```

### 旧的解决方案：

```
"thisIsAPain"
    .match(/^(?:[^A-Z]+)|[A-Z](?:[^A-Z]*)+/g)
    .join(" ")
    .toLowerCase()
    .replace(/^[a-z]/, function(v) {
        return v.toUpperCase();
    });  // "This is a pain" 
```

```
console.log(
    "thisIsNotAPain"
        .replace(/^[a-z]|[A-Z]/g, function(v, i) {
            return i === 0 ? v.toUpperCase() : " " + v.toLowerCase();
        })  // "This is not a pain" 
);

console.log(
    "thisIsAPain"
        .match(/^(?:[^A-Z]+)|[A-Z](?:[^A-Z]*)+/g)
        .join(" ")
        .toLowerCase()
        .replace(/^[a-z]/, function(v) {
            return v.toUpperCase();
        })  // "This is a pain"
);
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T10:01:49.993

将函数的第一行更改为

```
var spacedCamel = str.replace(/([A-Z])/g, " $1"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-05T10:14:14.883

算法如下：

> 1.  为所有大写字符添加空格字符。
> 2.  修剪所有尾随和前导空格。
> 3.  第一个字符大写。

Javascript代码：

```
function camelToSpace(str) {
    //Add space on all uppercase letters
    var result = str.replace(/([A-Z])/g, ' $1').toLowerCase();
    //Trim leading and trailing spaces
    result = result.trim();
    //Uppercase first letter
    return result.charAt(0).toUpperCase() + result.slice(1);
} 
```

参考这个[链接](http://jsfiddle.net/PezjH/2/)

# python - WinSock 错误 #10055

> ID：13720262
> 
> 赞同：1
> 
> 时间：2012-12-05T09:46:00.140
> 
> 标签：python, sockets, error-handling, python-3.x, multiplatform

我在 python 中构建了客户端-服务器架构，不幸的是，最初的设计是对服务器的每个请求都由一个 TCP 连接表示，我必须以大组（20 000+）的形式发送请求，有时会发生套接字错误[`#10055`](http://support.ipswitch.com/kb/WSK-19980714-EM18.htm)。

我已经找到了如何在 python 中处理它：

```
>>> errno.errorcode[10055]
'WSAENOBUFS'
>>> errno.WSAENOBUFS
10055 
```

并构建一个能够处理该错误并重新连接的代码（当然，几乎没有时间延迟，让服务器有时间去做它必须做的任何事情）：

```
class MyConnect:
    # __init__ and send are not important here

    def __enter__(self):
        self.sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)

        # Try several reconnects
        for i in range(0,100):
            try:
                self.sock.connect((self.address, self.port))
                break

            except socket.error as e:
                if e.errno == errno.WSAENOBUFS:
                    time.sleep(1)
                else:
                    raise

        return self

    def __exit__(self, type, value, traceback):
        self.sock.close()

# Pseudocode
for i in range(0,20000):
    with MyConnect(ip,port) as c:
        c.send(i) 
```

我的问题是：

*   有没有“*好的做法*”的方法来做到这一点？
*   是`e.errno == errno.WSAENOBUFS`多平台吗？如果不是这样，如何使它成为多平台？

[**注意**：我已经在 Windows 上进行了测试，我也需要它在 Linux 上工作。]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T17:24:00.290

您正在用传出数据以及所有连接建立和终止数据包阻塞您的 TCP 堆栈。

如果您*必须*坚持这种设计，则强制每个连接都在其数据发送成功之前***逗留。***也就是说，默认情况下，`close()`套接字立即返回，进一步的传递尝试和连接断开发生在“后台”。您可以看到，在紧密循环中执行超过 20000 次以上的操作很容易使操作系统网络堆栈不堪重负。

以下将强制您的套接字`close()`挂起最多 10 秒以尝试传递数据：

```
import struct
s.setsockopt(socket.SOL_SOCKET, socket.SO_LINGER, struct.pack('ii', 1, 10)) 
```

请注意，这与 Python 不同`socket.sendall()`——它只是将所有字节传递给内核。

希望这可以帮助。

# vb.net - 关联数组，如 vb.net 中的 php

> ID：13720264
> 
> 赞同：5
> 
> 时间：2012-12-05T09:46:07.517
> 
> 标签：vb.net

在 PHP 中，我们知道使用此代码创建关联数组

```
$variable = array('0001'=>'value1', '0010'=>'value2'); 
```

并使用此代码打印所有键和值

```
foreach($variable as $key1 => $val1)
  foreach($val1 as $key2 => $val2)
    echo ("$key2 => $val2 <br />") 
```

**问题是如何在 vb.net 中执行此操作？**

据我所知，使用这个在 vb.net 中制作关联数组：

```
Dim var As New Collection
var.Add("value1", "0001")
var.Add("value2", "0010") 
```

如何像 PHP 中的 foreach 一样在 vb.net 中打印值和键？谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-05T09:58:21.800

虽然我不熟悉 PHP（不再），但我认为关联数组相当于 a`HashTable`或更现代的强类型[`Dictionary`](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx)：

```
Dim dict = New Dictionary(Of String, String)
dict.Add("value1", "0001")
dict.Add("value2", "0010") 
```

通常你会查找键：

```
Dim val2 = dict("value2") ' <-- 0010 
```

但是如果你想枚举它（效率较低）：

```
For Each kv As KeyValuePair(Of String, String) In dict
    Console.WriteLine("Key:{0} Value:{1}",kv.Key, kv.Value)
Next 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-29T10:43:08.897

```
 Dim row As Dictionary(Of String, Object)
    Dim rows As Dictionary(Of String, Object)
    row = New Dictionary(Of String, Object)
    rows = New Dictionary(Of String, Object)

    row.Add("a", 11)
    row.Add("b", 22)
    rows.Add("ab", row) 
```

# serialization - 使用 Doctrine MongoDB ODM 进行文档序列化

> ID：13720275
> 
> 赞同：2
> 
> 时间：2012-12-05T09:46:30.433
> 
> 标签：serialization, zend-framework2, doctrine-odm, doctrine-mongodb

我正在尝试通过读取文档的元数据来[编写一个处理文档序列化的类。](https://github.com/dibber-org/dibber/blob/14-basic-webservice/module/Dibber/src/Dibber/Document/Serializer.php#L81)[我从这个使用 Doctrine ORM 的实体的实现](https://github.com/borisguery/bgylibrary/blob/master/library/Bgy/Doctrine/EntitySerializer.php#L67)中得到启发，并对其进行了修改以匹配 Doctrine ODM 处理文档的方式。不幸的是，有些东西不能正常工作，因为一个文档永远不会被序列化超过一次，即使它被第二次引用，从而导致不完整的序列化。

例如，它为属于某个 place1（请参阅[Place 文档）的 user1（请参阅](https://github.com/dibber-org/dibber/blob/14-basic-webservice/module/Dibber/src/Dibber/Document/Place.php#L17)[用户文档](https://github.com/dibber-org/dibber/blob/14-basic-webservice/module/Dibber/src/Dibber/Document/User.php#L26)）输出此（以 json 格式）。然后它输出位置和属于它的用户，我们应该再次看到 user1 但我们没有：

```
{
  id: "505cac0d6803fa1e15000004",
  login: "user1",
  places: [
    {
      id: "505cac0d6803fa1e15000005",
      code: "place1",
      users: [
        {
          id: "505c862c6803fa6812000000",
          login: "user2"
        }
      ]
    }
  ]
} 
```

我想这可能与阻止循环引用的东西有关，但有办法解决吗？

另外，我在 ZF2 应用程序中使用它，是否有更好的方法来使用 ZF2 Serializer 来实现它？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T08:26:24.077

我已经为 DoctrineODM 编写了一个序列化程序。您可以在[http://github.com/superdweebie/DoctrineExtensions](http://github.com/superdweebie/DoctrineExtensions)中找到它- 查看`lib/Sds/DoctrineExtensions/Serializer`.

如果您使用的是 zf2，那么您可能还喜欢[http://github.com/superdweebie/DoctrineExtensionsModule](http://github.com/superdweebie/DoctrineExtensionsModule)，它配置 DoctrineExtensions 以在 zf2 中使用。

要使用该模块，请使用 composer 安装它，就像安装任何其他模块一样。然后将以下内容添加到您的 zf2 配置中：

```
'sds' => [
    'doctrineExtensions' => [
        'extensionConfigs' => [
            'Sds\DoctrineExtensions\Serializer' => null,
        ),
    ),
), 
```

要获取序列化程序，请使用：

```
$serializer = $serivceLocator->get('Sds\DoctrineExtensions\Serializer'); 
```

要使用序列化程序：

```
$array = $serializer->toArray($document)
$json = $serializer->toJson($document)

$document = $serializer->fromArray($array)
$document = $serializer->fromJson($json) 
```

如果您想使用它们，还有一些额外的注释可用于控制序列化：

```
@Sds\Setter - specify a non standard setter for a property
@Sds\Getter - specify a non standard getter fora  property
@Sds\Serializer(@Sds\Ignore) - ignore a property when serializing 
```

这一切仍在进行中，因此任何评论/改进将不胜感激。当您遇到这些库的问题时，只需将它们记录在 github 上，它们就会得到及时解决。

最后是关于序列化嵌入文档和引用文档的说明 - 嵌入文档应该与其父文档一起序列化，而引用文档不应该。这反映了数据在数据库中的保存方式。这也意味着循环引用不是问题。

# 更新

我已经将更新推送到 Sds/DoctrineExtensions/Serializer 以便它现在可以正确处理引用。以下三（五）种方法已更新：

```
toArray/toJson
fromArray/fromJson
applySerializeMetadataToArray 
```

前两个是自我解释的——最后一个是允许应用序列化规则，而不必将数据库结果水合到文档中。

默认情况下，引用将被序列化为这样的数组：

```
[$ref: 'CollectionName/DocumentId'] 
```

引用的`$ref`风格是 Mongo 内部使用的，所以看起来很合适。给出引用的格式，期望它可以用作 REST API 的 URL。

可以通过定义这样的替代方法来覆盖默认行为`ReferenceSerializer`：

```
/**
 * @ODM\ReferenceMany(targetDocument="MyTargetDocument")
 * @Sds\Serializer(@Sds\ReferenceSerializer('MyAlternativeSerializer'))
 */
protected $myDocumentProperty; 
```

`ReferenceSerializer`lib中已经包含了一个替代方案。它是急切的序列化器——它将序列化引用，就好像它们是嵌入的文档一样。它可以这样使用：

```
/**
 * @ODM\ReferenceMany(targetDocument="MyTargetDocument")
 * @Sds\Serializer(@Sds\ReferenceSerializer('Sds\DoctrineExtensions\Serializer\Reference\Eager'))
 */
protected $myDocumentProperty; 
```

或者提供了一个替代的速记注释：

```
/**
 * @ODM\ReferenceMany(targetDocument="MyTargetDocument")
 * @Sds\Serializer(@Sds\Eager))
 */
protected $myDocumentProperty; 
```

替代`ReferenceSerializers`必须实施`Sds\DoctrineExtensions\Serializer\Reference\ReferenceSerializerInterface`

另外，我清理了忽略注释，因此可以将以下注释添加到属性中，以便对序列化进行更细粒度的控制：

```
@Sds\Serializer(@Sds\Ignore('ignore_when_serializing'))
@Sds\Serializer(@Sds\Ignore('ignore_when_unserializing'))
@Sds\Serializer(@Sds\Ignore('ignore_always'))
@Sds\Serializer(@Sds\Ignore('ignore_never')) 
```

例如，设置`@Sds\Serializer(@Sds\Ignore('ignore_when_serializing'))`email 属性 - 这意味着可以将电子邮件发送到服务器进行更新，但永远不能将其序列化到客户端以确保安全。

最后，如果您没有注意到，sds 注释支持继承和覆盖，因此它们可以很好地处理复杂的文档结构。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-05-13T04:42:31.107

将 Doctrine ODM 文档转换为数组或 JSON 的另一种非常简单、独立于框架的方法 - [http://ajaxray.com/blog/converting-doctrine-mongodb-document-tojson-or-toarray](http://ajaxray.com/blog/converting-doctrine-mongodb-document-tojson-or-toarray)

该解决方案为您提供了一个为您的 ODM 文档提供`toArray()`和功能的特征。`toJSON()`在`use`您的 Document 中设置特征后，您可以执行以下操作 -

```
<?php
// Assuming in a Symfony2 Controller
// If you're not, then make your DocmentManager as you want
$dm = $this->get('doctrine_mongodb')->getManager();
$report = $dm->getRepository('YourCoreBundle:Report')->find($id);

// Will return simple PHP array
$docArray = $report->toArray();

// Will return JSON string
$docJSON = $report->toJSON(); 
```

顺便说一句，它只适用于 PHP 5.4 及更高版本。

# security - 将 CCtray 与 Jenkins 一起使用，同时启用安全性（使用 HTTPS）

> ID：13720277
> 
> 赞同：6
> 
> 时间：2012-12-05T09:46:33.200
> 
> 标签：security, jenkins, continuous-integration, cctray

我将 Jenkins 服务器配置为仅使用 HTTPS 并启用了安全性。同样，我不喜欢任何未登录的人查看仪表板（即使它是空的）。在这里，我禁用了“匿名”的“读取”访问权限。

到目前为止，这一切都完全符合我的喜好:)

但是想通过例如使用“CCtray”之类的东西向远程客户端添加一些构建通知功能，我遇到了麻烦。对`https://<SERVER>/cc.xml`now 的访问仅适用于已登录的用户。我希望能够在哪里获得“匿名”通知。

可能将这些愿望结合起来有点矛盾——我想？

也许有人有更好的主意可以符合我的喜好？

可能还有其他可以使用的通知工具？？？

* * *

对于触发 sw-builds 的 Mercurial 钩子，我可以使用类似的结构

`curl --cacert <CERTIFICATE> https://<USER>:<PASSWORD>@<SERVER>/job/MyPROJECT/build?delay=0sec`

但 CCtray 中 URL 的类似方法似乎不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-10T08:57:07.497

我刚刚开始使用[cctray Jenkins 传输扩展](http://github.com/csnate/cctray-jenkins-transport)。早期，但它似乎像宣传的那样工作，并且非常愉快地连接到我们的安全服务器。

目前，唯一重要的限制似乎是，如果您的密码过期，则无法重新输入您的凭据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-04-19T18:52:12.700

对于没有匿名访问的 Jenkins 服务器，您可以使用[Catlight 构建通知工具](https://catlight.io)。您可以提供访问令牌或用户名/密码来对您的服务器进行身份验证。

如果您有自签名 ssl 证书，请确保[将其添加到受 OS 信任的](https://www.poweradmin.com/help/sslhints/ie.aspx)证书中。这样，大多数应用程序将识别它并连接到服务器而不会发出警告。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-16T18:56:26.930

添加到@MrBlueSky 的答案，您可以避免密码过期的麻烦；只需使用 Jenkins 颁发的 API 令牌代替您的密码。

1.  登录詹金斯
2.  点击您的用户名（在右上角）
3.  单击`Configure`（在左侧导航栏中）
4.  点击`Show API Token`
5.  设置 Jenkins 传输设置时使用此令牌代替您的密码

# c# - 正则表达式来验证以下场景的手机号码？

> ID：13720282
> 
> 赞同：0
> 
> 时间：2012-12-05T09:46:47.317
> 
> 标签：c#, .net, regex

> **可能重复：**
> [正则表达式，用于验证带有一个空格和一个可选特殊字符的数字](https://stackoverflow.com/questions/13717990/regular-expression-for-validating-numbers-with-one-space-and-one-optional-specia)

我必须编写一个正则表达式来验证如下所示的手机号码：

a).最多 12 个字符

b).将允许一个空间（在一个未定义的点）

c).必须以 0 开头

d).后跟一个可选的分机号码，长度最多为五位数，不包括#号

我尝试使用以下方法获得 0-12 个数字。但我不知道如何添加可选的分机号码部分（# 和后跟数字）

```
^(0(?:\d{0,11}|(?=\d* \d*$)[\d ]{0,12}))$ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T10:29:46.083

您需要为每种格式创建正则表达式。然后，您可以使用交替构造将它们组合成一个正则表达式`|`。

第一种模式是最棘手的模式，但您已经提供了一种方法来解决它，方法是自己使用零宽度正前瞻断言（这里我假设只允许**在**数字之间使用空格）：

```
(?=\d+ \d+#)[\d ]{12}#\d{5} 
```

下一个模式很简单：

```
\d{11} 
```

您对最后一个模式的定义有点模糊，但做了各种假设，我选择了这个模式：

```
\d{1,12}#\d{1,5} 
```

组合的正则表达式为：

```
^(?=\d+ \d+#)[\d ]{12}#\d{5}|\d{11}|\d{1,12}#\d{1,5}$ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T10:36:03.210

试试这个正则表达式。它将满足 a,b,c 和 d 条件

```
(?<=^)([\d\s]{13}|\d{12}|0\d{11}|\d{5})(?=$) 
```

# c# - 使用内部应用程序的模型将公共表单提交到安全的内部应用程序

> ID：13720283
> 
> 赞同：2
> 
> 时间：2012-12-05T09:46:51.013
> 
> 标签：c#, asp.net-mvc, wcf, web-services, wcf-data-services

我开发了一个 MVC4 Code First 应用程序，它位于安全的服务器环境中，它从表单中获取信息并处理它们。

一个新的要求出现了，让一些“公共/外部”表格提交给这个，我正在寻找最好的方法。

表单模型非常复杂和深刻，有很多继承。

已经指出，现有内部信息的安全性至关重要。

因此，为了将数据输入其中，我正在考虑创建一个 WCF Web 服务以将公共表单直接提交到内部，它只能提交。这样一来，我们就不会冒着通过公共网络服务器暴露现有内部数据的风险。我需要从内部使用对象模型，因为有些是相同的，尽管略有扩展。例如。我的 MasterForm 模型，所有其他表单都继承自该模型。以及主人员类型，表单中引用的不同类型的人员都继承自该类型。

这是一个好方法还是有更好的方法？

这就是我目前所在的地方......而且还没有走远。（抱歉，如果图标等不是您通常所期望的，但希望您能理解；我没有 Visio！） ![目前的想法](../Images/6b7775262c2bebb3d68d2c0fa665d13c.png)

到目前为止，在采用这种方法时，我在无法确定序列化/反序列化时遇到了继承模型的困难。我尝试在 WebService 旁边托管 WCF 数据服务来提交表单，但它不允许我使用数据服务中的模型通过 WCF 表单提交 WebService 提交。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T13:15:07.507

SOA 绝对是通往这里的道路，而 WCF 将是 .Net 世界中明智的方法。

但是，这会引发一个围绕您的模型设计的问题。跨应用程序域公开/共享“视图”（本质上是您的表单对象）可能被视为糟糕的设计。

在这种类型的场景中，我通常在我的服务层中公开相当基本的业务对象，并为每个应用程序域创建视图，将相关数据映射到每个视图模型中。即，我的 WCF 服务充当业务层，允许您的应用程序查询业务特定数据。

此外，请确保在将数据传递到 WCF 服务时使用 HTTPS / SSL。这需要 SSL 证书，但您*可以*生成自签名证书，而忽略证书错误。如果您使用的是 .Net 4.5，则可以使用新的[BasicHttpsBinding](http://msdn.microsoft.com/en-us/library/system.servicemodel.basichttpsbinding.aspx)。

# java - OpenCV Android 相机捕捉

> ID：13720284
> 
> 赞同：2
> 
> 时间：2012-12-05T09:46:51.233
> 
> 标签：java, android, opencv, capture

我想修改“OpenCV[教程](http://docs.opencv.org/doc/tutorials/introduction/android_binary_package/O4A_SDK.html#o4a-sdk)1 - 添加 OpenCV”以捕获图像并将其保存在图库中。我如何实现这一目标？

我的主要目标是捕获一个帧，对其应用 OpenCV 函数，然后将其保存在手机中。

我可以执行 OpenCV 功能，但不能执行捕获帧部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T10:06:33.197

我发现使用 Native Camera 非常棘手。最简单的方法是使用普通手机摄像头使用 Camera Intent 捕获图像。捕获图像后，您可以将它们发送到 OpenCV 进行处理和保存。

所以在伪代码中：

```
Intent i = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
startActivityForResult(i, 0);

// In your activity
public void onActivityResult(Intent data, int requestCode, int resultCode){
    // grab the image from the 'data' returned 

    // send the image to your opencv classes for processing and saving
} 
```

# ios - 如何使用没有大小的自定义字体？

> ID：13720287
> 
> 赞同：3
> 
> 时间：2012-12-05T09:47:11.150
> 
> 标签：ios

我想在整个应用程序（ios 5）中使用自定义字体。我使用了以下代码

```
[[UILabel appearance] setFont:[UIFont fontWithName:@"MyCustomFont" size:17.0]]; 
```

这样做的问题是它会覆盖所有视图中的所有字体大小。

我怎样才能避免它？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-05T09:53:51.543

为 UILabel 创建类别并在此处添加以下代码。

```
@implementation UILabel (CustomFontLabel)

-(void)awakeFromNib{
    float size = [self.font pointSize];
    self.font = [UIFont fontWithName:@"MyCustomFont" size:size];
}

@end 
```

# android - 如何检索我的 android 应用程序可以访问的当前应用程序文件夹？

> ID：13720294
> 
> 赞同：0
> 
> 时间：2012-12-05T09:47:47.313
> 
> 标签：android, android-camera, mediastore, android-mediarecorder

我正在我的应用程序中启动一个凸轮意图，并希望将图片存储在我的应用程序文件夹中的图像文件夹中。为了实现这一点，我开始像这样的凸轮意图

```
public void startCamAction(View view) {

    Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
    intent.putExtra(MediaStore.EXTRA_OUTPUT, this.getApplicationContext().getDir("images", MODE_PRIVATE));
    startActivityForResult(new Intent(MediaStore.ACTION_IMAGE_CAPTURE), TAKE_PICTURE);
} 
```

在下一个活动中，我想对这张图片做点什么，但我猜它不起作用，因为我的应用程序无权访问这个文件夹。图片存放的文件夹是

```
content:://media/external/images/media/20 
```

这不是所需的路径，我必须如何配置它才能将图片存储在我的应用程序文件夹中？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T09:56:15.183

实际上`content:://media/external/images/media/20`是一个`Uri` **不是真正的文件路径**..

所以如果你想从这个 Uri 获得真正的路径，那么你必须做类似的事情，

```
Uri uri = content:://media/external/images/media/20
String imageFile = getRealPathFromURI(uri); 
```

方法`getRealPathFromURI()`是

```
private String getRealPathFromURI(Uri contentURI) {
    Cursor cursor = getContentResolver()
               .query(contentURI, null, null, null, null); 
    cursor.moveToFirst(); 
    int idx = cursor.getColumnIndex(MediaStore.Images.ImageColumns.DATA); 
    return cursor.getString(idx); 
} 
```

**更新：**

同样从您的代码行，

```
intent.putExtra(MediaStore.EXTRA_OUTPUT, this.getApplicationContext().getDir("images", MODE_PRIVATE)); 
```

您捕获的图像存储在**应用程序的内部存储**中。因此，您可以在任何活动的应用程序中访问此目录。

要从此目录中检索文件，您可以使用简单的文件操作。

像，

```
File directory = this.getApplicationContext().getDir("images", MODE_PRIVATE); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T09:51:38.687

采用

```
Context.getExternalCacheDir()
Context.getExternalFilesDir(String type) 
```

您将获得应用程序可以访问的 SD 卡上的目录。它看起来像

```
/sdcard/Android/your.app.package.name/ 
```

并且不要忘记将其添加到您的清单中：

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T09:55:19.543

我怀疑相机可以保存到应用程序的目录中。主要是因为权利问题。

最好的是将其存储到外部存储（正如您所做的，从 URI 判断`content://media/external/images/media/20`：）

您始终可以使用此 URI 复制文件并将其保存在您的应用程序数据目录中，然后将其从外部目录中删除。

其他解决方案是指定一个自己的 ContentProvider。在此 ContentProvider 中，您可以保存文件。 [http://dharmendra4android.blogspot.be/2012/04/save-captured-image-to-applications.html](http://dharmendra4android.blogspot.be/2012/04/save-captured-image-to-applications.html)

# php - 用 Dom Document PHP 替换元素

> ID：13720295
> 
> 赞同：0
> 
> 时间：2012-12-05T09:47:50.450
> 
> 标签：php, dom, domdocument

我用 PHP Dom Document 加载一个 html 页面：

```
$doc = new DOMDocument();
@$doc->loadHTMLFile($url); 
```

我在我的页面中搜索所有元素，如果他们意识到我的情况，我需要替换`"a"`例如`<a href="blablablabla">My link is beautiful</a>``My link is beautiful`

这是我的循环：

```
$liens = $div->getElementsByTagName('a');
foreach($liens as $lien){
    if($lien->hasAttribute('href')){
        if (preg_match("/metz2/i", $lien->getAttribute('href'))) {
        //HERE I NEED TO REPLACE </a>           
        }
        $cpt++;
    }
} 
```

你有什么想法 ？建议？谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T09:59:34.640

每次我需要用 PHP 管理 DOM 时，我都会使用一个名为**PHP Simple HTLM DOM** parser 的框架。（[链接在这里](http://simplehtmldom.sourceforge.net/)）

它非常易于使用，这样的东西可能对您有用：

```
// Create DOM from URL or file
$html = file_get_html('http://www.page.com/');

// Find all links 
foreach($html->find('a') as $element) {
    //Do your custom logic here if you need it, for example this extracts the inner contents of the a-tag, and puts it freely.
    $inner = $element->innertext;
    $element->outertext($inner);
}

//To echo modified html again:
echo $html; 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-05T10:07:26.693

也可以使用[preg_replace](http://php.net/preg_replace)来完成：

```
$sText = '<a href="asdasdasd">Stackoverflow</a>';

$sText = preg_replace( '/<a.*>(.*)<\/a>/',  '$1', $sText );

echo $sText; 
```

# c# - 找不到 SQL 预定义的先决条件 (.PRQ's )

> ID：13720297
> 
> 赞同：1
> 
> 时间：2012-12-05T09:47:59.170
> 
> 标签：c#, wpf, installshield

我正在尝试使用 installshield 2010 为 WPF 应用程序创建设置。

在先决条件选项卡下，我正在添加 sqlserver msi，但在添加它之后。我无法在 installshield 预定义的先决条件 (.PRQ's ) 列表中看到 sql server 预定义的先决条件 (.PRQ's )，以便我可以检查它并在设置过程中进一步移动。

帮助高度赞赏。

# c# - “日期”是 SoapElementAttribute 的无效值

> ID：13720298
> 
> 赞同：4
> 
> 时间：2012-12-05T09:47:59.290
> 
> 标签：c#, asp.net, web-services

我有一个来自客户的 Web 服务 URL 及其 wsdl 文件。我从 wsdl 文件添加了新项目。

在wsdl中

```
<element name="ProductionDate" type="xsd:date" minOccurs="0" maxOccurs="1" nillable="true"/> 
```

在 reference.cs 文件中

```
[System.Xml.Serialization.SoapElementAttribute("ProductionDate", DataType="date",       IsNullable=true)]
public System.Nullable<System.DateTime> ProductionDate{
get {
  return this.ProductionDate;
}
set {
  this.ProductionDate= value;
}
} 
```

当我尝试创建 WebService 类实例时，它会引发异常：

> “日期”是 SoapElementAttribute 的无效值。

我改变了我的wsdl

```
[System.Xml.Serialization.SoapElementAttribute("ProductionDate", DataType="date")]
public System.DateTime ProductionDate{
get {
  return this.ProductionDate;
}
set {
  this.ProductionDate= value;
}
} 
```

所以我可以创建 webService 类实例，但是当我从客户 webservice Url 调用时，抛出异常：

> 方法 'q1:blabla 未实现：方法名称或命名空间无法识别。

那么还有其他方法可以让这个工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T12:48:05.037

我相信您必须在 .cs 文件中使用数据类型作为“日期时间”来获取 xsd 模式文件中的日期数据类型。

尝试这个

```
SoapElement(DataType = "dateTime") 
```

# c# - WPF：获取窗口中的所有命名元素

> ID：13720299
> 
> 赞同：0
> 
> 时间：2012-12-05T09:47:59.763
> 
> 标签：c#, wpf, xaml, window

在 XAML 中，我创建了`CustomWindow`. 它包含许多嵌套元素。是否存在获取所有命名元素（我通过 设置名称`x:Name="SomeName"`）、标记为公共（我通过 设置修饰符`x:FieldModifier="public"`）的简单方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T09:52:19.140

我知道没有开箱即用的方式。您必须使用 浏览 VisualTree`VisualTreeHelper`并检查它们是否具有您感兴趣的属性。

这是一种可以满足您需要的方法：

```
public static IEnumerable<FrameworkElement> FindVisualChildren(FrameworkElement obj, Func<FrameworkElement, bool> predicate)
{
    if (obj != null)
    {
        for (int i = 0; i < VisualTreeHelper.GetChildrenCount(obj); i++)
        {
            var objChild = VisualTreeHelper.GetChild(obj, i);
            if (objChild != null && predicate(objChild as FrameworkElement))
            {
                yield return objChild as FrameworkElement;
            }

            foreach (FrameworkElement childOfChild in FindVisualChildren(objChild as FrameworkElement, predicate))
            {
                yield return childOfChild;
            }
        }
    }
} 
```

用法可能类似于仅检查名称：

```
var children = FindVisualChildren((FrameworkElement)sender, o => !string.IsNullOrEmpty(o.Name)); 
```

# mysql - 如何根据某些条件从数组中获取数据

> ID：13720304
> 
> 赞同：0
> 
> 时间：2012-12-05T09:48:10.440
> 
> 标签：mysql, codeigniter

我有桌子`T1`和`T2`. 在`T1`我的列`cat_id`中，数组中的整数值由逗号分隔，例如

```
row1=1; row2=1,41; row3=40,1 
```

在`T2`我的列 id 具有单个整数值，例如

```
row1=1; row2=40; row3=41; row4=0 
```

现在取决于从`T2`我想要的数据中选择的 id `T1`。

我的问题是如何在`T1`. 我正在使用 CodeIgniter。我试过这样。

```
$this->db->select('*');
$this->db->where('status', 'yes');               
$this->db->where('cat', '1');
$this->db->like('category_id', '1');
$this->db->or_like('category_id', ',1'); 
$this->db->or_like('category_id', '1,');
$this->db->get('T1')->result_array(); 
```

但问题仍然存在，如果51,5`id = 1`中有数据，它也会被选中。`T1`我该如何解决这个问题。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T09:57:08.137

尝试使用 FIND_IN_SET

```
SELECT 
    * 
FROM T1
LEFT JOIN T2 on FIND_IN_SET(T2.id, T1.cat_id)
WHERE T1.status = 'yes' AND T2.cat = 1 
```

如果您认为额外的记录即将到来，您可以使用 INNER JOIN 而不是 LEFT JOIN。IN COdeigniter

```
$sql_query  =   "
            SELECT 
                * 
            FROM T1
            LEFT JOIN T2 on FIND_IN_SET(T2.id, T1.cat_id)
            WHERE T1.status = 'yes' AND T2.cat = 1  
            ";

$this->db->query($sql_query); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T07:57:05.983

对于上述问题，使用 in_array() 也有帮助。

```
$this->db->select('cat_id');
$row = $this->db->get('T1')->result_array();

$list = array();
foreach($row as $ind=>$val){
  $c_id = explode(',', $row['cat_id);
  if(in_array('1', $c_id){
    array_push($list, $val)
  }
} 
```

# vb.net - vb .net，选择语句，默认

> ID：13720305
> 
> 赞同：16
> 
> 时间：2012-12-05T09:48:12.650
> 
> 标签：vb.net

在 CI 中可以分配`default`给一些现有的`switch`条目：

```
switch(c) {

default :
case 1:

       break;

case 2 :

      break;   

} 
```

VB的select语句中是否有类似的可能性？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-12-05T09:53:03.117

use `case Else`，它与 c 语法的默认值相同：

```
Select [ Case ] testexpression
    [ Case expressionlist
        [ statements ] ]
    [ Case Else
        [ elsestatements ] ]
End Select 
```

例如

```
creamcake = TextBox1.Text

Select Case creamcake

Case "Eaten"
DietState = "Diet Ruined"
Case "Not Eaten"
DietState = "Diet Not Ruined"
Case Else
DietState = "Didn't check"
End Select 
```

如果您想分配多个案例，那么示例

```
Select Case agerange

Case 16 To 21
MsgBox “Still Young”
Case 50 To 64
MsgBox “Start Lying”

End Select 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T09:51:31.060

```
Select Object.Name.ToString()
    Case "Name1"
        'Do something
    Case "Name2"
        'Do something else
    Case Else
        'Do the default action
End Select 
```

This question is the exact opposite of [VB.NET Select...Case Statement Equivalent in C#](https://stackoverflow.com/questions/2447065/vb-net-select-case-statement-equivalent-in-c-sharp)

# ruby - Ruby 中的正则表达式字符串解析

> ID：13720308
> 
> 赞同：0
> 
> 时间：2012-12-05T09:48:30.900
> 
> 标签：ruby, regex

我有这个集合（点数可变，这里是 2）：

```
A 
 This is some Text belonging to A
 This also belongs to A
B 
 This should be with B
 same with this
...
... 
```

我希望它最终成为这样的字符串：

```
A This is some Text belonging to A This also belongs to A
B This should be with B same with this 
```

我的尝试是这样的：

```
answer.scan(/^([A-Z].+?(?=^[A-Z]))/m).map { |d| d.delete("\n") }.join("\n") 
```

问题是这与最后一组不匹配（您可以假设字符串以最后一组结尾）有什么想法吗？:)

编辑1：修复了一个复制错误并在[Rubular](http://rubular.com/r/7kAKDR9uRb)中尝试了一个新的正则表达式，哪种方法有效，但仍有一些不必要的匹配？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T10:25:19.587

```
text = <<EOS
A 
 This is some Text belonging to A
 This also belongs to A
B 
 This should be with B
 same with this
 variable line
EOS

text.gsub(/\s?\n\s/, ' ')

# Outputs: 
# A This is some Text belonging to A This also belongs to A
# B This should be with B same with this variable line 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T10:50:17.770

```
answer = answer
.scan(/^([A-Z].+?(?=^[A-Z]))|(^[A-Z].+?\Z)/m)
.map {|item| item.reject { |i| i.nil? } }
.map { |d| d[0].delete("\n") }
.join("\n") 
```

似乎现在可以工作......虽然可能不是最好的方法

# joomla - Joomla 的抽象管理组件

> ID：13720314
> 
> 赞同：0
> 
> 时间：2012-12-05T09:48:48.063
> 
> 标签：joomla, components, joomla2.5, joomla-extensions

我正在寻找 Joomla **2.5**的抽象管理组件。Google 将我引导[至此页面](http://extensions.joomla.org/extensions/contacts-and-feedback/surveys/9954)，Joomla 已将其删除。

你知道任何免费的组件吗？（或者我必须自己写......）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T10:15:13.787

Ĵ！如果您想组织抽象但不想召开会议，研究可能对您有帮助。 [http://extensions.joomla.org/extensions/living/education-a-culture/bibliography/5909](http://extensions.joomla.org/extensions/living/education-a-culture/bibliography/5909)

# pdf - 将 MFC CView 导出为矢量格式

> ID：13720320
> 
> 赞同：3
> 
> 时间：2012-12-05T09:49:15.307
> 
> 标签：pdf, view, printing, mfc, svg

通过我的 MFC 应用程序，我可以使用 CView 类在屏幕上打印我的 CDocument。基本上，我使用 CDC 类来编写文本并在屏幕上绘制多边形以提供我的文档的视图表示。

现在假设我想在 Microsoft Word 中使用该输出视图。

从用户的角度来看，无需开发人员的工作，我可以：

*   将我的绘图复制粘贴到 word 中：这会生成一个光栅 BMP 文件，我可以将其粘贴到 Word 中
*   打印我的绘图并使用 PDF 导出器：这会生成一个矢量 PDF 文件，该文件轻巧且可缩放，但不容易在 Word 中重复使用。

这两个轻松的解决方案很棒，因为我可以保持视图的精确布局，但有缺点（光栅或格式）

解决我的问题的另一种方法是编写 SVG 或 VML，但我不会得到相同的布局，这需要大量的工作。

是否有库可以将相同类型的 PDF 导出/打印机制转换为标准格式？

你有什么建议？非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T12:51:51.467

要将您的视图绘制到增强的元文件中，请首先阅读文档@MSDN：http: [//msdn.microsoft.com/en-us/library/427wezx1%28v=VS.80%29.aspx](http://msdn.microsoft.com/en-us/library/427wezx1%28v=VS.80%29.aspx)

这是一个示例，它是如何工作的：

```
CMetaFileDC MFDC;

CRect rect(0,0,width,height);

MFDC.CreateEnhanced(NULL,NULL,rect,NULL);
MFDC.SetBkMode(TRANSPARENT);
MFDC.SetMapMode(MM_HIMETRIC);

CDC tempDC;
tempDC.CreateCompatibleDC(&MFDC);
MFDC.SetAttribDC(tempDC.m_hDC);

// now you draw into the DC like it was your original view

HENHMETAFILE hEnhMetaFile = MFDC.CloseEnhanced();
HENHMETAFILE hEMF = NULL;
hEMF = CopyEnhMetaFile(hEnhMetaFile,"C:\\Temp\\Test.emf");
DeleteEnhMetaFile(hEMF);
DeleteEnhMetaFile(hEnhMetaFile); 
```

# cocoa - 如何归档我的可可框架

> ID：13720323
> 
> 赞同：6
> 
> 时间：2012-12-05T09:49:27.290
> 
> 标签：cocoa, frameworks, release, archive

首先对不起我的英语不好。我有一个问题，我用谷歌搜索并尝试一整天解决这个问题。

问题是我有一个可可框架项目，它构建成功并且归档成功。但是当我的项目使用这个框架时，它会显示找不到框架，找不到图像。

好的，我现在知道问题所在了，所以我搜索并找到了@executable_path和@loader_path，以使使用该框架的项目可以轻松找到路径。

但是当我将 Building Settings 中的安装目录从默认值 ~/Library/Framework 更改为 @executable_path/../Framework 时，我的框架仍然可以构建成功并存档成功。但是我找不到存档文件和存档窗口会not show.Xcode 在下面告诉我：

检查依赖项

警告：安装目录以 @executable_path 开头，但跳过安装已禁用。

提示：

当我设置@executable_path 时，Xcode 告诉我“跳过安装为 YES”，我不能这样做，因为当我设置为 YES 时，它不会为我存档。

**我该如何解决这个问题？或者我的项目有什么问题？**

非常感谢！

我的代码在这里[https://github.com/GuoJing/DoubanAPICocoa](https://github.com/GuoJing/DoubanAPICocoa)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-14T11:46:14.003

您需要使用加载器路径来识别框架路径

# git - 如何快速替换 git-svn 存储库中的 svn 关键字？

> ID：13720332
> 
> 赞同：0
> 
> 时间：2012-12-05T09:49:58.047
> 
> 标签：git, git-svn, keyword-expansion

我在`git-svn`使用 svn 关键字（如`$Revision$`,`$Id$`和`$Date$`. 虽然通常它们不必被替换，但将正确的 SVN 修订版（`git svn find-rev $(git log FILENAME | head -n1 | awk ' { print $2 } ')`如果它是实际的 SVN 提交可以通过）放入已编译的二进制文件中会很有帮助。如何轻松实现这一目标？

# android - Android 2.1：同时运行多个异步任务下载文件

> ID：13720335
> 
> 赞同：0
> 
> 时间：2012-12-05T09:50:04.423
> 
> 标签：android, android-asynctask

我创建了一个`asynctask`类以从网络上下载文件。

这是我的课：

```
private class DownloadFile1 extends AsyncTask<String, Integer, String> {

    private boolean done = false;
    @Override
    protected String doInBackground(String... sUrl) {
        done = false;
        if (isOnline() == true && sdmounted() == true) {
            try {
                URL url = new URL(sUrl[0]);  // get url
                HttpURLConnection connection = (HttpURLConnection) url.openConnection();
                connection.connect();
                InputStream in = new BufferedInputStream(connection.getInputStream());
                // url[1]= file name
                OutputStream out = (downloaded == 0) ? new FileOutputStream("/sdcard/Points.ir/" + sUrl[1])
                        : new FileOutputStream("/sdcard/Points.ir/"
                                + sUrl[1], true);
                OutputStream output = new BufferedOutputStream(out, 1024);
                byte[] data = new byte[1024];
                int count = 0;

                while (done != true && isOnline() == true && (count = in.read(data, 0, 1024)) >= 0) {
                    output.write(data, 0, count);
                    downloaded += count;
                }
                output.flush();
                output.close();
                in.close();
            } catch (Exception e) {
            }
        } else {
            networkerror = 1;
        }
        return null;
    }

    @Override
    protected void onPreExecute() 
    {
        super.onPreExecute();

    }

    @Override
    protected void onProgressUpdate(Integer... progress)
     {
        super.onProgressUpdate(progress);

    }

    @Override
    protected void onPostExecute(String result) 
    {
        super.onPostExecute(result);

    }
} 
```

当我创建此类的对象并执行时，一切正常。但是当创建 2 个对象并同时执行下载 2 个文件时，它会得到 FC ?? 我该怎么办？（对不起我的英语不好）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T09:58:26.973

AsyncTask 只能执行 1 次。因此，一旦您的 AsyncTask 正在运行，您将无法再次运行它。这就是为什么在 doInBackground 方法中有 String... 参数的原因，它可以是字符串列表。

因此，您可以使用以下内容，而不是创建两个对象：

```
DownloadFile1 task = new DownloadFile1();
task.execute("url1", "url2", "url3");   // All these urls will be processed after each other 
```

然后，在您的 AsyncTask doInBackground() 中，您可以执行以下操作：

```
@Override
protected String doInBackground(String... sUrl) {
    done = false;

    for(int i=0 ; i < sUrl.length ; i++){
        if (isOnline() == true && sdmounted() == true) {
            try {

                String currentUrl = sUrl[i];

                // continue with your code here, using currentUrl instead
                // of using sUrl[0];
            }
        }
    }

} 
```

# ios - iOS 应用程序部署显示“将安装”

> ID：13720341
> 
> 赞同：2
> 
> 时间：2012-12-05T09:50:24.993
> 
> 标签：ios, deployment

我正在尝试通过 iTunes 安装 iOS 应用程序，它会同步但显示“将安装”的消息，但该应用程序未安装。我无法找到可能是什么错误。谁能告诉我这种类型的部署问题会发生什么？

# vim - Vim Taglist：如何从开源文件中跳转到标签定义

> ID：13720344
> 
> 赞同：3
> 
> 时间：2012-12-05T09:50:40.990
> 
> 标签：vim, taglist

如果我不能从开源文件中跳转到标签定义，我想知道 Vim [Taglist有什么用处。](http://www.vim.org/scripts/script.php?script_id=273)`ctags *.f90`为了能够使用`Ctrl`+ ，我是否必须通过运行来生成单独的标签文件`]`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T10:01:35.580

是的，您需要一个*标签数据库*（通常通过运行`ctags`或等效的外部工具创建）来使用 Vim 的标签跳转/搜索功能。

由于 Vim 是一个通用的文本编辑器，它不具备任何关于个别语言的知识，而是将其委托给外部资源（本着 Unix 的“*做好一件事”的真正精神）。*

PS：有像[easytags.vim](http://www.vim.org/scripts/script.php?script_id=3114)这样的插件可以自动生成和更新标签的过程。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-05T10:39:06.490

你`taglist`在说什么？

我唯一`taglist`知道的是：

*   `taglist()`函数 ( )，在`:h taglist()`你日常的 Vim 使用中对你（或我）没有用处，

*   和[TagList](http://www.vim.org/scripts/script.php?script_id=273)插件。

你指的`:tag`是命令族吗？

`<C-]>`并`:tag`与文件一起使用`tags`以跳转到变量或方法或其他任何内容的声明。如果您没有`tags`文件，`<C-]>`则根本无法工作。

TagList 插件在后台使用`ctags`来构建文件中存在的元素的可操作列表，但它不使用`tags`文件：`ctags`直接使用命令的结果。

这意味着您可以同时完美地拥有一个工作的 TagList 插件和一个不工作的`<C-]>`（和`:tag`、、`:tselect`等）。这些是单独的功能。

# mongodb - 在主/从复制中从从属读取

> ID：13720346
> 
> 赞同：1
> 
> 时间：2012-12-05T09:50:52.993
> 
> 标签：mongodb

如果在 MongoDB 的主/从设置中将读取首选项设置为 secondaryPreferred()，从属是否参与读取？

我正在使用带有 SlaveOkay 选项的 Mongodb java 驱动程序 2.9.3，但看不到读取分配给从站？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T10:10:28.847

[SecondaryPreferred](http://api.mongodb.org/java/2.9.3/)表示如果可用则从 Slave 读取，否则从 Master 读取。对于您的问题，是的，如果可用，它应该参与阅读。

# android - 如何在android中显示阿拉伯文字？

> ID：13720347
> 
> 赞同：2
> 
> 时间：2012-12-05T09:50:52.247
> 
> 标签：android, arabic

我想在 android 中显示来自文本文件的阿拉伯文本。在某些手机和平板电脑中它似乎是正确的，但在某些 android 设备上它看起来像下面的文本：

```
ا ل س ل ا م     ع ل ي ك م 
```

请帮助我如何在每台设备上正确显示它们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T09:58:28.680

我认为这里的问题是文本没有从右到左显示。您应该尝试使用[Bidi](http://developer.android.com/reference/java/text/Bidi.html)类，或者在 XML 中指定以下内容：

```
<EditText android:layout_width="match_parent" android:layout_height="wrap_content"android:id="@+id/editText1" android:gravity="right">/EditText> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T10:01:09.387

将ttf文件复制到你的android项目文件夹中的assets文件夹中。然后在代码中设置textview的字体。

# matrix-multiplication - 矩阵链乘法错误，同时改变矩阵的大小

> ID：13720349
> 
> 赞同：3
> 
> 时间：2012-12-05T09:50:53.507
> 
> 标签：matrix-multiplication

我正在编写矩阵链乘法代码。首先，我从用户那里获取矩阵的数量及其维度，然后计算其顺序乘积，然后计算矩阵链顺序。
之后，矩阵根据矩阵链顺序相乘。
但是在改变矩阵尺寸时会发生以下错误。例如： 2 个 10*13 13*10 13*10 阶矩阵 2*3 3*2 2*2 3 个 10*13 13*10 10*13 7 个矩阵的矩阵订购12*12

矩阵不能只按 MCM 顺序执行产品的最后一步 5 个顺序矩阵 12*4 4*16 16*9 9*12 12*15 6 个顺序矩阵 19*19 和第 7 个矩阵 19*20 15 个顺序矩阵12*12

对于 3*3 3*4 4*11 11*13 13*7 7*12 的 6 个矩阵，没有完成顺序

```
 #include<stdio.h>
    #include<conio.h>
    #include<stdlib.h>
    #include<time.h>
    int n,count;
    int **a;
    double ***b,***bz;
    struct stack
    {
         int *s;
         int top;
    };
    struct stack st,ss;
   void push(struct stack *stk,int item)
   {
         if(stk->top==(3*n-2)-1)
         printf("stack overflow");
         stk->top++;
         stk->s[stk->top]=item;
   }
   int pop(struct stack *stk)
   {
         stk->top--;
         return(stk->s[(stk->top)+1]);
   }
   void init_stack(struct stack *stk)
   {
         stk->top=-1;
         stk->s=(int *) malloc((3*n-2)*sizeof(int));
   }

   void print_opt_parens(int **s,int i,int j);    
   void matrix_chain_order(int p[],int length)
   {
         int n=length-1;
         int i,j,k,l,q,**mal,**sal;
         mal=(int **) malloc((n)*sizeof(int *));
         sal=(int **) malloc((n)*sizeof(int *));
         for(i=0;i<=n;i++)
                 mal[i]=(int *) malloc((n)*sizeof(int));
         for(i=0;i<=n;i++)
                 sal[i]=(int *) malloc(n*sizeof(int));
         for(i=0;i<=n;i++)
                 mal[i][i]=0;
         for(l=2;l<=n;l++)
         {
                 for(i=1;i<=n-l+1;i++)
                 {
                       j=i+l-1;
                       mal[i][j]=9999999;
                       for(k=i;k<=j-1;k++)
                       {
                              q=mal[i][k]+mal[k+1][j]+p[i-1]*p[k]*p[j];
                              if(q < mal[i][j])
                              {
                                    mal[i][j]=q;
                                    sal[i][j]=k;
                              }
                       }        
                 }
          }
          printf("\n Optimal Number of Operations = %d",mal[1][n]);
          printf("\nprinting optimal parenthesis : \n");
          print_opt_parens(sal,1,n);
          return;
     }
     void mul(int x,int y);
     void print_opt_parens(int **s,int i,int j)
     {    int x,y,zz;

          if(i==j){
          printf(" A%d ",i);
          push(&st,i);
     } 
     else
     {
          printf(" ( ");
          push(&st,-1);
          print_opt_parens(s,i,s[i][j]);
      print_opt_parens(s,s[i][j]+1,j);
      printf(" ) ");
      x=pop(&st);
      y=pop(&st);
    mul(x,y);
    zz=pop(&st);
    if(x<0&&y<0)
                push(&st,(x+y));
    else if(x>0&&y>0)
                push(&st,-(x+y));
             else        
                push(&st,(x*y));     
     }
    }
     void init_b(double ***b)
      {
         int i,j,k;
           bz=(double ***) malloc((2*n)*sizeof(double **));
           for(i=0;i<n;i++)
                bz[i]=(double **) malloc(n*sizeof(double *));
            for(i=0;i<n;i++)
                 for(j=0;j<n;j++)
                                 bz[i][j]=(double *) malloc(n*sizeof(double));
           for(i=0;i<n;i++)
                 for(j=0;j<n;j++)
                                 for(k=0;k<n;k++)
                           bz[i][j]k]=0.0;                                             
                   count=-1;
              }
          void mul(int x,int y)
          {
              FILE *fp4,*fp5,*fp6;
             double **z,**tx,**ty;
             int m,l,i,j,k,mm,ll,kk,nn;
              if(x<0)
                 {
             mm=pop(&ss);
             nn=pop(&ss);
             tx=(double **) malloc(nn*sizeof(double));
             for(i=0;i<nn;i++)
                              tx[i]=(double *) malloc(mm*sizeof(double));

             for(i=0;i<nn;i++)
                              for(j=0;j<mm;j++){
                                               tx[i][j]=bz[count][i][j];
                                               }
             count--;
              }
               else
              {           
             mm=a[0][x-1];
             nn=a[1][x-1];
             tx=(double **) malloc(mm*sizeof(double));
             for(i=0;i<mm;i++)
                              tx[i]=(double *) malloc(nn*sizeof(double));
             for(i=0;i<mm;i++)
                              for(j=0;j<nn;j++){
                                               tx[i][j]=b[x-1][i][j];
                                               }
             } 
              if(y<0) 
           {
             kk=pop(&ss);
             ll=pop(&ss);
             ty=(double **) malloc(kk*sizeof(double));
             for(i=0;i<kk;i++)
                              ty[i]=(double *) malloc(ll*sizeof(double));

             for(i=0;i<kk;i++)
                              for(j=0;j<ll;j++){
                                               ty[i][j]=bz[count][i][j];
                                              }

             count--;
             }
              else
               {
             kk=a[0][y-1];
             ll=a[1][y-1];
             ty=(double **) malloc(kk*sizeof(double));
             for(i=0;i<kk;i++)
                              ty[i]=(double *) malloc(ll*sizeof(double));
             for(i=0;i<kk;i++)
                              for(j=0;j<ll;j++){
                                               ty[i][j]=b[y-1][i][j];

                                               }

                      }
           count++;
             bz[count]=(double **) realloc(bz[count],mm*sizeof(double *));
             for(i=0;i<mm;i++)
             bz[count][i]=(double *) realloc(bz[count][i],ll*sizeof(double));    

            for(i=0;i<kk;i++)
               {
             for(j=0;j<nn;j++)
             {                  
                              bz[count][i][j]=0;
                              for(k=0;k<mm;k++)
                              {
                                                bz[count][i][j]+=ty[i][k]*tx[k][j];
                              }
             }
            }

              fp6=fopen("g.txt","w+");

           for(i=0;i<kk;i++)
             {
                  for(j=0;j<nn;j++)
                  {

                                   fprintf(fp6,"%lf\t",bz[0][i][j]);
                  }
                  fprintf(fp6,"\n");

            }
          push(&ss,nn);
           push(&ss,kk);

           }   

         int main()
         {
              FILE *fp1,*fp2,*fp3;
              int i,j,k,l,m,p,q;
              double **c,**t;
               int *pa;
               time_t ts;
             srand(time(&ts));
            // getting no of matrcies
            printf("\n Enter the Number or matrices :");
             scanf("%d",&n);
               // allocation of space to store matrices of varying rows and columns
             a=(int **) malloc(2*sizeof(int));
            init_b(bz);
           init_stack(&st);
           init_stack(&ss);
             for(i=0;i<2;i++)
                a[i]=(int *) malloc(n*sizeof(int));

              printf("\n Enter the rows and columns \n");
             for(j=0;j<n;j++)
                 for(i=0;i<2;i++)
                                scanf("%d",&a[i][j]);

            // verifying the multiplicability of the matrices
           for(i=0;i<n-1;i++)
                if(a[1][i]!=a[0][i+1])
                {               

                                printf("The matrices %d and %d cannot be multiplied",i,i+1);
                                getch();
                                exit(0);
                }
          // actual matrix allocation                                       
b=(double ***) malloc(n*sizeof(double **));
for(i=0;i<n;i++)
                b[i]=(double **) malloc(a[0][i]*sizeof(double *));
for(i=0;i<n;i<i++)
                  for(j=0;j<a[0][i];j++)
                                        b[i][j]=(double *) malloc(a[1][i]*sizeof(double));
// data entry
for(i=0;i<n;i++)
                for(j=0;j<a[0][i];j++)
                                      for(k=0;k<a[1][i];k++)
                                                            b[i][j][k]=(double)rand()/(double)RAND_MAX;
//file opening
fp1=fopen("b.txt","w");
fp2=fopen("c.txt","w");
//print data
for(i=0;i<n;i++)
{
                for(j=0;j<a[0][i];j++)
                {
                                      for(k=0;k<a[1][i];k++){
                                                            if(fp1!=NULL)
                                                                         fprintf(fp1,"%lf\t",b[i][j][k]);
                                                            printf("%lf\t",b[i][j][k]);
                                      }
                                      printf("\n");
                                      fprintf(fp1,"\n");
                }
                printf("\n");
                fprintf(fp1,"\n");
}

// allocating space for temp, and result variable
c=(double **) malloc(a[0][0]*sizeof(double));
for(i=0;i<a[0][0];i++)
                c[i]=(double *) malloc(a[1][1]*sizeof(double));
t=(double **) malloc(a[0][0]*sizeof(double));
for(i=0;i<a[0][0];i++)
                t[i]=(double *) malloc(a[1][0]*sizeof(double));
// assigning initial value of t
for(i=0;i<a[0][0];i++)
                for(j=0;j<a[1][0];j++)
                                      t[i][j]=(double)b[0][i][j];
// sequential matrix multiplication      
for(i=1;i<n;i++)
{
                 c=(double **) realloc(c,a[0][0]*sizeof(double));
                 for(m=0;m<a[0][0];m++)
                 {
                                       c[m]=(double *) realloc(c[m],a[1][i]*sizeof(double));}
                for(j=0;j<a[0][0];j++)
                {
                                      for(k=0;k<a[1][i];k++)
                                      {
                                                            c[j][k]=0.0;
                                                            for(l=0;l<a[0][i];l++)
                                                            {                     
                                                                                  c[j][k]+=(double)t[j][l]*(double)b[i][l][k];
                                                            }
                                      }
                }
                t=(double **) realloc(t, a[0][0]*sizeof(double));
                for(m=0;m<a[0][i-1];m++)
                                       t[m]=(double *) realloc(t[m],a[1][i]*sizeof(double));
                for(m=0;m<a[0][0];m++)
                                        for(p=0;p<a[1][i];p++)
                                                              t[m][p]=c[m][p];
}
free(c);
free(t);
// print the result
for(i=0;i<a[0][0];i++)
{
                      for(j=0;j<a[1][n-1];j++){
                                              if(fp2!=NULL)
                                                           fprintf(fp2,"%lf\t",c[i][j]); 
                                              printf("%lf\t",c[i][j]);
                      }
                      printf("\n");
                      fprintf(fp2,"\n");
}
// extract the no of rows and columns
pa=(int *) malloc((n+1)*sizeof(int));
pa[0]=a[0][0];
for(i=1;i<n+1;i++)
                  pa[i]=a[1][i-1];
//Matrix Chain OPerations and Order
matrix_chain_order(pa,n+1);
fclose(fp1);
fclose(fp2);         
getch();
return 0;
 } 
```

# java - 在tomcat中启动Struts2时出现错误404

> ID：13720350
> 
> 赞同：2
> 
> 时间：2012-12-05T09:50:56.283
> 
> 标签：java, tomcat, struts2, http-status-code-404

我正在使用 Struts2 制作这个 hello world 应用程序，我遇到了一个

```
HTTP Status 404 - /HelloStruts2/ 
```

这是我的`web.xml`

```
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" version="3.0">
  <display-name>HelloStruts2</display-name>
  <welcome-file-list>
    <welcome-file>index.html</welcome-file>
    <welcome-file>index.htm</welcome-file>
    <welcome-file>index.jsp</welcome-file>
    <welcome-file>default.html</welcome-file>
    <welcome-file>default.htm</welcome-file>
    <welcome-file>default.jsp</welcome-file>
  </welcome-file-list>

   <filter>
        <filter-name>struts2</filter-name>
        <filter-class>org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter</filter-class>
    </filter>

    <filter-mapping>
        <filter-name>struts2</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>

</web-app> 
```

这是我的`struts.xml`

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE struts PUBLIC
    "-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
    "http://struts.apache.org/dtds/struts-2.0.dtd">

<struts>

    <constant name="struts.devMode" value="true" />

    <package name="basicstruts2" extends="struts-default">

        <action name="index">
            <result>WEB-INF/index.jsp</result>
        </action>

        <action name="hello" 
            class="actions.HelloWorldAction" method="execute">
            <result name="success">/HelloWorld.jsp</result>
        </action>

    </package>

</struts> 
```

这是我的应用程序中的 jar 列表

```
commons-fileupload-1.2.2.jar
commons-io-2.0.1.jar
commons-logging-api-1.1.jar
freemarker-2.3.19.jar
javassist-3.15.0-GA.jar
jstl-1.2.jar
ognl-3.0.5.jar
struts2-core-2.3.7.jar
xwork-core-2.3.7.jar 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T10:31:36.023

我已经修复它，原来我只需要`commons-lang`jar 到 may`lib`目录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T10:25:09.780

在 web.xml 中尝试以下代码段（在 struts 过滤器用户模式 ​​.action 中）

```
<filter-mapping>
    <filter-name>struts2</filter-name>
    <url-pattern>*.action</url-pattern>
</filter-mapping> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T10:22:01.990

这是罐子的问题。请检查以下罐子。我有同样的问题，我用下面的罐子解决了。

```
commons-fileupload-1.2.1
commons-io-1.3.2
commons-logging-1.0.4
commons-logging-api-1.1
freemarker-2.3.16
javassist-3.14.0-GA
log4j-1.2.16
ognl-3.0
struts2-core-2.2.1.1
xwork-core-2.2.1.1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-18T13:55:54.343

我有同样的问题，我努力解决了好几个小时，即使我放置了上面提到的合适的罐子。

我遇到了这个问题，因为 apache tomcat 的 common->lib 文件夹下有太多 jars 文件导致问题。

所以

1) 整齐地保存 jars 和依赖项 2) 检查 web-inf 的 lib 文件夹下的 jars 是否存在依赖项。3）检查包含相同类但具有不同版本的罐子。

当我卸载tomcat并重新安装它时，我找到了解决方案。

# java - Random "splitting up" of integer value in Java

> ID：13720356
> 
> 赞同：2
> 
> 时间：2012-12-05T09:51:19.267
> 
> 标签：java, random

Interesting question, hope someone has an idea how to do this in Java. I have a fixed integer value x, that I want to represent by a sum of integers x1, x2, ...,xn such that the following holds:

```
x = x1 + x2 + ... + xn; 
```

For example, lets assume n=3 and x= 10

```
10 = 5 + 3 + 2; 
```

The thing is, the x1,x2, ... xn shares should be uniformely distributed, and everytime I want to "split" the value x into the different shares, they should be different.

Anyone an idea how do could be done?

Thanks, Patrick

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T10:07:26.077

这是可行的，其想法是采用最大上限 x - (n -i) 的随机数，即第一个元素必须限制为 8，以避免下一个数字变为零。我假设需要正数，其总和为 x。

```
Random random = new Random(System.currentTimeMillis());        
for (int i = 0; i < n -1; i++) {
   int j = random.nextInt(x - (n -i)) + 1;
   System.out.println(j);
   x -= j;
}
System.out.println(x); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T10:03:15.143

未经测试，也可能效率不高，但应该可以：

```
public static int[] sumNumbers(int number, int parts) {
    int[] result = new int[parts];
    int sum = 0;
    Random random = new Random();
    for (int i = 1; i < result.length; i++) {
        // here is the uneffecient part:
        int rand = random.nextInt(number);
        if (sum + rand < number) {
            result[i] = rand;
            sum += rand;
        } else {
            i--;
        }
    }
    result[0] = number - sum;
    return result;
} 
```

这可能是无效的，因为您可能有以下情况：您将 100 拆分为 25 个数字。假设随机选择的前 5 个数字加起来接近 100，那么您必须等待其余 20 个数字随机变得非常小。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-02-22T16:43:41.390

我做了这样的事情：

```
 int remainder = 0;
  int n = 3;
  int max = 2000;

  for(int i = 1; i <= n; i++)
  {
    int ct = 0;

    if(i < n)
      ct = ThreadLocalRandom.current().nextInt(0, (max - remainder));
    else
      ct = max - remainder;

    System.out.println("Value " + i + " :" + ct);

    remainder += contCt;
  } 
```

# python - 报告实验室。具有两列的浮动文本

> ID：13720357
> 
> 赞同：7
> 
> 时间：2012-12-05T09:51:19.360
> 
> 标签：python, reportlab, pisa, xhtml2pdf

首先，我是 python、reportlab、xhtml2pdf 的新手。我已经用reportlab完成了我的第一个pdf文件，但我遇到了以下问题。

我需要两列中的大文本。

首先，我创建画布，创建故事，将大文本作为段落附加到故事中，创建框架，最后将故事添加到框架中。

```
c = Canvas("local.pdf")
storyExample = []
textExample = (""" This is a very large text Lorem Ipsum ... """)
storyExample.append(Paragraph(textExample, styleText))
frameExample = Frame(0, 0, 50, 50,showBoundary=0)
frameExample.addFromList(storyExample,c)
c.showPage()
c.save() 
```

奇迹般有效。但我需要在两列表示中显示文本。

现在文本只是流向我的框架，如：

```
|aaaaaaaaaaaaaaaaaaaa|
|bbbbbbbbbbbbbbbbbbbb|
|cccccccccccccccccccc|
|dddddddddddddddddddd| 
```

但我需要这样：

```
|aaaaaaaaa  bbbbbbbbbb|
|aaaaaaaaa  cccccccccc|
|bbbbbbbbb  cccccccccc|
|bbbbbbbbb  dddddddddd| 
```

我希望你明白我想说什么。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-06T18:31:18.817

这可以使用`BaseDocTemplate`和来完成`Frame`，您可以[在此处](http://code.activestate.com/recipes/123612-basedoctemplate-with-2-pagetemplate/)阅读。我将该收据修改为仅使用两帧布局：

```
from reportlab.platypus import BaseDocTemplate, Frame, Paragraph, PageBreak, PageTemplate
from reportlab.lib.styles import getSampleStyleSheet
import random

words = "lorem ipsum dolor sit amet consetetur sadipscing elitr sed diam nonumy eirmod tempor invidunt ut labore et".split()

styles=getSampleStyleSheet()
Elements=[]

doc = BaseDocTemplate('basedoc.pdf',showBoundary=1)

#Two Columns
frame1 = Frame(doc.leftMargin, doc.bottomMargin, doc.width/2-6, doc.height, id='col1')
frame2 = Frame(doc.leftMargin+doc.width/2+6, doc.bottomMargin, doc.width/2-6, doc.height, id='col2')

Elements.append(Paragraph(" ".join([random.choice(words) for i in range(1000)]),styles['Normal']))
doc.addPageTemplates([PageTemplate(id='TwoCol',frames=[frame1,frame2]), ])

#start the construction of the pdf
doc.build(Elements) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-06T14:35:14.243

如果您想在普通的 ReportLab 中执行此操作，您必须自己找出在哪里中断段落。如果您改为使用 Platypus 来设置文档类，则可以指定在页面上放置文本的框架，框架的顺序将决定内容流向的位置。当段落到达页面左侧第一帧的末尾时，内容会自动流入下一帧，您可以将其定位在页面右侧以达到您想要的效果。

# javascript - Style nested scrollbar with JQuery

> ID：13720358
> 
> 赞同：2
> 
> 时间：2012-12-05T09:51:21.183
> 
> 标签：javascript, jquery, html, scrollbar

I would like to style this two scrollbars using a jquery plugin or a JS library.

This is the HTML code:

```
<div id="container">
  <div class="fixedHeightContainer">
      <div class="fixedHeightContent">
       Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nunc ut mi nunc, sit amet fermentum nisi. Nulla vitae felis eros. Pellentesque viverra arcu ac metus lacinia a tincidunt quam sodales. Vestibulum ac velit at nulla tincidunt semper non et orci. Cras a erat eros. Vestibulum vitae felis nulla, at vehicula augue. Nulla eu tellus quam. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Proin massa augue, fringilla sit amet scelerisque quis, sagittis id erat. Praesent semper nulla quis neque blandit at sagittis felis luctus. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent vel nisl erat. Phasellus vitae libero erat. Aenean tortor ligula, porta sit amet mattis a, sagittis vel turpis.
      </div>
      Phasellus in aliquet quam. Nullam vitae aliquet metus. Praesent libero mi, gravida eu iaculis non, bibendum molestie neque. Integer hendrerit nulla quis arcu bibendum posuere. Pellentesque aliquet nisl quis magna rhoncus eget laoreet dui vehicula. Etiam dapibus dui id lectus gravida vestibulum porttitor dolor ornare. Maecenas vitae risus quis nisl cursus lobortis. Proin accumsan adipiscing varius.
    </div>
</div> 
```

And the CSS code:

```
.fixedHeightContainer {
  height: 250px;
  width:250px; 
}

.fixedHeightContent {
  height:250px;
   overflow:auto;
}

#container {
    width:300px;
    height: 300px;
    overflow: auto;
} 
```

The situation is described in this example: [http://jsfiddle.net/AWtnd/](http://jsfiddle.net/AWtnd/).

I have already tried these two solutions without success:

1.  using this JQuery plugin called **"JQuery custom content scroller"**: [http://manos.malihu.gr/jquery-custom-content-scroller/](http://manos.malihu.gr/jquery-custom-content-scroller/) but does not support nested scrollbar.
2.  using **jscrollpane** but i can't set "only vertical scrollbar".

What is the best solution to solve this problem? Thanks.

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-05T09:55:41.727

试试这个：[jQuery 自定义滚动条](http://manos.malihu.gr/tuts/jquery_custom_scrollbar.html)，它工作得非常好。

# sql - 编写 PostgreSQl 函数的更好方法

> ID：13720365
> 
> 赞同：1
> 
> 时间：2012-12-05T09:51:41.013
> 
> 标签：sql, postgresql

这是我从 MS SQLServer 转换为 PostgreSQL 的存储过程。有没有更好的方法在 Postgres 中编写它。还有什么应该是最佳实践？任何帮助将不胜感激。

```
create or replace function GenSerialNo_SP1(tname character varying) returns AS $$

--declare @PK bigint
declare totalRec bigint;
declare getRec bigint;
Begin

    --set @PK = 1
    set totalRec=-1;

    for getRec inselect coalesce(primary_key,0) from STD_SERIAL_NOS 
   where table_name = tname
    loop
    open  getRec;
    fetch next from getRec into totalRec;
    close getRec;
    deallocate getRec;
    end loop;
    if totalRec = -1 then

        insert into STD_SERIAL_NOS (TABLE_NAME, PRIMARY_KEY) values (tname, 1);

    else

        update STD_SERIAL_NOS set primary_key = primary_key +1 
           where table_name = tname;

    end if;

end;
$$ language plpgsql; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T09:58:52.207

您的方法存在根本缺陷，因为数据库的读取一致性机制可能导致多个同时进程从 STD_SERIAL_NOS 读取相同的值并尝试插入/更新这些值。

在 Postgres（或 Oracle）中生成键值的正确方法是使用序列对象，并且可能使用触发器来自动填充主键列。

想一想，您使用的方法在任何数据库系统中都可能存在缺陷。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T13:00:10.387

它看起来像一个[UPSERT](https://stackoverflow.com/questions/1109061/insert-on-duplicate-update-postgresql)，但您不需要任何游标来实现它。

假设 上有一个唯一索引`STD_SERIAL_NOS.table_name`，一个（希望）正确的版本（包括处理插入时的竞争条件）将是：

```
create or replace function GenSerialNo_SP1(tname character varying) returns void
as $$
begin
  loop
   begin
     update STD_SERIAL_NOS set primary_key = primary_key +1 
        where table_name = tname;
     exit when found; -- exit loop if the row exists, otherwise insert it
     insert into STD_SERIAL_NOS (TABLE_NAME, PRIMARY_KEY)
        values(tname,1);
   exception  WHEN unique_violation THEN
     -- the insert conflicts, let's go back to the update in the next loop iteration
   end;
  end loop;

end;
$$ language plpgsql; 
```

# php - Load and create javascript loop

> ID：13720367
> 
> 赞同：0
> 
> 时间：2012-12-05T09:51:42.277
> 
> 标签：php, javascript, sql, yii

I created images slider in clear php and it was worked . but when I changed it under Yii image not loaded because : - java script block not load image numbers . - I don't know how I can load javascript block with change variables in yii like php

File :

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
 <head>
  <title>jquery sliders</title>
  <link rel="stylesheet" href="style.css" type="text/css" media="screen" />
  <script type="text/javascript">var _siteRoot='index.html',_root='index.php';</script>
  <script type="text/javascript" src="js/jquery.js"></script>
  <script type="text/javascript" src="js/scripts.js"></script>
  <script type="text/javascript" src="jquery-1.4.2.min.js"></script>

<script type="text/javascript" src="newscript.js"></script>
 </head>
 <body>

  <!--/top-->
  <div id="header"><div class="wrap">
   <div id="slide-holder">
<div id="slide-runner">
<?php
            include("samiloxide.php");
//if(!$_POST['page']) die("0");

$section=intval($_GET['section']);

$i=1;
$j=array();

$sql=mysql_query(" select * from images order by section ");

while($rr=mysql_fetch_array($sql)){
  echo    "<a href=''><img id='slide-img-$i' src='$rr[image]' class='slide' alt='' /></a>";
       $j[]=$i;

       $i=$i+1;

        }     
   ?>

    <div id="slide-controls">
     <p id="slide-client" class="text"><strong>post: </strong><span></span></p>
     <p id="slide-desc" class="text"></p>
     <p id="slide-nav"></p>

    </div>
</div>

    <!--content featured gallery here -->
   </div>
   <script type="text/javascript">
    if(!window.slider) var slider={

    };
     slider.data=[
    <?php 
  foreach($j as $value){    

echo  "   
  { 'id':'slide-img-$value',
    'client':'First one ',
    'desc':'nature beauty photography'},
   " ;
   }  
   ?>

   ];
   </script>
  </div></div><!--/header-->
 </body>
</html> 
```

Just I need to change javascript :

```
<script type="text/javascript">
        if(!window.slider) var slider={

        };
         slider.data=[
        <?php 
      foreach($j as $value){    

    echo  "   
      { 'id':'slide-img-$value',
        'client':'Some text  ',
        'desc':'image description '},
       " ;
       }  
       ?>

       ];
       </script> 
```

To work under Yii ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T10:02:43.607

尝试这个，

```
echo '<a href="#"><img id="slide-img-', $i, '" src="', $rr['image'], '" class="slide" alt="" /></a>'; 
```

# cakephp - CakePHP: managing user capabilities in wordpress way

> ID：13720368
> 
> 赞同：3
> 
> 时间：2012-12-05T09:51:47.270
> 
> 标签：cakephp, user-management, capability

I Googled for this for over 3 hours but didn't find anything helpful. Is there any `CakePHP` plugin that allows managing user roles and capabilities without building `ACL`, the wordpress way?

Why built-in CakePHP ACL does not meet my needs:

*   it's kind of overkill for not very big applications
*   Keep updating ACOS can be pain.
*   you can't use version control to track roles and capabilities changes

What I would like new plugin to be:

*   in `AppController` or somewhere else you can define array of supplied capabilities. I do not need them to be dynamic, though in wordpress that was done even without database. I don't even think capabilities should match controller methods (but maybe I am not right there)
*   when initializing roles, you can set which capabilities are true for that role
*   in view file, you can check if current user has the capability, f.e., to edit slug field, and if yes, show this field.

I am really not an authentication specialist and may sound like an ordinary wordpress fan, but to my point of view wordpress system of user management is really efficient and could be implemented in CakePHP.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T17:22:00.340

我倾向于使用 CakeDC 用户插件，它会做你想做的事。

[https://github.com/cakedc/users](https://github.com/cakedc/users)

如果您使用的是 CakePHP 2.x，请务必检查 2.0 分支

# .net - How to start the .Net framework installer silently?

> ID：13720376
> 
> 赞同：0
> 
> 时间：2012-12-05T09:52:16.847
> 
> 标签：.net, windows, winapi, silent-installer

How to make my C++ Win32 .net-framework installer silent?

I tried sfxmaker software & ussf.exe, but I get an unknown installer error.

Command line arguments /S and /SD did not work for me.

Part of the code I use:

```
if( !CreateProcess( NULL, 
    ".\\InstallationFiles\\dotnetfx 35 SP1 Full.exe /S",
    NULL,
    NULL, 
    FALSE,
    0, 
    NULL, 
    NULL, 
    &si, 
    &pi ) 
) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T10:37:52.570

你试过了`dotnetfx 35 SP1 Full.exe /?`吗？

答案是：`dotnetfx 35 SP1 Full.exe /Q`静默启动安装程序。

还要注意带有空格的长名称`CreateProcess`，考虑引用命令名称。[`CreateProcess()`参考](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682425(v=vs.85).aspx)状态：

> 如果您使用包含空格的长文件名，请**使用带引号的字符串来指示文件名的结束位置和参数的开始位置**；否则，文件名不明确。例如，考虑字符串“c:\program files\sub dir\program name”。这个字符串可以用多种方式解释。系统尝试按以下顺序解释可能性：
> 
> **c:\program.exe**文件\子目录\程序名称
> 
> **c:\程序文件\sub.exe**目录\程序名称
> 
> **c:\程序文件\子目录\program.exe**名称
> 
> **c:\程序文件\子目录\程序名称.exe**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T10:40:39.607

您可能正在寻找安静模式。`/q`. 也要小心检查返回码:)

请参阅[此 MSDN 页面](http://msdn.microsoft.com/en-us/library/ee390831.aspx)以了解更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T15:42:07.980

我明白了，谢谢大家，我的解决方案是：

if( !CreateProcess ( NULL, // 没有模块名称（使用命令行） ".\InstallationFiles\dotnetfx35SP1Full.exe /q /norestart /ChainingPackage ADMINDEPLOYMENT",... // 我只提到了 2 个参数。

也检查一下：http://msdn.microsoft.com/en-us/library/ee390831(v=vs.100).aspx[^]

注意：但是朋友你不会在桌面上看到任何改进，检查任务管理器查看它。

# android - Android sdk platforms for windows and mac are same?

> ID：13720378
> 
> 赞同：3
> 
> 时间：2012-12-05T09:52:19.277
> 
> 标签：android, android-2.2-froyo

I have android sdk updated in my windows machine. I need to shift to mac. Already I have android sdk installed for mac. Shall I copy those platforms folder from windows to mac(android-10, android-11..etc). will those be same for windows and mac or different?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T10:14:23.763

这将对您有所帮助。请[在此处查看](http://www.talkandroid.com/guides/developer/android-sdk-install-guide/)。这就是您要查找的内容。

# php - 使用连接进行代码优化

> ID：13720379
> 
> 赞同：1
> 
> 时间：2012-12-05T09:52:30.420
> 
> 标签：php, html, optimization

在我的 PHP 脚本中，我将很多 HTML 与一些 PHP/MySQL 数据混合在一起（第一个示例）。通常，我的代码看起来很乱，因为您不能将任何结构带入这种代码组合。

所以，我想知道，第二个脚本是否比第一个脚本更慢（或性能更低）？

**第一个脚本**

```
$message = <div class="label" style="width:200px; float:left; text-align:right;">Organisation:</div>   
<div class="input" style="margin-left: 210px;"><b>' . $item1[0]['organisation'] . '</b>
</div><div class="label" style="width:200px; float:left; text-align:right;">Group:</div> <div class="input" style="margin-left: 210px;"><b>' .
  $item1[0]['group'] . '</b></div><div class="label" style="width:200px; float:left; 
text-align:right;">Name:</div> <div class="input" style="margin-left: 210px;"><b>' . $item1[0]['firstname'] . ' ' . $item[0]['lastname'] . '</b></div> 
```

**第二个脚本**

```
$message  = <div class="label" style="width:200px; float:left; text-align:right;">Organisation:</div>   
$message .= <div class="input" style="margin-left: 210px;"><b>' . $item1[0]['organisation'] . '</b></div>
$message .= <div class="label" style="width:200px; float:left; text-align:right;">Group:</div> 
$message .= <div class="input" style="margin-left: 210px;"><b>' .$item1[0]['group'] . '</b></div>
$message .= <div class="label" style="width:200px; float:left; text-align:right;">Name:</div> 
$message .= <div class="input" style="margin-left: 210px;"><b>' . $item1[0]['firstname'] . ' ' . $item[0]['lastname'] . '</b></div> 
```

还是有更好的方法来处理 PHP 生成的 HTML 页面？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T10:05:29.323

可读性应始终优先于性能优化。您询问哪个更快的事实表明您实际上并未将任何性能损害追溯到相关代码。您似乎真正要问的是如何使代码更具可读性，这是可以理解的，因为代码旨在由人类阅读并由计算机执行。

在这些情况下，我的第一个建议是，当您输出大量 HTML 且仅输出一小部分 PHP 代码时，始终退出 PHP 解析器。

```
<?php
/* Put your PHP code here */
$PHP = "PHP";
?>
<p>This is some html with a little <?php echo $PHP ?> code</p> 
```

通过关闭您`PHP tags`编写大量 HTML 代码，您只需告诉 PHP 停止解析 PHP 代码并将后面的所有内容作为纯文本输出，直到`opening PHP tag`找到另一个。

另一种选择是使用不需要所有凌乱的单/双引号转义的[heredoc语法。](http://php.net/heredoc)

可以直接在字符串语法中进行变量插值，因此以下工作：

```
$string = <<<EOL
<p>This is some html with a little $PHP code</p>
EOL; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T09:53:49.170

你不会注意到两者之间的任何区别。这是 99.999% 的网站永远不需要担心的微优化。

我个人会做这样的事情：

```
<div class="label" style="width:200px; float:left; text-align:right;">Organisation:</div>   
<div class="input" style="margin-left: 210px;"><b> <?php echp $item1[0]['organisation'] ?> </b></div>
<div class="label" style="width:200px; float:left; text-align:right;">Group:</div> 
<div class="input" style="margin-left: 210px;"><b><?php echo $item1[0]['group'] ?></b></div>
<div class="label" style="width:200px; float:left; text-align:right;">Name:</div> 
```

然后，更进一步，不要使用内联样式。这将大大提高可读性和可编辑性

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T10:03:45.647

如果您真的需要输出到字符串并且想要编写干净的代码，我会使用输出缓冲。

```
ob_start()
?>
<html>
<body>
  <div></div>
</body>
</html>
<?
$message = ob_get_contents();
ob_end_clean(); 
```

但最好输出实际的 html，然后只回显 PHP 变量，如`<?=$var?>`或事件`<?php echo $var; ?>`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T10:08:14.423

同意无情。您没有性能问题，而是维护问题；-)

我建议你看看这个示例代码，看看你能做什么。

```
<form method="post" action="add_url_here">
    <label>
        Organisation:
    </label>
    <input type="text" name="organisation" value="<?php echo $item1[0]['organisation'] ?>" />

    <label>
        Group:
    </label>
    <input type="text" name="group"  value="<?php echo $item1[0]['group'] ?>" />

    <label>
        Name:
    </label>
    <input type="text" name="name"  value="<?php echo $item1[0]['name'] ?>" />
</form> 
```

和造型：

```
<style>
    label {
        width:200px; 
        float:left; 
        text-align:right;
    }

    input {
        margin-left: 210px;
    }

</style> 
```

你甚至可以这样做：

```
$message =
  '<form method="post" action="add_url_here">
    <label>
    Organisation:
    </label>
    <input type="text" name="organisation" value="' . $item1[0]['organisation'] . '" />

    <label>
    Group:
    </label>
    <input type="text" name="group"  value="' . $item1[0]['group'] . '" />

    <label>
    Name:
    </label>
    <input type="text" name="name"  value="' . $item1[0]['name'] . '" />
</form>'; 
```

# php - 比较两个矩阵（数组）php

> ID：13720381
> 
> 赞同：0
> 
> 时间：2012-12-05T09:52:33.430
> 
> 标签：php, matrix, correlation

我想用 key = text, value = integer 比较两个矩阵，它们都具有相同的键但值不同。一个值是相关性，另一个是密钥出现频率的计数器。我如何关联数据并找到最有意义的键？

我可以说 100 个具有相关性因素和如下计数的单词：

```
$relevance['google'] = 1000;
$relevance['yahoo'] = 1300;   
$count['google'] = 4
$count['yahoo'] = 2 
```

我不想看看我是否有相同的数组。我知道它们具有相同的键，但值不同。我想标准化这些值，以便我可以比较它们并找到相关性。所以可以说雅虎比谷歌更重要。而不是仅按相关性或仅按计数对它们进行排序并手动查看数据。

像规范化数据一样：使用 ($val*min)/(max-min) 将 $relevance 值从 0 到 1，对于 $count 也是如此。之后添加计数和相关性的值可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T10:05:17.493

那么你可以使用foreach吗？

```
foreach($relevance as $k => $v){
  if($relavance[$k]==$count[$k]){
  //they are equal
  }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T10:05:33.010

尝试[array_diff_assoc](http://php.net/manual/en/function.array-diff-assoc.php)。如果结果为空，则您拥有相同的数组。

# php - 使用php不显示谷歌地图

> ID：13720383
> 
> 赞同：3
> 
> 时间：2012-12-05T09:52:41.883
> 
> 标签：php, javascript, google-maps, wamp

我有一个 php 代码，它从数据库（测试）和表名 manu 获取位置信息，它是使用 wamp 中的 phpmyadmin 创建的，并使用标记在地图上显示这些位置。感知纬度和经度值中的位置详细信息。

**更新**

```
<?
$dbname            ='test'; //Name of the database
$dbuser            =''; //Username for the db
$dbpass            =''; //Password for the db
$dbserver          ='localhost'; //Name of the mysql server

$dbcnx = mysql_connect ("$dbserver", "$dbuser", "$dbpass");
mysql_select_db("$dbname") or die(mysql_error());
 ?>

 <html>
 <head>
 <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
 <style type="text/css">
  body { font: normal 10pt Helvetica, Arial; }
 #map { width: 350px; height: 300px; border: 0px; padding: 0px; }
 </style>
 <script src="http://maps.google.com/maps/api/js?v=3&sensor=false"        type="text/javascript" ></script>
 <script type="text/javascript" src="js/jquery.js"></script>
 <script type="text/javascript">

  var icon = new google.maps.MarkerImage("http://maps.google.com/mapfiles/ms/micons/blue.png",
  new google.maps.Size(32, 32), new google.maps.Point(0, 0),
  new google.maps.Point(16, 32));
  var center = null;
  var map = null;
  var currentPopup;
  var bounds = new google.maps.LatLngBounds();
  function addMarker(lat, lng, info) {
  var pt = new google.maps.LatLng(lat, lng);
  bounds.extend(pt);
  var marker = new google.maps.Marker({
  position: pt,
  icon: icon,
  map: map
  });
  var popup = new google.maps.InfoWindow({
  content: info,
  maxWidth: 300
  });

   google.maps.event.addListener(marker, "click", function() {
 if (currentPopup != null) {
   currentPopup.close();
  currentPopup = null;
  }
   popup.open(map, marker);
  currentPopup = popup;
 });
 google.maps.event.addListener(popup, "closeclick", function() {
 map.panTo(center);
  currentPopup = null;
 });
 }
 function initMap() {
 map = new google.maps.Map(document.getElementById("map"), {
 center: new google.maps.LatLng(0, 0),
  zoom: 14,
  mapTypeId: google.maps.MapTypeId.ROADMAP,
  mapTypeControl: false,
  mapTypeControlOptions: {
  style: google.maps.MapTypeControlStyle.HORIZONTAL_BAR
  },
  navigationControl: true,
  navigationControlOptions: {
  style: google.maps.NavigationControlStyle.SMALL
  }
   });

 $.getJSON('googlescript.php', function(items)
 {
 for (var i = 0; i < items.length; i++) 
 {
 (function(item) 
 {
 addMarker(item.lat, item.long, item.name + ' ' + item.desc);
 })(items[i]);
 }

 });

 center = bounds.getCenter();
  map.fitBounds(bounds);
 }

  </script>
  </head>
  <body onload="initMap()" style="margin:0px; border:0px; padding:0px;">
   <div id="map"></div>
  </body>
   </html> 
```

googlescript.php 文件代码：

```
 <?php

   $dbname            ='test'; //Name of the database
   $dbuser            =''; //Username for the db
   $dbpass            =''; //Password for the db
   $dbserver          ='localhost'; //Name of the mysql server
   $tbl_name          ='manu';

   $dbcnx = mysql_connect ("$dbserver", "$dbuser", "$dbpass");
   mysql_select_db("$dbname") or die(mysql_error());

   $query = mysql_query("SELECT * FROM manu")or die(mysql_error());

   header('Content-Type: application/json');

   $rows = array();
   while ($row = mysql_fetch_array($query))
   {
    $rows[] = $row;
   }
  echo json_encode($rows);
  exit;
   ?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T10:52:36.073

网页

```
body onload="initMap()" //you forget to close it.

div id="map" 
```

在 html 文件中进行了以下更改。

```
`script src="http://maps.google.com/maps/api/js?v=3&sensor=false"    type="text/javascript"
script type="text/javascript" src="js/jquery.js"
script type="text/javascript">
    var icon = new google.maps.MarkerImage("http://maps.google.com/mapfiles/ms/micons/blue.png",
    new google.maps.Size(32, 32), new google.maps.Point(0, 0),
    new google.maps.Point(16, 32));
    var center = null;
    var map = null;
    var currentPopup;
    var bounds = new google.maps.LatLngBounds();
    function addMarker(lat, lng, info)
    {
        var pt = new google.maps.LatLng(lat, lng);
        bounds.extend(pt);
        var marker = new google.maps.Marker(
        {
            position: pt,
            icon: icon,
            map: map
        });
        var popup = new google.maps.InfoWindow(
        {
            content: info,
            maxWidth: 300
        });

```
 google.maps.event.addListener(marker, "click", function()
    {
        if (currentPopup != null)
        {
            currentPopup.close();
            currentPopup = null;
        }
        popup.open(map, marker);
        currentPopup = popup;
    });
    google.maps.event.addListener(popup, "closeclick", function()
    {
        map.panTo(center);
        currentPopup = null;
    });
} 
```

function initMap()
{
    map = new google.maps.Map(document.getElementById("map"), {
        center: new google.maps.LatLng(0, 0),
        zoom: 14,
        mapTypeId: google.maps.MapTypeId.ROADMAP,
        mapTypeControl: false,
        mapTypeControlOptions:
        {
            style: google.maps.MapTypeControlStyle.HORIZONTAL_BAR
        },
        navigationControl: true,
        navigationControlOptions:
        {
        style: google.maps.NavigationControlStyle.SMALL
        }
    });

```
// getjson code goes here which is as below because i was unable to format it here so i wrote it downward.

center = bounds.getCenter();
map.fitBounds(bounds); 
```

}
/script>` 
```

 ``$.getJSON('googlescript.php', function(items)
{
for (var i = 0; i < items.length; i++)
{
(function(item)
{
addMarker(item.lat, item.long, item.name + ' ' + item.desc);
})(items[i]);
}

});`

我已经使用过`$.getJSON('googlescript.php',`，因此您需要创建一个`googlescript.php`文件并将下面的代码粘贴到其中。

```
`$query = mysql_query("SELECT * FROM manu")or die(mysql_error());

header('Content-Type: application/json');

$rows = array();
while ($row = mysql_fetch_array($query))
{
    $rows[] = $row;
}
echo json_encode($rows);
exit;` 
```

`?>`

现在检查它，我相信你会得到你想要的结果。不要忘记更改 jquery 路径和更改数据库连接设置，请正确放置 jquery 路径。`

# c++ - 对带有父类的子类的 Operator= 的操作

> ID：13720385
> 
> 赞同：0
> 
> 时间：2012-12-05T09:52:52.760
> 
> 标签：c++, inheritance, operator-overloading, overloading, parent

我正在做一个创建多项式计算器的作业，该计算器可以执行加法、减法、乘法和除法。当我使用提供的 main.cpp 来测试 operator= 函数时，编译器一直说：“没有找到采用‘多项式’类型的右手操作数的运算符。

这是我收到的错误：

```
main.cpp(61): error C2679: binary '=' : no operator found which takes a right-hand
operand of type 'Polynomial' (or there is no acceptable conversion)
          c:\c++ project\comp2012_assignment_3\comp2012_assignment_3\IntegerPolynomial.h(44):
          could be 'IntegerPolynomial &IntegerPolynomial::operator =(const IntegerPolynomial &)'
          while trying to match the argument list '(IntegerPolynomial, Polynomial)' 
```

以下是我的代码的一部分：

主文件

```
#include <iostream>
#include <fstream>
#include <sstream>
#include <cstdlib>
#include <cmath>
#include <string>
#include "Polynomial.h"
#include "IntegerPolynomial.h"

using namespace std;

template <typename T>
T readPoly(const char* filename) {
    ifstream fin(filename, ifstream::in);
    T temp;
    fin >> temp;
    fin.close();
    return (temp); 
}
int main(void)
{
    Polynomial a = readPoly<Polynomial>("input1.txt");
    Polynomial b = readPoly<Polynomial>("input2.txt");
    Polynomial d;

    b.sort();
    cout << "sorted b=" << b << endl;

    IntegerPolynomial ia = readPoly<IntegerPolynomial>("input1.txt");
    IntegerPolynomial ib = readPoly<IntegerPolynomial>("input2.txt");

    int iarry[5] = {1, 3, 5, 9, 10};
    IntegerPolynomial id(iarry, 5);

    cout << "ia=" << ia <<endl;
    cout << "ib=" << ib <<endl;
    cout << "id=" << id <<endl;

    d=b;
    cout << "d=b=" << d << endl;
    d=ib;
    cout << "d=ib=" << d << endl;
    id=b;
    cout << "id=b=" << id << endl;
    d=a-b;

    return 0;
} 
```

多项式.h

```
#ifndef POLYNOMIAL_H
#define POLYNOMIAL_H

#include <iostream>
#include <fstream>
#include <sstream>
#include <string>
#include <list>
#include <cstdlib>
#include <cmath>
using namespace std;

class Polynomial
{
  public:
    Polynomial& operator=(const Polynomial& a);
  protected:
    std::list<Term> polyList;
};
#endif 
```

多项式.cpp

```
#include <iostream>
#include <fstream>
#include <sstream>
#include <iomanip>
#include <cstdlib>
#include <cmath>
#include <string>
#include <list>
#include "Polynomial.h"
// Assignment operator
Polynomial& Polynomial::operator=(const Polynomial& a) {
    polyList.clear();
    for (std::list<Term>::const_iterator a_iterator = a.polyList.begin(), end = a.polyList.end(); a_iterator != end; ++a_iterator) {
        const Term curr_Term = *a_iterator;
        polyList.push_back(curr_Term);
    }
    return *this;
} 
```

整数多项式.h

```
#ifndef INTEGERPOLYNOMIAL_H
#define INTEGERPOLYNOMIAL_H

#include <iostream>
#include "Polynomial.h"
using namespace std;
class IntegerPolynomial : public Polynomial{
  public:
    // Default constructor 
    IntegerPolynomial();
);
#endif 
```

整数多项式.cpp

```
#include "IntegerPolynomial.h"

using namespace std;

// Default constructor 
IntegerPolynomial::IntegerPolynomial() {
}
// print the polynomial a in decreasing order of exponent
void IntegerPolynomial::print(ostream& os) const {
    os << toString();
} 
```

注意：我试图只包含与问题相关的代码部分，因为我的代码的整个文件太长了。

实际上是什么问题，因为在 main.cpp

```
d=b;
cout << "d=b=" << d << endl;
d=ib;
cout << "d=ib=" << d << endl; 
```

工作正常。

这条线出现问题。

```
id=b; 
```

是否存在与函数定义相关的问题以及解决方案是什么。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T10:01:09.723

你`Polynomial::operator=`是私人的，它应该是：

```
class Polynomial
{
public:
    Polynomial& operator=(const Polynomial& a);
protected:
    std::list<Term> polyList;
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T10:18:29.677

问题是赋值运算符并不是真正继承的——如果一个类没有声明一个赋值运算符，编译器会隐式声明一个（参见[over.ass]）。类的隐式声明的复制赋值运算符`X`具有签名`X& operator= (const X&)`。

因此，您的代码`id = b`调用（隐式声明的）赋值运算符 for `IntegerPolynomial`，它期望`IntegerPolynomial`右侧有另一个。

如果需要将任意`Polynomial`s赋值给`IntegerPolynomial`s，则必须显式定义这样的赋值运算符。我认为无论如何您都必须这样做：您通常如何将一般多项式分配给积分多项式？

# c# - 如何在 VS 2012 中获取 Crystal Reports？

> ID：13720386
> 
> 赞同：4
> 
> 时间：2012-12-05T09:52:59.780
> 
> 标签：c#, .net, crystal-reports

我对 VS 2012 有疑问，即我想创建一个报告，例如特定学生的结果。我进行了很多搜索，然后我才知道我必须安装 SAP Crystal 报表，并且我已经这样做了。但是工具箱里仍然没有水晶报表，只有两个项目名为：报表、报表向导。有人可以帮我弄这个吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T10:05:26.423

VS2012 的 CrystalReports 直到 2013 年第一季度末才可用。

[您可以在此处](http://scn.sap.com/community/crystal-reports-for-visual-studio/blog/2012/09/20/sap-crystal-reports-developer-version-for-microsoft-visual-studio--2012-support-update)阅读有关此内容的更多信息

> 我们的开发团队正在努力更新 SAP Crystal Reports 以支持 Visual Studio 2012 和 .NET Framework 4.5，并计划在 2013 年第一季度末推出此更新。当然，日期可能会根据产品准备情况发生变化。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T12:07:42.427

适用于 Microsoft Visual Studio 的 SAP Crystal Reports Developer 版本现已推出

下载[http://scn.sap.com/docs/DOC-35074](http://scn.sap.com/docs/DOC-35074)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-21T21:40:28.827

[旧链接](http://scn.sap.com/docs/DOC-35074)>> 下载链接已过期

新的下载链接是：

[从这里下载](http://www.sap.com/solution/sme/software/analytics/crystal-visual-studio/index.html)>> 来自原始网站

或直接从

[这里](http://downloads.businessobjects.com/akdlm/cr4vs2010/CRforVS_13_0_5.exe)291 MB

# javascript - jQuery滑块开始位置

> ID：13720389
> 
> 赞同：0
> 
> 时间：2012-12-05T09:53:10.153
> 
> 标签：javascript, jquery, slider, slide.js

前段时间我从某个网站复制了一些滑块代码。现在找不到了。代码是：

```
slides.min.jquery.js

$(function(){
    $('#slides').slides({
        preload: true,
        play: 12000,
        pause: 8000,
        hoverPause: true,
        generatePagination: false
    });
}); 
```

滑块效果很好。但是，我现在的问题是，我希望滑块从随机滑动位置开始。例如，可以随机从第 5 张幻灯片开始，也可以从第 3 张幻灯片开始，也可以从第 4 张幻灯片开始；每次刷新。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T09:56:00.107

看来您使用[slide.js](http://www.slidesjs.com/#examples)`start`文档指定您可以通过在设置中包含该属性来设置开始幻灯片。

```
$(function(){
    var EXCLUSIVE_UPPER_BOUNDS = 5; //adjust for your app
    $('#slides').slides({
        preload: true,
        play: 12000,
        pause: 8000,
        hoverPause: true,
        generatePagination: false,
        start: Math.floor(Math.random()* EXCLUSIVE_UPPER_BOUNDS)
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T09:55:24.930

在每次页面加载时以随机顺序回显滑块滑动。或者你 DOM 操作以随机顺序对它们进行排序并将它们再次放置在它们的父容器中。然后使用您的 javascript 启动滑块。

例如。：

```
<div id='slides' >
 <img src='image_a' />
 <img src='image_b' />
 <img src='image_c' />
 <img src='image_d' />
</div> 
```

将其转换为：

```
<div id='slides' >
 <img src='image_b' />
 <img src='image_a' />
 <img src='image_d' />
 <img src='image_c' />
</div> 
```

在后端脚本中使用 DOM 操作或改组。

# proxy - OpenLayers Proxyhost 无法正常工作

> ID：13720391
> 
> 赞同：3
> 
> 时间：2012-12-05T09:53:14.413
> 
> 标签：proxy, openlayers, geoserver

正如在[http://trac.osgeo.org/openlayers/wiki/FrequentlyAskedQuestions#ProxyHost](http://trac.osgeo.org/openlayers/wiki/FrequentlyAskedQuestions#ProxyHost)中所说，我确实将 proxy.cgi 文件放在了文档所说的服务器中，并且在转到“http：/ /mydomain.com/cgi-bin/proxy.cgi”。这意味着为服务器正确设置了代理。但是当我尝试在我的脚本中使用这个代理时，它不起作用。我把“ `OpenLayers.ProxyHost = "/cgi-bin/proxy.cgi?url=";`”放在我的脚本中。以便可以使用代理。

我的代码在这里不起作用。

```
ainSelect = new OpenLayers.Control.WMSGetFeatureInfo({
                    url: 'http://ec2-23-22-12-137.compute-1.amazonaws.com:8080/geoserver/KCRE/wms',
                    title: 'Identify features by clicking',
                    layers: [lyrParcels],
                    queryVisible: true
                });
ainSelect.infoFormat = 'application/vnd.ogc.gml';
                ainSelect.events.register("getfeatureinfo", this, pickAINid);
                map.addControl(ainSelect);
                ainSelect.activate(); 
```

而pickAINid函数是：

```
function pickAINid(e) {
            //alert(e.features.length);
            if (e.features && e.features.length) {

                var val = e.features[0].attributes.ain;
                alert(val);
                //document.getElementById('roadId').value = val;
            }
        } 
```

所以它应该在我点击地图时提醒我 AIN 号码。据我所知，e.features.length = 0。这意味着 WMSGetFeatureInfo 无法正常工作。

请注意我已经使用了这些层：[lyrParcels] 我创建了那个层，在此之前我没有在这里给出代码。

还有一点。当我从本地运行此代码时，此代码运行良好。

谁能告诉我我做错了什么？是在这条“ `OpenLayers.ProxyHost = "/cgi-bin/proxy.cgi?url=";`”线上吗？

提前致谢。

问候马布布尔哈克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T10:35:18.683

在 proxy.cgi 文件顶部有一个允许的主机列表（如下所示）。

```
allowedHosts = ['www.openlayers.org', 'openlayers.org', 
            'labs.metacarta.com', 'world.freemap.in', 
            'prototype.openmnnd.org', 'geo.openplans.org',
            'sigma.openplans.org', 'demo.opengeo.org',
            'www.openstreetmap.org', 'sample.azavea.com',
            'v2.suite.opengeo.org', 'v-swe.uni-muenster.de:8080', 
            'vmap0.tiles.osgeo.org', 'www.openrouteservice.org'] 
```

如果你还没有，你需要添加你正在联系的服务器的域（和你的情况下的端口不是 80），在这种情况下：

```
ec2-23-22-12-137.compute-1.amazonaws.com:8080 
```

如果这不是问题的根源，您是否可以从 javascript 调试器中提供更多信息，例如当您尝试通过代理发出请求时显示任何错误或警告的 firebug。

**更新**

从您的服务器上测试您的代理看来，您从网络内部到端口 8080 的连接有问题。

这可以通过尝试 url 来测试

```
http://kleincom.com/cgi-bin/proxy.cgi?url=http://v-swe.uni-muenster.de:8080 
```

和

```
http://kleincom.com/cgi-bin/proxy.cgi?url=http://labs.metacarta.com 
```

metacarta url 工作正常，但 muenster url 因超时问题而失败。我会看看你的防火墙设置或类似设置。

# hibernate - 最佳实践 Hibernate 乐观锁定和 Web 应用程序

> ID：13720394
> 
> 赞同：4
> 
> 时间：2012-12-05T09:53:18.423
> 
> 标签：hibernate, web-applications, optimistic-locking, session-per-request

我有一个用 Tapestry5 (java webframework) 和 Hibernate 制作的 web 应用程序。现在我正在尝试添加乐观锁定。所以我添加了一个版本属性并且乐观锁定工作，所以这很容易和快速。

但是由于我的 Web 应用程序使用“每个请求的会话”模式，我不确定利用这种乐观锁定的最佳方式是什么。

**怎么了：**

UserA 使用加载了 entityA（版本 1）的值的表单打开页面。

UserB 使用加载了来自 entityA（版本 1）的值的表单打开页面。

UserA 更改一些值并提交表单。-> 新请求检索 entityA（版本 1）并提交更改（entityA 现在是版本 2）

UserB 更改一些值并提交表单。-> 新请求检索 entityA（版本**2**）并提交更改（entityA 现在是版本 3）

**应该发生什么**

不应提交 UserB 的更改。但是由于 session-per-request 模式，Hibernate 的乐观锁定错误可能发生的时间窗口减少到仅从提交后的新请求到提交的时间跨度，这不是预期的结果。

**可能的解决方案**

经过一番研究，我发现了以下内容：

*   使用实体版本向表单添加隐藏字段

我可以在提交之前使用这个值来设置实体的版本，但是 Hibernate 文档不建议设置这个值。此外，它仅在实体被分离和重新连接时才有效，因为否则 Hibernate 会忽略手动设置的版本值。

其次，我可以使用此版本值进行手动检查，当呈现表单时，版本是否与提交请求中加载的实体版本相同。如果需要，然后自己抛出一个 OptimisticLockingException。

*   将分离的实体放入 HttpSession 中，因此我不必在提交时再次加载它

**结论**

这些方法有效，但对我来说似乎不太实用并且容易出错。所以我想知道其他人如何实现这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T16:40:20.507

我最终实现了以下内容：

*   使用实体版本向表单添加隐藏字段
*   使用表单 dto 对象
*   将这些 dto 对象附加到 httpsession（跨多个请求的会话状态）
*   dto 和实际对象之间的手动版本检查

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T05:05:13.483

When you detach a persistent entity just to transfer it to the web layer, as an example create DTO to transfer objects to the web layer. in that case we will transform Entity objects into the DTO objects using getters and setters.

If you need to maintain the concurrency control with Optimistic locking, you have to maintain the version number in your application (it's different from manually setting the version number). Otherwise there is no way we can instruct hibernate what was the old version of the loaded record. In hibernate documentation it says "Keep the disconnected Session close to the persistence layer. Use an EJB stateful session bean to hold the Session in a three-tier environment. Do not transfer it to the web layer, or even serialize it to a separate tier, to store it in the HttpSession. ", But all the environments do not have EJB stateful session beans in business layer. In that case we have to maintain the version number.

As long as you can maintain the version, you do not need to manually check the version in the program, it is efficient if you let hibernate to do that, because you cannot predict the depth of your object hierarchy.

So what you can do is you have to set the version again to the persistent entity if you use detached objects in the web layer, Then hibernate will take care of the Cocurrency Control.

# java - 由于 sun.misc.IOUtils.createTempFile("+~JF", ".tmp", null)，Java Font.createFont 在 Linux 上失败

> ID：13720395
> 
> 赞同：1
> 
> 时间：2012-12-05T09:53:18.780
> 
> 标签：java, swing, fonts, privileged-functions

我有一些最终调用的代码 `Font.createFont`。它在服务器上运行良好（centos 的东西......）但在我的 Ubuntu 机器上它因为里面的这个调用而死了`Font.createFont`

```
final File tFile = AccessController.doPrivileged(
                new PrivilegedExceptionAction<File>() {
                    public File run() throws IOException {
                        return sun.misc.IOUtils.createTempFile("+~JF", ".tmp", null);
                    }
                }
            ); 
```

我的`/tmp`目录是全世界可读/可写的。不知道为什么会这样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T15:39:50.757

这只是失败了，因为我的 tomcat 安装没有`temp`目录。创建目录刚刚解决了这个问题。:)

# c++ - 使用矩阵查看与视频帧的相似性

> ID：13720398
> 
> 赞同：-1
> 
> 时间：2012-12-05T09:53:27.580
> 
> 标签：c++, opencv, computer-vision

我正在做一个关于计算机视觉的项目，我有一个问题。在我使用 OpenCV 成功加载视频后，我想提取视频帧并查看它们的相似之处。有人告诉我我需要使用矩阵来实现这个目的。我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T10:09:39.413

当您捕获视频帧时，您将获得一个 Mat 类的实例。这已经是您的视频帧图像像素的矩阵。

要查看相似性，您需要先捕获一个帧，然后再捕获另一个，一旦您有两个帧，您就可以运行比较。

您需要进一步准确地解释您想要实现的目标，因为有很多方法可以比较图像并使用两帧视频捕获获得不同的结果。

```
Mat videoFrame, previousFrame;
VideoSource myCam;
// initialise your video frame.
prepVideoCam();

// start a loop{
    myCam >> videoFrame; // Captures the current frame to videoFrame.
    if(i_have_previousFrame)
        // do some processing if i have a previous frame.

    videoFrame.copyTo(previousFrame);
// back to loop 
```

你会发现 videoFrame 已经是一个矩阵了。

如果您还没有这样做，为了帮助您从这里开始[http://code.opencv.org/projects/opencv/wiki 。](http://code.opencv.org/projects/opencv/wiki)OpenCV 从旧网站转移到新网站，我相信这是最新的。

下载此文档[http://docs.opencv.org/opencv_tutorials.pdf](http://docs.opencv.org/opencv_tutorials.pdf)

本文档将解释这些差异，并为您提供大量教程供您学习。

“2.1 Mat - The Basic Image Container”部分开始解释 openCV v1 和 v2 之间的差异和更新。它还展示了如何互换使用它们，但个人坚持 v2 语法和类。

花点时间阅读本节，因为它很快就会变得复杂。

另请注意，当您安装 opencv 时，我认为这些教程的所有源文件都是软件包的一部分，或者至少在某个地方有一个文件将它们全部包含在内。

希望进一步帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T09:56:32.667

你所说的“相似性”到底是什么意思？

如果您的意思是不同的像素，您可以简单地在 OpenCV 中从另一帧中“减去”一帧。“矩阵”部分可能是指 OpenCV 用来处理图像的 cv::Mat 结构。

详细阅读一些 OpenCV 教程。

# wpf - 使用 stringformat={}{0:d} 时 WPF 应用程序自定义 shortdate

> ID：13720410
> 
> 赞同：1
> 
> 时间：2012-12-05T09:53:57.457
> 
> 标签：wpf, .net-3.5, datetime-format, uiculture

我们正在尝试允许应用程序在运行时设置其文化，并可选择覆盖日期的显示方式。

我们通过以下方式创造自己的文化：

```
private CultureInfo CreateCulture()
    {
        // start with basic culture object
        CultureInfo culture = Sys.Workspace.ServerProperties.UICulture ?? new CultureInfo(Properties.Settings.Default.DefaultCulture);

        // override data format
        var dateFmt = Sys.Workspace.ServerProperties.DateFormatOverride;
        if (!string.IsNullOrEmpty(dateFmt))
        {
            culture.DateTimeFormat.ShortDatePattern = dateFmt;
            culture.DateTimeFormat.LongDatePattern = dateFmt;
            if (dateFmt.Contains("/")) culture.DateTimeFormat.DateSeparator = "/";
            if (dateFmt.Contains("-")) culture.DateTimeFormat.DateSeparator = "-";
        }

        return culture;
    } 
```

然后在应用程序的初始化中我们这样做：

```
 var culture = CreateCulture();

        // set ui culture
        Thread.CurrentThread.CurrentCulture = Thread.CurrentThread.CurrentUICulture = culture;

        // set WPF culture
        LanguageProperty.OverrideMetadata(typeof(FrameworkElement), new FrameworkPropertyMetadata(XmlLanguage.GetLanguage(culture.IetfLanguageTag))); 
```

我们将“Sys.Workspace.ServerProperties.DateFormatOverride”值设置为“dd-MMM-yyyy”。不过，绑定似乎并不尊重这一点。例如：

```
 <TextBlock TextAlignment="Center" HorizontalAlignment="Stretch" 
      Text="{Binding NoteDate, StringFormat={}{0:d}}" /> 
```

NoteDate 是`DataColumn`with 类型，`DateTime`但显示默认区域性短日期模式。

如果我将主要文化设置为 en-GB，我将获得 dd-mm-yyyy，如果我将其设置为 en-US，我将获得 mm-dd-yyyy。

当我查看`Thread.CurrentThread.CurrentCulture`和 currentUICulture 时，它​​设置正确，即它是 en-gb 并且 shortdatepattern 和 longdatepattern 是 dd-MMM-yyyy 但日期不以这种格式显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T11:33:49.490

原因是 FrameworkElement 没有查看 Thread.CurrentThread.CurrentCulture 获取全球化信息。

相反，您必须为 XAML 元素手动定义区域性...

[在这里回答](https://stackoverflow.com/questions/991526/wpf-xaml-bindings-and-currentculture-display)

# java - 如何在 Java Swing 中创建用于关闭窗口的处理程序

> ID：13720411
> 
> 赞同：7
> 
> 时间：2012-12-05T09:53:56.960
> 
> 标签：java, swing, window, handler

当我的窗口（使用 Java Swing 创建）关闭时，我试图调用一个函数进行清理。在我的初始化代码中，我这样做：

```
public class FormLogin extends JFrame{
    private void initComponents(){
        ...
        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

        addWindowListener(new java.awt.event.WindowAdapter() {
            public void windowClosed(java.awt.event.WindowEvent evt){
                formLoginWindowClosed(evt);
            }
        });
        ...
    }
} 
```

但是当我按下退出按钮时，函数“formLoginWindowClosed”永远不会被调用。我也尝试使用 java.awt.event.WindowAdapter 作为参数创建侦听器，但它也不起作用。我应该如何创建关闭窗口的侦听器？提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-05T09:57:41.753

将框架设置为关闭时退出，`windowClosed`将永远不会被调用，主要是因为系统在事件可以引发之前已经退出。

尝试`windowClosing`改用。

或者，您可以使用[~~关闭挂钩~~](http://weblogs.java.net/blog/dwalend/archive/2004/05/shutdown_hooks_2.html)

*   [Java 中的 JVM 关闭挂钩](https://www.geeksforgeeks.org/jvm-shutdown-hook-java/)
*   [关闭挂钩 API 的设计](https://docs.oracle.com/javase/8/docs/technotes/guides/lang/hook-design.html)
*   [Java 关机钩子——Runtime.addShutdownHook()](https://www.journaldev.com/9113/java-shutdown-hook-runtime-addshutdownhook)

# c# - 如何创建自定义列表c#

> ID：13720415
> 
> 赞同：0
> 
> 时间：2012-12-05T09:54:17.000
> 
> 标签：c#, list

我正在尝试创建一个包含两个值的自定义列表。

例如我有一个枚举：

```
public enum Type
{
   name,
   number,
   surname
} 
```

所以我想做的是有一个列表，其中包含上面的枚举、类型和一个与之配套的值。

例如：

```
List<Type type, object value> 
```

请协助我如何实现这一目标。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T09:57:12.767

有很多方法可以给这只猫剥皮。

如果您只需要在单个方法中使用此列表，则一个不错的选择是使用`List<Tuple<Type,object>>`. 请参阅[`Tuple`](http://msdn.microsoft.com/en-us/library/system.tuple.aspx)MSDN。

如果您确实需要跨方法/类共享列表，我建议使用自定义类型来保存这两个值：

```
public class MyValues
{
  public Type TheType { get; set; }
  public object TheObject { get; set; }
} 
```

并将其与`List<MyValues>`.

注意：您将其`object`用作泛型类型是一种代码异味。它打败了使用泛型的原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T09:57:52.377

您可以创建一个通用列表，包括通用 KeyValuePair 或元组：

```
List<KeyValuePair<Type, object>> myList = new List<KeyValuePair<Type, object>>();

List<Tuple<Type, object>> myList = new List<Tuple<Type, object>>(); 
```

对于您的问题，这可能是一个简单的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T09:59:19.517

如果 Type 在集合中是唯一的，您可以使用 Dictionary：

```
 Dictionary<Type,object> 
```

如果 Type 不是唯一的，您可以使用 Tuple：

```
 List<Tuple<Type,object>> 
```

或者您可以创建自己的课程，并按照@oded 的建议创建您的课程类型列表：

```
 List<MyValues> 
```

# css - 使用 CSS 调整 li 元素的大小

> ID：13720418
> 
> 赞同：3
> 
> 时间：2012-12-05T09:54:21.370
> 
> 标签：css, html, html-lists

我有一个要向用户显示的结果列表，如下所示：

胜：1 | 15 | 33 |

输：7 | 65 | 100 |

现在这些数字都在一个无序列表中，设计几乎可以正常工作。问题是这些数字中的一个可能会变成如上所示的三位数字（我希望它们上下对齐）。

所以我尝试`li`通过使用来调整元素的大小

```
#my_list li
{
    width: 100px; /*Exmaple width*/
} 
```

这似乎无济于事，所以我环顾四周，发现了很多导航栏的教程。这些显示`<a>`标签中的调整大小，但我没有这些数字的任何链接。

所以我的问题是，有没有办法调整 li 标签本身的宽度？如果没有，是否有一个 HTML5 标记在语义上适合包装这些数字，然后像链接的 a 标记一样调整该元素的大小？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T09:57:47.107

**用于** `display:inline-block` **或** `float:left`

**试试这个**CSS

```
#my_list li
{
    min-width: 100px; /*Exmaple width*/

} 
```

**或者**不定义`width`

```
#my_list li
{
padding:0 10px;
display:inline-block;
vertical-align:top;
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T10:06:11.323

您所描述的是一个经典案例，需要一个`TABLE`, *NOT* `UL`。通过使用表格，无论有多少数字，您都可以确保完美对齐，因为单元格会自动扩展以包含内容。

编辑：至于不一致的没有。的`TD`每个`TR`，看看这个简单的[小提琴](http://jsfiddle.net/ucCWR/)，你可以看到即使在没有的时候，桌子是多么灵活。每行的 TD 数量不同。`COLSPAN`此外，您可以使用HTML 属性轻松修复此类不一致。也就是说，您找出哪一行`TD`的 's 最多，这将是您的总列数。然后您只需计算 ((TOTAL - ACTUAL) +1)，并将此值作为最后一个 TD 传递`COLSPAN`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T10:06:11.823

你应该把它放进去`display:inline-block`并为它设置一个`width`，

这是一个活生生的例子：[DEMO LINK](http://jsfiddle.net/uwN7t/)

# python - 搜索和替换子字符串

> ID：13720419
> 
> 赞同：0
> 
> 时间：2012-12-05T09:54:23.007
> 
> 标签：python, regex

我想在一个字符串中搜索一个子字符串并用另一个模式替换。搜索字符串位于大括号之间。

**示例字符串**

```
line = $lang['MY_KEY'] = '{search-string} wird in Analyse berücksichtigt'; 
```

我试过这段代码：

```
re.sub('([a-zA-Z0-9\[\]\$\' ].*{).*(}[a-zA-Z\.,; ].*)','\1replace-string\2',line) 
```

并且：

```
re.sub('(.*{).*(}.*)', '\1replace-string\2', line) 
```

我在输出中收到了一些垃圾字符以及替换字符串。

**编辑**

我还有一个问题。
花括号中有多个搜索字符串。我想用不同的模式替换每个子字符串。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T10:01:13.167

因为你有反斜杠前缀模式和替换 r ： -

```
print re.sub(r'([a-zA-Z0-9\[\]\$\' ].*{).*(}[a-zA-Z\.,; ].*)',r'\1replace-string\2',line)

print re.sub(r'(.*{).*(}.*)', r'\1replace-string\2', line) 
```

编辑：使用替换功能替换每第二次出现

```
import re
def repl(matchobj):
    global counter
    counter = counter+1
    if counter == 2: 
        return '{replace-string}' 
    else: 
        return matchobj.group(0)

counter = 0
line = "$lang['MY_KEY'] = '{search-string} wird in Analyse {search-string} bercksichtigt'";
print re.sub(r'{.*?}',repl,line) 
```

编辑：使用字典来存储替换

```
import re
def repl(matchobj):
    global counter
    replacementFor = {'{search-string1}': '{replace-string1}',
                      '{search-string2}': '{replace-string2}',
                      '{search-string3}': '{replace-string3}'}

    counter = counter+1
    if counter == 2: 
        return replacementFor.get(matchobj.group(0), matchobj.group(0))
    else: 
        return matchobj.group(0)

counter = 0
line = "$lang['MY_KEY'] = '{search-string} wird in Analyse {search-string1} bercksichtigt'";
print re.sub(r'{.*?}',repl,line)

counter = 0
line = "$lang['MY_KEY'] = '{search-string} wird in Analyse {search-string3} bercksichtigt'";
print re.sub(r'{.*?}',repl,line) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T10:03:50.110

不确定垃圾字符，但出于兴趣，有什么问题`re.sub('{.*}', 'frob', line)`？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T10:53:20.347

我认为这应该适合你：

```
line = '{search-string} wird in {Analyse} berücksichtigt'

>>> print re.sub(r'(^.*?{)[^}]*(}.*)', r'\1replace-string\2', line)
{replace-string} wird in {Analyse} berücksichtigt 
```

# go - Go代码可以在windows中生成dll还是C++/C#可以调用golang代码？

> ID：13720425
> 
> 赞同：11
> 
> 时间：2012-12-05T09:54:33.917
> 
> 标签：go

Go 函数可以在 Windows 上调用`C++`或编码吗？`C#`Go 是否支持在 Windows 中生成 dll？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-05T14:12:57.883

不，Go 代码是静态链接的。原因是 Go 的运行时，它嵌入在每个可执行文件中，等等。

* * *

编辑：

显然，有很多间接性是可能的，但在实践中远不可用。有关更多信息，请参阅[从 C 调用 go 函数](https://stackoverflow.com/questions/6125683/call-go-functions-from-c)和链接的博客文章。

# c++ - memset() 返回值有什么用？

> ID：13720428
> 
> 赞同：90
> 
> 时间：2012-12-05T09:54:41.967
> 
> 标签：c++, c, memset

`memset()`声明返回`void*`的值始终与传递给函数的地址相同。

返回值有什么用？为什么不返回`void`？

* * *

## 回答 #1

> 赞同：123
> 
> 时间：2012-12-05T09:56:56.560

它可用于调用链，如：

```
char a[200];
strcpy(memset(a, 0, 200), "bla"); 
```

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2012-12-05T09:57:37.867

签名与所有其他类似的函数一致：`memcpy()`等`strcpy()`。我一直认为这样做是为了使人们能够链接对此类函数的调用，并以其他方式在表达式中使用此类调用。

也就是说，我从来没有遇到过我不得不以这种方式使用返回值的真实情况。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-12-05T20:27:11.967

为了将该函数用作另一个函数的参数，例如`sprintf`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-20T03:29:25.973

当我在谷歌上搜索 memset 返回的内容时，我遇到了这个问题。

我有一些代码在其中测试一个值，然后如果这是真的测试以查看一个值是否为零。

因为在 C 语言中没有完全可移植的方法来测试零，所以我必须在中间运行 memset。

所以我的代码是：

```
if ( a==true && (memcmp(memset(zeros, 0, sizeof(zeros)), b, sizeof(zeros)) == 0) ) 
```

这说明了前面问题中列出的链接目的，但它是使用此技术的一个示例。

我会把它留给其他人来判断这是否是好的编码。

# perl - 我可以导出|将多个 postgresql 查询复制到一个 csv 文件中吗？

> ID：13720429
> 
> 赞同：1
> 
> 时间：2012-12-05T09:54:46.380
> 
> 标签：perl, postgresql

是否可以将多个 postgresql 查询复制到单个 csv 文件中？截至目前，我正在将单个查询复制到 csv 文件中

```
copy (select * from table1) to 'file.csv' with csv header; 
```

现在我想一起复制 2 个查询结果。那可能吗 ？就像是，

```
copy (select * from table1,select name from table2) to 'file.csv' with csv header 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T10:11:13.373

你可以：

```
copy (select 'table1' as table_id, * from table1
      UNION ALL
      select 'table2' as table_id, * from table2)
 to 'file.csv' with csv header 
```

如果表具有相同的结构。

或者您可以：

```
copy (select field1, field2, null, null from table1
      UNION ALL
      select null,null, field3, field4 from table2)
 to 'file.csv' with csv header 
```

如果表没有相同的结构。

问题是 -`COPY ... FROM`只能与表格一起使用（详见[此处](http://www.postgresql.org/docs/current/static/sql-copy.html)）。

所以你需要：`CREATE TEMP TABLE tmp_copy_tbl`，`COPY tmp_copy_tbl FROM`然后`INSERT ... SELECT ... FROM tmp_copy_tbl`

# python - 用 Beautiful Soup 刮问题

> ID：13720430
> 
> 赞同：5
> 
> 时间：2012-12-05T09:54:49.590
> 
> 标签：python, beautifulsoup, urllib2

在使用相同的技术之前，我一直在抓取网站。但是对于这个网站，它似乎不起作用。

```
import urllib2
from BeautifulSoup import BeautifulSoup
url = "http://www.weatheronline.co.uk/weather/maps/current?LANG=en&DATE=1354104000&CONT=euro&LAND=UK&KEY=UK&SORT=1&INT=06&TYP=sonne&ART=tabelle&RUBRIK=akt&R=310&CEL=C"
page=urllib2.urlopen(url).read()
soup = BeautifulSoup(page)
print soup 
```

在输出中应该是网页的内容，但我只是得到这个：

GIF89a（它也遵循一些我不能在这里复制的符号）

关于问题是什么以及我应该如何进行的任何想法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T10:15:33.477

> 但我想知道为什么我会得到一个像这样访问 url 的 gif，当我通过浏览器访问它时，我会完美地访问网站。

因为这些人很聪明，不希望在网络浏览器之外访问他们的网站。您需要做的是通过将 User-agent 添加到标头来伪造已知浏览器。这是一个可以使用的修改示例

```
>>> import urllib2
>>> opener = urllib2.build_opener()
>>> opener.addheaders = [('User-agent', 'Mozilla/5.0')]
>>> url = "http://www.weatheronline.co.uk/weather/maps/current?LANG=en&DATE=1354104000&CONT=euro&LAND=UK&KEY=UK&SORT=1&INT=06&TYP=sonne&ART=tabelle&RUBRIK=akt&R=310&CEL=C"
>>> response = opener.open(url)
>>> page = response.read()
>>> from BeautifulSoup import BeautifulSoup
>>> soup = BeautifulSoup(page) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T09:56:24.433

这意味着您正在访问的 URL 是 GIF 图片，而不是网页。事实上，我运行了脚本并将“页面”保存到一个文件中，你会得到一个 1x1 像素的白色（或可能是透明的）GIF。

实际上，您无法使用实际的网络浏览器获得该信息的原因可能是因为他们不希望您抓取它。

*根据他们的使用条款：“您不得以任何方式复制、复制、再版、下载、发布、广播、传输或以其他方式使用本网站的内容，除非用于您个人的非商业用途。”*

您可能会通过一些工作伪造网络浏览器，但我仍然建议您改为与 WeatherOnline 交谈。他们希望您为他们的数据付费，但如果您这样做，您肯定会得到一个不错的 API，可以用来代替屏幕抓取。

# sql-server - 缓存 EntityFramework 实体时，重音不敏感 (AI) 排序规则丢失

> ID：13720432
> 
> 赞同：1
> 
> 时间：2012-12-05T09:54:52.183
> 
> 标签：sql-server, asp.net-mvc-3, entity-framework, entity-framework-4.1

我在 asp.net mvc 网站的应用程序启动例程中缓存了特定的 EF 实体列表。

```
protected void Application_Start()
{
   CountriesDbContext db = new CountriesDbContext();
   HttpRuntime.Cache["Countries"] = db.Countries.ToList();
} 
```

当我像下面这样请求时，我会放松对口音不敏感的行为

```
private List<Country> cache = (List<Country>)HttpRuntime.Cache["Countries"];
//Accent insensitive behaviour is lost ! 
results = cache.Where(c => c.FR.ToLower()
               .Contains(search.ToLower())); //for example : e will not match é 
```

如果我使用 dbContext “通常”请求它，则保留不区分重音的行为。

```
private CountriesDbContext db = new CountriesDbContext();
//Accent insensitive behaviour search 
results = db.Countries.Where(c => c.FR.ToLower()
               .Contains(search.ToLower())); //for example : e will match é 
```

这是为什么 ？以及如何在缓存实体时保留对口音不敏感的行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T10:05:12.037

排序规则是一个 SQL Server 概念，这就是为什么查询适用于数据库数据，而不适用于内存数据，其中 .Net 比较适用。

因此，您需要在.Net 中为您的缓存实现一个不区分重音的比较器，如[this answer](https://stackoverflow.com/a/368850/21336)中所述。

# android - 将aidl文件添加到Android.mk

> ID：13720433
> 
> 赞同：3
> 
> 时间：2012-12-05T09:54:54.490
> 
> 标签：android, aidl

我正在向我的项目中添加一个aidl 文件，以应对我在调用intent.getIntExtra (..) 时遇到的“ClassNotFound”异常，（因为同一意图附加中的另一个可打包对象）

我添加了以下 .aidl 文件（SomeInfo.aidl）

```
package com.someapp;
parcelable SomeInfo; 
```

我添加到 Android.mk：

```
LOCAL_AIDL_INCLUDES := src/com/someapp/SomeInfo.aidl 
```

但是当我构建项目时，我看不出有什么区别。实际上，如果我添加到我的代码中

```
import com.someapp.SomInfo; 
```

编译器找不到...

请帮忙

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-11-25T21:38:31.827

您还需要将其添加到 LOCAL_SRC_FILES 中，例如：

```
LOCAL_SRC_FILES := $(call all-java-files-under, src) src/com/someapp/SomeInfo.aidl
LOCAL_AIDL_INCLUDES := src/com/someapp/SomeInfo.aidl 
```

或者您可以使用预定义的函数，例如：

```
LOCAL_SRC_FILES := $(call all-java-files-under, src) $(call all-Iaidl-files-under, src)
LOCAL_AIDL_INCLUDES := $(call all-Iaidl-files-under, src) 
```

让我添加更多细节。实际上 base_rules.mk 是处理aidl文件的一个定义规则：[http](http://androidxref.com/4.4.3_r1.1/xref/build/core/base_rules.mk#178) ://androidxref.com/4.4.3_r1.1/xref/build/core/base_rules.mk#178 。它会自动拾取所有带有aidl扩展名的文件，如下所示：

```
aidl_sources := $(filter %.aidl,$(LOCAL_SRC_FILES)) 
```

而您要添加aidl文件的LOCAL_AIDL_INCLUDES列表实际上被定义为AIDL编译器的-I*参数：

```
$(aidl_java_sources): PRIVATE_AIDL_FLAGS := -b $(addprefix -p,$(aidl_preprocess_import)) -I$(LOCAL_PATH) -I$(LOCAL_PATH)/src $(addprefix -I,$(LOCAL_AIDL_INCLUDES)) 
```

# javascript - javascript下雨效果

> ID：13720438
> 
> 赞同：1
> 
> 时间：2012-12-05T09:55:25.940
> 
> 标签：javascript

我是 javascrip 的新手，我想在页面中制作一个带有雨效果的 div，我做了一些东西，但我不知道如何让它移动，它在我的 div 中随机绘制蓝点，我希望它们下去，这是我的代码：

```
<html>
<head>

<style>
.punct
{
background-color:blue;
position:absolute;
width:2px;
height:6px;
}
</style>

<script type="text/javascript">

var cleft;
var ctop;

var x=document.getElementById ('content');
function strop (cleft,ctop,d)
{
if (x==null) x="<div class='punct' style='top:"+ctop+"px;left:"+cleft+"px'></div>";
else x=x+"<div class='punct' id='"+d+"' style='top:"+ctop+"px;left:"+cleft+"px'>    </div>";
document.getElementById ('content').innerHTML=x;
}

function randomFromInterval(from,to)
{
return Math.floor(Math.random()*(to-from+1)+from);
}

var y=30;
function start ()
{
if (y!=0){
var a;
var b;
cleft=a;
ctop=b;
a=randomFromInterval (20,1000);
b=randomFromInterval (10,50);
strop(a,b,y);
setTimeout (function () {start ()},500);
y--;
}
}

</script>

</head>
<body>
<div id='content' style='border:2px solid black; height:500px; width:1000px;'></div>
<button onclick='start()'>Start </button>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T10:57:19.303

另一个仅限 javascript 的解决方案。这使得水滴像在原始帖子中一样缓慢出现，并在它们到达底部时去除水滴。[http://jsfiddle.net/35h2Q/4/](http://jsfiddle.net/35h2Q/4/)

```
function strop(cleft, ctop, d) {
    var drop = document.createElement('div');
    drop.className = 'punct';
    drop.style.left = cleft + 'px';
    drop.style.top = ctop + 'px';
    drop.id = d;
    document.getElementById('content').appendChild(drop);
}

function randomFromInterval(from, to) {
    return Math.floor(Math.random() * (to - from + 1) + from);
}
var n, interval;

function newDrop() {
    var x = randomFromInterval(20, 480),
        y = randomFromInterval(10, 50);
    strop(x, y, n);
    n--;
    if (n > 0) {
        setTimeout(newDrop, 500);
        // 500ms is the interval between drops appearing
    }
}

function start() {
    n = 30;
    newDrop();
    interval = setInterval(function() {
        var drops = document.getElementsByClassName('punct'),
            newY;
        if (drops.length == 0) {
            clearInterval(interval);
            return;
        }
        for (var i = 0; i < drops.length; i++) {
            newY = drops[i].offsetTop + 2;   
                 // drops move by 2px in each frame
            if (newY > drops[i].parentNode.offsetHeight) {
                drops[i].parentNode.removeChild(drops[i]);
            }
            else {
                drops[i].style.top = newY + 'px';
            }
        }
    }, 30);   // 30ms is the interval between drops moving (frame rate)
}​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T10:25:32.087

仅 Javascript 解决方案 \o/

```
 <script type="text/javascript">
var cleft;
var ctop;

var x=document.getElementById ('content');
function strop (cleft,ctop,d)
{
    if (x==null) x="<div class='punct' id='"+d+"' style='top:"+ctop+"px;left:"+cleft+"px'></div>";
    else x=x+"<div class='punct' id='"+d+"' style='top:"+ctop+"px;left:"+cleft+"px'></div>";

    document.getElementById ('content').innerHTML=x;
}

function randomFromInterval(from,to)
{
    return Math.floor(Math.random()*(to-from+1)+from);
}

var y=130;
var speed = 2;

function start ()
{
    if (y!=0){
        var a;
        var b;
        cleft=a;
        ctop=b;
        a=randomFromInterval (20,1000);
        b=randomFromInterval (10,500);
        strop(a,b,y);
        y--;
    }

    // Move existing droplets
    for (var i=1; i<=130; i++)
    {
        var el = document.getElementById(i.toString());
        if (el !== null)
        {
            var tp = parseInt(el.style.top) + speed + i*.0125;
            if (tp > 500) 
                tp -= 500;
            el.style.top = tp + "px";
        }
    }

    setTimeout (function () {start ()},10);
}

</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T10:16:12.423

可以使用jQuery animate，对顶部位置进行动画，`div`使效果稍微好一点。

**示例代码：**

```
<script>   
        var cleft;
        var ctop;

        var x=document.getElementById ('content');
        function strop (cleft, ctop, d)
        {
            if (x==null) x="<div class='punct' style='top:"+ctop+"px;left:"+cleft+"px'></div>";
            else x=x+"<div class='punct' id='"+d+"' style='top:"+ctop+"px;left:"+cleft+"px'>    </div>";
            document.getElementById ('content').innerHTML=x;        
        }

        function randomFromInterval(from, to)
        {
            return Math.floor(Math.random()*(to-from+1)+from);
        }

        var y=30;
        function start ()
        {
            if (y != 0){
                var a;
                var b;
                cleft=a;
                ctop=b;
                a=randomFromInterval (20,1000);
                b=randomFromInterval (10,50);
                strop(a, b, y);
                $("#"+y).animate({"top":"480px"},1000)
                setTimeout (function () {start ()},1100);
                y--;
            }
        }
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T10:39:16.640

试试这个，[http://jsfiddle.net/CBv5K/](http://jsfiddle.net/CBv5K/)

```
<html>
<head>
<style> 
#demo
{
background-color:blue;
width:2px;
height:6px;
position:relative;
animation:rain .5s;
-moz-animation:rain .5s; /* Firefox */
-webkit-animation:rain .5s; /* Safari and Chrome */
-o-animation:rain .5s; /* Opera */
}

@keyframes rain
{
0%   {top:0px;}
10%   {top:50px;}
20%   {top:100px;}
30%   {top:150px;}
40%   {top:200px;}
50%   {top:250px;}
60%   {top:300px;}
70%   {top:350px;}
80%   {top:400px;}
90%   {top:4500px;}
100%   {top:500px;}
}

@-moz-keyframes rain /* Firefox */
{
0%   {top:0px;}
10%   {top:50px;}
20%   {top:100px;}
30%   {top:150px;}
40%   {top:200px;}
50%   {top:250px;}
60%   {top:300px;}
70%   {top:350px;}
80%   {top:400px;}
90%   {top:4500px;}
100%   {top:500px;}
}

@-webkit-keyframes rain /* Safari and Chrome */
{
0%   {top:0px;}
10%   {top:50px;}
20%   {top:100px;}
30%   {top:150px;}
40%   {top:200px;}
50%   {top:250px;}
60%   {top:300px;}
70%   {top:350px;}
80%   {top:400px;}
90%   {top:4500px;}
100%   {top:500px;}
}

@-o-keyframes rain /* Opera */
{
0%   {top:0px;}
10%   {top:50px;}
20%   {top:100px;}
30%   {top:150px;}
40%   {top:200px;}
50%   {top:250px;}
60%   {top:300px;}
70%   {top:350px;}
80%   {top:400px;}
90%   {top:4500px;}
100%   {top:500px;}
}
</style>
</head>
<body>
<div id='demo'></div>
</body>
</html> 
```

我这样做只是为了一滴雨。我使用 CSS 制作动画。记住，你给的分数越多，雨看起来就越平滑。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-25T18:53:12.027

我在这里找到了两个例子，希望对你有所帮助：
[Special Rain 和 Cloud On Page](http://free-web-tools.com/javascript-special-rain-and-cloud-on-page/)
[Hard Raining on the Page](http://free-web-tools.com/javascript-hard-raining-on-the-page/)
源代码也可以。您还可以通过在网站内搜索来找到更多相关内容。

* * *

正如用户评论的那样，我将来源放在这里。它们是两个做这些事情的 js 文件。

```
<script type="text/javascript" src="http://htmlfreecodes.com/codes/rain.js">
</script> 
```

并且

```
<script src="http://javascriptbestcodes.com/codes/cloudandrain.js"></script> 
```

# c# - 新数据库未删除事件处理程序

> ID：13720442
> 
> 赞同：0
> 
> 时间：2012-12-05T09:55:43.853
> 
> 标签：c#, events, umbraco

> [更新]我不再使用事件，但我真的很想知道为什么会发生这种情况。

我有一个事件处理程序，可以在 umbraco 后台复制多语言站点的内容节点。

在我将我的 umbraco 数据库更改为同事的数据库之前，这一直运行良好（这对代码没有任何影响）。

单步执行我的代码，我看到处理程序没有被删除（或者更确切地说，它似乎被删除但无论如何都会触发）并且节点被一遍又一遍地复制。

```
foreach (var id in _listOfParentIds.Where(id => id != parentNode.Id))
{
      lock (Locker)
      {
            Document.New -= SaveLangDupelicates;    //  remove event to prevent it from firing after copying
            dupeDoc.Copy(id, User.GetCurrent(), true);  //  copy the document to the relevant parent node                                   
            Document.New += SaveLangDupelicates;    //  reinstate the event
      }
} 
```

任何想法为什么会发生这种情况？

# android - 如何仅从我的 Android 应用程序编写 NFC 标签

> ID：13720445
> 
> 赞同：2
> 
> 时间：2012-12-05T09:55:46.843
> 
> 标签：android, nfc

我是 NFC Android 应用程序开发的新手。我正在开发一个应该能够编写不同类型的 NFC 标签的应用程序。我写完了所有类型的标签。

但我的问题是，一旦标签是从我的应用程序写入的，客户端就会要求限制用户从另一个 android 应用程序写入标签。我在 google 中搜索并阅读了 android developer guide 的文档，但没有找到任何结果。有没有办法限制用户只能从一个应用程序编写标签。如果是，它是否适用于所有类型的标签。我希望 MifareClassic 可以被限制从其他应用程序写入标签，因为我们可以使用自定义密钥进行身份验证。其他卡也有这种实施吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T10:26:03.413

这取决于您的确切需求。在某些情况下，可以将 NFC 标签设为只读。这将阻止任何人写入标签。在其他情况下，例如 MIFARE，一种访问控制形式是可能的（正如您所描述的那样），其中需要身份验证才能访问写入功能。这取决于具体的 NFC 标签是否支持。通常，如何做到这一点的确切细节只能在 NDA 下获得。因此，我建议您联系您的供应商，了解您打算使用的标签的详细信息。

# javascript - 如何 在 CKEditor 中禁用自动后？

> ID：13720456
> 
> 赞同：1
> 
> 时间：2012-12-05T09:56:15.543
> 
> 标签：javascript, ckeditor

CKEditor`<br>`之后会添加`<td>`..如何禁用或关闭此功能？

前 ：

```
<td>
<img style="width: 950px; height: 114px;" src="http://www.example.com/uploads/image/Newsletter/Newsletter2.jpg" alt="">
</td> 
```

保存后：

```
<td>
<br>
<img style="width: 950px; height: 114px;" src="http://www.example.com/uploads/image/Newsletter/Newsletter2.jpg" alt="">
</td> 
```

我的设置：

```
CKEDITOR.editorConfig = function( config )
{
    // Define changes to default configuration here. For example:
    // config.language = 'fr';
    // config.uiColor = '#AADC6E';

    config.toolbar = "MyToolbar";
    config.toolbarCanCollapse = false;
    config.resize_enabled = false;
    config.height = '280';
    config.width = '1100';
    config.enterMode = CKEDITOR.ENTER_P; 
```

CKEditor 版本：3.6.4

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-12-05T10:08:32.817

快速而肮脏：保存后，我将替换`<td><br>`为`<td>` This behavior is notdocumented，我看不到打开/关闭它的设置

# php - 关于shell脚本和php的信息

> ID：13720457
> 
> 赞同：-4
> 
> 时间：2012-12-05T09:56:18.097
> 
> 标签：php, shell, sh

我会知道一些事情：

我有一个包含一些 php 脚本的 shell 脚本。

当第一个 php 脚本完成后，第二个启动......

但是问题：如果第一个脚本被致命错误或 die() 中断，是否执行第二个脚本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T03:55:58.527

运行它并找出答案，否则你有两个选择（也许更多？）：

检查第一个php命令后的返回码

```
php -f ./file1.php
if [[ $? != 0 ]]; then
    echo "php failed"
    exit 1
fi
php -f ./file2.php 
```

将两者短路`&&`

```
php -f ./file1.php && php -f ./file2.php 
```

# qt - 如何消除显示 QToolTip 之前的时间延迟？

> ID：13720465
> 
> 赞同：21
> 
> 时间：2012-12-05T09:57:01.673
> 
> 标签：qt, tooltip

我有一个`QGraphicsItem`习惯`QToolTip`。将鼠标悬停在它们上时，工具提示显示正常，但在工具提示显示之前有一小段延迟。

如何减少延迟，以便工具提示立即显示？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-05T10:04:51.833

在您的文档中，[`QWidget::mouseMoveEvent(QMouseEvent*)`](http://qt-project.org/doc/qt-4.8/qwidget.html#mouseMoveEvent)您可以阅读以下说明：

> 如果您想在鼠标移动时立即显示工具提示（例如，获取鼠标坐标`QMouseEvent::pos()`并将它们显示为工具提示），您必须首先启用鼠标跟踪，如上所述。然后，为确保工具提示立即更新，您必须调用`QToolTip::showText()`而不是`setToolTip()`在您的实现中调用`mouseMoveEvent()`.

但除了使用`mouseMoveEvent`，您还可以使用[`QWidget::enterEvent(QEvent*)`](http://qt-project.org/doc/qt-4.8/qwidget.html#enterEvent)。

# sql - SQL、xQuery：查找重复项

> ID：13720467
> 
> 赞同：0
> 
> 时间：2012-12-05T09:57:03.890
> 
> 标签：sql, xquery, xquery-sql

我对 SQL 和 xpath 有一定的了解，但没有 xquery。我如何编写查询来获取一个字段中包含的 XML 具有相同元素的两个实例的所有记录，该元素还包含子元素的匹配数据。

让我举例说明：

表：`Fred`
表字段：`id, time, xmlone, xmltwo.`
我想在此表中查找所有记录，其中`xmlone`包含以下内容：

```
<!--xmlstart-->
<!--...any number of elements-->
<elementone position="1">
  <subelea>2010-01-01</subelea>
  <subeleb>hg72</subeleb>
  <subelec>George</subelec>
</elementone>
<!--...any number of elements here (may not end at same level)-->
    <elementone position="2">
      <subelea>2010-01-01</subelea>
      <subeleb>hg72</subeleb>
      <subelec>John</subelec>
    </elementone>
<!--xmlend--> 
```

注意我只想要匹配 where`subelea`和`subeleb`is 匹配。也可能有 的重复项`elementone`，但我不关心这一点，除非数据来自`subelea`和`subeleb`匹配。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T11:16:38.953

```
(: Self-join on all <elementone/> :)
for $i in //elementone, $j in //elementone
where $i != $j
(: Compare `$i` and `$j` on the subelements that should be equal (or whatever) :)
and $i/subelea eq $j/subelea
and $i/subeleb eq $j/subeleb
(: Return result :)
return $i 
```

如果您需要处理重复项（在元素级别，不关心输入中是否有两个具有完全相同内容的元素），请将所有内容括在括号中并添加`/.`（步骤操作处理重复项）。

```
(
  for $i in //elementone, $j in //elementone
  where $i != $j
  and $i/subelea eq $j/subelea
  and $i/subeleb eq $j/subeleb
  return $i
)/. 
```

# c# - 获取已安装或选定打印机的最大 dpi 的 C# 代码

> ID：13720470
> 
> 赞同：2
> 
> 时间：2012-12-05T09:57:08.017
> 
> 标签：c#, printing, dpi

我想获得已安装或选定打印机的最大 Dpi。我试过

```
PrinterSettings ps = new PrinterSettings();
        MessageBox.Show(ps.PrinterResolutions.ToString()); 
```

我得到这个输出：System.Drawing.Printing.PrinterSettings+PreinterResolutionCollection（所需的输出是 600x600）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T10:06:45.780

使用 LINQ：

```
PrinterSettings ps = new PrinterSettings();
var maxResolution = ps.PrinterResolutions.OfType<PrinterResolution>()
                                         .OrderByDescending(r => r.X)
                                         .ThenByDescending(r => r.Y)
                                         .First();
MessageBox.Show(String.Format("{0}x{1}", maxResolution.X, maxResolution.Y)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T10:02:29.847

看起来 PrinterResolutions 是一个集合，您试图将其转换为字符串值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T10:05:34.270

打印机分辨率是一个集合，您需要遍历它以读取所有可用的分辨率，例如：

```
foreach (string installedPrinter in PrinterSettings.InstalledPrinters)
{
    var ps = new PrinterSettings { PrinterName = installedPrinter };
    var maxResolution = ps.PrinterResolutions.Cast<PrinterResolution>().OrderByDescending(pr => pr.X).First();
    Console.WriteLine("{0}: {1}x{2}", installedPrinter, maxResolution.X, maxResolution.Y);
} 
```

或显示所有打印机及其所有 PrinterResolutions

```
foreach (string installedPrinter in PrinterSettings.InstalledPrinters)
{
    var ps = new PrinterSettings { PrinterName = installedPrinter };
    foreach (PrinterResolution printerResolution in ps.PrinterResolutions)
    {
        var tpl = printerResolution.Kind == PrinterResolutionKind.Custom ? "{0}: {1} ({2}x{3})" : "{0}: {1}";
        Console.WriteLine(tpl, installedPrinter, printerResolution.Kind, printerResolution.X, printerResolution.Y);
    }       
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-22T10:09:45.937

这是我使用的（.NET 2.0，所以没有 Linq）

```
public static int CompareResolutions(System.Drawing.Printing.PrinterResolution y, System.Drawing.Printing.PrinterResolution x)
{
    if (x.X*x.Y > y.X*y.Y) 
        return 1;
    else if (x.X * x.Y < y.X * y.Y) 
        return -1;

    return 0;
}

public static System.Drawing.Printing.PrinterResolution GetMaxResolution(System.Drawing.Printing.PrintDocument pd)
{
    return GetMaxResolution(pd.PrinterSettings);
}

public static System.Drawing.Printing.PrinterResolution GetMaxResolution(System.Drawing.Printing.PrinterSettings ps)
{
    System.Drawing.Printing.PrinterResolution prMax = null;

    System.Collections.Generic.List<System.Drawing.Printing.PrinterResolution> ls = new System.Collections.Generic.List<System.Drawing.Printing.PrinterResolution>();
    for (int i = 0; i < ps.PrinterResolutions.Count; ++i)
    {
        System.Drawing.Printing.PrinterResolution pres = ps.PrinterResolutions[i];
        ls.Add(pres);
    } // Next i

    ls.Sort(CompareResolutions);

    if (ls.Count > 0)
        prMax = ls[0];

    ls.Clear();
    ls = null;

    return prMax;
} 
```

# shellexecute - ShellExecute Adob e Reader XI 安全警告对话框设置

> ID：13720473
> 
> 赞同：3
> 
> 时间：2012-12-05T09:57:28.137
> 
> 标签：shellexecute, adobe-reader

我有一个程序，它使用（使用 ShellExecute）Adobe Reader 在映射驱动器上打开带有链接 PDF 的 FDF。该程序会在调用 Reader 之前插入注册表设置以设置受信任的位置。这在版本 X 之前运行良好，但现在在版本 XI 上失败。我已经设法解决了需要用 UNC 路径替换受信任位置的映射路径的问题（将 'm:\folder\subfolder' 更改为 '\server\mappedfolder\folder\subfolder'）但还有另一个问题也是。

当您在 Adob​​e Reader XI 中从网络位置打开带有链接 PDF 的 FDF 时，会出现一个“安全警告”对话框，要求您“允许”或“阻止”该 PDF 文件。如果允许 PDF 文件，则不会再次显示对话框，因此大概文件名存储在某处，但不在“特权位置”设置中。

**Adobe Reader 在哪里存储已“允许”的文件列表？**或者，当我单击“允许”时，如何找出哪些文件/设置发生了更改。

请注意，受信任的文件夹/特权位置存储在此处的注册表中：HKEY_CURRENT_USER\Software\Adobe\Acrobat Reader\11.0\TrustManager\cTrustedFolders，但此特定对话框不会更改这些设置。

要重现确切的问题，请使用装有 Adob​​e Reader XI 的 Windows 7 PC。创建一个映射网络驱动器，该驱动器映射到同一台 PC 上的共享文件夹，每个人都具有完全权限（例如，M:\ 映射到 c:\AdobeTest）。放入链接到文件夹中 PDF 的 FDF，并使用命令行或应用程序的 shell 打开 FDF。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T09:17:52.523

似乎没有这方面的文件。

# linux - DMA 引擎 API 与 DMA API

> ID：13720474
> 
> 赞同：3
> 
> 时间：2012-12-05T09:57:31.123
> 
> 标签：linux, dma

有人可以简要解释一下两者的用法和区别吗？

注意：我已阅读 linux 文档

# c# - 强制 GC 使用另一个线程上下文

> ID：13720484
> 
> 赞同：1
> 
> 时间：2012-12-05T09:57:45.180
> 
> 标签：c#, multithreading, garbage-collection, thread-safety, idisposable

我正在使用 OpenGL，我需要手动处理一些非托管对象。（特别是纹理和顶点缓冲区）。

问题是，释放顶点缓冲区的函数**绝对必须**从主线程（唯一可以创建或销毁此类对象的线程）调用。

我已经为我的托管对象正确实现了 IDisposable 和析构函数。垃圾收集器也正确调用函数。但是这一切都注定要失败，因为垃圾收集器在不同的线程上运行，当 GC 调用释放函数（DeleteBuffers(...)、DeleteTexture(...) 等）时，它会崩溃。

所以我想出了两个想法来解决这个问题：

1.  将必须释放的对象添加到列表中，然后在主线程中检查该列表。问题：需要我想避免的同步/锁定。也许使用 BlockingCollection<> ？

2.  不知何故，强制 GC 使用主线程来完成它的工作。

有没有我不知道的方法可以做到这一点？我应该如何正确处理这些对象？我必须自己清理吗？（意思是我停止使用析构函数并总是自己释放对象？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T10:14:07.743

**这个想法很简单，你有一个队列（使用 ConcurentQueue 确保线程安全）让你的 finlizer 填充这个队列，你的主循环清空它。**

试试这个链接： [http ://www.opentk.com/node/101](http://www.opentk.com/node/101)

```
A user of the Tao Framework implemented this idea with promising results. He wrote wrappers for OpenGL resources and implemented the disposable pattern like this:
private void Dispose(bool manual)
{
    if (!disposed)
    {
        if (manual)
        {
             Gl.glDeleteTextures(1, ref _tid);
             GC.SuppressFinalize(this);
             disposed = true;
        }
        else
        {
            GC.KeepAlive(SimpleOpenGlControl.DisposingQueue);
            SimpleOpenGlControl.DisposingQueue.Enqueue(this);
        }
    }
} 
```

SimpleOpenGlControl.DisposingQueue 是一个包含对 OpenGL 资源的引用的队列。在程序执行期间定期访问它，处理其中包含的数据。注意'else' 子句永远不会被执行，除非你真的忘记释放资源。这是两全其美的：您可以手动释放资源（不会影响性能），但如果您忘记了什么，垃圾收集器仍会在您之后清理。更好的是，实现非常简单！现在，我们只需要了解如何处理多个 OpenGL 上下文。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T10:09:38.257

你有没有尝试过：

```
GCSettings.LatencyMode = GCLatencyMode.Batch; 
```

这应该会停止 GC 在其他线程上运行。

> MSDN
> 
> 禁用垃圾收集并发并在批处理调用中回收对象。这是最具侵入性的模式。此模式旨在以牺牲响应性为代价实现最大吞吐量。

# z3 - 使用 clang-2.9 和 Os X 10.5.8 编译 Z3

> ID：13720490
> 
> 赞同：1
> 
> 时间：2012-12-05T09:57:52.973
> 
> 标签：z3, clang++

我想使用 Z3Py，我正在尝试按照[http://z3.codeplex.com/SourceControl/changeset/view/89c1785b7322#README](http://z3.codeplex.com/SourceControl/changeset/view/89c1785b7322#README)中的说明安装 Z3 我得到以下信息：

```
dhcp-154:z3-89c1785b7322 mgarcia$ ./configure CXX=clang++
checking whether we are using the GNU C++ compiler... no
checking whether clang++ accepts -g... no
checking for gcc... gcc
checking whether we are using the GNU C compiler... no
checking whether gcc accepts -g... no
checking for gcc option to accept ISO C89... unsupported
checking whether make sets $(MAKE)... yes
checking for grep that handles long lines and -e... /usr/bin/grep
checking for a sed that does not truncate output... /usr/bin/sed
checking for int *... no
checking size of int *... 4
configure: creating ./config.status
config.status: creating scripts/config-debug.mk
config.status: creating scripts/config-release.mk
Z3 was configured with success.
Host platform:  osx
Compiler:       clang++
Arithmetic:     internal
Python:         python
Prefix:         /usr
64-bit:         no 
```

当我做 make 我得到错误，例如：

```
In file included from ../src/muz_qe/dl_smt_relation.cpp:32:
../src/smt/expr_context_simplifier.h:78:10: error: expected parameter declarator
    void assert(expr* e) { m_solver.assert_expr(e); }

/usr/include/assert.h:85:23: note: instantiated from:
    (__builtin_expect(!(e), 0) ? __assert_rtn(__func__, __FILE__, __LINE__, #e) : (void)0)

In file included from ../src/muz_qe/dl_smt_relation.cpp:32:
../src/smt/expr_context_simplifier.h:78:10: error: expected ')'
../src/smt/expr_context_simplifier.h:78:10: note: to match this '('
    void assert(expr* e) { m_solver.assert_expr(e); } 
```

所以我不知道这是与代码相关的问题还是我仍然遗漏了一些东西。或者，也许，我使用的是非常旧的版本。

谢谢您的回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T21:35:52.400

我这里没有类似的系统来测试，但我相信这是因为你的系统库使用了类似的东西

```
#define assert(x) (__builtin_expect... 
```

来定义`assert`函数。碰巧我们的一个类中的一个函数也被调用`assert`了，预处理器用#define 的其余部分替换了它。似乎这个问题已经在 Z3 的不稳定分支中得到修复，您可以从[Codeplex](http://z3.codeplex.com)上的源代码下载中获得，方法是将分支选择器从“master”切换为“unstable”，然后单击下载。

# entity-framework - 在 Umbraco 中使用实体框架或任何其他 ORM

> ID：13720491
> 
> 赞同：2
> 
> 时间：2012-12-05T09:57:55.220
> 
> 标签：entity-framework, orm, umbraco

我试图找到一些文档/文章，其中有人在 umbraco 中集成了实体框架（或任何其他 ORM 工具），而不是使用基于旧文本的 SQL 查询。

到目前为止，如果我想查询 umbraco 数据库，我已经写了如下内容：

```
ISqlHelper SqlHelper = DataLayerHelper.CreateSqlHelper(umbraco.GlobalSettings.DbDSN)

    SqlHelper.ExecuteNonQuery(@"insert into Table(id,ColumnName)                        values(@id,@ColumnName)",
    SqlHelper.CreateParameter("@Id", -1),                    SqlHelper.CreateParameter("@ColumnName", foobar), 
```

这很好（不要误会我的意思），但我认为使用某种 ORM 工具可能会更好。

关于如何使用连接现有 Umbraco 表和新表的 ORM 工具的任何想法/想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T12:43:37.590

我在很多 Umbraco 项目中使用过 Linq to SQL，但在去年转而使用 PetaPoco。[PetaPoco](http://www.toptensoftware.com/petapoco/)非常轻巧，易于学习、实施和使用。它也非常快。

我发现 EF 和 Linq to SQL 对 Subversion 不是特别友好，当两个或多个开发人员处理相同的数据模式时会导致冲突。

我还发现使用 DI 实现 PetaPoco 更加直接，因为不需要考虑上下文。对我来说，这与 Umbraco 4.10+ 项目的 MVC 实现很自然。

**更新：**

转向 Umbraco v6+（它本身使用 PetaPoco）后，我经常发现我什至不需要安装 ORM，因为我可以使用 Umbraco 自己的 Database 对象，因为正如我所说的实际上是 PetaPoco。但是，当我需要更多“咕噜”的东西时，我会选择 NHibernate 或 EF，但这些情况很少见，如果可能的话，我仍然很乐意使用 Petapoco 或 NPoco。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T11:36:15.403

我在我的 umbraco 应用程序中广泛使用 EF，它工作得很好，但不能操纵核心 umbraco 表；我用它来操作我添加到数据库中的自定义表。

我什至不确定 umbraco 表是否会默认设置所有正确的外键和/或索引，以优化 EF 的使用并使其值得。

如果您只是想要一个包装器来使核心表更易于访问，请考虑使用轻量级包，例如 dapper。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T07:53:19.413

这是我的两分钱。:)

EF 或任何 ORM 映射器，您可以采用并选择在 umbraco 生态系统中满足您的需求。好处是您可以采用自己的查询编写模式来查询 Umbraco DB。它会完美地工作。

采用 EF 后，您将遇到以下问题。

```
var q = from p in cmsContentType.Include("umbracoNode") 
```

同样..您还可以使用一些类包装器来保存 EDMX 中存在的 umbraco 表的实体。

但是，如果您打算在同一个数据库中拥有一些自定义表和 Umbraco 表，那么我建议您创建两个 EDMX 文件 - 1 个用于 Umbraco 表，2 个 Nd 用于自定义表。通过这种方式，您可以减轻一个 EDMX 文件的负担并提高性能。

回答你的问题......尽管没有可用的文档来做到这一点......你可以认为你有很多表并将它们放在 EDMX 上并开始使用它。

下面附上我的数据库中的图像，它是香草味的 umbraco。

![在此处输入图像描述](../Images/b5fcadba03b73a5e224c19ddce7dbb83.png)

# android - 使用自己的 GUI 运行功能测试

> ID：13720495
> 
> 赞同：0
> 
> 时间：2012-12-05T09:58:10.177
> 
> 标签：android, testing

我正在尝试测试我的 android 应用程序，我正在尝试为测试应用程序创建 GUI 以显示所有已处理的测试和结果（而不是在 eclipse 的 JUnit 选项卡中显示它）。我在网上搜索试图找到如何做到这一点，没有找到任何相关的东西。对于如何实现这一点，我只有一个选择：

在原始应用程序中创建另一个用于测试的包并测试其他包，这样我将拥有自己的 GUI，但它不会在单元测试平台中。

有没有更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T10:05:53.130

如果您使用类似：[http](http://code.google.com/p/the-missing-android-xml-junit-test-runner/) ://code.google.com/p/the-missing-android-xml-junit-test-runner/而不是标准测试运行器，任何运行的测试实际上都会将 junit xml 存储在电话。然后，您可以创建一个简单的应用程序，在您运行测试后将 xml 解析为易于阅读的格式。

# mysql - MySQL中的三个表连接计数

> ID：13720497
> 
> 赞同：1
> 
> 时间：2012-12-05T09:58:19.900
> 
> 标签：mysql, join, count

我这里有问题；当我进行查询时：

```
SELECT product.*,product_description.*,COUNT(product_image.*) 
FROM " . DB_PREFIX . "product  
INNER JOIN product_description ON product.product_id = product_description.product_id 
INNER JOIN product_image ON product.product_id = product_image.product_id 
ORDER BY product.date_modified DESC 
```

我想为表 product_image 选择 3 个表 n 1 个计数，但出现此错误：

> 注意：错误：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以*在第 1 行错误号：1064 SELECT product.* ，产品描述。*,COUNT(product_image.* ) FROM product INNER JOIN product_description ON product.product_id = product_description.product_id INNER JOIN product_image ON product.product_id = product_image.product_id ORDER BY product.date_modified DESC

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T10:01:39.793

你不应该使用`COUNT`这样的功能。`COUNT(TableName.*)`在加入表格时。你需要使用它的任何一个这样的列`COUNT(TableName.ColumnName)`。

例如`COUNT(product_image.ID)`

### [看到这个 SQLFiddle](http://sqlfiddle.com/#!2/fd2e3/48)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T10:02:54.027

使用派生查询进行计数

```
SELECT 
    product.*,
    product_description.*,
    pi.Count as T_Count
FROM " . DB_PREFIX . "product  
INNER JOIN product_description ON product.product_id = product_description.product_id 
INNER JOIN (SELECT product_id , count(*) as Count FROM product_image) as pi ON product.product_id = pi.product_id 
ORDER BY product.date_modified DESC 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T10:08:24.233

尝试这个：：

```
SELECT 
product.*,
product_description.*,
COUNT(1) 
FROM " . DB_PREFIX . "product  
INNER JOIN product_description ON product.product_id = product_description.product_id 
INNER JOIN product_image ON product.product_id = product_image.product_id 
ORDER BY product.date_modified DESC 
```

# c#-4.0 - 无法从 _Layout 页面使用 servicestack razor 访问模型/请求数据

> ID：13720501
> 
> 赞同：5
> 
> 时间：2012-12-05T09:58:28.387
> 
> 标签：c#-4.0, razor, servicestack

我有一个共享的 _Layout.cshtml 页面，我需要访问正在调用该页面的服务，或者访问请求 dto 或模型，以便我可以根据调用服务的类型呈现不同的选项，模型类型或请求类型。在 _Layout 页面中，我似乎无法访问上述任何内容。我对 SS-Razor 还很陌生，可能只是没有看到更大的图景，但这是我迄今为止为尝试访问该模型所做的工作。

在 _Layout.cshtml 中，我定义了以下内容，因此我可以访问 ViewBag 以及 Session 信息。

```
@using ServiceStack.Razor
@inherits ViewPage<ResponseBase> 
```

我也试过一个普通的视图页面

```
@inherits ViewPage 
```

这使我可以访问 _Layout 中的基本页面基础结构。但是布局中的模型始终为空，即使我暂时将所有响应更改为从 ResponseBase 类继承，并且从上面的代码中可以看出，我继承了该页面，其中所有模型至少都有一个 ResponseBase。

然后我设置了一个全局过滤器，在其中将请求 DTO 注入到请求项中，因为这将是一个开始，并证明我可以在布局中访问一些信息。所以我在应用程序主机中添加了以下内容，

```
this.RequestFilters.Add((httpReq, httpResp, requestDto) =>
{
   if(httpReq != null && httpReq.Items != null)
                    httpReq.Items["RequestDto"] = requestDto;
}); 
```

我可以看到过滤器上的断点被击中，并且可以看到 reqestDto 已添加到集合中，因此我知道这件作品至少可以正常工作。当我尝试使用 Request.Items 下面的代码访问 _Layout 中的 requestDto 时，从不包含 RequestDto。

```
@{
    RequestBase myRequest = null;
    if(base.Request != null)
        if(base.Request.Items.ContainsKey("RequestDto"))
            myRequest = (RequestBase)base.Request.Items["RequestDto"];
} 
```

所有这一切都是反复试验，因为在我的一生中，我无法在 Razor 视图页面中设置断点，因此我可以看到那里实际发生了什么。在这个阶段，我已经通过 RazorRockStars 样本进行了无数次，但看不到任何我在其中尝试做的例子。

有没有人对如何解决这个问题有任何指示、例子或建议。随意指出一种完全不同的方法来在 _Layout 中呈现不同的选项，因为在这个阶段我没有太多的头发，并且愿意尝试任何事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T17:41:05.110

试用 ServiceStack v3.9.33。myz 修复了可能与此问题相关的剃刀支持中的一些问题。

# javascript - javascript文件未运行

> ID：13720502
> 
> 赞同：0
> 
> 时间：2012-12-05T09:58:30.850
> 
> 标签：javascript, jquery-mobile

我正在使用 jquery mobile，我会在过去的第 1 页到第 2 页使用 $.mobile.changePage() 方法。

显示第二页没有运行javascript列表的问题。

```
$.mobile.changePage("../prestation_html/page2.html"); 
```

第二页是分开的，即如果您使用 href 然后我们添加 rel = 'external'

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T10:02:15.680

标准 jQuery 导航使用 AJAX 加载您导航到的页面正文的内容。标头被完全忽略，这意味着后续页面中的所有脚本、脚本链接和样式表都将被忽略。您需要确保在您加载的第一页中加载了所有 JS 资源。请注意，`$(document).ready`这在后续页面上都不起作用，您需要`'pageinit'`按照[jqm 文档](http://jquerymobile.com/test/docs/api/events.html)中的说明进行绑定。

# tomcat - 增加 Tomcat AJP 连接器上的 packetSize

> ID：13720506
> 
> 赞同：1
> 
> 时间：2012-12-05T09:58:46.387
> 
> 标签：tomcat, tomcat7, apache, mod-jk

出于某种原因，server.xml 中 AJP 连接器上的默认 packetSize (8KB) 不能满足我的需要。我的标头大小超过 8KB。所以我需要将其设置为 16KB。因为我在 tomcat 前面运行 apache，所以我需要在 workers.properties 中将 max_packet_size 指令设置为 16KB。

您能否解释一下增加 packetSize 是否有任何问题/影响？我正在使用 tomcat 7.0.25

非常感谢。

# asp.net - 如何访问 LDAP 服务器进行身份验证

> ID：13720507
> 
> 赞同：1
> 
> 时间：2012-12-05T09:58:46.963
> 
> 标签：asp.net, vb.net, exception, ldap

我在 VB 中编写了一个代码来访问 LDAP 服务器以进行身份​​验证。但是，它正在引发异常，可能是 nativeObject 调用正在生成异常。动机是对用户进行身份验证。我正在提供代码和异常。请帮我解决这个问题。

```
Protected Sub Button1_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles Button1.Click
        Dim cookie As HttpCookie = New HttpCookie("username")
        cookie.Value = TextBox1.Text
        cookie.Expires = DateAndTime.Now.AddHours(12)
        Response.Cookies.Add(cookie)
        Dim entry As New DirectoryEntry("LDAP://xyz.com/dc=xyz,dc=com", TextBox1.Text, TextBox2.Text)
        Try
            Dim obj As New Object
            obj = entry.NativeObject
            Dim search As New DirectorySearcher(entry)
            search.Filter = "(SAMAccountName=" + TextBox1.Text + ")"
            search.PropertiesToLoad.Add("cn")
            Dim result As SearchResult
            result = search.FindOne()
            If result.Equals(Nothing) then
                MsgBox("Try Again with valid username")
            Else
                MsgBox("User Found!")
            Response.Redirect("~/Dashboard.aspx")
            End If
        Catch ex As Exception
            MsgBox(ex.ToString)
        End Try

    End Sub 
```

我有一个例外

> System.Runtime.InteropServices.COMException (0x80005000)：未知错误 (0x80005000)
> 
> 在 System.DirectoryServices.DirectoryEntry.Bind（布尔 throwIfFail）
> 
> 在 System.DirectoryServices.DirectoryEntry.Bind()
> 
> 在 System.DirectoryServices.DirectoryEntry.get_NativeObject()
> 
> 在 _Default.Button1_Click

请为我提供解决方案/根据要求修改代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T05:52:55.700

DirectoryEntry 中缺少服务器名称

代替

```
Dim entry As New DirectoryEntry("LDAP://xyz.com/dc=xyz,dc=com", TextBox1.Text, TextBox2.Text) 
```

它应该是

```
Dim entry As New DirectoryEntry("LDAP://SERVER-NAME/xyz.com/dc=xyz,dc=com", TextBox1.Text, TextBox2.Text) 
```

# php - 我可以从数据库中获取我的盐，然后在同一个查询中检查密码吗？

> ID：13720510
> 
> 赞同：1
> 
> 时间：2012-12-05T09:59:00.333
> 
> 标签：php, mysql, hash, login, passwords

我最近添加了一个使用存储在成员表中的唯一盐的类。这是我使用盐之前的登录脚本：

```
 $sql = 'SELECT id, username FROM member WHERE username = ? AND pass = ?';

    $result = $this->DB->query($sql, array($username, $pass));
    foreach($result as $record) {
        $user = [
    "id" => $record['id'],
    "username" => $record['name']];
}

if (empty($user)) {
        // Display errors
    } else {
            // Login by sending the array of data to login function
        self::login($user);
    } 
```

现在，我也想买盐。有什么方法可以在不使用超过 1 个查询的情况下做到这一点？我可以通过从查询开始以获取用户通行证和加盐来使其工作，但有没有更好的方法。感觉有点像黑客攻击，还是根本无法避免？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T10:01:22.613

您可以这样做（假设`pass`创建为`MD5($salt . $password)`并且您`salt`在`member`表中命名了列）：

```
$sql = 'SELECT id, username FROM member WHERE username = ?
           AND pass = MD5(CONCAT(member.salt, ?))'; 
```

这样，MySQL 直接检查在*[`CONCAT`](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_concat)-ing*插入密码和盐之后创建的存储散列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T11:53:13.860

您的数据库不提供密码的安全散列函数，`MD5`任何其他快速散列函数都不应该用于散列密码。

这就是为什么您无法通过单个查询来检查您的密码哈希的原因。相反，您可以对数据库进行一次查询，获取密码哈希：

```
SELECT username, pass FROM member WHERE username = ? 
```

现在您可以`pass`使用 php 进行检查，而不是使用 SQL 进行检查。这样您也只需要 1 个查询，但可以使用安全哈希算法。盐可以`pass`与哈希值一起存储在同一字段中。

推荐使用**BCrypt**。PHP 5.5 将拥有自己的功能`password_hash()`并`password_verify()`准备就绪，以简化此任务。有一个适用于 PHP 5.3/5.4 的[兼容包](https://wiki.php.net/rfc/password_hash)，可在[password_compat](https://github.com/ircmaxell/password_compat)下载。

# javascript - html5的 不会在 chrome 中使用 jquery 淡出

> ID：13720511
> 
> 赞同：0
> 
> 时间：2012-12-05T09:59:13.780
> 
> 标签：javascript, jquery, html, html5-video

Javascript：

```
$("video").bind('ended', function(){
$("video").fadeOut(2000,function(){$("video").remove();});});​ 
```

HTML：

```
<video autobuffer controls autoplay>
<source id="mp4" src="http://grochtdreis.de/fuer-jsfiddle/video/sintel_trailer-480.mp4" type="video/mp4">
</video> 
```

​CSS：

```
video {
    width: 100%; 
    height: 100%;
      } 
```

在 Firefox 中，随着视频的结束，它会淡出。在 Chrome 中，只有控件淡出，视频保持黑色，淡出完成后消失。为什么它在 Chrome 中不起作用，但在 Firefox 中起作用？（在 Firefox 中我尝试了相同的视频，但使用 .ogg 格式）

编辑：我将视频背景更改为#ffffff，淡入淡出似乎向后工作！它消失，淡入，然后再次消失。为什么？​</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T10:19:34.147

你用的是什么版本的jquery？

使用 JQuery 1.8 (with chrome)，在这个[DEMO](http://jsfiddle.net/velthune/HpHe7/2/)中你可以看到你的代码工作正常！也许你的问题在其他地方..

```
$("video").bind('ended', function(){
   console.log("video ended");
   $("video").fadeOut(2000,function(){
      $("video").remove();
   });
});​ 
```

# 更新

如果您的代码仍然无法在 chrome 中运行，请尝试绑定另一个事件。

[这](http://www.w3.org/2010/05/video/mediaevents.html)是参加考试的一个很好的参考。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-08T02:07:28.620

虽然我不清楚浏览器之间不一致的原因，但我能够重现它并通过添加父 div 和淡化 div 来解决它。

因此，html 将是：

```
<div>
  <video autobuffer controls autoplay>
    <source id="mp4" src="http://grochtdreis.de/fuer-jsfiddle/video/sintel_trailer-480.mp4" type="video/mp4">
  </video>
</div> 
```

然后，JS将是：

```
$("video").bind('ended', function(){
    $("video").parent().fadeOut(2000,function(){
        $("video").remove();
    });
});​ 
```

# iphone - 没有互联网连接时的ios phonegap webview事件

> ID：13720514
> 
> 赞同：1
> 
> 时间：2012-12-05T09:59:32.613
> 
> 标签：iphone, objective-c, ios, xcode, cordova

我正在使用cordova`webview`加载一个html文件，该文件有一个按钮，使用js在点击时触发shouldStartLoad事件。

一切工作正常，除非没有互联网连接，按下相同的按钮时`shouldStartLoad`不会触发事件。我需要拦截该触发器以显示本机警报，但似乎没有任何反应，如果互联网连接再次可用，单击时也会再次触发事件。控制台未显示任何信息。`webview`没有连接时如何在科尔多瓦上拦截这种状态？

```
- (BOOL)webView:(UIWebView*)theWebView shouldStartLoadWithRequest:(NSURLRequest*)request 
navigationType:(UIWebViewNavigationType)navigationType; 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-05T11:29:11.343

如果没有互联网连接并且您按下按钮来触发某些事件，请检查`UIWebViewDelegate`调用的方法`didFailWithError`：

```
- (void)webView:(UIWebView *)webView didFailLoadWithError:(NSError *)error {

     //Check the error type and show the appropriate alert to user.
} 
```

并且当您使用 Phonegap 时，您始终可以在触发任何加载请求之前先使用[Connection API检查互联网连接：](http://docs.phonegap.com/en/2.2.0/cordova_connection_connection.md.html#Connection)

```
<!DOCTYPE html>
<html>
  <head>
    <title>navigator.connection.type Example</title>

    <script type="text/javascript" charset="utf-8" src="cordova-2.2.0.js"></script>
    <script type="text/javascript" charset="utf-8">

    document.addEventListener("deviceready", onDeviceReady, false);

    function onDeviceReady() {
        //checkConnection();
    }

    function checkConnection() {
        var networkState = navigator.connection.type;

        var states = {};
        states[Connection.UNKNOWN]  = 'Unknown connection';
        states[Connection.ETHERNET] = 'Ethernet connection';
        states[Connection.WIFI]     = 'WiFi connection';
        states[Connection.CELL_2G]  = 'Cell 2G connection';
        states[Connection.CELL_3G]  = 'Cell 3G connection';
        states[Connection.CELL_4G]  = 'Cell 4G connection';
        states[Connection.NONE]     = 'No network connection';

        alert('Connection type: ' + states[networkState]);
        if(networkState==Connection.NONE)
          return false;
        else
         return true; 
    }
    function loadGoogle() {

      if(checkConnection()){
       // Do your logical stuff here
       window.location="https://google.com";
      }
      else {
        // Handle connection error 
      }
    }
    </script>
  </head>
  <body>
    <p>A dialog box will report the network state.</p>
    <button onclick="loadGoogle()">Load Google</button>
  </body>
</html> 
```

# facebook - 将 OAuth 与 twitter 结合使用并防止重复注册

> ID：13720516
> 
> 赞同：0
> 
> 时间：2012-12-05T09:59:36.403
> 
> 标签：facebook, twitter, oauth, openid

我正在我的网站上实施 OAuth。我打算允许某人使用他们的 Facebook、Google 或 Twitter 帐户登录，因为我相信这会占据很大的市场份额。

然而，虽然 Facebook 和 Google 允许您接收用户的电子邮件地址，但 Twitter 不允许。如果有人通过 Facebook 或 Google 登录并在下次我识别出他们是同一个用户并向他们提供他们的内容时使用不同的方法，这会给多个服务的订阅者带来问题。

如果有人后来使用 Twitter，但没有某种形式的唯一标识符来匹配从 Facebook 或 Google 收到的数据，我看不到用户是否已经注册，并被迫向用户提供一个全新的帐户，并且不允许他们访问数据他们可能已经累积。

当某人通过 Twitter 登录时，是否可以识别出之前是否通过 Facebook 或 Google 授权访问您的网站？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T12:47:16.827

我还没有找到办法。我实现它的方式是让用户在注册后能够添加更多服务。主要是因为用户可以使用不同的电子邮件地址在 facebook、twitter 和 google 上注册他们的帐户。

不幸的是，我有......而且我希望能够将我的所有服务链接到同一个帐户，即使我没有在所有这些服务上使用相同的电子邮件。

# mercurial - 是否可以通过添加子存储库来更新？

> ID：13720517
> 
> 赞同：2
> 
> 时间：2012-12-05T09:59:37.677
> 
> 标签：mercurial, mercurial-subrepos

我的存储库中有一个文件夹。然后我将此文件夹设为子存储库（具有完全相同的文件），提交并推送此更改。现在我无法通过该提交更新回来。这是我收到的信息：

```
% hg update --repository <path to repo> --config ui.merge=internal:fail --rev 1159 --clean
abort: path 'subrepo\include\header.h' is inside nested repo 'subrepo'
[command returned code 255 Wed Dec 05 11:57:45 2012] 
```

subrepo`subrepo`现在所在的文件夹的名称在哪里。有什么方法可以解决这个问题并更新到早期版本？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T16:14:49.930

找到解决方案：删除有问题的文件夹，然后使用“放弃更改”选项进行更新。像魅力一样工作。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-05T15:01:57.593

经过一番谷歌搜索，这看起来与[警告 3](http://mercurial.selenic.com/wiki/Subrepository#Caveats)直接相关，引用“更新/合并当前无法完全删除子存储库，因为这可能会丢失仅本地更改”。还要注意 5 个状态“未处理普通文件和子存储库之间的冲突”。

有趣的是，我以前从未见过的东西，子存储库被认为是“[不得已而为之的功能](http://mercurial.selenic.com/wiki/FeaturesOfLastResort)”，也就是说，如果您能提供帮助，您应该尽量不要使用它。

可能不是您要找的答案。

一种解决方法是通过克隆来获得您的修订......您可以在创建子存储库之前使用基于修订的新克隆：

```
% hg clone --repository <path to repo> new_copy --rev 1159 
```

这将克隆到那时的所有内容，因此您将丢失任何“未来历史”，但至少能够恢复到早期版本。

# silverlight - 我们应该再次设置 ItemsSource 还是更新视图模型

> ID：13720523
> 
> 赞同：0
> 
> 时间：2012-12-05T09:59:53.923
> 
> 标签：silverlight, windows-phone-7, listbox, observablecollection, itemssource

我有一个视图模型（`ObservableCollection`列表）设置`ItemsSource`为`ListBox`. 当我刷新这个视图模型（从网络获取新数据）时，我应该`ItemsSource`重新设置，还是让它通知`ListBox`？

哪种解决方案的性能最高？

P/S：首选针对 Windows Phone 7 的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T10:30:40.700

如果您将 ListBox 的 ItemSource 设置为 ObservableCollection，则无需执行任何操作。只需在 ObservableCollection 中添加/删除项目即可。

# maven - Sphinx 有 SBT 插件吗？

> ID：13720524
> 
> 赞同：1
> 
> 时间：2012-12-05T09:59:55.813
> 
> 标签：maven, sbt, python-sphinx, docbook

很多人都认为 Sphinx 是一个了不起的文档工具......所以我决定看看它。我曾经在 DocBook 中编写我的技术文档并使用 Maven 插件 (Docbkx) 生成 HTML/PDF 输出 - 我只需要安装 Maven，设置所需的依赖项，等等，我得到了我需要的一切。

回到 Sphinx... 是否有一个 SBT 插件可以让我以与 DocBook/Maven 相同的方式生成 HTML/PDF 输出？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T19:07:21.347

是的，有一个直接来自 SBT 开发人员的插件：[https ://github.com/sbt/sbt-site#sphinx-site-generation](https://github.com/sbt/sbt-site#sphinx-site-generation)

# c++ - unordered_map of iterators - 如何检查未初始化的元素

> ID：13720532
> 
> 赞同：1
> 
> 时间：2012-12-05T10:00:37.747
> 
> 标签：c++, stl, iterator, hashmap, unordered-map

我有一个 `unordered_map<string, list<SomeClass>::iterator>`

我想在这个地图中插入一个元素，但前提是它不存在。如果存在，我不想覆盖现有项目。另外，我想避免进行两次查找以检查项目是否存在，然后再进行插入。我得出的结论是我应该使用 operator[] 来获取一个带有键的元素，检查它是否有效，如果不是，则初始化它。问题是该元素是一个迭代器，我必须检查它是否已初始化，这实际上是不可能的。我可以使用从列表迭代器类派生的类，并实现默认构造函数以将其初始化为“无效”值，但在构造函数中我无权访问列表实例以获取其 end() 迭代器。任何想法如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T10:02:43.373

使用`insert`or `emplace`，如果它已经存在，它不会覆盖该值：

```
auto i = m.insert(std::make_pair("hello"), my_iterator);
auto j = m.emplace("hello", my_iterator);                  // same 
```

您可以测试`i.second`以查看插入是否成功，并且`i.first`是映射元素的迭代器。

# android - 实时音频检测表格麦克风

> ID：13720535
> 
> 赞同：0
> 
> 时间：2012-12-05T10:00:55.580
> 
> 标签：android

我需要实时确定来自麦克风的声音频率。我知道必须对传入的音频数据应用 FFT，但我想知道是否有人知道一个库或一些示例代码来显示如何获取实时音频？

# android - Android 中的 RSS 提要解析给出此错误="org.apache.harmony.xml.ExpatParser$ParseException: At line 682, column 0: junk after document element"

> ID：13720542
> 
> 赞同：1
> 
> 时间：2012-12-05T10:01:28.700
> 
> 标签：android, eclipse

我的相同代码在其他计算机上运行，​​但是当我在我的 PC 上运行它时，它会出现上述错误。我正在使用 Eclipse Juno IDE。今天我卸载了我的 sdk 并再次安装，但我的问题仍在继续。如何解决我的问题请帮助我。

提前谢谢

xml解析类代码

```
import java.io.IOException;
import java.io.InputStream;
import java.net.MalformedURLException;
import java.net.URL;
import java.util.ArrayList;
import java.util.List;

import com.example.shareslab.Message;

import android.sax.Element;
import android.sax.EndElementListener;
import android.sax.EndTextElementListener;
import android.sax.RootElement;
import android.util.Xml;

public class BaseFeedParser {

    public static String feedUrlString = "http://www.shareslab.com/rss.xml";

    // names of the XML tags
    static final String RSS = "rss";
    static final String CHANNEL = "channel";
    static final String ITEM = "item";

    static final String PUB_DATE = "pubDate";
    static final String DESCRIPTION = "description";
    static final String LINK = "link";
    static final String TITLE = "title";    
    private final URL feedUrl;

    protected BaseFeedParser(){
        try {
            this.feedUrl = new URL(feedUrlString);
        } catch (MalformedURLException e) {
            throw new RuntimeException(e);
        }
    }

    protected InputStream getInputStream() {
        try {
            return feedUrl.openConnection().getInputStream();
        } catch (IOException e) {
            throw new RuntimeException(e);
        }
    }

    public List<Message> parse() {
        final Message currentMessage = new Message();
        RootElement root = new RootElement(RSS);
        final List<Message> messages = new ArrayList<Message>();
        Element itemlist = root.getChild(CHANNEL);
        Element item = itemlist.getChild(ITEM);
        item.setEndElementListener(new EndElementListener(){
            @Override
            public void end() {
                messages.add(currentMessage.copy());
            }
        });
        item.getChild(TITLE).setEndTextElementListener(new EndTextElementListener(){
            @Override
            public void end(String body) {
                currentMessage.setTitle(body);
            }
        });
        item.getChild(LINK).setEndTextElementListener(new EndTextElementListener(){
            @Override
            public void end(String body) {
                currentMessage.setLink(body);
            }
        });
        item.getChild(DESCRIPTION).setEndTextElementListener(new EndTextElementListener(){
            @Override
            public void end(String body) {
                currentMessage.setDescription(body);
            }
        });
        item.getChild(PUB_DATE).setEndTextElementListener(new EndTextElementListener(){
            @Override
            public void end(String body) {
                currentMessage.setDate(body);
            }
        });
        try {
            Xml.parse(this.getInputStream(), Xml.Encoding.UTF_8, root.getContentHandler());
        } catch (Exception e) {
            throw new RuntimeException(e);
        }
        return messages;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T22:45:07.027

如果 XML 在非 Windows 机器上工作，它可能是行尾。在返回值之前在方法中使用[字符串替换。](https://stackoverflow.com/questions/2163045/)`getInputStream`例如：

```
String text = readFileAsString("textfile.txt");
text = text.replace("\n", "").replace("\r", "") 
```

# visual-studio-2010 - 支持编码的 UI 测试 .net 框架

> ID：13720550
> 
> 赞同：2
> 
> 时间：2012-12-05T10:02:14.240
> 
> 标签：visual-studio-2010

我正在尝试在我的程序中使用一些 Microsoft 编码的 UI 测试 dll。我正在使用 .Net 3.5 框架。

我的问题是；
是否可以`Microsoft.VisualStudio.TestTools.UITesting`在 VS 2010 中与 .net 3.5 一起使用。

当我尝试添加显示的错误时，显示“类型或名称空间名称“VisualStudio”在名称空间“Microsoft”中不存在（您是否缺少程序集引用？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T09:25:19.123

简短的回答是 - `Microsoft.VisualStudio.TestTools.UITesting`dll 需要 .NET 4.0 及更高版本。你*不能*让它与 3.5 一起工作。

看到这一点的最简单方法是创建一个新的 3.5 应用程序并手动尝试添加 dll。它位于`C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\PublicAssemblies`. 任何将其添加为参考的尝试都将导致 Visual Studio 警告它*需要更高版本的 .Net 框架*。

另外，请注意，如果您在 Reflector 或[IL Spy](http://ilspy.net/)中打开 DLL，您将看到`TargetFramework`4.0

# c# - 为 gridview 字段设置别名

> ID：13720555
> 
> 赞同：1
> 
> 时间：2012-12-05T10:02:22.693
> 
> 标签：c#, asp.net, c#-4.0

我的表有一个字段`fld_status`。它保存值 0 和 1。`0`表示活动，`1`表示不活动。但我想`0`在 Gridview 中显示含义全名，如 active for。`Gridview`除了查询之外，有没有办法改变这个值 0 和 1 有意义的名称？

```
 <asp:TemplateField ItemStyle-Width="40px" HeaderText="STATUS">
                                    <ItemTemplate>
                                        <asp:Label ID="lbl_status" runat="server" Text='<%# Eval("Fld_status")%>'></asp:Label>
                                    </ItemTemplate>
                                    <ItemStyle Width="40px"></ItemStyle>
                                </asp:TemplateField> 
```

在 gridview STATUS 列中显示 0 和 1。我只想显示基于 o 和 1 的活动和非活动。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T10:11:16.193

如果您使用`TemplateField`：

```
<asp:TemplateField ItemStyle-Width="40px" HeaderText="STATUS">
    <ItemTemplate>
        <asp:Label ID="lbl_status" runat="server" 
            Text='<%# (Eval("Fld_status")==1) ? "active" : "inactive" %>'>
        </asp:Label>
    </ItemTemplate>
    <ItemStyle Width="40px"></ItemStyle>
</asp:TemplateField> 
```

或从 GridView 的`RowDataBound`：

```
protected void gridview1_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        DataRow row = ((DataRowView)e.Row.DataItem).Row;
        bool isActive = row.Field<int>("Fld_status") == 1;
        Label lbl_status = (Label) e.Row.FindControl("lbl_status");
        lbl_status.Text = isActive ? "active" : "inactive"; 
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T10:13:12.123

您可以在`ItemTepmlate`.

```
<ItemTemplate><%# Eval("Fld_status") ? "active" : "inactive" %></ItemTemplate> 
```

# http - AcceptSecurityContext 随机 SEC_E_LOGON_DENIED

> ID：13720556
> 
> 赞同：1
> 
> 时间：2012-12-05T10:02:25.293
> 
> 标签：http, authentication, single-sign-on, sspi

我正在尝试在基于 http.sys 的服务器中实现单点登录（使用 IOCP），并且我遇到了 AcceptSecurityContext 的奇怪问题，它会随机失败并显示 SEC_E_LOGON_DENIED。

从同一台客户端机器连接到同一台服务器机器时（大约 50% 的时间），即使只有一个客户端只有一个 http 连接，我也会随机出现故障。两台机器都在同一个域中，它们都不是域控制器。

失败的调用是挑战-响应序列中的第二个（也是最后一个）调用，第一个总是成功的。

当我在 AcceptSecurityContext 调用之前在 IDE 中有一个断点时（没有其他任何更改），身份验证总是成功（据我测试）。

怀疑时间问题，我在通话前放置了一个 Sleep() ，但这并没有提高成功率。

此外，当从运行 http 服务器的同一台计算机连接时，身份验证始终成功。

无论客户端浏览器（IE 和 Chrome）如何，行为都是相同的。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T08:34:49.497

发现并解决的问题，它与base64数据的解码问题有关，一个字符（'+'）被错误地转换为空格''，因此该问题仅在该字符存在时发生。

为什么在设置调试器断点或从本地连接时没有发生这种情况尚不清楚……也许是一些计时元素存储在那里。

# c# - 在 WPF C# 中绑定可见性转换器

> ID：13720559
> 
> 赞同：4
> 
> 时间：2012-12-05T10:02:37.640
> 
> 标签：c#, wpf, xaml, binding, converter

我有一个类型为集合的依赖属性，当它的回调基于计数触发时，我需要设置屏幕上某些控件的可见性。

但是控件始终处于折叠状态。根据代码，一个控件始终可见。

XAML 绑定是

```
 <TextBlock Text="106 search results for 'a'" Margin="5,0,100,0" Visibility="{Binding CountLabelVisibleReverse, Converter={StaticResource VisibilityConverter}}"/>
 <StackPanel Grid.Row="1" Orientation="Horizontal" Margin="0,0,90,0"  
                            Visibility="{Binding CountLabelVisible, Converter={StaticResource VisibilityConverter}}">
 <TextBlock Text="Sort By"  />
 <ComboBox Style="{StaticResource ComboBoxStyle1}" Width="100" x:Name="ComboBoxSorting" ItemsSource="{Binding SortBy}" />
   </StackPanel> 
```

我的两个属性是

```
 public bool CountLabelVisible { get; set; }

    public bool CountLabelVisibleReverse { get; set; } 
```

依赖属性回调

```
 private static void ItemsCollectionChanged(DependencyObject obj, DependencyPropertyChangedEventArgs eventArgs)
    {
        var listingUserControl = (obj as ListingUserControl);

        var itemsResult = (eventArgs.NewValue as List<ItemsResult>);
        if (listingUserControl != null && itemsResult != null)
        {
            listingUserControl.CountLabelVisible = itemsResult.Count > 0;
            listingUserControl.CountLabelVisibleReverse =itemsResult.Count <= 0;
        }
    } 
```

转换器代码是

```
 public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        if (parameter == null)
            return (bool)value == false ? Visibility.Collapsed : Visibility.Visible;

        return (bool)value ? Visibility.Collapsed : Visibility.Visible;
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T10:13:32.577

您犯了绑定到对绑定有效但不通知更改的自动属性的经典错误，这意味着绑定子系统无法检测更改并更新绑定目标。

要解决此问题，请在视图模型上实现[INotifyPropertyChanged](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx)，然后确保从属性通知属性更改。

例如，我的视图模型的基类中有以下内容：

```
public abstract class BaseViewModel : INotifyPropertyChanged
{

    /// <summary>
    /// Helper method to set the value of a property and notify if the value has changed.
    /// </summary>
    /// <typeparam name="T"></typeparam>
    /// <param name="newValue">The value to set the property to.</param>
    /// <param name="currentValue">The current value of the property.</param>
    /// <param name="notify">Flag indicating whether there should be notification if the value has changed.</param>
    /// <param name="notifications">The property names to notify that have been changed.</param>
    protected bool SetProperty<T>(ref T newValue, ref T currentValue, bool notify, params string[] notifications)
    {
        if (EqualityComparer<T>.Default.Equals(newValue, currentValue))
            return false;

        currentValue = newValue;
        if (notify && notifications.Length > 0)
            foreach (string propertyName in notifications)
                OnPropertyChanged(propertyName);

        return true;
    }

    /// <summary>
    /// Raises the <see cref="E:PropertyChanged"/> event.
    /// </summary>
    /// <param name="propertyName">The name of the property that changed.</param>
    protected void OnPropertyChanged(string propertyName)
    {
        if (this.PropertyChanged != null)
            this.PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
    }

    /// <summary>
    /// Occurs when a property value changes.
    /// </summary>
    public event PropertyChangedEventHandler PropertyChanged;

} 
```

然后在您的常规视图模型中：

```
public class MyViewModel : BaseViewModel
{
    private bool _countLabelVisible;

    public bool CountLabelVisible
    {
        get { return _countLabelVisible; }
        set { SetProperty(ref value, ref _countLabelVisible, true, "CountLabelVisible", "CountLabelVisibleReverse"); }
    }

    public bool CountLabelVisibleReverse { get { return !_countLabelVisible; }} 
} 
```

这样，当`CountLabelVisible`发生更改时，它也会通知属性`CountLabelVisibleReverse`，并且属性`CountLabelVisibleReverse`仅包含一个 getter - 因为它始终是 的倒数`CountLabelVisible`。

这样就可以按照您拥有的方式修复您的代码，但实际情况是您不需要保留该`CountLabelVisibleReverse`属性，而是可以：

*   将逆可见性转换器创建为单独的转换器
*   通过在绑定上传递可选参数来创建多功能可见性转换器
*   堆叠多个转换器，其中一个转换器的输出通过管道传输到下一个转换器的输入

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T10:10:58.720

您需要通知更改：

```
public event PropertyChangedEventHandler PropertyChanged;
private bool _countLabelVisible = false;

private void RaisePropertyChanged(string propertyName)
{
    if (PropertyChanged != null)
        PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
}

public bool CountLabelVisible 
{ 
    get
    {
        return _countLabelVisible;
    }
    set
    {
        _countLabelVisible = value;
        RaisePropertyChanged("CountLabelVisible");
    }
} 
```

绑定“框架”需要被告知绑定需要刷新，这就是 Raise... 的意义所在。这非常快速和肮脏（并且未经测试），但应该演示您需要做什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T10:09:50.877

您绑定的布尔属性是否会在更改时通知视图？像这样：

```
private bool countLabelVisible;
public bool CountLabelVisible
{
  get
  {
    return countLabelVisible;
  }
  set
  {
   if (countLabelVisible != value)
   {
      countLabelVisible = value;
      RaisePropertyChanged(() => CountLabelVisible);
   }
} 
```

为了使带有 lambda 的 RaisePropertyChanged 方法可用，您的视图模型应继承自 NotificationObject

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-05-27T09:25:00.980

布尔到可见性转换器类

```
 public class BoolToVisibilityConverter : IValueConverter
        {
            public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
            {
                return (bool)value ? Visibility.Visible : Visibility.Hidden;
            }

            public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
            {
                throw new NotImplementedException();
            }
        } 
```

下面提到的 Xaml 更改以显示可见性转换器类的使用。此处使用组框来显示可见性。更改单选按钮选择组框将可见/隐藏。

```
 <Page x:Class="WpfApplication.MainWindow"
            xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
            xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
            xmlns:vm="clr-namespace:WpfApplication" HorizontalAlignment="Left" VerticalAlignment="Top"
            Title="Customer"  Loaded="Page_Loaded">
        <Page.Resources>
            <vm:BoolToVisibilityConverter x:Key="converter" 
    </Page.Resources>
<RadioButton Grid.Column="0" x:Name="rdbCustomerDetail"  
    Content="Show Customer" 
    IsChecked="{Binding IsCustomerDetailChecked,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"/>
            <GroupBox Header="Customer Details" Visibility="{Binding 

            Path=IsCustomerDetailChecked, 
            UpdateSourceTrigger=PropertyChanged, 
            Converter={StaticResource  converter}}">
    </GroupBox> 
```

在 ViewModel 中使用 invokepropertychange 不仅仅是您将在您的 xaml 上获得可见性更改。

```
private Boolean isCustomerDetailChecked = false;
    public Boolean IsCustomerDetailChecked
    {
        get
        {
            return isCustomerDetailChecked;
        }
        set
        {
            isCustomerDetailChecked = value;
            InvokePropertyChanged("IsCustomerDetailChecked");
        }
    } 
```

# android-activity - 从方法调用时活动不启动

> ID：13720560
> 
> 赞同：1
> 
> 时间：2012-12-05T10:02:38.073
> 
> 标签：android-activity, localization, oncreate

我有一个活动类（A）和一个非活动类（B）。在 A 中有一些对 B 有用的方法，特别是从 BI 调用 A 的方法，该方法应该返回坐标（实际上 A 通过 GPS 提供程序执行定位）。问题是当我从 B 调用 A 时，活动没有启动并且我得到一个异常。

如何从另一个非活动类调用的方法开始活动？？？

我尝试了不同的解决方案，但都没有奏效。例如，我尝试在方法中启动 onCreate() 提示此指令：

捆绑 tempBundle = new Bundle();

onCreate(tempBundle);

这是活动类的方法：

```
 public double GetCoordinates(boolean value) { 

    Bundle tempBundle = new Bundle();
    onCreate(tempBundle);

    if(value) 
        coordinate = latitude; 
    else 
        coordinate=longitude;

    return coordinate; 
   } 
```

这些是非活动类中的说明：

```
 Localization loc = new Localization();

            LATITUDE = loc.GetCoordinates(true); 

            LONGITUDE = loc.GetCoordinates(false); 
```

请问有什么提示吗？？

# c# - 在 C# 或 Java 中是否有类似 Javascript Eval 的东西

> ID：13720565
> 
> 赞同：2
> 
> 时间：2012-12-05T10:02:49.073
> 
> 标签：c#, java, javascript

> **可能重复：**
> [在 Java 中使用 eval](https://stackoverflow.com/questions/2605032/using-eval-in-java)

在 javascript 中，我可以使用 eval 调用函数，例如：

```
eval('my_javascript_code;') 
```

在 C# 或 JAVA 中是否有类似的东西可以让我运行 C# 或 JAVA 代码？

```
String time = Eval("My csharp code"); 
```

还是我完全偏离了轨道？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T10:05:18.083

没有直接的模拟 - 没有内置函数可以接受字符串并将其作为可执行代码运行。

您可以使用任一平台的不同[反射](http://en.wikipedia.org/wiki/Reflection_%28computer_programming%29)选项来[动态执行代码](https://www.google.co.uk/search?q=dynamic%20code%20execution&aq=f&oq=dynamic%20code%20execution&aqs=chrome.0.57j0l3j62l2.6012&sugexp=chrome,mod=11&sourceid=chrome&ie=UTF-8)。这些包括在代码中创建类、编译它们并执行它们，这并不容易或快速。

# python - Django-invitation，邀请模板给出了 DoesNotExist 类型错误

> ID：13720566
> 
> 赞同：0
> 
> 时间：2012-12-05T10:02:48.387
> 
> 标签：python, django, invite

我正在使用应用程序 django-register 和 django-invitation。

该页面`url/accounts/invite/`显示邀请某人的表格。当我输入电子邮件地址并单击“发送邀请”时，我得到一个 DoesNotExist 异常，异常值为

```
Site matching query does not exist. 
```

我似乎无法弄清楚问题是什么。值得一提的是，当我使用注册应用程序注册帐户时，它运行良好，并且会向注册人发送一封电子邮件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T10:13:44.077

修改您`settings.py`喜欢的[示例](http://code.larlet.fr/django-invitation/src/127ac49785f6/examples/invitation_project/settings.py?at=default)：

```
SITE_ID = 1
INSTALLED_APPS = (
    ...
    'django.contrib.sites',
    ...
) 
```

或者只是我建议您检查`django-invatation`模板目录下的所有文件，删除或替换所有标签，包括`{{ site }}`，如果您不需要它。

# c# - 如何使在“while”中有效的“do”块内声明的变量？

> ID：13720567
> 
> 赞同：1
> 
> 时间：2012-12-05T10:02:49.603
> 
> 标签：c#, while-loop

我写了一段代码：

```
do
{
    string html = new StreamReader(response3.GetResponseStream(),
                                   Encoding.UTF8).ReadToEnd();
    if (html.Contains("link-censored"))
    {
        log("[!] Banned link\r\n");
        return -2; // delete url from txt
    }
    else if (html.Contains("data-with-image"))
    {
        log("[+] Add link\r\n");
    }
    else
    {
        log("[?] Smthng wrong with link\r\n");
        return -2; //-3
    }
}
while (html.Contains("data-with-image")); 
```

但我有一个错误名称'html'在最后一行的当前上下文中不存在。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T10:04:58.220

`html`范围**在**`do {...}`; _ 只需移动声明：

```
string html;
do
{
    html = new StreamReader(response3.GetResponseStream(),
                                   Encoding.UTF8).ReadToEnd();
    //...
}
while (html.Contains("data-with-image")); 
```

请注意，我们不需要*分配*给`html`- 因为“明确分配”的规则保证它在到达`while`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T10:04:29.040

字符串变量的范围`html`在 的主体内`do-while loop`，在循环主体外定义 html 以使其可访问`condition part`。

```
string html = string.Empty; 

do
{
    html = new StreamReader(response3.GetResponseStream(),
                                   Encoding.UTF8).ReadToEnd();
    if (html.Contains("link-censored"))
    {
        log("[!] Banned link\r\n");
        return -2; // delete url from txt
    }
    else if (html.Contains("data-with-image"))
    {
        log("[+] Add link\r\n");
    }
    else
    {
        log("[?] Smthng wrong with link\r\n");
        return -2; //-3
    }
}
while (html.Contains("data-with-image")); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T10:34:36.660

如果您找到预期的情况，请退出。

```
string html = string.Empty; 

do
{
    html = new StreamReader(response3.GetResponseStream(),
                                   Encoding.UTF8).ReadToEnd();
    if (html.Contains("link-censored"))
    {
        log("[!] Banned link\r\n");
        return -2; // delete url from txt
    }
    else if (html.Contains("data-with-image"))
    {
        log("[+] Add link\r\n");
        return 0;
    }
    else
    {
        log("[?] Smthng wrong with link\r\n");
        return -2; //-3
    }
}
while (html.Contains("data-with-image")); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T10:08:30.070

我认为问题在于变量“html”只存在于循环中。尝试在循环之前声明它：

```
string html = null;
do {
    html = ...
    ...
} while(html.Contains("data-with-image")); 
```

# tridion - 页面和组件的发布陷入不同阶段

> ID：13720568
> 
> 赞同：1
> 
> 时间：2012-12-05T10:02:51.737
> 
> 标签：tridion, tridion-2011, tridion-content-delivery

从 Tridion 5.3 升级到 Tridion 2011 SP1 后，我们再次发布大量页面和组件（因为我们将现有的组件模板和页面模板转换为复合模板。在发布时，少数页面和组件在“准备传输”或“正在传输”或“等待部署”状态，最终在不同的时间因不同的错误而失败

1) 传输失败：无法使用 HTTPS 传输 tcm_0-277383-66560.Content.zip 2) 轮询目的地通知：iH1DJ7u5t1piMKRZi9OS0Q== 已超出交易轮询尝试次数：tcm:0-277361-66560

解决此问题的任何想法，我们有 1 个线程用于发布和渲染。数据库是 SQL Server，使用 HTTPUpload.aspx 进行上传。

CD_Transport.log

```
2012-12-05 05:50:39,302 DEBUG TransportService - Starting handing of a transaction
2012-12-05 05:50:39,302 INFO  TransactionProcessor - No existing transport transaction information for: tcm:0-277451-66560 creating new transaction state
2012-12-05 05:50:39,317 DEBUG TransactionHeader - Writing[TransactionHeader transactionId=tcm:0-277451-66560 control=WAIT] to C:\temp\tcm_0-277451-66560.Content\transaction.xml
2012-12-05 05:50:39,317 DEBUG DestinationControllerFactory - Returning existing destination controller.
2012-12-05 05:50:39,333 INFO  TransportService - Starting transport handling of transaction: tcm:0-277451-66560
2012-12-05 05:50:39,333 DEBUG DestinationControllerFactory - Returning existing destination controller.
2012-12-05 05:50:39,333 INFO  TransportPoolManager - Creating a new TransportPoolConnector, because no available connectors in connection pool
2012-12-05 05:50:39,333 DEBUG TransportPoolConnector - Configuring TransportPoolConnector.
2012-12-05 05:50:39,333 DEBUG HTTPSTransportConnector - Authentication information supplied, setting basic credentials
2012-12-05 05:50:39,333 DEBUG DestinationProgressWorker - Starting retrieving active transactions at destination: bNZqVt3QAt1olhLc6Hdaqw==
2012-12-05 05:50:39,364 DEBUG DestinationProgressWorker - Found 0 transactions in progress and 0 waiting transactions.
2012-12-05 05:50:39,364 DEBUG TransportPoolManager - Connector is registered for reuse: HTTPS[Password[******], UserName[TridionAppUser], URL[http://10.97.51.151:8082/httpupload.aspx]] available: 1
2012-12-05 05:50:39,364 INFO  DestinationController - Transaction fits inside current window, proceeding transaction: tcm:0-277451-66560
2012-12-05 05:50:39,364 DEBUG TransactionManager - Destination is available for transport: bNZqVt3QAt1olhLc6Hdaqw==
2012-12-05 05:50:39,364 DEBUG TransactionManager - All destinations are available for transport of transaction: tcm:0-277451-66560
2012-12-05 05:50:39,364 INFO  ZipWorker - Preparing TransportPackage for id: tcm:0-277451-66560
2012-12-05 05:50:39,364 DEBUG ZipWorker - Zipping Transportpackage: c:\Temp\tcm_0-277451-66560.Content
2012-12-05 05:50:44,746 INFO  ZipWorker - Creating rollback and commit packages for transaction: tcm:0-277451-66560
2012-12-05 05:50:44,762 DEBUG TransactionHeader - Writing[TransactionHeader transactionId=tcm:0-277451-66560 control=PREPARE] to D:\Tridion\bin\transactions\tcm_0-277451-66560.PREPARE\transaction.xml
2012-12-05 05:50:44,777 DEBUG ZipWorker - Create Prepare package for transacton: tcm:0-277451-66560 at D:\Tridion\bin\transactions\tcm_0-277451-66560.PREPARE.zip
2012-12-05 05:50:44,777 DEBUG TransactionHeader - Writing[TransactionHeader transactionId=tcm:0-277451-66560 control=COMMIT] to D:\Tridion\bin\transactions\tcm_0-277451-66560.COMMIT\transaction.xml
2012-12-05 05:50:44,793 DEBUG ZipWorker - Create Commit package for transacton: tcm:0-277451-66560 at D:\Tridion\bin\transactions\tcm_0-277451-66560.COMMIT.zip
2012-12-05 05:50:44,793 DEBUG TransactionHeader - Writing[TransactionHeader transactionId=tcm:0-277451-66560 control=ROLLBACK] to D:\Tridion\bin\transactions\tcm_0-277451-66560.ROLLBACK\transaction.xml
2012-12-05 05:50:44,793 DEBUG ZipWorker - Create Rollback package for transacton: tcm:0-277451-66560 at D:\Tridion\bin\transactions\tcm_0-277451-66560.ROLLBACK.zip
2012-12-05 05:50:44,809 DEBUG ZipWorker - Zipping has been completed for transaction: tcm:0-277451-66560
2012-12-05 05:50:44,809 DEBUG StepPrepare - Zipping has been completed successfully for transaction: tcm:0-277451-66560
2012-12-05 05:50:44,809 DEBUG DestinationControllerFactory - Returning existing destination controller.
2012-12-05 05:50:44,824 DEBUG DestinationControllerFactory - Returning existing destination controller.
2012-12-05 05:50:44,840 DEBUG DestinationController - Transports in progress: 1
2012-12-05 05:50:44,840 DEBUG ParallelDestinationWorker - Waiting for transport result for: tcm:0-277451-66560
2012-12-05 05:50:44,840 DEBUG TransportPoolManager - Returning a freely available and alive TransportConnector
2012-12-05 05:50:44,840 DEBUG TransportSender - Starting sending transportPackage: D:\Tridion\bin\transactions\tcm_0-277451-66560.Content.zip
2012-12-05 05:50:45,074 DEBUG DestinationController - Checking destination for transport metadata
2012-12-05 05:50:45,074 INFO  TransportPoolManager - Creating a new TransportPoolConnector, because no available connectors in connection pool
2012-12-05 05:50:45,074 DEBUG TransportPoolConnector - Configuring TransportPoolConnector.
2012-12-05 05:50:45,074 DEBUG HTTPSTransportConnector - Authentication information supplied, setting basic credentials
2012-12-05 05:50:45,074 DEBUG TransportPoolManager - Connector is registered for reuse: HTTPS[Password[******], UserName[TridionAppUser], URL[http://10.97.51.151:8082/httpupload.aspx]] available: 1
2012-12-05 05:50:45,074 DEBUG DestinationController - Starting polling on destination: bNZqVt3QAt1olhLc6Hdaqw==
2012-12-05 05:50:45,074 DEBUG TransportPoolManager - Returning a freely available and alive TransportConnector
2012-12-05 05:50:45,105 DEBUG TransportPoolManager - Connector is registered for reuse: HTTPS[Password[******], UserName[TridionAppUser], URL[http://10.97.51.151:8082/httpupload.aspx]] available: 1
2012-12-05 05:50:45,105 DEBUG DestinationController - Polling attempt 1 for transaction: tcm:0-277451-66560 on destination: bNZqVt3QAt1olhLc6Hdaqw==
2012-12-05 05:50:45,277 DEBUG TransportService - Starting handing of a transaction
2012-12-05 05:50:45,277 INFO  TransportService - Starting transport handling of transaction: tcm:0-277451-66560
2012-12-05 05:50:45,292 DEBUG DestinationControllerFactory - Returning existing destination controller.
2012-12-05 05:50:45,292 DEBUG TransportPoolManager - Returning a freely available and alive TransportConnector
2012-12-05 05:50:45,292 DEBUG DestinationProgressWorker - Starting retrieving active transactions at destination: bNZqVt3QAt1olhLc6Hdaqw==
2012-12-05 05:50:45,323 DEBUG DestinationProgressWorker - Found 0 transactions in progress and 0 waiting transactions.
2012-12-05 05:50:45,323 DEBUG TransportPoolManager - Connector is registered for reuse: HTTPS[Password[******], UserName[TridionAppUser], URL[http://10.97.51.151:8082/httpupload.aspx]] available: 1
2012-12-05 05:50:45,323 INFO  DestinationController - Transaction fits inside current window, proceeding transaction: tcm:0-277451-66560
2012-12-05 05:50:45,323 DEBUG TransactionManager - Destination is available for transport: bNZqVt3QAt1olhLc6Hdaqw==
2012-12-05 05:50:45,323 DEBUG TransactionManager - All destinations are available for transport of transaction: tcm:0-277451-66560
2012-12-05 05:50:45,323 INFO  ZipWorker - Preparing TransportPackage for id: tcm:0-277451-66560
2012-12-05 05:50:45,323 DEBUG ZipWorker - Zipping Transportpackage: c:\Temp\tcm_0-277451-66560.Content
2012-12-05 05:50:45,323 INFO  ZipWorker - Creating rollback and commit packages for transaction: tcm:0-277451-66560
2012-12-05 05:50:45,323 DEBUG TransactionHeader - Writing[TransactionHeader transactionId=tcm:0-277451-66560 control=PREPARE] to D:\Tridion\bin\transactions\tcm_0-277451-66560.PREPARE\transaction.xml
2012-12-05 05:50:45,323 DEBUG ZipWorker - Create Prepare package for transacton: tcm:0-277451-66560 at D:\Tridion\bin\transactions\tcm_0-277451-66560.PREPARE.zip
2012-12-05 05:50:45,323 DEBUG TransactionHeader - Writing[TransactionHeader transactionId=tcm:0-277451-66560 control=COMMIT] to D:\Tridion\bin\transactions\tcm_0-277451-66560.COMMIT\transaction.xml
2012-12-05 05:50:45,339 DEBUG ZipWorker - Create Commit package for transacton: tcm:0-277451-66560 at D:\Tridion\bin\transactions\tcm_0-277451-66560.COMMIT.zip
2012-12-05 05:50:45,339 DEBUG TransactionHeader - Writing[TransactionHeader transactionId=tcm:0-277451-66560 control=ROLLBACK] to D:\Tridion\bin\transactions\tcm_0-277451-66560.ROLLBACK\transaction.xml
2012-12-05 05:50:45,339 DEBUG ZipWorker - Create Rollback package for transacton: tcm:0-277451-66560 at D:\Tridion\bin\transactions\tcm_0-277451-66560.ROLLBACK.zip
2012-12-05 05:50:45,339 DEBUG ZipWorker - Zipping has been completed for transaction: tcm:0-277451-66560
2012-12-05 05:50:45,339 DEBUG StepPrepare - Zipping has been completed successfully for transaction: tcm:0-277451-66560
2012-12-05 05:50:45,339 DEBUG DestinationControllerFactory - Returning existing destination controller.
2012-12-05 05:50:45,339 INFO  StepPhaseOneCommit - Handling transaction control (1st phase commit/rollback) for transaction: tcm:0-277451-66560
2012-12-05 05:50:45,339 DEBUG TransactionControlWorker - Prepare for tcm:0-277451-66560 has failed on some destinations, scheduling rollback
2012-12-05 05:50:45,339 DEBUG DestinationControllerFactory - Returning existing destination controller.
2012-12-05 05:50:45,339 DEBUG DestinationController - Transports in progress: 2
2012-12-05 05:50:45,339 DEBUG ParallelDestinationWorker - Waiting for transport result for: tcm:0-277451-66560
2012-12-05 05:50:45,355 DEBUG TransportPoolManager - Returning a freely available and alive TransportConnector
2012-12-05 05:50:45,355 DEBUG TransportSender - Starting sending transportPackage: D:\Tridion\bin\transactions\tcm_0-277451-66560.ROLLBACK.zip
2012-12-05 05:50:45,370 DEBUG HTTPSTransportConnector - Successfully transport content to destination: http://10.97.51.151:8082/httpupload.aspx
2012-12-05 05:50:45,370 DEBUG TransportSender - Sending D:\Tridion\bin\transactions\tcm_0-277451-66560.ROLLBACK.zip to destination: bNZqVt3QAt1olhLc6Hdaqw== completed.
2012-12-05 05:50:45,370 DEBUG TransportPoolManager - Connector is registered for reuse: HTTPS[Password[******], UserName[TridionAppUser], URL[http://10.97.51.151:8082/httpupload.aspx]] available: 1
2012-12-05 05:50:45,370 DEBUG ParallelDestinationWorker - Received item from transport destination: bNZqVt3QAt1olhLc6Hdaqw==
2012-12-05 05:50:45,370 DEBUG DestinationControllerFactory - Returning existing destination controller.
2012-12-05 05:50:45,370 DEBUG DestinationController - Finalizing transport for transaction: tcm:0-277451-66560 on destination: bNZqVt3QAt1olhLc6Hdaqw==
2012-12-05 05:50:45,370 DEBUG DestinationController - Transports in progress: 2
2012-12-05 05:50:45,386 INFO  StepPhaseOneCommit - Transport was succesfully completed for transaction control: tcm:0-277451-66560
2012-12-05 05:50:45,386 INFO  StepPrepare - Finalizing/cleaning transaction: tcm:0-277451-66560 
```

在进行了很多与投票相关的整体之后，可以进行交易 277451

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T09:12:14.723

今天我们遇到了同样的问题 - 为了解决这个问题，我们采取了以下步骤： -从内容交付服务器的 \bin\config 目录中删除两个 jar 文件（ **jaxb-api.jar**和**jaxb-impl.jar ）。**-交叉验证同一目录下的JDBC连接相关jar文件

**sqljdbc4.jar**与 slf4j-1.7.1.zip 在同一位置。

重启应用相关服务/apache/tomcat等。

通过这样做，我们能够解决上述问题。希望这能解决您的问题谢谢！雇佣兵

# php - 将图像转换为 N 灰度 + 透明度

> ID：13720572
> 
> 赞同：0
> 
> 时间：2012-12-05T10:02:58.907
> 
> 标签：php, image

我一直在尝试各种图像功能的组合，但我似乎无法为此获得好的结果。

我正在尝试将图像转换为固定数量的灰度，加上透明度（如果它存在于原始图像中）。

它需要能够转换真彩色图像和基于调色板的图像。

输出图像应该有...

1.  固定数量的灰度等级，包括纯黑色（0、0、0）和纯白色（255、255、255）。
2.  源像素具有高透明度的任何地方的透明像素。

我的主要问题是 imagetruecolortopalette 的工作，它确实减少了调色板，但似乎总是在这个过程中失去任何透明度。

我最终编写了一段很长、很复杂的代码，逐个像素地分析图像的灰度，然后选择调色板颜色，然后逐个像素地重新创建图像，但是速度很慢，所以我希望有更好的方法。

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T10:16:41.553

大约一年前，我尝试过这样做。但是，由于我仅将图像转换为黑色或白色，因此任务要简单一些。

*   该算法创建了一个与旧图像大小相同的新图像。
*   然后它查看旧像素的每个像素，并通过加权和计算其亮度：
    0.2 R + 0.7 G + 0.1 B = 亮度
*   然后使用亮度来确定颜色。
*   并将新颜色写入第二张图像的相应像素

我使用的图像没有透明度，但我想您可以将透明度值复制到新图像。我不明白你是如何丢失透明度信息的。难道你不能只读写 alpha 通道吗？

那时我在 python 中实现了这个，它运行得非常快。处理 1.000.000 像素只需几秒钟。因此，我猜您的性能问题与 php 而不是任务本身有关。此外，我认为优化空间不大。毕竟，您要么必须查看所有像素，要么会丢失图像分辨率。处理本身相当简单。

# sql-server-2008 - 使用 EntityFramework 的 Sql 分页排序

> ID：13720574
> 
> 赞同：0
> 
> 时间：2012-12-05T10:03:04.983
> 
> 标签：sql-server-2008, entity-framework-4

我的数据库中有 100 万条记录，我不想获取所有数据以显示在 UI 客户端中，所以我使用 .skip() 和 .take() 实现分页，这很好用。但问题是当用户尝试对特定列上的网格进行排序时，如何动态排序和修改排序列上的查询？（注意：我正在使用 enitytframework 来获取数据）。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T18:37:22.297

将链接添加到网格中的列标题，这些链接使用指定排序顺序的参数回发到相同的表单/视图。使用指定相关列的 .OrderBy() 再次执行 EF 查询，应用用户单击列标题时生效的任何 Where() 子句，并将页面设置回 #1。

# spring - 使用 JUnit 测试 Spring 应用程序的问题：NoSuchBeanDefinitionException 仅在测试中引发

> ID：13720577
> 
> 赞同：2
> 
> 时间：2012-12-05T10:03:14.583
> 
> 标签：spring, unit-testing, junit, integration-testing

我在尝试使用 Spring 运行 JUnit 测试时遇到了严重的问题。

这是我的 JUnit 类配置：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = { "classpath:/META-INF/spring/applicationContext*.xml", "file:src/main/webapp/WEB-INF/spring/webmvc-config.xml" }) 
```

在其中一个`applicationContext*.xml`文件中，我确实有这个：

```
<beans:bean id="messageSource" class="org.springframework.context.support.ResourceBundleMessageSource">
        <beans:property name="basenames">
            <beans:list>
                <beans:value>messagesSecurity</beans:value>
            </beans:list>
        </beans:property>
    </beans:bean> 
```

请注意，当我从 tomcat 运行我的应用程序时，它运行良好。只有**当我运行 JUnit 测试时，我才会得到以下 NoSuchBeanDefinitionException**：

```
Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [org.springframework.context.support.ResourceBundleMessageSource] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoSuchBeanDefinitionException(DefaultListableBeanFactory.java:924)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:793)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:707)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:478)
    ... 118 more 
```

我对这种行为感到很困惑......有人可以建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T12:48:59.247

我终于找到了问题的原因：我使用的是消息源**类**而不是使用导致代理问题的**接口。**

重构我的应用程序以使用`MessageSource`界面对问题进行了排序。

See full conversation [here](http://forum.springsource.org/showthread.php?133009-Issue-with-testing-a-Spring-app-with-JUnit-NoSuchBeanDefinitionException) on Spring forum.

# python - Python 模块安装错误：命令“gcc”失败，退出状态为 1

> ID：13720578
> 
> 赞同：6
> 
> 时间：2012-12-05T10:03:18.010
> 
> 标签：python, linux, unix, installation, debian

我在 Debian Squeeze 上，我想安装模块*[igraph](http://igraph.sourceforge.net/)*。所以，我正在完成所有[步骤](http://igraph.wikidot.com/installing-python-igraph-on-linux)，但是当我尝试做

```
python setup.py build 
```

我收到错误消息：

```
error: command 'gcc' failed with exit status 1 
```

但是，在终端消息的开头，我收到如下错误：

```
In file included from src/arpackobject.c:23:
src/arpackobject.h:26:20: error: Python.h: No such file or directory 
```

我该如何解决？

这是终端的完整输出：

```
# python setup.py build
Include path: /usr/local/include/igraph
Library path: /usr/local/lib
running build
running build_py
running build_ext
building 'igraph._igraph' extension
gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -I/usr/local/include/igraph -I../../build/include -I../../include -I/usr/local/include -I/usr/include -I/usr/include/python2.7 -c src/arpackobject.c -o build/temp.linux-x86_64-2.7/src/arpackobject.o
In file included from src/arpackobject.c:23:
src/arpackobject.h:26:20: error: Python.h: No such file or directory
In file included from src/arpackobject.h:28,
                 from src/arpackobject.c:23:
src/graphobject.h:28:26: error: structmember.h: No such file or directory
In file included from src/graphobject.h:29,
                 from src/arpackobject.h:28,
                 from src/arpackobject.c:23:
src/common.h:68: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/common.h:69: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
In file included from src/arpackobject.h:28,
                 from src/arpackobject.c:23:
src/graphobject.h:31: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘igraphmodule_GraphType’
src/graphobject.h:39: error: expected specifier-qualifier-list before ‘PyObject_HEAD’
src/graphobject.h:53: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:55: error: expected declaration specifiers or ‘...’ before ‘visitproc’
src/graphobject.h:57: error: expected declaration specifiers or ‘...’ before ‘PyObject’
src/graphobject.h:57: error: expected declaration specifiers or ‘...’ before ‘PyObject’
src/graphobject.h:58: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:59: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:61: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:62: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:63: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:64: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:65: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:66: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:67: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:68: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:69: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:70: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:71: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:72: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:73: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:74: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:75: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:76: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:78: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:79: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:80: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:81: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:82: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:83: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:84: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:85: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:86: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:87: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:88: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:89: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:90: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:91: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:92: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:93: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:94: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:95: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:96: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:97: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:98: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:99: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:101: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:102: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:103: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:104: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:105: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:106: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:107: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:108: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:109: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:110: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:111: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:112: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:113: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:114: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:115: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:116: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:117: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:118: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:119: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:120: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:121: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:122: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:123: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:124: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:125: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:126: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:127: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:128: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:129: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:131: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:132: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:133: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:134: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:135: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:136: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:137: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:138: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:139: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:140: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:141: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:142: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:144: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:145: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:146: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:147: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:149: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:151: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:152: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:153: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:154: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:155: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:156: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:157: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:158: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:159: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:160: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:161: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:162: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:163: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:164: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:166: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:167: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:168: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:169: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:170: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:171: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:172: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:175: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:176: error: expected declaration specifiers or ‘...’ before ‘PyObject’
src/graphobject.h:176: error: expected declaration specifiers or ‘...’ before ‘PyObject’
src/graphobject.h:177: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:178: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:179: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:181: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:182: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:184: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:185: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:186: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:187: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:188: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:189: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:190: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:192: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:193: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:195: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:196: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:197: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:198: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:200: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:201: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:202: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:203: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:204: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:205: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:206: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:207: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:209: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:210: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:211: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:212: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:213: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:214: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
In file included from src/arpackobject.h:28,
                 from src/arpackobject.c:23:
src/graphobject.h:215: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:216: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:217: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:218: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:219: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:221: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:223: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/graphobject.h:224: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
In file included from src/arpackobject.c:23:
src/arpackobject.h:34: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘igraphmodule_ARPACKOptionsType’
src/arpackobject.h:41: error: expected specifier-qualifier-list before ‘PyObject_HEAD’
src/arpackobject.h:46: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/arpackobject.h:50: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/arpackobject.h:51: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/arpackobject.h:54: error: expected ‘)’ before ‘*’ token
In file included from src/arpackobject.c:25:
src/error.h:32: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/error.h:38: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
In file included from src/arpackobject.c:26:
src/py2compat.h:80: error: expected ‘)’ before ‘*’ token
src/arpackobject.c:28: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/arpackobject.c:34: error: expected ‘)’ before ‘*’ token
src/arpackobject.c:43: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/arpackobject.c: In function ‘igraphmodule_ARPACKOptions_dealloc’:
src/arpackobject.c:61: warning: implicit declaration of function ‘PyObject_Del’
src/arpackobject.c:61: error: ‘PyObject’ undeclared (first use in this function)
src/arpackobject.c:61: error: (Each undeclared identifier is reported only once
src/arpackobject.c:61: error: for each function it appears in.)
src/arpackobject.c:61: error: expected expression before ‘)’ token
src/arpackobject.c: At top level:
src/arpackobject.c:67: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/arpackobject.c:123: error: expected declaration specifiers or ‘...’ before ‘PyObject’
src/arpackobject.c: In function ‘igraphmodule_ARPACKOptions_setattr’:
src/arpackobject.c:124: error: ‘value’ undeclared (first use in this function)
src/arpackobject.c:125: warning: implicit declaration of function ‘PyErr_SetString’
src/arpackobject.c:125: error: ‘PyExc_TypeError’ undeclared (first use in this function)
src/arpackobject.c:128: warning: implicit declaration of function ‘strcmp’
src/arpackobject.c:130: warning: implicit declaration of function ‘PyInt_Check’
src/arpackobject.c:131: warning: implicit declaration of function ‘PyInt_AsLong’
src/arpackobject.c:133: error: ‘igraphmodule_ARPACKOptionsObject’ has no member named ‘params’
src/arpackobject.c:135: error: ‘PyExc_ValueError’ undeclared (first use in this function)
src/arpackobject.c:144: error: ‘igraphmodule_ARPACKOptionsObject’ has no member named ‘params’
src/arpackobject.c:145: warning: implicit declaration of function ‘PyFloat_Check’
src/arpackobject.c:146: error: ‘igraphmodule_ARPACKOptionsObject’ has no member named ‘params’
src/arpackobject.c:146: warning: implicit declaration of function ‘PyFloat_AsDouble’
src/arpackobject.c:152: error: ‘PyExc_AttributeError’ undeclared (first use in this function)
src/arpackobject.c: In function ‘igraphmodule_ARPACKOptions_get’:
src/arpackobject.c:162: error: ‘igraphmodule_ARPACKOptionsObject’ has no member named ‘params_out’
src/arpackobject.c:162: error: ‘igraphmodule_ARPACKOptionsObject’ has no member named ‘params’
src/arpackobject.c:163: error: ‘igraphmodule_ARPACKOptionsObject’ has no member named ‘params_out’
src/arpackobject.c:163: error: ‘igraphmodule_ARPACKOptionsObject’ has no member named ‘params’
src/arpackobject.c:164: error: ‘igraphmodule_ARPACKOptionsObject’ has no member named ‘params_out’
src/arpackobject.c:164: error: ‘igraphmodule_ARPACKOptionsObject’ has no member named ‘params’
src/arpackobject.c:165: error: ‘igraphmodule_ARPACKOptionsObject’ has no member named ‘params_out’
src/arpackobject.c:165: error: ‘igraphmodule_ARPACKOptionsObject’ has no member named ‘params’
src/arpackobject.c:166: error: ‘igraphmodule_ARPACKOptionsObject’ has no member named ‘params_out’
src/arpackobject.c:166: error: ‘igraphmodule_ARPACKOptionsObject’ has no member named ‘params’
src/arpackobject.c:167: error: ‘igraphmodule_ARPACKOptionsObject’ has no member named ‘params_out’
src/arpackobject.c:168: error: ‘igraphmodule_ARPACKOptionsObject’ has no member named ‘params_out’
src/arpackobject.c:168: error: ‘igraphmodule_ARPACKOptionsObject’ has no member named ‘params’
src/arpackobject.c:170: error: ‘igraphmodule_ARPACKOptionsObject’ has no member named ‘params_out’
src/arpackobject.c: At top level:
src/arpackobject.c:179: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
src/arpackobject.c:191: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘igraphmodule_ARPACKOptions_methods’
src/arpackobject.c:204: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘igraphmodule_ARPACKOptions_getseters’
src/arpackobject.c:215: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘igraphmodule_ARPACKOptionsType’
error: command 'gcc' failed with exit status 1 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-05T10:06:56.497

Python 头文件在`python-dev`包中，其中包括：

> 用于构建 Python 模块、扩展 Python 解释器或将 Python 嵌入应用程序的头文件、静态库和开发工具。

尝试：

```
apt-get install python-dev 
```

这应该够了吧。您也可以[从这里](http://packages.debian.org/squeeze/python-dev)下载。

**编辑**

尝试以下操作：

```
apt-get install python-devel
or
apt-get install python2.7-dev 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T10:06:15.457

缺少的文件位于 debian 系统上的包 python-dev 中。安装它，你很好。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-05T10:42:36.320

您可能想要安装以下软件包。

```
python-all-dev 
```

# php - 回声与回声间隔 PHP

> ID：13720581
> 
> 赞同：2
> 
> 时间：2012-12-05T10:03:31.653
> 
> 标签：php

请有人可以解释下面的结果差异

```
echo intval(1e10); 
```

输出 `1410065408`

```
echo 1e10; 
```

输出`10000000000`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T10:17:16.203

有符号整数具有最大值。在 32 位系统上，即 2^16 或 2147483647。当`intval`-ing 一个更大的数字时，它会溢出。您找到的值也可以计算：

```
php > echo 1e10 % (2147483647);
1410065408 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-05T10:07:29.430

来自 PHP 手册：

> 最大值取决于系统。32 位系统的最大有符号整数范围为 -2147483648 到 2147483647。例如，在这样的系统上，intval('1000000000000') 将返回 2147483647。64 位系统的最大有符号整数值为 9223372036854775807。

intval 将截断数字

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T10:26:02.337

代码：

```
<?php

echo 'intval: ' . intval( 1e10 ) . PHP_EOL;
echo '1e10: ' . 1e10 . PHP_EOL; 
```

从 cli 运行

输出：

```
intval: 10000000000
1e10: 10000000000 
```

Ubuntu 12.10 x64 php5.4

换句话说，您使用的是 x86（32 位）机器。

# php - PHP爆出一个txt文件

> ID：13720586
> 
> 赞同：0
> 
> 时间：2012-12-05T10:03:52.403
> 
> 标签：php, arrays, fopen, explode, fgets

**我有以下 txt 文件：**

> ++结婚++M++B++NY++
> 
> ++杰克++F++O++LS++

**写入 .txt 文件：**

> 名称：结婚
> 
> 性别：M
> 
> 血型：B
> 
> 城市：纽约
> 
> 姓名：杰克
> 
> 性别：F
> 
> 血型：O
> 
> 城市：LS

我的代码是：

```
$fn = fopen("test.txt","r") or die("fail to open file");

$content = array();

 while($row = fgets($fn)) {

    $num = explode("++", $row);
    $name = $num[0];
    $sex = $num[1];
    $blood =  $num[2];
    $city = $num[3];
 }

$fp = fopen('output.txt', 'w');     
fwrite($fp, $row);
fclose($fp); 
```

这应该工作吗？因为它什么也不返回。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T10:11:17.973

```
$fn = fopen("test.txt","r") or die("fail to open file");

while($row = fgets($fn)) {
  list( $sName, $sSex, $sBlood, $sCity ) = explode( "++", $row );

  echo 'Name:' . $sName . '<br />';
  echo 'Sex:' . $sSex . '<br />';
  echo 'Blood type:' . $sBlood . '<br />';
  echo 'City:' . $sCity . '<br />';
}

fclose( $fn ); 
```

要写入文件，您必须先创建一个缓冲区，然后再写入文件。最简单的方法是使用 file_put_contents。请注意，file_put_content 方法比 fopen、fwrite 和 fclose 使用更多内存。

```
$fn = fopen("test.txt","r") or die("fail to open file");

$sBuffer = '';
while($row = fgets($fn)) {
    list( $sName, $sSex, $sBlood, $sCity ) = explode( "++", $row );

    $sBuffer .= 'Name:' . $sName . PHP_EOL;
    $sBuffer .= 'Sex:' . $sSex . PHP_EOL;
    $sBuffer .= 'Blood type:' . $sBlood . PHP_EOL;
    $sBuffer .= 'City:' . $sCity . PHP_EOL;

    $sBuffer .= PHP_EOL; // There will be a empty line after each "set"
}

fclose( $fn );

file_put_contents( 'path/to/file.txt', $sBuffer ); 
```

使用 fopen、fwrite 和 fopen。

```
$fn = fopen("test.txt","r") or die("fail to open file");

$rWrite = fopen( 'path/to/file.txt', 'w' ) or die( 'Could not open file for writing' );

while($row = fgets($fn)) {
    list( $sName, $sSex, $sBlood, $sCity ) = explode( "++", $row );

    fwrite( $rWrite, 'Name:' . $sName . PHP_EOL );
    fwrite( $rWrite, 'Sex:' . $sSex . PHP_EOL );
    fwrite( $rWrite, 'Blood type:' . $sBlood . PHP_EOL );
    fwrite( $rWrite, 'City:' . $sCity . PHP_EOL );

    fwrite( $rWrite, PHP_EOL ); // There will be a empty line after each "set"
}

fclose( $fn );
fclose( $rWrite ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T10:06:58.867

它不会输出任何内容，因为您没有使用`$name`等`$sex`。尝试更改代码中的以下代码段，看看它现在做了什么：

```
while($row = fgets($fn))
{

    $num = explode("++", $row);
    $name = $num[0];
    $sex = $num[1];
    $blood =  $num[2];
    $city = $num[3];

    echo "$name $sex $blood $city<br>";
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T10:29:47.110

你几乎是在正确的方向。您需要在获取内容的同一循环中包含对文件的写入。

```
$fn = fopen("test.txt","r") or die("fail to open file");

$fp = fopen('output.txt', 'w') or die('fail to open output file');
while($row = fgets($fn)) {
  $num = explode("++", $row);
  $name = $num[0];
  $sex = $num[1];
  $blood =  $num[2];
  $city = $num[3];

  fwrite($fp, "Name:$name\n");
  fwrite($fp, "Sex:$sex\n");
  fwrite($fp, "Blood:$blood\n");
  fwrite($fp, "City:$city\n");
}
fclose($fn);
fclose($fp); 
```

您的初始代码将不起作用，因为 fwrite 需要一个字符串并且您正在传递一个数组。如果您确实传递了字符串，它只会包含`test.txt`文件的最后一行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-21T12:32:02.583

我遇到了类似的问题，我无法打印“爆炸”结果的 [1] 组件，而 [0] 组件打印正确。在我的情况下，我解决了更改 while 循环的问题：

```
while(!feof($myfile)) {

        $row = fgets($myfile);

        $components = explode(",", $row);
        $myVar = $components[1];
        echo $myVar;
} 
```

到

```
while($row = fgets($myfile)) {

        $components = explode(",", $row);
        $myVar = $components[1];
        echo $myVar;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-02-02T17:39:06.120

使用**file_get_contents()**

```
$row=file_get_contents("test.txt");
$list=explode("++",$row);    
echo 'Name:'.$list[0].'<br>';
echo 'Sex:'.$list[1].'<br>'; 
```

# matlab - 在地图上的矩阵中绘制数值

> ID：13720588
> 
> 赞同：0
> 
> 时间：2012-12-05T10:03:56.773
> 
> 标签：matlab

我有一个 40 x 100 维度的矩阵 (TR5)，其中包含一些数字数据。我想在俄罗斯地图上绘制这些数据，其限制为纬度 40-80 度和经度 50-150 度。谁能帮我？？我正在使用meshm（Z，R，gratsize，TR5）。我已将 gratsize 分配为 [40 100] 并且未按要求获得结果...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T11:08:43.040

```
load coast;
figure;
iptsetpref('ImshowAxesVisible', 'on');
imagesc([50 150], [40 80], TR5);
colormap(jet(256)); colorbar;
axis normal; set(gca, 'YDir', 'normal'); hold on;
plot(long, lat, 'color', [1 0 0]);
axis([50 150 40 80]); 
axis off; % EDIT
% set(gca, 'XTick', 50:10:150); % EDIT
% set(gca, 'YTick', 40:10:80); % EDIT
% xlabel('long in deg'); % EDIT
% ylabel('lat in deg'); % EDIT
hold off; 
```

这应该在没有世界地图的情况下工作，尽管地图投影并不完美。用您的地图替换 Matlab 实现的“海岸”（纬度、经度）。

编辑...来源，基于您的评论/请求，没有轴。

# clang - 将 clangs scan-build 与 bjam 和 Boost.Build 一起使用

> ID：13720590
> 
> 赞同：2
> 
> 时间：2012-12-05T10:04:02.863
> 
> 标签：clang, bjam, boost-build, scan-build

是否可以将 clangs 静态分析器 scan-build 与 bjam 和 Boost.Build 结合使用？我试着跑

```
scan-build bjam 
```

这是行不通的。scan-build 报告报告目录不包含任何报告。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T00:10:47.697

这篇文章可能已经过时了，但是当我试图搜索它时，它突然出现了很多，所以希望这对其他人有帮助：

```
import os ;
using gcc : : [ os.environ CXX ] ; 
```

只需在 Jamroot.jam 中稍作调整，即可使 bjam 使用由 scan-build 设置的环境变量。我怀疑它在很多情况下都会失败，但这可能足以让任何人开始他们可以使用的东西。

# sql-server - 没有复制对象的数据库备份（用于模式比较）

> ID：13720591
> 
> 赞同：0
> 
> 时间：2012-12-05T10:04:06.367
> 
> 标签：sql-server, backup, replication

我想在附加的数据库和备份之间执行模式比较。备份来自复制的数据库。比较（数据库-> 备份）结果脚本生成复制对象的删除，这就是我想要避免的。

有没有办法在没有复制对象的情况下执行备份？

# java - HashMap 破坏了我的价值观

> ID：13720595
> 
> 赞同：0
> 
> 时间：2012-12-05T10:04:16.860
> 
> 标签：java

```
HashMap<String, int[]> H = new HashMap<String, int[]>(); 
H.put("drdetroit", new int[]{1,2});
H.put("drdetroit", new int[]{1,3}); 
System.out.println(H.get("drdetroit").toString()); 
```

它打印出来

```
[I@c3c749 
```

我假设这是散列值（是吗？）。我怎样才能让它打印我的实际值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T10:05:19.243

你用`Arrays.toString(H.get("drdetroit"));`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T10:17:09.240

这就是我相信的你所追求的。由于 HashMap 只能存储唯一键，因此如果您想要一 (1) 个键的多个值，则必须使用列表。

也许有更好的方法来实现这一点，但它是有效的，并且本身就很有表现力，而且很清楚它的作用和方式。

HashMap 现在接受 List 接口，因此可以接受任何实现它的列表类型。这很整洁！:)

```
ArrayList<int[]> values = new ArrayList<int[]>();

values.add(new int[]{1,2});
values.add(new int[]{1,3});

HashMap<String, List<int[]>> H = new HashMap<String, List<int[]>>(); 

H.put("drdetroit", values);

for(String key : H.keySet()) {
    for(int[] array : H.get(key)){
        System.out.println(Arrays.toString(array));
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T10:06:53.993

```
System.out.println(Arrays.toString(H.get("drdetroit"))); 
```

I - 代表`int`数组，c3c749 是**哈希码**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T10:05:04.750

因为你试图从一个数组中创建一个字符串！

例如，您可以这样做：

```
String myArray = H.get("drdetroit");
System.out.println(myArray[0]); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-05T10:08:12.517

试试这个来打印数组值 -

```
System.out.println(Arrays.toString(H.get("drdetroit"))); 
```

`H.get("drdetroit").toString()`在 hexString 中返回数组类名和 @ 和哈希码。

```
public String toString() {
    return getClass().getName() + "@" + Integer.toHexString(hashCode());
} 
```

# watir - 跨浏览器点击 watir-webdriver

> ID：13720596
> 
> 赞同：0
> 
> 时间：2012-12-05T10:04:18.453
> 
> 标签：watir, watir-webdriver

我正在使用 Watir-Webdriver 进行自动化测试。但是跨浏览器似乎不稳定。例如，它通常在 Firefox 和 Chrome 中运行良好，但在 IE 中不稳定。当我获得一个元素并单击时，在 ie7、8、9 中它以不同的方式响应。可以单击该按钮，但没有任何反应。我尝试了很多方法，例如：click、click()、send_key、fire_event，但我仍然没有跨浏览器点击的最终解决方案。比如在ie9中，使用click的时候，有的时候完美，有的时候不行，不知道是什么原因。

我们是否有解决方案，例如允许我们在多个浏览器中（尤其是在 IE7、8、9 中）中单击一个元素成功的功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T22:57:27.437

我认为 IE 使用与其他浏览器不同的“点击”方法。因此，除非它有不间断的焦点，否则它是不可预测的。另一种方法可能是专门为 IE 使用 Watir Classic，因为它使用 COM 对象而不是 Javascript。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T21:44:54.737

尝试使用 .when_present 装饰器，以确保您不会尝试单击未处于可单击状态的内容。有时对于较慢的浏览器（例如较旧的 IE）很有用。

```
browser.link(:id => "foo").when_present.click 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T11:59:34.010

您可能还遇到了我前段时间发布的这个问题：[Watir Webdriver in IE8, click link, event似乎永远触发](https://stackoverflow.com/questions/14104393/watir-webdriver-in-ie8-click-link-event-seems-to-keep-firing-for-ever)

第一次在新会话中使用 IE 中的点击是否有效，然后在该会话中不再有效？这会向我暗示这与我遇到的问题相同。

# sql - SQL Server 如何处理 UPDATE 事务？

> ID：13720597
> 
> 赞同：2
> 
> 时间：2012-12-05T10:04:20.170
> 
> 标签：sql, sql-server-2008, transactions, table-locking

我们有一个用于生成唯一数字键的表。然后这些键在其他表中用作 PrimaryKey。表结构是这样的：

```
TableName     VARCHAR
CurrentKey    INT 
```

所以我们在这张表中有数据

```
TableName   Customers
CurrentKey  400 
```

因此，当我们需要表的下一个主键时，`Customers`我们`CurrentKey`从该表中获取`TableName`is `Customers`，它将给我们 400，我们将其递增 (400+1) 并且我们也在表中更新此键。所以我们`CurrentKey`现在是401。

我们为此目的使用的sql是：

**SQL1：**

```
DECLARE  @CurrentKey INT
UPDATE  myTable 
SET @CurrentKey = CurrentKey = CurrentKey + 1
WHERE   TableName = @TableName 
```

我的问题是，如果多个用户同时调用它，我们是否需要锁定表以便密钥不会重复？我确信 SQL Server 不会允许重复数据，但我不知道如何...使用表锁定查询：

**SQL2**

```
BEGIN TRANSACTION
    DECLARE  @CurrentKey INT
    UPDATE  myTable WITH (TABLOCKX)
    SET @CurrentKey = CurrentKey = CurrentKey + 1
    WHERE   TableName = @TableName
END TRANSACTION 
```

有人可以解释一下 SQL Server 如何处理`UPDATE`调用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T10:13:43.450

每个 SQL 语句都在一个事务中运行，并且一个`update`语句总是使用一个锁来保护它的更新。SQL Server 不允许您读取半修改的行（对于大于 8k 的数据有一些例外。）

你的第一个陈述应该没问题。

# c++ - 为特定文件定义

> ID：13720605
> 
> 赞同：0
> 
> 时间：2012-12-05T10:04:48.780
> 
> 标签：c++, c-preprocessor, compiler-options

你能帮我解决以下问题吗？我有一个文件 log.cpp，其中包含在项目中的不同文件中。我需要在其中一个文件中声明定义，它必须影响 log.cpp，而 log.cpp 或 log.h 没有实际变化。我怎样才能做到这一点？不接受带有预编译头的解决方案。

还有一个问题，如何定义静态函数？我的意思是如果我`CClass::Func`调用了我的代码，我该如何定义它以重定向到其他东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T10:08:14.597

如果要影响标头，可以将该定义放在包含之前：

```
#define SOMEDEFINE SOMEVALUE
#include log.h
// May want to remove or change our define here
#undef SOMEDEFINE 
```

这是假设您的意思是包含 log.h，因为您不想包含其他文件中的 cpp。拥有单独的 .h 和 .cpp 文件的想法是 .h 是所有编译单元看到的接口，而 cpp 是代码本身，它应该只编译一次，并且不应该根据你所在的编译单元而有所不同指它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T10:08:25.727

使用我所知道的所有 C++ 编译器，您可以`#define`在命令行上使用符号。通常这是使用[`-D`选项](http://gcc.gnu.org/onlinedocs/gcc/Preprocessor-Options.html#index-D-937)完成的。

# iphone - 如何在 Xcode 4.3.3 中反序列化 JSON

> ID：13720607
> 
> 赞同：2
> 
> 时间：2012-12-05T10:04:51.687
> 
> 标签：iphone, objective-c, xcode, json

我有一个 Xcode 项目，它使用 NSURLConnection 向 web 服务发出请求，该请求返回 JSON。

返回的 JSON 如下所示：

```
{"d":"{\"Graphic\":{\"HAName\":\"HSName\",\"HALogo\":\"main_menu_top_logo.png\",\"BarColour\":-16744448,\"BarButtonTextColour\":-28444,\"TextColour\":-16744448,\"BackGroundColour\":-23296,\"Error\":\"\"},\"App\":{\"App1\":true,\"App1Title\":\"Application1\",\"App2\":true,\"App2Title\":\"Application2\"Error\":\"\"},\"Version\":25,\"Error\":\"\"}"} 
```

我正在尝试使用以下方法解析 JSON：

```
NSDictionary* json = nil;
if (responseData) 
{
    json = [NSJSONSerialization JSONObjectWithData:responseData options:kNilOptions error:nil];
} 
```

但是当我查看字典对象时，它看起来像这样：

```
d = "{\"Graphic\":{\"HAName\":\"HSName\",\"HALogo\":\"main_menu_top_logo.png\",\"BarColour\":-16744448,\"BarButtonTextColour\":-28444,\"TextColour\":-16744448,\"BackGroundColour\":-23296,\"Error\":\"\"},\"App\":{\"App1\":true,\"App1Title\":\"Application1\",\"App2\":true,\"App2Title\":\"Application2\"Error\":\"\"},\"Version\":25,\"Error\":\"\"}; 
```

该字典仅包含 1 个键/值对。

如何正确解析 JSON 对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T10:14:01.907

我看不出问题出在哪里，它为您提供了包含许多其他词典的顶级词典。

如果不是这个，你期待什么？你不会从这个结构中得到一个数组。

# perl - 如何为 cmd 命令设置超时？

> ID：13720608
> 
> 赞同：4
> 
> 时间：2012-12-05T10:04:53.460
> 
> 标签：perl, cmd

我在cmd中只有以下命令

```
perl csv2rrd3.pl 
```

但它总是运行很长时间。有没有办法为它设置超时？或者我应该在 perl 脚本中执行它？如何？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-05T10:15:37.710

在 Perl 内部，您可以设置[闹钟](http://perldoc.perl.org/functions/alarm.html)在几秒钟后响起。然后，您可以使用信号处理程序来捕获事件。任何时候只能激活一个警报

```
{ # enter new scope
    # set signal handler
    local $SIG{ALRM} = sub {
       # do cleanup, like closing sockets or whatever
       print STDERR "exited with ALARM\n";
       exit;
    };
    alarm 30; # try half a minute
    ...; # do expensive stuff
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-05T10:26:35.970

在 windows 命令行中，您可以首先`start`在其自己的窗口中执行 perl 脚本，将其与`timeout`等待*x*秒（此处为 2）的命令链接起来，然后再与`taskkill`命令链接以终止进程。

```
start perl csv2rrd3.pl & timeout -t 2 & taskkill /IM perl.exe 
```

上面的行会杀死每个 perl 进程。要仅杀死刚开始的窗口，您可以使用自定义窗口标题。

```
start "KILLME" perl csv2rrd3.pl & timeout -t 2 & taskkill /FI "WINDOWTITLE eq KILLME" /IM perl.exe 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T10:11:20.440

好吧，不确定超时，但你可以等待一些特定的时间，然后终止进程。

```
sleep(10) # sleep 10 seconds
kill      # and insert PID of the process (see command ps) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-12-18T18:38:18.157

如果 PowerShell 可用，则更新答案：

命令的启动、等待和终止都发生在 Powershell 中，使其适用于任何环境，而不仅仅是 Peral。

```
$x = Start-Process -Filepath "ping" -ArgumentList 'google.com -n 100' -NoNewWindow -PassThru; 
Start-Sleep -Seconds 5; 
try { Stop-Process -Id $x.Id -ErrorAction stop } catch {}; 
```

将*ping*和 argumnets 列表替换为需要运行的内容。

如果您需要提前返回（例如，进程将在命令完成或达到超时时结束**，**然后替换**为**`Start-Sleep ...`检查 $x.Id 是否仍然是活动进程的循环，如果是则休眠 1 秒。

# javascript - 使用 Twitter-Bootstrap 保存到 LocalStorage

> ID：13720623
> 
> 赞同：1
> 
> 时间：2012-12-05T10:05:40.137
> 
> 标签：javascript, html, twitter-bootstrap, local-storage, jqtouch

我创建了一个带有设置页面的 HTML 网站，用户在其中输入信息，单击保存并保存信息 - 例如，如果文本字段中有文本，那么即使用户离开，信息也会保留在该字段中网站。我已经使用 jQTouch 和 jQuery 和 JavaScript 来保存信息并且工作正常，但是当我使用 Twitter-BootStrap 重新创建同一个网站时它停止工作。

附加到 Settings.html 页面的 .js 文件是；引导程序.js；jquery.min.js 和（这是我自己的代码）save.js

在 save.js 中，我使用以下方法保存了文本字段；

```
localStorage.name = $("#name").val(); 
```

并使用加载它们；

```
$("#name").val(localStorage.name); 
```

我想知道是不是因为我不再将 jQTouch 附加到 HTML 上，所以它停止工作了？如果是这样，有没有办法将其更改为与 BootStrap 和 jQuery 一起使用？

您需要的任何其他代码，请询问。我不确定您需要什么，并且我的 GitHub 帐户遇到了问题。非常感谢xxx

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T10:08:27.723

您可以使用 getItem 和 setItem 来保存和加载 localStorage 数据，这是纯 Javascript。

```
localStorage.setItem("name", $("#name").val());

$("#name").val(localStorage.getItem("name")); 
```

# visual-studio-2010 - Visual Studio 2010 - 无法打开数据库项目（空引用）

> ID：13720624
> 
> 赞同：0
> 
> 时间：2012-12-05T10:05:44.303
> 
> 标签：visual-studio-2010, sql-server-2008-r2, dbproj

我最近遇到的问题是我的 VS2010 无法打开数据库项目。它的结尾是：

```
<path>.dbproj : error  : Object reference not set to an instance of an object. 
```

它发生在现有项目和新项目中。我尝试将 VS 2010 与 SP1 一起修复，但没有成功。我还尝试在 Tools->Database Tools->Data Connections 中更改 SQL Server 的实例

最近我安装了 VS2008，我想这已经改变了一些东西。你有什么想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T14:14:21.883

最后我解决了这个问题 :) 在我的默认 SQL Server 2008 R2 实例上运行修复后，它又开始工作了。

# html - javadoc是html还是xhtml？

> ID：13720626
> 
> 赞同：5
> 
> 时间：2012-12-05T10:06:02.453
> 
> 标签：html, xhtml, javadoc

今天早上我在 IntelliJ 中输入了一些 Javadoc，并使用了一个 <br> 标签，IntelliJ 以通常有用的方式自动完成了 <br>|</br> ......但我的印象是 <br> 已定义不要成为一个容器：

[http://www.washington.edu/accessit/webdesign/student/unit2/common_tags.htm](http://www.washington.edu/accessit/webdesign/student/unit2/common_tags.htm)说：

> 一些标签被称为非容器标签，因为它们不包含任何内容——它们是独立的。示例是图像和换行符。XHTML 要求所有打开的标记都必须关闭，即使它们不是容器标记。因此，非容器标签以 /> 结尾。例如，换行符的标记是 <br />。

那么是 Javadoc HTML 还是 XHTML？在我看来，IntelliJ 应该完成 <br> 到 <br /> 或不理会它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T10:06:02.453

[http://www.oracle.com/technetwork/java/javase/documentation/index-137868.html](http://www.oracle.com/technetwork/java/javase/documentation/index-137868.html)

> 文档注释的格式 文档注释是用 HTML 编写的，并且必须位于类、字段、构造函数或方法声明之前。它由两部分组成——描述和块标签。在此示例中，块标记为 @param、@return 和 @see。

# mongodb - 如何在 Mongodb 中快速插入数千个 JSON Array Dump？

> ID：13720627
> 
> 赞同：0
> 
> 时间：2012-12-05T10:06:00.827
> 
> 标签：mongodb, mongoimport

我有大约 20,000 个包含 JSON 数组的文件。我想将所有这些文件转储到本地托管的 MongoDB 中。我为此目的使用 mongoimport 。

有什么办法可以加快这个过程吗？

这 20,000 个文件包含大约 1200 万条记录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-03-17T09:20:14.270

我的 Mongo 版本是 32 核的 linux 服务器中的 2.6.12。我已将 1.34 亿条记录导入 MongoDB。输入文件的数量在 1700 左右，格式为 JSON 数组。我的测试结果如下：

1.  mongoimport：一次 10 万条记录。4分50秒导入100K条记录。（在Mongo 3.0.0版本之前，没有“--numInsertionWorkers”参数，所以我进行单线程导入。如果有新版本可用，您可以尝试使用该参数。）
2.  mongoimport：一次 50K 条记录。在 2 分钟 20 秒内导入 10 万条记录。
3.  [PyMongo](https://api.mongodb.com/python/current/)（单线程）：一次记录一次，使用[insert](http://api.mongodb.com/python/current/tutorial.html)方法。在 30 秒内导入 10 万条记录。
4.  PyMongo（多线程，线程数为8）：一次记录一次。在 1 小时 32 分钟内导入 1.34 亿条记录。这几乎是线性加速。

原因可能在于：具有 100K 记录的文件是一个大块，“mongoimport”处理起来很耗时。我还没弄清楚为什么 PyMongo 比 mongoimport 快。JSON 文件的处理速度更快吗？因此，您可以尝试以多线程方式使用 PyMongo。

# java - Apache MINA 不会删除未使用的数据

> ID：13720637
> 
> 赞同：1
> 
> 时间：2012-12-05T10:06:14.233
> 
> 标签：java, memory, garbage-collection, mina

我的 MINA 客户有一点问题。

我只创建一个到服务器的连接，然后服务器每秒定期发送某种数据。

简而言之，客户端连接到服务器；服务器向客户端发送回一个字符串，所有这些步骤都使用相同的打开连接（相同的客户端对象和客户端处理程序）。

但问题是，我认为，旧数据不是由 GC 收集的。使用的堆在几秒钟内变得越来越大，并且永远不会减少。我的 messageReceived 方法是空的！

```
public void messageReceived(IoSession session, Object message) { } 
```

任何想法 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T07:32:35.607

VisualVM 本身会造成很多垃圾。您可以启动一个空的应用程序并让线程休眠，启用 VisualVM 并观察垃圾开始收集。没有代码。

然而，我看到了一个类似的问题，即 mina 没有保留而是生成永远不会被垃圾收集的长期运行项目（除非您运行 Full GC）。此问题可能导致实际内存为 4mb 的应用程序在一小时内显示为 80mb。它永远不会被收集。

我即将构建自己的框架来包装 NIO，因为如果没有像这样重新启动，我永远无法让服务器长时间保持在线状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T10:16:57.153

如果它从未减少，请启用`-XX:+HeapDumpOnOutOfMemoryError`，您将在内存不足错误时获得堆转储。

使用的内存量并不重要，重要的是在一次完整 GC 后保留了多少。我建议你定期运行 VisualVM 并触发一次完整的 GC，然后看看有多少空闲。

# variables - LESS CSS：将 cookieless 域名放入变量中以便在后台重用：url()

> ID：13720640
> 
> 赞同：0
> 
> 时间：2012-12-05T10:06:21.393
> 
> 标签：variables, less, cookieless

我想将我的无 cookie 域设置在一个变量中，并将其重用于这样的背景图像：

```
@static_url: "//static.example.com";
.background {background:url(@static_url/images/layout/sprite-icn.png) no-repeat;} 
```

但是我的 LESS 编译器（lesscss-engine-1.3.0.jar）会引发这些行的错误原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T10:51:58.373

解决方案是：

```
@static_url: "//static.example.com";
.background {background:url("@{static_url}/images/layout/sprite-icn.png") no-repeat;} 
```

# python - Python - 为什么在删除小部件后，然后从另一个方法添加它无法添加相同的小部件？

> ID：13720641
> 
> 赞同：0
> 
> 时间：2012-12-05T10:06:20.967
> 
> 标签：python, linux, python-2.7, gtk, pygtk

为什么重绘按钮失败？首先它在我有按钮的地方启动，然后我想在较低的高度调整顶部窗口的大小，然后将按钮也缩小到另一个大小，但是从方法 buttononTop() 重绘按钮失败。

```
#!/usr/bin/python
import pygtk, gtk, gobject

class GTK_Main:

  def __init__(self):

    self.window = gtk.Window(gtk.WINDOW_TOPLEVEL)
    self.window.set_default_size(800, 768)
    self.window.connect("destroy", gtk.main_quit, "WM destroy")
    self.vbox = gtk.VBox()
    self.window.add(self.vbox)
    self.hbox = gtk.HBox(False, 0)
    self.vbox.pack_start(self.hbox, False)    
    self.hbox.set_border_width(10)
    self.hbox.pack_start(gtk.Label(), True, True, 0)
    self.button2 = gtk.Button("Quit")
    self.button2.connect("clicked", self.exit)    
    self.hbox.pack_start(self.button2, False)
    self.button3 = gtk.Button("Test")
    self.button3.connect("clicked", self.buttononTop)    
    self.hbox.pack_start(self.button3, False)    
    self.hbox.add(gtk.Label())
    self.window.show_all()

  def buttononTop(self, w):
    print "Buttons on top - redraw with different shapes includeing the window"
    self.window.remove(self.vbox)
    self.window.resize(800, 330)
    self.window.set_size_request(800, 330)
    # ------------------------------------------- [FAILS STARTS]
    self.vbox = gtk.VBox()
    self.window.add(self.vbox)
    self.hbox = gtk.HBox(False, 0)
    self.vbox.pack_start(self.hbox, False)    
    self.hbox.set_border_width(10)
    self.hbox.pack_start(gtk.Label(), True, True, 0)
    self.button2 = gtk.Button("Quit")
    self.button2.connect("clicked", self.exit)    
    self.hbox.pack_start(self.button2, False)
    self.button3 = gtk.Button("Test")
    self.button3.connect("clicked", self.buttononTop)    
    self.hbox.pack_start(self.button3, False)    
    self.hbox.add(gtk.Label())
    # ------------------------------------------- [FAILS END]

  def exit(self, widget, data=None):
    gtk.main_quit()

GTK_Main()
gtk.gdk.threads_init()
gtk.main() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T14:49:49.797

感谢@another.anon.coward，现在它根据他的跟进工作。

![在此处输入图像描述](../Images/94561ef854f7027464d2436140b6f920.png) ![在此处输入图像描述](../Images/3004bd2302bf8fb82ce4af4141af0e59.png)

代码：

```
#!/usr/bin/python
import pygtk, gtk, gobject

class GTK_Main:

  def __init__(self):

    self.window = gtk.Window(gtk.WINDOW_TOPLEVEL)

    # if i use set_size_request, the first launch is not running
    # in correct screen (while using dual screen)
    #self.window.set_size_request(1280, 720)
    # therefore by using default size it fix it
    self.window.set_default_size(1280, 720)

    self.window.connect("destroy", gtk.main_quit, "WM destroy")

    self.vbox = gtk.VBox()
    self.window.add(self.vbox)
    self.hbox = gtk.HBox(False, 0)
    self.vbox.pack_start(self.hbox, False)    
    self.hbox.set_border_width(10)
    self.hbox.pack_start(gtk.Label(), True, True, 0)
    self.button2 = gtk.Button("Quit")
    self.button2.connect("clicked", self.exit)    
    self.hbox.pack_start(self.button2, False)
    self.button3 = gtk.Button("Test")
    self.button3.connect("clicked", self.buttononTop)    
    self.hbox.pack_start(self.button3, False)    
    self.hbox.add(gtk.Label())
    self.window.show_all()
    # another.anon.coward: mentioned a great way solve it 
    if(self.window.get_window().get_state() == gtk.gdk.WINDOW_STATE_MAXIMIZED):
      print "unmaximize"
      self.window.unmaximize()

    self.window.move(0,0)

  def buttononTop(self, w):
    print "Buttons on top - redraw with different shapes includeing the window"
    self.window.remove(self.vbox)
    self.window.resize(1280, 100)
    # if i use set_size_request, the first launch is not running
    # in correct screen (while using dual screen)
    #self.window.set_size_request(1280, 720)
    # therefore by using default size it fix it
    self.window.set_default_size(1280, 100)

    # another.anon.coward: mentioned a great way solve it 
    if(self.window.get_window().get_state() == gtk.gdk.WINDOW_STATE_MAXIMIZED):
      print "unmaximize"
      self.window.unmaximize()

    self.window.move(0,0)
    self.window.show_all()

    # ------------------------------------------- [FAILS STARTS]
    self.vbox = gtk.VBox()
    self.window.add(self.vbox)
    self.hbox = gtk.HBox(False, 0)
    self.vbox.pack_start(self.hbox, False)    
    self.hbox.set_border_width(10)
    self.hbox.pack_start(gtk.Label(), True, True, 0)
    self.button2 = gtk.Button("Quit")
    self.button2.connect("clicked", self.exit)    
    self.hbox.pack_start(self.button2, False)
    self.button3 = gtk.Button("Test")
    self.button3.connect("clicked", self.buttononTop)    
    self.hbox.pack_start(self.button3, False)    
    self.hbox.add(gtk.Label())    
    # ------------------------------------------- [FAILS FIXED]    
    self.vbox.show_all()

  def exit(self, widget, data=None):
    gtk.main_quit()

GTK_Main()
gtk.gdk.threads_init()
gtk.main() 
```

# android - 在Android中运行时不调用Lua C函数

> ID：13720642
> 
> 赞同：1
> 
> 时间：2012-12-05T10:06:22.940
> 
> 标签：android, c++, lua

我有这种情况。在我继续我的问题之前，请查看下面的代码（我无法在标题中正确描述）

我的lua初始化代码：

```
luaState = luaL_newstate();
luaL_openlibs(luaState);
RegisterFunctions(luaState); 
```

我的lua加载代码：

```
try {
        luaL_dofile(luaState, scriptPath.c_str());
    }
    catch (...) {
        std::cout << "LUA ERROR: Could not load file " << std::endl;

    }
    loaded_.push_back(filename); 
```

我定义 C 函数的部分：

```
int testFunction(lua_State* L)
{
    std::cout << "Test" << std::endl;
    return 0;
}
void RegisterFunctions(lua_State* L)
{
    lua_register(L, "testFunction", testFunction);

} 
```

我的 Lua 脚本：

```
test = {};

function test:testCallback(me)
    testFunction();
end 
```

这些代码能够在 Android 中正确构建和运行。但是，当调用 testFunction() 时，它并没有进入我定义的 C 函数。除此以外，一切正常。我也在IOS和IOS上测试过，它也进入了testFunction。这个问题只发生在Android上，我不知所措。如果有人有任何建议，将不胜感激。

# c++ - 在记录错误时取消引用 ptr 是错误的设计吗？

> ID：13720643
> 
> 赞同：2
> 
> 时间：2012-12-05T10:06:25.470
> 
> 标签：c++, c, pointers, logging

在查看一些我没有写的旧代码时，我注意到了这样的事情（简化）

```
//switch case on a msg received from a queue,...
//... get_function returns msgtype and ptr
switch(msgtype)
//...
default:
{
    MYLOGGER<< "Unknown message" << (*ptr)->some_member_var <<"\r\n";
} 
```

所以我想尝试将其更改为

```
 default:
{
    MYLOGGER<< "Unknown message...\r\n";
    MYLOGGER<< "..." << (*ptr)->some_member_var << "\r\n";
} 
```

因为万一 ptr 是垃圾，我害怕在记录开始之前崩溃？我在这个例子中是正确的吗？通常，在记录错误时应该避免取消引用。

编辑：关于 MYLOGGER，它是一个以这个结尾的宏：具有重载运算符 << 的记录器类在 dtror 中执行 ostream flush()，因此不需要 endl。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T10:13:37.087

如果当前代码会崩溃，那么您的新代码也会崩溃。更好的解决方案是在取消引用之前简单地检查 nullptr，如果是这种情况，则打印一条特殊消息。

```
if(ptr == nullptr)
    MYLOGGER<<"invalid null message\r\n";;
else
    MYLOGGER<< "Unknown message " << (*ptr)->some_member_var <<"\r\n"; 
```

鉴于（根据您的评论） operator<< 已经执行了刷新，这是我们可以得到的最安全的，即使发生崩溃（也许如果 ptr 无效，但不是 nullptr），我们很可能会在我们的日志中查看“未知消息”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T10:21:05.370

我将遵从 Chris Lattner 的[每个 C 程序员应该知道的关于未定义行为](http://blog.llvm.org/2011/05/what-every-c-programmer-should-know_14.html)的知识（谁比编译器作者更能谈论编译器的惊喜？）。

TL;DR 版本是：当它未定义时，由于编译器优化，没有*时间安全性。*因此，您提供的两个版本是严格等价的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T10:11:16.947

如果您不知道消息是什么，则不应尝试以任何方式解释其内容。你可以记录`ptr`它自己的值，但你并不真正知道它指向哪里，所以不要尊重它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T10:13:01.657

您的记录器可能异步工作，或者使日志异步持久化，在这种情况下，第二个代码不会比第一个更有用。
无论如何，访问未经检查的指针是未定义的行为，在这种情况下，可能会因为收到未知消息而崩溃，这似乎有点苛刻。

# css - CSS将3张图片堆叠为标题

> ID：13720647
> 
> 赞同：0
> 
> 时间：2012-12-05T10:06:33.227
> 
> 标签：css

你好

我一直在阅读有关 CSS 的文档，是的，它说明了如何使用图像作为背景，所有重复和不重复的东西等。

但是，实际上并不是一张图片作为标题，它是 3 堆叠的，所以我不能写背景图片，因为最后一张图片替换了它的前任。

你怎么告诉他们呆在那里？我在 w3 网站上找不到任何东西

谢谢你

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-05T10:15:42.453

用所有三个堆栈剪切 1px 图像并将其应用于背景。有关[http://imagewisely.org/](http://imagewisely.org/)站点的更多详细信息 CSS。它会帮助你。

# php - HTML 表格的特定列到 JavaScript 数组

> ID：13720648
> 
> 赞同：0
> 
> 时间：2012-12-05T10:06:33.143
> 
> 标签：php, javascript, html

我需要帮助将 html 表的两列存储到 Javascript 数组中。我使用 php 动态创建表。以下是我的php代码；

```
$inc = 1;
foreach($result as $element) {
    echo "<tr><td>".$element['qs_id']."</td>";
    echo "<td>".$element['qs_desc']."</td>";
    echo "<td><input type=\"radio\" name=\"select".$inc."\" value=\"0\" ";
    if($element['qq_rate'] == '0') echo "checked=\"checked\"";
    echo "></input></td>";
    echo " <td><input type=\"radio\" name=\"select".$inc."\" value=\"1\"";
    if($element['qq_rate'] == '1') echo "checked=\"checked\"";
    echo "></input></td>";
    echo " <td><input type=\"radio\" name=\"select".$inc."\" value=\"2\"";
    if($element['qq_rate'] == '2') echo "checked=\"checked\"";
    echo "></input></td>";
    echo " <td><input type=\"radio\" name=\"select".$inc."\" value=\"3\"";
    if($element['qq_rate'] == '3') echo "checked=\"checked\"";
    echo "></input></td>";
    echo " <td><input type=\"radio\" name=\"select".$inc."\" value=\"na\"";
    if($element['qq_rate'] == '') echo "checked=\"checked\"";
    echo "></input></td>";
    echo "</tr>";
    $inc = $inc +1;
} 
```

这会使用数据库中的相关“id”、“desc”等填充 html 表。然后它为每个单选按钮编写一个唯一的标签名称。结果如下所示； ![在此处输入图像描述](../Images/70efe7098187cb07c552a04380846f8f.png)

我想将第一列中的 id 及其相关评级（即 1、2、3、na）存储到 Javascript 数组中。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T11:13:01.770

如果您已经包含 jQuery 或可以免费使用它，您可以尝试以下代码：

```
var data = [];
$('table tr').each(function(){
    var row = $(this);
    var id = row.find('td:first').text();
    if ($.isNumeric(id)) {
        var selectedRadio = row.find(':radio[name=select' + id + ']:checked');
        data.push([id, selectedRadio.val()]);
    }
});
alert(data); 
```

[演示](http://jsfiddle.net/mwCgN/)

如果不是，迭代 DOM 元素会稍微复杂一些，但仍然可行）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T12:04:57.690

将整个表格放入一个表格中，以便

```
<form id="form">
    <table>
        .. etc ..
    </table>
</form> 
```

然后使用点击序列化表单`$('#form').serialize();`

小提琴（从 pxx 分叉）：http: [//jsfiddle.net/B5fKm/](http://jsfiddle.net/B5fKm/)

# php - .htaccess url 编码字符串未正确传递到页面

> ID：13720650
> 
> 赞同：1
> 
> 时间：2012-12-05T10:06:39.593
> 
> 标签：php, apache, .htaccess, mod-rewrite, urlencode

我在 .htaccess 中有一个重写规则

`RewriteRule ^page/(.*)$ my-php-page.php?cid=$1`

我正在传递一个包含字符`=`的`+`编码字符串 - 这是编码字符串；

`V1ihnKpip6WpnY7Wm5zn2+6YUtLf2KCh4eKY`

当在完整的 URL 中时

`http://www.example.com/my-php-page.php?cid=V1ihnKpip6WpnY7Wm5zn2+6YUtLf2KCh4eKY`

现在这不起作用，因为`+`标志。所以我想发送`cid`urlencoded 然后变成；

`http://www.example.com/my-php-page.php?cid=V1ihnKpip6WpnY7Wm5zn2%2B6YUtLf2KCh4eKY`

符号`+`变为。`%2B`这很好用，除非我通过 .htaccess 中的 RewriteRule 尝试这个 - 它不起作用。所以网址是

`http://www.example.com/page/V1ihnKpip6WpnY7Wm5zn2%2B6YUtLf2KCh4eKY`

mypage.php 文件实际上接收到`cid`as`V1ihnKpip6WpnY7Wm5zn2 6YUtLf2KCh4eKY`由于某种原因替换`%2B`为一个空格。

任何想法为什么它可能会这样做？我该如何解决它。非常感谢您的帮助。

**编辑**

我刚刚找到了这个解决方案——[带有 urlencode 和“&”错误的 PHP $_GET var——](https://stackoverflow.com/questions/6626347/php-get-var-with-urlencode-and-bug)但我想知道是否有`.htaccess`比`urlencode`两次输入字符串更优雅的解决方案？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-05T11:17:08.013

尝试添加`B`重写标志。这个标志告诉 mod_rewrite 逃避反向引用，[文档说](http://httpd.apache.org/docs/current/rewrite/flags.html#flag_b)：

> _rewrite 必须在映射 URL 之前对其进行转义，因此在应用反向引用时将对其进行转义。使用 B 标志，反向引用中的非字母数字字符将被转义。

由于该`%`字符保留用于反向引用在 之前的`RewriteCond`语句中匹配的分组`RewriteRule`，因此 mod_rewrite 对它们的处理方式不同，最终可能会尝试`%2`用空白的反向引用替换 。

所以你的规则应该是这样的：

```
RewriteRule ^page/(.*)$ my-php-page.php?cid=$1 [B] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T11:35:10.677

如果我理解正确，重定向此 URL：

`http://www.example.com/page/V1ihnKpip6WpnY7Wm5zn2+6YUtLf2KCh4eKY`对这个

`http://www.example.com/my-php-page.php?cid=V1ihnKpip6WpnY7Wm5zn2+6YUtLf2KCh4eKY`

```
RewriteEngine On
RewriteRule ^page/([^/]*)  http://www.example.com/my-php-page.php?cid=$1 [L] 
```

结果是：

`http://www.example.com/my-php-page.php?cid=V1ihnKpip6WpnY7Wm5zn2+6YUtLf2KCh4eKY`

参数不变。

# image-processing - pdf to jpg 使用 ImageMagick 生成额外的空文件

> ID：13720653
> 
> 赞同：0
> 
> 时间：2012-12-05T10:06:46.060
> 
> 标签：image-processing, imagemagick, imagick

当我将 pdf 转换为 jpg 时，我总是得到一个空的 jpg 文件。如何避免？

这是我的查询：

`convert some.pdf -resize 800x600 -background white -gravity center -extent 800x600 -fill white xc:white -unsharp 0x1 some.jpg`

感谢帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T18:59:47.123

尝试这个：

```
convert some.pdf -resize 800x600 -background white -gravity center -extent 800x600 -unsharp 0x1 some.jpg 
```

# json - Spring MVC JSON 生产者在某些情况下花费的时间太长

> ID：13720654
> 
> 赞同：3
> 
> 时间：2012-12-05T10:06:51.090
> 
> 标签：json, spring, spring-mvc, jackson

背景：我的应用程序是一个基于 Web 的应用程序，使用：

*   春季 3.1.0 发布

*   杰克逊 1.9.2

详细信息：
我有一个简单的类（我们称之为 MyClass），它可以存储诸如 int、String 和 byte[] 之类的东西。我做了一个 HTTP 调用来调用下面的方法：

```
 @RequestMapping(value = "/getMyObj", method = RequestMethod.POST, consumes = MediaType.APPLICATION_JSON, produces = MediaType.APPLICATION_JSON) 
    @ResponseBody
    public MyClass getMyObj(@RequestBody String id {
        try{
                     MyClass myObj=myService.getMyClassObject(id);
             return myObj;
        } catch (Exception e){
            return ErrorResult(APIError.ERROR,e.getMessage());
        }
    } 
```

字节数组（由我的服务层通过我的 dao 层）填充了存储在数据库中的二进制内容（想象一个小文本文件内容），效果很好。IOW，myObj 构造得很好。问题是在浏览器中获得结果需要很长时间。示例：500 KB - 16 分钟。

如果我直接流式传输文件（下面的代码），它真的很快（比如 1 秒）。当然，我希望第一种方法会更慢......但不是这种差异。

```
@RequestMapping(value = "/get/{id}", method = RequestMethod.GET)
@ResponseBody
public void getFile(@PathVariable("id") String id, HttpServletResponse response) {
    try {
        response.reset();
        myService.get(id, new MyHttpConsumer (response));
    } catch (Exception e) {
        s.printStackTrace();
    }
}

private class MyHttpConsumer implements MyConsumer {
        private HttpServletResponse response;
        public MyHttpConsumer (HttpServletResponse response) {
            this.response = response;
        }

        public void setContentType(String contentType) {
            response.setContentType(contentType);
        }

        public OutputStream getOutputStream() throws IOException {
            return response.getOutputStream();
        }
    } 
```

我尝试使用自定义 ObjectMapper 以某种方式改进序列化。

```
 <bean id="myObjectMapper" class="com.*.*.MyObjectMapper"/>      
    <mvc:annotation-driven validator="validator">
        <mvc:message-converters register-defaults="true">
                <bean class="org.springframework.http.converter.json.MappingJacksonHttpMessageConverter">
                    <property name="objectMapper" ref="myObjectMapper" />
                </bean>
    </mvc:message-converters>   
    </mvc:annotation-driven> 
```

没有运气......也许值得说，如果我序列化 myObj（MyClass 类型）而忽略 byte[] 一切正常：快速回答。检查下面的序列化器。

```
 class MySerializer extends JsonSerializer<MyClass>
    {
        @Override
        public void serialize(MyClass value, JsonGenerator jgen,
                SerializerProvider provider) throws IOException,
                JsonProcessingException {
            // TODO Auto-generated method stub
            jgen.writeStartObject();
            byte[] b= values.getContent();
            jgen.writeBinaryField("content", b);
                //jgen.writeFieldName("id");
            //jgen.writeNumber(value.getId());
            jgen.writeEndObject();

        }
    } 
```

我正在注册我的序列化程序

```
module.addSerializer(MyClass.class, new MySerializer()); 
```

总结一下：考虑到 myObj 存储一个字节数组，我正在寻找的是对 getMyObj 调用的快速（更快）响应。

有什么想法/建议吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-01T19:33:18.147

如果您不受 Jackson1 的限制，我建议：

1.  [杰克逊 2](http://wiki.fasterxml.com/JacksonHome)
2.  [杰克逊加力模块](https://github.com/FasterXML/jackson-module-afterburner/)

Jackson 还具有可以切换的序列化功能：具体来说，[FLUSH_AFTER_WRITE_VALUE](http://wiki.fasterxml.com/JacksonFeaturesSerialization?highlight=%28%5CbFLUSH_AFTER_WRITE_VALUE%5Cb%29)可能会有所帮助。

# javascript - JavaScript 继承（使用超类函数时的无限循环）

> ID：13720659
> 
> 赞同：0
> 
> 时间：2012-12-05T10:07:11.617
> 
> 标签：javascript, oop

我正在查看 Tuts+ OO JavaScript 培训：他们进行原型继承的方式如下：

```
Employee.prototype = Object.create(Person.prototype); 
```

但是为什么我不能这样做（没有对象创建）

```
Employee.prototype = Person.prototype; 
```

第二个将给出一个无限循环：http: [//jsfiddle.net/VMqSy/](http://jsfiddle.net/VMqSy/)

为什么？控制台记录原型告诉我 1 with`Object.create()`会给 Employee.prototype 1 更多的级别`__proto__`，`Person.prototype`我认为

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T10:26:08.357

如果你这样做（如小提琴所示）

```
Employee.prototype = Person.prototype; 
```

then`Employee`将不是 的子类`Person`，而是它们将成为同一个类（尽管具有两个不同的构造函数）。

更准确地说，您添加到原型中的方法和属性`Employee`对于任何`Person`. 请注意，OOP 中的类不应以任何方式影响其超类。

* * *

```
Employee.prototype = Object.create(Person.prototype); 
```

将创建一个新对象，类似于

```
Employee.prototype = {};
Employee.prototype.__proto__ = Person.prototype 
```

除了`Object.create`（不像`__proto__`）适用于所有浏览器，或

```
Employee.prototype = new Person(); 
```

除了构造函数`Person`还可以设置额外的属性，`Employee.prototype`while`Object.create`将创建一个没有额外属性的对象。

* * *

小提琴中的无限循环发生是因为`Employee.prototype.sayHi`调用`Person.prototype.sayHi`, but `Employee.prototype.sayHi` *is* `Person.prototype.sayHi`，因此它调用*自身*`Person.prototype.sayHi`（当您分配给 时，原始文件丢失了`Employee.prototype.sayHi`）。

如果`Employee.prototype === Person.prototype`那时，必然，`Employee.prototype.sayHi === Person.prototype.sayHi`。

# jquery - 如何使用 JQuery 来迭代类的元素

> ID：13720662
> 
> 赞同：0
> 
> 时间：2012-12-05T10:07:23.100
> 
> 标签：jquery

在我的 MVC 应用程序中，我可以将 datepicker 类分配给所有需要日期字段的输入框。以前我可以使用以下属性（有效）设置我的日期选择器；

```
$(".datePicker").datepicker({ 
  showOn: 'both', 
  dateFormat: 'dd MM yy', 
  changeMonth: true, 
  changeYear: true, 
  yearRange: 'c-1:c+1', 
  beforeShowDay: noWeekendsOrHolidays }); 
```

现在我需要分配一个需要不同设置的出生日期选择器。因此，对于该元素，我将元素包装如下；

```
<span class="allDates"><%: Html.EditorFor(model => model.Employee.Dob)%></span> 
```

因此，当我的视图被渲染时，来自 View Source 的 Html 看起来像；

```
<tr>
    <td style="text-align: right;">
        <label for="Employee_Dob">Date of Birth</label>
    </td>                    
    <td colspan="2">
        <span class="allDates">
            <input class="datePicker" id="Employee_Dob" name="Employee.Dob" type="text" value="" />
        </span>
    </td>
</tr> 
```

现在我的 jquery 不起作用 - 我想这对某人来说是一个简单的修复；

```
$(function () {
    $(".datepicker").each(function() {
        if ($(this).parent().hasClass("allDates")) {
            $(this).datepicker({ showOn: 'both', dateFormat: 'dd MM yy', changeMonth: true, changeYear: true, yearRange: 'c-100:c' });
        } else {
            $(this).datepicker({ showOn: 'both', dateFormat: 'dd MM yy', changeMonth: true, changeYear: true, yearRange: 'c-1:c+1', beforeShowDay: noWeekendsOrHolidays });
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T10:20:04.617

为您的 DOB 字段添加一个额外的类，然后在其上再次创建日期选择器，并使用一组不同的选项：

`class="datepicker dob"`

```
$(".datepicker.dob").datepicker('destroy').datepicker({ 
    showOn: 'both',
    dateFormat: 'dd MM yy',
    changeMonth: true,
    changeYear: true,
    yearRange: 'c-100:c'
}); 
```

或者仅在该特定日期选择器上重新创建选项：

```
$("#Employee_Dob.datePicker").datepicker('destroy').datepicker({ 
    showOn: 'both',
    dateFormat: 'dd MM yy',
    changeMonth: true,
    changeYear: true,
    yearRange: 'c-100:c'
}); 
```

# android - ActionBarCompat 和使用带有片段的导航选项卡

> ID：13720667
> 
> 赞同：0
> 
> 时间：2012-12-05T10:07:46.763
> 
> 标签：android, android-actionbar, actionbarsherlock

我正在使用 ActionBarCompat 项目来实现与`ActionBar`. 在有人说之前`ActionBarSherlock`我决定使用它，因为它由 Google 提供，我不想依赖外部创建的库。但是，如果有人可以说届时将支持任何新的软件更新，`ActionBarSherlock`我可能会动摇。

我还必须补充一点，必须使用最新`CompatibilitySupport Library`的，所以如果我不能这样做，那么我就不能使用`ActionBarSherlock`

**我的问题**

我已经使用`ActionBarCompat`库实现了我的操作栏，它适用于所有 API。

我现在需要添加选项卡式导航以允许在`Fragments`

**我的问题**

这很容易实现还是我必须自己为此添加处理？

**提前致谢**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T11:11:18.603

在四处寻找答案后，我发现它在`ActionBarCompat`.

我要调查一下`ActionBarSherlock`。唯一阻碍我的是我是否可以将其纳入`SupportMapFragment`其中。

# android - ViewPager 没有显示任何内容

> ID：13720668
> 
> 赞同：4
> 
> 时间：2012-12-05T10:07:48.533
> 
> 标签：android, android-viewpager

请指教。我无法让 ViewPager 工作。这是我正在做的事情：

1) 这是我的 LinearLayout，我将在其中放置 ViewPager。我确信它的工作。我可以在其中放置任何视图：

```
<LinearLayout
    android:id="@+id/view_contact_values_container"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_below="@id/view_contact_sub_nav"
    android:orientation="vertical"
    android:paddingLeft="10dip" >
</LinearLayout> 
```

2）接下来我在代码中创建 ViewPager：

```
private void createViewPager() {
    ViewPager viewPager = new ViewPager(this);
    DatesPagerAdapter datesPagerAdapter = new DatesPagerAdapter(this);
    viewPager.setAdapter(datesPagerAdapter);
    viewPager.setCurrentItem(1);
    llContainer.addView(viewPager);
} 
```

3）和ViewPagerAdapter（PagerAdapter）：

```
@Override
public Object instantiateItem(ViewGroup container, int position) {
    LayoutInflater inflater = (LayoutInflater) container.getContext()
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    View v = inflater.inflate(R.layout.dates_carusel_item, null);
    ((ViewPager) container).addView(v, 0);
    return v;
}

@Override
public int getCount(){
    return 5;
} 
```

但是当我打开我的活动时，我的 LinearLayout 中没有显示任何内容。PS：抱歉问题样式不好。这个编辑器中的代码标签很奇怪。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T10:27:46.923

参加扩展 Fragment 的课程

```
class ExampleFragment extends Fragment
{
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,Bundle savedInstanceState) {
    View v = inflater.inflate(R.layout.dates_carusel_item, null);
  return v;
} 
```

在您的 PagerAdapter 中执行此操作

```
 private class DatesPagerAdapter extends FragmentPagerAdapter
{
    public DatesPagerAdapter(FragmentManager fm) {
        super(fm);
    }
    @Override
    public Fragment getItem(int arg0) {
        ExampleFragment fragment=new ExampleFragment();
        Bundle bundle=new Bunlde();
        //put bundle data here
        fragment.setArguments(bundle);
        return fragment;
    }
    @Override
    public int getCount() {
        5;
    }
} 
```

无论您想设置什么视图，都可以在示例片段上执行并添加您的 viewPager

```
ViewPager pager=new ViewPager(this);
pager.setAdapter(new DatesPagerAdapter);
llContainer.addView(pager) 
```

在 xml 中添加您的 ViewPager 以使其正确对齐，否则您可以在运行时 setLayoutParams 如果它是一个可见性错误

```
 android:layout_width="match_parent" android:layout_height="wrap_content"      android:orientation="vertical" android:layout_below="@id/view_contact_sub_nav"android:id="+id/view_contact_values_container"
android:paddingLeft="10dip">
<android.support.v4.view.ViewPager
    android:id="@+id/imagesgallery"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" />
</LinearLayout> 
```

# c - 在 C 程序中获取分段错误

> ID：13720669
> 
> 赞同：1
> 
> 时间：2012-12-05T10:07:56.343
> 
> 标签：c, arrays, pthreads, segmentation-fault

我在下面的代码中的第 8 行遇到分段错误。

```
typedef struct _my_struct {
     int pArr[21];      
     int arr1[8191];
     int arr2[8191];
     int m;
     int cLen;
     int gArr[53];  
     int dArr[8191]; 
     int data[4096];
     int rArr[53]; 
     int eArr[1024];

};

void *populate_data(void *arg) {
1   register int mask =1, iG;
2   struct _my_struct *var ;
3   var = arg;                         // arg is passed as initialized struct variable while creating thread
4   var->m = 13;
5   var->arr2[var->m] = 0;
6   for (iG = 0; iG < var->m; iG++) {
7       var->arr2[iG] = mask;
8       var->arr1[var->arr2[iG]] = iG;
9       if (var->pArr[iG] != 0)         // pArr[]= 1011000000001
10          var->arr2[var->m] ^= mask;
11      mask <<= 1;
12  }
13  var->arr1[var->arr2[var->m]] = var->m;
14  mask >>= 1;
15  for (iG = var->m+ 1; iG < var->cLen; iG++) {
16      if (var->arr2[iG - 1] >= mask)
17          var->arr2[iG] = var->arr2[var->m] ^ ((var->arr2[iG- 1] ^ mask) << 1);
18      else
19          var->arr2[iG] = var->arr2[iG- 1] << 1;
20      var->arr1[var->arr2[iG]] = iG;
21  }
22  var->arr1[0] = -1;
   } 
```

这是线程函数：

```
void main() {
        unsigned int tid;

        struct _my_struct  *instance = NULL;
        instance = (struct _my_struct  *)malloc(sizeof(_my_struct ));

        start_thread(&tid , 119312, populate_data, instance );          
}

int 
start_thread(unsigned int *tid, int stack_size, void * (*my_function)(void *), void *arg)
{
        pthread_t ptid = -1;
        pthread_attr_t pattrib;

        pthread_attr_init(&pattrib);

        if(stack_size > 0)
        {
            pthread_attr_setstacksize(&pattrib, stack_size);
        }
        else
        {
            pthread_attr_destroy(&pattrib);
            return -1;
        }

        pthread_create(&ptid, &pattrib, my_function, arg);      
        pthread_attr_destroy(&pattrib);

        return 0;
} 
```

一旦我通过 gdb 调试它，就会出现这个错误，

```
Program received signal SIGSEGV, Segmentation fault.
[Switching to Thread 0x7ffdfec80700 (LWP 22985)]
0x0000000000401034 in populate_data (arg=0x7fffffffe5d8) at Queue.c:19
19                     var->arr1[var->arr2[iG]] = iG; 
```

它的回溯是：

```
#0  0x0000000000401034 in populate_data (arg=0x7fffffffe5d8) at Queue.c:159
#1  0x00007ffff7bc6971 in start_thread () from /lib/libpthread.so.0
#2  0x00007ffff792292d in clone () from /lib/libc.so.6
#3  0x0000000000000000 in ?? () 
```

但是，我无法纠正错误。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T10:11:07.367

请在 中显示调用代码`start_thread`。

它似乎可能是堆栈和/或内存分配错误，结构非常大（假设 32 位为 8 MB `int`）并且很可能会溢出一些堆栈限制。

更有可能的是它超出了范围，这就是必须显示调用步骤的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T15:35:09.353

我不知道您是否更改了 _my_struct 中数组的名称以隐藏它们的用途（可能是公司机密信息？），但如果这实际上是您命名数组的名称，我我只是建议你给它们命名一些对你有意义的东西，当有人必须在 4 年后阅读你的代码时，他们会有一些希望遵循你的初始化循环并理解正在发生的事情。你的循环变量也是如此`iG`。

我的下一个评论/问题是，你为什么要启动一个线程来初始化主线程堆栈上的这个结构？一旦初始化，哪个线程将使用这个结构？或者你打算制作其他线程来使用它？您是否有任何机制（互斥量？信号量？）来确保其他线程在您的初始化线程完成初始化之前不会开始使用数据？哪一种引出了问题，你为什么要费心启动一个单独的线程来初始化它？您可以通过直接从 main() 调用 populate_data() 来初始化它，甚至不必担心同步，因为在完成初始化之前您甚至不会启动任何其他线程。如果你在多核机器上运行，您可能会从启动该单独线程以在 main() 继续进行初始化并执行其他操作时获得一些小好处，但是从结构的大小（不是很小，但也不是很大）看来，这种好处将是非常微小。而且，如果您在单核上运行，则根本不会获得并发优势；由于上下文切换开销，您只会浪费时间启动另一个线程来执行此操作；在 unicore 环境中，最好直接从 main() 调用 populate_data()。根本不会获得并发收益；由于上下文切换开销，您只会浪费时间启动另一个线程来执行此操作；在 unicore 环境中，最好直接从 main() 调用 populate_data()。根本不会获得并发收益；由于上下文切换开销，您只会浪费时间启动另一个线程来执行此操作；在 unicore 环境中，最好直接从 main() 调用 populate_data()。

下一条评论是，您的 _my_struct 并不大，因此它不会自行破坏您的堆栈。但它也不小。如果您的应用程序总是只需要这个结构的一个副本，也许您应该将其设为全局变量或文件范围变量，这样它就不会占用堆栈空间。

最后，到你的实际错误............

我没有费心去尝试破译你神秘的循环代码，但 valgrind 告诉我你有一些条件取决于未初始化的位置：

```
~/test/so$ valgrind a.out
==27663== Memcheck, a memory error detector
==27663== Copyright (C) 2002-2009, and GNU GPL'd, by Julian Seward et al.
==27663== Using Valgrind-3.5.0 and LibVEX; rerun with -h for copyright info
==27663== Command: a.out
==27663==
==27663== Thread 2:
==27663== Conditional jump or move depends on uninitialised value(s)
==27663==    at 0x8048577: populate_data (so2.c:34)
==27663==    by 0x593851: start_thread (in /lib/libpthread-2.5.so)
==27663==    by 0x4BDA8D: clone (in /lib/libc-2.5.so)
==27663==
==27663== Conditional jump or move depends on uninitialised value(s)
==27663==    at 0x804868A: populate_data (so2.c:40)
==27663==    by 0x593851: start_thread (in /lib/libpthread-2.5.so)
==27663==    by 0x4BDA8D: clone (in /lib/libc-2.5.so) 
```

我的 so2.c 第 34 行对应于您上面发布的代码中的第 9 行。我的 so2.c 第 40 行对应于您上面发布的代码中的第 15 行。

如果我在 populate_data() 的顶部添加以下内容，这些 valgrind 错误就会消失：

```
memset(arg,0,sizeof(_my_struct_t)); 
```

（我修改了你的结构定义如下：）

```
typedef struct _my_struct { int pArr[21]; ......... } _my_struct_t; 
```

现在仅仅因为添加 memset() 调用使错误消失并不一定意味着你的循环逻辑是正确的，它只是意味着现在这些位置被 valgrind 视为“初始化”。如果在初始化循环开始时在这些位置有全零是您的逻辑所需要的，那么应该可以解决它。但是您需要自己验证这确实是正确的解决方案。

顺便说一句...有人建议使用 calloc() 来获得归零分配（而不是使用脏堆栈空间）...这也可以，但是如果您希望 populate_data() 是万无一失的，那么您会将内存归零在其中而不是在调用者中，因为（假设您喜欢初始化逻辑）， populate_data() 取决于它是否被清零， main() 不必关心它是否存在。无论哪种方式都不是什么大问题。

# android - 实现展开和折叠通知android

> ID：13720670
> 
> 赞同：31
> 
> 时间：2012-12-05T10:08:00.990
> 
> 标签：android, notifications

我需要在 android 4.0 及以上版本的状态栏中实现展开和折叠通知。我在谷歌上搜索过这个但没有得到任何代码解决方案有没有人知道如何实现这个

先感谢您

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-12-05T10:40:09.413

可扩展`Notification`是 a 的一种特殊情况`Notification` [`Big View`](http://developer.android.com/guide/topics/ui/notifiers/notifications.html#BigNotify)。如果`Big View`它不在通知抽屉的顶部，它显示为“关闭”并且可以通过滑动展开。来自 Android 开发者的引用：

> 通知的大视图仅在通知展开时出现，这发生在通知位于通知抽屉的顶部时，或者当用户使用手势展开通知时。从 Android 4.1 开始提供扩展通知。

`Big View` `Notification`可以按如下方式创建：

```
Notification notification = new Notification.BigTextStyle(builder)
.bigText(myText).build(); 
```

或者

```
Notification notification = new Notification.BigPictureStyle(builder)
.bigPicture(
  BitmapFactory.decodeResource(getResources(),
    R.drawable.my_picture)).build(); 
```

[这](http://code4reference.com/2012/07/android-jelly-bean-notification/)是一个教程。

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2015-09-28T20:09:15.800

```
Notification noti = new Notification.Builder()
... // The same notification properties as the others
.setStyle(new Notification.BigPictureStyle().bigPicture(mBitmap))
.build(); 
```

你改变

```
.setStyle(new NotificationCompat.BigTextStyle().bigText(th_alert)) 
```

连同公告一起OK！！！

```
notification = new NotificationCompat.Builder(context) 
```

这是一个例子：

[可扩展的通知和通知组](https://medium.com/@shashankmohabia/android-notifications-3-expandable-notifications-and-notifications-groups-1cfed308fe3a)

您可以设置代码

```
Intent intent = new Intent(context, ReserveStatusActivity.class);
PendingIntent pendingIntent = PendingIntent.getActivity(context, 0, intent, 0);
NotificationManager notificationManager =
            (NotificationManager) context.getSystemService(Context.NOTIFICATION_SERVICE);
intent = new Intent(String.valueOf(PushActivity.class));
intent.putExtra("message", MESSAGE);
TaskStackBuilder stackBuilder = TaskStackBuilder.create(context);
stackBuilder.addParentStack(PushActivity.class);
stackBuilder.addNextIntent(intent);
// PendingIntent pendingIntent =
stackBuilder.getPendingIntent(0, PendingIntent.FLAG_UPDATE_CURRENT);

// android.support.v4.app.NotificationCompat.BigTextStyle bigStyle = new     NotificationCompat.BigTextStyle();
// bigStyle.bigText((CharSequence) context);

notification = new NotificationCompat.Builder(context)
    .setSmallIcon(R.mipmap.ic_launcher)
    .setContentTitle(th_title)
    .setContentText(th_alert)
    .setAutoCancel(true)
 // .setStyle(new Notification.BigTextStyle().bigText(th_alert)  ตัวเก่า
 // .setStyle(new NotificationCompat.BigTextStyle().bigText(th_title))
    .setStyle(new NotificationCompat.BigTextStyle().bigText(th_alert))
    .setContentIntent(pendingIntent)
    .setNumber(++numMessages)
    .build();

notification.sound = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_NOTIFICATION);
notificationManager.notify(1000, notification); 
```

或者

```
private void sendNotification(RemoteMessage.Notification notification, Map<String, String> data) {
            Bitmap icon = BitmapFactory.decodeResource(getResources(), R.drawable.logo);

            Intent intent = new Intent(this, MainActivity.class);
            intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
            PendingIntent pendingIntent = PendingIntent.getActivity(this, 0, intent, PendingIntent.FLAG_ONE_SHOT);

            NotificationCompat.Builder notificationBuilder = new NotificationCompat.Builder(this)
                   // .setContentTitle(notification.getTitle())
                    .setContentTitle(getResources().getText(R.string.app_name))
                    .setContentText(notification.getBody())
                    .setAutoCancel(true)
                    .setSound(RingtoneManager.getDefaultUri(RingtoneManager.TYPE_NOTIFICATION))
                    .setContentIntent(pendingIntent)
                    .setStyle(new NotificationCompat.BigTextStyle().bigText(notification.getBody()))
                    .setContentInfo(notification.getTitle())
                    .setLargeIcon(icon)
                    .setColor(Color.RED)
                    .setSmallIcon(R.drawable.logo);

            try {
                String picture_url = data.get("picture_url");
                if (picture_url != null && !"".equals(picture_url)) {
                    URL url = new URL(picture_url);
                    Bitmap bigPicture = BitmapFactory.decodeStream(url.openConnection().getInputStream());
                    notificationBuilder.setStyle(
                            new NotificationCompat.BigPictureStyle().bigPicture(bigPicture).setSummaryText(notification.getBody())
                    );
                }
            } catch (IOException e) {
                e.printStackTrace();
            }

            notificationBuilder.setDefaults(Notification.DEFAULT_VIBRATE);
            notificationBuilder.setLights(Color.YELLOW, 1000, 300);

            NotificationManager notificationManager = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);
            notificationManager.notify(0, notificationBuilder.build());
        } 
```

27/07/2021 :

您应该可以阅读详细信息：[Expandable Notifications and Notifications Groups](https://medium.com/@shashankmohabia/android-notifications-3-expandable-notifications-and-notifications-groups-1cfed308fe3a)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-05-15T15:26:22.173

我无法在 Notification的 .setStyle() 方法中设置**new NotificationCompat.BigTextStyle()的新实例。**所以我在.setStyle() 中使用了下面的**new Notification.BigTextStyle()的新实例。**

```
 Notification builder =new Notification.Builder(this)
                    .setSmallIcon(Notification_icons[icon])
                    .setContentTitle(title)
                    .setContentText(description)
                    .setChannelId(channelID_Default)
                    .setOngoing(true)
                    .setStyle(new Notification.BigTextStyle()
                            .bigText(description))
                    .build(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-03-05T05:51:23.057

此功能有一种方法，您可以在通知折叠时显示一个小图标，并在通知展开时显示一个大图标。

```
val bitmap = BitmapFactory.decodeResource(resources, R.drawable.notification)

var notification = NotificationCompat.Builder(context, CHANNEL_ID)
    .setSmallIcon(R.drawable.new_post)
    .setContentTitle(imageTitle)
    .setContentText(imageDescription)
    .setLargeIcon(bitmap)
    .setStyle(NotificationCompat.BigPictureStyle()
            .bigPicture(bitmap)
            .bigLargeIcon(null))
    .build() 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-07T11:39:16.303

我们无法在 android 4.1 以下版本中创建可扩展通知。但是我们可以这样做，而不是这样做，我们可以堆叠通知，然后我们可以为我们漂亮的自定义活动设置一个挂起的意图，它会在列表中显示所有通知。用户会很高兴看到这个:)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-07-20T02:13:28.067

(2021) 当我在扩展具有更大文本的通知时遇到问题时偶然发现了这个问题。通过参考可扩展通知上的 Android 文档解决：[创建可扩展通知](https://developer.android.com/training/notify-user/expanded)

Nimisha V 的回答显示了如何在通知上展开大图像。下面的**代码用于扩展通知上的大文本**。

```
var notification = NotificationCompat.Builder(context, CHANNEL_ID)
    .setSmallIcon(R.drawable.icon)
    .setContentTitle(notification_title)
    .setContentText(notification_message)
    .setStyle(NotificationCompat.BigTextStyle()
            .bigText(notification_message))
    .build() 
```

# audio - 将音频从服务器异步流式传输到多个客户端

> ID：13720671
> 
> 赞同：1
> 
> 时间：2012-12-05T10:08:00.820
> 
> 标签：audio, streaming, client-server

我有一个场景，我有一个在 linux 上运行的集中式服务器，它需要异步流式传输音频和视频到 100 个客户端。服务器的输入是从另一个服务器接收的。关于上下文的问题是“有没有办法将音频独立地流式传输到每个客户端？”

注意： 1\. 每个客户的视频和音频都是唯一的。

# javascript - jquery live click事件在IE8中不起作用

> ID：13720673
> 
> 赞同：0
> 
> 时间：2012-12-05T10:08:11.507
> 
> 标签：javascript, jquery, internet-explorer-8

我正在使用以下代码，它在我见过的所有浏览器中都能正常工作，IE9 很好，但后来我来到 IE8，它根本不起作用.. 仅供参考，`#cal_popup_table`元素被动态添加到页面..

```
 $("#cal_popup_table tbody tr td a").live('click', function() {
            $('.datepick-cmd-today').text(from_month + ' ' + from_year);

            var test = from_yeartest + '-' + from_monthtest + '-' + from_daytest;
            var test_new = test.split("-");
            var today = test_new[0] + '-' + test_new[1] + '-' + test_new[2];

            $("#arrival").val(today);
        }); 
```

任何人都可以解释为什么它可能无法正常工作，函数内的代码并不重要，因为一个简单的`alert()`也不起作用..点击事件根本不会触发

更新 - 这是插入页面的代码（修剪掉一些内容等）

```
<div id="cal_popup" class="datepick-popup" style="position: absolute; left: 901px; top: 219px; ">
<div class="datepick" style="width: 195px; ">
    <div class="datepick-nav">
        <a href="javascript:void(0)" title="Show the previous month" class="datepick-cmd datepick-cmd-prev  datepick-disabled">&lt;</a>
        <a href="javascript:void(0)" title="Show today's month" class="datepick-cmd datepick-cmd-today ">December 2012</a>
        <a href="javascript:void(0)" title="Show the next month" class="datepick-cmd datepick-cmd-next ">&gt;</a>
    </div>

    <div class="datepick-month-row">
        <div class="datepick-month">
            <table id="cal_popup_table">
                <tbody>
                    <tr>
                        <td>
                            <a href="javascript:void(0)" class="datepicker_link dp1354708800000   datepick-today datepick-highlight" title="Select Wednesday, Dec 5, 2012">5</a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>  
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T10:11:15.637

尝试删除`tbody`：

```
$("#cal_popup_table tr td a").live('click', function() { 
```

一些浏览器添加`<tbody>`到自动生成的表中，但 IE 8 没有。

这就是 JS 无法在 IE 8 中执行您的代码的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T10:30:03.947

我只是`checked your code in ie8`，`its working absolutely fine no problems whatsoever`我在小提琴中做了一些事情：http: [//jsfiddle.net/J8ysn/1/](http://jsfiddle.net/J8ysn/1/)

> **这是我尝试过的 jQuery 代码。**

```
 $('<table border="1"><tbody><tr><td></td></tr></tbody></table>')
        .appendTo('body')
        .attr({"id":"cal_popup_table"});

    $('<a href="#">clik</a>').appendTo("#cal_popup_table tbody tr td");

    $("#cal_popup_table tbody tr td a").live('click', function() {
          alert('live clicked');
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T10:22:34.300

使用 on()

```
 $("#cal_popup_table").on('click', 'tr td a', function() {
        alert('a');
    }); 
```

# php - 在 jquery mobile 中上传图片

> ID：13720680
> 
> 赞同：1
> 
> 时间：2012-12-05T10:08:19.533
> 
> 标签：php, ajax, jquery-mobile

我被要求开发现有系统的移动应用程序，我最近了解了 Jquery Mobile，我很着迷于我可以将 php 与 Jquery Mobile 一起使用，这将使我的任务更加简单。我最近的问题是从移动设备内存上传图像。是否可以上传图像并将其存储在数据库表的 BLOB 字段中？如果这样做是“正常”的 php 方式，或者在 Jquery Mobile 中有另一种方式。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-05T10:16:17.473

> 如果你想通过 jQuery Mobile 使用文件上传，你必须做两件事：
> 
> 1) 在表单定义中使用 data-ajax="false" 关闭 Ajax 导航，因为您无法使用 Ajax 上传文件。
> 
> 2) 在您的表单上指定适当的编码类型 enctype="multipart/form-data"。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T10:20:31.737

以正常的方式在 HTML 中上传文件。遵循例如[http://www.w3schools.com/php/php_file_upload.asp](http://www.w3schools.com/php/php_file_upload.asp)

# c++ - OpenCV 查找图像频率

> ID：13720683
> 
> 赞同：3
> 
> 时间：2012-12-05T10:08:26.600
> 
> 标签：c++, image-processing, opencv, dft

我正在尝试使用 OpenCV 找到图像中的主要频率。我在 OpenCV 教程中看到了 dft 示例，但是如何找到具有周期性结构的图像的主要频率？我想提取最低谐波的光谱信息，将它们复制到新图像并进行反向 dft。此问题附有示例图像。

![在此处输入图像描述](../Images/5fcb31ce2463409f5da0e0c9b9dbe093.png)

# vba - Excel：根据多个条件在工作表之间复制粘贴行

> ID：13720687
> 
> 赞同：0
> 
> 时间：2012-12-05T10:08:35.897
> 
> 标签：vba, excel, criteria

*到目前为止，感谢您的评论，它帮助我更好/不同地提出了我的问题。*

我有两张纸，**Sheet1**和**Sheet2**。
**Sheet1**包含约 100,000 行 5 列，并且**Sheet2**应包含 Sheet1 的子组**，**具体取决于**Sheet1**中的行是否在某些列中包含某些值。

这是我到目前为止的代码。不知何故，VBA 没有给我任何错误，但代码也没有运行，这使得很难找到可能的解决方案。有人有什么想法吗？

```
Sub CopyRows()
Dim r As Integer
Dim cell As Range
r = 2
For Each cell In Selection
    If Application.WorksheetFunction.IsNA(Sheets("Sheet1").Cells(r, 1)) = False Then
        If Sheets("Sheet1").Cells(r, 3) = "Product1" or "Product2" Then
            If Sheets("Sheet1").Cells(r, 5) = "2011" or "2012" Then
                If Sheets("Sheet1").Cells(r, 4) > 0 Then
                cell.EntireRow.Copy Destination:=activesheet.Rows(r)
                r = r + 1
                End If
            End If
        End If
    End If
Next cell
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T12:50:02.383

对于这样的合并，我的第一个赌注是数据透视表；在你的情况下

*   垂直的公司和城市
*   水平的产品（如果不是太多）
*   里面的值的计数或总和

最后加上一个过滤器来排除空的关键字段。

如果您安排 sheet1 以使第 1 行中只有一个标题行，则可以选择整个列（例如 $A:$D）作为数据透视表输入范围，并且刷新时任何其他行都将包含在数据透视表中。

当然，数据透视表可以进行排序、过滤、小计等。

# java - 在 JAXB 中，当定义 minOccurs 时，为什么有些元素生成为 Long 数据类型，而另一些元素生成为 long 数据类型？

> ID：13720690
> 
> 赞同：3
> 
> 时间：2012-12-05T10:08:59.403
> 
> 标签：java, xsd, jaxb

我发现了一些非常奇怪的东西，而且可能微不足道。当您在 XSD 中定义一个具有 type 的 Element`xs:long`并且您没有设置`minOccurs="0"`并且通过 JAXB 运行它时，生成的元素是 type `long`。但是，当您`minOccurs="0"`在 XSD 元素中设置时，结果元素的类型为`Long`. `long`注意和`Long`DataType之间的区别

现在，随着我的工作，我做了一些`if (thisVariable == null)`测试，自然`long`不能为空。`Long`能够。

****我想知道的是，这是 JAXB 中的一个错误导致结果变量之间存在这种差异，还是打算让这些结果变量以它们的方式出现？****

这是我用来测试的文件：

```
<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<xs:schema id="ReportRequestWrapper" xmlns="" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:msdata="urn:schemas-microsoft-com:xml-msdata">
  <xs:element name="ReportRequestWrapper">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="queryId" type="xs:long" minOccurs="0" />
        <xs:element name="reportId" type="xs:long" minOccurs="0" />
      </xs:sequence>
    </xs:complexType>
  </xs:element>
</xs:schema> 
```

`queryId`结果`reportId`如下：

```
public class ReportRequestWrapper {

    protected Long queryId;
    protected Long reportId; 
```

如果我省略了 MinOccurs="0"，

```
 <xs:element name="queryId" type="xs:long"  />
        <xs:element name="reportId" type="xs:long"  /> 
```

结果变成了

```
public class ReportRequestWrapper {

    protected long queryId;
    protected long reportId; 
```

我只是觉得这很好奇，想要更多关于这个的信息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T10:20:04.453

不，这不是错误，因为当您说`minOccurs = "0"`这意味着`queryId`可能存在或不存在时。

所以正如你所说的`long`不能`null`，所以不能模拟它不存在的情况`Long`。

而当您不指定`minOccurs = "0"`这意味着**无论值是什么**（`null`即不存在的其他值），`queryId`都会存在。所以本案完全满意，`long`不需要`Long`。

# iphone - 如何实现 iOS 金属探测器应用程序？

> ID：13720691
> 
> 赞同：0
> 
> 时间：2012-12-05T10:09:00.343
> 
> 标签：iphone, ios, ios5, magnetometer

我想实现一个金属探测器应用程序，它会对手机周围的磁场做出反应。

如何从 iPhone 上的磁力计读取磁场读数？有没有人有直接访问磁力计读数的示例代码？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T10:10:31.260

不，你不能。

**更新**：iPhone 中没有金属检测组件。但是，自 iPhone 3GS 起就有磁力计可用。指南针应用程序利用传感器来检测方向。它只读取磁北，但不读取周围的磁场。因此，您不能用它制作金属探测器。

物理事实：金属不会产生磁场。磁铁可以。

ps 如果我错了，请纠正我。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T12:56:21.717

我建议你看看 O'Reilly 即将出版的名为 iOS Sensor 的书。他们有一整章（6）关于磁力计和一个示例应用程序。

[iOS 传感器编程](http://my.safaribooksonline.com/book/hardware/9781492015154/7dot-apps/_ios_sensor_programming_html)

[从磁力计读取原始值的 Apple 示例代码](http://developer.apple.com/iphone/library/samplecode/Teslameter/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T10:13:59.827

已经有一个应用程序可以做到这一点。[检查这个](http://www.makeuseof.com/dir/metal-detector-easily-detect-metal-objects-iphone/)和[这个博客。](http://www.addictivetips.com/mobile/find-steel-iron-objects-using-the-metal-detector-app-for-iphone/)

描述是这样说的，

> 该应用程序具有可调节的灵敏度，如果灵敏度达到中等水平，则会发出声音信号。如果您打算再次使用该设备，则需要将手机摇晃一次以进行校准。
> 
> 该应用程序利用 iPhone 上的磁力计来查找与指南针的干扰以检测金属物体。只需将手机的背面、相机下方的区域、金属上方悬停，应用程序就会找到金属，并且灵敏度应该会提高。

但是我不确定**它是假的应用程序**还是真的可以这样做。尝试下载并自己检查。这是一个免费的应用程序。

# datagridview - DataGridView 索引

> ID：13720694
> 
> 赞同：2
> 
> 时间：2012-12-05T10:09:09.413
> 
> 标签：datagridview

我使用 Microsoft Visual Studio 2005。我遇到了 DataGridView 试图阻止索引返回到第一个单元格和所选单元格的持久性的问题。

当更新是由于光标到第一个单元格时

我这样做是为了阻止它

```
Private Sub DataGridView100_RowsAdded(ByVal sender As System.Object, ByVal e As System.Windows.Forms.DataGridViewRowsAddedEventArgs) Handles DataGridView100.RowsAdded

    DataGridView100.Columns(0).Selected = False
    DataGridView100.Rows(0).Selected = False
    DataGridView100.Rows(0).Cells(0).Selected = False

    'Another way

    'DataGridView100.ClearSelection()

End Sub 
```

我现在想要的：当我选择一个单元格或一列以留在所选选项中时

第二个问题也想如果单元格内的数字发生变化来改变该单元格的背景

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-27T08:05:34.230

这是在 C# 中，但可能你会做类似的事情。

第一：改变背景颜色：

```
private void dataGridView1_CellEndEdit(object sender, DataGridViewCellEventArgs e)
{
 // your code here
dataGridView1.Rows[e.RowIndex].Cells[e.ColumnIndex].Style.BackColor = Color.Red
} 
```

您是否需要仅在单元格中的数字更改时才更改的条件？您是否需要通过手动更改单元格内容或通过程序更改来触发更改？

二：保存选择

首先存储选中的行索引：

```
private void dataGridView1_CellClick(object sender, DataGridViewCellEventArgs e) 
{
  nSelectedRowIndex = e.RowIndex;

} 
```

然后在你的`DataGridView100_RowsAdded`：

```
// your code

dataGridView1.ClearSelection();
dataGridView1.Rows[nSelectedRowIndex].Selected = true 
```

这适用于选定的行，您可以存储选定的单元格索引，然后添加`.Cells[nSelectedCellIndex.Selected = true`。

# iphone - 模仿 UICollectionView 图片预览

> ID：13720697
> 
> 赞同：0
> 
> 时间：2012-12-05T10:09:23.607
> 
> 标签：iphone, objective-c, ios, xcode, uicollectionview

我在情节提要中创建了 UICollectionView 和 UICollectionViewCell 。我通过添加 UIImage 来自定义单元格。用户点击单元格后，我想显示来自特定单元格的图像尺寸增加。为了实现这一点，我将 UIImageView 添加到视图中，将其放在顶部并制作 ：`[previewImage setAlpha:0];`和`[previewImage setHidden:YES];`. `-viewDidLoad`在`-didSelectItemAtIndexPath:`我想将此 UIImageView 中的图像值设置为触摸单元格中的适当值。我试过

`previewImage.image = [(CustomCell *)[collectionView cellForItemAtIndexPath:indexPath] image].image;`

但它不起作用。在日志中，我看到`previewImage.image`返回 null。那么如何以正确的方式从单元格中检索图像值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T10:40:08.560

通过`previewImage.image`这样设置解决：

`UIImage *preImage = [(CustomCell *)[collectionView cellForItemAtIndexPath:indexPath] image].image; [previewView setImage:preImage];`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T10:41:19.910

嘿，您只需使用以下委托方法`UICollectionView`

```
#pragma mark - UICollectionViewDelegate
- (void)collectionView:(UICollectionView *)collectionView didSelectItemAtIndexPath:(NSIndexPath *)indexPath 
{
    // TODO: Select Item

} 
```

有关更多信息，请参阅此[UICollectionview-example](http://ashfurrow.com/blog/uicollectionview-example)

我希望这对你有帮助..

# uiscrollview - 滚动视图上的 Uisegment 按钮

> ID：13720702
> 
> 赞同：0
> 
> 时间：2012-12-05T10:09:42.377
> 
> 标签：uiscrollview, uisegmentedcontrol

嗨，我试图在 uiscrollview 上放置一个 uisegmented 控件，因为我希望它们水平滚动这是我尝试过的代码

```
UIScrollView *scroll = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 0, 600, 300)];
scroll.contentSize = CGSizeMake(500, 50);
scroll.showsHorizontalScrollIndicator = YES;
scroll.pagingEnabled = YES;
scroll.showsHorizontalScrollIndicator = YES;
scroll.autoresizingMask = YES;
scroll.autoresizesSubviews = YES;
NSArray *itemArray = [NSArray arrayWithObjects: @"One", @"Two",  @"Three",@"four",@"Five", nil];
UISegmentedControl *segmentedControl = [[UISegmentedControl alloc] initWithItems:itemArray];
segmentedControl.frame = CGRectMake(0,10, 500, 50);
segmentedControl.segmentedControlStyle = UISegmentedControlStylePlain;
segmentedControl.selectedSegmentIndex = 4;

[scroll addSubview:segmentedControl];
[self.view addSubview:scroll]; 
```

任何人请帮我完成这个。提前感谢快乐编码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-06T11:09:21.050

滚动视图的框架必须小于滚动视图的内容大小。如果你会增加你的内容大小肯定会奏效。例如：-

```
 UIScrollView *scroll = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 0, 320, 50)];
    scroll.contentSize = CGSizeMake(500, 50);
    scroll.showsHorizontalScrollIndicator = YES;
    scroll.pagingEnabled = YES;
    scroll.showsHorizontalScrollIndicator = YES;
    scroll.autoresizingMask = YES;
    scroll.autoresizesSubviews = YES;
    NSArray *itemArray = [NSArray arrayWithObjects: @"One", @"Two",  @"Three",@"four",@"Five", nil];

    UISegmentedControl *segmentedControl = [[UISegmentedControl alloc] initWithItems:itemArray];
    segmentedControl.frame = CGRectMake(0,10, 500, 50);
    segmentedControl.segmentedControlStyle = UISegmentedControlStylePlain;
    segmentedControl.selectedSegmentIndex = 4;

    [scroll addSubview:segmentedControl];
    [self.view addSubview:scroll]; 
```

如果支持，请将答案标记为正确。非常感谢。

# php - 如何在这个 PHP 脚本中调整图像大小？

> ID：13720703
> 
> 赞同：0
> 
> 时间：2012-12-05T10:09:42.143
> 
> 标签：php, ajax, jquery

我正在通过 ajax 试验 php 脚本，它从[这个源上传一组图像。](http://tutorialzine.com/2011/09/html5-file-upload-jquery-php/)

虽然效果很好，但我正在尝试输入 php 代码，将图像的宽度或高度调整为 120 像素（以较大者为准）。为了我的理智，请帮助如何更新代码：

```
$demo_mode = false;
$upload_dir = 'uploads/';
$allowed_ext = array('jpg','jpeg','png','gif');

if(strtolower($_SERVER['REQUEST_METHOD']) != 'post'){
    exit_status('Error! Wrong HTTP method!');
}

if(array_key_exists('pic',$_FILES) && $_FILES['pic']['error'] == 0 ){

    $pic = $_FILES['pic'];

    if(!in_array(get_extension($pic['name']),$allowed_ext)){
        exit_status('Only '.implode(',',$allowed_ext).' files are allowed!');
    }   

    if($demo_mode){

        // File uploads are ignored. We only log them.

        $line = implode('       ', array( date('r'), $_SERVER['REMOTE_ADDR'], $pic['size'], $pic['name']));
        file_put_contents('log.txt', $line.PHP_EOL, FILE_APPEND);

        exit_status('Uploads are ignored in demo mode.');
    }

    // Move the uploaded file from the temporary
    // directory to the uploads folder:

    if(move_uploaded_file($pic['tmp_name'], $upload_dir.$pic['name'])){
        exit_status('File was uploaded successfuly!');
    }

}

exit_status('Something went wrong with your upload!');

// Helper functions

function exit_status($str){
    echo json_encode(array('status'=>$str));
    exit;
}

function get_extension($file_name){
    $ext = explode('.', $file_name);
    $ext = array_pop($ext);
    return strtolower($ext);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T10:13:34.777

你可以在你的服务器上安装[imagemagick ：](http://www.imagemagick.org/script/index.php)

```
<?php
function resize_image($file, $w, $h, $crop=FALSE) {
    $img = new Imagick($file);
    if ($crop) {
        $img->cropThumbnailImage($w, $h);
    } else {
        $img->thumbnailImage($w, $h, TRUE);
    }

    return $img;
}
resize_image(‘/path/to/some/image.jpg’, 150, 150); 
```

另一种方法是使用[PHP-GD](http://php.net/manual/en/book.image.php)：

```
<?php
function resize_image($file, $w, $h, $crop=FALSE) {
    list($width, $height) = getimagesize($file);
    $r = $width / $height;
    if ($crop) {
        if ($width > $height) {
            $width = ceil($width-($width*($r-$w/$h)));
        } else {
            $height = ceil($height-($height*($r-$w/$h)));
        }
        $newwidth = $w;
        $newheight = $h;
    } else {
        if ($w/$h > $r) {
            $newwidth = $h*$r;
            $newheight = $h;
        } else {
            $newheight = $w/$r;
            $newwidth = $w;
        }
    }
    $src = imagecreatefromjpeg($file);
    $dst = imagecreatetruecolor($newwidth, $newheight);
    imagecopyresampled($dst, $src, 0, 0, 0, 0, $newwidth, $newheight, $width, $height);

    return $dst;
}

$img = resize_image(‘/path/to/some/image.jpg’, 150, 150); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T10:16:24.263

```
<?php
// The file
$filename = 'test.jpg';
$percent = 0.5;

// Content type
header('Content-Type: image/jpeg');

// Get new dimensions
list($width, $height) = getimagesize($filename);
$new_width = $width * $percent;
$new_height = $height * $percent;

// Resample
$image_p = imagecreatetruecolor($new_width, $new_height);
$image = imagecreatefromjpeg($filename);
imagecopyresampled($image_p, $image, 0, 0, 0, 0, $new_width, $new_height, $width, $height);

// Output
imagejpeg($image_p, null, 100); 
```

[在php.net](http://php.net/imagecopyresampled)上查找更多信息

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T20:02:33.183

好吧，我从这个[LINK](http://php.net/manual/en/function.imagecopyresampled.php)中举了一个“promaty”的例子， 并从循环中调用：

```
<?php

$dir = "uploads/*.*";
$images = glob( $dir );

foreach( $images as $file ):
    $px = 120;
    $prefix = $px . "_";
    $dst = "uploads/" . $prefix . basename($file);
    $resized = image_resize($file, $dst, $px, $px);
    echo "<img src='" . $dst . "' />";
    echo "<p>" . basename($dst) . " </p>";
endforeach; 
```

...感谢您的宝贵时间。

# uml - 如何在 UML 用例图中表示多个用户的登录？

> ID：13720712
> 
> 赞同：2
> 
> 时间：2012-12-05T10:10:05.040
> 
> 标签：uml, use-case-diagram

表示具有多个用户的系统用例的最佳方式是什么，这些用户必须登录到系统才能执行各种任务？

例如，考虑一个大学系统，管理员可以登录并将学生添加到数据库，而注册商也可以登录并修改数据库？

如果可能，请发布一个简单的用例图。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T10:53:43.437

您可以简单地将每个用户（或者，更可扩展的，每个组或角色）表示为一个 Actor。然后，每个 Actor 将与一组不同的用例相关联。

如果Actor 之间存在*is-a*关系，当然可以使用层次结构，因此子代将继承其祖先的用例。

# php - Wordpress 在静态页面中显示最近发布的博客

> ID：13720713
> 
> 赞同：3
> 
> 时间：2012-12-05T10:10:05.777
> 
> 标签：php, wordpress, wordpress-theming

在 WordPress 中，我在面板中显示带有`Front page displays`设置的静态首页。`Reading`这很好，但我想在这个静态页面中显示最近的博客文章列表。我不确定在这个静态页面中显示最近的博客文章的最佳方法是什么。那么有人可以指导我在静态页面中显示最近的博客吗？任何帮助和建议都将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T10:41:01.580

在你想显示博客内容的地方试试这段代码

```
<div class="blog-post-wrap">
  <?php
  $args = array( 'numberposts' => '4' );
  $recent_posts = wp_get_recent_posts( $args );
  foreach( $recent_posts as $recent ){?>
    <div class="blog"><?php echo substr($recent["post_content"], 0 , 150); ?>
      <span class="link"><?php echo '<a href="' . get_permalink($recent["ID"]) . '" title="Reaed More '.$recent["post_title"].'" >' .   'Read More'.'</a> '; ?></span>
    </blog>
  <?php } ?>
</div> 
```

我使用`<?php echo substr($recent["post_content"], 0 , 150); ?>`一段代码在页面上显示有限的字符。您可以根据需要更改它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-25T11:38:02.730

您可以简单地使用 iframe 来包装您的查询并将 iframe 放置在任何 html 或 php 页面上，而无需触摸您当前的页面代码......查看此链接的详细说明：http: [//allnigeriansinspain.com/blog/show -wordpress-post-on-static-html-page/](http://allnigeriansinspain.com/blog/show-wordpress-post-on-static-html-page/)

# html - 将元素置于彼此之上

> ID：13720714
> 
> 赞同：2
> 
> 时间：2012-12-05T10:10:08.553
> 
> 标签：html, css

我有一个被图像隐藏的下拉菜单，如下图所示。我希望下拉菜单位于图像的顶部。我怎样才能做到这一点？

![图像部分隐藏的下拉菜单](../Images/ef24dfca3cd60ac890d9e8e543dd3786.png)

它是通过CSS完成的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T10:10:44.387

您可以通过将更大`z-index`的下拉菜单来做到这一点

> 具有较大堆栈顺序的元素始终位于具有较低堆栈顺序的元素之前。

像

```
img{
  z-index:5;
}

.dropdown{
   z-index:6;
} 
```

> **注意：** z-index 仅适用于定位元素（position:relative、position:absolute 或 position:fixed）。

```
.photo-thumb {
    margin-top: 20px;
    position: relative;
    width: 160px;
    z-index: 6;  <------- you have z-index 6 here 
} 
```

和

```
.menu ul {
    background: none repeat scroll 0 0 #1F2024;
    border-radius: 0 0 5px 5px;
    left: 0;
    opacity: 0;
    position: absolute;
    top: 40px;
    transition: opacity 0.25s ease 0.1s;

    z-index: 7; <-----this is the key try z-index 7 here 
} 
```

[[[[![jsFiddle](../Images/827f57786617d886d70c0bce0ccca6b6.png)](http://jsfiddle.net/96g6c/)]]]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T10:11:57.757

最好的方法是使其成为元素的背景图像，而不是实际的图像标签

# ios - 在 iOS6 上断开 Facebook 与应用程序的连接？

> ID：13720716
> 
> 赞同：5
> 
> 时间：2012-12-05T10:10:14.950
> 
> 标签：ios, facebook, ios6, facebook-ios-sdk

我正在使用最新的 Facebook iOS SDK，3.1.1。我想让用户选择从 Facebook“断开”我们的应用程序。我打电话给：

```
[[FBSession activeSession] closeAndClearTokenInformation]; 
```

这似乎工作正常，但下次我打电话

```
[FBSession openActiveSessionWithReadPermissions:allowLoginUI:completionHandler:handler]; 
```

它立即给了我一个令牌，而不要求用户再次登录。我希望它再次要求用户进行身份验证。如果设备上没有设置 Facebook 帐户，它可以正常工作，因为它会打开 Web 浏览器，告诉用户他们已经验证了应用程序并显示“确定”按钮。但是如果设置好了，它只是默默地再次获取令牌，因此用户“断开”应用程序没有任何效果。

有没有其他人有这个问题，你是如何处理的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T10:16:37.320

它不再询问，因为 iOS SDK 已为 Facebook SDK 提供了有效的访问令牌。这就是 Apple 设计他们的 Facebook（和 Twitter）框架的方式。你对此无能为力。个人觉得很棒。用户应该只需要在他们接受应用程序后告诉他们的手机。

另请注意，缓存的令牌可能已过期。Facebook SDK 目前还不能完全处理 iOS SDK 给它一个过期令牌的情况。

如果您想测试，则可以删除设备上的 Facebook 帐户并重新添加。那应该清除缓存的令牌。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-18T21:05:07.373

使用：

```
- (void)openWithBehavior:(FBSessionLoginBehavior)behavior completionHandler:(FBSessionStateHandler)handler; 
```

使用*FBSessionLoginBehaviorForcingWebView*作为行为解决了我的问题。它打开登录模式框并忘记用户 cookie。

# html - 为什么 -moz-background-size:cover 在 Firefox 中不起作用？

> ID：13720720
> 
> 赞同：2
> 
> 时间：2012-12-05T10:10:26.823
> 
> 标签：html, css, firefox, background-image

我正在编写一个包含 3 个宽图像的站点，这些图像始终需要 100% 的宽度。我正在使用媒体查询，我宁愿不必为每个图像制作 3 个以上的副本以使其适合。

这是我想要的图像上的 CSS：

```
#artwork1 {
    width: 1500px;
    height:500px;
    background-image: url(../img/menupic_1.png);
    background-repeat:no-repeat;
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;    
} 
```

这是一个 jsFiddle 链接：http: [//jsfiddle.net/RtPEA/](http://jsfiddle.net/RtPEA/)。该链接仅包含`<div>`需要调整大小的背景的三个。

我`background-size:cover;`在很多网站上都使用过，但在 Firefox 中，它似乎不适用于这个网站。

我也尝试过各种 jQuery 插件。虽然我确实找到了一些成功的，但它们在 iOS 上不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T11:09:03.367

您需要`background-size`在前缀版本之后添加：

```
#artwork1 {
    width: 1500px;
    height:500px;
    background-image: url(../img/menupic_1.png);
    background-repeat:no-repeat;
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: cover;
} 
```

*   [http://jsfiddle.net/RtPEA/5/](http://jsfiddle.net/RtPEA/5/)

[`-moz-background-size`仅在 Firefox 3.6 中受支持](http://www.browsersupport.net/CSS/-moz-background-size)，并且不保证其他前缀版本会继续存在。

# c# - MethodAccessException：尝试访问该方法失败。（Windows 手机 7）

> ID：13720723
> 
> 赞同：1
> 
> 时间：2012-12-05T10:10:31.137
> 
> 标签：c#

我正在开发一个读取 INI 文件内容的工具。我在其中使用 kernel32 dll 导入。但是，当我在实际设备上运行该应用程序时，我会收到这样的异常，“MethodAccessException：尝试访问该方法失败。” 我使用的设备是三星 Omnia (Windows Phone 7.1)。

除此之外，在另一个应用程序中，我正在使用核心 dll 导入，并且遇到了同样的异常。如何删除此异常？

```
public class IniFile
{
    public string path;

    [DllImport("kernel32")]
    private static extern long WritePrivateProfileString(string section, string key, string val, string filePath);
    [DllImport("kernel32")]
    private static extern int GetPrivateProfileString(string section, string key, string def, StringBuilder retVal, int size, string filePath);

    public IniFile(string INIPath)
    {
        path = INIPath;
    }

    public void IniWriteValue(string Section, string Key, string Value)
    {
        WritePrivateProfileString(Section, Key, Value, this.path);
    }

    public string IniReadValue(string Section, string Key)
    {
        StringBuilder temp = new StringBuilder(255);
        int i = GetPrivateProfileString(Section, Key, "", temp, 255, this.path);
        return temp.ToString();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T12:07:43.213

Minimum supported client | Windows 2000 Professional [**desktop apps only**]

[WritePrivateProfileString function (Windows)](http://msdn.microsoft.com/en-us/library/windows/desktop/ms725501%28v=vs.85%29.aspx)

Also check this links:

[Win32 and COM for Windows Store apps (system) (Windows)](http://msdn.microsoft.com/en-US/library/windows/apps/br205762)

[WritePrivateProfileString() Does Not Work If You Do Not Have Delete Access on the Folder](http://support.microsoft.com/kb/250067)

# php - 希伯来语单词在 ie8 和 ie9 的 url 中不起作用

> ID：13720724
> 
> 赞同：-1
> 
> 时间：2012-12-05T10:10:37.213
> 
> 标签：php, character-encoding

我有这样的网址：

```
http://www.example.com/search_page/?From=ISL&alphabet=א 
```

这个网址在 safari，mozila 中正常工作，但在 ie8 和 ie9 中显示在 url 中

```
http://www.example.com/search_page/?From=ISL&alphabet= 
```

请在这个问题上帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T10:15:13.730

网址来自哪里？

我的猜测是原始链接不是 URL 编码的。

尝试从您的 IE 访问此链接

```
http://www.example.com/search_page/?From=ISL&alphabet=%D7%90 
```

# c# - c#异步类？

> ID：13720728
> 
> 赞同：0
> 
> 时间：2012-12-05T10:10:44.827
> 
> 标签：c#, function, asynchronous, directory

我是 C# 的新手（我来自 C），所以我对异步操作有点困惑。

我有一个类，它具有我程序的所有“重要”功能，它下载文件并将其添加到文件夹等。

然后我有一个 WPF 表单（图形界面），所以当用户选择一个文件夹时，它会扫描文件夹中的所有文件并下载所有音乐曲目的封面。

我想做一个进度条，明明必须是异步的，不知道该由谁来做。

我想当用户点击按钮时我必须异步调用“重要”函数

有什么好的教程可以做这个吗？或者你能告诉我基本步骤吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T10:19:39.010

您可以使用[BackgroundWorker](http://msdn.microsoft.com/en-us/library/8xs8549b.aspx)组件，您可以按照本[教程](http://msdn.microsoft.com/en-us/library/hybbz6ke.aspx)来使您的进度条正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T10:56:07.400

欢迎来到 C#.Net =D

[TPL（任务并行库）](http://msdn.microsoft.com/en-us/library/dd997423.aspx)是帮助您进行异步编程的类的集合，并且由于您使用 WPF 来显示数据，我还建议您阅读有关[MVVM (Model-View-ViewModel) 的](http://www.codeproject.com/Articles/100175/Model-View-ViewModel-MVVM-Explained)信息。对于具有用户界面的应用程序来说，这是一种非常重要的设计模式。

享受阅读：D

在你完成它之后，也许下面的代码示例可以帮助你实现你的异步行为。

在 MainWindow.xaml 中：

```
<ProgressBar Name="progressBar" Visibility="{Binding ProgressBarVisible, Converter=booleanVisibilityConverter}" IsIndeterminate="True" Width="100"/> 
```

在 MainWindowViewModel.cs 中：

```
public MainWindowViewModel : INotifyPropertyChanged
{
    public bool ProgressBarVisible {
        get { return progressBarVisible; }
        set { 
            progressBarVisible=value;
            RaisePropertyChanged("ProgressBarVisible");
        }
    }

    public void LoadImages() 
    {
        ProgressBarVisible = true;

        //your logic for downloading the images

        ProgressBarVisible = false;
    }

    public void DownloadImagesAsync()
    {
        Task.Factory.StartNew(LoadImages);
    }
} 
```

# c#-4.0 - System.Web.UI.Control.LoadRecursive() 在我的用户控件或页面中调用可能多次

> ID：13720734
> 
> 赞同：6
> 
> 时间：2012-12-05T10:11:12.157
> 
> 标签：c#-4.0, user-controls, performance

我的一个页面上有一个用户控件，我在这个页面上遇到错误

```
Object reference not set to an instance of an object. 
```

我已经很容易地解决了这个问题，但是我在这个错误的堆栈跟踪中发现了一些奇怪的东西。

当我检查堆栈跟踪时，如下所示

```
at System.Web.Util.CalliEventHandlerDelegateProxy.Callback(Object sender, EventArgs e)
at System.Web.UI.Control.OnLoad(EventArgs e)
at System.Web.UI.Control.LoadRecursive()
at System.Web.UI.Control.LoadRecursive()
at System.Web.UI.Control.LoadRecursive()
at System.Web.UI.Control.LoadRecursive()
at System.Web.UI.Control.LoadRecursive()
at System.Web.UI.Control.LoadRecursive()
at System.Web.UI.Control.LoadRecursive()
at System.Web.UI.Control.LoadRecursive()
at System.Web.UI.Control.LoadRecursive()
at System.Web.UI.Control.LoadRecursive()
at System.Web.UI.Control.LoadRecursive()
at System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) 
```

它不是完整的堆栈跟踪，而是其中的一部分。我想知道这个函数“System.Web.UI.Control.LoadRecursive()”的作用是什么。它被调用了 11 次，我担心这可能会导致我的应用程序出现性能问题。我认为调用此函数是因为我正在使用用户控件。我在我的应用程序的许多地方都使用这种用户控件。

请告诉我是否有人知道这件事。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-02-22T09:17:19.900

`LoadRecursive()`调用当前控件的`OnLoad()`方法，然后递归调用`LoadRecursive()`其所有子控件，包括嵌套在 html 中的子控件。

因此，对于已通过的每个父控件，您将`LoadRecursive()`在堆栈上调用 1 次以访问您的自定义控件。复合控件可以多合一，这将增加深度。

这不一定是性能问题。只是嵌套深度的指示。

# c++ - 最长公共子序列长度函数没有返回正确的长度？

> ID：13720741
> 
> 赞同：3
> 
> 时间：2012-12-05T10:11:16.493
> 
> 标签：c++, algorithm

我试图实现动态编程方法来查找两个序列之间的最长公共子序列。当被比较的两个字符串长度相同时，我的算法有效，但是当第二个字符串比第一个字符串长时，我的`LCSLength()`函数不会返回正确的值。

这是带有返回错误值的测试用例的代码。

```
#include <iostream>
#include <string>
#include <fstream>

using namespace std;

int LCSLength(string X,string Y);

int main()
{
    string first ("HELLO");
    string second ("HLOCKKE");
    int LCS;

    //ifstream inData;
    //inData.open("test.dat");

    //inData >> first >> second;
    //inData.close();

    LCS = LCSLength(first,second);
    cout << "The LCS is: " << LCS << endl;
    cout << first << endl;
    cout << second << endl;
    return 0;
}

int LCSLength(string X,string Y)
{
    int m = X.size();
    int n = Y.size();
    int C[m][n];
    for(int i=0; i<=m; i++)
    {
        for(int j=0; j<=n; j++)
            C[i][j] = 0;
    }
    for(int i=1; i<=m; i++)
    {
        for(int j=1; j<=n; j++)
        {
            if(X[i-1]==Y[j-1])
                C[i][j]=C[i-1][j-1]+1;
            else 
                C[i][j]=max(C[i][j-1],C[i-1][j]);
       }
    }

    return C[m][n];
} 
```

这应该打印“The LCS is: 3”，因为我的两个字符串之间的 LCS 是 3，但是，我的程序没有。我找不到我的错误。感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T10:57:02.760

使用一些谷歌搜索修复了我的错误。索引是我的问题。这是正确的代码：

```
#include <iostream>
#include <string>
#include <fstream>

using namespace std;

int LCSLength(string X,string Y);

int main()
{
    string first ("HELLO");
    string second ("HLOCKKE");
    int LCS;

    //ifstream inData;
    //inData.open("test.dat");

    //inData >> first >> second;
    //inData.close();

    LCS = LCSLength(first,second);
    cout << "The LCS is: " << LCS << endl;
    cout << first << endl;
    cout << second << endl;
    return 0;
}

int LCSLength(string X,string Y)
{
    int m = X.size();
    int n = Y.size();
    int L[m+1][n+1];
    for(int i=0; i<=m; i++)
    {
        for(int j=0; j<=n; j++)
        {
            if(i==0 || j==0)
                L[i][j] = 0;
            else if(X[i-1]==Y[j-1])
                L[i][j] = L[i-1][j-1]+1;
            else
                L[i][j] = max(L[i-1][j],L[i][j-1]);
        }
    }
    return L[m][n];
} 
```

# r - 如何使用命令行参数作为轴标签

> ID：13720743
> 
> 赞同：0
> 
> 时间：2012-12-05T10:11:17.443
> 
> 标签：r, command-line, plot, label

我从命令行以批处理模式使用 R 来创建多个绘图。作为第一个参数，我将输入文件名与数据集一起传递。第二个参数保存将结果绘制到的路径。作为第三个参数，我想传递 y 轴 (ylab) 的标签名称。我的问题来了：下面的代码仅使用 " 和第三个参数中的第一个单词作为 y 轴标签。

```
#! /usr/bin/env Rscript

library("igraph")
library("Rlab") # For xline command

args <- commandArgs(TRUE)

similarities <- scan(args[1])
similarities <- as.numeric(similarities)

# Open up a new pdf file for output given as cmd-line argument 2
pdf(args[2])

plot(similarities, xlab="Depth", type="l", col="red", ylab=args[3])
dev.off() 

q() 
```

使用以下命令调用此脚本：

```
Script.r input.txt plot.pdf "Some y-axis label" 
```

生成如下图所示的绘图

![在此处输入图像描述](../Images/d6bfea94caf3d887b45eac145df4633f.png)

当我将 plot 命令的行更改为：

```
plot(similarities, xlab="Depth", type="l", col="red", ylab="Some y-axis label") 
```

一切都按预期工作。

# delphi - 如何在delphi中获得最大音量？

> ID：13720745
> 
> 赞同：1
> 
> 时间：2012-12-05T10:11:20.003
> 
> 标签：delphi, windows-7, media-player, volume

[我尝试通过http://delphi.about.com/od/adptips2006/qt/mediaplayer_vol.htm](http://delphi.about.com/od/adptips2006/qt/mediaplayer_vol.htm)获取和设置 MediaPlayer 音量

但 1000 不是全音量。如何获得最大音量？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T11:11:40.203

MCI 接口没有指定音量的最大值。

`mciSendCommand`API 函数需要给定参数的一个*因子。*在 MCI 术语中，因子按 1000 缩放：

```
 500 = 0.5 // 50%, half the normal value
1000 = 1.0 // 100%, normal value
2000 = 2.0 // 200%, double the normal value 
```

（该因素的实际含义取决于特定的 API 函数）

在您的情况下，1000 表示 100% 音量，所有较小的值都在设置衰减。当然，MCI 接口后面的实际音频驱动程序也可以接受放大，即值 > 1000。

使用 1000 作为最大值似乎是一个安全的选择。

如果您要创建某种多媒体应用程序，您应该认真考虑更新的界面或库。（我个人对[FMOD](http://www.fmod.org/fmod-downloads.html)和 Delphi 有很好的经验）

# android - 在我的布局中看不到 ListView 下的按钮

> ID：13720746
> 
> 赞同：0
> 
> 时间：2012-12-05T10:11:23.810
> 
> 标签：android, android-layout

这是我的 Activity XML 的布局：

![在此处输入图像描述](../Images/8697a919436ca5c009df85b9e580a485.png)

出于某种原因，我看不到屏幕底部的那个按钮。这是代码：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/app_bg"
    android:orientation="vertical" >    

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@drawable/bg_transparent"
        android:orientation="vertical"
        android:minHeight="44dip"
        android:minWidth="44dip" >

        <TextView
            android:id="@+id/lblNotesCount"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="center_horizontal"
            android:textSize="18sp"
            android:textStyle="bold"
            android:textColor="@color/lblNotesCountColor" />

        <TextView
            android:id="@+id/lblTxtNotes"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="center_horizontal"
            android:textSize="14sp"
            android:textStyle="bold"
            android:textColor="@color/lblNotesCountColor" />
    </LinearLayout>

    <TextView
        android:id="@+id/txtActivityListByCategory_Header"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:ellipsize="end"
        android:gravity="center_vertical|center_horizontal"
        android:paddingLeft="2dp"
        android:singleLine="true"
        android:textStyle="bold"
        android:textColor="@color/color_WHITE" />

    <Button
        android:id="@+id/btnAddNote"
        style="?android:attr/buttonStyleSmall"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@drawable/btn_new_note_selector"
        android:minHeight="44dip"
        android:minWidth="44dip" />
</LinearLayout>

<TextView
    android:id="@+id/emptyList"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:paddingLeft="2dp"
    android:text="@string/txtEmptyList"
    android:textAppearance="?android:attr/textAppearanceMedium"
    android:textColor="@color/emptyList" />

<ListView
    android:id="@+id/lstNotesByCategory"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:drawSelectorOnTop="false" >
</ListView>

<Button
    android:id="@+id/btnaBack"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="@string/btnBack" /> 
```

我试图将底部的 TextView 和 ListView 放在单独的 LinearLayout 中，我试图给那个按钮一个 layout_weight - 没有任何帮助，我仍然没有看到那个按钮，LinearLayout 一直到活动的底部。

这里有什么问题？为什么我没有看到那个按钮？

**编辑：写下整个 XML 代码**

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-05T10:29:24.603

制作您的 ListView`android:layout_height="0dp"`和`android:layout_weight="1"`

像这样：

```
<ListView
    android:id="@+id/lstNotesByCategory"
    android:layout_width="wrap_content"
    android:layout_height="0dp"
    android:layout_weight="1"
    android:drawSelectorOnTop="false" >
</ListView>

<Button
    android:id="@+id/btnaBack"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="@string/btnBack" /> 
```

这将使您的 ListView 垂直扩展直到您的 Button 的边框。

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T10:20:31.313

修复 ListView 的高度

```
<ListView
    android:id="@+id/lstNotesByCategory"
    android:layout_width="wrap_content"
    android:layout_height="height you want to give to list"
    android:drawSelectorOnTop="false" >
</ListView> 
```

或者

```
<ListView
        android:id="@+id/lstNotesByCategory"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:drawSelectorOnTop="false" 
        android:layout_above="@id/btnaBack">
    </ListView> 
```

尝试使用此代码，这将对您有所帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-25T12:21:31.117

1>使用高度为“包装内容”的回收视图，此链接为 [https://gist.github.com/AnderWeb/1eb97efb9963171c42bb](https://gist.github.com/AnderWeb/1eb97efb9963171c42bb)

2> 将按钮放在 RecycleView 下方。

第二种解决方案以相对布局为父布局在相对布局上添加按钮和列表视图按钮应为父底部为真

列表视图应该在您的按钮上方

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T10:48:14.147

试试这个它可以帮助你了解如何使用 Layou_weight

```
<TextView
    android:id="@+id/emptyList"
    android:layout_width="wrap_content"
    android:layout_height="0dp"
    android:layout_weight="2"
    android:paddingLeft="2dp"
    android:text="txtEmptyListsss"
    android:textAppearance="?android:attr/textAppearanceMedium"
    android:textColor="#ffffff" />

<ListView
    android:id="@+id/lstNotesByCategory"
    android:layout_width="wrap_content"
    android:layout_height="0dp"
     android:layout_weight="6"
    android:drawSelectorOnTop="false" >
</ListView>

<Button
    android:id="@+id/btnaBack"
    android:layout_height="0dp"
    android:layout_weight="2"
    android:layout_width="fill_parent"
    android:text="btnBack" />

  </LinearLayout> 
```

# java - MySQL jdbc 驱动程序 ClassNotFoundException: com.mysql.jdbc.Driver

> ID：13720753
> 
> 赞同：0
> 
> 时间：2012-12-05T10:11:46.567
> 
> 标签：java, exception, servlets, jdbc

在谷歌搜索很多并在这里看到类似问题的答案之后，我仍然收到 ClassNotFoundException 的这个错误。

我尝试了[这里](https://stackoverflow.com/questions/2353141/mysql-jdbc-driver-and-eclipse-classnotfoundexception-com-mysql-jdbc-driver)和[这里](https://stackoverflow.com/questions/1585811/classnotfoundexception-com-mysql-jdbc-driver)的方法。

我的 apache tomcat webapps 目录是`C:\Program Files\Apache Software Foundation\Tomcat 6.0\webapps`. 如SO中的一些答案中所述，我还上传了`mysql-connector-java-5.1.22-bin.jar`文件。`C:\Program Files\Java\jre7\lib`

在我的 webapps/jsp 文件夹中，我创建了一个 index.jsp 文件，但它在该行中显示错误`Class.forName("com.mysql.jdbc.Driver").newInstance();`

我当前的文件夹结构是：

```
 C:\
        -> Program Files
            -> Apache Software Foundation 
                ->  Tomcat 6.0
                    -> webapps
                         -> jsp
                             -> index.jsp
                             -> WEB-INF
                                 ->  lib
                                     -> mysql-connector-java-5.1.22-bin.jar 
```

谁能帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T10:19:31.910

将所有库置于这种结构下：

```
 C:\
    -> Program Files
        -> Apache Software Foundation 
            ->  Tomcat 6.0
                -> webapps
                     -> Your web application
                         -> WEB-INF
                             ->  lib
                                 -> mysql-connector-java-5.1.22-bin.jar (and all other required jars) 
```

您应该将所有库包含在该`lib`文件夹中，因为您的 Web 应用程序所需的任何类都可以从那里轻松使用。

这就是[servletworld.com](http://www.servletworld.com/servlet-tutorials/web-application-directory-structure.html)所说
*的“...... /WEB-INF/lib 目录下 JAR 文件中的类和资源包含在类路径中，并且对包含的 Web 应用程序可见。”*

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-05T10:18:02.170

您可以在 Web 应用程序本身中包含 mysql jar 文件。在 C:\Program Files\Apache Software Foundation\Tomcat 6.0\webapps\\WE​​B-INF\lib\mysql-connector-java-5.1.22-bin.jar 中包含 jar

# c# - 在 C# 中搜索集合

> ID：13720754
> 
> 赞同：0
> 
> 时间：2012-12-05T10:11:51.047
> 
> 标签：c#, search

我正在尝试实现一个搜索引擎，想知道在实体集合上执行搜索的最佳方法是什么，而实体是数据对象，并且搜索条件不时发生变化：在字段数中搜索依据，以及在哪些字段中搜索。例如：给定一个 itemEntity 的集合，（itemEntity 是一个包含 id、name、gender、age 等的对象。）我想灵活地搜索：您可以按 name + gender 搜索，也可以按只有 id 等等。

怎么做？ps我正在用c#写

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T10:35:23.057

Scott Gu写了关于动态 linq 表达式的[博客，你可以在那里找到一些有用的东西。](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T12:20:56.207

没关系，感谢您尝试帮助我自己做...

移动所有搜索条件，（在字典中接收它），然后通过切换案例 - 执行 LINQ 选择查询 -> 得到结果。

# c# - 返回每个 INSERT 上受存储过程影响的行以显示在 ASP.NET 页面中

> ID：13720755
> 
> 赞同：5
> 
> 时间：2012-12-05T10:11:52.360
> 
> 标签：c#, asp.net, sql-server, sql-server-2008

我有一个包含 10 个不同 INSERT 的存储过程，是否可以将每个 INSERT 上受影响的行的 COUNT 返回到 ASP.NET c# 页面，以便我可以为查看该 ASP.NET 页面的客户端显示存储过程过程？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T10:47:41.813

您需要在存储过程的开始使用以下命令：

[设置无计数](http://msdn.microsoft.com/en-us/library/ms189837.aspx)

在这种情况下，SQL Server 将在每次 INSERT/UPDATE 后实时向客户端发送文本消息（“X 行受影响”）。因此，您只需在软件中阅读这些消息。

这是[我的回答如何在 Delphi](https://stackoverflow.com/questions/11908741/how-do-i-get-the-result-output-from-an-sql-backup-command-into-a-delphi-program/11931434#11931434)中执行 BACKUP MS SQL 命令。抱歉，我对 C# 的了解不够，但我想你可以在 C# 中通过`SqlCommand`类来做到这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T10:32:41.860

在服务器端，使用`RAISERROR`严重性为 10 的函数向客户端发送消息（严重性高于 10 会导致中断程序执行的异常，即将执行转移到`CATCH`块，如果有的话）。在下面的示例中，我没有添加错误号，因此函数将使用默认的错误号 50000 `RAISERROR`。这是示例：

```
DECLARE @count INT = 0
DECLARE @infoMessage VARCHAR(1000) = ''

-- INSERT

SET @count = @@ROWCOUNT
SET @infoMessage = 'Number of rows affected ' + CAST(@count AS VARCHAR(10))
RAISERROR(@infoMessage, 10, 0) WITH NOWAIT

-- another INSERT

SET @count = @@ROWCOUNT
SET @infoMessage = 'Number of rows affected ' + CAST(@count AS VARCHAR(10))
RAISERROR(@infoMessage, 10, 0) WITH NOWAIT 
```

在客户端，设置适当的事件处理程序，这是一个示例：

```
using (SqlConnection conn = new SqlConnection(...))
{
    conn.FireInfoMessageEventOnUserErrors = true;
    conn.InfoMessage += new SqlInfoMessageEventHandler(conn_InfoMessage);
    using (SqlCommand comm = new SqlCommand("dbo.sp1", conn) 
           { CommandType = CommandType.StoredProcedure })
    {
        conn.Open(); 
        comm.ExecuteNonQuery();
    }
}

static void conn_InfoMessage(object sender, SqlInfoMessageEventArgs e)
{
    // Process received message
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-05T10:22:32.560

每次插入后，使用[@@ROWCOUNT](http://technet.microsoft.com/en-us/library/ms187316.aspx)，然后通过查询获取值。

> 返回受最后一条语句影响的行数。如果行数超过 20 亿，则使用 ROWCOUNT_BIG。

样本：

```
USE AdventureWorks2012;
GO
UPDATE HumanResources.Employee 
SET JobTitle = N'Executive'
WHERE NationalIDNumber = 123456789
IF @@ROWCOUNT = 0
PRINT 'Warning: No rows were updated';
GO 
```

编辑：如何获得`@@rowcount`多个查询？这是一个例子：

```
DECLARE @t int
DECLARE @t2 int
SELECT * from table1
SELECT @t=@@ROWCOUNT
SELECT * from table2
SELECT @t2=@@ROWCOUNT
SELECT @t,@t2' 
```

# ios - iOS Popover 和 tableviewcontroller 刷新问题

> ID：13720757
> 
> 赞同：1
> 
> 时间：2012-12-05T10:11:56.867
> 
> 标签：ios, xcode, ipad, uitableview, uipopovercontroller

我正在编写一个模拟 iPad 主/细节布局的项目。所以我有一个masterView(UITableView)、一个detailView(UICollectionView)、一个全局导航栏和一个TabBar。选项卡栏充满了我需要从中选择的一些类别，并且根据所选的 tabbaritem 填充主视图。

在横向模式下，当同时显示主视图和详细视图时，一切正常。在纵向模式下，我的主视图是隐藏的，我有一个按钮可以打开一个弹出控制器，里面有我的主视图。问题是这个弹出窗口似乎没有显示对 masterview 内容所做的更改

MasterView 是一个 UITableViewController。我已经正确实现了委托和数据源方法。

这是打开/关闭弹出框的代码

```
if(myPopIsVisible)
{
    myPop = [[UIPopoverController alloc]initWithContentViewController:myMasterView];
    [myPop presentPopoverFromBarButtonItem:sender permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];
    myPopIsVisible = YES;
}
else
{
    [myPop dismissPopoverAnimated:YES];
    myPopIsVisible = NO;
} 
```

检查调试它让我了解 myMasterView 的正确内容（行数和内容），但它只显示应用程序加载的第一个。

我正在使用ARC ...

这是 myMasterView 类的实现

```
@implementation myMasterView{
    NSArray *cellTitles;
    NSArray *cellIco;
    NSArray *cellTag;
}

- (void) setData:(NSArray *)titles :(NSArray *)icos :(NSArray *)tags
{
     cellTitles = titles;
     cellIco = icos;
     cellTag = tags;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    //static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellID];

    if(cell == nil){
        cell = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:cellID];
    // Configure the cell...
        cell.textLabel.text = [cellTitles objectAtIndex:indexPath.row];
        cell.tag = [[cellTag objectAtIndex:indexPath.row] integerValue];
    #warning icona non impostata
    //    cell.imageView.image = [cellIco objectAtIndex:indexPath.row];
    }
    return cell;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    // Return the number of rows in the section.
    return [cellTitles count];
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    // Return the number of sections.
    return 1;
}

#pragma mark - Table view delegate
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    if(isPopover)
    {
        isPopover = NO;
        [master dismissPopoverController];
    }

} 
```

# php - CakePHP 2.x 中缺少身份验证会话

> ID：13720758
> 
> 赞同：0
> 
> 时间：2012-12-05T10:12:08.223
> 
> 标签：php, cakephp-2.0

这是我的问题：在一个特定页面上，我只得到空白页，没有任何错误和消息。当我允许这个页面使用 $this->Auth->allow(); 我看到的方法， $this->Auth->user(); 什么都不返回。而且，我仅在此页面上看到此问题。

你能帮助我吗 ？

代码：

```
function beforeFilter() {
    parent::beforeFilter();     

    $this->flatVariables();

    $this->Auth->allow('search','view');
}
function edit() {
    debug($this->Auth->user());
    exit();
} 
```

*PS对不起英语。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T10:19:57.087

检查以下可能性。

1.  检查你是否在控制器中写了 layout = ajax。
2.  检查你是否在控制器中写了 autoRender = false。
3.  检查你是否在调试时退出脚本。
4.  更重要的是，将调试模式设置为 2，以便您通知可能的错误。

# php - 如何存储酒店客房的可用性？PHP5/MySQL

> ID：13720759
> 
> 赞同：0
> 
> 时间：2012-12-05T10:12:25.870
> 
> 标签：php, mysql, database-design, web-applications

我有一个网络表单来设置酒店房间可以在一周中的哪几天预订。

我的疑问：将其存储在我的数据库中的最佳方法是什么？

我想过为一周中的每一天创建 7 个布尔列。

**编辑**：我的表格是后端，是为酒店业主准备的。这听起来可能很奇怪，但他们想设置一周中的哪几天有空房间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T10:16:23.700

我宁愿将预订存储在一个表格中，每个预订一行，列：visitor_id、房间号、开始和结束日期。然后执行查询以查看（每个房间或全部）哪些日期可用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T10:51:58.477

我会研究如下结构。它可能看起来很复杂，但它已经标准化并且很容易扩大规模。

```
Rooms
--------------------------
id
number
type (Suite, Standard, Twin)
floor

Room_Bookings
--------------------------
room_id
reservation_id
type (customer, hotel)
date

Reservations
--------------------------
id
customer_id
total_price
paid (yes/no)
created_by (staff member?)
number_of_nights

Room_Available_Days_Of_Week
--------------------------
room_id
day_id (0 = sunday, 1 = monday etc etc) 
```

*   **房间**- 酒店的每个房间都有一行，类型可以是 Suite、Standard、Twin 等（可以有一个 Room_Types 表并存储一个 ID）
*   **Room_Bookings** - 预订房间的每个日期对应一行，这链接到预订和房间表。`type`可能是客户或酒店。预订房间时的客户。酒店可用于在任何特定日期封锁房间。例如，如果房间正在进行维护工作。
*   **预订**- 每次预订都排成一排，预订是指在酒店住宿，可能会有不同的晚数。
*   **Room_Available_Days_Of_Week** - 此表将满足您根据工作日指定房间可用性的要求。每个房间和可用的工作日排成一行。

例如，入住 3 晚将由 in 中的一排和 in 中的`Reservations`3 行组成`Room_Bookings`。

对于您的可用性程序，如果房间没有被预订`Room_Bookings`并且表格中有一行`Room_Available_Days_Of_Week`与所需的工作日匹配，则该房间将是可用的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T10:16:09.567

为房间准备一张单独的桌子（即每个房间一排），然后是另一个单独的桌子，每个房间/日期排一排。预订房间时插入第二张桌子。要查找是否使用了房间，请从带有左连接的第一个表中选择指定日期的第二个表。如果第二个表中的列为空，则房间是空闲的（即，该房间/日期尚未预订任何内容）。

# javascript - 是否有在 node.js 中实现的 Android IAB（应用内计费）签名验证库？

> ID：13720760
> 
> 赞同：4
> 
> 时间：2012-12-05T10:12:27.960
> 
> 标签：javascript, node.js, in-app-billing

服务器实现了 node.js，所以我想在服务器实例中进行 IAB。但找不到 node.js 的 IAB 库。

那么，只是将 Java 移植到 Javascript 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T07:19:18.703

我基于 express 制作了简单的库，这个库将 php 移植到 javascript。

在下面附上链接

[https://github.com/nothing2lose/node-InAppBilling](https://github.com/nothing2lose/node-InAppBilling)

# c++ - 如何在 Qt 中制作一组图像？

> ID：13720763
> 
> 赞同：0
> 
> 时间：2012-12-05T10:12:33.137
> 
> 标签：c++, arrays, qt

我想在 Qt 中制作一组图像，但不知道如何处理相同的图像。

我想在事件的小部件中从数组中加载图像。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T10:18:40.553

Qt`QImage`使用隐式数据共享，因此您可以将它们传递并在数据结构中使用它们，就像您使用的 example`int`或`QString`.

所以，`QImage`像你做数组一样做`int`数组......

但是，如果您不特别想要*数组*，最常见的解决方案可能最适合您在 Qt 中的情况`QList`（注意：它不是链表，它是可调整大小的数组，非常像`std::vector`）：

```
QList<QImage> myImages; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T11:06:55.500

你可以简单地制作一个 QImages 的 QList。所以我会这样做：

```
 // for simplicity
 typedef QList<QImage> QImageList;

 // allocate the list
 QImageList imageList;

 // create a list where you will put paths of your images
 QStringList paths;

 // then create the list of images     
 for(int i=0;i<paths.size();++i){
      imageList.push_back(QImage(paths.at(i));
 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T10:15:24.777

```
QImage img1("C:\\img1.jpg");
QImage img2("C:\\img2.jpg");
QImage img3("C:\\img3.jpg"); 
```

使用`std::vector`：

```
std::vector<QImage> img_array;
img_array.push_back(img1);
img_array.push_back(img2);
img_array.push_back(img3); 
```

或者`QVector`：

```
QVector<QImage> img_array;
img_array.push_back(img1);
img_array.push_back(img2);
img_array.push_back(img3); 
```

# c++ - fstream读取一些奇怪的数字并导致segfault

> ID：13720765
> 
> 赞同：0
> 
> 时间：2012-12-05T10:12:47.613
> 
> 标签：c++, fstream

我试图让这段代码工作，但它会导致即时段错误，我不知道为什么。Fstream 可以打开文件，但是这三个 while 循环会导致问题 - 如果我评论它们，程序不会抛出段错误。当然数组容量比文件大。当我使用 cout << inputf 时，它显示类似 0x7fff617291a0 的内容，但文件似乎没问题，所以我有点困惑。

```
#include <iostream>
#include <fstream>
#include <cmath>
#include <string>

using namespace std;

int main(){

string plikf = "BH_diagnostics.ah1.pg";
string pliks = "BH_diagnostics.ah2.pg";
string plikt = "BH_diagnostics.ah3.pg";
ifstream inputf("BH1"); ifstream inputs("BH2"); ifstream inputt("BH3");
ofstream output("script.p");;

output << "plot " << '"' << plikf << '"' << "using 1:2, " << '"' << pliks << '"' << "using 1:2, " << '"' << plikt << '"' << "using 1:2 w l \n";
double trash;

if(!inputf) cout << "panick 1 ";
if(!inputs) cout << "panick 2 ";
if(!inputt) cout << "panick 3" ;

double bhf[3000][5];
double bhs[3000][5];
double bht[3000][5];
int i,j,k;
// PROBLEM HERE
while (inputf >> trash >> bhf[i][0] >> bhf[i][1] >> bhf[i][2] >> bhf[i][3] >> trash >> trash >> bhf[i][4] >> trash >> trash >> trash >> trash >> trash >> trash >> trash >> trash  >> trash >> trash >> trash >> trash >> trash >> trash >> trash >> trash >> trash >> trash >> trash >> trash >> trash >> trash >> trash >> trash  >> trash >> trash >> trash >> trash >> trash >> trash >> trash >> trash){i++;cout << bhf[i][0];} 
while (inputs >> trash >> bhs[j][0] >> bhs[j][1] >> bhs[j][2] >> bhs[j][3] >> trash >> trash >> bhs[j][4] >> trash >> trash >> trash >> trash >> trash >> trash >> trash >> trash  >> trash >> trash >> trash >> trash >> trash >> trash >> trash >> trash >> trash >> trash >> trash >> trash >> trash >> trash >> trash >> trash  >> trash >> trash >> trash >> trash >> trash >> trash >> trash >> trash){ j++; cout << bhs[j][0];}
while ( inputt >> trash >> bht[k][0] >> bht[k][1] >> bht[k][2] >> bht[k][3] >> trash >> trash >> bht[k][4] >> trash >> trash >> trash >> trash >> trash >> trash >> trash >> trash  >> trash >> trash >> trash >> trash >> trash >> trash >> trash >> trash >> trash >> trash >> trash >> trash >> trash >> trash >> trash >> trash  >> trash >> trash >> trash >> trash >> trash >> trash >> trash >> trash ){ k++; cout << bht[k][0];}

int l,n;
double dt = bht[k][0]/20;
for (int s=0; s<i; s++) {
if (bhf[s][0] > l) { output << "\n set object " << n << " circle at axis " << bhf[s][1] << ',' << bhf[s][2] << " size first " << bhf[s][4] <<  " fc rgb " << '"' << "navy" << '"' << "\n"; l+=dt; n++;}
}

l=bhs[1][0];

for (int s=0; s<j; s++) {
if (bhs[s][0] > l) { output << "\n set object " << n << " circle at axis " << bhs[s][1] << ',' << bhs[s][2] << " size first " << bhs[s][4] <<  " fc rgb " << '"' << "navy" << '"' << "\n"; l+=dt; n++;}
}

l=bht[1][0];

for (int s=0; s<k; s++) {
if (bht[s][0] > l) { output << "\n set object " << n << " circle at axis " << bht[s][1] << ',' << bht[s][2] << " size first " << bht[s][4] <<  " fc rgb " << '"' << "navy" << '"' << "\n"; l+=dt; n++;}
}

return 0;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T10:21:53.060

我的猜测是，您的循环变量 (i, j, k) 未初始化并且包含随机值。使用这些值访问您的数组会导致您的段错误。

```
int i = 0; 
int j = 0; 
int k = 0; 
```

这应该可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T10:22:01.193

```
int i,j,k; 
```

应初始化为 0 或某个开始条件。它们将以这种方式包含随机值，因此可能会导致循环访问数组时出现边界问题。

```
int i=0,j=0,k=0; 
```

# jquery - 在提交之前更改数据

> ID：13720766
> 
> 赞同：12
> 
> 时间：2012-12-05T10:12:51.140
> 
> 标签：jquery, servlets, ajaxform

我正在使用[此处找到的 ajaxForm 插件](http://www.malsup.com/jquery/form/)

现在我有一个带有**用户名**和**密码的****表单**

 ****我的要求是将**密码**字段的值更改为它的**md5**，因此我使用的是在[此处找到的插件](http://plugins.jquery.com/project/md5)

所以为此我使用的是这样的：

```
$('myForm').ajaxForm({

   url : 'pathtosend',
   type : 'post',
   beforeSubmit : function(arr, $form, options){
      $('#password').val($.md5($('#password').val()));
   },
   success : function(response, statusText, xhr, $form){
      alert('blah blah');
   }
}); 
```

现在，当我在**java servlet 代码**中打印**密码**的值时，它显示的是我传递的那个，而不是我所做的值的 md5。

 **当我将编码更改为单击**提交**按钮并操作提交时，我的问题是当数据更改不会**反映**在**提交中时，** **beforeSubmit的意义是什么**

 ***** * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-05T10:28:20.073

您需要将 beforeSubmit 函数更改为：

```
 beforeSubmit : function(arr, $form, options){
      arr.push({name:'hashed-password', value:$.md5($('#password').val())})
   }, 
```

然后，您可以访问 servlet 中的 hashed-password 变量。

原因是来自文本输入的值已经被 AjaxForm 处理并存储在 arr 数组中。

编辑：如果你不想发送明文密码，你可以使用你原来的方法，但`beforeSubmit : function(arr, $form, options){`改为`beforeSerialize : function() {`**********

# linq - 将 Linq 简单 XML 片段转换为非匿名类型

> ID：13720767
> 
> 赞同：2
> 
> 时间：2012-12-05T10:12:50.643
> 
> 标签：linq, c#-4.0, xml-parsing, anonymous-types

我正在尝试解析这段 XML

```
<?xml version='1.0' encoding='UTF-8' standalone='yes' ?>
 <DagUren>
   <Chauffeur>Vincent</Chauffeur>
   <AanmeldTijd>4 dec. 2012 09:05:42</AanmeldTijd>
   <Gewerkt>04:42</Gewerkt>
 </DagUren> 
```

我创建了一个 DagUren 类，其中包含带有 Chauffer、AanmeldTijd、Gewerkt 等的字符串。

```
 DagUren eenDagUren
            = (from du in doc.Element("DagUren")
               select new DagUren
               {
                   Chauffeur = du.Element("Chauffeur").Value,
                   Gewerkt = du.Element("Gewerkt").Value,
                   Pauze = du.Element("Pauze").Value,
                   AanmeldTijd = du.Element("AanmeldTijd").Value,
               }
         ); 
```

编译器响应：找不到源类型“System.Xml.Linq.XElement”的查询模式的实现。未找到“选择”。

请建议，我花了相当多的时间重写它，每个指南都使用不同的方法......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T10:18:03.917

您的问题是，它`Element()`不返回它的集合，`XElement`只返回一个对象。Linq 只是查询项目的集合，而不是单个对象。所以你的解决方案是：

```
XElement du = doc.Element("DagUren");
DagUren ennDagUren =
    new DagUren
        { 
            Chauffeur = du.Element("Chauffeur").Value,
            Gewerkt = du.Element("Gewerkt").Value,
            Pauze = du.Element("Pauze").Value,
            AanmeldTijd = du.Element("AanmeldTijd").Value
        }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T10:16:14.593

那是因为`Select`是 的扩展`IEnumerable`，但您选择的是单个元素。对 enumerable 进行查询，并`SingleOrDefault`在最后应用：

```
 DagUren eenDagUren
            = (from du in doc.Elements("DagUren")
               select new DagUren
               {
                   Chauffeur = du.Element("Chauffeur").Value,
                   Gewerkt = du.Element("Gewerkt").Value,
                   Pauze = du.Element("Pauze").Value,
                   AanmeldTijd = du.Element("AanmeldTijd").Value,
               }).SinleOrDefault(); 
```

或者简单地说（因此您只有一个要解析的节点，即根节点）。还考虑使用节点转换，而不是读取`Value`属性：

```
 XElement root = doc.Root;
 DagUren eenDagUren = new DagUren() {
               Chauffeur = (string)root.Element("Chauffeur"),
               Gewerkt = (TimeSpan)root.Element("Gewerkt"),
               Pauze = (bool)root.Element("Pauze"), // e.g. 
               AanmeldTijd = (DateTime)root.Element("AanmeldTijd") }); 
```

# wpf - 创建没有界面的 WPF 用户控件

> ID：13720774
> 
> 赞同：0
> 
> 时间：2012-12-05T10:13:10.923
> 
> 标签：wpf, user-controls

我想创建一个用户控件，您可以将其从工具箱拖放到您的 XAML 中，但根本没有界面。我习惯于为计时器和后台工作人员以及此类元素执行此操作。

因此，您允许用户拖入他们的项目，然后通过属性面板设置名称和其他属性，将功能附加到事件面板中的事件，他们可以执行几乎所有设置而无需编写一行代码（有些客户喜欢那）

这甚至可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T13:39:43.057

没有像您可能在 WinForms 等中使用过的“组件”类型类。但是，您可能只从 FrameworkElement 派生。默认情况下，它不进行渲染，因此不会显示任何内容，只要您不设置任何边距、最小宽度等，它也不应该真正影响布局。您可能能够从 UIElement 派生，但使用 FrameworkElement 将意味着您的对象将有权访问 DataContext，因此它的属性可以绑定到它上面的东西。

# google-apps-script - Google Apps 脚本中的日期框日期 i18n

> ID：13720786
> 
> 赞同：1
> 
> 时间：2012-12-05T10:13:42.560
> 
> 标签：google-apps-script

是否可以以不同于英语的格式显示 GAS UI 日期框的日期？

例如，我想以德语格式 dd.mm.yyyy 显示日期。

问候

尤里维恩斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T01:12:06.680

问题跟踪器上有一个[开放的功能请求](http://code.google.com/p/google-apps-script-issues/issues/detail?id=1671)，以将此功能添加到 GAS。请加注星标并关注它！

# android - Android MediaCodec 的程序集容器

> ID：13720790
> 
> 赞同：1
> 
> 时间：2012-12-05T10:13:56.087
> 
> 标签：android, video, media, mime, android-4.2-jelly-bean

有什么与android上的MediaExtractor**相反的吗？**从 MediaCodecs 获取一个或多个流（例如 1 个视频和 1 个音频）并将它们打包成容器格式以进行流式传输或写入文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-19T17:00:47.493

看起来答案是否定的。主要是因为底层 API 是为视频流而不是为视频压缩而设计的。将编码器的输出写入文件，您将获得原始 h264 文件。例如，可以使用 mplayer 或 ffplay 播放。ffmpeg 也可用于将此原始文件混合到某个容器中。但首先你需要为 android 构建 ffmpeg。

# express - 将 Ember 与 Express JS 集成

> ID：13720791
> 
> 赞同：3
> 
> 时间：2012-12-05T10:13:56.680
> 
> 标签：express, ember.js

我的目标是使用 Express.Js 引擎和 ember.js 为 MVC 结构构建一个项目。

我想知道是否有人有任何提示或资源链接可以帮助我设置文件结构以及如何将路由与 MVC 集成。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-07T07:18:33.547

我们正在使用由 riak 支持的 ember/express/node，在我们的解决方案中，ember.js 应用程序将与 express REST 服务器通信。我们正在使用这个：[https ://github.com/nathanaschbacher/chinood](https://github.com/nathanaschbacher/chinood)

基本上，ember 应用程序下载一次并完全在客户端的浏览器中运行，并在需要时（从您的快速应用程序）发出 api 数据请求。您可以在此处了解 ember 数据的工作原理： [https ://github.com/emberjs/data](https://github.com/emberjs/data)

根据您使用的数据存储，您很可能需要在 express 应用程序和 ember 应用程序中都有一些模型表示。Ember 以关系方式呈现模型，因此根据您实际存储数据的方式，在 express 应用程序中构建的模型可能会有所不同。

此外，我们使用铱来保持我们的文件分开并组织项目。这是一个链接： [https ://github.com/radiumsoftware/iridium/](https://github.com/radiumsoftware/iridium/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T07:31:36.180

您还可以查看 Charles Jolley 的[`convoy`](https://github.com/charlesjolley/convoy)，它与 Node 的集成非常好（比 Iridium 更好，允许您在服务器端和客户端之间轻松共享代码 [模型，...]）。

*（抱歉耽搁了，但我想我终于带着好消息回来了:-)*

# asp-classic - 在电子邮件中格式化经典 ASP

> ID：13720800
> 
> 赞同：1
> 
> 时间：2012-12-05T10:14:28.243
> 
> 标签：asp-classic

谁能告诉我如何将以下 ASP 行格式化为带有粗体的电子邮件

```
email_body = email_body & "Full Name: " & fullname & vbcrlf & vbcrlf 
```

我也试过：

```
email_body = email_body & "<b>Full Name:</b> " & fullname & vbcrlf & vbcrlf 
```

但它没有用，只是显示标签

电子邮件仅显示粗体标签

抱歉，我想要的格式是
**全名：** John Smith
而 ASP 代码是：

`email_body = email_body & "Full Name: " & fullname & vbcrlf & vbcrlf <br />` 我尝试在全名周围添加粗体标签，但它没有格式化它只是显示实际标签

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T12:56:54.923

为了在电子邮件中使用粗体或其他文本格式，您必须确保电子邮件以 HTML 而不是纯文本形式发送。在您的情况下，它似乎以纯文本形式发送。以下是使用常见邮件组件的方法（从相应文档中复制的一些代码）：

**首席数字官**

```
objMessage.HTMLBody = "<h1>This is some sample message html.</h1>" 
```

（属性是 HTMLBody，而不仅仅是 Body）。资料来源： http: [//www.paulsadowski.com/wsh/cdo.htm](http://www.paulsadowski.com/wsh/cdo.htm)

**ASPE邮箱**

添加：

```
Mail.IsHTML = True 
```

来源：[http ://www.aspemail.com/manual_02.html](http://www.aspemail.com/manual_02.html)

**邮件**

添加：

```
JMail.ContentType = "text/html" 
```

来源：[http ://www.aspwebpro.com/aspscripts/email/jmail.asp](http://www.aspwebpro.com/aspscripts/email/jmail.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T21:07:19.100

```
Set Mail = Server.CreateObject("CDONTS.NewMail")
Mail.from = "me@me.com"  
Mail.to =  "me@me.com"
Mail.subject = "To Me"
sBody = "<h1>blah blah</h1>"
Mail.bodyFormat = CdoBodyFormatHTML
Mail.body = sBody
Mail.send 
```

# unit-testing - Builder 设计模式是否违反了单一职责原则？

> ID：13720801
> 
> 赞同：3
> 
> 时间：2012-12-05T10:14:31.813
> 
> 标签：unit-testing, design-patterns, builder, single-responsibility-principle

让我向您展示我在每个博客中看到的构建器设计模式实现：

```
interface IProductBuilder
{
    void BuildPart1(Part1 value);
    void BuildPart2(Part2 value);
    void BuildPart3(Part3 value);
}

class ConcreteProduct
{
    public readonly Part1 Part1;
    public readonly Part2 Part2;
    public readonly Part3 Part3;

    public ConcreteProduct(Part1 part1, Part2 part2, Part3 part3)
    {
        Part1 = part1;
        Part2 = part2;
        Part3 = part3;
    }
}

class ConcreteProductBuilder : IProductBuilder
{
    Part1 _part1;
    Part2 _part2;
    Part3 _part3;

    public void BuildPart1(Part1 value)
    {
        _part1 = value;
    }

    public void BuildPart2(Part2 value)
    {
        _part2 = value;
    }

    public void BuildPart3(Part3 value)
    {
        _part3 = value;
    }

    public ConcreteProduct GetResult()
    {
        return new ConcreteProduct(part1, part2, part3);
    }
} 
```

单元测试构建器的常用方法是这样的：

```
[TestMethod]
void TestBuilder()
{
    var target = new ConcreteBuilder();

    var part1 = new Part1();
    var part2 = new Part2();
    var part3 = new Part3();

    target.BuildPart1(part1);
    target.BuildPart2(part2);
    target.BuildPart3(part3);

    ConcreteProduct product = target.GetResult();

    Assert.IsNotNull(product);
    Assert.AreEqual(product.Part1, part1);
    Assert.AreEqual(product.Part2, part2);
    Assert.AreEqual(product.Part3, part3);
} 
```

所以，这是一个非常简单的例子。

我认为建造者模式是一件非常好的事情。它使您能够将所有可变数据放在一个地方，并使所有其他类不可变，这对于可测试性来说很酷。

但是如果我不想将 Product 的字段暴露给某人（或者我不能这样做，因为 Product 是某个库的一部分）。

我应该如何对我的构建器进行单元测试？

现在会是这个样子吗？

```
[TestMethod]
void TestBuilder()
{
    var target = new ConcreteProductBuilder();

    var part1 = new Part1();
    var part2 = new Part2();
    var part3 = new Part3();

    target.BuildPart1(part1);
    target.BuildPart2(part2);
    target.BuildPart3(part3);

    ConcreteProduct product = target.GetResult();

    TestConcreteProductBehaviorInUseCase1(product);
    TestConcreteProductBehaviorInUseCase2(product);
    ...
    TestConcreteProductBehaviorInUseCaseN(product);
} 
```

在这里，我看到至少一个简单的解决方案-修改`ConcreteProductBuilder.GetResult`为工厂：

```
public ConcreteProduct GetResult(IConcreteProductFactory factory)
{
    return factory.Create(part1, part2, part3);
} 
```

并`IConcreteProductFactory`以两种方式实施：

```
public MockConcreteProductFactory
{
    public Part1 Part1;
    public Part2 Part2;
    public Part3 Part3;
    public ConcreteProduct Product;
    public int Calls;

    public ConcreteProduct Create(Part1 part1, Part2 part2, Part3 part3)
    {
        Calls++;

        Part1 = part1;
        Part2 = part2;
        Part3 = part3;

        Product = new ConcreteProduct(part1, part2, part3);
        return Product;
    }
}

public ConcreteProductFactory
{
    public ConcreteProduct Create(Part1 part1, Part2 part2, Part3 part3)
    {
        return new ConcreteProduct(part1, part2, part3);
    }
} 
```

在这种情况下，测试将像以前一样简单：

```
[TestMethod]
void TestBuilder()
{
    var target = new ConcreteBuilder();

    var part1 = new Part1();
    var part2 = new Part2();
    var part3 = new Part3();

    target.BuildPart1(part1);
    target.BuildPart2(part2);
    target.BuildPart3(part3);

    var factory = new MockConcreteProductFactory();

    ConcreteProduct product = target.GetResult(factory);

    Assert.AreEqual(1, factory.Calls);
    Assert.AreSame(factory.Product, product);
    Assert.AreEqual(factory.Part1, part1);
    Assert.AreEqual(factory.Part2, part2);
    Assert.AreEqual(factory.Part3, part3);
} 
```

所以我的问题不是关于如何以更好的方式解决它，而是关于 Builder 模式本身。

Builder 设计模式是否违反了单一职责原则？

对我来说，通用定义中的 builder 负责：

1.  收集构造函数参数（或构建器模式的其他实现中的属性值）
2.  使用收集的属性构造对象

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T14:21:18.613

我不认为它违反了单一职责原则（SRP）。考虑 wiki 中提到的 SRP 示例：

*Martin 将责任定义为改变的理由，并得出结论认为一个类或模块应该有一个，而且只有一个改变的理由。例如，考虑一个编译和打印报告的模块。可以出于两个原因更改这样的模块。首先，报告的内容可以改变。其次，报告的格式可以改变。这两件事因非常不同的原因而改变；一种实质性的，一种化妆品的。*

但是对于您提到的情况，如果一个改变另一个也必须改变，即如果有一个额外的参数，那么应该用这个额外的参数构造对象。所以它本质上是 2 个子任务的 1 个责任。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-07T02:01:04.990

我们在这里处理两个概念：

*   [单一职责原则](http://en.wikipedia.org/wiki/Single_responsibility_principle)
*   [建造者设计模式](http://en.wikipedia.org/wiki/Builder_pattern)

**建造者模式是否尊重单一职责原则？** 是的。

你可能认为建造者有两个责任：

*   收集属性
*   根据收集的属性创建产品

实际上，只有一项职责就是根据收集到的属性创建产品。你看，负责收集属性的类是 Director 类（参见[Wikipedia 链接](http://en.wikipedia.org/wiki/Single_responsibility_principle)）。Builder 仅以*被动*方式*接收*属性。这真的不是它的责任。收到属性后，它会构建对象。

 ***那么单元测试呢？**

好吧，从技术上讲，当您不想在模式中公开字段时，这是有原因的，它是您核心设计的一部分。因此，容纳单元测试人员并不是“设计”的工作。适应“设计”是单元测试人员的工作。

您可以通过反射来实现这一点（好吧，那是作弊），或者购买创建一个模型构建器来继承您要测试的 Concrete Builder。这个模型构建器将存储它组装的部分，并使单元测试人员可以访问它们。*

# jquery - 在ajax中访问rails实例变量并循环它

> ID：13720809
> 
> 赞同：0
> 
> 时间：2012-12-05T10:14:52.687
> 
> 标签：jquery, ruby-on-rails-3.1, fullcalendar

我正在构建一个任务管理系统并在其中实现了 fullcalendar.js。我需要获取待处理任务并更改这些待处理任务的颜色。我在 rails 控制器中获取待处理任务详细信息的实例变量。但是在 ajax 请求中我无法循环它。

请在下面找到我的代码。

```
 $('.task_name').live('click', function () {
    alert(this.id);
    $.ajax({
        url: 'pending_task_details',
        data: {
            task_id: this.id
        },
        success: function (data, response, event, date) { <%
            for date_cell in @pending_tasks.start_date..@pending_tasks.end_date %> getCellFromDate(date_cell, calInstance); <% end %>
        }
    });
}); 
```

以上是我需要实现的逻辑。但我没有在视图中看到@pending_tasks.start_date。

在控制台中，我正在获取任务详细信息

# 

在任务控制器中，我将待处理的任务作为。

```
 def pending_task_details
    @pending_tasks = Task.find_by_id(params[:task_id])
    p "The pending tasks are......",@pending_tasks.inspect
#(Date.parse(@pending_tasks.start_date.to_s)..Date.parse(@pending_tasks.end_date.to_s)).each { |date| render :json=>[date.strftime('%a %d %b %Y')] and return}
    render :nothing=>true 
  end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T09:47:55.323

我认为错误是因为您使用的是 AJAX，因此您的 javascript 文件仅生成一次（您的 ruby​​ 代码仅在第一次请求完整页面时执行）。

尝试下载此示例（这是工作示例！）并检查它是如何完成的：

[https://github.com/bokmann/rails3_fullcalendar](https://github.com/bokmann/rails3_fullcalendar)

基本上你可以，而不是这样：

```
$.ajax(...)
...for date_cell in @pending_tasks.start_date..@pending_tasks.end_date 
```

拥有这个：

```
$.read(
  '/tasks/54',
  function (response) {
    // do something with task here
  }
);
// => [GET] /tasks/54 
```

查看 bokmann 在他的 rails3-fullcalendar 示例中使用的[这个jQuery REST 插件。](http://lyconic.com/blog/2010/08/03/dry-up-your-ajax-code-with-the-jquery-rest-plugin)

# doctrine-orm - 防止延迟加载给了我1个“子实体”

> ID：13720813
> 
> 赞同：0
> 
> 时间：2012-12-05T10:15:02.970
> 
> 标签：doctrine-orm, lazy-loading, symfony-2.1

我对 Doctrine (Symfony2.1) 有疑问。我想通过加入获取子实体（OneToMany 关系）来防止延迟加载，但这些子实体只有一个结果。

例如：

```
public function getSingleProjectQuery($project){
    $query = $this->createQueryBuilder('p')
            ->select(array("p", "fb"))
            ->where('p.id = :project_id')->setParameter('project_id', $project)
            ->leftJoin('p.feedbacks', 'fb')
            ->groupBy('p.id')
            ->getQuery();
    return $query;
} 
```

在这个例子中，Doctrine 向我返回了“项目”对象和一个单一的“反馈”对象（但有不止一个反馈......）。当我将选择替换为：`->select(array("p"))` 我得到了所有的“反馈”对象，但随后有延迟加载（许多查询）。

见[http://docs.doctrine-project.org/en/latest/reference/dql-doctrine-query-language.html#joins](http://docs.doctrine-project.org/en/latest/reference/dql-doctrine-query-language.html#joins)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T00:43:06.810

您应该删除该`groupBy`子句。

# javascript - 将 div 捕获为图像

> ID：13720815
> 
> 赞同：2
> 
> 时间：2012-12-05T10:15:11.767
> 
> 标签：javascript, html, image-capture

我有一些包含由 JavaScript 呈现的图表的 div 标签。我想通过按下按钮以图像格式导出它们。我不知道是否可以使用 JavaScript 将 div 标签捕获为图像！所以我在这里寻求提示和提示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T10:23:43.703

您可以使用画布元素创建图像。如果您的图表使用 HTML 元素呈现，您需要[将该 HTML 绘制到画布上](https://developer.mozilla.org/en-US/docs/HTML/Canvas/Drawing_DOM_objects_into_a_canvas)。然后可以在画布上使用 toDataURL 来获取 B64 编码的图像数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T10:18:33.207

仅使用 JavaScript 是不可能的。

JavaScript 无法在 PC 上保存文件，也无法将 DOM 转换为图像格式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T10:18:40.497

这里有一个讨论：[html5：将画布复制到图像并返回](https://stackoverflow.com/questions/7242006/html5-copy-a-canvas-to-image-and-back) 还有一个项目[http://www.nihilogic.dk/labs/canvas2image/](http://www.nihilogic.dk/labs/canvas2image/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T10:20:54.550

你可以试试phantomjs，[http](http://phantomjs.org/) ://phantomjs.org/，虽然我个人没有用过，但它被广泛用于屏幕截图

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-05T10:24:31.540

1.  JS无法访问显示以防他无法解析HTML
2.  您可以调用一些实用程序来制作区域的屏幕截图。但它使用起来并不安全，因此如果您授予访问权限，它将起作用。
3.  这个问题已经[在这里](https://stackoverflow.com/questions/8025806/user-capture-div-as-image-and-save-to-computer)问过了。可能它有一些你需要的好东西

# asp.net-mvc - 仅在单击提交按钮时显示数据？

> ID：13720816
> 
> 赞同：0
> 
> 时间：2012-12-05T10:15:11.120
> 
> 标签：asp.net-mvc

我是 MVC 的新手。当我执行 mvc 搜索时，数据会自动显示。当我进入搜索框时，相应的行就会显示出来。但是我怎样才能编写代码，这样当我执行它时，它应该只有搜索按钮，什么时候点击它应该会出现数据。如何？

```
public ActionResult Search(int? myid)
{             
    var s = from sp in db.Vedios
            select sp;

    if (myid.HasValue)        
    {
        s = s.Where(st=>st.id==myid);
    }

    return View(s.ToList());
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T10:47:46.017

我认为您应该检查返回数据的查询。如果未指定搜索参数，您的查询似乎会返回所有数据。另外，我建议您检查控制器的 get 方法，删除从 get 方法获取数据的代码并将其放入 post。

如果您在此处发布查询，将会很有帮助。

公共动作结果搜索（int？myid）{

```
 var s = new List<Vedio>();
    if (myid.HasValue)

    {
        s = db.Vedios.Where(st=>st.id==myid);
    }

    return View(s.ToList()); 
```

}

# command-line - 在 tcsh 中设置命令行快捷方式以逐字移动光标

> ID：13720821
> 
> 赞同：0
> 
> 时间：2012-12-05T10:15:32.893
> 
> 标签：command-line, cursor, move, shortcut, tcsh

从[How to move cursor by word in command line of tcsh](https://stackoverflow.com/questions/13089573/how-to-move-the-cursor-by-word-in-command-line-of-tcsh)我知道如何在 tcsh 中逐字移动光标，但它们不容易使用，所以我可以在命令行上设置快捷方式，例如，当我使用 Ctrl+leftarrow 时，它实际上作为 Esc f 工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T10:48:09.330

要查看预定义的键绑定列表，请访问：

[http://www.csc.fi/english/pages/data-services/linux_basics/tcsh](http://www.csc.fi/english/pages/data-services/linux_basics/tcsh)

要查看可用于配置键绑定的所有命令的列表，请访问：

[http://www.rohidekar.com/sridharsarnobat/mediawiki/index.php?title=TCSH_Key_bindings](http://www.rohidekar.com/sridharsarnobat/mediawiki/index.php?title=TCSH_Key_bindings)

示例：（将其写入您的 ~/.tcshrc）

```
bindkey '^[^[[C' forward-word
bindkey '^[^[[D' backward-word 
```

这会将 alt-right 与 forward-word 和 alt-left 与 backword-word 绑定。

要映射到不同的键集，只需运行`cat`并按 Enter。点击组合键（在上面的例子中，右箭头和左箭头），记录回显的字符串，并使用这些组合键来绑定。

# html - MSXSL 错误，几乎没有任何输出

> ID：13720827
> 
> 赞同：0
> 
> 时间：2012-12-05T10:15:36.867
> 
> 标签：html, xml, xslt, xhtml, msxsl

我正在尝试通过 XSL 将一些 HTML 文件转换为我自己的 XML 格式。

为此，**我使用 HTML Tidy 清理输入文件**，然后**使用 html2xhtml 将它们转换为 xhtml，**然后**使用带有 msxsl 的 xsl 脚本**将 xhtml 文件转换为我自己的格式。

但是，最后一步失败了，根本没有错误消息（这是语义上的失败；不是技术上的;-)）：**我的输出文件只包含空标签**。

我之前遇到过这样的问题，并从 html 标记中删除了 xmlns 属性，这导致几乎所有在线转换器都能正确处理我的文件。MSXSL 现在写入以下错误消息：“不支持在 DTD 中使用默认命名空间声明属性”。

在这里找到我使用的文件：http: [//pastie.org/5483087](http://pastie.org/5483087)

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T10:22:53.207

这就是 XSLT 和 XPath 1.0 的常见问题解答，输入 XHTML 文档中的元素位于名称空间中，而 XSLT 没有考虑到这一点。您需要将其更改为例如

```
<xsl:stylesheet version="1.0"
xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
xmlns:xhtml="http://www.w3.org/1999/xhtml"
exclude-result-prefixes="xhtml">
<xsl:template match="/">

  <stellenausschreibung>
    <hochschule><xsl:value-of select="//xhtml:div[@id='contentText']/xhtml:img/@alt" /></hochschule>
    <anbieter><xsl:value-of select="//xhtml:p[@id='ad_employer']" /></anbieter>
    <typ><xsl:value-of select="//xhtml:h1" /></typ>
    <bewerbungsschluss><xsl:value-of select="//xhtml:span[@id='ad_bewerbungsschluss']" /></bewerbungsschluss>
    <erscheinungsdatum><xsl:value-of select="//xhtml:span[@class='job_published_at']" /></erscheinungsdatum>

    <inhalt><xsl:value-of select="//xhtml:p[@id='ad_job']" /></inhalt>
  </stellenausschreibung>

</xsl:template>
</xsl:stylesheet> 
```

样式表中使用的 XHTML 命名空间的前缀（在我的示例中`xhtml`）当然可以自由选择，但必须使用一个前缀，就像 XSLT/XPath 1.0 一样，例如`//p`总是选择`p`没有命名空间中的元素的路径。

# php - 使用 curl 检索安全页面

> ID：13720828
> 
> 赞同：0
> 
> 时间：2012-12-05T10:15:38.910
> 
> 标签：php

我从谷歌刮了几页..其中一页返回给我：

```
 File : C:\xampp\htdocs\PPC-Advert-System\Scrapper\ScrapperDBCRUD.php

Line: 29

SSL certificate problem, verify that the CA cert is OK. Details:\nerror:14090086:SSL routines:SSL3_GET_SERVER_CERTIFICATE:certificate verify failed 
```

这是我的卷曲代码：

```
 private  function getPage($proxy, $url, $referer, $agent, $header, $timeout) {
        $ch = curl_init();
        curl_setopt($ch, CURLOPT_URL, $url);
        //curl_setopt($ch, CURLOPT_HEADER, $header);
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
        curl_setopt($ch, CURLOPT_PROXY, $proxy);
        curl_setopt($ch, CURLOPT_HTTPPROXYTUNNEL, 1);
        curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, $timeout);
         // curl_setopt($ch, CURLOPT_REFERER, $referer);
        //  curl_setopt($ch, CURLOPT_USERAGENT, $agent);
        $result['EXE'] = curl_exec($ch);
        $result['INF'] = curl_getinfo($ch);
        $result['ERR'] = curl_error($ch);
        if(curl_exec($ch) === false)
        {
            $result['ERR']=curl_error($ch);
        }
        curl_close($ch);
        return $result;
 } 
```

我不知道要向 curl 添加什么内容，因此它以某种方式验证了我要抓取的页面。而且，我不知道它是否会影响我抓取的普通页面的抓取..解决这个问题的最佳方法是什么？！？

我有时也会收到此错误：

```
error:140770FC:SSL routines:SSL23_GET_SERVER_HELLO:unknown protocol 
```

这两个错误是否相关？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T10:19:59.787

如果不需要验证 ssl 连接，您可以添加

```
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false) 
```

# javascript - 一个 REST api 支持的 JavaScript 表

> ID：13720833
> 
> 赞同：3
> 
> 时间：2012-12-05T10:16:04.380
> 
> 标签：javascript, jquery, json, rest

这是问题所在：

我需要一张可以快速“插入”到我的 web 应用程序的表格。

我有现有的 REST 端点，用于以 JSON 格式获取表数据，无论是否有分页。现在，如果我只能找到一个 JS 表格组件，我将配置它以使用我的端点（我可以修改它们以满足表格要求）。

其他：如果表格需要 jQuery，我觉得很好，使用 Twitter Bootstrap CSS 是可选的，非常受欢迎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T11:08:11.657

正如 Toni 在他的评论中所说，[jqGrid](http://trirand.com/blog/jqgrid/jqgrid.html)可能是您获得快速结果的最佳选择，并且它具有广泛的样式选项。请注意，它生成的 HTML 非常冗长。如果您正在部署到移动设备上，那么只需要输出您自己的 HTML 表格可能是有意义的。如果您已经在使用 jQuery，这非常简单。

# iphone - NSURLConnection sendAsynchronousRequest NSData 无法访问外部块

> ID：13720834
> 
> 赞同：-1
> 
> 时间：2012-12-05T10:16:04.880
> 
> 标签：iphone, nsurlconnection

在这里，我正在尝试从 mywebpage 获取 html，bt somethng 是错误的..这​​是我的代码..我已经在我的 controller.h 文件中声明了 html 字符串。

```
 [NSURLConnection sendAsynchronousRequest:urlRequest queue:queue completionHandler:^(NSURLResponse *responde,NSData *Data,NSError *error){

            html=[[NSString alloc] initWithData:Data encoding:NSUTF8StringEncoding];
            //NSLog(@"%@",html);  //WORKING

        }];

  NSLog(@"%@",html); //NOT WORKING 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T11:03:16.370

`__block NSString *html`在块外使用。

**编辑：**

```
 __block NSString *html;   //please notice __block is with two underscores.

  [NSURLConnection sendAsynchronousRequest:urlRequest queue:queue completionHandler:^(NSURLResponse *responde,NSData *Data,NSError *error){

        html=[[NSString alloc] initWithData:Data encoding:NSUTF8StringEncoding];
        //NSLog(@"%@",html);  

    }];

NSLog(@"%@",html); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T10:19:24.070

是的，它应该只能在完成块内访问，因为回调只有在从 Web 服务接收到数据后才会获取“html”数据。您无法在块外访问它。

# c# - Azure 服务总线：忽略我发送的消息

> ID：13720835
> 
> 赞同：1
> 
> 时间：2012-12-05T10:16:09.587
> 
> 标签：c#, .net, azure, azureservicebus

我在通过 Azure 服务总线通信的各种机器上安装了一系列软件代理。每个代理可能既是发布者又是订阅者。

Azure 服务总线中是否有任何内置机制让发件人不接收从总线返回的消息（例如某种“回声消除”）？

示例：如果 A、B 和 C 是代理，我想要实现的是 A 发送的消息传递给 B 和 C，而不回环到 A。

我想我可以使用过滤器，但我想知道服务中是否有更简单的内置功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T10:25:50.683

除了发布者名称（对于您的所有代理可能相同），服务总线无法知道发布者和订阅者之间存在关系（即：它们是同一个代理）。

这就是为什么我认为过滤器是实现你想要做的最简单的方法。过滤器已经非常简单/易于使用，不是吗？

# android - Android中的RTSP流式传输

> ID：13720838
> 
> 赞同：0
> 
> 时间：2012-12-05T10:16:11.273
> 
> 标签：android, rtsp, live-streaming

这是我的代码，当我运行该应用程序时，它会显示“抱歉此视频无法播放”。

```
public class rtspActivity extends Activity {

    Button btn;
    VideoView v;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_rtsp);
        v=(VideoView)findViewById(R.id.vv);

        v.setVideoURI(Uri.parse("rtsp://server.intelcast.tv:554/live/haditvfour1"));

    }

 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T10:29:27.520

你应该从

```
v.setMediaController(new MediaController(this));
v.requestFocus();
v.start(); 
```

此外，您使用的网址可能不好。在 VLC 或类似软件中尝试，看看它是否真的存在

另一个问题可能是“server.intelcast.tv:554”部分，尝试用带数字的真实 IP 地址替换它，我自己也遇到过这个问题

# dojo - XPages 中的 djConfig 转义值导致设置错误

> ID：13720849
> 
> 赞同：0
> 
> 时间：2012-12-05T10:16:48.350
> 
> 标签：dojo, xpages, lotus-domino

我需要在 Domino 8.5.3FP1 服务器上的 djConfig 上设置 extraLocale。

（包资源管理器）

这通常是这样完成的：

```
xsp.client.script.dojo.djConfig=extraLocale: ['sv-se'] 
```

但 Domino 会将我的字符串转义为：

```
extraLocale: [\'sv-se\'] 
```

如果我这样做没关系：

```
xsp.client.script.dojo.djConfig=extraLocale: ["sv-se"] 
```

结果相同。

任何想法表示赞赏！

/J

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T12:32:11.303

这是针对这个问题的一个邪恶黑客（在 IE 8 & 9 & FF 15,16,17 中测试）：

1.  将您的*extraLocale*更改为 javascript 变量
2.  *在beforePageLoad*事件中的其他所有内容之前添加一个 javascript 块

    ```
    <?xml version="1.0" encoding="UTF-8"?>
    <xp:view xmlns:xp="http://www.ibm.com/xsp/core">
        <xp:this.properties>
            <xp:parameter name="xsp.client.script.dojo.djConfig" value="extraLocale: exLocale" />
        </xp:this.properties>

        <xp:this.beforePageLoad>
        <![CDATA[#{javascript:
            var exCon = facesContext.getExternalContext();
            var response = exCon.getResponse();
            var writer = response.getWriter();
            writer.write("<script>\n");
            writer.write("var exLocale=['sv-se','de-de']\n");
            writer.write("</script>\n");
            }]]>
        </xp:this.beforePageLoad>

        <xp:scriptBlock id="scriptBlock1"
            value="dojo.addOnLoad( function(){ alert( dojo.config.extraLocale ) } );">
        </xp:scriptBlock>
    </xp:view> 
    ```

在此示例中，我将参数直接添加到 XPage 并添加了两个额外的语言环境。希望这有助于和/或启发更清洁的解决方案:-)

PS 问题是额外的*djConfig*参数会在内部解析，斜杠会自动转义。

# c# - 通过 IIS 7.5 上的代理调用 WCF 时的身份验证问题

> ID：13720851
> 
> 赞同：2
> 
> 时间：2012-12-05T10:16:54.173
> 
> 标签：c#, wcf, proxy, iis-6, iis-7.5

我正在使用 .Net 3.5 编写网络服务。

我的 Web 服务使用外部 WCF，要访问它，我必须通过需要身份验证的代理服务器。为此，我使用以下代码：

```
WebProxy wproxy = new WebProxy(ProxyServer, Port);
wproxy.Credentials = new NetworkCredential(ProxyUser, ProxyPassword, Domain);
WebRequest.DefaultWebProxy = wproxy; 
```

我需要运行我的网络服务的服务器是 IIS 7.5 网络服务器（Windows Server 2008 R2 标准），当我在那里运行它时，我收到以下消息（这是来自外部 WCF 的响应）：

> **远程服务器返回意外响应：(407) authentication required**

为了进行测试，我还尝试在使用 IIS 6（Windows Server 2003 R2 标准）的旧服务器上运行它，并且在该服务器上运行良好。

所以有人知道这里发生了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T14:51:34.470

我设法通过在 IIS 服务器上安装 .NET 4 解决了这个问题，IIS 6 的服务器已经安装了 .NET 4。

我仍然不知道为什么会发生这种情况，因为我的程序使用的是 .NET 3.5。可能是 .NET 4 修复了 .NET 基础文件中的某些内容或更改了一些默认行为。

# android - 已发送消息与内容提供者的类型列冲突

> ID：13720853
> 
> 赞同：0
> 
> 时间：2012-12-05T10:17:04.627
> 
> 标签：android, sms, android-contentprovider

我正在使用 android 发送消息，`SmsManager.sendTextMessage(..)` 但是在阅读 SMS 内容提供程序列时，我得到的类型列值 1 应该是 2 用于发送消息，甚至在设备默认消息传递应用程序上，我发送的消息显示为已接收。

我用来发送消息的代码是

```
public static final String SMS_URI = "content://sms";
SmsManager sms = SmsManager.getDefault();
sms.sendTextMessage(address.get(i), null, messagetosend, null, null);
ContentResolver contentResolver = getContentResolver();

ContentValues values = new ContentValues();
values.put(ADDRESS, address.get(i));
values.put(BODY, messagetosend);
contentResolver.insert(Uri.parse(SMS_URI), values); 
```

我正在使用这段代码在 Logcat 上打印值：

```
Uri allMessages = Uri.parse("content://sms/");
//Cursor cursor = managedQuery(allMessages, null, null, null, null); Both are same
Cursor cursor = this.getContentResolver().query(allMessages, null, null, null, null);

while (cursor.moveToNext()) {
    for (int i = 0; i < cursor.getColumnCount(); i++) {
        Log.d(cursor.getColumnName(i) + "", cursor.getString(i) + "");
    }
    Log.d("One row finished", "**************************************************");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T10:25:27.580

尝试改变

```
public static final String SMS_URI = "content://sms"; 
```

至

```
public static final String SMS_URI = "content://sms/sent"; 
```

你也可以添加

```
values.put("type", 2); 
```

# css - 我在 ListBox 上的自定义样式不适用？是 IE 7.0 的浏览器问题吗

> ID：13720855
> 
> 赞同：0
> 
> 时间：2012-12-05T10:17:14.957
> 
> 标签：css, gwt, uibinder, gwt-platform

我一直在尝试对我的 ListBoxes 应用一些自定义样式，但样式未应用以下是 CSS

```
.gwt-ListBox{
 background: #fff;
 border: 1px solid #96CAEA;
} 
```

我在 IE 中检查了我的代码，我所理解的不是实体，而是从 Standard.css 中挑选插图，我还尝试使用新的 css 类，例如

```
.listBox{
 background: #fff;
 border: 1px solid #96CAEA;
} 
```

这也给出了相同的结果，我的方法出了什么问题，谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T10:57:21.527

GWT 有[主题](https://developers.google.com/web-toolkit/doc/latest/tutorial/style)的概念。

如果您继承了主题，它将覆盖您的样式。使用 firebug 查找计算样式、下载的样式表和应用的样式。一旦您看到萤火虫信息，就很容易修复它。

![在此处输入图像描述](../Images/18601ed5faba68b88f315519aacb6d3a.png)

如果您需要进行大量自定义，那么在 GWT中使用**干净**的主题会更容易。

如果您使用的是**标准**主题并坚持使用它。您需要在 .listbox 样式名中使用 !important 标签

```
.listBox{
 background: #fff;
 border: 1px solid #96CAEA !important;
} 
```

!important 的使用被认为有点不整洁或 hackey 方法:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T13:13:00.093

Try using the following to solve your border issue

```
border: 1px solid #96CAEA !important; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T12:11:53.220

您可以设置 UIOBject 的属性来清除 ListBox **Primary CSS 主题**，并根据需要添加自己的主题。

例如

```
ListBox list = new ListBox();
list.setStylePrimaryName("listBox"); 
```

**属性 JavaDOC**

```
"Sets the element's primary style name and updates all dependent style names." 
```

注意：你需要在你的 ui 文件中添加这个 css，或者你可以创建一个 CSSResource 来引用你的 CSS 文件

```
interface ListBoundle extends ClientBundle{
    ListBundle INSTANCE = GWT.create(ListBundle.class); 

    interface ListBoxCssResource extends CssResource {
        String listBox();
    }
    @Source("package.listBox")
    @CssResource.NotStrict
    ListBoxCssResource css();
} 
```

然后设置指向的属性

```
String listBox(); 
```

喜欢

```
ListBox list = new ListBox();
list.setStylePrimaryName(ListBoundle.ListBoxCssResource.listBox()); 
```

要在 UiBinder 中使用，您必须使用标签。

例如

```
<ui:style>
    .gwt-ListBox{
          background: #fff;
          border: 1px solid #96CAEA;
    }
</ui:style>

<g:ListBox styleName="{style.gwt-ListBox}"/> 
```

但是使用外部资源更好。

有关更多信息，请阅读[此](http://code.google.com/p/google-web-toolkit/wiki/CssResource)

# html - 滚动页面时如何使 div 保持在其他 div 之上？

> ID：13720858
> 
> 赞同：-1
> 
> 时间：2012-12-05T10:17:22.817
> 
> 标签：html, css, scroll

请帮助我。我试过了。

这是我目前的代码

HTML

```
 <div id="header"><!--beggining of header-->

    </div><!--end of header--> 
```

CSS

```
 #header {
    width: auto;
    height: 100px;
    background-color: #F0F;
    border-bottom-style: solid;
    border-bottom-color: #000;
    position: fixed;
    } 
```

对不起。这是我第一次使用这个 STE。我不能发布代码。[但请在此处](https://docs.google.com/open?id=0B5aAKbasrRdqM0xzVkNMRl9yLUE)查看完整的 HTML

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T10:26:03.380

检查这个[小提琴](http://jsfiddle.net/npu3L/)

html:

```
<div class="cover">
  top
   <div class="fixed-box">
     hello                            
   </div>
</div> 
```

CSS：

```
.fixed-box {
  width:100px;/*just for preview*/
  height:100px;/*just for preview*/
  background:red;/*just for preview*/
  position:fixed;
  top:10px;
}
.cover {
  width:500px;/*just for preview*/
  height:10000px;/*just for preview*/
  background:blue;/*just for preview*/
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T10:28:25.440

```
#header {width: auto; height: 100px; background-color: #F0F; border-bottom-style: solid;
    border-bottom-color: #000; position: fixed; top:0px; z-index:100;} 
```

请确保在标题 div 之后为内容制作一个容器 div 并制作该 div`position:relative; z-index:50;`

# list - 如何检查和更改列表的值？

> ID：13720859
> 
> 赞同：0
> 
> 时间：2012-12-05T10:17:25.680
> 
> 标签：list, vim, compare

我想检查列表中的所有列表值并在必要时更改它们。

体育

我想检查下一个列表是否有高于或低于下一个值的值：
`min-value = 6`
`max-value = 22`

`mylist = ['4-8','25','16-19','21-32']`

如果列表值之一低于最小值或高于最大值，则必须将列表值更改为最小值和最大值。pe 例如，新列表必须是：

`mylist = ['6-8','22','16-19','21-22']`

如果列表项的整个值低于最小值或更高，则可以删除列表项的最大值。

如何检查我的列表值并更改它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T10:39:42.593

有两种方法。在程序中，您遍历列表项并修改或跳过元素：

```
let newlist = []
for element in mylist
    " Parse element.
    if ! OutsideBounds(element)
        call add(newlist, AdjustBounds(element))
    endif
endfor 
```

在函数式编程方法中，您使用内置`map()`来修改元素（即调整边界），但不能删除元素。因此，只需清空这些元素，然后再进行第二次传递`filter()`以删除它们。请注意，这两个函数都会修改原始列表，因此`copy()`如果您需要保留原始列表，请使用。

```
call filter(map(mylist, 'AdjustBounds(v:val)'), '! OutsideBounds(v:val)') 
```

我希望我不需要告诉你如何编写`AdjustBounds()`和`OutsideBounds()`函数......

# iphone - 从数组中获取值并将其放入文本标签中

> ID：13720860
> 
> 赞同：0
> 
> 时间：2012-12-05T10:17:29.463
> 
> 标签：iphone, ios, button, nsarray, uilabel

我有一个`application`你按 a 的地方`button`，当你按下按钮时，标签会随机变化。但是当我按下按钮时我`label`消失了。

我应该怎么办？

这是代码：

```
 if (sender == self.button) {

        NSString*path = [[NSBundle mainBundle]pathForResource:@"wordss" ofType:@"plist"];
        words = [[NSMutableArray alloc]initWithContentsOfFile:path];
        [self.randomLabel setText:[self.words objectAtIndex:arc4random_uniform([self.words count])]];
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T10:29:10.397

您是否检查过以下输出：

arc4random_uniform([self.words count])

而且，由于 label 可以采用 NSString，所以您需要将 int 转换回 NSString。所以，这样做：

```
NSString *myGeneratedRandNumber = [NSString stringWithFormat:@"%d", arc4random_uniform([self.words count])]; 
```

然后，将此字符串设置为您的标签，如下所示：

```
[myLabel setText:myGeneratedRandNumber]; 
```

另请注意，此功能的工作：

下面将生成一个介于 0 和 73 之间的数字。

```
arc4random_uniform(74); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T10:23:25.910

标签没有消失问题是您设置空字符串，因为选定的随机值返回空值。

```
NSString*path = [[NSBundle mainBundle]pathForResource:@"wordss" ofType:@"plist"];
words = [[NSMutableArray alloc]initWithContentsOfFile:path];
NSLog("%@",words);
NSString *string = [NSString stringWithFormat:[self.words objectAtIndex:((arc4random() % [self.words count]) + 0)]]
NSLog("%@",string);
[self.randomLabel setText:string]; 
```

检查 nslog 语句是否不为空

# c# - 将 WebService 转换为 DLL

> ID：13720863
> 
> 赞同：-1
> 
> 时间：2012-12-05T10:17:38.087
> 
> 标签：c#, asp.net, .net, web-services, dll

我有一个 Windows 服务项目。我想将该 Web 服务项目转换为 DLL。作为一个类库，我可以通过引用该 DLL 来简单地重用这些方法。

我只想知道是否有任何简单的方法可以做到这一点，或者我必须手动创建一个类库项目并重用我的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T10:23:01.033

您可以在与dll相同的其他项目中引用exe。但是将其移至单独的类库是最好的主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T11:31:35.907

只需单击带有服务代码的类库并选择构建。它将在项目 bin 目录中的 Debug 文件夹中创建一个 DLL 文件。您可以在任何地方使用该 DLL 文件。希望这会有所帮助..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T13:14:00.970

只需将您的代码复制到类库项目并构建它。它将创建 .dll，您可以通过添加对项目的引用轻松使用它。我认为这将是一种最简单的方法

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T08:34:19.030

在 ASP 论坛上搜索和提问后，正确的做法是手动重用代码。

# php - 将PHP代码执行到变量中

> ID：13720866
> 
> 赞同：0
> 
> 时间：2012-12-05T10:17:47.457
> 
> 标签：php

是否可以将 PHP 代码执行到变量中？例如我有`index.php`和`page.php`文件在同一个目录中。如果您执行`page.php`，您将拥有 HTML 页面的一部分。我想把它作为一个字符串放入`index.php`. 有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T10:22:44.017

您可以使用输出缓冲区：

```
<?php
ob_start();
include('page.php');
$page = ob_get_clean();
?> 
```

请注意 page.php 仍然在相同的上下文中执行（全局变量、函数等继续存在）

一般来说，做这样的事情听起来像是损坏的设计和 page.php 应该被正确地重写。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T10:19:20.170

```
include('page.php'); 
```

`page.php`这将包括从`index.php`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T10:21:23.310

您可以使用**[cURL](http://nl.php.net/manual/en/intro.curl.php)**检索脚本的输出并将其保存到变量中。下面是你在 index.php 中要做的事情：

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, ‘page.php’);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);

$contents = curl_exec ($ch); 
```

请注意，当您想要的只是响应时，没有必要将其他脚本（和相关变量）包含到您的页面中。包含脚本意味着您必须避免变量名、函数名等之间的冲突。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T10:22:34.627

如果您想执行 page.php 中的一些代码，您可以包含该文件并在 page.php 中创建一个函数，如下所示：

```
<?php include('page.php');
   $test = function MyHtmlCode();
   echo $text;
?> 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-05T10:23:42.527

您没有提供示例代码，因此我假设页面实际打印（使用 echo、print 等），然后您可以使用[php output buffering](http://php.net/manual/en/function.ob-get-contents.php)。

```
<?php

ob_start();

require_once('index.php');

$out = ob_get_contents();

ob_end_clean();

?> 
```

（编辑）

这是一个解决方案，但它绝对不是最佳实践......那将是将打印 HTML 的代码移动到生成 HTML 并返回它的函数中，然后将这些函数移动到一个单独的文件中，该文件将包含在index.php 和 page.php，然后简单地调用这些函数。包括一个应该打印一些输出的文件，并用输出缓冲区扭曲它会使代码不可读和混乱。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-12-05T10:23:44.330

你应该试试这个：

```
ob_start()
include('page.php');
$variable = ob_get_clean(); 
```

这将启动一个输出缓冲区，包含`page.php`文件并将写入输出缓冲区的所有内容写入`$variable`

# terminal - Glusterd，其中一块砖包含另一块

> ID：13720877
> 
> 赞同：0
> 
> 时间：2012-12-05T10:18:11.520
> 
> 标签：terminal

配置 Glusterd 时出现以下错误

“一块砖包含另一块”

执行命令时

```
gluster volume create slitaz-volume replica 2 
192.168.56.101:/mnt/data 192.168.56.102:/mnt/data 
```

我找到了用 getfattr 和 setfattr 修复它的东西，但是在执行命令 setfattr 时，它会回答“没有这样的属性”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T19:21:20.740

确保每个 gluster 的 uuid 不同。查看 /var/lib/glusterd/glusterd.info 的 UUID。如果它们是相同的 gluster 将不起作用。停止服务，删除该文件并重新启动 glusterd。这将解决您的问题。

# java - Android NDK：您的 APP_BUILD_SCRIPT 指向一个未知文件：./jni/Android.mk

> ID：13720880
> 
> 赞同：3
> 
> 时间：2012-12-05T10:18:28.417
> 
> 标签：java, android, android-ndk, build-error

好吧，我在 stackoverflow 中看到了 4 个类似的问题（[this](https://stackoverflow.com/questions/6494567/android-ndk-your-app-build-script-points-to-an-unknown-file)、[this](https://stackoverflow.com/questions/10696005/android-ndk-your-app-build-script-points-to-an-unknown-file)、[this](https://stackoverflow.com/questions/9359568/android-ndk-gdb-your-app-build-script-points-to-an-unknown-file-jni-android)和[this](https://stackoverflow.com/questions/10632234/android-ndk-r8-windows-android-ndk-your-app-build-script-points-to-an-unknown)）。我尝试了那里给出的答案。我必须说一个答案对我有用，但文档明确说不要使用这种方法。所以我在这里问..

## 我的项目设置

1.  在 Mac OS X Mountain Lion 10.8.2、Eclipse Juno、gcc 4.2.1、GNU Make 3.8.1 上运行。
2.  我的项目是一个学习NDK的测试项目，目标API 16，打算支持API 8及以上。
3.  我的项目在 path `~/Desktop/PROJECT/ANDROID/WORKSPACE/NDKResearch`。
4.  我的 NDK 路径是 `~/Documents/ANDROID/android_ndk_r8a`

我不知道路径信息有什么帮助。但是我总是在 bash 中给出正确的路径时遇到问题。所以只是在这里发布。

## 我做了什么？

在我的 NDKResearch 项目中，我添加了一个`Android.mk`文件（路径 `$MY_PROJECT_PATH/jni/Android.mk`：）

```
include $(CLEAR_VARS)
LOCAL_PATH:= $(call my-dir)
LOCAL_CPP_FEATURES += -fno-exceptions
LOCAL_SRC_FILES := \
     Log.c \
     Calculate.c 

LOCAL_MODULE := libSoundTouch

include $(BUILD_SHARED_LIBRARY) 
```

在. `Application.mk`_`$MY_PROJECT_PATH/jni/Application.mk`

```
APP_PLATFORM := android-16
APP_STL := gnustl_static
APP_CPPFLAGS := -frtti -fexceptions
APP_PROJECT_PATH := /Users/myusername/Desktop/PROJECTS/ANDROID/WORKSPACE/NDKResearch 
```

然后我`ndk-build`在 bash shell 中执行

```
## cd ~/Desktop/PROJECT/ANDROID/WORKSPACE/NDKResearch
## ~/Documents/ANDROID/android_ndk_r8a/ndk-build 
```

只是为了得到标题中提到的错误。

## 我的问题是什么？

从上面链接的线程中，[用户 sege 的回答](https://stackoverflow.com/questions/6494567/android-ndk-your-app-build-script-points-to-an-unknown-file/6870967#6870967)确实对我有用。其他人都没有。但是 ndk 的文档明确声明不要使用这种方法。来自 ndk 附带的 Overview.html 文件（找不到在线版本）。

> 有两种使用 Application.mk 的方法：
> 
> *   将它放在 $PROJECT/jni/Application.mk 下，它会被“ndk-build”脚本自动拾取（稍后会详细介绍）
>     
>     
> *   将它放在 $NDK/apps//Application.mk 下，其中 $NDK 指向您的 NDK 安装路径。之后，从 NDK 目录启动“make APP=”。
>     
>     
>     
>     这是在 Android NDK r4 之前使用此文件的方式。出于兼容性原因，它仍然受支持，但我们强烈建议您改用第一种方法，因为它更简单，并且不需要修改/更改 NDK 安装树的目录。

所以我的问题是，有人用第一种方法成功了吗？它不工作的任何原因？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-02-09T20:50:16.027

对我有用的是将以下行放入我的 .bashrc

`export NDK_PROJECT_PATH="."`

然后在项目目录中键入`source ~/.bashrc`和。`ndk-build`

# jquery - 不返回上一个元素

> ID：13720883
> 
> 赞同：2
> 
> 时间：2012-12-05T10:18:36.573
> 
> 标签：jquery

我正在尝试获取上一个元素。因此，当单击时，`.percen`我想提醒前一个元素的值。此刻我得到`undefined`. 问题是什么？

```
<input class="c currency" type="text" name="artigoAlternativo1_C"/>
<input class="d currency percen" type="text" name="artigoAlternativo1_D"/>

<br/>

<input class="c currency" type="text" name="artigoAlternativo1_C"/>
<input class="d currency percen" type="text" name="artigoAlternativo1_D"/> 
```

```
$.fn.percentageFormat = function () {
    this.each(function (i) {
        $(this).change(function (e) {
            var $curr = $(this);
            $curr_ = $curr.prev('.c');
            alert(this.value);
            alert($curr_.prev().value);
        });
    });
    return this;
}
$(function () {
    $('.percen').percentageFormat();
}); 
```

[演示](http://jsfiddle.net/ZY5m4/1/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T10:24:18.543

您正在调用该`prev`方法两次并且 jQuery 对象没有`value`属性，请更改：

```
alert($curr_.prev().value); 
```

到：

```
alert($curr.prev().val()); 
```

或者：

```
alert($curr_.val()); 
```

[http://jsfiddle.net/2gf95/](http://jsfiddle.net/2gf95/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T10:24:41.883

在您的代码`$curr_`中是一个 jQuery 元素，因此您需要使用它`val()`来获取值。你也使用`prev()`了两次。试试这个：

```
$.fn.percentageFormat = function () {
    this.each(function (i) {
        $(this).change(function (e) {
            var $curr = $(this);
            $curr_ = $curr.prev('.c');
            alert(this.value);
            alert($curr_.val()); // < Note no prev() here, and use of val()
        });
    });
    return this;
}
$(function () {
    $('.percen').percentageFormat();
}); 
```

[**示例小提琴**](http://jsfiddle.net/ZY5m4/3/)

# c - 结构铸造 ansi c 89

> ID：13720884
> 
> 赞同：0
> 
> 时间：2012-12-05T10:18:36.007
> 
> 标签：c, casting, struct, c89

struct 在严格的 c 89 中是否定义良好？我的意思是这段代码

```
struct a {
    int a, b;
    void * c;
} k;
//init k...
struct b {
    int u, w;
    long *data;
} p = *(struct b*)&k; 
```

将适用于支持该标准的每个编译器吗？如果我反转演员表（例如从 struct b 转换为 struct a）c 将与开头相同？我很确定它适用于 gcc（甚至适用于 -ansi -pedantic）、microsoft 编译器等，但它是否保证它是标准的 c 89？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T10:21:52.257

不要这样做。手动复制字段：

```
struct b p;

p.u = k.a;
p.w = k.b;
p.data = (long *) k.c; 
```

你的代码很可能会运行得很好，因为`long *`并且*通常*`void *`会以相同的方式实现，但为什么要冒险呢？该标准说的是：

 *> 指向 void 的指针应具有与指向字符类型的指针相同的表示和对齐要求。39) 类似地，指向兼容类型的合格或非合格版本的指针应具有相同的表示和对齐要求。所有指向结构类型的指针都应具有彼此相同的表示和对齐要求。所有指向联合类型的指针都应具有彼此相同的表示和对齐要求。指向其他类型的指针不需要具有相同的表示或对齐要求。

请注意最后一句，其中指向“其他类型”（例如`long`）的指针与指向 的指针不同`void`。

以上是明确的，安全的，更清晰的。*

# android - Android：在自定义应用程序中使用本机相机

> ID：13720888
> 
> 赞同：1
> 
> 时间：2012-12-05T10:18:41.120
> 
> 标签：android, android-activity, camera, image

我正在开发新的银河相机。我的应用程序必须使用本机相机应用程序制作图片。是否可以启动本机相机应用程序并在拍照时返回我的应用程序？我可以这样做吗？谢谢

# windows-phone-8 - Windows Phone 8 中地理坐标的位置详细信息

> ID：13720890
> 
> 赞同：1
> 
> 时间：2012-12-05T10:18:45.157
> 
> 标签：windows-phone-8

> **可能重复：**
> [如何使用 wp7 获取 GPS 坐标的地址名称](https://stackoverflow.com/questions/9294474/how-to-get-address-name-of-gps-coordinate-with-wp7)

我正在开发一个 WP8 应用程序。在我的应用程序中，我想从其地理坐标中获取特定位置的详细信息，例如位置名称。我可以得到设备当前的 gps 位置。但它只提供地理坐标。是否有任何服务可以从地理坐标中提供位置详细信息。请帮我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T02:36:44.537

您要查找的内容称为反向地理编码。将地理坐标转换为地址。

如前所述，您可以在 WP7 上使用 Google 和 Bing 来实现这一目标。在 windows phone 8 上，支持地理编码和反向地理编码作为框架的一部分。您可以[在这篇诺基亚介绍文章（在“地理编码”下）中阅读对地理编码的概述](http://www.developer.nokia.com/Community/Wiki/What%27s_new_in_Windows_Phone_8#Maps)[，并在另一篇诺基亚文章中](http://www.developer.nokia.com/Resources/Library/Lumia/#!guide-to-the-maps.html;#toc_Searchingforanaddress)阅读更全面的概述。

这是从坐标转换为地址的反向地理编码的示例：

```
private void Maps_ReverseGeoCoding(object sender, RoutedEventArgs e)
{
    ReverseGeocodeQuery query = new ReverseGeocodeQuery()
    {
        GeoCoordinate = new GeoCoordinate(37.7951799798757, -122.393819969147)
    };
    query.QueryCompleted += query_QueryCompleted;
    query.QueryAsync();
}

void query_QueryCompleted(object sender, QueryCompletedEventArgs<IList<MapLocation>> e)
{
    StringBuilder sb = new StringBuilder();
    sb.AppendLine("Ferry Building Geocoding results...");
    foreach (var item in e.Result)
    {
        sb.AppendLine(item.GeoCoordinate.ToString());
        sb.AppendLine(item.Information.Name);
        sb.AppendLine(item.Information.Description);
        sb.AppendLine(item.Information.Address.BuildingFloor);
        sb.AppendLine(item.Information.Address.BuildingName);
        sb.AppendLine(item.Information.Address.BuildingRoom);
        sb.AppendLine(item.Information.Address.BuildingZone);
        sb.AppendLine(item.Information.Address.City);
        sb.AppendLine(item.Information.Address.Continent);
        sb.AppendLine(item.Information.Address.Country);
        sb.AppendLine(item.Information.Address.CountryCode);
        sb.AppendLine(item.Information.Address.County);
        sb.AppendLine(item.Information.Address.District);
        sb.AppendLine(item.Information.Address.HouseNumber);
        sb.AppendLine(item.Information.Address.Neighborhood);
        sb.AppendLine(item.Information.Address.PostalCode);
        sb.AppendLine(item.Information.Address.Province);
        sb.AppendLine(item.Information.Address.State);
        sb.AppendLine(item.Information.Address.StateCode);
        sb.AppendLine(item.Information.Address.Street);
        sb.AppendLine(item.Information.Address.Township);
    }
    MessageBox.Show(sb.ToString());
} 
```

当我在 WP8 上运行此代码段时，我收到以下消息框：

![MEssageBox 显示渡轮大楼的详细信息](../Images/9885a368e175d5314e43a13fc29791c9.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T10:45:47.773

是的，您可以使用 bing API 来获取特定位置的详细信息。 [http://msdn.microsoft.com/en-us/library/ff701722.aspx](http://msdn.microsoft.com/en-us/library/ff701722.aspx) http://stackoverflow.com/questions/9109996/getting-location-name-from-longitude-and-latitude-in-bingmap

希望这会有所帮助。

开尔文

# asp.net - 将 gridview 导出到 Excel：在它呈现给控制之前对 gv 进行更改

> ID：13720896
> 
> 赞同：0
> 
> 时间：2012-12-05T10:19:17.807
> 
> 标签：asp.net, excel, gridview, export-to-excel

我使用以下代码将gridview导出到excel

```
System.IO.StringWriter tw = new System.IO.StringWriter();
System.Web.UI.HtmlTextWriter hw = new System.Web.UI.HtmlTextWriter(tw);
HtmlForm frm = new HtmlForm();

Response.ContentType = "application/vnd.ms-excel";

Response.Charset = "";
EnableViewState = false;
Controls.Add(frm);

frm.Controls.Add(this.myGridView);
frm.RenderControl(hw); 
```

[上述导出代码的来源](http://www.codeproject.com/Questions/443553/Export-Gridview-to-excel)

一切都像魅力一样。除了我现在必须在它导出到 Excel 之前对 gridview 进行更改。例如，一个变化是我需要删除一列。然而我不能这样做：

```
 //I can't remove columns here, since it has not been rendered yet and has 0 columns
  frm.Controls.Add(this.myGridView);
  frm.RenderControl(hw); 
```

有没有办法在导出之前编辑 Gridview？例如。删除一列

# emacs - Emacs，如何仅显示当前任务并在组织模式下隐藏其他任务？

> ID：13720898
> 
> 赞同：13
> 
> 时间：2012-12-05T10:19:20.860
> 
> 标签：emacs, org-mode

组织模式。
我有一个很大的任务树，我想在缓冲区中只选择 1 个（仅为它写注释）并在编辑时隐藏其他任务。
我怎样才能做到这一点？

```
task-1
  subtask-1.1
  subtask-1.2
task-2
  subtask2.1
...
... 
```

例如，我只想为我显示：

```
subtask-1.2
(notes for this subtask) 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-12-05T10:31:39.183

在任务中使用`narrow-to-defun`或`org-narrow-to-subtree`命令。（`widen`移回整个缓冲区内容）。

默认快捷键：

```
C-x n s      # org-narrow-to-subtree (bound in org-mode)
C-x n d      # narrow-to-defun
C-x n w      # widen 
```

[手动的](http://www.gnu.org/software/emacs/manual/html_node/emacs/Narrowing.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-12-13T17:02:09.387

您还拥有`org-tree-to-indirect-buffer`, or `C-c C-x b`，它将仅使用此子树创建一个新缓冲区，并将一个缓冲区中的任何更改反映到另一个缓冲区中。

# r - 在R中使用逗号分隔的毫秒格式的日期时间

> ID：13720899
> 
> 赞同：2
> 
> 时间：2012-12-05T10:19:21.967
> 
> 标签：r, datetime

您好，我需要像投递 dateTimes 角色一样`"20/2/06 11:16:16,683"`，并且很难做到。我试过经典的（没有逗号）：

```
R) strptime("20/2/06 11:16:16.683", "%d/%m/%y %H:%M:%OS")
[1] "2006-02-20 11:16:16.682" 
```

这对于我拥有的格式失败：

```
R) strptime("20/2/06 11:16:16,683", "%d/%m/%y %H:%M:%OS")
[1] "2006-02-20 11:16:16" 
```

这个也是：

```
R) strptime("20/2/06 11:16:16,683", "%d/%m/%y %H:%M,%OS")
[1] NA 
```

有没有办法直接做到这一点，或者我应该在使用 strptime 之前使用`gsub`类似的函数来替换`,`a 。`.`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T10:27:05.863

我认为您需要手动进行转换。

这是我的建议，不使用 gsub，但使用扫描

```
 ll <- scan(text = "20/2/06 11:16:16,683",sep=',',what="character")
 as.POSIXct(ll[1],format=("%d/%m/%y %H:%M:%OS"))+ as.numeric(ll[2])/1000

 [1] "2006-02-20 11:16:16.683 CET" 
```

# php - PHP - 您是否需要再次设置会话数据以重置生命周期？

> ID：13720902
> 
> 赞同：1
> 
> 时间：2012-12-05T10:19:28.247
> 
> 标签：php, session, lifetime

...或者您只需要开始一个新会话？

我被赋予了修复导致会话过期的错误的任务，即使 session.gc_maxlifetime 设置为 8 小时（它确实已设置，我已经检查过）。

浏览完代码后，我注意到 session_start() 在每次加载时都会被调用，正如预测的那样，但登录数据会话仅在用户登录时设置。

我是否需要在每次页面加载时设置用户数据会话以重置会话生命周期？

即使页面没有重新加载，我也需要会话保持 8 小时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T11:10:25.273

您可能正在使用会话文件的默认位置，它是服务器上所有网站共享的临时目录。在这种情况下，最短的站点`session.gc_maxlifetime`可能会从所有站点中删除会话数据。原因是无法确定哪个站点拥有哪个会话文件。

您需要为会话创建一个自定义目录并使用[session.save_path指定它](http://php.net/manual/en/session.configuration.php#ini.session.save-path)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T10:30:05.670

您需要再次设置会话变量。

一种方法，使用`$_SESSION['last_click_time'] = time();`并比较它。如果它已过时，请刷新会话变量，重新登录用户等。

# html - 如何编写 xpath 来计数 两个之间的标签

> ID：13720905
> 
> 赞同：0
> 
> 时间：2012-12-05T10:19:35.933
> 
> 标签：html, xpath

```
<p>
<p>
<h2>
<p>
<ul>
<p>and two special regions:</p>
<ul>
<h2>
     <span class="editsection">
     <span id="History" class="mw-headline">History</span>
</h2>
<div class="thumb tleft">
<p>
<p>
<h3>
<p>
<div class="thumb tright">
<div class="thumb tright">
<p>
<p>
<h3>
<p>
<h3>
<div class="thumb tright">
<p>
<p>
<p>
<p>
<p>
<p>
<h3>
<p>
<h2>
     <span class="editsection">
     <span id="Demography" class="mw-headline">Demography</span>
</h2>
<div class="thumb tright">
<p>
<div class="thumb tright">
<p>
<table class="wikitable sortable jquery-tablesorter">
<p>
<p>
<p> 
```

如何计算`<P>`两个标签之间的标签数量`<h2>`？

从标签开始

```
<h2>
     <span class="editsection">
     <span id="History" class="mw-headline">History</span>
</h2> 
```

和

```
<h2>
     <span class="editsection">
     <span id="Demography" class="mw-headline">Demography</span>
</h2> 
```

xpath 应该`<p>`在这两个标签之间检索 13 个标签`<h2>`。那么如何为此编写xpath呢？

注意：标签`<p>` `<h2>` `<h3>` `<ul>` `<div>`是兄弟姐妹。

`<p>`tags 和`<h2>`tags 不包含任何属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T13:48:58.433

**使用**：

```
count((//h2)[1]/following::p[count(following::h2[1] | (//h2)[2]) = 1]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T10:45:46.257

这个应该适合你：

```
count(//p[preceding-sibling::h2[./span[@id='History']] and following-sibling::h2[./span[@id='Demography']]]) 
```

您可以使用以下转换对其进行测试：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:transform version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:template match="/">
        <xsl:value-of select="count(//p[preceding-sibling::h2[./span[@id='History']] and following-sibling::h2[./span[@id='Demography']]])" />
    </xsl:template>
</xsl:transform> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T15:11:05.780

XPath 在 XML 上运行，而不是在 HTML 上运行。虽然 HTML 也可能是格式良好的 XML，但您的情况肯定不是这样。

如果您想使用 XPath，您还需要使用一个工具来将其加载为有效的 XML DOM，或者首先将其转换为格式良好的 XML。如果做不到这一点，您唯一现实的选择是使用文本处理方法来执行此操作。

# objective-c - upSideDown iPhone 方向在 iOS 6 中不起作用？

> ID：13720907
> 
> 赞同：5
> 
> 时间：2012-12-05T10:19:39.273
> 
> 标签：objective-c, ios6, xcode4.5, uiinterfaceorientation, uideviceorientation

希望你会没事，并尽力而为。

我在我的 中遇到问题`upSideDown Orientation`，`iOS 6`虽然我认为我做的一切都很完美，但我不知道为什么它不适合我。我正在与您分享我的问题，以便获得任何解决方案。

到目前为止我做了什么：

**a)**在 xcode 项目摘要选项卡中，我已启用所有 4 个方向。

**b)**我在所有控制器类中添加了一段代码（如下所示）。

```
-(BOOL)shouldAutorotate
{
    return YES;
}
-(NSInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskAll;
} 
```

但仍然`upSideDown Orientation`无法正常工作

感谢期待。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-07T07:29:33.503

我找到了它的解决方案。

我们需要创建一个单独的`UINavigation Controller`类型类。在`.m`文件中添加以下方法

```
// Deprecated in iOS6, still needed for iOS5 support.
// ---

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    // Return YES for supported orientations
    //    return (interfaceOrientation == UIInterfaceOrientationPortrait);
    return YES;
}

// iOS6 support
// ---
- (BOOL)shouldAutorotate
{
    return YES;
}

-(NSUInteger)supportedInterfaceOrientations{
    return UIInterfaceOrientationMaskAll;
} 
```

**现在**将这个新创建的类分配给您`Navigation Controller`的故事板。还要`.m`在'Project -> Build Setting -> Compile Sources'中添加这个类的文件。运行该项目，它将支持并执行所有方向，包括`upSideDown`.

希望对大家有所帮助。

问候

# python - 使用 cpickle 序列化对象时的 EOF

> ID：13720908
> 
> 赞同：0
> 
> 时间：2012-12-05T10:19:41.690
> 
> 标签：python, pickle

我有以下报价似乎工作正常：

```
from cPickle import *
class Clientthread(threading.Thread):
   def __init__(self,clientsocket, mystring):
      self.client = clientsocket
      self.clients = [clientsocket]
      self.testEntity = entity.Entity(position = [1,7])
      self.testTosend = dumps(self.testEntity,2)
      self.client.send(self.testTosend) 
```

但是，当我尝试反序列化整个东西时

```
 news=self.s.recv(1024)
 realnews = loads(news) 
```

我在使用负载的行中收到 EOF 错误。知道这可能来自哪里吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T12:01:25.197

假设`self.s`是一个`socket`。该`recv`方法并不总是按照您的要求返回确切的字节数。如[套接字](http://docs.python.org/2/library/socket.html#socket.socket.recv)文档中所述，数量是要返回的**最大**`recv`字节数。

这会导致将不完整的数据传递给您的`loads`.

# c# - 在 c# 2.0 中解析字符串模板的最佳和简单方法

> ID：13720917
> 
> 赞同：0
> 
> 时间：2012-12-05T10:20:05.630
> 
> 标签：c#, templates, template-engine

这是我的伪模板

```
Dear {User},

Your job finished at {FinishTime} and your file is available for download at {FileURL}.

Regards,

{Signature} 
```

我在 Google 中搜索 c# 中的模板解析，发现了几个不错的库，但这些库完全适用于 c 4.0 版本。我正在使用 c# v2.0。所以任何人都可以向我推荐任何用于解析 c# v2.0 的字符串模板的好库。只是简单地讨论一下在 c# 2.0 中解析字符串模板的最佳和简单的方法。谢谢

## 我用 RegEx 得到了一个简单的解决方案

```
string template = "Some @@Foo@@ text in a @@Bar@@ template";
StringDictionary data = new StringDictionary();
data.Add("foo", "random");
data.Add("bar", "regex");
string result = Regex.Replace(template, @"@@([^@]+)@@", delegate(Match match)
{
    string key = match.Groups[1].Value;
    return data[key];
}); 
```

* * *

```
using System;
using System.Collections.Generic;
using System.Text.RegularExpressions;

class Program {
static void Main() {
    var template = " @@3@@  @@2@@ @@__@@ @@Test ZZ@@";
    var replacement = new Dictionary<string, string> {
            {"1", "Value 1"},
            {"2", "Value 2"},
            {"Test ZZ", "Value 3"},
        };
    var r = new Regex("@@(?<name>.+?)@@");
    var result = r.Replace(template, m => {
        var key = m.Groups["name"].Value;
        string val;
        if (replacement.TryGetValue(key, out val))
            return val;
        else
            return m.Value;
    });
    Console.WriteLine(result);
 }
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T10:24:52.337

为什么不能只使用 string.format？将您的模板更改为：

```
Dear {0},

Your job finished at {1} and your file is available for download at {2}.

Regards,

{3} 
```

并使用这个：

```
string.format(template, user, finishTime, filepath, signature); 
```

不？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T10:25:01.493

这可能太简单了，但对于这类任务，我一直在 C# 中使用 String.Replace

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T10:25:21.930

最简单的选择是只对说明符进行字符串替换。但是这里的问题是您必须事先知道说明符。

一个更复杂的过程是将模板作为字符串读入并对其进行标记。您处理每个字符并发出解析器可以使用的标记。真的你会有很少，你会有正常的字符串字符，一些空白字符和你的令牌开始/结束对。

您希望不断搅动标记，直到到达说明符开始标记，然后记录所有内容，直到说明符结束标记作为标记名称。冲洗并重复，直到处理完所有发出的令牌。

一旦你解析出你的说明符集合，你就可以像最初的想法一样简单地对它们进行字符串替换。或者，如果您记录说明符在字符串中的位置，即偏移量和长度，您可以简单地剪切并插入替换值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T10:28:46.737

您是否考虑过使用`string.Format`- 例如：

```
string template = @"Dear {0}, Your job finished at {1} and your file is available for download at {2}. Regards, {3}";

string output = string.Format(template, user, finishTime, fileUrl, signature); 
```

# jquery - jQuery移动数据过滤字符串长度

> ID：13720918
> 
> 赞同：4
> 
> 时间：2012-12-05T10:20:07.197
> 
> 标签：jquery, string, search, mobile

我有一个包含 30.000 多个条目的列表。

当字符串长度 > 2 时是否可以开始搜索？

代码：

```
<div class="content-primary">      
   <ul data-role="listview" data-filter="true" data-inset="true">
      <li><a href="#">1</a></li>
      <li><a href="#">2</a></li>
      ...
      <li><a href="#">30.000</a></li>
   </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T10:41:29.553

如果你给每个`<a></a>`（链接）一个唯一的ID，然后创建一个jQuery脚本来获取所有链接（`.text()` `.length`）的每个值，然后“显示”或“隐藏”具有或不具有正确长度的对象`.show()`和`.hide()`

这是一个例子：http: [//jsfiddle.net/499rb/12/](http://jsfiddle.net/499rb/12/)

这是一个循环遍历所有元素并确定哪些元素具有正确数量的字符然后显示或隐藏它们的函数：

```
$(function(){
  $('.info_link').click(function(){
    for (var i = 1; i <= 10; i++)
    {
        var str = $("#a_"+i).text();

        if (str.length >= 2) {
            $("#li_"+i).show();
        }else{
            $("#li_"+i).hide();
        }
    }
  });
}); 
```

这是带有调用过滤功能和所有元素的“链接按钮”的 HTML 页面：

```
<a class="info_link" href="#">FILTER: TEXT.LENGTH >= 2</a>

<ul>
    <li id="li_1">
        <a id="a_1" href="#">1</a>
    </li>
    <li id="li_2">
        <a id="a_2" href="#">2</a>
    </li>
    <li id="li_3">
        <a id="a_3" href="#">3</a>
    </li>
    <li id="li_4">
        <a id="a_4" href="#">4</a>
    </li>
    <li id="li_5">
        <a id="a_5" href="#">5</a>
    </li>
    <li id="li_6">
        <a id="a_6" href="#">6</a>
    </li>
    <li id="li_7">
        <a id="a_7" href="#">7</a>
    </li>
    <li id="li_8">
        <a id="a_8" href="#">8</a>
    </li>
    <li id="li_9">
        <a id="a_9" href="#">9</a>
    </li>
    <li id="li_10">
        <a id="a_10" href="#">10</a>
    </li>
</ul> 
```

# php - Mysql Datetime 字段，仅使用 php 更新日期

> ID：13720920
> 
> 赞同：1
> 
> 时间：2012-12-05T10:20:15.787
> 
> 标签：php, mysql, datetime

我在 MYSQL 中仅更新日期时间字段类型中的日期时遇到问题。

我正在使用 PHP 从用户 (dd/mm/yyyy) 获取输入，并使用 UPDATE mysql 语句仅更改日期。但日期时间字段仅显示 0000-00-00 00:00:00。

下面的代码只是从使用 XMLHttprequest 传递值的 php 获取输入后更新表的 php 文件。

请在下面查看我的代码：

```
<?php include 'accesscontrol.php'; ?>
<?php
$q4=$_GET["q4"];

$user = $_SESSION['user'];

$date_array = explode( "/", $q4 );
$new = sprintf( '%4d-%02d-%02d', $date_array[2], $date_array[1], $date_array[0] );

$con = mysql_connect("localhost","tst","tst!@#");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("test", $con);

mysql_query("UPDATE INVHDR_edit SET Invdate= concat ('$new', time(Invdate)) WHERE usr='$user'");

if (!mysql_query($sql,$con))
  {
  die('Error: ' . mysql_error());
  }

mysql_close($con);
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T10:40:13.260

试试这个

```
<?php include 'accesscontrol.php'; 
$q4 = $_GET["q4"];
$user = $_SESSION['user'];
$dateSql = date("Y-m-d H:i:s",strtotime($q4));
$con = mysql_connect("localhost","tst","tst!@#");
if (!$con){
  die('Could not connect: ' . mysql_error());
}
mysql_select_db("test", $con);
mysql_query("UPDATE INVHDR_edit SET Invdate= '$dateSql' WHERE usr='$user'");
if (!mysql_query($sql,$con)){
  die('Error: ' . mysql_error());
}
mysql_close($con);
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T10:30:18.753

试试这个查询： `UPDATE INVHDR_edit SET Invdate='".$new." 00:00:00' WHERE usr='$user'");`

如果您需要时间追加使用以下内容。

```
$new = $new.date(" H:i:s");
mysql_query("UPDATE INVHDR_edit SET Invdate='$new' WHERE usr='$user'"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T10:24:12.480

试试这个 ：：

```
UPDATE INVHDR_edit SET Invdate= STR_TO_DATE(Invdate, '%d-%b-%y') WHERE usr='$user'"); 
```

如果使用变量：

```
UPDATE INVHDR_edit SET Invdate= STR_TO_DATE(@var1, '%d-%b-%y') WHERE usr='$user'"); 
```

# c# - DataGridView 和外键

> ID：13720921
> 
> 赞同：-1
> 
> 时间：2012-12-05T10:20:16.693
> 
> 标签：c#, winforms

我有两个表，A 和 B。表 B 接收来自表 A 的外键，`A.id`. 在`DataGridView`中，我不想在表 B 中显示表 A 的 id，而是显示`A.FirstName`. 这可能吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-05T10:38:48.657

```
using System.Linq;

...

//Initialization, please ignore it, as you have data tables A and B populated from the database
/********************/
DataTable A, B;
A = new DataTable();
B = new DataTable();
A.Columns.Add("Id",typeof(int));
A.Columns.Add("ForeignId",typeof(int));
B.Columns.Add("Id",typeof(int));
B.Columns.Add("Name", typeof(string));

A.Rows.Add(1,1);
B.Rows.Add(1,"First");
/********************/

var aEnum = A.AsEnumerable();
var bEnum = B.AsEnumerable();

dataGridView1.DataSource = (from a in aEnum
                            join b in bEnum on a["ForeignId"] equals b["Id"]
                            select new
                            {
                                Id=a["Id"],
                                ForeignId = a["ForeignId"],
                                ForeignName = b["Name"]
                            }).ToList(); 
```

# background - background-size:cover 在 Chrome for Android 中留下空白

> ID：13720922
> 
> 赞同：11
> 
> 时间：2012-12-05T10:20:19.093
> 
> 标签：background, fullscreen, css, cover

我正在尝试为我的网站获得一个不错的全屏图像背景。它在我测试过的几乎所有浏览器（browsershots.org）中都能正常工作，但在我的 Android 平板电脑上的 Chrome 中却没有按预期工作。如您所见，背景中有很多白色，应该是所有图像。

**链接：** [http ://test.socie.nl](http://test.socie.nl)

**CSS：**

```
body {
    background: url(../../images/background/image1.jpg) no-repeat center center fixed; 
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: cover;
} 
```

**意外结果：**

![](../Images/9a60439f9dc4998fd1e656f9e103af47.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-08T10:41:16.270

Android/Chrome 团队似乎忽略了一个四年前的错误：

[https://code.google.com/p/android/issues/detail?id=3301](https://code.google.com/p/android/issues/detail?id=3301)

[http://productforums.google.com/forum/#!topic/chrome/l6BF3W0rymo](http://productforums.google.com/forum/#!topic/chrome/l6BF3W0rymo)

我已经尝试了在这些链接和其他地方提到的所有解决方案；在 Android 4.3 Chrome 30 上都失败了。在 Android 2.3 本机浏览器上都失败了。

我要去的是：

```
.body{
background:#fff url(background.jpg) no-repeat fixed center;
background-size:cover;
    } 
```

（即 CSS 移出`body`到一个名为“body”的类中），然后在 HTML 中我有：

```
<body>
<div class="body">
...
<div class="ftpush"></div><!--Part of keeping the footer at the bottom of window-->
</div><!--end of "body"-->
<div class="footer"></div>
</body>
</html> 
```

（顺便说一句，您可以在那里看到将页脚保持在窗口底部的技术，似乎不会导致问题，因为在我的第一组实验中，我已经将其剥离了。）

**顺便说一句：**我很惊讶地看到 Firefox for Android 在 background-size:cover 上也表现不佳。他们是否共享相同的渲染引擎？！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-25T18:25:00.307

上面发布的方法有更新（如[在此处](http://css-tricks.com/perfect-full-page-background-image/)发布）。

```
html { 
  background: url(images/bg.jpg) no-repeat center center fixed; 
  -webkit-background-size: cover;
  -moz-background-size: cover;
  -o-background-size: cover;
  background-size: cover;
} 
```

尽管尽管进行了更新，但原始问题中的问题仍然存在。除了上述内容之外，对我有用的是向 html CSS 添加完整的宽度和高度：

```
html {
    width: 100%;
    height: 100%
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-01T16:06:54.817

通过添加以下内容解决：

```
html {
  height:100%;
  min-height:100%;
}

body {
   min-height:100%;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T10:39:17.363

而不是背景图像，请尝试使用`<img>`：

**HTML：**

```
<img src="imagepath" id="your-id" /> 
```

**CSS：**

```
#your-id{
    width: 100%;
    height: auto;
    position: fixed;
    top: 0;
    left: 0;
    z-index: -999;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-07-12T10:46:46.990

实际上，**如果您使用 html 标记**要添加，我只需要：

```
height: 100%; 
```

...需要注意的是，当您将菜单栏滚动到视野之外时，图像仍然会调整大小，但我认为所有其他答案也存在这个问题。

# php - fopen、fwrite 和 fclose 文件大小问题

> ID：13720926
> 
> 赞同：1
> 
> 时间：2012-12-05T10:20:30.577
> 
> 标签：php, fopen, fwrite, fclose

我正在使用 fopen、fwrite 和 fclose 使用以下代码将 PNG 保存到我的服务器上：

```
ini_set('memory_limit', '128M');
$f = fopen('../../myFolder/myImage.png', 'w+'); 
fwrite($f, base64_decode($lowerDesign)); 
$success = fclose($f);
echo $success != false ? '1' : '0'; 
```

现在这对于小文件大小（1-5kb）非常有效，但对于较大的图像则失败。我的日志中绝对没有错误。我得到的只是“0”而不是“1”，并且没有保存 PNG。

显然，文件大小是问题，但我想不出如何解决它。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T10:25:26.330

将 $lowerDesign 拆分成小块，base64_decode() 存在大量数据问题

# php - 持久化函数是如何工作的？

> ID：13720928
> 
> 赞同：1
> 
> 时间：2012-12-05T10:20:41.143
> 
> 标签：php, persistent-connection

PHP 有一些著名函数的持久版本，例如[mysql_pconnect](http://php.net/manual/en/function.mysql-pconnect.php)（已弃用）或[pfsockopen](http://php.net/manual/en/function.pfsockopen.php)

根据我的阅读，我了解到此类函数会缓存第一次调用产生的资源并在需要时重用。

*   但是例如 pfsockopen 缓存时套接字会发生什么？
*   它仍然打开并连接吗？
*   如果是这样，在“睡眠”时间收到的潜在数据会发生什么？
*   这种缓存连接的 TTL 是多少？

长话短说，所有“p”功能如何在后台真正起作用？关于这一切的官方文档几乎为零

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T10:44:11.903

有问题的资源并没有真正缓存，不是缓存的真正含义。连接一直保持打开状态，直到脚本终止或调用适当的函数来关闭它（所以不要调用，例如`mysql_close()`，如果你想使用持久连接）。

现在，真正的问题是——“直到脚本终止”是什么意思。这可能会有所不同或不可能，具体取决于当前使用的 PHP SAPI，但让我们以支持 HTTP/1.1 + mod_php 的 Apache 为例 - 它是最流行和最容易解释的......

HTTP/1.1 是必需的，因为它具有 Keep-Alive - 这对于无状态协议来说相当奇怪。当您访问页面时，Apache 在线程或新系统进程下运行您的 PHP 脚本。这里有一个问题——你的脚本确实完整地执行了，但是 Apache 不会终止有问题的线程或进程，允许它保持开放的资源的持久性。它是如何完成的，我不确定我能否解释，但是使用 Keep-Alive，您的下一个 HTTP 请求将由 Apache 附加到*相同的*线程或进程 ID，从而可以重用该资源。第二部分更多的是基本的完整性检查 - 如果您使用与创建它相同的“选项”和/或凭据，则只能附加到持久连接。`mysql_connect()`使用不同的用户名 - 它将创建一个新连接并且不会重用旧连接（它的签名不匹配）。但鉴于假设重新执行了相同的脚本，这在大多数情况下只是一种“形式”。

我希望这对你有意义，为了完全理解它是如何工作的，我花了几个小时的试验。[您可以在php.net](http://php.net/manual/en/features.persistent-connections.php)上阅读有关它的更多信息- 文章名为“持久数据库连接”，但这只是因为最初持久连接仅适用于数据库 - 所描述的行为对于所有其他等价物都是正确的。

编辑：

忘记回答您更具体的问题：

*   但是例如 pfsockopen 缓存时套接字会发生什么？

    什么都没有——它只是保持活力，正如上面已经解释的那样。

*   它仍然打开并连接吗？

    是的

*   如果是这样，在“睡眠”时间收到的潜在数据会发生什么？

    它等着你来阅读。

*   这种缓存连接的 TTL 是多少？

    特别是我无法回答 - 这可能取决于您传递给 p* 函数的选项、您的 php.ini 设置和/或您要连接的内容。它也可能是一个硬编码的值，并且对所有这些值都不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T11:00:26.623

当一个请求被处理时，有几个“层”的关闭机制会进行一些垃圾收集。如果您使用的 SAPI 不会在每次请求后丢弃所有内容（例如 fcgi 或 apache 处理程序），则某些数据结构会在请求之间“存活”。其中之一是 hashmap "称为" [`EG(persistent_list)`](http://devzone.zend.com/446/extension-writing-part-iii-resources/)，只需将其视为在请求之间未删除的 php 数组 $EG_presistent_list 。
现在，当您的脚本调用 pfosckopen($host, $port, ...) 时，实现会（或多或少-抱歉过于简单化）以下

```
$persistentKey = "pfsockopen__$host:$port";
$stream= $EG_persistent_list[$persistentKey];
if ( $stream ) {
    // this one looks up which module creates such a stream
    // and "asks" it to check whether this stream may still be working
    if ( !CHECK_LIVENESS($stream) ) {
        $stream = null;
    }
}

if ( !$stream ) {
    $stream = createANewOne(...);
    $EG_persistent_list[$persistentKey] = $stream;
}
return $stream; 
```

（mysql_pconnect() 实现的工作方式有点不同 - 但只有一点点；它仍然会查找类似 $EG_persistent_list["mysql_$host_$port..."] 的条目，如果不是则在其中放置一个新条目展示）。

在请求之间，套接字没有任何反应，或多或少就像您的脚本执行了[sleep($n)](http://docs.php.net/Sleep)一样。如果在下次返回缓存资源时查找资源时，流的处理程序实现说“它可能仍然可以”。

看：

*   php_fsockopen_stream(INTERNAL_FUNCTION_PARAMETERS, int persistent) 在[http://svn.php.net/viewvc/php/php-src/trunk/ext/standard/fsock.c?revision=321634&view=markup](http://svn.php.net/viewvc/php/php-src/trunk/ext/standard/fsock.c?revision=321634&view=markup)
*   _php_stream_xport_create(...) 在[http://svn.php.net/viewvc?view=revision&revision=321634](http://svn.php.net/viewvc?view=revision&revision=321634)
*   [http://svn.php.net/viewvc/php/php-src/trunk/main/streams/streams.c?revision=324324&view=markup](http://svn.php.net/viewvc/php/php-src/trunk/main/streams/streams.c?revision=324324&view=markup)中的 php_stream_from_persistent_id(...)

# postgis - 使用 geodjango 从 Poligon 列表中搜索一个点

> ID：13720929
> 
> 赞同：0
> 
> 时间：2012-12-05T10:20:43.357
> 
> 标签：postgis, geodjango

我正在尝试使用 geodjango 开发一个查询构建器。我想知道一个点是否在给定的多面体列表中。Django 数据库 API 有 "__in" 在列表中查找数据。有没有类似的geodjango查询？如果否，这是进行此搜索的最佳方法。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T16:08:39.507

您可以使用[包含](https://docs.djangoproject.com/en/dev/ref/contrib/gis/geoquerysets/#contains)

```
testpoint = Point(1.0, 2.0)
MyPolyTable.objects.filter(poly__contains=testpoint) 
```

# objective-c - 如何将解析的 XML 信息应用于 UIView ？目标 C

> ID：13720932
> 
> 赞同：0
> 
> 时间：2012-12-05T10:20:54.860
> 
> 标签：objective-c, ios, xcode

我正在创建一个应用程序，其中我必须请求以 XML 格式提供响应的服务器，就像这样

```
<?xml version="1.0" encoding="utf-8" ?>
- <playlist>
  <id>CTx8wE0GMzGvZYeg</id>
  <title>playlist_ios</title>
  <layout_size>640,480</layout_size>
  <split_events />
- <content>
  <time_offset>0</time_offset>
  <type>image</type>
  <file>file_CT9QhPWBFpZ2ym7c.png</file>
  <position>0,0,640,480</position>
  <duration>59</duration>
  </content>
  </playlist> 
```

所以这个 XML 文件有标题、布局大小、图像（我在本地下载的）、位置和持续时间。我正在解析这些字符串格式的值..我需要将它们加载到视图控制器..我该怎么做？

# objective-c - 将 CIFilter 应用于图像会产生空的 UIImage

> ID：13720934
> 
> 赞同：1
> 
> 时间：2012-12-05T10:21:13.893
> 
> 标签：objective-c, xcode, cocoa-touch, core-image, cifilter

我正在尝试将 CIFilter 应用于从`UIImagePickerController`. 这是我正在使用的代码：

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info {

    [picker dismissViewControllerAnimated:YES completion:nil];

    UIImage *userImage = info[UIImagePickerControllerOriginalImage];
    UIImage *croppedImage = [UIImage imageWithCGImage:CGImageCreateWithImageInRect(userImage.CGImage, CGRectMake(0, 320, 640, 640))];

    CIContext *context = [CIContext contextWithOptions:nil];
    CIImage *img = [CIImage imageWithCGImage:croppedImage.CGImage];
    CIFilter *adjustFilter = [CIFilter filterWithName:@"CILineOverlay"];

    [adjustFilter setDefaults];
    [adjustFilter setValue:img forKey:kCIInputImageKey];
    [adjustFilter setValue:[NSNumber numberWithFloat:1.0] forKey:@"inputNRSharpness"];
    CIImage *adjustedImage = [adjustFilter valueForKey:kCIOutputImageKey];
    UIImage *newImage = [UIImage imageWithCIImage:[context createCGImage:adjustedImage fromRect:adjustedImage.extent]];

    NSLog(@"%@", newImage);

    self.myImageView.image = newImage;

} 
```

现在，当应用过滤器的过程完成时（没有弹出错误），图像视图中看不到任何图像（尽管控制台会记录`<UIImage: 0x8b91810>`）。如果我跳过处理部分并将未过滤`croppedImage`的内容分配给图像视图，则显示效果很好。

那么我在这里做错了什么？我想使用此代码来处理屏幕截图，但我已经用照片尝试过它并得到了相同的（零）结果。

# java - java GWT服务器创建套接字

> ID：13720935
> 
> 赞同：0
> 
> 时间：2012-12-05T10:21:15.997
> 
> 标签：java, sockets, gwt

我有一个关于 GWT 的问题。假设我的 GWT 客户端应用程序需要连接到 TCP 套接字，做一些事情并关闭它。现在它在 GWT 中几乎不可能，因为套接字在客户端不起作用。

但实际上我可以在应用程序的服务器端创建套接字，如下所示：

```
package com.kurjerzy.testGWT.server;

import java.net.Inet4Address;
import java.net.InetAddress;
import java.net.Socket;

import com.kurjerzy.testGWT.client.GreetingService;
import com.kurjerzy.testGWT.shared.FieldVerifier;
import com.google.gwt.user.server.rpc.RemoteServiceServlet;

/**
 * The server side implementation of the RPC service.
 */
@SuppressWarnings("serial")
public class GreetingServiceImpl extends RemoteServiceServlet implements
        GreetingService {

    public String greetServer(String input) throws IllegalArgumentException {
        // Verify that the input is valid. 
        if (!FieldVerifier.isValidName(input)) {
            // If the input is not valid, throw an IllegalArgumentException back to
            // the client.
            throw new IllegalArgumentException(
                    "Name must be at least 4 characters long");
        }

        String serverInfo = getServletContext().getServerInfo();
        String userAgent = getThreadLocalRequest().getHeader("User-Agent");

        // Escape data from the client to avoid cross-site script vulnerabilities.
        input = escapeHtml(input);
        userAgent = escapeHtml(userAgent);

        String rStr = null;

        try {
            InetAddress addr = Inet4Address.getByName( "google.com" );
            Socket s = new Socket( addr , 80 );
            rStr = "connected!";
        } catch ( Exception e ) {
            rStr = "e: " + e.getMessage();
        }

        return "Hasdasdello, " + input + "!<br><br>I am running " + serverInfo
                + ".<br><br>It looks like you are using:<br>" + userAgent + "<br>rStr=" + rStr;
    }

    /**
     * Escape an html string. Escaping data received from the client helps to
     * prevent cross-site script vulnerabilities.
     * 
     * @param html the html string to escape
     * @return the escaped string
     */
    private String escapeHtml(String html) {
        if (html == null) {
            return null;
        }
        return html.replaceAll("&", "&amp;").replaceAll("<", "&lt;")
                .replaceAll(">", "&gt;");
    }
} 
```

但不幸的是，serverlet 没有创建套接字连接的权限，它会引发异常。

任何想法如何实现这一点？

我想要实现的是：

1) 拥有与服务器建立连接的 native-java、android 和 gwt 实时游戏客户端

2) 拥有一台服务器，一次性为所有客户端提供逻辑服务

因此 native-java 和 android 客户端可以使用传统的 tcp 套接字连接到服务器。现在我想允许从 html5 环境连接到同一个游戏服务器，但我不知道应该使用什么连接传输......

我可能的想法是：

a) 使 serverlet 接受 rpc 调用并使用套接字与游戏服务器通信（但如何传递被拒绝的权限？..）

b) 让 gwt 客户端使用一些第 3 方 javascript 套接字库并直接连接到游戏服务器（但哪个好用？）

也许你有更好的想法？

游戏是回合制的，所以它的代码不是时间关键的，但数据是实时传输的（延迟是可以接受的，但必须始终保持连接，以通知第二个玩家第一个玩家的动作）

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T10:49:30.417

您是否调查过 html5 中的 Web Sockets API -

1) [http://code.google.com/p/gwt-comet/wiki/WebSockets](http://code.google.com/p/gwt-comet/wiki/WebSockets)（仅限 Chrome）

2)[哪些浏览器支持 HTML5 WebSocket API？](https://stackoverflow.com/questions/1253683/what-browsers-support-html5-websocket-api)

3) [http://www.html5rocks.com/en/tutorials/websockets/basics/](http://www.html5rocks.com/en/tutorials/websockets/basics/)

此外，`PlayN , Titanium , PhoneGAP`如果您还没有，您可以快速浏览一下。您的问题表明您正在尝试手动处理低级别的东西。浏览上述技术。他们可能已经解决了这些问题。

# c++ - c++定义16位（高）颜色

> ID：13720937
> 
> 赞同：8
> 
> 时间：2012-12-05T10:21:23.587
> 
> 标签：c++, colors, color-picker, 16-bit

我正在开发一个带有 TFT 触摸屏的项目。这个屏幕有一个包含的库。但是经过一些阅读，我仍然没有得到任何东西。在库中有一些关于颜色的定义：

```
/* some RGB color definitions                                                 */
#define Black           0x0000      /*   0,   0,   0 */
#define Navy            0x000F      /*   0,   0, 128 */
#define DarkGreen       0x03E0      /*   0, 128,   0 */
#define DarkCyan        0x03EF      /*   0, 128, 128 */
#define Maroon          0x7800      /* 128,   0,   0 */
#define Purple          0x780F      /* 128,   0, 128 */
#define Olive           0x7BE0      /* 128, 128,   0 */
#define LightGrey       0xC618      /* 192, 192, 192 */
#define DarkGrey        0x7BEF      /* 128, 128, 128 */
#define Blue            0x001F      /*   0,   0, 255 */
#define Green           0x07E0      /*   0, 255,   0 */
#define Cyan            0x07FF      /*   0, 255, 255 */
#define Red             0xF800      /* 255,   0,   0 */
#define Magenta         0xF81F      /* 255,   0, 255 */
#define Yellow          0xFFE0      /* 255, 255,   0 */
#define White           0xFFFF      /* 255, 255, 255 */
#define Orange          0xFD20      /* 255, 165,   0 */
#define GreenYellow     0xAFE5      /* 173, 255,  47 */
#define Pink                        0xF81F 
```

这些是 16 位颜色。但是它们如何从：0、128、128（深青色）到 0x03EF。我的意思是，如何将 16 位颜色转换为 uint16？这不需要在代码中有答案，因为我只想在库中添加一些颜色。一个在线转换器的链接（我找不到）也可以:)

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T10:35:46.363

从这些可以很容易地找出公式：

```
#define Red             0xF800      /* 255,   0,   0 */  
#define Magenta         0xF81F      /* 255,   0, 255 */
#define Yellow          0xFFE0      /* 255, 255,   0 */ 
```

F800 设置了 5 个 MSB 位，而 FFE0 设置了 5 个 LSB 未设置。0xF81F 显然有 5 个 LSB 和 5 个 MSB 的集合，这证明格式是 RGB565。

将值 173 转换为红色的公式并不像看起来那么简单——您不能简单地删除 3 个最低有效位，而是必须进行线性插值以使 255 对应于 31（或绿色 255 对应于63）。

```
NewValue = (31 * old_value) / 255; 
```

（这仍然只是一个截断除法——可能需要适当的舍入）

使用适当的舍入和缩放：

```
Uint16_value = (((31*(red+4))/255)<<11) | 
               (((63*(green+2))/255)<<5) | 
               ((31*(blue+4))/255); 
```

**编辑**按照 JasonD 的有益建议添加了括号。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-05T10:27:05.410

您需要知道显示的确切格式，仅“16 位”是不够的。

有 RGB555，其中三个分量中的每一个都有 5 位。这将总色彩空间减少到只有 32,768 种颜色，浪费了一点点，但管理起来非常简单，因为每个组件都有相同数量的阴影。

还有 RGB565，其中绿色分量被赋予 6 位（因为人眼对绿色更敏感）。这可能是您使用的格式，因为“深绿色”示例是`0x03e0`二进制中的`0b0000 0011 1110 0000`. 由于那里有 6 位设置为 1，我猜这是绿色组件的总分配并显示它的最大值。

然后是这样的（每四位用空格分隔并重新使用虚构的`0b`前缀）：

```
0bRRRR RGGG GGGB BBBB 
```

当然，字中的位顺序也可能不同。

将三元组数字转换为位压缩字的任务在具有位操作运算符的典型编程语言中很容易完成。

在 C 中，它通常在宏中完成，但我们也可以有一个函数：

```
#include <stdint.h>

uint16_t rgb565_from_triplet(uint8_t red, uint8_t green, uint8_t blue)
{
  red   >>= 3;
  green >>= 2;
  blue  >>= 3;
  return (red << 11) | (green << 5) | blue;
} 
```

请注意，以上假设组件的完全 8 位精度，因此组件的最大强度为 255，而不是您的示例中的 128。如果色彩空间确实使用 7 位组件，则需要进行一些额外的缩放。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-05T10:35:40.840

看起来您使用的是 RGB565，前 5 位用于红色，然后 6 位用于绿色，然后 5 位用于蓝色。

您应该使用 0xF800 进行掩码并右移 11 位以获得红色分量（或移动 8 位以获得 0-255 的值）。使用 0x07E0 进行掩码并右移 5 位以获得绿色分量（或 3 位以获得 0-255 值）。使用 0x001F 进行掩码以获得蓝色分量（并左移 3 位以获得 0-255）。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-05T10:36:16.550

你的颜色是 565 格式。如果你用二进制写出来会更明显。

*   蓝色，(0,0,255) 为 0x001f，即 00000 000000 11111
*   绿色，(0, 255, 0) 为 0x07e0，即 00000 111111 00000
*   红色，(255, 0, 0) 为 0xf800，即 11111 000000 00000

要以这种格式将 24 位颜色转换为 16 位，只需屏蔽每个组件所需的高位，移位到位置，然后`OR`一起移动。

从 16 位转换回 24 位颜色，屏蔽每个组件，移动到位置，然后将高位复制到低位。

在您的示例中，似乎某些颜色已被缩放和舍入而不是移动。

我强烈建议使用位移方法而不是像 31/255 这样的因子进行缩放，因为位移不仅可能更快，而且应该会产生更好的结果。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-05T10:39:46.907

您显示的 3 部分数字适用于 24 位颜色。十六进制的 128 是 0x7f，但在您的颜色定义中，它被表示为 0x0f。同样，255 是 0xff，但在您的颜色定义中，它被表示为 0x1f。这表明您需要获取 3 部分数字并将它们向下移动 3 位（每种颜色丢失 3 位颜色数据）。然后将它们组合成一个 16 位数字：

```
uint16 color = ((red>>3)<<11) | ((green>>2)<<5) | (blue>>3); 
```

...从之前修改过，因为绿色使用 6 位，而不是 5 位。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-05T10:40:14.617

您需要知道每个颜色通道有多少位。所以是的，一种颜色有 16 位，但 RGB 分量都是这些位的某个子集。在您的情况下，红色是 5 位，绿色是 6，蓝色是 5。二进制格式如下所示：

```
RRRRRGGG GGGBBBBB 
```

还有其他 16 位颜色格式，例如红色、绿色和蓝色，每个为 5 位，然后将剩余的位用作 alpha 值。

红色和蓝色通道的值范围是 from`0`到`2^5-1 = 31`，而绿色的范围是`0`to `2^6-1 = 63`。因此，要以您的形式转换颜色，`(0->255),(0->255),(0->255)`您需要将值从一种映射到另一种。例如，`128`范围内的红色值`0->255`将映射到`(128/255) * 31 = 15.6`具有范围的红色通道中`0-31`。如果我们向下取整，我们得到以五位`15`表示的。`01111`同样，对于绿色通道（六位），您将获得`011111`. 所以颜色`(128,128,128)`将映射到`01111011 11101111`十六`0x7BEF`进制。

您也可以将其应用于其他值：`0,128,128`成为`00000011 11101111`which is `0x03EF`。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-12-05T10:51:19.627

您的代码中显示的颜色是 RGB565。如图所示

```
#define Blue            0x001F      /*   0,   0, 255 */ 
#define Green           0x07E0      /*   0, 255,   0 */ 
#define Red             0xF800      /* 255,   0,   0 */ 
```

如果您只是想在此`#defined`列表中添加一些新颜色，从每个通道的 16 位 UINT 转换的最简单方法就是将您的值向下移动以松开低位，然后移动和（或）它们在 16 位RGB 中的位置价值。不过，这很可能会产生条带伪影，并且可能会有更好的转换方法。

IE

```
UINT16 blue = 0xFF;
UINT16 green = 0xFF;
UINT16 red = 0xFF;

blue  >>= 11; // top 5 bits
green >>= 10; // top 6 bits
red   >>= 11; // top 5 bits

UINT16 RGBvalue = blue | (green <<5) | (red << 11) 
```

您可能需要在移位后屏蔽任何不需要的杂散位，因为我不确定这是如何工作的，但我认为上面的代码应该可以工作。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-05-18T17:35:12.633

基于 unwind 的回答，特别是使用 Arduino 2.8" TFT Touchscreen(v2) 的 Adafruit GFX 库，您可以将此函数添加到您的 Arduino 草图中并使用它内联来计算 rgb 的颜色：

```
uint16_t getColor(uint8_t red, uint8_t green, uint8_t blue)
{
  red   >>= 3;
  green >>= 2;
  blue  >>= 3;
  return (red << 11) | (green << 5) | blue;
} 
```

现在您可以像这样内联使用它，用一个在 x0,y0 处创建一个 20x20 正方形的函数进行说明：

```
void setup() {
  tft.begin();
  makeSquare(getColor(20,157,217));
}

unsigned long makeSquare(uint16_t color1) {
  tft.fillRect(0, 0, 20, 20, color1);
} 
```

可以在[此处找到 Adafruit GFX 库的文档](https://learn.adafruit.com/downloads/pdf/adafruit-gfx-graphics-library.pdf)

# python - 从 python 打开/运行 Excel 文件

> ID：13720940
> 
> 赞同：4
> 
> 时间：2012-12-05T10:21:31.983
> 
> 标签：python

我需要启动excel并直接从python打开一个文件。目前我正在使用：

```
import os
os.system('start excel.exe file.xls') 
```

但是我没有得到想要的结果。我想从本地目标打开一个文件（文件与程序位于同一文件夹中），但是此代码打开的是我的主（用户）目录中的同名文件，而不是我的程序目录中的文件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T10:28:04.040

问题是程序所在的目录没有被使用。当前工作目录是。所以你要找出你的程序在哪个目录，哪个python方便地为你准备了：

```
sys.path[0] 
```

并将目录更改为它：

```
os.chdir(sys.path[0]) 
```

或提供要打开的文件的完整路径

```
os.system('start excel.exe "%s\\file.xls"' % (sys.path[0], )) 
```

请注意，虽然 Windows 通常接受正斜杠作为目录分隔符，但命令 shell ( `cmd.exe`) 不接受，因此此处必须使用反斜杠。`start`是特定于 Windows 的，因此在这里对其进行硬编码并不是什么大问题。更重要的是要注意 Windows 不允许`"`在文件名中，所以这里的引用实际上会起作用（需要引用，因为路径很可能包含 Windows 上的空间），**但这样引用是个坏主意一般的！**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-09-13T16:40:14.037

您还可以定义 python 应该运行的目录。

```
import os

os.chdir('C:\\my_folder\\subfolder')

os.system('start excel.exe my_workbook.xlsx') 
```

1.  不要忘记在路径中使用反斜杠，并且每次都必须有两个。
2.  my_workbook.xlxs - 这里是你的文件名
3.  该文件必须在该文件夹中:)

# deployment - 如何查询厨师角色内的属性？

> ID：13720941
> 
> 赞同：3
> 
> 时间：2012-12-05T10:21:33.340
> 
> 标签：deployment, chef-infra

我正在使用[厨师](http://www.opscode.com/chef/)版本 10.16.2
我有一个角色（红宝石格式）。我需要访问其中一本食谱中的属性集

例如。

```
name "basebox"
description "A basic box with some packages, ruby and rbenv installed"

deployers = node['users']['names'].find {|k,v| v['role'] == "deploy" }

override_attributes {
  {"rbenv" => {
      "group_users" => deployers
    }
  }
}

run_list [ 
          "recipe[users]",
          "recipe[packages]",
          "recipe[nginx]",
          "recipe[ruby]"
         ] 
```

我正在使用 chef-solo，所以我不能使用[http://wiki.opscode.com/display/chef/Search#Search-FindNodeswithaRoleintheExpandedRunList上给出的搜索](http://wiki.opscode.com/display/chef/Search#Search-FindNodeswithaRoleintheExpandedRunList)

如何访问角色定义中的节点属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T16:12:49.050

角色是 JSON 数据。

也就是说，当你用knife将角色Ruby文件上传到服务器时，它们会被转换为JSON。考虑这个角色：

```
name "gaming-system"
description "Systems used for gaming"
run_list(
  "recipe[steam::installer]",
  "recipe[teamspeak3::client]"
) 
```

当我用 上传它时`knife role from file gaming-system.rb`，我在服务器上有这个：

```
{
  "name": "gaming-system",
  "description": "Systems used for gaming",
  "json_class": "Chef::Role",
  "default_attributes": {
  },
  "override_attributes": {
  },
  "chef_type": "role",
  "run_list": [
    "recipe[steam::installer]",
    "recipe[teamspeak3::client]"
  ],
  "env_run_lists": {
  }
} 
```

Ruby DSL 的原因是它比 JSON “更好”或“更容易”编写。比较行和语法，很容易看出哪个更适合新用户（可能不熟悉 JSON）。

该数据通过 API 使用。如果您需要对节点上的属性执行任何逻辑，请在配方中执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T18:53:36.107

不确定我是否 100% 遵循，但如果您想访问由配方中的角色设置的属性，那么您只需像任何其他节点属性一样调用它。例如，在您介绍的情况下，假设节点在其 run_list 中具有 basebox 角色，您只需调用：

```
node['rbenv']['group_users'] 
```

角色属性合并到节点中。

高温高压

# google-maps-api-3 - 谷歌地图动态改变语言（异步加载）

> ID：13720942
> 
> 赞同：7
> 
> 时间：2012-12-05T10:21:35.983
> 
> 标签：google-maps-api-3

有没有办法在地图选项字段中加载语言？
像这样的东西：

```
var mapOptions = {
  center : new google.maps.LatLng(43.97918, 53.716647),
  zoom : 10,
  mapTypeId : google.maps.MapTypeId.ROADMAP,
  language : 'fr'
}; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T11:21:09.887

找到了！

使用谷歌脚本[https://www.google.com/jsapi](https://www.google.com/jsapi)

`google.load('maps', '3.x', { 'other_params' : 'sensor=true&libraries=geometry&language=' + langCode, 'callback' : mapsLoadeds });`

mapsLoaded 执行用于创建地图的通用代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T17:14:57.093

您可以`language`在 google maps 的 url 中使用该参数：

```
<script src="http://maps.googleapis.com/maps/api/js?sensor=false&language=ja">
</script> 
```

# windows - 是否可以在 PositionChanged 事件处理程序中更改 Geolocator 的 DesiredAccuracy 和 ReportInterval？

> ID：13720945
> 
> 赞同：1
> 
> 时间：2012-12-05T10:21:48.620
> 
> 标签：windows, silverlight, gps, windows-phone, windows-phone-8

我想改变PositionChanged Event Handler中的DesiredAccuracy和ReportInterval，这样就可以动态改变不同位置的位置更新频率。

我做了这样的事情，

```
void geolocator_PositionChanged(Geolocator sender, PositionChangedEventArgs args)
{
    geolocator.StatusChanged -= geolocator_StatusChanged;
    geolocator.PositionChanged -= geolocator_PositionChanged;
    geolocator.DesiredAccuracy = PositionAccuracy.High;
    geolocator.ReportInterval = 5 * 1000;
    geolocator.StatusChanged += geolocator_StatusChanged;
    geolocator.PositionChanged += geolocator_PositionChanged;
} 
```

但问题是我得到了

> $exception {System.Exception：操作中止（来自 HRESULT 的异常：0x80004004 (E_ABORT)）

在

> Windows.Devices.Geolocation.Geolocator.put_DesiredAccuracy（PositionAccuracy 值）

我不理解这个例外，因为它没有说明原因。

我怎样才能实现这一点（动态更改准确性和报告间隔）？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T13:03:37.600

根据[这篇 Microsoft 文章](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj206956%28v=vs.105%29.aspx)，您的异常表明您已从手机设置中禁用了定位服务：

```
catch (Exception ex)
{
    if ((uint)ex.HResult == 0x80004004)
    {
        // the application does not have the right capability or the location master switch is off
        StatusTextBlock.Text = "location  is disabled in phone settings.";
    }
    //else
    {
        // something else happened acquring the location
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T01:45:54.190

最好在更改这些属性之前使用 GeoCoordinateWatcher 并调用 Stop()/Start()。与 GeoCoordinateWatcher 相比，使用 GeoLocator有[一些优势](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff431800%28v=vs.105%29.aspx)，但对于大多数应用程序来说并不重要。由于 WP8 仍完全支持 GeoCoordinateWatcher，如果可行，您可能更容易切换到它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-19T14:34:50.617

正如您在代码中所做的那样，删除所有处理程序`StatusChanged`和`PositionChanged`需要能够修改`ReportInterval`等。否则将引发此异常（0x80004004）。

就我而言，删除所有处理程序不是一个选项，因为我`Geolocator` [在我的 WP8 应用程序中使用 以使我的应用程序在后台保持活动状态](http://msdn.microsoft.com/library/windows/apps/jj662935(v=vs.105).aspx)。删除最后一个处理程序也会暂停我的应用程序，因为从 WP 的角度来看，没有理由让应用程序在后台保持活动状态。

我发现可以通过创建一个临时的来解决这个问题`Geolocator`：

```
// Wire up a temporary Geolocator to prevent the app from closing
var tempGeolocator = new Geolocator
{
    MovementThreshold = 1,
    ReportInterval = 1
};
TypedEventHandler<Geolocator, PositionChangedEventArgs> dummyHandler = (sender, positionChangesEventArgs2) => { };
tempGeolocator.PositionChanged += dummyHandler;

Geolocator.PositionChanged -= OnGeolocatorOnPositionChanged;
Geolocator.ReportInterval = reportInterval;
Geolocator.PositionChanged += OnGeolocatorOnPositionChanged;

tempGeolocator.PositionChanged -= dummyHandler; 
```

这样应用程序就不会被 WP 杀死。请记住，重新绑定`PositionChanged`也会导致立即回调。

# c# - 日历选择的索引更改不会触发

> ID：13720947
> 
> 赞同：0
> 
> 时间：2012-12-05T10:21:52.473
> 
> 标签：c#, asp.net, calendar, selectedindexchanged

我有一个在选择日期时消失的日历..但是如果我再次选择相同的日期，日历选择的索引更改不会触发..

对于相同的日期选择，我该如何处理？

```
protected void Calendar1_SelectionChanged(object sender, EventArgs e)
{
   DateTime dt = new DateTime();
   dt = Calendar1.SelectedDate;

   string date;
   date = dt.Year.ToString() + "/" + dt.Month.ToString() + "/" + dt.Day.ToString();
   txtpickupdate.Text = date;
   Calendar1.Visible = false;
} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T10:34:48.487

如果您需要使用具有相同日期的功能。您必须编写 Calendar_Load 事件。

请看样本

```
 protected void Calendar1_Load(object sender, EventArgs e)
    {
        if(IsPostBack)
            {
            DateTime dt = new DateTime();
            dt=Calendar1.SelectedDate;
            string date;
            date = dt.Year.ToString() + "/" + dt.Month.ToString() + "/" + dt.Day.ToString();
            txtpickupdate.Text = date;
            Calendar1.Visible = false;
           }
    } 
```

# wpf - WPF 验证自定义触发器

> ID：13720957
> 
> 赞同：0
> 
> 时间：2012-12-05T10:22:22.607
> 
> 标签：wpf, validation

我有几个启用了验证的绑定文本框。

```
 <TextBox Text="{Binding Name, ValidatesOnDataErrors=True" />
  <TextBox Text="{Binding Password, ValidatesOnDataErrors=True" />
  <Button Command="{Binding OkCommand}"/> 
```

打开视图时，这些文本框默认无效，因为我在它们上有 NotEmpty vlaidation。

我希望验证仅在最后一刻发生，当我单击确定时。如何从代码（按钮的命令）触发验证？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T12:22:46.173

您可以像这样为您的绑定设置`UpdateSourceTrigger`to来显式触发验证-`Explicit`

```
<TextBox x:Name="textBox1"
         Text="{Binding Name, ValidatesOnDataErrors=True, 
                              UpdateSourceTrigger=Explicit}"/>
<TextBox x:Name="textBox2"
         Text="{Binding Password, ValidatesOnDataErrors=True, 
                                  UpdateSourceTrigger=Explicit}" />
<Button Click="Button_Click"/> 
```

在处理程序中，您必须像这样显式更新源 -

```
private void Button_Click(object sender, RoutedEventArgs e)
{
    textBox1.GetBindingExpression(TextBox.TextProperty).UpdateSource();
    textBox2.GetBindingExpression(TextBox.TextProperty).UpdateSource();
} 
```

# templates - 表达式引擎：嵌入模板变量不起作用

> ID：13720958
> 
> 赞同：1
> 
> 时间：2012-12-05T10:22:22.737
> 
> 标签：templates, expressionengine

我正在使用 EE {embed} 标签引入模板，并且如[文档](http://ellislab.com/expressionengine/user-guide/templates/embedding.html)中所述，我在标签中设置要在模板中使用的变量。

对于我嵌入的第一个模板，所有这些都可以正常工作，但是任何以下 {embed} 标记似乎都无法设置变量，并且模板中的所有变量都以纯文本形式输出？

**代码：**

```
//main-template.html

{embed="includes/header" body_class="home" title="What Is"}
{embed="page/sub-nav" nav_title="what-is"}
{embed="includes/footer" } 
```

头文件的 {title} 输出为“What Is”，子导航文件的 {nav_title} 输出为“{nav_title}”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T13:28:52.243

我忘记将“嵌入”关键字放入变量中。所以 {nav_title} 应该是 {embed:nav_title}

# amazon-web-services - 亚马逊弹性计算云

> ID：13720962
> 
> 赞同：0
> 
> 时间：2012-12-05T10:22:34.237
> 
> 标签：amazon-web-services, amazon-ec2

我创建了一个 ubuntu 32 位实例并在其上安装了 python 包。我的代码运行良好。现在我需要创建另一个与这个正在运行的实例完全相同的实例，但主要关注的是两个实例不应该共享数据库或mysql。我可以在两者中安装不同的mysql还是有其他出路？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T19:37:51.547

要基于您已经创建的实例启动其他 EC2 实例，只需转到您账户中的 EC2 仪表板，查看您的实例，选择您要克隆的实例，然后从“操作”菜单中选择“启动更多类似这样的实例”。您的新服务器请求将启动，您可以在该过程中更改您想要的任何参数（例如将新实例扔到不同的 AZ 等）

对于单独运行 MySQL，您有几个好的/简单的选项：

1.  如果 MySQL 引擎已安装在第一台服务器（您正在克隆的服务器）上，您可以在第二台服务器上运行并行引擎，因此它们都并行运行 - 并且完全相互独立。
2.  或者，您可以启动一个 MySQL 风格的 RDS 实例并简单地在其上运行两个数据库，一个用于您的两个 EC2 服务器中的每一个。这将减少您的 EC2 的 MySQL 开销，为您提供一个管理数据库的地方，并且从长远来看可能会减少管理麻烦。

# asp.net - 将一个列表的两个元素连接到一个索引中

> ID：13720963
> 
> 赞同：0
> 
> 时间：2012-12-05T10:22:34.767
> 
> 标签：asp.net, vb.net, vb.net-2010

我有一个我格式化的字符串，然后我使用`|`字符分割它。然后`|`我将每个之间的数据插入到一个列表中，每个列表都有一个唯一的索引。现在我正在尝试加入该列表中的两个元素，以便它们可以位于一个索引中。

例子

```
`List FruitSalad 

fruit.add("Apple")
fruit.add("Orange")
fruit.add("Tomatoes")
fruit.add("bananas")
fruit.add("Cucumber")

TextBox1.Text = fruit(0)
TextBox2.Text = fruit(1)
TextBox3.Text = fruit(3) 
```

通常`Apple`会有`index(0)`and`Orange`并且`bananas`会分别有`index(1)`and `index(2)`。问题是我想加入或合并`index(2)`，`index(1)`以便将两个元素合并到一个索引中。例如`index(1)`有`Apple and Orange`。

我怎么能把它分配给一个`TextBox.Text`，什么是正确的格式`TextBox.Text = fruit(?)`。我试过了`fruit.Join(2)(1)`，`String.Join(result(2)(1).ToArray)`但是没有用。有什么建议么？问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T10:43:48.513

为什么不将两者连接起来

```
TextBox1.Text = fruits(1) & " and " & fruits(2) 
```

或者

```
TextBox1.Text = String.Format("{0} and {1}", fruits(1), fruits(2)) 
```

# javascript - Sproutcore 数据源：创建的记录应该如何保存在数据源中？

> ID：13720965
> 
> 赞同：0
> 
> 时间：2012-12-05T10:22:43.997
> 
> 标签：javascript, sql, database, record, sproutcore

创建并提交记录后`store`，我们如何“保存”它，以便在刷新浏览器时不会丢失数据库中的更新更改？目前，这是正在做的事情：

```
toBeAdded = Tree.store.createRecord(Tree.Note, 

                    {
                    guid: 324,
                    name: this.get('newItem'),
                    categoryId: categoryId,
                    content: "This is a newly added item"
                        }
                    );
          Tree.store.commitRecords(); 
```

我不熟悉 Sproutcore 的技术细节，因为我对此很陌生。任何形式的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T08:10:09.160

当您在 SC.Store 实例 (Tree.store) 上调用方法 commitRecords 时，数据应提交到您的服务器。为此，您必须在[SC.DataSource](http://docs.sproutcore.com/symbols/SC.DataSource.html)实例中实现方法 createRecords。

这是一个关于它的教程：[http ://wiki.sproutcore.com/w/page/12413058/Todos%2007-Hooking%20Up%20to%20the%20Backend](http://wiki.sproutcore.com/w/page/12413058/Todos%2007-Hooking%20Up%20to%20the%20Backend)

# c# - c# - CharacterToGlyphMap 包含某些字体的错误 Unicode 代码点

> ID：13720967
> 
> 赞同：0
> 
> 时间：2012-12-05T10:22:46.053
> 
> 标签：c#

我使用 GlyphTypeface 中的 CharacterToGlyphMap

[http://msdn.microsoft.com/en-us/library/ms635034.aspx](http://msdn.microsoft.com/en-us/library/ms635034.aspx)

让所有字符包含在任何字体中。如果我使用例如*Arial*，一切都是正确的，但对于某些字体，我会得到错误的代码点。

例如对于*Ebrima*，我得到了一些超出 Unicode 范围的代码点。Ebrima 字体中的最后一个字符是十六进制：FD3F (dec: 64831)，但 CharacterToGlyphMap 包含一些附加值，例如 (dec: 66688, 66689, 66690...)。上述示例的错误代码点可能是什么原因？

**编辑：**

我实现了自己的字符映射，对于某些字体，我的应用程序崩溃了，因为我使用

```
Convert.ToChar(unicodeCodePoint) 
```

这个问题的解决方案是限制字符的使用（感谢@AakashM），例如

```
foreach (KeyValuePair<int, ushort> item in glyphTypeface.CharacterToGlyphMap)
{
   if (item.Key >= Char.MinValue && item.Key <= Char.MaxValue)
   {
      limitedCharacterMap.Add(item.Key, item.Value);
   }
} 
```

# java - 在 JavaScript 中验证 ActionErrors

> ID：13720969
> 
> 赞同：0
> 
> 时间：2012-12-05T10:22:53.650
> 
> 标签：java, javascript, struts

是否可以在 JavaScript 中验证或查看 ActionErrors/ActionMessages？以便可以在屏幕上显示正确的 javascript 警报。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T10:31:05.537

Javascript 用于客户端验证，而 ActionErrors/ActionMessages 用于服务器端。

准确地说，Struts 验证是 Javascript 验证的替代方案。那么为什么要将它们结合起来呢？我觉得没有意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T07:34:31.280

是的你可以。

您必须将这两行添加到您的 jsp 文件中。

```
<script src="scripts/libs/staticStrutsJvs.js"></script>
<html:javascript formName="XXXForm" dynamicJavascript="true" staticJavascript="false" bundle="someBundleName" /> 
```

文件 staticStrutsJvs 是 struts 框架的一部分。这些行自动生成带有方法名称 validateXXXForm() 的 javascript 验证代码

最后，您必须在提交表单之前调用此方法。

```
<html:form action="/XXXAction" method="post" onsubmit="return validateXXXForm(this);"> 
```

# console - IE10 开发人员控制台和检查元素上的悬停事件

> ID：13720972
> 
> 赞同：2
> 
> 时间：2012-12-05T10:22:55.073
> 
> 标签：console, internet-explorer-10

与其再次更改浏览器，任何人都知道允许这种情况发生的技巧：

我在包含设置按钮的网站顶部有一个下拉菜单。当您将鼠标悬停在设置按钮上时，设置面板会显示，当您将鼠标悬停时，设置面板会隐藏。

在 chrome 中，如果我使用开发人员控制台检查该设置面板，当我将鼠标悬停在设置按钮上时，设置面板会弹出，我可以检查其中的元素。

在 IE10 中，当我将鼠标悬停在设置按钮上时，它只是检查文本而不是调出设置面板。

关于如何让 IE10 允许触发悬停事件的任何想法，因此我实际上可以检查菜单内的元素。

![在此处输入图像描述](../Images/c7f690214070ca3ee3e45cb8ebb0b035.png)

感谢您的输入！

# python - 通过 imp.load_module() 将不同的模块附加到列表中将成为相同的模块

> ID：13720983
> 
> 赞同：0
> 
> 时间：2012-12-05T10:23:40.077
> 
> 标签：python, plugins, python-3.x

我用 Python 3 编写。

我想为我的程序添加插件支持。我不想使用繁重的框架，所以我决定自己写一个最小的框架。

顺便说一句，插件需要按时间运行。重新运行时，我并不总是卸载和加载插件——插件会丢失所有数据。

我的文件夹结构在这里：

```
interfaces/
├── dummy
├── gmail
│   ├── __init__.py
│   └── __pycache__
│       └── __init__.cpython-33.pyc
└── hello
    ├── __init__.py
    └── __pycache__
        └── __init__.cpython-33.pyc 
```

然后，我写了一段代码来加载和执行插件：

```
#!/usr/bin/python3
import os
import imp

INTERFACES_FOLDER = './interfaces'
MAIN_MODULE = '__init__'

def search_plugins():
    plugins = []
    plugins_folders = os.listdir(INTERFACES_FOLDER)

    for i in plugins_folders:
        plugin_folder = os.path.join(INTERFACES_FOLDER, i)

        if not os.path.isdir(plugin_folder):
            continue
        if not MAIN_MODULE + '.py' in os.listdir(plugin_folder):
            continue

        info = imp.find_module(MAIN_MODULE, [plugin_folder])
        plugins.append({'name': i, 'info': info})
    return plugins

def load_plugin(plugin):
    return imp.load_module(MAIN_MODULE, *plugin["info"])

plugins_list = search_plugins()
plugins = []

for i in plugins_list:
    module = load_plugin(i)
    print(module)
    plugins.append(module)

print(plugins) 
```

输出：

```
# it works!
<module '__init__' from './interfaces/gmail/__init__.py'>
<module '__init__' from './interfaces/hello/__init__.py'>

# what's wrong?
[<module '__init__' from './interfaces/hello/__init__.py'>, 
 <module '__init__' from './interfaces/hello/__init__.py'>] 
```

如您所见，当我加载插件时，一切正常。但是当我将它们附加到列表时，不同的模块将变成同一个。

怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T11:12:33.127

您导入不同的模块，但名称相同（它们都称为“ **init** ”）。当您导入第二个模块时，Python 会注意到您已经导入了一个名为“ **init** ”的模块并返回它。

您应该导入的模块是“gmail”和“hello”模块。那可能行得通。

但是，我敦促您重新考虑编写自己的插件系统。这真的不是那么容易。快速搜索会发现几个插件系统，有些是轻量级的，有些不是那么多。大多数已被放弃，这表明这并不像您想象的那么容易。

Python 中可能使用最广泛、最灵活和最古老的插件系统是[Zope 组件架构](http://pypi.python.org/pypi/zope.component)。另请参阅[文档](http://docs.zope.org/zope.component/)。请注意，在 Python 3 中，您使用类装饰器而不是类主体语句。

另一个流行的插件系统是 Distribute 的“[入口点](http://packages.python.org/distribute/setuptools.html#dynamic-discovery-of-services-and-plugins)”。这是相当轻量级的，虽然我不知道你是否可以用它加载或卸载插件。

其他我从未看过的还有[Yapsy](http://pypi.python.org/pypi/Yapsy/1.9.2)，一个叫做“Plugins”的似乎被废弃了，另一个叫做“PyPlugin”也被废弃了，还有一个叫做“ [easy_plugins](http://pypi.python.org/pypi/easy_plugins/1.0) ”，它看起来很新，但还没有被废弃。

这[是插件管理器的示例代码](http://www.evanfosmark.com/2009/07/simple-event-driven-plugin-system-in-python/)。

# c# - 为过时的 C# 事件生成警告

> ID：13720990
> 
> 赞同：12
> 
> 时间：2012-12-05T10:24:01.450
> 
> 标签：c#, api, events, obsolete

有谁知道在使用 Obsolete 事件时让 Visual Studio C# 编译器发出构建警告的技巧或解决方法？

如果我创建一个带有公共事件的简单程序集并将 Obsolete 属性应用于该事件，当我引用该程序集并在另一个项目中订阅该事件时，编译器在我构建时不会发出警告（即使是最高警告级别或警告设置为错误）。

项目 1 中的事件声明：

```
 public class APIClass
    {
        [Obsolete("Obsolete in v2.0")]
        public event EventHandler ObsoleteEvent;
    } 
```

在 Project 2 中使用 Obsolete 事件不会导致生成警告：

```
 private void SubscribeToEvent(APIClass apiClass)
    {
        apiClass.ObsoleteEvent += delegate { };
    } 
```

当我打开源文件时，Visual Studio 将事件识别为已过时并将警告（或错误）添加到错误列表中： ![后台源处理识别警告](../Images/68b98dc99e5d8da1195e8158650b99d6.png)

但是，一旦我构建，警告就会消失并且不会出现在构建输出中： ![编译后警告消失](../Images/b086b8b5d2e72e16167dc5017ff2c7b7.png)

缺少的编译器警告似乎已[作为错误提交](https://connect.microsoft.com/VisualStudio/feedback/details/750318/obsolete-attribute-ignored-on-events-used-in-another-project)，但在修复之前，是否有任何方法可以在有人使用该事件时强制发出警告？否则无法提醒外部消费者他们需要更改调用代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T17:23:47.120

这似乎是一个公认的错误，但我可以想到一个解决方法，我希望它适用于您的情况。

event 关键字只是符合特定签名的多播委托的语法快捷方式，并以类似的方式巧妙地将自身暴露给属性。您可以尝试的一种解决方案是将事件设为私有，并公开一种添加侦听器的方法，然后将其标记为已过时：

```
public class APIClass
{
    [Obsolete("Obsolete in v2.0")]
    private event EventHandler ObsoleteEvent;

    [Obsolete("Obsolete in v2.0")]
    public void AddListener(EventHandler eh)
    {
        ObsoleteEvent += eh;
    }

}

private static void SubscribeToEvent(APIClass apiClass)
{
    //apiClass.ObsoleteEvent += delegate { };
    apiClass.AddListener(delegate { });
} 
```

我希望这项工作对您有用！祝你好运！

*** 编辑 ***

为了进一步说明为什么这是一个错误，请允许我向您展示此代码生成的 MSIL。类似于 event 关键字的行为类似于 property 关键字，它发出一个“add_ObsoleteEvent”和一个“remove_ObsoleteEvent”方法。您在编辑器中看不到它们，但它们是代码链接在一起的方式。

这是创建的 add 方法。请注意，'Obsolete' 属性未添加到编译器生成的方法中？

```
.method private hidebysig specialname instance void 
        add_ObsoleteEvent(class [mscorlib]System.EventHandler 'value') cil managed
{
  // Code size       48 (0x30)
  .maxstack  3

/// rest omitted 
```

这与我们编写的“AddListener”方法形成鲜明对比，我们手动添加了“Obsolete”属性。请注意编译器已将“过时”属性添加到方法中？

```
.method public hidebysig instance void  AddListener(class [mscorlib]System.EventHandler eh) cil     managed
{
  .custom instance void [mscorlib]System.ObsoleteAttribute::.ctor(string) = ( 01 00 10 4F 62 73     6F 6C 65 74 65 20 69 6E 20 76   // ...Obsolete in v
                                                                              32 2E 30 00 00 )                                      // 2.0..
  // Code size       10 (0xa)
  .maxstack  8

/// rest omitted. 
```

要使其在编译时远离编辑器发出警告，可以手动将其添加到 MSIL。我还没有尝试过，所以我不能说它是否有效。但我想我会进行此编辑以说明问题发生的原因。我希望它有帮助！

# php - PHP APC 不能在键中使用某些字符？

> ID：13720993
> 
> 赞同：1
> 
> 时间：2012-12-05T10:24:02.803
> 
> 标签：php, caching, apc, zend-server-ce

我有一些 zend 服务器 CE (php5.3) 的测试部分，一个在 Mac 10.8.2 上，一个在 Linux EC2 实例上，两者都使用安装附带的默认 APC 实现（zend 数据缓存）。

在两台机器上，我调用：

```
apc_store("Installation:1234:lastActivity", "x", 120); 
```

然后我为那个键调用 apc_fetch 。
在 Mac 上，apc_fetch 有效。
在 Linux 上，apc_fetch 返回 FALSE 并失败。

现在对于 Linux 机器上奇怪的东西，我做了一些测试：
1\. 如果我删除键 (y) 中的最后一个字符，apc_fetch 就可以工作了。
2\. 如果我将冒号 (:) 更改为斜线 (/)，apc_fetch 将起作用。

有什么想法吗？谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T11:00:30.650

Zend 服务器实际上并不使用 APC，而是使用它自己的实现——“Zend 数据缓存”。它们之间似乎存在一些细微的差异。

ZDC 拥有的一件事是“命名空间”，您可以在其中为键添加前缀“{name}::”，然后您可以删除所有以该前缀开头的键。

当字符串中有两个（非连续的）冒号时，可能存在错误。同时，只需调整密钥的结构即可避免该问题，这很容易。

# regex - 使用 wget 接受的名称后缀中的符号

> ID：13720998
> 
> 赞同：0
> 
> 时间：2012-12-05T10:24:15.957
> 
> 标签：regex, download, wget

通过使用 wget，
我注意到如果要接受的名称后缀有这样的符号`"_"`则不予考虑。

例子：

```
wget -A "*my_name*" does not work (it does not get my_name.html although it exists)
wget -A "*name*" it works (it gets my_name.html) 
```

我应该如何转义`"_"`名称后缀选项中的符号

这是一个例子：

```
wget \
-A "*JavaScript\_Dynamically*" \
-e robots=off \
--mirror -E -k -p -np -nc --convert-links  \
--wait=5 -c  \
http://computerone.altervista.org 
```