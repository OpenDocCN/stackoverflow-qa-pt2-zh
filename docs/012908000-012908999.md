# StackOverflow 问答 12908000-12908999

# jquery - 页面跳转到顶部 jquery .animate

> ID：12908002
> 
> 赞同：3
> 
> 时间：2012-10-16T05:21:59.127
> 
> 标签：jquery, jquery-animate, scrollto

我的问题是当我单击（固定位置）div 为另一个 div 设置动画时，整个页面会跳到顶部。我已经尝试过 preventDefault 并返回 false，但似乎无法解决问题！请帮忙。

这是脚本

```
$(document).ready(function(){

    $("#close").click(function(){
        $("#info").animate({ 
            width: "0",
            height:"0"
        }, 100 );

        $("#info").hide(),
        $(".container").animate({ 
            left:"0",
            width:"100%"
        }, 100 );
        return false;
    });

    $(".sidebar").click(function(evt){
        evt.preventDefault();
        $("#info").show(),
        $("#info").animate({ 
            width: "25%",
            height:"100%",
            left:"0"
        }, 100 );

        $(".container").animate({ 
            left: "25%",
            width:"75%"
            }, 100 );
        return false;
    });
}); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-16T05:33:31.987

如果触发元素是空锚

```
<a href="#">some val</a> 
```

然后位置哈希在单击后更改为“#”。由于找不到与空哈希对应的区域，浏览器会将页面滚动到顶部。
以下是您可以执行的操作：

```
$('a[href=#]').on('click', function(e){
     e.preventDefault();
 }); 
```

或者你可以像 10 年前那样做：将空的锚点 href 更改为空的 javascript 语句：

```
<a href="javascript:void();">some val</a> 
```

**更新**
查看标记后，我得到了解决方案。您所要做的就是确保您`.container`有滚动的能力。在制作动画时，元素会获得 css 属性`overflow : hidden`（我真的不知道它从哪里获得）并且那种会*重置*您的滚动位置。因此，您所要做的就是将其添加到您的样式表中：

```
.container{
    overflow: auto !important;
} 
```

# ruby - 将长固定数字转换为数组 Ruby

> ID：12908008
> 
> 赞同：9
> 
> 时间：2012-10-16T05:22:25.167
> 
> 标签：ruby, arrays, fixnum

ruby 中有没有一种方法可以将 fixnum like`74239`变成一个数组 like `[7,4,2,3,9]`？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-16T05:25:05.363

也许不是最优雅的解决方案：

```
74239.to_s.split('').map(&:to_i) 
```

输出：

```
[7, 4, 2, 3, 9] 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-16T05:36:56.877

对于这种事情，您不需要在字符串土地上往返：

```
def digits(n)
  Math.log10(n).floor.downto(0).map { |i| (n / 10**i) % 10 }
end

ary = digits(74239)
# [7, 4, 2, 3, 9] 
```

当然，这确实假设这`n`是积极的`n = n.abs`，如果需要，将其加入混合中可以解决这个问题。如果您需要涵盖非正值，则：

```
def digits(n)
  return [0] if(n == 0)
  if(n < 0)
    neg = true
    n   = n.abs
  end
  a = Math.log10(n).floor.downto(0).map { |i| (n / 10**i) % 10 }
  a[0] *= -1 if(neg)
  a
end 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-16T07:54:32.190

divmod 方法可用于一次提取一个数字

```
def digits n
  n= n.abs
  [].tap do |result|
    while n > 0 
      n,digit = n.divmod 10
      result.unshift digit
    end
  end
end 
```

一个快速的基准测试表明，这比使用 log 提前找到位数要快，这本身比基于字符串的方法要快。

```
bmbm(5) do |x|
  x.report('string') {10000.times {digits_s(rand(1000000000))}}
  x.report('divmod') {10000.times {digits_divmod(rand(1000000000))}}
  x.report('log') {10000.times {digits(rand(1000000000))}}
end

#=>
             user     system      total        real
string   0.120000   0.000000   0.120000 (  0.126119)
divmod   0.030000   0.000000   0.030000 (  0.023148)
log      0.040000   0.000000   0.040000 (  0.045285) 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-10-29T01:14:39.027

您可以转换为字符串并使用 chars 方法：

```
74239.to_s.chars.map(&:to_i) 
```

输出：

```
[7, 4, 2, 3, 9] 
```

它比分裂更优雅一点。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2020-05-11T08:20:55.797

从 Ruby 2.4 开始，整数（[`FixNum`在 2.4+ 中消失了](https://stackoverflow.com/questions/21372649/what-is-the-difference-between-integer-and-fixnum/21411269#21411269)）有一个内置`digits`方法，可以将它们提取到数字数组中：

```
74239.digits
=> [9, 3, 2, 4, 7] 
```

如果你想保持数字的顺序，只需链`reverse`：

```
74239.digits.reverse
=> [7, 4, 2, 3, 9] 
```

文档：[https ://ruby-doc.org/core-2.4.0/Integer.html#method-i-digits](https://ruby-doc.org/core-2.4.0/Integer.html#method-i-digits)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-09-27T18:10:38.053

您也可以使用`Array.new`代替`map`：

```
n = 74239

s = Math.log10(n).to_i + 1 # Gets the size of n

Array.new(s) { d = n % 10; n = n / 10; d }.reverse 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-11-02T12:13:10.967

在 Ruby 2.4 中，整数将有一个[digits 方法](https://ruby-doc.org/core-2.4.0_preview2/Integer.html#method-i-digits)。

# zend-framework - zend framework 1.11中的简单pdf下载功能

> ID：12908009
> 
> 赞同：1
> 
> 时间：2012-10-16T05:22:37.380
> 
> 标签：zend-framework

我的服务器中有pdf文件。我只是希望它可以被访问者下载，我收到了几个错误。我确实在我添加的视图文件中制作了一个简单的控制器和相应的视图文件

```
<a href="http://www.mysite.com/docs/tsap.pdf">download</a> 
```

我收到错误

```
Message: Action "tsapPdf" does not exist and was not trapped in __call() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T06:46:56.690

为您的 PDF 文件添加 baseurl 路径

例如。

```
<a href="<?php echo $this->baseUrl();?>/your/pdf/path" target='_blank'>download</a> 
```

可能这会奏效，

# web - 在一个特定域上找不到服务器

> ID：12908013
> 
> 赞同：0
> 
> 时间：2012-10-16T05:22:51.783
> 
> 标签：web, dns

如果域显示“找不到服务器”，有没有办法找到原因？

我的一个客户拥有一个域。现在他说他可以轻松访问它，但在我这边它说“找不到服务器” - 在所有浏览器上。我请我的一个住在另一个国家的朋友检查域名。据我的朋友说，他也可以访问该域。

现在，我想找出原因。为什么我是唯一看到“找不到服务器”的人？

请帮忙！

问候！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-28T08:43:48.330

Try clearing your local computer's DNS Cache in Windows or in Mac:

[http://docs.cpanel.net/twiki/bin/view/AllDocumentation/ClearingBrowserCache](http://docs.cpanel.net/twiki/bin/view/AllDocumentation/ClearingBrowserCache)

and your browser's cache also.

[http://www.wikihow.com/Clear-Your-Browser](http://www.wikihow.com/Clear-Your-Browser)'s-Cache

Best Regards

# winforms - 更改展开菜单方向

> ID：12908014
> 
> 赞同：0
> 
> 时间：2012-10-16T05:23:00.950
> 
> 标签：winforms, c#-3.0, menustrip

我想知道有一种方法可以改变菜单展开的方向。

我在表单底部有一个菜单，当我将鼠标悬停在某个项目上时，我希望它向上扩展。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T08:45:26.770

您是否手动将菜单条放置在[表单](/questions/tagged/menustrip "显示标记为“菜单条”的问题")底部或停靠？根据我的经验，如果你停靠它，那么菜单会自动向上扩展。

# model-view-controller - 在 MVC 中重定向或加载视图？

> ID：12908015
> 
> 赞同：0
> 
> 时间：2012-10-16T05:23:10.560
> 
> 标签：model-view-controller, language-agnostic

有时用户正在查找的文档在我们的数据库中不存在，我们想通知他们该文档不存在。我们可以将它们重定向到另一个页面或加载另一个视图，哪个合适？何时使用重定向视图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T05:25:44.023

@dpp 除了 URL 更改之外，我没有看到任何重大差异。如果您进行重定向，我想它会更干净。

如果没有找到，那么您应该发出或加载 404 页面。执行重定向会导致 302 代码，然后是“200 OK”，暗示有一些内容。404 表示“没有文件”。

像这样的东西会显示一个带有正确标题代码的 404 页面：

```
<?php
if ($page_not_found) {
   header('This is not the page you are looking for', true, 404);
   include('your_404_page.php');
   exit();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T05:25:53.583

为什么不返回带有 404 状态码的视图？

如果要将它们发送到站点的新部分，请使用重定向。也许是搜索页面或主页。

如果您想通知他们他们到达的 url 无效，请使用 Not Found View 和 404 状态代码。这也有利于 SEO。你不想向谷歌发送一堆 302 重定向，否则它会给你带来沉重的打击。

# twitter-bootstrap - 响应式 Twitter Bootstrap 导航栏的可折叠部分之外的内容

> ID：12908022
> 
> 赞同：1
> 
> 时间：2012-10-16T05:23:30.127
> 
> 标签：twitter-bootstrap, responsive-design, navbar

我正在尝试找到一种方法在响应式引导导航栏的精简视图中包含一些简单的文本内容，但到目前为止没有任何效果。我想要的只是导航栏右上角的一些简单的 [Username] [Log Off]，当屏幕太小或调整窗口大小时，它不会赶上其他被制作成可通过按钮访问的列表。我希望登录信息保持在该按钮的右侧，并且在全视图中也与右侧对齐（页面链接向左对齐）。

身体：

```
<body>
  <div class="navbar navbar-fixed-top">
    <div class="navbar-inner">
      <div class="container">
        <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </a>
        <a class="brand" href="~/Home/Index">Index</a>
          @Html.Partial("_TopMenuPartial")
          @Html.Partial("_LoginPartial")
      </div>
    </div>
  </div>
...
</body> 
```

_TopMenuPartial：

```
<div class="row">
  <div class="nav-collapse">
    <ul class="nav">
      <li class="divider-vertical"></li>
      <li class="active"><a href="~/Home/Index">Home</a></li>
      <li class="divider-vertical"></li>
      <li class="active"><a href="#">Link 2</a></li>
      <li class="divider-vertical"></li>
      <li class="active"><a href="#">Link 3</a></li>
      <li class="divider-vertical"></li>
      <li class="active"><a href="#">Link 4</a></li>
    </ul>
  </div>
</div> 
```

_登录部分：

```
@if (Request.IsAuthenticated)
{
    @Html.ActionLink(User.Identity.Name, "Manage", "Account", routeValues: null, htmlAttributes: new { @class = "username", title = "Manage" })
    using (Html.BeginForm("LogOff", "Account", FormMethod.Post, new { id = "logoutForm" })) {
    @Html.AntiForgeryToken()
        <a href="javascript:document.getElementById('logoutForm').submit()">Log off</a>
    }
}
else
{
    @Html.ActionLink("Register", "Register", "Account", routeValues: null, htmlAttributes: new { id = "registerLink" })
    @Html.ActionLink("Log in", "Login", "Account", routeValues: null, htmlAttributes: new { id = "loginLink" })
} 
```

感谢您提前提供任何帮助。我对处理这一切很陌生。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T12:21:59.673

您需要在可折叠菜单*之前放置​​文本和注销按钮。*如果将它放在菜单之后，折叠时它将在新行上。

```
<html>
<head>
   <link href="assets/css/bootstrap.css" rel="stylesheet">
   <link href="assets/css/bootstrap-responsive.css" rel="stylesheet">
</head>
<body>
  <div class="navbar navbar-fixed-top">
    <div class="navbar-inner">
      <div class="container">
        <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </a>
        <p class="navbar-text pull-right">
          Arnold Daniels
        </p>
        <a class="brand" href="#">Test</a>
        <div class="nav-collapse">
          <ul class="nav">
            <li class="active"><a href="#">Home</a></li>
            <li><a href="#">Link 2</a></li>
            <li><a href="#">Link 3</a></li>
            <li><a href="#">Link 4</a></li>
          </ul>
        </div>
      </div>
    </div>
  </div>

  <script src="assets/js/jquery.js"></script>
  <script src="assets/js/bootstrap-collapse.js"></script>
</body>
</html> 
```

# javascript - 在从 jquery/js 创建的窗口中放置一个打印按钮

> ID：12908024
> 
> 赞同：0
> 
> 时间：2012-10-16T05:23:50.810
> 
> 标签：javascript, jquery, window

我正在尝试在由 js 创建的窗口内添加一个打印按钮。但它显示`[object Window]`而不是显示链接或按钮。什么是替代解决方案？

```
jQuery(function($) {

$('a.print').click(function(){

var print_button = '<a href="javascript:window.print();" class="print">Print</a>';
var print_page = window.open('','Print','width=600,scrollbars=yes, height=700');
var html = print_page + '<h2><?php print t("Term & Condition"); ?></h2> <br/>' + 'somethings';
print_page.document.open();
print_page.document.write(html);
print_page.document.close();

return false;

}); 

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T05:28:50.833

如果我没看错你的问题，

```
function printDiv(divName) {
         // divName - is the div to be printed
         var printContents = document.getElementById(divName).innerHTML; // get the div content
         var originalContents = document.body.innerHTML; //get a copy of original content
         document.body.innerHTML = printContents; //set the div content to body
         window.print(); // print 
         document.body.innerHTML = originalContents; // revert back to original content
} 
```

传递要打印的 div 名称。有很多 jquery 插件可以帮助你。尝试谷歌搜索。

如果我弄错了你的问题，请纠正我，我也许可以帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T05:32:30.307

我不确定您要做什么。但我觉得这条线可能是错误的，因为它有`print_page`which 是一个对象，我认为它应该是`print_button`。并且`print_page`是一个对象，这就是你看到的原因`[object Window]`

`var html = print_page + '<h2><?php print t("Term & Condition"); ?></h2> <br/>' + 'somethings';`

正确的线是，

`var html = print_button + '<h2><?php print t("Term & Condition"); ?></h2> <br/>' + 'somethings';`

# java - 线程实际上是如何工作的？

> ID：12908025
> 
> 赞同：0
> 
> 时间：2012-10-16T05:23:53.827
> 
> 标签：java, multithreading, jakarta-ee, thread-safety

这是一个场景

我们有两个线程都访问同一段代码，并且该代码有一个变量，例如

诠释a = 200；

线程 A 进入并将其值更改为 a=300；

然后线程 B 访问这个变量，线程 B 会得到 200 还是 300？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T05:29:59.100

不保证两个线程以任何固定顺序执行；A 中的任何操作都可以先于 B 中的任何操作（前提是这些操作仍然在它们自己的线程中按顺序流动）。

因此，如果没有同步，A 可能会在 B 访问它之前或之后更改它的值。如果 A 在 B 之前更改它，则 B 看到 300；否则，B 看到 200。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T05:38:13.937

下面的状态图描述了线程状态。

![在此处输入图像描述](../Images/1fed898494c129f59ea0e38593c9611e.png)

*   **Runnable** - 等待轮到它被线程调度程序根据线程优先级选择执行。
*   **Running** — 处理器正在积极执行线程代码。它一直运行直到它被阻塞，或者使用这个静态方法 Thread.yield() 自愿放弃轮到它。由于上下文切换开销，不应频繁使用 yield()。
*   **等待**— 线程在等待某些外部处理（例如文件 I/O）完成时处于阻塞状态。
*   **休眠**— Java 线程通过这个重载方法被强制进入休眠（挂起）： `Thread.sleep(milliseconds), Thread.sleep(milliseconds, nanoseconds);`
*   **Blocked on I/O** — 将在 I/O 条件（如读取数据字节等）发生变化后转为可运行状态。
*   **同步时阻塞**- 获取锁时将移动到 Runnable。
*   **Dead** — 线程已完成工作。

关于您的示例，我们不知道哪个线程 B 将占用 200 或 300。如果您同时启动两个线程，因为您的方法将被同步，线程 B 应该看到 200（以防它是第一个或 300）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T05:41:07.890

由于编译器优化，线程可能会缓存数据，并且第二个线程可能看不到第一个线程的更改。这就是将“volatile”用于共享数据以避免多线程环境中的问题的地方

附录-嗯，我说的是跨线程的变量更改的可见性，而不是同步。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T05:37:33.667

如果您的线程同时访问您的一段代码，它将根据 jvm 级别的线程优先级发生。我们不能保证哪个线程将访问代码。如果是同步的，线程 B 必须等到线程 A 释放资源。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-16T05:40:53.957

上述执行的结果取决于一致性模型。

在顺序一致性模型中，执行的结果是所有指令都以某种全局顺序执行。在这种情况下，threadB 将获得值 300。

但是，现代机器使用较弱的一致性模型，其中所有同步（内存围栏指令）操作单独以全局顺序发生。

如果线程 B 的负载发生在线程 A 的存储完成之后，线程 B 将获得值 = 300。这是由缓存一致性协议保证的。但是，如果线程 B 的加载指令发生在线程 A 的存储之前/同时发生（由于某些优化），则线程 B 中的共享变量的值是未定义的。这将是线程B的加载和线程A的存储之间通过总线操作竞争条件的结果。

# asp.net-mvc - 创建自定义重定向列表 - asp.net mvc

> ID：12908027
> 
> 赞同：0
> 
> 时间：2012-10-16T05:24:07.243
> 
> 标签：asp.net-mvc, redirect

我会从哪里开始......做以下事情。

**为 asp.net mvc**添加**/**更新**/**删除自定义重定向****

 **我了解如何使用实体框架来构建我的模型/视图和控制器，但我不确定我应该如何处理重定向列表。我想控制不存在的控制器解析到的位置。

我可以使用全局手动执行此操作，但我希望经过身份验证的管理员能够控制它。

**例子：**

/home/contactus **>** /anotherControler/Action

/home/about **>** [http://championscentre.com/](http://championscentre.com/)

ETC...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T06:01:30.093

我认为这个逻辑最适合使用 IIS7 的 URL 重写模块。如果这不是一个选项，并且您需要将其内置到 Web 界面中，我认为您需要以下步骤：

1.  创建一个接受一个字符串参数的捕获所有路由并将其发送到处理重定向的控制器。
2.  让您的控制器操作在数据库中查找 URL 字符串并选择关联的重定向 URL。
3.  处理动作中的重定向。

像这样的任何方法的问题是您将无法为这些“路线”使用各种 HTML 帮助程序。**

# web-applications - jamroom：soundmanger 2，给媒体目录网址？

> ID：12908034
> 
> 赞同：1
> 
> 时间：2012-10-16T05:24:24.350
> 
> 标签：web-applications

在 Jamrrom 中，我应用了一个按钮播放器而不是一个`jr_flash_player`，但是当我提供媒体目录时，我遇到了一个 url 问题。这是导致 505 错误时的 url。

```
$song_url = $JAMROOM_URL."/media/".$BAND_ID."/".$SONG_ID."_hifi.mp3";

a href="<?php echo $song_url; ?>" title="360 Demo:" class="exclude button-exclude inline-exclude"></a>

url = <?php echo $song_url; ?> 
```

我使用声音管理器2 360 按钮播放器，包括soundmanager2.js 和index-rollup.js。如何在锚标签中传递媒体目录 url？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T00:49:41.703

需要一些澄清，但由于某种原因不能使用评论。

Jamroom 是基于 smarty 模板的，您上面的代码是 PHP。您在哪里尝试使用该代码？

如果您在包含歌曲信息的模板中，您可以使用 {$SONG_LOFI_PLAY_URL} 作为 lofi 版本的 url 或使用 {$SONG_HIFI_PLAY_URL} 作为 hifi 版本。

如果你想创建自己的 url，你可以像这样格式化它：/play.php?mode=song_hifi&band_id=99999&song_id=999999

查看 Nova 皮肤中的 player_audio.tpl 模板，了解更多不同 URL 的示例

# iphone - 在 Objective C 中显示字符串换行符和 Unicode Hexa Decimal Chars

> ID：12908037
> 
> 赞同：1
> 
> 时间：2012-10-16T05:24:54.560
> 
> 标签：iphone, ios, unicode

我是 Objective-CI 的新手，有一个这样的字符串，我需要在我的 iPhone 应用程序中显示它。有没有`UITextView`自动翻译 \n 和 \uxxx 字符？

> NSString *text = "你能推荐什么？\u201D\n\u201CI\u2019m 去烧烤，想和我一起吃点不一样的东西。你会推荐什么？\u201D\n\u201CI\u2019听说过一些低碳水化合物的啤酒，有什么好喝的吗？\u201D\n\u201CI 通常喝 (X)，但想尝试一些不同的东西。你能推荐一些吗？\u201D\n\n"。

我试过 `[WebView loadHTMLString:text baseURL:nil];` 了，但是没有用。任何帮助是极大的赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T06:29:59.933

你可以使用这样的东西：

```
NSString *str = [NSString stringWithUTF8String:"What can you recommend?\u201D\n\u201CI\u2019m going to a barbecue and looking to take something a little different with me. What would you recommend?\u201D\n\u201CI\u2019ve heard a bit about low-carb beers, are any of them any good?\u201D\n\u201CI normally drink (X), but want to try something different. Can you recommend something?\u201D\n\n"]; 
```

而不是将此 NSString 放在任何文本视图或文本字段中。请记住 stringWithUTF8String: 将 const char* 作为参数，因此前面没有“@”符号。

# java - 有两种equals()方法吗

> ID：12908040
> 
> 赞同：5
> 
> 时间：2012-10-16T05:25:08.047
> 
> 标签：java, overriding, equals

有两种equals方法？

```
public boolean equals(Bigram b) {
    return b.first == first && b.second == second;
    }

@Override public boolean equals(Object o) {
    if (!(o instanceof Bigram))
        return false;
    Bigram b = (Bigram) o;
    return b.first == first && b.second == second;
} 
```

对比这2个方法，当我们要重写**equal方法**时，为什么要定义一个参数为**Object类型**的equals方法！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T05:28:12.320

这其实是有充分理由的：

*   您需要该`equals(Object)`方法来覆盖超类的 equals 方法`java.lang.Object`
*   您通常*还*需要一个重载`equals(Bigram)`方法来处理编译器可以在编译时证明类型是 Bigram 的情况。这通过避免类型检查/强制转换来提高性能，并为您提供更好的代码类型检查。
*   最后，您可能希望以一种特殊的方式实现 equals 以测试与本身不是 Bigram 实例的对象的相等性。这应该小心使用（你真的希望不是 Bigram 实例的东西被认为等于 Bigram 吗？），但它确实有一些有效的应用程序（例如比较不同类型的集合对象的内容）。

但是，通常最好实现它们，以便一种方法调用另一种方法，例如：

```
public boolean equals(Bigram b) {
    return b.first == first && b.second == second;
}

@Override public boolean equals(Object o) {
    if (!(o instanceof Bigram)) return false;
    return equals((Bigram)o);
} 
```

这种方式更简洁，意味着您只需要实现一次相等测试逻辑（不要重复自己！）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T05:31:21.220

调用`equals()`方法的框架/API（如`containsKey()`地图、`contains()`列表等）`equals()`从 Object 类调用重写而不是重载版本。因此，您**需要**定义`public boolean equals(Object obj)`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-16T05:31:50.860

因为在覆盖的情况下，您无法缩小方法参数的范围，是的，返回类型可以是子类型，请检查下面的链接

[http://docs.oracle.com/javase/tutorial/java/IandI/override.html](http://docs.oracle.com/javase/tutorial/java/IandI/override.html)

# c# - 字典包含键，但崩溃说它不

> ID：12908044
> 
> 赞同：3
> 
> 时间：2012-10-16T05:25:26.080
> 
> 标签：c#, dictionary

嘿，我有以下这样的代码

```
public object RetrieveItemRun(int item)
{
    if (dictionary.ContainsKey(item))
    {
        MessageBox.Show("Retrieving" + item.ToString());
    }
    return dictionary[item];
} 
```

尝试获取 0 的键时它总是崩溃，消息框确实显示，因此 ContainsKey 方法为真，但是当我尝试从键中检索值时它崩溃说：

“给定的键不在字典中”

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-16T05:31:25.800

您正在尝试独立检索密钥是否存在。尝试将代码更改为：

```
 public object RetrieveItemRun(int item)
    {
        if (dictionary.ContainsKey(item))
        {
            MessageBox.Show("Retrieving" + item.ToString());
            return dictionary[item];
        }
        return null;
    } 
```

如果存在，则返回该项目。假设项目退出（外部检查），您的原始代码返回

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-16T05:41:28.247

您还可以使用`TryGetValue`方法来避免异常：

```
 public object RetrieveItemRun(int item)
    {
        object result;
        if (dictionary.TryGetValue(item, out result))
        {
            MessageBox.Show("Retrieving" + item);
        }

        return result;
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T05:55:59.377

一个简单的“其他”将为您完成这项工作。如果键为空， ContainsKey() 方法将引发此异常！你最好也处理一下。

```
 try
        {
            if(dictionary.ContainsKey(item))
            {
                MessageBox.Show("Retrieving" + item.ToString());
            }            
            else
            {
                MessageBox.Show("Value not found!");
                return null;
            }
        }
        catch(KeyNotFoundException)
        {
            MessageBox.Show("Null key!");
            return null; 
        } 
```

# objective-c - NSArray arrayWithObjects：如果 nil 是为了标记数组结束，我可以做...nil，nil]？

> ID：12908045
> 
> 赞同：4
> 
> 时间：2012-10-16T05:25:26.260
> 
> 标签：objective-c, nsarray, null

如果 nil 是为了标记参数的结束，那么我可以使用：

```
[NSArray arrayWithObjects:obj1, obj2, nil, nil, nil]; 
```

因为第一个 nil 标记数组结束，后面的两个 nil 将被忽略？

我得到了两个相反的答案，并将尝试一下。

更新：

我需要这样做的原因是我需要创建一个 UIAlertView，它可能有按钮：只有“确定”，或者“呼叫”和“取消”，所以“确定”或“取消”都是取消按钮，而“呼叫”在一种情况下是其他按钮，在其他情况下，我不需要任何其他按钮，这就是我需要这样做的原因。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-16T05:29:23.380

当您`nil`在创建时放置时，会添加`NSArray`最多的对象。`nil`之后的`nil`and 对象被忽略。只是为了完成，您也[不能添加](http://developer.apple.com/library/ios/#documentation/cocoa/reference/foundation/Classes/NSMutableArray_Class/Reference/Reference.html#//apple_ref/doc/uid/20000138-BABDEFAA) （例如使用方法）并且这样做会引发异常。`nil``NSMutableArray``addObject:`

您可以`[NSNull null];`在创建 NSArray 时放置。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-16T07:36:51.567

在末尾添加 nil 并不是要将 nil 添加到数组中，它只是 C 如何处理 ... 变量参数列表的工件。它与 NSArray 或 NSMutableArray 无关，你不能在其中存储 nil。

所以编译器是否接受，nil，nil，nil实际上是无关紧要的。编译器将在第一个 nil 处停止读取。并且首先编写该代码显示了对 obj C 集合和 var arg 方法的误解。

为什么不使用新的文字语法，只是说

```
NSArray *myArray = @[@"bla", @"bla", @"bla"]; 
```

无论哪种方式，额外的 nil 都与您提供的语法无关。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-16T05:28:11.337

是的，确切地说，这是可以做到的。第一个之后的 nil 将被忽略。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-16T05:42:59.930

为什么要故意将 nil 添加到数组中？我认为你最好停下来，三思而后行，为什么要这么做。如果您不确定数组的大小，可以随时使用 NSMutableArray。

# android - 在两个活动之间传递位图

> ID：12908048
> 
> 赞同：19
> 
> 时间：2012-10-16T05:25:45.713
> 
> 标签：android, android-layout

我正在开发一个绘画应用程序，我想在其中将位图图像从一个活动传递到另一个活动，但该项目没有响应。我将相对布局屏幕截图转换为位图并通过 Intent 传递，但问题没有解决。这是我的代码....

**绘图活动**

```
package com.newdrawing;
public class DrawingActivity extends Activity {
    private Bitmap  mBitmap;
    private Canvas  mCanvas;
    private Path    mPath;
    private Paint   mBitmapPaint;
    private Paint   mPaint;
    MyDrawView myDrawView;
    RelativeLayout parent;
    Bitmap bitmap;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_drawing);

        parent = (RelativeLayout) findViewById(R.id.singleparent);
        myDrawView = new MyDrawView(this);
        parent.addView(myDrawView);
        Activity context;
        //RelativeLayout item = (RelativeLayout)findViewById(R.id.item);
        View child = getLayoutInflater().inflate(R.layout.trans, null);
        parent.addView(child);   
   }

   public void color(View v) {
       switch (v.getId()) {
        case R.id.button3:
           parent.setBackgroundColor(Color.RED);
            break;
        case R.id.button4:
             parent.setBackgroundColor(Color.GREEN);
            break;
        case R.id.button5:
             parent.setBackgroundColor(Color.BLUE);
            break;
        }
    }
    public void save(View v) {
     parent.setDrawingCacheEnabled(true);
     bitmap=parent.getDrawingCache();
     parent.setDrawingCacheEnabled(false);
       Log.e("Bitmap",String.valueOf(bitmap));

    // send();

    //Canvas c = new Canvas(bitmap);
    //.draw(c);
    // File outputFile; // Where to save it
     //FileOutputStream out = new FileOutputStream(imageFile);
    // boolean success = bitmap.compress(CompressFormat.PNG, 100, out);
    // out.close();

    Intent i = new Intent(this, ImageActivity.class);
       ByteArrayOutputStream bs = new ByteArrayOutputStream();
     bitmap.compress(Bitmap.CompressFormat.PNG, 50, bs);
     byte[] byteArray = bs.toByteArray();
     i.putExtra("byteArray", byteArray);
     startActivity(i);
 }

 private void send()
 {
    Intent i9=new Intent(DrawingActivity.this,ImageActivity.class);
    i9.putExtra("Image",bitmap);
    startActivity(i9);
 }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_drawing, menu);
        return true;
    }
    public class MyDrawView extends View {

        public MyDrawView(Context c) {
            super(c);

            mPath = new Path();
            mBitmapPaint = new Paint(Paint.DITHER_FLAG);

            mPaint = new Paint();
            mPaint.setAntiAlias(true);
            mPaint.setDither(true);
            mPaint.setColor(0xFF000000);
            mPaint.setStyle(Paint.Style.STROKE);
            mPaint.setStrokeJoin(Paint.Join.ROUND);
            mPaint.setStrokeCap(Paint.Cap.ROUND);
            mPaint.setStrokeWidth(3);
        }

        @Override
        protected void onSizeChanged(int w, int h, int oldw, int oldh) {
            super.onSizeChanged(w, h, oldw, oldh);
            mBitmap = Bitmap.createBitmap(w, h, Bitmap.Config.ARGB_8888);
            mCanvas = new Canvas(mBitmap);
        }

        @Override
        protected void onDraw(Canvas canvas) {
            canvas.drawBitmap(mBitmap, 0, 0, mBitmapPaint);
            canvas.drawColor(Color.TRANSPARENT);

            canvas.drawPath(mPath, mPaint);
        }

        private float mX, mY;
        private static final float TOUCH_TOLERANCE = 4;

        private void touch_start(float x, float y) {
            mPath.reset();
            mPath.moveTo(x, y);
            mX = x;
            mY = y;
        }
        private void touch_move(float x, float y) {
            float dx = Math.abs(x - mX);
            float dy = Math.abs(y - mY);
            if (dx >= TOUCH_TOLERANCE || dy >= TOUCH_TOLERANCE) {
                mPath.quadTo(mX, mY, (x + mX)/2, (y + mY)/2);
                mX = x;
                mY = y;
            }
        }
        private void touch_up() {
            mPath.lineTo(mX, mY);
            // commit the path to our offscreen
            mCanvas.drawPath(mPath, mPaint);
            // kill this so we don't double draw
            mPath.reset();
        }

        @Override
        public boolean onTouchEvent(MotionEvent event) {
            float x = event.getX();
            float y = event.getY();

            switch (event.getAction()) {
                case MotionEvent.ACTION_DOWN:
                    touch_start(x, y);
                    invalidate();
                    break;
                case MotionEvent.ACTION_MOVE:
                    touch_move(x, y);
                    invalidate();
                    break;
                case MotionEvent.ACTION_UP:
                    touch_up();
                    invalidate();
                    break;
            }
            return true;
        }

        public void clear(){
            mBitmap.eraseColor(Color.TRANSPARENT);
            invalidate();
            System.gc();
        }
    }
} 
```

**图像活动**

```
package com.newdrawing;
public class ImageActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_image);
        Intent i =  getIntent();

        ImageView img=(ImageView)findViewById(R.id.image11);
     /*
       if(getIntent().hasExtra("byteArray")) 
       {

           Bitmap b = BitmapFactory.decodeByteArray(
                getIntent().getByteArrayExtra("byteArray"),0,getIntent().getByteArrayExtra("byteArray").length);        
          img.setImageBitmap(b);
           Log.e("Bitmap",String.valueOf(b));

       }*/

       Bundle extras = getIntent().getExtras();
       byte[] byteArray = extras.getByteArray("byteArray");

       Bitmap bmp = BitmapFactory.decodeByteArray(byteArray, 0, byteArray.length);
       img.setImageBitmap(bmp);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_image, menu);
        return true;
    }
 } 
```

**定位报告**

```
10-16 10:39:22.653: E/AndroidRuntime(339): FATAL EXCEPTION: main
10-16 10:39:22.653: E/AndroidRuntime(339): java.lang.IllegalStateException: Could not execute method of the activity
10-16 10:39:22.653: E/AndroidRuntime(339):  at android.view.View$1.onClick(View.java:2072)
10-16 10:39:22.653: E/AndroidRuntime(339):  at android.view.View.performClick(View.java:2408)
10-16 10:39:22.653: E/AndroidRuntime(339):  at android.view.View$PerformClick.run(View.java:8816)
10-16 10:39:22.653: E/AndroidRuntime(339):  at android.os.Handler.handleCallback(Handler.java:587)
10-16 10:39:22.653: E/AndroidRuntime(339):  at android.os.Handler.dispatchMessage(Handler.java:92)
10-16 10:39:22.653: E/AndroidRuntime(339):  at android.os.Looper.loop(Looper.java:123)
10-16 10:39:22.653: E/AndroidRuntime(339):  at android.app.ActivityThread.main(ActivityThread.java:4627)
10-16 10:39:22.653: E/AndroidRuntime(339):  at java.lang.reflect.Method.invokeNative(Native Method)
10-16 10:39:22.653: E/AndroidRuntime(339):  at java.lang.reflect.Method.invoke(Method.java:521)
10-16 10:39:22.653: E/AndroidRuntime(339):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
10-16 10:39:22.653: E/AndroidRuntime(339):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
10-16 10:39:22.653: E/AndroidRuntime(339):  at dalvik.system.NativeStart.main(Native Method)
10-16 10:39:22.653: E/AndroidRuntime(339): Caused by: java.lang.reflect.InvocationTargetException
10-16 10:39:22.653: E/AndroidRuntime(339):  at com.newdrawing.DrawingActivity.save(DrawingActivity.java:91)
10-16 10:39:22.653: E/AndroidRuntime(339):  at java.lang.reflect.Method.invokeNative(Native Method)
10-16 10:39:22.653: E/AndroidRuntime(339):  at java.lang.reflect.Method.invoke(Method.java:521)
10-16 10:39:22.653: E/AndroidRuntime(339):  at android.view.View$1.onClick(View.java:2067)
10-16 10:39:22.653: E/AndroidRuntime(339):  ... 11 more
10-16 10:39:22.653: E/AndroidRuntime(339): Caused by: java.lang.IllegalStateException: Can't compress a recycled bitmap
10-16 10:39:22.653: E/AndroidRuntime(339):  at android.graphics.Bitmap.checkRecycled(Bitmap.java:180)
10-16 10:39:22.653: E/AndroidRuntime(339):  at android.graphics.Bitmap.compress(Bitmap.java:572)
10-16 10:39:22.653: E/AndroidRuntime(339):  ... 15 more 
```

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-10-16T05:32:29.723

您可以简单地尝试以下 -

```
Intent i = new Intent(this, Second.class)
i.putExtra("Image", bitmap);
startActivity(i) 
```

并且，在`Second.class`

```
Bitmap bitmap = (Bitmap) intent.getParcelableExtra("Image"); 
```

看看[这里](https://stackoverflow.com/a/2459624/940096)如果你想`Bitmap`在发送到下一个活动之前压缩你的，看看下面 -

```
Intent i = new Intent(this, NextActivity.class);
Bitmap b; // your bitmap
ByteArrayOutputStream bs = new ByteArrayOutputStream();
b.compress(Bitmap.CompressFormat.PNG, 50, bs);
i.putExtra("byteArray", bs.toByteArray());
startActivity(i); 
```

在你的下一个活动中 -

```
if(getIntent().hasExtra("byteArray")) {
    ImageView previewThumbnail = new ImageView(this);
    Bitmap b = BitmapFactory.decodeByteArray(
                    getIntent().getByteArrayExtra("byteArray"),0,getIntent()
                    .getByteArrayExtra("byteArray").length);        
    previewThumbnail.setImageBitmap(b);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-05-25T09:30:51.280

我认为在大多数情况下，可以将位图放在静态引用上，当接收活动不再需要它时，该引用应该为空。

这样，它非常快，不需要转换或编码和解码。它也不会留下痕迹。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-11-04T11:12:19.523

有很多方法：

**1)**

**Bitmap 实现 Parcelable，因此您始终可以在意图中传递它：**

```
Intent intent = new Intent(this, NewActivity.class);
intent.putExtra("BitmapImage", bitmap); 
```

**并在另一端检索它：**

```
Intent intent = getIntent();
Bitmap bitmap = (Bitmap) intent.getParcelableExtra("BitmapImage"); 
```

**2)**

**在将其添加到意图、发送出去和解码之前，将其转换为字节数组。**

//转换为字节数组

```
ByteArrayOutputStream stream = new ByteArrayOutputStream();
bmp.compress(Bitmap.CompressFormat.PNG, 100, stream);
byte[] byteArray = stream.toByteArray();

Intent in1 = new Intent(this, Activity2.class);
in1.putExtra("image",byteArray); 
```

**然后在活动 2 中：**

```
byte[] byteArray = getIntent().getByteArrayExtra("image");
Bitmap bmp = BitmapFactory.decodeByteArray(byteArray, 0, byteArray.length); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-07-08T11:41:27.427

[我在这篇](https://stackoverflow.com/questions/4352172/how-do-you-pass-images-bitmaps-between-android-activities-using-bundles/24630735#24630735)SO 帖子中回答了类似的问题。我的解决方案会将图像保存在其他应用程序无法访问的设备的内部存储中（在无根手机上）。然后我们可以简单地解码文件并在 imageview 中显示它。它可以防止**TranscationTooLarge**异常，因为您不能超过传递包的 1mb 限制。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-05-30T04:28:10.503

如果您的图像是静态的并且在可绘制文件夹等中因此将位图从意图发送到下一个活动非常昂贵（对于机器:)）所以现在最好的方法是首先 像这里一样创建`string-array`。`strings.xml`

```
<resources>
    <string name="app_name">Gallery App</string>
    <string-array name="images">
        <item>@drawable/img1</item>
        <item>@drawable/img2</item>
        <item>@drawable/img3</item>
        <item>@drawable/img4</item>
        <item>@drawable/img5</item>
        <item>@drawable/img6</item>
    </string-array>
</resources> 
```

然后在您的活动中获取与`images`上面声明的该数组相关的图像列表。

1:-声明实例`TypeArray typeArray`

2：-分配`typeArray = getResources().obtainTypedArray(R.array.images);`

3：-声明您的列表并一项一项添加每个项目->

```
 ArrayList list = new ArrayList();
    for (int i = 0 ;i< typedArray.length() ; i++){

            Bitmap bitmap = BitmapFactory.decodeResource(getResources(),typedArray.getResourceId(i ,-1));
            list.add(bitmap);

        } 
```

4：-当然，现在您将在您的`ArrayAdapter`

```
view.setAdapter(new ArrayAdapter(this , R.layout.viewImages , list)); 
```

**5：-将点击的位图图像发送到您的下一个活动**

```
 view.setOnItemClickedListener(new AdapterView.OnItemClickedListener(){

            @Override
            public void onItemClick(AdapterView<?> parent, View view, int position, long id) {

                    Intent i = new Intent(MainActivity.this , DetailedImageActivity.class);
                    int imageId = typedArray.getResourceId(position , -1);
                    i.putExtra("imageId",imageId) ;
                    Log.i("ResourceId ","here");
                    startActivity(i);

            }

    }); 
```

**6:-接收您的位图 ID 并获取您的位图图像**

```
public class DetailedImageActivity extends AppCompatActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_detailed_image);

        ImageView imageView = (ImageView) findViewById(R.id.detailImageView);

        String title = getIntent().getStringExtra("title");
        int imageId = getIntent().getExtras().getInt("imageId") ;

        Bitmap image = BitmapFactory.decodeResource(getResources() ,imageId);
            imageView.setImageBitmap(image);

    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-16T05:30:56.710

您可以使用 bundle 将位图从一个活动传递到另一个活动

将您的图像添加到字节数组中：

```
ArrayList<byte[]> image=new ArrayList<byte[]>();

Bundle b = new Bundle();
Intent it=new Intent(getBaseContext(),your.class);
b.putByteArray("image", image.get(position));
it.putExtras(b);
startActivity(it); 
```

并在从捆绑包中创建接收器活动时获取您的图像

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-16T05:31:28.480

在您的 logcat 中，它指出

```
10-16 10:39:22.653: E/AndroidRuntime(339): Caused by: java.lang.IllegalStateException: Can't compress a recycled bitmap
10-16 10:39:22.653: E/AndroidRuntime(339):  at android.graphics.Bitmap.checkRecycled(Bitmap.java:180)
10-16 10:39:22.653: E/AndroidRuntime(339):  at android.graphics.Bitmap.compress(Bitmap.java:572) 
```

您的位图在传递给 ImageActivity 之前已被回收。您可以将位图设为静态，这样它就不会被回收。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2016-07-09T13:52:53.920

我一直在寻找它，最后在 [https://eazyprogramming.blogspot.com/2013/01/passing-image-between-activities.html#comment-form找到答案](https://eazyprogramming.blogspot.com/2013/01/passing-image-between-activities.html#comment-form)

在第一个活动中

```
Intent intent=new Intent(FirstClass.this, SecondClass.class);
Bundle bundle=new Bundle();
bundle.putInt("image",R.drawable.ic_launcher);
intent.putExtras(bundle);
startActivity(intent); 
```

在第二个活动中：

```
Bundle bundle=this.getIntent().getExtras();
int pic=bundle.getInt("image");
v.setImageResource(pic); 
```

另一种方法：在第一个活动中：

```
Bundle extras = getIntent().getExtras();
byte[] b = extras.getByteArray("picture");
Bitmap bmp = BitmapFactory.decodeByteArray(b, 0, b.length);
ImageView image = (ImageView) findViewById(R.id.imageView1);
image.setImageBitmap(bmp); 
```

在第二个活动中：

```
Bundle extras = getIntent().getExtras();byte[] b = extras.getByteArray("picture");Bitmap bmp = BitmapFactory.decodeByteArray(b, 0, b.length);ImageView image = (ImageView) findViewById(R.id.imageView1); 
```

# ruby-on-rails-3 - Expiring/busting Etag in Rails

> ID：12908052
> 
> 赞同：1
> 
> 时间：2012-10-16T05:25:59.637
> 
> 标签：ruby-on-rails-3, etag

When doing HTTP caching in rails, once would use:
fresh_when etag: @user, public: true

The problem with that is that if you chance your html for the page, the cached page is no longer going to be valid. Therefor we need a way to invalidate the page/etag every time we change something.

One way to do that is to change RAILS_CACHE_ID every time you deploy as per [Etag busting on deployment](http://ninjasandrobots.com/how-to-bust-your-rails-etag-cache-on-deployment%20Etag%20busting%20on%20deployment) .However doing that will results in all etags, for all the pages getting expired for every deployment.

I would rather have a solution where I can expire individual tags, for individual pages.

I could generate my own etag with a version like this: fresh_when etag: (@user.updated_at.to_s + "V1"), public: true

But this just doesn't feel like the "Rails way". Any more elegant solutions?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T08:29:02.707

[本文更新](http://ninjasandrobots.com/rails-caching-a-problem-with-etags-and-a-solution)了相应的库，因此您只需在 config.xml 中设置一个版本即可。[请参阅https://github.com/n8/bust_rails_etags](https://github.com/n8/bust_rails_etags)上的自述文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-16T20:20:32.530

如果您使用的是 Capistrano，或者`Rails.root`每次部署时值都发生变化的部署策略，您可以将其添加到您的应用程序控制器中：

```
class ApplicationController < ActionController::Base

  # This causes http request caching to expire when we deploy.
  # The app is deployed /mnt/code/releases/<timestamp>
  etag { $etag_cache_control_fragement ||= Rails.root.to_s.split("/").last } 
```

参考这里：[http ://api.rubyonrails.org/v5.1/classes/ActionController/ConditionalGet/ClassMethods.html](http://api.rubyonrails.org/v5.1/classes/ActionController/ConditionalGet/ClassMethods.html)

# c# - 这些空数组 String.Split 方法调用有什么区别？

> ID：12908058
> 
> 赞同：0
> 
> 时间：2012-10-16T05:26:18.897
> 
> 标签：c#, string, refactoring, split

这两行代码有什么区别吗？

1)`someString.Split(new[] { ';' });`

2)`someString.Split(';');`

我在我正在处理的代码中看到了第一个，我想知道我是否可以安全地将其更改为第二个，或者他们为什么选择第一种方式。

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-16T05:30:39.570

```
public string[] Split(params char[] separator) 
```

方法参数是`params char[]`. `params`关键字意味着您可以显式提供一个数组，或者让编译器为您创建一个。在您的第一种形式中，您明确地提供了数组。当然，如果您想使用方法的其他[重载](http://msdn.microsoft.com/en-us/library/y7h14879.aspx)来指定其他行为，您将需要使用这种形式。否则，您可以简单地使用您的第二种形式，并在行中列出分隔符并以逗号分隔以方便使用。

为什么以前的编码员选择第一种形式而不是第二种形式，我不能说。我不知道以前的框架版本中需要显式数组的方法形式。但是，如果您愿意，您应该可以安全地更改表单，并且您一定会进行测试以验证预期的行为。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T05:27:32.523

在第**一个选项**中，如果要**拆分多个字符**，则可以在字符数组中指定。如果只有一个字符用于拆分，则使用第二个选项。

考虑以下示例：

```
string someString = "Somestring;abc.def.abc"; 
//following will return 4 elements array, after splitting on ';' and '.'
string[] splitedArray = someString.Split(new[] { ';','.' }); 
//following will return 2 elements in array after splitting on a single character
string[] splitedOnSingleCharacter  = someString.Split(';'); 
```

# vb6 - Visual Basic 6 字节码规范

> ID：12908062
> 
> 赞同：8
> 
> 时间：2012-10-16T05:26:44.067
> 
> 标签：vb6, bytecode, specifications, vm-implementation

我在哪里可以找到官方和非官方的 Visual Basic 6 规范列表，例如，可以让我完全解释 VB6 EXE 文件的内容并分析它们，或者我自己解释它们，而不是使用`MSVBVM60.DLL`?

类似于虚拟机的规范及其语言。

诸如操作码、指令、助记符、是否使用一个或多个堆栈、堆栈指针、寄存器等。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T07:10:19.837

VB6 可以编译为 p 代码或本机代码。

*   本机代码只是本机 8086 系列机器代码。我想这是一个公共标准。它不是很有延展性。
*   这是一个关于[p代码的链接](http://www.programmersheaven.com/2/P-Code-Implementation)

# android - How Launch service when application is closed or vice versa

> ID：12908063
> 
> 赞同：2
> 
> 时间：2012-10-16T05:26:47.710
> 
> 标签：android, service

I am stuck with a scenario in which i am having my application and a service. i need to start a service when my application is closed, and i need to stop my service when my application is running, in the service i will launch a thread which will be fetching the location , i know that there are mutiple options to implement this scenario. but i am confused which one to use, should i use AIDL to implement, or to use extra bundle in the intent used to start the service,or do i have to bind to service from my activity , or use simple boolean variable making it true and false depending on application is started or closed. Any kind of help is highly appreciated. Thanks

# python - z3中的空模型

> ID：12908067
> 
> 赞同：5
> 
> 时间：2012-10-16T05:27:05.300
> 
> 标签：python, z3

**z3py 片段：**

```
x = Int('x')

s = Solver()
s.add(x <= x)
print s.check()
print s.model()
print s.model().sexpr() 
```

[http://rise4fun.com/Z3Py/mfPU](http://rise4fun.com/Z3Py/mfPU)

**输出：**

```
sat
[] 
```

的任何值都`x`可以，但会`z3`返回空模型。模型中缺失的自由变量是否`x`表明任何整数值都是有效模型？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-16T14:45:05.527

是的，在 Z3 中，如果模型中没有出现常数（例如`x`），那么它就是“无关紧要”。也就是说，任何值都`x`将满足公式。在评估常量的值时，我们可以启用“模型完成”。也就是说，Z3 将对“无关”符号使用任意解释。这是一个示例[http://rise4fun.com/Z3Py/bvVO](http://rise4fun.com/Z3Py/bvVO)

```
x = Int('x')
s = Solver()
s.add(x <= x)
print s.check()
m = s.model()
print m.evaluate(x)
print m.evaluate(x, model_completion=True)
print m 
```

# android - 如何在 Android 中使用矢量图像？

> ID：12908069
> 
> 赞同：0
> 
> 时间：2012-10-16T05:27:30.103
> 
> 标签：android, map

我通常是处理矢量、位图和图像的业余爱好者。我想创建一个包含地图部分的应用程序。另外，我想在地图上标记

现在，我有一些问题，请帮助我：

1.  哪个最好？使用`bitmap`或`vector`
2.  如果我应该使用矢量，我应该使用什么图像格式？SVG？
3.  什么是最好的实施方式？

如果您对我有其他建议，请写信。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T05:36:26.033

您可以使用此库随时随地解析 SVG 文件，使用起来非常简单高效。

[http://code.google.com/p/svg-android/](http://code.google.com/p/svg-android/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T05:31:12.723

您可以使用内置的谷歌地图来创建丰富、漂亮的地图应用程序。无需实现您自己的地图和图形。你也可以嵌入标签和东西。

查看：

[https://developers.google.com/maps/documentation/android/hello-mapview](https://developers.google.com/maps/documentation/android/hello-mapview)

# rake - 流程资产非轨道项目

> ID：12908071
> 
> 赞同：2
> 
> 时间：2012-10-16T05:27:33.197
> 
> 标签：rake, project, ember.js, asset-pipeline

我正在用 PHP 为服务器端和 Ember.js 为客户端构建一个项目。

我已经在 CoffeScript 中编写了所有脚本，在 .hbs 文件中编写了模板，在 .scss 文件中编写了样式，现在我使用 rake-pipeline 来编译所有脚本，但我有几个问题：

*   如何组织依赖关系
*   如何在其他文件中包含脚本
*   如何确定脚本的顺序

现在我有一个硬编码 AssetFile 用于对最终 .js 文件中的脚本进行排序，但我的应用程序变得更加复杂，一些文件需要增长并拆分为更多文件，但我遇到了之前提到的问题。

**资产文件**

```
output BUILD_DIR
input SRC_DIR do
  match '**/*.handlebars' do
    handlebars :precompile => true
    concat '0.js'
  end

  match '**/lib/*.coffee' do
    coffee_script
    concat '1.js'
  end
  match '**/app.coffee' do
    coffee_script
    concat '2.js'
  end
  match '**/controller/*.coffee' do
    coffee_script
    concat '3.js'
  end
end 
```

我的项目布局就像

```
Resources/
   assets/
      js/         # Are like my vendors (jquery, ember, etc...)
      images/     # i copy this without process
      styles/     # Here are .scss and .sass files
   scripts/
      templates/  # It's a directory tree with files .hbs 
      controller/ # Dirs with arbitrary names
      lib/
      ...
      main.coffee # main point, ej: App = Rkmax.App.create();App.initialize(); 
```

你可以看到主要的麻烦是在咖啡编译器生成concat .js文件时给出正确的顺序，我在rails中看到了一些项目并`require`在.coffe文件中使用了这句话，但不知道如何让rake-pipeline理解这句话.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T05:56:58.140

某种方式`require`将成为您的解决方案。使用声明依赖关系`require`让您的工具连接和/或加载模块是正确的顺序。

大多数使用的 rake-pipeline 项目`require`都使用 minispade ( [github](https://github.com/wycats/minispade) )，它是 rake-pipeline 过滤器的伴侣 MinispadeFilter。（[github](https://github.com/wycats/rake-pipeline-web-filters/blob/master/lib/rake-pipeline-web-filters/minispade_filter.rb)）。

您可能还希望将 Iridium ( [github](https://github.com/radiumsoftware/iridium) ) 视为将这些工具与其他工具打包在一起的工具示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T00:20:50.130

搜索了一段时间后。我决定用[Sprockets](https://github.com/sstephenson/sprockets)代替 rakepipeline有一个类似的系统来编译你需要的一切

## 宝石文件

```
gem 'sprockets'
gem 'sprockets-sass'
gem 'sass'
gem 'coffe-script' 
```

## 耙文件

```
require 'sprockets'
require 'logger'
require 'fileutils'
require 'pathname'

task :compile => :clean do
    sprockets = Sprockets::Environment.new(ROOT)

    sprockets.append_path SOURCE_DIR.to_s

    %w( app.js vendor.s template.js ).each do |bundle|
        assets = sprockets.find_asset(bundle)
        ext = bundle.split(".")[1]
        name = assets.pathname.basename(assets.pathname.extname)
        FileUtils.mkpath BUILD_DIR.join(ext)
        assets.write_to BUILD_DIR.join(ext, "#{name}.#{ext}")    
    end
end 
```

Sprockets 具有“指令处理器”，例如

*   要求
*   包括
*   需要自己

它们让我可以轻松地组织依赖项。唯一的问题是它没有处理`.handlebars`默认值，但我写了一个简单的`handlebars_template.rb`

## 车把模板.rb

```
require 'tilt'
require 'json'

module Sprockets
  class HandlebarsTemplate < Tilt::Template
    self.default_mime_type = 'application/javascript'    

    def prepare
    end

    # Compile template data
    def evaluate(scope, locals, &block)
      "Ember.TEMPLATES['#{scope.logical_path.split("/")[1..-1].join("/")}']=Ember.Handlebars.compile(#{data.to_json});\n"
    end
  end
end 
```

在正确的地方注册，瞧！处理我的模板

```
register_engine 'handlebars', ::Sprockets::HandlebarsTemplate
register_engine 'hbs',        ::Sprockets::HandlebarsTemplate 
```

# database - 如何在 SH 脚本中使用 SQL 命令

> ID：12908072
> 
> 赞同：1
> 
> 时间：2012-10-16T05:27:37.477
> 
> 标签：database, postgresql, sh

我当前的脚本看起来像这样：

```
!/bin/sh 
sudo -u postgres createdb mydb
sudo -u postgres psql mydb
CREATE TABLE person (first VARCHAR(32), last VARCHAR(32));
CREATE TABLE thing (size VARCHAR(32), price VARCHAR(32));
exit 0; 
```

截至目前，当我执行脚本时，它会创建数据库并将我登录到其中。但是，在将我登录到 mydb 后，脚本不会继续执行`CREATE TABLE`命令。

我是新来的，所以我不知道我是否以正确的方式去做。基本上我只想要一个创建数据库的脚本，然后在其中创建几个表（使用 PostgreSQL）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T05:29:18.933

一种方法是使用 a `here-doc`（这是一个 shell 功能，取决于您正在运行的 shell）：

```
psql mydb <<EOF
    CREATE TABLE person (first VARCHAR(32), last VARCHAR(32));
    CREATE TABLE thing (size VARCHAR(32), price VARCHAR(32));
EOF 
```

另一种方法是将命令写入一个受到充分保护（具有权限）的临时文件，然后将其作为脚本传递给`postgres`该`-f FILENAME`选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T12:05:25.267

```
#!/bin/bash

psql -d mydb -U postgres -c "CREATE TABLE person (first VARCHAR(32), last VARCHAR(32));"
psql -d mydb -U postgres -c "CREATE TABLE thing (size VARCHAR(32), price VARCHAR(32));" 
```

您可以使用 -c 选项运行所有查询。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T00:56:11.893

在将 hba_conf 文件编辑为“本地所有 postgres 信任”后（我使用了信任，因此我不必为我的脚本提供密码），我使用了 TraviJuu 的建议，现在我的脚本可以完美运行。这是最终结果的样子。

!/bin/sh

sudo -u postgres createdb mydb

psql -w -d mydb -U postgres -c "创建表人（第一个 VARCHAR(32)，最后一个 VARCHAR(32)）；"

psql -w -d mydb -U postgres -c "CREATE TABLE thing (size VARCHAR(32), price VARCHAR(32));"

退出0；

# winforms - 定时器控件的实例？在窗口形式？

> ID：12908076
> 
> 赞同：0
> 
> 时间：2012-10-16T05:27:56.177
> 
> 标签：winforms

在窗口窗体中，当我动态创建定时器控件时，如何区分定时器控件的对象，定时器控件是n个......它在运行时是deisde。帮帮我谢谢。。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T05:37:32.683

您只需在主窗体上创建一个 Dictionary 类型的实例字段，您还可以使用计时器的 Tag 属性：

```
class MainForm(Form)
{

    Dictionary<string, Timer> timers;

    public MainForm()
    {
        InitializeComponents();
        timers = new Dictionary<string, Timer>();
    }    

    public Timer AddTimer( string name, int interval, bool enabled, int id)
    {
          Timer t = new Timer();
          t.Interval = interval;
          t.Enabled = enabled;
          t.Tag = id;
          t.Ticks += new EventHandler(TimerEventProcessor);
          timers.add(name, t);

          return t;
    } 

    public Timer GetTimer(string name)
    {
        if (timers.ContainsKey(name))
        {
              return timers[name];
        }
        else
        {
              return null;
        }
    } 

       private static void TimerEventProcessor(Object myObject,
                                            EventArgs myEventArgs) {
             Timer sourceTimer = myObject as Timer;
       }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T05:39:39.380

最好用线程代替定时器控制。无限的计时器控件将需要比线程更多的资源。

如果继续使用计时器控件，最好将创建的每个计时器的控件名称存储在一个数组中，您可以通过搜索数组来选择您想要的那个。

# linux - SIGSEGV 默认处理程序是否在进程终止之前清理堆栈/堆内存？

> ID：12908083
> 
> 赞同：0
> 
> 时间：2012-10-16T05:28:14.607
> 
> 标签：linux, signals, segmentation-fault

我在一个简单的 C 程序中声明了两个变量（一个全局变量和另一个局部变量），除了两个具有不同大小数据的数组。`strcpy()`在拨打电话之前，我使用例程导致缓冲区溢出`return 0;`。我在终端屏幕上看到了分段错误错误。

我知道在收到此`SIGSEGV`信号后，系统会获取进程内存的核心转储并终止该进程，但系统是否会清理（清零）堆栈/堆内存和其他部分（如 BSS 段、文本段等）？

我想，在进程的正常终止中，系统会清理（清零）内存，但我不太确定。

我正在使用`Ubunutu 10.12`并`gcc`运行该程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T05:35:19.873

当 Linux[进程](http://en.wikipedia.org/wiki/Process_%28computing%29)终止时（通常，通过调用`_exit` [syscall](http://en.wikipedia.org/wiki/Syscall)，例如通过从 返回`main`，或通过类似的信号`SIGSEGV`），其[地址空间](http://en.wikipedia.org/wiki/Address_space)将不复存在。

实际上，内核不会将前一个进程的内存归零，它只是将相关页面添加到一些空闲页面集合中，稍后将重用这些页面。重用页面时，它将清除它或用适当的内容填充它。所有这些都发生在内核内部，应用程序只能看到适当填充（或清除）的页面。

你应该阅读更多关于[虚拟内存](http://en.wikipedia.org/wiki/Virtual_memory)的内容，我邀请你阅读一些优秀的[高级 unix 编程](http://basepath.com/aup/)和[高级 linux 编程](http://advancedlinuxprogramming.com)书籍。

进程只能看到虚拟内存，它们的地址空间是通过[execve(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/execve.2.html)系统调用设置的，并且可以更改，例如使用[mmap(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/mmap.2.html)系统调用。

# android - 根据给定的屏幕截图创建布局

> ID：12908089
> 
> 赞同：0
> 
> 时间：2012-10-16T05:28:42.977
> 
> 标签：android, android-layout

我正在尝试创建一个如屏幕截图所示的布局。那是警告对话吗？我通过创建警报对话进行了尝试，但对话宽度并未占据整个碎石宽度。

![在此处输入图像描述](../Images/0648a48c916ff77da3230bdbb658c39d.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T05:57:12.257

如上所示，您应该使用 GUI 元素构建一个 xml 布局文件。

稍后您应该在您的 java 类中扩充这些元素。

前任：

```
public class Header extends RelativeLayout   {
//default relative layout constructors here and call init(defined below) in each constructor.

 init() {
   LayoutInflater.from(mContext.getApplicationContext()).inflate(R.layout.yourxmlfile, this);
   btnLogo = (Button) findViewById(R.id.btnLogo);
   etSearch = (TextView) findViewById(R.id.etSearch);
   btnSearch = (Button) findViewById(R.id.btnSearch);
   mHandler = new Handler(); // for handling focus
   setListeners();// set your listeners here 
  }
 } 
```

# android - 如何访问 Android 设备中的下载/数据文件夹？

> ID：12908091
> 
> 赞同：0
> 
> 时间：2012-10-16T05:28:47.907
> 
> 标签：android, android-dialog

我正在构建一个 Android 应用程序，我必须在其中将文件上传到 http 服务器。例如我的下载/数据文件夹中的文档。我怎样才能访问。我需要在清单中设置权限吗？

我这样做了：

```
private static final int PICKFILE_RESULT_CODE = 1;
String selectedPath = "";
Intent intent = new Intent();
intent.setType("file/*");
intent.setAction(Intent.ACTION_GET_CONTENT);
startActivityForResult(intent,PICKFILE_RESULT_CODE); 
```

我在我的第二个活动中执行此操作，并将此活动添加到清单中。我收到了这些错误。

```
10-16 06:00:30.065: E/AndroidRuntime(546): FATAL EXCEPTION: main
10-16 06:00:30.065: E/AndroidRuntime(546): android.content.ActivityNotFoundException: No Activity found to handle Intent { act=android.intent.action.GET_CONTENT typ=file/* } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T05:34:59.413

您将需要权限 INTERNET 和 READ_PHONE_STATE。

至于将文档拉入手机，您需要通过 http 发出 GET 或 POST。

下面是 Android 中的 HTTP 教程。

[http://www.vogella.com/articles/AndroidNetworking/article.html](http://www.vogella.com/articles/AndroidNetworking/article.html)

# c - C Prog - 文件处理限制

> ID：12908093
> 
> 赞同：0
> 
> 时间：2012-10-16T05:28:50.667
> 
> 标签：c

我正在尝试制作一个记录系统，我想在其中登录，使用我的员工 ID 和密码登录，或者如果可能的话，只使用员工 ID。问题是，每当我将雇主 ID 放入文本文件时，我的代码只会限制我使用代码中的预定义用户名。如何使文本文件中存在的每个雇主 ID 都被接受并可以成功登录？

```
 #include <stdio.h>
    #include <conio.h>
    #include <string.h>
    #include <stdlib.h>
    #include <conio.h>

    void mainMenu();
    void EnterItem();
    void ViewItem();
    void SearchItem();
    void Exit();

    int count=1,ulength,plength;
    char username[]="Admin",password[]="1234";
    char name1[10],pass[10];

    char code[20],name[20],search[20];
    int price,qty;
     main(){

     printf("\nEnter USer ID And Password below(You have Only Three Chances!\nPress Enter To Continue" );
      getch();
      while(count<=3)
      {

      printf("\nENter User ID:");
      scanf("%s",name1);
      printf("\nENter Password:");
      scanf("%s",pass);
      ulength=strcmp(name1,username);
      plength=strcmp(pass,password);
      if(ulength==0&&plength==0)
      {
      printf("\nWelcome %s",name1);
      break;
      }
      else
      {
      printf("\nUsername And Password is Invalid!\n You Have %d more Chances/s.",3-count);
      }
      getch();
      count++;
      }
      if(count==4)
      printf("Maximum of three(3)Try only!");
      getch();

        mainMenu();
        EnterItem();
        ViewItem();
        SearchItem();
        Exit();
         getch();
         }

    void mainMenu(void){

    char choice;
    printf("\t*************************************\n");
    printf("\t******========================*******\n");
    printf("\t******==!!INVENTORY SYSTEM!!==*******\n");
    printf("\t******========================*******\n");
    printf("\t*************************************\n");
    printf("\n");

    printf("\nMenu:\n[a]EnterItem\n[b]ViewItem\n[c]SearchItem\n[d]Exit\n");
    printf("What do you want to perform?:");
    fflush(stdin);

    scanf("%c",choice);
    switch(choice){

    case 'a':
        EnterItem();
        break;
    case 'b':
        ViewItem();
        break;
    case 'c':
           SearchItem();
        break;
    case 'd':
        Exit();

        break;
    default:
        printf("Invalid Choice");

        }
    }

    void EnterItem(void){

    FILE *MyFile;
    char opt;
    do{
        printf("Enter Item Code:");
        fflush(stdin);
        scanf("%s",code);

        printf("Enter Item Name:");
        fflush(stdin);
        scanf("%s",name);

        printf("Enter Item Price:");
        fflush(stdin);
        scanf("%i",&price);

        printf("Enter Item Quantity:");
        fflush(stdin);
        scanf("%i",&qty);
            MyFile=fopen("MyFiles.txt","a+");
            fprintf(MyFile,"%s\t%s\t%i\t%i\n",code,name,price,qty);
            printf("Item Saved!!\n");

        printf("Do you want to Add More?:[y/n]");
        fflush(stdin);
        scanf("%c",&opt);

    }while(opt=='Y'||opt=='y');
    printf("Do you want to Go Back To main?:[y/n]");
    fflush(stdin);
    scanf("%c",&opt);
    if(opt=='y'||opt=='Y')
    mainMenu();
    else
       printf("Invalid Choice!!");

         }

    void ViewItem(void){

    FILE *MyFile;
    int c;

    if((MyFile=fopen("MyFiles.txt","r"))==NULL)
    {
    printf("Error Reading File!!");

    }
    while((c=fgetc(MyFile))!=EOF)
    printf("%c",c);
    printf("Go to Main Menu[y/n]:");
    fflush(stdin);
    scanf("%c",opt);
    if(opt=='y'||opt=='Y')
    mainMenu();
    else(); 
    fclose(MyFile);
    getch();
    }

    void SearchItem(void){

    FILE *MyFile;

        MyFile=fopen("MyFiles.txt","a+");
        printf("Enter the Item Code to Search:");
        fflush(stdin);
        scanf("%s",search);
        while(!feof(MyFile))
        {
        fscanf(MyFile,"%s %s %i %i",code,name,price,qty);
            if(strcmp(search,code)==0)
            {
            printf("Item Code: %s\n",code);
            printf("Item Name: %s\n",name);
            printf("Item Price: %i\n",price);
            printf("Item Quantity: %i\n",qty);
            break;
            printf("Go Back To main Menu[y/n]:");
            fflush(stdin);
            scanf("%s",opt);
    if(opt=='y'||opt=='Y')
    mainMenu();
    else
            }
           }
              fclose(MyFile);
    }

    void Exit(void){
    getch();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T05:52:21.260

`ulength=strcmp(name1,username); plength=strcmp(pass,password);`

这限制了您在代码中仅使用预定义用户名的能力。您正在将其与包含“管理员”的用户名进行比较。因此，无论您输入什么作为用户名，您都将始终将其与字符串“Admin”进行比较。

您需要做的是使用“fopen”打开包含员工详细信息的文件。然后您可以使用“fgets”将员工详细信息读入数组（或您选择的其他数据结构）。您可以遍历列表并将其与“name1”进行比较。

干杯，VSN

PS 使用 strncmp 因为它使您的代码更安全。如果您在 UNIX 机器上工作，您会发现“fopen”、“fgets”和“strncmp”的手册页以及其他标准 C 函数。

# android - 我可以通过 android 的辅助功能获取 WebView 的内容吗？

> ID：12908097
> 
> 赞同：5
> 
> 时间：2012-10-16T05:29:24.340
> 
> 标签：android, webview, accessibility

我正在构建一个简单的应用程序，为其他游戏应用程序添加音效，并且该游戏在包含`WebView`.

我想获取的内容`WebView`以了解游戏的上下文，但即使具有辅助功能，它看起来也是不可能的。

我正在使用**JellyBean**，因此启用`Enhanced Android Accessibility`了选项并运行了对讲进行测试，但它不仅可以读取 WebView 的内容，而且还会使该游戏应用程序崩溃。

我认为如果我可以将输出完整 html 源代码的 javascript 注入到可访问性服务中，那么很容易了解上下文。我听说这个`Enhanced Android Accessibility`选项做类似的工作。

我的问题是，是否可以获得具有辅助功能的 WebView 内容？

具体来说，我可以注入一个简单的 javascript 来提供 WebView 内容的来源吗？

非常感谢您的阅读。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-25T05:15:44.100

如果你想访问 api 级别 18 以上的 webview。那么你应该使用`android:canRequestEnhancedWebAccessibility`. 启用 Web 无障碍服务后，您可以将 javascript 注入 webview 并可以访问 webview 内容。

# android - 圆圈中的按钮

> ID：12908099
> 
> 赞同：3
> 
> 时间：2012-10-16T05:29:35.707
> 
> 标签：android, xml, android-layout, imagebutton, geometry

![对于下面的圆圈，我可以为每个星座在同一个圆圈上创建单独的按钮吗](../Images/4442ed6a129be4ec3f4bd9ca6f878799.png)

对于上面的圆圈，我可以为每个星座在同一个圆圈上创建单独的按钮吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T18:33:31.720

该图像可能过于复杂，无法通过多个视图进行复制。您可以做的最好的事情可能是扩展 a `View`or `ImageView`，然后覆盖该`onTouch`方法。

在 onTouch 中，您可以获得触摸的确切 XY 坐标，并将其与所有单个可点击区域的已知边界进行比较。根据您单击的区域，您可以采取不同的操作。

# java - Javascript 日期字符串 GMT 到 Java 日期

> ID：12908104
> 
> 赞同：0
> 
> 时间：2012-10-16T05:29:58.177
> 
> 标签：java, javascript, date, jersey

我正在尝试用 Jersey 编写一个 REST-API。从javascript我得到一个日期字符串，如：

```
Tue Oct 16 2012 07:10:55 GMT+0200 (CEST) 
```

（就是这样

```
new Date().toString() 
```

可以，但这不在我的范围内。）

这个日期字符串可以通过实现一个自己的@ContextResolver 来解析。我在谷歌上搜索了大约一天，我能整理的最好的 SimpleDateFormat 是：

```
SimpleDateFormat sdf = new SimpleDateFormat("EEE MMM dd yyyy HH:mm:ss 'GMT'z '('z')'", Locale.ROOT); 
```

但正如您所见，“GMT”部分和括号是“硬编码”的。在不更改 javascript 部分的情况下有没有更好的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T05:38:48.693

你可以试试[toLocaleDateString()](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/toLocaleDateString)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T17:54:09.567

@kidmenot：感谢您的链接，但该解决方案需要在 java 端“手动”处理 javascript-date 并更改 Javascript 端。所以最后我们只需要更改 javascript-part。有

```
var myDate = new Date():
// ... many LOCs
var myDateString = "" + myDate + ""; 
```

分散在 js 代码中。所以只需将其更改为

```
var myDate = new Date():
// ... many LOCs
var myDateString = myDate; 
```

解决了这个问题，因为后来是

```
JSON.stringify() 
```

就在将其发送到服务器之前。JSON.stringify *()*调用*myDate.toJSON()*返回一个 ISO-8601 日期字符串，由 Jersey 处理，无需任何进一步的编码。

所以我们选择了这个解决方案来避免未来的并发症。

**半年后编辑：**

这个解析问题经常发生，最终由于一些 js 框架而不可避免。以下是我们的 Java 解决方案：

```
public static Date jsDateStringToJavaDate(String jsDateString) throws ParseException{

    String[] arrStrDateParts = jsDateString.split(" ");
    SimpleDateFormat sdf = new SimpleDateFormat("E MMM dd yyyy HH:mm:ss", Locale.ENGLISH);
    sdf.setTimeZone(TimeZone.getTimeZone(arrStrDateParts[5].substring(0,6)+":"+arrStrDateParts[5].substring(6)));
    return sdf.parse(arrStrDateParts[0]+" "+arrStrDateParts[1]+" "+arrStrDateParts[2]+" "+arrStrDateParts[3]+" "+arrStrDateParts[4]);       
} 
```

如果您有更好的解决方案，请在此处发布。谢谢

# liferay - java.lang.ClassNotFoundException：junit.framework.TestCase？

> ID：12908108
> 
> 赞同：0
> 
> 时间：2012-10-16T05:30:30.033
> 
> 标签：liferay, liferay-6, classnotfoundexception, junit3

在我的 Lifeary 自定义 portlet 中，我包含了一个 java 类，用于在云服务器上上传媒体的自定义逻辑驻留在其中。

如果我放入一个 java 项目，那么如果我运行该 java 类，那么它工作正常。但是当同一个java类和它需要运行的任何引用时，它会根据需要添加到我的自定义portlet项目中。但是它如何给我以下错误..

```
05:19:41,312 ERROR [http-bio-8080-exec-2][render_portlet_jsp:154] java.lang.ClassNotFoundException: junit.framework.TestCase
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1711)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1556)
    at java.lang.ClassLoader.defineClassCond(ClassLoader.java:632)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:616)
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)
    at org.apache.catalina.loader.WebappClassLoader.findClassInternal(WebappClassLoader.java:2889)
    at org.apache.catalina.loader.WebappClassLoader.findClass(WebappClassLoader.java:1170)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1678)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1556)
    at cloudkey.Test_FileUpload.main(Test_FileUpload.java:21)
    at com.fl.UploadFilePortlet.UploadDocument(UploadFilePortlet.java:74)
    at com.liferay.portal.kernel.portlet.LiferayPortlet.callActionMethod(LiferayPortlet.java:153)
    at com.liferay.util.bridges.mvc.MVCPortlet.callActionMethod(MVCPortlet.java:250)
    at com.liferay.portal.kernel.portlet.LiferayPortlet.processAction(LiferayPortlet.java:80)
    at com.liferay.util.bridges.mvc.MVCPortlet.processAction(MVCPortlet.java:220)
    at com.liferay.portlet.FilterChainImpl.doFilter(FilterChainImpl.java:70)
    at com.liferay.portal.kernel.portlet.PortletFilterUtil.doFilter(PortletFilterUtil.java:48)
    at com.liferay.portal.kernel.servlet.PortletServlet.service(PortletServlet.java:111)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305) 
```

基本上我有两个包 cloudkey 和 util

在 cloudkey 包中，我有测试上传类。我在我的 porlet 操作类中调用它的方法。我没有编译时错误..但是我遇到的只是这个错误。而且我也已经在我的项目中添加了 Junit3 库..

这个错误是关于什么的？如果你想要我的代码片段，那么我会提供你无法理解我的问题..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T06:13:48.843

只需再次验证您是否已在 portlet 中添加了 junit jar 文件（使用 portlet-plugin.properties），停止服务器删除临时和工作文件夹重新启动服务器并再次部署您的 portlet，如果您在代码中使用 classLoader，那么将其替换为“getClass().getClassLoader()”再次保存部署并验证它。

# java - jax-ws webservice 中的泛型类会发生什么？

> ID：12908112
> 
> 赞同：5
> 
> 时间：2012-10-16T05:30:52.420
> 
> 标签：java, jax-ws, cxf

我想知道我是否在 jax-ws 中放置了泛型方法，例如：

```
public List<MyCustomClass> getSomething() 
```

jax-ws 支持这个吗？在客户端，该方法的返回是什么样的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-16T05:57:16.273

您将在客户端获得一个 List（或者如果 WS 使用者是用另一种语言编写的，则获得一组 MyCustomClass 对象）。那不会是问题。请记住始终对接口进行编程。

看起来你仍然没有太多用 Java 创建 WS 的实践，所以我会给你一些建议：

*   您**不得**发送 2 个或更多包含循环引用的对象，否则将以循环引用问题告终。这是因为 JAX-WS 工具将为请求创建一个无休止的 XML 响应。可能很难发现。我们来看一个案例：

    ```
    public class ClassA {
        ClassB instanceOfB;
        //getters and setters...
    }

    public class ClassB {
        ClassA instanceOfA;
        //getters and setters...
    }

    public class MyJAXWS {

        @WebMethod
        public ClassA getClassA() {
             ClassA classA = new ClassA();
             ClassB classB = new ClassB();
             classB.setInstanceOfA(classA);
             classA.setInstanceOfB(classB);
             return classA; //boom! circular reference problems!
        }
    } 
    ```

*   您的返回类中**必须始终**包含接口，而不是特定的 Java 库类。这意味着，您的类应该有`List`,`Set`和`Map`（在容器的情况下），因为此接口比实现类处于更高级别，如果非 Java 客户端尝试使用您的 Web 服务方法，您可能会遇到问题。

    ```
    public class ClassC {

        List<ClassA> lstClassA; //good!
        ArrayList<ClassB> alstClassB; //not very flexible with other languages =\
    } 
    ```

*   The classes that will go through your web services should be POJOs (Plain Old Java Objects), not service or business logic layer classes. Why? Because only the attributes values will be marshalled/unmarshalled when communicating with the clients, **no method code** will appear in the contract of your Web Service.

    ```
    public class ClassD {
        private int intValue;
        //naive business logic method
        //won't be generated in the WSDL for the clients/consumers of the Web Services
        public void printIntValue() {
            //pretty simple implementation
            System.out.println(this.intValue);
        }
    } 
    ```

I've faced these three problems in my last SOA project with Java. I hope other people could enhance this answer or provide info with links.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T05:43:25.480

是的，这应该不是问题，但*建议使用数组。*正如 Luiggi 所说，您将收到一个`List<MyCustomClass>`. 要添加更多内容，可以[在此处找到 JAX-WS 支持的类型的完整列表](http://docs.oracle.com/javaee/6/tutorial/doc/bnazc.html)

# excel - Excel 时间值比较

> ID：12908132
> 
> 赞同：1
> 
> 时间：2012-10-16T05:32:16.900
> 
> 标签：excel, vba

我有一个具有时间值的 excel 表，例如

A1 00:01:00

A2 00:02:00

我想在某些时候使用 for 循环获取数据。我使用如下条件公式

```
if Cells(1,1).Value = TimeValue("00:01:00") Then Do Something 
```

我可以得到 00:01:00 - 00:30:00 之间的值，但对于 00:30:00 - 00:59:00 之间的值，公式 Cells(#).Value = TimeValue("00:33: 00") 不起作用。即使单元格内容是 00:33:00，if 条件也不会返回真值。问题是什么。我尝试使用#12:33:00 AM# 等，它也没有工作。可能是什么问题？（我将单元格格式化为时间格式）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T06:08:49.977

您需要首先通过转换为 double 来转换为它的基本类型。

然后是在vba中比较浮点数的问题。已经有很多话题了，我不会鞭打一匹死马。您可以使用 round 或简单地转换为字符串来完成这项工作。

```
If CStr(CDbl(Sheet1.Cells(1, 1).Value)) = CStr(CDbl(TimeValue("00:33:00"))) Then 
```

进一步阅读浮点错误： [Link](https://stackoverflow.com/questions/235409/compare-double-in-vba-precision-problem) [Link2](http://www.vb-helper.com/howto_net_compare_float.html) [Link3](http://www.cpearson.com/excel/rounding.htm)

# git - Git 中的 CVS 更新等价物

> ID：12908143
> 
> 赞同：1
> 
> 时间：2012-10-16T05:33:30.790
> 
> 标签：git, repository, git-checkout

我是 git 新手。所以请原谅基本问题。
我有几个 repos 结帐：`Folder1`is on`Server1`和`Folder2`is on `Server2`。

`Folder2`只有“ `git pull`”改变。
这会获取从 Folder1 签入的所有文件。

我只想更新特定文件，例如“cvs update filename”

```
cvs update filename 
```

我尝试了“ `git checkout -- filename`”，它根本没有做任何事情。
我按照以下步骤操作：s

```
#Commit and push changes in foo.txt from Folder1 on Server1.
# On Servers 
cd Folder2
git checkout -- foo.txt 
```

上面的命令只是不做任何更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T05:45:14.623

如果您将提交从 repo1 推送到 repo2，那么 repo2 应该直接看到更新的文件。
但以防万一，您需要：

```
git fetch repo1
git checkout repo1/master -- path/to/file 
```

前提是`repo2`有一个名为“ `repo1`”的遥控器。
如果该遥控器名为“ `origin`”（默认名称），则

```
git fetch origin
git checkout origin/master -- path/to/file 
```

在这两种情况下，要从远程仓库（如`repo1`）查看特定文件的更新，您需要先将该远程仓库获取到`repo2`.

# java - Theme Resolver Example of Spring MVC

> ID：12908149
> 
> 赞同：-1
> 
> 时间：2012-10-16T05:34:05.370
> 
> 标签：java, spring-mvc, themes

How can I get list of themes by programming in Theme Resolver Example of Spring MVC?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T10:25:30.560

以下配置您需要在 xml 文件中进行。

```
<!--  Configuration for Theme Selection -->
    <!-- Note: property files for theme-XXX should be exist into build path.should be in:/WEB-INF/classes/ -->
        <bean id="themeSource"
        class="org.springframework.ui.context.support.ResourceBundleThemeSource">
            <property name="basenamePrefix"  value="theme-"/>
        </bean>

        <bean id="themeChangeInterceptor"
            class="org.springframework.web.servlet.theme.ThemeChangeInterceptor">
            <property name="paramName" value="theme" />
        </bean>

        <bean id="themeResolver"
            class="org.springframework.web.servlet.theme.SessionThemeResolver">
            <property name="defaultThemeName" value="green" />
        </bean>

        <bean id="handlerMapping"
            class="org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping">
            <property name="interceptors">
                <list>
                    <ref bean="themeChangeInterceptor" />
                </list>
            </property>
        </bean> 
```

然后在您的属性文件中，您需要为相应主题指定 CSS 文件的路径。

```
css.style=/Web/resources/css/style.css 
```

希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-07T05:43:15.360

您应该先用谷歌搜索并自己尝试，然后在遇到任何异常时提出任何问题。

为此，我们将以下代码添加到 spring-servlet.xml 文件中。

```
<bean id="themeSource"    class="org.springframework.ui.context.support.ResourceBundleThemeSource">         
<property name="basenamePrefix" value="theme-" /> 
</bean>  

<!-- Theme Change Interceptor and Resolver definition -->
<bean id="themeChangeInterceptor"    class="org.springframework.web.servlet.theme.ThemeChangeInterceptor">     
<property name="paramName" value="theme" /> 
</bean> 

<bean id="themeResolver"    class="org.springframework.web.servlet.theme.CookieThemeResolver">     
<property name="defaultThemeName" value="default" /> 
</bean>   

<bean id="handlerMapping"    class="org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping">     
<property name="interceptors">         
<list>             
<ref bean="localeChangeInterceptor" />             
<ref bean="themeChangeInterceptor" />         
</list>     
</property> 
</bean> 
```

在上面的配置中，首先我们添加了 themeSource bean。请注意，这个 bean 是类 ResourceBundleThemeSource 的一个实例，我们还指定了一个属性 basenamePrefix，其值为“theme-”。ResourceBundleThemeSource 类将加载包含以前缀“theme-”开头的主题定义的属性文件。因此，如果我们在项目中定义了 3 个新主题（默认、黑色和蓝色），那么我们将创建 3 个属性文件，同时具有某些配置属性。这些文件也将放置在项目类路径下。

接下来，我们定义了一个拦截器 bean themeChangeInterceptor，它是类 org.springframework.web.servlet.theme.ThemeChangeInterceptor 的一个实例。还要注意这里我们已经指定了一个带有值主题的属性 paramName。每当使用具有不同值的参数“theme”发出请求时，都会调用此拦截器。

一旦 themeChangeInterceptor 拦截了主题中的变化，这些变化就会使用类 org.springframework.web.servlet.theme.CookieThemeResolver 存储在 cookie 中。我们已经在 spring-servlet.xml 配置文件中配置了这个类。另请注意，我们已使用此 bean 指定默认主题名称。

我们几乎完成了更改，剩下的最后一点是添加一个功能，供用户从 UI 中选择主题。为此，我们将更改 header.jsp 文件并添加 3 个具有不同主题的链接。用户可以单击任何此链接并更改 web 应用程序的主题。

这整个信息可以在这个链接[http://viralpatel.net/blogs/spring-3-mvc-themes-tutorial-example/找到](http://viralpatel.net/blogs/spring-3-mvc-themes-tutorial-example/)

希望这会帮助你。

# android - Android 接收通知

> ID：12908156
> 
> 赞同：-1
> 
> 时间：2012-10-16T05:34:34.843
> 
> 标签：android, notifications, xmpp

我正在制作一个聊天应用程序，我已经成功实现了聊天功能。但是当两个人都打开手机中打开的聊天屏幕时，我的聊天效果很好。如果另一个人不在同一个屏幕上，那么一个人发送的聊天消息就会丢失。我想在这里，如果另一个人不在同一个屏幕上，那么他/她应该收到聊天消息作为通知。请帮助我解决同样的问题。

谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-16T05:52:50.450

每当您发送聊天消息时，您都可以这样做，只需通过服务器检查用户的在线状态，如果不是，则使用通知发送该消息...

问候，

# android - Surfaceview相机的android自动对焦

> ID：12908158
> 
> 赞同：0
> 
> 时间：2012-10-16T05:34:42.583
> 
> 标签：android, surfaceview, autofocus

我在 android 中使用 Surfaceview 方式为我的 qrcode 扫描仪应用程序显示相机。我使用 onPreviewFrame 回调连续获取预览帧，并开始从中检测 qrcode。现在我想在这个应用程序中启用自动对焦功能。我的手机有自动对焦功能。我按照android文档中所说的程序进行操作。但是我的应用程序中仍然没有启用自动对焦。我不知道还有其他方法可以在这个使用surfaceview和onPreviewFrame的应用程序上启用自动对焦吗？如果我做错了，请纠正我？并告诉我如何正确地做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T11:57:27.903

试用并使用

```
<uses-feature android:name="android.hardware.camera.autofocus" /> 
```

在你的清单中

# asp.net-mvc-3 - DotNetNuke.SqlDataProvider 方法没有实现

> ID：12908160
> 
> 赞同：0
> 
> 时间：2012-10-16T05:34:56.743
> 
> 标签：asp.net-mvc-3, dotnetnuke, dotnetnuke-6

> **程序集“DotNetNuke.SqlDataProvider, Version=6.2.1.11, Culture=neutral, PublicKeyToken=null”中的“DotNetNuke.Data.SqlDataProvider”类型中的方法“AddFile”没有实现。**

一个随机错误。我的网站突然停止工作！对可能发生的事情有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T05:55:54.260

**这是一个 DotNetNuke.dll 版本问题。没有其他的。**

# android - ListView 问题中的按钮动画

> ID：12908162
> 
> 赞同：1
> 
> 时间：2012-10-16T05:34:58.897
> 
> 标签：android, listview, scroll

我正在使用一个列表视图，其中有下载按钮。

我想在单击事件上旋转按钮，直到某些后台下载过程正常工作。

旋转工作正常，但一个周期完成时会出现一些延迟。

主要问题是当按钮动画并且用户**滚动列表**时，不同行中的其他一些按钮也会启动动画。

我有一个**布尔类型数组**来保持按钮状态**isDownloading[]**。所以我得到那个位置的按钮并开始动画，但它产生了问题

**从动画中获取按钮的代码：**

```
else if (isDownloading[position] == true)
        {
                                    holder.downloadListBtn.setBackgroundResource(R.drawable.downloading);
                                    LinearLayout layout = (LinearLayout) holder.downloadListBtn.getParent();
                                    Button button = (Button) layout.getChildAt(0);
                                    ButtonAnimate(button);
        } 
```

**动画按钮的代码：**

```
public void ButtonAnimate(Button b)
        {
            RotateAnimation animation = new RotateAnimation(0, 360, Animation.RELATIVE_TO_SELF, 0.5f, Animation.RELATIVE_TO_SELF, 0.5f);
            animation.setDuration(4500);
            animation.setRepeatCount(100);
            b.startAnimation(animation);
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T06:18:26.863

所有按钮都开始动画，因为它们具有相同的 id，当它们获得焦点时，它们开始动画。所以，你要做的是分配不同的 id 或标签。

根据该 id 和标签，使该按钮旋转。

在按钮单击时尝试此代码

```
 Rotater.runRotatorAnimation(this, v.getId());

 public class Rotater {
public static void runRotatorAnimation(Activity act, int viewId) {

    // load animation XML resource under res/anim
    Animation animation = AnimationUtils.loadAnimation(act, R.anim.rotate);
    if (animation == null) {
        return; // here, we don't care
    }
    // reset initialization state
    animation.reset();
    // find View by its id attribute in the XML
    View v = act.findViewById(viewId);
    // cancel any pending animation and start this one
    if (v != null) {
        v.clearAnimation();
        v.startAnimation(animation);
    }
}
 } 
```

这是rotate.xml

```
<set xmlns:android="http://schemas.android.com/apk/res/android"
   android:interpolator="@android:anim/linear_interpolator" >
   <rotate
    android:duration="2000"
    android:fromDegrees="0"
    android:pivotX="50%"
    android:pivotY="50%"
    android:repeatCount="infinite"
    android:startOffset="0"
    android:toDegrees="360" >
   </rotate> 
```

# r - RgoogleMaps PlotOnStaticMap 不向 png 文件添加点

> ID：12908166
> 
> 赞同：2
> 
> 时间：2012-10-16T05:35:22.420
> 
> 标签：r, rgooglemaps

我正在尝试使用 RgoogleMaps 保存一个点叠加到 png 文件的地图。我能够在绘图设备中成功创建地图和覆盖点，但无法弄清楚如何将点写入我的地图的 png 文件。

我使用的是 Mac OS X Lion 10.7.5 R 版本 2.15.0

使用 R 文档中的示例代码，我得到了相同的结果：我打开的绘图设备上有行，但没有写入 png 文件。

这是我正在使用的示例代码：

```
lat = c(40.702147,40.718217,40.711614);
lon = c(-74.012318,-74.015794,-73.998284);
center = c(mean(lat), mean(lon));
zoom <- min(MaxZoom(range(lat), range(lon)));
#this overhead is taken care of implicitly by GetMap.bbox();              
MyMap <- GetMap(center=center, zoom=zoom,markers = '&markers=color:blue|label:S|40.702147,-74.015794&markers=color:green|label:G|40.711614,-74.012318&markers=color:red|color:red|label:C|40.718217,-73.998284', destfile = "MyTile1.png");

tmp <- PlotOnStaticMap(MyMap, lat = c(40.702147,40.711614,40.718217), lon = c(-74.015794,-74.012318,-73.998284), destfile = "MyTile1.png", cex=1.5,pch=20,col=c('red', 'blue', 'green'), add=FALSE);
#and add lines:
PlotOnStaticMap(MyMap, lat = c(40.702147,40.711614,40.718217), lon = c(-74.015794,-74.012318,-73.998284), lwd=1.5,col=c('red', 'blue', 'green'), FUN = lines, add=TRUE) 
```

我知道 png 设备正在工作，因为它有效：

```
png('my.png')
plot(seq(1:10))
dev.off() 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T17:50:42.117

要使用 PlotOnStaticMap 向 png 文件添加点和线，可能需要在调用 PlotOnStaticMap 之前为绘图设备显式设置 type='cairo-png'。在我的机器和我的 R 环境中，这有效：

```
png('MyTile1.png',type='cairo-png')
dev.cur()
png 3 # returned value 
```

但这不是

```
png('MyTile1.png')
dev.cur()
quartz_off_screen 2 # returned value 
```

下面的代码将点和线写入 MyTile1.png：

```
lat = c(40.702147,40.718217,40.711614);
lon = c(-74.012318,-74.015794,-73.998284);
center = c(mean(lat), mean(lon));
zoom <- min(MaxZoom(range(lat), range(lon)));             

MyMap <- GetMap(center=center, zoom=zoom,markers = '&markers=color:blue|label:S|40.702147,-74.015794&markers=color:green|label:G|40.711614,-74.012318&markers=color:red|color:red|label:C|40.718217,-73.998284')

# explicitly set device to png with type='cairo-png'
png('MyTile1.png',type='cairo-png')     
# add points            
tmp <- PlotOnStaticMap(MyMap, lat = c(40.702147,40.711614,40.718217), lon = c(-74.015794,-74.012318,-73.998284), cex=1.5,pch=20,col=c('red', 'blue', 'green'));
#and add lines:
PlotOnStaticMap(MyMap, lat = c(40.702147,40.711614,40.718217), lon = c(-74.015794,-74.012318,-73.998284), lwd=1.5,col=c('red', 'blue', 'green'), FUN = lines, add=TRUE)
dev.off() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T07:08:42.147

你可以按照你的最后一行

```
dev.print(png, width = 800, file = "MyTile2.png") 
```

或类似的东西

# c# - 检查用户是否是组的成员（ldap）

> ID：12908167
> 
> 赞同：0
> 
> 时间：2012-10-16T05:35:52.237
> 
> 标签：c#, windows-mobile, ldap, compact-framework

我想检查用户是否是 c# 中组的成员。该应用程序在 windows mobile 6.1 上运行，我必须将 ldap 函数与`[DllImport]`.

有人有这个样品吗？连接到 ldap 服务器并检查用户/密码是否有效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T07:27:32.973

为什么不使用框架中已有的内容。

看看这个：[WindowsPrincipal.IsInRole 方法（字符串）](http://msdn.microsoft.com/en-us/library/fs485fwh(VS.85).aspx)

```
WindowsIdentity identity = WindowsIdentity.GetCurrent();
WindowsPrincipal principal = new WindowsPrincipal(identity);
principal.IsInRole("role name"); 
```

或者

如果你使用 C#/VB.Net 和 System.DirectoryServices，这个片段应该可以解决问题：

```
DirectoryEntry rootEntry = new DirectoryEntry("LDAP://dc=yourcompany,dc=com");

DirectorySearcher srch = new DirectorySearcher(rootEntry);
srch.SearchScope = SearchScope.Subtree;

srch.Filter = "(&(objectClass=user)(sAMAccountName=yourusername)(memberof=CN=yourgroup,OU=yourOU,DC=yourcompany,DC=com))";

SearchResultCollection res = srch.FindAll();

if(res == null || res.Count <= 0)
    Console.WriteLine("This user is NOT a member of this group");
else
    Console.WriteLine("This user is INDEED a member of this group"); 
```

注意：这只会测试直接组成员身份，不会测试您域中所谓的“主要组”（通常是“cn=Users”）的成员身份。它不处理嵌套的成员资格，例如，用户 A 是组 A 的成员，而组 A 是组 B 的成员——用户 A 确实也是组 B 的成员这一事实并没有在这里得到反映。

参考：[如何编写 LDAP 查询来测试用户是否是组的成员？](https://stackoverflow.com/questions/1032351/how-to-write-ldap-query-to-test-if-user-is-member-of-a-group)

# php - iphone 应用程序 php Web 服务上的 500 内部服务器错误

> ID：12908170
> 
> 赞同：0
> 
> 时间：2012-10-16T05:36:01.030
> 
> 标签：php, iphone, web-services, connection-timeout

我们有共享相同 php web 服务的 iphone 和 android 应用程序。我们在 iphone 应用程序的几个地方发现了 500 内部服务器错误。

当我们第一次尝试访问 Web 服务时，它会出现 500 错误。如果我同时再次尝试它的工作没有错误。但是如果我在大约 10 分钟后尝试访问，它会再次给出 500 错误。

仅供参考：我们检查了数据库连接，它们已正确关闭。

下面是给出错误的示例服务脚本。

```
<?php
include('JSON.php');
include 'Connection.php';

$handle = fopen('php://input','r');

$jsonInput = fgets($handle);
$decoded = json_decode($jsonInput,true);

$postData = file_get_contents("php://input");
$postData = str_replace('&quot;', '"', $postData);
$post = json_decode($postData,true);

$email = $post['Email'];
$password = $post['Password'];

$sqlstr = mysql_query("SELECT admin_id, CONCAT(`first_name`, ' ', `last_name`) AS admin_name FROM admin where email='".$email."' AND password='".$password."'");
$ages = array();

if (mysql_numrows($sqlstr) != 0) {
    $row = mysql_fetch_array($sqlstr);
    $ages [0] = array("output"=>"Success", "userid"=>$row['admin_id'], "username"=>$row['admin_name']);
}
else{
    $ages [0] = array("output"=>"Failed");
}
echo json_encode($ages);
mysql_close($link);
?> 
```

我不确定这是否类似于连接超时。

**会不会是 iphone app 的错误？**
**或 php 网络服务？**
**还是服务器端错误？**

我们正在检查这个一个多星期，但仍然无法找到问题。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-05-23T09:44:34.483

代替

```
mysql_numrows 
```

和

```
mysql_num_rows 
```

# php - 如何在 joomla 1.7 的模块中隐藏未发布的类别文章？

> ID：12908171
> 
> 赞同：0
> 
> 时间：2012-10-16T05:36:09.550
> 
> 标签：php, joomla

这是我的模块中使用的功能所以我用它来显示具有已发布状态和某些条件的文章。

```
class modArtbyauthorHelper

{

    function loadCbDetails(&$params)

    {

        $topid = JRequest::getInt('id');

        $db = JFactory :: getDBO();

        $query = "SELECT firstname, user_id, lastname, avatar, cb_category, cb_informationnew FROM #__comprofiler WHERE cb_category = ".$topid;

        $db->setQuery($query);

        $result = $db->loadObjectList();

        return $result;

    }

    function loadArticles(&$params)

    {

        $helper = new modArtbyauthorHelper();

        $result = $helper->loadCbDetails($params);

        $cb_userid = $result[0]->user_id; 
        $catid = $result[0]->cb_category; 

        $limit = $params->get('limit');

        $db = JFactory :: getDBO();

        $query = "SELECT title, id FROM #__content WHERE state=1 AND created_by = ".$cb_userid." AND catid <> ".$catid." ORDER BY created DESC LIMIT ".$limit; 

        $db->setQuery($query);

        $result = $db->loadObjectList();

        return $result;

    }

} 
```

我想为它隐藏未发表的文章。但无法找到它所需的确切条件。所以请给你的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T05:42:13.190

尝试归档未发表的文章。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T05:53:31.927

您应该使用 Joomla 1.6 模型对象和 $model->setState('fileter.published', 1)。我认为由于请求参数，您将获得所有结果。

这是我用来在 Joomla >1.6 中获取文章的简化版本

[https://gist.github.com/3897436](https://gist.github.com/3897436)

# css - 消除之间的空间 和 ? HTML5

> ID：12908174
> 
> 赞同：1
> 
> 时间：2012-10-16T05:36:17.230
> 
> 标签：css, html, stylesheet, element, styling

这是我的 CSS：

```
 header {
    hgroup {
      background: #1F1E1E;
      height: 100px;

      padding: 0px;
      margin: 0px;

      color: #FEFFFE;

      font-family: Arial, Helvetica, sans-serif;
      font-size: 1em;

      h1,h2 {
        padding: 0px;
        margin: 0px;
      }
    }

    nav {
      background: #FEFFFE;
      height: 60px;

      padding: 0px;
      margin: 0px;

      -webkit-box-shadow: 0px 2px 1px rgba(50, 50, 50, 0.2);
      -moz-box-shadow:    0px 2px 1px rgba(50, 50, 50, 0.2);
      box-shadow:         0px 2px 1px rgba(50, 50, 50, 0.2);

      ul {
        list-style: none;
        padding: 0px;

        li {
          float: left;
          padding: 20px 30px 20px 0px;
        }
      }
    }
  } 
```

这是我的 HTML：

```
<header>
    <hgroup>
        <h1>Lorem Ipsum</h1>
        <h2>Lorem ipsum dolor sit amet.</h2>
    </hgroup>
    <nav>
        <ul>
            <li><a href="#">Home</a></li>
            <li><a href="#">Products</a></li>
            <li><a href="#">Contact</a></li>
            <li><a href="#">About</a></li>
        </ul>
    </nav>
    <div class="clearfix"></div>
</header> 
```

最终结果是这样的：

![在此处输入图像描述](../Images/29d26ada983596bbe52e8ba6f182c49f.png)

`hgroup`正如你所看到的，在和`nav`标签之间有一个间隙。我似乎无法弄清楚如何删除它。我已经尝试在几乎所有我认为会删除它的地方放置`padding: 0px;`和`margin: 0px;`，但无济于事。我能做些什么？

如果你问为什么我的 CSS 是这样的结构，那是因为我使用的是[LESS](http://lesscss.org/)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T05:44:44.467

您的 ul 可能有边距，请尝试添加`margin:0`它:)

# orientation - R如何为所有传感器注册SensorEventListener

> ID：12908176
> 
> 赞同：2
> 
> 时间：2012-10-16T05:36:17.860
> 
> 标签：orientation, accelerometer, sensors

当我研究一些关于传感器的东西时，我发现当我使用`sensorlistener`（在我的代码中它的`mysensorlistener`）来注册我设备中的所有传感器时，它可以获得我需要的东西。如果我将监听器更改为`sensoreventlistener`（在我的代码中`mysensoreventlistener`），它只能获取加速度计数据。

我想知道我是否可以获得所有数据，只需注册一个`sensorevevtlistener`.

这是代码：

```
package com.example.testaccelerometer;

import com.example.testaccelerometer.R;

import android.app.Activity;
import android.hardware.Sensor;
import android.hardware.SensorEvent;
import android.hardware.SensorEventListener;
import android.hardware.SensorListener;
import android.hardware.SensorManager;
import android.os.Bundle;
import android.widget.TextView;

public class AccelerometerReader extends Activity {

    TextView atvx;
    TextView atvy;
    TextView atvz;
    TextView otvx;
    TextView otvy;
    TextView otvz;
    SensorManager mySensorManager;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.disp);
        atvx = (TextView)findViewById(R.id.atvx);
        atvy = (TextView)findViewById(R.id.atvy);
        atvz = (TextView)findViewById(R.id.atvz);
        otvx = (TextView)findViewById(R.id.otvx);
        otvy = (TextView)findViewById(R.id.otvy);
        otvz = (TextView)findViewById(R.id.otvz);
        mySensorManager = (SensorManager)getSystemService(SENSOR_SERVICE);
    }
    @Override
    protected void onPause() {
        // TODO Auto-generated method stub
        mySensorManager.unregisterListener(mySensorEventListener);
        //mySensorManager.unregisterListener(aSensorEventListener);
        //mySensorManager.unregisterListener(oSensorEventListener);
        super.onPause();
    }
    @Override
    protected void onResume() {
        // TODO Auto-generated method stub
        //mySensorManger.registerListener(mySensorListener, SensorManager.SENSOR_ALL,SensorManager.SENSOR_DELAY_FASTEST);
        mySensorManager.registerListener(mySensorEventListener, mySensorManager.getDefaultSensor(Sensor.TYPE_ALL), SensorManager.SENSOR_DELAY_GAME);
        //mySensorManager.registerListener(aSensorEventListener, mySensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER), SensorManager.SENSOR_DELAY_GAME);
        //mySensorManager.registerListener(oSensorEventListener, mySensorManager.getDefaultSensor(Sensor.TYPE_ORIENTATION), SensorManager.SENSOR_DELAY_GAME);
        super.onResume();
    }
    /*private SensorListener mySensorListener = new SensorListener(){

        public void onAccuracyChanged(int sensor, int accuracy) {
            // TODO Auto-generated method stub

        }

        public void onSensorChanged(int sensor, float[] values) {
            // TODO Auto-generated method stub
            switch(sensor){
            case SensorManager.SENSOR_ACCELEROMETER:
                atvx.setText("X轴方向的加速度：" + values[0]);
                atvy.setText("Y轴方向的加速度：" + values[1]);
                atvz.setText("Z轴方向的加速度：" + values[2]);
                break;
            case SensorManager.SENSOR_ORIENTATION:
                otvx.setText("X轴方向的角速度：" + values[0]);
                otvy.setText("Y轴方向的角速度：" + values[1]);
                otvz.setText("Z轴方向的角速度：" + values[2]);
            }
        }

    };*/
    private SensorEventListener mySensorEventListener = new SensorEventListener() {

        public void onSensorChanged(SensorEvent event) {
            // TODO Auto-generated method stub
            float[] values1;
            float[] values2;
            switch(event.sensor.getType()){
            case Sensor.TYPE_ACCELEROMETER:
                values1 = event.values;
                atvx.setText("X轴方向的加速度：" + values1[0]);
                atvy.setText("Y轴方向的加速度：" + values1[1]);
                atvz.setText("Z轴方向的加速度：" + values1[2]);
                System.out.println("run....accele");
                break;
            case Sensor.TYPE_ORIENTATION:
                values2 = event.values;
                otvx.setText("X轴方向的角速度：" + values2[0]);
                otvy.setText("Y轴方向的角速度：" + values2[1]);
                otvz.setText("Z轴方向的角速度：" + values2[2]);
                System.out.println("run....orien");
                break;
            }

        }

        public void onAccuracyChanged(Sensor sensor, int accuracy) {
            // TODO Auto-generated method stub

        }
    };
    /*
     * test
     */
    /*private SensorEventListener aSensorEventListener = new SensorEventListener() {

        public void onSensorChanged(SensorEvent event) {
            // TODO Auto-generated method stub
            float[] values1;
            if(event.sensor.getType()==Sensor.TYPE_ACCELEROMETER){
                values1 = event.values;
                atvx.setText("X轴方向的加速度：" + values1[0]);          //accelerometer
                atvy.setText("Y轴方向的加速度：" + values1[1]);
                atvz.setText("Z轴方向的加速度：" + values1[2]);
                System.out.println("run....accele");
            }

        }

        public void onAccuracyChanged(Sensor sensor, int accuracy) {
            // TODO Auto-generated method stub

        }
    };*/
        /*private SensorEventListener oSensorEventListener = new SensorEventListener() {

        public void onSensorChanged(SensorEvent event) {
            // TODO Auto-generated method stub
            float[] values1;
            if(event.sensor.getType()==Sensor.TYPE_ORIENTATION){
                values1 = event.values;
                otvx.setText("X轴方向的角速度：" + values1[0]);         //orientation
                otvy.setText("Y轴方向的角速度：" + values1[1]);
                otvz.setText("Z轴方向的角速度：" + values1[2]);
                System.out.println("run....orien");
            }

        }

        public void onAccuracyChanged(Sensor sensor, int accuracy) {
            // TODO Auto-generated method stub

        }
    };*/
} 
```

当我上网时，有人说 SensorEventListener 不能使用 TYPE_ALL 注册所有传感器，但可以使用它来获取传感器列表。喜欢这里的代码：

```
//  注册加速度传感器
        sensorManager.registerListener(this,
                sensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER),
                SensorManager.SENSOR_DELAY_FASTEST);

        //  注册磁场传感器
        sensorManager.registerListener(this,
                sensorManager.getDefaultSensor(Sensor.TYPE_MAGNETIC_FIELD),
                SensorManager.SENSOR_DELAY_FASTEST);

        //  注册光线传感器
        sensorManager.registerListener(this,
                sensorManager.getDefaultSensor(Sensor.TYPE_LIGHT),
                SensorManager.SENSOR_DELAY_FASTEST);

        //  注册方向传感器
        sensorManager.registerListener(this,
                sensorManager.getDefaultSensor(Sensor.TYPE_ORIENTATION),
                SensorManager.SENSOR_DELAY_FASTEST); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T17:47:35.957

If you just need to register all sensors to the same listener I would try something like:

```
List<Sensor> sensors = mySensorManager.getSensorList( Sensor.TYPE_ACCELEROMETER  );
for(int i = 0; i < sensors.lenght(); i++) {
  mySensorManager.registerListener(mySensorListener, sensors[i], SensorManager.SENSOR_DELAY_FASTEST);
} 
```

And then when reading the info use a switch like:

```
this.mySensorListener = new SensorEventListener() {
public void onSensorChanged(SensorEvent event) {
    Sensor sensor = event.sensor;
    int type = sensor.getType();
    switch (type) {
    case Sensor.TYPE_ACCELEROMETER:
            doSomethingInteresting();
        break;
    case Sensor.TYPE_LINEAR_ACCELERATION:
                doSomethingInteresting();
        break;
    case ....:
                ......
                ......
            default:
        break;
         }
}
}; 
```

The code isn't perfect so please do not just cut and paste it into yours because I don't think it'll compile.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-18T18:59:28.037

此外，当应用程序变得不可见时，不要忘记取消注册，否则电池会耗尽。（sensorManager 需要是类变量才能在方法内部可见）

```
 @Override
protected void onStop() {        
    sensorManager.unregisterListener(mysel);
    super.onStop(); //now use super method
    finish();
} 
```

# php - 如何在 CakePHP 的视图中呈现嵌套数组？

> ID：12908179
> 
> 赞同：1
> 
> 时间：2012-10-16T05:36:38.787
> 
> 标签：php, cakephp, loops, multidimensional-array

我有一个嵌套数组，它是通过 CakePHP 请求中的模型编译的。该数组可以嵌套在可变深度，并且内容将返回给用户。

目前，该数组的循环和渲染过程是使用请求的 View 元素中的函数完成的。此函数首先在基本数组的深度调用，然后对任何具有更多数组子元素的数组元素重复。例如。

```
function print_depth($elements) {
  foreach($elements as $element) {
    echo $element['title'];

    if($element['children']) {
      print_depth($element['children']);
    }
  }
}

print_depth($elements); 
```

通过这个过程，我可以打印出数组的所有级别，同时仍然保持视图内的标记灵活性（因此，它是可换肤的），但我认为这是处理此问题的函数的错误位置。

此操作是否有更 MVC 有效的流程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T06:46:13.750

从 MVC 的角度来看，它可能就在它所属的地方，因为视图的职责是为可视化表示准备数据。但是，对于更 DRY 的方法，您可以在帮助程序中实现此功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T06:47:58.053

创建一个助手而不是在视图代码中放置一个函数。

你所做的听起来像是渲染一棵树，那里已经有一个树助手。

[https://github.com/CakeDC/utils/blob/master/View/Helper/TreeHelper.php](https://github.com/CakeDC/utils/blob/master/View/Helper/TreeHelper.php)

# c# - 使用 .Net WPF 连接数码相机，例如 WebCam

> ID：12908190
> 
> 赞同：1
> 
> 时间：2012-10-16T05:37:47.127
> 
> 标签：c#, .net, camera

我想建立一个项目，我可以通过我的 WPF 软件使用数码相机来捕捉照片。所以我只想知道是否有一个 Dll 或代码可以在哪里连接我的数码相机，因为我们使用网络摄像头点击使用 .Net、WPF、C# 的图片

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T05:44:22.233

Firstly it really depends on your camera model, some specific camera do has some driver to turn it into a WebCam, so what you need to do is just code as you are using WebCam, however, if the camera do not have such a driver software, you need to go ahead code in hardware level to really make it happen like you are coding the specific driver for it, and different camera may need different driver which I bet you don't want to do it.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T05:44:23.217

This is very vendor-specific and I'd venture a guess that few to no digital cameras support remote operation via USB (or whatever the communication tech is). And even then you'll only be able to target specific Vendor / Model cameras. Using the built-in webcam is the most generalized way to snap photos programmatically.

Try Googling "programmatically control digital camera" ... that'll help you find a little more info.

# jquery - 如何在 jquerymobile 中隐藏浏览器 URL 路径？

> ID：12908191
> 
> 赞同：0
> 
> 时间：2012-10-16T05:37:49.817
> 
> 标签：jquery, jquery-mobile

我正在使用 mobilejquery 框架工作做游戏。一切正常，但我这里的情况非常糟糕，原因是，当游戏开始时，用户无法返回或首页，但它发生在浏览器中，用户可以使用前后按钮轻松随机播放.

jquerymobile 中还有另一个选项，可以将所有 html 文件嵌入到单个模板中。但我的情况是每个页面都没有视频，所以加载需要很长时间。

我怎样才能防止这种情况，或任何其他适当的方式？请建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T05:40:04.473

可能这个链接可以帮助你

[http://forum.jquery.com/topic/hide-address-bar-url](http://forum.jquery.com/topic/hide-address-bar-url)

# java - Server 2008 r2 环境中的 Java StringIndexOutOfBounds 异常

> ID：12908192
> 
> 赞同：2
> 
> 时间：2012-10-16T05:37:55.010
> 
> 标签：java, windows, string, 32bit-64bit

这是一段非常简单的代码，使用 jre 1.6 运行时环境并在 64 位服务器 Server 2008 R2 中运行： ....

```
 cntr = 0;
       while (cntr < localheaders.size()) {
                    String tempText = textstring.toUpperCase();
        int pos = 0;
        int lastindx = 0;
        int lendPos;
        int tendPos = 0;
        while ((pos > -1) && (tempText.length() > 0)) {
            int headerLengthbeforeUpper = localheaders.get(cntr).header.length();
            String aHeader = localheaders.get(cntr).header.toUpperCase(); 
            int headerLengthafterUpper = aHeader.length();                                                              
            pos = tempText.indexOf(aHeader);  
            // 10_21_2010
            if (pos > 0) { // ef 07-10-2011
                char c;
                try {
                    c = tempText.charAt(pos - 1);
                    if (Character.isLetterOrDigit(c))
                        pos = -1;
                } catch (Exception e) {
                    System.out.println("Value of pos->" + pos);
                    System.out.println("Length of the string->"
                            + tempText.length());
                                            System.out.println("header length before->"+headerLengthbeforeUpper);
                    System.out.println("header length after->"+headerLengthafterUpper);
                    e.printStackTrace();
                }

            }
........ 
```

我发现该语句`pos = tempText.toUpperCase().indexOf(aHeader);`（大约 10 行以下）被间歇性地设置为字符串`tempText`中大于字符串长度的值。这导致一个`java.lang.StringIndexOutOfBoundsException`. 索引始终在字符串实际长度的 100 以内。例如，在我今晚运行的测试中，`pos`对于长度为 24404 的字符串，变量设置为 24432。标题长度在大写之前和之后相同，以解决以下评论之一。请注意，如果我连续两次在同一文件上重新运行代码，则第二次不会发生错误。

一些附加信息：

1.  我不相信这是线程问题，因为只使用了一个线程。
2.  该代码在 32 位 XP 环境中运行良好。
3.  pos 和 tempText 都是本地定义的变量。
4.  当我输入 java -version 时，我看到以下内容：

> Java 版本“1.6.0_20”Jav(TM) SE 运行时环境（内部版本 1.6.0_20-b02） Java HotSpot(TM) 64 位服务器 VM（内部版本 16.3-b01，混合模式）

测试环境在 VMware Workstation 中运行。

我相信这是一个环境问题，给出错误的奇怪之处以及它只出现在我的 64 位测试环境中的事实。我试图找出问题的根源。有没有人，过去有过这种错误？是否有人知道与此特定 java 构建相关的可能导致此类错误的错误？

关于如何解决这个问题的任何想法？

谢谢，

艾略特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T08:39:37.493

看起来这个错误可能与您的问题有关：

[http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6942326](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6942326)

# objective-c - 为什么 UIViewController 的 view 属性不会自动调整 containerView 的大小？

> ID：12908194
> 
> 赞同：0
> 
> 时间：2012-10-16T05:37:57.983
> 
> 标签：objective-c, uiview, subview, xcode4.5, autoresize

我正在使用容器视图。containerView 有很多奇怪的地方。

奇怪的事情之一是视图的类型只是 UIView。那么，这个视图和所有其他子视图有什么不同呢？

然后我在阅读了一堆示例代码后开始设置。

```
[self.ContainerView addSubview:self.listBusinessViewController.view];// initialize' 
```

那个时候self.listBusinessViewController已经是self的一个child。所以自己有3个孩子。

令人惊讶的是 self.listBusinessViewController.view 的框架大小仍然是我在 xib 中设置的方式，而不是自动调整到 ContainerView 的大小。

如果我这样做：

```
[self.ContainerView addSubview:self.listBusinessViewController.view];// initialize'
PO(NSStringFromCGRect(self.ContainerView.frame));
PO(NSStringFromCGRect(self.listBusinessViewController.view.frame));
PD(self.listBusinessViewController.view.autoresizingMask);
PD(UIViewAutoresizingFlexibleWidth|UIViewAutoresizingFlexibleHeight); 
```

我有：

```
NSStringFromCGRect(self.ContainerView.frame): {{0, 48}, {320, 412}}
NSStringFromCGRect(self.listBusinessViewController.view.frame): {{0, 0}, {320, 480}}
self.listBusinessViewController.view.autoresizingMask: 18
UIViewAutoresizingFlexibleWidth|UIViewAutoresizingFlexibleHeight: 18 
```

因此，ContainerView 的高度为 412 listBusinessViewController.view 的高度为 480 autoresizingMask 为 18，这是预期的。这意味着它具有灵活的宽度、高度和不灵活的边框。

那么为什么listBusinessViewController.view的高度没有变成412，就像它的superview一样？

当然，我可以使用霸道的方式做到这一点

```
CGRect frameOfAllChild = CGRectMake(0, 0, self.ContainerView.frame.size.width, self.ContainerView.frame.size.height);
for (UIViewController * child in self.childViewControllers) {
    child.view.frame=frameOfAllChild;

} 
```

编码 ubber alles（至少 ubber xib）。但是，具有灵活高度和宽度的全部意义在于视图填充它的超级视图或它的窗口。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T06:20:57.107

将视图添加到超级视图不会更改添加的视图的框架。如果在子视图存在*时*调整视图的大小，视图只会调整其子视图的大小。

在故事板中，容器视图可以与嵌入 segue 一起使用，以直接添加另一个视图控制器的内容。在这里，包含的视图控制器布置在与大小匹配的框架中。在 xibs 中（我必须承认，我没有使用过它们）它们只不过是帮助布局的占位符而已。在添加之前，您需要调整子视图控制器视图的框架大小。之后，调整容器大小将调整子视图的大小。

您的最终代码片段最好写为

```
child.view.frame = self.ContainerView.bounds; 
```

# algorithm - 最大连续和算法的实现

> ID：12908195
> 
> 赞同：1
> 
> 时间：2012-10-16T05:37:59.520
> 
> 标签：algorithm, lua

```
function maxContSum(array)
    local len = #array
    local maxSum = 0
    local runningSum = array[0]
    local j = 0
    local start, finish = 0,0
    for i=0, len-1,1 do
        if runningSum > 0 then
            runningSum =runningSum + array[i]
        else 
            runningSum = array[i]
            j = i
        end
        if runningSum > maxSum then
            maxSum = runningSum
            start = j
            finish = i
        end
    print ("maxsum is ", maxSum)
   end
end

a = {-2, 2,3,4,5,-7,8,0,-1,1,2,3,4}
maxContSum(a) 
```

这是我的代码。但我收到此错误消息：

```
lua: maxContSum.lua:8: attempt to compare number with nil stack
traceback:
        maxContSum.lua:8: in function 'maxContSum'
        maxContSum.lua:24: in main chunk
        [C]: ? 
```

需要帮助 谢谢！

编辑：我发现了我的问题。Lua 数组索引从 1 开始 :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T09:02:08.393

lua 中的数组从 1 开始索引，而不是从 0 开始

`local runningSum = array[0]`应该`local runningSum = array[1]` 和也`j = 1`

并且`for`循环应该从 1 开始到 n

```
for i = 1, len, 1 do 
```

# xml-parsing - 元素“programmeType”同时具有“类型”属性和“匿名类型”子元素。一个元素只允许使用其中一个

> ID：12908197
> 
> 赞同：1
> 
> 时间：2012-10-16T05:38:03.023
> 
> 标签：xml-parsing, xsd

M 遇到此错误，请帮帮我.....

我的 .xml 文件是

```
<?xml version="1.0"?>
<addresses xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:noNamespaceSchemaLocation='Lsc.xsd'>
<lscApplicationform>
 <programmes>
  <course>MBA(12 months)</course>
 </programmes>
 <personalDetails>
 <surname>Sagar</surname>
 <firstname>Shiva</firstname>
 <gender>Male</gender>
 <placeofbirth>Ulhasnagar</placeofbirth>
 <nationality>Indian</nationality>
 <countryofbirth>India</countryofbirth>
 <dateofbirth>1993-06-03</dateofbirth>
</personalDetails>
<permanentAddress>
</permanentAddress>
</lscApplicationform>
</addresses> 
```

我的xsd文件是

```
<?xml version="1.0"?>
    <xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">
     <xs:element name="lscApplicationForm">
      <xs:complexType>
       <xs:sequence>
        <xs:element name="programmeType" type="xs:string">
               <xs:simpleType>
         <xs:restriction base="xs:string">
          <xs:enumeration value="MBA( months)"/>
          <xs:enumeration value="MBA( months)"/>
          <xs:enumeration value="MSc InformationTechnology"/>
          <xs:enumeration value="Msc InternationalHospitalityManagement"/>
          <xs:enumeration value="Msc InternationalTourismManagement"/>
          <xs:enumeration value="BA(Hons)BusinessStudies"/>
          <xs:enumeration value="BSc(Hons)Computing"/>
          <xs:enumeration value="PhD/ProfessionaDoctorate"/>
          <xs:enumeration value="Other(pleasespecify)"/>
         </xs:restriction>
           </xs:simpleType>

                <xs:element name="personalDetails" type="xs:string"/>
        <xs:complexType>
         <xs:sequence>
          <xs:element name="Surname" type="xs:string"/>
           <xs:simpleType>
            <xs:restriction base="xs:string">
             <xs:length value="100"/>
            </xs:restriction>
           </xs:simpleType>

          <xs:element name="Gender"/>
           <xs:simpleType>
            <xs:restriction base="xs:string">
             <xs:pattern value="male|female"/>
            </xs:restriction>
           </xs:simpleType>

          <xs:element name="placeOfBirth" type="xs:string"/>
          <xs:element name="Nationality" type="xs:string"/>
          <xs:element name="CountryOfBirth" type="xs:string"/>
          <xs:element name="dob" type="xs:date"/>
         </xs:sequence>    
        </xs:complexType>
        <xs:element name="permanentAddress" type="xs:string"/>
               <xs:complexType> 
               </xs:complexType> 
</xs:element>              
</xs:sequence>
</xs:complexType>      
</xs:element>
    </xs:schema> 
```

还有一个错误是 s4s-elt-must-match.1: The content of 'programmeType' must match (annotation?, (simpleType | complexType)?, (unique | key | keyref)*))。发现问题始于：元素。

提前致谢....

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T15:37:09.593

XSD 模式文档的 XML 语法非常复杂，因此使用理解 XSD 语法并可以随时验证的编辑器确实值得。无论有没有这样的编辑器，您都可能想花一些时间来查看有关 XSD 的基本教程。

您的基本问题（多次以不同的形式出现）是您的模式文档不遵守模式文档的句法约束。

*   您的几个元素声明 have `type="xs:string"`，它指定元素的类型是`xs:string`，*还有*have `xs:simpleType`or `xs:complexType`children，它指定元素的类型是不同的。在任何元素声明上使用属性*或*`type`类型*定义*子项（simpleType 或 complexType），而不是两者。

*   您的几个元素声明被标记为空元素，紧跟一个`simpleType`or`complexType`元素，我猜它是元素声明的子元素，而不是后续兄弟元素。

一旦你解决了这些问题，你的模式文档就会在语法上正常，然后你可以将注意力转移到让它说出你想要说的东西上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T15:28:59.193

尝试这个：

```
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">

  <xs:element name="addresses">
    <xs:complexType>
      <xs:sequence>
        <xs:element ref="lscApplicationform"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>

  <xs:element name="lscApplicationform">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="programmes">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="course">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:enumeration value="MBA( months)"/>
                    <xs:enumeration value="MBA( months)"/>
                    <xs:enumeration value="MSc InformationTechnology"/>
                    <xs:enumeration value="Msc InternationalHospitalityManagement"/>
                    <xs:enumeration value="Msc InternationalTourismManagement"/>
                    <xs:enumeration value="BA(Hons)BusinessStudies"/>
                    <xs:enumeration value="BSc(Hons)Computing"/>
                    <xs:enumeration value="PhD/ProfessionaDoctorate"/>
                    <xs:enumeration value="Other(pleasespecify)"/>
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
            </xs:sequence>
          </xs:complexType>
        </xs:element>
        <xs:element name="personalDetails">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="Surname">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:length value="100"/>
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>

              <xs:element name="Gender">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:pattern value="male|female"/>
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>

              <xs:element name="placeOfBirth" type="xs:string"/>
              <xs:element name="Nationality" type="xs:string"/>
              <xs:element name="CountryOfBirth" type="xs:string"/>
              <xs:element name="dob" type="xs:date"/>
            </xs:sequence>
          </xs:complexType>
        </xs:element>

        <xs:element name="permanentAddress" type="xs:string"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>

</xs:schema> 
```

# android - 将多个 QCAR 项目与一个主项目合并

> ID：12908199
> 
> 赞同：1
> 
> 时间：2012-10-16T05:38:11.430
> 
> 标签：android, augmented-reality, qcar-sdk

我在增强现实中工作，我已经使用 QCAR 示例项目制作了一些演示项目，他们正在单独工作，但我想将它们组合到一个主项目中，并让用户可以自行选择以下任何项目，但是它产生了一个问题，因为所有 QCAR 项目都有一个名为“libs”的文件夹和一个 d 子文件夹，它们是“armeabi”和“armeabi-v7a”，它们加载自己的数据并且无法重命名有没有办法处理这个问题

谢谢你 .....！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T10:21:16.447

在做了几个小时的命中和试用方法后，我来到了这个并成功地执行了以下步骤

> 使用 QCAR 项目作为库
> 
> ```
> Add the Project (QCAR) in main Project
> 
>  Copy the Files from each QCAR Project`s libs folder into main Porject libs folder like this 
> ```

源文件夹（图像目标）复制“armeabi”和“armeabi-v7a”并将其粘贴到目标项目（主项目）libs文件夹中

现在，如果您想添加另一个 QCAr 项目，只需从上述两个文件夹中复制相关文件即可

> 例如“虚拟按钮”只是将以下文件复制到主项目的 libs 文件夹中
> 
> ```
> libs=> armeabi=>libVirtualButtons.so &
> 
> libs=> armeabi-v7a=>libVirtualButtons.so & 
> ```

等等

# android - 如何在android设备上模拟高CPU使用率

> ID：12908203
> 
> 赞同：0
> 
> 时间：2012-10-16T05:38:37.680
> 
> 标签：android

正如问题明确指出的那样，我想在一段时间内以任何给定的百分比模拟高 CPU 使用率，最好没有任何 3rd 方应用程序。当 CPU 使用率很高时，我正在尝试模拟这个以通过 adb/monkeyrunner 运行一些自动化测试用例。有可能这样做吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T05:44:52.060

You can't simulate. You can actually increment CPU usage by writing some intensive application which includes lot of math etc. There are also benchmarks which stress the CPU to 100% utilization. You can take a reference from them as well.

# sql - 什么是 PostgreSQL“集群”，我如何创建一个？

> ID：12908205
> 
> 赞同：71
> 
> 时间：2012-10-16T05:38:45.507
> 
> 标签：sql, database, postgresql, postgresql-9.1

我对数据库很陌生，我还没有做很多工作。现在我想了解术语数据库集群。我用谷歌搜索了很多，发现了很多有用的链接，但我无法理解它们——可能是因为我对数据库的基本知识很少，而且它们的语言非常技术性。

我需要关于以下几点的建议：

1.  PostgreSQL 中的数据库集群是什么？
2.  如何在 PostgreSQL 中创建集群？

* * *

## 回答 #1

> 赞同：142
> 
> 时间：2012-10-16T05:44:49.657

PostgreSQL 数据库“集群”是一个 postmaster 和一组子进程，它们都管理一个包含一个或多个数据库的共享数据目录。

[PostgreSQL 中的“集群”](http://www.postgresql.org/docs/current/static/creating-cluster.html)一词是一个历史怪癖^*，与“计算集群”的一般含义完全不同，[“计算集群”](http://en.wikipedia.org/wiki/Computer_cluster)通常是指协同工作以实现更高性能和/或可用性的计算机组。它也与 PostgreSQL command 无关`CLUSTER`，后者是关于组织表的。

* * *

如果您正在阅读本文，您可能实际上正在寻找有关高可用性、复制或池的信息，在这种情况下，您应该阅读[复制、集群和高可用性](http://wiki.postgresql.org/wiki/Replication,_Clustering,_and_Connection_Pooling)wiki 文章和 PostgreSQL 手册的[高可用性](http://www.postgresql.org/docs/current/static/high-availability.html)部分，然后查看工具像[repmgr](http://www.repmgr.org/)。

* * *

安装 PostgreSQL 时通常会为您创建一个集群；安装通常会`initdb`为您创建一个新集群。基本用户或中级用户需要创建集群或管理多个集群是非常不寻常的，因此如果您解释*了为什么*要这样做，以及*您要解决的潜在问题是什么*，将会有所帮助。[用户手册](http://www.postgresql.org/docs/current/static/creating-cluster.html)可能会更好地解释这一点，因为它假设您是从源代码安装 PostgreSQL，而实际上这样做的人相对较少。

每个集群的数据目录都是`initdb`使用 postmaster 创建和管理的，该 postmaster 通过系统服务（Windows 服务、`launchd`、`init`、`upstart`、`systemd`等，取决于操作系统和版本）或直接通过`pg_ctl`.

集群具有内置数据库`template0`，`template1`并且`postgres`；其他数据库由用户创建。

集群的 postmaster 通过侦听 tcp 端口来接受传入连接，并将这些连接交给工作后端。只有一个 postmaster 可以在给定端口上运行，因此每个集群必须有不同的端口。

[我在之前的回答](https://stackoverflow.com/a/12232731/398670)中写了更多关于 PostgreSQL 结构的内容。请参阅子标题“关系？模式？嗯？”。

如何在 Pg 中“创建”集群完全取决于您如何运行它。既然你在问，我怀疑你在一个使用 Ubuntu 系统上[`pg_wrapper`](http://manpages.ubuntu.com/manpages/lucid/man1/pg_wrapper.1.html)，在这种情况下你会使用`pg_wrapper`像[`pg_createcluster`](http://manpages.ubuntu.com/manpages/hardy/man8/pg_createcluster.8.html).

* * *

^* PostgreSQL 术语中的“集群”与术语“集群”的常见用法之间的混淆是一个令人困惑且令人遗憾的历史怪事，尤其是在讨论 PostgreSQL 实例的集群时。你可以拥有一个 PostgreSQL 集群，这很痛苦。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2021-07-06T12:39:26.390

这个答案可能很晚，但它可能对初学者有所帮助。

**什么是最基本的集群：**

在最基本的术语中，postgres 集群是一组具有自己配置的数据库。例如，您可能有一个使用 postgres v9 的集群，其中有 2 个数据库，并且所有数据库都将使用集群提供的相同配置，例如缓冲区大小、允许的连接数、连接池大小等。类似地，您可以拥有另一个集群使用 postgres 12，它也可以有多个数据库。您还可以拥有多个具有相同版本但配置不同的集群。

*以下命令仅在 ubuntu 上测试，可能不适用于其他操作系统。*

**要检查你有多少集群，你可以运行命令**

```
pg_lsclusters 
```

这会给你一个集群列表，包括它们的状态、端口、名称、数据目录的位置等。状态告诉你这个集群是否在线。您无法连接到离线集群。

**要创建新集群，请运行此命令**

```
initdb -D /usr/local/pgsql/data 
```

这告诉 postgres 初始化一个新数据库以及在哪里创建数据目录。当然，用户应该有权创建此目录。这也将创建通常位于 /var/lib/postgresql/version/clusterName 中的默认配置。

**要连接到集群，请使用此命令**

```
psql -U postgres -p 5436 -h localhost 
```

每个集群都有唯一的端口号，因此请确保选择正确的端口。

**您还可以启动、停止或检查集群的状态**

```
pg_ctlcluster 12 main stop 
```

这里 12 是 postgres 版本， main 是集群的名称。

**在集群中创建新数据库**

要创建一个新的数据库，首先需要连接到集群（使用上面提到的命令）。然后运行这个命令。

```
CREATE DATABASE mynewdb; 
```

# android - 在InitializeError中获取错误异常

> ID：12908207
> 
> 赞同：0
> 
> 时间：2012-10-16T05:38:55.823
> 
> 标签：android, android-ndk

当我创建 Epubreader 的对象时，我得到了这个错误。我正在做如下

```
EpubReader epubReader = new EpubReader(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T15:48:55.300

您可能需要在库中添加一些需要的 jar。看看这里：

[EPubReaderActivity 电子书阅读错误 ExceptionInInitializerError](https://stackoverflow.com/questions/10244462/ebook-reading-error)

# qt - 从 QT 应用程序模拟触摸事件

> ID：12908208
> 
> 赞同：2
> 
> 时间：2012-10-16T05:38:56.540
> 
> 标签：qt, qt4

我有一个接收的 QT 应用程序，`X&Y coordinates`我需要使用这些坐标模拟触摸事件（触摸或长触摸）。

我在 QT 参考文档中读到`QTouchEventSequence`该类可用于模拟触摸事件。我对 QT 很陌生，我不知道如何在应用程序中使用它。有人可以帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T06:28:35.677

所以你想使用 QtTest 模块。它有一个很好的[教程](http://qt-project.org/doc/qt-4.8/qtestlib-tutorial.html)。

为了快速入门，这里有一个 QTouchEventSequence 的快速示例：

```
// file test.cc
#include <QtGui>
#include <QtTest>

// This widget will receive touch events
class MyWidget: public QWidget
{
    Q_OBJECT
public:
    MyWidget(QWidget* parent = NULL)
      : QWidget(parent)
    {
        // With out this flag widget shouldn't receive any TouchEvent.
        setAttribute(Qt::WA_AcceptTouchEvents);
    }

protected:
    bool event(QEvent* e)
    {
        switch(e->type())
        {
            case QEvent::TouchBegin:
            case QEvent::TouchUpdate:
            case QEvent::TouchEnd:
                emit newTouchEvent(); // We will catch this in our test
                return true;
            default:
                return QWidget::event(e);
        }
    }

signals:
    void newTouchEvent();
};

// Here out test
class TouchTest: public QObject
{
    Q_OBJECT

private slots:
    void simpleTest();
};

void TouchTest::simpleTest()
{
    MyWidget widget;
    widget.show();
    QSignalSpy spy(&widget, SIGNAL(newTouchEvent()));

    // Simulate touch event
    QTest::touchEvent(&widget).press(0, QPoint(10, 10));

    QCOMPARE(spy.count(), 1);  // Did we called our signal. Yes. Cool!
}

QTEST_MAIN(TouchTest)
#include "test.moc" 
```

你应该运行 moc、qmake 和 make 来运行它：

```
qmake -project "CONFIG += qtestlib"
qmake
moc test.cc > test.moc
make
./test 
```

# javascript - 单击菜单项以在主干视图中突出显示

> ID：12908210
> 
> 赞同：2
> 
> 时间：2012-10-16T05:39:12.017
> 
> 标签：javascript, jquery, html, css, backbone.js

这对初学者来说是一个简单的问题，但到目前为止我还没有看到适合我需要的解决方案。基本上我有一个简单的菜单`ul`和`li`。有2个要求：

**Req1：**当点击一个时，`li`将获得新的类`.active`。

**Req2：**菜单项是动态的，这意味着我应该能够添加或删除任何菜单项（通过使用其他按钮）。

有*两种方法*可以做到这一点：

**方法一：将每个MenuView作为MenuItem进行遍历**

我有一个类似这样的 MenuView

```
el:  $('li'),

events: {
  "click" : "highlight"
},

highlight: function(e) {
  thisParent = $(e.target).parent();
  thisParent.siblings('.active').removeClass('active');
  thisParent.addClass('active');
}, 
```

**优点：**容易。这就是我现在所拥有的。

**缺点：**对 html 结构的依赖。如果它改为`div`具有许多层怎么办。

**方法 2：MenuCollection 的一个视图**

创建一个 MenuItemCollection 并为该集合使用 MenuView。MenuView的`el`将是`ul`（而不是`li`）。HTML 看起来像这样，带有单独的`id`：

```
<ul>
    <li id="leftmenu-one">one</li>
    <li id="leftmenu-two">two</li>
    <li id="leftmenu-three">three</li>
</ul> 
```

然后当检测到点击事件时，做两件事：

**2a。**删除所有`.active`类`ul li`

**2b。**将`.active`类添加到`e.target`DOM

**Pro：**解耦html设计

**缺点：**更多的代码。

**问题：**我想大多数人会说**方法 1**不好。但是有没有更好的方法3、4、5...？如何处理添加新菜单项？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-16T10:15:36.003

创建菜单项模型

```
 var MenuItem = Backbone.Model.extend({
        title: 'Default Title',
        isSelected: false
    }); 
```

和项目集合，将监听任何模型选择更改事件

```
 var MenuItemCollection = Backbone.Collection.extend({
        model: MenuItem,

        initialize: function() {
            this.on('change:isSelected', this.onSelectedChanged, this);
        },

        onSelectedChanged: function(model) {
            this.each(function(model) {
                if (model.get('isSelected') === true && !model.hasChanged('isSelected')) {
                    model.set({isSelected: false});
                }
            });
        }
    }); 
```

之后为菜单项创建一个视图

```
 var MenuItemView = Backbone.View.extend({
        tagName:  'li',
        events: {
          'click' : 'highlight'
        },

        initialize: function() {
            _.bindAll(this);
            this.model.on('change:isSelected', this.onSelectedChanged);
        },

        render: function() {
            this.$el.text(this.model.get('title'));
            return this;
        },

        onSelectedChanged: function() {
            if (this.model.get('isSelected') === true) {
                this.$el.addClass('active');
            }
            else {
                this.$el.removeClass('active');
            }
        },

        highlight: function() {
            this.model.set({isSelected: true});
        }
    }); 
```

和菜单本身一样

```
 var MenuView = Backbone.View.extend({
        tagName:  'ul',

        initialize: function() {
            _.bindAll(this);
        },

        render: function() {
            this.collection.each(function(model) {
                var item = new MenuItemView({model: model});
                this.$el.append(item.render().el);
            }, this);

            return this;
        }
    }); 
```

完整的工作 js 在[http://jsfiddle.net/Kf3SS/上发表评论](http://jsfiddle.net/Kf3SS/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T09:17:23.390

[**带有代码注释的 JSFiddle 演示**](http://jsfiddle.net/CoryDanielson/nNNBc/)

在你的视图中有一些你最想避免的 DOM 遍历......因为这个例子太小了，它不会破坏用户体验，但它是一个最佳实践和所有的好东西。

我认为这对你来说应该是一个很好的起点/例子。

### 变量设置

```
var MenuView
,   MenuItemView
,   MenuItemModel
,   menu          //MenuView Instance
,   menuItem      //MenuItemView Instance
; 
```

### 菜单项模型

```
MenuItemModel = Backbone.Model.extend({
    'defaults': {
        'url': undefined
    ,   'text': undefined
    }
}); 
```

### 菜单视图 (<ul>)

```
MenuView = Backbone.View.extend({
    'tagName': 'ul'
,   'id': 'MenuView'
,   'menuItems': []
,   'activeButton': undefined
,   'initialize': function ( menuObjJSON, parent ) {
        var menuItem;

        for ( menuItemIndex in menuObjJSON ) {
            this.addMenuItem( new MenuItemModel(menuObjJSON[menuItemIndex]) )
        }
        this.render(parent);
    }
,   'render': function ( parent ) {
        $(parent).append(this.$el);
    }
,   'addMenuItem': function ( model ) {
    var menuItem = new MenuItemView({
            'model': model, 
            'parentElement': this.$el
        });
        menuItem.on('changeActive', this.setActiveButton, this);
        this.menuItems.push( menuItem );
        return menuItem;
}
,   'removeMenuItem': function ( identifier ) {
        var i, menuItem, length = this.menuItems.length, menuItemsCopy;
        for (i = 0; i < length; i++) {
            if ( this.menuItems[i] ) {
                menuItemView = this.menuItems[i];
                if ( menuItemView.model.get('text').toLowerCase() === identifier.toLowerCase() 
                     || menuItemView.model.get('url').toLowerCase() === identifier.toLowerCase() ) 
                {
                    menuItemView.destroy();
                    debugger;
                    menuItemsEnd = this.menuItems.slice(i+1, length);
                    this.menuItems = [].concat(this.menuItems.slice(0,i), menuItemsEnd);
                    return true;
                }
            }
        }
        return false; //if menu item not found
    }
,   'setActiveButton': function ( activeMenuItem ) {
        if ( this.activeButton ) {
            this.activeButton.removeHighlight();
        }
        this.activeButton = activeMenuItem;    
    }
}); 
```

### 菜单项视图 (<li>)

```
MenuItemView = Backbone.View.extend({
    'tagName': 'li'
,   'className': 'menuItem'
,   'events': { 
        'click a': 'highlight'
    }
,    'initialize': function ( options ) {
        this.render(options.model, options.parentElement);
    }
,   'render': function ( model, parentElement ) {
        this.$el.append("<a href='" + model.get('url')+ "'>" + model.get('text') + "</a>");
        parentElement.append(this.$el);
    }
,   'highlight': function ( event ) {
        if ( !this.$el.hasClass('active') ) {
            this.trigger('changeActive', this);
            this.$el.addClass('active');
        }
    }
,   'removeHighlight': function () {
        this.$el.removeClass('active');
    }
,   'destroy': function () {
        this.unbind('click a');
        this.remove(); //unbind from DOM, remove DOM events
    }
}); 
```

### 菜单实例化

```
menu = new MenuView([
    {'url': '#home',    'text': 'Home'}
,   {'url': '#catpics', 'text': 'Cat Pics'}
,   {'url': '#dogpics', 'text': 'Dog Pics'}
,   {'url': '#about',   'text': 'About Us'}
], $('body')); 
```

### 添加新菜单项。（不是最实际的例子，而是一个起点）

```
setTimeout(function(){
    menu.addMenuItem({'url': '#contact', 'text': 'Contact Us'});
}, 1000);

setTimeout(function(){
    menu.addMenuItem({'url': '#Login', 'text': 'Log In'});
}, 2000);

setTimeout(function(){
    menu.addMenuItem({'url': '#W3bm4573r', 'text': 'W3bm4573r'});
}, 3000);

setTimeout(function(){
    menu.addMenuItem({'url': '#something', 'text': 'Something'});
}, 4000); 
```

### 删除菜单项（不是最实际的例子，而是一个起点）

```
setTimeout(function(){
    menu.removeMenuItem('#contact');
}, 5000);

setTimeout(function(){
    menu.removeMenuItem('about us');
}, 5000);

setTimeout(function(){
    menu.removeMenuItem('#SOMETHING');
}, 5000); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T06:27:16.660

我希望这对你有帮助。使用这个 jquery

```
$("ul li").click(function() {
$("ul li").removeClass("active");
$(this).addClass("active");
}); 
```

**[演示链接](http://jsfiddle.net/wgpUN/1/)**

# coronasdk - 没有白色背景的滚动文本（Corona SDK）

> ID：12908215
> 
> 赞同：1
> 
> 时间：2012-10-16T05:39:38.967
> 
> 标签：coronasdk

我正在使用 Corona SDK 为平板电脑创建交互式书籍。

该设计具有全屏图像，滚动文本覆盖在一侧。

我开始使用 widget.newScrollview 但它似乎非常受限。到目前为止，您似乎必须有一个白色背景，这有点扼杀美感。

有人知道背景的解决方法，还是处理大量滚动文本的替代方法？

我正在考虑将其制作为一系列图像，但是当为 iPad 3 等放大时，我担心内存和字体质量。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-09T17:02:30.750

创建时必须设置 hideBackground = true

```
local list = widget.newScrollview{

hideBackground = true,

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T14:02:56.200

```
local scrollView = widget.newScrollView{
        top = myTop, left = myLeft,
        width = someWidth, height = someHeight,
        bgColor = { 255, 255, 255, 210 },   --set the RGBA background color.
    } 
```

# jquery - 仅在条形图和折线图的 x 和 y 轴上放置整数 - Flot

> ID：12908222
> 
> 赞同：24
> 
> 时间：2012-10-16T05:40:28.723
> 
> 标签：jquery, flot

在 Flot.js 中，条形图和折线图默认将数字作为 x 和 y 轴的坐标。

![折线图样本](../Images/e11519745accc08046f30e4d55619b2c.png)

您如何制作坐标以使数字仅为整数或至少只有整数可见？

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2013-04-22T20:56:33.980

自原始答案以来，Flotr 的最新版本似乎使用了不同的选项来控制它：

```
 xaxis: {
        tickDecimals: 0
    } 
```

只需提供一个整数和要显示的小数位数。

注意：这是给 Flotr2 的。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-10-16T15:25:26.853

查看[文档](https://github.com/flot/flot/blob/master/API.md)`minTickSize`中的选项：

> 或者，您可以使用“minTickSize”指定您只是不希望尺寸小于特定刻度大小的刻度。

因此，在您的图形选项中，您可以像这样指定它：

```
$.plot($('#placeholder'),data,{
   //your options,
   xaxis: {
      minTickSize: 1
   }
}); 
```

看到它在这里工作：http: [//jsfiddle.net/ryleyb/g2CTz/](http://jsfiddle.net/ryleyb/g2CTz/)

# jquery - 在 MVCContrib Grid MVC3 中使用 Jquery 选择单选按钮

> ID：12908225
> 
> 赞同：0
> 
> 时间：2012-10-16T05:40:46.377
> 
> 标签：jquery, jquery-selectors, mvccontrib-grid

我在特定视图中添加了 MvcContrib 网格。在网格中，除了列数据，我还有一个单选按钮列。我正在尝试获取选定的单选按钮单击事件，但它没有按预期发生。我不知道实施有什么问题。你们可以看看并给出一些建议或代码片段来解决这个问题。

```
 <%= Html.Grid(Model.Items)
        .Columns(column =>
                     {
                         column.For(x => x.Name)
                             .Named(Html.OrderBy(null, "DisplayRestaurantsList", "Group", ViewContext.RouteData.Values, "sortBy", "sortDir", true, Model.SortDirection, Model.SortBy, "restaurantname", "Restaurant"));
                         column.For(x => x.Contact.GetDisplayName())
                             .Named(Html.OrderBy(null, "DisplayRestaurantsList", "Restaurant", ViewContext.RouteData.Values, "sortBy", "sortDir", true, Model.SortDirection, Model.SortBy, "administrator", "Administrator"));
                         column.For(x => Html.ActionLink("Remove", "RemoveRestaurant", "Group", new { id = x.ID, GroupID=x.Group.ID }, null))
                            .DoNotEncode();
                         column.For(x => Html.RadioButton("defaultRastaurant",x.ID,(!x.Group.ID.Value.ToString().IsEmptyOrNull() && x.ID==x.Group.DefaultRestaurantID) ? true:false)).Named("default").DoNotEncode();
                     })
        .Attributes(@class => "table-1 gapmb40")
        .Empty("There are no restaurants that match your criteria.")
        .RowStart(row => string.Format("<tr{0}>", row.IsAlternate ? "style=\"background-color:#CCDDCC\"" : ""))

  %> 
```

jQuery代码选择单选按钮点击：

```
$("input[type='radio']").click(function () {
               alert("kaustubh");
           }); 
```

也尝试过以下一个：

```
 $("input[name='defaultRastaurant']").change(function () {
           alert("kaustubh");               
                          }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T05:46:28.343

Looks like its a **event delegation** issue. The element is not present in the DOM when the event handler is associated to it..

Try this

```
$("body").on("click"," input[type='radio']" ,function () {
       alert("kaustubh");
 }); 
```

The body can be replaced by any non static parent in which the radiobuttons are present..

# ios - 如何在 iOS 的核心数据中创建和使用带有查询的 NSPredicate？

> ID：12908230
> 
> 赞同：2
> 
> 时间：2012-10-16T05:41:19.847
> 
> 标签：ios, core-data, nspredicate

如何`NSPredicate`在 iOS 的核心数据中创建和使用查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T05:50:11.903

“查询”是指一个`NSFetchRequest`? 如果是这样，这是一个简单的例子：

`NSString`假设您有一个名为 Car 的实体，它有一个名为“licenceNumber”类型的车牌号。

```
NSFetchRequest *request = [[NSFetchRequest alloc] init];
[request setEntity:[NSEntityDescription entityForName:@"Car" inManagedObjectContext:yourObjectContext]];
[request setPredicate:[NSPredicate predicateWithFormat:@"licenceNumber==%@", theLicensePlateNumberYouWant]]; 
```

话虽如此，您可能想先花一些时间阅读 Apple 的文档。

# php - 从 MYSql 获取数据并在 PHP 中使用单选按钮显示

> ID：12908236
> 
> 赞同：0
> 
> 时间：2012-10-16T05:42:02.467
> 
> 标签：php, mysql

谁能帮助我如何从`mysql`单选按钮中获取数据并显示它？

我想要的是，用户将在特定日期将项目输入数据库。这些项目将显示出来，并在其一侧出现单选按钮。另一个用户将从这些编码的项目中选择哪些项目将被批准和不批准。没有明确的项目类型。要输入到数据库的项目彼此不同，并且由用户单独定义。

谁能给我一个如何实现这些目标的例子？只需提供可以执行上述相同操作的示例。哪怕只是最基本的。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T05:48:03.590

What have you tried so far? You should first learn how to output radio buttons with values from PHP variables. Then look into prepared statements with PHP's mysqli to learn how to retrieve and/or store data in a database. After this, outputting radio buttons with data retrieved from mysqli is trivial.

# jquery - IE7和IE8中的jQuery AJAX刷新页面

> ID：12908238
> 
> 赞同：0
> 
> 时间：2012-10-16T05:42:03.823
> 
> 标签：jquery, ajax, jquery-validate

我正在尝试使用 GET 方法通过 ajax 提交表单。它在 FF、CHROME 和除 IE7 和 IE8 之外的其他浏览器中运行良好。我正在使用 jQuery 1.6，并且正在使用[jQuery Validation Plugin 1.10.0验证表单](http://ajax.aspnetcdn.com/ajax/jquery.validate/1.10.0/jquery.validate.min.js)

表单正在得到验证，但是当我尝试提交它时刷新页面而不是 AJAX。在控制台中它没有显示任何错误

这是我的 JS 函数

```
function formSubmit(formID, displayMssgID) {
    jQuery(function($) {
        var qstring = $('#' + formID).serialize();
        jQuery.validator.addMethod("notEqual", function(value, element, param) {
              return this.optional(element) || value != param;
            }, "Please enter your name.");
        var val = $('#' + formID).validate( {
            rules : {
                Mobile : {
                    number : true,
                    minlength : 8
                },
                Name: {
                    required: true,
                    notEqual: "Name"
                }
            }
        }).form();
        if (val) {
            $('.overlayss').fadeIn();
            $('#prospectLoading').fadeIn();
            $('#prospectLoading').append('<div class="process_img"> Registering your Request ...<br />Please Wait ...</div> ');
            $.ajax( {
                url : "index.php",
                data : qstring,
                cache:false,
                success : function(data) {

//                  resetFormFields(formID);
                    if(formID == 'siteVisit'){
                        $('#cart ul').html('');
                    }

                    //$('#' + displayMssgID).html('');
                    $('#prospectLoading').html('');
                    $('#prospectLoading').append(data);
                    //$('#' + displayMssgID).append(data);                  
                    window.setTimeout(function() {
                        $('#prospectLoading').html('');
                        $('.overlayss').fadeOut();
                        $('#prospectLoading').fadeOut();
                    }, 4000);                   
                }
            });
        }
    });
} 
```

您可以在此链接上查看实时示例[http://www.silverline-group.com/projects/Bangalore-Properties.html](http://www.silverline-group.com/projects/Bangalore-Properties.html)

在 IE7 或 IE8 中填写右侧栏的表格。

我做错什么了吗？或者是验证插件导致了这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T06:33:54.863

当我使用 Jquery 验证插件 1.10.0 进行表单控件验证时，我在 IE7 中遇到了同样的问题。name 属性不再需要它来工作。

[JQUERY 插件验证](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)

另一个重要的事情是，必须为您正在验证的元素以及表单和提交按钮指定**ID**和**名称。**虽然**FF**和**Chrome**没有这些也可以工作，但**IE 不能**。

没有名称的选项卡验证确实有效，但表单提交验证无效。

# java - 如何从 java 中的命令行启动 msaccess 数据库？

> ID：12908245
> 
> 赞同：0
> 
> 时间：2012-10-16T05:42:59.487
> 
> 标签：java, file, runtime, command-line-arguments

我正在做一个与数据库相关的项目，我有一个 MS-Access 数据库，位于：

`D:\My Documents\Database.accdb`

所以我使用以下命令来运行 MS-Access：

`cmd /c start MSACCESS D:\My Documents\database.accdb`

在java中：

```
view.addActionListener(new ActionListener() {
    public void actionPerformed(ActionEvent E) {
        String[] command = {"cmd", "/c", "start MSACCESS D:\\My Documents\\Database.accdb"}
        Runtime.getRuntime().exec(command);
    }
}); 
```

Microsoft Access 立即启动，但引发以下错误：

“用于启动 Microsoft Office Access 的命令行包含 Micosoft Access 无法识别的选项”

进而：

“找不到数据库文件 'D:\My.mdb'”

所以我假设它无法识别“我的文档”处的空格，并且在“我的”处截断，所以我尝试使用它的 NTFS 8.3 等效项：D:\MYDOCU~1\Database.accdb，然后抛出：

“找不到数据库文件 'D:\MYDOCU~1\Database.accdb'”

我真的不知道怎么了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T05:53:34.050

“D:\My Documents\Database.accdb” 包含一个空格并被视为附加参数（因此它希望`{"cmd", "/c", "start", "MSACCESS", "D:\\My", "Documents\\Database.accdb"}`调用程序）

使用类似的东西

```
String[] command = {"cmd", "/c", "start", "MSACCESS", "D:\\My Documents\\Database.accdb"}; 
```

反而...

**更新**

尝试手动“缩短”路径名非常危险且不明智。如果你需要走这条路，你真的应该利用对操作系统的本机调用来告诉名称应该如何缩短，所以你和操作系统都知道你在说同样的事情

**额外的**

另外，请尝试从命令提示符运行命令以确保其正常工作；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T06:00:04.690

试试这个：

```
String[] command = {"cmd", "/c", "start \"MSACCESS D:\\My Documents\\Database.accdb\""} 
```

PS：我不了解您的项目，但根据您想对数据库执行的操作，通过 JDBC 将其作为“普通”SQL 数据库打开可能是有意义的。如果您想这样做并且连接字符串有问题，请发布另一个问题。

# vb.net - 如何在 vb.net 中使用 msi 文件安装先决条件

> ID：12908246
> 
> 赞同：0
> 
> 时间：2012-10-16T05:43:02.240
> 
> 标签：vb.net, windows-installer, prerequisites

我已经为这个项目创建了一个 vb.net 项目我已经创建了安装项目，当我创建安装程序时，它会创建两个文件，它们是**Setup.exe**和**Myproject.msi**。在这个项目中，我想运行先决条件（当目标机器没有时）没有 sqlserver2008R2 然后它将安装，否则它将离开它）。如果我运行安装文件，它将安装所有先决条件，但我的客户只需要**msi**文件。所以请帮助我如何使用 msi 文件集成或运行安装文件。请帮我.....

我已经浏览了许多网站，但没有得到解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T14:00:27.410

实际上，这并不容易，因为如果您没有 Windows Installer 4.5（默认情况下仅从 Windows 7 安装），则无法从另一个 msi 安装。在这种情况下，更简单和正确的方法是创建引导的 setup.exe 并添加 MSSQLServer2008r2 作为先决条件。更多关于从另一个安装一个 msi 的信息可以在这里通过搜索“Chained MSI”找到

# java - JAX-RS/Jersey 2.x 是否利用 servlet 3.0 异步功能？

> ID：12908247
> 
> 赞同：2
> 
> 时间：2012-10-16T05:43:05.447
> 
> 标签：java, jersey, jax-rs, jsr311

JAX-RS/Jersey 2.x 是否利用 servlet 3.0 异步功能？或者它只是老式基于线程/请求的 servlet 架构之上的另一个异步层。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T12:04:25.937

Jersey 支持各种容器。在 Servlet 3.x 上运行时，它利用异步 servlet 功能来实现异步 API。在 Grizzly 上运行时，它使用 Grizzly NIO API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T08:12:11.820

据我了解，Jersey 中的 async 将出现在 2.0 版中（主要是 JAX-RS 2.0 的实现）。查看[项目](http://jersey.java.net/)的当前状态：

> 目前，我们正在全速开发将实现 JAX-RS 2.0 的 Jersey 2.0。里程碑构建可从 Maven 中央存储库获得。[您可以在此处查看](http://jersey.java.net/nonav/apidocs/snapshot/jersey/index.html)Jersey 2.0 API 文档的最新快照。更多信息可以在[Jersey 2.0 状态页面](http://jersey.java.net/jersey20.html)上找到。

查看文档，您可能会发现[AsyncResponse](http://jersey.java.net/nonav/apidocs/snapshot/jersey/index.html?javax/ws/rs/container/AsyncResponse.html)，我想这是一个好的开始。

# android - 通过单击每个列表视图项目行来调用不同的列表视图

> ID：12908252
> 
> 赞同：0
> 
> 时间：2012-10-16T05:43:37.390
> 
> 标签：android, android-layout, android-intent, android-emulator, android-listview

我正在制作一个应用程序，在其中我使用 xml 解析器将数据输入列表视图，并使用每个列表视图项目行我需要打开另一个列表视图，我可以打开另一个列表视图，但是每当我调用另一个列表视图时，我就没有得到视图每次我使用某些字段名称查看第一个列表视图时所需的列表视图，只有那些在两个列表视图中都匹配，例如：标题和描述，我已经尝试了很多方法但仍然无法解决这个问题，有人指导我我怎样才能实现我的目标。Noe：-我正在使用不同的视图，对于列表视图中的每个单击项目行，例如：- 在某些列表视图中，我只使用文本视图、图像视图、图像按钮，而在某处我使用文本视图、图像视图、图像按钮和复选框。

FancyItem.java 代码：-

```
public class FancyItem extends Activity {
// All static variables
static final String URL = "http://***.net/android/fabriclist.xml";
// XML node keys
static final String KEY_FANCY = "fancy"; // parent node
static final String KEY_TITLE = "title";
static final String KEY_DESCRIPTION = "desc";
static final String KEY_THUMB_URL= "thumb_url";
static final String KEY_TROUSERS = "trousers";
static final String KEY_JEANS = "jeans";
static final String KEY_SHIRTS = "shirts";

ListView fancy_list_view;
    LazyAdapter fancy_list_adapter;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

ArrayList<HashMap<String, String>> fancyList = 
    new ArrayList<HashMap<String, String>>();

    XMLParser parser = new XMLParser();
    String xml = parser.getXmlFromUrl(URL); // getting XML from URL
    Document doc = parser.getDomElement(xml); // getting DOM element

    NodeList nl = doc.getElementsByTagName(KEY_FANCY);
    // looping through all list nodes <list>
    for (int i = 0; i < nl.getLength(); i++) {
        // creating new HashMap
        HashMap<String, String> map = new HashMap<String, String>();
        Element e = (Element) nl.item(i);
        // adding each child node to HashMap key => value
        map.put(KEY_TITLE, parser.getValue(e, KEY_TITLE));
        map.put(KEY_DESCRIPTION, parser.getValue(e, KEY_DESCRIPTION));
        map.put(KEY_THUMB_URL, parser.getValue(e, KEY_THUMB_URL));
        map.put(KEY_TROUSERS, parser.getValue(e, KEY_TROUSERS));
        map.put(KEY_JEANS, parser.getValue(e, KEY_JEANS));
        map.put(KEY_SHIRTS, parser.getValue(e, KEY_SHIRTS));

        // adding HashList to ArrayList
        fancyList.add(map);
    }

    fancy_list_view=(ListView)findViewById(R.id.list);

    // Getting adapter by passing xml data ArrayList
    fancy_list_adapter=new LazyAdapter(this, fancyList);        
    fancy_list_view.setAdapter(fancy_list_adapter);

    // Click event for single list row
    fancy_list_view.setOnItemClickListener(new OnItemClickListener() {

    public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) 
            {

                if(position==0)
                    {
        Intent in = new Intent(CustomizedListView.this, FancyItem.class);
                        startActivity(in);
                    }
                                }

        });     
    }   
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T05:50:01.310

通常你有类似的东西

```
mListView.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> arg0, View arg1,
                int position, long id) {
                ...
                //your logic here depending on position
                } 
```

因此您可以使用位置变量来决定接下来要打开哪个列表视图。

# mysql - 如何从一组复合行中找到最大值？

> ID：12908254
> 
> 赞同：1
> 
> 时间：2012-10-16T05:43:42.383
> 
> 标签：mysql, sql, max, composite

我有一张桌子，例如：

```
Year | Month
------------
2011    10   
2011    11   
2012    5   
2012    6 
```

查询应返回最新“年”的最新“月”。

目前我正在做类似的事情

> Select MAX("Month") from table where "Year" in (select MAX("Year") from table)

但我对查询不满意。有人可以建议一种更紧凑、更清洁的方式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T05:46:03.350

试试这个

```
select top 1
    "Month"
from table
order by "Year" desc, "Month" desc 
```

好吧，对于 MySQL 我认为应该是

```
select
    "Month"
from table
order by "Year" desc, "Month" desc
limit 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T05:53:08.380

试试这个：

```
select t1.months from
(select top 1 t.months as months,max(t.years) as years from
(select years,max(months) as months from cal group by years) t
group by t.months) t1 
```

# c# - Cyber source 简单订单 api 示例应用程序给出“'Cyber Source.WSSecurity.Signature' 的类型初始化程序引发了异常。”

> ID：12908255
> 
> 赞同：1
> 
> 时间：2012-10-16T05:43:53.450
> 
> 标签：c#, soap, payment

我正在使用 SOAP 运行简单的订单 api 示例应用程序，我们可以从 Cyber​​source 官方网站下载该应用程序。我根据文档更改了 Mercerid 和 securitykey 路径。但是当我运行应用程序时，我得到了错误

> “'Cyber​​Source.WSSecurity.Signature' 的类型初始化程序引发了异常。”

我浏览了各种帖子，但没有人清楚地告诉我该怎么做。我已经安装了 MS WPE 3.0，但仍然遇到同样的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T06:54:12.763

在我从网络源业务中心生成一个新的肥皂工具包密钥并在我的应用程序中使用它后，它得到了解决。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T05:51:21.733

Web 服务器未安装 Microsoft WSE 3.0 插件。

在服务器上安装 MS WSE 3.0 插件。可以从[这里](http://www.microsoft.com/downloads/details.aspx?familyid=018A09FD-3A74-43C5-8EC1-8D789091255D&displaylang=en)免费下载。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-21T00:59:46.437

此外，如果您尝试在比 XP/Win 2003 更新的设备上使用此功能并使用 iis7 或更高版本：请确保您的应用程序池已启用 32 位应用程序为 TRUE。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T06:29:15.373

我有类似的问题，我为 SOAP Toolkit API 下载了新的安全密钥，并将项目属性更改为 Build->Target Platform 为 X86。有效

# solr - Solr：使用 scale() 内部调用文档的字段值

> ID：12908256
> 
> 赞同：0
> 
> 时间：2012-10-16T05:43:57.450
> 
> 标签：solr, lucene

是否可以在函数 scale() 中使用调用文档的字段值？

我尝试了以下方法：

```
...select?q=*:*&param=field_of_document&fl=$param,pseudo_field:scale(if(...$param...), 0,1000) 
```

尽管第一个 $param 返回结果集的单个文档的*field_of_document*的值，但第二个 $param（在 scale() 中的那个）再次为整个索引的每个文档评估，就好像我直接使用*field_of_document 一样*。

又是一个问题：是否有机会将“外部”文档的字段值“注入”到比例函数的参数中？

# php - URL + htmlentities ? 怎么想？

> ID：12908258
> 
> 赞同：6
> 
> 时间：2012-10-16T05:44:01.740
> 
> 标签：php, security, url, urlencode, html-entities

我在另一个与 urlencode() 相关的论坛上问了一个问题，当一个人出现时轻快地说绝对需要在其之上使用 htmlentities，并且还建议我每次编写 URL 时都应该这样做。“为了有效和安全，他说”。我不明白为什么这可能是一个安全问题。这是他提到的代码：

```
echo '<a href="index.php?' . htmlentities('page=encode&code='.urlencode($code).'&login='.urlencode($login).'&codeconf=' . urlencode($codeconf)) . '">'; 
```

php手册确实提到了htmlentities。但没有进一步的解释：

> 注意... PHP 支持通过 arg_separator .ini 指令将参数分隔符更改为 W3C 建议的分号。不幸的是，大多数用户代理不会以这种分号分隔的格式发送表单数据。解决此问题的一种更便携的方法是使用 & 而不是 & 作为分隔符。您不需要为此更改 PHP 的 arg_separator。将其保留为 &，但只需使用 htmlentities() 或 htmlspecialchars() 对您的 URL 进行编码。

我用 & 替换了" **&** **"** ，我在 W3C 验证器中验证了我的页面，结果正常。

 **我仍然担心这个 htmlentities 问题。

1.  为什么应该在 URL 中使用 htmlentities 有什么好的理由吗？
2.  如果是，这是否适用于所有类型的 URL？
3.  如果是，是出于安全原因吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-16T06:02:19.713

这*与 URL*中的 HTML 实体无关。这是关于您将任意数据放入 HTML 中，这意味着您需要对其中的任何特殊字符进行 HTML 转义。这个数据恰好是一个 URL 是无关紧要的。

1.  您需要转义任何放入 URL 中的任意数据，`urlencode`以保留 URL 中具有特殊含义的字符。
2.  您从第一步获得的任意数据块在放入 HTML 时需要进行 HTML 转义，原因与此相同。正如您在示例中看到的`&`，您的数据中有一个*需要*`&amp;`通过 HTML 规则转义的内容。

如果您没有在 HTML 上下文中使用 URL，则无需对它进行 HTML 转义。HTML 实体在 URL 中没有位置。但是，与任何其他数据一样，HTML 上下文中的 URL 必须是 HTML 转义的。**

# asp.net - Trouble with latin characters renaming file extension from txt to xml (ASP.NET + SQL Server 2008 R2)

> ID：12908261
> 
> 赞同：0
> 
> 时间：2012-10-16T05:44:19.487
> 
> 标签：asp.net, xml, character-encoding, windows-server-2008

I have an ASP.NET web app running on a W2003 Server normally. The app copies a `.txt` file from a remote machine to the server. Afterwards the process rename the `.txt` file to `.xml`.

The problem has come when I tried to install the web in a W2008 R2 Server. Suddenly every latin character included in the `.txt` is not showing properly.

```
.txt -><TO>COMPROBACION CAMPAÑA</TO>
.xml -><TO>COMPROBACION CAMPA�A</TO> 
```

My ASP.NET *Globalization* is set to *False*.

The Windows Server Language is Spanish in both servers (2003 and 2008).

Could anyone tell me what else can be?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T15:01:37.090

最后我发现问题是读取远程主机文件。

老方法

```
Dim stream_reader As New StreamReader(Fich, "ISO-8851", True)) 
```

新方法

```
Dim stream_reader As New StreamReader(Fich, Encoding.Default, True)) 
```

现在 xml 文件保留原始编码。尼皮是对的。

谢谢。

# php - Autocomplete is not working on Dynamically Created Rows

> ID：12908264
> 
> 赞同：2
> 
> 时间：2012-10-16T05:44:23.330
> 
> 标签：php, javascript

I want to add rows dynamically all rows must have unique id and auto suggest here my code. Unfortunately its not working.

i have following results

1.  Dynamically add rows.
2.  Autosuggest for all test box dynamically added.
3.  unique id for all dynamically added elements.

    ```
    $(document).ready(function()
    {
    var currentItem = 1;

    $('#itemCode_1').autocomplete({
    source: 'data/item-data.php',
    minLength: 1,
    select: function(event, ui) {
        var $itemrow = $(this).closest('tr');

                $itemrow.find('#itemCode_1').val(ui.item.itemCode);
                $itemrow.find('#itemDesc_1').val(ui.item.itemDesc);
                $itemrow.find('#itemPrice_1').val(ui.item.itemPrice);

                $('#itemQty_1').focus();

        return false;
    }

    }).data( "autocomplete" )._renderItem = function( ul, item ) {
    return $( "<li></li>" )
        .data( "item.autocomplete", item )
        .append( "<a>" + item.itemCode + " - " + item.itemDesc + "</a>" )
        .appendTo( ul );
    };

    $('#addRow').click(function(){
        currentItem++;
        var strToAdd = '<tr class="item-row"><td></td><td><input name="itemCode[]" value="" class="tInput" id="itemCode_'+currentItem+'" tabindex="1"/> </td><td><input name="itemDesc[]" value="" class="tInput" id="itemDesc_'+currentItem+'"  readonly="readonly" /></td><td><input name="itemQty[]" value="" class="tInput" id="itemQty_'+currentItem+'" onChange="calc('+currentItem+')" tabindex="2"/></td><td><input name="itemPrice[]" value="" class="tInput" id="itemPrice_'+currentItem+'" onChange="calc('+currentItem+')"/> </td><td> <input type="text" name="sub_total" id="sub_total_'+currentItem+'"></td></tr>';

        $('#itemsTable').append(strToAdd);

    });
    var bindfield=$('itemCode_'+currentItem+'');
        var itemdes=$('#itemDesc_'+currentItem+'');
        var itempr=$('#itemPrice_'+currentItem+'');
        var itemqty=$('#itemQty_'+currentItem+'');
    bindfield.each(function(){
        $(this).autocomplete({
        source: 'data/item-data.php',
        minLength: 1,
        select: function( event, ui ) {             
             var $itemrow = $(this).closest('tr');

                $itemrow.find(bindfield).val(ui.item.itemCode);
                $itemrow.find(itemdes).val(ui.item.itemDesc);
                $itemrow.find(itempr).val(ui.item.itemPrice);

                $(itemqty).focus();

        return false;
        }
    });
        })
    $('#itemCode').focus(function(){
    window.onbeforeunload = function(){ return "You haven't saved your data.  Are you sure you want to leave this page without saving first?"; };
    });

    }); 
    ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T06:39:59.167

您可以给出类名而不是 ID，通过给出，自动完成应用于所有具有指定类名的元素。在上面的代码中，您可以给出

**$('.CLASSNAME).autocomplete({ });**

代替

**$('#itemCode_1').autocomplete({ });**

为动态创建的元素提供以下代码以使其正常工作。

$('.CLASSNAME').live('keydown.autocomplete', function() {

```
 // Write your code to initiate the autocomplete 
```

});

为动态创建的元素创建相同的类名......希望这会起作用，试试这个......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T07:04:37.063

```
jQuery(document).ready(function($){
    var counter =2;
    var count=2;
    $("#addmember").click(function () {     
        $('#member').append('<input type="text" name="member' +counter+ '" id="member' + counter + '">');
        counter++;
        jQuery("#member" +count+ "").autocomplete('Your Url', {
            multiple: false,
            matchContains: true,
            width: 180,
            selectFirst: true,
        });
        jQuery("#member" +count+ "").result(function(event, data, formatted) {

            count++;
            }
        });
    });
}); 
```

这是在标题部分和正文中

```
<input name="member1" id="member1" type="text" />
<div id="member"></div> 
```

# .net - Visual Studio resx 生成格式差异

> ID：12908265
> 
> 赞同：0
> 
> 时间：2012-10-16T05:44:24.667
> 
> 标签：.net, visual-studio-2010, visual-studio, resx

我的团队遇到了一个奇怪的问题，即不同人的 Visual Studio 生成的 resx 会略有不同，这可能会导致合并出现问题。

格式一：

```
<data name="ResourceName">
  <value xml:space="preserve">Value</value>
</data> 
```

格式二：

```
<data name="ResourceName" xml:space="preserve">
    <value>Value</value>
</data> 
```

注意 的位置`xml:space="preserve"`。

我找不到什么设置可以控制这个，或者为什么会发生。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-24T08:50:42.890

你使用 ReSharper 吗？

如果您使用 Visual Studio 的`.resx`编辑器，则条目将以格式 #2 添加，但如果您使用 ReSharper 添加资源，则条目将以格式 #1 添加。

# c# - DLLImport(C code) C# Attempted to read or write protected memory. This is often an indication that other memory is corrupt”

> ID：12908266
> 
> 赞同：2
> 
> 时间：2012-10-16T05:44:32.640
> 
> 标签：c#, c, visual-studio-2010, dll

This is my DLL Import statement:

```
[DllImport("KaracellLib.dll", EntryPoint = "karacell_bridge@8", CallingConvention = CallingConvention.StdCall, CharSet = CharSet.Ansi, ExactSpelling = true)]
    public static extern int karacell_bridge(int argumentCount, string[] argContent); 
```

The actual function definition in the native C code (which is converted to a DLL):

```
int __stdcall karacell_bridge(int argumentCount, char ** argContent ) 
```

When I try to call the DLL in my C# code more than once, I get the error mentioned.

I have tried the following to resolve the error

1.  Suppress JIT optimization on module load(managed nly) by going into Tools -> Debugging -> General
2.  Added ref in the C# dLL import definition: `public static extern int karacell_bridge(int argumentCount, ref string[] argContent);`

Any help is appreciated! Thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T06:04:57.590

问题是因为多个线程在 C# 程序中调用 karacell_bridge 函数。因此，一旦我处理了它，异常就修复了:)

# html - How to resolve this overlap div issue and understanding the concept?

> ID：12908267
> 
> 赞同：0
> 
> 时间：2012-10-16T05:44:32.943
> 
> 标签：html, css, position

I have show in attached diagram detail with problem i hope this will make clear sense and i got reply from professionals soon.

picture shown here due to some post restriction i am unable to upload or `embed picture` so you just need copy following url to understand problem.

***[image link here](http://oi50.tinypic.com/2r6o088.jpg)***

![enter image description here](../Images/1db204182a33b0c31f25d77e617bd36c.png)

Thank You

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T06:25:49.907

尝试在页脚 div 之前添加此代码。

```
<div style="clear:both;"></div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T06:00:19.173

我不知道你的完整代码。在我看来，删除这两行并检查。

```
footer{
position: absolute;
bottom: 0;
} 
```

页脚必须在 div3 之后。

# python - Is it possible to edit a previously sent chat message using the Skype4Py api?

> ID：12908271
> 
> 赞同：0
> 
> 时间：2012-10-16T05:44:50.190
> 
> 标签：python, skype4py

As the title says, I'm curious if the functionality of editing a sent chat message can be replicated programatically using the Skype4Py api. I'm not sure when Skype added this feature, and the API, as far as I know, hasn't been maintained in some years, so I was just curious.

I don't see anything that looks like it would do it in the docs, but,I figured I check here before I give up.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T15:17:34.747

查看文档，每条聊天消息都有一个正文（消息的文本）和一个 IsEditable 属性。只要 IsEditable=True 你应该可以做 m.Body = "some new text"

# php - Magento Category with Category Images

> ID：12908275
> 
> 赞同：1
> 
> 时间：2012-10-16T05:45:15.167
> 
> 标签：php, magento

I am facing one problem, So i am here to get Some solutions form you! I want to display category menu with category images near to each categories with in that menu.

So when i click on menu if that category contain sub-category it show the name of all those sub-categories with images near to it's name like

example

```
parent1
  =>sub1 <Image of sub1 category>
  =>sub2 <Image of Sub2 category>
  =>sub3 <Image of sub3 category> 
```

Same way i have parent2, parent3 etc., which contain sub-categories same way as i mention here.

So when i click on any parent category it will listed me sub-categories with it's images!

If anybody having Idea about this then let me know how to do this.

Waiting for your response.

Thanks in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T06:02:17.547

您可以使用获取图像链接

```
$_imageUrl=$this->getCurrentCategory()->getImageUrl() 
```

从详细的演练中关注[此wiki。](http://www.magentocommerce.com/wiki/4_-_themes_and_template_customization/catalog/how_to_create_categories_grid_list_with_images)

# php - Whole Word PHP Regex

> ID：12908277
> 
> 赞同：0
> 
> 时间：2012-10-16T05:45:21.563
> 
> 标签：php, regex

I'm trying to find if a substring exists inside of a larger string. The match has to be exact. Most of the time it works be in the scenario below it says its an exact match even though it is not.

```
$partnumber = "4.7585";
$productname = "Eibach 4.7585.880 Sport Plus Kit"

if(preg_match('/^.*(\b'.$partnumber.'\b).*$/i', $productname)){
      echo "****************Exact Match****************";
} 
```

It should only match if the $partnumber = '4.7585.880';

As a note, the partnumber could change, it could contain numbers, letters, decimals or dashes.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T05:47:19.143

you need to escape $partnumber using `preg_quote()`:

```
$partnumber = "4.7585";
$productname = "Eibach 4.7585.880 Sport Plus Kit"

if(preg_match('/[^\B\.]'.preg_quote($partnumber).'[^\B\.]/i', $productname)){
    echo "****************Exact Match****************";
} 
```

I've also simplified your regular expression by just searching for the partnumber instead of the start and end of the line and everything that might be surrounding it.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T06:01:06.880

*\b*正则表达式标识符匹配单词边界。*单词字符*定义为 [ a -zA-Z0-9_]，因此 \b 将匹配任何单词字符和任何非单词字符之间的边界。如果第一个（或最后一个）字符是单词字符，它还将匹配字符串的开始（或结束）。（请参阅[此处](http://www.regular-expressions.info/wordboundaries.html)了解更多信息。）

在您的示例中，第二个“。” 是非单词字符，因此它与您的正则表达式匹配。如果部件号总是在句子的中间，你可以使用 \s 来匹配它周围的空格。如果它可能位于句子的末尾（即，后跟一个“。”），那么我认为您将需要一个更复杂的正则表达式，它可以查看匹配后的字符以检查匹配是否完整。

此外，正如 Omar Jackman 所说，您确实需要转义零件号。在您提供的示例中，产品名称“ *Eibach 4X7585 Sport Plus Kit* ”也将匹配，因为“.” 在零件编号中将被解释为正则表达式的一部分。根据[这个问题](https://stackoverflow.com/questions/1531456/is-there-a-php-function-that-can-escape-regex-patterns-before-they-are-applied)，[preg_quote](http://php.net/preg_quote)是您正在寻找的 php 函数。

# eclipse - Table view not refreshing

> ID：12908278
> 
> 赞同：2
> 
> 时间：2012-10-16T05:45:27.453
> 
> 标签：eclipse, plugins, eclipse-plugin

My eclipse plugin takes in input from file which it reads from xml file

**Problem Statement** :

It is able to read `xml` for the first time but when i am trying to read the file for the second time the results are not refreshing in the table view .

**View part** :

```
private void createViewer(Composite parent) {

        viewer = new TableViewer(parent, SWT.MULTI | SWT.H_SCROLL| SWT.V_SCROLL | SWT.FULL_SELECTION | SWT.BORDER);

        System.out.println("i am being called in best practice ");
        table = viewer.getTable();
        table.setHeaderVisible(true);
        table.setLinesVisible(true);
        viewer.setContentProvider(new ArrayContentProvider());
        BestPracticeModelProvider bestpracticeprovider = new BestPracticeModelProvider();
        viewer.setInput(bestpracticeprovider.getbestpractices());
        System.out.println("model is being set here in best practice ");
        getSite().setSelectionProvider(viewer);
        createColumns(parent, viewer);      

    }

    @Override
    public void setFocus() {
        // TODO Auto-generated method stub
         viewer.getControl().setFocus();
    }

    public TableViewer getViewer() {
        return viewer;
    }

    private TableViewerColumn createTableViewerColumn(String title, int bound,
            final int colNumber) {
        final TableViewerColumn viewerColumn = new TableViewerColumn(viewer,
                SWT.NONE);
        final TableColumn column = viewerColumn.getColumn();
        column.setText(title);
        column.setWidth(bound);
        column.setResizable(true);
        column.setMoveable(true);
        return viewerColumn;
    }

    private void createColumns(Composite parent, TableViewer viewer) {
        String[] titles = new String[] { IViewConstants.CATEGORY,
                IViewConstants.VIOLATION, IViewConstants.DETAILS,
                IViewConstants.CODE_FRAGMENT, IViewConstants.LOCATION,
                IViewConstants.PATTERN_ID };
        int[] bounds = { 100, 100, 100, 100, 100, 100 };

        TableViewerColumn col = createTableViewerColumn(titles[0], bounds[0], 0);

        col.setLabelProvider(new ColumnLabelProvider() {
            @Override
            public String getText(Object element) {
                BestPracticeView p = (BestPracticeView) element;
                return p.getType();
            }
        });

        col = createTableViewerColumn(titles[1], bounds[1], 1);
        col.setLabelProvider(new ColumnLabelProvider() {
            @Override
            public String getText(Object element) {
                BestPracticeView p = (BestPracticeView) element;
                return p.getDetails();
            }
        });

        // Now the Type
        col = createTableViewerColumn(titles[2], bounds[2], 2);
        col.setLabelProvider(new ColumnLabelProvider() {
            @Override
            public String getText(Object element) {
                BestPracticeView p = (BestPracticeView) element;
                return p.getLocation();
            }
        }); 
```

**Model part** :

```
public class BestPracticeView {

    private String type;
    private String details;
    private String location;
    private String patternid;
    private String locationfile;
    private String category;
    private PropertyChangeSupport propertyChangeSupport = new PropertyChangeSupport(this);

    public BestPracticeView() {
      }

     public void addPropertyChangeListener(String propertyName,PropertyChangeListener listener) {
         propertyChangeSupport.addPropertyChangeListener(propertyName, listener);
    }

     public void removePropertyChangeListener(PropertyChangeListener listener) {
        propertyChangeSupport.removePropertyChangeListener(listener);
    }

    public BestPracticeView(String type, String details, String location,
            String patternid, String locationfile, String category) {
        this.type = type;
        this.details = details;
        this.location = location;

        this.patternid = patternid;
        this.locationfile = locationfile;
        this.category = category;

    }

    public String getCategory() {

        return category;
    }

    public void setCategory(String category) {
        propertyChangeSupport.firePropertyChange("category", this.category,
                this.category = category);

    }

    public String getType() {

        return type;
    }

    public void setType(String type) { 
```

//code snippet

# jquery - 图像地图区域的jquery停靠效果

> ID：12908282
> 
> 赞同：-2
> 
> 时间：2012-10-16T05:45:57.913
> 
> 标签：jquery, html

我只是想知道是否可以在图像地图区域上添加停靠效果。

请给我一个例子或一些建议..非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T05:53:15.813

我认为这在理论上是可以用画布实现的，但是你必须对映射的图像做很多低级的图形操作。重新评估您的方法并执行类似于 jqDock 的操作会简单得多：

[http://www.wizzud.com/jqdock/](http://www.wizzud.com/jqdock/)

# flash - 是否可以将空气运行时打包到我的应用程序中

> ID：12908286
> 
> 赞同：0
> 
> 时间：2012-10-16T05:46:25.867
> 
> 标签：flash, air

最近有一个任务要写一个HTML应用程序并在flash player中运行，脑子里第一个念头就是**Adobe Air**，但进一步的要求是我应该只部署一个.swf文件，所以我必须弄清楚一种方法。

那么有没有可能我可以将整个 air 运行时打包到我的应用程序中，这样只需双击我的 air 应用程序就可以在没有预安装 air 的 PC 上运行，或者有任何其他方式可以将 HTML 页面嵌入到 . swf 文件并使用 Flash 播放器运行它。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T21:34:48.370

您确实可以将 AIR 运行时打包到您的应用程序中，但最终产品将是本机可执行文件，而不是 SWF 文件。

请参阅[http://help.adobe.com/en_US/air/build/WSfffb011ac560372f709e16db131e43659b9-8000.html](http://help.adobe.com/en_US/air/build/WSfffb011ac560372f709e16db131e43659b9-8000.html)

# wordpress - 如何从特色图片中删除链接？

> ID：12908288
> 
> 赞同：0
> 
> 时间：2012-10-16T05:46:27.297
> 
> 标签：wordpress, wordpress-theming

我没有足够的 PHP 知识来处理这种情况。我想要的是从特色图片中删除链接。这是我的 functions.php 文件中的代码。

```
if ( has_post_thumbnail() ) {       
        return "<div class='post-thumbnail'><a href='" . $featured_image_link . "'>" . $featured_image . "</a></div>";      
    } 
```

你能告诉我应该删除哪个部分以获得所需的结果吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T05:49:21.167

像这样 ：）

```
if ( has_post_thumbnail() ) {       
    return "<div class='post-thumbnail'>" . $featured_image . "</div>";      
} 
```

# android - 用户选择语言时如何更改应用程序的语言？

> ID：12908289
> 
> 赞同：115
> 
> 时间：2012-10-16T05:46:38.113
> 
> 标签：android, localization

我希望我的应用程序支持西班牙语、葡萄牙语和英语三种语言。并提供在应用程序中选择语言的选项。我已经做了

1）3个可绘制文件夹drawable-es，drawable-pt，drawable。

2) 3 个值文件夹 values-es,values-pt,values. 根据语言更改 String.xml 值。

我有 imageView 来选择语言。单击它时打开菜单，其中包含选项英语、西班牙语、葡萄牙语。

我通过此代码在应用程序内设置区域设置选项选择

```
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
        case R.id.en:
             Locale locale = new Locale("en"); 
             Locale.setDefault(locale);
             Configuration config = new Configuration();
             config.locale = locale;
             getBaseContext().getResources().updateConfiguration(config, getBaseContext().getResources().getDisplayMetrics());
             Toast.makeText(this, "Locale in English !", Toast.LENGTH_LONG).show();
             break;

        case R.id.pt:
             Locale locale2 = new Locale("pt"); 
             Locale.setDefault(locale2);
             Configuration config2 = new Configuration();
             config2.locale = locale2;
             getBaseContext().getResources().updateConfiguration(config2, getBaseContext().getResources().getDisplayMetrics());

             Toast.makeText(this, "Locale in Portugal !", Toast.LENGTH_LONG).show();
             break;

        case R.id.es:
             Locale locale3 = new Locale("es"); 
             Locale.setDefault(locale3);
             Configuration config3 = new Configuration();
             config3.locale = locale3;
             getBaseContext().getResources().updateConfiguration(config3, getBaseContext().getResources().getDisplayMetrics());

             Toast.makeText(this, "Locale in Spain !", Toast.LENGTH_LONG).show();
             break;     
    }
    return super.onOptionsItemSelected(item);
} 
```

我已在 Manifest- **android:configChanges="locale"中声明**

它工作，但它有一些问题。

问题：-

1）当语言选择时，由语言选择的图像的屏幕不会改变，但其他屏幕是更改的。

2）根据手机的语言环境更改应用程序的方向后恢复语言。

* * *

## 回答 #1

> 赞同：182
> 
> 时间：2012-10-18T11:55:46.860

这是网页的摘录：[http ://android.programmerguru.com/android-localization-at-runtime/](http://android.programmerguru.com/android-localization-at-runtime/)

用户从语言列表中选择应用程序时，更改应用程序的语言很简单。有一个像下面这样接受语言环境作为字符串的方法（比如英语的“en”，印地语的“hi”），为您的应用程序配置语言环境并刷新您当前的活动以反映语言的变化。在您再次手动更改之前，您应用的语言环境不会更改。

```
public void setLocale(String lang) { 
    Locale myLocale = new Locale(lang); 
    Resources res = getResources(); 
    DisplayMetrics dm = res.getDisplayMetrics(); 
    Configuration conf = res.getConfiguration(); 
    conf.locale = myLocale; 
    res.updateConfiguration(conf, dm); 
    Intent refresh = new Intent(this, AndroidLocalize.class); 
    finish();
    startActivity(refresh); 
} 
```

确保您导入了以下软件包：

```
import java.util.Locale; 
import android.os.Bundle; 
import android.app.Activity; 
import android.content.Intent; 
import android.content.res.Configuration; 
import android.content.res.Resources; 
import android.util.DisplayMetrics; 
```

将清单添加到活动**android:configChanges="locale|orientation"**

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2017-09-03T15:01:44.390

好的解决方案在这里解释得很好。但这里还有一个。

创建您自己的`CustomContextWrapper`扩展类`ContextWrapper`并使用它来更改整个应用程序的区域设置。 [这是一个 GIST](https://gist.github.com/sud007/1dfec39432a04d83c8945f2b448359c7)的用法。

然后在活动生命周期方法中调用`CustomContextWrapper`带有保存的区域设置标识符，例如`'hi'`印地语`attachBaseContext`。这里的用法：

```
@Override
protected void attachBaseContext(Context newBase) {
    // fetch from shared preference also save the same when applying. Default here is en = English
    String language = MyPreferenceUtil.getInstance().getString("saved_locale", "en");
    super.attachBaseContext(MyContextWrapper.wrap(newBase, language));
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2018-10-01T09:50:45.237

以上所有@Uday 的代码都很完美，但只缺少一件事（build.gradle 中的默认配置）

```
public void setLocale(String lang) { 
Locale myLocale = new Locale(lang); 
Resources res = getResources(); 
DisplayMetrics dm = res.getDisplayMetrics(); 
Configuration conf = res.getConfiguration(); 
conf.locale = myLocale; 
res.updateConfiguration(conf, dm); 
Intent refresh = new Intent(this, AndroidLocalize.class); 
finish();
startActivity(refresh); 
```

}

我的不工作只是因为配置文件（build.gradle）中没有提到语言

```
 defaultConfig {
    resConfigs "en", "hi", "kn"
} 
```

之后，所有语言开始运行

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-10-29T21:08:20.983

您应该`android:configChanges="locale"`从清单中删除，这将导致活动重新加载，或者覆盖`onConfigurationChanged`方法：

```
@Override
public void onConfigurationChanged(Configuration newConfig) {
super.onConfigurationChanged(newConfig);
    // your code here, you can use newConfig.locale if you need to check the language
    // or just re-set all the labels to desired string resource
} 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2020-09-16T15:13:55.047

使用上下文扩展的 Kotlin 解决方案

```
fun Context.applyNewLocale(locale: Locale): Context {
    val config = this.resources.configuration
    val sysLocale = if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.N) {
        config.locales.get(0)
    } else {
        //Legacy
        config.locale
    }
    if (sysLocale.language != locale.language) {
        Locale.setDefault(locale)
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.N) {
            config.setLocale(locale)
        } else {
            //Legacy
            config.locale = locale
        }
        resources.updateConfiguration(config, resources.displayMetrics)
    }
    return this
} 
```

用法

```
override fun attachBaseContext(newBase: Context?) {
    super.attachBaseContext(newBase?.applyNewLocale(Locale("es", "MX")))
} 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2017-09-28T19:58:26.507

Udhay 的示例代码运行良好。除了 Sofiane Hassaini 和 Chirag SolankI 的问题，对于重入来说，它不起作用。在 super.onCreate(savedInstanceState); 之前，我尝试调用 Udhay 的代码而不重启 onCreate() 中的活动。然后就OK了！只有一个小问题，菜单字符串仍然没有更改为设置的Locale。

```
 public void setLocale(String lang) { //call this in onCreate()
      Locale myLocale = new Locale(lang); 
      Resources res = getResources(); 
      DisplayMetrics dm = res.getDisplayMetrics(); 
      Configuration conf = res.getConfiguration(); 
      conf.locale = myLocale; 
      res.updateConfiguration(conf, dm); 
      //Intent refresh = new Intent(this, AndroidLocalize.class); 
      //startActivity(refresh); 
      //finish();
    } 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2019-02-23T11:55:06.650

那些得到版本问题的人试试这个代码..

```
public static void switchLocal(Context context, String lcode, Activity activity) {
        if (lcode.equalsIgnoreCase(""))
            return;
        Resources resources = context.getResources();
        Locale locale = new Locale(lcode);
        Locale.setDefault(locale);
        android.content.res.Configuration config = new 
        android.content.res.Configuration();
        config.locale = locale;
        resources.updateConfiguration(config, resources.getDisplayMetrics());
        //restart base activity 
        activity.finish();
        activity.startActivity(activity.getIntent());
    } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-02-18T12:31:22.823

```
 Locale locale = new Locale(langCode);
    Locale.setDefault(locale);
    Configuration configuration = context.getResources().getConfiguration();
    configuration.locale = locale;
    configuration.setLayoutDirection(locale); // for RTL changes
    preferences.setLocalePref(langCode);
    context.getResources().updateConfiguration(configuration, context.getResources().getDisplayMetrics()); 
```

这里，**langCode**是所需的语言代码。您可以将语言代码保存为 sharedPreferences 中的字符串。你可以`super.onCreate(savedInstanceState)`在`onCreate`.

# .net - 如何确定导致 ContextMenuStrip 的控件

> ID：12908291
> 
> 赞同：0
> 
> 时间：2012-10-16T05:46:52.810
> 
> 标签：.net, winforms

我对 .NET 很陌生，我必须编写一个程序，其中有一个具有不同类型节点的 TreeView，每种节点都有不同的 ContextMenuStrip，所以我创建了多种 ContextMenuStrip，然后分配给不同类型的 TreeNode . 现在我的问题是，当用户显示上下文菜单时，我应该如何找到哪个 TreeNode 是导致 ContextMenuStrip 显示的节点。我尝试使用`ContextMenuStrip.SourceControl`但它返回一个 TreeView 并且它从来没有帮助我，因为我知道我的源是 TreeView 我想知道视图的哪个节点！现在我应该使用某种命中测试吗？如果是的话，使用键盘显示的 ContextMenu 呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T11:03:40.417

您可以使用 Tag 属性来“链接”源节点。例如，在表单的 Load 事件处理程序中：

```
 private void Form1_Load(object sender, EventArgs e)
    {
        TreeNode rootNode = treeView1.Nodes[0];        

        rootNode.Nodes[0].ContextMenuStrip = contextMenuStrip1;
        contextMenuStrip1.Tag = rootNode.Nodes[0];

        rootNode.Nodes[1].ContextMenuStrip = contextMenuStrip2;
        contextMenuStrip2.Tag = rootNode.Nodes[1];
    } 
```

然后您可以将所有 ContextMenuStrip 控件的 Opened 事件处理程序绑定到一个方法，如下所示：

```
 private void contextMenuStrip_Opened(object sender, EventArgs e)
    {
        ContextMenuStrip cms = sender as ContextMenuStrip;
        TreeNode aNode = cms.Tag as TreeNode;
        if (aNode != null)
        {
            MessageBox.Show(aNode.Text);
        }
    } 
```

可能有更好的方法来做到这一点，但我认为这应该能够解决你的问题。

2012 年 10 月 17 日更新：

```
 private void treeView1_NodeMouseClick(object sender, TreeNodeMouseClickEventArgs e)
    {
        if (e.Button == MouseButtons.Right)
        {
            contextMenuStrip1.Tag = e.Node;
        }
    }

    private void contextMenuStrip1_Opened(object sender, EventArgs e)
    {
        ContextMenuStrip cms = sender as ContextMenuStrip;
        TreeNode aNode = cms.Tag as TreeNode;
        if (aNode == null)
        {
            aNode = treeView1.SelectedNode;
        }
        MessageBox.Show(aNode.Text);
    }

    private void contextMenuStrip1_Closed(object sender, ToolStripDropDownClosedEventArgs e)
    {
        ContextMenuStrip cms = sender as ContextMenuStrip;
        cms.Tag = null;
    } 
```

# c++ - decltype 可以声明一个右值吗？

> ID：12908297
> 
> 赞同：9
> 
> 时间：2012-10-16T05:47:35.570
> 
> 标签：c++, visual-c++, c++11, visual-studio-2012, decltype

```
// Compiled by Visual Studio 2012

struct A
{
    bool operator ==(const A& other) const
    {
        for (decltype(this->n) i = 0; i < n; ++i) // OK
        {}

        return true;
    }

protected:
    size_t n;
};

struct B : public A
{
    bool operator ==(const B& other) const
    {
        for (decltype(this->n) i = 0; i < n; ++i) // error C2105: '++' needs l-value
        {}

        return true;
    }
}; 
```

**这是 VC++ 2012 的错误吗？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T06:07:41.537

这似乎是一个 VS2012 编译器错误。规范在第 7.1.6.2 节第 4 段中对此非常清楚。确实，给出的示例之一显示了通过 const-pointer 引用的表达式`a`。`decltype(a->x)`产量`double`，同时`decltype((a->x))`产量`double const &`。

所以这是一个错误；编译器认为`i`是`const`，因此不能`++`。

# sql-server-2008 - How to properly align the xls to bind the table data using a stored procedure in SQL Server 2008?

> ID：12908305
> 
> 赞同：0
> 
> 时间：2012-10-16T05:48:38.317
> 
> 标签：sql-server-2008, excel, stored-procedures

I wrote the stored procedure like this

```
CREATE Procedure [dbo].[usp_GetTrackAgencyCountReport_Job]
AS
   Declare @BodyMessage Varchar(1000),
        @ToEmail Varchar(254),
        @sql Varchar(max),
        @Count int,
        @intFlag INT,
        @Agent varchar(200),
        @From datetime,
        @To datetime,
        @DbName varchar(100)

        SET @BodyMessage='Please find attached list of Agency names, for how many accounts rated, how many accounts submitted and how many accounts approved to QMS. '
        Select @ToEmail='hemanth@zeninfotech.com;'
        --Select @ToEmail='cpeterson@chris-leef.com; gpeterson@chris-leef.com; info@chris-leef.com'
        SET @To= (SELECT DATEADD(day, DATEDIFF(day, 0, GETDATE()), 0))
        SET @From=(SELECT DATEADD(day, DATEDIFF(day, 0, GETDATE()), -7))
        SET @Agent=''
        SET @DbName='QMSV3Dev'

Begin   
--crete temp table to get the details
CREATE TABLE #tblAgencyCount(AID INT IDENTITY(1,1) NOT NULL,SaveDataCount varchar(50),AgentID varchar(50),GetRateCount varchar(50),ConvertedQuoteCount varchar(50))
INSERT INTO #tblAgencyCount(SaveDataCount,AgentID) select COUNT(*),AQ.AgentID from Agent_Quote AQ where 
        AQ.CreatedOn between @From and @To
        and AQ.AgentID like @Agent +'%' and AQ.StatusCode!='C' group by AQ.AgentID  
SET @intFlag = 1
set @Count=(select COUNT(*) from #tblAgencyCount)
WHILE (@intFlag <=@Count)
BEGIN
declare @Ai int
set @Ai=(select AgentID from #tblAgencyCount where AID=@intFlag)
Update #tblAgencyCount set GetRateCount=(select COUNT(*) from Agent_Quote AQ where 
        AQ.CreatedOn between @From and @To
        and AQ.AgentID like @Ai and AQ.StatusCode!='C' and AQ.LowPrice!='' and AQ.HighPrice!=''),
        ConvertedQuoteCount=(select COUNT(*) from Agent_Quote AQ where 
        AQ.CreatedOn between @From and @To
        and AQ.AgentID like @Ai and AQ.StatusCode!='C' and AQ.ApproveStatus='Approved')
         where AID=@intFlag
SET @intFlag = @intFlag + 1
END
--end 
    Drop Table Temp_AgencyCount
    Create Table Temp_AgencyCount(AgencyName Varchar(250),SubmittedCount Varchar(50),GetRateCount varchar(50),ApprovedQuoteCount Varchar(50))
    SET @sql='select A.Name,AC.SaveDataCount as SubmittedCount,AC.GetRateCount,AC.ConvertedQuoteCount as ApprovedQuoteCount from #tblAgencyCount AC Left Join ' + @DbName + '..Agent A On AC.AgentID = A.ID order by A.Name'
    Insert into Temp_AgencyCount Values('Agency Name','Submitted Count','GetRate Count','Approved QuoteCount')
    Insert into Temp_AgencyCount Values('------------------------------------','-----------------','---------------','-------------------')
    Insert into Temp_AgencyCount Exec(@sql)
    exec master..xp_cmdshell 'bcp "SELECT AgencyName+Space(40-Len(AgencyName))+ ''-   ''+ SubmittedCount+Space(20-Len(SubmittedCount))+''- ''+GetRateCount+Space(20-Len(GetRateCount))+''- ''+ApprovedQuoteCount FROM AgentPortal_Live_21Sept2012..Temp_AgencyCoun
t" queryout C:\WeeklyOnlineSubmissionReport.xls -c -T'
    Select @Count=COUNT(*) from Temp_AgencyCount
    If(@Count!=0)
    Begin
        EXEC msdb.dbo.sp_send_dbmail @profile_name='Profile',
             @recipients=@ToEmail, @subject='Weekly Online Submission Report', 
             @body=@BodyMessage,@file_attachments='C:\WeeklyOnlineSubmissionReport.xls'
    End
End

--Exec usp_GetTrackAgencyCountReport_Job 
```

It is working fine to create the Excel file and send to mail but I don't get correct format in one column in one line like that to display the Excel, how to align, please give me any idea about that

Thank u hemanth

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T22:33:16.190

嗨，您似乎缺少字段分隔符

```
queryout C:\WeeklyOnlineSubmissionReport.xls -c -T'
try like this
queryout C:\WeeklyOnlineSubmissionReport.xls  -c -t,' 
```

-t 参数允许您指定字段分隔符。-t 之后的字符将用于分隔数据字段。如果 -t 被删除，制表符将用作默认分隔符。请检查以下这些网站如何使用它

[http://www.mssqltips.com/sqlservertip/1633/simple-way-to-export-sql-server-data-to-text-files/](http://www.mssqltips.com/sqlservertip/1633/simple-way-to-export-sql-server-data-to-text-files/)

[http://www.simple-talk.com/sql/t-sql-programming/the-tsql-of-text-files/](http://www.simple-talk.com/sql/t-sql-programming/the-tsql-of-text-files/)

检查本段将 TSQL 变量中的数据写入文件

# jquery - 向导的 Next 按钮接线 jQuery

> ID：12908308
> 
> 赞同：0
> 
> 时间：2012-10-16T05:49:10.280
> 
> 标签：jquery, asp.net, updatepanel

如何在页面上尚未呈现的控件上连接 jQuery？我尝试覆盖以下方法，但它们不起作用，因为 StepNavigationTemplateContainerID html 标记在此事件上尚不可用：Render、OnLoad、OnInit 等

可能是因为我使用的是 UpdatePanel 吗？当我使用 UpdatePanel 时我可以覆盖什么方法/事件，以便我可以在那里发出 jQuery 钩子？

```
protected override void OnLoad(EventArgs e)
{
    base.OnLoad(e);

    HookNextButton();
}       

void HookNextButton()
{
    string nextButtonClientId = wizardCooking.FindControl("StepNavigationTemplateContainerID").FindControl("btnNextStep").ClientID + "_lnkButton";
    var scriptKey = "Yo";

    string theScript =
        string.Format(
    @"
                    $(function() {{      

                        $('#{0}').click(function() {{
                            alert('hi');

                        }});

                    }});
                ", nextButtonClientId);
    Type cstype = this.GetType();

    // Get a ClientScriptManager reference from the Page class.
    ClientScriptManager cs = Page.ClientScript;

    // Check to see if the startup script is already registered.
    if (!cs.IsStartupScriptRegistered(cstype, scriptKey))
    {
        ScriptManager.RegisterStartupScript(
                this, this.GetType(), scriptKey, theScript, true);
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T05:50:55.893

使用 . 委托它 `.on()` 。这将确保事件与稍后将插入 DOM 的元素相关联..

```
$('body').on('click' , '#buttonid' , function() {
    // Your code here
    // This will handle the case of buttons that 
    // will be rendered later

}); 
```

# javascript - pickMultiple 导致“不安全的 Javascript 尝试”

> ID：12908317
> 
> 赞同：0
> 
> 时间：2012-10-16T05:50:17.863
> 
> 标签：javascript, filepicker.io

嗨，我正试图让选择器工作。文件将通过页面上传到我的 S3 存储桶，在 Chrome 的控制台中返回以下两个错误：

不安全的 JavaScript 尝试从带有 URL [https://www.filepicker.io/dialog/open/?key=AJNd2634XTeyMNPGjr51mz&id=1350365313264&referrer=localhost&iframe=true&s=的框架访问带有 URL file://localhost/Users/ben/fpiotest.html 的框架1,3,2,12&multi=true&m=image/](https://www.filepicker.io/dialog/open/?key=AJNd2634XTeyMNPGjr51mz&id=1350365313264&referrer=localhost&iframe=true&s=1,3,2,12&multi=true&m=image/) *#/computer/. 域、协议和端口必须匹配。swfobject_src.js:1

未捕获的 FilepickerException：获取元数据的文件无效：0。不是文件选择器 url 或 FPFile 对象。文件选择器.js:1

我的页面的整个代码如下：

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<script src="jquery-1.8.2.js"></script>
<!-- Adds the Filepicker.io javascript library to the page -->
<script src="https://api.filepicker.io/v1/filepicker.js"></script>
<script src="https://api.filepicker.io/v1/filepicker_debug.js"></script>
<script type="text/javascript">
//Seting up Filepicker.io with your api key
filepicker.setKey('<removed>');

</script>
</head>

<button style="margin-top: 35px" class="btn btn-primary" data-name="complex get" 
onClick="filepicker.pickMultiple(
    {
        mimetype: 'image/*',
        'container':'modal', 
        'metadata': true,
        'services': ['COMPUTER', 'FACEBOOK', 'DROPBOX', 'FLICKR']
    }, 

    function(files){
        var str = '';
        //$('#multiResult').html(JSON.stringify(files));
        for(var file in files) {
            filepicker.stat(file, {size: true, filename: true, width: true, height: true, uploaded: true},
                function(metadata){str += JSON.stringify(metadata);});
        }

        alert(str);
    }, 
    function(err){alert('error: ' + err);});">Run Code</button>
    <!--function(response){$('#multiResult').html(JSON.stringify(response))});">Run Code</button>-->

<div class="row-fluid">
        <div class="span2"><strong>Result:</strong></div>
        <div class="span10">
            <pre id="multiResult"></pre>
        </div>
    </div>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T05:54:26.317

看起来你被 for-in 循环卡住了。"files" 是一个数组，所以第一个键是 0，即数组中的索引。我建议这样做：

```
for (var i = 0; i < files.length; i++) {
   filepicker.stat(files[i], ...
} 
```

编辑：请务必在回调发生后发出警报。见[http://jsfiddle.net/YpX3L/](http://jsfiddle.net/YpX3L/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T12:45:29.097

出于好奇，您使用什么浏览器？

我们在 IE9 上遇到了类似的问题，症状完全相同，但控制台中没有警告 - 文件已上传，但 S3 商店调用以某种方式失败。

不清楚这里的问题是什么，因为它在 Chrome 上运行得很好。

# android - 如何将 ByteArrayInputStream 转换为 jpeg 并在 Android 手机上显示？

> ID：12908318
> 
> 赞同：6
> 
> 时间：2012-10-16T05:50:20.200
> 
> 标签：android, udp, jpeg, bytearrayinputstream

**1.我将android相机数据转换为bitmao**

```
if (mBitmap == null)        //create Bitmap image first time
        {
            Camera.Parameters params = camera.getParameters();
            width_ima = params.getPreviewSize().width;
            height_ima = params.getPreviewSize().height;                      
            mBitmap = Bitmap.createBitmap(width_ima, height_ima, Bitmap.Config.RGB_565);
            mRGBData = new int[width_ima * height_ima];
        }

        decodeYUV420SP(mRGBData, data, width_ima, height_ima);
        mBitmap.setPixels(mRGBData, 0, width_ima, 0, 0, width_ima, height_ima); 
```

**2.使用udp发送数据**

```
ByteArrayOutputStream byteStream = new ByteArrayOutputStream(); 

        mBitmap.compress(Bitmap.CompressFormat.JPEG, 50, byteStream);   // !!!!!!!  change compression rate to change packets size

        byte data[] = byteStream.toByteArray();
        Log.e(TAG, "SIZE: " + data.length);

        int nb_packets = (int) Math.ceil(data.length / (float)DATAGRAM_MAX_SIZE);
        int size = DATAGRAM_MAX_SIZE;

        /* Loop through slices */
        for(i = 0; i < nb_packets; i++) 
        {           
            if(i >0 && i == nb_packets-1) size = data.length - i * DATAGRAM_MAX_SIZE;

            /* Set additional header */
            byte[] data2 = new byte[HEADER_SIZE + size];
            data2[0] = (byte)frame_nb;
            data2[1] = (byte)nb_packets;
            data2[2] = (byte)i;
            data2[3] = (byte)(size >> 8);
            data2[4] = (byte)size;

            /* Copy current slice to byte array */
            System.arraycopy(data, i * DATAGRAM_MAX_SIZE, data2, HEADER_SIZE, size);        

            try 
            {           
                size_p = data2.length;
                DatagramPacket packet = new DatagramPacket(data2, size_p, serverAddr, 9000);
                socket.send(packet); 
```

**3.我在安卓手机上接收数据**

```
while (true) 
        {           

            try {
                socket.receive(packet);
                System.out.println("已经收到信息了!!!");
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }               
            byte[] data = packet.getData();         
            int frame_nb = (int)data[0];
            int nb_packets = (int)data[1];
            int packet_nb = (int)data[2];
            int size_packet = (int) ((data[3] & 0xff) << 8 | (data[4] & 0xff)); 

            if((packet_nb==0) && (current_frame != frame_nb))
            {
                current_frame = frame_nb;
                slicesStored = 0;               
                imageData = new byte[nb_packets * DATA_MAX_SIZE];
            }

            if(frame_nb == current_frame)
            {
                    System.arraycopy(data, HEADER_SIZE, imageData, packet_nb * DATA_MAX_SIZE, size_packet);
                    slicesStored++;             
            }

            /* If image is complete display it */
            if (slicesStored == nb_packets) 
            {                   
                ByteArrayInputStream bis = new ByteArrayInputStream(imageData);

            } 
```

**我的问题是：如何在 android 手机上显示 ByteArrayInputStream bis 数据...**谢谢您的回复！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-16T06:28:33.833

为了转换`ByteArrayInputStream`为 jpeg 图像，您可以简单地使用以下代码：

```
 ByteArrayInputStream bis = new ByteArrayInputStream(imageData);
    Bitmap bp=BitmapFactory.decodeStream(bis); //decode stream to a bitmap image
    yourImageView.setImageBitmap(bp); //set the JPEG image in your image view 
```

希望这有帮助..谢谢..

# python - 为什么 str.count('') ≠ (from str.count('A') + str.count('B') + ... + str.count('Z'))

> ID：12908319
> 
> 赞同：2
> 
> 时间：2012-10-16T05:50:26.273
> 
> 标签：python, string, count, equals, false-positive

它（对我来说应该）说`True`字符串中是否只有元音（短语）；否则说`False`。我不明白为什么它总是会返回`False`，因为 (x >= x) 总是返回`True`。我感谢任何人检查此查询的解决方案。

(str) -> 布尔值

```
def valid_letter_sequence(abc):

    valid_letters = abc.count('A') + abc.count('E') + abc.count('I') + abc.count('O') + abc.count('U')
    counted_letters = abc.count('')
    if valid_letters >= counted_letters:
        return True
    else:
        return False 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T05:52:43.957

观察：

```
>>> 'abc'.count('')
4 
```

传递一个空字符串`count`给你一个比字符串的长度多一个（因为它在两端以及每对字符之间找到空字符串）。你为什么不直接使用`len(abc)`？

更一般地说，有更好的方法来做你正在做的事情。可能像这样：

```
def valid_letter_sequence(abc):
    return not (set(abc) - set('AEIOU')) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T05:59:24.760

您当然应该使用`len()`来查找`abc`. 另一个缺点`count()`是它需要再次扫描字符串。Python 已经知道长度，所以直接询问会更有效。

`all`允许函数在遇到不在“AEIOU”中的字符时立即返回。这称为[短路评估](http://en.wikipedia.org/wiki/Short-circuit_evaluation)

```
def valid_letter_sequence(abc):
    return all(x in "AEIOU" for x in abc) 
```

# mysql - mysql中的正则表达式匹配而不是like

> ID：12908321
> 
> 赞同：0
> 
> 时间：2012-10-16T05:50:27.940
> 
> 标签：mysql, sql-like

我以前的问题似乎不清楚。所以我提出了一个新问题，数据更清晰

[mysql 部分匹配问题](https://stackoverflow.com/questions/12907712/mysql-like-issue-on-partial-match)

查询

```
SELECT * FROM t_groups WHERE group_name LIKE '%pla%' 
```

结果

![在此处输入图像描述](../Images/433b43604b14e28d4c08b939dd413bfe.png)

我的问题是当用户搜索“plablablabla”之类的内容时，我如何在上图中显示所有结果..我尝试过`LIKE`并且`RLIKE`我不擅长正则表达式..任何帮助都非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T05:51:24.100

你需要 mysql`regexp`关键字。更多信息在[http://dev.mysql.com/doc/refman/5.1/en/regexp.html](http://dev.mysql.com/doc/refman/5.1/en/regexp.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T05:51:49.920

```
SELECT * 
FROM t_groups 
WHERE group_name REGEXP 'pla' 
```

# sql - PostgreSQL 中 JSON 数据类型的正确用例是什么？

> ID：12908328
> 
> 赞同：1
> 
> 时间：2012-10-16T05:50:55.457
> 
> 标签：sql, json, postgresql, database-design

[PostgreSQL 9.2](http://wiki.postgresql.org/wiki/What%27s_new_in_PostgreSQL_9.2#JSON_datatype)引入了 JSON 数据类型。我们与我的一位同事讨论了新的数据类型，但无法真正提出合适的用例。

我们是不是太老了，无法理解将 JSON 存储在数据库中的天才之处？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T05:59:53.417

它对于提取嵌套的数据集很有用，而不必对左连接集进行重复数据删除。否则，我目前看不到它的大量用途。

在数据提取方面，它没有做任何事情，它已经通过内置多年的 SQL/XML 支持做得更好。它没有那么丰富，没有`xpath`相同的[工具来从元素中构建价值](http://www.postgresql.org/docs/current/static/functions-xml.html)。

json 支持不能代替[`hstore`](http://www.postgresql.org/docs/current/static/hstore.html)任何一个，因为没有操作符来查找键，没有合并或附加操作等。

我预计 JSON 支持将在 9.3 及更高版本中变得更加有用。9.2 的优先级只是让数据类型和基本输出函数到位。如果合适的人感兴趣，它可能会慢慢接管`hstore`'s 的大部分功能，并在未来提供 SQL/XML 的可行替代方案。我提出了一些可以使其更有用的[价值构建功能，但这些更改被拒绝了；](http://archives.postgresql.org/message-id/502872C2.2050906@ringerc.id.au)请参阅讨论线程和[稍后的线程](http://archives.postgresql.org/message-id/50632EE0.5010008@dunslane.net)。

这是[与您的问题相关的博客文章](http://people.planetpostgresql.org/andrew/index.php?/archives/244-Under-the-wire.html)。如您所见，JSON 支持显然还为时过早。

# ajax - 看不懂 更新过程

> ID：12908333
> 
> 赞同：0
> 
> 时间：2012-10-16T05:51:35.227
> 
> 标签：ajax, jakarta-ee, jsf-2, primefaces

我有以下 xhtml 文档：

```
 <h:body>
   <ui:composition template="templates/layout.xhtml">
      <ui:define name="content">
        <c:if test="#{sessionBean.userCode > 0}">
          <h:form id="findStudentForm">
            <p:outputPanel id="resultsPanel">
              <c:if test="#{studentsBean.student != null}">
                <h2><h:outputText value="#{studentsBean.student.fullName}"/></h2>
                <h3>Personal data</h3>
                  . . .
                <p align="center">
                <p:commandButton value="Search students" update="@form">
                  <f:setPropertyActionListener value="#{null}" 
                    target="#{studentsBean.student}"/>
                </p:commandButton>
                </p>
              </c:if>
              <c:if test="#{studentsBean.student == null}">
                <h2>Student search</h2>
                  . . .
                <p align="justify">
                  First name
                  <h:inputText value="#{studentsBean.pattern}"/>
                  <p:commandButton value="Поиск" update="resultsPanel"/>                  
                </p>
                <p:dataTable id="resultsTable" var="student" 
                   value="#{studentsBean.studentsList}" 
                             widgetVar="studentsTable" emptyMessage="No records found">
                  . . . 
                  </p:column>
                  <p:column headerText="Actions">
                    <p:commandButton value="Details" update="@form">
                      <f:setPropertyActionListener value="#{student}" 
                        target="#{studentsBean.student}"/>
                    </p:commandButton>
                  </p:column>  
                </p:dataTable>
              </c:if>
            </p:outputPanel>
          </h:form>
        </c:if>
        <c:if test="#{sessionBean.userCode == 0}">
          <ui:include src="templates/include/error.xhtml"/>
        </c:if>
      </ui:define>  
    </ui:composition>
  </h:body> 
```

我也有以下托管 Bean (StudentsBean): 。. .

```
@Named(value = "studentsBean")
@RequestScoped
public class StudentsBean {

  @Inject
  SessionBean session;
  private Student student = null;
  private String pattern = "";
  private String groupName = "";
  @Inject
  private StudentInterface studentProvider;

  . . .

  public String getPattern() {
    return pattern;
  }

  public void setPattern(String pattern) {
    this.pattern = pattern;
  }

  public List<Student> getStudentsList() {
    List<Student> result = new ArrayList<Student>();
    if (studentProvider != null) {
      try {
        result = studentProvider.findStudents(pattern);
      } catch (StudentException e) {
        session.printError(e.getMessage());
      }
    }
    return result;
  }
  . . . 
```

最后，我有一个 StudentProvider 类：

```
public class StudentProvider implements StudentInterface {

  private Connection connection = null;

   . . .

  @Override
  public List<Student> findStudents(String pattern) throws StudentException {
    List<Student> result = new ArrayList<Student>();
    String addon = "";
    if (pattern.trim().isEmpty()) {
      addon = "TOP 10 ";
    }
    try {
      PreparedStatement statement = connection.prepareStatement(
              "SELECT " + addon + "st_pcode, gr_Name, st_FullName "
              + "FROM students, groups WHERE (st_grcode = gr_pcode) AND (st_FullName LIKE ?) "
              + "ORDER BY gr_Name, st_FullName;", ResultSet.TYPE_SCROLL_INSENSITIVE, ResultSet.CONCUR_READ_ONLY);
      statement.setString(1, pattern + "%");
      ResultSet rs = statement.executeQuery();
      while (rs.next()) {
        result.add(getStudent(rs.getString("st_pcode")));
      }
      rs.close();
      statement.close();
    } catch (Exception e) {
      throw new StudentException("Error reading list: " + e.getMessage());
    }
    return result;
  }

  public StudentProvider() throws StudentException {
    try {
    ConnectionProvider provider = new ConnectionProvider();
    connection = provider.getConnection();
    } catch (ConnectionException e) {
      throw new StudentException("Connect error: " + e.getMessage());
    }
  }

  @Override
  public void finalize() throws Throwable {
    connection.close();
    super.finalize();
  }
} 
```

如果变量“模式”为空字符串，PreparedStatement 返回 10 条“第一”记录。但是如果“模式”有内容——PreparedStatement 会找到一些记录。在调试期间，PreparedStatement 似乎运行良好并返回结果集，但在“sultsTable”中没有显示任何记录。另外，我发现，在更新过程方法时

```
studentProvider.findStudent(pattern) 
```

多次调用。我认为，方法调用的数量取决于“resultsTable”中的记录数。

在注入之前，使用硬链接对象一切正常。怎么了？

顺便说一句，我无法理解一件事。说，我有一个按钮

```
<p:commandButton value="Details" update="@form">
    <f:setPropertyActionListener value="#{student}" 
        target="#{studentsBean.student}"/>
</p:commandButton> 
```

在“resultsTable”的每条记录中（有关详细信息，请参阅之前的 xhtml 列表）。我发现，这个按钮有时不起作用。如果 resultsTable 在开始时为空 - 按钮不起作用，但如果 resultsTable 不为空 - 按钮起作用。那么我怎样才能让按钮一直工作呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T10:52:29.237

一个更好的方法是（只是一个草图）：

```
// an action method in your backing bean.
// This will call your search method and set the values behid your dataTable
public void searchStudents(String pattern) {
    setStudentsList(findStudent(pattern));
} 
```

通话结束后更新您的数据表：

```
<p:commandButton update="resultsTable" action=#{studentProvider.findStudent(pattern)}" 
```

回答您的第二个问题：[为什么 JSF 多次调用 getter](https://stackoverflow.com/questions/2090033/why-jsf-calls-getters-multiple-times)，这意味着将您的业务逻辑方法放入 getter（没有延迟加载）似乎是一个坏主意（另一个相关问题：[JSF 多次调用 setter 和 getter](https://stackoverflow.com/questions/12740842/jsf-calling-setter-getter-multiple-times)）。

# php - 文本文件中 PHP 输出中的新行

> ID：12908334
> 
> 赞同：13
> 
> 时间：2012-10-16T05:51:41.727
> 
> 标签：php, forms, text-files, output

我将输出保存在文本文件中的 php 表单将结果粘合到一个字符串，例如：

Name1Email1The Message1Name2Email2The Message2Name3Email3The Message3Name4Email4The Message4

但我需要空格和/或换行符。我通常不使用 PHP，所以我不明白。我没有在网上找到答案，也在这里阅读了一些 Q/A，但这对我没有帮助。

表格：

```
<form action="mailer.php?savedata=1" method="post">
Your Name: <input type="text" name="name"><br>
Your Email: <input type="text" name="email"><br>
Your Message:<br> <textarea name="message" rows="5" cols="30"></textarea><br>
<input type="submit" name="submit" value="Submit">
</form> 
```

PHP的

```
<?php
$savedata = $_REQUEST['savedata'];
if ($savedata == 1){ 
$data = $_POST['name'];
$data .= $_POST['email'];
$data .= $_POST['message'];
$file = "YOURDATAFILE.txt"; 

$fp = fopen($file, "a") or die("Couldn't open $file for writing!");
fwrite($fp, $data) or die("Couldn't write values to file!"); 

fclose($fp); 
echo "Your Form has been Submitted!";

}
?> 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-16T06:14:06.597

正如其他答案所述，您需要在每个字段之后添加行尾字符。

但是，不同的操作系统使用不同的行尾，例如，“\n”可能不会在 Windows 上显示为新行。正如 Mahdi 所说，您可以使用 Windows 样式的 "\r\n" 行尾，或者您可以使用[PHP_EOL](http://php.net/manual/en/reserved.constants.php)常量，以便输出适合服务器的行尾，在这种情况下，您的代码看起来像

```
$data = $_POST['name'] . PHP_EOL;
$data .= $_POST['email'] . PHP_EOL;
$data .= $_POST['message'] . PHP_EOL; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-16T05:54:01.640

您可以使用“\n”来写一个新行。

```
$data = $_POST['name'] . "\n";
$data .= $_POST['email'] . "\n";
$data .= $_POST['message'] . "\n"; 
```

就像旁注一样， \n 必须用双引号引起来。当被单引号包围时，它将不起作用。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-16T06:14:15.663

当您像这样连接输入值时，您将没有任何换行符；您可以使用文字`"\n"`或添加它们`"\r\n"`。要将它们全部串在一起，您可以使用连接运算符或使用`sprintf()`如下：

```
$data = sprintf("%s\n%s\n%s\n", $_POST['name'], $_POST['email'], $_POST['messge']);
$file = "YOURDATAFILE.txt"; 
file_put_contents($file, $data, FILE_APPEND); 
```

我还使用`file_put_contents()`with `FILE_APPEND`flag 将数据附加到文件并保存更多代码行。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-16T06:09:31.717

我通常`New Line`结合`Carriage Return`：

```
$data = $_POST['name'] . "\r\n"; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-04-21T00:27:51.207

检查您用于清理表单输入的过滤器。它可能会从您的表单输入中删除 0x0a 换行符。

我从“textarea”标签中保存了文本，这是正确的。使用 HEX 查看器，我看到“textarea”字段中的每个换行符都被转换为十六进制字符 0a。（十进制 10）维基百科将此列为 UTF-8“换行符”或“LF”。LF 是旧电传时代的 Line Feed 的缩写。 [https://en.wikipedia.org/wiki/UTF-8](https://en.wikipedia.org/wiki/UTF-8)

因此，行 test test test 转换为“4 65 73 74 0d 0a 74 65 73 74 0d 0a 74 65 73 74” 注意字符串中的两个“0a”字符，相当于\n。

起初这并不明显，因为我用来清理输入的正则表达式是用空格替换 0a 字符。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-16T05:54:38.467

`$data`您的变量需要已经包含换行符`\n`。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-04-06T06:33:23.543

这对我有用：

```
echo "$data"."\r\n"; 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-05-18T13:18:53.370

当我们尝试提取通过 Web-Form 在线提交的数据并将其写入放置在 Web 服务器上的文本文件时——不覆盖所述文本文件中已经包含的信息，然后我们使用以下代码标签内：

```
<html>
<body>
<form action="" method="">
<input value="submit">
<div>Name: <input value=""></div>
<div>email: <input value=""></div>
...           ...         ...
<div><button>Submit</button></div>
</form>
</body>
</html> 
```

上面的 HTML 代码加上下面的 PHP 代码：

```
<?php
$fileName = 'fdata.txt';
$fp = fopen('fdata.txt', 'a');
 $savestring = $_POST['name'] . ',' . $_POST['email'] ;
fwrite($fp, $savestring);              
fclose($fp);
?> 
```

但是上面两个代码一起导致数据在文本文件中被追加并串在一起——也就是说，从后续的Web-Forms中提取的每条新记录（数据集）都不是从新行开始的（有没有换行符或回车符）。

我在网上搜索了上述问题的解决方案——按照网上的建议，我添加了“\r\n”（双引号），还使用了“PHP_EOL”（不带引号），如下所示：

```
$fp = fopen('fdata.txt', 'a', "\r\n");
$savestring =  “\r\n” . PHP_EOL .  ' ' . $_POST['name'] . ',' . $_POST['email'] . 
PHP_EOL; 
```

然而根本没有换行符（我的网络服务器和我的桌面使用 Windows）。这意味着世界上数百万网络用户中的任何人都没有切实可行的解决方案。似乎参数“a”覆盖了“\r\n”、“PHP_EOL”等。

# printing - Birt 报告无声打印

> ID：12908335
> 
> 赞同：5
> 
> 时间：2012-10-16T05:51:43.637
> 
> 标签：printing, report, birt

我正在使用`BIRT`报告引擎。

打开报告后，我按下`Print report`按钮，我应该继续执行此步骤来打印我的报告。

1.  打印报告对话框显示。我应该选择打印格式（HTML）和页面范围（所有页面）。
2.  单击“确定”。带有报告预览的新窗口打开。
3.  打印对话框显示。单击`OK`=> 报告正在打印。
4.  需要关闭此弹出窗口和原始报告窗口。

有什么`Silent`或`Auto-print`功能`BIRT`吗？

# image - 如何做一个Ipad屏保应用

> ID：12908338
> 
> 赞同：0
> 
> 时间：2012-10-16T05:52:06.783
> 
> 标签：image, ipad, screensaver

我想在 ipad 中做一个像屏幕保护程序这样的应用程序。当用户单击应用程序时，我想将我的自定义文件夹图像显示为屏幕保护程序动画。而不是相框，我想要所有代码中的人。当用户单击我的应用程序时是否可以重定向到屏幕保护程序。

# frameworks - Webmail 应用程序示例中的 Ajax 显示标签

> ID：12908343
> 
> 赞同：1
> 
> 时间：2012-10-16T05:52:37.067
> 
> 标签：frameworks, stripes

将过滤器 ajax 功能放入 Stripes 书中的 webmail 应用程序示例后，我遇到了问题。当我单击列标题对表记录进行排序时，它可以工作。但是，当我使用过滤器功能过滤表记录，然后单击列标题对过滤后的表记录进行排序时，它会给出正确的结果，但只有表部分和没有表行和颜色的布局，就像不使用 css 样式表一样。请指教。作为回报，谢谢。

# javascript - 使用 APIWrapper.js 初始化 SCORM 总是返回 false

> ID：12908349
> 
> 赞同：1
> 
> 时间：2012-10-16T05:53:08.593
> 
> 标签：javascript, wrapper, moodle, scorm

我是 SCORM 的新手，我在[http://pipwerks.com/downloads/找到了一个库](http://pipwerks.com/downloads/)

我尝试在 SCORM Cloud 中使用示例代码，并且成功了。

```
//Using pipwerks namespace, SCORM 1.2

var success = pipwerks.SCORM.init();

if(success){
  var status = pipwerks.SCORM.get("cmi.core.lesson_status");
  if(status != "completed"){
    success = pipwerks.SCORM.get("cmi.core.lesson_status", "completed");
    if(success){
       pipwerks.SCORM.quit();
    }
  }
} 
```

问题`pipwerks.SCORM.init()`总是返回false。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-30T09:56:26.300

听起来包装器找不到 LMS 提供的 API 对象。

确保您在 LMS 的上下文中运行此代码，并且 LMS 根据需要提供 API 对象。

该包装器还记录跟踪，但前提是 pipwerks.debug.isActive 为真。将其设置为 true，在 Firefox 中运行它，然后在 Firebug 中打开控制台。

可能是 API 对象没问题，而其他地方出了问题。检查那个痕迹，它会有所帮助。

# expressionengine - ExpressionEngine：帮助 w/ 排序反向相关条目

> ID：12908357
> 
> 赞同：7
> 
> 时间：2012-10-16T05:54:13.397
> 
> 标签：expressionengine

我在排序一些反向相关条目时遇到了一些问题。EE 有一些限制，我正在寻找一个快速的解决方案。您可以提供的任何帮助将不胜感激。

我有两个渠道：注册和学生。学生有一个关系字段，将每个条目链接到注册通道中的条目。（我需要继续使用 EE 关系字段。）

学生频道有两个类别组分配给它：成绩（组#1）和乐器（组#2）。类别 ID #1-6 属于等级类别。

以下代码实现了我需要它做的一半：

```
{exp:channel:entries channel="registrations" entry_id="{segment_4}" dynamic="no"}
<table>
{reverse_related_entries channel="students"}
{categories show="1|2"}
 <tr>
  <td><?php print $count; ?>.</td>
  <td>{title}</td>
  {embed="_includes/student_print" student_id="{entry_id}"}
 </tr>
{/categories}
{/reverse_related_entries}
</table>
<table>
{reverse_related_entries channel="students"}
{categories show="3|4"}
 <tr>
  <td><?php print $count; ?>.</td>
  <td>{title}</td>
  {embed="_includes/student_print" student_id="{entry_id}"}
 </tr>
{/categories}
{/reverse_related_entries}
</table>
<table>
{reverse_related_entries channel="students"}
{categories show="5|6"}
 <tr>
  <td><?php print $count; ?>.</td>
  <td>{title}</td>
  {embed="_includes/student_print" student_id="{entry_id}"}
 </tr>
{/categories}
{/reverse_related_entries}
</table>
{/exp:channel:entries} 
```

这是 student_print 嵌入：

```
{exp:channel:entries channel="students" entry_id="{embed:student_id}" dynamic="no"}
<td><font size="2">{categories show_group="2"}{category_name}{/categories}</font></td>
<td><font size="2">{categories show_group="1"}{category_name}{/categories}</font></td>
{/exp:channel:entries} 
```

现在 - 我需要它做的是按仪器类别组（组＃2）中类别的自定义顺序对反向相关条目进行排序。我只是不知道如何去做我目前正在做的事情（显示三个表——每个表都显示来自组#1 中特定类别的条目）并将它们按组#2 中的类别的自定义顺序排列。

再次 - 组 #2 中的类别按自定义顺序排列，我需要按该自定义顺序显示相关条目。这个很重要。

有任何想法吗？这可以通过自定义查询来完成吗？我真的很感激一个代码示例——如果可能的话。这正在扩展我的 EE 和 SQL 印章。

非常感谢您抽出宝贵时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T08:04:56.803

我真的不再使用原生关系，对我来说太麻烦了。所以普拉亚会更好。但是，我发现了这个错误，可能与您的问题有关： [http ://expressionengine.com/bug_tracker/bug/16373](http://expressionengine.com/bug_tracker/bug/16373)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T13:05:39.627

老实说，我的第一印象是这是错误的结构方式。太复杂了。但这总是很容易说来自外部对吧？:)

其次，我不确定您需要此注册频道的用途，因为您似乎没有使用其中的任何数据（除非您为了清楚起见删除了一些代码）？

但无论如何，这里有一些未经测试的代码。要点是您只能使用`channel:categories`标签按类别排序，然后将 传递`{category_id}`给新`channel:entries`标签。如果我们将所有 entry_ids 的列表传递给其中的每个标签，它应该过滤掉所有不属于`{category_id}`您传递的特定内容的内容。

```
{exp:channel:entries channel="registrations" entry_id="{segment_4}" dynamic="no"}
    {embed="_includes/student_print" entry_ids="{reverse_related_entries channel="students" backspace="1"}{entry_id}|{/reverse_related_entries}"}
{/exp:channel:entries} 
```

然后你的嵌入看起来像这样：

```
{exp:channel:categories channel="students" style="linear" show="1|2"}
{if count == "1"}<table>{/if}
    {exp:channel:entries channel="students" entry_id="{embed:entry_ids}" category="{category_id}" dynamic="no"}
    <tr>
        <td><?php print $count; ?>.</td>
        <td>{title}</td>
        <td><font size="2">{categories show_group="2"}{category_name}{/categories}</font></td>
        <td><font size="2">{categories show_group="1"}{category_name}{/categories}</font></td>      
    </tr>
    {/exp:channel:entries}
{if count == total_results}</table>{/if}
{/exp:channel:categories}

{exp:channel:categories channel="students" style="linear" show="3|4"}
{if count == "1"}<table>{/if}
    {exp:channel:entries channel="students" entry_id="{embed:entry_ids}" category="{category_id}" dynamic="no"}
    <tr>
        <td><?php print $count; ?>.</td>
        <td>{title}</td>
        <td><font size="2">{categories show_group="2"}{category_name}{/categories}</font></td>
        <td><font size="2">{categories show_group="1"}{category_name}{/categories}</font></td>      
    </tr>
    {/exp:channel:entries}
{if count == total_results}</table>{/if}
{/exp:channel:categories}

{exp:channel:categories channel="students" style="linear" show="5|6"}
{if count == "1"}<table>{/if}
    {exp:channel:entries channel="students" entry_id="{embed:entry_ids}" category="{category_id}" dynamic="no"}
    <tr>
        <td><?php print $count; ?>.</td>
        <td>{title}</td>
        <td><font size="2">{categories show_group="2"}{category_name}{/categories}</font></td>
        <td><font size="2">{categories show_group="1"}{category_name}{/categories}</font></td>      
    </tr>
    {/exp:channel:entries}
{if count == total_results}</table>{/if}
{/exp:channel:categories} 
```

我不知道`$count`您在其中的这个 PHP 变量是什么，但这可能需要修改，因为它现在在嵌入中。

让我知道这是否有任何成果？

# login - Joomla 登录页面错误

> ID：12908367
> 
> 赞同：0
> 
> 时间：2012-10-16T05:55:08.247
> 
> 标签：login, joomla

我正在使用 Joomla 1.5，在错误登录期间`ID`，`Password`它会带我进入其他页面并出现错误，例如`Username and password do not match or you do not have an account yet.`

需要`error`在同一`login`页面上显示，如何显示，我已经尝试过这些东西但没有得到太多帮助，请帮助我。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T09:59:09.410

到 ftp /components/com_users/controllers/user.php

搜索代码：-

```
// Login failed !
$data['remember'] = (int)$options['remember'];
$app->setUserState('users.login.form.data', $data);
$app->redirect(JRoute::_('index.php?option=com_users&view=login', false)); 
```

代替 ：-

```
$app->redirect(JRoute::_('your getting current url', false)); 
```

# validation - 验证表单后调用函数以关闭父项（包括 iframe）

> ID：12908372
> 
> 赞同：0
> 
> 时间：2012-10-16T05:55:43.210
> 
> 标签：validation, iframe, fancybox

**编辑：**我最近了解到这个问题实际上是两个独立的问题：1）使用脚本在必要的关口关闭父元素，以及 2）确保所有必要的函数都以正确的顺序被调用和完成。我想出了两种关闭父元素的方法，这些方法包括在下面。第二个问题在这里解决：[Calling jQuery function in php (or modifying javascript so php runs the remaining code)](https://stackoverflow.com/q/13655165/1056713)

* * *

**原始问题**

一旦验证并提交了表单，我需要调用 2 个函数，但是我未能成功地将这些函数插入到我的脚本中，而不会阻止另一个函数完成（在 javascript 或 php 中）。

如何将这些功能集成到脚本中以关闭父项（iframe 和对新用户的通知）和/或在验证并提交表单后从 php 调用它们？

新功能：

```
parent.close_field('notice');
parent.$.fancybox.close(); 
```

现有的 Javascript

```
var $custInfo = $("#customer_info");
  $(document).ready(function () {
    var validator = $custInfo.validate({
        rules: {..  },
        messages: {..},
        errorLabelContainer: "#messageBox",
        submitHandler: function () {  
            $custInfo.ajaxSubmit({               
            });
        }
    });                 
    $custInfo.find("input[name=gender]").change(function () {
        if ($(this).val() == "male") {
            $custInfo.submit();
        }
    });
}); 
```

我正在使用 Fancybox2。我还尝试了其他需要向表单标签添加属性的方法，但是这些方法完全绕过了脚本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T18:31:12.667

我最近了解到这个问题实际上是 2 个不同的问题：1）使用脚本在必要的接合处关闭父元素，以及 2）确保所有必要的函数都以正确的顺序被调用和完成。

我想出了两种关闭父元素的方法，这些方法包括在下面。第二个问题在这里解决： [Calling jQuery function in php (or modifying javascript so php runs the remaining code)](https://stackoverflow.com/q/13655165/1056713)

**我用来关闭父元素的方法**

我想出了两种关闭父元素的方法。我在提交表单时使用方法 1 来关闭它，而在我需要在单击时关闭项目的情况下使用方法 2（即，如果用户导航到特定页面）

**方法一**

在我的特定示例中，我需要为每个人关闭“通知”，但只为男性新用户关闭 iframe，因此我将其添加到函数中：

```
submitHandler: function () {
            $custInfo.ajaxSubmit({
            success: function () {
if ($('input[name=gender][value=female]').is(':checked')){                                                      
        parent.close_field('notice');
        window.location.href="page2.html";                                   
        }                             
        else if ($('input[name=gender][value=male]').is(':checked')) {
        parent.close_field('notice');
        parent.$.fancybox.close();
        alert("This service is not yet available for men, but we'll be sure to send an invitation as soon as it is");                             
        }
       }
     }); 
```

**方法二**

JS

```
function close_parent_items() {
     parent.close_field('notice');
     parent.$.fancybox.close();
} 
```

HTML

```
onclick="close_parent_items();" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T07:29:50.380

简单的解决方案：将其添加到您的表单标签中

```
target="_parent" 
```

像

```
<form method="post" action="your_action_file" target = "_parent" >
</form> 
```

这个对我有用。

# json - DateFormat 应显示为 dd/mm/yyyy

> ID：12908373
> 
> 赞同：2
> 
> 时间：2012-10-16T05:55:52.920
> 
> 标签：json, jqgrid-asp.net

我的日期格式`Jqgrid`显示为`NaN/NaN/NaN`.I want to make it as `dd/mm/yyyy`。我想为此做哪些必要的更正。

我的代码是

```
jQuery("#jsonmap").jqGrid
    (
    {
        url: 'Edit.aspx',
        datatype: 'json',
        mtype:'GET',

        align:"center",
        colNames: ['empID', 'empName','Dob'],
        colModel: [{
                name: 'empID',
                index: 'empID',
                width: 150,
                key:true,
                editable: false,
                align:"center",
                editoptions: {
                readonly: true,
                sorttype:'int',

                search:true,
                size: 100
            }},                
            {
                name: 'empName',
                index: 'empName',
                width: 150,
                sortable:true,
                align: "center",
                editable: true,
                size: 100
              },

            {
                name: 'Dob',
                index: 'Dob',

                align: "center",

                sorttype:'Dob',
                formatter: 'date',
                 datefmt: 'dd/mm/yyyy',
                 editable: true,
                  edittype: 'text',
                  editrules: { required: true, date: true },
                 formoptions: { elmsuffix: ' *'} 

      }, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T06:04:13.727

`NaN`== Not-a-Number ...您很可能在某处进行了错误的计算或 div-by-zero ？

# python - 在程序结束时（Python），我的图像没有出现？

> ID：12908375
> 
> 赞同：1
> 
> 时间：2012-10-16T05:55:54.057
> 
> 标签：python, image, flickr

我的意图是用来自 flickr 的图片通过一些方形网格创建一个东西。我已经编写了所有代码，并且所有代码都达到了我试图调整参数的程度，以便我可以创建任何大小的网格（这意味着并不总是严格为 4x4，而是我可以放入 5x5 网格或你有什么）

这是一个家庭作业，我已经尽我所能。我不知道为什么在代码运行后图像没有弹出。我调试了一遍又一遍，看了很多网站，我都不知道！我对编程比较陌生，所以请理解。提前感谢您的任何建议或线索！

```
import flickr import Image

def adjust_sizing(image):
    (w, h) = image.size

    #proportionality
    height = ((256*h)/w)
    width = ((w/h) * 256)

    if h > w:
        image = image.resize(( 256 , (height) ))
    elif w > h:
        image = image.resize(( (width) , 256 ))

    image = image.crop(( 0, 0, 256, 256))
    image.save("image.png")
    return image

def photocollage(tag, number, rawnum, canvas):
    url_list = flickr.getphotos(apicode, tag, number)

    #number is number of images needed total
    #rawnumb is number of rows/columns

    #Create list of all coordinates that need to be occupied
    coordinates = set()
    i = 0
    while i < rawnum:
        w = (256 * i)
        j = 0
        while j < rawnum:
            h = (256 * j)
            j += 1
            coordinates.add((w,h))
    i += 1
    coordinates.add((w,h))
    cords = list(coordinates)

    #Create list for all images that need to be matched with a coordinate
    imagelist = []
    for url in url_list:
        image = flickr.openphoto(url)
        image.save("image.png")
        image = adjust_sizing(image)
        imagelist.append(image)

    #paste to canvas image in image list[k] at coordinates cords[k]
    k = 0
    while k <= number:
        canvas.paste(imagelist[k], cords[k])  

    #return final image
    return canvas

 def create_wallpaper(tag, length, output_name):
          collage = Image.new('RGB', (length, length), 'white')
          image = photocollage(tag, (length**2), length, collage)
          image.save(output_name)
          image.show()        

 apicode = '219084039852' #I made this up for now, it's irrelevant

 create_wallpaper("cats", 4, "catpic.png") 
```

我知道这是一段很长的代码，但我真的很沮丧。我肯定知道调整大小的功能有效。

可能是因为我一直盯着这段代码 8 个小时，但我希望你能帮助我找出我的错误。我需要学习！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T06:00:06.487

你永远不会增加`k`，所以你的`while`循环永远不会结束。

您不妨只使用`for`循环而不是`while`循环：

```
for k in range(0, number):
    canvas.paste(imagelist[k], cords[k]) 
```

# search - Hbase按键的一部分搜索？

> ID：12908378
> 
> 赞同：3
> 
> 时间：2012-10-16T05:56:03.103
> 
> 标签：search, join, key, hbase

为了更好地说明这个问题，我将从一个例子开始。可以说，您有 3 张桌子：

*   学生（200 万行）
*   测试结果（1 亿行）
*   测试（100 000 行）。

我们将所有相关数据分组并添加一个名为“TestSynthesis”的非规范化表，其中包含一个键：TestID_StudentID_TestResultsID。键中字段的顺序无关紧要，因为用户需要能够通过该键的三个部分中的任何一个或全部进行搜索。

一个示例查询是：“给我所有名字以‘约翰’开头的学生的所有测试结果”

一个简单的解决方案是：

1.  搜索标准化表学生
2.  提取 StudentID（假设我们有 3 个 id：0001000,0000999,0000001）
3.  然后在这些 id 上搜索 TestSynthesis (如 * *0001000* * , * *0000999* * , * *0000001* *)

但是如果在第 2 步，我们得到 100 万行而不是 3 个学生呢？

HBase 可以只搜索键（例如不读取数据），还是需要进行全表扫描？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-20T13:17:05.810

首先是痛苦的事实。正如其他帖子中提到的，HBase 不完全支持部分键。正如您所提到的，假设您通过以下方式获得密钥：TestID_StudentID_TestResultsID

您无法通过 StudentID 进行搜索，同时享受出色的性能。但是，有一种方法可以在扫描期间过滤行，仅取决于行键。但请记住，过滤器的性能比良好的优化表模式更差。因此，出于理解/经验，您有以下选择：

1）您尝试设计方案，使其针对大量查询进行优化。例如，大多数查询都需要给定学生的数据，因此您将 studentID 放在键的开头。有些查询需要知道当前学生的测试结果，然后您使用 {STARTROW=>given_studentID, STOPROW=>given_studentID+1} 进行扫描，并使用 keyfilters 过滤您获得的结果。可以设置 keyfilters 来过滤特定的 testID。但是在这种情况下，如果您想查看哪些学生参加了测试，则需要进行全面扫描并对结果集应用过滤器，当我们谈论性能时，这并不是很“便宜”。

2) 正如 [http://stackoverflow.com/questions/12806762/hbase-data-only-in-key-compoung-key-wildcards][1] 中所建议的，您还可以将数据复制到两个不同的表中，第一个是 TestID_StudentID_TestResultsID，第二个是这样的：StudentID_TestID_TestResultsID。通过这种方式，您可以通过给定的 testID 或 StudentId 进行查询，因为您可以在第一个或第二个表中愉快地搜索。如果您想知道哪个学生在所有测试中获得最佳结果，那么您再次遇到麻烦。在这种情况下，您再次需要进行全面扫描。了解您将要进行什么样的查询非常重要，这样您就可以适当地规划您的模式。（无论如何，您真的需要密钥中的测试结果吗？）

3）还有第三种选择，我用过一次。这在很大程度上取决于数据本身。假设您将有 500 000 个学生，大约 50 个测试，然后是 50*500 000 个测试结果。在这种情况下，我将按以下方式设计架构：TestID_StudenIT_Results

*如果您想查看学生在特定测试中的表现，您可以根据测试进行扫描，因为密钥以它开头。

*如果您想查看学生在所有测试中的表现，您可以进行 50 次扫描，每次扫描都使用 50 个 testID 中的一个，以便扫描看起来像：

test1_studentX

test2_studentX

test3_studentX

test4_studentX

...

...

test50_studentX

50 次扫描可能听起来太多，但它非常适合地图缩减工作。问题来了，你真的有 50 个 testID，还是你拥有的数字适合这个？

*如果您想查看所有学生在所有测试中的表现，您仍然需要使用此模式进行全面扫描。

那是我的！

干杯，尼科

# asp.net - 如何将对象添加到缓存并从 MVC4 中的缓存中访问数据？

> ID：12908382
> 
> 赞同：2
> 
> 时间：2012-10-16T05:56:21.303
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, caching, asp.net-mvc-4

大家好，我有一个对象，它返回这样的数据

```
 var productdetial=  {
                               "productId": "1",
                               "productname": "Casualshirts",
                               "productSkus": [
                                                   {
                                                     "Skuimage": "URL",
                                                     "SKU": [
                                                               {
                                                                  "ProducSKU": "Shoe1001",
                                                                  "Options": [
                                                                                {
                                                                                  "productOptions": [
                            {
                                "OptionID": "1",
                                "optionname": "Color",
                                "value": "Black"
                            },
                            {
                                "OptionID": "2",
                                "optionname": "Size",
                                "value": "S"
                            },
                            {
                                "OptionID": "3",
                                "optionname": "Fit",
                                "value": "Regular"
                            }
                        ]
                    }
                ]
            },
            {
                "ProducSKU": "Shoe1002",
                "Options": [
                    {
                        "productOptions": [
                            {
                                "OptionID": "1",
                                "optionname": "Color",
                                "value": "Red"
                            },
                            {
                                "OptionID": "2",
                                "optionname": "Size",
                                "value": "S"
                            },
                            {
                                "OptionID": "3",
                                "optionname": "Fit",
                                "value": "Regular"
                            }
                        ]
                    }
                ]
            },
            {
                "ProducSKU": "Shoe1003",
                "Options": [
                    {
                        "productOptions": [
                            {
                                "OptionID": "1",
                                "optionname": "Color",
                                "value": "Orange"
                            },
                            {
                                "OptionID": "2",
                                "optionname": "Size",
                                "value": "S"
                            },
                            {
                                "OptionID": "3",
                                "optionname": "Fit",
                                "value": "Regular"
                            }
                        ]
                    }
                ]
            }
        ] 
```

现在我想要的是我想将这些数据保存在缓存中，并且我将这些数据绑定到我的视图，现在我想要的是当我从现在开始发出请求时，我应该能够访问来自上述对象的数据whihc 在缓存中...谁能帮助我我该怎么做我如何将此对象添加到缓存并从那里访问数据

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T06:48:49.020

您可以将其放在应用程序缓存中，以便您可以从任何地方访问它。

```
HttpContext.Current.Application["productdetial"] = productdetial; 
```

然后你可以像这样从任何地方访问它

```
ProductDetails object = (ProductDetails) HttpContext.Current.Application["productdetial"] 
```

如果你想存储和检索这个字符串，这也是可能的。请注意，如果您需要特定于用户会话的缓存，请使用“会话”表而不是“应用程序”

还有另一种类型的缓存 OutputCache 可以应用于控制器操作，如下所示。在 300 秒的持续时间内，这将向客户端提供缓存的输出。

```
[OutputCache(Duration=300, VaryByParam="none")]
 public ActionResult GetProductDetails()
 {
      //Fetch the data once and it will be cached for 300 seconds       
            return View(data);
 } 
```

看起来您需要上述 2 中的一种。如果您只想缓存视图的某些部分，还有其他类型的缓存，例如甜甜圈缓存和甜甜圈孔缓存。在甜甜圈洞缓存中，您可以将上述缓存的操作作为操作包含到另一个视图中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-26T05:48:06.597

您可以使用 httpcontext 缓存：

```
if(HttpContext.Cache.Get("productdetial") == null)
{
  HttpContext.Cache.Add("productdetial", productdetial, null, Cache.NoAbsoluteExpiration,
                                          new TimeSpan(0, 1, 0), CacheItemPriority.Normal, null);
}else
{
  cached = (ProductDetails) HttpContext.Cache.Get("productdetial");
} 
```

# dll - 我可以使一个 dll 依赖于不同目录中的另一个 dll 吗？

> ID：12908383
> 
> 赞同：0
> 
> 时间：2012-10-16T05:56:35.307
> 
> 标签：dll, shared-libraries

我的程序依赖于 Microsoft 重新分发包，或者更具体地说，依赖于 MSVCR100.dll

推荐的方法是在我的程序运行之前安装重新分发包。但是，我的程序很小（大约 1MB），vcredist.exe 大约 5MB，对于我的安装程序来说有点太大了。

所以这是另一种方式，根据微软的许可，我们可以将 dll 安装到`\VC\redist\x86\Microsoft.VC100.CRT\`我的应用程序文件夹中的子文件夹（）中。所以我的应用程序目录是这样的：

```
MyAppFolder\a.exe
MyAppFolder\lib\a.dll
MyAppFolder\VC\redist\x86\Microsoft.VC100.CRT\MSVCR100.dll 
```

我的问题是，如何让 a.dll 找到位于另一个文件夹中的 MSVCR100.dll？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T07:17:55.207

您可以考虑将 CRT 链接为静态库，将不依赖于 MSVCRxxx.dll，

但你的 EXE/DLL 会更大。

[http://msdn.microsoft.com/en-us/library/abx4dbyh%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/abx4dbyh%28v=vs.100%29.aspx)

[http://msdn.microsoft.com/en-us/library/aa984514.aspx](http://msdn.microsoft.com/en-us/library/aa984514.aspx)

如果您的项目包含一个 EXE/DLL，则此解决方案适用，但对于较大的项目，您可以创建带有 MSVCRT 合并模块的 MSI 包。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T06:07:42.920

刚刚找到了一个可以解决我的问题的函数[——AddDllDirectory 。](http://msdn.microsoft.com/en-us/library/hh310513%28v=vs.85%29.aspx)

是的，我可以将 CRT 链接为静态库，但在我的情况下，有几个库依赖于它，这意味着每个 dll 都有一个 MSVCR100.dll 的副本。

# javascript - Jquery缩略图图像预览

> ID：12908385
> 
> 赞同：0
> 
> 时间：2012-10-16T05:56:42.277
> 
> 标签：javascript, jquery

我已将 JQuery Lightbox 添加到我的 ASP.net 应用程序中。但是当我点击缩略图图像时出现问题，显示的预览图像是非常大的图像，上下滚动，左右滚动。喜欢这张图片

![在此处输入图像描述](../Images/d0dbaba992abb081dd6a022f9e9a486a.png)

我想像这样显示图像预览。

![在此处输入图像描述](../Images/84c9913b485aca0b790f087da0870976.png)

我如何修复特定预览的宽度和高度？为此我应该编辑或更改哪个文件？添加的文件如下图所示。

![在此处输入图像描述](../Images/31f1a2d9e7e8616b37ab1ad591844674.png)

ASP.net 代码如下

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="Default.aspx.cs" Inherits="MyAPNSWebApp._Default" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" >
    <head runat="server">
        <title>Jquery LightBox Example</title>
        <script type="text/javascript" src="js/jquery.js"></script>
        <script type="text/javascript" src="js/jquery.lightbox-0.5.js"></script>
        <link rel="stylesheet" type="text/css" href="css/jquery.lightbox-0.5.css" media="screen" />
    <script type="text/javascript" src="js/lightbox_resize.js"></script>
    <link rel="stylesheet" href="css/lightbox_r.css" type="text/css" media="screen">
        <script type="text/javascript">
            $(function() {
                $('#gallery a').lightBox();
            });
        </script>
        <style type="text/css">
        /* jQuery lightBox plugin - Gallery style */
            #gallery {
                background-color: #444;
                padding: 2px;
                width: 800px;
            }
            #gallery ul { list-style: none; }
            #gallery ul li { display: inline; }
            #gallery ul img {
                border: 5px solid #3e3e3e;
                border-width: 5px 5px 20px;
            }
            #gallery ul a:hover img {
                border: 5px solid #fff;
                border-width: 5px 5px 20px;
                color: #fff;
            }
            #gallery ul a:hover { color: #fff; }
        </style>
    </head>
    <body>
        <form id="form1" runat="server">       
            <h2 id="example">Example</h2>
            <p>Click in the image and see the <strong>jQuery lightBox plugin</strong> in action.</p>
            <div id="gallery">
                <ul>
                    <li>
                        <a href="photos/image1.jpg" title="Media Monitors All Pakistan Newspapers Web Hub!">
                            <img src="photos/thumb_image1.jpg" width="72" height="72" alt="" />
                        </a>
                    </li>
                    <li>
                        <a href="photos/image2.jpg" title="Media Monitors All Pakistan Newspapers Web Hub!">
                            <img src="photos/thumb_image2.jpg" width="72" height="72" alt="" />
                        </a>
                    </li>
                    <li>
                        <a href="photos/image3.jpg" title="Media Monitors All Pakistan Newspapers Web Hub!">
                            <img src="photos/thumb_image3.jpg" width="72" height="72" alt="" />
                        </a>
                    </li>
                    <li>
                        <a href="photos/image4.jpg" title="Media Monitors All Pakistan Newspapers Web Hub!">
                            <img src="photos/thumb_image4.jpg" width="72" height="72" alt="" />
                        </a>
                    </li>
                    <li>
                        <a href="photos/image5.jpg" title="Media Monitors All Pakistan Newspapers Web Hub!">
                            <img src="photos/thumb_image5.jpg" width="72" height="72" alt="" />
                        </a>
                    </li>
                </ul>
            </div>
        </form>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T06:02:21.370

代替

```
<script type="text/javascript">
    $(function() {
        $('#gallery a').lightBox();
    });
</script> 
```

尝试这个

```
<script type="text/javascript">
    $('#gallery a').lightBox({
       maxHeight: 500,
       maxWidth: 700
    });
</script> 
```

用您自己的选择替换值。

# php - 当 2 个属性具有相同值时对数组中的对象进行排序

> ID：12908386
> 
> 赞同：0
> 
> 时间：2012-10-16T05:56:46.487
> 
> 标签：php, multidimensional-array

我有如下数组。我想根据对象参数对这些进行排序`a_weight`。我无法做到这一点，第二件事是这个键`a_weight`可以在不同的对象中具有相同的值，如下所示。任何帮助排序？

```
[0] => stdClass Object
        (
            [a_priority] => 1
            [a_roleobjectid] => 1
            [a_roleid] => 1
            [a_objectid] => 1
            [a_objecttypeid] => 2
            [a_name] => Object Type
            [a_path] => abc/b
            [a_createddate] => 2012-10-08 11:00:00
            [a_createdby] => 1
            [a_modifieddate] => 2012-10-08 11:05:50
            [a_modifiedby] => 1
            [a_weight] => 1
            [a_cancreate] => 1
            [a_canread] => 1
            [a_canupdate] => 1
            [a_candelete] => 1
            [a_canprint] => 1
            [a_canexport] => 1
        )

    [1] => stdClass Object
        (
            [a_priority] => 1
            [a_roleobjectid] => 2
            [a_roleid] => 1
            [a_objectid] => 2
            [a_objecttypeid] => 2
            [a_name] => Object
            [a_path] => abc/a
            [a_createddate] => 2012-10-08 11:00:00
            [a_createdby] => 1
            [a_modifieddate] => 2012-10-08 11:05:50
            [a_modifiedby] => 1
            [a_weight] => 3
            [a_cancreate] => 1
            [a_canread] => 1
            [a_canupdate] => 1
            [a_candelete] => 1
            [a_canprint] => 1
            [a_canexport] => 1
        )
[2] => stdClass Object
        (
            [a_priority] => 1
            [a_roleobjectid] => 3
            [a_roleid] => 1
            [a_objectid] => 3
            [a_objecttypeid] => 2
            [a_name] => Role
            [a_path] => abc/r
            [a_createddate] => 2012-10-08 11:00:00
            [a_createdby] => 1
            [a_modifieddate] => 2012-10-08 15:19:02
            [a_modifiedby] => 1
            [a_weight] => 1
            [a_cancreate] => 1
            [a_canread] => 1
            [a_canupdate] => 1
            [a_candelete] => 1
            [a_canprint] => 1
            [a_canexport] => 1
        ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T06:01:13.167

您需要使用该`uasort`功能。更多信息请访问[http://php.net/manual/en/function.uasort.php](http://php.net/manual/en/function.uasort.php)

你的例子是：

```
function mysort($a, $b){
    return $a->a_weight < $b->a_weight ? -1 : 1;
}
$objects = uasort($objects, 'mysort'); 
```

# java - 摆动滑块未显示

> ID：12908390
> 
> 赞同：0
> 
> 时间：2012-10-16T05:57:31.800
> 
> 标签：java, swing, slider

我正在尝试使用 JSwing 组件向我的框架添加一个滑块，但由于某种原因它不起作用。我尝试查找可能的解决方案，但它们要么不适用，要么对我不起作用，例如设置大小或可见性等等。基本上，为什么我的滑块不显示？

我有一个 carIcon 显示得很好，但滑块不会。这是我的代码。

```
 public static void main(String[] args)
    {
    JFrame frame = new JFrame("Slider Tester");

    MoveableShape shape = new CarShape(125, 100, CAR_WIDTH);
    slider bar = new slider();

    ShapeIcon icon = new ShapeIcon(shape,
        ICON_WIDTH, ICON_HEIGHT);

    JLabel label = new JLabel(icon);
    frame.setLayout(new FlowLayout());
    frame.add(label);
    frame.add(bar);

    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setLocation(100,100);
    frame.pack();
    frame.setVisible(true);

    } 
```

和我的滑块

```
public class slider extends JPanel implements ChangeListener
{

    private JSlider carSlider;

    public slider()
    {
    carSlider = new JSlider();
    carSlider.addChangeListener(this);
    }

    @Override
    public void stateChanged(ChangeEvent ce)
    {
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T06:06:23.317

那么，您打算什么时候添加滑块？

```
public slider()
{
    carSlider = new JSlider();
    carSlider.addChangeListener(this);
} 
```

很好地创建了滑块，但没有做任何事情......

```
public slider()
{
    carSlider = new JSlider();
    carSlider.addChangeListener(this);
    add(carSlider); // <-- Look and me, I'm new :D
} 
```

会更好地工作

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T06:06:56.780

未`slider`添加到面板中。将此行添加到`slider`构造函数：

```
add(carSlider); 
```

# json - jquery ajax 返回数据和html

> ID：12908396
> 
> 赞同：0
> 
> 时间：2012-10-16T05:57:47.517
> 
> 标签：json, jquery

我有一个对我的服务器的 jQuery Ajax 调用，以根据我网站上的一些用户活动为我的页面上的某个部分检索一些 HTML。我发现除了来自服务器的渲染 HTML 之外，我还需要一些 JSON 数据。返回客户端呈现的 HTML 和 JSON 数据的最佳方式是什么？我认为有3种不同的选择：

1.  再次调用服务器以获取 JSON 数据。这涉及第二次往返。我可以使用以下方法对多个 ajax 调用进行字符串处理：

    $when(call_1, call_2).done(function(results_1, results_2){...}))

2.  在呈现的 html 中包含一个脚本块，一旦将呈现的 html 添加到 dom 就会调用该脚本块：

    ```
    ... rendered html output ...
    $(document).ready(function ()
    {
        alert('data here');
    }); 
    ```

3.  以某种方式将渲染的 html 嵌入到从调用返回的 json 中，然后调用 JS 函数将渲染的 html 与 JSON 分开并相应地更新 DOM。这个选项闻起来很糟糕。

我倾向于选项 1，即使它是额外的服务器命中，因为它似乎是一种更好的方法。您认为哪种方法更好？还有其他我没有想到的方法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T06:25:58.533

首先，在服务器端对您的 HTML 进行编码......类似于：

```
function HTMLEscape(str) {   //Javascript code, adjust as per your server-side lang
    return String(str)
        .replace(/&/g, '&amp;')
        .replace(/"/g, '&quot;')
        .replace(/'/g, '&#39;')
        .replace(/</g, '&lt;')
        .replace(/>/g, '&gt;');
} 
```

现在，假设您在客户端收到以下 JSON 响应：

```
data = {
     html: "&lt;div&gt;Text goes here&lt;/div&gt;&lt;script type=&#39;text/javascript&#39;&gt;alert(&#39;text goes here too&#39;)&lt;/script&gt;",
     status: 1,
     some: 'stuff'
}; 
```

在 Ajax 完成后，开始解压缩 JSON：

```
ResultJSON = data;

$("div#destination").html(HTMLUnescape(ResultJSON.html));
$("input#status").val(ResultJSON.status) 
```

最后，将此 Javascript 函数隐藏在 .js 文件中的某处：

```
function HTMLUnescape(str) {
    return String(str)
        .replace(/&amp;/g, '&')
        .replace(/&quot;/g, '"')
        .replace(/&#39;/g, "'")
        .replace(/&lt;/g, '<')
        .replace(/&gt;/g, '>');
} 
```

希望能帮助到你。（-：

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T06:05:11.933

选项1更好。你可能也会想到这个，

让发送到 html 的 json 字典包含你所有的数据和 html 内容。像这样的东西，

```
{
'html':"<div>this is new html</div>",
'var1':'var1 value',
'var2':'var2 value'
} 
```

# c++ - 可以使用placement-new 和vector::data() 替换向量中的元素吗？

> ID：12908398
> 
> 赞同：18
> 
> 时间：2012-10-16T05:58:09.387
> 
> 标签：c++, vector, c++11, std, placement-new

关于替换不可赋值的向量元素存在两个问题：

*   [C++ 在向量中使用不可赋值的对象](https://stackoverflow.com/questions/12906970/c-use-unassignable-objects-in-vector/)
*   [对于 const 成员，如何在没有 operator=() 的情况下 push_back？](https://stackoverflow.com/questions/9853762/how-to-push-back-without-operator-for-const-members)

一个对象不可赋值的一个典型原因是它的类定义包括`const`成员，因此它`operator=`被删除了。

`std::vector`要求其元素类型是可分配的。事实上，至少使用 GCC，当对象不可赋值时，直接赋值 ( `vec[i] = x;`)`erase()`和`insert()`替换元素的组合都不起作用。

像下面这样使用`vector::data()`复制构造函数的直接元素销毁和放置 new 的函数是否可以用于替换元素而不会导致未定义的行为？

```
template <typename T>
inline void replace(std::vector<T> &vec, const size_t pos, const T& src)
{
  T *p = vec.data() + pos;
  p->~T();
  new (p) T(src);
} 
```

下面是一个正在使用的函数的示例。这在 GCC 4.7 中编译并且似乎可以工作。

```
struct A
{
  const int _i;
  A(const int &i):_i(i) {}
};

int main() {
  std::vector<A> vec;
  A c1(1);
  A c2(2);

  vec.push_back(c1);
  std::cout << vec[0]._i << std::endl;

  /* To replace the element in the vector
     we cannot use this: */
  //vec[0] = c2;

  /* Nor this: */
  //vec.erase(begin(vec));
  //vec.insert(begin(vec),c2);

  /* But this we can: */
  replace(vec,0,c2);
  std::cout << vec[0]._i << std::endl;

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-16T09:42:12.107

这是非法的，因为 3.8p7 描述了使用析构函数调用和放置 new 来重新创建对象，指定了对数据成员类型的限制：

> ### 3.8 对象生命周期 [basic.life]
> 
> 7 - 如果在对象的生命周期结束之后并且在对象占用的存储被重用或释放之前，在原始对象占用的存储位置创建一个新对象，指向原始对象的指针[. ..] 可用于操作新对象，如果： [...]
> — 原始对象的类型 [...] 不包含任何**类型为 const 限定**或引用类型的非静态数据成员[...]

因此，由于您的对象包含一个 const 数据成员，在析构函数调用和放置 new 之后，向量的内部`data`指针在用于引用第一个元素时变得无效；我认为任何明智的阅读都会得出结论，这同样适用于其他元素。

这样做的理由是优化器有权假设 const 和 reference 数据成员没有分别修改或重新安装：

```
struct A { const int i; int &j; };
int foo() {
    int x = 5;
    std::vector<A> v{{4, x}};
    bar(v);                      // opaque
    return v[0].i + v[0].j;      // optimised to `return 9;`
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-10-30T13:16:22.487

@ecatmur 的答案在撰写本文时是正确的。在 C++17 中，我们现在得到`std::launder`（[wg21 提案 P0137](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2016/p0137r1.html)）。添加此功能是为了在其他情况下`std::optional`与成员一起工作。`const`只要您记得`launder`（即清理）您的内存访问，那么现在这将工作而不会调用未定义的行为。

# sql - 像sql语句不起作用

> ID：12908400
> 
> 赞同：0
> 
> 时间：2012-10-16T05:58:12.423
> 
> 标签：sql, database, oracle

```
select sec_sec_nm,count(1)OVER() from nms_num_scheme 
where nms_sec_nm like 'CMIG4%'; 
```

此查询在一个 Oracle DB 中运行。但是，尽管数据可用，但相同的查询不会返回其他数据库中的任何数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T06:01:18.713

这应该有效：

```
SELECT sec_sec_nm from nms_num_scheme where nms_sec_nm like 'CMIG4%'; 
```

我真的不知道你想做什么：

```
select sec_sec_nm,count(1)OVER() 
```

但我认为这根本行不通。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T06:03:16.080

```
select sec_sec_nm,count(1) cnt from nms_num_scheme 
where nms_sec_nm like 'CMIG4%'
group by sec_sec_nm 
```

# google-apps-script - 如何为 Google Drive 中的文件设置共享选项

> ID：12908405
> 
> 赞同：1
> 
> 时间：2012-10-16T05:58:45.923
> 
> 标签：google-apps-script, google-drive-api

我想将当前存储的文档的共享“可见性”从“知道链接的任何人都可以查看”更改为“私人”。这与删除指定的查看者和编辑者不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T07:11:01.440

不幸的是，GAS 对文档可见性的支持非常[有限](http://support.google.com/docs/bin/answer.py?hl=en&answer=183965)。没有功能可以更改[DocsList.File](https://developers.google.com/apps-script/class_file)和[DocumentApp.Document](https://developers.google.com/apps-script/class_document)类的此选项。该类`Spreadsheet`具有[setAnonymousAccess](https://developers.google.com/apps-script/class_spreadsheet#setAnonymousAccess)方法，如果电子表格是公共的，则可以使用该方法进行设置。

如果此功能对您很重要，请在[问题跟踪器](http://code.google.com/p/google-apps-script-issues/issues/list)上打开新功能请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T07:48:25.310

有一种简单的方法可以使用本文中已经提到的方法来获得您想要的[东西](https://stackoverflow.com/questions/11366979/any-way-to-share-google-docs-programmatically/11367329#11367329)

您可以通过将任何文档移动到共享文件夹来设置其共享/可见性参数。如果您从共享文件夹中删除它，那么它不再共享，这就是您想要做的不是吗？

因此，您需要做的就是**不要**对文件使用单独的共享参数，而是使用文件夹结构来共享文件。

提醒一下，添加到文件夹中的代码可能是这样的：

```
function sharebyFolder(){
    var file = DocsList.getFileById('docId');
    var folder = DocsList.getFolderById('shared folder Id');
    file.addToFolder(folder)
      } 
```

并删除它：

```
function UnsharebyFolder(){
    var file = DocsList.getFileById('docId');
    var folder = DocsList.getFolderById('shared folder Id');
    file.removeFromFolder(folder)
      } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T17:19:30.693

旧文档 API 提供了一个很好的解决方案： [https ://developers.google.com/google-apps/documents-list/#removing_sharing_permissions](https://developers.google.com/google-apps/documents-list/#removing_sharing_permissions)

# objective-c - 在多个 NSArray 中存储对象

> ID：12908407
> 
> 赞同：1
> 
> 时间：2012-10-16T05:58:58.737
> 
> 标签：objective-c, nsarray, foundation

我正在`Objective - C`通过开发联系人应用程序来学习。我没有使用`Core data`or `Address book API`，因为这只是为了学习。因此，每个联系人都是一个存储在 master 中的对象`NSArray`。用户可以创建联系人组，其中每个组将适当的联系人对象存储在`NSArray`. 我面临的问题是，当从主数组中删除联系人时，我必须手动将其从所有组中删除，以`NSArray`保留其对象。有没有更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T07:25:27.200

不要将对象复制到多个数组中。使用指向原始对象的相同指针将相同对象添加到多个数组。维护指向数组的指针并立即从所有数组中删除相同的对象。如果你想实现 isEqual 让它使用 == 指针相等。

为了存储在集合中而复制相同的对象只会让您自己头疼。不变性是一个很好的特性，但跨系统的实际标识更好，尤其是在基于指针的语言中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T07:17:45.760

在你学习的过程中，我建议：

**简单：** 让您的应用程序只有联系人列表，从单个主列表中添加/编辑/删除联系人。您还可以从文档目录中的 plist 保存和检索列表。

您将学习：plist、tableView、导航、viewControllers、维护数组中的数据。

**实时：** 您可以使用具有 4-5 个表的 sqlite 数据库。如果您愿意，每个都有联系人、组、地址、网站和许多其他。所有表都与行 ID 的引用相互关联。除了上面提到的之外，这绝对可以帮助您学习很多东西。

# c++ - 这个makefile有什么问题

> ID：12908408
> 
> 赞同：1
> 
> 时间：2012-10-16T05:59:09.200
> 
> 标签：c++, makefile

我是makefile的新手。我有一个 makefile，我希望它从多个 .cpp 文件生成一个共享库。但是下面的makefile只是基于同一个.cpp文件生成了不同的.so。任何人都可以帮忙吗？

```
 SRC_DIR = $(PROJECT_BASE_DIR)/src

    SRCFILES = $(wildcard $(SRC_DIR)/*.cpp)
    OBJFILES = $(patsubst     $(SRC_DIR)/%.cpp,$(BUILD_TARGET_DIR)/%.$(OBJ_EXTENSION),$(SRCFILES))

    ...

    ifeq ($(OS),$(OS_LINUX))
    $(CLIENTLIB): $(OBJFILES)
       gcc $(CXXFLAGS) -o $@ $< $(LINKER_FLAGS)

    $(OBJFILES): $(SRCFILES)           ==> I believe this is the line with problem.
       gcc $(CXXFLAGS) -c -o $@ $< 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T06:01:21.353

目前，您正尝试在一个编译步骤中将所有 .cpp 文件转换为所有 .o 文件。

改变：

```
$(OBJFILES): $(SRCFILES)           ==> I believe this is the line with problem.
   gcc $(CXXFLAGS) -c -o $@ $< 
```

至：

```
%.$(OBJ_EXTENSION): %.cpp
   gcc $(CXXFLAGS) -c -o $@ $< 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T06:06:34.237

这些是我在makefile中使用的规则，它们有效，希望它可以帮助你

```
CFILES      = $(wildcard *.c)
OBJS        = $(CFILES:%.c=%.o)
%.o: %.c
    $(CC) $(CFLAGS) -I$(INCLUDE) $< -o $@ 
```

# linux - erlang zip:unzip/1 {error, bad_central_directory} 和 {error, bad_eocd}

> ID：12908409
> 
> 赞同：2
> 
> 时间：2012-10-16T05:59:21.167
> 
> 标签：linux, unix, erlang, zip, gzip

我一直成功使用 erlang`stdlib`库`zip:unzip/1`。昨晚我遇到了这个错误：

```
E:\WimaxStatsParser-1.1>erl
Eshell V5.9.2（使用 ^G 中止）
1> zip:unzip("e:/WimaxStatsParser-1.1/in/SomeZipFile.zip")。
{错误，bad_central_directory}
2>

```

有人帮助解释原因吗？以及我如何解决它？

**补充**

* * *

我在另一个文件上遇到了其他错误： `{error,bad_eocd}`. 请也解释一下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T14:25:55.033

我无法用您提供的信息重现您的问题。有 2 个函数可能会发送此错误：

stdlib-1.18.2/src/zip.erl 中的 get_cd_loop/5 和 get_name_extra_comment/4 。

应该很容易调试

将文件 zip.erl、zip.hrl、file.hrl 复制到工作目录中，

使用 debug_info 选项编译，您将收到错误消息“无法加载驻留在粘性目录中的模块”，离开 VM

将 zip.beam 复制到 stdlib.../ebin

在工作目录中重新启动 VM，您现在可以在 zip.erl 源中添加断点。

BR

帕斯卡。

# java - 如何添加一个将 JPanel 扩展到 JFrame 的类？

> ID：12908411
> 
> 赞同：2
> 
> 时间：2012-10-16T05:59:35.460
> 
> 标签：java, swing, layout, jframe, jpanel

对于我的任务，我得到了这段代码：

```
// This class/method uses a  global variable that MUST be set before calling/using
// note: You can not call the paint routine directly, it is called when frame/window is shown
// look up the repaint() routine in the book
// Review Listings 8.5 and 8.6
//
public static class MyPanel extends JPanel {
 public void paintComponent (Graphics g) {
    int xpos,ypos;
    super.paintComponent(g);
    // set the xpos and ypos before you display the image
    xpos = 10; // you pick the position
    ypos = 10; // you pick the position
    if (theimage != null) {
        g.drawImage(theimage,xpos,ypos,this);
        // note: theimage global variable must be set BEFORE paint is called
    }
 }
} 
```

我的教授还说：您还需要查看如何创建并将 a 添加`JPanel`到`JFrame`. 如果您可以创建并添加一个`JPanel`，那么您需要做的就是用 ' `MyPanel`' 替换类名 ' `JPanel`'，此代码将在窗口框架上显示一个图像。

他所说的“*那么您需要做的就是用 'MyPanel' 替换类名 'JPanel' 并且此代码将在窗口框架上显示图像*”是什么意思？我对我应该在哪里替代感到困惑`MyPanel`。这是我的代码：

```
public static class MyPanel extends JPanel {
 public void paintComponent (Graphics g) {
    int xpos,ypos;
    super.paintComponent(g);
    JPanel panel= new JPanel();
    JFrame frame= new JFrame();
    frame.setSize(500,400);
    frame.add(panel);
    frame.setVisible(true);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    // set the xpos and ypos before you display the image
    xpos = 600; // you pick the position
    ypos = 600; // you pick the position
    if (theimage != null) {
        g.drawImage(theimage,xpos,ypos,this);
        // note: theimage global variable must be set BEFORE paint is called
    }
 }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T06:05:28.003

如果我理解您的要求...在您的作业中，您被要求扩展 JPanel 以满足您自己的需要。请注意，如果 JPanel 没有被扩展，您将如何添加它：

```
JFrame myFrame = new JFrame();
JPanel myPanel = new JPanel();
myFrame.add(myPanel);
myFrame.pack();
myFrame.setVisible(true); 
```

这会将 JPanel 添加到 JFrame，将其[打包](http://docs.oracle.com/javase/7/docs/api/java/awt/Window.html#pack%28%29)并将其设置为可见。由于您的 myFrame 类扩展了 JPanel，因此您应该能够通过创建面板类的新实例并将其添加到 JFrame 来做一些非常相似的事情。

您不希望在 中执行此部分`paintComponent()`，因为`paintComponent()`可能会被多次调用。检查[这里](http://docs.oracle.com/javase/7/docs/api/javax/swing/JComponent.html#paintComponent%28java.awt.Graphics%29)看看有什么`paintComponent()`作用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T06:12:20.887

@超级安东尼

所以它会类似于这个？：

```
MyPanel Mypanel= new MyPanel();
JFrame Myframe= new JFrame();
Myframe.setSize(500,400);
Myframe.add(Mypanel);
Myframe.setVisible(true);
Myframe.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE); 
```

# java - 每 X 秒打印一次“hello world”

> ID：12908412
> 
> 赞同：143
> 
> 时间：2012-10-16T05:59:41.343
> 
> 标签：java, timer

最近我一直在使用大数字循环来打印`Hello World`：

```
int counter = 0;

while(true) {
    //loop for ~5 seconds
    for(int i = 0; i < 2147483647 ; i++) {
        //another loop because it's 2012 and PCs have gotten considerably faster :)
        for(int j = 0; j < 2147483647 ; j++){ ... }
    }
    System.out.println(counter + ". Hello World!");
    counter++;
} 
```

我知道这是一种非常愚蠢的方法，但我从未在 Java 中使用过任何计时器库。如何修改上述内容以每隔 3 秒打印一次？

* * *

## 回答 #1

> 赞同：228
> 
> 时间：2012-10-16T06:04:25.673

如果要执行定期任务，请使用`ScheduledExecutorService`. 特别[是 ScheduledExecutorService.scheduleAtFixedRate](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ScheduledExecutorService.html#scheduleAtFixedRate%28java.lang.Runnable,%20long,%20long,%20java.util.concurrent.TimeUnit%29)

编码：

```
Runnable helloRunnable = new Runnable() {
    public void run() {
        System.out.println("Hello world");
    }
};

ScheduledExecutorService executor = Executors.newScheduledThreadPool(1);
executor.scheduleAtFixedRate(helloRunnable, 0, 3, TimeUnit.SECONDS); 
```

* * *

## 回答 #2

> 赞同：209
> 
> 时间：2012-10-16T06:05:06.983

您还可以查看可用于安排任务每秒钟运行的[`Timer`](http://docs.oracle.com/javase/7/docs/api/java/util/Timer.html)类。[`TimerTask`](http://docs.oracle.com/javase/7/docs/api/java/util/TimerTask.html)`n`

您需要一个扩展`TimerTask`并覆盖该`public void run()`方法的类，每次将该类的实例传递给方法时都会执行该[`timer.schedule()`](http://docs.oracle.com/javase/7/docs/api/java/util/Timer.html#schedule%28java.util.TimerTask,%20long,%20long%29)方法。

这是一个示例，`Hello World`每 5 秒打印一次：-

```
class SayHello extends TimerTask {
    public void run() {
       System.out.println("Hello World!"); 
    }
}

// And From your main() method or any other method
Timer timer = new Timer();
timer.schedule(new SayHello(), 0, 5000); 
```

* * *

## 回答 #3

> 赞同：44
> 
> 时间：2015-07-24T06:37:31.550

尝试这样做：

```
Timer t = new Timer();
t.schedule(new TimerTask() {
    @Override
    public void run() {
       System.out.println("Hello World");
    }
}, 0, 5000); 
```

此代码将每**5000**毫秒（**5**秒）运行打印到控制台**Hello World 。**有关更多信息，请阅读[https://docs.oracle.com/javase/1.5.0/docs/api/java/util/Timer.html](https://docs.oracle.com/javase/1.5.0/docs/api/java/util/Timer.html)

 ***** * *

## 回答 #4

> 赞同：17
> 
> 时间：2012-10-16T06:16:42.277

我用计时器解决了这个问题，希望对您有所帮助。我使用了来自`java.util.Timer`同`TimerTask`一个包的计时器。见下文：

```
TimerTask task = new TimerTask() {

    @Override
    public void run() {
        System.out.println("Hello World");
    }
};

Timer timer = new Timer();
timer.schedule(task, new Date(), 3000); 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2012-10-16T06:02:28.003

您可以使用`Thread.sleep(3000)`内部 for 循环。

**注意：**这将需要一个`try/catch`块。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2013-05-01T05:58:38.673

```
public class HelloWorld extends TimerTask{

    public void run() {

        System.out.println("Hello World");
    }
}

public class PrintHelloWorld {
    public static void main(String[] args) {
        Timer timer = new Timer();
        timer.schedule(new HelloWorld(), 0, 5000);

        while (true) {
            try {
                Thread.sleep(2000);
            } catch (InterruptedException e) {
                System.out.println("InterruptedException Exception" + e.getMessage());
            }
        }
    }
} 
```

无限循环被创建广告调度任务被配置。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2012-10-16T06:01:24.133

最简单的方法是将主线程设置为休眠 3000 毫秒（3 秒）：

```
for(int i = 0; i< 10; i++) {
    try {
        //sending the actual Thread of execution to sleep X milliseconds
        Thread.sleep(3000);
    } catch(InterruptedException ie) {}
    System.out.println("Hello world!"):
} 
```

这将使线程停止至少 X 毫秒。线程可能会休眠更多时间，但这取决于 JVM。唯一可以保证的是线程将至少休眠那些毫秒。看一下[`Thread#sleep`](http://docs.oracle.com/javase/6/docs/api/java/lang/Thread.html#sleep%28long%29)文档：

> 使当前执行的线程在指定的毫秒数内休眠（暂时停止执行），具体**取决于系统计时器和调度程序的精度和准确性**。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2012-10-16T06:07:04.720

使用`java.util.Timer`和`Timer#schedule(TimerTask,delay,period)`方法将对您有所帮助。

```
public class RemindTask extends TimerTask {
    public void run() {
      System.out.println(" Hello World!");
    }
    public static void main(String[] args){
       Timer timer = new Timer();
       timer.schedule(new RemindTask(), 3000,3000);
    }
  } 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2014-08-11T06:08:16.877

这是在java中使用线程的简单方法：

```
for(int i = 0; i< 10; i++) {
    try {
        //sending the actual Thread of execution to sleep X milliseconds
        Thread.sleep(3000);
    } catch(Exception e) {
        System.out.println("Exception : "+e.getMessage());
    }
    System.out.println("Hello world!");
} 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2012-10-16T06:09:13.873

他说的。你可以随心所欲地处理异常，但是 Thread.sleep(miliseconds); 是最好的路线。

```
public static void main(String[] args) throws InterruptedException { 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2014-08-11T06:25:12.067

这是在 Thread Constructor 中使用 Runnable 接口的另一种简单方法

```
public class Demo {
    public static void main(String[] args) {
        Thread t1 = new Thread(new Runnable() {

            @Override
            public void run() {
                for(int i = 0; i < 5; i++){
                    try {
                        Thread.sleep(3000);
                    } catch (InterruptedException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                    System.out.println("Thread T1 : "+i);
                }
            }
        });

        Thread t2 = new Thread(new Runnable() {

            @Override
            public void run() {
                for(int i = 0; i < 5; i++) {
                    try {
                        Thread.sleep(3000);
                    } catch (InterruptedException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                    System.out.println("Thread T2 : "+i);
                }
            }
        });

        Thread t3 = new Thread(new Runnable() {

            @Override
            public void run() {
                for(int i = 0; i < 5; i++){
                    try {
                        Thread.sleep(3000);
                    } catch (InterruptedException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                    System.out.println("Thread T3 : "+i);
                }
            }
        });

        t1.start();
        t2.start();
        t3.start();
    }
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2012-10-16T06:01:52.527

添加`Thread.sleep`

```
try {
        Thread.sleep(3000);
    } catch(InterruptedException ie) {} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2012-10-16T06:16:05.963

对于小型应用程序，可以使用 Rohit 提到的 Timer 和 TimerTask，但在 Web 应用程序中，我会使用[Quartz Scheduler](http://quartz-scheduler.org/)来安排作业并执行此类周期性作业。

请参阅Quartz 调度[教程](http://www.mkyong.com/tutorials/quartz-scheduler-tutorial/)。

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2014-04-29T15:20:47.427

```
public class TimeDelay{
  public static void main(String args[]) {
    try {
      while (true) {
        System.out.println(new String("Hello world"));
        Thread.sleep(3 * 1000); // every 3 seconds
      }
    } catch (InterruptedException e) {
      e.printStackTrace();
    }
  }
} 
```****

# javascript - 从 cakephp 传递 JavaScript 文件中的值

> ID：12908415
> 
> 赞同：1
> 
> 时间：2012-10-16T05:59:52.777
> 
> 标签：javascript, cakephp-1.3

在我的`test.ctp`文件中我写

```
<div class="Grid" id="grid1" style="width: 457px; height: 259px; z-index: 1;">
<script type="text/javascript" src="<?php echo $this->webroot;?>js/test.js?id=<?php echo $id; ?>"></script>
</div> 
```

在`test.js`文件中我想访问这个 id 值。如何获取这个值。帮我解决它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T06:32:28.697

尝试这个

```
var id="",scripts = document.getElementsByTagName("script");
for (var i=0,n=scripts.length, href="";i<n;i++) {
   href=scripts[i].src;
   if (href.indexOf("test.js") !=1) {
     id=href.split("?id=")[1];
     break;
   }
}
alert(id); 
```

或者

**1.**将.js改为.php

**2.**在 js 文件中有这个，现在是一个 php 文件

```
<?php
header("content-type:text/javascript"); 
$ID=$_GET["id"]; // clean the var though
?>
var id = "<?php echo $ID; ?>"; 
```

**3.**叫它

```
<script type="text/javascript" 
src="<?php echo $this->webroot."js/test.php?id=". $id; ?>">/script> 
```

# perl - 如何检查 Perl 脚本是否没有任何编译错误？

> ID：12908416
> 
> 赞同：53
> 
> 时间：2012-10-16T05:59:55.070
> 
> 标签：perl, compilation

我在我的 Bash 脚本中调用了许多 Perl 脚本（有时也来自 csh）。

在 Bash 脚本的开头，我想进行一个测试，检查所有 Perl 脚本是否没有任何编译错误。

这样做的一种方法是从 Bash 脚本中实际调用 Perl 脚本，并`grep`在管道日志文件中调用“编译错误”，但这会变得混乱，因为在代码中的不同点调用了不同的 Perl 脚本，所以我想在 Bash 脚本的最开始执行此操作。

有没有办法检查 Perl 脚本是否没有编译错误？

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2012-10-16T06:06:08.457

**谨防！！**

***使用以下命令检查 Perl 程序中的编译错误可能很危险。***

```
$ perl -c yourperlprogram 
```

Randal 写了一篇关于这个主题的非常好的文章，你应该看看

*   [**完整性检查 Perl 代码**](http://www.stonehenge.com/merlyn/LinuxMag/col91.html)（Linux 杂志第 91 列，2007 年 3 月）

引用他的文章：

> 可能我们能说的最简单的事情是“它有效吗？”。为此，我们调用 perl 本身，传递只编译开关：
> 
> ```
> perl -c ourprogram 
> ```
> 
> 对于这个操作，perl 编译程序，但在执行阶段之前停止。这意味着程序文本的每一部分都被翻译成代表工作程序的内部数据结构，但我们实际上并没有执行任何代码。如果有任何语法错误，我们会收到通知，并且编译会中止。
> 
> 其实，这有点骗人。多亏了 BEGIN 块（包括它们的分层表亲，use 指令），一些 Perl 代码可能已经在这个理论上安全的“语法检查”期间执行了。例如，如果您的代码包含：
> 
> ```
> BEGIN { warn "Hello, world!\n" } 
> ```
> 
> 然后您将看到该消息，即使在 perl -c 期间也是如此！对于那些认为“仅编译”意味着“不执行代码”的人来说，这有点令人惊讶。考虑包含以下内容的代码：
> 
> ```
> BEGIN { system "rm", "-rf", "/" } 
> ```
> 
> 你会看到这个论点的问题。哎呀。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-11-18T11:32:07.660

除了`perl -c program.pl`，最好使用以下命令查找警告：

```
perl -w program.pl 
```

详情见：[http ://www.perl.com/pub/2004/08/09/commandline.html](http://www.perl.com/pub/2004/08/09/commandline.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-17T19:42:51.487

我将 bash func 的以下[部分](https://github.com/YordanGeorgiev/issue-tracker/blob/master/src/bash/issue-tracker/funcs/perl/check-perl-syntax.func.sh)用于较大的 perl 项目：

```
 # foreach perl app in the src/perl dir
 while read -r dir ; do

  echo -e "\n"
  echo "start compiling $dir ..." ;
  cd $product_instance_dir/src/perl/$dir ;

  # run the autoloader utility
    find . -name '*.pm' -exec perl -MAutoSplit -e 'autosplit($ARGV[0], $ARGV[1], 0, 1, 1)' {} \;

       # foreach perl file check the syntax by setting the correct INC dirs
     while read -r file ; do
        perl -MCarp::Always -I `pwd` -I `pwd`/lib -wc "$file"
        # run the perltidy inline
        # perltidy -b "$file"
        # sleep 3
        ret=$? ;
        test $ret -ne 0 && break 2 ;
     done < <(find "." -type f \( -name "*.pl" -or -name "*.pm" \))

     test $ret -ne 0 && break ;

     echo "stop compiling $dir ..." ;
     echo -e "\n\n"
     cd $product_instance_dir ;

 done < <(ls -1 "src/perl") 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-04-10T09:01:19.920

当您需要在运行前检查错误/警告但您的文件取决于多个其他文件时，您可以添加选项**-I**：

```
perl -I /path/to/dependency/lib -c /path/to/file/to/check 
```

**编辑**：来自*man perlrun*

> -I 指定的目录被添加到模块的搜索路径 (@INC)。

# mongodb - 在mongodb中模拟慢查询？

> ID：12908425
> 
> 赞同：7
> 
> 时间：2012-10-16T06:00:32.163
> 
> 标签：mongodb

MongoDb 有类似 MySql 的东西`SELECT SLEEP(5);`吗？

我可以看到一些会暂停整个服务器的内部睡眠功能，但我只需要暂停当前查询。

免责声明：仅用于测试目的

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-05-31T00:59:03.837

您可以使用[$where 运算符](http://docs.mongodb.org/manual/reference/operator/where/#op._S_where)来调用 sleep()。这应该适用于任何语言或 ORM/ODM。例如，在 Mongoid 中，您可以这样做：

```
Model.where( :$where => "sleep(100) || true" ).count 
```

调整集合中文档数量的睡眠值（它将延迟每个文档）。这将对数据库服务器造成相当可怕的事情，因此仅将其用于测试，并且永远不会（永远！）在生产服务器上。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-15T19:40:35.110

您可以按照[code_monkey_steve](https://stackoverflow.com/users/2340684/code-monkey-steve)`$where`所说的那样使用运算符，但请确保使用[mongo version >= 2.4](http://docs.mongodb.org/manual/release-notes/2.4/#javascript-engine-changed-to-v8)。在该版本之前，无法在同一台服务器上并行运行 javascript。该命令是 javascript，因此它显然会阻止您可能进行的其他 javascript 查询。`sleep`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-05-17T07:24:11.770

从 mongo Shell 你可以运行：

```
db.collection_name.find( { $where: function() { return sleep(100) || true }}).pretty(); 
```

测试和工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T07:45:21.617

在`mongo`shell 中，您可以执行睡眠（ms），例如在运行查询之前睡眠 5 秒：

```
> sleep(5000); db.collection.find(..); 
```

这不会暂停当前查询，但会在继续执行下一条语句之前在该连接上暂停执行特定的毫秒数（相当于`select sleep(5)`MySQL 中的 a ）。

# android - 单击视图时，它会自动选择 android 中的第一个 Radiobutton

> ID：12908426
> 
> 赞同：0
> 
> 时间：2012-10-16T06:00:35.633
> 
> 标签：android

我有一个带有`TextView`and的视图`RadioButton`，如果我单击 TextView 单选按钮中的第一个选项会自动被选中。我还指定 `android:focusableInTouchMode="false"`了布局，我正在使用`Android 2.2.1`版本。这个问题有什么解决办法吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T06:04:53.090

将行添加到 xml

```
Clickable = false 
```

我希望它能解决问题。:)

# php - PHP cookie 值仅在 2 个页面加载后才有效

> ID：12908428
> 
> 赞同：0
> 
> 时间：2012-10-16T06:00:51.977
> 
> 标签：php, wordpress, cookies

我知道这可能是一个非常初级的问题，但我才刚接触 PHP 一个月，所以请多多包涵。我正在尝试在 WordPress 博客中设置 cookie。cookie 从 URL 接收它的值。“http://www.xyz.com/?name=John”

这是设置cookie的方式：

```
function set_name_cookie() {
    if (isset($_GET['name'])) {
        $name = $_GET['name'];
        setcookie("name", $name, time()+3600, "/", ".xyz.com", false);
    }
}
add_action( 'init', 'set_name_cookie'); 
```

HTML + PHP：

```
<?php if(isset($_COOKIE['name'])) {
      $name = $_COOKIE['name'];
      echo $name; 
?>
<a href="?name=John">John</a>
<a href="?name=Smith">Smith</a> 
```

问题是，当我单击“John”或“Smith”链接时，页面加载但名称没有回显。**我必须再次刷新**才能使名称回显。流量有些问题。帮助？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T06:06:19.183

当您设置 cookie 时，它​​不会`$_COOKIE`在该页面加载时填充，因为该变量是从浏览器发送给您的内容中加载的。一种解决方法是`$_COOKIE['name'] = $name;`在您的`setcookie`声明之后设置 - 但这并不能保证浏览器接受并实际设置 cookie - 只是一种使其在您的脚本中立即可用的方法。

# matlab - Matlab：避免在文本数据输入时进行 exp(-3) 转换

> ID：12908439
> 
> 赞同：-1
> 
> 时间：2012-10-16T06:01:31.023
> 
> 标签：matlab

我有一个带有数据的txt文件，所以我使用了以下函数

```
M = dlmread('data.txt', '\t'); 
```

但是我的数据正在转换为 exp(-3) 我该如何避免呢？

数据如下所示：

```
M =

   1.0e+03 *

         0    0.0080    0.3500    0.1500    4.6990    0.0145    0.0740         0
         0    0.0080    0.4000    0.1700    4.7460    0.0120    0.0710         0
         0    0.0080    0.4000    0.1750    4.3850    0.0120    0.0720         0
         0    0.0060    0.2500    0.0720    3.1580    0.0195    0.0750         0
         0    0.0080    0.3040    0.1500    3.8920    0.0125    0.0720         0
         0    0.0080    0.3500    0.1450    4.4400    0.0140    0.0750         0
         0    0.0060    0.2500    0.1050    3.8970    0.0185    0.0750         0
         0    0.0060    0.1630    0.1330    3.4100    0.0158    0.0780    0.0010
         0    0.0080    0.2600    0.1100    4.0600    0.0190    0.0770         0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T08:39:34.510

正如 H Muster 所说，这是一个显示问题。

显示数据的更好方法（在我看来）是通过 num2str。

如果你跑

```
num2str(M) 
```

你会看见

```
ans =

0       0.008        0.35        0.15       4.699      0.0145       0.074           0
0       0.008         0.4        0.17       4.746       0.012       0.071           0
0       0.008         0.4       0.175       4.385       0.012       0.072           0
0       0.006        0.25       0.072       3.158      0.0195       0.075           0
0       0.008       0.304        0.15       3.892      0.0125       0.072           0
0       0.008        0.35       0.145        4.44       0.014       0.075           0
0       0.006        0.25       0.105       3.897      0.0185       0.075           0
0       0.006       0.163       0.133        3.41      0.0158       0.078       0.001
0       0.008        0.26        0.11        4.06       0.019       0.077           0 
```

这可能是您一开始所期望的。

如果您想要更高的精度，请将格式字符串传递给 num2str。

例如：

```
 num2str(M,'%8g') 
```

# python - python正则表达式匹配字符串

> ID：12908443
> 
> 赞同：1
> 
> 时间：2012-10-16T06:01:49.750
> 
> 标签：python, regex

我想解析一个字符串，例如：

```
package: name='jp.tjkapp.droid1lwp' versionCode='2' versionName='1.1'
uses-permission:'android.permission.WRITE_APN_SETTINGS'
uses-permission:'android.permission.RECEIVE_BOOT_COMPLETED'
uses-permission:'android.permission.ACCESS_NETWORK_STATE' 
```

我想得到：

```
string1: jp.tjkapp.droidllwp`

string2: 1.1 
```

因为有多个使用权限，我想以列表的形式获得权限，包含 `WRITE_APN_SETTINGS`：`RECEIVE_BOOT_COMPLETED`和`ACCESS_NETWORK_STATE`。

你能帮我写python正则表达式来得到我想要的字符串吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T06:09:47.877

假设您提供的代码块是一个长字符串，这里存储在一个名为的变量中`input_string`：

```
name = re.search(r"(?<=name\=\')[\w\.]+?(?=\')", input_string).group(0)
versionName = re.search(r"(?<=versionName\=\')\d+?\.\d+?(?=\')", input_string).group(0)
permissions = re.findall(r'(?<=android\.permission\.)[A-Z_]+(?=\')', input_string) 
```

解释：

### 姓名

*   `(?<=name\=\')`：在主字符串*之前*`name='`检查，以便仅返回以 . 开头的字符串。前面`\`的`=`并`'`用于转义它们，以便正则表达式知道我们在谈论`=`字符串而不是正则表达式命令。 `name='`得到结果的时候**也不**返回，我们只知道得到的结果都是在它前面的。
*   `[\w\.]+?`: 这是我们要搜索的主要字符串。`\w`表示任何字母数字字符和下划线。 `\.`是一个转义句点，因此正则表达式知道我们的意思`.`，而不是由未转义句点表示的正则表达式命令。把这些放进去`[]`意味着我们可以接受任何我们放在括号里的东西，所以我们说我们会接受任何字母数字字符`_`，或`.`。 `+`afterwords 表示*至少一个之前的事情*，意思是至少一个（但可能更多）的`[\w\.]`。最后，`?`方法*不要贪心——*我们告诉正则表达式获得满足这些规范的最小可能组，`+``[\w\.]`.
*   `(?=\')`: 检查主字符串*后面*，以便只返回后面跟着 . 的字符串`'`。这`\`也是一种转义，因为否则正则表达式或 Python 的字符串执行可能会误解`'`. 这个 final`'`不会与**我们**的结果一起返回，我们只知道在原始字符串中，它遵循我们最终得到的任何结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T06:19:40.570

您可以通过逐行读取文件内容来执行此操作而无需正则表达式。

```
>>> def split_string(s):
...     if s.startswith('package'):
...             return [i.split('=')[1] for i in s.split() if "=" in i]
...     elif s.startswith('uses-permission'):
...             return s.split('.')[-1]
... 
>>> split_string("package: name='jp.tjkapp.droid1lwp' versionCode='2' versionName='1.1'")
["'jp.tjkapp.droid1lwp'", "'2'", "'1.1'"]
>>> split_string("uses-permission:'android.permission.WRITE_APN_SETTINGS'")
"WRITE_APN_SETTINGS'"
>>> split_string("uses-permission:'android.permission.RECEIVE_BOOT_COMPLETED'")
"RECEIVE_BOOT_COMPLETED'"
>>> split_string("uses-permission:'android.permission.ACCESS_NETWORK_STATE'")
"ACCESS_NETWORK_STATE'"
>>> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T21:13:33.410

这是一个示例代码

```
#!/usr/bin/env python
inputFile = open("test.txt", "r").readlines()
for line in inputFile:
    if line.startswith("package"):
        words = line.split()
        string1 = words[1].split("=")[1].replace("'","")
        string2 = words[3].split("=")[1].replace("'","") 
```

test.txt 文件包含您之前提到的输入数据..

# xml - 获取 SQL 中每组的 XML 元素计数

> ID：12908455
> 
> 赞同：1
> 
> 时间：2012-10-16T06:02:36.207
> 
> 标签：xml, sql-server-2005, grouping

我有一个类似于以下内容的 XML 列；

```
DECLARE @str AS VARCHAR(8000)

SET @str = '<Root xmlns="http://myurl.com/services/" xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
           <Notifications>
               <Notification>
                  <NotificationDate>2012-08-16</NotificationDate>
                  <Scopes>
                    <NotificationScope>
                        <Code>a</Code>
                    </NotificationScope>  
                    <NotificationScope>
                        <Code>b</Code> 
                    </NotificationScope>
                  </Scopes>
                </Notification>
                <Notification>
                  <NotificationDate>2012-08-20</NotificationDate>
                  <Scopes>
                    <NotificationScope>
                        <Code>a</Code>
                    </NotificationScope>
                  </Scopes>
                </Notification>
            </Notifications></Root>' 
```

我希望能够计算每个通知的 NotificationScope 元素数。例如，我正在寻找类似的东西；

```
Notification Date                   Count
 2012-08-16                          2
 2012-08-20                          1 
```

事实上，由于这些数据实际上是从数据库列中获得的，我真的只对返回那些具有任何通知日期且计数大于 1 的记录感兴趣。

到目前为止，我想出的只是以下内容，但这只是给了我一个计数；

```
declare @xmlvar XML;
set @xmlvar = (SELECT cast(@str AS XML))
;WITH XMLNAMESPACES('http://myurl.com/services/' AS p)
SELECT * FROM (
select @xmlvar.value('count(/p:Root/p:Notifications/p:Notification/p:Scopes/p:NotificationScope)', 'INT') AS 'NotificationScopeCount',
       @xmlvar.value('count(/p:Root/p:Notifications/p:Notification/p:NotificationDate)', 'INT') AS 'NotificationDateCount'
 ) a WHERE NotificationScopeCount > NotificationDateCount 
```

但理想情况下，我也希望能够获得相关的日期。如果这是一种可怕的处理方式，请原谅我，我以前在 SQL 中没有使用过多的 XML 数据类型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T06:14:08.720

你可以尝试使用这样的东西：

```
;WITH XMLNAMESPACES('http://myurl.com/services/' AS p)
SELECT
    NotificationDate = Notif.value('(p:NotificationDate)[1]', 'DATE'),
    CodeCount = Notif.value('count(p:Scopes/p:NotificationScope/p:Code)', 'int')
FROM
    @xmlvar.nodes('/p:Root/p:Notifications/p:Notification') AS Tbl(Notif) 
```

给我一个输出：

![在此处输入图像描述](../Images/574e34c6821b37cfce8d1cf45ca78ee2.png)

# android - 如何创建 .json 文件以及如何将 json 对象写入 json 文件...在 android

> ID：12908456
> 
> 赞同：1
> 
> 时间：2012-10-16T06:02:47.747
> 
> 标签：android

我正在使用此代码创建新文件并在 test.json 文件中写入 json 对象，但我无法创建文件。请找出错误并给出最佳结果一件事我还在清单文件中编写了权限代码。 .

谢谢，

```
String fileName = "test";
        File file = new File("/data/data/packagename/test.json");
        file.createNewFile();
            DataOutputStream fos = new  DataOutputStream(openFileOutput(fileName , Context.MODE_PRIVATE));
            if(file.exists()){
                fos.write(jsString.getBytes());
                fos.close();
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T06:13:47.943

无论如何，这不会落在 C:/ 上。充其量在您的 SD 卡或其他文件夹中，因为 android 是基于 unix 的系统。你应该小心你如何使用“斜线”

# php - 如何检测用于初始化类的变量

> ID：12908466
> 
> 赞同：0
> 
> 时间：2012-10-16T06:04:23.540
> 
> 标签：php

我有这个简单的自动加载脚本，唯一的问题是我不知道我`class1`初始化了什么变量。我 var_dump 变量 $class 它说

`object(class1)[1]`

但是当我试图`$class->someMethod()`变量类是未定义的？

在我的 ClassLib 目录中，我有一个

`-class1.php`和 `-class2.php`

我的代码：

```
function init_load($class){ 
include 'ClassLib/'.$class.'.php'; 
}

function verify_fclass($class){
if(!file_exists('ClassLib/'.$class.'.php')){
    return FALSE;
}else{
    if(!class_exists($class)){
        return FALSE;
    }else{
        return TRUE;
    }
}

}

function init_classes($classes = array()){
foreach($classes as $class){
    if(verify_fclass($class) === FALSE){
        $test[$class.'NotExisting'] = $class;
    }else{
             $test = null;
             $class = new $class;
    }
}
var_dump($class); // what is on class
var_dump($test);  // what is on test
}

$class_array = array('NonExistingClass','class1');
spl_autoload_register('init_load');
init_classes($class_array);

$class->what(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T06:17:25.037

您仍然必须在函数范围之外定义类实例 $class。

这意味着您应该在 init_classes 函数中返回 $class。我在这里看到的唯一问题是您希望能够一次实例化多个类，因此您可能必须返回一个类数组。

你可以尝试这样的事情：

```
function init_classes($classes = array()){
    $error = array();
    $instances = array();

    foreach($classes as $class){
        if(verify_fclass($class) === FALSE){
            $error[$class.'NotExisting'] = $class;
        }
        else{
            $test = null;
            $instances[$class] = new $class;
        }
    }
    return array( 'error' => $error, 'instances' => $instances);
}

$class_array = array('NonExistingClass','class1');
$class = $init['instances']['class1'];
$class->what(); 
```

但是话又说回来，您可以直接实例化该类，而无需使用数组和 init_classes 方法...

# sonarqube - 蚂蚁声纳不工作

> ID：12908472
> 
> 赞同：-1
> 
> 时间：2012-10-16T06:04:46.780
> 
> 标签：sonarqube

```
 <target name="sonar">
            <taskdef uri="antlib:org.sonar.ant" resource="org/sonar/ant/antlib.xml">
            </taskdef>

            <sonar:sonar />
    </target> 
```

我也设置了 SONAR_HOME 环境变量，但是当我执行“ant sonar”时，我收到以下错误我错过了什么

```
BUILD FAILED
/root/.jenkins/jobs/Project/workspace/dev/archive/build.xml:108: java.lang.IllegalArgumentException:
The following mandatory information is missing:
- task attribute 'key'
- task attribute 'version'
    at org.sonar.ant.SonarTask.checkMandatoryProperties(SonarTask.java:212)
    at org.sonar.ant.SonarTask.execute(SonarTask.java:190)
    at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
    at sun.reflect.GeneratedMethodAccessor4.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
    at org.apache.tools.ant.Task.perform(Task.java:348)
    at org.apache.tools.ant.Target.execute(Target.java:392)
    at org.apache.tools.ant.Target.performTasks(Target.java:413)
    at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1399)
    at org.apache.tools.ant.Project.executeTarget(Project.java:1368)
    at org.apache.tools.ant.helper.DefaultExecutor.executeTargets(DefaultExecutor.java:41)
    at org.apache.tools.ant.Project.executeTargets(Project.java:1251)
    at org.apache.tools.ant.Main.runBuild(Main.java:811)
    at org.apache.tools.ant.Main.startAnt(Main.java:217)
    at org.apache.tools.ant.launch.Launcher.run(Launcher.java:280)
    at org.apache.tools.ant.launch.Launcher.main(Launcher.java:109) 
```

总时间：0秒

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T09:03:59.027

您正在尝试使用最新版本的 Ant 任务 (2.0) 的“语法”，但似乎这不是您在类路径中拥有的版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-10T23:34:52.837

看起来您缺少属于您的 build.xml 文件的强制性 SonarQube 属性值。

从[文档](https://docs.sonarqube.org/display/SCAN/Analyzing+with+SonarQube+Scanner+for+Ant)

```
<!-- Define the SonarQube global properties (the most usual way is to pass 
these properties via the command line) -->
<property name="sonar.host.url" value="http://localhost:9000" />

...

<!-- Define the SonarQube project properties -->
<property name="sonar.projectKey" value="org.sonarqube:sonarqube-scanner-ant" />
<property name="sonar.projectName" value="Example of SonarQube Scanner for Ant Usage" />
<property name="sonar.projectVersion" value="1.0" />
<property name="sonar.sources" value="src" />
<property name="sonar.java.binaries" value="build" />
<property name="sonar.java.libraries" value="lib/*.jar" /> 
```

或者，您也可以将这些值作为参数传递给 ANT。

```
ant sonar -Dsonar.projectVersion=1.1 
```

# visual-studio-2010 - 在 Visual Studio 2010 中打开 Visual Studio 2008

> ID：12908473
> 
> 赞同：2
> 
> 时间：2012-10-16T06:04:50.523
> 
> 标签：visual-studio-2010

我已经安装了 Visual Studio 2008 和 2010。当我尝试打开 Visual Studio 2008 解决方案文件时，它会在 Visual Studio 2010 中打开。它不会在 vs 2008 中打开。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T06:21:44.570

在文件资源管理器中选择 .sln 文件，右键单击，选择“打开方式”，选择“Visual Studio 2008”或“Visual Studio 版本选择器”。

如果它不起作用，请在文件资源管理器中选择 .sln 文件，右键单击，选择“打开方式”，选择“选择默认程序”，然后您可以在此处选择 Microsoft Visual Studio 2008。如果您是操作系统，它可能会被隐藏像 vista 或 Windows 7。有一行带箭头的展开所有可用程序

希望有帮助

米林德

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T06:07:45.247

您是否尝试过从文件->打开菜单打开项目？

# c# - 如何将上下文值传递给 Automapper Map？

> ID：12908476
> 
> 赞同：5
> 
> 时间：2012-10-16T06:05:01.320
> 
> 标签：c#, configuration, map, automapper

我使用自动映射器。我有两个类：具有单一属性的 TypeA；TypeB 具有两个属性，其中一个具有私有 setter，并且该属性的值通过构造函数传递。TypeB 没有默认构造函数。

问题：是否可以配置 Automapper 将 TypeA 转换为 TypeB。

```
public class TypeA
{
    public string Property1 { get; set; }
}

public class TypeB
{
    public TypeB(int contextId)
    { ContextId = contextId; }

    public string Property1 { get; set; }

    public int ContextId { get; private set; }
}

public class Context
{
    private int _id;

    public void SomeMethod()
    {
        TypeA instanceOfA = new TypeA() { Property1 = "Some string" };

        // How to configure Automapper so, that it uses constructor of TypeB 
        // and passes "_id" field value into this constructor?

        // Not work, since "contextId" must be passed to constructor of TypeB
        TypeB instanceOfB = Mapper.Map<TypeB>(instanceOfA);

        // Goal is to create folowing object
        instanceOfB = new TypeB(_id) { Property1 = instanceOfA.Property1 };
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-16T06:51:31.110

您可以使用其中一个`ConstructUsing`重载来告诉 AutoMapper 它应该使用哪个构造函数

```
TypeA instanceOfA = new TypeA() { Property1 = "Some string" };
_id = 3;            

Mapper.CreateMap<TypeA, TypeB>().ConstructUsing((TypeA a) => new TypeB(_id));    
TypeB instanceOfB = Mapper.Map<TypeB>(instanceOfA);

// instanceOfB.Property1 will be "Some string"
// instanceOfB.ContextId will be 3 
```

作为替代解决方案，您可以`TypeB`手动创建 AutoMapper 可以填写其余属性“：

```
TypeA instanceOfA = new TypeA() { Property1 = "Some string" };
 _id = 3;            

Mapper.CreateMap<TypeA, TypeB>();

TypeB instanceOfB = new TypeB(_id);
Mapper.Map<TypeA, TypeB>(instanceOfA, instanceOfB);

// instanceOfB.Property1 will be "Some string"
// instanceOfB.ContextId will be 3 
```

# ruby-on-rails - 如何使用 Xcode 4.5.1 在 OSX Lion 10.8.2 上编译 EventMachine gem

> ID：12908484
> 
> 赞同：5
> 
> 时间：2012-10-16T06:05:49.777
> 
> 标签：ruby-on-rails, ruby, heroku, thin, eventmachine

我到处寻找我能找到的地方，但似乎找不到解决方案。

我在 Lion 10.8.2 上使用 Xcode 4.5.1，并试图`bundle`为 Rails 项目运行，但它一直卡在这个问题上。我正在为 Heroku 使用 Thin gem。

```
Bolanos@Jeremys-Mac-mini ⦿-1.9.3 fishfarm $ sudo gem install eventmachine
Password:
Building native extensions.  This could take a while...
ERROR:  Error installing eventmachine:
    ERROR: Failed to build gem native extension.

        /Users/Bolanos/.rvm/rubies/ruby-1.9.3-p194/bin/ruby extconf.rb
checking for rb_trap_immediate in ruby.h,rubysig.h... no
checking for rb_thread_blocking_region()... yes
checking for inotify_init() in sys/inotify.h... no
checking for __NR_inotify_init in sys/syscall.h... no
checking for writev() in sys/uio.h... yes
checking for rb_thread_check_ints()... yes
checking for rb_time_new()... yes
checking for sys/event.h... yes
checking for sys/queue.h... yes
creating Makefile

make
compiling binder.cpp
make: g++-4.2: No such file or directory
make: *** [binder.o] Error 1

Gem files will remain installed in /Users/Bolanos/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/gems/1.9.1/gems/eventmachine-1.0.0 for inspection.
Results logged to /Users/Bolanos/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/gems/1.9.1/gems/eventmachine-1.0.0/ext/gem_make.out 
```

现在我不得不做没有瘦。有没有人有办法解决吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-20T00:51:17.590

还要检查符号链接：

```
$ sudo ln -s /usr/bin/g++ /usr/bin/g++-4.2 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T07:07:16.530

您必须从[developer.apple.com](https://developer.apple.com/downloads/index.action)安装命令行工具包。

我也遇到了 MacOSX10.6.sdk 的问题，因为那里缺少一些头文件，所以我安装了 MacOSX10.5.sdk 并且一切正常。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-03T03:23:06.727

我遇到了确切的错误，为丢失的资源创建一个新的符号链接对`/usr/bin/g++-4.2`我有用。

在我的设置中，我指向了地窖中的位置：

```
/usr/local/Cellar/apple-gcc42/4.2.1-5666.3/bin/g++-4.2 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-27T19:42:29.337

如果以上都不适合你，我做了

```
sudo ln -s /usr/bin/llvm-g++-4.2 /usr/bin/g++-4.2 
```

它就像一个魅力。运行 OS X 10.8.2。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-09-07T20:15:58.697

你应该同时拥有：

1.  Xcode 命令行工具：详细安装说明在“[如何安装 Xcode 命令行工具](https://stackoverflow.com/questions/9329243/xcode-4-4-and-later-install-command-line-tools)”中。

2.  Apple-gcc* 编译器：我应该提到使用 gcc48 和 gcc49 编译失败。因此，安装 apple-gcc42（如果你没有）并通过[MacPorts](https://www.macports.org/)选择编译器将解决问题。您可以使用以下命令查看已安装的 gcc 版本：

    端口选择--list gcc

您应该会看到类似这样的内容，其中“ `mp-`”代表 MacPorts 自己的端口：

```
Available versions for gcc:
         apple-gcc42 (active)
         current_saved
         mp-gcc48
         mp-gcc49 
```

如果您没有“apple-gcc*”，您可以通过以下方式安装它：

```
port install apple-gcc42 
```

之后选择编译器：

```
port select --set gcc apple-gcc42 
```

现在你可以运行：

```
 gem install eventmachine 
```

这应该可以解决在 OSX 上构建 gem 原生扩展时出现的错误问题。

# sql - 如何获得最大和最小日期之间的平均差异？

> ID：12908486
> 
> 赞同：0
> 
> 时间：2012-10-16T06:06:02.303
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我正在尝试获取两个日期之间的**平均**月数差异：

```
select client_id, 
        avg(12*(year(MAX(received_date))-year(min(received_date))) 
        + MONTH(MAX(received_date))-MONTH(min(received_date)))
        from tmpTwoAccessions
        group by CLIENT_ID,PATIENT_ID 
```

我收到这条消息：

```
Cannot perform an aggregate function on an expression containing an aggregate or a subquery. 
```

你能告诉我我在这里做错了什么吗？非常感谢您的指导。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T06:13:44.703

尝试使用这样的子查询：

```
select
    T.client_id
    ,avg(T.ReceivedDateDiff)
from 
(
    select client_id, 
    (12*(year(MAX(received_date))-year(min(received_date))) 
        + MONTH(MAX(received_date))-MONTH(min(received_date))) AS ReceivedDateDiff
    from tmpTwoAccessions
    group by CLIENT_ID,PATIENT_ID
)
T
GROUP BY client_id 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T06:13:58.127

您在子查询中计算 MAX 和 MIN 之间的差异，然后在外部查询中对其进行平均。

```
SELECT client_id, AVG(delta_date)
  FROM (SELECT client_id, patient_id,
               12 * (YEAR(MAX(received_date))-YEAR(MIN(received_date))) 
               + MONTH(MAX(received_date)) - MONTH(MIN(received_date))) AS delta_date
          FROM tmpTwoAccessions
         GROUP BY client_id, patient_id
       ) AS x
 GROUP BY client_id; 
```

我不相信您的日期差异表达式是最佳的，但我没有尝试更改它。

* * *

[Yurly Rozhovetskiy](https://stackoverflow.com/users/360171/yuriy-rozhovetskiy)建议表达：

```
DATEDIFF(MONTH, MIN(received_date), MAX(received_date)) 
```

这对我来说看起来不错。修改后的查询变为：

```
SELECT client_id, AVG(delta_date)
  FROM (SELECT client_id, patient_id,
               DATEDIFF(MONTH, MIN(received_date), MAX(received_date)) AS delta_date
          FROM tmpTwoAccessions
         GROUP BY client_id, patient_id
       ) AS x
 GROUP BY client_id; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-16T13:50:40.193

使用 DATEDIFF 实现会更干净。

```
WITH tmpTwoAccessionsMonths AS(         
    select 
          client_id
        , PATIENT_ID
        , DATEDIFF(month,MIN(received_date),MAX(received_date)) MonthDifference
    from 
        tmpTwoAccessions
    group by 
        CLIENT_ID,PATIENT_ID
)
SELECT
    client_id
    ,AVG(MonthDifference)
FROM
    tmpTwoAccessionsMonths
GROUP BY
    client_id 
```

# django - 基于 Django 相关字段的过滤器

> ID：12908488
> 
> 赞同：0
> 
> 时间：2012-10-16T06:06:13.847
> 
> 标签：django, django-models, django-queryset

我有两个模型，其中一个与另一个相关。

```
class Contacts(BaseModel):
    user = models.ForeignKey(User, related_name='contacts')
    group = models.ForeignKey(ContactGroups, related_name = 'contact_list')
    name = models.CharField(_("Name"), max_length = 250, null = True, blank = True)
    title = models.CharField(_("Title"), max_length = 250, null = True, blank = True)
    twitter = models.CharField(_("Twitter"), max_length = 250, null = True, blank = True)
    facebook = models.CharField(_("Facebook"), max_length = 250, null = True, blank = True)
    google = models.CharField(_("Google +"), max_length=250, null = True, blank = True)
    notes = models.TextField(_("Notes"), null = True, blank = True)
    image = ImageField(_('mugshot'), upload_to = upload_to, blank = True, null = True)

class PhoneNumbers(BaseModel):
    contact = models.ForeignKey(Contacts, related_name='phone_numbers')
    phone = models.CharField(_("Phone"), max_length = 200, null = True, blank = True)
    type = models.CharField(_("Type"), max_length = 200, choices = TYPES, null = True, blank = True) 
```

在这里，我想要过滤至少有一个电话号码的联系人。

我努力了，

```
contacts = Contacts.objects.filter(user=request.user, phone_numbers__isnull=True) 
```

正确与否？有没有其他优化的方法？我们如何根据相关名称过滤查询集？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T06:27:04.243

我想你想要，

```
contacts = Contacts.objects.filter(user=request.user, phone_numbers__isnull=False) 
```

即检查`False`而不是`True`，因为你想要`Contacts`那里至少有一个`PhoneNumber`。如果它不存在，它将存在`NULL`。

# php - MySQL 双等号

> ID：12908502
> 
> 赞同：4
> 
> 时间：2012-10-16T06:07:26.280
> 
> 标签：php, mysql, sql

我正在调试一个旧网站，但遇到一些 SQL 错误。当我浏览它时，我发现了以下查询。

```
UPDATE boats
set    new_high_date == DATE_ADD(NOW(), INTERVAL 3 MONTH)
WHERE  id=49701 
```

我不知道这里的**==**是什么意思。这是一个有效的查询吗？我似乎无法执行它。

我不确定我是否应该改变它，或者它是否意味着什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-16T06:08:27.847

MySQL 中没有双重相等，所以你应该删除它。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-16T06:08:13.957

那是不正确的，sql中没有双等号。正确的设置方法是

```
UPDATE boats 
SET    new_high_date = DATE_ADD(NOW(), INTERVAL 3 MONTH)
WHERE  id = 49701 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-16T06:09:52.053

你可以盲目地删除它们，因为 MYSQL 没有任何`==`

# asp.net - 提交新数据时需要刷新上一页的数据

> ID：12908508
> 
> 赞同：1
> 
> 时间：2012-10-16T06:08:02.620
> 
> 标签：asp.net, mobile, refresh, jqtouch

第1页是第2页的摘要，当我更改第2页的数据时，我需要刷新第1页。当我使用 jQT.goBack() 时，我在第 1 页上看到了旧值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T06:59:01.410

如果您有两个页面，**Page1**和**Page2**，并以相同的顺序查看它们，然后在 Page2 上保存一些影响**Page1**的数据，那么您有两种解决方案。

## 第一种方式

从 Page2 开始，当您“返回”到第 1 页时，您不会使用“返回”，而是使用具有额外唯一参数的链接，例如更新的时间戳，这会强制 Page1 重新加载。

例如：你回去为： `Page1.aspx?timestamp=299388172`

## 第二种方式

在 Page1 上，您只设置了几秒钟的缓存，例如您可能认为用户进行编辑的几秒钟，并且您注意在那之后重新加载。您永远不会在浏览器上设置缓存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T19:12:21.240

jQTouch 使单个 HTML 页面能够像 Web 应用程序一样工作。“后退”页面实际上只是 HTML 页面的另一部分。

点击该`Back`按钮可将页面动画返回到上一个部分。如果需要刷新内容，则可以注册一个页面事件的监听器，并执行ajax来刷新页面。这是代码示例：

```
 $('#page_back_to').bind('pageAnimationStart', function(page, info) {
    if (info.direction == 'in' && info.back) {
      // insert your code here to replace the content
    }
  }); 
```

# c++ - 后缀到中缀对话

> ID：12908510
> 
> 赞同：1
> 
> 时间：2012-10-16T06:08:22.193
> 
> 标签：c++, c, equation, infix-notation, postfix-notation

我无法解决从后缀到中缀的这个表达式。请帮我详细了解

```
5 x y - / x y + 3 ^ 7 / + 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T06:21:47.270

这不是代码，而是方式，您应该将后缀扩展为中缀::

5 xy - / xy + 3 ^ 7 / +

5 (xy) / xy+ 3^ 7 / +

(5/(xy)) xy+ 3^ 7 / +

(5/(xy)) (x+y)3^ 7 / +

(5/(xy)) ((x+y)^3) 7 / +

(5/(xy)) (((x+y)^3) / 7) +

(5/(xy)) + (((x+y)^3) / 7)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T06:26:47.283

这很简单：

1.  您读取一个参数并决定它是一个值还是一个变量。如果是，则将参数压入堆栈。如果不是，那就是运营商。
2.  如果您有一个运算符，您将创建一个树，该树由作为根的运算符和与其子元素一样多的堆栈参数组成。您将树推入堆栈。
3.  当您想打印中缀表示法时，您可以按顺序遍历堆栈顶部（原始的后缀表示法只是同一棵树的后序遍历）。

为了在 C++ 中处理这个问题，我创建了一个基类 ( `Expression`)，派生类表示不同类型的节点 ( `Value`、`Variable`和`BinaryOperation`) 并维护一个`std::stack<std::shared_ptr<Expression>>`. 编写代码主要是一个打字练习。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T06:33:36.123

**后缀中缀：**

```
5 x y - / x y + 3 ^ 7 / + 
```

步

5 xy - /
A) 5xy-/ = 5 (xy)/ = (5 / (xy))
xy +
B) xy + = (x + y)
(x+y) 3 ^
B.1) (x + y ) 3 ^ = ((x + y) ^ 3 )
现在，(5 / (xy)) ((x + y) ^ 3 ) 7 / +
= (5 / (xy)) (((x + y) ^ 3 )/7 ) + = (5 / (xy)) + (((x + y) ^ 3 )/7 )

POSTFIX 和 PREFIX 是不使用括号的表达式。运算符的优先级是按照在表达式中出现的顺序决定的，因此评估表达式不需要搜索下一个操作来执行**-FAST**。

而在 INFIX 表达式中，运算符的优先级被括号覆盖。因此中缀表达式中有括号 - 需要搜索要执行的操作，例如 A+B%D - 因此**SLOW**。
这就是转换在计算机科学中有用的原因。

# iphone - UIWindow 在哪里实例化，故事板在哪里传入？

> ID：12908511
> 
> 赞同：4
> 
> 时间：2012-10-16T06:08:22.317
> 
> 标签：iphone, ios, storyboard, ios6

我想知道是否有人可以解释（或指出我正确的方向）

1.  不使用情节提要时，用于实例化 UIWindow 的代码消失在哪里？在空应用程序项目模板中，该窗口是在您的 AppDelegate 中的应用程序 didFinishLaunnching... 中创建的。

    ```
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]]; 
    ```

    然而，如果使用故事板，上面的代码将被省略，尽管 UIApplication 显然知道从哪个窗口开始。

2.  应用程序在哪里查找 info.plist 文件以了解从哪个故事板开始。

我确定这在我没有找到的地方都有很好的记录。阅读此[iPhone 应用程序中的 UIWindow 在哪里实例化？](https://stackoverflow.com/questions/617397/where-is-the-uiwindow-instantiated-in-an-iphone-app)但没有太大帮助。我在 iOS 上已经有一段时间了，直到现在，我才不必在应用程序的初始启动上搞砸。谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-16T06:14:26.957

我认为您的意思是“使用情节提要时代码消失的*位置*。”

应用程序根据 Info.plist 中的“主故事板文件基本名称”（UIMainStoryboardFile）键加载故事板，并从该故事板加载带有“是初始视图控制器”切换集的视图控制器。

编辑：如评论中所问，以下代码（类似于基于 xib 的应用程序中的初始加载）将允许您在应用程序启动时按名称加载和显示情节提要：

```
-(BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
    UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"StoryboardName" bundle:nil];
    UIViewController *viewController = [storyboard instantiateInitialViewController];
    self.window.rootViewController = viewController;
    [self.window makeKeyAndVisible];
    return YES;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T06:12:08.750

使用故事板时，要加载的故事板来自您应用的 Info.plist 文件。

您的 Info.plist 文件中将有一个部分包含如下键值对：

```
<key>UIMainStoryboardFile</key>
    <string>MainStoryboard</string> 
```

在这种情况下，MainStoryboard 是加载的默认故事板的名称。

# sed - awk 或 sed 用相邻的 $2 替换特定的 $3

> ID：12908514
> 
> 赞同：2
> 
> 时间：2012-10-16T06:08:32.910
> 
> 标签：sed, awk

文件看起来像

```
$1    $2      $3

Text  Text2    *

Text  Text4    Text3 
```

我想`*'s`在文件中搜索并将其替换为旁边列中的文本。在保留其余信息的同时...基本上将`*`逻辑替换为第 2 列。

目前我正在使用 sed 或 awk

`awk : awk '{ if($3=*) {print$2}}'` 有效...但我也想保留 1.2 美元

`sed : sed -r 's/[*]//g'` 我无法正确地用 $2 替换 reg 表达式

任何快速帮助、提示或技巧？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T06:12:06.973

awk 解决方案：

```
awk '$3=="*"{$3=$2}1' file 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T06:12:27.957

内容`file.txt`：

```
Text Text2 *
Text Text4 Text3 
```

一种使用方式`awk`：

```
awk '$3 == "*" { $3=$2 }1' file.txt 
```

结果：

```
Text Text2 Text2
Text Text4 Text3 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-16T15:14:16.497

使用 GNU sed `\S`and`\s`可以分别表示非空格和空格，所以你可以像这样完成你想要的：

```
sed -r '/(\S+)\s+(\S+)\s+\*/ s//\1 \2 \2/' 
```

empty`s///`命令隐式使用来自 的匹配项`//`。

*如果它在steve*列出的输入上运行：

```
sed -r '/(\S+)\s+(\S+)\s+\*/ s//\1 \2 \2/' file.txt 
```

输出：

```
Text Text2 Text2
Text Text4 Text3 
```

如果要保留列间空格，请使用：

```
sed -r '/(\S+)(\s+)(\S+)(\s+)\*/ s//\1\2\3\4\3/' 
```

# java - Java 中的文件对象不能存储字符“-”。

> ID：12908516
> 
> 赞同：0
> 
> 时间：2012-10-16T06:08:43.243
> 
> 标签：java, eclipse, rcp

Java 中的文件对象不能存储字符“-”。它将“-”更改为“-”。Java 不支持这个字符 ('-') 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T06:14:41.543

如果您`byte[]`用于写入文件，请使用正确的字符集，例如`UTF-8`

# antlr - 如何在没有解析器的情况下仅使用 ANTLR3 词法分析器？

> ID：12908521
> 
> 赞同：-1
> 
> 时间：2012-10-16T06:09:07.433
> 
> 标签：antlr, antlr3, lexer, parser-generator

我只需要在 ANTLR3 中使用词法分析器，我不需要解析器。我该怎么做 ？我使用以下代码（在 main.c 中），我在互联网上找到了一些代码。

```
 #include <CLexer.h>
#include <CParser.h>

int ANTLR3_CDECL

main    (int argc, char *argv[])
{
    pANTLR3_UINT8               fileName;
    pANTLR3_INPUT_STREAM        inputStream;
    pCLexer                     cLexer;
    pANTLR3_COMMON_TOKEN_STREAM tokenStream;
    pCParser                    cParser;

    // Имя входного файла по умолчанию - "input", но
    // его можно задать аргументом программы
    //
    if (argc < 2 || argv[1] == NULL)
    {
        fileName = (pANTLR3_UINT8) "./input";
    }
    else
    {
        fileName = (pANTLR3_UINT8) argv[1];
    }

    // Открываем входной поток, связанный с этим файлом
    //
    inputStream = antlr3AsciiFileStreamNew(fileName);
    if ( inputStream == NULL)
    {
        // Аварийный выход (файл не открывается)
        //
        fprintf(stderr, "Failed to open file %s\n", (char *) fileName);
        exit(1);
    }

    // Создаём лексер, связанный с открытым потоком
    //
    cLexer = CLexerNew(inputStream);
    if ( cLexer == NULL )
    {
        // Аварийный выход (закончилась память, лол)
        //
        fprintf(stderr, "Unable to create the lexer due to malloc() failure1\n");
        exit(1);
    }

    // Получаем поток токенов из входных данных
    //
    tokenStream = antlr3CommonTokenStreamSourceNew(ANTLR3_SIZE_HINT, 
                                                   TOKENSOURCE(cLexer));
    if (tokenStream == NULL)
    {
        // Аварийный выход (закончилась память)
        //
        fprintf(stderr, "Out of memory trying to allocate token stream\n");
        exit(1);
    }

    // Создаём парсер, связанный с потоком токенов
    //
    cParser = CParserNew(tokenStream);
    if (cParser == NULL)
    {
        // Аварийный выход (закончилась память, хотя, мне кажется,
        // что здесь более вероятны другие причины ошибки)
        //
        fprintf(stderr, "Out of memory trying to allocate parser\n");
        exit(ANTLR3_ERR_NOMEM);
    }

    // Не знаю
    //
    cParser->translation_unit(cParser);

    // Уничтожаем созданные "объекты" в том порядке, в котором их создавали
    //
    cParser ->free(cParser);
    cParser = NULL;
    tokenStream ->free(tokenStream);
    tokenStream = NULL;
    cLexer ->free (cLexer);
    cLexer = NULL;
    inputStream ->close (inputStream);
    inputStream = NULL;

    return 0;
} 
```

但看起来它也使用了解析器，因为当我尝试使用它时，我在控制台中遇到了大量的解析错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T19:31:30.567

在 tokenStream 'object' 上使用 getTokens() 来获取令牌的 ANTLR 向量。然后打印向量的内容。

```
//This runs fillBuffer() which is the function that runs the lexer to completion
pANTLR3_VECTOR tList = tokenStream->getTokens(tokenStream);

pANTLR3_COMMON_TOKEN token = tList->get(tList,0); 
```

# actionscript-3 - 如何使用 flash builder 4.5 flex 项目发布 swf 文件

> ID：12908525
> 
> 赞同：0
> 
> 时间：2012-10-16T06:09:32.047
> 
> 标签：actionscript-3, flash, mxml

我有一组 fla 文件模板，它们通过更改其输入 XML 文件来生成游戏和活动，我想做的是在 flex 中创建 xml 编辑器，并将 fla 文件转换为 flex 中的 actionscript 项目，使用生成的 xml 发布一个瑞士法郎

简而言之，我的方法是将 Flash 中的游戏转换为 flex MXML 组件通过将 XML 参数传递给 MXMl 组件来修改游戏数据单击发布，用户可以获得 SWF 格式的游戏

目标是产生类似的[东西](https://www.onlinetrainingtemplates.com/editor/)

那可能吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T06:34:08.743

从 Flash Professional 重用游戏和活动的简单直接的方法是使用 swf loader 将 swf 文件加载到 flex，然后使用 swf.content = M 作为movieclip 转换为movieclip 下一步是通过 M.XMLVar = xml 修改 xml 变量现在我已经修改了活动的版本 我仍在寻找一种将影片剪辑转换回 swf 并保存的方法

# java - LDAP/Java auth：如何指定工作站？

> ID：12908532
> 
> 赞同：1
> 
> 时间：2012-10-16T06:09:58.410
> 
> 标签：java, authentication, active-directory, ldap

我们有一个小型 LAN，每个用户都通过 Active Directory 服务器登录 Windows。我希望能够以同样的方式从 Java 代码验证用户。我是通过以下方式执行此操作的：

```
Hashtable <String, String> env = new Hashtable <>();
env.put(Context.INITIAL_CONTEXT_FACTORY, "com.sun.jndi.ldap.LdapCtxFactory");
env.put(Context.PROVIDER_URL, "ldap://192.168.0.1:389");
env.put(Context.SECURITY_AUTHENTICATION, "simple");
env.put(Context.SECURITY_PRINCIPAL, "user1");
env.put(Context.SECURITY_CREDENTIALS, "pass1"));
env.put(Context.REFERRAL, "ignore");
try {
    new InitialDirContext(env).close();
    return true;
} catch (AuthenticationException ex) {
    return false;
} 
```

用户凭证的位置`user1`和位置。`pass1`

在本地管理员通过为每个用户明确设置允许的工作站列表来限制访问之前，这一直很好。现在用户仍然可以登录 Windows，但我的代码（在允许的工作站上执行）产生

```
javax.naming.AuthenticationException: [LDAP: error code 49 - ...:
    LdapErr: ...,
    comment: AcceptSecurityContext error,
    data 531,
    ...] 
```

其中[“数据 531”表示“不允许在此工作站登录”](https://confluence.atlassian.com/display/CONFKB/LDAP+Error+Code+49)。

所以问题是：当设置了用户允许的工作站时，我应该如何在 LDAP 服务器上对用户进行身份验证？我应该以某种方式将当前工作站传递给 LDAP 服务器还是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-09T10:39:21.833

允许的工作站参数在 AD 中的**userWorkstations**属性中设置。

因此，您可能需要将托管您的 java 代码的服务器名称设置为登录用户的 AD 中的**userWorkstations**属性。

有关详细信息，请参阅以下链接

[无法从 Java 代码获得与 AD 的连接](https://stackoverflow.com/questions/18766158/cant-get-connection-with-ad-from-java-code/18767613#18767613?newreg=854061f7965244399fec2b7757c3b325)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-09T11:13:54.753

> 我希望能够以同样的方式从 Java 代码验证用户。

然后你想要 Kerberos 而不是 LDAP 绑定。

# c++ - 在 C++ 中检索正则表达式搜索

> ID：12908534
> 
> 赞同：16
> 
> 时间：2012-10-16T06:10:23.343
> 
> 标签：c++, regex

您好，我是正则表达式的新手，根据我从 c++ 参考网站了解的内容，可以获得匹配结果。

我的问题是：如何检索这些结果？`smatch`和 和有什么不一样`cmatch`？例如，我有一个由日期和时间组成的字符串，这是我写的正则表达式：

```
"(1[0-2]|0?[1-9])([:][0-5][0-9])?(am|pm)" 
```

现在，当我`regex_search`对字符串和上面的表达式执行 a 时，我可以找到字符串中是否有时间。但我想将那个时间存储在一个结构中，这样我就可以分开小时和分钟。我正在使用 Visual Studio 2010 C++。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-16T06:17:43.903

如果你使用 eg[`std::regex_search`](http://en.cppreference.com/w/cpp/regex/regex_search)那么它会填写一个[`std::match_result`](http://en.cppreference.com/w/cpp/regex/match_results)你可以使用的地方[`operator[]`](http://en.cppreference.com/w/cpp/regex/match_results/operator_at)来获取匹配的字符串。

**编辑：**示例程序：

```
#include <iostream>
#include <string>
#include <regex>

void test_regex_search(const std::string& input)
{
    std::regex rgx("((1[0-2])|(0?[1-9])):([0-5][0-9])((am)|(pm))");
    std::smatch match;

    if (std::regex_search(input.begin(), input.end(), match, rgx))
    {
        std::cout << "Match\n";

        //for (auto m : match)
        //  std::cout << "  submatch " << m << '\n';

        std::cout << "match[1] = " << match[1] << '\n';
        std::cout << "match[4] = " << match[4] << '\n';
        std::cout << "match[5] = " << match[5] << '\n';
    }
    else
        std::cout << "No match\n";
}

int main()
{
    const std::string time1 = "9:45pm";
    const std::string time2 = "11:53am";

    test_regex_search(time1);
    test_regex_search(time2);
} 
```

程序的输出：

```
匹配
匹配[1] = 9
匹配[4] = 45
匹配[5] = 下午
匹配
匹配[1] = 11
匹配[4] = 53
匹配[5] = 上午

```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T06:17:44.447

只需使用命名组。

```
(?<hour>(1[0-2]|0?[1-9]))([:](?<minute>[0-5][0-9]))?(am|pm) 
```

好的，vs2010 不支持命名组。您已经在使用未命名的捕获组。通过他们。

# c# - 如何验证电话号码？

> ID：12908536
> 
> 赞同：4
> 
> 时间：2012-10-16T06:10:26.723
> 
> 标签：c#, asp.net-mvc

我正在使用 MVC，我想验证电话号码

我写了这堂课：

```
public class StduentValidator : AbstractValidator<graduandModel>
{
    public StduentValidator(ILocalizationService localizationService)
    {
        RuleFor(x => x.phone).NotEmpty().WithMessage(localizationService.GetResource("Hire.HireItem.Fields.phone.Required"));
    }
} 
```

我怎样才能验证这个类中的电话号码？

我可以使用以下内容吗？

```
RuleFor(x => x.phone).SetValidator(....) 
```

如果是这样我该如何使用它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T06:14:50.810

您是否考虑过在模型中使用[DataAnnotations](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations%28v=vs.100%29.aspx)？

像这样的东西：

```
[DataType(DataType.PhoneNumber, ErrorMessage = "Invalid Phone Number")]
public string PhoneNumber { get; set; } 
```

另一种解决方案是使用正则表达式：

```
[DisplayName("Phone number")]
[Required(ErrorMessage = "Phone number is required")]
[RegularExpression(@"((\(\d{3}\) ?)|(\d{3}-))?\d{3}-\d{4}", ErrorMessage = "Invalid phone number")] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T06:16:31.843

你需要正则表达式。

试试这个例子

[正则表达式库](http://regexlib.com/%28A%284RYQ9h0Sbzr1tQFgCQt5HxrVEczRWMbgsbgLA1DaGOrMThPaeieWDZjlV748xdHuAtr75klQI5ZNxqqBWiCe98VhGt6i21J1HPZqtT3dZUKKvBjSICuAbhIhpQQz0wBcBic8EKKsY438DuouIwnB79_Jzo-Zh7zX6C3pz3gRFKafqzOSSLLUFqKE1ealINdG0%29%29/Search.aspx?k=&c=7&m=-1&ps=100)

然后您可以在数据注释中使用正则表达式模式，如下所示：

```
[RegularExpression(@"^[2-9]\d{2}-\d{3}-\d{4}$", ErrorMessage = "Please enter a valid phone number.")]
public string PhoneNumber { get; set; } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2022-01-11T12:57:04.350

下面的代码示例使用 fluent 验证进行电话号码验证

```
 class StudentCommandValidation :  AbstractValidator<StudentCommand>
{
    public StudentCommandValidation()
    {
        RuleFor(p => p.PhoneNumber)
       .NotEmpty()
       .NotNull().WithMessage("Phone Number is required.")
       .MinimumLength(10).WithMessage("PhoneNumber must not be less than 10 characters.")
       .MaximumLength(20).WithMessage("PhoneNumber must not exceed 50 characters.")
       .Matches(new Regex(@"((\(\d{3}\) ?)|(\d{3}-))?\d{3}-\d{4}")).WithMessage("PhoneNumber not valid");
    }
} 
```

# android - 自定义对话框的单选按钮

> ID：12908538
> 
> 赞同：1
> 
> 时间：2012-10-16T06:10:38.033
> 
> 标签：android, android-dialog

我有一个带有单选按钮的自定义对话框，我需要从打开的对话框中监听更改（如果有的话）并从中设置文本。由于我使用 java 完成了该操作，因此我不知道如何使用 onCheckedChangedListener。我怎么做 。我是android新手，我不太了解。请帮助我。

```
public class Availability extends Activity implements OnClickListener {
    ToggleButton override;
    TextView status;
    Button Overridestatus;
    CharSequence [] choice = {"RemoteOffice","Office","Personel mobile","Home","Mobile","Temporary","Do not Disturb","Working Remotely","Non work day","Work Day"};

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.availability);
        override = (ToggleButton) findViewById(R.id.tbOver);
        override.setOnClickListener(this);
        status = (TextView) findViewById(R.id.tvstatus);
        Overridestatus = (Button) findViewById(R.id.bstatus);
        Overridestatus.setOnClickListener(this);

    }

    public void onClick(View view) {
        // TODO Auto-generated method stub
        switch (view.getId()) {
        case R.id.tbOver:

            if (override.isChecked()) {

                status.setText("Override");
                Overridestatus.setText("Personal Mobile");

            } else {
                status.setText("Currently");
                Overridestatus.setText("Use Schedule - Do Not Disturb");

            }
            break;

        case R.id.bstatus:

            {
                if (override.isChecked()){
                showDialog(0);
                }
            }

            break;
        }
    }
    @Override
    protected Dialog onCreateDialog(int id) {
        // TODO Auto-generated method stub
        switch (id) {
        case 0:
            AlertDialog.Builder builder = new AlertDialog.Builder(this);
            builder.setTitle("Select System Server");
            builder.setIcon(R.drawable.ic_btn_round_more_normal);
            builder.setPositiveButton("OK",
                    new DialogInterface.OnClickListener() {

                        public void onClick(DialogInterface dialog, int id) {
                            // TODO Auto-generated method stub
                            Intent menu = new Intent(Availability.this,MenuScreen.class);
                            startActivity(menu);

                        }
                    });
            builder.setNegativeButton("CANCEL",
                    new DialogInterface.OnClickListener() {

                        public void onClick(DialogInterface dialog, int which) {
                            // TODO Auto-generated method stub

                        }
                    });

            builder.setSingleChoiceItems(choice, -1,
                    new DialogInterface.OnClickListener() {

                        public void onClick(DialogInterface dialog, int item) {
                            // TODO Auto-generated method stub

                        }
                    });

            builder.create();
            builder.show();
        }
        return null;

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T06:21:01.250

您可以提取单选按钮的状态并将它们保存在本地变量中以供进一步使用。

请参考这里的优秀开发者指南： [https ://developer.android.com/guide/topics/ui/dialogs.html](https://developer.android.com/guide/topics/ui/dialogs.html)

通读一遍，您将了解如何在自定义对话框中提取和保存各种元素的状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T06:25:18.843

您可以通过以下方式执行此操作：

```
public class Availability extends Activity implements OnClickListener,OnCheckedChangeListener {
    ....
    @Override
    public void onCheckedChanged(RadioGroup group, int checkedId) {
    switch(group.getId())
    {
    }
} 
```

您可以将 RadioButtons 放在 RadioGroup 中。

# iphone - 如何在标签栏中更改标签时使计时器无效

> ID：12908543
> 
> 赞同：-3
> 
> 时间：2012-10-16T06:12:00.513
> 
> 标签：iphone, ios

当我从一个选项卡移动到另一个选项卡时，计时器继续运行。但我想停止那个计时器。

因此，如果有人知道，请告诉我在从一个选项卡移动到另一个选项卡时需要调用哪种方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T07:51:47.177

最简单的答案是

```
-(void)viewWillDisappear:(BOOL)animated {
    //here
} 
```

当您单击选项卡时，将调用此函数并执行此函数中编写的所有内容

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T06:21:25.357

您可以像这样停止计时器过程，

```
if(self.TimeOfActiveUser) 
{
    [self.TimeOfActiveUser invalidate];
    self.TimeOfActiveUser = nil;
} 
```

**编辑** 您可以在推送另一种方法时放置此方法例如：如果您每 6 秒使用 Timer 重新加载 TableView 的数据，那么您可以通过选择推送特定行，然后您可以将这两行代码放入

```
 - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
 {

[self.TimeOfActiveUser invalidate];
self.TimeOfActiveUser = nil;

    objScore = [[CntrScore alloc]initWithNibName:@"CntrScore" bundle:nil];
[self.navigationController pushViewController:objScore animated:YES];

  } 
```

**和**

如果您的应用程序选项卡基于您将计时器停止代码放入`viewWillDisappear`

```
 -(void)viewWillDisappear:(BOOL)animated
 {
     if(self.TimeOfActiveUser) 
     {
     [self.TimeOfActiveUser invalidate];
     self.TimeOfActiveUser = nil;
     }

 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T06:38:40.933

检查标签栏索引并编写如下代码：

```
[yourtimername invalidate]; 
```

# java - 如何替换字符串

> ID：12908547
> 
> 赞同：0
> 
> 时间：2012-10-16T06:12:09.503
> 
> 标签：java, groovy

我有带有值的字符串：“我的名字 [name]，我的城市 [cIty]，我的国家 [countrY]....”。

我想将方括号内的所有字符转换`[<value in upper or lower case>]`为`[<value in lowercase>]`.

示例：[城市] 到 [城市]

如何在 java 或 Groovy 中使用更少的代码以有效的方式做到这一点？

**编辑：**我只想将方括号内的字符转换为小写，而不是方括号外的其他字符。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T06:24:51.467

这是将为您完成这项工作的 Java 代码：

```
String str = "My name [Name], My city [cIty], My country [countrY].";
Matcher m = Pattern.compile("\\[[^]]+\\]").matcher(str);
StringBuffer buf = new StringBuffer();
while (m.find()) {
   String lc = m.group().toLowerCase();
   m.appendReplacement(buf, lc);
}
m.appendTail(buf);
System.out.printf("Lowercase String is: %s%n", buf.toString()); 
```

**输出：**

```
Lowercase String is: My name [name], My city [city], My country [country]. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T10:53:31.830

一条较短的 Groovy 路线是：

```
def text = "My name [name], my city [cIty], my country [countrY]."
text = text.replaceAll( /\[[^\]]+\]/ ) { it.toLowerCase() } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T06:17:11.230

我不熟悉 Groovy，但在 Java 中，您可以使用`string.toLowerCase()`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-16T06:36:56.767

这是一些应该做你想做的事情的常规代码：

```
def text = "My name [name], my city [cIty], my country [countrY]."
text.findAll(/\[(.*?)\]/).each{text = text.replace(it, it.toLowerCase())}

assert text == "My name [name], my city [city], my country [country]." 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-16T06:53:32.883

```
import java.util.regex.*;

public class test {

public static void main(String[] args) {
    String str = "My name [name], my city [cIty], my country [countrY]..........";
    System.out.println(str);

    Pattern pattern = Pattern.compile("\\[([^\\]]*)\\]");
    Matcher matcher = pattern.matcher(str);

    while (matcher.find()) {
      str = str.substring(0,matcher.start()) + matcher.group().toLowerCase() + str.substring(matcher.end());
    }
    System.out.println(str);
}

} 
```

# r - 表中每个单元格的线性回归

> ID：12908549
> 
> 赞同：2
> 
> 时间：2012-10-16T06:12:15.680
> 
> 标签：r, linear-regression

我有四张桌子。他们每个人都有 4 行和 4 列。以下是四张表。

对于第一张桌子，

```
t1 <- array(1:20, dim=c(4,4))

    [,1] [,2] [,3] [,4] 
[1,]    1    5    9   13 
[2,]    2    6   10   14 
[3,]    3    7   11   15 
[4,]    4    8   12   16 
```

对于第二张桌子，

```
t2 <- array(6:25, dim=c(4,4))

     [,1] [,2] [,3] [,4]
[1,]    6   10   14   18
[2,]    7   11   15   19
[3,]    8   12   16   20
[4,]    9   13   17   21 
```

对于第三张桌子，

```
t3 <- array(11:30, dim=c(4,4))

     [,1] [,2] [,3] [,4]
[1,]   11   15   19   23
[2,]   12   16   20   24
[3,]   13   17   21   25
[4,]   14   18   22   26 
```

对于第四张桌子，

```
t4 <- array(21:30, dim=c(4,4))

     [,1] [,2] [,3] [,4]
[1,]   21   25   29   23
[2,]   22   26   30   24
[3,]   23   27   21   25
[4,]   24   28   22   26 
```

对于每个表，我都有一组固定的 y 值。

```
t1 = 0.1 
t2 = 3
t4 = 0.5
t6 = 7 
```

换句话说：

```
y <- c( 0.1, 3, 0.75, 7) 
```

然后，我想从四个表中的每个单元格中提取 x 值。对于 [1,1] 单元格，提取的 x 值应为 (0.1, 3, 0.5, 7)。我们一步一步地重复这个步骤，直到表格的末尾，即[4,4]单元格。因此，我总共得到了 16 组 x 值，如下所示：

```
cell   x-values
[1,1]  (1,6,11,21) 
[1,2]  (5,10,15,25) 
…..
[4,4]  (16, 21,26,26) 
```

然后我尝试计算每个 yx 对的线性回归的 R2。换句话说，我想得到总共 16 个 R2 值，如下所示：

```
For [1,1] cell, linear regression between (0.1, 3, 0.5, 7) and (1,6,11,21) = 0.6853
For [1,2] cell, linear regression between (0.1, 3, 0.5, 7) and (5,10,15,25) = 0.6853 
…..
For [4,4] cell, linear regression between (0.1, 3, 0.5, 7) and (16, 21,26,26) = 0.2719 
```

最后，我想得到一个包含以下两列的表

```
cell   R2 
[1,1] 0.6853
[1,2] 0.6853
….
[4,4] 0.2719 
```

我了解到要对 x 和 y 系列数据进行线性回归，我可以使用以下命令：

```
Rcoefficient <- summary(lm(y ~ x, data=faithful))$r.squared 
```

但是，我无法从四个表中读取每组 x 值。我尝试使用 reshape，但仍然无法正确使用。Stackoverflow 的专家能否帮助建议一种使用 R 的有效方法，因为我的真实表非常大，有超过 1000 列和行。

非常感谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-16T08:00:49.100

我会[*] 通过将它们连接成一个 4 x 4 x 4 数组来操作数组：

```
t1 <- array(1:20, dim=c(4,4))
t2 <- array(6:25, dim=c(4,4))
t3 <- array(11:30, dim=c(4,4))
t4 <- array(21:30, dim=c(4,4))

tt <- array(c(t1,t2,t3,t4), dim = c(4,4,4))
## now you can remove the original arrays 
```

这使：

```
> tt
, , 1

     [,1] [,2] [,3] [,4]
[1,]    1    5    9   13
[2,]    2    6   10   14
[3,]    3    7   11   15
[4,]    4    8   12   16

, , 2

     [,1] [,2] [,3] [,4]
[1,]    6   10   14   18
[2,]    7   11   15   19
[3,]    8   12   16   20
[4,]    9   13   17   21

, , 3

     [,1] [,2] [,3] [,4]
[1,]   11   15   19   23
[2,]   12   16   20   24
[3,]   13   17   21   25
[4,]   14   18   22   26

, , 4

     [,1] [,2] [,3] [,4]
[1,]   21   25   29   23
[2,]   22   26   30   24
[3,]   23   27   21   25
[4,]   24   28   22   26 
```

然后我们使用`aperm()`重新排列数组的维度，以便您请求的索引处于正确的顺序。我们从这个数组创建一个矩阵作为最后一步。

```
X <- matrix(aperm(tt, c(3,1,2)), ncol = 4, byrow = TRUE) 
```

步骤`aperm(tt, c(3,1,2))`产生

```
> aperm(tt, c(3,1,2))
, , 1

     [,1] [,2] [,3] [,4]
[1,]    1    2    3    4
[2,]    6    7    8    9
[3,]   11   12   13   14
[4,]   21   22   23   24

, , 2

     [,1] [,2] [,3] [,4]
[1,]    5    6    7    8
[2,]   10   11   12   13
[3,]   15   16   17   18
[4,]   25   26   27   28

, , 3

     [,1] [,2] [,3] [,4]
[1,]    9   10   11   12
[2,]   14   15   16   17
[3,]   19   20   21   22
[4,]   29   30   21   22

, , 4

     [,1] [,2] [,3] [,4]
[1,]   13   14   15   16
[2,]   18   19   20   21
[3,]   23   24   25   26
[4,]   23   24   25   26 
```

您想要的索引在列中，我们在创建矩阵时利用它，因为 R 会将置换数组视为从置换数组的列填充的向量。`X`结果是

```
> X
      [,1] [,2] [,3] [,4]
 [1,]    1    6   11   21
 [2,]    2    7   12   22
 [3,]    3    8   13   23
 [4,]    4    9   14   24
 [5,]    5   10   15   25
 [6,]    6   11   16   26
 [7,]    7   12   17   27
 [8,]    8   13   18   28
 [9,]    9   14   19   29
[10,]   10   15   20   30
[11,]   11   16   21   21
[12,]   12   17   22   22
[13,]   13   18   23   23
[14,]   14   19   24   24
[15,]   15   20   25   25
[16,]   16   21   26   26 
```

然后我们可以按照@January 的回答进行并拟合回归（尽管注意我明确传入，`y`因为范围规则`lm()`是非标准的，我正在防御。）

```
y <- c( 0.1, 3, 0.75, 7)
r2 <- apply(X, 1, function(x, y) summary(lm(y ~ x))$r.squared, y = y) 
```

这导致：

```
> head(r2)
[1] 0.7160542 0.7160542 0.7160542 0.7160542 0.7160542 0.7160542 
```

请注意，您的文本和代码不一致。您声明响应为 (0.1, 3, 0.5, 7) 但定义`y`为`c( 0.1, 3, 0.75, 7)`. 我展示的结果使用了后者，但您的结果使用了前者，因此存在差异。

[*] 在不了解上下文的情况下，我不确定我是否想要拟合数百万个线性模型......

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-10-16T06:23:01.263

首先，让我们重新格式化数据。

编辑：此代码不是最佳代码，请参阅另一个答案中的 Gavins 解决方案。

```
t <- NULL
for( row in 1:nrow( t1 ) ) {
  for( col in 1:ncol( t1 ) ) {
    t <- rbind( t, c( t1[ row, col ], t2[ row, col ], t3[ row, col ], t4[ row, col ] ) )
   }
 } 
```

这将生成一个包含四列（每个表格一个）和`nrow * ncol`行的矩阵 - 与一个表格中的单元格一样多的行。检查它`dim( t )`。运行回归现在很容易：

```
apply( t, 1, function( x ) { summary( lm( y ~ x ) )$r.squared ) 
```

# android - Android Spinner - 自定义背景

> ID：12908556
> 
> 赞同：1
> 
> 时间：2012-10-16T06:12:49.447
> 
> 标签：android, background, custom-controls, spinner

A 在我的 XML 文件中定义了一个微调器，如下所示：

```
<Spinner
    android:id="@+id/spinner1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:background="@drawable/spinnerbackground"
    android:layout_marginLeft="96dp" /> 
```

背景正确加载，但代表所选项目的文本完全左对齐。然而，默认微调器的文本从左侧偏移了一小部分。

有谁知道我可以用来复制偏移项目显示文本效果的代码或 XML？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T06:36:31.730

要根据您的文本样式制作自定义微调器背景，您可以使用我在其中一个项目中使用的代码。

在**string.xml**里面写：

```
 <string-array name="spinner_array_environtment">
        <item>Test</item>
        <item>Production</item>
    </string-array> 
```

在你的**MainActivity.java**里面：

```
public class MainActivity extends Activity {
Spinner spinner_environment;

        @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
                setContentView(R.layout.activity_main);

                spinner_environment = (Spinner) findViewById(R.id.spinnerview);
adapter =ArrayAdapter.createFromResource(this,              R.array.spinner_array_environtment,R.layout.spinner_phone);
            adapter.setDropDownViewResource(android.R.layout.simple_dropdown_item_1line);
            spinner_environment.setAdapter(adapter);
} 
```

在**spinner_phone.xml**里面：

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/spinnerTarget"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:textSize="13dp"
    android:textColor="#4C4646" /> 
```

试试这个。希望它会帮助你。

# java - 石英调度器是如何工作的？

> ID：12908558
> 
> 赞同：12
> 
> 时间：2012-10-16T06:13:03.743
> 
> 标签：java, threadpool, quartz-scheduler

我的问题是：quartz 调度程序是如何工作的，它与实现 Runnable 接口（基本上是一个线程）的普通类有什么不同，后者根据指定的时间间隔唤醒并执行所需的工作？

它只是一种方便的做事方式（使用石英调度程序），例如通过 XML 文件指定作业配置以及向现有调度程序轻松添加新作业，还是还有其他功能？更重要的是，我的意思是它是否进行了任何类型的优化，例如它不会在整个持续时间内挂在线程上并释放它？它是一种轮询机制，其中线程不断轮询系统时间并查看指定的时间间隔是否已过，还是它与系统时钟进行某种注册，时钟本身通知石英调度程序？

请让我知道是否需要对上述问题进一步澄清。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-16T06:59:11.337

发布问题后，我浏览了网络上的一些内容，并发现了一些有用的见解。很抱歉发布一个问题并自己回答，但这对任何可能想理解相同问题的人都有用。

以下是 Quartz 的优点以及它与通常的 Java 计时器接口的比较：

*   Quartz 非常灵活，包含多个可以单独或一起使用的使用范例，以实现您想要的行为，并使您能够以对您的项目最“自然”的方式编写代码。
*   Quartz 非常轻巧，需要很少的设置/配置 - 如果您的需求相对基本，它实际上可以“开箱即用”使用。
*   Quartz 是容错的，并且可以在系统重新启动之间保留（“记住”）您计划的作业。

另一方面，它克服了Timer接口中的以下问题：

*   定时器没有持久化机制。
*   计时器具有不灵活的调度（只能设置开始时间和重复间隔，不能基于日期、时间等）
*   定时器不使用线程池（每个定时器一个线程）
*   计时器没有真正的管理方案——你必须编写自己的机制来记忆、组织和检索任务名称等。

如果有人想在上面添加任何信息，请随时这样做。

# macos - 如何告诉 Apple 我的 Cocoa 应用程序还没有准备好高分辨率？

> ID：12908559
> 
> 赞同：1
> 
> 时间：2012-10-16T06:13:16.217
> 
> 标签：macos, cocoa, retina-display, magnification

Apple 表示**用户**或**OS X**可能会决定以放大模式而不是框架缩放模式启动 Cocoa 应用程序：

> 所有非 Cocoa 应用程序的应用程序都以放大模式运行。但是，如果满足以下条件，Cocoa 应用程序也可以在放大模式下运行：
> 
> *   用户设置选项以低分辨率打开应用程序（见图 1-7）。
>     
>     
> *   众所周知，该应用程序在框架缩放模式下运行时会出现重大问题，因此系统会抛出异常，而是以放大模式运行该应用程序。

（[见链接](http://developer.apple.com/library/mac/documentation/GraphicsAnimation/Conceptual/HighResolutionOSX/Explained/Explained.html#//apple_ref/doc/uid/TP40012302-CH4-SW10 "放大模式适用于尚未准备好高分辨率的应用程序")）

但是**应用程序开发人员**如何将其放大？或者，如何强制 OS X 这样做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T09:51:23.707

您**可以**`NSHighResolutionCapable`在. _**`Info.plist`**

 **在 XCode 中，该属性称为*High Resolution Capable*。**

# mysql - 带有 mysql 数据库的炼油厂 cms

> ID：12908560
> 
> 赞同：1
> 
> 时间：2012-10-16T06:13:17.410
> 
> 标签：mysql, ruby-on-rails-3, refinerycms

我正在运行命令..

```
 $ refinerycms rickrockstar -d=mysql -U=root -P=root 
```

并得到这样的错误..

```
 Access denied for user 'root'@'localhost' (using password: NO). 
 Please provide the root password for your mysql installation 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T06:27:57.080

尝试

```
$refinerycms rickrockstar -d=mysql -U=root -Proot 
```

# ruby-on-rails - 使用 gmaps4rails 将标记添加到中心位置

> ID：12908561
> 
> 赞同：0
> 
> 时间：2012-10-16T06:13:21.450
> 
> 标签：ruby-on-rails, ruby-on-rails-3, gmaps4rails

我有一个应用程序，我在其中显示业务列表，然后显示与该业务相关的各种工作。工作地点工作得很好，但我想为应该在中心的业务添加一个标记，然后我可以对其进行自定义。

这是我的控制器/business_controller

```
def show
  @business = Business.find(params[:id])
  @distance = @business.service_area
  @jobs = Job.near(@business.location, @distance, {:order => :distance, :units => :km})
  @json = @jobs.to_gmaps4rails
  @mapoptions = {
       "map_options" => {"center_latitude" => @business.latitude, 
                         "center_longitude" => @business.longitude,
                         "auto_zoom" => true}
                 }
  respond_to do |format|
    format.html
  end
end 
```

在我看来视图/企业/节目

```
<p><%= gmaps(:map_options => @mapoptions,"markers" => { "data" => @json }) %></p> 
```

如何为营业地点创建标记？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T07:49:24.030

我会说：

```
markers_array = JSON.parse @jobs.to_gmaps4rails
markers_array << {lat: @business.latitude, lng: @business.longitude}
@json = markers_array.to_json 
```

# c# - 为 Web 服务创建磁盘缓存的最佳方法

> ID：12908562
> 
> 赞同：2
> 
> 时间：2012-10-16T06:13:29.140
> 
> 标签：c#, wcf, web-services, caching

我创建了一个提供图像的网络服务。这将永远是单向通信。从服务获取图像的一方永远不会更改图像。

它有多个来源，有些来源可能很远，连接不良。我已经为它创建了一个内存缓存，但我还想有一个磁盘缓存，以便更长时间地存储图像。我有点不确定执行此操作的最佳方法。

首先，我所有的来源都是网络服务器，所以我真的不知道如何检查我想使用的图像的最后修改日期（例如），以查看文件是否已更改。

其次，如何最好地存储本地缓存？只需将文件放在文件夹中并将日期与原始来源进行比较？或者，也许将所有时间戳与所有图像一起存储在一个 txt 文件中，以避免检查文件。或者，也许将它们存储在本地 SQL Express 数据库中？

通常，图像不是很大。大多数约为200kb。但是，时不时会有 7+ mb。最大的问题是，将托管服务的某些位置的连接非常糟糕，并且它们需要多次使用相同的图像。没有真正的性能要求，我只是想让它尽可能地响应，对于与我们的中央服务器有可怕连接的位置。

我无法安装任何“真正的”缓存系统。它必须是我可以在我的代码中处理的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T06:30:42.243

为什么不在服务器上安装代理服务器，并通过它访问所有远程 Web 服务器？代理服务器将为您处理缓存。

编辑：由于您无法安装任何东西并且没有可用的数据库，因此恐怕您无法自己实现磁盘缓存。

好消息是 - 它相对容易。您需要选择一个文件夹并将图像文件放在那里。并且您需要在图像标识和文件名之间进行唯一映射。如果您的图像 ID 是数字，则映射非常简单......

当您收到图像请求时，首先在磁盘上检查它。如果它在那里，你已经拥有它。如果没有，请从远程服务器下载并存储在那里，然后从那里提供服务。

您需要考虑并发请求。确保将文件写入磁盘是一个相对简短的过程（完成下载后即可写入）。当您将文件写入磁盘时，请确保没有人可以打开它进行阅读，这样您就可以避免发送不完整的文件。

现在您只需要处理文件不在缓存中的情况，并且一次收到两个对它的请求。如果性能不是真正的问题，只需下载两次。

# mysql - 如何让mysql从前一行值开始自动递增

> ID：12908563
> 
> 赞同：0
> 
> 时间：2012-10-16T06:13:31.543
> 
> 标签：mysql, row, increment

预先感谢您对此提供的帮助。

这是我的问题：

表 A 有我删除的垃圾邮件帐户。行如下：1、2556、2559、2565、2595 等。

我正在尝试将表 A 导入同一数据库中的空表 B 中。表有不同的字段。

表 B 拒绝导入，因为插入设置为自动递增。Mysql 表 B 似乎不想跳过行。

我去了表 A 并将行更新为：

1, 2, 3,4,5..., 18

现在，当我尝试在表 A 中使用 user_id 值为 NULL 的 PyphAdmin 创建一个用户时，我得到的 id 是 2596。Mysql 仍然记得旧的递增序列。如何让 Mysql 表根据前一行自动递增，以便新 id 为 19 ？

mysql 导入文件在 phpshield 中加密，所以我看不到发生了什么，也无法编辑它。但我认为这是在我排除了所有其他可能性之后发生的事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T06:18:33.283

1.  该字段必须是主键 -`PRIMARY KEY (id)`
2.  该字段必须是 AUTO_INCREMENT
3.  重置表的自动增量值。

例如 -

```
CREATE TABLE table1(
  id INT(11) NOT NULL AUTO_INCREMENT,
  PRIMARY KEY (id)
); 
```

设置新的自动增量值 -

`ALTER TABLE table1 AUTO_INCREMENT = 19`;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T06:20:57.383

尝试这个

ALTER TABLE A AUTO_INCREMENT=19;

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T06:21:20.747

> 更改表`TableA` AUTO_INCREMENT=19；

# ruby-on-rails - 编辑宝石 Ransack？

> ID：12908564
> 
> 赞同：0
> 
> 时间：2012-10-16T06:13:35.867
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rubygems, ruby-on-rails-3.2, ransack

**我如何编辑 gem Ransack ？**

据我所知，步骤是：

1.  解压宝石（完成）
2.  根据需要修改代码（完成）
3.  构建宝石（*有问题*）

    如何构建我修改的 gem ransack ？

    我指的是这个[http://docs.rubygems.org/read/chapter/10#page29](http://docs.rubygems.org/read/chapter/10#page29)

    在 cmd 项目根目录中我输入： gem build ransack.gemspec

    *出现错误：找不到文件 ransack.gemspec*

**请解决...**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T06:19:17.830

如果你在[github](https://github.com/ernie/ransack)上 fork 它，那么你有`ransack.gemspec`文件

# java - 为什么这个数组会给出空指针异常？

> ID：12908565
> 
> 赞同：0
> 
> 时间：2012-10-16T06:13:35.667
> 
> 标签：java, exception, hash

我正在尝试使用哈希表实现字典（不使用 Java 提供的哈希表类，而是从头开始制作）。下面是`find()`我的 Dictionary 类中的方法，用于在插入/删除时检测表中是否存在键。如果键已经在表中，则返回与键关联的分数（表中的元素作为键/分数对插入到每个表位置的 LinkedLists 中）。如果不是，则返回 -1。

我正在运行一个提供的测试程序来确定我的 Dictionary 类是否有效，但是`NullPointerException`在达到某个点时我遇到了。下面包括特定的测试。为什么会出现这个异常？（如果需要，我可以提供更多代码！）

寻找：

```
public int find(String config) {
    for (int i = 0; i < dictSize; i++) {
        if (dict[i] != null) {
            LinkedList<DictEntry> current = dict[i];
            String currentConfig = current.peek().getConfig(); //Dictionary.java:66

            if (currentConfig.equals(config)) {
                int currentScore = current.peek().getScore();
                return currentScore;
            }
        }
    }

    return -1;
} 
```

插入：

```
public int insert(DictEntry pair) throws DictionaryException {
    String entryConfig = pair.getConfig();
    int found = find(entryConfig); //Dictionary.java:27

    if (found != -1) {
        throw new DictionaryException("Pair already in dictionary.");
    }

    int entryPosition = hash(entryConfig);

    if (dict[entryPosition] == null) { //Dictionary.java:35
        LinkedList<DictEntry> list = new LinkedList<DictEntry>();
        dict[entryPosition] = list;
        list.add(pair);
        return 0;
    } else {
        LinkedList<DictEntry> list = dict[entryPosition];
        list.addLast(pair);
        return 1;
    }
} 
```

考试：

```
 // Test 7: insert 10000 different values into the Dictionary
        // NOTE: Dictionary is of size 9901
    try {
        for (int i = 0; i < 10000; ++i) {
            s = (new Integer(i)).toString();
            for (int j = 0; j < 5; ++j) s += s;
            collisions += dict.insert(new DictEntry(s,i)); //TestDict.java:69
        }
        System.out.println("   Test 7 succeeded");
    } catch (DictionaryException e) {
        System.out.println("***Test 7 failed");
    } 
```

异常堆栈跟踪：

```
Exception in thread "main" java.lang.NullPointerException
    at Dictionary.find(Dictionary.java:66)
    at Dictionary.insert(Dictionary.java:27)
    at TestDict.main(TestDict.java:69) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T06:17:30.403

peek() 返回 null 这就是原因。您可以在 getConfig() 调用之前进行无效性检查。

# php - 在页面刷新之前无法访问 codeigniter 会话变量

> ID：12908580
> 
> 赞同：0
> 
> 时间：2012-10-16T06:14:35.163
> 
> 标签：php, codeigniter, session

我正在使用 codeigniter 来建立一个电子商务网站。我在控制器上有一个方法，用户在结帐前输入他们的交付信息，该方法保存交付信息并创建一个名为“orderid”的新会话变量，它的值是 orderid 的值。设置会话变量后，该方法重定向到结帐控制器，我从会话中检索“orderid”以从数据库中检索订单，以便用户在付款前确认信息。

问题是，当用户被重定向到结帐页面时，他们看不到他们的交付数据。什么时候做

```
echo $this->session->userdata('orderid'); 
```

我可以看到值但是当我将它传递给我应该返回数据数组的方法时

```
$order = $this->orders->get_order($this->session->userdata('orderid'));
print_r($order); 
```

我得到一个空数组`array()`

刷新结帐页面时，它的行为正确。可能是什么问题呢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T06:22:21.293

为了使会话正常工作，您必须添加`$this->load->library('session');`到您的`__contruct()`功能

```
public function __construct() {
parent::__contruct();
$this->load->library('session');
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-17T13:28:33.020

您不能像这样访问会话值

```
$order = $this->orders->get_order($this->session->userdata('orderid')); 
```

您可以使用以下方法，它会为您正常工作

```
$orderid=$this->session->userdata('orderid');
$order = $this->orders->get_order($orderid); 
```

***请记住在构造函数或此函数中加载会话库*

```
$this->load->library('session'); 
```

# ios - 禁用 MagicalRecord 错误消息和警告

> ID：12908584
> 
> 赞同：12
> 
> 时间：2012-10-16T06:14:46.213
> 
> 标签：ios, core-data, magicalrecord

我刚开始使用 MagicalRecord，这可能是一个愚蠢的问题，但这真的很困扰我......我正在使用带有 sqlite 的 MagicalRecord，当我启动 MagicalRecord 时，我使用了

```
[MagicalRecord setupCoreDataStackWithStoreNamed:@"OrderSystem.sqlite"]; 
```

它产生了以下消息：

> 2012-10-16 16:54:48.966 OrderSystem[4135:c07] +NSManagedObjectContext(MagicalRecord) MR_contextWithStoreCoordinator：-> 创建：上下文*** 主线程 ***

当我尝试使用后台线程使用以下代码存储我的实体时：

```
[MagicalRecord saveInBackgroundWithBlock:^(NSManagedObjectContext *localContext){        
    Menu *localMenu = [menu inContext:localContext];        
    localMenu.name = menu.name;
    localMenu.menuid = menu.menuid ;        
}]; 
```

我收到以下错误消息：

> 2012-10-16 17:05:20.118 OrderSystem[4523:4603] +MagicalRecord(ErrorHandling) defaultErrorHandler: 错误信息: 操作无法完成。（可可错误 133000。）
> 
> 2012-10-16 17:05:20.118 OrderSystem[4523:4603] +MagicalRecord(ErrorHandling) defaultErrorHandler: 错误域: NSCocoaErrorDomain
> 
> 2012-10-16 17:05:20.119 OrderSystem[4523:4603] +MagicalRecord(ErrorHandling) defaultErrorHandler: Recovery Suggestion: (null)
> 
> 2012-10-16 17:05:20.119 OrderSystem[4523:4603] -NSManagedObjectContext(MagicalSaves) MR_saveWithErrorCallback: 上下文没有变化：上下文 - 不保存
> 
> 2012-10-16 17:05:20.120 OrderSystem[4523:c07] -NSManagedObjectContext(MagicalSaves) MR_saveWithErrorCallback: -> Saving : *** DEFAULT****语境*****主线 ******
> 
>  ***2012-10-16 17:05:20.121 OrderSystem [4523:c07] -NSManagedObjectContext(MagicalRecord) contextWillSave: 上下文: *** 默认****语境*****主线程 ***即将保存。为新插入的 1 个对象获取永久 ID***
> 
>  ***2012-10-16 17:05:20.142 OrderSystem[4523:1303] -NSManagedObjectContext(MagicalSaves) MR_saveWithErrorCallback: -> 保存: *** 背景保存 ***上下文
> 
> 2012-10-16 17:05:20.142 OrderSystem[4523:1303] -NSManagedObjectContext(MagicalRecord) contextWillSave: 上下文: *** 背景保存 ***上下文即将保存。为新插入的 1 个对象获取永久 ID******

 ******当我使用 findAll 检查存储的数据实体时，它似乎确实存储在数据库中。如果我完全关闭应用程序并重新启动应用程序，实体仍然存在（这表明实体已永久存储，而不仅仅是在内存中）。所以看起来一切正常，但知道这些错误消息是什么吗？有什么办法可以关闭它们吗？或解决它们？因为它阻止了我的其他 NSLog ......

谢谢

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-12-11T23:59:14.373

找到了。`#define MR_ENABLE_ACTIVE_RECORD_LOGGING 0`在您的 Prefix.pch 文件之前添加`#import "CoreData+MagicalRecord.h"`

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2014-06-30T08:18:54.220

如果您使用 pod 将预处理器宏 MR_ENABLE_ACTIVE_RECORD_LOGGING=0 添加到这样的神奇记录项目中： ![在此处输入图像描述](../Images/438e730a48aea3759932e99945d4056d.png)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-01-11T14:30:44.820

**迅速**

```
MagicalRecord.setLoggingLevel(MagicalRecordLoggingLevel.Off) 
```

**对象**

```
[MagicalRecord setLoggingLevel:MagicalRecordLogLevelOff]; 
```

*当应用程序didFinishLaunchingWithOptions*时将其放入您的 AppDelegate

 ** * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-16T06:47:52.210

看起来您仍有错误需要修复。我建议不要在开发过程中忽略这些...*******

# php - 会话 & PHP & Joomla & 代码优化

> ID：12908588
> 
> 赞同：0
> 
> 时间：2012-10-16T06:15:20.137
> 
> 标签：php, session, joomla, joomla2.5

我正在使用 Joomla 2.5。

第一种方法

```
JFactory::getSession()->set('mymessage', 'here is some message text'); 
```

第二种方法

```
$session = JFactory::getSession();
$session->set('mymessage', 'here is some message text'); 
```

我在构造函数中使用了上述方法（1 或 2）。所以我想优化 PHP 代码，因为它会在执行过程中被多次调用。我想知道的是哪种方法有效且高效？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T06:19:21.217

对每种方法（1 和 2）循环 10 次，每次循环 10 000 次，并用微时间对它们进行计时并计算平均值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T06:24:31.543

首先是 un_named 会话变量调用，这将避免`$session`需要和初始化，除了一切都是一样的。因此首先可能对空间有一定的效率，也可能在时间上。

# javascript - 在 Javascript 中动画 windows.scrollby

> ID：12908589
> 
> 赞同：5
> 
> 时间：2012-10-16T06:15:24.133
> 
> 标签：javascript, jquery, html, jquery-animate

所以我像这样使用window.scrollby

```
<script> 
function scrollWindowup()   {  
 window.scrollBy(0,700)   
 }  
 function scrollWindowdown()   { 
 window.scrollBy(0,-700)   }
 </script> 
```

有什么方法可以像移动缓慢或偏移或任何其他选项一样对其进行动画处理？

提前致谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-16T06:19:22.607

从一个类似的问题...

`scrolltop`您可以使用为页面设置动画`jQuery`。

```
$('html, body').animate({
    scrollTop: $(".middle").offset().top
 }, 2000); 
```

或者

```
$('html, body').animate({
    scrollTop: 700
 }, 2000); 
```

向下动画页面：

```
$('html, body').animate({
    scrollTop: '+=700'
 }, 2000); 
```

动画页面：

```
$('html, body').animate({
    scrollTop: '-=700'
 }, 2000); 
```

看到这个网站： http: [//papermashup.com/jquery-page-scrolling/](http://papermashup.com/jquery-page-scrolling/)

# ruby-on-rails - aws-sdk 用于存储桶中的 Ruby 访问文件夹

> ID：12908599
> 
> 赞同：11
> 
> 时间：2012-10-16T06:16:50.233
> 
> 标签：ruby-on-rails, ruby, amazon-s3

我在 Amazon S3 上有一个存储桶，里面有文件夹。**我正在尝试通过aws-sdk** gem通过以下方式访问它：

```
s3 = AWS::S3.new(
    :access_key_id => "KEY",
    :secret_access_key => "SECRET"
)

bucket = s3.buckets["my_bucket/my_folder"]
bucket.do_stuff.... 
```

我收到以下错误作为回报：

*您尝试访问的存储桶必须使用指定的端点进行寻址。请将所有未来的请求发送到此端点。*

有什么想法我可能做错了吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-16T06:23:10.147

可能尝试使用的 S3 存储桶位于 US-EAST 之外（默认位置），因此这应该可以帮助您：

```
s3 = AWS::S3.new(
    :access_key_id => "KEY",
    :secret_access_key => "SECRET"
    :s3_endpoint => 's3-eu-west-1.amazonaws.com'
) 
```

[从以下列表中](http://docs.amazonwebservices.com/general/latest/gr/rande.html#s3_region)选择您的 S3 端点：

```
US Standard *                           s3.amazonaws.com(default)
US West (Oregon) Region                 s3-us-west-2.amazonaws.com
US West (Northern California) Region    s3-us-west-1.amazonaws.com
EU (Ireland) Region                     s3-eu-west-1.amazonaws.com
Asia Pacific (Singapore) Region         s3-ap-southeast-1.amazonaws.com
Asia Pacific (Tokyo) Region             s3-ap-northeast-1.amazonaws.com
South America (Sao Paulo) Region        s3-sa-east-1.amazonaws.com 
```

在对象访问方面，存储桶名称为**my_bucket**，但**my_folder**应该是对象的一部分。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-19T04:15:58.983

您需要为存储桶（创建它的位置）配置特定于区域的端点。你可以这样做：

```
AWS.config(:s3_endpoint => '...')
s3 = AWS::S3.new 
```

或者

```
s3 = AWS::S3.new(:s3_endpoint => '...') 
```

您可以通过使用与 DNS 兼容的存储桶名称（也避免存储桶名称中的点）来避免这种情况。如果存储桶名称是有效的子域，则您可以在不配置区域特定终端节点的情况下寻址您的存储桶。考虑以下：

```
http:://bucket-name.s3.amazonaws.com/path/to/object.txt 
```

其中存储桶名为“bucket-name”，对象键为“path/to/object.txt”。此存储桶可以存在于任何区域，但您可以使用“默认”区域访问它。当存储桶名称不兼容 dns 时，url 如下所示：

```
http://s3.amazon.com/bucket/name/path/to/object.txt 
```

在上面的示例中，存储桶是“bucket/name”，它不兼容 dns。它成为路径的一部分，现在 s3.amazon.com 必须替换为区域特定的端点（如果存储桶不是在经典区域中创建的）。

正如其他人提到的，路径应该是对象键的一部分，而不是存储桶名称。这允许您按公共前缀对对象进行分组。'/' 用作虚拟文件夹（仅按约定）。

```
# print the key of every object with the given prefix
s3.buckets['bucket-name'].objects.with_prefix('path/to/').each do |object|
  puts object.key
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-12T09:36:06.580

```
has_attached_file :photo,
  storage: :s3,
  styles: { medium: "300x300>", thumb: "100x100>" },
  s3_credentials: "#{Rails.root}/config/aws.yml",
  bucket: "bucket-name",
  s3_host_name: "s3-ap-southeast-1.amazonaws.com",
  url: ":s3_domain_url",
  path: 'books/:id/photo/:style_:basename.:extension' 
```

为我工作:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-11-10T22:39:59.500

Godsaur的回答基本上是正确的。但是，它似乎已经过时了，也许对于 SDK 版本 1？

这对我来说适用于版本 2：

```
s3 = Aws::S3::Client.new(endpoint:'https://s3-ap-southeast-1.amazonaws.com') 
```

请参阅[文档](http://docs.aws.amazon.com/sdkforruby/api/Aws/S3/Client.html#initialize-instance_method.)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-03-04T18:19:04.163

如果有人正在寻找这个，这里是它应该如何根据[https://github.com/aws/aws-sdk-ruby](https://github.com/aws/aws-sdk-ruby)

```
creds = JSON.load(File.read('secrets.json'))
Aws.config[:credentials] = Aws::Credentials.new(creds['AccessKeyId'], creds['SecretAccessKey'])
Aws.config[:region] = 'us-east-1'

client = Aws::S3::Client.new(
    region: Aws.config[:region],
    credentials: Aws.config[:credentials]
)

File.open('/local_directory/picture.jpg', 'rb') do |file|
  client.put_object(bucket: 'bucket', key: 'folder_inside_bucket/picture.jpg', body: file)
end 
```

# javascript - 图片超链接位置

> ID：12908601
> 
> 赞同：2
> 
> 时间：2012-10-16T06:17:07.740
> 
> 标签：javascript, html

我不确定这是否可能。

有没有办法在图像的特定坐标上放置超链接？

前任

```
_____________________________________
|                                   |
|   xxx                             |
|   xxx                             |
|                                   |
|                                   |
|                                   |
|                    zzz            |
|                    zzz            |
|                                   |
|___________________________________| 
```

有没有办法在 xxx 位置设置超链接，在图像的 zzz 位置设置单独的超链接。我将如何开始这个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T06:21:12.610

```
<img src="planets.gif" width="145" height="126" alt="Planets"
usemap="#planetmap">

<map name="planetmap">
<area shape="rect" coords="0,0,82,126" href="sun.htm" alt="Sun">
<area shape="circle" coords="90,58,3" href="mercur.htm" alt="Mercury">
<area shape="circle" coords="124,58,8" href="venus.htm" alt="Venus">
</map> 
```

有关 HTML coords 属性的更多信息 [http://www.w3schools.com/tags/att_area_coords.asp](http://www.w3schools.com/tags/att_area_coords.asp)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T06:21:03.400

是的，它可以用[`<map>`](https://developer.mozilla.org/en-US/docs/HTML/Element/map)

```
<map name="a">
  <area shape="rect" coords="25,25,75,75" href='url'>
</map>
<img usemap="#a" src=image.png> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-16T06:35:01.330

有很多方法可以解决这个问题。其他人已经提到使用 MAP，但听起来您可能意味着您想在图像上放置文本链接，而不仅仅是创建可点击区域。假设您想将链接定位在像素级别，一种方法如下所示：

```
<div id="myimagediv">
    <a id="linkxxx" href="xxx.example.com">xxx</a>
    <a id="linkzzz" href="zzz.example.com">zzz</a>
</div>

#myimagediv {
width: 150px;
    height: 100px;
    position: relative;
    background-image: url('myimage.jpg');
}
#myimagediv a {
    position: absolute;
}
#linkxxx {
    top: 10px;
    left: 10px;
}
#linkzzz {
    top: 70px;
    left: 70px;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T06:23:00.830

这可以通过称为“图像映射”的过程来完成。这可能非常乏味，因为您必须逐个像素地映射它。互联网上有一些工具可以为您绘制图像。

# java - 如何避免获取 java.lang.ArrayIndexOutOfBoundsException

> ID：12908606
> 
> 赞同：-1
> 
> 时间：2012-10-16T06:17:27.107
> 
> 标签：java

我正在尝试编写一个通过写入文本文件来模拟数据库的程序。我可以读取一个包含要使用的数据的文本文件，然后将其转换为字节数组以存储到另一个文本文件中。我遇到的问题是，当我从字符串转换为字节数组时，我不断收到 java.lang.ArrayIndexOutOfBoundsException：8。我将值硬编码到我的 for 循环中，因此它不应该是无效的索引数组，但似乎没有什么可以解决问题。这是我显示错误的函数：

```
public void writeBucket(int bucket, String importFile, String[][] allrecords)
{

  theDisk = new FakeDisk();

  for(int z = 0; z < bucket; z++)
  {

    try
     {

      for(int j = 0; j < 7; z++)//for(int j = 0; j < allrecords[z].length; z++)
      {

        if(allrecords[z][j] == null) //this is the line where the error shows up
        {
          continue;
        }

        theDisk.writeSector(z, allrecords[z][j].getBytes());
      }
     }
     catch(Exception e)
     {
         //System.out.println(e.getMessage());//this prints the number 8 when not commented out
       continue;
     }

  }

  try
  {

    FileWriter fwrite = new FileWriter(importFile);

    fwrite.write("\n\n\n\n");
    fwrite.close();

  }
  catch (Exception e)
  {
    System.err.println("Error: " + e.getMessage());
  }

} 
```

我将循环放在 try/catch 中，认为它至少仍会将字节输出到我的文本文件，然后一旦遇到无效索引就不再向文件添加任何内容，但事实并非如此。我主要无法弄清楚为什么我不断收到此错误。我可以毫无问题地打印出数组，如果我不尝试将其写入文本文件，一切都会显示出来。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T06:20:37.413

这就是问题：

```
for(int j = 0; j < 7; z++) 
```

查看循环初始化和循环条件，两者都使用`j`- 然后查看*增量*，它正在改变 的值`z`。

即使是注释掉的版本仍然被破坏，因为它仍在递增`z`。

事实上，`j`据我所知，你根本不需要。您可以将内部循环更改为：

```
for (String text : allrecords[z])
{
    if (text == null)
    {
        continue;
    }
    theDisk.writeSector(z, text.getBytes());
} 
```

但是，我*强烈*建议您一开始就不要在`getBytes()`没有编码的情况下打电话。如果您*真的*想要默认平台编码，请明确指定。如果您想要一些其他编码，例如 UTF-8，请指定它。如果你不知道你想要什么编码，你需要退后一步，仔细考虑你的数据。

`writeSector`（您每次调用的值都相同，这也有点奇怪`z`……这不会覆盖数据吗？）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T06:19:45.290

你有答案，你可以使用注释循环（而不是`z++`, 使用`j++`）：

```
for(int j = 0; j < 7; z++)  //for(int j = 0; j < allrecords[z].length; j++) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T06:21:33.570

在内循环中，应该是 j++，而不是 z++：

```
for(int j = 0; j < 7; j++) 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-16T06:22:10.233

试试这个，这样你就不会得到`ArrayIndexOutOfBoundException`. 如果是`2d` 数组，.length 将给出第一个索引的长度。并将`allrecords[z].length`给出第二个索引的长度。

```
for(int z = 0; z < allrecords.length; z++)

for(int j = 0; j < allrecords[z].length; z++) 
```

# ruby-on-rails - 使用omniauth的google open_id连接失败

> ID：12908608
> 
> 赞同：4
> 
> 时间：2012-10-16T06:17:33.087
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, openid, ruby-1.9

我正在尝试向我的应用程序添加 open-id 功能，我正在使用omniauth 和omniauth-openid gems。

我已经完成了安装步骤，将它作为中间件添加到初始化程序中，

```
require 'omniauth-openid'
require 'openid/store/filesystem'

Rails.application.config.middleware.use OmniAuth::Builder do 
  provider :open_id, :store => OpenID::Store::Filesystem.new('/tmp')
end 
```

和一个andling回调的路由

```
match '/auth/:provider/callback' => 'callback#myauthentication' 
```

当我尝试点击这个网址时，连接到**谷歌提供商**

```
http://[mydomain]/auth/open_id?openid_url=https%3A%2F%2Fwww.google.com%2Faccounts%2Fo8%2Fid 
```

我每次都收到连接失败错误

**对于雅虎** http://[mydomain]/auth/open_id?openid_url=http%3A%2F%2Fme.yahoo.com%2F

此外，如果我尝试使用 yahoo open id ，即使在正确验证后我也会收到 invalid_credentials 错误更新 1：我正在使用 apache Web 服务器和 Thin/webrick 应用程序服务器。我验证了如果我不在 apache Web 服务器后面并直接作为 localhost:3000 运行，它可以正常工作。为什么omniauth的行为不同

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-26T13:16:06.933

试试这个 gem [https://github.com/zquestz/omniauth-google-oauth2](https://github.com/zquestz/omniauth-google-oauth2)，我用它取得了很好的效果。

# forms - Vaadin 表单绑定异常

> ID：12908610
> 
> 赞同：0
> 
> 时间：2012-10-16T06:17:43.120
> 
> 标签：forms, exception, data-binding, vaadin

将包含整数属性的 bean 绑定到表单时，当显示表单时，该字段的值为 0，这是正常的，因为这是整数默认值。但是当我删除该字段的 0 并将焦点放在下一个表单字段（setImmediate = true）上时，我得到了一个令人讨厌的异常：

```
com.vaadin.data.Property$ConversionException: java.lang.reflect.InvocationTargetException
    at com.vaadin.data.util.MethodProperty.convertValue(MethodProperty.java:695)
    at com.vaadin.data.util.MethodProperty.setValue(MethodProperty.java:664)
    at com.vaadin.ui.AbstractField.setValue(AbstractField.java:495)
    at com.vaadin.ui.AbstractTextField.changeVariables(AbstractTextField.java:242)
    at com.vaadin.terminal.gwt.server.AbstractCommunicationManager.changeVariables(AbstractCommunicationManager.java:1460)
    at com.vaadin.terminal.gwt.server.AbstractCommunicationManager.handleVariableBurst(AbstractCommunicationManager.java:1404)
    at com.vaadin.terminal.gwt.server.AbstractCommunicationManager.handleVariables(AbstractCommunicationManager.java:1329)
    at com.vaadin.terminal.gwt.server.AbstractCommunicationManager.doHandleUidlRequest(AbstractCommunicationManager.java:761)
    at com.vaadin.terminal.gwt.server.CommunicationManager.handleUidlRequest(CommunicationManager.java:318)
    at com.vaadin.terminal.gwt.server.AbstractApplicationServlet.service(AbstractApplicationServlet.java:501)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:291)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    at java.lang.Thread.run(Unknown Source)
Caused by: java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
    at java.lang.reflect.Constructor.newInstance(Unknown Source)
    at com.vaadin.data.util.MethodProperty.convertValue(MethodProperty.java:692)
    ... 22 more
Caused by: java.lang.NumberFormatException: For input string: ""
    at java.lang.NumberFormatException.forInputString(Unknown Source)
    at java.lang.Integer.parseInt(Unknown Source)
    at java.lang.Integer.<init>(Unknown Source)
    ... 27 more 
```

当然，我可以通过将字段设置为必填来避免这种情况，但这不是我想要的。我对 Vaadin 很陌生，所以我错过了什么吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T06:55:23.077

也许使用整数包装器和 textField.setNullRepresentation(""); 会有所帮助

# function - 如何检查 powershell 脚本中的函数依赖关系。避免多次运行同一个函数

> ID：12908613
> 
> 赞同：0
> 
> 时间：2012-10-16T06:18:03.207
> 
> 标签：function, powershell

在我的 PowerShell 脚本中 - 一个函数的输出是另一个函数的输入。
例如：除非函数 ParseXml($x) 运行，否则函数 CreateReport($x) 无法运行。如果用户在运行第一个函数之前直接运行第二个函数怎么办。
如何检查第一个函数是否已经运行以继续第二个函数，即首先运行第一个函数（生成 txt 文件）然后运行第二个函数？如果第一个 func 已经运行，则不要重新运行它。
例如：假设我有一个 TestFunc.ps1 文件，它有如下两个函数

```
$X = "C:\XmlPath\file1.xml"
Function ParseXml($X)
{
#Read xml and output contents in a txt file    
}

#This function should execute only after the function Parsexml($X) and if Pasrsexml() has run before and generated the output, it shouldnot be allowed to re-run here
Function CreateReport($T) 
{
#from the txtfile Create csv
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T08:51:43.953

根据这个和你的其他问题[如何将参数化函数别名为powershell脚本中的标志？](https://stackoverflow.com/questions/12895099/how-to-alias-a-parameterized-function-as-a-flag-in-powershell-script)您正在尝试实现所谓的构建脚本。与其发明轮子（实现任务依赖，观察任务运行一次等），不如看看一些已经实现的工具，比如[psake](https://github.com/psake/psake)或[Invoke-Build](https://github.com/nightroman/Invoke-Build)。它们是为 PowerShell 设计的，它们完全符合您的要求（运行指定的任务集、维护任务依赖项、运行一次任务等）。当然，这些工具需要一点学习，但从长远来看，它们是值得学习的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T07:18:26.890

如果`ParseXml`函数输出一个文件，您可以在函数中使用cmdlet`CreateReport`测试该文件是否存在：`Test-Path`

如果存在则继续使用`CreateReport`函数，否则在继续之前调用该`ParseXml`函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T06:45:15.093

使用旗帜。在函数中设置标志并在`ParseXml`函数中检查它`CreateReport`。如果未设置标志，则打印错误并退出，否则运行报告代码。请记住在该过程完成后清除标志。

您可以使用标志变量。对于更持久的标志，请考虑使用标志文件或在数据库中设置标志。

# iphone - 使用 Storyboard 将 iPad 应用程序转换为 iPhone 应用程序

> ID：12908614
> 
> 赞同：1
> 
> 时间：2012-10-16T06:18:09.060
> 
> 标签：iphone, ios, ipad, storyboard

我有一个使用情节提要为 iPad 创建的视图。

现在，我想将其转换为 iPhone 应用程序。

我对故事板很陌生。到目前为止，我一直在使用单独的 XIB 文件。

你能向我解释一下这样做的步骤吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T06:26:44.570

您想要做的很重要，如果您希望您的应用程序只在 iphone 和 ipad 上运行，您可以转到项目摘要，然后在设备中选择“通用”选项。这只会在 iphone 和 ipad 中运行您的应用程序（全屏而不是 2x）。但是，如果您想看起来更好，那么您必须相应地管理您的 UI 资产。

# android - Android PhoneGap 中的 Google+ 集成

> ID：12908616
> 
> 赞同：2
> 
> 时间：2012-10-16T06:18:18.000
> 
> 标签：android, cordova, google-plus

我试图将 Google+ 集成到我的手机 Gap 应用程序中，例如 twitter 和 facebook。但是，我还没有找到任何示例和教程。如果有人知道这一点，请建议我，如何在 android Phone Gap 中做到这一点。

提前致谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T22:21:53.903

您应该能够创建一个 PhoneGap 插件，它封装了 Google Play 服务中的 Google+ API。

有关 Google Play 服务中的 Google+ API 的更多信息，请访问： [https ://developers.google.com/+/mobile/android/](https://developers.google.com/+/mobile/android/)

# excel - 退出“While”循环后，我的 VBA 代码意外中止。为什么？

> ID：12908621
> 
> 赞同：1
> 
> 时间：2012-10-16T06:18:37.707
> 
> 标签：excel, vba

我是 VBA 编码的新手。我已经用 Javascript 和 C++ 进行了一些编码，所以我理解这些概念。不过，我对 VBA 的细节不太熟悉。此特定代码适用于 Excel 2007。排序功能是从其他地方作为伪代码复制的（文档不是我的）。我已将其重写为 VBA（未成功）。

此代码无法正常工作。代码突然完全中止（不仅仅是跳出循环或函数，而是在经过两次 While 循环后完全退出。

要重现该问题，请将此代码保存为 Excel 工作表的宏，在 B5 中键入数字 9853，在 B6 中键入“=Kaprekar(B5)”。本质上，运行 Kaprekar(9853)。

有人可以帮我弄清楚我在这里做错了什么吗？谢谢。

顺便说一句，我现在正在使用 While-Wend。我也尝试了 Do While-Loop，结果相同。

这是代码：

```
Function Sort(A)
    limit = UBound(A)
    For i = 1 To limit
        ' A[ i ] is added in the sorted sequence A[0, .. i-1]
        ' save A[i] to make a hole at index iHole
        Item = A(i)
        iHole = i
        ' keep moving the hole to next smaller index until A[iHole - 1] is <= item
        While ((iHole > 0) And (A(iHole - 1) > Item))
            ' move hole to next smaller index
            A(iHole) = A(iHole - 1)
            iHole = iHole - 1
        Wend
        ' put item in the hole
        A(iHole) = Item
    Next i
    Sort = A
End Function

Function Kaprekar%(Original%)

    Dim Ord(0 To 3) As Integer

    Ord(0) = Original \ 1000
    Ord(1) = (Original - (Ord(0) * 1000)) \ 100
    Ord(2) = (Original - (Ord(1) * 100) - (Ord(0) * 1000)) \ 10
    Ord(3) = (Original - (Ord(2) * 10) - (Ord(1) * 100) - (Ord(0) * 1000))

    If (Ord(0) = Ord(1)) * (Ord(1) = Ord(2)) * (Ord(2) = Ord(3)) * (Ord(3) = Ord(0)) = 1 Then
        Kaprekar = -1
        Exit Function
    End If

    Arr = Sort(Ord)

    Kaprekar = Ord(3)
End Function 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T14:39:55.673

excel 评估`while`语句中的两个项目，所以

```
While ((ihole > 0) And (A(ihole - 1) > item)) 
```

当 ihole=0 时，第一次测试返回 false，第二次测试越界，用**#Value**错误轰炸函数。

快速冒泡排序是这样的：

```
Option Explicit
Function Sort(A)
Dim iLoop As Long
Dim jLoop As Long
Dim Last As Long
Dim Temp

Last = UBound(A)

For iLoop = 0 To Last - 1
    For jLoop = iLoop + 1 To Last
        If A(iLoop) > A(jLoop) Then
            Temp = A(jLoop)
            A(jLoop) = A(iLoop)
            A(iLoop) = Temp
        End If
    Next jLoop
Next iLoop
Sort = A
End Function 
```

# python - 使用正则表达式从html中提取facebook页面

> ID：12908625
> 
> 赞同：0
> 
> 时间：2012-10-16T06:18:50.793
> 
> 标签：python, html, regex

我正在尝试使用 html 上的正则表达式搜索来获取网站的 facebook 页面的地址

通常链接显示为 `<a href="http://www.facebook.com/googlechrome">Facebook</a>`

但有时地址会是`http://www.facebook.com/some.other`

有时还有数字

目前我拥有的正则表达式是

```
'(facebook.com)\S\w+' 
```

但它不会抓住最后两种可能性

当我希望正则表达式搜索但不获取它时，它叫什么？（例如，我希望正则表达式匹配 www.facbook.com 部分，但结果中没有该部分，只有它之后的部分

注意我使用 python 和 re 和 urllib2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T07:49:21.893

在我看来，您的主要问题是您对正则表达式的了解不够。

```
fb_re = re.compile(r'www.facebook.com([^"]+)') 
```

然后简单地说：

```
results = fb_re.findall(url) 
```

为什么这样有效：

在常规表达式中，括号中的部分`()`是捕获的内容，您将 www.facebook.com 部分放在括号中，因此它没有得到任何其他内容。

在这里，我使用一个字符集`[]`来匹配其中的任何内容，我使用`^`运算符来否定它，这意味着任何不在集合中的内容，然后我给它一个`"`字符，所以它将匹配 www.facebook.com 之后的任何内容，直到它到达 a`"`然后停止。

注意 - 这会捕获嵌入的 facebook 链接，如果 facebook 链接只是在纯文本页面上，您可以使用：

```
fb_re = re.compile(r'www.facebook.com(\S+)') 
```

这意味着抓取任何非空白字符，因此一旦用完空白字符就会停止。

如果您担心链接以句点结尾，您可以简单地添加：

```
fb_re = re.compile(r'www.facebook.com(\S+)\.\s') 
```

它告诉它搜索上面相同的内容，但是当它到达句子的末尾时停止，`.`然后是任何空格，如空格或输入。这样它仍然会抓取链接，`/some.other`但是当你有类似的东西时，`/some.other.`它会删除最后一个`.`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T06:34:11.787

如果我假设正确，则 url 总是用双引号引起来。对？

```
re.findall(r'"http://www.facebook.com(.+?)"',url) 
```

总体而言，尝试使用正则表达式解析 html 是一个坏主意。我建议您使用 html 解析器`lxml.html`来查找链接，然后使用`urlparse`

```
>>> from urlparse import urlparse # in 3.x use from urllib.parse import urlparse
>>> url = 'http://www.facebook.com/some.other'
>>> parse_object = urlparse(url)
>>> parse_object.netloc
'facebook.com'
>>> parse_object.path
'/some.other' 
```

# php - 服务器无法通过 URL 重定向捕获从另一台服务器发送的 POST 数据

> ID：12908626
> 
> 赞同：4
> 
> 时间：2012-10-16T06:18:59.983
> 
> 标签：php, post

最近我开始为我的网站处理支付网关（进一步拼写为“ **PG** ”）流程。该过程包括通过重定向到他们的页面以表单将**Post 数据发送到****PG**服务器，并通过将 URL 重定向到我们的服务器页面发送的**POST 数据从****PG**接收关于 Transaction的响应。

 **问题出现在这里，因为我的服务器无法检索从**PG**服务器发送的 POST 数据。

当我在 PHP 中编码时，我尝试使用**PG**打印所有响应，`print_r($_POST);`甚至尝试使用`print_r($_REQUEST);`. `PHPSESSID`除了和其他一些数据数组外，我没有找到任何数据打印。

至于确认，我检查了他们是否使用称为“ **TamperIE** ”的 IE 插件发送数据。它显示所有发送到其服务器的 POST 数据。但它根本不会出现在我们的服务器上。我在另一台服务器上尝试了这个过程：在那里我能够获得 POST 响应，但不能使用当前工作的服务器。

你能建议可能是什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T10:57:57.540

如果可能的话，在 PG 请求中发送您的销售/采购订单的唯一代码（订单 ID），我相信您的 PG 会在 POST 数据中发回该唯一代码，并且借助该唯一代码，您可以跟踪该订单 ID更新订单状态。

通过使用这种方法，您无需担心会话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T12:22:22.200

使用 curl 模拟来自其他服务器的请求，制作一个包含以下内容的 test.php：

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, "http://www.example.com/path/to/form");
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_VERBOSE, true);
$data = array(
    'foo' => 'foo foo foo',
    'bar' => 'bar bar bar',
    'baz' => 'baz baz baz'
);

curl_setopt($ch, CURLOPT_POSTFIELDS, $data);
$output = curl_exec($ch);

curl_close($ch); 
```

并使用 cli 运行它以获取调试信息并查看问题所在。不要忘记将应该从服务器返回的变量和确切的 url

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T12:21:11.057

为此使用 CURl，它安全可靠。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T07:43:59.587

我找到了发生此问题的原因。

在*.htaccess*文件中，我为重定向写了一行：

```
RewriteRule ^ http://mysite.com{REQUEST_URI} [R=301,L] 
```

如果我从文件中删除上述行，我可以从*PG*服务器接收 POST 字段，但是我丢失了在继续进行*PG*之前存储*的 SESSION DATA*包含预订信息。这些会话无法显示在响应页面中，因为服务器会从响应页面生成全新的会话。

 *我找到了解决此问题的另一种解决方案：

我在所有需要会话的页面中使用以下代码：

```
$lifetime=60*30;
session_set_cookie_params ( $lifetime , '/', '.mysite.com'); 
```

在添加上述代码之后`session_start();`。

现在我既可以从*PG*获取 POST 数据，也可以*保留 SESSION Values*。

但是，我认为这不是这个问题的理想解决方案。如果有人可以为 URL 重定向建议任何 SERVER 配置并在 REDIRECTION 之后维护 SESSION 值，那就太好了。谢谢你们 ：-）***

# java - 如何在应用程序级别缓存复杂的java对象

> ID：12908634
> 
> 赞同：1
> 
> 时间：2012-10-16T06:19:32.817
> 
> 标签：java, hibernate, caching

我正在寻找一种在应用程序级别缓存复杂对象的解决方案。

例如，我想将一些数据集从数据库加载到内存，并使我的应用程序服务在加载到内存的对象之上工作。我考虑过这个是为了提高性能。

但我想知道如何将对象的关系保存在缓存中。

例如，

如果一个类别有很多项目，那么存储关系的最佳方法是什么。我的想法是分别存储类别和项目并将关系存储在其他地方。这是因为我使用休眠并且关联被配置为延迟加载。

请分享您的想法来解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T07:37:22.840

您确定需要在应用程序级别实现自定义缓存吗？

Hibernate 有一级和二级缓存，对你来说还不够吗？考虑一下您将使用多少内存来将所有休眠对象存储在您自己的手写缓存中。如果它也可以读写，那么该决定的同谋会给你带来更多的问题而不是好处。当然，这将是车轮的改造。

阅读有关二级缓存如何在休眠中工作的信息。[http://www.javalobby.org/java/forums/t48846.html](http://www.javalobby.org/java/forums/t48846.html)和其他性能调优：[http ://docs.jboss.org/hibernate/orm/3.3/reference/en/html/performance.html](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/performance.html)

对延迟加载的集合的迭代取决于您使用哪种模式来处理会话。很好的例子：[https ://community.jboss.org/wiki/OpenSessionInView](https://community.jboss.org/wiki/OpenSessionInView)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T06:33:07.360

首先，如果您的目标是复杂对象，请不要将它们缓存在内存中。随着对象数量的增加，它将显着降低性能。寻找对象存储库的概念。您可以以任何复杂的形式存储对象，它将满足您的要求

跟随 ir 技术人员结帐。 [无数据库](http://www.google.com/url?q=http://www.theserverside.com/news/thread.tss?thread_id=55109&sa=U&ei=TwB9UInHNcTPrQeHkIHgBA&ved=0CC0QFjAG&sig2=X6gDvvMrdfTbmlVF2xivhQ&usg=AFQjCNHpnUGmJmnOLXKWGNb8fHWK7CU6tg)

或[约姆](http://www.google.com/url?q=http://jorm.ow2.org/&sa=U&ei=TwB9UInHNcTPrQeHkIHgBA&ved=0CB8QFjAC&sig2=p0KCv9g7hG5Cq3Pml3zL7Q&usg=AFQjCNFdI3LwqozoJ0kh2W_bWNvMA5EvCg)

如果您正在寻找缓存库，请查看 ehcache ，如评论中所建议的那样[ehcache](http://ehcache.org/)

# android - Android：阻止手机发送短信

> ID：12908636
> 
> 赞同：-3
> 
> 时间：2012-10-16T06:19:43.517
> 
> 标签：android, sms

> **可能重复：**
> [在 android 中阻止传出 SMS/MMS](https://stackoverflow.com/questions/8145823/blocking-outgoing-sms-mms-in-android)

在 Android 中是否可以阻止手机发送任何 SMS 消息但不完全禁用手机？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T06:32:16.847

这相当于完​​全屏蔽`SMSManager`您的手机！
我不认为这是可能的。

*   收到 SMS 时发送的广播。
    您可以为此注册一个处理程序并阻止短信显示在收件箱中。

*   但是阻止发送！？唯一的出路是将手机保持在飞行模式。

# tabs - 在 apex:tab visualforce 页面的 onclick 上调用类方法

> ID：12908640
> 
> 赞同：0
> 
> 时间：2012-10-16T06:20:21.253
> 
> 标签：tabs, salesforce, apex-code, visualforce, tabpanel

我开发了一个使用 apex:tab 和 apex:commandButton 的 visualforce 页面。apex:commandButton 在 apex:tab 下。现在，我正在使用 commandButton 进行检查验证和调用类方法。但我也想在标签点击上做同样的事情。我使用了 switchType="ajax"，它正在工作并且选项卡正在更改，但我不知道如何在选项卡单击时调用类方法。我正在使用以下代码：-

```
 <apex:form id="formId">
    <apex:actionStatus id="tabStatus" startText="Processing..." onstop=""/>
    <apex:tabPanel switchType="ajax" reRender="formId" value="{!currentTab}" id="theTabPanel" tabClass="activeTab" inactiveTabClass="inactiveTab" activeTabClass="activeTab" contentStyle="font-size: 12px;">
        <apex:tab switchType="ajax" label="Tab1" status="tabStatus" name="Tab1" id="Tab1Id" reRender="formId">
</apex:tab>
        <apex:tab switchType="ajax" label="Tab2" status="tabStatus" name="Tab2" id="Tab2Id" reRender="formId">
</apex:tab>
        <apex:tab switchType="ajax" label="Tab3" status="tabStatus" name="Tab3" id="Tab3Id" reRender="formId">
</apex:tab>
</apex:tabPanel> 
```

有人可以帮我吗

> 如何在单击选项卡时调用类方法？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T11:20:25.640

使用“tabPanel”中的 selectedTab 属性从控制器控制 selectedTab 之
类的

`<apex:actionFunction name="callClass" action="{!callClass}" rerender="tabPanel" />` `<apex:tabPanel selectedTab="{!selectedTab}" onclick="callClass()">`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T06:38:07.920

尝试这个：

```
<apex:actionFunction name="callClass" action="{!yourMethodName}" rerender="none" />

<apex:tab onclick="callClass()"> 
```

# liferay - Portlet 未部署

> ID：12908643
> 
> 赞同：6
> 
> 时间：2012-10-16T06:20:33.220
> 
> 标签：liferay, liferay-6

我有一个奇怪的问题，我花了很多时间。为了构建我的 portlet，我没有使用 sdk，而是使用我自己的 ant 脚本来完成这项工作。在这种奇怪的情况下，它一切正常。

我基本上使用了 portal-service.jar 中的很多类来更改角色设置等。当我将它包含在我的构建路径中并再次部署它时。它没有被部署。在 shell 上它显示了部署，下面是日志：

> 将 1 个文件复制到 C:\liferay-portal\tomcat-6.0.29\webapps\ch1_HelloWorld
> 
> 删除目录 C:\liferay-portal\tomcat-6.0.29\temp\20121016060846753
> 
> 06:08:47,887 INFO [PortletAutoDeployListener:81] C:\liferay-portal\tomcat-6.0.29\deploy\ch1_HelloWorld.war 的 Portlet 已成功复制。
> 
> 部署将在几秒钟后开始。2012 年 10 月 16 日上午 6:08:56 org.apache.catalina.startup.HostConfig checkResources
> 
> 信息：重新加载上下文 [/ch1_HelloWorld]

而已！后来它不显示（如通常那样）该portlet 可以使用。在浏览器中，在“添加选项卡”下，该选项永远不会显示。这可能是什么问题。portlet 是一个简单的 hello world portlet，用于访问角色信息

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T14:12:41.417

> 我基本上使用了 portal-service.jar 中的很多类来更改角色设置等。当我将它包含在我的构建路径中并再次部署它时。它没有被部署。在 shell 上它显示了部署，下面是日志：

你把portal-service.jar 放到WEB-INF/lib 了吗？如果是这样，请将其从那里删除并将其添加到其他（my_project/lib）目录，而不是将其添加到构建路径。

还要确保部署后的 portal-service.jar 不在您部署的 WEB-INF/lib 中。更好的是，首先取消部署而不是重新部署。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-16T12:45:56.903

迟到的答案，但也许它会帮助某人：

```
- 只需关闭您的服务器；
- 从“webapps”tomcat 文件夹中删除 portlet；
- 你应该删除“temp”和“work”文件夹的内容；
- 重新启动您的服务器并部署您的 portlet。
```

一切都应该没问题。我不知道为什么会发生这种情况，但我多次遇到这个问题并用相同的解决方案修复它。

再见！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-17T12:24:52.050

这是否在您的 liferay-display.xml 中正确设置？

```
<display>
    <category name="yourCategoryUnderAddMenu">
        <portlet id="yourPortletId"></portlet>
    </category>
</display> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-01-09T12:25:26.107

当 `auto.deploy.dest.dir`指向错误的位置时，通常会出现这种情况。首先，我意识到常见的错误是提出这一点`liferay_home/deploy`是不正确的。此属性指定分解文件的目标。对于 tomcat，它将是 webapps 目录，例如 `/opt/liferay-portal-6.2-ce-ga2/tomcat-7.0.42/webapps`

换句话说，tomcat 在接收到分解的文件后，继续进行。在您的情况下，tomcat 从未意识到任何变化。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-16T21:33:08.103

从 webapps 中删除旧的战争，然后手动将新战争放入 Deploy 文件夹中。

看起来您可能通过将其复制到 webapps 文件夹而不是部署来进行部署？

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-05-15T13:08:05.850

转到 plugins-sdk 文件夹。打开 build.userName.properties（在我的情况下，文件的名称是 build.asif.properties）打开它.. 添加以下行

auto.deploy.dir = D:\\nWorkSpace\\liferay-portal-6.2.0-ce-ga1\\deploy

“D:\nWorkSpace\liferay-portal-6.2.0-ce-ga1\deploy”是我的部署目录的路径。

nWorkSpace 是我的工作空间。我的问题是解决。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-09-17T17:21:38.653

我尝试了上述所有解决方案，但我的问题在 Liferay 6.2 EE sp2 捆绑包上没有得到解决。

我终于能够通过从 Tomcat home/conf/Catalina/localhost 文件夹中清除除 ROOT.xml 之外的所有 portlet xml 文件来解决 portlet 部署问题。

上面的这个提示是在下面的帖子中提供的 - 博客帖子如何不再退出并且必须在下面的档案中通过谷歌搜索找到，以防有人感兴趣。它为我节省了数小时的精力。

[https://www.liferay.com/community/forums/-/message_boards/message/2124111](https://www.liferay.com/community/forums/-/message_boards/message/2124111)

[http://archive-ro.com/page/754918/2012-11-26/http://blog.ropardo.ro/2010/08/09/liferay-deployment-will-start-in-a-few-秒以及如何真正开始/](http://archive-ro.com/page/754918/2012-11-26/http://blog.ropardo.ro/2010/08/09/liferay-deployment-will-start-in-a-few-seconds-and-how-to-realy-start/)

# actionscript-3 - 使用 AsyncToken 和 AsyncResponder

> ID：12908645
> 
> 赞同：0
> 
> 时间：2012-10-16T06:20:46.537
> 
> 标签：actionscript-3, apache-flex, flex4.6, asynctoken

我想获得层次结构的两级结果。AsyncToken 的第一个结果是好的，然后我设置了一个 for 循环并在每个循环步骤中以相同的方式调用下一级结果。这是问题所在，`token2.addResponder(responder2);`永远不要在每个循环步骤上按时返回结果。毕竟它会向我发送循环结果。但我需要在每一步。你能告诉我我的错误吗？

```
public function getChildResultHandler(event:ResultEvent, token:Object=null ):void
{
        myObject=event.result;  //first asynToken result is Ok
        var myArrayCol:ArrayCollection=new ArrayCollection();               
        myArrayCol=ArrayCollection(myObject);
        var mlObject:MLObject=new MLObject();  

        var i:int;
        for(i=0;i<myArrayCol.length;i++)
        {
            mlObject=myArrayCol[i]; 

            if (mlObject.Type=="Bin")
            {
                token2=new AsyncToken(null);
                token2=myService.GetChildObjects(sessionID,mlObject.ObjectID);
                responder2=new  AsyncResponder(getNextLevelChild,getChildFaultHandler);
                token2.addResponder(responder2);
            // I cant get results here 
            // this query goes to getNextLevelChild func after for loop results
            }
        }
    } 
```

我是否必须等待两个结果，如果是，我该如何等待响应者或令牌？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T09:00:03.610

本[教程](http://www.brentknigge.com/?q=node/520)可能会有所帮助，因为它解决了与您遇到的问题非常相似的问题。有 3 个远程过程调用通过字母 ABC 进行。调用按 BAC 顺序返回。本教程演示了如何使用 ASyncToken 和 Responders 来确定哪个结果处理程序正在为哪个调用触发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T10:12:03.970

因为，这些是异步调用。无法知道返回结果的顺序。可能是第一个呼叫将首先结束，可能是第二个。

> 因此，我们必须等待所有异步调用的完成时间才能获得正确的结果。

# rest - 将多个参数发送到 .net 中的 POST 方法：

> ID：12908651
> 
> 赞同：1
> 
> 时间：2012-10-16T06:21:17.550
> 
> 标签：rest

我正在努力将 POST 方法用于 RESTful 服务。我的要求是我需要附加一些参数（不在 URL 中）和我需要从文件中读取的 2 个参数。该服务是用 Java 编写的。

```
string url= "http://srfmdpimd2:18109/1010-SF-TNTIN/Configurator/rest/importConfiguration/"

HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);
FileStream file = new FileStream(@"TestSCDS.properties", FileMode.Open);
Byte[] bytes = new Byte[file.Length];
file.Read(bytes, 0, bytes.Length);
string strresponse = Encoding.UTF8.GetString(bytes);

request.Method = "POST";
request.ContentType = "multipart/form-data;";
request.ContentLength = file.Length;

request.Headers.Add("hhrr", "H010");
request.Headers.Add("env", "TEST");
request.Headers.Add("buildLabel", "TNTAL_05.05.0500_C54");

Stream Postdata = request.GetRequestStream();
Postdata.Write(bytes, 0, bytes.Length);
HttpWebResponse response = (HttpWebResponse)request.GetResponse();` 
```

`request.Headers.Add()`正在向 URL 添加参数？如果没有，如何在 RESTful 服务中向 POST 方法发送多个参数？

另外，如何从文件中读取参数并在 POST 方法中使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T06:32:34.977

它需要一些腿部工作，编码字典并将其放入体内。下面是一个快速示例：

```
private string Send(string url)
{
        HttpWebRequest request = WebRequest.Create(url) as HttpWebRequest;

        request.Method = "POST";

        string postData = EncodeDictionary(args, false);

        ASCIIEncoding encoding = new ASCIIEncoding();
        byte[] postDataBytes = encoding.GetBytes(postData);

        request.ContentType = "application/x-www-form-urlencoded";
        request.ContentLength = postDataBytes.Length;

        using(Stream requestStream = request.GetRequestStream())
        {
           requestStream.Write(postDataBytes, 0, postDataBytes.Length);
        }

        using (HttpWebResponse response = request.GetResponse() as HttpWebResponse)
        {
            StreamReader reader = new StreamReader(response.GetResponseStream());
            return reader.ReadToEnd();
        }
 }

private string EncodeDictionary(Dictionary<string, string> dict,
                                bool questionMark)
{
    StringBuilder sb = new StringBuilder();
    if (questionMark)
    {
        sb.Append("?");
    }
    foreach (KeyValuePair<string, string> kvp in dict)
    {
        sb.Append(HttpUtility.UrlEncode(kvp.Key));
        sb.Append("=");
        sb.Append(HttpUtility.UrlEncode(kvp.Value));
        sb.Append("&");
    }
    sb.Remove(sb.Length - 1, 1); // Remove trailing &
    return sb.ToString();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T06:26:43.757

我不知道您的完整要求是什么，但我强烈的建议是“从简单开始”。

不要*使用*“Content-type: multipart/form-data”，除非你确定你需要它。相反，从“application/x-www-form-urlencoded”（旧的最爱）或“application/json”（甚至更好）开始。

这是一个很好的分步示例。您可以通过简单的 Google 搜索找到 100 多个：

*   [http://www.asp.net/web-api/overview/web-api-clients/calling-a-web-api-from-a-net-client](http://www.asp.net/web-api/overview/web-api-clients/calling-a-web-api-from-a-net-client)

# php - 当实体关系/关联时 Symfony2 验证不起作用

> ID：12908658
> 
> 赞同：7
> 
> 时间：2012-10-16T06:21:38.637
> 
> 标签：php, validation, associations, entity, symfony-2.1

控制器

```
public function indexAction(Request $request)
{
    $user = $this->container->get('security.context')->getToken()->getUser();
    $owner = $user->getId();

    $first = new First();
    $first->setOwner($owner);

    $second = new Second();
    $second->setOwner($owner);
    $second->setFirst($first);

    $form = $this->createForm(new SecondType(), $second);

    if ($request->getMethod() == 'POST') {
        $form->bindRequest($request);

        if ($form->isValid()) {
            $em = $this->get('doctrine')->getEntityManager();
            $em->persist($first);
            $em->persist($second);
            $em->flush();
        }
    }

    return $this->render('MySampleBundle:Home:index.html.twig', array(
        'form' => $form->createView(),
    ));

} 
```

ORM Yaml

```
My\SampleBundle\Entity\First:
    type: entity
    table: first
    id:
        id:
            type: integer
            generator: { strategy: AUTO }
    fields:
        title:
            type: string
        date_created:
            type: datetime
        date_edited:
            type: datetime
        owner:
            type: integer
    lifecycleCallbacks:
        prePersist: [ prePersist ]
        preUpdate: [ preUpdate ]
    oneToMany:
        reviews:
            targetEntity: Second
            mappedBy: review

My\SampleBundle\Entity\Second:
    type: entity
    table: second
    id:
        id:
            type: integer
            generator: { strategy: AUTO }
    fields:
        review:
            type: string
        date_created:
            type: datetime
        date_edited:
            type: datetime
        owner:
            type: integer
    lifecycleCallbacks:
        prePersist: [ prePersist ]
        preUpdate: [ preUpdate ]
    manyToOne:
        first:
            targetEntity: First
            inversedBy: reviews
            joinColumn:
                name: first_id
                referencedColumnName: id 
```

形式/类型

```
class FirstType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder->add('title', 'text');
    }

    public function getDefaultOptions(array $options)
    {
        return array(
            'data_class' => 'My\SampleBundle\Entity\First',
        );
    }

    public function getName()
    {
        return 'first';
    }
}

class SecondType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder->add('first', new FirstType());
        $builder->add('review', 'textarea');
    }

    public function getName()
    {
        return 'second';
    }
} 
```

验证.yml

```
My\SampleBundle\Entity\First:
    properties:
        title:
            - NotBlank: ~
            - MinLength: 2

My\SampleBundle\Entity\Second:
    properties:
        review:
            - NotBlank: ~
            - MinLength: 14 
```

创建的表格可以正常工作。但是，只有验证不能正常工作。

如果它单独执行，验证将正常工作。

```
$form = $this->createForm(new FirstType(), $first); 
```

但是，如果它处于 Entity Relationships/Associations 状态，则第一次验证将不起作用。将注册一个字符中的 First 的 title 属性。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-16T06:34:23.493

Symfony 2.1+ 不会自动验证所有嵌入的对象。您需要将[`Valid`约束](http://symfony.com/doc/master/reference/constraints/Valid.html)放在`first`字段上以使其也有效：

```
My\SampleBundle\Entity\Second:
    properties:
        first:
            - Valid: ~ 
```

# php - PHP：控制器和视图/放置递归方法的位置

> ID：12908663
> 
> 赞同：1
> 
> 时间：2012-10-16T06:22:04.230
> 
> 标签：php, view, recursion, model

模型：我有一个像 id:name:parentId 这样的表。parentId 对 id 的引用。构建树的简单递归。

例如：

1.  1：根：空
2.  2：航向1：1
3.  3：航向2：1
4.  4：副标题1.1：2

在我的控制器中，我现在将调用数据库并将数据传递给视图。如果我这样做，那么我的视图中就会有一个函数。我不喜欢我认为的功能:)。

另一种方法是以某种方式对其进行排序。但这真的会有所作为吗？

*   为此，我必须使用帮助字段来了解我所处的级别。所以我可以遍历排序数组。
*   或另一种方法：多维数组。也许毫无意义，因为我不知道那棵树会有多深。

将感谢任何建议。提前致谢。

编辑：我将数据作为对象接收。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T06:24:58.517

根据基于 MVC 框架的设计（胖模型、瘦控制器）的趋势，我建议使用您的模型来获取数据并将嵌套数据集（多维数组）传递给控制器​​/视图。不管层次结构有多深，它都是有限的。

由于这个问题问得有点笼统，所以不清楚它是什么类型的数据，也不清楚你是总是需要一次全部数据还是只需要其中的一些相关数据。无论哪种方式，我想你都想保持层次结构，所以如果你不习惯遍历嵌套数组，总是可以选择使用 (Std)Objects。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T06:47:37.530

如果你看[这里](http://mjsarfatti.com/sandbox/nestedSortable/)，你会看到一个嵌套的树（表）。点击`To Array`按钮。你会看到一个这样的数组：

```
 '0' ...
        'item_id' ...
        'parent_id' => "none"
        'depth' => "0"
        'left' => "1"
        'right' => "22"
    '1' ...
        'item_id' => "1"
        'parent_id' ...
        'depth' => "1"
        'left' => "2"
        'right' => "7" 
```

注意`left`并[在此处](http://en.wikipedia.org/wiki/Nested_set_model)`right`解释

通过这种方式，您还可以获得深度和树的一部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T06:44:49.917

在模型中构建多维数组并将其传递给视图。

您可以制作多维数组而无需使用指针递归。

```
// collect tree
$res=$Conn->query('SELECT id, name, parentId FROM tree');

// if your root node has parent 0
$tree[0]->children=array();

// build into one array
// every node is found from its $tree[parentId]->children[id]
// and from $tree[id]
foreach($res as $row)
{
    $tree[$row['id']]->data=$row;

    if(!isset($tree[$row['id']]->children))
        $tree[$row['id']]->children=array();

    $tree[$row['parentId']]->children[$row['id']]=&$tree[$row['id']];
} 
```

# ios - iOS App Store 不同账号发布

> ID：12908671
> 
> 赞同：3
> 
> 时间：2012-10-16T06:22:37.927
> 
> 标签：ios, iphone, app-store, provisioning-profile

我对 iOS 开发很陌生，我不清楚如何发布为客户开发的应用程序。他们想以他们的名义发布它，我不想向他们提供源代码，只提供二进制文件。我必须使用他们的帐户登录并通过 Xcode/Application Loader 上传，还是可以在不访问他们的帐户的情况下完成？

如果我向他们发送发布版本，他们可以将其上传到他们的帐户下吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T06:32:08.780

`Organizer -> Devices -> Provisioning Profiles`他们需要一个开发者帐户，您可以使用应用程序加载器使用他们的帐户登录，也可以在 Xcode 中通过键入他们的`Apple-ID`和刷新配置文件`password`。这会加载/重新加载他们的配置文件。您需要`valid App Store Profile`为您的应用程序进行代码签名。您的应用程序使用 Xcode 并通过单击您的和到 AppStore`Archive`将其上传到 Apple ，输入您用于下载配置文件的相同凭据，您就完成了。希望有帮助。`Distribute``Archive``Upload`

您可以向他们发送发布版本，但您必须使用他们的个人资料对其进行签名，因此您需要他们的 PrivateKey、开发人员个人资料和 App Store 分发个人资料。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T06:31:59.827

您需要使用他们的帐户登录才能通过 Application Loader 上传。

# iphone - 是否有任何 API 来获取全球当前时间

> ID：12908674
> 
> 赞同：3
> 
> 时间：2012-10-16T06:22:54.713
> 
> 标签：iphone, ios, xcode4.3, geocoding

在我的应用程序中，我想设置当前时间。我知道我们可以通过设备获取它，但它变成了用户特定的。如果用户更改他的设备时间，那么我无法在我的报告中找到当前时间。那么是否有任何 API 可以根据位置或 LAT-LONG 为我提供当前时间。如果有人对此有想法，请分享。谢谢大家。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T06:29:26.223

[WorldTimeEngine Web 服务](http://worldtimeengine.com/api/geo)提供了一个 API，可以将地理位置坐标转换为本地时间。

编辑：也有这个[AskGeo Web API](http://askgeo.com/)，它似乎是免费的并提供时间信息。

# iis-7 - 通过 MSBuild 在 Web 部署期间设置 ACL

> ID：12908683
> 
> 赞同：4
> 
> 时间：2012-10-16T06:23:55.927
> 
> 标签：iis-7, msbuild, msdeploy, msbuild-wpp

我在 TeamCity 中运行了一个大部分工作的 Web 构建和部署配置，它基本上使用 MSBuild 将站点自动部署到 Web 服务器。默认情况下，MSDeploy 将目标服务器上的所有内容都设置为只读，我需要 AppPool 身份才能对一个文件夹具有写入权限。

我发现[Kevin leetham 的一篇文章](http://leethams.wordpress.com/2010/06/12/modifying-directory-permissions-with-web-deployment/)让我了解了 90% 的情况。Kevin 描述了如何通过创建一个名为 ProjectName.wpp.targets 的文件来连接到 MSBuild Web 发布管道，如下所示：

```
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <PropertyGroup>
     <!--Extends the AfterAddIisSettingAndFileContentsToSourceManifest action do also set ACLs -->

    <IncludeCustomACLs>TRUE</IncludeCustomACLs>

    <AfterAddIisSettingAndFileContentsToSourceManifest Condition="'$(AfterAddIisSettingAndFileContentsToSourceManifest)'==''">
      $(AfterAddIisSettingAndFileContentsToSourceManifest);
      SetCustomACLs;
    </AfterAddIisSettingAndFileContentsToSourceManifest>
  </PropertyGroup>
  <Target Name="SetCustomACLs" Condition="'$(IncludeCustomACLs)'=='TRUE'">
    <Message Text="Adding Custom ACls" />
    <ItemGroup>
      <!-- Ensure the AppPool identity has write access to the Files directory -->
      <MsDeploySourceManifest Include="setAcl" Condition="$(IncludeSetAclProviderOnDestination)">
        <Path>$(_MSDeployDirPath_FullPath)\files</Path>
        <setAclAccess>Read,Write,Modify</setAclAccess>
        <setAclResourceType>Directory</setAclResourceType>
        <AdditionalProviderSettings>setAclResourceType;setAclAccess</AdditionalProviderSettings>
      </MsDeploySourceManifest>
    </ItemGroup>
  </Target>
</Project> 
```

这*几乎*是工作，它让我发疯。ACL 被添加到清单中，但问题是它会根据构建位置生成绝对路径，而不是相对于目标服务器上的 IIS Web 应用程序。生成的清单是这样的（一些名称已更改以保护无辜者）：

```
<?xml version="1.0" encoding="utf-8"?>
<sitemanifest>
  <IisApp path="C:\SolutionPath\IisWebAppName\src\MyProjectName\obj\Release_Deploy\Package\PackageTmp" managedRuntimeVersion="v4.0" />
  <setAcl path="C:\SolutionPath\IisWebAppName\src\MyProjectName\obj\Release_Deploy\Package\PackageTmp" setAclResourceType="Directory" />
  <setAcl path="C:\SolutionPath\IisWebAppName\src\MyProjectName\obj\Release_Deploy\Package\PackageTmp" setAclUser="anonymousAuthenticationUser" setAclResourceType="Directory" />
  <setAcl path="C:\SolutionPath\IisWebAppName\src\MyProjectName\obj\Release_Deploy\Package\PackageTmp\files" setAclResourceType="Directory" setAclAccess="Read,Write,Modify" />
</sitemanifest> 
```

这实际上看起来是正确的，最后一行是我来自 wpp.targets 文件的自定义 ACL。但是，当 MSDeploy 将其发送到目标服务器时，会发生以下情况：

```
2>开始Web部署发布应用程序/包到https://webhostingprovider.biz:8172/msdeploy.axd?site=IisWebAppName ...
2>添加站点清单（sitemanifest）。
2>为路径添加ACL（IisWebAppName）
2>为路径添加ACL（IisWebAppName）
2>为路径添加ACL（C:\SolutionPath\IisWebAppname\src\MyProjectName\obj\Release_Deploy\Package\PackageTmp\files）
2>C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v11.0\Web\Microsoft.Web.Publishing.targets(4377,5)：错误ERROR_USER_NOT_AUTHORIZED_FOR_SETACL：Web部署任务失败。（使用 Web 管理服务连接时，无法使用指定的提供程序（“setAcl”）完成操作。如果服务器管理员未授权用户进行此操作，则可能会发生这种情况。setAcl http://go.microsoft.com/ fwlink/?LinkId=178034
```

整个事情都落在了我的自定义 ACL 路径上，该路径使用绝对路径名而不是相对于*IisWebAppName*。我不知道为什么！

请帮忙 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T10:40:20.067

您需要`ProviderPath`使用 a 创建一个参数，该`DefaultValue`参数使用`{param name}`语法获取另一个参数的值。

[这是我在另一个](https://stackoverflow.com/questions/12849812/using-dirpath-provider-with-webdeploy/12887104#12887104)执行所有操作的问题中包含的助手：

```
<ItemDefinitionGroup>
  <AdditionalAcls>
    <AclAccess>Write</AclAccess>
    <ResourceType>Directory</ResourceType>
  </AdditionalAcls>
</ItemDefinitionGroup>

<PropertyGroup>
  <AfterAddIisSettingAndFileContentsToSourceManifest>
    $(AfterAddIisSettingAndFileContentsToSourceManifest);
    AddAdditionalAclsToSourceManifest;
  </AfterAddIisSettingAndFileContentsToSourceManifest>
  <AfterAddIisAndContentDeclareParametersItems>
    $(AfterAddIisAndContentDeclareParametersItems);
    AddAdditionalAclsDeclareParameterItems
  </AfterAddIisAndContentDeclareParametersItems>
</PropertyGroup>

<Target Name="AddAdditionalAclsToSourceManifest">
  <ItemGroup Condition="'@(AdditionalAcls)' != ''">
    <MsDeploySourceManifest Include="setAcl">
      <Path>$(_MSDeployDirPath_FullPath)\%(AdditionalAcls.Identity)</Path>
      <setAclResourceType Condition="'%(AdditionalAcls.ResourceType)' != ''">%(AdditionalAcls.ResourceType)</setAclResourceType>
      <setAclAccess>%(AdditionalAcls.AclAccess)</setAclAccess>
      <AdditionalProviderSettings>setAclResourceType;setAclAccess</AdditionalProviderSettings>
    </MsDeploySourceManifest>
  </ItemGroup>
</Target>

<Target Name="AddAdditionalAclsDeclareParameterItems">
  <ItemGroup Condition="'@(AdditionalAcls)' != ''">
    <MsDeployDeclareParameters Include="Add %(AdditionalAcls.AclAccess) permission to %(AdditionalAcls.Identity) Folder">
      <Kind>ProviderPath</Kind>
      <Scope>setAcl</Scope>
      <Match>^$(_EscapeRegEx_MSDeployDirPath)\\@(AdditionalAcls)$</Match>
      <Description>Add %(AdditionalAcls.AclAccess) permission to %(AdditionalAcls.Identity) Folder</Description>
      <DefaultValue>{$(_MsDeployParameterNameForContentPath)}/@(AdditionalAcls)</DefaultValue>
      <DestinationContentPath>$(_DestinationContentPath)/@(AdditionalAcls)</DestinationContentPath>
      <Tags>Hidden</Tags>
      <ExcludeFromSetParameter>True</ExcludeFromSetParameter>
      <Priority>$(VsSetAclPriority)</Priority>
    </MsDeployDeclareParameters>
  </ItemGroup>
</Target> 
```

您可以通过声明来使用它：

```
<ItemGroup>
    <AdditionalAcls Include="MyRelativeWritableDirectory" />
</ItemGroup> 
```

**请注意**，此解决方案目前仅在您不需要路径中的反斜杠时才有效（即，如果它仅是根目录）。如果您需要一个子目录，则需要窃取我用于“SkipDeleteItems”（稍后在该答案中）的技巧，以将正则表达式转义的路径元数据添加到每个项目。

# java - 错误是 Sql 语法

> ID：12908684
> 
> 赞同：1
> 
> 时间：2012-10-16T06:23:56.700
> 
> 标签：java, mysql, datetime, jdbc, prepared-statement

我在以下代码片段中收到 SQL 语法错误。这里有什么问题？我无法弄清楚。请帮忙。

```
String selectSQL = "SELECT * FROM cost_info where `date` > ? and `date` < ?  order by `date`";
        PreparedStatement preparedStatement = conn.prepareStatement(selectSQL);

        java.sql.Date sqlFromDate = java.sql.Date.valueOf(from_date);
        java.sql.Date sqlEndDate = java.sql.Date.valueOf(end_date);

        preparedStatement.setDate(1, sqlFromDate );
        preparedStatement.setDate(2, sqlEndDate );
        rs = preparedStatement.executeQuery(selectSQL); 
```

我正在使用 MySQL。错误是：

```
com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '? and `date` < ?  order by `date`' at line 1
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
at java.lang.reflect.Constructor.newInstance(Unknown Source)
at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
at com.mysql.jdbc.Util.getInstance(Util.java:386)
at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1052)
at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3597)
at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3529)
at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:1990)
at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2151)
at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2619)
at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2569)
at com.mysql.jdbc.StatementImpl.executeQuery(StatementImpl.java:1521)
at com.source.viralmo.rms.CostDisplay.initialize(CostDisplay.java:77)
at com.source.viralmo.rms.CostDisplay.<init>(CostDisplay.java:34)
at com.source.viralmo.rms.AdminPage.actionPerformed(AdminPage.java:141) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T06:25:19.873

```
SELECT * FROM cost_info order by date where date > ? and date < ? 
```

你放`order by`错地方了，应该在查询的最后。

```
SELECT * FROM cost_info where date > ? and date < ?  order by date 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T06:28:08.357

首先，`order by`应该去追求`where`。

其次，如果您使用的是 MySQL，`date`则应该引用它，因为它是该`DATE`类型的保留字。查询应该是：

```
SELECT * FROM cost_info where `date` > ? and `date` < ?  order by `date` 
```

`executeQuery()`第三，使用该方法执行准备好的语句。这里使用的`executeQuery(String)`方法是执行普通语句；例如，它不替换参数，因此按`?`原样传递给数据库。你需要：

```
rs = preparedStatement.executeQuery(/* empty */); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T06:25:47.317

Order by 子句在 where 子句之后

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-16T06:26:14.180

`SELECT * FROM cost_info where date > ? and date < ? order by date`在你的情况下是正确的 sql

# mfc - 使用 StretchDIBits 时颜色错误

> ID：12908685
> 
> 赞同：0
> 
> 时间：2012-10-16T06:23:58.453
> 
> 标签：mfc

我在使用 StretchDIBits 函数时遇到了麻烦。我想绘制一个由缓冲区制成的位图。但是，我在缓冲区中定义的颜色与屏幕上的结果不同。我已阅读文档并使用了 BITMAPINFOHEADER 的 biCompression（BI_RGB 和 BI_BITFIELDS）和 biClrUsed（0 / 3）参数。根据它们的值，我可以看到一些差异，但结果仍然与我的预期不同。

这是我正在使用的代码（它可以插入到模板 SDI 项目的 OnDraw 方法中来演示问题）。

```
void CTestStretchDIBitsView::OnDraw(CDC* /*pDC*/)
{
    ...

    CClientDC dc(this);
    CRect rect;
    GetClientRect(&rect);

    DWORD* pBuffer = new DWORD[500 * 500];
    memset(pBuffer, RGB(255, 255, 0), 500 * 500 * sizeof(DWORD));

    LPBITMAPINFO pBmpInfo = (LPBITMAPINFO) new BYTE[sizeof(BITMAPINFOHEADER) + 256 * sizeof(RGBQUAD)];

    pBmpInfo->bmiHeader.biSize = sizeof(BITMAPINFOHEADER);
    pBmpInfo->bmiHeader.biWidth = 500;
    pBmpInfo->bmiHeader.biHeight = 500;
    pBmpInfo->bmiHeader.biPlanes = 1;
    pBmpInfo->bmiHeader.biBitCount = 32;
    pBmpInfo->bmiHeader.biCompression = BI_BITFIELDS;
    pBmpInfo->bmiHeader.biSizeImage = 500 * 500;
    pBmpInfo->bmiHeader.biXPelsPerMeter = 0;
    pBmpInfo->bmiHeader.biYPelsPerMeter = 0;
    pBmpInfo->bmiHeader.biClrUsed = 0;
    pBmpInfo->bmiHeader.biClrImportant = 0;

    SetStretchBltMode(dc.m_hDC, STRETCH_DELETESCANS);
    StretchDIBits(dc.m_hDC, 
                    0, 
                    rect.Height(), 
                    rect.Width(), 
                    -rect.Height(), 
                    0, 
                    0, 
                    500, 
                    500, 
                    pBuffer, 
                    pBmpInfo, 
                    DIB_RGB_COLORS, 
                    SRCCOPY);

    delete[] pBmpInfo;
    delete[] pBuffer;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T06:31:58.000

您必须使用以下模式

`SetStretchBltMode(hdcWindow,HALFTONE);`

代替

```
SetStretchBltMode(dc.m_hDC, STRETCH_DELETESCANS); 
```

因为根据我的研究，半色调是最好的模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T06:48:55.097

问题不是来自 StretchDIBits 函数，而是来自这里用作位图的缓冲区的初始化。memset(...) 函数被滥用。使用初始化，例如：

```
int Color = RGB(255, 0, 0);

for (int i = 0 ; i < 500 * 500 ; i++)
    pBuffer[i] = Color; 
```

正如预期的那样，我得到了一个完美的蓝色图像。

# html - 如何将许多输入从一个html传递到另一个页面

> ID：12908687
> 
> 赞同：0
> 
> 时间：2012-10-16T06:24:30.657
> 
> 标签：html, jsp

我有一个 html 页面，它接受输入 datetime1、datetime2、moteid 并有一个提交按钮，它应该在单击提交按钮时重定向到另一个页面。我想在这里使用上一页中给出的输入，即，datetime1，datetime2，moteid

```
 var d1=document.getElementById("datetime1").value;
         var d2=document.getElementById("datetime2").value;
         var m=document.getElementById("moteid").value;
         **var newwindow = parent.window.open("pdf1jsp.jsp?datetime1="+d1+"&"+"pdf1jsp.jsp?datetime2="+d2+"&"+"pdf1jsp.jsp?moteid="+m);
         //var newwindow = parent.window.open("pdf1jsp.jsp?datetime1="+d1+"pdf1jsp.jsp?datetime2="+d2+"pdf1jsp.jsp?moteid="+m);**

window.close(); 
```

当我只给一个输入时，它很好，我得到了输出

```
var newwindow = parent.window.open("pdf1jsp.jsp?datetime1="+d1); 
```

如何传递许多输入。上述语法有什么问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T06:32:54.550

使用查询字符串：

```
var newwindow = parent.window.open("pdf1jsp.jsp?datetime1="+document.getElementById("datetime1").value+"&"+...); 
```

然后从结果页面获取值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T06:28:58.970

在页面之间传递值不是一个好习惯。由于您已经拥有 a `jsp`，因此您应该开始将值从 your 传递`jsp`给 a `Servlet`。您的字段应该在`form`. 然后`action`将该表单的属性指向`Servlet`. 在那里验证这些值，然后将它们再次传递给另一个`jsp`.

# .htaccess - 如何在 .htaccess 中为 *.olddomain.com 创建 301 重定向到 *.newdomain.com

> ID：12908691
> 
> 赞同：1
> 
> 时间：2012-10-16T06:24:52.447
> 
> 标签：.htaccess

我已经检查了许多将旧域重定向到新域的方法。但我没有找到任何办法。

我站点的所有子文件夹都使用子域地址，例如 myfolder.domain.com，因此它构建了许多子域。现在我想将它们全部重定向到新域。

将 *.olddomain.com 重定向到 *.newdomain.com。任何知道 .htaccess 的人都可以帮助我吗？我真的很感激！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T07:16:13.967

> 将 *.olddomain.com 重定向到 *.newdomain.com。任何知道 .htaccess 的人都可以帮助我吗？

只要您的`*.olddomain.com`所有域都指向同一个文档根目录，您就可以将这些规则放在该目录的 htaccess 文件中：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^([^.]+)\.olddomain\.com$ [NC]
RewriteRule ^(.*)$ http://%1.newdomain.com/$1 [L,R=301] 
```

这将从以下位置重定向浏览器：

`http://foo.olddomain.com/bar.html`至
**`http://foo.newdomain.com/bar.html`**

# java - 将我当前页面的 html 通过 Jquery 传递给托管 bean 时，primefaces remoteCommand 标记不起作用

> ID：12908693
> 
> 赞同：4
> 
> 时间：2012-10-16T06:24:58.873
> 
> 标签：java, jquery, html, jsf-2

我正在使用这样的 Jquery 的 .html() 方法获取当前页面的 HTML。

```
<h:outputScript name="js/jquery-1.7.2.js" />
<h:outputScript>
   function getHtml(){
        $('#next').click(function(){  
           htmlString=$('#wrapper').html();
           alert(htmlString);
       command({param:htmlString});
          });
        }
</h:outputScript> 
```

我的 XHTML 页面

```
<div id="wrapper">
 <form prependId="false">
 // My HTML form with some input fields
<h:commandButton id="next" value="Submit" action=#{bean.formvalues} onCick="getHtml();">
    <h:commandButton>
<p:remoteCommand name="command" actionListener="#{bean.getjs}" />
</form>
</div> 
```

我的豆子

```
 @ManagedBean
    @sessionScoped
    public class bean{

       private String formvalues; // getters and settes

      public String getformValues(){
       String htmlString = FacesContext.getCurrentInstance().getExternalContext().getRequestParameterMap().get("htmlString");
    return htmlString;
    }
}

public void getjs(){
     String value = FacesContext.getCurrentInstance().getExternalContext().getRequestParameterMap().get("param");
          System.out.println("**************** The Javascirpt is "+value);
    } 
```

但是`"htmlString"`当我使用这个 primefaces remoteCommand 标记时，我无法在 bean 中获取我的页面 HTML 源代码。如何将它放入 bean。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-16T19:57:13.393

你应该像这样调用remoteCommand；

```
<h:outputScript>
   function getHtml(){
       $('#next').click(function(){  
           htmlString=$('#wrapper').html();
           alert(htmlString);
           command([{name:'param',value:htmlString}]); //This is important
       });
    }
</h:outputScript> 
```

您可以在 getJs 方法中获取参数的值：

```
public void getjs(){
  FacesContext context = FacesContext.getCurrentInstance();
  Map<String, String> map = context.getExternalContext().getRequestParameterMap();
  String value = (String) map.get("param");
  System.out.println("**************** The Javascript is " + value);
} 
```

# node.js - 如何根据 nodejs 服务器输出更新客户端 HTML 页面？

> ID：12908696
> 
> 赞同：0
> 
> 时间：2012-10-16T06:25:19.763
> 
> 标签：node.js, socket.io

我使用 nodejs 的命名空间开发了一个应用程序，其中客户端（client1）将数据发送到服务器，服务器将相同的数据发送到另一个客户端（client2）。一切正常，除了只有在我刷新页面时才会在 client2 中呈现数据。如何动态更新数据？

代码如下： server::

```
var io = require('socket.io').listen(8007);
    var chat = io
      .of('/chat')
      .on('connection', function (socket) {
        socket.on('message', function(message){
        console.log("Received message:: " + message + " - from client " + socket.id);
            var news = io
            .of('/news')
            .on('connection', function (socket1) {
            socket1.send("received::" + message + " - from client " + socket.id);
            });
    });
    }); 
```

客户端1是::

```
<script>
var count=0;
function connect() {
  var chat = io.connect('http://localhost:8007/chat');
    chat.send('chat message:::' + count);
    count++;
  }
</script> 
```

接收客户是::

```
<script>
  var news = io.connect('http://localhost:8007/news');
    news.on('message', function(data){
    document.getElementById('message').innerHTML = "\n Server says: " + data;
    });  
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T15:56:32.510

我认为您的问题出在服务器上。在您收到“聊天”连接之前，您不会设置您的“新闻”侦听器。将您的服务器代码更改为如下所示：

```
var io = require('socket.io').listen(8007);
var newsSocket;
var news = io
    .of('/news')
    .on('connection', function (socket1) {
        newsSocket = socket1;
    });
var chat = io
    .of('/chat')
    .on('connection', function (socket) {
        socket.on('message', function(message){
        console.log("Received message:: " + message + " - from client " + socket.id);
        for(var i=0; i<newsSockets.length; i++) {
            newsSocket.send("received::" + message + " - from client " + socket.id);
        }
    }); 
```

注意：这只会将新闻消息发送到最后连接的客户端。您应该有一个新闻连接的集合（数组）。当它们断开连接时，您还应该将它们删除。

# liferay - LIFERAY 项目？我们应该为每个部分创建不同的项目吗？

> ID：12908699
> 
> 赞同：0
> 
> 时间：2012-10-16T06:25:47.533
> 
> 标签：liferay, portlet, liferay-6

我即将开发一个liferay项目，并对此有一些疑问，如下所示。

我们应该为每个部分创建一个不同的 portlet 项目，还是应该将所有部分合并到一个 portlet 项目中？我们有一个不同的部分，如“活动”、“广告”等，现在每个部分都是相互关联的，我的意思是说，我将能够显示与特定 portlet 映射的广告列表。可以请指导我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T13:58:56.927

我认为您所说`Categories`的`Add more`部分是指出现在门户页面左上角停靠栏中的部分。

创建不同类别的不同 portlet 项目不是强制性的。考虑到未来的管理，这纯粹是您的选择。

以下是将所有 portlet 保留在一个项目中的一些注意事项：

1.  如果 portlet 要使用彼此的服务
2.  这些 portlet 将相互依赖以显示相同或相似的数据，例如：Documents & Media portlet 和 Documents & Media display portlet 将放在一个项目中。

我想说要牢记内**聚和松散耦合**的软件设计原则。

这是我目前能想到的。希望这可以帮助您做出自己的决定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T13:00:49.313

我同意 Prakash K。此外，如果您需要共享私有 portlet 会话，您应该需要在同一个项目中有两个 portlet（并且对于“项目”，我听到“战争”）。因此，正如 Prakash 所说，如果您需要 2 个 portlet 之间的交互，请使用一个项目。你可以在这个很棒的博客（不是我的）中找到关于这个特定点的更多信息：[Liferay session sharing demystified](http://longgoldenears.blogspot.fr/2008/03/liferay-session-sharing-demystified.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T21:25:02.600

尝试将所有 Portlet 放在一个项目下。这样部署很容易，因为基本上配置文件（如 liferay-portlet.tld、liferay-portlet-ext.tld）是相同的。

您可能想为与 portlet 无关的代码创建不同的项目。我的意思是主题或 UI 类的不同项目，服务/服务器端 Java 代码下的不同项目，数据库配置/连接等不同的项目。由于上述原因，所有 portlet 都可以归入一个项目。

而且您仍然可以在这个大型 portlet 项目中拥有单独的空间/松散耦合，因为您的（javascript/您正在使用的任何技术）代码将位于单独的文件夹中。

关于在 portlet 中显示特定列表的问题，我想这取决于您希望如何在该 portlet 中编写代码以显示您的列表。

# iptables - keepalived 在没有 iptables 的情况下运行良好

> ID：12908701
> 
> 赞同：2
> 
> 时间：2012-10-16T06:25:54.507
> 
> 标签：iptables

我已经设置了keepalived，它只有在我停止iptables服务时才能正常工作。我的 iptables 配置是这样的，请告诉我应该为 keepalived 添加哪些规则

```
# Firewall configuration written by system-config-firewall
# Manual customization of this file is not recommended.
*filter
:INPUT ACCEPT [0:0]
:FORWARD ACCEPT [0:0]
:OUTPUT ACCEPT [0:0]
-A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT
-A INPUT -p icmp -j ACCEPT
-A INPUT -i lo -j ACCEPT
-A INPUT -m state --state NEW -m tcp -p tcp --dport 22   -j ACCEPT
-A INPUT -m state --state NEW -m tcp -p tcp --dport 80   -j ACCEPT
-A INPUT -m state --state NEW -m tcp -p tcp --dport 8080 -j ACCEPT
-A INPUT -m state --state NEW -m tcp -p tcp --dport 5666 -j ACCEPT
-A INPUT -m state --state NEW -m tcp -p tcp --dport 6379 -j ACCEPT
-A INPUT -j REJECT --reject-with icmp-host-prohibited
-A FORWARD -j REJECT --reject-with icmp-host-prohibited
COMMIT 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T06:20:11.027

这几天就解决这个问题，哈哈

做：

```
iptables -I INPUT -d 224.0.0.0/8 -j ACCEPT
iptables -I INPUT -p vrrp -j ACCEPT 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-01-18T22:13:23.987

您必须接受 ip 协议 112 (vrrp) 和多播流量到 224.0.0.18。如果您使用的是 auth_type AH，那么您必须接受 proto 51

```
iptables -I INPUT -p 112 -d 224.0.0.18 -j ACCEPT
iptables -I INPUT -p 51  -d 224.0.0.18 -j ACCEPT 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-11T11:02:34.317

到 MASTER keepalived 机器：

```
iptables -I OUTPUT -p vrrp -s 192.168.10.1 -d 224.0.0.0/24 -j ACCEPT 
```

备份 keepalived 机器：

```
iptables -I INPUT -p vrrp -s 192.168.10.1  -d 224.0.0.0/24 -j ACCEPT 
```

192.168.10.1是master的keepalived ip

# c# - 颜色整行而不是单个单元格

> ID：12908705
> 
> 赞同：1
> 
> 时间：2012-10-16T06:26:17.050
> 
> 标签：c#, datagrid, compact-framework

我一直在尝试更改 Compact Framework DataGrid 中一行的背景颜色，但收效甚微，因为 .NET CF 上的 DataGrid 与其 Windows 窗体对应物相比受到限制。我实现目标的唯一一点成功是我现在能够根据其值更改**单个单元格的背景颜色。**我无法操纵从谷歌搜索得到的代码，因为我在 C# 方面不是那么好。但是，这是我拥有的代码：

```
namespace GridColor
{
    public delegate void CheckCellEventHandler(object sender, DataGridEnableEventArgs e);

    public class DataGridEnableEventArgs : EventArgs
    {
        private int _column;
        private int _row;
        private bool _meetsCriteria;

        public DataGridEnableEventArgs(int row, int col, bool val)
        {
            _row = row;
            _column = col;
            _meetsCriteria = val;
        }

        public int Column
        {
            get { return _column; }
            set { _column = value; }
        }

        public int Row
        {
            get { return _row; }
            set { _row = value; }
        }

        public bool MeetsCriteria
        {
            get { return _meetsCriteria; }
            set { _meetsCriteria = value; }
        }

    }

    public partial class ColumnStyle : DataGridTextBoxColumn
    {
        //public event CheckCellEventHandler CheckCellEquals;
        public event CheckCellEventHandler CheckCellContains;

        private int _col;

        public ColumnStyle(int column)
        {
            _col = column;
        }

        protected override void Paint(Graphics g, Rectangle Bounds, CurrencyManager Source, int RowNum, Brush BackBrush, Brush ForeBrush, bool AlignToRight)
        {
            bool enabled = true;

            if (CheckCellContains != null)
            {
                DataGridEnableEventArgs e = new DataGridEnableEventArgs(RowNum, _col, enabled);
                CheckCellContains(this, e);
                if (e.MeetsCriteria)
                    //g.DrawRectangle(new Pen(Color.Red, 2), Bounds.Y + 1, Bounds.Width - 2, Bounds.Height - 2);
                    BackBrush = new SolidBrush(Color.PaleGreen);
            }

            base.Paint(g, Bounds, Source, RowNum, BackBrush, ForeBrush, AlignToRight);

        }
    }

} 
```

现在对于我的表格，我有这个：

```
namespace GridColor
    {
        public partial class Form1 : Form
        {
            DataSet ds;
            SqlDataAdapter da;
            private List<string> compareValues = new List<string>();

            public Form1()
            {
                InitializeComponent();
                try
                {
                    addGridStyle(ref dataGrid1);
                    compareValues.Add("OK");
                    compareValues.Add("Filling");
                }
                catch (Exception ex)
                {
                    MessageBox.Show("Error: " + ex.ToString());
                }
            }

            private void addGridStyle(ref DataGrid dg)
            {
                DataGridTableStyle dtStyle = new DataGridTableStyle();
                dtStyle.MappingName = "Test";

                string connString = "Data Source=192.168.2.16,1433;Initial Catalog=TestDB;User ID=sa;Password=ABC12abc;";
                SqlConnection conn = new SqlConnection(connString);
                conn.Open();
                SqlCommand cmd = new SqlCommand();
                cmd.Connection = conn;
                cmd.CommandType = CommandType.Text;
                cmd.CommandText = "SELECT * FROM Test";
                ds = new DataSet();
                da = new SqlDataAdapter(cmd);
                da.Fill(ds, "Test");

                for (int i = 0; i < ds.Tables["Test"].Columns.Count; i++)
                {
                    ColumnStyle myStyle = new ColumnStyle(i);
                    myStyle.MappingName = ds.Tables["Test"].Columns[i].ToString();
                    if (i == 1)
                    {
                        if (ds.Tables["Test"].Columns[i].DataType == System.Type.GetType("System.String"))
                            myStyle.CheckCellContains += new CheckCellEventHandler(myStyle_CheckCellContains);
                    }
                    dtStyle.GridColumnStyles.Add(myStyle);
                }

                dg.TableStyles.Add(dtStyle);
            }

            public void myStyle_CheckCellContains(object sender, DataGridEnableEventArgs e)
            {
                try
                {
                    if (compareValues.Contains((string)dataGrid1[e.Row, e.Column]))
                        e.MeetsCriteria = true;
                    else
                        e.MeetsCriteria = false;
                }
                catch (Exception ex)
                {
                    e.MeetsCriteria = false;
                }
            }

            private void Form1_Load(object sender, EventArgs e)
            {
                dataGrid1.DataSource = ds.Tables["Test"];
            }
        }
    } 
```

**我应该在代码的哪一部分进行更改，以便如果一个单元格符合条件，它的整行将被着色，而不仅仅是它自己的单元格？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T22:41:40.150

好吧，我回去找到了几年前我在桌面上执行此操作的代码，在更高级的 DataGridView 出现之前，等等。

首先，Microsoft [Customizing the Windows Forms DataGrid](http://msdn.microsoft.com/en-us/library/ms996485.aspx)提供了本教程，其中解释了如何突出显示整行。

我查看了我的代码，我必须为**每一**列添加一个自定义列样式，向我处理的主窗体触发一个事件，然后确定该记录的正确颜色。然后，我设置 args.Color 属性，DataGridColumn 将绘制正确的颜色。**所以是的，你必须让每一列都是你自定义的可格式化类，然后你的应用程序逻辑可以处理事件，获取记录数据并确定颜色**

** 更新：这是一个简单的例子 **

```
public partial class Form1 : Form
{
    FormattableTextBoxColumn firstNameColumn = new FormattableTextBoxColumn();
    FormattableTextBoxColumn lastNameColumn = new FormattableTextBoxColumn();

    public Form1()
    {
        InitializeComponent();

        // add first name col
        firstNameColumn.MappingName = "FirstName";
        dataGridTableStyle1.GridColumnStyles.Add(firstNameColumn);
        firstNameColumn.SetCellFormat += new FormatCellEventHandler(ColumnSetCellFormat);

        // add last name col
        lastNameColumn.MappingName = "LastName";
        lastNameColumn.SetCellFormat += new FormatCellEventHandler(ColumnSetCellFormat);
        dataGridTableStyle1.GridColumnStyles.Add(lastNameColumn);

        // This just sets up a dummy data source, since I don't have a database in this example
        List<PersonTest> peopleList = new List<PersonTest>();
        peopleList.Add(new PersonTest
        {
            FirstName = "Alan",
            LastName = "QQQQQ",
            HighlightPerson = true
        });
        peopleList.Add(new PersonTest
        {
            FirstName = "John",
            LastName = "Smith",
            HighlightPerson = false
        });
        BindingSource peopleDataSource = new BindingSource();
        peopleDataSource.DataSource = peopleList;
        dataGridTableStyle1.MappingName = peopleDataSource.GetListName(null);
        dataGrid1.DataSource = peopleDataSource;
    }

    // I'll cache this brush in the form, just make sure to dispose it (see designer.cs disposing)
    SolidBrush highlightBrush = new SolidBrush(Color.Yellow);

    // here is the event you can handle to determine the color of your row!
    private void ColumnSetCellFormat(object sender, DataGridFormatCellEventArgs e)
    {
        if ((e.Source.List[e.Row] as PersonTest).HighlightPerson)
            e.BackBrush = highlightBrush;
    }

    // example test class
    public class PersonTest
    {
        public String FirstName { get; set; }
        public String LastName { get; set; }
        public bool HighlightPerson { get; set; }
    }
} 
```

和自定义数据网格列

```
public class FormattableTextBoxColumn : DataGridTextBoxColumn
{
    public event FormatCellEventHandler SetCellFormat;

    protected override void Paint(Graphics g, Rectangle bounds, CurrencyManager source, int rowNum, Brush backBrush, Brush foreBrush, bool alignToRight)
    {
        DataGridFormatCellEventArgs e = new DataGridFormatCellEventArgs(rowNum, source);
        e.ForeBrush = foreBrush;
        e.BackBrush = backBrush;
        OnSetCellFormat(e);
        base.Paint(g, bounds, source, rowNum, e.BackBrush, e.ForeBrush, alignToRight);
    }

    private void OnSetCellFormat(DataGridFormatCellEventArgs e)
    {
        FormatCellEventHandler handler = SetCellFormat;

        if (handler != null)
            handler(this, e);
    }
} 
```

您还需要这个 DataGridCellEventArgs.cs

```
public delegate void FormatCellEventHandler(object sender, DataGridFormatCellEventArgs e);

public class DataGridFormatCellEventArgs : EventArgs
{
    public int Row;
    public CurrencyManager Source;
    public Brush BackBrush;
    public Brush ForeBrush;

    public DataGridFormatCellEventArgs(int row, CurrencyManager manager)
    {
        this.Row = row;
        this.Source = manager;
    }
} 
```

这是一个示例项目：

[数据网格测试.zip](https://docs.google.com/open?id=0BxrjI2SEpdk6NEhzelNWUkhDRTQ)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T06:43:21.667

我没有和 CF 合作过，但我想我会把它扔在那里......如果你可以访问单元格，那行不是`NamingContainer`吗？如果是这样，您可以向上钻取该行并应用样式或添加带有 CSS 类的属性。

# c# - MS 企业库数据访问 - 了解 SQL“用户连接”管理

> ID：12908709
> 
> 赞同：1
> 
> 时间：2012-10-16T06:26:23.413
> 
> 标签：c#, sql-server-2008, enterprise-library, connection-pooling

我试图了解 MS 企业库的数据访问块如何管理其与 SQL 的连接。我遇到的问题是，在稳定的负载下（来自负载测试），每隔 10 分钟，到 SQL 的连接数量会迅速增加 - 这会导致网站的页面响应时间明显增加。

*这是我正在运行的场景：*

*   Visual Studio 负载测试工具，针对负载均衡器后面的 3 个 Web 服务器运行
    *   这些工具可以全面了解所有 Web + DB 盒的性能计数器
*   每个测试大约需要 10 秒，并执行 4 次插入（表单数据），以及一些琐碎的选择
*   有 60 个测试同时运行。整个测试过程中负载没有增加或减少。
    *   测试运行 20 分钟到 3 小时，结果一致。

*这就是我们看到的问题：*

*   恰好每 10 分钟，SQL 的性能计数器用于**SQL General: User Connections**增加 - 总共增加约 20 个连接
    *   执行 HTTP 发布/数据库插入的页面是受影响最大的页面。其他页面显示适度但明显的上升。
    *   Web 服务器上的 CPU/内存负载不受影响
*   这种增加与页面响应时间的显着增加相对应 - 例如，从平均 0.3 秒到最多 5 秒
*   大约 5 分钟后，它会释放许多连接，而不会影响 Web 性能
    *   以下 5 分钟的测试给出了相同（正常）的 Web 性能
    *   最终，该图看起来像一个[方波](http://www.sfu.ca/sonic-studio/handbook/Square_Wave.html)
*   再次发生，在第一次上升后 10 分钟

* * *

*我看过的：*

**数据库调用：**

数据库中的所有调用都以：

```
SqlDatabase database = new SqlDatabase([...]); 
```

并在不需要输出的情况下执行任一过程：

```
return database.ExecuteScalar([...], [...]); 
```

或者阅读包装在 using 语句中：

```
using (SqlDataReader reader = (SqlDataReader)database.ExecuteReader([...], [...]))
{
    [...]
} 
```

没有直接使用 SqlConnection，没有 .Open() 或 .Close() 方法，也没有抛出异常

**数据库验证：**

我们在登录/注销事件上运行 SQL 分析器，并使用[sp_who2](http://sqlserverplanet.com/dba/using-sp_who2)命令拍摄快照，显示谁拥有连接。后者表明确实网站（由机器+凭据看到）正在保持连接。

没有计划的作业（DB 或 Web 服务器），并且当 Web 服务器没有负载时，用户连接负载是稳定的。

**连接池配置**

我知道可以使用连接字符串更改连接池的最小和最大大小。

例如：

> "数据源=[服务器]；初始目录=[x]；集成安全=SSPI；**最大池大小=75；最小池大小=5；** "

后备措施可能是将最小尺寸设置为 ~10

我了解默认最大值为 100，默认最小值为 0（[来自此处](http://www.techrepublic.com/article/educate-yourself-about-net-sql-server-connection-string-syntax/6084879)）

想到连接池（特定于此设置）和 SQL 中的用户连接性能计数器，我有点轻率。[本文](http://msdn.microsoft.com/en-us/library/8xx3tyca%28v=vs.100%29.aspx)介绍这些连接池用于管理连接字符串，这似乎与我假设的不同（持有一个通常可用的连接池，以避免在 SQL 上重新打开它们的成本）

我仍然没有看到任何配置参数可以轻松默认为 5 或 10 分钟，在开始时归零......

* * *

因此，任何帮助表示赞赏。

我知道 10 分钟的峰值听起来像是负载变化，或者正在发生新的活动——但我们已经非常努力地隔离这些和任何其他因素——对于这个问题，我希望了解 EL 扩大其连接和向下。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T03:14:09.613

因此，事实证明，只要所有其他连接都忙，就会创建 SQL 用户连接并将其添加到池中。因此，当发生长时间运行的查询，或者数据库没有响应时，它将选择扩展来管理负载。

在我们的案例中，造成这种情况的原因恰好是 SQL 复制作业（不幸的是，但发现了......） - 用户连接数的变化只是一种症状，而不是可能的原因。

虽然原因被证明是在其他地方，但我现在觉得我从这个（可能还有其他）SQL 库中理解了连接池管理。

# mongodb - SpringData Mongodb MongoTemplate.findAndModify 没有为嵌入对象设置“_class”值

> ID：12908710
> 
> 赞同：1
> 
> 时间：2012-10-16T06:26:26.270
> 
> 标签：mongodb, spring-data

我正在使用 Spring Data Commons - 1.4.0.RC1 和 Spring Data MongoDB - 1.1.0.RC1，在使用 mongoTemplate.findAndModify() 更新嵌入文档列表（具有相同的类层次结构）时遇到问题，这不会将“_class”值设置为 mongoTemplate.save() 所做的，从 mongodb 读取数据时会导致问题，因为应用程序不知道为该列表中的每个嵌入式文档实例化哪个具体类。

例如，我有一个学生班，一个学生注册了数学、物理、计算机科学等科目。这不是我正在研究的领域，但应该足以证明问题。因此，我将一个 Student 类映射到一个“学生”集合和一个作为嵌入式文档的科目列表，所有科目都扩展了 Subject 超类，如下所示：

```
@Document
public class Student {

@Id
private String identifier;

private List<Subject> subjcts;
}  

public abstract class Subject {
// common properties and methods;
}

public class Maths  extends Subject {}

public class Physics extends Subject{} 
```

要创建一个学生并保存到数据库，我会

```
Student student = new Student();
student.setIdentifier(UUID.random().toString);
student.addSubject(new Maths());
student.addSubject(new Physics());

mongoTemplate.insert(student); or mongoTemplate.save(student); 
```

上面将创建一个学生，其学科数学和物理作为嵌入式文档，带有一个额外的字段“_class”，指定具体类，以便在从数据库中获取时可以将其映射到正确的类。

但是，如果现在我想更新主题列表，可以直观地执行类似的操作`mongoTemplate.findAndModify(the query, new Update().set("subject", newSubjects), Student.class);`

但是 findAndModify 似乎没有通过为主题设置“_class”的类型映射器，因此导致从 db 回读时出现问题。

它是 Spring Data 中的错误吗？我该如何解决它？

任何指针将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T06:35:30.747

这是 SpringData MongoDB ( [https://jira.springsource.org/browse/DATAMONGO-392](https://jira.springsource.org/browse/DATAMONGO-392) ) 的一个已知问题。

目前我发现的唯一解决方法是为内部文档类创建一个特定的转换器。

# asp.net - 水晶报表页面大小 asp.net

> ID：12908711
> 
> 赞同：0
> 
> 时间：2012-10-16T06:26:28.877
> 
> 标签：asp.net, crystal-reports

我有一个使用水晶报表的网络应用程序，问题是每当我向我的项目添加新报表时，它都有固定的宽度、大小，我无法调整它的大小。我尝试了很多设置，但它仍然是固定大小，只需查看报告固定大小的图像。每个新报告都有固定大小。怎么办？

![在此处输入图像描述](../Images/e57f215fd9bde68a7c0f71dfbf09395d.png)

# wpf - 如何在 WPF DataGrid 中访问单元格级别的组合框？

> ID：12908724
> 
> 赞同：0
> 
> 时间：2012-10-16T06:27:46.487
> 
> 标签：wpf, binding, datagrid, combobox

我的数据网格列模板中包含组合框，如下所示。

```
<my:DataGridTemplateColumn x:Name="dgColReferece" Header="References"  >
     <my:DataGridTemplateColumn.CellTemplate>
         <DataTemplate>
              <ComboBox x:Name="cmbReferece_SRV" Loaded="cmbReferece_SRV_Loaded" Width="160" SelectionChanged="cmbReferece_SRV_SelectionChanged"
                                                      IsTextSearchEnabled="True" SelectedValue="{Binding Reference,  Mode=TwoWay}" >
              </ComboBox>
          </DataTemplate>
     </my:DataGridTemplateColumn.CellTemplate>
</my:DataGridTemplateColumn> 
```

所有组合框都有 Add new 作为其中的一项，其值为 -2。当用户单击添加新项时，将新项添加到数据库中，并且应该重新绑定到网格中的所有组合框。

下面是我的代码`SelectionChanged`

```
private void cmbReferece_SRV_SelectionChanged(object sender, SelectionChangedEventArgs e)
   {  ComboBox objComboBox = (ComboBox)sender;

      if (objComboBox.SelectedValue.ToString() == "<-- Add New -->")
      {
           //code for  saving new item entered by user to database

           if (IsSaved)
           {
               DataSet dsReference = (DataSet)GetFStdReference();

               CommonCalls.BindDropDownList(cmbReferece_SRV, dsReference.Tables[0], "Reference", "Reference");
           }

           objComboBox.SelectedValue = -1;

       }

   } 
```

这会将新项目仅绑定到所选行中的组合框。但我需要它绑定到所有组合框？我怎样才能做到这一点。我是 wpf 和绑定材料的新手 > 我该如何继续？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T10:31:04.860

你上面的代码有点混乱。你能解释更多你想做什么。我可以看到一些与正确的 WPF 编程实践的偏差，尤其是。关于在数据网格中使用组合框。

例如

1.  你为什么使用事件 like`cmbReferece_SRV_SelectionChanged`而不是使用`SelectedValue`and `SelectedValuePath`via `Converter`？
2.  还有你的是什么`ComboBox.ItemsSource`？数据表？对象列表？
3.  你为什么要在自己的事件中设置`ItemsSource`一个，这会适得其反。`ComboBox``SelectionChanged`

我了解您是 WPF 新手，所以如果您向我解释您的问题，我可以建议一些有用的 WPF 编码实践来解决您的问题。

# c++ - Qjson 处理返回的对象数组

> ID：12908728
> 
> 赞同：0
> 
> 时间：2012-10-16T06:28:00.737
> 
> 标签：c++, json, qt, qjson

我正在使用 Qjson 解析从 Web 服务返回的 json 对象。我一直在处理一系列复杂的对象。

在第一层，Web 服务返回一个由“error”、“id”和“return”组成的映射。如果没有错误，我可以使用

```
 nestedMap = m_jsonObject["result"].toMap();
 group = new Group();
 group->Caption = nestedMap["Caption"].toString();
 group->CollectionCount = nestedMap["CollectionCount"].toInt(); 
```

我什至可以使用

```
group->ModifiedOn = nestedMap["ModifiedOn"].toMap()["Value"].toDateTime(); 
```

我有一个名为“Elements”的对象，它由 29 个键值对组成。Web 服务正在返回这些“元素”的数组，我无法找到解析它的正确方法。在头文件中，元素的容器定义为

```
QList<GroupElement> Elements; 
```

线

```
group->Elements = nestedMap["Elements"].toList(); 
```

导致编译器抛出错误 'error: no match for 'operator=' in '((MyClass*)this)->MyClass::group->Group::Elements = QVariant::toMap() const()'

我想学习正确的语法来将此元素放入类中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T01:28:52.483

更新：我写了另一个函数来将 QVariantMap 对象转换为

首先：将 group-> Elements 对象更改为

```
class ParentClass{
    QList<SharedDataPointer<Address> > Elements;
    other class memmbers...           
}; 
```

第二：创建了将QMap对象转换为Address对象的方法

```
QSharedDataPointer<Address>
API_1_6::mapToAddress(QVariantMap o)
{
    QSharedDataPointer<Address> address (new Address());
    address-> FirstName = o["FirstName"].toString();
    address->LastName = o["LastName"].toString();
    address->CompanyName = o["CompanyName"].toString();
    address->Street = o["Street"].toString();
    address->Street2 = o["Street2"].toString();
    address->City = o["City"].toString();
    address->Zip = o["Zip"].toString();
    address-> State = o["State"].toString();
    address->Country = o["Country"].toString();
    address->Phone = o["Phone"].toString();
    address->Phone2 = o["Phone2"].toString();
    address-> Fax = o["Fax"].toString();
    address-> Url = o["Url"].toString();
    address->Email = o["Email"].toString();
    address->Other = o["Other"].toString();

    return address;
} 
```

第三：代码中使用foreach遍历列表，创建并存储新对象

```
// get the list of the elements
elementsList = nestedMap["Elements"].toList();
// Add the element, converted to the new type, to the Elements object of the'parent' class
foreach(QVariant qElement, elementsList){
    group-> Elements.append(mapToAddress(qElement))
} 
```

# google-chrome - chrome 扩展：在每个选项卡中打开一个具有不同帐户的网站

> ID：12908731
> 
> 赞同：2
> 
> 时间：2012-10-16T06:28:12.487
> 
> 标签：google-chrome, google-chrome-extension

我有几个网站帐户，目前我想编写一个扩展程序，我可以在 chrome 中同时打开所有帐户，每个选项卡用于一个帐户。

所以这意味着我希望每个标签都有一个单独的 cookie 系统，这可行吗？如果是这样，请建议我应该使用的 API，谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-10T00:02:03.423

转到 Chrome 偏好设置。有一个用户部分，您可以在其中添加用户。每个新用户都将拥有自己的 cookie 罐，因此您可以同时以多个不同的用户登录到一个站点。它会创建新的 chrome 窗口，但您似乎无法将选项卡拖到另一个用户的窗口上。

![在此处输入图像描述](../Images/19c6eb1d0555feba8716f5436b4f49d9.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T13:36:38.807

根据[Chrome 文档](http://developer.chrome.com/extensions/webRequest.html)`onBeforeSendHeaders`，您可以在事件处理程序中修改 HTTP 标头（包括 cookie） 。因此，您需要通过`onHeadersReceived`事件处理程序为每个帐户存储新的 cookie，然后将它们替换为传出请求中的每个选项卡。

甚至还有一个扩展，它似乎在做你想做的事情[——Chrome Cookie Switcher](https://github.com/hmarr/chrome-cookie-switcher)。

我还找到了一个可能对您的任务有帮助的答案：[将自定义用户代理关联到特定的 Google Chrome 页面/标签](https://stackoverflow.com/questions/10334909/associate-a-custom-user-agent-to-a-specific-google-chrome-page-tab)。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-22T13:16:33.380

我真的不认为 Chrome 允许扩展程序这样做。如果我没记错的话，扩展程序可以检查和阻止请求，但它们不能修改它们，例如动态更改每个选项卡的 cookie。

我建议你使用`--user-data-dir`Chrome 的命令行选项。它允许您保留几个单独的配置文件，每个配置文件都在自己的目录中，然后您只需要使用正确的选项启动 chrome：

```
# run this command to use the first profile
google-chrome --user-data-dir=/home/binchen/my_chrome_profiles/my_profile_1

# run this command to use the second profile
google-chrome --user-data-dir=/home/binchen/my_chrome_profiles/my_profile_2

... 
```

每个配置文件都将位于其自己的 Chrome 窗口中，具有自己的 cookie 存储，而不是自己的选项卡，但它比编写扩展程序更容易。

最后，如果您提到的网站是 Google，您可以同时打开多个 Google 帐户。

# java - 从进程中读取错误流

> ID：12908732
> 
> 赞同：7
> 
> 时间：2012-10-16T06:28:12.253
> 
> 标签：java, process, io, stream, java-io

我正在编写一个 java 程序来从进程中读取错误流。下面是我的代码结构——

```
ProcessBuilder probuilder = new ProcessBuilder( command );              
Process process = probuilder.start(); 
InputStream error = process.getErrorStream();
InputStreamReader isrerror = new InputStreamReader(error);
BufferedReader bre = new BufferedReader(isrerror);
while ((linee = bre.readLine()) != null) {
        System.out.println(linee);
    } 
```

如果实际上将任何内容写入被调用进程的错误流，则上述代码可以正常工作。但是，如果没有将任何内容写入错误流，则对 readLine 的调用实际上会无限期挂起。但是，我想让我的代码通用，以便它适用于所有场景。如何修改我的代码以实现相同的目标。

问候，开发

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T06:34:34.817

`readline()`是阻塞调用。它将阻塞，直到有一行要读取（由行尾字符终止）或底层流关闭（返回 EOF）。

如果您决定等待足够长的时间（或者想要做其他事情然后再次检查），您需要有正在检查`BufferedReader.ready()`或只是使用和救助的逻辑。`BufferedReader.read()`

**编辑添加**：话虽如此，它不应该“无限期地”按原样挂起；一旦调用的进程终止，它应该返回。有没有机会您调用的进程也输出一些东西到`stdout`？如果是这种情况......您也需要从中读取，否则缓冲区将填满并阻止外部进程，这将阻止它退出......导致您的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-10-07T15:11:27.873

这是一个迟到的回复，但问题并没有真正解决，它在一些搜索的第一页上。我有同样的问题，并且`BufferedReader.ready()`仍然会设置它会锁定的情况。

**如果您需要获取持久流，则以下解决方法将不起作用。但是，如果您只是在运行一个程序并等待它关闭，这应该没问题。**

我正在使用的解决方法是调用`ProcessBuilder.redirectError(File)`. 然后我会读取该文件并使用它向用户呈现错误流。它工作正常，没有锁定。我确实`Process.destroyForcibly()`在 Process.waitFor() 之后打电话，但这可能是不必要的。

下面的一些伪代码：

```
    文件 thisFile = new File("somefile.ext");
    ProcessBuilder pb = new ProcessBuilder(yourStringList);
    pb.redirectError(thisFile);
    进程 p = pb.start();
    p.waitFor();
    p.destroyForcely();
    ArrayList fileContents = getFileContents(thisFile);

```

我希望这至少对您的一些用例有所帮助。

# button - 设置边框半径时，按钮中会出现额外的线条

> ID：12908735
> 
> 赞同：1
> 
> 时间：2012-10-16T06:28:22.160
> 
> 标签：button, css

![在此处输入图像描述](../Images/110c4a0b584604532ad1ac118508d6b1.png)

```
-moz-border-bottom-colors: none;
-moz-border-left-colors: none;
-moz-border-right-colors: none;
-moz-border-top-colors: none;
border-color: -moz-use-text-color -moz-use-text-color orange;
border-image: none;
border-style: none none solid;
border-width: medium medium 4px; 
```

当我添加 4px 的边框半径时，

```
-moz-border-bottom-colors: none;
-moz-border-left-colors: none;
-moz-border-right-colors: none;
-moz-border-top-colors: none;
border-color: -moz-use-text-color -moz-use-text-color orange;
border-image: none;
border-radius: 4px 4px 4px 4px;
border-style: none none solid;
border-width: medium medium 4px; 
```

![在此处输入图像描述](../Images/751fd00be59e0df95910f321c1a26386.png)

按钮有一条细白线（左和右）。再次查看图像以注意到它。**如何删除这条线？**

浏览器：火狐16.0.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T17:18:58.463

我在 FF20 上遇到了类似的问题，但似乎只是我不小心放大了页面。将缩放重置为 0 删除了该线。

# java - 迭代列以查找具有最后一个非零值的列

> ID：12908737
> 
> 赞同：1
> 
> 时间：2012-10-16T06:28:34.423
> 
> 标签：java, excel, jdbc

我有如下表的努力表，

```
-----------------------------------------------------------
Pid WeekendDate Mon Tue Wed Thr Fri Sat Sun
----------------------------------------------
11 14.10.2012 4 4 5 1 0 0 0
11 07.10.2012 2 2 1 5 3 0 0
12 07.10.2012 2 2 0 0 0 0 0

在这里，WeekendDate 是“太阳”的日期（最后一列）

```

我需要在记录最后一个非零值时找到每个 Pid 的日期。所以我的结果应该是

```
Pid LastValueDate
11 11.10.2012
12 02.10.2012

11 -> 11.10.2012 是 Thr（值 1）
12 -> 02.10.2012 是星期二（值 2）

```

由于我的数据在 Excel 中，并且我正在使用 JDBC-ODBC 连接。我希望我们可以仅使用 SQL 来实现这一点。

我不完整的解决方案（需要找到*last_effort_day*）：

```
选择 pid
      ,max(WeekendDate) - (6- *last_effort_day* ) AS end_date
 来自努力表
按 pid 分组

```

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T07:18:47.057

```
SELECT PID, 
       Dateadd(DAY, -1 * ( CASE 
                             WHEN SUN != 0 THEN 0 
                             WHEN SAT != 0 THEN 1 
                             WHEN FRI != 0 THEN 2 
                             WHEN THR != 0 THEN 3 
                             WHEN WED != 0 THEN 4 
                             WHEN TUE != 0 THEN 5 
                             ELSE 6 
                           END ), WEEKENDDATE) AS end_date 
FROM   EFFORT_SHEET 
GROUP  BY PID 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T07:21:17.123

我将开始使用这个联合查询，它更容易操作：

```
 Select Pid, WeekendDate-6 As WeekDate, Mon As Num
 From effort_sheet
 Union
 Select Pid, WeekendDate-5 As WeekDate, Tue As Num
 From effort_sheet
 Union
 Select Pid, WeekendDate-4 As WeekDate, Wed As Num
 From effort_sheet 
```

以此类推，一周中的每一天。然后您可以按查询使用组：

```
 Select Pid, Max(WeekDate)
 From (the union select above)
 Where Num>0
 Group By Pid 
```

这是标准 SQL，应该适用于任何 DBMS。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T07:39:24.327

```
SELECT Pid, MAX(WeekendDate) - (8 - MIN(CHARINDEX('0', CAST(Mon AS nvarchar(10)
                                                       + CAST(Tue AS nvarchar(10))
                                                       + CAST(Wed AS nvarchar(10))
                                                       + CAST(Thr AS nvarchar(10))
                                                       + CAST(Fri AS nvarchar(10))
                                                       + CAST(Sat AS nvarchar(10))
                                                       + CAST(Sun AS nvarchar(10))))) AS last_effort_day
FROM effort_sheet
GROUP BY pid 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-16T10:42:41.203

```
Try this 
select es.p_id,es.weekenddate-( CASE 
                             WHEN SUN != 0 THEN 0 
                             WHEN SAT != 0 THEN 1 
                             WHEN FRI != 0 THEN 2 
                             WHEN THR != 0 THEN 3 
                             WHEN WED != 0 THEN 4 
                             WHEN TUE != 0 THEN 5 
                             ELSE 6 
                           END )  from(
select p_id,max(weekenddate)dt from effort_sheet group by p_id
  )inner,effort_sheet es
where inner.p_id =es.p_id
AND inner.dt=es.weekenddate; 
```

[sqlfiddle 链接](http://www.sqlfiddle.com/#!4/6ee7d/8)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-16T07:22:38.747

试试这个：

```
select pid, max(case
when mon = 0 then weekenddate - 7
when mon != 0 and tue = 0 then weekenddate - 6
when tue != 0 and wed = 0 then weekenddate - 5
when wed != 0 and thr = 0 then weekenddate - 4
when thr != 0 and fri = 0 then weekenddate - 3
when fri != 0 and sat = 0 then weekenddate - 2
when sat != 0 and sun = 0 then weekenddate -1 end)
from effort_sheet
group by pid 
```

# cordova - PhoneGap 原生应用程序问题

> ID：12908738
> 
> 赞同：2
> 
> 时间：2012-10-16T06:28:35.207
> 
> 标签：cordova, android-2.2-froyo

我试图在dreamweaver cs5.5中的phonegap的帮助下制作一个本机应用程序，但是通过点击“构建和模拟> Android”，我的模拟器正在给出

> 错误：尝试在“devicerready”之前调用cordova.exec()。忽略。

任何人都可以建议我正确的方法或指出我的代码中的错误以供参考，代码在这里[jsfiddle](http://jsfiddle.net/pYPaF/)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T06:39:56.033

有时出现此错误可能意味着您在 Android 应用程序中使用的是 iOS 版本。

确保您使用的是适当版本的**phonegap-1.7.0.js（或 cordova-1.x.0.js）。**

每个平台使用不同版本的文件。

# java - JPA 在子查询中的位置

> ID：12908742
> 
> 赞同：0
> 
> 时间：2012-10-16T06:28:58.327
> 
> 标签：java, jpa

```
 public class Emp {
      Integer eid;
      String ename;
      long sal;
      Dept dept;    
    }

    public class Dept {
      Integer deptid;
      String deptname;
    }

     (List<Emp>) em.createQuery("select e from Emp e where e.sal=(select em.sal from Emp where em.eid=:a "))
                     .setParameter("a",empid)
                     .getResultList(); 
```

我想通过传递 emp id 来获取所有匹配的 Emp 列表。在Jpa有可能吗？请帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T06:34:24.723

是的，有可能。你可以试试这个；

```
 select e1 from Emp e1,Emp e2 where e1.sal = e2.sal and e2.eid =: a; 
```

# php - 如何获取数组特定索引的唯一值？

> ID：12908743
> 
> 赞同：0
> 
> 时间：2012-10-16T06:28:57.093
> 
> 标签：php, arrays

这是我的示例数组

```
 Array
(
    [0] => Array
        (
            [size] => 7.5 D(M) US
            [price] => $49.99
            [color] => Black Grey
        )

    [1] => Array
        (
            [size] => 8 D(M) US
            [price] => $46.90
            [color] => Black
        )

    [2] => Array
        (
            [size] => 8 4E US
            [price] => $49.99
            [color] => Black/Metallic Dark Grey/Black
        )

    [3] => Array
        (
            [size] => 8.5 D(M) US
            [price] => $46.90
            [color] => Black Grey
        )

    [4] => Array
        (
            [size] => 8.5 4E US
            [price] => $49.99
            [color] => BLACK/MTLC DARK GREY/BLACK
        )

    [5] => Array
        (
            [size] => 9 D(M) US
            [price] => $49.99
            [color] => Black
        )

    [6] => Array
        (
            [size] => 9 4E US
            [price] => $49.99
            [color] => Black/Metallic Dark Grey/Black
        )

    [7] => Array
        (
            [size] => 9.5 D(M) US
            [price] => $49.99
            [color] => Black Grey
        )

    [8] => Array
        (
            [size] => 9.5 4E US
            [price] => $49.99
            [color] => Black/Metallic Dark Grey/Black
        )

    [9] => Array
        (
            [size] => 10 D(M) US
            [price] => $49.99
            [color] => Black
        )

    [10] => Array
        (
            [size] => 10 4E US
            [price] => $49.99
            [color] => Black/Metallic Dark Grey/Black
        )

    [11] => Array
        (
            [size] => 10.5 D(M) US
            [price] => $49.99
            [color] => Black Grey
        )

    [12] => Array
        (
            [size] => 10.5 4E US
            [price] => $49.99
            [color] => BLACK/MTLC DARK GREY/BLACK
        )

    [13] => Array
        (
            [size] => 11 D(M) US
            [price] => $54.90
            [color] => Black
        )

    [14] => Array
        (
            [size] => 11 D(M) US
            [price] => $57.99
            [color] => Black/Metallic Dark Grey/Black
        )

    [15] => Array
        (
            [size] => 11 4E US
            [price] => $49.99
            [color] => Black/Metallic Dark Grey/Black
        )

    [16] => Array
        (
            [size] => 11.5 D(M) US
            [price] => $47.84
            [color] => Black Grey
        )

    [17] => Array
        (
            [size] => 12 D(M) US
            [price] => $50.90
            [color] => Black
        )

    [18] => Array
        (
            [size] => 12 4E US
            [price] => $75.00
            [color] => Black/Metallic Dark Grey/Black
        )

    [19] => Array
        (
            [size] => 13 D(M) US
            [price] => $58.59
            [color] => Black
        )

    [20] => Array
        (
            [size] => 13 4E US
            [price] => $49.99
            [color] => Black/Metallic Dark Grey/Black
        )

    [21] => Array
        (
            [size] => 14 D(M) US
            [price] => $54.99
            [color] => Black
        )

    [22] => Array
        (
            [size] => 14 4E US
            [price] => $49.99
            [color] => Black/Metallic Dark Grey/Black
        )

    [23] => Array
        (
            [size] => 15 D(M) US
            [price] => $54.99
            [color] => Black
        )

) 
```

而我想要发生的事情是，只获得唯一的价值`"color"`

```
echo '<select>';
    foreach($store as $item){
        echo '<option>'.$item['color'].'</option>';
    }
    echo '</select>'; 
```

这是我想展示的..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T06:37:10.917

```
<?php
$items = Array
(
    Array
    (
        'size' => '7.5 D(M) US',
        'price' => '$49.99',
        'color' => 'Black Grey',
    ),
    Array
    (
        'size' => '8 D(M) US',
        'price' => '$46.90',
        'color' => 'Black'
    )
);

$colors = array();
foreach ($items as $item) {
    $colors[] = $item['color'];
}
$colors = array_unique($colors);
var_dump($colors); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T06:40:33.490

我知道它不是最好的，但你可以使用它。通过这样做，您可以避免多个循环。

```
echo '<select>';
$arr = array()
foreach($store as $item){ 
    if(!in_array($item['color'],$arr)){
       echo '<option>'.$item['color'].'</option>';
    }
    array_push($arr, $item['color']);
}
echo '</select>'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T06:45:24.453

试试这个

```
$unique_colors = array_reduce(
  $your_arr, 
  function($res, $elem) { 
    if (!in_array($elem['color'], $res)) {
      $res[] = $elem['color'];
    }
    return $res; 
  }, 
  array()
); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-16T06:46:56.447

尝试使用这个小解决方案：

```
$Row = Array
(
    [0] => Array
        (
            [size] => 7.5 D(M) US
            [price] => $49.99
            [color] => Black Grey
        )

    [1] => Array
        (
            [size] => 8 D(M) US
            [price] => $46.90
            [color] => Black
        )
);
$color = array();
foreach ($Row as $key => $value) {
    $Color = $value['color'];
    if(!in_array($Color, $color)) $color[] = $Color;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-16T06:40:32.850

我做了一个简单的例子

```
$color=array();
$color2=array();
 foreach($store as $item){
        array_push($color,$item['color']);
    }

    $color2=array_unique($color);
    echo '<select>';
    foreach($color2 as $col){
        echo '<option>'.$col.'</option>';
    }
    echo '</select>';

?> 
```

# c# - 找出用户无法更改 ldap 的密码值

> ID：12908745
> 
> 赞同：0
> 
> 时间：2012-10-16T06:28:58.500
> 
> 标签：c#, openldap

我试图找出在广告中，用户是否允许更改密码。我已经使用 SearchResponse 来确定该用户是否存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-06T07:43:31.210

SearchResponse 响应 = (SearchResponse)connection.SendRequest(request); DirectoryAttribute 属性 = response.Entries[0].Attributes["ntSecurityDescriptor"];

```
 if (attribute != null)
            {
                const string PASSWORD_GUID = "{ab721a53-1e2f-11d0-9819-00aa0040529b}";
                const int ADS_ACETYPE_ACCESS_DENIED_OBJECT = 6;
                bool fEveryone = false;
                bool fSelf = false;

                ActiveDs.ADsSecurityUtility secUtility = new ActiveDs.ADsSecurityUtility();
                ActiveDs.IADsSecurityDescriptor sd = (IADsSecurityDescriptor)secUtility.ConvertSecurityDescriptor((byte[])attribute[0], (int)ADS_SD_FORMAT_ENUM.ADS_SD_FORMAT_RAW, (int)ADS_SD_FORMAT_ENUM.ADS_SD_FORMAT_IID);
                ActiveDs.IADsAccessControlList acl = (ActiveDs.IADsAccessControlList)sd.DiscretionaryAcl;

                foreach (ActiveDs.IADsAccessControlEntry ace in acl)
                {
                    if ((ace.ObjectType != null) && (ace.ObjectType.ToUpper() == PASSWORD_GUID.ToUpper()))
                    {
                        if ((ace.Trustee == "Everyone") && (ace.AceType == ADS_ACETYPE_ACCESS_DENIED_OBJECT))
                        {
                            fEveryone = true;
                        }
                        if ((ace.Trustee == @"NT AUTHORITY\SELF") && (ace.AceType == ADS_ACETYPE_ACCESS_DENIED_OBJECT))
                        {
                            fSelf = true;
                        }

                        break;
                    }
                }

                if (fEveryone || fSelf)
                {
                    return Global.RequestContants.CANT_CHANGE_PASSWORD;
                }
                else
                {
                    return string.Empty;
                }
            } 
```

# wsdl - WSDL2Java 失败。需要帮助调试 WSDL

> ID：12908752
> 
> 赞同：0
> 
> 时间：2012-10-16T06:29:34.287
> 
> 标签：wsdl, axis, wsdl2java

我们正在升级我们的 web 服务以使用 JAX-WS 2.1。我们当前的 web 服务是 java-first 生成的，并使用 Axis1 自动生成 WSDL。

现在我们有了这个自动生成的 WSDL，需要从中生成符合 JAX-WS 的 java 代码。

我使用来自 Axis2 的 Wsdl2java，它应该可以正常工作，但是当我尝试在我们的 WSDL 上运行它时，我得到了多个错误，表明生成的 WSDL 格式不是很好。

Beeing 对 WSDL 和 xml 命名空间不太熟悉，我发现很难调试。有人可以帮我一下吗？

目前我遇到了这个错误：

```
"[INFO] org.apache.axis2.wsdl.codegen.CodeGenerationException: org.apache.axis2.wsdl.databinding.UnmatchedTypeException: No type was mapped to the name AdbRuleException with namespace http://exception.common.adb.mycompany.com" 
```

如果有人知道我可以从哪里开始，那么我会很高兴！谢谢！:)

这是 XML：

```
<?xml version="1.0" encoding="UTF-8"?>
<wsdl:definitions 
    xmlns:apachesoap="http://xml.apache.org/xml-soap"
    xmlns:impl="http://webservice.adb.mycompany.com"  
    xmlns:intf="http://webservice.adb.mycompany.com" 
    xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/" 
    xmlns:tns1="http://exception.common.adb.mycompany.com" 
    xmlns:tns2="http://exception.xml.adb.mycompany.com" 
    xmlns:tns3="http://sax.xml.org" xmlns:tns4="http://lang.java" 
    xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" 
    xmlns:wsdlsoap="http://schemas.xmlsoap.org/wsdl/soap/" 
    xmlns:xsd="http://www.w3.org/2001/XMLSchema" 
    targetNamespace="http://webservice.adb.mycompany.com">
<!--WSDL created by Apache Axis version: 1.3
    Built on Oct 05, 2005 (05:23:37 EDT)-->
<wsdl:types>
    <schema xmlns="http://www.w3.org/2001/XMLSchema" targetNamespace="http://webservice.adb.mycompany.com">
        <import namespace="http://exception.common.adb.mycompany.com"/>
        <import namespace="http://lang.java"/>
        <import namespace="http://xml.apache.org/xml-soap"/>
        <import namespace="http://exception.xml.adb.mycompany.com"/>
        <import namespace="http://sax.xml.org"/>
        <import namespace="http://schemas.xmlsoap.org/soap/encoding/"/>
        <complexType name="AdConnexionException">
            <sequence/>
        </complexType>
        <complexType name="ArrayOf_soapenc_string">
            <complexContent>
                <restriction base="soapenc:Array">
                    <attribute ref="soapenc:arrayType" wsdl:arrayType="soapenc:string[]"/>
                </restriction>
            </complexContent>
        </complexType>
    </schema>
    <schema xmlns="http://www.w3.org/2001/XMLSchema" targetNamespace="http://xml.apache.org/xml-soap">
        <import namespace="http://webservice.adb.mycompany.com"/>
        <import namespace="http://exception.common.adb.mycompany.com"/>
        <import namespace="http://lang.java"/>
        <import namespace="http://exception.xml.adb.mycompany.com"/>
        <import namespace="http://sax.xml.org"/>
        <import namespace="http://schemas.xmlsoap.org/soap/encoding/"/>
        <complexType name="mapItem">
            <sequence>
                <element name="key" nillable="true" type="xsd:anyType"/>
                <element name="value" nillable="true" type="xsd:anyType"/>
            </sequence>
        </complexType>
        <complexType name="Map">
            <sequence>
                <element maxOccurs="unbounded" minOccurs="0" name="item" type="apachesoap:mapItem"/>
            </sequence>
        </complexType>
    </schema>
    <schema xmlns="http://www.w3.org/2001/XMLSchema" targetNamespace="http://exception.common.adb.mycompany.com">
        <import namespace="http://webservice.adb.mycompany.com"/>
        <import namespace="http://lang.java"/>
        <import namespace="http://xml.apache.org/xml-soap"/>
        <import namespace="http://exception.xml.adb.mycompany.com"/>
        <import namespace="http://sax.xml.org"/>
        <import namespace="http://schemas.xmlsoap.org/soap/encoding/"/>
        <complexType name="AdbRuleException">
            <sequence>
                <element name="errorKey" nillable="true" type="soapenc:int"/>
                <element name="errorMessage" nillable="true" type="soapenc:string"/>
                <element name="exceptionKeyMap" nillable="true" type="apachesoap:Map"/>
            </sequence>
        </complexType>
    </schema>
    <schema xmlns="http://www.w3.org/2001/XMLSchema" targetNamespace="http://sax.xml.org">
        <import namespace="http://webservice.adb.mycompany.com"/>
        <import namespace="http://exception.common.adb.mycompany.com"/>
        <import namespace="http://lang.java"/>
        <import namespace="http://xml.apache.org/xml-soap"/>
        <import namespace="http://exception.xml.adb.mycompany.com"/>
        <import namespace="http://schemas.xmlsoap.org/soap/encoding/"/>
        <complexType name="SAXException">
            <sequence>
                <element name="cause" nillable="true" type="xsd:anyType"/>
                <element name="exception" nillable="true" type="xsd:anyType"/>
                <element name="message" nillable="true" type="soapenc:string"/>
            </sequence>
        </complexType>
    </schema>
    <schema xmlns="http://www.w3.org/2001/XMLSchema" targetNamespace="http://exception.xml.adb.mycompany.com">
        <import namespace="http://webservice.adb.mycompany.com"/>
        <import namespace="http://exception.common.adb.mycompany.com"/>
        <import namespace="http://lang.java"/>
        <import namespace="http://xml.apache.org/xml-soap"/>
        <import namespace="http://sax.xml.org"/>
        <import namespace="http://schemas.xmlsoap.org/soap/encoding/"/>
        <complexType name="AdConnexionRuleException">
            <complexContent>
                <extension base="tns3:SAXException">
                    <sequence/>
                </extension>
            </complexContent>
        </complexType>
    </schema>
</wsdl:types>

<wsdl:message name="getDeadlineExceptionsByMarketIdResponse">
   <wsdl:part name="getDeadlineExceptionsByMarketIdReturn" type="soapenc:string"/>
</wsdl:message>
<wsdl:message name="getDeadlinesResponse">
    <wsdl:part name="getDeadlinesReturn" type="soapenc:string"/>
</wsdl:message>
<wsdl:message name="getOrderStatusResponse">
    <wsdl:part name="getOrderStatusReturn" type="soapenc:string"/>
</wsdl:message>
<wsdl:message name="getStatusResponse">
    <wsdl:part name="getStatusReturn" type="soapenc:string"/>
</wsdl:message>
<wsdl:message name="AdbRuleException">
    <wsdl:part name="fault" element="tns1:AdbRuleException"/>
</wsdl:message>
<wsdl:message name="requestResponse">
    <wsdl:part name="requestReturn" type="soapenc:string"/>
</wsdl:message>
<wsdl:message name="getDeadlinesByMarketIdResponse">
    <wsdl:part name="getDeadlinesByMarketIdReturn" type="soapenc:string"/>
</wsdl:message>
<wsdl:message name="cancelOrderRequest">
    <wsdl:part name="in0" type="soapenc:int"/>
</wsdl:message>
<wsdl:message name="AdConnexionException">
    <wsdl:part name="fault" element="impl:AdConnexionException"/>
</wsdl:message>
<wsdl:message name="getDeadlinesByMarketIdRequest">
    <wsdl:part name="in0" type="soapenc:int"/>
</wsdl:message>
<wsdl:message name="getProductsByMarketIdRequest">
    <wsdl:part name="in0" type="soapenc:string"/>
</wsdl:message>
<wsdl:message name="getPackageInfoRequest">
    <wsdl:part name="in0" type="soapenc:string"/>
    <wsdl:part name="in1" type="soapenc:string"/>
</wsdl:message>
<wsdl:message name="cancelOrderResponse">
    <wsdl:part name="cancelOrderReturn" type="xsd:boolean"/>
</wsdl:message>
<wsdl:message name="getDeadlinesRequest">
    <wsdl:part name="in0" type="soapenc:int"/>
</wsdl:message>
<wsdl:message name="getRealEstatePlacementsResponse">
    <wsdl:part name="getRealEstatePlacementsReturn" type="soapenc:string"/>
</wsdl:message>
<wsdl:message name="getStatusRequest">
    <wsdl:part name="in0" type="soapenc:string"/>
    <wsdl:part name="in1" type="soapenc:string"/>
</wsdl:message>
<wsdl:message name="getRealEstatePlacementsRequest">
    <wsdl:part name="in0" type="soapenc:string"/>
</wsdl:message>
<wsdl:message name="helloWorldResponse">
    <wsdl:part name="helloWorldReturn" type="soapenc:string"/>
</wsdl:message>
<wsdl:message name="getOrderStatusRequest">
    <wsdl:part name="in0" type="soapenc:int"/>
</wsdl:message>
<wsdl:message name="getProductsByMarketIdResponse">
    <wsdl:part name="getProductsByMarketIdReturn" type="soapenc:string"/>
</wsdl:message>
<wsdl:message name="getPlacementsResponse">
    <wsdl:part name="getPlacementsReturn" type="soapenc:string"/>
</wsdl:message>
<wsdl:message name="AdConnexionRuleException">
    <wsdl:part name="fault" element="tns2:AdConnexionRuleException"/>
</wsdl:message>
<wsdl:message name="helloWorldRequest">
</wsdl:message>
<wsdl:message name="getDeadlineExceptionsByMarketIdRequest">
    <wsdl:part name="in0" type="soapenc:int"/>
</wsdl:message>
<wsdl:message name="requestRequest">
    <wsdl:part name="in0" type="soapenc:string"/>
</wsdl:message>
<wsdl:message name="getPlacementsRequest">
    <wsdl:part name="in0" type="soapenc:string"/>
    <wsdl:part name="in1" type="impl:ArrayOf_soapenc_string"/>
</wsdl:message>
<wsdl:message name="getPackageInfoResponse">
    <wsdl:part name="getPackageInfoReturn" type="soapenc:string"/>
</wsdl:message>

<wsdl:portType name="AdConnexionService">
    <wsdl:operation name="getPackageInfo" parameterOrder="in0 in1">
        <wsdl:input message="impl:getPackageInfoRequest" name="getPackageInfoRequest"/>
        <wsdl:output message="impl:getPackageInfoResponse" name="getPackageInfoResponse"/>
        <wsdl:fault message="impl:AdConnexionException" name="AdConnexionException"/>
    </wsdl:operation>
    <wsdl:operation name="request" parameterOrder="in0">
        <wsdl:input message="impl:requestRequest" name="requestRequest"/>
        <wsdl:output message="impl:requestResponse" name="requestResponse"/>
        <wsdl:fault message="impl:AdConnexionException" name="AdConnexionException"/>
    </wsdl:operation>
    <wsdl:operation name="helloWorld">
        <wsdl:input message="impl:helloWorldRequest" name="helloWorldRequest"/>
        <wsdl:output message="impl:helloWorldResponse" name="helloWorldResponse"/>
    </wsdl:operation>
    <wsdl:operation name="getRealEstatePlacements" parameterOrder="in0">
        <wsdl:input message="impl:getRealEstatePlacementsRequest" name="getRealEstatePlacementsRequest"/>
        <wsdl:output message="impl:getRealEstatePlacementsResponse" name="getRealEstatePlacementsResponse"/>
        <wsdl:fault message="impl:AdConnexionException" name="AdConnexionException"/>
    </wsdl:operation>
    <wsdl:operation name="getPlacements" parameterOrder="in0 in1">
        <wsdl:input message="impl:getPlacementsRequest" name="getPlacementsRequest"/>
        <wsdl:output message="impl:getPlacementsResponse" name="getPlacementsResponse"/>
        <wsdl:fault message="impl:AdConnexionException" name="AdConnexionException"/>
    </wsdl:operation>
    <wsdl:operation name="getProductsByMarketId" parameterOrder="in0">
        <wsdl:input message="impl:getProductsByMarketIdRequest" name="getProductsByMarketIdRequest"/>
        <wsdl:output message="impl:getProductsByMarketIdResponse" name="getProductsByMarketIdResponse"/>
        <wsdl:fault message="impl:AdConnexionException" name="AdConnexionException"/>
    </wsdl:operation>
    <wsdl:operation name="getStatus" parameterOrder="in0 in1">
        <wsdl:input message="impl:getStatusRequest" name="getStatusRequest"/>
        <wsdl:output message="impl:getStatusResponse" name="getStatusResponse"/>
        <wsdl:fault message="impl:AdConnexionException" name="AdConnexionException"/>
    </wsdl:operation>
    <wsdl:operation name="getDeadlines" parameterOrder="in0">
        <wsdl:input message="impl:getDeadlinesRequest" name="getDeadlinesRequest"/>
        <wsdl:output message="impl:getDeadlinesResponse" name="getDeadlinesResponse"/>
        <wsdl:fault message="impl:AdConnexionException" name="AdConnexionException"/>
    </wsdl:operation>
    <wsdl:operation name="getOrderStatus" parameterOrder="in0">
        <wsdl:input message="impl:getOrderStatusRequest" name="getOrderStatusRequest"/>
        <wsdl:output message="impl:getOrderStatusResponse" name="getOrderStatusResponse"/>
        <wsdl:fault message="impl:AdConnexionException" name="AdConnexionException"/>
    </wsdl:operation>
    <wsdl:operation name="cancelOrder" parameterOrder="in0">
        <wsdl:input message="impl:cancelOrderRequest" name="cancelOrderRequest"/>
        <wsdl:output message="impl:cancelOrderResponse" name="cancelOrderResponse"/>
        <wsdl:fault message="impl:AdbRuleException" name="AdbRuleException"/>
        <wsdl:fault message="impl:AdConnexionException" name="AdConnexionException"/>
        <wsdl:fault message="impl:AdConnexionRuleException" name="AdConnexionRuleException"/>
    </wsdl:operation>
    <wsdl:operation name="getDeadlinesByMarketId" parameterOrder="in0">
        <wsdl:input message="impl:getDeadlinesByMarketIdRequest" name="getDeadlinesByMarketIdRequest"/>
        <wsdl:output message="impl:getDeadlinesByMarketIdResponse" name="getDeadlinesByMarketIdResponse"/>
        <wsdl:fault message="impl:AdConnexionException" name="AdConnexionException"/>
    </wsdl:operation>
    <wsdl:operation name="getDeadlineExceptionsByMarketId" parameterOrder="in0">
        <wsdl:input message="impl:getDeadlineExceptionsByMarketIdRequest" name="getDeadlineExceptionsByMarketIdRequest"/>
        <wsdl:output message="impl:getDeadlineExceptionsByMarketIdResponse" name="getDeadlineExceptionsByMarketIdResponse"/>
        <wsdl:fault message="impl:AdConnexionException" name="AdConnexionException"/>
    </wsdl:operation>
</wsdl:portType>

<wsdl:binding name="AdConnexionServiceSoapBinding" type="impl:AdConnexionService">
    <wsdlsoap:binding style="rpc" transport="http://schemas.xmlsoap.org/soap/http"/>
    <wsdl:operation name="getPackageInfo">
        <wsdlsoap:operation soapAction=""/>
        <wsdl:input name="getPackageInfoRequest">
            <wsdlsoap:body encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" namespace="http://webservice.adb.mycompany.com" use="encoded"/>
        </wsdl:input>
        <wsdl:output name="getPackageInfoResponse">
            <wsdlsoap:body encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" namespace="http://webservice.adb.mycompany.com" use="encoded"/>
        </wsdl:output>
        <wsdl:fault name="AdConnexionException">
            <wsdlsoap:fault encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" name="AdConnexionException" namespace="http://webservice.adb.mycompany.com" use="encoded"/>
        </wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="request">
        <wsdlsoap:operation soapAction=""/>
        <wsdl:input name="requestRequest">
            <wsdlsoap:body encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" namespace="http://webservice.adb.mycompany.com" use="encoded"/>
        </wsdl:input>
        <wsdl:output name="requestResponse">
            <wsdlsoap:body encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" namespace="http://webservice.adb.mycompany.com" use="encoded"/>
        </wsdl:output>
        <wsdl:fault name="AdConnexionException">
            <wsdlsoap:fault encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" name="AdConnexionException" namespace="http://webservice.adb.mycompany.com" use="encoded"/>
        </wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="helloWorld">
        <wsdlsoap:operation soapAction=""/>
        <wsdl:input name="helloWorldRequest">
            <wsdlsoap:body encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" namespace="http://webservice.adb.mycompany.com" use="encoded"/>
        </wsdl:input>
        <wsdl:output name="helloWorldResponse">
            <wsdlsoap:body encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" namespace="http://webservice.adb.mycompany.com" use="encoded"/>
        </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="getRealEstatePlacements">
        <wsdlsoap:operation soapAction=""/>
        <wsdl:input name="getRealEstatePlacementsRequest">
            <wsdlsoap:body encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" namespace="http://webservice.adb.mycompany.com" use="encoded"/>
        </wsdl:input>
        <wsdl:output name="getRealEstatePlacementsResponse">
            <wsdlsoap:body encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" namespace="http://webservice.adb.mycompany.com" use="encoded"/>
        </wsdl:output>
        <wsdl:fault name="AdConnexionException">
            <wsdlsoap:fault encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" name="AdConnexionException" namespace="http://webservice.adb.mycompany.com" use="encoded"/>
        </wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="getPlacements">
        <wsdlsoap:operation soapAction=""/>
        <wsdl:input name="getPlacementsRequest">
            <wsdlsoap:body encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" namespace="http://webservice.adb.mycompany.com" use="encoded"/>
        </wsdl:input>
        <wsdl:output name="getPlacementsResponse">
            <wsdlsoap:body encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" namespace="http://webservice.adb.mycompany.com" use="encoded"/>
        </wsdl:output>
        <wsdl:fault name="AdConnexionException">
            <wsdlsoap:fault encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" name="AdConnexionException" namespace="http://webservice.adb.mycompany.com" use="encoded"/>
        </wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="getProductsByMarketId">
        <wsdlsoap:operation soapAction=""/>
        <wsdl:input name="getProductsByMarketIdRequest">
            <wsdlsoap:body encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" namespace="http://webservice.adb.mycompany.com" use="encoded"/>
        </wsdl:input>
        <wsdl:output name="getProductsByMarketIdResponse">
            <wsdlsoap:body encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" namespace="http://webservice.adb.mycompany.com" use="encoded"/>
        </wsdl:output>
        <wsdl:fault name="AdConnexionException">
            <wsdlsoap:fault encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" name="AdConnexionException" namespace="http://webservice.adb.mycompany.com" use="encoded"/>
        </wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="getStatus">
        <wsdlsoap:operation soapAction=""/>
        <wsdl:input name="getStatusRequest">
            <wsdlsoap:body encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" namespace="http://webservice.adb.mycompany.com" use="encoded"/>
        </wsdl:input>
        <wsdl:output name="getStatusResponse">
            <wsdlsoap:body encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" namespace="http://webservice.adb.mycompany.com" use="encoded"/>
        </wsdl:output>
        <wsdl:fault name="AdConnexionException">
            <wsdlsoap:fault encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" name="AdConnexionException" namespace="http://webservice.adb.mycompany.com" use="encoded"/>
        </wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="getDeadlines">
        <wsdlsoap:operation soapAction=""/>
        <wsdl:input name="getDeadlinesRequest">
            <wsdlsoap:body encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" namespace="http://webservice.adb.mycompany.com" use="encoded"/>
        </wsdl:input>
        <wsdl:output name="getDeadlinesResponse">
            <wsdlsoap:body encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" namespace="http://webservice.adb.mycompany.com" use="encoded"/>
        </wsdl:output>
        <wsdl:fault name="AdConnexionException">
            <wsdlsoap:fault encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" name="AdConnexionException" namespace="http://webservice.adb.mycompany.com" use="encoded"/>
        </wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="getOrderStatus">
        <wsdlsoap:operation soapAction=""/>
        <wsdl:input name="getOrderStatusRequest">
            <wsdlsoap:body encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" namespace="http://webservice.adb.mycompany.com" use="encoded"/>
        </wsdl:input>
        <wsdl:output name="getOrderStatusResponse">
            <wsdlsoap:body encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" namespace="http://webservice.adb.mycompany.com" use="encoded"/>
        </wsdl:output>
        <wsdl:fault name="AdConnexionException">
            <wsdlsoap:fault encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" name="AdConnexionException" namespace="http://webservice.adb.mycompany.com" use="encoded"/>
        </wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="cancelOrder">
        <wsdlsoap:operation soapAction=""/>
        <wsdl:input name="cancelOrderRequest">
            <wsdlsoap:body encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" namespace="http://webservice.adb.mycompany.com" use="encoded"/>
        </wsdl:input>
        <wsdl:output name="cancelOrderResponse">
            <wsdlsoap:body encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" namespace="http://webservice.adb.mycompany.com" use="encoded"/>
        </wsdl:output>
        <wsdl:fault name="AdbRuleException">
            <wsdlsoap:fault encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" name="AdbRuleException" namespace="http://webservice.adb.mycompany.com" use="encoded"/>
        </wsdl:fault>
        <wsdl:fault name="AdConnexionException">
            <wsdlsoap:fault encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" name="AdConnexionException" namespace="http://webservice.adb.mycompany.com" use="encoded"/>
        </wsdl:fault>
        <wsdl:fault name="AdConnexionRuleException">
            <wsdlsoap:fault encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" name="AdConnexionRuleException" namespace="http://webservice.adb.mycompany.com" use="encoded"/>
        </wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="getDeadlinesByMarketId">
        <wsdlsoap:operation soapAction=""/>
        <wsdl:input name="getDeadlinesByMarketIdRequest">
            <wsdlsoap:body encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" namespace="http://webservice.adb.mycompany.com" use="encoded"/>
        </wsdl:input>
        <wsdl:output name="getDeadlinesByMarketIdResponse">
            <wsdlsoap:body encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" namespace="http://webservice.adb.mycompany.com" use="encoded"/>
        </wsdl:output>
        <wsdl:fault name="AdConnexionException">
            <wsdlsoap:fault encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" name="AdConnexionException" namespace="http://webservice.adb.mycompany.com" use="encoded"/>
        </wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="getDeadlineExceptionsByMarketId">
        <wsdlsoap:operation soapAction=""/>
        <wsdl:input name="getDeadlineExceptionsByMarketIdRequest">
            <wsdlsoap:body encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" namespace="http://webservice.adb.mycompany.com" use="encoded"/>
        </wsdl:input>
        <wsdl:output name="getDeadlineExceptionsByMarketIdResponse">
            <wsdlsoap:body encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" namespace="http://webservice.adb.mycompany.com" use="encoded"/>
        </wsdl:output>
        <wsdl:fault name="AdConnexionException">
            <wsdlsoap:fault encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" name="AdConnexionException" namespace="http://webservice.adb.mycompany.com" use="encoded"/>
        </wsdl:fault>
    </wsdl:operation>
</wsdl:binding>

<wsdl:service name="AdConnexionServiceService">
    <wsdl:port binding="impl:AdConnexionServiceSoapBinding" name="AdConnexionService">
        <wsdlsoap:address location="http://adb.mycompany.com/adbXmlService/webservice/AdConnexionService"/>
    </wsdl:port>
 </wsdl:service>
</wsdl:definitions> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T10:00:29.397

因此，`use="encoded"`您应该坚持使用[Axis 1.4](http://axis.apache.org/axis/)（或其他符合 JAX-RPC 的实现）。Axis2（以及 CXF 和 JAX-WS-RI）不支持 rpc/encoded 样式的 Web 服务。

# php - 如何使用常规 exp 从段落中选择电话号码

> ID：12908754
> 
> 赞同：3
> 
> 时间：2012-10-16T06:29:43.370
> 
> 标签：php, regex, preg-match

我想从一段中选择电话号码。但是电话号码的格式是

```
123-456-7890
123.456.7890
123*456*7890
(202) 553-6381
123_456_7890
1234567890
1.2.3.4.5.6.7.8.9.0
1*2*3*4*5*6*7*8*9*0
954 665 53 92 
456 7890 x123 
```

我得到了一个正则表达式，但它并非在所有情况下都有效。正则表达式是

```
$pat1="/(\d)?(0-9)|(\s|-|_|.|)?(\()?(\d){3}(\))?(\s|-|_|.){1}(\d){3}(\s|-|_|.){1}(\d){4}/"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T06:40:48.480

它可能不是最好的，但它会匹配所有实例

```
(\d{3}([\-\.\*\s_]?\d{3})([\-\.\*\s_]?\d{4}))|\d(([\.\*]\d){9})|(\(\d{3}\)\s\d{3}\-\d{4})|(\d{3}\s\d{3}\s\d{2}\s\d{2})|(\d{3}\s\d{4}\sx\d{3}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T06:52:39.107

一个简单的未压缩正则表达式可以是：

```
^\d{3}\s\d{3}\s\d{2}\s\d{2}|\d{3}\s\d{4}\sx\d{3}|\d{10}|\(?\d{3}\)?[\s-.*_]\d{3}[-.*_]\d{4}|(\d[*.]){9}\d$ 
```

请注意，在最后一行有 x123，如果它是一个四位数字，您必须将正则表达式更改为：

```
^\d{3}\s\d{3}\s\d{2}\s\d{2}|\d{3}\s\d{4}\s\d{4}|\d{10}|\(?\d{3}\)?[\s-.*_]\d{3}[-.*_]\d{4}|(\d[*.]){9}\d$ 
```

另外，^ 表示以开头，$ 表示以结尾。对于某些正则表达式查询，您必须删除它们。

# grails - Grails 中的缓存

> ID：12908758
> 
> 赞同：1
> 
> 时间：2012-10-16T06:30:11.137
> 
> 标签：grails, ehcache

我在 grails 中遇到二级缓存问题。以下是我正在遵循的配置

**数据源.groovy**

```
 hibernate {
        cache.use_second_level_cache = true     
        cache.use_query_cache = true  
        cache.provider_class = 'org.hibernate.cache.EhCacheProvider'
    } 
```

**FirmClient.groovy**

```
 static mapping = {
      cache true
    } 
```

**FirmClientController.groovy**

```
 def t1 = System.currentTimeMillis()
    def firmClient = FirmClient?.findAll(query,[cache:true])  
    println "time take for Firm client list>>>>>> ${System.currentTimeMillis()-t1}" 
```

**conf/ehcache.xml**

```
 <?xml version="1.0" encoding="UTF-8"?>
  <ehcache>
    <diskStore path="java.io.tmpdir" />
    <defaultCache name="default" maxElementsInMemory="10000" eternal="false"
      timeToIdleSeconds="300" timeToLiveSeconds="600" overflowToDisk="true"/>
    <cache name="FirmClient" maxElementsInMemory="10000" eternal="false"
      timeToIdleSeconds="300" timeToLiveSeconds="600" overflowToDisk="true"/>
  </ehcache> 
```

1.  第一个问题在 tmpdir 中，FirmClient.data 没有任何数据。如何将数据转储到 FirmClient.data

2.  第二个问题是，当我第一次点击查询时，以毫秒为单位的时间比使用相同参数的第二次点击要多，它会逐渐减少。但是如果查询被缓存，我认为它应该将时间段显示为零。

谁能帮助我二级缓存的工作原理以及如何解决上述问题？

# asp.net - 更新gridview时如何防止异常？

> ID：12908762
> 
> 赞同：0
> 
> 时间：2012-10-16T06:30:44.723
> 
> 标签：asp.net, gridview

我有一个gridview，gridview 中的内容数据是从存储过程中调用的，但是每当我想更新gridview 行内容时，就会出现异常。更新代码如下：

```
protected void Grid_Updating(object sender, GridViewUpdateEventArgs e)
    {
        SqlCommand cmd = DataProvider.GenerateCommand("Update_HowzeEducation_SP", CommandType.StoredProcedure);
        cmd.Connection.Open();

        cmd.Parameters.Add("@FieldName", SqlDbType.NVarChar).Value = ((TextBox)GridView1.Rows[e.RowIndex].Cells[1].Controls[0]).Text;
        cmd.Parameters.Add("@DegreeId", SqlDbType.Int).Value = ((TextBox)GridView1.Rows[e.RowIndex].Cells[2].Controls[0]).Text;
        cmd.Parameters.Add("@SchoolName", SqlDbType.NVarChar).Value = ((TextBox)GridView1.Rows[e.RowIndex].Cells[3].Controls[0]).Text;
        cmd.Parameters.Add("@StudyCityDescribtion", SqlDbType.NVarChar).Value = ((TextBox)GridView1.Rows[e.RowIndex].Cells[4].Controls[0]).Text;
        cmd.Parameters.Add("@Average", SqlDbType.Decimal).Value = decimal.Parse(((TextBox)GridView1.Rows[e.RowIndex].Cells[5].Controls[0]).Text, CultureInfo.InvariantCulture);
        cmd.Parameters.Add("@FinishLevelDate", SqlDbType.Date).Value = Convert.ToDateTime(((TextBox)GridView1.Rows[e.RowIndex].Cells[6].Controls[0]).Text.Trim());
        cmd.Parameters.Add("@ThesisTitle", SqlDbType.NVarChar).Value = ((TextBox)GridView1.Rows[e.RowIndex].Cells[7].Controls[0]).Text;
        cmd.Parameters.Add("@Describtion", SqlDbType.NVarChar).Value = ((TextBox)GridView1.Rows[e.RowIndex].Cells[8].Controls[0]).Text;
        cmd.Parameters.Add("@HowzeEducationId", SqlDbType.Int).Value = GlobalVariables.HowzeEducationId;

        cmd.ExecuteNonQuery();

    } 
```

例外是： **无法将参数值从字符串转换为 Int32。** 此消息出现在代码的最后一行。

我会感谢任何有用的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T06:39:26.440

错误说明了一切：您正在尝试将字符串放入 int 中。

看到这一行：

```
cmd.Parameters.Add("@DegreeId", SqlDbType.Int).Value = ((TextBox)GridView1.Rows[e.RowIndex].Cells[2].Controls[0]).Text; 
```

可以按如下方式进行

```
cmd.Parameters.AddWithValue("@DegreeId",Convert.ToInt32(((TextBox)GridView1.Rows[e.RowIndex].Cells[2].Controls[0]).Text); 
```

如果您使用 DataSourceID 绑定数据，[NewValues](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridviewupdateeventargs.newvalues.aspx)集合会派上用场

```
cmd.Parameters.AddWithValue("@DegreeId",e.NewValues["DegreeId"]); 
```

# javascript - 使用 jQuery 获取 JS 对象的事件

> ID：12908763
> 
> 赞同：1
> 
> 时间：2012-10-16T06:30:58.810
> 
> 标签：javascript, jquery, google-maps-api-3

您好我正在使用以下代码

```
var view = new storeLocator.View(); //it has an event called load

$(view).on("load",function(){
  alert("Gochcha!!");
return true;
}) 
```

但我不知道为什么我从来没有收到解雇警报？谁能告诉我我错过了什么？

我认为代码片段 din 让事情变得清晰。Lemme 分享我正在尝试的整个代码：

```
google.maps.event.addDomListener(window, 'load', function() {
  var map = new google.maps.Map(document.getElementById('map-canvas'), {
    center: new google.maps.LatLng(-28, 135),
    zoom: 6,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  });

  var panelDiv = $('#panel');
  var data = new MyDataSource;
  var view = new storeLocator.View(map, data, {
    geolocation: true,
    features: data.getFeatures()
  });

$(view).on("load",function(){
  alert("Gochcha!!");
return true;
 })

});//End of map load 
```

我正在尝试的不是触发事件，而是将我的函数绑定到 javascript 对象的事件，这样每当事件触发时，我都会首先调用我的函数，然后继续它应该做的事情。当我看到地图并加载数据时，偶数确实会触发，但我没有让我的功能开始工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T07:58:43.143

确保您提出事件的上下文是，`view`否则不会被捕获

# error-handling - IIS 7.5：发送带有自定义错误的 http 状态代码 422

> ID：12908764
> 
> 赞同：12
> 
> 时间：2012-10-16T06:31:05.190
> 
> 标签：error-handling, iis-7.5, http-status-codes, custom-errors

我在 asp.net mvc 应用程序中使用自定义操作过滤器将 http 状态代码 422 和验证错误的 json 列表（基本上是序列化的模型状态字典）返回给客户端，在那里我使用 jQuery 中的全局 ajaxError 处理程序进行处理。

所有这些都适用于开发环境，但我的问题是当自定义错误模式打开时（`<system.webServer>/<httpErrors errorMode="Custom">`），IIS 将响应（json）替换为文本“自定义错误模块无法识别此错误”。

如果状态码为 422，我很难正确配置 IIS 以传递原始响应。有人做过类似的事情吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-16T11:30:19.150

如果 Web 服务器配置为通过现有响应，它将向浏览器返回 json 内容。

```
<system.webServer>
  <httpErrors errorMode="DetailedLocalOnly" existingResponse="PassThrough">
  </httpErrors>
</system.webServer> 
```

[MSDN：httpErrors 元素 [IIS 设置架构]](https://msdn.microsoft.com/en-us/library/ms690497%28v=vs.90%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-24T13:44:43.533

[![在此处输入图像描述](../Images/f930350c4b507fdb2d1ff4afbb0bcbc5.png)](https://i.stack.imgur.com/BjbJE.jpg)

为 IIS 7.5 进行以下设置，这对我来说很好，这里最重要的是安装`existingResponse="Replace"`：

```
<httpErrors errorMode="DetailedLocalOnly" existingResponse="Replace" detailedMoreInformationLink="http://YouLink" lockAttributes="allowAbsolutePathsWhenDelegated,defaultPath">
            <error statusCode="401" prefixLanguageFilePath="" path="C:\path\to\401.htm" responseMode="File" />
            <error statusCode="403" prefixLanguageFilePath="" path="C:\path\to\403.htm" responseMode="File" />
            <error statusCode="404" prefixLanguageFilePath="" path="C:\path\to\404.htm" responseMode="File" />
            <error statusCode="405" prefixLanguageFilePath="" path="C:\path\to\405.htm" responseMode="File" />
            <error statusCode="406" prefixLanguageFilePath="" path="C:\path\to\406.htm" responseMode="File" />
            <error statusCode="412" prefixLanguageFilePath="" path="C:\path\to\412.htm" responseMode="File" />
            <error statusCode="500" prefixLanguageFilePath="" path="C:\path\to\500.htm" responseMode="File" />
            <error statusCode="501" prefixLanguageFilePath="" path="C:\path\to\501.htm" responseMode="File" />
            <error statusCode="502" prefixLanguageFilePath="" path="C:\path\to\502.htm" responseMode="File" />
            <error statusCode="400" prefixLanguageFilePath="" path="C:\path\to\400.htm" responseMode="File" />
</httpErrors> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-02T09:11:35.553

检查是否在 IIS 中为您的应用程序配置了错误页面。您需要为状态代码添加自定义错误页面，例如：429

[![IIS 错误页面配置](../Images/b0c8b6a6345c3e8c4593ef17e90e76ad.png)](https://i.stack.imgur.com/Ha18s.png)

添加状态码 HTMLstrong 文本页面。它应该可以解决问题

[![错误 HTML 页面配置](../Images/859b90fa2694d1acd56806bd19d52fee.png)](https://i.stack.imgur.com/QHfVR.png)

# php - php电子邮件发送代码而不是html

> ID：12908765
> 
> 赞同：-5
> 
> 时间：2012-10-16T06:31:09.450
> 
> 标签：php, html

我收到这种形式的电子邮件：

`"<span style="color:red;"> blablabla text goes here </span>"`

代替

`"blablabla text goes here"`

红色的。任何类型的 html 都作为代码发送出去......关于如何解决这个问题的任何想法？提前致谢

```
if(isset($_REQUEST['Message']) && $_REQUEST['Message']!="")
    {
        $header="From: ".$_REQUEST['FromName']."<".$_REQUEST['FromEmail'].">\r\n" .
        'X-Mailer: PHP/' . phpversion() . "\r\n" .
        "MIME-Version: 1.0\r\n" .
        "Content-Type: text/html; charset=iso-8859-1" . "\r\n".
        "Content-Transfer-Encoding: 8bit\r\n\r\n";
        $to=explode(",",$_REQUEST['Recipients']);
        for($i=0;$i<count($to);$i++)
        {
            $x=explode("<",$to[$i]);
            $x=explode(" ",$x[0]);
            $firstname=$x[0];
            mail($to[$i],$_REQUEST['Subject'],str_replace("\$firstname",$firstname,$_REQUEST['Message']),$header);
            //
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T06:46:15.653

示例代码如下。

```
<? 
    //change this to your email. 
    $to = "m@maaking.com"; 
    $from = "m2@maaking.com"; 
    $subject = "Hello! This is HTML email"; 

    //begin of HTML message 
    $message = "<html> 
  <body bgcolor=\"#DCEEFC\"> 
    <center> 
        <b>Looool!!! I am reciving HTML email......</b> <br> 
        <font color=\"red\">Thanks Mohammed!</font> <br> 
    </center> 
      <br><br>*** Now you Can send HTML Email <br> Regards<br>MOhammed Ahmed - Palestine 
  </body> 
</html>"; 
   //end of message 

    // To send the HTML mail we need to set the Content-type header. 
    $headers = "MIME-Version: 1.0rn"; 
    $headers .= "Content-type: text/html; charset=iso-8859-1rn"; 
    $headers  .= "From: $from\r\n"; 
    //options to send to cc+bcc 
    //$headers .= "Cc: maa@p-i-s.com"; 
    //$headers .= "Bcc:email@maaking.com"; 

    // now lets send the email. 
    mail($to, $subject, $message, $headers); 

    echo "Message has been sent....!"; 
?> 
```

# http - 什么是缓存控制：私有？

> ID：12908766
> 
> 赞同：159
> 
> 时间：2012-10-16T06:31:27.967
> 
> 标签：http, caching, http-headers, browser-cache, cache-control

当我访问[chesseng.herokuapp.com](http://chesseng.herokuapp.com)时，我得到一个响应头，看起来像

```
Cache-Control:private
Connection:keep-alive
Content-Encoding:gzip
Content-Type:text/css
Date:Tue, 16 Oct 2012 06:37:53 GMT
Last-Modified:Tue, 16 Oct 2012 03:13:38 GMT
Status:200 OK
transfer-encoding:chunked
Vary:Accept-Encoding
X-Rack-Cache:miss 
```

然后我刷新页面并得到

```
Cache-Control:private
Connection:keep-alive
Date:Tue, 16 Oct 2012 06:20:49 GMT
Status:304 Not Modified
X-Rack-Cache:miss 
```

所以看起来缓存正在工作。如果这适用于缓存，那么***Expires***和**Cache-Control:max-age**的意义何在。更令人困惑的是，当我在[https://developers.google.com/speed/pagespeed/insights/](https://developers.google.com/speed/pagespeed/insights)测试页面时，它告诉我“利用浏览器缓存”。

* * *

## 回答 #1

> 赞同：172
> 
> 时间：2012-10-16T07:17:27.377

```
Cache-Control: private 
```

> 表示响应消息的全部或部分是针对单个用户的，并且不得由共享缓存（例如代理服务器）缓存。

来自[RFC2616 第 14.9.1 节](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html)

* * *

## 回答 #2

> 赞同：93
> 
> 时间：2018-04-03T18:54:31.150

要回答您关于缓存为何起作用的问题，即使网络服务器不包含标头：

*   **过期：** `[a date]`
*   **缓存控制：** max-age=`[seconds]`

服务器恳请任何中间代理不要缓存内容（即，该项目应仅缓存在*私有*缓存中，即仅在您自己的本地计算机上）：

*   **缓存控制：私有**

但是服务器忘记包含任何类型的缓存提示：

*   他们忘记包含**Expires**（因此浏览器知道在该日期之前使用缓存的副本）
*   他们忘记包括**Max-Age**（所以浏览器知道缓存的项目可以使用多长时间）
*   他们忘记包含**电子标签**（所以浏览器可以做一个有条件的请求）

但他们**确实**在回复中包含了 **Last-Modified**日期：

```
Last-Modified: Tue, 16 Oct 2012 03:13:38 GMT 
```

因为浏览器知道文件被修改的日期，它可以执行一个**[条件请求](https://developer.mozilla.org/en-US/docs/Web/HTTP/Conditional_requests)**。它将向服务器询问文件，但指示服务器仅在文件自 2012/10/16 3:13:38 以来已被修改时才发送文件：

```
GET / HTTP/1.1
If-Modified-Since: Tue, 16 Oct 2012 03:13:38 GMT 
```

服务器收到请求，意识到客户端已经拥有最新版本。它不是发送 client `200 OK`，然后是页面内容，而是告诉您您的缓存版本是好的：

```
304 Not Modified 
```

您的浏览器*确实*不得不遭受向服务器发送请求并等待响应的往返延迟，但它确实省去了重新下载静态内容的麻烦。

## 为什么选择**最大年龄**？为什么**过期**？

因为**Last-Modified**很烂。

并非服务器上的所有内容**都有**与之关联的日期。如果我正在即时构建页面，则没有与之关联的日期 -**现在**是. 但我完全愿意让用户将主页缓存 15 秒：

```
200 OK
Cache-Control: max-age=15 
```

如果用户锤击`F5`，他们将继续获取缓存版本 15 秒。如果它是一个公司代理，那么在同一个 15 秒窗口中访问同一个页面的所有 67,198 个用户都将获得相同的内容 - 全部来自关闭缓存。为每个人赢得性能。

添加的优点`Cache-Control: max-age`是浏览器甚至**不必**执行“条件”请求。

*   如果您仅指定`Last-Modified`，则浏览器必须执行`If-Modified-Since`请求并观察`304 Not Modified`响应
*   如果您指定`max-age`，浏览器甚至不必遭受网络往返；内容将直接从缓存中出来。

## “Cache-Control: max-age”和“Expires”的区别

`Expires`是现代`Cache-Control: max-age`标头的旧版（c. 1998）等价物：

*   `Expires`：你指定一个日期*（呸）*

*   `max-age`：你指定秒*（善良）*

*   如果**两者**都指定，则浏览器使用`max-age`：

    ```
     200 OK
      Cache-Control: max-age=60
      Expires: 20180403T192837 
    ```

1998 年之后编写的任何网站都不应再使用`Expires`，而应使用`max-age`.

## 什么是ETag？

**ETag**类似于**Last-Modified**，不同之处在于它不必是日期 - 它只需是***`something`***.

如果我从数据库中提取产品列表，服务器可以将最后一个`rowversion`作为 ETag 而不是日期发送：

```
200 OK
ETag: "247986" 
```

我的 ETag 可以是静态资源（例如图像、js、css、字体）或缓存渲染页面的 SHA1 散列（即，这是 Mozilla MDN wiki 所做的；它们散列最终标记）：

```
200 OK
ETag: "33a64df551425fcc55e4d42a148795d9f25f89d4" 
```

与基于**Last-Modified**的条件请求完全一样：

```
GET / HTTP/1.1
If-Modified-Since: Tue, 16 Oct 2012 03:13:38 GMT

304 Not Modified 
```

我可以根据 ETag执行*条件请求：*

```
GET / HTTP/1.1
If-None-Match: "33a64df551425fcc55e4d42a148795d9f25f89d4"

304 Not Modified 
```

An`ETag`优于，`Last-Modified`因为它适用于*文件*以外的事物，或者具有*日期*概念的事物。它*只是*

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2014-02-01T20:07:24.593

RFC 2616，[第 14.9.1 节](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.9.1)：

> 表示响应消息的全部或部分是针对单个用户的，并且不能被共享缓存缓存...私有（非共享）缓存可以缓存响应。

* * *

浏览器可以使用这些信息。当然，当前的“用户”可能意味着很多东西：操作系统用户、浏览器用户（例如 Chrome 的配置文件）等。没有具体说明。

对我来说，**一个更具体的例子**是`Cache-Control: private`代理服务器（通常有很多用户）不会缓存它。它适用于最终用户，而不是其他任何人。

* * *

仅供参考，RFC 明确表示这不提供安全性。它是关于显示正确的内容，而不是保护内容。

> 私有这个词的使用只控制响应可能被缓存的地方，并不能保证消息内容的私密性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-18T12:37:03.273

Expires entity-header 字段给出了响应被认为是陈旧的日期/时间。Cache-control:maxage 字段给出的年龄值（以秒为单位）大于哪个响应被认为是陈旧的。

尽管上面的标头字段为客户端提供了一种机制来决定是否向服务器发送请求。在某些情况下，客户端向服务器发送请求并且响应的年龄值大于最大值，这是否意味着服务器需要将资源发送给客户端？也许资源从未改变。

为了解决这个问题，HTTP1.1给出了last-modifided head。服务器将响应的最后修改日期提供给客户端。当客户端需要这个资源时，它会向服务器发送 If-Modified-Since 头字段。如果这个日期早于资源的修改日期，服务器会将资源发送给客户端并给出200代码。否则，它会返回304代码给客户端，这意味着客户端可以使用它缓存的资源。

# java - 在 Mac 上设置 Java EE 环境

> ID：12908770
> 
> 赞同：1
> 
> 时间：2012-10-16T06:31:47.097
> 
> 标签：java, jakarta-ee, java-ee-6, development-environment

我是 Java EE 的新手。我想设置 Java EE 环境以开始开发 Web 应用程序。我阅读了互联网上的文章，但它们似乎令人困惑。我的问题是 Java EE 开发环境设置是否有一次性安装程序？我的意思是我们对 PHP 的理解是 WAMP、XMPP、LAMP 等。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T06:40:57.890

没有一个安装程序，但两个就足够了——您需要一个 IDE——最流行的是[Eclipse](http://www.eclipse.org/downloads/)和[NetBeans](http://netbeans.org/downloads/)。您将需要一个 Java EE 发行版，它以符合 Java EE 的应用程序服务器的形式出现——最流行的是[JBoss](http://www.jboss.org/jbossas)和[Glassfish](http://glassfish.java.net/)。使用 IDE 和服务器，您只需将它们解压缩到您选择的文件夹中。

NetBeans 的 JavaEE 分发已经包含 GlassFish - 为您做的更少；）

作为先决条件，您将需要一个已安装的[JDK](http://www.oracle.com/technetwork/java/javase/downloads/index.html)，而 JRE 不会。

编辑：为了控制服务器并从 eclipse 部署，您必须告诉它您的应用程序服务器在哪里 - [Glassfish](http://dlc.sun.com.edgesuite.net/glassfish/eclipse/indigo/)和[JBoss](http://www.jboss.org/tools)有相应的插件。

我不确定 JBoss 与 NetBeans 的集成——从未做过，但 NB 与 Glassfish 无缝集成。

Glassfish 包括一个[Derby](http://db.apache.org/derby/) (JavaDB) 发行版，而 JBoss 包括一个[H2 DB](http://www.h2database.com/html/main.html)发行版，两者都足以启动。

使用 MySQL 或其他数据库需要一些配置，所以如果你刚刚开始 - 不要打扰。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T06:40:45.817

您可能想为 Java EE 开发人员使用 Eclipse Juno Eclipse IDE，

[http://www.eclipse.org/downloads/packages/eclipse-ide-java-ee-developers/junosr1](http://www.eclipse.org/downloads/packages/eclipse-ide-java-ee-developers/junosr1)

# c - 在野牛/yacc语义动作中构建异构数据类型数组（或集合）的最佳方法

> ID：12908784
> 
> 赞同：1
> 
> 时间：2012-10-16T06:32:58.213
> 
> 标签：c, bison, yacc

可以将其视为更多元素的集合，这些元素不一定都是同一类型。我有以下代码：

```
// The struct I'll use inside Bison to dynamically create collections:
typedef struct ListElementType {
    union value {
        int intVal;
        float floatVal;
        char* charptrVal;
    } value;

    struct ListElementType* next;
} ListElementType; 
```

然后在野牛我有：

```
%union
{
    int int_type;
    char char_type;
    float float_type;
    char* charptr_type;
    ListElementType* listElementType;
}
//----------------------------------------------------
%token <charptr_type> STRING
%token <int_type> INTEGER
%token <float_type> REAL
%type<listElementType> ElementList
//----------------------------------------------------
//----------------------------------------------------
ElementList
: ElementList ',' LiteralType
{ 
    $$ = malloc(sizeof(listElementType));
    $$->next = $1;
    $$->value = $3;
}

| LiteralType
{ 
    $$ = malloc(sizeof(listElementType));
    $$->next = 0;
    $$->value = $1;
}
;
//----------------------------------------------------
LiteralType
: STRING
| INTEGER
| REAL
; 
```

这里有一些事情/问题。但首先，尝试生成这样的解析器 Bison 表示递归生产中的 $3 和基本 /terminal 案例中的 $1 没有声明的类型。正如我所看到的，它们实际上确实有声明类型。它们是 LiteralType，因此，可以是字符串、整数或浮点数，应该通过将最后一个终端产品留空来自动设置（假设我做的第一件事是通过从全局联合中选择适当的来明确它们的类型） .

其次，我不希望 Bison 抱怨没有声明的类型，而是因为我分配给 $$->value 而存在冲突或歧义，但 $2,$1 可能具有三个可能值中的任何一个（取决于哪个联合成员被分配到各自的作品中）。对于这种情况，我将 ListElementType 结构中的值成员设为联合。我在想而不是试图利用结构的第一个成员将位于结构地址本身的“标签”位置以及联合的成员都从联合的 mem 地址开始尝试直接分配而不管类型。类似于*(void* )$$ = $2 的东西，无论 $2 碰巧是什么。

所以，我将代码更改为：

```
//----------------------------------------------------
ElementList
: ElementList ',' LiteralType
{ 
    $$ = malloc(sizeof(listElementType));
    $$->next = $1;
    *$$ = (void*)$3;
}

| LiteralType
{ 
    $$ = malloc(sizeof(listElementType));
    $$->next = 0;
    $$->value = $1;
}
;
//----------------------------------------------------
LiteralType
: STRING
{
    $<charptr_type>$ = $1;
}

| INTEGER
{
    $<int_type>$ = $1;
}

| REAL
{
    $<float_type>$ = $1;
}

; 
```

现在我已经明确地为 INT、REAL 和 STRING 案例设置了联合。我认为这没有必要，但如果我错了，请有人纠正我。而且，我也尝试了无类型联合赋值，但仍然出现相同的错误：$3 和 $1 没有声明的类型。

**所以我的想法，问题：**

我是否必须创建单独的 StringList、IntList 和 RealList 产品，其中唯一改变的是右侧非终结符是列表中元素的特定类型，如下所示：

```
//----------------------------------------------------
ElementList
: IntElementList
| RealElementList
;

IntElementList
: IntElementList ',' INTEGER
{ 
    $$ = malloc(sizeof(listElementType));
    $$->next = $1;
    $$->intVal = $3;
}

| INTEGER
{ 
    $$ = malloc(sizeof(listElementType));
    $$->next = 0;
    $$->intVal = $1;
}

RealElementList
: RealElementList ',' REAL
{ 
    $$ = malloc(sizeof(listElementType));
    $$->next = $1;
    $$->floatVal = $3;
}

| REAL
{ 
    $$ = malloc(sizeof(listElementType));
    $$->next = 0;
    $$->floatVal = $1;
}

; 
```

或者有没有办法声明 LiteralType 可以具有三个值中的任何一个，然后尝试提取无类型联合分配？

或者整个方法是错误的，有更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T19:40:20.563

我最终选择了这种方法。

1.  请注意，不是让 Element 产生式（例如 LiteralType 非终结符）简化为联合，而是简化为具有联合和类型成员的结构。类型成员是告诉集合中存储的每个元素的类型的方法。
2.  另请注意，ListType 结构有一个指向元素的 void* 指针。在这个人为的示例中，ElementType 结构类型的成员就足够了。但是，我将元素设置为通用指针，以使用相同的结构依次存储由元素列表组成的声明列表。

%code 需要 { typedef struct Element {

```
%code requires {
    typedef struct Element {
        union {
            int intVal;
            float floatVal;
            char* charptrVal;            
        };

    char type;

    } ElementType;

    typedef struct ListType {
        void* element;
        struct ListType* next;

    } ListType;
}

%union
{
    int int_type;
    char char_type;
    float float_type;
    char* charptr_type;
    ListType* ListType;
    ElementType* ElementType;
}

%token <charptr_type> KEYWORD
%token <charptr_type> ID
%token <charptr_type> STRING
%token <int_type> INTEGER
%token <float_type> REAL
%token END 0

%type<ElementType> Element
%type<ListType> ElementList

//----------------------------------------------------
ElementList
: Element ',' ElementList
{
    $$ = malloc(sizeof(ListType));
    $$->element = (void*)$1;
    $$->next = $3;
}

| Element
{
    $$ = malloc(sizeof(ListType));
    $$->element = (void*)$1;
    $$->next = NULL;
}
;
//----------------------------------------------------
Element
: STRING
{
    char* aString = malloc(sizeof(char)*strlen($1)+1);
    strcpy(aString, $1);
    free(yylval.charptr_type);

    $$ = malloc(sizeof(ElementType));
    $$->charptrVal = aString;
    $$->type = 's';
}
| INTEGER
{
    $$ = malloc(sizeof(ElementType));
    $$->intVal = $1;
    $$->type = 'i';
}

| REAL
{
    $$ = malloc(sizeof(ElementType));
    $$->floatVal = $1;
    $$->type = 'f';    
}
; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T21:11:39.530

通常你想要做的是在你的异构列表类型中有一个类型标签：

```
typedef enum ListElementType { INTEGER, REAL, STRING } ListElementType
typedef struct ListElement {
    ListElementType  type;
    union {
        int intVal;
        float floatVal;
        char* charptrVal;
    } value;
    struct ListElement* next;
} ListElement; 
```

然后，每当您创建 ListElement 时，您就可以`type`适当地设置该字段。稍后，您可以检查该`type`字段以查看它是什么。

然后你的野牛代码变成：

```
%union
{
    int int_type;
    char char_type;
    float float_type;
    char* charptr_type;
    ListElement* listElement;
    struct { ListElement *head, *tail } list;
}
//----------------------------------------------------
%token <charptr_type> STRING
%token <int_type> INTEGER
%token <float_type> REAL
%type<list> ElementList
%type<listElement> LiteralType
//----------------------------------------------------
%%
//----------------------------------------------------
ElementList
: ElementList ',' LiteralType
    { $$.head = $1.head;
      $$.tail = $1.tail->next = $3; }
| LiteralType
    { $$.head = $$.tail = $1; }
;
//----------------------------------------------------
LiteralType
: STRING  { ($$ = NewListElement(STRING))->value.charptrVal = $1; }
| INTEGER { ($$ = NewListElement(INTEGER))->value.intVal = $1; }
| REAL    { ($$ = NewListElement(REAL))->value.floatVal = $1; }
;
%%
ListElement *NewListElement(ListElementType type) {
    ListElement *rv = malloc(sizeof(ListElement));
    rv->type = type;
    rv->next = 0;
    return rv; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T07:45:06.443

我认为您错过了 Bison 不尝试实现完整的 C 类型检查的事实。由于您为 STRING 和 LiteralType 提供了不同的类型名称，因此它的任务是报告其默认操作 ($$ = $1) 从 (bison-) 类型检查的角度来看做了一些奇怪的事情。如果您确实想使用默认分配，只需给它们相同的类型（在您的情况下为值）。

此外，您编码的联合值的两倍，这似乎没有必要：

```
%code requires
{
  typedef struct ListElementType {
    union value {
      int intVal;
      float floatVal;
      char* charptrVal;
    } value;

    struct ListElementType* next;
  } ListElementType;
}

%union
 {
   union value value;
   ListElementType* list;
 };

%token <value> STRING INTEGER REAL
%type <value> LiteralType 
%type <list> ElementList
%%
ElementList
: ElementList ',' LiteralType
{ 
  $$ = malloc(sizeof($$));
  $$->next = $1;
  $$->value = $3;
}
| LiteralType
{ 
  $$ = malloc(sizeof($$));
  $$->next = 0;
  $$->value = $1;
}
;
//----------------------------------------------------
LiteralType
: STRING
| INTEGER
| REAL
; 
```

# java - 我可以在 Intellij Idea 中通过 @Around 方面进行调试吗

> ID：12908785
> 
> 赞同：4
> 
> 时间：2012-10-16T06:33:00.793
> 
> 标签：java, debugging, intellij-idea, aspect

我有几个 @After 和 @Before 方面，调试工作得很好。但是当我尝试使用@Around 时，它不会在断点处停止。我有日志，并且我确信方面代码已执行。

这是正常的，还是只是我？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T07:39:26.077

固定，是我！:)

我有几个围绕方面，当然，在每一个方面，我需要定义顺序。我在我的新方面上放置了正确的顺序，但错过了在旧方面添加新的顺序。现在我做到了，调试还活着！:)

# c# - 实体框架中的更新问题

> ID：12908789
> 
> 赞同：0
> 
> 时间：2012-10-16T06:33:09.490
> 
> 标签：c#, linq-to-entities

我想用两个条件更新我的表：

```
Type == "پیش ثبت نام" && Approved == false 
```

我使用这段代码：

```
using (NoavaranModel.NoavaranEntities1 db=new NoavaranModel.NoavaranEntities1())
{
    var query = db.Students.Where(p => p.Type == "پیش ثبت نام" && p.Approved == false).Single();
    query.IsRecivedSMS = true;

    db.SaveChanges();
} 
```

但它不起作用。只需更新 db 中的一个重新编码。如何在实体框架中更新具有上述条件的所有行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T06:36:10.750

只需将查询更改为不只选择一条符合您的条件的记录，而是全部。然后全部更新。

```
using (NoavaranModel.NoavaranEntities1 db=new NoavaranModel.NoavaranEntities1())
        {
            var query = db.Students.Where(p => p.Type == "پیش ثبت نام" && p.Approved == false);
            foreach(var record in query)
            {
              record.IsRecivedSMS = true;
            }

            db.SaveChanges();

        } 
```

# android - Facebook 从 Safari 中注销，但不在 iPhone 中的应用程序中

> ID：12908790
> 
> 赞同：1
> 
> 时间：2012-10-16T06:33:10.683
> 
> 标签：android, iphone, facebook, logout, sharekit

我正在使用 ShareKit 将任何图像发布到 Facebook。

所以我最近几天面临一个问题。当我从 Safari 注销时从 Facebook 授权应用程序后，它也不会在应用程序中注销。我正在使用单点登录 (SSO) 功能。

我检查了相同的功能在 Android 中运行良好。他们还使用 SSO。当他们从 Facebook 应用程序注销时，他们也会在应用程序中注销。

有没有我必须添加的代码。请告诉我。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T06:46:36.573

在 iPhone 上使用 Web 视图时，它不会与浏览器共享会话 cookie。因此，您的 WebView 是孤立的。这就是为什么当您在 Safari 中退出 Facebook 时，您的应用程序仍处于登录状态。您在 Android 中可能会遇到同样的问题，具体取决于您启动浏览器的方式。如果简单地使用常规浏览器意图，您基本上共享相同的 cookie，因此如果您注销一个，它将注销另一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T06:49:04.680

您应该在Cell中使用`UITableView`并注销。`UIButton``UITableView`

`UIButton`在点击事件中编写此代码。

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
[[defaults facebook removeObjectForKey:@"FBAccessTokenKey"];
[defaults removeObjectForKey:@"FBExpirationDateKey"];
[defaults synchronize]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T07:41:23.380

最后，当您在 Android 或 iPhone 中使用浏览器或 safari 进行登录时，我找到了答案。并张贴任何东西。然后从浏览器或 safari 注销它也不是从我们实现 Facebook 以在墙上发布任何内容的应用程序注销。他们在这两种情况下都在做同样的操作。

但我仍然怀疑您的 Android 或 iPhone 设备中是否有 Facebook 应用程序，所以会发生不同的操作：（我也必须搜索它。

感谢您的所有回答并帮助我。

# jquery - 如何为包含错误/有效输入字段的 div 添加一些样式？

> ID：12908791
> 
> 赞同：0
> 
> 时间：2012-10-16T06:33:20.960
> 
> 标签：jquery, css, jquery-validate

我在上述字段中显示错误，但我想在它附近添加样式，例如，将一些图像作为背景添加到包含的 div 中。

我像这样添加它：

```
 $('input').change(function() {

  if ($(this).hasClass('valid')) {

  $(".field2").has(this).removeClass('bg2').addClass('bg1');
   }
  if ($(this).hasClass('error')) {

  $(".field2").has(this).removeClass('bg1').addClass('bg2');

   }
  }) 
```

和CSS：

```
.bg1 
  { 
  background-image: url('valid.png');
  background-repeat: no-repeat;
  background-position:320px 25px;
  }

 .bg2 
  {
   background-image: url('not_valid.png'); 
   background-repeat: no-repeat;
   background-position:320px 25px;
  } 
```

但现在它像这样工作：

1.  首先出现 jQuery 验证表单![](../Images/1141380081e25fc421eb653112506d3f.png)
2.  然后，我的 bg 仅在下一个输入更改并单击表单时添加![](../Images/5c3a36a66e16b4791047602b501ef5c1.png)

我想让背景与字段一起出现。

可以使用简单的 jQuery 事件吗？ **或者**

我应该为此添加错误标签吗？如果是这样 - 请提供一个带有表单和标签的验证示例，如果可能的话，没有错误文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T18:14:25.253

正如 Saeed Py 所说，您应该使用 keyup/keydown 事件而不是更改。偶然事件的问题在于它只有在**输入元素失去焦点**时才会触发。

您可以将其更改为 keydown/keyup/keypress 以验证每次按键时的输入。如果用户仅使用鼠标粘贴数据，您还可以添加单击事件。

我做了一个[非常简单的 jsfiddle 来](http://jsfiddle.net/fYPwR/2/)演示这 3 个事件之间的区别。（这有点不完整，因为我没有使用任何字段验证......）。

至于你的 javascript，它可能应该更像这样：

```
if ($(this).hasClass('valid')) {
  $(".field2").has(this).removeClass('bg2').addClass('bg1');
} 
```

大概应该写成

```
if ($(this).hasClass('valid')) {
  $(".field2").has($(this)).removeClass('bg2').addClass('bg1');
} 
```

*这个 -> $(这个)*

当然，这取决于您向我们展示的更多标记。我假设一个 div 有一个围绕每个输入的公共类，如我的 jsfiddle 中所示。

# internet-explorer - 使用 Ember.js 绑定到数组时 Internet Explorer 中的奇怪行为

> ID：12908794
> 
> 赞同：0
> 
> 时间：2012-10-16T06:33:40.213
> 
> 标签：internet-explorer, ember.js

使用 Ember.js 绑定到数组时，我在 IE8 中遇到了一些奇怪的行为（惊喜）。

每次更新数组时，IE8 都会在绑定值周围插入空格。有谁知道这是否是一个已知问题或是否有任何解决方法。

这是代码[http://jsfiddle.net/JZbCv/16/](http://jsfiddle.net/JZbCv/16/)

# c - 如何编写递归打印的程序

> ID：12908795
> 
> 赞同：-4
> 
> 时间：2012-10-16T06:33:44.177
> 
> 标签：c, recursion

> **可能重复：**
> [如何编写递归打印程序](https://stackoverflow.com/questions/12890621/how-write-a-recursive-print-program)

我已经问过这个问题，但由于信息不足，它被关闭了。 [如何编写递归打印程序](https://stackoverflow.com/q/12890621/1746220)

大师们，

我想知道如何编写一个打印的递归函数

1
12
123
1234
...
......

例如： display(4) 应该打印

1
12
123
1234

## 代码

```
#include <stdio.h>

void print(int n)
{
        if(n != 0)
        {
                print(n-1);
                printf("\n");
                print(n-1);
                printf("%d",n);
        }
}
int main()
{
        print(3);
} 
```

输出
1

12

123

## 问题

我想写一个纯递归函数，但无法过滤不需要的打印。希望有人能帮帮我！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T07:16:20.210

这可能是你想要的吗？

```
#include <stdio.h>

void print(int n)
{
    int i;
    if (n > 0)                  // [2]
    {
        //call print recursively
        print(n-1);             // [3]
        for (i=1; i<=n; i++)    // [4]
            printf("%d",i);
        printf("\n");
    }
}
int main(int argc, char *argv[])
{
    // If no argument, default to 8
    int value=8;
    if (argc > 1 )
        value = atoi(argv[1]);
    print(value);                // [1]
    return 0;
} 
```

编译它并像这样执行：

```
display 3 
```

或不带任何参数（默认为`display 8`）：

```
display 
```

诀窍是`print(n-1)`在打印当前的输出之前调用`n`。这是执行时的程序流程`display 3`：

```
<main() function is running>
main() calls print(3) in [1]
   <print(3) is running, n is 3>
   since n>0 in [2] print(3) calls print(2) in [3]
      <print(2) is running, n is 2>
      since n>0 print(2) calls print(1)
         <print(1) is running, n is 1>
         since n>0 print(1) calls print(0)  
            <print(0) is running, n is 0>
            since n=0 print(0) doesn't print anything and returns
            now the function that called print(0) (that is, print(1)) takes over
         <print(1) is running, n is 1, continues executing in [4]>
         print (1) enters the for loop, prints "1\n" and returns
         now the function that called print(1) (that is, print(2)) takes over
      <print(2) is running, n is 2, continues executing in [4]>
      print(2) enters the for loop, prints "12\n" and returns
      now the function that called print(2) (that is, print(3)) takes over
   <print(3) is running, n is 3, continues executing in [4]>
   print (3) enters the for loop, prints "123\n" and returns
   now the function that called print(3) (that is, main()) takes over
<main() is running>
main executes return(0) and exits 
```

这是打印到控制台的内容：

```
1
12
123 
```

如果您搬家`print(n-1)`后，`printf("\n")`您将拥有：

```
123
12
1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T07:09:01.100

您可以为此使用以下代码。

```
#include<stdio.h>

    void rec_print(int n)
    {
     int i=1;
     if(n>0)
     {
      rec_print(n-1);
      for(i=1;i<=n;i++)
            printf("%d",i);
      printf("\n");
     }
    }

    int main()
    {
     int n=5;
     rec_print(n);
     return 0;
    } 
```

# firebug-lite - Firebug Lite 选定的 html 元素

> ID：12908796
> 
> 赞同：1
> 
> 时间：2012-10-16T06:33:47.400
> 
> 标签：firebug-lite

如何使用 Firebug Lite 获取页面上的选定元素？我的意思是 xPath 或 DOM 链，就像 WebInspector 的下栏一样。

例如： **HTML页面**

```
<html>
    <head></head>
    <body>
        <div id="div_id">Text in div element</div>
    </body>
</html> 
```

在使用 Firebug Lite 选择 div-element 之后，我想得到这样的东西：`html->body->div#div_id`

# tridion - 如何从 C# TBB 中的类别名称中获取关键字？

> ID：12908803
> 
> 赞同：3
> 
> 时间：2012-10-16T06:34:36.760
> 
> 标签：tridion, tridion-2011

我正在尝试使用 C# TBB 获取类别中存在的关键字，以使用以下 DWT TBB 中的输出。

为此，我有一个带有 Category 字段的组件。

我正在尝试编写以下 C# TBB 来获取关键字值。

```
<%@Import NameSpace="Tridion.ContentManager.Templating.Expression" %>        

try
{
    string className = package.GetValue("Component.Fields.title");  
    KeywordField keywordField = package.GetKeywordByTitle(className);

    package.PushItem("Class", package.CreateStringItem(ContentType.Text, keywordField.Value.Key));

}
catch(TemplatingException ex)
{
    log.Debug("Exception is " + ex.Message);
} 
```

但我收到以下编译错误。

*无法编译模板，因为：错误 CS0246：找不到类型或命名空间名称“KeywordField”（您是否缺少 using 指令或程序集引用？）错误 CS1061：“Tridion.ContentManager.Templating.Package”不包含可以找到“GetKeywordByTitle”的定义，并且没有扩展方法“GetKeywordByTitle”接受“Tridion.ContentManager.Templating.Package”类型的第一个参数（您是否缺少 using 指令或程序集引用？）*

请建议我如何实现它？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T11:16:58.140

Af Jeremy 建议您应该学习 API，我正在为您提供从类别中获取关键字的示例。希望它可以帮助

包含文件

```
using Tridion.ContentManager;
using Tridion.ContentManager.CommunicationManagement;
using Tridion.ContentManager.Templating.Assembly;
using Tridion.ContentManager.ContentManagement;
using Tridion.ContentManager.ContentManagement.Fields;
using Tridion.ContentManager.Templating; 
```

示例代码，您可以根据需要在此处使用循环中的键和值。

```
string catID = package.GetByName("CategoryID").GetAsString();
        TcmUri catURI = new TcmUri(int.Parse(catID), ItemType.Category, PubId);
        var theCategory = m_Engine.GetObject(catURI) as Category;
        catKeywords = GetCatKeywords(theCategory);
        string strSelect = "<select>";
        foreach (Keyword k in catKeywords)
        {

        k.Key  // Keyowrd key
        k.Value // KEyword Value

        }

//keyword list  
private IList<Keyword> GetCatKeywords(Category category)
{
    IList<Keyword> keywords;

    if (!Utilities.IsNull(category))
    {
        Filter filter = new Filter();
        filter.BaseColumns = ListBaseColumns.IdAndTitle;
        keywords = category.GetKeywords(filter);

        if (!Utilities.IsNull(keywords))
        {
            return keywords;
        }
    }

    return null;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T08:23:39.607

错误消息非常清楚问题所在 - 没有对 KeywordField 类的引用。您需要导入相关的命名空间：

```
<%@Import NameSpace="Tridion.ContentManager.ContentManagement.Fields" %> 
```

同样绝对清楚的是，Package 对象没有名为 GetKeywordByTitle 的方法。有一个 GetByName 方法，但这是用于从包中检索命名项目，而不是用于从存储库中获取对象。

Tridion.ContentManager.ContentManagement.Category 确实有一个 GetKeywordByTitle 方法，但要使用它，您必须先获取类别，这可能意味着必须知道类别的 URI。

也许您需要进一步研究 API 文档？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T08:25:11.000

“GetKeywordByTitle”不是 Package 上的方法，而是 Category 上的方法。你不能只更新关键字吗？

```
string selectedKeyword= package.GetValue("Component.Fields.title");
Keyword keyword = new Keyword(selectedKeyword, engine.GetSession()); 
```

干杯

# glassfish - 在 glassfish 3.1.2 中部署时，commons-digester 无法加载我的课程

> ID：12908804
> 
> 赞同：0
> 
> 时间：2012-10-16T06:34:43.373
> 
> 标签：glassfish, glassfish-3, classnotfoundexception, xerces, apache-commons-digester

我最近遇到了以下问题：

1) 我的应用程序是企业应用程序。它基于 JAVA 1.5 构建。部署在 glassfish 2.1 中并且运行良好。

现在我们发现有必要从 JAVA 1.5 迁移到 JAVA 1.6 以及从 GLASSFISH 2.1 迁移到 GLASSFISH 3.1.2。

现在，当尝试这个迁移问题时出现了。在我们的应用程序启动期间，我们使用 commons-digester 解析一个 XML 配置文件并将其保存到一个对象中。使用 glassfish 2.1，在 JAVA 1.5 和 JAVA 1.6 消化器解析中都进行得很好。

但是在 glassfish 3.1.2 中执行相同操作时，我们在应用程序启动期间收到以下错误：

以下日志文​​件来自应用程序日志：

```
java.lang.ClassNotFoundException: ge.ifm.valueObjects.ConfVO
    at com.sun.enterprise.loader.ASURLClassLoader.findClassData(ASURLClassLoader.java:808)
    at com.sun.enterprise.loader.ASURLClassLoader.findClass(ASURLClassLoader.java:696)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
    at org.apache.commons.digester.ObjectCreateRule.begin(ObjectCreateRule.java:252)
    at org.apache.commons.digester.Rule.begin(Rule.java:200)
    at org.apache.commons.digester.Digester.startElement(Digester.java:1273)
    at org.apache.xerces.parsers.AbstractSAXParser.startElement(Unknown Source)
    at org.apache.xerces.impl.dtd.XMLDTDValidator.startElement(Unknown Source)
    at org.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanStartElement(Unknown Source)
    at org.apache.xerces.impl.XMLDocumentScannerImpl$ContentDispatcher.scanRootElementHook(Unknown Source)
    at org.apache.xerces.impl.XMLDocumentFragmentScannerImpl$FragmentContentDispatcher.dispatch(Unknown Source)
    at org.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanDocument(Unknown Source)
    at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)
    at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)
    at org.apache.xerces.parsers.XMLParser.parse(Unknown Source)
    at org.apache.xerces.parsers.AbstractSAXParser.parse(Unknown Source)
    at org.apache.commons.digester.Digester.parse(Digester.java:1605)
    at ge.ifm.common.utility.IFMCacheListener.contextInitialized(IFMCacheListener.java:87) 
```

glassfish服务器日志中的以下日志：

```
[#|2012-10-16T10:59:40.936+0530|SEVERE|glassfish3.1.2|org.apache.catalina.core.ContainerBase|_ThreadID=22;_ThreadName=Thread-2;|ContainerBase.addChild: start: 
org.apache.catalina.LifecycleException: ge.ifm.common.exception.GenericInterfaceException: SAXException-->Occured while calling parse of Digester Class.Exception Message is -->Error at (11, 7: ge.ifm.valueObjects.ConfVO
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:5389)
    at com.sun.enterprise.web.WebModule.start(WebModule.java:498)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:917)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:901)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:733)
    at com.sun.enterprise.web.WebContainer.loadWebModule(WebContainer.java:2018)
    at com.sun.enterprise.web.WebContainer.loadWebModule(WebContainer.java:1669)
    at com.sun.enterprise.web.WebApplication.start(WebApplication.java:109)
    at org.glassfish.internal.data.EngineRef.start(EngineRef.java:130)
    at org.glassfish.internal.data.ModuleInfo.start(ModuleInfo.java:269)
    at org.glassfish.internal.data.ApplicationInfo.start(ApplicationInfo.java:301)
    .
    .
Caused by: ge.ifm.common.exception.GenericInterfaceException: SAXException-->Occured while calling parse of Digester Class.Exception Message is -->Error at (11, 7: ge.ifm.valueObjects.ConfVO
    at ge.ifm.common.utility.IFMCacheListener.contextInitialized(IFMCacheListener.java:107)
    at org.apache.catalina.core.StandardContext.contextListenerStart(StandardContext.java:4750)
    at com.sun.enterprise.web.WebModule.contextListenerStart(WebModule.java:550)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:5366)
    ... 62 more
Caused by: java.lang.ClassNotFoundException: ge.ifm.valueObjects.ConfVO
    at org.apache.commons.digester.Digester.createSAXException(Digester.java:2540)
    at org.apache.commons.digester.Digester.createSAXException(Digester.java:2566)
    at org.apache.commons.digester.Digester.startElement(Digester.java:1276)
    at org.apache.xerces.parsers.AbstractSAXParser.startElement(Unknown Source)
    at org.apache.xerces.impl.dtd.XMLDTDValidator.startElement(Unknown Source)
    at org.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanStartElement(Unknown Source)
    at org.apache.xerces.impl.XMLDocumentScannerImpl$ContentDispatcher.scanRootElementHook(Unknown Source)
    at org.apache.xerces.impl.XMLDocumentFragmentScannerImpl$FragmentContentDispatcher.dispatch(Unknown Source)
    at org.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanDocument(Unknown Source)
    at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)
    at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)
    at org.apache.xerces.parsers.XMLParser.parse(Unknown Source)
    at org.apache.xerces.parsers.AbstractSAXParser.parse(Unknown Source)
    at org.apache.commons.digester.Digester.parse(Digester.java:1605)
    at ge.ifm.common.utility.IFMCacheListener.contextInitialized(IFMCacheListener.java:87)
    ... 65 more
Caused by: java.lang.ClassNotFoundException: ge.ifm.valueObjects.ConfVO
    at com.sun.enterprise.loader.ASURLClassLoader.findClassData(ASURLClassLoader.java:808)
    at com.sun.enterprise.loader.ASURLClassLoader.findClass(ASURLClassLoader.java:696)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
    at org.apache.commons.digester.ObjectCreateRule.begin(ObjectCreateRule.java:252)
    at org.apache.commons.digester.Rule.begin(Rule.java:200)
    at org.apache.commons.digester.Digester.startElement(Digester.java:1273)
    ... 77 more 
```

尽管该类存在于构建中，但我们正面临此类未找到错误。

请提出相同的建议....

# java - 从 RunTime.exec() 执行 java 命令的正确方法是什么

> ID：12908805
> 
> 赞同：2
> 
> 时间：2012-10-16T06:34:46.940
> 
> 标签：java

我需要使用 Runtime.exec() 运行命令：

```
java -cp .:/s/v-lib/* tDesigner -inRs /scg.rsp -out /g.plan; 
```

在这里，我需要将 /s/v-lib 目录中存在的所有 jar 添加到我的类路径中。我需要单独添加它们吗？

`tDesigner`是我的课。
`-inRs /scg.rsp -out /g.plan`是类的论据。

构造命令字符串的正确方法是什么？
这个对吗：

```
String[] command = {"java", "-cp", ".:/s/v-lib/*", "tDesigner" ,"-inRs", "/scg.rsp" ,"-out", "g.plan"}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T06:40:34.360

调用`exec()`看起来是正确的。

关于类路径，从 java 1.5 开始，您可以在类路径中指定一个*目录*（而不是 jars），在这种情况下，在那里找到的所有 jars 都将添加到类路径中。

# python - 无法在 centos 上安装 psycopg2

> ID：12908807
> 
> 赞同：3
> 
> 时间：2012-10-16T06:34:54.050
> 
> 标签：python, centos, openerp, centos5

我使用`pip`和`easy_install`。

我收到此错误消息：

```
Downloading/unpacking psycopg2

Running setup.py egg_info for package psycopg2

error: invalid Python installation: unable to open /usr/include/python2.6/pyconfig.h (No such file or directory)

Complete output from command python setup.py egg_info:

running egg_info

writing pip-egg-info/psycopg2.egg-info/PKG-INFO

writing top-level names to pip-egg-info/psycopg2.egg-info/top_level.txt

writing dependency_links to pip-egg-info/psycopg2.egg-info/dependency_links.txt

warning: manifest_maker: standard file '-c' not found

error: invalid Python installation: unable to open /usr/include/python2.6/pyconfig.h (No such file or directory)

----------------------------------------
Command python setup.py egg_info failed with error code 1 in /tmp/pip-build/psycopg2

Storing complete log in /root/.pip/pip.log 
```

真的需要你们的帮助。。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-16T06:41:39.887

编辑：我第一次将其读为“pgconfig”，而不是“pyconfig”。

如果您缺少`pyconfig.h`，那么您可能缺少**Python**开发包。

尝试`yum install python-devel`然后再次安装 psycopg2。

`postgresql-devel`（如果您没有安装该软件包，您仍然需要该软件包）

# android - 将 GridView 设置为水平居中

> ID：12908813
> 
> 赞同：0
> 
> 时间：2012-10-16T06:35:25.217
> 
> 标签：android, gridview

我有一个应用程序，我在其中使用 GridView 来显示一些不同数字的图像。我想将 GridView 水平设置在屏幕中央，以便在每部不同尺寸或密度像素的手机上完美运行。提前致谢。代码

```
<GridView
    android:id="@+id/gridview"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:gravity="center"
    android:horizontalSpacing="5dp"
    android:numColumns="3"
    android:stretchMode="columnWidth"
    android:verticalSpacing="5dp" >
</GridView> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T12:08:59.037

您的“GridView”必须在某些父布局中，例如 Linearlayout.Set 遵循该父布局的两个属性

```
 android:layout_gravity="center"
 android:gravity="center" 
```

注意：您必须同时使用这两个属性

# android - 生成最终存档时出错：java.lang.ArrayIndexOutOfBoundsException Unknown Android Packaging

> ID：12908814
> 
> 赞同：0
> 
> 时间：2012-10-16T06:35:25.490
> 
> 标签：android, packaging

对于我在 Eclipse 中创建的任何 Android 项目，我的问题选项卡中都会出现错误。错误是位置未知的**“Android 打包问题”。**

```
error generating final archive: java.lang.ArrayIndexOutOfBoundsException: 13    test        Unknown Android Packaging Problem 
```

我无法确定这个问题是什么，清理项目并不能解决问题。重新启动应用程序时出现相同的错误。我正在使用带有 ADT 版本 20.0.3 的 eclipse 3.7.2 32bit 并且项目正在使用 sdk 版本 4.0.3 15。有人可以告诉我我可以研究哪些领域吗？

# php - 如何使用 PHP 从 http.conf 中检索变量

> ID：12908816
> 
> 赞同：1
> 
> 时间：2012-10-16T06:35:35.283
> 
> 标签：php, apache

如何使用 PHP 从 http.conf 检索变量，例如别名 /MyDirectory/ "C:/MyDirectory/MyDirectory/"。有没有比打开 http.conf 并逐行阅读更简单的方法？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T06:42:13.757

您总是可以使用[fgets()](http://www.php.net/manual/en/function.fgets.php)从文件中读取单行。但是你为什么要从你的程序中修改你的服务器设置呢？

```
$handle = fopen('httpd.conf', 'r');
if($handle) {
    while($buffer = fgets($handle) !== false) {
        // do something with the data you read
    }
    if (!feof($handle)) {
        echo 'An error occured';
    }
    fclose($handle);
} 
```

# sharepoint - SharePoint 2010 - 自定义 RSS 查看器 Web 部件中的多个 RSS 源支持

> ID：12908818
> 
> 赞同：3
> 
> 时间：2012-10-16T06:35:48.537
> 
> 标签：sharepoint, rss, web-parts, viewer

我通过扩展 Microsoft.SharePoint.Portal.WebControls 中的“RSSAggregatorWebPart”类创建了一个自定义 RSS 查看器 Web 部件。我是否可以通过代码在此 Web 部件中启用多个提要支持，默认情况下它仅支持单个提要。

我知道具有多个提要支持的外部 Web 部件的可用性，但我需要为此创建一个创建 OOB 解决方案。

伙计们，有什么想法吗？

# firefox - moz-column-count 导致 Firefox 崩溃

> ID：12908820
> 
> 赞同：1
> 
> 时间：2012-10-16T06:35:57.483
> 
> 标签：firefox, css

如果我使用以下代码，如果我刷新页面，Firefox (16.0.1) 会在几秒钟后崩溃。如果我删除代码，它不会崩溃。我的代码或 FF 有问题吗？

```
#wrap{
    -moz-column-count: 3;
    -moz-column-gap: 5px;
    -webkit-column-count: 3;
    -webkit-column-gap: 5px;
    column-count: 3;
    column-gap: 5px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T15:44:35.107

你试过其他版本的FF吗？其它浏览器？

无论如何，如果 Firefox 崩溃，问题在于 Firefox，而不是您的代码。

这就像[指责一些简单的 html](http://www.howtogeek.com/howto/33394/how-to-crash-any-version-of-internet-explorer-with-simple-html/)导致[任何版本的 IE 崩溃](http://crashie8.com/)一样。

您应该尝试找出导致它崩溃的确切几行（是它`-moz-column-count`还是`-moz-column-gab`？还是它`column-count`？还是某些特定的 css 顺序？），制作最简单的演示案例并[填写错误报告](https://bugzilla.mozilla.org)。

# c# - 防止 CODED UI 中的回发

> ID：12908821
> 
> 赞同：0
> 
> 时间：2012-10-16T06:36:01.500
> 
> 标签：c#, coded-ui-tests

我正在使用 WINDOWS 8 RTM，IE10 我已经为一个列表创建了一个编码 ui，其中项目单击一个项目会进行回发，并且由于这个回发，它的详细信息会出现在另一个框架中我的编码 UI 失败

如何防止在我正在编写编码 ui 的页面上回发我也无法访问页面的源代码，因此无法给出“return false”；

# perl - 在 Perl 中使用 *public* 密钥进行 RSA 解密

> ID：12908825
> 
> 赞同：0
> 
> 时间：2012-10-16T06:36:21.463
> 
> 标签：perl, encryption, openssl, rsa

我正在尝试使用公钥解密 RSA 加密*消息*。

使用`Crypt::OpenSSL::RSA`，我可以使用任一密钥进行加密，但我只能使用私钥解密。尝试使用公钥解密：

```
use Crypt::OpenSSL::RSA;
use MIME::Base64;
use File::Slurp;

my $public_key  = 'rsa.pub.pem';
#my $private_key = 'rsa.priv.pem';
my $rsa_public  = Crypt::OpenSSL::RSA->new_public_key(scalar read_file $public_key);
#my $rsa_private = Crypt::OpenSSL::RSA->new_private_key(scalar read_file $private_key);

my $ciphertext_b64 = 'cqyPNNfqYaUeIsM1yAz7IsQ760Bkd4IPaatHnMQtQAMKtYTEUqFHwnSZ4hg2
pkoJM1N5Ejlv6Eqkk/ZaMWl1nTDOxRDj0V6PARQPqz3QF1UGWkSMxMt/DlSn
AtrRXgjvrILbMX5BsV2S5mHcLoCeNVb+jdnX0x0Uu/AAFPsByPRrt1yM1ORo
KcP+0ENvcvJ8yGOxJ2jOEmTFkQM5kjNDIFmLUlt6qODdTGWvYWR2CDduLO4m
qiyAt4yK5K3vwMybAG5ceRGb/kmMSW10EnvbryIdDGVGS8Zvodu3xqtbM1Yo
tdtZRDkcUcOYlUi3VRvSTimatVkJPG8QDlZofrBA0w==';

my $ciphertext = decode_base64($ciphertext_b64);

print $rsa_public->decrypt($ciphertext);
#print $rsa_private->decrypt($ciphertext); 
```

结果是：`Public keys cannot decrypt at test.pl line 19.`

顺便说一句，Ruby 似乎使用任一密钥加密和解密都没有问题（这就是我目前处于这种情况的原因）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T07:42:35.537

[您是否意识到Crypt::OpenSSL::RSA](https://metacpan.org/module/Crypt%3a%3aOpenSSL%3a%3aRSA#Instance-Methods)中有一种`public_decrypt`方法？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-11-04T14:54:46.927

```
#!/usr/bin/env perl
use strict;
use warnings;
use MIME::Base64;
use Data::Dumper;
use File::Slurp   qw(read_file);
use Crypt::OpenSSL::RSA;
use Convert::PEM;

my $rsa = Crypt::OpenSSL::RSA->generate_key(2048);
my $keyFile = "pri1.pem";
my $pubfile = "pub.pem";

my $string_Key = read_file($keyFile);
my $string_pub = read_file($pubfile);
my $rsa_pub = Crypt::OpenSSL::RSA->new_public_key($string_pub);
my $rsa_priv = Crypt::OpenSSL::RSA->new_private_key($string_Key);
$rsa_pub->use_pkcs1_padding();
my $plaintext = "Hello world";
my $ciphertext = $rsa_pub->encrypt($plaintext);
print encode_base64($ciphertext);

################################################

################################################################3

$rsa_priv->use_pkcs1_padding();
my $decrypttext = $rsa_priv->decrypt($ciphertext);
print "\ndecrypttext:\n", $decrypttext; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T09:56:32.287

您应该使用私钥解密或使用公钥验证签名并使用适当的方法来执行此操作。从您的问题中不清楚您是进行加密还是签名。

如果您尝试“解密 RSA 加密消息”，那么您想要做什么以及您正在使用的库实际上在做什么都非常不清楚。用于加密和数字签名的填充对于 RSA 是不同的。因此，如果您调用错误的方法，那么在最好的情况下，您会收到一条错误消息，而在最坏的情况下，您最终会得到一个不安全的方案。

# android - 我在哪里可以下载 Android 的 dalvik.system 包？

> ID：12908831
> 
> 赞同：0
> 
> 时间：2012-10-16T06:36:36.657
> 
> 标签：android, dalvik

有`dalvik.system`包是android.jar，但在android sdk 中没有这个包的来源。我想下载 android 15 的完整资源？在哪里得到它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T07:59:21.970

有关下载完整 android 源代码树的说明，请参阅[http://s.android.com/source/index.html](http://s.android.com/source/index.html)。

特别是包含 dalvik.system 包的 libcore 项目位于[https://android.googlesource.com/platform/libcore/](https://android.googlesource.com/platform/libcore/)

```
git clone https://android.googlesource.com/platform/libcore 
```

# c# - 使用自定义绑定时 WCF REST 服务未传递 POST 请求正文流

> ID：12908833
> 
> 赞同：2
> 
> 时间：2012-10-16T06:36:52.540
> 
> 标签：c#, .net, wcf, web-services

跟进我[在这里](https://stackoverflow.com/questions/12689086/adding-gzip-to-wcf-rest-service-in-c-sharp/12815919)提出的上一个问题的解决方案。看来我现在有一个问题，如果我在我的 .NET4 Web 服务中使用自定义绑定，那么当我实现 Web 服务 WebInvoke 合同的方法包含请求主体 Stream 的参数时，它们将不再被调用。

因此，这是从上面的链接中找到的运行 Web 服务的代码：

```
webserviceHost = new WebServiceHost(typeof(Service1), new Uri("http://localhost:8080));
webserviceHost.AddServiceEndpoint(typeof(IService), getBinding(), "webservice").Behaviors.Add(new WebHttpBehavior());
webserviceHost.Description.Behaviors.Add(new ServiceMetadataBehavior { HttpGetEnabled = true });
webserviceHost.Open(); 
```

这是定义的 WebInvoke 服务合同：

```
[WebInvoke(UriTemplate = "import_data?param={value}", Method = "POST", RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json)]
WebResult importOrder(string value, Stream httpRequestPostBody); 
```

这是实现上述合同的方法：

```
public WebResult importOrder(String value, Stream httpRequestPostBody)
{
    doSomething(value, httpRequestPostBody);
} 
```

因此，如果我尝试通过 Fiddler 向 Web 服务端点合同发出 HTTP 请求，它将返回连接重置 HTTP 错误响应。如果我删除 Stream httpRequestPostBody 参数，那么它将运行该方法，但我无法访问请求正文中的原始 JSON 数据（我可以获取正文，但它是 XML 形式的）。所以我只能收集到我在自定义绑定中遗漏了一些东西，以确保可以传递请求的主体流。有人有任何线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T02:45:51.007

所以我能想出的唯一答案是从合同中删除流，然后使用 .NET 的 DataContractJsonSerializer 将 HTTP 请求正文消息从 XML 转换回 JSON。如下所示

合同：

```
[WebInvoke(UriTemplate = "import_data?param={value}", Method = "POST", RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json)]
WebResult importOrder(string value); 
```

执行：

```
public WebResult importOrder(String value){
    MyObject myObject = (MyObject)new DataContractJsonSerializer(typeof(MyObject)).ReadObject(OperationContext.Current.RequestContext.RequestMessage.GetReaderAtBodyContents());

    doSomething(value, myObject);
} 
```

这个解决方案并不理想，因为消息正在从 RAW 转换为 JSON 到 XML 到 MyObject，此外还不允许我轻松使用更好的第 3 方 JSON 解析器并控制如何从传入数据初始化我的对象。如果有人有更好的解决方案，我会全力以赴。

# linux - 分叉调用未输入子代码的原因可能是什么

> ID：12908839
> 
> 赞同：0
> 
> 时间：2012-10-16T06:37:39.043
> 
> 标签：linux, fork, parent-child, telnet

我在程序函数中有这段代码。并且有一个测试脚本会命中此代码路径。脚本多次执行此函数（~1000）。

fork() 调用成功，因为我可以从父块 syslog 中看到子 pid，但从子块中看不到任何内容。

这并不总是发生。一百次尝试只会发生一次。

知道发生这种情况的一般原因是什么。

我应该寻找什么来获得有关失败的更多信息。

```
int i;

if ((i = fork()) < 0) {
    syslog(LOG_NOTICE, "(%s): fork failed!\n", __func__);
}
if (i) {
    syslog(LOG_NOTICE, "(%s): fork Parent: id: %d\n", __func__, i);
} else {
    syslog(LOG_NOTICE, "(%s): fork child\n", __func__);
    /* Do something */
}

Output:
telnetd[24600]: (startslave): fork Parent: id: 24601
<Thats it, no log after this!!> 
```

确切地说，这是 freeBSD telnetd startslave() 代码的一部分，脚本只是尝试使用 telnet 登录并注销 1000 次，有时会失败。失败是有保证的，它可能在 100 次尝试或 700 次尝试后发生。

# ios - 带路线的离线地图 - iOS

> ID：12908840
> 
> 赞同：6
> 
> 时间：2012-10-16T06:37:45.817
> 
> 标签：ios, xcode, map, routing, offline

我正在处理一个与离线地图应用程序相关的项目。因此，我搜索了显示定义区域的离线地图。我使用[MapBox](http://mapbox.com)进行离线地图绘制。我可以在这张地图上添加注释并画线。

但我的要求是带路由的离线地图。我受够了找到嵌入到 Xcode 的离线路由库或离线路由引擎。

感谢你们中的任何人有任何线索或示例项目/代码来实现这个

注意：[这个](https://stackoverflow.com/questions/12525573/offline-iphone-map-with-offline-routing?rq=1)问题与我的问题有关。也没有人回复这个

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T13:10:50.023

离线意味着没有互联网，iPhone 在大多数情况下仍然能够从 GPS 获取用户当前位置。这意味着您可以非常确信您可以在离线时找出用户的当前位置。

离线路由的问题是电话很笨，它只记住要显示的瓷砖的 x MB 数据量。

路由是完全不同的东西，它需要 A 点和 B 点，然后计算出最短、最快、最便宜或 A 和 B 之间的所有点。

这需要比磁贴更多的时间来完成，毕竟如果你从 MVC 的角度来思考，磁贴只是转储视图，除了它们内部的东西之外，它们对周围的东西知之甚少。它将是计算路线的“控制器”，为此，您需要拥有跨越所需区域的所有数据以进行路由。

对于每个地图服务，您会找到不同的路线，可能不是根据实际路径，而是在估计的时间、精力等方面，这意味着如果您有自己的地图（在数据库中离线），这取决于您使用该数据，因此您应该制定自己的路由算法，我确定这不是您想要做的。

那么你有什么选择呢？目前，这在您想要的范围内是不可能的。即使你有一个离线地图数据库，你仍然需要一个路由算法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-20T17:04:43.457

在离线情况下，您也可以仅使用 GPS 获取当前位置，并且您可以绘制从当前位置到有趣点的叠加线，因为您必须进行一些计算

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-22T12:03:36.170

您可以通过制作包含 (Street names, routes,edges) 的图形数据来使用 graphhopper 库进行离线路由。图形数据由 .pbf 文件获取，该文件可由（使用此： http: [//download.geofabrik.de ）获取，并使用由（](http://download.geofabrik.de) [https://github.com/graphhopper/graphhopper](https://github.com/graphhopper/graphhopper-ios/tree/master/graphhopper-ios-sample)）给出的命令（在终端中）[-ios/tree/master/graphhopper-ios-sample](https://github.com/graphhopper/graphhopper-ios/tree/master/graphhopper-ios-sample) ) 将 .pbf 转换为图形数据。然后我们可以使用它的指令进行离线路由（所有在graphhopper iOS示例中给出）。请仔细参考。因为我已经成功完成并完成了我的项目。

# c++ - 结合字符串c ++的映射和数组

> ID：12908841
> 
> 赞同：4
> 
> 时间：2012-10-16T06:37:49.297
> 
> 标签：c++, arrays, map

我正在编写一个代码来检查一个人是否曾经访问过某个特定的地方，如果为真，则不做任何其他事情，将新的地方添加到访问过的地方列表中我正在使用地图将学生姓名存储为键和数组存放地点如下

```
#include<map>
using namespace std;

map<string,string[]> stu_plac;
map<string,string[])::iterator it; 
```

我找不到在地图上搜索的正确方法

我尝试了以下方法：

```
bool exist=false;
if(stu_plac.count(name))
{
    it=stu_plac.find(name);
    for(auto tt=(*it).second.begin(); tt!=(*it).second.end(); tt++)
    {
        if (tt.compare(place)==0)//exist
        {
            exist=true;
        }
        break;
    }
    if (!exist)
    {
        (*it)second[++tt]=place;
    }
}
else
{
    stu_plac.insert(pair<string,string[]>(name,place));
} 
```

我认为问题出在字符串迭代器的数组上，你能帮我找到正确的方法吗？我是否需要使用 multimap 或其他数据构造器来执行此操作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T06:42:31.087

像这样的数据结构`map<string, vector<string> >`将起作用。

您可以使用`for (size_t i = 0; i < it->second.size(); i++)`来遍历向量。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-16T06:55:19.193

看起来你想要一张字符串地图 -> 地点

```
typedef map<string,std::set<string> > Map; 
```

为您的片段调整它（有*很多*问题，从令人困惑的格式开始......）：

```
#include<map>
#include<set>
#include<string>
using namespace std;

typedef map<string,std::set<string> > Map;
typedef Map::iterator It;

int main()
{
    bool exist=false;
    Map stu_plac;
    string name = "name";
    string place = "0.0.0.0";

    It it = stu_plac.find(name);
    if (stu_plac.end() != it)
    {
        std::set<string>& visits = it->second;
        exist = visits.end() != visits.find(place);

        if (!exist)
            visits.insert(place);
    }
} 
```

但实际上您可能更喜欢使用[`std::multimap`](http://en.cppreference.com/w/cpp/container/multimap)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-16T06:56:16.673

我不会使用数组，因为我不知道它的大小，我更喜欢使用向量或列表，而不是使用布尔变量，我会插入然后中断循环，所以我的算法如下：

```
 std::map<std::string, std::list<std::string> > stu_plac;
    std::map<std::string, std::list<std::string> >::iterator it;
    std::string myName("Edu");
    std::string myPlace("Madrid"); 
```

......

```
for( it = stu_plac.begin(); it != stu_plac.end(); it++){
            if(it->first == myName){
                    std::list<std::string>::iterator place = std::find(it->second.begin(), it->second.end(), myPlace);
                    if(place == it->second.end()){
                            it->second.push_back(myPlace);
                            break;
                    }
            }
    } 
```

看看你可以使用你得到的迭代器来添加你想要的城市。

顺便说一句，如果不是 C++11，我不会使用“auto”变量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T06:48:14.800

C++ 中的数组是从 C 继承的类型或构造之一，因此内置数组“类型”没有任何迭代器。它也不会跟踪其当前大小，因此您无法在不存储数组大小的情况下获取数组的开始和结束迭代器。

改为使用`std::map< std::string, std::vector<std::string> >`。

# android - 如何在 android 中旋转多个图像并在 XML 代码中相互叠加？

> ID：12908844
> 
> 赞同：0
> 
> 时间：2012-10-16T06:38:07.283
> 
> 标签：android, image, rotation

我想一张一张地显示如下图所示的旋转图像。我如何在xml中编码。我无法使用 android:rotation="20" 旋转图像。我必须显示图像中显示的图像，从左到右一对一。

![在此处输入图像描述](../Images/3a2504e2d2d5a4a3081a3e11dc092d65.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T11:21:52.850

```
public class Rotate {

public static Bitmap rotate(Bitmap src, float degree) {
    // create new matrix
    Matrix matrix = new Matrix();
    // setup rotation degree
    matrix.postRotate(degree);

    // return new bitmap rotated using matrix
    return Bitmap.createBitmap(src, 0, 0, src.getWidth(), src.getHeight(), matrix, true);
} 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T06:48:52.913

最好是写方法，在里面写RotateAnimation代码，并相应地传递参数来旋转每一个图像。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T07:00:15.740

看看这段代码

```
<?xml version="1.0" encoding="utf-8"?>
<rotate xmlns:android="http://schemas.android.com/apk/res/android" 
        android:fromDegrees="90"
        android:toDegrees="90"
        android:pivotX="50%"
        android:pivotY="50%"
        android:drawable="@drawable/image">
</rotate> 
```

确保你`android:fromDegrees`是正确的。

# c# - 启用了视图状态但放置在禁用视图状态的页面内的用户控件。我如何访问？

> ID：12908848
> 
> 赞同：0
> 
> 时间：2012-10-16T06:38:29.907
> 
> 标签：c#, asp.net

我有一个用户控件，启用了视图状态。我在禁用视图状态的页面上使用它。如何访问视图信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T07:02:17.650

据我所知， ViewState 属性是 Control 类的受保护成员，因此无法从其他对象访问。如果您只是在页面声明中编写“ViewState”，它实际上是该页面对象的成员，在您的情况下它被禁用。

但是，您应该能够在您的用户控件中访问您的用户控件的 ViewState。

看到这个解释：http: [//msdn.microsoft.com/en-us/library/ms972976.aspx#viewstate_topic5](http://msdn.microsoft.com/en-us/library/ms972976.aspx#viewstate_topic5)

但无论如何，这看起来并不是在网页上存储状态信息的好方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T06:45:47.937

如果您在页面上禁用 ViewState，则该页面上**没有**呈现的控件将具有可用的 ViewState 信息。

如果您只想为某些控件而不是所有控件禁用 ViewState，那么最好的选择是 ControlState，如此[处所示](http://msdn.microsoft.com/en-us/library/1whwt1k7.aspx)。

# php - Windows 服务在 php 中执行计划电子邮件

> ID：12908851
> 
> 赞同：0
> 
> 时间：2012-10-16T06:38:55.250
> 
> 标签：php, codeigniter, email, windows-services, scheduling

> **可能重复：**
> [在 php 中安排电子邮件](https://stackoverflow.com/questions/12893499/schedule-an-email-in-php)

我想安排我的 php 脚本，该脚本使用 Windows 服务发送电子邮件，因为该网站托管在 Windows 机器中。我正在寻找不涉及 cron 作业的解决方案。我希望用户安排时间，Windows 服务应该在预定时间执行我的 php 电子邮件脚本，以便在预定的用户时间发送电子邮件。我想用php编写整个代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T06:47:07.070

您无权访问 Windows 机器上的 cron 作业；）但是，如果没有窗口的调度程序，就没有办法做到这一点，除非您有一个非常活跃的站点，有人总是在上面，然后您可以检查并在每个页面加载或类似的东西上运行。否则，我会编写一个脚本来检查数据库何时发送电子邮件 - 并提取假设在该分钟（或半小时，或您允许用户选择的任何时间间隔）运行的那些，并安排通过 Windows 调度程序每分钟/间隔运行该脚本。

# awk - 输入命令后从命令行读取 awk 中的变量

> ID：12908852
> 
> 赞同：0
> 
> 时间：2012-10-16T06:38:57.137
> 
> 标签：awk

我尝试使用 awk 搜索文件。如何让 awk 从命令行读取变量作为名称以在文件中进行搜索：

这是我用来搜索文件的常规方式，我可以要求用户输入要在 file.txt 中搜索的名称

```
awk -f myAwk.awk file.txt 
```

我该如何管理它：

```
awk -f myAwk.awk file.txt nameToSearch 
```

如何使用 ARGC 和 ARGV 在 file.txt 中搜索 nameToSearch？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T06:42:17.947

您可能正在寻找的是

```
awk [-W option] [-F value] [-v var=value] [--] 'program text' [file ...] 
```

所以

```
awk -v MYVAR=nameToSearch -v OTHERVAR=somethingElse -f myAwk.awk file.txt 
```

是这样吗？当然开关的顺序（ -f, -v ）并不重要。显然，您需要在 awk 程序本身中包含 MYVAR ( OTHERVAR ) 作为变量标识符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T06:57:31.443

要将变量传递给 awk，可以使用`-v`命令。例如：

```
cat file.txt | awk -v p="stringToSearch" '$0 ~ p' 
```

在此命令中，将 stringToSearch 替换为模式（请保留双引号，它们对于保留空格很有用）。awk 命令`$0 ~ p`将当前行与给定模式进行比较。

另一种方法是从 shell 构建 awk 命令：

```
p="stringToSearch"
awk "/$p/" file.txt 
```

您必须在命令中使用双引号来强制扩展`$p`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T06:59:23.147

如果允许更改参数的顺序，那么我们可以这样做：

```
awk -f myAwk.awk nameToSearch file.txt 
```

那么你可以这样做：

```
awk 'NR==1 { nameToSearch = $0; next} { ... rest of myAwk.awk here ...}' nameToSearch file.txt 
```

您当然可以将`NR==1 {...}`块添加到`myAwk.awk`文件的开头，然后继续使用：

```
awk -f myAwk.awk nameToSearch file.txt 
```

Piotr Wadas 描述的技术具有相同的效果：

```
awk -v nameToSearch=whatever -f myAwk.awk file.txt 
```

这就是我自己使用的，而不是`whatever`作为附加参数传递给脚本。`whatever`作为附加参数传递是脚本编写者在将`-v`设施添加到 awk 之前必须做的事情。如果写作`-v nameToSearch=`太冗长，那么我会将整个内容包装在一个 shell 脚本中，然后说：

```
myShellScript whatever file.txt 
```

但是你问如何通过`whatever`作为附加参数传递给 awk 脚本来做到这一点，所以这就是我所演示的。

# c++ - 在分配 scoped_ptr 之前处理异常

> ID：12908854
> 
> 赞同：1
> 
> 时间：2012-10-16T06:39:12.907
> 
> 标签：c++, exception, boost, smart-pointers

我的班级的成员是在创建对象时`boost::scoped_ptr`设置的。`(T*)0`该类有一个`init()`方法，它实际上用一个新对象初始化智能指针。

*但是，如果在该智能指针具有有效引用之前*引发异常，它会非常不聪明地尝试删除 null（释放）或断言（调试）。

**如何在不修改原始源代码的情况下让它在销毁时忽略空指针；并且，如果那不可能，是否有更合适的替代智能指针类来代替使用？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T06:42:05.343

您可以尝试`std::unique_ptr`代替`boost::scoped_ptr`并提供一个自定义删除函数来检查底层对象的状态 - 请参阅[http://en.cppreference.com/w/cpp/memory/unique_ptr](http://en.cppreference.com/w/cpp/memory/unique_ptr)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T06:54:09.060

boost::scoped_ptr 实际上忽略了其析构函数中的空指针。boost::scoped_ptr 使用 boost::checked_delete() 进行删除。boost::checked_delete() 使用 plain`delete`来删除（boost::checked_delete() 也检查 T 不完整）。

并且您可以使用 delete 删除空指针（与 不同`free()`）。您确定错误确实在 boost::scoped_ptr 中吗？

# database - 如何打印 JTable？

> ID：12908855
> 
> 赞同：0
> 
> 时间：2012-10-16T06:39:16.160
> 
> 标签：database, swing, jtable

我有一个显示在 a 中的整个数据库`JTable`，我添加了一个打印按钮，但它的作用是将数据中的数据转换`JTable`为`.csv`文件，命令 excel 打开它并且用户可以打印它，但它看起来很丑陋。有没有办法将`JTable`组件发送到打印机？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T13:46:18.623

`JTable`在called下有一个方法`print()`。会为你节省很多。见下文 ：-

```
package com.tanyasis.librarymanager;

import java.awt.HeadlessException;
import java.awt.print.PrinterException;
import java.text.MessageFormat;

import javax.swing.JTable;

/**
 * Used to provide printing information and adding information that might be
 * important in a page such as page header, contents and footer. This class
 * makes sure that all contents of a table fit in the given page.
 * 
 * @author Tanyasis Mwanik
 * 
 */
public class PrintTable {

    private JTable table;
    private MessageFormat headerFormat, footerFormat;

    /**
     * Prints the table and provide post printing information to the user if it
     * was succesful
     * 
     * @param table
     *            <code>JTable</code> to be printed
     * @param tableTitle
     *            <code>String</code> to be used as the table header/title
     */
    public PrintTable(JTable table, String tableTitle) {
        // TODO Auto-generated constructor stub
        this.setTable(table);
        // Sets the table header
        headerFormat = new MessageFormat(tableTitle);
        // Sets the table footer
        footerFormat = new MessageFormat("Page {0}");

        try {
            boolean complete = table.print(JTable.PrintMode.FIT_WIDTH,
                    headerFormat, footerFormat, true, null, true, null);

            if (complete) {
                new ConfirmationClass(
                        "<html><h2>Records Printed Successfully</h2></html>");
            }

        } catch (HeadlessException | PrinterException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

    /**
     * @return the table
     */
    public JTable getTable() {
        return table;
    }

    /**
     * @param table
     *            the table to set
     */
    public void setTable(JTable table) {
        this.table = table;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-01T08:54:34.983

```
 button.addActionListener(new ActionListener() {
        @Override
        public void actionPerformed(ActionEvent e) {
             //TODO Auto-generated method stub
                MessageFormat header=new MessageFormat("Your Invoice");
                MessageFormat footer=new MessageFormat("Page");
            try 
            {

                table.print(JTable.PrintMode.FIT_WIDTH, header, footer);
            }

            catch(Exception ae)
            { 
                System.err.println("Error printing: " + ae.getMessage());

                }
        }
    }); 
```

它可能会有所帮助:)

# jquery - 修改没有HTML的css

> ID：12908856
> 
> 赞同：-2
> 
> 时间：2012-10-16T06:39:18.683
> 
> 标签：jquery, css, candy

我正在开发一个基于 jQuery/Strophe/mustache 的名为 Candy 的聊天应用程序。现在我想修改 CSS 文件，但问题是：我该怎么做？我没有 HTML 代码来查看 CSS 标记的使用方式。

```
/**
 * Chat CSS
 *
 * @author Michael <michael.weibel@gmail.com>
 * @author Patrick <patrick.stadler@gmail.com>
 * @copyright 2011 Amiado Group AG, All rights reserved.
 */
html, body {
    margin: 0;
    padding: 0;
    font-family: Arial, Helvetica, sans-serif;
}

#candy {
    position: absolute;
    top: 0;
    bottom: 0;
    right: 0;
    left: 0;
    background-color: #ccc;
    color: #333;
    overflow: hidden;
}

a {
    color: #333;
    text-decoration: none;
}

ul {
    list-style: none;
    padding: 0;
    margin: 0;
}

#chat-tabs {
    list-style: none;
    margin: 0 200px 0 0;
    padding: 0;
    overflow: auto;
    overflow-y: hidden;
}

#chat-tabs li {
    margin: 0;
    float: left;
    position: relative;
    border-right: 1px solid #aaa;
    white-space: nowrap;
}

#chat-tabs li a {
    background-color: #ddd;
    padding: 6px 50px 4px 10px;
    display: inline-block;
    color: #666;
    height: 20px;
}

#chat-tabs li.active a {
    background-color: white;
    color: black;
}

#chat-tabs li a.transition {
    position: absolute;
    top: 0;
    right: 0;
    padding: 0;
    width: 0px;
    height: 0px;
    background: url(img/tab-transitions.png) repeat-y left;
}

#chat-tabs li a.close {
    background-color: transparent;
    position: absolute;
    top: 0;
    right: 0;
    height: auto;
    padding: 5px;
    margin: 1px 5px 0 2px;
    color: #999;
}

#chat-tabs li.active a.transition {
    color: gray;
    background: url(img/tab-transitions.png) repeat-y -50px;
}

#chat-tabs li a.close:hover, #chat-tabs li.active a.close:hover {
    color: black;
}

#chat-tabs li .unread {
    color: white;
    background-color: #9b1414;
    padding: 2px 4px;
    font-weight: bold;
    font-size: 10px;
    position: absolute;
    top: 6px;
    right: 22px;
    border-radius: 3px;
}

#chat-tabs li.offline a.label {
    text-decoration: line-through;
}

#chat-toolbar {
    position: fixed;
    bottom: 0;
    right: 0;
    font-size: 11px;
    color: #666;
    width: 200px;
    height: 24px;
    padding-top: 7px;
    border-top: 1px solid #aaa;
    background-color: #d9d9d9;
    display: none;
}

#chat-toolbar li {
    width: 16px;
    height: 16px;
    margin-left: 5px;
    float: left;
    display: inline-block;
    cursor: pointer;
    background-position: top left;
    background-repeat: no-repeat;
}

#chat-toolbar #emoticons-icon {
    background-image: url(img/action/emoticons.png);
}

#chat-toolbar .context {
    background-image: url(img/action/settings.png);
    display: none;
}

.role-moderator #chat-toolbar .context, .affiliation-owner #chat-toolbar .context {
    display: inline-block;
}

#chat-sound-control {
    background-image: url(img/action/sound-off.png);
}

#chat-sound-control.checked {
    background-image: url(img/action/sound-on.png);
}

#chat-autoscroll-control {
    background-image: url(img/action/autoscroll-off.png);
}

#chat-autoscroll-control.checked {
    background-image: url(img/action/autoscroll-on.png);
}

#chat-statusmessage-control {
    background: url(img/action/statusmessage-off.png);
}

#chat-statusmessage-control.checked {
    background: url(img/action/statusmessage-on.png);
}

#chat-toolbar .usercount {
    background-image: url(img/action/usercount.png);
    cursor: default;
    padding-left: 20px;
    width: auto;
    margin-right: 5px;
    float: right;
}

.usercount span {
    display: inline-block;
    padding: 1px 3px;
    background-color: #ccc;
    font-weight: bold;
    border-radius: 3px;
}

.room-pane {
    display: none;
}

.roster-pane {
    position: absolute;
    overflow: auto;
    top: 0;
    right: 0;
    bottom: 0;
    width: 200px;
    margin: 30px 0 32px 0;
}

.roster-pane .user {
    cursor: pointer;
    padding: 4px 7px;
    font-size: 12px;
    margin: 0 4px 2px 4px;
    opacity: 0;
    display: none;
    color: #666;
    clear: both;
    height: 15px;
    background-color: #ddd;
}

.roster-pane .user:hover {
    background-color: #eee;
}

.roster-pane .user.status-ignored {
    cursor: default;
}

.roster-pane .user.me {
    font-weight: bold;
    cursor: default;
}

.roster-pane .user.me:hover {
    background-color: #ddd;
}

.roster-pane .label {
    float: left;
    width: 110px;
    overflow: hidden;
    white-space: nowrap;
}

.roster-pane li {
    width: 16px;
    height: 16px;
    float: right;
    display: block;
    margin-left: 3px;
    background-repeat: no-repeat;
    background-position: center;
}

.roster-pane li.role {
    cursor: default;
    display: none;
}

.roster-pane li.role-moderator {
    background-image: url(img/roster/role-moderator.png);
    display: block;
}

.roster-pane li.affiliation-owner {
    background-image: url(img/roster/affiliation-owner.png);
    display: block;
}

.roster-pane li.ignore {
    background-image: url(img/roster/ignore.png);
    display: none;
}

.roster-pane .status-ignored li.ignore {
    display: block;
}

.roster-pane .me li.context {
    display: none;
}

.roster-pane li.context {
    background-image: url(img/action/menu.png);
    cursor: pointer;
}

.roster-pane li.context:hover {
    background-color: #ccc;
    border-radius: 4px;
}

.message-pane-wrapper {
    clear: both;
    overflow: auto;
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    height: auto;
    width: auto;
    margin: 30px 200px 32px 0;
    background-color: white;
    font-size: 13px;
}

.message-pane {
    margin: 0;
    padding: 5px 10px 2px 10px;
}

.message-pane dt {
    width: 55px;
    float: left;
    color: #888;
    font-size: 10px;
    text-align: right;
    padding-top: 4px;
}

.message-pane dd {
    overflow: auto;
    padding: 2px 0 1px 130px;
    margin: 0 0 2px 0;
    white-space: -o-pre-wrap; /* Opera */
    word-wrap: break-word; /* Internet Explorer 5.5+ */
}

.message-pane dd .label {
    font-weight: bold;
    white-space: nowrap;
    display: block;
    margin-left: -125px;
    width: 120px;
    float: left;
    overflow: hidden;
}

.message-pane .subject {
    color: #a00;
    font-weight: bold;
}

.message-pane .adminmessage {
    color: #a00;
    font-weight: bold;
}

.message-pane .infomessage {
    color: #888;
    font-style: italic;
    padding-left: 5px;
}

.message-pane .emoticon {
    vertical-align: text-bottom;
    height: 15px;
    width: 15px;
}

.message-form-wrapper {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    width: auto;
    margin-right: 200px;
    border-top: 1px solid #ccc;
    background-color: #f2f2f2;
    height: 31px;
}

.message-form {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    margin-right: 320px;
    padding: 0;
}

.message-form input {
    border: 0 none;
    padding: 5px 10px;
    font-size: 14px;
    width: 100%;
    display: block;
    outline-width: 0;
    background-color: #f2f2f2;
}

.message-form input.submit {
    cursor: pointer;
    background-color: #ccc;
    color: #666;
    position: fixed;
    bottom: 0;
    right: 0;
    margin: 3px 203px 3px 3px;
    padding: 5px 7px;
    width: auto;
    font-size: 12px;
    line-height: 12px;
    height: 25px;
    font-weight: bold;
    border-radius: 10px;
}

#tooltip {
    position: absolute;
    z-index: 10;
    display: none;
    margin: 18px -18px 2px -2px;
    color: white;
    font-size: 11px;
    padding: 5px 0;
    background: url(img/tooltip-arrows.gif) no-repeat left bottom;
}

#tooltip div {
    background-color: black;
    padding: 2px 5px;
    zoom: 1;
}

#context-menu {
    position: absolute;
    z-index: 10;
    display: none;
    padding: 15px 10px;
    margin: 8px -28px -8px -12px;
    background: url(img/context-arrows.gif) no-repeat left bottom;
}

#context-menu ul {
    background-color: black;
    color: white;
    font-size: 12px;
    padding: 2px;
    zoom: 1;
}

#context-menu li {
    padding: 3px 5px 3px 20px;
    line-height: 12px;
    cursor: pointer;
    margin-bottom: 2px;
    background: 1px no-repeat;
    white-space: nowrap;
}

#context-menu li:hover {
    background-color: #666;
}

#context-menu li:last-child {
    margin-bottom: 0;
}

#context-menu .private {
    background-image: url(img/action/private.png);
}

#context-menu .ignore {
    background-image: url(img/action/ignore.png);
}

#context-menu .unignore {
    background-image: url(img/action/unignore.png);
}

#context-menu .kick {
    background-image: url(img/action/kick.png);
}

#context-menu .ban {
    background-image: url(img/action/ban.png);
}

#context-menu .subject {
    background-image: url(img/action/subject.png);
}

#context-menu .emoticons {
    padding-left: 5px;
    width: 85px;
    white-space: normal;
}

#context-menu .emoticons:hover {
    background-color: transparent;
}

#context-menu .emoticons img {
    cursor: pointer;
    margin: 3px;
    height: 15px;
    width: 15px;
}

#chat-modal {
    background: url(img/modal-bg.png);
    width: 300px;
    padding: 20px 5px;
    color: white;
    font-size: 16px;
    position: fixed;
    left: 50%;
    top: 50%;
    margin-left: -155px;
    margin-top: -45px;
    text-align: center;
    display: none;
    z-index: 100;
    border-radius: 5px;
}

#chat-modal-overlay {
    position: absolute;
    left: 0;
    top: 0;
    right: 0;
    bottom: 0;
    z-index: 90;
    background-image: url(img/overlay.png);
}

#chat-modal.modal-login {
    display: block;
    margin-top: -100px;
}

#chat-modal-spinner {
    display: none;
    margin-left: 15px;
}

#chat-modal form {
    margin: 15px 0;
}

#chat-modal label, #chat-modal input, #chat-modal select {
    display: block;
    float: left;
    line-height: 26px;
    font-size: 16px;
    margin: 5px 0;
}

#chat-modal input, #chat-modal select {
    padding: 2px;
    line-height: 16px;
    width: 150px;
}

#chat-modal label {
     text-align: right;
     padding-right: 1em;
     clear: both;
     width: 100px;
}

#chat-modal input.button {
    float: none;
    display: block;
    margin: 5px auto;
    clear: both;
    position: relative;
    top: 10px;
    width: 200px;
}

#chat-modal .close {
    position: absolute;
    right: 0;
    display: none;
    padding: 0 5px;
    margin: -17px 3px 0 0;
    color: white;
    border-radius: 3px;
}

#chat-modal .close:hover {
    background-color: #333;
} 
```

这是 HTML 代码：

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Chat</title>
    <link rel="shortcut icon" href="../res/img/favicon.png" type="image/gif" />
    <link rel="stylesheet" type="text/css" href="../res/default.css" />

    <script type="text/javascript" src="libs/jquery-1.8.2.js"></script>
    <script type="text/javascript" src="libs/libs.min.js"></script>
    <script type="text/javascript" src="candy.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function() {
            Candy.init('https://123.123.123.123/http-bind/', {
                core: { debug: false, autojoin: ['test@conference.mydomain.com']  },
                view: { resources: '../res/' }
            });

            Candy.Core.connect('example@mydommain.com','123');
        });
    </script>
</head>
<body>
    <div id="candy"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T06:48:19.347

你不能。就像凯尔评论的那样：尝试从浏览器中获取源代码。还是你没有测试就写下了所有的 CSS？

您可以使用 Adob​​e Edge 代码（基于括号）在编辑 CSS 文件时获得实时预览，但您需要一个可以在使用您的 CSS 代码的浏览器中打开的 HTML 文件！

# mysql - SQL CASE WHEN STATME IN MYSQL 没有回复我想要的答案

> ID：12908860
> 
> 赞同：0
> 
> 时间：2012-10-16T06:39:32.223
> 
> 标签：mysql

```
SELECT d_main.Type,ItemGrade,ItmName,d_sub.ItmCode,
       (CASE WHEN d_sub.FulItmCode=item.ItmCode and d_main.Type='E' 
             THEN sum(d_sub.Qty)  ELSE 0 END) as f1,
       (CASE WHEN d_sub.FulItmCode=item.ItmCode and d_main.Type='L' 
             THEN  sum(d_sub.Qty)  ELSE 0 END) as f2
from d_main, d_sub, item
where d_main.FullNo=d_sub.FullNo and
      item.ItmCode = d_sub.ItmCode
group by d_main.Type,d_sub.ItmCode; 
```

输出

```
d_main.Type ItemGrade       ItmName d_sub.ItmCode   f1      f2  
----------- ---------       ------- -------------   --      --
E           A               AAAAAA  A005            5.000   0
E           B               BBBBBB  B006            1.000   0
E           C               CCCCCC  C015            3.050   0
L           A               AAAAAA  A005            0       5.750
L           B               BBBBBB  B006            0       8.000 
```

我想要的预期结果和答案

```
 A       AAAAAA      A005        5.000   5.750
    B       BBBBBB      B006        1.000   8.000
    C       CCCCCC      C015        3.050   0.000 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T06:50:12.943

停止对 d_main.type 进行分组，并对条件项求和（而不是条件总和）：

```
SELECT ItemGrade, ItmName, d_sub.ItmCode,
       sum(CASE WHEN d_sub.FulItmCode=item.ItmCode and d_main.Type='E' 
                THEN d_sub.Qty ELSE 0 END) as f1,
       sum(CASE WHEN d_sub.FulItmCode=item.ItmCode and d_main.Type='L' 
                THEN d_sub.Qty ELSE 0 END) as f2
from d_main, d_sub, item
where d_main.FullNo=d_sub.FullNo and
      item.ItmCode = d_sub.ItmCode
group d_sub.ItmCode; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T06:49:03.233

尝试这个，

```
GROUP BY d_sub.ItmCode; 
```

# facebook - 来自多个域的 Facebook oAuth 请求，重定向到单个 URL

> ID：12908861
> 
> 赞同：0
> 
> 时间：2012-10-16T06:39:37.720
> 
> 标签：facebook, redirect, login

我与多个拥有自己网站的客户打交道，我正在为他们推出一个需要 Facebook 登录的解决方案。

问题是我想在客户的站点中有一个页面/插件，允许他们的消费者访问该站点并单击登录。成功登录后，我希望 Facebook 将用户重定向到我的网站。

所以，简而言之，问题是：我是否可以有多个域（xyz.com、abc.in）向 Facebook 发送包含重定向 URL mysite.com 的 oAuth 请求？

我的应用程序的设置如下：

应用域名：mysite.com
网站网址：www.mysite.com

我认为 Facebook 不允许我将 xyz.com、abc.in 添加到 App Domain。

我什至愿意拥有一个可嵌入不同站点的插件。这可能吗？如果是这样，我该如何实现？

成功登录/注册后，用户应该被重定向到 mysite.com/fbcallback.php。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T09:41:20.343

> 我可以让多个域（xyz.com、abc.in）向 Facebook 发送包含重定向 URL mysite.com 的 oAuth 请求吗？

不可以。您只能使用您在“使用 Facebook 登录的网站”下设置的域的子域。

> 成功登录/注册后，用户应该被重定向到 mysite.com/fbcallback.php。

如果您仍然希望用户访问您自己的域，那么您可以立即从您的客户页面将他们发送到 yourdomain.tld/facebook-login.php，然后从那里处理登录调用......？

# mysql - MySQL 在更新触发器中嵌套条件

> ID：12908862
> 
> 赞同：0
> 
> 时间：2012-10-16T06:39:42.363
> 
> 标签：mysql, triggers, conditional-statements

我正在尝试找出更新 MySQL 表的条件触发器。问题是即使输入的数据与已经存在的数据相同，更新触发器也会触发。因此，如果我有一个带有 row:value 的列设置为这样 plus_votes:2 如果我更新`UPDATE votes SET plus_votes = 2;`即使没有真正改变 UPDATE 触发器仍然会被触发。所以为了防止这一切，我想像这样在我的触发器中添加一个条件子句

```
BEGIN
IF NEW.vote_value <> OLD.vote_value THEN
UPDATE my_other_table
SET plus_votes =
    CASE NEW.vote_value WHEN '1'
        THEN plus_votes + 1
        ELSE plus_votes
    END,
    minus_votes =
    CASE NEW.vote_value WHEN '1'
        THEN minus_votes
        ELSE minus_votes +1
    END
WHERE my_other_table.id=NEW.votes_join_id;
END 
```

结尾

问题的后半部分是我在 IF 语句中有 CASE 条件。有人可以帮助解决这个问题并展示如何在 TRIGGER 中执行嵌套条件吗？

非常感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T06:57:28.543

尽管您发布的语法完全错误，但我已经弄清楚您想要什么试试这个（未经测试）

```
DROP TRIGGER IF EXISTS upd_vote;

DELIMITER $$

  CREATE TRIGGER upd_vote AFTER UPDATE ON `my_other_table`
  FOR EACH ROW BEGIN
    IF NEW.vote_value <> OLD.vote_value THEN
      SET 
        NEW.plus_votes = IF(NEW.vote_value=1,OLD.plus_votes+1,OLD.plus_votes),
        NEW.minus_votes = IF(NEW.vote_value=1,OLD.minus_votes,OLD.minus_votes +1 )
    END IF;
END$$

DELIMITER ; 
```

# algorithm - 在列表中查找升序三元组

> ID：12908870
> 
> 赞同：1
> 
> 时间：2012-10-16T06:40:00.723
> 
> 标签：algorithm, list

我在一次编程面试中遇到了这个问题，现在还不知道。

> 一个长度为n的列表，其中的元素都是无序的正整数。找出所有可能的三元组 (a, b, c)，即 a < b < c，并且 a 在列表中出现在 b 之前和 b 在 c 之前。
> 
> 并分析算法的时间复杂度。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T06:43:03.210

没有通用算法比 O(n^3) 更快，因为给定不同元素的排序输入，那么输出的大小将为 O(n^3)，因此仅产生输出将需要时间成比例。实际上，即使是随机生成的整数列表也已经有 n^3 三倍，直到常数因子。

鉴于您可以简单地按列表顺序迭代所有可能的三元组，并比较它们的排序顺序。这个幼稚的解决方案已经是渐近最好的（即 O(n^3)）

```
for (int i = 0; i < n; i++)
    for (int j = i+1; j < n; j++)
        for (int k = j+1; k < n; k++)
            if (X[i] < X[j] && X[j] < X[k)
                output(X[i],X[j],X[k]) 
```

我怀疑您的问题陈述中可能存在转录错误-否则该问题应该是一个非常简单的简短编码练习。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T07:25:16.820

如果已知只有一小组三元组（例如 k），那么您可能更愿意通过存储指向前一个最小元素的指针来查找所有三元组。

## 算法

准备一个空的数据结构（可能的选择稍后描述）。

准备一个长度为 n 的空数组 B。

然后对于列表中的每个元素 c：

1.  使用数据结构存储列表中小于 c（如果存在）的最新元素的索引（在数组 B 中）。
2.  在数据结构中存储 c（及其在原始列表中的索引）
3.  然后使用数组 B 找到所有 b 小于 c 的元素，然后再次找到所有 a 小于 b 的元素，并将所有这些组合作为输出三元组发出。

## 数据结构

数据结构需要能够存储值、位置对，以便轻松找到所有值小于 c 的元素的最大位置（即最近的位置）。

如果允许值的范围相当小，一种简单的方法是使用一系列数组，其中 A[k][x] 存储范围 [x*2^k,(x+ 1)*2^k)。

如果值最多有 M 位（即值在 0 到 2^M-1 范围内），则更新或访问此数据结构都是 O(M) 操作。

## 复杂

给定的方法是 O(nM+k)。

如果值的范围更大，那么您可以使用二叉搜索树的形式而不是一系列数组，或者对值进行排序并用它们的序数值替换这些值。这将具有复杂性 O(nlogn+k)。

## 数三倍

如果你只是想知道这种形式的三元组的总数，那么你可以在 O(n) 中做到这一点。

思路和之前类似：

1.  查找每个索引的最近的较小元素，以及每个索引的较小元素的计数
2.  查找每个索引的下一个更大元素，以及更大元素的计数
3.  计算每个索引的较小元素计数和较大元素计数的乘积之和。

为了实现这个 O(n)，我们需要能够在 O(n) 中找到下一个更大的元素。这可以通过以下方式完成：

1.  将当前索引 i 推入堆栈
2.  当 A[top(stack)] < A[i+1] 时，从堆栈中弹出一个索引 x 并存储 NGE[x]=i+1
3.  增加 i 并返回步骤 1

我们还需要能够在 O(n) 中找到更大元素的计数。一旦准备好 NGE 数组，我们可以通过向后迭代数组和计算来找到计数

```
count_greater_elements[i] = count_greater_elements[ NGE[i] ] + 1 if NGE[i] is defined
                          = 0 otherwise 
```

最近的较小元素和计数可以以类似的方式计算。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-16T17:28:00.913

一般情况下的 N^2 解决方案（计算所有这样的三元组，而不是全部输出；输出将采用 n^3 只是因为它的大小）：

对于数组中的每个数字 X，让我们计算小于 X 且索引小于 x 的数字数量和大于 X 且索引大于 X 的数字数量。对于每个 X，我们可以获得其中 X 是中间元素的三元组的数量作为更少[X] * 更大[X]。答案是这些产品的总和。

```
int calc(vector<int> numbers) {
 int n = numbers.size();
 vector<int> less(n), more(n);
 for (int i = 0; i < n; i++)
  for (int j = i + 1; j < n; j++)
   if (numbers[i] < numbers[j])
    less[j]++, more[i]++;

 int res = 0;
 for (int i = 0; i < n; i++)
  res += less[i] * more[i];

 return res;
} 
```

# performance - 带有排序的 MongoDB 地理空间查询 - 性能问题

> ID：12908871
> 
> 赞同：2
> 
> 时间：2012-10-16T06:40:04.440
> 
> 标签：performance, mongodb, indexing, schema, geospatial

我有查询（这很慢**~2,5s**）：

```
db.markers.find({ latlng: { '$within': { '$box': [ [ -16, -140 ], [ 75, 140 ] ] } } }).sort({_id: -1}).limit(1000) 
```

当我对此查询运行解释时，我得到

```
{
   "cursor" : "GeoBrowse-box",
   "isMultiKey" : false,
   "n" : 1000,
   "nscannedObjects" : 242331,
   "nscanned" : 242331,
   "nscannedObjectsAllPlans" : 242331,
   "nscannedAllPlans" : 242331,
   "scanAndOrder" : true,
   "indexOnly" : false,
   "nYields" : 1383,
    "nChunkSkips" : 0,
    "millis" : 2351,
    "indexBounds" : {
        "latlng" : [ ]
    },
    "lookedAt" : NumberLong(262221),
    "matchesPerfd" : NumberLong(242331),
    "objectsLoaded" : NumberLong(242331),
    "pointsLoaded" : NumberLong(0),
    "pointsSavedForYield" : NumberLong(0),
    "pointsChangedOnYield" : NumberLong(0),
    "pointsRemovedOnYield" : NumberLong(0),
    "server" : "xx:27017"
} 
```

当我删除**sort({_id: -1})**时，解释给了我（快速查询**5 milis**）：

```
{
    "cursor" : "GeoBrowse-box",
    "isMultiKey" : false,
    "n" : 1000,
    "nscannedObjects" : 1000,
    "nscanned" : 1000,
    "nscannedObjectsAllPlans" : 1000,
    "nscannedAllPlans" : 1000,
    "scanAndOrder" : false,
    "indexOnly" : false,
    "nYields" : 0,
    "nChunkSkips" : 0,
    "millis" : 5,
    "indexBounds" : {
        "latlng" : [ ]
    },
    "lookedAt" : NumberLong(1000),
    "matchesPerfd" : NumberLong(1000),
    "objectsLoaded" : NumberLong(1000),
    "pointsLoaded" : NumberLong(0),
    "pointsSavedForYield" : NumberLong(0),
    "pointsChangedOnYield" : NumberLong(0),
    "pointsRemovedOnYield" : NumberLong(0),
        "server" : "xx:27017"
} 
```

我在 latlng 上有 2d 索引，在 _id 上有 desc 索引和**复合**索引。

```
db.markers.ensureIndex({latlng: '2d', _id:-1})
db.markers.ensureIndex({ latlng: '2d' })
db.markers.ensureIndex({ _id: -1 }) 
```

我想要实现的是从最新排序的特定区域获取标记。

任何想法或建议如何在不到**2.5 秒**的时间内做很多事情？

如果有人想做自己的测试

```
var i = 0,
  lat = 0,
  lng = 0;

for (i; i < 260000; i++) {
  lat = parseFloat(Math.min(-90 + (Math.random() * 180), 90).toFixed(6));
  lng = parseFloat(Math.min(-180 + (Math.random() * 360), 180).toFixed(6));
  collection.insert({latlng: [lat, lng]}, function () {});
}

collection.find({ latlng: { '$within': { '$box': [ [ -90, -180 ], [ 90, 180 ] ] } } }, {latlng: 1, _id: 1 }).sort({_id: -1}).limit(1000).explain() 
```

在我的本地机器上，我收到（**〜2,6s**）：

```
{
    "cursor" : "GeoBrowse-box",
    "isMultiKey" : false,
    "n" : 1000,
    "nscannedObjects" : 260000,
    "nscanned" : 260000,
    "nscannedObjectsAllPlans" : 260000,
    "nscannedAllPlans" : 260000,
    "scanAndOrder" : true,
    "indexOnly" : false,
    "nYields" : 1612,
    "nChunkSkips" : 0,
    "millis" : 2613,
    "indexBounds" : {
            "latlng" : [ ]
    },
    "lookedAt" : NumberLong(260000),
    "matchesPerfd" : NumberLong(260000),
    "objectsLoaded" : NumberLong(260000),
    "pointsLoaded" : NumberLong(0),
    "pointsSavedForYield" : NumberLong(0),
    "pointsChangedOnYield" : NumberLong(0),
    "pointsRemovedOnYield" : NumberLong(0),
    "server" : "xx:27017"
} 
```

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-19T18:08:55.300

您的集合中是否确实定义了以下三个索引？

```
db.markers.ensureIndex({ latlng: '2d', _id:-1 })
db.markers.ensureIndex({ latlng: '2d' })
db.markers.ensureIndex({ _id: -1 }) 
```

[地理空间索引](http://www.mongodb.org/display/DOCS/Geospatial+Indexing#GeospatialIndexing-CreatingtheIndex)文档建议不要在同一个集合上创建多个地理索引。尽管 MongoDB 将允许它，但该行为可能是不可取的。我对您的情况的猜测是，`{latlng: '2d'}`可能已选择使用非复合索引而不是复合索引。输出在这里`explain()`并没有真正帮助我们，因为它只是报告`GeoBrowse-box`而不是索引名称；但是，我建议手动[提示](http://www.mongodb.org/display/DOCS/Optimization#Optimization-Hint)光标使用复合索引并查看结果是否有所改善。或者，简单地摆脱非复合索引，`{latlng: '2d', _id:-1}`因为这是查询优化器的明显且唯一的选择。

最后，`{_id: -1}`索引是多余的，可以删除。根据[复合索引](http://www.mongodb.org/display/DOCS/Indexes#Indexes-CompoundKeys)文档，方向仅在处理由多个字段组成的索引时才相关。对于单键索引，我们可以轻松地向后或向前遍历索引。由于 MongoDB 已经`{_id: 1}`默认为我们创建了一个索引，因此简单地依赖它会更有效。

现在，使用索引：查询的一个警告是，在按非地理条件（`_id`在您的情况下）排序之前，限制已应用于地理空间查询组件。我相信这意味着，虽然您的结果确实会按 排序`_id`，但这种排序可能不会考虑匹配范围内的所有文档。这在文档的[复合索引](http://www.mongodb.org/display/DOCS/Geospatial+Indexing#GeospatialIndexing-CompoundIndexes)位中提到，其中将[SERVER-4247](https://jira.mongodb.org/browse/SERVER-4247)引用为待处理的解决方案。

* * *

**编辑**：跟进您的基准

我填充了示例数据，它们是 ±90 到 ±180 之间的 260k 个随机点。然后我运行了您的查询：

```
db.markers.find(
  { latlng: { $within: { $box: [[-90, -180], [90, 180]] }}},
  { latlng: 1, _id: 1 }
).sort({_id: -1}).limit(1000).explain() 
```

这花了 1713 毫秒（我将用它作为比较的基准，而不是你的 2351 毫秒）。我还会注意到该查询匹配了所有 260k 文档，并扫描了相同数量的索引条目。看来限制直到`_id`排序才考虑在内，这不是我根据[此处](http://www.mongodb.org/display/DOCS/Geospatial+Indexing#GeospatialIndexing-CompoundIndexes)的注释所期望的。然后我稍微调整了查询​​以检查其他一些情况：

*   `_id`没有排序和限制的原始查询：`nscanned`是260k，时间是1470ms。
*   `_id`没有排序的原始查询：`nscanned`是1000，时间是9ms。
*   原始查询无限制：`nscanned`为260k，时间为2567ms。

我还想单独测试未索引字段的排序，以模拟`_id`地理匹配后排序可能发生的情况；但是，我无法使用，`_id`因为默认索引将始终存在。为此，我删除了复合地理索引，然后按`latlng`对象排序。这导致`nscanned`了 260k 和 1039ms 的时间。如果我添加 1000 的限制，则时间为 461 毫秒。

如果我们将其添加到上面的 1470 毫秒（没有排序和限制的地理查询），它非常接近没有限制的原始查询，即 2567 毫秒。同样，如果我们将 461 毫秒（[有限排序](http://en.wikipedia.org/wiki/Selection_algorithm#Selecting_k_smallest_or_largest_elements)）添加到 1470 毫秒，它接近于 1713 毫秒的原始基准测试结果。基于这种相关性，我敢打赌`_id`你的基准中的排序根本没有利用复合指数。

无论如何，基准测试缓慢的另一个原因是地理匹配范围非常广。更严格的界限肯定会导致要排序的数据更少，即使该排序没有索引。也就是说，我确实认为[SERVER-4247](https://jira.mongodb.org/browse/SERVER-4247)会对您有所帮助，因为它可能会在执行地理匹配之前先处理非地理排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T07:56:34.993

您的索引是否使用复合键？

```
db.markers.ensureIndex({latlng: '2d', _id:-1}) 
```

# emacs - 如何修复我的emacs？

> ID：12908873
> 
> 赞同：0
> 
> 时间：2012-10-16T06:40:28.483
> 
> 标签：emacs

我从 emacs 收到以下错误：

```
Warning (initialization): An error occurred while loading `/afs/nada.kth.se/hom\
e/d99/home/.emacs':

File error: Cannot open load file, jde

To ensure normal operation, you should investigate and remove the
cause of the error in your initialization file.  Start Emacs with
the `--debug-init' option to view a complete error backtrace. 
```

我有一段时间没有使用它，环境可能已经改变。我应该怎么办？我不认为我有一个 .emacs 文件了，我应该创建一个，它应该包含什么？

## 更新

我确实有一个 .emacs 文件（我在寻找错误的目录），它是

```
;; - -  - -  - -  - -  - -
;;
;;  Emacs JDE
;;

(setq load-path
       (nconc '(
                "/pkg/jde/2.1.4"
                )
                load-path))
(require 'jde)
;;  - -  - -  - -  - -  - -

;;  - -  - -  - -  - -  - -
;;
;;   Make possible to compile from inside emacs
;;   using control-c -m
;;

(global-set-key "\C-cm" 'compile)

(setq load-path (cons "/src/lang/sictus/sicstus3.5" load-path))
(autoload 'run-prolog "prolog"
"Start a Prolog sub-process." t)
(autoload 'prolog-mode "prolog"
"Major mode for editing prolog programs" t)(autoload 'prolog-menu-hook-function "prolog-menu" t)
(add-hook 'prolog-mode-hook 'prolog-menu-hook-function) 
```

我如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T07:47:07.043

从错误消息来看，您确实有一个`~/.emacs`文件似乎很有可能。请仔细检查是否是这种情况。不管它存在或不存在，请尝试

```
$ emacs --no-init-file 
```

它告诉 emacs 忽略您的`.emacs`文件（如果有）。如果这导致错误，则您正在使用的 emacs 安装可能有问题。如果 emacs 启动时没有错误，现在尝试上面引用的错误消息中的建议：

```
$ emacs --debug-init 
```

这将在 init 文件中的错误点进入 emacs 调试器。即使您对调试器不满意，回溯也可能会为您提供有关问题所在的线索。

**在使用实际的 .emacs 文件扩展帖子后添加**：

在您在问题中显示的特定`~/.emacs`文件中，失败的直接原因是该行

```
(require 'jde) 
```

你可以通过这句话来告诉你`Cannot open load file, jde`。消除此特定问题的最直接方法是注释掉或删除有问题的 require 行。只要您实际上不需要它`jde`提供的任何东西，这应该可以解决您的问题。（您可能还应该删除前面试图向加载路径添加内容以让 emacs 找到`jde`库的表达式。）如果需要`jde`，您想找出它实际存在的位置，并进行`load-path`适当的修改。

# google-chrome - 如何在谷歌浏览器中复制 cookie？

> ID：12908881
> 
> 赞同：63
> 
> 时间：2012-10-16T06:40:55.843
> 
> 标签：google-chrome, cookies

有什么方法可以在 Chrome 开发者工具中复制/编辑 cookie？还是我需要为此安装自定义插件？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-10-16T07:08:46.000

我想我找到了一些东西。我可以按`Ctrl`+`A`并拖放文本框中的值，然后从那里复制它。

正如@jmccure 所指出的，

`Ctrl`+ `A`，按住`Shift`并右键单击并复制。

更新：[Chrome 58](https://developers.google.com/web/updates/2017/03/devtools-release-notes)添加了对编辑 cookie 的支持

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2014-07-25T17:52:44.487

跨浏览器解决方案：

1.  点击`F12`或右键单击页面并检查以打开开发人员工具
2.  单击应用程序选项卡*（以前称为资源）*
3.  打开左侧的 Cookies，选择您的站点/域
4.  双击 cookie 列*值*
5.  `CTRL`/ `Command`+`C`或右键单击并选择复制

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2019-08-08T10:01:26.503

如果你有很多 cookie 并且不想安装任何插件，我创建了一个小脚本以避免一个一个复制 cookie。

它仅在 Google Chrome 中进行了测试。

```
// Open the console in the developer tools

// Tab where you are getting the cookies from
// This block can be just copy and paste

let cookies = document.cookie;
cookies = cookies.split(";");
cookies = cookies.map(cookie => cookie.replace(" ", ""));
copy(cookies);

// Tab where you want to have the cookies
// This block cannot be copy and paste since there is no function to paste

const newCookies = // paste your cookies array here
newCookies.map(newCookie => {
    document.cookie = newCookie;
}) 
```

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2015-10-15T09:48:37.537

复制长 cookie 值的另一种方法：

1.  **在“网络**”选项卡打开的情况下重复该请求。
2.  右键单击相关请求（在左侧列表中）。
3.  选择**复制为 cURL**。
4.  `Cookie`从生成的标头选项中提取 cookie 。

例如：`curl 'http://...' -H 'Cookie: session=...' ...`

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2013-10-24T09:38:32.473

这听起来很奇怪，但如果你按住`Shift`并右键单击，它似乎*大部分*时间都有效。

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2015-10-15T10:03:09.537

我使用 Google Chrome 的[Edit this Cookie](https://chrome.google.com/webstore/detail/editthiscookie/fngmhnnpilhplaeedifhccceomclgfbg?utm_source=chrome-ntp-icon)扩展，这非常好。

根据其文档：

> EditThisCookie 是一个 cookie 管理器。您可以添加、删除、编辑、搜索、保护和阻止 cookie！

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2015-08-14T14:01:32.693

您必须选择该值，然后才能复制它。双击有帮助，但如果有一些分隔符（例如“.”、“-”等），那么您必须三次单击它（至少在 Windows 10 中）。

所以基本上：

1.  选择值（双击或三次单击）
2.  复制选择（上下文菜单中的`Ctrl`+`C`或“复制”）

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2015-01-10T05:23:22.087

不幸的是，开发人员工具似乎没有任何可靠的方法可以做到这一点。右键单击该值并选择复制有时可以，但如果有分隔符则不行。

一种解决方法是进入 js 控制台并打印`document.cookie`。不幸的是，这只适用于非 HTTP_Only cookie。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2018-04-05T01:30:00.827

另一个有效的组合：点击 cookie 值。 **在按住鼠标左键的同时**，单击三次右键。复制命令现在将出现在快捷菜单中。

# git - 为什么解压对象后“git clone”停止：100%，完成

> ID：12908883
> 
> 赞同：6
> 
> 时间：2012-10-16T06:41:04.110
> 
> 标签：git, github, clone

```
$ git fetch pb
remote: Counting objects: 9, done.
remote: Compressing objects: 100% (7/7), done.
remote: Total 9 (delta 0), reused 3 (delta 0)
Unpacking objects: 100% (9/9), done. 
```

所以我不能从服务器克隆任何代码。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T13:48:55.420

我有同样的问题。[在这里](http://hoonzis.blogspot.ca/2012/10/git-stops-after-unpacking-objects-or.html.)找到了答案。两种选择，一种是丑陋的方式，当您的拉动冻结时涉及 Ctrl-c'ing，然后在悬空提交上运行 git fsck 和 git merge 。但是有一个更好的方法，如果可行的话，通过[这个博客](http://sparethought.wordpress.com/2012/12/06/setting-git-to-work-behind-ntlm-authenticated-proxy-cntlm-to-the-rescue/)上描述如何使用 CNTLM 的方法。

Git 不能很好地与 NTLM 代理一起工作，而 NTLM 代理在大多数企业环境中都是如此。解决方案是设置一个重定向流量的本地代理，这就是 CNTLM 所做的。

安装[CNTLM](http://sourceforge.net/projects/cntlm/files/)，修改 .ini 文件以包含您的用户 ID、域、密码和代理设置。启动代理，然后在你的 Git Bash 中运行它： git config --global http.proxy localhost:3128

现在应该可以工作了！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T06:53:36.953

在空的 repo 上，fetch 不会做任何其他事情（如“ [git pull 的输出实际上是什么意思？](https://stackoverflow.com/questions/3340051/what-does-the-output-of-git-pull-actually-mean) ”中所述）。
它将[更新 FETCH_HEAD](https://stackoverflow.com/a/10697486/6309)。

只有 a`git pull`会更新本地分支和工作树。

但是，如果在此之后命令挂起，如[这条推文所示](http://twitter.com/geeksam/statuses/164764493128278016)，则可能是[GitHub 状态问题](https://status.github.com/)。

```
October 15, 2012

04:04 pm PST
GitHub Pages was down from 3:50-3:59 pm. We're investigating the cause.

October 14, 2012 – minor interruption occurred

02:55 am PST
All connectivity issues have been resolved.

02:47 am PST
We are investigating errors with GitHub.com and API 
```

# iphone - NSOperation 和 NSInvocationOperation 的区别？

> ID：12908886
> 
> 赞同：4
> 
> 时间：2012-10-16T06:41:32.833
> 
> 标签：iphone, ios, ipad

1）当我们添加`NSOperation`或添加时发生`NSInvocationOperation`了`NSoperationQueue`什么？

`NSoperation`2)和有什么区别`NSInvocationOperation`？

3）哪一个是最好的？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-16T06:51:02.273

**1\. NSoperation 和 NSInvocationOperation 的区别**

一个**NSoperation**对象是一个单次对象——也就是说，它执行一次它的任务并且不能被用来再次执行它。

**NSInvocationOperation**类是 NSOperation 的具体子类，它管理指定为调用的单个封装任务的执行。您可以使用此类启动一个操作，该操作包括在指定对象上调用选择器。此类实现非并发操作。

**2.当我们在 NSoperationQueue 中添加 NSOperation 或 NSInvocationOperation 时会发生什么**

您通常通过将操作添加到操作队列（NSOperationQueue 类的实例）来执行操作。操作队列直接执行其操作，通过在辅助线程上运行它们，或间接使用 libdispatch 库（也称为 Grand Central Dispatch）

**3.哪个最好**

我认为“**最佳**”这个词可能会根据您的情况而有所不同:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T06:46:15.030

Cocoa Is My Girlfriend 有一个[很好](http://www.cimgf.com/2008/02/16/cocoa-tutorial-nsoperation-and-nsoperationqueue/)的使用 NSOperation 和 NSOperationQueue 的教程。本教程使用 NSOperation 在单独的线程中同时下载多个网页。

还要检查这个问题[NSOperation on the iPhone](https://stackoverflow.com/questions/830218/nsoperation-on-the-iphone)

# iphone - iOS 非方形纹理上的 OpenGL ES 2.0 在渲染时会失真

> ID：12908889
> 
> 赞同：3
> 
> 时间：2012-10-16T06:41:48.827
> 
> 标签：iphone, ios, opengl-es, opengl-es-2.0

我正在 iOS 上开发 OpenGL ES 2.0，我有这个......

1.  带有一些图像（尺寸 1024x768）的纹理 (T1)。
2.  屏幕外 FBO (FBO1) 关联纹理 T1，以便我可以将某些内容渲染到 T1 中。
3.  另一个相同大小的纹理 (T2)。
4.  另一个与 T2 相关的 FBO (FBO2)。（我将用它渲染到纹理 T2）。

现在在一个循环中，我将 T1 的内容渲染到 FBO2（因此 T1 被传输到 T2），然后将 T2 渲染到 FBO1（T2 被传输回 T1）。

经过几次迭代（仅 7-8 次），加载到 T1 的原始图像会严重失真/模糊（好像它做了水平模糊）。

但是，如果我对方形图像做同样的事情（不必是 2 的幂），图像仍然清晰。

这是我用来创建纹理的代码..

```
GLuint texture = 0;
glGenTextures(1, &texture);
glBindTexture(GL_TEXTURE_2D, texture);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);
glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, width, height, 0, GL_RGBA, GL_UNSIGNED_BYTE, buffer); 
```

这是我用来创建 FBO 的代码...

```
 glGenFramebuffers(1, &targetFBO);
 glBindFramebuffer(GL_FRAMEBUFFER, targetFBO);
 glFramebufferTexture2D(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_TEXTURE_2D, texture, 0); 
```

我的着色器是最基本的，只是将纹理渲染成 gl_FragColor。

这是我的渲染 Objective-C 代码...

```
- (void) draw {
    GLfloat textureCoordinates[] = {
        0.0f, 0.0f,
        1.0f, 0.0f,
        0.0f,  1.0f,
        1.0f,  1.0f,
    };

    GLfloat imageVertices[] = {
        -1.0f, -1.0f,
        1.0f, -1.0f,
        -1.0f,  1.0f,
        1.0f,  1.0f,
    };

    glViewport(0, 0, targetWidth, targetHeight);
    glBindFramebuffer(GL_FRAMEBUFFER, targetFBO);
    glUseProgram(program);
    glActiveTexture(GL_TEXTURE2);
    glBindTexture(GL_TEXTURE_2D, textureID);
    glUniform1i(inputTextureLocation, 2);
    glDisable(GL_BLEND);

    glVertexAttribPointer(positionLocation, 2, GL_FLOAT, 0, 0, imageVertices);
    glVertexAttribPointer(inputTextureCoordinateLocation, 2, GL_FLOAT, 0, 0, textureCoordinates);
    // Clear the screen
    glClearColor(0.0, 0.0, 0.0, 0.0);
    glClear(GL_COLOR_BUFFER_BIT);

    glDrawArrays(GL_TRIANGLE_STRIP, 0, 4);   
} 
```

还有我的顶点着色器...

```
 attribute vec4 position;
 attribute vec4 inputTextureCoordinate;

 varying vec2 textureCoordinate;

 void main()
 {
     gl_Position = position;
     textureCoordinate = inputTextureCoordinate.xy;
 } 
```

片段着色器...

```
 varying highp vec2 textureCoordinate;

 uniform sampler2D inputTexture;

 void main()
 {
     gl_FragColor = texture2D(inputTexture, textureCoordinate);
 } 
```

原图...![原始图像](../Images/7ec9b5b87eab04cb015b07895a7670a8.png)

扭曲的图像...![扭曲的图像](../Images/80cd32210790dc213b69a42cbfde6b53.png)

如何避免在非方形纹理上模糊？

**编辑：**问题实际上出在 No-Power-of-Two 纹理上。不仅仅是非方形。我无法找到解决方案，所以我将使用 POT 纹理。

# c - 我可以在 C 中的结构中声明结构引用的动态数组吗？

> ID：12908900
> 
> 赞同：-1
> 
> 时间：2012-10-16T06:42:54.140
> 
> 标签：c, pointers, dynamic, struct, segmentation-fault

基本上我正在尝试构建一个 cstrings 的哈希结构，`stringnode_ref *nodes`当哈希开始填满时，我可以将成员重新分配给一个更大的维度数组（malloc 一个新的，重新哈希现有的值，并删除旧的） .

字符串表.c：

```
#include <stdio.h>
#include "stringtable.h"

struct stringnode{
    hashcode_t key;
    cstring value;
};

struct stringtable{
    size_t dim;
    size_t numEntries;
    stringnode_ref *nodes;
};

stringtable_ref new_stringtable(){
    size_t index = 0;
    stringtable_ref sTable = malloc(sizeof(struct stringtable));
    sTable->dim = 31;
    sTable->numEntries;
    sTable->nodes = malloc(31 * sizeof(struct stringnode));
    for( index = 0; index < 31; index++ ){
        sTable->nodes[index]->key = 0;
        sTable->nodes[index]->value = NULL;
    }
    return sTable;
} 
```

字符串表.h：

```
#ifndef __STRINGTABLE_H__
#define __STRINGTABLE_H__

#include <stdlib.h>
#include <inttypes.h>

typedef char *cstring;

typedef uint32_t hashcode_t;

typedef stringtable *stringtable_ref;

typedef stringnode *stringnode_ref;

stringtable_ref new_stringtable();

#endif // __STRINGTABLE_H__ 
```

oc.c：

```
#include <stdlib.h>
#include <stdio.h>
#include "stringtable.h"

int main( int argc, char **argv ){
    stringtable_ref table = new_stringtable();
    return EXIT_SUCCESS;
} 
```

编译：

```
gcc -g -O0 -Wall -Wextra -std=gnu99 -c stringtable.c
gcc -g -O0 -Wall -Wextra -std=gnu99 -c oc.c
gcc -g -O0 -Wall -Wextra -std=gnu99 -o oc stringtable.o oc.o 
```

这一切都编译得很好，没有错误，但是在`stringtable_ref table = new_stringtable();`main() 中声明时，程序在`sTable->nodes[index]->key = 0;`. 有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T06:55:57.467

```
sTable->nodes = malloc(31 * sizeof(struct stringnode));
for( index = 0; index < 31; index++ ){
    sTable->nodes[index]->key = 0; 
```

这就是问题所在：发生段错误是因为您没有为 分配内存`sTable-nodes[index]`，因此它可能是垃圾（当我在 OS X 下的 GDB 上检查您的代码时，实际上是`NULL`）。

`for`解决方案：将以下行添加为循环体的第一行：

```
sTable->nodes[index] = malloc(sizeof(*(sTable->nodes[index]))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T07:01:02.820

您将 的`nodes`元素 定义`stringtable`为指向 的指针`stringnode_ref`，即指向指向 的指针的指针`struct stringnode`。既然你这样做`sTable->nodes = malloc(31 * sizeof(struct stringnode));`了，你计算的大小`sTable->nodes`就好像它是指针一样`struct stringnode`（它不是）。

可能，您想像这样定义 stringtable：

```
struct stringtable{
  size_t dim;
  size_t numEntries;
  stringnode_ref nodes;
}; 
```

然后，您可以使用初始化节点

```
sTable->nodes[index].key = 0;
sTable->nodes[index].value = NULL; 
```

这是正确编译并且不显示 valgrind 的内存错误的整个代码。编译`gcc -Wall --pedantic -o ttt -g ttt.c`；使用 . 检查内存错误`valgrind --tool=memcheck ./ttt`。请注意如何`sizeof()`在您自己的代码中使用和实现它。

```
#include <stdlib.h>

typedef char *cstring;

struct stringnode{
    int key;
    cstring value;
};

typedef struct stringnode *stringnode_ref;

struct stringtable{
    size_t dim;
    size_t numEntries;
    stringnode_ref nodes;
};

typedef struct stringtable *stringtable_ref;

stringtable_ref new_stringtable(){
    size_t index = 0;
    stringtable_ref sTable = malloc(sizeof( *sTable ) ) ;
    sTable->dim = 31;
    sTable->nodes = malloc(31 * sizeof( *sTable->nodes ) ) ;
    for( index = 0; index < 31; index++ ){
        sTable->nodes[index].key = 0;
        sTable->nodes[index].value = NULL;
    }
    return sTable;
}

int main(int argc, char *argv[]) {
  stringtable_ref table = new_stringtable();
  exit( EXIT_SUCCESS ) ;
} 
```

PS尝试编译您在编辑后的帖子中描述的代码会导致以下结果：

```
:~/tmp$ gcc -g -O0 -Wall -Wextra -std=gnu99 -c stringtable.c
In file included from stringtable.c:2:
stringtable.h:11: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
stringtable.h:13: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
stringtable.h:15: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘new_stringtable’
stringtable.c:12: error: expected specifier-qualifier-list before ‘stringnode_ref’
stringtable.c:15: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘new_stringtable’ 
```

# jquery - 仅对文本区域内段落中的一组单词应用 CSS 背景颜色

> ID：12908901
> 
> 赞同：6
> 
> 时间：2012-10-16T06:42:54.390
> 
> 标签：jquery, css

我有一个带有一些文本行的文本区域。文本包含字母、数字和特殊字符。我想仅在该文本中的某些单词（只是为了突出显示它们）上应用 CSS 背景颜色。例如，仅将背景颜色应用于文本区域中的数字。请让我知道如何做到这一点。建议表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T17:37:34.057

没有办法（据我所知）使用纯 HTML 和 CSS 来做到这一点。您将不得不使用一些 JavaScript。

**选项 1** 使用现有的 jQuery 插件。快速搜索让我找到了[这个和更新](http://johannburkard.de/blog/programming/javascript/highlight-javascript-text-higlighting-jquery-plugin.html)[的](http://bartaz.github.com/sandbox.js/jquery.highlight.html)插件。

**选项 2** 自己动手。您可能需要考虑使用 search() 函数来查找单词的位置，然后在单词周围添加 span 包装器。

```
<style>.highlighted{background-color:yellow;}</style>
...
<span class="highlighted>HIGHLIGHT ME</span> 
```

这样做的唯一真正优势是您可以使用正则表达式来为您突出显示的内容提供更大的灵活性。如果它不是你的一杯茶，它还允许你避免使用 jQuery。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T08:57:27.407

我能想到的唯一方法是将所需的文本包装在一些 html 中以设置样式。为此，我建议为 textarea 文本提供单独的输出，请参见此处：http: [//jsfiddle.net/mhPGc/8/](http://jsfiddle.net/mhPGc/8/)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-10-16T07:50:54.763

您为此问题使用 span 标签，您首先为文本区域设置 id 然后使用此样式代码

```
#textarea span{
 background:url(img.jpg) or #etc;
} 
```

# android - 与单选按钮相关的自定义对话框（日期和时间选择器）的数量

> ID：12908902
> 
> 赞同：0
> 
> 时间：2012-10-16T06:43:01.820
> 
> 标签：android, android-widget

我有一组单选按钮，如下面的代码按钮所示。当我单击每个单选按钮时，我想要一个不同的对话框，如下图所示。每个单选按钮一个。这些应该在对话框中。我该怎么做呢？ ***最后，我只需要生成这些自定义对话框。任何人都可以帮助我如何做到这一点？***

![自定义对话框视图](../Images/2c68a34f342bcc278cb75ca6105cb866.png)

我也得到一个空指针异常。我该如何解决？

```
public class Availability extends Activity implements OnClickListener,
        OnCheckedChangeListener {
    ToggleButton override;
    TextView status;
    Button Overridestatus;
    CharSequence[] choice = { "RemoteOffice", "Office", "Personal mobile",
            "Home", "Mobile", "Temporary", "Do not Disturb",
            "Working Remotely", "Non work day", "Work Day" };
    RadioGroup timeperiod;
    TimePicker timePicker;
    int hour, minute;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.availability);
        override = (ToggleButton) findViewById(R.id.tbOver);
        override.setOnClickListener(this);
        status = (TextView) findViewById(R.id.tvstatus);
        Overridestatus = (Button) findViewById(R.id.bstatus);
        Overridestatus.setOnClickListener(this);
        timeperiod = (RadioGroup) findViewById(R.id.rgtimeperiod);
        timeperiod.setOnCheckedChangeListener(this);
        timePicker = (TimePicker) findViewById(R.id.timePicker);
        timePicker.setIs24HourView(true);

    }

    public void onClick(View view) {
        // TODO Auto-generated method stub
        switch (view.getId()) {
        case R.id.tbOver:

            if (override.isChecked()) {

                status.setText("Override");
                Overridestatus.setText("Personal Mobile");

            } else {
                status.setText("Currently");
                Overridestatus.setText("Use Schedule - Do Not Disturb");

            }
            break;

        case R.id.bstatus:

        {
            if (override.isChecked()) {
                showDialog(0);
            }
        }

            break;
        case R.id.rhrandmin:
        }
    }

    @Override
    protected Dialog onCreateDialog(int id) {
        // TODO Auto-generated method stub
        switch (id) {
        case 0:
            AlertDialog.Builder builder = new AlertDialog.Builder(this);
            builder.setTitle("Select System Server");
            builder.setIcon(R.drawable.ic_btn_round_more_normal);
            builder.setPositiveButton("OK",
                    new DialogInterface.OnClickListener() {

                        public void onClick(DialogInterface dialog, int id) {
                            // TODO Auto-generated method stub
                            Intent menu = new Intent(Availability.this,
                                    MenuScreen.class);
                            startActivity(menu);

                        }
                    });
            builder.setNegativeButton("CANCEL",
                    new DialogInterface.OnClickListener() {

                        public void onClick(DialogInterface dialog, int which) {
                            // TODO Auto-generated method stub

                        }
                    });

            builder.setSingleChoiceItems(choice, -1,
                    new DialogInterface.OnClickListener() {

                        public void onClick(DialogInterface dialog, int item) {
                            // TODO Auto-generated method stub

                        }
                    });

            builder.create();
            builder.show();
            break;
        case 2:
             new TimePickerDialog(this, mTimeSetListener, hour, minute,false);
            break;
        }

        return null;

    }

    private TimePickerDialog.OnTimeSetListener mTimeSetListener = new TimePickerDialog.OnTimeSetListener() {
        public void onTimeSet(TimePicker view, int hourOfDay, int minuteOfHour) {
            hour = hourOfDay;
            minute = minuteOfHour;
            Toast.makeText(getBaseContext(),
                    "You have selected : " + hour + ":" + minute,
                    Toast.LENGTH_SHORT).show();
        }
    };

    public void onCheckedChanged(RadioGroup group, int checkedId) {
        // TODO Auto-generated method stub
        switch (checkedId) {
        case R.id.ridefinate:

            break;

        case R.id.rdays:

            break;
        case R.id.rhrandmin:
        //  showDialog(2);
            break;
        case R.id.rtilldate:
             showDialog(1);
            break;
        }
    }

} 
```

日志猫

```
10-16 19:16:16.567: E/AndroidRuntime(1137): FATAL EXCEPTION: main
10-16 19:16:16.567: E/AndroidRuntime(1137): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.avst.callxpressmobile/com.example.avst.callxpressmobile.Availability}: java.lang.NullPointerException
10-16 19:16:16.567: E/AndroidRuntime(1137):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
10-16 19:16:16.567: E/AndroidRuntime(1137):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
10-16 19:16:16.567: E/AndroidRuntime(1137):     at android.app.ActivityThread.access$600(ActivityThread.java:130)
10-16 19:16:16.567: E/AndroidRuntime(1137):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
10-16 19:16:16.567: E/AndroidRuntime(1137):     at android.os.Handler.dispatchMessage(Handler.java:99)
10-16 19:16:16.567: E/AndroidRuntime(1137):     at android.os.Looper.loop(Looper.java:137)
10-16 19:16:16.567: E/AndroidRuntime(1137):     at android.app.ActivityThread.main(ActivityThread.java:4745)
10-16 19:16:16.567: E/AndroidRuntime(1137):     at java.lang.reflect.Method.invokeNative(Native Method)
10-16 19:16:16.567: E/AndroidRuntime(1137):     at java.lang.reflect.Method.invoke(Method.java:511)
10-16 19:16:16.567: E/AndroidRuntime(1137):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
10-16 19:16:16.567: E/AndroidRuntime(1137):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
10-16 19:16:16.567: E/AndroidRuntime(1137):     at dalvik.system.NativeStart.main(Native Method)
10-16 19:16:16.567: E/AndroidRuntime(1137): Caused by: java.lang.NullPointerException
10-16 19:16:16.567: E/AndroidRuntime(1137):     at com.example.avst.callxpressmobile.Availability.onCreate(Availability.java:47)
10-16 19:16:16.567: E/AndroidRuntime(1137):     at android.app.Activity.performCreate(Activity.java:5008)
10-16 19:16:16.567: E/AndroidRuntime(1137):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
10-16 19:16:16.567: E/AndroidRuntime(1137):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
10-16 19:16:16.567: E/AndroidRuntime(1137):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T07:17:29.043

Android 提供了两个标准对话框。[`DatePickerDialog`](http://developer.android.com/reference/android/app/DatePickerDialog.html)和[`TimePickerDialog`](http://developer.android.com/reference/android/app/TimePickerDialog.html)。如果要创建自定义对话框，请参阅[本](http://developer.android.com/guide/topics/ui/controls/pickers.html)指南。

# android - 在edittext android中显示值时有双引号

> ID：12908903
> 
> 赞同：1
> 
> 时间：2012-10-16T06:43:01.957
> 
> 标签：android, web-services, android-edittext

我从 Webservice 获取字符串值并尝试使用 Android 在 Edittext 中显示字符串值。我设法显示该值，但我得到双引号，例如：“12.12”。下面是我完成的代码。任何人都可以指导我的错误在哪里。提前致谢。

```
//Get the response
HttpResponse httpResponse = httpClient.execute(httpGet);
HttpEntity httpEntity = httpResponse.getEntity();
InputStream stream=httpEntity.getContent();
//Convert the stream to readable format
result= convertStreamToString(stream);
    cText.setText(result); 
```

* * *

```
public String convertStreamToString(InputStream is) 
 {
    BufferedReader reader = new BufferedReader(new InputStreamReader(is));
    StringBuilder sb = new StringBuilder();

    String line = null;
    try {
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
    } 
    catch (IOException e) {
        e.printStackTrace();
    } 
    finally {
        try {
            is.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
    return sb.toString();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T06:52:39.793

我认为这是因为您使用双引号从 Web 服务获取输出。如果您面临的唯一问题是`result`字符串包含双引号，那么您可以使用以下代码简单地删除双引号：

```
 String result = convertStreamToString(stream);
    result = result.replace("\"","\\\"");
    System.out.println(result);    //Result string without double quotes 
```

希望这有帮助..谢谢..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T06:50:38.060

也许您正在从您的网络服务发送报价。要摆脱引号，您可以通过 \" 对其进行转义。您的 InputStreamReader 的内容将始终是您从 web 服务中读取的内容。这不会在您的字符串中添加任何 ""。所以一定是 web 服务问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-06T15:47:17.517

在 kotlin 中，您可以使用扩展功能

```
fun String.removeQuotationMarks(): String {
    if (startsWith("\"") && endsWith("\"")) {
        return drop(1).dropLast(1)
    }
    return this
} 
```

# logging - 在hadoop上运行nutch，nutch日志在哪里？

> ID：12908905
> 
> 赞同：3
> 
> 时间：2012-10-16T06:43:04.707
> 
> 标签：logging, hadoop, nutch

我的nutch在hadoop上运行，想查看nutch的运行日志，但是找不到像独立的nutch日志那样的输出日志。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T07:57:45.303

如果你在hadoop上运行nutch，会生成每个阶段的每个mapper和reducer对应的日志。那个位置是`{HADOOP_LOG_DIR}/userlogs/<task id>/syslog`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T19:01:31.287

如果您在分布式或伪分布式模式下运行 Hadoop，那么您应该能够使用 map reduce 管理界面（例如主节点的端口 50030）访问每个作业的日志。

有关 Hadoop 中日志的位置，请参阅[此链接](https://hadoop.apache.org/docs/current/hadoop-project-dist/hadoop-common/ClusterSetup.html#Logging)。

# mysql - mysql非本机，仅在表存在时选择

> ID：12908907
> 
> 赞同：4
> 
> 时间：2012-10-16T06:43:15.143
> 
> 标签：mysql, perl

此类问题已发布过几次，但提供的解决方案在以下情况下并不理想。在第一个查询中，我选择在执行第一个查询时我知道存在的表名。然后在遍历它们时，我想查询所选表中的记录数，但前提是它们仍然存在。问题是，在循环期间，一些表被另一个脚本删除。例如 ：

```
SELECT tablename FROM table
-- returns say 100 tables

while (%tables){
    SELECT COUNT(*) FROM $table
    -- by the time it gets to the umpteenth table, it's been dropped
    -- so the SELECT COUNT(*) fails
} 
```

而且，我猜是因为它是由 cron 运行的，所以它失败了，并且我收到了一封来自 cron 的电子邮件，说明它失败了。

> DBD::mysql::st 执行失败：/usr/local/lib/perl/5.10.1/Mysql.pm 第 175 行不存在表 'xxx'。

脚本正在使用已弃用的 Mysql.pm perl 模块。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T07:05:37.983

您应该能够通过将其放入 eval 块来保护您的 perl 代码免于失败。像这样的东西：

```
eval {
    # try doing something with DBD::mysql
};
if ($@) {
    # oops, mysql code failed.
    # probably need to try it again
} 
```

甚至把它放在“while”循环中

如果您使用像 Postgres 这样更好的服务器，正确的解决方案是将所有内容都包含在事务中。但是，在 MySQL 中删除表不受事务保护。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T06:54:24.773

显然，您需要保护表以确保在执行查询之前它不会被删除。请记住，如果您从某种表锁开始，为了避免可能的丢弃 - 从其他地方发出的 DROP TABLE 查询将因某些锁错误而失败，或者至少会等到您的 SELECT 完成。删除表并不是真正经常使用的操作，因此在大多数情况下，架构设计在服务器操作期间仍然存在 - 您观察到的行为非常罕见。通常，不支持在其他查询期间防止表被删除，但是，在下面文档的注释中，您可能会发现使用信号量表来实现它的一些技巧。

[http://dev.mysql.com/doc/refman/5.1/en/lock-tables.html](http://dev.mysql.com/doc/refman/5.1/en/lock-tables.html)

“表锁只保护其他会话不适当的读取或写入。持有锁的会话，即使是读取锁，也可以执行表级操作，例如 DROP TABLE。截断操作不是事务安全的，因此如果发生错误，则会发生错误会话在活动事务期间或在持有表锁时尝试一次。”

“如果您需要对通常不受读或写锁支持的表执行操作（例如删除或截断表），并且您能够合作，您可以尝试以下操作：使用信号量表，并为每个进程创建两个会话. 在第一个会话中，酌情在信号量表上获得一个读或写锁。在第二个会话中，对所有其他表执行您需要做的所有事情。

# javascript - 谷歌地图设置位置？

> ID：12908908
> 
> 赞同：2
> 
> 时间：2012-10-16T06:43:15.450
> 
> 标签：javascript, google-maps-api-3

我有这段代码，它显示了在“LatLng”坐标中指定的当前位置。但我想要的是有一个输入框，比如说 2 个输入框“位置从”和“位置到”。我希望从 2 个框中显示给定输入值的当前位置，如图所示。

在 Google Map V3 中可能吗？

我想让 mapOptions 值成为框中输入的值。怎么做？

这是我的代码。

```
<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <style type="text/css">
      html { height: 100% }
      body { height: 100%; margin: 0; padding: 0 }
      #map_canvas { height: 100% }
    </style>
    <script type="text/javascript"
      src="http://maps.googleapis.com/maps/api/js?key=AIzaSyBQ8OCC8En5vNHod25Ov3Qs5E1v7NPRSsg&sensor=true">
    </script>
    <script type="text/javascript">
      function initialize() {
                    // add mapOptions here to the values in the input boxes.
        var mapOptions = {
          center: new google.maps.LatLng(-34.397, 100.644),
          zoom: 2,
          mapTypeId: google.maps.MapTypeId.ROADMAP  
        };
        var map = new google.maps.Map(document.getElementById("map_canvas"),
            mapOptions);
      }
    </script>
  </head>
  <body>

    From: <input type="text" name="From"><br>
    To: <input type="text" name="To"><br>

    <button type="button" onclick="initialize()">View example (map-simple.html)</button>

    <div id="map_canvas" style="width:100%; height:100%"></div>
  </body>
</html> 
```

谢谢

杰森

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T07:04:43.883

你应该使用`geocoder`它

```
geocoder = new google.maps.Geocoder();      
var address = document.getElementById('address').value; //input box value
geocoder.geocode( { 'address': address}, function(results, status) {
if (status == google.maps.GeocoderStatus.OK) {
    map.setCenter(results[0].geometry.location);
    var marker = new google.maps.Marker({
        map: map,
        position: results[0].geometry.location
    });
}
}); 
```

[地图小提琴](http://jsfiddle.net/pintu31/CdwGx/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T06:48:59.253

您可以查看此地址上的示例：[https ://developers.google.com/maps/documentation/javascript/demogallery](https://developers.google.com/maps/documentation/javascript/demogallery)

在这里，您可以找到您问题的答案以及您可能需要进一步了解的更高级技术。

问候！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T06:46:53.220

也许是这样的：

```
boxLat.value = map.getCenter().getLat() ;
boxLng.value = map.getCenter().getLng() ; 
```

# android - 如何确保我的 Android 应用程序可以在更低版本和更高版本中运行？

> ID：12908913
> 
> 赞同：1
> 
> 时间：2012-10-16T06:43:31.227
> 
> 标签：android

我正在构建 2.3.3 版的 Android 应用程序。这会在较低版本和较高版本中运行吗？我需要做什么才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T06:44:50.653

如果您在应用程序文件中提及`minSdkVersion`和。它将支持那些版本。例如 -`maxSdkversion``AndroidManifest.xml`

```
<uses-sdk android:minSdkVersion="integer" 
      android:targetSdkVersion="integer"
      android:maxSdkVersion="integer" /> 
```

而不是那个整数值，您可以将您的`API`级别设置为您的应用程序支持的移动版本级别到移动版本级别。如果您将设置您`minSdkVersion`的，`8`它将支持 2.2 android 移动版本。

而且，如果您已设置`maxSdkVersion`，`16`它将支持高达 4.1 的 android 设备。

阅读[这篇](http://developer.android.com/guide/topics/manifest/uses-sdk-element.html)文章。而且，您必须查看[支持屏幕](http://developer.android.com/guide/topics/manifest/supports-screens-element.html)部分，以支持您的应用程序适用于所有尺寸的设备。

希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T06:46:32.487

```
<uses-sdk android:minSdkVersion="integer" 
      android:targetSdkVersion="integer"
      android:maxSdkVersion="integer" /> 
```

在您的清单文件中。检查[此](http://developer.android.com/guide/topics/manifest/uses-sdk-element.html)以获取更多信息

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T06:55:22.310

您在询问构建版本，在这种情况下，最高版本始终是最好的版本。通过将其设置为最高构建版本，它不会对较低版本造成任何问题。但是，`sdkmin`和`sdkmax`设置`AndroidManifest.xml`是一个不同的问题。Google Play 使用这些来过滤掉介于两个重要范围之间的设备。

摘要： 最好使用尽可能高的 android 版本构建您的应用程序，然后`sdkmin and sdkmax`根据应用程序使用的内容进行设置。

看看这篇文章，了解我总结的更深入的版本。

[http://developer.android.com/guide/topics/manifest/uses-sdk-element.html](http://developer.android.com/guide/topics/manifest/uses-sdk-element.html)

# java - 更改形状文件中多个链接中一个链接的厚度。

> ID：12908916
> 
> 赞同：1
> 
> 时间：2012-10-16T06:43:56.267
> 
> 标签：java, shapefile, geotools

我使用 java 程序创建了一个形状文件，其中包含节点之间的一些链接。现在我想改变其中一个链接（或线）的粗细。

我的意思是在一个形状文件中，我想用 (1.0f basic stroke ) 创建一些线条，另一个用 (2.of basic stroke) 创建。我怎样才能做到这一点？

提前感谢您的时间和帮助。

# android - 如何在 esri 地图上添加单个图层

> ID：12908917
> 
> 赞同：1
> 
> 时间：2012-10-16T06:44:04.613
> 
> 标签：android

我有一张 esri 地图，我必须在上面画一些图层。当我添加一个 ArcGISTilesMapServiceLayer 时，它被完美地添加了。但是当我尝试通过应用添加特定图层时：

arcGisTiledLayer.getAllLayers()[1]

那么这条线给了我null。我的意思是，当我尝试在 ArcGISTilesMapServiceLayer 对象上调用 getAllLayers() 或 getLayers() 时，它给了我 null 而不是 AucGISLayeInfo[]。

我错了告诉我...提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-30T15:21:12.057

尝试这样的事情

```
var layerOne = "some layer";

map.addLayer(new esri.layers.ArcGISTiledMapSrviceLayer(layerOne)) 
```

# elasticsearch - 使用轮胎的模块的映射和设置

> ID：12908918
> 
> 赞同：1
> 
> 时间：2012-10-16T06:44:21.650
> 
> 标签：elasticsearch, ruby-on-rails-2, tire

我想从另一个模块添加特定模型的设置和映射。那可能吗？如果是，请帮助我如何做到这一点。我试过这个：

文章型号：

```
class Article < ActiveRecord::Base
  include SearchArticle
end 
```

新模块：

```
module SearchArticle

  include Tire::Model::Search
  settings :analyzer => {
            :custom_analyzer => {
              'tokenizer' => 'uax_url_email'
            }
    } do
    mapping do
      indexes :name, :boost => 10
      indexes :email, :analyzer => 'custom_analyzer', :boost => 10
    end
  end

end 
```

但是没有创建索引。我收到以下错误。

```
[2012-10-16 11:42:38,023][WARN ][cluster.metadata         ] [Inza] [search_article] failed to create
org.elasticsearch.index.mapper.MapperParsingException: mapping [search_article]
at org.elasticsearch.cluster.metadata.MetaDataCreateIndexService$1.execute(MetaDataCreateIndexService.java:262)
at org.elasticsearch.cluster.service.InternalClusterService$2.run(InternalClusterService.java:208)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:680)

Caused by: org.elasticsearch.index.mapper.MapperParsingException: Analyzer [custom_analyzer] not found for field [email]
at org.elasticsearch.index.mapper.core.TypeParsers.parseField(TypeParsers.java:76)
at org.elasticsearch.index.mapper.core.StringFieldMapper$TypeParser.parse(StringFieldMapper.java:124)
at org.elasticsearch.index.mapper.object.ObjectMapper$TypeParser.parseProperties(ObjectMapper.java:261)
at org.elasticsearch.index.mapper.object.ObjectMapper$TypeParser.parse(ObjectMapper.java:217)
at org.elasticsearch.index.mapper.DocumentMapperParser.parse(DocumentMapperParser.java:161)
at org.elasticsearch.index.mapper.MapperService.parse(MapperService.java:364)
at org.elasticsearch.index.mapper.MapperService.add(MapperService.java:186)
at org.elasticsearch.cluster.metadata.MetaDataCreateIndexService$1.execute(MetaDataCreateIndexService.java:259)
... 4 more 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T02:51:49.237

是的，这是可能的——但不是我在问题中所做的那样。这是轮胎宝石所有者[Karmi提出的答案](https://stackoverflow.com/users/95696/karmi)

有关完整答案，请参阅[此](https://github.com/karmi/tire/issues/481)

```
module Searchable

  def self.included(base)

    p "Included in #{base}"

    base.class_eval do
      include Tire::Model::Search

      tire do
        mapping do
          indexes :title,   type: 'string', analyzer: 'snowball'
        end
      end
    end
  end
end

class Article < ActiveRecord::Base
  include Searchable
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T12:04:16.103

```
module SearchArticle
  include Tire::Model::Search
  include ActiveSupport::Concern

  included do
    settings :analyzer => {
                :custom_analyzer => {
                  'tokenizer' => 'uax_url_email'
                }
        } do
        mapping do
          indexes :name, :boost => 10
          indexes :email, :analyzer => 'custom_analyzer', :boost => 10
        end
     end
  end
end 
```

# javascript - Ajax 下拉菜单的键盘导航（向上和向下箭头）

> ID：12908920
> 
> 赞同：1
> 
> 时间：2012-10-16T06:44:43.750
> 
> 标签：javascript, jquery, ajax, keyboard-navigation

我按照 W3Schools 教程进行 AJAX 实时搜索，它运行良好。我将 AJAX 结果作为锚元素返回。

我想为 Ajax 下拉菜单添加键盘导航（即向上箭头和向下箭头），我最好的结果是将焦点放在仅停留一秒钟的第一个结果上，然后焦点消失。我想知道为什么这个焦点会消失，以及任何绕过它的方法。

我的 JavaScript 代码：

```
<script type="text/javascript">
    $(document).ready(function(){
        $('#searchInput').keyup(function(e){
            var keyCode = e.keyCode || e.which;
            if (keyCode == 40){
                 $('.hint').first().focus();
                 $('.hint').first().css('color','#E8AE00'); //I can get the focus to here, but the focus will disappear right away.
            }
        })
    })
</script> 
```

这是我的 PHP 代码：

```
<?php
    $q = $_GET["q"];
    $xmlDoc = new DOMDocument();
    $xmlDoc -> load("database.xml");
    $rest = $xmlDoc -> getElementsByTagName('restaurant');

    if (strlen($q)>0){
        $hint[] = "";
        $index = 0;
        for ($i = 0; $i < ($rest->length); $i++){
            $name = $rest -> item($i) -> getElementsByTagName('name');
            $link = $rest -> item($i) -> getElementsByTagName('link');
            if ($name -> item(0) -> nodeType == 1){
                if (strtolower($q) == strtolower(substr($name -> item(0) -> childNodes -> item(0) -> nodeValue,0,strlen($q)))){ //if matching
                    $hint[$index] = "<a class='hint' id='hint".$index."' href='".$link -> item(0) -> childNodes -> item(0) -> nodeValue."' onfocus=\"this.style.color='#E8AE00'\">".substr($name -> item(0) -> childNodes -> item(0) -> nodeValue,0,strlen($q))."<b>".substr($name -> item(0) -> childNodes -> item(0) -> nodeValue,strlen($q))."</b></a><br />";
                    $index++;
                }
            }
        }
    }

    if ($hint[0] == ""){
        echo "no suggestion";
    }
    else {
        for ($j = 0; $j < (count($hint)); $j++){
            echo $hint[$j];
        }
    }
?> 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T07:04:50.753

您正在使用焦点上的内联 javascript 事件构建链接，这似乎真的很不必要？

```
<a class='hint' id='hint" ...... onfocus=\"this.style.color='#E8AE00'\">" 
```

另外，请注意您多次生成相同的 ID？他们应该是独一无二的！

如果您使用一些 jQuery 并创建一个委托的鼠标事件，然后触发该事件而不是焦点事件，它应该很可能工作吗？

```
$(function(){
    $(document).on({
        mouseenter: function() {
            $(this).css('color', '#E8AE00')
        }
    }, '.hint');

    $('#searchInput').on('keyup', function(e){
            if (e.which == 40){
                 $('.hint').first().trigger('mouseenter');
            }
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T06:52:07.717

可能下拉菜单正在消失，因为您正在调用`$('.hint').first().focus();`，这会从 (aka blurs) 窃取焦点`#searchInput`。我认为模糊输入会隐藏下拉列表，因为您在此处未包含一些 JS 代码，这些代码（正确地）隐藏了下拉列表。

我不确定你为什么甚至需要调用`focus()`提示。

# sql - SQL连接，获取具有相同名称的多个列

> ID：12908921
> 
> 赞同：16
> 
> 时间：2012-10-16T06:44:48.453
> 
> 标签：sql, join

我有一个带有列的表`ID`和`SERVICE_TYPE_TEXT`，以及另一个带有列的表

```
ID, SERVICE_TYPE ... 
```

和许多其他专栏。

第二`SERVICE_TYPE`个表中的 包含`ID`第一个表中的。我想查询，所以我可以`SERVICE_TYPE_TEXT`从第一个表中获取与`ID`第二个表中给定的匹配。

我尝试加入，并在`ID`with上设置不同的名称`AS`，但总是在查询结果的末尾，我从第一个表中获取原始 ID，列 name`ID`以及我在 AS 中定义的名称。

关于如何从第一张桌子上获取 ID 的任何建议？:)

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-16T06:48:01.830

试试这样的，

```
SELECT a.ID AS ServiceID,
       a.Service_Type_Text,
       b.ID AS table2ID,
       b.Service_Type
FROM   table1 a
       INNER JOIN table2 b
           ON a.ID = b.Service_Type 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-10-16T06:50:05.167

设置您的查询，使其返回第二个表中的所有数据，但只返回第一个表中的必填字段（列）。
像这样的东西：

```
SELECT TAB1.SERVICE_TYPE_TEXT, TAB2.*
FROM TAB1
INNER JOIN
TAB2
ON TAB1.ID = TAB2.SERVICE_TYPE 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-16T06:49:49.097

尝试

```
 SELECT a.ID AS ServiceID,
       a.Service_Type_Text,
       b.ID AS table2ID,
       b.Service_Type
FROM   table1 a
       INNER JOIN table2 b
           ON a.ID = b.Service_Type AND b.ID='YOUR_ID'; 
```

# stylecop - 自定义 StyleCop 消息以生成新文件

> ID：12908926
> 
> 赞同：1
> 
> 时间：2012-10-16T06:44:59.633
> 
> 标签：stylecop, automated-refactoring

Stylecop 在创建新文件时会显示版权信息。示例消息在下面指定

//------------------------------------------------ -----------------------
//
// TODO：更新版权文本。
//
// ---------------------------------- -------------------------

我想包含公司名称和默认消息（而不是更新版权文本）。

如何自定义上述消息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T04:09:03.463

打开 StyleCop 设置对话框（在项目上下文菜单中），并在公司信息选项卡中配置您的公司详细信息。这会将以下设置添加到 Settings.StyleCop 文件中：

```
<AnalyzerSettings>
    <StringProperty Name="CompanyName">Company</StringProperty>
    <StringProperty Name="Copyright">Copyright</StringProperty>
</AnalyzerSettings> 
```

然后，如果需要，您可以配置 ReSharper StyleCop 设置（在 ReSharper 代码清理选项中）以单独保留标头、如果缺少标头则插入、更新版权信息或完全替换标头。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T07:11:13.763

ReSharper 默认不执行此操作。您要么安装了 StyleCop（那么您的问题应该是关于 StyleCope），或者更改了一些选项。

通常你在这里更改文件头：ReSharper | 选项 -> 代码编辑 | 文件标题文本

# linux - 套接字绑定返回错误 63

> ID：12908932
> 
> 赞同：0
> 
> 时间：2012-10-16T06:45:30.497
> 
> 标签：linux, sockets, networking, network-programming, opensuse

当我尝试使用 linux 绑定调用绑定套接字时。它返回错误 63（流资源不足）。我试图探索（使用谷歌）为什么会出现这个错误以及如何重现它，但我没有运气。这个问题发生在我没有直接访问权限的设置之一。我想了解为什么会出现此错误并想重新创建问题。我正在使用 Opensuse linux。

任何帮助都会非常显着。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T21:29:44.873

错误 0x63 是 EADDRNOTAVAIL，这意味着您正在尝试绑定到已在使用的地址。确保您尚未运行程序的实例（它会绑定端口），并且没有其他东西在使用该端口。

命令

```
netstat -nat 
```

将告诉您该端口是否正在使用中。如果你有 root 访问权限，你可以添加一个选项（`-p`在 linux 上），它还会告诉你哪个进程打开了端口。

还有`lsof`和/或`fuser`命令（取决于你的 Linux/Unix 风格）列出打开的文件句柄和拥有的进程。这些也需要root或`sudo`访问权限。

# python - 覆盖 __cmp__ python 函数

> ID：12908933
> 
> 赞同：3
> 
> 时间：2012-10-16T06:45:31.533
> 
> 标签：python

嗨，我是压倒一切`__cmp__`的。如果传递的第二个对象是`None`，或者不是 的实例`someClass`，则返回`-1`。

我不明白这里到底发生了什么。

```
class someClass():
    def __cmp__(self, obj):
        if obj == None:
            return -1
        if not isinstance(obj, someClass):
            return -1 
```

我的测试功能：

```
def test_function(self):  
        obj1 = someClass()
        self.assertTrue(obj1 < None)
        # I get true.
        self.assertTrue(obj1 > None)
        # I get failure as False is returned. 
```

谁能给我解释一下：

*   返回值是多少？
*   它如何决定是否会返回`True`或`False`何时更改比较符号？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-16T06:58:21.550

的约定`__cmp__`是：

```
a < b : return -1
a = b : return 0
a > b : return 1 
```

`a`这当然只有在两者和`b`都是兼容类型时才有意义，比如数字。如果您有“极端情况”，其中`a`or`b`为 None 或不兼容 ( `not instanceof`)，您应该报告错误，因为这是在您的实例上*使用*比较运算符时出现的编程错误。`someClass`

可以用 实现*任何*行为`__cmp__`，但是与 OP 描述的方式比较 None 最终会导致奇怪的行为和错误。

另见：[__lt__ 而不是 __cmp__](https://stackoverflow.com/q/1061283/1689451) `http://docs.python.org/reference/datamodel.html#object.__cmp__`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T06:59:50.370

当`obj`is`None`时，您的程序将返回 -1，而返回负整数意味着`self < obj`、 so `obj1 < None`is`True`和`obj1 > None`is `false`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T06:58:29.897

如果您查看 python[文档](http://docs.python.org/reference/datamodel.html)，您会看到该`cmp`函数返回`-1`if `self < other`。

因为`__cmp__(obj, None) == -1`，它假设`obj < None`。

我的猜测是否`__cmp__(obj, None)`应该返回`1`，因为任何对象都优于没有对象:)

# vb.net - 我们可以在 VB.NET 中使用 VB6 PictureBox 吗？

> ID：12908935
> 
> 赞同：0
> 
> 时间：2012-10-16T06:45:39.927
> 
> 标签：vb.net, vb6, vb6-migration

我有一个包含 PictureBox 事件的迁移项目。当它迁移到 VB.NET 2008 时，一些事件被转换，这是不正确的。因为 VB.NET 中的 PictureBox 与 VB6 PictureBox 不同。我想知道一件事我们可以在 VB.NET 中也使用相同的图片框。我认为这可能有助于我们使用相同的事件。我们可以这样做吗？它包含一些事件，如 Picture_paint、AutoRedraw、setPoint 等。它也有一些 Twips 和像素计算。

这会有帮助吗？我们在.NET 中是否有任何升级的控件，相当于 VB6 的图片框？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T07:19:53.707

这不是实现目标的正确方法。尝试在 VB.Net 中升级到新的 PictureBox。
是的，它们是不同的，但是，你很难说 VB.Net 版本的能力不如 VB6 版本。
如果您升级，请全力以赴，您将来不会后悔这个决定。

此[MSDN 链接](http://msdn.microsoft.com/en-us/library/zzt5x46b%28v=vs.80%29.aspx)公开了两个控件之间的区别

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T07:08:35.737

从 VB6 转换为 VB.Net 并非易事，几乎所有事件都不起作用，您需要在 vb.Net 中找到等效事件

用这个[链接去](http://visualbasic.ittoolbox.com/groups/technical-functional/vb-dotnet-l/converting-vb6-picturebox-to-vbnet-2029031)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T09:22:21.040

如前所述，VB6 和 VB.NET 中的控件工作方式不同，因此逐行升级是不可能的。

作为一个 hlaf 方式的房子，您可以在 VB6 中创建一个 ActiveX 控件 (OCX)，其中包含您的图片框，它引发了应用程序所需的事件，然后在 VB.NET 中使用它

[本教程](http://cuinl.tripod.com/tutorials/ocx-11.htm)可以帮助您入门

# objective-c - 如何在 iPhone 中创建全局对象？

> ID：12908948
> 
> 赞同：0
> 
> 时间：2012-10-16T06:46:47.033
> 
> 标签：objective-c, nsmutablearray

我有一个名为 country 的类，它具有三个`NSMutableArray`country_name、纬度和经度。我需要整个应用程序中的国家级对象。那么如何将国家类对象声明为**全局对象**呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T06:53:58.700

您可以使用[单例设计模式](https://en.wikipedia.org/wiki/Singleton_pattern)并创建一个全局对象。但总的来说，全局变量/对象/单例暗示您的设计有问题。

以这种方式创建一个单例：

```
+ (CardPainter*) sharedPainter { 
    static CardPainter* sp; 
    static dispatch_once_t token; 
    dispatch_once(&token, ^{  
        sp = [[CardPainter alloc] init]; 
    });
    return sp; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T06:49:01.767

你可以看看这个教程：

[在 Objective-C 中创建一个全局对象](http://www.learningiphone.com/2009/09/creating-a-global-object-in-objective-c/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T06:55:57.240

我推荐类似单例的解决方案。这是带有一些解释的苹果文档。

[http://alexefish.com/post/15968663296/understanding-and-creating-singletons-in-objective-c](http://alexefish.com/post/15968663296/understanding-and-creating-singletons-in-objective-c)

# logging - 日志框架

> ID：12908953
> 
> 赞同：1
> 
> 时间：2012-10-16T06:46:57.920
> 
> 标签：logging, frameworks

对于 .NET 应用程序，我们需要一个日志框架。主要要求是

1）支持不同类型的日志记录级别 - 如调试、警告等
2）当当前文件超过特定大小时，应创建新的日志文件
3）应在配置的时间段后删除备份日志文件，如例如： - 1 天

是否有满足第三个标准的框架

问候
萨巴里什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-22T21:40:54.967

[Serilog](http://serilog.net)提供了这个；例如

```
var log = new LoggerConfiguration()
    .WriteTo.RollingFile("C:\\Logs\\myapp-{Date}.txt",
        fileSizeLimitBytes: 123456,
        retainedFileCountLimit: 31)
    .CreateLogger(); 
```

文件每天都会滚动，大小限制更像是“安全”功能而不是滚动策略，但结果应该与您正在寻找的内容非常匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T06:55:05.800

Log4Net 几乎可以用自定义的 appender 做任何事情。看看这里：[如何设置 log4net 每天将我的文件记录到不同的文件夹中？](https://stackoverflow.com/questions/2385669/how-i-can-set-log4net-to-log-my-files-into-different-folders-each-day/2385874#2385874)或在这里：[Log4Net 可以自动删除日志文件吗？](https://stackoverflow.com/questions/4259795/can-log4net-delete-log-files-automatically)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-06T16:10:11.010

我写了一些简单但足够的框架来记录自己厌倦了 log4net、nlog 等的过度复杂性。[https://github.com/aloneguid/logmagic](https://github.com/aloneguid/logmagic)

# php - Piwik 仪表板分割问题

> ID：12908955
> 
> 赞同：1
> 
> 时间：2012-10-16T06:47:09.637
> 
> 标签：php, analytics, matomo

我试图弄清楚如何传递分段参数以过滤掉“仪表板”中我们存储在数据库中的特定自定义变量的结果 - 但只是没有找到正确的解决方案。

这就是我作为 iframe 的 src 的内容：

```
http://www.domain.com/piwik/index.php?module=Widgetize&action=iframe&moduleToWidgetize=Dashboard&actionToWidgetize=index&idSite=<?=cstPIWIKSITE?>&period=week&date=yesterday&segment=customVariableName4==<?=$key1?>;customVariableValue4==<?=$value1?>;customVariableName5==<?=$key2?>;customVariableValue5==<?=$value2?> 
```

自定义变量的范围设置为“访问”，并且我确保数据确实存储在第四个和第五个自定义 var 字段的 log_visit 中。

这个问题是每个小部件上都有这条消息=“此报告没有数据。”

相反，当我从上面的 src 中删除段参数时，我确实得到了结果。但是，我需要将其细分，因为不同的部门应该能够挖掘自己的分析。

如果您需要此信息： Piwik 版本：1.9 这是一个独立的 PHP 站点（不使用 WP、Joomla 等）“匿名”具有“查看”访问权限来自 global.ini.php = anonymous_user_enable_use_segments_API = 1

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T11:26:43.443

这似乎是 Piwik <= 1.9.1 中的一个错误，如果使用多个段，则仪表板为空。

这是与经历过相同事情的其他人的论坛主题（靠近主题的底部）：

[http://forum.piwik.org/read.php?2,92057,96203](http://forum.piwik.org/read.php?2,92057,96203)

# javascript - 如何将参数传递给 addEventListener 侦听器函数？

> ID：12908956
> 
> 赞同：2
> 
> 时间：2012-10-16T06:47:24.967
> 
> 标签：javascript, addeventlistener

> **可能重复：**
> [循环中的 Javascript 闭包 - 简单的实际示例](https://stackoverflow.com/questions/750486/javascript-closure-inside-loops-simple-practical-example)
> [请解释循环中 JavaScript 闭包的使用](https://stackoverflow.com/questions/3572480/please-explain-the-use-of-javascript-closures-in-loops)

```
for (var i = 0; i < pois.length; i++) {
    pois[i].marker.addEventListener('dblclick', function (data) {
        var infoWindow = new BMap.InfoWindow(pois[i].address, opts);  
        map.openInfoWindow(infoWindow, map.getCenter());     
    })
} 
```

这是我的代码。
显然这里有错误

> 新 BMap.InfoWindow(pois[i].address, opts);

如何在 pois[i].marker 监听器函数中使用 pois[i].address ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T07:00:07.793

```
for (var i = 0; i < pois.length; i++) {
    setupEventListener(pois[i]);
}

function setupEventListener(obj) {
    var address = pois[i].address;
    obj.marker.addEventListener('dblclick', function (data) {
        var infoWindow = new BMap.InfoWindow(address, opts);  
        map.openInfoWindow(infoWindow, map.getCenter());     
    });
} 
```

# .net - 非管理员用户的 System.Data.SQLite 慢速连接

> ID：12908960
> 
> 赞同：6
> 
> 时间：2012-10-16T06:47:42.437
> 
> 标签：.net, performance, sqlite, non-admin

我有一个带有 System.Data.Sqlite (1.0.82) 的 .NET 4 应用程序（混合模式），用于对加密数据库进行数据库访问。

当我将应用程序安装到“c:\program files\myfolder”时，连接到 sqlite 数据库文件的速度很慢。日志文件显示延迟了几秒钟的是 sqlite 连接语句。

当我执行以下操作时，问题不会发生：

*   以管理员权限运行应用程序
*   安装除 c:\program files\ 以外的任何其他位置
*   将应用程序安装到 c:\program files\，但将数据库移动到另一个文件夹。

我不知道这可能是什么原因......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T06:13:57.323

如果 DB 文件位于应用程序目录中，那么 UAC 很可能会将其移动到“...appdata\Local\VirtualStore\Program Files”目录。最佳做法是创建您自己的 appdata\MyApp 文件夹并将原始数据库从 c:\program files\MyApp 文件夹中复制出来。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-25T16:59:12.997

它有助于以只读模式打开数据库。（无论如何，您应该只在程序文件文件夹中保留只读内容。）

只需附加`";Read Only=True"`到连接字符串。

```
private const string CONN_TEMPL = "Data Source={0};Version=3;Read Only=True";
var conn = new SQLiteConnection(
    String.Format(CultureInfo.InvariantCulture, CONN_TEMPL, databasePath)
); 
```

# node.js - 当我传递 res.render 对象时，在 .ejs 文件中它是未定义的

> ID：12908967
> 
> 赞同：0
> 
> 时间：2012-10-16T06:48:04.747
> 
> 标签：node.js, express, ejs

我想在我的 profilearea.ejs 文件中显示 post 对象的值。但是当它呈现给 profilearea.ejs 时，它会给出“未定义帖子”的错误。

这是 node.js 中的代码

```
PersonalInfo.findOne({username:req.body.name}, function(err,post){
    if(err || !post)
    {
        console.log("find is not done");
    }

    else
        res.render('profilearea.ejs', {post:post});

  }

}) 
```

这是 profilearea.ejs 文件中的代码

```
<section id="notification" data-role="page" >
       <header data-role="header" data-theme="b"><h2>INFORMATION</h2></header>
       <div data-role="content">

        <p> <%= post%> </p>
       </div>
      </section> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T08:58:36.280

我认为部分问题可能在于在渲染之前没有对对象进行字符串化。

尝试：

```
 else {
  var jpost = JSON.stringify(post);
  res.render('profilearea.ejs', {post:jpost});
  } 
```

# c# - 如何检查鼠标是否在WPF中的按钮上？

> ID：12908968
> 
> 赞同：0
> 
> 时间：2012-10-16T06:48:05.160
> 
> 标签：c#, wpf, click, mouseover

> **可能重复：**
> [触发时间延迟](https://stackoverflow.com/questions/12638179/time-delay-on-trigger)

我在 WPF 中使用了一些按钮来显示来自各种文件夹的图像。所有按钮的`Click`模式都是`Hover`。对于某些按钮，悬停后，它被路由到一个函数`OnButtonClick`。我想要做的是，只有在鼠标悬停在按钮上`X`几秒钟后，`OnButtonClick`才应该完成函数内部的处理。

编辑：XAML 代码：

```
 <Button Name="Dresses" Content="Dresses" Click="OnButtonClickDresses" Grid.Row="2" Height="34" Width="85" VerticalAlignment="Center" Grid.Column="5"  FontFamily="Tahoma" FontSize="14" FontWeight="Bold" HorizontalAlignment="Center" Cursor="Hand" ClickMode="Hover">
        <Button.Background>
            <LinearGradientBrush>
                <GradientStop Color="Yellow" Offset="0" />
                <GradientStop Color="Green" Offset="1" />
            </LinearGradientBrush>
        </Button.Background>
    </Button> 
```

C#代码：

```
 private void OnButtonClickDresses(object sender, RoutedEventArgs e)
    {
            //Code for delay

            //Code which should run only if mouse on button after 5 seconds

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T06:50:04.317

在 MouseOver 事件上使用触发器。鼠标悬停在您的控件上后，启动计时器。如果在鼠标仍在控件上时它已经过去，则模拟单击。

[在这里](http://social.msdn.microsoft.com/Forums/en/wpf/thread/a39c0dc8-7446-4a05-82c7-cdbda2171e2f)看一个小例子

# ruby - Rails 3.2 + RESTful API 慢

> ID：12908969
> 
> 赞同：0
> 
> 时间：2012-10-16T06:48:12.577
> 
> 标签：ruby, web-services, api, rest, ruby-on-rails-3.2

我正在研究一组 RoR 应用程序，并实现了一个 API 系统来让它们交换数据。

**实施细节**

*图书馆*

*   导轨 3.2.8
*   红宝石 1.9.2 p320
*   jbuilder 0.8.2 (API srv)
*   httparty 0.9.0 (API cli)

*授权*

需要访问令牌才能访问 API

*安全*

开发环境中的自签名 SSL 证书。使用 SSL 进行 API 调用以防止访问令牌被盗（httparty 自动忽略 SSL 警告）。

**设想**

APP1 公开提供 API 的数据

APP2 公开提供 API 的数据

APP3 公开提供 API 的数据

APP4 需要 APP1、APP2、APP3 数据并使用 API 来获取数据。

**问题**

对 API 的第一次调用很慢（每个 APP 延迟 2 - 3 秒，后续调用很快 ~ 50 毫秒）。我认为这是延迟清单，因为APP4需要连接到APP *，然后连接是mantained，是这样吗？

有什么调试/解决问题的建议吗？

非常感谢，毛罗

**更新 (2012-10-25)**

在 API SRV APP 上添加了输出（ruby-prof）： [https ://gist.github.com/3950920](https://gist.github.com/3950920)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T10:16:54.180

我发现了问题，我想与您分享解决方案。

默认情况下，Passenger 在需要时启动应用程序（以节省内存、cpu 等）。因此，对每个应用程序（APP1、APP2 和 APP3）的 API 的第一次调用最多需要 2 - 3 秒。

[为了解决这个问题，我使用http://www.modrails.com/documentation/Users%20guide%20Apache.html#PassengerPreStart](http://www.modrails.com/documentation/Users%20guide%20Apache.html#PassengerPreStart)上的正确乘客指令预加载应用程序

遵循我的 rails 配置：

```
# Load passenger module and set paths
# The following three lines MUST be updated whenever the 'passenger-install-apache2-module' is executed
LoadModule passenger_module /usr/local/rvm/gems/ruby-1.9.3-p286/gems/passenger-3.0.17/ext/apache2/mod_passenger.so
PassengerRoot /usr/local/rvm/gems/ruby-1.9.3-p286/gems/passenger-3.0.17
PassengerRuby /usr/local/rvm/wrappers/ruby-1.9.3-p286/ruby

# Speeds up spawn time tremendously -- if your app is compatible. 
# RMagick seems to be incompatible with smart spawning
# Older versions of Passenger called this RailsSpawnMethod
PassengerSpawnMethod smart

# Keep the application instances alive longer. Default is 300 (seconds)
PassengerPoolIdleTime 1000

# Keep the spawners alive, which speeds up spawning a new Application
# listener after a period of inactivity at the expense of memory.
RailsAppSpawnerIdleTime 0

# Just in case you're leaking memory, restart a listener 
# after processing 5000 requests
PassengerMaxRequests 5000

# Automatically hit your site when apache starts, so that you don't have to wait
# for the first request for passenger to "spin up" your application. This even
# helps when you have smart spawning enabled. 
PassengerPreStart http://app1.mydomain.com/
PassengerPreStart http://app2.mydomain.com/
PassengerPreStart http://app3.mydomain.com/
PassengerPreStart http://app4.mydomain.com/ 
```

# mysql - InnoDB 是否缓存不存在的键？

> ID：12908977
> 
> 赞同：1
> 
> 时间：2012-10-16T06:48:47.047
> 
> 标签：mysql, sql, database, innodb

考虑这个例子 - 表`item`有两列，`key`并且`value`. 数据如下：

```
> SELECT * FROM item;

 key       value
------------------
  1          a
  2          b
  87         c 
```

假设我们通过 1 到 100 之间的随机键进行 SELECT 查询，并且数据集很大。我的问题是：

*   InnoDB 是否以某种方式缓存“丢失”的键，以便它知道诸如 3 和 4 之类的键不存在，或者它必须每次都去磁盘？

*   如果我们用虚拟记录填充剩余的键值，性能会更好吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T07:01:14.167

如[MySQL 查询缓存中所述](http://dev.mysql.com/doc/en/query-cache.html)：

> 查询缓存存储[`SELECT`](http://dev.mysql.com/doc/en/select.html)语句的文本以及发送到客户端的相应结果。如果稍后收到相同的语句，则服务器从查询缓存中检索结果，而不是再次解析和执行该语句。

`SELECT * FROM item`因此，只有在再次执行完全相同的查询时才会使用缓存。不同的查询，例如`SELECT * FROM item WHERE key = 3`不能使用此查询的缓存（尽管后续调用完全相同的查询将使用其自己的缓存结果）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T07:07:45.610

您的索引不会引用丢失的记录，因此这应该不会变慢。您可以选择向记录添加具有自动增量的主键索引并将其添加到您的索引（pk、key、value）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T07:51:28.023

Innodb 将经常使用的页面存储在内存中，因此它不会在每次查询时都进入磁盘。内存缓冲区的大小在配置文件（通常是 my.cnf）中定义，选项名称为 innodb_buffer_pool_size。Innodb 文件也可能被操作系统缓存。

如果服务器上有大量可用内存，请考虑将 innodb_buffer_pool_size 增加到适当的值。更多信息：[http ://www.mysqlperformanceblog.com/2007/11/03/choosing-innodb_buffer_pool_size/](http://www.mysqlperformanceblog.com/2007/11/03/choosing-innodb_buffer_pool_size/)

插入虚拟记录会使情况变得更糟——表会更大。

# android - 几秒钟后开始视频

> ID：12908987
> 
> 赞同：1
> 
> 时间：2012-10-16T06:49:08.973
> 
> 标签：android

我试图从 sdcard 播放视频文件。最初我需要从 00:00:03 开始​​播放媒体。指导我这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T07:06:46.190

如果您使用 MediaPlayer，请使用 seekTo(int)。请注意，参数将以毫秒为单位。

在[这里](http://developer.android.com/reference/android/media/MediaPlayer.html)查看更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T08:34:46.673

默认`VideoView`不支持`seek`功能。

您可以**[制作自己的自定义视频视图](https://stackoverflow.com/questions/4063071/setonseekcompletelistener-for-videoview-how-can-be-achieved)**，也可以使用已经在一个答案中建议的**[这个库。](http://vov.io/vitamio/#how-devs)**

# c# - C# DataGridRow.Rows 选择新行

> ID：12908988
> 
> 赞同：0
> 
> 时间：2012-10-16T06:49:19.160
> 
> 标签：c#, datagridview

我的程序中有一个简单的函数来选择当前单元格，然后它（FillsDown）将当前单元格复制到它下面的所有单元格中。

但是，我的简单函数将值放在底部的行中，这是新行，我不希望在此处填充该值。

这是当前代码。（其中 COLINDEX 只是我在网格中引用的列）

```
 string replacestring = row.Cells[COLINDEX].Value.ToString();

            foreach (DataGridViewRow row in dataGrid1.Rows)
            {

                if (row.Index > startrow)
                {
                    row.Cells[COLINDEX].Value = replacestring;
                }
            } 
```

有没有我可以检查的简单方法/属性，所以我不会意外填充最后一行？我下面的示例使用了假属性 (. `Exist`)

```
 foreach (DataGridViewRow row in dataGrid1.Rows)
            {

                if ((row.Index > startrow) && row.Exist)
                {
                    row.Cells[COLINDEX].Value = replacestring;
                }
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T07:08:45.610

DataGridViewRow 有一个名为[IsNewRow的属性](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridviewrow.isnewrow.aspx)

并尝试使用索引遍历 Rows 集合

```
 for(int x = startRow + 1; x < dataGrid1.Rows.Count; x++) 
        { 
            DataGridViewRow row = dataGrid1.Rows[x];
            if (row.IsNewRow == false) 
            { 
                row.Cells[COLINDEX].Value = replacestring; 
            } 
        } 
```

# php - 具有拖放、调整大小和重命名功能的完整多个 HTML5 上传器

> ID：12908991
> 
> 赞同：0
> 
> 时间：2012-10-16T06:49:27.600
> 
> 标签：php, html, upload, drag-and-drop, image-resizing

我目前正在为一所具有管理部门的空手道学校创建一个网站，但我被困在“添加照片”部分。

我想知道如何创建一个具有拖放功能的完全 HTML5 图片上传器，调整大小以制作缩略图，并重命名图片以适应 PHP 规范。

这是我对上传者的规范：

```
-> Drag and Drop from a local folder
-> If the image is not the correct ratio, provide a image cropping. (Like Twitter)
-> Resizing like this:
    -> Detect the aspect ratio (4:3 / 16:9)
    -> Create a thumb of 40% of the size
-> Create 2 files in the "Uploads" folder
    -> {a random ID}.{png,jpg,gif,etc...} (full size)
    -> {the same ID-thumb.{the same ext} (thumbnail) 
```

我想只使用 JS 和 PHP 来创建它。我为这个应用程序使用 Zend Framework。

我希望这在 PHP 和 HTML5 中是可能的，但我还没有尝试任何东西。我不想浪费时间，因为我为此付出了代价，所以时间就是现金！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T07:21:10.273

对于 HTML 上传，您当然可以使用[plupload](http://www.plupload.com/index.php)，我已经使用它并且效果很好。

对于重新调整大小和生成拇指，您可以创建自定义函数并将其集成到 plupload 中，或者可以使用[ffmpeg](http://ffmpeg.org/)

# asp.net - Gridview AutoGeneratingColumn 事件？

> ID：12908992
> 
> 赞同：-2
> 
> 时间：2012-10-16T06:49:36.440
> 
> 标签：asp.net, gridview, datagrid

.NET DataGrid 控件有一个 AutoGeneratingColumn 事件，该事件会在数据源更改后立即为每个绑定的数据项触发一次。这很有用，因为您可以在模板中定义某些列，如下所示：

```
<Columns>
        <asp:HyperLinkField DataNavigateUrlFields="ID" DataNavigateUrlFormatString="ww{0}" DataTextField="ID" DataTextFormatString="{0}" HeaderText="ID" />
</Columns> 
```

然后防止在从数据源自动生成列时复制同一列。在此示例中，您可以阻止 ID 列自动生成，如下所示：

```
Private Sub DG_AutoGeneratingColumn(ByVal sender As Object, ByVal e As DataGridAutoGeneratingColumnEventArgs)
    Dim headername As String = e.Column.Header.ToString()
    If headername = "ID" Then
        e.Cancel = True
    End If
End Sub 
```

我的问题是是否可以使用 GridView 控件实现类似的功能。

**细节**

gridview 的数据源是一个 DataTable 对象，我将其绑定如下：

```
 GridView1.DataSource = results.Tables("Vitals")
    GridView1.DataBind() 
```

我的 DataTable 中的列数会有所不同，这就是我使用 AutoGenerateColumns 非常方便的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T22:10:29.573

为此，您应该处理 RowCreated 事件并编写如下内容：

```
private List<int> hideColumnsIndexes = new List<int>(); 

protected void Page_Load(object sender, EventArgs e)
{
    hideColumnsIndexes.Clear();
}

protected void GridView1_OnRowCreated(object sender, GridViewRowEventArgs e)
{
    //Find indexes
    if (e.Row.RowType == DataControlRowType.Header)
    {
        for (int i = 0; i < e.Row.Cells.Count; i++ )
        {
            if (e.Row.Cells[i].Text == "Id")
            {
                hideColumnsIndexes.Add(i);
            }

            //Add more columns to hide
        }
    }

    //Hide cells
    foreach (var index in hideColumnsIndexes)
    {
        e.Row.Cells[index].Visible = false;
    }
} 
```

# sql - 这是sql中游标的基本类型

> ID：12908993
> 
> 赞同：0
> 
> 时间：2012-10-16T06:49:45.517
> 
> 标签：sql, sql-server, cursor

我想知道游标中的基本类型 FAST_FORWARD。它有什么用？sql中语句SET @MyCursor = CURSOR FAST_FORWARD的目的是什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T06:59:27.893

由于您要询问 FAST_FORWARD，我假设您正在使用 SQL-Server。
可以通过多种方式配置游标：

*   `FORWARD_ONLY`- 这是默认配置 - 它允许游标从头到尾运行，并允许通过游标进行更新。
*   `READ_ONLY`- 不允许通过游标更新（提高性能）
*   `FAST FORWARD`- FAST_FORWARD 和 READ_ONLY 的组合

另外两个重要的选项是：

*   `LOCAL`- 只能在游标的范围内访问游标，并且当批处理、存储过程或触发器终止时，游标会被隐式释放。
*   `GLOBAL`- 指定游标的范围对连接是全局的。可以在连接执行的任何存储过程或批处理中引用游标名称。游标仅在断开连接时隐式释放。

完整的文档可以在[这里](http://msdn.microsoft.com/en-us/library/ms180169.aspx)找到。