# StackOverflow 问答 16005000-16005999

# javascript - Dropzone.js：删除新文件时如何取消上传

> ID：16005002
> 
> 赞同：3
> 
> 时间：2013-04-14T22:15:09.817
> 
> 标签：javascript, file-upload, dropzone.js

使用[Dropzone.js](http://www.dropzonejs.com/)我需要实现一种方法，当用户将文件放入 Dropzone 时，所有当前上传（如果有）都被取消，因此只有当前上传。

我需要一种选择和删除它们的方法。

我可以`MyDropzone.processQueue`获取上传队列文件。我也可以这样做`MyDropzone.removeAllFiles()`，但这会删除所有项目（上传或上传）。

我不明白如何将该`removeAllFiles()`方法仅应用于`MyDropzone.processQueue`.

知道如何做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-24T17:45:56.473

Dropzone 的最新版本为此提供了方法，以及`addRemoveLinks`插入链接以取消/删除上传的选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-18T08:55:23.260

尝试：

```
Dropzone.autoDiscover = false;
$("#mydropzone").dropzone({
    init: function() {
        var $this = this;
        $("button#clear-dropzone").click(function() {
            $this.removeAllFiles(true);
        });
    }
}); 
```

# soundcloud - 使用 HTML5 SoundCloud 播放器小部件，您如何以编程方式跳到不同的曲目而不会导致第二个不需要的曲目播放？

> ID：16005004
> 
> 赞同：2
> 
> 时间：2013-04-14T22:15:22.363
> 
> 标签：soundcloud

我正在使用 HTML5 Soundcloud 小部件 API 在声音完成事件中跳到另一首歌曲。

[http://jsbin.com/axuzoj/4/edit](http://jsbin.com/axuzoj/4/edit)

不幸的是，完成事件中似乎存在竞争条件错误。Soundcloud 播放器最终同时播放两首歌曲：列表中的下一首歌曲和在完成事件处理程序中跳过的歌曲。

```
var widget = null;
$(function() {
    var iframe = document.querySelector('#soundcloud_player iframe');
    widget = SC.Widget(iframe);        
    widget.bind(SC.Widget.Events.READY, function() {
        widget.bind(SC.Widget.Events.FINISH, function() {                
            widget.skip(3);
        });
    });
}); 
```

这是一个已知的错误？

有没有更好的方法在声音结束后跳到不同的轨道？

有没有办法关闭连续播放？

在完成事件处理程序中跳过之前添加一个短暂的等待，可以解决问题。但似乎不是一个好方法。

```
window.setTimeout(function() { widget.skip(3); }, 300); 
```

另一种解决方法是在上一首歌曲结束之前跳到一首歌曲，使用 PLAY_PROGRESS 事件而不是 FINISH 事件。

```
widget.bind(SC.Widget.Events.READY, function() {
    widget.bind(SC.Widget.Events.PLAY_PROGRESS, function(obj) {
        if (obj.relativePosition > 0.999) {
            widget.pause();
            widget.skip(3);
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T10:58:53.367

是的，现在修复了一个竞争条件错误。

# html - 将无序列表的一部分向左浮动，一部分向右浮动在同一行上

> ID：16005008
> 
> 赞同：1
> 
> 时间：2013-04-14T22:15:37.317
> 
> 标签：html, css

[我知道这个问题在这里](https://stackoverflow.com/questions/10573793/unordered-list-navigation-with-floating-left-and-right-elements)和[这里](https://stackoverflow.com/questions/14471662/how-to-make-the-float-left-and-float-right-on-the-same-line)之前已经被问过，但我无法将他们的解决方案应用于我的具体问题。

我有一个像这样的无序列表：

[http://tinker.io/926d2/5](http://tinker.io/926d2/5)

```
<nav>
    <ul>
    <li>a</li>
    <li>b</li>
    <li>c</li>
    <li>d</li>
    <li>e</li>
    /ul>
</nav> 
```

但是最后一个孩子必须向左浮动，其他元素向右浮动。

请注意，我想避免在任何列表元素周围添加类或 html，因为它们是由 PHP 在一个变量中生成的。但是，将类添加到 nav 和 ul 标签是可以的。

到目前为止我想出的是以下css：

```
nav li {
    display: inline;
    list-style: none;
    text-align: right;
}

nav li:last-child {
    text-align: left;
} 
```

但是，前四个元素“阻止”了最后一个子元素向左对齐。

我试过浮动，并绝对定位前四个元素，但似乎无法弄清楚。

任何想法将不胜感激！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-14T22:51:09.780

[http://jsfiddle.net/T5xc9/](http://jsfiddle.net/T5xc9/)看到这个小提琴。它使用`text-align`并`float`实现您想要的并且不使用绝对位置。一切都是`relative`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T22:44:10.330

这有帮助吗？我没有使用类，只使用定位。 [http://tinker.io/926d2/16](http://tinker.io/926d2/16)

# android - 在 VideoView 中播放流，将 url 转换为 rtsp

> ID：16005009
> 
> 赞同：3
> 
> 时间：2013-04-14T22:15:44.107
> 
> 标签：android, youtube, streaming, android-videoview, rtsp

我需要以相同的布局播放 youtube 视频和录制视频。

为此，我搜索了 youtube api，发现 android 版本需要高于 2.2，这可以，但是我想使用 VideoView。

我在这里看到了一些关于此问题的帖子，并最终决定使用此代码在 VideoView 中观看视频。

```
videoView = (VideoView) findViewById(R.id.your_video_view);

Log.d(TAG,getUrlVideoRTSP(current_url) + "  id yotube1  " );

//here type the url...
videoView.setVideoURI(Uri.parse(getUrlVideoRTSP(current_url)));

videoView.setMediaController(new MediaController(this)); //sets MediaController in the video view

videoView.requestFocus();//give focus to a specific view 
videoView.start();//starts the video 
```

此代码有效，但仅使用这样的**rtsp**链接：

```
String exemple = "rtsp://v4.cache3.c.youtube.com/CjYLENy73wIaLQlW_ji2apr6AxMYDSANFEIJbXYtZ29vZ2xlSARSBXdhdGNoYOr_86Xm06e5UAw=/0/0/0/video.3gp"; 
```

我在 url 中有多个链接，因此我需要将 url 转换为 RTSP 的代码，我不能手动执行此操作，我检查了一些代码，但它们都不起作用......

我试试这个：从这里 [如何获取 RTSP URL？](https://stackoverflow.com/questions/8150074/how-to-get-rtsp-url)

```
public static String getUrlVideoRTSP(String urlYoutube)
{
    try
    {
        String gdy = "http://gdata.youtube.com/feeds/api/videos/";
        DocumentBuilder documentBuilder = DocumentBuilderFactory.newInstance().newDocumentBuilder();
        String id = extractYoutubeId(urlYoutube);
        URL url = new URL(gdy + id);
        HttpURLConnection connection = (HttpURLConnection) url.openConnection();
        Document doc = documentBuilder.parse(connection.getInputStream());
        Element el = doc.getDocumentElement();
        NodeList list = el.getElementsByTagName("media:content");///media:content
        String cursor = urlYoutube;
        for (int i = 0; i < list.getLength(); i++)
        {
            Node node = list.item(i);
            if (node != null)
            {
                NamedNodeMap nodeMap = node.getAttributes();
                HashMap<String, String> maps = new HashMap<String, String>();
                for (int j = 0; j < nodeMap.getLength(); j++)
                {
                    Attr att = (Attr) nodeMap.item(j);
                    maps.put(att.getName(), att.getValue());
                }
                if (maps.containsKey("yt:format"))
                {
                    String f = maps.get("yt:format");
                    if (maps.containsKey("url"))
                    {
                        cursor = maps.get("url");
                    }
                    if (f.equals("1"))
                        return cursor;
                }
            }
        }
        return cursor;
    }
    catch (Exception ex)
    {
        Log.e("Get Url Video RTSP Exception======>>", ex.toString());
    }
    return urlYoutube;

}

protected static String extractYoutubeId(String url) throws MalformedURLException
{
    String id = null;
    try
    {
        String query = new URL(url).getQuery();
        if (query != null)
        {
            String[] param = query.split("&");
            for (String row : param)
            {
                String[] param1 = row.split("=");
                if (param1[0].equals("v"))
                {
                    id = param1[1];
                }
            }
        }
        else
        {
            if (url.contains("embed"))
            {
                id = url.substring(url.lastIndexOf("/") + 1);
            }
        }
    }
    catch (Exception ex)
    {
        Log.e("Exception", ex.toString());
    }
    return id;
} 
```

我像这样使用上述方法：

```
getUrlVideoRTSP(current_url) 
```

当要测试的 currnt_url 是：

```
current_url = "http://m.youtube.com/#/watch?v=FlsBObg-1BQ" 
```

* * *

我尝试了这段代码，但它不起作用

```
private  class Syncyoutube extends AsyncTask <Void , Void , Void>{

@Override
    protected void onPostExecute(Void result) {
        // TODO Auto-generated method stub
        super.onPostExecute(result);
        /**
        videoView.setMediaController(new MediaController(this)); //sets MediaController in the video view
        //   MediaController containing controls for a MediaPlayer                                  
        videoView.requestFocus();//give focus to a specific view 
        videoView.start();//starts the video
        */
    }

public String getRstpLinks(String code){
    String[] urls = new String[3];
    String link = "http://gdata.youtube.com/feeds/api/videos/" + code + "?alt=json";
    String json = getJsonString(link); // here you request from the server
    try {
        JSONObject obj = new JSONObject(json);
        String entry = obj.getString("entry");
        JSONObject enObj = new JSONObject(entry);
        String group = enObj.getString("media$group");
        JSONObject grObj = new JSONObject(group);
        String content = grObj.getString("media$content");
        JSONObject cntObj = new JSONObject(group);
        JSONArray array = grObj.getJSONArray("media$content");
        for(int j=0; j<array.length(); j++){
            JSONObject thumbs = array.getJSONObject(j);
            String url = thumbs.getString("url");
            urls[j] = url;
            Log.d(TAG, url);
            //data.setThumbUrl(thumbUrl);
        }

        Log.v(TAG, content);
    } catch (Exception e) {
        Log.e(TAG, e.toString());
        urls[0] = urls[1] = urls[2] = null;
    }
    return urls[2];

}

public String getJsonString(String url){
    Log.e("Request URL", url);
    StringBuilder buffer = new StringBuilder();
    HttpClient client = new DefaultHttpClient();
    HttpGet     request = new HttpGet( url );
    HttpEntity entity = null;
    try {
        HttpResponse response = client.execute(request);

        if( response.getStatusLine().getStatusCode() == 200 ){
            entity = response.getEntity();
            InputStream is = entity.getContent();
            BufferedReader br = new BufferedReader(new InputStreamReader(is));
            String line = null;
            while( (line = br.readLine() )!= null ){
                buffer.append(line);
            }
            br.close();

        }
    } catch (ClientProtocolException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }finally{
        try {
            entity.consumeContent();
        } catch (Exception e) {
            Log.e(TAG, "Exception = " + e.toString() );
        }
    }

    return buffer.toString();
}

@Override
protected Void doInBackground(Void... params) {
    // TODO Auto-generated method stub

    code = id_current_url(current_url);
    //here type the url...
    String rstp_url = getRstpLinks(code);

    videoView.setVideoURI(Uri.parse(rstp_url));

     // the code crech in this line because null exeption
     // i chack this and discover that code variable is =tFXS9krT2VY , ok..
     // but rstp_url variable in null 

    Log.d(TAG,getRstpLinks(code) + "   idan id yotube1  " );
    return null;
}

}

public String id_current_url (String url) {

    String c_id = null ;

     c_id = url.substring((url.lastIndexOf("=")), url.length());

    return c_id ;
}   

} 
```

“ videoView.setVideoURI(Uri.parse(rstp_url)); ”行中的代码崩溃，因为空异常我破解了这个并发现代码变量是 =tFXS9krT2VY ，好的..但是 rstp_url 变量为空

* * *

UdayKiran 为类似的 Q 写了这个答案，有人可以解释他的意思吗？ **我不明白他的回答**

他的回答：

```
Element rsp = (Element)entry.getElementsByTagName("media:content").item(1);

                              String anotherurl=rsp.getAttribute("url"); 
```

只有在 gdata api 中，我们才获得这种类型的链接：rtsp://v3.cache7.c.youtube.com/CiILENy73wIaGQlOCTh0GvUeYRMYDSANFEgGUgZ2aWRlb3MM/0/0/0/video.3gp

这些正在 VideoView 中播放。

* * *

最后我不使用此代码和视频视图进行蒸汽

我使用 youtube android api，它是从 android 2.2 开始工作的，而不是像我在 Q 中写的那样从 4.2 开始工作，那是假的。

使用 rtsp 的结果是视频质量很差，需要处理纵横比。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-15T08:08:25.763

以下对我有用：
代码 = FlsBObg-1BQ 在您的情况下。
你会得到很多网址，我选择返回最好的质量。

```
private String getRstpLinks(String code){
    String[] urls = new String[3];
    String link = "http://gdata.youtube.com/feeds/api/videos/" + code + "?alt=json";
    String json = getJsonString(link); // here you request from the server
    try {
        JSONObject obj = new JSONObject(json);
        String entry = obj.getString("entry");
        JSONObject enObj = new JSONObject(entry);
        String group = enObj.getString("media$group");
        JSONObject grObj = new JSONObject(group);
        String content = grObj.getString("media$content");
        JSONObject cntObj = new JSONObject(group);
        JSONArray array = grObj.getJSONArray("media$content");
        for(int j=0; j<array.length(); j++){
            JSONObject thumbs = array.getJSONObject(j);
            String url = thumbs.getString("url");
            urls[j] = url;
            Log.d(TAG, url);
            //data.setThumbUrl(thumbUrl);
        }

        Log.v(TAG, content);
    } catch (Exception e) {
        Log.e(TAG, e.toString());
        urls[0] = urls[1] = urls[2] = null;
    }
    return urls[2];

} 
```

getJsonString() 方法。

```
public static String getJsonString(String url){
    Log.e("Request URL", url);
    StringBuilder buffer = new StringBuilder();
    HttpClient client = new DefaultHttpClient();
    HttpGet     request = new HttpGet( url );
    HttpEntity entity = null;
    try {
        HttpResponse response = client.execute(request);

        if( response.getStatusLine().getStatusCode() == 200 ){
            entity = response.getEntity();
            InputStream is = entity.getContent();
            BufferedReader br = new BufferedReader(new InputStreamReader(is));
            String line = null;
            while( (line = br.readLine() )!= null ){
                buffer.append(line);
            }
            br.close();

        }
    } catch (ClientProtocolException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }finally{
        try {
            entity.consumeContent();
        } catch (Exception e) {
            Log.e(TAG, "Exception = " + e.toString() );
        }
    }

    return buffer.toString();
} 
```

由于网络请求，不要忘记将其包装在异步任务中。

# ios - 核心数据：继承的实体

> ID：16005011
> 
> 赞同：2
> 
> 时间：2013-04-14T22:16:24.653
> 
> 标签：ios, core-data, inheritance

在 Core Data 中存储继承实体的正确方法是什么？假设我有一个 Shape 实体，它（是|可以是）抽象和相应的 Shape 类。形状有子实体/子类：圆形、矩形、三角形。

我需要把我所有的形状都放在 UITableView 中（可能在不同的部分，甚至没有）。

我应该如何存储所有这些形状？

1.  作为 Shape 实体，然后在获取之后和添加到数据源数组之前将它们转换为具体的 Shape 子类
2.  作为具体的形状实体，然后将它们全部获取并连接到一个数组中作为 UITableView 的数据源

我认为第一种方法是不可能的...

可能还有其他方法吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T22:35:40.250

您需要将 shape 声明为抽象实体，并将您的 Circle 和其他人声明为 Shape 的子实体。当您执行获取时，您可以在您的 NSFetchRequest 对象上使用 setIncludesSubentities: 来获取 Shape 和所有子实体（如果这是您想要做的，将它们放在一个数组中）。

# javascript - 如果 DurandalJS URL 无效，则不会重置它们

> ID：16005014
> 
> 赞同：2
> 
> 时间：2013-04-14T22:16:33.990
> 
> 标签：javascript, asp.net-web-api, single-page-application, durandal

如果您加载 Durandal SPA 模板并尝试导航到虚假 URL（通过在 URL 中添加“assdf”之类的内容），则会保留该 URL，并且不会提供任何错误。如何更改这一点，以便无效 URL 为用户提供错误页面？我认为错误总比让用户想知道他们的 URL 是否有效要好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T22:38:20.577

你有没有看过handleInvalidRoute：

[http://durandaljs.com/documentation/Router/](http://durandaljs.com/documentation/Router/)

例如，在 Hot Towel 中，它用于向用户显示错误吐司。

编辑：例如，我创建了一个基本的错误视图，然后将其添加到 main.js 并且它似乎可以工作，尽管我认为我更喜欢咆哮类型的方法来在 Hot Towel 中向用户显示错误。

```
 app.start().then(function() {
        //Replace 'viewmodels' in the moduleId with 'views' to locate the view.
        //Look for partial views in a 'views' folder in the root.
        viewLocator.useConvention();

        // ** ADDED **
        router.handleInvalidRoute = function (route, params) {
            router.navigateTo('#/error');
        };

        //configure routing
        router.useConvention();
        router.mapNav('welcome');
        router.mapNav('flickr');

        // ** ADDED **
        router.mapRoute('error', 'viewmodels/error', 'error', false);

        app.adaptToDevice();

        //Show the app by setting the root view model for our application with a transition.
        app.setRoot('viewmodels/shell', 'entrance');
    }); 
```

EDIT2：如果您也担心普通网址（不是由 durandal\sammy 处理的散列网址），那么您需要在 durandal 之外处理它。即，您可以在 global.asax 中添加以下内容：

```
protected void Application_Error(object sender, EventArgs e)
{
    Exception exception = Server.GetLastError();

    Response.Clear();

    var httpException = exception as HttpException;

    if(httpException != null) //It's an Http Exception, Let's handle it.
    {
        switch (httpException.GetHttpCode())
        {
            case 404:
                // Page not found.
                Response.Redirect("~/#/error");
                break;
        }
    }
} 
```

有关更完整的方法，请参见此处：[如何在 ASP.NET MVC 中正确处理 404？](https://stackoverflow.com/questions/619895/how-can-i-properly-handle-404-in-asp-net-mvc/620559#620559)

# javascript - ejs中的函数

> ID：16005021
> 
> 赞同：14
> 
> 时间：2013-04-14T22:16:57.527
> 
> 标签：javascript, node.js, ejs

## 我想要的是这样的：

**app.js**（为简洁起见排除了节点进程，包括等，但使用 ejs 作为渲染引擎）：

```
app.get('/', function(req, res){

    var ejsVariables = {
        title : 'ideal ejs function example',
        listData1 : {
            listTitle : 'my list',
            listItems : [
                { name : 'first item', class : 'foo' },
                { name : 'second item', class : 'bar' },
                { name : 'last item', class : 'foo' }                ]
        },
        listData2 : {
            listTitle : 'your list',
            listItems : [
                { name : 'a widget', class : 'foo' },
                { name : 'another widget', class : 'baz' }
            ]
        }
    };

    res.render('index', ejsVariables);
}); 
```

* * *

**index.ejs**：

```
<html>
    <head>
        <title><%= title %></title>
    </head>
    <body>
        <h1><%= title %></h1>

        <% makeList(listData1) %>

        <p>lorem ipsum</p>

        <% makeList(listData1) %>
    </body>
</html> 
```

* * *

**？？？**

* * *

**结果**：

```
<html>
    <head>
        <title>ideal ejs function example</title>
    </head>
    <body>
        <h1>ideal ejs function example</h1>

        <ul>
            <li class="foo">first item</li>
            <li class="bar">second item</li>
            <li class="foo">another item</li>
        </ul>

        <p>lorem ipsum</p>

        <ul>
            <li class="foo">a widget</li>
            <li class="baz">another widget</li>
        </ul>
    </body>
</html> 
```

* * *

## 问题：里面有什么？？？部分和/或应该在上面更改？

* * *

到目前为止我尝试过的

## 尝试 1

- 我真的希望这个工作，它只是没有

**索引.ejs**

```
<html>
    <head>
        <title><%= title %></title>
    </head>
    <body>
        <h1><%= title %></h1>
        <% var makeList; %>
        <!-- this variable is declared here as those declared within the include are not
        accessible from the file from which it is called, I'm guessing some sort of 
        function scope is coming into play here -->

        <% include makeList %>

        <% makeList(listData1) %>

        <p>lorem ipsum</p>

        <% makeList(ListData2) %>
    </body>
</html> 
```

* * *

**makeList.ejs**

```
<% function makeListItem(itemData){ %>
        <li class="<%= itemData.class %>" ><%= itemData.name %></li>
<% } %>

<% makeList = function(data){ %>
    <% if(data){ %>
        <ul>
            <% data.map(makeListItem) %>
        </ul>
    <% } %>
<% } %> 
```

在这种情况下，两者`makeListItem`都`makeList`被调用，似乎由于范围或其他原因，当它们被调用时，它们无法实际输出到模板。

* * *

## 尝试 2

- 这确实有效，我只是不喜欢我最终使用包含而不是某种函数调用的方式。

**索引.ejs**

```
<html>
    <head>
        <title><%= title %></title>
    </head>
    <body>
        <h1><%= title %></h1>

        <% var data = listData1 %>
        <% include makeList %>

        <p>lorem ipsum</p>

        <% var data = listData2 %>
        <% include makeList %>
    </body>
</html> 
```

**makeList.ejs**

```
<% function makeListItem(itemData){ %>
        <li class="<%= itemData.class %>" ><%= itemData.name %></li>
<% } %>

<% if(data){ %>
    <ul>
        <% data.map(makeListItem) %>
    </ul>
<% } %> 
```

* * *

## 尝试 3

- 这基本上涉及搞乱[ejs-locals](https://github.com/RandomEtc/ejs-locals)，但是我发现功能有些缺乏。

如果我要在我的应用程序中包含另一个 npm 模块，我真的希望它是一个更完整的解决方案，但即使在理想的世界中，我也宁愿不这样做并自己编写它。

* * *

为这篇文章的长度道歉，它很快就失控了。如果你能走到这一步，我会表扬你。

任何投入将不胜感激。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-04-15T06:40:49.413

这个怎么样：

```
// app.js
var ejs = require('ejs');
var fs  = require('fs');

app.locals({
  makeList  : function(list) {
    var template = fs.readFileSync('makeList.ejs', 'utf-8');
    return ejs.render(template, list);
  }
});

// index.ejs
<%- makeList(listData1) %>
  ^ important!

// makeList.ejs
<ul>
  <% listItems.forEach(function(item) { %>
    <li class="<%= item.class %>"><%= item.name %></li>
  <% }); %>
</ul> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T05:30:17.800

我唯一能想到的（至少对于第一个例子）是 makeList() 函数从 ejsVariables 中删除 listData1，你能告诉我这个例子的 makeList() 吗？

在尝试 1 中，您在没有参数的情况下调用 makeList() ！

# php - 电子商务网站，添加到购物篮错误。（PHP帮助）

> ID：16005025
> 
> 赞同：0
> 
> 时间：2013-04-14T22:17:21.893
> 
> 标签：php, sql, database, e-commerce

我有php的问题

我正在建立一个电子商务网站（uni 课程），我正在创建添加到购物篮部分。

我可以将产品添加到购物篮（显示标题、价格、ID 和数量），但是，无论我添加到购物篮中的任何产品，它总是显示数据库中第一个产品的标题、价格和 ID。

（例如我可以向数据库中添加 2 个项目，它们都将具有数据库中第一个项目的标题）

（下面的篮子中显示产品的代码）谢谢

```
if(isset($_SESSION['cart']) && count($_SESSION['cart']) > 0){ 
    foreach($_SESSION['cart'] as $product_id => $qty){

        $sql = "SELECT  post_title, price, post_id FROM products"; 
            $result = mysql_query($sql);

            if(mysql_num_rows($result) > 0) {
            list($name, $price, $id) = mysql_fetch_row($result);

                echo "ID " . $product_id . " " . $name ." " . "Price : " . $price . " DB ID " . $id ." Quantity = " . $qty . "<br/>";
            }
    }

echo "<td colspan=\"3\" align=\"right\"><a href=\"$_SERVER[PHP_SELF]?empty\" onclick=\"return confirm('Are you sure?');\">Empty Cart</a></td>";

}else{

echo "0";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T22:22:55.000

您需要在`WHERE`查询中添加一个子句。

```
$sql = "SELECT  post_title, price, post_id FROM products WHERE `id` = '$product_id'"; 
```

目前，您所做的所有查询都是从数据库表中取出所有内容，然后选择第一行。

该`WHERE`子句将您的查询限制为仅获取匹配产品的行，请注意，您可能需要更改产品 id 列的列名。

虽然是个人建议，但不是在每次页面加载时从数据库中获取产品，假设没有人将大量产品添加到您的购物车中，只需将产品信息也存储在购物车会话密钥中。

# javascript - 更改单个内联样式

> ID：16005030
> 
> 赞同：0
> 
> 时间：2013-04-14T22:17:51.573
> 
> 标签：javascript, html, css

好的，假设我有三个具有相同 css 类的图像。通过javascript（document.getElementById等）更改此类的样式很容易，但是有没有办法使用纯javascript更改*其中一个图像的内联样式。*

该脚本将进入 for 循环，因此每次运行时都会将*不同*的内联样式应用于每个*图像*。

为此，我需要区分这三个图像

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T22:23:57.583

[`*element*.style`](https://developer.mozilla.org/en-US/docs/DOM/element.style)每个 CSS 属性包含一个 JavaScript 属性。例子：

```
var img1 = document.getElementById('img1');
img1.style.borderColor = '#ff0000'; 
```

# pointers - 在 iOS6 中的子 ViewController 之间传递指针时遇到问题

> ID：16005031
> 
> 赞同：0
> 
> 时间：2013-04-14T22:17:59.700
> 
> 标签：pointers, ios6

我的问题是 iOS 6 选项卡式应用程序。我正在进行的工作有 5 个选项卡，其中几个选项卡是通往其他视图控制器的网关。大多数页面都需要访问模型对象，该对象包含以数组、字符串等形式存储的数据。在运行时填充一个基本模型，用户可以在整个应用程序生命周期中添加它。例如，下面列出的代码来自我的 AppDelegate 文件，它将指向准系统模型的指针传递给项目视图控制器。这很好用：选项卡应用程序使用导航控制器数组堆栈；因为我知道项目页面位于索引 2，所以我可以将模型发送给它。

我的问题与项目页面的子视图有关。例如，作为项目页面的子视图，有（或应该有）用户处理文件操作的 File_IO 页面。File_IO 页面也需要访问 Model 对象。但是当我尝试将模型指针从项目页面发送到 File_IO 页面时，我之前使用的技术（从 AppDelegate 到项目）不起作用。我指向 FileIO ViewController 中的一个空模型。

示例代码：这是在 AppDelegate 中，它工作正常：项目 ViewController 中的准系统模型填充了数据。

```
 //To the Project View Controller...
UINavigationController *project_NavigationController =
[[tabBarController viewControllers] objectAtIndex:2];
Project_ViewController *project_ViewController =
[[project_NavigationController viewControllers] objectAtIndex:0];
//This hides the navigation bar on the project page but it also removes the bar on any subsequent pages! They need to be programmmatically reset in ViewDidLoad.
[project_NavigationController setNavigationBarHidden:YES animated:YES];
project_ViewController.currentGeoModel = newGeoModel; 
```

现在，我的 Project_ViewController 嵌入在 NavigationController 中，并且有 4 个子 ViweController。一个名为 FileIO_ViewController。我想将当前模型从 Project_ViewController 传递给 FileIO_ViewController。在 - (void)viewDidLoad 方法下，我尝试了很多方法，但都不起作用。例如，

```
UINavigationController *project_NavigationController = (UINavigationController *) self.presentedViewController;
FileIO_ViewController *fileIO_ViewController = [[project_NavigationController viewControllers] objectAtIndex:1];
fileIO_ViewController.currentModel = currentModel; 
```

编译但是当我尝试访问 FileIO_ViewController 方法中的 currentModel 时，它是空的。

如果有人能花时间提供帮助，我将不胜感激。对我来说，最好的答案是显式代码示例的形式，展示如何将指针从 ViewController 传递到像我的模型这样的对象到另一个 ViewController，在该 ViewController 中您不明确知道子 VC 在堆栈中的位置。（在我的示例中，我使用了索引 1，但我实际上不知道 FileIO_ViewController 位于哪个索引，因为我在 Project_ViewController 下还有其他三个 ViewController。我尝试了几个整数但没有成功。）

如果您确实回答了这个问题，请在谈到 iOS 6 和 Objective C 时将我视为一个新人——攀登 Apple 山是一段漫长的旅程，而我还没有达到顶峰！

谢谢

挪威蒂姆雷德菲尔德

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-14T22:47:12.717

如果您的应用程序有一个共享的单个模型，则不应主动传递指针，您应该使模型从单个位置可用，并将其留给各个对象以在需要时访问同一模型。模型指针的一个好位置是在您的应用程序委托中。

在 appDelegate 的 .h 文件中，为您的模型声明一个属性：

```
 //appDelegate.h

  @property (nonatomic, strong) MyAppModel* appModel; 
```

在 appDelegate 中实例化模型后，只需将其分配给属性：

```
 //appDelegate.m

  - (BOOL)application:(UIApplication *)application 
           didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
    self.appModel  = [[MyAppModel alloc] init];
    //set up bare-bones appModel here
    return YES; 
```

}

然后你可以从任何需要模型数据的 viewController 访问这个属性：

```
#import appDelegate.h;

AppDelegate* appDelegate = [UIApplication sharedApplication] delegate;
MyModel* model = appDelegate.model 
```

（更好的是，将模型对象变成它自己的[Singleton 对象](https://developer.apple.com/library/ios/#documentation/General/Conceptual/DevPedia-CocoaCore/Singleton.html)，但使用 appDelegate 会让你开始）

如果您*需要*传递模型，那么您需要注意将它们传递给正确的对象。这是您现有的代码被破坏的地方。例如，您对 NavigationController 堆栈的结构做出了许多假设。但是，每当您通过从顶部弹出一个控制器来向下移动*堆栈*时，您就会完全失去该顶部控制器实例。当您通过在堆栈上前进而“返回”到该控制器时，实际上会创建一个新实例（除非您注意保持指针悬空并确保推送到该指针）。如果您在这方面需要更多帮助，您将需要准确描述您的应用程序的布局，以及您*如何*创建视图控制器、导航控制器堆栈等。

*更新（根据您的评论）*

如果您对模型的更改在*整个*应用程序中都有效，那么我不明白为什么您不能在需要时通过 appDelegate.model 从您碰巧在应用程序中的任何位置访问模型。如果您有模型的并发*版本*，您可以考虑制作一个单例数据管理器对象，该对象可以处理存储模型数组（或模型历史记录）并根据请求提供正确模型的详细信息。原理是一样的——与其主动将模型对象传递到您的视图控制器中，不如让它们根据需要从集中式源请求数据。

关于您的描述“现在，我的 Project_ViewController 嵌入在 NavigationController 中，并且有 4 个子 ViewControllers。”，我认为您还没有完全掌握类、情节提要场景和实例之间的区别。

您在故事板的一部分中有这样的安排：

```
UINavigationController
       |                    push                     push                     push
       |->UIViewController1 -----> UIViewController2 -----> UIViewController3 ----->
                            segue                    segue                    segue 
```

您谈到通过访问 NavController 的堆栈将数据直接从 VC1（例如）传递到 VC3。

您需要考虑的是情节提要描述了一个模板，该模板显示实例*在实例化时*如何相互关联。它们*不会*因为故事板被加载而被实例化。当您到达 VC1 时，在模板中向您展示了切换到 VC2 和 VC3 的能力，但在您启动切换之前，VC2 和 VC3（作为实例）都不存在。segue 进程实例化了它的destinationViewController 因此将数据从VC1 直接传递到VC3 是没有意义的。当您在 VC1 时，navController 的堆栈仅包含一项（一个 VC1 实例）；当您转到 VC2 时，它会包含 VC1 和 VC2 的实例，并且只有当您实际转到 VC3 时，才会创建实例并将其放入堆栈中。

单步执行您的代码：

```
UINavigationController *project_NavigationController = 
                            (UINavigationController *) self.presentedViewController; 
```

该`presentedViewController`属性适用于`modal`segues，其中您有一个呈现和呈现的视图控制器。另一方面，NavControllers 与`push`segues 一起工作（因为它们将子 viewControllers 推送到它们的`viewControllers`堆栈中，您可以从中获取指向它们的指针）。

在这种情况下，`self.presentedViewController`是 nil，您将其分配给一个新变量。代码什么都不做，但编译器不会抱怨。

```
FileIO_ViewController *fileIO_ViewController = 
                    [[project_NavigationController viewControllers] objectAtIndex:1]; 
```

`project_NavigationControlle`是 nil，所以它的属性都是 nil。`fileIO_ViewController`为零。同样，在最后一行中，您正在向 nil 发送消息，这不是错误，而是略微多余。

# php - Pear Mail 被发送到 hotmail 的垃圾文件夹

> ID：16005032
> 
> 赞同：0
> 
> 时间：2013-04-14T22:18:15.493
> 
> 标签：php, email, pear, hotmail

我试图使用 postfix 和 PEAR Mail 将电子邮件从我的 VPS 发送到 hotmail 帐户，它可以完美地发送到 yahoo、gmail，但是到 hotmail 会直接变成垃圾邮件，我知道之前有人问过这个问题，我已经尝试了一切，

我的主机名是 libreriaplenitud.mx

这是我的 php 脚本

```
 include('Mail.php');
 include('Mail/mime.php');

    // Constructing the email
    $sender = "Jorge <jorgegc21@libreriaplenitud.mx>";                              // Your name and email address
    $recipient = "El Yorch <jorgegc_21@hotmail.com>";                           // The Recipients name and email address
    $subject = "Test Email";                                            // Subject for the email
    $text = 'This is a text message.';                                  // Text version of the email
    $html = '<html><body><p>This is a html message</p></body></html>';  // HTML version of the email
    $crlf = "\n";
    $headers = array(
                    'From'          => $sender,
                    'Return-Path'   => $sender,
                    'Subject'       => $subject
                    );

    // Creating the Mime message
    $mime = new Mail_mime($crlf);

    // Setting the body of the email
    $mime->setTXTBody($text);
    $mime->setHTMLBody($html);

    $body = $mime->get();
    $headers = $mime->headers($headers);

    // Sending the email
    $mail =& Mail::factory('mail');
    if($mail->send($recipient, $headers, $body)){
        echo 'email sent succesfully';
    } 
```

这是hotmail正在接收的标题

```
Authentication-Results: hotmail.com; spf=none (sender IP is 192.34.60.167) 
smtp.mailfrom=www-data@libreriaplenitud.mx; dkim=none header.d=libreriaplenitud.mx; 
x-hmca=none
X-SID-PRA: jorgegc21@libreriaplenitud.mx
X-AUTH-Result: NONE
X-SID-Result: NONE
X-Message-Status: n:n
X-Message-Delivery: Vj0xLjE7dXM9MDtsPTA7YT0wO0Q9MjtHRD0yO1NDTD02
X-Message-Info:  
11chDOWqoTkNi4xaXoUxBJHNxb4q3jMdTE9occzTaBqAAmPh8MI+3AvSCyxtKvnRXgUwZQ9hB9zRIQG0MbHnJc1TejqWYpS9Vk7aOR7/8zlZcfOTkN+DLYQYashlrK5kkvMohRBt73VDj9hh9fgOPZb7AfegtTPz
Received: from libreriaplenitud.mx ([192.34.60.167]) by COL0-MC1-F2.Col0.hotmail.com with Microsoft SMTPSVC(6.0.3790.4900);
 Sun, 14 Apr 2013 14:51:31 -0700
Received: by libreriaplenitud.mx (Postfix, from userid 33)
id 2498040A95; Sun, 14 Apr 2013 21:51:31 +0000 (UTC)
To: El Yorch <jorgegc_21@hotmail.com>
Subject: Test Email
X-PHP-Originating-Script: 0:mail.php
MIME-Version: 1.0
Content-Type: multipart/alternative;
boundary="=_4404fe2999b34dc58f10c890ae3d5e76"
From: Jorge <jorgegc21@libreriaplenitud.mx>
Message-Id: <20130414215131.2498040A95@libreriaplenitud.mx>
Date: Sun, 14 Apr 2013 21:51:31 +0000 (UTC)
Return-Path: www-data@libreriaplenitud.mx
X-OriginalArrivalTime: 14 Apr 2013 21:51:32.0085 (UTC) FILETIME=[39DB8250:01CE395A]

--=_4404fe2999b34dc58f10c890ae3d5e76
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain; charset=ISO-8859-1

This is a text message.
--=_4404fe2999b34dc58f10c890ae3d5e76
Content-Transfer-Encoding: quoted-printable
Content-Type: text/html; charset=ISO-8859-1

<html><body><p>This is a html message</p></body></html>
--=_4404fe2999b34dc58f10c890ae3d5e76-- 
```

我想我没有被列入黑名单，我刚刚设置了这个 vps

任何想法可能有什么问题？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T22:25:55.460

这不是电子邮件库，而是您的 MX 域，主要是因为您缺少一些东西。您必须设置 DomainKeys / DKIM 和 SPF 才能使您的电子邮件合法。而且，即使您设置了这些，也不要期望进入收件箱，这将有 50/50 的机会发生。如今，电子邮件是一场真正的噩梦。

您现在进入收件箱的唯一原因是因为您的 IP 地址是干净的并且没有垃圾邮件，但不要指望这种情况会持续下去，您迟早会被列入黑名单。

只是一个提示，你可以使用像[http://mandrill.com/](http://mandrill.com/)这样的东西（他们有一个很好的 api）来发送电子邮件，它对于少量的电子邮件是免费的，并且可以让你走得很快，最重要的是您每次都会到达收件箱，而不必经历称为电子邮件设置的噩梦。

# vb.net - 如何通过VB脚本打开WRQ选题程序？

> ID：16005034
> 
> 赞同：-1
> 
> 时间：2013-04-14T22:18:29.187
> 
> 标签：vb.net, vba, excel, vbscript, vb6

我想打开 test.r2w 文件（r2w 是 WRQ 反射程序的扩展），然后我想运行存储在该文件内的宏，然后我想自动关闭它。

是否可以通过任何 vbscript 或任何批处理文件？

如果没有，请帮助我通过 excel 宏打开这个程序和文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T09:23:05.007

看看这个 WRQ 反射程序的文档，不管是什么。它是否支持 COM 自动化？然后，使用 CreateObject() 和 COM 方法。

否则，它是否支持该文件的命令行运行？然后使用 Shell "" 运行宏。

否则......可能不会。

# python - Python for 语句的令人困惑的行为

> ID：16005036
> 
> 赞同：1
> 
> 时间：2013-04-14T22:18:38.597
> 
> 标签：python, windows, if-statement, for-loop

我有以下python代码：

```
x = range(0,10)
print x

for number in x: 
    print(number)
    if number%2<> 0: 
        x.remove(number)

print x 
```

奇怪的是，输出是这样的：

```
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
0
1
3
5
7
9
[0, 2, 4, 6, 8] 
```

第一行和最后一行是对的，但是为什么2、4、6、8没有打印出来呢？print 语句不在 if 语句中！

我在 Windows 7 上使用 python(x,y)。另外，我是 Python 新手...我习惯 C++

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T22:21:31.997

您在`x.remove`迭代列表 ( ) 时从列表 ( ) 中删除项目`for number in x`。

`for`-`in`单独维护一个索引，这就是修改列表会产生意外行为的原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T22:24:24.530

该列表使用其索引进行迭代，但是当您删除元素时，您会跳过一些索引。

例如：

```
[0,1,2,...] # (iterator is at second - print 1) 
```

消除

```
[0,2,3,...] # (iterator is still at second) 
```

迭代器前进

```
[0,2,3,...] # (iterator is at third - print 3) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-14T22:29:26.333

为了清楚起见，添加一些`print`语句：

```
x = range(10)

for index, number in enumerate(x):
    print "x is      ", x
    print "element is", number
    print "index is  ", index
    print

    if number % 2 == 0: 
        x.remove(number) 
```

和输出：

```
x is       [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
element is 0
index is   0

x is       [1, 2, 3, 4, 5, 6, 7, 8, 9]
element is 2
index is   1

x is       [1, 3, 4, 5, 6, 7, 8, 9]
element is 4
index is   2

x is       [1, 3, 5, 6, 7, 8, 9]
element is 6
index is   3

x is       [1, 3, 5, 7, 8, 9]
element is 8
index is   4 
```

如您所见，即使您从列表中删除元素，它也会`index`继续上升。`1`这就是导致循环跳过元素的原因。

正如其他人指出的那样，遍历列表并从中删除元素并不是一个好主意。而是遍历一个副本：

```
for number in x[:]: 
```

或者：

```
for number in list(x): 
```

更好的是，使用列表理解创建一个新列表：

```
[number for number in x if number % 2 == 0] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-14T22:23:10.750

基本上，当您在删除的同时迭代某些内容时，您可能会有奇怪的行为。发生的情况是您跳过了一些值，因为它们被转移到您已经迭代过的索引。

做你想做的事（过滤掉一些项目）的更好方法是使用列表理解，例如：

```
[x for x in range(10) if x%2==0] 
```

您可以简单地使用该`range`步骤仅创建偶数，但上述解决方案可让您在任何条件下过滤掉。

未打印某些数字的原因是，当您循环并删除它们时，这些值正在改变位置。当你删除 时`1`，你可以想象所有的值都被移动了一个位置，迭代器指向了以前的位置`2`，但是现在那里的值是`3`，所以`2`永远不会打印。其余的值也是如此。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-14T22:23:56.127

正如 Mark Rushakoff 所提到的，你不应该在迭代时修改它。不过，将您的更改`for number in x`为`for number in x[:]`，它将按您的预期工作。在这种情况下，您正在迭代副本。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-14T23:11:20.813

不要修改您正在迭代的列表。其他人建议复制列表或收集要删除的新列表。相反，收集你**想**留下的那些。这比复制列表并从未迭代的副本中删除要快，并且比收集要删除的列表然后删除它们要快。

```
 evens = []
    for number in x:
        if number%2 == 0:
            evens += [number]
    print(evens) 
```

# ruby-on-rails - 在rails中创建组合对象的最佳方法是什么

> ID：16005038
> 
> 赞同：0
> 
> 时间：2013-04-14T22:18:53.143
> 
> 标签：ruby-on-rails, ruby, activerecord

我想创建一个具有这种行为的组合对象：

```
page = MinimalistCms::Page.create
page.test #return undefined method
page.parts.create!(title: 'test', body: 'test')
page.test #return 'test'
page.test = 'a body'
page.test #return 'a body' 
```

为此，我创建了这个类：

```
module PartComposition
  def self.included(model_class)
    model_class.class_eval do
      has_many :parts, class_name: 'PagePart'
    end
  end

  def method_missing(name, *args)
    title = name.to_s.downcase.underscore
    if title.end_with?('=')
      return update_part(title, args.first)
    else
      part = find_part(title)
      if part
        return part.body
      else
        super(name, *args)
      end
    end
  end

  private
  def update_part(title, attribute)
    part = find_part(title.chop)
    return part.update_attribute(:body, attribute)
  end

  def find_part(title)
    parts.with_globalize(title: title).first
  end
end 
```

它可以工作，但是当我这样做时，`page.body = 'test'`它会自动保存记录。我不确定这是最好的方法。

第一次， page.test 应该返回未定义的方法。创建一个零件应该创建一个新的虚拟属性。该属性应该与普通属性完全一样。

你有想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T00:31:55.473

如果您不想保存零件，只需执行`part.body = attribute`而不是`part.update_attribute`. 然后，您可以拥有一个`dirty_parts`包含未保存部件列表的实例变量，并且在发出`save`or时，`save!`您可以保存部件并调用`super`，或放入`autosave`部件关系。

不管怎样，我喜欢现在的样子。

# java - 对象上的 LWJGL 纹理 - Java

> ID：16005043
> 
> 赞同：1
> 
> 时间：2013-04-14T22:19:32.283
> 
> 标签：java, polygon, lwjgl

我在矩形多边形上绘制纹理时遇到问题。

这是我当前的代码。

```
texture.bind();

        GL11.glBegin(GL11.GL_QUADS);
        GL11.glColor3d(255, 255, 255);
        //Top
        GL11.glTexCoord2f(0,0); GL11.glVertex3f(x1, y1, z1);
        GL11.glTexCoord2f(0,1); GL11.glVertex3f(x1+width, y1, z1);
        GL11.glTexCoord2f(1,1); GL11.glVertex3f(x1+width, y1, z1+length);
        GL11.glTexCoord2f(1,0); GL11.glVertex3f(x1, y1, z1+length);
        GL11.glTexCoord3f(1, 1, 1);
        //Bottom
        GL11.glTexCoord2f(0,0); GL11.glVertex3f(x1, y1+height, z1);
        GL11.glTexCoord2f(0,1); GL11.glVertex3f(x1+width, y1+height, z1);
        GL11.glTexCoord2f(1,1); GL11.glVertex3f(x1+width, y1+height, z1+length);
        GL11.glTexCoord2f(1,0); GL11.glVertex3f(x1, y1+height, z1+length);
        //Front
        GL11.glTexCoord2f(0,0); GL11.glVertex3f(x1, y1, z1);
        GL11.glTexCoord2f(0,1); GL11.glVertex3f(x1+width, y1, z1);
        GL11.glTexCoord2f(1,1); GL11.glVertex3f(x1+width, y1+height, z1);
        GL11.glTexCoord2f(1,0); GL11.glVertex3f(x1, y1+height, z1);
        //Back
        GL11.glTexCoord2f(0,0); GL11.glVertex3f(x1, y1, z1+length);
        GL11.glTexCoord2f(0,1); GL11.glVertex3f(x1+width, y1, z1+length);
        GL11.glTexCoord2f(1,1); GL11.glVertex3f(x1+width, y1+height, z1+length);
        GL11.glTexCoord2f(1,0); GL11.glVertex3f(x1, y1+height, z1+length);
        //Left side
        GL11.glTexCoord2f(0,0); GL11.glVertex3f(x1, y1, z1);
        GL11.glTexCoord2f(0,1); GL11.glVertex3f(x1, y1, z1+length);
        GL11.glTexCoord2f(1,1); GL11.glVertex3f(x1, y1+height, z1+length);
        GL11.glTexCoord2f(1,0); GL11.glVertex3f(x1, y1+height, z1);
        //Right side
        GL11.glTexCoord2f(0,0); GL11.glVertex3f(x1+width, y1, z1);
        GL11.glTexCoord2f(0,1); GL11.glVertex3f(x1+width, y1, z1+length);
        GL11.glTexCoord2f(1,1); GL11.glVertex3f(x1+width, y1+height, z1+length);
        GL11.glTexCoord2f(1,0); GL11.glVertex3f(x1+width, y1+height, z1);
        GL11.glEnd(); 
```

它似乎并没有画出来，只是在街区周围有一个很薄的东西。有谁知道我将如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-08T22:18:01.490

纹理的尺寸是否正确？或者尝试使用 glBindTexture(GL_TEXTURE_2D, texture.getTextureID());

# jquery - jQuery 添加/删除当前元素 ID

> ID：16005048
> 
> 赞同：1
> 
> 时间：2013-04-14T22:20:30.943
> 
> 标签：jquery, menu, addclass, removeclass

我正在尝试 1）在首次加载页面时将“当前”类应用到链接（id="book"）作为默认值，以及 2）当单击 ul“子菜单”中的链接时，将“当前”添加到它的类并从先前的“当前”链接中删除“当前”。我是初学者，所以请用最简单的术语解释一下。任何帮助将不胜感激。谢谢。

```
<script type="text/javascript">
function setCurrent(obj){
$('ul#submenu li a').each(function(){   
    $('.current').removeClass('current'); 
});
$(obj).addClass('current');
}
</script>
</head>

<body onload="setCurrent('book')">
<div id="container">
<div id="content-top"></div>
<div id="content-left"></div>
<div id="content-main">
    <iframe src="port_book.html" name="contentframe" align="middle" scrolling="no" id="contentframe"></iframe>     
</div>  
<div id="content-right"></div>
<div id="content-bottom">
    <ul id="submenu">
    <li><a onclick="setCurrent(this);" href="port_book.html" id="book" target="contentframe">book</a><span class="bar">|</span></li>
    <li><a onclick="setCurrent(this);" href="port_poster.html" id="poster" target="contentframe">poster</a><span class="bar">|</span></li>
    <li><a onclick="setCurrent(this);" href="port_annual_report.html" id="annualreport" target="contentframe">annual report</a><span class="bar">|</span></li>
    <li><a onclick="setCurrent(this);" href="port_branding.html" id="branding" target="contentframe">branding</a><span class="bar">|</span></li>
    <li><a onclick="setCurrent(this);" href="port_packaging.html" id="packaging" target="contentframe">packaging</a></li>
    </ul>
</div> 
```

这是CSS：

```
ul#submenu li{
color: #770046;
}
ul#submenu li a{
color: #333;
}
ul#submenu li.current a{
color: #770046;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T22:33:35.630

首先`onclick`从您的链接中删除：

```
 onclick="setCurrent(this);" 
```

然后添加这个 jQuery 代码：

```
<script type="text/javascript">
$(document).ready(function() { // On page load
  $("#book").addClass("current"); // Add ".current" to "#book"
  $("ul#submenu li a").on("click", function() { // When a link clicked
    if( !$(this).hasClass("current") ) // If link has not already have a "current" class
    {
      $('ul#submenu li a').each(function(){ // For each link
        $(this).removeClass("current"); // Remove "current" class
      });
      $(this).addClass("current"); // Add "current" class to the clicked link
    }
  });
});
</script> 
```

如果您确定链接不会有任何其他`class`，那么请使用以下命令代替`$(this).removeClass("current");`：

```
$(this).removeAttr('class'); // Removes the whole `class` attribute 
```

删除“当前”类的另一种方法是使用属性`selectors`：

```
$("ul#submenu li a[class*=current]").removeClass('current'); // IE8+, Webkit, Opera, Mozzila 
```

**总而言之，最好的方法：**

```
<script type="text/javascript">
$(document).ready(function() {
  $("#book").addClass("current");
  $("ul#submenu li a").on("click", function() {
    if( !$(this).hasClass("current") ) 
    {
      $("ul#submenu li a[class*=current]").removeClass('current');
      $("ul#submenu li a[class='']").removeAttr('class');
      $(this).addClass("current");
    }
  });
});
</script> 
```

# c++ - unordered_map - 未定义模板的隐式实例化

> ID：16005049
> 
> 赞同：1
> 
> 时间：2013-04-14T22:20:43.837
> 
> 标签：c++, unordered-map

我的 C++ 生锈了。我有一个成员变量是`unordered_map<some_enum_type, string>`.

我正在尝试在类构造函数中填充地图。我在这里做错了什么？

从我的标题：

```
#include <iostream>
#include <unordered_map>

using namespace std;

typedef enum{
    GET,
    POST,
    PUT,
    DELETE
}http_verb;

class CouchServer{
    string host;
    int port;
    string dbname;
    unordered_map<http_verb,string> req_types;
public: 
```

我的构造函数实现：

```
 CouchServer::CouchServer(string host, int port, string dbname){
    this->host = host;
    this->port = port;
    this->dbname = dbname;
    this->req_types = {
        {req_types[GET], "GET"},
        {req_types[POST], "POST"},
        {req_types[PUT], "PUT"},
        {req_types[DELETE],"DELETE" }
    };
   } 
```

**更新：**

阅读提供的答案和评论后，我将标题更改为：

```
 class CouchServer{
    string host;
    int port;
    string dbname;
    unordered_map<http_verb,string> req_types;
public:
    CouchServer(std::string host, int port, std::string dbname)
    : host(std::move(host))
    , port(port)
    , dbname(std::move(dbname))
    , req_types{
        { http_verb::GET, "GET" },
        { http_verb::POST, "POST" },
        { http_verb::PUT, "PUT" },
        { http_verb::DELETE, "DELETE" }
    }
    {  } 
```

同样的问题仍然存在。我应该提到我正在尝试使用 XCode 4 编译这段代码，也就是说*Apple LLVM compiler 4.2*。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T22:27:59.093

这可能是编译器的限制。在 GCC 4.7.2 中类似的东西对我有用，并且标准确实说有一个赋值运算符需要一个初始化列表。

但是你不应该在构造函数中做任何赋值！使用构造函数初始化器列表要好得多：

```
CouchServer(std::string host, int port, std::string dbname)
: host(std::move(host))
, port(port)
, dbname(std::move(dbname))
, req_types { { http_verb::GET, "GET" } }  // etc.
{  } 
```

（当然，永远，永远，永远不会`abusing namespace std;`在头文件中说。）

你必须专攻`std::hash`你的枚举；转换为合适的整数类型应该可以解决问题。

# javascript - html注入完成时的Javascript调用函数onclick

> ID：16005050
> 
> 赞同：0
> 
> 时间：2013-04-14T22:20:48.173
> 
> 标签：javascript, jquery, ajax, onclick

我遇到了这种情况：有一个日历脚本可以选择日期。选择日期时，一个称为OnClick的函数，以使一个选择框可用于时间选择。现在它不像它的 display:none-->display:block，由 JS 生成的选择。我的目标是自定义此选择。为此，我得到了一个 jquery 脚本“custom.select”，它只是将选择转换为跨度。问题是，如果我在日历调用之后立即将此脚本的调用添加到 onclick 中，则不需要。我很确定它是因为在那个阶段尚未注入 select 的 html。如果我在选择可见后从萤火虫控制台调用 custom.select 函数 - 它工作得很好。所以问题是：我怎么称呼它才能在选择框上发挥它的魔力？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T23:33:27.557

弄清楚何时添加元素并不是一件容易的事。[我在这里回答了一个类似的问题](https://stackoverflow.com/questions/15841440/overwrite-function-to-recognize-any-dom-changes-including-plugins-like-jquery/15841958#15841958)。

最好的方法是对创建选择的脚本进行一些控制，并将代码附加到它。实现这一点的一种方法是使用面向方面的编程 (AOP) - 也不容易。

对于当前的浏览器，最直接的方法是在循环中使用 setTimeout 并轮询页面直到元素存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T22:25:07.163

将委托与[.on()](http://api.jquery.com/on/)一起使用：

```
$(function(){
    $(document).on('click','.classdynamic',function(){
        //do stuff here
    });
}); 
```

您应该将事件委托给目标元素最近的静态容器。这意味着通过以下方式进行更改`$(document).on('click','.classdynamic',function(){...});` ：`$('#staticContainer').on('click','.classdynamic',function(){...});`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T02:31:10.360

好的，感谢克里斯托夫！我从这里使用了 Selector Listeners 脚本：[http](http://www.backalleycoder.com/2012/08/06/css-selector-listeners/) ://www.backalleycoder.com/2012/08/06/css-selector-listeners/ 因为父母也不在场，所以更加复杂））。所以我所做的就是在日历调用 lol 之后将监听器附加到 onclick。我需要创建另一个函数以使其与脚本一起使用，这是代码：

```
var doSelect = function(){
  jQuery('#timeslots').customSelect();
};
jQuery(document).ready(function(){
  jQuery('.td_calendar').on('click','#anchor1',function(){
      cal.select(document.forms['frmRequest'].startdate,'anchor1','yyyy-MM-dd');
      document.getElementById('slots').addSelectorListener('#timeslots', doSelect);
  });
}); 
```

# php - PDO stmt->execute 导致 MySQL 语法错误

> ID：16005057
> 
> 赞同：-1
> 
> 时间：2013-04-14T22:21:41.473
> 
> 标签：php, mysql, pdo

谁能帮我弄清楚为什么以下代码会返回 MySQL 语法错误？

```
$stmt = $pdo->prepare('INSERT INTO `message`(`id`, `message`, 
        `scramble_level`, `scramble_key`) 
        VALUES (:id, :message, :scramble_level, :scramble_key');

$stmt->execute(array(':id' => 'NOW()', ':message' => $theMessage, 
        ':scramble_level' => $scrambleLevel, 
        ':scramble_key' => $scrambleKey)); 
```

这导致：

```
SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '' at line 3 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-14T22:24:06.100

你错过了你的右`)`括号`VALUES()`

```
VALUES (:id, :message, :scramble_level, :scramble_key)'); 
```

# spotify - 如何在 Spotify 广告页面中显示视频？

> ID：16005061
> 
> 赞同：1
> 
> 时间：2013-04-14T22:22:20.433
> 
> 标签：spotify

我是 Spotify 应用程序的新手。我尝试在 spotify 的广告页面中显示视频。但是，我尝试的所有东西都不起作用（jw 播放器、流播放器、youtube iframe。html5）。有什么提示吗？

问候！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T10:06:00.973

任何具有您请求的资产的外部主机都需要添加到应用清单的 RequiredPermissions 部分：

[http://developer.spotify.com/technologies/apps/guidelines/developer/#applicationmanifest](http://developer.spotify.com/technologies/apps/guidelines/developer/#applicationmanifest)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T09:17:35.273

为了在 Spotify 中显示视频，您必须满足以下**要求**：

*   您的视频文件必须存储在第 3 方服务器上。
*   您必须使用开源视频播放器（例如“JW Player”）。
*   您必须创建一个 html 文件作为您的灯箱。这是您将嵌入到视频文件和播放器库中的文件。
*   播放器背景的图像文件。
*   目标 URL 必须在新的浏览器窗口中打开。
*   并且不要忘记将主机地址添加到Spotify**清单文件中的****权限**中！！！

 ****示例**：[这里](http://themoonlightproduction.com/lukas/share/stoSpotify.html)**

# android - NoClassDefFoundError - 使用 Factual Android 驱动程序进行基本的数据库调用

> ID：16005067
> 
> 赞同：0
> 
> 时间：2013-04-14T22:22:51.450
> 
> 标签：android, noclassdeffounderror

我正在尝试在我正在构建的应用程序中开始使用适用于 Android 的 Factual 驱动程序。我已经通过将 .jar 文件从[这里](http://repo1.maven.org/maven2/com/factual/factual-java-driver/1.5.2/)放到我的应用程序的 libs 文件夹中来安装他们的驱动程序。我基本上只是从[这里](https://github.com/Factual/factual-android-sdk-demo)获取演示代码并将其放入我自己的活动中，并根据需要进行修改以使其最初工作。

当我运行活动时，我得到一个 NoClassDefFoundError 指向我第一次实例化 Factual 的行，如下所示：

```
protected Factual factual = new Factual("KEY", "SECRET"); 
```

我必须对代码进行一项更改，以便 Eclipse 接受它。该更改位于下面的 FactualRetrievalTask​​ 类中：

```
public class FactualRetrievalTask extends AsyncTask<Query, Integer, List<ReadResponse>> {
    @Override
    protected List<ReadResponse> doInBackground(Query... params) {
        List<ReadResponse> results = new ArrayList<ReadResponse>(); //changed from Lists.newArrayList();
        for (Query q : params) {
            results.add(factual.fetch("restaurants-us", q));
        }
        return results;
    } 
```

是`List<ReadResponse> results = new ArrayList<ReadResponse>();`，`List<ReadResponse> results = Lists.newArrayList();`但这给了我一个错误，说“无法解析列表”。做了一点研究，我确定我可以把它改成现在的样子。

但是，当我跑步时，我得到`NoClassDefFoundError`，它指向`com.google.common.collect.Lists`。我有一种感觉，我所做的这个改变可能是造成这种情况的原因，但我不确定如何继续和解决它。任何帮助将不胜感激。相关日志如下：

```
04-14 17:06:01.209: E/AndroidRuntime(11688): FATAL EXCEPTION: main
04-14 17:06:01.209: E/AndroidRuntime(11688): java.lang.NoClassDefFoundError: com.google.common.collect.Lists
04-14 17:06:01.209: E/AndroidRuntime(11688):    at com.factual.driver.Factual.<init>(Factual.java:46)
04-14 17:06:01.209: E/AndroidRuntime(11688):    at com.factual.driver.Factual.<init>(Factual.java:57)
04-14 17:06:01.209: E/AndroidRuntime(11688):    at com.example.blobtag2.PlaceActivity.<init>(PlaceActivity.java:64)
04-14 17:06:01.209: E/AndroidRuntime(11688):    at java.lang.Class.newInstanceImpl(Native Method)
04-14 17:06:01.209: E/AndroidRuntime(11688):    at java.lang.Class.newInstance(Class.java:1409)
04-14 17:06:01.209: E/AndroidRuntime(11688):    at android.app.Instrumentation.newActivity(Instrumentation.java:1040)
04-14 17:06:01.209: E/AndroidRuntime(11688):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1757)
04-14 17:06:01.209: E/AndroidRuntime(11688):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1873)
04-14 17:06:01.209: E/AndroidRuntime(11688):    at android.app.ActivityThread.access$1500(ActivityThread.java:135)
04-14 17:06:01.209: E/AndroidRuntime(11688):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1054)
04-14 17:06:01.209: E/AndroidRuntime(11688):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-14 17:06:01.209: E/AndroidRuntime(11688):    at android.os.Looper.loop(Looper.java:150)
04-14 17:06:01.209: E/AndroidRuntime(11688):    at android.app.ActivityThread.main(ActivityThread.java:4358)
04-14 17:06:01.209: E/AndroidRuntime(11688):    at java.lang.reflect.Method.invokeNative(Native Method)
04-14 17:06:01.209: E/AndroidRuntime(11688):    at java.lang.reflect.Method.invoke(Method.java:507)
04-14 17:06:01.209: E/AndroidRuntime(11688):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:849)
04-14 17:06:01.209: E/AndroidRuntime(11688):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:607)
04-14 17:06:01.209: E/AndroidRuntime(11688):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T22:29:45.167

听起来您需要包含[Google 的 guava](http://code.google.com/p/guava-libraries/)：

```
 java.lang.NoClassDefFoundError: com.google.common.collect.Lists 
```

# android - GLSurfaceView 在带有 Android 4.2 的 Nexus 7 上显示黑色

> ID：16005070
> 
> 赞同：6
> 
> 时间：2013-04-14T22:23:04.797
> 
> 标签：android, opengl-es-2.0, glsurfaceview, android-4.2-jelly-bean

我有一个 OpenGL ES2.0 应用程序，它在运行从 2.2 到 4.1 的各种 Android 版本的设备上运行。然而，有人告诉我，在装有 Android 4.2 的 Nexus 7 上运行它时，应用程序中的 3D 图形都是黑色的。操作栏和对话框工作正常。我已经在一个模拟的 Nexus 7 上尝试过了，它带有 Intel Atom 处理器、HAX 和 GPU，运行 4.2.2 并且工作正常。我本来希望运行 ARM 映像，但这似乎不包括 Open GL ES2.0

是否有人对可能导致 Nexus 7 出现此问题的原因以及如何解决此问题有任何见解？

一种可能性是当前 App 版本的目标 API 级别设置为 15，而 4.2.2 为 17 级。这可能是个问题吗？不过在模拟器上运行正常。

下面是我用来在渲染器 onSurfaceCreated() 中设置纹理的代码，以防万一。

```
/**
 * Sets up texturing for the object
 */
private void setupTextures(String[] texFiles) {
    // create new texture ids if object has them
    // number of textures
    mTextureIDs = new int[texFiles.length];

    GLES20.glGenTextures(texFiles.length, mTextureIDs, 0);

    for(int i = 0; i < texFiles.length; i++) {
        GLES20.glBindTexture(GLES20.GL_TEXTURE_2D, mTextureIDs[i]);

        // parameters
        GLES20.glTexParameterf(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_MIN_FILTER,
                GLES20.GL_NEAREST);
        GLES20.glTexParameterf(GLES20.GL_TEXTURE_2D,
                GLES20.GL_TEXTURE_MAG_FILTER,
                GLES20.GL_LINEAR);

        GLES20.glTexParameteri(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_WRAP_S,
                GLES20.GL_REPEAT);
        GLES20.glTexParameteri(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_WRAP_T,
                GLES20.GL_REPEAT);

        int ID = mContext.getResources().getIdentifier( texFiles[i], "raw", "com.antonymsoft.slidixcube" );
        InputStream is = mContext.getResources().openRawResource(ID);
        Bitmap bitmap;
        try {
            bitmap = BitmapFactory.decodeStream(is);
        } finally {
            try {
                is.close();
            } catch(IOException e) {
                // Ignore.
            }
        }

        // create it 
        GLUtils.texImage2D(GLES20.GL_TEXTURE_2D, 0, bitmap, 0);
        bitmap.recycle();

    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T21:45:57.940

你的纹理尺寸是多少？它应该是 2 的幂，例如 16x32 512x512 1024x512 等等。

# wordpress - Wordpress - 选择类别时，如何仅显示本月内的帖子？

> ID：16005074
> 
> 赞同：0
> 
> 时间：2013-04-14T22:23:28.423
> 
> 标签：wordpress, post, limit, categories

我们的网站是月刊，我们希望保留较旧的帖子，但我们不希望用户在点击导航栏的某个部分时看到上个月的帖子。

我们怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T08:24:51.147

WordPress Codex 文章中有一个[示例：](http://codex.wordpress.org/Template_Tags/query_posts#Combining_Parameters)

> 主页上当月类别 13 的帖子：

```
if ( is_home() ) {
    query_posts( $query_string . '&cat=13&monthnum=' . date( 'n', current_time( 'timestamp' ) ) );
} 
```

# python - 在 QDialog reject() 上优雅地终止 QThread

> ID：16005075
> 
> 赞同：6
> 
> 时间：2013-04-14T22:23:49.580
> 
> 标签：python, multithreading, qt, pyqt

我有一个 QDialog，它创建一个 QThread 来做一些工作，同时保持 UI 响应，基于这里给出的结构：[如何真正地、真正地使用 QThreads；完整的解释](http://mayaposch.wordpress.com/2011/11/01/how-to-really-truly-use-qthreads-the-full-explanation/)。但是，如果在线程仍在运行时调用拒绝（）（由于用户按下取消或关闭对话框），我会收到错误消息：

> QThread：在线程仍在运行时被销毁

我希望工作人员中的循环尽早中断，然后在后台进行一些清理（例如清除一些队列，发出信号）。我已经设法用我自己的“取消”函数来做到这一点，但是我如何让它与拒绝（）（以及它可以被调用的所有多种方式）很好地配合？我不希望对话框阻止等待清理 - 它应该继续在后台运行，然后优雅地退出。

请参阅下面显示问题的示例代码。任何帮助将不胜感激。

```
#!/usr/bin/env python

from PyQt4 import QtCore, QtGui
import sys
import time

class Worker(QtCore.QObject):
    def __init__(self):
        QtCore.QObject.__init__(self)

    def process(self):
        # dummy worker process
        for n in range(0, 10):
            print 'process {}'.format(n)
            time.sleep(0.5)
        self.finished.emit()

    finished = QtCore.pyqtSignal()

class Dialog(QtGui.QDialog):
    def __init__(self):
        QtGui.QDialog.__init__(self)
        self.init_ui()

    def init_ui(self):
        self.layout = QtGui.QVBoxLayout(self)
        self.btn_run = QtGui.QPushButton('Run', self)
        self.layout.addWidget(self.btn_run)
        self.btn_cancel = QtGui.QPushButton('Cancel', self)
        self.layout.addWidget(self.btn_cancel)

        QtCore.QObject.connect(self.btn_run, QtCore.SIGNAL('clicked()'), self.run)
        QtCore.QObject.connect(self.btn_cancel, QtCore.SIGNAL('clicked()'), self.reject)

        self.show()
        self.raise_()

    def run(self):
        # start the worker thread
        self.thread = QtCore.QThread()
        self.worker = Worker()
        self.worker.moveToThread(self.thread)
        QtCore.QObject.connect(self.thread, QtCore.SIGNAL('started()'), self.worker.process)
        QtCore.QObject.connect(self.worker, QtCore.SIGNAL('finished()'), self.thread.quit)
        QtCore.QObject.connect(self.worker, QtCore.SIGNAL('finished()'), self.worker.deleteLater)
        QtCore.QObject.connect(self.thread, QtCore.SIGNAL('finished()'), self.thread.deleteLater)
        self.thread.start()

def main():
    app = QtGui.QApplication(sys.argv)
    dlg = Dialog()
    ret = dlg.exec_()

if __name__ == '__main__':
    main() 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-14T22:59:45.057

您的问题是：`self.thread`在关闭对话框或按下取消按钮后被 Python 释放，而 Qt 线程仍在运行。

为避免这种情况，您可以指定该线程的父级。例如，

```
 def run(self):
        # start the worker thread
        self.thread = QtCore.QThread(**self**)
        self.worker = Worker()
        self.worker.moveToThread(self.thread)
        QtCore.QObject.connect(self.thread, QtCore.SIGNAL('started()'), self.worker.process)
        QtCore.QObject.connect(self.worker, QtCore.SIGNAL('finished()'), self.thread.quit)
        QtCore.QObject.connect(self.worker, QtCore.SIGNAL('finished()'), self.worker.deleteLater)
        QtCore.QObject.connect(self.thread, QtCore.SIGNAL('finished()'), self.thread.deleteLater)
        self.thread.start() 
```

然后它将由 Qt 而不是 PyQt 拥有，因此在 Qt 优雅地终止它之前不会被 GC 收集。实际上，这种方法只是让 Qt 不抱怨，并没有完全解决问题。

为了优雅地终止一个线程，常用的方法是使用一个标志来通知工作函数停止。
例如：

```
class Worker(QtCore.QObject):
    def __init__(self):
        QtCore.QObject.__init__(self)

    def process(self):
        # dummy worker process
        self.flag = False
        for n in range(0, 10):
            if self.flag:
                print 'stop'
                break
            print 'process {}'.format(n)
            time.sleep(0.5)
        self.finished.emit()

    finished = QtCore.pyqtSignal()

class Dialog(QtGui.QDialog):
    def __init__(self, parent=None):
        QtGui.QDialog.__init__(self, parent)
        self.init_ui()

    def init_ui(self):
        self.layout = QtGui.QVBoxLayout(self)
        self.btn_run = QtGui.QPushButton('Run', self)
        self.layout.addWidget(self.btn_run)
        self.btn_cancel = QtGui.QPushButton('Cancel', self)
        self.layout.addWidget(self.btn_cancel)

        QtCore.QObject.connect(self.btn_run, QtCore.SIGNAL('clicked()'), self.run)
        QtCore.QObject.connect(self.btn_cancel, QtCore.SIGNAL('clicked()'), self.reject)

        QtCore.QObject.connect(self, QtCore.SIGNAL('rejected()'), self.stop_worker)

        self.show()
        self.raise_()

    def stop_worker(self):
        print 'stop'
        self.worker.flag = True

    def run(self):
        # start the worker thread
        self.thread = QtCore.QThread(self)
        self.worker = Worker()
        self.worker.moveToThread(self.thread)
        QtCore.QObject.connect(self.thread, QtCore.SIGNAL('started()'), self.worker.process)
        QtCore.QObject.connect(self.worker, QtCore.SIGNAL('finished()'), self.thread.quit)
        QtCore.QObject.connect(self.worker, QtCore.SIGNAL('finished()'), self.worker.deleteLater)
        QtCore.QObject.connect(self.thread, QtCore.SIGNAL('finished()'), self.thread.deleteLater)
        self.thread.start() 
```

# jquery - 图像按钮（左+右）jquery 使用 offset().left 进行右键单击，css 中的 left 值用于左键单击只工作一次？

> ID：16005083
> 
> 赞同：0
> 
> 时间：2013-04-14T22:24:26.923
> 
> 标签：jquery, html, css

![工作示例](https://i.stack.imgur.com/yjMzT.png)

我一直在练习 jQuery，我想知道你是否可以帮助我解决这个错误。

我遇到了使用箭头移动图片的网站并尝试学习一个。

但是，我的每边只能单击一次。在此 div 结束之前，我无法让右键显示更多图片。当我再次点击时，它什么也没做。控制台上没有我可以调试的东西。

HTML：

1.  div 左键。
2.  具有特定宽度的`overflow:hidden`div 和具有宽度：1000px 的另一个 div 以将图片保存在一个组中。
3.  右键

注意：我测试每次使用 jQuery move CSS 150px。我也在这里发帖。图片不同，但代码相同。

jsfiddle.net/bewPromtong/ufvgp

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T22:35:44.440

我有点搞砸了你的`if/else`陈述，但我找到了解决你问题的方法。您只是将您的设置`left`为`-150px`，而不是`150px`在现有值的基础上添加。要解决此问题，请将您的`animate`jquery 更改为此。

```
var leftanimator = function() {
    var $maxL = $('#images').css('left');
    if ($left <= $maxL) {
        return false;
    }else {
    $wrapper.animate({'left':'+=150px' }, 1000);  //this change
    }
    return false;
}
var rightanimator = function() {
    var $right = $('#images').offset().left;
    var $maxR = 0;
    $wrapper.animate({'left':'+=-150px' }, 1000);  //this change
        return false;
} 
```

[jsfiddle 在这里](http://jsfiddle.net/ufvgp/1/)

记得重新添加你`if/else`的正确的动画师功能！哈哈

# vb.net - 流写入器文件的输入框输入

> ID：16005084
> 
> 赞同：0
> 
> 时间：2013-04-14T22:24:35.683
> 
> 标签：vb.net, streamwriter, inputbox

因此，在我的作业中，我们应该在`Directories.txt`文件中创建电话目录，然后更改目录中的列表。我制作了一个空白`directories.txt`文件并将其放在调试文件夹中。我还创建了一个按钮，标题为`Create a New Phone Directory.`当用户单击它时，会显示输入框，提示用户为新目录命名。我想知道如何从用户键入的输入框中获取结果，并使用它在directories.txt 中创建一个新目录文件并将其显示在列表框中。我想我必须使用流编写器，但每次尝试时，列表框中的结果都会显示为`system.IO.streamwriter`.

这是我当前的代码：

```
Private Sub btnCreate_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnCreate.Click
    inputDirectories = InputBox("Please Enter the Name of the New Directory")
    If inputDirectories Is "" Then
        MessageBox.Show("Invalid Directory Name")
    End If
    Dim fileDirectories As IO.StreamWriter = IO.File.CreateText(inputDirectories)
    fileDirectories.WriteLine(inputDirectories)
End Sub 
```

分配说明说使用写行方法将新文件的名称添加到`directories.txt`文件中，但我完全不知道如何做到这一点。任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T01:42:24.060

```
Private Sub btnCreate_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnCreate.Click
'
Dim path As String = "c:\temp\MyTestDirectory.txt"
Dim fileDirectories As System.IO.StreamWriter
Dim inputDirectory As String = ""
  '
  inputDirectory = InputBox("Please Enter the Name of the New Directory")
  If inputDirectory = "" Then
    MessageBox.Show("Invalid Directory Name")
  Else
    If System.IO.File.Exists(path) = False Then
      'The file does not exist so create a new file & add the inputted data
      fileDirectories = System.IO.File.CreateText(path)
      fileDirectories.WriteLine(inputDirectory)
      fileDirectories.Flush()
      fileDirectories.Close()
    Else
      'The file exists so append  file with the inputted data
      fileDirectories = System.IO.File.AppendText(path)
      fileDirectories.WriteLine(inputDirectory)
      fileDirectories.Flush()
      fileDirectories.Close()
    End If
  End If
  '
End Sub

Sub ReadDataBackNow()
  ' Open the file to read from one line at a time
  Dim path As String = "c:\temp\MyTestDirectory.txt"
  Dim DataStreamIn As System.IO.StreamReader = System.IO.File.OpenText(path)
  Dim TextLines As String = ""
  '
    Do While DataStreamIn.Peek() >= 0
      TextLines = TextLines & DataStreamIn.ReadLine()
    Loop
    DataStreamIn.Close()
    MsgBox(TextLines)
End Sub 
```

# 更新

更新以回答其他问题。在您的按钮单击事件中添加以下行

```
Listbox1.Items.Add(inputDirectory) 
```

在内部 IF THEN 块之后添加行，这样您的代码就会像这样

```
 If System.IO.File.Exists(path) = False Then
      'The file does not exist so create a new file & add the inputted data
      fileDirectories = System.IO.File.CreateText(path)
      fileDirectories.WriteLine(inputDirectory)
      fileDirectories.Flush()
      fileDirectories.Close()
    Else
      'The file exists so append  file with the inputted data
      fileDirectories = System.IO.File.AppendText(path)
      fileDirectories.WriteLine(inputDirectory)
      fileDirectories.Flush()
      fileDirectories.Close()
    End If
    Listbox1.Items.Add(inputDirectory) 
```

请注意，您将需要几个文件来回答您的问题，因此您最终可能会得到类似

```
Directories.txt (contains list of directories)
   Friends_Directory.txt
   Workmates_Directory.txt
   Family_Directory.txt

 Friends_Directory.txt (contains list of friends)
   Bob 1234567890
   Angela 2345678901
   Steve 3456789012
   Ahmed 4567890123
   Fatima 5678901234

 Workmates_Directory.txt (contains list of workmates)
   CEO_Alan 0987654321
   Manager_Daisy 0876543219
   Foreman_Judy 0765432198
   Colleague_Jill 0654321987

 Family_Directory.txt
   Bro_Malcolm 1122334455
   Sis_Alisha 2233445566
   Moms 3344556677
   Pops 4455667788
   Uncle_Ben 5566778899
   Aunty_Sarah 6677889900 
```

# scheme - 如何从 Scheme 程序中提取列表？

> ID：16005088
> 
> 赞同：0
> 
> 时间：2013-04-14T22:24:49.790
> 
> 标签：scheme, racket

我一直在用 Scheme 提供一种语言。

```
(define-datatype statement statement?
  (add1 (V symbol?))
  (sub1 (V symbol?))
  (skip (V symbol?))
  (if-goto (V symbol?)
           (l symbol?)))

(define-datatype instruction instruction?
  (labeled (l symbol?)
           (i statement?))
  (unlabeled (i statement?)))

(define-datatype program program?
  (a-program (l (list-of instruction?)))) 
```

我正在尝试创建一个能够将程序转换为指令列表的新函数。我该怎么做呢？

这是我到目前为止所拥有的：

```
(define pgm->list
   (lambda (pgm)
     ;what goes here 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T14:15:31.723

抱歉，如果这是错误的，如果是，您可以分享您的代码的工作实现吗？我真的很困惑

```
(define-datatype program program?
  (a-program (l (list-of instruction?)))) 
```

什么是列表？我应该在这里想象你想声明一些程序的变体。a-program 将被定义为指令列表...好的。如果 list-of 返回一个作为正确谓词的 lambda（仅在对指令列表进行操作时返回 true），那么这是否有效？

```
(define pgm->list
  (lambda (pgm)
    (cases program pgm
      (a-program (l) l)))) 
```

编辑：由于除了OP之外我们大多数人都不知道define-datatype，我正在添加一些文档：

> **[语法]（定义数据类型 TYPENAME [PREDICATE] VARIANT ...）**
> 
> 定义一个名为 TYPENAME 的记录类型，其中 VARIANT ... 为这种类型的实例定义一个或多个构造函数。VARIANT 的形式应为
> 
> 变体 =（构造函数（字段名称 FIELDPRED）...）
> 
> CONSTRUCTOR 是构造函数过程的名称，它将使用与指定字段一样多的参数来定义。(FIELDNAME FIELDPRED) ... 指定每个字段的名称和一个参数的过程，该过程应返回合法字段值的真值。
> 
> 可选的 PREDICATE 应该是将要定义的过程的名称，当应用于此变体记录的实例时，它会返回 #t。
> 
> **[语法] (case TYPENAME EXP CLAUSE ...)**
> 
> 用于匹配和解构名为 TYPENAME 的变体记录的实例 EXP 的工具。每个 CLAUSE 指定一个带有字段名的构造函数和一个在构造函数与记录实例匹配时要执行的主体：
> 
> 子句 = (构造函数 (字段名 ...) 正文 ...) | （否则身体...）

干杯！

# grouping - 对不同比例的边界框进行分组

> ID：16005089
> 
> 赞同：0
> 
> 时间：2013-04-14T22:24:58.960
> 
> 标签：grouping, detection, bounding-box

我创建了一个用于对图像进行人体检测的 openCV 应用程序。

我在同一张图像上以不同的比例运行我的算法，当进行检测时，最后我有关于边界框位置以及它是从哪个比例获取的信息。然后我想将该矩形转换为原始比例，因为位置和大小会有所不同。

我已经把我的头绕在了这个问题上，但我一无所获。这应该很简单，但目前我一无所知。

帮助任何人？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T15:30:31.207

好的，在别处得到答案

“你应该做的是存储每次检测的比例。然后转换应该很容易吧。想象一下你有以下。

X 和 Y 坐标（边界框的中心），比例为原始的 1/2。这意味着您应该乘以比例的倒数来获得原始位置，即 2X、2Y（同样用于弹跳框中心）。

因此，首先转换边界框的中心，然后计算原始边界框的宽度和高度，再次乘以逆。然后从中心开始，您的框将是 +-width_double/2 和 +-height_double/2。”

# c# - 为什么使用 DirectShow(.NET) 重新绘制无窗口控件？

> ID：16005090
> 
> 赞同：0
> 
> 时间：2013-04-14T22:24:59.057
> 
> 标签：c#, winapi, video, directshow, directshow.net

我正在使用`IVMRWindowlessControl9`ie `WindowlessControl`w/播放视频`VMR-9`。当我最初设置视频时遇到困难时，我注意到网上找到的许多示例在 Window 的 Paint 处理程序中都有这段代码：

```
IntPtr hdc = e.Graphics.GetHdc();
int hr = 0;
hr = windowlessCtrl.RepaintVideo(this.Handle, hdc);
e.Graphics.ReleaseHdc(hdc); 
```

我的视频可以正常播放，但我没有上面的代码。上面的代码有什么作用，使用它有什么意义吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T11:15:56.383

至于它的作用：

*   如果使用目标颜色键绘制视频，则它将键颜色绘制到目标窗口中。

*   如果图像是信箱的，或者它的一部分落在另一台显示器上，它将绘制图像未覆盖的部分。

因此，如果这些事情都不适用，您可能根本看不到任何区别。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T22:39:37.440

在大多数情况下，您不需要显式地重新绘制视频，因为视频渲染器会自动完成。是的，如果托管窗口需要 - 出于任何原因 - 请求强制重新申请，例如作为`WM_PAINT`窗口消息处理程序的一部分，那么`RepaintVideo`方法就在这里为您服务。

在 MSDN、[VMR 无窗口模式](http://msdn.microsoft.com/en-us/library/windows/desktop/dd390962%28v=vs.85%29.aspx)上查看更多信息：

> 在播放期间，应用程序应通知 VMR 以下 Windows 消息：
> 
> WM_PAINT：调用 IVMRWindowlessControl::RepaintVideo 重新绘制图像。

# node.js - Node.js JavaScript 字符串化

> ID：16005091
> 
> 赞同：6
> 
> 时间：2013-04-14T22:25:03.160
> 
> 标签：node.js, serialization, stringify

[JSON 不是 JavaScript 的子集](http://timelessrepo.com/json-isnt-a-javascript-subset)。我需要我的输出是 100% 有效的 JavaScript；它将被如此评估——即，`JSON.stringify`不会（总是）满足我的需要。

Node 有 JavaScript 字符串化器吗？

作为奖励，如果它可以对对象进行字符串化，那就太好了。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-14T23:25:03.760

您可以使用`JSON.stringify`然后替换剩余的 U+2028 和 U+2029 字符。正如文章链接所述，字符只能出现在字符串中，因此我们可以安全地用它们的转义版本替换它们，而不必担心替换我们不应该替换它们的字符：

```
JSON.stringify('ro\u2028cks').replace(/\u2028/g,'\\u2028').replace(/\u2029/g,'\\u2029')
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T22:28:12.813

从您链接的文章的最后一段中：

> 解决方案
> 
> 幸运的是，解决方案很简单：如果我们查看 JSON 规范，我们会发现 U+2028 或 U+2029 可能出现的唯一位置是字符串。因此，每当我们需要发送一些 JSONP 时，我们可以简单地将每个 U+2028 替换为 \u2028（转义序列），并将 U+2029 替换为 \u2029。
> 
> 它已经在 Rack::JSONP 中得到修复，我鼓励所有发送 JSONP 的框架或库也这样做。在大多数语言中，它是一个单行补丁，结果仍然是 100% 有效的 JSON。

# javascript - 未捕获的错误：NotFoundError：DOM IDBDatabase 异常 8

> ID：16005097
> 
> 赞同：-1
> 
> 时间：2013-04-14T22:26:09.390
> 
> 标签：javascript, database, html, indexeddb

我在 Javascript 中使用 indexeddb API 时遇到了一个奇怪的问题。下面的代码在主题行中生成错误：

```
 var notesdisplay, db;
function initiate(){
  notesdisplay = document.getElementById('notesdisplay');
  var button = document.getElementById('save');
  button.addEventListener('click', addobject);

  var request = indexedDB.open('mydatabase');
  request.addEventListener('error', showerror);
  request.addEventListener('success', start);
  request.addEventListener('upgradeneeded', createdb);
}
function showerror(e){
  alert('Error: ' + e.code + ' ' + e.message);
}
function start(e){
  db = e.target.result;
  show();
}
function createdb(e){
  var datababase = e.target.result;
  var mystore = datababase.createObjectStore('notesTable', {keyPath: 'id'});
  mystore.createIndex('searchNotes', 'id', {unique: false});
}
function addobject(){
  var title = document.getElementById('notesbox').value;

  var mytransaction = db.transaction(['notesTable'], "readwrite");
  var mystore = mytransaction.objectStore('notesTable');
  var request = mystore.add({id: title});
  request.addEventListener('success', show);

  document.getElementById('notesbox').value = '';
}

function show(){
  notesdisplay.innerHTML = '';
  var mytransaction = db.transaction(['notesTable']);
  var mystore = mytransaction.objectStore('notesTable');
  var myindex = mystore.index('searchNotes');
  var newcursor = myindex.openCursor(null, "prev");
  newcursor.addEventListener('success', showlist);
}
function showlist(e){
  var cursor = e.target.result;
  if(cursor){
    notesdisplay.innerHTML += '<div>' + cursor.value.id + ' - ' + ' <input type="button" onclick="removeobject(\'' + cursor.value.id + '\')" value="remove"></div>';

    cursor.continue();
  }
}
function removeobject(keyword){
  if(confirm('Are you sure?')){
    var mytransaction = db.transaction(['notesTable'], "readwrite");
    var mystore = mytransaction.objectStore('notesTable');
    var request = mystore.delete(keyword);
    request.addEventListener('success', show);
  }
}
addEventListener('load', initiate); 
```

当我从 Chrome 中运行它时，我在主题行中收到错误。但是，当我从 Firefox 运行它时，会生成一个不同的错误（可能在同一行上）。

--

> [19:13:54.870] 类型错误：数据库未定义

虽然我对 Javascript 相当陌生，但在我看来，变量 db 是在 start 函数中定义的，如下所示：

> 函数开始（e）{ db = e.target.result; 节目（）; }

该程序是我从书中获得的示例的简化版本。这只有一个键/值对。

任何关于可能是什么问题的建议/指示将不胜感激。

非常感谢，

夫纳亚克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T18:34:08.427

您打开数据库连接的请求可能会被阻止。尝试将以下内容添加到您的启动功能

```
request.addEventListener('blocked', function() { console.log('blocked'); }); 
```

# c - 在像这样的指针函数的情况下如何分配内存？

> ID：16005098
> 
> 赞同：0
> 
> 时间：2013-04-14T22:26:28.040
> 
> 标签：c, pointers

我是 C 编程的初学者，我刚刚开始学习指针的概念。有人可以解释为什么我的代码以分段错误结尾，而我认为我做得对吗？也许我缺乏一些内存分配概念，我希望这里有人可以详细解释它们，或者指出我可以链接到哪里可以找到像我这样的问题的解释。

```
char strs(char *s, char *k)
{
    int flag=0;
    do
    {
        if(*k=='\0') return (*(s-flag));
        if(*s==*k)
        {
            k++;
            flag++;
        }
        if(flag!=0 && *s!=*k)
        {
            k=k-flag;
        }   
        s++;
    } while(*s!='\0');
    return('\0');
}

main()
{
    char s[10],k[5];
    printf("Please enter the main string: ");
    scanf("%s",s);
    printf("Please enter the key string: ");
    scanf("%s",k);
    if((strs(s,k))!='\0') printf("The pointer is at <<<%s>>> in %s",strs(s,k),s);
    if((strs(s,k)=='\0')) printf("\nKey string not found, value of strs is %s", strs(s,k));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T22:37:10.430

您的 strs 函数返回一个 char 但您尝试使用 %s 格式说明符输出它。要输出单个字符，请使用 %c：

```
printf("The pointer is at <<<%c>>> in %s",strs(s,k),s); 
```

# php - 如何（快速）在长文本字段中搜索某个字符串（字段最长为 500 个字符）

> ID：16005099
> 
> 赞同：0
> 
> 时间：2013-04-14T22:26:40.017
> 
> 标签：php, mysql, email, search

我有一个名为“消息”的字段，它可以容纳最多 500 个字符的字符串。它基本上适用于现场收件箱系统。

用户的收件箱中有 250 条消息。

如果用户想在收件箱中搜索带有字符串“men fashion”的消息，我希望 MySQL 查询将查询限制为与该用户关联的 250 条消息，然后再搜索“消息”字段。

我希望查询还可以按照搜索字符串与消息内容的匹配程度来确定并返回查询结果。因此，出现三次“男士时尚”的信息会出现在顶部；一个有“时尚”的会出现在下一个，一个有“男人”的会出现在底部。

你怎么：

1.  确保它不会耗尽服务器
2.  通过消息与搜索字符串的匹配程度来进行整个排序吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T02:32:35.117

你可以看看 MySql 全文搜索功能。它可以通过相关性返回搜索结果。

[http://dev.mysql.com/doc/refman/5.6/en/fulltext-search.html](http://dev.mysql.com/doc/refman/5.6/en/fulltext-search.html)

# javascript - 带有 JQuery 的滑动菜单和操作栏

> ID：16005102
> 
> 赞同：1
> 
> 时间：2013-04-14T22:26:55.530
> 
> 标签：javascript, jquery, html, cordova

我正在尝试制作 phonegap 项目。我正在使用你知道的 html5、css 和 javascript。在这个项目上，我想制作一个我的界面，比如 google play 或 twitter 的新界面。

“当我向左或向右滑动时，我的菜单会改变，我的导航也会改变。” 喜欢这些图片让你记住；

*   [http://mobilesyrup.com/wp-content/uploads/2012/03/Screenshot_2012-03-16-08-39-13-e1331912372399.jpg](http://mobilesyrup.com/wp-content/uploads/2012/03/Screenshot_2012-03-16-08-39-13-e1331912372399.jpg)

*   [http://4.bp.blogspot.com/-gH_0tHDveKc/UVtxpipM00I/AAAAAAAAAiY/5P2vhxa3KtQ/s1600/android_new+design.png](http://4.bp.blogspot.com/-gH_0tHDveKc/UVtxpipM00I/AAAAAAAAAiY/5P2vhxa3KtQ/s1600/android_new+design.png)

我在互联网上找到了一些 jsfiddle 演示，但是它们都没有在示例中一起出现。例如 ; 这仅显示左右滑动；

```
 - http://jsfiddle.net/QjUMh/ 
```

这是从顶部单击；

```
 - `http://jsfiddle.net/XJVYj/` 
```

请帮我解决这个滑动、滑动或任何你称之为的事情。我想尽快了解并在我的项目中使用它。

谢谢 ！

# subscript - Java数组中下标的定义是什么？

> ID：16005110
> 
> 赞同：0
> 
> 时间：2013-04-14T22:27:53.877
> 
> 标签：subscript

这是一个测试评论，书中没有定义。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-14T22:29:32.360

数组下标是表示数组索引的另一种方式。该术语源自用于访问列表元素的数学符号。

# android - ImageView 错误地获取新闻状态

> ID：16005112
> 
> 赞同：1
> 
> 时间：2013-04-14T22:28:05.567
> 
> 标签：android, android-layout, android-widget

我在类似布局的操作栏中有一个带有 2 个图像视图的桌面小部件，“问题”是无论在小部件中的哪个位置按下（btnRefreshWidget 除外），我的 btnOpen 视图都处于按下状态。我不知道为什么。我浏览了我的布局，但找不到任何看起来不正常的东西，这是我的布局 xml。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<RelativeLayout
    android:id="@+id/widgetItemWrapper"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="#99000000"
    android:clickable="false" >

     <ImageView
        android:id="@+id/btnOpen"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_centerVertical="true"
        android:background="@drawable/background_widget_refresh"
        android:padding="8dp"
        android:src="@drawable/ic_refresh_dark" />

    <ImageView
        android:id="@+id/btnRefreshWidget"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_centerVertical="true"
        android:background="@drawable/background_widget_refresh"
        android:padding="8dp"
        android:src="@drawable/ic_refresh_dark" />
</RelativeLayout>

<ListView
    android:id="@+id/lstWidgetList"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_marginTop="1dp"
    android:background="#40000000" >
</ListView>

<TextView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/empty_view"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_marginTop="1dp"
    android:background="#40000000"
    android:gravity="center"
    android:shadowColor="@android:color/black"
    android:shadowDx="1"
    android:shadowDy="1"
    android:shadowRadius="1"
    android:text="@string/widget_message_noshow"
    android:textColor="#FFFFFF"
    android:textSize="18sp" />
</LinearLayout> 
```

# c++ - 在Qt中将公历日期转换为波斯日期（jalali）

> ID：16005114
> 
> 赞同：8
> 
> 时间：2013-04-14T22:28:19.213
> 
> 标签：c++, qt, date

如何在 Qt 中将公历日期转换为波斯日期？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-14T22:31:57.810

[QDateConvertor](https://github.com/kharazi/qdateconvertor)类可以帮助您将日期形式 geogorian 转换为 jalali 和 jalali 到 geogorian。

**编辑：** 将此类添加到您的项目中，并在需要转换日期的地方包含“qdateconvertor.h”。

```
 // gregorian to jalali 
   QDateConvertor mdate;
   QStringList shamsi=  mdate.ToJalali( "2001","9","11");
   QString JalailDate =shamsi.at(0)+"/"+shamsi.at(1)+"/"+shamsi.at(2)+ ":" +shamsi.at(3);
   qDebug()<<JalailDate;    
   // jalali to gregorian
   QStringList m= mdate.ToMiladi("1372","3","6");
   QString miladiDate= m.at(0)+"/"+ m.at(1)+"/"+m.at(2);
   qDebug()<<miladiDate; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2020-05-05T01:29:26.837

对于 QT >= 5.14，您可以这样做：

```
QCalendar calendar(QCalendar::System::Jalali);

QDate today = QDate::currentDate();

QCalendar::YearMonthDay ymd = calendar.partsFromDate(today);

qDebug() << ymd.year;
qDebug() << ymd.month;
qDebug() << ymd.day;

qDebug() << QString("%1/%2/%3")
            .arg(ymd.year, 4, 10, QChar('0'))
            .arg(ymd.month, 2, 10, QChar('0'))
            .arg(ymd.day, 2, 10, QChar('0')); 
```

# .net - Html.DropDownListFor 不会在循环中预选当前值

> ID：16005115
> 
> 赞同：0
> 
> 时间：2013-04-14T22:28:26.160
> 
> 标签：.net, asp.net-mvc, c#-4.0, razor, asp.net-mvc-4

我有一个使用 Razor 视图引擎的 MVC 4 项目，发现了一些奇怪的东西：
我在视图中有以下代码行：

```
@Html.DropDownListFor(model => model.TypA.Enum, Html.GetEnumList()) 
```

这工作正常（`Html.GetEnumList()`返回一个`List<SelectListItem>`包含有效项目），但现在我有一个`TypeA`我正在`for`循环显示/编辑的列表：

```
@for(int i = 0; i < Model.ListOfA.Count; ++i)
{
    @Html.DropDownListFor(model => model.ListOfA[i].Enum, Html.GetEnumList())
} 
```

现在在这种情况下，如果我编辑现有项目，则不会在下拉列表中预先选择当前值，就像在第一种情况下一样。如果我手动更改该值并将其发布回服务器，则会在列表中的每个对象中设置正确的值。

**有谁知道为什么预选在这里不起作用？**

现在我做了一个解决方法，将当前值提供给`GetEnumList(model.ListOfA[i].Enum)`，然后将`Selected`属性设置为`true`on `SelectListItem`，但我认为这不是必需的，因为它适用于第一种情况......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T23:00:57.020

这在过去发生在我身上，我正在填充 ViewBag 中的选项，当我确保将默认选项设置为 selected=true 时，这种情况就消失了。

```
var customers = new List<SelectListItem> { 
        new SelectListItem
        {
            Selected = true,
            Text = "Select one",
            Value = ""
        }
};
customers.AddRange(otherCustomers);
ViewBag.Customers = customers; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T23:54:12.890

我无法解释为什么它没有绑定正确的值，但快速测试表明它也发生在我身上。作为解决方案，您可以删除 for 循环并使用模板：

```
@Html.EditorFor(m => m.ListOfA) 
```

然后添加一个局部视图`TypeA.cshtml`，如下所示：

```
@model TypeA

@Html.DropDownListFor(model => model.Enum, Html.GetEnumList()) 
```

那应该正确绑定。

# php - 有没有更好的方法来保护特定网页？

> ID：16005118
> 
> 赞同：4
> 
> 时间：2013-04-14T22:28:38.013
> 
> 标签：php, security, session, redirect

我有一个网站，只有具有管理员权限的用户才能查看某些页面。当我登录登录到我的管理员帐户时`$_session["is_admin"] = true`设置。然后在我希望只有具有管理员权限的用户能够查看的页面上，我检查 is_admin 是否为真，否则我将它们重定向到索引页面。

`if(!$_SESSION["is_admin"]){ //redirect to index.Php}` 在这些情况下是否有更好的方法来保护网页？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T22:41:04.710

如果代码在不公开的地方（在公用文件夹之上），代码会更安全，因此问题更难发生。这里会发生什么？

```
</php
  // Code 
```

如果整个页面的内容在公共文件夹中，它将以纯文本形式显示。虽然这种情况很少见，但缺少 php 标签并不少见，在包含的文件中更是如此（然后攻击者可以直接访问该包含的文件）。

另外，请查看[有关 session hijacking 的其他 SO question](https://stackoverflow.com/q/6483092/938236)，它直接与您的问题有关。

编辑。我刚刚阅读了[facebook的批评维基百科页面](http://en.wikipedia.org/wiki/Criticism_of_Facebook)并且非常相关，所以我引用它：

> 据领先的互联网新闻网站称，2007 年 8 月，用于在访问者浏览该网站时生成 Facebook 主页和搜索页面的代码意外公开。Facebook 服务器上的配置问题导致显示 PHP 代码而不是代码应该创建的网页，这引发了人们对网站上私人数据的安全性的担忧。

如果他们以前在其他地方问过这个问题，他们可能不会被暴露。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T22:43:40.650

严格依赖`$_SESSION`全局不是**很**安全。有些应用程序能够“劫持”会话并操纵`SESSION` `ID`存储在客户端的 s。看看[FireSheep](http://en.wikipedia.org/wiki/Firesheep)。

我建议的是实施某种额外的安全级别。额外的安全级别可能包括将 IP 地址列入白名单，或在您`SESSION`的 s.

另请参阅[将数据存储在不安全的 php 会话中](https://stackoverflow.com/questions/7070744/is-storing-data-in-php-session-insecure)（这不是同一个问题，但类似）。

**将 IP 地址列入白名单**：

如[管理员访问的白名单 IP 地址中所述](https://stackoverflow.com/questions/7465321/white-list-ip-address-for-admin-access)，您可以记录有权访问您的页面的 IP 地址。如果 IP 地址不在允许的地址范围内，则拒绝访问该页面。您可以将地址存储在数据库中或将它们硬编码到脚本中（我会远离硬编码）。

这是从上面链接中的 zerkms 中获取的修改示例，其中包含您的`SESSION`测试：

```
$whitelist = array('192.168.0.1', '192.168.0.2');

if ($_SESSION['is_admin'] !== true || !in_array($_SERVER['REMOTE_ADDR'], $whitelist)) {
    //Admin denied.
    header('Location: denied.php'); exit();
}

echo "You're an admin!" 
```

**缩短会话到期时间**：

我建议[在这里](https://stackoverflow.com/questions/520237/how-do-i-expire-a-php-session-after-30-minutes)阅读 Gumbo 的答案。

**更多阅读材料**：

*   [http://phpsec.org/projects/guide/4.html](http://phpsec.org/projects/guide/4.html)

*   [http://blog.teamtreehouse.com/how-to-create-bulletproof-sessions](http://blog.teamtreehouse.com/how-to-create-bulletproof-sessions)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-14T22:35:05.763

如果您在访问页面方面只有管理员和非管理员用户，这是可以的。如果您有更多用户级别，您也可以实现角色。

# python - 如何在 Python 中创建递归平方根？

> ID：16005123
> 
> 赞同：-1
> 
> 时间：2013-04-14T22:29:14.703
> 
> 标签：python, recursion, square-root

我有这个代码：

```
def root(x,n):    
    if n==0:
        return x
    else:
        return 0.5**(x/root(x,n-1)+root(x,n-1)) 
```

但：

```
>>>root(4,2)
>>>2.05 
```

为什么？它不适用于其他平方根...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T23:12:19.660

看起来您正在尝试实现用于计算平方根的[除差](http://en.wikipedia.org/wiki/Divided_differences)算法（不过我无法确定）；不过，我不确定您为什么在此使用内置的幂运算符（**）-您不应该这样做。

递归平方根的基本策略是猜测平方根，检查猜测的准确性，如果旧的猜测不够准确，则创建一个新的猜测，然后递归地继续这样做，直到猜测足够接近真根返回。

为了控制结果的准确性（以及递归的深度），我们需要能够根据实际平方根来检查我们的猜测；我们可以通过对其进行平方并将其与我们找到的平方根的数字之间的差异来做到这一点非常小。

```
def goodEnough(guess, x):
    return abs((x - (guess * guess))) <= .01 #change this value to make the function more or less accurate 
```

为了真正找到平方根，我们需要一种更好的猜测方法；这就是算法的用武之地。我选择使用[牛顿法](http://en.wikipedia.org/wiki/Babylonian_method#Babylonian_method)，因为它相当简单。

```
def newGuess(guess, x):
    return (guess + guess/x)/2 
```

现在我们可以把它们放在一起：

```
def root(guess, x):
    if goodEnough(guess, x):
        return guess
    else:
        return root(newGuess(guess, x), x) 
```

我们可以通过多一步消除guess 参数：

```
def sqrt(x):
    return root(x/2, x) #x/2 is usually somewhat close to the square root of a number 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-14T14:14:45.043

它确实有效，唯一的问题是递归调用的数量越高，即 n 在这种情况下，您的结果应该越准确，因为计算中的错误减少了还确保包括当 n == 0 时的案例计算

# java - 从文件中读取多个对象

> ID：16005125
> 
> 赞同：0
> 
> 时间：2013-04-14T22:29:24.843
> 
> 标签：java, serialization, deserialization, java-io, eofexception

是否有使用`ObjectInputStream`. 我看到的示例似乎依赖于捕获异常来结束阅读。虽然它可能有效，但它似乎不是一个干净的解决方案，因为除非代码中存在错误，否则不应真正发生异常。

[示例 1](https://stackoverflow.com/questions/7826834/de-serializing-objects-from-a-file-in-java)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T00:03:18.633

`EOFException`由`readObject()`方法抛出以指示流结束。因此，您必须抓住它才能检测到流的结束。QED。别介意例外警察。

# javascript - 一次不止一个值？

> ID：16005128
> 
> 赞同：0
> 
> 时间：2013-04-14T22:29:33.960
> 
> 标签：javascript, ajax

有没有一种方法可以一次包含多个值。首先，这是脚本：

```
$(document).ready(function() {
    $('.edit_link').click(function() {
        $('.text_wrapper').hide();
        var data=$('.text_wrapper').html();
        $('.edit').show();
        $('.editbox').html(data);
        $('.editbox').focus();
    });

    $(".editbox").mouseup(function() {
        return false
    });

    $(".editbox").change(function() {
        $('.edit').hide();
        var boxval = $(".editbox").val();
        var dataString = 'data=' + boxval;
        $.ajax({
            type: "POST",
            url: "update_profile_ajax.php",
            data: dataString,
            cache: false,
            success: function(html) {
                $('.text_wrapper').html(boxval);
                $('.text_wrapper').show();
            }
        });
    });

    $(document).mouseup(function() {
        $('.edit').hide();
        $('.text_wrapper').show();
    });
}); 
```

我想拥有多个领域。我想一次编辑多个条目，而不是简单地为每个不同的值重写代码。有没有办法可以将它们包含在代码中？我试过这个但没有运气：

```
$('.edit_link','.edit_link2','.edit_link3').click(function() {
    $('.text_wrapper','.text_wrapper2','.text_wrapper3').hide();
    var data=$('.text_wrapper','.text_wrapper2','.text_wrapper3').html(); 
```

希望你明白我的意思，我想包含更多的价值但无法实现这一点，有没有人有一些建议或简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T22:32:57.830

将所有内容放在一个字符串中，例如：

```
$('.text_wrapper, .text_wrapper2, .text_wrapper3').hide(); 
```

但是您不能同时读取`html()`多个元素的值。

所以例如使用：

```
data = $('.text_wrapper').html();
data += $('.text_wrapper2').html();
data += $('.text_wrapper3').html(); 
```

但这取决于您最终希望如何获得数据。

# metadata - 如何确定当前用户是否为 SQL Server Analysis Server Admin

> ID：16005132
> 
> 赞同：4
> 
> 时间：2013-04-14T22:29:47.883
> 
> 标签：metadata, ssas, mdx, olap-cube

如果当前用户是 SSAS 管理员，我想将一些单元格限定为特定值。

我不确定我什至会从哪里开始确定这种内省。欢迎任何想法。

请注意，我使用的是 UDM 而不是表格模型

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-01-20T08:54:39.270

作为一种解决方法，您可以将 «;EffectiveUserName=» 附加到连接字符串。然后尝试连接并检查异常。此连接只能通过管理权限建立。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-10-17T07:34:11.900

请参阅[此处](http://msdn.microsoft.com/en-us/library/ms145517.aspx)了解如何在子句中使用该`SCOPE`函数。`IF`在子句中，该`USERNAME()`函数可用于返回当前用户（参见[此处](http://www.mdxpert.com/Functions/MDXFunction.aspx?f=135)）。希望这可以帮助。

# c# - 有没有办法在 C# 中检查来自 webbrowser 控件的所有 ajax 调用？

> ID：16005135
> 
> 赞同：1
> 
> 时间：2013-04-14T22:30:11.480
> 
> 标签：c#, xmlhttprequest

我正在制作一个简单的网络浏览器来导航到任何网站并观看 C# 中的 ajax 调用。（就像 firefox 和 chrome 允许你在他们的开发者工具中做的那样。）我希望能够在不使用 fiddler 的情况下做到这一点。

我对 C# 很陌生，我不知道如何去听这些 xhr。

任何帮助将不胜感激！

# javascript - 如何查看两个矩形是否在 JavaScript 或伪代码中相交？

> ID：16005136
> 
> 赞同：17
> 
> 时间：2013-04-14T22:30:16.553
> 
> 标签：javascript, geometry, rectangles

我有两个矩形，无论它们是否相交，我都必须在函数中返回它们。

它们由`[ x0, y0, x1, y1 ]`代表矩形左上角和右下角的对表示。或者，您的解决方案可能是`[ x0, y0, width, height ]`如果它更简单，我可以通过它调整我的函数的参数输入。

我试图查看矩形 A 的两个角中的任何一个是否包含在矩形 B 中，但是如果 A 大于 B 并且 B 部分包含在 A 中，它会说它不重叠。现在我可以尝试 A 和 B 但这似乎是一种糟糕的做事方式。

我不能预先制作一个大网格并用矩形占据单元格，因为不知道矩形是什么。我只能说它们是无符号整数，最小值为 0，最大值未知。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-04-15T10:05:35.227

检查矩形绝对不相交的情况。如果这些情况都不成立，则矩形必须相交。IE：

```
public boolean rectanglesIntersect( 
    float minAx, float minAy, float maxAx, float maxAy,
    float minBx, float minBy, float maxBx, float maxBy ) {
    boolean aLeftOfB = maxAx < minBx;
    boolean aRightOfB = minAx > maxBx;
    boolean aAboveB = minAy > maxBy;
    boolean aBelowB = maxAy < minBy;

    return !( aLeftOfB || aRightOfB || aAboveB || aBelowB );
} 
```

这说明了这个概念，但可以通过内联布尔值来稍微快一点，以便利用`||`

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2015-04-13T20:31:36.753

### 更新

一段时间后，我决定重做一个关于检测两个旋转矩形之间碰撞的完整答案：[如何检测旋转矩形何时相互碰撞](https://stackoverflow.com/questions/62028169/how-to-detect-when-rotated-rectangles-are-colliding-each-other)

* * *

## 原始答案

如果要检查 2 个旋转的矩形是否发生碰撞，则必须在另一个矩形的轴上投影一个矩形角。如果 rectA 的所有投影都命中了 rectB，并且 rectB 投影命中了 rectA，那么这两个矩形就会发生碰撞。

一些投影在这里没有碰撞，两个矩形没有碰撞。 ![在此处输入图像描述](https://i.stack.imgur.com/P6U08.png)

4 个投影碰到另一个矩形，这 2 个矩形发生碰撞。 ![在此处输入图像描述](https://i.stack.imgur.com/orsUO.png)

我已经在这个[JSFiddle](http://jsfiddle.net/365eX/5/)上做了一个演示，以便更多地理解。

您可以检查功能`is_collide`以获取更多示例

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-01-23T09:19:33.333

### 从另一个网站看这个问题。

**如果我们从另一面来看问题（算法），**情况就会变得非常简单。

这意味着我们不会回答问题：“矩形是否重叠？”，而是回答问题：“矩形是否**不**重叠？”。

最后，两个问题都解决了同一个问题，但**第二个问题的答案更容易实现**，因为**矩形不会重叠仅当一个在另一个下方或一个在另一个更左侧时**（对于一个就足够了）在这些情况下会发生，但当然可能会发生两者同时发生 - 这里对逻辑条件“或”的良好理解很重要）。这减少了许多需要在第一个问题上考虑的情况。

整个问题也**通过使用适当的变量名来简化**：

```
const areRectanglesOverlap = (rect1, rect2) => {
  let [left1, top1, right1, bottom1] = [rect1[0], rect1[1], rect1[2], rect1[3]],
      [left2, top2, right2, bottom2] = [rect2[0], rect2[1], rect2[2], rect2[3]];
  // The first rectangle is under the second or vice versa
  if (top1 < bottom2 || top2 < bottom1) {
    return false;
  }
  // The first rectangle is to the left of the second or vice versa
  if (right1 < left2 || right2 < left1) {
    return false;
  }
  // Rectangles overlap
  return true;
} 
```

即使**我们有一个不同的矩形表示，也很容易通过仅修改定义变量更改的部分来使上述函数适应它。**函数的后面部分保持不变（当然，这里不需要注释，但我添加了它们，以便大家可以快速理解这个简单的算法）。

**上述函数**的**等效**但可能不太可读的形式可能如下所示：

 **```
const areRectanglesOverlap = (rect1, rect2) => {

  let [left1, top1, right1, bottom1] = [...rect1],
      [left2, top2, right2, bottom2] = [...rect2];

  return !(top1 < bottom2 || top2 < bottom1 || right1 < left2 || right2 < left1);
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-14T22:44:04.573

用点 UL1 和 LR1 给出矩形 1，用点 UR2 和 LR2 给出矩形 2 -

检查 UL1 在 r2 中还是 LR1 在 r2 中（图中的案例 1 和案例 2）。最后检查 UR2 / LR2 中的一个是否在 r1 中（图中的情况 3）。

您可以通过检查 x 和 y 是否在矩形 x 和 y 范围的最小值和最大值之间来检查点是否在矩形中。

清除？

![在此处输入图像描述](https://i.stack.imgur.com/FDJk3.png)

蓝色是 R1，紫色是 R2

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-03-17T13:28:45.990

如果 x 和 y 区域都重叠，则两个矩形重叠。如果任何 x 坐标与其他矩形重叠，则将存在重叠。

沿 x 轴，第一个点在其他两个矩形内，第二个点在其他两个矩形内，或者两个点在其他点的相对两侧。

```
function checkRectOverlap(rect1, rect2) {
    /*
     * Each array in parameter is one rectangle
     * in each array, there is an array showing the co-ordinates of two opposite corners of the rectangle
     * Example:
     * [[x1, y1], [x2, y2]], [[x3, y3], [x4, y4]]
     */

    //Check whether there is an x overlap
    if ((rect1[0][0] < rect2[0][0] && rect2[0][0] < rect1[1][0]) //Event that x3 is inbetween x1 and x2
        || (rect1[0][0] < rect2[1][0] && rect2[1][0] < rect1[1][0]) //Event that x4 is inbetween x1 and x2
        || (rect2[0][0] < rect1[0][0] && rect1[1][0] < rect2[1][0])) {  //Event that x1 and x2 are inbetween x3 and x4
        //Check whether there is a y overlap using the same procedure
        if ((rect1[0][1] < rect2[0][1] && rect2[0][1] < rect1[1][1]) //Event that y3 is between y1 and y2
            || (rect1[0][1] < rect2[1][1] && rect2[1][1] < rect1[1][1]) //Event that y4 is between y1 and y2
            || (rect2[0][1] < rect1[0][1] && rect1[1][1] < rect2[1][1])) { //Event that y1 and y2 are between y3 and y4
            return true;
        }
    }
    return false;
} 
```**

# java - 如何将 Java POJO 转换为 JSON 字符串？

> ID：16005145
> 
> 赞同：4
> 
> 时间：2013-04-14T22:32:08.080
> 
> 标签：java, json, conventions

我有一个我设置值的 POJO，pojo 是：

```
public class CreateRequisitionRO extends AbstractPortfolioSpecificRO {

    private static final long serialVersionUID = 2418929142185068821L;

    private BigDecimal transSrlNo;
    private String transCode;
    private InflowOutflow inflowOutflow;

public BigDecimal getTransSrlNo() {
        return transSrlNo;
    }

    public void setTransSrlNo(BigDecimal transSrlNo) {
        this.transSrlNo = transSrlNo;
    }

    public InflowOutflow getInflowOutflow() {
        return inflowOutflow;
    }

    public void setInflowOutflow(InflowOutflow inflowOutflow) {
        this.inflowOutflow = inflowOutflow;
    }
    public String getTransCode() {
        return transCode;
    }
} 
```

这就是我设置值的方式：

```
CreateRequisitionRO[] request = new CreateRequisitionRO[1];
    request[0].setTransSrlNo(new BigDecimal(1));
    request[0].setTransCode("BUY");
    request[0].setInflowOutflow(InflowOutflow.I);

now i would like to convert/serialize the above java pojo to Json string. 
```

有人能帮我怎么做吗？

此致

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-15T07:28:18.203

[如另一个答案中所述， XStream](http://xstream.codehaus.org)或[GS​​ON](http://code.google.com/p/google-gson/)将对您进行排序。按照[XStream 上的 JSON 教程进行操作](http://xstream.codehaus.org/json-tutorial.html)，您的代码将如下所示：

```
 CreateRequisitionRO product = new CreateRequisitionRO();
        XStream xstream = new XStream(new JettisonMappedXmlDriver());
        xstream.setMode(XStream.NO_REFERENCES);
        xstream.alias("product", Product.class);

        System.out.println(xstream.toXML(product)); 
```

使用 GSON，您的代码将[如下所示](https://sites.google.com/site/gson/gson-user-guide#TOC-Serializing-and-Deserializing-Generic-Types)：

```
CreateRequisitionRO obj = new CreateRequisitionRO();
Gson gson = new Gson();
String json = gson.toJson(obj); 
```

选择你的图书馆，然后去。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T07:17:45.257

您可以使用 Gson 库为您提供帮助

# sql - 对 T-SQL 的访问转换

> ID：16005146
> 
> 赞同：0
> 
> 时间：2013-04-14T22:32:15.453
> 
> 标签：sql, sql-server-2008, ms-access, pivot, transform

我有这个要转换为 T-SQL 的 Access 查询：

```
TRANSFORM Sum(dbo.vw_SIMP_EN_F_Tx_AccRec_8.Outstanding) AS SumOfOutstanding
SELECT dbo.vw_SIMP_EN_F_Tx_AccRec_88.To_ICJ, q_F_TX_AccRec_8.From_Reference__c, 
       q_F_TX_AccRec_8.[From Account]
FROM dbo.vw_SIMP_EN_F_Tx_AccRec_8
GROUP BY dbo.vw_SIMP_EN_F_Tx_AccRec_8.To_ICJ, 
         dbo.vw_SIMP_EN_F_Tx_AccRec_8.From_Reference__c, 
         dbo.vw_SIMP_EN_F_Tx_AccRec_8.[From Account]
PIVOT dbo.vw_SIMP_EN_F_Tx_AccRec_8.Age 
  In ("Current","30 days","60 days","90 days"); 
```

到目前为止，我已经在 T-SQL 中做到了这一点：

```
SELECT [To_ICJ],
   [From_Reference__c],
   [From Account],
   [Current],
   [30 days],
   [60 days],
   [90 days]
FROM
(Select Sum(dbo.vw_SIMP_EN_F_Tx_AccRec_8.[Outstanding]) AS [SumOfOutstanding],
    dbo.vw_SIMP_EN_F_Tx_AccRec_8.Age AS [PIVOT_ITEM]
FROM dbo.vw_SIMP_EN_F_Tx_AccRec_8
GROUP BY [To_ICJ],
     [From_Reference__c],
     [From Account],
     Age) AS p PIVOT(
     Sum([SumOfOutstanding]) FOR [PIVOT_ITEM]
 In ([Current],[30 days],[60 days],[90 days])) as pvt 
```

但是我的 T-SQL 导致了这些错误：

> 消息 207，级别 16，状态 1，第 1 行
> 无效的列名称“To_ICJ”。
> 
> 消息 207，级别 16，状态 1，第 2 行
> 无效的列名称“From_Reference__c”。
> 
> 消息 207，级别 16，状态 1，第 3 行
> 无效的列名称“来自帐户”。

知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T22:45:25.920

您在子查询选择中缺少 3 列，试试这个

```
SELECT [To_ICJ],
   [From_Reference__c],
   [From Account],
   [Current],
   [30 days],
   [60 days],
   [90 days]
FROM
(Select 
     A.[To_ICJ],
     A.[From_Reference__c],
     A.[From Account],
    Sum(A.[Outstanding]) AS [SumOfOutstanding],
    A.Age AS [PIVOT_ITEM]
FROM dbo.vw_SIMP_EN_F_Tx_AccRec_8 A
GROUP BY A.[To_ICJ],
     A.[From_Reference__c],
     A.[From Account],
     A.Age
) AS p PIVOT(
     Sum([SumOfOutstanding]) FOR [PIVOT_ITEM]
 In ([Current],[30 days],[60 days],[90 days])) as pvt 
```

# azure - 在 Windows Phone 8 和 Windows 8 应用商店应用程序之间共享数据

> ID：16005149
> 
> 赞同：2
> 
> 时间：2013-04-14T22:32:36.710
> 
> 标签：azure, windows-8, windows-phone-8

我即将开始一个相当简单的应用程序，但我想确保我正确地构建了应用程序的后端，因为我计划在未来对其进行大量扩展。这是我的问题：

我正在创建 Windows Phone 8 和 Windows 8 Store 应用程序。在这种情况下，它是一个单位转换应用程序，用户可以在其中定义自定义单位转换单位。我想让用户基本上在两个平台之间同步这些自定义单元，这样他们就不需要多次定义它们。

我应该采取什么后端方法？

XML 存储与 SkyDrive、Azure、一个通过 USB 同步的本地数据库相结合......有很多选择，我不确定在我上面描述的场景中首选哪种方式。任何帮助或建议将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T22:44:07.037

至于实际的数据共享，我建议使用 Azure，它对用户来说更可靠、更透明（与通过 USB 同步的本地数据库相反）并且比 SkyDrive 中的 XML 文件更干净（用户不需要无论如何，请参阅这些文件）。

至于代码共享，您可以使用两种技术：

*   便携式类库
*   链接文件

我最近写了两篇关于这个的文章：

[http://www.kenneth-truyers.net/2013/03/27/portable-class-libraries-or-source-code-sharing/](http://www.kenneth-truyers.net/2013/03/27/portable-class-libraries-or-source-code-sharing/)

[http://www.kenneth-truyers.net/2013/02/24/patterns-for-sharing-code-in-windows-phone-and-windows-8-applications/](http://www.kenneth-truyers.net/2013/02/24/patterns-for-sharing-code-in-windows-phone-and-windows-8-applications/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T22:46:23.403

如果您正在争取更低的价格范围，它实际上不一定是 Azure。您还可以选择虚拟主机并使用构建 WebAPI 服务，这将帮助您同步数据并将它们放在所有设备上。当然，Azure 是首选解决方案，因为它提供了更多功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T03:16:05.040

我为一个应用程序使用了 Windows 8[漫游数据](http://msdn.microsoft.com/en-us/library/windows/apps/hh464917.aspx)支持。就我而言，数据只是应用程序中用户操作的历史记录，数据大小小于 1k。根据文档，Windows 8 漫游数据支持最多可支持 100k 的数据，对于投资非常低的 w8 应用程序来说是一个良好的开端。它涵盖了所有 w8 设备。对于用户来说，这对于简单的键/值对类型的数据肯定是有好处的。

现在需要注意的是 - 目前，它不支持[windows phone](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/1a661018-6506-40c5-8fdb-5ed4b95a3d36)漫游。这是电话 8 的一项[功能要求](http://wpdev.uservoice.com/forums/110705-dev-platform/suggestions/3681562-roaming-application-data)- 可以投票。最后，这不会漫游到 android 和其他移动设备。

另一种思考方式——你什么时候需要构建它？

如果只是每个用户的数据存储 - 后端不需要在第一个版本中到位。您可以从 w8 漫游数据支持开始，在未来的 x 版本中，它可以从 windows 8 漫游数据移动到 skydrive 或您的 web api 或 azure。我的意思是，它不需要被冒犯。

如果后端将允许用户之间共享数据或体验来自多个用户的聚合数据 - 那么，这都是不同的问题。在这种情况下，漫游数据不是解决方案。后端 Web api 或服务是必须的。

HTH。

其他参考资料： Windows 8 漫游数据[指南](http://msdn.microsoft.com/en-us/library/windows/apps/hh465094.aspx)。

# java - 使用 self 作为参数创建实例

> ID：16005151
> 
> 赞同：0
> 
> 时间：2013-04-14T22:32:51.440
> 
> 标签：java, constructor, doubly-linked-list

用一个指向自身的节点创建一个双向链表

```
public DList(){
 Dnode sentinel= new DNode(sentinel, null, sentinel);
} 
```

作为参考，Dnode 构造函数采用 DNode(Dnode p, Object 0, Dnode n)

这是有效的代码吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T22:36:27.727

不，这是无效的。

您不能`sentinel`在定义它的表达式中使用变量。

然而，你可以有一个构造函数，它使前一个和下一个元素成为它自己（`this`）：

```
class DList {
    DList previous, next;

    public DList() {
        previous  = this;
        next = this;
    }
} 
```

# php - 通过Http请求获取Json

> ID：16005157
> 
> 赞同：0
> 
> 时间：2013-04-14T22:33:51.010
> 
> 标签：php, json, http

我正在用 PHP 构建一个 API，当用户使用 api 进行 POST 或 PUT 时，他们将以 JSON 格式传递一些数据。当请求到达预期的脚本时，我使用什么 php 函数来访问发送的数据？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T22:37:24.883

有 json_decode 函数将字符串输入转换为 json 数组或对象...[在这里](http://php.net/manual/tr/function.json-decode.php)您可以阅读文档。

# excel - 控制面板协助 - 已创建

> ID：16005159
> 
> 赞同：-1
> 
> 时间：2013-04-14T22:34:03.253
> 
> 标签：excel, vba

我正在尝试在 excel 中创建一个“控制面板”。

我试图做对的项目的第一部分是能够根据单元格值将一系列信息复制到其他工作表。

例如：

进入日期 月份 到期日期 到期 S/O 或 SOM 螺栓 宽带移动采集 移动保留 打开，已发布

这是用户输入要记录的信息的地方。基于以与我的标签相同的格式编写的到期月份，即 2013 年 5 月、2013 年 6 月等，我试图将其复制到下一个可用行的相应工作表中。

每一页上的行从 C13 (C13: J13) 开始。大约有 25 个选项卡。

这可能吗？我找到了可以用来复制到另一张纸的代码，即。对于 2 张工作簿。但这并不是我所追求的。

此任务的第二部分是此选项下的一个选项，我也未能完成工作。这部分是更新他们之前输入的信息。只有 1 个部分需要更新，即 Open/Closed/Posted 部分。我有空格可以输入月份、S/O 或 SOM 编号（如参考）和更新状态。本质上，此功能将搜索参考号并将新状态粘贴到 J13 中，例如 J144，具体取决于它的位置。

我不确定我应该改变什么来使宏工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T01:54:35.253

从根本上说，这是您需要做的。为源和目标数据声明`Worksheet`和`Range`变量。然后，将目标单元格的值 = 设置为源单元格的值。

```
Sub Test()
Dim ws1 as Worksheet  'Source worksheet
Dim ws2 as Worksheet  'Destination worksheet
Dim rng1 as Range      'source data range
Dim cl as Range  'cell variable
Dim rng2 as Range      'destination data range
Dim r as Long 'row counter

Set ws1 = Sheets("Sheet1") '<-- Modify as needed'

Set rng1 = ws1.Range("C13:J13")

    'assuming your dates & worksheets are consistently named, and the date is in column D:
    Set ws2 = Sheets(Cstr(rng1.Cells(2).Value)) '

    'Get the last line in column C on destination sheet
    r = 1+ ws2.Range("C1048576").End(xlUp).Row 

    'Set the destination range, assuming column C:
    Set rng2 = ws2.Range("C" & r & ":J" & r & ")

    'Now, set the values in the second range equal to the first range
    rng2.Value = rng.Value

End Sub 
```

# ruby-on-rails - EmberJS 抛出所需的 jQuery 版本缺失错误

> ID：16005161
> 
> 赞同：1
> 
> 时间：2013-04-14T22:34:15.437
> 
> 标签：ruby-on-rails, ember.js

我有一个安装了 ember-rails gem 的 rails 应用程序，它抛出以下错误：

```
Error: assertion failed: Ember Views require jQuery 1.8, 1.9 or 2.0
(in /Users/toverly/Code/tgsoverly/green-zebra/app/assets/javascripts/templates/application.handlebars) 
```

我最近使用 ember-rails gem 中包含的命令升级了 ember，该命令会提取并编译最新的 emberjs 并将其放置在 rails 应用程序的 /vender/assets 中。我这样做是因为我想合并路线，并想确保我拥有最新版本。

我已经推送了我在 github 上的项目的分支。

[项目代码链接](https://github.com/stripedcavern/green-zebra/tree/routes)

我做了什么：

1.  手动包含指向 CDN 的 jQuery 链接。
2.  删除了加载我的应用程序以检查页面上正在加载的 jquery 的“application.js”文件中的链接。它位于任何 ember.js 文件之上。
3.  试过 1.8.3 和 1.9.1 的 jquery

我在 Rails 资产管道中缺少什么？有没有更好的方法来理解 ember 加载视图的方式？它与以前版本的 ember 一起工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T01:32:01.517

首先，为了让 Ember 与 gem 保持同步，您需要配置 Gemfile 以使用最新的 Ember-Rails。默认情况下，它将加载 Ember 和 Ember-Data 的最新官方版本。

其次，您的应用程序需要进行一些更改才能与两者的最新版本兼容。我提交了一个包含必要修改和一些解释的拉取请求。希望它应该把事情弄清楚。

# java - 使用 javascript 访问 java 变量（通过 java 方法）时出错

> ID：16005163
> 
> 赞同：0
> 
> 时间：2013-04-14T22:34:27.653
> 
> 标签：java, javascript, liveconnect

由于某种原因，我无法使用 JavaScript 读取变量。

我正在使用一个小程序，我在 Chrome 控制台中遇到的错误是：

> 未捕获的错误：java.security.AccessControlException：访问被拒绝（“java.lang.RuntimePermission”“getenv.processor_identifer”）
> 
> 未捕获的错误：在 NPObject 上调用方法时出错。

访问代码：

```
<html>
  <head>
      <title>Javascript call Applet example</title>
  </head>
  <body>
      <script type="text/javascript">
        function callSerial() {
            var foo = systemInfo.getSerial();
            console.log(foo);
        }
      </script>
      <center>
          <form>
              <input type="button" value="Call Applet" onclick="callSerial();"/>
          </form>
          <br/><br/>

          <applet id="systemInfo" code="systeminfo.class" width="300" height="50"></applet>

      </center>
  </body>
</html> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T23:25:14.407

一些建议：

1）在您的小程序代码中，提及**代码=**完全限定的类名。**即：package.class**

2）如果您的 java 类试图从本地客户端文件系统访问某些文件，那么您将必须像这样签署您的小程序 >> [http://www.developer.com/java/data/article.php/3303561 /Creating-a-Trusted-Applet-with-Local-File-System-Access-Rights.htm](http://www.developer.com/java/data/article.php/3303561/Creating-a-Trusted-Applet-with-Local-File-System-Access-Rights.htm)

问候，

# grammar - 我的解决方案对于这种上下文无关语法是否正确？

> ID：16005167
> 
> 赞同：2
> 
> 时间：2013-04-14T22:35:21.157
> 
> 标签：grammar, context-free-grammar

我正在尝试解决这个问题（我想我可能已经解决了）：[http ://d.pr/i/L5Qm](http://d.pr/i/L5Qm)

> L = {a ^(3n) b ^(2n) | n >= 0}

基本上问题是说不`l`等于`m`或`m`不等于`n`

**我生成的规则：**

```
S -> aaaSbb | A
A -> a | ^ 
```

**几个测试：**

```
Test one: S --> aaaSbb -> aaaAbb -> aaabb
Test two: S --> A -> a
Test three: S --> A -> ^ 
```

我敢肯定还有很多我可以测试的，但我不太确定如何测试大多数问题，因为我对这些问题还很陌生。我很感激任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T16:45:48.867

你的测试二：

```
Test two: S --> A -> a 
```

清楚地表明你的语法是错误的！

用您的语言：

> L = {a ^(3n) b ^(2n) | n >= 0}

**`a`**每两个总是有三个**`b`**，并且`a`不是语言 L。

适合您的语言的正确作品是：

```
S ---> aaaSbb | ^ 
```

`^`空符号在哪里。通知`^`也是语言，因为`n`可以`0`。

**编辑**：

你的语法：

```
S -> aaaSbb | A
A -> a | ^ 
```

产生两种语言的联合，即：

> {a ^(3n) b ^(2n) | n >= 0} U {a ^(3n+1) b ^(2n) | n >= 0}

额外的部分 a ^(3n+1) b ^(2n)是由于`A--> a`生产。

# java - zeromq socket recv 返回 null（java warper）

> ID：16005168
> 
> 赞同：0
> 
> 时间：2013-04-14T22:35:26.597
> 
> 标签：java, multithreading, zeromq

我有使用 java zeromq 框架进行通信的网络客户端/服务器应用程序。我有主服务器和轮询服务器的 N 个客户端。当服务器上线时。客户连接他，他们之间进行了一些短暂的按摩，直到现在我完成了单个客户并且效果很好。但是当添加另一个客户端（即 2）时，我将请求 null 作为返回的按摩：request = socket.recv (0); 基于这个例子：http: //zguide.zeromq.org/java: [mtserver](http://zguide.zeromq.org/java%3amtserver)

我的代码（其中一部分很长）所有上下文和 ZeroMq 设置都已设置且不为空，并且我总是遇到此异常：

```
Exception in thread "Thread-1" org.zeromq.ZMQException: Operation cannot be accomplished in current state(0x9523dfb)
        at org.zeromq.ZMQ$Socket.recv(Native Method)
        at com.controller.core.Daemon$1.run(Daemon.java:127)

for(int thread_nbr = 0; thread_nbr < m_iThreadPoolCount; thread_nbr++) {
                Thread worker_routine = new Thread() {

                   @Override
                   public void run() {
                     //synchronized(OBJ_LOCK) {
                      ZMQ.Socket socket = m_pNetworkManager.getContext().socket(ZMQ.REP);//context.socket(ZMQ.REP);                    
                      socket.connect ("inproc://workers");

                      while (true) {

                        /** Wait for next request from client (C string) */
                        byte[] request = null;
                        try{  
                            if(m_pNetworkManager.getContext()!=null) // its never null
                            {
                                request = socket.recv (0);

                            }

                        }catch (Exception e)
                        {

                    // it allays gets null exception            
                        }

                        boolean bFoundInList = false;

                        if(request!=null)
                        {

                                        // multi frame sending 
                                        socket.send(m_UT.getbyteArray(
                                                    m_UT.getReplayStructure(aStateMap_replay)
                                        ),ZMQ.SNDMORE);                                      
                                        socket.send(new byte[0], ZMQ.SNDMORE);
                                        byte[] byteFileStruct =  null;                                      
                                        byteFileStruct =  m_UT.serialize(stateFilesStruct);
                                        boolean send = socket.send(byteFileStruct,0);

                      } // socket.recv end

                     }
                  // }// synchronized block 
                }
                }; //Thread worker_routine

                worker_routine.start();
             }
             //  Connect work threads to client threads via a queue
             ZMQQueue zMQQueue = new ZMQQueue( m_pNetworkManager.getContext(),
                                               m_pNetworkManager.getClients(),
                                               m_pNetworkManager.getWorkers());
             zMQQueue.run();

             //  We never get here but clean up anyhow
             m_pNetworkManager.getClients().close();
             m_pNetworkManager.getWorkers().close();
             m_pNetworkManager.getContext().term();
    } 
```

还添加了 NetworkManager 类

```
public class NetworkManager {

    /** ZeroMQ context  */ 
    private ZMQ.Context m_context = null;
    /** ZeroMQ socket */
    private ZMQ.Socket m_socket = null;
    /** representation of the clients */
    ZMQ.Socket m_clients = null;
    /** representation of the workers threads */
    ZMQ.Socket m_workers = null;
    /**
    * NetworkManager constructor.
    */   
    public NetworkManager()
    {
        ;
    }

    /**
     * Setup the network ZeroMQ network layer 
     * @param sControllerDomain the Controller domain name and port 
     */
    public void Init(String sControllerDomain)
    {
         /**  Prepare our context and socket */
         m_context = ZMQ.context(1);

         m_clients = m_context.socket(ZMQ.ROUTER);
        // m_clients = m_context.socket(ZMQ.REP);
         m_clients.bind (sControllerDomain);

         m_workers = m_context.socket(ZMQ.DEALER);
         m_workers.bind ("inproc://workers");
    }

    /**
     * Get ZeroMQ context 
     * @return ZMQ.Context
     */
    public ZMQ.Context getContext() {
        return m_context;
    }

    /**
     * get ZeroMQ Socket
     * @return ZMQ.Socket
     */
    public ZMQ.Socket getSocket() {
        return m_socket;
    }
    /**
     * get the workers as ZMQ.Socket
     * @return ZMQ.Socket
     */
    public ZMQ.Socket getWorkers() {
        return m_workers;
    }
    /**
     * get the Clients as ZMQ.Socket
     * @return ZMQ.Socket
     */
    public ZMQ.Socket getClients() {
        return m_clients;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-17T19:09:50.557

你的操作系统是什么？如果您使用的是 Windows，`m_workers.bind ("inproc://workers")`则不支持使用：的操作。IIRC。

# http - Apache 域名而不是 IP

> ID：16005176
> 
> 赞同：0
> 
> 时间：2013-04-14T22:35:49.283
> 
> 标签：http, dns, apache2, config, forward

我不确定这甚至是在这里要问的问题，但无论如何我都会试一试。

所以我有一个ubuntu服务器，我最近购买了一个域名。

现在我已经将域转发到我的 IP，但是每当我到达服务器时，浏览器都会显示 IP 地址而不是域。

这是我应该在 Apache 中配置的，还是从 godday（我得到域名的地方）

提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T10:29:31.387

从在 Godaddy 检查您的设置开始。您可能需要的是一个 A 条目。

好消息是您的设置似乎可以正常工作，因为您从服务器获得了答案！

也许这可以帮助 [http://support.godaddy.com/help/article/680/managing-dns-for-your-domain-names](http://support.godaddy.com/help/article/680/managing-dns-for-your-domain-names)

# html - “data-gid”属性和 W3C XHTML 1.0 严格验证

> ID：16005177
> 
> 赞同：0
> 
> 时间：2013-04-14T22:35:52.260
> 
> 标签：html, w3c

我正在尝试使用[http://validator.w3.org/上的标记验证服务验证我的页面](http://validator.w3.org/)

针对**XHTML 1.0 Strict** doctype 的验证返回以下错误：

```
... there is no attribute "data-gid"

    …   <a href="#" class="addToCartLink" data-gid="202">Add to Inquiry List</a> 
```

**在保持相同的文档类型 - XHTML 1.0 Strict**的同时，有什么方法可以解决此错误？

如果不是，应该使用什么文档类型？更改文档类型有什么影响？

非常感谢， LG

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T22:42:32.123

> 在保持相同的文档类型（XHTML 1.0 Strict）的同时，有没有办法解决这个错误？

不。

> 如果不是，应该使用什么文档类型？

HTML 5 文档类型：`<!DOCTYPE html>`

> 更改文档类型有什么影响？

您可以根据更能代表浏览器实际功能的东西进行验证，但使用的工具仍处于试验阶段（尽管不是很可怕），规范仍可能发生变化（尽管它现在相当稳定）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T22:43:03.500

`data-`属性是 HTML 5 的一个特性，它们在早期版本中不可用。

您的工作方式是不好的做法，因为当 JavaScript 不运行时它会完全中断。如果你`href="#"`在任何地方写作，很可能你做错了什么。

如果您要采取行动，请使用其中带有按钮的表单。您可以在其中包含带有隐藏表单字段的任意数据。如果您愿意，可以重新设置按钮的样式。

例如：

```
<form action="..." method="post">
    <div>
        <input type="hidden" name="gid" value="202" />
        <button type="submit">Add to Inquiry List</button>
    </div>
</form> 
```

# vba - 无法在 vba 中保留单元格格式

> ID：16005180
> 
> 赞同：0
> 
> 时间：2013-04-14T22:36:07.857
> 
> 标签：vba, excel

我尝试在我的 vba 脚本中保持相同的单元格格式，但我不能。

我的变量 prixB 始终是一个“数字”，而我的变量 prixA 是标准类型。我需要像在基本文件中一样将它们存入货币中。

我的剧本来了！

谢谢您的帮助

```
Sub Intersection()

Dim nombre As Integer
Dim tableauDate(1 To 115) As Date
Dim tableauValeur(1 To 115) As String
Dim valeur As Variant
Dim incrementeurForeach As Integer
Dim dateA As Date
Dim dateB As Date
Dim prixA As Currency
Dim prixB As Currency

nombre = 115
incrementeurForeach = 1

For incrementeur = 2 To nombre

dateA = Range("A" & incrementeur).Value
dateB = Range("c" & incrementeur).Value
prixA = Range("B" & incrementeur).Value
prixB = Range("D" & incrementeur).Value

Select Case dateA
    Case Is = dateB
        tableauDate(incrementeur) = dateA

    Case Is > dateB
        tableauDate(incrementeur) = dateA

    Case Else:
        tableauDate(incrementeur) = dateB

End Select

If prixA >= prixB Then
    tableauValeur(incrementeur) = prixA
Else
    tableauValeur(incrementeur) = prixB
End If

Next incrementeur

Sheets.Add After:=ActiveSheet

For Each valeur In tableauDate

Range("A1").Offset(incrementeurForeach, 0).Value = tableauDate(incrementeurForeach)
Range("B1").Offset(incrementeurForeach, 0).Value = tableauValeur(incrementeurForeach)

incrementeurForeach = incrementeurForeach + 1

Next valeur

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-11-12T22:52:23.510

我看到这已经很老了，但是我相信我有您的解决方案。使用 .Text 与 .Value 返回单元格的实际文本，而不是其内容。我遇到了这个问题，因为我希望我的 vba 代码包含“$”符号，以及在为抵押公司发送总计时的正确格式。希望这会帮助那里的人哈哈:)

`dateA = Range("A" & incrementeur).text dateB = Range("c" & incrementeur).text prixA = Range("B" & incrementeur).text prixB = Range("D" & incrementeur).text`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T23:09:26.287

要应用数字格式（这就是 Excel 中的全部内容），您可以：

`Range("A1").NumberFormat = "$#"`或`Range("A1").NumberFormat = "$#.##"`等

您可以根据您的特定货币、小数精度等需要修改数字格式。

# java - Lucene 4.0 获取字段信息

> ID：16005181
> 
> 赞同：0
> 
> 时间：2013-04-14T22:36:09.817
> 
> 标签：java, lucene

我非常想在 lucene4.0 (java) 上执行此操作：[如何在 QueryParser 中合并多个字段？](https://stackoverflow.com/questions/468405/how-to-incorporate-multiple-fields-in-queryparser/2036898#2036898)

虽然我想搜索所有字段（并非所有文档都存在），但我不知道他们的名字。所以在这里我发现：

`QueryParser queryParser = new MultiFieldQueryParser(Version.LUCENE_29, ir.GetFieldNames(IndexReader.FieldOption.ALL).toArray(), analyzer)`

虽然`getfieldNames()`在 4.0 中已被“ [LUCENE-3679 Replace IndexReader.getFieldNames with IndexReader.getFieldInfos](https://issues.apache.org/jira/browse/LUCENE-3679) ”替换。

但是，问题在于`getFieldNames`或任何 getField* 是在[IndexReader](http://lucene.apache.org/core/4_0_0/core/index.html)中定义的。

我一直在网上寻找解决方案。我错过了什么，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T12:12:44.470

FieldInfos 仅在[AtomicReader](http://lucene.apache.org/core/4_2_0/core/org/apache/lucene/index/AtomicReader.html#getFieldInfos%28%29)上可用。[您可以通过调用MultiFields.getMergedFieldInfos](http://lucene.apache.org/core/4_2_0/core/org/apache/lucene/index/MultiFields.html#getMergedFieldInfos%28org.apache.lucene.index.IndexReader%29)在复合阅读器上获取 FieldInfos 视图。

# objective-c - 从 txt 文件到 NSArray 的数据

> ID：16005183
> 
> 赞同：0
> 
> 时间：2013-04-14T22:36:26.503
> 
> 标签：objective-c, xcode, parsing, text, nsarray

我想做的是以下几点：

我正在使用 XCode 4.6.1，构建一个 iOS 应用程序

我有一个包含我的数据的文本文件 (.txt)。它是从服务器获取的。它包含的数据是这样的：

> 用户名：用户 ID：实名：客户端类型：客户端版本：纬度：经度：号码：另一个号码：

所以数据用“：”分隔，所有数据都是用户定义的。

因为有两种类型的客户端：clienttype1 和 clienttype2 我已经将 .txt 文件划分为一个数组，使用

```
NSArray *dataClient = [datafile componentsSeparatedByCharactersInSet:[NSCharacterSet newlineCharacterSet]]; //to load txt file line for line in NSArray

NSIndexSet *clientindex = [data1 indexesOfObjectsPassingTest:^BOOL(id obj, NSUInteger idx, BOOL *stop) {
    NSRange range = [(NSString *)obj rangeOfString:@":clienttype1:"];
    if (range.location != NSNotFound)
    {
        return YES;
    }
    return NO; // Set the index

NSArray *firstClients = [dataClient objectsAtIndexes:clientindex]; // create array with clienttype1 only 
```

现在我有一个只有 clienttype1 数据对象的数组。像这样：

> 用户名：用户 ID：实名：客户端类型 1：客户端版本：纬度：经度：号码：另一个号码： 用户名：用户 ID：实名：客户端类型 1：客户端版本：纬度：经度：号码：另一个号码：

如何分隔每个用户的数据（所以每行，因为每行都是不同的用户）。这样我就可以使用用户名、用户 ID 等。作为 lat 的示例绘图位置。和朗。在以用户名作为标题的地图上。我知道如何绘图，进行注释等。这只是如何获取这些数据。

我正在考虑一种方法来逐行读取 firstClients 数组，以将每种类型的数据添加到不同的数组中。方式为：userNameArray、useridArray 等。通过这种方式，我可以获取每个 Array 的数据。但是如何做到这一点。

欢迎任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T21:37:06.997

好的，找到了我的解决方案。如果有更好的弹出请指教。

用了这个：

```
for (int i = 0; i < [firstClients count]; i++) {
    NSString *oneLine = [atcClients objectAtIndex:i];

    NSArray *oneLineSeparated = [oneLine componentsSeparatedByString:@":"]; 
} 
```

现在我得到了一个数组：用户名、用户名、实名等。

# git - 将本地 svn repo 转储转换为 git

> ID：16005193
> 
> 赞同：27
> 
> 时间：2013-04-14T22:37:39.100
> 
> 标签：git, svn, version-control, svn2git

我搜索了相关问题，但找不到与我的具体情况相匹配的任何内容：我有一些来自多年前被删除的 SVN 服务器的旧存储库档案。它们是服务器上原始存储库结构的 tarball。我想要做的是将它们转换为 git 存储库，作为未来工作/恢复项目的基础。我已经阅读了几个关于转换过程的教程，我想我可以弄清楚作者转换、分支映射等，但他们都假设你有一个 SVN 服务器和一个存储库的 url。我是否需要安装和设置 SVN 服务器才能进行此转换，或者有什么方法可以指向我拥有的 repo 转储中的任何一个`git clone`或（或其他工具）？`svn2git`

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-04-15T15:30:14.713

在本地安装 subversion 以导入您的转储，然后使用 git-svn 包。

您可以使用`git svn clone file:///path/to/svn/repo /path/to/empty/dir`

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-04-16T08:14:48.923

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-14T22:56:13.053

1.  所有 (?) svn -> git 转换器都需要实时的 Subversion 存储库，
2.  存储库的树副本不是转储，而是通常的文件级备份。

你有：

1.  安装和配置任何 Subversion 服务器（如果您的转换器无法处理`file:///`SVN 协议，否则不需要 - 只需解压缩 tarball 并使用 svn 客户端检查 repo）
2.  阅读关于 git-svn
3.  使用 git-svn

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-11-19T08:12:53.193

该[`reposurgeon`](http://www.catb.org/%7Eesr/reposurgeon/)工具支持将 SVN 转储文件直接（并且非常快速）转换为 Git 存储库。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-03-08T07:54:35.620

1.  在您的服务器中获取转储文件：

    ```
    svnadmin dump "repopath or url" > import.bkp

    git svn clone "back" 
    ```

2.  转到克隆路径，然后打开 git bash 并运行以下命令：

    ```
    git svn show-ignore > .gitignore

    git add .gitignore

    git commit -m "with message"

    git check in "git url" 
    ```

# javascript - 仅在同一窗口中打开 .html 页面一次。文件在本地运行

> ID：16005194
> 
> 赞同：0
> 
> 时间：2013-04-14T22:38:13.087
> 
> 标签：javascript, html

我有一个将使用 IE 在本地运行的 html 文件。我希望它更像一个应用程序，它不会发布到网站上，我只是使用 IE 来查看它。下面的代码将提供进行简单计算的基本函数。我无法成功使用 window.onload 事件创建一个新窗口，该窗口在不循环的情况下删除滚动条、标题栏、菜单等。我不确定 If 语句或 while 语句是否最适合测试页面是否已经打开以停止循环，并且我很难理解如何测试 window.onload 是否已经具有窗户打开。我想我正在寻找一些关于设置它的指导或初学者容易理解的参考。谢谢你。

我目前有两个 html 文件。第一个，它在生活中的唯一目的是触发第二个加载，因为我希望它显示。

```
function openWindow() 
        {           
            window.open("CouchShifts.html", "", "status=no,toolbar=no,menubar=no,navigationbar=no,location=no,resizable=no,scrollbars=n, width=440,height=200'");
        }
        window.onload = openWindow()
        window.close("test.html") 
```

我曾试图将这个想法合并到原始的 html 文件中，但没有成功。关于如何更好地处理这个问题的任何开始，以便当从桌面双击独立的 html 文件时，它只按上面指定的方式打开一次而不循环？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T22:54:45.487

在同一窗口 onLoad 中检查窗口是否打开是不明智的。您应该在实际打开窗口的情况下检查它。

这里有一些解决方案。

[检查窗口是否已经打开 window.open](https://stackoverflow.com/questions/12138236/check-if-window-is-already-open-window-open)

[https://stackoverflow.com/a/10467344/672455](https://stackoverflow.com/a/10467344/672455)

# c - 浏览器未从服务器接收

> ID：16005195
> 
> 赞同：0
> 
> 时间：2013-04-14T22:38:13.957
> 
> 标签：c, http, network-protocols

我正在编写一个简单的网络服务器，现在我只是想设置一个通用响应以查看它是否正常工作。目前，它只在 Firefox 上运行，而不是在 Chrome 或 Opera 上运行。以下是我收到的一些请求，最后是通用回复。回复中是否缺少一行？真的有一个通用的响应来让服务器启动并运行吗？

我看到请求有“连接：保持活动”，所以我尝试让连接打开几秒钟，但这似乎没有帮助。我尝试将数据与响应标头分开发送，但这也无济于事。

```
GET / HTTP/1.1
Host: 192.168.1.128
Connection: keep-alive
Cache-Control: max-age=0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.31 (KHTML, like Gecko)  Chrome/26.0.1410.43 Safari/537.31
Accept-Encoding: gzip,deflate,sdch
Accept-Language: en-US,en;q=0.8
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3

GET / HTTP/1.1
User-Agent: Opera/9.80 (X11; Linux x86_64) Presto/2.12.388 Version/12.15
Host: 192.168.1.128
Accept: text/html, application/xml;q=0.9, application/xhtml+xml, image/png, image/webp, image/jpeg, image/gif, image/x-xbitmap, */*;q=0.1
Accept-Language: en-US,en;q=0.9
Accept-Encoding: gzip, deflate
Connection: Keep-Alive

GET / HTTP/1.1
Host: 192.168.1.128
User-Agent: Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:11.0) Gecko/20100101 Firefox/11.0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: en-us,en;q=0.5
Accept-Encoding: gzip, deflate
Connection: keep-alive 
```

此处回复：

```
HTTP/1.0 200 OK
Date: Sun Apr 14 15:13:36 2013
Server: server_th
Content-Type: text/html
Content-Length: 40
Connection: close

<html><body><h3>Hey!</h3></body></html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T22:44:35.897

您的回复没有正文，因此您将看到一个空白页。此外，它似乎缺少尾随 CRLF，但我不确定是否是由于复制粘贴。

检查[HTTP 规范](http://www.w3.org/Protocols/rfc2616/rfc2616-sec6.html)。

编辑：在更新的响应中，正文长度实际上是 39，尽管它被声明为 40。可能是客户端正在等待剩余的有效负载吗？

# ember.js - 如何使用字符串作为 Ember Data 的主键？

> ID：16005198
> 
> 赞同：3
> 
> 时间：2013-04-14T22:38:28.933
> 
> 标签：ember.js, ember-data

我有以下代码：

```
Pult.Zone = DS.Model.extend({
  name: DS.attr('string'),
  authoritative: DS.attr('boolean'),
  user_id: DS.attr('number'),
  rulesets: DS.hasMany('Pult.Ruleset')
});

Pult.RESTAdapter.map('Pult.Zone', {
  primaryKey: 'name',
  rulesets: { key: 'rulesetIds' }
}); 
```

但是，似乎没有正确选择主键。我已经呈现了所有区域的列表。

这是一个测试用例：

```
zones = Pult.store.findAll(Pult.Zone);
zones.get('length'); // Returns 10
zones = Pult.store.findAll(Pult.Zone);
zones.get('length'); // Returns 20 
```

因此，每次我从服务器加载区域时，它都会将它们添加到本地列表中，因为它不会将它们识别为已经存在。有什么办法可以解决这个问题，还是我必须尝试模拟一些代理键？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-09-07T22:11:34.837

升级到[Ember Data 1.0.0 Beta 2](http://emberjs.com/blog/2013/09/04/ember-data-1-0-beta-2-released.html)后，我找到了一个可行的解决方案：

```
App.Zone = DS.Model.extend({
  name: DS.attr('string'),
  user_id: DS.attr('number'),
});

App.ZoneSerializer = DS.RESTSerializer.extend({
  normalize: function(type, hash, property) {
    // Ember Data use the zone name as the ID.
    hash.id = hash.name;

    // Delegate to any type-specific normalizations.
    return this._super(type, hash, property);
  }
}); 
```

# java - 如何修复此代码中的 ConcurrentModificationException？

> ID：16005199
> 
> 赞同：-2
> 
> 时间：2013-04-14T22:38:51.460
> 
> 标签：java, for-loop

我正在尝试解决这个问题，但无论如何我都没有解决。有人可以帮助我吗？

```
for(Iterator<Block> iterator = event.blockList().iterator(); iterator.hasNext();)
{
    Block b = iterator.next();

    if (((RegiaoCuboid) r).contains(b))
        event.blockList().remove(b);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T22:40:01.817

使用迭代器删除：

```
iterator.remove(); 
```

`ConcurrentModificationException`当集合以使打开的迭代器无效的方式发生更改时，将引发A。在这种情况下，您`remove`直接调用集合。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-14T22:42:55.080

您不能在迭代列表时修改它。我建议将您希望删除的块添加到新列表中，然后对其进行迭代并将它们从主要列表中删除（编辑：或者，按照其他人所说的去做）。此外，如果您正在做我认为的事情，我建议您在 Bukkit 论坛上提出更多问题。这个问题更笼统，但熟悉该领域的人会更容易回答 Bukkit 特定的问题。

# jquery - 在jquery ajax请求中获取xml元素属性值

> ID：16005202
> 
> 赞同：0
> 
> 时间：2013-04-14T22:39:23.160
> 
> 标签：jquery, xml

我有一个具有以下格式的 xml 文件

```
<Products>
<Product id="1">
  <ProductName>RegEB-Tote</ProductName>
  <ImageFileName>ToteTank_350g.png</ImageFileName>
</Product>
<Product id="2">
  <ProductName>RegEB-Drum</ProductName>
  <ImageFileName>N/A</ImageFileName>
</Product>
<Product id="3">
  <ProductName>RegEB-5Gal</ProductName>
  <ImageFileName>5Gallon.png </ImageFileName>
</Product>
<Product id="4">
  <ProductName>RegEB-Gal</ProductName>
  <ImageFileName>GalSqueezeBottle.png</ImageFileName>
</Product> 
```

我正在尝试根据 Products id 属性值获取图像文件名，但出现 xml 处理错误

```
 $(document).ready(function () {
        function getParameterByName(name) {
            name = name.replace(/[\[]/, "\\\[").replace(/[\]]/, "\\\]");
            var regexS = "[\\?&]" + name + "=([^&#]*)";
            var regex = new RegExp(regexS);
            var results = regex.exec(window.location.search);
            if (results == null)
                return "";
            else
                return decodeURIComponent(results[1].replace(/\+/g, " "));
        }

        var prodid = getParameterByName("ID");
        var fieldheight = ($('#fld_productDetails').height());

        $.ajax({
                type: "GET",
                url: "OtherDataFiles/ProductImageLookup.xml",
                dataType: "xml",
                success: function (xml) {
                 $(xml).find('Product').each(function () {
                  if ($(this).attr('id').value === prodid)
                     {
                        var filename = $(this).find('ImageFileName').text();

                        $('#fld_productDetailImage').css({ 'height': fieldheight,'url': "../Images/ProductImages/" + filename + "no-repeat center" });
                    }
            });
          },
        error: function() {
          alert("An error occurred while processing XML file.");
       }
    });
    }); 
```

prodid 和 fieldheight 变量正在获得正确的值。变量文件名不是

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T00:53:20.653

$(xml).find 的 if 部分不正确，添加背景 css 的语法错误。正确的代码如下。

```
 if ($(this).attr('id') === prodid) {
                       var filename = $(this).find('ImageFileName').text();
                       $('#fld_productDetailImage').css({ 'height': fieldheight, 'background': "url(../Images/ProductImages/" + filename + ") no-repeat center" });
                    } 
```

# symfony - Symfony 2.2 app.php 重定向到 localhost root

> ID：16005211
> 
> 赞同：0
> 
> 时间：2013-04-14T22:40:18.700
> 
> 标签：symfony, localhost, symfony-2.2

我正在 Mac OSX Mountain Lion 上开发 Symfony2 项目。我用最新的 2.2.1 版本开始了一个新项目。在开发环境中一切正常，但是当我想用它测试产品环境时，`app.php`它会自动将我重定向到`http://localhost`并显示默认页面“它可以工作！”。

我的其他项目仍处于 2.1 版，即使在 prod 环境中也能正常工作。我没有对这个项目做任何不同的事情，我不知道如何让它工作。

我所有的项目都在我`~/Sites`目录中的单独文件夹中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T16:27:53.453

如果你阅读文件 UPGRADE-2.2.md，你会发现这一段：

该[`web/.htaccess`](https://github.com/symfony/symfony-standard/blob/2.2/web/.htaccess) 文件已大大增强，以防止`/app.php`在 URI 中有和没有重复内容。它还改进了使用 Apache 别名或 mod_rewrite 不可用时的功能。因此，您可能还想更新您的`.htaccess`文件。

因此，如果生产环境的旧 URI 是：`http://server.com/yourProyect/web/app.php/example`，现在将是： `http://server.com/yourProyect/web/example`。

干杯!

# mysql - 使用查询数据构建 sql 查询

> ID：16005212
> 
> 赞同：1
> 
> 时间：2013-04-14T22:40:21.983
> 
> 标签：mysql, sql

我必须给看起来像这样的桌子

表格1

```
User_ID(int)|comment(text)|gender(int) 
```

所以它可能像 1|bla bla|1

表2

```
ID(int)|Username(text) 
```

现在我想建立一个查询

```
SELECT Table1.User_ID,Table1.comment,Table1.gender FROM Table1 INNER JOIN Table2 ON Table1.User_ID=Table2.ID SELECT Username 
```

像这样的工作吗？我希望我的查询不是那么难理解。如果那以一种或另一种方式工作，是否也可以进行更多连接？

我第一次必须使用连接。我有点恼火，大多数例子有点抽象，..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T22:43:51.477

只需在语句之后列出您要选择的每一列`SELECT`，即使它们来自连接表。

```
SELECT Table1.User_ID, Table1.comment, Table1.gender, Table2.Username
FROM Table1 INNER JOIN Table2 
    ON Table1.User_ID = Table2.ID 
```

您可以拥有任意数量的联接：

```
SELECT Table1.User_ID, Table1.comment, Table1.gender, Table2.Username
FROM Table1 
    INNER JOIN Table2 
        ON Table1.User_ID = Table2.ID
    INNER JOIN Gender
        ON Table1.gender = Gender.id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T22:47:21.507

是的，是的。您也可以在 select 语句中访问表 2 字段。

# python - 使用 Python 获取没有回调 URL 的 Twitter 应用程序的 access_token

> ID：16005216
> 
> 赞同：1
> 
> 时间：2013-04-14T22:41:05.733
> 
> 标签：python, oauth, twitter

我创建了一个应用程序，其“回调 URL”字段为空白。我想以编程方式使用 oauth 端点（[https://dev.twitter.com/docs/api/1/post/oauth/access_token](https://dev.twitter.com/docs/api/1/post/oauth/access_token)）的 access_token 函数并获取 oauth_token 和 oauth_token_secret。

我可以从我的浏览器中执行此操作，我转到我的应用程序，然后通过单击按钮生成访问令牌。但是，我想通过 python 程序自动执行此操作。[https://dev.twitter.com/docs/api/1/post/oauth/access_token](https://dev.twitter.com/docs/api/1/post/oauth/access_token)声明“回调 URL”是强制性的。将其保留为空白不起作用，因为会导致“401 Unauthorized Failed to validate oauth signature and token”响应。

我不想使用任何 twitter API 包装器或 oauth 库。

我尝试了以下代码 -

```
 import httplib
    import uuid
    from time import time

    host = 'api.twitter.com'
    url = "/oauth/request_token"
    req = httplib.HTTPSConnection(host)
    req.putrequest("GET", url)
    req.putheader("Host", host)

    uid = uuid.uuid4()
    req.putheader("oauth_consumer_key" , consumer_key)
    req.putheader("OAuth oauth_nonce" , uid.hex)
    req.putheader("oauth_signature_method" , "HMAC-SHA1")
    req.putheader("oauth_timestamp" , str(time.time()))
    req.putheader("oauth_version" , "1.0")
    req.putheader("oauth_callback" , "")
    req.putheader("oauth_signature" , consumer_secret)

    req.endheaders()        
    resp = req.getresponse()
    data = resp.read()
    print resp.status, resp.reason
    print data 
```

这将返回“401 Unauthorized。无法验证 oauth 签名和令牌”

如何访问我创建的应用程序的 oauth_token 和 oauth_token_secret？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T05:41:01.390

看看这个[线程](https://stackoverflow.com/questions/6399978/getting-started-with-twitter-oauth2-python)- 如果你想实现整个 oAuth2 握手。否则，我将使用[tweepy](https://github.com/tweepy/tweepy)，它会为您解决这个问题。

# elasticsearch - 轮胎术语过滤器不起作用

> ID：16005220
> 
> 赞同：1
> 
> 时间：2013-04-14T22:41:51.987
> 
> 标签：elasticsearch, tire

我正在尝试使用轮胎/弹性搜索实现“类似范围”的功能。为什么这不起作用，即使我有状态为“Test1”或“Test2”的条目？结果总是空的。

```
 collection = @model.search(:page => page, :per_page => per_page) do |s|
    s.query {all}
    s.filter :terms, :status => ["Test1", "Test2"]
    s.sort {by :"#{column}", "#{direction}"}
  end 
```

该方法在没有过滤器的情况下工作正常。过滤方法有问题吗？！我检查了轮胎doku ....它应该工作。

谢谢！:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T12:26:34.907

您的问题很可能是由使用该`status`字段的默认映射引起的，这将对其进行标记——小写、拆分为单词等。

比较这两个：

```
http://localhost:9200/myindex/_analyze?text=Text1&analyzer=standard

http://localhost:9200/myindex/_analyze?text=Text1&analyzer=keyword 
```

您的解决方案是在映射中使用`keyword`分析器（或将字段设置为`not_analyzed`）。当字段不是“枚举”类型的数据时，您可以使用[多字段](http://www.elasticsearch.org/guide/reference/mapping/multi-field-type/)功能。

一个工作的 Ruby 版本应该是这样的：

```
require 'tire'

Tire.index('myindex') do
  delete
  create mappings: {
    document: {
      properties: {
        status: { type: 'string', analyzer: 'keyword' }
      }
    }
  }

  store status: 'Test1'
  store status: 'Test2'

  refresh
end

search = Tire.search 'myindex' do
  query do
    filtered do
      query { all }
      filter :terms, status: ['Test1']
    end
  end
end

puts search.results.to_a.inspect 
```

* * *

注意：在没有提供索引映射、示例数据等的情况下，几乎不可能提供合理的建议——这种情况是一个例外。

# java - 使用 ArrayLists 的 java 错误 - 无法编译

> ID：16005221
> 
> 赞同：0
> 
> 时间：2013-04-14T22:42:06.167
> 
> 标签：java, arrays, arraylist

这是我必须做的：

> 编写一个方法，该方法接受 Integer 对象的 ArrayList 并返回相同大小的 Character 对象的 ArrayList。Arryalist 的返回元素被分配一个字母等级，对应于 ArrayList 参数的相同索引元素的整数等级。（如果 90 或以上为 A，...，如果小于 60，则为 F）。包括代码以测试您的方法。

这是我所拥有的：

```
package returninggrade;

import java.util.ArrayList;

public class ReturningGrade {

    public static ArrayList main(String[] args) {
        ArrayList<Character> getEquivalen (ArrayList < Integer > mark) {
            ArrayList<Character> cArray = new ArrayList<Character>();      // create ArrayListr to return

            // loop throught Int arrayList
            for (int i = 0; i < mark.size(); i++) {
                // extract value
                int value = mark.get(i);
                // convert value to char
                if (value > 90) {
                    cArray.add(new Character('A'));
                } else if (value > 80) {
                    cArray.add(new Character('B'));
                } else if (value > 70) {
                    cArray.add(new Character('C'));
                } else if (value > 60) {
                    cArray.add(new Character('D'));
                } else {
                    cArray.add(new Character('E'));
                }
            }
            // return ArrayList of Char
            return cArray;
        }
    }
} 
```

这是我遇到错误并且卡住的地方：

> ```
> ArrayList<Character> getEquivalen(ArrayList<Integer> mark) 
> ```

NetBeans 给出的建议是“;” 是预期的，但是当我添加它时，我得到了同样的错误。有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T22:48:22.243

您正在尝试在`main()`. 你不能那样做。您的签名`main`也不正确 -*一定*是`public static void main(String[] foo)`。是`foo`一个变量名；通常它是`args`，但它*可以*是任何你喜欢的。

提取您的方法并*在之前* `main`声明它：

```
ArrayList<Character> getEquivalen (ArrayList < Integer > mark) {
    ArrayList<Character> cArray = new ArrayList<Character>();      // create ArrayListr to return

    // loop throught Int arrayList
    for (int i = 0; i < mark.size(); i++) {
        // extract value
        int value = mark.get(i);
        // convert value to char
        if (value > 90) {
            cArray.add(new Character('A'));
        } else if (value > 80) {
            cArray.add(new Character('B'));
        } else if (value > 70) {
            cArray.add(new Character('C'));
        } else if (value > 60) {
            cArray.add(new Character('D'));
        } else {
            cArray.add(new Character('E'));
        }
    }
    // return ArrayList of Char
    return cArray;
} 
```

然后，在 main 内部调用它：

```
public static void main(String[] args) {
    ReturningGrade rg = new ReturningGrade();
    rg.getEquivalen(new ArrayList<Integer>());  // you have to provide the ArrayList here
} 
```

# android - android + google map api v2 + 当前位置

> ID：16005223
> 
> 赞同：14
> 
> 时间：2013-04-14T22:42:21.313
> 
> 标签：android, google-maps

我正在创建一个带有谷歌地图视图的应用程序，我希望这个应用程序能够检测用户的当前位置并在地图上用标记显示纬度和经度，但到目前为止我所能做的就是显示谷歌地图和检测当前位置，不显示任何标记且不显示任何文本以显示纬度和经度

直到现在我才添加标记，因为我不知道将它放在代码中的哪个位置以及这样做的最佳做法是什么

谁能帮我 ？？？这是以下代码：

# 清单文件

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="in.wptrafficanalyzer.locationgooglemapv2demo"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="16" />

    <permission
        android:name="in.wptrafficanalyzer.LocationGoogleMapV2Demo.permission.MAPS_RECEIVE"
        android:protectionLevel="signature" />

    <uses-permission android:name="in.wptrafficanalyzer.LocationGoogleMapV2Demo.permission.MAPS_RECEIVE" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />

    <uses-feature
        android:glEsVersion="0x00020000"
        android:required="true" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="in.wptrafficanalyzer.locationgooglemapv2demo.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <meta-data
            android:name="com.google.android.maps.v2.API_KEY"
            android:value="API KEY" />
    </application>

</manifest> 
```

# xml文件

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

    <TextView
        android:id="@+id/tv_location"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

    <fragment
        android:id="@+id/map"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        class="com.google.android.gms.maps.SupportMapFragment" />

</RelativeLayout> 
```

# 文件

```
package in.wptrafficanalyzer.locationgooglemapv2demo;

import android.app.Dialog;
import android.location.Criteria;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;
import android.support.v4.app.FragmentActivity;
import android.view.Menu;
import android.widget.TextView;

import com.google.android.gms.common.ConnectionResult;
import com.google.android.gms.common.GooglePlayServicesUtil;
import com.google.android.gms.maps.CameraUpdateFactory;
import com.google.android.gms.maps.GoogleMap;
import com.google.android.gms.maps.SupportMapFragment;
import com.google.android.gms.maps.model.LatLng;

public class MainActivity extends FragmentActivity implements LocationListener {

    GoogleMap googleMap;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        // Getting Google Play availability status
        int status = GooglePlayServicesUtil.isGooglePlayServicesAvailable(getBaseContext());

        // Showing status
        if(status!=ConnectionResult.SUCCESS){ // Google Play Services are not available

            int requestCode = 10;
            Dialog dialog = GooglePlayServicesUtil.getErrorDialog(status, this, requestCode);
            dialog.show();

        }else { // Google Play Services are available

            // Getting reference to the SupportMapFragment of activity_main.xml
            SupportMapFragment fm = (SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.map);

            // Getting GoogleMap object from the fragment
            googleMap = fm.getMap();

            // Enabling MyLocation Layer of Google Map
            googleMap.setMyLocationEnabled(true);

            // Getting LocationManager object from System Service LOCATION_SERVICE
            LocationManager locationManager = (LocationManager) getSystemService(LOCATION_SERVICE);

            // Creating a criteria object to retrieve provider
            Criteria criteria = new Criteria();

            // Getting the name of the best provider
            String provider = locationManager.getBestProvider(criteria, true);

            // Getting Current Location
            Location location = locationManager.getLastKnownLocation(provider);

            if(location!=null){
                onLocationChanged(location);
            }
            locationManager.requestLocationUpdates(provider, 20000, 0, this);
        }
    }
    @Override
    public void onLocationChanged(Location location) {

        TextView tvLocation = (TextView) findViewById(R.id.tv_location);

        // Getting latitude of the current location
        double latitude = location.getLatitude();

        // Getting longitude of the current location
        double longitude = location.getLongitude();

        // Creating a LatLng object for the current location
        LatLng latLng = new LatLng(latitude, longitude);

        // Showing the current location in Google Map
        googleMap.moveCamera(CameraUpdateFactory.newLatLng(latLng));

        // Zoom in the Google Map
        googleMap.animateCamera(CameraUpdateFactory.zoomTo(15));

        // Setting latitude and longitude in the TextView tv_location
        tvLocation.setText("Latitude:" +  latitude  + ", Longitude:"+ longitude );

    }

    @Override
    public void onProviderDisabled(String provider) {
        // TODO Auto-generated method stub
    }

    @Override
    public void onProviderEnabled(String provider) {
        // TODO Auto-generated method stub
    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {
        // TODO Auto-generated method stub
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-14T23:03:31.530

首先查看[这里](http://developer.android.com/guide/topics/location/strategies.html)的文档，它很好地说明了获取用户位置的最佳策略。

就我个人而言，我通常使用放置在检索位置的标记开始地图

```
Location lastKnownLocation = locationManager.getLastKnownLocation(locationProvider); 
```

然后我开始监听位置更新并移动标记。

它还取决于您应用程序所需的准确位置，如果您不需要真正准确的位置但区域足够，也许您可​​以使用`lastKnownLocation`.

你可以试试这样的

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    // Getting Google Play availability status
    int status = GooglePlayServicesUtil.isGooglePlayServicesAvailable(getBaseContext());

    // Showing status
    if(status!=ConnectionResult.SUCCESS){ // Google Play Services are not available

        int requestCode = 10;
        Dialog dialog = GooglePlayServicesUtil.getErrorDialog(status, this, requestCode);
        dialog.show();

    }else { // Google Play Services are available

        // Getting reference to the SupportMapFragment of activity_main.xml
        SupportMapFragment fm = (SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.map);

        // Getting GoogleMap object from the fragment
        googleMap = fm.getMap();

        // Enabling MyLocation Layer of Google Map
        googleMap.setMyLocationEnabled(true);

        // Getting LocationManager object from System Service LOCATION_SERVICE
        LocationManager locationManager = (LocationManager) getSystemService(LOCATION_SERVICE);

        // Creating a criteria object to retrieve provider
        Criteria criteria = new Criteria();

        // Getting the name of the best provider
        String provider = locationManager.getBestProvider(criteria, true);

        // Getting Current Location
        Location location = locationManager.getLastKnownLocation(provider);

        LocationListener locationListener = new LocationListener() {
          void onLocationChanged(Location location) {
          // redraw the marker when get location update.
          drawMarker(location);
        }

        if(location!=null){
           //PLACE THE INITIAL MARKER              
           drawMarker(location);
        }
        locationManager.requestLocationUpdates(provider, 20000, 0, locationListener);
    }
}

private void drawMarker(Location location){
    // Remove any existing markers on the map
    googleMap.clear();
    LatLng currentPosition = new LatLng(location.getLatitude(),location.getLongitude());
    googleMap.addMarker(new MarkerOptions()
    .position(currentPosition)
    .snippet("Lat:" + location.getLatitude() + "Lng:"+ location.getLongitude())
    .icon(BitmapDescriptorFactory.defaultMarker(BitmapDescriptorFactory.HUE_AZURE))
    .title("ME"));
} 
```

此外，您不需要 Activity 类`implements LocationListener`，您只需定义一个侦听器并像我上面那样注册它

PS我没有编辑器儿子我的代码可能包含错字

希望这有帮助，干杯

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-05-29T22:13:16.983

我刚刚遇到了同样的问题，并找到了一种使用 Google Maps API 的方法：

```
private GoogleMap.OnMyLocationChangeListener myLocationChangeListener = new GoogleMap.OnMyLocationChangeListener() {
    @Override
    public void onMyLocationChange(Location location) {
        LatLng loc = new LatLng(location.getLatitude(), location.getLongitude());
        mMarker = mMap.addMarker(new MarkerOptions().position(loc));
        if(mMap != null){
            mMap.animateCamera(CameraUpdateFactory.newLatLngZoom(loc, 16.0f));
        }
    }
}; 
```

然后为地图设置监听器：

```
 mMap.setOnMyLocationChangeListener(myLocationChangeListener); 
```

这将在地图首次找到该位置时被调用。

不需要`LocationService`或`LocationManager`根本不需要。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-31T12:02:09.443

在android中定义谷歌地图android v2的完整快捷方式......

XML 文件：

```
<fragment
        android:id="@+id/map"
        android:name="com.google.android.gms.maps.SupportMapFragment"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" /> 
```

清单文件：

```
<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="17" />

<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_MOCK_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />

<!-- Map permission Starts -->
<permission
    android:name="com.example.mapdemoapiv2.permission.MAPS_RECEIVE"
    android:protectionLevel="signature" />

<uses-permission android:name="com.example.mapdemoapiv2.permission.MAPS_RECEIVE" />
<uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES" />

<uses-feature
    android:glEsVersion="0x00020000"
    android:required="true" />

<!-- Map permission Starts -->

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.example.mapdemoapiv2.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity android:name=".MapDetail" >
    </activity>

    <meta-data
        android:name="com.google.android.maps.v2.API_KEY"
        android:value="Your Key" />

    <uses-library android:name="com.google.android.maps" />
</application> 
```

活动课：

```
public class MainActivity extends android.support.v4.app.FragmentActivity
{
   GoogleMap googleMap;
    MarkerOptions markerOptions;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    setUpMapIfNeeded();

    GetCurrentLocation();

    }

private void setUpMapIfNeeded() {
    if (googleMap == null) {

        Log.e("", "Into null map");
        googleMap = ((SupportMapFragment) getSupportFragmentManager()
                .findFragmentById(R.id.map)).getMap();

        googleMap.setInfoWindowAdapter(new CustomInfoWindowAdapter(
                MainActivity.this));

        if (googleMap != null) {
            Log.e("", "Into full map");
            googleMap.setMapType(googleMap.MAP_TYPE_NORMAL);
            googleMap.getUiSettings().setZoomControlsEnabled(false);
        }
    }
}

private void GetCurrentLocation() {

    double[] d = getlocation();
    Share.lat = d[0];
    Share.lng = d[1];

     googleMap
            .addMarker(new MarkerOptions()
                    .position(new LatLng(Share.lat, Share.lng))
                    .title("Current Location")
                    .icon(BitmapDescriptorFactory
                            .fromResource(R.drawable.dot_blue)));

             googleMap
                .animateCamera(CameraUpdateFactory.newLatLngZoom(
                        new LatLng(Share.lat, Share.lng), 5));
}

public double[] getlocation() {
    LocationManager lm = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
    List<String> providers = lm.getProviders(true);

    Location l = null;
    for (int i = 0; i < providers.size(); i++) {
        l = lm.getLastKnownLocation(providers.get(i));
        if (l != null)
            break;
    }
    double[] gps = new double[2];

    if (l != null) {
        gps[0] = l.getLatitude();
        gps[1] = l.getLongitude();
    }
    return gps;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-05-22T03:17:50.087

最好使用：

```
Location currentLocation =
     LocationServices.FusedLocationApi.getLastLocation(googleApiClient); 
```

[文档](https://developer.android.com/training/location/retrieve-current.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-18T23:39:21.343

像这样容易：

在这之后 -

```
<meta-data
    android:name="com.google.android.maps.v2.API_KEY"
    android:value="Your Key" /> 
```

把这个——

```
<meta-data android:name="com.google.android.gms.version" android:value="4030500" /> 
```

# ruby - Ruby - 正则表达式匹配范围如 0;60s 或 0;60m

> ID：16005224
> 
> 赞同：1
> 
> 时间：2013-04-14T22:42:23.060
> 
> 标签：ruby, regex

我正在编写一个简单的命令行工具，我需要匹配以下格式的用户输入：

0;60 秒（从 0 到 60 秒）

0;60m（从 0 到 60 分钟）

所以，我需要确保：

*   第一个数字必须在 0 到 60 之间
*   第二个数字也必须在 0 到 60 之间
*   一定有 ”;” 范围之间
*   必须以“s”或“m”结尾
*   第二个数字必须大于第一个

最好的方法是什么？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T22:52:54.427

一个有效的正则表达式如下

```
/(\d{1,2})(s|m)/ 
```

它将匹配任何 1 位或 2 位数字，后跟“s”或“m”，您将分别将结果存储在`$1`和`$2`中。为确保第一个介于 0 和 60 之间，您可能需要检查`0 <= $1.to_i <= 60`.

至于第二部分，如果你想用 ; 您可以在哪里拥有范围，`[0-60];[0-60](s|m)`然后您只需修改正则表达式即可

```
/(\d{1,2});(\d{1,2})(s|m)/ 
```

然后你可以检查`0 <= $2.to_i <= $1.to_i <= 60`和`['s', 'm'].member? $3`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T22:56:30.863

我会将基本模式与语义分开。也就是说，我会用正则表达式检查“digits-semicolon-digits-s/m”。然后我会确保这些数字以编程方式在所需的范围内。

这可能不是在 Ruby 中执行此操作的最佳方式，但这是基本思想：

```
input =~ /^(\d+);(\d+)[sm]$/

# make sure that 0 <= Integer($1, 10) < Integer($2, 10) <= 60 
```

在第一行之后，`$1`分别`$2`包含在第一组和第二组括号内找到的内容。

检查`[0,60]`正则表达式中的范围也是可能的，但会变得不必要地难看。你会`\d+`用`[0-5]?[0-9]|60`.

# html - 覆盖父元素的宽度

> ID：16005226
> 
> 赞同：1
> 
> 时间：2013-04-14T22:42:32.660
> 
> 标签：html, css

[http://www.mysecretathens.gr/kulte_test/as_index.html](http://www.mysecretathens.gr/kulte_test/as_index.html)

我正在尝试覆盖底部列表中`#kontainer`的宽度。`<li>`我希望`.nav3`列表是全宽的，100%，但我不能覆盖`700px`父元素的，`#kontainer`

我能做些什么？我尝试了这个`!important;`规则，但这并没有给我想要的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T22:49:13.763

指定百分比宽度时，它会根据父项的宽度进行计算。所以 700 的 100% 是…… 700。

如果要超过 700，则需要指定像素宽度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T22:51:43.427

**解决方案1：** 您可以`.nav3`退出`#kontainer`

**解决方案2：** 您可以添加`position: absolute; left: 0;`到`.nav3`然后添加一些`margin-top`在`#footer`tu上推下来。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T22:52:26.273

宽度 100% 意味着获得子元素所在的父元素的 100%。它实际上做了你说它做的事！您可以从 #kontainer 中获取 nav3 以获取 100% 的 body 元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-06T13:01:20.200

我想要同样的东西，覆盖父宽度。我正在开发一个 Joomla 组件

> `<div class="container mainbody">`//** 宽度 1170px **//
> 
> > > `<div>`一些内容`</div>`
> > > 
> > > `<div>`一些内容`</div>`
> 
> `</div>`

我不想更改外部 div 或 .container 类的宽度（1170px），因为它是 Joomla 模板中的默认值，如果我更改，它将在每个页面中生效。

就我而言，我的网站主页中的某些子 div 只需要 100% 的宽度即可进行某些设计。

我所做的是在主页 html 文件中添加 css，因为它不会在其他页面中调用。

> `<div class="container mainbody">`
> 
> > > `<div class="container">`一些内容，宽度 1170px`</div>`
> > > 
> > > `<div>`一些内容，宽度 100%`</div>`
> 
> `</div>`
> 
> `<style type="text/css">`
> 
> > 。主体
> > 
> > {
> > 
> > > > 宽度：100% ！重要；
> > 
> > }
> 
> `</style>`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-02-05T14:51:38.110

对于你想要一个完整页面宽度的 div，你应该使用：

```
position: absolute;
left: 0px;
right 0px; //but make sure that any content you have below that div, gets margined in response.
margin-top: 200px; //Use the height of the above div 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2017-02-08T08:09:09.167

我刚刚注意到覆盖父元素宽度的**“非常”**有趣（和大胆）的方式。将孩子的宽度设置为：

宽度：计算（100% + 30%）；

信不信由你，至少 Firefox 51 正确计算了孩子的宽度，是的，它大于父母的宽度。

# android - GridView 内部的 ImageView Scale Type 不正确

> ID：16005230
> 
> 赞同：0
> 
> 时间：2013-04-14T22:43:10.873
> 
> 标签：android, gridview, imageview

我有一个 4 列和 n 行的 GridView。每个单元格只是一个 ImageView。我的自定义适配器的 getView() 代码如下所示：

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    ImageView imageView;
    if (convertView == null) {  // if it's not recycled, initialize some attributes
        imageView = new ImageView(mContext);
    } else {
        imageView = (ImageView) convertView;
    }
    imageView.setLayoutParams(new GridView.LayoutParams(100, 100));
    imageView.setScaleType(ImageView.ScaleType.FIT_XY);
    imageView.setPadding(1, 1, 1, 1);
    //imageView.setAdjustViewBounds(true);

    if(imageLoader != null) {
        String url = randomImage();
        imageView.setContentDescription(url);
        imageLoader.DisplayImage(url, imageView);
    }
    return imageView;
} 
```

imageLoader 将选择一个随机 URL，然后在后台获取它并相应地更新 ImageView。这工作得很好，花花公子。问题是生成的图像似乎使用的是 FIT_START 而不是 FIT_XY 的比例类型。我明确地将其设置为 FIT_XY，甚至在设置 imageView 的可绘制对象的代码中再次设置它......仍然不是 FIT_XY，我很难过。想法？

编辑删除对 setAdjustViewBounds() 的调用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T18:02:12.883

所以我才发现问题。我正在使用 Romain Guy 的代码从位图创建 RoundedDrawable - 得到圆角，ala iOS，如下所示：好奇-creature.org/2012/12/11/... ...当我跳过 RoundedDrawable 转换时，它工作正常。RoundedDrawable 代码中的某些东西是让整个事情失败的原因。我只需要找到另一种方法来绕过图像视图的角落。感谢@kcoppock，我现在正在使用 CENTER_CROP ！:)

# java - Java使用正则表达式验证输入字符串

> ID：16005234
> 
> 赞同：15
> 
> 时间：2013-04-14T22:43:44.853
> 
> 标签：java, regex

G。：

```
String string="Marc Louie, Garduque Bautista"; 
```

我想检查一个字符串是否只包含单词、逗号和空格。我尝试使用正则表达式，我得到的最接近的是：

```
String pattern = "[a-zA-Z]+(\\s[a-zA-Z]+)+"; 
```

但它不检查那里是否有逗号。有什么建议吗？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-04-14T22:47:36.930

你需要使用模式

```
^[A-Za-z, ]++$ 
```

例如

```
public static void main(String[] args) throws IOException {
    final String input = "Marc Louie, Garduque Bautista";
    final Pattern pattern = Pattern.compile("^[A-Za-z, ]++$");
    if (!pattern.matcher(input).matches()) {
        throw new IllegalArgumentException("Invalid String");
    }
} 
```

**编辑**

根据迈克尔的[精明评论](https://stackoverflow.com/questions/16005234/java-using-regex-to-verify-an-input-string/16005267#comment22824739_16005234)，OP 可能意味着一个逗号，在这种情况下

```
^[A-Za-z ]++,[A-Za-z ]++$ 
```

应该工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T22:46:25.417

为什么不简单地：

```
"[a-zA-Z\\s,]+" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T06:51:40.477

最好用这个

```
"(?i)[a-z,\\s]+" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T07:10:45.953

如果您的意思是“一些单词，任何空格和一个逗号，无论它发生在哪里”，那么我的感觉是建议这种方法：

```
"^[^,]* *, *[^,]*$" 
```

这意味着“以零个或多个不是 (^) 逗号的字符开头，然后你可以找到零个或多个空格，然后是一个逗号，然后又是零个或多个空格，最后又是零个或多个不是 (^) 的字符) 逗号”。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2018-09-24T11:37:41.320

在java中验证字符串的开头和结尾没有特殊字符，但中间可能有一些特殊字符。

```
String strRGEX = "^[a-zA-Z0-9]+([a-zA-Z0-9-/?:.,\'+_\\s])+([a-zA-Z0-9])$";
        String toBeTested= "TesADAD2-3t?S+s/fs:fds'f.324,ffs";
        boolean testResult= Pattern.matches(strRGEX, toBeTested);
        System.out.println("Test="+testResult); 
```

# html - 我如何防止这个栏被打破？

> ID：16005236
> 
> 赞同：0
> 
> 时间：2013-04-14T22:43:47.337
> 
> 标签：html, css

缩小时如何防止导航栏中断？

这是我的代码：-

```
<nav>
<ul id="nav">
<li><a href="#">Home</a></li>
<li><a href="#">What We Do</a></li>
<li><a href="#">How we deliver</a></li>
<li><a href="#">Who We Are</a></li>
<li><a href="#">Support</a></li>
<li><a href="#">Our Partners</a></li>
<li><a href="#">Contact Us</a></li>
</ul>
</nav>
</div> 
```

这是我的 CSS :-

```
#nav {
margin:80px 0 40px; 
list-style:none;
text-shadow: 0 -1px 3px #202020;
width:880px; 
height:34px;
-moz-border-radius:4px;
-webkit-border-radius:4px;
border-radius:8px 8px 8px 8px;
-moz-box-shadow: 0px 3px 3px #cecece;
-webkit-box-shadow: 0px 3px 3px #cecece;
box-shadow: 0 3px 3px #8b8b8b;
letter-spacing:-1px;
font-family:Calibri;
font-size:18px;
letter-spacing:-0.5px;
font-weight:500;
}
#nav li {
display:block; 
float:left;
width:124px;
height:34px;
background-image: -o-linear-gradient(bottom, rgb(0,100,145) 20%, rgb(0,129,187) 80%);
background-image: -moz-linear-gradient(bottom, rgb(0,100,145) 20%, rgb(0,129,187) 80%);
background-image: -webkit-gradient(linear, left bottom, left top, color-stop(0.0,        rgb(0,100,145)), color-stop(0.62, rgb(0,129,187)));
background-image: -webkit-linear-gradient(bottom, rgb(0,100,145) 20%, rgb(0,129,187)     80%);
background-image: -ms-linear-gradient(bottom, rgb(0,100,145) 20%, rgb(0,129,187) 80%);
background-image: linear-gradient(bottom, rgb(0,100,145) 20%, rgb(0,129,187) 80%);
background-color:#007fb9;
border-style:solid;
border-width:1px;
border-color:#005F82 #004A66 #005F82 #005D7F;
transition:all 0.5s ease 0s;
}
#nav li:hover {
background-image:-moz-linear-gradient(center bottom , #006491 100%, #0081BB 0%);
}
#nav li a {
text-decoration:none;
color:#FFF;
text-align:center;
color:white;
outline:medium none;
line-height:32px;
display:block;
}
#nav li:first-child {
-moz-border-radius:4px 0 0 4px;
-webkit-border-radius:4px 0 0 4px;
border-radius:10px 0 0 10px;
border-left:none;
}
#nav li:last-child {
-moz-border-radius:4px 0 0 4px;
-webkit-border-radius:4px 0 0 4px;
border-radius:0 10px 10px 0;
border-right:none;
width:124px;
}
nav {
width:890px;
margin-left:170px;
} 
```

正如您将看到的，如果您在本地尝试此代码并缩小，导航开始中断。虽然当您在移动设备上试用它时，它看起来非常好。有人可以帮我解决这个问题吗？

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T22:59:54.110

好的，这应该工作。这是导航栏的 jsfiddle：

[http://jsfiddle.net/caedanlavender/97yGC/27/](http://jsfiddle.net/caedanlavender/97yGC/27/)

我将整个导航栏包含在一个名为“cont”的 div 中，并为其设置了高度和宽度。

```
#cont{
 width:890px;
 height:34px;
 letter-spacing:-1px;
 font-family:Calibri;
 font-size:18px;
 letter-spacing:-0.5px;
 font-weight:500;
 } 
```

希望这可以帮助 ：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T23:11:23.603

`#nav li`我通过在您的样式中添加以下内容来解决此问题：

```
box-sizing: border-box;
-moz-box-sizing: border-box;
-ms-box-sizing: border-box;
-webkit-box-sizing: border-box 
```

此片段是从[https://stackoverflow.com/a/1274647/2277682回收的](https://stackoverflow.com/a/1274647/2277682)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T23:03:16.493

这似乎是由 LI 元素上的宽度和边框引起的。当你缩小浏览器可以减小宽度，但边框已经是 1px，所以它们不能再小了。结果，您的 LI 的总宽度最终比您的 UL 更宽，最后一个 LI 下降到下一行。

如果您将边框移动到 A 元素而不是 LI 上，那么一切都应该正确缩放。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T00:12:57.283

我认为更好的方法是将 li 元素设置为`display: inline-block`然后使用`white-space: nowrap`. 这也是一个好主意，因为您不希望按钮内的文本中断。但是，由于 li 元素现在是内联的，因此您不能在它们之间留下空格。

[http://jsfiddle.net/eUR5H/1/](http://jsfiddle.net/eUR5H/1/)

# javascript - $.ajax.load() 在图片加载前触发回调

> ID：16005239
> 
> 赞同：0
> 
> 时间：2013-04-14T22:44:03.800
> 
> 标签：javascript, jquery, callback

为什么ajax`load()`会在所有图片都加载完之前触发回调。

```
$(element).load("url #id", function()
{
    $(this).fadeIn();
}) 
```

当我加载数据时，`element`淡入淡出，我看到屏幕上的图像是如何缓慢绘制的……是图像已加载但计算机速度慢吗？

完全加载后我应该怎么做才能显示内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T23:01:01.600

`$(element).load`会将内容加载到您的`element`中，但随后您可以找到所有图像并在它们上附加加载回调以确定所有图像何时加载。但是，这不是很可靠，因为`load`图像上的事件可能由于各种原因永远不会触发。在某些浏览器中，`load`当图像被缓存时，事件将是同步的，因此它会在我们在图像上附加事件处理程序之前触发。出于这个原因，如果图像在 5 秒后没有加载，我们仍然显示`element`。

```
$(element).load("url #id", function () {
    var $self = $(this),
        $images = $self.find('img'),
        imgCount = $images.length,
        loadedCount = 0;

    $images.on('load', function () {
        if (++loadedCount === imgCount) {
            $self.fadeIn();
            $(this).off('load');
        }
    });

    setTimeout(function () {
        if (loadedCount !== imgCount) {
            $self.fadeIn();
            $images.off('load');
        }
    }, 5000);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T22:53:00.500

从[jQuery 文档](http://api.jquery.com/load-event/)：

> **与图像一起使用时加载事件的注意事项**
> 
> 开发人员尝试使用 .load() 快捷方式解决的一个常见挑战是在图像（或图像集合）完全加载时执行一个函数。应该注意几个已知的警告。这些是：
> 
> 1.  它不能始终如一地工作，也不能可靠地跨浏览器
> 2.  如果图像 src 设置为与以前相同的 src，它不会在 WebKit 中正确触发
> 3.  它没有正确地冒泡 DOM 树
> 4.  可以停止对已经存在于浏览器缓存中的图像进行触发

在同一个文档中，它们提供了在加载图形时显示图形的方法。

您可以`height`在显示图像之前检查该属性是否为它需要的属性，因为它只有在真正加载时才会改变大小（但前提是您没有在 css 中指定它）。

# python - 如何定义 settings.LOGGING 以便 gunicorn 找到它想要的版本值？

> ID：16005245
> 
> 赞同：9
> 
> 时间：2013-04-14T22:44:17.037
> 
> 标签：python, django, gunicorn

我正在尝试运行 Gunicorn，但遇到了错误（粘贴在下面）。目前看起来 Gunicorn 或其依赖项之一正在尝试读取 settings.LOGGING，而 settings.py 文件似乎没有定义 settings.LOGGING。

所以我想知道我可以添加什么样的文字或其他代码，以便 Gunicorn + 依赖项拥有他们认为需要的东西。

代码粘贴：

```
(socialenv)jonathan@li393-189:~/directory$ python manage.py run_gunicorn 0.0.0。
0:8000
2013-04-14 17:40:13 [26464] [INFO] 启动 gunicorn 0.17.2
2013-04-14 17:40:13 [26464] [INFO] 收听：http://0.0.0.0:8000 (26464)
2013-04-14 17:40:13 [26464] [INFO] 使用工作人员：同步
2013-04-14 17:40:13 [26469] [INFO] 使用 pid 引导工作人员：26469
2013-04-14 17:40:13 [26469] [错误] 工作进程中的异常：
回溯（最近一次通话最后）：
  文件“/home/jonathan/socialenv/local/lib/python2.7/site-packages/gunicorn/arbiter.py”，第 485 行，在 spawn_worker
    worker.init_process()
  文件“/home/jonathan/socialenv/local/lib/python2.7/site-packages/gunicorn/workers/base.py”，第 100 行，在 init_process
    self.wsgi = self.app.wsgi()
  wsgi 中的文件“/home/jonathan/socialenv/local/lib/python2.7/site-packages/gunicorn/app/base.py”，第 103 行
    self.callable = self.load()
  加载中的文件“/home/jonathan/socialenv/local/lib/python2.7/site-packages/gunicorn/app/djangoapp.py”，第 133 行
    返回 mod.make_command_wsgi_application(self.admin_media_path)
  文件“/home/jonathan/socialenv/local/lib/python2.7/site-packages/gunicorn/app/django_wsgi.py”，第 113 行，在 make_command_wsgi_application
    reload_django_settings()
  文件“/home/jonathan/socialenv/local/lib/python2.7/site-packages/gunicorn/app/django_wsgi.py”，第 109 行，在 reload_django_settings
    logging_config_func(settings.LOGGING)
  dictConfig 中的文件“/usr/lib/python2.7/logging/config.py”，第 777 行
    dictConfigClass(config).configure()
  文件“/usr/lib/python2.7/logging/config.py”，第 503 行，在配置中
    raise ValueError("字典没有指定版本")
ValueError：字典未指定版本
回溯（最近一次通话最后）：
  文件“/home/jonathan/socialenv/local/lib/python2.7/site-packages/gunicorn/arbiter.py”，第 485 行，在 spawn_worker
    worker.init_process()
  文件“/home/jonathan/socialenv/local/lib/python2.7/site-packages/gunicorn/workers/base.py”，第 100 行，在 init_process
    self.wsgi = self.app.wsgi()
  wsgi 中的文件“/home/jonathan/socialenv/local/lib/python2.7/site-packages/gunicorn/app/base.py”，第 103 行
    self.callable = self.load()
  加载中的文件“/home/jonathan/socialenv/local/lib/python2.7/site-packages/gunicorn/app/djangoapp.py”，第 133 行
    返回 mod.make_command_wsgi_application(self.admin_media_path)
  文件“/home/jonathan/socialenv/local/lib/python2.7/site-packages/gunicorn/app/django_wsgi.py”，第 113 行，在 make_command_wsgi_application
    reload_django_settings()
  文件“/home/jonathan/socialenv/local/lib/python2.7/site-packages/gunicorn/app/django_wsgi.py”，第 109 行，在 reload_django_settings
    logging_config_func(settings.LOGGING)
  dictConfig 中的文件“/usr/lib/python2.7/logging/config.py”，第 777 行
    dictConfigClass(config).configure()
  文件“/usr/lib/python2.7/logging/config.py”，第 503 行，在配置中
    raise ValueError("字典没有指定版本")
ValueError：字典未指定版本
2013-04-14 17:40:13 [26469] [INFO] 工人退出（pid：26469）
2013-04-14 17:40:13 [26464] [INFO] 关机：大师
2013-04-14 17:40:13 [26464] [INFO] 原因：工作器无法启动。
(socialenv)jonathan@li393-189:~/directory$

```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-10-01T02:54:39.927

我有同样的错误，我通过将日志配置添加到项目的设置文件来修复它，我使用了这个页面中的示例

[https://docs.djangoproject.com/en/dev/topics/logging/](https://docs.djangoproject.com/en/dev/topics/logging/)

这是我的设置文件中的代码

```
LOGGING = {
    'version': 1,
    'disable_existing_loggers': True,
    'formatters': {
        'verbose': {
            'format': '%(levelname)s %(asctime)s %(module)s %(process)d %(thread)d %(message)s'
        },
        'simple': {
            'format': '%(levelname)s %(message)s'
        },
    },
    'handlers': {
        'null': {
            'level': 'DEBUG',
            'class': 'logging.NullHandler',
        },
        'console':{
            'level': 'DEBUG',
            'class': 'logging.StreamHandler',
            'formatter': 'simple'
        },
        'mail_admins': {
            'level': 'ERROR',
            'class': 'django.utils.log.AdminEmailHandler',
            'filters': [],
        }
    },
    'loggers': {
        'django': {
            'handlers': ['null'],
            'propagate': True,
            'level': 'INFO',
        },
        'django.request': {
            'handlers': ['mail_admins'],
            'level': 'ERROR',
            'propagate': False,
        },
    }
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-12-03T12:22:14.260

最简单的方法是在settings.py中添加：

```
LOGGING = {
    'version': 1,
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T14:42:29.713

该错误消息暗示为日志记录配置传递的配置字典缺少架构版本。你需要出示你的字典来确定，但这肯定是你得到的错误所指的。有关更多信息，请参阅[文档](http://docs.python.org/2/library/logging.config.html#dictionary-schema-details)。

# matlab - 如何使标题出现在MATLAB中的极坐标图上方

> ID：16005254
> 
> 赞同：5
> 
> 时间：2013-04-14T22:45:33.410
> 
> 标签：matlab, title

我创建了一个简单的极坐标图，如下所示：

```
polar(direction, power, 'k.')  
title('this is my title') 
```

只有标题与圆圈顶部的数字重叠。

如何将情节向下/标题向上移动或创造空间？我会认为 MATLAB 会自动调整自己？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T01:05:11.847

您可以修改对 title 的调用，使其返回一个句柄，然后您可以使用它来调整位置。

```
t = title('this is my title');
get(t,'Position')
ans =
   -0.0024    1.1810    1.0001
set(t,'Position',get(t,'Position')+[0 .01 0]);  % move up slightly 
```

标题的默认位置表示为相对于当前绘图轴的分数，当前绘图轴基于图形窗口大小。因此，如果窗口很小，您可能会看到重叠。放大窗口可能会为您解决问题，而无需执行任何其他操作。

您还可以通过调整其位置来移动绘图 - 但由于标题的位置固定在绘图轴上，因此标题将随绘图一起移动。但是，如果绘图上方的空间很拥挤，这对于上述解决方案可能很有用。

```
get(gca,'Position')
ans =
    0.1300    0.1100    0.7750    0.8150
set(gca,'Position',[.13,.10,.775,.815]);  % move plot down a bit 
```

对于它的价值，您还可以使用“文本”命令将文本放置在任意位置。

# php - 多个 PHP 按钮？（一个按钮是提交按钮，其他按钮是功能）

> ID：16005260
> 
> 赞同：2
> 
> 时间：2013-04-14T22:47:04.987
> 
> 标签：php, javascript, button

我正在制作一个有多个按钮的 php 网站。一个按钮保存，这需要将其带到不同的页面，但其他按钮执行简单的操作，例如将 +1 添加到分数。

功能按钮附有 javascript，因此功能按钮的代码如下所示：

```
<button onclick="addPoints(); ButtonStats()">Add</button></td> 
```

我尝试了多种不同的方法来使按钮工作，但我不确定如何执行这样的 if 语句：

```
if ($_POST['SaveButton']) 
   $executestring = "location: process.php"; 
```

if 语句适用于保存按钮（但单击其他​​按钮当前会刷新页面）。

那么，我将如何将添加按钮代码写入像提交按钮那样的“if”语句？（我尝试为执行字符串添加 addPoints() ，但这没有用，所以我只是不确定如何写出来）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T22:55:25.250

不要使用`<button>`没有定义为的`type` *属性*`button`，因为他们会尝试提交表单，导致页面“刷新”。采用

```
<input type="button" value="click" /> 
```

或者

```
<button type="button">Click</button> 
```

如果您不希望他们有提交行为。

看看[这个 jsFiddle 例子](http://jsfiddle.net/hescano/dmfez/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-14T22:52:37.743

当单击按钮 Add 时，您正在调用 javascript，这意味着您无法在 php 中对其执行任何操作。
当您调用 javascript 时，所有计算都在客户端（例如用户浏览器）完成。php 仅在用户访问您的页面时执行（因为页面是从服务器请求的，服务器执行 php 并发送结果）。
它建议您了解有关客户端和服务器端语言的更多信息。

# r - 如何获取读取标准输入的 R 脚本

> ID：16005261
> 
> 赞同：3
> 
> 时间：2013-04-14T22:47:06.747
> 
> 标签：r, stdin

我有以下两种从标准输入读取的方式。但是使用的方法`source()`不起作用。有人知道如何使该`source()`方法起作用吗？谢谢。

```
~$ cat main.sh 
#!/usr/bin/env bash

set -v
cat main.csv | Rscript main.R
cat main.csv | R -q --vanilla <<EOF
source('main.R')
EOF
~$ cat main.R
f=read.csv(file('stdin'))
f
~$ ./main.sh
cat main.csv | Rscript main.R
> f=read.csv(file('stdin'))
> f
    X V1 V2
1   1  1 11
2   2  2 12
3   3  3 13
4   4  4 14
5   5  5 15
6   6  6 16
7   7  7 17
8   8  8 18
9   9  9 19
10 10 10 20
> 
cat main.csv | R -q --vanilla <<EOF
source('main.R')
EOF
Error in read.table(file = file, header = header, sep = sep, quote = quote,  : 
  no lines available in input
Calls: source ... withVisible -> eval -> eval -> read.csv -> read.table
Execution halted 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T23:45:08.780

这有效：

```
cat main.csv | R -q --vanilla -e 'source("main.R")' 
```

的最后一行`main.R`已替换为

```
print(f) 
```

# xsl-fo - 删除表列 XSL-FO 中的空格/空格

> ID：16005263
> 
> 赞同：0
> 
> 时间：2013-04-14T22:47:11.830
> 
> 标签：xsl-fo, apache-fop

![在此处输入图像描述](https://i.stack.imgur.com/H2Mrb.png)

该链接有一个使用 Apache-FOP 生成的 PDF 表格。

我无法删除表格列标题和列值中的空格/空格。

PDF 有 120 个字符的限制，因此无法显示所有文本。

该应用程序确实提供了列宽。但不确定如何在 xsl-fo 文件中使用它

请建议如何定义表格列的宽度以仅包含文本且没有任何空白/未使用的空格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-11-30T10:40:48.857

使用`fo:table-column`（参见[https://www.w3.org/TR/xsl11/#fo_table-column](https://www.w3.org/TR/xsl11/#fo_table-column)）和`column-width`属性来指定每列的宽度。例如：

```
<fo:table-column column-width="100pt" column-number="1" /> 
```

如果`fo:table-column`按顺序生成，则可以省略该`column-number`属性（请参阅[https://www.w3.org/TR/xsl11/#column-number](https://www.w3.org/TR/xsl11/#column-number)）。

如果您使用的是 FOP，它仍然没有实现自动表格布局，因此您可能还必须将表格宽度设置为列宽加上边框宽度的总和。

# .net - 优化正则表达式中的回溯

> ID：16005265
> 
> 赞同：1
> 
> 时间：2013-04-14T22:47:13.920
> 
> 标签：.net, regex

我正在解析的页面上有许多 Web 链接，我想捕获所有*h3*链接，但其中包含特定子元素的链接除外。

示例页面：

```
<h3 class="r">
    <a href="http://Capture This"></a>
</h3>
   <some tags here>
   <more tags  here>
   <a bit more tags here>
   </div>
</div>
<h3 class="r">
   <a href="http://Capture This"></a>
</h3>
<some tags here>
  <class=ml>
  <more tags here>
  <class=tcl>
  <a bit more tags here>
  </div>
</div>
<h3 class="r">
  <a href="http://Dont capture this"></a>
</h3>
  <some tags here>
  <class=ml>
  <more tags here>
  <a bit more tags here>
  </div>
</div> 
```

捕获 h3 链接：

*   其中不包含*class=ml*子元素
*   或者包含 class ml 和*class=tcl*元素

此正则表达式匹配所有*h3*链接：

```
h3 class=["']?[^"']+["']?><a href=["']?(https?://[^"']+)["']? 
```

此正则表达式匹配其子元素中没有*class=ml的所有**h3*链接（每个*h3*元素用 doulbe /div 标签分隔）：

 **```
h3 class=["']?r["']?><a href=["']?(https?://[^"']+)["']?(?=((?!class=ml).)*(</div>){2,}) 
```

最后，我正在寻找的正则表达式捕获所有*h3*链接，这些链接不包含*class=ml*，或者在其子元素中同时包含*class=ml*和*class=tcl （按此顺序）*

```
h3 class=["']?[^"']+["']?><a href=["']?(https?://[^"']+)["']?(?=((?!class=ml)(?!(</div>){2,}).)*(class=ml((?!class=tcl>).)*class=tcl>|(</div>){2,})) 
```

我附带的正则表达式可以工作，但由于回溯，效率非常低。例如，标准页面匹配的 100 次迭代需要 50 秒才能完成。有没有办法改进这个正则表达式，所以它不会回溯那么多？

我相信我开始了解 HTML 解析[Cthulhu 的方式](http://www.codinghorror.com/blog/2009/11/parsing-html-the-cthulhu-way.html)实际上是什么，但希望它不会打扰*任何人的*睡眠。

PS 我在.NET 正则表达式引擎上，如果这会影响我的选择。**

# ssl - SSLSocket 主要通过 3G 阻止，但通过 wifi 工作

> ID：16005269
> 
> 赞同：1
> 
> 时间：2013-04-14T22:48:06.913
> 
> 标签：ssl, wifi, 3g, jsse

我有一个关于网络的非常奇怪的问题。我创建了一个安全连接到 PC 上运行的服务器的 andorid 应用程序。请注意，尽管 PC 在 NAT 之后，但相应的端口已被转发。还将 PC 放入 DMZ 以避免任何端口转发问题。

问题是，当我通过 WIFI 使用代码时，它工作得很好，但是，在 3G 上，它几乎总是（30 个中的 29 个）阻塞在 SSLSocket 的 getOutputStream 方法中（在服务器端发生了接受）。

你能帮我解决这个问题吗？

谢谢

客户端代码：

```
E.log("establishing connection: trying to create context");

SSLContext context = SSLContext.getInstance("TLS");
context.init(null, new X509TrustManager[]{new X509TrustManager(){
        public void checkClientTrusted(X509Certificate[] chain,
                        String authType) throws CertificateException {}
        public void checkServerTrusted(X509Certificate[] chain,
                        String authType) throws CertificateException {}
        public X509Certificate[] getAcceptedIssuers() {
                return new X509Certificate[0];
        }}}, new SecureRandom());

E.log("establishing connection: trying to create socket factory");

SSLSocketFactory factory = (SSLSocketFactory) context.getSocketFactory ();

E.log("establishing connection: trying to create socket");

kkSocket = (SSLSocket) 
        factory.createSocket(host, Integer.parseInt(port));

E.log("establishing connection: trying to create out writer");
out = new PrintWriter(kkSocket.getOutputStream(), true);

E.log("establishing connection: trying to create in reader");                   
in = new BufferedReader(new InputStreamReader
           (kkSocket.getInputStream())); 
```

失败日志：

```
04-15 00:07:59.066: E/Bubu(17340): starting thread
04-15 00:07:59.076: I/System.out(17340): Mon Apr 15 00:07:59 CEST 2013 - establishing connection: trying to create context
04-15 00:07:59.076: I/System.out(17340): Mon Apr 15 00:07:59 CEST 2013 - establishing connection: trying to create socket factory
04-15 00:07:59.076: I/System.out(17340): Mon Apr 15 00:07:59 CEST 2013 - establishing connection: trying to create socket
04-15 00:07:59.146: D/dalvikvm(17340): GC_CONCURRENT freed 190K, 5% free 7530K/7880K, paused 4ms+2ms, total 23ms
04-15 00:08:01.056: I/System.out(17340): Mon Apr 15 00:08:01 CEST 2013 - establishing connection: trying to create out writer 
```

成功：

```
04-15 00:13:15.506: E/Bubu(17750): starting thread
04-15 00:13:15.526: I/System.out(17750): Mon Apr 15 00:13:15 CEST 2013 - establishing connection: trying to create context
04-15 00:13:15.536: I/System.out(17750): Mon Apr 15 00:13:15 CEST 2013 - establishing connection: trying to create socket factory
04-15 00:13:15.536: I/System.out(17750): Mon Apr 15 00:13:15 CEST 2013 - establishing connection: trying to create socket
04-15 00:13:15.556: I/System.out(17750): Mon Apr 15 00:13:15 CEST 2013 - establishing connection: trying to create out writer
04-15 00:13:15.746: I/System.out(17750): Mon Apr 15 00:13:15 CEST 2013 - establishing connection: trying to create in reader
04-15 00:13:15.746: I/System.out(17750): Mon Apr 15 00:13:15 CEST 2013 - from server:bubu 
```

# gcc - gfortran 的 free_pi_tree 错误

> ID：16005271
> 
> 赞同：0
> 
> 时间：2013-04-14T22:48:17.587
> 
> 标签：gcc, fortran, gfortran

当我尝试编译我正在编写的一些代码时，我得到一个奇怪的错误。我有几个用于线性代数计算的 Fortran 模块；我不想让应用程序必须使用所有这些，所以我围绕它们编写了一个包装模块：

```
module linear_algebra_mod
    use sparse_matrix_mod
    use csr_matrix_mod
    (etc.) 
```

以便最终用户可以编写`use linear_algebra_mod`以获取所有这些。但是，当我编译线性代数模块时出现以下错误：

```
gfortran -c sparse_matrix_mod.f90
gfortran -c csr_matrix_mod.f90
gfortran -c linear_algebra_mod.f90
linear_algebra_mod.f90:5.8:

use csr_matrix_mod
    1
Internal Error at (1):
free_pi_tree(): Unresolved fixup 
```

[这是在这里](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=47546)和[这里](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=53015)的错误报告中提出的，但我无法从那些我应该做的事情中收集到。

为了进一步混淆水域，当我首先使用 csr_matrix 模块时，如下所示：

```
module linear_algebra_mod
    use csr_matrix_mod
    use sparse_matrix_mod 
```

错误消失。

如果此背景信息有帮助：sparse_matrix 模块定义了 csr_matrix 模块扩展并实际实现的抽象数据类型。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T23:43:25.837

内部编译器错误始终表明编译器中存在错误。检查您是否拥有最新版本的编译器，如果有，请提交错误报告（您可以查看打开的错误部分以查看是否已被其他人报告，但最好有一个错误报告了两次而不是根本没有报告，所以不要太担心可能会提交重复的错误报告）。

# python - 从文档中提取单个关键字

> ID：16005273
> 
> 赞同：1
> 
> 时间：2013-04-14T22:48:44.083
> 
> 标签：python, machine-learning, nlp, nltk

我希望从诸如用户推文之类的小文本中生成关键字。我已经检查了这些链接。 [从小文本内容（例如推文）](https://stackoverflow.com/questions/2764116/tag-generation-from-a-small-text-content-such-as-tweets)
[生成标签 从文本内容生成标签](https://stackoverflow.com/questions/2661778/tag-generation-from-a-text-content/)

问题是他们使用二元组或三元组搭配，因此他们只能找到多词关键词。我希望找到一个关键字作为主题。我应该如何修改它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T05:13:34.480

看看这个线程： [使用 python 排序词频计数](https://stackoverflow.com/questions/4088265/word-frequency-count-using-python)

它列出了多种方法，因此请选择一种对您来说最简单的方法。

# excel - Excel/RibbonUI 菜单已禁用

> ID：16005274
> 
> 赞同：0
> 
> 时间：2013-04-14T22:48:51.163
> 
> 标签：excel, ribbon, vba

**注意**通过创建一个复制所有数据、宏和其他代码的新工作簿来解决以下问题。欢迎任何有关导致工作簿“中断”的原因的见解！

我有一个带有自定义ribbonui 的excel 文件。我最近添加了一个带有新菜单的新组，它（已）从第一个组中复制而来，并且某些项目已被删除。

第一组“库”及其所有控件按预期工作。然而，“文档”组中的“文档菜单”菜单是灰色的，我不知道为什么！

我尝试在菜单中添加一个`getEnabled`普通`enabled`属性，但它不会触发，`getEnabled`菜单包含的按钮的任何事件也不会触发。

当我第一次打开功能区时，`getLabel`事件确实触发并正确设置了标签。

我已经尝试将组和所有控件重新命名为没有“文档”的东西，以防它以某种方式发生冲突，但又不行。

有谁知道可能导致这种情况发生的原因？

下面是整个 customui xml 文件。

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<customUI 
    onLoad="CustomUI.Ribbon_onLoad" 
    xmlns="http://schemas.microsoft.com/office/2009/07/customui">
  <ribbon>
    <tabs>
      <tab 
          id="Main" 
          label="Initech">
        <group
            id="Library"
            label="Library"
            tag="Library"
            centerVertically="true">
          <menu
              id="LibraryMenu"
              tag="Library"
              image="gear"
              getLabel="CustomUI.Menu_getLabel">
            <button
                id="LibraryMenu_Open"
                tag="Library"
                label="Open Library"
                imageMso="FileOpen"
                getEnabled="CustomUI.Button_getEnabled"
                onAction="CustomUI.Button_onAction" />
            <button
                id="LibraryMenu_New"
                tag="Library"
                label="New Library"
                imageMso="FileNew"
                getEnabled="CustomUI.Button_getEnabled"
                onAction="CustomUI.Button_onAction" />
            <menuSeparator
                id="LibraryMenu_Separator0" />
            <button
                id="LibraryMenu_Save"
                tag="Library"
                label="Save"
                imageMso="FileSave"
                getEnabled="CustomUI.Button_getEnabled"
                onAction="CustomUI.Button_onAction" />
            <button
                id="LibraryMenu_Close"
                tag="Library"
                label="Close"
                imageMso="FileClose"
                getEnabled="CustomUI.Button_getEnabled"
                onAction="CustomUI.Button_onAction" />
            <button
                id="LibraryMenu_Default"
                tag="Library"
                label="Set as Default"
                imageMso="AcceptInvitation"
                getEnabled="CustomUI.Button_getEnabled"
                onAction="CustomUI.Button_onAction" />
            <menuSeparator
                id="LibraryMenu_Separator1" />
            <button
                id="LibraryMenu_Add"
                tag="Library"
                label="Add Component"
                getEnabled="CustomUI.Button_getEnabled"
                onAction="CustomUI.Button_onAction" />
            <button
                id="LibraryMenu_Editor"
                tag="Library"
                label="Edit Menu"
                getEnabled="CustomUI.Button_getEnabled"
                onAction="CustomUI.Button_onAction" />
          </menu>
          <dynamicMenu
              id="LibraryComponents"
              tag="Library"
              image="book_stack"
              getLabel="CustomUI.Menu_getLabel"
              getEnabled="CustomUI.Menu_getEnabled"
              getContent="CustomUI.Menu_getContent" />
        </group>
        <group
            id="Document"
            label="Document"
            tag="Document"
            centerVertically="true">
          <menu
              id="DocumentMenu"
              tag="Document"
              imageMso="FileOpen"
              getLabel="CustomUI.Menu_getLabel">
            <button
                id="DocumentMenu_Open"
                tag="Document"
                label="Open Document"
                imageMso="FileOpen"
                getEnabled="CustomUI.Button_getEnabled"
                onAction="CustomUI.Button_onAction" />
            <button
                id="DocumentMenu_New"
                tag="Document"
                label="New Document"
                imageMso="FileNew"
                getEnabled="CustomUI.Button_getEnabled"
                onAction="CustomUI.Button_onAction" />
            <menuSeparator
                id="DocumentMenu_Separator0" />
            <button
                id="DocumentMenu_Save"
                tag="Document"
                label="Save"
                imageMso="FileSave"
                getEnabled="CustomUI.Button_getEnabled"
                onAction="CustomUI.Button_onAction" />
            <button
                id="DocumentMenu_Close"
                tag="Document"
                label="Close"
                imageMso="FileClose"
                getEnabled="CustomUI.Button_getEnabled"
                onAction="CustomUI.Button_onAction" />
          </menu>
        </group>
      </tab>
    </tabs>
  </ribbon>
</customUI> 
```

**在玩了几个小时试图弄清楚发生了什么之后**更新，结果我的工作簿被损坏了一些。**如果我把它放到一个新的工作簿中，代码就可以正常工作。**

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T01:35:56.513

1.  centerVertically 不是有效属性。请参考此[链接](http://msdn.microsoft.com/en-us/library/dd921026%28v=office.12%29.aspx)

2.  getEnabled="CustomUI.Button_getEnabled" & onAction="CustomUI.Button_onAction"
    避免**句号。**以回调函数的名义，因为我们不能定义像 CustomUI.Button_getEnabled 这样的子/函数。

3 当为按钮使用getEnabled 属性时，当应用程序需要确定按钮的启用状态时，将调用一个回调函数。

[示例代码 - 功能区的 getEnabled](http://social.msdn.microsoft.com/Forums/en-US/accessdev/thread/220815a2-0ccf-4ee3-b6e4-f2a33e5563df/)**

# ruby-on-rails - Rspec：如何在控制器规范中分配实例变量

> ID：16005281
> 
> 赞同：45
> 
> 时间：2013-04-14T22:49:59.263
> 
> 标签：ruby-on-rails, rspec

```
class TestController < AplicationController
  #....

  private

  def some_method
    unless @my_variable.nil?
      #...
      return true
    end
  end
end 
```

我想`some_method`直接在控制器规范中测试：

```
require 'spec_helper'

describe TestController do
  it "test some_method"
    phone = Phone.new(...)
    controller.assign(:my_variable,phone) #does not work
    controller.send(:some_method).should be_true
  end
end 
```

如何从控制器规范设置`TestController`实例变量？`@my_variable`

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2013-04-15T00:31:40.350

在控制器中测试私有方法时`send`，我倾向于使用[匿名控制器](https://www.relishapp.com/rspec/rspec-rails/docs/controller-specs/anonymous-controller)，因为不想直接调用私有方法，而是私有方法的接口（或者，在下面的测试中，有效地存根该接口）。所以，在你的情况下，也许是这样的：

```
require 'spec_helper'

describe TestController do
  controller do
    def test_some_method
      some_method
    end
  end

  describe "a phone test with some_method" do

    subject { controller.test_some_method }

    context "when my_variable is not nil" do
      before { controller.instance_variable_set(:@my_variable, Phone.new(...)) }
      it { should be_true }
    end

    context "when my_variable is nil" do
      before { controller.instance_variable_set(:@my_variable, nil) } 
      it { should_not be_true } # or should be_false or whatever
    end     
  end
end 
```

[在这个 StackOverflow Q&A](https://stackoverflow.com/q/4271696/567863)中，关于直接测试私有方法的问题有一些很好的讨论，这让我倾向于使用匿名控制器，但你的意见可能不同。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-11-22T18:17:21.687

`instance_eval`是一种相对干净的方法来实现这一点：

```
describe TestController do
  it "test some_method" do
    phone = Phone.new(...)
    controller.instance_eval do
      @my_variable = phone
    end
    controller.send(:some_method).should be_true
  end
end 
```

在这种情况下，使用`do...end`on`instance_eval`是多余的，这三行可以缩短为：

```
controller.instance_eval {@my_variable = phone} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-15T00:05:46.880

我不认为你想从你的规范控制器访问一个实例变量，因为规范应该测试行为，但你总是可以存根私有方法。在你的情况下，它应该是这样的（在这个例子中它没有多大意义）：

```
describe TestController do
  it "test some_method"
    phone = Phone.new(...)
    controller.stub(:some_method).and_return(true)
    controller.send(:some_method).should be_true
  end
end 
```

如果这不是您要查找的内容，请查看：[如何设置方法测试中使用的私有实例变量？](https://stackoverflow.com/questions/9038483/how-to-set-private-instance-variable-used-within-a-method-test)

# mysql - 是否可以使用正则表达式在 MySQL 中强制执行数据检查

> ID：16005283
> 
> 赞同：10
> 
> 时间：2013-04-14T22:50:06.470
> 
> 标签：mysql, regex, triggers, typechecking, enforcement

假设我有一个名为电话号码的属性，并且我想对该字段的条目强制执行某些有效性。我可以为此目的使用正则表达式吗，因为正则表达式在定义约束方面非常灵活。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-15T03:07:08.443

是的你可以。MySQL 支持正则表达式 ( [http://dev.mysql.com/doc/refman/5.6/en/regexp.html](http://dev.mysql.com/doc/refman/5.6/en/regexp.html) )，对于数据验证，您应该使用触发器，因为 MySQL 不支持 CHECK 约束（您可以随时移至 PostgreSQL作为备选：）。注意！请注意，即使 MySQL 确实具有 CHECK 约束构造，不幸的是 MySQL（到目前为止 5.6）并未根据检查约束验证数据。根据[http://dev.mysql.com/doc/refman/5.6/en/create-table.html](http://dev.mysql.com/doc/refman/5.6/en/create-table.html)：“CHECK 子句被解析，但被所有存储引擎忽略。”

您可以为列**phone**添加检查约束：

```
CREATE TABLE data (
  phone varchar(100)
);

DELIMITER $$
CREATE TRIGGER trig_phone_check BEFORE INSERT ON data
FOR EACH ROW 
BEGIN 
IF (NEW.phone REGEXP '^(\\+?[0-9]{1,4}-)?[0-9]{3,10}$' ) = 0 THEN 
  SIGNAL SQLSTATE '12345'
     SET MESSAGE_TEXT = 'Wroooong!!!';
END IF; 
END$$
DELIMITER ;

INSERT INTO data VALUES ('+64-221221442'); -- should be OK
INSERT INTO data VALUES ('+64-22122 WRONG 1442'); -- will fail with the error: #1644 - Wroooong!!! 
```

但是，您不应仅依靠 MySQL（在您的情况下为数据层）进行数据验证。应在应用程序的所有级别上验证数据。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2021-02-08T16:59:42.470

MySQL 8.0.16 (2019-04-25) 和 MariaDB 10.2.1 (2016-04-18) 现在不仅解析 CHECK 约束，还强制执行它。

MySQL：[https ://dev.mysql.com/doc/refman/8.0/en/create-table-check-constraints.html](https://dev.mysql.com/doc/refman/8.0/en/create-table-check-constraints.html)

MariaDB：[https ://mariadb.com/kb/en/constraint/](https://mariadb.com/kb/en/constraint/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-06-27T02:42:18.193

实际上，我们可以在 MySQL 的检查约束中设置正则表达式。例如。，：

```
create table fk 
  ( 
    empid int not null unique, 
    age int check(age between 18 and 60), 
    email varchar(20) default 'N/A', 
    secondary_email varchar(20) check(secondary_email RLIKE'^[a-zA-Z]@[a-zA-Z0-9]\.[a-z,A-Z]{2,4}'), 
    deptid int check(deptid in(10,20,30)) 
  ) 
; 
```

此 INSERT 查询将起作用：插入 fk 值(1,19,'a@a.com','a@b.com', 30);

此 INSERT 查询将不起作用：插入 fk values(2,19,'a@a.com','a@bc.com', 30);

# php - 尝试将 CSV 文件上传到谷歌电子表格时获取重复文件

> ID：16005289
> 
> 赞同：0
> 
> 时间：2013-04-14T22:50:52.080
> 
> 标签：php, google-drive-api

我已经应用了文件插入代码，即将 csv 文件上传到谷歌驱动器。一切正常，但我得到的是重复的文件，而不是一次得到一个。我必须一次上传两个不同的文件，但我得到了 4 个文件，在这种情况下需要帮助

这是 google.php 文件，其中包含“Google_Client.php”、“Google_DriveService.php”和文件“insert.php”，用于插入包含函数 insertFile($service, $title, $description, $parentId , $mimeType, $文件名)

```
<?php 
require_once 'google-api-php-client/src/Google_Client.php';
require_once 'google-api-php-client/src/contrib/Google_DriveService.php';
require 'insert.php';
session_start();

$title = 'Total Likes/Reblogs';
$description = 'Total Likes/Reblogs';

$title1 = 'Total Likes/Reblogs per post';
$description1 = 'Total Likes/Reblogs per post';

$parentId = ''; 
$mimeType = 'text/csv'; 
$filename = 'total.csv';
$fileNamePerPost = 'totalPerPost.csv';

$client = new Google_Client();
$client->setApplicationName("Google+ PHP Starter Application");
$service = new Google_DriveService($client);

if (isset($_REQUEST['logout'])) {
  unset($_SESSION['access_token']);
}

if (isset($_GET['code'])) {
  $client->authenticate($_GET['code']);
  $_SESSION['access_token'] = $client->getAccessToken();
  header('Location: http://' . $_SERVER['HTTP_HOST'] . $_SERVER['PHP_SELF']);
}

if (isset($_SESSION['access_token'])) {
  $client->setAccessToken($_SESSION['access_token']);
}

if ($client->getAccessToken()) {

    insertFile($service, $title, $description, $parentId, $mimeType, $filename);
    insertFile($service, $title1, $description1, $parentId, $mimeType, $fileNamePerPost);

} else {
  $state = mt_rand();
  $client->setState($state);
  echo $_SESSION['state'] = $state;

  $authUrl = $client->createAuthUrl();
  print "<a class='login' href='$authUrl'>Connect Me!</a>";
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T10:05:58.727

处理 OAuth 2.0 回调后，您需要停止执行。`header(...)`不会停止脚本并插入 2 个文件。第一次执行完成后，重定向会再次插入相同的文件。

# r - 如何在 R 中创建如下所示的矩阵

> ID：16005291
> 
> 赞同：2
> 
> 时间：2013-04-14T22:51:03.070
> 
> 标签：r, matrix

我正在尝试从 R 中的给定向量创建一个矩阵，但我不知道如何以简单的方式实现它。我在下面给出一个例子。矩阵是使用“cbind”函数制作的。

给定 x 为

```
[1,] 1
[2,] 3
[3,] 4 
```

如何用简单的方法创建下面的矩阵？

```
 [,1] [,2] [,3] [,4] [,5] [,6]
[1,]    1    0    0    0    0    0
[2,]    3    1    0    0    0    0
[3,]    4    3    1    0    0    0
[4,]    0    4    3    1    0    0
[5,]    0    0    4    3    1    0
[6,]    0    0    0    4    3    1
[7,]    0    0    0    0    4    3
[8,]    0    0    0    0    0    4 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T02:26:18.590

使用`append`和`sapply`

```
sapply(0:5, append, x = rep(0,5), values = c(1,3,4))

#      [,1] [,2] [,3] [,4] [,5] [,6]
# [1,]    1    0    0    0    0    0
# [2,]    3    1    0    0    0    0
# [3,]    4    3    1    0    0    0
# [4,]    0    4    3    1    0    0
# [5,]    0    0    4    3    1    0
# [6,]    0    0    0    4    3    1
# [7,]    0    0    0    0    4    3
# [8,]    0    0    0    0    0    4 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-14T23:21:51.680

```
matrix(c(1,3,4,rep(0,6)),ncol=6,nrow=8) 
```

你会得到一个警告，但正确的矩阵。如果您不喜欢该警告，请使用 suppressWarnings：

```
suppressWarnings(matrix(c(1,3,4,rep(0,6)),ncol=6,nrow=8)) 
```

当然，如果您试图将其抽象为更一般的情况，请小心使用该功能。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-15T02:33:59.083

这个方法很直观：

```
x <- c(1,3,4)
n <- 6
m <- matrix(0,ncol=n,nrow=n+length(x)-1)
diag(m) <- 1
diag(m[-1,]) <- 3
diag(m[-c(1, 2),]) <- 4 
```

沿对角线分配可以很容易地自动化，例如使用“for”循环

```
for(i in seq_along(x)) diag(m[1:n + i - 1,]) <- x[i] 
```

两种方法都产生：

```
R> m
     [,1] [,2] [,3] [,4] [,5] [,6]
[1,]    1    0    0    0    0    0
[2,]    3    1    0    0    0    0
[3,]    4    3    1    0    0    0
[4,]    0    4    3    1    0    0
[5,]    0    0    4    3    1    0
[6,]    0    0    0    4    3    1
[7,]    0    0    0    0    4    3
[8,]    0    0    0    0    0    4 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-14T23:20:12.813

这行得通。（**编辑**：没有投票，也许太电报了？）这个想法是创建一个具有适当维度的全零矩阵，然后使用行/列算术（使用`row()`and`col()`函数）在元素中填充所需的`row-column`值介于 0 和 2 之间（即对角线和前两个较低的非对角线）。这确实依赖于 R 中矩阵的主要列结构...

```
x <- c(1,3,4)
n <- 6
m <- matrix(0,ncol=n,nrow=n+length(x)-1)
betw <- function(x,a,b) x>=a & x<= b
m[betw(row(m)-col(m),0,2)] <- x 
```

# java - tcp 多线程服务器 java

> ID：16005292
> 
> 赞同：1
> 
> 时间：2013-04-14T22:51:03.000
> 
> 标签：java, tcp

我试图创建多线程服务器，它将接收来自不同客户端的消息，然后发回消息。我正在使用执行服务器来管理线程的创建。但我不确定我是否做得对，我以前没有使用过执行人服务吗？我对这条线 `executor.execute(new Handler(client));`处理程序有问题是抽象的，无法初始化？如何解决？执行服务会解决绑定端口的问题吗？它会像客户的请求队列一样吗？提前谢谢

```
package serverx;
import java.io.IOException;
import java.net.ServerSocket;
import java.net.Socket;
import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;
import java.util.logging.Handler;

public class ServerX {

  public static void main(String [] args){

    ExecutorService executor = Executors.newFixedThreadPool(30);

    ServerSocket server;
    try{

        server= new ServerSocket(5555);
        System.out.println ("Server started!");

        while(true) {
            try{
                Socket client = server.accept();

                //Thread t= new Thread (new Handler(client));
                //t.start();
                executor.execute(new Handler(client));    
            }
            catch (IOException e) {
                e.printStackTrace();
            }
        }

    }catch (IOException el){
        el.printStackTrace();
    }

  }
} 
```

处理程序：

```
public class Handler implements Runnable{

        private Socket client;

        public Handler(Socket client){
            this.client=client;}
        public void run(){
         //............   

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T23:01:33.643

您的处理程序不能是抽象的。将您的处理程序类设置为**内部**并在 while 循环之外定义您的客户端套接字。

```
Socket client;
while(true) {
try{
client = server.accept();
executor.execute(new Handler(client));
} 
```

我想补充更多关于你的问题；

ExecutorService 非常擅长控制线程数。如果“30”不是您的要求，您也可以像这样定义线程数。：

```
 int poolSize = 50 * Runtime.getRuntime().availableProcessors();
 ExecutorService tasks = Executors.newFixedThreadPool(poolSize); 
```

在多线程服务器中，每次客户端连接时，服务器都会创建一个新线程，并且该线程用于该客户端的工作。这就是为什么您将此线程定义为内部类并实现可运行接口的原因。

# java - 在单词列表中查找回文

> ID：16005295
> 
> 赞同：1
> 
> 时间：2013-04-14T22:51:10.190
> 
> 标签：java

我正在开发一个 Java 程序，用于查找嵌入在单词列表文件中的回文列表。我正在介绍 Java 类，因此将不胜感激任何形式的帮助或指导！

这是我到目前为止的代码：

```
import java.util.Scanner;
import java.io.File;

class Palindromes {

    public static void main(String[] args) throws Exception {
        String pathname = "/users/abrick/resources/american-english-insane";
        File dictionary = new File(pathname);
        Scanner reader = new Scanner(dictionary);
        while (reader.hasNext()) {
            String word = reader.nextLine();
            for (int i = 0; i > word.length(); i++) {
                if (word.charAt(word.indexOf(i) == word.charAt(word.indexOf(i)) - 1) {
                    System.out.println(word);
                }
            }
        }
    }
} 
```

我正在导入的列表中有 3 个单词是 7 个字母或更长。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T22:59:34.150

我假设您正在阅读字符串。用于`string.toCharArray()`将每个字符串转换为 char[]。使用 for 循环遍历字符数组，如下所示：在迭代 1 中，如果第一个字符等于最后一个字符，则继续下一次迭代，否则返回 false。在迭代 2 中，如果第二个字符等于倒数第二个字符，则继续下一次迭代，否则返回 false。以此类推，直到到达字符串的中间，此时返回 true。小心一个接一个的错误；有些字符串的长度是偶数，有些字符串的长度是奇数。

如果您的回文检查器不区分大小写，则用于`string.toLowerCase().toCharArray()`预处理字符数组。

您可以在 for 循环中使用`string.charAt(i)`而不是；`string.toCharArray()`在这种情况下，如果回文检查器不区分大小写，则使用`string = string.toLowerCase()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T23:02:35.027

让我们把问题分解一下：最后，您正在检查单词的反转是否等于单词。我将假设您将所有单词存储在一个名为`wordArray[]`.

我有一些代码用于获取单词的反义词（从[此处](http://www.wikihow.com/Reverse-the-String-in-Java)复制）：

```
public String reverse(String str) {
  if ((null == str) || (str.length() <= 1)) {
    return str;
  }
  return new StringBuffer(str).reverse().toString();
} 
```

所以，现在我们只需要在每个单词上都调用它。所以：

```
for(int count = 0; count<wordArray.length;count++) {
  String currentWord = wordArray[count];
  if(currentWord.equals(reverse(currentWord)) {
    //it's a palendrome, do something
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T23:03:10.247

你有几种方法可以解决这个问题。

如果出现以下情况，则将单词视为回文：

*   它可以向后和向前读取相同的方式。
*   第一个元素与最后一个元素相同，直到我们到达中间。
*   字的一半与另一半相同，颠倒过来。
*   长度为 1 的单词通常是回文。

最终，您的方法并没有做太多。事实上，您根本没有进行任何验证 - 如果第一个和最后一个字符匹配，您只会打印单词。

这是一个建议：让我们阅读字符串的每一端，看看它是否是回文。我们必须考虑它可能为空或长度为 1 的情况。我们还希望消除字符串中的任何空白，因为这可能会导致验证错误 - 我们[`replaceAll("\\s", "")`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29)用来解决这个问题。

```
 public boolean isPalindrome(String theString) {
    if(theString.length() == 0) {
        throw new IllegalStateException("I wouldn't expect a word to be zero-length");
    }
    if(theString.length() == 1) {
        return true;
    } else {
        char[] wordArr = theString.replaceAll("\\s", "").toLowerCase().toCharArray();
        for(int i = 0, j = wordArr.length - 1; i < wordArr.length / 2; i++, j--) {
            if(wordArr[i] != wordArr[j]) {
                return false;
            }
        }
        return true;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-14T22:58:48.817

由于这是家庭作业，我不会为您提供代码。

当我编码时，我做的第一件事就是退后一步问自己，

“我想让电脑做什么，而我自己会做什么？”

好的，所以你有这个 huuuuge 字符串。可能是这样的：“lkasjdfkajsdf adda aksdjfkasdjf ghhg kajsdfkajsdf oopoo”

ETC..

字符串的长度要么是奇数，要么是偶数。所以，首先，检查一下。

奇数/偶数将用于计算要读入多少个字母。

如果单词是奇数，则读入 ((length-1)/2) 个字符。

如果偶数 (length/2) 个字符。

然后，将这些字符与最后一个字符进行比较。请注意，对于奇数长度的字符串，您需要跳过中间字符。而不是你上面的检查第一个和第二个，然后是第二个和第三个，然后是第三个和第四个字符，从前面和后面向内检查，就像这样。

```
 while (reader.hasNext()) {
        String word = reader.nextLine();
          boolean checker = true;

        for (int i = 0; i < word.length(); i++) {
              if(word.length()<2){return;}
            if (word.charAt(i) != word.charAt(word.length()-i)  {
               checker = false;
            }

        }
        if(checker == true)
          {System.out.println(word);}
        } 
```

# json - 为什么 Mongob shell 允许不带引号的 JSON 文档输入？

> ID：16005297
> 
> 赞同：0
> 
> 时间：2013-04-14T22:51:45.410
> 
> 标签：json, mongodb

我正在自学 MongoDB，发现我可以在不带引号的情况下在 shell 中输入 JSON。这只是为了方便还是有我不知道的 JSON 标准？

允许在 MONGODB 外壳中

```
{ 
    A:2
} 
```

*.* .find() 确实返回了一个有效的 JSON 文档 `{ "A":"2" }`

编辑从 shell 输入的正确返回将是`{ "A":2 }`

JSON 有效

```
{
    "A": "1"
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T22:55:23.583

虽然 JSON 确实需要在对象键周围加上引号，但 JavaScript 本身不需要。MongoDB shell 使用 JavaScript 而不是纯 JSON。

# java - 我无法将夹具导入我的健身页面

> ID：16005299
> 
> 赞同：1
> 
> 时间：2013-04-14T22:52:24.477
> 
> 标签：java, fitnesse, acceptance-testing

我想开始使用 Fitnesse 测试我的 Java 应用程序，但一开始我遇到了一个大问题。

我测试我非常简单的课程的健身页面是：

```
!contents -R2 -g -p -f -h
!define TEST_SYSTEM {slim}
!path /home/user/NetBeansProjects/dotestow/build/classes/dotestow/

!|dodawanie|
|l1|l2|add?|
|10|2|12|
|10|35|45|
|60|4|33| 
```

我的类只是 NetBeans 创建的普通 Java 类，代码如下：

```
package dotestow;

public class Dotestow {

    private int l1, l2;

    public void setL1(int l1) {this.l1 = l1;}
    public void setL2(int l2) {this.l2 = l2;}

    public int add()
    {
      return l1+l2;
    }
} 
```

当我点击测试时，它只显示：

```
 Exception in thread "main" java.lang.NoClassDefFoundError: fitnesse/slim/SlimService
Caused by: java.lang.ClassNotFoundException: fitnesse.slim.SlimService
at java.net.URLClassLoader$1.run(URLClassLoader.java:217)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294)
at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
Could not find the main class: fitnesse.slim.SlimService. Program will exit. 
```

我究竟做错了什么？？

@@编辑

当我跑

```
java Dotestow 
```

在我的 /Dotestow/build/classes 目录中，我得到了输出：

```
Exception in thread "main" java.lang.NoClassDefFoundError: Dotestow (wrong name:      dotestow/Dotestow)
at java.lang.ClassLoader.defineClass1(Native Method)
at java.lang.ClassLoader.defineClass(ClassLoader.java:634)
at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)
at java.net.URLClassLoader.defineClass(URLClassLoader.java:277)
at java.net.URLClassLoader.access$000(URLClassLoader.java:73)
at java.net.URLClassLoader$1.run(URLClassLoader.java:212)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294)
at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
Could not find the main class: Dotestow. Program will exit. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T23:09:47.650

**答案已更新**

看起来`FitNesse.jar`类路径中缺少或 JRE 与 FitNesse jar 版本不匹配。请检查是否`Fitnesse.jar`已添加到 netbeans 中的类路径。

问候，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-29T21:51:46.540

使用显式添加`fitnesse.jar`到您的类路径`!path`，提供 .jar 的完整绝对路径

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-13T19:01:53.873

改变这个

`!path /home/user/NetBeansProjects/dotestow/build/classes/dotestow/`

为了这

`!path /home/user/NetBeansProjects/dotestow/build/classes/ |Import| |dotestow|`

**或者**

删除（从你的班级）

> 包装 dotestow;

并使用**javac 编译**：D

# php - SQL Server 存储过程在 PHP 中不起作用

> ID：16005306
> 
> 赞同：0
> 
> 时间：2013-04-14T22:53:25.747
> 
> 标签：php, sql-server, stored-procedures

我在让 SQL Server 存储过程使用 PHP 工作时遇到问题。我的代码如下。存储过程期望将一个整数传递给它。显示的消息是“存储过程错误”。这表明连接正常。我不确定出了什么问题。有人可以帮我吗？谢谢。

```
$db_connection = sqlsrv_connect($servername, $connectOpts);

if($db_connection === false) {
     echo ("Error connecting to the database.");
    exit;
}

$sp_command = "EXEC usp_testsp @valint=?";
$sp_vals = array( array("3",    SQLSRV_PARAM_IN));
$sp_execute = sqlsrv_query($db_connection, $sp_command, $sp_vals);

if($sp_execute === false) {echo('Stored procedure error');}
else {echo('Success');}
sqlsrv_close($db_connection); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T22:56:40.730

我看不出你的代码有什么问题，所以我认为你的问题可能出在你的数据库本身。我能想到两种可能。

1.  您的存储过程编写不正确。如果是这种情况，您应该在此处发布存储过程，以便我们查看。
2.  您的存储过程安全设置不正确。您需要在 SQL Server Management Studio 中设置安全设置。顺便说一句，我不记得设置安全设置的确切路径，但它类似于：右键单击 usp_testsp - 属性 - 安全。然后使用数据库登录信息设置存储过程。

# c# - 获取 C# 内部类中数组属性的长度，或其他有效的迭代方法？

> ID：16005311
> 
> 赞同：0
> 
> 时间：2013-04-14T22:54:21.437
> 
> 标签：c#, .net, scope, enumerable, class-visibility

我有一组由[json2charp](http://json2csharp.com/) Web 实用程序从 REST 调用产生的 JSON 响应生成的 C# 类。我使用这些类将未来的 JSON 响应反序列化到这些类中。一切都很好。其中一个内部类具有一个数组属性。我尝试使用数组的**Length属性在***for 循环*中使用该属性，但 Length 属性在当前范围内不可用。我猜这是因为它是一个内部类？

 **为了解决这个问题，我添加了一个名为**CountBreeds**的公共属性，它只返回数组 Length。这很好用。但是我想知道是否有一种方法可以获取内部类的数组属性的长度，而不必为了公开数组的长度属性而创建属性？如果没有，有没有办法在不向类添加 IEnumerable 支持的情况下迭代数组？

我知道我可以删除“内部”说明符，但如果可以的话，我想保留它。下面的代码片段：

```
// The internal class I want to iterate.
internal class Breeds
{

    [JsonProperty("breed")]
    public Breed[] Breed { get; set; }

    [JsonProperty("@animal")]
    public string Animal { get; set; }

    // This property was added to facilitate for loops-that iterate the
    //  entire array, since the Length propery of the array property
    //  can not be accessed.
    public int CountBreeds
    {
        get
        {
            return Breed.Length;
        }
    }
} // internal class Breeds

// Code that iterates the above class.

// >>>> This doesn't work since the Breeds Length property
//  is unavailable in this context.
//
// Add the breeds to the list we return.
for (int i = 0; i < jsonPF.Petfinder.Breeds.Length; i++)
    listRet.Add(jsonPF.Petfinder.Breeds.Breed[i].T);

// >>>> This *does* work because I added manually the CountBreeds
//  property (not auto-generated by json2csharp).
// Add the breeds to the list we return.
for (int i = 0; i < jsonPF.Petfinder.Breeds.CountBreeds; i++)
    listRet.Add(jsonPF.Petfinder.Breeds.Breed[i].T); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T22:59:11.403

您不是在询问数组的长度，而是询问 Breeds 类中不存在的 Length 属性。试试这个...

```
for (int i = 0; i < jsonPF.Petfinder.Breeds.Breed.Length; i++) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T22:59:14.163

长度应该是可见的。Length 是 Array 上的公共属性，因此它与内部类无关。**

# sql - 如何对关系数据库中的对象进行建模和查询？

> ID：16005314
> 
> 赞同：2
> 
> 时间：2013-04-14T22:54:58.843
> 
> 标签：sql, performance, object-relational-model

我有一个复杂的字典数据库方案。每个对象（本质上是一个翻译）都与此类似：

```
Entry {
   keyword;
   examples;
   tags;
   Translations;
} 
```

和

```
Translation {
    text;
    tags;
    examples;
} 
```

和

```
 Example {
    text;
    translation;
    phonetic_script;
 } 
```

即标签（即语法）可以属于关键字本身，也可以属于翻译（外语的语法），类似的例子可以属于翻译本身（即解释外语）或条目中的文本。我最终得到了这种关系设计：

```
entries(id,keyword,)
tags(tag)
examples(id,text,...)
entrytags(entry_id,tag)
entryexamples(entry_id,example_id)
translations(id,belongs_to_entry,...)
translationtags(transl_id, tag)
translationexamples(transl_id,example_id) 
```

我的主要任务是查询这个数据库。假设我搜索“foo”，我目前的处理方式是：

```
query all entries with foo, get ids A
foreach id in A
   query all examples belonging to id
   query all tags belonging to id
   query all translations belonging to A, store their ids in B
   foreach tr_id in B
       query all tags belonging to tr_id
       query all examples belonging to tr_id 
```

重建我的对象。这对我来说看起来很麻烦，而且很慢。我看不出如何通过使用连接或其他方式显着改善这一点。我很难将这些对象建模为数据库中的关系。这是一个合适的设计吗？

我怎样才能更有效地提高查询时间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T04:44:01.853

在循环中调用的每个查询至少需要一定的基本持续时间才能执行，即使对于微不足道的查询也是如此。许多环境因素会影响这个持续时间，但现在让我们假设它是 10 毫秒。如果第一个查询匹配 100 个条目，那么至少有 301 个查询被调用，每个查询需要 10 毫秒，总共需要 3 秒。循环迭代的数量会发生变化，这可能会导致性能的显着变化。

使用连接重构查询将创建更复杂的查询，但被调用的查询总数可以减少到固定数量，在下面的查询中为 4。现在假设每个查询需要 50 毫秒来执行，因为它更复杂，总持续时间变为 200 毫秒，比 3000 毫秒大幅减少。

下面显示的 4 个查询应该接近达到预期的结果。还有其他编写查询的方法，例如使用子查询或在 FROM 子句中包含表，但这些显示了如何使用 JOIN 来完成。条件`entries.keyword = 'foo'`用于表示原始查询中选择条目的条件。

值得注意的是，如果计算`foo`条件`entries`非常昂贵，则可能需要其他优化来进一步提高性能。在这些示例中，条件是一个简单的比较，可以快速在索引中查找，但使用`LIKE`可能需要全表扫描的条件可能不适用于这些查询。

以下查询选择与原始查询匹配的所有示例。原始查询中的条件表示为列`WHERE`上的子句`entries.keyword`。

```
SELECT entries.id, examples.text
  FROM entries
 INNER JOIN entryexamples
    ON (entries.id = entryexamples.entry_id)
 INNER JOIN examples
    ON (entryexamples.example_id = examples.id)
 WHERE entries.keyword = 'foo'; 
```

此查询选择与原始查询匹配的标签。在这种情况下只使用了两个连接，因为`entrytags.tag`列是需要的，并且连接`tags`只会提供相同的值。

```
SELECT entries.id, entrytags.tag
  FROM entries
 INNER JOIN entrytags
    ON (entries.id = entrytags.entry_id)
 WHERE entries.keyword = 'foo''; 
```

此查询选择原始查询的翻译标签。这类似于前面的查询来选择，`entrytags`但是这里使用了另一层连接来进行翻译。

```
SELECT entries.id, translationtags.tag
  FROM entries
 INNER JOIN translations
    ON (entries.id = translations.belongs_to_entry)
 INNER JOIN translationtags
    ON (translations.id = translationtags.transl_id)
 WHERE entries.keyword = 'foo'; 
```

最终查询与第一个查询相同，`examples`但还包括附加连接。连接越来越多，但总的来说应该比循环执行单个查询要好得多。

```
SELECT entries.id, examples.text
  FROM entries
 INNER JOIN translations
    ON (entries.id = translations.belongs_to_entry)
 INNER JOIN translationexamples
    ON (translations.id = translationexamples.transl_id)
 INNER JOIN examples
    ON (translationexamples.example_id = examples.id)
 WHERE entries.keyword = 'foo'; 
```

# php - MySQL 数据库同步

> ID：16005317
> 
> 赞同：0
> 
> 时间：2013-04-14T22:55:39.847
> 
> 标签：php, mysql, import

我有 2 个具有相似数据的 MySQL 数据库。不同之处在于，一个有一个包含大约 2000 个条目的电子邮件列，另一个有一个没有条目的电子邮件列。是否可以进行某种批量操作将 2000 个电子邮件地址从数据库 1 复制到数据库 2？

我正在寻找一种使用 PHP 执行此操作的方法，或者更好的是，一种通过 phpMyAdmin 运行的包罗万象的查询。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T22:57:12.197

像这样的东西：

```
UPDATE db1.tbl a SET a.email = b.email
JOIN db2.tbl b ON b.id = a.id 
```

# java - 从java中的.txt读取对象

> ID：16005318
> 
> 赞同：0
> 
> 时间：2013-04-14T22:55:42.767
> 
> 标签：java, file-io, inputstream, outputstream

我正在尝试写入和反对文件，然后从文件中读取对象并对其执行一些操作。该对象被很好地写入文件，但是当我尝试从文件中检索它时，我什么也没得到。我使用的代码如下：

```
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.ObjectInputStream;
import java.io.IOException;
import java.io.ObjectOutputStream;
import java.util.Date;

public class Driver 
{
    public static void main(String[] args) throws IOException, ClassNotFoundException 
    {
        FileOutputStream fos = new FileOutputStream("C:\\Users\\Russian\\Desktop\\file.txt");
        ObjectOutputStream oos = new ObjectOutputStream(fos);

        Person person = new Person("B1234","Roshane","Nolan","male","Spanish Town",new Date(),
                "B2134","B3214",150.0,5.11);

        oos.writeObject(person);

        oos.flush();
        oos.close();

        //READING FROM THE FILE

        FileInputStream fis = new FileInputStream("C:\\Users\\Russian\\Desktop\\file.txt");
        ObjectInputStream ois = new ObjectInputStream(fis);

        Person object = (Person) ois.readObject();
        System.out.println(object);

        ois.close();
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T23:01:21.927

我认为您必须通过 从 API doc [ObjectInputStream](http://docs.oracle.com/javase/7/docs/api/java/io/ObjectInputStream.html)`Person`实现[java.io.Serializable来序列化对象](http://docs.oracle.com/javase/7/docs/api/java/io/Serializable.html)

```
 ObjectInputStream is used to recover those objects previously serialized. 
```

下面的代码（主要功能与您的相同：

```
 public static void main(String[] args) throws IOException, ClassNotFoundException 
    {
        FileOutputStream fos = new FileOutputStream("src/main/resources/Test.txt");
        ObjectOutputStream oos = new ObjectOutputStream(fos);

        Person person = new Person("B1234","Roshane","Nolan","male","Spanish Town",new Date(),
                "B2134","B3214",150.0,5.11);

        oos.writeObject(person);

        oos.flush();
        oos.close();

        //READING FROM THE FILE

        FileInputStream fis = new FileInputStream("src/main/resources/Test.txt");
        ObjectInputStream ois = new ObjectInputStream(fis);

        Person object = (Person) ois.readObject();
        System.out.println(object.toString());

    } 
```

人员类

```
 import java.util.Date;

  public class Person implements java.io.Serializable{

String arg1,arg2,arg3,arg4,arg5,arg6,arg7;
Double d1,d2;
Date date1;
public Person(String string, String string2, String string3,
        String string4, String string5, Date date, String string6,
        String string7, double d, double e) {
    this.arg1=string;
    this.arg2=string2;
    this.arg3=string3;
    this.arg4=string4;
    this.arg5=string5;
    this.arg6=string6;
    this.arg7=string7;
    this.d1=d;
    this.d2=e;
    this.date1=date;

    // TODO Auto-generated constructor stub
}

@Override
public String toString()
{
    return "Person:"+this.arg1+":"+this.arg2+":"+this.arg3+":"+this.arg4+":"+this.arg5+":"+this.arg6+":"+this.arg7+":"+this.d1+":"+this.d2+":"+this.date1;
}

 } 
```

输出 ：

```
Person:B1234:Roshane:Nolan:male:Spanish Town:B2134:B3214:150.0:5.11:Sun Apr 14 23:11:27 CDT 2013 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T04:31:38.783

您应该指定“无”的含义。你得到：

*   null（这永远不会发生）
*   异常（例如，如果人员类或该类内部的字段未实现可序列化）
*   字符串“somepackage.Person@hashcodenumber”（在这种情况下，您需要在 Person 类中覆盖 toString()）
*   没有设置任何字段的 Person 对象（请参阅下面的答案）
*   任何其他字符串 - 检查 Person 类中的“toString”方法

您可以将 writeObject 和 readObject 添加到您的人员类。 [http://docs.oracle.com/javase/1.4.2/docs/api/java/io/ObjectInputStream.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/ObjectInputStream.html)

```
private void writeObject(ObjectOutputStream oos) 
{
    // default serialisation 
    oos.defaultWriteObject();

    // write custom fields
    oos.writeUTF(this.name);
}

private void readObject(ObjectInputStream ois) 
           throws ClassNotFoundException, IOException 
    {
    // default serialisation
    ois.defaultReadObject();

    // read custom fields
    this.name = ois.readUTF();
} 
```

# python - 使用描述符实现绑定方法

> ID：16005319
> 
> 赞同：2
> 
> 时间：2013-04-14T22:55:47.383
> 
> 标签：python, descriptor

我的问题与绑定方法对象有关，更具体地说，我试图模仿函数（本质上是描述符）存在的相同行为。

让我先在这里说明我对 class_instance.function() 工作原理的理解

```
Class D(object):
    def dfunc(self):
        ...

d=D()
d.dfunc() # will call D.__dict__['dfunc'].__get__(d,D)()

#gives a bound method which can be used directly
a=D.__dict__['dfunc'].__get__(d,D) 
a() #works as d.D() 
```

Python 是否调用`D.__dict__['dfunc'] (d)`, 以防何时`type(dfunc)`是函数且`type(d).__dict__['dfunc'].__get__(d, type(d))`x 是类实例？

现在来谈谈我如何尝试使用闭包创建绑定对象：

```
class E(object):
    def __get__(self,obj,cls):

        def returned(*args):
            print(obj.__dict__)
        return returned

class F(object):
    e=E()
    y=9

f=F()
f.fvar=9 #putting something in instances __dict__
a=f.e #will call the __get__ function of F and return a closure
a() #works and produces instance specific result -> {'fvar': 9}, just like a bound method 
```

现在的主要问题是，当我做`a=D.__dict__['dfunc'].__get__(d,D)`type(a) 时是绑定方法，但是当我实现它时`type(a)`是函数；有没有办法从用户定义的描述符返回绑定对象？

有没有更好的方法来实现像描述符这样的功能？如果我脑子里有一些根本不正确的东西，请纠正我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T23:07:38.870

如果你想返回一个方法，你可以从函数对象和传递给的参数一起创建一个`__get__`：

```
import types

class E(object):
    def __get__(self,obj,cls):

        def returned(*args):
            print(obj.__dict__)
        return types.MethodType(returned, obj, cls) 
```

但是，尚不完全清楚这会给您带来什么。如果只是返回一个函数已经有效，为什么需要它成为一个“真正的”方法？

# c++ - c++类继承，未定义引用'Class::Constructor()'

> ID：16005322
> 
> 赞同：11
> 
> 时间：2013-04-14T22:56:13.483
> 
> 标签：c++, class, inheritance

编辑：在底部发布了固定代码。感谢大家的帮助！

我只是在学习 c++ 并且在继承方面遇到了麻烦。我已经搜索和搜索并尝试了任何我能做的事情，但我无法在保留我希望它拥有的功能的同时编译这段代码。

我觉得我犯了一个愚蠢的错误，或者我只是错过了一些重要的概念，但如果有人可以看看它，我会非常感激！

如果我注释掉 StarSystem 构造函数中创建对象的 3 行，那么它会编译，所以我知道这与问题有关。

```
 #include <iostream> 
    #include <vector>
    #include <string>
    #include <stdlib.h>
    #include <time.h>

    using namespace std;

    class SystemBody
    {
        public:
            SystemBody();
            int systembodyindex;
            int starsystemindex;

            SystemBody(int systembodyindex, int starsystemindex)
            {
                cout << "StarSystem " << starsystemindex << ": creating empty SystemBody " << systembodyindex << endl;
            }
    };

    class Star : public SystemBody
    {
        public:
            Star();
            string startype;

            Star(int systembodyindex, int starsystemindex)
            {
                cout << "StarSystem " << starsystemindex << ": converting empty SystemBody into Star " << systembodyindex << endl;
            }
    };

    class Planet : public SystemBody
    {
        public:
            Planet();
            string planettype;

            Planet(int systembodyindex, int starsystemindex)
            {
                cout << "StarSystem " << starsystemindex << ": converting empty SystemBody into Planet " << systembodyindex << endl;
            }

    };

    class ExitNode : public SystemBody
    {
        public:
            ExitNode();
            vector<int> connectedindexlist;
            ExitNode(int systembodyindex, int starsystemindex)
            {
                cout << "StarSystem " << starsystemindex << ": converting empty SystemBody into Exit Node " << systembodyindex << endl;
            }

    };

    class StarSystem
    {
        public:
            StarSystem();
            int starsystemindex;
            vector<StarSystem> connectedlist;
            vector<Planet> planetlist;

            StarSystem(int index)
            {
                starsystemindex = index;
                cout << "--Creating StarSystem: " << starsystemindex << endl;
                int numberofbodies = (rand() % 4) + 2;
                    for ( int i = 0; i < numberofbodies; i +=1 )
                    {
                        if ( i == 0 )
                        {
                            Star body(i, starsystemindex);
                        }
                        else if ( i == numberofbodies )
                        {
                            ExitNode body(i, starsystemindex);
                        }
                        else
                        {
                            Planet body(i, starsystemindex);
                        }

                    }

            }

            void addConnection(StarSystem connectedstarsystem)
            {
                cout << "--StarSystem " << starsystemindex << ": Adding connection to StarSystem " << connectedstarsystem.starsystemindex << endl;
                connectedlist.push_back(connectedstarsystem);
            }

    };

    int main()
    {
        srand(time(0));
        StarSystem starsystem0(0);
        return 0;
    } 
```

编辑：

感谢大家的帮助！只需在此处发布固定代码，以防将来有人会发现这很有用。

```
#include <iostream> 
#include <vector>
#include <string>
#include <stdlib.h>
#include <time.h>

using namespace std;

class SystemBody
{
    public:
        int systembodyindex;
        int starsystemindex;
        SystemBody ( )
        {
            cout << "----SystemBody BEING CREATED WITH NO PARAMETERS" << endl;
        }
        SystemBody ( int bodyindex, int systemindex )
        {
            systembodyindex = bodyindex;
            starsystemindex = systemindex;
            cout << "----StarSystem " << starsystemindex << ": creating empty SystemBody " << systembodyindex << endl;
        }

};

class Star : public SystemBody
{
    public:
        Star ( int bodyindex, int systemindex ) : SystemBody ( bodyindex, systemindex )
        {
            cout << "----StarSystem " << starsystemindex << ": converting empty SystemBody into Star " << systembodyindex << endl;
        }
};

class Planet : public SystemBody
{
    public:
        Planet ( int bodyindex, int systemindex ) : SystemBody ( bodyindex, systemindex )
        {
            cout << "----StarSystem " << starsystemindex << ": converting empty SystemBody into Planet " << systembodyindex << endl;
        }
};

class ExitNode : public SystemBody
{
    public:
        ExitNode ( int bodyindex, int systemindex ) : SystemBody ( bodyindex, systemindex )
        {
            cout << "----StarSystem " << starsystemindex << ": converting empty SystemBody into ExitNode " << systembodyindex << endl;
        }
};

class StarSystem
{
    public:
        int starsystemindex;
        vector<StarSystem> connectedlist;
        vector<Planet> planetlist;

        StarSystem ( int index )
        {
            starsystemindex = index;
            cout << "--Creating StarSystem: " << starsystemindex << endl;
            int numberofbodies = (rand() % 4 ) + 2;
            for ( int i = 0; i <= numberofbodies; i +=1 )
            {
                if ( i == 0)
                {
                    Star body(i, starsystemindex);
                }
                else if ( i == numberofbodies )
                {
                    ExitNode body(i, starsystemindex);
                }
                else
                {
                    Planet body(i, starsystemindex);
                }
            }
        }
};

int main()
{

    srand(time(0));
    StarSystem starsystem0(0);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-14T23:00:33.770

也许只有我一个人，但这里的构造函数是一个尚未定义的简单声明：

```
class StarSystem
    {
        public:
            StarSystem(); // <--- Undefined! 
```

你声明了一个构造函数，但没有定义这个构造函数中实际发生的事情。

如果它是一个什么都不做的构造函数，做

```
StarSystem () {} // Defined.
// Nothing happens inside, but everything gets default-constructed! 
```

附带说明一下，在发布此类内容时，发布错误编号并添加注释或某种指示错误发生位置的指示符会有所帮助（因此我们可以在您的巨大代码块中看到它）。

**编辑：** 作为重要说明，如果您根本不使用该构造函数，只需将其删除。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-14T23:04:49.553

你认为因为你没有打电话，所以`SystemBody()`你不需要定义它。但是，您是在间接调用它。

**不要做**

```
SystemBody() {}; 
```

**按照建议。这不是你想要的。如果您不使用它，请将其完全删除。**

* * *

您的 Star 类继承自`SystemBody`. 这意味着当一个 new`Star`被构造时，构造函数`SystemBody`被调用。

这条线

```
Star(int systembodyindex, int starsystemindex)
    { 
```

实际上编译为

```
Star(int systembodyindex, int starsystemindex) :
    SystemBody()   // Here
    { 
```

`SystemBody`如果您自己不调用，编译器会调用默认构造函数。

* * *

如果您考虑一下，您需要`SystemBody`在创建新的`Star`. 你可以像这样明确地做到这一点

```
Star(int systembodyindex, int starsystemindex) :
    SystemBody(systembodyindex)   // Here
    { 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-14T23:00:54.717

您定义了许多默认构造函数，但没有实现它们。代替

```
StarSystem(); // <- it is OK if you implement this somewhere but you didn't 
```

写

```
StarSystem(){}
            ^^ this is empty implementation 
```

# php - 如何使用 Laravel 的 Eloquent ORM 为（可能）多态关系构建模型

> ID：16005324
> 
> 赞同：3
> 
> 时间：2013-04-14T22:56:31.240
> 
> 标签：php, database-schema, polymorphic-associations, laravel-4, eloquent

我有一个关于 Eloquent ORM 的问题——在这种情况下，特别是与 Laravel 4 一起使用。我用它来运行基本查询和关系没有问题，但我最近被这个有点独特的场景/模式难住了：

我有三张桌子。他们的结构目前是这样的：

```
post
    id - int
    post_type - enum(ARTICLE, QUOTE)
    user_id - int
    created_at - timestamp
    updated_at - timestamp

post_type_article
    id - int
    post_id - int
    title - varchar
    summary - varchar
    url - varchar

post_type_quote
    id - int
    post_id = int
    author = varchar
    quote = text 
```

最后，我想使用 Eloquent ORM 运行一个查询/函数，并获取所有帖子及其各自的数据，而不管 post_type 是什么。

我真的很想听听对此的一些反馈（我的关系，我的模型应该是什么）。据我了解，这可能是一种多态关系。这是/是我的模型，但我对此并不陌生，并且不确定这是否正确：

型号：Post.php：

```
<?php

class Post extends Eloquent {

    public function postType()
    {
        return $this->morphTo();
    }

} 
```

型号：PostTypeArticle.php：

```
<?php

class PostTypeArticle extends Eloquent {

    public $timestamps = FALSE;
    protected $table = 'post_type_article';

    public function post()
    {
        return $this->morphMany('Post', 'post_type');
    }
} 
```

模型：PostTypeQuote.php：

```
<?php

class PostTypeQuote extends Eloquent {

    public $timestamps = FALSE;
    protected  $table = 'post_type_quote';

    public function post()
    {
        return $this->morphMany('Post', 'post_type');
    }

} 
```

也许因为我使用 ENUM 作为外键我需要明确指定？无论如何，希望你能发现我的困惑并指出我正确的方向。感谢您在我掌握这一点时提供的高级帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-12T10:08:12.173

我会对此很勇敢，并将类型表压缩为一个：post_types：

**帖子**

```
 id - int (auto-increment)
    user_id - int (unsigned)
    created_at - timestamp
    updated_at - timestamp 
```

**post_types**

```
 id - int (auto-increment)
    type - int //or varchar
    post_id - int (unsigned)
    title - varchar
    summary- varchar
    url - varchar
    author - varchar
    quote - text 
```

使**post_types**表中的大部分字段为空（你的作业）

**Post.php**

```
<?php

  class Post extends Eloquent {

    public function postType()
    {
      return $this->hasOne('Posttype'); //or hasMany()
    }

  } 
```

**Posttype.php**

```
<?php

  class Posttype extends Eloquent {
    protected  $table = 'post_types';

    public function post()
    {
      return $this->belongsTo('Post'); 
    }

  } 
```

**获得结果**

```
$posts = Post::with('postType')->get(); //eager-loading 
```

**或者**

```
$post = Post::find(1)->postType; //One post 
```

**家庭作业**

1.  使用验证来确保您在数据库中需要的字段都在用户输入中
2.  决定在哪里运行**if 语句**以确定您是在处理**文章**还是**引用**

# php - 一次将多行插入MySQL

> ID：16005328
> 
> 赞同：0
> 
> 时间：2013-04-14T22:57:01.653
> 
> 标签：php, mysql, row

我正在尝试一次提交一个充满信息的表格，但找不到答案。向数据库提交一组信息没有问题，但我需要一次侮辱 1 到 50 个相同的值。这是一个例子：

我们正在记录单圈时间，因此我们需要能够在 Web 应用程序上填写表格，其中包含大量名称和事件时间。因此，我们需要一次添加大量 SQL 条目。

我试过只是复制和粘贴表单信息，但这会导致 phpmyadmin 中出现一组空白数据。

这是代码：

```
<?php

$host = "localhost";
$databasename = "pe_results";
$databaseusername = "root";
$databasepassword = "";

$conn = mysql_connect("$host", "$databaseusername", "$databasepassword"); 
mysql_select_db("$databasename", $conn); 

        if (isset($_POST['Name'])) { 
        $Name = $_POST['Name'];
        }
        if (isset($_POST['Short'])) { 
        $Short = $_POST['Short'];
        }
        if (isset($_POST['Med'])) { 
        $Med = $_POST['Med'];
        }
        if (isset($_POST['Long'])) { 
        $Long = $_POST['Long'];
        }
        if (isset($_POST['VLong'])) { 
        $VLong = $_POST['VLong'];
        }
        if (isset($_POST['Extreme'])) { 
        $Extreme = $_POST['Extreme'];
        }
        if (isset($_POST['LJump'])) { 
        $LJump = $_POST['LJump'];
        }
        if (isset($_POST['HJump'])) { 
        $HJump = $_POST['HJump'];
        }
        if (isset($_POST['Shotputt'])) { 
        $Shotputt = $_POST['Shotputt'];
        }
        if (isset($_POST['Discuss'])) { 
        $Discuss = $_POST['Discuss'];
        }
        if (isset($_POST['Javelin'])) { 
        $Javelin = $_POST['Javelin'];
        }
        if (isset($_POST['Date'])) { 
        $Date = $_POST['Date'];
        }
        if (isset($_POST['Year'])) { 
        $Year = $_POST['Year'];
        }

           $i = count($Name);

for ($i=0;$i<10;$i++) {
$n = $Name[$i];
$s = $Short[$i];
$me = $Med[$i];
$lng = $Long[$i];
$slng = $VLong[$i];
$ext = $Extreme[$i];
$ljump = $LJump[$i];
$hjump = $HJump[$i];
$shot = $Shotputt[$i];
$disc = $Discuss[$i];
$jav = $Javelin[$i];
$date = $Date[$i];
$year = $Year[$i];

//and so on with more variable...

$sql="INSERT INTO results_main (`Name`, `Short`, `Med`, `Long`, `Vlong`, `Extreme`, `LJump`, `HJump`, `Shotputt`, `Discuss`, `Javelin`, `Date`, `Year`)
            VALUES ('$n', '$s', '$me', '$lng', '$slng', '$ext', '$ljump', '$hjump', '$shot', '$disc', '$jav', '$date', '$year')";

}

    $result = mysql_query($sql) or die(mysql_error ());;
        if($result){
echo"<br/>Everythings been saved";
echo "<BR>";
echo "<a href='index.php'>Back to the main page</a>";
}

else {

echo $result = mysql_query($sql,$conn) or die (mysql_error ());
}

// close connection 
mysql_close($conn);
?> 
```

还可以在下面找到 HTML

```
<?php
// Create connection
$con=mysqli_connect("127.0.0.1","root","","pe_results");

// Check connection
if (mysqli_connect_errno($con))
  {
  echo "Uh oh, tell chris that " . mysqli_connect_error() . "NO DATA WILL BE SAVED";
  }
?>
    <a href="results.php"><div id="1" >Results</div></a>
    <a href="record.php"><div id="2">Record</div></a>
    <a href="overview.php"><div id="3">Overview</div></a>
    <div id="4">Blank</div>
   <form name="input_primary" action="process.php" method="post">

    <font color="#FFFFFF"><strong>Date:</strong></font><input name="Date" type="date" />

   <font color="#FFFFFF"><strong>Year:</strong></font><select name="Year">
        <option value="7">Year 7</option>
        <option value="8">Year 8</option>
        <option value="9">Year 9</option>
        <option value="10">Year 10</option>
        <option value="11">Year 11</option>
        <option value="12">Year 12</option>
        <option value="13">Year 13</option>
       </select>
       <input type="submit" value="Save results!" name="submit" />

<table width="200" border="1px solid black" id="maintab">
  <tr>
    <th scope="col">Name</th>
    <th scope="col">100m</th>
    <th scope="col">200m</th>
    <th scope="col">400m</th>
    <th scope="col">800m</th>
    <th scope="col">1500m</th>
    <th scope="col">Long Jump</th>
    <th scope="col">High Jump</th>
    <th scope="col">Shotputt</th>
    <th scope="col">Discus</th>
    <th scope="col">Javelin</th>
  </tr>
  <tr>
    <td>
        <input name="Name" type="text" />
    </td>
    <td> 
        <input name="Short" type="text" size="10px" />
    </td>
    <td>
         <input name="Med" type="text" size="10px" />
    </td>
    <td> 
        <input name="Long" type="text" size="10px" />
    </td>
    <td>
         <input name="VLong" type="text" size="10px" />
    </td>
    <td>
         <input name="Extreme" type="text" size="10px" />
    </td>
    <td>
         <input name="LJump" type="text" size="10px" />
    </td>
    <td>
         <input name="HJump" type="text" size="10px" />
    </td>
    <td>
         <input name="Shotputt" type="text" size="10px" />
    </td>
    <td>
         <input name="Discuss" type="text" size="10px" />
    </td>
    <td>
         <input name="Javelin" type="text" size="10px" />
    </td>
  </tr> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T23:13:10.740

如果我正确理解了您的问题，您想要做的是用`[]` So命名字段

`<select name="Year">`

变成

`<select name="Year[]">`

然后您将能够遍历提交的值，例如：

```
foreach($_POST['Year'] as $k=>$v){
 echo $v." - This is the value";
 echo $k." - This is the key";
} 
```

**编辑：**

```
(string)$insert;
if(is_array($_POST['Year'])){
    foreach($_POST['Year'] as $k=>$v){  
         $insert .= "(".$_POST['Name'][$k].", ".$_POST['Short'][$k].", ".$_POST['Med'][$k].", ".$_POST['Long'][$k].", ".$_POST['VLong'][$k].", ".$_POST['Extreme'][$k].", ".$_POST['LJump'][$k].", ".$_POST['HJump'][$k].", ".$_POST['Shotputt'][$k].", ".$_POST['Discuss'][$k].", ".$_POST['Javelin'][$k].", ".$_POST['Date'][$k].", ".$_POST['Year'][$k]."),"; 
    }
     $insert = substr_replace($insert ,0,-1);
}else{
    $insert .= "($_POST['Name'], $_POST['Short'], $_POST['Med'], $_POST['Long'], $_POST['VLong'], $_POST['Extreme'], $_POST['LJump'], $_POST['HJump'], $_POST['Shotputt'], $_POST['Discuss'], $_POST['Javelin'], $_POST['Date'], $_POST['Year'])"; 
}
$sql="INSERT INTO results_main 
(`Name`, `Short`, `Med`, `Long`, `VLong`, `Extreme`, `LJump`, `HJump`, `Shotputt`, `Discuss`, `Javelin`, `Date`, `Year`)
VALUES 
".$insert; 
```

这应该可以将所有内容都放入一个查询中，而不是对每一行进行多个查询

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T23:43:42.263

将括号 [] 添加到您的 html 表单中的所有名称（有意义的地方）。方括号 [] 表示元素被视为动态数组。

在您的**html-form**中，执行以下操作：

```
<form name="input_primary" action="process.php" method="post">

    <font color="#FFFFFF"><strong>Date:</strong></font><input name="Date" type="date" />
   <font color="#FFFFFF"><strong>Year:</strong></font><select name="Year">
        <option value="7">Year 7</option>
        <option value="8">Year 8</option>
        <option value="9">Year 9</option>
        <option value="10">Year 10</option>
        <option value="11">Year 11</option>
        <option value="12">Year 12</option>
        <option value="13">Year 13</option>
       </select>
       <input type="submit" value="Save results!" name="submit" />

<table width="200" border="1px solid black" id="maintab">
  <tr>
    <th scope="col">Name</th>
    <th scope="col">100m</th>
    <th scope="col">200m</th>
    <th scope="col">400m</th>
    <th scope="col">800m</th>
    <th scope="col">1500m</th>
    <th scope="col">Long Jump</th>
    <th scope="col">High Jump</th>
    <th scope="col">Shotputt</th>
    <th scope="col">Discus</th>
    <th scope="col">Javelin</th>
  </tr>
<?php
//Repeat element inside loop 10 times
for($i=0;$i<10;$i++) {
?>
  <tr>
    <td>
        <input name="Name[]" type="text" />
    </td>
    <td> 
        <input name="Short[]" type="text" size="10px" />
    </td>
    <td>
         <input name="Med[]" type="text" size="10px" />
    </td>
    <td> 
        <input name="Long[]" type="text" size="10px" />
    </td>
    <td>
         <input name="VLong[]" type="text" size="10px" />
    </td>
    <td>
         <input name="Extreme[]" type="text" size="10px" />
    </td>
    <td>
         <input name="LJump[]" type="text" size="10px" />
    </td>
    <td>
         <input name="HJump[]" type="text" size="10px" />
    </td>
    <td>
         <input name="Shotputt[]" type="text" size="10px" />
    </td>
    <td>
         <input name="Discuss[]" type="text" size="10px" />
    </td>
    <td>
         <input name="Javelin[]" type="text" size="10px" />
    </td>
  </tr>
<?php
}
?>
</table>
</form> 
```

在你的**PHP**代码中做这样的事情：

```
//Create initial query for sql-insert.
$sql="INSERT INTO results_main (`Name`, `Short`, `Med`, `Long`, `Vlong`, `Extreme`, `LJump`, `HJump`, `Shotputt`, `Discuss`, `Javelin`, `Date`, `Year`) VALUES ";

$date = $Date; //Do like this if date-element is only occur once (at top) (then no need for brackets)
$year = $Year; //Do like this if year-element is only occur once (at top) (then no need for brackets)

$cnt = count($Name);    
for ($i=0;$i<$cnt;$i++) {
    //Use mysql_escape_string to escape strings (when needed) BEFORE adding to the $sql.
    $n = $Name[$i];
    $s = $Short[$i];
    $me = $Med[$i];
    $lng = $Long[$i];
    $slng = $VLong[$i];
    $ext = $Extreme[$i];
    $ljump = $LJump[$i];
    $hjump = $HJump[$i];
    $shot = $Shotputt[$i];
    $disc = $Discuss[$i];
    $jav = $Javelin[$i];

    //Insert each row separated with a comma
    $sql .= "('$n', '$s', '$me', '$lng', '$slng', '$ext', '$ljump', '$hjump', '$shot', '$disc', '$jav', '$date', '$year'),";
}

$useQuery = substr($sql, 0, -1); //Delete last comma
$result = mysql_query($useQuery); //Do the actual insert 
```

然后当然，阅读 PDO 而不是使用 mysql_query 等。尽快这样做，因为 mysql_* 像这样的函数已被弃用，将来将被删除。PDO 是一个更好的选择，因为它是 oop，它更安全、更灵活。从这里开始... [http://www.php.net/manual/en/intro.pdo.php](http://www.php.net/manual/en/intro.pdo.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T21:52:44.683

跨多个数组存储数据是不安全的，因为它很容易出现故障并导致错误。而是将数据存储到一个关联数组中，如下所示：

```
$people = array();
$people[] = array('Name' => $name, 'Short' => $short ....); 
```

上面的代码创建和数组数组，内部数组是关联数组，因此您可以使用以下语法来获取第一人称的名称：

$people[0]['姓名'];

一切都在一起，如果没有为某些人设定某些价值观，它就不会渗透到其他人的记录中。

我看到你正在使用 POST 变量。上面的关联数组可以通过使用 json_encode 和 json_decode 轻松地通过 ajax 传递（如果这是你使用的，只是一个选项）。这有助于在您通过多种语言传递数据结构时保留数据结构。

最后，要插入大量记录，我建议使用 PDO 语句作为最简单和最干净的方法之一。在这里查看一个很棒的教程[http://net.tutsplus.com/tutorials/php/why-you-should-be-using-phps-pdo-for-database-access/](http://net.tutsplus.com/tutorials/php/why-you-should-be-using-phps-pdo-for-database-access/)

希望这有帮助，祝你好运！

# php - php curl 多错误处理程序

> ID：16005330
> 
> 赞同：5
> 
> 时间：2013-04-14T22:57:14.013
> 
> 标签：php, curl, error-handling, curl-multi

我想在我的错误处理程序中捕获 curl 错误和警告，以便它们不会被`echo`编辑给用户。为了证明所有错误都已被捕获，我将`$err_start`字符串添加到错误中。目前这里是我的代码的工作（但简化）片段（在浏览器中运行，而不是 cli）：

```
<?php
set_error_handler('handle_errors');
test_curl();
function handle_errors($error_num, $error_str, $error_file, $error_line)
{           
    $err_start = 'caught error'; //to prove that the error has been properly caught
    die("$err_start $error_num, $error_str, $error_file, $error_line<br>");
}           
function test_curl()
{   
    $curl_multi_handle = curl_multi_init();
    $curl_handle1 = curl_init('iamdooooooooooown.com');
    curl_setopt($curl_handle1, CURLOPT_RETURNTRANSFER, true);
    curl_multi_add_handle($curl_multi_handle, $curl_handle1);
    $still_running = 1;
    while($still_running > 0) $multi_errors = curl_multi_exec($curl_multi_handle, $still_running);
    if($multi_errors != CURLM_OK) trigger_error("curl error [$multi_errors]: ".curl_error($curl_multi_handle), E_USER_ERROR);
    if(strlen(curl_error($curl_handle1))) trigger_error("curl error: [".curl_error($curl_handle1)."]", E_USER_ERROR);
    $curl_info = curl_getinfo($curl_handle1); //info for individual requests
    $content = curl_multi_getcontent($curl_handle1);
    curl_multi_remove_handle($curl_multi_handle, $curl_handle1);
    curl_close($curl_handle1);
    curl_multi_close($curl_multi_handle);
}
?> 
```

请注意，我的完整代码有多个并行请求，但是问题仍然表现为单个请求，如此处所示。另请注意，此代码片段中显示的错误处理程序非常基本 - 我的实际错误处理程序不会因警告或通知而死亡，因此无需在这方面对我进行培训。

现在，如果我尝试卷曲当前已关闭的主机，那么我成功捕获了卷曲错误，并且我的脚本因以下原因而死：

```
caught error 256, curl error: [Couldn't resolve host 'iamdooooooooooown.com'], /var/www/proj/test_curl.php, 18 
```

但是，我的错误处理程序函数未捕获以下警告，并且正在将其`echo`编辑到页面：

```
Warning: (null)(): 3 is not a valid cURL handle resource in Unknown on line 0 
```

我想在我的错误处理程序中捕获这个警告，以便我可以记录它以供以后检查。

我注意到的一件事是，警告仅在 curl 代码位于函数内部时才会出现 - 当代码处于最高范围级别时不会发生。是否有可能`CURLM_OK`在函数范围内无法访问 curl 全局变量之一（例如）`test_curl()`？

我正在使用*PHP 版本 5.3.2-1ubuntu4.19*

**编辑**

*   更新了代码片段以充分展示错误
*   未捕获的警告仅在函数或类方法中出现

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-17T17:07:45.330

我认为我不同意您捕获错误的方式...您可以尝试

```
$nodes = array(
        "http://google.com",
        "http://iamdooooooooooown.com",
        "https://gokillyourself.com"
);

echo "<pre>";
print_r(multiplePost($nodes)); 
```

输出

```
Array
(
    [google.com] => #HTTP-OK 48.52 kb returned
    [iamdooooooooooown.com] => #HTTP-ERROR 0  for : http://iamdooooooooooown.com
    [gokillyourself.com] => #HTTP-ERROR 0  for : https://gokillyourself.com
) 
```

使用的功能

```
function multiplePost($nodes) {
    $mh = curl_multi_init();
    $curl_array = array();
    foreach ( $nodes as $i => $url ) {
        $url = trim($url);
        $curl_array[$i] = curl_init($url);
        curl_setopt($curl_array[$i], CURLOPT_RETURNTRANSFER, true);
        curl_setopt($curl_array[$i], CURLOPT_USERAGENT, 'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.1.2) Gecko/20090729 Firefox/3.5.2 (.NET CLR 3.5.30729)');
        curl_setopt($curl_array[$i], CURLOPT_CONNECTTIMEOUT, 5);
        curl_setopt($curl_array[$i], CURLOPT_TIMEOUT, 15);
        curl_setopt($curl_array[$i], CURLOPT_FOLLOWLOCATION, true);
        curl_setopt($curl_array[$i], CURLOPT_SSL_VERIFYHOST, 0);
        curl_setopt($curl_array[$i], CURLOPT_SSL_VERIFYPEER, 0);
        curl_multi_add_handle($mh, $curl_array[$i]);
    }
    $running = NULL;
    do {
        usleep(10000);
        curl_multi_exec($mh, $running);
    } while ( $running > 0 );
    $res = array();

    foreach ( $nodes as $i => $url ) {
        $domain = parse_url($url, PHP_URL_HOST);
        $curlErrorCode = curl_errno($curl_array[$i]);
        if ($curlErrorCode === 0) {
            $info = curl_getinfo($curl_array[$i]);
            $info['url'] = trim($info['url']);
            if ($info['http_code'] == 200) {
                $content = curl_multi_getcontent($curl_array[$i]);
                $res[$domain] = sprintf("#HTTP-OK %0.2f kb returned", strlen($content) / 1024);
            } else {
                $res[$domain] = "#HTTP-ERROR {$info['http_code'] }  for : {$info['url']}";
            }
        } else {
            $res[$domain] = sprintf("#CURL-ERROR %d: %s ", $curlErrorCode, curl_error($curl_array[$i]));
        }
        curl_multi_remove_handle($mh, $curl_array[$i]);
        curl_close($curl_array[$i]);
        flush();
        ob_flush();
    }
    curl_multi_close($mh);
    return $res;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T10:47:40.303

这可能是 php-curl 的错误。删除以下行后，一切正常：

```
if(strlen(curl_error($curl_handle1))) trigger_error("curl error: [".curl_error($curl_handle1)."]", E_USER_ERROR); 
```

据我所知，`curl`关闭的主机正在`$curl_handle1`以某种方式破坏该`curl_error()`功能没有准备好。要解决这个问题（直到修复错误）只需测试`http_code`返回的`curl_getinfo()`is `0`。如果是，`0`则不要使用该`curl_error`功能：

```
if($multi_errors != CURLM_OK) trigger_error("curl error [$multi_errors]: ".curl_error($curl_multi_handle), E_USER_ERROR);
$curl_info = curl_getinfo($curl_handle1); //info for individual requests
$is_up = ($curl_info['http_code'] == 0) ? 0 : 1;
if($is_up && strlen(curl_error($curl_handle1))) trigger_error("curl error: [".curl_error($curl_handle1)."]", E_USER_ERROR); 
```

这不是一个非常优雅的解决方案，但现在可能不得不这样做。

# cross-browser - 以编程方式使用 BrowserStacks 新的 ScreenShot API

> ID：16005332
> 
> 赞同：1
> 
> 时间：2013-04-14T22:57:52.667
> 
> 标签：cross-browser, browserstack

BrowserStack 现在提供了一个 ScreenShot API，它允许您发布请求并接收 HTML/JSON，其中包含指向存储在其服务器上的生成的屏幕截图图像的链接：

[http://www.browserstack.com/screenshots/api](http://www.browserstack.com/screenshots/api)

这些示例很少，并且使用 CURL 来完成所有传输。

1) 使用 curl 自动化并将这些屏幕转储到文件夹中的快速而肮脏的方法是什么 2) 如何在 .NET 控制台/Web 应用程序中使用此请求架构来自动化此过程？

这似乎很新，在任何地方都没有关于其使用的文档或示例。

一个示例请求：

```
curl -u "username:password" -H "Accept: application/json" -d 'data={"browsers": [{"os": "Windows", "os_version": "7", "browser_version": "8.0", "browser": "ie"}], "url": "http://google.com"}' http://www.browserstack.com/screenshots 
```

和回应：

```
Response {
  "job_id":"13b93a14db22872fcb5fd1c86b730a51197db319",
  "callback_url": "http://staging.example.com",
  "win_res": "1024x768",
  "mac_res": "1920x1080",
  "quality": "compressed",
  "screenshots": [{
    "os":"Windows",
    "os_version":"XP",
    "browser":"ie",
    "id":"be9989892cbba9b9edc2c95f403050aa4996ac6a",
    "state":"pending",
    "browser_version":"7.0",
    "url":"www.google.com"
  },
  {
    "os":"Windows",
    "os_version":"7",
    "browser":"ie",
    "id":"1f3a6054e09592e239e9ea79c247b077e68d3d71",
    "state":"pending",
    "browser_version":"8.0",
    "url":"www.google.com"
  }
    ....
  ]
} 
```

获取队列中屏幕截图的状态

```
Usage GET /screenshots/<JOB-ID>.json 
```

等等

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T15:58:03.857

答案是使用 CURL 并阅读 CURL 帮助文件并找到一个好的 GUI 工具（duh）。

# java - 有没有办法在系统队列的头端拦截 AWT 事件？

> ID：16005339
> 
> 赞同：1
> 
> 时间：2013-04-14T22:58:28.880
> 
> 标签：java, awt, event-dispatch-thread

我有一个图形应用程序，并且希望（只读）能够读取主事件队列上的事件，当它们被存放在队列中时，它们不会被渲染阻塞。

在主 AWT 调度线程上渲染时有没有办法做到这一点？

由于使用 AWT 的动画渲染在调度线程之外无法正常工作，因此在执行此操作时会出现大量抖动以及其他时间和线程切换问题。

但是，如果帧速率很慢，则希望在重要事件等待时中止渲染的低优先级部分。

到目前为止，我已经尝试在帧渲染中多次使用“peekEvent()”轮询系统事件队列。

我还尝试在系统事件队列上使用“push()”方法来放入我自己的方法并覆盖“post”方法，我得到了所有的调用事件，我得到了组件事件，但没有关键事件。

arrrgh - 似乎使用推送（新队列）方法将发布到系统事件队列头部的事件转发到“postEventPrivate”，即使在具有完全访问权限的应用程序中也无法覆盖：|

**如果**“不能那样做”是一个答案，这可能是一个答案。

寻求一种方法来获得“带外”键、鼠标和鼠标滚轮事件。

# objective-c - xcode 4.6.1 和 LLVM 4.2：ld：架构 armv7 的 2 个重复符号

> ID：16005341
> 
> 赞同：0
> 
> 时间：2013-04-14T22:58:44.113
> 
> 标签：objective-c, xcode, frameworks, linker, linker-errors

我第一次尝试构建公司 iOS 库/框架是在本周，按照[此处博客文章](http://codefriend.blogspot.co.uk/2011/09/creating-ios-framework-with-xcode4.html)中的步骤进行操作。

由于这个问题之外的原因，我只能在为设备而不是模拟器构建时链接。

但是，现在我遇到了一个非常奇怪的错误：

> ld：架构 armv7 clang 的 2 个重复符号：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）

有问题的行表明：

> 重复符号 _OBJC_CLASS_$_iContactsGridCell 在：/Users/ ***** /Desktop/Projects/contactservice/branch/ContactServicesClient/DerivedData/iContacts/Build/Intermediates/iContacts.build/Debug-iphoneos/iContacts-5.1.build/Objects-normal/armv7/ iContactsGridCell.o /Applications/Xcode.app/Contents/Developer/Library/Frameworks/athium-iOS.framework/athium-iOS 重复符号 _OBJC_METACLASS_$_iContactsGridCell 在：/Users/ ***** /Desktop/Projects/contactservice/branch/ContactServicesClient/DerivedData /iContacts/Build/Intermediates/iContacts.build/Debug-iphoneos/iContacts-5.1.build/Objects-normal/armv7/iContactsGridCell.o /Applications/Xcode.app/Contents/Developer/Library/Frameworks/athium-iOS.framework /athium-iOS

显然有问题的类是 iContactsGridCell.h

类本身继承自 Cell.h

```
@interface iContactsGridCell : Cell 
```

类 Cell.h 是框架的一部分，如果我没有导入正确的文件，那么正如预期的那样，我会得到一个语义错误：*找不到 Cell*等的接口声明等。

但是，当我导入它时，我收到以下重复错误。除了*iContactsGridCell.h*之外，该文件不包含在项目的其他任何地方！

反过来，文件*Cell.h只是框架下的一个类：*

```
@interface Cell : NSObject

@property (strong,nonatomic) UIView *view;
@property CGRect rect;
@property int UID;
@property BOOL highlighted;
@property UIColor *b_colr;

- (id) initWithRect:(CGRect)frame;
- (BOOL) hasCoordinates:(CGPoint)coord;
- (void) ripple;
- (void) cubefy;
- (void) flipfy;
- (void) rotate;
- (void) setBg:(UIColor *)bg withAlpha:(CGFloat)alpha;
- (void) highlight;
- (void) unhighlight;
- (void) updateWithRect:(CGRect)rect;

@end 
```

1.  为什么我会收到重复的错误？
2.  这可能是什么原因造成的？
3.  怎么可能修好？
4.  我怎样才能获得更多信息，更详细地输出​​重复项的位置**？**

PS：我已经按照在博客上找到的说明来信了。但是我无法链接模拟器（出现错误的架构错误），所以我猜测框架中可能有问题而不是项目本身。这可能是重复错误的原因吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-14T23:23:25.110

有几个地方可能会出现此错误。我会执行以下操作来开始搜索问题：

1.  使用 finder 搜索项目文件夹，查看文件“iContactsGridCell.h”是否存在。或者，如果某处存在任何两个文件。
2.  确保您没有两个属于 iContactsGridCell 类且名称相同的对象，例如：

iContactsGridCell *myObj; iContactsGridCell *myObj;

1.  确保你没有做这样的事情：#import "iContactsGridCell **.m** "

2.  或者像这样：#import "iContactsGridCell.h" #import "iContactsGridCell.h"

3.  确保您没有重新声明一个类（包括 Apple 在其框架中提供的类）

**要点：**这就是我能想到的。但要记住的是，在您的项目中的某个地方存在两个对象、类声明等。它们是相同的。编译器因此而抱怨。

**为什么编译器会抱怨（更多信息）：**虽然这些信息确实“不必要”，但作为程序员了解幕后发生的事情并通常有助于调试是一种很好的做法，所以这里有一些关于编译器的信息：

请记住，编译器（虽然要复杂得多）是一个程序，就像您使用它创建的程序一样。大多数（如果不是全部）编译器在一个点或另一个读取代码中执行的步骤之一是为每个变量、类、结构等创建“符号或键”。因此，在某些时候，编译器到达了在其他地方“重复/重复”的代码行。因此，编译器完成的“键/符号”创建过程例程失败。

# c# - ServiceStack：原始请求流

> ID：16005342
> 
> 赞同：1
> 
> 时间：2013-04-14T22:58:46.263
> 
> 标签：c#, servicestack

我试图读取 ServiceStack 服务中的原始输入流。我已将 DTO 标记为`IRequiresRequestStream`，并且要读取的代码会执行，但内容始终显示为空白。

在 IE9 中使用调试模式，我可以看到原始 HttpRequest 包含传递的 POST 中的文本。

这是我来自最小测试服务的代码，仅用于显示对内容和查询的阅读：

```
[Route("/qtest")]
public class QueryTestRequest : IReturn<string>, IRequiresRequestStream
{
    public Stream RequestStream { get; set; }
}

public class QueryTestService : Service
{
    public string Any(QueryTestRequest request)
    {
        var r = new StringBuilder(); 
        r.Append("<p>This is the query test service:");

        r.AppendFormat("<p>Parameter value={0}", base.Request.QueryString["value"]);

        var postStream = new StreamReader(request.RequestStream);
        var postContent = postStream.ReadToEnd();           

        r.AppendFormat("<p>Raw Content={0}", postContent);

        return r.ToString();
    }
} 
```

我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-30T12:44:09.577

是的，我也觉得这很奇怪，但也许是我不了解 HttpRequestStream 的本质。

无论如何...我设法使用以下方法获取文件：

```
var stream = Request.Files[0].InputStream; 
```

然后你可以处理那个流。

似乎可以上传多个文件，但我想这很难包装到 REST 框架中。

# magento - SugarCRM 肥皂 get_entry_list

> ID：16005349
> 
> 赞同：1
> 
> 时间：2013-04-14T22:59:33.343
> 
> 标签：magento, sugarcrm

这段代码有什么问题：

```
$query = "email1 = '{$email}'";
    Mage::log($query);
    $account = $client->get_entry_list($session_id, 'Accounts', $query); 
```

我无法弄清楚为什么它不起作用并给我一个错误：

```
looks like we got no XML document

Trace:
#0 /var/www/empresam/app/code/local/Empresam/SugarIntegration/Helper/Methods.php(147): SoapClient->__call('get_entry_list', Array)
#1 /var/www/empresam/app/code/local/Empresam/SugarIntegration/Helper/Methods.php(147): SoapClient->get_entry_list('v12adkskr9va2pe...', 'Accounts', 'email1 = 'magag...')
#2 /var/www/empresam/app/code/local/Empresam/Helloworld/controllers/IndexController.php(17): Empresam_SugarIntegration_Helper_Methods->addAccount('v12adkskr9va2pe...', Object(SoapClient), Object(Mage_Customer_Model_Customer))
#3 /var/www/empresam/app/code/core/Mage/Core/Controller/Varien/Action.php(419): Empresam_Helloworld_IndexController->indexAction()
#4 /var/www/empresam/app/code/core/Mage/Core/Controller/Varien/Router/Standard.php(250): Mage_Core_Controller_Varien_Action->dispatch('index')
#5 /var/www/empresam/app/code/core/Mage/Core/Controller/Varien/Front.php(176): Mage_Core_Controller_Varien_Router_Standard->match(Object(Mage_Core_Controller_Request_Http))
#6 /var/www/empresam/app/code/core/Mage/Core/Model/App.php(354): Mage_Core_Controller_Varien_Front->dispatch()
#7 /var/www/empresam/app/Mage.php(683): Mage_Core_Model_App->run(Array)
#8 /var/www/empresam/index.php(89): Mage::run('', 'store')
#9 {main} 
```

我敢打赌，查询格式错误，但我对“潜在客户”执行了相同的程序，我可以成功返回潜在客户。

Lead 代码是这个：

```
 $oldname = $oldfirstname . ' ' . $oldlastname;
$query = "account_name = '{$oldname}'";

$lead = $client->get_entry_list($session_id, 'Leads', $query); 
```

该值`{$email}`是正确的，我已确认将其打印到日志中。我几乎可以肯定错误出在查询格式上，但正如我所说，它适用于 LEAD 为什么它在这里不起作用？

我尝试在查询中使用“account_name”，但结果是一样的。'account_name' 和 'email1' 两个参数都是有效的，因为我可以成功创建帐户，但不能检索它们！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T12:35:40.913

在每个模块中，电子邮件地址都存储在另一个数据库中。所以，为了让这个查询工作，因为 SugarCRM Soap 方法“省略”了这部分`Select * from Account Where`，当我们寻找时`email1`，他没有找到它，就好像它是表的一个字段一样`Accounts`。为简单起见，当我们向表 Accounts 添加电子邮件时，Sugar 不关心该字段是否属于另一个数据库，默认情况下，他会让您引入电子邮件地址。但是，在查询时，我们不能这样做：

```
$query = "email1 = '{$email}'"; 
```

因为电子邮件存储在不同的表中。为了得到我想要的，我必须这样做：

```
public function getAccount($session_id, $client, $email){

    $query = "accounts.id in ( select bean_id from email_addr_bean_rel inner join email_addresses where email_addr_bean_rel.email_address_id = email_addresses.id and email_addr_bean_rel.deleted = 0 and email_addresses.deleted = 0 and bean_module = 'Accounts' and email_addresses.email_address = '{$email}' )";

    $acc = $client->get_entry_list($session_id, 'Accounts', $query);
    return $acc;   
} 
```

在查询中，只需替换`Accounts`为您的模块名称，它将适用于所有其他模块。

# actionscript-3 - 给一个精灵它的孩子的宽度

> ID：16005356
> 
> 赞同：0
> 
> 时间：2013-04-14T23:00:29.627
> 
> 标签：actionscript-3

我正在尝试在 AS3 中模拟窗口行为，所以我有一个名为“容器”的精灵，其中包含子项。其中一个是 TextField，其他是 Sprite。当我在容器中添加文本字段时，我很高兴看到它的宽度被重新计算。所以，如果我的 textField 宽度设置为 50px，我的容器也是如此。所以我的窗口模拟运行良好。但是，当我添加其他精灵时，我的容器的宽度没有改变，所以我的窗口模拟不再运行良好......请问这是为什么？我找不到任何解释。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T00:12:01.970

这应该不是问题，因为宽度和高度始终是根据孩子的位置和大小计算的。这取自 ActionScript 文档：

> **显示对象 > 宽度：**
> 
> 表示显示对象的宽度，以像素为单位。宽度是根据显示对象内容的边界计算的。设置 width 属性时，scaleX 属性会相应调整

一定还有另一个问题，所以也许尝试发布您的代码，或者将问题简化为一个简单的示例。

# ios - iOS - 使用父视图控制器立即显示子视图控制器

> ID：16005359
> 
> 赞同：0
> 
> 时间：2013-04-14T23:00:36.630
> 
> 标签：ios, view, uiviewcontroller, childviewcontroller

我多个视图控制器将在单击按钮时显示动态视图控制器，这是我的视图控制器的布局方式： ![在此处输入图像描述](https://i.stack.imgur.com/4261e.png)

在按下“开始”按钮之前，“calculationView”视图不会显示任何内容。当用户在视图控制器 2 中按下“开始”按钮“calculationView”时，会显示一个子视图控制器（此处未显示）。

View Controller 2 中的后退箭头将用户带回到选项卡栏中的 Item 1，并在计算视图中的 VIew Controller 2 中显示相同的视图控制器。

现在，除了视图控制器 1 中的计算视图中的内容在视图显示后大约一秒出现之外，一切正常。

**这是我在 View Controller 2 中加载计算视图的方式：**

```
- (IBAction)startRunning:(id)sender {
    NSLog(@"Start button pressed.");

    helper = [[RunsDataHelper helper] init];

    // Set this value to true so then other views also display the calculationsView
    [helper setRunInProgres:YES];

    // Add Calculations View Controller
    CalculationViewController *calculationController = [self.storyboard instantiateViewControllerWithIdentifier:@"Calculate"];
    [self addChildViewController:calculationController];
    calculationController.view.frame = self.calculationView.bounds;
    [UIView transitionWithView:self.calculationView
                      duration:0.4
                       options:UIViewAnimationOptionTransitionCurlDown
                    animations:^{
                        [self.calculationView addSubview:calculationController.view];
                    }
                    completion:nil];
    [calculationController didMoveToParentViewController:self];

} 
```

**下面是我如何使用 runInProgress BOOL 在 View Controller 1 中显示计算视图：**

```
-(void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];
    helper = [[RunsDataHelper helper] init];
    if([helper runInProgres] == YES)
    {

        //Add Calculations View Controller
        CalculationViewController *calculationController = [self.storyboard instantiateViewControllerWithIdentifier:@"Calculate"];
        [self addChildViewController:calculationController];
        calculationController.view.frame = self.calculationView.bounds;
        [self.calculationView addSubview:calculationController.view];
        [calculationController didMoveToParentViewController:self];
    }

} 
```

**问题：**
现在我的问题是如何制作它，以便计算视图与视图控制器 1 同时出现。

另外，我有一个设计问题。计算视图将位于每个视图控制器上的静态位置。有没有更好的方法在基于 runInProgress BOOL 的每个视图控制器上显示计算视图。

# compilation - Fedora 18 上的内核编译错误（在 Macbook 上的 VirtualBox 上）

> ID：16005361
> 
> 赞同：0
> 
> 时间：2013-04-14T23:00:52.623
> 
> 标签：compilation, compiler-errors, linux-kernel, kernel, fedora

我在 Macbook Pro 上的 VirtualBox 上安装了 Fedora 18，想看看内核编译是否工作正常。

安装 Fedora 后，我使用以下命令更新了内核源等

```
yum install kernel-devel

yum install kernel-headers

yum insall kernel-doc

yum install man 
```

我的内核版本是 3.8.6-203.fc18.x86_64

我曾尝试使用简单的 Hello World 程序进行内核编译，如下所示

```
/*
 *  hello-1.c - The simplest kernel module.
*/

#include <linux/module.h>       /* Needed by all modules */
#include <linux/kernel.h>       /* Needed for KERN_INFO */

int init_module(void)
{
        printk(KERN_INFO "Hello world 1.\n");

        /*
         * A non 0 return means init_module failed; module can't be loaded.
         */
        return 0;
}

void cleanup_module(void)
{
        printk(KERN_INFO "Goodbye world 1.\n");
} 
```

当我尝试使用以下命令进行编译时，出现以下错误

```
[seemabhat@localhost ~]$ make
make -C /lib/modules/3.6.10-4.fc18.x86_64/build M=/home/seemabhat modules
make: *** /lib/modules/3.6.10-4.fc18.x86_64/build: No such file or directory.  Stop.
make: *** [all] Error 2
[seemabhat@localhost ~]$ 
```

请建议我需要做什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-22T17:34:55.567

嗯......你的内核问题不是你的程序......检查 /usr/lib/modules/3.6.10-4.fc18.x86_64 中是否存在构建目录..或者如果它在那里通过单击它是否可以访问......我相信它不会在那里，你更新了你的内核部分而不是内核本身。尝试使用不带引号的命令“yum install update kernel”，它将更新您的内核...您可以在 /usr/lib/modules 中安装后检查最新版本的内核文件夹...所以当您执行 uname -r 时，它会仍然显示您以前的内核...所以重新启动它...然后执行 uname -r 检查正在运行的最新内核版本...现在尝试构建您的模块...它将成功执行...祝您好运。

# cocos2d-iphone - 使 box2d 物体以螺旋运动方式移动

> ID：16005365
> 
> 赞同：2
> 
> 时间：2013-04-14T23:01:00.393
> 
> 标签：cocos2d-iphone, box2d, physics, game-physics, box2d-iphone

如何使 box2d 物体以螺旋运动方式移动？我相信这需要施加一些力量，但我不确定如何。我将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T08:40:13.780

您可以使用中间的不可见实体将关节链接在一起。用旋转关节将中心的身体固定在地面上，并从该身体连接到真实的棱柱体。两个关节 = 两个电机 = 两个可控自由度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-15T05:52:44.563

您将有两个力，一个切向力和一个径向力。

切向力围绕中心加速身体。

径向力使身体朝向或远离中心加速。

```
radialVector = (objectPosition - spiralCenter).normalize();
tangentialVector = radialVector.perpendicularVector();

forceTangential = tangentialForceMagnitude * tangentialVector;
forceRadial = radialForceMagnitude * radialVector;
force = forceTangential + forceRadial;
object.applyForce(force); 
```

力大小的具体值将决定螺旋的行为；比如它是向内还是向外运动，以及多快。

我回答了有关制作漩涡/漩涡的相关问题：[SO：如何创建漩涡/漩涡效果？](https://stackoverflow.com/a/25952561/2669591)

# cabal - cabal-install "无法读取 cabal 文件..."

> ID：16005372
> 
> 赞同：2
> 
> 时间：2013-04-14T23:01:36.070
> 
> 标签：cabal, package-managers, cabal-install

我刚刚在 Linux Mint 12 上通过`apt-get`. 每次我尝试使用 cabal-install 安装一些 hackage 包时，我都会得到：

```
couldn't read caba file xxxx.cabal 
```

其中 xxxx 是我正在安装的包或包本身的依赖项。基于[haskell cafe上的这个线程](http://www.haskell.org/pipermail/haskell-cafe/2012-February/099077.html)和SO中的其他问题，我从索引中删除了字节串包：

```
tar -f ~/.cabal/packages/hackage.haskell.org/00-index.tar --delete bytestring/0.9.2.0
tar -f ~/.cabal/packages/hackage.haskell.org/00-index.tar --delete bytestring/0.9.2.1 
```

但错误仍然存​​在。

我的 cabal 安装版本是：

```
 $ cabal --version
 cabal-install version 0.10.2
 using version 1.10.1.0 of the Cabal library 
```

错误是这样的：

```
$ cabal install yesod
Resolving dependencies...
cabal: Couldn't read cabal file "fsnotify/0.0.5/fsnotify.cabal" 
```

有谁知道可能会发生什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T17:35:22.893

我有同样的问题。[在http://haskell.1045720.n5.nabble.com/Cabal-install-fails-due-to-recent-HUnit-td5715081i20.html](http://haskell.1045720.n5.nabble.com/Cabal-install-fails-due-to-recent-HUnit-td5715081i20.html)上有一个关于这个问题的相关邮件列表线程

我相信结果是包文件的格式发生了变化，这里使用的 cabal 版本（我有相同的版本，从 ubuntu oneiric 获得）无法理解这些文件。你甚至不能执行“cabal install cabal-install”。

邮件列表线程在 2012 年 9 月逐渐消失，没有做出明确的决定，但我认为他们决定忽略这个问题。对于像我们这样的用户该怎么做，并没有明确的说明；我认为唯一可能的方法是从头开始安装haskell，但我还不知道从哪里开始。

[编辑：我通过从http://hackage.haskell.org/packages/archive/cabal-install/1.16.0.2/cabal-install-1.16.0.2.tar.gz](http://hackage.haskell.org/packages/archive/cabal-install/1.16.0.2/cabal-install-1.16.0.2.tar.gz)下载最新的 cabal 源包来解决这个问题，解压它并按照其自述文件中的说明进行本地安装。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-26T09:02:37.917

我遇到了同样的问题，我无法按照 Richard 的说明进行操作，所以我意识到我正在运行 7.0 版。？我使用命令 $ 卸载了它`uninstall-hs`，然后安装了最新版本（7.6.3）。问题在这里解决了。

# c++ - MS Visual Studio 2008 + SSE + x64 + O2 结果不正确

> ID：16005374
> 
> 赞同：2
> 
> 时间：2013-04-14T23:02:24.467
> 
> 标签：c++, visual-studio-2008, 64-bit, sse

我使用 MS VS 2008 (SP1) 和 SSE 内在函数编写了简单的光线追踪器。当我打开 O2 优化（针对 x86 平台）时，它会加速 3 倍。显然我也想将它用于 x64。不幸的是，对于 x64，它会导致一些奇怪的问题。我把它缩小到一小段代码。

让我们采取以下射线：

```
__m128 ray = _mm_set_ps( 0.0, 1.0, -1.0, -1.0 ); 
```

我想对其进行归一化并计算 [ 1/abs(x), 1/abs(y), 1/abs(z), 0 ]。使用没有 O2 优化的 x64 版本我得到正确的结果：

```
Normalized abs: [ 0.57735, 0.57735, 0.57735, 0 ]
Result 1/v:     [ 1.73205, 1.73205, 1.73205, 0 ] 
```

使用 O2 我得到：

```
Normalized abs: [ 0.57735, 0.57735, 0.57735, 0 ]
Result 1/v:     [ 1.73205, 1.73205, 0, 0 ] 
```

对项目设置的不同更改会导致此问题消失或再次出现。例如，“启用链接时代码生成 (/GL)”在此示例中有所帮助，但在整个程序中没有帮助。正如你所看到的，这真的很奇怪。x64 的 O2 是否损坏或我的代码使用了一些禁止的 SSE 构造？这是示例：

雷信息.h

```
#pragma once

#include <smmintrin.h>

class RayInfo
{
    public:

        RayInfo( const __m128 & ray );

        __m128i m_RayDir;
        __m128 m_Ray;
        __m128 m_RayNotZeroMask;
        __m128 m_RayPosMask;
        __m128 m_RayNegMask;
        __m128 m_AbsRay;
        __m128 m_One_AbsRay;
}; 
```

雷信息.cpp

```
#include "RayInfo.h"

const __m128 onePosF = _mm_set_ps( 0.0, 1.0, 1.0, 1.0 );
const __m128 oneNegF = _mm_set_ps( 0.0, -1.0, -1.0, -1.0 );
const __m128 zeroF = _mm_setzero_ps();
const __m128 aaa = _mm_set_ps1( 123.0 );
const __m128 bbb = _mm_set_ps1( 456.0 );

__m128 normalized( const __m128 & v )
{
    // a0 = xx + yy + zz + ww
    __m128 dotProduct = _mm_dp_ps( v, v, 0xF1 );
    float tmp;
    _MM_EXTRACT_FLOAT( tmp, dotProduct, 0 );
    if ( tmp != 0.0f )
    {
        dotProduct = _mm_sqrt_ss( dotProduct );
        _MM_EXTRACT_FLOAT( tmp, dotProduct, 0 );
        return _mm_div_ps( v, _mm_set_ps1( tmp ) );
    }
    else return _mm_setzero_ps();
}

RayInfo::RayInfo( const __m128 & ray )
{
    m_Ray = normalized( ray );
    m_RayNotZeroMask = _mm_cmpneq_ps( m_Ray, zeroF );
    m_RayPosMask = _mm_cmpgt_ps( m_Ray, zeroF );
    m_RayNegMask = _mm_cmplt_ps( m_Ray, zeroF );
    m_RayDir = _mm_castps_si128( _mm_blendv_ps( zeroF, _mm_blendv_ps( aaa, bbb, m_RayPosMask ), m_RayNotZeroMask ) );
    m_AbsRay = _mm_andnot_ps( _mm_set_ps1( -0.0f ), m_Ray );
    m_One_AbsRay = _mm_blendv_ps( zeroF, _mm_div_ps( onePosF, m_AbsRay ), m_RayNotZeroMask );
} 
```

主文件

```
#include <iostream>

#include "RayInfo.h"

int main( int argc, char * argv[] )
{
    __m128 ray = _mm_set_ps( 0.0, 1.0, -1.0, -1.0 );
    RayInfo ri( ray );

    float result[ 4 ];
    _mm_store_ps( result, ri.m_AbsRay );
    std::cout << "Normalized abs: [ " << result[ 0 ] << ", " << result[ 1 ] << ", " << result[ 2 ] << ", " << result[ 3 ] << " ] " << std::endl;
    _mm_store_ps( result, ri.m_One_AbsRay );
    std::cout << "Result 1/v:     [ " << result[ 0 ] << ", " << result[ 1 ] << ", " << result[ 2 ] << ", " << result[ 3 ] << " ] " << std::endl;
} 
```

**编辑：**

使用 O2 优化的装配输出：

```
; 27   :    m_RayNotZeroMask = _mm_cmpneq_ps( m_Ray, zeroF );

movaps  xmm4, XMMWORD PTR zeroF

; 28   :    m_RayPosMask = _mm_cmpgt_ps( m_Ray, zeroF );
; 29   :    m_RayNegMask = _mm_cmplt_ps( m_Ray, zeroF );
; 30   :    m_RayDir = _mm_castps_si128( _mm_blendv_ps( zeroF, _mm_blendv_ps( neg, pos, m_RayPosMask ), m_RayNotZeroMask ) );   

movaps  xmm2, XMMWORD PTR neg
movaps  xmm0, xmm5

; 31   :    m_AbsRay = _mm_andnot_ps( _mm_set_ps1( -0.0f ), m_Ray );    
; 32   :    m_One_AbsRay = _mm_blendv_ps( zeroF, _mm_div_ps( onePosF, m_AbsRay ), m_RayNotZeroMask );   
; 33   : }

mov rax, rcx
cmpltps xmm0, xmm4
movaps  xmm1, xmm4
movaps  xmm3, xmm4
movaps  XMMWORD PTR [rcx+16], xmm5
cmpltps xmm1, xmm5
cmpneqps xmm3, xmm5
movaps  XMMWORD PTR [rcx+48], xmm1
movaps  XMMWORD PTR [rcx+32], xmm3
movaps  XMMWORD PTR [rcx+64], xmm0
blendvps xmm2, XMMWORD PTR pos, xmm1
movaps  xmm1, xmm4
blendvps xmm1, xmm2, xmm3
movss   xmm2, DWORD PTR __real@80000000
movaps  XMMWORD PTR [rcx], xmm1
movaps  xmm1, XMMWORD PTR onePosF
shufps  xmm2, xmm2, 0
andnps  xmm2, xmm5
divps   xmm1, xmm2
movaps  XMMWORD PTR [rcx+80], xmm2
blendvps xmm4, xmm1, xmm3
movaps  XMMWORD PTR [rcx+96], xmm4
add rsp, 24
ret 0 
```

无 O2 的装配输出：

```
; 27   :    m_RayNotZeroMask = _mm_cmpneq_ps( m_Ray, zeroF );

mov rax, QWORD PTR this$[rsp]
movaps  xmm0, XMMWORD PTR [rax+16]
cmpneqps xmm0, XMMWORD PTR zeroF
movaps  XMMWORD PTR $T6429[rsp], xmm0
mov rax, QWORD PTR this$[rsp]
movaps  xmm0, XMMWORD PTR $T6429[rsp]
movaps  XMMWORD PTR [rax+32], xmm0

; 28   :    m_RayPosMask = _mm_cmpgt_ps( m_Ray, zeroF );

mov rax, QWORD PTR this$[rsp]
movaps  xmm0, XMMWORD PTR zeroF
cmpltps xmm0, XMMWORD PTR [rax+16]
movaps  XMMWORD PTR $T6430[rsp], xmm0
mov rax, QWORD PTR this$[rsp]
movaps  xmm0, XMMWORD PTR $T6430[rsp]
movaps  XMMWORD PTR [rax+48], xmm0

; 29   :    m_RayNegMask = _mm_cmplt_ps( m_Ray, zeroF );

mov rax, QWORD PTR this$[rsp]
movaps  xmm0, XMMWORD PTR [rax+16]
cmpltps xmm0, XMMWORD PTR zeroF
movaps  XMMWORD PTR $T6431[rsp], xmm0
mov rax, QWORD PTR this$[rsp]
movaps  xmm0, XMMWORD PTR $T6431[rsp]
movaps  XMMWORD PTR [rax+64], xmm0

; 30   :    m_RayDir = _mm_castps_si128( _mm_blendv_ps( zeroF, _mm_blendv_ps( neg, pos, m_RayPosMask ), m_RayNotZeroMask ) );   

mov rax, QWORD PTR this$[rsp]
movaps  xmm0, XMMWORD PTR [rax+48]
movaps  xmm1, XMMWORD PTR neg
blendvps xmm1, XMMWORD PTR pos, xmm0
movaps  XMMWORD PTR $T6432[rsp], xmm1
mov rax, QWORD PTR this$[rsp]
movaps  xmm0, XMMWORD PTR [rax+32]
movaps  xmm1, XMMWORD PTR zeroF
blendvps xmm1, XMMWORD PTR $T6432[rsp], xmm0
movaps  XMMWORD PTR $T6433[rsp], xmm1
movaps  xmm0, XMMWORD PTR $T6433[rsp]
movdqa  XMMWORD PTR $T6434[rsp], xmm0
mov rax, QWORD PTR this$[rsp]
movdqa  xmm0, XMMWORD PTR $T6434[rsp]
movdqa  XMMWORD PTR [rax], xmm0

; 31   :    m_AbsRay = _mm_andnot_ps( _mm_set_ps1( -0.0f ), m_Ray );    

movss   xmm0, DWORD PTR __real@80000000
shufps  xmm0, xmm0, 0
movaps  XMMWORD PTR $T6435[rsp], xmm0
mov rax, QWORD PTR this$[rsp]
movaps  xmm0, XMMWORD PTR $T6435[rsp]
andnps  xmm0, XMMWORD PTR [rax+16]
movaps  XMMWORD PTR $T6436[rsp], xmm0
mov rax, QWORD PTR this$[rsp]
movaps  xmm0, XMMWORD PTR $T6436[rsp]
movaps  XMMWORD PTR [rax+80], xmm0

; 32   :    m_One_AbsRay = _mm_blendv_ps( zeroF, _mm_div_ps( onePosF, m_AbsRay ), m_RayNotZeroMask );   

mov rax, QWORD PTR this$[rsp]
movaps  xmm0, XMMWORD PTR onePosF
divps   xmm0, XMMWORD PTR [rax+80]
movaps  XMMWORD PTR $T6437[rsp], xmm0
mov rax, QWORD PTR this$[rsp]
movaps  xmm0, XMMWORD PTR [rax+32]
movaps  xmm1, XMMWORD PTR zeroF
blendvps xmm1, XMMWORD PTR $T6437[rsp], xmm0
movaps  XMMWORD PTR $T6438[rsp], xmm1
mov rax, QWORD PTR this$[rsp]
movaps  xmm0, XMMWORD PTR $T6438[rsp]
movaps  XMMWORD PTR [rax+96], xmm0
mov rcx, QWORD PTR __$ArrayPad$[rsp]
xor rcx, rsp
call    __security_check_cookie
add rsp, 248                ; 000000f8H
ret 0 
```

**编辑：**

项目链接： [https ://docs.google.com/file/d/0Bz554SfOcR3AS3QxZzJrZEZJelE/edit](https://docs.google.com/file/d/0Bz554SfOcR3AS3QxZzJrZEZJelE/edit)

# c++ - 在 Excel 中使用 C++ 2010 dll

> ID：16005375
> 
> 赞同：1
> 
> 时间：2013-04-14T23:02:28.043
> 
> 标签：c++, visual-studio-2010, excel, dll

我已经使用 Visual C++ 2010 在 c++ 中构建了一个简单的 dll，并尝试在 excel 中使用它。项目名称为“SwapFunDLL”，源文件名称为“swapmain”，包含类及其函数的头文件名称为“DateNTime”。我已将它们附在下面。代码接受两个值，然后使用类函数将它们相乘，然后返回乘积（我意识到类和函数不是必需的，我这样做只是为了学习）。该函数编译时没有错误，但是当在 excel 中使用该函数时，我得到一个值错误。有人可以帮我看看我做错了什么谢谢。

标题：

```
// DateNTime.h

//Avoid need of .Def file    
#ifdef SwapFunDLL_EXPORTS
#define SwapFunDLL_API __declspec(dllexport) 
#else
#define SwapFunDLL_API __declspec(dllimport)   
#endif

namespace DateNTime
{
    class SwapFunDLL_API Date
    {
        double x,y;
     public:
        double datediff(double,double);
     };

    double Date::datediff(double x, double y)
    {
        return x*y;
    }
} 
```

源文件：

```
#include "DateNTime.h"
namespace DateNTime
{
   double returndates(double a, double b)
   {
       Date Date;
       return Date.datediff(a,b);
   }
 } 
```

Excel宏：

`Declare Function SwapFunDLL _ Lib "C:\Users\MIKE\Desktop\c++ tial programs\SwapFunDLL\Debug\SwapFunDLL.dll" _ (ByRef x As Double, ByRef y As Double) As Double`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T23:40:25.310

您的进口声明是错误的。两件事：类型的语义和声明。如果您使用指针而不是在 Excel 中，您会说`ByRef`，但如果您使用按值传递，您会说`ByVal`。将此函数声明为：

```
Declare Function returndates Lib "C:\Users\MIKE\Desktop\c++ tial programs\SwapFunDLL\Debug\SwapFunDLL.dll" _ (ByVal x As Double, ByVal y As Double) As Double 
```

**使您的函数 returndates 成为您正在导出的类的**静态成员。也让你的函数静态，在任何情况下，你都可以在 .def 文件中声明这个导出（只是简单地：“returdates”就是这样）。毕竟这一切都必须工作，除非你的 C++ 代码是好的。也在这里：

```
 double returndates(double a, double b)
   {
       Date Date; //<- change it, i.e: Date d; d.datediff(); does it compile? 
       return Date.datediff(a,b);
   } 
```

您可以更改代码只是为了测试您是否对此类“测试信息”表单正确执行了所有操作：

```
 double returndates(double a, double b)
   {
       return 117;
   } 
```

并在 Excel 中尝试。Excel 需要`__stdcall`，因此在您的类中进行函数声明，如下所示：

```
static double __stdcall returndates(double a, double b); 
```

然后在 .cpp 文件中将其定义为：

```
 SwapFunDLL_API double __stdcall DateNTime::Date::returndtes(double a, double b){
      return 117;
      } 
```

毕竟这些改变应该没问题。

# php - 如何为我的动态内容生成独特的 JavaScript 推文按钮

> ID：16005378
> 
> 赞同：1
> 
> 时间：2013-04-14T23:02:56.320
> 
> 标签：php, javascript

我为我的页面生成内容，该内容使用 PHP 从我的数据库中填充页面 HTML 元素。我在这个动态内容旁边有一个推文按钮，但推文按钮当然是一个按钮，并且应用于该页面的所有可用内容。我需要知道是否有可能以某种方式为每个页面设置一个唯一的按钮。

这是直接取自 Twitter 网站的 Tweet 按钮代码：

```
<a href="https://twitter.com/share" class="twitter-share-button" data-url="http://www.game-center-achievements.com/" data-via="gcachievements0" data-size="large">Tweet</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script> 
```

我在想我可以使用一个变量作为 id，所以当我的数据库中第 5 行的 id 5 被选择时，将相同的 id 应用于 JavaScript，我不知道 Twitter 是否支持这个，或者这个提供的 JavaScript 可以改变实现我想要的。

[这](http://deucalion0.co.uk/reviews.php?game=Angry%20Birds&developer=Rovio%20Entertainment%20Ltd&platform=iPhone%20and%20iPad&price=%A30.69&link=https://itunes.apple.com/gb/app/angry-birds/id343200656?mt=8&image=1.jpg&date=11th%20April%202013&ease=3&value=2&fun=5&score=3.3&summary=Angry%20Birds%20is%20one%20of%20the%20most%20popular%20games%20ever%20to%20be%20devloped%20for%20iOS.%20I%20spent%20about%20two%20years%20playing%20the%20game%20in%20order%20to%20get%20these%20Achievements%20and%20Points,%20but%20the%20game%20is%20addictive!%20The%20game%20has%20a%20lot%20of%20achievements%20but%20they%20are%20not%20worth%20too%20much%20and%20some%20of%20them%20require%20a%20lot%20of%20time%20to%20get,%20but%20that%20time%20is%20definitely%20time%20spent%20having%20fun.)是我的网页，它使用链接来设置页面内容，您可以看到整个页面的 Tweet 按钮是相同的。

任何见解都将不胜感激，因为我看不出这是否曾经做过。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T12:29:52.717

Twitter 分享按钮用于分享“页面 url”。如果您在上面看到您的代码，则它`data-url`在锚点中有一个。这是单击链接时将共享的页面。如果`data-url`缺少该属性，则假定您要共享当前页面。

转到此处：[https](https://twitter.com/about/resources/buttons#tweet) ://twitter.com/about/resources/buttons#tweet并获取代码。确保您为共享 URL 设置了“使用页面 URL”。这样，您在所有页面上插入相同的代码，但它们确实共享您当前所在的页面。

# php - 有没有办法覆盖页面的 tag by using PHP within the body?</h1> <div id="body"><p>I'm pretty new to PHP and was wondering if there was a way to overwrite what is displayed in a title tag by using PHP inside the body.</p> <p>Let me

> ID：16005379
> 
> 赞同：9
> 
> 时间：2013-04-14T23:03:02.180
> 
> 标签：php

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-14T23:05:28.037

你不能。

如果您想更改它，请添加一些将在客户端执行并为您执行此操作的 Java Script 代码：

```
 <script>
 document.title = "This is the new page title.";
 </script> 
```

并使用一些 PHP：

```
<head><title>some title</title></head>
<body>
   <?php if (some condition, etc) { ?>
   <script>
        document.title = "This is the new page title.";
   </script>
   <?php } ?>
</body> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T23:07:22.513

```
<html>
    <head>
        <title>Hello</title>
    </head>
    <body>
        <?
            echo "<script>document.title='Hello, World!';</script>";
        ?>
    </body>
</html> 
```

# ruby - RVM 安装 ruby 没有这样的文件或目录

> ID：16005384
> 
> 赞同：3
> 
> 时间：2013-04-14T23:03:21.510
> 
> 标签：ruby, rvm, ubuntu-12.04

我已经安装`RVM`没有任何问题。但是当我尝试安装`ruby 1.9.3`它时会返回一个错误：

```
ruby-1.9.3-p392 - #configure  
ruby-1.9.3-p392 - #download  
ruby-1.9.3-p392 - #validate archive  
ruby-1.9.3-p392 - #extract  
ruby-1.9.3-p392 - #validate binary  
ruby-1.9.3-p392 - #setup  
/usr/local/rvm/scripts/functions/utility: line 708: /usr/local/rvm/rubies/ruby-1.9.3-p392/bin/ruby: No such file or directory  
/usr/local/rvm/scripts/functions/utility: line 713: /usr/local/rvm/rubies/ruby-1.9.3-p392/bin/ruby: No such file or directory  
ln: target `/gems/' is not a directory: No such file or directory  
Saving wrappers to '/usr/local/rvm/wrappers/ruby-1.9.3-p392'........  
ruby-1.9.3-p392 - #importing default gemsets, this may take time...............................  
Making gemset ruby-1.9.3-p392 pristine.....  
Making gemset ruby-1.9.3-p392@global pristine.....  
brian@vs3594:~$ rvm use --default 1.9.3  
Using /usr/local/rvm/gems/ruby-1.9.3-p392  
brian@vs3594:~$ rvm use 1.9.3  
Using /usr/local/rvm/gems/ruby-1.9.3-p392  
brian@vs3594:~$ ruby -v  
-bash: /usr/local/rvm/rubies/ruby-1.9.3-p392/bin/ruby: No such file or directory  
brian@vs3594:~$ rvm use system  
Now using system ruby.  
brian@vs3594:~$ ruby -v  
ruby 1.8.7 (2011-06-30 patchlevel 352) [i686-linux] 
```

我迷失了。任何帮助表示赞赏！

使用 Ubuntu 12.04 LTS 32 位全新安装

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-08-14T19:43:38.340

> /usr/local/rvm/脚本/函数/实用程序

您使用通用的多用户安装方式安装了 RVM，除非您支持共享主机，否则不建议这样做。对于大多数用途，您应该使用单用户安装，这会将 RVM 以及与之关联的所有 Rubyies 和 gem 放在 ~/.rvm 中。通过在 /usr/local 中安装，修改或安装新 Ruby 所需的每个操作都将涉及使用升级权限。

安装 RVM 时，阅读、理解并遵循[RVM 站点上的安装说明](http://rvm.io/rvm/install)非常重要，而不是您在其他站点上找到的说明，这些说明可能与您的确切情况或可能已经过时有关，也可能不适合。在[RVM 的安装页面](http://rvm.io/rvm/install)中，作者具体说：

> 外部教程
> 
> 请注意，任何外部教程都不受支持，无论它们是否有效。教程很棒，但是我们花费了大量的工时来调试安装过程。请仅使用此站点的安装过程，因为这是唯一受支持的安装类型和方法。

RVM 是一个强大的工具，自从它首次推出以来，它已经有了很大的发展，RVM 的作者是如何安装它的最佳来源。

几年前写过关于如何安装它的页面的人当时可能是准确的，但几年后所有关于它们的准确性的赌注都没有了。

# c# - 如何在 FTP 服务器上复制文件？

> ID：16005388
> 
> 赞同：7
> 
> 时间：2013-04-14T23:04:08.453
> 
> 标签：c#, asp.net, networking, ftp, copy

如何在 FTP 服务器上复制文件？我的目标是复制`ftp://www.mysite.com/test.jpg`到`ftp://www.mysite.com/testcopy.jpg`. 要重命名文件，我会使用：

```
var request = (FtpWebRequest)WebRequest.Create("ftp://www.mysite.com/test.jpg");
request.Credentials = new NetworkCredential(user, pass);
request.Method = WebRequestMethods.Ftp.Rename;
request.RenameTo = "testrename.jpg"
request.GetResponse().Close();

FtpWebResponse resp = (FtpWebResponse)request.GetResponse(); 
```

但是，没有复制文件的方法。您将如何复制文件？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-14T23:50:08.237

尝试这个：

```
static void Main(string[] args)
{
    CopyFile("countrylist.csv", "MySample.csv", "username", "password#");
}

public static bool CopyFile(string fileName, string FileToCopy, string userName, string password)
{
    try
    {
        FtpWebRequest request = (FtpWebRequest)WebRequest.Create("ftp://ftp.mysite.net/" + fileName);
        request.Method = WebRequestMethods.Ftp.DownloadFile;

        request.Credentials = new NetworkCredential(userName, password);
        FtpWebResponse response = (FtpWebResponse)request.GetResponse();
        Stream responseStream = response.GetResponseStream();
        Upload("ftp://ftp.mysite.net/" + FileToCopy, ToByteArray(responseStream), userName, password);
        responseStream.Close();
        return true;
    }
    catch
    {
        return false;
    }
}

public static Byte[] ToByteArray(Stream stream)
{
    MemoryStream ms = new MemoryStream();
    byte[] chunk = new byte[4096];
    int bytesRead;
    while ((bytesRead = stream.Read(chunk, 0, chunk.Length)) > 0)
    {
        ms.Write(chunk, 0, bytesRead);
    }

    return ms.ToArray();
}

public static bool Upload(string FileName, byte[] Image, string FtpUsername, string FtpPassword)
{
    try
    {
        System.Net.FtpWebRequest clsRequest = (System.Net.FtpWebRequest)System.Net.WebRequest.Create(FileName);
        clsRequest.Credentials = new System.Net.NetworkCredential(FtpUsername, FtpPassword);
        clsRequest.Method = System.Net.WebRequestMethods.Ftp.UploadFile;
        System.IO.Stream clsStream = clsRequest.GetRequestStream();
        clsStream.Write(Image, 0, Image.Length);

        clsStream.Close();
        clsStream.Dispose();
        return true;
    }
    catch
    {
        return false;
    }
} 
```

这会将文件下载到流中，然后上传。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T23:14:34.373

FtpWebRequest 是一个轻量级的类。微软认为它应该被简单的客户端用来在客户端完成后下载和删除文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-14T23:43:02.493

我猜你不能用FTP真正做到这一点。您可以做的是下载要复制的文件，然后使用新名称上传。例如：

```
 try
        {
            WebClient request = new WebClient();
            request.Credentials = new NetworkCredential(user, pass);
            byte[] data = request.DownloadData(host);
            MemoryStream file = new MemoryStream(data);
            Upload(data);
        }
        catch (Exception ex)
        {

        }

    ...

    private void Upload(byte[] buffer)
    {
        try
        {
            FtpWebRequest request = (FtpWebRequest)FtpWebRequest.Create(newname);

            request.Method = WebRequestMethods.Ftp.UploadFile;
            request.Credentials = new NetworkCredential(user, pass);

            Stream reqStream = request.GetRequestStream();
            reqStream.Write(buffer, 0, buffer.Length);
            reqStream.Close();

            var resp = (FtpWebResponse)request.GetResponse();
        }
        catch (Exception ex)
        {

        }
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-09-17T13:11:08.257

在我们的项目中，我们做了这样的事情

```
// pass parameters according to your need, 
// the below code is done in a hard coded manner for clarity
public void Copy()  
{
    // from where you want to copy
    var downloadRequest = (FtpWebRequest)WebRequest.Create("ftp://www.mysite.com/test.jpg");
    downloadRequest.Credentials = new NetworkCredential("userName", "passWord");
    downloadRequest.Method = WebRequestMethods.Ftp.DownloadFile;

    var ftpWebResponse = (FtpWebResponse)downloadRequest.GetResponse();
    var downloadResponse = ftpWebResponse.GetResponseStream();

    int buffLength = 2048;
    byte[] byteBuffer = new byte[buffLength];

    // bytes read from download stream. 
    // from documentation: When overridden in a derived class, reads a sequence of bytes from the  
    // current stream and advances the position within the stream by the number of bytes read.
    int bytesRead = downloadResponse.Read(byteBuffer, 0, buffLength);

    // the place where you want the file to go
    var uploadRequest = (FtpWebRequest)WebRequest.Create("ftp://www.mysite.com/testCopy.jpg");
    uploadRequest.Credentials = new NetworkCredential("userName", "passWord");
    uploadRequest.Method = WebRequestMethods.Ftp.UploadFile;

    var uploadStream = uploadRequest.GetRequestStream();

    if (bytesRead > 0)
    {
        while (bytesRead > 0)
        {
            uploadStream.Write(byteBuffer, 0, bytesRead);
            bytesRead = downloadResponse.Read(byteBuffer, 0, buffLength);
        }
    }

    uploadStream.Close();
    uploadStream.Dispose();

    downloadResponse.Close();
    ftpWebResponse.Close();
    ((IDisposable)ftpWebResponse).Dispose();
} 
```

# c++ - C++ 将程序分解为函数

> ID：16005389
> 
> 赞同：0
> 
> 时间：2013-04-14T23:04:17.687
> 
> 标签：c++, function

我的任务是使用 3 个带参数的函数，如下所示：

1.  函数 calcRegBill – 接受一个整数参数来表示使用的分钟数。确定并返回到期总金额。

2.  函数 calcPremBill – 接受两个整数参数，分别表示使用的白天分钟数和夜间分钟数。确定并返回到期总金额。

3.  函数 printBill – 接受 4 个参数：字符串帐号、字符服务代码、使用的整数总分钟数和到期金额。请注意，这是一个通用的打印账单功能，它使用以下格式打印普通账单或保费账单：

帐号：XXXX

服务类型：常规（或高级，取决于收到的字符）

总分钟数：XXX

应付金额：$XXX.XX

您的主要功能将提示用户输入帐号和服务代码。根据服务代码，main 将询问正确的分钟数，然后根据需要调用上面的函数来完成工作。此外，您必须：

在您的程序中加入一个循环，以根据需要多次运行账单。您可以通过哨兵控制循环或计数器控制循环来执行此操作。

**我已经构建了程序并使用程序主要功能中的所有内容对其进行了测试。我真的很困惑如何将它分解为 3 个单独的功能并让它仍然有效。我是 C++ 的菜鸟**

这是到目前为止的程序，我开始添加功能，但我不相信它们是正确的。

```
// Cell Bill Fun
// April 14, 2013

#include <iostream>
#include <iomanip>

using namespace std;

double calcRegBill(int a);

double calcPremBill(int b, int c);

void printBill(string acctNumber, char serviceCode, int d, double e);

int main()
{

//declare variables for question 4

char serviceCode;
int acctNumber;
int minutes;
int dayMinutes;
int nightMinutes;
int charge;
int dayFee;
int nightFee;
double amtDue;

//get input
cout << "Please enter your information to calculate your cell phone bill ";
cout << "What is your account number? (please enter a 4-digit number-example 1234): ";
cin >> acctNumber;
cout << "Do you have regular or premium service? Enter r for regular service, p for   Premium.: ";
cin >> serviceCode;

//format output
cout<< setprecision(2) << fixed;
//output

 switch (serviceCode)
{
    case 'r':{
cout << "How many minutes did you use?: ";
cin >> minutes;
    if (minutes <= 50)
    amtDue = 10;
    else if (minutes > 50)
     amtDue=10+((minutes-50)*.20);
    else
        cout <<"You have input an invalid service code. Please type r for regular or p for premium service." << endl;

cout <<"Cellular Account #:" << acctNumber << endl;
cout <<"Type of Service: Regular" << endl;
cout <<"Total Minutes:" << minutes << endl;
cout <<"Amount Due: $"<< amtDue << endl;}
break;

case 'R':{
cout << "How many minutes did you use?: ";
cin >> minutes;
    if (minutes <= 50)
    amtDue = 10;
    else if (minutes > 50)
     amtDue=10+((minutes-50)*.20);
    else
        cout <<"You have input an invalid service code. Please type r for regular or p for premium service." << endl;

cout <<"Cellular Account #:" << acctNumber << endl;
cout <<"Type of Service: Regular" << endl;
cout <<"Total Minutes:" << minutes << endl;
cout <<"Amount Due: $"<< amtDue << endl;}
break;

case 'p':
    cout << "How many daytime minutes did you use?";
    cin >> dayMinutes;
    if (dayMinutes <= 75)
    dayFee = 0;
    else if (dayMinutes > 75)
    dayFee=((dayMinutes-75)*.10);
    cout << "How many night time minutes did you use?";
    cin >> nightMinutes;
    if (nightMinutes <= 100)
    nightFee = 0;
    else if (nightMinutes > 100)
    nightFee=((nightMinutes-100)*.05);
    else
        cout <<"You have input an invalid service code. Please type r for regular or p for premium service." << endl;

cout <<"Cellular Account #:" << acctNumber << endl;
cout <<"Type of Service: Premium" << endl;
cout <<"Total Minutes:" <<dayMinutes+nightMinutes << endl;
cout <<"Amount Due: $"<<25<<"+"<<dayFee<<"+"<<nightFee<<"= $"<<25+dayFee+nightFee << endl;
break;

case 'P':
cout << "How many daytime minutes did you use?";
    cin >> dayMinutes;
    if (dayMinutes <= 75)
    dayFee = 0;
    else if (dayMinutes > 75)
    dayFee=((dayMinutes-75)*.10);
    cout << "How many night time minutes did you use?";
    cin >> nightMinutes;
    if (nightMinutes <= 100)
    nightFee = 0;
    else if (nightMinutes > 100)
    nightFee=((nightMinutes-100)*.05);
    else
        cout <<"You have input an invalid service code. Please type r for regular or p for premium service." << endl;

cout <<"Cellular Account #:" << acctNumber << endl;
cout <<"Type of Service: Premium" << endl;
cout <<"Total Minutes:" <<dayMinutes+nightMinutes << endl;
cout <<"Amount Due: $"<<25<<"+"<<dayFee<<"+"<<nightFee<<"= $"<<25+dayFee+nightFee << endl;
break;

default:

cout << "Invalid Service Code. Enter r for regular service, p for Premium.";

}

return 0;

}
double calcRegBill(int a)

{

}
double calcPremBill(int b, int c)

{

}

void printBill(string acctNumber, char serviceCode, int d, double e )
{

return;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T23:25:36.003

函数通过请求数据（传递给它们的参数）来工作，并且通常通过返回数据来操作这些数据。

例如，在`case 'r':`块中，而不是你的代码，你会想要：

```
cout << "How many minutes did you use?: ";
cin >> minutes;

amtDue = calcRegBill(minutes);

cout <<"Cellular Account #:" << acctNumber << endl;
cout <<"Type of Service: Regular" << endl;
cout <<"Total Minutes:" << minutes << endl;
cout <<"Amount Due: $"<< amtDue << endl;}
break; 
```

然后，您可以将之前在 main 中计算 amtDue 的代码移动到`calcRegBill()`函数中，如下所示：

```
double calcRegBill(int minutes)
{
    double bill;

    if (a < 50)
        bill = 10;

    else
        bill = 10+((minutes-50)*.20);

    return bill;
} 
```

这里的关键是不是在主函数中计算amtDue，而是在函数中计算`calcRegBill`并返回给主函数。另外，请注意我将参数的名称从 更改`a`为`minutes`。这提高了其在函数中的用途的清晰度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T23:11:47.140

你的程序的一般结构大多是正确的，我不确定你在问什么。

对于故障排除，编写您的一个函数并在没有所有其他内容的情况下对其进行测试。例如，写 calcRegBill...

然后写一个很简单的main：

```
int main() {
  cout << calcRegBill(3) << endl;
  cout << calcRegBill(11) << endl;
} 
```

你得到预期的值了吗？如果是这样，那么继续下一个功能。开发通常是将问题分解为更小的可管理问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T23:22:16.183

你需要分解你正在做的事情的流程。

1.  首先，你收集信息。注意：无论是保费账单还是普通账单，您要查找的信息都是相同的。你不需要这么早分支。
2.  为了计算他们的账单，您根据保费或常规进行分支。无论哪种方式，您都可以从中获得 a `double`，因此您可以拥有一个`double`变量来存储来自`calcRegBill`或其中的​​回报`calcPremBill`。在分支之前声明这个`double`变量，在你的两个分支（常规或高级）内分配给它。
3.  然后，当您调用 时`printBill`，您可以传递此值以及它是什么类型的账单。

# outlook - 不在组织者域中的收件人丢失 AppointmentItem.UserProperties

> ID：16005390
> 
> 赞同：0
> 
> 时间：2013-04-14T23:04:18.220
> 
> 标签：outlook, vsto, ms-office, exchange-server, office-interop

Outlook 2010 设置：Exchange 帐户 #1（域 A） Exchange 帐户 #2（域 A） Exchange 帐户 #3（域 B）

Windows 8 企业版机器。我已登录域 A。我在所有 Exchange 帐户上都收到/发送电子邮件。每当我创建会议请求时，Exchange 帐户 #3 都不会读取自定义用户属性值。有空值或空白值。假设代码填充 this.FormRegionShowing 事件上的区域控件。这两个域相互联合。我难住了。

```
Textbox1.Text = (string)appointmentItem.ItemProperties[PropertyVariables.Property1].Value;
Textbox2.Text = (string)appointmentItem.ItemProperties[PropertyVariables.Property2].Value;
Checkbox1.Checked = (bool)appointmentItem.ItemProperties[PropertyVariables.Property3].Value; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T05:01:59.563

这是意料之中的 - 当会议邀请/更新通过 SMTP 发送时，它会转换为 iCal，并且所有 MAPI 特定属性都将被剥离。

您可以尝试使用 MeetingItem.PropertyAccessor 设置特殊的 UseTnef MAPI 属性（DASL 名称[http://schemas.microsoft.com/mapi/id/{00062008-0000-0000-C000-000000000046}/8582000B](http://schemas.microsoft.com/mapi/id/)），但您可以这样做仅在 Application.ItemSend 事件中（因为 MeetingItem 是由 Outlook 创建的，而不是您的代码）。

# heap - 优先级队列 O(1) 插入、删除最小和减少键？

> ID：16005392
> 
> 赞同：0
> 
> 时间：2013-04-14T23:04:37.563
> 
> 标签：heap, complexity-theory, priority-queue

我在算法书中看到了这个关于优先级队列的“绝望挑战”：

“ O(1) 插入、删除最小和减少键。为什么不可能？”

是因为唯一的方法是用某种堆来实现它，而堆总是需要登录时间来删除最小（即使摊销）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T01:10:04.203

我假设一个众所周知的事实，即对 n 个整数进行排序需要时间 n * log(n) 并且我假设 delete-min 实际上找到了最小值（并且可以，例如返回它）。

面对矛盾，假设我们有一个像你描述的那样的数据结构。然后，为了对 n 个整数进行排序，我们首先将它们全部插入数据结构中，因此需要时间 O(n)。然后我们重复 delete-min 直到结构为空。这给了我们时间 O(n) 的排序整数，给我们一个矛盾。因此，该数据结构不存在。

# ios - 标签栏不出现

> ID：16005394
> 
> 赞同：0
> 
> 时间：2013-04-14T23:04:55.180
> 
> 标签：ios, objective-c, uitabbar

该项目的标签栏没有显示，而是只显示一个黑屏。此标签栏在应用程序委托中的应用程序启动中实用地进入。

```
main_tab=[[UITabBarController alloc]init];
viewcontroller = [[HomeViewController alloc]init];
viewcontroller.title =@"Home";
UINavigationController *nav =[[UINavigationController alloc]initWithRootViewController:viewcontroller];

viewcontroller1 = [[SearchViewController alloc]init];
viewcontroller1.title =@"Search";
UINavigationController *nav1 =[[UINavigationController alloc]initWithRootViewController:viewcontroller1];

tabs_array=[[NSArray alloc]initWithObjects:nav,nav1, nil];
main_tab.viewControllers=tabs_array;
[self.window addSubview:main_tab.view];
[self.window makeKeyAndVisible];

return YES; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T23:17:10.287

尝试替换此行

```
 [self.window addSubview:main_tab.view]; 
```

有了这个

```
 self.window.rootViewController = main_tab; 
```

# c++ - 数组 C++ 的概率

> ID：16005397
> 
> 赞同：-1
> 
> 时间：2013-04-14T23:05:28.383
> 
> 标签：c++, arrays, random, probability

我有一个包含不同选择概率的数组。例如：

数组 1 具有 {5, 3, 2, 7, 1} 值。选项“0”有 5/18 的机会被选中，选项“1”有 3/18 的机会……以此类推。“18”是数组值的总和。

这是我的代码（在这种情况下，我们有 8 个选择）：

```
int i = rand() % sumofvaluesofarray; //edited from array_size
int c = 0;
int sum = 0;
while(c < 8){
    sum += array[c]；
    if(i < sum){
        choice = c;
        break;
    }
    c += 1;
} 
```

这都是非工作程序的一部分，但是我怀疑问题出在这部分代码上。有什么问题吗？有没有更有效地编写这段代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T23:10:09.807

*提问者不断更改他们的代码。请注意未来的提问者：请在编译时准确发布您的代码。*

~~好像你有几个问题。首先，您应该创建一个`18`不超过数组大小的随机数：~~

 ~~```
int i = rand() % 18; 
```~~ 

请注意，这并不一定会`i`根据均匀分布给您（仅当它`RAND_MAX`是 18 的倍数时才会给您）。

此外，您`c`最多循环 8 个，而应该是 5 个：

```
while(c < 5){ 
```

~~否则，您将访问`array`.~~

此行中还有一个全宽分号 unicode 字符 (U+FF1B)：

```
sum += array[c]；
//             ^ 
```

您是从文档中复制的吗？确保它是一个普通的分号字符 (U+003B)。

如果您使用的是 C++11 编译器，则可以停止关心如何有效地编写它，而只需使用`<random>`标头：

```
std::random_device rd;
std::mt19937 gen(rd());
std::discrete_distribution<> d(std::begin(array), std::end(array)); 
```

有了这个，您可以通过调用根据离散分布生成随机值`d(gen)`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T23:08:19.157

```
int i = rand() % size_array;
int c = 0;
int sum = 0;
while(c < 8){
    sum += array[c];    // Missing semicolon
    if(i < sum){
    choice = c;
    break;
    }
    c += 1;
} 
```

你错过了一个分号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T23:57:23.260

如果您想知道代码中的算法是否正常工作，请将其写入函数并为其创建[单元测试](http://en.wikipedia.org/wiki/Unit_testing)。通过这种方式，您可以为函数提供一组预定的参数，这些参数可以与预期结果进行比较。现在，当您进入调试会话时，您可以合理地假设该功能正常工作，然后您可以专注于代码的其他区域。

# python - CommandError：一个或多个模型未验证

> ID：16005401
> 
> 赞同：4
> 
> 时间：2013-04-14T23:07:08.627
> 
> 标签：python, django, django-models, porting

在 Django 下，对于与以前版本的 Python 和 Django 一起工作的项目（阅读：也许这是一个移植问题），我得到：

```
CommandError：一个或多个模型未验证：
directory.phone：字段“entity”的反向查询名称与字段“Entity.phone”冲突。将related_name 参数添加到“实体”的定义中。

```

我需要做什么？我的`models.py`文件如下：

```
#!/usr/bin/python
# coding = UTF-8

from django.contrib import admin
from django.contrib.contenttypes import generic
from django.contrib.contenttypes.models import ContentType
from django.core.exceptions import ValidationError
from django.db import models

import datetime
import directory
import django.forms
import re

OFFICE_CHOICES = (
  (u'CN', u'Chicago North Office, Illinois, USA'),
  (u'CS', u'Chicago South Office, Illinois, USA'),
  (u'WH', u'Wheaton Office, Illinois, USA'),
  (u'SY', u'Sydney Office, New South Wales, Australia'),
  )

EDIT_CHOICES = (
  (u'a', u'Foreign key relationship changed.'),
  (u'b', u'Image changed.'),
  (u'c', u'Instance created.'),
  (u'd', u'Instance deleted.'),
  (u'e', u'Many to many relationship added.'),
  (u'f', u'Many to many relationship deleted.'),
  (u'g', u'One to many relationship added.'),
  (u'h', u'One to many relationship deleted.'),
  (u'i', u'Text changed.'),
  )

TIME_ZONE_CHOICES = (
  (None, "Select"),
  ("1.0", "A: Paris, +1:00"),
  ("2.0", "B: Athens, +2:00"),
  ("3.0", "C: Moscow, +3:00"),
  ("4.0", "D: Dubai, +4:00"),
  ("4.5", "-: Kabul, +4:30"),
  ("5.0", "E: Karachi, +5:00"),
  ("5.5", "-: New Delhi, +5:30"),
  ("5.75", "-: Kathmandu, :5:45"),
  ("6.0", "F: Dhaka, +6:00"),
  ("6.5", "-: Rangoon, +6:30"),
  ("7.0", "G: Jakarta, +7:00"),
  ("8.0", "H: Kuala Lumpur, +8:00"),
  ("9.0", "I: Tokyo, +9:00"),
  ("9.5", "-: Adelaide, +9:30"),
  ("10.0", "K: Sydney, +10:00"),
  ("10.5", "-: Lord Howe Island, +10:30"),
  ("11.0", "L: Solomon Islands, +11:00"),
  ("11.5", "-: Norfolk Island, +11:50"),
  ("12.0", "M: Auckland, +12:00"),
  ("12.75", "-: Chatham Islands, +12:45"),
  ("13.0", "-: Tonga, +13:00"),
  ("14.0", "-: Line Islands, +14:00"),
  ("-1.0", "N: Azores, -1:00"),
  ("-2.0", "O: Fernando de Norohna, -2:00"),
  ("-3.0", "P: Rio de Janiero, -3:00"),
  ("-3.5", "-: St. John's, -3:50"),
  ("-4.0", "Q: Santiago, -4:00"),
  ("-4.5", "-: Caracas, -4:30"),
  ("-5.0", "R: New York City, -5:00"),
  ("-6.0", "S: Chicago, -6:00"),
  ("-7.0", "T: Boulder, -7:00"),
  ("-8.0", "U: Los Angeles, -8:00"),
  ("-9.0", "V: Anchorage, -9:00"),
  ("-9.5", "-: Marquesas Islands, -9:30"),
  ("-10.0", "W: Hawaii, -10:00"),
  ("-11.0", "X: Samoa, -11:00"),
  ("-12.0", "Y: Baker Island, -12:00"),
  ("0.0", "Z: London, +0:00"),
  )

FOREIGN_KEY_RELATIONSHIP_CHANGED = u'a'
IMAGE_CHANGED = u'b'
INSTANCE_CREATED = u'c'
INSTANCE_DELETED = u'd'
MANY_TO_MANY_RELATIONSHIP_ADDED = u'e'
MANY_TO_MANY_RELATIONSHIP_DELETED = u'f'
MANY_TO_ONE_RELATIONSHIP_ADDED = u'g'
MANY_TO_ONE_RELATIONSHIP_DELETED = u'h'
TEXT_CHANGED = u'i'

class EditTrail(models.Model):
    change_set = models.IntegerField()
    change_type = models.CharField(max_length = 1, choices = EDIT_CHOICES)
    content_object = generic.GenericForeignKey(u'content_type', u'object_id')
    content_type = models.ForeignKey(ContentType)
    field_name = models.TextField(null = True, blank = True)
    foreign_key_added = generic.GenericForeignKey()
    foreign_key_deleted = generic.GenericForeignKey()
    in_effect = models.BooleanField()
    instance = generic.GenericForeignKey()
    ip = models.IPAddressField()
    object_id = models.PositiveIntegerField()
    session = models.TextField(null = True, blank = True)
    text_after = models.TextField(null = True, blank = True)
    text_before = models.TextField(null = True, blank = True)
    timestamp = models.DateTimeField(default = datetime.datetime.now, blank =
      True)
    username = models.TextField(null = True, blank = True)
    def format_timestamp(self):
        return directory.functions.format_timestamp(self.timestamp)

class ExtensionField(models.TextField):
    def __init__(self, *arguments, **keywords):
        models.TextField.__init__(self, *arguments, **keywords)

def gps_validator(value):
    # Create a normalized working copy of the value.
    working_copy = value
    working_copy = working_copy.replace(u'\n', u',')
    working_copy = working_copy.replace(u'\r', u',')
    working_copy = re.sub(ur',*$', '', working_copy)
    working_copy = re.sub(ur',+', u',', working_copy)
    if not u',' in working_copy and not \
      re.match(ur'.* .* .*', working_copy):
        working_copy = working_copy.replace(u' ', u',')
    working_copy = re.sub(u'[\00B0\2018\2019\201C\201D\'"]', ' ', working_copy)
    working_copy = working_copy.replace(u',', u', ')
    working_copy = re.sub(ur'\s+', u' ', working_copy)
    working_copy = working_copy.strip()
    working_copy = working_copy.upper()
    # Test the normalized working copy against regular expressions for different kinds of GPS format.
    if re.match(ur'[-NS]? ?\d{1,3} [0-5]\d [0-5]\d(\.\d+)[NS]?, [-EW]? ?\d{1,3} [0-5]\d [0-5]\d(\.\d+)[EW]?', working_copy):
        return working_copy
    elif re.match(ur'[-NS]? ?\d{1,3} [0-5]\d(\.\d+)[NS]?, [-EW]? ?\d{1,3} [0-5]\d(\.\d+)[EW]?', working_copy):
        return working_copy
    elif re.match(ur'[-NS]? ?\d{1,3}(\.\d+)[NS]?, [-EW]? ?\d{1,3}(\.\d+)[EW]?', working_copy):
        return working_copy
    else:
        raise ValidationError(u'We could not recognize this as a valid GPS coordinate.')

class GPSField(models.TextField):
    default_error_messages = {
        u'invalid': u'We could not recognize this as a valid GPS coordinate.',
      }
    default_validators = [gps_validator]

class Increment(models.Model):
    pass

class Location(models.Model):
    identifier = models.TextField(blank = True)
    description = models.TextField(blank = True)
    office = models.CharField(max_length=2, choices=OFFICE_CHOICES, blank =
      True)
    postal_address = models.TextField(blank = True)
    room = models.TextField(blank = True)
    coordinates = GPSField(blank = True)

class TextURLField(models.URLField):
    def __init__(self, *arguments, **keywords):
        models.URLField.__init__(self, *arguments, **keywords)
    def get_internal_type(self):
        return u'TextField'

# This class is basically the "Person" class; however, it is called "Entity"
# to emphasize that it is intended to accommodate people, offices,
# organizational units, and possibly other areas.
class Entity(models.Model):
    active = models.BooleanField(blank = True)
    department = models.ForeignKey(u'self', blank = True, null =
      True, related_name = u'member')
    description = models.TextField(blank = True)
    gps = GPSField()
    image_mimetype = models.TextField(blank = True, null = True)
    is_invisible = models.BooleanField(default = False)
    location = models.ForeignKey(u'self', blank = True, null = True,
      related_name = u'occupant')
    name = models.TextField(blank = True, default =
      directory.settings.PLACEHOLDER_NAME)
    observes_daylight_saving_time = models.BooleanField(blank = True, default
      = True)
    other_contact = models.TextField(blank = True)
    postal_address = models.TextField(blank = True)
    publish_externally = models.BooleanField(blank = True)
    reports_to = models.ForeignKey(u'self', blank = True, null = True,
      related_name = u'subordinate')
    start_date = models.DateField(blank = True, null = True)
    time_zone = models.CharField(max_length = 5, null = True, choices =
      TIME_ZONE_CHOICES)
    title = models.TextField(blank = True)
    class Meta:
        permissions = (
          ("view_changelog", "View the editing changelog"),
          )

class Tag(models.Model):
    entity = models.ForeignKey(Entity)
    is_invisible = models.BooleanField(default = False)
    text = models.TextField(blank = True)
    def __eq__(self, other):
        try:
            return self.text == other.text
        except:
            return False

class TextEmailField(models.EmailField):
    #entity = models.ForeignKey(Entity)
    def __init__(self, *arguments, **keywords):
        models.EmailField.__init__(self, *arguments, **keywords)
    def get_internal_type(self):
        return u'TextField'

class Email(models.Model):
    email = TextEmailField()
    entity = models.ForeignKey(Entity)
    is_invisible = models.BooleanField(default = False)

class URL(models.Model):
    entity = models.ForeignKey(Entity)
    url = TextURLField()
    is_invisible = models.BooleanField(default = False)

class Phone(models.Model):
    description = models.TextField(blank = True, null = True)
    entity = models.ForeignKey(Entity, blank = True)
    is_invisible = models.BooleanField(default = False)
    number = models.TextField(blank = True)
    def __eq__(self, other):
        try:
            return self.remove_formatting() == other.remove_formatting()
        except:
            return False
    def remove_formatting(self):
        return re.sub(ur'\D', u'', str(self))

class Status(models.Model):
    datetime = models.DateTimeField(default = datetime.datetime.now, blank = True)
    entity = models.ForeignKey(Entity, blank = True)
    is_invisible = models.BooleanField(default = False)
    text = models.TextField(blank = True)
    username = models.TextField(blank = True)
    def format_timestamp(self):
        return directory.functions.format_timestamp(self.datetime)

class EntityForm(django.forms.ModelForm):
    class Meta:
        model = Entity
        fields = (u'name', u'description', u'phone', u'department',
          u'postal_address', u'reports_to', u'active', u'publish_externally')

class LocationForm(django.forms.ModelForm):
    class Meta:
        model = Location 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-15T10:53:52.260

在`Phone`定义中，为`entity`属性添加以下参数：

```
related_name = "entity_phone" 
```

Django 在模型中自动构建反向关系，有时它选择的名称会与其他现有的相关名称发生冲突。因此，您可以明确设置这些名称，以免它们发生冲突。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-14T06:49:34.163

在您的手机型号中

```
class Phone(models.Model):    
    entity = models.ForeignKey(Entity, blank = True, related_name="someName") 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2019-06-27T07:09:42.500

首先尝试重置您的数据库。并删除所有迁移，然后再次运行。如果同样的问题仍然存在。改进问题。

# ubuntu - Vagrant Gitlab 安装失败

> ID：16005404
> 
> 赞同：1
> 
> 时间：2013-04-14T23:07:26.047
> 
> 标签：ubuntu, chef-infra, vagrant, gitlab

我正在尝试为 GitLab 安装此[https://github.com/gitlabhq/gitlab-vagrant-vm](https://github.com/gitlabhq/gitlab-vagrant-vm)开发环境。

当我按照安装说明进行操作时 - 在我的 ubuntu(x64) 机器上的终端中出现以下错误：

```
[2013-04-14T22:59:27+00:00] 错误：运行异常处理程序

[2013-04-14T22:59:27+00:00] 错误：异常处理程序完成

[2013-04-14T22:59:32+00:00] 致命：Stacktrace 转储到 /tmp/vagrant-chef-1/chef-stacktrace.out

[2013-04-14T22:59:32+00:00] FATAL: NoMethodError: gem_package[rvm] (rvm::default line 21) 有一个错误：NoMethodError: undefined method `full_name' for nil:NilClass
厨师从未成功完成！任何错误都应该在
上面的输出。请修复您的食谱，以便它们正确完成。

我找到了 chef-stacktrace.out 文件：

生成于 2013 年 4 月 14 日星期日 22:59:32 +0000
NoMethodError: gem_package[rvm] (rvm::default line 21) 有一个错误：NoMethodError: undefined method `full_name$

/opt/vagrant_ruby/lib/ruby/site_ruby/1.8/rubygems/dependency_installer.rb:134:in `gather_dependencies'

/opt/vagrant_ruby/lib/ruby/site_ruby/1.8/rubygems/dependency_installer.rb:134:in `map'

/opt/vagrant_ruby/lib/ruby/site_ruby/1.8/rubygems/dependency_installer.rb:134:in `gather_dependencies'

/opt/vagrant_ruby/lib/ruby/site_ruby/1.8/rubygems/dependency_installer.rb:268:in `install'

/opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-10.14.2/bin/../lib/chef/provider/package/rubygems.rb:169:in `inst$

/opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-10.14.2/bin/../lib/chef/provider/package/rubygems.rb:192:in `with$

/opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-10.14.2/bin/../lib/chef/provider/package/rubygems.rb:168:in `inst$

/opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-10.14.2/bin/../lib/chef/provider/package/rubygems.rb:103:in `with$

/opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-10.14.2/bin/../lib/chef/provider/package/rubygems.rb:167:in `inst$

/opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-10.14.2/bin/../lib/chef/provider/package/rubygems.rb:476:in `inst$

/opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-10.14.2/bin/../lib/chef/provider/package.rb:81:in `action_install'

/opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-10.14.2/bin/../lib/chef/mixin/why_run.rb:63:in `call'

/opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-10.14.2/bin/../lib/chef/mixin/why_run.rb:63:in `converge!'

/opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-10.14.2/bin/../lib/chef/mixin/why_run.rb:61:in `each'

/opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-10.14.2/bin/../lib/chef/mixin/why_run.rb:61:in `converge!'

/opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-10.14.2/bin/../lib/chef/provider.rb:136:in `converge'

/opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-10.14.2/bin/../lib/chef/provider.rb:125:in `run_action'

/opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-10.14.2/bin/../lib/chef/resource.rb:593:in `run_action'

/tmp/vagrant-chef-1/chef-solo-1/cookbooks/rvm/recipes/default.rb:23:in `from_file'

/opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-10.14.2/bin/../lib/chef/cookbook_version.rb:558:in `load_recipe'

/opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-10.14.2/bin/../lib/chef/mixin/language_include_recipe.rb:46:in `l$

/opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-10.14.2/bin/../lib/chef/mixin/language_include_recipe.rb:33:in `i$

/opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-10.14.2/bin/../lib/chef/mixin/language_include_recipe.rb:27:in `e$

/opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-10.14.2/bin/../lib/chef/mixin/language_include_recipe.rb:27:in `i$

/tmp/vagrant-chef-1/chef-solo-1/cookbooks/rvm/recipes/user_install.rb:20:in `from_file'

/opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-10.14.2/bin/../lib/chef/cookbook_version.rb:558:in `load_recipe'

/opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-10.14.2/bin/../lib/chef/mixin/language_include_recipe.rb:46:in `l$

/opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-10.14.2/bin/../lib/chef/mixin/language_include_recipe.rb:33:in `i$

/opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-10.14.2/bin/../lib/chef/mixin/language_include_recipe.rb:27:in `e$

/opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-10.14.2/bin/../lib/chef/mixin/language_include_recipe.rb:27:in `i$

/tmp/vagrant-chef-1/chef-solo-1/cookbooks/rvm/recipes/user.rb:20:in `from_file'

/opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-10.14.2/bin/../lib/chef/cookbook_version.rb:558:in `load_recipe'

/opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-10.14.2/bin/../lib/chef/mixin/language_include_recipe.rb:46:in `l$

/opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-10.14.2/bin/../lib/chef/mixin/language_include_recipe.rb:33:in `i$

/opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-10.14.2/bin/../lib/chef/mixin/language_include_recipe.rb:27:in `e$

/opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-10.14.2/bin/../lib/chef/mixin/language_include_recipe.rb:27:in `i$

/opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-10.14.2/bin/../lib/chef/run_context.rb:79:in `load'

/opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-10.14.2/bin/../lib/chef/run_context.rb:75:in `each'

/opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-10.14.2/bin/../lib/chef/run_context.rb:75:in `load'

/opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-10.14.2/bin/../lib/chef/client.rb:198:in `setup_run_context'

/opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-10.14.2/bin/../lib/chef/client.rb:418:in `do_run'

/opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-10.14.2/bin/../lib/chef/client.rb:176:in `run'

/opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-10.14.2/bin/../lib/chef/application/solo.rb:230:in `run_applicati$

/opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-10.14.2/bin/../lib/chef/application/solo.rb:218:in `loop'

/opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-10.14.2/bin/../lib/chef/application/solo.rb:218:in `run_applicati$

/opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-10.14.2/bin/../lib/chef/application.rb:70:in `run'

/opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-10.14.2/bin/chef-solo:25

/opt/vagrant_ruby/bin/chef-solo:19:in `load'

/opt/vagrant_ruby/bin/chef-solo:19

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-28T23:59:03.847

我遇到了类似的问题，结果发现 RVM 没有正确安装。就我而言，防火墙挡住了路。显然，您的根本原因可能不同，但请检查您的日志以确保您的 VM 可以访问[RubyGems.org](http://rubygems.org/)，并且 RVM 已正确安装。

# c# - 使用正则表达式在多个 HTML 标记之间获取文本

> ID：16005413
> 
> 赞同：12
> 
> 时间：2013-04-14T23:08:46.533
> 
> 标签：c#, html, regex

使用正则表达式，我希望能够获取多个 DIV 标签之间的文本。例如，以下内容：

```
<div>first html tag</div>
<div>another tag</div> 
```

会输出：

```
first html tag
another tag 
```

我使用的正则表达式模式只匹配我的最后一个 div 标签并且错过了第一个。代码：

```
 static void Main(string[] args)
    {
        string input = "<div>This is a test</div><div class=\"something\">This is ANOTHER test</div>";
        string pattern = "(<div.*>)(.*)(<\\/div>)";

        MatchCollection matches = Regex.Matches(input, pattern);
        Console.WriteLine("Matches found: {0}", matches.Count);

        if (matches.Count > 0)
            foreach (Match m in matches)
                Console.WriteLine("Inner DIV: {0}", m.Groups[2]);

        Console.ReadLine();
    } 
```

**输出：**

找到的匹配项：1

内部 DIV：这是另一个测试

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-14T23:19:07.367

用非贪婪匹配替换您的模式

```
static void Main(string[] args)
{
    string input = "<div>This is a test</div><div class=\"something\">This is ANOTHER test</div>";
    string pattern = "<div.*?>(.*?)<\\/div>";

    MatchCollection matches = Regex.Matches(input, pattern);
    Console.WriteLine("Matches found: {0}", matches.Count);

    if (matches.Count > 0)
        foreach (Match m in matches)
            Console.WriteLine("Inner DIV: {0}", m.Groups[1]);

    Console.ReadLine();
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-10-01T11:58:41.347

正如其他人没有提到的那样`HTML tags with attributes`，这是我的解决方案：

```
// <TAG(.*?)>(.*?)</TAG>
// Example
var regex = new System.Text.RegularExpressions.Regex("<h1(.*?)>(.*?)</h1>");
var m = regex.Match("Hello <h1 style='color: red;'>World</h1> !!");
Console.Write(m.Groups[2].Value); // will print -> World 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-15T03:12:09.410

我认为这段代码应该可以工作：

```
string htmlSource = "<div>first html tag</div><div>another tag</div>";
string pattern = @"<div[^>]*?>(.*?)</div>";
MatchCollection matches = Regex.Matches(htmlSource, pattern, RegexOptions.IgnoreCase | RegexOptions.Singleline);
ArrayList l = new ArrayList();
foreach (Match match in matches)
 {
   l.Add(match.Groups[1].Value);
 } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-15T01:55:31.380

您是否查看过[Html 敏捷包](http://htmlagilitypack.codeplex.com/)（请参阅[https://stackoverflow.com/a/857926/618649](https://stackoverflow.com/a/857926/618649)）？

[CsQuery](https://github.com/jamietre/CsQuery)看起来也非常有用（基本上使用 CSS 选择器样式的语法来获取元素）。请参阅[https://stackoverflow.com/a/11090816/618649](https://stackoverflow.com/a/11090816/618649)。

CsQuery 基本上意味着“C# 的 jQuery”，这几乎是我用来查找它的确切搜索条件。

如果您可以在 Web 浏览器中执行此操作，您可以轻松地使用 jQuery，使用类似于以下的语法`$("div").each(function(idx){ alert( idx + ": " + $(this).text()); }`（只是您显然会将结果输出到日志或屏幕，或使用它进行 Web 服务调用，或任何您需要的做它）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-14T23:20:19.610

首先请记住，在 HTML 文件中，您将有一个换行符（“\n”），您没有将它包含在您用来检查正则表达式的字符串中。

其次，带上你的正则表达式：

```
((<div.*>)(.*)(<\\/div>))+ //This Regex will look for any amount of div tags, but it must see at least one div tag.

((<div.*>)(.*)(<\\/div>))* //This regex will look for any amount of div tags, and it will not complain if there are no results at all. 
```

也是寻找此类信息的好地方：

[http://www.regular-expressions.info/reference.html](http://www.regular-expressions.info/reference.html)

[http://www.regular-expressions.info/refadv.html](http://www.regular-expressions.info/refadv.html)

梅曼

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-14T23:28:30.283

简短的版本是您无法在所有情况下都正确执行此操作。总会有一些有效的 HTML 情况，正则表达式无法提取您想要的信息。

原因是因为 HTML 是一种上下文无关语法，它是一个比正则表达式更复杂的类。

这是一个例子——如果你有多个堆叠的 div 怎么办？

```
<div><div>stuff</div><div>stuff2</div></div> 
```

列为其他答案的正则表达式将抓住：

```
<div><div>stuff</div>
<div>stuff</div>
<div>stuff</div><div>stuff2</div>
<div>stuff</div><div>stuff2</div></div>
<div>stuff2</div>
<div>stuff2</div></div> 
```

因为这就是正则表达式在尝试解析 HTML 时所做的事情。

您无法编写一个能够理解如何解释所有情况的正则表达式，因为正则表达式无法做到这一点。如果您正在处理一组非常具体的受约束的 HTML，这可能是可能的，但您应该牢记这一事实。

更多信息：[https ://stackoverflow.com/a/1732454/2022565](https://stackoverflow.com/a/1732454/2022565)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-02-06T06:30:59.937

我希望下面的正则表达式可以工作：

```
<div.*?>(.*?)<*.div> 
```

你会得到你想要的输出

这是一个测试 这是另一个测试

# java - 启动列表 Android 中的 AsyncTask 内部

> ID：16005415
> 
> 赞同：0
> 
> 时间：2013-04-14T23:09:09.350
> 
> 标签：java, android, list, arraylist, android-asynctask

我正在尝试在`List<String>`内部启动`AsyncTask`并且不再调用整个任务，但没有错误。

需要明确的是，我追求的唯一原因`List`是它让我有机会使用`sublist`.

如果有简单的方法或者您发现了错误，请分享。

```
protected void updateTask()
{
     runOnUiThread(new Runnable() 
     {
         public void run() 
         {
                PatternTask myTask = new PatternTask();
                myTask.execute();
         }
     });
}
private class PatternTask extends AsyncTask<String, Void, String> {

    int eyes_closed;
    int eyes_opened;
    int eyes_avarage;

    String response = "NO DATA";
    protected String doInBackground(String... patterns) {
          String[] looper = getPattern().split("\n");
          List<String> patternList = new ArrayList<String>();
          for (int i = 0; i < looper.length; i++)
          {
             patternList.add(looper[i]); 
          }

          if (patternList.size() > 1200)
          {
                patternList.subList(0, patternList.size() - 1200).clear();
                ...
                ... 
          }
          else
                return response;
        }

        @Override
        protected void onPostExecute(String result) {
            Toast.makeText(FdActivity.this, result, Toast.LENGTH_LONG).show();          
        }       
} 
```

# javascript - 使用 Google 可视化时出现错误“给定大小不同于 2 的行”

> ID：16005417
> 
> 赞同：3
> 
> 时间：2013-04-14T23:09:21.177
> 
> 标签：javascript, jquery, google-visualization

我有一个使用 jQuery/AJAX 提取一些数据的模板。获取数据不是问题，但我似乎无法以 GoogleVis 想要的方式使用它。对我造成问题的线路是`mapdata.addRows([gapidata]);`. 阵列似乎有问题，但我不确定如何解决。任何帮助是极大的赞赏！

我正在使用的 jQuery/AJAX：

```
 var gapidata = new Array();
        $.ajax({
          url: "inc/index.gapi.inc.php",
          cache: false,
        dataType: "text",
          success: function(html){
            gapidata = html;
          }
        }); 
```

我从 AJAX 调用中获得的数据：

```
 ['Korea, Republic of', 50],['Japan', 38] 
```

我用来显示数据的代码：

```
 // Geo Map Chart
        var mapWidth = Math.round(((screenWidth / 12) * 10) * 0.8);
        var mapHeight = Math.round(mapWidth * 0.5);

        $('#dashboard-visit-map').width(mapWidth*1.1);
        $('#dashboard-visit-map').height(mapHeight*1.1);
        var mapdata = new google.visualization.DataTable();
        mapdata.addColumn('string','Country');
        mapdata.addColumn('number','IPs Listed');
        mapdata.addRows([gapidata]);

        var geochart = new google.visualization.GeoChart(document.getElementById('dashboard-visit-map'));
        geochart.draw(mapdata, {width: mapWidth, height: mapHeight,backgroundColor: { fill:'transparent' }}); 
```

目前该地图没有填充任何数据。如果我删除括号，`gapidata`我会在我的 JavaScript 控制台上收到以下错误：

```
 Uncaught Error: Row given with size different than 2 (the number of columns in the table). 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-29T09:20:48.560

我只是在调用渲染函数之前标准化了我的数据框；它对我来说很好。

规范化数据框：

```
data <- as.data.frame.matrix(data) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-27T11:05:13.297

我知道我的回答可能与您的代码格式无关，但它可能会帮助其他人，因为它是针对同一问题的。如果您对 json 数据进行 AJAX 调用，然后循环遍历它们，那么您必须确保在 addCollumn() 方法中包含 JSON 数据的所有列。如果您不想包含所有数据，则应`delete`在 for 循环中使用该命令，如下所示：

```
var dataTable = new google.visualization.DataTable();
dataTable.addColumn('string','category');
dataTable.addColumn('string','context');
dataTable.addColumn('string','id');
dataTable.addColumn('number','location_subtype');
dataTable.addColumn('string','location_type');
dataTable.addColumn('string','month');
dataTable.addColumn('string','persistent_id');
var json=JSON.parse(jsonData);
for (var i=0;i<json.length;i++) {
  //Deleted rows
  delete json[i].location;
  delete json[i].outcome_status;
  var row = [];        
  for (var item in json[i]) {
    row.push(json[i][item]);
  }        
  dataTable.addRow(row);
} 
```

如果您不删除它们，则假定您需要这些数据，并且默认情况下该表采用了意外的大小。因此，您将在控制台中遇到错误。我希望这可能对某些人有所帮助。干杯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-30T10:34:08.380

我有同样的问题。

解决办法是。

为每个 ajax 请求重新初始化您的聊天可视化对象 mapdata；

ie // 在调用ajax之前

```
 mapdata = null;
    mapdata = new google.visualization.DataTable(); 
```

// ajax代码`enter code here`

# php - 如何使用 cURL获取This Text标签内的文本？

> ID：16005421
> 
> 赞同：1
> 
> 时间：2013-04-14T23:09:59.600
> 
> 标签：php, parsing, curl, html-parsing

我收到此错误“致命错误：调用未定义的方法 DOMText::getAttribute()”的代码。我想捕获链接的文本而不是源（我不知道它叫什么）。有人可以向我解释我的错误或告诉我另一种方法吗？这是我的代码：

```
<?php

$target_url = "SITE I WANT";
$userAgent = 'Googlebot/2.1 (http://www.googlebot.com/bot.html)';

// make the cURL request to $target_url
$ch = curl_init();
curl_setopt($ch, CURLOPT_USERAGENT, $userAgent);
curl_setopt($ch, CURLOPT_URL,$target_url);
curl_setopt($ch, CURLOPT_FAILONERROR, true);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
curl_setopt($ch, CURLOPT_AUTOREFERER, true);
curl_setopt($ch, CURLOPT_RETURNTRANSFER,true);
curl_setopt($ch, CURLOPT_TIMEOUT, 10);
$html= curl_exec($ch);
if (!$html) {
    echo "<br />cURL error number:" .curl_errno($ch);
    echo "<br />cURL error:" . curl_error($ch);
    exit;
}

// parse the html into a DOMDocument
$dom = new DOMDocument();
@$dom->loadHTML($html);

// grab all the on the page
$xpath = new DOMXPath($dom);
$hrefs = $xpath->evaluate("/html/body//a/text()");

for ($i = 0; $i < $hrefs->length; $i++) {
    $href = $hrefs->item($i);
    $url = $href->getAttribute('href');
    storeLink($url,$target_url);
    echo "<br />Link stored: $url";
}
$id = "12";
   $query = "DELETE FROM links WHERE id<=$id";
    if(!mysql_query($query))
        echo "DELETE failed: $query<br />" . 
        mysql_error() . "<br /><br />";
        ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T23:52:17.530

你去：

```
$document = new DOMDocument();
$document->loadHTML($html);
$selector = new DOMXPath($document);
$anchors = $selector->query('/html/body//a');

foreach($anchors as $a) { 
    $text = $a->nodeValue;
    $href = $a->getAttribute('href');
    echo($text . ' : ' . $href . '<br />');

} 
```

# c++ - GDB 不会进入用户定义的函数

> ID：16005424
> 
> 赞同：0
> 
> 时间：2013-04-14T23:10:28.487
> 
> 标签：c++, makefile, gdb

我正在为左派堆编译一些代码，我想逐步完成我的 levelorder 遍历函数。但是，每当我在“theheap.levelorder()”处到达断点并键入“step”时，gdb 都会传递代码。

我正在使用 -g 标志进行编译，并尝试了 -fno-inline 无济于事。为什么会这样？

我的makefile如下：

```
all:LeftistHeap.o lab10.o
        g++ LeftistHeap.o lab10.o -g -o lab10

lab10.o:LeftistHeap.h
        g++ -fno-inline -g -c lab10.cpp

LeftistMax.o:LeftistHeap.h LeftistHeap.cpp
        g++ -fno-inline -g -c LeftistHeap.cpp

clean:
        rm *.o *~ lab10 
```

**编辑：** 我有两个 levelorder() 函数：一个是私有的，一个是公共的。我知道这可能是不必要的，但它不应该导致 gdb 像这样行事。

levelorder 在 .h 文件中声明如下：

```
public:
        void levelorder();

private:
        void levelorder(LNode* node); 
```

levelorder 在 .cpp 文件中定义如下：

```
void LeftistHeap::levelorder()
{
  levelorder(root);
}

void LeftistHeap::levelorder(LNode* node)
{ 
  queue<LNode*> currentLevel, nextLevel;
  currentLevel.push(root);
  while(!currentLevel.empty())
  {
    LNode* temp = currentLevel.front();
    currentLevel.pop();
    if(temp)
    {
      cout << temp->key << " ";
      if(temp->lchild != NULL)
        nextLevel.push(temp->lchild);
      if(temp->lchild != NULL)
        nextLevel.push(temp->rchild);
    }
    if(currentLevel.empty())
    {
      cout << endl;
      swapq(currentLevel, nextLevel);
    }
  }
} 
```

# sql - Codeigniter 活动记录问题

> ID：16005425
> 
> 赞同：0
> 
> 时间：2013-04-14T23:10:31.173
> 
> 标签：sql, codeigniter, activerecord, codeigniter-2

好的，所以我有以下 SQL 查询：

```
INSERT INTO film_genre
    (film_id, genre_id)
VALUES
    (1, 1),
    (1, 2),
    (1, 3) 
```

我需要将其转换为 codeigniters 活动记录，这是我目前得到的，但我只得到三个数据条目中的一个：

```
 $movie_genre = array(
            'film_id' => $movies['id'],
            'genre_id' => 1, 
            'film_id' => $movies['id'],
            'genre_id' => 2, 
            'film_id' => $movies['id'],
            'genre_id' => 3, 
            );

$this->db->insert('film_genre', $movie_genre ); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T23:18:38.313

如果您在插入之前执行 a ，您将看到and`print_r($movie_genre)`只有一个值。这是因为数组中的每个键只能有一个值。您正在为每个键定义三个值，因此您之前的值将被覆盖。`film_id``genre_id`

如果您按如下方式格式化数组，则可以使用该`insert_batch`方法。[在http://ellislab.com/codeigniter/user-guide/database/active_record.html](http://ellislab.com/codeigniter/user-guide/database/active_record.html)查看该方法的完整描述

```
$records = array(
    array('film_id' => 1, 'genre_id' => 1),
    array('film_id' => 1, 'genre_id' => 2),
    array('film_id' => 1, 'genre_id' => 3)
);

$this->db->insert_batch('film_genre', $records); 
```

# c# - 精灵无法正确更新

> ID：16005427
> 
> 赞同：0
> 
> 时间：2013-04-14T23:10:42.790
> 
> 标签：c#, performance, xna

我有一个简单的 2D 自上而下的生存游戏，玩家只需在每轮 30 秒内“逃跑”/不与屏幕上的敌人发生碰撞。

每次升级后，每个敌人的数量都会增加。

**问题**

我的一种敌人类型处于搜索/睡眠状态，直到玩家向它靠近一定距离，然后它处于追逐状态，并一直保持这种状态直到回合结束。

在较早的几轮中，屏幕上一次只有大约 30 个敌人，所有行为都可以正常工作。然而，当我开始计数到大约 60 多个敌人时，这个特定的敌人似乎追了玩家一会儿，然后似乎又回到了睡眠状态——考虑到以下情况，这似乎很奇怪；

```
public override void Update(SpriteManager inManager)
{
    this.spriteRectangle.X = (int)position.X;
    this.spriteRectangle.Y = (int)position.Y;

        if (this.collisionRectangle.Intersects(inManager.player.spriteRectangle))
            this.spriteState = SpriteState.Chasing;

        if (this.spriteState == SpriteState.Chasing)
        {
            CheckForPlayer(inManager);
            if (this.spriteRectangle.Intersects(inManager.player.spriteRectangle))
            {
                inManager.player.spriteState = SpriteState.Dead;   
            }
        }

    base.Update(inManager);
}
private void CheckForPlayer(SpriteManager inManager)
{
    if (this.position.X > inManager.player.position.X)
       this.position.X -= X_SPEED;
    else
        this.position.X += X_SPEED;

    if (this.position.Y > inManager.player.position.Y)
        this.position.Y -= Y_SPEED;
    else
        this.position.Y += Y_SPEED;
} 
```

任何人都可以解释为什么他们认为这个问题会发生，我唯一的想法是高精灵（最大为 108）也许他们都没有时间检查玩家，尽管当我考虑更多时我这没有任何意义。

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T23:22:10.960

没有完整的代码很难说，但我认为这是某个地方的一个小错误。您应该尝试调试它并检查状态是否`Chasing`或它是否确实改变了状态。我也遇到了一定数量的对象滞后的问题（可能不是问题），所以这也可能是一种可能性。

# ruby-on-rails - Ruby on Rails：测试值是否存在？

> ID：16005428
> 
> 赞同：0
> 
> 时间：2013-04-14T23:10:52.560
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, testing

我正在尝试测试我的价值观是否存在......不知道该怎么做，我刚刚开始学习 Ruby on Rails。希望有人能指出我正确的方向吗？

可以说我有这个代码块：

```
@lv = {'apple' => ['red', 'round'], 'iPhone' => ['device', 'phone']}

if params[:var]
    @lv.each do |key, tags|
        if params[:var] == key
            lvtags = @lv[params[key]]
            lvtags.each do |tag|
                @tags = client.tag_recent_media(tag)
            end
        end
    end
end 
```

我正在尝试查看循环是否`if params[:var] == key`有效。我想以某种方式输出`alert()`类型的东西，以测试是否`key`有值？有没有类似的东西`alert(key)`？如果`key`有东西会在哪里显示？或者我是否可以测试是否`lvtags`有一个应该弹出的值？

例如，如果`?var=0`

然后我想测试`alert(lvtags)`，因此这应该会弹出`apple`或一些与 . 相关的值`lvtags = @lv[params[key]]`。我们通常如何在 Rails 中测试这样的东西？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T23:22:55.010

你可以做一个`puts key`. [Puts](http://apidock.com/ruby/IO/puts)将其第一个参数转换为字符串并将其输出到标准输出（您的控制台）。

不过，使用调试器可能更容易。您可以使用以下命令打开控制台调试器（想想 gdb）

```
require 'debugger'; debugger 
```

请务必先安装[调试器 gem](https://github.com/cldwalker/debugger)。将以下内容放入您的 Gemfile

```
gem 'debugger', group: [:development, :test] 
```

编辑：添加了调试器 gem 的 github 页面的链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T23:26:14.230

您可以将其登录到您的控制台中。

```
Rails.logger.info key.inspect # or whichever's value you want to check 
```

检查对象时也很有帮助

# javascript - slideDown 和 Up 几个 元素同时

> ID：16005429
> 
> 赞同：0
> 
> 时间：2013-04-14T23:10:54.213
> 
> 标签：javascript, jquery, html-lists, slide

我现在真的被困在这里，只是想知道是否有人能想到一个简单的解决方案来解决我的问题。我有几个嵌套`<ul>`项目，`<li>`每个都有几个，我希望发生以下情况：

每当我单击一个`<li>`项目并且它包含另一个项目时，`<ul>`它应该向下滑动并向我显示所有列表项目，同时关闭同一“嵌套级别”上的其他列表。我试图意识到这一点，但我真的不想为每个可能的星座编写一些代码，我认为有一种更简单的方法。

为了更好地理解：http: [//jsfiddle.net/7zTc2/1/](http://jsfiddle.net/7zTc2/1/)

不知何故，该示例不起作用，但是如果您将内容复制到本地文件中，它就可以工作。我做了前三个列表，我希望它对所有“子”列表也能像这样工作。如果有人可以帮助我，我将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T23:48:43.773

再会！根据我从您的问题中了解到的情况，我是这样做的：

**HTML 标记**

```
<ul>
  <li>
    <span>value 1</span>
    <ul>
      <li>
        <span>inner value 1</span>
        <ul>
          <li>inner inner value 1</li>
          <li>inner inner value 2</li>
          <li>inner inner value 3</li>
        </ul>
      </li>
      <li>
        <span>inner value 2</span>
        <ul>
          <li>inner inner value 1</li>
          <li>inner inner value 2</li>
          <li>inner inner value 3</li>
        </ul>
      </li>
      <li>
        <span>inner value 3</span>
        <ul>
          <li>inner inner value 1</li>
          <li>inner inner value 2</li>
          <li>inner inner value 3</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>
    <span>value 2</span>
    <ul>
      <li>inner value 1</li>
      <li>inner value 2</li>
      <li>inner value 3</li>
    </ul>
  </li>
  <li>
    <span>value 3</span>
    <ul>
      <li>inner value 1</li>
      <li>inner value 2</li>
      <li>inner value 3</li>
    </ul>
  </li>
</ul> 
```

**CSS**

```
li > ul {
  display: none;
} 
```

**jQuery**

```
$("ul > li").has("> ul").click(function(e) {
  e.stopPropagation();
  $(this).find("> ul").slideToggle();
  $(this).siblings("li").find("> ul").slideUp();
});
$("ul > li").click(function(e) {
  e.stopPropagation();
}); 
```

# css - 浏览器作为设计工具 - 更改颜色，保存它们？

> ID：16005435
> 
> 赞同：12
> 
> 时间：2013-04-14T23:11:44.407
> 
> 标签：css, browser, user-experience

我是一名网络开发人员/设计师，我需要我的代码文盲客户能够轻松地弄乱特定元素的颜色，保存这些 CSS 更改并将它们发送给我。我将通过电话指导他们，但我仍然需要它比期望他们在主题表中找到 CSS 选择器并编写十六进制代码更容易。

***我需要一个浏览器内的检查器，它可以允许不识字的人：***

*   **使用 GUI 颜色选择器轻松操作网页元素上的颜色。**
      (+) *Chrome 完美地做到了这一点。这正是我想要的。*
      (-) *Firefox 原本华丽的检查器似乎没有这种基本功能。*
*   **保存受影响的样式表，以便他们将其发送给我。**
      (?) *Firefox 的样式编辑器使保存工作表变得容易，但是对检查元素的更改 - 奇怪的是 - 似乎没有应用。*
      (-) *Chrome 可能在 Sources 面板的深处可以做到这一点，但似乎你需要成为一名黑客才能弄清楚，因为我是一个懂代码的人，我还没有弄清楚出去。*

我发现这个难题的存在非常令人费解——为什么浏览器供应商要费心制作如此丰富的网页编辑套件，其中可以操作 CSS，*但不包含基本的“保存更改”功能？* ***我错过了什么吗？***

## 编辑01：

我发现，在 Chrome 中，可以使用检查器自由操作元素的 CSS，然后单击与每个规则关联的 CSS 表（在规则的右上角），将您带到修改后的 CSS 表中来源选项卡。***这就是我想要保存的。***
   从这里，可以右键单击修改后的源代码中的任意位置，然后另存为——**但奇怪的是，不幸的是，** Chrome 保存了*错误*的源代码。它保存*原始的、未修改的源代码*——而不是您右键单击另存为的修改后的源代码。非常令人沮丧，我目前正在尝试找到解决此错误的方法。*我好近！*

## 编辑02：

好的，我已经想通了。**当您在 Chrome 的 Sources 选项卡中保存文件时，**您不仅仅是在保存该文件——***您实际上是在将 Chrome 设置为在您对其进行的每次更改时不断地自动保存该文件。***
   这实际上很酷，但非常具有误导性。

因此，在您保存 CSS 文件后，***您在检查器中对元素的 CSS 所做的每次更改都会自动保存到该文件中。***即使您重新启动浏览器，这种情况仍然存在。

***出现了混淆，***因为当您将文件标记为自动保存时，然后您将另存为修改后的文件， *Chrome 会奇怪地写入原始文件，而不是您右键单击的文件。*之后，一旦您进行任何更改，Chrome 就会自动将当前对该文件的所有修改写入。*我认为这是 Chrome 中的一个错误。*

***吸取教训，*** *首先，*另存为文件。*其次，*做出改变。
   Presto，您修改后的 CSS 主题在您的硬盘上等着您。

***需要明确的是，***如果您保存，然后进行更改，然后再次保存 - Chrome 将保存*Original Source*，而不是您的 Modified Source 。这使得事情的顺序很重要。

我不知道如何查看当前标记为自动保存的文件列表，或者如何取消标记它们。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-15T00:28:20.610

# 如何使用 Chrome 玩 CSS 并保存

*   **确定要更改的样式表。** *确保只影响与此样式表关联的规则。*
*   **在 Developer Tools 的 Sources 面板中导航到此样式表，*右键单击*它，然后将此文件*另存*为您的计算机。** *您可以通过单击“元素”面板中选定元素的每个 CSS 规则右上角的样式表来快速访问“源”面板中的样式表。*
*   **自由更改与您选择并保存的样式表相关的 CSS 规则。** *Chrome 会自动将每次更改保存到您保存在计算机上的样式表中。*

*但是请记住，*您**必须**按此顺序执行操作。如果您保存样式表，然后进行 CSS 更改，*然后再次保存，* Chrome 会奇怪地将*原始未修改的源*写入文件*（直到您再进行一次更改，这会导致 Chrome 自动保存对文件的所有更改）。*

## 如何与您的客户和朋友一起使用它

*   为您打算让它们使用的每个元素设置一个带有空白（或默认）CSS 规则（具有最高优先级）的主题样式表。
*   通过电话，引导他们从 Sources 面板中 Save-As 这个主题样式表。
*   指导他们检查元素，并使用 Chrome 检查器的 GUI 颜色选择器进行干预并找到他们想要的确切颜色。
*   让他们将保存的样式表发送给您 :)
    *在他们关闭浏览器窗口之前，您最好验证修改是否在他们发送给您的文件中：P*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-14T23:24:24.757

我使用[**这个**](https://chrome.google.com/webstore/detail/devtools-autosave/mlejngncgiocofkcbnnpaieapabmanfl)Chrome 扩展来保存我直接在 Chrome DevTools 中修改的文件。
似乎很难配置它，但它完成了他的工作。另外，我认为它是网络开发人员/设计师的必备品。
也许通过一些调整，你可以让它做你想做的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-10T17:03:18.443

[Sitemod.io](https://chrome.google.com/webstore/detail/sitemodio/efjbaneaebkanjmhengnedpllfdiocin)允许您使用 Chrome 开发人员工具在任何实时或本地网页上编辑任何**HTML**、**CSS**或**JS代码。**完成工作后，您可以保存编辑并获得修改后版本的唯一 URL，以便与客户共享您的 mod。

[这](https://www.youtube.com/watch?v=COzKh56T0OM)是一个示例，说明了如何完成上述操作。

我是这个工具的开发者之一，所以请随时问我任何问题

# java - 将参数传递给 Maven 发布版本

> ID：16005437
> 
> 赞同：12
> 
> 时间：2013-04-14T23:11:56.890
> 
> 标签：java, maven, jenkins, maven-release-plugin

我正在尝试使用 Maven 发布一个库并对 sourceforge 执行站点部署（我首先创建了一个交互式 shell）。发布由 Jenkins 作业完成（使用 Jenkins 的 Maven 发布插件）。

我试过了：

```
-X -e -Dresume=false -Dusername=puce release:prepare release:perform -Darguments="-Dusername=puce" 
```

和

```
-X -e -Dresume=false -Dusername=puce -Darguments=-Dusername=puce release:prepare release:perform 
```

但两次工作都挂在 site:deploy 的第一个模块：

```
 [INFO] --- maven-site-plugin:3.2:deploy (default-deploy) @ myproject-parent ---
 [INFO] Parent project loaded from repository: myGroupId:myOtherproject-parent:pom:1.0
 [INFO] Parent project loaded from repository: myGroupId:myOtherproject-parent:pom:1.0
 Using private key: /opt/jenkins/.ssh/id_dsa 
```

当我停止工作时，最后会打印以下内容：

```
Password for ${username}@shell.sourceforge.net: channel stopped 
```

这可能意味着 ${username} 没有被解析。

如何解决 ${username}？

**编辑：**

请注意，以下运行正常：

```
site-deploy -Psonatype-oss-release -Dusername=puce 
```

**编辑 2：** 作为 release:perform maven 的一部分执行以下命令：

```
/usr/share/maven/bin/mvn -s /tmp/release-settings7797889802430474959.xml deploy site-deploy --no-plugin-updates --batch-mode -Psonatype-oss-release -P nexus -f pom.xml 
```

`-Dusername=puce`似乎没有传递给这个 Maven 命令......

另请注意 help:effective-pom 显示以下 maven-release-plugin 配置：

```
<plugin>
  <artifactId>maven-release-plugin</artifactId>
  <version>2.2.2</version>
  <configuration>
    <mavenExecutorId>forked-path</mavenExecutorId>
    <useReleaseProfile>false</useReleaseProfile>
    <arguments>-Psonatype-oss-release</arguments>
  </configuration>
</plugin> 
```

所以“参数”被定义了，它的值似乎到达了嵌入的 maven 命令，而不是命令行上传递的值......

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-15T04:24:45.560

我过去成功完成的工作如下：

*   在 POM 文件中定义一个属性，例如：

    ```
    <properties>
        <release.arguments></release.arguments>
    </properties> 
    ```

*   将 POM 属性添加到 POM 文件中的插件配置中，例如；

    ```
    <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-release-plugin</artifactId>
        <configuration>
            <arguments>${release.arguments}</arguments>
           ... 
    ```

*   通过命令行上的属性传递参数，例如：

    ```
    mvn release:prepare -Drelease.arguments="-N -Prelease" 
    ```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-15T22:23:56.197

覆盖

```
<plugin>
  <artifactId>maven-release-plugin</artifactId>
  <version>2.2.2</version>
  <configuration>
    <mavenExecutorId>forked-path</mavenExecutorId>
    <useReleaseProfile>false</useReleaseProfile>
    <arguments>-Psonatype-oss-release</arguments>
  </configuration>
</plugin> 
```

和

```
 <plugin>
        <artifactId>maven-release-plugin</artifactId>
        <configuration>
            <mavenExecutorId>forked-path</mavenExecutorId>
            <useReleaseProfile>false</useReleaseProfile>
            <arguments>-Psonatype-oss-release -Dusername=${username}</arguments>
        </configuration>
    </plugin> 
```

其中一位父母成功了。

命令行上的值不会覆盖 POM 中的值似乎是一个错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-28T05:12:10.270

我的解决方案类似于`Sander Verhagen's`. 我只添加了一行。

我如何运行：

```
mvn --batch-mode release:prepare -Denvironment=production 
```

我的配置：

```
<build>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-release-plugin</artifactId>
            <version>2.5.3</version>
            <configuration>
                <tag>${artifactId}-${version}-${environment}</tag>
                <arguments>-Denvironment=${environment}</arguments>
              <releaseProfiles>release</releaseProfiles>
            </configuration>
        </plugin>
    </plugins>
</build> 
```

不同的是，现在我的子模块使用该变量`environment`，我不需要定义它两次（即`-Darguments=-Denvironment=production -Denvironment=production`）。我还给了我不添加属性标签的灵活性。

# jquery - jQuery If/Else 如果不工作

> ID：16005439
> 
> 赞同：1
> 
> 时间：2013-04-14T23:12:13.293
> 
> 标签：jquery, if-statement

我有这个代码：

```
$("#Editing").click(function(){
  if ($(this).attr("class","OptionsOpt-On")) 
    {$(this).attr("class","OptionsOpt-Off"); Edit = false;}

  else if ($(this).attr("class","OptionsOpt-Off")) 
    {$(this).attr("class","OptionsOpt-On"); Edit = true;}
}); 
```

我已经搜索过但无法找到类似的答案，因为我发现的所有问题都与我已确定不在我的代码中的代码存在问题。我不知道为什么“else if”不起作用，但是如果我将其更改为 if，它就可以正常工作...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T23:16:07.283

[`attr`](http://api.jquery.com/attr/#attr2)带有 2 个参数 = setter = 返回一个 jQuery 对象，它始终是一个真实的值。

您应该将其用作[吸气剂](http://api.jquery.com/attr/#attr1)并进行比较：

```
if ( $(this).attr("class") === 'OptionsOpt-On' ) {
//... 
```

虽然[`.hasClass()`](http://api.jquery.com/hasClass/)在这种情况下可能更合适：

```
if ( $(this).hasClass('OptionsOpt-On') ) {
    //...
} else {
    //...
} 
```

由于您的元素不能同时具有两个类，因此您不需要`if`在`else`.

* * *

还假设元素以您可以[`.toggleClass()`](http://api.jquery.com/toggleClass/)用来切换两个类的类之一开始，而无需条件语句：

```
$("#Editing").click(function(){
    $(this).toggleClass('OptionsOpt-On OptionsOpt-Off');
    Edit = $(this).hasClass('OptionsOpt-On');
}); 
```

[**小提琴**](http://jsfiddle.net/pmwT7/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T23:15:53.623

也许您正在尝试这样做：

```
if ($(this).attr("class")=="OptionsOpt-On") 
```

与两个参数一起使用时，该`.attr`函数用作 setter，而用作仅具有一个参数的 getter。

# join - 如何将一个mysql数据库中的2列与不同数据库中的4列连接起来

> ID：16005444
> 
> 赞同：-1
> 
> 时间：2013-04-14T23:12:33.237
> 
> 标签：join

我有 2 个 mysql 数据库。(1) authorID、authorFirst、authorLast。(2) courseID, courseName, courseAuthor1, courseAuthor2, courseAuthor3, courseAuthor4。如何将作者数据库中的 2 列连接到课程数据库中的一个或全部 4 个 courseAuthor 列中？

作者

```
authorID | authorFirst | authorLast
1        |   firstA    |   lastA   
2        |   firstB    |   lastB 
3        |   firstC    |   lastC 
4        |   firstD    |   lastC 
```

培训班

```
courseID | courseName | courseAuthor1 | courseAuthor2 | courseAuthor3 | courseAuthor4
1        | course1    |      2        |     3         |    NULL       |     NULL
2        | course 2   |      1        |     4         |     3         |     NULL
3        | course 33  |      4        |     1         |     2         |     NULL
4        | course 4   |      3        |    NULL       |    NULL       |     NULL 
```

我希望结果看起来像这样：

```
courseID | courseName | courseAuthor1 | courseAuthor2 | courseAuthor3 | courseAuthor4
1        | course1    | firstB LastB  | firstC LastC  |     NULL      |     NULL
2        | course 2   | firstA LastA  | firstD LastD  | firstC LastC  |     NULL
3        | course 33  | firstD LastD  | firstA LastA  | firstB LastB  |     NULL
4        | course 4   | firstC LastC  |    NULL       |    NULL       |     NULL 
```

我什至不知道从哪里开始。这是我的代码：

> SELECT * FROM courses 在 authors.authorID 中加入作者（courses.courseAuthor1、courses.courseAuthor2、courses.courseAuthor3、courses.courseAuthor4）

这表明：

```
results  |  courseID | courseName | courseAuthor1 | courseAuthor2 | courseAuthor3 | courseAuthor4  |  authorID  |  authorFirst  |  authorLast
1        |    1      | course1    |      2        |     3         |    NULL       |     NULL       |      2     |     firstB    |  lastB
2        |    1      | course1    |      2        |     3         |    NULL       |     NULL       |      3     |     firstC    |  lastC
3        |    2      | course 2   |      1        |     4         |     3         |     NULL       |      1     |     firstA    |  lastA
4        |    2      | course 2   |      1        |     4         |     3         |     NULL       |      4     |     firstD    |  lastD
5        |    2      | course 2   |      1        |     4         |     3         |     NULL       |      3     |     firstC    |  lastC
6        |    3      | course 33  |      4        |     1         |     2         |     NULL       |      4     |     firstD    |  lastD
7        |    3      | course 33  |      4        |     1         |     2         |     NULL       |      1     |     firstA    |  lastA
8        |    3      | course 33  |      4        |     1         |     2         |     NULL       |      2     |     firstB    |  lastB
9        |    4      | course 4   |      3        |    NULL       |    NULL       |     NULL       |      3     |     firstC    |  lastC 
```

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T14:41:56.397

我花了一段时间，但我已经回答了我的问题。这里是：

```
SELECT c1.courseID, c1.courseName, 
CONCAT(a1.authorFirst,' ',a1.authorLast) AS aOne, 
CONCAT(a2.authorFirst,' ',a2.authorLast) AS aTwo, 
CONCAT(a3.authorFirst,' ',a3.authorLast) AS aThree, 
CONCAT(a4.authorFirst,' ',a4.authorLast) AS aFour 
FROM courses c1 
LEFT JOIN authors a1 ON c1.courseAuthor1 = a1.authorID 
LEFT JOIN authors a2 ON c1.courseAuthor2 = a2.authorID 
LEFT JOIN authors a3 ON c1.courseAuthor3 = a3.authorID 
LEFT JOIN authors a4 ON c1.courseAuthor4 = a4.authorID 
```

# android - SpannableString - setTag

> ID：16005445
> 
> 赞同：1
> 
> 时间：2013-04-14T23:12:48.803
> 
> 标签：android

SpannableString 没有 setTag，是否有可能的解决方法？最好知道在幕后点击了哪个单词以进行额外的数据处理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T23:13:59.810

创建您自己的[`ClickableSpan`](http://developer.android.com/reference/android/text/style/ClickableSpan.html)包含您想要的数据的子类，并将其应用于您的`SpannableString`.

# javascript - 使用这种 javascript 模式的性能劣势？

> ID：16005447
> 
> 赞同：2
> 
> 时间：2013-04-14T23:13:18.927
> 
> 标签：javascript, design-patterns

我试图在 javascript 中复制私有原型方法并找到这段代码，但我并不完全理解它是如何实现自身的。

代码是...

```
var Foo = function () {};  

Foo.prototype = (function () {  

    // Private attributes  
    var somePrivateAttribute = 'Hello world';  

    // Private methods  
    function somePrivateMethod(val) {  
        alert(val);  
    }  

    // Public attributes and methods  
    return {  
        somePublicMethod: function () {  
            somePrivateMethod(somePrivateAttribute);  
        }  
    };  
})(); 
```

我不明白的是，当这个对象被启动`new Foo()`时，它是否每次都会为原型创建一个新对象，因为它是在一个自执行函数中？谁能解释在我的项目中使用它的好处和坏处。

这种类型的模式如何适用于可能有 500 个实例或只有 1 个实例的对象。我正在努力理解，如果有人能启发我，我将不胜感激？

使用这种方法有什么性能优势吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T23:20:48.933

> 我不明白的是，当这个对象被启动时 new Foo() 是否每次都为原型创建一个新对象，因为它是在一个自执行函数中？

不，这就是原型的意义所在，它们不是重复的——你的每个`Foo`实例都将继承自同一个`Foo.prototype`对象。

> 谁能解释在我的项目中使用它的好处和坏处。

关于命名，您似乎有点误解：那些“私有”事物不是“属性”或“方法”，因为它们与实例对象完全无关。它们只是*局部变量*，只能从您分配给原型对象的函数中访问。

您可能想阅读[JavaScript 闭包是如何工作的？](https://stackoverflow.com/questions/111102/how-do-javascript-closures-work)以及它们在[IIFE](http://benalman.com/news/2010/11/immediately-invoked-function-expression/)中的用途。

> 这种类型的模式如何适用于可能有 500 个实例或只有 1 个实例的对象。

完全没问题。但是，仅对 1 个实例使用构造函数模式可能有点奇怪 - 可以以更简单的方式定义单例。

如果您想了解有关该模式的更多信息，请搜索[显示原型模式](http://www.kristofdegrave.be/2013/01/javascript-oo-programming-using.html)- 它是用于创建原型对象的[显示模块模式。](http://addyosmani.com/resources/essentialjsdesignpatterns/book/#revealingmodulepatternjavascript)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T23:18:58.973

我以前没有见过那种模式，使用一个模块（这就是它的名字）`prototype`......但这是我推荐的；它很相似，但模块包含所有内容：

```
var Foo = (function FooClass() {

  var privateVar = 'Hello world';  

  function privateFunc() {
    ...
  }

  function Foo() {}

  Foo.prototype = {
    publicMethod: function() {
      ...
    }
  };

  return Foo;

}());

var foo = new Foo(); 
```

> 我不明白的是，当这个对象被启动时 new Foo() 是否每次都为原型创建一个新对象，因为它是在一个自执行函数中？

自执行函数运行一次，返回对象，不再运行；它通过闭包保持对变量的引用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T23:33:58.603

> 我不明白的是，当这个对象被启动时 new Foo() 是否每次都为原型创建一个新对象，因为它是在一个自执行函数中？

不，对 Foo 原型的赋值只发生一次。完全没有问题，只是有点不合常规。

你也可以这样写（也是非常规的，但完成同样的事情）：

```
var Foo = function () {};  

Foo.prototype = new function() {  

    // Private attributes  
    var somePrivateAttribute = 'Hello world';  

    // Private methods  
    function somePrivateMethod(val) {  
        alert(val);  
    }  

    // Public attributes and methods  

    this.constructor = Foo;

    this.somePublicMethod = function () {  
        somePrivateMethod(somePrivateAttribute);  
    }  
}; 
```

正如Bergi 指出的那样，这为原型链添加了一个额外的对象；如果你想避免这种情况，你可以这样写：

```
var Foo = function () {};  

(function() {  

    // Private attributes  
    var somePrivateAttribute = 'Hello world';  

    // Private methods  
    function somePrivateMethod(val) {  
        alert(val);  
    }  

    // Public attributes and methods  

    this.somePublicMethod = function () {  
        somePrivateMethod(somePrivateAttribute);  
    }

}).call(Foo.prototype) 
```

通过修改原型而不是替换它，该`constructor`属性也保持不变。

# bluetooth - 告诉蓝牙模块何时连接到 Arduino

> ID：16005454
> 
> 赞同：1
> 
> 时间：2013-04-14T23:14:24.363
> 
> 标签：bluetooth, arduino

我正在使用 Android 和 Arduino 开展一个项目，并试图弄清楚 Arduino 端如何判断蓝牙是否已连接。

我正在使用这些[蓝牙模块](http://www.ebay.com/itm/290859124600?ssPageName=STRK%3aMEWNX%3aIT&_trksid=p3984.m1497.l2649)之一进行连接。我知道我可以通过 Android 发送命令，但我试图在他们连接时自动执行操作，如果可能的话，不必在 Android 上运行后台应用程序。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T16:54:25.737

使用提供的模块，您*不能*：请注意该模块有四个连接器：

*   电源 (Vcc)
*   地面
*   发送（发送）
*   接收（接收）

鉴于此接口，确定蓝牙模块是否配对的唯一方法是将某些内容发送到配对的设备并让它以您的 Arduino 知道它已连接的方式进行响应。例如，如果您的 Android 程序`"Hi there!"`在收到 string 时总是响应`"Hello?"`，那么通过 seingin`"Hello?"`您的 Arduino 将知道它与您的 Android 手机/平板电脑配对。您的 Arduino 可以每分钟（或每五秒）轮询（发送询问字符串）以查看它是否与您的设备配对。

* * *

有一种更好的方法，但它需要您进行一些焊接。如果您的模块基于 HC-03/HC-05，则 PIO9 引脚是“配对指示灯 LED”（请参阅[​​此处](http://elecfreaks.com/store/download/datasheet/Bluetooth/HC-0305%20serail%20module%20AT%20commamd%20set%20201104%20revised.pdf)的数据表）。您可以将该引脚连接到 Arduino 输入引脚并读取电平：读取数字`1`表示设备已配对，而读取数字`0`表示未配对。有可能（尽管不确定）模块上的引脚标记为`STATE`正是这种引脚，即表示配对状态。很遗憾。此引脚未连接到接头，因此您必须将电线焊接到正确的焊盘上才能将其连接到您的 Arduino。您应该首先通过在电压模式下将万用表连接到该焊盘来测试它，并在配对和非配对状态下测量该焊盘和地之间的电位。如果这是响应配对状态的引脚，那么您就是黄金。可能是它指示电源（就像 HC-03/05`PIO8`在打开时会闪烁）。如果事实证明`STATE`pin 不是配对状态，那么您应该向供应商索取数据表，并使用它来查找状态 LED 连接：可能存在一个。找到正确的焊盘后，再次使用电压表验证其功能。然后将电线焊接到该连接并从您的 Arduino 读取它。

**重要提示**：确保您的 Arduino*永远不会*在连接到蓝牙模块状态引脚的 Arduino 引脚上输出数字`1`：这些蓝牙模块在 3.3V 上运行，将任何未受保护的引脚连接到 5V 都会损坏。Vcc 和 Txd 引脚在您购买的模块中发生了电压偏移，但 LED/状态线可能不是。因此，如果连接到蓝牙模块上“状态”的 Arduino 引脚被配置为输出并且您`digitalWrite(HIGH)`使用它，您可能会损坏蓝牙模块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-15T16:37:01.897

从 HC-05 数据表中，我们看到连接状态取决于 PI09 的输出。显然发送“AT+BIND？” 到模块将以“+ POLAR=PI08,PI09”的形式返回 PI08 和 PI09 的状态，但这对我来说毫无意义，因为要获得此信息，您必须进入 AT 模式，进入 AT 模式会中断配对连接，因此它将始终发送标记为“未连接”的 PI09。

因此，为了从 arduinos POV 查看连接是否仍然有效，我只能看到 2 种可行的方法：

*   程序 arduino 每隔一段时间发送一个“你好？” 如果它没有收到预期的“Hi back”响应，则假设它没有连接。
*   将 PI09 连接到 arduino 输入引脚，并在您想检查连接是否处于活动状态时读取它的值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-15T15:08:54.103

不幸的是，`HC-05`配对时会切换状态，但在实际连接到某物之前不会输出 1。

例如，我可以取消手机与 的`HC-05`配对，再次配对，然后 LED 会改变状态，但 STATE 引脚的输出仍然为 0。如果我打开一个应用程序，并手动连接到设备，然后 LED，和状态引脚将改变状态。LED 将定期闪烁两次，并且 STATE 引脚向 Arduino 输出 1。

如果您想读取状态引脚的值，请将电线连接到 arduino 的任何输入，并将代码连接到 Arduino`Serial.println(digitalRead(inputPin));` `inputPin`的输入。

我已经和这个东西斗争了几个月，还没有找到一种方法让这个东西自动连接到我的手机。它甚至不允许我从我的手机连接到它，`HC-05`除非我将应用程序下载到我的 Android 上。可以将 绑定`HC-05`到某个地址，但即使这对我也不起作用。我想弄乱`"AT+CLASS"`命令，但指令背后的文档到目前为止阻碍了我。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-07T17:48:45.840

`AT+STATE?`将返回连接的当前状态。是的，您需要进入模式，这是通过将 HC05 模块上的引脚 11 拉高来完成的。它确实需要焊接，但它有点值得。然后它允许对设备进行完全 AT 控制，然后将其设置为低电平以使其返回正常工作模式。

另一个我不完全理解的选项是`AT+MPIO?`命令，它以我还不理解的一些奇怪的屏蔽格式返回所有引脚的状态。

我使用上面的第一个选项，这样我就可以从我的手机终端（蓝牙）到 HC05 并打开 HC05 上的 LED/继电器等（即，将引脚 2 调至高电平）。这需要进入 AT 模式（引脚 11 高电平），发送命令`AT+PIO=2,1`，然后将引脚 11 设置为低电平以返回正常工作模式。

注意：我注意到我必须在 high 和 AT 和 LOW 命令之间放置 200 毫秒的延迟。安吉拉的解决方案很好——我使用了一个便宜的 XBEE 蓝牙模块（[HC-05 蓝牙蜂主从模块和蓝牙 XBee 用于 Arduino uk2015](http://www.ebay.ie/itm/182073486729?)） 2 个单元（HC05/6）用于 5Stg，它们以 XBEE 格式布局——方便 3.3五。

# c# - 如何从数据库中设置一个带有开始时间和结束时间的倒数计时器？C# ASP.NET

> ID：16005455
> 
> 赞同：0
> 
> 时间：2013-04-14T23:14:27.880
> 
> 标签：c#, asp.net, timer

在我的数据库中，我为“StartDate”和“EndDate”存储了一个 DateTime 值，并且想知道如何使用这两个值创建一个倒数计时器？

我设法使用计时器来创建一个倒计时，但不是两个。有没有办法做到这一点？我目前正在使用 ASP.NET、C# 和 SQL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T23:51:39.537

我认为你可以使用 Ticks。将一些字符串放入数据库并保存刻度值。这几乎就像 guid 的 .. 它永远不会重复。像这样的东西：

```
private string ReturnUniqueTick()
{
    return DateTime.Now.Ticks.ToString();
} 
```

然后你在你的数据库中为这个字段创建一个索引，这将确保你有一个唯一的数字或格式化的字符串..

希望这有帮助。

# sql - SSRS 2005 中的无效列名错误

> ID：16005457
> 
> 赞同：1
> 
> 时间：2013-04-14T23:14:55.417
> 
> 标签：sql, sql-server, reporting-services

我在使用 SSRS 2005 时遇到问题。我有一个案例声明，它在其他查询和报告中运行良好，但由于某种原因在最新报告中出现错误。我不认为这是查询的问题，而是报告服务的问题。我得到的错误是“数据集的查询执行失败，无效的列名'状态'。还有其他人遇到过这个问题吗？你是如何解决的？代码如下以防万一

```
 SELECT Task
         , Account_Num
         , CASE WHEN DATEDIFF(dd,GETDATE(),Due_Date) < 0
                THEN 'Overdue'
                WHEN DATEDIFF(dd,GETDATE(),Due_Date) < 3
                THEN 'Alert'
                ELSE 'Okay'
            END AS Status
       FROM MyDb 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T23:48:32.710

尝试用方括号括住保留字 [status]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-05T22:02:44.873

有时这是由于使用了别名。有时，不允许使用别名，必须输入**完全限定的名称**。

```
ourDatabase.ourTable.ourColumnName 
```

但是，这可能适用于也可能不适用于 OP 的情况。我没有用 Case 语句尝试过。

# c# - 改进此代码： List.Contains Regex 而不创建新的比较对象？

> ID：16005458
> 
> 赞同：1
> 
> 时间：2013-04-14T23:15:15.880
> 
> 标签：c#, refactoring

我放弃了这段代码以在 LinqPad 中实现 List.Contains() 的 Regex 变体。不幸的是，它迫使人们创建一个对象来进行比较，当然静态类不能实现接口。有没有办法在不创建单独的对象进行比较的情况下达到相同的结果？

```
void Main()
{
    var a = new List<string>();
    a.Add(" Monday ");
    a.Add(" Tuesday ");
    a.Add(" Wednesday ");
    a.Add(" Thursday ");
    a.Add(" Friday ");

    a.Contains(@"sday\s$", new ListRegexComparer() ).Dump();
}

// Define other methods and classes here
class ListRegexComparer : IEqualityComparer<string>
{

    public bool Equals(string listitem, string regex)
    {
        return Regex.IsMatch(listitem, regex);
    }

    public int GetHashCode(string listitem)
    {
        return listitem.GetHashCode();
    }

} 
```

编辑：

```
a.Any(s => Regex.IsMatch(s, @"(?i)sday\s$")).Dump() 
```

不错，内嵌的方式，无需创建对象，来自 Chris Tavares 和 Jean Hominal。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T23:22:46.537

```
Regex matcher = new Regex(@"sday\s$");
a.Any(s => matcher.IsMatch(s)).Dump(); 
```

尽管我认为您的意思是不同的列表方法-[根据文档](http://msdn.microsoft.com/en-us/library/bhkz42b3.aspx)， List.Contains 方法不需要比较器。

如果您不想使用 Linq，那么`a.Exists`将使用直接在 List 上的方法执行相同的操作。

# java - 从 Android 异步嵌套类返回值

> ID：16005465
> 
> 赞同：1
> 
> 时间：2013-04-14T23:17:24.833
> 
> 标签：java, android, azure, asynchronous

我试图从函数的嵌套类中返回一个变量，如下所示：

```
public int getPlan(int planID) {
 int planId;
 TableOperationCallback<Plans> callback = new TableOperationCallback<Plans>() {
          public void onCompleted(Plans plan, Exception exception,ServiceFilterResponse response) {
               if(exception == null){
                    int planId = (int) db.addPlan(plan); //Want to return this value
               } else {
                    Log.e(exception.getMessage(), "ERROR");
               }
          } 
     };
  mPlanTable.lookUp(planID, callback);
  return planId;
} 
```

此方法与 Azure Android SDK 链接，并且异步调用 mPlanTable.lookUp()。因此，`planId`有时使用上面的代码返回 null。

返回实际值的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T23:30:41.670

如果lookUp 是异步的，那么您永远不会返回它的结果。您需要重构代码，以便使用返回值的任何操作都在回调中完成，而不是在那里。

# java - 是否有任何 API 允许您在 c/c++ 中调用部分 Android SDK？

> ID：16005466
> 
> 赞同：0
> 
> 时间：2013-04-14T23:17:30.623
> 
> 标签：java, android, c++, qt, cross-platform

我不想为 Android 和 iOS 构建跨平台游戏，但我担心如果我使用 Qt 之类的东西这样做，我将无法使用 Android 等效的 Game Center 和其他类似的东西。在 Qt 中构建游戏的同时，我有什么方法可以使用这些工具吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T23:19:33.930

您可以使用 Android NDK。见：http: [//developer.android.com/tools/sdk/ndk/index.html](http://developer.android.com/tools/sdk/ndk/index.html)

> “NDK 是一个工具集，可让您使用 C 和 C++ 等本地代码语言实现应用程序的某些部分。对于某些类型的应用程序，这可能很有帮助，因此您可以重用以这些语言编写的现有代码库，但大多数应用程序不需要 Android NDK。”

# java - XMLEncoder - 运行时异常

> ID：16005467
> 
> 赞同：0
> 
> 时间：2013-04-14T23:17:53.453
> 
> 标签：java, xml, class, object, serialization

我一直在玩 java 中的序列化 XML 并且有点卡住了。当我运行这个程序时，我得到了两个异常，我不确定原因是什么：

```
java.lang.InstantiationException: Ship
Continuing ...
java.lang.Exception: XMLEncoder: discarding statement XMLEncoder.writeObject(Ship);
Continuing ... 
```

我怀疑我尝试序列化的类有问题，因为当我使用互联网示例时，它工作正常。

有人可以指出我犯了什么错误。

主要的：

```
public class Main {

    private static final String XMLLocation = "xmlTest.xml";
    static ObjectSerializationToXML serializer = new ObjectSerializationToXML();

    public Main() {
        // TODO Auto-generated constructor stub
    }

    /**
     * @param args
     * @throws Exception 
     */
    public static void main(String[] args) throws Exception {
        // TODO Auto-generated method stub
        Ship ship = new Ship("name", "324");
        serializer.serializeObjectToXML(XMLLocation, ship);

    }

} 
```

对象序列化-XML 类：

```
import java.beans.XMLDecoder;
import java.beans.XMLEncoder;
import java.io.FileInputStream;
import java.io.FileOutputStream;

public class ObjectSerializationToXML {

    /**
     * <span id="IL_AD10" class="IL_AD">This method</span> saves (serializes) any java bean object into xml file
     */
    public void serializeObjectToXML(String xmlFileLocation,
            Object objectToSerialize) throws Exception {
        FileOutputStream os = new FileOutputStream(xmlFileLocation);
        XMLEncoder encoder = new XMLEncoder(os);
        encoder.writeObject(objectToSerialize);
        encoder.close();
    }

    /**
     * Reads Java Bean Object From XML File
     */
    public Object deserializeXMLToObject(String xmlFileLocation)
            throws Exception {
        FileInputStream os = new FileInputStream(xmlFileLocation);
        XMLDecoder decoder = new XMLDecoder(os);
        Object deSerializedObject = decoder.readObject();
        decoder.close();

        return deSerializedObject;
    }
} 
```

要序列化的对象（导致异常的我的对象）：

```
public class Ship {

    private String name;
    private String yearBuilt;

    public Ship(String name, String yearBuilt) {
        this.name = name;
        this.yearBuilt = yearBuilt;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }
    public String getYearBuild() {
        return yearBuilt;
    }
    public void setYearBuild(String yearBuild) {
        this.yearBuilt = yearBuild;
    }
    @Override
    public String toString() {
        return "ship [name=" + name + ", yearBuilt=" + yearBuilt + "]";
    }

} 
```

要序列化的对象（来自互联网的示例）：

```
public class MyBeanToSerialize {
    private String firstName;
    private String lastName;
    private int age;

    public int getAge() {
        return age;
    }

    public void setAge(int age) {
        this.age = age;
    }

    public String getFirstName() {
        return firstName;
    }

    public void setFirstName(String firstName) {
        this.firstName = firstName;
    }

    public String getLastName() {
        return lastName;
    }

    public void setLastName(String lastName) {
        this.lastName = lastName;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-05-10T10:07:17.753

每当任何包含参数化构造函数并试图序列化的类时，它都应该只被默认构造函数实例化。因此，XMLEncoder 需要一个对象通过默认构造函数对其进行序列化。

Ship 类在包含参数化构造函数时必须实现默认构造函数，因为每当 Ship 类变为可序列化时，它都会寻找默认构造函数来实例化 XMLEncoder。

请按照下面的方法找到更正的船级。

```
public class Ship {

private String name;
private String yearBuilt;

public Ship(String name, String yearBuilt) {
    this.name = name;
    this.yearBuilt = yearBuilt;
}

//Default constructor must be implemented for XMLEncoder serializing
public Ship() {
    super();
}

public String getName() {
    return name;
}

public void setName(String name) {
    this.name = name;
}
public String getYearBuild() {
    return yearBuilt;
}
public void setYearBuild(String yearBuild) {
    this.yearBuilt = yearBuild;
}
@Override
public String toString() {
    return "ship [name=" + name + ", yearBuilt=" + yearBuilt + "]";
} 
```

}

# c# - 如何从 ElapsedEvent 方法返回字符串

> ID：16005469
> 
> 赞同：0
> 
> 时间：2013-04-14T23:18:20.563
> 
> 标签：c#

我有一个名为反序列化的函数`DeSerializeXML`，它返回一个字符串。我从另一个类调用它我需要它基于 Timer 运行所以我在 Timer 中调用`ElapsedEvent`它

```
 private void frm_MyForm_Load(object sender, EventArgs e)
    {
        System.Timers.Timer myTimer = new Timer(2000);
        myTimer.Elapsed += new ElapsedEventHandler(ElapsedEvent);
        myTimer.Enabled = true;            
    }

    public static void ElapsedEvent(object source, ElapsedEventArgs e)
    {
        string x = OtherClass.DeSerializeXML();
    } 
```

如何从 ElapsedEvent 中提取该字符串值，以便将其分配给 MyForm 表单上的文本框？如果这是一个措辞不当的问题，我深表歉意，我会根据需要添加评论/更多代码。谢谢大家

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T23:31:07.203

尝试将返回的字符串设置为`Text`文本框的属性。

```
textBox1.Text = OtherClass.DeSerializeXML(); 
```

如果您对非 UI 线程有任何疑虑，请尝试使用`Invoke`. 像这样：

```
var txt = OtherClass.DeSerializeXML();
if (InvokeRequired)
{
    //this is the Form
    this.Invoke(new Action<string>(textBox1), new object[] {txt});
    return;
}
textBox1.Text = txt; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T23:29:03.870

使用[Control.Invoke 方法](http://msdn.microsoft.com/en-AU/library/zyzhdc6b.aspx)

```
public void ElapsedEvent(object source, ElapsedEventArgs e)
{
    string x = OtherClass.DeSerializeXML();
    frm.Invoke((Action)(() => textBox.Text = x);
} 
```

**注意**：从方法的签名中删除*static*关键字

# haskell - 选择转到元组的一侧时重复实例

> ID：16005471
> 
> 赞同：4
> 
> 时间：2013-04-14T23:18:34.563
> 
> 标签：haskell

我想做的是这样的：

```
data MyDataType = MyDataType

class HasSpecialField a where
    specialField :: a -> ByteString

instance HasSpecialField a => HasSpecialField (a, b) where
    specialField (a, b) = specialField a

instance HasSpecialField b => HasSpecialField (a, b) where
    specialField (a, b) = specialField b

instance HasSpecialField MyDataType where
    specialField _ = "Coolio" 
```

也就是说，如果你有一个像这样的元组：

```
myTuple :: (String, (Int, MyDataType)) 
```

然后您可以运行`specialField myTuple`返回“Coolio”。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T17:28:14.677

`Data`可用于完成此操作，但不会将函数限制为仅会成功的类型，从而将条件推迟到运行时。

```
{-# LANGUAGE DeriveDataTypeable #-}
import Control.Applicative

import Data.Generics

data MyDataType = MyDataType deriving (Typeable, Data)

specialField :: Data a => a -> Maybe String
specialField = fmap (\ MyDataType -> "Coolio") . something gfindtype 
```

# python - getQuery() 如何在python中

> ID：16005476
> 
> 赞同：-8
> 
> 时间：2013-04-14T23:18:54.823
> 
> 标签：python, get, python-3.3

我无法理解如何做到这一点。这样做的目的是对该函数进行不同的模块调用，使其返回正确的 url，然后将其下载并从中提取内容。

`getQuery(location)`返回包含 GET 查询的 URL，以从 wunderground.com 检索给定位置的天气。

例如，`getQuery('Princeton, WV')`返回 URL

```
http://www.wunderground.com/cgi-bin/findweather/hdfForecast?query=Princeton%2C+WV 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T23:24:03.607

```
def getQuery(location):
   # return your root url plus the location encoded using quote_plus
   # http://docs.python.org/2/library/urllib.html#urllib.quote_plus
   pass 
```

# angularjs - Asp.net Web Api 和 AngularJs POST/PUT 问题

> ID：16005478
> 
> 赞同：0
> 
> 时间：2013-04-14T23:18:59.530
> 
> 标签：angularjs

我们在使用 Yeoman 脚手架的 Angular 1.0.5 中通过 ng-resource 使用 POST 时遇到问题。我们在 localhost 上运行前端并使用 Azure 托管的 asp.net web api。我们已经在 web api 中完成了 CORS 处理，并设法发布，但仍然收到 Allow-Cross-Origin 错误。我们可以看到数据库中的数据。这之后是 GET 错误。

所以问题变成了：你认为这是前端问题还是后端问题。一些解释的代码片段：

**服务**

```
angular.module('jellybeanApp.Service', ['ngResource'])
  .factory('PeopleServices', function ($http, $rootScope, $resource, $routeParams, $location) {
    return {
      users : function() {
        var ret =  $resource('http://verkvaki.azurewebsites.net/api/user/:UserId',
          {callback: 'JSON_CALLBACK'},
          {
            get: {method: 'JSONP', params: {UserId: $routeParams.UserId}},
            query: {method: 'JSONP'},
            create: {method: 'POST'}
          });
        return ret;
      }
    }
  }); 
```

**控制器**

```
 'use strict';

angular.module('jellybeanApp')
  .controller('PeopleCtrl', function ($scope, PeopleServices) {
    $scope.userResult = PeopleServices.users().query();

  })
  .controller('EditPeopleController', function ($scope, PeopleServices, $routeParams) {
    var UserId = $routeParams.UserId;
    $scope.result = PeopleServices.users().get();
  })
  .controller('CreatePeopleCtrl', function ($scope, PeopleServices, $location) {
    $scope.newUser = {
      Username : 'Notendanafn',
      Password : 'Lykilorð',
      FirstName : 'Fornafn',
      LastName : 'Eftirnafn',
      Ssn : 'Kennitala',
      Email : 'Tölvupóstfang',
      Phone : 'Símanúmer',
      Roles : 'Stjornandi',
      JobTitle : 'Starfstitill',
      IsActive : true
    };

    $scope.savePeople = function (data) {
      PeopleServices.postit(data);

    }; 
```

**应用程序.js**

```
'use strict';
    var app = angular.module('jellybeanApp', ['jellybeanApp.Service'])
      .config(function ($routeProvider, $locationProvider) {
        $locationProvider.html5Mode(true);

        $routeProvider
          .when('/', {
            templateUrl: 'views/main.html',
            controller: 'main'
          })
          .when('/people/new', {
            controller: 'CreatePeopleCtrl',
            templateUrl: '../views/newPeople.html'
          })
          .otherwise({
            redirectTo: '/'
          });
      }); 
```

在 POST 之后，这发生在 URL 栏`http://localhost:9000/people/people` 上：应该只有`http://localhost:9000/people`

Chrome 控制台中的此错误：`GET http://verkvaki.azurewebsites.net/api/user/people?callback=angular.callbacks._2 400 (Bad Request)`

API 中的 POST 路由应该只是 /user，所以那里的 people 属性也会令人惊讶。

最后，Azure 托管 API 的 URL：http: [//verkvaki.azurewebsites.net/api/user](http://verkvaki.azurewebsites.net/api/user)

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-27T09:25:14.190

好久没解决了。结果我们在代码中使用了 CorsHandler，操纵 XHR 脚本，以及使用 web.config 来允许跨域请求。因此，在执行 [POST] 时，配置允许它，但处理程序感到困惑。当时解决了删除 CorsHandler 并仅使用

```
<httpProtocol>
  <customHeaders>
    <add name="Access-Control-Allow-Origin" value="*" />
    <add name="Access-Control-Allow-Headers" value="Origin, X-Requested-With, Content-Type, Accept" />
    <add name="Access-Control-Allow-Methods" value="GET, POST, PUT, DELETE, OPTIONS" />
  </customHeaders>
</httpProtocol> 
```

在 web.config 的部分。

现在当然有了 web api 2，您只需使用 Microsoft.AspNet.WebApi.Cors。

# java - JTree 不显示在 JScrollPane 内

> ID：16005483
> 
> 赞同：1
> 
> 时间：2013-04-14T23:19:47.890
> 
> 标签：java, swing, jscrollpane, jtree

我需要为我的程序显示帐户名称，并且我想在 JScrollPane 中使用 JTree 来执行此操作。

这是我的代码：

```
public void loadAccounts() {

    accountsRoot = new DefaultMutableTreeNode("Accounts"); //create root

    accountsRoot.add(new DefaultMutableTreeNode("Fred")); //add one element
                                                          //for testing
    accounts = new JTree(accountsRoot);

    accountsPane = new JScrollPane(accounts);

    accountsPane.add(accounts);  //don't think this is necessary
    canvas.add(accountsPane);
    accounts.setBounds(0, 0, accountsPane.getWidth(), accountsPane.getHeight());
    accountsPane.setBounds(460, 270, 240, 410);
    accounts.setVisible(true);
    accountsPane.setVisible(true);

} 
```

因为我没有使用布局，所以我手动设置了边界。

我似乎无法让它显示出来。我想最终从一段时间内加载帐户，所以我认为 JTree 会很容易，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T23:26:43.453

```
accountsPane = new JScrollPane(accounts);

accountsPane.add(accounts);  //don't think this is necessary 
```

这不仅没有必要，而且会搞砸，因为这实际上会将您的帐户 JTree 添加到多个容器中——添加到 JScrollPane 的视口（好）和 JScrollPane 本身（坏）。不要那样做。仅通过上面第一行所示的 JScrollPane 的构造函数或通过`setViewportView(...)`在创建 JScrollPane 对象后调用它来将其添加到 JScrollPane 的视口中。

编辑：另一个问题是您使用`setBounds(...)`. 您不应该这样做，而应该使用布局管理器来允许正确查看您的组件。您还需要在任何接受 JScrollPane 的容器上调用`revalidate()`和。`repaint()`

# twitter-bootstrap - 使用 ember.js 模板引导弹出框

> ID：16005485
> 
> 赞同：7
> 
> 时间：2013-04-14T23:20:04.777
> 
> 标签：twitter-bootstrap, ember.js

我正在尝试将[Bootstrap Popover](http://twitter.github.io/bootstrap/javascript.html#popovers)与 EmberJS 一起使用，以便弹出框的内容将是 ember/handlebars 模板（具有绑定等）。如何才能做到这一点？（余烬 1.0.0-rc2）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-22T12:42:35.327

这是 ember 引导弹出窗口的一个工作示例（请参阅[http://jsfiddle.net/72fSd/](http://jsfiddle.net/72fSd/)）：

```
App.Popover = Ember.View.extend({
        parentSelector: '',
        contentSelector: '',
        didInsertElement: function () {
            var self = this;
            $(self.parentSelector).popover({
                html: true,
                content: function() {
                    var $content = $(self.contentSelector);
                    return $content.html();
                }
            });
        } 
```

实例化视图：

```
{{view App.Popover templateName="my-popover-content" parentSelector=".popoverButton" contentSelector="#popovercontent"}} 
```

在这里，**parentSelector**可以例如选择一个按钮。确保在 my-popover-content 模板中有一个 ID 为 #popovercontent 的 div 容器，以便**contentSelector**工作。当然，您需要在视图初始化之前加载模板。

双向绑定应该适用于该解决方案。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-10-09T20:56:20.570

我把特里的回答更进一步，并认为我已经为这个问题想出了一个简单、通用的解决方案。

我创建了一个 bootstrap-popover 组件，如下所示：

```
App.BootstrapPopoverComponent = Ember.Component.extend({
  tagName: 'div',      //whatever default you want... div is default anyway here
  classNames: '',      //whatever default you want
  placement: 'bottom', //whatever default you want
  didInsertElement: function () {
    var component = this,
        contents = this.$('.popoverJs');
    component.$().popover({
      animation: false,
      placement: component.get('placement'),
      html: true,
      content: contents
    }).on('show.bs.popover', function () {
      contents.removeClass('hide');
    });
  },
  willDestroyElement: function () {
    this.$().popover('destroy');
  }
}); 
```

这是相关的模板：

```
<script type="text/x-handlebars" id="components/bootstrap-popover">
  {{title}}
  <div class="popoverJs hide">
    {{yield}}
  </div>
</script> 
```

请注意最初使用“隐藏”类来隐藏生成的内容。这个类只是“显示：无”。没有这个，事情就不会如你所愿。

一旦你有了它，只要你想要一个弹出框，你就可以简单地做这样的事情：

```
 {{#bootstrap-popover title="My Fancy Popover" tagName="button"}}
    <ul>
      <li>my</li>
      <li>awesome</li>
      <li>popover</li>
      <li>contents</li>
      <li>example</li>
    </ul>
  {{/bootstrap-popover}} 
```

内容应该可以是您想要的任何内容——任何任意 HTML、渲染组件或部分内容等。当然，您可以根据需要指定其他标记名、类名、标题、位置等。

我希望这个解决方案有所帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-15T11:13:01.390

例如，如果您想弹出图像，请在您的视图中执行类似的操作

```
imgTag: '<img src="smiley.gif" alt="Smiley face" height="42" width="42">',

didInsertElement: function () {
    var self = this;
    Ember.run.schedule('actions', this, function () {
        self.$().popover({
            title: 'Smile!!!',
            html: true,
            content: self.get('imgTag'),
            placement: 'bottom',
            trigger: 'hover'
        });
    });
},

willDestroyElement: function () {
    this.$().popover('destroy');
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-05-12T19:46:21.420

我也遇到了这个问题，并且遇到了上面罗伯特提到的同样的问题，可接受的解决方案根本无法很好地扩展到更复杂的场景。

我遇到了一个非常优雅的修复，但我不确定它对未来的友好程度。我正在利用函数 renderToBuffer - 见下文：

```
//make your popover view to be created later
App.PopoverView = Ember.View.extend({
  templateName : 'name-of-your-template-with-content'
});

//then you make your link that will trigger the popover
App.PopoverLinkView = Ember.View.extend({

  tagName : 'a',

  didInsertElement : function(){

  var that = this;

  this.$().popover({
    'html' : true,
    'content' : function(el){
    var detailView = App.PopoverView.create();
    var html = detailView.renderToBuffer().buffer;
    return html;
    }
  });

  }

}); 
```

这里的优点是您可以传入模型并使事物动态化。还没有彻底测试它，但想把它拿出来可能帮助其他人。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-10-09T17:40:39.917

我把罗伯特的回答拿得更远了。我创建了一个组件，并且只使用 jQuery 元素作为内容，而不是调用 .html()。（这缓解了页面中重复 ID 的问题。）

```
App.CustomPopoverComponent = Ember.Component.extend({
  tagName: 'button',
  classNames: 'btn btn-default',
  type: 'button',
  popoverContentSelector: '',
  didInsertElement: function () {
    var component = this,
        contents = $(component.get('popoverContentSelector'));

    component.$().popover({
      placement: 'bottom',
      html: true,
      content: contents
    }).on('show.bs.popover', function () {
      contents.removeClass('hide');
    });
  },
  willDestroyElement: function () {
    this.$().popover('destroy');
  }
}); 
```

我最初使用 Bootstrap 的“隐藏”类来隐藏内容。然后我第一次删除了“隐藏”类以显示弹出框。从那时起，事情就按预期工作了。

这是在您的车把模板中使用该组件的方法：

```
 {{#custom-popover popoverContentSelector='.popoverContents'}}
    Popover Button
  {{/custom-popover}} 
```

# dart - 将 Web 组件动态添加到 div

> ID：16005489
> 
> 赞同：3
> 
> 时间：2013-04-14T23:20:39.300
> 
> 标签：dart, dart-webui

我从生成点击计数器示例开始。我将点击计数器制作成一个库，然后将其导入到我的主文件中。可以通过在运行程序之前将适当的 HTML 放入网页中手动添加点击计数器组件。但是，我一直无法找到将点击计数器 Web 组件动态添加到 div 的方法。我的尝试要么以“噢，啪！”而告终。错误或根本没有发生任何事情。

点击计数器（xclickcounter.dart）：

```
library clickcounter;
import 'package:web_ui/web_ui.dart';

class CounterComponent extends WebComponent {
  int count = 0;

  void increment() {
    count++;
  }
} 
```

主要的 HTML：

```
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8">
    <title>Sample app</title>
    <link rel="stylesheet" href="test1.css">

    <!-- import the click-counter -->
    <link rel="components" href="xclickcounter.html">
  </head>
  <body>
    <h1>Test1</h1>

    <p>Hello world from Dart!</p>

    <div id="sample_container_id">
      <div is="x-click-counter" id="click_counter" count="{{startingCount}}"></div>
    </div>

    <script type="application/dart" src="test1.dart"></script>
    <script src="packages/browser/dart.js"></script>
  </body>
</html> 
```

主文件：

```
import 'dart:html';
import 'package:web_ui/web_ui.dart';
import 'xclickcounter.dart';

// initial value for click-counter
int startingCount = 5;

void main() {
  // no error for adding an empty button
  var button = new ButtonElement();
  query('#sample_container_id').append(button);

  // doesn't work (gives "Aw, snap!" in Dartium)
  query('#sample_container_id').append(new CounterComponent());

  // Nothing happens with this code. Nothing appears.
  // But I promise this same thing was giving Aw, Snap 
  // for a very similar program
  final newComponentHtml = '<div is="x-click-counter"></div>';
  query('#sample_container_id').appendHtml(newComponentHtml);
} 
```

我尝试向点击计数器添加一个空的构造函数，但它仍然崩溃。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T19:34:47.033

我遇到过同样的问题。[请参阅https://github.com/dart-lang/web-ui/blob/master/test/data/input/component_created_in_code_test.html](https://github.com/dart-lang/web-ui/blob/master/test/data/input/component_created_in_code_test.html)上的示例（不是我的），让我知道它是否适合您。

TL;博士：

```
void main() {
  var element = query('#sample_container_id');
  appendComponentToElement(element, new CounterComponent() );
}

void appendComponentToElement(Element element, WebComponent component) {
  component.host = new DivElement();
  var lifecycleCaller = new ComponentItem(component)..create();
  element.append(component.host);
  lifecycleCaller.insert();
} 
```

在我的 web-ui@dartlang.org 帖子中有更多信息：[https ://groups.google.com/a/dartlang.org/d/topic/web-ui/hACXh69UqG4/discussion](https://groups.google.com/a/dartlang.org/d/topic/web-ui/hACXh69UqG4/discussion)

希望有帮助。

# jquery - 如何拆分 JQuery 自动完成多值字符串

> ID：16005491
> 
> 赞同：1
> 
> 时间：2013-04-14T23:20:44.363
> 
> 标签：jquery, jquery-ui, jquery-autocomplete, jquery-ui-sortable, string-split

我有一个 JQuery 自动完成功能，可以点击“添加”按钮，并让用户输入显示在 JQuery 可排序列表中的屏幕上，但我想将输入的字符串分成多个子字符串，在“，”处拆分。这是我尝试过的：

```
$(".addButton").click(function(e) {
    e.preventDefault();
    var item = $("input[name='phoneItem']").val();
    // set var $li to the string inputted by the user
    var $li = $("<li class='ui-state-default'\>").text(item);
    // parses input string, splitting at commas into substrings
    var $liArray = $li.split(", ");
    // adds var $li to the gui
    for (var i = 0; i < $liArray.length; i++) {
        $("#sortable").append($li);
    };

    // refreshes the page so var $li shows up
    $("#sortable").sortable("refresh");
}); 
```

这就是我的 .html 的样子：

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />

    <link rel="stylesheet" type="text/css" href="stylesheet2.css">
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.2/themes/smoothness/jquery-ui.css" />

    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script src="http://code.jquery.com/jquery-1.9.1.js"></script>-->
    <script src="http://code.jquery.com/ui/1.10.2/jquery-ui.js"></script>
    <script type="text/javascript" src="script.js"></script>
</head>
<body>
    <form class="ui-widget" name="phoneForm"><!--The autocomplete search bar-->
        <input id="tags" size="50" name="phoneItem" placeholder="Add a Phone"/>

        <button class="addButton"><!--The add button-->
            Add
        </button>
        <span class="content"><!-- The sortable list of phones-->
            <ul id="sortable">
              <li class="ui-state-default"><span class="ui-icon ui-icon-arrowthick-2-n-s"></span>Item 1</li>
              <li class="ui-state-default"><span class="ui-icon ui-icon-arrowthick-2-n-s"></span>Item 2</li>
            </ul>
        </span>
    </form>
</body> 
```

但我得到这个错误：

未捕获的类型错误：对象 [对象对象] 没有方法“拆分”

非常感谢任何想法/建议/答案。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T23:37:00.667

那么`$li`是 jQuery 对象，它没有任何`split`方法。尝试从中获取文本`li`并将其拆分：

```
var t=$li.text();
var $liArray = t.split(", "); 
```

但是由于您已经在 variable 中包含了文本`item`，您可以拆分它而不是`$li`再次访问：

```
var $liArray = item.split(", "); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T23:34:33.473

不应该`var $li = $("<li class='ui-state-default'\>").text(item);`

是：`var $li = $("#tags").val();`或`var $li = $("input[name='phoneItem']").val();`？

我认为您的原始行不是有效的 jQuery，而且它也没有“将 var $li 设置为用户输入的字符串”。

这行`var item = $("input[name='brewItem']").val();`似乎是不必要的，因为变量 item 在声明后没有使用。

# python - 用于 Python 编译的动态库 - 无目录

> ID：16005495
> 
> 赞同：1
> 
> 时间：2013-04-14T23:21:07.290
> 
> 标签：python, c, gcc, swig

希望这将是一个简单的。我正在阅读《Beginning Python》一书，学习如何使用 c 或 c++ 进行扩展，然后使用 swig 使其可用于多种语言。我已经运行了一个回文检查 c 代码位的示例。希望我不需要包含所有代码。在编译和链接方面：

```
gcc -dynamic -I/Library/Frameworks/Python.framework/Versions/Current/include/python2.7 -c palindrome.c

gcc -dynamic -I/Library/Frameworks/Python.framework/Versions/Current/include/python2.7 -c palindrome_wrap.c 
```

如果我按照书中所说的那样执行这些命令，我​​看不到任何明显的问题，但是下一步会出现问题：

```
gcc -dynamiclib palindrome_wrap.o palindrome.o -o _palindrome.so -Wl, -undefined, dynamic_lookup
i686-apple-darwin11-llvm-gcc-4.2: dynamic_lookup: No such file or directory 
```

我正在运行的示例是逐字逐句的教科书，它是一本初学者书籍，自然我只是学习使用 c 和 c++ 为其他语言制作库而感到难过。我怀疑自从本书编写以来，mac上的文件或目录可能发生了一些变化（我选择mac来学习这一点，因为它比windows更接近unix）。编译步骤对我来说仍然看起来相当神秘，所以希望有人知道这里出了什么问题。

谢谢，

本·W。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T13:34:05.270

gcc 选项以无逗号结尾，“-Wl -undefined dynamic_lookup”。至少它对我有用。

# macos - 在 mac 10.8.3 上安装 bochs

> ID：16005497
> 
> 赞同：1
> 
> 时间：2013-04-14T23:21:56.487
> 
> 标签：macos, bochs

我正在尝试在运行 mac osx 10.8.3 的 mac 机器上安装 bochs 模拟器但是当我运行 ./configure 并 make 在 make 结束时出现以下错误

```
carbon.cc:1318: error: ‘PaletteHandle’ was not declared in this scope
carbon.cc:1318: error: expected `;' before ‘thePal’
carbon.cc:1329: error: ‘RGBDirect’ was not declared in this scope
carbon.cc:1331: error: ‘GetPort’ was not declared in this scope
carbon.cc:1339: error: ‘SetEntries’ was not declared in this scope
carbon.cc:1341: error: ‘CTabChanged’ was not declared in this scope
carbon.cc:1343: error: ‘SetPort’ was not declared in this scope
carbon.cc:1350: error: ‘thePal’ was not declared in this scope
carbon.cc:1350: error: ‘pmTolerant’ was not declared in this scope
carbon.cc:1350: error: ‘NewPalette’ was not declared in this scope
carbon.cc:1351: error: ‘oldpal’ was not declared in this scope
carbon.cc:1351: error: ‘GetPalette’ was not declared in this scope
carbon.cc:1353: error: ‘SetPalette’ was not declared in this scope
carbon.cc:1359: error: ‘RGBDirect’ was not declared in this scope
carbon.cc: In member function ‘virtual void bx_carbon_gui_c::graphics_tile_update(Bit8u*, unsigned int, unsigned int)’:
carbon.cc:1397: error: ‘GetPort’ was not declared in this scope
carbon.cc:1400: error: ‘OffsetRect’ was not declared in this scope
carbon.cc:1403: error: ‘LockPortBits’ was not declared in this scope
carbon.cc:1405: error: ‘GetPixBaseAddr’ was not declared in this scope
carbon.cc:1409: error: ‘GetPixRowBytes’ was not declared in this scope
carbon.cc:1418: error: ‘GetPixRowBytes’ was not declared in this scope
carbon.cc:1420: error: ‘UnlockPortBits’ was not declared in this scope
carbon.cc:1422: error: ‘RGBForeColor’ was not declared in this scope
carbon.cc:1423: error: ‘RGBBackColor’ was not declared in this scope
carbon.cc:1424: error: ‘GetPortBitMapForCopyBits’ was not declared in this scope
carbon.cc:1425: error: ‘CopyBits’ was not declared in this scope
carbon.cc:1426: error: ‘QDError’ was not declared in this scope
carbon.cc:1428: error: ‘SetPort’ was not declared in this scope
carbon.cc: In member function ‘virtual void bx_carbon_gui_c::dimension_update(unsigned int, unsigned int, unsigned int, unsigned int, unsigned int)’:
carbon.cc:1459: error: ‘DisposeGWorld’ was not declared in this scope
carbon.cc:1461: error: ‘GetCTable’ was not declared in this scope
carbon.cc: In member function ‘virtual unsigned int bx_carbon_gui_c::create_bitmap(const unsigned char*, unsigned int, unsigned int)’:
carbon.cc:1529: warning: ‘GetCIcon’ is deprecated (declared at /System/Library/Frameworks/ApplicationServices.framework/Frameworks/HIServices.framework/Headers/Icons.h:308)
carbon.cc:1529: warning: ‘GetCIcon’ is deprecated (declared at /System/Library/Frameworks/ApplicationServices.framework/Frameworks/HIServices.framework/Headers/Icons.h:308)
carbon.cc: In member function ‘virtual unsigned int bx_carbon_gui_c::headerbar_bitmap(unsigned int, unsigned int, void (*)())’:
carbon.cc:1582: error: ‘SetRect’ was not declared in this scope
carbon.cc: In member function ‘virtual void bx_carbon_gui_c::exit()’:
carbon.cc:1641: error: ‘InitCursor’ was not declared in this scope
carbon.cc:1644: warning: ‘CallInScrapPromises’ is deprecated (declared at /System/Library/Frameworks/Carbon.framework/Frameworks/HIToolbox.framework/Headers/Scrap.h:649)
carbon.cc:1644: warning: ‘CallInScrapPromises’ is deprecated (declared at /System/Library/Frameworks/Carbon.framework/Frameworks/HIToolbox.framework/Headers/Scrap.h:649)
carbon.cc: In function ‘void HidePointer()’:
carbon.cc:1678: error: ‘HideCursor’ was not declared in this scope
carbon.cc:1680: error: ‘SetPt’ was not declared in this scope
carbon.cc:1681: error: ‘LocalToGlobal’ was not declared in this scope
carbon.cc:1683: warning: ‘GetMouse’ is deprecated (declared at /System/Library/Frameworks/Carbon.framework/Frameworks/HIToolbox.framework/Headers/Events.h:384)
carbon.cc:1683: warning: ‘GetMouse’ is deprecated (declared at /System/Library/Frameworks/Carbon.framework/Frameworks/HIToolbox.framework/Headers/Events.h:384)
carbon.cc: In function ‘void ShowPointer()’:
carbon.cc:1694: error: ‘InitCursor’ was not declared in this scope
carbon.cc: In function ‘void UpdateTools()’:
carbon.cc:1708: warning: ‘GetCurrentScrap’ is deprecated (declared at /System/Library/Frameworks/Carbon.framework/Frameworks/HIToolbox.framework/Headers/Scrap.h:263)
carbon.cc:1708: warning: ‘GetCurrentScrap’ is deprecated (declared at /System/Library/Frameworks/Carbon.framework/Frameworks/HIToolbox.framework/Headers/Scrap.h:263)
carbon.cc:1712: warning: ‘GetScrapFlavorFlags’ is deprecated (declared at /System/Library/Frameworks/Carbon.framework/Frameworks/HIToolbox.framework/Headers/Scrap.h:293)
carbon.cc:1712: warning: ‘GetScrapFlavorFlags’ is deprecated (declared at /System/Library/Frameworks/Carbon.framework/Frameworks/HIToolbox.framework/Headers/Scrap.h:293)
carbon.cc: In function ‘void CreateKeyMap()’:
carbon.cc:1996: warning: ‘NewPtrClear’ is deprecated (declared at /System/Library/Frameworks/CoreServices.framework/Frameworks/CarbonCore.framework/Headers/MacMemory.h:605)
carbon.cc:1996: warning: ‘NewPtrClear’ is deprecated (declared at /System/Library/Frameworks/CoreServices.framework/Frameworks/CarbonCore.framework/Headers/MacMemory.h:605)
carbon.cc: In function ‘void CreateVGAFont(unsigned char*)’:
carbon.cc:2014: error: ‘SetRect’ was not declared in this scope
carbon.cc:2021: warning: ‘NewPtrClear’ is deprecated (declared at /System/Library/Frameworks/CoreServices.framework/Frameworks/CarbonCore.framework/Headers/MacMemory.h:605)
carbon.cc:2021: warning: ‘NewPtrClear’ is deprecated (declared at /System/Library/Frameworks/CoreServices.framework/Frameworks/CarbonCore.framework/Headers/MacMemory.h:605)
carbon.cc: In function ‘BitMap* CreateBitMap(unsigned int, unsigned int)’:
carbon.cc:2047: error: ‘SetRect’ was not declared in this scope
carbon.cc: In member function ‘virtual void bx_carbon_gui_c::beep_on(float)’:
carbon.cc:2103: warning: ‘AlertSoundPlay’ is deprecated (declared at /System/Library/Frameworks/CoreServices.framework/Frameworks/OSServices.framework/Headers/SystemSound.h:124)
carbon.cc:2103: warning: ‘AlertSoundPlay’ is deprecated (declared at /System/Library/Frameworks/CoreServices.framework/Frameworks/OSServices.framework/Headers/SystemSound.h:124)
make[1]: *** [carbon.o] Error 1
make: *** [gui/libgui.a] Error 2 
```

那么任何线索如何在我的系统上安装bochs？谢谢

# css - 带图像的 3 列导航菜单

> ID：16005505
> 
> 赞同：0
> 
> 时间：2013-04-14T23:23:02.793
> 
> 标签：css, list, navigation

我正在研究网站的 CSS，并试图确定导航菜单的最佳方法。菜单布局如下：

![在此处输入图像描述](https://i.stack.imgur.com/nswpR.png)

在第 1 列和第 2 列之间以及第 2 列和第 3 列之间是双垂直线，由于它们的风格，它们可能需要成为图像。

所以，我的问题是：

从语义上讲，所有这些链接都是一个无序导航列表的一部分。但是，我找不到任何方法来使用 css 创建这样一个列表，该列表只能在 IE 中使用。列表项之间的图像只会更加混乱。有没有一种干净的方法可以做到这一点？

我的第二种方法是创建 3 列，并在 col 1 和 col 3 中放置一个列表。但这似乎仍然与图像分隔符混淆。我考虑过使用 li:after 来放置图像，但 IE7 无法识别“内容”属性。

现在，似乎最简洁的构建方法是不使用列表。但后来我觉得我失去了正确的语义。有没有我没有想到的更好的方法？布局非常表格，所以我当然可以把它做成表格。. . :)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T02:09:08.800

我为链接解决了如下问题，在这些链接中，您将需要的名称和类图像替换为图像和测量值。

```
 <style type="text/css">

   ul{
     width:400px;
 height:200px;
 }
   ul li{
 border-top:1px solid gray;
 border-bottom:1px solid gray;
 display:block;
 height:99x;
 width:100px;
}
  .left{
    float:left;
    }

  .right{
    float:right;
   }
  .second{
margin-top:100px;
margin-left:-100px;
   }
   .image{
background:red;
border-left:3px double gray;
border-right:3px double gray;
display:block;
float:left;
height:200px;
width:194px;}
    </style>

    <body>
      <ul>
    <li class="left"><a href="#">Home</a></li>
        <li class="left second"><a href="#">Home</a></li>
        <li class="image"><a href="#">Home</a></li>
        <li class="right second"><a href="#">Home</a></li>
        <li class="right"><a href="#">Home</a></li>
      </ul>
    <body> 
```

我希望我能帮上忙。问候。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T23:59:37.643

我认为您可以用四个 LI 制作一个 UL，并为第一个和最后一个 li 提供绝对位置（可能是“事件”和“关于我们”）。这可以通过伪选择器 :first-child 和 :last-child 来实现。

# php - 重写 URL 规则

> ID：16005506
> 
> 赞同：0
> 
> 时间：2013-04-14T23:23:05.543
> 
> 标签：php, .htaccess

我接受如下 URL：

```
http://www.random.com/film/1 
```

我需要做的是将它发送到`server.php`基本目录中，然后将地址分解`/`并使用电影和 1 作为变量。

我如何实现这一目标？

目前，该链接显示不存在页面！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T23:37:21.707

因为我已经打开了它，`.htaccess`所以为 apache 创建一个如下所示的文件：

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteCond %{REQUEST_FILENAME} -s [OR]
    RewriteCond %{REQUEST_FILENAME} -l [OR]
    RewriteCond %{REQUEST_FILENAME} -d
    RewriteRule ^.*$ - [NC,L]
    RewriteRule ^([^/]+)/([^/]+)/([^/]+)/?(.*)$ server.php?1=$1&2=$2&3=$3&4=$4 [NC,QSA,L]
</IfModule> 
```

根据评论对我的第一个答案进行了严重修改，因此总结一下现在这里的内容以及 PHP 中的内容： `/api-v1/v1/film/1`将为您提供以下内容`$_GET`：

```
Array
(
    [1] => api-v1
    [2] => v1
    [3] => film
    [4] => 1
) 
```

第四个参数，在这种情况下`1`是可选的，省略它并使用`/api-v1/v1/film`or`/api-v1/v1/film/`会给你：

```
Array
(
    [1] => api-v1
    [2] => v1
    [3] => film
    [4] => 
) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T23:34:57.550

您应该查看`.htaccess`用于这种重定向的文件，而不是与其他列表完全重复：

在`.htaccess`文件中：

```
RewriteEngine On
RewriteCond %{SCRIPT_FILENAME} !-d
RewriteCond %{SCRIPT_FILENAME} !-f
RewriteRule ^([^/]+)/([^/]+)$ server.php?$1=$2 [L]
RewriteRule ^([^/]+)$ server.php?$1 [L] 
```

在`server.php`：

```
$parameterName = 'film';
$parameterValue = isset($_GET[$parameterName]) ? $_GET[$parameterName] : NULL;

if (!is_null($parameterValue)) {
    echo "Parameter found";
} else {
    echo "Parameter not found";
} 
```

# excel - Excel 宏中的交互式地图

> ID：16005507
> 
> 赞同：1
> 
> 时间：2013-04-14T23:23:06.153
> 
> 标签：excel, freeform, vba

我在使用“9”以上的编码时遇到问题。

```
 Sub ColourStates()

Dim intState As Integer
Dim strStateName As String
Dim intStateValue As Integer
Dim intColourLookup As Integer
Dim rngStates As Range
Dim rngColours As Range

Set rngStates = Range(ThisWorkbook.Names("STATES").RefersTo)
Set rngColours = Range(ThisWorkbook.Names("STATE_COLOURS").RefersTo)

With Worksheets("MainMap")
    For intState = 1 To rngStates.Rows.Count
        strStateName = rngStates.Cells(intState, 1).Text
        intStateValue = rngStates.Cells(intState, 2).Value

            ' single colour
            intColourLookup = Application.WorksheetFunction.Match(intStateValue, Range("STATE_COLOURS"), True)
            With .Shapes(strStateName)
                .Fill.Solid
                .Fill.ForeColor.RGB = rngColours.Cells(intColourLookup, 1).Offset(0, 1).Interior.Color
            End With

    Next
End With 
```

结束子

这是文件本身的链接：[https ://dl.dropboxusercontent.com/u/41007907/MapOfStates.xls](https://dl.dropboxusercontent.com/u/41007907/MapOfStates.xls)

它适用于低于 9 的值，但我需要它工作到 20。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T23:43:58.890

您的数组 STATE_COLORS 仅包含 0 到 9 区间内的值。以下是您需要继续执行的步骤：1) 打开 excel 文件 2) 转到公式标签 3) 单击名称管理器 4) 选择 STATE_COLORS 数组 5) 将值增加到 20

如果您有任何其他问题，请回复我。

# c# - c#.net 启动画面加载

> ID：16005518
> 
> 赞同：2
> 
> 时间：2013-04-14T23:24:30.850
> 
> 标签：c#, splash-screen

我正在开发一个 C#.NET (4.0) WinForms 应用程序。在启动时，我想要一个启动屏幕，在不同的表单上填充一系列数据网格视图。

目前，主窗体将该数据加载到 Form_Load 上的 DataGridViews 中，但这会使窗体在发生这种情况时挂在那里。

那么如何调用将值从初始屏幕加载到 DataGridView 的方法呢？

我对 C#.NET 很陌生，我正试图远离 VB。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T23:37:20.123

我会让初始屏幕启动 DataGridViews 所在的真实表单，并在该表单中将数据加载方法放在它自己的线程上。对于一个简单易用的初学者方式，请使用 BackgroundWorker。对于更高级的控制，请使用线程。

[如何使用后台工作者。](http://msdn.microsoft.com/en-us/library/cc221403%28v=vs.95%29.aspx)

[线程类文档](http://msdn.microsoft.com/en-us/library/system.threading.thread.aspx)

[非常好的线程教程](http://www.albahari.com/threading/)

***编辑：***

正如您在评论中提到的，听起来您仍然不希望表单在数据加载完成之前出现。简单的方法是在启动时隐藏主窗体，并在加载事件中启动启动画面，然后当执行数据加载的方法返回时，将可见性设置为 true 并关闭启动画面形式。有很多方法可以隐藏表单。[这](http://social.msdn.microsoft.com/forums/en-US/winforms/thread/dece45c8-9076-497e-9414-8cd9b34f572f/)是一个很好的论坛问题，有很多关于不同方法的答案。

# ios - 在 iOS 原生 Web 应用页面中显示 iOS 指南针

> ID：16005520
> 
> 赞同：0
> 
> 时间：2013-04-14T23:24:37.660
> 
> 标签：ios, web, native, compass-geolocation

我试图弄清楚如何将 iOS Compass 直接显示到我从 iOS Native Web App 中创建的页面上。我不想点击某个区域，它会将我带到指南针应用程序。

从本质上讲，我正在开发一个项目，通过直接在我的页面上使用 iOS 指南针，可以通过设备旋转来测试加速度计，而无需直接进入指南针应用程序。

（这有点难以解释。对此我深表歉意。）

图例。

[http://i442.photobucket.com/albums/qq145/inmyeyesurpsycho/AVF%20Project/ScreenShot2013-04-14at65356PM_zpsa0ab43e8.png](http://i442.photobucket.com/albums/qq145/inmyeyesurpsycho/AVF%20Project/ScreenShot2013-04-14at65356PM_zpsa0ab43e8.png)

（密码是：指南针）

如果有人对我能做些什么来实现这一点有任何建议，我将不胜感激。

附言

它必须作为 iOS 原生功能工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T23:30:46.080

据我所知，无法通过 Safari 网络应用程序访问加速度计。因此，您需要使用 google GPS 之类的工具来找出该信息。

# jquery - 无法重复动画 - jQuery Transit

> ID：16005522
> 
> 赞同：0
> 
> 时间：2013-04-14T23:24:51.450
> 
> 标签：jquery, animation, transition, jquery-transit

使用 jQuery 插件[Transit](http://github.com/rstacruz/jquery.transit)，

我不能让我的动画重复一次。

这是我的 jQuery：

```
 $('.cart').mouseenter(function(){
    $('.cartIcon').transition({
        perspective: '500px',
        rotateY: 360 ,
        duration: 400,
        easing: 'in'
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T01:37:45.733

您的问题是，第一次转换购物车图标时，您将其旋转 360 度。第二次转换它时，它仍然具有该状态。所以你再次转换它......从 360 度**到**360 度，这意味着什么都没有发生。要让它每次都动画，您需要选择一些将其转换回来的方法。

[http://jsfiddle.net/rFKw8/2/](http://jsfiddle.net/rFKw8/2/)

这只是一种可能性：

```
$('.cart').mouseenter(function(){
    var $cart = $(this),
        $cartIcon = $cart.find('.cartIcon'),
        transitionOptions = {
            perspective: '500px',
            duration: 500,
            easing: 'in'
        };

    if (!$cart.data('transitioned')) {
        transitionOptions.rotateY = 360;
        $cartIcon.transition(transitionOptions, function () {
            $cart.data('transitioned', true);
        });
    } else {
        transitionOptions.rotateY = 0;
        $cartIcon.transition(transitionOptions, function () {
            $cart.data('transitioned', false);
        });
    }
}); 
```

# android - 您如何访问标准的自定义 xml 属性？

> ID：16005524
> 
> 赞同：0
> 
> 时间：2013-04-14T23:25:12.410
> 
> 标签：android, xml

我正在尝试创建自定义 xml 属性，这些属性可以被更多类接受。我发现（除其他外）这个有用的答案：[Defining custom attrs](https://stackoverflow.com/questions/3441396/defining-custom-attrs/3441986#3441986)

但是我如何以编程方式访问属性？Eclipse 似乎没有找到定义的名称：

这是我的 attrs.xml，它是我正在尝试使用的 ViewPadding：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
<attr name="ViewPadding" format="integer"/>
<declare-styleable name="IntegerPicker">
    <attr name="maxNrOfDigits" format="integer"/>
    <attr name="NumberSize" format="integer"/>
    <attr name="ViewColor" format="color"/>
    <attr name="TextAlignRight" format="boolean"/>
</declare-styleable>

<declare-styleable name="DoublePicker">
    <attr name="CompoundViewColor" format="color"/>
    <attr name="CompoundViewPadding" format="integer"/>
</declare-styleable>
</resources> 
```

这是我用来访问其他属性的代码：

```
public IntegerPicker(Context context, AttributeSet attrs) {
    super(context, attrs);

    LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    inflater.inflate(R.layout.integer_picker, this, true);

    etInteger = (EditText) findViewById(R.id.etInteger);

    TypedArray a = context.obtainStyledAttributes(attrs,
            R.styleable.IntegerPicker);

        final int N = a.getIndexCount();
        for (int i = 0; i < N; ++i)
        {
            int attr = a.getIndex(i);
            switch (attr)
            {
            case R.styleable.IntegerPicker_ViewColor:
                int ViewColor = a.getColor(attr, 0);
                this.setBackgroundColor(ViewColor);
                break;
            case R.styleable.IntegerPicker_maxNrOfDigits:
                int ems = a.getInteger(attr, 8);
                etInteger.setEms(ems);
                break;
            case R.styleable.:
                int padding = a.getInteger(attr, 10);
                etInteger.setPadding(padding, padding, padding, padding);
                break;
            case R.styleable.IntegerPicker_NumberSize:
                int NumberSize = a.getInteger(attr, 10);
                etInteger.setTextSize(NumberSize);
                break;
            case R.styleable.IntegerPicker_TextAlignRight:
                boolean textAlignRight = a.getBoolean(attr,false);
                if(textAlignRight){
                    etInteger.setGravity(0x05);
                }else{
                    etInteger.setGravity(0x03);
                }
            }
        }
        a.recycle();

} 
```

我该如何处理：

```
LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    inflater.inflate(R.layout.integer_picker, this, true); 
```

和

```
case R.styleable.IntegerPicker_ViewColor:
                int ViewColor = a.getColor(attr, 0);
                this.setBackgroundColor(ViewColor); 
```

请帮忙，我真的很茫然：S

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T00:46:25.700

我不是这方面的专家，但你可能想试试这个：（取自[SlidingMenu](https://github.com/jfeinstein10/SlidingMenu)）

attrs.xml

```
<!--
  Copyright 2011 The Android Open Source Project

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<resources>

    <declare-styleable name="SlidingMenu">
        <attr name="mode">
            <enum name="left" value="0" />
            <enum name="right" value="1" />
        </attr>
        <attr name="viewAbove" format="reference" />
        <attr name="viewBehind" format="reference" />
        <attr name="behindOffset" format="dimension" />
        <attr name="behindWidth" format="dimension" />
        <attr name="behindScrollScale" format="float" />
        <attr name="touchModeAbove">
            <enum name="margin" value="0" />
            <enum name="fullscreen" value="1" />
        </attr>
        <attr name="touchModeBehind">
            <enum name="margin" value="0" />
            <enum name="fullscreen" value="1" />
        </attr>
        <attr name="shadowDrawable" format="reference" />
        <attr name="shadowWidth" format="dimension" />
        <attr name="fadeEnabled" format="boolean" />
        <attr name="fadeDegree" format="float" />
        <attr name="selectorEnabled" format="boolean" />
        <attr name="selectorDrawable" format="reference" />
    </declare-styleable>

</resources> 
```

获取 xml 属性的代码（在视图构造函数中）

```
 // get all attributes
    final TypedArray ta = context.obtainStyledAttributes(attrs, R.styleable.SlidingMenu);
    // extract 1 attribute, of return SlidingMenu.LEFT if no attr was supplied)
    final int mode = ta.getInt(R.styleable.SlidingMenu_mode, SlidingMenu.LEFT); 
```

# windows-ce - Windows CE 应用程序开发

> ID：16005526
> 
> 赞同：5
> 
> 时间：2013-04-14T23:25:15.613
> 
> 标签：windows-ce

我有一个 POS 软件，需要为 windows CE 开发一个收集模块，以便在 Honeywell Dolphin 6100 设备上运行。

我需要开发一个在 Honeywell 6100 设备上运行的简单应用程序。此应用程序应：

*   从我的 POS 软件中获取产品列表（代码、描述和价格）
*   处理销售阅读产品的条形码，显示到期总额和项目数量
*   将该销售上传到我的 POS 软件（通过网络、文件或类似方式）

我有哪些选择？是否有适用于 Windows CE 的应用程序构建器？如果不是，我可以用什么来开发这样的应用程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T02:11:24.270

您有几个选项，但其中很少（如果有）允许您在不编写代码的情况下创建应用程序。我知道没有任何“应用程序构建器”产品可以让您在 Windows CE 中实现目标，而且我使用 CE 已经有一段时间了。这并不是说某些晦涩的东西可能不存在，但我不知道。

1.  您可以使用 .NET Compact Framework (CF) 在 .NET 中编写应用程序 - 支持 C# 或 VB.NET。为此，您将需要 Visual Studio 2008 Professional，除了设备之外几乎没有其他东西。CF开发的教程和在线资源有很多，这里就不一一列举了。
2.  您可以使用 C/C++ 编写应用程序。为此，您需要再次使用 Visual Studio 2008 Professional。是的，有使用其他编译器的选项，但如果您想花时间实际编写应用程序而不是构建开发工具链并弄清楚如何连接和调试，那么 Visual Studio 就是您想要的路线。
3.  如果您想要一个非 Microsoft 解决方案，还有其他或多或少受支持的解决方案。[NS Basic](https://www.nsbasic.com/ce/)已经存在很长时间了，所以它可能非常强大并且有合理的支持。我从未使用过它，但我从那些使用过它的人那里听说过它的好消息。

其他任何事情，你都会有点偏离预订。支持可能充其量是最少的，工具可能不会很强大，支持、教程和开发人员通常依赖于前进的所有其他好处将很少。如果有足够的时间和资源，您可能会在 CE 下使用任何语言，但上述选项最有可能导致成功。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T23:56:02.413

既然您说您知道 Delphi 并且不想学习另一种语言，您可以使用 Delphi Prism 编写一个客户端应用程序以在 windows CE 上运行，提取您需要的数据，并将其发布到 web 服务：

[Delphi Prism 是 Delphi .net 的新版本吗？](https://stackoverflow.com/questions/2029628/is-delphi-prism-a-new-version-of-delphi-net)

[http://en.wikipedia.org/wiki/Oxygene_(programming_language)](http://en.wikipedia.org/wiki/Oxygene_(programming_language))

（编辑）刚刚检查，它现在是这个包的一部分：

[http://www.embarcadero.com/products/rad-studio/faq](http://www.embarcadero.com/products/rad-studio/faq)

# c# - 使用 NAudio 重新采样原始音频

> ID：16005528
> 
> 赞同：1
> 
> 时间：2013-04-14T23:25:24.800
> 
> 标签：c#, naudio

我想重新采样音频：将其采样率从 44k 更改为 11k。我得到的输入是以字节为单位的原始音频。它确实是原始的，它没有标题 - 如果我尝试将它加载到`WaveFileReader`.

我目前正在尝试实现它的方式是这样的（只是一段非常简化的代码）：

```
WaveFormat ResampleInputFormat = new WaveFormat(44100, 1);
WaveFormat ResampleOutputFormat = new WaveFormat(11025, 1);

MemoryStream ResampleInputMemoryStream = new MemoryStream();

foreach (var b in InputListOfBytes)
{
    ResampleInputMemoryStream.Write(new byte[]{b}, 0, 1);
}

RawSourceWaveStream ResampleInputWaveStream =
  new RawSourceWaveStream(ResampleInputMemoryStream, ResampleInputFormat);
WaveFormatConversionStream ResampleOutputStream =
  new WaveFormatConversionStream(ResampleOutputFormat, ResampleInputWaveStream);

byte[] bytes = new byte[2];
while (ResampleOutputStream.Read(bytes, 0, 2) > 0)
{
    OutputListOfBytes.Add(bytes[0]);
    OutputListOfBytes.Add(bytes[1]);
} 
```

我的问题是：最后一个循环是一个无限循环。`Read()`总是获得相同的值，并且永远不会在 Stream 中前进。我什至尝试`Seek()`在 each 之后找到正确的位置`Read()`，但这似乎也不起作用，我仍然总是得到相同的值。

我究竟做错了什么？这甚至是重新采样原始音频的正确方法吗？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T10:48:25.163

首先，您需要将 ResampleInputMemoryStream 的位置重置为开始。实际上，基于数组创建内存流可能更容易：

```
new MemoryStream(InputListOfBytes) 
```

其次，在读取重采样器时，您需要一次读取大于两个字节的块。尝试至少一秒钟的音频（使用`ResampleOutputStream.WaveFormat.AverageBytesPerSecond`）。

# c++ - 返回后 std::map 值丢失

> ID：16005533
> 
> 赞同：1
> 
> 时间：2013-04-14T23:26:37.477
> 
> 标签：c++, map

如何在将映射从一个函数传递到另一个函数时正确处理内存。

我有一个函数可以返回它构建的地图。值对象是一个类 foo。我在三个不同的位置打印 foo ，它们都给出不同的值。第一次，它给出了正确的值。第二个和第三个是垃圾。

我知道我必须在正确的位置创建 Foo 对象指针。

我想知道在哪里？

```
std::map<int,Foo*> function_that_returns_the_map(){

  std::map<int,Foo*> myMap; 

  {

    int v = 0; 
    Foo *b = new Foo();

    // PRINTING FOO FIRST

    std::cout<<""<<*b<<endl;

    myMap.insert(std::pair<int,Foo*>(v,b))

  }

  // PRINTING FOO AGAIN 

  for(map<int,Foo*>::iterator it = myMap.begin();
  it != myMap.end(); ++it)
  {      
    std::cout << " " << *(it->second) << "\n";
  }

  return myMap;
  }

std::map<int, Foo*> myMap;
myMap = function_that_returns_the_map();

//PRINTING FOO AGAIN.

 std::map<int, Board*>::iterator it = myMap.begin();
 for (it=myMap.begin(); it!=myMap.end(); ++it)
   cout<<" "<<*(it->second)<<endl; 
```

[单击此处](http://ideone.com/7kE5rL)查看我的实际代码。

更新： Foo 的成员变量未使用“新”运算符分配。因此，一旦超出范围，它们就会超出范围并具有垃圾值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T23:30:07.570

确保您实际`std::pair`使用正确的值创建：

```
myMap.insert(std::pair<int,Foo*>(v, b));
//                               ^^^^ 
```

或利用`std::make_pair`：

```
myMap.insert(std::make_pair(v, b)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T00:14:47.500

您的代码中有很多小错误（我认为这只是拼写错误）。我已经修复了这些并提供了一个`Foo`类，它编译并运行良好，在所有三个地方都打印了正确的值：

```
#include <iostream>
#include <map>

struct Foo
{
   Foo() : someValue(5) {};
   int someValue;
};

std::map<int,Foo*> function_that_returns_the_map()
{
   std::map<int,Foo*> myMap;
   {
      int v = 0; 
      Foo *b = new Foo();
      std::cout << (*b).someValue << std::endl; // PRINTING FOO FIRST
      myMap.insert(std::pair<int,Foo*>(v,b));
   }

   // PRINTING FOO AGAIN
   std::map<int, Foo*>::iterator it = myMap.begin();
   for(it; it != myMap.end(); ++it)
   { 
      std::cout << it->second->someValue << "\n";
   }
   return myMap;
}

int main()
{
   std::map<int, Foo*> myMap;
   myMap = function_that_returns_the_map();

   //PRINTING FOO AGAIN.

   std::map<int, Foo*>::iterator it = myMap.begin();
   for (it; it!=myMap.end(); ++it)
   std::cout << it->second->someValue << std::endl;
   return 0;
} 
```

[单击此处](http://ideone.com/NgieRP)查看输出。

因此，问题必须在您的问题中未提及的内容中。为了能够进一步提供帮助，我们需要查看真实代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T23:45:30.053

您在哪里评论过“在此处打印 FOO”，您甚至是如何编译它的？您无法`Foo`通过其中`b`任何一个地方的局部变量进行打印，因为它超出了范围。相反，您必须从地图中检索对象

我对您的代码进行了以下更改，一切正常：

```
class Foo
{
public:
    const int Value;
    Foo(int value) : Value(value) // add some kind of identifier to Foo so we can check it's not garbage
    { }
};

std::map<int,Foo*> function_that_returns_the_map()
{
    std::map<int,Foo*> myMap; 

    { // introducing a new scope

        int v = 0; 
        Foo *b = new Foo(98765);

        // PRINTING FOO HERE.
        std::cout << b->Value << std::endl;

        myMap.insert(std::pair<int,Foo*>(v,b));
    } // v, b go out of scope, are no longer accessible

    // PRINTING FOO HERE.
    std::cout << myMap[0]->Value << std::endl; // we can't use v, b anymore, so go fish in the map to find the Foo

    return myMap;
}

void main()
{
    std::map<int, Foo*> myMap;
    myMap = function_that_returns_the_map();

    //PRINTING FOO HERE.
    std::cout << myMap[0]->Value << std::endl; // we can't use v, b anymore, so go fish in the map to find the Foo
} 
```

关键是范围。C++ 中的花括号表示范围。在该范围内声明的任何局部变量都不能在其外部使用。希望这将有助于解释它。如果没有，请评论任何没有意义的东西。

PS：记住，因为你已经`new`创建了你的`Foo`对象，你**必须**使用`delete`某个地方来清理它们，否则你的程序会内存泄漏。因此，人们通常不会将指针直接放入映射或列表中。相反，只需将`Foo`对象的副本放入（无指针），或者使用诸如 a 之类的包装器`shared_ptr`来为您管理删除。

# java - ChangeListener 执行期间的“AWT-EventQueue-0”java.lang.NullPointerException”错误

> ID：16005535
> 
> 赞同：1
> 
> 时间：2013-04-14T23:26:46.640
> 
> 标签：java, swing, nullpointerexception, listener, changelistener

我在 **this.commaPos = Name.indexOf(" ");****的线程“AWT-EventQueue-0”java.lang.NullPointerException中遇到异常** 我的项目线。这个概念是我有 5 个 JButton 的船，当你点击时，你把船放在一个战舰游戏的板上。现在很多时间我都被困在这上面。有任何想法吗 ？谢谢你。！

 ****编辑：我将字符串名称的名称更改为字符串 nname。现在我在下一行得到同样的错误。this.commaPos = nname.indexOf(",");**

```
 public void stateChanged(ChangeEvent event)
  {

    JButton currentButton = (JButton)event.getSource();
      System.out.println("STATE CHANGED");
    String nname = currentButton.getName();
    this.commaPos = nname.indexOf(",");
    int x = Integer.parseInt(nname.substring(0, commaPos));
    int y = Integer.parseInt(nname.substring(commaPos + 1));

    checkDeletable(x, y);

    if (currentButton.getName().equals(""))
      return;
    if (this.shipSelected == null) {
      return;
    }
    this.shipSelected.setPos(x, y);

    clearOldCoords();
    boolean valid = getShipCoords();
    paintShip(valid);

    if ((currentButton.isFocusOwner()) && (valid))
      placeShip();
  } 
```

在这里，我使用更改侦听器：

```
{
 for (int y = 0; y < 10; y++) {
        for (int x = 0; x < 10; x ++) {
            this.myBoard[x][y] = new JButton();
            this.myBoard[x][y].setMargin(margins); 
            this.myBoard[x][y].setToolTipText(x + "," + y);
            this.myBoard[x][y].setName(null);
            this.myBoard[x][y].setIcon(this.sea);
            this.myBoard[x][y].addChangeListener(this);
            this.myBoard[x][y].addMouseListener(this);

            myBoard.add(this.myBoard[x][y]);

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T23:29:55.747

名称（变量的错误名称，因为所有变量名称都应以小写字母开头）为空，可能是因为您从未设置过它。为什么还要担心 JButton 的名字呢？为什么不检查 actionCommand 呢？

您是 JButton 正在触发 ChangeListener 而不是 ActionListener，这似乎有点不寻常。你能给我们更多关于这段代码应该做什么的信息吗？**

# javascript - 返回带有 .empty 和 .append 的串联输入

> ID：16005536
> 
> 赞同：0
> 
> 时间：2013-04-14T23:26:53.940
> 
> 标签：javascript, jquery, dom

我正在尝试获取名字和姓氏连接的返回值。我基本上需要连接表单中的输入字段以在为空时返回消息，或者如果用户将此信息提供到字段中则返回名字和姓氏。

`#message`是我在 HTML 中的 div 标签。

它返回值，但不返回消息“请输入您的名字和姓氏”。如果输入框为空。

这是我的 JavaScript 代码：

```
 var getName = function() {
    var firstName = document.getElementById("firstName"),
    lastName = document.getElementById("lastName"),
    fullName;   

    if (firstName.value == "" && lastName.value == "" ) {
       fullName= $("#message").empty().append("Please enter your first and last name.");
    } else {
       fullName = firstName.value + " " + lastName.value;
    }
    return $("#message").empty().append(fullName);
 }
   $(document).ready(function(){
   $("#message").empty().append("Hello world");
 });

Here is the HTML for the form 

 <form name="contactform" method="post" action="">
    <input type="text" name="firstName" id="firstName" placeholder= "First Name">
    <br>
    <input type="text" name="lastName" id="lastName" placeholder= "Last Name">
    <br>
    <input type="text" name="email" placeholder= "Email Address">
    <p>
    <h4> What is your sex? </h4>
    <input type="radio" name="sex" value="male">
    Male
    <input type="radio" name="sex" value="female">
    Female
    <p>
    <h4> What is your favorite type of music </h4>
    <input type="checkbox" name="vehicle" value="rock">
    I like Rock and Roll<br/>
    <input type="checkbox" name="vehicle" value="funk">
    I like Funk
    <p>
      <textarea  name="comments" placeholder= "Additional Comments"></textarea>
      <input type="button"  name="submit" id="submit"  value="Get Name" onclick="getName();" />
  </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T00:10:16.373

您需要设置“请输入您的名字和姓氏”。作为文本值，而不是尝试传递 jquery 语句。

看看这个 JS 小提琴：http: [//jsfiddle.net/kW4b6/](http://jsfiddle.net/kW4b6/)

我刚刚更改了这一行：

```
fullName= $("#message").empty().append("Please enter your first and last name."); 
```

对此：

```
fullName = "Please enter your first and last name."; 
```

# java - A* 算法的启发式

> ID：16005537
> 
> 赞同：1
> 
> 时间：2013-04-14T23:27:03.947
> 
> 标签：java, artificial-intelligence, a-star, heuristics

我有一个问题要用 A* 解决，但我很难设计一个好的启发式方法。

我的问题是：

确定由垃圾收集车在已知地图上移动的城市中完成的最佳路线，以最大限度地增加负载并最大限度地减少旅行时间。

我有 4 种类型的节点：Geral Nodes、Dump Nodes、Garbage Nodes 和 Gas Nodes。

垃圾收集车可能会用完汽油，并有机会为车辆加油。也可能有超过 1 个垃圾箱需要运送。

解决此问题的最佳启发式方法是什么？

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T23:33:43.133

一个好的首过搜索启发式方法是使用贪心算法。例如，在一般的路线规划算法（找到城市之间的最短路线）中，一个不错的启发式方法是使用贪婪算法，当乌鸦飞过时，你总是去离目的地最近的下一个城市；这是一种线性时间启发式算法，永远不会高估解决方案。在你的情况下，也许你可以使用一种贪心算法，垃圾车总是去下一个最近的垃圾节点，或者垃圾最多的垃圾节点；如果不知道您正在使用的四个节点的详细信息，我无法获得更具体的信息，但您明白了。任何不会高估解决方案的线性时间算法都可以，然后您可以在下一次通过时对其进行调整。（在大多数情况下，nlog(n) 启发式也是可以接受的；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T09:52:22.250

A* 非常适合在 2 点之间找到最快/最短的路线。

但是，您的垃圾车问题可能是一个完全不同的问题：您需要通过订购一组点来找到最快/最短的路线。这基本上是旅行推销员问题（TSP）或车辆路线问题（VRP）的老大哥，两者都是**NP-complete**。

**A* 无法处理 NP 完全问题**，您需要**元启发式**等算法。寻找 TSP 和 VRP 问题的解决方案，[例如 OptaPlanner（java，开源）中的 TSP 和 VRP 示例（](http://docs.jboss.org/drools/release/latest/optaplanner-docs/html_single/index.html#vehicleRouting)如[本视频](http://www.youtube.com/watch?v=4hp_Qg1hFgE)所示）。

# xaml - 我可以制作一个独立于我的 collectionviewsource 的自定义 gridviewitem 吗？

> ID：16005542
> 
> 赞同：1
> 
> 时间：2013-04-14T23:27:45.050
> 
> 标签：xaml, gridview, windows-runtime, collectionviewsource

我有一个 CollectionViewSource 用于填充我的 gridviewitem（黑色方块），我想知道是否可以添加一个独立于我的 collectionviewsource 的 gridviewitem（红色方块）。我可以提供任何需要的额外信息。感谢您的帮助！

我没有足够的代表来发布图片，所以这里有一个指向图片的链接，显示了我想要做的事情：

[图片](http://imageftw.com/uploads/20130414/Untitled.png)

**编辑**- 我在 WinRT for Windows 8 中执行此操作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T02:30:38.583

Yoyu可以`CompositeCollection`用来做这种事情

下面是一个使用`CompositeCollection`

xml:

```
<Window x:Class="WpfApplication10.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="325" Width="422" Name="UI">

    <Window.Resources>
        <CollectionViewSource x:Key="myViewSource" Source="{Binding Items, ElementName=UI}" />
    </Window.Resources>

    <Grid DataContext="{Binding ElementName=UI}">
        <ListView>
            <ListView.ItemsSource>
                <CompositeCollection>
                    <ListViewItem Content="Hello" />
                    <CollectionContainer Collection="{Binding Source={StaticResource myViewSource}}" />
                </CompositeCollection>
            </ListView.ItemsSource>
        </ListView>
    </Grid>
</Window> 
```

代码：

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
    }

    public IEnumerable<string> Items
    {
        get
        {
            yield return "Item1";
            yield return "Item2";
            yield return "Item3";
        }
    }
} 
```

结果：

![在此处输入图像描述](https://i.stack.imgur.com/QqHrP.png)

# iphone - 如何在我的 iPhone 上运行的应用程序中浏览 Core Data？

> ID：16005544
> 
> 赞同：13
> 
> 时间：2013-04-14T23:28:09.097
> 
> 标签：iphone, ios, xcode, sqlite, core-data

我正在开发一个使用核心数据的 iPhone 项目，并试图找出一种轻松浏览数据存储方式的方法。具体来说，我将图像存储在核心数据中，并想查看它们占用了多少空间等。

我找到了一个名为“核心数据编辑器”的应用程序，它可以让你在 iPhone 模拟器上浏览核心数据，但在我的情况下它并不是很有用，因为我正在存储从相机拍摄的图像。有没有办法轻松浏览我的应用程序中存储的内容？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-04-15T05:22:31.657

如果您不需要实时查看这些信息，Xcode 的 Organizer 将允许您下载设备上任何开发应用程序的沙箱目录：

1.  将设备连接到您的 Mac。
2.  打开 Xcode 的 Organizer 窗口到 Devices 选项卡。
3.  在源列表中，选择您设备下的应用程序项。
4.  从窗口主要部分的列表中选择您的应用程序。
5.  使用窗口底部的下载按钮将沙盒目录复制到您的 Mac。
6.  数据以包的形式下载，因此在 Finder 中右键单击它，然后选择显示包内容。

从那里，可用于打开/检查核心数据存储或 SQLite 数据库的许多工具中的任何一个都应该适合您。

您也可以在模拟器或设备上运行您的应用程序时使用此包来强制运行进入已知状态。这在调试诸如 Core Data 迁移或奇怪的无效状态之类的事情时非常有用。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2015-09-25T18:57:25.583

从设备查看 Coredata：

插入设备 -

启动 Xcode

在顶部 Xcode 菜单 -

选择窗口 -

选择设备 -

选择您的设备 -

选择应用程序 -

选择设置图标（“+ -”右侧的齿轮状符号） -

选择下载容器 -

将其保存到文件夹 -

它将具有“.xcappdata”的扩展名 -

打开火狐

（如果您还没有 - 获取 FireFox SQLite Manager 浏览器插件）选择右上角的 SQLite Manager 图标（看起来像一个带条纹的桶）

选择打开的文件夹图标

将 [SQLite DB 文件] 格式更改为所有文件

浏览并选择您的数据库

除了您在 Coredata 中创建的表和列（抱歉 - 实体和属性）之外，您还会看到 CoreData 本身创建的一些额外列。

希望这可以帮助某人。这有点像熊，但值得麻烦的是看到你的数据库“肉体”

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-04-15T01:44:28.530

[PonyDebugger](https://github.com/square/PonyDebugger)是您需要的工具，它可以让您浏览您的核心数据存储和正在运行的应用程序的许多其他方面。它是免费的，只需下载、添加到您的应用程序，然后在 Pony Debugger 与之对话的开发计算机上运行本地服务器。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-15T00:03:19.893

在您的 SIM 卡上找到 sqlite 数据库的位置。

然后，在终端中，使用如下命令：

```
sqlite3 myDataBase.sqlite 
```

在提示符`sqlite>`下，键入

```
.dump 
```

在模拟器上，它将位于以下位置：

~/Library/Application Support/iPhone Simulator/[操作系统版本]/Applications/[appGUID]/

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-03-10T21:05:48.110

从数据容器文件打开 Core Data 数据库并查看和分析内容的简单方法是使用**Core Data Lab**之类的工具。

只需右键单击`.xcappdata`Finder 中的文件，然后在右键单击上下文菜单中选择*打开方式*> *Core Data Lab 。*

这个应用程序还有一个内置的图像查看器，以防你将图像直接存储在核心数据数据库中。

更多信息：[https ://betamagic.nl/products/coredatalab.html](https://betamagic.nl/products/coredatalab.html)

*免责声明*：我是这个工具的创造者。

# html - UL - 如何在顶部添加标题？

> ID：16005548
> 
> 赞同：0
> 
> 时间：2013-04-14T23:28:44.393
> 
> 标签：html, css, layout

我有两个UL：

![在此处输入图像描述](https://i.stack.imgur.com/Kevw6.png)

如何添加文本以显示在顶部的绿色区域。

文本不必在 LI 中。

我所做的每一次尝试都会使文本出现在框外。我已经将两个 UL 包装在一个 div 和一个 span（目前是一个 span 如下）中，在 UL 之前带有文本，但两者都没有帮助，文本仍然在外面。

jsfiddle：http: [//jsfiddle.net/gThjy/](http://jsfiddle.net/gThjy/)

```
<html>
  <head>
    <style>
    #list_to_process, #categories  {   
      color: blue; background-color: green; border: solid; 
      border-width: 4px; padding-top:40px
    }   
    .panel { color: red; background-color: yellow; 
             border: solid; border-width: 4px }
    ul { padding: 10px; margin: 50px; float:left; list-style:none; }
    li { color: yellow; padding: 25px 80px; cursor: move; }
    li:nth-child(even) { background-color: #000 }
    li:nth-child(odd) { background-color: #666 }
  </style>
  </head>
  <body>
    <span class="a_list">
      header1
      <ul id="list_to_process">
        <li class="to_process" id="left1">1</li>
        <li class="to_process" id="left2">2</li>
        <li class="to_process" id="left3">3</li>
        <li class="to_process" id="left4">4</li>
        <li class="to_process" id="left5">5</li>
      </ul>
    </span>
    <span class="a_list">
      <ul id="categories">
        <li id="righta">a</li>
        <li id="rightb">b</li>
        <li id="rightc">c</li>
        <li id="rightd">d</li>
        <li id="righte">e</li>
      </ul>
    </span>
  </body>

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T23:37:16.973

使用您当前的标记，对 CSS 的添加将起作用并且是语义的：

```
#list_to_process:before, #categories:before{ 
content:"Read this: ";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T23:40:32.367

也许这会有所帮助：

```
 <ul id="list_to_process">
      Header 1
    <li class="to_process" id="left1">1</li>
    <li class="to_process" id="left2">2</li>
    <li class="to_process" id="left3">3</li>
    <li class="to_process" id="left4">4</li>
    <li class="to_process" id="left5">5</li>
  </ul>
  <ul id="categories">
      Header 2
    <li id="righta">a</li>
    <li id="rightb">b</li>
    <li id="rightc">c</li>
    <li id="rightd">d</li>
    <li id="righte">e</li>
  </ul> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T23:34:14.920

好吧，它在 HTML 中唯一有效的是将`<li>`a 作为 a 的子级，`<ul>`或者`<ol>`将任何文本包装在不同的元素中是不可能的。您可以直接在起始标签之后添加文本`<ul>`，它会显示在绿色区域中，但我不确定这正是您所追求的。我也不确定在`<ul>`标签之后直接有一个文本节点是否有效，尽管我会尝试找到一个来源。

[http://jsfiddle.net/PerfectDark/gThjy/5/](http://jsfiddle.net/PerfectDark/gThjy/5/)

**更新**：根据验证器，在起始`<ul>`标签之前添加文本也是无效的：

*第 38 行，第 10 列：在此上下文中元素 ul 中不允许出现文本。*

我认为你最好的选择是绝对定位一个元素，让它出现在盒子里。

# hadoop - Hbase Schema 设计

> ID：16005551
> 
> 赞同：0
> 
> 时间：2013-04-14T23:29:04.580
> 
> 标签：hadoop, nosql, query-optimization, hbase

我必须设计一个**Hbase**表来存储用户信息，这些信息是针对社交网络的，比如：年龄、性别、教育、爱好、读过的书、去过的国家……注意：我们将来可以添加更多信息，我们不会现在知道所有信息。

例如：姓名：Olha，年龄：25，性别：女，学历：信息技术学士，学历：计算机科学硕士，爱好：篮球，爱好：乒乓球，书籍：随风而逝，书籍：达芬奇密码，语言: 英语, 语言: 法语, 国家: 德国

主要思想是能够做如下查询：返回所有女性，年龄：22岁，说：英语，说：法语，读随风而逝的书，喜欢乒乓球，喜欢篮球和德语.

因此您可以将任何条件添加到搜索查询中。

您对优化此类搜索查询的 HBASE 表架构（行键、列族 ...）有何建议（考虑到我们将来会添加更多信息）编写此类查询的最佳方法是什么（扫描, 得到, MapReduce )。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-09T16:48:45.917

我同意 Ian Varley 的观点，即 Solr/Lucene 以及它的多面查询和连接允许您以您希望的方式查看数据 - 但是 - 我也认为您的问题可能是“计数”问题或“会员资格”问题....

听起来您在寻找与（N）个属性匹配的人的列表-您遇到的问题是，对于每个属性，您可能拥有数百万个用户 ID？

当您要做的只是计算交集/联合大小时，HBase 非常适合。您的键/值对可以放入 Hbase，您可以将用户的 ID“编码”到 Bloom Filter 和 HyperLogLog 中。以交易速度换取准确性和记忆力。可能每小时/每晚在某种类型的日志聚合的点击流上运行 map/reduce 样式的作业。

其他人已经在广告空间和在线空间中针对您正在运行的查询类型进行了此操作（*“找到喜欢住在佛罗里达州的红牛和流行馅饼的人”*）

**参考**

使用 Apache Hive 和 Amazon EMR 的上下文广告[http://aws.amazon.com/articles/2855](http://aws.amazon.com/articles/2855)

扩展分布式计数器：[http ://whynosql.com/scaling-distributed-counters/](http://whynosql.com/scaling-distributed-counters/)

谷歌：分片计数器[https://developers.google.com/appengine/articles/sharding_counters](https://developers.google.com/appengine/articles/sharding_counters)

HBase 中的分布式计数器性能 - 第 1 部分[http://palominodb.com/blog/2012/08/24/distributed-counter-performance-hbase-part-1](http://palominodb.com/blog/2012/08/24/distributed-counter-performance-hbase-part-1)

Facebook 的新实时分析系统：HBase 每天处理 200 亿个事件[http://highscalability.com/blog/2011/3/22/facebooks-new-realtime-analytics-system-hbase-to-process-20.html](http://highscalability.com/blog/2011/3/22/facebooks-new-realtime-analytics-system-hbase-to-process-20.html)

使用 Hadoop 和 HBase 进行实时分析 - [http://www.slideshare.net/larsgeorge/realtime-analytics-with-hadoop-and-hbase](http://www.slideshare.net/larsgeorge/realtime-analytics-with-hadoop-and-hbase)

使用 HBase 记录事件处理[http://tellapart.com/log-event-processing-with-hbase](http://tellapart.com/log-event-processing-with-hbase "使用 HBase 进行日志事件处理")

BazaarVoice 的点击流分析[http://www.slideshare.net/bazaarvoice_engineering/austin-scales-clickstream-analytics](http://www.slideshare.net/bazaarvoice_engineering/austin-scales-clickstream-analytics)

使用 HBase 进行实时分析 - [http://www.slideshare.net/alexbaranau/realtime-analytics-with-hbase-long-version](http://www.slideshare.net/alexbaranau/realtime-analytics-with-hbase-long-version)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T15:01:48.507

这不是 HBase 的一个很好的用途，因为这正是搜索索引（如 Lucene）所擅长的。

一种存储用户及其信息的普通模式可能看起来很像关系数据库，因为每个用户有 1 行，并将所有属性存储为列和值（年龄 = 22，语言 = 法语等）。这适用于您提到的可扩展性（您无需更改任何架构即可存储新属性）。使用此模式，您可以通过唯一的用户 ID 查找任何一个用户（及其所有属性）。无论您有多少用户，这都会非常快。

但是，使用该模式，如果您想以您描述的方式进行搜索（“返回所有年龄为 22 岁的用户”），每个查询最终都会扫描整个表，因为 HBase 只允许您通过主键访问事物；它没有任何类型的二级索引。这将是非常低效的（每次您想要执行任何单个查询时都必须扫描一百万行）。

如何解决这个问题？您可以“反转”数据的顺序并将值放在行键中，然后指向具有该值的所有用户。例如，行键可能是“age:22”，然后在行的列中可能是年龄为 22 岁的所有用户 ID。这有很多原因，其中最重要的是它将是进行更新极其昂贵且棘手。但对于那些特定的查询，它会表现良好。

诀窍？这正是搜索索引（如 Lucene）所做的事情，而且它比使用 HBase 滚动自己的索引做得更好。这听起来像是您想在这里使用的工具。

如果您*必须*使用 HBase（正如您所说，因为它是一个研究项目），那么可能值得考虑同时使用 HBase 和 Lucene；谷歌的指针。

# c++ - C++ 运行失败并构建成功

> ID：16005552
> 
> 赞同：0
> 
> 时间：2013-04-14T23:29:13.617
> 
> 标签：c++

这是我的代码：

```
#include <iostream>

using namespace std;

class Nodo{
public:
    int valor;
    Nodo *Padre;
    Nodo *HijoIzquierdo;
    Nodo *HijoDerecho;
    Nodo(){
        Padre=HijoIzquierdo=HijoDerecho=NULL;
        valor=0;
    }
};
class Arbol{
public:
    Nodo *Raiz;
    Arbol(){
        Raiz=new Nodo();
        Raiz->valor=5;
        Raiz->HijoDerecho->Padre=Raiz->HijoIzquierdo->Padre=Raiz;
        Raiz->HijoIzquierdo->valor=7;
        Raiz->HijoIzquierdo->HijoIzquierdo->valor=18;
        Raiz->HijoIzquierdo->HijoIzquierdo->Padre=Raiz->HijoIzquierdo;
        Raiz->HijoDerecho->valor=15;
        Raiz->HijoDerecho->HijoIzquierdo->valor=30;
        Raiz->HijoDerecho->HijoIzquierdo->Padre=Raiz->HijoDerecho->HijoDerecho>Padre=Raiz->HijoDerecho;
        Raiz->HijoDerecho->HijoDerecho->valor=8;

    }
    void Arbol::CantidadNodos(Nodo *actual=new Nodo(),int cantNodos){;
        if(actual->HijoDerecho==NULL && actual->HijoIzquierdo==NULL){
            cout<<"El arbol tiene: "<<cantNodos<<" nodos"<<endl;
            return;
        }
        return Arbol::CantidadNodos(actual=actual->HijoIzquierdo,cantNodos++);
    }
};

int main() {
    int opcion;
    Nodo *nodo=new Nodo();
    Arbol *ar = new Arbol();
    cout<<"Ingrese la opcion que desea realizar"<<endl;
    cin>>opcion;
    if(opcion==1){
        ar->CantidadNodos(ar->Raiz,0);
    }
} 
```

当我编译它时，构建成功，但它没有运行，我尝试放置一些 couts 来查看问题出在哪里，问题出在以下行：

```
Arbol *ar = new Arbol(); 
```

当编译器到达该行时它崩溃，为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T23:33:21.507

您的构造函数访问 Raiz->HijoDerecho->Padre，但您从未为 HijoDerecho 分配变量。Nodo 的构造函数将其分配给 NULL。所以你取消引用一个空值

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T23:33:27.877

的构造函数`Arbol`创建一个新`Nodo`对象：

```
Raiz=new Nodo(); 
```

`Nodo`这使用将其成员设置为的默认构造函数`NULL`。然后，您尝试取消引用这些成员，例如：

```
Raiz->HijoDerecho->/* ... */; 
```

取消引用空指针会导致未定义的行为。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-14T23:34:16.187

**您需要修改您的要求**。那就是说。

```
class Nodo{
public:
    int valor;
    Nodo *Padre;
    Nodo *HijoIzquierdo;
    Nodo *HijoDerecho;
    Nodo(){
        Padre=HijoIzquierdo=HijoDerecho=NULL;
        valor=0;
    }
}; 
```

这门课不是你想要的。首先所有的成员都是 st 为 NULL。没有为他们分配任何东西。所以这条线以及它之后的所有内容都是不合法的，因为它`HijoDerecho`是 null ptr。

```
Raiz->HijoDerecho->Padre=Raiz->HijoIzquierdo->Padre=Raiz; 
```

* * *

现在，即使您尝试解决该问题并`HijoIzquierdo`为此分配空间

```
Nodo *HijoIzquierdo = new Nodo (); 
```

这将为 new`Nodo`中的每个分配`HijoIzquierdo`新的`Nodo`。很快你就会耗尽内存。

**所以问题不仅仅是语义上的。这基本上是一个设计问题。**

# flash - 检查 RTMP 广播质量

> ID：16005553
> 
> 赞同：0
> 
> 时间：2013-04-14T23:29:41.930
> 
> 标签：flash, audio, video, streaming, rtmp

有没有办法在 Flash 客户端中查找 RTMP 广播的质量？

如果客户端的网络问题导致音频或视频广播质量不佳，我如何在 Flash 客户端或媒体服务器上检测到它并向客户端显示指示？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T13:17:00.200

如果您在flash客户端使用netstream接收视频，您可以获得视频的流延迟和fps。这有助于获得一些关于质量的有用数据。例如。stream.currentFPs 将为您提供 fps。

同样，这取决于您在客户端订阅视频的方式。

# javascript - 页面和对象的 JavaScript 外部代码 - 最佳实践

> ID：16005560
> 
> 赞同：2
> 
> 时间：2013-04-14T23:30:21.243
> 
> 标签：javascript, namespaces, javascript-objects

我有几个关于在**外部文件**和**命名空间**中使用**javascript的****最佳实践**的问题。

 ******让我们有一个命名空间 MyCompany、全局配置内容、各个页面的代码，也许还有一些“API”。

```
var MyCompany = {}; 
```

HTML 中的全局配置 MyCompany.root = "/";

**哪种方法更好**

*   第一的

    ```
    MyCompany.Page = {};

    (function(ns} { 
         ns.init = function() { 
             var root = MyCompany.root;
             ajax(root+"somepage.html"); 
         }; 
    }(MyCompany.Page.Home = MyCompany.Page.Home || {}); 
    ```

    并在 html 中使用

    ```
    <script>

    $( function() {
         MyCompany.Page.Home.init();
    });

    </script> 
    ```

*   第二（作为类的页面及其实例）

    ```
    MyCompany.Page.Home = function() {
         var root = MyCompany.root;
         this.init = function() {
              ajax(root + "somepage.html");
         };
    }; 
    ```

    在 HTML 中

    ```
    <script>
    var page = new MyCompany.Page.Home();

    $( function() {
         page.init();
    });
    </script> 
    ```

**子模块和混合 API 与页面 javascript**

如果我们的主页有一些评论。

```
 MyCompany.Page.Home.Reviews = function() {
       this.init = function() {
            load_stuff();
       }
 }; 
```

现在在 Page init 内部使用

```
 MyCompany.Home.Page = function(data) {
     var reviews = new MyCompany.Home.Page.Reviews();

     this.init = function() {
            reviews.init();
     };
 }; 
```

会不会造成麻烦？

很明显，Reviews 扩展了 MyCompany.Home.Page，但 MyCompany.Home.Page 需要 Reviews。

如果在 MyCompany.Home.Page.Reviews 加载之后创建 MyCompany.Home.Page 上的实例，它应该不会造成麻烦，对吧？因为评论实际上会扩展函数对象，对吗？

我想这取决于对第一个问题的回答。

也可以是

```
(function(ns) {
     ns.init = function() { MyCompany.Page.Home.Reviews.init(); };
})(MyCompany.Page.Home = MyCompany.Page.Home || {} );

(function(ns) {
     ns.init = function() { load_stuff(); };
})(MyCompany.Page.Home.Reviews = MyCompany.Page.Home.Reviews || {}); 
```

我还应该以某种方式分离 Page javascript 的 API 吗？

如

```
 MyCompany.APIS.Maps = function(location) {
          /* Private variables */
          var _location = location; 

          /* Private functions */
          function search_address(address) { .. do search .. }

          /* Public interface */
          this.search = search_address; 

          do some initialization ...
 }; 
```

如果有人阅读所有内容以发表评论，我会很高兴。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T23:48:00.790

> 哪种方法更好？揭示单例模块（第一个）或构造函数/类及其实例（第二个）？

取决于您的用例。如果您不希望`page`同时存在多个对象（而且您似乎几乎没有），那么单例（带有`init`函数）真的很好。其他一切都可能被认为是错误的，或者至少是矫枉过正。

您的`MyCompany.Page.Home.Reviews`（或`MyCompany.Home.Page.Reviews`？）类模块也是如此，您似乎只需要一个实例。

> 如果在 MyCompany.Home.Page.Reviews 加载之后创建 MyCompany.Home.Page 上的实例，它应该不会造成麻烦，对吧？因为评论实际上会扩展函数对象，对吗？

是的。

> ```
> (function(ns) {
>     ns.init = function() { MyCompany.Page.Home.Reviews.init(); };
> })(MyCompany.Page.Home = MyCompany.Page.Home || {} ); 
> ```

如果您有该`ns`快捷方式可用，则应使用它：

```
(function(ns) {
    ns.init = function() { ns.Reviews.init(); };
})(MyCompany.Page.Home = MyCompany.Page.Home || {} ); 
```

> 我还应该以某种方式分离 Page javascript 的 API 吗？

对于发展：是的，在任何情况下。每个模块都应该有自己的文件。部署时，您可以将它们连接在一起以加快加载速度，但这是一个不同的问题。******

# flash - 如何用actionscript制作Xbox游戏？

> ID：16005561
> 
> 赞同：0
> 
> 时间：2013-04-14T23:30:23.197
> 
> 标签：flash, actionscript, export, xbox

是否可以使用 actionscript 导出到 xbox？那么，我可以制作一个 iPhone 应用程序 (AIR) 并以某种方式将其导出到 Xbox 独立游戏商店吗？如果是这样，我将如何去做。我很确定游戏城堡破坏者使用了动作脚本，因为他们的整个游戏都是用 Flash 制作的，但我不明白如何将 xbox 控制器链接到这个（当然我可以很容易地将它链接到键盘）。我会不会只导出一个巨大的显示尺寸，然后电视/xbox 会自动缩小它？

以下是游戏城堡破坏者的一些参考： http: [//www.castlecrashers.com/](http://www.castlecrashers.com/)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T14:03:39.220

我确定这是不可能的，因为你不能只在 Flash 中制作一个脚本并将其导出到 Xbox，Xbox 游戏包含许多用于不同事物的各种文件。但你可以做的是制作 Flash 内容以导入到 Xbox 游戏中菜单，这也出现在 playstation 3 中。

我对 Xbox 原生环境不太熟悉，但我知道有几款游戏在游戏中包含来自交互式菜单和控制台小部件的 Flash 内容。

橄榄球联赛直播（xbox 游戏）将其用于主标题菜单。

# ruby-on-rails - 使用模型中的路由助手时不尊重 RackEnv

> ID：16005565
> 
> 赞同：0
> 
> 时间：2013-04-14T23:30:38.950
> 
> 标签：ruby-on-rails, apache, passenger, rack

在Passenger for Apache 上运行Rails 3.2.13。我的虚拟主机：

```
<VirtualHost *:80>
ServerName server
DocumentRoot /srv/http
<Directory />
    Options Indexes FollowSymLinks MultiViews
    AllowOverride None
    Order allow,deny
    allow from all
</Directory>

RackEnv test
RackBaseURI /rails_app
<Directory /srv/http/rails_app>
    Options -MultiViews
</Directory>
</VirtualHost> 
```

效果很好。唯一的问题是我在模型中使用路由 url 助手，如下所示：

```
# egg.rb
def to_exhibit
  return {
    :edit_path => Rails.application.routes.url_helpers.edit_egg_path(self)
  }
end 
```

在视图中呈现 URL 时，子 URI 会按照我的预期使用，但是当从模型中访问 URL 帮助程序时，它会被丢弃，并且路径总是相对于根。

来自 egg_controller.rb：

```
edit_egg_path(1000) --> /rails_app/eggs/1000/edit 
```

来自 some_model.rb：

```
edit_egg_path(1000) --> /eggs/1000/edit 
```

这应该像我期望的那样工作吗？我根本不介意手动修复它，但我不知道在哪里可以找到 RackBaseURI 的值，所以我可以手动插入它（如果存在）。我不想在某些环境配置中再次手动定义它，因为 Rails 必须已经知道它。

# c# - 存储 100 个向量 XNA

> ID：16005568
> 
> 赞同：1
> 
> 时间：2013-04-14T23:31:01.423
> 
> 标签：c#, xna, 2d-games

我正在制作一个 2D 自上而下的生存游戏，顶层的最大精灵数是 100 个精灵。当我偶尔使用随机生成它们的矢量位置时，我会在精灵之间得到一些重叠。

因此，为了解决这个问题，我将存储一些预定义的位置。

**问题**

所以我的问题是存储这些的最佳方式是什么。最初我打算将它们存储在一个数组中，但是我认为将它们存储在一个文本文件中并在游戏开始时读取它们将是一个更好的解决方案。

我是初学者，所以如果有人可以就此提供任何建议，将不胜感激。

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T23:58:27.207

是的，将它们存储在 CSV（逗号分隔值）文本文件中，或者如果您愿意，可以使用数据库，尽管我会推荐前者。在您的情况下，数据库存储听起来有点矫枉过正。在启动时，您会将值加载到数组中。如果你不这样做，游戏每次获得价值时都会滞后。您只需要用于持久存储的文本文件，然后需要用于使用的数组。

希望这可以为您解决问题！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T13:41:37.630

你为什么不检查精灵的位置是否重叠？如果精灵不经常重叠，那么这不应该增加太多的计算并且比固定位置模板增加更多的随机性。

您在类中为具有精灵的实体所做的是添加一个公共矩形，您可能已经使用一个矩形将它们绘制到屏幕上。将此公开允许您在生成实体的类中执行类似的操作。

```
if (addSprite)
{
Entity newEntity = new Entity(random position);
foreach (Entity e in entityList)
{
if (newEntity.rectangle(Intersects(newEntity.rectangle))
{
//give a new position to newEntity and run this loop again
}
else
{
entityList.add(newEntity);
}
} 
```

# html - 在 div 内水平居中元素

> ID：16005569
> 
> 赞同：3
> 
> 时间：2013-04-14T23:31:02.447
> 
> 标签：html, css, alignment

为了简单起见，假设您有一个 100 像素宽的 div，其中有 3 个 div，每个 20 像素宽。如何将它们对齐到它们与 div 中心对齐的位置，留下 20px；每边的间隙？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T00:00:53.630

将一些 HTML 元素居中始终取决于您的项目和集成依赖项...

您可能对这 2 个解决方案感到满意， display: inline-block; 和浮动：左；

各有优劣，希望对你有帮助！

[http://jsfiddle.net/HP2DS/1/](http://jsfiddle.net/HP2DS/1/)

```
<!-- Inline-block -->
<div id='container'>
    <div class='centered' id='content-left'></div><div class='centered' id='content-center'></div><div class='centered' id='content-right'></div>
</div>

#container {
    width: 100px;
    height: 80px;
    text-align: center;
    background: cyan;
}

#container .centered {
    display: inline-block;
    width: 20px;
    height: 100%;
    margin: auto;
    background: magenta;
    border: 1px solid black;
    box-sizing: border-box;
}

<!-- Floating -->
<div id='container-2'>
    <div class='centered' id='content-2-left'></div>
    <div class='centered' id='content-2-center'></div>
    <div class='centered' id='content-2-right'></div>
</div>

#container-2 {
    width: 60px; /* 60px + 2*20px of padding... */
    height: 80px;
    padding: 0 20px;
    text-align: center;
    background: cyan;
}

#container-2 .centered {
    float: left;
    width: 20px;
    height: 100%;
    margin: auto;
    background: magenta;
    border: 1px solid black;
    box-sizing: border-box;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T00:20:52.793

再会！以下是我的实现方式：

**HTML**

```
<div id="container">
  <div class="child"></div>
  <div class="child"></div>
  <div class="child"></div>
</div> 
```

**CSS**

```
#container {
  width: 100px;
  height: 100px;
  border: 1px solid red; /** for viewing purposes **/
  text-align: center; /** center the divs **/
  font-size: 0; /** remove the unwanted space caused by display: inline-block in .child **/
}

#container .child {
  display: inline-block; /** set the divs side-by-side **/
  vertical-align: top;
  width: 20px;
  height: 100px;
  font-size: 12px; /** override font-size: 0 of #container, so that text will be visible again **/
  text-align: left; /** set text in the .child divs back to normal alignment **/
  border: 1px solid blue; /** for viewing purposes **/
  box-sizing: border-box;
} 
```

我希望这有帮助。干杯! :)

# haxe - 豹子上的锈

> ID：16005572
> 
> 赞同：5
> 
> 时间：2013-04-14T23:31:28.327
> 
> 标签：haxe, rust

我已经尝试过 macport 生锈，但它失败了。如何在豹上编译 rust，如果我可以运行 mono（和 mono develop）并在豹上制作 haxe，那么必须可以使用 rust。我有 gcc 4.6 所以相当新的编译器设置。

我有兴趣尝试 rust，现在早期的 haxe-rust 端口更加感兴趣。我可以打开我的电脑，但老实说，我最终总是在我的 Mac 上进行试验，所以除非我可以将它安装在这个豹子系统上，否则我怀疑我是否会正确地探索它。任何有关生锈的技巧都值得赞赏。

并且查看邮件列表，它表明即使我升级了，我目前在 Mac 上运行 rust 也会遇到问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T17:28:54.247

不幸的是，就 Leopard 支持而言，没有人提供支持。Mozilla 雇用的核心开发人员此时正针对更新的 OSX 变体，因此由志愿者来维护其他变体，尽最大努力。我们只有这么多时间。

# c#-4.0 - 如何提升 Lucene.Net 3 中的字段

> ID：16005576
> 
> 赞同：4
> 
> 时间：2013-04-14T23:32:21.430
> 
> 标签：c#-4.0, asp.net-mvc-4, lucene.net

我想提升 Lucene.Net 3.0.3 中的一个领域。然而，在 Lucene 中似乎不再定义 SetBoost 方法。我如何提升一个字段，例如，我希望文档的“标题”比其他字段更重要？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-15T06:21:51.477

您可以在索引时间或搜索时间提升字段。要在索引时间中提升字段，您可以设置：

```
 Field titleField = new Field("title", strTitle, Field.Store.NO, Field.Index.ANALYZED);
 titleField.Boost = 2;

 doc.Add(titleField); 
```

请记住，必须将 OmitNorms 设置为 false。

要提高搜索时间的字段，您可以设置：

```
 TermQuery q = new TermQuery(new Term("title", "cat"));
  q.Boost = 2;

  _searcher.Search(q, 100); 
```

# regex - 使用 sed 替换等长的文本

> ID：16005578
> 
> 赞同：6
> 
> 时间：2013-04-14T23:32:30.523
> 
> 标签：regex, linux, bash, sed

有没有办法使用 sed 替换具有相同长度的其他东西（例如点、零等）的模式？像这样：

```
maci:/ san$ echo "She sells sea shells by the sea shore" | sed 's/\(sh[a-z]*\)/../gI'
.. sells sea .. by the sea .. 
```

（*“I”需要更新版本的 sed 来忽略大小写*）
这很简单：以“sh”开头的单词被双点 (..) 替换，但我该如何让它变成这样：`... sells sea ...... by the sea .....`

任何想法？干杯!

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-14T23:50:41.147

我的怀疑是你不能在标准中做到这一点`sed`，但你可以用 Perl 或其他更强大的正则表达式处理来做到这一点。

```
$ echo "She sells sea shells by the sea shore" |
> perl -pe 's/(sh[a-z]*)/"." x length($1)/gei'
... sells sea ...... by the sea .....
$ 
```

`e`修饰符表示替换模式是可执行的 Perl 脚本；在这种情况下，它重复字符`.`的次数与匹配模式中的字符数一样多。修饰符在`g`整个线上重复；`i`修饰符用于不区分大小写的匹配。Perl的`-p`选项在选项指定的脚本中处理后打印每一行`-e`- 替换命令。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-14T23:44:28.827

这个 awk-oneliner 可以为您完成这项工作吗？

```
awk '{for(i=1;i<=NF;i++)if($i~/^[Ss]h/)gsub(/./,".",$i)}1' file 
```

用你的数据测试：

```
kent$  echo "She sells sea shells by the sea shore"|awk '{for(i=1;i<=NF;i++)if($i~/^[Ss]h/)gsub(/./,".",$i)}1'
... sells sea ...... by the sea ..... 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-01-04T17:09:33.593

一个老问题，但我找到了一个不错且相对较短的单行 sed 解决方案：

```
sed ':a;s/\([Ss]h\.*\)[^\. ]/\1./;ta;s/[Ss]h/../g' 
```

通过在循环中一次替换一个字符来工作。

`:a;`开始一个循环

`s/\([Ss]h\.*\)[^\. ]`搜索 an`sh`后跟任意数量的`.`s（到目前为止我们已完成的工作），后跟非点或空格字符（我们将要替换的内容）

`/\1./;`用我们迄今为止完成的工作加上另一个`.`.

`ta;`如果我们进行任何替换，则循环，否则...

`s/[Ss]h/../g``sh`用两个s替换`.`s 并收工。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-04-15T02:49:36.533

```
$ echo "She sells sea shells by the sea shore" |
awk '{
   head = ""
   tail = $0
   while ( match(tolower(tail),/sh[a-z]*/) ) {
      dots = sprintf("%*s",RLENGTH,"")
      gsub(/ /,".",dots)
      head = head substr(tail,1,RSTART-1) dots
      tail = substr(tail,RSTART+RLENGTH)
   }
   print head tail
}'
... sells sea ...... by the sea ..... 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-04-15T11:11:28.200

正如其他人所指出的，sed 不太适合这项任务。这当然是可能的，这里有一个例子，它适用于带有空格分隔的单词的单行：

```
echo "She sells sea shells by the sea shore" |

sed 's/ /\n/g' | sed '/^[Ss]h/ s/[^[:punct:]]/./g' | sed ':a;N;$!ba;s/\n/ /g' 
```

输出：

```
... sells sea ...... by the sea ..... 
```

第一个'sed'用换行符替换空格，第二个做点，第三个删除换行符，[如this answer所示](https://stackoverflow.com/a/1252191/1331399)。

如果您有不可预测的单词分隔符和/或段落，这种方法很快就会变得难以管理。

### 编辑 - 多行替代

这是一种处理多行输入的方法，灵感来自*Kent 的*评论（GNU sed）：

```
echo "
She sells sea shells by the sea shore She sells sea shells by the sea shore,
She sells sea shells by the sea shore She sells sea shells by the sea shore
 She sells sea shells by the sea shore She sells sea shells by the sea shore
" |

# Add a \0 to the end of the line and surround punctuations and whitespace by \n 
sed 's/$/\x00/; s/[[:punct:][:space:]]/\n&\n/g' |

# Replace the matched word by dots
sed '/^[Ss]h.*/ s/[^\x00]/./g' | 

# Join lines that were separated by the first sed
sed ':a;/\x00/!{N;ba}; s/\n//g' 
```

输出：

```
... sells sea ...... by the sea ..... ... sells sea ...... by the sea .....,
... sells sea ...... by the sea ..... ... sells sea ...... by the sea .....
 ... sells sea ...... by the sea ..... ... sells sea ...... by the sea ..... 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-04-15T12:03:53.233

这可能对您有用（GNU sed）：

```
sed -r ':a;/\b[Ss]h\S+/!b;s//\n&\n/;h;s/.*\n(.*)\n.*/\1/;s/././g;G;s/(.*)\n(.*)\n.*\n/\2\1/;ta' file 
```

在本质上; `sh`它复制一个以or开头的单词`Sh`，将每个字符替换为`.`，然后将新字符串重新插入到原始字符串中。当搜索字符串的所有出现都用尽时，它会打印出该行。

替代：

```
sed -E 's/\S+/\n&/g;s#.*#echo "&"|sed "/^sh/Is/\\S/./g"#e;s/\n//g' file 
```

# php - GD启用..仍然有问题。php 未编译 -- 有 GD 支持

> ID：16005579
> 
> 赞同：0
> 
> 时间：2013-04-14T23:32:31.083
> 
> 标签：php, gd

5.3.3-7 挤15

我在服务器上运行 5.3.3-7 squeeze15。我没有为 GD 或任何东西使用 --with 命令编译 php。

我已经使用标准的 apt-get install php5-gd 安装了 php5-gd。我的 phpinfo 显示 GD 支持

解析的附加 .ini 文件 /etc/php5/apache2/conf.d/gd.ini

我检查了 gd.ini 文件，它肯定有未注释的 gd.so 扩展名。

phpinfo 的 GD 部分显示它全部被启用

已启用 GD 支持 GD 版本 2.0 已启用 FreeType 支持 已启用 FreeType 与 freetype 的链接 FreeType 2.4.2 版 T1Lib 支持已启用 GIF 读取支持已启用 GIF 创建支持已启用 JPEG 支持已启用 libJPEG 版本 6b PNG 支持已启用 libPNG 版本 1.2.44 WBMP 支持

问题是我仍然遇到 GD 问题，从致命错误到不渲染正在调整图像大小的页面

php.ini 没有对 gd.so bt 的引用，这是 gd.ini 文件不需要的吗？

我读过我可能需要用 gd 重新编译 php 吗？

任何想法都会有所帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T17:03:16.643

基本上问题是 php 没有使用 GD 选项编译，所以这意味着对 imageantialias() 的调用失败。

删除该行并因此该功能删除了错误，请参阅下面的 php 手册所说的内容，

[http://php.net/manual/en/function.imageantialias.php](http://php.net/manual/en/function.imageantialias.php)

> ```
> Note: This function is only available if PHP is compiled with the bundled version of the GD library. 
> ```

当然，这并不能解决问题，但它是一种解决方法，以防其他人遇到同样的问题。

# java - OpenMaple Java 接口

> ID：16005581
> 
> 赞同：1
> 
> 时间：2013-04-14T23:32:40.333
> 
> 标签：java, linear-algebra, maple

我正在尝试使用带有 Java 接口的 OpenMaple 来简单地将矩阵转换为简化的行梯形形式。最终我想找到一个矩阵的逆。我不确定如何在我的程序中使用二维数组并使其与引擎对象交互。

这里有一些基本的例子。[http://www.maplesoft.com/support/help/Maple/view.aspx?path=OpenMaple/Java/Engine/evaluate](http://www.maplesoft.com/support/help/Maple/view.aspx?path=OpenMaple/Java/Engine/evaluate)

我基本上想要这个：`t.evaluate( "with(LinearAlgebra): A:=<<2,4,8>|<8,2,4>|<4,8,2>>; ReducedRowEchelonForm(A);" );`

问题 1：得到我在该语句中的二维矩阵。问题 2：以某种方式使其输出到另一个二维数组中。

我对OpenMaple了解不多，所以我来了。谢谢！

# c - 分配 char 数组时出现 SIGABRT 错误

> ID：16005585
> 
> 赞同：-2
> 
> 时间：2013-04-14T23:33:22.763
> 
> 标签：c, memory-management

我的程序在以下一段 od 代码上崩溃：

```
 newElement->name = (char*) malloc((strlen(name) + 1) * sizeof(char)); 
```

通过使用调试器，我得到 SIGABRT 错误，我不知道为什么，因为它在第二次迭代期间停止（第一次迭代没有任何问题）。

我检查了是否

```
 name 
```

有一个终止的空字符，它有。

这是完整的代码：

```
element* createElement(const char* name, const char* text) {
if (name == NULL) return NULL;                             

element* newElement = malloc(sizeof(element));
    if (newElement == NULL) return NULL;                    

    newElement->name = (char*) malloc((strlen(name) + 1) * sizeof(char));
    if (newElement->name == NULL) return NULL;
    strcpy(newElement->name, name);

if (text == NULL) newElement->text = NULL;
else
{
    newElement->text = malloc((strlen(text) + 1) * sizeof(char));
        if (newElement->text == NULL) return NULL;
    strcpy(newElement->text, text);
}

newElement->parentNode = NULL;
newElement->previousSibling = NULL;
newElement->nextSibling = NULL;
newElement->firstChild = NULL;
newElement->lastChild = NULL;

return newElement; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T00:17:05.597

从

[http://linux.die.net/man/3/malloc](http://linux.die.net/man/3/malloc)

> 如果 MALLOC_CHECK_ 设置为 0，任何检测到的堆损坏都会被静默忽略；如果设置为 1，则在 stderr 上打印诊断消息；如果设置为 2，则立即调用 abort(3)；如果设置为 3，则在 stderr 上打印诊断消息并中止程序。

所以你得到一个 SIGABRT 因为你将 MALLOC_CHECK_ 设置为 2 或 3。如果它是 2，将其更改为 3 以获取诊断消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T23:39:10.970

您正在尝试 malloc 由表达式给出的特定部分内存：

```
(strlen(name) + 1) * sizeof(char) 
```

可能您的问题出在 strlen(name) 部分。也许 name 没有以 null 结尾的字符串，因此 strlen 不起作用。

正如评论中所指出的，malloc 本身不应该创建和堆溢出，但是，如果它检测到一些内部数据损坏，它可能确实会调用 abort()，这些损坏可能是并且可能是由堆溢出、缓冲区溢出或泄漏引起的在与此代码不直接相关的代码的任何其他部分。这里重要的是：这个 malloc 调用是否返回？还是它在执行期间发送信号？

如果它没有返回并且它在执行期间发送 SIGABRT 你可能很难弄清楚你的程序中的哪些地方损坏了 malloc 所需的数据结构......如果你说你执行的第一个 malloc 调用没问题，也许你应该看看在两者之间执行了什么代码，但我相信你不能确定两个 malloc 调用之间发生的损坏，malloc 可能根本看不到第一次执行时的损坏原因...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T23:38:12.680

您的代码本身就很好。

这`sigabort`可能是堆溢出导致的，即您的`malloc`.

# r - R，遍历矩阵的行向量

> ID：16005594
> 
> 赞同：4
> 
> 时间：2013-04-14T23:34:06.940
> 
> 标签：r, vector, matrix, fold, higher-order-functions

我有一些向量`vect`，我想遍历`v`矩阵的行向量并计算：

`cov(v, vect)`.

我试过了：

```
for(vect in mat2)     #where mat2 is a 215 by 31 matrix 
```

然而，每个向量似乎都是一个值为 1 的标量。

1.  如何迭代矩阵的行向量？
2.  为了使它更好，因为我有兴趣计算`cov(v, vect)`其中 v 是行向量的总和，我如何使用高阶函数`left-fold`和`right-fold`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-14T23:37:51.483

你在找`apply`吗？

```
apply(mat2, 1, function(v)cov(v,vect)) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-14T23:38:54.190

如果我理解 vect 是与 mat2 分开的向量：

```
apply(mat2, 1, function(v) cov(v, vect)) 
```

apply 函数允许您在行（如果第二个参数为 1）或列（如果 2）或更高维度（如果 >2）上应用任意函数。它也比使用循环快得多。

# dependencies - 让 sbt 任务依赖项工作

> ID：16005600
> 
> 赞同：2
> 
> 时间：2013-04-14T23:35:03.627
> 
> 标签：dependencies, task, sbt

我正在尝试定义自定义任务和现有任务之间的依赖关系（在这种情况下在编译中编译），如下：sbt 文档中的[任务依赖关系。](http://www.scala-sbt.org/release/docs/Detailed-Topics/Tasks#dependencies)但是，我能得到的最接近的是：

```
object ApplicationBuild extends Build {

val hello = TaskKey[Unit]("hello", "Prints 'Hello World'")

val helloTaskA = hello := {
  println("Hello World")
}

val helloTaskB = hello <<= hello.dependsOn(compile in Compile)

val main = play.Project(appName, appVersion, appDependencies).settings(
  helloTaskA, 
  helloTaskB      
) 
```

这似乎有效。hello 在执行之前触发编译，如有必要。但是，我不明白为什么我需要在我的设置中同时包含 helloTaskA 和 helloTaskB。如果我没有在设置中包含 helloTaskA，我会得到：

```
[error] Reference to undefined setting: 
[error] 
[error]   *:hello from *:hello 
```

我知道因为 helloTaskA 是不可变的，所以 helloTaskB 是一个不同的任务，但我认为它会默默地包含 helloTaskA。此外，我不确定为具有相同任务键的任务包含两个设置意味着什么。

# ajax - 创建异步 Web 应用程序的最佳方法是什么

> ID：16005603
> 
> 赞同：0
> 
> 时间：2013-04-14T23:35:45.733
> 
> 标签：ajax, web-applications, startup

我正在尝试实现一个 Web 应用程序，它就像一些 twitter、facebook、pinterest 功能的混合体，因此该应用程序高度依赖于对服务器的异步调用，任何帮助我只想知道是否只使用 ajax或者有一些其他的魔法做得更好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T21:31:07.543

您将需要 ajax 来访问服务器端代码。当您需要从服务端代码（即反向 ajax）调用 javascript 时，很快就会需要。

通过使用 DWR 框架，您可以同时完成这两者。

其他明智的使用 jquery 的 ajax 功能将是一个很大的帮助。

# c# - C# 属性或简单变量，代码风格

> ID：16005605
> 
> 赞同：-2
> 
> 时间：2013-04-14T23:36:06.227
> 
> 标签：c#, variables, properties, coding-style, set

我想知道，在 C# 中，我可以这样声明（我经常从代码审查中看到这种风格）：

```
string myVarName
{
    get
    {
        return myVarName;
    }
    set
    {
        myVarName = value;
    }
} 
```

但是很多人说，这比仅仅`string myVarName;`声明为不是属性要好。

我有时会感到困惑，因为我经常在代码清单中看到这种风格。

为什么更好？`inlined`除了提示`JIT-compiler`应该将函数内联编译到使用它的位置以避免函数调用开销之外，还有属性吗？

或者我可以通过一些表现获胜？

至于代码风格，我喜欢更简单的变量声明，而不是属性风格。

至于属性，我只能看到一些默认操作/触发器的最佳优势。例如：我需要将传入值的一半值或类似的东西存储在属性中......

也许我一点都不对。我是对还是错？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T23:39:58.583

实际上，这与编码风格无关，您应该以对您最有利的方式使用属性。

我使用这样的属性：

```
public string Name {get;set;} 
```

当我不需要任何特殊实现时

我像这样使用它们：

```
public string Name
{
    get
    {
        return name;
    }
    set
    {
        name = value.toLower();
    }
} 
```

当我需要在分配*之前对值做一些事情时。*

我也鼓励你使用属性不是因为它“更好”，而是因为它更灵活。

想一想您刚刚使用了公共变量。如果您需要添加某种验证，则需要更新每个实例化您要修改的类的类。使用属性，您不需要任何外部更改。

至于**性能**问题，不用担心。我认为避免使用 Properties 不会获得任何性能提升，即使您这样做，它也会非常小，绝不值得，因为您正在丢弃您将来可能需要的真正有价值的功能，并且可能会非常痛苦更新。

# r - 转换对象列表以获取行名 R

> ID：16005607
> 
> 赞同：1
> 
> 时间：2013-04-14T23:36:25.860
> 
> 标签：r, object, rowname

我无法从对象中提取行名。当我输入 rownames(object) 时，我得到“null”，但如果我输入 object，我得到信息矩阵。如果有帮助，当我输入类（对象）时，它会告诉我它是一个列表。我正在寻找的是一种获取侧面行名的方法。谢谢！

>

```
 alpha84 alpha91 alpha98 alpha105 alpha112 alpha119
YBR088C    1.08    0.27    0.04    -0.51    -0.80    -0.89
YDL003W    0.62   -0.01   -0.36    -0.04    -0.55    -0.55
YDR097C    0.64    0.18   -0.05     0.03    -0.76    -0.66
YDR507C    0.53    0.13    0.07     0.14    -0.56    -0.41
YER070W    0.73    0.20    0.00     0.11    -0.53    -0.72
YER095W    0.28   -0.05   -0.11    -0.13    -0.87    -0.90
YER111C    0.37   -0.19   -0.11    -0.54    -0.34    -0.47
YGR189C    0.81    0.12    0.15    -0.39    -0.60    -1.20
YKL045W    0.46   -0.27   -0.10    -0.23    -0.42    -1.21
YLR183C    0.96    0.14    0.28    -0.17    -0.14    -0.68
YML027W    0.50   -0.01    0.11    -0.33    -0.44    -0.94
YMR179W    0.42    0.04   -0.40    -0.47    -0.12    -0.61
YNL300W    0.79    0.33    0.54    -0.09    -0.31    -1.01
YOR074C    0.73    0.09   -0.27    -0.22    -0.62    -0.80
YPL163C    1.61    0.84    0.82    -0.09    -0.48    -0.97
YPL256C    1.10    0.56    0.18    -0.32    -0.38    -1.04 
```

> 结构（列表（`4`=结构（列表（alpha0 = c（-1.15，-1.22，-0.72，-1.76，-1.46，-0.57，-1.21，-0.32，-0.8，-1.7，-1.72，-1.3，-1.24，-1.14 , -2.42, -1.41), alpha7 = c(-0.86, -0.74, -0.85, -0.34, -0.76, 0.42, -0.26, -0.65, 0.01, -1.46, -0.66, 0.07, -0.78, -0.31 , -2.15, -0.69), alpha14 = c(1.21, 1.34, 0.54, 0.18, 1.08, 1.03, 1.36, 0.87, 0.86, 0.93, 1.73, 0.98, 0.31, 0.57, 0.66, 1.39 ), alpha21 = c(1.39) , 1.5, 1.04, 1.07, 1.5, 1.35, 1.37, 1.1, 0.84, 1.12, 1.29, 1.12, 1.46, 1.08, 1.98, 1.98), alpha28 = c(1.12, 0.63, 0.84, 0.47, 0.5, 0.4, 0.5, 0 1.17, 0.51, 0.91, 0.51, 0.13, 1.11, 1.17, 1.55, 0.74), alpha35 = c(0.16, 0.29, 0.24, 0.32, 0.47, 0.42, 0.18, 0.44, 0.14, 0.171, 0.6,8, 0.571, 0.6,8, , 0.78, 0.21), alpha42 = c(-0.44, -0.55, -0.64, -0.5, -0.7, -0.4, -0.85, 0.37, -0.4, 0, 0.23, -0.58, 0.07, 0.31, 0.14, - 0.36), alpha49 = c(-0.93,-0.65, -0.83, -0.25, -0.68, -0.9, -0.82, -0.93, -0.64, -0.73, -0.55, -0.63, -0.23, -0.74, -0.94, -1.32), alpha56 = c( -1.23, -0.76, -0.36, -0.48, -1.03, -0.73, -0.75, -1.45, -0.8, -0.9, -0.97, -0.9, -0.58, -0.68, -1.03, -1.5), alpha63 = c(-0.62, -0.88, -0.7, -0.25, -0.55, -0.47, 0.07, -0.57, 0.41, -0.46, -0.48, 0.09, -1.01, -0.1, -1.5, -1.07), alpha70 = c(0.62, 0.69, 0.99, 0.79, 0.35, 0.2, 0.89, 0.15, 0.88, 0.85, 0.57, 0.54, -0.24, -0.38, -0.03, 0.35), alpha77 = c(1.3, 1.25, 1.08, 0.97 , 1.24, 0.78, 0.78, 0.92, 0.75, 0.93, 0.88, 1.44, 0.23, 0.75, 1.25, 1.57), alpha84 = c(1.08, 0.62, 0.64, 0.53, 0.73, 0.28, 6, 0.37, 0.9, 0.8 0.5, 0.42, 0.79, 0.73, 1.61, 1.1), alpha91 = c(0.27, -0.01, 0.18, 0.13, 0.2, -0.05, -0.19, 0.12, -0.27, 0.14, -0.01, 0.04, 0.33, 0.09, 0.84, 0.56), alpha98 = c(0.04,-0.36, -0.05, 0.07, 0, -0.11, -0.11, 0.15, -0.1, 0.28, 0.11, -0.4, 0.54, -0.27, 0.82, 0.18), alpha105 = c(-0.51, -0.04, 0.03, 0.14, 0.11, -0.13, -0.54, -0.39, -0.23, -0.17, -0.33, -0.47, -0.09, -0.22, -0.09, -0.32), alpha112 = c(-0.8, -0.55, -0.76 , -0.56, -0.53, -0.87, -0.34, -0.6, -0.42, -0.14, -0.44, -0.12, -0.31, -0.62, -0.48, -0.38), alpha119 = c(-0.89, -0.55 , -0.66, -0.41, -0.72, -0.9, -0.47, -1.2, -1.21, -0.68, -0.94, -0.61, -1.01, -0.8, -0.97, -1.04)), .Names = c( “alpha0”、“alpha7”、“alpha14”、“alpha21”、“alpha28”、“alpha35”、“alpha42”、“alpha49”、“alpha56”、“alpha63”、“alpha70”、“alpha77”、“alpha84” ", "alpha91", "alpha98", "alpha105"、"alpha112"、"alpha119")、row.names = c("YBR088C"、"YDL003W"、"YDR097C"、"YDR507C"、"YER070W"、"YER095W"、"YER111C"、"YGR189C"、 “YKL045W”、“YLR183C”、“YML027W”、“YMR179W”、“YNL300W”、“YOR074C”、“YPL163C”、“YPL256C”），类 = “data.frame”）），.Names = “4”）“YPL163C”、“YPL256C”）、类 = “data.frame”））、.Names = “4”）“YPL163C”、“YPL256C”）、类 = “data.frame”））、.Names = “4”）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-14T23:47:47.900

你有`list`一个元素。这个单一元素是一个`data.frame`.

如果您在`rownames`从此对象之后，则适当地索引列表

```
rownames(object[[1]])
## [1] "YBR088C" "YDL003W" "YDR097C" "YDR507C" "YER070W" "YER095W" "YER111C" "YGR189C" "YKL045W" "YLR183C" "YML027W"
## [12] "YMR179W" "YNL300W" "YOR074C" "YPL163C" "YPL256C" 
```

有关 data.frames 的更一般列表

```
# get rownames from all data.frames in a list
lapply(object, rownames) 
```

如果你想要一个 data.frame，而不是一个包含 data.frame 的列表，那么你可以简单地将第一个元素的结果分配给一个单独的元素

```
object.df <- object[[1]] 
```

如果它是 data.frames 的列表，则将其`R`保留在列表中并用于`lapply`处理每个元素可能更惯用。

# javascript - Dojo 按键事件不起作用

> ID：16005608
> 
> 赞同：0
> 
> 时间：2013-04-14T23:36:29.893
> 
> 标签：javascript, dojo

我正在使用 dojo 来禁用`dojo.form.numberTextBox`. 我是这样做的：

```
<input style="width: 100px" data-dojo-type="dijit.form.NumberTextBox"  
  name="test" id="test" maxlength="3"> 
```

并使用脚本：

```
require(["dojo/keys", "dojo/on"], 
    dojo.connect(dijit.byId("remainderDays"), "onKeyPress", function (evt) {
    var charOrCode = evt.charCode || evt.keyCode;
    if (charOrCode == keys.NUMPAD_0) {
        dojo.stopEvent(evt);
    }
})); 
```

它不工作。

甚至禁用除数字之外的按键事件的 Javascript 函数也不起作用。但是当我从输入中删除 dojo 类型时，它开始工作。

任何想法或帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T06:27:36.147

好吧，你放`dojo.connect`错了，如果我理解得很好，你试图阻止除数字之外的所有键。如果需要，您应该检查以下内容：

```
if (evt.charOrCode > '9' || evt.charOrCode < '0') {
    ...
} 
```

代码本身如下所示：

```
require(["dijit/form/NumberTextBox"]);
require(["dojo/ready", "dojo/parser", "dojo/on", "dojo/keys"], function(ready, parser, on, keys) {
    ready(function() {
        parser.parse();

        on(dijit.byId("test"), "keypress", function(evt) {
             if (evt.charOrCode > '9' || evt.charOrCode < '0') {
                 dojo.stopEvent(evt);
             }
        });
    });
}); 
```

如您所见，我删除了`dojo.connect`（因为已弃用）并使用了该`"keypress"`事件。我还修复了您的代码（因为您的语法错误）。

可以在[此处](http://jsfiddle.net/veEgg/1/)找到工作的 JSFiddle 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-15T16:05:51.243

您可以添加以下行而不是使用按键事件：

```
var btnClick = dijit.byId("test")._onKey = function(evt) {
 key = evt.keyCode;
 if (key == dojo.keys.ENTER) {
  //what you want it to do
 }
} 
```

# apache-flex - 如何在 Flash #2048 或类似错误中显示自定义消息？

> ID：16005610
> 
> 赞同：0
> 
> 时间：2013-04-14T23:37:00.920
> 
> 标签：apache-flex, security, error-handling, customization

有没有办法覆盖 #2048 Security Sandbox Violation 并在 Flash Player 中显示自定义消息？

基本上我需要显示类似“Opsss！您的连接已断开......”之类的内容。

我正在使用 Flex 4.6

此致。罗纳尔多

# c - 实现桶排序 - 使用 calloc 获得更好的性能？

> ID：16005617
> 
> 赞同：0
> 
> 时间：2013-04-14T23:37:59.207
> 
> 标签：c

我正在尝试使用 C 中的 Bucket Sort 算法来实现某些东西，因此为了使算法正常工作，我需要手动将数组中的每个项目初始化为零，但如果我会`calloc`改用，我会得到所有无论如何初始化为零的值。

我确定的唯一区别是，通过使用`calloc`我将所有内容都放在堆内存中 - 这是一个很大的区别吗？

问题是——这两种方式的优缺点是什么？（性能等）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T23:43:28.527

如果您需要分配和零填充数组，那么 calloc 是最简单的方法。不要让零初始化驱动堆栈或堆分配之间的选择。独立做出选择。

不要挂断分配和初始化的性能。你在排序。排序将占主导地位。您将无法可靠地测量分配和零初始化。与性能一样，如果您真的想知道，请测量。

# javascript - 为什么我的即时验证没有显示任何内容？

> ID：16005618
> 
> 赞同：0
> 
> 时间：2013-04-14T23:37:59.993
> 
> 标签：javascript, html, validation

我有一个表格，上面有许多字段。当用户输入任何内容时，该字段应自动开始发送有关输入是否有效的反馈。列出的 javascript 代码假设可以处理瞬时反馈，但它没有给出任何回复。如果任何用户的输入与正则表达式不匹配，还假设停止提交表单。正则表达式也不起作用，但在我使用 innerHTML 之前它们工作得非常好。如果不是强制使用 innerHTML，我会重新使用警报。

```
function insert() {

   var valid = true;

    document.getElementById("MessNM").innerHTML = "";
    if (!document.getElementById("name").value.match(/^^[A-Z]{1}[a-z]{3,7}$/)) {
        document.getElementById("MessNM").innerHTML = " Please input a proper name.";
        valid = false;
    }

    document.getElementById("MessPS").innerHTML = "";
    if (!document.getElementById("password").value.match(/^[a-zA-Z0-9]{4,8}$/)) {
        document.getElementById("MessPS").innerHTML = " Please input a proper password with numbers and letters.";
        valid = false;
    }

    document.getElementById("MessPSC").innerHTML = "";
    if (document.getElementById("passwordcheck").value != document.getElementById("password").value) {
        document.getElementById("MessPSC").innerHTML = " Password does not match.";
        valid = false;
    }

    document.getElementById("MessAD").innerHTML = "";
    if (!document.getElementById("address").value.match(/^[a-zA-Z0-9\s,'-]{5,40}$/)) {
        document.getElementById("MessAD").innerHTML = " Address is not valid";
        valid = false;
    }

    document.getElementById("MessZC").innerHTML = "";
    if (!document.getElementById("zipcode").value.match(/^[0-9]{5}$/)) {
        document.getElementById("MessZC").innerHTML = " Please input a proper Zipcode.";
        valid = false;
    }
    if (!document.getElementById("zipcode").value.match(/^[0-9]{5}(-[0-9]{4})?$/)) {
        document.getElementById("MessZC").innerHTML = " Please input a proper Zipcode.";
        valid = false;
    } else {
        return valid;
    }
}

function test() {

    var result = true;

    if (!insert()) {
        result = false;
    }

    return result;
} 
```

这是 javascript 函数引用的 html 表单。

```
<form name="Insert" id="I2" action="order.php" method="post" style="display: none;" onsubmit="return test()">
    <p align="left">
        <div id="texter">
            <input type=text id="name" required="required" onkeyup="insert()" name="name" autocomplete="off" autofocus>Name <span id="MessNM"></span>
            <br>
            <input type=email id="email" required="required" onkeyup="insert()" name="email">Email Address <span id="MessEM"></span>
            <br>
            <input type=password id="password" required="required" onkeyup="insert()" name="password">Password <span id="MessPS"></span>
            <br>
            <input type=password id="passwordcheck" required="required" onkeyup="insert()" name="passwordcheck">Confirm Password <span id="MessPSC"></span>
            <br>
            <input type=text id="address" required="required" onkeyup="insert()" name="address">Address <span id="MessAD"></span>
            <br>
            <input type=text id="zipcode" required="required" onkeyup="insert()" name="zipcode">Zipcode <span id="MessZC"></span>
            <br>
        </div>
        <input type="submit" value="submit" onclick="test()">
        <input type="reset" value="Clear All">
        <br>
        <br>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T00:30:03.457

我看到了几个问题。

1.  您拥有`style="display: none;"`使整个表格不可见的表格。
2.  您的验证函数在第一次验证失败时返回 false，这意味着您只会为第一个无效字段显示错误消息，例如，如果电子邮件地址和邮政编码无效，您只会收到电子邮件消息地址。
3.  地址验证的正则表达式已损坏。
4.  修复密码确认错误后，错误消息不会清除。

事实上，当您使用警报时，您说它正在工作，我猜您所说的主要问题是由于每个字段验证返回 false 的事实引起的。您之前可能刚刚收到警报，并在函数末尾返回了一个布尔值。这是解决该问题以及我上面提到的其他问题的解决方案。

```
<form name="Insert" id="I2" action="order.php" method="post" onsubmit="return test()">
    <p align="left">
        <div id="texter">
            <input type=text id="name" required="required" onkeyup="insert()" name="name" autocomplete="off"/>Name <span id="MessNM"></span>
            <br>
            <input type="email" id="email" required="required" onkeyup="insert()" name="email">Email Address <span id="MessEM"></span>
            <br>
            <input type="password" id="password" required="required" onkeyup="insert()" name="password">Password <span id="MessPS"></span>
            <br>
            <input type="password" id="passwordcheck" required="required" onkeyup="insert()" name="passwordcheck">Confirm Password <span id="MessPSC"></span>
            <br>
            <input type="text" id="address" required="required" onkeyup="insert()" name="address">Address <span id="MessAD"></span>
            <br>
            <input type="text" id="zipcode" required="required" onkeyup="insert()" name="zipcode">Zipcode <span id="MessZC"></span>
            <br>
        </div>
        <input type="submit" value="submit" onclick="test()">
        <input type="reset" value="Clear All">
        <br>
        <br>
</form>

function insert() {
    var valid = true;

    document.getElementById("MessNM").innerHTML = "";
    if (!document.getElementById("name").value.match(/^^[A-Z]{1}[a-z]{3,7}$/)) {
        document.getElementById("MessNM").innerHTML = " Please input a proper name.";
        valid = false;
    }

    document.getElementById("MessPS").innerHTML = "";
    if (!document.getElementById("password").value.match(/^[a-zA-Z0-9]{4,8}$/)) {
        document.getElementById("MessPS").innerHTML = " Please input a proper password with numbers and letters.";
        valid = false;
    }

    document.getElementById("MessPSC").innerHTML = "";
    if (document.getElementById("passwordcheck").value != document.getElementById("password").value) {
        document.getElementById("MessPSC").innerHTML = " Password does not match.";
        valid = false;
    }

    document.getElementById("MessAD").innerHTML = "";                                                           
    if (!document.getElementById("address").value.match(/^[a-zA-Z0-9\s,'-]*$/)) {
        document.getElementById("MessAD").innerHTML = " Address is not valid";
        valid = false;
    }

    document.getElementById("MessZC").innerHTML = "";
    if (!document.getElementById("zipcode").value.match(/^[0-9]{5}$/)) {
        document.getElementById("MessZC").innerHTML = " Please input a proper Zipcode.";
        valid = false;
    }
    if (!document.getElementById("zipcode").value.match(/^[0-9]{5}(-[0-9]{4})?$/)) {
        document.getElementById("MessZC").innerHTML = " Please input a proper Zipcode.";
        valid = false;
    } 

    return valid;
} 
```

# javascript - 让随机数写在页面上

> ID：16005619
> 
> 赞同：0
> 
> 时间：2013-04-14T23:38:07.660
> 
> 标签：javascript

我正在尝试创建一个函数，该函数首先选择一个随机数，然后在页面上打印从 1 到随机数的每个数字。

基本上，它应该看起来像这样：

```
1   2   3   4   5   6   7   8   9   10  11  12  13  14  15  16  17  18  19  20  21  22  23  24  twenty  five    26  27  28  29  30  31  32  33  34  35  
36  37  38  39  40  41  42  43  44  45  46  47  48  49  50 51   52  53  54  55  56  57  58  59  60  61  62  63  64  65  66  67  68  69  
70  71  72  73  74  seventy five    76  77  78  79  80  81  82  83  84  85  86  87  88  89  90 91   92  93  94  95  96  97  98  99  
100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 
124 one hundred and twenty  five 
```

这是我到目前为止的功能。目前，它只是提醒一堆随机数。如何获取它以便它不会提醒数字，而是将它们写在页面本身上？任何帮助将不胜感激。

```
<script>
        function randomNumber() {
            var num = Math.floor(Math.random() * 200);
            var english = {
            25 : "twenty five",
            75 : "seventy five",
            125 : "one hundred and twenty five"
        }

        for (var i = 0; i < 200; i++) {
            var num = Math.floor(Math.random() * 200);
            alert(num);

        }
        }

        document.getElementById('yourElement').onclick = randomNumber();
    </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T00:06:21.477

您以错误的方式设置了事件侦听器。

```
document.getElementById('yourElement').onclick = randomNumber(); 
```

当您使用“onclick = randomNumber()”时，您没有将函数 randomNumber 设置为 onclick。因为您在函数之后写了“（）”，所以您实际上是在调用该函数，而设置为 onclick 的东西实际上是 randomNumber 的返回值，在您的情况下是“未定义”。

这段代码应该做你想做的。

```
 <script type="text/javascript">

        window.onload = function() {
            var english = {
                25 : 'twenty five'
                // and so on
            }

            function randomNumber() {
                var r = Math.round( Math.random() * 200 )
                return english[r] || r;
            }

            function writeRandomNumber() {
                this.innerHTML += randomNumber();
            }

            document.getElementById('yourElement').onclick = writeRandomNumber;
        }

    </script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T23:41:18.610

使用 innerText、[innerHTML](https://developer.mozilla.org/en-US/docs/DOM/element.innerHTML)或[textContent](https://developer.mozilla.org/en-US/docs/DOM/Node.textContent)设置元素的文本：

```
document.getElementById("myElement").innerText += num; 
```

# javascript - javascript中的for循环转换时间

> ID：16005625
> 
> 赞同：0
> 
> 时间：2013-04-14T23:38:34.853
> 
> 标签：javascript

我有以下数组：

```
1366004070000,1,1366004406000,1 
```

第一个和第三个条目是一个 unix 时间戳。我需要将其转换为本地日期时间。我将如何创建一个函数来执行此操作：

这是我到目前为止的非功能结构：

```
function toLocalTime(data) {
    for (unixTime, successful in data) {
        var d = new Date();
        var tzOffset = d.getTimezoneOffset();
        var new_time = unixTime - tzOffset
    ??
   };
   return newArray
} 
```

我想生成一个与上述结构相同的数组，但时间戳转换为本地时间，例如：

```
1366004070444,1,1366004406444,1 
```

**更新**：以下答案中没有一个以我正在寻找的格式获取数据。我不是在寻找当地时间对象。我正在寻找一个给我“调整后的 unix 时间戳”的数组。换句话说，输出应该看起来与输入相同，除了从UTC到本地时间的轻微调整。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T00:18:36.440

您要求将数组时间转换为当地时间 - 所以这是正确答案（其余答案与今天比较）

[http://jsfiddle.net/vWKYW/](http://jsfiddle.net/vWKYW/)

```
var times = [1366004070000,1,1366004406000,1];
var local_times = [];
for(var i=0;i<times.length;i++){
     var time = times[i];
    if(time != 1){
        var d = new Date(time);
        var tz = d.getTimezoneOffset();        
        var tz_ms = tz*60*1000;
        time = d.getTime() - tz_ms;
    }

    local_times.push(time);
}

console.log(local_times); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T04:22:44.173

这是有效的：

```
for(var i=0; i<data.length; i++) {
 29         var d = new Date(parseInt(data[i][0]));
 30         var tz = d.getTimezoneOffset();
 31         var ms = tz * 60 * 1000;
 32         data[i][0] = d.getTime() - ms;
 33         //console.log(data[i][0]);
 34     } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T23:58:59.563

看起来你想要这个：

```
var arr = [1366004070000,1,1366004406000,1];
for (var i=0; i<arr.length; i+=2) {
    var unixTime = arr[i],
        successful = arr[i+1];

    var date = new Date(unixTime);
    console.log(date.toString());  // local: Mon Apr 15 2013 07:34:30 GMT+0200
    console.log(date.toUTCString()); // UTC: Mon, 15 Apr 2013 05:34:30 GMT
} 
```

由于[时间戳](http://en.wikipedia.org/wiki/Unix_time)始终从 UTC 开始计算，因此您无需进行任何转换。只需在您的[objects](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)上使用非 UTC 输出方法（如`getHour()`代替） 。`getUTCHour()`[`Date`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)

* * *

虽然我看不到你会用 JavaScript 中的“本地时区调整时间戳”做什么，但这将是创建它们的代码：

```
function toLocalTime(data) {
    var newArray = [];
    for (var i=0; i<data.length; i+=2) {
        var unixTime = data[i];
        var d = new Date(data[i]);
        var tzOffset = d.getTimezoneOffset() * 6e4;
        newArray[i] = unixTime - tzOffset;
        newArray[i+1] = data[i+1];
   }
   return newArray;
} 
```

[`getTimezoneOffset`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/getTimezoneOffset)确实返回*分钟*，而不是*毫秒*。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-14T23:59:42.540

如果我理解正确（我不认为）你需要的是：

```
function toLocalTime(data) {
    data[0]  = getLocalTime(data[0]);
    data[2]  = getLocalTime(data[2]);
    return data;
   };
}

function getLocalTime(unixTime){
   var d = new Date();
   var tzOffset = d.getTimezoneOffset()*60000; // As @Bergi suggest :) 
   return unixTime - tzOffset;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-15T00:04:38.683

Yoy 可能想改用常规的 for 循环：

```
var unixTimes = [1366004070000,1,1366004406000,1];

function toLocalTime(data) {
    var localTimes = [];
    for (var i = 0; i < data.length; i++) {
        var d = new Date();
        var tzOffset = d.getTimezoneOffset() * 60 * 1000; //To convert to ms
        var new_time = data[i] - tzOffset;
        localTimes.push(new_time);
   };
   return localTimes;
}

var newTimes = toLocalTime(unixTimes); 
```

# neo4j - 密码查询，包括“除外”之类的内容

> ID：16005626
> 
> 赞同：0
> 
> 时间：2013-04-14T23:38:39.300
> 
> 标签：neo4j, cypher

有谁知道我如何编写一个密码查询，例如“返回节点，除非有问题的人也跟随 Mr.X 或 Ms.Y”我一直在尝试多年......似乎无法管理。:(

我的意思不是“返回除 X 先生和 Y 女士之外的所有内容”，而是在上述查询适合的情况下返回。

如果 A 也关注其他人，则以下内容不起作用。

START a=node(1) MATCH (a)-[:follows]->(b) WHERE b.name!="Mr.X" and b.name!="Ms.Y" 返回 a

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T14:33:37.403

也许你应该尝试`<>`比较，

```
START a=node(1) MATCH (a)-[:follows]->(b) WHERE b.name<>"Mr.X" and b.name<>"Ms.Y" RETURN a 
```

# mysql - 未知元素编号的单一关系 M:N

> ID：16005631
> 
> 赞同：2
> 
> 时间：2013-04-14T23:39:26.543
> 
> 标签：mysql, database-design, relation

目前我有一篇文章，其中包含与其他元素的各种 M:N 关系，问题是这些元素可以并且将会长大，并且不希望在我的数据库中有那么多表。

![在此处输入图像描述](https://i.stack.imgur.com/T8O05.png)

这是为未知数量的元素建立单一关系 M: N 的正确方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T01:26:56.163

> 对于未知数量的元素，这是建立单一关系 M: N 的正确方法

为每个 M:N 关系设置单独的联结表并没有什么特别的错误。

话虽如此，您可以以更通用的方式处理这些关系，同时通过使用继承¹来减少表的数量：

![在此处输入图像描述](https://i.stack.imgur.com/kYXEY.png)

有关继承概念的更多信息，请在[ERwin 方法指南](http://tangra.si.umich.edu/~radev/654/resources/ERMGALL.PDF)中搜索“子类型关系” 。有关如何在关系数据库中实现继承的一些提示，请查看：

*   [如何创建多个一对一](https://stackoverflow.com/a/9178524/533120)
*   [解读 ER 图](https://stackoverflow.com/a/12037398/533120)

* * *

*¹阿卡。类别、子类化、子类型化、泛化层次...*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T00:07:12.937

如果所有元素都具有相同的属性您可以将它们全部保存在一个带有额外列（最好枚举）的表中以区分它们。

但是查看图像您提供的它们可能没有相同的属性，因此以某种方式强制它们位于一个或几个表中将是困难且低效的。

您可以创建的表的数量没有限制，我不知道为什么您应该避免为每个关系创建一个新表，因为它应该是。

# php - 如何让论坛中最近发布的主题最先出现？

> ID：16005632
> 
> 赞同：0
> 
> 时间：2013-04-14T23:39:51.953
> 
> 标签：php, html, date, time, forum

我正在从网上借来的论坛制作论坛。我希望 main_forum 页面首先显示最近发布的主题，然后是最近发布的第二个，依此类推。我的 main_forum.php 代码是这样的：

```
<?php
require_once 'includes/overall/header.php';
$sql="SELECT * FROM `forum_question` ORDER BY id DESC";
// OREDER BY id DESC is order result by descending
$result=mysql_query($sql);
?>
<h1>Forum</h1>
<table width=700 class="outer">
<tr>
<td width="53%" align="center" bgcolor="#E6E6E6"><strong>Topic</strong></td>
<td width="15%" align="center" bgcolor="#E6E6E6"><strong>Views</strong></td>
<td width="13%" align="center" bgcolor="#E6E6E6"><strong>Replies</strong></td>
<td width="13%" align="center" bgcolor="#E6E6E6"><strong>Date/Time</strong></td>
</tr>
<?php
// Start looping table row
if($result === FALSE) {
die(mysql_error()); // TODO: better error handling
}
while($rows=mysql_fetch_array($result)){
?>
<tr>
<td bgcolor="#FFFFFF"><a href="view_topic.php?id=<?php echo $rows['id']; ?>"><?php echo $rows['topic']; ?></a><BR></td>
<td align="center" bgcolor="#FFFFFF"><?php echo $rows['view']; ?></td>
<td align="center" bgcolor="#FFFFFF"><?php echo $rows['reply']; ?></td>
<td align="center" bgcolor="#FFFFFF"><?php echo $rows['datetime']; ?></td>
</tr>
<?php
// Exit looping and close connection 
}
mysql_close();
?>
<tr>
<td colspan="5" align="right" bgcolor="#E6E6E6"><a href="create_topic.php"><strong>Create New Topic</strong> </a></td>
</tr>
</table>
<?php
require_once 'includes/overall/footer.php';
ob_end_flush();
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T02:29:15.383

更改您的查询以按照您想要的顺序检索您的帖子。根据您的帖子进行猜测，我会说您的查询应该更像：

```
$sql="SELECT * FROM `forum_question` ORDER BY datetime DESC"; 
```

# regex - Apache RegEx 重定向无法正常工作

> ID：16005634
> 
> 赞同：2
> 
> 时间：2013-04-14T23:39:59.637
> 
> 标签：regex, apache, redirect, rewrite

我试图在我的 httpd.conf apache 文件夹中使用以下重定向代码，但是，每次我使用它并尝试连接到[http://www.worldofclucky.net/fOrum](http://www.worldofclucky.net/fOrum)时，它都会弹出一个错误页面，上面写着“此页面没有正确重定向。”

代码行如下：

`RedirectMatch ^/[fF][oO][rR][uU][mM]([sS]{0,1}) http://www.worldofclucky.net/forum/`

如果有人能想到任何有助于解决此问题的方法，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T17:05:29.220

看起来你的问题是正则表达式也匹配目标中的小写“论坛”，给你一个无限循环。消极的回顾应该解决这个问题：

```
RedirectMatch ^/[fF][oO][rR][uU][mM]([sS]{0,1})(?<!forum) http://www.worldofclucky.net/forum/ 
```

# xcode - Xcode Cocos2D 如何无延迟添加 50 个精灵

> ID：16005635
> 
> 赞同：-2
> 
> 时间：2013-04-14T23:40:07.887
> 
> 标签：xcode, cocos2d-iphone

我需要在屏幕上添加大约 50 个精灵然后重绘它们。当我尝试像这样添加它们时：

```
[self addChild:Img]; 
```

这会造成很多滞后。

我也尝试过创建一个 CCLayer，然后将所有图像添加到图层中，但我得到了相同数量的延迟。如何添加所有这些精灵并减少延迟？大多数游戏每页可能有超过 50 个精灵。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T03:41:33.130

If all or most of your sprites are the same, then you could use one **CCSpriteBatchNode** for all CCSprites sharing the same texture or image. This will save memory.

You would do something like the following,

1)define a CCSpriteBatchNode

2)add it as a subview.

3)define a frame from the batchNode

4)set it as displayFrame for the sprite

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T08:45:11.567

使用 CCSpriteSheet，如果您还没有使用精灵表，请将它们视为您将精灵放入其中的巨大图像。它们带有一个文件，该文件指定了每个精灵的边界，因此您可以在代码中需要它们时将它们拉出来。

之所以使用这些是一个好主意，是因为 Cocos2D 已针对它们进行了优化。如果您在精灵表中正确使用精灵，而不是为每个精灵制作一个 OpenGL ES 绘制调用，它只会为每个精灵表制作一个。

简而言之——它更快，尤其是当你有很多精灵时！

# gwt - Alternative for GWT TabPanel .Not working in Development Mode

> ID：16005639
> 
> 赞同：0
> 
> 时间：2013-04-14T23:41:06.380
> 
> 标签：gwt, tabpanel

Since Tabpanel doesn't work in Development Mode, it only works in Standard mode. So it means we can't debug our code if we use TabPanel.

so How to make TabPanel from Horizontal or Vertical layout by ourself?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T04:47:17.613

**You need not to make any new TabPanel on your own.**

If you see the [docs of TabPanel](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/ui/TabPanel.html):

> this widget will only work in quirks mode. If your application is in Standards Mode, use [TabLayoutPanel](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/ui/TabLayoutPanel.html) instead.

So.Please have a look on [TabLayoutPanl](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/ui/TabLayoutPanel.html).

# c - 尝试从文件中读取数据时出现运行时错误

> ID：16005641
> 
> 赞同：0
> 
> 时间：2013-04-14T23:41:16.607
> 
> 标签：c, file, structure, runtime-error

我有一个关于逻辑错误的问题，错误是

“运行时检查失败 #2 - 变量 'list' 周围的堆栈已损坏。”

in.txt文件一共有60行

这是我的代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

#define FILE_NAME  20
#define LIST_SIZE 50
//void getData(RECORD name[], RECORD score)

typedef struct 
{
    char *name;
    int  score;
}RECORD;

int main (void)
{
    // Declarations
       FILE *fp;
       char fileName[FILE_NAME];
       RECORD list[LIST_SIZE];
       char buffer[100];
       int count = 0;
       int i;
    // Statements
       printf("Enter the file name: ");
       gets(fileName);

       fp = fopen(fileName, "r");

       if(fp == NULL)
      printf("Error cannot open the file!\n");
       while(fgets(buffer, 100, fp) != NULL)
         {  
         list[count].name = (char*) calloc(strlen(buffer), sizeof(RECORD*));
         if(count > 50)
         {

         }

         if( count < 50)
         {
            sscanf(buffer,"%[^,], %d", list[count].name, &list[count].score);
            for( i =1; i < (50 - count); i++)
            {   
                list[count + i].name = 0;
                list[count + i].score = 0;
            }
         }
         count++;

     }

       printf("Read in %d data records\n", count);
       fclose(fp);
       return 0;
} 
```

在这个程序中，我试图将数据从文件读取到结构数组，因此如果数据数量小于 50，则没有数据的结构将归零，如果数据数量超过 50程序只会读取前 50 个结构。

如何修复运行时错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T23:49:55.277

如果计数 = 50 怎么办？

尝试在您的 while 循环中使用以下内容，将 if 块放在开头或结尾；

```
if(count >= 50) //count should be checked for >= 50 before being used.
{

}
list[count].name = (char*) calloc(strlen(buffer), sizeof(RECORD*)); //list size is 50 so list[50] won't work. out of bound. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T23:58:38.577

```
Perhaps...

while(fgets(buffer, 100, fp) != NULL)
{
  if( count >= 50)
  {
     break;
  }
  if( count < 50)
  {
     list[count].name = (char*) malloc(strlen(buffer)*sizeof(char));
     sscanf(buffer,"%[^,], %d", list[count].name, &list[count].score);
     count++;
  }
}
for( i =0; i < (50 - count); i++)
{   
    list[count + i].name = 0;
    list[count + i].score = 0;
} 
```

# ruby - 执行 XPath 搜索时 Nokogiri 不返回任何内容

> ID：16005644
> 
> 赞同：3
> 
> 时间：2013-04-14T23:41:33.317
> 
> 标签：ruby, web-scraping, nokogiri

我需要从网页解析表格。我在使用 Ruby 和 Nokogiri 之前已经这样做了，但是这次我的方法不起作用。这就是我正在做的事情：

```
response = RestClient.get "http://www.webpage.com?page=0"
doc = Nokogiri::HTML(response.body,nil,'utf-8')
doc.remove_namespaces!
table = doc.xpath(".//*[@id='contsinderecha']/form/table/tbody/tr[4]/td/table/tbody/tr[5]/td/table") 
```

`table`只是一个空数组。响应很好，如果我这样做，`put response.body`我会得到网页的正文。

另外，为了获得我正在使用 firebug 的 XPath。

知道可能会发生什么吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-15T00:05:07.983

您的问题的解决方案是删除`tbody`xPath 中的部分，如“[为什么这个 Nokogiri XPath 有一个空返回？](https://stackoverflow.com/questions/9156650/why-does-this-nokogiri-xpath-have-a-null-return?rq=1) ”中所建议的那样。

Firefox 为您生成`tbody`元素，这就是它们出现在 Firefox 的 xPath 中的原因，但它们不是原始页面源的一部分。

尝试以下操作：

```
response = RestClient.get "http://www.buenosaires.gob.ar/areas/seguridad_justicia/seguridad_urbana/estaciones_servicio/buscador.php?&pag=0"
doc = Nokogiri::HTML(response.body,nil,'utf-8')
doc.remove_namespaces!
table = doc.xpath(".//*[@id='contsinderecha']/form/table/tr[4]/td/table/tr[5]/td/table") 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-15T01:50:50.603

进入该表的正确方法是：

```
doc.at('table.contenido') 
```

# map - golang：按排序键顺序遍历任意映射

> ID：16005645
> 
> 赞同：4
> 
> 时间：2013-04-14T23:41:44.877
> 
> 标签：map, go

**简而言之：无论地图的类型如何，如何按排序键顺序遍历地图？**

我发现了一些相关的问题，[最接近的](https://stackoverflow.com/q/13291958/744071)`reflect`问题表明不依赖模块就无法完成。这种理解正确吗？

考虑这个 Go 代码，它按照键的排序顺序遍历两个不同类型的映射：

```
mapOne := map[int]string {
    1: "a",
    2: "b",
    3: "c",
}
keysOne := make([]int, 0, len(mapOne))
for key, _ := range mapOne {
    keysOne = append(keysOne, key)
}
sort.Ints(keysOne)
for _, key := range keysOne {
    value := mapOne[key]
    fmt.Println(key, value)
}

mapTwo := map[string]int {
    "a": 1,
    "b": 2,
    "c": 3,
}
keysTwo := make([]string, 0, len(mapTwo))
for key, _ := range mapTwo {
    keysTwo = append(keysTwo, key)
}
sort.Strings(keysTwo)
for _, key := range keysTwo {
    value := mapTwo[key]
    fmt.Println(key, value)
} 
```

对于两种不同的地图类型，提取键然后对其进行排序的逻辑是重复的。**有什么办法可以排除这种逻辑并避免重复？**

我被困在试图编写一个接口来提供一种`SortedKeys`方法。特别是，的返回类型`SortedKeys`取决于地图的类型，我不知道如何在 Go 中表达它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T23:52:31.477

我认为无论谁告诉您您需要`reflect`是正确的；不过，这可能有点矫枉过正。我认为这里的重复是可以接受的。

（或者，您可以实现自己的映射，该映射使用某种键接口，但您最终仍需要为每个底层键类型创建满足接口的类型）

# php - If 语句的正确 PHP 函数

> ID：16005649
> 
> 赞同：0
> 
> 时间：2013-04-14T23:42:05.363
> 
> 标签：php, magento

我有一个 if 语句，它位于添加 | 的每个循环的末尾。生成的无序列表末尾的字符。

我的目标是添加 | 在“不是最后两个”之后。

```
<?php if (! $_link->getIsLast()):?>|<?php endif;?> 
```

我希望我可以在 getIsLast 或 getIsFirst 函数中输入一个值，如下所示：

```
<?php if (! $_link->getIsLast(2)):?>|<?php endif;?> 
```

我希望上面的声明会添加 | 除了最后两个之外，每个生成的列表项的字符。但是，它似乎不起作用。

有谁知道做这样的事情的正确语法？

for each 循环如下：

```
<ul class="links pull-right"<?php if($this->getName()): ?> id="<?php echo $this->getName() ?>"<?php endif;?>>
    <?php foreach($_links as $_link): ?>
        <?php if ($_link instanceof Mage_Core_Block_Abstract):?>
            <?php echo $_link->toHtml() ?>
        <?php else: ?>
            <li<?php if($_link->getIsFirst()||$_link->getIsLast()): ?> class="<?php if($_link->getIsFirst()): ?>first<?php endif; ?><?php if($_link->getIsLast()): ?> last<?php endif; ?>"<?php endif; ?> <?php echo $_link->getLiParams() ?>><?php echo $_link->getBeforeText() ?><a href="<?php echo $_link->getUrl() ?>" title="<?php echo $_link->getTitle() ?>" <?php echo $_link->getAParams() ?>><?php echo $_link->getLabel() ?></a><?php echo $_link->getAfterText() ?></li>
        <?php endif;?>
        <?php if (! $_link->getIsLast()):?>|<?php endif;?>
    <?php endforeach; ?>
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T23:46:47.167

尝试这个。

```
<ul class="links pull-right"<?php if($this->getName()): ?> id="<?php echo $this->getName() ?>"<?php endif;?>>
    <?php 
        $numberOfRows = count($_links);
        $currentIndex=0;
        foreach($_links as $_link): 
    ?>
        <?php if ($_link instanceof Mage_Core_Block_Abstract):?>
            <?php echo $_link->toHtml() ?>
        <?php else: ?>
            <li<?php if($_link->getIsFirst()||$_link->getIsLast()): ?> class="<?php if($_link->getIsFirst()): ?>first<?php endif; ?><?php if($_link->getIsLast()): ?> last<?php endif; ?>"<?php endif; ?> <?php echo $_link->getLiParams() ?>><?php echo $_link->getBeforeText() ?><a href="<?php echo $_link->getUrl() ?>" title="<?php echo $_link->getTitle() ?>" <?php echo $_link->getAParams() ?>><?php echo $_link->getLabel() ?></a><?php echo $_link->getAfterText() ?></li>
        <?php endif;?>
        <?php if ($currentIndex<$numberOfRows-2):?>|<?php endif;?>
    <?php 
    $currentIndex++;
    endforeach; ?>
</ul> 
```

|

# python - 在 Python 中水平翻转图像时出错

> ID：16005650
> 
> 赞同：0
> 
> 时间：2013-04-14T23:42:37.367
> 
> 标签：python, image-processing

我需要水平翻转图片，*而不使用反向功能*，我以为我做对了，但我得到的错误是

```
Traceback (most recent call last):
  File "<pyshell#9>", line 1, in <module>
    Flip("bm.gif","bm.ppm")
  File "C:\Users\....ImageProcessingSKLT.py", line 133, in Flip
    pic1 = graphics.getPixel(x,y)
AttributeError: 'module' object has no attribute 'getPixel' 
```

我的代码是

```
def Flip(image1, image2):
    img = graphics.Image(graphics.Point(0, 0), image1)
    X = img.getWidth()
    Y = img.getHeight()
    for y in range(Y//2):
        for x in range(X):
            pic1 = graphics.getPixel(x,y)
            pic2 = graphics.setPixel(X-x,y)
            temp = graphics.getColor(pic1)
            graphics.setColor(pic1,getColor(pic2))
            graphics.setColor(pic2,temp)
            image2 = pic2
    return image2 
```

错误是什么意思？我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T23:47:38.063

解释器抱怨它在模块中找不到`getPixel`函数`graphics`；是`img.getPixel`，不是`graphics.getPixel`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T23:47:40.890

```
 pic1 = graphics.getPixel(x,y)
        pic2 = graphics.setPixel(X-x,y) 
```

大概应该是：

```
 pic1 = img.getPixel(x,y)
        pic2 = img.setPixel(X-x,y) 
```

# c++ - future 和 shared_future 有什么区别？

> ID：16005655
> 
> 赞同：33
> 
> 时间：2013-04-14T23:43:49.733
> 
> 标签：c++, multithreading, c++11, mutex

`future`和 和有什么不一样`shared_future`？
在什么情况下我们必须使用`shared_future`而不是`future`？

我试图找到很好的文档来对比 C++11 的这两个特性，但我在网上找不到答案（至少容易/可读）。

这是我目前对差异的理解

1.  `future`对象只能被查询一次`get()`。
2.  `shared_future`可以查询任意次数。

用例：如果多个线程依赖于异步任务的结果，那么我们必须使用`shared_future`. 如果需要在同一个线程中多次查询未来对象，那么我们必须使用它`shared_future`。

欢迎任何更多信息、陷阱或一般指南...

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-04-15T00:02:28.810

这两种未来类型的动机可以追溯到移动语义、只移动类型和新的 C++11 特性，即从普通函数返回只移动类型。

在 C++98/03 中，如果你想从工厂函数返回一个类型：

```
A
make_A()
{
    A a;
    // ...
    return a;
} 
```

然后`A`不得不`CopyConstructible`。然后，在 C++11 中全新，`A`即使不是，我们也可以返回`CopyConstructible`，它只需要是`MoveConstructible`。

但是如果你尝试同时执行会发生什么`make_A`，比如使用期货。如果只能并行化`make_A`if `A`is ，那不是犯罪`CopyConstructible`吗？！您将不得不放弃一种优化而追求另一种优化！

所以`future<R>`只`R`需要`MoveConstructible`. 但是你只能得到一次，因为你正在从存储的结果中移动。

但是为多个线程获得相同的结果也是一个真正的需要。所以`shared_future<R>`允许这样做，但需要`R`是`CopyConstructible`.

# sql - 使用 PostgreSQL 提取字符串的 END 部分以外的所有内容

> ID：16005660
> 
> 赞同：0
> 
> 时间：2013-04-14T23:45:00.753
> 
> 标签：sql, postgresql

我在 Postgres 数据库表中有记录，其中特定列中有无关数据。我想从该列中选择除那段文本之外的所有内容。那段文本位于列中数据的末尾。如果该文本出现在 product_name 之前或中间，则不应将其删除。

如何编写选择语句？下面是数据，我想从结果集中删除单词“test2”。

```
id|product_name    |owner
---------------------
12|sissors test2   |23
13|Sample test2    |43
14|test2scoop test2   |43 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T23:58:04.440

像下面这样的东西应该工作：

```
SELECT id, replace(product_name, 'test3', '') AS product_name, owner FROM ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T23:59:52.077

PostgreSQL 手册中关于[字符串函数](http://www.postgresql.org/docs/current/static/functions-string.html)的部分对你有什么建议？

> `regexp_replace(string text, pattern text, replacement text [, flags text])`
> 
> 替换匹配 POSIX 正则表达式的子字符串。有关详细信息，请参阅第 9.7.3 节。
> 
> `regexp_replace('Thomas', '.[mN]a.', 'M')`

因此：

```
SELECT id, regex_replace(product_name, 'test3', '') AS product_name, owner
  FROM data -- since the table is anonymous in the question 
```

这就是复杂的——还有`replace`纯文本映射（通过手册页上的函数列表稍远一点），这足以完成手头的任务。

```
SELECT id, replace(product_name, 'test3', '') AS product_name, owner
  FROM data -- since the table is anonymous in the question 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-14T23:59:54.277

我只是在猜测你想要什么，但也许这会做：

```
select id
     , replace(product_name,' test2,'') as product_name
     , owner
from my_table 
```

我也猜你的意思是“test2”而不是“test3”。

另请注意，我在搜索字符串中显示了一个前导空白。这是基于提供的示例数据。

# javascript - The Mark of the Web 将始终确保 IE 运行本地 HTML 文件吗

> ID：16005663
> 
> 赞同：0
> 
> 时间：2013-04-14T23:45:21.770
> 
> 标签：javascript, html, internet-explorer, mark-of-the-web

我们正在分发一张 CD，它在 AutoRun 上显示我们基于 HTML 的菜单。菜单（本地 HTML 文件）在用户浏览器中运行，并传达有关 CD 上内容的信息（自定义包，因此不是安装程序）。我们的菜单严重依赖 JQuery，所以不能运行 Javascript 是不好的。我们选择用 HTML、CSS、Javascript 制作菜单，以实现跨平台兼容。

因为我们正在运行一个使用 Javascript 的本地 HTML 文件，所以我们会遇到 IE 的`restriction from running scripts or ActiveX Controls`.

我们的解决方案（[根据我们之前的问题](https://stackoverflow.com/questions/15939105/run-local-javascript-dependant-html-file-in-internet-explorer)）是使用[The Mark of the Web](http://msdn.microsoft.com/en-us/library/ms537628%28v=vs.85%29.aspx)。但我们有一个问题：

**这是克服 IE 限制的灵丹妙药吗？**

The Mark of the Web 能否在 IE V8 及更高版本上运行？我可以肯定地说这将克服 IE 的限制还是我需要考虑其他因素？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T09:17:54.763

这确实看起来是“银弹”。包括MOTW的原因之一，其实第一个原因是：

*   您正在编写将从 CD、DVD 或其他本地存储设备查看的页面。（请注意，用户可以但不一定会从此安全功能中免除本地内容。）

* * *

以下代码使文件在 Internet 区域中运行，这将消除 IE 设置的限制。请注意，某些用户设置可能会阻止此代码工作，或者用户可以手动绕过此功能并强制窗口以正常方式运行，这将阻止您的 JS 工作。

```
<!-- saved from url=(0014)about:internet --> 
```

没有关于它应该从哪里放置的细节`The comment must appear in the first 2,048 bytes of the HTML document, within the HTML markup.`

至于您关于它的兼容性的问题，该功能已被引入`Microsoft Internet Explorer 4.0`并与从那里开始的每个版本兼容。

# python - Python Scrapy 分段错误

> ID：16005667
> 
> 赞同：0
> 
> 时间：2013-04-14T23:45:51.613
> 
> 标签：python, django, segmentation-fault, scrapy, nltk

我有一个使用 nltk 的 django 项目。我在尝试时遇到分段错误

```
import nltk 
```

我找到了它发生的确切位置，它是 collocations.py:38。我还发现我只在 django unit-tests 和 django manage.py shell（实际上是 shell_plus，但我不认为它会改变某些东西）中得到这个错误，但在自定义管理命令中没有（这可能意味着，我赢了'在生产中不会出现这个错误）

我使用 django django 1.4.5、nltk 2.0.4、python 2.7.3。

谢谢！

**更新：**将 python 更新到 2.7.4 尚未生效

**更新：** numpy 到 1.7.1 和 scipy 到 0.12.0 的更新没有影响

**更新：**我找到了导致段错误的语句（我想，就像我将它从模块范围移动到函数范围一样，这导致段错误不会发生）

```
from scrapy.crawler import CrawlerProcess 
```

它是来自爬虫`scrapy`框架的类，我在自定义模块中使用它来将scrapy spider作为python脚本执行。似乎段错误不是NLTK错误，而是scrapy。可能这个类以某种方式重写了 nltk 的一些数据，这就是它出现段错误的原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-02-05T23:26:03.857

我对 CrawlerProcess 也有同样的问题。Scrapy 未能安装 libxml2。尝试在命令提示符中输入：

```
easy_install lxml
pip install scrapy --upgrade 
```

在此之后我的程序正确执行。

# javascript - 将滚动条添加到附加框

> ID：16005670
> 
> 赞同：0
> 
> 时间：2013-04-14T23:46:38.290
> 
> 标签：javascript, html, css

我的网页上有一个框，您可以将图像拖到该框上，它将显示存储在我的数据库中的图像的详细信息。当图像加载到其中时，该框会附加，但我想知道如何将滚动条添加到我的框中，而不是一直附加到屏幕下方。这是我的 JS 代码：

```
 $("#drop").append("<span><img id='t"+id+"' src='images/"+pick[id].src+"' title='"+    
           pick[id].desc+"' alt='"+
           pick[id].alt+"' class='thumb'  />&nbsp;"+pick[id].desc+", Price £"+
           pick[id].price+"</span><br />"); 
```

和我的 CSS：

```
 #drop{   
   float:right;
   margin-left:2%;
   width:30%;
   background-color:9CF;    
   } 
```

谢谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T23:52:13.883

不完全确定你在问什么，但也许这会有所帮助。给`#drop`元素一个固定的高度并将`overflow`属性添加到它的样式中。

```
#drop{   
   float:right;
   margin-left:2%;
   width:30%;
   height: 300px; // Or whatever satisfies you.
   overflow-y: auto;
   background-color:9CF;    
} 
```

# testing - 同时运行多个 Selenium 测试

> ID：16005672
> 
> 赞同：22
> 
> 时间：2013-04-14T23:47:05.073
> 
> 标签：testing, selenium, selenium-chromedriver

我想同时运行多个 Selenium 测试（在 Jenkins 服务器上）。

它目前一次只运行一个测试，因为 ChromeDriver 似乎通过一个特殊的端口进行通信。所以不知何故，我想我必须通过 Selenium 将某种端口设置传递给 ChromeDriver 以启动多个测试。

不幸的是，Selenium 网站对于该主题是空的：http: [//docs.seleniumhq.org/docs/04_webdriver_advanced.jsp#parallelizing-your-test-runs](http://docs.seleniumhq.org/docs/04_webdriver_advanced.jsp#parallelizing-your-test-runs)

从我的角度来看，如果测试在本地或在 Jenkins 上运行没有区别，问题是一样的。我们需要以某种方式配置 ChromeDriver。问题是如何。

任何人都有一些想法或指示在哪里查看以及完成此操作涉及哪些文件？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-05-05T10:09:45.850

您可以很容易地在本地运行 chromedriver 的多个实例，只需实例化多个驱动程序对象，chromedriver 将保持配置文件分开并找到一个单独运行的端口。

这是一个可以使用 TestNG 和 Maven 运行多个测试的示例的链接：

[https://github.com/Ardesco/Selenium-Maven-Template](https://github.com/Ardesco/Selenium-Maven-Template)

只需克隆上述项目并在命令行中运行以下命令：

```
mvn verify -Pselenium-tests -Dbrowser=chrome -Dthreads=2 
```

它利用了 TestNG 管理线程池的能力，如果指定，它将打开多个实例。您可以使用 jUnit 做同样的事情，但您需要编写一个自定义测试运行程序来将测试触发到各个线程中。

如果您决定使用 gradle，它可以使用 TestNG 和 jUnit 为您管理线程池，并且很多人更喜欢它而不是 maven。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-06-17T17:30:18.017

这是一个老问题，但对于仍在阅读的任何人来说，很有可能在**不**使用 Grid 的情况下并行运行多个 Selenium WebDriver 实例。我已经使用 Chrome、FireFox 和 PhantomJs（最多 5 个）成功地对此进行了测试。每个 WebDriver 实例都使用一个隔离的上下文，因此会话冲突应该不是问题。不过，请注意服务器端冲突，具体取决于您网站的要求！

对于 NUnit 用户，NUnit 3.2.1 现在有一个“TestContext.Current.WorkerId”属性，允许您为每个 NUnit 工作人员隔离一个 WebDriver 实例。

*   在同一台机器上运行多个浏览器通常会影响性能，因此请注意不要使用过多的浏览器实例，否则实际上可能会增加测试时间！

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-15T00:36:33.860

您正在寻找的是[Selenium Grid 2](https://github.com/SeleniumHQ/selenium/wiki/Grid2)。

网格允许您：

*   通过在多台机器上分布测试来扩展（并行执行）
*   从一个中心点管理多个环境，从而可以轻松地针对各种浏览器/操作系统组合运行测试。
*   例如，允许您实施自定义挂钩以利用虚拟基础架构，从而最大限度地减少网格的维护时间。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-15T08:35:30.953

我同意将网格与 Maven 并行化类结合使用，您可以在一台 PC 上运行多个实例。当您使用 Ant 进行构建时，Jenkins 是可能的，然后您可以指定哪些测试可以并行运行。不过，它很容易设置；）

# c++ - Heroku/AppFog 上的 Node.js TCP 服务器

> ID：16005673
> 
> 赞同：0
> 
> 时间：2013-04-14T23:47:35.477
> 
> 标签：c++, c, node.js, heroku, appfog

这是我在 Heroku 和 AppFog 上托管的 node.js TCP 服务器的代码。我的客户端是用 C 语言编写的，它只是向服务器发送一条消息并获得响应。当我在本地托管服务器时，它们工作正常。但是当我尝试连接到在线服务器时，客户端失败（“连接错误：操作超时”）。知道发生了什么吗？

服务器（node.js）：

```
var net = require('net');

var server = net.createServer(function (socket) {
    socket.on("data", function(data){
    socket.write(data.toString());
  });
});

var port = process.env.VCAP_APP_PORT || 8081;
console.log(port);
server.listen(port); 
```

客户端（C，来自[http://www.linuxhowtos.org/C_C++/socket.htm](http://www.linuxhowtos.org/C_C++/socket.htm)）：

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <string.h>
#include <sys/types.h>
#include <sys/socket.h>
#include <netinet/in.h>
#include <netdb.h> 

void error(const char *msg)
{
    perror(msg);
    exit(0);
}

int main(int argc, char *argv[])
{
    int sockfd, portno, n;
    struct sockaddr_in serv_addr;
    struct hostent *server;

    char buffer[256];
    if (argc < 3) {
       fprintf(stderr,"usage %s hostname port\n", argv[0]);
       exit(0);
    }
    portno = atoi(argv[2]);
    sockfd = socket(AF_INET, SOCK_STREAM, 0);
    if (sockfd < 0) 
        error("ERROR opening socket");
    server = gethostbyname(argv[1]);
    if (server == NULL) {
        fprintf(stderr,"ERROR, no such host\n");
        exit(0);
    }
    bzero((char *) &serv_addr, sizeof(serv_addr));
    serv_addr.sin_family = AF_INET;
    bcopy((char *)server->h_addr, 
         (char *)&serv_addr.sin_addr.s_addr,
         server->h_length);
    serv_addr.sin_port = htons(portno);
    if (connect(sockfd,(struct sockaddr *) &serv_addr,sizeof(serv_addr)) < 0) 
        error("ERROR connecting");
    while (1){
    printf("Please enter the message: ");
    bzero(buffer,256);
    fgets(buffer,255,stdin);
    n = write(sockfd,buffer,strlen(buffer));
    if (n < 0) 
         error("ERROR writing to socket");
    bzero(buffer,256);
    n = read(sockfd,buffer,255);
    if (n < 0) 
         error("ERROR reading from socket");
    printf("%s\n",buffer);
    }
    close(sockfd);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T14:40:13.803

无论设置什么，客户端都必须始终连接到端口**80**`process.env.VCAP_APP_PORT`。AppFog 代​​理从端口 80 到您的应用程序运行的端口的请求。

# python - Python-如何更改 CSV 文件中一行的一部分？

> ID：16005678
> 
> 赞同：0
> 
> 时间：2013-04-14T23:47:48.120
> 
> 标签：python, csv

我有一个 CSV 文件，其中包含一些单词，后跟一个数字，需要一种附加数字的方法；要么给它加 1，要么把它设置回 1。比如说我有这些词：

```
variant,1
sixty,2
game,3
library,1 
```

如果用户输入数字 60，我如何使用它在数字上加一，我如何将其重置回 1？

我一直在用 Google+Stackoverflow 寻找答案，但我希望我找不到答案更多是因为我缺乏经验。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T00:12:44.740

在不知道何时要将数字切换为 1 以及何时要加 1 的情况下，我无法给出完整的答案，但我可以让你走上正轨。首先，您要导入 csv 文件，以便对其进行更改。csv 模块在这方面非常有帮助。在这里阅读：http: [//docs.python.org/2/library/csv.html](http://docs.python.org/2/library/csv.html)

您可能希望将其读入字典结构，因为这会将每个单词链接到它对应的数字。像这样的东西[从 csv 文件列中制作字典](https://stackoverflow.com/questions/7353743/make-dictionary-from-csv-file-columns?rq=1)

然后，您将需要使用 raw_input（如果您使用的是 Python 3.0，则使用 input）来获取您要查找的单词并将其用作查找和更改要更改的数字的键。[http://anh.cs.luc.edu/python/hands-on/handsonHtml/handson.html#x1-490001.12](http://anh.cs.luc.edu/python/hands-on/handsonHtml/handson.html#x1-490001.12) 或[http://www.sthurlow.com/python/lesson06/](http://www.sthurlow.com/python/lesson06/) 将向您展示如何获得一份字典的另一部分以及如何将信息保存回字典。

对不起，这不是一个直接的答案。也许其他人会写一个，但它应该让你开始，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T02:18:03.440

这是使用文件输入的快速组合。由于我不知道您为什么会减少或重置您的值的条件，我将其添加为您可以随意传递的关键字 arg。如

```
updateFileName(filename, "sixty", reset=True)
updateFileName(filename, "sixty", decrease=True)
updateFileName(filename, "sixty") 
```

每个结果都应该是不言自明的。祝你好运！我将它包装在一个 Try 中，因为我不知道你的结构是怎样的，这将导致它最终以任何方式失败。如果您有空格，则需要 .strip() 键和值。

```
import fileinput
def updateFileName(filename, input_value, decrease=False, reset=False):
    try:
        for line in fileinput.input(filename, inplace=True):
            key, value = line.split(",")
            if key == input_value:
                if decrease:
                    sys.stdout.write("%s,%s"(key, int(value) - 1)
                elif reset:
                    sys.stdout.write("%s,%s"(key, 1)
                else:
                    sys.stdout.write("%s,%s"(key, int(value) + 1)
                continue
            sys.stdout.write(line)

    finally:
        fileinput.close() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T00:48:57.067

[这很可能不是最好的方法，但您可以在loadtxt()](http://docs.scipy.org/doc/numpy/reference/generated/numpy.loadtxt.html)的帮助下使用 numpy 将 csv 文件加载到数组对象中。以下代码将为您提供一个二维数组，第一列中包含名称，第二列中包含您的数字。

```
import numpy as np    
a = np.loadtxt('YourFile',delimiter=',') 
```

以您想要的方式对数字执行更改，并使用 numpy [savetxt()](http://docs.scipy.org/doc/numpy/reference/generated/numpy.savetxt.html?highlight=savetxt#numpy.savetxt)保存文件。如果你的文件非常大，这个解决方案会很痛苦，因为加载一个巨大的数组会占用大量内存。因此，将其视为一种解决方法。字典解决方案实际上更好（我认为）。

# python - 用 C 创建的 GDBM 数据库可以用 Python 打开吗？

> ID：16005686
> 
> 赞同：2
> 
> 时间：2013-04-14T23:48:46.153
> 
> 标签：python, c, macos, magic-numbers, gdbm

我有一个 Python 程序，我试图在其中使用[这个押韵字典](http://rhyme.sourceforge.net/)来查找押韵。

字典库设置的一部分由创建三个 gdbm`.db`文件的 C 程序工作。执行此操作的代码可[在此处](http://rhyme.sourceforge.net/)公开获得（来自“获取源代码”部分），C gdbm 构建器的关键部分`compile.c`如下所示：

```
#include <gdbm.h>

...<snip>...

int main(int argc, char *argv[]) {
  FILE *input;
  GDBM_FILE output;

...<snip>...

output = gdbm_open(argv[2], 0, GDBM_NEWDB, 0644, 0);

...<snip>...

gdbm_sync(output);

...<snip>... 
```

`words.db`已创建，并且可以从捆绑的命令行界面成功访问。

根据[图书馆的示例页面](http://rhyme.sourceforge.net/how.html)，我应该可以使用 python gdbm 模块来访问数据库。

但是，我不能。当我运行以下命令时：

```
import gdbm
words = gdbm.open('/usr/share/rhyme/words.db') 
```

我收到以下错误：

```
 words = gdbm.open('/usr/share/rhyme/words.db')
gdbm.error: Bad magic number 
```

是否存在文件不兼容问题？用 C 语言创建的一些 gdbm 文件不能用 Python 打开吗？

（这是 OSX 10.6.8 上的 Python 2.7。Python 的 gdbm 是通过 MacPorts 安装的）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T18:04:42.260

引用 Python 的创造者（都跪下重复*我们不配！* x3 :-)

> 简单——gdbm 对字节顺序很敏感。唉，除了将其转换为更便携的格式以进行传输或修补 gdbm 源之外，我不知道该怎么做：-(
> 
> ——Guido van Rossum（主页：[http](http://www.python.org/~guido/) ://www.python.org/~guido/ ）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T20:53:02.447

您是如何创建 words.db 文件的？看起来 words.db 已损坏或格式不受您在 Mac OS X 上的 gdbm 库的特定版本支持。

# oracle - 在 Oracle 中获取具有最大值的行的时间复杂度

> ID：16005687
> 
> 赞同：0
> 
> 时间：2013-04-14T23:48:54.827
> 
> 标签：oracle, optimization, indexing

我想获取具有最小值为 myDate 列的行。为此，我使用以下查询：

```
select * from (select * from table where processed = 'N'
order by myDate) 
where rownum = 1; 
```

是否可以创建一个索引，使该查询在 Oracle 中具有 O(1) 时间复杂度：只需从具有最小日期的未处理行中选择第一行（类似于 btree 索引分为两部分作为`processed`列可能只有值“Y”或“N”）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T23:55:56.060

是的，使用 (myDate, processes) 上的索引，您将能够直接检索一行。不是 O(1)（btree 不提供），但比全表扫描的 O(n) 好得多。

该索引中的列顺序很重要。您通常希望它首先按 myDate 排序，然后在该开关中按该标志（但见下文）。

另请注意，如果“第一个”（按 myDate 排序）数千个条目都具有`processed=Y`索引扫描，则仍然需要（一点）时间来跳过所有这些（在索引中，而不是进入表中）。*如果这适用于所有*条目，最坏的情况仍然是 O(n) （然后它将是全索引扫描）。

如果这是一个问题，您可以将索引列顺序切换为（已处理，myDate）。然后，您将有效地拥有两个 B 树索引，一个用于 Y，一个用于 N。

# prolog - 在Prolog中交换列表的连续项目

> ID：16005690
> 
> 赞同：3
> 
> 时间：2013-04-14T23:50:01.363
> 
> 标签：prolog, logic-programming

我正在尝试编写可以交换列表的两个元素的 Prolog 代码，但前提是它们彼此**连续**。那是，

```
conseq_swap(d, e, [a, g, d, e, f], X). 
```

应该给：

```
X = [a, g, e, d, f]. 
```

（d 和 e 是连续的。）

然而，

```
conseq_swap(a, e, [a, g, d, e, f], X). 
```

应该总是失败（a 和 e 不是连续的。）

**我可以假设一个项目只出现在列表中一次。**

我有以下代码，实际上工作正常：

```
swap_conseq(X, Y, MainList, SwappedList) :-
   indexOf(MainList, X, Xpos),
   indexOf(MainList, Y, Ypos),
   Diff is Ypos - Xpos,
   Diff is 1,
   Xpos < Ypos,
   swap_ordered(X, Y, Xpos, Ypos, MainList, SwappedList).

swap_conseq(X, Y, MainList, SwappedList) :-
   indexOf(MainList, X, Xpos),
   indexOf(MainList, Y, Ypos),
   Diff is Xpos - Ypos,
   Diff is 1,
   Ypos < Xpos,
   swap_ordered(Y, X, Ypos, Xpos, MainList, SwappedList).

swap_ordered(Min, Max, Minpos, Maxpos, MainList, SwappedList) :-
   compute_lists(MainList, Min, Minpos, Pre, _),
   compute_lists(MainList, Max, Maxpos, _, Post),
   append(Pre, [Max, Min], Temp),
   append(Temp, Post, SwappedList).

indexOf([Element|_], Element, 1):- !.
indexOf([_|Tail], Element, Index):-
   indexOf(Tail, Element, Index1),
   !,
   Index is Index1+1.

compute_lists(MainList, X, Xpos, A, B) :-
   L is Xpos - 1,
   append(A, [X | B], MainList),
   length(A, L). 
```

但是，仅通过查看代码，我就可以看出这是一种可怕的方法——重复、低效——只有像我这样的 Prolog 新手才能编写。

任何有关如何改进这一点的建议将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-04-24T10:12:14.660

这是一个*逻辑上纯粹*的实现`conseq_swap/4`：

```
conseq_swap(E1,E2,Xs,Ys) :-       % use aux predicate w/dif-argument-order
   list_item1_item2_swapped(Xs,E1,E2,Ys). 
```

相比于`conseq_swap/4`参数顺序 `list_item1_item2_swapped/4`改变，所以 [第一个参数索引](http://www.swi-prolog.org/pldoc/man?section=jitindex)是启用的。这可以帮助防止不必要的选择点。

```
list_item1_item2_swapped([],_,_,[]).  
list_item1_item2_swapped([X|Xs],E1,E2,Ys) :-
   list_prev_item1_item2_swapped(Xs,X,E1,E2,Ys). 
```

我们使用一种通常称为*“滞后”*的技术，将一个额外的参数引用到前一个列表元素。要查看此技术的另一种用法，请查看@mat 对有关在 Prolog 列表上实现谓词的其他[问题](https://stackoverflow.com/questions/3965054/prolog-find-minimum-in-a-list)[的回答。](https://stackoverflow.com/a/3966139/4609915)

实际关系定义为`list_prev_item1_item2_swapped/5`：

```
list_prev_item1_item2_swapped([X|Xs],X0,X0,X,[X,X0|Xs]). % stop swapping
list_prev_item1_item2_swapped([X|Xs],X0,E1,E2,[X0|Ys]) :-
   dif(X0-X,E1-E2),               % state logically pure "not-equal"
   list_prev_item1_item2_swapped(Xs,X,E1,E2,Ys). 
```

完毕！[现在让我们使用SWI-Prolog](http://www.swi-prolog.org/) 7.1.37运行一些查询：

```
?- conseq_swap(a,e,[a,g,d,e,f],X).
false.                            % fails, as OP said it should

?- conseq_swap(d,e,[a,g,d,e,f],X).
X = [a,g,e,d,f] ;                 % succeeds, as OP said it should
false.

?- conseq_swap(d,e,[A,G,D,E,F],X), A=a,G=g,D=d,E=e,F=f.
A = a, G = g, D = d, E = e, F = f, X = [a,g,e,d,f] ;   % succeeds
false.

?- conseq_swap(d,e,[a,g,d,e,d,e,f],X).
X = [a,g,e,d,d,e,f] ;             % succeeds; only the 1st (d,e) pair is swapped
false. 
```

* * *

### 编辑 2015-04-24

这是之前给出的代码的一个更直接的、稍微未优化的变体。

它*的*效率较低，但希望*人类更容易阅读*。与其他变体一样纯净。

```
conseq_swap(X0,X1,[X0,X1|Xs],[X1,X0|Xs]).
conseq_swap(E0,E1,[X0,X1|Xs],[X0|Ys]) :-
   dif(X0-X1,E0-E1),
   conseq_swap(E0,E1,[X1|Xs],Ys). 
```

*相同*的查询，*相同*的答案：

```
?- conseq_swap(a,e,[a,g,d,e,f],X).
false.

?- conseq_swap(d,e,[a,g,d,e,f],X).
X = [a,g,e,d,f] ;
false.

?- conseq_swap(d,e,[A,G,D,E,F],X), A=a,G=g,D=d,E=e,F=f.
A = a, G = g, D = d, E = e, F = f, X = [a,g,e,d,f] ;
false.

?- conseq_swap(d,e,[a,g,d,e,d,e,f],X).
X = [a,g,e,d,d,e,f] ;
false. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T02:30:24.140

[（请通过repeat](https://stackoverflow.com/a/29844776/)和[Ludwig](https://stackoverflow.com/a/29846746/)阅读答案。这些都是很好的答案）

## 修改为删除旧解决方案中的两个假设

```
conseq_swap(E1,E2,[E1,E2|R],[E2,E1|R]).
conseq_swap(E1,E2,[E2,E1|R],[E1,E2|R]).

conseq_swap(E1,E2,[A|RI],[A|RO]) :- conseq_swap(E1,E2,RI,RO). 
```

剪切 ( `(!)/0`) 被删除。

```
?- conseq_swap(a,e,[a,g,d,e,f],X).
false.

?- conseq_swap(d,e,[a,g,d,e,f],X).
X = [a, g, e, d, f] ;
false.

?- conseq_swap(d,e,[D,A,G,E,F],X), A=a,G=g,D=d,E=e,F=f.
false.

?- conseq_swap(d,e,[A,G,D,E,F],X), A=a,G=g,D=d,E=e,F=f.
A = a,
G = g,
D = d,
E = e,
F = f,
X = [a, g, e, d, f] ;
false. 
```

对于有许多可能的交换对的情况，它只输出一次交换的所有方式。*这个问题假设无论如何只能有一对。*

```
?- conseq_swap(d,e,[a,g,d,e,d,e,f],X).
X = [a, g, e, d, d, e, f] ;
X = [a, g, d, d, e, e, f] ;
X = [a, g, d, e, e, d, f] ;
false. 
```

## 修改以删除假设 2

如果您希望查询`conseq_swap(a, e, [a, g, d, e, f], X).`完全失败，请删除旧解决方案中的前两行，这样可以在不执行交换时将原始列表作为输出结束。

## 旧解决方案（与相关代码的输出相同）

这是使用以下假设编写的旧解决方案：

1.  输入不包含任何无界变量。
2.  当没有找到满足条件的对时，*按原样输出输入列表*，类似于问题中的代码。

```
% Empty list gives empty list
conseq_swap(_,_,[],[]). 

% List with single element gives back the same list
conseq_swap(_,_,[A],[A]) :- !.

% If we found the 2 items that need to be swapped, we can swap them.
% We don't check for the rest of the list, due to the
% assumption.
% The cut at the end signals that the rule below do not need to be checked.
conseq_swap(E1,E2,[E1,E2|R],[E2,E1|R]) :- !.
conseq_swap(E1,E2,[E2,E1|R],[E1,E2|R]) :- !.

% We recursively check the rest of the list and append the result.
conseq_swap(E1,E2,[A|RI],[A|RO]) :- conseq_swap(E1,E2,RI,RO). 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-04-24T11:48:44.657

另一个解决方案（在 SWI-Prolog 中）是：

```
conseq_swap(D, E, L, Z) :- 
            append([A,[D,E],B], L),
            append([A,[E,D],B], Z). 
```

相同的查询，相同的答案：

```
?- conseq_swap(a,e,[a,g,d,e,f],X).
false.

?- conseq_swap(d,e,[a,g,d,e,f],X).
X = [a, g, e, d, f] ;
false.

?- conseq_swap(d,e,[A,G,D,E,F],X), A=a,G=g,D=d,E=e,F=f.
A = a,
G = g,
D = d,
E = e,
F = f,
X = [a, g, e, d, f] ;
false.

?- conseq_swap(d,e,[a,g,d,e,d,e,f],X).
X = [a, g, e, d, d, e, f] ;
X = [a, g, d, e, e, d, f] ;
false. 
```

（对不起，如果我不能像“重复”那样写，但我是意大利人）。

# android - 解析 SharedPreferences 字符串

> ID：16005696
> 
> 赞同：1
> 
> 时间：2013-04-14T23:51:37.480
> 
> 标签：android, parsing, sharedpreferences, textview

我有一个想法，需要我将长字符串消息保存到 SharedPreferences 中。然后，我必须一次从该消息中提取一个单词并将其逐个扔到 TextView 上，直到消息完成。这对任何人来说都可能吗？如果是这样，有人可以给我一个关于如何实现这样的东西的提示吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T00:39:20.520

保存到共享首选项中是这样的：

```
 final SharedPreferences settings = PreferenceManager.getDefaultSharedPreferences(context);
    final Editor editor = settings.edit();
    editor.putString(PreferencesUtils.NAME, name);
    editor.commit(); 
```

从他们那里读到，像这样：

```
 return PreferenceManager.getDefaultSharedPreferences(context).getString(preference, null); 
```

除此之外，加布的评论对我来说似乎不错，只是稍作调整。我会使用广播挂起的意图来触发更新。

# android - 查询谷歌距离矩阵api时出错

> ID：16005701
> 
> 赞同：0
> 
> 时间：2013-04-14T23:52:12.537
> 
> 标签：android, xml, api

我正在尝试调用谷歌距离矩阵 api，但在 115 处收到错误为非法查询。这是我的代码：

```
protected Document doInBackground(LatLng... latlng) {

        String destinationURL = "";
        //  ASSUMING THAT FIRST LATLNG PASSED IS ALWAYS A SOURCE LOCATION
        for(int index = 1; index < latlng.length; index ++)
        {
            destinationURL += latlng[index].latitude +"," + latlng[index].longitude;
            if(index+1 != latlng.length)
            {
                destinationURL+= "|";
            }
        }
        String url = "http://maps.googleapis.com/maps/api/distancematrix/xml?" 
                + "origins=" + latlng[0].latitude + "," + latlng[0].longitude  
                + "&destinations=" + destinationURL
                + "&sensor=false&mode=walking"; 
```

如果我粘贴上面给出的 url，那么结果如下：[URL link of query](http://maps.googleapis.com/maps/api/distancematrix/xml?origins=35.777418,-78.677666&destinations=35.78036,-78.67816%7C35.787515,-78.670456&sensor=false&mode=walking)

错误详情：`java.lang.IllegalArgumentException: Illegal character in query at index 115: http://maps.googleapis.com/maps/api/distancematrix/xml?origins=35.777418,-78.677666&destinations=35.78036,-78.67816|35.787515,-78.670456&sensor=false&mode=walking`

调用上述网址的代码：

```
 try {
            HttpClient httpClient = new DefaultHttpClient();
            HttpContext localContext = new BasicHttpContext();
            HttpPost httpPost = new HttpPost(url);
            HttpResponse response = httpClient.execute(httpPost, localContext);
            InputStream in = response.getEntity().getContent();
            DocumentBuilder builder = DocumentBuilderFactory.newInstance().newDocumentBuilder();
            Document doc = builder.parse(in);
            return doc; 
```

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T02:41:35.120

经过几次尝试发现这里的问题。我正在使用管道字符“|” 用于加入经纬度。注意管道字符只是一个字符串。**但是，为了在 URL 中添加管道字符，请使用 URLEncoder**最终字符串添加：

```
destinationURL += latlng[index].latitude +"," + latlng[index].longitude;
if(index+1 != latlng.length)
    {
        try {
            destinationURL+=  URLEncoder.encode("|", "UTF-8");
            } catch (UnsupportedEncodingException e) {
                e.printStackTrace();
            }
        }
     } 
```

它成功地工作了。

# php - 将非 MySQL 列表/数组/数据与 MySQL 行进行比较？

> ID：16005705
> 
> 赞同：0
> 
> 时间：2013-04-14T23:52:26.577
> 
> 标签：php, mysql, facebook-graph-api, twitter, instagram

我正在开发一个 iOS 社交网络应用程序。我目前正在构建“寻找朋友”部分。

我有一个“用户”表，它是这样的：

```
-user_id  -user_name  ... -twitter_id   -facebook_id   -instagram_id
948913    yagiz           2134421       2132412        4314124312 
```

例如，当我尝试寻找朋友时，应用程序会在后台执行此操作：

*   从选定的社交网络应用程序（Twitter/Facebook/Instagram）获取当前用户的全部关注列表。响应是一个简单的数组，由用户 ID 组成。

*   对于每个 Twitter/Facebook/Instagram id 运行一个查询，检查它是否在应用程序数据库中。

目前这运作良好。但我有点认为这不是有效的。因为如果用户在 Twitter/Facebook/Instagram 上关注 5000 人，则应用运行 5K 查询。

所以我问哪个是将非 MySQL 列表/数组/数据与 MySQL 行进行比较的最佳方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T01:05:00.097

您可以使用执行单个查询

```
WHERE ... IN('1', '2') 
```

如果你有一个 ids 数组，你可以这样做：

```
$twitterIds = array(
    1234,
    1235,
    1236
);

// $twitterIdString = '1234','1235','1236'
$twitterIdString = "'" . implode("','", $twitterIds) . "'";

// $queryStub = WHERE `-twitter_id` IN('1234','1235','1236')
$queryStub = "WHERE `-twitter_id` IN(" . $twitterIdString . ")"; 
```

这将仅返回您数据库中的 twitter 用户。

# python - 索引错误：列表索引超出范围（Python）

> ID：16005707
> 
> 赞同：19
> 
> 时间：2013-04-14T23:52:32.710
> 
> 标签：python, indexing

我是初学者程序员，我不确定这意味着什么......

索引错误：列表索引超出范围

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-04-14T23:54:44.817

通常，这意味着您正在提供一个列表元素不存在的索引。

例如，如果您的列表是`[1, 3, 5, 7]`，并且您要求索引 10 处的元素，那么您将超出范围并收到错误，因为只有元素 0 到 3 存在。

# cross-browser - HTML 应用程序 (.hta) 是否跨浏览器

> ID：16005708
> 
> 赞同：1
> 
> 时间：2013-04-14T23:53:06.630
> 
> 标签：cross-browser, hta

**HTML 应用程序 (.hta) 可以在 Firefox、Chrome 和 Safari（Windows 操作系统版本）中运行吗？**

我了解 HTML Applications(.hta) 需要 Windows（因为需要引擎 mshta.exe）并且不是跨平台的。但是 HTML 应用程序是跨浏览器的吗？

如果它们不是原生的跨浏览器，是否有第三方库允许您在 IE 以外的其他浏览器上运行 HTML 应用程序？例如，也许有启用此功能的浏览器插件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T00:00:22.730

HTA 不是跨浏览器，因为 mshta.exe 总是实例化 IE 渲染引擎。

您可能可以通过重命名其扩展名在某些浏览器中打开 HTA，但如果 HTA 正在使用它，它们可能会由于不受支持的 HTA 标签或缺少 VBScript、操作系统权限等内容而减少功能。

相关问题：[HTA；使用其他浏览器托管？](https://stackoverflow.com/questions/992695/htas-use-other-browser-to-host)

# c++ - 在编译时强制指针指向指针类型

> ID：16005709
> 
> 赞同：0
> 
> 时间：2013-04-14T23:53:07.377
> 
> 标签：c++, pointers, readability, type-safety

我有一个对象层次结构的反序列化方案，其中大多数对象包含指向其他对象的指针，但不拥有它们。

我正在尝试实施一个两步过程，其中：

1.  创建对象，`Register(Object* pObject)`编辑一个 ID，读取数据。指针成员被序列化为唯一 ID，因此在读回它们时，I `RegisterResolver(int id, Object** ppMember)`s.
2.  处理解析器：查找 ID 并将正确的地址写入该地址`*ppMember`（注意取消引用）。

问题：

*   我想强制只`Base`注册指向某个类的对象或派生自某个类的指针，但`Derived**`不能将其转换为`Base**`.
*   我想*至少*在使用`void*`(not `void**`) 时避免歧义，`Derived**`/`Base**`都可以转换为，但是`Derived*`/也可以`Base*`。

在以下场景中：

```
struct A: public Serialized
{
  int blah;
};

struct B: public Serialized
{
  float fBlah;
  A*    pTarget;
};

B myB; 
```

如果接口是`RegisterResolver(int id, void* ppObject)`，则不能保证客户端代码不会通过`myB.pTarget`而不是`&myB.pTarget`.

我可以做些什么来提高此解决方案的 [type-] 安全性和可读性？

（目标平台是 x86 和 ARM。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T00:20:12.697

模板应该会有所帮助。怎么样

```
template<typename T>
void RegisterResolver(int id, T** ppObject, Base* extra = (T*)0); 
```

这允许任何类型的参数，`Derived**`其中存在从`Derived*`to的隐式转换`Base*`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T11:56:39.997

由于最初的问题也与可读性有关，并且我想尽量减少界面上可能令人困惑的参数，我已经迭代了[Ben Voigt](https://stackoverflow.com/users/103167/ben-voigt)的答案并最终得到了这个：

```
template<typename T>
void RegisterResolver(int id, T** ppObject)
{
  // assert(ppObject != 0);
  Base* pBase(*ppObject); // not used

  // implementation
} 
```

# c - C中的套接字；无限循环

> ID：16005710
> 
> 赞同：2
> 
> 时间：2013-04-14T23:53:34.760
> 
> 标签：c, sockets, infinite-loop

所以我正在尝试编写一个可以在客户端和服务器上接受输入的程序。现在，当我将这些行移到它之外的 while(1) 循环中时，它是无限循环的，就像我被告知要做的那样：

```
sin_size = sizeof their_addr;
        new_fd = accept(sockfd, (struct sockaddr *)&their_addr, &sin_size); 
```

有人告诉我它无限循环的原因是因为新套接字已创建并且现在正在侦听，而旧套接字仍在打开并正在侦听。我试过关闭客户端和服务器中的旧套接字，但没有任何效果。

摆脱 while 循环显然是可行的，但随后套接字在接收到输入后关闭。这样做的目标基本上是制作一个聊天程序。它不必同时打开服务器和客户端（对于 A+，它确实是大声笑），但只要它可以来回发送和接收输入。

我已经包含了客户端和服务器的代码。未来感谢！

**服务器.c：**

```
 #include <stdio.h>
    #include <stdlib.h>
    #include <unistd.h>
    #include <errno.h>
    #include <string.h>
    #include <sys/types.h>
    #include <sys/socket.h>
    #include <netinet/in.h>
    #include <netdb.h>
    #include <arpa/inet.h>
    #include <sys/wait.h>
    #include <signal.h>

#define PORT "3490"  // the port users will be connecting to

#define BACKLOG 10   // how many pending connections queue will hold

void sigchld_handler(int s)
{
    while(waitpid(-1, NULL, WNOHANG) > 0);
}

// get sockaddr, IPv4 or IPv6:
void *get_in_addr(struct sockaddr *sa)
{
    if (sa->sa_family == AF_INET) {
        return &(((struct sockaddr_in*)sa)->sin_addr);
    }

    return &(((struct sockaddr_in6*)sa)->sin6_addr);
}

int main(void)
{
    int sockfd, new_fd;  // listen on sock_fd, new connection on new_fd
    struct addrinfo hints, *servinfo, *p;
    struct sockaddr_storage their_addr; // connector's address information
    socklen_t sin_size;
    struct sigaction sa;
    int yes=1;
    char s[INET6_ADDRSTRLEN];
    int rv;

    memset(&hints, 0, sizeof hints);
    hints.ai_family = AF_UNSPEC;
    hints.ai_socktype = SOCK_STREAM;
    hints.ai_flags = AI_PASSIVE; // use my IP

    if ((rv = getaddrinfo(NULL, PORT, &hints, &servinfo)) != 0) {
        fprintf(stderr, "getaddrinfo: %s\n", gai_strerror(rv));
        return 1;
    }

    // loop through all the results and bind to the first we can
    for(p = servinfo; p != NULL; p = p->ai_next) {
        if ((sockfd = socket(p->ai_family, p->ai_socktype,
                p->ai_protocol)) == -1) {
            perror("server: socket");
            continue;
        }

        if (setsockopt(sockfd, SOL_SOCKET, SO_REUSEADDR, &yes,
                sizeof(int)) == -1) {
            perror("setsockopt");
            exit(1);
        }

        if (bind(sockfd, p->ai_addr, p->ai_addrlen) == -1) {
            close(sockfd);
            perror("server: bind");
            continue;
        }

        break;
    }

    if (p == NULL)  {
        fprintf(stderr, "server: failed to bind\n");
        return 2;
    }

    freeaddrinfo(servinfo); // all done with this structure

    if (listen(sockfd, BACKLOG) == -1) {
        perror("listen");
        exit(1);
    }

    sa.sa_handler = sigchld_handler; // reap all dead processes
    sigemptyset(&sa.sa_mask);
    sa.sa_flags = SA_RESTART;
    if (sigaction(SIGCHLD, &sa, NULL) == -1) {
        perror("sigaction");
        exit(1);
    }

    printf("server: waiting for connections...\n");

sin_size = sizeof their_addr;
        new_fd = accept(sockfd, (struct sockaddr *)&their_addr, &sin_size);

    while(1) {  // main accept() loop

        if (new_fd == -1) {
            perror("accept");
            //continue;
        }

        inet_ntop(their_addr.ss_family,
            get_in_addr((struct sockaddr *)&their_addr),
            s, sizeof s);
        printf("server: got connection from %s\n", s);

        if (!fork()) { // this is the child process
            close(sockfd); // child doesn't need the listener
printf("INFIITE LOOP");
//does this because it waiting for another process and it' stays opened and is listnening???
//Maybe look in the client for this
//also said that while loop isn't probably needed and to do 

//probably will need a recv
//input
//send
//recieve
char input[20];
char *pointer;
printf("Type in an input, q to quit: ");
scanf("%s", input);
pointer = input;  //will need to clean this up to be more effcient... later

//if (input[0] == 'q')
//{
//printf("Testing the if");
//close(new_fd);
//need to break out of loop
//}
            if (send(new_fd, pointer, 20, 0) == -1) //need to change the length to the actual length of the input... later.

//int send(int sockfd, const void *msg, int len, int flags);
//sockfd is the socket descriptor you want to send data to (whether it's the one returned by socket() or
//the one you got with accept().) msg is a pointer to the data you want to send, and len is the length of that
//data in bytes. Just set flags to 0\. 

//accept needs to be outstide of while loop
//because after accepting, it blocks the socket?
//in the while loop is where all the sending and recieving happens
//after sending, do recieve

                perror("send");
            close(new_fd); 
            exit(0);
        }
        close(new_fd);  // parent doesn't need this
    }

    return 0;
} 
```

**客户端.c：**

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <errno.h>
#include <string.h>
#include <netdb.h>
#include <sys/types.h>
#include <netinet/in.h>
#include <sys/socket.h>

#include <arpa/inet.h>

#define PORT "3490" // the port client will be connecting to 

#define MAXDATASIZE 100 // max number of bytes we can get at once 

// get sockaddr, IPv4 or IPv6:
void *get_in_addr(struct sockaddr *sa)
{
    if (sa->sa_family == AF_INET) {
        return &(((struct sockaddr_in*)sa)->sin_addr);
    }

    return &(((struct sockaddr_in6*)sa)->sin6_addr);
}

int main(int argc, char *argv[])
{
    int sockfd, numbytes;  
    char buf[MAXDATASIZE];
    struct addrinfo hints, *servinfo, *p; 
/*
This is what is in the struct

struct addrinfo {
int ai_flags; // AI_PASSIVE, AI_CANONNAME, etc.
int ai_family; // AF_INET, AF_INET6, AF_UNSPEC
int ai_socktype; // SOCK_STREAM, SOCK_DGRAM
int ai_protocol; // use 0 for "any"
size_t ai_addrlen; // size of ai_addr in bytes
struct sockaddr *ai_addr; // struct sockaddr_in or _in6
char *ai_canonname; // full canonical hostname
struct addrinfo *ai_next; // linked list, next node
};

getaddrinfo() will return a pointer to this
*/
    int rv;
    char s[INET6_ADDRSTRLEN];

    if (argc != 2) {
        fprintf(stderr,"usage: client hostname\n");
        exit(1);
    }

    memset(&hints, 0, sizeof hints);
    hints.ai_family = AF_UNSPEC;
    hints.ai_socktype = SOCK_STREAM;

    if ((rv = getaddrinfo(argv[1], PORT, &hints, &servinfo)) != 0) {
        fprintf(stderr, "getaddrinfo: %s\n", gai_strerror(rv));
        return 1;
    }

    // loop through all the results and connect to the first we can
    for(p = servinfo; p != NULL; p = p->ai_next) {
        if ((sockfd = socket(p->ai_family, p->ai_socktype,
                p->ai_protocol)) == -1) {
            perror("client: socket");
            continue;
        }

        if (connect(sockfd, p->ai_addr, p->ai_addrlen) == -1) {
            close(sockfd);
            perror("client: connect");
            continue;
        }

        break;
    }

    if (p == NULL) {
        fprintf(stderr, "client: failed to connect\n");
        return 2;
    }

    inet_ntop(p->ai_family, get_in_addr((struct sockaddr *)p->ai_addr),
            s, sizeof s);
    printf("client: connecting to %s\n", s);

    freeaddrinfo(servinfo); // all done with this structure

    if ((numbytes = recv(sockfd, buf, MAXDATASIZE-1, 0)) == -1) {
        perror("recv");
        exit(1);
    }

    buf[numbytes] = '\0';

    printf("client: received '%s'\n",buf);

    close(sockfd); //as soon as client recieves message, it closes the socket. 
//probably needs a while loop in here in order to keep the socket open
//but what are the parameters for the while loop?

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T00:23:52.070

问题之一是在服务器中。我认为处理返回的信息的循环可能存在问题`getaddrinfo()`，但主处理循环也存在问题。

你有：

```
new_fd = accept(sockfd, (struct sockaddr *)&their_addr, &sin_size);
while(1)
{
    ... 
```

这只会接受第一个连接；除非您的服务器是一次性服务器，否则您需要重新接受后续连接。所以，你应该使用：

```
while ((new_fd = accept(sockfd, (struct sockaddr *)&their_addr, &sin_size)) >= 0)
{
    ...process new connection...
    close(new_fd);
} 
```

服务器程序通常没有用户随时提供响应信息。

* * *

这段代码似乎有效。

### 服务器.c

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <errno.h>
#include <string.h>
#include <sys/socket.h>
#include <netinet/in.h>
#include <netdb.h>
#include <arpa/inet.h>
#include <sys/wait.h>
#include <signal.h>

#define PORT "3490"

#define BACKLOG 10

void sigchld_handler(int s)
{
    while (waitpid(-1, NULL, WNOHANG) > 0)
        ;
}

void *get_in_addr(struct sockaddr *sa)
{
    if (sa->sa_family == AF_INET)
        return &(((struct sockaddr_in*)sa)->sin_addr);
    return &(((struct sockaddr_in6*)sa)->sin6_addr);
}

int main(void)
{
    int sockfd, new_fd;
    struct addrinfo hints, *servinfo, *p;
    struct sockaddr_storage their_addr;
    socklen_t sin_size;
    struct sigaction sa;
    int yes=1;
    char s[INET6_ADDRSTRLEN];
    int rv;

    memset(&hints, 0, sizeof hints);
    hints.ai_family = AF_UNSPEC;
    hints.ai_socktype = SOCK_STREAM;
    hints.ai_flags = AI_PASSIVE;

    if ((rv = getaddrinfo(NULL, PORT, &hints, &servinfo)) != 0)
    {
        fprintf(stderr, "getaddrinfo: %s\n", gai_strerror(rv));
        return 1;
    }

    for (p = servinfo; p != NULL; p = p->ai_next)
    {
        if ((sockfd = socket(p->ai_family, p->ai_socktype, p->ai_protocol)) == -1)
        {
            perror("server: socket");
            continue;
        }

        if (setsockopt(sockfd, SOL_SOCKET, SO_REUSEADDR, &yes, sizeof(int)) == -1)
        {
            perror("setsockopt");
            exit(1);
        }

        if (bind(sockfd, p->ai_addr, p->ai_addrlen) == -1)
        {
            close(sockfd);
            perror("server: bind");
            continue;
        }

        break;
    }

    if (p == NULL)
    {
        fprintf(stderr, "server: failed to bind\n");
        return 2;
    }

    freeaddrinfo(servinfo);

    if (listen(sockfd, BACKLOG) == -1)
    {
        perror("listen");
        exit(1);
    }

    sa.sa_handler = sigchld_handler;
    sigemptyset(&sa.sa_mask);
    sa.sa_flags = SA_RESTART;
    if (sigaction(SIGCHLD, &sa, NULL) == -1)
    {
        perror("sigaction");
        exit(1);
    }

    printf("server: waiting for connections...\n");

    sin_size = sizeof their_addr;

    while ((new_fd = accept(sockfd, (struct sockaddr *)&their_addr, &sin_size)) > 0)
    {
        inet_ntop(their_addr.ss_family,
                get_in_addr((struct sockaddr *)&their_addr),
                s, sizeof s);
        printf("server: got connection from %s\n", s);

        if (fork() == 0)
        {
            close(sockfd);
            char input[] = "This is the response!";
            if (send(new_fd, input, strlen(input), 0) == -1)
                perror("send");
            close(new_fd);
            exit(0);
        }

        close(new_fd);
    }

    return 0;
} 
```

### 客户端.c

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <errno.h>
#include <string.h>
#include <netdb.h>
#include <sys/types.h>
#include <netinet/in.h>
#include <sys/socket.h>

#include <arpa/inet.h>

#define PORT "3490"

#define MAXDATASIZE 100

void *get_in_addr(struct sockaddr *sa)
{
    if (sa->sa_family == AF_INET)
    {
        return &(((struct sockaddr_in*)sa)->sin_addr);
    }

    return &(((struct sockaddr_in6*)sa)->sin6_addr);
}

int main(int argc, char *argv[])
{
    int sockfd, numbytes;
    char buf[MAXDATASIZE];
    struct addrinfo hints, *servinfo, *p;

    int rv;
    char s[INET6_ADDRSTRLEN];

    if (argc != 2)
    {
        fprintf(stderr, "usage: client hostname\n");
        exit(1);
    }

    memset(&hints, 0, sizeof hints);
    hints.ai_family = AF_UNSPEC;
    hints.ai_socktype = SOCK_STREAM;

    if ((rv = getaddrinfo(argv[1], PORT, &hints, &servinfo)) != 0)
    {
        fprintf(stderr, "getaddrinfo: %s\n", gai_strerror(rv));
        return 1;
    }

    for (p = servinfo; p != NULL; p = p->ai_next)
    {
        if ((sockfd = socket(p->ai_family, p->ai_socktype, p->ai_protocol)) == -1)
        {
            perror("client: socket");
            continue;
        }

        if (connect(sockfd, p->ai_addr, p->ai_addrlen) == -1)
        {
            close(sockfd);
            perror("client: connect (will try again)");
            continue;
        }

        break;
    }

    if (p == NULL)
    {
        fprintf(stderr, "client: failed to connect\n");
        return 2;
    }

    inet_ntop(p->ai_family, get_in_addr((struct sockaddr *)p->ai_addr),
            s, sizeof s);
    printf("client: connecting to %s\n", s);

    freeaddrinfo(servinfo);

    if ((numbytes = recv(sockfd, buf, MAXDATASIZE-1, 0)) == -1)
    {
        perror("recv");
        exit(1);
    }

    buf[numbytes] = '\0';

    printf("client: received '%s'\n", buf);

    close(sockfd);

    return 0;
} 
```

随着服务器在后台运行，客户端得到“这是响应！” 每次运行时的消息。服务器迭代工作，处理多个请求。有很多清理工作。我需要去研究可能因`accept()`重试循环而导致的错误。该代码采取保守的观点，即如果一个`accept()`失败，所有后续的也会失败，最好的办法是停止。这是一个设计决定；如果你愿意，你可以改变它。我注意到一些可能的错误，例如 EBADF，将是任何重试都无法解决的永久性问题。其他可能代表暂时错误。

# c# - C# 非矩形按钮

> ID：16005712
> 
> 赞同：1
> 
> 时间：2013-04-14T23:54:22.197
> 
> 标签：c#, winforms, winapi, button

我试图想出一种在 C# 的 Windows 窗体中制作非矩形按钮的方法。我已经四处寻找这个，并且有很多关于如何使按钮*外观*非矩形的教程（包括微软自己的文档），但是 - 这很关键 - 他们都没有做任何关于制作*活动区域的事情*按钮的非矩形。例如，如果您制作一个椭圆形按钮，则边界矩形的角仍然是用来拾取鼠标事件（例如鼠标悬停和单击）的部分。这对我的需要是不可接受的。我需要有几个彼此相邻的奇怪形状的按钮，它们的边界矩形可能会重叠，但它们应该只响应按钮图形可见部分内的点击。对于其他语言（主要是 Objective-C），我已经看到了几个类似的问题，但对于 C# 则没有。Winforms甚至可以做到这一点吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-15T00:01:48.247

Win32 窗口总是矩形的。但是，如果您使用[`SetWindowRgn`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd145102.aspx). 还有[“分层窗口”API](http://msdn.microsoft.com/en-us/library/ms997507.aspx)。

但是，您可能无法从纯 WinForms 执行此操作。期望到达 p/invoke。

* * *

看起来你可以从纯 WinForms 中做到这一点：只需设置[`Control.Region`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.region.aspx)属性。

[MSDN](http://msdn.microsoft.com/en-us/library/aa289517.aspx#vbtchshapedwindowsformscontrolsinvisualstudionetanchor4)上提供了更完整的示例

# mercurial - 将两个分支合并到第三个

> ID：16005713
> 
> 赞同：0
> 
> 时间：2013-04-14T23:54:27.727
> 
> 标签：mercurial

我在同一个项目中有 2 个用户和 2 个分支（b1 和 b2）。每个用户都使用自己的分支。当我尝试将这些合并在一起时，比如说，在“稳定”分支中 - 我没有任何效果。

现在我在自己的分支 (b1) 中，并执行以下操作：

```
hg branch stable //As I can understand - this is creates new branch, named "stable"
hg commit 
hg push //To make affect to bitbucket. 
```

所以，此时此刻，“stable”和“b1”是一回事。我对吗？接下来我应该合并 b2 和 stable。我这样做：

```
hg branch //to make shure, that I'm in "stable"
hg merge b2
hg commit
hg push 
```

但！之后，如果我输入`hg update b2`mercurial 告诉我，那 33 个文件更新了！实际上，分支没有合并！

我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T17:44:42.243

如果您查看存储库的图表，它将看起来像这样。

```
B1     o----o---B1
                  \
Stable             o----S
                       /
B2     o----o---o----B2 
```

*   `S`是修订`hg update stable`会带你去。
*   `B1`是修订`hg update b1`会带你去。
*   `B2`是修订`hg update b2`会带你去。

`hg branches`将为您提供每个分支机构负责人的列表。

当您更新到`b2`您将回到合并前的版本时。完全允许：

```
hg update b2
<do some work>
hg commit 
```

...你最终会得到：

```
B1     o----o---B1
                  \
Stable             o----S
                       /
B2     o----o---o-----o----B2 
```

同样，您可以继续使用`b1`

像这样想。您在`stable`并将更改合并`b2`到中`stable`，但您没有合并`stable`到`b2`. `b2`分支未修改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T00:44:08.767

1.  额外的分支是没用的——你总是可以使用现有的“默认”
2.  在真正合并之前，将分支头与差异进行比较以查看更改（并在此处显示差异，如果需要，还可以完全合并输出）

常见的合并工作流程将是

*   `hg up default`
*   `hg merge b1`
*   ... 解决冲突（如果需要）
*   `hg commit -m "Merged b1"`
*   `hg merge b2`
*   ... 解决冲突（如果需要）
*   `hg commit -m "Merged b2"`

# delphi - cxDateEdit 设置最小日期

> ID：16005714
> 
> 赞同：-2
> 
> 时间：2013-04-14T23:54:29.443
> 
> 标签：delphi, devexpress, delphi-xe2, delphi-xe

如何在 cxDateEdit 的代码中设置最小日期，以便用户不能选择小于我指定的日期？我可以在财产中做到这一点，但代码更适用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T23:58:03.577

像这样：

```
cxDateEdit.Properties.MinDate := EncodeDate(2013, 4, 1); 
```

# php - 如何在多维数组上使用 array_multisort()

> ID：16005715
> 
> 赞同：4
> 
> 时间：2013-04-14T23:54:39.787
> 
> 标签：php, multidimensional-array

无法找到正确的函数来对多维数组进行排序，如下所示：

```
Array(    [0] => Array      (
             [username]    => 123           
             [name]        => Name    
             [address]     => array  (
                                 [line1]    => address line 1
                                 [line2]    => address line 2
                                 [postcode] => postcode
                            ),
         [1] => Array      (
             [username]    => 1234           
             [name]        => Name    
             [address]     => array  (
                                 [line1]    => address line 1
                                 [line2]    => address line 2
                                 [postcode] => postcode
                            )
) 
```

我希望通过地址数组（）中的一个元素对上述数组进行排序。

我知道 array_multisort 函数可以很容易地按用户名或地址排序，但无法弄清楚如何使用另一个级别的字段进行排序。

任何帮助将非常感激

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T00:24:07.803

刚刚想出了如何实现它...

首先需要将我们想要排序的数据提取到一个单独的数组中，然后再发送给array_multisort()函数

例子：

```
 foreach(Array() as $key=>$value) {
     $sort_data[$key] = $value['address']['postcode'];
}

array_multisort($sort_data, SORT_DESC, Array()); 
```

初始 Array() 现在将根据邮政编码值和提供给 array_multisort() 函数的任何 SORT 过滤器进行排序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T00:35:26.943

使用此解决方案，您无需进行额外准备即可获得结果：

```
$result = usort($data, function($a, $b) {
    return strcmp($a['address']['postcode'], $b['address']['postcode']);
}); 
```

`array_multisort`目的是一次对多个不同的数组进行排序。如果只有一个原始数组要排序 -`usort()`应该使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-28T14:56:50.953

仅供参考，要同时支持字符串和数字排序，usort 最终会慢约 10 倍。

```
$rs[] = array('username'=>'bla bla..','Logins'=>124);
$rs[] ...

usort($rs,function($a,$b) {
  $i = 'Logins';
  if (is_numeric($a[$i])) {
    return $a[$i] > $b[$i];
  } else {
    return strcmp($a[$i],$b[$i]);
  }
}); 
```

对比

```
$orderBy = 'Logins';
$sort = array();
foreach($rs as $key=>$rec) $sort[$key] = $rec[$orderBy];
array_multisort($sort,SORT_ASC,$rs); 
```

演示

```
<?php
$rs = array();
$rs[] = array('adam','cederblom',50);
$rs[] = array('denny','bengtsson',9);
$rs[] = array('beata','andersson',30);
$rs[] = array('adam','cederblom',50);
$rs[] = array('denny','bengtsson',9);
$rs[] = array('beata','andersson',30);
$rs[] = array('adam','cederblom',50);
$rs[] = array('denny','bengtsson',9);
$rs[] = array('beata','andersson',30);
$rs[] = array('adam','cederblom',50);
$rs[] = array('denny','bengtsson',9);
$rs[] = array('beata','andersson',30);
$data = array_merge($rs,$rs);

$orderBy = 2;	//0 - 2
//please note that usort doesn't use global, so update $i

echo 'Usort: ';
$start = microtime(true);
for($j=0;$j<1000;$j++) {
  //revert to unsorted.
  $rs = $data;
  usort($rs,function($a,$b) {
    $i = 2;	//should be same as orderBy..
    if (is_numeric($a[$i])) {
      return $a[$i] > $b[$i];
    } else {
      return strcmp($a[$i],$b[$i]);
    }
  });
}
echo microtime(true) - $start . '<hr/>';
foreach($rs as $rec) {
  echo serialize($rec) . '<hr/>';
}

echo 'Multisort: ';
$start = microtime(true);
for($j=0;$j<1000;$j++) {
  //revert to unsorted.
  $rs = $data;
  $sort = array();
  foreach($rs as $key=>$rec) {
    //demo, numeric index in record
    $sort[$key] = $rec[$orderBy];
  }
  array_multisort($sort,SORT_ASC,$rs);
}
echo microtime(true) - $start . '<hr/>';
foreach($rs as $rec) {
  echo serialize($rec) . '<hr/>';
}
```

# c - Select() 仍然阻止从管道读取

> ID：16005717
> 
> 赞同：1
> 
> 时间：2013-04-14T23:54:46.267
> 
> 标签：c, io, fork, ipc, pipe

我的应用程序派生了一个孩子，孩子执行了一个新程序，父母向它写入，然后在孩子执行一些工作后从孩子那里读回。在监控管道的读取端时，程序仍然在等待子进程。我目前没有回信给父母，所以它会故意阻止。下面是代码（write_to() 函数关闭函数中管道的未使用部分）：

```
 pid_t leaf_proc;

    int rv = 0;

    int w_pfd[2];
    int r_pfd[2];   

    if(pipe(w_pfd) == -1 || pipe(r_pfd) == -1){
        printf("Failed to pipe. Goodbye.\n");
        exit(0);
    }

    if((leaf_proc = fork()) < 0){
        printf("Error: %s\n",strerror(errno));
        exit(0);
    }else if(leaf_proc == 0){
        /***Child to be execl()'d***/
        rv = execl("Some program");
        if(rv < 0){
            printf("Error: %s\n",strerror(errno));
            exit(0);
        }
    }else{
        /***Parent***/
        write_to(par_info,w_pfd);
        fd_set read_set;
        //struct timeval tv;
        //tv.tv_sec = 5;
        //tv.tv_usec = 0;

        FD_ZERO(&read_set);
        FD_SET(r_pfd[0], &read_set);
        rv = select(r_pfd[0]+1,&read_set,NULL,NULL,&tv);
        printf("set?: %d\n",rv);
     } 
```

运行此程序时，程序仍然挂在 select 语句（永远不会到达最后一个 printf），但如果我添加超时信息，程序会在 5 秒后继续。首先，我是否正确使用 select ？其次，虽然这可能不会阻塞（从某种意义上说，父进程不会被内核中断，但它是否仍然会导致结果（进程挂起直到准备好）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T00:07:07.590

您必须在子进程和父进程中关闭管道的未使用部分。

终止后管道的写入fd会在子进程中关闭，但在父进程中它仍然是打开的，所以你`select`会耐心等待数据......

# sql - 使用仅允许 3 个不同值 iSQLPLUS 的新列更改表

> ID：16005725
> 
> 赞同：0
> 
> 时间：2013-04-14T23:55:49.733
> 
> 标签：sql, oracle, alter

我正在尝试使用仅允许 3 个不同值的新列“主题”来更改表“导师”：“阅读”、“数学”、“ESL”。

到目前为止我所拥有的：

```
ALTER table tutor
add subject varchar2 (10) 
         CHECK ('reading', 'math', 'ESL'); 
```

我不断得到这个：

> ORA-00920: 无效的关系运算符

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T23:59:52.817

尝试这个

```
ALTER table tutor
add subject varchar2 (10) 
add constraint sb CHECK(subject IN ('reading', 'math', 'ESL')); 
```

# node.js - 如何创建会话 express.js

> ID：16005730
> 
> 赞同：1
> 
> 时间：2013-04-14T23:57:27.200
> 
> 标签：node.js, session, cookies, express

我运行 localhost:3000/name/john，创建一个 cookie，然后 localhost:3000/name 以显示 cookie 我有一个控制台错误“TypeError: Can not read property 'name' of undefined”

看我的代码

```
 var express = require('express')
     , http = require('http') 
     , path = require('path') ;

var app = express();        

        app.configure(function(){
            app.set('port', process.env.PORT || 3000);
            app.use(express.bodyParser()) ;
            app.use(express.methodOverride()) ;
            app.use(app.router);

            app.use(express.cookieParser());  
            app.use(express.session({ secret: 'secret'}));
        }) ;

      app.get('/name/:name', function(req, res){
            res.cookie('name' , req.params.name).send('<p>the cookie <a href="/name">Go here</a></p>') ;
       });

      app.get('/name', function(req, res){
          console.log(req.cookies.name);
          res.send("index");
      });  

    http.createServer(app).listen(app.get('port'), function(){
      console.log('Express server listening on port ' + app.get('port'));
    }); 
```

如何解决这个问题呢 ？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T05:50:41.763

如下修改您的 app.configure 代码。

```
app.configure(function(){
      app.set('port', process.env.PORT || 3000);
      app.use(express.bodyParser()) ;
      app.use(express.methodOverride()) ;
      app.use(express.cookieParser());  
      app.use(express.session({ secret: 'secret'}));
      app.use(app.router);
}) ; 
```

看看[http://expressjs.com/api.html#app.use](http://expressjs.com/api.html#app.use)。这里的问题在于中间件优先级。

# facebook - AddThis Facebook 分享按钮与弹出窗口

> ID：16005735
> 
> 赞同：0
> 
> 时间：2013-04-14T23:58:44.693
> 
> 标签：facebook, popup, share, addthis

我正在尝试将 AddThis 用于 Facebook 和 Twitter 共享按钮，如下所示：

```
<div class="addthis_toolbox addthis_default_style addthis_16x16_style">
<a class="addthis_button_facebook"></a>
<a class="addthis_button_twitter"></a>
...

<script type="text/javascript">
  var addthis_config = addthis_config||{};
  addthis_config.data_track_addressbar = false;
  addthis_config.data_track_clickback = false;
</script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-516a8c1a380e068d"></script> 
```

（当然我还包括 AddThis JavaScript。）

Twitter 按钮会打开一个弹出窗口，但 Facebook 按钮会在新的浏览器选项卡中打开。为什么会这样？我也需要在弹出窗口中打开 Facebook 分享功能。全屏标签看起来既错误又丑陋。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T00:12:21.297

[http://support.addthis.com/customer/portal/questions/921191-facebook-share-dialog-opens-in-new-tab-rather-than-popup](http://support.addthis.com/customer/portal/questions/921191-facebook-share-dialog-opens-in-new-tab-rather-than-popup)

这就是你的答案。这是默认的，也是唯一可用的行为！

# json - 如果我使用 Response.ResponseBuilder，Glassfish 会抛出 MessageException

> ID：16005739
> 
> 赞同：0
> 
> 时间：2013-04-14T23:59:36.003
> 
> 标签：json, jakarta-ee, glassfish, jersey, jax-rs

我的程序曾经可以工作，但在我更新了 NetBeans 和 Glassfish 后，它声明抛出： **com.sun.jersey.api.MessageException：Java 类 java.util.LinkedList 和 Java 类型类 java.util 的消息体编写器。 LinkedList 和 MIME 媒体类型 application/json 未找到**

我已经花了几天时间搜索解决方案，但没有任何效果。所以我创建了一个小的概念验证代码：

```
@Path("frend")
@Stateless
public class MyFrend
{
    @Context
    private UriInfo context;

    public MyFrend(){}

    // Throws: com.sun.jersey.api.MessageException: A message body writer for Java class java.util.LinkedList, and Java type class java.util.LinkedList, and MIME media type application/json was not found

    @GET
    @Produces(MediaType.APPLICATION_JSON)
    public Response getAssets()
    {
        List<Frend> frends = new LinkedList<Frend>();
        frends.add( new Frend() );
        frends.add( new Frend() );

        Response.ResponseBuilder rb = Response.ok( frends, MediaType.APPLICATION_JSON_TYPE );

        Response r = rb.build();
        return r;
    }
} 
```

如果我将返回类型“响应”替换为“列表”，它会起作用，但会将列表包装到根元素中，这会破坏与现有客户端的兼容性。这是代码：

```
@Path("ok")
@GET
@Produces(MediaType.APPLICATION_JSON)
public List<Frend> getAssetsOk()
{
    List<Frend> frends = new LinkedList<Frend>();
    frends.add( new Frend() );
    frends.add( new Frend() );
    return frends;
} 
```

它产生： {" **frend** ":[{"id":"0","name":"Bob"},{"id":"0","name":"Bob"}]}

虽然我需要： [{"id":"0","name":"Bob"},{"id":"0","name":"Bob"}]

以防万一这是我的“朋友”课。

```
@XmlRootElement(name="frend")
public class Frend
{
  public int id;
  public String name = "Bob";
} 
```

任何意见是极大的赞赏。

非常感谢，

——谢尔盖

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T02:33:13.347

为了解决导致异常的问题，我必须将实体包装在 GenericEntity 类中：

```
@GET
@Produces(MediaType.APPLICATION_JSON)
public Response getAssets()
{
    LinkedList<Frend> frends = new LinkedList<Frend>();
    frends.add( new Frend() );
    frends.add( new Frend() );

    GenericEntity<LinkedList<Frend>> entity = new GenericEntity<LinkedList<Frend>>(frends) {};

    Response.ResponseBuilder rb = Response.ok( entity, MediaType.APPLICATION_JSON_TYPE );
    Response r = rb.build();
    return r;
} 
```

但是后来我遇到了与刚刚返回 LinkedList 时相同的问题：它产生：

{"**朋友**":[{"id":"0","name":"Bob"},{"id":"0","name":"Bob"}]}

虽然我需要：

[{"id":"0","name":"Bob"},{"id":"0","name":"Bob"}]

# visual-studio - Excel 365 在 VS2012 宏模板中发现不可读的内容；Excel 2010 没有

> ID：16005745
> 
> 赞同：1
> 
> 时间：2013-04-15T00:00:07.313
> 
> 标签：visual-studio, excel, visual-studio-2012, vsto, office365

我正在 VS2012 中进行一些 Excel 文档级别的自定义。首次在本地安装的 Office 365 中打开发布的文件时，出现以下错误：

“Excel 在 filename.xltm 中发现不可读的内容。是否要恢复此工作簿的内容？如果您信任此工作簿的来源，请单击“是”。

奇怪的是，修复记录是空白的。后：

```
 <repairedRecords summary="Following is a list of repairs:"> 
```

什么都没有。当我在 Excel 2010 中打开文件时，我没有收到错误消息。

我目前的工作是在 2010 年首先打开文件，保存它，然后分发它。在 Office 2010 中打开并保存后，我没有收到错误消息。

VS2012中是否有设置或需要更改的内容？我无法找到这方面的信息，而且我从来没有遇到过空白的维修清单。如果保存在初始文件上，则文件在“修复”后完全按预期运行。

xltm 文件本身不包含任何宏，我已经在 3 个不同的 office 365 安装中尝试过这个。

# python - 检查下一行，然后实施该行应该去的地方

> ID：16005746
> 
> 赞同：2
> 
> 时间：2013-04-15T00:00:13.473
> 
> 标签：python, pseudocode

我无法弄清楚如何实现一个文本文件，其中的行包含单词行和数字行。我想要尝试做的是阅读单词下的行，然后将这些单词保存到列表变量中。

编码新手，请多多包涵。

示例文本文件：

```
 Hello World
 4, 3, 2
 3, 4, 2
 2, 3, 4
 Change the World
 5, 3, 9
 3, 9, 5
 Save the World
 1, 2, 3 
```

我的伪代码：

```
 Open File
 Read the First Line
 If the current-line[0] is Letter then:
   parse the current Line
   save the parsed to a Word list
   Go to the next line
 If the current-line[0] is a Number then:
   parse the current Line
   save the parsed line in a list
   read the next line
   If the next line has another number then:
      parse line
      save it to the previous parsed-line list
      #Keep Checking if the next line begins with a number
      #if it doesn't and the next line begins with a letter go back up to the previous statement 
```

我的问题：如何告诉 python 检查下一行而不离开当前行，然后检查下一行应该转到哪个“if”语句？

示例代码：*简化*

```
 def parse():
    return parse

 txtopen = open("txt","r")
 line = txtopen.readline()
 while line:
  if line[0] is not between 0 or 9::
   parse = parse(line)
   wordlist.append(parse)
  if line[0] in between  0 and 9:
   parse = parse(line)
   list = list.extend(parse)
   '''
   This is where i cant figure out how to read the next line and check
   '''
   finallist = list.append(list)
  line = txtopen.readline() 
```

输出：

```
 wordList : ["Hello Word", "Change the World", "Save the World"]
   numberList : [[4,3,2,3,4,2,2,3,4],[5,3,9,3,9,5],[1,2,3]] 
```

在我的逻辑中对我的伪代码的任何帮助都将非常棒，或者任何可以提供帮助的一般情况将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T00:19:06.893

要阅读下一行，您可以执行以下操作。

```
with open("file.txt", 'r') as f:
    lines = f.readlines()
    current_line_index = 0
    next_line = lines[current_line_index + 1]
    print next_line 
```

以下是我将如何解决这个特殊问题。

```
import csv

word_list = []
number_list = []

with open("file.txt", 'r') as f:
    reader = csv.reader(f)
    for line in reader:
        if line[0].strip().isdigit():
            number_list.append(line)
        else:
            word_list.append(line)

print number_list
print word_list 
```

# prolog - SWI 序言：列表操作

> ID：16005749
> 
> 赞同：0
> 
> 时间：2013-04-15T00:00:43.093
> 
> 标签：prolog

例如有两个列表

```
List1 = [ [1,2,3,4], [2,4,5,4],[4,5,2,5],.....]
List2= [ [2,4,4,1], [5,6,1,2], [4,2,3,4],.....] 
```

现在我想查看这两个列表，并将列表 1 中每个列表的第三个元素与 list2 进行比较。如果它们相同，则将列表留在 list1 中，然后继续下一个。如果它们不相同，则将列表放在不同列表（即列表 3）中的列表 1 的一侧。所以像

```
compare([][][]).
compare([[firstele, second ele, third ele, fourth ele]|list1],[firstele2, second ele2, third ele2, fourth ele2]|list2],list3):-
   ....... condition...... 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T00:47:52.017

看看下面的代码：

```
convert([],[]).
convert([L|Lt],[Q|Qt]) :- L>64, L<91, Q is L+32, convert(Lt,Qt).
convert([L|Lt],[L|Qt]) :- convert(Lt,Qt). 
```

Prolog 总是寻找第一个真实的。因此，如果 line1 不为真，那么它将转到 line2，如果 line2 不为真，它将转到 line3。每一行都是真的，所有的陈述都必须是真的。使用此逻辑，如果 L>64，L<91 都为真，则 Q 为 L+32，将执行 convert(Lt,Qt)（两者都为真，第 3 行将不执行）。但是，如果 L>64，L<91 中的任何一个为假，则将执行第 3 行。所以传统的程序（如果你用 C 或 Java 编写上面的序言程序）将是

```
if(L>64 && L<91){
  Q=L+32;
  convert(Lt,Qt);
}
else if (the 1st of each list is same){
  convert(Lt,Qt);
} 
```

希望这可以帮助。（我不明白您的确切问题，但您似乎正在寻找如何编写条件。）

# java - 从 JasperReports 创建 SAX 解析器时出错

> ID：16005750
> 
> 赞同：0
> 
> 时间：2013-04-15T00:00:49.940
> 
> 标签：java, jasper-reports

我正在尝试使用 JasperReports 生成 pdf 报告，但在窗格中收到以下错误消息：

```
netstjasperrepoits.engine.JRRuntimeException: Error creating SAX parser 
```

我使用的代码是：

```
String report="C:\\Users\\Name\\Documents\\NetBeansProjects\\First_Report.jrxml";
JasperReport jr=JasperCompileManager.compileReport(report);
JasperPrint jp=JasperFillManager.fillReport(jr,null,conn);
JasperViewer.viewReport(jp); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T04:13:21.857

经过一番调查，我发现了问题和简单的解决方案，下载以下文件或从 jasper 报告 libs 文件夹 xercesImpl-2.7.0.jar 中提取它并将其放在您的“java.endorsed.dirs”中。

# ios - 如何检索尚未出现在屏幕上的静态 UITableViewCell

> ID：16005752
> 
> 赞同：2
> 
> 时间：2013-04-15T00:00:57.703
> 
> 标签：ios, objective-c, uitableview

我有`UITableView`一堆`UITableViewCell`代表菜单项的 static 。单元格都在情节提要中定义

出现时`UITableView`，我想为每个单元格设置详细文本，并为该菜单项设置一个值。

我已经标记了所有表格单元格，并在 中`viewDidLoad`检索了所有带有 的单元格`viewWithTag:`。但是，我只能检索屏幕上已经可见的单元格。

我知道静态表格单元格不会从 NIB 加载，直到它们出现在屏幕上。

有没有办法强制 a`UITableView`在开始时加载所有单元格？

我正在考虑`UITableViewDelegate:tableView:cellWillAppear`在屏幕外单元格出现时使用它们来初始化它们，但我宁愿没有单独的方法来初始化单元格。

* * *

*更新*

该表用作选择要查看的列表的菜单。我正在尝试显示列表项的计数。在每个菜单项（表格单元格）上，我将列表 ID 设置为 NIB 中的标记，以及列表的名称。

**按标签检索单元格**

```
- (void) setDetailLabelForList: (NSInteger)listId withString: (NSString*) string
{

    NSInteger tag = listId;
    UITableViewCell* cell = [self.tableView viewWithTag:tag];
    cell.detailTextLabel.text = string;
} 
```

另一种方法是通过索引路径检索静态单元格。这需要 listID 和索引路径之间的映射。但是，结果是相同的，因为检索尚未出现在屏幕上的静态单元格会返回 nil。

**按索引路径检索**

```
- (void) setDetailLabelForList: (NSInteger)listId withString: (NSString*) string
{
    NSString* path = [vocabListToUIMap objectForKey:[NSNumber numberWithInteger:listId]];
    if (path)
    {
        NSArray* pathElements = [path componentsSeparatedByString:@"."];
        NSInteger sectionNum = [[pathElements objectAtIndex:0] intValue];
        NSInteger itemNum = [[pathElements objectAtIndex:1] intValue];

        NSIndexPath* path = [NSIndexPath indexPathForRow:itemNum inSection:sectionNum];

        UITableViewCell* cell = [self.tableView cellForRowAtIndexPath:path];
        cell.detailTextLabel.text = string;
   }
} 
```

编辑：添加代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T01:12:59.713

为什么要依靠标签来确定哪些单元格是哪个单元格？执行 中的逻辑时使用 的`row`属性。如果您想在编译时指定每种类型，您可以为每种菜单类型创建子类，但我不建议这样做。`NSIndexPath``tableView:cellForRowAtIndexPath:``UITableViewCell`

如果您可以发布一些表格视图代码，我们可以看看一些方法来重新实现它，而无需`viewWithTag:`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T07:50:55.600

我通过使用保存在单元格上的标签设置解决了这个问题`UITableViewDelegate` `tableView:willDisplayCell:forRowAtIndexPath`。此时，静态单元已从 NIB 加载。

# iphone - OpenGL ES 2.0 如何正确设置 glVertexAttribPointers

> ID：16005753
> 
> 赞同：1
> 
> 时间：2013-04-15T00:01:19.570
> 
> 标签：iphone, ios, cocoa, opengl-es, opengl-es-2.0

我正在尝试使用基本的 XCode OpenGL ES 2.0 模板渲染一些自定义 3D 对象。我一直在阅读 Ray Wenderlich 关于 OpenGL ES 2.0 的博客以尝试入门。无论我做什么，我的简单“球体”都是这样的：

![在此处输入图像描述](https://i.stack.imgur.com/E6Wgy.png)

我相信我的问题在于设置缓冲区，如下所示：

```
glEnableVertexAttribArray(GLKVertexAttribPosition);
glVertexAttribPointer(GLKVertexAttribPosition, 3, GL_FLOAT, GL_FALSE, 8, BUFFER_OFFSET(6));
glEnableVertexAttribArray(GLKVertexAttribTexCoord0);
glVertexAttribPointer(GLKVertexAttribTexCoord0, 2, GL_FLOAT, GL_FALSE, 8, BUFFER_OFFSET(0));
glEnableVertexAttribArray(GLKVertexAttribNormal);
glVertexAttribPointer(GLKVertexAttribNormal, 3, GL_FLOAT, GL_FALSE, 8, BUFFER_OFFSET(3)); 
```

我有来自外部程序的顶点数据，如下所示：

```
// The vertex data is saved in the following format:
//  u0,v0,normalx0,normaly0,normalz0,x0,y0,z0
//  u1,v1,normalx1,normaly1,normalz1,x1,y1,z1
//  u2,v2,normalx2,normaly2,normalz2,x2,y2,z2
//  ...

#define Ball_vertexcount    559
#define Ball_polygoncount   960

float Ball_vertex[Ball_vertexcount][8]={
    {0.03125, 0.00000, -0.00000, 1.00000, 0.00000, 0.00000, 1.00000, 0.00000},
    {0.03125, 0.06250, 0.03806, 0.98079, 0.19132, 0.03806, 0.98079, 0.19134},
    {0.00000, 0.06250, -0.00000, 0.98079, 0.19507, 0.00000, 0.98079, 0.19509},
    {0.03125, 0.12500, 0.07465, 0.92389, 0.37530, 0.07466, 0.92388, 0.37533},
    ...

int Ball_index[Ball_polygoncount][3]={
    {0, 1, 2},
    {1, 3, 4},
    {4, 2, 1},
    {3, 5, 6},
    ... 
```

Apple 有一个偏移量定义，如下所示：

```
#define BUFFER_OFFSET(i) ((char *)NULL + (i)) 
```

我的 setupGl 函数包括：

```
glGenVertexArraysOES(1, &_vertexArray);
glBindVertexArrayOES(_vertexArray);

glGenBuffers(1, &_vertexBuffer);
glBindBuffer(GL_ARRAY_BUFFER, _vertexBuffer);
glBufferData(GL_ARRAY_BUFFER, sizeof(Ball_vertex), Ball_vertex, GL_STATIC_DRAW);

glGenBuffers(1, &_indexBuffer);
glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, _indexBuffer);
glBufferData(GL_ELEMENT_ARRAY_BUFFER, sizeof(Ball_index), Ball_index, GL_STATIC_DRAW);

// u0,v0,normalx0,normaly0,normalz0,x0,y0,z0

glEnableVertexAttribArray(GLKVertexAttribPosition);
glVertexAttribPointer(GLKVertexAttribPosition, 3, GL_FLOAT, GL_FALSE, 8, BUFFER_OFFSET(6));
glEnableVertexAttribArray(GLKVertexAttribTexCoord0);
glVertexAttribPointer(GLKVertexAttribTexCoord0, 2, GL_FLOAT, GL_FALSE, 8, BUFFER_OFFSET(0));
glEnableVertexAttribArray(GLKVertexAttribNormal);
glVertexAttribPointer(GLKVertexAttribNormal, 3, GL_FLOAT, GL_FALSE, 8, BUFFER_OFFSET(3));

glBindVertexArrayOES(0); 
```

我对 glVertexAttribPointers 的理解如下：

```
• The first parameter specifies the attribute name to set. We just use the pre- defined constants GLKit set up.
• The second parameter specifies how many values are present for each vertex. If you look back up at the Vertex struct, you'll see that for the position there are three floats (x,y,z) and for the color there are four floats (r,g,b,a).
• The third parameter specifies the type of each value - which is float for both Posi- tion and Color.
• The fourth parameter is always set to false.
• The fifth parameter is the size of the stride, which is a fancy way of saying "the size of the data structure containing the per-vertex data". So we can simply pass in sizeof(Vertex) here to get the compiler to compute it for us.
• The final parameter is the offset within the structure to find this data. We can use the handy offsetof operator to find the offset of a particular field within a struc-ture. 
```

我的 glkView 看起来像这样：

```
- (void)glkView:(GLKView *)view drawInRect:(CGRect)rect
{
    glClearColor(0.65f, 0.65f, 0.65f, 1.0f);
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

    // Render the object with GLKit
    [self.effect prepareToDraw];

    glBindVertexArrayOES(_vertexArray);

    glDrawElements(GL_TRIANGLES, sizeof(Ball_index)/sizeof(Ball_index[0]), GL_UNSIGNED_SHORT, 0);

} 
```

有人可以阐明我做错了什么吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T01:42:07.193

第五个参数，步幅的大小，应该以字节为单位。
`8*sizeof(float)`
最后一个参数offset应该是指向具体数据的指针，BUFFER_OFFSET应该是这样的
`#define BUFFER_OFFSET(a) a*sizeof(float)`

# python - 我的 Django 模板使用 if 有什么问题？

> ID：16005757
> 
> 赞同：0
> 
> 时间：2013-04-15T00:01:57.397
> 
> 标签：python, django, django-templates

```
{% for url in urls %}
    <a id="URL_url_{{ url.id }}" class="edit_rightclick"
      title="RIGHT click to edit."
      href="{% if ":" not in url.url %}http://{% endif %}{{ url.url }}">{{ url.url }}</a>
    <span class="delete" id="URL_{{ url.id }}">&amp;#10008;</span> &nbsp;
{% endfor %} 
```

启发式旨在预先设置部分或完整 URL（如 google.com）的值，假设有时人们会粘贴完整的浏览器 URL，有时人们会输入 google.com 而从不输入“http://” .

模板引擎抱怨 '{% if ":" not in url.url %}' 是无效语法。这里正确的语法/方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T00:36:50.703

对此使用过滤器怎么样：

```
href="{{ ulr.url|urlize }}" 
```

记得在构建自己的之前检查这里（查找 urlize）： [https ://docs.djangoproject.com/en/dev/ref/templates/builtins/](https://docs.djangoproject.com/en/dev/ref/templates/builtins/)

* * *

我认为更好的方法是将 URL 保存为管理员中的绝对 URL，并在显示链接时去除“ **http:// ”...**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T01:03:17.050

作为使用内联模板语句或模板过滤器的替代方法，您可以在模型上创建一个方法/属性来处理 url 创建逻辑。假设您的 Url 是一个模型：

```
class Url(models.model):
    url = model.TextField()

    @property
    def full_url(self):
        if ":" not in url.url:
            ....
        return full_url 
```

并直接在模板中使用

```
 href="{{ url.full_url }}">{{ url.url }}</a> 
```

模板保持干净且没有“业务逻辑”，这可能是一个很好的方法，例如，如果您有设计师创建 html/css 模板

编辑：这也使您可以在 full_url 属性中执行更高级的逻辑（例如检查垃圾邮件、损坏的链接等）

# perl - 数组文字上的 perl 智能匹配

> ID：16005758
> 
> 赞同：2
> 
> 时间：2013-04-15T00:02:01.570
> 
> 标签：perl

```
slu@new-host:~ 19:59:33
❯ perl -e "print (2 ~~ (1, 2, 3))"
slu@new-host:~ 19:59:39
❯ perl -e "my @a = (1, 2, 3); print (2 ~~ @a)"
1 
```

诚然，第二种形式并不比第一种简洁得多，但我很想知道为什么第一种会失败。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T00:46:33.340

`1,2,3`是列表文字或列表运算符，而不是数组文字。标量上下文中的列表运算符返回其最后一个操作数的计算结果，因此

```
print (2 ~~ (1, 2, 3)) 
```

方法

```
print(2 ~~ 3)  # Plus two void context warnings 
```

鉴于

```
print (2 ~~ @a) 
```

是语法糖

```
print(2 ~~ \@a) 
```

你可以使用

```
print(2 ~~ do { my @a = (1,2,3); \@a }) 
```

或接近等效但更短的

```
print(2 ~~ [1,2,3]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T00:02:54.823

看起来这行得通

```
slu@new-host:~ 20:00:31
❯ perl -e "print (2 ~~ [1, 2, 3])"
1 
```

# magento - 警告：gzuncompress() 错误

> ID：16005762
> 
> 赞同：0
> 
> 时间：2013-04-15T00:02:55.080
> 
> 标签：magento, caching, gzip

我正在为 Magento使用[这个缓存扩展：](http://www.magentocommerce.com/magento-connect/zoom-full-page-cache-1742.html)

问题是主页会时不时地返回为空白页。当我检查日志时，出现此错误：

> `2013-04-14T10:44:23+00:00 ERR (3): Warning: gzuncompress() [<a href='function.gzuncompress'>function.gzuncompress</a>]: data error in /public_html/app/code/local/Ezapps/Zoom/Helper/Data.php on line 499`

这是错误所指的代码：

```
public function decompress($ajax_state) {
    return gzuncompress(stripslashes(base64_decode($ajax_state)));      
} 
```

任何想法如何解决这个问题？

# java - 我对大O感到困惑

> ID：16005764
> 
> 赞同：0
> 
> 时间：2013-04-15T00:02:59.967
> 
> 标签：java, big-o

我正在尝试为今晚到期的项目的一部分掌握 Big O 的想法，我不知道我是否正确地考虑了这一点......

该项目包括我们为数学运算编写迭代和递归解决方案。

这里有一些方法。

```
public int inc(int n)
{
    n = n + 1;
    return n;
}
public int dec(int n)
{
    n = n - 1;
    return n;
}

public int add(int lhs, int rhs)
{
   int sum = lhs;    
   while (rhs > 0) {
        sum = inc(sum);
        rhs = dec(rhs);
    } // while
    return sum;
}

public int fac(int num)
{
    int ans = num;
    while(num > 1)
        {
            ans = mul(ans, dec(num));
        }
    return ans;
}

public int div(int lhs, int rhs) throws ArithmeticException
{
    int quot = 0;
    while (lhs > 0)
        {
            lhs = sub(lhs,rhs);
    if(lhs < rhs)
                {
        quot = 0;
                }   
            else
                {
                    quot = inc(quot);
              }
        }
    return quot;
}

public int lshift(int lhs, int rhs)
{
    return mul(lhs,pow(2,rhs));       
} 
```

所有这些都是 O(n) 吗？还是只是 inc、dec 和 add？

对于调用其他方法的行（如 mul - multiply - 在 fac 和 lshift 中），这是恒定时间还是再次 n，使得 O(n^2)？有人可以解释一下吗？

我将如何处理递归方法？

```
public int  mul(int lhs, int rhs)
{
    if (rhs == 0 || lhs == 0) return 0;
    else if(rhs == 1) return lhs;
    return add(lhs, mul(lhs, dec(rhs)));
} 
```

除非有人要求其他人，否则我将仅保留 1 个递归示例。if 和 else if 分别被认为是常数时间，对吗？然后返回调用各种其他递归方法，以及它本身（显然），我真的不知道从哪里开始。

有人可以尝试简单地解释一下吗？

编辑：添加战俘

```
public int pow(int lhs, int rhs)
{
    int ans = lhs;
    for(int i = rhs; i > 1; i--)
    {
    ans = mul(ans,lhs);
    }
    return ans;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T00:19:40.540

Big-Oh 背后的想法是它是特定算法的平均运行时间。在分析运行时，您正在寻找关键的东西，例如：

*   正在使用的参数与正在使用它进行的操作的关系
*   代码的“关键部分”与传入的参数的关系

您还需要寻找其他一些东西，例如最佳和最坏情况的行为。

现在，谈谈你的方法。

*   两者`inc`和`dec`都是恒定的时间。它们不再需要根据传入参数的大小来执行。

*   `add`绑定到 的大小`rhs`，因为您为 中的每个值递增一步`rhs`。所以那个运行时间是 O(n).*

*   `mul`，根据您的递归示例，具有三种情况：两个基本情况和一个迭代情况。假设基本案例在恒定时间内运行，但由于存在迭代案例，它超过了基本案例的运行时间。

    在这种情况下，您会受到`rhs`传入大小的限制，因此它将在 O(n) 时间内运行。

*   `fac`绑定到`num`传入的大小。它将是 O(n) 运行时。

*   `div`绑定到`lhs`，它将在 O(n) 运行时。

^(*：说说两个数字相加的一种*奇怪*方法……)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T00:20:29.980

`inc`并且`dec`是 O(1)，因为它们总是可以在恒定数量的操作中完成，并且它们不依赖于您作为参数传递的值。

`add`，例如，取决于您作为参数传递的数字，所以如果我们认为这个数字是我们的“订单”，`add`则为 O(n)。

简单地说：作为参数传递的值越高，需要执行的操作就越多。由于这种增加是线性的（粗略地说，如果增加 100，您将增加相同数量级的操作）。

您的`mul`实现也将在 O(n) 时间内运行，因为这是您拥有的更“昂贵”操作的成本，`add`.

您需要了解的是 Big-O 表示法的含义：算法运行时间与输入大小变化之间的关系。

如果您牢记这一点，您将更容易计算出方法的成本。

# c++ - 枚举窗口？

> ID：16005768
> 
> 赞同：1
> 
> 时间：2013-04-15T00:03:21.027
> 
> 标签：c++, c, dll

我正在制作一个需要 Skype 窗口中的一些信息的应用程序，我找到了主窗口和子窗口。我使用 WM_GETTEXT 并在消息框中显示缓冲区。换了几次联系人后好像不行了。有人能猜出为什么几秒钟后会中断吗？

```
case 2000:
  //Make options window here
  int len;
  char* buffer;
  HWND hWnd; //Main Window
  HWND chat; //Tconversation form, Caption is the contact's name.
  hWnd = FindWindow(L"tSkMainForm", NULL); //tSkMainForm is SKYPE
  chat = FindWindowEx(hWnd, NULL, L"TConversationForm", NULL); //GetWindow(hWnd,GW_CHILD);
  if (IsWindowVisible(chat)) {
    len = SendMessage(chat, WM_GETTEXTLENGTH, 0, 0);
    buffer = new char[len];
    SendMessageW(chat, WM_GETTEXT, (WPARAM) len + 1, (LPARAM) buffer);
    MessageBox(HWND_DESKTOP, (LPCWSTR) buffer, L"Testing", MB_OK);
  } else MessageBox(HWND_DESKTOP, L"We cannot find the window.", L"About Testing", MB_OK);
break; 
```

所以只是给你一个事件的时间表，这就是发生的事情。

我将我的 DLL 注入 Skype，它创建了一个菜单，一切正常。当我按下新创建的按钮（ID 2000）时，我想获取联系人的姓名。Spy++ 告诉我“TConversationForm”的标题是联系人的姓名。这适用于前几个联系人，但随后 Skype 崩溃。

我知道我可以使用 Skype API，但我更多地将其用作学习目的，而不是制作工作工具。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T00:24:01.337

您似乎在说谎缓冲区的长度。您分配 len 个字符，然后说缓冲区的大小为 len+1。您需要分配 len+1 个字符。

Windows 上的 Skype 是一个 Delphi 应用程序，使用 VCL 控件构建。VCL 使用的设计有时会导致在窗体的生命周期内重新创建窗口。换句话说，窗口句柄可以更改，您可能会留下一个陈旧的句柄。这是另一种似是而非的失败模式。

另一种可能的故障模式是，您正在以应用程序不知道的方式从非 GUI 线程中弄乱 GUI。很有可能在 VCL 背后添加一个菜单就足以导致失败。

您不应该将 HWND_DESKTOP 用作窗口所有者，并且您似乎泄漏了该文本缓冲区。

我认为你在这条道路上成功的几率很低。非常低。我建议您使用受支持的自动化界面。

# javascript - 使用 JavaScript 的滑动菜单

> ID：16005770
> 
> 赞同：1
> 
> 时间：2013-04-15T00:03:35.537
> 
> 标签：javascript, menu, sliding

我有点卡住了...

看看这个：

[http://jsfiddle.net/matiitas/Lgtv5/1/](http://jsfiddle.net/matiitas/Lgtv5/1/)

您可以在下面找到部分 JavaScript 代码：

```
var stopPosition = 860;
var slidingDiv = "";
var slidingDiv2 = "";

window.onload = function () {
    document.getElementById("option").onclick = slideIt;
    slidingDiv = document.getElementById("content");
    document.getElementById("back").onclick = slideIn;

    document.getElementById("option2").onclick = slideIt2;
    slidingDiv2 = document.getElementById("content2");
    document.getElementById("back2").onclick = slideIn2;
};

function slideIt() {
    if (parseInt(slidingDiv.style.left) < stopPosition) {
        slidingDiv.style.left = parseInt(slidingDiv.style.left) + 2 + "px";
        setTimeout(slideIt, 1);
        active = true;
    }
} 
```

我正在使用 javascript 创建一个滑动菜单，但我遇到了 3 个主要问题：

1.  我怎样才能重用代码，这样我就不必一遍又一遍地“重复”这些功能？
2.  我希望在单击菜单“服务”时隐藏菜单“主页”，反之亦然。
3.  我希望有两种行为......当它第一次单击以滑动内容时，当它再次单击以隐藏内容时......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T00:14:50.720

1 - 像这样的东西？

```
function slideIt(divToSlide) {
    if (parseInt(divToSlide.style.left) < stopPosition) {
        divToSlide.style.left = parseInt(divToSlide.style.left) + 2 + "px";
        setTimeout(slideIt, 1);
        active = true;
    }
} 
```

不确定主动在做什么。

2 - 将所有动画元素推入一个数组。当你展开一个，折叠其他的。

```
function slideIt(divToSlide) {
    for(var d in slidingDivs) {
        if(d != divToSlide) collapseDiv(d);
    }

    ...
} 
```

3 - 有几种方法可以解决这个问题。跟踪状态并检查单击处理程序中的状态。

# c# - 如何将 Quine-McCluskey 算法与复合规范模式结合起来

> ID：16005771
> 
> 赞同：2
> 
> 时间：2013-04-15T00:03:38.497
> 
> 标签：c#, algorithm, design-patterns, boolean-logic, boolean-expression

我想将[Quine-McCluskey 算法](http://en.wikipedia.org/wiki/Quine%E2%80%93McCluskey_algorithm)与[Composite Specification Pattern](http://en.wikipedia.org/wiki/Specification_pattern)结合起来。

首先，让我们考虑一下基础知识，即 C# 中的规范模式：

```
public interface ISpecification
{
    bool IsSatisfiedBy(object candidate);
    ISpecification And(ISpecification other);
    ISpecification Or(ISpecification other);
    ISpecification Not();
}

 public abstract class CompositeSpecification : ISpecification 
 {
    public abstract bool IsSatisfiedBy(object candidate);

    public ISpecification And(ISpecification other) 
    {
        return new AndSpecification(this, other);
    }

    public ISpecification Or(ISpecification other) 
    {
        return new OrSpecification(this, other);
    }

    public ISpecification Not() 
    {
       return new NotSpecification(this);
    }
}

public class AndSpecification : CompositeSpecification 
{
    private ISpecification One;
    private ISpecification Other;

    public AndSpecification(ISpecification x, ISpecification y) 
    {
        One = x;
        Other = y;
    }

    public override bool IsSatisfiedBy(object candidate) 
    {
        return One.IsSatisfiedBy(candidate) && Other.IsSatisfiedBy(candidate);
    }
}

public class OrSpecification : CompositeSpecification
{
    private ISpecification One;
    private ISpecification Other;

    public OrSpecification(ISpecification x, ISpecification y) 
    {
        One = x;
        Other = y;
    }

    public override bool IsSatisfiedBy(object candidate) 
    {
        return One.IsSatisfiedBy(candidate) || Other.IsSatisfiedBy(candidate);
    }
}

public class NotSpecification : CompositeSpecification 
{
    private ISpecification Wrapped;

    public NotSpecification(ISpecification x) 
    {
        Wrapped = x;
    }

    public override bool IsSatisfiedBy(object candidate) 
    {
        return !Wrapped.IsSatisfiedBy(candidate);
    }
} 
```

现在假设我有一个 MacroSpecification 和一些 MicroSpecification：

```
public class MacroSpecification : CompositeSpecification
{
    MicroSpecification1 Spec1 = new MicroSpecification1();
    MicroSpecification2 Spec2 = new MicroSpecification2();
    MicroSpecification3 Spec3 = new MicroSpecification3();
    MicroSpecification4 Spec4 = new MicroSpecification4();
    public override bool IsSatisfiedBy (object candidate)
    {
        if (candidate is int)
        {
            return Spec1.And(Spec2).And(Spec3).And(Spec4).IsSatisfiedBy(candidate);
        }
    }
}

public class MicroSpecification1 : CompositeSpecification
{
    public override bool IsSatisfiedBy (object candidate)
    {
        if (candidate is int)
        {
            return (candidate > 100);
        }
        return false;
    }
}

public class MicroSpecification2 : CompositeSpecification
{
    public override bool IsSatisfiedBy (object candidate)
    {
        if (candidate is int)
        {
            return (candidate > 300);
        }
        return false;
    }
}

public class MicroSpecification3 : CompositeSpecification
{
    public override bool IsSatisfiedBy (object candidate)
    {
        if (candidate is int)
        {
            return (candidate < 1000000);
        }
        return false;
    }
}

public class MicroSpecification4 : CompositeSpecification
{
    public override bool IsSatisfiedBy (object candidate)
    {
        if (candidate is int)
        {
            return (candidate < 500000);
        }
        return false;
    }
} 
```

对于简化的、等效的 MacroSpecification IsSatisfiedBy 方法，我真的只需要 MicroSpecification4 和 MicroSpecification2。

所以我的问题是，有没有办法使用 Quine-McCluskey 将宏规范 IsSatisfiedBy 语句从四个规范简化为两个规范（或等效的东西）？

一般来说，必须给复合规范模式（并且不失一般性）模式设计提供某种“智能”会很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T00:26:59.770

您不能使用 Quine-McCluskey 进行简化，因为您正在寻找的简化需要知道 that`MicroSpecification2 => MicroSpecification1`和 that `MicroSpecification4 => MicroSpecification3`。QM 仅适用于简化独立布尔变量的方程。

您可以根据 的最后 20 位重写您的规范`candidate`，然后使用 QM 来简化 22 个布尔变量中方程的混沌： 的 20 个低位`candidate`；如果设置了任何剩余位，`candidate`则为 true 的单个布尔值，并且当当且仅当是 时为 true 的单个布尔`candidate`值`int`。由此产生的简化将适用于芯片设计，但可能不适用于任何其他目的。对不起。

# ios - 异步加载 - UITableView 和 Firebase

> ID：16005773
> 
> 赞同：2
> 
> 时间：2013-04-15T00:04:18.807
> 
> 标签：ios, uitableview, firebase

我正在开发一个从 Firebase 加载列表数据并填充 UITableView 的项目。虽然我看到从我的 firebase 实例调用快照，但它们不会填充表，而本地同步 NSMutableArray 显示内容。如何让我的 UITableView 等待 firebase 数据到达那里？

这是代码：

```
 - (void)viewDidLoad
{
    [super viewDidLoad];
    handles = [[NSMutableArray alloc] initWithObjects:@"Item No. 1", @"Item No. 2", @"Item No. 3", @"Item No. 4", @"Item No. 5", @"Item No. 6", nil];
    [self loadDataFromFirebase];
    NSLog(@"%lu", (unsigned long)[handles count]);
    self.sampleTableView.delegate = self;
    self.sampleTableView.dataSource = self;
}

-(void)loadDataFromFirebase
{
    Firebase* listRef = [[Firebase alloc] initWithUrl:@"https://wheresthatfoodtruck.firebaseIO.com/foodtrucks"];
    [listRef observeEventType:FEventTypeChildAdded withBlock:^(FDataSnapshot *snapshot) {
        NSLog(@"%@", snapshot.value);
        [handles addObject:snapshot.value];
    }];
} 
```

Handles 打印出项目编号，但如果我删除该测试数据，[Handles count] 变为零，并且 UITableView 的加载速度比从 Firebase 获取数据要快。非常感谢 - 我真的很喜欢 Firebase，它是一个很棒的平台，我希望我能解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T22:58:52.770

使用 Firebase，您必须记住所有代码（尤其是实时更新的块）都是异步的。例如，在原始问题的评论以及解决方法中，代码如下：

```
[self loadDataFromFirebase];
[self.sampleTableView reloadData]; 
```

...无法从上到下阅读；异步块中正在填充的数据（或正在更新的视图）与被调用之间将存在**竞争条件；**`reloadData`可能细胞连接不稳定，或者 GCD 正在优化一件事而不是另一件事，等等。

使用 Firebase 时要记住的第二件事是，对于像这样的事件`child_added`，可能永远不会有任何“完整”的概念——数据完全有可能不断变化和更新；再说一次，人们什么时候会被叫到`reloadData`？马上？第一个孩子之后？最后一个孩子？这样做的含义是，如果添加了新数据，即使是变通方法也会产生您可能没有预料到的行为（即看起来好像数据没有出现，因为`reloadData`永远不会再次被调用。）

您可以在此处采用的一种方法是在数据更改时直接更新您的视图；因此，您的块将如下所示：

```
[listRef observeEventType:FEventTypeChildAdded withBlock:^(FDataSnapshot *snapshot) {
  NSLog(@"%@", snapshot.value);
  [handles addObject:snapshot.value];
  [self.sampleTableView reloadData];
}]; 
```

另一种方法可能是使用 Firebase 专门更新您的内部模型并使用常规的 Objective-C 方法（KVO、Notifications、MVC 等）来分离您的数据和视图关注点，以便在直接更改模型之外重新呈现视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T17:10:00.213

弄清楚了。我没有尝试在 viewDidLoad 中查询数据库，在这种情况下，视图已经作为框架出现，而是将查询移到了 nib 被加载但框架变得可见之前的时间。这是代码，扩展：

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    //link the CloudViewController with its View
    NSBundle *appBundle = [NSBundle mainBundle];

    self = [super initWithNibName:@"FoodTruckViewController" bundle:appBundle];
    if (self) {
        self.sampleTableView.delegate = self;
        self.sampleTableView.dataSource = self;
        [self loadDataFromFirebase];
        [self.sampleTableView reloadData];
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    [self.sampleTableView reloadData];
}

-(void)loadDataFromFirebase
{
    handles = [[NSMutableArray alloc] init];
    Firebase* listRef = [[Firebase alloc] initWithUrl:@"https://wheresthatfoodtruck.firebaseIO.com/foodtrucks"];
    [listRef observeEventType:FEventTypeChildAdded withBlock:^(FDataSnapshot *snapshot) {
        NSLog(@"%@", snapshot.value);
        [handles addObject:snapshot.value];
    }];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [handles count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }
[cell.textLabel setText:[handles objectAtIndex:indexPath.row]];

    return cell;
}

#pragma mark - Table view delegate

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Navigation logic may go here. Create and push another view controller.
    /*
     <#DetailViewController#> *detailViewController = [[<#DetailViewController#> alloc] initWithNibName:@"<#Nib name#>" bundle:nil];
     // ...
     // Pass the selected object to the new view controller.
     [self.navigationController pushViewController:detailViewController animated:YES];
     */
}

@end 
```

此版本的代码会在表格可见之前填充表格，但不会实时更新表格的更改。我认为下一步将是在 viewDidLoad 方法中调用来自 firebase 的 ChildChanged 函数，以保持对 firebase 端的任何更改的更新。

# xcode - 按钮单击操作未在 xcode 中触发

> ID：16005774
> 
> 赞同：0
> 
> 时间：2013-04-15T00:04:27.443
> 
> 标签：xcode, macos

我在 xcode 中创建了一个单视图应用程序。我在 mainstoryboard 中添加了一个按钮和一个文本框。我添加了一个内部事件。但是当我运行模拟器时，当我单击按钮时，由于某种原因，与 touch inside 事件关联的函数/IBAction 没有被触发。

关于为什么会发生这种情况的任何线索？

我正在运行 xcode 4.6。

为了任何想查看该项目的人的利益，[http://www.filedropper.com/archive_71](http://www.filedropper.com/archive_71)

这是没有被击中或解雇的 IBAction 代码。

```
- (IBAction)changeGreeting:(id)sender {
    self.userName = self.textField.text;

    NSString *nameString = self.userName;
    if(([nameString length] == 0)){
        nameString = @"World";
    }

    NSString *greeting =[[NSString alloc] initWithFormat:@"Hello, %@!", nameString];
    self.label.text = greeting;

} 
```

# sharepoint-2013 - SharePoint 2013 SharePoint 托管的远程事件接收器

> ID：16005777
> 
> 赞同：0
> 
> 时间：2013-04-15T00:04:49.760
> 
> 标签：sharepoint-2013, event-receiver

我在 SharePoint 2013 中运行 SharePoint 托管的远程事件接收器。

我对 SharePoint 托管应用程序的概念感到很困惑，MSDN 提到应用程序逻辑都在用户的浏览器中运行，这是否意味着当我们单击 SharePoint 列表时，远程事件接收器应用程序实际上是在我的浏览器中加载的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-18T08:09:03.270

远程事件接收器在 SharePoint 托管中不可用，尽管可以在 VS 中创建。您需要创建提供商托管的应用程序来实现这一点。

# php - 通过从 MySQL 获取 id 将 $_SESSION['name'] 更改为 $_SESSION['id]

> ID：16005778
> 
> 赞同：0
> 
> 时间：2013-04-15T00:04:57.847
> 
> 标签：php, mysql, pdo

我有一个以会话电子邮件开头的登录表单。现在，由于我希望能够通过表单更新电子邮件地址，而不会破坏会话，因此我需要将会话更改为 id。问题是它不会将 id 值发送给会话，它只给我值 1，如下所示：www.mysite.com/profile.php?uid=1 而不是返回真实的 ID 号。

有任何想法吗？

```
<?php
if(isset($_SESSION['email'])){
    $_SESSION['uid'] = fetch_user_id($_SESSION['email']);
    header("Location: profile.php?uid=" . $_SESSION['uid']);
    die();
}
?> 

<?php 
function fetch_user_id($email){
    global $db;
    $query = $db->query("SELECT id FROM user WHERE email='{$_SESSION['email']}'");
    $row = $query->fetch(PDO::FETCH_ASSOC);
    return true;
} 
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T03:18:37.857

那是因为您正在`true`从`fetch_user_id`函数返回值。为了获得正确的结果，您需要从`$row`数组中返回用户 ID。

```
function fetch_user_id($email) {
    global $db;
    $query = $db->query("SELECT id FROM user WHERE email='{$_SESSION['email']}'");
    $row = $query->fetch(PDO::FETCH_ASSOC);
    return $row['uid']; // whatever your user id column is called
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T00:08:24.260

`$row`正在存储结果，即找到的结果的（数组），你想要的是`$row['id']`

# javascript - 如何获得半星评价

> ID：16005780
> 
> 赞同：0
> 
> 时间：2013-04-15T00:05:09.877
> 
> 标签：javascript, jquery

我正在创建一个星级审查机制。现在我的问题是如何捕捉半星？这就是我正在做的添加一颗星并更改显示每个类别有多少颗星的栏。这很好用。感谢 Barmar 昨晚修复了这个错误。但是半星真的让我很困扰。jquery 看起来像这样

```
$('.star').click(function () {
        var num = parseInt($('.likes').eq($(this).index('.star')).text());
        $('.likes').eq($(this).index('.star')).text(num + 1);

        $(this).addClass('active').off('click');
        $(this).prevAll().addClass('active').off('click');
        checkNumber(num+1);

    }); 
```

这是小提琴 [http://jsfiddle.net/sghoush1/VU3LP/54/](http://jsfiddle.net/sghoush1/VU3LP/54/)

当我这样做时

```
$('.likes').eq($(this).index('.star')).text(num + .5); 
```

我失去了索引

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T04:04:21.340

我在这里做了很多改动，但基本上我做了10个半星来制作5个等级的星星。当用户点击一半时，相应的星级总数会增加 0.5 或 1.0（取决于点击了哪一半星）。

我删除了类似于您的单击事件，但更好的方法是允许用户再次单击，然后从第一次单击中撤消数学运算。您还会注意到一些常规代码清理等。

这是缩短的相关 HTML

```
<div id="stars">
    <div class="star leftHalf"></div>
    <div class="star rightHalf"></div>
[ ... ]

<div class="barHolder">
    <table>
        <tr>
            <td>1 star</td>
            <td class="bar"></td>
            <td class="likes">20</td>
        </tr>
        [ ... ] 
```

CSS

```
.star {
    height:20px;
    width:10px;
    float:left;
    margin-right:5px;
    cursor:pointer;
}
.star.leftHalf{
    margin-right:0px;
} 
```

完整的 JavaScript / jQuery

```
var baractive = $('<div class="barActive"></div');
baractive.appendTo('.bar');

function checkNumber() {
    $(".likes").each(function () {
        var valueCurrent = parseFloat($(this).text()),
            barActive = $(this).prev(".bar").children(".barActive");

        if (isNaN(valueCurrent) || valueCurrent <= 20) {
            barActive.css('width', 30);
        } else if (valueCurrent <= 60) {
            barActive.css('width', 80);
        }else if (valueCurrent <= 70) {
            barActive.css('width',120);
        }
    });
}
checkNumber();

$('.star').click(function () {
    var starIndex = $("#stars div").index( $(this) ), // current half clicked; 0-9
        starLevel = Math.ceil( ( starIndex+1 )/2 )-1, // current star clicked; 0-4
        valCur = parseFloat( $('.likes').eq(starLevel).text() ), // current likes value
        isHalfStar = starIndex % 2 ? false : true, // is this a half click (left side)?
        valNew = valCur + (isHalfStar ? 0.5 : 1.0); // new likes value

    $('.likes').eq(starLevel).text(valNew);

    $(".star").removeClass("active").off("click");
    $(this).addClass('active');
    $(this).prevAll().addClass('active');
    checkNumber();

}); 
```

和工作的 jsFiddle [http://jsfiddle.net/daCrosby/VU3LP/64/](http://jsfiddle.net/daCrosby/VU3LP/64/)

# excel - 如何将渐变颜色分配给 Excel 列？

> ID：16005781
> 
> 赞同：1
> 
> 时间：2013-04-15T00:05:28.253
> 
> 标签：excel

我需要为我的 Excel 列中的单元格分配不同的颜色，例如第一个单元格是白色的，第二个单元格有点暗，第三个比前一个单元格更暗，等等。这是 .png 文件的链接：[https ://dl.dropboxusercontent.com/u/41007907/gradientColumn.png](https://dl.dropboxusercontent.com/u/41007907/gradientColumn.png)

我怎样才能快速做到这一点？有快捷指令吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-15T01:26:02.973

如果您正在寻找 VBA 解决方案，请使用单元格的`.Interior.TintAndShade`属性。

这是一个快速宏，您可以使用它根据列中的单元格数计算渐变填充。这应该应用一个均匀的渐变，例如：

![渐变填充单元格](https://i.stack.imgur.com/4cCbT.jpg)

```
Sub Macro3()

Dim firstCell As Range 'the first cell, and the cell whose color will be used for all others.
Dim cellColor As Long 'the cell color that you will use, based on firstCell
Dim allCells As Range 'all cells in the column you want to color
Dim c As Long  'cell counter
Dim tintFactor As Double 'computed factor based on # of cells.

Set firstCell = Range("A1")
cellColor = firstCell.Interior.Color

Set allCells = Range("A1:A10")

For c = allCells.Cells.Count To 1 Step -1
    allCells(c).Interior.Color = cellColor
    allCells(c).Interior.TintAndShade = _
        (allCells.Cells.Count - (c - 1)) / allCells.Cells.Count

Next

End Sub 
```

**编辑**以填充从浅到深的渐变。如果您喜欢黑暗而不是明亮，那么请执行以下操作：

```
allCells(c).Interior.TintAndShade = _
        (c-1) / allCells.Cells.Count 
```

# javascript - 有没有一种简单的方法可以将这两条线变成一条线？

> ID：16005784
> 
> 赞同：0
> 
> 时间：2013-04-15T00:06:16.613
> 
> 标签：javascript, object, object-literal

这是两行：

```
pixels[x-left] = {};
pixels[x-left][y] = true; 
```

如果可以将两者组合成一个表达式，这将极大地允许我清理一些代码。

我的第一次尝试看起来像这样：

```
pixels[x-left] = { y: true }; 
```

但是，字母`y`被用作索引而不是 的值`y`，这是不行的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T00:16:33.507

我将首先说应该首选 Bergi 的解决方案，但如果您不介意破坏代码的可读性：

```
(pixels[x-left] = {})[y] = true; 
```

[**小提琴**](http://jsfiddle.net/yWUuE/1/)

这作为[赋值表达式](http://es5.github.io/x11.html#x11.13.1)返回分配的值（在这种情况下，是对分配对象的引用）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T00:09:54.647

不，~~没有~~干净的*。对象字面量中的任何属性名称都按字面意思解释。

一种出路是某种辅助功能，例如

```
Object.set = function(o, p, v) { o[p] = v; return o; };

pixels[x-left] = Object.set({}, y, true); 
```

但是每个阅读您的代码的人都需要了解`Object.set`.

[* 在@Fabricio 的回答之后，我不能再说“不可能”了 :-)]

# php - 使用 CI 活动记录在数据库中动态插入值？

> ID：16005785
> 
> 赞同：0
> 
> 时间：2013-04-15T00:06:20.337
> 
> 标签：php, codeigniter, activerecord, codeigniter-2

我有从外部数据库获取数据的功能，我得到特定的电影信息，例如 id、名称、流派等。现在，如果电影流派是例如动画，我只想将这一种流派添加到数据库中。现在我可以使用 isset 解决问题，但是我将拥有类型为 null 的 db 条目，我想避免这种情况。解决这个问题的最佳方法是什么？使用 foreach 循环？

```
$records = array(
    array('film_id' => $movies['id'], 'genre_id' => $movies['genre'][0]),
    array('film_id' => $movies['id'], 'genre_id' => $movies['genre'][1]),
    array('film_id' => $movies['id'], 'genre_id' => $movies['genre'][2])
);

$this->db->insert_batch('film_genre', $records); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T14:28:45.673

You can also use [array_filter](http://php.net/manual/en/function.array-filter.php)

```
$arr = array(

    array("id"=>3, "genre"=>"action"),
    array("id"=>13, "genre"=>"comedy"),
    array("id"=>23, "genre"=>"action"),
    array("id"=>53, "genre"=>"comedy"),
    array("id"=>63, "genre"=>"drama"),
    array("id"=>73, "genre"=>"action"),
    array("id"=>83, "genre"=>"drama"),

);

function genre($var)
{
    if($var['genre'] == 'action')
    {
        return $var;
       // you can also do the insert here like $this->db->insert();
    }
}

$filtered = array_filter($arr, "genre");

print_r($filtered) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T14:50:17.983

您可以使用 Mysql 的`GROUP BY`函数对获取的数据进行分组

# asp.net - ASP.net 必填字段验证器 VisualStudio 2012

> ID：16005789
> 
> 赞同：6
> 
> 时间：2013-04-15T00:07:09.090
> 
> 标签：asp.net

我正在用 ASP.net c# 开发一个项目。我希望RequiredFieldValidator 检查我的文本框。我正在添加验证器，它在 Visual Studio 2010 中工作得非常好。但是一旦我做了同样的事情，完全相同的事情，它在 Visual Studio 2012 中不起作用。我收到这个错误：

```
[InvalidOperationException: WebForms UnobtrusiveValidationMode requires a ScriptResourceMapping for 'jquery'. Please add a ScriptResourceMapping named jquery(case-sensitive).]
   System.Web.UI.ClientScriptManager.EnsureJqueryRegistered() +2171326
   System.Web.UI.WebControls.BaseValidator.RegisterUnobtrusiveScript() +10
   System.Web.UI.WebControls.BaseValidator.OnPreRender(EventArgs e) +9576177
   System.Web.UI.Control.PreRenderRecursiveInternal() +83
   System.Web.UI.Control.PreRenderRecursiveInternal() +168
   System.Web.UI.Control.PreRenderRecursiveInternal() +168
   System.Web.UI.Control.PreRenderRecursiveInternal() +168
   System.Web.UI.Control.PreRenderRecursiveInternal() +168
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +974 
```

致以我的问候...

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-15T00:57:47.983

看[这里](http://connect.microsoft.com/VisualStudio/feedback/details/735928/in-asp-net-web-application-visual-basic-the-requiredfieldvalidator-doest-work.)

看起来您必须删除此行：

```
<appSettings>
    <add key="ValidationSettings:UnobtrusiveValidationMode" value="WebForms" />
</appSettings> 
```

或者改成这样：

```
<appSettings>
    <add key="ValidationSettings:UnobtrusiveValidationMode" value="None"/>
</appSettings> 
```

这将为您禁用它。

或者，您可以将这样的内容添加到您的 Global.asax

```
ScriptManager.ScriptResourceMapping.AddDefinition("jquery", new ScriptResourceDefinition {
     Path = "~/scripts/jquery-1.4.1.min.js",
     DebugPath = "~/scripts/jquery-1.4.1.js",
     CdnPath = "http://ajax.microsoft.com/ajax/jQuery/jquery-1.4.1.min.js",
     CdnDebugPath = "http://ajax.microsoft.com/ajax/jQuery/jquery-1.4.1.js"
}); 
```

希望这能让你摆脱困境！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-07-29T02:11:45.197

```
protected void Page_Load(object sender, EventArgs e)
{
    this.UnobtrusiveValidationMode =System.Web.UI.UnobtrusiveValidationMode.None;
} 
```

只需复制并粘贴到 C# 代码中

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-11-21T10:14:22.240

```
<appSettings>
    <add key="ValidationSettings:UnobtrusiveValidationMode" value="None"/>
</appSettings> 
```

永远不要使用 jquery 脚本，它每次都会转到服务器端，这会对您的应用程序性能产生不良影响，只需在 web 配置中添加标签（上面提到）

在配置标签内

# php - 如何从数组中查询 Wordpress 自定义字段？

> ID：16005791
> 
> 赞同：-1
> 
> 时间：2013-04-15T00:07:15.723
> 
> 标签：php, wordpress

我`meta_query`在 Wordpress 中遇到问题。第一个例子工作正常：

```
$args = array(
    'post_type' => 'my_post',
    'meta_query' => 
    array(
        array(
            'key' => 'my_field', 
            'value' => '50', 
            'compare' => 'LIKE',
        ),
    ),    
);

$query = new WP_Query( $args ); 
```

但是我想要做的，如下所示，在 Wordpress 文档中，不起作用。

```
$args = array(
    'post_type' => 'my_post',
    'meta_query' => 
    array(
        array(
            'key' => 'my_field', 
            'value' => array('50','60'), 
            'compare' => 'IN',
        ),
    ),    
);

$query = new WP_Query( $args ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T02:10:43.657

```
$args = array(
    'post_type' => 'my_post',
    'meta_query' => 
    array(
        array(
            'key' => 'my_field', 
            'value' => array(50,60), 
            'type' => 'numeric',
            'compare' => 'IN'
        ),
    ),    
);

$query = new WP_Query( $args ); 
```

我假设它`array('50','60')`是数字的。尝试删除撇号并添加正确类型的数字。

# javascript - 在 Google API 响应的正确 LatLong 结果中

> ID：16005792
> 
> 赞同：0
> 
> 时间：2013-04-15T00:07:39.593
> 
> 标签：javascript, jquery, api

我试图理解为什么每次生成的 latlong 都是 37.986272,-122.010576 当 Firebug 显示正确的坐标填充在 targetDestination -

来自 Firebug：在 gmaptest.html#page2 第 75 行处>

```
targetDestination = new google.maps.LatLng(parseInt(coords[0]),parseInt(coords[1])); 
```

坐标- [“38.42036”，“-122.662246”]

请求 - 未定义

targetDestination-“38.42036，-122.662246”

**这是我的测试页面 - [http://legendsnorcal.dfigdesign.com/maps/gmaptest.html](http://legendsnorcal.dfigdesign.com/maps/gmaptest.html)**

初始化第二页时，当前位置正确拉动：

```
$(document).on('pageinit', '#page2', function(){
var selectedDest = $('[name=latlong]').val();
navigator.geolocation.getCurrentPosition(locSuccess, locError);
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T01:08:01.577

您不应该`parseInt`对地理坐标进行操作，它们是小数。这可能是您可能遇到的问题的很大一部分：

尝试将其更改为：

```
targetDestination = new google.maps.LatLng(parseFloat(coords[0]),parseFloat(coords[1])); 
```

# visual-studio-2010 - .props 设置 OutDir

> ID：16005794
> 
> 赞同：0
> 
> 时间：2013-04-15T00:07:57.437
> 
> 标签：visual-studio-2010, visual-studio, vsprops

尝试设置两个并行环境，使用单独的 .sln，但使用相同的 vcxproj，因为我正在处理 100 多个项目。我想要不同的 OutDir 和 IntermediateDir，所以我把它放在每个配置的变体 props 文件中：

```
<PropertyGroup>
  <OutDir Condition="'$(Configuration)|$(Platform)'=='Release|Win32'">$(Configuration)5\</OutDir>
  <IntDir Condition="'$(Configuration)|$(Platform)'=='Release|Win32'">$(Configuration)5\</IntDir>
  <OutDir Condition="'$(Configuration)|$(Platform)'=='Debug|Win32'">$(Configuration)5\</OutDir>
  <IntDir Condition="'$(Configuration)|$(Platform)'=='Debug|Win32'">$(Configuration)5\</IntDir>
</PropertyGroup> 
```

在其他 .props 中没有 5 的情况下相同。似乎可以正常构建，但对于启动应用程序，它会尝试在 SolutionDir/Release5/foo.exe 而不是 foodir/Release/foo.exe 中查找内容。我认为这是因为相对路径解析不正确。我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T21:17:16.840

事实证明，这`<OutputFile>`也需要调整。我只是根据 $(OutDir) 定义它并解决了问题

# html - 如何实现 github.com 之类的图标字体

> ID：16005795
> 
> 赞同：4
> 
> 时间：2013-04-15T00:08:10.750
> 
> 标签：html, css, fonts, icons, sass

你如何实现图标字体？

Github 在其网页上广泛使用它们，但试图重现它们的实现会导致失败。

[https://github.com/styleguide/css/7.0](https://github.com/styleguide/css/7.0)

在此处查看尝试的实现：

[http://jsfiddle.net/spuder/jsmzm/7/](http://jsfiddle.net/spuder/jsmzm/7/)

```
<div id="github">

    <span class="mega-icon mega-icon-blacktocat"></span>

</div>

.mega-icon-blacktocat {
    content:"\f209";
} 
```

我已经阅读了很多关于图标字体的页面，并且通过了几个教程都没有成功

[如何使用图标字体](https://stackoverflow.com/questions/13129995/how-to-use-icon-fonts)

[http://css-tricks.com/examples/IconFont/](http://css-tricks.com/examples/IconFont/)

[http://net.tutsplus.com/tutorials/html-css-techniques/quick-tip-ever-thought-about-using-font-face-for-icons/](http://net.tutsplus.com/tutorials/html-css-techniques/quick-tip-ever-thought-about-using-font-face-for-icons/)

[在 CSS 内容值中放置 Unicode 字符](https://stackoverflow.com/questions/10393462/placing-unicode-character-in-css-content-value)

初学者。

*更新* 2013-4-11 提供的解决方案在 WebKit 中运行良好，但在 firefox 20.0 中不起作用 [http://jsfiddle.net/jsmzm/10/](http://jsfiddle.net/jsmzm/10/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-18T14:23:57.700

[这是一篇关于如何在您的网站中使用图标字体](http://designmodo.com/use-icon-fonts/)的非常好的文章

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T00:26:25.907

[**这是您的小提琴更新**](http://jsfiddle.net/jsmzm/10/)
，基本上您在 span 标签中缺少 data-icon 属性

```
 <div id="github"> 
<span data-icon="" class="mega-icon mega-icon-blacktocat"></span> 
```

和你的CSS中的参考

```
[data-icon]:before {
  font-family:'Octicons Regular';
  content: attr(data-icon);
  speak: none; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T01:03:03.237

大多数浏览器不支持 content 属性来替换元素的内容。它实际上只用于伪元素。

[http://jsfiddle.net/jsmzm/11/](http://jsfiddle.net/jsmzm/11/)

```
.mega-icon-blacktocat:before {
    content:"\f209";
} 
```

# asp.net-mvc - 在每个页面上将购物车项目显示为部分视图？

> ID：16005800
> 
> 赞同：0
> 
> 时间：2013-04-15T00:09:02.583
> 
> 标签：asp.net-mvc, asp.net-mvc-4, partial-views

我正在构建一个与 MVCMusicStore 非常相似的 mvc Web 应用程序。我想在屏幕右上角的一个小列表中显示我的购物车项目，以便用户可以在任何给定时间看到购物车中的内容。我的部分观点是：

```
@model ProOptInteractive.ViewModels.ShoppingCartViewModel
<ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu">
    @foreach (var item in Model.CartItems)
    {

  <li><a tabindex="-1" href="#">@item @item.Count</a></li>
    }
    <li class="divider"></li>
    <li><a tabindex="-1" href="#"></a></li>
</ul> 
```

_Layout.cshtml 文件中的部分视图是

`@{Html.RenderAction("CartSize", "ShoppingCart");}`

每当我运行程序时，我都会得到一个未设置为对象错误实例的对象引用，这与`@foreach (var item in Model.CartItems)`并且即使我直接从购物车索引页面的代码中复制出来，我仍然会收到此错误。除非我单击 AddToCart，否则不会出现购物车。

请指教

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T14:42:37.790

我设法通过在我的 ShoppingCartControlled 中添加一个与 Index 方法几乎相同的方法来修复它，称为 CartSummary 并返回一个 PartialView：

```
public ActionResult CartSummary()
    {
        var cart = ShoppingCart.GetCart(this.HttpContext);

        // Set up our ViewModel
        var viewModel = new ShoppingCartViewModel
        {
            CartItems = cart.GetCartItems(),
            CartTotal = cart.GetTotal()
        };
        // Return the view
        return PartialView(viewModel);
    } 
```

这是唯一似乎“包含”任何购物车项目的方法。我通过引用它`@{Html.RenderAction("CartSummary", "ShoppingCart");}`

感谢大家的贡献！

# ocaml - 为什么OCaml不能推断出以下类型：

> ID：16005801
> 
> 赞同：9
> 
> 时间：2013-04-15T00:09:20.583
> 
> 标签：ocaml, type-inference

考虑以下代码

```
module type Foo = sig 
  type t
  val do_with_t : t -> unit
end

let any_foo t (module F : Foo) = F.do_with_t t 
```

被以下可爱的类型错误拒绝：

```
Error: This expression has type F.t but an expression was expected of type F.t
      The type constructor F.t would escape its scope 
```

但是一旦我添加以下类型注释就被接受：

```
let any_foo (type s) (t:s) (module F : Foo with type t = s) = F.do_with_t t 
```

共享约束对我来说很有意义，所以我的问题是为什么 OCaml 不能从我`t`在函数内部的使用中推断出类型签名。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-02-07T21:05:14.427

我不是专家，但这是我对此的看法。

真正的错误是消息的最后一点：

> 类型构造函数 Ft 将逃脱其范围

为了理解错误信息，让我们首先`any_foo`在没有模式匹配参数的情况下重写，并重命名参数以使解释更容易理解：

```
let any_foo arg foo = 
  let (module F : Foo) = foo in
    F.do_with_t arg 
```

您在这里使用一流的模块，并将变量解包`foo`到**新**的模块中`F`，**在该 let 语句的范围内。**

`arg`现在让我们考虑可以从这个事实中推断出的论点类型。显然，类型是`F.t`，但关键的是，这是一种仅在当前范围内已知的类型，因为`module F`仅在当前范围内已知。

现在让我们尝试定义结果`any_foo`函数的类型：

```
val any_foo : F.t -> (module Foo) -> unit 
```

还有你的问题，你正试图`F.t`从函数范围的深处公开新铸造的类型。换句话说，您期望调用者知道仅存在于您的函数内部的类型。或者，换一种说法，您期望该类型`F.t`能够“逃脱”其范围，以吸引更广泛的受众。

### 解决方案，解释

现在我们知道了问题所在，我们可以认识到需要向编译器解释这种类型存在于“外部”范围内，并且参数`arg`属于该类型。

换句话说，我们需要为新生成的模块添加一个约束，`F`以说明参数`arg`的类型等于`t`我们新模块中的类型`F`。为此，我们可以使用本地抽象类型。

继续使用相同的功能，我们可以添加一个局部抽象类型`a`，并用它来约束模块`F`：

```
let (type a) any_foo arg foo = 
  let (module F : Foo with type t = a) = foo in
    F.do_with_t arg 
```

让我们考虑一下`any_foo`现在的类型。

```
val any_foo : 'a -> (module Foo with type t = 'a) -> unit 
```

那里没有问题。

为了完整起见，让我们回到我们的模式匹配版本：

```
let (type a) any_foo arg (module F : Foo with type t = a) =
  F.do_with_t arg 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-15T08:05:03.547

这并不能真正回答您的问题，但在您的情况下，您只需要引入一个新的类型变量`s`：

```
let any_foo (type s) t (module F : Foo with type t = s) = F.do_with_t t 
```

即你不需要`(t:s)`，因为类型推断在这里可以正常工作。

# php - 选择用户所在的选项卡，跨多个页面

> ID：16005803
> 
> 赞同：0
> 
> 时间：2013-04-15T00:09:32.133
> 
> 标签：php, menu, tabs, modx

我目前正在创建一个带有标签的网站。

[http://imageshack.us/photo/my-images/16/chosentab.png/](http://imageshack.us/photo/my-images/16/chosentab.png/)（它不会让我嵌入图像）

如您所见，有一个名为 classPvP 的选项卡被选中，这是通过在标签的类中添加一个“ **selected ”来完成的。**但是，这个网站将像一个 wiki，因此有许多不同的页面，我不想为每个页面创建一个单独的“模板”（如果你愿意的话），因为每个页面都有不同的选定选项卡，因为那么在所有这些模板中更新或更改某些内容将非常困难。

当您选择一个选项卡时，我正在尝试使用此代码添加所需的类：

```
<?php
//Defining the variables
$a="[[*menutitle]]";
if ($a=="classpvp"){
echo "selected";
} else {
echo $a;
} ?> 
```

使用我正在使用的 CMS (MODx)，**[[*menutitle]]**被我想要“选择”的任何选项卡替换。但是，由于某种原因，if 语句没有运行，但是 echo 输出 $a 的值是**classpvp**。

这让我很困惑，为什么 if 语句没有运行，但值是正确的 - 我存储的东西很差吗？（对不起，我对 PHP 很陌生）

（请记住，**[[TabSelectClassPvP]]**被替换为 php 代码）当使用 var_dump($a) （如建议的那样）时，类从：

```
<li class="navTab [[TabSelectClassPvP]]">
ClassPvP
</li> 
```

至：

```
<li class="navTab string(14) " classpvp"="">
ClassPvP
</li> 
```

正在运行的确切 php 代码是：

```
<?php
//Defining the variables
$a="[[*menutitle]]";
var_dump($a);
if ($a=="classpvp"){
echo "selected";
} else {
echo $a;
} 
```

谢谢，松饼果冻

PS - 我愿意接受新的方法，也许是从 HTML ID 中检索信息的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T01:06:51.823

为您的菜单使用 WAyFinder 包，它会自动将“活动”规则放置在您的类属性中。[http://rtfm.modx.com/display/ADDON/Wayfinder](http://rtfm.modx.com/display/ADDON/Wayfinder)如果你想使用不同的东西，&hereClass 是你想在 WayFinder 调用中指定的 c=value。

**更新**

如果你想在你的代码片段中使用当前资源的菜单标题，有两种方法可以做到这一点，从代码片段调用中传递它：

```
<li class="navTab [[!TabSelectClassPvP? &a='[[*menutitle]]']]"> 
```

你的片段看起来像：

```
<?php
// Defining the variables
// $a="[[*menutitle]]";
// var_dump($a);

if ($a=="classpvp"){
echo "selected";
} else {
echo $a;
} 
```

[您可能应该检查 $a 是否已通过]

或者您可以直接在代码段中查询当前页面：

```
<?php
// Defining the variables
// $a="[[*menutitle]]";
// var_dump($a);

$a = $modx->resource->get('menutitle');

if ($a=="classpvp"){
echo "selected";
} else {
echo $a;
} 
```

由于 modx 对象始终假定“当前资源”，因此您可以像这样在片段中获取任何资源字段或电视。

# dart - 如何在 Dart 中链接多个 ImageElement 加载事件

> ID：16005805
> 
> 赞同：9
> 
> 时间：2013-04-15T00:09:50.573
> 
> 标签：dart

我将 JavaScript 背景图像加载器转换为 Dart，有点像这样：[Javascript image loader](https://stackoverflow.com/questions/9197673/javascript-image-loader)

我使用计时器来检查图像是否已全部加载。这工作正常。

但是在 Dart 中有可链接的期货，我想知道您是否可以链接 ImageElements 的后台加载...

```
ImageElement a = new ImageElement();
ImageElement b = new ImageElement();
ImageElement c = new ImageElement();

Future.wait([a.src='a.jpg', b.src='b.jpg', c.src='ca.jpg'])
  .then((List responses) => chooseBestResponse(responses))
  .catchError((e) => handleError(e)); 
```

当然，分配 src 和实际的图像加载是异步的，所以这不起作用......

加载后，我还需要为每个图像执行一些代码。

也许我需要编写自己的 FutureImageElement 类，但我想我会先问...

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-15T12:16:31.757

当然，您可以使用期货。只需使用`first`流的属性：

```
var a = new ImageElement(src: 'a.png');
var b = new ImageElement(src: 'b.png');
var c = new ImageElement(src: 'c.png');

var futures = [a.onLoad.first, b.onLoad.first, c.onLoad.first];

Future.wait(futures).then((_) => print('done')); 
```

加载所有三个图像后，将打印文本“完成”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T01:27:48.723

您真的需要为此与 Futures 合作吗？

为什么不这样：

```
List<String> files = ["a", "b", "c"];
int imagesToLoad = files.length;
for (String fileName in files) {
    ImageElement pic = new ImageElement()
      ..src = "$fileName.jpg"
      ..onLoad.listen((Event e) {
          // do something when the file has finished loading

          imagesToLoad--;
          if (imagesToLoad == 0) {
            // do something when all images have loaded
          }
        })
    ;
} 
```

# c# - .sdf 文件 wp7/wp8 中的多个表

> ID：16005806
> 
> 赞同：1
> 
> 时间：2013-04-15T00:09:51.000
> 
> 标签：c#, windows-phone-7, windows-phone-8, sql-server-ce

我可以使用多个上下文来创建数据库 ( `.sdf`) 文件吗？我想在一个`.sdf`文件中有多个表。

例如。

1.  `useraccount`具有表模式的上下文
2.  `messages`具有表模式的上下文

我已经尝试过的：

```
using (dataContext accountdb = new dataContext(globalInfo.strConnectionString))
{
            if (accountdb.DatabaseExists() == false)
            {
                accountdb.CreateDatabase();
            }
            else
            {

            }
} 
```

我想这样做：

使用帐户上下文和消息上下文创建单个`.sdf`文件。

提前感谢您的帮助，非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T07:34:38.773

猜猜没有编码器，累了必须编码。答案很简单，在单个上下文中添加表。

```
class dataContext:DataContext
{
    public dataContext(string connectionString): base(connectionString)
     {

     }
    //1------------
    public Table<account> accountees
    {
        get
        {
            return this.GetTable<account>();
        }
    }
    //2--------------
     public Table<messages> messagees
     {
     get
     {
     return this.GetTable<messageCategory>();
     }
     }
    //3---------------
     public Table<test> testees
     {
         get
         {
             return this.GetTable<testCategory>();
         }
     }
} 
```

感谢 ErikEJ 为我指明了正确的方向。

# java - 如何将“”表示为 Scanner 的分隔符

> ID：16005808
> 
> 赞同：1
> 
> 时间：2013-04-15T00:09:56.727
> 
> 标签：java, regex

尝试将这个简单的字符串解析为两个`float`变量，结果比我最初想象的要简单：

```
-0.13 0.17% 
```

（唯一？）原因是两个数字之间的空格实际上是 a `&nbsp;`。所以第一个`scanner.next()`返回**整个**字符串：

```
Scanner scanner = new Scanner("-0.13 0.17%");
String first = scanner.next(); 
```

我知道 Scanner 的[useDelimiter()](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html#useDelimiter%28java.util.regex.Pattern%29)方法，但我如何告诉它`&nbsp;`用作分隔符？

我试过`useDelimiter("&nbsp;")`了，但没用

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T00:12:36.543

＆符号转义序列仅适用于 HTML 和 XML，不适用于 Java。尝试改用`"\u00a0"`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T00:13:15.847

160 的 Ascii 是 nbsp，因此将具有该值的字符与您的字符串连接起来，它应该可以工作。

```
char nbsp = 160;
useDelimiter("" + nbsp); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-15T00:40:45.250

类的默认分隔符`Scanner`是`\p{javaWhitespace}+`. [`\p{javaWhitespace}`](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html)由方法定义，该方法[`Character.isWhitespace`](http://docs.oracle.com/javase/6/docs/api/java/lang/Character.html#isWhitespace%28int%29)根据定义排除不间断空格。

> 根据 Java 确定指定字符是否为空格。一个字符是一个 Java 空白字符当且仅当它满足以下条件之一：
> 
> *   它是 Unicode 空格字符（`SPACE_SEPARATOR`、、`LINE_SEPARATOR`或`PARAGRAPH_SEPARATOR`），但也不是不间断空格（`'\u00A0'`、、、`'\u2007'`）`'\u202F'`。
> *   `[...]`

如果要包含无间断空格（即 ）`'\u00A0'`以及**默认**的 Java 空格，则需要构造一个将它们组合在一起的正则表达式：

```
scanner.useDelimiter("[\\p{javaWhitespace}\u00A0]+"); 
```

注意`+`后面很重要。它使整个模式与**连续**的空格序列匹配。如果没有这个，`next()`当有连续的​​空格时将返回空字符串。

# matlab - 如何将多个图像保存在特定文件夹中

> ID：16005818
> 
> 赞同：0
> 
> 时间：2013-04-15T00:11:09.517
> 
> 标签：matlab

我想将所有读取的图像保存到同一个文件夹中。这是我到目前为止所尝试的：

代码的问题是我不知道如何保存图像。

```
myFolder = 'C:\Users\TheSniper102\Documents\MATLAB\db\3';

filePattern = fullfile(myFolder, '*.bmp');
jpegFiles = dir(filePattern);
for k = 1:length(jpegFiles)
  baseFileName = jpegFiles(k).name;
  fullFileName = fullfile(myFolder, baseFileName);

  img = im2double(imread(fullFileName)); 
```

我想将每个所有图像保存到路径 C:\Users\TheSniper102\Documents\MATLAB\newfolder\3 的同一文件夹中

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T00:37:20.307

[您可以使用imwrite](http://www.mathworks.com.au/help/matlab/ref/imwrite.html)在 matlab 中编写图像文件，也可以使用[sprintf](http://www.mathworks.com.au/help/matlab/ref/sprintf.html)和循环构建路径。像这样的东西：

```
basePath = 'YOUR/PATH/%d.jpeg'
for k = 1:length(jpegFiles)

path = sprintf(basePath,k)
imwrite.. 
```

.

# php - 在 SQL 命令中使用包含刻度/引号的字符串

> ID：16005819
> 
> 赞同：1
> 
> 时间：2013-04-15T00:11:18.767
> 
> 标签：php, mysql

我在用着

```
$shouldfollow = "'".htmlspecialchars($_GET["shouldfollow"])."',";
echo $shouldfollow; 
```

实现类似于 的字符串`'apple',`。*到目前为止*它 100% 有效。棘手的部分是尝试在 MySQL 命令中使用该变量。这是我尝试过的。

```
mysqli_query($con,"UPDATE users SET following=".$shouldfollow." WHERE username='$username'"); 
```

但它反而说我的语法是错误的。我知道该命令将按照我的意愿工作（即，如果我删除该`'',`部分）。

![](https://i.stack.imgur.com/Soe4Q.png)

如果我没有足够令人困惑的冗余，那么上图就是我运行命令后的最终结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T00:13:04.667

您应该使用 not`htmlspecialchars`这对 sql 没有意义，而仅适用于 HTML，但是[`mysqli::real_escape_string`](http://www.php.net/manual/en/mysqli.real-escape-string.php)

或者，更好的是，[准备好的陈述](http://www.php.net/manual/en/mysqli.prepare.php)

逗号怎么样 - 你必须一次转义每个变量：

```
$shouldfollow = mysqli_real_escape_string($_GET["shouldfollow"]); 
```

或使用准备好的语句：

```
$stmt = mysqli_prepare($db, 'UPDATE users SET following = ? WHERE username = ?');
mysqli_stmt_bind_param($stmt, 'ss', $_GET["shouldfollow"], $username);
mysqli_stmt_execute($stmt); 
```

**注意**：您仍然需要`$_GET["shouldfollow"]`额外检查是否存在，但这超出了这个问题的范围。

# java - 关于 MethodHandle API 的一些基本问题

> ID：16005824
> 
> 赞同：23
> 
> 时间：2013-04-15T00:12:13.253
> 
> 标签：java, reflection, java-7

如何通过 获取所有声明的方法`MethodHandles.lookup()`？如何获取所有声明的字段？

和`MethodHandle.invoke()`之间有什么区别`MethodHandle.invokeExact()``MethodHandle.invokeWithArguments()`

此外，我将不胜感激有关使用 MethodHandle API for **Java devloper**的教程。我强调，我是在静态类型语言纯旧 Java 上编程，我不是 JVM 开发人员，特别是我对整个字节码废话（invokedynamic）不感兴趣。我想弄清楚如何使用这个新 API 而不是 Java Core API。

**编辑-2：**

@Glen Best 下面提供了一些参考我只想提供一个[http://www.oraclejavamagazine-digital.com/javamagazine/20130102?pg=52&search_term=methodhandle&doc_id=-1#pg50](http://www.oraclejavamagazine-digital.com/javamagazine/20130102?pg=52&search_term=methodhandle&doc_id=-1#pg50)这正是我想要的。我发现实际上有一些新词汇。例如，*目标*实际上是指 MethodHandle（而不是要进行调度的对象），而*调用站点*实际上是“调用”“函数指针”又名 MethodHandle 的代码。此外，必须了解 MethodHandle API*不是*核心反射 API的**替代品，而不是补充***它。例如，您无法使用 MethodHandle “发现”所有方法，而您需要 Core Reflection API。但是当你“找到”你想要的方法时，你可以切换到 MethodHandle，例如，绑定它的一些参数或“改变”（适应）它的签名，例如可变参数。*

 ***编辑：**

我仍在试图找出答案。我写了一些测试，想和大家分享。

```
package alexander.berkovich;

import static org.junit.Assert.assertSame;

import java.lang.invoke.MethodHandle;
import java.lang.invoke.MethodHandles;
import java.lang.invoke.MethodType;
import java.lang.reflect.Field;
import java.lang.reflect.Method;

import org.junit.BeforeClass;
import org.junit.Test;

public class MethodHandlerCleanTest {

    public static MethodHandles.Lookup lookup;

    @BeforeClass
    public static void asetUp(){
        lookup = MethodHandles.lookup();
    }

    public static class Check {
        public void primitive(final int i){
        }
        public void wrapper(final Integer i){
        }
    }

    @Test
    public void testPrimitive() throws Throwable {
        Check check = new Check();

        MethodType type = MethodType.methodType(void.class, int.class);

        MethodHandle mh = lookup.findVirtual(Check.class, "primitive", type);
        mh.invokeWithArguments(check, 1);
        mh.invoke(check, (short)2);
        mh.invoke(check, Integer.valueOf(3));

        Method method = Check.class.getMethod("primitive", int.class);
        method.invoke(check, (short)20);
        method.invoke(check, Integer.valueOf(21));

    }

    @Test
    public void testWrapper() throws Throwable {
        Check check = new Check();

        MethodType type = MethodType.methodType(void.class, Integer.class);

        MethodHandle mh = lookup.findVirtual(Check.class, "wrapper", type);
        mh.invoke(check, 2);

        Method method = Check.class.getMethod("wrapper", Integer.class);
        method.invoke(check, 20);

    }

    @SuppressWarnings("unused")
    public static class StaticInnerClass {

        public static String staticName;
        public String name;

        public void foo(){}

        public static void staticFoo(){}

    }

    @Test
    public void testStaticInnerClassStaticField() throws Throwable {
        MethodHandle mhSet = lookup.findStaticSetter(StaticInnerClass.class, "staticName", String.class);
        String expected = "mama";
        mhSet.invoke(expected);

        MethodHandle mhGet = lookup.findStaticGetter(StaticInnerClass.class, "staticName", String.class);
        Object obj = mhGet.invoke();
        String value = (String)obj;
        assertSame(expected, value);

    }

    @Test
    public void testStaticInnerClassField() throws Throwable {
        StaticInnerClass sut = new StaticInnerClass();
        Field f = StaticInnerClass.class.getDeclaredField("name");
        MethodHandle mhSetUnreflect = lookup.unreflectSetter(f); 
        String expectedUnreflect = "unreflect";
        mhSetUnreflect.invoke(sut, expectedUnreflect);

        MethodHandle mhSet = lookup.findSetter(StaticInnerClass.class, "name", String.class);
        String expected = "mama";
        mhSet.invoke(sut, expected);

        MethodHandle mhGet = lookup.findGetter(StaticInnerClass.class, "name", String.class);
        Object obj = mhGet.invoke(sut);
        String value = (String)obj;
        assertSame(expected, value);

    }

    @Test
    public void testStaticInnerClassConstructor() throws Throwable {
        StaticInnerClass sut = new StaticInnerClass();
        MethodType type = MethodType.methodType(void.class);
        MethodHandle mh = lookup.findConstructor(StaticInnerClass.class, type);
        mh.invoke();
    }

    @Test
    public void testStaticInnerClassMethod() throws Throwable {
        StaticInnerClass sut = new StaticInnerClass();
        MethodType type = MethodType.methodType(void.class);
        MethodHandle mh = lookup.findVirtual(StaticInnerClass.class, "foo", type);
        mh.invoke(sut);
    }

    @Test
    public void testStaticInnerClassStaticMethod() throws Throwable {
        MethodType type = MethodType.methodType(void.class);
        MethodHandle mh = lookup.findStatic(StaticInnerClass.class, "staticFoo", type);
        mh.invoke();
    }

    @SuppressWarnings("unused")
    private class InnerClass {
        public String name;

        public void foo(){}

    }
    @Test
    public void testInnerClassField() throws Throwable {
        InnerClass sut = new InnerClass();
        MethodHandle mhSet = lookup.findSetter(InnerClass.class, "name", String.class);
        String expected = "mama";
        mhSet.invoke(sut, expected);

        MethodHandle mhGet = lookup.findGetter(InnerClass.class, "name", String.class);
        Object obj = mhGet.invoke(sut);
        String value = (String)obj;
        assertSame(expected, value);

    }

    @Test
    public void testInnerClassConstructor() throws Throwable {
        MethodType type = MethodType.methodType(void.class, MethodHandlerCleanTest.class);

        //default constructor is private
        Field field = MethodHandles.Lookup.class.getDeclaredField("IMPL_LOOKUP");
        field.setAccessible(true);
        MethodHandles.Lookup trustedLookup = (MethodHandles.Lookup) 
                field
                .get(null);

        MethodHandle mh = trustedLookup.findConstructor(InnerClass.class, type);
        mh.invoke(this);
    }

    @Test
    public void testInnerClassMethod() throws Throwable {
        InnerClass sut = new InnerClass();
        MethodType type = MethodType.methodType(void.class);
        MethodHandle mh = lookup.findVirtual(InnerClass.class, "foo", type);
        mh.invoke(sut);
    } 
```

}

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-04-24T05:35:18.937

> *如何通过 MethodHandles.lookup() 获取所有声明的方法？如何获取所有声明的字段？*

将 java.lang.invoke 视为反射 (java.lang.reflect) 的（快速执行）扩展 - 即“调用”类依赖于“反射”类。

*   您通过反射（java.lang.Class 和 java.lang.reflect）获得对所有方法/构造函数/字段的引用：

    ```
    java.lang.Class<?> someClass = ...;  // obtain a Class somehow

    // Returns all constructors/methods/fields declared in class, 
    // whether public/protected/package/private, 
    // but does NOT include definitions from any ancestors:

    java.lang.reflect.Constructor<?>[] declaredConstructors = someClass.getDeclaredConstructors();
    java.lang.reflect.Method[] declaredMethods = someClass.getDeclaredMethods();
    java.lang.reflect.Field[] declaredFields   = someClass.getDeclaredFields();

    // Returns all constructors/methods/fields declared as public members 
    // in the class AND all ancestors: 

    java.lang.reflect.Constructor<?>[] publicInheritedConstructors = someClass.getConstructors();
    java.lang.reflect.Method[] publicInheritedMethods = someClass.getMethods();
    java.lang.reflect.Field[] publicInheritedFields   = someClass.getFields(); 
    ```

*   您可以通过 java.lang.invoke.MethodHandles.Lookup 将它们转换为 MethodHandles：

    ```
    java.lang.invoke.MethodType mt; 
    java.lang.invoke.MethodHandle mh;
    java.lang.invoke.MethodHandles.Lookup lookup = MethodHandles.lookup();

    // process methods
    for (java.lang.reflect.Method method: declaredMethods) {
        mh = lookup.unreflect(method);

        // can call mh.invokeExact (requiring first parameter to be the class' 
        // object instance upon which the method will be invoked, followed by 
        // the methodparameter types, with an exact match parameter and return 
        // types) or
        // mh.invoke/invokeWithArguments (requiring first parameter to be the 
        // class' object instance upon which the method will be invoked, 
        // followed by the method parameter types, with compatible conversions 
        // performed on input/output types)
    }

    // process constructors
    for (java.lang.reflect.Constructor<?> constructor: declaredConstructors) {
        mh = lookup.unreflectConstructor(constructor);

        // can call mh.invokeExact or
        // mh.invoke/invokeWithArguments 
    }

    // process field setters
    for (java.lang.reflect.Field field: declaredFields) {
        mh = lookup.unreflectSetter(field);

        // can call mh.invokeExact or
        // mh.invoke/invokeWithArguments 
    }

    // process field getters
    for (java.lang.reflect.Field field: declaredFields) {
        mh = lookup.unreflectGetter(field);

        // can call mh.invokeExact or
        // mh.invoke/invokeWithArguments 
    } 
    ```

*   您可以通过 java.lang.reflect 确定方法/构造函数/字段的签名：

    ```
    // If generics involved in method signature:
    Type[] paramTypes = method.getGenericParameterTypes(); 
    Type returnType = method.getGenericReturnType(); 
    // Note: if Class is non-static inner class, first parameter of 
    // getGenericParameterTypes() is the enclosing class

    // If no generics involved in method signature:
    Class<?>[] paramTypes = declaredMethod.getParameterTypes(); 
    Class<?> returnType = declaredMethod.getReturnType(); 
    // Note: if Class is non-static inner class, first parameter of 
    // getParameterTypes() is the enclosing class

    // Same method calls for declaredConstructor 
    ```

*   您可以通过 java.lang.reflect 确定方法/构造函数/字段是否是静态的：

    ```
    int modifiers = method.getModifiers();  // same method for constructor/field
    boolean isStatic = java.lang.Modifier.isStatic(modifiers); 
    ```

> *MethodHandle.invoke()、MethodHandle.invokeExact() 和 MethodHandle.invokeWithArguments() 之间有什么区别？*

*   请参阅[http://docs.oracle.com/javase/7/docs/api/java/lang/invoke/MethodHandle.html#invoke%28java.lang.Object...%29](http://docs.oracle.com/javase/7/docs/api/java/lang/invoke/MethodHandle.html#invoke%28java.lang.Object...%29)
*   如果`MethodHandle`是用于非静态方法，则提供给这些方法的第一个参数是`Class`声明该方法的实例。该方法在该类的实例上调用（或在静态方法的类本身上）。如果`Class`是非静态内部类，则第二个参数是封闭/声明类的实例。后面的参数依次是方法签名参数。
*   **`invokeExact`**不对输入参数进行自动兼容类型转换。它要求参数值（或参数表达式）与方法签名的类型完全匹配，每个参数作为单独的参数提供，或者所有参数作为数组一起提供（签名：）`Object invokeExact(Object... args)`。
*   **`invoke`**要求参数值（或参数表达式）与方法签名的类型兼容匹配 - 执行自动类型转换，每个参数作为单独的参数提供或所有参数作为数组一起提供（签名：对象调用（对象.. .args))
*   **`invokeWithArguments`**要求参数值（或参数表达式）与方法签名的类型兼容匹配 - 执行自动类型转换，每个参数都在列表中提供（签名`Object invokeWithArguments(List<?> arguments)`：）

> *我将不胜感激有关使用 MethodHandle API for Java devloper 的教程*

不幸的是，那里没有太多东西。您可以尝试以下方法。希望我在上面提供了足够的信息:^)

[http://docs.oracle.com/javase/7/docs/api/java/lang/invoke/MethodHandle.html](http://docs.oracle.com/javase/7/docs/api/java/lang/invoke/MethodHandle.html)
[http://docs.oracle.com/javase/7/docs/api/java/lang/invoke /MethodHandles.Lookup.html](http://docs.oracle.com/javase/7/docs/api/java/lang/invoke/MethodHandles.Lookup.html)
[http://www.java7developer.com/blog/?p=191](http://www.java7developer.com/blog/?p=191)
[http://www.oraclejavamagazine-digital.com/javamagazine/20130102?pg=52&search_term=methodhandle&doc_id=-1#pg50](http://www.oraclejavamagazine-digital.com/javamagazine/20130102?pg=52&search_term=methodhandle&doc_id=-1#pg50)
[http： //www.amazon.com/Well-Grounded-Java-Developer-techniques-programming/dp/1617290068](https://rads.stackoverflow.com/amzn/click/com/1617290068)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-05-08T06:51:02.387

> MethodHandle.invoke()、MethodHandle.invokeExact() 和 MethodHandle.invokeWithArguments() 之间有什么区别

由于我也为此苦苦挣扎，因此我决定重新审视这个问题并编写一个示例来准确显示这些方法之间的语义差异。

主要区别在于：

1.  `invokeExact` **只**接受*确切的*参数和返回类型，**不**接受作为数组的参数。`(Integer,Integer)Integer`不允许使用参数调用例如方法签名，`int`也不允许使用`Object`参数调用它，即使对象实际上是 Integer 类型 - 参数的*编译时*类型必须是 Integer 类，而不是运行时实例：

    ```
    Object arg = 1; Object[] args = {1,1};
    Integer i = (Integer)handle.invokeExact(1,1); // OK
    Object o = handle.invokeExact(arg,arg); // ERROR
    handle.invokeExact(args); // ERROR 
    ```

* * *

2.  `invoke`自动转换参数类型和返回类型，并在原始类型和相应的包装类之间进行转换。但它**也不**接受作为数组的参数。例如方法签名`(Integer,Integer)Integer`：

    ```
    Object arg = 1; Object[] args = {1,1};
    Integer i = (Integer)handle.invoke(1,1); // OK
    Object o = handle.invoke(arg,arg); // OK!
    o = handle.invoke(args); // ERROR 
    ```

* * *

3.  `invokeWithArguments`消除了所有这些限制并且工作方式非常相似`Method#invoke`- 您也可以提供一个数组（或 a `java.util.List`）作为参数（但这种灵活性会带来*巨大*的性能损失）。例如方法签名`(Integer,Integer)Integer`：

    ```
    Object arg = 1; Object[] args = {1,1};
    Integer i = (Integer)handle.invokeWithArguments(1,1); // OK
    Object o = handle.invokeWithArguments(arg,arg); // OK
    o = handle.invokeWithArguments(args); // OK! 
    ```

* * *

这里有一个完整的例子：

```
import java.lang.invoke.MethodHandle;
import java.lang.invoke.MethodHandles;
import java.lang.invoke.WrongMethodTypeException;
import java.lang.reflect.Method;
import java.util.Arrays;

public class MethodHandleTest {

    public static class TestClass{
        public int test(int a, Integer b){
            return a+b;
        }
    }

    public static void main(String[] args) throws Throwable{
        Method method = TestClass.class.getMethod("test", int.class, Integer.class);
        MethodHandle handle = MethodHandles.lookup().unreflect(method).bindTo(new TestClass());

        int arg_int = 1;
        Integer argInteger = 1;

        Object[] argArray = {1,1};

        //----------------------------
        // MethodHandle#invokeExact() 
        //----------------------------

        // ONLY an exact invocation is allowed for invokeExact:
        int result = (int) handle.invokeExact(arg_int, argInteger); 

        // inexact first argument type -> throws WrongMethodTypeException - "expected (int,Integer)int but found (Integer,Integer)int"
        Exception e = null;
        try {
            result = (int) handle.invokeExact(argInteger,argInteger);
        } catch (WrongMethodTypeException ex) {
            e = ex;
        }
        assert e != null;
        e = null;

        // inexact return type -> throws WrongMethodTypeException - "expected (int,Integer)int but found (int,Integer)Integer"
        try {
            result = (Integer) handle.invokeExact(arg_int,argInteger);
        } catch (WrongMethodTypeException ex) {
            e = ex;
        }
        assert e != null;
        e = null;

        // inexact return type -> throws WrongMethodTypeException - "expected (int,Integer)int but found (int,Integer)Object"
        try {
            Object o = handle.invokeExact(arg_int,argInteger);
        } catch (WrongMethodTypeException ex) {
            e = ex;
        }
        assert e != null;
        e = null;

        // "argObject" is ALSO NOT OK! - the compile time type of the argument must be of class Integer, not the runtime instance!
        // -> throws WrongMethodTypeException - "expected (int,Integer)int but found (int,Object)int"
        Object argObject = argInteger;
        try {
            result = (int) handle.invokeExact(arg_int,argObject);
        } catch (WrongMethodTypeException ex) {
            e = ex;
        }
        assert e != null;
        e = null;

        // Array of the arguments NOT allowed -> throws WrongMethodTypeException - "expected (int,Integer)int but found (Object[])int"
        try {
            result = (int) handle.invokeExact(argArray);
        } catch (WrongMethodTypeException ex) {
            e = ex;
        }
        assert e != null;
        e = null;

        // But explicit cast of first or second argument is OK
        result = (int) handle.invokeExact((int)argInteger,argInteger);
        result = (int) handle.invokeExact(arg_int,(Integer)arg_int);

        //-----------------------
        // MethodHandle#invoke() 
        //-----------------------

        // invoke() with exact types - OK -> actually calls invokeExact() behind the scenes
        result = (int) handle.invoke(arg_int, argInteger);

        // implicit conversion of inexact arguments and return type -> OK!
        result = (Integer) handle.invoke(argInteger,argInteger); 

        // Object arguments or return type is OK!
        Object o = handle.invoke(argObject,argObject);

        // Array of the arguments NOT allowed -> throws WrongMethodTypeException - "cannot convert MethodHandle(int,Integer)int to (Object[])int"
        try {
            result = (int) handle.invoke(argArray);
        } catch (WrongMethodTypeException ex) {
            e = ex;
        }
        assert e != null;
        e = null;

        //------------------------------------
        // MethodHandle#invokeWithArguments() 
        //------------------------------------

        // invoke() with exact types - OK
        result = (int) handle.invokeWithArguments(arg_int,arg_int);

        // implicit conversion of inexact arguments and return type -> OK
        result = (Integer) handle.invokeWithArguments(argInteger,argInteger); 

        // Object arguments or return type is OK!
        o = handle.invoke(argObject,argObject);

        // Array of the arguments -> OK
        result = (int) handle.invokeWithArguments(argArray);

        // List of arguments possible -> same as calling invokeWithArguments(list.toArray())
        result = (int) handle.invokeWithArguments(Arrays.asList(argArray));

    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-01-13T09:06:39.910

正如巴尔德所说，这两个调用`invoke`都不`invokeExact`接受作为数组传入的参数。（但是，它们确实接受数组参数。）

```
int[] args = {1,1};

// handle for Math.addExact(int, int)
Object o = handle.invokeExact(1,1); // OK
Object o = handle.invoke(1,1); // OK
Object o = handle.invokeExact(args); // ERROR
Object o = handle.invoke(args); // ERROR 
```

该错误始终是错误的类型异常：

```
java.lang.invoke.WrongMethodTypeException: cannot convert MethodHandle(int, int)int to (Object[])int 
```

所以它不会解包数组。但是在需要的地方传入一个数组是可行的：

```
// handle for Arrays.sort(int[]) 
handle.invokeExact(args); // OK
handle.invoke(args); // OK 
```

正如 Balder 所说，实现所需的行为`invokeWithArguments()`可能会产生相当大的开销。

为了从 varargs 中获得解包参数列表所需的行为，必须将句柄变成一个扩展器：

```
 // handle for Math.addExact(int, int)
 handle = handle.asSpreader(int[].class, 2);
 handle.invokeExact(args); // OK
 handle.invoke(args); // OK 
```

当然，当数组被定义为泛型时，与显式参数传递帐户的功能相同：

```
 Object[] args = new Object[]{1,1};
 // handle for Math.addExact(int, int)
 handle = handle.asSpreader(int[].class, 2);
 handle.invokeExact(args); // ERROR
 handle.invoke(args); // OK 
```

我没有在调用之间进行任何性能比较。对于那些感兴趣的人来说，扩展这个基准非常简单： [http ://rick-hightower.blogspot.de/2013/10/java-invoke-dynamic-examples-java-7.html](http://rick-hightower.blogspot.de/2013/10/java-invoke-dynamic-examples-java-7.html)

### 细节：

本质`invokeWithArguments`上做类似的事情，但每次调用都会这样做：

```
 public Object invokeWithArguments(Object... arguments) throws Throwable {
    MethodType invocationType = MethodType.genericMethodType(arguments == null ? 0 : arguments.length);
    return invocationType.invokers().spreadInvoker(0).invokeExact(asType(invocationType), arguments);
} 
```

因此，一次创建一个吊具并重复使用它，很可能会产生与`invoke`和类似的性能`invokeExact`。*

# sql - 最近的记录，在日期之前，按类别：优化

> ID：16005830
> 
> 赞同：5
> 
> 时间：2013-04-15T00:12:39.643
> 
> 标签：sql, postgresql, for-loop

我在 PostgreSQL 数据库中有一个名为`feeds_up`. 看起来像：

```
| feed_url | isup | hasproblems | observed timestamp with tz    | id (pk)|
|----------|------|-------------|-------------------------------|--------|
| http://b.| t    | f           | 2013-02-27 16:34:46.327401+11 | 15235  |
| http://f.| f    | t           | 2013-02-27 16:31:25.415126+11 | 15236  | 
```

它有大约 300k 行，每五分钟增长约 20 行。我有一个经常运行的查询（每个页面加载）

```
select distinct on (feed_url) feed_url, isUp, hasProblems
    from feeds_up
    where observed <= '2013-02-27T05:38:00.000Z'
    order by feed_url, observed desc; 
```

我在那里放了一个示例时间，那个时间是参数化的。解释分析在[explain.depesz.com](http://explain.depesz.com/s/OBbd)上。大约需要*8s*。疯狂的！

的唯一值只有大约 20 个`feed_url`，所以这看起来效率很低。我以为我会很愚蠢，并在函数中尝试 FOR 循环。

```
CREATE OR REPLACE FUNCTION feedStatusAtDate(theTime timestamp with time zone) RETURNS SETOF feeds_up AS
$BODY$
DECLARE
    url feeds_list%rowtype;
BEGIN
FOR url IN SELECT * FROM feeds_list 
LOOP
    RETURN QUERY SELECT * FROM feeds_up
    WHERE observed <= theTime
    AND feed_url = url.feed_url
    ORDER BY observed DESC LIMIT 1;
END LOOP;
END;
$BODY$ language plpgsql;

select * from feedStatusAtDate('2013-02-27T05:38:00.000Z'); 
```

这只需要*307 毫秒*！

在 SQL 中使用 FOR 循环让我犯了错误，我怎样才能像第一个查询一样进行高效的查询？那可能吗？或者这是 FOR 循环真的是最好的那种事情？

**预计到达时间**

Postgres 版本：i686-pc-linux-gnu 上的 PostgreSQL 9.1.5，由 gcc (SUSE Linux) 4.3.4 [gcc-4_3-branch revision 152973] 编译，32 位

feeds_up 上的索引：

```
CREATE INDEX feeds_up_url
  ON feeds_up
  USING btree
  (feed_url COLLATE pg_catalog."default");

CREATE INDEX feeds_up_url_observed
  ON feeds_up
  USING btree
  (feed_url COLLATE pg_catalog."default", observed DESC);

CREATE INDEX feeds_up_observed
  ON public.feeds_up
  USING btree
  (observed DESC); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T03:52:04.173

假设“id”是连续的并且总是连续的，您可以通过在子查询中找到每个 feed_url 的 MAX(id) 来简化，然后按如下方式提取其余数据：

```
SELECT fu.feed_url, fu.isup, fu.hasproblems, fu.observed
FROM feeds_up fu
JOIN
(
  SELECT feed_url, max(id)  AS id FROM feeds_up
  WHERE observed <= '2013-03-27T05:38:00.000Z'
  GROUP BY feed_url
) AS q USING (id);
ORDER BY fu.feed_url, fu.observed desc; 
```

我做了一个快速测试，这非常有效，只使用“观察到”的索引。

更新：

要使用“observed”而不是“id”（因为记录可能不会按顺序插入），您可以按如下方式修改上述查询：

```
SELECT DISTINCT ON (fu.feed_url) fu.feed_url, fu.isup, fu.hasproblems, fu.observed
FROM feeds_up fu
JOIN
(
  SELECT feed_url, max(observed) as observed FROM feeds_up
  WHERE observed <= '2013-03-27T05:38:00.000Z'
  GROUP BY feed_url
) AS q USING (feed_url, observed)
ORDER BY fu.feed_url, fu.observed desc; 
```

在我的系统上，这几乎与“观察”上的一个索引同时运行。YMMV

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T03:09:19.587

如果您正在谈论优化，您应该描述您拥有的[索引](http://www.postgresql.org/docs/9.2/static/sql-createindex.html)。

我认为“观察到”中绝对强制性的索引

另一个索引是“feed_url,observed”

最后一个在“feed_url”中，可能有用，但我不太确定这个是否会更温暖而不是更好。当然，所有这些的缺点是插入时的性能，但为此我需要更好地了解问题。

您是否考虑过“feed_url”的**[分区](http://www.postgresql.org/docs/9.2/static/ddl-partitioning.html)**（因为您说您只有有限的几个）？否则按日期（月）“观察”？

# sql - 直接或通过客户端-服务器服务连接到 SQL 数据库

> ID：16005831
> 
> 赞同：0
> 
> 时间：2013-04-15T00:12:40.977
> 
> 标签：sql, security, client-server

嗨，我目前正在使用 c# xna 创建游戏，并将允许用户拥有某种配置文件系统。因此他们可以创建帐户、登录视图个人资料、成就等。

当我对此进行测试时，我正在使用 SQL Server Express 的本地实例。在测试中这很好，但是在创建成品时可以简单地更改连接字符串以连接到远程可公开访问的 SQL 服务器，否则会产生安全隐患。

例如，有人可以通过程序找出 SQL 服务器的用户名/密码，然后手动连接并造成严重破坏吗？

我是否应该寻求连接到代表我的客户端程序查询数据库的服务器端应用程序，以防止客户端直接访问我的数据库，或者这是一个不必要的抽象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T05:10:48.620

由于安全问题，最好连接到服务器端应用程序，而不是让程序直接连接到数据库。

首先，将 SQL Server 公开在公共 Internet 上通常被认为是安全性差的，因为它存在许多远程攻击。

其次，一般来说，限制每个用户的数据库访问是困难的或不可行的。创建单个数据库帐户通常不切实际，因此所有用户都使用单个帐户连接到数据库。这个单一帐户需要大量访问数据库才能执行必要的功能，这意味着它还可以用于对数据库执行任意恶意查询。一种温和的可能性是`UPDATE highscores SET score = 1000000000 WHERE user_id = <my user id>`。我见过一些学校管理系统通过对所有用户使用默认的数据库管理员用户名和密码来实现，这些用户名和密码是通过网络以明文形式发送的。这些不是面向公众的，这使它稍微好一点。

与此相关的一些其他问题是：

*   [通过互联网连接 sql server 2005/2008](https://stackoverflow.com/questions/2197727/connect-sql-server-2005-2008-over-internet)
*   [客户端通过 Internet 访问 SQL Server](https://stackoverflow.com/questions/1582744/client-access-to-sql-server-over-the-internet)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T00:17:36.893

[如何使用 Microsoft 管理控制台为 SQL Server 实例启用 SSL 加密](http://support.microsoft.com/kb/316898)

连接字符串（sql server 2012）：

```
Provider=SQLNCLI11;Server=myServerAddress;Database=myDataBase;Trusted_Connection=yes;
Encrypt=yes; 
```

连接字符串（sql server 2008）：

```
Provider=SQLNCLI10;Server=myServerAddress;Database=myDataBase;Trusted_Connection=yes;
Encrypt=yes; 
```

# python - Yandex.Direct - Python 中的 API

> ID：16005835
> 
> 赞同：0
> 
> 时间：2013-04-15T00:13:09.013
> 
> 标签：python, urllib, yandex

我对 Python 比较陌生，但是我试图了解一些可能有人可以帮助解释的中高级代码。

基本上，我正在建立一个到 Yandex.Direct（相当于俄罗斯的 Google Adwords）的 API 连接。在这里您可以找到一个 API 代码示例：[http ://api.yandex.com/direct/doc/examples/python-json.xml](http://api.yandex.com/direct/doc/examples/python-json.xml)

与服务器建立连接的实际代码如下（在 Python 2.7 中）：

```
import json, urllib2, httplib

#name and path to files with the secret key and certificate 
KEYFILE = '/path/to/private.key'
CERTFILE = '/path/to/cert.crt' 

class YandexCertConnection(httplib.HTTPSConnection):
    def __init__(self, host, port=None, key_file=KEYFILE, cert_file=CERTFILE, timeout=30):
        httplib.HTTPSConnection.__init__(self, host, port, key_file, cert_file)

class YandexCertHandler(urllib2.HTTPSHandler):
    def https_open(self, req):
        return self.do_open(YandexCertConnection, req) 
    https_request = urllib2.AbstractHTTPHandler.do_request_

urlopener = urllib2.build_opener(*[YandexCertHandler()])

#address for sending JSON requests
url = 'https://api.direct.yandex.ru/json-api/v4/'

#input data structure (dictionary)
data = {
   'method': 'GetClientInfo',
   'param': ['agrom'],
   'locale': 'en'
}

#convert the dictionary to JSON format and change encoding to UTF-8
jdata = json.dumps(data, ensure_ascii=False).encode('utf8')

#implement the request
response = urlopener.open(url, jdata)

#output results
print response.read().decode('utf8') 
```

我不完全理解这段代码的以下部分：

```
class YandexCertConnection(httplib.HTTPSConnection):
    def __init__(self, host, port=None, key_file=KEYFILE, cert_file=CERTFILE, timeout=30):
        httplib.HTTPSConnection.__init__(self, host, port, key_file, cert_file)

class YandexCertHandler(urllib2.HTTPSHandler):
    def https_open(self, req):
        return self.do_open(YandexCertConnection, req) 
    https_request = urllib2.AbstractHTTPHandler.do_request_

urlopener = urllib2.build_opener(*[YandexCertHandler()]) 
```

如果有人能回答以下问题，将不胜感激： **1.**上面的代码是如何一步一步工作的？例如，不同的对象如何相互作用？详细的解释会很棒！:) **2.** * 在这里表示什么：`urllib2.build_opener(*[YandexCertHandler()])` **3.**如果不使用类，如何在 Python 3.3 中编写上面的代码？

非常感谢你！

艾沃里克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T02:35:16.560

**2** . `func(*args)`意味着`func(arg1, arg2, arg3, ...)`，如果`args`是，`[x]`那么它就是`func(x)`。

在本应如此的示例中`build_opener(YandexCertHandler())`，我认为没有理由使用[参数列表解包](http://docs.python.org/2/tutorial/controlflow.html#unpacking-argument-lists)使代码复杂化。

**3** . 在不使用类的 Python 3.3 中，我将使用[requests](http://docs.python-requests.org/en/latest/)模块：

```
import json
import requests

# name and path to files with the secret key and certificate
KEYFILE = '/path/to/private.key'
CERTFILE = '/path/to/cert.crt' 

# address for sending JSON requests
url = 'https://api.direct.yandex.ru/json-api/v4/'

# input data structure (dictionary)
data = {
   'method': 'GetClientInfo',
   'param': ['agrom'],
   'locale': 'en'
}

# convert the dictionary to JSON format and change encoding to UTF-8
jdata = json.dumps(data, ensure_ascii=False).encode('utf-8')

response = requests.post(url, data=jdata, cert=(CERTFILE, KEYFILE))

print(response.content) 
```

如果它有效（没有测试它），它也适用于 Python 2。

# firefox - 火狐网站固定

> ID：16005838
> 
> 赞同：0
> 
> 时间：2013-04-15T00:13:21.120
> 
> 标签：firefox, web, pinning

是否可以像在 Internet Explorer 9 及更高版本中那样检测您的网站是否固定在 Firefox 中？如果是这样，你怎么做？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-02T07:30:14.447

不，这些 API 是 Microsoft 特定的。

经过一些研究，您也许可以创建一个附加组件来执行此操作：

请参阅[JumpListBuilder](https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIJumpListBuilder)、[JumpListItem](https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIJumpListItem)和[WinTaskbar](https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIWinTaskbar) API

# ruby-on-rails - RoR，多个请求调用API，需要优化

> ID：16005839
> 
> 赞同：1
> 
> 时间：2013-04-15T00:13:37.720
> 
> 标签：ruby-on-rails, api, optimization, instagram

我正在尝试使用[Instagram 的 API ，并且可以](http://rubydoc.info/gems/instagram/0.10.0/frames)[发出](http://rubydoc.info/gems/instagram/0.10.0/Instagram/Client/Tags)请求等，但我正在尝试使用`tag_recent_media`.

我相信他们不支持多个查询？如果我错了，请有人纠正我。在我的控制器中，我有多个查询，我正在这样做：

```
@cats = client.tag_recent_media('cats', options = {:count => 60})
@dogs = client.tag_recent_media('dogs', options = {:count => 60})
@birds = client.tag_recent_media('birds', options = {:count => 60})
@snakes = client.tag_recent_media('snakes', options = {:count => 60}) 
```

我认为这样做会发出大量请求吗？

我正在使用每个变量（我认为这就是你所说的这些？用@s，变量？）并将它放入一个数组中，然后在我的视图文件中对其进行排序：

```
 <% (@cats+@dogs+@birds+@snakes).sort{|a,b| -(a.created_time <=> b.created_time)}.each do |media| %>
        <span>
        <img src="<%= media.images.thumbnail.url %>">
        </span>
    <% end %> 
```

Ruby on Rails 是否有某种方式可以更轻松地发出请求？

# perl - 在 bash 中打印第一次出现的一行

> ID：16005841
> 
> 赞同：2
> 
> 时间：2013-04-15T00:14:44.040
> 
> 标签：perl, bash, awk

我从一个初始的 fasta 文件中提取了 ORF，现在我想为每个成绩单获取最长的 ORF。

用 faSize 提取 ORF 的大小并按大小排序后，我习惯使用的代码是：

```
perl -ane'print unless $x{$F[0]}++' 
```

这次我在使用 perl 命令时遇到了问题。

在提取大小并对成绩单进行排序后，我得到了这样的结果：

```
Singlet_1000_61         3844 
Singlet_2000_73         3508 
Singlet_1000_62         3081 
Singlet_2000_62         3008 
Singlet_3500_48         2973 
Singlet_4000_48        2964 
Singlet_3500_54        2863 
```

我想要的是：

```
Singlet_1000_61         3844 
Singlet_2000_73         3508
Singlet_3500_48         2973
... 
```

perl 命令在这种情况下不起作用。

你对我如何使它工作有什么建议吗？

还是 awk 命令？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T00:38:04.170

如果只看

```
Singlet_1000_61 3844
        ^^^^ 
```

没关系，

```
 perl -F_ -ane'print unless $x{$F[1]}++' 
```

如果你想看

```
Singlet_1000_61 3844
^^^^^^^^^^^^ 
```

然后

```
perl -ane'$F[0] =~ s/_[^_]*\z//; print unless $x{$F[0]}++' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T00:18:25.720

打印第一行的第二部分由下划线分隔的每一行。

```
awk -F_ '!s[$2]++' <<< 'Singlet_1000_61 3844
Singlet_2000_73 3508
Singlet_1000_62 3081
Singlet_2000_62 3008
Singlet_3500_48 2973
Singlet_4000_48 2964
Singlet_3500_54 2863
'
Singlet_1000_61 3844
Singlet_2000_73 3508
Singlet_3500_48 2973
Singlet_4000_48 2964 
```

# binary-search-tree - 考试：删除一个节点到二叉搜索树

> ID：16005843
> 
> 赞同：0
> 
> 时间：2013-04-15T00:14:49.477
> 
> 标签：binary-search-tree

当移除一个有两个孩子的节点时，如果指示使用标准的二叉搜索树节点移除算法，我们应该将其替换为右子树的最小节点还是左子树的最大节点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T00:18:56.377

用左子树中最大的节点替换它:)

与任何来源一样好的来源：[http ://webdocs.cs.ualberta.ca/~holte/T26/del-from-bst.html](http://webdocs.cs.ualberta.ca/~holte/T26/del-from-bst.html)

# sql - PostgreSQL 语法错误时触发

> ID：16005846
> 
> 赞同：-1
> 
> 时间：2013-04-15T00:15:16.213
> 
> 标签：sql, postgresql

我正在尝试创建触发器，但是当我使用 WHEN 语句（如 docs 中）时出现[语法`CREATE TRIGGER`错误](http://www.postgresql.org/docs/current/static/sql-createtrigger.html)。

我当然可以将条件放在函数中，但我想这会慢很多而且不太漂亮

```
CREATE TRIGGER insert_test
AFTER INSERT
ON mountain_stats
FOR EACH ROW
WHEN(NOT EXISTS(SELECT * 
FROM mountain_stats_history
WHERE country=NEW.country AND key=NEW.key AND value=NEW.value))
EXECUTE PROCEDURE update_mountain_stats_history(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T02:18:29.177

这不起作用，因为 WHEN 条件不支持子查询（请参阅此处的[文档](http://www.postgresql.org/docs/current/interactive/sql-createtrigger.html)）。

根据您编写历史更新函数的方式，它不应该特别显眼或不优雅。如果您担心写入量非常大，您可以探索一些技术来优化历史更新过程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T01:28:27.257

将单词 when 替换为 where 单词。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T07:37:33.397

我以为我运行的是 9.1，但实际上我只运行 8.4 并且那里不支持 WHEN 子句。 [http://www.postgresql.org/docs/8.4/static/sql-createtrigger.html](http://www.postgresql.org/docs/8.4/static/sql-createtrigger.html) 我需要将条件放入UDF

# javascript - Meteor：更改子模板而不更改父模板

> ID：16005848
> 
> 赞同：1
> 
> 时间：2013-04-15T00:15:43.767
> 
> 标签：javascript, meteor

如果我有以下模板结构

```
 <template name="A">
            {{> B}}
            {{> C}}
    </template> 
```

在没有模板 A 重新渲染的情况下，如何在 C 更改时进行更新？

我已经尝试过`{{#isolate}}{{> C}}{{/isolate}}`，但这不起作用，并且使用恒定区域也不完全正确，因为这不是恒定区域。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-18T01:19:25.947

从 Meteor 0.7.0.1 开始，重新渲染子模板会导致父模板重新渲染，但不会重新渲染*兄弟*模板。隔离的工作方式相同。

我整理了一个简单的例子，你可以在这里玩：

[https://github.com/alanning/meteor-subtemplate-isolate-test](https://github.com/alanning/meteor-subtemplate-isolate-test)

请记住，此行为可能会随着即将发布的 Meteor UI 版本而改变，以便为 Meteor 1.0 做准备。

# javascript - 如果第三个 td 被占用，警报？

> ID：16005849
> 
> 赞同：1
> 
> 时间：2013-04-15T00:15:54.390
> 
> 标签：javascript, jquery

我有一张这样的表格（它是我真实表格的简化版本）：

```
<table id="tabela"  width="100%" cellspacing="10px">
    <tr>
        <td>2:00:00</td>
        <td>3:00:00</td>
        <td class='free'>
            <input type='radio' name='appointment'/>
        </td>
    </tr>
    <tr>
        <td>4:00:00</td>
        <td>5:00:00</td>
        <td class='busy'>Occupied</td>
    </tr>
    <tr>
        <td>6:00:00</td>
        <td>7:00:00</td>
        <td class='free'>
            <input type='radio' name='appointment'/>
        </td>
    </tr>
</table> 
```

现在我希望当单选按钮被选中并且如果下面的 td 设置为占用（它不是真的在下面，如果我解释正确的话，它是当前 td 的下一个 tr 的第三个 td）来简单地显示警报消息但是我无法让它工作。

我试过这样的事情：

```
$("input[name='appointment']").change(function()
{
    var thisTr = $("#tabela input[name=appointment]:checked")
        .closest('tr')
        .next('tr');

    var thirdTDText = thisTr.children().eq(2).text();
    if(thirdTDText=='Occupied')
    {
        alert('That place is occupied!');
    }
}); 
```

# asp.net-mvc - 在哪里托管我的 MVC4 应用程序？

> ID：16005850
> 
> 赞同：6
> 
> 时间：2013-04-15T00:16:16.307
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我正在寻找支持 MVC4 的托管公司，但我找不到与 Windows Azure 有任何不同的地方——我想在线部署我的 MVC4 应用程序，但我不知道有一家价格合理的托管公司。你能告诉我一份清单吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-15T00:27:14.557

那里有很多我敢肯定，当你用谷歌搜索“mvc 4 hosting”这个词时，会出现。但这里有一些我过去尝试过的，当我用它们托管我的网站时它们是可靠的：

*   [折扣 ASP](http://discountasp.net/sp_mvc-hosting.aspx) - 共享主机

*   [Winhost](http://www.winhost.com/windows-hosting-plans.aspx) - 共享主机

如果您正在寻找基于云的、类似 Azure 的托管，那么您可能需要查看以下内容：

*   [.Net 的亚马逊](http://aws.amazon.com/net/)

*   [AppHarbor](https://appharbor.com/) - 建立在亚马逊之上

此外，如果您要进行共享托管，那么与那些允许完全信任您的网站的人一起托管也很重要。当他们的站点未获得完全信任并导致站点不稳定或根本无法运行时，许多人遇到了与主机提供商的问题。

# ios - 在 cocos2d 中重启当前场景

> ID：16005853
> 
> 赞同：0
> 
> 时间：2013-04-15T00:16:34.013
> 
> 标签：ios, cocos2d-iphone

我想知道在 cocos2d 中重新启动当前场景的正确方法是什么，因为我无法让它正常工作。我正在使用以下代码重新启动实际场景，但只出现黑屏....

```
CCScene *currentScene = [CCDirector sharedDirector].runningScene;
CCScene *newScene = [[[currentScene class] alloc] init];

[[CCDirector sharedDirector] replaceScene:[CCTransitionFade transitionWithDuration:0.7f scene:newScene]]; 
```

注意：我不知道这是否与（我猜不是）此代码是从负责管理暂停菜单和其他内容的 CClayer 子类运行的事实有关。

注意2：这是一个通用的重新启动，我假装它适用于每个场景，所以我谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-02T18:52:57.653

对于遇到同样问题的其他人，这是我发现的解决问题的方法：

```
 Class SceneClass = NSClassFromString(nameOfClass);
[[CCDirector sharedDirector]replaceScene:[CCTransitionFade transitionWithDuration:1.0 scene:[SceneClass scene]]]; 
```

其中nameOfClass是一个字符串，其中包含实现场景重启的类名。这种方式就像一个魅力，你甚至不必#import .h 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T01:01:57.013

我想这与手动分配有关。在大多数情况下，最好调用 cocos2d 的静态构造函数，让它为你处理内存管理。这就是我所做的。-

```
MyClassScene *newScene = [MyClassScene node];
[[CCDirector sharedDirector] replaceScene:[CCTransitionFade transitionWithDuration:kTransitionTime scene:newScene withColor:ccc3(255, 255, 255)]]; 
```

希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T23:58:09.633

尝试这个：

```
CCScene *currentScene = [[CCDirector sharedDirector] runningScene];

[[CCDirector sharedDirector] replaceScene:[CCTransitionFade transitionWithDuration:0.7f scene:[currentScene node]]]; 
```

# c++ - 使用保存的客户端 IP 地址将数据包从服务器发送到特定客户端？

> ID：16005854
> 
> 赞同：1
> 
> 时间：2013-04-15T00:16:36.273
> 
> 标签：c++, client-server, boost-asio, ip-address

例如，假设我正在使用异步服务器并且客户端连接到服务器。服务器保存客户端的 IP 地址、端口号等信息，并将其存储在数据库中以供将来使用，有没有办法获取客户端信息并存储它。我尝试查看[套接字](http://www.boost.org/doc/libs/1_47_0/doc/html/boost_asio/reference/ip__tcp/socket.html)实现，但找不到任何方法来确定客户端用来发送数据的 IP 地址。我还想知道如果我使用 localhost（例如 127.0.0.1）在同一台机器上测试多个客户端会发生什么，并且会以某种方式发生冲突吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T00:31:01.830

使用该[`socket::remote_endpoint()`](http://www.boost.org/doc/libs/release/doc/html/boost_asio/reference/basic_stream_socket/remote_endpoint/overload1.html)方法获取已连接套接字的端点。从同一个远程主机连接的多个客户端将使用不同的端口号，例如`127.0.0.1:1234`，`127.0.0.1:5678`.

# database - 如何在 AS3 中使用 Electroserver 的嵌入式 Derby 数据库？

> ID：16005855
> 
> 赞同：0
> 
> 时间：2013-04-15T00:16:54.870
> 
> 标签：database, actionscript, flash-cs6, actionscript-3

我正在尝试使用电子服务器创建一个在线多人游戏，如下所示：

[http://gamesfromjames.weebly.com/pickit.html](http://gamesfromjames.weebly.com/pickit.html)

我在看electrotank的源代码。不幸的是，我无法在 Flash CS6 中编译它，因为文档类在 mxml 中。（如果有人可以帮助我弄清楚如何在纯 as3 中测试这些示例，那就太好了）我确实在 hte mxml 类中找到了这两个函数：

```
/**
         * Increases your rank by the amount specified by sending a properly formatted message to the plugin.
         */
        private function addToRankClicked():void {
            var ipr:PluginRequest = new PluginRequest();
            ipr.pluginName = "DatabasePlugin";

            var esob:EsObject = new EsObject();
            esob.setString(PluginConstants.ACTION, PluginConstants.TAG_ADD_TO_RANK);
            esob.setInteger(PluginConstants.TAG_ADD_TO_RANK, rankDeltaStepper.value);
            ipr.parameters = esob;
            _es.engine.send(ipr)

        }

        /**
         * Loads your rank from the database by asking the plugin for it.
         */
        private function getRank():void {
            var ipr:PluginRequest = new PluginRequest();
            ipr.pluginName = "DatabasePlugin";
            ipr.zoneId = -1;
            ipr.roomId = -1;

            var esob:EsObject = new EsObject();
            esob.setString(PluginConstants.ACTION, PluginConstants.TAG_GET_RANK);
            ipr.parameters = esob;
            _es.engine.send(ipr)
        } 
```

这就是将东西放入数据库并取出东西所需要的全部还是我错过了什么？如果我要尝试保存聊天历史并在每次用户进入聊天室时显示它，我将如何使用 Electroserver 的 derby 数据库来做呢？

谢谢！

PS 如果 Teresa 在那里阅读这篇文章，你应该推荐他们为这个论坛制作一个电子服务器标签。我还没1500级。。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T19:11:24.023

该示例的数据库部分都在扩展中完成，即 Java 类。您引用的两个函数只是客户端发送插件请求以询问用户的当前排名或增加该排名。

您对任何类型的 SQL 有多熟悉？Derby 和 MySQL 等差不多。你需要设计一个数据库表来存储你想要持久化的数据，然后实现类似于示例代码的 Java 和 SQL 来存储用户的排名并更新它。

# jpa - 在 DB 中搜索时出现 NullPointerException

> ID：16005863
> 
> 赞同：0
> 
> 时间：2013-04-15T00:17:46.537
> 
> 标签：jpa

我有以下实体`Customer`：

```
@Entity
@Table(name = "customer")
@NamedQueries({
@NamedQuery(name = "**Customer.findByEmail**", query = "SELECT c FROM Customer c WHERE c.email = :email"),
(...) 
```

以及以下会话外观方法：

```
public List<Customer> GetPorEmail(String match){
    List customers = em.createNamedQuery("Customer.findByEmail").setParameter("email", match).getResultList();     
    return customers;
} 
```

当我调用该方法时，结果总是`java.lang.NullPointerException`.

我确定`match`在我的数据库中有匹配的电子邮件。

这是如何引起的，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T00:29:04.650

我认为您的 EntityManager 为空。请检查您是否正确注入了 EntityManager 引用并且它不为空。

问候，

# c# - 让统计数据显示在检查员中？

> ID：16005864
> 
> 赞同：0
> 
> 时间：2013-04-15T00:18:04.797
> 
> 标签：c#, unity3d, inspector

我如何让 mainChars 统计信息显示在检查器中？

```
using UnityEngine;
using System.Collections;

public class BaseStats : MonoBehaviour {

    public struct baseStats {
        public string name;
        public int currentLevel;
        public int targetLevel;
        public int currentHp;
        public int maxHp;
        public int currentAp;
        public int maxAp;

        public int strength;
        public int toughness;
        public int agility;
        public int intelligence;
        public int willPower;
        public int luck;

        public int attack;
        public int hitPercentage;
        public int defence;
        public int evasionPercentage;
        public int abilityAttack;
        public int abilityDefence;
        public int abilityDefencePercentage;

        public int currentExp;
        public int targetExp;

        public baseStats(string Name, int CurrentLevel, int TargetLevel, int CurrentHp, int MaxHp, int CurrentAp, int MaxAp, int Strength, int Toughness, int Agility, int Intelligence, int WillPower, int Luck, int Attack, int HitPercentage, int Defence, int EvasionPercentage, int AbilityAttack, int AbilityDefence, int AbilityDefencePercentage, int CurrentExp, int TargetExp) {
            name = Name;
            currentLevel = CurrentLevel;
            targetLevel = TargetLevel;
            currentHp = CurrentHp;
            maxHp = MaxHp;
            currentAp = CurrentAp;
            maxAp = MaxAp;

            strength = Strength;
            toughness = Toughness;
            agility = Agility;
            intelligence = Intelligence;
            willPower = WillPower;
            luck = Luck;

            attack = Attack;
            hitPercentage = HitPercentage;
            defence = Defence;
            evasionPercentage = EvasionPercentage;
            abilityAttack = AbilityAttack;
            abilityDefence = AbilityDefence;
            abilityDefencePercentage = AbilityDefencePercentage;

            currentExp = CurrentExp;
            targetExp = TargetExp;
        }
    }

    void Start() {
        baseStats mainChar = new baseStats(
            "Truth",
            98,
            99,
            7554,
            9999,
            754,
            999,
            255,
            255,
            255,
            255,
            255,
            255,
            255,
            255,
            255,
            100,
            255,
            255, 
            100,
            7773473,
            7777777);

        print(mainChar.currentHp);
    }

} 
```

我希望它可以让每个字符成为检查器中的下拉菜单。我也想要它，这样我就可以代替将 hp 设置为当前和最大值，我也可以将其设置为每个包含当前和最大值的字符的下拉列表，对于 ap 和 exp 也是相同的。先谢谢了！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T00:42:09.227

将 struct baseStats 更改为 class baseStats 并使其可序列化，`Struct`是一种值类型，Unity 不会对其进行序列化，因此更改为`Class`. 原因`[System.Serializable]`是编辑器需要知道在运行预览、关闭场景、打开场景等时如何保存和恢复类数据。

```
public class BaseStatComponent : MonoBehaviour {
    [System.Serializable]
    public class baseStats {
       public int Example;
    }
    public baseStats mainChar; //this will be accessible to inspector now.

    void Start() {
        // This will always create a new instance of baseStats that overrides the values
        // set in inspector.  Remove this line if you want the values set in the
        // inspector to remain.
        mainChar = new baseStats { Example = 12 };
    }
} 
```

`mainChar`现在将显示在检查器中。至于下拉内容，我建议阅读有关[扩展 Unity 编辑器的](http://docs.unity3d.com/Documentation/Components/gui-ExtendingEditor.html)内容。深入研究一个 SO 问题有点[多。](http://docs.unity3d.com/Documentation/ScriptReference/Editor.html)

# java - 使用java中的线程将串行程序转换为并行程序？

> ID：16005866
> 
> 赞同：1
> 
> 时间：2013-04-15T00:18:24.863
> 
> 标签：java, multithreading, parallel-processing, full-text-search

我正在为圣经编写一个文本搜索程序，我想使用线程来划分工作，以减少执行时间。我对 Java 编程比较熟悉，但对整个“线程”来说是全新的。基本上，该程序是拉出单独的圣经书卷，阅读文本，搜索单词，然后拉入下一本书。我想把它分开，以便 4-8 个线程在不同的书上同时工作。

有什么帮助吗？

```
public static void main(String args[]){

    String wordToSearch = "";
    String[] booksOfBible;
    int bookPosition = 0;
    ArrayList<String> finalList = new ArrayList<String>();

    getWord gW = new getWord();
    getBook gB = new getBook();
    checkBook cB = new checkBook();
    wordToSearch = gW.getWord(wordToSearch);
    booksOfBible = gB.getFileList();
    //System.out.println(wordToSearch);
    for(int i = 0; i < booksOfBible.length; i++){
        //System.out.println(booksOfBible[i]);//Test to see if books are in order
        String[] verses = gB.getNextBook(booksOfBible, bookPosition);
        //System.out.println(verses[0]);//Test to see if the books are being read properly
        cB.checkForWord(wordToSearch, verses, booksOfBible[i], finalList);
        bookPosition++;
    }
    for(int i = 0; i < finalList.size(); i++){
        System.out.println(finalList.get(i));
    }
    System.out.println("Word found " + finalList.size() + " times");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T00:25:38.200

您可以创建一个实现`Runnable`并在方法内实现文本搜索的类`run()`。

然后通过使用 Runnable 对象作为构造函数参数创建一个新的 Thread 对象，这可以在新线程中运行

```
Thread t = new Thread(myRunnableObj);
t.start(); 
```

大概您还需要一个用于多个工作线程的数据结构来存储结果。确保使用线程安全/同步数据结构

然而，正如 Andrew Thompson 指出的那样，索引整本圣经可能会更快（例如：[使用 MySql 全文搜索](http://dev.mysql.com/doc/refman/5.0/en/fulltext-search.html)或其他库）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T00:29:57.580

使用 Executors.newFixedThreadPool(nbNeededThreads) 会给你一个 ExecutorService 实例，这会让你提交并行任务。获得“未来”列表后，您可以监控它们并知道它们何时完成。

```
ExecutorService service = Executors.newFixedThreadPool(4);
ArrayList<Future> queue = new ArrayList<>();

for(int i = 0; i < booksOfBible.length; i++){
    Futur futurTask = service.submit(searchingTask);
    queue.add(futurTask);
}

// TODO Monitor queue to wait until all finished. 
```

# opengl - OpenGL 4.3 中的纹理点精灵

> ID：16005871
> 
> 赞同：3
> 
> 时间：2013-04-15T00:19:07.397
> 
> 标签：opengl, texture-mapping, point-sprites

有没有办法将纹理应用于 OpenGL 4.3 中的点精灵？我在互联网上搜索过，但大多数教程和指南都使用仍然支持的旧版本：

```
 glTexEnvi(GL_POINT_SPRITE, GL_COORD_REPLACE, GL_FALSE); 
```

但是，似乎不再支持此功能，并且标准纹理环境似乎不起作用。关于如何做或在哪里可以找到如何做的任何建议？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-15T01:31:22.970

您[在片段着色器中](http://www.opengl.org/wiki/Fragment_Shader#Inputs)[使用`gl_PointCoord`](http://www.opengl.org/wiki/Fragment_Shader#Inputs)。该值从 [0, 1] 穿过点的表面。在进行点渲染时，它是唯一在点表面上发生变化的输入。(0, 0) 是该点的左上角。

您可以根据该值计算您想要的纹理坐标。

# backbone.js - Backbone：清除内存中的所有数据

> ID：16005872
> 
> 赞同：1
> 
> 时间：2013-04-15T00:19:19.323
> 
> 标签：backbone.js, view, destroy

我有一个菜单，点击后会创建主干视图并绑定控件。每次我点击菜单时都会发生这种情况。我需要知道的是在定义和渲染视图之前（在每次菜单单击时）如何从内存中清除骨干对象。

否则，每次单击菜单时，主干都会创建一个新视图并重新绑定所有控件。所以我得到这样的东西：

```
r {cid: "view1", options: Object, $el: b.fn.b.init[1], el: div#templatePlaceholder, constructor: function…}
r {cid: "view2", options: Object, $el: b.fn.b.init[1], el: div#templatePlaceholder, constructor: function…}
r {cid: "view3", options: Object, $el: b.fn.b.init[1], el: div#templatePlaceholder, constructor: function…} 
```

注意：DOM 只显示一个渲染

编辑：代码：

```
 var app = {
                Collection: Backbone.Collection.extend({}),
                Model: Backbone.Model.extend({}),
                View: Backbone.View.extend({
                    initialize: function(){
                        this.setElement($('#templatePlaceholder'));
                    },
                    render: function () {
                        var that = this;
                        Q.when(formDataGet.execute()).then(function (data) {
                            that.$el.html(data);
                       });
                    },
                    events: {
                        "click button[id=lbtn]": "goLeft",
                        "click button[id=rbtn]": "goRight"  
                    },

                    goLeft: function () {
                        // Button clicked
                        console.log(this);
                    },
                    goRight: function () {
                        // Button clicked
                        console.log(this);
                    }

                }),

            };

            var view = new app.View({
            });

            view.render(); 
```

每次单击菜单项时都会触发此代码。这创造了一个新的观点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T02:13:47.177

我可以在核心骨干中想到两种方法（可能还有更多，但这是一个开始）

1.  持有对视图的引用，当需要关闭菜单时，[`remove()`](http://backbonejs.org/#View-remove)在视图上调用

2.  您不必删除视图，您可以简单地显示/隐藏它，没有错

3.  使用 Marrionette / Chappline / LayoutManager 有一些结构化的方式来维护您的视图

有关您的应用程序/结构的更多信息以及哪些用例将使我能够提供更多帮助

# python - 如何从两点之间的文本文件中打印信息？

> ID：16005875
> 
> 赞同：0
> 
> 时间：2013-04-15T00:20:04.680
> 
> 标签：python

我正在做一个项目并且遇到了麻烦。请记住，我是初学者程序员。

我想要做的是在两点之间打印文本文件中的信息。

我的代码：

```
AccountName=input("What Is The Name Of The Account Holder?")

Accounts=open("Accounts.txt", "r")
lines = Accounts.readlines()
Accounts.close

for i, line in enumerate(lines):
    if AccountName in line:
        print(line) 
```

文本文件：

`Alex Peters Aken South Carolina Citizens Bank 865074 $25,000 09/25/2013 12401 (845)545-5555 Joe Small Albany New York Key Bank 763081 $4,800 10/15/2013 24503 (845)734-5555` 假设我想从“Joe Small”打印到 (845)734-5555 我该怎么做？

（这些信息都不是真实的）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T00:24:46.140

如果您知道有问题的行，并且您使用过`.readlines`，那么您可以找到所需的子列表：

```
sublines = lines[lines.index('Joe Small'):lines.index('(845)734-5555')+1] 
```

然后，您可以打印该列表中的每一行。

但是请注意，如果列表中有多个唯一行，则此方法将不起作用。

我会采取一种更像的方法：

```
startLine = 'Joe Small'
endLine = '(845)734-5555'

shouldPrint = False

for line in f:
    line = line.strip()
    if shouldPrint:
        print line

    if line == startLine:
        shouldPrint = True
    elif line == endLine:
        shouldPrint = False 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T00:24:34.387

您可以将 for 循环更改为（在 Python3 中）

```
line_index = 0
while line_index < len(lines):
    if AccountName in lines[line_index]:
        for line in lines[line_index:line_index+9]:
            print(line, end="")
        line_index += 9
    else:
        line_index += 1 
```

在 Python 2.X 中，打印语句应该是：

```
print line, 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T00:27:33.833

我个人喜欢sapi的解决方案，

```
Accounts=open("file.txt", "r")
lines = Accounts.readlines()
lines = [line.strip() for line in lines]
Accounts.close()

accounts = zip(*[iter(lines)]*9)

for account in accounts:
    if "Joe Small" in account:
        print account 
```

# grails - Grails - 构建的最小安装

> ID：16005877
> 
> 赞同：0
> 
> 时间：2013-04-15T00:20:14.930
> 
> 标签：grails, build, grails-orm

我们*定义*了一个平台环境，其中包括特定的 Java、Ant 和 Subversion 版本。这个想法是，拥有这个平台的人可以签出我们存储库中的任何项目，运行构建命令，并且无需下载任何软件或进行任何特定设置即可构建该项目以使构建工作。

这主要是为了我个人方便（毕竟我定义了这个平台）。我运行 Jenkins 服务器，并希望能够构建任何项目而无需经历很多 conniptions。Jenkins 应该能够在没有任何特定说明或环境设置的情况下进行检查和构建。

如果需要特殊产品，我通常会要求将该产品包含在项目的目录结构中。例如，如果一个项目依赖于 Ant-Contrib 来构建，则`antcontrib.jar`应该在项目中，并且`<taskdef>`应该指向项目中的那个 jar。

我们有一个 Grails 项目，我希望有某种方法可以在该项目中包含一个最小的 Grails 安装，以便进行构建。我只需要运行以下命令：

*   `grails clean`
*   `grails war`

我知道出于开发原因，您可能需要完整的 Grails 安装，但我只对构建本身感兴趣。

我想在项目中安装 Grails，但我下载了 Grails，在 grails/dist 文件夹中，有 33 个*Grails* jar。在该`lib`文件夹下，有 300 多个罐子。在该`src`文件夹下，还有另外 33 个*Grails* jar。这有点太多了，不能作为结帐的一部分包含在项目中，这样我就可以进行构建了。

是否有一个紧凑的子集可用于运行构建？

如果没有，我将不得不在我们的构建服务器上安装 Grails。这不是什么大问题，但这确实意味着任何想要构建这个项目的人都必须首先安装 Grails。另外，我必须记录该项目需要特殊安装以及它是如何完成的以及所有其他依赖项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T02:45:26.687

如果您的 Grails 版本足够新（2.1 或更高版本），实际上有一个内置命令可以生成包装脚本，无需安装 Grails 即可使用，这正是您提到的目的。

文档说：

> Grails Wrapper 允许构建 Grails 应用程序，而无需安装 Grails 并配置 GRAILS_HOME 环境变量。包装器包括一个小的 shell 脚本和几个小的引导 jar 文件，这些文件通常会与项目的其余部分一起签入源代码控制。第一次执行包装器时，它将下载并配置 Grails 安装。这个包装器使设置开发环境、配置 CI 和管理对 Grails 未来版本的升级变得更加简单。当应用程序升级到 Grails 的下一个版本时，包装器会更新并签入源代码控制系统，并且下次开发人员更新他们的工作区并运行包装器时，他们将自动使用正确的 Grails 版本。

在此处查看完整的文档：http: [//grails.org/doc/2.1.0/guide/single.html#wrapper](http://grails.org/doc/2.1.0/guide/single.html#wrapper)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T01:35:07.207

我创建了一个 pom 来使用 .mavenize 我的测试 grails 应用程序`create-pom`。它看起来像下面。需要注意的关键事项：

*   Grails 版本可以设置您需要的任何版本。无需安装 Grails。Maven 会相应地拉取依赖项。
*   `grails-dependency`请注意将提取 grails 需要的基本项目的依赖项。
*   请注意插件部分中的 Maven 插件`grails-maven-plugin`。这个插件有助于在 Grails 应用程序中运行 maven 生命周期。
*   我们还`fork`为这个 grails 应用程序构建提供了 JVM 选项，而不是在需要时使用 maven 重载 JVM。

`mvn install`一旦所有必要的依赖项都完成了，您只需在构建框中安装 Apache Maven即可运行创建 WAR 。

```
 <modelVersion>4.0.0</modelVersion>
    <groupId>com.example.test</groupId>
    <artifactId>TestGrailsApp</artifactId>
    <packaging>grails-app</packaging>
    <version>0.1</version>
    <name>TestGrailsApp</name>
    <description>TestGrailsApp</description>

    <properties>
        <grails.version>2.2.0</grails.version>
    </properties>

    <dependencies>
        <dependency>
            <groupId>org.grails</groupId>
            <artifactId>grails-dependencies</artifactId>
            <version>${grails.version}</version>
            <type>pom</type>
        </dependency>
        <dependency>
            <groupId>org.grails</groupId>
            <artifactId>grails-test</artifactId>
            <version>${grails.version}</version>
            <scope>test</scope>
        </dependency>

        <dependency>
            <groupId>org.grails</groupId>
            <artifactId>grails-plugin-testing</artifactId>
            <version>${grails.version}</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>org.grails.plugins</groupId>
            <artifactId>tomcat</artifactId>
            <version>${grails.version}</version>
            <scope>provided</scope>
            <type>zip</type>
        </dependency>

    </dependencies>

    <build>
        <pluginManagement />

        <plugins>
     ...
            <plugin>
                <groupId>org.grails</groupId>
                <artifactId>grails-maven-plugin</artifactId>
                <version>${grails.version}</version>
                <configuration>
                    <!-- Whether for Fork a JVM to run Grails commands -->
                    <fork>true</fork>
                </configuration>
                <extensions>true</extensions>
            </plugin>
        </plugins>
    </build>
.....

</project> 
```

# android-layout - 按键反馈弹出窗口在软键盘中按键时显示空白窗口

> ID：16005879
> 
> 赞同：2
> 
> 时间：2013-04-15T00:20:20.793
> 
> 标签：android-layout, android-softkeyboard

我使用 android-sdk 中 SoftKeyboard 示例中的代码片段实现了自定义软键盘。但是，在模拟器上运行apk时，自定义软键盘弹出后，当一个按键按下时，按键预览弹窗只显示一个小的空白方形窗口，并没有显示里面按下的按键字符预览窗口。

有人可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-06T01:15:13.503

你忘了添加

```
 android:popupCharacters="w" 
```

到您的关键条目

示例条目如下：

```
<Key android:codes="87" android:keyLabel = "W" android:popupKeyboard="@xml/popup" android:popupCharacters="w"  /> 
```

# python - Pandas：从表格布局到矩阵布局

> ID：16005883
> 
> 赞同：1
> 
> 时间：2013-04-15T00:20:56.170
> 
> 标签：python, pandas

我有一个看起来像的 DataFrame（它是一组组合）：

```
 A  B  C  
a  1  1  3  
b  1  2  4  
c  2  1  5  
d  2  2  6 
```

我想将其转换为一个矩阵，其中新列和索引是其中两列 (`A`和`B`) 的唯一值，而单元格是第三列 ( `C`) 中这两个唯一值之间的连接。

作为`A`索引，`B`作为列和`C`单元格值，我会有类似的东西：

```
 B
A  1 2
1  3 4  
2  5 6 
```

为了生成这个新的“矩阵”DataFrame，我通过 columns 中的唯一值迭代地过滤原始 DF `A`，然后将该`C`列作为一个 Series，例如：

```
for ind in unique_indexes: # made by using .drop_duplicates on the column
    rows = original_table[(original_table['A'] == ind)] 
    new_series = rows['C'] 
```

然后，我尝试将所有这些系列作为新 DataFrame 中的行粘合在一起，但不能将它们中的任何一个放到新的 DataFrame 中（在文档或[类似](http://pandas.pydata.org/pandas-docs/stable/merging.html)`append`问题[之后](https://stackoverflow.com/questions/10715965/add-one-row-in-a-pandas-dataframe)），例如`concat`

```
# with suitable placement in 'for' loop
df = DataFrame()
df.append(new_series)

>>> print df
Empty DataFrame 
```

是否有a）进行这种转换的更好方法，或者b）我在将系列附加到DataFrame时缺少的步骤？

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T00:28:43.127

你想做一个`pivot_table`像这样的吗？

```
>>> df
   A  B  C
a  1  1  3
b  1  2  4
c  2  1  5
d  2  2  6
>>> pd.pivot_table(df, rows="A", cols="B", values="C")
B  1  2
A      
1  3  4
2  5  6 
```

# css - 通过 css3/javascript 滚动页面背景图像过渡

> ID：16005886
> 
> 赞同：5
> 
> 时间：2013-04-15T00:21:15.547
> 
> 标签：css, scroll, transition

当通过滚动或链接按钮移动到下一个或上一个 div 时，我正在为页面的背景图像（动画）过渡寻找一些解决方案。这是示例站点[http://zurb.com/manifesto](http://zurb.com/manifesto)背景，对象沿滚动移动/动画。如果有人可以帮助这项技术。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-15T00:31:37.130

您正在寻找的是一个**视差滚动**插件。以下是一些带有几个选项的链接：

*   [http://www.impressivewebs.com/parallax-scrolling-scripts-plugins/](http://www.impressivewebs.com/parallax-scrolling-scripts-plugins/)
*   [http://smashinghub.com/7-jquery-parallax-and-scrolling-effect-plugins.htm](http://smashinghub.com/7-jquery-parallax-and-scrolling-effect-plugins.htm)
*   [http://idesignow.com/jquery/9-jquery-parallax-scrolling-plugins-tutorials.html#.UWtI4LWZ-vs](http://idesignow.com/jquery/9-jquery-parallax-scrolling-plugins-tutorials.html#.UWtI4LWZ-vs)

这里有几个教程：

*   [http://richardshepherd.com/smashing/parallax/](http://richardshepherd.com/smashing/parallax/)
*   [http://net.tutsplus.com/tutorials/html-css-techniques/simple-parallax-scrolling-technique](http://net.tutsplus.com/tutorials/html-css-techniques/simple-parallax-scrolling-technique)
*   [http://pepsized.com/merry-scrolling-with-skrollr-js/](http://pepsized.com/merry-scrolling-with-skrollr-js/)

一旦您知道它的名称，您将能够找到更多示例和教程来帮助您。

# compression - 微控制器中的数据压缩 (DSPIC33E)

> ID：16005889
> 
> 赞同：0
> 
> 时间：2013-04-15T00:21:27.390
> 
> 标签：compression, microcontroller

如何在 MCU 中压缩数据？

MCU 有一个记录电压、电流和时间戳的 ADC 它应该将其保存到 ram 中，当 ram 已满时，将其发送到板外存储器（SD 卡）

为了最大化发送的数据，需要我们将数据压缩成这种格式的数据

[YY][MM][DD][HH][MM][SS][电压][电流]

假设每个框的值为 8 位，那么加起来，每个数据日志有 64 位 将收集超过 1000 个数据日志

压缩它并防止冗余的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T16:04:36.517

如果您每秒都在获取数据，那么您无需继续记录时间。写入第一个时间值，然后您可以假设每个后续值都是在 1 秒后记录的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T17:01:36.387

由于两个数据集之间的差异非常有限 - 你最好只记录增量，即当前值与前一个值的差异。仅在开始时 - 记录完整的值。

# extjs - EXT JS 4 使用模型关联来渲染网格显示值

> ID：16005891
> 
> 赞同：6
> 
> 时间：2013-04-15T00:21:34.550
> 
> 标签：extjs, extjs4, extjs-mvc

# 细节

我有一个用于显示发票信息的网格。使用 Invoice 存储填充网格，Invoice 存储使用 Invoice 模型，Invoice 模型与 InvoiceStatus 模型具有“具有一个”关联，主键为“id”，前键为“invoice_status_id”。

# 问题

我不确定如何使 Invoice Grid 的“Status”列的显示值使用插入 invoice_status_id 的关联模型“name”。我知道我需要创建一个渲染器来执行此操作，但是我仍然得到一个空值。Invoice 和 InvoiceStatus 存储都填充了正确的值。

**状态列渲染**

```
renderer: function(value, metaData, record, rowIndex, colIndex, store, view) {
    return record.getStatus().get('name');
}, 
```

**发票商店**

```
Ext.define('MyApp.store.Invoice', {
    extend: 'Ext.data.Store',

    requires: [
        'MyApp.model.InvoiceModel'
    ],

    constructor: function(cfg) {
        var me = this;
        cfg = cfg || {};
        me.callParent([Ext.apply({
            autoLoad: true,
            autoSync: true,
            model: 'MyApp.model.InvoiceModel',
            remoteSort: true,
            storeId: 'StoreInvoce',
            proxy: {
                type: 'rest',
                url: '/api/invoice',
                reader: {
                    type: 'json',
                    root: 'data'
                }
            }
        }, cfg)]);
    }
}); 
```

**发票状态存储**

```
Ext.define('MyApp.store.InvoiceStatus', {
    extend: 'Ext.data.Store',
    alias: 'store.InvoiceStatus',

    requires: [
        'MyApp.model.InvoiceStatus'
    ],

    constructor: function(cfg) {
        var me = this;
        cfg = cfg || {};
        me.callParent([Ext.apply({
            autoLoad: true,
            autoSync: true,
            model: 'MyApp.model.InvoiceStatus',
            remoteSort: true,
            storeId: 'MyJsonStore1',
            proxy: {
                type: 'rest',
                url: '/api/invoice_status',
                reader: {
                    type: 'json',
                    root: 'data'
                }
            }
        }, cfg)]);
    }
}); 
```

**发票型号**

```
Ext.define('MyApp.model.InvoiceModel', {
    extend: 'Ext.data.Model',

    uses: [
        'MyApp.model.InvoiceStatus'
    ],

    fields: [
        {
            mapping: 'id',
            name: 'id',
            type: 'int'
        },
        {
            mapping: 'client_id',
            name: 'client_id',
            type: 'int'
        },
        {
            mapping: 'client_name',
            name: 'client_name',
            type: 'string'
        },
        {
            dateFormat: 'Y-m-d',
            dateReadFormat: '',
            mapping: 'issue_date',
            name: 'issue_date',
            sortType: 'asDate',
            type: 'date'
        },
        {
            dateFormat: 'Y-m-d',
            mapping: 'due_date',
            name: 'due_date',
            sortType: 'asDate',
            type: 'date'
        },
        {
            mapping: 'payment_date',
            name: 'payment_date',
            sortType: 'asDate',
            type: 'date',
            useNull: true
        },
        {
            name: 'amount'
        },
        {
            mapping: 'invoice_status_id',
            name: 'invoice_status_id',
            sortType: 'asInt',
            type: 'int'
        }
    ],

    hasOne: {
        model: 'MyApp.model.InvoiceStatus',
        foreignKey: 'invoice_status_id',
        getterName: 'getStatus'
    }
}); 
```

**发票状态模型**

```
Ext.define('MyApp.model.InvoiceStatus', {
    extend: 'Ext.data.Model',

    fields: [
        {
            mapping: 'id',
            name: 'id',
            type: 'int'
        },
        {
            mapping: 'name',
            name: 'name',
            type: 'string'
        }
    ]
}); 
```

**发票网格**

```
Ext.define('MyApp.view.ApplicationViewport', {
    extend: 'Ext.container.Viewport',

    requires: [
        'MyApp.view.ClearTriggerField'
    ],

    layout: {
        type: 'border'
    },

    initComponent: function() {
        var me = this;

        Ext.applyIf(me, {
            items: [
                {
                    xtype: 'header',
                    region: 'north',
                    height: 100,
                    items: [
                        {
                            xtype: 'image',
                            height: 100,
                            width: 250,
                            alt: 'Logo',
                            src: 'images/logo.gif',
                            title: 'Logo'
                        }
                    ]
                },
                {
                    xtype: 'container',
                    region: 'center',
                    layout: {
                        type: 'card'
                    },
                    items: [
                        {
                            xtype: 'container',
                            width: 150,
                            layout: {
                                type: 'border'
                            },
                            items: [
                                {
                                    xtype: 'gridpanel',
                                    collapseMode: 'mini',
                                    region: 'west',
                                    split: true,
                                    autoRender: false,
                                    maxWidth: 300,
                                    width: 250,
                                    bodyBorder: false,
                                    animCollapse: false,
                                    collapsed: false,
                                    collapsible: true,
                                    hideCollapseTool: true,
                                    overlapHeader: false,
                                    titleCollapse: true,
                                    allowDeselect: true,
                                    columnLines: false,
                                    forceFit: true,
                                    store: 'ClientDataStor',
                                    dockedItems: [
                                        {
                                            xtype: 'toolbar',
                                            dock: 'top',
                                            items: [
                                                {
                                                    xtype: 'cleartrigger'
                                                },
                                                {
                                                    xtype: 'tbfill'
                                                },
                                                {
                                                    xtype: 'button',
                                                    icon: '/images/settings.png'
                                                }
                                            ]
                                        }
                                    ],
                                    columns: [
                                        {
                                            xtype: 'templatecolumn',
                                            tpl: [
                                                '<img class="pull-left client-menu-image" src="/images/{type}.png"><div class="client-menu-name">{name}</div><div class="client-menu-type">{type}</div>'
                                            ],
                                            dataIndex: 'id',
                                            text: 'Client'
                                        }
                                    ],
                                    selModel: Ext.create('Ext.selection.RowModel', {

                                    }),
                                    plugins: [
                                        Ext.create('Ext.grid.plugin.BufferedRenderer', {

                                        })
                                    ]
                                },
                                {
                                    xtype: 'gridpanel',
                                    region: 'center',
                                    title: 'Invoices',
                                    titleCollapse: false,
                                    forceFit: true,
                                    store: 'Invoice',
                                    columns: [
                                        {
                                            xtype: 'numbercolumn',
                                            maxWidth: 120,
                                            minWidth: 50,
                                            dataIndex: 'id',
                                            groupable: false,
                                            lockable: true,
                                            text: 'ID',
                                            tooltip: 'Invoice ID',
                                            format: '0'
                                        },
                                        {
                                            xtype: 'numbercolumn',
                                            hidden: true,
                                            maxWidth: 120,
                                            minWidth: 50,
                                            dataIndex: 'client_id',
                                            groupable: true,
                                            text: 'Client ID',
                                            format: '0'
                                        },
                                        {
                                            xtype: 'gridcolumn',
                                            renderer: function(value, metaData, record, rowIndex, colIndex, store, view) {
                                                return record.getStatus().get('name');
                                            },
                                            maxWidth: 200,
                                            minWidth: 100,
                                            dataIndex: 'invoice_status_id',
                                            text: 'Status'
                                        },
                                        {
                                            xtype: 'datecolumn',
                                            maxWidth: 200,
                                            minWidth: 100,
                                            dataIndex: 'issue_date',
                                            text: 'Issue Date',
                                            format: 'd M Y'
                                        },
                                        {
                                            xtype: 'datecolumn',
                                            maxWidth: 200,
                                            minWidth: 100,
                                            dataIndex: 'due_date',
                                            text: 'Due Date',
                                            format: 'd M Y'
                                        },
                                        {
                                            xtype: 'datecolumn',
                                            maxWidth: 200,
                                            minWidth: 100,
                                            dataIndex: 'payment_date',
                                            text: 'Payment Date',
                                            format: 'd M Y'
                                        },
                                        {
                                            xtype: 'templatecolumn',
                                            summaryType: 'sum',
                                            maxWidth: 150,
                                            minWidth: 50,
                                            tpl: [
                                                '${amount}'
                                            ],
                                            defaultWidth: 80,
                                            dataIndex: 'amount',
                                            groupable: true,
                                            text: 'Amount'
                                        }
                                    ],
                                    features: [
                                        {
                                            ftype: 'grouping'
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ]
        });

        me.callParent(arguments);
    }

}); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-15T03:27:38.163

我设法通过使用回调函数使关联查找工作，但发现自己简单地从商店进行查找要容易得多。

# 第一步

我将代理从 InvoiceStatus 存储移到 InvoiceStatus 模型上，并使 InvoiceStatus 存储自动加载。

# 第二步

我更改了 Status 列的呈现方法，以从 InvoiceStatus 存储中查找显示名称，如下所示。

```
renderer: function(value, metaData, record, rowIndex, colIndex, store, view) {
    var store = Ext.data.StoreManager.lookup('InvoiceStatus');
    return store.getById(value).get('name');
}, 
```

这被证明是一个更简单的解决方案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-05T14:19:13.087

你的 hasOne 应该是这样的：

```
hasOne: {
    name:           'status',
    instanceName:   'status',
    associationKey: 'status',
    model:          'MyApp.model.InvoiceStatus',
    foreignKey:     'invoice_status_id',
    getterName:     'getStatus',
    setterName:     'setStatus'
} 
```

ExtJS 4.2.2 的以下补丁将允许您在`dataIndex: 'status.name'`没有任何额外渲染器的情况下进行设置。网格将显示一切正常，但排序不起作用。

此解决方案不适用于异步（延迟）状态加载。

```
Ext.view.Table.prototype.renderCell = function(column, record, recordIndex, rowIndex, columnIndex, out) {
    var me = this,
        selModel = me.selModel,
        cellValues = me.cellValues,
        classes = cellValues.classes,
        // fieldValue = record.data[column.dataIndex]; // patched
        fieldValue = null,
        cellTpl = me.cellTpl,
        fullIndex, value, clsInsertPoint;

    // Patch start
    if (column.dataIndex && column.dataIndex.indexOf('.') > 0) {
        var associationParts = column.dataIndex.split('.'),
            v = record;

        for (var i = 0; i < associationParts.length-1; i++) {
            v = v['get' + associationParts[i].charAt(0).toUpperCase() + associationParts[i].slice(1)]();
        }
        fieldValue = v.get(associationParts[associationParts.length-1]);
    }
    else {
        fieldValue = record.data[column.dataIndex];
    }
    // Patch end

    cellValues.record = record;
    cellValues.column = column;
    cellValues.recordIndex = recordIndex;
    cellValues.rowIndex = rowIndex;
    cellValues.columnIndex = columnIndex;
    cellValues.cellIndex = columnIndex;
    cellValues.align = column.align;
    cellValues.tdCls = column.tdCls;
    cellValues.innerCls = column.innerCls;
    cellValues.style = cellValues.tdAttr = "";
    cellValues.unselectableAttr = me.enableTextSelection ? '' : 'unselectable="on"';

    if (column.renderer && column.renderer.call) {
        fullIndex = me.ownerCt.columnManager.getHeaderIndex(column);
        value = column.renderer.call(column.scope || me.ownerCt, fieldValue, cellValues, record, recordIndex, fullIndex, me.dataSource, me);
        if (cellValues.css) {
            // This warning attribute is used by the compat layer
            // TODO: remove when compat layer becomes deprecated
            record.cssWarning = true;
            cellValues.tdCls += ' ' + cellValues.css;
            delete cellValues.css;
        }
    } else {
        value = fieldValue;
    }
    cellValues.value = (value == null || value === '') ? '&#160;' : value;

    // Calculate classes to add to cell
    classes[1] = column.getCellId();

    // On IE8, array[len] = 'foo' is twice as fast as array.push('foo')
    // So keep an insertion point and use assignment to help IE!
    clsInsertPoint = 2;

    if (column.tdCls) {
        classes[clsInsertPoint++] = column.tdCls;
    }
    if (me.markDirty && record.isModified(column.dataIndex)) {
        classes[clsInsertPoint++] = me.dirtyCls;
    }
    if (column.isFirstVisible) {
        classes[clsInsertPoint++] = me.firstCls;
    }
    if (column.isLastVisible) {
        classes[clsInsertPoint++] = me.lastCls;
    }
    if (!me.enableTextSelection) {
        classes[clsInsertPoint++] = me.unselectableCls;
    }
    if (cellValues.tdCls) {
        classes[clsInsertPoint++] = cellValues.tdCls;
    }
    if (selModel && selModel.isCellModel && selModel.isCellSelected(me, recordIndex, columnIndex)) {
        classes[clsInsertPoint++] = (me.selectedCellCls);
    }

    // Chop back array to only what we've set
    classes.length = clsInsertPoint;

    cellValues.tdCls = classes.join(' ');

    cellTpl.applyOut(cellValues, out);

    // Dereference objects since cellValues is a persistent var in the XTemplate's scope chain
        cellValues.column = null;
}; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-15T00:37:50.997

看起来您需要在子模型上设置`belongsTo`关联。`InvoiceStatus`您会认为在一个方向上定义关联会自动在另一个方向上创建关联，但显然情况并非如此，您必须在父级和子级上都定义关联。有关更详细的说明，请参见此处：[为什么我的 ExtJS Store Association 不起作用](https://stackoverflow.com/questions/13457470/why-isnt-my-extjs-store-association-working)

# c++ - 来自基类的函数被隐藏在子类中。我该如何解决？

> ID：16005894
> 
> 赞同：0
> 
> 时间：2013-04-15T00:22:30.613
> 
> 标签：c++, inheritance

在基类中，我有一个函数`GetDetections`，它接受一个字符串文件名，构造一个特性集，并将其工作推迟到一个纯虚函数`GetDetections`。

在子类中，我实现了这个虚函数。

在`main`中，我有一个子类的实例，并`GetDetections`使用文件名调用。我认为这会调用接受字符串参数的基类的非虚拟函数，但这不会编译。错误是：

> prog.cpp：在函数'int main（）'中：
> 
> prog.cpp:33:48: 错误: 没有匹配函数调用'SubClass::GetDetections(const char [13])'</p>
> 
> prog.cpp:33:48: 注意：候选人是：
> 
> prog.cpp:26:9: 注意: virtual int SubClass::GetDetections(const std::vector&) const prog.cpp:26:9: 注意: 参数 1 从 'const char [13]' 到 ' 没有已知的转换const std::vector&'</p>

这是代码。（也发布在[http://ideone.com/85Afyx](http://ideone.com/85Afyx)）

```
#include <iostream>
#include <string>
#include <vector>

struct Feature {
  float x;
  float y;
  float value;
};

class BaseClass {
  public:
    int GetDetections(const std::string& filename) const {
        // Normally, I'd read in features from a file, but for this online
        // example, I'll just construct an feature set manually.
        std::vector<Feature> features;
        return GetDetections(features);
    };
    // Pure virtual function.
    virtual int GetDetections(const std::vector<Feature>& features) const = 0;
};

class SubClass : public BaseClass {
  public:
    // Giving the pure virtual function an implementation in this class.
    int GetDetections(const std::vector<Feature>& features) const {
        return 7;
    }
};

int main() {
    SubClass s;
    std::cout << s.GetDetections("testfile.txt");
} 
```

我试过了：

*   在子类中声明`GetDetections`为`int GetDetections`, `virtual int GetDetections`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T00:26:33.493

在派生类中实现虚函数，隐藏`GetDirections`基类中的重载函数。

尝试这个：

```
using BaseClass::GetDetections;
int GetDetections(const std::vector<Feature>& features) const {
    return 7;
} 
```

对于子类

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T00:24:30.530

重载的虚函数被隐藏。但是，您可以使用其限定名称调用`BaseClasse`'s`GetDetections`

```
std::cout << s.BaseClass::GetDetections("testfile.txt"); 
```

# r - R，获取矩阵中行向量的子集

> ID：16005896
> 
> 赞同：1
> 
> 时间：2013-04-15T00:22:36.367
> 
> 标签：r, vector, matrix, subset

在 R 中，我想创建一个矩阵，它是`mat2`基于存储在另一个向量中的某些标准的矩阵的子集`km$cluster$`。具体来说，我想获得一个子集，`mat2`其中的行名`km$cluster[km$cluster == 3]`（即来自 kmeans 聚类的集群 3 中的向量）等于`mat2`

1.  我如何得到这个子集`mat2`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T00:41:05.097

这应该有效吗？让我知道它是否没有。首先，获取所有相关的行名：

```
clust3 <- row.names(km$cluster[km$cluster == 3]) 
```

现在用于`subset`到达您需要的地方：

```
subset(mat2, row.names(mat2) %in% clust3) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T00:45:05.363

```
mat2[which(km$cluster == 3), , drop=FALSE] 
```

应该可以工作，假设 km 的第 i 行对应于 mat2 的第 i 行

# python - 读取字符串位置

> ID：16005897
> 
> 赞同：2
> 
> 时间：2013-04-15T00:22:40.220
> 
> 标签：python, string

我正在努力解决python中的一个基本问题。我需要在某个位置读取一个字符串才能修改它。

示例：对于字符串，`'abcd'`我想读取第 3 个位置（实际上是第 2 个，因为您从 0 开始）并将其更改为字母表的下一个字母，`'abdd'`. 但是，如果 string 碰巧`'abrd'`应该更改为`'absd'`，等等。所以，我需要在特定位置读取和写入，并让其他所有内容保持不变；应该是世界上最简单的事情，但我找不到怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T00:27:12.570

您的问题的核心答案很简单：使用列表切片语法：

```
>>> string='abcd'
>>> print string[:2] + 'd' + string[3:]
abdd 
```

如果您可以假设只增加字符串的序数值是安全的，那么您可以这样做：

```
>>> string='abrd'
>>> string=string[:2] + chr(ord(string[2]) + 1) + string[3:] 
```

由于您的问题中未指定，因此我假设这就是您所需要的。如果您想从“z”循环到“a”，或者专门处理不同的字母大小写或 unicode 字符集，您可能会发现一些粗略的补丁。

如果您*确实*有比增加 更复杂的问题`ord`，请考虑使用[转换表](http://docs.python.org/2/library/string.html#string-functions)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T00:34:58.040

除了@kojiro 的回答。另一种方法是将*字符串*切换到*列表*并将其加入。例如：

```
S = 'abcd'
// Convert to list
L = list(S)
// Change 3rd position
L[3] = 'd'
// Join it back and print
print ''.join(L) 
```

但是，如果您需要替换不同的字符，您可以定义一个*字典映射*来简化转换过程。例如：

```
// Define {a -> x} mapping.
M = {'c': 'd', 'r': 's'}
// Substitution
L[3] = M[L[3]] 
```

# touch - 触控端和滑动手指关闭按钮

> ID：16005900
> 
> 赞同：1
> 
> 时间：2013-04-15T00:23:26.337
> 
> 标签：touch, multi-touch, android-browser

我有一个音量按钮，绑定到 touchstart 和 mousedown 事件，以及 touchend 和 mouseup 事件（我也尝试过 touchleave 和 touchcancel）。

当用户将手指放在按钮上并抬起手指时，它会按预期调用结束处理程序。但是，如果用户将手指从按钮上滑开然后抬起手指，则该事件永远不会被触发（这会导致音量控制无限减小或增大的问题）。

我已经尝试将 touchend 事件绑定到窗口对象，这似乎没有做任何事情。这是我目前所拥有的：

```
$('#volume-wrap button').on('touchstart mousedown', function() {
    if (this.id == 'volume-down')
        volume_timer = setInterval(function(){main.hud.adjustVolume('down')}, 100);
    else
        volume_timer = setInterval(function(){main.hud.adjustVolume('up')}, 100);
});

$(window).on('touchend mouseup', function() {
    if (volume_timer) {
        clearInterval(volume_timer);
        volume_timer = 0;
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-14T14:21:32.907

尝试将 e.preventDefault() 添加到 touchstart 事件。安卓浏览器有bug。

请参阅：[http ://code.google.com/p/android/issues/detail?id=4549](http://code.google.com/p/android/issues/detail?id=4549)

更新：有关更好的解释，请参见 SystemParadox 答案：[https ://stackoverflow.com/a/11613327/757086](https://stackoverflow.com/a/11613327/757086)

# achartengine - AChartEngine 上的不同线条样式

> ID：16005902
> 
> 赞同：2
> 
> 时间：2013-04-15T00:23:55.997
> 
> 标签：achartengine

一个 XYMultipleSeriesRenderer 中的每条图表线是否可以有不同的宽度或样式（虚线）？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T23:03:27.653

An`XYMultipleSeriesRenderer`有几个`XYSeriesRenderer`, 每个系列数据一个。应用于 an 的更改`XYSeriesRenderer`仅在该行上可见。例如，可以每行应用线宽。

# php - Google Analytics（分析）自定义变量不会跟踪

> ID：16005910
> 
> 赞同：1
> 
> 时间：2013-04-15T00:24:32.650
> 
> 标签：php, google-analytics

好的，一段时间以来，我一直在使用自定义变量感到困惑。我已经搜索并遵循了网络上所有帖子的说明，但无论出于何种原因，它根本不起作用。

这是我正在使用的代码

```
<script type="text/javascript">
var _gaq = _gaq || [];
var pluginUrl = '//www.google-analytics.com/plugins/ga/inpage_linkid.js';
_gaq.push(['_require', 'inpage_linkid', pluginUrl]);
_gaq.push(['_setAccount', 'UA-xxxxxxx-x']);
_gaq.push(['_setDomainName', 'domain.com']);
_gaq.push(['_setCustomVar',1,'Enquiry Type','e-Notification']);
_gaq.push(['_trackPageview']);

(function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();
</script> 
```

这里值得注意的一件事是设置自定义变量的行包含在 PHP IF 语句中。本质上，我只想在提交表单后设置此变量，以便我可以从选择框中捕获值。

归根结底，我想做的就是让人们填写表格并获取选择框的值以传回 Google Analytics。我不希望在每个页面加载时都设置该值，因此一旦 _setCustomVar 已经运行，一旦我破坏了会话值，就不会再次调用它（当然，除非表单第二次完成）。

这是构造为与 GIF 一起传递的参数（以防它有助于调试）

```
utmac=UA-xxxxxx-x
utmcc=__utma=247537282.1869531581.1359929325.1365982402.1365984281.5;+__utmz=247537282.1365982402.4.3.utmcsr=domain.com|utmccn=(referral)|utmcmd=referral|utmcct=/;
utmcs=UTF-8
utmdt=Request A Call Back
utme=8(Enquiry Type)9(e-Notification)
utmfl=-
utmhid=1514805008
utmhn=www2.domain.com
utmht=1365984805826
utmje=1
utmn=1234674801
utmp=/request-call-back.php?action=sent&oForm=2
utmr=0
utms=7
utmsc=24-bit
utmsr=1680x1050
utmu=qR~
utmul=en-us
utmvp=1680x672
utmwv=5.4.1 
```

通过我用来绕过 PHP IF 语句的各种测试，我取得了“一些”成功。换句话说，我有时可以将我的测试数据放入自定义变量报告中，但大多数时候我不能。关于为什么虚拟测试有效和无效似乎没有一致的逻辑。

最后一件事，需要使用 _setDomainName，因为帐户上的域是“domain.com”，但包含脚本的站点是“www2.domain.com”。我不认为这对问题很重要，而只是另一件事要记住。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-20T14:51:07.510

您可能错过了 _setCustomVar 方法中的第四个参数[范围：](https://developers.google.com/analytics/devguides/collection/gajs/gaTrackingCustomVariables#pageLevel)

```
_gaq.push(['_setCustomVar',
      1,                   // This custom var is set to slot #1\.  Required parameter.
      'Items Removed',     // The name acts as a kind of category for the user activity.  Required parameter.
      'Yes',               // This value of the custom variable.  Required parameter.
      2                    // Sets the scope to session-level.  Optional parameter.
   ]); 
```

因此，如果您在一个页面上设置了值而在同一页面上根本不设置它（甚至没有设置为“null”），则值可能会停留在最后一级。每次访问和每个用户级别都相同。

您应该将变量视为属于用户（生命周期）、会话（访问）或单个页面视图的一种“属性”。

根据我的经验，在 90% 的实现中处理这个问题都是错误的。

此外：省略意味着页面级别意味着每次点击都会增加一个值（或不增加一个值）。

备注：我假设，根据您的问题，这应该是会话级别 (2) 而不是页面级别 (3)。并且只有在状态转换时才应该设置它，这是您已经在 PHP 中实现的。

# c - 在 Gtk+ 中，一个键盘事件禁用了所有其他的

> ID：16005917
> 
> 赞同：1
> 
> 时间：2013-04-15T00:25:18.747
> 
> 标签：c, gtk

所以我想通过按Ctrl+c来实现退出程序。我这样做了：

```
static void
quitit(GtkWidget   *widget,
       GdkEventKey *event,
       gpointer    data)
{
    if(event->state == GDK_CONTROL_MASK &&
       event->keyval == 'c')
        gtk_main_quit();
}

...

int
main(int argc,
     char **argv)
{ 
    ...

    g_signal_connect(window, "key_press_event",
                     G_CALLBACK(quitit), NULL);

    ... (Other keypress events)
} 
```

嗯，这行得通。但问题是我连接的所有其他按键事件都停止工作，而鼠标点击仍然有效。我想不通。谁能帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T00:41:12.270

信号回调的原型`key-press-event`是：

```
gboolean  user_function (GtkWidget *widget,
                         GdkEvent  *event,
                         gpointer   user_data): Run Last 
```

根据[GOBject Signal 的文档](https://developer.gnome.org/gobject/stable/gobject-Signals.html#g-signal-connect)，它应该返回 TRUE 以停止为事件调用其他处理程序或 FALSE 以进一步传播事件。

因为您定义`quitit()`为`void`，所以它可以返回 FALSE (0) 以外的任何值。因此，它会阻止调用其他处理程序。

解决方案是更改定义`quitit()`以返回 a`gboolean`并返回 FALSE。

# javascript - 通过使用 Javascript 渲染元素来加速页面？

> ID：16005920
> 
> 赞同：2
> 
> 时间：2013-04-15T00:26:10.430
> 
> 标签：javascript, css, performance, external, render

只是基于最佳实践告诉我们，为了性能优势，我们更喜欢外部 CSS 和 JS 文件而不是内联 HTML。

交付尽可能小的 HTML 文件是个好主意吗？并使用 Javascript / jQuery 尽可能多地渲染 DOM，在客户端连接 Javascript 事件等？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T00:35:27.267

将 CSS 和 JS 保存在不同文件中的原因与性能无关。如果有的话，它可能会因为额外的服务器往返而减慢您的页面。

真正的原因是，对于任何复杂的网页（应用程序）来说，将页面的逻辑结构（声明性 HTML）与布局（CSS）和 UI 逻辑（Javascript）分开是非常重要的。

性能问题可以而且应该使用缓存、缩小等单独解决。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T00:35:35.167

一般来说，为浏览器提供 HTML 会更快。

当然，一切都取决于服务器创建此 HTML 所需的时间。

但就客户端呈现而言，预构建的 HTML 将始终胜过 javascript 生成的文档。这是因为 DOM-API 相对较慢（尽管最近进行了很多改进）。

CSS 和 JS 的分离更多是与可维护性和 SEO 相关。

# ajax - 使用 AJAX 将 JSON 数组发送到 PHP 文件的问题

> ID：16005927
> 
> 赞同：0
> 
> 时间：2013-04-15T00:26:44.647
> 
> 标签：ajax, json, post

嗨，我是使用 ajax 和 json 的新手，所以在将它用于我的项目之前，我已经制作了下面的示例代码来试用它，但是当我尝试将信息发送到我的 PHP 文件时遇到了一些问题。据我所知，我已经对输入进行了格式化，因此它是 JSON 格式，并且 Ajax 命令可以正常工作。但是当我运行代码时，我正在查看我使用 FireBug 发布的内容，它说我发送到 PHP 的输入值是未定义的。我不确定为什么会发生这种情况，因为我让它使用单个输入。我还尝试在我的 HTML 代码中使用 json.stringify，然后在 PHP 文件中对其进行 json_decoding 作为解决方法，但我无法让它适用于单个输入案例。任何帮助将不胜感激。

HTML：

```
 var sendInput = [
                {"fruit":"apple", "amount":"5"},
                {"fruit":"pear", "amount":"15"}];
   var sent = $.ajax({
        type: "POST",
        data: sendInput,
        dataType: "JSON",
        url: "AjaxTest.php",
        success: function(data) {
            window.alert(data);
                window.alert("Works");
        },
        error: function() {
            window.alert("Failed");
        }
    }); 
```

PHP：现在没什么特别的，它只是在 $_POST 中回显任何值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T00:37:11.033

$.ajax 期望数据属性是字符串或普通对象。但是您已经定义了一个数组。如果这是您要发送的内容，请尝试以下操作：

```
var sendInput = {"myinput":[
            {"fruit":"apple", "amount":"5"},
            {"fruit":"pear", "amount":"15"}]}; 
```

# php - 通过 php 检查社交网络上的文章传播情况

> ID：16005928
> 
> 赞同：0
> 
> 时间：2013-04-15T00:26:48.930
> 
> 标签：php, analytics, social-networking, webpage

对于我们的研究，我们正在建立一个关于某些主题的网页数据库。对于这些页面中的每一个，我们都希望对其进行分类并获取一些有关它们的信息。

例如，这些信息之一是页面在社交网络中在确定的 t 时间的传播，比如一、二和三周。

我的问题是，我们怎样才能做到这一点？

我们想看看每页社交按钮旁边写的数字可能是个好主意。你将如何在 php 中实现它？

或者，有没有更好的方法？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T02:09:19.663

sharedcount.com 有一个 API 和 PHP 示例，它们看起来很有用，而且实现起来非常快。

[http://sharedcount.com/documentation.php](http://sharedcount.com/documentation.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T00:51:03.537

在我能想到的社交网络中，没有简单的方法来实际和精确地跟踪内容传播。如果这些是您要跟踪的网站，最简单的方法是使用 Google Analytics API 从它们获取有关社交媒体活动的数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T01:02:37.010

我发现有 API 可以查看每个服务的页面被共享/点赞/推文/+1 等的数量。

此外，还有一项服务[http://www.likeexplorer.com/](http://www.likeexplorer.com/)可以为您执行此操作。现在我只需要连接到他们的 ajax 系统。

# android - Android Binder 清除调用者身份

> ID：16005935
> 
> 赞同：5
> 
> 时间：2013-04-15T00:27:29.503
> 
> 标签：android, android-source, android-binder

最近看`Android`源码，发现做一些`Binder`IPC调用时总是调用一对方法。我阅读了评论，但我无法清楚地知道根本原因。配对方法如下：

```
final long origId = Binder.clearCallingIdentity();

//other local method.

Binder.restoreCallingIdentity(origId); 
```

有谁知道那对方法的功能是什么？这似乎与许可有关。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-11-07T16:11:41.563

^(*虽然这个问题很老，但除了官方方法描述之外，值得更多细节。*)

* * *

除了（或连同）IPC，`Binder`框架的关键作用`Android`是安全性。

每个事务都在调用进程（ *caller*`Binder` ）的身份（PID 和 UID）下运行，以便被调用进程（*callee*）可以检查调用进程的权限并决定是否可以执行请求的方法。

 **如果这样的事务需要（临时）在*被调用者的*身份下运行，则可以清除*调用者的事务*[`Binder.clearCallingIdentity()`](https://developer.android.com/reference/android/os/Binder.html#clearCallingIdentity())，然后[`Binder.restoreCallingIdentity(long)`](https://developer.android.com/reference/android/os/Binder.html#restoreCallingIdentity(long))分别调用 和 来恢复。在调用之间，将检查*被调用者的权限。*

以系统服务**为例**（AOSP 位置：`/frameworks/base/services/java/com/android/server`）。在运行`system_server`过程中，`UID=1000`服务可以暂时清除*调用者的*身份，以通过权限检查。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-18T06:52:01.587

我认为我不能比官方 API 中的描述更好地回答：http: [//developer.android.com/reference/android/os/Binder.html](http://developer.android.com/reference/android/os/Binder.html)

`public static final long clearCallingIdentity ()`

> 重置当前线程上传入 IPC 的标识。如果在处理传入呼叫时，您将调用可能是您的进程本地的其他对象的接口并且需要对传入它们的调用进行权限检查（因此它们将检查您自己的权限），这将很有用本地进程，而不是最初调用您的任何进程）。**

# javascript - 如果我从该元素中替换一个元素，是否保证剩余的 JavaScript 运行？

> ID：16005938
> 
> 赞同：3
> 
> 时间：2013-04-15T00:27:47.630
> 
> 标签：javascript, html, dom

例子：

```
...
<body>
    <script type="text/javascript">
        document.body.innerHTML = 'foo';
        alert('bar');
    </script>
</body>
... 
```

这可以保证提醒“酒吧”吗？或者根据innerHTML被替换的速度是否可以跳过？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T00:34:33.080

它仍然应该提醒“酒吧”。该脚本已经加载，删除允许加载它的脚本标记不会改变任何内容。

要对其进行测试：将警报放在 setTimeout 中。

# database - 从 PhoneGap 调用 PHP

> ID：16005941
> 
> 赞同：0
> 
> 时间：2013-04-15T00:28:13.780
> 
> 标签：database, cordova

我想从远程数据库中检索信息并将其显示在列表中。最好的方法是什么？目前我正在调用 php 但无法使其正常工作。有什么建议吗？提前致谢

----index.html----

```
<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, minimum-scale=1, maximum-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/> 
<title>Index</title>
    <link href="css/custom.css" rel="stylesheet" type="text/css" />
   <link rel="stylesheet" href="http://code.jquery.com/mobile/1.0/jquery.mobile-    1.0.min.css" />
   <script type="text/javascript" src="http://code.jquery.com/jquery-1.6.4.min.js"></script>
   <script type="text/javascript" src="http://code.jquery.com/mobile/1.0/jquery.mobile-1.0.min.js"></script>
    <script src="cordova-2.6.0.js"></script>
    <script>
    $(document).ready(function() {

            $("#resultBlock").html("Waiting for data...");

            $.get("http://localhost/select.php", {}, function(data) {

                $("#resultBlock").html(data);
            })
    });
    </script>
</head>
<body>
<div data-role="page" id="inicio">
      <div data-role="header" data-position="fixed">
        <h1>Periódico</h1>
      </div>
       <div data-role="content">

            <p id="resultBlock"></p>
       </div>
       <div data-role="footer" data-id="foo1" data-position="fixed" >
        <div data-role="navbar">
            <ul>
                <li><a href="" class="ui-btn-active ui-state-persist"><img src="images/periodico-icon.png" width="40" height="40"><br/>Periodico</a></li>
                <li><a href="#directorio" ><img src="images/directorio-icon.png" width="40" height="40"><br/>Directorio</a></li>
                <li><a href="#clasificados" ><img src="images/clasificados-icon.png" width="40" height="40"><br/>Clasificados</a></li>
                 <li><a href="#cuponera" ><img src="images/cuponera-icon.png" width="40" height="40"><br/>Cuponera</a></li>
            </ul>
        </div>
      </div>
</div>
</body>
</html> 
```

------select.php-----

```
<?php

$con=mysqli_connect("localhost","localhost","","test");
// Check connection
if (mysqli_connect_errno())
  {
  echo "Failed to connect to MySQL: " . mysqli_connect_error();
  }

$result = mysqli_query($con,"SELECT * FROM Persons");

echo "<table border='0'>
<tr>
<th>Firstname</th>
<th>Lastname</th>
<th>Age</th>
</tr>";

while($row = mysqli_fetch_array($result))
  {
  echo "<tr>";
  echo "<td>" . $row['FirstName'] . "</td>";
  echo "<td>" . $row['LastName'] . "</td>";
  echo "<td>" . $row['Age'] . "</td>";
  echo "</tr>";
  }

echo "</table>";
mysqli_close($con);
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T00:55:56.210

我记得在使用 phonegap 开发时遇到了 jquery ajax 请求的问题。尝试使用经典的 ajax 请求，它对我有用。另一个可能的问题是您正在请求计算机上的本地文件。示例代码如下：

```
function loadContent(){

    var xmlhttp = getXmlHttpObject();               

    xmlhttp.onreadystatechange=function()
      {          
      if (xmlhttp.readyState==4 && xmlhttp.status==200)
        {
            document.getElementById("listContent").innerHTML=xmlhttp.responseText;

        }
      };
    var url = "http://example.com/select.php";
    xmlhttp.open("GET",url,true);
    xmlhttp.send(); 
```

获取 xmlhttp 对象：

```
function getXmlHttpObject(){
    var xmlhttp;

if (window.XMLHttpRequest)        
    xmlhttp=new XMLHttpRequest();         
else        
    xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");     

return xmlhttp; 
```

}

# mercurial - 我的 .hg Mercurial 目录中的那些 hg-bundle 文件是什么，它们是必需的吗？

> ID：16005942
> 
> 赞同：0
> 
> 时间：2013-04-15T00:28:19.757
> 
> 标签：mercurial

我们正在使用 Mercurial（使用 TortoiseHg）。

我们的存储库的规模一直在稳步增长。查看 .hg 文件夹，我看到大量`hg-bundle`文件，其中大部分都相当大（2-20 MB）

这些有必要吗？他们是否复制了已经保存在`store\`目录中的更改？

我的理解是远程推送和拉取将差异打包到捆绑文件中，并将它们发送到各种对等安装。

捆绑文件是否在`hg merge`or`hg update`命令后被删除？如果不是，这些文件是需要手动删除的残留物吗？

任何建议，非常感谢。

干杯，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-08-28T18:32:34.900

这些文件存在于那个特定的 .hg 目录中，但它们不会传播。我觉得这很烦人，所以我这样做：

mv dirname dirname-stupidly-big (cd dirname-stupidly-big; hg clone -U ../dirname)

现在 dirname 的大小合理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T00:30:47.220

它们是数据库或文件的副本。如果它们是副本，则用于比较文件以查看它们是否已更改。

至于删除它，不要。`.`在任何情况下都不应篡改任何控制目录（以 开头）。

# matlab - 模板在多幅图像上的互相关

> ID：16005947
> 
> 赞同：0
> 
> 时间：2013-04-15T00:29:08.637
> 
> 标签：matlab

我写了一个代码，在matlab中对多个图像执行模板的互相关。这个代码是为了跟踪一个单元格在多个帧中的移动，代码有点交互，首先用户从第一个选择图像模板框架比他/她运行程序来执行互相关，我已经定义了一个感兴趣的区域，代码必须在其中找到这个模板。我的问题是如何在互相关检测到并在所有帧中定位后获取单元格位置的 x 和 y 坐标

```
 format long
fontSize = 10;
file_name = 'stack0001.tif';  %TIFF Stack
image_info = imfinfo(file_name);
numImg = length(image_info) %Number of images in stack
rgbImage = imread(file_name,'Index', 1);
[sub_rgbImage,rect_rgbImage] = imcrop(rgbImage);
figure,
imshow(sub_rgbImage)
title({'Template Image ' ;'to Search For'});
h=figure;
 for i1=1:numImg %Read Each Frame
    fprintf('Now correlating frame #%d with frame #%d\n',1,i1);

    rect_A= [247.5 134.5 35 81]; % region to look for object
    A=imread(file_name,'Index', i1);%read the following image from image loop (in tiff stack)
    sub_A = imcrop(A,rect_A); % Region of Interest
    figure,
    imshow(sub_A); % Show region of Interest
    axis on;

    % Search the red channel for a match.
    correlationOutput = normxcorr2(sub_rgbImage(:,:,1), sub_A(:,:,1));
    x=size(correlationOutput, 2);
    y=size(correlationOutput, 1);
    h=figure;
    set(h,'visible','off');
    figure, surf(correlationOutput),shading flat;

    h=figure;
    set(h,'visible','off');
    figure('Position', [300 300 300 300]);
    imshow(correlationOutput, []);
    sprintf('Normalized Cross Correlation Output of frame #%d and #%d\n',i1,i1+1);
    title('Cross Correlation');
    %Offset between the images found by correlation

    [maxCorrValue, maxIndex] = max(abs(correlationOutput(:)))
    [ypeak,xpeak] = ind2sub(size(correlationOutput),maxIndex(1))
    corr_offset = [(ypeak-size(sub_rgbImage,1)) 
                       (xpeak-size(sub_rgbImage,2))] ;

    %relative offset between position of subimages
    rect_offset = [(rect_A(1)- rect_rgbImage(1))
                   (rect_A(2)- rect_rgbImage(2))]

    %total offset
    offset = rect_offset+corr_offset;
    xoffset= offset(1)
    yoffset= offset(2)

end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-05T18:33:01.347

如果可以将其转换为二进制图像，则可以找到边界。也许通过对背景进行阈值化并创建细胞的二进制图像。然后您可以使用 regionprops 方法来访问图像中连接组件的属性。或者您可以使用 bwboundaries 并知道轮廓像素身份而不是质心。

# c++ - 带有向量迭代器的程序中的分段错误

> ID：16005950
> 
> 赞同：0
> 
> 时间：2013-04-15T00:29:24.817
> 
> 标签：c++, vector, iterator, segmentation-fault, unordered-set

有人能告诉我为什么它在 Visual Studio 中编译和运行良好，但在编译 GNU C++ 编译器时因分段错误而失败

不能为我的生活弄清楚这一点。我检查了前缀/后缀运算符，并确保将迭代器正确放置在条件语句中......我错过了什么？通常我在处理分配/解除分配动态数组时遇到这个问题，我在这里没有这样做。

```
#include <cmath>
#include <cstdio>
#include <vector>
#include <iostream>
#include <algorithm>
#include <random>
#include <unordered_set>

namespace std{
    template <>
   struct hash<vector<int>> : public unary_function<vector<int>, size_t>
   {
       size_t operator()(const vector<int>& v) const
       {
           return v.size();
       }
   };
}

using namespace std;

struct testCase{
    int n; 
    int m;
    vector <int> wordVector; 
};

bool lexOrderConfirm(std::vector<int>::const_iterator, std::vector<int>::const_iterator, std::vector<int>::const_iterator, int ); 

int main() {    

int t; 

cin>>t;
vector <testCase*> testCaseVector(t);

for (int i = 0; i < t; ++i){

     testCaseVector[i] =  new testCase;

     cin>>testCaseVector[i]->n; 
        cin>>testCaseVector[i]->m;

}

         for (int i = 0; i < t; ++i){

            std::unordered_set<std::vector<int>, std::hash<std::vector<int> > >permutations;

             int permu = pow((double)testCaseVector[i]->n, testCaseVector[i]->m); 

int count = 0;

      for (int z= 0;  z < (permu*10); ++z){
      std::random_device rd;

    std::default_random_engine randomeng( rd() );
     int v;
      for (int b = 0; b < testCaseVector[i]->m; ++b){
     v= randomeng() % testCaseVector[i]->n + 1;   /*random number between 1 and n*/
     testCaseVector[i]->wordVector.push_back(v);
      }
      std::sort(testCaseVector[i]->wordVector.begin(), testCaseVector[i]->wordVector.end());

      permutations.insert(testCaseVector[i]->wordVector);
      testCaseVector[i]->wordVector.clear();
      }

      do {

           vector <int> test = *permutations.begin();

        do {
                std::vector<int>::const_iterator start = test.begin();
            std::vector<int>::const_iterator end;

                end = test.end();

            std::vector<int>::const_iterator lastElem = start+(testCaseVector[i]->m-1);

            if (lexOrderConfirm(start, end, lastElem, testCaseVector[i]->n)){
                ++count;
            }

        }while(std::next_permutation(test.begin(),test.end()));

        permutations.erase(permutations.begin());
        test.clear();
      }while(!permutations.empty());

  count = count%100000007;
        cout<<count<<endl;

         }
    return 0;

}

bool lexOrderConfirm(std::vector<int>::const_iterator start, std::vector<int>::const_iterator end, std::vector<int>::const_iterator lastElem, int N){
  bool confirmed = true;

  for (std::vector<int>::const_iterator t = start; t != end; ++t){
                if ((2* (*t) > N)){

               } else if ((2*(*t) <= N) && (*(t+1) >= 2 * (*t)) && (t != (lastElem))){

                }else{
                    confirmed = false;
                    break;
               }

    }

  return confirmed;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T01:01:34.883

当然，原因是您正在取消引用一些未初始化的指针。从您当前的代码中无法分辨，因为一方面它取决于用户输入。它对我来说似乎运行得很好`t = 2`；即使我不确定它是否按预期工作。

> 但是为什么它在 Visual Studio 上运行？

因为`VC++`不初始化指向 NULL 的指针。它之所以有效，是因为未初始化的指针所指向的东西在某种程度上就像初始化的指针一样工作。所以基本上是未定义的行为。

> 为什么在编译 GNU C++ 编译器时会因分段错误而失败？

因为`g++`确实将指针初始化为 NULL

# opengl - OpenGL渐变“条带”伪影

> ID：16005952
> 
> 赞同：9
> 
> 时间：2013-04-15T00:29:42.877
> 
> 标签：opengl

最近我一直在尝试清理我的 openGl 渲染。我已经拥有这些文物一段时间了，但从来没有真正在意过它。这是一个屏幕截图： ![在此处输入图像描述](https://i.stack.imgur.com/E8Zhs.png)

![在此处输入图像描述](https://i.stack.imgur.com/2sJcT.png) 经过一番研究，我无法弄清楚它有什么问题。我在 OSX 上使用 OpenGl，但我已经在其他系统上尝试过，并且出现了相同的工件。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-15T00:35:59.463

您所体验的是每通道色彩空间 8 位的有限动态范围。一个简单的灰度梯度，即每通道 8 位帧缓冲区上的 R=B=G 只能有 2^8 = 256 个不同的值。如果您在大面积上在相似值（如图片中）之间转换，则结果是低动态范围条带。

克服这个问题的唯一方法是计算具有更多位数的梯度。为了在低动态范围屏幕上显示图像，您可以使用抖动。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-08-22T06:47:10.300

正如[datenwolf 所解释的](https://stackoverflow.com/a/16005990/673852)，问题在于将子像素值四舍五入到 8 位范围，并且`GL_DITHER`在大多数 OpenGL 实现中都执行无操作。为了缓解这种情况，您可以将抖动作为后处理步骤进行（另一种选择是直接在每个相关图元的片段着色器中进行）。但请注意，要实现这一点，对 OpenGL 实现有一些要求：

1.  支持高精度纹理内部格式：您必须能够获得额外精度的结果颜色。精度越高，可以平滑渲染的颜色变化就越精细。选项包括：

    *   浮点纹理（需要`GL_ARB_texture_float`或 OpenGL 3.0+）类似`RGBA32F`，`RGBA16F`或`R11F_G11F_B10F`

    *   比 8 位整数格式更宽，例如`RGB10_A2`或`RGBA16`

2.  FBO ( `GL_ARB_framebuffer_object`)：你确实想做后处理。

3.  NPOT 纹理：大多数屏幕具有非二维的幂；这对于窗口模式更为重要。

4.  GLSL：您确实想使用着色器。另一种选择是`GL_ARB_fragment_program`。

5.  正确支持高精度帧缓冲配置。如果您选择像 一样的整体纹理格式`RGBA16`，它可能会被替换为例如`RGBA8`（请参阅`TexImage2D`可能的内部格式规范）。

综上所述，这是一个使用上述功能（以及浮点纹理以确保结果）的演示，允许将无抖动点亮的灰色立方体与抖动的灰色立方体进行比较。请注意，默认情况下，由于实际上是 6bpp 而不是 8bpp，它会为自己进行抖动的监视器给出不好的结果。对于 6bpp 监视器`MONITOR_6_BPP`，在编译此代码时定义。

```
// Dithering shader implementation inspired by (and completely reworked):
// http://www.anisopteragames.com/how-to-fix-color-banding-with-dithering/
#include <stdio.h>
#include <string.h>
#include <sys/time.h>
#include <GL/glew.h>
#include <GL/glut.h>

GLboolean animating=GL_TRUE, dithering=GL_FALSE;

GLuint ditherProgram=0;
GLuint ditherShader=0;
GLuint frameTexture=0,bayerMatrixTexture=0;
GLuint frameFramebuffer=0, depthRenderBuffer=0;

void initDitheringShader()
{
    ditherProgram=glCreateProgram();
    ditherShader=glCreateShader(GL_FRAGMENT_SHADER);
    const char* src=
        "uniform sampler2D frame, bayerMatrix;\n"
        "void main()\n"
        "{\n"
        "    vec4 color=texture2D(frame,gl_TexCoord[0].xy);\n"
        "    float bayer=texture2D(bayerMatrix,gl_FragCoord.xy/8.).r*(255./64.); // scaled to [0..1]\n"
#ifdef MONITOR_6_BPP // use this for 6 bit per subpixel monitors
        "    const float rgbByteMax=63.;\n"
#else
        "    const float rgbByteMax=255.;\n"
#endif
        "    vec4 rgba=rgbByteMax*color;\n"
        "    vec4 head=floor(rgba);\n"
        "    vec4 tail=rgba-head;\n"
        "    color=head+step(bayer,tail);\n"
        "    gl_FragColor=color/rgbByteMax;\n"
        "}\n"

        ;
    const GLint length=strlen(src);
    glShaderSource(ditherShader,1,&src,&length);
    glCompileShader(ditherShader);
    GLint status;
    glGetShaderiv(ditherShader,GL_COMPILE_STATUS,&status);
    if(!status)
    {
        fprintf(stderr,"Failed to compile shader\n");
        exit(2);
    }
    glAttachShader(ditherProgram,ditherShader);
    glLinkProgram(ditherProgram);
    glGetProgramiv(ditherProgram,GL_LINK_STATUS,&status);
    if(!status)
    {
        fprintf(stderr,"Failed to link shading program\n");
        exit(3);
    }
    static const char bayerPattern[] = {
        0,  32,  8, 40,  2, 34, 10, 42,  /* 8x8 Bayer ordered dithering  */
        48, 16, 56, 24, 50, 18, 58, 26,  /* pattern.  Each input pixel   */
        12, 44,  4, 36, 14, 46,  6, 38,  /* is scaled to the 0..63 range */
        60, 28, 52, 20, 62, 30, 54, 22,  /* before looking in this table */
        3,  35, 11, 43,  1, 33,  9, 41,  /* to determine the action.     */
        51, 19, 59, 27, 49, 17, 57, 25,
        15, 47,  7, 39, 13, 45,  5, 37,
        63, 31, 55, 23, 61, 29, 53, 21,};
    glGenTextures(1,&bayerMatrixTexture);
    glBindTexture(GL_TEXTURE_2D,bayerMatrixTexture);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_REPEAT);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_REPEAT);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST);
    glTexImage2D(GL_TEXTURE_2D, 0, GL_LUMINANCE, 8,8, 0,GL_LUMINANCE, GL_UNSIGNED_BYTE, bayerPattern);
}

void initLightAndMaterial()
{
    const GLfloat ambient[4]={0.5,0.5,0.5,1};
    glMaterialfv(GL_FRONT, GL_AMBIENT_AND_DIFFUSE, ambient);
    const GLfloat emission[4]={0.2,0.2,0.2,1};
    glMaterialfv(GL_FRONT, GL_EMISSION, emission);
    const GLfloat diffuseColor[4]={1,1,1,1};
    glLightfv(GL_LIGHT0, GL_DIFFUSE, diffuseColor);
    const GLfloat position[4]={2,0,-2,1};
    glLightfv(GL_LIGHT0, GL_POSITION, position);
    glShadeModel(GL_SMOOTH);
    glEnable(GL_LIGHT0);
    const GLfloat globalAmbient[4]={0,0,0,1};
    glLightModelfv(GL_LIGHT_MODEL_AMBIENT,globalAmbient);
}

void checkRequirements()
{
    if(!GL_ARB_texture_float)
    {
        fputs("Float textures are not supported, this demo relies on them\n",stderr);
        exit(1);
    }
    if(!GL_ARB_framebuffer_object)
    {
        fputs("FBO is not supported, no good way to do postprocessing\n",stderr);
        exit(1);
    }
    /* We need OpenGL 2.0+ for GLSL and NPOT textures.
     * Extension interface fot GL_ARB_shader_objects is too
     * different from core so not trying to use it.
     */
    if(!GLEW_VERSION_2_0)
    {
        fprintf(stderr,"Need OpenGL>=2.0 for GLSL and NPOT textures\n");
        exit(1);
    }
}

GLboolean init()
{
    checkRequirements();
    initLightAndMaterial();
    initDitheringShader();
    return 1;
}

unsigned getTime()
{
    struct timeval tv;
    gettimeofday(&tv,NULL);
    return tv.tv_usec/1000+tv.tv_sec*1000;
}

void renderScene()
{
    glClearColor(0,0,0,1);
    glClear(GL_COLOR_BUFFER_BIT|GL_DEPTH_BUFFER_BIT);

    static unsigned oldTime;
    if(!oldTime) oldTime=getTime();
    const unsigned curTime=getTime();
    if(animating)
    {
        static double angle=0;
        glMatrixMode(GL_MODELVIEW);
        glLoadIdentity();
        angle += (curTime-oldTime)%13500 * 360 / 13500.;
        glRotatef(angle,1,0,0);
        glRotatef(angle,0,1,0);
    }
    oldTime=curTime;

    typedef struct CubeVertex
    {
        GLfloat x,  y,  z;
        GLfloat nx, ny, nz;
        GLfloat u, v;
    } CubeVertex;
    static const CubeVertex vertices[] =
    {
    //   x  y  z  nx ny nz   u v
       { 1,-1,-1,  0, 0,-1,  0,1},
       { 1, 1,-1,  0, 0,-1,  0,0},
       {-1, 1,-1,  0, 0,-1,  1,0},
       {-1,-1,-1,  0, 0,-1,  1,1},

       {-1,-1,-1, -1, 0, 0,  0,1},
       {-1, 1,-1, -1, 0, 0,  0,0},
       {-1, 1, 1, -1, 0, 0,  1,0},
       {-1,-1, 1, -1, 0, 0,  1,1},

       {-1,-1, 1,  0, 0, 1,  0,1},
       {-1, 1, 1,  0, 0, 1,  0,0},
       { 1, 1, 1,  0, 0, 1,  1,0},
       { 1,-1, 1,  0, 0, 1,  1,1},

       { 1,-1, 1,  1, 0, 0,  0,1},
       { 1, 1, 1,  1, 0, 0,  0,0},
       { 1, 1,-1,  1, 0, 0,  1,0},
       { 1,-1,-1,  1, 0, 0,  1,1},

       { 1,-1,-1,  0,-1, 0,  0,1},
       {-1,-1,-1,  0,-1, 0,  0,0},
       {-1,-1, 1,  0,-1, 0,  1,0},
       { 1,-1, 1,  0,-1, 0,  1,1},

       { 1, 1, 1,  0, 1, 0,  0,1},
       {-1, 1, 1,  0, 1, 0,  0,0},
       {-1, 1,-1,  0, 1, 0,  1,0},
       { 1, 1,-1,  0, 1, 0,  1,1},
    };
    const GLushort indices[]=
    {
         0, 1, 2,   2, 3, 0,
         4, 5, 6,   6, 7, 4,
         8, 9,10,  10,11, 8,
        12,13,14,  14,15,12,
        16,17,18,  18,19,16,
        20,21,22,  22,23,20,
    };

    glEnableClientState(GL_VERTEX_ARRAY);
    glEnableClientState(GL_NORMAL_ARRAY);
    glFrontFace(GL_CW);
    glEnable(GL_CULL_FACE);
    glEnable(GL_DEPTH_TEST);
    glEnable(GL_LIGHTING);

    glVertexPointer(3, GL_FLOAT, sizeof(CubeVertex), vertices);
    glNormalPointer(GL_FLOAT, sizeof(CubeVertex), (char*)vertices+3*sizeof(GLfloat));
    glDrawElements(GL_TRIANGLES, sizeof indices/sizeof*indices, GL_UNSIGNED_SHORT, indices);

    glDisable(GL_LIGHTING);
    glDisable(GL_DEPTH_TEST);
    glDisable(GL_CULL_FACE);
    glFrontFace(GL_CW);
    glDisableClientState(GL_NORMAL_ARRAY);
    glDisableClientState(GL_VERTEX_ARRAY);
}

void blitFBToScreen()
{
    glActiveTexture(GL_TEXTURE0);
    glBindTexture(GL_TEXTURE_2D,frameTexture);
    if(dithering)
    {
        const GLint frameLoc=glGetUniformLocation(ditherProgram,"frame");
        if(frameLoc==-1)
            fprintf(stderr,"Failed to get location of frame uniform\n");
        glUseProgram(ditherProgram);
        glUniform1i(frameLoc,0);
        glActiveTexture(GL_TEXTURE1);
        glBindTexture(GL_TEXTURE_2D,bayerMatrixTexture);
        const GLint bayerMatrixLoc=glGetUniformLocation(ditherProgram,"bayerMatrix");
        if(bayerMatrixLoc==-1)
            fprintf(stderr,"Failed to get location of Bayer matrix uniform\n");
        glUniform1i(bayerMatrixLoc,1);
    }
    glMatrixMode(GL_PROJECTION);
    glPushMatrix();
     glLoadIdentity();
     glMatrixMode(GL_MODELVIEW);
     glPushMatrix();
      glLoadIdentity();
      glOrtho(0,1,0,1,-1,1);
      glActiveTexture(GL_TEXTURE0);
      glBindTexture(GL_TEXTURE_2D,frameTexture);
      glEnable(GL_TEXTURE_2D);
      glBegin(GL_QUADS);
       glTexCoord2f(0,0);
       glVertex2f(0,0);
       glTexCoord2f(0,1);
       glVertex2f(0,1);
       glTexCoord2f(1,1);
       glVertex2f(1,1);
       glTexCoord2f(1,0);
       glVertex2f(1,0);
      glEnd();
      glDisable(GL_TEXTURE_2D);
      glBindTexture(GL_TEXTURE_2D,0);
     glMatrixMode(GL_MODELVIEW);
     glPopMatrix();
    glMatrixMode(GL_PROJECTION);
    glPopMatrix();
    glUseProgram(0);
}

void display()
{
    static GLboolean inited;
    if(!inited) inited=init();

    glBindFramebuffer(GL_FRAMEBUFFER,frameFramebuffer);
    renderScene();
    glBindFramebuffer(GL_FRAMEBUFFER,0);
    blitFBToScreen();

    glutSwapBuffers();
    glutPostRedisplay();
}

void reshape(int width, int height)
{
    glViewport(0, 0, width, height);

    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    const float aspect=(float)width/height;
    gluPerspective(180./4, aspect, 1, 100);
    if(aspect<1)
    {
        const GLfloat fixup[4*4]=
        {
            aspect, 0, 0, 0,
            0, aspect, 0, 0,
            0,    0,   1, 0,
            0,    0,   0, 1,
        };
        glMultMatrixf(fixup);
    }
    gluLookAt(0, 0,-5,
              0, 0, 0,
              0, 1, 0);

    // reinitialize FBO
    if(!frameTexture)
        glGenTextures(1,&frameTexture);
    glBindTexture(GL_TEXTURE_2D,frameTexture);
    glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MIN_FILTER,GL_NEAREST);
    glTexImage2D(GL_TEXTURE_2D,0,GL_RGBA32F,width,height,0,GL_RGBA,GL_UNSIGNED_BYTE,NULL);
    if(!frameFramebuffer)
        glGenFramebuffers(1,&frameFramebuffer);
    glBindFramebuffer(GL_FRAMEBUFFER,frameFramebuffer);
    if(!depthRenderBuffer)
        glGenRenderbuffers(1,&depthRenderBuffer);
    glBindRenderbuffer(GL_RENDERBUFFER,depthRenderBuffer);
    glRenderbufferStorage(GL_RENDERBUFFER,GL_DEPTH_COMPONENT32,width,height);
    glFramebufferRenderbuffer(GL_FRAMEBUFFER,GL_DEPTH_ATTACHMENT,GL_RENDERBUFFER,depthRenderBuffer);
    glFramebufferTexture2D(GL_FRAMEBUFFER,GL_COLOR_ATTACHMENT0,GL_TEXTURE_2D,frameTexture,0);
    GLenum status=glCheckFramebufferStatus(GL_FRAMEBUFFER);
    if(status!=GL_FRAMEBUFFER_COMPLETE)
    {
        fprintf(stderr,"Error: framebuffer is incomplete: status=%#x\n",status);
        exit(10);
    }
    glBindFramebuffer(GL_FRAMEBUFFER,0);
    glBindRenderbuffer(GL_RENDERBUFFER,0);
    glBindTexture(GL_TEXTURE_2D,0);
}

void keyboard(unsigned char key,int x,int y)
{
    char winTitle[1024];
    switch(key)
    {
    case ' ':
        animating=!animating;
        snprintf(winTitle,sizeof winTitle,"Animation %sabled",animating?"en":"dis");
        break;
    case 'd':
        dithering=!dithering;
        snprintf(winTitle,sizeof winTitle,"Dithering %sabled",dithering?"en":"dis");
        break;
    default:
        return;
    }
    glutSetWindowTitle(winTitle);
    glutPostRedisplay();
}

int main(int argc, char** argv)
{
    glutInit(&argc, argv);
    glutInitDisplayMode (GLUT_DOUBLE|GLUT_RGB);
    glutInitWindowSize (1200, 900);
    glutCreateWindow ("Dithering test");
    if(glewInit()!=GLEW_OK)
    {
        fputs("Failed to init GLEW\n",stderr);
        exit(1);
    }
    glutReshapeFunc(reshape);
    glutDisplayFunc(display);
    glutKeyboardFunc(keyboard);
    fputs("Press <SPACE> to toggle animation, 'd' to toggle dithering\n",stderr);
    glutMainLoop();
    return 0;
} 
```

# r - 两个数据系列覆盖在同一个条形图/直方图上

> ID：16005953
> 
> 赞同：2
> 
> 时间：2013-04-15T00:29:45.260
> 
> 标签：r, statistics, ggplot2, histogram, bar-chart

我正在使用 ggplot2，我需要在同一个直方图上显示两组数据，并且需要区分它们。目前，我只是将每个系列的颜色设置为 50% 的不透明度，这样我就可以看到彼此隐藏的条形，但这远非理想，看起来真的很难看，而且读起来很混乱。

有没有办法让 R 可以智能地覆盖条形图，以便我可以使用完全不透明的条形图，并且永远不会有条形图从视图中隐藏？这是我目前的代码：

```
library(ggplot2)
dat <- data.frame(a=sample(10, size=100, replace=T),
                  b=sample(10, size=100, replace=T))
ggplot(dat, aes(x=a), fill=rgb(1,0,0,0.5)) + geom_histogram()
                           + geom_histogram(aes(x=b), fill=rgb(0,0,1,0.5)) 
```

![50% 不透明条的代码输出](https://i.stack.imgur.com/5tyNr.png)

任何指针都非常感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-15T01:00:47.243

以长格式工作，然后用于`position_dodge`躲避重叠的垃圾箱。如果您希望它们仍然重叠，那么您也可以`alpha`设置

例如

```
library(reshape2)
ldat <- melt(dat)

 # slight overlap
 ggplot(ldat, aes(x=value, colour = variable, fill = variable)) + 
    geom_histogram(position = position_dodge(width = 0.5), binwidth = 1, alpha =0.5) 
```

![在此处输入图像描述](https://i.stack.imgur.com/0YGFD.png)

```
# or the default value
ggplot(ldat, aes(x=value, colour = variable, fill = variable)) + 
  geom_histogram(position = 'dodge', binwidth = 1) 
```

![在此处输入图像描述](https://i.stack.imgur.com/GziBN.png)

或者您可以使用刻面，这意味着您的问题消失了，因为您不再过度绘制

```
ggplot(ldat, aes(x=value)) + 
  geom_histogram(binwidth=1,fill = 'grey', colour = 'black') +
  facet_grid(~variable) 
```

![在此处输入图像描述](https://i.stack.imgur.com/jLzjC.png)

# asp.net - 评估文本框的内容是否为空

> ID：16005959
> 
> 赞同：1
> 
> 时间：2013-04-15T00:30:36.593
> 
> 标签：asp.net, vb.net, visual-studio-2010

我正在尝试评估 ASP 标签的内容以查看它是否为空/无，然后用错误消息填充另一个标签。

这是评估（编辑：**更新以包括工作代码**）：

> ```
> Protected Sub Button1_Click(sender As Object, e As EventArgs) Handles Button1.Click
>     If String.IsNullOrEmpty(lb_showcoordinates.Text) Then
>         nocoordinatesmessage.Text = "Please validate your meeting location above using the <b>Validate Address</b> button"
>         Console.WriteLine("okay")
>     Return
>     End If
>     Dim conn As New OleDb.OleDbConnection(ConfigurationManager.ConnectionStrings("BookMeetConnString").ConnectionString)
>     conn.Open()
>     Dim cmd As New OleDbCommand("INSERT INTO Events (EventTitle, EventDescription, EventDate,EventCategory, CreatedBy, StreetAddress, Town, Country, Coordinates) VALUES (@f1,@f2,@f3,@f4,@f5,@f6,@f7,@f8,@f9)", conn)
>     cmd.Parameters.AddWithValue("@f1", tb_eventtitle.Text)
>     cmd.Parameters.AddWithValue("@f2", tb_eventdescription.Text)
>     cmd.Parameters.AddWithValue("@f3", DateTime.ParseExact(tb_eventdate.Text, "dd/MM/yyyy", CultureInfo.InvariantCulture))
>     cmd.Parameters.AddWithValue("@f4", dd_eventcategory.SelectedIndex + 1)
>     cmd.Parameters.AddWithValue("@f5", User.Identity.Name)
>     cmd.Parameters.AddWithValue("@f6", txtStreetAddress.Text)
>     cmd.Parameters.AddWithValue("@f7", txtSuburb.Text)
>     cmd.Parameters.AddWithValue("@f8", txtCountry.Text)
>     cmd.Parameters.AddWithValue("@f9", lb_showcoordinates.Text)
>     cmd.ExecuteNonQuery()
>     conn.Close()
>     Response.Redirect("calendar.aspx")
> End Sub 
> ```

不幸的是，我没有得到想要的结果；我标签的内容被留空（故意）所以我想知道我做错了什么？VB.NET 中评估文本框/标签/任何其他基于文本的 asp 控件（即 .Text）的内容是否为空的正确表达式是什么？

这是我的调试过程截图：

![什么都没有，或者可能没有？](https://i.stack.imgur.com/sfAAz.png)

如您所见， lb_showcoordinates.Text 的内容为空（或至少为“”）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T00:32:31.570

你应该使用`String.IsNullOrEmtpy`：

```
If String.IsNullOrEmpty(lb_showcoordinates.Text) Then
    lb_nocoordinatesmessage.Text = "Please validate your meeting location above using the <b>Validate Address</b> button"
    Console.WriteLine("okay")
End If 
```

当 a`textbox`为空时，其内容为空字符串，因此`Nothing`无法进行比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T18:11:59.653

您还可以添加一个 requiredfieldvalidator，它要求用户输入该字段，然后您知道在调用按钮时它已被填写。

# solr - 使用 Chef 安装 PECL 扩展 (Solr)

> ID：16005963
> 
> 赞同：1
> 
> 时间：2013-04-15T00:31:25.443
> 
> 标签：solr, pear, chef-infra, vagrant, pecl

我正在尝试使用 Chef(-Solo)（通过 Vagrant）安装 SOLR PECL 扩展。当我试图将它安装在 Zend Server CE 盒子上时，我无法使用或访问普通的 php 食谱（AFAIK），所以我不能使用：

```
php_pear 'solr' do
  action :install
end 
```

在我的 server.rb 文件中，我有一个类似的块：

```
execute "install solr module" do
 command "printf \"\n\n\n\" | pecl install -n solr"
 command "echo 'extension=solr.so' > /usr/local/zend/etc/conf.d/solr.ini"
 not_if "test -f /usr/local/zend/lib/php_extensions/solr.so"
end 
```

我已经满足了所有依赖项，如果我通过 VM 中的命令行运行它，它可以工作 - 但它似乎永远不会通过 Vagrant/Chef 配置运行（或者确实不会抛出错误，但扩展似乎永远不会是创建）。

我在这里想念什么？

*   有没有一种方法可以在`php_pear`不使用整个配方的情况下使用 LWRP？（我尝试将其添加到`metadata.rb`文件中，但似乎没有帮助
*   失败了，我该如何调试这个命令失败的原因？（我已经尝试增加调试输出，但它没有显示此命令的任何更详细信息，例如。`VAGRANT_LOG=info vagrant provision`

如果需要，可以在这里查看整个项目：[https ://github.com/alackmann/vagrant-zend-server/tree/master/vagrant](https://github.com/alackmann/vagrant-zend-server/tree/master/vagrant)

我还发现这是一个类似的问题，但无法弄清楚如何将其应用于我的情况：[https ://serverfault.com/questions/363072/how-to-use-only-chefs-php- pear-provider-from-php-cookbook](https://serverfault.com/questions/363072/how-to-use-only-chefs-php-pear-provider-from-php-cookbook)

# c - GCC 编译器警告：赋值使指针从整数而不进行强制转换

> ID：16005965
> 
> 赞同：1
> 
> 时间：2013-04-15T00:31:37.240
> 
> 标签：c, pointers

我有一个指向结构的指针`tempA`：

```
struct SLNode *tempA; 
```

我有一个函数叫`sl_find Node()`我这样称呼它：

```
tempA = sl_findNode(&list, word); 
```

函数`sl_findNode()`如下所示：

```
 struct SLNode* sl_findNode (struct SLNode **list, char *str1) {
      assert (list);
      struct SLNode *curr = *list;
      while (curr) {
        if (strcmp(curr->word, str1) == 0) {
          return curr;
        }
        curr = curr->next;
      }
      return NULL;
    } 
```

最后，`list`声明为：

```
struct SLNode *list = NULL; 
```

编译器在第 77 行给了我警告：

> tempA = sl_findNode(&list, word);

有谁知道为什么？

Word 是一个字符数组：

```
char word[30]; 
```

我从文本文件中读取字符并将它们循环添加到单词中

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T00:36:05.193

当函数声明正确时（在您的情况下，它看起来正确），当定义是在第一次使用函数之后并且没有原型时会发生这种警告。

解决这个问题需要在第一次使用之前将函数移动为文本，或者在第一次使用之前添加函数的原型，如下所示：

```
struct SLNode* sl_findNode (struct SLNode **list, char *str1); 
```

# applescript - 使用 Applescript 关闭 VMware Fusion 虚拟机并安全备份它们

> ID：16005968
> 
> 赞同：2
> 
> 时间：2013-04-15T00:31:52.817
> 
> 标签：applescript, backup, vmware, virtual-machine, fusion

VMware 建议不要使用 Apple 的 Time Machine 备份虚拟机 (VM)，除非使用快照。但是，许多有经验的高级用户强烈反对使用快照，因为每个快照都链接在前一个快照上，这意味着任何链接的故障都可能导致您的虚拟机失败，并增加虚拟机的复杂性并降低其性能.

因此，我正在尝试编写一个 AppleScript 来关闭所有正在运行的 VM，然后复制备份。那应该是干净和简单的。

但是，我在挂起的 VM 上遇到了一些问题（因此 Boot Camp VM 不是问题，因为它们无法挂起）。如果虚拟机被挂起，那么您需要将其关闭（关闭）才能干净地备份它。关闭挂起的 VM 的唯一方法是先恢复它，然后再关闭它。如果虚拟机在自己的窗口中打开，这对 AppleScript 来说不是问题。VMWare Fusion 正确地将此 VM 报告为已挂起，从而允许脚本首先将其恢复，然后将其关闭。

不幸的是，如果 VM 窗口已关闭，因此它没有自己的窗口，而仅出现在虚拟机库中，则 VMware Fusion 不会正确地将 VM 报告为已挂起。即使 VM 已挂起，VMware Fusion 也会将该状态报告为“已关闭”，这意味着将备份已挂起的 VM。

您可以在此处找到更多详细信息：

[http://communities.vmware.com/message/2227680#2227680](http://communities.vmware.com/message/2227680#2227680)

这是我的代码。非常欢迎您提供反馈、建议和改进！

```
(*
Applescript 应用程序在系统空闲一段时间后自动备份虚拟机

要求：
[ ] 必须在 VMWare Fusion 的“首选项...”->“常规”->“关闭虚拟机时：”中选择“关闭虚拟机”——这是必需的，因为如果关闭虚拟机窗口，VMware 会报告虚拟机的电源状态为“关闭”，即使虚拟机实际上是“挂起”；并且从文档对象无法访问其窗口
[ ] 在“系统偏好设置...”->“节能”->“电源适配器”->“计算机睡眠”中必须设置为大于 backup_after + ( check_every * 2 ) 的值

http://culturedcode.com/forums/read.php?7,30174,30597

要使其可运行，请另存为应用程序。
要在 Dock 中不显示，请在已创建应用程序包的 Info.plist 中设置 LSBackgroundOnly，或在
http://groups.google.com/group/macenterprise/browse_thread/thread/be7db35451e1dc70
*)

属性 afterHours : 8 --23 -- 一天中开始监控空闲的小时
属性 workDayStarts : 5 -- 一天中停止监控空闲的小时
属性 backupDuration : 2 -- 备份虚拟机所需的小时数

global backup_after, check_every -- TODO：这些真的需要全局吗？

将 backup_after 设置为 10 --(40 * 60) -- 以秒为单位
将 check_every 设置为 5 --(10 * 60)

属性 cancelTimer : 60 -- 用户必须取消备份的秒数

属性虚拟化应用程序：“VMware Fusion”——变量不能在“告诉应用程序”语句中使用或无法编译，因此搜索并替换“VMware Fusion”的其他实例
属性 resumeDelay : 120 --(4 * 60) -- 以秒为单位；通常需要 backup_after 然后

                -- 测试看看今天是否已经完成备份
                如果我的 hasNotBackedUpToday(backupLocation) 那么

                    -- 警告用户虚拟机应用程序将强制关闭虚拟机
                    重复 secondsLeft 从 cancelTimer 到 1 by -1
                        设置 dialogResult 以显示警报 virtualizationApp &" is about to force quit and backup virtual machines" message "This AppleScript is set to force close" & virtualizationApp & "，如果它是打开的，它的虚拟机，然后备份虚拟机机器。” & return & return & "单击\"取消\"将这些操作延迟到以后，或按\"确定\"退出并备份。" & return & return & secondsLeft & "还剩几秒"。按钮 {"OK", "Cancel"} 默认按钮 "OK" 作为警告放弃 1
                        如果 secondsLeft = 1 或（dialogResult 返回的按钮）为“OK”，则

                            -- 强制虚拟机关机，退出虚拟机应用
                            我的 powerOffVMsQuitFusion()

                            -- 备份虚拟机
                            如果我的 backupVMs(backupLocation, virtualMachinesLocation) 那么
                                显示对话框“成功备份虚拟机”。
                            别的
                                显示对话框“无法备份虚拟机”。
                            万一

                            退出重复
                        else if (dialogResult 返回的按钮) 是 "Cancel" then
                            显示对话框“备份延迟到以后”。
                            退出重复
                        万一
                    结束重复
                别的
                    return (8 * 60 * 60) -- 今天已备份，请在 8 小时后重试
                万一
            万一

            返回 check_every

        万一
    结束告诉
结束空闲

(*
 * 检查过去 16 小时内是否有备份
 *)
on hasNotBackedUpToday(theLocation)
    告诉应用程序“Finder”
        将 bLocation 设置为 POSIX 文件 theLocation 作为别名
        按创建日期排序（获取 bLocation 的文件夹）
        将 myResult 设置为结果
        将 myResultCount 设置为 myResult 的计数

        -- 如果文件夹不包含任何文件，则会引发错误
        如果 (myResultCount 不等于 0) 那么
            将文件设置为（myResult 的第 1 项）
            如果文件的创建日期大于 ((current date) - (16 * 60 * 60)) 那么
                --display dialog "今天已备份。"
                返回假
            万一
        万一

        -- 如果已达到最大值，则删除备份
        如果 myResultCount ≥ numBackupsToKeep 则
            删除 myResult 的 myResultCount 项
        万一

        将 currDate 设置为当前日期
        将文件夹名称设置为 ("" & (currDate 年份) & "-" & (currDate 月份) & "-" & (currDate 日期))
        使用属性 {name:folderName} 在 bLocation 创建新文件夹

        返回真
    结束告诉
结束 hasNotBackedUpToday

(*
 * 强制虚拟机关机，退出虚拟机应用
 *)
on powerOffVMsQuitFusion()
    告诉应用程序“VMware Fusion”
        activate -- 除非 VMware 正在运行，否则无法测试 VM 是否已挂起
        delay 10 -- 给应用程序打开的时间

        在文档中使用 currVM 重复
            将 powerState 设置为 currVM 的电源状态

            -- 关机对挂起的虚拟机不起作用
            如果 powerState 已挂起，则 VM 报告已关闭，即使实际上已挂起，如果 VM 自己的窗口打开，则正确报告（VM 库，右键单击 VM，然后选择“显示 Windows”）
                --display dialog "VM" & (name of currVM) & "issuspended"
                resume currVM -- 仅在实际挂起时才想恢复，否则它会启动关闭的 VM
                delay resumeDelay -- 给 VM 时间恢复
            万一

            如果 powerState 已开启，则
                --显示对话框“名称：” &（currVM 的名称）
                --显示对话框“名称：” &（currVM 的操作系统名称）

                -- XP 未保存的文档可防止断电，除非强制，Win7 无需强制即可工作
                尝试
                    (*如果 (currVM 的操作系统名称) 包含 "7" then
                        --display dialog "Win 7: will power off without out force"
                        关闭currVM
                        延迟 powerOffDelay
                    别的*）
                    --显示对话框“非 Win 7（XP 等）：会强制关机”
                    强制关闭 currVM
                    - 万一
                错误 errMsg 编号 errNum
                    告诉应用程序“Finder”
                        显示对话框 ("errMsg: " & errMsg & ", errNum: " & errNum)
                    结束告诉
                结束尝试

            万一
        结束重复

        退出
        延迟 5

    结束告诉
结束 powerOffVMsQuitFusion

(*
 * 备份虚拟机，必要时删除最旧的备份
 *)
在备份虚拟机上（此位置，此虚拟机位置）
    告诉应用程序“Finder”
        将 thisBackupLocation 设置为 POSIX 文件 thisLocation 作为别名
        按创建日期排序（获取 thisBackupLocation 的文件夹）
        将 myFinderResult 设置为结果

        -- 如果文件夹不包含任何文件，则会引发错误
        如果 ((myFinderResult 的计数) = 0) 那么
            显示对话框“错误。刚刚创建的文件夹发生了什么？”
            返回假
        别的
            将 backupFolder 设置为（myFinderResult 的第 1 项）
            --display dialog "Folder name: " & (name of backupFolder)

            -- 检查文件夹是否为空
            if ((count files of backupFolder) 不等于 0) 那么
                显示对话框“错误。备份文件夹不为空。”
                返回假
            万一

            -- 复制虚拟机到备份文件夹
            --将 vmsLocation 设置为别名“Macintosh HD:Users:mikeong:Documents:Virtual Machines”
            将 vmsLocation 设置为 thisVMsLocation 的别名
            将 vmsLocation 的每个文件复制到 backupFolder

            返回真
        万一
    结束告诉
结束备份虚拟机

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T02:15:10.880

您可能希望查看以下脚本：[http ://www.lbackup.org/developer/vmware_fusion_virtual_machine_backup](http://www.lbackup.org/developer/vmware_fusion_virtual_machine_backup)

我怀疑有一些细微的变化，它会关闭虚拟机而不是暂停虚拟机。

# c++ - SDL 2.0 -> 传递了一个 NULL 互斥体

> ID：16005970
> 
> 赞同：4
> 
> 时间：2013-04-15T00:32:03.710
> 
> 标签：c++, sdl, sdl-2

当我使用 SDL 2.0 编译一个简单的示例时，在命令 SDL_CreateWindow 之后，会发生以下错误：“传递了一个 NULL 互斥体”。

我正在使用静态库项目。我也在 OSX 10.8.3 上进行测试。

这通知在命令行编译中遗漏了什么？

下面是生成程序生成和代码示例的命令行。

编译器：

```
clang++ -I "TestSDL/sdl/include" -Wall -c -x c++ -arch x86_64 -std=c++11 -stdlib=libc++ -MMD -MP -MF"src/main.d" -MT"src/main.d" -o "src/main.o" "../src/main.cpp" 
```

链接器：

```
clang++ -L "TestSDL/sdl/lib" -arch x86_64 -stdlib=libc++ -Bstatic -framework GLUT -framework ForceFeedBack -framework IOKit -framework CoreAudio -framework CoreFoundation -framework Carbon -framework AudioUnit -framework AudioToolbox -framework OpenGL -framework Cocoa -o "TestSDL" ./src/main.o -lSDL2 
```

代码：

```
#include "SDL.h"
#include <iostream>

using namespace std;

void checkSDLError(int line = -1)
{
    const char *error = SDL_GetError();

    if (*error != '\0') {
        cout << "SDL Error: " << error << " line: " << line << endl;
        SDL_ClearError();
    }
}

int main(int argc, char **argv)
{
    if (SDL_Init(SDL_INIT_EVERYTHING) < 0) {
        return false;
    }

    SDL_Window * window = SDL_CreateWindow("Test SDL", SDL_WINDOWPOS_CENTERED,
            SDL_WINDOWPOS_CENTERED, 512, 512,
            SDL_WINDOW_SHOWN);
    checkSDLError(__LINE__);

    if (!window) {
        cout << "Unable to create window" << endl;
        return 1;
    }

    SDL_Event event;
    while (true) {
        while (SDL_PollEvent(&event)) {
            switch (event.type) {
                case SDL_QUIT:
                    return 1;

                default:
                    break;
            }
        }
    }

    SDL_DestroyWindow(window);
    SDL_Quit();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T20:46:10.603

你做错了。**如果**window == NULL，您应该**只**调用 checkSDLError() 。

 **[http://wiki.libsdl.org/moin.fcg/SDL_CreateWindow](http://wiki.libsdl.org/moin.fcg/SDL_CreateWindow)

> 返回创建的窗口或失败时返回 NULL；调用 SDL_GetError() 获取更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T00:21:47.243

在与列表 (SDL [http://lists.libsdl.org/listinfo.cgi/sdl-libsdl.org](http://lists.libsdl.org/listinfo.cgi/sdl-libsdl.org) ) 的对话中，我以与 phpBoing 报告的方式相同的方式获知。最近怎么有几个关于这个问题的报告，为了不再出现这个问题而进行了调整（ [http://hg.libsdl.org/SDL/rev/f8e3dcfed59 ）。](http://hg.libsdl.org/SDL/rev/f8e3dcefed59)

谢谢大家。**

# javascript - 如何处理多个div中的多个单选按钮

> ID：16005971
> 
> 赞同：1
> 
> 时间：2013-04-15T00:32:27.400
> 
> 标签：javascript, jquery

我在容器中的输入字段很少，用户可以将这些字段相乘。我需要根据容器更改输入字段的名称。

```
<div class="stations">
 <input type="radio" name="pp[prc][0][station][0][id]">
 <input type="radio" name="pp[prc][0][station][1][id]">
</div> 
```

这是我的 HTML 表单。

```
$(".stations").each(function(sIndex){
//Loop thru all .station
  $("input:radio", $(this)).each(function(rIndex){
    //Loop thru all radio buttons inside that container and change their names accordingly
   $("input:radio", $(this)).attr('name','pp[prc]['+sIndex+'][stations]['+rIndex+'][id]');
  });
}); 
```

当我这样做时，由于某种原因，当用户复制`<div class="station">`及其内容时，单选按钮的名称不会相应地更改。我哪里做错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T00:39:08.937

您正在使用`$(selector, context)`并且输入元素不能有子元素，您应该编码：

```
$(this).attr('name', '...'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T00:48:59.020

看起来你对选择器有一些问题。试试这样：

```
//Loop through each .station
$(".stations").each(function(sIndex){

    //Loop through each radio buttons inside the container
    $(this).find("input:radio").each(function(rIndex){

        // Change the radio name attribute
        $(this).attr('name','pp[prc]['+sIndex+'][stations]['+rIndex+'][id]');
    });
}); 
```

[工作的jsFiddle](http://jsfiddle.net/daCrosby/zzMgM/1/)

[这是一个带有屏幕名称的 jsFiddle，以便更快地查看。](http://jsfiddle.net/daCrosby/zzMgM/2/)

# c# - 使用 C# 即席

> ID：16005973
> 
> 赞同：0
> 
> 时间：2013-04-15T00:32:36.263
> 
> 标签：c#, adhoc

我使用的是 Windows 8，最终意识到他不再支持创建 Ad Hoc 网络。创建此类网络的唯一可能方法是通过控制台命令：

```
netsh wlan set hostednetwork mode=alow ssid=ssid key=key
netsh wlan start hostednetwork 
```

我开始在 C# 中使用执行命令控制台的函数使用此示例执行程序：[使用 C# 执行 Shell 命令](http://www.digitalcoding.com/Code-Snippets/C-Sharp/C-Code-Snippet-Execute-Shell-Commands-from-Net.html)

不幸的是，有些命令只能在管理员模式下工作，我无法通过代码直接让控制台命令以管理员身份工作。

**这是我的问题：** C# 中是否有任何库或 API 可以创建 Ad Hoc 网络？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T00:48:52.317

您是否以管理员身份运行程序？如果您在调试器中运行它，那么以管理员身份运行调试器也会使您的程序运行。

# sql - 在桌子间移动

> ID：16005978
> 
> 赞同：-1
> 
> 时间：2013-04-15T00:33:45.230
> 
> 标签：sql, sql-server

我有一个表格，其中包含候选人培训课程的开始日期和结束日期，并且需要在表格中移动，检查候选人之前的记录结束日期是否早于他们当前记录的开始日期。

换句话说，我需要检查候选人培训记录是否重叠，如果重叠，我需要能够将不良记录发送到另一个表。

我在这里添加了一个示例，其中所有日期都不正确，因为所有结束日期都在下一个记录开始日期之后。

我已经尝试过 while 循环和游标，但我看不到一种方法来存储一条记录中的值，同时移动到下一条记录以进行比较。谢谢。

```
PERS_ID PERS_TYPE_SD    PERS_TYPE_ED
6444    2006-08-01 00:00:00.000 2018-07-29 00:00:00.000
6444    2009-08-01 00:00:00.000 2012-07-31 00:00:00.000
6444    2007-08-01 00:00:00.000 2009-07-31 00:00:00.000 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T00:49:44.477

```
select t1.*, t2.*
from table as t1 
join table as t2 
  on t2.PERS_TYPE_SD > t1.PERS_TYPE_SD 
 and t2.PERS_TYPE_SD < t1.PERS_TYPE_ED 
 and t1.PERS_ID < t2.PERS_ID  
order by  t1.PERS_ID, t2.PERS_ID 
```

# php - 将图片从上传按钮添加到您的主页

> ID：16005980
> 
> 赞同：-5
> 
> 时间：2013-04-15T00:34:28.707
> 
> 标签：php

标题几乎概括了它。基本上，我在单独的页面上有一个上传按钮，我希望上传的图像放置在主页的特定位置。有谁知道做到这一点的最佳方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T00:38:26.507

您将需要服务器端技术来接受图像。

在服务器端，您需要将图像保存在某处。

然后，无论是通过 AJAX 还是通过重新加载页面，您都需要在服务器上嵌入一个指向图像的 img-tag

# java - 如何比较屏幕的宽度大小和字符串的大小？

> ID：16005989
> 
> 赞同：0
> 
> 时间：2013-04-15T00:35:36.563
> 
> 标签：java, android, string

因此，出于我的特殊原因，我需要确保`String`（放置在 TextView 中）大小（以像素为单位）不超过设备的宽度大小（以像素为单位）。要获得我使用的屏幕宽度：

```
 final float scale = context.getResources().getDisplayMetrics().density;
    WindowManager wm = (WindowManager) context.getSystemService(Context.WINDOW_SERVICE);
    Display display = wm.getDefaultDisplay();
    try{
        Point size = new Point();
        display.getSize(size);
        screenWidth = size.x;
    }catch(NoSuchMethodError e){
        screenWidth = display.getWidth();
    }
    screenWidth = screenWidth - ((int) (10 * scale + 0.5f)); //takes into account a 10dp margin 
```

并获得我使用的字符串的长度：

```
paint.measureText(string); 
```

其中 string 是一个`String`对象，而 paint 是一个`Paint`对象。**我面临的问题是：**方法`measureText`是说它`String`小于屏幕的长度，即使它长得多。我忽略了什么吗？有没有更好的方法来做到这一点？任何帮助、建议或意见将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T18:57:04.720

我一般用过：

```
 paint.getTextBounds 
```

对于这种情况，发现它非常准确。

我还发现，`onSizeChanged`在自定义版本中覆盖`TextView`（保持其他所有内容相同）意味着我可以在需要时直接修复视图的大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T18:52:01.967

用我提供的代码来解决我的问题并不容易。对于我提供的代码是正确的。问题是我`Paint`按如下方式创建了对象：

```
Paint paint = new Paint(); 
```

然后我引用了这个`measureText(string)`方法。这样做的问题是它没有考虑我给这个子类的文本大小`TextView`。所以，为了解决这个问题，我所要做的就是将上面的代码更改为：

```
Paint paint = this.getPaint(); 
```

# c# - asp.net MVC 4 模型 [Key] 属性无法识别

> ID：16005996
> 
> 赞同：5
> 
> 时间：2013-04-15T00:37:04.923
> 
> 标签：c#, asp.net-mvc, model

```
using System;
using System.ComponentModel.DataAnnotations;
using System.Data.Entity;

//my model
public class Roll
{
    [Key]
    public uint Id { get; set; }
    public long RandomSeed { get; set; }
    public string Expression { get; set; }
    public DateTime DateCreated { get; set; }
    public long Total { get; set; }
}

//my context
public class DiceboxContext : DbContext
{
    public DbSet<Roll> Rolls { get; set; }
}

//my controller 

using System;
using System.Collections.Generic;
using System.Data;
using System.Data.Entity;
using System.Linq;
using System.Web;
using System.Web.Mvc;

namespace dicebox.Controllers
{
    public class RollController : Controller
    {
        private DiceboxContext db = new DiceboxContext();

        //
        // GET: /Roll/

        public ActionResult Index()
        {
            return View(db.Rolls.ToList());
        }

        //
        // GET: /Roll/Details/5

        public ActionResult Details(int id = 0)
        {
            Roll roll = db.Rolls.Find(id);
            if (roll == null)
            {
                return HttpNotFound();
            }
            return View(roll);
        }

        //
        // GET: /Roll/Create

        public ActionResult Create()
        {
            return View();
        }

        //
        // POST: /Roll/Create

        [HttpPost]
        public ActionResult Create(Roll roll)
        {
            if (ModelState.IsValid)
            {
                db.Rolls.Add(roll);
                db.SaveChanges();
                return RedirectToAction("Index");
            }

            return View(roll);
        }

        //
        // GET: /Roll/Edit/5

        public ActionResult Edit(int id = 0)
        {
            Roll roll = db.Rolls.Find(id);
            if (roll == null)
            {
                return HttpNotFound();
            }
            return View(roll);
        }

        //
        // POST: /Roll/Edit/5

        [HttpPost]
        public ActionResult Edit(Roll roll)
        {
            if (ModelState.IsValid)
            {
                db.Entry(roll).State = EntityState.Modified;
                db.SaveChanges();
                return RedirectToAction("Index");
            }
            return View(roll);
        }

        //
        // GET: /Roll/Delete/5

        public ActionResult Delete(int id = 0)
        {
            Roll roll = db.Rolls.Find(id);
            if (roll == null)
            {
                return HttpNotFound();
            }
            return View(roll);
        }

        //
        // POST: /Roll/Delete/5

        [HttpPost, ActionName("Delete")]
        public ActionResult DeleteConfirmed(int id)
        {
            Roll roll = db.Rolls.Find(id);
            db.Rolls.Remove(roll);
            db.SaveChanges();
            return RedirectToAction("Index");
        }

        protected override void Dispose(bool disposing)
        {
            db.Dispose();
            base.Dispose(disposing);
        }
    }
} 
```

其中大部分是样板自动生成的代码。每当我点击除 get /Roll/Create 操作之外的任何操作时，它都会出现以下错误消息：

> System.Data.Entity.Edm.EdmEntityType: : EntityType 'Roll' 没有定义键。定义此 EntityType 的键。
> 
> System.Data.Entity.Edm.EdmEntitySet：EntityType：EntitySet 'Rolls' 基于没有定义键的类型 'Roll'。

但正如您已经看到的那样，定义了一个键。还为支持此模型的数据库表“Rolls”定义了一个键。我从谷歌得到的每个答案都建议添加 [Key] 注释，我已经有了。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T05:34:38.920

将 Id 更改为 int：

```
public int Id { get; set; } 
```

我将您的代码复制到一个新的 MVC 项目中，搭建了索引、创建和编辑视图，并且我能够毫无问题地创建和编辑 Rolls。